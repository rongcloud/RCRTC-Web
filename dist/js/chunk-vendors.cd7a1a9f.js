(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-vendors"],{"00ee":function(e,t,n){var i=n("b622"),r=i("toStringTag"),o={};o[r]="z",e.exports="[object z]"===String(o)},"0366":function(e,t,n){var i=n("e330"),r=n("59ed"),o=i(i.bind);e.exports=function(e,t){return r(e),void 0===t?e:o?o(e,t):function(){return e.apply(t,arguments)}}},"03d6":function(e,t,n){var i=n("9c0e"),r=n("6ca1"),o=n("39ad")(!1),s=n("5a94")("IE_PROTO");e.exports=function(e,t){var n,a=r(e),c=0,l=[];for(n in a)n!=s&&i(a,n)&&l.push(n);while(t.length>c)i(a,n=t[c++])&&(~o(l,n)||l.push(n));return l}},"051b":function(e,t,n){var i=n("1a14"),r=n("10db");e.exports=n("0bad")?function(e,t,n){return i.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},"057f":function(e,t,n){var i=n("c6b6"),r=n("fc6a"),o=n("241c").f,s=n("f36a"),a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],c=function(e){try{return o(e)}catch(t){return s(a)}};e.exports.f=function(e){return a&&"Window"==i(e)?c(e):o(r(e))}},"05f5":function(e,t,n){var i=n("7a41"),r=n("ef08").document,o=i(r)&&i(r.createElement);e.exports=function(e){return o?r.createElement(e):{}}},"06cf":function(e,t,n){var i=n("83ab"),r=n("c65b"),o=n("d1e7"),s=n("5c6c"),a=n("fc6a"),c=n("a04b"),l=n("1a2d"),u=n("0cfb"),d=Object.getOwnPropertyDescriptor;t.f=i?d:function(e,t){if(e=a(e),t=c(t),u)try{return d(e,t)}catch(n){}if(l(e,t))return s(!r(o.f,e,t),e[t])}},"072d":function(e,t,n){"use strict";var i=n("0bad"),r=n("9876"),o=n("fed5"),s=n("1917"),a=n("0983"),c=n("9fbb"),l=Object.assign;e.exports=!l||n("4b8b")((function(){var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach((function(e){t[e]=e})),7!=l({},e)[n]||Object.keys(l({},t)).join("")!=i}))?function(e,t){var n=a(e),l=arguments.length,u=1,d=o.f,h=s.f;while(l>u){var p,f=c(arguments[u++]),g=d?r(f).concat(d(f)):r(f),m=g.length,_=0;while(m>_)p=g[_++],i&&!h.call(f,p)||(n[p]=f[p])}return n}:l},"07ac":function(e,t,n){var i=n("23e7"),r=n("6f53").values;i({target:"Object",stat:!0},{values:function(e){return r(e)}})},"07fa":function(e,t,n){var i=n("50c4");e.exports=function(e){return i(e.length)}},"0983":function(e,t,n){var i=n("c901");e.exports=function(e){return Object(i(e))}},"0a06":function(e,t,n){"use strict";var i=n("c532"),r=n("30b5"),o=n("f6b4"),s=n("5270"),a=n("4a7b"),c=n("848b"),l=c.validators;function u(e){this.defaults=e,this.interceptors={request:new o,response:new o}}u.prototype.request=function(e){"string"===typeof e?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=a(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;void 0!==t&&c.assertOptions(t,{silentJSONParsing:l.transitional(l.boolean,"1.0.0"),forcedJSONParsing:l.transitional(l.boolean,"1.0.0"),clarifyTimeoutError:l.transitional(l.boolean,"1.0.0")},!1);var n=[],i=!0;this.interceptors.request.forEach((function(t){"function"===typeof t.runWhen&&!1===t.runWhen(e)||(i=i&&t.synchronous,n.unshift(t.fulfilled,t.rejected))}));var r,o=[];if(this.interceptors.response.forEach((function(e){o.push(e.fulfilled,e.rejected)})),!i){var u=[s,void 0];Array.prototype.unshift.apply(u,n),u=u.concat(o),r=Promise.resolve(e);while(u.length)r=r.then(u.shift(),u.shift());return r}var d=e;while(n.length){var h=n.shift(),p=n.shift();try{d=h(d)}catch(f){p(f);break}}try{r=s(d)}catch(f){return Promise.reject(f)}while(o.length)r=r.then(o.shift(),o.shift());return r},u.prototype.getUri=function(e){return e=a(this.defaults,e),r(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},i.forEach(["delete","get","head","options"],(function(e){u.prototype[e]=function(t,n){return this.request(a(n||{},{method:e,url:t,data:(n||{}).data}))}})),i.forEach(["post","put","patch"],(function(e){u.prototype[e]=function(t,n,i){return this.request(a(i||{},{method:e,url:t,data:n}))}})),e.exports=u},"0ae2":function(e,t,n){var i=n("9876"),r=n("fed5"),o=n("1917");e.exports=function(e){var t=i(e),n=r.f;if(n){var s,a=n(e),c=o.f,l=0;while(a.length>l)c.call(e,s=a[l++])&&t.push(s)}return t}},"0b42":function(e,t,n){var i=n("da84"),r=n("e8b5"),o=n("68ee"),s=n("861d"),a=n("b622"),c=a("species"),l=i.Array;e.exports=function(e){var t;return r(e)&&(t=e.constructor,o(t)&&(t===l||r(t.prototype))?t=void 0:s(t)&&(t=t[c],null===t&&(t=void 0))),void 0===t?l:t}},"0b99":function(e,t,n){"use strict";var i=n("19fa")(!0);n("393a")(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=i(t,n),this._i+=e.length,{value:e,done:!1})}))},"0bad":function(e,t,n){e.exports=!n("4b8b")((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},"0c47":function(e,t,n){var i=n("da84"),r=n("d44e");r(i.JSON,"JSON",!0)},"0cb2":function(e,t,n){var i=n("e330"),r=n("7b0b"),o=Math.floor,s=i("".charAt),a=i("".replace),c=i("".slice),l=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,u=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,i,d,h){var p=n+e.length,f=i.length,g=u;return void 0!==d&&(d=r(d),g=l),a(h,g,(function(r,a){var l;switch(s(a,0)){case"$":return"$";case"&":return e;case"`":return c(t,0,n);case"'":return c(t,p);case"<":l=d[c(a,1,-1)];break;default:var u=+a;if(0===u)return r;if(u>f){var h=o(u/10);return 0===h?r:h<=f?void 0===i[h-1]?s(a,1):i[h-1]+s(a,1):r}l=i[u-1]}return void 0===l?"":l}))}},"0cfb":function(e,t,n){var i=n("83ab"),r=n("d039"),o=n("cc12");e.exports=!i&&!r((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},"0d3b":function(e,t,n){var i=n("d039"),r=n("b622"),o=n("c430"),s=r("iterator");e.exports=!i((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,i){t["delete"]("b"),n+=i+e})),o&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[s]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},"0d51":function(e,t,n){var i=n("da84"),r=i.String;e.exports=function(e){try{return r(e)}catch(t){return"Object"}}},"0df6":function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},"0e15":function(e,t,n){var i=n("597f");e.exports=function(e,t,n){return void 0===n?i(e,t,!1):i(e,n,!1!==t)}},"0fae":function(e,t,n){},"107c":function(e,t,n){var i=n("d039"),r=n("da84"),o=r.RegExp;e.exports=i((function(){var e=o("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},1098:function(e,t,n){"use strict";t.__esModule=!0;var i=n("17ed"),r=c(i),o=n("f893"),s=c(o),a="function"===typeof s.default&&"symbol"===typeof r.default?function(e){return typeof e}:function(e){return e&&"function"===typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":typeof e};function c(e){return e&&e.__esModule?e:{default:e}}t.default="function"===typeof s.default&&"symbol"===a(r.default)?function(e){return"undefined"===typeof e?"undefined":a(e)}:function(e){return e&&"function"===typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":"undefined"===typeof e?"undefined":a(e)}},"10db":function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},1276:function(e,t,n){"use strict";var i=n("2ba4"),r=n("c65b"),o=n("e330"),s=n("d784"),a=n("44e7"),c=n("825a"),l=n("1d80"),u=n("4840"),d=n("8aa5"),h=n("50c4"),p=n("577e"),f=n("dc4a"),g=n("f36a"),m=n("14c3"),_=n("9263"),v=n("9f7f"),y=n("d039"),C=v.UNSUPPORTED_Y,E=4294967295,b=Math.min,T=[].push,S=o(/./.exec),R=o(T),I=o("".slice),w=!y((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));s("split",(function(e,t,n){var o;return o="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var o=p(l(this)),s=void 0===n?E:n>>>0;if(0===s)return[];if(void 0===e)return[o];if(!a(e))return r(t,o,e,s);var c,u,d,h=[],f=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),m=0,v=new RegExp(e.source,f+"g");while(c=r(_,v,o)){if(u=v.lastIndex,u>m&&(R(h,I(o,m,c.index)),c.length>1&&c.index<o.length&&i(T,h,g(c,1)),d=c[0].length,m=u,h.length>=s))break;v.lastIndex===c.index&&v.lastIndex++}return m===o.length?!d&&S(v,"")||R(h,""):R(h,I(o,m)),h.length>s?g(h,0,s):h}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:r(t,this,e,n)}:t,[function(t,n){var i=l(this),s=void 0==t?void 0:f(t,e);return s?r(s,t,i,n):r(o,p(i),t,n)},function(e,i){var r=c(this),s=p(e),a=n(o,r,s,i,o!==t);if(a.done)return a.value;var l=u(r,RegExp),f=r.unicode,g=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.unicode?"u":"")+(C?"g":"y"),_=new l(C?"^(?:"+r.source+")":r,g),v=void 0===i?E:i>>>0;if(0===v)return[];if(0===s.length)return null===m(_,s)?[s]:[];var y=0,T=0,S=[];while(T<s.length){_.lastIndex=C?0:T;var w,O=m(_,C?I(s,T):s);if(null===O||(w=b(h(_.lastIndex+(C?T:0)),s.length))===y)T=d(s,T,f);else{if(R(S,I(s,y,T)),S.length===v)return S;for(var k=1;k<=O.length-1;k++)if(R(S,O[k]),S.length===v)return S;T=y=w}}return R(S,I(s,y)),S}]}),!w,C)},"12f2":function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return{methods:{focus:function(){this.$refs[e].focus()}}}}},"14c3":function(e,t,n){var i=n("da84"),r=n("c65b"),o=n("825a"),s=n("1626"),a=n("c6b6"),c=n("9263"),l=i.TypeError;e.exports=function(e,t){var n=e.exec;if(s(n)){var i=r(n,e,t);return null!==i&&o(i),i}if("RegExp"===a(e))return r(c,e,t);throw l("RegExp#exec called on incompatible receiver")}},"14e9":function(e,t,n){e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=132)}({132:function(e,t,n){"use strict";n.r(t);var i=n(16),r=n(38),o=n.n(r),s=n(3),a=n(2),c={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}};function l(e){var t=e.move,n=e.size,i=e.bar,r={},o="translate"+i.axis+"("+t+"%)";return r[i.size]=n,r.transform=o,r.msTransform=o,r.webkitTransform=o,r}var u={name:"Bar",props:{vertical:Boolean,size:String,move:Number},computed:{bar:function(){return c[this.vertical?"vertical":"horizontal"]},wrap:function(){return this.$parent.wrap}},render:function(e){var t=this.size,n=this.move,i=this.bar;return e("div",{class:["el-scrollbar__bar","is-"+i.key],on:{mousedown:this.clickTrackHandler}},[e("div",{ref:"thumb",class:"el-scrollbar__thumb",on:{mousedown:this.clickThumbHandler},style:l({size:t,move:n,bar:i})})])},methods:{clickThumbHandler:function(e){e.ctrlKey||2===e.button||(this.startDrag(e),this[this.bar.axis]=e.currentTarget[this.bar.offset]-(e[this.bar.client]-e.currentTarget.getBoundingClientRect()[this.bar.direction]))},clickTrackHandler:function(e){var t=Math.abs(e.target.getBoundingClientRect()[this.bar.direction]-e[this.bar.client]),n=this.$refs.thumb[this.bar.offset]/2,i=100*(t-n)/this.$el[this.bar.offset];this.wrap[this.bar.scroll]=i*this.wrap[this.bar.scrollSize]/100},startDrag:function(e){e.stopImmediatePropagation(),this.cursorDown=!0,Object(a["on"])(document,"mousemove",this.mouseMoveDocumentHandler),Object(a["on"])(document,"mouseup",this.mouseUpDocumentHandler),document.onselectstart=function(){return!1}},mouseMoveDocumentHandler:function(e){if(!1!==this.cursorDown){var t=this[this.bar.axis];if(t){var n=-1*(this.$el.getBoundingClientRect()[this.bar.direction]-e[this.bar.client]),i=this.$refs.thumb[this.bar.offset]-t,r=100*(n-i)/this.$el[this.bar.offset];this.wrap[this.bar.scroll]=r*this.wrap[this.bar.scrollSize]/100}}},mouseUpDocumentHandler:function(e){this.cursorDown=!1,this[this.bar.axis]=0,Object(a["off"])(document,"mousemove",this.mouseMoveDocumentHandler),document.onselectstart=null}},destroyed:function(){Object(a["off"])(document,"mouseup",this.mouseUpDocumentHandler)}},d={name:"ElScrollbar",components:{Bar:u},props:{native:Boolean,wrapStyle:{},wrapClass:{},viewClass:{},viewStyle:{},noresize:Boolean,tag:{type:String,default:"div"}},data:function(){return{sizeWidth:"0",sizeHeight:"0",moveX:0,moveY:0}},computed:{wrap:function(){return this.$refs.wrap}},render:function(e){var t=o()(),n=this.wrapStyle;if(t){var i="-"+t+"px",r="margin-bottom: "+i+"; margin-right: "+i+";";Array.isArray(this.wrapStyle)?(n=Object(s["toObject"])(this.wrapStyle),n.marginRight=n.marginBottom=i):"string"===typeof this.wrapStyle?n+=r:n=r}var a=e(this.tag,{class:["el-scrollbar__view",this.viewClass],style:this.viewStyle,ref:"resize"},this.$slots.default),c=e("div",{ref:"wrap",style:n,on:{scroll:this.handleScroll},class:[this.wrapClass,"el-scrollbar__wrap",t?"":"el-scrollbar__wrap--hidden-default"]},[[a]]),l=void 0;return l=this.native?[e("div",{ref:"wrap",class:[this.wrapClass,"el-scrollbar__wrap"],style:n},[[a]])]:[c,e(u,{attrs:{move:this.moveX,size:this.sizeWidth}}),e(u,{attrs:{vertical:!0,move:this.moveY,size:this.sizeHeight}})],e("div",{class:"el-scrollbar"},l)},methods:{handleScroll:function(){var e=this.wrap;this.moveY=100*e.scrollTop/e.clientHeight,this.moveX=100*e.scrollLeft/e.clientWidth},update:function(){var e=void 0,t=void 0,n=this.wrap;n&&(e=100*n.clientHeight/n.scrollHeight,t=100*n.clientWidth/n.scrollWidth,this.sizeHeight=e<100?e+"%":"",this.sizeWidth=t<100?t+"%":"")}},mounted:function(){this.native||(this.$nextTick(this.update),!this.noresize&&Object(i["addResizeListener"])(this.$refs.resize,this.update))},beforeDestroy:function(){this.native||!this.noresize&&Object(i["removeResizeListener"])(this.$refs.resize,this.update)},install:function(e){e.component(d.name,d)}};t["default"]=d},16:function(e,t){e.exports=n("4010")},2:function(e,t){e.exports=n("5924")},3:function(e,t){e.exports=n("8122")},38:function(e,t){e.exports=n("e62d")}})},"159b":function(e,t,n){var i=n("da84"),r=n("fdbc"),o=n("785a"),s=n("17c2"),a=n("9112"),c=function(e){if(e&&e.forEach!==s)try{a(e,"forEach",s)}catch(t){e.forEach=s}};for(var l in r)r[l]&&c(i[l]&&i[l].prototype);c(o)},1609:function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},1626:function(e,t){e.exports=function(e){return"function"==typeof e}},"17c2":function(e,t,n){"use strict";var i=n("b727").forEach,r=n("a640"),o=r("forEach");e.exports=o?[].forEach:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}},"17ed":function(e,t,n){e.exports={default:n("511f"),__esModule:!0}},1836:function(e,t,n){var i=n("6ca1"),r=n("6438").f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(e){try{return r(e)}catch(t){return s.slice()}};e.exports.f=function(e){return s&&"[object Window]"==o.call(e)?a(e):r(i(e))}},1917:function(e,t){t.f={}.propertyIsEnumerable},"19aa":function(e,t,n){var i=n("da84"),r=n("3a9b"),o=i.TypeError;e.exports=function(e,t){if(r(t,e))return e;throw o("Incorrect invocation")}},"19fa":function(e,t,n){var i=n("fc5e"),r=n("c901");e.exports=function(e){return function(t,n){var o,s,a=String(r(t)),c=i(n),l=a.length;return c<0||c>=l?e?"":void 0:(o=a.charCodeAt(c),o<55296||o>56319||c+1===l||(s=a.charCodeAt(c+1))<56320||s>57343?e?a.charAt(c):o:e?a.slice(c,c+2):s-56320+(o-55296<<10)+65536)}}},"1a14":function(e,t,n){var i=n("77e9"),r=n("faf5"),o=n("3397"),s=Object.defineProperty;t.f=n("0bad")?Object.defineProperty:function(e,t,n){if(i(e),t=o(t,!0),i(n),r)try{return s(e,t,n)}catch(a){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},"1a2d":function(e,t,n){var i=n("e330"),r=n("7b0b"),o=i({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return o(r(e),t)}},"1be4":function(e,t,n){var i=n("d066");e.exports=i("document","documentElement")},"1c67":function(e,t,n){
/*!
 * Vue Scroller 
 * version: 2.2.4 
 * repo: https://github.com/wangdahoo/vue-scroller 
 * build: 2017-09-21 16:25:35
 */
!function(t,n){e.exports=n()}(0,(function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=4)}([function(e,t){e.exports=function(e,t,n,i){var r,o=e=e||{},s=typeof e.default;"object"!==s&&"function"!==s||(r=e,o=e.default);var a="function"==typeof o?o.options:o;if(t&&(a.render=t.render,a.staticRenderFns=t.staticRenderFns),n&&(a._scopeId=n),i){var c=Object.create(a.computed||null);Object.keys(i).forEach((function(e){var t=i[e];c[e]=function(){return t}})),a.computed=c}return{esModule:r,exports:o,options:a}}},function(e,t,n){n(14);var i=n(0)(n(3),n(13),"data-v-ecaca2b0",null);e.exports=i.exports},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{fillColor:{type:String,default:"#AAA"}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),o=i(r),s=n(6),a=i(s),c=n(10),l=i(c),u=n(9),d=i(u),h=/^[\d]+(\%)?$/,p=function(e){return"%"!=e[e.length-1]?e+"px":e},f=function(e){return h.test(e)};t.default={components:{Spinner:l.default,Arrow:d.default},props:{onRefresh:Function,onInfinite:Function,refreshText:{type:String,default:"下拉刷新"},noDataText:{type:String,default:"没有更多数据"},width:{type:String,default:"100%",validator:f},height:{type:String,default:"100%",validator:f},snapping:{type:Boolean,default:!1},snapWidth:{type:Number,default:100},snapHeight:{type:Number,default:100},animating:{type:Boolean,default:!0},animationDuration:{type:Number,default:250},bouncing:{type:Boolean,default:!0},refreshLayerColor:{type:String,default:"#AAA"},loadingLayerColor:{type:String,default:"#AAA"},cssClass:String,minContentHeight:{type:Number,default:0}},computed:{w:function(){return p(this.width)},h:function(){return p(this.height)},showInfiniteLayer:function(){var e=0;return this.content&&(e=this.content.offsetHeight),!!this.onInfinite&&e>this.minContentHeight}},data:function(){return{containerId:"outer-"+Math.random().toString(36).substring(3,8),contentId:"inner-"+Math.random().toString(36).substring(3,8),state:0,loadingState:0,showLoading:!1,container:void 0,content:void 0,scroller:void 0,pullToRefreshLayer:void 0,mousedown:!1,infiniteTimer:void 0,resizeTimer:void 0}},mounted:function(){var e=this;this.container=document.getElementById(this.containerId),this.container.style.width=this.w,this.container.style.height=this.h,this.content=document.getElementById(this.contentId),this.cssClass&&this.content.classList.add(this.cssClass),this.pullToRefreshLayer=this.content.getElementsByTagName("div")[0];var t=(0,a.default)(this.content);this.scroller=new o.default(t,{scrollingX:!1,snapping:this.snapping,animating:this.animating,animationDuration:this.animationDuration,bouncing:this.bouncing}),this.onRefresh&&this.scroller.activatePullToRefresh(60,(function(){e.state=1}),(function(){e.state=0}),(function(){e.state=2,e.$on("$finishPullToRefresh",(function(){setTimeout((function(){e.state=0,e.finishPullToRefresh()}))})),e.onRefresh(e.finishPullToRefresh)})),this.onInfinite&&(this.infiniteTimer=setInterval((function(){var t=e.scroller.getValues(),n=(t.left,t.top);if(t.zoom,e.content.offsetHeight>0&&n+60>e.content.offsetHeight-e.container.clientHeight){if(e.loadingState)return;e.loadingState=1,e.showLoading=!0,e.onInfinite(e.finishInfinite)}}),10));var n=this.container.getBoundingClientRect();this.scroller.setPosition(n.left+this.container.clientLeft,n.top+this.container.clientTop),this.snapping&&this.scroller.setSnapSize(this.snapWidth,this.snapHeight);var i=function(){return{width:e.content.offsetWidth,height:e.content.offsetHeight}},r=i(),s=r.content_width,c=r.content_height;this.resizeTimer=setInterval((function(){var t=i(),n=t.width,r=t.height;n===s&&r===c||(s=n,c=r,e.resize())}),10)},destroyed:function(){clearInterval(this.resizeTimer),this.infiniteTimer&&clearInterval(this.infiniteTimer)},methods:{resize:function(){var e=this.container,t=this.content;this.scroller.setDimensions(e.clientWidth,e.clientHeight,t.offsetWidth,t.offsetHeight)},finishPullToRefresh:function(){this.scroller.finishPullToRefresh()},finishInfinite:function(e){this.loadingState=e?2:0,this.showLoading=!1,2==this.loadingState&&this.resetLoadingState()},triggerPullToRefresh:function(){this.scroller.triggerPullToRefresh()},scrollTo:function(e,t,n){this.scroller.scrollTo(e,t,n)},scrollBy:function(e,t,n){this.scroller.scrollBy(e,t,n)},touchStart:function(e){e.target.tagName.match(/input|textarea|select/i)||this.scroller.doTouchStart(e.touches,e.timeStamp)},touchMove:function(e){e.preventDefault(),this.scroller.doTouchMove(e.touches,e.timeStamp)},touchEnd:function(e){this.scroller.doTouchEnd(e.timeStamp)},mouseDown:function(e){e.target.tagName.match(/input|textarea|select/i)||(this.scroller.doTouchStart([{pageX:e.pageX,pageY:e.pageY}],e.timeStamp),this.mousedown=!0)},mouseMove:function(e){this.mousedown&&(this.scroller.doTouchMove([{pageX:e.pageX,pageY:e.pageY}],e.timeStamp),this.mousedown=!0)},mouseUp:function(e){this.mousedown&&(this.scroller.doTouchEnd(e.timeStamp),this.mousedown=!1)},getPosition:function(){var e=this.scroller.getValues();return{left:parseInt(e.left),top:parseInt(e.top)}},resetLoadingState:function(){var e=this,t=this.scroller.getValues(),n=(t.left,t.top);t.zoom,this.container,this.content,n+60>this.content.offsetHeight-this.container.clientHeight?setTimeout((function(){e.resetLoadingState()}),1e3):this.loadingState=0}}}},function(e,t,n){"use strict";function i(e){i.installed||(i.installed=!0,e.component("scroller",s.default))}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(1),s=function(e){return e&&e.__esModule?e:{default:e}}(o),a={install:i,Scroller:s.default};void 0!==("undefined"==typeof window?"undefined":r(window))&&window.Vue&&window.Vue.use(a),t.default=a},function(e,t,n){"use strict";var i;!function(r){var o=function(){},s=function(e){var t=Date.now||function(){return+new Date},n={},i=1,r={effect:{}};return r.effect.Animate={requestAnimationFrame:function(){var t=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame,n=!!t;if(t&&!/requestAnimationFrame\(\)\s*\{\s*\[native code\]\s*\}/i.test(t.toString())&&(n=!1),n)return function(e,n){t(e,n)};var i={},r=1,o=null,s=+new Date;return function(e,t){var n=r++;return i[n]=e,null===o&&(o=setInterval((function(){var e=+new Date,t=i;for(var n in i={},0,t)t.hasOwnProperty(n)&&(t[n](e),s=e);e-s>2500&&(clearInterval(o),o=null)}),1e3/60)),n}}(),stop:function(e){var t=null!=n[e];return t&&(n[e]=null),t},isRunning:function(e){return null!=n[e]},start:function(e,o,s,a,c,l){var u=t(),d=u,h=0,p=0,f=i++;if(l||(l=document.body),f%20==0){var g={};for(var m in n)g[m]=!0;n=g}var _=function i(g){var m=!0!==g,_=t();if(!n[f]||o&&!o(f))return n[f]=null,void(s&&s(60-p/((_-u)/1e3),f,!1));if(m)for(var v=Math.round((_-d)/(1e3/60))-1,y=0;y<Math.min(v,4);y++)i(!0),p++;a&&(h=(_-u)/a)>1&&(h=1);var C=c?c(h):h;!1!==e(C,_,m)&&1!==h||!m?m&&(d=_,r.effect.Animate.requestAnimationFrame(i,l)):(n[f]=null,s&&s(60-p/((_-u)/1e3),f,1===h||null==a))};return n[f]=!0,r.effect.Animate.requestAnimationFrame(_,l),f}},r}(r),a=function(e,t){for(var n in this.__callback=e,this.options={scrollingX:!0,scrollingY:!0,animating:!0,animationDuration:250,bouncing:!0,locking:!0,paging:!1,snapping:!1,zooming:!1,minZoom:.5,maxZoom:3,speedMultiplier:1,scrollingComplete:o,penetrationDeceleration:.03,penetrationAcceleration:.08},t)this.options[n]=t[n]},c=function(e){return Math.pow(e-1,3)+1},l=function(e){return(e/=.5)<1?.5*Math.pow(e,3):.5*(Math.pow(e-2,3)+2)},u={__isSingleTouch:!1,__isTracking:!1,__didDecelerationComplete:!1,__isGesturing:!1,__isDragging:!1,__isDecelerating:!1,__isAnimating:!1,__clientLeft:0,__clientTop:0,__clientWidth:0,__clientHeight:0,__contentWidth:0,__contentHeight:0,__snapWidth:100,__snapHeight:100,__refreshHeight:null,__refreshActive:!1,__refreshActivate:null,__refreshDeactivate:null,__refreshStart:null,__zoomLevel:1,__scrollLeft:0,__scrollTop:0,__maxScrollLeft:0,__maxScrollTop:0,__scheduledLeft:0,__scheduledTop:0,__scheduledZoom:0,__lastTouchLeft:null,__lastTouchTop:null,__lastTouchMove:null,__positions:null,__minDecelerationScrollLeft:null,__minDecelerationScrollTop:null,__maxDecelerationScrollLeft:null,__maxDecelerationScrollTop:null,__decelerationVelocityX:null,__decelerationVelocityY:null,setDimensions:function(e,t,n,i){var r=this;e===+e&&(r.__clientWidth=e),t===+t&&(r.__clientHeight=t),n===+n&&(r.__contentWidth=n),i===+i&&(r.__contentHeight=i),r.__computeScrollMax(),r.scrollTo(r.__scrollLeft,r.__scrollTop,!0)},setPosition:function(e,t){var n=this;n.__clientLeft=e||0,n.__clientTop=t||0},setSnapSize:function(e,t){var n=this;n.__snapWidth=e,n.__snapHeight=t},activatePullToRefresh:function(e,t,n,i){var r=this;r.__refreshHeight=e,r.__refreshActivate=t,r.__refreshDeactivate=n,r.__refreshStart=i},triggerPullToRefresh:function(){this.__publish(this.__scrollLeft,-this.__refreshHeight,this.__zoomLevel,!0),this.__refreshStart&&this.__refreshStart()},finishPullToRefresh:function(){var e=this;e.__refreshActive=!1,e.__refreshDeactivate&&e.__refreshDeactivate(),e.scrollTo(e.__scrollLeft,e.__scrollTop,!0)},getValues:function(){var e=this;return{left:e.__scrollLeft,top:e.__scrollTop,zoom:e.__zoomLevel}},getScrollMax:function(){var e=this;return{left:e.__maxScrollLeft,top:e.__maxScrollTop}},zoomTo:function(e,t,n,i,r){var o=this;if(!o.options.zooming)throw new Error("Zooming is not enabled!");r&&(o.__zoomComplete=r),o.__isDecelerating&&(s.effect.Animate.stop(o.__isDecelerating),o.__isDecelerating=!1);var a=o.__zoomLevel;null==n&&(n=o.__clientWidth/2),null==i&&(i=o.__clientHeight/2),e=Math.max(Math.min(e,o.options.maxZoom),o.options.minZoom),o.__computeScrollMax(e);var c=(n+o.__scrollLeft)*e/a-n,l=(i+o.__scrollTop)*e/a-i;c>o.__maxScrollLeft?c=o.__maxScrollLeft:c<0&&(c=0),l>o.__maxScrollTop?l=o.__maxScrollTop:l<0&&(l=0),o.__publish(c,l,e,t)},zoomBy:function(e,t,n,i,r){var o=this;o.zoomTo(o.__zoomLevel*e,t,n,i,r)},scrollTo:function(e,t,n,i){var r=this;if(r.__isDecelerating&&(s.effect.Animate.stop(r.__isDecelerating),r.__isDecelerating=!1),null!=i&&i!==r.__zoomLevel){if(!r.options.zooming)throw new Error("Zooming is not enabled!");e*=i,t*=i,r.__computeScrollMax(i)}else i=r.__zoomLevel;r.options.scrollingX?r.options.paging?e=Math.round(e/r.__clientWidth)*r.__clientWidth:r.options.snapping&&(e=Math.round(e/r.__snapWidth)*r.__snapWidth):e=r.__scrollLeft,r.options.scrollingY?r.options.paging?t=Math.round(t/r.__clientHeight)*r.__clientHeight:r.options.snapping&&(t=Math.round(t/r.__snapHeight)*r.__snapHeight):t=r.__scrollTop,e=Math.max(Math.min(r.__maxScrollLeft,e),0),t=Math.max(Math.min(r.__maxScrollTop,t),0),e===r.__scrollLeft&&t===r.__scrollTop&&(n=!1),r.__isTracking||r.__publish(e,t,i,n)},scrollBy:function(e,t,n){var i=this,r=i.__isAnimating?i.__scheduledLeft:i.__scrollLeft,o=i.__isAnimating?i.__scheduledTop:i.__scrollTop;i.scrollTo(r+(e||0),o+(t||0),n)},doMouseZoom:function(e,t,n,i){var r=this,o=e>0?.97:1.03;return r.zoomTo(r.__zoomLevel*o,!1,n-r.__clientLeft,i-r.__clientTop)},doTouchStart:function(e,t){if(null==e.length)throw new Error("Invalid touch list: "+e);if(t instanceof Date&&(t=t.valueOf()),"number"!=typeof t)throw new Error("Invalid timestamp value: "+t);var n=this;n.__interruptedAnimation=!0,n.__isDecelerating&&(s.effect.Animate.stop(n.__isDecelerating),n.__isDecelerating=!1,n.__interruptedAnimation=!0),n.__isAnimating&&(s.effect.Animate.stop(n.__isAnimating),n.__isAnimating=!1,n.__interruptedAnimation=!0);var i,r,o=1===e.length;o?(i=e[0].pageX,r=e[0].pageY):(i=Math.abs(e[0].pageX+e[1].pageX)/2,r=Math.abs(e[0].pageY+e[1].pageY)/2),n.__initialTouchLeft=i,n.__initialTouchTop=r,n.__zoomLevelStart=n.__zoomLevel,n.__lastTouchLeft=i,n.__lastTouchTop=r,n.__lastTouchMove=t,n.__lastScale=1,n.__enableScrollX=!o&&n.options.scrollingX,n.__enableScrollY=!o&&n.options.scrollingY,n.__isTracking=!0,n.__didDecelerationComplete=!1,n.__isDragging=!o,n.__isSingleTouch=o,n.__positions=[]},doTouchMove:function(e,t,n){if(null==e.length)throw new Error("Invalid touch list: "+e);if(t instanceof Date&&(t=t.valueOf()),"number"!=typeof t)throw new Error("Invalid timestamp value: "+t);var i=this;if(i.__isTracking){var r,o;2===e.length?(r=Math.abs(e[0].pageX+e[1].pageX)/2,o=Math.abs(e[0].pageY+e[1].pageY)/2):(r=e[0].pageX,o=e[0].pageY);var s=i.__positions;if(i.__isDragging){var a=r-i.__lastTouchLeft,c=o-i.__lastTouchTop,l=i.__scrollLeft,u=i.__scrollTop,d=i.__zoomLevel;if(null!=n&&i.options.zooming){var h=d;if(d=d/i.__lastScale*n,d=Math.max(Math.min(d,i.options.maxZoom),i.options.minZoom),h!==d){var p=r-i.__clientLeft,f=o-i.__clientTop;l=(p+l)*d/h-p,u=(f+u)*d/h-f,i.__computeScrollMax(d)}}if(i.__enableScrollX){l-=a*this.options.speedMultiplier;var g=i.__maxScrollLeft;(l>g||l<0)&&(i.options.bouncing?l+=a/2*this.options.speedMultiplier:l=l>g?g:0)}if(i.__enableScrollY){u-=c*this.options.speedMultiplier;var m=i.__maxScrollTop;(u>m||u<0)&&(i.options.bouncing?(u+=c/2*this.options.speedMultiplier,i.__enableScrollX||null==i.__refreshHeight||(!i.__refreshActive&&u<=-i.__refreshHeight?(i.__refreshActive=!0,i.__refreshActivate&&i.__refreshActivate()):i.__refreshActive&&u>-i.__refreshHeight&&(i.__refreshActive=!1,i.__refreshDeactivate&&i.__refreshDeactivate()))):u=u>m?m:0)}s.length>60&&s.splice(0,30),s.push(l,u,t),i.__publish(l,u,d)}else{var _=i.options.locking?3:0,v=Math.abs(r-i.__initialTouchLeft),y=Math.abs(o-i.__initialTouchTop);i.__enableScrollX=i.options.scrollingX&&v>=_,i.__enableScrollY=i.options.scrollingY&&y>=_,s.push(i.__scrollLeft,i.__scrollTop,t),i.__isDragging=(i.__enableScrollX||i.__enableScrollY)&&(v>=5||y>=5),i.__isDragging&&(i.__interruptedAnimation=!1)}i.__lastTouchLeft=r,i.__lastTouchTop=o,i.__lastTouchMove=t,i.__lastScale=n}},doTouchEnd:function(e){if(e instanceof Date&&(e=e.valueOf()),"number"!=typeof e)throw new Error("Invalid timestamp value: "+e);var t=this;if(t.__isTracking){if(t.__isTracking=!1,t.__isDragging)if(t.__isDragging=!1,t.__isSingleTouch&&t.options.animating&&e-t.__lastTouchMove<=100){for(var n=t.__positions,i=n.length-1,r=i,o=i;o>0&&n[o]>t.__lastTouchMove-100;o-=3)r=o;if(r!==i){var s=n[i]-n[r],a=t.__scrollLeft-n[r-2],c=t.__scrollTop-n[r-1];t.__decelerationVelocityX=a/s*(1e3/60),t.__decelerationVelocityY=c/s*(1e3/60);var l=t.options.paging||t.options.snapping?4:1;Math.abs(t.__decelerationVelocityX)>l||Math.abs(t.__decelerationVelocityY)>l?t.__refreshActive||t.__startDeceleration(e):t.options.scrollingComplete()}else t.options.scrollingComplete()}else e-t.__lastTouchMove>100&&t.options.scrollingComplete();t.__isDecelerating||(t.__refreshActive&&t.__refreshStart?(t.__publish(t.__scrollLeft,-t.__refreshHeight,t.__zoomLevel,!0),t.__refreshStart&&t.__refreshStart()):((t.__interruptedAnimation||t.__isDragging)&&t.options.scrollingComplete(),t.scrollTo(t.__scrollLeft,t.__scrollTop,!0,t.__zoomLevel),t.__refreshActive&&(t.__refreshActive=!1,t.__refreshDeactivate&&t.__refreshDeactivate()))),t.__positions.length=0}},__publish:function(e,t,n,i){var r=this,o=r.__isAnimating;if(o&&(s.effect.Animate.stop(o),r.__isAnimating=!1),i&&r.options.animating){r.__scheduledLeft=e,r.__scheduledTop=t,r.__scheduledZoom=n;var a=r.__scrollLeft,u=r.__scrollTop,d=r.__zoomLevel,h=e-a,p=t-u,f=n-d,g=function(e,t,n){n&&(r.__scrollLeft=a+h*e,r.__scrollTop=u+p*e,r.__zoomLevel=d+f*e,r.__callback&&r.__callback(r.__scrollLeft,r.__scrollTop,r.__zoomLevel))},m=function(e){return r.__isAnimating===e},_=function(e,t,n){t===r.__isAnimating&&(r.__isAnimating=!1),(r.__didDecelerationComplete||n)&&r.options.scrollingComplete(),r.options.zooming&&(r.__computeScrollMax(),r.__zoomComplete&&(r.__zoomComplete(),r.__zoomComplete=null))};r.__isAnimating=s.effect.Animate.start(g,m,_,r.options.animationDuration,o?c:l)}else r.__scheduledLeft=r.__scrollLeft=e,r.__scheduledTop=r.__scrollTop=t,r.__scheduledZoom=r.__zoomLevel=n,r.__callback&&r.__callback(e,t,n),r.options.zooming&&(r.__computeScrollMax(),r.__zoomComplete&&(r.__zoomComplete(),r.__zoomComplete=null))},__computeScrollMax:function(e){var t=this;null==e&&(e=t.__zoomLevel),t.__maxScrollLeft=Math.max(t.__contentWidth*e-t.__clientWidth,0),t.__maxScrollTop=Math.max(t.__contentHeight*e-t.__clientHeight,0)},__startDeceleration:function(e){var t=this;if(t.options.paging){var n=Math.max(Math.min(t.__scrollLeft,t.__maxScrollLeft),0),i=Math.max(Math.min(t.__scrollTop,t.__maxScrollTop),0),r=t.__clientWidth,o=t.__clientHeight;t.__minDecelerationScrollLeft=Math.floor(n/r)*r,t.__minDecelerationScrollTop=Math.floor(i/o)*o,t.__maxDecelerationScrollLeft=Math.ceil(n/r)*r,t.__maxDecelerationScrollTop=Math.ceil(i/o)*o}else t.__minDecelerationScrollLeft=0,t.__minDecelerationScrollTop=0,t.__maxDecelerationScrollLeft=t.__maxScrollLeft,t.__maxDecelerationScrollTop=t.__maxScrollTop;var a=function(e,n,i){t.__stepThroughDeceleration(i)},c=t.options.snapping?4:.001,l=function(){var e=Math.abs(t.__decelerationVelocityX)>=c||Math.abs(t.__decelerationVelocityY)>=c;return e||(t.__didDecelerationComplete=!0),e},u=function(e,n,i){t.__isDecelerating=!1,t.__didDecelerationComplete&&t.options.scrollingComplete(),t.scrollTo(t.__scrollLeft,t.__scrollTop,t.options.snapping)};t.__isDecelerating=s.effect.Animate.start(a,l,u)},__stepThroughDeceleration:function(e){var t=this,n=t.__scrollLeft+t.__decelerationVelocityX,i=t.__scrollTop+t.__decelerationVelocityY;if(!t.options.bouncing){var r=Math.max(Math.min(t.__maxDecelerationScrollLeft,n),t.__minDecelerationScrollLeft);r!==n&&(n=r,t.__decelerationVelocityX=0);var o=Math.max(Math.min(t.__maxDecelerationScrollTop,i),t.__minDecelerationScrollTop);o!==i&&(i=o,t.__decelerationVelocityY=0)}if(e?t.__publish(n,i,t.__zoomLevel):(t.__scrollLeft=n,t.__scrollTop=i),t.options.paging||(t.__decelerationVelocityX*=.95,t.__decelerationVelocityY*=.95),t.options.bouncing){var s=0,a=0,c=t.options.penetrationDeceleration,l=t.options.penetrationAcceleration;n<t.__minDecelerationScrollLeft?s=t.__minDecelerationScrollLeft-n:n>t.__maxDecelerationScrollLeft&&(s=t.__maxDecelerationScrollLeft-n),i<t.__minDecelerationScrollTop?a=t.__minDecelerationScrollTop-i:i>t.__maxDecelerationScrollTop&&(a=t.__maxDecelerationScrollTop-i),0!==s&&(s*t.__decelerationVelocityX<=0?t.__decelerationVelocityX+=s*c:t.__decelerationVelocityX=s*l),0!==a&&(a*t.__decelerationVelocityY<=0?t.__decelerationVelocityY+=a*c:t.__decelerationVelocityY=a*l)}}};for(var d in u)a.prototype[d]=u[d];void 0!==e&&e.exports?e.exports=a:void 0!==(i=function(){return a}.call(t,n,t,e))&&(e.exports=i)}(window)},function(e,t,n){"use strict";function i(e){var t,n=window,i=document.documentElement.style;n.opera&&"[object Opera]"===Object.prototype.toString.call(opera)?t="presto":"MozAppearance"in i?t="gecko":"WebkitAppearance"in i?t="webkit":"string"==typeof navigator.cpuClass&&(t="trident");var r={trident:"ms",gecko:"Moz",webkit:"Webkit",presto:"O"}[t],o=document.createElement("div"),s=r+"Perspective",a=r+"Transform";return void 0!==o.style[s]?function(t,n,i){e.style[a]="translate3d("+-t+"px,"+-n+"px,0) scale("+i+")"}:void 0!==o.style[a]?function(t,n,i){e.style[a]="translate("+-t+"px,"+-n+"px) scale("+i+")"}:function(t,n,i){e.style.marginLeft=t?-t/i+"px":"",e.style.marginTop=n?-n/i+"px":"",e.style.zoom=i||""}}e.exports=i},function(e,t,n){t=e.exports=n(8)(),t.push([e.i,"._v-container[data-v-ecaca2b0]{-webkit-tap-highlight-color:rgba(0,0,0,0);width:100%;height:100%;position:absolute;top:0;left:0;overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none}._v-container>._v-content[data-v-ecaca2b0]{width:100%;-webkit-transform-origin:left top;-webkit-transform:translateZ(0);-moz-transform-origin:left top;-moz-transform:translateZ(0);-ms-transform-origin:left top;-ms-transform:translateZ(0);-o-transform-origin:left top;-o-transform:translateZ(0);transform-origin:left top;transform:translateZ(0)}._v-container>._v-content>.pull-to-refresh-layer[data-v-ecaca2b0]{width:100%;height:60px;margin-top:-60px;text-align:center;font-size:16px;color:#aaa}._v-container>._v-content>.loading-layer[data-v-ecaca2b0]{width:100%;height:60px;text-align:center;font-size:16px;line-height:60px;color:#aaa;position:relative}._v-container>._v-content>.loading-layer>.no-data-text[data-v-ecaca2b0]{position:absolute;left:0;top:0;width:100%;height:100%;z-index:1}._v-container>._v-content>.loading-layer>.no-data-text[data-v-ecaca2b0],._v-container>._v-content>.loading-layer>.spinner-holder[data-v-ecaca2b0]{opacity:0;transition:opacity .15s linear;-webkit-transition:opacity .15s linear}._v-container>._v-content>.loading-layer>.no-data-text.active[data-v-ecaca2b0],._v-container>._v-content>.loading-layer>.spinner-holder.active[data-v-ecaca2b0]{opacity:1}._v-container>._v-content>.loading-layer .spinner-holder[data-v-ecaca2b0],._v-container>._v-content>.pull-to-refresh-layer .spinner-holder[data-v-ecaca2b0]{text-align:center;-webkit-font-smoothing:antialiased}._v-container>._v-content>.loading-layer .spinner-holder .arrow[data-v-ecaca2b0],._v-container>._v-content>.pull-to-refresh-layer .spinner-holder .arrow[data-v-ecaca2b0]{width:20px;height:20px;margin:8px auto 0;-webkit-transform:translateZ(0) rotate(0deg);transform:translateZ(0) rotate(0deg);transition:transform .2s linear}._v-container>._v-content>.loading-layer .spinner-holder .text[data-v-ecaca2b0],._v-container>._v-content>.pull-to-refresh-layer .spinner-holder .text[data-v-ecaca2b0]{display:block;margin:0 auto;font-size:14px;line-height:20px;color:#aaa}._v-container>._v-content>.loading-layer .spinner-holder .spinner[data-v-ecaca2b0],._v-container>._v-content>.pull-to-refresh-layer .spinner-holder .spinner[data-v-ecaca2b0]{margin-top:14px;width:32px;height:32px;fill:#444;stroke:#69717d}._v-container>._v-content>.pull-to-refresh-layer.active .spinner-holder .arrow[data-v-ecaca2b0]{-webkit-transform:translateZ(0) rotate(180deg);transform:translateZ(0) rotate(180deg)}",""])},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},r=0;r<this.length;r++){var o=this[r][0];"number"==typeof o&&(i[o]=!0)}for(r=0;r<t.length;r++){var s=t[r];"number"==typeof s[0]&&i[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),e.push(s))}},e}},function(e,t,n){var i=n(0)(n(2),n(11),null,null);e.exports=i.exports},function(e,t,n){var i=n(0)(null,n(12),null,null);e.exports=i.exports},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{staticStyle:{"enable-background":"new 0 0 63.657 63.657"},attrs:{viewBox:"0 0 63.657 63.657","xml:space":"preserve",width:"512px",height:"512px"}},[n("g",[n("g",[n("g",[n("g",[n("polygon",{attrs:{points:"31.891,63.657 0.012,35.835 2.642,32.821 31.886,58.343 61.009,32.824 63.645,35.832",fill:e.fillColor}})])]),e._v(" "),n("g",[n("g",[n("rect",{attrs:{x:"29.827",width:"4",height:"60",fill:e.fillColor}})])])]),e._v(" "),n("g"),e._v(" "),n("g"),e._v(" "),n("g"),e._v(" "),n("g"),e._v(" "),n("g"),e._v(" "),n("g"),e._v(" "),n("g"),e._v(" "),n("g"),e._v(" "),n("g"),e._v(" "),n("g"),e._v(" "),n("g"),e._v(" "),n("g"),e._v(" "),n("g"),e._v(" "),n("g"),e._v(" "),n("g")]),e._v(" "),n("g"),e._v(" "),n("g"),e._v(" "),n("g"),e._v(" "),n("g"),e._v(" "),n("g"),e._v(" "),n("g"),e._v(" "),n("g"),e._v(" "),n("g"),e._v(" "),n("g"),e._v(" "),n("g"),e._v(" "),n("g"),e._v(" "),n("g"),e._v(" "),n("g"),e._v(" "),n("g"),e._v(" "),n("g")])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{staticClass:"spinner",attrs:{viewBox:"0 0 64 64"}},[n("g",{attrs:{"stroke-width":"4","stroke-linecap":"round"}},[n("line",{attrs:{y1:"17",y2:"29",transform:"translate(32,32) rotate(180)"}},[n("animate",{attrs:{attributeName:"stroke-opacity",dur:"750ms",values:"1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0;1",repeatCount:"indefinite"}})]),n("line",{attrs:{y1:"17",y2:"29",transform:"translate(32,32) rotate(210)"}},[n("animate",{attrs:{attributeName:"stroke-opacity",dur:"750ms",values:"0;1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0",repeatCount:"indefinite"}})]),n("line",{attrs:{y1:"17",y2:"29",transform:"translate(32,32) rotate(240)"}},[n("animate",{attrs:{attributeName:"stroke-opacity",dur:"750ms",values:".1;0;1;.85;.7;.65;.55;.45;.35;.25;.15;.1",repeatCount:"indefinite"}})]),n("line",{attrs:{y1:"17",y2:"29",transform:"translate(32,32) rotate(270)"}},[n("animate",{attrs:{attributeName:"stroke-opacity",dur:"750ms",values:".15;.1;0;1;.85;.7;.65;.55;.45;.35;.25;.15",repeatCount:"indefinite"}})]),n("line",{attrs:{y1:"17",y2:"29",transform:"translate(32,32) rotate(300)"}},[n("animate",{attrs:{attributeName:"stroke-opacity",dur:"750ms",values:".25;.15;.1;0;1;.85;.7;.65;.55;.45;.35;.25",repeatCount:"indefinite"}})]),n("line",{attrs:{y1:"17",y2:"29",transform:"translate(32,32) rotate(330)"}},[n("animate",{attrs:{attributeName:"stroke-opacity",dur:"750ms",values:".35;.25;.15;.1;0;1;.85;.7;.65;.55;.45;.35",repeatCount:"indefinite"}})]),n("line",{attrs:{y1:"17",y2:"29",transform:"translate(32,32) rotate(0)"}},[n("animate",{attrs:{attributeName:"stroke-opacity",dur:"750ms",values:".45;.35;.25;.15;.1;0;1;.85;.7;.65;.55;.45",repeatCount:"indefinite"}})]),n("line",{attrs:{y1:"17",y2:"29",transform:"translate(32,32) rotate(30)"}},[n("animate",{attrs:{attributeName:"stroke-opacity",dur:"750ms",values:".55;.45;.35;.25;.15;.1;0;1;.85;.7;.65;.55",repeatCount:"indefinite"}})]),n("line",{attrs:{y1:"17",y2:"29",transform:"translate(32,32) rotate(60)"}},[n("animate",{attrs:{attributeName:"stroke-opacity",dur:"750ms",values:".65;.55;.45;.35;.25;.15;.1;0;1;.85;.7;.65",repeatCount:"indefinite"}})]),n("line",{attrs:{y1:"17",y2:"29",transform:"translate(32,32) rotate(90)"}},[n("animate",{attrs:{attributeName:"stroke-opacity",dur:"750ms",values:".7;.65;.55;.45;.35;.25;.15;.1;0;1;.85;.7",repeatCount:"indefinite"}})]),n("line",{attrs:{y1:"17",y2:"29",transform:"translate(32,32) rotate(120)"}},[n("animate",{attrs:{attributeName:"stroke-opacity",dur:"750ms",values:".85;.7;.65;.55;.45;.35;.25;.15;.1;0;1;.85",repeatCount:"indefinite"}})]),n("line",{attrs:{y1:"17",y2:"29",transform:"translate(32,32) rotate(150)"}},[n("animate",{attrs:{attributeName:"stroke-opacity",dur:"750ms",values:"1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0;1",repeatCount:"indefinite"}})])])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"_v-container",attrs:{id:e.containerId},on:{touchstart:function(t){e.touchStart(t)},touchmove:function(t){e.touchMove(t)},touchend:function(t){e.touchEnd(t)},mousedown:function(t){e.mouseDown(t)},mousemove:function(t){e.mouseMove(t)},mouseup:function(t){e.mouseUp(t)}}},[n("div",{staticClass:"_v-content",attrs:{id:e.contentId}},[e.onRefresh?n("div",{staticClass:"pull-to-refresh-layer",class:{active:1==e.state,"active refreshing":2==e.state}},[n("span",{staticClass:"spinner-holder"},[2!=e.state?n("arrow",{staticClass:"arrow",attrs:{fillColor:e.refreshLayerColor}}):e._e(),e._v(" "),2!=e.state?n("span",{staticClass:"text",style:{color:e.refreshLayerColor},domProps:{textContent:e._s(e.refreshText)}}):e._e(),e._v(" "),2==e.state?n("span",[e._t("refresh-spinner",[n("spinner",{style:{fill:e.refreshLayerColor,stroke:e.refreshLayerColor}})])],2):e._e()],1)]):e._e(),e._v(" "),e._t("default"),e._v(" "),e.showInfiniteLayer?n("div",{staticClass:"loading-layer"},[n("span",{staticClass:"spinner-holder",class:{active:e.showLoading}},[e._t("infinite-spinner",[n("spinner",{style:{fill:e.loadingLayerColor,stroke:e.loadingLayerColor}})])],2),e._v(" "),n("div",{staticClass:"no-data-text",class:{active:!e.showLoading&&2==e.loadingState},style:{color:e.loadingLayerColor},domProps:{textContent:e._s(e.noDataText)}})]):e._e()],2)])},staticRenderFns:[]}},function(e,t,n){var i=n(7);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals),n(15)("1ca3e1c8",i,!0)},function(e,t,n){function i(e){for(var t=0;t<e.length;t++){var n=e[t],i=u[n.id];if(i){i.refs++;for(var r=0;r<i.parts.length;r++)i.parts[r](n.parts[r]);for(;r<n.parts.length;r++)i.parts.push(o(n.parts[r]));i.parts.length>n.parts.length&&(i.parts.length=n.parts.length)}else{var s=[];for(r=0;r<n.parts.length;r++)s.push(o(n.parts[r]));u[n.id]={id:n.id,refs:1,parts:s}}}}function r(){var e=document.createElement("style");return e.type="text/css",d.appendChild(e),e}function o(e){var t,n,i=document.querySelector('style[data-vue-ssr-id~="'+e.id+'"]');if(i){if(f)return g;i.parentNode.removeChild(i)}if(m){var o=p++;i=h||(h=r()),t=s.bind(null,i,o,!1),n=s.bind(null,i,o,!0)}else i=r(),t=a.bind(null,i),n=function(){i.parentNode.removeChild(i)};return t(e),function(i){if(i){if(i.css===e.css&&i.media===e.media&&i.sourceMap===e.sourceMap)return;t(e=i)}else n()}}function s(e,t,n,i){var r=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=_(t,r);else{var o=document.createTextNode(r),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(o,s[t]):e.appendChild(o)}}function a(e,t){var n=t.css,i=t.media,r=t.sourceMap;if(i&&e.setAttribute("media",i),r&&(n+="\n/*# sourceURL="+r.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var c="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!c)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var l=n(16),u={},d=c&&(document.head||document.getElementsByTagName("head")[0]),h=null,p=0,f=!1,g=function(){},m="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());e.exports=function(e,t,n){f=n;var r=l(e,t);return i(r),function(t){for(var n=[],o=0;o<r.length;o++){var s=r[o],a=u[s.id];a.refs--,n.push(a)}t?(r=l(e,t),i(r)):r=[];for(o=0;o<n.length;o++){a=n[o];if(0===a.refs){for(var c=0;c<a.parts.length;c++)a.parts[c]();delete u[a.id]}}}};var _=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t){e.exports=function(e,t){for(var n=[],i={},r=0;r<t.length;r++){var o=t[r],s=o[0],a=o[1],c=o[2],l=o[3],u={id:e+":"+r,css:a,media:c,sourceMap:l};i[s]?i[s].parts.push(u):n.push(i[s]={id:s,parts:[u]})}return n}}])}))},"1c7e":function(e,t,n){var i=n("b622"),r=i("iterator"),o=!1;try{var s=0,a={next:function(){return{done:!!s++}},return:function(){o=!0}};a[r]=function(){return this},Array.from(a,(function(){throw 2}))}catch(c){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var i={};i[r]=function(){return{next:function(){return{done:n=!0}}}},e(i)}catch(c){}return n}},"1cdc":function(e,t,n){var i=n("342f");e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(i)},"1d2b":function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return e.apply(t,n)}}},"1d80":function(e,t,n){var i=n("da84"),r=i.TypeError;e.exports=function(e){if(void 0==e)throw r("Can't call method on "+e);return e}},"1da1":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n("d3b7");function i(e,t,n,i,r,o,s){try{var a=e[o](s),c=a.value}catch(l){return void n(l)}a.done?t(c):Promise.resolve(c).then(i,r)}function r(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var s=e.apply(t,n);function a(e){i(s,r,o,a,c,"next",e)}function c(e){i(s,r,o,a,c,"throw",e)}a(void 0)}))}}},"1dde":function(e,t,n){var i=n("d039"),r=n("b622"),o=n("2d00"),s=r("species");e.exports=function(e){return o>=51||!i((function(){var t=[],n=t.constructor={};return n[s]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},2266:function(e,t,n){var i=n("da84"),r=n("0366"),o=n("c65b"),s=n("825a"),a=n("0d51"),c=n("e95a"),l=n("07fa"),u=n("3a9b"),d=n("9a1f"),h=n("35a1"),p=n("2a62"),f=i.TypeError,g=function(e,t){this.stopped=e,this.result=t},m=g.prototype;e.exports=function(e,t,n){var i,_,v,y,C,E,b,T=n&&n.that,S=!(!n||!n.AS_ENTRIES),R=!(!n||!n.IS_ITERATOR),I=!(!n||!n.INTERRUPTED),w=r(t,T),O=function(e){return i&&p(i,"normal",e),new g(!0,e)},k=function(e){return S?(s(e),I?w(e[0],e[1],O):w(e[0],e[1])):I?w(e,O):w(e)};if(R)i=e;else{if(_=h(e),!_)throw f(a(e)+" is not iterable");if(c(_)){for(v=0,y=l(e);y>v;v++)if(C=k(e[v]),C&&u(m,C))return C;return new g(!1)}i=d(e,_)}E=i.next;while(!(b=o(E,i)).done){try{C=k(b.value)}catch(M){p(i,"throw",M)}if("object"==typeof C&&C&&u(m,C))return C}return new g(!1)}},"23cb":function(e,t,n){var i=n("5926"),r=Math.max,o=Math.min;e.exports=function(e,t){var n=i(e);return n<0?r(n+t,0):o(n,t)}},"23dc":function(e,t,n){var i=n("d44e");i(Math,"Math",!0)},"23e7":function(e,t,n){var i=n("da84"),r=n("06cf").f,o=n("9112"),s=n("6eeb"),a=n("ce4e"),c=n("e893"),l=n("94ca");e.exports=function(e,t){var n,u,d,h,p,f,g=e.target,m=e.global,_=e.stat;if(u=m?i:_?i[g]||a(g,{}):(i[g]||{}).prototype,u)for(d in t){if(p=t[d],e.noTargetGet?(f=r(u,d),h=f&&f.value):h=u[d],n=l(m?d:g+(_?".":"#")+d,e.forced),!n&&void 0!==h){if(typeof p==typeof h)continue;c(p,h)}(e.sham||h&&h.sham)&&o(p,"sham",!0),s(u,d,p,e)}}},"241c":function(e,t,n){var i=n("ca84"),r=n("7839"),o=r.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,o)}},2444:function(e,t,n){"use strict";(function(t){var i=n("c532"),r=n("c8af"),o=n("387f"),s={"Content-Type":"application/x-www-form-urlencoded"};function a(e,t){!i.isUndefined(e)&&i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function c(){var e;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof t&&"[object process]"===Object.prototype.toString.call(t))&&(e=n("b50d")),e}function l(e,t,n){if(i.isString(e))try{return(t||JSON.parse)(e),i.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(n||JSON.stringify)(e)}var u={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:c(),transformRequest:[function(e,t){return r(t,"Accept"),r(t,"Content-Type"),i.isFormData(e)||i.isArrayBuffer(e)||i.isBuffer(e)||i.isStream(e)||i.isFile(e)||i.isBlob(e)?e:i.isArrayBufferView(e)?e.buffer:i.isURLSearchParams(e)?(a(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):i.isObject(e)||t&&"application/json"===t["Content-Type"]?(a(t,"application/json"),l(e)):e}],transformResponse:[function(e){var t=this.transitional,n=t&&t.silentJSONParsing,r=t&&t.forcedJSONParsing,s=!n&&"json"===this.responseType;if(s||r&&i.isString(e)&&e.length)try{return JSON.parse(e)}catch(a){if(s){if("SyntaxError"===a.name)throw o(a,this,"E_JSON_PARSE");throw a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};i.forEach(["delete","get","head"],(function(e){u.headers[e]={}})),i.forEach(["post","put","patch"],(function(e){u.headers[e]=i.merge(s)})),e.exports=u}).call(this,n("4362"))},2626:function(e,t,n){"use strict";var i=n("d066"),r=n("9bf2"),o=n("b622"),s=n("83ab"),a=o("species");e.exports=function(e){var t=i(e),n=r.f;s&&t&&!t[a]&&n(t,a,{configurable:!0,get:function(){return this}})}},"26dd":function(e,t,n){"use strict";var i=n("6f4f"),r=n("10db"),o=n("92f0"),s={};n("051b")(s,n("cc15")("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=i(s,{next:r(1,n)}),o(e,t+" Iterator")}},2877:function(e,t,n){"use strict";function i(e,t,n,i,r,o,s,a){var c,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),i&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=c):r&&(c=a?function(){r.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:r),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}n.d(t,"a",(function(){return i}))},2909:function(e,t,n){"use strict";function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function r(e){if(Array.isArray(e))return i(e)}n.d(t,"a",(function(){return c}));n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("a630");function o(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n("fb6a"),n("b0c0");function s(e,t){if(e){if("string"===typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e){return r(e)||o(e)||s(e)||a()}},"299c":function(e,t,n){e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=140)}({140:function(e,t,n){"use strict";n.r(t);var i=n(5),r=n.n(i),o=n(18),s=n.n(o),a=n(2),c=n(3),l=n(7),u=n.n(l),d={name:"ElTooltip",mixins:[r.a],props:{openDelay:{type:Number,default:0},disabled:Boolean,manual:Boolean,effect:{type:String,default:"dark"},arrowOffset:{type:Number,default:0},popperClass:String,content:String,visibleArrow:{default:!0},transition:{type:String,default:"el-fade-in-linear"},popperOptions:{default:function(){return{boundariesPadding:10,gpuAcceleration:!1}}},enterable:{type:Boolean,default:!0},hideAfter:{type:Number,default:0},tabindex:{type:Number,default:0}},data:function(){return{tooltipId:"el-tooltip-"+Object(c["generateId"])(),timeoutPending:null,focusing:!1}},beforeCreate:function(){var e=this;this.$isServer||(this.popperVM=new u.a({data:{node:""},render:function(e){return this.node}}).$mount(),this.debounceClose=s()(200,(function(){return e.handleClosePopper()})))},render:function(e){var t=this;this.popperVM&&(this.popperVM.node=e("transition",{attrs:{name:this.transition},on:{afterLeave:this.doDestroy}},[e("div",{on:{mouseleave:function(){t.setExpectedState(!1),t.debounceClose()},mouseenter:function(){t.setExpectedState(!0)}},ref:"popper",attrs:{role:"tooltip",id:this.tooltipId,"aria-hidden":this.disabled||!this.showPopper?"true":"false"},directives:[{name:"show",value:!this.disabled&&this.showPopper}],class:["el-tooltip__popper","is-"+this.effect,this.popperClass]},[this.$slots.content||this.content])]));var n=this.getFirstElement();if(!n)return null;var i=n.data=n.data||{};return i.staticClass=this.addTooltipClass(i.staticClass),n},mounted:function(){var e=this;this.referenceElm=this.$el,1===this.$el.nodeType&&(this.$el.setAttribute("aria-describedby",this.tooltipId),this.$el.setAttribute("tabindex",this.tabindex),Object(a["on"])(this.referenceElm,"mouseenter",this.show),Object(a["on"])(this.referenceElm,"mouseleave",this.hide),Object(a["on"])(this.referenceElm,"focus",(function(){if(e.$slots.default&&e.$slots.default.length){var t=e.$slots.default[0].componentInstance;t&&t.focus?t.focus():e.handleFocus()}else e.handleFocus()})),Object(a["on"])(this.referenceElm,"blur",this.handleBlur),Object(a["on"])(this.referenceElm,"click",this.removeFocusing)),this.value&&this.popperVM&&this.popperVM.$nextTick((function(){e.value&&e.updatePopper()}))},watch:{focusing:function(e){e?Object(a["addClass"])(this.referenceElm,"focusing"):Object(a["removeClass"])(this.referenceElm,"focusing")}},methods:{show:function(){this.setExpectedState(!0),this.handleShowPopper()},hide:function(){this.setExpectedState(!1),this.debounceClose()},handleFocus:function(){this.focusing=!0,this.show()},handleBlur:function(){this.focusing=!1,this.hide()},removeFocusing:function(){this.focusing=!1},addTooltipClass:function(e){return e?"el-tooltip "+e.replace("el-tooltip",""):"el-tooltip"},handleShowPopper:function(){var e=this;this.expectedState&&!this.manual&&(clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.showPopper=!0}),this.openDelay),this.hideAfter>0&&(this.timeoutPending=setTimeout((function(){e.showPopper=!1}),this.hideAfter)))},handleClosePopper:function(){this.enterable&&this.expectedState||this.manual||(clearTimeout(this.timeout),this.timeoutPending&&clearTimeout(this.timeoutPending),this.showPopper=!1,this.disabled&&this.doDestroy())},setExpectedState:function(e){!1===e&&clearTimeout(this.timeoutPending),this.expectedState=e},getFirstElement:function(){var e=this.$slots.default;if(!Array.isArray(e))return null;for(var t=null,n=0;n<e.length;n++)e[n]&&e[n].tag&&(t=e[n]);return t}},beforeDestroy:function(){this.popperVM&&this.popperVM.$destroy()},destroyed:function(){var e=this.referenceElm;1===e.nodeType&&(Object(a["off"])(e,"mouseenter",this.show),Object(a["off"])(e,"mouseleave",this.hide),Object(a["off"])(e,"focus",this.handleFocus),Object(a["off"])(e,"blur",this.handleBlur),Object(a["off"])(e,"click",this.removeFocusing))},install:function(e){e.component(d.name,d)}};t["default"]=d},18:function(e,t){e.exports=n("0e15")},2:function(e,t){e.exports=n("5924")},3:function(e,t){e.exports=n("8122")},5:function(e,t){e.exports=n("e974")},7:function(e,t){e.exports=n("2b0e")}})},"2a5e":function(e,t,n){"use strict";t.__esModule=!0,t.default=s;var i=n("2b0e"),r=o(i);function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!r.default.prototype.$isServer)if(t){var n=[],i=t.offsetParent;while(i&&e!==i&&e.contains(i))n.push(i),i=i.offsetParent;var o=t.offsetTop+n.reduce((function(e,t){return e+t.offsetTop}),0),s=o+t.offsetHeight,a=e.scrollTop,c=a+e.clientHeight;o<a?e.scrollTop=o:s>c&&(e.scrollTop=s-e.clientHeight)}else e.scrollTop=0}},"2a62":function(e,t,n){var i=n("c65b"),r=n("825a"),o=n("dc4a");e.exports=function(e,t,n){var s,a;r(e);try{if(s=o(e,"return"),!s){if("throw"===t)throw n;return n}s=i(s,e)}catch(c){a=!0,s=c}if("throw"===t)throw n;if(a)throw s;return r(s),n}},"2b0e":function(e,t,n){"use strict";n.r(t),function(e){
/*!
 * Vue.js v2.6.14
 * (c) 2014-2021 Evan You
 * Released under the MIT License.
 */
var n=Object.freeze({});function i(e){return void 0===e||null===e}function r(e){return void 0!==e&&null!==e}function o(e){return!0===e}function s(e){return!1===e}function a(e){return"string"===typeof e||"number"===typeof e||"symbol"===typeof e||"boolean"===typeof e}function c(e){return null!==e&&"object"===typeof e}var l=Object.prototype.toString;function u(e){return"[object Object]"===l.call(e)}function d(e){return"[object RegExp]"===l.call(e)}function h(e){var t=parseFloat(String(e));return t>=0&&Math.floor(t)===t&&isFinite(e)}function p(e){return r(e)&&"function"===typeof e.then&&"function"===typeof e.catch}function f(e){return null==e?"":Array.isArray(e)||u(e)&&e.toString===l?JSON.stringify(e,null,2):String(e)}function g(e){var t=parseFloat(e);return isNaN(t)?e:t}function m(e,t){for(var n=Object.create(null),i=e.split(","),r=0;r<i.length;r++)n[i[r]]=!0;return t?function(e){return n[e.toLowerCase()]}:function(e){return n[e]}}m("slot,component",!0);var _=m("key,ref,slot,slot-scope,is");function v(e,t){if(e.length){var n=e.indexOf(t);if(n>-1)return e.splice(n,1)}}var y=Object.prototype.hasOwnProperty;function C(e,t){return y.call(e,t)}function E(e){var t=Object.create(null);return function(n){var i=t[n];return i||(t[n]=e(n))}}var b=/-(\w)/g,T=E((function(e){return e.replace(b,(function(e,t){return t?t.toUpperCase():""}))})),S=E((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})),R=/\B([A-Z])/g,I=E((function(e){return e.replace(R,"-$1").toLowerCase()}));function w(e,t){function n(n){var i=arguments.length;return i?i>1?e.apply(t,arguments):e.call(t,n):e.call(t)}return n._length=e.length,n}function O(e,t){return e.bind(t)}var k=Function.prototype.bind?O:w;function M(e,t){t=t||0;var n=e.length-t,i=new Array(n);while(n--)i[n]=e[n+t];return i}function x(e,t){for(var n in t)e[n]=t[n];return e}function P(e){for(var t={},n=0;n<e.length;n++)e[n]&&x(t,e[n]);return t}function A(e,t,n){}var D=function(e,t,n){return!1},N=function(e){return e};function L(e,t){if(e===t)return!0;var n=c(e),i=c(t);if(!n||!i)return!n&&!i&&String(e)===String(t);try{var r=Array.isArray(e),o=Array.isArray(t);if(r&&o)return e.length===t.length&&e.every((function(e,n){return L(e,t[n])}));if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(r||o)return!1;var s=Object.keys(e),a=Object.keys(t);return s.length===a.length&&s.every((function(n){return L(e[n],t[n])}))}catch(l){return!1}}function U(e,t){for(var n=0;n<e.length;n++)if(L(e[n],t))return n;return-1}function B(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}}var V="data-server-rendered",j=["component","directive","filter"],F=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],$={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:D,isReservedAttr:D,isUnknownElement:D,getTagNamespace:A,parsePlatformTagName:N,mustUseProp:D,async:!0,_lifecycleHooks:F},H=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function K(e){var t=(e+"").charCodeAt(0);return 36===t||95===t}function W(e,t,n,i){Object.defineProperty(e,t,{value:n,enumerable:!!i,writable:!0,configurable:!0})}var q=new RegExp("[^"+H.source+".$_\\d]");function G(e){if(!q.test(e)){var t=e.split(".");return function(e){for(var n=0;n<t.length;n++){if(!e)return;e=e[t[n]]}return e}}}var z,Y="__proto__"in{},J="undefined"!==typeof window,X="undefined"!==typeof WXEnvironment&&!!WXEnvironment.platform,Q=X&&WXEnvironment.platform.toLowerCase(),Z=J&&window.navigator.userAgent.toLowerCase(),ee=Z&&/msie|trident/.test(Z),te=Z&&Z.indexOf("msie 9.0")>0,ne=Z&&Z.indexOf("edge/")>0,ie=(Z&&Z.indexOf("android"),Z&&/iphone|ipad|ipod|ios/.test(Z)||"ios"===Q),re=(Z&&/chrome\/\d+/.test(Z),Z&&/phantomjs/.test(Z),Z&&Z.match(/firefox\/(\d+)/)),oe={}.watch,se=!1;if(J)try{var ae={};Object.defineProperty(ae,"passive",{get:function(){se=!0}}),window.addEventListener("test-passive",null,ae)}catch(Ss){}var ce=function(){return void 0===z&&(z=!J&&!X&&"undefined"!==typeof e&&(e["process"]&&"server"===e["process"].env.VUE_ENV)),z},le=J&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function ue(e){return"function"===typeof e&&/native code/.test(e.toString())}var de,he="undefined"!==typeof Symbol&&ue(Symbol)&&"undefined"!==typeof Reflect&&ue(Reflect.ownKeys);de="undefined"!==typeof Set&&ue(Set)?Set:function(){function e(){this.set=Object.create(null)}return e.prototype.has=function(e){return!0===this.set[e]},e.prototype.add=function(e){this.set[e]=!0},e.prototype.clear=function(){this.set=Object.create(null)},e}();var pe=A,fe=0,ge=function(){this.id=fe++,this.subs=[]};ge.prototype.addSub=function(e){this.subs.push(e)},ge.prototype.removeSub=function(e){v(this.subs,e)},ge.prototype.depend=function(){ge.target&&ge.target.addDep(this)},ge.prototype.notify=function(){var e=this.subs.slice();for(var t=0,n=e.length;t<n;t++)e[t].update()},ge.target=null;var me=[];function _e(e){me.push(e),ge.target=e}function ve(){me.pop(),ge.target=me[me.length-1]}var ye=function(e,t,n,i,r,o,s,a){this.tag=e,this.data=t,this.children=n,this.text=i,this.elm=r,this.ns=void 0,this.context=o,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=t&&t.key,this.componentOptions=s,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=a,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},Ce={child:{configurable:!0}};Ce.child.get=function(){return this.componentInstance},Object.defineProperties(ye.prototype,Ce);var Ee=function(e){void 0===e&&(e="");var t=new ye;return t.text=e,t.isComment=!0,t};function be(e){return new ye(void 0,void 0,void 0,String(e))}function Te(e){var t=new ye(e.tag,e.data,e.children&&e.children.slice(),e.text,e.elm,e.context,e.componentOptions,e.asyncFactory);return t.ns=e.ns,t.isStatic=e.isStatic,t.key=e.key,t.isComment=e.isComment,t.fnContext=e.fnContext,t.fnOptions=e.fnOptions,t.fnScopeId=e.fnScopeId,t.asyncMeta=e.asyncMeta,t.isCloned=!0,t}var Se=Array.prototype,Re=Object.create(Se),Ie=["push","pop","shift","unshift","splice","sort","reverse"];Ie.forEach((function(e){var t=Se[e];W(Re,e,(function(){var n=[],i=arguments.length;while(i--)n[i]=arguments[i];var r,o=t.apply(this,n),s=this.__ob__;switch(e){case"push":case"unshift":r=n;break;case"splice":r=n.slice(2);break}return r&&s.observeArray(r),s.dep.notify(),o}))}));var we=Object.getOwnPropertyNames(Re),Oe=!0;function ke(e){Oe=e}var Me=function(e){this.value=e,this.dep=new ge,this.vmCount=0,W(e,"__ob__",this),Array.isArray(e)?(Y?xe(e,Re):Pe(e,Re,we),this.observeArray(e)):this.walk(e)};function xe(e,t){e.__proto__=t}function Pe(e,t,n){for(var i=0,r=n.length;i<r;i++){var o=n[i];W(e,o,t[o])}}function Ae(e,t){var n;if(c(e)&&!(e instanceof ye))return C(e,"__ob__")&&e.__ob__ instanceof Me?n=e.__ob__:Oe&&!ce()&&(Array.isArray(e)||u(e))&&Object.isExtensible(e)&&!e._isVue&&(n=new Me(e)),t&&n&&n.vmCount++,n}function De(e,t,n,i,r){var o=new ge,s=Object.getOwnPropertyDescriptor(e,t);if(!s||!1!==s.configurable){var a=s&&s.get,c=s&&s.set;a&&!c||2!==arguments.length||(n=e[t]);var l=!r&&Ae(n);Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){var t=a?a.call(e):n;return ge.target&&(o.depend(),l&&(l.dep.depend(),Array.isArray(t)&&Ue(t))),t},set:function(t){var i=a?a.call(e):n;t===i||t!==t&&i!==i||a&&!c||(c?c.call(e,t):n=t,l=!r&&Ae(t),o.notify())}})}}function Ne(e,t,n){if(Array.isArray(e)&&h(t))return e.length=Math.max(e.length,t),e.splice(t,1,n),n;if(t in e&&!(t in Object.prototype))return e[t]=n,n;var i=e.__ob__;return e._isVue||i&&i.vmCount?n:i?(De(i.value,t,n),i.dep.notify(),n):(e[t]=n,n)}function Le(e,t){if(Array.isArray(e)&&h(t))e.splice(t,1);else{var n=e.__ob__;e._isVue||n&&n.vmCount||C(e,t)&&(delete e[t],n&&n.dep.notify())}}function Ue(e){for(var t=void 0,n=0,i=e.length;n<i;n++)t=e[n],t&&t.__ob__&&t.__ob__.dep.depend(),Array.isArray(t)&&Ue(t)}Me.prototype.walk=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)De(e,t[n])},Me.prototype.observeArray=function(e){for(var t=0,n=e.length;t<n;t++)Ae(e[t])};var Be=$.optionMergeStrategies;function Ve(e,t){if(!t)return e;for(var n,i,r,o=he?Reflect.ownKeys(t):Object.keys(t),s=0;s<o.length;s++)n=o[s],"__ob__"!==n&&(i=e[n],r=t[n],C(e,n)?i!==r&&u(i)&&u(r)&&Ve(i,r):Ne(e,n,r));return e}function je(e,t,n){return n?function(){var i="function"===typeof t?t.call(n,n):t,r="function"===typeof e?e.call(n,n):e;return i?Ve(i,r):r}:t?e?function(){return Ve("function"===typeof t?t.call(this,this):t,"function"===typeof e?e.call(this,this):e)}:t:e}function Fe(e,t){var n=t?e?e.concat(t):Array.isArray(t)?t:[t]:e;return n?$e(n):n}function $e(e){for(var t=[],n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t}function He(e,t,n,i){var r=Object.create(e||null);return t?x(r,t):r}Be.data=function(e,t,n){return n?je(e,t,n):t&&"function"!==typeof t?e:je(e,t)},F.forEach((function(e){Be[e]=Fe})),j.forEach((function(e){Be[e+"s"]=He})),Be.watch=function(e,t,n,i){if(e===oe&&(e=void 0),t===oe&&(t=void 0),!t)return Object.create(e||null);if(!e)return t;var r={};for(var o in x(r,e),t){var s=r[o],a=t[o];s&&!Array.isArray(s)&&(s=[s]),r[o]=s?s.concat(a):Array.isArray(a)?a:[a]}return r},Be.props=Be.methods=Be.inject=Be.computed=function(e,t,n,i){if(!e)return t;var r=Object.create(null);return x(r,e),t&&x(r,t),r},Be.provide=je;var Ke=function(e,t){return void 0===t?e:t};function We(e,t){var n=e.props;if(n){var i,r,o,s={};if(Array.isArray(n)){i=n.length;while(i--)r=n[i],"string"===typeof r&&(o=T(r),s[o]={type:null})}else if(u(n))for(var a in n)r=n[a],o=T(a),s[o]=u(r)?r:{type:r};else 0;e.props=s}}function qe(e,t){var n=e.inject;if(n){var i=e.inject={};if(Array.isArray(n))for(var r=0;r<n.length;r++)i[n[r]]={from:n[r]};else if(u(n))for(var o in n){var s=n[o];i[o]=u(s)?x({from:o},s):{from:s}}else 0}}function Ge(e){var t=e.directives;if(t)for(var n in t){var i=t[n];"function"===typeof i&&(t[n]={bind:i,update:i})}}function ze(e,t,n){if("function"===typeof t&&(t=t.options),We(t,n),qe(t,n),Ge(t),!t._base&&(t.extends&&(e=ze(e,t.extends,n)),t.mixins))for(var i=0,r=t.mixins.length;i<r;i++)e=ze(e,t.mixins[i],n);var o,s={};for(o in e)a(o);for(o in t)C(e,o)||a(o);function a(i){var r=Be[i]||Ke;s[i]=r(e[i],t[i],n,i)}return s}function Ye(e,t,n,i){if("string"===typeof n){var r=e[t];if(C(r,n))return r[n];var o=T(n);if(C(r,o))return r[o];var s=S(o);if(C(r,s))return r[s];var a=r[n]||r[o]||r[s];return a}}function Je(e,t,n,i){var r=t[e],o=!C(n,e),s=n[e],a=tt(Boolean,r.type);if(a>-1)if(o&&!C(r,"default"))s=!1;else if(""===s||s===I(e)){var c=tt(String,r.type);(c<0||a<c)&&(s=!0)}if(void 0===s){s=Xe(i,r,e);var l=Oe;ke(!0),Ae(s),ke(l)}return s}function Xe(e,t,n){if(C(t,"default")){var i=t.default;return e&&e.$options.propsData&&void 0===e.$options.propsData[n]&&void 0!==e._props[n]?e._props[n]:"function"===typeof i&&"Function"!==Ze(t.type)?i.call(e):i}}var Qe=/^\s*function (\w+)/;function Ze(e){var t=e&&e.toString().match(Qe);return t?t[1]:""}function et(e,t){return Ze(e)===Ze(t)}function tt(e,t){if(!Array.isArray(t))return et(t,e)?0:-1;for(var n=0,i=t.length;n<i;n++)if(et(t[n],e))return n;return-1}function nt(e,t,n){_e();try{if(t){var i=t;while(i=i.$parent){var r=i.$options.errorCaptured;if(r)for(var o=0;o<r.length;o++)try{var s=!1===r[o].call(i,e,t,n);if(s)return}catch(Ss){rt(Ss,i,"errorCaptured hook")}}}rt(e,t,n)}finally{ve()}}function it(e,t,n,i,r){var o;try{o=n?e.apply(t,n):e.call(t),o&&!o._isVue&&p(o)&&!o._handled&&(o.catch((function(e){return nt(e,i,r+" (Promise/async)")})),o._handled=!0)}catch(Ss){nt(Ss,i,r)}return o}function rt(e,t,n){if($.errorHandler)try{return $.errorHandler.call(null,e,t,n)}catch(Ss){Ss!==e&&ot(Ss,null,"config.errorHandler")}ot(e,t,n)}function ot(e,t,n){if(!J&&!X||"undefined"===typeof console)throw e;console.error(e)}var st,at=!1,ct=[],lt=!1;function ut(){lt=!1;var e=ct.slice(0);ct.length=0;for(var t=0;t<e.length;t++)e[t]()}if("undefined"!==typeof Promise&&ue(Promise)){var dt=Promise.resolve();st=function(){dt.then(ut),ie&&setTimeout(A)},at=!0}else if(ee||"undefined"===typeof MutationObserver||!ue(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())st="undefined"!==typeof setImmediate&&ue(setImmediate)?function(){setImmediate(ut)}:function(){setTimeout(ut,0)};else{var ht=1,pt=new MutationObserver(ut),ft=document.createTextNode(String(ht));pt.observe(ft,{characterData:!0}),st=function(){ht=(ht+1)%2,ft.data=String(ht)},at=!0}function gt(e,t){var n;if(ct.push((function(){if(e)try{e.call(t)}catch(Ss){nt(Ss,t,"nextTick")}else n&&n(t)})),lt||(lt=!0,st()),!e&&"undefined"!==typeof Promise)return new Promise((function(e){n=e}))}var mt=new de;function _t(e){vt(e,mt),mt.clear()}function vt(e,t){var n,i,r=Array.isArray(e);if(!(!r&&!c(e)||Object.isFrozen(e)||e instanceof ye)){if(e.__ob__){var o=e.__ob__.dep.id;if(t.has(o))return;t.add(o)}if(r){n=e.length;while(n--)vt(e[n],t)}else{i=Object.keys(e),n=i.length;while(n--)vt(e[i[n]],t)}}}var yt=E((function(e){var t="&"===e.charAt(0);e=t?e.slice(1):e;var n="~"===e.charAt(0);e=n?e.slice(1):e;var i="!"===e.charAt(0);return e=i?e.slice(1):e,{name:e,once:n,capture:i,passive:t}}));function Ct(e,t){function n(){var e=arguments,i=n.fns;if(!Array.isArray(i))return it(i,null,arguments,t,"v-on handler");for(var r=i.slice(),o=0;o<r.length;o++)it(r[o],null,e,t,"v-on handler")}return n.fns=e,n}function Et(e,t,n,r,s,a){var c,l,u,d;for(c in e)l=e[c],u=t[c],d=yt(c),i(l)||(i(u)?(i(l.fns)&&(l=e[c]=Ct(l,a)),o(d.once)&&(l=e[c]=s(d.name,l,d.capture)),n(d.name,l,d.capture,d.passive,d.params)):l!==u&&(u.fns=l,e[c]=u));for(c in t)i(e[c])&&(d=yt(c),r(d.name,t[c],d.capture))}function bt(e,t,n){var s;e instanceof ye&&(e=e.data.hook||(e.data.hook={}));var a=e[t];function c(){n.apply(this,arguments),v(s.fns,c)}i(a)?s=Ct([c]):r(a.fns)&&o(a.merged)?(s=a,s.fns.push(c)):s=Ct([a,c]),s.merged=!0,e[t]=s}function Tt(e,t,n){var o=t.options.props;if(!i(o)){var s={},a=e.attrs,c=e.props;if(r(a)||r(c))for(var l in o){var u=I(l);St(s,c,l,u,!0)||St(s,a,l,u,!1)}return s}}function St(e,t,n,i,o){if(r(t)){if(C(t,n))return e[n]=t[n],o||delete t[n],!0;if(C(t,i))return e[n]=t[i],o||delete t[i],!0}return!1}function Rt(e){for(var t=0;t<e.length;t++)if(Array.isArray(e[t]))return Array.prototype.concat.apply([],e);return e}function It(e){return a(e)?[be(e)]:Array.isArray(e)?Ot(e):void 0}function wt(e){return r(e)&&r(e.text)&&s(e.isComment)}function Ot(e,t){var n,s,c,l,u=[];for(n=0;n<e.length;n++)s=e[n],i(s)||"boolean"===typeof s||(c=u.length-1,l=u[c],Array.isArray(s)?s.length>0&&(s=Ot(s,(t||"")+"_"+n),wt(s[0])&&wt(l)&&(u[c]=be(l.text+s[0].text),s.shift()),u.push.apply(u,s)):a(s)?wt(l)?u[c]=be(l.text+s):""!==s&&u.push(be(s)):wt(s)&&wt(l)?u[c]=be(l.text+s.text):(o(e._isVList)&&r(s.tag)&&i(s.key)&&r(t)&&(s.key="__vlist"+t+"_"+n+"__"),u.push(s)));return u}function kt(e){var t=e.$options.provide;t&&(e._provided="function"===typeof t?t.call(e):t)}function Mt(e){var t=xt(e.$options.inject,e);t&&(ke(!1),Object.keys(t).forEach((function(n){De(e,n,t[n])})),ke(!0))}function xt(e,t){if(e){for(var n=Object.create(null),i=he?Reflect.ownKeys(e):Object.keys(e),r=0;r<i.length;r++){var o=i[r];if("__ob__"!==o){var s=e[o].from,a=t;while(a){if(a._provided&&C(a._provided,s)){n[o]=a._provided[s];break}a=a.$parent}if(!a)if("default"in e[o]){var c=e[o].default;n[o]="function"===typeof c?c.call(t):c}else 0}}return n}}function Pt(e,t){if(!e||!e.length)return{};for(var n={},i=0,r=e.length;i<r;i++){var o=e[i],s=o.data;if(s&&s.attrs&&s.attrs.slot&&delete s.attrs.slot,o.context!==t&&o.fnContext!==t||!s||null==s.slot)(n.default||(n.default=[])).push(o);else{var a=s.slot,c=n[a]||(n[a]=[]);"template"===o.tag?c.push.apply(c,o.children||[]):c.push(o)}}for(var l in n)n[l].every(At)&&delete n[l];return n}function At(e){return e.isComment&&!e.asyncFactory||" "===e.text}function Dt(e){return e.isComment&&e.asyncFactory}function Nt(e,t,i){var r,o=Object.keys(t).length>0,s=e?!!e.$stable:!o,a=e&&e.$key;if(e){if(e._normalized)return e._normalized;if(s&&i&&i!==n&&a===i.$key&&!o&&!i.$hasNormal)return i;for(var c in r={},e)e[c]&&"$"!==c[0]&&(r[c]=Lt(t,c,e[c]))}else r={};for(var l in t)l in r||(r[l]=Ut(t,l));return e&&Object.isExtensible(e)&&(e._normalized=r),W(r,"$stable",s),W(r,"$key",a),W(r,"$hasNormal",o),r}function Lt(e,t,n){var i=function(){var e=arguments.length?n.apply(null,arguments):n({});e=e&&"object"===typeof e&&!Array.isArray(e)?[e]:It(e);var t=e&&e[0];return e&&(!t||1===e.length&&t.isComment&&!Dt(t))?void 0:e};return n.proxy&&Object.defineProperty(e,t,{get:i,enumerable:!0,configurable:!0}),i}function Ut(e,t){return function(){return e[t]}}function Bt(e,t){var n,i,o,s,a;if(Array.isArray(e)||"string"===typeof e)for(n=new Array(e.length),i=0,o=e.length;i<o;i++)n[i]=t(e[i],i);else if("number"===typeof e)for(n=new Array(e),i=0;i<e;i++)n[i]=t(i+1,i);else if(c(e))if(he&&e[Symbol.iterator]){n=[];var l=e[Symbol.iterator](),u=l.next();while(!u.done)n.push(t(u.value,n.length)),u=l.next()}else for(s=Object.keys(e),n=new Array(s.length),i=0,o=s.length;i<o;i++)a=s[i],n[i]=t(e[a],a,i);return r(n)||(n=[]),n._isVList=!0,n}function Vt(e,t,n,i){var r,o=this.$scopedSlots[e];o?(n=n||{},i&&(n=x(x({},i),n)),r=o(n)||("function"===typeof t?t():t)):r=this.$slots[e]||("function"===typeof t?t():t);var s=n&&n.slot;return s?this.$createElement("template",{slot:s},r):r}function jt(e){return Ye(this.$options,"filters",e,!0)||N}function Ft(e,t){return Array.isArray(e)?-1===e.indexOf(t):e!==t}function $t(e,t,n,i,r){var o=$.keyCodes[t]||n;return r&&i&&!$.keyCodes[t]?Ft(r,i):o?Ft(o,e):i?I(i)!==t:void 0===e}function Ht(e,t,n,i,r){if(n)if(c(n)){var o;Array.isArray(n)&&(n=P(n));var s=function(s){if("class"===s||"style"===s||_(s))o=e;else{var a=e.attrs&&e.attrs.type;o=i||$.mustUseProp(t,a,s)?e.domProps||(e.domProps={}):e.attrs||(e.attrs={})}var c=T(s),l=I(s);if(!(c in o)&&!(l in o)&&(o[s]=n[s],r)){var u=e.on||(e.on={});u["update:"+s]=function(e){n[s]=e}}};for(var a in n)s(a)}else;return e}function Kt(e,t){var n=this._staticTrees||(this._staticTrees=[]),i=n[e];return i&&!t||(i=n[e]=this.$options.staticRenderFns[e].call(this._renderProxy,null,this),qt(i,"__static__"+e,!1)),i}function Wt(e,t,n){return qt(e,"__once__"+t+(n?"_"+n:""),!0),e}function qt(e,t,n){if(Array.isArray(e))for(var i=0;i<e.length;i++)e[i]&&"string"!==typeof e[i]&&Gt(e[i],t+"_"+i,n);else Gt(e,t,n)}function Gt(e,t,n){e.isStatic=!0,e.key=t,e.isOnce=n}function zt(e,t){if(t)if(u(t)){var n=e.on=e.on?x({},e.on):{};for(var i in t){var r=n[i],o=t[i];n[i]=r?[].concat(r,o):o}}else;return e}function Yt(e,t,n,i){t=t||{$stable:!n};for(var r=0;r<e.length;r++){var o=e[r];Array.isArray(o)?Yt(o,t,n):o&&(o.proxy&&(o.fn.proxy=!0),t[o.key]=o.fn)}return i&&(t.$key=i),t}function Jt(e,t){for(var n=0;n<t.length;n+=2){var i=t[n];"string"===typeof i&&i&&(e[t[n]]=t[n+1])}return e}function Xt(e,t){return"string"===typeof e?t+e:e}function Qt(e){e._o=Wt,e._n=g,e._s=f,e._l=Bt,e._t=Vt,e._q=L,e._i=U,e._m=Kt,e._f=jt,e._k=$t,e._b=Ht,e._v=be,e._e=Ee,e._u=Yt,e._g=zt,e._d=Jt,e._p=Xt}function Zt(e,t,i,r,s){var a,c=this,l=s.options;C(r,"_uid")?(a=Object.create(r),a._original=r):(a=r,r=r._original);var u=o(l._compiled),d=!u;this.data=e,this.props=t,this.children=i,this.parent=r,this.listeners=e.on||n,this.injections=xt(l.inject,r),this.slots=function(){return c.$slots||Nt(e.scopedSlots,c.$slots=Pt(i,r)),c.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return Nt(e.scopedSlots,this.slots())}}),u&&(this.$options=l,this.$slots=this.slots(),this.$scopedSlots=Nt(e.scopedSlots,this.$slots)),l._scopeId?this._c=function(e,t,n,i){var o=pn(a,e,t,n,i,d);return o&&!Array.isArray(o)&&(o.fnScopeId=l._scopeId,o.fnContext=r),o}:this._c=function(e,t,n,i){return pn(a,e,t,n,i,d)}}function en(e,t,i,o,s){var a=e.options,c={},l=a.props;if(r(l))for(var u in l)c[u]=Je(u,l,t||n);else r(i.attrs)&&nn(c,i.attrs),r(i.props)&&nn(c,i.props);var d=new Zt(i,c,s,o,e),h=a.render.call(null,d._c,d);if(h instanceof ye)return tn(h,i,d.parent,a,d);if(Array.isArray(h)){for(var p=It(h)||[],f=new Array(p.length),g=0;g<p.length;g++)f[g]=tn(p[g],i,d.parent,a,d);return f}}function tn(e,t,n,i,r){var o=Te(e);return o.fnContext=n,o.fnOptions=i,t.slot&&((o.data||(o.data={})).slot=t.slot),o}function nn(e,t){for(var n in t)e[T(n)]=t[n]}Qt(Zt.prototype);var rn={init:function(e,t){if(e.componentInstance&&!e.componentInstance._isDestroyed&&e.data.keepAlive){var n=e;rn.prepatch(n,n)}else{var i=e.componentInstance=an(e,xn);i.$mount(t?e.elm:void 0,t)}},prepatch:function(e,t){var n=t.componentOptions,i=t.componentInstance=e.componentInstance;Ln(i,n.propsData,n.listeners,t,n.children)},insert:function(e){var t=e.context,n=e.componentInstance;n._isMounted||(n._isMounted=!0,jn(n,"mounted")),e.data.keepAlive&&(t._isMounted?Zn(n):Bn(n,!0))},destroy:function(e){var t=e.componentInstance;t._isDestroyed||(e.data.keepAlive?Vn(t,!0):t.$destroy())}},on=Object.keys(rn);function sn(e,t,n,s,a){if(!i(e)){var l=n.$options._base;if(c(e)&&(e=l.extend(e)),"function"===typeof e){var u;if(i(e.cid)&&(u=e,e=Tn(u,l),void 0===e))return bn(u,t,n,s,a);t=t||{},bi(e),r(t.model)&&un(e.options,t);var d=Tt(t,e,a);if(o(e.options.functional))return en(e,d,t,n,s);var h=t.on;if(t.on=t.nativeOn,o(e.options.abstract)){var p=t.slot;t={},p&&(t.slot=p)}cn(t);var f=e.options.name||a,g=new ye("vue-component-"+e.cid+(f?"-"+f:""),t,void 0,void 0,void 0,n,{Ctor:e,propsData:d,listeners:h,tag:a,children:s},u);return g}}}function an(e,t){var n={_isComponent:!0,_parentVnode:e,parent:t},i=e.data.inlineTemplate;return r(i)&&(n.render=i.render,n.staticRenderFns=i.staticRenderFns),new e.componentOptions.Ctor(n)}function cn(e){for(var t=e.hook||(e.hook={}),n=0;n<on.length;n++){var i=on[n],r=t[i],o=rn[i];r===o||r&&r._merged||(t[i]=r?ln(o,r):o)}}function ln(e,t){var n=function(n,i){e(n,i),t(n,i)};return n._merged=!0,n}function un(e,t){var n=e.model&&e.model.prop||"value",i=e.model&&e.model.event||"input";(t.attrs||(t.attrs={}))[n]=t.model.value;var o=t.on||(t.on={}),s=o[i],a=t.model.callback;r(s)?(Array.isArray(s)?-1===s.indexOf(a):s!==a)&&(o[i]=[a].concat(s)):o[i]=a}var dn=1,hn=2;function pn(e,t,n,i,r,s){return(Array.isArray(n)||a(n))&&(r=i,i=n,n=void 0),o(s)&&(r=hn),fn(e,t,n,i,r)}function fn(e,t,n,i,o){if(r(n)&&r(n.__ob__))return Ee();if(r(n)&&r(n.is)&&(t=n.is),!t)return Ee();var s,a,c;(Array.isArray(i)&&"function"===typeof i[0]&&(n=n||{},n.scopedSlots={default:i[0]},i.length=0),o===hn?i=It(i):o===dn&&(i=Rt(i)),"string"===typeof t)?(a=e.$vnode&&e.$vnode.ns||$.getTagNamespace(t),s=$.isReservedTag(t)?new ye($.parsePlatformTagName(t),n,i,void 0,void 0,e):n&&n.pre||!r(c=Ye(e.$options,"components",t))?new ye(t,n,i,void 0,void 0,e):sn(c,n,e,i,t)):s=sn(t,n,e,i);return Array.isArray(s)?s:r(s)?(r(a)&&gn(s,a),r(n)&&mn(n),s):Ee()}function gn(e,t,n){if(e.ns=t,"foreignObject"===e.tag&&(t=void 0,n=!0),r(e.children))for(var s=0,a=e.children.length;s<a;s++){var c=e.children[s];r(c.tag)&&(i(c.ns)||o(n)&&"svg"!==c.tag)&&gn(c,t,n)}}function mn(e){c(e.style)&&_t(e.style),c(e.class)&&_t(e.class)}function _n(e){e._vnode=null,e._staticTrees=null;var t=e.$options,i=e.$vnode=t._parentVnode,r=i&&i.context;e.$slots=Pt(t._renderChildren,r),e.$scopedSlots=n,e._c=function(t,n,i,r){return pn(e,t,n,i,r,!1)},e.$createElement=function(t,n,i,r){return pn(e,t,n,i,r,!0)};var o=i&&i.data;De(e,"$attrs",o&&o.attrs||n,null,!0),De(e,"$listeners",t._parentListeners||n,null,!0)}var vn,yn=null;function Cn(e){Qt(e.prototype),e.prototype.$nextTick=function(e){return gt(e,this)},e.prototype._render=function(){var e,t=this,n=t.$options,i=n.render,r=n._parentVnode;r&&(t.$scopedSlots=Nt(r.data.scopedSlots,t.$slots,t.$scopedSlots)),t.$vnode=r;try{yn=t,e=i.call(t._renderProxy,t.$createElement)}catch(Ss){nt(Ss,t,"render"),e=t._vnode}finally{yn=null}return Array.isArray(e)&&1===e.length&&(e=e[0]),e instanceof ye||(e=Ee()),e.parent=r,e}}function En(e,t){return(e.__esModule||he&&"Module"===e[Symbol.toStringTag])&&(e=e.default),c(e)?t.extend(e):e}function bn(e,t,n,i,r){var o=Ee();return o.asyncFactory=e,o.asyncMeta={data:t,context:n,children:i,tag:r},o}function Tn(e,t){if(o(e.error)&&r(e.errorComp))return e.errorComp;if(r(e.resolved))return e.resolved;var n=yn;if(n&&r(e.owners)&&-1===e.owners.indexOf(n)&&e.owners.push(n),o(e.loading)&&r(e.loadingComp))return e.loadingComp;if(n&&!r(e.owners)){var s=e.owners=[n],a=!0,l=null,u=null;n.$on("hook:destroyed",(function(){return v(s,n)}));var d=function(e){for(var t=0,n=s.length;t<n;t++)s[t].$forceUpdate();e&&(s.length=0,null!==l&&(clearTimeout(l),l=null),null!==u&&(clearTimeout(u),u=null))},h=B((function(n){e.resolved=En(n,t),a?s.length=0:d(!0)})),f=B((function(t){r(e.errorComp)&&(e.error=!0,d(!0))})),g=e(h,f);return c(g)&&(p(g)?i(e.resolved)&&g.then(h,f):p(g.component)&&(g.component.then(h,f),r(g.error)&&(e.errorComp=En(g.error,t)),r(g.loading)&&(e.loadingComp=En(g.loading,t),0===g.delay?e.loading=!0:l=setTimeout((function(){l=null,i(e.resolved)&&i(e.error)&&(e.loading=!0,d(!1))}),g.delay||200)),r(g.timeout)&&(u=setTimeout((function(){u=null,i(e.resolved)&&f(null)}),g.timeout)))),a=!1,e.loading?e.loadingComp:e.resolved}}function Sn(e){if(Array.isArray(e))for(var t=0;t<e.length;t++){var n=e[t];if(r(n)&&(r(n.componentOptions)||Dt(n)))return n}}function Rn(e){e._events=Object.create(null),e._hasHookEvent=!1;var t=e.$options._parentListeners;t&&kn(e,t)}function In(e,t){vn.$on(e,t)}function wn(e,t){vn.$off(e,t)}function On(e,t){var n=vn;return function i(){var r=t.apply(null,arguments);null!==r&&n.$off(e,i)}}function kn(e,t,n){vn=e,Et(t,n||{},In,wn,On,e),vn=void 0}function Mn(e){var t=/^hook:/;e.prototype.$on=function(e,n){var i=this;if(Array.isArray(e))for(var r=0,o=e.length;r<o;r++)i.$on(e[r],n);else(i._events[e]||(i._events[e]=[])).push(n),t.test(e)&&(i._hasHookEvent=!0);return i},e.prototype.$once=function(e,t){var n=this;function i(){n.$off(e,i),t.apply(n,arguments)}return i.fn=t,n.$on(e,i),n},e.prototype.$off=function(e,t){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(Array.isArray(e)){for(var i=0,r=e.length;i<r;i++)n.$off(e[i],t);return n}var o,s=n._events[e];if(!s)return n;if(!t)return n._events[e]=null,n;var a=s.length;while(a--)if(o=s[a],o===t||o.fn===t){s.splice(a,1);break}return n},e.prototype.$emit=function(e){var t=this,n=t._events[e];if(n){n=n.length>1?M(n):n;for(var i=M(arguments,1),r='event handler for "'+e+'"',o=0,s=n.length;o<s;o++)it(n[o],t,i,t,r)}return t}}var xn=null;function Pn(e){var t=xn;return xn=e,function(){xn=t}}function An(e){var t=e.$options,n=t.parent;if(n&&!t.abstract){while(n.$options.abstract&&n.$parent)n=n.$parent;n.$children.push(e)}e.$parent=n,e.$root=n?n.$root:e,e.$children=[],e.$refs={},e._watcher=null,e._inactive=null,e._directInactive=!1,e._isMounted=!1,e._isDestroyed=!1,e._isBeingDestroyed=!1}function Dn(e){e.prototype._update=function(e,t){var n=this,i=n.$el,r=n._vnode,o=Pn(n);n._vnode=e,n.$el=r?n.__patch__(r,e):n.__patch__(n.$el,e,t,!1),o(),i&&(i.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},e.prototype.$forceUpdate=function(){var e=this;e._watcher&&e._watcher.update()},e.prototype.$destroy=function(){var e=this;if(!e._isBeingDestroyed){jn(e,"beforeDestroy"),e._isBeingDestroyed=!0;var t=e.$parent;!t||t._isBeingDestroyed||e.$options.abstract||v(t.$children,e),e._watcher&&e._watcher.teardown();var n=e._watchers.length;while(n--)e._watchers[n].teardown();e._data.__ob__&&e._data.__ob__.vmCount--,e._isDestroyed=!0,e.__patch__(e._vnode,null),jn(e,"destroyed"),e.$off(),e.$el&&(e.$el.__vue__=null),e.$vnode&&(e.$vnode.parent=null)}}}function Nn(e,t,n){var i;return e.$el=t,e.$options.render||(e.$options.render=Ee),jn(e,"beforeMount"),i=function(){e._update(e._render(),n)},new ii(e,i,A,{before:function(){e._isMounted&&!e._isDestroyed&&jn(e,"beforeUpdate")}},!0),n=!1,null==e.$vnode&&(e._isMounted=!0,jn(e,"mounted")),e}function Ln(e,t,i,r,o){var s=r.data.scopedSlots,a=e.$scopedSlots,c=!!(s&&!s.$stable||a!==n&&!a.$stable||s&&e.$scopedSlots.$key!==s.$key||!s&&e.$scopedSlots.$key),l=!!(o||e.$options._renderChildren||c);if(e.$options._parentVnode=r,e.$vnode=r,e._vnode&&(e._vnode.parent=r),e.$options._renderChildren=o,e.$attrs=r.data.attrs||n,e.$listeners=i||n,t&&e.$options.props){ke(!1);for(var u=e._props,d=e.$options._propKeys||[],h=0;h<d.length;h++){var p=d[h],f=e.$options.props;u[p]=Je(p,f,t,e)}ke(!0),e.$options.propsData=t}i=i||n;var g=e.$options._parentListeners;e.$options._parentListeners=i,kn(e,i,g),l&&(e.$slots=Pt(o,r.context),e.$forceUpdate())}function Un(e){while(e&&(e=e.$parent))if(e._inactive)return!0;return!1}function Bn(e,t){if(t){if(e._directInactive=!1,Un(e))return}else if(e._directInactive)return;if(e._inactive||null===e._inactive){e._inactive=!1;for(var n=0;n<e.$children.length;n++)Bn(e.$children[n]);jn(e,"activated")}}function Vn(e,t){if((!t||(e._directInactive=!0,!Un(e)))&&!e._inactive){e._inactive=!0;for(var n=0;n<e.$children.length;n++)Vn(e.$children[n]);jn(e,"deactivated")}}function jn(e,t){_e();var n=e.$options[t],i=t+" hook";if(n)for(var r=0,o=n.length;r<o;r++)it(n[r],e,null,e,i);e._hasHookEvent&&e.$emit("hook:"+t),ve()}var Fn=[],$n=[],Hn={},Kn=!1,Wn=!1,qn=0;function Gn(){qn=Fn.length=$n.length=0,Hn={},Kn=Wn=!1}var zn=0,Yn=Date.now;if(J&&!ee){var Jn=window.performance;Jn&&"function"===typeof Jn.now&&Yn()>document.createEvent("Event").timeStamp&&(Yn=function(){return Jn.now()})}function Xn(){var e,t;for(zn=Yn(),Wn=!0,Fn.sort((function(e,t){return e.id-t.id})),qn=0;qn<Fn.length;qn++)e=Fn[qn],e.before&&e.before(),t=e.id,Hn[t]=null,e.run();var n=$n.slice(),i=Fn.slice();Gn(),ei(n),Qn(i),le&&$.devtools&&le.emit("flush")}function Qn(e){var t=e.length;while(t--){var n=e[t],i=n.vm;i._watcher===n&&i._isMounted&&!i._isDestroyed&&jn(i,"updated")}}function Zn(e){e._inactive=!1,$n.push(e)}function ei(e){for(var t=0;t<e.length;t++)e[t]._inactive=!0,Bn(e[t],!0)}function ti(e){var t=e.id;if(null==Hn[t]){if(Hn[t]=!0,Wn){var n=Fn.length-1;while(n>qn&&Fn[n].id>e.id)n--;Fn.splice(n+1,0,e)}else Fn.push(e);Kn||(Kn=!0,gt(Xn))}}var ni=0,ii=function(e,t,n,i,r){this.vm=e,r&&(e._watcher=this),e._watchers.push(this),i?(this.deep=!!i.deep,this.user=!!i.user,this.lazy=!!i.lazy,this.sync=!!i.sync,this.before=i.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++ni,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new de,this.newDepIds=new de,this.expression="","function"===typeof t?this.getter=t:(this.getter=G(t),this.getter||(this.getter=A)),this.value=this.lazy?void 0:this.get()};ii.prototype.get=function(){var e;_e(this);var t=this.vm;try{e=this.getter.call(t,t)}catch(Ss){if(!this.user)throw Ss;nt(Ss,t,'getter for watcher "'+this.expression+'"')}finally{this.deep&&_t(e),ve(),this.cleanupDeps()}return e},ii.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))},ii.prototype.cleanupDeps=function(){var e=this.deps.length;while(e--){var t=this.deps[e];this.newDepIds.has(t.id)||t.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},ii.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():ti(this)},ii.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||c(e)||this.deep){var t=this.value;if(this.value=e,this.user){var n='callback for watcher "'+this.expression+'"';it(this.cb,this.vm,[e,t],this.vm,n)}else this.cb.call(this.vm,e,t)}}},ii.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},ii.prototype.depend=function(){var e=this.deps.length;while(e--)this.deps[e].depend()},ii.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||v(this.vm._watchers,this);var e=this.deps.length;while(e--)this.deps[e].removeSub(this);this.active=!1}};var ri={enumerable:!0,configurable:!0,get:A,set:A};function oi(e,t,n){ri.get=function(){return this[t][n]},ri.set=function(e){this[t][n]=e},Object.defineProperty(e,n,ri)}function si(e){e._watchers=[];var t=e.$options;t.props&&ai(e,t.props),t.methods&&gi(e,t.methods),t.data?ci(e):Ae(e._data={},!0),t.computed&&di(e,t.computed),t.watch&&t.watch!==oe&&mi(e,t.watch)}function ai(e,t){var n=e.$options.propsData||{},i=e._props={},r=e.$options._propKeys=[],o=!e.$parent;o||ke(!1);var s=function(o){r.push(o);var s=Je(o,t,n,e);De(i,o,s),o in e||oi(e,"_props",o)};for(var a in t)s(a);ke(!0)}function ci(e){var t=e.$options.data;t=e._data="function"===typeof t?li(t,e):t||{},u(t)||(t={});var n=Object.keys(t),i=e.$options.props,r=(e.$options.methods,n.length);while(r--){var o=n[r];0,i&&C(i,o)||K(o)||oi(e,"_data",o)}Ae(t,!0)}function li(e,t){_e();try{return e.call(t,t)}catch(Ss){return nt(Ss,t,"data()"),{}}finally{ve()}}var ui={lazy:!0};function di(e,t){var n=e._computedWatchers=Object.create(null),i=ce();for(var r in t){var o=t[r],s="function"===typeof o?o:o.get;0,i||(n[r]=new ii(e,s||A,A,ui)),r in e||hi(e,r,o)}}function hi(e,t,n){var i=!ce();"function"===typeof n?(ri.get=i?pi(t):fi(n),ri.set=A):(ri.get=n.get?i&&!1!==n.cache?pi(t):fi(n.get):A,ri.set=n.set||A),Object.defineProperty(e,t,ri)}function pi(e){return function(){var t=this._computedWatchers&&this._computedWatchers[e];if(t)return t.dirty&&t.evaluate(),ge.target&&t.depend(),t.value}}function fi(e){return function(){return e.call(this,this)}}function gi(e,t){e.$options.props;for(var n in t)e[n]="function"!==typeof t[n]?A:k(t[n],e)}function mi(e,t){for(var n in t){var i=t[n];if(Array.isArray(i))for(var r=0;r<i.length;r++)_i(e,n,i[r]);else _i(e,n,i)}}function _i(e,t,n,i){return u(n)&&(i=n,n=n.handler),"string"===typeof n&&(n=e[n]),e.$watch(t,n,i)}function vi(e){var t={get:function(){return this._data}},n={get:function(){return this._props}};Object.defineProperty(e.prototype,"$data",t),Object.defineProperty(e.prototype,"$props",n),e.prototype.$set=Ne,e.prototype.$delete=Le,e.prototype.$watch=function(e,t,n){var i=this;if(u(t))return _i(i,e,t,n);n=n||{},n.user=!0;var r=new ii(i,e,t,n);if(n.immediate){var o='callback for immediate watcher "'+r.expression+'"';_e(),it(t,i,[r.value],i,o),ve()}return function(){r.teardown()}}}var yi=0;function Ci(e){e.prototype._init=function(e){var t=this;t._uid=yi++,t._isVue=!0,e&&e._isComponent?Ei(t,e):t.$options=ze(bi(t.constructor),e||{},t),t._renderProxy=t,t._self=t,An(t),Rn(t),_n(t),jn(t,"beforeCreate"),Mt(t),si(t),kt(t),jn(t,"created"),t.$options.el&&t.$mount(t.$options.el)}}function Ei(e,t){var n=e.$options=Object.create(e.constructor.options),i=t._parentVnode;n.parent=t.parent,n._parentVnode=i;var r=i.componentOptions;n.propsData=r.propsData,n._parentListeners=r.listeners,n._renderChildren=r.children,n._componentTag=r.tag,t.render&&(n.render=t.render,n.staticRenderFns=t.staticRenderFns)}function bi(e){var t=e.options;if(e.super){var n=bi(e.super),i=e.superOptions;if(n!==i){e.superOptions=n;var r=Ti(e);r&&x(e.extendOptions,r),t=e.options=ze(n,e.extendOptions),t.name&&(t.components[t.name]=e)}}return t}function Ti(e){var t,n=e.options,i=e.sealedOptions;for(var r in n)n[r]!==i[r]&&(t||(t={}),t[r]=n[r]);return t}function Si(e){this._init(e)}function Ri(e){e.use=function(e){var t=this._installedPlugins||(this._installedPlugins=[]);if(t.indexOf(e)>-1)return this;var n=M(arguments,1);return n.unshift(this),"function"===typeof e.install?e.install.apply(e,n):"function"===typeof e&&e.apply(null,n),t.push(e),this}}function Ii(e){e.mixin=function(e){return this.options=ze(this.options,e),this}}function wi(e){e.cid=0;var t=1;e.extend=function(e){e=e||{};var n=this,i=n.cid,r=e._Ctor||(e._Ctor={});if(r[i])return r[i];var o=e.name||n.options.name;var s=function(e){this._init(e)};return s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.cid=t++,s.options=ze(n.options,e),s["super"]=n,s.options.props&&Oi(s),s.options.computed&&ki(s),s.extend=n.extend,s.mixin=n.mixin,s.use=n.use,j.forEach((function(e){s[e]=n[e]})),o&&(s.options.components[o]=s),s.superOptions=n.options,s.extendOptions=e,s.sealedOptions=x({},s.options),r[i]=s,s}}function Oi(e){var t=e.options.props;for(var n in t)oi(e.prototype,"_props",n)}function ki(e){var t=e.options.computed;for(var n in t)hi(e.prototype,n,t[n])}function Mi(e){j.forEach((function(t){e[t]=function(e,n){return n?("component"===t&&u(n)&&(n.name=n.name||e,n=this.options._base.extend(n)),"directive"===t&&"function"===typeof n&&(n={bind:n,update:n}),this.options[t+"s"][e]=n,n):this.options[t+"s"][e]}}))}function xi(e){return e&&(e.Ctor.options.name||e.tag)}function Pi(e,t){return Array.isArray(e)?e.indexOf(t)>-1:"string"===typeof e?e.split(",").indexOf(t)>-1:!!d(e)&&e.test(t)}function Ai(e,t){var n=e.cache,i=e.keys,r=e._vnode;for(var o in n){var s=n[o];if(s){var a=s.name;a&&!t(a)&&Di(n,o,i,r)}}}function Di(e,t,n,i){var r=e[t];!r||i&&r.tag===i.tag||r.componentInstance.$destroy(),e[t]=null,v(n,t)}Ci(Si),vi(Si),Mn(Si),Dn(Si),Cn(Si);var Ni=[String,RegExp,Array],Li={name:"keep-alive",abstract:!0,props:{include:Ni,exclude:Ni,max:[String,Number]},methods:{cacheVNode:function(){var e=this,t=e.cache,n=e.keys,i=e.vnodeToCache,r=e.keyToCache;if(i){var o=i.tag,s=i.componentInstance,a=i.componentOptions;t[r]={name:xi(a),tag:o,componentInstance:s},n.push(r),this.max&&n.length>parseInt(this.max)&&Di(t,n[0],n,this._vnode),this.vnodeToCache=null}}},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var e in this.cache)Di(this.cache,e,this.keys)},mounted:function(){var e=this;this.cacheVNode(),this.$watch("include",(function(t){Ai(e,(function(e){return Pi(t,e)}))})),this.$watch("exclude",(function(t){Ai(e,(function(e){return!Pi(t,e)}))}))},updated:function(){this.cacheVNode()},render:function(){var e=this.$slots.default,t=Sn(e),n=t&&t.componentOptions;if(n){var i=xi(n),r=this,o=r.include,s=r.exclude;if(o&&(!i||!Pi(o,i))||s&&i&&Pi(s,i))return t;var a=this,c=a.cache,l=a.keys,u=null==t.key?n.Ctor.cid+(n.tag?"::"+n.tag:""):t.key;c[u]?(t.componentInstance=c[u].componentInstance,v(l,u),l.push(u)):(this.vnodeToCache=t,this.keyToCache=u),t.data.keepAlive=!0}return t||e&&e[0]}},Ui={KeepAlive:Li};function Bi(e){var t={get:function(){return $}};Object.defineProperty(e,"config",t),e.util={warn:pe,extend:x,mergeOptions:ze,defineReactive:De},e.set=Ne,e.delete=Le,e.nextTick=gt,e.observable=function(e){return Ae(e),e},e.options=Object.create(null),j.forEach((function(t){e.options[t+"s"]=Object.create(null)})),e.options._base=e,x(e.options.components,Ui),Ri(e),Ii(e),wi(e),Mi(e)}Bi(Si),Object.defineProperty(Si.prototype,"$isServer",{get:ce}),Object.defineProperty(Si.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(Si,"FunctionalRenderContext",{value:Zt}),Si.version="2.6.14";var Vi=m("style,class"),ji=m("input,textarea,option,select,progress"),Fi=function(e,t,n){return"value"===n&&ji(e)&&"button"!==t||"selected"===n&&"option"===e||"checked"===n&&"input"===e||"muted"===n&&"video"===e},$i=m("contenteditable,draggable,spellcheck"),Hi=m("events,caret,typing,plaintext-only"),Ki=function(e,t){return Yi(t)||"false"===t?"false":"contenteditable"===e&&Hi(t)?t:"true"},Wi=m("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible"),qi="http://www.w3.org/1999/xlink",Gi=function(e){return":"===e.charAt(5)&&"xlink"===e.slice(0,5)},zi=function(e){return Gi(e)?e.slice(6,e.length):""},Yi=function(e){return null==e||!1===e};function Ji(e){var t=e.data,n=e,i=e;while(r(i.componentInstance))i=i.componentInstance._vnode,i&&i.data&&(t=Xi(i.data,t));while(r(n=n.parent))n&&n.data&&(t=Xi(t,n.data));return Qi(t.staticClass,t.class)}function Xi(e,t){return{staticClass:Zi(e.staticClass,t.staticClass),class:r(e.class)?[e.class,t.class]:t.class}}function Qi(e,t){return r(e)||r(t)?Zi(e,er(t)):""}function Zi(e,t){return e?t?e+" "+t:e:t||""}function er(e){return Array.isArray(e)?tr(e):c(e)?nr(e):"string"===typeof e?e:""}function tr(e){for(var t,n="",i=0,o=e.length;i<o;i++)r(t=er(e[i]))&&""!==t&&(n&&(n+=" "),n+=t);return n}function nr(e){var t="";for(var n in e)e[n]&&(t&&(t+=" "),t+=n);return t}var ir={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},rr=m("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),or=m("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),sr=function(e){return rr(e)||or(e)};function ar(e){return or(e)?"svg":"math"===e?"math":void 0}var cr=Object.create(null);function lr(e){if(!J)return!0;if(sr(e))return!1;if(e=e.toLowerCase(),null!=cr[e])return cr[e];var t=document.createElement(e);return e.indexOf("-")>-1?cr[e]=t.constructor===window.HTMLUnknownElement||t.constructor===window.HTMLElement:cr[e]=/HTMLUnknownElement/.test(t.toString())}var ur=m("text,number,password,search,email,tel,url");function dr(e){if("string"===typeof e){var t=document.querySelector(e);return t||document.createElement("div")}return e}function hr(e,t){var n=document.createElement(e);return"select"!==e||t.data&&t.data.attrs&&void 0!==t.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n}function pr(e,t){return document.createElementNS(ir[e],t)}function fr(e){return document.createTextNode(e)}function gr(e){return document.createComment(e)}function mr(e,t,n){e.insertBefore(t,n)}function _r(e,t){e.removeChild(t)}function vr(e,t){e.appendChild(t)}function yr(e){return e.parentNode}function Cr(e){return e.nextSibling}function Er(e){return e.tagName}function br(e,t){e.textContent=t}function Tr(e,t){e.setAttribute(t,"")}var Sr=Object.freeze({createElement:hr,createElementNS:pr,createTextNode:fr,createComment:gr,insertBefore:mr,removeChild:_r,appendChild:vr,parentNode:yr,nextSibling:Cr,tagName:Er,setTextContent:br,setStyleScope:Tr}),Rr={create:function(e,t){Ir(t)},update:function(e,t){e.data.ref!==t.data.ref&&(Ir(e,!0),Ir(t))},destroy:function(e){Ir(e,!0)}};function Ir(e,t){var n=e.data.ref;if(r(n)){var i=e.context,o=e.componentInstance||e.elm,s=i.$refs;t?Array.isArray(s[n])?v(s[n],o):s[n]===o&&(s[n]=void 0):e.data.refInFor?Array.isArray(s[n])?s[n].indexOf(o)<0&&s[n].push(o):s[n]=[o]:s[n]=o}}var wr=new ye("",{},[]),Or=["create","activate","update","remove","destroy"];function kr(e,t){return e.key===t.key&&e.asyncFactory===t.asyncFactory&&(e.tag===t.tag&&e.isComment===t.isComment&&r(e.data)===r(t.data)&&Mr(e,t)||o(e.isAsyncPlaceholder)&&i(t.asyncFactory.error))}function Mr(e,t){if("input"!==e.tag)return!0;var n,i=r(n=e.data)&&r(n=n.attrs)&&n.type,o=r(n=t.data)&&r(n=n.attrs)&&n.type;return i===o||ur(i)&&ur(o)}function xr(e,t,n){var i,o,s={};for(i=t;i<=n;++i)o=e[i].key,r(o)&&(s[o]=i);return s}function Pr(e){var t,n,s={},c=e.modules,l=e.nodeOps;for(t=0;t<Or.length;++t)for(s[Or[t]]=[],n=0;n<c.length;++n)r(c[n][Or[t]])&&s[Or[t]].push(c[n][Or[t]]);function u(e){return new ye(l.tagName(e).toLowerCase(),{},[],void 0,e)}function d(e,t){function n(){0===--n.listeners&&h(e)}return n.listeners=t,n}function h(e){var t=l.parentNode(e);r(t)&&l.removeChild(t,e)}function p(e,t,n,i,s,a,c){if(r(e.elm)&&r(a)&&(e=a[c]=Te(e)),e.isRootInsert=!s,!f(e,t,n,i)){var u=e.data,d=e.children,h=e.tag;r(h)?(e.elm=e.ns?l.createElementNS(e.ns,h):l.createElement(h,e),b(e),y(e,d,t),r(u)&&E(e,t),v(n,e.elm,i)):o(e.isComment)?(e.elm=l.createComment(e.text),v(n,e.elm,i)):(e.elm=l.createTextNode(e.text),v(n,e.elm,i))}}function f(e,t,n,i){var s=e.data;if(r(s)){var a=r(e.componentInstance)&&s.keepAlive;if(r(s=s.hook)&&r(s=s.init)&&s(e,!1),r(e.componentInstance))return g(e,t),v(n,e.elm,i),o(a)&&_(e,t,n,i),!0}}function g(e,t){r(e.data.pendingInsert)&&(t.push.apply(t,e.data.pendingInsert),e.data.pendingInsert=null),e.elm=e.componentInstance.$el,C(e)?(E(e,t),b(e)):(Ir(e),t.push(e))}function _(e,t,n,i){var o,a=e;while(a.componentInstance)if(a=a.componentInstance._vnode,r(o=a.data)&&r(o=o.transition)){for(o=0;o<s.activate.length;++o)s.activate[o](wr,a);t.push(a);break}v(n,e.elm,i)}function v(e,t,n){r(e)&&(r(n)?l.parentNode(n)===e&&l.insertBefore(e,t,n):l.appendChild(e,t))}function y(e,t,n){if(Array.isArray(t)){0;for(var i=0;i<t.length;++i)p(t[i],n,e.elm,null,!0,t,i)}else a(e.text)&&l.appendChild(e.elm,l.createTextNode(String(e.text)))}function C(e){while(e.componentInstance)e=e.componentInstance._vnode;return r(e.tag)}function E(e,n){for(var i=0;i<s.create.length;++i)s.create[i](wr,e);t=e.data.hook,r(t)&&(r(t.create)&&t.create(wr,e),r(t.insert)&&n.push(e))}function b(e){var t;if(r(t=e.fnScopeId))l.setStyleScope(e.elm,t);else{var n=e;while(n)r(t=n.context)&&r(t=t.$options._scopeId)&&l.setStyleScope(e.elm,t),n=n.parent}r(t=xn)&&t!==e.context&&t!==e.fnContext&&r(t=t.$options._scopeId)&&l.setStyleScope(e.elm,t)}function T(e,t,n,i,r,o){for(;i<=r;++i)p(n[i],o,e,t,!1,n,i)}function S(e){var t,n,i=e.data;if(r(i))for(r(t=i.hook)&&r(t=t.destroy)&&t(e),t=0;t<s.destroy.length;++t)s.destroy[t](e);if(r(t=e.children))for(n=0;n<e.children.length;++n)S(e.children[n])}function R(e,t,n){for(;t<=n;++t){var i=e[t];r(i)&&(r(i.tag)?(I(i),S(i)):h(i.elm))}}function I(e,t){if(r(t)||r(e.data)){var n,i=s.remove.length+1;for(r(t)?t.listeners+=i:t=d(e.elm,i),r(n=e.componentInstance)&&r(n=n._vnode)&&r(n.data)&&I(n,t),n=0;n<s.remove.length;++n)s.remove[n](e,t);r(n=e.data.hook)&&r(n=n.remove)?n(e,t):t()}else h(e.elm)}function w(e,t,n,o,s){var a,c,u,d,h=0,f=0,g=t.length-1,m=t[0],_=t[g],v=n.length-1,y=n[0],C=n[v],E=!s;while(h<=g&&f<=v)i(m)?m=t[++h]:i(_)?_=t[--g]:kr(m,y)?(k(m,y,o,n,f),m=t[++h],y=n[++f]):kr(_,C)?(k(_,C,o,n,v),_=t[--g],C=n[--v]):kr(m,C)?(k(m,C,o,n,v),E&&l.insertBefore(e,m.elm,l.nextSibling(_.elm)),m=t[++h],C=n[--v]):kr(_,y)?(k(_,y,o,n,f),E&&l.insertBefore(e,_.elm,m.elm),_=t[--g],y=n[++f]):(i(a)&&(a=xr(t,h,g)),c=r(y.key)?a[y.key]:O(y,t,h,g),i(c)?p(y,o,e,m.elm,!1,n,f):(u=t[c],kr(u,y)?(k(u,y,o,n,f),t[c]=void 0,E&&l.insertBefore(e,u.elm,m.elm)):p(y,o,e,m.elm,!1,n,f)),y=n[++f]);h>g?(d=i(n[v+1])?null:n[v+1].elm,T(e,d,n,f,v,o)):f>v&&R(t,h,g)}function O(e,t,n,i){for(var o=n;o<i;o++){var s=t[o];if(r(s)&&kr(e,s))return o}}function k(e,t,n,a,c,u){if(e!==t){r(t.elm)&&r(a)&&(t=a[c]=Te(t));var d=t.elm=e.elm;if(o(e.isAsyncPlaceholder))r(t.asyncFactory.resolved)?P(e.elm,t,n):t.isAsyncPlaceholder=!0;else if(o(t.isStatic)&&o(e.isStatic)&&t.key===e.key&&(o(t.isCloned)||o(t.isOnce)))t.componentInstance=e.componentInstance;else{var h,p=t.data;r(p)&&r(h=p.hook)&&r(h=h.prepatch)&&h(e,t);var f=e.children,g=t.children;if(r(p)&&C(t)){for(h=0;h<s.update.length;++h)s.update[h](e,t);r(h=p.hook)&&r(h=h.update)&&h(e,t)}i(t.text)?r(f)&&r(g)?f!==g&&w(d,f,g,n,u):r(g)?(r(e.text)&&l.setTextContent(d,""),T(d,null,g,0,g.length-1,n)):r(f)?R(f,0,f.length-1):r(e.text)&&l.setTextContent(d,""):e.text!==t.text&&l.setTextContent(d,t.text),r(p)&&r(h=p.hook)&&r(h=h.postpatch)&&h(e,t)}}}function M(e,t,n){if(o(n)&&r(e.parent))e.parent.data.pendingInsert=t;else for(var i=0;i<t.length;++i)t[i].data.hook.insert(t[i])}var x=m("attrs,class,staticClass,staticStyle,key");function P(e,t,n,i){var s,a=t.tag,c=t.data,l=t.children;if(i=i||c&&c.pre,t.elm=e,o(t.isComment)&&r(t.asyncFactory))return t.isAsyncPlaceholder=!0,!0;if(r(c)&&(r(s=c.hook)&&r(s=s.init)&&s(t,!0),r(s=t.componentInstance)))return g(t,n),!0;if(r(a)){if(r(l))if(e.hasChildNodes())if(r(s=c)&&r(s=s.domProps)&&r(s=s.innerHTML)){if(s!==e.innerHTML)return!1}else{for(var u=!0,d=e.firstChild,h=0;h<l.length;h++){if(!d||!P(d,l[h],n,i)){u=!1;break}d=d.nextSibling}if(!u||d)return!1}else y(t,l,n);if(r(c)){var p=!1;for(var f in c)if(!x(f)){p=!0,E(t,n);break}!p&&c["class"]&&_t(c["class"])}}else e.data!==t.text&&(e.data=t.text);return!0}return function(e,t,n,a){if(!i(t)){var c=!1,d=[];if(i(e))c=!0,p(t,d);else{var h=r(e.nodeType);if(!h&&kr(e,t))k(e,t,d,null,null,a);else{if(h){if(1===e.nodeType&&e.hasAttribute(V)&&(e.removeAttribute(V),n=!0),o(n)&&P(e,t,d))return M(t,d,!0),e;e=u(e)}var f=e.elm,g=l.parentNode(f);if(p(t,d,f._leaveCb?null:g,l.nextSibling(f)),r(t.parent)){var m=t.parent,_=C(t);while(m){for(var v=0;v<s.destroy.length;++v)s.destroy[v](m);if(m.elm=t.elm,_){for(var y=0;y<s.create.length;++y)s.create[y](wr,m);var E=m.data.hook.insert;if(E.merged)for(var b=1;b<E.fns.length;b++)E.fns[b]()}else Ir(m);m=m.parent}}r(g)?R([e],0,0):r(e.tag)&&S(e)}}return M(t,d,c),t.elm}r(e)&&S(e)}}var Ar={create:Dr,update:Dr,destroy:function(e){Dr(e,wr)}};function Dr(e,t){(e.data.directives||t.data.directives)&&Nr(e,t)}function Nr(e,t){var n,i,r,o=e===wr,s=t===wr,a=Ur(e.data.directives,e.context),c=Ur(t.data.directives,t.context),l=[],u=[];for(n in c)i=a[n],r=c[n],i?(r.oldValue=i.value,r.oldArg=i.arg,Vr(r,"update",t,e),r.def&&r.def.componentUpdated&&u.push(r)):(Vr(r,"bind",t,e),r.def&&r.def.inserted&&l.push(r));if(l.length){var d=function(){for(var n=0;n<l.length;n++)Vr(l[n],"inserted",t,e)};o?bt(t,"insert",d):d()}if(u.length&&bt(t,"postpatch",(function(){for(var n=0;n<u.length;n++)Vr(u[n],"componentUpdated",t,e)})),!o)for(n in a)c[n]||Vr(a[n],"unbind",e,e,s)}var Lr=Object.create(null);function Ur(e,t){var n,i,r=Object.create(null);if(!e)return r;for(n=0;n<e.length;n++)i=e[n],i.modifiers||(i.modifiers=Lr),r[Br(i)]=i,i.def=Ye(t.$options,"directives",i.name,!0);return r}function Br(e){return e.rawName||e.name+"."+Object.keys(e.modifiers||{}).join(".")}function Vr(e,t,n,i,r){var o=e.def&&e.def[t];if(o)try{o(n.elm,e,n,i,r)}catch(Ss){nt(Ss,n.context,"directive "+e.name+" "+t+" hook")}}var jr=[Rr,Ar];function Fr(e,t){var n=t.componentOptions;if((!r(n)||!1!==n.Ctor.options.inheritAttrs)&&(!i(e.data.attrs)||!i(t.data.attrs))){var o,s,a,c=t.elm,l=e.data.attrs||{},u=t.data.attrs||{};for(o in r(u.__ob__)&&(u=t.data.attrs=x({},u)),u)s=u[o],a=l[o],a!==s&&$r(c,o,s,t.data.pre);for(o in(ee||ne)&&u.value!==l.value&&$r(c,"value",u.value),l)i(u[o])&&(Gi(o)?c.removeAttributeNS(qi,zi(o)):$i(o)||c.removeAttribute(o))}}function $r(e,t,n,i){i||e.tagName.indexOf("-")>-1?Hr(e,t,n):Wi(t)?Yi(n)?e.removeAttribute(t):(n="allowfullscreen"===t&&"EMBED"===e.tagName?"true":t,e.setAttribute(t,n)):$i(t)?e.setAttribute(t,Ki(t,n)):Gi(t)?Yi(n)?e.removeAttributeNS(qi,zi(t)):e.setAttributeNS(qi,t,n):Hr(e,t,n)}function Hr(e,t,n){if(Yi(n))e.removeAttribute(t);else{if(ee&&!te&&"TEXTAREA"===e.tagName&&"placeholder"===t&&""!==n&&!e.__ieph){var i=function(t){t.stopImmediatePropagation(),e.removeEventListener("input",i)};e.addEventListener("input",i),e.__ieph=!0}e.setAttribute(t,n)}}var Kr={create:Fr,update:Fr};function Wr(e,t){var n=t.elm,o=t.data,s=e.data;if(!(i(o.staticClass)&&i(o.class)&&(i(s)||i(s.staticClass)&&i(s.class)))){var a=Ji(t),c=n._transitionClasses;r(c)&&(a=Zi(a,er(c))),a!==n._prevClass&&(n.setAttribute("class",a),n._prevClass=a)}}var qr,Gr={create:Wr,update:Wr},zr="__r",Yr="__c";function Jr(e){if(r(e[zr])){var t=ee?"change":"input";e[t]=[].concat(e[zr],e[t]||[]),delete e[zr]}r(e[Yr])&&(e.change=[].concat(e[Yr],e.change||[]),delete e[Yr])}function Xr(e,t,n){var i=qr;return function r(){var o=t.apply(null,arguments);null!==o&&eo(e,r,n,i)}}var Qr=at&&!(re&&Number(re[1])<=53);function Zr(e,t,n,i){if(Qr){var r=zn,o=t;t=o._wrapper=function(e){if(e.target===e.currentTarget||e.timeStamp>=r||e.timeStamp<=0||e.target.ownerDocument!==document)return o.apply(this,arguments)}}qr.addEventListener(e,t,se?{capture:n,passive:i}:n)}function eo(e,t,n,i){(i||qr).removeEventListener(e,t._wrapper||t,n)}function to(e,t){if(!i(e.data.on)||!i(t.data.on)){var n=t.data.on||{},r=e.data.on||{};qr=t.elm,Jr(n),Et(n,r,Zr,eo,Xr,t.context),qr=void 0}}var no,io={create:to,update:to};function ro(e,t){if(!i(e.data.domProps)||!i(t.data.domProps)){var n,o,s=t.elm,a=e.data.domProps||{},c=t.data.domProps||{};for(n in r(c.__ob__)&&(c=t.data.domProps=x({},c)),a)n in c||(s[n]="");for(n in c){if(o=c[n],"textContent"===n||"innerHTML"===n){if(t.children&&(t.children.length=0),o===a[n])continue;1===s.childNodes.length&&s.removeChild(s.childNodes[0])}if("value"===n&&"PROGRESS"!==s.tagName){s._value=o;var l=i(o)?"":String(o);oo(s,l)&&(s.value=l)}else if("innerHTML"===n&&or(s.tagName)&&i(s.innerHTML)){no=no||document.createElement("div"),no.innerHTML="<svg>"+o+"</svg>";var u=no.firstChild;while(s.firstChild)s.removeChild(s.firstChild);while(u.firstChild)s.appendChild(u.firstChild)}else if(o!==a[n])try{s[n]=o}catch(Ss){}}}}function oo(e,t){return!e.composing&&("OPTION"===e.tagName||so(e,t)||ao(e,t))}function so(e,t){var n=!0;try{n=document.activeElement!==e}catch(Ss){}return n&&e.value!==t}function ao(e,t){var n=e.value,i=e._vModifiers;if(r(i)){if(i.number)return g(n)!==g(t);if(i.trim)return n.trim()!==t.trim()}return n!==t}var co={create:ro,update:ro},lo=E((function(e){var t={},n=/;(?![^(]*\))/g,i=/:(.+)/;return e.split(n).forEach((function(e){if(e){var n=e.split(i);n.length>1&&(t[n[0].trim()]=n[1].trim())}})),t}));function uo(e){var t=ho(e.style);return e.staticStyle?x(e.staticStyle,t):t}function ho(e){return Array.isArray(e)?P(e):"string"===typeof e?lo(e):e}function po(e,t){var n,i={};if(t){var r=e;while(r.componentInstance)r=r.componentInstance._vnode,r&&r.data&&(n=uo(r.data))&&x(i,n)}(n=uo(e.data))&&x(i,n);var o=e;while(o=o.parent)o.data&&(n=uo(o.data))&&x(i,n);return i}var fo,go=/^--/,mo=/\s*!important$/,_o=function(e,t,n){if(go.test(t))e.style.setProperty(t,n);else if(mo.test(n))e.style.setProperty(I(t),n.replace(mo,""),"important");else{var i=yo(t);if(Array.isArray(n))for(var r=0,o=n.length;r<o;r++)e.style[i]=n[r];else e.style[i]=n}},vo=["Webkit","Moz","ms"],yo=E((function(e){if(fo=fo||document.createElement("div").style,e=T(e),"filter"!==e&&e in fo)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<vo.length;n++){var i=vo[n]+t;if(i in fo)return i}}));function Co(e,t){var n=t.data,o=e.data;if(!(i(n.staticStyle)&&i(n.style)&&i(o.staticStyle)&&i(o.style))){var s,a,c=t.elm,l=o.staticStyle,u=o.normalizedStyle||o.style||{},d=l||u,h=ho(t.data.style)||{};t.data.normalizedStyle=r(h.__ob__)?x({},h):h;var p=po(t,!0);for(a in d)i(p[a])&&_o(c,a,"");for(a in p)s=p[a],s!==d[a]&&_o(c,a,null==s?"":s)}}var Eo={create:Co,update:Co},bo=/\s+/;function To(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(bo).forEach((function(t){return e.classList.add(t)})):e.classList.add(t);else{var n=" "+(e.getAttribute("class")||"")+" ";n.indexOf(" "+t+" ")<0&&e.setAttribute("class",(n+t).trim())}}function So(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(bo).forEach((function(t){return e.classList.remove(t)})):e.classList.remove(t),e.classList.length||e.removeAttribute("class");else{var n=" "+(e.getAttribute("class")||"")+" ",i=" "+t+" ";while(n.indexOf(i)>=0)n=n.replace(i," ");n=n.trim(),n?e.setAttribute("class",n):e.removeAttribute("class")}}function Ro(e){if(e){if("object"===typeof e){var t={};return!1!==e.css&&x(t,Io(e.name||"v")),x(t,e),t}return"string"===typeof e?Io(e):void 0}}var Io=E((function(e){return{enterClass:e+"-enter",enterToClass:e+"-enter-to",enterActiveClass:e+"-enter-active",leaveClass:e+"-leave",leaveToClass:e+"-leave-to",leaveActiveClass:e+"-leave-active"}})),wo=J&&!te,Oo="transition",ko="animation",Mo="transition",xo="transitionend",Po="animation",Ao="animationend";wo&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(Mo="WebkitTransition",xo="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Po="WebkitAnimation",Ao="webkitAnimationEnd"));var Do=J?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(e){return e()};function No(e){Do((function(){Do(e)}))}function Lo(e,t){var n=e._transitionClasses||(e._transitionClasses=[]);n.indexOf(t)<0&&(n.push(t),To(e,t))}function Uo(e,t){e._transitionClasses&&v(e._transitionClasses,t),So(e,t)}function Bo(e,t,n){var i=jo(e,t),r=i.type,o=i.timeout,s=i.propCount;if(!r)return n();var a=r===Oo?xo:Ao,c=0,l=function(){e.removeEventListener(a,u),n()},u=function(t){t.target===e&&++c>=s&&l()};setTimeout((function(){c<s&&l()}),o+1),e.addEventListener(a,u)}var Vo=/\b(transform|all)(,|$)/;function jo(e,t){var n,i=window.getComputedStyle(e),r=(i[Mo+"Delay"]||"").split(", "),o=(i[Mo+"Duration"]||"").split(", "),s=Fo(r,o),a=(i[Po+"Delay"]||"").split(", "),c=(i[Po+"Duration"]||"").split(", "),l=Fo(a,c),u=0,d=0;t===Oo?s>0&&(n=Oo,u=s,d=o.length):t===ko?l>0&&(n=ko,u=l,d=c.length):(u=Math.max(s,l),n=u>0?s>l?Oo:ko:null,d=n?n===Oo?o.length:c.length:0);var h=n===Oo&&Vo.test(i[Mo+"Property"]);return{type:n,timeout:u,propCount:d,hasTransform:h}}function Fo(e,t){while(e.length<t.length)e=e.concat(e);return Math.max.apply(null,t.map((function(t,n){return $o(t)+$o(e[n])})))}function $o(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function Ho(e,t){var n=e.elm;r(n._leaveCb)&&(n._leaveCb.cancelled=!0,n._leaveCb());var o=Ro(e.data.transition);if(!i(o)&&!r(n._enterCb)&&1===n.nodeType){var s=o.css,a=o.type,l=o.enterClass,u=o.enterToClass,d=o.enterActiveClass,h=o.appearClass,p=o.appearToClass,f=o.appearActiveClass,m=o.beforeEnter,_=o.enter,v=o.afterEnter,y=o.enterCancelled,C=o.beforeAppear,E=o.appear,b=o.afterAppear,T=o.appearCancelled,S=o.duration,R=xn,I=xn.$vnode;while(I&&I.parent)R=I.context,I=I.parent;var w=!R._isMounted||!e.isRootInsert;if(!w||E||""===E){var O=w&&h?h:l,k=w&&f?f:d,M=w&&p?p:u,x=w&&C||m,P=w&&"function"===typeof E?E:_,A=w&&b||v,D=w&&T||y,N=g(c(S)?S.enter:S);0;var L=!1!==s&&!te,U=qo(P),V=n._enterCb=B((function(){L&&(Uo(n,M),Uo(n,k)),V.cancelled?(L&&Uo(n,O),D&&D(n)):A&&A(n),n._enterCb=null}));e.data.show||bt(e,"insert",(function(){var t=n.parentNode,i=t&&t._pending&&t._pending[e.key];i&&i.tag===e.tag&&i.elm._leaveCb&&i.elm._leaveCb(),P&&P(n,V)})),x&&x(n),L&&(Lo(n,O),Lo(n,k),No((function(){Uo(n,O),V.cancelled||(Lo(n,M),U||(Wo(N)?setTimeout(V,N):Bo(n,a,V)))}))),e.data.show&&(t&&t(),P&&P(n,V)),L||U||V()}}}function Ko(e,t){var n=e.elm;r(n._enterCb)&&(n._enterCb.cancelled=!0,n._enterCb());var o=Ro(e.data.transition);if(i(o)||1!==n.nodeType)return t();if(!r(n._leaveCb)){var s=o.css,a=o.type,l=o.leaveClass,u=o.leaveToClass,d=o.leaveActiveClass,h=o.beforeLeave,p=o.leave,f=o.afterLeave,m=o.leaveCancelled,_=o.delayLeave,v=o.duration,y=!1!==s&&!te,C=qo(p),E=g(c(v)?v.leave:v);0;var b=n._leaveCb=B((function(){n.parentNode&&n.parentNode._pending&&(n.parentNode._pending[e.key]=null),y&&(Uo(n,u),Uo(n,d)),b.cancelled?(y&&Uo(n,l),m&&m(n)):(t(),f&&f(n)),n._leaveCb=null}));_?_(T):T()}function T(){b.cancelled||(!e.data.show&&n.parentNode&&((n.parentNode._pending||(n.parentNode._pending={}))[e.key]=e),h&&h(n),y&&(Lo(n,l),Lo(n,d),No((function(){Uo(n,l),b.cancelled||(Lo(n,u),C||(Wo(E)?setTimeout(b,E):Bo(n,a,b)))}))),p&&p(n,b),y||C||b())}}function Wo(e){return"number"===typeof e&&!isNaN(e)}function qo(e){if(i(e))return!1;var t=e.fns;return r(t)?qo(Array.isArray(t)?t[0]:t):(e._length||e.length)>1}function Go(e,t){!0!==t.data.show&&Ho(t)}var zo=J?{create:Go,activate:Go,remove:function(e,t){!0!==e.data.show?Ko(e,t):t()}}:{},Yo=[Kr,Gr,io,co,Eo,zo],Jo=Yo.concat(jr),Xo=Pr({nodeOps:Sr,modules:Jo});te&&document.addEventListener("selectionchange",(function(){var e=document.activeElement;e&&e.vmodel&&os(e,"input")}));var Qo={inserted:function(e,t,n,i){"select"===n.tag?(i.elm&&!i.elm._vOptions?bt(n,"postpatch",(function(){Qo.componentUpdated(e,t,n)})):Zo(e,t,n.context),e._vOptions=[].map.call(e.options,ns)):("textarea"===n.tag||ur(e.type))&&(e._vModifiers=t.modifiers,t.modifiers.lazy||(e.addEventListener("compositionstart",is),e.addEventListener("compositionend",rs),e.addEventListener("change",rs),te&&(e.vmodel=!0)))},componentUpdated:function(e,t,n){if("select"===n.tag){Zo(e,t,n.context);var i=e._vOptions,r=e._vOptions=[].map.call(e.options,ns);if(r.some((function(e,t){return!L(e,i[t])}))){var o=e.multiple?t.value.some((function(e){return ts(e,r)})):t.value!==t.oldValue&&ts(t.value,r);o&&os(e,"change")}}}};function Zo(e,t,n){es(e,t,n),(ee||ne)&&setTimeout((function(){es(e,t,n)}),0)}function es(e,t,n){var i=t.value,r=e.multiple;if(!r||Array.isArray(i)){for(var o,s,a=0,c=e.options.length;a<c;a++)if(s=e.options[a],r)o=U(i,ns(s))>-1,s.selected!==o&&(s.selected=o);else if(L(ns(s),i))return void(e.selectedIndex!==a&&(e.selectedIndex=a));r||(e.selectedIndex=-1)}}function ts(e,t){return t.every((function(t){return!L(t,e)}))}function ns(e){return"_value"in e?e._value:e.value}function is(e){e.target.composing=!0}function rs(e){e.target.composing&&(e.target.composing=!1,os(e.target,"input"))}function os(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}function ss(e){return!e.componentInstance||e.data&&e.data.transition?e:ss(e.componentInstance._vnode)}var as={bind:function(e,t,n){var i=t.value;n=ss(n);var r=n.data&&n.data.transition,o=e.__vOriginalDisplay="none"===e.style.display?"":e.style.display;i&&r?(n.data.show=!0,Ho(n,(function(){e.style.display=o}))):e.style.display=i?o:"none"},update:function(e,t,n){var i=t.value,r=t.oldValue;if(!i!==!r){n=ss(n);var o=n.data&&n.data.transition;o?(n.data.show=!0,i?Ho(n,(function(){e.style.display=e.__vOriginalDisplay})):Ko(n,(function(){e.style.display="none"}))):e.style.display=i?e.__vOriginalDisplay:"none"}},unbind:function(e,t,n,i,r){r||(e.style.display=e.__vOriginalDisplay)}},cs={model:Qo,show:as},ls={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function us(e){var t=e&&e.componentOptions;return t&&t.Ctor.options.abstract?us(Sn(t.children)):e}function ds(e){var t={},n=e.$options;for(var i in n.propsData)t[i]=e[i];var r=n._parentListeners;for(var o in r)t[T(o)]=r[o];return t}function hs(e,t){if(/\d-keep-alive$/.test(t.tag))return e("keep-alive",{props:t.componentOptions.propsData})}function ps(e){while(e=e.parent)if(e.data.transition)return!0}function fs(e,t){return t.key===e.key&&t.tag===e.tag}var gs=function(e){return e.tag||Dt(e)},ms=function(e){return"show"===e.name},_s={name:"transition",props:ls,abstract:!0,render:function(e){var t=this,n=this.$slots.default;if(n&&(n=n.filter(gs),n.length)){0;var i=this.mode;0;var r=n[0];if(ps(this.$vnode))return r;var o=us(r);if(!o)return r;if(this._leaving)return hs(e,r);var s="__transition-"+this._uid+"-";o.key=null==o.key?o.isComment?s+"comment":s+o.tag:a(o.key)?0===String(o.key).indexOf(s)?o.key:s+o.key:o.key;var c=(o.data||(o.data={})).transition=ds(this),l=this._vnode,u=us(l);if(o.data.directives&&o.data.directives.some(ms)&&(o.data.show=!0),u&&u.data&&!fs(o,u)&&!Dt(u)&&(!u.componentInstance||!u.componentInstance._vnode.isComment)){var d=u.data.transition=x({},c);if("out-in"===i)return this._leaving=!0,bt(d,"afterLeave",(function(){t._leaving=!1,t.$forceUpdate()})),hs(e,r);if("in-out"===i){if(Dt(o))return l;var h,p=function(){h()};bt(c,"afterEnter",p),bt(c,"enterCancelled",p),bt(d,"delayLeave",(function(e){h=e}))}}return r}}},vs=x({tag:String,moveClass:String},ls);delete vs.mode;var ys={props:vs,beforeMount:function(){var e=this,t=this._update;this._update=function(n,i){var r=Pn(e);e.__patch__(e._vnode,e.kept,!1,!0),e._vnode=e.kept,r(),t.call(e,n,i)}},render:function(e){for(var t=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),i=this.prevChildren=this.children,r=this.$slots.default||[],o=this.children=[],s=ds(this),a=0;a<r.length;a++){var c=r[a];if(c.tag)if(null!=c.key&&0!==String(c.key).indexOf("__vlist"))o.push(c),n[c.key]=c,(c.data||(c.data={})).transition=s;else;}if(i){for(var l=[],u=[],d=0;d<i.length;d++){var h=i[d];h.data.transition=s,h.data.pos=h.elm.getBoundingClientRect(),n[h.key]?l.push(h):u.push(h)}this.kept=e(t,null,l),this.removed=u}return e(t,null,o)},updated:function(){var e=this.prevChildren,t=this.moveClass||(this.name||"v")+"-move";e.length&&this.hasMove(e[0].elm,t)&&(e.forEach(Cs),e.forEach(Es),e.forEach(bs),this._reflow=document.body.offsetHeight,e.forEach((function(e){if(e.data.moved){var n=e.elm,i=n.style;Lo(n,t),i.transform=i.WebkitTransform=i.transitionDuration="",n.addEventListener(xo,n._moveCb=function e(i){i&&i.target!==n||i&&!/transform$/.test(i.propertyName)||(n.removeEventListener(xo,e),n._moveCb=null,Uo(n,t))})}})))},methods:{hasMove:function(e,t){if(!wo)return!1;if(this._hasMove)return this._hasMove;var n=e.cloneNode();e._transitionClasses&&e._transitionClasses.forEach((function(e){So(n,e)})),To(n,t),n.style.display="none",this.$el.appendChild(n);var i=jo(n);return this.$el.removeChild(n),this._hasMove=i.hasTransform}}};function Cs(e){e.elm._moveCb&&e.elm._moveCb(),e.elm._enterCb&&e.elm._enterCb()}function Es(e){e.data.newPos=e.elm.getBoundingClientRect()}function bs(e){var t=e.data.pos,n=e.data.newPos,i=t.left-n.left,r=t.top-n.top;if(i||r){e.data.moved=!0;var o=e.elm.style;o.transform=o.WebkitTransform="translate("+i+"px,"+r+"px)",o.transitionDuration="0s"}}var Ts={Transition:_s,TransitionGroup:ys};Si.config.mustUseProp=Fi,Si.config.isReservedTag=sr,Si.config.isReservedAttr=Vi,Si.config.getTagNamespace=ar,Si.config.isUnknownElement=lr,x(Si.options.directives,cs),x(Si.options.components,Ts),Si.prototype.__patch__=J?Xo:A,Si.prototype.$mount=function(e,t){return e=e&&J?dr(e):void 0,Nn(this,e,t)},J&&setTimeout((function(){$.devtools&&le&&le.emit("init",Si)}),0),t["default"]=Si}.call(this,n("c8ba"))},"2b3d":function(e,t,n){"use strict";n("3ca3");var i,r=n("23e7"),o=n("83ab"),s=n("0d3b"),a=n("da84"),c=n("0366"),l=n("c65b"),u=n("e330"),d=n("37e8"),h=n("6eeb"),p=n("19aa"),f=n("1a2d"),g=n("60da"),m=n("4df4"),_=n("f36a"),v=n("6547").codeAt,y=n("5fb2"),C=n("577e"),E=n("d44e"),b=n("9861"),T=n("69f3"),S=T.set,R=T.getterFor("URL"),I=b.URLSearchParams,w=b.getState,O=a.URL,k=a.TypeError,M=a.parseInt,x=Math.floor,P=Math.pow,A=u("".charAt),D=u(/./.exec),N=u([].join),L=u(1..toString),U=u([].pop),B=u([].push),V=u("".replace),j=u([].shift),F=u("".split),$=u("".slice),H=u("".toLowerCase),K=u([].unshift),W="Invalid authority",q="Invalid scheme",G="Invalid host",z="Invalid port",Y=/[a-z]/i,J=/[\d+-.a-z]/i,X=/\d/,Q=/^0x/i,Z=/^[0-7]+$/,ee=/^\d+$/,te=/^[\da-f]+$/i,ne=/[\0\t\n\r #%/:<>?@[\\\]^|]/,ie=/[\0\t\n\r #/:<>?@[\\\]^|]/,re=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,oe=/[\t\n\r]/g,se=function(e,t){var n,i,r;if("["==A(t,0)){if("]"!=A(t,t.length-1))return G;if(n=ce($(t,1,-1)),!n)return G;e.host=n}else if(_e(e)){if(t=y(t),D(ne,t))return G;if(n=ae(t),null===n)return G;e.host=n}else{if(D(ie,t))return G;for(n="",i=m(t),r=0;r<i.length;r++)n+=ge(i[r],de);e.host=n}},ae=function(e){var t,n,i,r,o,s,a,c=F(e,".");if(c.length&&""==c[c.length-1]&&c.length--,t=c.length,t>4)return e;for(n=[],i=0;i<t;i++){if(r=c[i],""==r)return e;if(o=10,r.length>1&&"0"==A(r,0)&&(o=D(Q,r)?16:8,r=$(r,8==o?1:2)),""===r)s=0;else{if(!D(10==o?ee:8==o?Z:te,r))return e;s=M(r,o)}B(n,s)}for(i=0;i<t;i++)if(s=n[i],i==t-1){if(s>=P(256,5-t))return null}else if(s>255)return null;for(a=U(n),i=0;i<n.length;i++)a+=n[i]*P(256,3-i);return a},ce=function(e){var t,n,i,r,o,s,a,c=[0,0,0,0,0,0,0,0],l=0,u=null,d=0,h=function(){return A(e,d)};if(":"==h()){if(":"!=A(e,1))return;d+=2,l++,u=l}while(h()){if(8==l)return;if(":"!=h()){t=n=0;while(n<4&&D(te,h()))t=16*t+M(h(),16),d++,n++;if("."==h()){if(0==n)return;if(d-=n,l>6)return;i=0;while(h()){if(r=null,i>0){if(!("."==h()&&i<4))return;d++}if(!D(X,h()))return;while(D(X,h())){if(o=M(h(),10),null===r)r=o;else{if(0==r)return;r=10*r+o}if(r>255)return;d++}c[l]=256*c[l]+r,i++,2!=i&&4!=i||l++}if(4!=i)return;break}if(":"==h()){if(d++,!h())return}else if(h())return;c[l++]=t}else{if(null!==u)return;d++,l++,u=l}}if(null!==u){s=l-u,l=7;while(0!=l&&s>0)a=c[l],c[l--]=c[u+s-1],c[u+--s]=a}else if(8!=l)return;return c},le=function(e){for(var t=null,n=1,i=null,r=0,o=0;o<8;o++)0!==e[o]?(r>n&&(t=i,n=r),i=null,r=0):(null===i&&(i=o),++r);return r>n&&(t=i,n=r),t},ue=function(e){var t,n,i,r;if("number"==typeof e){for(t=[],n=0;n<4;n++)K(t,e%256),e=x(e/256);return N(t,".")}if("object"==typeof e){for(t="",i=le(e),n=0;n<8;n++)r&&0===e[n]||(r&&(r=!1),i===n?(t+=n?":":"::",r=!0):(t+=L(e[n],16),n<7&&(t+=":")));return"["+t+"]"}return e},de={},he=g({},de,{" ":1,'"':1,"<":1,">":1,"`":1}),pe=g({},he,{"#":1,"?":1,"{":1,"}":1}),fe=g({},pe,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),ge=function(e,t){var n=v(e,0);return n>32&&n<127&&!f(t,e)?e:encodeURIComponent(e)},me={ftp:21,file:null,http:80,https:443,ws:80,wss:443},_e=function(e){return f(me,e.scheme)},ve=function(e){return""!=e.username||""!=e.password},ye=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},Ce=function(e,t){var n;return 2==e.length&&D(Y,A(e,0))&&(":"==(n=A(e,1))||!t&&"|"==n)},Ee=function(e){var t;return e.length>1&&Ce($(e,0,2))&&(2==e.length||"/"===(t=A(e,2))||"\\"===t||"?"===t||"#"===t)},be=function(e){var t=e.path,n=t.length;!n||"file"==e.scheme&&1==n&&Ce(t[0],!0)||t.length--},Te=function(e){return"."===e||"%2e"===H(e)},Se=function(e){return e=H(e),".."===e||"%2e."===e||".%2e"===e||"%2e%2e"===e},Re={},Ie={},we={},Oe={},ke={},Me={},xe={},Pe={},Ae={},De={},Ne={},Le={},Ue={},Be={},Ve={},je={},Fe={},$e={},He={},Ke={},We={},qe=function(e,t,n,r){var o,s,a,c,l=n||Re,u=0,d="",h=!1,p=!1,g=!1;n||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=V(t,re,"")),t=V(t,oe,""),o=m(t);while(u<=o.length){switch(s=o[u],l){case Re:if(!s||!D(Y,s)){if(n)return q;l=we;continue}d+=H(s),l=Ie;break;case Ie:if(s&&(D(J,s)||"+"==s||"-"==s||"."==s))d+=H(s);else{if(":"!=s){if(n)return q;d="",l=we,u=0;continue}if(n&&(_e(e)!=f(me,d)||"file"==d&&(ve(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=d,n)return void(_e(e)&&me[e.scheme]==e.port&&(e.port=null));d="","file"==e.scheme?l=Be:_e(e)&&r&&r.scheme==e.scheme?l=Oe:_e(e)?l=Pe:"/"==o[u+1]?(l=ke,u++):(e.cannotBeABaseURL=!0,B(e.path,""),l=He)}break;case we:if(!r||r.cannotBeABaseURL&&"#"!=s)return q;if(r.cannotBeABaseURL&&"#"==s){e.scheme=r.scheme,e.path=_(r.path),e.query=r.query,e.fragment="",e.cannotBeABaseURL=!0,l=We;break}l="file"==r.scheme?Be:Me;continue;case Oe:if("/"!=s||"/"!=o[u+1]){l=Me;continue}l=Ae,u++;break;case ke:if("/"==s){l=De;break}l=$e;continue;case Me:if(e.scheme=r.scheme,s==i)e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=_(r.path),e.query=r.query;else if("/"==s||"\\"==s&&_e(e))l=xe;else if("?"==s)e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=_(r.path),e.query="",l=Ke;else{if("#"!=s){e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=_(r.path),e.path.length--,l=$e;continue}e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=_(r.path),e.query=r.query,e.fragment="",l=We}break;case xe:if(!_e(e)||"/"!=s&&"\\"!=s){if("/"!=s){e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,l=$e;continue}l=De}else l=Ae;break;case Pe:if(l=Ae,"/"!=s||"/"!=A(d,u+1))continue;u++;break;case Ae:if("/"!=s&&"\\"!=s){l=De;continue}break;case De:if("@"==s){h&&(d="%40"+d),h=!0,a=m(d);for(var v=0;v<a.length;v++){var y=a[v];if(":"!=y||g){var C=ge(y,fe);g?e.password+=C:e.username+=C}else g=!0}d=""}else if(s==i||"/"==s||"?"==s||"#"==s||"\\"==s&&_e(e)){if(h&&""==d)return W;u-=m(d).length+1,d="",l=Ne}else d+=s;break;case Ne:case Le:if(n&&"file"==e.scheme){l=je;continue}if(":"!=s||p){if(s==i||"/"==s||"?"==s||"#"==s||"\\"==s&&_e(e)){if(_e(e)&&""==d)return G;if(n&&""==d&&(ve(e)||null!==e.port))return;if(c=se(e,d),c)return c;if(d="",l=Fe,n)return;continue}"["==s?p=!0:"]"==s&&(p=!1),d+=s}else{if(""==d)return G;if(c=se(e,d),c)return c;if(d="",l=Ue,n==Le)return}break;case Ue:if(!D(X,s)){if(s==i||"/"==s||"?"==s||"#"==s||"\\"==s&&_e(e)||n){if(""!=d){var E=M(d,10);if(E>65535)return z;e.port=_e(e)&&E===me[e.scheme]?null:E,d=""}if(n)return;l=Fe;continue}return z}d+=s;break;case Be:if(e.scheme="file","/"==s||"\\"==s)l=Ve;else{if(!r||"file"!=r.scheme){l=$e;continue}if(s==i)e.host=r.host,e.path=_(r.path),e.query=r.query;else if("?"==s)e.host=r.host,e.path=_(r.path),e.query="",l=Ke;else{if("#"!=s){Ee(N(_(o,u),""))||(e.host=r.host,e.path=_(r.path),be(e)),l=$e;continue}e.host=r.host,e.path=_(r.path),e.query=r.query,e.fragment="",l=We}}break;case Ve:if("/"==s||"\\"==s){l=je;break}r&&"file"==r.scheme&&!Ee(N(_(o,u),""))&&(Ce(r.path[0],!0)?B(e.path,r.path[0]):e.host=r.host),l=$e;continue;case je:if(s==i||"/"==s||"\\"==s||"?"==s||"#"==s){if(!n&&Ce(d))l=$e;else if(""==d){if(e.host="",n)return;l=Fe}else{if(c=se(e,d),c)return c;if("localhost"==e.host&&(e.host=""),n)return;d="",l=Fe}continue}d+=s;break;case Fe:if(_e(e)){if(l=$e,"/"!=s&&"\\"!=s)continue}else if(n||"?"!=s)if(n||"#"!=s){if(s!=i&&(l=$e,"/"!=s))continue}else e.fragment="",l=We;else e.query="",l=Ke;break;case $e:if(s==i||"/"==s||"\\"==s&&_e(e)||!n&&("?"==s||"#"==s)){if(Se(d)?(be(e),"/"==s||"\\"==s&&_e(e)||B(e.path,"")):Te(d)?"/"==s||"\\"==s&&_e(e)||B(e.path,""):("file"==e.scheme&&!e.path.length&&Ce(d)&&(e.host&&(e.host=""),d=A(d,0)+":"),B(e.path,d)),d="","file"==e.scheme&&(s==i||"?"==s||"#"==s))while(e.path.length>1&&""===e.path[0])j(e.path);"?"==s?(e.query="",l=Ke):"#"==s&&(e.fragment="",l=We)}else d+=ge(s,pe);break;case He:"?"==s?(e.query="",l=Ke):"#"==s?(e.fragment="",l=We):s!=i&&(e.path[0]+=ge(s,de));break;case Ke:n||"#"!=s?s!=i&&("'"==s&&_e(e)?e.query+="%27":e.query+="#"==s?"%23":ge(s,de)):(e.fragment="",l=We);break;case We:s!=i&&(e.fragment+=ge(s,he));break}u++}},Ge=function(e){var t,n,i=p(this,ze),r=arguments.length>1?arguments[1]:void 0,s=C(e),a=S(i,{type:"URL"});if(void 0!==r)try{t=R(r)}catch(d){if(n=qe(t={},C(r)),n)throw k(n)}if(n=qe(a,s,null,t),n)throw k(n);var c=a.searchParams=new I,u=w(c);u.updateSearchParams(a.query),u.updateURL=function(){a.query=C(c)||null},o||(i.href=l(Ye,i),i.origin=l(Je,i),i.protocol=l(Xe,i),i.username=l(Qe,i),i.password=l(Ze,i),i.host=l(et,i),i.hostname=l(tt,i),i.port=l(nt,i),i.pathname=l(it,i),i.search=l(rt,i),i.searchParams=l(ot,i),i.hash=l(st,i))},ze=Ge.prototype,Ye=function(){var e=R(this),t=e.scheme,n=e.username,i=e.password,r=e.host,o=e.port,s=e.path,a=e.query,c=e.fragment,l=t+":";return null!==r?(l+="//",ve(e)&&(l+=n+(i?":"+i:"")+"@"),l+=ue(r),null!==o&&(l+=":"+o)):"file"==t&&(l+="//"),l+=e.cannotBeABaseURL?s[0]:s.length?"/"+N(s,"/"):"",null!==a&&(l+="?"+a),null!==c&&(l+="#"+c),l},Je=function(){var e=R(this),t=e.scheme,n=e.port;if("blob"==t)try{return new Ge(t.path[0]).origin}catch(i){return"null"}return"file"!=t&&_e(e)?t+"://"+ue(e.host)+(null!==n?":"+n:""):"null"},Xe=function(){return R(this).scheme+":"},Qe=function(){return R(this).username},Ze=function(){return R(this).password},et=function(){var e=R(this),t=e.host,n=e.port;return null===t?"":null===n?ue(t):ue(t)+":"+n},tt=function(){var e=R(this).host;return null===e?"":ue(e)},nt=function(){var e=R(this).port;return null===e?"":C(e)},it=function(){var e=R(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+N(t,"/"):""},rt=function(){var e=R(this).query;return e?"?"+e:""},ot=function(){return R(this).searchParams},st=function(){var e=R(this).fragment;return e?"#"+e:""},at=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(o&&d(ze,{href:at(Ye,(function(e){var t=R(this),n=C(e),i=qe(t,n);if(i)throw k(i);w(t.searchParams).updateSearchParams(t.query)})),origin:at(Je),protocol:at(Xe,(function(e){var t=R(this);qe(t,C(e)+":",Re)})),username:at(Qe,(function(e){var t=R(this),n=m(C(e));if(!ye(t)){t.username="";for(var i=0;i<n.length;i++)t.username+=ge(n[i],fe)}})),password:at(Ze,(function(e){var t=R(this),n=m(C(e));if(!ye(t)){t.password="";for(var i=0;i<n.length;i++)t.password+=ge(n[i],fe)}})),host:at(et,(function(e){var t=R(this);t.cannotBeABaseURL||qe(t,C(e),Ne)})),hostname:at(tt,(function(e){var t=R(this);t.cannotBeABaseURL||qe(t,C(e),Le)})),port:at(nt,(function(e){var t=R(this);ye(t)||(e=C(e),""==e?t.port=null:qe(t,e,Ue))})),pathname:at(it,(function(e){var t=R(this);t.cannotBeABaseURL||(t.path=[],qe(t,C(e),Fe))})),search:at(rt,(function(e){var t=R(this);e=C(e),""==e?t.query=null:("?"==A(e,0)&&(e=$(e,1)),t.query="",qe(t,e,Ke)),w(t.searchParams).updateSearchParams(t.query)})),searchParams:at(ot),hash:at(st,(function(e){var t=R(this);e=C(e),""!=e?("#"==A(e,0)&&(e=$(e,1)),t.fragment="",qe(t,e,We)):t.fragment=null}))}),h(ze,"toJSON",(function(){return l(Ye,this)}),{enumerable:!0}),h(ze,"toString",(function(){return l(Ye,this)}),{enumerable:!0}),O){var ct=O.createObjectURL,lt=O.revokeObjectURL;ct&&h(Ge,"createObjectURL",c(ct,O)),lt&&h(Ge,"revokeObjectURL",c(lt,O))}E(Ge,"URL"),r({global:!0,forced:!s,sham:!o},{URL:Ge})},"2ba4":function(e,t){var n=Function.prototype,i=n.apply,r=n.bind,o=n.call;e.exports="object"==typeof Reflect&&Reflect.apply||(r?o.bind(i):function(){return o.apply(i,arguments)})},"2bb5":function(e,t,n){"use strict";t.__esModule=!0;n("8122");t.default={mounted:function(){},methods:{getMigratingConfig:function(){return{props:{},events:{}}}}}},"2cf4":function(e,t,n){var i,r,o,s,a=n("da84"),c=n("2ba4"),l=n("0366"),u=n("1626"),d=n("1a2d"),h=n("d039"),p=n("1be4"),f=n("f36a"),g=n("cc12"),m=n("1cdc"),_=n("605d"),v=a.setImmediate,y=a.clearImmediate,C=a.process,E=a.Dispatch,b=a.Function,T=a.MessageChannel,S=a.String,R=0,I={},w="onreadystatechange";try{i=a.location}catch(P){}var O=function(e){if(d(I,e)){var t=I[e];delete I[e],t()}},k=function(e){return function(){O(e)}},M=function(e){O(e.data)},x=function(e){a.postMessage(S(e),i.protocol+"//"+i.host)};v&&y||(v=function(e){var t=f(arguments,1);return I[++R]=function(){c(u(e)?e:b(e),void 0,t)},r(R),R},y=function(e){delete I[e]},_?r=function(e){C.nextTick(k(e))}:E&&E.now?r=function(e){E.now(k(e))}:T&&!m?(o=new T,s=o.port2,o.port1.onmessage=M,r=l(s.postMessage,s)):a.addEventListener&&u(a.postMessage)&&!a.importScripts&&i&&"file:"!==i.protocol&&!h(x)?(r=x,a.addEventListener("message",M,!1)):r=w in g("script")?function(e){p.appendChild(g("script"))[w]=function(){p.removeChild(this),O(e)}}:function(e){setTimeout(k(e),0)}),e.exports={set:v,clear:y}},"2d00":function(e,t,n){var i,r,o=n("da84"),s=n("342f"),a=o.process,c=o.Deno,l=a&&a.versions||c&&c.version,u=l&&l.v8;u&&(i=u.split("."),r=i[0]>0&&i[0]<4?1:+(i[0]+i[1])),!r&&s&&(i=s.match(/Edge\/(\d+)/),(!i||i[1]>=74)&&(i=s.match(/Chrome\/(\d+)/),i&&(r=+i[1]))),e.exports=r},"2d83":function(e,t,n){"use strict";var i=n("387f");e.exports=function(e,t,n,r,o){var s=new Error(e);return i(s,t,n,r,o)}},"2e67":function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},"2f62":function(e,t,n){"use strict";(function(e){
/*!
 * vuex v3.6.2
 * (c) 2021 Evan You
 * @license MIT
 */
function n(e){var t=Number(e.version.split(".")[0]);if(t>=2)e.mixin({beforeCreate:i});else{var n=e.prototype._init;e.prototype._init=function(e){void 0===e&&(e={}),e.init=e.init?[i].concat(e.init):i,n.call(this,e)}}function i(){var e=this.$options;e.store?this.$store="function"===typeof e.store?e.store():e.store:e.parent&&e.parent.$store&&(this.$store=e.parent.$store)}}var i="undefined"!==typeof window?window:"undefined"!==typeof e?e:{},r=i.__VUE_DEVTOOLS_GLOBAL_HOOK__;function o(e){r&&(e._devtoolHook=r,r.emit("vuex:init",e),r.on("vuex:travel-to-state",(function(t){e.replaceState(t)})),e.subscribe((function(e,t){r.emit("vuex:mutation",e,t)}),{prepend:!0}),e.subscribeAction((function(e,t){r.emit("vuex:action",e,t)}),{prepend:!0}))}function s(e,t){return e.filter(t)[0]}function a(e,t){if(void 0===t&&(t=[]),null===e||"object"!==typeof e)return e;var n=s(t,(function(t){return t.original===e}));if(n)return n.copy;var i=Array.isArray(e)?[]:{};return t.push({original:e,copy:i}),Object.keys(e).forEach((function(n){i[n]=a(e[n],t)})),i}function c(e,t){Object.keys(e).forEach((function(n){return t(e[n],n)}))}function l(e){return null!==e&&"object"===typeof e}function u(e){return e&&"function"===typeof e.then}function d(e,t){return function(){return e(t)}}var h=function(e,t){this.runtime=t,this._children=Object.create(null),this._rawModule=e;var n=e.state;this.state=("function"===typeof n?n():n)||{}},p={namespaced:{configurable:!0}};p.namespaced.get=function(){return!!this._rawModule.namespaced},h.prototype.addChild=function(e,t){this._children[e]=t},h.prototype.removeChild=function(e){delete this._children[e]},h.prototype.getChild=function(e){return this._children[e]},h.prototype.hasChild=function(e){return e in this._children},h.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)},h.prototype.forEachChild=function(e){c(this._children,e)},h.prototype.forEachGetter=function(e){this._rawModule.getters&&c(this._rawModule.getters,e)},h.prototype.forEachAction=function(e){this._rawModule.actions&&c(this._rawModule.actions,e)},h.prototype.forEachMutation=function(e){this._rawModule.mutations&&c(this._rawModule.mutations,e)},Object.defineProperties(h.prototype,p);var f=function(e){this.register([],e,!1)};function g(e,t,n){if(t.update(n),n.modules)for(var i in n.modules){if(!t.getChild(i))return void 0;g(e.concat(i),t.getChild(i),n.modules[i])}}f.prototype.get=function(e){return e.reduce((function(e,t){return e.getChild(t)}),this.root)},f.prototype.getNamespace=function(e){var t=this.root;return e.reduce((function(e,n){return t=t.getChild(n),e+(t.namespaced?n+"/":"")}),"")},f.prototype.update=function(e){g([],this.root,e)},f.prototype.register=function(e,t,n){var i=this;void 0===n&&(n=!0);var r=new h(t,n);if(0===e.length)this.root=r;else{var o=this.get(e.slice(0,-1));o.addChild(e[e.length-1],r)}t.modules&&c(t.modules,(function(t,r){i.register(e.concat(r),t,n)}))},f.prototype.unregister=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1],i=t.getChild(n);i&&i.runtime&&t.removeChild(n)},f.prototype.isRegistered=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1];return!!t&&t.hasChild(n)};var m;var _=function(e){var t=this;void 0===e&&(e={}),!m&&"undefined"!==typeof window&&window.Vue&&x(window.Vue);var n=e.plugins;void 0===n&&(n=[]);var i=e.strict;void 0===i&&(i=!1),this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new f(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._watcherVM=new m,this._makeLocalGettersCache=Object.create(null);var r=this,s=this,a=s.dispatch,c=s.commit;this.dispatch=function(e,t){return a.call(r,e,t)},this.commit=function(e,t,n){return c.call(r,e,t,n)},this.strict=i;var l=this._modules.root.state;b(this,l,[],this._modules.root),E(this,l),n.forEach((function(e){return e(t)}));var u=void 0!==e.devtools?e.devtools:m.config.devtools;u&&o(this)},v={state:{configurable:!0}};function y(e,t,n){return t.indexOf(e)<0&&(n&&n.prepend?t.unshift(e):t.push(e)),function(){var n=t.indexOf(e);n>-1&&t.splice(n,1)}}function C(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var n=e.state;b(e,n,[],e._modules.root,!0),E(e,n,t)}function E(e,t,n){var i=e._vm;e.getters={},e._makeLocalGettersCache=Object.create(null);var r=e._wrappedGetters,o={};c(r,(function(t,n){o[n]=d(t,e),Object.defineProperty(e.getters,n,{get:function(){return e._vm[n]},enumerable:!0})}));var s=m.config.silent;m.config.silent=!0,e._vm=new m({data:{$$state:t},computed:o}),m.config.silent=s,e.strict&&O(e),i&&(n&&e._withCommit((function(){i._data.$$state=null})),m.nextTick((function(){return i.$destroy()})))}function b(e,t,n,i,r){var o=!n.length,s=e._modules.getNamespace(n);if(i.namespaced&&(e._modulesNamespaceMap[s],e._modulesNamespaceMap[s]=i),!o&&!r){var a=k(t,n.slice(0,-1)),c=n[n.length-1];e._withCommit((function(){m.set(a,c,i.state)}))}var l=i.context=T(e,s,n);i.forEachMutation((function(t,n){var i=s+n;R(e,i,t,l)})),i.forEachAction((function(t,n){var i=t.root?n:s+n,r=t.handler||t;I(e,i,r,l)})),i.forEachGetter((function(t,n){var i=s+n;w(e,i,t,l)})),i.forEachChild((function(i,o){b(e,t,n.concat(o),i,r)}))}function T(e,t,n){var i=""===t,r={dispatch:i?e.dispatch:function(n,i,r){var o=M(n,i,r),s=o.payload,a=o.options,c=o.type;return a&&a.root||(c=t+c),e.dispatch(c,s)},commit:i?e.commit:function(n,i,r){var o=M(n,i,r),s=o.payload,a=o.options,c=o.type;a&&a.root||(c=t+c),e.commit(c,s,a)}};return Object.defineProperties(r,{getters:{get:i?function(){return e.getters}:function(){return S(e,t)}},state:{get:function(){return k(e.state,n)}}}),r}function S(e,t){if(!e._makeLocalGettersCache[t]){var n={},i=t.length;Object.keys(e.getters).forEach((function(r){if(r.slice(0,i)===t){var o=r.slice(i);Object.defineProperty(n,o,{get:function(){return e.getters[r]},enumerable:!0})}})),e._makeLocalGettersCache[t]=n}return e._makeLocalGettersCache[t]}function R(e,t,n,i){var r=e._mutations[t]||(e._mutations[t]=[]);r.push((function(t){n.call(e,i.state,t)}))}function I(e,t,n,i){var r=e._actions[t]||(e._actions[t]=[]);r.push((function(t){var r=n.call(e,{dispatch:i.dispatch,commit:i.commit,getters:i.getters,state:i.state,rootGetters:e.getters,rootState:e.state},t);return u(r)||(r=Promise.resolve(r)),e._devtoolHook?r.catch((function(t){throw e._devtoolHook.emit("vuex:error",t),t})):r}))}function w(e,t,n,i){e._wrappedGetters[t]||(e._wrappedGetters[t]=function(e){return n(i.state,i.getters,e.state,e.getters)})}function O(e){e._vm.$watch((function(){return this._data.$$state}),(function(){0}),{deep:!0,sync:!0})}function k(e,t){return t.reduce((function(e,t){return e[t]}),e)}function M(e,t,n){return l(e)&&e.type&&(n=t,t=e,e=e.type),{type:e,payload:t,options:n}}function x(e){m&&e===m||(m=e,n(m))}v.state.get=function(){return this._vm._data.$$state},v.state.set=function(e){0},_.prototype.commit=function(e,t,n){var i=this,r=M(e,t,n),o=r.type,s=r.payload,a=(r.options,{type:o,payload:s}),c=this._mutations[o];c&&(this._withCommit((function(){c.forEach((function(e){e(s)}))})),this._subscribers.slice().forEach((function(e){return e(a,i.state)})))},_.prototype.dispatch=function(e,t){var n=this,i=M(e,t),r=i.type,o=i.payload,s={type:r,payload:o},a=this._actions[r];if(a){try{this._actionSubscribers.slice().filter((function(e){return e.before})).forEach((function(e){return e.before(s,n.state)}))}catch(l){0}var c=a.length>1?Promise.all(a.map((function(e){return e(o)}))):a[0](o);return new Promise((function(e,t){c.then((function(t){try{n._actionSubscribers.filter((function(e){return e.after})).forEach((function(e){return e.after(s,n.state)}))}catch(l){0}e(t)}),(function(e){try{n._actionSubscribers.filter((function(e){return e.error})).forEach((function(t){return t.error(s,n.state,e)}))}catch(l){0}t(e)}))}))}},_.prototype.subscribe=function(e,t){return y(e,this._subscribers,t)},_.prototype.subscribeAction=function(e,t){var n="function"===typeof e?{before:e}:e;return y(n,this._actionSubscribers,t)},_.prototype.watch=function(e,t,n){var i=this;return this._watcherVM.$watch((function(){return e(i.state,i.getters)}),t,n)},_.prototype.replaceState=function(e){var t=this;this._withCommit((function(){t._vm._data.$$state=e}))},_.prototype.registerModule=function(e,t,n){void 0===n&&(n={}),"string"===typeof e&&(e=[e]),this._modules.register(e,t),b(this,this.state,e,this._modules.get(e),n.preserveState),E(this,this.state)},_.prototype.unregisterModule=function(e){var t=this;"string"===typeof e&&(e=[e]),this._modules.unregister(e),this._withCommit((function(){var n=k(t.state,e.slice(0,-1));m.delete(n,e[e.length-1])})),C(this)},_.prototype.hasModule=function(e){return"string"===typeof e&&(e=[e]),this._modules.isRegistered(e)},_.prototype.hotUpdate=function(e){this._modules.update(e),C(this,!0)},_.prototype._withCommit=function(e){var t=this._committing;this._committing=!0,e(),this._committing=t},Object.defineProperties(_.prototype,v);var P=V((function(e,t){var n={};return U(t).forEach((function(t){var i=t.key,r=t.val;n[i]=function(){var t=this.$store.state,n=this.$store.getters;if(e){var i=j(this.$store,"mapState",e);if(!i)return;t=i.context.state,n=i.context.getters}return"function"===typeof r?r.call(this,t,n):t[r]},n[i].vuex=!0})),n})),A=V((function(e,t){var n={};return U(t).forEach((function(t){var i=t.key,r=t.val;n[i]=function(){var t=[],n=arguments.length;while(n--)t[n]=arguments[n];var i=this.$store.commit;if(e){var o=j(this.$store,"mapMutations",e);if(!o)return;i=o.context.commit}return"function"===typeof r?r.apply(this,[i].concat(t)):i.apply(this.$store,[r].concat(t))}})),n})),D=V((function(e,t){var n={};return U(t).forEach((function(t){var i=t.key,r=t.val;r=e+r,n[i]=function(){if(!e||j(this.$store,"mapGetters",e))return this.$store.getters[r]},n[i].vuex=!0})),n})),N=V((function(e,t){var n={};return U(t).forEach((function(t){var i=t.key,r=t.val;n[i]=function(){var t=[],n=arguments.length;while(n--)t[n]=arguments[n];var i=this.$store.dispatch;if(e){var o=j(this.$store,"mapActions",e);if(!o)return;i=o.context.dispatch}return"function"===typeof r?r.apply(this,[i].concat(t)):i.apply(this.$store,[r].concat(t))}})),n})),L=function(e){return{mapState:P.bind(null,e),mapGetters:D.bind(null,e),mapMutations:A.bind(null,e),mapActions:N.bind(null,e)}};function U(e){return B(e)?Array.isArray(e)?e.map((function(e){return{key:e,val:e}})):Object.keys(e).map((function(t){return{key:t,val:e[t]}})):[]}function B(e){return Array.isArray(e)||l(e)}function V(e){return function(t,n){return"string"!==typeof t?(n=t,t=""):"/"!==t.charAt(t.length-1)&&(t+="/"),e(t,n)}}function j(e,t,n){var i=e._modulesNamespaceMap[n];return i}function F(e){void 0===e&&(e={});var t=e.collapsed;void 0===t&&(t=!0);var n=e.filter;void 0===n&&(n=function(e,t,n){return!0});var i=e.transformer;void 0===i&&(i=function(e){return e});var r=e.mutationTransformer;void 0===r&&(r=function(e){return e});var o=e.actionFilter;void 0===o&&(o=function(e,t){return!0});var s=e.actionTransformer;void 0===s&&(s=function(e){return e});var c=e.logMutations;void 0===c&&(c=!0);var l=e.logActions;void 0===l&&(l=!0);var u=e.logger;return void 0===u&&(u=console),function(e){var d=a(e.state);"undefined"!==typeof u&&(c&&e.subscribe((function(e,o){var s=a(o);if(n(e,d,s)){var c=K(),l=r(e),h="mutation "+e.type+c;$(u,h,t),u.log("%c prev state","color: #9E9E9E; font-weight: bold",i(d)),u.log("%c mutation","color: #03A9F4; font-weight: bold",l),u.log("%c next state","color: #4CAF50; font-weight: bold",i(s)),H(u)}d=s})),l&&e.subscribeAction((function(e,n){if(o(e,n)){var i=K(),r=s(e),a="action "+e.type+i;$(u,a,t),u.log("%c action","color: #03A9F4; font-weight: bold",r),H(u)}})))}}function $(e,t,n){var i=n?e.groupCollapsed:e.group;try{i.call(e,t)}catch(r){e.log(t)}}function H(e){try{e.groupEnd()}catch(t){e.log("—— log end ——")}}function K(){var e=new Date;return" @ "+q(e.getHours(),2)+":"+q(e.getMinutes(),2)+":"+q(e.getSeconds(),2)+"."+q(e.getMilliseconds(),3)}function W(e,t){return new Array(t+1).join(e)}function q(e,t){return W("0",t-e.toString().length)+e}var G={Store:_,install:x,version:"3.6.2",mapState:P,mapMutations:A,mapGetters:D,mapActions:N,createNamespacedHelpers:L,createLogger:F};t["a"]=G}).call(this,n("c8ba"))},"2f9a":function(e,t){e.exports=function(){}},"301c":function(e,t,n){n("e198")("asyncIterator")},"30b5":function(e,t,n){"use strict";var i=n("c532");function r(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(i.isURLSearchParams(t))o=t.toString();else{var s=[];i.forEach(t,(function(e,t){null!==e&&"undefined"!==typeof e&&(i.isArray(e)?t+="[]":e=[e],i.forEach(e,(function(e){i.isDate(e)?e=e.toISOString():i.isObject(e)&&(e=JSON.stringify(e)),s.push(r(t)+"="+r(e))})))})),o=s.join("&")}if(o){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},3397:function(e,t,n){var i=n("7a41");e.exports=function(e,t){if(!i(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!i(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},"342f":function(e,t,n){var i=n("d066");e.exports=i("navigator","userAgent")||""},"35a1":function(e,t,n){var i=n("f5df"),r=n("dc4a"),o=n("3f8c"),s=n("b622"),a=s("iterator");e.exports=function(e){if(void 0!=e)return r(e,a)||r(e,"@@iterator")||o[i(e)]}},"37e8":function(e,t,n){var i=n("83ab"),r=n("9bf2"),o=n("825a"),s=n("fc6a"),a=n("df75");e.exports=i?Object.defineProperties:function(e,t){o(e);var n,i=s(t),c=a(t),l=c.length,u=0;while(l>u)r.f(e,n=c[u++],i[n]);return e}},"387f":function(e,t,n){"use strict";e.exports=function(e,t,n,i,r){return e.config=t,n&&(e.code=n),e.request=i,e.response=r,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},3934:function(e,t,n){"use strict";var i=n("c532");e.exports=i.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var i=e;return t&&(n.setAttribute("href",i),i=n.href),n.setAttribute("href",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=i.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return function(){return!0}}()},"393a":function(e,t,n){"use strict";var i=n("e444"),r=n("512c"),o=n("ba01"),s=n("051b"),a=n("8a0d"),c=n("26dd"),l=n("92f0"),u=n("ce7a"),d=n("cc15")("iterator"),h=!([].keys&&"next"in[].keys()),p="@@iterator",f="keys",g="values",m=function(){return this};e.exports=function(e,t,n,_,v,y,C){c(n,t,_);var E,b,T,S=function(e){if(!h&&e in O)return O[e];switch(e){case f:return function(){return new n(this,e)};case g:return function(){return new n(this,e)}}return function(){return new n(this,e)}},R=t+" Iterator",I=v==g,w=!1,O=e.prototype,k=O[d]||O[p]||v&&O[v],M=k||S(v),x=v?I?S("entries"):M:void 0,P="Array"==t&&O.entries||k;if(P&&(T=u(P.call(new e)),T!==Object.prototype&&T.next&&(l(T,R,!0),i||"function"==typeof T[d]||s(T,d,m))),I&&k&&k.name!==g&&(w=!0,M=function(){return k.call(this)}),i&&!C||!h&&!w&&O[d]||s(O,d,M),a[t]=M,a[R]=m,v)if(E={values:I?M:S(g),keys:y?M:S(f),entries:x},C)for(b in E)b in O||o(O,b,E[b]);else r(r.P+r.F*(h||w),t,E);return E}},"39ad":function(e,t,n){var i=n("6ca1"),r=n("d16a"),o=n("9d11");e.exports=function(e){return function(t,n,s){var a,c=i(t),l=r(c.length),u=o(s,l);if(e&&n!=n){while(l>u)if(a=c[u++],a!=a)return!0}else for(;l>u;u++)if((e||u in c)&&c[u]===n)return e||u||0;return!e&&-1}}},"3a9b":function(e,t,n){var i=n("e330");e.exports=i({}.isPrototypeOf)},"3bbe":function(e,t,n){var i=n("da84"),r=n("1626"),o=i.String,s=i.TypeError;e.exports=function(e){if("object"==typeof e||r(e))return e;throw s("Can't set "+o(e)+" as a prototype")}},"3c35":function(e,t){(function(t){e.exports=t}).call(this,{})},"3c4e":function(e,t,n){"use strict";var i=function(e){return r(e)&&!o(e)};function r(e){return!!e&&"object"===typeof e}function o(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||c(e)}var s="function"===typeof Symbol&&Symbol.for,a=s?Symbol.for("react.element"):60103;function c(e){return e.$$typeof===a}function l(e){return Array.isArray(e)?[]:{}}function u(e,t){var n=t&&!0===t.clone;return n&&i(e)?p(l(e),e,t):e}function d(e,t,n){var r=e.slice();return t.forEach((function(t,o){"undefined"===typeof r[o]?r[o]=u(t,n):i(t)?r[o]=p(e[o],t,n):-1===e.indexOf(t)&&r.push(u(t,n))})),r}function h(e,t,n){var r={};return i(e)&&Object.keys(e).forEach((function(t){r[t]=u(e[t],n)})),Object.keys(t).forEach((function(o){i(t[o])&&e[o]?r[o]=p(e[o],t[o],n):r[o]=u(t[o],n)})),r}function p(e,t,n){var i=Array.isArray(t),r=Array.isArray(e),o=n||{arrayMerge:d},s=i===r;if(s){if(i){var a=o.arrayMerge||d;return a(e,t,n)}return h(e,t,n)}return u(t,n)}p.all=function(e,t){if(!Array.isArray(e)||e.length<2)throw new Error("first argument should be an array with at least two elements");return e.reduce((function(e,n){return p(e,n,t)}))};var f=p;e.exports=f},"3ca3":function(e,t,n){"use strict";var i=n("6547").charAt,r=n("577e"),o=n("69f3"),s=n("7dd0"),a="String Iterator",c=o.set,l=o.getterFor(a);s(String,"String",(function(e){c(this,{type:a,string:r(e),index:0})}),(function(){var e,t=l(this),n=t.string,r=t.index;return r>=n.length?{value:void 0,done:!0}:(e=i(n,r),t.index+=e.length,{value:e,done:!1})}))},"3f6b":function(e,t,n){e.exports={default:n("b9c7"),__esModule:!0}},"3f8c":function(e,t){e.exports={}},4010:function(e,t,n){"use strict";t.__esModule=!0,t.removeResizeListener=t.addResizeListener=void 0;var i=n("6dd80"),r=o(i);function o(e){return e&&e.__esModule?e:{default:e}}var s="undefined"===typeof window,a=function(e){var t=e,n=Array.isArray(t),i=0;for(t=n?t:t[Symbol.iterator]();;){var r;if(n){if(i>=t.length)break;r=t[i++]}else{if(i=t.next(),i.done)break;r=i.value}var o=r,s=o.target.__resizeListeners__||[];s.length&&s.forEach((function(e){e()}))}};t.addResizeListener=function(e,t){s||(e.__resizeListeners__||(e.__resizeListeners__=[],e.__ro__=new r.default(a),e.__ro__.observe(e)),e.__resizeListeners__.push(t))},t.removeResizeListener=function(e,t){e&&e.__resizeListeners__&&(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),e.__resizeListeners__.length||e.__ro__.disconnect())}},"408a":function(e,t,n){var i=n("e330");e.exports=i(1..valueOf)},"417f":function(e,t,n){"use strict";t.__esModule=!0;var i=n("2b0e"),r=s(i),o=n("5924");function s(e){return e&&e.__esModule?e:{default:e}}var a=[],c="@@clickoutsideContext",l=void 0,u=0;function d(e,t,n){return function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!(n&&n.context&&i.target&&r.target)||e.contains(i.target)||e.contains(r.target)||e===i.target||n.context.popperElm&&(n.context.popperElm.contains(i.target)||n.context.popperElm.contains(r.target))||(t.expression&&e[c].methodName&&n.context[e[c].methodName]?n.context[e[c].methodName]():e[c].bindingFn&&e[c].bindingFn())}}!r.default.prototype.$isServer&&(0,o.on)(document,"mousedown",(function(e){return l=e})),!r.default.prototype.$isServer&&(0,o.on)(document,"mouseup",(function(e){a.forEach((function(t){return t[c].documentHandler(e,l)}))})),t.default={bind:function(e,t,n){a.push(e);var i=u++;e[c]={id:i,documentHandler:d(e,t,n),methodName:t.expression,bindingFn:t.value}},update:function(e,t,n){e[c].documentHandler=d(e,t,n),e[c].methodName=t.expression,e[c].bindingFn=t.value},unbind:function(e){for(var t=a.length,n=0;n<t;n++)if(a[n][c].id===e[c].id){a.splice(n,1);break}delete e[c]}}},"41b2":function(e,t,n){"use strict";t.__esModule=!0;var i=n("3f6b"),r=o(i);function o(e){return e&&e.__esModule?e:{default:e}}t.default=r.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}},"41f8":function(e,t,n){"use strict";t.__esModule=!0;var i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.isVNode=o;var r=n("8122");function o(e){return null!==e&&"object"===("undefined"===typeof e?"undefined":i(e))&&(0,r.hasOwn)(e,"componentOptions")}},"428f":function(e,t,n){var i=n("da84");e.exports=i},4362:function(e,t,n){t.nextTick=function(e){var t=Array.prototype.slice.call(arguments);t.shift(),setTimeout((function(){e.apply(null,t)}),0)},t.platform=t.arch=t.execPath=t.title="browser",t.pid=1,t.browser=!0,t.env={},t.argv=[],t.binding=function(e){throw new Error("No such module. (Possibly not yet loaded)")},function(){var e,i="/";t.cwd=function(){return i},t.chdir=function(t){e||(e=n("df7c")),i=e.resolve(t,i)}}(),t.exit=t.kill=t.umask=t.dlopen=t.uptime=t.memoryUsage=t.uvCounters=function(){},t.features={}},"44ad":function(e,t,n){var i=n("da84"),r=n("e330"),o=n("d039"),s=n("c6b6"),a=i.Object,c=r("".split);e.exports=o((function(){return!a("z").propertyIsEnumerable(0)}))?function(e){return"String"==s(e)?c(e,""):a(e)}:a},"44d2":function(e,t,n){var i=n("b622"),r=n("7c73"),o=n("9bf2"),s=i("unscopables"),a=Array.prototype;void 0==a[s]&&o.f(a,s,{configurable:!0,value:r(null)}),e.exports=function(e){a[s][e]=!0}},"44de":function(e,t,n){var i=n("da84");e.exports=function(e,t){var n=i.console;n&&n.error&&(1==arguments.length?n.error(e):n.error(e,t))}},"44e7":function(e,t,n){var i=n("861d"),r=n("c6b6"),o=n("b622"),s=o("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[s])?!!t:"RegExp"==r(e))}},"466d":function(e,t,n){"use strict";var i=n("c65b"),r=n("d784"),o=n("825a"),s=n("50c4"),a=n("577e"),c=n("1d80"),l=n("dc4a"),u=n("8aa5"),d=n("14c3");r("match",(function(e,t,n){return[function(t){var n=c(this),r=void 0==t?void 0:l(t,e);return r?i(r,t,n):new RegExp(t)[e](a(n))},function(e){var i=o(this),r=a(e),c=n(t,i,r);if(c.done)return c.value;if(!i.global)return d(i,r);var l=i.unicode;i.lastIndex=0;var h,p=[],f=0;while(null!==(h=d(i,r))){var g=a(h[0]);p[f]=g,""===g&&(i.lastIndex=u(r,s(i.lastIndex),l)),f++}return 0===f?null:p}]}))},"467f":function(e,t,n){"use strict";var i=n("2d83");e.exports=function(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(i("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},4726:function(e,t,n){e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=59)}({0:function(e,t,n){"use strict";function i(e,t,n,i,r,o,s,a){var c,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),i&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=c):r&&(c=a?function(){r.call(this,this.$root.$options.shadowRoot)}:r),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}n.d(t,"a",(function(){return i}))},15:function(e,t){e.exports=n("14e9")},19:function(e,t){e.exports=n("dcdc")},21:function(e,t){e.exports=n("d397")},26:function(e,t){e.exports=n("92fa")},3:function(e,t){e.exports=n("8122")},31:function(e,t){e.exports=n("2a5e")},40:function(e,t){e.exports=n("e452")},51:function(e,t){e.exports=n("f494")},59:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:["el-cascader-panel",e.border&&"is-bordered"],on:{keydown:e.handleKeyDown}},e._l(e.menus,(function(e,t){return n("cascader-menu",{key:t,ref:"menu",refInFor:!0,attrs:{index:t,nodes:e}})})),1)},r=[];i._withStripped=!0;var o,s,a=n(26),c=n.n(a),l=n(15),u=n.n(l),d=n(19),h=n.n(d),p=n(51),f=n.n(p),g=n(3),m=function(e){return e.stopPropagation()},_={inject:["panel"],components:{ElCheckbox:h.a,ElRadio:f.a},props:{node:{required:!0},nodeId:String},computed:{config:function(){return this.panel.config},isLeaf:function(){return this.node.isLeaf},isDisabled:function(){return this.node.isDisabled},checkedValue:function(){return this.panel.checkedValue},isChecked:function(){return this.node.isSameNode(this.checkedValue)},inActivePath:function(){return this.isInPath(this.panel.activePath)},inCheckedPath:function(){var e=this;return!!this.config.checkStrictly&&this.panel.checkedNodePaths.some((function(t){return e.isInPath(t)}))},value:function(){return this.node.getValueByOption()}},methods:{handleExpand:function(){var e=this,t=this.panel,n=this.node,i=this.isDisabled,r=this.config,o=r.multiple,s=r.checkStrictly;!s&&i||n.loading||(r.lazy&&!n.loaded?t.lazyLoad(n,(function(){var t=e.isLeaf;if(t||e.handleExpand(),o){var i=!!t&&n.checked;e.handleMultiCheckChange(i)}})):t.handleExpand(n))},handleCheckChange:function(){var e=this.panel,t=this.value,n=this.node;e.handleCheckChange(t),e.handleExpand(n)},handleMultiCheckChange:function(e){this.node.doCheck(e),this.panel.calculateMultiCheckedValue()},isInPath:function(e){var t=this.node,n=e[t.level-1]||{};return n.uid===t.uid},renderPrefix:function(e){var t=this.isLeaf,n=this.isChecked,i=this.config,r=i.checkStrictly,o=i.multiple;return o?this.renderCheckbox(e):r?this.renderRadio(e):t&&n?this.renderCheckIcon(e):null},renderPostfix:function(e){var t=this.node,n=this.isLeaf;return t.loading?this.renderLoadingIcon(e):n?null:this.renderExpandIcon(e)},renderCheckbox:function(e){var t=this.node,n=this.config,i=this.isDisabled,r={on:{change:this.handleMultiCheckChange},nativeOn:{}};return n.checkStrictly&&(r.nativeOn.click=m),e("el-checkbox",c()([{attrs:{value:t.checked,indeterminate:t.indeterminate,disabled:i}},r]))},renderRadio:function(e){var t=this.checkedValue,n=this.value,i=this.isDisabled;return Object(g["isEqual"])(n,t)&&(n=t),e("el-radio",{attrs:{value:t,label:n,disabled:i},on:{change:this.handleCheckChange},nativeOn:{click:m}},[e("span")])},renderCheckIcon:function(e){return e("i",{class:"el-icon-check el-cascader-node__prefix"})},renderLoadingIcon:function(e){return e("i",{class:"el-icon-loading el-cascader-node__postfix"})},renderExpandIcon:function(e){return e("i",{class:"el-icon-arrow-right el-cascader-node__postfix"})},renderContent:function(e){var t=this.panel,n=this.node,i=t.renderLabelFn,r=i?i({node:n,data:n.data}):null;return e("span",{class:"el-cascader-node__label"},[r||n.label])}},render:function(e){var t=this,n=this.inActivePath,i=this.inCheckedPath,r=this.isChecked,o=this.isLeaf,s=this.isDisabled,a=this.config,l=this.nodeId,u=a.expandTrigger,d=a.checkStrictly,h=a.multiple,p=!d&&s,f={on:{}};return"click"===u?f.on.click=this.handleExpand:(f.on.mouseenter=function(e){t.handleExpand(),t.$emit("expand",e)},f.on.focus=function(e){t.handleExpand(),t.$emit("expand",e)}),!o||s||d||h||(f.on.click=this.handleCheckChange),e("li",c()([{attrs:{role:"menuitem",id:l,"aria-expanded":n,tabindex:p?null:-1},class:{"el-cascader-node":!0,"is-selectable":d,"in-active-path":n,"in-checked-path":i,"is-active":r,"is-disabled":p}},f]),[this.renderPrefix(e),this.renderContent(e),this.renderPostfix(e)])}},v=_,y=n(0),C=Object(y["a"])(v,o,s,!1,null,null,null);C.options.__file="packages/cascader-panel/src/cascader-node.vue";var E,b,T=C.exports,S=n(6),R=n.n(S),I={name:"ElCascaderMenu",mixins:[R.a],inject:["panel"],components:{ElScrollbar:u.a,CascaderNode:T},props:{nodes:{type:Array,required:!0},index:Number},data:function(){return{activeNode:null,hoverTimer:null,id:Object(g["generateId"])()}},computed:{isEmpty:function(){return!this.nodes.length},menuId:function(){return"cascader-menu-"+this.id+"-"+this.index}},methods:{handleExpand:function(e){this.activeNode=e.target},handleMouseMove:function(e){var t=this.activeNode,n=this.hoverTimer,i=this.$refs.hoverZone;if(t&&i)if(t.contains(e.target)){clearTimeout(n);var r=this.$el.getBoundingClientRect(),o=r.left,s=e.clientX-o,a=this.$el,c=a.offsetWidth,l=a.offsetHeight,u=t.offsetTop,d=u+t.offsetHeight;i.innerHTML='\n          <path style="pointer-events: auto;" fill="transparent" d="M'+s+" "+u+" L"+c+" 0 V"+u+' Z" />\n          <path style="pointer-events: auto;" fill="transparent" d="M'+s+" "+d+" L"+c+" "+l+" V"+d+' Z" />\n        '}else n||(this.hoverTimer=setTimeout(this.clearHoverZone,this.panel.config.hoverThreshold))},clearHoverZone:function(){var e=this.$refs.hoverZone;e&&(e.innerHTML="")},renderEmptyText:function(e){return e("div",{class:"el-cascader-menu__empty-text"},[this.t("el.cascader.noData")])},renderNodeList:function(e){var t=this.menuId,n=this.panel.isHoverMenu,i={on:{}};n&&(i.on.expand=this.handleExpand);var r=this.nodes.map((function(n,r){var o=n.hasChildren;return e("cascader-node",c()([{key:n.uid,attrs:{node:n,"node-id":t+"-"+r,"aria-haspopup":o,"aria-owns":o?t:null}},i]))}));return[].concat(r,[n?e("svg",{ref:"hoverZone",class:"el-cascader-menu__hover-zone"}):null])}},render:function(e){var t=this.isEmpty,n=this.menuId,i={nativeOn:{}};return this.panel.isHoverMenu&&(i.nativeOn.mousemove=this.handleMouseMove),e("el-scrollbar",c()([{attrs:{tag:"ul",role:"menu",id:n,"wrap-class":"el-cascader-menu__wrap","view-class":{"el-cascader-menu__list":!0,"is-empty":t}},class:"el-cascader-menu"},i]),[t?this.renderEmptyText(e):this.renderNodeList(e)])}},w=I,O=Object(y["a"])(w,E,b,!1,null,null,null);O.options.__file="packages/cascader-panel/src/cascader-menu.vue";var k=O.exports,M=n(21),x=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var A=0,D=function(){function e(t,n,i){P(this,e),this.data=t,this.config=n,this.parent=i||null,this.level=this.parent?this.parent.level+1:1,this.uid=A++,this.initState(),this.initChildren()}return e.prototype.initState=function(){var e=this.config,t=e.value,n=e.label;this.value=this.data[t],this.label=this.data[n],this.pathNodes=this.calculatePathNodes(),this.path=this.pathNodes.map((function(e){return e.value})),this.pathLabels=this.pathNodes.map((function(e){return e.label})),this.loading=!1,this.loaded=!1},e.prototype.initChildren=function(){var t=this,n=this.config,i=n.children,r=this.data[i];this.hasChildren=Array.isArray(r),this.children=(r||[]).map((function(i){return new e(i,n,t)}))},e.prototype.calculatePathNodes=function(){var e=[this],t=this.parent;while(t)e.unshift(t),t=t.parent;return e},e.prototype.getPath=function(){return this.path},e.prototype.getValue=function(){return this.value},e.prototype.getValueByOption=function(){return this.config.emitPath?this.getPath():this.getValue()},e.prototype.getText=function(e,t){return e?this.pathLabels.join(t):this.label},e.prototype.isSameNode=function(e){var t=this.getValueByOption();return this.config.multiple&&Array.isArray(e)?e.some((function(e){return Object(g["isEqual"])(e,t)})):Object(g["isEqual"])(e,t)},e.prototype.broadcast=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r="onParent"+Object(g["capitalize"])(e);this.children.forEach((function(t){t&&(t.broadcast.apply(t,[e].concat(n)),t[r]&&t[r].apply(t,n))}))},e.prototype.emit=function(e){var t=this.parent,n="onChild"+Object(g["capitalize"])(e);if(t){for(var i=arguments.length,r=Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];t[n]&&t[n].apply(t,r),t.emit.apply(t,[e].concat(r))}},e.prototype.onParentCheck=function(e){this.isDisabled||this.setCheckState(e)},e.prototype.onChildCheck=function(){var e=this.children,t=e.filter((function(e){return!e.isDisabled})),n=!!t.length&&t.every((function(e){return e.checked}));this.setCheckState(n)},e.prototype.setCheckState=function(e){var t=this.children.length,n=this.children.reduce((function(e,t){var n=t.checked?1:t.indeterminate?.5:0;return e+n}),0);this.checked=e,this.indeterminate=n!==t&&n>0},e.prototype.syncCheckState=function(e){var t=this.getValueByOption(),n=this.isSameNode(e,t);this.doCheck(n)},e.prototype.doCheck=function(e){this.checked!==e&&(this.config.checkStrictly?this.checked=e:(this.broadcast("check",e),this.setCheckState(e),this.emit("check")))},x(e,[{key:"isDisabled",get:function(){var e=this.data,t=this.parent,n=this.config,i=n.disabled,r=n.checkStrictly;return e[i]||!r&&t&&t.isDisabled}},{key:"isLeaf",get:function(){var e=this.data,t=this.loaded,n=this.hasChildren,i=this.children,r=this.config,o=r.lazy,s=r.leaf;if(o){var a=Object(M["isDef"])(e[s])?e[s]:!!t&&!i.length;return this.hasChildren=!a,a}return!n}}]),e}(),N=D;function L(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var U=function e(t,n){return t.reduce((function(t,i){return i.isLeaf?t.push(i):(!n&&t.push(i),t=t.concat(e(i.children,n))),t}),[])},B=function(){function e(t,n){L(this,e),this.config=n,this.initNodes(t)}return e.prototype.initNodes=function(e){var t=this;e=Object(g["coerceTruthyValueToArray"])(e),this.nodes=e.map((function(e){return new N(e,t.config)})),this.flattedNodes=this.getFlattedNodes(!1,!1),this.leafNodes=this.getFlattedNodes(!0,!1)},e.prototype.appendNode=function(e,t){var n=new N(e,this.config,t),i=t?t.children:this.nodes;i.push(n)},e.prototype.appendNodes=function(e,t){var n=this;e=Object(g["coerceTruthyValueToArray"])(e),e.forEach((function(e){return n.appendNode(e,t)}))},e.prototype.getNodes=function(){return this.nodes},e.prototype.getFlattedNodes=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e?this.leafNodes:this.flattedNodes;return t?n:U(this.nodes,e)},e.prototype.getNodeByValue=function(e){var t=this.getFlattedNodes(!1,!this.config.lazy).filter((function(t){return Object(g["valueEquals"])(t.path,e)||t.value===e}));return t&&t.length?t[0]:null},e}(),V=B,j=n(9),F=n.n(j),$=n(40),H=n.n($),K=n(31),W=n.n(K),q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},G=H.a.keys,z={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:g["noop"],value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},Y=function(e){return!e.getAttribute("aria-owns")},J=function(e,t){var n=e.parentNode;if(n){var i=n.querySelectorAll('.el-cascader-node[tabindex="-1"]'),r=Array.prototype.indexOf.call(i,e);return i[r+t]||null}return null},X=function(e,t){if(e){var n=e.id.split("-");return Number(n[n.length-2])}},Q=function(e){e&&(e.focus(),!Y(e)&&e.click())},Z=function(e){if(e){var t=e.querySelector("input");t?t.click():Y(e)&&e.click()}},ee={name:"ElCascaderPanel",components:{CascaderMenu:k},props:{value:{},options:Array,props:Object,border:{type:Boolean,default:!0},renderLabel:Function},provide:function(){return{panel:this}},data:function(){return{checkedValue:null,checkedNodePaths:[],store:[],menus:[],activePath:[],loadCount:0}},computed:{config:function(){return F()(q({},z),this.props||{})},multiple:function(){return this.config.multiple},checkStrictly:function(){return this.config.checkStrictly},leafOnly:function(){return!this.checkStrictly},isHoverMenu:function(){return"hover"===this.config.expandTrigger},renderLabelFn:function(){return this.renderLabel||this.$scopedSlots.default}},watch:{options:{handler:function(){this.initStore()},immediate:!0,deep:!0},value:function(){this.syncCheckedValue(),this.checkStrictly&&this.calculateCheckedNodePaths()},checkedValue:function(e){Object(g["isEqual"])(e,this.value)||(this.checkStrictly&&this.calculateCheckedNodePaths(),this.$emit("input",e),this.$emit("change",e))}},mounted:function(){this.isEmptyValue(this.value)||this.syncCheckedValue()},methods:{initStore:function(){var e=this.config,t=this.options;e.lazy&&Object(g["isEmpty"])(t)?this.lazyLoad():(this.store=new V(t,e),this.menus=[this.store.getNodes()],this.syncMenuState())},syncCheckedValue:function(){var e=this.value,t=this.checkedValue;Object(g["isEqual"])(e,t)||(this.activePath=[],this.checkedValue=e,this.syncMenuState())},syncMenuState:function(){var e=this.multiple,t=this.checkStrictly;this.syncActivePath(),e&&this.syncMultiCheckState(),t&&this.calculateCheckedNodePaths(),this.$nextTick(this.scrollIntoView)},syncMultiCheckState:function(){var e=this,t=this.getFlattedNodes(this.leafOnly);t.forEach((function(t){t.syncCheckState(e.checkedValue)}))},isEmptyValue:function(e){var t=this.multiple,n=this.config,i=n.emitPath;return!(!t&&!i)&&Object(g["isEmpty"])(e)},syncActivePath:function(){var e=this,t=this.store,n=this.multiple,i=this.activePath,r=this.checkedValue;if(Object(g["isEmpty"])(i))if(this.isEmptyValue(r))this.activePath=[],this.menus=[t.getNodes()];else{var o=n?r[0]:r,s=this.getNodeByValue(o)||{},a=(s.pathNodes||[]).slice(0,-1);this.expandNodes(a)}else{var c=i.map((function(t){return e.getNodeByValue(t.getValue())}));this.expandNodes(c)}},expandNodes:function(e){var t=this;e.forEach((function(e){return t.handleExpand(e,!0)}))},calculateCheckedNodePaths:function(){var e=this,t=this.checkedValue,n=this.multiple,i=n?Object(g["coerceTruthyValueToArray"])(t):[t];this.checkedNodePaths=i.map((function(t){var n=e.getNodeByValue(t);return n?n.pathNodes:[]}))},handleKeyDown:function(e){var t=e.target,n=e.keyCode;switch(n){case G.up:var i=J(t,-1);Q(i);break;case G.down:var r=J(t,1);Q(r);break;case G.left:var o=this.$refs.menu[X(t)-1];if(o){var s=o.$el.querySelector('.el-cascader-node[aria-expanded="true"]');Q(s)}break;case G.right:var a=this.$refs.menu[X(t)+1];if(a){var c=a.$el.querySelector('.el-cascader-node[tabindex="-1"]');Q(c)}break;case G.enter:Z(t);break;case G.esc:case G.tab:this.$emit("close");break;default:return}},handleExpand:function(e,t){var n=this.activePath,i=e.level,r=n.slice(0,i-1),o=this.menus.slice(0,i);if(e.isLeaf||(r.push(e),o.push(e.children)),this.activePath=r,this.menus=o,!t){var s=r.map((function(e){return e.getValue()})),a=n.map((function(e){return e.getValue()}));Object(g["valueEquals"])(s,a)||(this.$emit("active-item-change",s),this.$emit("expand-change",s))}},handleCheckChange:function(e){this.checkedValue=e},lazyLoad:function(e,t){var n=this,i=this.config;e||(e=e||{root:!0,level:0},this.store=new V([],i),this.menus=[this.store.getNodes()]),e.loading=!0;var r=function(i){var r=e.root?null:e;if(i&&i.length&&n.store.appendNodes(i,r),e.loading=!1,e.loaded=!0,Array.isArray(n.checkedValue)){var o=n.checkedValue[n.loadCount++],s=n.config.value,a=n.config.leaf;if(Array.isArray(i)&&i.filter((function(e){return e[s]===o})).length>0){var c=n.store.getNodeByValue(o);c.data[a]||n.lazyLoad(c,(function(){n.handleExpand(c)})),n.loadCount===n.checkedValue.length&&n.$parent.computePresentText()}}t&&t(i)};i.lazyLoad(e,r)},calculateMultiCheckedValue:function(){this.checkedValue=this.getCheckedNodes(this.leafOnly).map((function(e){return e.getValueByOption()}))},scrollIntoView:function(){if(!this.$isServer){var e=this.$refs.menu||[];e.forEach((function(e){var t=e.$el;if(t){var n=t.querySelector(".el-scrollbar__wrap"),i=t.querySelector(".el-cascader-node.is-active")||t.querySelector(".el-cascader-node.in-active-path");W()(n,i)}}))}},getNodeByValue:function(e){return this.store.getNodeByValue(e)},getFlattedNodes:function(e){var t=!this.config.lazy;return this.store.getFlattedNodes(e,t)},getCheckedNodes:function(e){var t=this.checkedValue,n=this.multiple;if(n){var i=this.getFlattedNodes(e);return i.filter((function(e){return e.checked}))}return this.isEmptyValue(t)?[]:[this.getNodeByValue(t)]},clearCheckedNodes:function(){var e=this.config,t=this.leafOnly,n=e.multiple,i=e.emitPath;n?(this.getCheckedNodes(t).filter((function(e){return!e.isDisabled})).forEach((function(e){return e.doCheck(!1)})),this.calculateMultiCheckedValue()):this.checkedValue=i?[]:null}}},te=ee,ne=Object(y["a"])(te,i,r,!1,null,null,null);ne.options.__file="packages/cascader-panel/src/cascader-panel.vue";var ie=ne.exports;ie.install=function(e){e.component(ie.name,ie)};t["default"]=ie},6:function(e,t){e.exports=n("6b7c")},9:function(e,t){e.exports=n("7f4d")}})},4840:function(e,t,n){var i=n("825a"),r=n("5087"),o=n("b622"),s=o("species");e.exports=function(e,t){var n,o=i(e).constructor;return void 0===o||void 0==(n=i(o)[s])?t:r(n)}},"485a":function(e,t,n){var i=n("da84"),r=n("c65b"),o=n("1626"),s=n("861d"),a=i.TypeError;e.exports=function(e,t){var n,i;if("string"===t&&o(n=e.toString)&&!s(i=r(n,e)))return i;if(o(n=e.valueOf)&&!s(i=r(n,e)))return i;if("string"!==t&&o(n=e.toString)&&!s(i=r(n,e)))return i;throw a("Can't convert object to primitive value")}},4897:function(e,t,n){"use strict";t.__esModule=!0,t.i18n=t.use=t.t=void 0;var i=n("f0d9"),r=d(i),o=n("2b0e"),s=d(o),a=n("3c4e"),c=d(a),l=n("9d7e"),u=d(l);function d(e){return e&&e.__esModule?e:{default:e}}var h=(0,u.default)(s.default),p=r.default,f=!1,g=function(){var e=Object.getPrototypeOf(this||s.default).$t;if("function"===typeof e&&s.default.locale)return f||(f=!0,s.default.locale(s.default.config.lang,(0,c.default)(p,s.default.locale(s.default.config.lang)||{},{clone:!0}))),e.apply(this,arguments)},m=t.t=function(e,t){var n=g.apply(this,arguments);if(null!==n&&void 0!==n)return n;for(var i=e.split("."),r=p,o=0,s=i.length;o<s;o++){var a=i[o];if(n=r[a],o===s-1)return h(n,t);if(!n)return"";r=n}return""},_=t.use=function(e){p=e||p},v=t.i18n=function(e){g=e||g};t.default={use:_,t:m,i18n:v}},4930:function(e,t,n){var i=n("2d00"),r=n("d039");e.exports=!!Object.getOwnPropertySymbols&&!r((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&i&&i<41}))},"4a0c":function(e){e.exports=JSON.parse('{"_args":[["axios@0.21.4","/Users/cuifengbo/work/RCRTC-Git/rcrtc-web"]],"_from":"axios@0.21.4","_id":"axios@0.21.4","_inBundle":false,"_integrity":"sha512-ut5vewkiu8jjGBdqpM44XxjuCjq9LAKeHVmoVfHVzy8eHgxxq8SbAVQNovDA8mVi05kP0Ea/n/UzcSHcTJQfNg==","_location":"/axios","_phantomChildren":{},"_requested":{"type":"version","registry":true,"raw":"axios@0.21.4","name":"axios","escapedName":"axios","rawSpec":"0.21.4","saveSpec":null,"fetchSpec":"0.21.4"},"_requiredBy":["/"],"_resolved":"https://registry.npmjs.org/axios/-/axios-0.21.4.tgz","_spec":"0.21.4","_where":"/Users/cuifengbo/work/RCRTC-Git/rcrtc-web","author":{"name":"Matt Zabriskie"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"bugs":{"url":"https://github.com/axios/axios/issues"},"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}],"dependencies":{"follow-redirects":"^1.14.0"},"description":"Promise based HTTP client for the browser and node.js","devDependencies":{"coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^8.2.1","sinon":"^4.5.0","terser-webpack-plugin":"^4.2.3","typescript":"^4.0.5","url-search-params":"^0.10.0","webpack":"^4.44.2","webpack-dev-server":"^3.11.0"},"homepage":"https://axios-http.com","jsdelivr":"dist/axios.min.js","keywords":["xhr","http","ajax","promise","node"],"license":"MIT","main":"index.js","name":"axios","repository":{"type":"git","url":"git+https://github.com/axios/axios.git"},"scripts":{"build":"NODE_ENV=production grunt build","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","examples":"node ./examples/server.js","fix":"eslint --fix lib/**/*.js","postversion":"git push && git push --tags","preversion":"npm test","start":"node ./sandbox/server.js","test":"grunt test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json"},"typings":"./index.d.ts","unpkg":"dist/axios.min.js","version":"0.21.4"}')},"4a7b":function(e,t,n){"use strict";var i=n("c532");e.exports=function(e,t){t=t||{};var n={},r=["url","method","data"],o=["headers","auth","proxy","params"],s=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],a=["validateStatus"];function c(e,t){return i.isPlainObject(e)&&i.isPlainObject(t)?i.merge(e,t):i.isPlainObject(t)?i.merge({},t):i.isArray(t)?t.slice():t}function l(r){i.isUndefined(t[r])?i.isUndefined(e[r])||(n[r]=c(void 0,e[r])):n[r]=c(e[r],t[r])}i.forEach(r,(function(e){i.isUndefined(t[e])||(n[e]=c(void 0,t[e]))})),i.forEach(o,l),i.forEach(s,(function(r){i.isUndefined(t[r])?i.isUndefined(e[r])||(n[r]=c(void 0,e[r])):n[r]=c(void 0,t[r])})),i.forEach(a,(function(i){i in t?n[i]=c(e[i],t[i]):i in e&&(n[i]=c(void 0,e[i]))}));var u=r.concat(o).concat(s).concat(a),d=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===u.indexOf(e)}));return i.forEach(d,l),n}},"4b26":function(e,t,n){"use strict";t.__esModule=!0;var i=n("2b0e"),r=s(i),o=n("5924");function s(e){return e&&e.__esModule?e:{default:e}}var a=!1,c=!1,l=void 0,u=function(){if(!r.default.prototype.$isServer){var e=h.modalDom;return e?a=!0:(a=!1,e=document.createElement("div"),h.modalDom=e,e.addEventListener("touchmove",(function(e){e.preventDefault(),e.stopPropagation()})),e.addEventListener("click",(function(){h.doOnModalClick&&h.doOnModalClick()}))),e}},d={},h={modalFade:!0,getInstance:function(e){return d[e]},register:function(e,t){e&&t&&(d[e]=t)},deregister:function(e){e&&(d[e]=null,delete d[e])},nextZIndex:function(){return h.zIndex++},modalStack:[],doOnModalClick:function(){var e=h.modalStack[h.modalStack.length-1];if(e){var t=h.getInstance(e.id);t&&t.closeOnClickModal&&t.close()}},openModal:function(e,t,n,i,s){if(!r.default.prototype.$isServer&&e&&void 0!==t){this.modalFade=s;for(var c=this.modalStack,l=0,d=c.length;l<d;l++){var h=c[l];if(h.id===e)return}var p=u();if((0,o.addClass)(p,"v-modal"),this.modalFade&&!a&&(0,o.addClass)(p,"v-modal-enter"),i){var f=i.trim().split(/\s+/);f.forEach((function(e){return(0,o.addClass)(p,e)}))}setTimeout((function(){(0,o.removeClass)(p,"v-modal-enter")}),200),n&&n.parentNode&&11!==n.parentNode.nodeType?n.parentNode.appendChild(p):document.body.appendChild(p),t&&(p.style.zIndex=t),p.tabIndex=0,p.style.display="",this.modalStack.push({id:e,zIndex:t,modalClass:i})}},closeModal:function(e){var t=this.modalStack,n=u();if(t.length>0){var i=t[t.length-1];if(i.id===e){if(i.modalClass){var r=i.modalClass.trim().split(/\s+/);r.forEach((function(e){return(0,o.removeClass)(n,e)}))}t.pop(),t.length>0&&(n.style.zIndex=t[t.length-1].zIndex)}else for(var s=t.length-1;s>=0;s--)if(t[s].id===e){t.splice(s,1);break}}0===t.length&&(this.modalFade&&(0,o.addClass)(n,"v-modal-leave"),setTimeout((function(){0===t.length&&(n.parentNode&&n.parentNode.removeChild(n),n.style.display="none",h.modalDom=void 0),(0,o.removeClass)(n,"v-modal-leave")}),200))}};Object.defineProperty(h,"zIndex",{configurable:!0,get:function(){return c||(l=l||(r.default.prototype.$ELEMENT||{}).zIndex||2e3,c=!0),l},set:function(e){l=e}});var p=function(){if(!r.default.prototype.$isServer&&h.modalStack.length>0){var e=h.modalStack[h.modalStack.length-1];if(!e)return;var t=h.getInstance(e.id);return t}};r.default.prototype.$isServer||window.addEventListener("keydown",(function(e){if(27===e.keyCode){var t=p();t&&t.closeOnPressEscape&&(t.handleClose?t.handleClose():t.handleAction?t.handleAction("cancel"):t.close())}})),t.default=h},"4b8b":function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},"4d20":function(e,t,n){var i=n("1917"),r=n("10db"),o=n("6ca1"),s=n("3397"),a=n("9c0e"),c=n("faf5"),l=Object.getOwnPropertyDescriptor;t.f=n("0bad")?l:function(e,t){if(e=o(e),t=s(t,!0),c)try{return l(e,t)}catch(n){}if(a(e,t))return r(!i.f.call(e,t),e[t])}},"4d64":function(e,t,n){var i=n("fc6a"),r=n("23cb"),o=n("07fa"),s=function(e){return function(t,n,s){var a,c=i(t),l=o(c),u=r(s,l);if(e&&n!=n){while(l>u)if(a=c[u++],a!=a)return!0}else for(;l>u;u++)if((e||u in c)&&c[u]===n)return e||u||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},"4d88":function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},"4de4":function(e,t,n){"use strict";var i=n("23e7"),r=n("b727").filter,o=n("1dde"),s=o("filter");i({target:"Array",proto:!0,forced:!s},{filter:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(e,t,n){"use strict";var i=n("da84"),r=n("0366"),o=n("c65b"),s=n("7b0b"),a=n("9bdd"),c=n("e95a"),l=n("68ee"),u=n("07fa"),d=n("8418"),h=n("9a1f"),p=n("35a1"),f=i.Array;e.exports=function(e){var t=s(e),n=l(this),i=arguments.length,g=i>1?arguments[1]:void 0,m=void 0!==g;m&&(g=r(g,i>2?arguments[2]:void 0));var _,v,y,C,E,b,T=p(t),S=0;if(!T||this==f&&c(T))for(_=u(t),v=n?new this(_):f(_);_>S;S++)b=m?g(t[S],S):t[S],d(v,S,b);else for(C=h(t,T),E=C.next,v=n?new this:[];!(y=o(E,C)).done;S++)b=m?a(C,g,[y.value,S],!0):y.value,d(v,S,b);return v.length=S,v}},"4e4b":function(e,t,n){e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=61)}({0:function(e,t,n){"use strict";function i(e,t,n,i,r,o,s,a){var c,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),i&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=c):r&&(c=a?function(){r.call(this,this.$root.$options.shadowRoot)}:r),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}n.d(t,"a",(function(){return i}))},10:function(e,t){e.exports=n("f3ad")},12:function(e,t){e.exports=n("417f")},15:function(e,t){e.exports=n("14e9")},16:function(e,t){e.exports=n("4010")},18:function(e,t){e.exports=n("0e15")},21:function(e,t){e.exports=n("d397")},22:function(e,t){e.exports=n("12f2")},3:function(e,t){e.exports=n("8122")},31:function(e,t){e.exports=n("2a5e")},33:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-select-dropdown__item",class:{selected:e.itemSelected,"is-disabled":e.disabled||e.groupDisabled||e.limitReached,hover:e.hover},on:{mouseenter:e.hoverItem,click:function(t){return t.stopPropagation(),e.selectOptionClick(t)}}},[e._t("default",[n("span",[e._v(e._s(e.currentLabel))])])],2)},r=[];i._withStripped=!0;var o=n(4),s=n.n(o),a=n(3),c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l={mixins:[s.a],name:"ElOption",componentName:"ElOption",inject:["select"],props:{value:{required:!0},label:[String,Number],created:Boolean,disabled:{type:Boolean,default:!1}},data:function(){return{index:-1,groupDisabled:!1,visible:!0,hitState:!1,hover:!1}},computed:{isObject:function(){return"[object object]"===Object.prototype.toString.call(this.value).toLowerCase()},currentLabel:function(){return this.label||(this.isObject?"":this.value)},currentValue:function(){return this.value||this.label||""},itemSelected:function(){return this.select.multiple?this.contains(this.select.value,this.value):this.isEqual(this.value,this.select.value)},limitReached:function(){return!!this.select.multiple&&(!this.itemSelected&&(this.select.value||[]).length>=this.select.multipleLimit&&this.select.multipleLimit>0)}},watch:{currentLabel:function(){this.created||this.select.remote||this.dispatch("ElSelect","setSelected")},value:function(e,t){var n=this.select,i=n.remote,r=n.valueKey;if(!this.created&&!i){if(r&&"object"===("undefined"===typeof e?"undefined":c(e))&&"object"===("undefined"===typeof t?"undefined":c(t))&&e[r]===t[r])return;this.dispatch("ElSelect","setSelected")}}},methods:{isEqual:function(e,t){if(this.isObject){var n=this.select.valueKey;return Object(a["getValueByPath"])(e,n)===Object(a["getValueByPath"])(t,n)}return e===t},contains:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];if(this.isObject){var n=this.select.valueKey;return e&&e.some((function(e){return Object(a["getValueByPath"])(e,n)===Object(a["getValueByPath"])(t,n)}))}return e&&e.indexOf(t)>-1},handleGroupDisabled:function(e){this.groupDisabled=e},hoverItem:function(){this.disabled||this.groupDisabled||(this.select.hoverIndex=this.select.options.indexOf(this))},selectOptionClick:function(){!0!==this.disabled&&!0!==this.groupDisabled&&this.dispatch("ElSelect","handleOptionClick",[this,!0])},queryChange:function(e){this.visible=new RegExp(Object(a["escapeRegexpString"])(e),"i").test(this.currentLabel)||this.created,this.visible||this.select.filteredOptionsCount--}},created:function(){this.select.options.push(this),this.select.cachedOptions.push(this),this.select.optionsCount++,this.select.filteredOptionsCount++,this.$on("queryChange",this.queryChange),this.$on("handleGroupDisabled",this.handleGroupDisabled)},beforeDestroy:function(){var e=this.select,t=e.selected,n=e.multiple,i=n?t:[t],r=this.select.cachedOptions.indexOf(this),o=i.indexOf(this);r>-1&&o<0&&this.select.cachedOptions.splice(r,1),this.select.onOptionDestroy(this.select.options.indexOf(this))}},u=l,d=n(0),h=Object(d["a"])(u,i,r,!1,null,null,null);h.options.__file="packages/select/src/option.vue";t["a"]=h.exports},37:function(e,t){e.exports=n("8bbc")},4:function(e,t){e.exports=n("d010")},5:function(e,t){e.exports=n("e974")},6:function(e,t){e.exports=n("6b7c")},61:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleClose,expression:"handleClose"}],staticClass:"el-select",class:[e.selectSize?"el-select--"+e.selectSize:""],on:{click:function(t){return t.stopPropagation(),e.toggleMenu(t)}}},[e.multiple?n("div",{ref:"tags",staticClass:"el-select__tags",style:{"max-width":e.inputWidth-32+"px",width:"100%"}},[e.collapseTags&&e.selected.length?n("span",[n("el-tag",{attrs:{closable:!e.selectDisabled,size:e.collapseTagSize,hit:e.selected[0].hitState,type:"info","disable-transitions":""},on:{close:function(t){e.deleteTag(t,e.selected[0])}}},[n("span",{staticClass:"el-select__tags-text"},[e._v(e._s(e.selected[0].currentLabel))])]),e.selected.length>1?n("el-tag",{attrs:{closable:!1,size:e.collapseTagSize,type:"info","disable-transitions":""}},[n("span",{staticClass:"el-select__tags-text"},[e._v("+ "+e._s(e.selected.length-1))])]):e._e()],1):e._e(),e.collapseTags?e._e():n("transition-group",{on:{"after-leave":e.resetInputHeight}},e._l(e.selected,(function(t){return n("el-tag",{key:e.getValueKey(t),attrs:{closable:!e.selectDisabled,size:e.collapseTagSize,hit:t.hitState,type:"info","disable-transitions":""},on:{close:function(n){e.deleteTag(n,t)}}},[n("span",{staticClass:"el-select__tags-text"},[e._v(e._s(t.currentLabel))])])})),1),e.filterable?n("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],ref:"input",staticClass:"el-select__input",class:[e.selectSize?"is-"+e.selectSize:""],style:{"flex-grow":"1",width:e.inputLength/(e.inputWidth-32)+"%","max-width":e.inputWidth-42+"px"},attrs:{type:"text",disabled:e.selectDisabled,autocomplete:e.autoComplete||e.autocomplete},domProps:{value:e.query},on:{focus:e.handleFocus,blur:function(t){e.softFocus=!1},keyup:e.managePlaceholder,keydown:[e.resetInputState,function(t){if(!("button"in t)&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"]))return null;t.preventDefault(),e.navigateOptions("next")},function(t){if(!("button"in t)&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"]))return null;t.preventDefault(),e.navigateOptions("prev")},function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.selectOption(t))},function(t){if(!("button"in t)&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;t.stopPropagation(),t.preventDefault(),e.visible=!1},function(t){return!("button"in t)&&e._k(t.keyCode,"delete",[8,46],t.key,["Backspace","Delete","Del"])?null:e.deletePrevTag(t)},function(t){if(!("button"in t)&&e._k(t.keyCode,"tab",9,t.key,"Tab"))return null;e.visible=!1}],compositionstart:e.handleComposition,compositionupdate:e.handleComposition,compositionend:e.handleComposition,input:[function(t){t.target.composing||(e.query=t.target.value)},e.debouncedQueryChange]}}):e._e()],1):e._e(),n("el-input",{ref:"reference",class:{"is-focus":e.visible},attrs:{type:"text",placeholder:e.currentPlaceholder,name:e.name,id:e.id,autocomplete:e.autoComplete||e.autocomplete,size:e.selectSize,disabled:e.selectDisabled,readonly:e.readonly,"validate-event":!1,tabindex:e.multiple&&e.filterable?"-1":null},on:{focus:e.handleFocus,blur:e.handleBlur,input:e.debouncedOnInputChange},nativeOn:{keydown:[function(t){if(!("button"in t)&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"]))return null;t.stopPropagation(),t.preventDefault(),e.navigateOptions("next")},function(t){if(!("button"in t)&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"]))return null;t.stopPropagation(),t.preventDefault(),e.navigateOptions("prev")},function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.selectOption(t))},function(t){if(!("button"in t)&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;t.stopPropagation(),t.preventDefault(),e.visible=!1},function(t){if(!("button"in t)&&e._k(t.keyCode,"tab",9,t.key,"Tab"))return null;e.visible=!1}],mouseenter:function(t){e.inputHovering=!0},mouseleave:function(t){e.inputHovering=!1}},model:{value:e.selectedLabel,callback:function(t){e.selectedLabel=t},expression:"selectedLabel"}},[e.$slots.prefix?n("template",{slot:"prefix"},[e._t("prefix")],2):e._e(),n("template",{slot:"suffix"},[n("i",{directives:[{name:"show",rawName:"v-show",value:!e.showClose,expression:"!showClose"}],class:["el-select__caret","el-input__icon","el-icon-"+e.iconClass]}),e.showClose?n("i",{staticClass:"el-select__caret el-input__icon el-icon-circle-close",on:{click:e.handleClearClick}}):e._e()])],2),n("transition",{attrs:{name:"el-zoom-in-top"},on:{"before-enter":e.handleMenuEnter,"after-leave":e.doDestroy}},[n("el-select-menu",{directives:[{name:"show",rawName:"v-show",value:e.visible&&!1!==e.emptyText,expression:"visible && emptyText !== false"}],ref:"popper",attrs:{"append-to-body":e.popperAppendToBody}},[n("el-scrollbar",{directives:[{name:"show",rawName:"v-show",value:e.options.length>0&&!e.loading,expression:"options.length > 0 && !loading"}],ref:"scrollbar",class:{"is-empty":!e.allowCreate&&e.query&&0===e.filteredOptionsCount},attrs:{tag:"ul","wrap-class":"el-select-dropdown__wrap","view-class":"el-select-dropdown__list"}},[e.showNewOption?n("el-option",{attrs:{value:e.query,created:""}}):e._e(),e._t("default")],2),e.emptyText&&(!e.allowCreate||e.loading||e.allowCreate&&0===e.options.length)?[e.$slots.empty?e._t("empty"):n("p",{staticClass:"el-select-dropdown__empty"},[e._v("\n          "+e._s(e.emptyText)+"\n        ")])]:e._e()],2)],1)],1)},r=[];i._withStripped=!0;var o=n(4),s=n.n(o),a=n(22),c=n.n(a),l=n(6),u=n.n(l),d=n(10),h=n.n(d),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-select-dropdown el-popper",class:[{"is-multiple":e.$parent.multiple},e.popperClass],style:{minWidth:e.minWidth}},[e._t("default")],2)},f=[];p._withStripped=!0;var g=n(5),m=n.n(g),_={name:"ElSelectDropdown",componentName:"ElSelectDropdown",mixins:[m.a],props:{placement:{default:"bottom-start"},boundariesPadding:{default:0},popperOptions:{default:function(){return{gpuAcceleration:!1}}},visibleArrow:{default:!0},appendToBody:{type:Boolean,default:!0}},data:function(){return{minWidth:""}},computed:{popperClass:function(){return this.$parent.popperClass}},watch:{"$parent.inputWidth":function(){this.minWidth=this.$parent.$el.getBoundingClientRect().width+"px"}},mounted:function(){var e=this;this.referenceElm=this.$parent.$refs.reference.$el,this.$parent.popperElm=this.popperElm=this.$el,this.$on("updatePopper",(function(){e.$parent.visible&&e.updatePopper()})),this.$on("destroyPopper",this.destroyPopper)}},v=_,y=n(0),C=Object(y["a"])(v,p,f,!1,null,null,null);C.options.__file="packages/select/src/select-dropdown.vue";var E=C.exports,b=n(33),T=n(37),S=n.n(T),R=n(15),I=n.n(R),w=n(18),O=n.n(w),k=n(12),M=n.n(k),x=n(16),P=n(31),A=n.n(P),D=n(3),N={data:function(){return{hoverOption:-1}},computed:{optionsAllDisabled:function(){return this.options.filter((function(e){return e.visible})).every((function(e){return e.disabled}))}},watch:{hoverIndex:function(e){var t=this;"number"===typeof e&&e>-1&&(this.hoverOption=this.options[e]||{}),this.options.forEach((function(e){e.hover=t.hoverOption===e}))}},methods:{navigateOptions:function(e){var t=this;if(this.visible){if(0!==this.options.length&&0!==this.filteredOptionsCount&&!this.optionsAllDisabled){"next"===e?(this.hoverIndex++,this.hoverIndex===this.options.length&&(this.hoverIndex=0)):"prev"===e&&(this.hoverIndex--,this.hoverIndex<0&&(this.hoverIndex=this.options.length-1));var n=this.options[this.hoverIndex];!0!==n.disabled&&!0!==n.groupDisabled&&n.visible||this.navigateOptions(e),this.$nextTick((function(){return t.scrollToOption(t.hoverOption)}))}}else this.visible=!0}}},L=n(21),U={mixins:[s.a,u.a,c()("reference"),N],name:"ElSelect",componentName:"ElSelect",inject:{elForm:{default:""},elFormItem:{default:""}},provide:function(){return{select:this}},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},readonly:function(){return!this.filterable||this.multiple||!Object(D["isIE"])()&&!Object(D["isEdge"])()&&!this.visible},showClose:function(){var e=this.multiple?Array.isArray(this.value)&&this.value.length>0:void 0!==this.value&&null!==this.value&&""!==this.value,t=this.clearable&&!this.selectDisabled&&this.inputHovering&&e;return t},iconClass:function(){return this.remote&&this.filterable?"":this.visible?"arrow-up is-reverse":"arrow-up"},debounce:function(){return this.remote?300:0},emptyText:function(){return this.loading?this.loadingText||this.t("el.select.loading"):(!this.remote||""!==this.query||0!==this.options.length)&&(this.filterable&&this.query&&this.options.length>0&&0===this.filteredOptionsCount?this.noMatchText||this.t("el.select.noMatch"):0===this.options.length?this.noDataText||this.t("el.select.noData"):null)},showNewOption:function(){var e=this,t=this.options.filter((function(e){return!e.created})).some((function(t){return t.currentLabel===e.query}));return this.filterable&&this.allowCreate&&""!==this.query&&!t},selectSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},selectDisabled:function(){return this.disabled||(this.elForm||{}).disabled},collapseTagSize:function(){return["small","mini"].indexOf(this.selectSize)>-1?"mini":"small"},propPlaceholder:function(){return"undefined"!==typeof this.placeholder?this.placeholder:this.t("el.select.placeholder")}},components:{ElInput:h.a,ElSelectMenu:E,ElOption:b["a"],ElTag:S.a,ElScrollbar:I.a},directives:{Clickoutside:M.a},props:{name:String,id:String,value:{required:!0},autocomplete:{type:String,default:"off"},autoComplete:{type:String,validator:function(e){return!0}},automaticDropdown:Boolean,size:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:String,remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String,required:!1},defaultFirstOption:Boolean,reserveKeyword:Boolean,valueKey:{type:String,default:"value"},collapseTags:Boolean,popperAppendToBody:{type:Boolean,default:!0}},data:function(){return{options:[],cachedOptions:[],createdLabel:null,createdSelected:!1,selected:this.multiple?[]:{},inputLength:20,inputWidth:0,initialInputHeight:0,cachedPlaceHolder:"",optionsCount:0,filteredOptionsCount:0,visible:!1,softFocus:!1,selectedLabel:"",hoverIndex:-1,query:"",previousQuery:null,inputHovering:!1,currentPlaceholder:"",menuVisibleOnFocus:!1,isOnComposition:!1,isSilentBlur:!1}},watch:{selectDisabled:function(){var e=this;this.$nextTick((function(){e.resetInputHeight()}))},propPlaceholder:function(e){this.cachedPlaceHolder=this.currentPlaceholder=e},value:function(e,t){this.multiple&&(this.resetInputHeight(),e&&e.length>0||this.$refs.input&&""!==this.query?this.currentPlaceholder="":this.currentPlaceholder=this.cachedPlaceHolder,this.filterable&&!this.reserveKeyword&&(this.query="",this.handleQueryChange(this.query))),this.setSelected(),this.filterable&&!this.multiple&&(this.inputLength=20),Object(D["valueEquals"])(e,t)||this.dispatch("ElFormItem","el.form.change",e)},visible:function(e){var t=this;e?(this.broadcast("ElSelectDropdown","updatePopper"),this.filterable&&(this.query=this.remote?"":this.selectedLabel,this.handleQueryChange(this.query),this.multiple?this.$refs.input.focus():(this.remote||(this.broadcast("ElOption","queryChange",""),this.broadcast("ElOptionGroup","queryChange")),this.selectedLabel&&(this.currentPlaceholder=this.selectedLabel,this.selectedLabel="")))):(this.broadcast("ElSelectDropdown","destroyPopper"),this.$refs.input&&this.$refs.input.blur(),this.query="",this.previousQuery=null,this.selectedLabel="",this.inputLength=20,this.menuVisibleOnFocus=!1,this.resetHoverIndex(),this.$nextTick((function(){t.$refs.input&&""===t.$refs.input.value&&0===t.selected.length&&(t.currentPlaceholder=t.cachedPlaceHolder)})),this.multiple||(this.selected&&(this.filterable&&this.allowCreate&&this.createdSelected&&this.createdLabel?this.selectedLabel=this.createdLabel:this.selectedLabel=this.selected.currentLabel,this.filterable&&(this.query=this.selectedLabel)),this.filterable&&(this.currentPlaceholder=this.cachedPlaceHolder))),this.$emit("visible-change",e)},options:function(){var e=this;if(!this.$isServer){this.$nextTick((function(){e.broadcast("ElSelectDropdown","updatePopper")})),this.multiple&&this.resetInputHeight();var t=this.$el.querySelectorAll("input");-1===[].indexOf.call(t,document.activeElement)&&this.setSelected(),this.defaultFirstOption&&(this.filterable||this.remote)&&this.filteredOptionsCount&&this.checkDefaultFirstOption()}}},methods:{handleComposition:function(e){var t=this,n=e.target.value;if("compositionend"===e.type)this.isOnComposition=!1,this.$nextTick((function(e){return t.handleQueryChange(n)}));else{var i=n[n.length-1]||"";this.isOnComposition=!Object(L["isKorean"])(i)}},handleQueryChange:function(e){var t=this;this.previousQuery===e||this.isOnComposition||(null!==this.previousQuery||"function"!==typeof this.filterMethod&&"function"!==typeof this.remoteMethod?(this.previousQuery=e,this.$nextTick((function(){t.visible&&t.broadcast("ElSelectDropdown","updatePopper")})),this.hoverIndex=-1,this.multiple&&this.filterable&&this.$nextTick((function(){var e=15*t.$refs.input.value.length+20;t.inputLength=t.collapseTags?Math.min(50,e):e,t.managePlaceholder(),t.resetInputHeight()})),this.remote&&"function"===typeof this.remoteMethod?(this.hoverIndex=-1,this.remoteMethod(e)):"function"===typeof this.filterMethod?(this.filterMethod(e),this.broadcast("ElOptionGroup","queryChange")):(this.filteredOptionsCount=this.optionsCount,this.broadcast("ElOption","queryChange",e),this.broadcast("ElOptionGroup","queryChange")),this.defaultFirstOption&&(this.filterable||this.remote)&&this.filteredOptionsCount&&this.checkDefaultFirstOption()):this.previousQuery=e)},scrollToOption:function(e){var t=Array.isArray(e)&&e[0]?e[0].$el:e.$el;if(this.$refs.popper&&t){var n=this.$refs.popper.$el.querySelector(".el-select-dropdown__wrap");A()(n,t)}this.$refs.scrollbar&&this.$refs.scrollbar.handleScroll()},handleMenuEnter:function(){var e=this;this.$nextTick((function(){return e.scrollToOption(e.selected)}))},emitChange:function(e){Object(D["valueEquals"])(this.value,e)||this.$emit("change",e)},getOption:function(e){for(var t=void 0,n="[object object]"===Object.prototype.toString.call(e).toLowerCase(),i="[object null]"===Object.prototype.toString.call(e).toLowerCase(),r="[object undefined]"===Object.prototype.toString.call(e).toLowerCase(),o=this.cachedOptions.length-1;o>=0;o--){var s=this.cachedOptions[o],a=n?Object(D["getValueByPath"])(s.value,this.valueKey)===Object(D["getValueByPath"])(e,this.valueKey):s.value===e;if(a){t=s;break}}if(t)return t;var c=n||i||r?"":String(e),l={value:e,currentLabel:c};return this.multiple&&(l.hitState=!1),l},setSelected:function(){var e=this;if(!this.multiple){var t=this.getOption(this.value);return t.created?(this.createdLabel=t.currentLabel,this.createdSelected=!0):this.createdSelected=!1,this.selectedLabel=t.currentLabel,this.selected=t,void(this.filterable&&(this.query=this.selectedLabel))}var n=[];Array.isArray(this.value)&&this.value.forEach((function(t){n.push(e.getOption(t))})),this.selected=n,this.$nextTick((function(){e.resetInputHeight()}))},handleFocus:function(e){this.softFocus?this.softFocus=!1:((this.automaticDropdown||this.filterable)&&(this.visible=!0,this.filterable&&(this.menuVisibleOnFocus=!0)),this.$emit("focus",e))},blur:function(){this.visible=!1,this.$refs.reference.blur()},handleBlur:function(e){var t=this;setTimeout((function(){t.isSilentBlur?t.isSilentBlur=!1:t.$emit("blur",e)}),50),this.softFocus=!1},handleClearClick:function(e){this.deleteSelected(e)},doDestroy:function(){this.$refs.popper&&this.$refs.popper.doDestroy()},handleClose:function(){this.visible=!1},toggleLastOptionHitState:function(e){if(Array.isArray(this.selected)){var t=this.selected[this.selected.length-1];if(t)return!0===e||!1===e?(t.hitState=e,e):(t.hitState=!t.hitState,t.hitState)}},deletePrevTag:function(e){if(e.target.value.length<=0&&!this.toggleLastOptionHitState()){var t=this.value.slice();t.pop(),this.$emit("input",t),this.emitChange(t)}},managePlaceholder:function(){""!==this.currentPlaceholder&&(this.currentPlaceholder=this.$refs.input.value?"":this.cachedPlaceHolder)},resetInputState:function(e){8!==e.keyCode&&this.toggleLastOptionHitState(!1),this.inputLength=15*this.$refs.input.value.length+20,this.resetInputHeight()},resetInputHeight:function(){var e=this;this.collapseTags&&!this.filterable||this.$nextTick((function(){if(e.$refs.reference){var t=e.$refs.reference.$el.childNodes,n=[].filter.call(t,(function(e){return"INPUT"===e.tagName}))[0],i=e.$refs.tags,r=i?Math.round(i.getBoundingClientRect().height):0,o=e.initialInputHeight||40;n.style.height=0===e.selected.length?o+"px":Math.max(i?r+(r>o?6:0):0,o)+"px",e.visible&&!1!==e.emptyText&&e.broadcast("ElSelectDropdown","updatePopper")}}))},resetHoverIndex:function(){var e=this;setTimeout((function(){e.multiple?e.selected.length>0?e.hoverIndex=Math.min.apply(null,e.selected.map((function(t){return e.options.indexOf(t)}))):e.hoverIndex=-1:e.hoverIndex=e.options.indexOf(e.selected)}),300)},handleOptionSelect:function(e,t){var n=this;if(this.multiple){var i=(this.value||[]).slice(),r=this.getValueIndex(i,e.value);r>-1?i.splice(r,1):(this.multipleLimit<=0||i.length<this.multipleLimit)&&i.push(e.value),this.$emit("input",i),this.emitChange(i),e.created&&(this.query="",this.handleQueryChange(""),this.inputLength=20),this.filterable&&this.$refs.input.focus()}else this.$emit("input",e.value),this.emitChange(e.value),this.visible=!1;this.isSilentBlur=t,this.setSoftFocus(),this.visible||this.$nextTick((function(){n.scrollToOption(e)}))},setSoftFocus:function(){this.softFocus=!0;var e=this.$refs.input||this.$refs.reference;e&&e.focus()},getValueIndex:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],n="[object object]"===Object.prototype.toString.call(t).toLowerCase();if(n){var i=this.valueKey,r=-1;return e.some((function(e,n){return Object(D["getValueByPath"])(e,i)===Object(D["getValueByPath"])(t,i)&&(r=n,!0)})),r}return e.indexOf(t)},toggleMenu:function(){this.selectDisabled||(this.menuVisibleOnFocus?this.menuVisibleOnFocus=!1:this.visible=!this.visible,this.visible&&(this.$refs.input||this.$refs.reference).focus())},selectOption:function(){this.visible?this.options[this.hoverIndex]&&this.handleOptionSelect(this.options[this.hoverIndex]):this.toggleMenu()},deleteSelected:function(e){e.stopPropagation();var t=this.multiple?[]:"";this.$emit("input",t),this.emitChange(t),this.visible=!1,this.$emit("clear")},deleteTag:function(e,t){var n=this.selected.indexOf(t);if(n>-1&&!this.selectDisabled){var i=this.value.slice();i.splice(n,1),this.$emit("input",i),this.emitChange(i),this.$emit("remove-tag",t.value)}e.stopPropagation()},onInputChange:function(){this.filterable&&this.query!==this.selectedLabel&&(this.query=this.selectedLabel,this.handleQueryChange(this.query))},onOptionDestroy:function(e){e>-1&&(this.optionsCount--,this.filteredOptionsCount--,this.options.splice(e,1))},resetInputWidth:function(){this.inputWidth=this.$refs.reference.$el.getBoundingClientRect().width},handleResize:function(){this.resetInputWidth(),this.multiple&&this.resetInputHeight()},checkDefaultFirstOption:function(){this.hoverIndex=-1;for(var e=!1,t=this.options.length-1;t>=0;t--)if(this.options[t].created){e=!0,this.hoverIndex=t;break}if(!e)for(var n=0;n!==this.options.length;++n){var i=this.options[n];if(this.query){if(!i.disabled&&!i.groupDisabled&&i.visible){this.hoverIndex=n;break}}else if(i.itemSelected){this.hoverIndex=n;break}}},getValueKey:function(e){return"[object object]"!==Object.prototype.toString.call(e.value).toLowerCase()?e.value:Object(D["getValueByPath"])(e.value,this.valueKey)}},created:function(){var e=this;this.cachedPlaceHolder=this.currentPlaceholder=this.propPlaceholder,this.multiple&&!Array.isArray(this.value)&&this.$emit("input",[]),!this.multiple&&Array.isArray(this.value)&&this.$emit("input",""),this.debouncedOnInputChange=O()(this.debounce,(function(){e.onInputChange()})),this.debouncedQueryChange=O()(this.debounce,(function(t){e.handleQueryChange(t.target.value)})),this.$on("handleOptionClick",this.handleOptionSelect),this.$on("setSelected",this.setSelected)},mounted:function(){var e=this;this.multiple&&Array.isArray(this.value)&&this.value.length>0&&(this.currentPlaceholder=""),Object(x["addResizeListener"])(this.$el,this.handleResize);var t=this.$refs.reference;if(t&&t.$el){var n={medium:36,small:32,mini:28},i=t.$el.querySelector("input");this.initialInputHeight=i.getBoundingClientRect().height||n[this.selectSize]}this.remote&&this.multiple&&this.resetInputHeight(),this.$nextTick((function(){t&&t.$el&&(e.inputWidth=t.$el.getBoundingClientRect().width)})),this.setSelected()},beforeDestroy:function(){this.$el&&this.handleResize&&Object(x["removeResizeListener"])(this.$el,this.handleResize)}},B=U,V=Object(y["a"])(B,i,r,!1,null,null,null);V.options.__file="packages/select/src/select.vue";var j=V.exports;j.install=function(e){e.component(j.name,j)};t["default"]=j}})},"4e71":function(e,t,n){n("e198")("observable")},"4ebc":function(e,t,n){var i=n("4d88");e.exports=Array.isArray||function(e){return"Array"==i(e)}},5087:function(e,t,n){var i=n("da84"),r=n("68ee"),o=n("0d51"),s=i.TypeError;e.exports=function(e){if(r(e))return e;throw s(o(e)+" is not a constructor")}},"50c4":function(e,t,n){var i=n("5926"),r=Math.min;e.exports=function(e){return e>0?r(i(e),9007199254740991):0}},"511f":function(e,t,n){n("0b99"),n("658f"),e.exports=n("fcd4").f("iterator")},5128:function(e,t,n){"use strict";t.__esModule=!0,t.PopupManager=void 0;var i=n("2b0e"),r=h(i),o=n("7f4d"),s=h(o),a=n("4b26"),c=h(a),l=n("e62d"),u=h(l),d=n("5924");function h(e){return e&&e.__esModule?e:{default:e}}var p=1,f=void 0;t.default={props:{visible:{type:Boolean,default:!1},openDelay:{},closeDelay:{},zIndex:{},modal:{type:Boolean,default:!1},modalFade:{type:Boolean,default:!0},modalClass:{},modalAppendToBody:{type:Boolean,default:!1},lockScroll:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!1}},beforeMount:function(){this._popupId="popup-"+p++,c.default.register(this._popupId,this)},beforeDestroy:function(){c.default.deregister(this._popupId),c.default.closeModal(this._popupId),this.restoreBodyStyle()},data:function(){return{opened:!1,bodyPaddingRight:null,computedBodyPaddingRight:0,withoutHiddenClass:!0,rendered:!1}},watch:{visible:function(e){var t=this;if(e){if(this._opening)return;this.rendered?this.open():(this.rendered=!0,r.default.nextTick((function(){t.open()})))}else this.close()}},methods:{open:function(e){var t=this;this.rendered||(this.rendered=!0);var n=(0,s.default)({},this.$props||this,e);this._closeTimer&&(clearTimeout(this._closeTimer),this._closeTimer=null),clearTimeout(this._openTimer);var i=Number(n.openDelay);i>0?this._openTimer=setTimeout((function(){t._openTimer=null,t.doOpen(n)}),i):this.doOpen(n)},doOpen:function(e){if(!this.$isServer&&(!this.willOpen||this.willOpen())&&!this.opened){this._opening=!0;var t=this.$el,n=e.modal,i=e.zIndex;if(i&&(c.default.zIndex=i),n&&(this._closing&&(c.default.closeModal(this._popupId),this._closing=!1),c.default.openModal(this._popupId,c.default.nextZIndex(),this.modalAppendToBody?void 0:t,e.modalClass,e.modalFade),e.lockScroll)){this.withoutHiddenClass=!(0,d.hasClass)(document.body,"el-popup-parent--hidden"),this.withoutHiddenClass&&(this.bodyPaddingRight=document.body.style.paddingRight,this.computedBodyPaddingRight=parseInt((0,d.getStyle)(document.body,"paddingRight"),10)),f=(0,u.default)();var r=document.documentElement.clientHeight<document.body.scrollHeight,o=(0,d.getStyle)(document.body,"overflowY");f>0&&(r||"scroll"===o)&&this.withoutHiddenClass&&(document.body.style.paddingRight=this.computedBodyPaddingRight+f+"px"),(0,d.addClass)(document.body,"el-popup-parent--hidden")}"static"===getComputedStyle(t).position&&(t.style.position="absolute"),t.style.zIndex=c.default.nextZIndex(),this.opened=!0,this.onOpen&&this.onOpen(),this.doAfterOpen()}},doAfterOpen:function(){this._opening=!1},close:function(){var e=this;if(!this.willClose||this.willClose()){null!==this._openTimer&&(clearTimeout(this._openTimer),this._openTimer=null),clearTimeout(this._closeTimer);var t=Number(this.closeDelay);t>0?this._closeTimer=setTimeout((function(){e._closeTimer=null,e.doClose()}),t):this.doClose()}},doClose:function(){this._closing=!0,this.onClose&&this.onClose(),this.lockScroll&&setTimeout(this.restoreBodyStyle,200),this.opened=!1,this.doAfterClose()},doAfterClose:function(){c.default.closeModal(this._popupId),this._closing=!1},restoreBodyStyle:function(){this.modal&&this.withoutHiddenClass&&(document.body.style.paddingRight=this.bodyPaddingRight,(0,d.removeClass)(document.body,"el-popup-parent--hidden")),this.withoutHiddenClass=!0}}},t.PopupManager=c.default},"512c":function(e,t,n){var i=n("ef08"),r=n("5524"),o=n("9c0c"),s=n("051b"),a=n("9c0e"),c="prototype",l=function(e,t,n){var u,d,h,p=e&l.F,f=e&l.G,g=e&l.S,m=e&l.P,_=e&l.B,v=e&l.W,y=f?r:r[t]||(r[t]={}),C=y[c],E=f?i:g?i[t]:(i[t]||{})[c];for(u in f&&(n=t),n)d=!p&&E&&void 0!==E[u],d&&a(y,u)||(h=d?E[u]:n[u],y[u]=f&&"function"!=typeof E[u]?n[u]:_&&d?o(h,i):v&&E[u]==h?function(e){var t=function(t,n,i){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,i)}return e.apply(this,arguments)};return t[c]=e[c],t}(h):m&&"function"==typeof h?o(Function.call,h):h,m&&((y.virtual||(y.virtual={}))[u]=h,e&l.R&&C&&!C[u]&&s(C,u,h)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},5270:function(e,t,n){"use strict";var i=n("c532"),r=n("c401"),o=n("2e67"),s=n("2444");function a(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){a(e),e.headers=e.headers||{},e.data=r.call(e,e.data,e.headers,e.transformRequest),e.headers=i.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),i.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]}));var t=e.adapter||s.adapter;return t(e).then((function(t){return a(e),t.data=r.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(a(e),t&&t.response&&(t.response.data=r.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},5319:function(e,t,n){"use strict";var i=n("2ba4"),r=n("c65b"),o=n("e330"),s=n("d784"),a=n("d039"),c=n("825a"),l=n("1626"),u=n("5926"),d=n("50c4"),h=n("577e"),p=n("1d80"),f=n("8aa5"),g=n("dc4a"),m=n("0cb2"),_=n("14c3"),v=n("b622"),y=v("replace"),C=Math.max,E=Math.min,b=o([].concat),T=o([].push),S=o("".indexOf),R=o("".slice),I=function(e){return void 0===e?e:String(e)},w=function(){return"$0"==="a".replace(/./,"$0")}(),O=function(){return!!/./[y]&&""===/./[y]("a","$0")}(),k=!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));s("replace",(function(e,t,n){var o=O?"$":"$0";return[function(e,n){var i=p(this),o=void 0==e?void 0:g(e,y);return o?r(o,e,i,n):r(t,h(i),e,n)},function(e,r){var s=c(this),a=h(e);if("string"==typeof r&&-1===S(r,o)&&-1===S(r,"$<")){var p=n(t,s,a,r);if(p.done)return p.value}var g=l(r);g||(r=h(r));var v=s.global;if(v){var y=s.unicode;s.lastIndex=0}var w=[];while(1){var O=_(s,a);if(null===O)break;if(T(w,O),!v)break;var k=h(O[0]);""===k&&(s.lastIndex=f(a,d(s.lastIndex),y))}for(var M="",x=0,P=0;P<w.length;P++){O=w[P];for(var A=h(O[0]),D=C(E(u(O.index),a.length),0),N=[],L=1;L<O.length;L++)T(N,I(O[L]));var U=O.groups;if(g){var B=b([A],N,D,a);void 0!==U&&T(B,U);var V=h(i(r,void 0,B))}else V=m(A,a,D,N,U,r);D>=x&&(M+=R(a,x,D)+V,x=D+A.length)}return M+R(a,x)}]}),!k||!w||O)},5488:function(e,t,n){"use strict";t.__esModule=!0;var i=n("5924");function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(){r(this,e)}return e.prototype.beforeEnter=function(e){(0,i.addClass)(e,"collapse-transition"),e.dataset||(e.dataset={}),e.dataset.oldPaddingTop=e.style.paddingTop,e.dataset.oldPaddingBottom=e.style.paddingBottom,e.style.height="0",e.style.paddingTop=0,e.style.paddingBottom=0},e.prototype.enter=function(e){e.dataset.oldOverflow=e.style.overflow,0!==e.scrollHeight?(e.style.height=e.scrollHeight+"px",e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom):(e.style.height="",e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom),e.style.overflow="hidden"},e.prototype.afterEnter=function(e){(0,i.removeClass)(e,"collapse-transition"),e.style.height="",e.style.overflow=e.dataset.oldOverflow},e.prototype.beforeLeave=function(e){e.dataset||(e.dataset={}),e.dataset.oldPaddingTop=e.style.paddingTop,e.dataset.oldPaddingBottom=e.style.paddingBottom,e.dataset.oldOverflow=e.style.overflow,e.style.height=e.scrollHeight+"px",e.style.overflow="hidden"},e.prototype.leave=function(e){0!==e.scrollHeight&&((0,i.addClass)(e,"collapse-transition"),e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0)},e.prototype.afterLeave=function(e){(0,i.removeClass)(e,"collapse-transition"),e.style.height="",e.style.overflow=e.dataset.oldOverflow,e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom},e}();t.default={name:"ElCollapseTransition",functional:!0,render:function(e,t){var n=t.children,i={on:new o};return e("transition",i,n)}}},5524:function(e,t){var n=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=n)},5530:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n("b64b"),n("a4d3"),n("4de4"),n("e439"),n("159b"),n("dbb4");function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},5692:function(e,t,n){var i=n("c430"),r=n("c6cd");(e.exports=function(e,t){return r[e]||(r[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.19.0",mode:i?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},"56ef":function(e,t,n){var i=n("d066"),r=n("e330"),o=n("241c"),s=n("7418"),a=n("825a"),c=r([].concat);e.exports=i("Reflect","ownKeys")||function(e){var t=o.f(a(e)),n=s.f;return n?c(t,n(e)):t}},"577e":function(e,t,n){var i=n("da84"),r=n("f5df"),o=i.String;e.exports=function(e){if("Symbol"===r(e))throw TypeError("Cannot convert a Symbol value to a string");return o(e)}},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,n){var i=n("e330"),r=n("1d80"),o=n("577e"),s=n("5899"),a=i("".replace),c="["+s+"]",l=RegExp("^"+c+c+"*"),u=RegExp(c+c+"*$"),d=function(e){return function(t){var n=o(r(t));return 1&e&&(n=a(n,l,"")),2&e&&(n=a(n,u,"")),n}};e.exports={start:d(1),end:d(2),trim:d(3)}},5924:function(e,t,n){"use strict";t.__esModule=!0,t.isInContainer=t.getScrollContainer=t.isScroll=t.getStyle=t.once=t.off=t.on=void 0;var i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.hasClass=g,t.addClass=m,t.removeClass=_,t.setStyle=y;var r=n("2b0e"),o=s(r);function s(e){return e&&e.__esModule?e:{default:e}}var a=o.default.prototype.$isServer,c=/([\:\-\_]+(.))/g,l=/^moz([A-Z])/,u=a?0:Number(document.documentMode),d=function(e){return(e||"").replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,"")},h=function(e){return e.replace(c,(function(e,t,n,i){return i?n.toUpperCase():n})).replace(l,"Moz$1")},p=t.on=function(){return!a&&document.addEventListener?function(e,t,n){e&&t&&n&&e.addEventListener(t,n,!1)}:function(e,t,n){e&&t&&n&&e.attachEvent("on"+t,n)}}(),f=t.off=function(){return!a&&document.removeEventListener?function(e,t,n){e&&t&&e.removeEventListener(t,n,!1)}:function(e,t,n){e&&t&&e.detachEvent("on"+t,n)}}();t.once=function(e,t,n){var i=function i(){n&&n.apply(this,arguments),f(e,t,i)};p(e,t,i)};function g(e,t){if(!e||!t)return!1;if(-1!==t.indexOf(" "))throw new Error("className should not contain space.");return e.classList?e.classList.contains(t):(" "+e.className+" ").indexOf(" "+t+" ")>-1}function m(e,t){if(e){for(var n=e.className,i=(t||"").split(" "),r=0,o=i.length;r<o;r++){var s=i[r];s&&(e.classList?e.classList.add(s):g(e,s)||(n+=" "+s))}e.classList||e.setAttribute("class",n)}}function _(e,t){if(e&&t){for(var n=t.split(" "),i=" "+e.className+" ",r=0,o=n.length;r<o;r++){var s=n[r];s&&(e.classList?e.classList.remove(s):g(e,s)&&(i=i.replace(" "+s+" "," ")))}e.classList||e.setAttribute("class",d(i))}}var v=t.getStyle=u<9?function(e,t){if(!a){if(!e||!t)return null;t=h(t),"float"===t&&(t="styleFloat");try{switch(t){case"opacity":try{return e.filters.item("alpha").opacity/100}catch(n){return 1}default:return e.style[t]||e.currentStyle?e.currentStyle[t]:null}}catch(n){return e.style[t]}}}:function(e,t){if(!a){if(!e||!t)return null;t=h(t),"float"===t&&(t="cssFloat");try{var n=document.defaultView.getComputedStyle(e,"");return e.style[t]||n?n[t]:null}catch(i){return e.style[t]}}};function y(e,t,n){if(e&&t)if("object"===("undefined"===typeof t?"undefined":i(t)))for(var r in t)t.hasOwnProperty(r)&&y(e,r,t[r]);else t=h(t),"opacity"===t&&u<9?e.style.filter=isNaN(n)?"":"alpha(opacity="+100*n+")":e.style[t]=n}var C=t.isScroll=function(e,t){if(!a){var n=null!==t&&void 0!==t,i=v(e,n?t?"overflow-y":"overflow-x":"overflow");return i.match(/(scroll|auto|overlay)/)}};t.getScrollContainer=function(e,t){if(!a){var n=e;while(n){if([window,document,document.documentElement].includes(n))return window;if(C(n,t))return n;n=n.parentNode}return n}},t.isInContainer=function(e,t){if(a||!e||!t)return!1;var n=e.getBoundingClientRect(),i=void 0;return i=[window,document,document.documentElement,null,void 0].includes(t)?{top:0,right:window.innerWidth,bottom:window.innerHeight,left:0}:t.getBoundingClientRect(),n.top<i.bottom&&n.bottom>i.top&&n.right>i.left&&n.left<i.right}},5926:function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){var t=+e;return t!==t||0===t?0:(t>0?i:n)(t)}},"597f":function(e,t){e.exports=function(e,t,n,i){var r,o=0;function s(){var s=this,a=Number(new Date)-o,c=arguments;function l(){o=Number(new Date),n.apply(s,c)}function u(){r=void 0}i&&!r&&l(),r&&clearTimeout(r),void 0===i&&a>e?l():!0!==t&&(r=setTimeout(i?u:l,void 0===i?e-a:e))}return"boolean"!==typeof t&&(i=n,n=t,t=void 0),s}},"59ed":function(e,t,n){var i=n("da84"),r=n("1626"),o=n("0d51"),s=i.TypeError;e.exports=function(e){if(r(e))return e;throw s(o(e)+" is not a function")}},"5a94":function(e,t,n){var i=n("b367")("keys"),r=n("8b1a");e.exports=function(e){return i[e]||(i[e]=r(e))}},"5c6c":function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"5c96":function(e,t,n){e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=45)}([function(e,t){e.exports=n("d940")},function(e,t){e.exports=n("5924")},function(e,t){e.exports=n("8122")},function(e,t){e.exports=n("d010")},function(e,t){e.exports=n("6b7c")},function(e,t){e.exports=n("e974")},function(e,t){e.exports=n("2b0e")},function(e,t){e.exports=n("7f4d")},function(e,t){e.exports=n("f3ad")},function(e,t){e.exports=n("2bb5")},function(e,t){e.exports=n("417f")},function(e,t){e.exports=n("5128")},function(e,t){e.exports=n("4897")},function(e,t){e.exports=n("eedf")},function(e,t){e.exports=n("4010")},function(e,t){e.exports=n("a742")},function(e,t){e.exports=n("0e15")},function(e,t){e.exports=n("dcdc")},function(e,t){e.exports=n("14e9")},function(e,t){e.exports=n("d397")},function(e,t){e.exports=n("d7d1")},function(e,t){e.exports=n("5488")},function(e,t){e.exports=n("41f8")},function(e,t){e.exports=n("12f2")},function(e,t){e.exports=n("92fa")},function(e,t){e.exports=n("597f")},function(e,t){e.exports=n("299c")},function(e,t){e.exports=n("2a5e")},function(e,t){e.exports=n("845f")},function(e,t){e.exports=n("8bbc")},function(e,t){e.exports=n("e62d")},function(e,t){e.exports=n("7fc1")},function(e,t){e.exports=n("c56a")},function(e,t){e.exports=n("c284")},function(e,t){e.exports=n("e452")},function(e,t){e.exports=n("9619")},function(e,t){e.exports=n("4e4b")},function(e,t){e.exports=n("e772")},function(e,t){e.exports=n("c098")},function(e,t){e.exports=n("722f")},function(e,t){e.exports=n("a15e")},function(e,t){e.exports=n("e450")},function(e,t){e.exports=n("4726")},function(e,t){e.exports=n("f494")},function(e,t){e.exports=n("6ac9")},function(e,t,n){e.exports=n(46)},function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{staticClass:"el-pager",on:{click:e.onPagerClick}},[e.pageCount>0?n("li",{staticClass:"number",class:{active:1===e.currentPage,disabled:e.disabled}},[e._v("1")]):e._e(),e.showPrevMore?n("li",{staticClass:"el-icon more btn-quickprev",class:[e.quickprevIconClass,{disabled:e.disabled}],on:{mouseenter:function(t){e.onMouseenter("left")},mouseleave:function(t){e.quickprevIconClass="el-icon-more"}}}):e._e(),e._l(e.pagers,(function(t){return n("li",{key:t,staticClass:"number",class:{active:e.currentPage===t,disabled:e.disabled}},[e._v(e._s(t))])})),e.showNextMore?n("li",{staticClass:"el-icon more btn-quicknext",class:[e.quicknextIconClass,{disabled:e.disabled}],on:{mouseenter:function(t){e.onMouseenter("right")},mouseleave:function(t){e.quicknextIconClass="el-icon-more"}}}):e._e(),e.pageCount>1?n("li",{staticClass:"number",class:{active:e.currentPage===e.pageCount,disabled:e.disabled}},[e._v(e._s(e.pageCount))]):e._e()],2)},r=[];i._withStripped=!0;var o={name:"ElPager",props:{currentPage:Number,pageCount:Number,pagerCount:Number,disabled:Boolean},watch:{showPrevMore:function(e){e||(this.quickprevIconClass="el-icon-more")},showNextMore:function(e){e||(this.quicknextIconClass="el-icon-more")}},methods:{onPagerClick:function(e){var t=e.target;if("UL"!==t.tagName&&!this.disabled){var n=Number(e.target.textContent),i=this.pageCount,r=this.currentPage,o=this.pagerCount-2;-1!==t.className.indexOf("more")&&(-1!==t.className.indexOf("quickprev")?n=r-o:-1!==t.className.indexOf("quicknext")&&(n=r+o)),isNaN(n)||(n<1&&(n=1),n>i&&(n=i)),n!==r&&this.$emit("change",n)}},onMouseenter:function(e){this.disabled||("left"===e?this.quickprevIconClass="el-icon-d-arrow-left":this.quicknextIconClass="el-icon-d-arrow-right")}},computed:{pagers:function(){var e=this.pagerCount,t=(e-1)/2,n=Number(this.currentPage),i=Number(this.pageCount),r=!1,o=!1;i>e&&(n>e-t&&(r=!0),n<i-t&&(o=!0));var s=[];if(r&&!o)for(var a=i-(e-2),c=a;c<i;c++)s.push(c);else if(!r&&o)for(var l=2;l<e;l++)s.push(l);else if(r&&o)for(var u=Math.floor(e/2)-1,d=n-u;d<=n+u;d++)s.push(d);else for(var h=2;h<i;h++)s.push(h);return this.showPrevMore=r,this.showNextMore=o,s}},data:function(){return{current:null,showPrevMore:!1,showNextMore:!1,quicknextIconClass:"el-icon-more",quickprevIconClass:"el-icon-more"}}},s=o;function a(e,t,n,i,r,o,s,a){var c,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),i&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=c):r&&(c=a?function(){r.call(this,this.$root.$options.shadowRoot)}:r),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}var c=a(s,i,r,!1,null,null,null);c.options.__file="packages/pagination/src/pager.vue";var l=c.exports,u=n(36),d=n.n(u),h=n(37),p=n.n(h),f=n(8),g=n.n(f),m=n(4),_=n.n(m),v=n(2),y={name:"ElPagination",props:{pageSize:{type:Number,default:10},small:Boolean,total:Number,pageCount:Number,pagerCount:{type:Number,validator:function(e){return(0|e)===e&&e>4&&e<22&&e%2===1},default:7},currentPage:{type:Number,default:1},layout:{default:"prev, pager, next, jumper, ->, total"},pageSizes:{type:Array,default:function(){return[10,20,30,40,50,100]}},popperClass:String,prevText:String,nextText:String,background:Boolean,disabled:Boolean,hideOnSinglePage:Boolean},data:function(){return{internalCurrentPage:1,internalPageSize:0,lastEmittedPage:-1,userChangePageSize:!1}},render:function(e){var t=this.layout;if(!t)return null;if(this.hideOnSinglePage&&(!this.internalPageCount||1===this.internalPageCount))return null;var n=e("div",{class:["el-pagination",{"is-background":this.background,"el-pagination--small":this.small}]}),i={prev:e("prev"),jumper:e("jumper"),pager:e("pager",{attrs:{currentPage:this.internalCurrentPage,pageCount:this.internalPageCount,pagerCount:this.pagerCount,disabled:this.disabled},on:{change:this.handleCurrentChange}}),next:e("next"),sizes:e("sizes",{attrs:{pageSizes:this.pageSizes}}),slot:e("slot",[this.$slots.default?this.$slots.default:""]),total:e("total")},r=t.split(",").map((function(e){return e.trim()})),o=e("div",{class:"el-pagination__rightwrapper"}),s=!1;return n.children=n.children||[],o.children=o.children||[],r.forEach((function(e){"->"!==e?s?o.children.push(i[e]):n.children.push(i[e]):s=!0})),s&&n.children.unshift(o),n},components:{Prev:{render:function(e){return e("button",{attrs:{type:"button",disabled:this.$parent.disabled||this.$parent.internalCurrentPage<=1},class:"btn-prev",on:{click:this.$parent.prev}},[this.$parent.prevText?e("span",[this.$parent.prevText]):e("i",{class:"el-icon el-icon-arrow-left"})])}},Next:{render:function(e){return e("button",{attrs:{type:"button",disabled:this.$parent.disabled||this.$parent.internalCurrentPage===this.$parent.internalPageCount||0===this.$parent.internalPageCount},class:"btn-next",on:{click:this.$parent.next}},[this.$parent.nextText?e("span",[this.$parent.nextText]):e("i",{class:"el-icon el-icon-arrow-right"})])}},Sizes:{mixins:[_.a],props:{pageSizes:Array},watch:{pageSizes:{immediate:!0,handler:function(e,t){Object(v["valueEquals"])(e,t)||Array.isArray(e)&&(this.$parent.internalPageSize=e.indexOf(this.$parent.pageSize)>-1?this.$parent.pageSize:this.pageSizes[0])}}},render:function(e){var t=this;return e("span",{class:"el-pagination__sizes"},[e("el-select",{attrs:{value:this.$parent.internalPageSize,popperClass:this.$parent.popperClass||"",size:"mini",disabled:this.$parent.disabled},on:{input:this.handleChange}},[this.pageSizes.map((function(n){return e("el-option",{attrs:{value:n,label:n+t.t("el.pagination.pagesize")}})}))])])},components:{ElSelect:d.a,ElOption:p.a},methods:{handleChange:function(e){e!==this.$parent.internalPageSize&&(this.$parent.internalPageSize=e=parseInt(e,10),this.$parent.userChangePageSize=!0,this.$parent.$emit("update:pageSize",e),this.$parent.$emit("size-change",e))}}},Jumper:{mixins:[_.a],components:{ElInput:g.a},data:function(){return{userInput:null}},watch:{"$parent.internalCurrentPage":function(){this.userInput=null}},methods:{handleKeyup:function(e){var t=e.keyCode,n=e.target;13===t&&this.handleChange(n.value)},handleInput:function(e){this.userInput=e},handleChange:function(e){this.$parent.internalCurrentPage=this.$parent.getValidCurrentPage(e),this.$parent.emitChange(),this.userInput=null}},render:function(e){return e("span",{class:"el-pagination__jump"},[this.t("el.pagination.goto"),e("el-input",{class:"el-pagination__editor is-in-pagination",attrs:{min:1,max:this.$parent.internalPageCount,value:null!==this.userInput?this.userInput:this.$parent.internalCurrentPage,type:"number",disabled:this.$parent.disabled},nativeOn:{keyup:this.handleKeyup},on:{input:this.handleInput,change:this.handleChange}}),this.t("el.pagination.pageClassifier")])}},Total:{mixins:[_.a],render:function(e){return"number"===typeof this.$parent.total?e("span",{class:"el-pagination__total"},[this.t("el.pagination.total",{total:this.$parent.total})]):""}},Pager:l},methods:{handleCurrentChange:function(e){this.internalCurrentPage=this.getValidCurrentPage(e),this.userChangePageSize=!0,this.emitChange()},prev:function(){if(!this.disabled){var e=this.internalCurrentPage-1;this.internalCurrentPage=this.getValidCurrentPage(e),this.$emit("prev-click",this.internalCurrentPage),this.emitChange()}},next:function(){if(!this.disabled){var e=this.internalCurrentPage+1;this.internalCurrentPage=this.getValidCurrentPage(e),this.$emit("next-click",this.internalCurrentPage),this.emitChange()}},getValidCurrentPage:function(e){e=parseInt(e,10);var t="number"===typeof this.internalPageCount,n=void 0;return t?e<1?n=1:e>this.internalPageCount&&(n=this.internalPageCount):(isNaN(e)||e<1)&&(n=1),(void 0===n&&isNaN(e)||0===n)&&(n=1),void 0===n?e:n},emitChange:function(){var e=this;this.$nextTick((function(){(e.internalCurrentPage!==e.lastEmittedPage||e.userChangePageSize)&&(e.$emit("current-change",e.internalCurrentPage),e.lastEmittedPage=e.internalCurrentPage,e.userChangePageSize=!1)}))}},computed:{internalPageCount:function(){return"number"===typeof this.total?Math.max(1,Math.ceil(this.total/this.internalPageSize)):"number"===typeof this.pageCount?Math.max(1,this.pageCount):null}},watch:{currentPage:{immediate:!0,handler:function(e){this.internalCurrentPage=this.getValidCurrentPage(e)}},pageSize:{immediate:!0,handler:function(e){this.internalPageSize=isNaN(e)?10:e}},internalCurrentPage:{immediate:!0,handler:function(e){this.$emit("update:currentPage",e),this.lastEmittedPage=-1}},internalPageCount:function(e){var t=this.internalCurrentPage;e>0&&0===t?this.internalCurrentPage=1:t>e&&(this.internalCurrentPage=0===e?1:e,this.userChangePageSize&&this.emitChange()),this.userChangePageSize=!1}},install:function(e){e.component(y.name,y)}},C=y,E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"dialog-fade"},on:{"after-enter":e.afterEnter,"after-leave":e.afterLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-dialog__wrapper",on:{click:function(t){return t.target!==t.currentTarget?null:e.handleWrapperClick(t)}}},[n("div",{key:e.key,ref:"dialog",class:["el-dialog",{"is-fullscreen":e.fullscreen,"el-dialog--center":e.center},e.customClass],style:e.style,attrs:{role:"dialog","aria-modal":"true","aria-label":e.title||"dialog"}},[n("div",{staticClass:"el-dialog__header"},[e._t("title",[n("span",{staticClass:"el-dialog__title"},[e._v(e._s(e.title))])]),e.showClose?n("button",{staticClass:"el-dialog__headerbtn",attrs:{type:"button","aria-label":"Close"},on:{click:e.handleClose}},[n("i",{staticClass:"el-dialog__close el-icon el-icon-close"})]):e._e()],2),e.rendered?n("div",{staticClass:"el-dialog__body"},[e._t("default")],2):e._e(),e.$slots.footer?n("div",{staticClass:"el-dialog__footer"},[e._t("footer")],2):e._e()])])])},b=[];E._withStripped=!0;var T=n(11),S=n.n(T),R=n(9),I=n.n(R),w=n(3),O=n.n(w),k={name:"ElDialog",mixins:[S.a,O.a,I.a],props:{title:{type:String,default:""},modal:{type:Boolean,default:!0},modalAppendToBody:{type:Boolean,default:!0},appendToBody:{type:Boolean,default:!1},lockScroll:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},width:String,fullscreen:Boolean,customClass:{type:String,default:""},top:{type:String,default:"15vh"},beforeClose:Function,center:{type:Boolean,default:!1},destroyOnClose:Boolean},data:function(){return{closed:!1,key:0}},watch:{visible:function(e){var t=this;e?(this.closed=!1,this.$emit("open"),this.$el.addEventListener("scroll",this.updatePopper),this.$nextTick((function(){t.$refs.dialog.scrollTop=0})),this.appendToBody&&document.body.appendChild(this.$el)):(this.$el.removeEventListener("scroll",this.updatePopper),this.closed||this.$emit("close"),this.destroyOnClose&&this.$nextTick((function(){t.key++})))}},computed:{style:function(){var e={};return this.fullscreen||(e.marginTop=this.top,this.width&&(e.width=this.width)),e}},methods:{getMigratingConfig:function(){return{props:{size:"size is removed."}}},handleWrapperClick:function(){this.closeOnClickModal&&this.handleClose()},handleClose:function(){"function"===typeof this.beforeClose?this.beforeClose(this.hide):this.hide()},hide:function(e){!1!==e&&(this.$emit("update:visible",!1),this.$emit("close"),this.closed=!0)},updatePopper:function(){this.broadcast("ElSelectDropdown","updatePopper"),this.broadcast("ElDropdownMenu","updatePopper")},afterEnter:function(){this.$emit("opened")},afterLeave:function(){this.$emit("closed")}},mounted:function(){this.visible&&(this.rendered=!0,this.open(),this.appendToBody&&document.body.appendChild(this.$el))},destroyed:function(){this.appendToBody&&this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}},M=k,x=a(M,E,b,!1,null,null,null);x.options.__file="packages/dialog/src/component.vue";var P=x.exports;P.install=function(e){e.component(P.name,P)};var A=P,D=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.close,expression:"close"}],staticClass:"el-autocomplete",attrs:{"aria-haspopup":"listbox",role:"combobox","aria-expanded":e.suggestionVisible,"aria-owns":e.id}},[n("el-input",e._b({ref:"input",on:{input:e.handleInput,change:e.handleChange,focus:e.handleFocus,blur:e.handleBlur,clear:e.handleClear},nativeOn:{keydown:[function(t){if(!("button"in t)&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"]))return null;t.preventDefault(),e.highlight(e.highlightedIndex-1)},function(t){if(!("button"in t)&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"]))return null;t.preventDefault(),e.highlight(e.highlightedIndex+1)},function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleKeyEnter(t)},function(t){return!("button"in t)&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:e.close(t)}]}},"el-input",[e.$props,e.$attrs],!1),[e.$slots.prepend?n("template",{slot:"prepend"},[e._t("prepend")],2):e._e(),e.$slots.append?n("template",{slot:"append"},[e._t("append")],2):e._e(),e.$slots.prefix?n("template",{slot:"prefix"},[e._t("prefix")],2):e._e(),e.$slots.suffix?n("template",{slot:"suffix"},[e._t("suffix")],2):e._e()],2),n("el-autocomplete-suggestions",{ref:"suggestions",class:[e.popperClass?e.popperClass:""],attrs:{"visible-arrow":"","popper-options":e.popperOptions,"append-to-body":e.popperAppendToBody,placement:e.placement,id:e.id}},e._l(e.suggestions,(function(t,i){return n("li",{key:i,class:{highlighted:e.highlightedIndex===i},attrs:{id:e.id+"-item-"+i,role:"option","aria-selected":e.highlightedIndex===i},on:{click:function(n){e.select(t)}}},[e._t("default",[e._v("\n        "+e._s(t[e.valueKey])+"\n      ")],{item:t})],2)})),0)],1)},N=[];D._withStripped=!0;var L=n(16),U=n.n(L),B=n(10),V=n.n(B),j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":e.doDestroy}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.showPopper,expression:"showPopper"}],staticClass:"el-autocomplete-suggestion el-popper",class:{"is-loading":!e.parent.hideLoading&&e.parent.loading},style:{width:e.dropdownWidth},attrs:{role:"region"}},[n("el-scrollbar",{attrs:{tag:"ul","wrap-class":"el-autocomplete-suggestion__wrap","view-class":"el-autocomplete-suggestion__list"}},[!e.parent.hideLoading&&e.parent.loading?n("li",[n("i",{staticClass:"el-icon-loading"})]):e._t("default")],2)],1)])},F=[];j._withStripped=!0;var $=n(5),H=n.n($),K=n(18),W=n.n(K),q={components:{ElScrollbar:W.a},mixins:[H.a,O.a],componentName:"ElAutocompleteSuggestions",data:function(){return{parent:this.$parent,dropdownWidth:""}},props:{options:{default:function(){return{gpuAcceleration:!1}}},id:String},methods:{select:function(e){this.dispatch("ElAutocomplete","item-click",e)}},updated:function(){var e=this;this.$nextTick((function(t){e.popperJS&&e.updatePopper()}))},mounted:function(){this.$parent.popperElm=this.popperElm=this.$el,this.referenceElm=this.$parent.$refs.input.$refs.input||this.$parent.$refs.input.$refs.textarea,this.referenceList=this.$el.querySelector(".el-autocomplete-suggestion__list"),this.referenceList.setAttribute("role","listbox"),this.referenceList.setAttribute("id",this.id)},created:function(){var e=this;this.$on("visible",(function(t,n){e.dropdownWidth=n+"px",e.showPopper=t}))}},G=q,z=a(G,j,F,!1,null,null,null);z.options.__file="packages/autocomplete/src/autocomplete-suggestions.vue";var Y=z.exports,J=n(23),X=n.n(J),Q={name:"ElAutocomplete",mixins:[O.a,X()("input"),I.a],inheritAttrs:!1,componentName:"ElAutocomplete",components:{ElInput:g.a,ElAutocompleteSuggestions:Y},directives:{Clickoutside:V.a},props:{valueKey:{type:String,default:"value"},popperClass:String,popperOptions:Object,placeholder:String,clearable:{type:Boolean,default:!1},disabled:Boolean,name:String,size:String,value:String,maxlength:Number,minlength:Number,autofocus:Boolean,fetchSuggestions:Function,triggerOnFocus:{type:Boolean,default:!0},customItem:String,selectWhenUnmatched:{type:Boolean,default:!1},prefixIcon:String,suffixIcon:String,label:String,debounce:{type:Number,default:300},placement:{type:String,default:"bottom-start"},hideLoading:Boolean,popperAppendToBody:{type:Boolean,default:!0},highlightFirstItem:{type:Boolean,default:!1}},data:function(){return{activated:!1,suggestions:[],loading:!1,highlightedIndex:-1,suggestionDisabled:!1}},computed:{suggestionVisible:function(){var e=this.suggestions,t=Array.isArray(e)&&e.length>0;return(t||this.loading)&&this.activated},id:function(){return"el-autocomplete-"+Object(v["generateId"])()}},watch:{suggestionVisible:function(e){var t=this.getInput();t&&this.broadcast("ElAutocompleteSuggestions","visible",[e,t.offsetWidth])}},methods:{getMigratingConfig:function(){return{props:{"custom-item":"custom-item is removed, use scoped slot instead.",props:"props is removed, use value-key instead."}}},getData:function(e){var t=this;this.suggestionDisabled||(this.loading=!0,this.fetchSuggestions(e,(function(e){t.loading=!1,t.suggestionDisabled||(Array.isArray(e)?(t.suggestions=e,t.highlightedIndex=t.highlightFirstItem?0:-1):console.error("[Element Error][Autocomplete]autocomplete suggestions must be an array"))})))},handleInput:function(e){if(this.$emit("input",e),this.suggestionDisabled=!1,!this.triggerOnFocus&&!e)return this.suggestionDisabled=!0,void(this.suggestions=[]);this.debouncedGetData(e)},handleChange:function(e){this.$emit("change",e)},handleFocus:function(e){this.activated=!0,this.$emit("focus",e),this.triggerOnFocus&&this.debouncedGetData(this.value)},handleBlur:function(e){this.$emit("blur",e)},handleClear:function(){this.activated=!1,this.$emit("clear")},close:function(e){this.activated=!1},handleKeyEnter:function(e){var t=this;this.suggestionVisible&&this.highlightedIndex>=0&&this.highlightedIndex<this.suggestions.length?(e.preventDefault(),this.select(this.suggestions[this.highlightedIndex])):this.selectWhenUnmatched&&(this.$emit("select",{value:this.value}),this.$nextTick((function(e){t.suggestions=[],t.highlightedIndex=-1})))},select:function(e){var t=this;this.$emit("input",e[this.valueKey]),this.$emit("select",e),this.$nextTick((function(e){t.suggestions=[],t.highlightedIndex=-1}))},highlight:function(e){if(this.suggestionVisible&&!this.loading)if(e<0)this.highlightedIndex=-1;else{e>=this.suggestions.length&&(e=this.suggestions.length-1);var t=this.$refs.suggestions.$el.querySelector(".el-autocomplete-suggestion__wrap"),n=t.querySelectorAll(".el-autocomplete-suggestion__list li"),i=n[e],r=t.scrollTop,o=i.offsetTop;o+i.scrollHeight>r+t.clientHeight&&(t.scrollTop+=i.scrollHeight),o<r&&(t.scrollTop-=i.scrollHeight),this.highlightedIndex=e;var s=this.getInput();s.setAttribute("aria-activedescendant",this.id+"-item-"+this.highlightedIndex)}},getInput:function(){return this.$refs.input.getInput()}},mounted:function(){var e=this;this.debouncedGetData=U()(this.debounce,this.getData),this.$on("item-click",(function(t){e.select(t)}));var t=this.getInput();t.setAttribute("role","textbox"),t.setAttribute("aria-autocomplete","list"),t.setAttribute("aria-controls","id"),t.setAttribute("aria-activedescendant",this.id+"-item-"+this.highlightedIndex)},beforeDestroy:function(){this.$refs.suggestions.$destroy()}},Z=Q,ee=a(Z,D,N,!1,null,null,null);ee.options.__file="packages/autocomplete/src/autocomplete.vue";var te=ee.exports;te.install=function(e){e.component(te.name,te)};var ne,ie,re=te,oe=n(13),se=n.n(oe),ae=n(28),ce=n.n(ae),le={name:"ElDropdown",componentName:"ElDropdown",mixins:[O.a,I.a],directives:{Clickoutside:V.a},components:{ElButton:se.a,ElButtonGroup:ce.a},provide:function(){return{dropdown:this}},props:{trigger:{type:String,default:"hover"},type:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},placement:{type:String,default:"bottom-end"},visibleArrow:{default:!0},showTimeout:{type:Number,default:250},hideTimeout:{type:Number,default:150},tabindex:{type:Number,default:0},disabled:{type:Boolean,default:!1}},data:function(){return{timeout:null,visible:!1,triggerElm:null,menuItems:null,menuItemsArray:null,dropdownElm:null,focusing:!1,listId:"dropdown-menu-"+Object(v["generateId"])()}},computed:{dropdownSize:function(){return this.size||(this.$ELEMENT||{}).size}},mounted:function(){this.$on("menu-item-click",this.handleMenuItemClick)},watch:{visible:function(e){this.broadcast("ElDropdownMenu","visible",e),this.$emit("visible-change",e)},focusing:function(e){var t=this.$el.querySelector(".el-dropdown-selfdefine");t&&(e?t.className+=" focusing":t.className=t.className.replace("focusing",""))}},methods:{getMigratingConfig:function(){return{props:{"menu-align":"menu-align is renamed to placement."}}},show:function(){var e=this;this.disabled||(clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.visible=!0}),"click"===this.trigger?0:this.showTimeout))},hide:function(){var e=this;this.disabled||(this.removeTabindex(),this.tabindex>=0&&this.resetTabindex(this.triggerElm),clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.visible=!1}),"click"===this.trigger?0:this.hideTimeout))},handleClick:function(){this.disabled||(this.visible?this.hide():this.show())},handleTriggerKeyDown:function(e){var t=e.keyCode;[38,40].indexOf(t)>-1?(this.removeTabindex(),this.resetTabindex(this.menuItems[0]),this.menuItems[0].focus(),e.preventDefault(),e.stopPropagation()):13===t?this.handleClick():[9,27].indexOf(t)>-1&&this.hide()},handleItemKeyDown:function(e){var t=e.keyCode,n=e.target,i=this.menuItemsArray.indexOf(n),r=this.menuItemsArray.length-1,o=void 0;[38,40].indexOf(t)>-1?(o=38===t?0!==i?i-1:0:i<r?i+1:r,this.removeTabindex(),this.resetTabindex(this.menuItems[o]),this.menuItems[o].focus(),e.preventDefault(),e.stopPropagation()):13===t?(this.triggerElmFocus(),n.click(),this.hideOnClick&&(this.visible=!1)):[9,27].indexOf(t)>-1&&(this.hide(),this.triggerElmFocus())},resetTabindex:function(e){this.removeTabindex(),e.setAttribute("tabindex","0")},removeTabindex:function(){this.triggerElm.setAttribute("tabindex","-1"),this.menuItemsArray.forEach((function(e){e.setAttribute("tabindex","-1")}))},initAria:function(){this.dropdownElm.setAttribute("id",this.listId),this.triggerElm.setAttribute("aria-haspopup","list"),this.triggerElm.setAttribute("aria-controls",this.listId),this.splitButton||(this.triggerElm.setAttribute("role","button"),this.triggerElm.setAttribute("tabindex",this.tabindex),this.triggerElm.setAttribute("class",(this.triggerElm.getAttribute("class")||"")+" el-dropdown-selfdefine"))},initEvent:function(){var e=this,t=this.trigger,n=this.show,i=this.hide,r=this.handleClick,o=this.splitButton,s=this.handleTriggerKeyDown,a=this.handleItemKeyDown;this.triggerElm=o?this.$refs.trigger.$el:this.$slots.default[0].elm;var c=this.dropdownElm;this.triggerElm.addEventListener("keydown",s),c.addEventListener("keydown",a,!0),o||(this.triggerElm.addEventListener("focus",(function(){e.focusing=!0})),this.triggerElm.addEventListener("blur",(function(){e.focusing=!1})),this.triggerElm.addEventListener("click",(function(){e.focusing=!1}))),"hover"===t?(this.triggerElm.addEventListener("mouseenter",n),this.triggerElm.addEventListener("mouseleave",i),c.addEventListener("mouseenter",n),c.addEventListener("mouseleave",i)):"click"===t&&this.triggerElm.addEventListener("click",r)},handleMenuItemClick:function(e,t){this.hideOnClick&&(this.visible=!1),this.$emit("command",e,t)},triggerElmFocus:function(){this.triggerElm.focus&&this.triggerElm.focus()},initDomOperation:function(){this.dropdownElm=this.popperElm,this.menuItems=this.dropdownElm.querySelectorAll("[tabindex='-1']"),this.menuItemsArray=[].slice.call(this.menuItems),this.initEvent(),this.initAria()}},render:function(e){var t=this,n=this.hide,i=this.splitButton,r=this.type,o=this.dropdownSize,s=this.disabled,a=function(e){t.$emit("click",e),n()},c=null;if(i)c=e("el-button-group",[e("el-button",{attrs:{type:r,size:o,disabled:s},nativeOn:{click:a}},[this.$slots.default]),e("el-button",{ref:"trigger",attrs:{type:r,size:o,disabled:s},class:"el-dropdown__caret-button"},[e("i",{class:"el-dropdown__icon el-icon-arrow-down"})])]);else{c=this.$slots.default;var l=c[0].data||{},u=l.attrs,d=void 0===u?{}:u;s&&!d.disabled&&(d.disabled=!0,l.attrs=d)}var h=s?null:this.$slots.dropdown;return e("div",{class:"el-dropdown",directives:[{name:"clickoutside",value:n}],attrs:{"aria-disabled":s}},[c,h])}},ue=le,de=a(ue,ne,ie,!1,null,null,null);de.options.__file="packages/dropdown/src/dropdown.vue";var he=de.exports;he.install=function(e){e.component(he.name,he)};var pe=he,fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":e.doDestroy}},[n("ul",{directives:[{name:"show",rawName:"v-show",value:e.showPopper,expression:"showPopper"}],staticClass:"el-dropdown-menu el-popper",class:[e.size&&"el-dropdown-menu--"+e.size]},[e._t("default")],2)])},ge=[];fe._withStripped=!0;var me={name:"ElDropdownMenu",componentName:"ElDropdownMenu",mixins:[H.a],props:{visibleArrow:{type:Boolean,default:!0},arrowOffset:{type:Number,default:0}},data:function(){return{size:this.dropdown.dropdownSize}},inject:["dropdown"],created:function(){var e=this;this.$on("updatePopper",(function(){e.showPopper&&e.updatePopper()})),this.$on("visible",(function(t){e.showPopper=t}))},mounted:function(){this.dropdown.popperElm=this.popperElm=this.$el,this.referenceElm=this.dropdown.$el,this.dropdown.initDomOperation()},watch:{"dropdown.placement":{immediate:!0,handler:function(e){this.currentPlacement=e}}}},_e=me,ve=a(_e,fe,ge,!1,null,null,null);ve.options.__file="packages/dropdown/src/dropdown-menu.vue";var ye=ve.exports;ye.install=function(e){e.component(ye.name,ye)};var Ce=ye,Ee=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"el-dropdown-menu__item",class:{"is-disabled":e.disabled,"el-dropdown-menu__item--divided":e.divided},attrs:{"aria-disabled":e.disabled,tabindex:e.disabled?null:-1},on:{click:e.handleClick}},[e.icon?n("i",{class:e.icon}):e._e(),e._t("default")],2)},be=[];Ee._withStripped=!0;var Te={name:"ElDropdownItem",mixins:[O.a],props:{command:{},disabled:Boolean,divided:Boolean,icon:String},methods:{handleClick:function(e){this.dispatch("ElDropdown","menu-item-click",[this.command,this])}}},Se=Te,Re=a(Se,Ee,be,!1,null,null,null);Re.options.__file="packages/dropdown/src/dropdown-item.vue";var Ie=Re.exports;Ie.install=function(e){e.component(Ie.name,Ie)};var we=Ie,Oe=Oe||{};Oe.Utils=Oe.Utils||{},Oe.Utils.focusFirstDescendant=function(e){for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(Oe.Utils.attemptFocus(n)||Oe.Utils.focusFirstDescendant(n))return!0}return!1},Oe.Utils.focusLastDescendant=function(e){for(var t=e.childNodes.length-1;t>=0;t--){var n=e.childNodes[t];if(Oe.Utils.attemptFocus(n)||Oe.Utils.focusLastDescendant(n))return!0}return!1},Oe.Utils.attemptFocus=function(e){if(!Oe.Utils.isFocusable(e))return!1;Oe.Utils.IgnoreUtilFocusChanges=!0;try{e.focus()}catch(t){}return Oe.Utils.IgnoreUtilFocusChanges=!1,document.activeElement===e},Oe.Utils.isFocusable=function(e){if(e.tabIndex>0||0===e.tabIndex&&null!==e.getAttribute("tabIndex"))return!0;if(e.disabled)return!1;switch(e.nodeName){case"A":return!!e.href&&"ignore"!==e.rel;case"INPUT":return"hidden"!==e.type&&"file"!==e.type;case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},Oe.Utils.triggerEvent=function(e,t){var n=void 0;n=/^mouse|click/.test(t)?"MouseEvents":/^key/.test(t)?"KeyboardEvent":"HTMLEvents";for(var i=document.createEvent(n),r=arguments.length,o=Array(r>2?r-2:0),s=2;s<r;s++)o[s-2]=arguments[s];return i.initEvent.apply(i,[t].concat(o)),e.dispatchEvent?e.dispatchEvent(i):e.fireEvent("on"+t,i),e},Oe.Utils.keys={tab:9,enter:13,space:32,left:37,up:38,right:39,down:40,esc:27};var ke=Oe.Utils,Me=function(e,t){this.domNode=t,this.parent=e,this.subMenuItems=[],this.subIndex=0,this.init()};Me.prototype.init=function(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()},Me.prototype.gotoSubIndex=function(e){e===this.subMenuItems.length?e=0:e<0&&(e=this.subMenuItems.length-1),this.subMenuItems[e].focus(),this.subIndex=e},Me.prototype.addListeners=function(){var e=this,t=ke.keys,n=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,(function(i){i.addEventListener("keydown",(function(i){var r=!1;switch(i.keyCode){case t.down:e.gotoSubIndex(e.subIndex+1),r=!0;break;case t.up:e.gotoSubIndex(e.subIndex-1),r=!0;break;case t.tab:ke.triggerEvent(n,"mouseleave");break;case t.enter:case t.space:r=!0,i.currentTarget.click();break}return r&&(i.preventDefault(),i.stopPropagation()),!1}))}))};var xe=Me,Pe=function(e){this.domNode=e,this.submenu=null,this.init()};Pe.prototype.init=function(){this.domNode.setAttribute("tabindex","0");var e=this.domNode.querySelector(".el-menu");e&&(this.submenu=new xe(this,e)),this.addListeners()},Pe.prototype.addListeners=function(){var e=this,t=ke.keys;this.domNode.addEventListener("keydown",(function(n){var i=!1;switch(n.keyCode){case t.down:ke.triggerEvent(n.currentTarget,"mouseenter"),e.submenu&&e.submenu.gotoSubIndex(0),i=!0;break;case t.up:ke.triggerEvent(n.currentTarget,"mouseenter"),e.submenu&&e.submenu.gotoSubIndex(e.submenu.subMenuItems.length-1),i=!0;break;case t.tab:ke.triggerEvent(n.currentTarget,"mouseleave");break;case t.enter:case t.space:i=!0,n.currentTarget.click();break}i&&n.preventDefault()}))};var Ae=Pe,De=function(e){this.domNode=e,this.init()};De.prototype.init=function(){var e=this.domNode.childNodes;[].filter.call(e,(function(e){return 1===e.nodeType})).forEach((function(e){new Ae(e)}))};var Ne,Le,Ue=De,Be=n(1),Ve={name:"ElMenu",render:function(e){var t=e("ul",{attrs:{role:"menubar"},key:+this.collapse,style:{backgroundColor:this.backgroundColor||""},class:{"el-menu--horizontal":"horizontal"===this.mode,"el-menu--collapse":this.collapse,"el-menu":!0}},[this.$slots.default]);return this.collapseTransition?e("el-menu-collapse-transition",[t]):t},componentName:"ElMenu",mixins:[O.a,I.a],provide:function(){return{rootMenu:this}},components:{"el-menu-collapse-transition":{functional:!0,render:function(e,t){var n={props:{mode:"out-in"},on:{beforeEnter:function(e){e.style.opacity=.2},enter:function(e){Object(Be["addClass"])(e,"el-opacity-transition"),e.style.opacity=1},afterEnter:function(e){Object(Be["removeClass"])(e,"el-opacity-transition"),e.style.opacity=""},beforeLeave:function(e){e.dataset||(e.dataset={}),Object(Be["hasClass"])(e,"el-menu--collapse")?(Object(Be["removeClass"])(e,"el-menu--collapse"),e.dataset.oldOverflow=e.style.overflow,e.dataset.scrollWidth=e.clientWidth,Object(Be["addClass"])(e,"el-menu--collapse")):(Object(Be["addClass"])(e,"el-menu--collapse"),e.dataset.oldOverflow=e.style.overflow,e.dataset.scrollWidth=e.clientWidth,Object(Be["removeClass"])(e,"el-menu--collapse")),e.style.width=e.scrollWidth+"px",e.style.overflow="hidden"},leave:function(e){Object(Be["addClass"])(e,"horizontal-collapse-transition"),e.style.width=e.dataset.scrollWidth+"px"}}};return e("transition",n,t.children)}}},props:{mode:{type:String,default:"vertical"},defaultActive:{type:String,default:""},defaultOpeneds:Array,uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,default:"hover"},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,collapseTransition:{type:Boolean,default:!0}},data:function(){return{activeIndex:this.defaultActive,openedMenus:this.defaultOpeneds&&!this.collapse?this.defaultOpeneds.slice(0):[],items:{},submenus:{}}},computed:{hoverBackground:function(){return this.backgroundColor?this.mixColor(this.backgroundColor,.2):""},isMenuPopup:function(){return"horizontal"===this.mode||"vertical"===this.mode&&this.collapse}},watch:{defaultActive:function(e){this.items[e]||(this.activeIndex=null),this.updateActiveIndex(e)},defaultOpeneds:function(e){this.collapse||(this.openedMenus=e)},collapse:function(e){e&&(this.openedMenus=[]),this.broadcast("ElSubmenu","toggle-collapse",e)}},methods:{updateActiveIndex:function(e){var t=this.items[e]||this.items[this.activeIndex]||this.items[this.defaultActive];t?(this.activeIndex=t.index,this.initOpenedMenu()):this.activeIndex=null},getMigratingConfig:function(){return{props:{theme:"theme is removed."}}},getColorChannels:function(e){if(e=e.replace("#",""),/^[0-9a-fA-F]{3}$/.test(e)){e=e.split("");for(var t=2;t>=0;t--)e.splice(t,0,e[t]);e=e.join("")}return/^[0-9a-fA-F]{6}$/.test(e)?{red:parseInt(e.slice(0,2),16),green:parseInt(e.slice(2,4),16),blue:parseInt(e.slice(4,6),16)}:{red:255,green:255,blue:255}},mixColor:function(e,t){var n=this.getColorChannels(e),i=n.red,r=n.green,o=n.blue;return t>0?(i*=1-t,r*=1-t,o*=1-t):(i+=(255-i)*t,r+=(255-r)*t,o+=(255-o)*t),"rgb("+Math.round(i)+", "+Math.round(r)+", "+Math.round(o)+")"},addItem:function(e){this.$set(this.items,e.index,e)},removeItem:function(e){delete this.items[e.index]},addSubmenu:function(e){this.$set(this.submenus,e.index,e)},removeSubmenu:function(e){delete this.submenus[e.index]},openMenu:function(e,t){var n=this.openedMenus;-1===n.indexOf(e)&&(this.uniqueOpened&&(this.openedMenus=n.filter((function(e){return-1!==t.indexOf(e)}))),this.openedMenus.push(e))},closeMenu:function(e){var t=this.openedMenus.indexOf(e);-1!==t&&this.openedMenus.splice(t,1)},handleSubmenuClick:function(e){var t=e.index,n=e.indexPath,i=-1!==this.openedMenus.indexOf(t);i?(this.closeMenu(t),this.$emit("close",t,n)):(this.openMenu(t,n),this.$emit("open",t,n))},handleItemClick:function(e){var t=this,n=e.index,i=e.indexPath,r=this.activeIndex,o=null!==e.index;o&&(this.activeIndex=e.index),this.$emit("select",n,i,e),("horizontal"===this.mode||this.collapse)&&(this.openedMenus=[]),this.router&&o&&this.routeToItem(e,(function(e){if(t.activeIndex=r,e){if("NavigationDuplicated"===e.name)return;console.error(e)}}))},initOpenedMenu:function(){var e=this,t=this.activeIndex,n=this.items[t];if(n&&"horizontal"!==this.mode&&!this.collapse){var i=n.indexPath;i.forEach((function(t){var n=e.submenus[t];n&&e.openMenu(t,n.indexPath)}))}},routeToItem:function(e,t){var n=e.route||e.index;try{this.$router.push(n,(function(){}),t)}catch(i){console.error(i)}},open:function(e){var t=this,n=this.submenus[e.toString()].indexPath;n.forEach((function(e){return t.openMenu(e,n)}))},close:function(e){this.closeMenu(e)}},mounted:function(){this.initOpenedMenu(),this.$on("item-click",this.handleItemClick),this.$on("submenu-click",this.handleSubmenuClick),"horizontal"===this.mode&&new Ue(this.$el),this.$watch("items",this.updateActiveIndex)}},je=Ve,Fe=a(je,Ne,Le,!1,null,null,null);Fe.options.__file="packages/menu/src/menu.vue";var $e=Fe.exports;$e.install=function(e){e.component($e.name,$e)};var He,Ke,We=$e,qe=n(21),Ge=n.n(qe),ze={inject:["rootMenu"],computed:{indexPath:function(){var e=[this.index],t=this.$parent;while("ElMenu"!==t.$options.componentName)t.index&&e.unshift(t.index),t=t.$parent;return e},parentMenu:function(){var e=this.$parent;while(e&&-1===["ElMenu","ElSubmenu"].indexOf(e.$options.componentName))e=e.$parent;return e},paddingStyle:function(){if("vertical"!==this.rootMenu.mode)return{};var e=20,t=this.$parent;if(this.rootMenu.collapse)e=20;else while(t&&"ElMenu"!==t.$options.componentName)"ElSubmenu"===t.$options.componentName&&(e+=20),t=t.$parent;return{paddingLeft:e+"px"}}}},Ye={props:{transformOrigin:{type:[Boolean,String],default:!1},offset:H.a.props.offset,boundariesPadding:H.a.props.boundariesPadding,popperOptions:H.a.props.popperOptions},data:H.a.data,methods:H.a.methods,beforeDestroy:H.a.beforeDestroy,deactivated:H.a.deactivated},Je={name:"ElSubmenu",componentName:"ElSubmenu",mixins:[ze,O.a,Ye],components:{ElCollapseTransition:Ge.a},props:{index:{type:String,required:!0},showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300},popperClass:String,disabled:Boolean,popperAppendToBody:{type:Boolean,default:void 0}},data:function(){return{popperJS:null,timeout:null,items:{},submenus:{},mouseInChild:!1}},watch:{opened:function(e){var t=this;this.isMenuPopup&&this.$nextTick((function(e){t.updatePopper()}))}},computed:{appendToBody:function(){return void 0===this.popperAppendToBody?this.isFirstLevel:this.popperAppendToBody},menuTransitionName:function(){return this.rootMenu.collapse?"el-zoom-in-left":"el-zoom-in-top"},opened:function(){return this.rootMenu.openedMenus.indexOf(this.index)>-1},active:function(){var e=!1,t=this.submenus,n=this.items;return Object.keys(n).forEach((function(t){n[t].active&&(e=!0)})),Object.keys(t).forEach((function(n){t[n].active&&(e=!0)})),e},hoverBackground:function(){return this.rootMenu.hoverBackground},backgroundColor:function(){return this.rootMenu.backgroundColor||""},activeTextColor:function(){return this.rootMenu.activeTextColor||""},textColor:function(){return this.rootMenu.textColor||""},mode:function(){return this.rootMenu.mode},isMenuPopup:function(){return this.rootMenu.isMenuPopup},titleStyle:function(){return"horizontal"!==this.mode?{color:this.textColor}:{borderBottomColor:this.active?this.rootMenu.activeTextColor?this.activeTextColor:"":"transparent",color:this.active?this.activeTextColor:this.textColor}},isFirstLevel:function(){var e=!0,t=this.$parent;while(t&&t!==this.rootMenu){if(["ElSubmenu","ElMenuItemGroup"].indexOf(t.$options.componentName)>-1){e=!1;break}t=t.$parent}return e}},methods:{handleCollapseToggle:function(e){e?this.initPopper():this.doDestroy()},addItem:function(e){this.$set(this.items,e.index,e)},removeItem:function(e){delete this.items[e.index]},addSubmenu:function(e){this.$set(this.submenus,e.index,e)},removeSubmenu:function(e){delete this.submenus[e.index]},handleClick:function(){var e=this.rootMenu,t=this.disabled;"hover"===e.menuTrigger&&"horizontal"===e.mode||e.collapse&&"vertical"===e.mode||t||this.dispatch("ElMenu","submenu-click",this)},handleMouseenter:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.showTimeout;if("ActiveXObject"in window||"focus"!==e.type||e.relatedTarget){var i=this.rootMenu,r=this.disabled;"click"===i.menuTrigger&&"horizontal"===i.mode||!i.collapse&&"vertical"===i.mode||r||(this.dispatch("ElSubmenu","mouse-enter-child"),clearTimeout(this.timeout),this.timeout=setTimeout((function(){t.rootMenu.openMenu(t.index,t.indexPath)}),n),this.appendToBody&&this.$parent.$el.dispatchEvent(new MouseEvent("mouseenter")))}},handleMouseleave:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.rootMenu;"click"===n.menuTrigger&&"horizontal"===n.mode||!n.collapse&&"vertical"===n.mode||(this.dispatch("ElSubmenu","mouse-leave-child"),clearTimeout(this.timeout),this.timeout=setTimeout((function(){!e.mouseInChild&&e.rootMenu.closeMenu(e.index)}),this.hideTimeout),this.appendToBody&&t&&"ElSubmenu"===this.$parent.$options.name&&this.$parent.handleMouseleave(!0))},handleTitleMouseenter:function(){if("horizontal"!==this.mode||this.rootMenu.backgroundColor){var e=this.$refs["submenu-title"];e&&(e.style.backgroundColor=this.rootMenu.hoverBackground)}},handleTitleMouseleave:function(){if("horizontal"!==this.mode||this.rootMenu.backgroundColor){var e=this.$refs["submenu-title"];e&&(e.style.backgroundColor=this.rootMenu.backgroundColor||"")}},updatePlacement:function(){this.currentPlacement="horizontal"===this.mode&&this.isFirstLevel?"bottom-start":"right-start"},initPopper:function(){this.referenceElm=this.$el,this.popperElm=this.$refs.menu,this.updatePlacement()}},created:function(){var e=this;this.$on("toggle-collapse",this.handleCollapseToggle),this.$on("mouse-enter-child",(function(){e.mouseInChild=!0,clearTimeout(e.timeout)})),this.$on("mouse-leave-child",(function(){e.mouseInChild=!1,clearTimeout(e.timeout)}))},mounted:function(){this.parentMenu.addSubmenu(this),this.rootMenu.addSubmenu(this),this.initPopper()},beforeDestroy:function(){this.parentMenu.removeSubmenu(this),this.rootMenu.removeSubmenu(this)},render:function(e){var t=this,n=this.active,i=this.opened,r=this.paddingStyle,o=this.titleStyle,s=this.backgroundColor,a=this.rootMenu,c=this.currentPlacement,l=this.menuTransitionName,u=this.mode,d=this.disabled,h=this.popperClass,p=this.$slots,f=this.isFirstLevel,g=e("transition",{attrs:{name:l}},[e("div",{ref:"menu",directives:[{name:"show",value:i}],class:["el-menu--"+u,h],on:{mouseenter:function(e){return t.handleMouseenter(e,100)},mouseleave:function(){return t.handleMouseleave(!0)},focus:function(e){return t.handleMouseenter(e,100)}}},[e("ul",{attrs:{role:"menu"},class:["el-menu el-menu--popup","el-menu--popup-"+c],style:{backgroundColor:a.backgroundColor||""}},[p.default])])]),m=e("el-collapse-transition",[e("ul",{attrs:{role:"menu"},class:"el-menu el-menu--inline",directives:[{name:"show",value:i}],style:{backgroundColor:a.backgroundColor||""}},[p.default])]),_="horizontal"===a.mode&&f||"vertical"===a.mode&&!a.collapse?"el-icon-arrow-down":"el-icon-arrow-right";return e("li",{class:{"el-submenu":!0,"is-active":n,"is-opened":i,"is-disabled":d},attrs:{role:"menuitem","aria-haspopup":"true","aria-expanded":i},on:{mouseenter:this.handleMouseenter,mouseleave:function(){return t.handleMouseleave(!1)},focus:this.handleMouseenter}},[e("div",{class:"el-submenu__title",ref:"submenu-title",on:{click:this.handleClick,mouseenter:this.handleTitleMouseenter,mouseleave:this.handleTitleMouseleave},style:[r,o,{backgroundColor:s}]},[p.title,e("i",{class:["el-submenu__icon-arrow",_]})]),this.isMenuPopup?g:m])}},Xe=Je,Qe=a(Xe,He,Ke,!1,null,null,null);Qe.options.__file="packages/menu/src/submenu.vue";var Ze=Qe.exports;Ze.install=function(e){e.component(Ze.name,Ze)};var et=Ze,tt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"el-menu-item",class:{"is-active":e.active,"is-disabled":e.disabled},style:[e.paddingStyle,e.itemStyle,{backgroundColor:e.backgroundColor}],attrs:{role:"menuitem",tabindex:"-1"},on:{click:e.handleClick,mouseenter:e.onMouseEnter,focus:e.onMouseEnter,blur:e.onMouseLeave,mouseleave:e.onMouseLeave}},["ElMenu"===e.parentMenu.$options.componentName&&e.rootMenu.collapse&&e.$slots.title?n("el-tooltip",{attrs:{effect:"dark",placement:"right"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._t("title")],2),n("div",{staticStyle:{position:"absolute",left:"0",top:"0",height:"100%",width:"100%",display:"inline-block","box-sizing":"border-box",padding:"0 20px"}},[e._t("default")],2)]):[e._t("default"),e._t("title")]],2)},nt=[];tt._withStripped=!0;var it=n(26),rt=n.n(it),ot={name:"ElMenuItem",componentName:"ElMenuItem",mixins:[ze,O.a],components:{ElTooltip:rt.a},props:{index:{default:null,validator:function(e){return"string"===typeof e||null===e}},route:[String,Object],disabled:Boolean},computed:{active:function(){return this.index===this.rootMenu.activeIndex},hoverBackground:function(){return this.rootMenu.hoverBackground},backgroundColor:function(){return this.rootMenu.backgroundColor||""},activeTextColor:function(){return this.rootMenu.activeTextColor||""},textColor:function(){return this.rootMenu.textColor||""},mode:function(){return this.rootMenu.mode},itemStyle:function(){var e={color:this.active?this.activeTextColor:this.textColor};return"horizontal"!==this.mode||this.isNested||(e.borderBottomColor=this.active?this.rootMenu.activeTextColor?this.activeTextColor:"":"transparent"),e},isNested:function(){return this.parentMenu!==this.rootMenu}},methods:{onMouseEnter:function(){("horizontal"!==this.mode||this.rootMenu.backgroundColor)&&(this.$el.style.backgroundColor=this.hoverBackground)},onMouseLeave:function(){("horizontal"!==this.mode||this.rootMenu.backgroundColor)&&(this.$el.style.backgroundColor=this.backgroundColor)},handleClick:function(){this.disabled||(this.dispatch("ElMenu","item-click",this),this.$emit("click",this))}},mounted:function(){this.parentMenu.addItem(this),this.rootMenu.addItem(this)},beforeDestroy:function(){this.parentMenu.removeItem(this),this.rootMenu.removeItem(this)}},st=ot,at=a(st,tt,nt,!1,null,null,null);at.options.__file="packages/menu/src/menu-item.vue";var ct=at.exports;ct.install=function(e){e.component(ct.name,ct)};var lt=ct,ut=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"el-menu-item-group"},[n("div",{staticClass:"el-menu-item-group__title",style:{paddingLeft:e.levelPadding+"px"}},[e.$slots.title?e._t("title"):[e._v(e._s(e.title))]],2),n("ul",[e._t("default")],2)])},dt=[];ut._withStripped=!0;var ht={name:"ElMenuItemGroup",componentName:"ElMenuItemGroup",inject:["rootMenu"],props:{title:{type:String}},data:function(){return{paddingLeft:20}},computed:{levelPadding:function(){var e=20,t=this.$parent;if(this.rootMenu.collapse)return 20;while(t&&"ElMenu"!==t.$options.componentName)"ElSubmenu"===t.$options.componentName&&(e+=20),t=t.$parent;return e}}},pt=ht,ft=a(pt,ut,dt,!1,null,null,null);ft.options.__file="packages/menu/src/menu-item-group.vue";var gt=ft.exports;gt.install=function(e){e.component(gt.name,gt)};var mt=gt,_t=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:["textarea"===e.type?"el-textarea":"el-input",e.inputSize?"el-input--"+e.inputSize:"",{"is-disabled":e.inputDisabled,"is-exceed":e.inputExceed,"el-input-group":e.$slots.prepend||e.$slots.append,"el-input-group--append":e.$slots.append,"el-input-group--prepend":e.$slots.prepend,"el-input--prefix":e.$slots.prefix||e.prefixIcon,"el-input--suffix":e.$slots.suffix||e.suffixIcon||e.clearable||e.showPassword}],on:{mouseenter:function(t){e.hovering=!0},mouseleave:function(t){e.hovering=!1}}},["textarea"!==e.type?[e.$slots.prepend?n("div",{staticClass:"el-input-group__prepend"},[e._t("prepend")],2):e._e(),"textarea"!==e.type?n("input",e._b({ref:"input",staticClass:"el-input__inner",attrs:{tabindex:e.tabindex,type:e.showPassword?e.passwordVisible?"text":"password":e.type,disabled:e.inputDisabled,readonly:e.readonly,autocomplete:e.autoComplete||e.autocomplete,"aria-label":e.label},on:{compositionstart:e.handleCompositionStart,compositionupdate:e.handleCompositionUpdate,compositionend:e.handleCompositionEnd,input:e.handleInput,focus:e.handleFocus,blur:e.handleBlur,change:e.handleChange}},"input",e.$attrs,!1)):e._e(),e.$slots.prefix||e.prefixIcon?n("span",{staticClass:"el-input__prefix"},[e._t("prefix"),e.prefixIcon?n("i",{staticClass:"el-input__icon",class:e.prefixIcon}):e._e()],2):e._e(),e.getSuffixVisible()?n("span",{staticClass:"el-input__suffix"},[n("span",{staticClass:"el-input__suffix-inner"},[e.showClear&&e.showPwdVisible&&e.isWordLimitVisible?e._e():[e._t("suffix"),e.suffixIcon?n("i",{staticClass:"el-input__icon",class:e.suffixIcon}):e._e()],e.showClear?n("i",{staticClass:"el-input__icon el-icon-circle-close el-input__clear",on:{mousedown:function(e){e.preventDefault()},click:e.clear}}):e._e(),e.showPwdVisible?n("i",{staticClass:"el-input__icon el-icon-view el-input__clear",on:{click:e.handlePasswordVisible}}):e._e(),e.isWordLimitVisible?n("span",{staticClass:"el-input__count"},[n("span",{staticClass:"el-input__count-inner"},[e._v("\n            "+e._s(e.textLength)+"/"+e._s(e.upperLimit)+"\n          ")])]):e._e()],2),e.validateState?n("i",{staticClass:"el-input__icon",class:["el-input__validateIcon",e.validateIcon]}):e._e()]):e._e(),e.$slots.append?n("div",{staticClass:"el-input-group__append"},[e._t("append")],2):e._e()]:n("textarea",e._b({ref:"textarea",staticClass:"el-textarea__inner",style:e.textareaStyle,attrs:{tabindex:e.tabindex,disabled:e.inputDisabled,readonly:e.readonly,autocomplete:e.autoComplete||e.autocomplete,"aria-label":e.label},on:{compositionstart:e.handleCompositionStart,compositionupdate:e.handleCompositionUpdate,compositionend:e.handleCompositionEnd,input:e.handleInput,focus:e.handleFocus,blur:e.handleBlur,change:e.handleChange}},"textarea",e.$attrs,!1)),e.isWordLimitVisible&&"textarea"===e.type?n("span",{staticClass:"el-input__count"},[e._v(e._s(e.textLength)+"/"+e._s(e.upperLimit))]):e._e()],2)},vt=[];_t._withStripped=!0;var yt=void 0,Ct="\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important\n",Et=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function bt(e){var t=window.getComputedStyle(e),n=t.getPropertyValue("box-sizing"),i=parseFloat(t.getPropertyValue("padding-bottom"))+parseFloat(t.getPropertyValue("padding-top")),r=parseFloat(t.getPropertyValue("border-bottom-width"))+parseFloat(t.getPropertyValue("border-top-width")),o=Et.map((function(e){return e+":"+t.getPropertyValue(e)})).join(";");return{contextStyle:o,paddingSize:i,borderSize:r,boxSizing:n}}function Tt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;yt||(yt=document.createElement("textarea"),document.body.appendChild(yt));var i=bt(e),r=i.paddingSize,o=i.borderSize,s=i.boxSizing,a=i.contextStyle;yt.setAttribute("style",a+";"+Ct),yt.value=e.value||e.placeholder||"";var c=yt.scrollHeight,l={};"border-box"===s?c+=o:"content-box"===s&&(c-=r),yt.value="";var u=yt.scrollHeight-r;if(null!==t){var d=u*t;"border-box"===s&&(d=d+r+o),c=Math.max(d,c),l.minHeight=d+"px"}if(null!==n){var h=u*n;"border-box"===s&&(h=h+r+o),c=Math.min(h,c)}return l.height=c+"px",yt.parentNode&&yt.parentNode.removeChild(yt),yt=null,l}var St=n(7),Rt=n.n(St),It=n(19),wt={name:"ElInput",componentName:"ElInput",mixins:[O.a,I.a],inheritAttrs:!1,inject:{elForm:{default:""},elFormItem:{default:""}},data:function(){return{textareaCalcStyle:{},hovering:!1,focused:!1,isComposing:!1,passwordVisible:!1}},props:{value:[String,Number],size:String,resize:String,form:String,disabled:Boolean,readonly:Boolean,type:{type:String,default:"text"},autosize:{type:[Boolean,Object],default:!1},autocomplete:{type:String,default:"off"},autoComplete:{type:String,validator:function(e){return!0}},validateEvent:{type:Boolean,default:!0},suffixIcon:String,prefixIcon:String,label:String,clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},tabindex:String},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},validateState:function(){return this.elFormItem?this.elFormItem.validateState:""},needStatusIcon:function(){return!!this.elForm&&this.elForm.statusIcon},validateIcon:function(){return{validating:"el-icon-loading",success:"el-icon-circle-check",error:"el-icon-circle-close"}[this.validateState]},textareaStyle:function(){return Rt()({},this.textareaCalcStyle,{resize:this.resize})},inputSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},inputDisabled:function(){return this.disabled||(this.elForm||{}).disabled},nativeInputValue:function(){return null===this.value||void 0===this.value?"":String(this.value)},showClear:function(){return this.clearable&&!this.inputDisabled&&!this.readonly&&this.nativeInputValue&&(this.focused||this.hovering)},showPwdVisible:function(){return this.showPassword&&!this.inputDisabled&&!this.readonly&&(!!this.nativeInputValue||this.focused)},isWordLimitVisible:function(){return this.showWordLimit&&this.$attrs.maxlength&&("text"===this.type||"textarea"===this.type)&&!this.inputDisabled&&!this.readonly&&!this.showPassword},upperLimit:function(){return this.$attrs.maxlength},textLength:function(){return"number"===typeof this.value?String(this.value).length:(this.value||"").length},inputExceed:function(){return this.isWordLimitVisible&&this.textLength>this.upperLimit}},watch:{value:function(e){this.$nextTick(this.resizeTextarea),this.validateEvent&&this.dispatch("ElFormItem","el.form.change",[e])},nativeInputValue:function(){this.setNativeInputValue()},type:function(){var e=this;this.$nextTick((function(){e.setNativeInputValue(),e.resizeTextarea(),e.updateIconOffset()}))}},methods:{focus:function(){this.getInput().focus()},blur:function(){this.getInput().blur()},getMigratingConfig:function(){return{props:{icon:"icon is removed, use suffix-icon / prefix-icon instead.","on-icon-click":"on-icon-click is removed."},events:{click:"click is removed."}}},handleBlur:function(e){this.focused=!1,this.$emit("blur",e),this.validateEvent&&this.dispatch("ElFormItem","el.form.blur",[this.value])},select:function(){this.getInput().select()},resizeTextarea:function(){if(!this.$isServer){var e=this.autosize,t=this.type;if("textarea"===t)if(e){var n=e.minRows,i=e.maxRows;this.textareaCalcStyle=Tt(this.$refs.textarea,n,i)}else this.textareaCalcStyle={minHeight:Tt(this.$refs.textarea).minHeight}}},setNativeInputValue:function(){var e=this.getInput();e&&e.value!==this.nativeInputValue&&(e.value=this.nativeInputValue)},handleFocus:function(e){this.focused=!0,this.$emit("focus",e)},handleCompositionStart:function(){this.isComposing=!0},handleCompositionUpdate:function(e){var t=e.target.value,n=t[t.length-1]||"";this.isComposing=!Object(It["isKorean"])(n)},handleCompositionEnd:function(e){this.isComposing&&(this.isComposing=!1,this.handleInput(e))},handleInput:function(e){this.isComposing||e.target.value!==this.nativeInputValue&&(this.$emit("input",e.target.value),this.$nextTick(this.setNativeInputValue))},handleChange:function(e){this.$emit("change",e.target.value)},calcIconOffset:function(e){var t=[].slice.call(this.$el.querySelectorAll(".el-input__"+e)||[]);if(t.length){for(var n=null,i=0;i<t.length;i++)if(t[i].parentNode===this.$el){n=t[i];break}if(n){var r={suffix:"append",prefix:"prepend"},o=r[e];this.$slots[o]?n.style.transform="translateX("+("suffix"===e?"-":"")+this.$el.querySelector(".el-input-group__"+o).offsetWidth+"px)":n.removeAttribute("style")}}},updateIconOffset:function(){this.calcIconOffset("prefix"),this.calcIconOffset("suffix")},clear:function(){this.$emit("input",""),this.$emit("change",""),this.$emit("clear")},handlePasswordVisible:function(){var e=this;this.passwordVisible=!this.passwordVisible,this.$nextTick((function(){e.focus()}))},getInput:function(){return this.$refs.input||this.$refs.textarea},getSuffixVisible:function(){return this.$slots.suffix||this.suffixIcon||this.showClear||this.showPassword||this.isWordLimitVisible||this.validateState&&this.needStatusIcon}},created:function(){this.$on("inputSelect",this.select)},mounted:function(){this.setNativeInputValue(),this.resizeTextarea(),this.updateIconOffset()},updated:function(){this.$nextTick(this.updateIconOffset)}},Ot=wt,kt=a(Ot,_t,vt,!1,null,null,null);kt.options.__file="packages/input/src/input.vue";var Mt=kt.exports;Mt.install=function(e){e.component(Mt.name,Mt)};var xt=Mt,Pt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:["el-input-number",e.inputNumberSize?"el-input-number--"+e.inputNumberSize:"",{"is-disabled":e.inputNumberDisabled},{"is-without-controls":!e.controls},{"is-controls-right":e.controlsAtRight}],on:{dragstart:function(e){e.preventDefault()}}},[e.controls?n("span",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:e.decrease,expression:"decrease"}],staticClass:"el-input-number__decrease",class:{"is-disabled":e.minDisabled},attrs:{role:"button"},on:{keydown:function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.decrease(t)}}},[n("i",{class:"el-icon-"+(e.controlsAtRight?"arrow-down":"minus")})]):e._e(),e.controls?n("span",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:e.increase,expression:"increase"}],staticClass:"el-input-number__increase",class:{"is-disabled":e.maxDisabled},attrs:{role:"button"},on:{keydown:function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.increase(t)}}},[n("i",{class:"el-icon-"+(e.controlsAtRight?"arrow-up":"plus")})]):e._e(),n("el-input",{ref:"input",attrs:{value:e.displayValue,placeholder:e.placeholder,disabled:e.inputNumberDisabled,size:e.inputNumberSize,max:e.max,min:e.min,name:e.name,label:e.label},on:{blur:e.handleBlur,focus:e.handleFocus,input:e.handleInput,change:e.handleInputChange},nativeOn:{keydown:[function(t){return!("button"in t)&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:(t.preventDefault(),e.increase(t))},function(t){return!("button"in t)&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.preventDefault(),e.decrease(t))}]}})],1)},At=[];Pt._withStripped=!0;var Dt={bind:function(e,t,n){var i=null,r=void 0,o=function(){return n.context[t.expression].apply()},s=function(){Date.now()-r<100&&o(),clearInterval(i),i=null};Object(Be["on"])(e,"mousedown",(function(e){0===e.button&&(r=Date.now(),Object(Be["once"])(document,"mouseup",s),clearInterval(i),i=setInterval(o,100))}))}},Nt={name:"ElInputNumber",mixins:[X()("input")],inject:{elForm:{default:""},elFormItem:{default:""}},directives:{repeatClick:Dt},components:{ElInput:g.a},props:{step:{type:Number,default:1},stepStrictly:{type:Boolean,default:!1},max:{type:Number,default:1/0},min:{type:Number,default:-1/0},value:{},disabled:Boolean,size:String,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:""},name:String,label:String,placeholder:String,precision:{type:Number,validator:function(e){return e>=0&&e===parseInt(e,10)}}},data:function(){return{currentValue:0,userInput:null}},watch:{value:{immediate:!0,handler:function(e){var t=void 0===e?e:Number(e);if(void 0!==t){if(isNaN(t))return;if(this.stepStrictly){var n=this.getPrecision(this.step),i=Math.pow(10,n);t=Math.round(t/this.step)*i*this.step/i}void 0!==this.precision&&(t=this.toPrecision(t,this.precision))}t>=this.max&&(t=this.max),t<=this.min&&(t=this.min),this.currentValue=t,this.userInput=null,this.$emit("input",t)}}},computed:{minDisabled:function(){return this._decrease(this.value,this.step)<this.min},maxDisabled:function(){return this._increase(this.value,this.step)>this.max},numPrecision:function(){var e=this.value,t=this.step,n=this.getPrecision,i=this.precision,r=n(t);return void 0!==i?(r>i&&console.warn("[Element Warn][InputNumber]precision should not be less than the decimal places of step"),i):Math.max(n(e),r)},controlsAtRight:function(){return this.controls&&"right"===this.controlsPosition},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},inputNumberSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},inputNumberDisabled:function(){return this.disabled||!!(this.elForm||{}).disabled},displayValue:function(){if(null!==this.userInput)return this.userInput;var e=this.currentValue;if("number"===typeof e){if(this.stepStrictly){var t=this.getPrecision(this.step),n=Math.pow(10,t);e=Math.round(e/this.step)*n*this.step/n}void 0!==this.precision&&(e=e.toFixed(this.precision))}return e}},methods:{toPrecision:function(e,t){return void 0===t&&(t=this.numPrecision),parseFloat(Math.round(e*Math.pow(10,t))/Math.pow(10,t))},getPrecision:function(e){if(void 0===e)return 0;var t=e.toString(),n=t.indexOf("."),i=0;return-1!==n&&(i=t.length-n-1),i},_increase:function(e,t){if("number"!==typeof e&&void 0!==e)return this.currentValue;var n=Math.pow(10,this.numPrecision);return this.toPrecision((n*e+n*t)/n)},_decrease:function(e,t){if("number"!==typeof e&&void 0!==e)return this.currentValue;var n=Math.pow(10,this.numPrecision);return this.toPrecision((n*e-n*t)/n)},increase:function(){if(!this.inputNumberDisabled&&!this.maxDisabled){var e=this.value||0,t=this._increase(e,this.step);this.setCurrentValue(t)}},decrease:function(){if(!this.inputNumberDisabled&&!this.minDisabled){var e=this.value||0,t=this._decrease(e,this.step);this.setCurrentValue(t)}},handleBlur:function(e){this.$emit("blur",e)},handleFocus:function(e){this.$emit("focus",e)},setCurrentValue:function(e){var t=this.currentValue;"number"===typeof e&&void 0!==this.precision&&(e=this.toPrecision(e,this.precision)),e>=this.max&&(e=this.max),e<=this.min&&(e=this.min),t!==e&&(this.userInput=null,this.$emit("input",e),this.$emit("change",e,t),this.currentValue=e)},handleInput:function(e){this.userInput=e},handleInputChange:function(e){var t=""===e?void 0:Number(e);isNaN(t)&&""!==e||this.setCurrentValue(t),this.userInput=null},select:function(){this.$refs.input.select()}},mounted:function(){var e=this.$refs.input.$refs.input;e.setAttribute("role","spinbutton"),e.setAttribute("aria-valuemax",this.max),e.setAttribute("aria-valuemin",this.min),e.setAttribute("aria-valuenow",this.currentValue),e.setAttribute("aria-disabled",this.inputNumberDisabled)},updated:function(){if(this.$refs&&this.$refs.input){var e=this.$refs.input.$refs.input;e.setAttribute("aria-valuenow",this.currentValue)}}},Lt=Nt,Ut=a(Lt,Pt,At,!1,null,null,null);Ut.options.__file="packages/input-number/src/input-number.vue";var Bt=Ut.exports;Bt.install=function(e){e.component(Bt.name,Bt)};var Vt=Bt,jt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"el-radio",class:[e.border&&e.radioSize?"el-radio--"+e.radioSize:"",{"is-disabled":e.isDisabled},{"is-focus":e.focus},{"is-bordered":e.border},{"is-checked":e.model===e.label}],attrs:{role:"radio","aria-checked":e.model===e.label,"aria-disabled":e.isDisabled,tabindex:e.tabIndex},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.stopPropagation(),t.preventDefault(),e.model=e.isDisabled?e.model:e.label}}},[n("span",{staticClass:"el-radio__input",class:{"is-disabled":e.isDisabled,"is-checked":e.model===e.label}},[n("span",{staticClass:"el-radio__inner"}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],ref:"radio",staticClass:"el-radio__original",attrs:{type:"radio","aria-hidden":"true",name:e.name,disabled:e.isDisabled,tabindex:"-1",autocomplete:"off"},domProps:{value:e.label,checked:e._q(e.model,e.label)},on:{focus:function(t){e.focus=!0},blur:function(t){e.focus=!1},change:[function(t){e.model=e.label},e.handleChange]}})]),n("span",{staticClass:"el-radio__label",on:{keydown:function(e){e.stopPropagation()}}},[e._t("default"),e.$slots.default?e._e():[e._v(e._s(e.label))]],2)])},Ft=[];jt._withStripped=!0;var $t={name:"ElRadio",mixins:[O.a],inject:{elForm:{default:""},elFormItem:{default:""}},componentName:"ElRadio",props:{value:{},label:{},disabled:Boolean,name:String,border:Boolean,size:String},data:function(){return{focus:!1}},computed:{isGroup:function(){var e=this.$parent;while(e){if("ElRadioGroup"===e.$options.componentName)return this._radioGroup=e,!0;e=e.$parent}return!1},model:{get:function(){return this.isGroup?this._radioGroup.value:this.value},set:function(e){this.isGroup?this.dispatch("ElRadioGroup","input",[e]):this.$emit("input",e),this.$refs.radio&&(this.$refs.radio.checked=this.model===this.label)}},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},radioSize:function(){var e=this.size||this._elFormItemSize||(this.$ELEMENT||{}).size;return this.isGroup&&this._radioGroup.radioGroupSize||e},isDisabled:function(){return this.isGroup?this._radioGroup.disabled||this.disabled||(this.elForm||{}).disabled:this.disabled||(this.elForm||{}).disabled},tabIndex:function(){return this.isDisabled||this.isGroup&&this.model!==this.label?-1:0}},methods:{handleChange:function(){var e=this;this.$nextTick((function(){e.$emit("change",e.model),e.isGroup&&e.dispatch("ElRadioGroup","handleChange",e.model)}))}}},Ht=$t,Kt=a(Ht,jt,Ft,!1,null,null,null);Kt.options.__file="packages/radio/src/radio.vue";var Wt=Kt.exports;Wt.install=function(e){e.component(Wt.name,Wt)};var qt=Wt,Gt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(e._elTag,{tag:"component",staticClass:"el-radio-group",attrs:{role:"radiogroup"},on:{keydown:e.handleKeydown}},[e._t("default")],2)},zt=[];Gt._withStripped=!0;var Yt=Object.freeze({LEFT:37,UP:38,RIGHT:39,DOWN:40}),Jt={name:"ElRadioGroup",componentName:"ElRadioGroup",inject:{elFormItem:{default:""}},mixins:[O.a],props:{value:{},size:String,fill:String,textColor:String,disabled:Boolean},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},_elTag:function(){var e=(this.$vnode.data||{}).tag;return e&&"component"!==e||(e="div"),e},radioGroupSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size}},created:function(){var e=this;this.$on("handleChange",(function(t){e.$emit("change",t)}))},mounted:function(){var e=this.$el.querySelectorAll("[type=radio]"),t=this.$el.querySelectorAll("[role=radio]")[0];![].some.call(e,(function(e){return e.checked}))&&t&&(t.tabIndex=0)},methods:{handleKeydown:function(e){var t=e.target,n="INPUT"===t.nodeName?"[type=radio]":"[role=radio]",i=this.$el.querySelectorAll(n),r=i.length,o=[].indexOf.call(i,t),s=this.$el.querySelectorAll("[role=radio]");switch(e.keyCode){case Yt.LEFT:case Yt.UP:e.stopPropagation(),e.preventDefault(),0===o?(s[r-1].click(),s[r-1].focus()):(s[o-1].click(),s[o-1].focus());break;case Yt.RIGHT:case Yt.DOWN:o===r-1?(e.stopPropagation(),e.preventDefault(),s[0].click(),s[0].focus()):(s[o+1].click(),s[o+1].focus());break;default:break}}},watch:{value:function(e){this.dispatch("ElFormItem","el.form.change",[this.value])}}},Xt=Jt,Qt=a(Xt,Gt,zt,!1,null,null,null);Qt.options.__file="packages/radio/src/radio-group.vue";var Zt=Qt.exports;Zt.install=function(e){e.component(Zt.name,Zt)};var en=Zt,tn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"el-radio-button",class:[e.size?"el-radio-button--"+e.size:"",{"is-active":e.value===e.label},{"is-disabled":e.isDisabled},{"is-focus":e.focus}],attrs:{role:"radio","aria-checked":e.value===e.label,"aria-disabled":e.isDisabled,tabindex:e.tabIndex},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.stopPropagation(),t.preventDefault(),e.value=e.isDisabled?e.value:e.label}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],staticClass:"el-radio-button__orig-radio",attrs:{type:"radio",name:e.name,disabled:e.isDisabled,tabindex:"-1",autocomplete:"off"},domProps:{value:e.label,checked:e._q(e.value,e.label)},on:{change:[function(t){e.value=e.label},e.handleChange],focus:function(t){e.focus=!0},blur:function(t){e.focus=!1}}}),n("span",{staticClass:"el-radio-button__inner",style:e.value===e.label?e.activeStyle:null,on:{keydown:function(e){e.stopPropagation()}}},[e._t("default"),e.$slots.default?e._e():[e._v(e._s(e.label))]],2)])},nn=[];tn._withStripped=!0;var rn={name:"ElRadioButton",mixins:[O.a],inject:{elForm:{default:""},elFormItem:{default:""}},props:{label:{},disabled:Boolean,name:String},data:function(){return{focus:!1}},computed:{value:{get:function(){return this._radioGroup.value},set:function(e){this._radioGroup.$emit("input",e)}},_radioGroup:function(){var e=this.$parent;while(e){if("ElRadioGroup"===e.$options.componentName)return e;e=e.$parent}return!1},activeStyle:function(){return{backgroundColor:this._radioGroup.fill||"",borderColor:this._radioGroup.fill||"",boxShadow:this._radioGroup.fill?"-1px 0 0 0 "+this._radioGroup.fill:"",color:this._radioGroup.textColor||""}},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},size:function(){return this._radioGroup.radioGroupSize||this._elFormItemSize||(this.$ELEMENT||{}).size},isDisabled:function(){return this.disabled||this._radioGroup.disabled||(this.elForm||{}).disabled},tabIndex:function(){return this.isDisabled||this._radioGroup&&this.value!==this.label?-1:0}},methods:{handleChange:function(){var e=this;this.$nextTick((function(){e.dispatch("ElRadioGroup","handleChange",e.value)}))}}},on=rn,sn=a(on,tn,nn,!1,null,null,null);sn.options.__file="packages/radio/src/radio-button.vue";var an=sn.exports;an.install=function(e){e.component(an.name,an)};var cn=an,ln=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"el-checkbox",class:[e.border&&e.checkboxSize?"el-checkbox--"+e.checkboxSize:"",{"is-disabled":e.isDisabled},{"is-bordered":e.border},{"is-checked":e.isChecked}],attrs:{id:e.id}},[n("span",{staticClass:"el-checkbox__input",class:{"is-disabled":e.isDisabled,"is-checked":e.isChecked,"is-indeterminate":e.indeterminate,"is-focus":e.focus},attrs:{tabindex:!!e.indeterminate&&0,role:!!e.indeterminate&&"checkbox","aria-checked":!!e.indeterminate&&"mixed"}},[n("span",{staticClass:"el-checkbox__inner"}),e.trueLabel||e.falseLabel?n("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],staticClass:"el-checkbox__original",attrs:{type:"checkbox","aria-hidden":e.indeterminate?"true":"false",name:e.name,disabled:e.isDisabled,"true-value":e.trueLabel,"false-value":e.falseLabel},domProps:{checked:Array.isArray(e.model)?e._i(e.model,null)>-1:e._q(e.model,e.trueLabel)},on:{change:[function(t){var n=e.model,i=t.target,r=i.checked?e.trueLabel:e.falseLabel;if(Array.isArray(n)){var o=null,s=e._i(n,o);i.checked?s<0&&(e.model=n.concat([o])):s>-1&&(e.model=n.slice(0,s).concat(n.slice(s+1)))}else e.model=r},e.handleChange],focus:function(t){e.focus=!0},blur:function(t){e.focus=!1}}}):n("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],staticClass:"el-checkbox__original",attrs:{type:"checkbox","aria-hidden":e.indeterminate?"true":"false",disabled:e.isDisabled,name:e.name},domProps:{value:e.label,checked:Array.isArray(e.model)?e._i(e.model,e.label)>-1:e.model},on:{change:[function(t){var n=e.model,i=t.target,r=!!i.checked;if(Array.isArray(n)){var o=e.label,s=e._i(n,o);i.checked?s<0&&(e.model=n.concat([o])):s>-1&&(e.model=n.slice(0,s).concat(n.slice(s+1)))}else e.model=r},e.handleChange],focus:function(t){e.focus=!0},blur:function(t){e.focus=!1}}})]),e.$slots.default||e.label?n("span",{staticClass:"el-checkbox__label"},[e._t("default"),e.$slots.default?e._e():[e._v(e._s(e.label))]],2):e._e()])},un=[];ln._withStripped=!0;var dn={name:"ElCheckbox",mixins:[O.a],inject:{elForm:{default:""},elFormItem:{default:""}},componentName:"ElCheckbox",data:function(){return{selfModel:!1,focus:!1,isLimitExceeded:!1}},computed:{model:{get:function(){return this.isGroup?this.store:void 0!==this.value?this.value:this.selfModel},set:function(e){this.isGroup?(this.isLimitExceeded=!1,void 0!==this._checkboxGroup.min&&e.length<this._checkboxGroup.min&&(this.isLimitExceeded=!0),void 0!==this._checkboxGroup.max&&e.length>this._checkboxGroup.max&&(this.isLimitExceeded=!0),!1===this.isLimitExceeded&&this.dispatch("ElCheckboxGroup","input",[e])):(this.$emit("input",e),this.selfModel=e)}},isChecked:function(){return"[object Boolean]"==={}.toString.call(this.model)?this.model:Array.isArray(this.model)?this.model.indexOf(this.label)>-1:null!==this.model&&void 0!==this.model?this.model===this.trueLabel:void 0},isGroup:function(){var e=this.$parent;while(e){if("ElCheckboxGroup"===e.$options.componentName)return this._checkboxGroup=e,!0;e=e.$parent}return!1},store:function(){return this._checkboxGroup?this._checkboxGroup.value:this.value},isLimitDisabled:function(){var e=this._checkboxGroup,t=e.max,n=e.min;return!(!t&&!n)&&this.model.length>=t&&!this.isChecked||this.model.length<=n&&this.isChecked},isDisabled:function(){return this.isGroup?this._checkboxGroup.disabled||this.disabled||(this.elForm||{}).disabled||this.isLimitDisabled:this.disabled||(this.elForm||{}).disabled},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},checkboxSize:function(){var e=this.size||this._elFormItemSize||(this.$ELEMENT||{}).size;return this.isGroup&&this._checkboxGroup.checkboxGroupSize||e}},props:{value:{},label:{},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:String,trueLabel:[String,Number],falseLabel:[String,Number],id:String,controls:String,border:Boolean,size:String},methods:{addToStore:function(){Array.isArray(this.model)&&-1===this.model.indexOf(this.label)?this.model.push(this.label):this.model=this.trueLabel||!0},handleChange:function(e){var t=this;if(!this.isLimitExceeded){var n=void 0;n=e.target.checked?void 0===this.trueLabel||this.trueLabel:void 0!==this.falseLabel&&this.falseLabel,this.$emit("change",n,e),this.$nextTick((function(){t.isGroup&&t.dispatch("ElCheckboxGroup","change",[t._checkboxGroup.value])}))}}},created:function(){this.checked&&this.addToStore()},mounted:function(){this.indeterminate&&this.$el.setAttribute("aria-controls",this.controls)},watch:{value:function(e){this.dispatch("ElFormItem","el.form.change",e)}}},hn=dn,pn=a(hn,ln,un,!1,null,null,null);pn.options.__file="packages/checkbox/src/checkbox.vue";var fn=pn.exports;fn.install=function(e){e.component(fn.name,fn)};var gn=fn,mn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"el-checkbox-button",class:[e.size?"el-checkbox-button--"+e.size:"",{"is-disabled":e.isDisabled},{"is-checked":e.isChecked},{"is-focus":e.focus}],attrs:{role:"checkbox","aria-checked":e.isChecked,"aria-disabled":e.isDisabled}},[e.trueLabel||e.falseLabel?n("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],staticClass:"el-checkbox-button__original",attrs:{type:"checkbox",name:e.name,disabled:e.isDisabled,"true-value":e.trueLabel,"false-value":e.falseLabel},domProps:{checked:Array.isArray(e.model)?e._i(e.model,null)>-1:e._q(e.model,e.trueLabel)},on:{change:[function(t){var n=e.model,i=t.target,r=i.checked?e.trueLabel:e.falseLabel;if(Array.isArray(n)){var o=null,s=e._i(n,o);i.checked?s<0&&(e.model=n.concat([o])):s>-1&&(e.model=n.slice(0,s).concat(n.slice(s+1)))}else e.model=r},e.handleChange],focus:function(t){e.focus=!0},blur:function(t){e.focus=!1}}}):n("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],staticClass:"el-checkbox-button__original",attrs:{type:"checkbox",name:e.name,disabled:e.isDisabled},domProps:{value:e.label,checked:Array.isArray(e.model)?e._i(e.model,e.label)>-1:e.model},on:{change:[function(t){var n=e.model,i=t.target,r=!!i.checked;if(Array.isArray(n)){var o=e.label,s=e._i(n,o);i.checked?s<0&&(e.model=n.concat([o])):s>-1&&(e.model=n.slice(0,s).concat(n.slice(s+1)))}else e.model=r},e.handleChange],focus:function(t){e.focus=!0},blur:function(t){e.focus=!1}}}),e.$slots.default||e.label?n("span",{staticClass:"el-checkbox-button__inner",style:e.isChecked?e.activeStyle:null},[e._t("default",[e._v(e._s(e.label))])],2):e._e()])},_n=[];mn._withStripped=!0;var vn={name:"ElCheckboxButton",mixins:[O.a],inject:{elForm:{default:""},elFormItem:{default:""}},data:function(){return{selfModel:!1,focus:!1,isLimitExceeded:!1}},props:{value:{},label:{},disabled:Boolean,checked:Boolean,name:String,trueLabel:[String,Number],falseLabel:[String,Number]},computed:{model:{get:function(){return this._checkboxGroup?this.store:void 0!==this.value?this.value:this.selfModel},set:function(e){this._checkboxGroup?(this.isLimitExceeded=!1,void 0!==this._checkboxGroup.min&&e.length<this._checkboxGroup.min&&(this.isLimitExceeded=!0),void 0!==this._checkboxGroup.max&&e.length>this._checkboxGroup.max&&(this.isLimitExceeded=!0),!1===this.isLimitExceeded&&this.dispatch("ElCheckboxGroup","input",[e])):void 0!==this.value?this.$emit("input",e):this.selfModel=e}},isChecked:function(){return"[object Boolean]"==={}.toString.call(this.model)?this.model:Array.isArray(this.model)?this.model.indexOf(this.label)>-1:null!==this.model&&void 0!==this.model?this.model===this.trueLabel:void 0},_checkboxGroup:function(){var e=this.$parent;while(e){if("ElCheckboxGroup"===e.$options.componentName)return e;e=e.$parent}return!1},store:function(){return this._checkboxGroup?this._checkboxGroup.value:this.value},activeStyle:function(){return{backgroundColor:this._checkboxGroup.fill||"",borderColor:this._checkboxGroup.fill||"",color:this._checkboxGroup.textColor||"","box-shadow":"-1px 0 0 0 "+this._checkboxGroup.fill}},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},size:function(){return this._checkboxGroup.checkboxGroupSize||this._elFormItemSize||(this.$ELEMENT||{}).size},isLimitDisabled:function(){var e=this._checkboxGroup,t=e.max,n=e.min;return!(!t&&!n)&&this.model.length>=t&&!this.isChecked||this.model.length<=n&&this.isChecked},isDisabled:function(){return this._checkboxGroup?this._checkboxGroup.disabled||this.disabled||(this.elForm||{}).disabled||this.isLimitDisabled:this.disabled||(this.elForm||{}).disabled}},methods:{addToStore:function(){Array.isArray(this.model)&&-1===this.model.indexOf(this.label)?this.model.push(this.label):this.model=this.trueLabel||!0},handleChange:function(e){var t=this;if(!this.isLimitExceeded){var n=void 0;n=e.target.checked?void 0===this.trueLabel||this.trueLabel:void 0!==this.falseLabel&&this.falseLabel,this.$emit("change",n,e),this.$nextTick((function(){t._checkboxGroup&&t.dispatch("ElCheckboxGroup","change",[t._checkboxGroup.value])}))}}},created:function(){this.checked&&this.addToStore()}},yn=vn,Cn=a(yn,mn,_n,!1,null,null,null);Cn.options.__file="packages/checkbox/src/checkbox-button.vue";var En=Cn.exports;En.install=function(e){e.component(En.name,En)};var bn=En,Tn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-checkbox-group",attrs:{role:"group","aria-label":"checkbox-group"}},[e._t("default")],2)},Sn=[];Tn._withStripped=!0;var Rn={name:"ElCheckboxGroup",componentName:"ElCheckboxGroup",mixins:[O.a],inject:{elFormItem:{default:""}},props:{value:{},disabled:Boolean,min:Number,max:Number,size:String,fill:String,textColor:String},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},checkboxGroupSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size}},watch:{value:function(e){this.dispatch("ElFormItem","el.form.change",[e])}}},In=Rn,wn=a(In,Tn,Sn,!1,null,null,null);wn.options.__file="packages/checkbox/src/checkbox-group.vue";var On=wn.exports;On.install=function(e){e.component(On.name,On)};var kn=On,Mn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-switch",class:{"is-disabled":e.switchDisabled,"is-checked":e.checked},attrs:{role:"switch","aria-checked":e.checked,"aria-disabled":e.switchDisabled},on:{click:function(t){return t.preventDefault(),e.switchValue(t)}}},[n("input",{ref:"input",staticClass:"el-switch__input",attrs:{type:"checkbox",id:e.id,name:e.name,"true-value":e.activeValue,"false-value":e.inactiveValue,disabled:e.switchDisabled},on:{change:e.handleChange,keydown:function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.switchValue(t)}}}),e.inactiveIconClass||e.inactiveText?n("span",{class:["el-switch__label","el-switch__label--left",e.checked?"":"is-active"]},[e.inactiveIconClass?n("i",{class:[e.inactiveIconClass]}):e._e(),!e.inactiveIconClass&&e.inactiveText?n("span",{attrs:{"aria-hidden":e.checked}},[e._v(e._s(e.inactiveText))]):e._e()]):e._e(),n("span",{ref:"core",staticClass:"el-switch__core",style:{width:e.coreWidth+"px"}}),e.activeIconClass||e.activeText?n("span",{class:["el-switch__label","el-switch__label--right",e.checked?"is-active":""]},[e.activeIconClass?n("i",{class:[e.activeIconClass]}):e._e(),!e.activeIconClass&&e.activeText?n("span",{attrs:{"aria-hidden":!e.checked}},[e._v(e._s(e.activeText))]):e._e()]):e._e()])},xn=[];Mn._withStripped=!0;var Pn={name:"ElSwitch",mixins:[X()("input"),I.a,O.a],inject:{elForm:{default:""}},props:{value:{type:[Boolean,String,Number],default:!1},disabled:{type:Boolean,default:!1},width:{type:Number,default:40},activeIconClass:{type:String,default:""},inactiveIconClass:{type:String,default:""},activeText:String,inactiveText:String,activeColor:{type:String,default:""},inactiveColor:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},id:String},data:function(){return{coreWidth:this.width}},created:function(){~[this.activeValue,this.inactiveValue].indexOf(this.value)||this.$emit("input",this.inactiveValue)},computed:{checked:function(){return this.value===this.activeValue},switchDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},watch:{checked:function(){this.$refs.input.checked=this.checked,(this.activeColor||this.inactiveColor)&&this.setBackgroundColor(),this.validateEvent&&this.dispatch("ElFormItem","el.form.change",[this.value])}},methods:{handleChange:function(e){var t=this,n=this.checked?this.inactiveValue:this.activeValue;this.$emit("input",n),this.$emit("change",n),this.$nextTick((function(){t.$refs.input.checked=t.checked}))},setBackgroundColor:function(){var e=this.checked?this.activeColor:this.inactiveColor;this.$refs.core.style.borderColor=e,this.$refs.core.style.backgroundColor=e},switchValue:function(){!this.switchDisabled&&this.handleChange()},getMigratingConfig:function(){return{props:{"on-color":"on-color is renamed to active-color.","off-color":"off-color is renamed to inactive-color.","on-text":"on-text is renamed to active-text.","off-text":"off-text is renamed to inactive-text.","on-value":"on-value is renamed to active-value.","off-value":"off-value is renamed to inactive-value.","on-icon-class":"on-icon-class is renamed to active-icon-class.","off-icon-class":"off-icon-class is renamed to inactive-icon-class."}}}},mounted:function(){this.coreWidth=this.width||40,(this.activeColor||this.inactiveColor)&&this.setBackgroundColor(),this.$refs.input.checked=this.checked}},An=Pn,Dn=a(An,Mn,xn,!1,null,null,null);Dn.options.__file="packages/switch/src/component.vue";var Nn=Dn.exports;Nn.install=function(e){e.component(Nn.name,Nn)};var Ln=Nn,Un=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleClose,expression:"handleClose"}],staticClass:"el-select",class:[e.selectSize?"el-select--"+e.selectSize:""],on:{click:function(t){return t.stopPropagation(),e.toggleMenu(t)}}},[e.multiple?n("div",{ref:"tags",staticClass:"el-select__tags",style:{"max-width":e.inputWidth-32+"px",width:"100%"}},[e.collapseTags&&e.selected.length?n("span",[n("el-tag",{attrs:{closable:!e.selectDisabled,size:e.collapseTagSize,hit:e.selected[0].hitState,type:"info","disable-transitions":""},on:{close:function(t){e.deleteTag(t,e.selected[0])}}},[n("span",{staticClass:"el-select__tags-text"},[e._v(e._s(e.selected[0].currentLabel))])]),e.selected.length>1?n("el-tag",{attrs:{closable:!1,size:e.collapseTagSize,type:"info","disable-transitions":""}},[n("span",{staticClass:"el-select__tags-text"},[e._v("+ "+e._s(e.selected.length-1))])]):e._e()],1):e._e(),e.collapseTags?e._e():n("transition-group",{on:{"after-leave":e.resetInputHeight}},e._l(e.selected,(function(t){return n("el-tag",{key:e.getValueKey(t),attrs:{closable:!e.selectDisabled,size:e.collapseTagSize,hit:t.hitState,type:"info","disable-transitions":""},on:{close:function(n){e.deleteTag(n,t)}}},[n("span",{staticClass:"el-select__tags-text"},[e._v(e._s(t.currentLabel))])])})),1),e.filterable?n("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],ref:"input",staticClass:"el-select__input",class:[e.selectSize?"is-"+e.selectSize:""],style:{"flex-grow":"1",width:e.inputLength/(e.inputWidth-32)+"%","max-width":e.inputWidth-42+"px"},attrs:{type:"text",disabled:e.selectDisabled,autocomplete:e.autoComplete||e.autocomplete},domProps:{value:e.query},on:{focus:e.handleFocus,blur:function(t){e.softFocus=!1},keyup:e.managePlaceholder,keydown:[e.resetInputState,function(t){if(!("button"in t)&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"]))return null;t.preventDefault(),e.navigateOptions("next")},function(t){if(!("button"in t)&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"]))return null;t.preventDefault(),e.navigateOptions("prev")},function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.selectOption(t))},function(t){if(!("button"in t)&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;t.stopPropagation(),t.preventDefault(),e.visible=!1},function(t){return!("button"in t)&&e._k(t.keyCode,"delete",[8,46],t.key,["Backspace","Delete","Del"])?null:e.deletePrevTag(t)},function(t){if(!("button"in t)&&e._k(t.keyCode,"tab",9,t.key,"Tab"))return null;e.visible=!1}],compositionstart:e.handleComposition,compositionupdate:e.handleComposition,compositionend:e.handleComposition,input:[function(t){t.target.composing||(e.query=t.target.value)},e.debouncedQueryChange]}}):e._e()],1):e._e(),n("el-input",{ref:"reference",class:{"is-focus":e.visible},attrs:{type:"text",placeholder:e.currentPlaceholder,name:e.name,id:e.id,autocomplete:e.autoComplete||e.autocomplete,size:e.selectSize,disabled:e.selectDisabled,readonly:e.readonly,"validate-event":!1,tabindex:e.multiple&&e.filterable?"-1":null},on:{focus:e.handleFocus,blur:e.handleBlur,input:e.debouncedOnInputChange},nativeOn:{keydown:[function(t){if(!("button"in t)&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"]))return null;t.stopPropagation(),t.preventDefault(),e.navigateOptions("next")},function(t){if(!("button"in t)&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"]))return null;t.stopPropagation(),t.preventDefault(),e.navigateOptions("prev")},function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.selectOption(t))},function(t){if(!("button"in t)&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;t.stopPropagation(),t.preventDefault(),e.visible=!1},function(t){if(!("button"in t)&&e._k(t.keyCode,"tab",9,t.key,"Tab"))return null;e.visible=!1}],mouseenter:function(t){e.inputHovering=!0},mouseleave:function(t){e.inputHovering=!1}},model:{value:e.selectedLabel,callback:function(t){e.selectedLabel=t},expression:"selectedLabel"}},[e.$slots.prefix?n("template",{slot:"prefix"},[e._t("prefix")],2):e._e(),n("template",{slot:"suffix"},[n("i",{directives:[{name:"show",rawName:"v-show",value:!e.showClose,expression:"!showClose"}],class:["el-select__caret","el-input__icon","el-icon-"+e.iconClass]}),e.showClose?n("i",{staticClass:"el-select__caret el-input__icon el-icon-circle-close",on:{click:e.handleClearClick}}):e._e()])],2),n("transition",{attrs:{name:"el-zoom-in-top"},on:{"before-enter":e.handleMenuEnter,"after-leave":e.doDestroy}},[n("el-select-menu",{directives:[{name:"show",rawName:"v-show",value:e.visible&&!1!==e.emptyText,expression:"visible && emptyText !== false"}],ref:"popper",attrs:{"append-to-body":e.popperAppendToBody}},[n("el-scrollbar",{directives:[{name:"show",rawName:"v-show",value:e.options.length>0&&!e.loading,expression:"options.length > 0 && !loading"}],ref:"scrollbar",class:{"is-empty":!e.allowCreate&&e.query&&0===e.filteredOptionsCount},attrs:{tag:"ul","wrap-class":"el-select-dropdown__wrap","view-class":"el-select-dropdown__list"}},[e.showNewOption?n("el-option",{attrs:{value:e.query,created:""}}):e._e(),e._t("default")],2),e.emptyText&&(!e.allowCreate||e.loading||e.allowCreate&&0===e.options.length)?[e.$slots.empty?e._t("empty"):n("p",{staticClass:"el-select-dropdown__empty"},[e._v("\n          "+e._s(e.emptyText)+"\n        ")])]:e._e()],2)],1)],1)},Bn=[];Un._withStripped=!0;var Vn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-select-dropdown el-popper",class:[{"is-multiple":e.$parent.multiple},e.popperClass],style:{minWidth:e.minWidth}},[e._t("default")],2)},jn=[];Vn._withStripped=!0;var Fn={name:"ElSelectDropdown",componentName:"ElSelectDropdown",mixins:[H.a],props:{placement:{default:"bottom-start"},boundariesPadding:{default:0},popperOptions:{default:function(){return{gpuAcceleration:!1}}},visibleArrow:{default:!0},appendToBody:{type:Boolean,default:!0}},data:function(){return{minWidth:""}},computed:{popperClass:function(){return this.$parent.popperClass}},watch:{"$parent.inputWidth":function(){this.minWidth=this.$parent.$el.getBoundingClientRect().width+"px"}},mounted:function(){var e=this;this.referenceElm=this.$parent.$refs.reference.$el,this.$parent.popperElm=this.popperElm=this.$el,this.$on("updatePopper",(function(){e.$parent.visible&&e.updatePopper()})),this.$on("destroyPopper",this.destroyPopper)}},$n=Fn,Hn=a($n,Vn,jn,!1,null,null,null);Hn.options.__file="packages/select/src/select-dropdown.vue";var Kn=Hn.exports,Wn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-select-dropdown__item",class:{selected:e.itemSelected,"is-disabled":e.disabled||e.groupDisabled||e.limitReached,hover:e.hover},on:{mouseenter:e.hoverItem,click:function(t){return t.stopPropagation(),e.selectOptionClick(t)}}},[e._t("default",[n("span",[e._v(e._s(e.currentLabel))])])],2)},qn=[];Wn._withStripped=!0;var Gn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zn={mixins:[O.a],name:"ElOption",componentName:"ElOption",inject:["select"],props:{value:{required:!0},label:[String,Number],created:Boolean,disabled:{type:Boolean,default:!1}},data:function(){return{index:-1,groupDisabled:!1,visible:!0,hitState:!1,hover:!1}},computed:{isObject:function(){return"[object object]"===Object.prototype.toString.call(this.value).toLowerCase()},currentLabel:function(){return this.label||(this.isObject?"":this.value)},currentValue:function(){return this.value||this.label||""},itemSelected:function(){return this.select.multiple?this.contains(this.select.value,this.value):this.isEqual(this.value,this.select.value)},limitReached:function(){return!!this.select.multiple&&(!this.itemSelected&&(this.select.value||[]).length>=this.select.multipleLimit&&this.select.multipleLimit>0)}},watch:{currentLabel:function(){this.created||this.select.remote||this.dispatch("ElSelect","setSelected")},value:function(e,t){var n=this.select,i=n.remote,r=n.valueKey;if(!this.created&&!i){if(r&&"object"===("undefined"===typeof e?"undefined":Gn(e))&&"object"===("undefined"===typeof t?"undefined":Gn(t))&&e[r]===t[r])return;this.dispatch("ElSelect","setSelected")}}},methods:{isEqual:function(e,t){if(this.isObject){var n=this.select.valueKey;return Object(v["getValueByPath"])(e,n)===Object(v["getValueByPath"])(t,n)}return e===t},contains:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];if(this.isObject){var n=this.select.valueKey;return e&&e.some((function(e){return Object(v["getValueByPath"])(e,n)===Object(v["getValueByPath"])(t,n)}))}return e&&e.indexOf(t)>-1},handleGroupDisabled:function(e){this.groupDisabled=e},hoverItem:function(){this.disabled||this.groupDisabled||(this.select.hoverIndex=this.select.options.indexOf(this))},selectOptionClick:function(){!0!==this.disabled&&!0!==this.groupDisabled&&this.dispatch("ElSelect","handleOptionClick",[this,!0])},queryChange:function(e){this.visible=new RegExp(Object(v["escapeRegexpString"])(e),"i").test(this.currentLabel)||this.created,this.visible||this.select.filteredOptionsCount--}},created:function(){this.select.options.push(this),this.select.cachedOptions.push(this),this.select.optionsCount++,this.select.filteredOptionsCount++,this.$on("queryChange",this.queryChange),this.$on("handleGroupDisabled",this.handleGroupDisabled)},beforeDestroy:function(){var e=this.select,t=e.selected,n=e.multiple,i=n?t:[t],r=this.select.cachedOptions.indexOf(this),o=i.indexOf(this);r>-1&&o<0&&this.select.cachedOptions.splice(r,1),this.select.onOptionDestroy(this.select.options.indexOf(this))}},Yn=zn,Jn=a(Yn,Wn,qn,!1,null,null,null);Jn.options.__file="packages/select/src/option.vue";var Xn=Jn.exports,Qn=n(29),Zn=n.n(Qn),ei=n(14),ti=n(27),ni=n.n(ti),ii={data:function(){return{hoverOption:-1}},computed:{optionsAllDisabled:function(){return this.options.filter((function(e){return e.visible})).every((function(e){return e.disabled}))}},watch:{hoverIndex:function(e){var t=this;"number"===typeof e&&e>-1&&(this.hoverOption=this.options[e]||{}),this.options.forEach((function(e){e.hover=t.hoverOption===e}))}},methods:{navigateOptions:function(e){var t=this;if(this.visible){if(0!==this.options.length&&0!==this.filteredOptionsCount&&!this.optionsAllDisabled){"next"===e?(this.hoverIndex++,this.hoverIndex===this.options.length&&(this.hoverIndex=0)):"prev"===e&&(this.hoverIndex--,this.hoverIndex<0&&(this.hoverIndex=this.options.length-1));var n=this.options[this.hoverIndex];!0!==n.disabled&&!0!==n.groupDisabled&&n.visible||this.navigateOptions(e),this.$nextTick((function(){return t.scrollToOption(t.hoverOption)}))}}else this.visible=!0}}},ri={mixins:[O.a,_.a,X()("reference"),ii],name:"ElSelect",componentName:"ElSelect",inject:{elForm:{default:""},elFormItem:{default:""}},provide:function(){return{select:this}},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},readonly:function(){return!this.filterable||this.multiple||!Object(v["isIE"])()&&!Object(v["isEdge"])()&&!this.visible},showClose:function(){var e=this.multiple?Array.isArray(this.value)&&this.value.length>0:void 0!==this.value&&null!==this.value&&""!==this.value,t=this.clearable&&!this.selectDisabled&&this.inputHovering&&e;return t},iconClass:function(){return this.remote&&this.filterable?"":this.visible?"arrow-up is-reverse":"arrow-up"},debounce:function(){return this.remote?300:0},emptyText:function(){return this.loading?this.loadingText||this.t("el.select.loading"):(!this.remote||""!==this.query||0!==this.options.length)&&(this.filterable&&this.query&&this.options.length>0&&0===this.filteredOptionsCount?this.noMatchText||this.t("el.select.noMatch"):0===this.options.length?this.noDataText||this.t("el.select.noData"):null)},showNewOption:function(){var e=this,t=this.options.filter((function(e){return!e.created})).some((function(t){return t.currentLabel===e.query}));return this.filterable&&this.allowCreate&&""!==this.query&&!t},selectSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},selectDisabled:function(){return this.disabled||(this.elForm||{}).disabled},collapseTagSize:function(){return["small","mini"].indexOf(this.selectSize)>-1?"mini":"small"},propPlaceholder:function(){return"undefined"!==typeof this.placeholder?this.placeholder:this.t("el.select.placeholder")}},components:{ElInput:g.a,ElSelectMenu:Kn,ElOption:Xn,ElTag:Zn.a,ElScrollbar:W.a},directives:{Clickoutside:V.a},props:{name:String,id:String,value:{required:!0},autocomplete:{type:String,default:"off"},autoComplete:{type:String,validator:function(e){return!0}},automaticDropdown:Boolean,size:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:String,remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String,required:!1},defaultFirstOption:Boolean,reserveKeyword:Boolean,valueKey:{type:String,default:"value"},collapseTags:Boolean,popperAppendToBody:{type:Boolean,default:!0}},data:function(){return{options:[],cachedOptions:[],createdLabel:null,createdSelected:!1,selected:this.multiple?[]:{},inputLength:20,inputWidth:0,initialInputHeight:0,cachedPlaceHolder:"",optionsCount:0,filteredOptionsCount:0,visible:!1,softFocus:!1,selectedLabel:"",hoverIndex:-1,query:"",previousQuery:null,inputHovering:!1,currentPlaceholder:"",menuVisibleOnFocus:!1,isOnComposition:!1,isSilentBlur:!1}},watch:{selectDisabled:function(){var e=this;this.$nextTick((function(){e.resetInputHeight()}))},propPlaceholder:function(e){this.cachedPlaceHolder=this.currentPlaceholder=e},value:function(e,t){this.multiple&&(this.resetInputHeight(),e&&e.length>0||this.$refs.input&&""!==this.query?this.currentPlaceholder="":this.currentPlaceholder=this.cachedPlaceHolder,this.filterable&&!this.reserveKeyword&&(this.query="",this.handleQueryChange(this.query))),this.setSelected(),this.filterable&&!this.multiple&&(this.inputLength=20),Object(v["valueEquals"])(e,t)||this.dispatch("ElFormItem","el.form.change",e)},visible:function(e){var t=this;e?(this.broadcast("ElSelectDropdown","updatePopper"),this.filterable&&(this.query=this.remote?"":this.selectedLabel,this.handleQueryChange(this.query),this.multiple?this.$refs.input.focus():(this.remote||(this.broadcast("ElOption","queryChange",""),this.broadcast("ElOptionGroup","queryChange")),this.selectedLabel&&(this.currentPlaceholder=this.selectedLabel,this.selectedLabel="")))):(this.broadcast("ElSelectDropdown","destroyPopper"),this.$refs.input&&this.$refs.input.blur(),this.query="",this.previousQuery=null,this.selectedLabel="",this.inputLength=20,this.menuVisibleOnFocus=!1,this.resetHoverIndex(),this.$nextTick((function(){t.$refs.input&&""===t.$refs.input.value&&0===t.selected.length&&(t.currentPlaceholder=t.cachedPlaceHolder)})),this.multiple||(this.selected&&(this.filterable&&this.allowCreate&&this.createdSelected&&this.createdLabel?this.selectedLabel=this.createdLabel:this.selectedLabel=this.selected.currentLabel,this.filterable&&(this.query=this.selectedLabel)),this.filterable&&(this.currentPlaceholder=this.cachedPlaceHolder))),this.$emit("visible-change",e)},options:function(){var e=this;if(!this.$isServer){this.$nextTick((function(){e.broadcast("ElSelectDropdown","updatePopper")})),this.multiple&&this.resetInputHeight();var t=this.$el.querySelectorAll("input");-1===[].indexOf.call(t,document.activeElement)&&this.setSelected(),this.defaultFirstOption&&(this.filterable||this.remote)&&this.filteredOptionsCount&&this.checkDefaultFirstOption()}}},methods:{handleComposition:function(e){var t=this,n=e.target.value;if("compositionend"===e.type)this.isOnComposition=!1,this.$nextTick((function(e){return t.handleQueryChange(n)}));else{var i=n[n.length-1]||"";this.isOnComposition=!Object(It["isKorean"])(i)}},handleQueryChange:function(e){var t=this;this.previousQuery===e||this.isOnComposition||(null!==this.previousQuery||"function"!==typeof this.filterMethod&&"function"!==typeof this.remoteMethod?(this.previousQuery=e,this.$nextTick((function(){t.visible&&t.broadcast("ElSelectDropdown","updatePopper")})),this.hoverIndex=-1,this.multiple&&this.filterable&&this.$nextTick((function(){var e=15*t.$refs.input.value.length+20;t.inputLength=t.collapseTags?Math.min(50,e):e,t.managePlaceholder(),t.resetInputHeight()})),this.remote&&"function"===typeof this.remoteMethod?(this.hoverIndex=-1,this.remoteMethod(e)):"function"===typeof this.filterMethod?(this.filterMethod(e),this.broadcast("ElOptionGroup","queryChange")):(this.filteredOptionsCount=this.optionsCount,this.broadcast("ElOption","queryChange",e),this.broadcast("ElOptionGroup","queryChange")),this.defaultFirstOption&&(this.filterable||this.remote)&&this.filteredOptionsCount&&this.checkDefaultFirstOption()):this.previousQuery=e)},scrollToOption:function(e){var t=Array.isArray(e)&&e[0]?e[0].$el:e.$el;if(this.$refs.popper&&t){var n=this.$refs.popper.$el.querySelector(".el-select-dropdown__wrap");ni()(n,t)}this.$refs.scrollbar&&this.$refs.scrollbar.handleScroll()},handleMenuEnter:function(){var e=this;this.$nextTick((function(){return e.scrollToOption(e.selected)}))},emitChange:function(e){Object(v["valueEquals"])(this.value,e)||this.$emit("change",e)},getOption:function(e){for(var t=void 0,n="[object object]"===Object.prototype.toString.call(e).toLowerCase(),i="[object null]"===Object.prototype.toString.call(e).toLowerCase(),r="[object undefined]"===Object.prototype.toString.call(e).toLowerCase(),o=this.cachedOptions.length-1;o>=0;o--){var s=this.cachedOptions[o],a=n?Object(v["getValueByPath"])(s.value,this.valueKey)===Object(v["getValueByPath"])(e,this.valueKey):s.value===e;if(a){t=s;break}}if(t)return t;var c=n||i||r?"":String(e),l={value:e,currentLabel:c};return this.multiple&&(l.hitState=!1),l},setSelected:function(){var e=this;if(!this.multiple){var t=this.getOption(this.value);return t.created?(this.createdLabel=t.currentLabel,this.createdSelected=!0):this.createdSelected=!1,this.selectedLabel=t.currentLabel,this.selected=t,void(this.filterable&&(this.query=this.selectedLabel))}var n=[];Array.isArray(this.value)&&this.value.forEach((function(t){n.push(e.getOption(t))})),this.selected=n,this.$nextTick((function(){e.resetInputHeight()}))},handleFocus:function(e){this.softFocus?this.softFocus=!1:((this.automaticDropdown||this.filterable)&&(this.visible=!0,this.filterable&&(this.menuVisibleOnFocus=!0)),this.$emit("focus",e))},blur:function(){this.visible=!1,this.$refs.reference.blur()},handleBlur:function(e){var t=this;setTimeout((function(){t.isSilentBlur?t.isSilentBlur=!1:t.$emit("blur",e)}),50),this.softFocus=!1},handleClearClick:function(e){this.deleteSelected(e)},doDestroy:function(){this.$refs.popper&&this.$refs.popper.doDestroy()},handleClose:function(){this.visible=!1},toggleLastOptionHitState:function(e){if(Array.isArray(this.selected)){var t=this.selected[this.selected.length-1];if(t)return!0===e||!1===e?(t.hitState=e,e):(t.hitState=!t.hitState,t.hitState)}},deletePrevTag:function(e){if(e.target.value.length<=0&&!this.toggleLastOptionHitState()){var t=this.value.slice();t.pop(),this.$emit("input",t),this.emitChange(t)}},managePlaceholder:function(){""!==this.currentPlaceholder&&(this.currentPlaceholder=this.$refs.input.value?"":this.cachedPlaceHolder)},resetInputState:function(e){8!==e.keyCode&&this.toggleLastOptionHitState(!1),this.inputLength=15*this.$refs.input.value.length+20,this.resetInputHeight()},resetInputHeight:function(){var e=this;this.collapseTags&&!this.filterable||this.$nextTick((function(){if(e.$refs.reference){var t=e.$refs.reference.$el.childNodes,n=[].filter.call(t,(function(e){return"INPUT"===e.tagName}))[0],i=e.$refs.tags,r=i?Math.round(i.getBoundingClientRect().height):0,o=e.initialInputHeight||40;n.style.height=0===e.selected.length?o+"px":Math.max(i?r+(r>o?6:0):0,o)+"px",e.visible&&!1!==e.emptyText&&e.broadcast("ElSelectDropdown","updatePopper")}}))},resetHoverIndex:function(){var e=this;setTimeout((function(){e.multiple?e.selected.length>0?e.hoverIndex=Math.min.apply(null,e.selected.map((function(t){return e.options.indexOf(t)}))):e.hoverIndex=-1:e.hoverIndex=e.options.indexOf(e.selected)}),300)},handleOptionSelect:function(e,t){var n=this;if(this.multiple){var i=(this.value||[]).slice(),r=this.getValueIndex(i,e.value);r>-1?i.splice(r,1):(this.multipleLimit<=0||i.length<this.multipleLimit)&&i.push(e.value),this.$emit("input",i),this.emitChange(i),e.created&&(this.query="",this.handleQueryChange(""),this.inputLength=20),this.filterable&&this.$refs.input.focus()}else this.$emit("input",e.value),this.emitChange(e.value),this.visible=!1;this.isSilentBlur=t,this.setSoftFocus(),this.visible||this.$nextTick((function(){n.scrollToOption(e)}))},setSoftFocus:function(){this.softFocus=!0;var e=this.$refs.input||this.$refs.reference;e&&e.focus()},getValueIndex:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],n="[object object]"===Object.prototype.toString.call(t).toLowerCase();if(n){var i=this.valueKey,r=-1;return e.some((function(e,n){return Object(v["getValueByPath"])(e,i)===Object(v["getValueByPath"])(t,i)&&(r=n,!0)})),r}return e.indexOf(t)},toggleMenu:function(){this.selectDisabled||(this.menuVisibleOnFocus?this.menuVisibleOnFocus=!1:this.visible=!this.visible,this.visible&&(this.$refs.input||this.$refs.reference).focus())},selectOption:function(){this.visible?this.options[this.hoverIndex]&&this.handleOptionSelect(this.options[this.hoverIndex]):this.toggleMenu()},deleteSelected:function(e){e.stopPropagation();var t=this.multiple?[]:"";this.$emit("input",t),this.emitChange(t),this.visible=!1,this.$emit("clear")},deleteTag:function(e,t){var n=this.selected.indexOf(t);if(n>-1&&!this.selectDisabled){var i=this.value.slice();i.splice(n,1),this.$emit("input",i),this.emitChange(i),this.$emit("remove-tag",t.value)}e.stopPropagation()},onInputChange:function(){this.filterable&&this.query!==this.selectedLabel&&(this.query=this.selectedLabel,this.handleQueryChange(this.query))},onOptionDestroy:function(e){e>-1&&(this.optionsCount--,this.filteredOptionsCount--,this.options.splice(e,1))},resetInputWidth:function(){this.inputWidth=this.$refs.reference.$el.getBoundingClientRect().width},handleResize:function(){this.resetInputWidth(),this.multiple&&this.resetInputHeight()},checkDefaultFirstOption:function(){this.hoverIndex=-1;for(var e=!1,t=this.options.length-1;t>=0;t--)if(this.options[t].created){e=!0,this.hoverIndex=t;break}if(!e)for(var n=0;n!==this.options.length;++n){var i=this.options[n];if(this.query){if(!i.disabled&&!i.groupDisabled&&i.visible){this.hoverIndex=n;break}}else if(i.itemSelected){this.hoverIndex=n;break}}},getValueKey:function(e){return"[object object]"!==Object.prototype.toString.call(e.value).toLowerCase()?e.value:Object(v["getValueByPath"])(e.value,this.valueKey)}},created:function(){var e=this;this.cachedPlaceHolder=this.currentPlaceholder=this.propPlaceholder,this.multiple&&!Array.isArray(this.value)&&this.$emit("input",[]),!this.multiple&&Array.isArray(this.value)&&this.$emit("input",""),this.debouncedOnInputChange=U()(this.debounce,(function(){e.onInputChange()})),this.debouncedQueryChange=U()(this.debounce,(function(t){e.handleQueryChange(t.target.value)})),this.$on("handleOptionClick",this.handleOptionSelect),this.$on("setSelected",this.setSelected)},mounted:function(){var e=this;this.multiple&&Array.isArray(this.value)&&this.value.length>0&&(this.currentPlaceholder=""),Object(ei["addResizeListener"])(this.$el,this.handleResize);var t=this.$refs.reference;if(t&&t.$el){var n={medium:36,small:32,mini:28},i=t.$el.querySelector("input");this.initialInputHeight=i.getBoundingClientRect().height||n[this.selectSize]}this.remote&&this.multiple&&this.resetInputHeight(),this.$nextTick((function(){t&&t.$el&&(e.inputWidth=t.$el.getBoundingClientRect().width)})),this.setSelected()},beforeDestroy:function(){this.$el&&this.handleResize&&Object(ei["removeResizeListener"])(this.$el,this.handleResize)}},oi=ri,si=a(oi,Un,Bn,!1,null,null,null);si.options.__file="packages/select/src/select.vue";var ai=si.exports;ai.install=function(e){e.component(ai.name,ai)};var ci=ai;Xn.install=function(e){e.component(Xn.name,Xn)};var li=Xn,ui=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-select-group__wrap"},[n("li",{staticClass:"el-select-group__title"},[e._v(e._s(e.label))]),n("li",[n("ul",{staticClass:"el-select-group"},[e._t("default")],2)])])},di=[];ui._withStripped=!0;var hi={mixins:[O.a],name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:{type:Boolean,default:!1}},data:function(){return{visible:!0}},watch:{disabled:function(e){this.broadcast("ElOption","handleGroupDisabled",e)}},methods:{queryChange:function(){this.visible=this.$children&&Array.isArray(this.$children)&&this.$children.some((function(e){return!0===e.visible}))}},created:function(){this.$on("queryChange",this.queryChange)},mounted:function(){this.disabled&&this.broadcast("ElOption","handleGroupDisabled",this.disabled)}},pi=hi,fi=a(pi,ui,di,!1,null,null,null);fi.options.__file="packages/select/src/option-group.vue";var gi=fi.exports;gi.install=function(e){e.component(gi.name,gi)};var mi=gi,_i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"el-button",class:[e.type?"el-button--"+e.type:"",e.buttonSize?"el-button--"+e.buttonSize:"",{"is-disabled":e.buttonDisabled,"is-loading":e.loading,"is-plain":e.plain,"is-round":e.round,"is-circle":e.circle}],attrs:{disabled:e.buttonDisabled||e.loading,autofocus:e.autofocus,type:e.nativeType},on:{click:e.handleClick}},[e.loading?n("i",{staticClass:"el-icon-loading"}):e._e(),e.icon&&!e.loading?n("i",{class:e.icon}):e._e(),e.$slots.default?n("span",[e._t("default")],2):e._e()])},vi=[];_i._withStripped=!0;var yi={name:"ElButton",inject:{elForm:{default:""},elFormItem:{default:""}},props:{type:{type:String,default:"default"},size:String,icon:{type:String,default:""},nativeType:{type:String,default:"button"},loading:Boolean,disabled:Boolean,plain:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},buttonSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},buttonDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},methods:{handleClick:function(e){this.$emit("click",e)}}},Ci=yi,Ei=a(Ci,_i,vi,!1,null,null,null);Ei.options.__file="packages/button/src/button.vue";var bi=Ei.exports;bi.install=function(e){e.component(bi.name,bi)};var Ti=bi,Si=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-button-group"},[e._t("default")],2)},Ri=[];Si._withStripped=!0;var Ii={name:"ElButtonGroup"},wi=Ii,Oi=a(wi,Si,Ri,!1,null,null,null);Oi.options.__file="packages/button/src/button-group.vue";var ki=Oi.exports;ki.install=function(e){e.component(ki.name,ki)};var Mi=ki,xi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-table",class:[{"el-table--fit":e.fit,"el-table--striped":e.stripe,"el-table--border":e.border||e.isGroup,"el-table--hidden":e.isHidden,"el-table--group":e.isGroup,"el-table--fluid-height":e.maxHeight,"el-table--scrollable-x":e.layout.scrollX,"el-table--scrollable-y":e.layout.scrollY,"el-table--enable-row-hover":!e.store.states.isComplex,"el-table--enable-row-transition":0!==(e.store.states.data||[]).length&&(e.store.states.data||[]).length<100},e.tableSize?"el-table--"+e.tableSize:""],on:{mouseleave:function(t){e.handleMouseLeave(t)}}},[n("div",{ref:"hiddenColumns",staticClass:"hidden-columns"},[e._t("default")],2),e.showHeader?n("div",{directives:[{name:"mousewheel",rawName:"v-mousewheel",value:e.handleHeaderFooterMousewheel,expression:"handleHeaderFooterMousewheel"}],ref:"headerWrapper",staticClass:"el-table__header-wrapper"},[n("table-header",{ref:"tableHeader",style:{width:e.layout.bodyWidth?e.layout.bodyWidth+"px":""},attrs:{store:e.store,border:e.border,"default-sort":e.defaultSort}})],1):e._e(),n("div",{ref:"bodyWrapper",staticClass:"el-table__body-wrapper",class:[e.layout.scrollX?"is-scrolling-"+e.scrollPosition:"is-scrolling-none"],style:[e.bodyHeight]},[n("table-body",{style:{width:e.bodyWidth},attrs:{context:e.context,store:e.store,stripe:e.stripe,"row-class-name":e.rowClassName,"row-style":e.rowStyle,highlight:e.highlightCurrentRow}}),e.data&&0!==e.data.length?e._e():n("div",{ref:"emptyBlock",staticClass:"el-table__empty-block",style:e.emptyBlockStyle},[n("span",{staticClass:"el-table__empty-text"},[e._t("empty",[e._v(e._s(e.emptyText||e.t("el.table.emptyText")))])],2)]),e.$slots.append?n("div",{ref:"appendWrapper",staticClass:"el-table__append-wrapper"},[e._t("append")],2):e._e()],1),e.showSummary?n("div",{directives:[{name:"show",rawName:"v-show",value:e.data&&e.data.length>0,expression:"data && data.length > 0"},{name:"mousewheel",rawName:"v-mousewheel",value:e.handleHeaderFooterMousewheel,expression:"handleHeaderFooterMousewheel"}],ref:"footerWrapper",staticClass:"el-table__footer-wrapper"},[n("table-footer",{style:{width:e.layout.bodyWidth?e.layout.bodyWidth+"px":""},attrs:{store:e.store,border:e.border,"sum-text":e.sumText||e.t("el.table.sumText"),"summary-method":e.summaryMethod,"default-sort":e.defaultSort}})],1):e._e(),e.fixedColumns.length>0?n("div",{directives:[{name:"mousewheel",rawName:"v-mousewheel",value:e.handleFixedMousewheel,expression:"handleFixedMousewheel"}],ref:"fixedWrapper",staticClass:"el-table__fixed",style:[{width:e.layout.fixedWidth?e.layout.fixedWidth+"px":""},e.fixedHeight]},[e.showHeader?n("div",{ref:"fixedHeaderWrapper",staticClass:"el-table__fixed-header-wrapper"},[n("table-header",{ref:"fixedTableHeader",style:{width:e.bodyWidth},attrs:{fixed:"left",border:e.border,store:e.store}})],1):e._e(),n("div",{ref:"fixedBodyWrapper",staticClass:"el-table__fixed-body-wrapper",style:[{top:e.layout.headerHeight+"px"},e.fixedBodyHeight]},[n("table-body",{style:{width:e.bodyWidth},attrs:{fixed:"left",store:e.store,stripe:e.stripe,highlight:e.highlightCurrentRow,"row-class-name":e.rowClassName,"row-style":e.rowStyle}}),e.$slots.append?n("div",{staticClass:"el-table__append-gutter",style:{height:e.layout.appendHeight+"px"}}):e._e()],1),e.showSummary?n("div",{directives:[{name:"show",rawName:"v-show",value:e.data&&e.data.length>0,expression:"data && data.length > 0"}],ref:"fixedFooterWrapper",staticClass:"el-table__fixed-footer-wrapper"},[n("table-footer",{style:{width:e.bodyWidth},attrs:{fixed:"left",border:e.border,"sum-text":e.sumText||e.t("el.table.sumText"),"summary-method":e.summaryMethod,store:e.store}})],1):e._e()]):e._e(),e.rightFixedColumns.length>0?n("div",{directives:[{name:"mousewheel",rawName:"v-mousewheel",value:e.handleFixedMousewheel,expression:"handleFixedMousewheel"}],ref:"rightFixedWrapper",staticClass:"el-table__fixed-right",style:[{width:e.layout.rightFixedWidth?e.layout.rightFixedWidth+"px":"",right:e.layout.scrollY?(e.border?e.layout.gutterWidth:e.layout.gutterWidth||0)+"px":""},e.fixedHeight]},[e.showHeader?n("div",{ref:"rightFixedHeaderWrapper",staticClass:"el-table__fixed-header-wrapper"},[n("table-header",{ref:"rightFixedTableHeader",style:{width:e.bodyWidth},attrs:{fixed:"right",border:e.border,store:e.store}})],1):e._e(),n("div",{ref:"rightFixedBodyWrapper",staticClass:"el-table__fixed-body-wrapper",style:[{top:e.layout.headerHeight+"px"},e.fixedBodyHeight]},[n("table-body",{style:{width:e.bodyWidth},attrs:{fixed:"right",store:e.store,stripe:e.stripe,"row-class-name":e.rowClassName,"row-style":e.rowStyle,highlight:e.highlightCurrentRow}}),e.$slots.append?n("div",{staticClass:"el-table__append-gutter",style:{height:e.layout.appendHeight+"px"}}):e._e()],1),e.showSummary?n("div",{directives:[{name:"show",rawName:"v-show",value:e.data&&e.data.length>0,expression:"data && data.length > 0"}],ref:"rightFixedFooterWrapper",staticClass:"el-table__fixed-footer-wrapper"},[n("table-footer",{style:{width:e.bodyWidth},attrs:{fixed:"right",border:e.border,"sum-text":e.sumText||e.t("el.table.sumText"),"summary-method":e.summaryMethod,store:e.store}})],1):e._e()]):e._e(),e.rightFixedColumns.length>0?n("div",{ref:"rightFixedPatch",staticClass:"el-table__fixed-right-patch",style:{width:e.layout.scrollY?e.layout.gutterWidth+"px":"0",height:e.layout.headerHeight+"px"}}):e._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:e.resizeProxyVisible,expression:"resizeProxyVisible"}],ref:"resizeProxy",staticClass:"el-table__column-resize-proxy"})])},Pi=[];xi._withStripped=!0;var Ai=n(17),Di=n.n(Ai),Ni=n(35),Li=n(38),Ui=n.n(Li),Bi="undefined"!==typeof navigator&&navigator.userAgent.toLowerCase().indexOf("firefox")>-1,Vi=function(e,t){e&&e.addEventListener&&e.addEventListener(Bi?"DOMMouseScroll":"mousewheel",(function(e){var n=Ui()(e);t&&t.apply(this,[e,n])}))},ji={bind:function(e,t){Vi(e,t.value)}},Fi=n(6),$i=n.n(Fi),Hi="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ki=function(e){var t=e.target;while(t&&"HTML"!==t.tagName.toUpperCase()){if("TD"===t.tagName.toUpperCase())return t;t=t.parentNode}return null},Wi=function(e){return null!==e&&"object"===("undefined"===typeof e?"undefined":Hi(e))},qi=function(e,t,n,i,r){if(!t&&!i&&(!r||Array.isArray(r)&&!r.length))return e;n="string"===typeof n?"descending"===n?-1:1:n&&n<0?-1:1;var o=i?null:function(n,i){return r?(Array.isArray(r)||(r=[r]),r.map((function(t){return"string"===typeof t?Object(v["getValueByPath"])(n,t):t(n,i,e)}))):("$key"!==t&&Wi(n)&&"$value"in n&&(n=n.$value),[Wi(n)?Object(v["getValueByPath"])(n,t):n])},s=function(e,t){if(i)return i(e.value,t.value);for(var n=0,r=e.key.length;n<r;n++){if(e.key[n]<t.key[n])return-1;if(e.key[n]>t.key[n])return 1}return 0};return e.map((function(e,t){return{value:e,index:t,key:o?o(e,t):null}})).sort((function(e,t){var i=s(e,t);return i||(i=e.index-t.index),i*n})).map((function(e){return e.value}))},Gi=function(e,t){var n=null;return e.columns.forEach((function(e){e.id===t&&(n=e)})),n},zi=function(e,t){for(var n=null,i=0;i<e.columns.length;i++){var r=e.columns[i];if(r.columnKey===t){n=r;break}}return n},Yi=function(e,t){var n=(t.className||"").match(/el-table_[^\s]+/gm);return n?Gi(e,n[0]):null},Ji=function(e,t){if(!e)throw new Error("row is required when get row identity");if("string"===typeof t){if(t.indexOf(".")<0)return e[t];for(var n=t.split("."),i=e,r=0;r<n.length;r++)i=i[n[r]];return i}if("function"===typeof t)return t.call(null,e)},Xi=function(e,t){var n={};return(e||[]).forEach((function(e,i){n[Ji(e,t)]={row:e,index:i}})),n};function Qi(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Zi(e,t){var n={},i=void 0;for(i in e)n[i]=e[i];for(i in t)if(Qi(t,i)){var r=t[i];"undefined"!==typeof r&&(n[i]=r)}return n}function er(e){return void 0!==e&&(e=parseInt(e,10),isNaN(e)&&(e=null)),e}function tr(e){return"undefined"!==typeof e&&(e=er(e),isNaN(e)&&(e=80)),e}function nr(e){return"number"===typeof e?e:"string"===typeof e?/^\d+(?:px)?$/.test(e)?parseInt(e,10):e:null}function ir(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function rr(e,t,n){var i=!1,r=e.indexOf(t),o=-1!==r,s=function(){e.push(t),i=!0},a=function(){e.splice(r,1),i=!0};return"boolean"===typeof n?n&&!o?s():!n&&o&&a():o?a():s(),i}function or(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"children",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"hasChildren",r=function(e){return!(Array.isArray(e)&&e.length)};function o(e,s,a){t(e,s,a),s.forEach((function(e){if(e[i])t(e,null,a+1);else{var s=e[n];r(s)||o(e,s,a+1)}}))}e.forEach((function(e){if(e[i])t(e,null,0);else{var s=e[n];r(s)||o(e,s,0)}}))}var sr={data:function(){return{states:{defaultExpandAll:!1,expandRows:[]}}},methods:{updateExpandRows:function(){var e=this.states,t=e.data,n=void 0===t?[]:t,i=e.rowKey,r=e.defaultExpandAll,o=e.expandRows;if(r)this.states.expandRows=n.slice();else if(i){var s=Xi(o,i);this.states.expandRows=n.reduce((function(e,t){var n=Ji(t,i),r=s[n];return r&&e.push(t),e}),[])}else this.states.expandRows=[]},toggleRowExpansion:function(e,t){var n=rr(this.states.expandRows,e,t);n&&(this.table.$emit("expand-change",e,this.states.expandRows.slice()),this.scheduleLayout())},setExpandRowKeys:function(e){this.assertRowKey();var t=this.states,n=t.data,i=t.rowKey,r=Xi(n,i);this.states.expandRows=e.reduce((function(e,t){var n=r[t];return n&&e.push(n.row),e}),[])},isRowExpanded:function(e){var t=this.states,n=t.expandRows,i=void 0===n?[]:n,r=t.rowKey;if(r){var o=Xi(i,r);return!!o[Ji(e,r)]}return-1!==i.indexOf(e)}}},ar={data:function(){return{states:{_currentRowKey:null,currentRow:null}}},methods:{setCurrentRowKey:function(e){this.assertRowKey(),this.states._currentRowKey=e,this.setCurrentRowByKey(e)},restoreCurrentRowKey:function(){this.states._currentRowKey=null},setCurrentRowByKey:function(e){var t=this.states,n=t.data,i=void 0===n?[]:n,r=t.rowKey,o=null;r&&(o=Object(v["arrayFind"])(i,(function(t){return Ji(t,r)===e}))),t.currentRow=o},updateCurrentRow:function(e){var t=this.states,n=this.table,i=t.currentRow;if(e&&e!==i)return t.currentRow=e,void n.$emit("current-change",e,i);!e&&i&&(t.currentRow=null,n.$emit("current-change",null,i))},updateCurrentRowData:function(){var e=this.states,t=this.table,n=e.rowKey,i=e._currentRowKey,r=e.data||[],o=e.currentRow;if(-1===r.indexOf(o)&&o){if(n){var s=Ji(o,n);this.setCurrentRowByKey(s)}else e.currentRow=null;null===e.currentRow&&t.$emit("current-change",null,o)}else i&&(this.setCurrentRowByKey(i),this.restoreCurrentRowKey())}}},cr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},lr={data:function(){return{states:{expandRowKeys:[],treeData:{},indent:16,lazy:!1,lazyTreeNodeMap:{},lazyColumnIdentifier:"hasChildren",childrenColumnName:"children"}}},computed:{normalizedData:function(){if(!this.states.rowKey)return{};var e=this.states.data||[];return this.normalize(e)},normalizedLazyNode:function(){var e=this.states,t=e.rowKey,n=e.lazyTreeNodeMap,i=e.lazyColumnIdentifier,r=Object.keys(n),o={};return r.length?(r.forEach((function(e){if(n[e].length){var r={children:[]};n[e].forEach((function(e){var n=Ji(e,t);r.children.push(n),e[i]&&!o[n]&&(o[n]={children:[]})})),o[e]=r}})),o):o}},watch:{normalizedData:"updateTreeData",normalizedLazyNode:"updateTreeData"},methods:{normalize:function(e){var t=this.states,n=t.childrenColumnName,i=t.lazyColumnIdentifier,r=t.rowKey,o=t.lazy,s={};return or(e,(function(e,t,n){var i=Ji(e,r);Array.isArray(t)?s[i]={children:t.map((function(e){return Ji(e,r)})),level:n}:o&&(s[i]={children:[],lazy:!0,level:n})}),n,i),s},updateTreeData:function(){var e=this.normalizedData,t=this.normalizedLazyNode,n=Object.keys(e),i={};if(n.length){var r=this.states,o=r.treeData,s=r.defaultExpandAll,a=r.expandRowKeys,c=r.lazy,l=[],u=function(e,t){var n=s||a&&-1!==a.indexOf(t);return!!(e&&e.expanded||n)};n.forEach((function(t){var n=o[t],r=cr({},e[t]);if(r.expanded=u(n,t),r.lazy){var s=n||{},a=s.loaded,c=void 0!==a&&a,d=s.loading,h=void 0!==d&&d;r.loaded=!!c,r.loading=!!h,l.push(t)}i[t]=r}));var d=Object.keys(t);c&&d.length&&l.length&&d.forEach((function(e){var n=o[e],r=t[e].children;if(-1!==l.indexOf(e)){if(0!==i[e].children.length)throw new Error("[ElTable]children must be an empty array.");i[e].children=r}else{var s=n||{},a=s.loaded,c=void 0!==a&&a,d=s.loading,h=void 0!==d&&d;i[e]={lazy:!0,loaded:!!c,loading:!!h,expanded:u(n,e),children:r,level:""}}}))}this.states.treeData=i,this.updateTableScrollY()},updateTreeExpandKeys:function(e){this.states.expandRowKeys=e,this.updateTreeData()},toggleTreeExpansion:function(e,t){this.assertRowKey();var n=this.states,i=n.rowKey,r=n.treeData,o=Ji(e,i),s=o&&r[o];if(o&&s&&"expanded"in s){var a=s.expanded;t="undefined"===typeof t?!s.expanded:t,r[o].expanded=t,a!==t&&this.table.$emit("expand-change",e,t),this.updateTableScrollY()}},loadOrToggle:function(e){this.assertRowKey();var t=this.states,n=t.lazy,i=t.treeData,r=t.rowKey,o=Ji(e,r),s=i[o];n&&s&&"loaded"in s&&!s.loaded?this.loadData(e,o,s):this.toggleTreeExpansion(e)},loadData:function(e,t,n){var i=this,r=this.table.load,o=this.states.treeData;r&&!o[t].loaded&&(o[t].loading=!0,r(e,n,(function(n){if(!Array.isArray(n))throw new Error("[ElTable] data must be an array");var r=i.states,o=r.lazyTreeNodeMap,s=r.treeData;s[t].loading=!1,s[t].loaded=!0,s[t].expanded=!0,n.length&&i.$set(o,t,n),i.table.$emit("expand-change",e,!0)})))}}},ur=function(e,t){var n=t.sortingColumn;return n&&"string"!==typeof n.sortable?qi(e,t.sortProp,t.sortOrder,n.sortMethod,n.sortBy):e},dr=function e(t){var n=[];return t.forEach((function(t){t.children?n.push.apply(n,e(t.children)):n.push(t)})),n},hr=$i.a.extend({data:function(){return{states:{rowKey:null,data:[],isComplex:!1,_columns:[],originColumns:[],columns:[],fixedColumns:[],rightFixedColumns:[],leafColumns:[],fixedLeafColumns:[],rightFixedLeafColumns:[],leafColumnsLength:0,fixedLeafColumnsLength:0,rightFixedLeafColumnsLength:0,isAllSelected:!1,selection:[],reserveSelection:!1,selectOnIndeterminate:!1,selectable:null,filters:{},filteredData:null,sortingColumn:null,sortProp:null,sortOrder:null,hoverRow:null}}},mixins:[sr,ar,lr],methods:{assertRowKey:function(){var e=this.states.rowKey;if(!e)throw new Error("[ElTable] prop row-key is required")},updateColumns:function(){var e=this.states,t=e._columns||[];e.fixedColumns=t.filter((function(e){return!0===e.fixed||"left"===e.fixed})),e.rightFixedColumns=t.filter((function(e){return"right"===e.fixed})),e.fixedColumns.length>0&&t[0]&&"selection"===t[0].type&&!t[0].fixed&&(t[0].fixed=!0,e.fixedColumns.unshift(t[0]));var n=t.filter((function(e){return!e.fixed}));e.originColumns=[].concat(e.fixedColumns).concat(n).concat(e.rightFixedColumns);var i=dr(n),r=dr(e.fixedColumns),o=dr(e.rightFixedColumns);e.leafColumnsLength=i.length,e.fixedLeafColumnsLength=r.length,e.rightFixedLeafColumnsLength=o.length,e.columns=[].concat(r).concat(i).concat(o),e.isComplex=e.fixedColumns.length>0||e.rightFixedColumns.length>0},scheduleLayout:function(e){e&&this.updateColumns(),this.table.debouncedUpdateLayout()},isSelected:function(e){var t=this.states.selection,n=void 0===t?[]:t;return n.indexOf(e)>-1},clearSelection:function(){var e=this.states;e.isAllSelected=!1;var t=e.selection;t.length&&(e.selection=[],this.table.$emit("selection-change",[]))},cleanSelection:function(){var e=this.states,t=e.data,n=e.rowKey,i=e.selection,r=void 0;if(n){r=[];var o=Xi(i,n),s=Xi(t,n);for(var a in o)o.hasOwnProperty(a)&&!s[a]&&r.push(o[a].row)}else r=i.filter((function(e){return-1===t.indexOf(e)}));if(r.length){var c=i.filter((function(e){return-1===r.indexOf(e)}));e.selection=c,this.table.$emit("selection-change",c.slice())}},toggleRowSelection:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=rr(this.states.selection,e,t);if(i){var r=(this.states.selection||[]).slice();n&&this.table.$emit("select",r,e),this.table.$emit("selection-change",r)}},_toggleAllSelection:function(){var e=this.states,t=e.data,n=void 0===t?[]:t,i=e.selection,r=e.selectOnIndeterminate?!e.isAllSelected:!(e.isAllSelected||i.length);e.isAllSelected=r;var o=!1;n.forEach((function(t,n){e.selectable?e.selectable.call(null,t,n)&&rr(i,t,r)&&(o=!0):rr(i,t,r)&&(o=!0)})),o&&this.table.$emit("selection-change",i?i.slice():[]),this.table.$emit("select-all",i)},updateSelectionByRowKey:function(){var e=this.states,t=e.selection,n=e.rowKey,i=e.data,r=Xi(t,n);i.forEach((function(e){var i=Ji(e,n),o=r[i];o&&(t[o.index]=e)}))},updateAllSelected:function(){var e=this.states,t=e.selection,n=e.rowKey,i=e.selectable,r=e.data||[];if(0!==r.length){var o=void 0;n&&(o=Xi(t,n));for(var s=function(e){return o?!!o[Ji(e,n)]:-1!==t.indexOf(e)},a=!0,c=0,l=0,u=r.length;l<u;l++){var d=r[l],h=i&&i.call(null,d,l);if(s(d))c++;else if(!i||h){a=!1;break}}0===c&&(a=!1),e.isAllSelected=a}else e.isAllSelected=!1},updateFilters:function(e,t){Array.isArray(e)||(e=[e]);var n=this.states,i={};return e.forEach((function(e){n.filters[e.id]=t,i[e.columnKey||e.id]=t})),i},updateSort:function(e,t,n){this.states.sortingColumn&&this.states.sortingColumn!==e&&(this.states.sortingColumn.order=null),this.states.sortingColumn=e,this.states.sortProp=t,this.states.sortOrder=n},execFilter:function(){var e=this,t=this.states,n=t._data,i=t.filters,r=n;Object.keys(i).forEach((function(n){var i=t.filters[n];if(i&&0!==i.length){var o=Gi(e.states,n);o&&o.filterMethod&&(r=r.filter((function(e){return i.some((function(t){return o.filterMethod.call(null,t,e,o)}))})))}})),t.filteredData=r},execSort:function(){var e=this.states;e.data=ur(e.filteredData,e)},execQuery:function(e){e&&e.filter||this.execFilter(),this.execSort()},clearFilter:function(e){var t=this.states,n=this.table.$refs,i=n.tableHeader,r=n.fixedTableHeader,o=n.rightFixedTableHeader,s={};i&&(s=Rt()(s,i.filterPanels)),r&&(s=Rt()(s,r.filterPanels)),o&&(s=Rt()(s,o.filterPanels));var a=Object.keys(s);if(a.length)if("string"===typeof e&&(e=[e]),Array.isArray(e)){var c=e.map((function(e){return zi(t,e)}));a.forEach((function(e){var t=c.find((function(t){return t.id===e}));t&&(s[e].filteredValue=[])})),this.commit("filterChange",{column:c,values:[],silent:!0,multi:!0})}else a.forEach((function(e){s[e].filteredValue=[]})),t.filters={},this.commit("filterChange",{column:{},values:[],silent:!0})},clearSort:function(){var e=this.states;e.sortingColumn&&(this.updateSort(null,null,null),this.commit("changeSortCondition",{silent:!0}))},setExpandRowKeysAdapter:function(e){this.setExpandRowKeys(e),this.updateTreeExpandKeys(e)},toggleRowExpansionAdapter:function(e,t){var n=this.states.columns.some((function(e){var t=e.type;return"expand"===t}));n?this.toggleRowExpansion(e,t):this.toggleTreeExpansion(e,t)}}});hr.prototype.mutations={setData:function(e,t){var n=e._data!==t;e._data=t,this.execQuery(),this.updateCurrentRowData(),this.updateExpandRows(),e.reserveSelection?(this.assertRowKey(),this.updateSelectionByRowKey()):n?this.clearSelection():this.cleanSelection(),this.updateAllSelected(),this.updateTableScrollY()},insertColumn:function(e,t,n,i){var r=e._columns;i&&(r=i.children,r||(r=i.children=[])),"undefined"!==typeof n?r.splice(n,0,t):r.push(t),"selection"===t.type&&(e.selectable=t.selectable,e.reserveSelection=t.reserveSelection),this.table.$ready&&(this.updateColumns(),this.scheduleLayout())},removeColumn:function(e,t,n){var i=e._columns;n&&(i=n.children,i||(i=n.children=[])),i&&i.splice(i.indexOf(t),1),this.table.$ready&&(this.updateColumns(),this.scheduleLayout())},sort:function(e,t){var n=t.prop,i=t.order,r=t.init;if(n){var o=Object(v["arrayFind"])(e.columns,(function(e){return e.property===n}));o&&(o.order=i,this.updateSort(o,n,i),this.commit("changeSortCondition",{init:r}))}},changeSortCondition:function(e,t){var n=e.sortingColumn,i=e.sortProp,r=e.sortOrder;null===r&&(e.sortingColumn=null,e.sortProp=null);var o={filter:!0};this.execQuery(o),t&&(t.silent||t.init)||this.table.$emit("sort-change",{column:n,prop:i,order:r}),this.updateTableScrollY()},filterChange:function(e,t){var n=t.column,i=t.values,r=t.silent,o=this.updateFilters(n,i);this.execQuery(),r||this.table.$emit("filter-change",o),this.updateTableScrollY()},toggleAllSelection:function(){this.toggleAllSelection()},rowSelectedChanged:function(e,t){this.toggleRowSelection(t),this.updateAllSelected()},setHoverRow:function(e,t){e.hoverRow=t},setCurrentRow:function(e,t){this.updateCurrentRow(t)}},hr.prototype.commit=function(e){var t=this.mutations;if(!t[e])throw new Error("Action not found: "+e);for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];t[e].apply(this,[this.states].concat(i))},hr.prototype.updateTableScrollY=function(){$i.a.nextTick(this.table.updateScrollY)};var pr=hr;function fr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)throw new Error("Table is required.");var n=new pr;return n.table=e,n.toggleAllSelection=U()(10,n._toggleAllSelection),Object.keys(t).forEach((function(e){n.states[e]=t[e]})),n}function gr(e){var t={};return Object.keys(e).forEach((function(n){var i=e[n],r=void 0;"string"===typeof i?r=function(){return this.store.states[i]}:"function"===typeof i?r=function(){return i.call(this,this.store.states)}:console.error("invalid value type"),r&&(t[n]=r)})),t}var mr=n(30),_r=n.n(mr);function vr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var yr=function(){function e(t){for(var n in vr(this,e),this.observers=[],this.table=null,this.store=null,this.columns=null,this.fit=!0,this.showHeader=!0,this.height=null,this.scrollX=!1,this.scrollY=!1,this.bodyWidth=null,this.fixedWidth=null,this.rightFixedWidth=null,this.tableHeight=null,this.headerHeight=44,this.appendHeight=0,this.footerHeight=44,this.viewportHeight=null,this.bodyHeight=null,this.fixedBodyHeight=null,this.gutterWidth=_r()(),t)t.hasOwnProperty(n)&&(this[n]=t[n]);if(!this.table)throw new Error("table is required for Table Layout");if(!this.store)throw new Error("store is required for Table Layout")}return e.prototype.updateScrollY=function(){var e=this.height;if(null===e)return!1;var t=this.table.bodyWrapper;if(this.table.$el&&t){var n=t.querySelector(".el-table__body"),i=this.scrollY,r=n.offsetHeight>this.bodyHeight;return this.scrollY=r,i!==r}return!1},e.prototype.setHeight=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"height";if(!$i.a.prototype.$isServer){var i=this.table.$el;if(e=nr(e),this.height=e,!i&&(e||0===e))return $i.a.nextTick((function(){return t.setHeight(e,n)}));"number"===typeof e?(i.style[n]=e+"px",this.updateElsHeight()):"string"===typeof e&&(i.style[n]=e,this.updateElsHeight())}},e.prototype.setMaxHeight=function(e){this.setHeight(e,"max-height")},e.prototype.getFlattenColumns=function(){var e=[],t=this.table.columns;return t.forEach((function(t){t.isColumnGroup?e.push.apply(e,t.columns):e.push(t)})),e},e.prototype.updateElsHeight=function(){var e=this;if(!this.table.$ready)return $i.a.nextTick((function(){return e.updateElsHeight()}));var t=this.table.$refs,n=t.headerWrapper,i=t.appendWrapper,r=t.footerWrapper;if(this.appendHeight=i?i.offsetHeight:0,!this.showHeader||n){var o=n?n.querySelector(".el-table__header tr"):null,s=this.headerDisplayNone(o),a=this.headerHeight=this.showHeader?n.offsetHeight:0;if(this.showHeader&&!s&&n.offsetWidth>0&&(this.table.columns||[]).length>0&&a<2)return $i.a.nextTick((function(){return e.updateElsHeight()}));var c=this.tableHeight=this.table.$el.clientHeight,l=this.footerHeight=r?r.offsetHeight:0;null!==this.height&&(this.bodyHeight=c-a-l+(r?1:0)),this.fixedBodyHeight=this.scrollX?this.bodyHeight-this.gutterWidth:this.bodyHeight;var u=!(this.store.states.data&&this.store.states.data.length);this.viewportHeight=this.scrollX?c-(u?0:this.gutterWidth):c,this.updateScrollY(),this.notifyObservers("scrollable")}},e.prototype.headerDisplayNone=function(e){if(!e)return!0;var t=e;while("DIV"!==t.tagName){if("none"===getComputedStyle(t).display)return!0;t=t.parentElement}return!1},e.prototype.updateColumnsWidth=function(){if(!$i.a.prototype.$isServer){var e=this.fit,t=this.table.$el.clientWidth,n=0,i=this.getFlattenColumns(),r=i.filter((function(e){return"number"!==typeof e.width}));if(i.forEach((function(e){"number"===typeof e.width&&e.realWidth&&(e.realWidth=null)})),r.length>0&&e){i.forEach((function(e){n+=e.width||e.minWidth||80}));var o=this.scrollY?this.gutterWidth:0;if(n<=t-o){this.scrollX=!1;var s=t-o-n;if(1===r.length)r[0].realWidth=(r[0].minWidth||80)+s;else{var a=r.reduce((function(e,t){return e+(t.minWidth||80)}),0),c=s/a,l=0;r.forEach((function(e,t){if(0!==t){var n=Math.floor((e.minWidth||80)*c);l+=n,e.realWidth=(e.minWidth||80)+n}})),r[0].realWidth=(r[0].minWidth||80)+s-l}}else this.scrollX=!0,r.forEach((function(e){e.realWidth=e.minWidth}));this.bodyWidth=Math.max(n,t),this.table.resizeState.width=this.bodyWidth}else i.forEach((function(e){e.width||e.minWidth?e.realWidth=e.width||e.minWidth:e.realWidth=80,n+=e.realWidth})),this.scrollX=n>t,this.bodyWidth=n;var u=this.store.states.fixedColumns;if(u.length>0){var d=0;u.forEach((function(e){d+=e.realWidth||e.width})),this.fixedWidth=d}var h=this.store.states.rightFixedColumns;if(h.length>0){var p=0;h.forEach((function(e){p+=e.realWidth||e.width})),this.rightFixedWidth=p}this.notifyObservers("columns")}},e.prototype.addObserver=function(e){this.observers.push(e)},e.prototype.removeObserver=function(e){var t=this.observers.indexOf(e);-1!==t&&this.observers.splice(t,1)},e.prototype.notifyObservers=function(e){var t=this,n=this.observers;n.forEach((function(n){switch(e){case"columns":n.onColumnsChange(t);break;case"scrollable":n.onScrollableChange(t);break;default:throw new Error("Table Layout don't have event "+e+".")}}))},e}(),Cr=yr,Er={created:function(){this.tableLayout.addObserver(this)},destroyed:function(){this.tableLayout.removeObserver(this)},computed:{tableLayout:function(){var e=this.layout;if(!e&&this.table&&(e=this.table.layout),!e)throw new Error("Can not find table layout.");return e}},mounted:function(){this.onColumnsChange(this.tableLayout),this.onScrollableChange(this.tableLayout)},updated:function(){this.__updated__||(this.onColumnsChange(this.tableLayout),this.onScrollableChange(this.tableLayout),this.__updated__=!0)},methods:{onColumnsChange:function(e){var t=this.$el.querySelectorAll("colgroup > col");if(t.length){var n=e.getFlattenColumns(),i={};n.forEach((function(e){i[e.id]=e}));for(var r=0,o=t.length;r<o;r++){var s=t[r],a=s.getAttribute("name"),c=i[a];c&&s.setAttribute("width",c.realWidth||c.width)}}},onScrollableChange:function(e){for(var t=this.$el.querySelectorAll("colgroup > col[name=gutter]"),n=0,i=t.length;n<i;n++){var r=t[n];r.setAttribute("width",e.scrollY?e.gutterWidth:"0")}for(var o=this.$el.querySelectorAll("th.gutter"),s=0,a=o.length;s<a;s++){var c=o[s];c.style.width=e.scrollY?e.gutterWidth+"px":"0",c.style.display=e.scrollY?"":"none"}}}},br="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Sr={name:"ElTableBody",mixins:[Er],components:{ElCheckbox:Di.a,ElTooltip:rt.a},props:{store:{required:!0},stripe:Boolean,context:{},rowClassName:[String,Function],rowStyle:[Object,Function],fixed:String,highlight:Boolean},render:function(e){var t=this,n=this.data||[];return e("table",{class:"el-table__body",attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[e("colgroup",[this.columns.map((function(t){return e("col",{attrs:{name:t.id},key:t.id})}))]),e("tbody",[n.reduce((function(e,n){return e.concat(t.wrappedRowRender(n,e.length))}),[]),e("el-tooltip",{attrs:{effect:this.table.tooltipEffect,placement:"top",content:this.tooltipContent},ref:"tooltip"})])])},computed:Tr({table:function(){return this.$parent}},gr({data:"data",columns:"columns",treeIndent:"indent",leftFixedLeafCount:"fixedLeafColumnsLength",rightFixedLeafCount:"rightFixedLeafColumnsLength",columnsCount:function(e){return e.columns.length},leftFixedCount:function(e){return e.fixedColumns.length},rightFixedCount:function(e){return e.rightFixedColumns.length},hasExpandColumn:function(e){return e.columns.some((function(e){var t=e.type;return"expand"===t}))}}),{firstDefaultColumnIndex:function(){return Object(v["arrayFindIndex"])(this.columns,(function(e){var t=e.type;return"default"===t}))}}),watch:{"store.states.hoverRow":function(e,t){var n=this;if(this.store.states.isComplex&&!this.$isServer){var i=window.requestAnimationFrame;i||(i=function(e){return setTimeout(e,16)}),i((function(){var i=n.$el.querySelectorAll(".el-table__row"),r=i[t],o=i[e];r&&Object(Be["removeClass"])(r,"hover-row"),o&&Object(Be["addClass"])(o,"hover-row")}))}}},data:function(){return{tooltipContent:""}},created:function(){this.activateTooltip=U()(50,(function(e){return e.handleShowPopper()}))},methods:{getKeyOfRow:function(e,t){var n=this.table.rowKey;return n?Ji(e,n):t},isColumnHidden:function(e){return!0===this.fixed||"left"===this.fixed?e>=this.leftFixedLeafCount:"right"===this.fixed?e<this.columnsCount-this.rightFixedLeafCount:e<this.leftFixedLeafCount||e>=this.columnsCount-this.rightFixedLeafCount},getSpan:function(e,t,n,i){var r=1,o=1,s=this.table.spanMethod;if("function"===typeof s){var a=s({row:e,column:t,rowIndex:n,columnIndex:i});Array.isArray(a)?(r=a[0],o=a[1]):"object"===("undefined"===typeof a?"undefined":br(a))&&(r=a.rowspan,o=a.colspan)}return{rowspan:r,colspan:o}},getRowStyle:function(e,t){var n=this.table.rowStyle;return"function"===typeof n?n.call(null,{row:e,rowIndex:t}):n||null},getRowClass:function(e,t){var n=["el-table__row"];this.table.highlightCurrentRow&&e===this.store.states.currentRow&&n.push("current-row"),this.stripe&&t%2===1&&n.push("el-table__row--striped");var i=this.table.rowClassName;return"string"===typeof i?n.push(i):"function"===typeof i&&n.push(i.call(null,{row:e,rowIndex:t})),this.store.states.expandRows.indexOf(e)>-1&&n.push("expanded"),n},getCellStyle:function(e,t,n,i){var r=this.table.cellStyle;return"function"===typeof r?r.call(null,{rowIndex:e,columnIndex:t,row:n,column:i}):r},getCellClass:function(e,t,n,i){var r=[i.id,i.align,i.className];this.isColumnHidden(t)&&r.push("is-hidden");var o=this.table.cellClassName;return"string"===typeof o?r.push(o):"function"===typeof o&&r.push(o.call(null,{rowIndex:e,columnIndex:t,row:n,column:i})),r.push("el-table__cell"),r.join(" ")},getColspanRealWidth:function(e,t,n){if(t<1)return e[n].realWidth;var i=e.map((function(e){var t=e.realWidth;return t})).slice(n,n+t);return i.reduce((function(e,t){return e+t}),-1)},handleCellMouseEnter:function(e,t){var n=this.table,i=Ki(e);if(i){var r=Yi(n,i),o=n.hoverState={cell:i,column:r,row:t};n.$emit("cell-mouse-enter",o.row,o.column,o.cell,e)}var s=e.target.querySelector(".cell");if(Object(Be["hasClass"])(s,"el-tooltip")&&s.childNodes.length){var a=document.createRange();a.setStart(s,0),a.setEnd(s,s.childNodes.length);var c=a.getBoundingClientRect().width,l=(parseInt(Object(Be["getStyle"])(s,"paddingLeft"),10)||0)+(parseInt(Object(Be["getStyle"])(s,"paddingRight"),10)||0);if((c+l>s.offsetWidth||s.scrollWidth>s.offsetWidth)&&this.$refs.tooltip){var u=this.$refs.tooltip;this.tooltipContent=i.innerText||i.textContent,u.referenceElm=i,u.$refs.popper&&(u.$refs.popper.style.display="none"),u.doDestroy(),u.setExpectedState(!0),this.activateTooltip(u)}}},handleCellMouseLeave:function(e){var t=this.$refs.tooltip;t&&(t.setExpectedState(!1),t.handleClosePopper());var n=Ki(e);if(n){var i=this.table.hoverState||{};this.table.$emit("cell-mouse-leave",i.row,i.column,i.cell,e)}},handleMouseEnter:U()(30,(function(e){this.store.commit("setHoverRow",e)})),handleMouseLeave:U()(30,(function(){this.store.commit("setHoverRow",null)})),handleContextMenu:function(e,t){this.handleEvent(e,t,"contextmenu")},handleDoubleClick:function(e,t){this.handleEvent(e,t,"dblclick")},handleClick:function(e,t){this.store.commit("setCurrentRow",t),this.handleEvent(e,t,"click")},handleEvent:function(e,t,n){var i=this.table,r=Ki(e),o=void 0;r&&(o=Yi(i,r),o&&i.$emit("cell-"+n,t,o,r,e)),i.$emit("row-"+n,t,o,e)},rowRender:function(e,t,n){var i=this,r=this.$createElement,o=this.treeIndent,s=this.columns,a=this.firstDefaultColumnIndex,c=s.map((function(e,t){return i.isColumnHidden(t)})),l=this.getRowClass(e,t),u=!0;n&&(l.push("el-table__row--level-"+n.level),u=n.display);var d=u?null:{display:"none"};return r("tr",{style:[d,this.getRowStyle(e,t)],class:l,key:this.getKeyOfRow(e,t),on:{dblclick:function(t){return i.handleDoubleClick(t,e)},click:function(t){return i.handleClick(t,e)},contextmenu:function(t){return i.handleContextMenu(t,e)},mouseenter:function(e){return i.handleMouseEnter(t)},mouseleave:this.handleMouseLeave}},[s.map((function(l,u){var d=i.getSpan(e,l,t,u),h=d.rowspan,p=d.colspan;if(!h||!p)return null;var f=Tr({},l);f.realWidth=i.getColspanRealWidth(s,p,u);var g={store:i.store,_self:i.context||i.table.$vnode.context,column:f,row:e,$index:t};return u===a&&n&&(g.treeNode={indent:n.level*o,level:n.level},"boolean"===typeof n.expanded&&(g.treeNode.expanded=n.expanded,"loading"in n&&(g.treeNode.loading=n.loading),"noLazyChildren"in n&&(g.treeNode.noLazyChildren=n.noLazyChildren))),r("td",{style:i.getCellStyle(t,u,e,l),class:i.getCellClass(t,u,e,l),attrs:{rowspan:h,colspan:p},on:{mouseenter:function(t){return i.handleCellMouseEnter(t,e)},mouseleave:i.handleCellMouseLeave}},[l.renderCell.call(i._renderProxy,i.$createElement,g,c[u])])}))])},wrappedRowRender:function(e,t){var n=this,i=this.$createElement,r=this.store,o=r.isRowExpanded,s=r.assertRowKey,a=r.states,c=a.treeData,l=a.lazyTreeNodeMap,u=a.childrenColumnName,d=a.rowKey;if(this.hasExpandColumn&&o(e)){var h=this.table.renderExpanded,p=this.rowRender(e,t);return h?[[p,i("tr",{key:"expanded-row__"+p.key},[i("td",{attrs:{colspan:this.columnsCount},class:"el-table__cell el-table__expanded-cell"},[h(this.$createElement,{row:e,$index:t,store:this.store})])])]]:(console.error("[Element Error]renderExpanded is required."),p)}if(Object.keys(c).length){s();var f=Ji(e,d),g=c[f],m=null;g&&(m={expanded:g.expanded,level:g.level,display:!0},"boolean"===typeof g.lazy&&("boolean"===typeof g.loaded&&g.loaded&&(m.noLazyChildren=!(g.children&&g.children.length)),m.loading=g.loading));var _=[this.rowRender(e,t,m)];if(g){var v=0,y=function e(i,r){i&&i.length&&r&&i.forEach((function(i){var o={display:r.display&&r.expanded,level:r.level+1},s=Ji(i,d);if(void 0===s||null===s)throw new Error("for nested data item, row-key is required.");if(g=Tr({},c[s]),g&&(o.expanded=g.expanded,g.level=g.level||o.level,g.display=!(!g.expanded||!o.display),"boolean"===typeof g.lazy&&("boolean"===typeof g.loaded&&g.loaded&&(o.noLazyChildren=!(g.children&&g.children.length)),o.loading=g.loading)),v++,_.push(n.rowRender(i,t+v,o)),g){var a=l[s]||i[u];e(a,g)}}))};g.display=!0;var C=l[f]||e[u];y(C,g)}return _}return this.rowRender(e,t)}}},Rr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-zoom-in-top"}},[e.multiple?n("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleOutsideClick,expression:"handleOutsideClick"},{name:"show",rawName:"v-show",value:e.showPopper,expression:"showPopper"}],staticClass:"el-table-filter"},[n("div",{staticClass:"el-table-filter__content"},[n("el-scrollbar",{attrs:{"wrap-class":"el-table-filter__wrap"}},[n("el-checkbox-group",{staticClass:"el-table-filter__checkbox-group",model:{value:e.filteredValue,callback:function(t){e.filteredValue=t},expression:"filteredValue"}},e._l(e.filters,(function(t){return n("el-checkbox",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.text))])})),1)],1)],1),n("div",{staticClass:"el-table-filter__bottom"},[n("button",{class:{"is-disabled":0===e.filteredValue.length},attrs:{disabled:0===e.filteredValue.length},on:{click:e.handleConfirm}},[e._v(e._s(e.t("el.table.confirmFilter")))]),n("button",{on:{click:e.handleReset}},[e._v(e._s(e.t("el.table.resetFilter")))])])]):n("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleOutsideClick,expression:"handleOutsideClick"},{name:"show",rawName:"v-show",value:e.showPopper,expression:"showPopper"}],staticClass:"el-table-filter"},[n("ul",{staticClass:"el-table-filter__list"},[n("li",{staticClass:"el-table-filter__list-item",class:{"is-active":void 0===e.filterValue||null===e.filterValue},on:{click:function(t){e.handleSelect(null)}}},[e._v(e._s(e.t("el.table.clearFilter")))]),e._l(e.filters,(function(t){return n("li",{key:t.value,staticClass:"el-table-filter__list-item",class:{"is-active":e.isActive(t)},attrs:{label:t.value},on:{click:function(n){e.handleSelect(t.value)}}},[e._v(e._s(t.text))])}))],2)])])},Ir=[];Rr._withStripped=!0;var wr=[];!$i.a.prototype.$isServer&&document.addEventListener("click",(function(e){wr.forEach((function(t){var n=e.target;t&&t.$el&&(n===t.$el||t.$el.contains(n)||t.handleOutsideClick&&t.handleOutsideClick(e))}))}));var Or={open:function(e){e&&wr.push(e)},close:function(e){var t=wr.indexOf(e);-1!==t&&wr.splice(e,1)}},kr=n(31),Mr=n.n(kr),xr={name:"ElTableFilterPanel",mixins:[H.a,_.a],directives:{Clickoutside:V.a},components:{ElCheckbox:Di.a,ElCheckboxGroup:Mr.a,ElScrollbar:W.a},props:{placement:{type:String,default:"bottom-end"}},methods:{isActive:function(e){return e.value===this.filterValue},handleOutsideClick:function(){var e=this;setTimeout((function(){e.showPopper=!1}),16)},handleConfirm:function(){this.confirmFilter(this.filteredValue),this.handleOutsideClick()},handleReset:function(){this.filteredValue=[],this.confirmFilter(this.filteredValue),this.handleOutsideClick()},handleSelect:function(e){this.filterValue=e,"undefined"!==typeof e&&null!==e?this.confirmFilter(this.filteredValue):this.confirmFilter([]),this.handleOutsideClick()},confirmFilter:function(e){this.table.store.commit("filterChange",{column:this.column,values:e}),this.table.store.updateAllSelected()}},data:function(){return{table:null,cell:null,column:null}},computed:{filters:function(){return this.column&&this.column.filters},filterValue:{get:function(){return(this.column.filteredValue||[])[0]},set:function(e){this.filteredValue&&("undefined"!==typeof e&&null!==e?this.filteredValue.splice(0,1,e):this.filteredValue.splice(0,1))}},filteredValue:{get:function(){return this.column&&this.column.filteredValue||[]},set:function(e){this.column&&(this.column.filteredValue=e)}},multiple:function(){return!this.column||this.column.filterMultiple}},mounted:function(){var e=this;this.popperElm=this.$el,this.referenceElm=this.cell,this.table.bodyWrapper.addEventListener("scroll",(function(){e.updatePopper()})),this.$watch("showPopper",(function(t){e.column&&(e.column.filterOpened=t),t?Or.open(e):Or.close(e)}))},watch:{showPopper:function(e){!0===e&&parseInt(this.popperJS._popper.style.zIndex,10)<T["PopupManager"].zIndex&&(this.popperJS._popper.style.zIndex=T["PopupManager"].nextZIndex())}}},Pr=xr,Ar=a(Pr,Rr,Ir,!1,null,null,null);Ar.options.__file="packages/table/src/filter-panel.vue";var Dr=Ar.exports,Nr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Lr=function e(t){var n=[];return t.forEach((function(t){t.children?(n.push(t),n.push.apply(n,e(t.children))):n.push(t)})),n},Ur=function(e){var t=1,n=function e(n,i){if(i&&(n.level=i.level+1,t<n.level&&(t=n.level)),n.children){var r=0;n.children.forEach((function(t){e(t,n),r+=t.colSpan})),n.colSpan=r}else n.colSpan=1};e.forEach((function(e){e.level=1,n(e)}));for(var i=[],r=0;r<t;r++)i.push([]);var o=Lr(e);return o.forEach((function(e){e.children?e.rowSpan=1:e.rowSpan=t-e.level+1,i[e.level-1].push(e)})),i},Br={name:"ElTableHeader",mixins:[Er],render:function(e){var t=this,n=this.store.states.originColumns,i=Ur(n,this.columns),r=i.length>1;return r&&(this.$parent.isGroup=!0),e("table",{class:"el-table__header",attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[e("colgroup",[this.columns.map((function(t){return e("col",{attrs:{name:t.id},key:t.id})})),this.hasGutter?e("col",{attrs:{name:"gutter"}}):""]),e("thead",{class:[{"is-group":r,"has-gutter":this.hasGutter}]},[this._l(i,(function(n,i){return e("tr",{style:t.getHeaderRowStyle(i),class:t.getHeaderRowClass(i)},[n.map((function(r,o){return e("th",{attrs:{colspan:r.colSpan,rowspan:r.rowSpan},on:{mousemove:function(e){return t.handleMouseMove(e,r)},mouseout:t.handleMouseOut,mousedown:function(e){return t.handleMouseDown(e,r)},click:function(e){return t.handleHeaderClick(e,r)},contextmenu:function(e){return t.handleHeaderContextMenu(e,r)}},style:t.getHeaderCellStyle(i,o,n,r),class:t.getHeaderCellClass(i,o,n,r),key:r.id},[e("div",{class:["cell",r.filteredValue&&r.filteredValue.length>0?"highlight":"",r.labelClassName]},[r.renderHeader?r.renderHeader.call(t._renderProxy,e,{column:r,$index:o,store:t.store,_self:t.$parent.$vnode.context}):r.label,r.sortable?e("span",{class:"caret-wrapper",on:{click:function(e){return t.handleSortClick(e,r)}}},[e("i",{class:"sort-caret ascending",on:{click:function(e){return t.handleSortClick(e,r,"ascending")}}}),e("i",{class:"sort-caret descending",on:{click:function(e){return t.handleSortClick(e,r,"descending")}}})]):"",r.filterable?e("span",{class:"el-table__column-filter-trigger",on:{click:function(e){return t.handleFilterClick(e,r)}}},[e("i",{class:["el-icon-arrow-down",r.filterOpened?"el-icon-arrow-up":""]})]):""])])})),t.hasGutter?e("th",{class:"el-table__cell gutter"}):""])}))])])},props:{fixed:String,store:{required:!0},border:Boolean,defaultSort:{type:Object,default:function(){return{prop:"",order:""}}}},components:{ElCheckbox:Di.a},computed:Nr({table:function(){return this.$parent},hasGutter:function(){return!this.fixed&&this.tableLayout.gutterWidth}},gr({columns:"columns",isAllSelected:"isAllSelected",leftFixedLeafCount:"fixedLeafColumnsLength",rightFixedLeafCount:"rightFixedLeafColumnsLength",columnsCount:function(e){return e.columns.length},leftFixedCount:function(e){return e.fixedColumns.length},rightFixedCount:function(e){return e.rightFixedColumns.length}})),created:function(){this.filterPanels={}},mounted:function(){var e=this;this.$nextTick((function(){var t=e.defaultSort,n=t.prop,i=t.order,r=!0;e.store.commit("sort",{prop:n,order:i,init:r})}))},beforeDestroy:function(){var e=this.filterPanels;for(var t in e)e.hasOwnProperty(t)&&e[t]&&e[t].$destroy(!0)},methods:{isCellHidden:function(e,t){for(var n=0,i=0;i<e;i++)n+=t[i].colSpan;var r=n+t[e].colSpan-1;return!0===this.fixed||"left"===this.fixed?r>=this.leftFixedLeafCount:"right"===this.fixed?n<this.columnsCount-this.rightFixedLeafCount:r<this.leftFixedLeafCount||n>=this.columnsCount-this.rightFixedLeafCount},getHeaderRowStyle:function(e){var t=this.table.headerRowStyle;return"function"===typeof t?t.call(null,{rowIndex:e}):t},getHeaderRowClass:function(e){var t=[],n=this.table.headerRowClassName;return"string"===typeof n?t.push(n):"function"===typeof n&&t.push(n.call(null,{rowIndex:e})),t.join(" ")},getHeaderCellStyle:function(e,t,n,i){var r=this.table.headerCellStyle;return"function"===typeof r?r.call(null,{rowIndex:e,columnIndex:t,row:n,column:i}):r},getHeaderCellClass:function(e,t,n,i){var r=[i.id,i.order,i.headerAlign,i.className,i.labelClassName];0===e&&this.isCellHidden(t,n)&&r.push("is-hidden"),i.children||r.push("is-leaf"),i.sortable&&r.push("is-sortable");var o=this.table.headerCellClassName;return"string"===typeof o?r.push(o):"function"===typeof o&&r.push(o.call(null,{rowIndex:e,columnIndex:t,row:n,column:i})),r.push("el-table__cell"),r.join(" ")},toggleAllSelection:function(e){e.stopPropagation(),this.store.commit("toggleAllSelection")},handleFilterClick:function(e,t){e.stopPropagation();var n=e.target,i="TH"===n.tagName?n:n.parentNode;if(!Object(Be["hasClass"])(i,"noclick")){i=i.querySelector(".el-table__column-filter-trigger")||i;var r=this.$parent,o=this.filterPanels[t.id];o&&t.filterOpened?o.showPopper=!1:(o||(o=new $i.a(Dr),this.filterPanels[t.id]=o,t.filterPlacement&&(o.placement=t.filterPlacement),o.table=r,o.cell=i,o.column=t,!this.$isServer&&o.$mount(document.createElement("div"))),setTimeout((function(){o.showPopper=!0}),16))}},handleHeaderClick:function(e,t){!t.filters&&t.sortable?this.handleSortClick(e,t):t.filterable&&!t.sortable&&this.handleFilterClick(e,t),this.$parent.$emit("header-click",t,e)},handleHeaderContextMenu:function(e,t){this.$parent.$emit("header-contextmenu",t,e)},handleMouseDown:function(e,t){var n=this;if(!this.$isServer&&!(t.children&&t.children.length>0)&&this.draggingColumn&&this.border){this.dragging=!0,this.$parent.resizeProxyVisible=!0;var i=this.$parent,r=i.$el,o=r.getBoundingClientRect().left,s=this.$el.querySelector("th."+t.id),a=s.getBoundingClientRect(),c=a.left-o+30;Object(Be["addClass"])(s,"noclick"),this.dragState={startMouseLeft:e.clientX,startLeft:a.right-o,startColumnLeft:a.left-o,tableLeft:o};var l=i.$refs.resizeProxy;l.style.left=this.dragState.startLeft+"px",document.onselectstart=function(){return!1},document.ondragstart=function(){return!1};var u=function(e){var t=e.clientX-n.dragState.startMouseLeft,i=n.dragState.startLeft+t;l.style.left=Math.max(c,i)+"px"},d=function r(){if(n.dragging){var o=n.dragState,a=o.startColumnLeft,c=o.startLeft,d=parseInt(l.style.left,10),h=d-a;t.width=t.realWidth=h,i.$emit("header-dragend",t.width,c-a,t,e),n.store.scheduleLayout(),document.body.style.cursor="",n.dragging=!1,n.draggingColumn=null,n.dragState={},i.resizeProxyVisible=!1}document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",r),document.onselectstart=null,document.ondragstart=null,setTimeout((function(){Object(Be["removeClass"])(s,"noclick")}),0)};document.addEventListener("mousemove",u),document.addEventListener("mouseup",d)}},handleMouseMove:function(e,t){if(!(t.children&&t.children.length>0)){var n=e.target;while(n&&"TH"!==n.tagName)n=n.parentNode;if(t&&t.resizable&&!this.dragging&&this.border){var i=n.getBoundingClientRect(),r=document.body.style;i.width>12&&i.right-e.pageX<8?(r.cursor="col-resize",Object(Be["hasClass"])(n,"is-sortable")&&(n.style.cursor="col-resize"),this.draggingColumn=t):this.dragging||(r.cursor="",Object(Be["hasClass"])(n,"is-sortable")&&(n.style.cursor="pointer"),this.draggingColumn=null)}}},handleMouseOut:function(){this.$isServer||(document.body.style.cursor="")},toggleOrder:function(e){var t=e.order,n=e.sortOrders;if(""===t)return n[0];var i=n.indexOf(t||null);return n[i>n.length-2?0:i+1]},handleSortClick:function(e,t,n){e.stopPropagation();var i=t.order===n?null:n||this.toggleOrder(t),r=e.target;while(r&&"TH"!==r.tagName)r=r.parentNode;if(r&&"TH"===r.tagName&&Object(Be["hasClass"])(r,"noclick"))Object(Be["removeClass"])(r,"noclick");else if(t.sortable){var o=this.store.states,s=o.sortProp,a=void 0,c=o.sortingColumn;(c!==t||c===t&&null===c.order)&&(c&&(c.order=null),o.sortingColumn=t,s=t.property),a=t.order=i||null,o.sortProp=s,o.sortOrder=a,this.store.commit("changeSortCondition")}}},data:function(){return{draggingColumn:null,dragging:!1,dragState:{}}}},Vr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},jr={name:"ElTableFooter",mixins:[Er],render:function(e){var t=this,n=[];return this.summaryMethod?n=this.summaryMethod({columns:this.columns,data:this.store.states.data}):this.columns.forEach((function(e,i){if(0!==i){var r=t.store.states.data.map((function(t){return Number(t[e.property])})),o=[],s=!0;r.forEach((function(e){if(!isNaN(e)){s=!1;var t=(""+e).split(".")[1];o.push(t?t.length:0)}}));var a=Math.max.apply(null,o);n[i]=s?"":r.reduce((function(e,t){var n=Number(t);return isNaN(n)?e:parseFloat((e+t).toFixed(Math.min(a,20)))}),0)}else n[i]=t.sumText})),e("table",{class:"el-table__footer",attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[e("colgroup",[this.columns.map((function(t){return e("col",{attrs:{name:t.id},key:t.id})})),this.hasGutter?e("col",{attrs:{name:"gutter"}}):""]),e("tbody",{class:[{"has-gutter":this.hasGutter}]},[e("tr",[this.columns.map((function(i,r){return e("td",{key:r,attrs:{colspan:i.colSpan,rowspan:i.rowSpan},class:[].concat(t.getRowClasses(i,r),["el-table__cell"])},[e("div",{class:["cell",i.labelClassName]},[n[r]])])})),this.hasGutter?e("th",{class:"el-table__cell gutter"}):""])])])},props:{fixed:String,store:{required:!0},summaryMethod:Function,sumText:String,border:Boolean,defaultSort:{type:Object,default:function(){return{prop:"",order:""}}}},computed:Vr({table:function(){return this.$parent},hasGutter:function(){return!this.fixed&&this.tableLayout.gutterWidth}},gr({columns:"columns",isAllSelected:"isAllSelected",leftFixedLeafCount:"fixedLeafColumnsLength",rightFixedLeafCount:"rightFixedLeafColumnsLength",columnsCount:function(e){return e.columns.length},leftFixedCount:function(e){return e.fixedColumns.length},rightFixedCount:function(e){return e.rightFixedColumns.length}})),methods:{isCellHidden:function(e,t,n){if(!0===this.fixed||"left"===this.fixed)return e>=this.leftFixedLeafCount;if("right"===this.fixed){for(var i=0,r=0;r<e;r++)i+=t[r].colSpan;return i<this.columnsCount-this.rightFixedLeafCount}return!(this.fixed||!n.fixed)||(e<this.leftFixedCount||e>=this.columnsCount-this.rightFixedCount)},getRowClasses:function(e,t){var n=[e.id,e.align,e.labelClassName];return e.className&&n.push(e.className),this.isCellHidden(t,this.columns,e)&&n.push("is-hidden"),e.children||n.push("is-leaf"),n}}},Fr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},$r=1,Hr={name:"ElTable",mixins:[_.a,I.a],directives:{Mousewheel:ji},props:{data:{type:Array,default:function(){return[]}},size:String,width:[String,Number],height:[String,Number],maxHeight:[String,Number],fit:{type:Boolean,default:!0},stripe:Boolean,border:Boolean,rowKey:[String,Function],context:{},showHeader:{type:Boolean,default:!0},showSummary:Boolean,sumText:String,summaryMethod:Function,rowClassName:[String,Function],rowStyle:[Object,Function],cellClassName:[String,Function],cellStyle:[Object,Function],headerRowClassName:[String,Function],headerRowStyle:[Object,Function],headerCellClassName:[String,Function],headerCellStyle:[Object,Function],highlightCurrentRow:Boolean,currentRowKey:[String,Number],emptyText:String,expandRowKeys:Array,defaultExpandAll:Boolean,defaultSort:Object,tooltipEffect:String,spanMethod:Function,selectOnIndeterminate:{type:Boolean,default:!0},indent:{type:Number,default:16},treeProps:{type:Object,default:function(){return{hasChildren:"hasChildren",children:"children"}}},lazy:Boolean,load:Function},components:{TableHeader:Br,TableFooter:jr,TableBody:Sr,ElCheckbox:Di.a},methods:{getMigratingConfig:function(){return{events:{expand:"expand is renamed to expand-change"}}},setCurrentRow:function(e){this.store.commit("setCurrentRow",e)},toggleRowSelection:function(e,t){this.store.toggleRowSelection(e,t,!1),this.store.updateAllSelected()},toggleRowExpansion:function(e,t){this.store.toggleRowExpansionAdapter(e,t)},clearSelection:function(){this.store.clearSelection()},clearFilter:function(e){this.store.clearFilter(e)},clearSort:function(){this.store.clearSort()},handleMouseLeave:function(){this.store.commit("setHoverRow",null),this.hoverState&&(this.hoverState=null)},updateScrollY:function(){var e=this.layout.updateScrollY();e&&(this.layout.notifyObservers("scrollable"),this.layout.updateColumnsWidth())},handleFixedMousewheel:function(e,t){var n=this.bodyWrapper;if(Math.abs(t.spinY)>0){var i=n.scrollTop;t.pixelY<0&&0!==i&&e.preventDefault(),t.pixelY>0&&n.scrollHeight-n.clientHeight>i&&e.preventDefault(),n.scrollTop+=Math.ceil(t.pixelY/5)}else n.scrollLeft+=Math.ceil(t.pixelX/5)},handleHeaderFooterMousewheel:function(e,t){var n=t.pixelX,i=t.pixelY;Math.abs(n)>=Math.abs(i)&&(this.bodyWrapper.scrollLeft+=t.pixelX/5)},syncPostion:Object(Ni["throttle"])(20,(function(){var e=this.bodyWrapper,t=e.scrollLeft,n=e.scrollTop,i=e.offsetWidth,r=e.scrollWidth,o=this.$refs,s=o.headerWrapper,a=o.footerWrapper,c=o.fixedBodyWrapper,l=o.rightFixedBodyWrapper;s&&(s.scrollLeft=t),a&&(a.scrollLeft=t),c&&(c.scrollTop=n),l&&(l.scrollTop=n);var u=r-i-1;this.scrollPosition=t>=u?"right":0===t?"left":"middle"})),bindEvents:function(){this.bodyWrapper.addEventListener("scroll",this.syncPostion,{passive:!0}),this.fit&&Object(ei["addResizeListener"])(this.$el,this.resizeListener)},unbindEvents:function(){this.bodyWrapper.removeEventListener("scroll",this.syncPostion,{passive:!0}),this.fit&&Object(ei["removeResizeListener"])(this.$el,this.resizeListener)},resizeListener:function(){if(this.$ready){var e=!1,t=this.$el,n=this.resizeState,i=n.width,r=n.height,o=t.offsetWidth;i!==o&&(e=!0);var s=t.offsetHeight;(this.height||this.shouldUpdateHeight)&&r!==s&&(e=!0),e&&(this.resizeState.width=o,this.resizeState.height=s,this.doLayout())}},doLayout:function(){this.shouldUpdateHeight&&this.layout.updateElsHeight(),this.layout.updateColumnsWidth()},sort:function(e,t){this.store.commit("sort",{prop:e,order:t})},toggleAllSelection:function(){this.store.commit("toggleAllSelection")}},computed:Fr({tableSize:function(){return this.size||(this.$ELEMENT||{}).size},bodyWrapper:function(){return this.$refs.bodyWrapper},shouldUpdateHeight:function(){return this.height||this.maxHeight||this.fixedColumns.length>0||this.rightFixedColumns.length>0},bodyWidth:function(){var e=this.layout,t=e.bodyWidth,n=e.scrollY,i=e.gutterWidth;return t?t-(n?i:0)+"px":""},bodyHeight:function(){var e=this.layout,t=e.headerHeight,n=void 0===t?0:t,i=e.bodyHeight,r=e.footerHeight,o=void 0===r?0:r;if(this.height)return{height:i?i+"px":""};if(this.maxHeight){var s=nr(this.maxHeight);if("number"===typeof s)return{"max-height":s-o-(this.showHeader?n:0)+"px"}}return{}},fixedBodyHeight:function(){if(this.height)return{height:this.layout.fixedBodyHeight?this.layout.fixedBodyHeight+"px":""};if(this.maxHeight){var e=nr(this.maxHeight);if("number"===typeof e)return e=this.layout.scrollX?e-this.layout.gutterWidth:e,this.showHeader&&(e-=this.layout.headerHeight),e-=this.layout.footerHeight,{"max-height":e+"px"}}return{}},fixedHeight:function(){return this.maxHeight?this.showSummary?{bottom:0}:{bottom:this.layout.scrollX&&this.data.length?this.layout.gutterWidth+"px":""}:this.showSummary?{height:this.layout.tableHeight?this.layout.tableHeight+"px":""}:{height:this.layout.viewportHeight?this.layout.viewportHeight+"px":""}},emptyBlockStyle:function(){if(this.data&&this.data.length)return null;var e="100%";return this.layout.appendHeight&&(e="calc(100% - "+this.layout.appendHeight+"px)"),{width:this.bodyWidth,height:e}}},gr({selection:"selection",columns:"columns",tableData:"data",fixedColumns:"fixedColumns",rightFixedColumns:"rightFixedColumns"})),watch:{height:{immediate:!0,handler:function(e){this.layout.setHeight(e)}},maxHeight:{immediate:!0,handler:function(e){this.layout.setMaxHeight(e)}},currentRowKey:{immediate:!0,handler:function(e){this.rowKey&&this.store.setCurrentRowKey(e)}},data:{immediate:!0,handler:function(e){this.store.commit("setData",e)}},expandRowKeys:{immediate:!0,handler:function(e){e&&this.store.setExpandRowKeysAdapter(e)}}},created:function(){var e=this;this.tableId="el-table_"+$r++,this.debouncedUpdateLayout=Object(Ni["debounce"])(50,(function(){return e.doLayout()}))},mounted:function(){var e=this;this.bindEvents(),this.store.updateColumns(),this.doLayout(),this.resizeState={width:this.$el.offsetWidth,height:this.$el.offsetHeight},this.store.states.columns.forEach((function(t){t.filteredValue&&t.filteredValue.length&&e.store.commit("filterChange",{column:t,values:t.filteredValue,silent:!0})})),this.$ready=!0},destroyed:function(){this.unbindEvents()},data:function(){var e=this.treeProps,t=e.hasChildren,n=void 0===t?"hasChildren":t,i=e.children,r=void 0===i?"children":i;this.store=fr(this,{rowKey:this.rowKey,defaultExpandAll:this.defaultExpandAll,selectOnIndeterminate:this.selectOnIndeterminate,indent:this.indent,lazy:this.lazy,lazyColumnIdentifier:n,childrenColumnName:r});var o=new Cr({store:this.store,table:this,fit:this.fit,showHeader:this.showHeader});return{layout:o,isHidden:!1,renderExpanded:null,resizeProxyVisible:!1,resizeState:{width:null,height:null},isGroup:!1,scrollPosition:"left"}}},Kr=Hr,Wr=a(Kr,xi,Pi,!1,null,null,null);Wr.options.__file="packages/table/src/table.vue";var qr=Wr.exports;qr.install=function(e){e.component(qr.name,qr)};var Gr=qr,zr={default:{order:""},selection:{width:48,minWidth:48,realWidth:48,order:"",className:"el-table-column--selection"},expand:{width:48,minWidth:48,realWidth:48,order:""},index:{width:48,minWidth:48,realWidth:48,order:""}},Yr={selection:{renderHeader:function(e,t){var n=t.store;return e("el-checkbox",{attrs:{disabled:n.states.data&&0===n.states.data.length,indeterminate:n.states.selection.length>0&&!this.isAllSelected,value:this.isAllSelected},nativeOn:{click:this.toggleAllSelection}})},renderCell:function(e,t){var n=t.row,i=t.column,r=t.store,o=t.$index;return e("el-checkbox",{nativeOn:{click:function(e){return e.stopPropagation()}},attrs:{value:r.isSelected(n),disabled:!!i.selectable&&!i.selectable.call(null,n,o)},on:{input:function(){r.commit("rowSelectedChanged",n)}}})},sortable:!1,resizable:!1},index:{renderHeader:function(e,t){var n=t.column;return n.label||"#"},renderCell:function(e,t){var n=t.$index,i=t.column,r=n+1,o=i.index;return"number"===typeof o?r=n+o:"function"===typeof o&&(r=o(n)),e("div",[r])},sortable:!1},expand:{renderHeader:function(e,t){var n=t.column;return n.label||""},renderCell:function(e,t){var n=t.row,i=t.store,r=["el-table__expand-icon"];i.states.expandRows.indexOf(n)>-1&&r.push("el-table__expand-icon--expanded");var o=function(e){e.stopPropagation(),i.toggleRowExpansion(n)};return e("div",{class:r,on:{click:o}},[e("i",{class:"el-icon el-icon-arrow-right"})])},sortable:!1,resizable:!1,className:"el-table__expand-column"}};function Jr(e,t){var n=t.row,i=t.column,r=t.$index,o=i.property,s=o&&Object(v["getPropByPath"])(n,o).v;return i&&i.formatter?i.formatter(n,i,s,r):s}function Xr(e,t){var n=t.row,i=t.treeNode,r=t.store;if(!i)return null;var o=[],s=function(e){e.stopPropagation(),r.loadOrToggle(n)};if(i.indent&&o.push(e("span",{class:"el-table__indent",style:{"padding-left":i.indent+"px"}})),"boolean"!==typeof i.expanded||i.noLazyChildren)o.push(e("span",{class:"el-table__placeholder"}));else{var a=["el-table__expand-icon",i.expanded?"el-table__expand-icon--expanded":""],c=["el-icon-arrow-right"];i.loading&&(c=["el-icon-loading"]),o.push(e("div",{class:a,on:{click:s}},[e("i",{class:c})]))}return o}var Qr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Zr=1,eo={name:"ElTableColumn",props:{type:{type:String,default:"default"},label:String,className:String,labelClassName:String,property:String,prop:String,width:{},minWidth:{},renderHeader:Function,sortable:{type:[Boolean,String],default:!1},sortMethod:Function,sortBy:[String,Function,Array],resizable:{type:Boolean,default:!0},columnKey:String,align:String,headerAlign:String,showTooltipWhenOverflow:Boolean,showOverflowTooltip:Boolean,fixed:[Boolean,String],formatter:Function,selectable:Function,reserveSelection:Boolean,filterMethod:Function,filteredValue:Array,filters:Array,filterPlacement:String,filterMultiple:{type:Boolean,default:!0},index:[Number,Function],sortOrders:{type:Array,default:function(){return["ascending","descending",null]},validator:function(e){return e.every((function(e){return["ascending","descending",null].indexOf(e)>-1}))}}},data:function(){return{isSubColumn:!1,columns:[]}},computed:{owner:function(){var e=this.$parent;while(e&&!e.tableId)e=e.$parent;return e},columnOrTableParent:function(){var e=this.$parent;while(e&&!e.tableId&&!e.columnId)e=e.$parent;return e},realWidth:function(){return er(this.width)},realMinWidth:function(){return tr(this.minWidth)},realAlign:function(){return this.align?"is-"+this.align:null},realHeaderAlign:function(){return this.headerAlign?"is-"+this.headerAlign:this.realAlign}},methods:{getPropsData:function(){for(var e=this,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return n.reduce((function(t,n){return Array.isArray(n)&&n.forEach((function(n){t[n]=e[n]})),t}),{})},getColumnElIndex:function(e,t){return[].indexOf.call(e,t)},setColumnWidth:function(e){return this.realWidth&&(e.width=this.realWidth),this.realMinWidth&&(e.minWidth=this.realMinWidth),e.minWidth||(e.minWidth=80),e.realWidth=void 0===e.width?e.minWidth:e.width,e},setColumnForcedProps:function(e){var t=e.type,n=Yr[t]||{};return Object.keys(n).forEach((function(t){var i=n[t];void 0!==i&&(e[t]="className"===t?e[t]+" "+i:i)})),e},setColumnRenders:function(e){var t=this;this.$createElement;this.renderHeader?console.warn("[Element Warn][TableColumn]Comparing to render-header, scoped-slot header is easier to use. We recommend users to use scoped-slot header."):"selection"!==e.type&&(e.renderHeader=function(n,i){var r=t.$scopedSlots.header;return r?r(i):e.label});var n=e.renderCell;return"expand"===e.type?(e.renderCell=function(e,t){return e("div",{class:"cell"},[n(e,t)])},this.owner.renderExpanded=function(e,n){return t.$scopedSlots.default?t.$scopedSlots.default(n):t.$slots.default}):(n=n||Jr,e.renderCell=function(i,r){var o=null;o=t.$scopedSlots.default?t.$scopedSlots.default(r):n(i,r);var s=Xr(i,r),a={class:"cell",style:{}};return e.showOverflowTooltip&&(a.class+=" el-tooltip",a.style={width:(r.column.realWidth||r.column.width)-1+"px"}),i("div",a,[s,o])}),e},registerNormalWatchers:function(){var e=this,t=["label","property","filters","filterMultiple","sortable","index","formatter","className","labelClassName","showOverflowTooltip"],n={prop:"property",realAlign:"align",realHeaderAlign:"headerAlign",realWidth:"width"},i=t.reduce((function(e,t){return e[t]=t,e}),n);Object.keys(i).forEach((function(t){var i=n[t];e.$watch(t,(function(t){e.columnConfig[i]=t}))}))},registerComplexWatchers:function(){var e=this,t=["fixed"],n={realWidth:"width",realMinWidth:"minWidth"},i=t.reduce((function(e,t){return e[t]=t,e}),n);Object.keys(i).forEach((function(t){var i=n[t];e.$watch(t,(function(t){e.columnConfig[i]=t;var n="fixed"===i;e.owner.store.scheduleLayout(n)}))}))}},components:{ElCheckbox:Di.a},beforeCreate:function(){this.row={},this.column={},this.$index=0,this.columnId=""},created:function(){var e=this.columnOrTableParent;this.isSubColumn=this.owner!==e,this.columnId=(e.tableId||e.columnId)+"_column_"+Zr++;var t=this.type||"default",n=""===this.sortable||this.sortable,i=Qr({},zr[t],{id:this.columnId,type:t,property:this.prop||this.property,align:this.realAlign,headerAlign:this.realHeaderAlign,showOverflowTooltip:this.showOverflowTooltip||this.showTooltipWhenOverflow,filterable:this.filters||this.filterMethod,filteredValue:[],filterPlacement:"",isColumnGroup:!1,filterOpened:!1,sortable:n,index:this.index}),r=["columnKey","label","className","labelClassName","type","renderHeader","formatter","fixed","resizable"],o=["sortMethod","sortBy","sortOrders"],s=["selectable","reserveSelection"],a=["filterMethod","filters","filterMultiple","filterOpened","filteredValue","filterPlacement"],c=this.getPropsData(r,o,s,a);c=Zi(i,c);var l=ir(this.setColumnRenders,this.setColumnWidth,this.setColumnForcedProps);c=l(c),this.columnConfig=c,this.registerNormalWatchers(),this.registerComplexWatchers()},mounted:function(){var e=this.owner,t=this.columnOrTableParent,n=this.isSubColumn?t.$el.children:t.$refs.hiddenColumns.children,i=this.getColumnElIndex(n,this.$el);e.store.commit("insertColumn",this.columnConfig,i,this.isSubColumn?t.columnConfig:null)},destroyed:function(){if(this.$parent){var e=this.$parent;this.owner.store.commit("removeColumn",this.columnConfig,this.isSubColumn?e.columnConfig:null)}},render:function(e){return e("div",this.$slots.default)},install:function(e){e.component(eo.name,eo)}},to=eo,no=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.ranged?n("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleClose,expression:"handleClose"}],ref:"reference",staticClass:"el-date-editor el-range-editor el-input__inner",class:["el-date-editor--"+e.type,e.pickerSize?"el-range-editor--"+e.pickerSize:"",e.pickerDisabled?"is-disabled":"",e.pickerVisible?"is-active":""],on:{click:e.handleRangeClick,mouseenter:e.handleMouseEnter,mouseleave:function(t){e.showClose=!1},keydown:e.handleKeydown}},[n("i",{class:["el-input__icon","el-range__icon",e.triggerClass]}),n("input",e._b({staticClass:"el-range-input",attrs:{autocomplete:"off",placeholder:e.startPlaceholder,disabled:e.pickerDisabled,readonly:!e.editable||e.readonly,name:e.name&&e.name[0]},domProps:{value:e.displayValue&&e.displayValue[0]},on:{input:e.handleStartInput,change:e.handleStartChange,focus:e.handleFocus}},"input",e.firstInputId,!1)),e._t("range-separator",[n("span",{staticClass:"el-range-separator"},[e._v(e._s(e.rangeSeparator))])]),n("input",e._b({staticClass:"el-range-input",attrs:{autocomplete:"off",placeholder:e.endPlaceholder,disabled:e.pickerDisabled,readonly:!e.editable||e.readonly,name:e.name&&e.name[1]},domProps:{value:e.displayValue&&e.displayValue[1]},on:{input:e.handleEndInput,change:e.handleEndChange,focus:e.handleFocus}},"input",e.secondInputId,!1)),e.haveTrigger?n("i",{staticClass:"el-input__icon el-range__close-icon",class:[e.showClose?""+e.clearIcon:""],on:{click:e.handleClickIcon}}):e._e()],2):n("el-input",e._b({directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleClose,expression:"handleClose"}],ref:"reference",staticClass:"el-date-editor",class:"el-date-editor--"+e.type,attrs:{readonly:!e.editable||e.readonly||"dates"===e.type||"week"===e.type,disabled:e.pickerDisabled,size:e.pickerSize,name:e.name,placeholder:e.placeholder,value:e.displayValue,validateEvent:!1},on:{focus:e.handleFocus,input:function(t){return e.userInput=t},change:e.handleChange},nativeOn:{keydown:function(t){return e.handleKeydown(t)},mouseenter:function(t){return e.handleMouseEnter(t)},mouseleave:function(t){e.showClose=!1}}},"el-input",e.firstInputId,!1),[n("i",{staticClass:"el-input__icon",class:e.triggerClass,attrs:{slot:"prefix"},on:{click:e.handleFocus},slot:"prefix"}),e.haveTrigger?n("i",{staticClass:"el-input__icon",class:[e.showClose?""+e.clearIcon:""],attrs:{slot:"suffix"},on:{click:e.handleClickIcon},slot:"suffix"}):e._e()])},io=[];no._withStripped=!0;var ro=n(0),oo={props:{appendToBody:H.a.props.appendToBody,offset:H.a.props.offset,boundariesPadding:H.a.props.boundariesPadding,arrowOffset:H.a.props.arrowOffset},methods:H.a.methods,data:function(){return Rt()({visibleArrow:!0},H.a.data)},beforeDestroy:H.a.beforeDestroy},so={date:"yyyy-MM-dd",month:"yyyy-MM",datetime:"yyyy-MM-dd HH:mm:ss",time:"HH:mm:ss",week:"yyyywWW",timerange:"HH:mm:ss",daterange:"yyyy-MM-dd",monthrange:"yyyy-MM",datetimerange:"yyyy-MM-dd HH:mm:ss",year:"yyyy"},ao=["date","datetime","time","time-select","week","month","year","daterange","monthrange","timerange","datetimerange","dates"],co=function(e,t){return"timestamp"===t?e.getTime():Object(ro["formatDate"])(e,t)},lo=function(e,t){return"timestamp"===t?new Date(Number(e)):Object(ro["parseDate"])(e,t)},uo=function(e,t){if(Array.isArray(e)&&2===e.length){var n=e[0],i=e[1];if(n&&i)return[co(n,t),co(i,t)]}return""},ho=function(e,t,n){if(Array.isArray(e)||(e=e.split(n)),2===e.length){var i=e[0],r=e[1];return[lo(i,t),lo(r,t)]}return[]},po={default:{formatter:function(e){return e?""+e:""},parser:function(e){return void 0===e||""===e?null:e}},week:{formatter:function(e,t){var n=Object(ro["getWeekNumber"])(e),i=e.getMonth(),r=new Date(e);1===n&&11===i&&(r.setHours(0,0,0,0),r.setDate(r.getDate()+3-(r.getDay()+6)%7));var o=Object(ro["formatDate"])(r,t);return o=/WW/.test(o)?o.replace(/WW/,n<10?"0"+n:n):o.replace(/W/,n),o},parser:function(e,t){return po.date.parser(e,t)}},date:{formatter:co,parser:lo},datetime:{formatter:co,parser:lo},daterange:{formatter:uo,parser:ho},monthrange:{formatter:uo,parser:ho},datetimerange:{formatter:uo,parser:ho},timerange:{formatter:uo,parser:ho},time:{formatter:co,parser:lo},month:{formatter:co,parser:lo},year:{formatter:co,parser:lo},number:{formatter:function(e){return e?""+e:""},parser:function(e){var t=Number(e);return isNaN(e)?null:t}},dates:{formatter:function(e,t){return e.map((function(e){return co(e,t)}))},parser:function(e,t){return("string"===typeof e?e.split(", "):e).map((function(e){return e instanceof Date?e:lo(e,t)}))}}},fo={left:"bottom-start",center:"bottom",right:"bottom-end"},go=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"-";if(!e)return null;var r=(po[n]||po["default"]).parser,o=t||so[n];return r(e,o,i)},mo=function(e,t,n){if(!e)return null;var i=(po[n]||po["default"]).formatter,r=t||so[n];return i(e,r)},_o=function(e,t){var n=function(e,t){var n=e instanceof Date,i=t instanceof Date;return n&&i?e.getTime()===t.getTime():!n&&!i&&e===t},i=e instanceof Array,r=t instanceof Array;return i&&r?e.length===t.length&&e.every((function(e,i){return n(e,t[i])})):!i&&!r&&n(e,t)},vo=function(e){return"string"===typeof e||e instanceof String},yo=function(e){return null===e||void 0===e||vo(e)||Array.isArray(e)&&2===e.length&&e.every(vo)},Co={mixins:[O.a,oo],inject:{elForm:{default:""},elFormItem:{default:""}},props:{size:String,format:String,valueFormat:String,readonly:Boolean,placeholder:String,startPlaceholder:String,endPlaceholder:String,prefixIcon:String,clearIcon:{type:String,default:"el-icon-circle-close"},name:{default:"",validator:yo},disabled:Boolean,clearable:{type:Boolean,default:!0},id:{default:"",validator:yo},popperClass:String,editable:{type:Boolean,default:!0},align:{type:String,default:"left"},value:{},defaultValue:{},defaultTime:{},rangeSeparator:{default:"-"},pickerOptions:{},unlinkPanels:Boolean,validateEvent:{type:Boolean,default:!0}},components:{ElInput:g.a},directives:{Clickoutside:V.a},data:function(){return{pickerVisible:!1,showClose:!1,userInput:null,valueOnOpen:null,unwatchPickerOptions:null}},watch:{pickerVisible:function(e){this.readonly||this.pickerDisabled||(e?(this.showPicker(),this.valueOnOpen=Array.isArray(this.value)?[].concat(this.value):this.value):(this.hidePicker(),this.emitChange(this.value),this.userInput=null,this.validateEvent&&this.dispatch("ElFormItem","el.form.blur"),this.$emit("blur",this),this.blur()))},parsedValue:{immediate:!0,handler:function(e){this.picker&&(this.picker.value=e)}},defaultValue:function(e){this.picker&&(this.picker.defaultValue=e)},value:function(e,t){_o(e,t)||this.pickerVisible||!this.validateEvent||this.dispatch("ElFormItem","el.form.change",e)}},computed:{ranged:function(){return this.type.indexOf("range")>-1},reference:function(){var e=this.$refs.reference;return e.$el||e},refInput:function(){return this.reference?[].slice.call(this.reference.querySelectorAll("input")):[]},valueIsEmpty:function(){var e=this.value;if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(e[t])return!1}else if(e)return!1;return!0},triggerClass:function(){return this.prefixIcon||(-1!==this.type.indexOf("time")?"el-icon-time":"el-icon-date")},selectionMode:function(){return"week"===this.type?"week":"month"===this.type?"month":"year"===this.type?"year":"dates"===this.type?"dates":"day"},haveTrigger:function(){return"undefined"!==typeof this.showTrigger?this.showTrigger:-1!==ao.indexOf(this.type)},displayValue:function(){var e=mo(this.parsedValue,this.format,this.type,this.rangeSeparator);return Array.isArray(this.userInput)?[this.userInput[0]||e&&e[0]||"",this.userInput[1]||e&&e[1]||""]:null!==this.userInput?this.userInput:e?"dates"===this.type?e.join(", "):e:""},parsedValue:function(){if(!this.value)return this.value;if("time-select"===this.type)return this.value;var e=Object(ro["isDateObject"])(this.value)||Array.isArray(this.value)&&this.value.every(ro["isDateObject"]);return e?this.value:this.valueFormat?go(this.value,this.valueFormat,this.type,this.rangeSeparator)||this.value:Array.isArray(this.value)?this.value.map((function(e){return new Date(e)})):new Date(this.value)},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},pickerSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},pickerDisabled:function(){return this.disabled||(this.elForm||{}).disabled},firstInputId:function(){var e={},t=void 0;return t=this.ranged?this.id&&this.id[0]:this.id,t&&(e.id=t),e},secondInputId:function(){var e={},t=void 0;return this.ranged&&(t=this.id&&this.id[1]),t&&(e.id=t),e}},created:function(){this.popperOptions={boundariesPadding:0,gpuAcceleration:!1},this.placement=fo[this.align]||fo.left,this.$on("fieldReset",this.handleFieldReset)},methods:{focus:function(){this.ranged?this.handleFocus():this.$refs.reference.focus()},blur:function(){this.refInput.forEach((function(e){return e.blur()}))},parseValue:function(e){var t=Object(ro["isDateObject"])(e)||Array.isArray(e)&&e.every(ro["isDateObject"]);return this.valueFormat&&!t&&go(e,this.valueFormat,this.type,this.rangeSeparator)||e},formatToValue:function(e){var t=Object(ro["isDateObject"])(e)||Array.isArray(e)&&e.every(ro["isDateObject"]);return this.valueFormat&&t?mo(e,this.valueFormat,this.type,this.rangeSeparator):e},parseString:function(e){var t=Array.isArray(e)?this.type:this.type.replace("range","");return go(e,this.format,t)},formatToString:function(e){var t=Array.isArray(e)?this.type:this.type.replace("range","");return mo(e,this.format,t)},handleMouseEnter:function(){this.readonly||this.pickerDisabled||!this.valueIsEmpty&&this.clearable&&(this.showClose=!0)},handleChange:function(){if(this.userInput){var e=this.parseString(this.displayValue);e&&(this.picker.value=e,this.isValidValue(e)&&(this.emitInput(e),this.userInput=null))}""===this.userInput&&(this.emitInput(null),this.emitChange(null),this.userInput=null)},handleStartInput:function(e){this.userInput?this.userInput=[e.target.value,this.userInput[1]]:this.userInput=[e.target.value,null]},handleEndInput:function(e){this.userInput?this.userInput=[this.userInput[0],e.target.value]:this.userInput=[null,e.target.value]},handleStartChange:function(e){var t=this.parseString(this.userInput&&this.userInput[0]);if(t){this.userInput=[this.formatToString(t),this.displayValue[1]];var n=[t,this.picker.value&&this.picker.value[1]];this.picker.value=n,this.isValidValue(n)&&(this.emitInput(n),this.userInput=null)}},handleEndChange:function(e){var t=this.parseString(this.userInput&&this.userInput[1]);if(t){this.userInput=[this.displayValue[0],this.formatToString(t)];var n=[this.picker.value&&this.picker.value[0],t];this.picker.value=n,this.isValidValue(n)&&(this.emitInput(n),this.userInput=null)}},handleClickIcon:function(e){this.readonly||this.pickerDisabled||(this.showClose?(this.valueOnOpen=this.value,e.stopPropagation(),this.emitInput(null),this.emitChange(null),this.showClose=!1,this.picker&&"function"===typeof this.picker.handleClear&&this.picker.handleClear()):this.pickerVisible=!this.pickerVisible)},handleClose:function(){if(this.pickerVisible&&(this.pickerVisible=!1,"dates"===this.type)){var e=go(this.valueOnOpen,this.valueFormat,this.type,this.rangeSeparator)||this.valueOnOpen;this.emitInput(e)}},handleFieldReset:function(e){this.userInput=""===e?null:e},handleFocus:function(){var e=this.type;-1===ao.indexOf(e)||this.pickerVisible||(this.pickerVisible=!0),this.$emit("focus",this)},handleKeydown:function(e){var t=this,n=e.keyCode;return 27===n?(this.pickerVisible=!1,void e.stopPropagation()):9!==n?13===n?((""===this.userInput||this.isValidValue(this.parseString(this.displayValue)))&&(this.handleChange(),this.pickerVisible=this.picker.visible=!1,this.blur()),void e.stopPropagation()):void(this.userInput?e.stopPropagation():this.picker&&this.picker.handleKeydown&&this.picker.handleKeydown(e)):void(this.ranged?setTimeout((function(){-1===t.refInput.indexOf(document.activeElement)&&(t.pickerVisible=!1,t.blur(),e.stopPropagation())}),0):(this.handleChange(),this.pickerVisible=this.picker.visible=!1,this.blur(),e.stopPropagation()))},handleRangeClick:function(){var e=this.type;-1===ao.indexOf(e)||this.pickerVisible||(this.pickerVisible=!0),this.$emit("focus",this)},hidePicker:function(){this.picker&&(this.picker.resetView&&this.picker.resetView(),this.pickerVisible=this.picker.visible=!1,this.destroyPopper())},showPicker:function(){var e=this;this.$isServer||(this.picker||this.mountPicker(),this.pickerVisible=this.picker.visible=!0,this.updatePopper(),this.picker.value=this.parsedValue,this.picker.resetView&&this.picker.resetView(),this.$nextTick((function(){e.picker.adjustSpinners&&e.picker.adjustSpinners()})))},mountPicker:function(){var e=this;this.picker=new $i.a(this.panel).$mount(),this.picker.defaultValue=this.defaultValue,this.picker.defaultTime=this.defaultTime,this.picker.popperClass=this.popperClass,this.popperElm=this.picker.$el,this.picker.width=this.reference.getBoundingClientRect().width,this.picker.showTime="datetime"===this.type||"datetimerange"===this.type,this.picker.selectionMode=this.selectionMode,this.picker.unlinkPanels=this.unlinkPanels,this.picker.arrowControl=this.arrowControl||this.timeArrowControl||!1,this.$watch("format",(function(t){e.picker.format=t}));var t=function(){var t=e.pickerOptions;if(t&&t.selectableRange){var n=t.selectableRange,i=po.datetimerange.parser,r=so.timerange;n=Array.isArray(n)?n:[n],e.picker.selectableRange=n.map((function(t){return i(t,r,e.rangeSeparator)}))}for(var o in t)t.hasOwnProperty(o)&&"selectableRange"!==o&&(e.picker[o]=t[o]);e.format&&(e.picker.format=e.format)};t(),this.unwatchPickerOptions=this.$watch("pickerOptions",(function(){return t()}),{deep:!0}),this.$el.appendChild(this.picker.$el),this.picker.resetView&&this.picker.resetView(),this.picker.$on("dodestroy",this.doDestroy),this.picker.$on("pick",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.userInput=null,e.pickerVisible=e.picker.visible=n,e.emitInput(t),e.picker.resetView&&e.picker.resetView()})),this.picker.$on("select-range",(function(t,n,i){0!==e.refInput.length&&(i&&"min"!==i?"max"===i&&(e.refInput[1].setSelectionRange(t,n),e.refInput[1].focus()):(e.refInput[0].setSelectionRange(t,n),e.refInput[0].focus()))}))},unmountPicker:function(){this.picker&&(this.picker.$destroy(),this.picker.$off(),"function"===typeof this.unwatchPickerOptions&&this.unwatchPickerOptions(),this.picker.$el.parentNode.removeChild(this.picker.$el))},emitChange:function(e){_o(e,this.valueOnOpen)||(this.$emit("change",e),this.valueOnOpen=e,this.validateEvent&&this.dispatch("ElFormItem","el.form.change",e))},emitInput:function(e){var t=this.formatToValue(e);_o(this.value,t)||this.$emit("input",t)},isValidValue:function(e){return this.picker||this.mountPicker(),!this.picker.isValidValue||e&&this.picker.isValidValue(e)}}},Eo=Co,bo=a(Eo,no,io,!1,null,null,null);bo.options.__file="packages/date-picker/src/picker.vue";var To=bo.exports,So=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-enter":e.handleEnter,"after-leave":e.handleLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-picker-panel el-date-picker el-popper",class:[{"has-sidebar":e.$slots.sidebar||e.shortcuts,"has-time":e.showTime},e.popperClass]},[n("div",{staticClass:"el-picker-panel__body-wrapper"},[e._t("sidebar"),e.shortcuts?n("div",{staticClass:"el-picker-panel__sidebar"},e._l(e.shortcuts,(function(t,i){return n("button",{key:i,staticClass:"el-picker-panel__shortcut",attrs:{type:"button"},on:{click:function(n){e.handleShortcutClick(t)}}},[e._v(e._s(t.text))])})),0):e._e(),n("div",{staticClass:"el-picker-panel__body"},[e.showTime?n("div",{staticClass:"el-date-picker__time-header"},[n("span",{staticClass:"el-date-picker__editor-wrap"},[n("el-input",{attrs:{placeholder:e.t("el.datepicker.selectDate"),value:e.visibleDate,size:"small"},on:{input:function(t){return e.userInputDate=t},change:e.handleVisibleDateChange}})],1),n("span",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleTimePickClose,expression:"handleTimePickClose"}],staticClass:"el-date-picker__editor-wrap"},[n("el-input",{ref:"input",attrs:{placeholder:e.t("el.datepicker.selectTime"),value:e.visibleTime,size:"small"},on:{focus:function(t){e.timePickerVisible=!0},input:function(t){return e.userInputTime=t},change:e.handleVisibleTimeChange}}),n("time-picker",{ref:"timepicker",attrs:{"time-arrow-control":e.arrowControl,visible:e.timePickerVisible},on:{pick:e.handleTimePick,mounted:e.proxyTimePickerDataProperties}})],1)]):e._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:"time"!==e.currentView,expression:"currentView !== 'time'"}],staticClass:"el-date-picker__header",class:{"el-date-picker__header--bordered":"year"===e.currentView||"month"===e.currentView}},[n("button",{staticClass:"el-picker-panel__icon-btn el-date-picker__prev-btn el-icon-d-arrow-left",attrs:{type:"button","aria-label":e.t("el.datepicker.prevYear")},on:{click:e.prevYear}}),n("button",{directives:[{name:"show",rawName:"v-show",value:"date"===e.currentView,expression:"currentView === 'date'"}],staticClass:"el-picker-panel__icon-btn el-date-picker__prev-btn el-icon-arrow-left",attrs:{type:"button","aria-label":e.t("el.datepicker.prevMonth")},on:{click:e.prevMonth}}),n("span",{staticClass:"el-date-picker__header-label",attrs:{role:"button"},on:{click:e.showYearPicker}},[e._v(e._s(e.yearLabel))]),n("span",{directives:[{name:"show",rawName:"v-show",value:"date"===e.currentView,expression:"currentView === 'date'"}],staticClass:"el-date-picker__header-label",class:{active:"month"===e.currentView},attrs:{role:"button"},on:{click:e.showMonthPicker}},[e._v(e._s(e.t("el.datepicker.month"+(e.month+1))))]),n("button",{staticClass:"el-picker-panel__icon-btn el-date-picker__next-btn el-icon-d-arrow-right",attrs:{type:"button","aria-label":e.t("el.datepicker.nextYear")},on:{click:e.nextYear}}),n("button",{directives:[{name:"show",rawName:"v-show",value:"date"===e.currentView,expression:"currentView === 'date'"}],staticClass:"el-picker-panel__icon-btn el-date-picker__next-btn el-icon-arrow-right",attrs:{type:"button","aria-label":e.t("el.datepicker.nextMonth")},on:{click:e.nextMonth}})]),n("div",{staticClass:"el-picker-panel__content"},[n("date-table",{directives:[{name:"show",rawName:"v-show",value:"date"===e.currentView,expression:"currentView === 'date'"}],attrs:{"selection-mode":e.selectionMode,"first-day-of-week":e.firstDayOfWeek,value:e.value,"default-value":e.defaultValue?new Date(e.defaultValue):null,date:e.date,"cell-class-name":e.cellClassName,"disabled-date":e.disabledDate},on:{pick:e.handleDatePick}}),n("year-table",{directives:[{name:"show",rawName:"v-show",value:"year"===e.currentView,expression:"currentView === 'year'"}],attrs:{value:e.value,"default-value":e.defaultValue?new Date(e.defaultValue):null,date:e.date,"disabled-date":e.disabledDate},on:{pick:e.handleYearPick}}),n("month-table",{directives:[{name:"show",rawName:"v-show",value:"month"===e.currentView,expression:"currentView === 'month'"}],attrs:{value:e.value,"default-value":e.defaultValue?new Date(e.defaultValue):null,date:e.date,"disabled-date":e.disabledDate},on:{pick:e.handleMonthPick}})],1)])],2),n("div",{directives:[{name:"show",rawName:"v-show",value:e.footerVisible&&"date"===e.currentView,expression:"footerVisible && currentView === 'date'"}],staticClass:"el-picker-panel__footer"},[n("el-button",{directives:[{name:"show",rawName:"v-show",value:"dates"!==e.selectionMode,expression:"selectionMode !== 'dates'"}],staticClass:"el-picker-panel__link-btn",attrs:{size:"mini",type:"text"},on:{click:e.changeToNow}},[e._v("\n        "+e._s(e.t("el.datepicker.now"))+"\n      ")]),n("el-button",{staticClass:"el-picker-panel__link-btn",attrs:{plain:"",size:"mini"},on:{click:e.confirm}},[e._v("\n        "+e._s(e.t("el.datepicker.confirm"))+"\n      ")])],1)])])},Ro=[];So._withStripped=!0;var Io=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":function(t){e.$emit("dodestroy")}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-time-panel el-popper",class:e.popperClass},[n("div",{staticClass:"el-time-panel__content",class:{"has-seconds":e.showSeconds}},[n("time-spinner",{ref:"spinner",attrs:{"arrow-control":e.useArrow,"show-seconds":e.showSeconds,"am-pm-mode":e.amPmMode,date:e.date},on:{change:e.handleChange,"select-range":e.setSelectionRange}})],1),n("div",{staticClass:"el-time-panel__footer"},[n("button",{staticClass:"el-time-panel__btn cancel",attrs:{type:"button"},on:{click:e.handleCancel}},[e._v(e._s(e.t("el.datepicker.cancel")))]),n("button",{staticClass:"el-time-panel__btn",class:{confirm:!e.disabled},attrs:{type:"button"},on:{click:function(t){e.handleConfirm()}}},[e._v(e._s(e.t("el.datepicker.confirm")))])])])])},wo=[];Io._withStripped=!0;var Oo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-time-spinner",class:{"has-seconds":e.showSeconds}},[e.arrowControl?e._e():[n("el-scrollbar",{ref:"hours",staticClass:"el-time-spinner__wrapper",attrs:{"wrap-style":"max-height: inherit;","view-class":"el-time-spinner__list",noresize:"",tag:"ul"},nativeOn:{mouseenter:function(t){e.emitSelectRange("hours")},mousemove:function(t){e.adjustCurrentSpinner("hours")}}},e._l(e.hoursList,(function(t,i){return n("li",{key:i,staticClass:"el-time-spinner__item",class:{active:i===e.hours,disabled:t},on:{click:function(n){e.handleClick("hours",{value:i,disabled:t})}}},[e._v(e._s(("0"+(e.amPmMode?i%12||12:i)).slice(-2))+e._s(e.amPm(i)))])})),0),n("el-scrollbar",{ref:"minutes",staticClass:"el-time-spinner__wrapper",attrs:{"wrap-style":"max-height: inherit;","view-class":"el-time-spinner__list",noresize:"",tag:"ul"},nativeOn:{mouseenter:function(t){e.emitSelectRange("minutes")},mousemove:function(t){e.adjustCurrentSpinner("minutes")}}},e._l(e.minutesList,(function(t,i){return n("li",{key:i,staticClass:"el-time-spinner__item",class:{active:i===e.minutes,disabled:!t},on:{click:function(t){e.handleClick("minutes",{value:i,disabled:!1})}}},[e._v(e._s(("0"+i).slice(-2)))])})),0),n("el-scrollbar",{directives:[{name:"show",rawName:"v-show",value:e.showSeconds,expression:"showSeconds"}],ref:"seconds",staticClass:"el-time-spinner__wrapper",attrs:{"wrap-style":"max-height: inherit;","view-class":"el-time-spinner__list",noresize:"",tag:"ul"},nativeOn:{mouseenter:function(t){e.emitSelectRange("seconds")},mousemove:function(t){e.adjustCurrentSpinner("seconds")}}},e._l(60,(function(t,i){return n("li",{key:i,staticClass:"el-time-spinner__item",class:{active:i===e.seconds},on:{click:function(t){e.handleClick("seconds",{value:i,disabled:!1})}}},[e._v(e._s(("0"+i).slice(-2)))])})),0)],e.arrowControl?[n("div",{staticClass:"el-time-spinner__wrapper is-arrow",on:{mouseenter:function(t){e.emitSelectRange("hours")}}},[n("i",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:e.decrease,expression:"decrease"}],staticClass:"el-time-spinner__arrow el-icon-arrow-up"}),n("i",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:e.increase,expression:"increase"}],staticClass:"el-time-spinner__arrow el-icon-arrow-down"}),n("ul",{ref:"hours",staticClass:"el-time-spinner__list"},e._l(e.arrowHourList,(function(t,i){return n("li",{key:i,staticClass:"el-time-spinner__item",class:{active:t===e.hours,disabled:e.hoursList[t]}},[e._v(e._s(void 0===t?"":("0"+(e.amPmMode?t%12||12:t)).slice(-2)+e.amPm(t)))])})),0)]),n("div",{staticClass:"el-time-spinner__wrapper is-arrow",on:{mouseenter:function(t){e.emitSelectRange("minutes")}}},[n("i",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:e.decrease,expression:"decrease"}],staticClass:"el-time-spinner__arrow el-icon-arrow-up"}),n("i",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:e.increase,expression:"increase"}],staticClass:"el-time-spinner__arrow el-icon-arrow-down"}),n("ul",{ref:"minutes",staticClass:"el-time-spinner__list"},e._l(e.arrowMinuteList,(function(t,i){return n("li",{key:i,staticClass:"el-time-spinner__item",class:{active:t===e.minutes}},[e._v("\n          "+e._s(void 0===t?"":("0"+t).slice(-2))+"\n        ")])})),0)]),e.showSeconds?n("div",{staticClass:"el-time-spinner__wrapper is-arrow",on:{mouseenter:function(t){e.emitSelectRange("seconds")}}},[n("i",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:e.decrease,expression:"decrease"}],staticClass:"el-time-spinner__arrow el-icon-arrow-up"}),n("i",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:e.increase,expression:"increase"}],staticClass:"el-time-spinner__arrow el-icon-arrow-down"}),n("ul",{ref:"seconds",staticClass:"el-time-spinner__list"},e._l(e.arrowSecondList,(function(t,i){return n("li",{key:i,staticClass:"el-time-spinner__item",class:{active:t===e.seconds}},[e._v("\n          "+e._s(void 0===t?"":("0"+t).slice(-2))+"\n        ")])})),0)]):e._e()]:e._e()],2)},ko=[];Oo._withStripped=!0;var Mo={components:{ElScrollbar:W.a},directives:{repeatClick:Dt},props:{date:{},defaultValue:{},showSeconds:{type:Boolean,default:!0},arrowControl:Boolean,amPmMode:{type:String,default:""}},computed:{hours:function(){return this.date.getHours()},minutes:function(){return this.date.getMinutes()},seconds:function(){return this.date.getSeconds()},hoursList:function(){return Object(ro["getRangeHours"])(this.selectableRange)},minutesList:function(){return Object(ro["getRangeMinutes"])(this.selectableRange,this.hours)},arrowHourList:function(){var e=this.hours;return[e>0?e-1:void 0,e,e<23?e+1:void 0]},arrowMinuteList:function(){var e=this.minutes;return[e>0?e-1:void 0,e,e<59?e+1:void 0]},arrowSecondList:function(){var e=this.seconds;return[e>0?e-1:void 0,e,e<59?e+1:void 0]}},data:function(){return{selectableRange:[],currentScrollbar:null}},mounted:function(){var e=this;this.$nextTick((function(){!e.arrowControl&&e.bindScrollEvent()}))},methods:{increase:function(){this.scrollDown(1)},decrease:function(){this.scrollDown(-1)},modifyDateField:function(e,t){switch(e){case"hours":this.$emit("change",Object(ro["modifyTime"])(this.date,t,this.minutes,this.seconds));break;case"minutes":this.$emit("change",Object(ro["modifyTime"])(this.date,this.hours,t,this.seconds));break;case"seconds":this.$emit("change",Object(ro["modifyTime"])(this.date,this.hours,this.minutes,t));break}},handleClick:function(e,t){var n=t.value,i=t.disabled;i||(this.modifyDateField(e,n),this.emitSelectRange(e),this.adjustSpinner(e,n))},emitSelectRange:function(e){"hours"===e?this.$emit("select-range",0,2):"minutes"===e?this.$emit("select-range",3,5):"seconds"===e&&this.$emit("select-range",6,8),this.currentScrollbar=e},bindScrollEvent:function(){var e=this,t=function(t){e.$refs[t].wrap.onscroll=function(n){e.handleScroll(t,n)}};t("hours"),t("minutes"),t("seconds")},handleScroll:function(e){var t=Math.min(Math.round((this.$refs[e].wrap.scrollTop-(.5*this.scrollBarHeight(e)-10)/this.typeItemHeight(e)+3)/this.typeItemHeight(e)),"hours"===e?23:59);this.modifyDateField(e,t)},adjustSpinners:function(){this.adjustSpinner("hours",this.hours),this.adjustSpinner("minutes",this.minutes),this.adjustSpinner("seconds",this.seconds)},adjustCurrentSpinner:function(e){this.adjustSpinner(e,this[e])},adjustSpinner:function(e,t){if(!this.arrowControl){var n=this.$refs[e].wrap;n&&(n.scrollTop=Math.max(0,t*this.typeItemHeight(e)))}},scrollDown:function(e){var t=this;this.currentScrollbar||this.emitSelectRange("hours");var n=this.currentScrollbar,i=this.hoursList,r=this[n];if("hours"===this.currentScrollbar){var o=Math.abs(e);e=e>0?1:-1;var s=i.length;while(s--&&o)r=(r+e+i.length)%i.length,i[r]||o--;if(i[r])return}else r=(r+e+60)%60;this.modifyDateField(n,r),this.adjustSpinner(n,r),this.$nextTick((function(){return t.emitSelectRange(t.currentScrollbar)}))},amPm:function(e){var t="a"===this.amPmMode.toLowerCase();if(!t)return"";var n="A"===this.amPmMode,i=e<12?" am":" pm";return n&&(i=i.toUpperCase()),i},typeItemHeight:function(e){return this.$refs[e].$el.querySelector("li").offsetHeight},scrollBarHeight:function(e){return this.$refs[e].$el.offsetHeight}}},xo=Mo,Po=a(xo,Oo,ko,!1,null,null,null);Po.options.__file="packages/date-picker/src/basic/time-spinner.vue";var Ao=Po.exports,Do={mixins:[_.a],components:{TimeSpinner:Ao},props:{visible:Boolean,timeArrowControl:Boolean},watch:{visible:function(e){var t=this;e?(this.oldValue=this.value,this.$nextTick((function(){return t.$refs.spinner.emitSelectRange("hours")}))):this.needInitAdjust=!0},value:function(e){var t=this,n=void 0;e instanceof Date?n=Object(ro["limitTimeRange"])(e,this.selectableRange,this.format):e||(n=this.defaultValue?new Date(this.defaultValue):new Date),this.date=n,this.visible&&this.needInitAdjust&&(this.$nextTick((function(e){return t.adjustSpinners()})),this.needInitAdjust=!1)},selectableRange:function(e){this.$refs.spinner.selectableRange=e},defaultValue:function(e){Object(ro["isDate"])(this.value)||(this.date=e?new Date(e):new Date)}},data:function(){return{popperClass:"",format:"HH:mm:ss",value:"",defaultValue:null,date:new Date,oldValue:new Date,selectableRange:[],selectionRange:[0,2],disabled:!1,arrowControl:!1,needInitAdjust:!0}},computed:{showSeconds:function(){return-1!==(this.format||"").indexOf("ss")},useArrow:function(){return this.arrowControl||this.timeArrowControl||!1},amPmMode:function(){return-1!==(this.format||"").indexOf("A")?"A":-1!==(this.format||"").indexOf("a")?"a":""}},methods:{handleCancel:function(){this.$emit("pick",this.oldValue,!1)},handleChange:function(e){this.visible&&(this.date=Object(ro["clearMilliseconds"])(e),this.isValidValue(this.date)&&this.$emit("pick",this.date,!0))},setSelectionRange:function(e,t){this.$emit("select-range",e,t),this.selectionRange=[e,t]},handleConfirm:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments[1];if(!t){var n=Object(ro["clearMilliseconds"])(Object(ro["limitTimeRange"])(this.date,this.selectableRange,this.format));this.$emit("pick",n,e,t)}},handleKeydown:function(e){var t=e.keyCode,n={38:-1,40:1,37:-1,39:1};if(37===t||39===t){var i=n[t];return this.changeSelectionRange(i),void e.preventDefault()}if(38===t||40===t){var r=n[t];return this.$refs.spinner.scrollDown(r),void e.preventDefault()}},isValidValue:function(e){return Object(ro["timeWithinRange"])(e,this.selectableRange,this.format)},adjustSpinners:function(){return this.$refs.spinner.adjustSpinners()},changeSelectionRange:function(e){var t=[0,3].concat(this.showSeconds?[6]:[]),n=["hours","minutes"].concat(this.showSeconds?["seconds"]:[]),i=t.indexOf(this.selectionRange[0]),r=(i+e+t.length)%t.length;this.$refs.spinner.emitSelectRange(n[r])}},mounted:function(){var e=this;this.$nextTick((function(){return e.handleConfirm(!0,!0)})),this.$emit("mounted")}},No=Do,Lo=a(No,Io,wo,!1,null,null,null);Lo.options.__file="packages/date-picker/src/panel/time.vue";var Uo=Lo.exports,Bo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("table",{staticClass:"el-year-table",on:{click:e.handleYearTableClick}},[n("tbody",[n("tr",[n("td",{staticClass:"available",class:e.getCellStyle(e.startYear+0)},[n("a",{staticClass:"cell"},[e._v(e._s(e.startYear))])]),n("td",{staticClass:"available",class:e.getCellStyle(e.startYear+1)},[n("a",{staticClass:"cell"},[e._v(e._s(e.startYear+1))])]),n("td",{staticClass:"available",class:e.getCellStyle(e.startYear+2)},[n("a",{staticClass:"cell"},[e._v(e._s(e.startYear+2))])]),n("td",{staticClass:"available",class:e.getCellStyle(e.startYear+3)},[n("a",{staticClass:"cell"},[e._v(e._s(e.startYear+3))])])]),n("tr",[n("td",{staticClass:"available",class:e.getCellStyle(e.startYear+4)},[n("a",{staticClass:"cell"},[e._v(e._s(e.startYear+4))])]),n("td",{staticClass:"available",class:e.getCellStyle(e.startYear+5)},[n("a",{staticClass:"cell"},[e._v(e._s(e.startYear+5))])]),n("td",{staticClass:"available",class:e.getCellStyle(e.startYear+6)},[n("a",{staticClass:"cell"},[e._v(e._s(e.startYear+6))])]),n("td",{staticClass:"available",class:e.getCellStyle(e.startYear+7)},[n("a",{staticClass:"cell"},[e._v(e._s(e.startYear+7))])])]),n("tr",[n("td",{staticClass:"available",class:e.getCellStyle(e.startYear+8)},[n("a",{staticClass:"cell"},[e._v(e._s(e.startYear+8))])]),n("td",{staticClass:"available",class:e.getCellStyle(e.startYear+9)},[n("a",{staticClass:"cell"},[e._v(e._s(e.startYear+9))])]),n("td"),n("td")])])])},Vo=[];Bo._withStripped=!0;var jo=function(e){var t=Object(ro["getDayCountOfYear"])(e),n=new Date(e,0,1);return Object(ro["range"])(t).map((function(e){return Object(ro["nextDate"])(n,e)}))},Fo={props:{disabledDate:{},value:{},defaultValue:{validator:function(e){return null===e||e instanceof Date&&Object(ro["isDate"])(e)}},date:{}},computed:{startYear:function(){return 10*Math.floor(this.date.getFullYear()/10)}},methods:{getCellStyle:function(e){var t={},n=new Date;return t.disabled="function"===typeof this.disabledDate&&jo(e).every(this.disabledDate),t.current=Object(v["arrayFindIndex"])(Object(v["coerceTruthyValueToArray"])(this.value),(function(t){return t.getFullYear()===e}))>=0,t.today=n.getFullYear()===e,t.default=this.defaultValue&&this.defaultValue.getFullYear()===e,t},handleYearTableClick:function(e){var t=e.target;if("A"===t.tagName){if(Object(Be["hasClass"])(t.parentNode,"disabled"))return;var n=t.textContent||t.innerText;this.$emit("pick",Number(n))}}}},$o=Fo,Ho=a($o,Bo,Vo,!1,null,null,null);Ho.options.__file="packages/date-picker/src/basic/year-table.vue";var Ko=Ho.exports,Wo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("table",{staticClass:"el-month-table",on:{click:e.handleMonthTableClick,mousemove:e.handleMouseMove}},[n("tbody",e._l(e.rows,(function(t,i){return n("tr",{key:i},e._l(t,(function(t,i){return n("td",{key:i,class:e.getCellStyle(t)},[n("div",[n("a",{staticClass:"cell"},[e._v(e._s(e.t("el.datepicker.months."+e.months[t.text])))])])])})),0)})),0)])},qo=[];Wo._withStripped=!0;var Go=function(e,t){var n=Object(ro["getDayCountOfMonth"])(e,t),i=new Date(e,t,1);return Object(ro["range"])(n).map((function(e){return Object(ro["nextDate"])(i,e)}))},zo=function(e){return new Date(e.getFullYear(),e.getMonth())},Yo=function(e){return"number"===typeof e||"string"===typeof e?zo(new Date(e)).getTime():e instanceof Date?zo(e).getTime():NaN},Jo={props:{disabledDate:{},value:{},selectionMode:{default:"month"},minDate:{},maxDate:{},defaultValue:{validator:function(e){return null===e||Object(ro["isDate"])(e)||Array.isArray(e)&&e.every(ro["isDate"])}},date:{},rangeState:{default:function(){return{endDate:null,selecting:!1}}}},mixins:[_.a],watch:{"rangeState.endDate":function(e){this.markRange(this.minDate,e)},minDate:function(e,t){Yo(e)!==Yo(t)&&this.markRange(this.minDate,this.maxDate)},maxDate:function(e,t){Yo(e)!==Yo(t)&&this.markRange(this.minDate,this.maxDate)}},data:function(){return{months:["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],tableRows:[[],[],[]],lastRow:null,lastColumn:null}},methods:{cellMatchesDate:function(e,t){var n=new Date(t);return this.date.getFullYear()===n.getFullYear()&&Number(e.text)===n.getMonth()},getCellStyle:function(e){var t=this,n={},i=this.date.getFullYear(),r=new Date,o=e.text,s=this.defaultValue?Array.isArray(this.defaultValue)?this.defaultValue:[this.defaultValue]:[];return n.disabled="function"===typeof this.disabledDate&&Go(i,o).every(this.disabledDate),n.current=Object(v["arrayFindIndex"])(Object(v["coerceTruthyValueToArray"])(this.value),(function(e){return e.getFullYear()===i&&e.getMonth()===o}))>=0,n.today=r.getFullYear()===i&&r.getMonth()===o,n.default=s.some((function(n){return t.cellMatchesDate(e,n)})),e.inRange&&(n["in-range"]=!0,e.start&&(n["start-date"]=!0),e.end&&(n["end-date"]=!0)),n},getMonthOfCell:function(e){var t=this.date.getFullYear();return new Date(t,e,1)},markRange:function(e,t){e=Yo(e),t=Yo(t)||e;var n=[Math.min(e,t),Math.max(e,t)];e=n[0],t=n[1];for(var i=this.rows,r=0,o=i.length;r<o;r++)for(var s=i[r],a=0,c=s.length;a<c;a++){var l=s[a],u=4*r+a,d=new Date(this.date.getFullYear(),u).getTime();l.inRange=e&&d>=e&&d<=t,l.start=e&&d===e,l.end=t&&d===t}},handleMouseMove:function(e){if(this.rangeState.selecting){var t=e.target;if("A"===t.tagName&&(t=t.parentNode.parentNode),"DIV"===t.tagName&&(t=t.parentNode),"TD"===t.tagName){var n=t.parentNode.rowIndex,i=t.cellIndex;this.rows[n][i].disabled||n===this.lastRow&&i===this.lastColumn||(this.lastRow=n,this.lastColumn=i,this.$emit("changerange",{minDate:this.minDate,maxDate:this.maxDate,rangeState:{selecting:!0,endDate:this.getMonthOfCell(4*n+i)}}))}}},handleMonthTableClick:function(e){var t=e.target;if("A"===t.tagName&&(t=t.parentNode.parentNode),"DIV"===t.tagName&&(t=t.parentNode),"TD"===t.tagName&&!Object(Be["hasClass"])(t,"disabled")){var n=t.cellIndex,i=t.parentNode.rowIndex,r=4*i+n,o=this.getMonthOfCell(r);"range"===this.selectionMode?this.rangeState.selecting?(o>=this.minDate?this.$emit("pick",{minDate:this.minDate,maxDate:o}):this.$emit("pick",{minDate:o,maxDate:this.minDate}),this.rangeState.selecting=!1):(this.$emit("pick",{minDate:o,maxDate:null}),this.rangeState.selecting=!0):this.$emit("pick",r)}}},computed:{rows:function(){for(var e=this,t=this.tableRows,n=this.disabledDate,i=[],r=Yo(new Date),o=0;o<3;o++)for(var s=t[o],a=function(t){var a=s[t];a||(a={row:o,column:t,type:"normal",inRange:!1,start:!1,end:!1}),a.type="normal";var c=4*o+t,l=new Date(e.date.getFullYear(),c).getTime();a.inRange=l>=Yo(e.minDate)&&l<=Yo(e.maxDate),a.start=e.minDate&&l===Yo(e.minDate),a.end=e.maxDate&&l===Yo(e.maxDate);var u=l===r;u&&(a.type="today"),a.text=c;var d=new Date(l);a.disabled="function"===typeof n&&n(d),a.selected=Object(v["arrayFind"])(i,(function(e){return e.getTime()===d.getTime()})),e.$set(s,t,a)},c=0;c<4;c++)a(c);return t}}},Xo=Jo,Qo=a(Xo,Wo,qo,!1,null,null,null);Qo.options.__file="packages/date-picker/src/basic/month-table.vue";var Zo=Qo.exports,es=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("table",{staticClass:"el-date-table",class:{"is-week-mode":"week"===e.selectionMode},attrs:{cellspacing:"0",cellpadding:"0"},on:{click:e.handleClick,mousemove:e.handleMouseMove}},[n("tbody",[n("tr",[e.showWeekNumber?n("th",[e._v(e._s(e.t("el.datepicker.week")))]):e._e(),e._l(e.WEEKS,(function(t,i){return n("th",{key:i},[e._v(e._s(e.t("el.datepicker.weeks."+t)))])}))],2),e._l(e.rows,(function(t,i){return n("tr",{key:i,staticClass:"el-date-table__row",class:{current:e.isWeekActive(t[1])}},e._l(t,(function(t,i){return n("td",{key:i,class:e.getCellClasses(t)},[n("div",[n("span",[e._v("\n          "+e._s(t.text)+"\n        ")])])])})),0)}))],2)])},ts=[];es._withStripped=!0;var ns=["sun","mon","tue","wed","thu","fri","sat"],is=function(e){return"number"===typeof e||"string"===typeof e?Object(ro["clearTime"])(new Date(e)).getTime():e instanceof Date?Object(ro["clearTime"])(e).getTime():NaN},rs=function(e,t){var n="function"===typeof t?Object(v["arrayFindIndex"])(e,t):e.indexOf(t);return n>=0?[].concat(e.slice(0,n),e.slice(n+1)):e},os={mixins:[_.a],props:{firstDayOfWeek:{default:7,type:Number,validator:function(e){return e>=1&&e<=7}},value:{},defaultValue:{validator:function(e){return null===e||Object(ro["isDate"])(e)||Array.isArray(e)&&e.every(ro["isDate"])}},date:{},selectionMode:{default:"day"},showWeekNumber:{type:Boolean,default:!1},disabledDate:{},cellClassName:{},minDate:{},maxDate:{},rangeState:{default:function(){return{endDate:null,selecting:!1}}}},computed:{offsetDay:function(){var e=this.firstDayOfWeek;return e>3?7-e:-e},WEEKS:function(){var e=this.firstDayOfWeek;return ns.concat(ns).slice(e,e+7)},year:function(){return this.date.getFullYear()},month:function(){return this.date.getMonth()},startDate:function(){return Object(ro["getStartDateOfMonth"])(this.year,this.month)},rows:function(){var e=this,t=new Date(this.year,this.month,1),n=Object(ro["getFirstDayOfMonth"])(t),i=Object(ro["getDayCountOfMonth"])(t.getFullYear(),t.getMonth()),r=Object(ro["getDayCountOfMonth"])(t.getFullYear(),0===t.getMonth()?11:t.getMonth()-1);n=0===n?7:n;for(var o=this.offsetDay,s=this.tableRows,a=1,c=this.startDate,l=this.disabledDate,u=this.cellClassName,d="dates"===this.selectionMode?Object(v["coerceTruthyValueToArray"])(this.value):[],h=is(new Date),p=0;p<6;p++){var f=s[p];this.showWeekNumber&&(f[0]||(f[0]={type:"week",text:Object(ro["getWeekNumber"])(Object(ro["nextDate"])(c,7*p+1))}));for(var g=function(t){var s=f[e.showWeekNumber?t+1:t];s||(s={row:p,column:t,type:"normal",inRange:!1,start:!1,end:!1}),s.type="normal";var g=7*p+t,m=Object(ro["nextDate"])(c,g-o).getTime();s.inRange=m>=is(e.minDate)&&m<=is(e.maxDate),s.start=e.minDate&&m===is(e.minDate),s.end=e.maxDate&&m===is(e.maxDate);var _=m===h;if(_&&(s.type="today"),p>=0&&p<=1){var y=n+o<0?7+n+o:n+o;t+7*p>=y?s.text=a++:(s.text=r-(y-t%7)+1+7*p,s.type="prev-month")}else a<=i?s.text=a++:(s.text=a++-i,s.type="next-month");var C=new Date(m);s.disabled="function"===typeof l&&l(C),s.selected=Object(v["arrayFind"])(d,(function(e){return e.getTime()===C.getTime()})),s.customClass="function"===typeof u&&u(C),e.$set(f,e.showWeekNumber?t+1:t,s)},m=0;m<7;m++)g(m);if("week"===this.selectionMode){var _=this.showWeekNumber?1:0,y=this.showWeekNumber?7:6,C=this.isWeekActive(f[_+1]);f[_].inRange=C,f[_].start=C,f[y].inRange=C,f[y].end=C}}return s}},watch:{"rangeState.endDate":function(e){this.markRange(this.minDate,e)},minDate:function(e,t){is(e)!==is(t)&&this.markRange(this.minDate,this.maxDate)},maxDate:function(e,t){is(e)!==is(t)&&this.markRange(this.minDate,this.maxDate)}},data:function(){return{tableRows:[[],[],[],[],[],[]],lastRow:null,lastColumn:null}},methods:{cellMatchesDate:function(e,t){var n=new Date(t);return this.year===n.getFullYear()&&this.month===n.getMonth()&&Number(e.text)===n.getDate()},getCellClasses:function(e){var t=this,n=this.selectionMode,i=this.defaultValue?Array.isArray(this.defaultValue)?this.defaultValue:[this.defaultValue]:[],r=[];return"normal"!==e.type&&"today"!==e.type||e.disabled?r.push(e.type):(r.push("available"),"today"===e.type&&r.push("today")),"normal"===e.type&&i.some((function(n){return t.cellMatchesDate(e,n)}))&&r.push("default"),"day"!==n||"normal"!==e.type&&"today"!==e.type||!this.cellMatchesDate(e,this.value)||r.push("current"),!e.inRange||"normal"!==e.type&&"today"!==e.type&&"week"!==this.selectionMode||(r.push("in-range"),e.start&&r.push("start-date"),e.end&&r.push("end-date")),e.disabled&&r.push("disabled"),e.selected&&r.push("selected"),e.customClass&&r.push(e.customClass),r.join(" ")},getDateOfCell:function(e,t){var n=7*e+(t-(this.showWeekNumber?1:0))-this.offsetDay;return Object(ro["nextDate"])(this.startDate,n)},isWeekActive:function(e){if("week"!==this.selectionMode)return!1;var t=new Date(this.year,this.month,1),n=t.getFullYear(),i=t.getMonth();if("prev-month"===e.type&&(t.setMonth(0===i?11:i-1),t.setFullYear(0===i?n-1:n)),"next-month"===e.type&&(t.setMonth(11===i?0:i+1),t.setFullYear(11===i?n+1:n)),t.setDate(parseInt(e.text,10)),Object(ro["isDate"])(this.value)){var r=(this.value.getDay()-this.firstDayOfWeek+7)%7-1,o=Object(ro["prevDate"])(this.value,r);return o.getTime()===t.getTime()}return!1},markRange:function(e,t){e=is(e),t=is(t)||e;var n=[Math.min(e,t),Math.max(e,t)];e=n[0],t=n[1];for(var i=this.startDate,r=this.rows,o=0,s=r.length;o<s;o++)for(var a=r[o],c=0,l=a.length;c<l;c++)if(!this.showWeekNumber||0!==c){var u=a[c],d=7*o+c+(this.showWeekNumber?-1:0),h=Object(ro["nextDate"])(i,d-this.offsetDay).getTime();u.inRange=e&&h>=e&&h<=t,u.start=e&&h===e,u.end=t&&h===t}},handleMouseMove:function(e){if(this.rangeState.selecting){var t=e.target;if("SPAN"===t.tagName&&(t=t.parentNode.parentNode),"DIV"===t.tagName&&(t=t.parentNode),"TD"===t.tagName){var n=t.parentNode.rowIndex-1,i=t.cellIndex;this.rows[n][i].disabled||n===this.lastRow&&i===this.lastColumn||(this.lastRow=n,this.lastColumn=i,this.$emit("changerange",{minDate:this.minDate,maxDate:this.maxDate,rangeState:{selecting:!0,endDate:this.getDateOfCell(n,i)}}))}}},handleClick:function(e){var t=e.target;if("SPAN"===t.tagName&&(t=t.parentNode.parentNode),"DIV"===t.tagName&&(t=t.parentNode),"TD"===t.tagName){var n=t.parentNode.rowIndex-1,i="week"===this.selectionMode?1:t.cellIndex,r=this.rows[n][i];if(!r.disabled&&"week"!==r.type){var o=this.getDateOfCell(n,i);if("range"===this.selectionMode)this.rangeState.selecting?(o>=this.minDate?this.$emit("pick",{minDate:this.minDate,maxDate:o}):this.$emit("pick",{minDate:o,maxDate:this.minDate}),this.rangeState.selecting=!1):(this.$emit("pick",{minDate:o,maxDate:null}),this.rangeState.selecting=!0);else if("day"===this.selectionMode)this.$emit("pick",o);else if("week"===this.selectionMode){var s=Object(ro["getWeekNumber"])(o),a=o.getFullYear()+"w"+s;this.$emit("pick",{year:o.getFullYear(),week:s,value:a,date:o})}else if("dates"===this.selectionMode){var c=this.value||[],l=r.selected?rs(c,(function(e){return e.getTime()===o.getTime()})):[].concat(c,[o]);this.$emit("pick",l)}}}}}},ss=os,as=a(ss,es,ts,!1,null,null,null);as.options.__file="packages/date-picker/src/basic/date-table.vue";var cs=as.exports,ls={mixins:[_.a],directives:{Clickoutside:V.a},watch:{showTime:function(e){var t=this;e&&this.$nextTick((function(e){var n=t.$refs.input.$el;n&&(t.pickerWidth=n.getBoundingClientRect().width+10)}))},value:function(e){"dates"===this.selectionMode&&this.value||(Object(ro["isDate"])(e)?this.date=new Date(e):this.date=this.getDefaultValue())},defaultValue:function(e){Object(ro["isDate"])(this.value)||(this.date=e?new Date(e):new Date)},timePickerVisible:function(e){var t=this;e&&this.$nextTick((function(){return t.$refs.timepicker.adjustSpinners()}))},selectionMode:function(e){"month"===e?"year"===this.currentView&&"month"===this.currentView||(this.currentView="month"):"dates"===e&&(this.currentView="date")}},methods:{proxyTimePickerDataProperties:function(){var e=this,t=function(t){e.$refs.timepicker.format=t},n=function(t){e.$refs.timepicker.value=t},i=function(t){e.$refs.timepicker.date=t},r=function(t){e.$refs.timepicker.selectableRange=t};this.$watch("value",n),this.$watch("date",i),this.$watch("selectableRange",r),t(this.timeFormat),n(this.value),i(this.date),r(this.selectableRange)},handleClear:function(){this.date=this.getDefaultValue(),this.$emit("pick",null)},emit:function(e){for(var t=this,n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];if(e)if(Array.isArray(e)){var o=e.map((function(e){return t.showTime?Object(ro["clearMilliseconds"])(e):Object(ro["clearTime"])(e)}));this.$emit.apply(this,["pick",o].concat(i))}else this.$emit.apply(this,["pick",this.showTime?Object(ro["clearMilliseconds"])(e):Object(ro["clearTime"])(e)].concat(i));else this.$emit.apply(this,["pick",e].concat(i));this.userInputDate=null,this.userInputTime=null},showMonthPicker:function(){this.currentView="month"},showYearPicker:function(){this.currentView="year"},prevMonth:function(){this.date=Object(ro["prevMonth"])(this.date)},nextMonth:function(){this.date=Object(ro["nextMonth"])(this.date)},prevYear:function(){"year"===this.currentView?this.date=Object(ro["prevYear"])(this.date,10):this.date=Object(ro["prevYear"])(this.date)},nextYear:function(){"year"===this.currentView?this.date=Object(ro["nextYear"])(this.date,10):this.date=Object(ro["nextYear"])(this.date)},handleShortcutClick:function(e){e.onClick&&e.onClick(this)},handleTimePick:function(e,t,n){if(Object(ro["isDate"])(e)){var i=this.value?Object(ro["modifyTime"])(this.value,e.getHours(),e.getMinutes(),e.getSeconds()):Object(ro["modifyWithTimeString"])(this.getDefaultValue(),this.defaultTime);this.date=i,this.emit(this.date,!0)}else this.emit(e,!0);n||(this.timePickerVisible=t)},handleTimePickClose:function(){this.timePickerVisible=!1},handleMonthPick:function(e){"month"===this.selectionMode?(this.date=Object(ro["modifyDate"])(this.date,this.year,e,1),this.emit(this.date)):(this.date=Object(ro["changeYearMonthAndClampDate"])(this.date,this.year,e),this.currentView="date")},handleDatePick:function(e){if("day"===this.selectionMode){var t=this.value?Object(ro["modifyDate"])(this.value,e.getFullYear(),e.getMonth(),e.getDate()):Object(ro["modifyWithTimeString"])(e,this.defaultTime);this.checkDateWithinRange(t)||(t=Object(ro["modifyDate"])(this.selectableRange[0][0],e.getFullYear(),e.getMonth(),e.getDate())),this.date=t,this.emit(this.date,this.showTime)}else"week"===this.selectionMode?this.emit(e.date):"dates"===this.selectionMode&&this.emit(e,!0)},handleYearPick:function(e){"year"===this.selectionMode?(this.date=Object(ro["modifyDate"])(this.date,e,0,1),this.emit(this.date)):(this.date=Object(ro["changeYearMonthAndClampDate"])(this.date,e,this.month),this.currentView="month")},changeToNow:function(){this.disabledDate&&this.disabledDate(new Date)||!this.checkDateWithinRange(new Date)||(this.date=new Date,this.emit(this.date))},confirm:function(){if("dates"===this.selectionMode)this.emit(this.value);else{var e=this.value?this.value:Object(ro["modifyWithTimeString"])(this.getDefaultValue(),this.defaultTime);this.date=new Date(e),this.emit(e)}},resetView:function(){"month"===this.selectionMode?this.currentView="month":"year"===this.selectionMode?this.currentView="year":this.currentView="date"},handleEnter:function(){document.body.addEventListener("keydown",this.handleKeydown)},handleLeave:function(){this.$emit("dodestroy"),document.body.removeEventListener("keydown",this.handleKeydown)},handleKeydown:function(e){var t=e.keyCode,n=[38,40,37,39];this.visible&&!this.timePickerVisible&&(-1!==n.indexOf(t)&&(this.handleKeyControl(t),e.stopPropagation(),e.preventDefault()),13===t&&null===this.userInputDate&&null===this.userInputTime&&this.emit(this.date,!1))},handleKeyControl:function(e){var t={year:{38:-4,40:4,37:-1,39:1,offset:function(e,t){return e.setFullYear(e.getFullYear()+t)}},month:{38:-4,40:4,37:-1,39:1,offset:function(e,t){return e.setMonth(e.getMonth()+t)}},week:{38:-1,40:1,37:-1,39:1,offset:function(e,t){return e.setDate(e.getDate()+7*t)}},day:{38:-7,40:7,37:-1,39:1,offset:function(e,t){return e.setDate(e.getDate()+t)}}},n=this.selectionMode,i=31536e6,r=this.date.getTime(),o=new Date(this.date.getTime());while(Math.abs(r-o.getTime())<=i){var s=t[n];if(s.offset(o,s[e]),"function"!==typeof this.disabledDate||!this.disabledDate(o)){this.date=o,this.$emit("pick",o,!0);break}}},handleVisibleTimeChange:function(e){var t=Object(ro["parseDate"])(e,this.timeFormat);t&&this.checkDateWithinRange(t)&&(this.date=Object(ro["modifyDate"])(t,this.year,this.month,this.monthDate),this.userInputTime=null,this.$refs.timepicker.value=this.date,this.timePickerVisible=!1,this.emit(this.date,!0))},handleVisibleDateChange:function(e){var t=Object(ro["parseDate"])(e,this.dateFormat);if(t){if("function"===typeof this.disabledDate&&this.disabledDate(t))return;this.date=Object(ro["modifyTime"])(t,this.date.getHours(),this.date.getMinutes(),this.date.getSeconds()),this.userInputDate=null,this.resetView(),this.emit(this.date,!0)}},isValidValue:function(e){return e&&!isNaN(e)&&("function"!==typeof this.disabledDate||!this.disabledDate(e))&&this.checkDateWithinRange(e)},getDefaultValue:function(){return this.defaultValue?new Date(this.defaultValue):new Date},checkDateWithinRange:function(e){return!(this.selectableRange.length>0)||Object(ro["timeWithinRange"])(e,this.selectableRange,this.format||"HH:mm:ss")}},components:{TimePicker:Uo,YearTable:Ko,MonthTable:Zo,DateTable:cs,ElInput:g.a,ElButton:se.a},data:function(){return{popperClass:"",date:new Date,value:"",defaultValue:null,defaultTime:null,showTime:!1,selectionMode:"day",shortcuts:"",visible:!1,currentView:"date",disabledDate:"",cellClassName:"",selectableRange:[],firstDayOfWeek:7,showWeekNumber:!1,timePickerVisible:!1,format:"",arrowControl:!1,userInputDate:null,userInputTime:null}},computed:{year:function(){return this.date.getFullYear()},month:function(){return this.date.getMonth()},week:function(){return Object(ro["getWeekNumber"])(this.date)},monthDate:function(){return this.date.getDate()},footerVisible:function(){return this.showTime||"dates"===this.selectionMode},visibleTime:function(){return null!==this.userInputTime?this.userInputTime:Object(ro["formatDate"])(this.value||this.defaultValue,this.timeFormat)},visibleDate:function(){return null!==this.userInputDate?this.userInputDate:Object(ro["formatDate"])(this.value||this.defaultValue,this.dateFormat)},yearLabel:function(){var e=this.t("el.datepicker.year");if("year"===this.currentView){var t=10*Math.floor(this.year/10);return e?t+" "+e+" - "+(t+9)+" "+e:t+" - "+(t+9)}return this.year+" "+e},timeFormat:function(){return this.format?Object(ro["extractTimeFormat"])(this.format):"HH:mm:ss"},dateFormat:function(){return this.format?Object(ro["extractDateFormat"])(this.format):"yyyy-MM-dd"}}},us=ls,ds=a(us,So,Ro,!1,null,null,null);ds.options.__file="packages/date-picker/src/panel/date.vue";var hs=ds.exports,ps=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":function(t){e.$emit("dodestroy")}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-picker-panel el-date-range-picker el-popper",class:[{"has-sidebar":e.$slots.sidebar||e.shortcuts,"has-time":e.showTime},e.popperClass]},[n("div",{staticClass:"el-picker-panel__body-wrapper"},[e._t("sidebar"),e.shortcuts?n("div",{staticClass:"el-picker-panel__sidebar"},e._l(e.shortcuts,(function(t,i){return n("button",{key:i,staticClass:"el-picker-panel__shortcut",attrs:{type:"button"},on:{click:function(n){e.handleShortcutClick(t)}}},[e._v(e._s(t.text))])})),0):e._e(),n("div",{staticClass:"el-picker-panel__body"},[e.showTime?n("div",{staticClass:"el-date-range-picker__time-header"},[n("span",{staticClass:"el-date-range-picker__editors-wrap"},[n("span",{staticClass:"el-date-range-picker__time-picker-wrap"},[n("el-input",{ref:"minInput",staticClass:"el-date-range-picker__editor",attrs:{size:"small",disabled:e.rangeState.selecting,placeholder:e.t("el.datepicker.startDate"),value:e.minVisibleDate},on:{input:function(t){return e.handleDateInput(t,"min")},change:function(t){return e.handleDateChange(t,"min")}}})],1),n("span",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleMinTimeClose,expression:"handleMinTimeClose"}],staticClass:"el-date-range-picker__time-picker-wrap"},[n("el-input",{staticClass:"el-date-range-picker__editor",attrs:{size:"small",disabled:e.rangeState.selecting,placeholder:e.t("el.datepicker.startTime"),value:e.minVisibleTime},on:{focus:function(t){e.minTimePickerVisible=!0},input:function(t){return e.handleTimeInput(t,"min")},change:function(t){return e.handleTimeChange(t,"min")}}}),n("time-picker",{ref:"minTimePicker",attrs:{"time-arrow-control":e.arrowControl,visible:e.minTimePickerVisible},on:{pick:e.handleMinTimePick,mounted:function(t){e.$refs.minTimePicker.format=e.timeFormat}}})],1)]),n("span",{staticClass:"el-icon-arrow-right"}),n("span",{staticClass:"el-date-range-picker__editors-wrap is-right"},[n("span",{staticClass:"el-date-range-picker__time-picker-wrap"},[n("el-input",{staticClass:"el-date-range-picker__editor",attrs:{size:"small",disabled:e.rangeState.selecting,placeholder:e.t("el.datepicker.endDate"),value:e.maxVisibleDate,readonly:!e.minDate},on:{input:function(t){return e.handleDateInput(t,"max")},change:function(t){return e.handleDateChange(t,"max")}}})],1),n("span",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleMaxTimeClose,expression:"handleMaxTimeClose"}],staticClass:"el-date-range-picker__time-picker-wrap"},[n("el-input",{staticClass:"el-date-range-picker__editor",attrs:{size:"small",disabled:e.rangeState.selecting,placeholder:e.t("el.datepicker.endTime"),value:e.maxVisibleTime,readonly:!e.minDate},on:{focus:function(t){e.minDate&&(e.maxTimePickerVisible=!0)},input:function(t){return e.handleTimeInput(t,"max")},change:function(t){return e.handleTimeChange(t,"max")}}}),n("time-picker",{ref:"maxTimePicker",attrs:{"time-arrow-control":e.arrowControl,visible:e.maxTimePickerVisible},on:{pick:e.handleMaxTimePick,mounted:function(t){e.$refs.maxTimePicker.format=e.timeFormat}}})],1)])]):e._e(),n("div",{staticClass:"el-picker-panel__content el-date-range-picker__content is-left"},[n("div",{staticClass:"el-date-range-picker__header"},[n("button",{staticClass:"el-picker-panel__icon-btn el-icon-d-arrow-left",attrs:{type:"button"},on:{click:e.leftPrevYear}}),n("button",{staticClass:"el-picker-panel__icon-btn el-icon-arrow-left",attrs:{type:"button"},on:{click:e.leftPrevMonth}}),e.unlinkPanels?n("button",{staticClass:"el-picker-panel__icon-btn el-icon-d-arrow-right",class:{"is-disabled":!e.enableYearArrow},attrs:{type:"button",disabled:!e.enableYearArrow},on:{click:e.leftNextYear}}):e._e(),e.unlinkPanels?n("button",{staticClass:"el-picker-panel__icon-btn el-icon-arrow-right",class:{"is-disabled":!e.enableMonthArrow},attrs:{type:"button",disabled:!e.enableMonthArrow},on:{click:e.leftNextMonth}}):e._e(),n("div",[e._v(e._s(e.leftLabel))])]),n("date-table",{attrs:{"selection-mode":"range",date:e.leftDate,"default-value":e.defaultValue,"min-date":e.minDate,"max-date":e.maxDate,"range-state":e.rangeState,"disabled-date":e.disabledDate,"cell-class-name":e.cellClassName,"first-day-of-week":e.firstDayOfWeek},on:{changerange:e.handleChangeRange,pick:e.handleRangePick}})],1),n("div",{staticClass:"el-picker-panel__content el-date-range-picker__content is-right"},[n("div",{staticClass:"el-date-range-picker__header"},[e.unlinkPanels?n("button",{staticClass:"el-picker-panel__icon-btn el-icon-d-arrow-left",class:{"is-disabled":!e.enableYearArrow},attrs:{type:"button",disabled:!e.enableYearArrow},on:{click:e.rightPrevYear}}):e._e(),e.unlinkPanels?n("button",{staticClass:"el-picker-panel__icon-btn el-icon-arrow-left",class:{"is-disabled":!e.enableMonthArrow},attrs:{type:"button",disabled:!e.enableMonthArrow},on:{click:e.rightPrevMonth}}):e._e(),n("button",{staticClass:"el-picker-panel__icon-btn el-icon-d-arrow-right",attrs:{type:"button"},on:{click:e.rightNextYear}}),n("button",{staticClass:"el-picker-panel__icon-btn el-icon-arrow-right",attrs:{type:"button"},on:{click:e.rightNextMonth}}),n("div",[e._v(e._s(e.rightLabel))])]),n("date-table",{attrs:{"selection-mode":"range",date:e.rightDate,"default-value":e.defaultValue,"min-date":e.minDate,"max-date":e.maxDate,"range-state":e.rangeState,"disabled-date":e.disabledDate,"cell-class-name":e.cellClassName,"first-day-of-week":e.firstDayOfWeek},on:{changerange:e.handleChangeRange,pick:e.handleRangePick}})],1)])],2),e.showTime?n("div",{staticClass:"el-picker-panel__footer"},[n("el-button",{staticClass:"el-picker-panel__link-btn",attrs:{size:"mini",type:"text"},on:{click:e.handleClear}},[e._v("\n        "+e._s(e.t("el.datepicker.clear"))+"\n      ")]),n("el-button",{staticClass:"el-picker-panel__link-btn",attrs:{plain:"",size:"mini",disabled:e.btnDisabled},on:{click:function(t){e.handleConfirm(!1)}}},[e._v("\n        "+e._s(e.t("el.datepicker.confirm"))+"\n      ")])],1):e._e()])])},fs=[];ps._withStripped=!0;var gs=function(e){return Array.isArray(e)?[new Date(e[0]),new Date(e[1])]:e?[new Date(e),Object(ro["nextDate"])(new Date(e),1)]:[new Date,Object(ro["nextDate"])(new Date,1)]},ms={mixins:[_.a],directives:{Clickoutside:V.a},computed:{btnDisabled:function(){return!(this.minDate&&this.maxDate&&!this.selecting&&this.isValidValue([this.minDate,this.maxDate]))},leftLabel:function(){return this.leftDate.getFullYear()+" "+this.t("el.datepicker.year")+" "+this.t("el.datepicker.month"+(this.leftDate.getMonth()+1))},rightLabel:function(){return this.rightDate.getFullYear()+" "+this.t("el.datepicker.year")+" "+this.t("el.datepicker.month"+(this.rightDate.getMonth()+1))},leftYear:function(){return this.leftDate.getFullYear()},leftMonth:function(){return this.leftDate.getMonth()},leftMonthDate:function(){return this.leftDate.getDate()},rightYear:function(){return this.rightDate.getFullYear()},rightMonth:function(){return this.rightDate.getMonth()},rightMonthDate:function(){return this.rightDate.getDate()},minVisibleDate:function(){return null!==this.dateUserInput.min?this.dateUserInput.min:this.minDate?Object(ro["formatDate"])(this.minDate,this.dateFormat):""},maxVisibleDate:function(){return null!==this.dateUserInput.max?this.dateUserInput.max:this.maxDate||this.minDate?Object(ro["formatDate"])(this.maxDate||this.minDate,this.dateFormat):""},minVisibleTime:function(){return null!==this.timeUserInput.min?this.timeUserInput.min:this.minDate?Object(ro["formatDate"])(this.minDate,this.timeFormat):""},maxVisibleTime:function(){return null!==this.timeUserInput.max?this.timeUserInput.max:this.maxDate||this.minDate?Object(ro["formatDate"])(this.maxDate||this.minDate,this.timeFormat):""},timeFormat:function(){return this.format?Object(ro["extractTimeFormat"])(this.format):"HH:mm:ss"},dateFormat:function(){return this.format?Object(ro["extractDateFormat"])(this.format):"yyyy-MM-dd"},enableMonthArrow:function(){var e=(this.leftMonth+1)%12,t=this.leftMonth+1>=12?1:0;return this.unlinkPanels&&new Date(this.leftYear+t,e)<new Date(this.rightYear,this.rightMonth)},enableYearArrow:function(){return this.unlinkPanels&&12*this.rightYear+this.rightMonth-(12*this.leftYear+this.leftMonth+1)>=12}},data:function(){return{popperClass:"",value:[],defaultValue:null,defaultTime:null,minDate:"",maxDate:"",leftDate:new Date,rightDate:Object(ro["nextMonth"])(new Date),rangeState:{endDate:null,selecting:!1,row:null,column:null},showTime:!1,shortcuts:"",visible:"",disabledDate:"",cellClassName:"",firstDayOfWeek:7,minTimePickerVisible:!1,maxTimePickerVisible:!1,format:"",arrowControl:!1,unlinkPanels:!1,dateUserInput:{min:null,max:null},timeUserInput:{min:null,max:null}}},watch:{minDate:function(e){var t=this;this.dateUserInput.min=null,this.timeUserInput.min=null,this.$nextTick((function(){if(t.$refs.maxTimePicker&&t.maxDate&&t.maxDate<t.minDate){var e="HH:mm:ss";t.$refs.maxTimePicker.selectableRange=[[Object(ro["parseDate"])(Object(ro["formatDate"])(t.minDate,e),e),Object(ro["parseDate"])("23:59:59",e)]]}})),e&&this.$refs.minTimePicker&&(this.$refs.minTimePicker.date=e,this.$refs.minTimePicker.value=e)},maxDate:function(e){this.dateUserInput.max=null,this.timeUserInput.max=null,e&&this.$refs.maxTimePicker&&(this.$refs.maxTimePicker.date=e,this.$refs.maxTimePicker.value=e)},minTimePickerVisible:function(e){var t=this;e&&this.$nextTick((function(){t.$refs.minTimePicker.date=t.minDate,t.$refs.minTimePicker.value=t.minDate,t.$refs.minTimePicker.adjustSpinners()}))},maxTimePickerVisible:function(e){var t=this;e&&this.$nextTick((function(){t.$refs.maxTimePicker.date=t.maxDate,t.$refs.maxTimePicker.value=t.maxDate,t.$refs.maxTimePicker.adjustSpinners()}))},value:function(e){if(e){if(Array.isArray(e))if(this.minDate=Object(ro["isDate"])(e[0])?new Date(e[0]):null,this.maxDate=Object(ro["isDate"])(e[1])?new Date(e[1]):null,this.minDate)if(this.leftDate=this.minDate,this.unlinkPanels&&this.maxDate){var t=this.minDate.getFullYear(),n=this.minDate.getMonth(),i=this.maxDate.getFullYear(),r=this.maxDate.getMonth();this.rightDate=t===i&&n===r?Object(ro["nextMonth"])(this.maxDate):this.maxDate}else this.rightDate=Object(ro["nextMonth"])(this.leftDate);else this.leftDate=gs(this.defaultValue)[0],this.rightDate=Object(ro["nextMonth"])(this.leftDate)}else this.minDate=null,this.maxDate=null},defaultValue:function(e){if(!Array.isArray(this.value)){var t=gs(e),n=t[0],i=t[1];this.leftDate=n,this.rightDate=e&&e[1]&&this.unlinkPanels?i:Object(ro["nextMonth"])(this.leftDate)}}},methods:{handleClear:function(){this.minDate=null,this.maxDate=null,this.leftDate=gs(this.defaultValue)[0],this.rightDate=Object(ro["nextMonth"])(this.leftDate),this.$emit("pick",null)},handleChangeRange:function(e){this.minDate=e.minDate,this.maxDate=e.maxDate,this.rangeState=e.rangeState},handleDateInput:function(e,t){if(this.dateUserInput[t]=e,e.length===this.dateFormat.length){var n=Object(ro["parseDate"])(e,this.dateFormat);if(n){if("function"===typeof this.disabledDate&&this.disabledDate(new Date(n)))return;"min"===t?(this.minDate=Object(ro["modifyDate"])(this.minDate||new Date,n.getFullYear(),n.getMonth(),n.getDate()),this.leftDate=new Date(n),this.unlinkPanels||(this.rightDate=Object(ro["nextMonth"])(this.leftDate))):(this.maxDate=Object(ro["modifyDate"])(this.maxDate||new Date,n.getFullYear(),n.getMonth(),n.getDate()),this.rightDate=new Date(n),this.unlinkPanels||(this.leftDate=Object(ro["prevMonth"])(n)))}}},handleDateChange:function(e,t){var n=Object(ro["parseDate"])(e,this.dateFormat);n&&("min"===t?(this.minDate=Object(ro["modifyDate"])(this.minDate,n.getFullYear(),n.getMonth(),n.getDate()),this.minDate>this.maxDate&&(this.maxDate=this.minDate)):(this.maxDate=Object(ro["modifyDate"])(this.maxDate,n.getFullYear(),n.getMonth(),n.getDate()),this.maxDate<this.minDate&&(this.minDate=this.maxDate)))},handleTimeInput:function(e,t){var n=this;if(this.timeUserInput[t]=e,e.length===this.timeFormat.length){var i=Object(ro["parseDate"])(e,this.timeFormat);i&&("min"===t?(this.minDate=Object(ro["modifyTime"])(this.minDate,i.getHours(),i.getMinutes(),i.getSeconds()),this.$nextTick((function(e){return n.$refs.minTimePicker.adjustSpinners()}))):(this.maxDate=Object(ro["modifyTime"])(this.maxDate,i.getHours(),i.getMinutes(),i.getSeconds()),this.$nextTick((function(e){return n.$refs.maxTimePicker.adjustSpinners()}))))}},handleTimeChange:function(e,t){var n=Object(ro["parseDate"])(e,this.timeFormat);n&&("min"===t?(this.minDate=Object(ro["modifyTime"])(this.minDate,n.getHours(),n.getMinutes(),n.getSeconds()),this.minDate>this.maxDate&&(this.maxDate=this.minDate),this.$refs.minTimePicker.value=this.minDate,this.minTimePickerVisible=!1):(this.maxDate=Object(ro["modifyTime"])(this.maxDate,n.getHours(),n.getMinutes(),n.getSeconds()),this.maxDate<this.minDate&&(this.minDate=this.maxDate),this.$refs.maxTimePicker.value=this.minDate,this.maxTimePickerVisible=!1))},handleRangePick:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.defaultTime||[],r=Object(ro["modifyWithTimeString"])(e.minDate,i[0]),o=Object(ro["modifyWithTimeString"])(e.maxDate,i[1]);this.maxDate===o&&this.minDate===r||(this.onPick&&this.onPick(e),this.maxDate=o,this.minDate=r,setTimeout((function(){t.maxDate=o,t.minDate=r}),10),n&&!this.showTime&&this.handleConfirm())},handleShortcutClick:function(e){e.onClick&&e.onClick(this)},handleMinTimePick:function(e,t,n){this.minDate=this.minDate||new Date,e&&(this.minDate=Object(ro["modifyTime"])(this.minDate,e.getHours(),e.getMinutes(),e.getSeconds())),n||(this.minTimePickerVisible=t),(!this.maxDate||this.maxDate&&this.maxDate.getTime()<this.minDate.getTime())&&(this.maxDate=new Date(this.minDate))},handleMinTimeClose:function(){this.minTimePickerVisible=!1},handleMaxTimePick:function(e,t,n){this.maxDate&&e&&(this.maxDate=Object(ro["modifyTime"])(this.maxDate,e.getHours(),e.getMinutes(),e.getSeconds())),n||(this.maxTimePickerVisible=t),this.maxDate&&this.minDate&&this.minDate.getTime()>this.maxDate.getTime()&&(this.minDate=new Date(this.maxDate))},handleMaxTimeClose:function(){this.maxTimePickerVisible=!1},leftPrevYear:function(){this.leftDate=Object(ro["prevYear"])(this.leftDate),this.unlinkPanels||(this.rightDate=Object(ro["nextMonth"])(this.leftDate))},leftPrevMonth:function(){this.leftDate=Object(ro["prevMonth"])(this.leftDate),this.unlinkPanels||(this.rightDate=Object(ro["nextMonth"])(this.leftDate))},rightNextYear:function(){this.unlinkPanels?this.rightDate=Object(ro["nextYear"])(this.rightDate):(this.leftDate=Object(ro["nextYear"])(this.leftDate),this.rightDate=Object(ro["nextMonth"])(this.leftDate))},rightNextMonth:function(){this.unlinkPanels?this.rightDate=Object(ro["nextMonth"])(this.rightDate):(this.leftDate=Object(ro["nextMonth"])(this.leftDate),this.rightDate=Object(ro["nextMonth"])(this.leftDate))},leftNextYear:function(){this.leftDate=Object(ro["nextYear"])(this.leftDate)},leftNextMonth:function(){this.leftDate=Object(ro["nextMonth"])(this.leftDate)},rightPrevYear:function(){this.rightDate=Object(ro["prevYear"])(this.rightDate)},rightPrevMonth:function(){this.rightDate=Object(ro["prevMonth"])(this.rightDate)},handleConfirm:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isValidValue([this.minDate,this.maxDate])&&this.$emit("pick",[this.minDate,this.maxDate],e)},isValidValue:function(e){return Array.isArray(e)&&e&&e[0]&&e[1]&&Object(ro["isDate"])(e[0])&&Object(ro["isDate"])(e[1])&&e[0].getTime()<=e[1].getTime()&&("function"!==typeof this.disabledDate||!this.disabledDate(e[0])&&!this.disabledDate(e[1]))},resetView:function(){this.minDate&&null==this.maxDate&&(this.rangeState.selecting=!1),this.minDate=this.value&&Object(ro["isDate"])(this.value[0])?new Date(this.value[0]):null,this.maxDate=this.value&&Object(ro["isDate"])(this.value[0])?new Date(this.value[1]):null}},components:{TimePicker:Uo,DateTable:cs,ElInput:g.a,ElButton:se.a}},_s=ms,vs=a(_s,ps,fs,!1,null,null,null);vs.options.__file="packages/date-picker/src/panel/date-range.vue";var ys=vs.exports,Cs=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":function(t){e.$emit("dodestroy")}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-picker-panel el-date-range-picker el-popper",class:[{"has-sidebar":e.$slots.sidebar||e.shortcuts},e.popperClass]},[n("div",{staticClass:"el-picker-panel__body-wrapper"},[e._t("sidebar"),e.shortcuts?n("div",{staticClass:"el-picker-panel__sidebar"},e._l(e.shortcuts,(function(t,i){return n("button",{key:i,staticClass:"el-picker-panel__shortcut",attrs:{type:"button"},on:{click:function(n){e.handleShortcutClick(t)}}},[e._v(e._s(t.text))])})),0):e._e(),n("div",{staticClass:"el-picker-panel__body"},[n("div",{staticClass:"el-picker-panel__content el-date-range-picker__content is-left"},[n("div",{staticClass:"el-date-range-picker__header"},[n("button",{staticClass:"el-picker-panel__icon-btn el-icon-d-arrow-left",attrs:{type:"button"},on:{click:e.leftPrevYear}}),e.unlinkPanels?n("button",{staticClass:"el-picker-panel__icon-btn el-icon-d-arrow-right",class:{"is-disabled":!e.enableYearArrow},attrs:{type:"button",disabled:!e.enableYearArrow},on:{click:e.leftNextYear}}):e._e(),n("div",[e._v(e._s(e.leftLabel))])]),n("month-table",{attrs:{"selection-mode":"range",date:e.leftDate,"default-value":e.defaultValue,"min-date":e.minDate,"max-date":e.maxDate,"range-state":e.rangeState,"disabled-date":e.disabledDate},on:{changerange:e.handleChangeRange,pick:e.handleRangePick}})],1),n("div",{staticClass:"el-picker-panel__content el-date-range-picker__content is-right"},[n("div",{staticClass:"el-date-range-picker__header"},[e.unlinkPanels?n("button",{staticClass:"el-picker-panel__icon-btn el-icon-d-arrow-left",class:{"is-disabled":!e.enableYearArrow},attrs:{type:"button",disabled:!e.enableYearArrow},on:{click:e.rightPrevYear}}):e._e(),n("button",{staticClass:"el-picker-panel__icon-btn el-icon-d-arrow-right",attrs:{type:"button"},on:{click:e.rightNextYear}}),n("div",[e._v(e._s(e.rightLabel))])]),n("month-table",{attrs:{"selection-mode":"range",date:e.rightDate,"default-value":e.defaultValue,"min-date":e.minDate,"max-date":e.maxDate,"range-state":e.rangeState,"disabled-date":e.disabledDate},on:{changerange:e.handleChangeRange,pick:e.handleRangePick}})],1)])],2)])])},Es=[];Cs._withStripped=!0;var bs=function(e){return Array.isArray(e)?[new Date(e[0]),new Date(e[1])]:e?[new Date(e),Object(ro["nextMonth"])(new Date(e))]:[new Date,Object(ro["nextMonth"])(new Date)]},Ts={mixins:[_.a],directives:{Clickoutside:V.a},computed:{btnDisabled:function(){return!(this.minDate&&this.maxDate&&!this.selecting&&this.isValidValue([this.minDate,this.maxDate]))},leftLabel:function(){return this.leftDate.getFullYear()+" "+this.t("el.datepicker.year")},rightLabel:function(){return this.rightDate.getFullYear()+" "+this.t("el.datepicker.year")},leftYear:function(){return this.leftDate.getFullYear()},rightYear:function(){return this.rightDate.getFullYear()===this.leftDate.getFullYear()?this.leftDate.getFullYear()+1:this.rightDate.getFullYear()},enableYearArrow:function(){return this.unlinkPanels&&this.rightYear>this.leftYear+1}},data:function(){return{popperClass:"",value:[],defaultValue:null,defaultTime:null,minDate:"",maxDate:"",leftDate:new Date,rightDate:Object(ro["nextYear"])(new Date),rangeState:{endDate:null,selecting:!1,row:null,column:null},shortcuts:"",visible:"",disabledDate:"",format:"",arrowControl:!1,unlinkPanels:!1}},watch:{value:function(e){if(e){if(Array.isArray(e))if(this.minDate=Object(ro["isDate"])(e[0])?new Date(e[0]):null,this.maxDate=Object(ro["isDate"])(e[1])?new Date(e[1]):null,this.minDate)if(this.leftDate=this.minDate,this.unlinkPanels&&this.maxDate){var t=this.minDate.getFullYear(),n=this.maxDate.getFullYear();this.rightDate=t===n?Object(ro["nextYear"])(this.maxDate):this.maxDate}else this.rightDate=Object(ro["nextYear"])(this.leftDate);else this.leftDate=bs(this.defaultValue)[0],this.rightDate=Object(ro["nextYear"])(this.leftDate)}else this.minDate=null,this.maxDate=null},defaultValue:function(e){if(!Array.isArray(this.value)){var t=bs(e),n=t[0],i=t[1];this.leftDate=n,this.rightDate=e&&e[1]&&n.getFullYear()!==i.getFullYear()&&this.unlinkPanels?i:Object(ro["nextYear"])(this.leftDate)}}},methods:{handleClear:function(){this.minDate=null,this.maxDate=null,this.leftDate=bs(this.defaultValue)[0],this.rightDate=Object(ro["nextYear"])(this.leftDate),this.$emit("pick",null)},handleChangeRange:function(e){this.minDate=e.minDate,this.maxDate=e.maxDate,this.rangeState=e.rangeState},handleRangePick:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.defaultTime||[],r=Object(ro["modifyWithTimeString"])(e.minDate,i[0]),o=Object(ro["modifyWithTimeString"])(e.maxDate,i[1]);this.maxDate===o&&this.minDate===r||(this.onPick&&this.onPick(e),this.maxDate=o,this.minDate=r,setTimeout((function(){t.maxDate=o,t.minDate=r}),10),n&&this.handleConfirm())},handleShortcutClick:function(e){e.onClick&&e.onClick(this)},leftPrevYear:function(){this.leftDate=Object(ro["prevYear"])(this.leftDate),this.unlinkPanels||(this.rightDate=Object(ro["prevYear"])(this.rightDate))},rightNextYear:function(){this.unlinkPanels||(this.leftDate=Object(ro["nextYear"])(this.leftDate)),this.rightDate=Object(ro["nextYear"])(this.rightDate)},leftNextYear:function(){this.leftDate=Object(ro["nextYear"])(this.leftDate)},rightPrevYear:function(){this.rightDate=Object(ro["prevYear"])(this.rightDate)},handleConfirm:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isValidValue([this.minDate,this.maxDate])&&this.$emit("pick",[this.minDate,this.maxDate],e)},isValidValue:function(e){return Array.isArray(e)&&e&&e[0]&&e[1]&&Object(ro["isDate"])(e[0])&&Object(ro["isDate"])(e[1])&&e[0].getTime()<=e[1].getTime()&&("function"!==typeof this.disabledDate||!this.disabledDate(e[0])&&!this.disabledDate(e[1]))},resetView:function(){this.minDate=this.value&&Object(ro["isDate"])(this.value[0])?new Date(this.value[0]):null,this.maxDate=this.value&&Object(ro["isDate"])(this.value[0])?new Date(this.value[1]):null}},components:{MonthTable:Zo,ElInput:g.a,ElButton:se.a}},Ss=Ts,Rs=a(Ss,Cs,Es,!1,null,null,null);Rs.options.__file="packages/date-picker/src/panel/month-range.vue";var Is=Rs.exports,ws=function(e){return"daterange"===e||"datetimerange"===e?ys:"monthrange"===e?Is:hs},Os={mixins:[To],name:"ElDatePicker",props:{type:{type:String,default:"date"},timeArrowControl:Boolean},watch:{type:function(e){this.picker?(this.unmountPicker(),this.panel=ws(e),this.mountPicker()):this.panel=ws(e)}},created:function(){this.panel=ws(this.type)},install:function(e){e.component(Os.name,Os)}},ks=Os,Ms=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-zoom-in-top"},on:{"before-enter":e.handleMenuEnter,"after-leave":function(t){e.$emit("dodestroy")}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],ref:"popper",staticClass:"el-picker-panel time-select el-popper",class:e.popperClass,style:{width:e.width+"px"}},[n("el-scrollbar",{attrs:{noresize:"","wrap-class":"el-picker-panel__content"}},e._l(e.items,(function(t){return n("div",{key:t.value,staticClass:"time-select-item",class:{selected:e.value===t.value,disabled:t.disabled,default:t.value===e.defaultValue},attrs:{disabled:t.disabled},on:{click:function(n){e.handleClick(t)}}},[e._v(e._s(t.value))])})),0)],1)])},xs=[];Ms._withStripped=!0;var Ps=function(e){var t=(e||"").split(":");if(t.length>=2){var n=parseInt(t[0],10),i=parseInt(t[1],10);return{hours:n,minutes:i}}return null},As=function(e,t){var n=Ps(e),i=Ps(t),r=n.minutes+60*n.hours,o=i.minutes+60*i.hours;return r===o?0:r>o?1:-1},Ds=function(e){return(e.hours<10?"0"+e.hours:e.hours)+":"+(e.minutes<10?"0"+e.minutes:e.minutes)},Ns=function(e,t){var n=Ps(e),i=Ps(t),r={hours:n.hours,minutes:n.minutes};return r.minutes+=i.minutes,r.hours+=i.hours,r.hours+=Math.floor(r.minutes/60),r.minutes=r.minutes%60,Ds(r)},Ls={components:{ElScrollbar:W.a},watch:{value:function(e){var t=this;e&&this.$nextTick((function(){return t.scrollToOption()}))}},methods:{handleClick:function(e){e.disabled||this.$emit("pick",e.value)},handleClear:function(){this.$emit("pick",null)},scrollToOption:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".selected",t=this.$refs.popper.querySelector(".el-picker-panel__content");ni()(t,t.querySelector(e))},handleMenuEnter:function(){var e=this,t=-1!==this.items.map((function(e){return e.value})).indexOf(this.value),n=-1!==this.items.map((function(e){return e.value})).indexOf(this.defaultValue),i=(t?".selected":n&&".default")||".time-select-item:not(.disabled)";this.$nextTick((function(){return e.scrollToOption(i)}))},scrollDown:function(e){var t=this.items,n=t.length,i=t.length,r=t.map((function(e){return e.value})).indexOf(this.value);while(i--)if(r=(r+e+n)%n,!t[r].disabled)return void this.$emit("pick",t[r].value,!0)},isValidValue:function(e){return-1!==this.items.filter((function(e){return!e.disabled})).map((function(e){return e.value})).indexOf(e)},handleKeydown:function(e){var t=e.keyCode;if(38===t||40===t){var n={40:1,38:-1},i=n[t.toString()];return this.scrollDown(i),void e.stopPropagation()}}},data:function(){return{popperClass:"",start:"09:00",end:"18:00",step:"00:30",value:"",defaultValue:"",visible:!1,minTime:"",maxTime:"",width:0}},computed:{items:function(){var e=this.start,t=this.end,n=this.step,i=[];if(e&&t&&n){var r=e;while(As(r,t)<=0)i.push({value:r,disabled:As(r,this.minTime||"-1:-1")<=0||As(r,this.maxTime||"100:100")>=0}),r=Ns(r,n)}return i}}},Us=Ls,Bs=a(Us,Ms,xs,!1,null,null,null);Bs.options.__file="packages/date-picker/src/panel/time-select.vue";var Vs=Bs.exports,js={mixins:[To],name:"ElTimeSelect",componentName:"ElTimeSelect",props:{type:{type:String,default:"time-select"}},beforeCreate:function(){this.panel=Vs},install:function(e){e.component(js.name,js)}},Fs=js,$s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":function(t){e.$emit("dodestroy")}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-time-range-picker el-picker-panel el-popper",class:e.popperClass},[n("div",{staticClass:"el-time-range-picker__content"},[n("div",{staticClass:"el-time-range-picker__cell"},[n("div",{staticClass:"el-time-range-picker__header"},[e._v(e._s(e.t("el.datepicker.startTime")))]),n("div",{staticClass:"el-time-range-picker__body el-time-panel__content",class:{"has-seconds":e.showSeconds,"is-arrow":e.arrowControl}},[n("time-spinner",{ref:"minSpinner",attrs:{"show-seconds":e.showSeconds,"am-pm-mode":e.amPmMode,"arrow-control":e.arrowControl,date:e.minDate},on:{change:e.handleMinChange,"select-range":e.setMinSelectionRange}})],1)]),n("div",{staticClass:"el-time-range-picker__cell"},[n("div",{staticClass:"el-time-range-picker__header"},[e._v(e._s(e.t("el.datepicker.endTime")))]),n("div",{staticClass:"el-time-range-picker__body el-time-panel__content",class:{"has-seconds":e.showSeconds,"is-arrow":e.arrowControl}},[n("time-spinner",{ref:"maxSpinner",attrs:{"show-seconds":e.showSeconds,"am-pm-mode":e.amPmMode,"arrow-control":e.arrowControl,date:e.maxDate},on:{change:e.handleMaxChange,"select-range":e.setMaxSelectionRange}})],1)])]),n("div",{staticClass:"el-time-panel__footer"},[n("button",{staticClass:"el-time-panel__btn cancel",attrs:{type:"button"},on:{click:function(t){e.handleCancel()}}},[e._v(e._s(e.t("el.datepicker.cancel")))]),n("button",{staticClass:"el-time-panel__btn confirm",attrs:{type:"button",disabled:e.btnDisabled},on:{click:function(t){e.handleConfirm()}}},[e._v(e._s(e.t("el.datepicker.confirm")))])])])])},Hs=[];$s._withStripped=!0;var Ks=Object(ro["parseDate"])("00:00:00","HH:mm:ss"),Ws=Object(ro["parseDate"])("23:59:59","HH:mm:ss"),qs=function(e){return Object(ro["modifyDate"])(Ks,e.getFullYear(),e.getMonth(),e.getDate())},Gs=function(e){return Object(ro["modifyDate"])(Ws,e.getFullYear(),e.getMonth(),e.getDate())},zs=function(e,t){return new Date(Math.min(e.getTime()+t,Gs(e).getTime()))},Ys={mixins:[_.a],components:{TimeSpinner:Ao},computed:{showSeconds:function(){return-1!==(this.format||"").indexOf("ss")},offset:function(){return this.showSeconds?11:8},spinner:function(){return this.selectionRange[0]<this.offset?this.$refs.minSpinner:this.$refs.maxSpinner},btnDisabled:function(){return this.minDate.getTime()>this.maxDate.getTime()},amPmMode:function(){return-1!==(this.format||"").indexOf("A")?"A":-1!==(this.format||"").indexOf("a")?"a":""}},data:function(){return{popperClass:"",minDate:new Date,maxDate:new Date,value:[],oldValue:[new Date,new Date],defaultValue:null,format:"HH:mm:ss",visible:!1,selectionRange:[0,2],arrowControl:!1}},watch:{value:function(e){Array.isArray(e)?(this.minDate=new Date(e[0]),this.maxDate=new Date(e[1])):Array.isArray(this.defaultValue)?(this.minDate=new Date(this.defaultValue[0]),this.maxDate=new Date(this.defaultValue[1])):this.defaultValue?(this.minDate=new Date(this.defaultValue),this.maxDate=zs(new Date(this.defaultValue),36e5)):(this.minDate=new Date,this.maxDate=zs(new Date,36e5))},visible:function(e){var t=this;e&&(this.oldValue=this.value,this.$nextTick((function(){return t.$refs.minSpinner.emitSelectRange("hours")})))}},methods:{handleClear:function(){this.$emit("pick",null)},handleCancel:function(){this.$emit("pick",this.oldValue)},handleMinChange:function(e){this.minDate=Object(ro["clearMilliseconds"])(e),this.handleChange()},handleMaxChange:function(e){this.maxDate=Object(ro["clearMilliseconds"])(e),this.handleChange()},handleChange:function(){this.isValidValue([this.minDate,this.maxDate])&&(this.$refs.minSpinner.selectableRange=[[qs(this.minDate),this.maxDate]],this.$refs.maxSpinner.selectableRange=[[this.minDate,Gs(this.maxDate)]],this.$emit("pick",[this.minDate,this.maxDate],!0))},setMinSelectionRange:function(e,t){this.$emit("select-range",e,t,"min"),this.selectionRange=[e,t]},setMaxSelectionRange:function(e,t){this.$emit("select-range",e,t,"max"),this.selectionRange=[e+this.offset,t+this.offset]},handleConfirm:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.$refs.minSpinner.selectableRange,n=this.$refs.maxSpinner.selectableRange;this.minDate=Object(ro["limitTimeRange"])(this.minDate,t,this.format),this.maxDate=Object(ro["limitTimeRange"])(this.maxDate,n,this.format),this.$emit("pick",[this.minDate,this.maxDate],e)},adjustSpinners:function(){this.$refs.minSpinner.adjustSpinners(),this.$refs.maxSpinner.adjustSpinners()},changeSelectionRange:function(e){var t=this.showSeconds?[0,3,6,11,14,17]:[0,3,8,11],n=["hours","minutes"].concat(this.showSeconds?["seconds"]:[]),i=t.indexOf(this.selectionRange[0]),r=(i+e+t.length)%t.length,o=t.length/2;r<o?this.$refs.minSpinner.emitSelectRange(n[r]):this.$refs.maxSpinner.emitSelectRange(n[r-o])},isValidValue:function(e){return Array.isArray(e)&&Object(ro["timeWithinRange"])(this.minDate,this.$refs.minSpinner.selectableRange)&&Object(ro["timeWithinRange"])(this.maxDate,this.$refs.maxSpinner.selectableRange)},handleKeydown:function(e){var t=e.keyCode,n={38:-1,40:1,37:-1,39:1};if(37===t||39===t){var i=n[t];return this.changeSelectionRange(i),void e.preventDefault()}if(38===t||40===t){var r=n[t];return this.spinner.scrollDown(r),void e.preventDefault()}}}},Js=Ys,Xs=a(Js,$s,Hs,!1,null,null,null);Xs.options.__file="packages/date-picker/src/panel/time-range.vue";var Qs=Xs.exports,Zs={mixins:[To],name:"ElTimePicker",props:{isRange:Boolean,arrowControl:Boolean},data:function(){return{type:""}},watch:{isRange:function(e){this.picker?(this.unmountPicker(),this.type=e?"timerange":"time",this.panel=e?Qs:Uo,this.mountPicker()):(this.type=e?"timerange":"time",this.panel=e?Qs:Uo)}},created:function(){this.type=this.isRange?"timerange":"time",this.panel=this.isRange?Qs:Uo},install:function(e){e.component(Zs.name,Zs)}},ea=Zs,ta=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("transition",{attrs:{name:e.transition},on:{"after-enter":e.handleAfterEnter,"after-leave":e.handleAfterLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.disabled&&e.showPopper,expression:"!disabled && showPopper"}],ref:"popper",staticClass:"el-popover el-popper",class:[e.popperClass,e.content&&"el-popover--plain"],style:{width:e.width+"px"},attrs:{role:"tooltip",id:e.tooltipId,"aria-hidden":e.disabled||!e.showPopper?"true":"false"}},[e.title?n("div",{staticClass:"el-popover__title",domProps:{textContent:e._s(e.title)}}):e._e(),e._t("default",[e._v(e._s(e.content))])],2)]),n("span",{ref:"wrapper",staticClass:"el-popover__reference-wrapper"},[e._t("reference")],2)],1)},na=[];ta._withStripped=!0;var ia={name:"ElPopover",mixins:[H.a],props:{trigger:{type:String,default:"click",validator:function(e){return["click","focus","hover","manual"].indexOf(e)>-1}},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:200},title:String,disabled:Boolean,content:String,reference:{},popperClass:String,width:{},visibleArrow:{default:!0},arrowOffset:{type:Number,default:0},transition:{type:String,default:"fade-in-linear"},tabindex:{type:Number,default:0}},computed:{tooltipId:function(){return"el-popover-"+Object(v["generateId"])()}},watch:{showPopper:function(e){this.disabled||(e?this.$emit("show"):this.$emit("hide"))}},mounted:function(){var e=this,t=this.referenceElm=this.reference||this.$refs.reference,n=this.popper||this.$refs.popper;!t&&this.$refs.wrapper.children&&(t=this.referenceElm=this.$refs.wrapper.children[0]),t&&(Object(Be["addClass"])(t,"el-popover__reference"),t.setAttribute("aria-describedby",this.tooltipId),t.setAttribute("tabindex",this.tabindex),n.setAttribute("tabindex",0),"click"!==this.trigger&&(Object(Be["on"])(t,"focusin",(function(){e.handleFocus();var n=t.__vue__;n&&"function"===typeof n.focus&&n.focus()})),Object(Be["on"])(n,"focusin",this.handleFocus),Object(Be["on"])(t,"focusout",this.handleBlur),Object(Be["on"])(n,"focusout",this.handleBlur)),Object(Be["on"])(t,"keydown",this.handleKeydown),Object(Be["on"])(t,"click",this.handleClick)),"click"===this.trigger?(Object(Be["on"])(t,"click",this.doToggle),Object(Be["on"])(document,"click",this.handleDocumentClick)):"hover"===this.trigger?(Object(Be["on"])(t,"mouseenter",this.handleMouseEnter),Object(Be["on"])(n,"mouseenter",this.handleMouseEnter),Object(Be["on"])(t,"mouseleave",this.handleMouseLeave),Object(Be["on"])(n,"mouseleave",this.handleMouseLeave)):"focus"===this.trigger&&(this.tabindex<0&&console.warn("[Element Warn][Popover]a negative taindex means that the element cannot be focused by tab key"),t.querySelector("input, textarea")?(Object(Be["on"])(t,"focusin",this.doShow),Object(Be["on"])(t,"focusout",this.doClose)):(Object(Be["on"])(t,"mousedown",this.doShow),Object(Be["on"])(t,"mouseup",this.doClose)))},beforeDestroy:function(){this.cleanup()},deactivated:function(){this.cleanup()},methods:{doToggle:function(){this.showPopper=!this.showPopper},doShow:function(){this.showPopper=!0},doClose:function(){this.showPopper=!1},handleFocus:function(){Object(Be["addClass"])(this.referenceElm,"focusing"),"click"!==this.trigger&&"focus"!==this.trigger||(this.showPopper=!0)},handleClick:function(){Object(Be["removeClass"])(this.referenceElm,"focusing")},handleBlur:function(){Object(Be["removeClass"])(this.referenceElm,"focusing"),"click"!==this.trigger&&"focus"!==this.trigger||(this.showPopper=!1)},handleMouseEnter:function(){var e=this;clearTimeout(this._timer),this.openDelay?this._timer=setTimeout((function(){e.showPopper=!0}),this.openDelay):this.showPopper=!0},handleKeydown:function(e){27===e.keyCode&&"manual"!==this.trigger&&this.doClose()},handleMouseLeave:function(){var e=this;clearTimeout(this._timer),this.closeDelay?this._timer=setTimeout((function(){e.showPopper=!1}),this.closeDelay):this.showPopper=!1},handleDocumentClick:function(e){var t=this.reference||this.$refs.reference,n=this.popper||this.$refs.popper;!t&&this.$refs.wrapper.children&&(t=this.referenceElm=this.$refs.wrapper.children[0]),this.$el&&t&&!this.$el.contains(e.target)&&!t.contains(e.target)&&n&&!n.contains(e.target)&&(this.showPopper=!1)},handleAfterEnter:function(){this.$emit("after-enter")},handleAfterLeave:function(){this.$emit("after-leave"),this.doDestroy()},cleanup:function(){(this.openDelay||this.closeDelay)&&clearTimeout(this._timer)}},destroyed:function(){var e=this.reference;Object(Be["off"])(e,"click",this.doToggle),Object(Be["off"])(e,"mouseup",this.doClose),Object(Be["off"])(e,"mousedown",this.doShow),Object(Be["off"])(e,"focusin",this.doShow),Object(Be["off"])(e,"focusout",this.doClose),Object(Be["off"])(e,"mousedown",this.doShow),Object(Be["off"])(e,"mouseup",this.doClose),Object(Be["off"])(e,"mouseleave",this.handleMouseLeave),Object(Be["off"])(e,"mouseenter",this.handleMouseEnter),Object(Be["off"])(document,"click",this.handleDocumentClick)}},ra=ia,oa=a(ra,ta,na,!1,null,null,null);oa.options.__file="packages/popover/src/main.vue";var sa=oa.exports,aa=function(e,t,n){var i=t.expression?t.value:t.arg,r=n.context.$refs[i];r&&(Array.isArray(r)?r[0].$refs.reference=e:r.$refs.reference=e)},ca={bind:function(e,t,n){aa(e,t,n)},inserted:function(e,t,n){aa(e,t,n)}};$i.a.directive("popover",ca),sa.install=function(e){e.directive("popover",ca),e.component(sa.name,sa)},sa.directive=ca;var la=sa,ua={name:"ElTooltip",mixins:[H.a],props:{openDelay:{type:Number,default:0},disabled:Boolean,manual:Boolean,effect:{type:String,default:"dark"},arrowOffset:{type:Number,default:0},popperClass:String,content:String,visibleArrow:{default:!0},transition:{type:String,default:"el-fade-in-linear"},popperOptions:{default:function(){return{boundariesPadding:10,gpuAcceleration:!1}}},enterable:{type:Boolean,default:!0},hideAfter:{type:Number,default:0},tabindex:{type:Number,default:0}},data:function(){return{tooltipId:"el-tooltip-"+Object(v["generateId"])(),timeoutPending:null,focusing:!1}},beforeCreate:function(){var e=this;this.$isServer||(this.popperVM=new $i.a({data:{node:""},render:function(e){return this.node}}).$mount(),this.debounceClose=U()(200,(function(){return e.handleClosePopper()})))},render:function(e){var t=this;this.popperVM&&(this.popperVM.node=e("transition",{attrs:{name:this.transition},on:{afterLeave:this.doDestroy}},[e("div",{on:{mouseleave:function(){t.setExpectedState(!1),t.debounceClose()},mouseenter:function(){t.setExpectedState(!0)}},ref:"popper",attrs:{role:"tooltip",id:this.tooltipId,"aria-hidden":this.disabled||!this.showPopper?"true":"false"},directives:[{name:"show",value:!this.disabled&&this.showPopper}],class:["el-tooltip__popper","is-"+this.effect,this.popperClass]},[this.$slots.content||this.content])]));var n=this.getFirstElement();if(!n)return null;var i=n.data=n.data||{};return i.staticClass=this.addTooltipClass(i.staticClass),n},mounted:function(){var e=this;this.referenceElm=this.$el,1===this.$el.nodeType&&(this.$el.setAttribute("aria-describedby",this.tooltipId),this.$el.setAttribute("tabindex",this.tabindex),Object(Be["on"])(this.referenceElm,"mouseenter",this.show),Object(Be["on"])(this.referenceElm,"mouseleave",this.hide),Object(Be["on"])(this.referenceElm,"focus",(function(){if(e.$slots.default&&e.$slots.default.length){var t=e.$slots.default[0].componentInstance;t&&t.focus?t.focus():e.handleFocus()}else e.handleFocus()})),Object(Be["on"])(this.referenceElm,"blur",this.handleBlur),Object(Be["on"])(this.referenceElm,"click",this.removeFocusing)),this.value&&this.popperVM&&this.popperVM.$nextTick((function(){e.value&&e.updatePopper()}))},watch:{focusing:function(e){e?Object(Be["addClass"])(this.referenceElm,"focusing"):Object(Be["removeClass"])(this.referenceElm,"focusing")}},methods:{show:function(){this.setExpectedState(!0),this.handleShowPopper()},hide:function(){this.setExpectedState(!1),this.debounceClose()},handleFocus:function(){this.focusing=!0,this.show()},handleBlur:function(){this.focusing=!1,this.hide()},removeFocusing:function(){this.focusing=!1},addTooltipClass:function(e){return e?"el-tooltip "+e.replace("el-tooltip",""):"el-tooltip"},handleShowPopper:function(){var e=this;this.expectedState&&!this.manual&&(clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.showPopper=!0}),this.openDelay),this.hideAfter>0&&(this.timeoutPending=setTimeout((function(){e.showPopper=!1}),this.hideAfter)))},handleClosePopper:function(){this.enterable&&this.expectedState||this.manual||(clearTimeout(this.timeout),this.timeoutPending&&clearTimeout(this.timeoutPending),this.showPopper=!1,this.disabled&&this.doDestroy())},setExpectedState:function(e){!1===e&&clearTimeout(this.timeoutPending),this.expectedState=e},getFirstElement:function(){var e=this.$slots.default;if(!Array.isArray(e))return null;for(var t=null,n=0;n<e.length;n++)e[n]&&e[n].tag&&(t=e[n]);return t}},beforeDestroy:function(){this.popperVM&&this.popperVM.$destroy()},destroyed:function(){var e=this.referenceElm;1===e.nodeType&&(Object(Be["off"])(e,"mouseenter",this.show),Object(Be["off"])(e,"mouseleave",this.hide),Object(Be["off"])(e,"focus",this.handleFocus),Object(Be["off"])(e,"blur",this.handleBlur),Object(Be["off"])(e,"click",this.removeFocusing))},install:function(e){e.component(ua.name,ua)}},da=ua,ha=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"msgbox-fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-message-box__wrapper",attrs:{tabindex:"-1",role:"dialog","aria-modal":"true","aria-label":e.title||"dialog"},on:{click:function(t){return t.target!==t.currentTarget?null:e.handleWrapperClick(t)}}},[n("div",{staticClass:"el-message-box",class:[e.customClass,e.center&&"el-message-box--center"]},[null!==e.title?n("div",{staticClass:"el-message-box__header"},[n("div",{staticClass:"el-message-box__title"},[e.icon&&e.center?n("div",{class:["el-message-box__status",e.icon]}):e._e(),n("span",[e._v(e._s(e.title))])]),e.showClose?n("button",{staticClass:"el-message-box__headerbtn",attrs:{type:"button","aria-label":"Close"},on:{click:function(t){e.handleAction(e.distinguishCancelAndClose?"close":"cancel")},keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.handleAction(e.distinguishCancelAndClose?"close":"cancel")}}},[n("i",{staticClass:"el-message-box__close el-icon-close"})]):e._e()]):e._e(),n("div",{staticClass:"el-message-box__content"},[n("div",{staticClass:"el-message-box__container"},[e.icon&&!e.center&&""!==e.message?n("div",{class:["el-message-box__status",e.icon]}):e._e(),""!==e.message?n("div",{staticClass:"el-message-box__message"},[e._t("default",[e.dangerouslyUseHTMLString?n("p",{domProps:{innerHTML:e._s(e.message)}}):n("p",[e._v(e._s(e.message))])])],2):e._e()]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showInput,expression:"showInput"}],staticClass:"el-message-box__input"},[n("el-input",{ref:"input",attrs:{type:e.inputType,placeholder:e.inputPlaceholder},nativeOn:{keydown:function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputEnter(t)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}),n("div",{staticClass:"el-message-box__errormsg",style:{visibility:e.editorErrorMessage?"visible":"hidden"}},[e._v(e._s(e.editorErrorMessage))])],1)]),n("div",{staticClass:"el-message-box__btns"},[e.showCancelButton?n("el-button",{class:[e.cancelButtonClasses],attrs:{loading:e.cancelButtonLoading,round:e.roundButton,size:"small"},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.handleAction("cancel")}},nativeOn:{click:function(t){e.handleAction("cancel")}}},[e._v("\n          "+e._s(e.cancelButtonText||e.t("el.messagebox.cancel"))+"\n        ")]):e._e(),n("el-button",{directives:[{name:"show",rawName:"v-show",value:e.showConfirmButton,expression:"showConfirmButton"}],ref:"confirm",class:[e.confirmButtonClasses],attrs:{loading:e.confirmButtonLoading,round:e.roundButton,size:"small"},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.handleAction("confirm")}},nativeOn:{click:function(t){e.handleAction("confirm")}}},[e._v("\n          "+e._s(e.confirmButtonText||e.t("el.messagebox.confirm"))+"\n        ")])],1)])])])},pa=[];ha._withStripped=!0;var fa=n(12),ga=n.n(fa),ma=n(39),_a=n.n(ma),va=void 0,ya={success:"success",info:"info",warning:"warning",error:"error"},Ca={mixins:[S.a,_.a],props:{modal:{default:!0},lockScroll:{default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{default:!0},closeOnPressEscape:{default:!0},closeOnHashChange:{default:!0},center:{default:!1,type:Boolean},roundButton:{default:!1,type:Boolean}},components:{ElInput:g.a,ElButton:se.a},computed:{icon:function(){var e=this.type,t=this.iconClass;return t||(e&&ya[e]?"el-icon-"+ya[e]:"")},confirmButtonClasses:function(){return"el-button--primary "+this.confirmButtonClass},cancelButtonClasses:function(){return""+this.cancelButtonClass}},methods:{getSafeClose:function(){var e=this,t=this.uid;return function(){e.$nextTick((function(){t===e.uid&&e.doClose()}))}},doClose:function(){var e=this;this.visible&&(this.visible=!1,this._closing=!0,this.onClose&&this.onClose(),va.closeDialog(),this.lockScroll&&setTimeout(this.restoreBodyStyle,200),this.opened=!1,this.doAfterClose(),setTimeout((function(){e.action&&e.callback(e.action,e)})))},handleWrapperClick:function(){this.closeOnClickModal&&this.handleAction(this.distinguishCancelAndClose?"close":"cancel")},handleInputEnter:function(){if("textarea"!==this.inputType)return this.handleAction("confirm")},handleAction:function(e){("prompt"!==this.$type||"confirm"!==e||this.validate())&&(this.action=e,"function"===typeof this.beforeClose?(this.close=this.getSafeClose(),this.beforeClose(e,this,this.close)):this.doClose())},validate:function(){if("prompt"===this.$type){var e=this.inputPattern;if(e&&!e.test(this.inputValue||""))return this.editorErrorMessage=this.inputErrorMessage||Object(fa["t"])("el.messagebox.error"),Object(Be["addClass"])(this.getInputElement(),"invalid"),!1;var t=this.inputValidator;if("function"===typeof t){var n=t(this.inputValue);if(!1===n)return this.editorErrorMessage=this.inputErrorMessage||Object(fa["t"])("el.messagebox.error"),Object(Be["addClass"])(this.getInputElement(),"invalid"),!1;if("string"===typeof n)return this.editorErrorMessage=n,Object(Be["addClass"])(this.getInputElement(),"invalid"),!1}}return this.editorErrorMessage="",Object(Be["removeClass"])(this.getInputElement(),"invalid"),!0},getFirstFocus:function(){var e=this.$el.querySelector(".el-message-box__btns .el-button"),t=this.$el.querySelector(".el-message-box__btns .el-message-box__title");return e||t},getInputElement:function(){var e=this.$refs.input.$refs;return e.input||e.textarea},handleClose:function(){this.handleAction("close")}},watch:{inputValue:{immediate:!0,handler:function(e){var t=this;this.$nextTick((function(n){"prompt"===t.$type&&null!==e&&t.validate()}))}},visible:function(e){var t=this;e&&(this.uid++,"alert"!==this.$type&&"confirm"!==this.$type||this.$nextTick((function(){t.$refs.confirm.$el.focus()})),this.focusAfterClosed=document.activeElement,va=new _a.a(this.$el,this.focusAfterClosed,this.getFirstFocus())),"prompt"===this.$type&&(e?setTimeout((function(){t.$refs.input&&t.$refs.input.$el&&t.getInputElement().focus()}),500):(this.editorErrorMessage="",Object(Be["removeClass"])(this.getInputElement(),"invalid")))}},mounted:function(){var e=this;this.$nextTick((function(){e.closeOnHashChange&&window.addEventListener("hashchange",e.close)}))},beforeDestroy:function(){this.closeOnHashChange&&window.removeEventListener("hashchange",this.close),setTimeout((function(){va.closeDialog()}))},data:function(){return{uid:1,title:void 0,message:"",type:"",iconClass:"",customClass:"",showInput:!1,inputValue:null,inputPlaceholder:"",inputType:"text",inputPattern:null,inputValidator:null,inputErrorMessage:"",showConfirmButton:!0,showCancelButton:!1,action:"",confirmButtonText:"",cancelButtonText:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonClass:"",confirmButtonDisabled:!1,cancelButtonClass:"",editorErrorMessage:null,callback:null,dangerouslyUseHTMLString:!1,focusAfterClosed:null,isOnComposition:!1,distinguishCancelAndClose:!1}}},Ea=Ca,ba=a(Ea,ha,pa,!1,null,null,null);ba.options.__file="packages/message-box/src/main.vue";var Ta=ba.exports,Sa=n(22),Ra="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ia={title:null,message:"",type:"",iconClass:"",showInput:!1,showClose:!0,modalFade:!0,lockScroll:!0,closeOnClickModal:!0,closeOnPressEscape:!0,closeOnHashChange:!0,inputValue:null,inputPlaceholder:"",inputType:"text",inputPattern:null,inputValidator:null,inputErrorMessage:"",showConfirmButton:!0,showCancelButton:!1,confirmButtonPosition:"right",confirmButtonHighlight:!1,cancelButtonHighlight:!1,confirmButtonText:"",cancelButtonText:"",confirmButtonClass:"",cancelButtonClass:"",customClass:"",beforeClose:null,dangerouslyUseHTMLString:!1,center:!1,roundButton:!1,distinguishCancelAndClose:!1},wa=$i.a.extend(Ta),Oa=void 0,ka=void 0,Ma=[],xa=function(e){if(Oa){var t=Oa.callback;"function"===typeof t&&(ka.showInput?t(ka.inputValue,e):t(e)),Oa.resolve&&("confirm"===e?ka.showInput?Oa.resolve({value:ka.inputValue,action:e}):Oa.resolve(e):!Oa.reject||"cancel"!==e&&"close"!==e||Oa.reject(e))}},Pa=function(){ka=new wa({el:document.createElement("div")}),ka.callback=xa},Aa=function e(){if(ka||Pa(),ka.action="",(!ka.visible||ka.closeTimer)&&Ma.length>0){Oa=Ma.shift();var t=Oa.options;for(var n in t)t.hasOwnProperty(n)&&(ka[n]=t[n]);void 0===t.callback&&(ka.callback=xa);var i=ka.callback;ka.callback=function(t,n){i(t,n),e()},Object(Sa["isVNode"])(ka.message)?(ka.$slots.default=[ka.message],ka.message=null):delete ka.$slots.default,["modal","showClose","closeOnClickModal","closeOnPressEscape","closeOnHashChange"].forEach((function(e){void 0===ka[e]&&(ka[e]=!0)})),document.body.appendChild(ka.$el),$i.a.nextTick((function(){ka.visible=!0}))}},Da=function e(t,n){if(!$i.a.prototype.$isServer){if("string"===typeof t||Object(Sa["isVNode"])(t)?(t={message:t},"string"===typeof arguments[1]&&(t.title=arguments[1])):t.callback&&!n&&(n=t.callback),"undefined"!==typeof Promise)return new Promise((function(i,r){Ma.push({options:Rt()({},Ia,e.defaults,t),callback:n,resolve:i,reject:r}),Aa()}));Ma.push({options:Rt()({},Ia,e.defaults,t),callback:n}),Aa()}};Da.setDefaults=function(e){Da.defaults=e},Da.alert=function(e,t,n){return"object"===("undefined"===typeof t?"undefined":Ra(t))?(n=t,t=""):void 0===t&&(t=""),Da(Rt()({title:t,message:e,$type:"alert",closeOnPressEscape:!1,closeOnClickModal:!1},n))},Da.confirm=function(e,t,n){return"object"===("undefined"===typeof t?"undefined":Ra(t))?(n=t,t=""):void 0===t&&(t=""),Da(Rt()({title:t,message:e,$type:"confirm",showCancelButton:!0},n))},Da.prompt=function(e,t,n){return"object"===("undefined"===typeof t?"undefined":Ra(t))?(n=t,t=""):void 0===t&&(t=""),Da(Rt()({title:t,message:e,showCancelButton:!0,showInput:!0,$type:"prompt"},n))},Da.close=function(){ka.doClose(),ka.visible=!1,Ma=[],Oa=null};var Na=Da,La=Na,Ua=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-breadcrumb",attrs:{"aria-label":"Breadcrumb",role:"navigation"}},[e._t("default")],2)},Ba=[];Ua._withStripped=!0;var Va={name:"ElBreadcrumb",props:{separator:{type:String,default:"/"},separatorClass:{type:String,default:""}},provide:function(){return{elBreadcrumb:this}},mounted:function(){var e=this.$el.querySelectorAll(".el-breadcrumb__item");e.length&&e[e.length-1].setAttribute("aria-current","page")}},ja=Va,Fa=a(ja,Ua,Ba,!1,null,null,null);Fa.options.__file="packages/breadcrumb/src/breadcrumb.vue";var $a=Fa.exports;$a.install=function(e){e.component($a.name,$a)};var Ha=$a,Ka=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"el-breadcrumb__item"},[n("span",{ref:"link",class:["el-breadcrumb__inner",e.to?"is-link":""],attrs:{role:"link"}},[e._t("default")],2),e.separatorClass?n("i",{staticClass:"el-breadcrumb__separator",class:e.separatorClass}):n("span",{staticClass:"el-breadcrumb__separator",attrs:{role:"presentation"}},[e._v(e._s(e.separator))])])},Wa=[];Ka._withStripped=!0;var qa={name:"ElBreadcrumbItem",props:{to:{},replace:Boolean},data:function(){return{separator:"",separatorClass:""}},inject:["elBreadcrumb"],mounted:function(){var e=this;this.separator=this.elBreadcrumb.separator,this.separatorClass=this.elBreadcrumb.separatorClass;var t=this.$refs.link;t.setAttribute("role","link"),t.addEventListener("click",(function(t){var n=e.to,i=e.$router;n&&i&&(e.replace?i.replace(n):i.push(n))}))}},Ga=qa,za=a(Ga,Ka,Wa,!1,null,null,null);za.options.__file="packages/breadcrumb/src/breadcrumb-item.vue";var Ya=za.exports;Ya.install=function(e){e.component(Ya.name,Ya)};var Ja=Ya,Xa=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{staticClass:"el-form",class:[e.labelPosition?"el-form--label-"+e.labelPosition:"",{"el-form--inline":e.inline}]},[e._t("default")],2)},Qa=[];Xa._withStripped=!0;var Za={name:"ElForm",componentName:"ElForm",provide:function(){return{elForm:this}},props:{model:Object,rules:Object,labelPosition:String,labelWidth:String,labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},size:String,disabled:Boolean,validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:{type:Boolean,default:!1}},watch:{rules:function(){this.fields.forEach((function(e){e.removeValidateEvents(),e.addValidateEvents()})),this.validateOnRuleChange&&this.validate((function(){}))}},computed:{autoLabelWidth:function(){if(!this.potentialLabelWidthArr.length)return 0;var e=Math.max.apply(Math,this.potentialLabelWidthArr);return e?e+"px":""}},data:function(){return{fields:[],potentialLabelWidthArr:[]}},created:function(){var e=this;this.$on("el.form.addField",(function(t){t&&e.fields.push(t)})),this.$on("el.form.removeField",(function(t){t.prop&&e.fields.splice(e.fields.indexOf(t),1)}))},methods:{resetFields:function(){this.model?this.fields.forEach((function(e){e.resetField()})):console.warn("[Element Warn][Form]model is required for resetFields to work.")},clearValidate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.length?"string"===typeof e?this.fields.filter((function(t){return e===t.prop})):this.fields.filter((function(t){return e.indexOf(t.prop)>-1})):this.fields;t.forEach((function(e){e.clearValidate()}))},validate:function(e){var t=this;if(this.model){var n=void 0;"function"!==typeof e&&window.Promise&&(n=new window.Promise((function(t,n){e=function(e){e?t(e):n(e)}})));var i=!0,r=0;0===this.fields.length&&e&&e(!0);var o={};return this.fields.forEach((function(n){n.validate("",(function(n,s){n&&(i=!1),o=Rt()({},o,s),"function"===typeof e&&++r===t.fields.length&&e(i,o)}))})),n||void 0}console.warn("[Element Warn][Form]model is required for validate to work!")},validateField:function(e,t){e=[].concat(e);var n=this.fields.filter((function(t){return-1!==e.indexOf(t.prop)}));n.length?n.forEach((function(e){e.validate("",t)})):console.warn("[Element Warn]please pass correct props!")},getLabelWidthIndex:function(e){var t=this.potentialLabelWidthArr.indexOf(e);if(-1===t)throw new Error("[ElementForm]unpected width ",e);return t},registerLabelWidth:function(e,t){if(e&&t){var n=this.getLabelWidthIndex(t);this.potentialLabelWidthArr.splice(n,1,e)}else e&&this.potentialLabelWidthArr.push(e)},deregisterLabelWidth:function(e){var t=this.getLabelWidthIndex(e);this.potentialLabelWidthArr.splice(t,1)}}},ec=Za,tc=a(ec,Xa,Qa,!1,null,null,null);tc.options.__file="packages/form/src/form.vue";var nc=tc.exports;nc.install=function(e){e.component(nc.name,nc)};var ic=nc,rc=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-form-item",class:[{"el-form-item--feedback":e.elForm&&e.elForm.statusIcon,"is-error":"error"===e.validateState,"is-validating":"validating"===e.validateState,"is-success":"success"===e.validateState,"is-required":e.isRequired||e.required,"is-no-asterisk":e.elForm&&e.elForm.hideRequiredAsterisk},e.sizeClass?"el-form-item--"+e.sizeClass:""]},[n("label-wrap",{attrs:{"is-auto-width":e.labelStyle&&"auto"===e.labelStyle.width,"update-all":"auto"===e.form.labelWidth}},[e.label||e.$slots.label?n("label",{staticClass:"el-form-item__label",style:e.labelStyle,attrs:{for:e.labelFor}},[e._t("label",[e._v(e._s(e.label+e.form.labelSuffix))])],2):e._e()]),n("div",{staticClass:"el-form-item__content",style:e.contentStyle},[e._t("default"),n("transition",{attrs:{name:"el-zoom-in-top"}},["error"===e.validateState&&e.showMessage&&e.form.showMessage?e._t("error",[n("div",{staticClass:"el-form-item__error",class:{"el-form-item__error--inline":"boolean"===typeof e.inlineMessage?e.inlineMessage:e.elForm&&e.elForm.inlineMessage||!1}},[e._v("\n          "+e._s(e.validateMessage)+"\n        ")])],{error:e.validateMessage}):e._e()],2)],2)],1)},oc=[];rc._withStripped=!0;var sc,ac,cc=n(40),lc=n.n(cc),uc={props:{isAutoWidth:Boolean,updateAll:Boolean},inject:["elForm","elFormItem"],render:function(){var e=arguments[0],t=this.$slots.default;if(!t)return null;if(this.isAutoWidth){var n=this.elForm.autoLabelWidth,i={};if(n&&"auto"!==n){var r=parseInt(n,10)-this.computedWidth;r&&(i.marginLeft=r+"px")}return e("div",{class:"el-form-item__label-wrap",style:i},[t])}return t[0]},methods:{getLabelWidth:function(){if(this.$el&&this.$el.firstElementChild){var e=window.getComputedStyle(this.$el.firstElementChild).width;return Math.ceil(parseFloat(e))}return 0},updateLabelWidth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"update";this.$slots.default&&this.isAutoWidth&&this.$el.firstElementChild&&("update"===e?this.computedWidth=this.getLabelWidth():"remove"===e&&this.elForm.deregisterLabelWidth(this.computedWidth))}},watch:{computedWidth:function(e,t){this.updateAll&&(this.elForm.registerLabelWidth(e,t),this.elFormItem.updateComputedLabelWidth(e))}},data:function(){return{computedWidth:0}},mounted:function(){this.updateLabelWidth("update")},updated:function(){this.updateLabelWidth("update")},beforeDestroy:function(){this.updateLabelWidth("remove")}},dc=uc,hc=a(dc,sc,ac,!1,null,null,null);hc.options.__file="packages/form/src/label-wrap.vue";var pc=hc.exports,fc={name:"ElFormItem",componentName:"ElFormItem",mixins:[O.a],provide:function(){return{elFormItem:this}},inject:["elForm"],props:{label:String,labelWidth:String,prop:String,required:{type:Boolean,default:void 0},rules:[Object,Array],error:String,validateStatus:String,for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:String},components:{LabelWrap:pc},watch:{error:{immediate:!0,handler:function(e){this.validateMessage=e,this.validateState=e?"error":""}},validateStatus:function(e){this.validateState=e}},computed:{labelFor:function(){return this.for||this.prop},labelStyle:function(){var e={};if("top"===this.form.labelPosition)return e;var t=this.labelWidth||this.form.labelWidth;return t&&(e.width=t),e},contentStyle:function(){var e={},t=this.label;if("top"===this.form.labelPosition||this.form.inline)return e;if(!t&&!this.labelWidth&&this.isNested)return e;var n=this.labelWidth||this.form.labelWidth;return"auto"===n?"auto"===this.labelWidth?e.marginLeft=this.computedLabelWidth:"auto"===this.form.labelWidth&&(e.marginLeft=this.elForm.autoLabelWidth):e.marginLeft=n,e},form:function(){var e=this.$parent,t=e.$options.componentName;while("ElForm"!==t)"ElFormItem"===t&&(this.isNested=!0),e=e.$parent,t=e.$options.componentName;return e},fieldValue:function(){var e=this.form.model;if(e&&this.prop){var t=this.prop;return-1!==t.indexOf(":")&&(t=t.replace(/:/,".")),Object(v["getPropByPath"])(e,t,!0).v}},isRequired:function(){var e=this.getRules(),t=!1;return e&&e.length&&e.every((function(e){return!e.required||(t=!0,!1)})),t},_formSize:function(){return this.elForm.size},elFormItemSize:function(){return this.size||this._formSize},sizeClass:function(){return this.elFormItemSize||(this.$ELEMENT||{}).size}},data:function(){return{validateState:"",validateMessage:"",validateDisabled:!1,validator:{},isNested:!1,computedLabelWidth:""}},methods:{validate:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v["noop"];this.validateDisabled=!1;var i=this.getFilteredRule(e);if((!i||0===i.length)&&void 0===this.required)return n(),!0;this.validateState="validating";var r={};i&&i.length>0&&i.forEach((function(e){delete e.trigger})),r[this.prop]=i;var o=new lc.a(r),s={};s[this.prop]=this.fieldValue,o.validate(s,{firstFields:!0},(function(e,i){t.validateState=e?"error":"success",t.validateMessage=e?e[0].message:"",n(t.validateMessage,i),t.elForm&&t.elForm.$emit("validate",t.prop,!e,t.validateMessage||null)}))},clearValidate:function(){this.validateState="",this.validateMessage="",this.validateDisabled=!1},resetField:function(){var e=this;this.validateState="",this.validateMessage="";var t=this.form.model,n=this.fieldValue,i=this.prop;-1!==i.indexOf(":")&&(i=i.replace(/:/,"."));var r=Object(v["getPropByPath"])(t,i,!0);this.validateDisabled=!0,Array.isArray(n)?r.o[r.k]=[].concat(this.initialValue):r.o[r.k]=this.initialValue,this.$nextTick((function(){e.validateDisabled=!1})),this.broadcast("ElTimeSelect","fieldReset",this.initialValue)},getRules:function(){var e=this.form.rules,t=this.rules,n=void 0!==this.required?{required:!!this.required}:[],i=Object(v["getPropByPath"])(e,this.prop||"");return e=e?i.o[this.prop||""]||i.v:[],[].concat(t||e||[]).concat(n)},getFilteredRule:function(e){var t=this.getRules();return t.filter((function(t){return!t.trigger||""===e||(Array.isArray(t.trigger)?t.trigger.indexOf(e)>-1:t.trigger===e)})).map((function(e){return Rt()({},e)}))},onFieldBlur:function(){this.validate("blur")},onFieldChange:function(){this.validateDisabled?this.validateDisabled=!1:this.validate("change")},updateComputedLabelWidth:function(e){this.computedLabelWidth=e?e+"px":""},addValidateEvents:function(){var e=this.getRules();(e.length||void 0!==this.required)&&(this.$on("el.form.blur",this.onFieldBlur),this.$on("el.form.change",this.onFieldChange))},removeValidateEvents:function(){this.$off()}},mounted:function(){if(this.prop){this.dispatch("ElForm","el.form.addField",[this]);var e=this.fieldValue;Array.isArray(e)&&(e=[].concat(e)),Object.defineProperty(this,"initialValue",{value:e}),this.addValidateEvents()}},beforeDestroy:function(){this.dispatch("ElForm","el.form.removeField",[this])}},gc=fc,mc=a(gc,rc,oc,!1,null,null,null);mc.options.__file="packages/form/src/form-item.vue";var _c=mc.exports;_c.install=function(e){e.component(_c.name,_c)};var vc=_c,yc=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-tabs__active-bar",class:"is-"+e.rootTabs.tabPosition,style:e.barStyle})},Cc=[];yc._withStripped=!0;var Ec={name:"TabBar",props:{tabs:Array},inject:["rootTabs"],computed:{barStyle:{get:function(){var e=this,t={},n=0,i=0,r=-1!==["top","bottom"].indexOf(this.rootTabs.tabPosition)?"width":"height",o="width"===r?"x":"y",s=function(e){return e.toLowerCase().replace(/( |^)[a-z]/g,(function(e){return e.toUpperCase()}))};this.tabs.every((function(t,o){var a=Object(v["arrayFind"])(e.$parent.$refs.tabs||[],(function(e){return e.id.replace("tab-","")===t.paneName}));if(!a)return!1;if(t.active){i=a["client"+s(r)];var c=window.getComputedStyle(a);return"width"===r&&e.tabs.length>1&&(i-=parseFloat(c.paddingLeft)+parseFloat(c.paddingRight)),"width"===r&&(n+=parseFloat(c.paddingLeft)),!1}return n+=a["client"+s(r)],!0}));var a="translate"+s(o)+"("+n+"px)";return t[r]=i+"px",t.transform=a,t.msTransform=a,t.webkitTransform=a,t}}}},bc=Ec,Tc=a(bc,yc,Cc,!1,null,null,null);Tc.options.__file="packages/tabs/src/tab-bar.vue";var Sc=Tc.exports;function Rc(){}var Ic,wc,Oc=function(e){return e.toLowerCase().replace(/( |^)[a-z]/g,(function(e){return e.toUpperCase()}))},kc={name:"TabNav",components:{TabBar:Sc},inject:["rootTabs"],props:{panes:Array,currentName:String,editable:Boolean,onTabClick:{type:Function,default:Rc},onTabRemove:{type:Function,default:Rc},type:String,stretch:Boolean},data:function(){return{scrollable:!1,navOffset:0,isFocus:!1,focusable:!0}},computed:{navStyle:function(){var e=-1!==["top","bottom"].indexOf(this.rootTabs.tabPosition)?"X":"Y";return{transform:"translate"+e+"(-"+this.navOffset+"px)"}},sizeName:function(){return-1!==["top","bottom"].indexOf(this.rootTabs.tabPosition)?"width":"height"}},methods:{scrollPrev:function(){var e=this.$refs.navScroll["offset"+Oc(this.sizeName)],t=this.navOffset;if(t){var n=t>e?t-e:0;this.navOffset=n}},scrollNext:function(){var e=this.$refs.nav["offset"+Oc(this.sizeName)],t=this.$refs.navScroll["offset"+Oc(this.sizeName)],n=this.navOffset;if(!(e-n<=t)){var i=e-n>2*t?n+t:e-t;this.navOffset=i}},scrollToActiveTab:function(){if(this.scrollable){var e=this.$refs.nav,t=this.$el.querySelector(".is-active");if(t){var n=this.$refs.navScroll,i=-1!==["top","bottom"].indexOf(this.rootTabs.tabPosition),r=t.getBoundingClientRect(),o=n.getBoundingClientRect(),s=i?e.offsetWidth-o.width:e.offsetHeight-o.height,a=this.navOffset,c=a;i?(r.left<o.left&&(c=a-(o.left-r.left)),r.right>o.right&&(c=a+r.right-o.right)):(r.top<o.top&&(c=a-(o.top-r.top)),r.bottom>o.bottom&&(c=a+(r.bottom-o.bottom))),c=Math.max(c,0),this.navOffset=Math.min(c,s)}}},update:function(){if(this.$refs.nav){var e=this.sizeName,t=this.$refs.nav["offset"+Oc(e)],n=this.$refs.navScroll["offset"+Oc(e)],i=this.navOffset;if(n<t){var r=this.navOffset;this.scrollable=this.scrollable||{},this.scrollable.prev=r,this.scrollable.next=r+n<t,t-r<n&&(this.navOffset=t-n)}else this.scrollable=!1,i>0&&(this.navOffset=0)}},changeTab:function(e){var t=e.keyCode,n=void 0,i=void 0,r=void 0;-1!==[37,38,39,40].indexOf(t)&&(r=e.currentTarget.querySelectorAll("[role=tab]"),i=Array.prototype.indexOf.call(r,e.target),n=37===t||38===t?0===i?r.length-1:i-1:i<r.length-1?i+1:0,r[n].focus(),r[n].click(),this.setFocus())},setFocus:function(){this.focusable&&(this.isFocus=!0)},removeFocus:function(){this.isFocus=!1},visibilityChangeHandler:function(){var e=this,t=document.visibilityState;"hidden"===t?this.focusable=!1:"visible"===t&&setTimeout((function(){e.focusable=!0}),50)},windowBlurHandler:function(){this.focusable=!1},windowFocusHandler:function(){var e=this;setTimeout((function(){e.focusable=!0}),50)}},updated:function(){this.update()},render:function(e){var t=this,n=this.type,i=this.panes,r=this.editable,o=this.stretch,s=this.onTabClick,a=this.onTabRemove,c=this.navStyle,l=this.scrollable,u=this.scrollNext,d=this.scrollPrev,h=this.changeTab,p=this.setFocus,f=this.removeFocus,g=l?[e("span",{class:["el-tabs__nav-prev",l.prev?"":"is-disabled"],on:{click:d}},[e("i",{class:"el-icon-arrow-left"})]),e("span",{class:["el-tabs__nav-next",l.next?"":"is-disabled"],on:{click:u}},[e("i",{class:"el-icon-arrow-right"})])]:null,m=this._l(i,(function(n,i){var o,c=n.name||n.index||i,l=n.isClosable||r;n.index=""+i;var u=l?e("span",{class:"el-icon-close",on:{click:function(e){a(n,e)}}}):null,d=n.$slots.label||n.label,h=n.active?0:-1;return e("div",{class:(o={"el-tabs__item":!0},o["is-"+t.rootTabs.tabPosition]=!0,o["is-active"]=n.active,o["is-disabled"]=n.disabled,o["is-closable"]=l,o["is-focus"]=t.isFocus,o),attrs:{id:"tab-"+c,"aria-controls":"pane-"+c,role:"tab","aria-selected":n.active,tabindex:h},key:"tab-"+c,ref:"tabs",refInFor:!0,on:{focus:function(){p()},blur:function(){f()},click:function(e){f(),s(n,c,e)},keydown:function(e){!l||46!==e.keyCode&&8!==e.keyCode||a(n,e)}}},[d,u])}));return e("div",{class:["el-tabs__nav-wrap",l?"is-scrollable":"","is-"+this.rootTabs.tabPosition]},[g,e("div",{class:["el-tabs__nav-scroll"],ref:"navScroll"},[e("div",{class:["el-tabs__nav","is-"+this.rootTabs.tabPosition,o&&-1!==["top","bottom"].indexOf(this.rootTabs.tabPosition)?"is-stretch":""],ref:"nav",style:c,attrs:{role:"tablist"},on:{keydown:h}},[n?null:e("tab-bar",{attrs:{tabs:i}}),m])])])},mounted:function(){var e=this;Object(ei["addResizeListener"])(this.$el,this.update),document.addEventListener("visibilitychange",this.visibilityChangeHandler),window.addEventListener("blur",this.windowBlurHandler),window.addEventListener("focus",this.windowFocusHandler),setTimeout((function(){e.scrollToActiveTab()}),0)},beforeDestroy:function(){this.$el&&this.update&&Object(ei["removeResizeListener"])(this.$el,this.update),document.removeEventListener("visibilitychange",this.visibilityChangeHandler),window.removeEventListener("blur",this.windowBlurHandler),window.removeEventListener("focus",this.windowFocusHandler)}},Mc=kc,xc=a(Mc,Ic,wc,!1,null,null,null);xc.options.__file="packages/tabs/src/tab-nav.vue";var Pc,Ac,Dc=xc.exports,Nc={name:"ElTabs",components:{TabNav:Dc},props:{type:String,activeName:String,closable:Boolean,addable:Boolean,value:{},editable:Boolean,tabPosition:{type:String,default:"top"},beforeLeave:Function,stretch:Boolean},provide:function(){return{rootTabs:this}},data:function(){return{currentName:this.value||this.activeName,panes:[]}},watch:{activeName:function(e){this.setCurrentName(e)},value:function(e){this.setCurrentName(e)},currentName:function(e){var t=this;this.$refs.nav&&this.$nextTick((function(){t.$refs.nav.$nextTick((function(e){t.$refs.nav.scrollToActiveTab()}))}))}},methods:{calcPaneInstances:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.$slots.default){var n=this.$slots.default.filter((function(e){return e.tag&&e.componentOptions&&"ElTabPane"===e.componentOptions.Ctor.options.name})),i=n.map((function(e){var t=e.componentInstance;return t})),r=!(i.length===this.panes.length&&i.every((function(t,n){return t===e.panes[n]})));(t||r)&&(this.panes=i)}else 0!==this.panes.length&&(this.panes=[])},handleTabClick:function(e,t,n){e.disabled||(this.setCurrentName(t),this.$emit("tab-click",e,n))},handleTabRemove:function(e,t){e.disabled||(t.stopPropagation(),this.$emit("edit",e.name,"remove"),this.$emit("tab-remove",e.name))},handleTabAdd:function(){this.$emit("edit",null,"add"),this.$emit("tab-add")},setCurrentName:function(e){var t=this,n=function(){t.currentName=e,t.$emit("input",e)};if(this.currentName!==e&&this.beforeLeave){var i=this.beforeLeave(e,this.currentName);i&&i.then?i.then((function(){n(),t.$refs.nav&&t.$refs.nav.removeFocus()}),(function(){})):!1!==i&&n()}else n()}},render:function(e){var t,n=this.type,i=this.handleTabClick,r=this.handleTabRemove,o=this.handleTabAdd,s=this.currentName,a=this.panes,c=this.editable,l=this.addable,u=this.tabPosition,d=this.stretch,h=c||l?e("span",{class:"el-tabs__new-tab",on:{click:o,keydown:function(e){13===e.keyCode&&o()}},attrs:{tabindex:"0"}},[e("i",{class:"el-icon-plus"})]):null,p={props:{currentName:s,onTabClick:i,onTabRemove:r,editable:c,type:n,panes:a,stretch:d},ref:"nav"},f=e("div",{class:["el-tabs__header","is-"+u]},[h,e("tab-nav",p)]),g=e("div",{class:"el-tabs__content"},[this.$slots.default]);return e("div",{class:(t={"el-tabs":!0,"el-tabs--card":"card"===n},t["el-tabs--"+u]=!0,t["el-tabs--border-card"]="border-card"===n,t)},["bottom"!==u?[f,g]:[g,f]])},created:function(){this.currentName||this.setCurrentName("0"),this.$on("tab-nav-update",this.calcPaneInstances.bind(null,!0))},mounted:function(){this.calcPaneInstances()},updated:function(){this.calcPaneInstances()}},Lc=Nc,Uc=a(Lc,Pc,Ac,!1,null,null,null);Uc.options.__file="packages/tabs/src/tabs.vue";var Bc=Uc.exports;Bc.install=function(e){e.component(Bc.name,Bc)};var Vc=Bc,jc=function(){var e=this,t=e.$createElement,n=e._self._c||t;return!e.lazy||e.loaded||e.active?n("div",{directives:[{name:"show",rawName:"v-show",value:e.active,expression:"active"}],staticClass:"el-tab-pane",attrs:{role:"tabpanel","aria-hidden":!e.active,id:"pane-"+e.paneName,"aria-labelledby":"tab-"+e.paneName}},[e._t("default")],2):e._e()},Fc=[];jc._withStripped=!0;var $c={name:"ElTabPane",componentName:"ElTabPane",props:{label:String,labelContent:Function,name:String,closable:Boolean,disabled:Boolean,lazy:Boolean},data:function(){return{index:null,loaded:!1}},computed:{isClosable:function(){return this.closable||this.$parent.closable},active:function(){var e=this.$parent.currentName===(this.name||this.index);return e&&(this.loaded=!0),e},paneName:function(){return this.name||this.index}},updated:function(){this.$parent.$emit("tab-nav-update")}},Hc=$c,Kc=a(Hc,jc,Fc,!1,null,null,null);Kc.options.__file="packages/tabs/src/tab-pane.vue";var Wc=Kc.exports;Wc.install=function(e){e.component(Wc.name,Wc)};var qc,Gc,zc=Wc,Yc={name:"ElTag",props:{text:String,closable:Boolean,type:String,hit:Boolean,disableTransitions:Boolean,color:String,size:String,effect:{type:String,default:"light",validator:function(e){return-1!==["dark","light","plain"].indexOf(e)}}},methods:{handleClose:function(e){e.stopPropagation(),this.$emit("close",e)},handleClick:function(e){this.$emit("click",e)}},computed:{tagSize:function(){return this.size||(this.$ELEMENT||{}).size}},render:function(e){var t=this.type,n=this.tagSize,i=this.hit,r=this.effect,o=["el-tag",t?"el-tag--"+t:"",n?"el-tag--"+n:"",r?"el-tag--"+r:"",i&&"is-hit"],s=e("span",{class:o,style:{backgroundColor:this.color},on:{click:this.handleClick}},[this.$slots.default,this.closable&&e("i",{class:"el-tag__close el-icon-close",on:{click:this.handleClose}})]);return this.disableTransitions?s:e("transition",{attrs:{name:"el-zoom-in-center"}},[s])}},Jc=Yc,Xc=a(Jc,qc,Gc,!1,null,null,null);Xc.options.__file="packages/tag/src/tag.vue";var Qc=Xc.exports;Qc.install=function(e){e.component(Qc.name,Qc)};var Zc=Qc,el=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-tree",class:{"el-tree--highlight-current":e.highlightCurrent,"is-dragging":!!e.dragState.draggingNode,"is-drop-not-allow":!e.dragState.allowDrop,"is-drop-inner":"inner"===e.dragState.dropType},attrs:{role:"tree"}},[e._l(e.root.childNodes,(function(t){return n("el-tree-node",{key:e.getNodeKey(t),attrs:{node:t,props:e.props,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,"render-content":e.renderContent},on:{"node-expand":e.handleNodeExpand}})})),e.isEmpty?n("div",{staticClass:"el-tree__empty-block"},[n("span",{staticClass:"el-tree__empty-text"},[e._v(e._s(e.emptyText))])]):e._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:e.dragState.showDropIndicator,expression:"dragState.showDropIndicator"}],ref:"dropIndicator",staticClass:"el-tree__drop-indicator"})],2)},tl=[];el._withStripped=!0;var nl="$treeNodeId",il=function(e,t){t&&!t[nl]&&Object.defineProperty(t,nl,{value:e.id,enumerable:!1,configurable:!1,writable:!1})},rl=function(e,t){return e?t[e]:t[nl]},ol=function(e,t){var n=e;while(n&&"BODY"!==n.tagName){if(n.__vue__&&n.__vue__.$options.name===t)return n.__vue__;n=n.parentNode}return null},sl=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function al(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var cl=function(e){for(var t=!0,n=!0,i=!0,r=0,o=e.length;r<o;r++){var s=e[r];(!0!==s.checked||s.indeterminate)&&(t=!1,s.disabled||(i=!1)),(!1!==s.checked||s.indeterminate)&&(n=!1)}return{all:t,none:n,allWithoutDisable:i,half:!t&&!n}},ll=function e(t){if(0!==t.childNodes.length){var n=cl(t.childNodes),i=n.all,r=n.none,o=n.half;i?(t.checked=!0,t.indeterminate=!1):o?(t.checked=!1,t.indeterminate=!0):r&&(t.checked=!1,t.indeterminate=!1);var s=t.parent;s&&0!==s.level&&(t.store.checkStrictly||e(s))}},ul=function(e,t){var n=e.store.props,i=e.data||{},r=n[t];if("function"===typeof r)return r(i,e);if("string"===typeof r)return i[r];if("undefined"===typeof r){var o=i[t];return void 0===o?"":o}},dl=0,hl=function(){function e(t){for(var n in al(this,e),this.id=dl++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,t)t.hasOwnProperty(n)&&(this[n]=t[n]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1);var i=this.store;if(!i)throw new Error("[Node]store is required!");i.registerNode(this);var r=i.props;if(r&&"undefined"!==typeof r.isLeaf){var o=ul(this,"isLeaf");"boolean"===typeof o&&(this.isLeafByUser=o)}if(!0!==i.lazy&&this.data?(this.setData(this.data),i.defaultExpandAll&&(this.expanded=!0)):this.level>0&&i.lazy&&i.defaultExpandAll&&this.expand(),Array.isArray(this.data)||il(this,this.data),this.data){var s=i.defaultExpandedKeys,a=i.key;a&&s&&-1!==s.indexOf(this.key)&&this.expand(null,i.autoExpandParent),a&&void 0!==i.currentNodeKey&&this.key===i.currentNodeKey&&(i.currentNode=this,i.currentNode.isCurrent=!0),i.lazy&&i._initDefaultCheckedNode(this),this.updateLeafState()}}return e.prototype.setData=function(e){Array.isArray(e)||il(this,e),this.data=e,this.childNodes=[];var t=void 0;t=0===this.level&&this.data instanceof Array?this.data:ul(this,"children")||[];for(var n=0,i=t.length;n<i;n++)this.insertChild({data:t[n]})},e.prototype.contains=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=function n(i){for(var r=i.childNodes||[],o=!1,s=0,a=r.length;s<a;s++){var c=r[s];if(c===e||t&&n(c)){o=!0;break}}return o};return n(this)},e.prototype.remove=function(){var e=this.parent;e&&e.removeChild(this)},e.prototype.insertChild=function(t,n,i){if(!t)throw new Error("insertChild error: child is required.");if(!(t instanceof e)){if(!i){var r=this.getChildren(!0)||[];-1===r.indexOf(t.data)&&("undefined"===typeof n||n<0?r.push(t.data):r.splice(n,0,t.data))}Rt()(t,{parent:this,store:this.store}),t=new e(t)}t.level=this.level+1,"undefined"===typeof n||n<0?this.childNodes.push(t):this.childNodes.splice(n,0,t),this.updateLeafState()},e.prototype.insertBefore=function(e,t){var n=void 0;t&&(n=this.childNodes.indexOf(t)),this.insertChild(e,n)},e.prototype.insertAfter=function(e,t){var n=void 0;t&&(n=this.childNodes.indexOf(t),-1!==n&&(n+=1)),this.insertChild(e,n)},e.prototype.removeChild=function(e){var t=this.getChildren()||[],n=t.indexOf(e.data);n>-1&&t.splice(n,1);var i=this.childNodes.indexOf(e);i>-1&&(this.store&&this.store.deregisterNode(e),e.parent=null,this.childNodes.splice(i,1)),this.updateLeafState()},e.prototype.removeChildByData=function(e){for(var t=null,n=0;n<this.childNodes.length;n++)if(this.childNodes[n].data===e){t=this.childNodes[n];break}t&&this.removeChild(t)},e.prototype.expand=function(e,t){var n=this,i=function(){if(t){var i=n.parent;while(i.level>0)i.expanded=!0,i=i.parent}n.expanded=!0,e&&e()};this.shouldLoadData()?this.loadData((function(e){e instanceof Array&&(n.checked?n.setChecked(!0,!0):n.store.checkStrictly||ll(n),i())})):i()},e.prototype.doCreateChildren=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.forEach((function(e){t.insertChild(Rt()({data:e},n),void 0,!0)}))},e.prototype.collapse=function(){this.expanded=!1},e.prototype.shouldLoadData=function(){return!0===this.store.lazy&&this.store.load&&!this.loaded},e.prototype.updateLeafState=function(){if(!0!==this.store.lazy||!0===this.loaded||"undefined"===typeof this.isLeafByUser){var e=this.childNodes;!this.store.lazy||!0===this.store.lazy&&!0===this.loaded?this.isLeaf=!e||0===e.length:this.isLeaf=!1}else this.isLeaf=this.isLeafByUser},e.prototype.setChecked=function(e,t,n,i){var r=this;if(this.indeterminate="half"===e,this.checked=!0===e,!this.store.checkStrictly){if(!this.shouldLoadData()||this.store.checkDescendants){var o=cl(this.childNodes),s=o.all,a=o.allWithoutDisable;this.isLeaf||s||!a||(this.checked=!1,e=!1);var c=function(){if(t){for(var n=r.childNodes,o=0,s=n.length;o<s;o++){var a=n[o];i=i||!1!==e;var c=a.disabled?a.checked:i;a.setChecked(c,t,!0,i)}var l=cl(n),u=l.half,d=l.all;d||(r.checked=d,r.indeterminate=u)}};if(this.shouldLoadData())return void this.loadData((function(){c(),ll(r)}),{checked:!1!==e});c()}var l=this.parent;l&&0!==l.level&&(n||ll(l))}},e.prototype.getChildren=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(0===this.level)return this.data;var t=this.data;if(!t)return null;var n=this.store.props,i="children";return n&&(i=n.children||"children"),void 0===t[i]&&(t[i]=null),e&&!t[i]&&(t[i]=[]),t[i]},e.prototype.updateChildren=function(){var e=this,t=this.getChildren()||[],n=this.childNodes.map((function(e){return e.data})),i={},r=[];t.forEach((function(e,t){var o=e[nl],s=!!o&&Object(v["arrayFindIndex"])(n,(function(e){return e[nl]===o}))>=0;s?i[o]={index:t,data:e}:r.push({index:t,data:e})})),this.store.lazy||n.forEach((function(t){i[t[nl]]||e.removeChildByData(t)})),r.forEach((function(t){var n=t.index,i=t.data;e.insertChild({data:i},n)})),this.updateLeafState()},e.prototype.loadData=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!0!==this.store.lazy||!this.store.load||this.loaded||this.loading&&!Object.keys(n).length)e&&e.call(this);else{this.loading=!0;var i=function(i){t.loaded=!0,t.loading=!1,t.childNodes=[],t.doCreateChildren(i,n),t.updateLeafState(),e&&e.call(t,i)};this.store.load(this,i)}},sl(e,[{key:"label",get:function(){return ul(this,"label")}},{key:"key",get:function(){var e=this.store.key;return this.data?this.data[e]:null}},{key:"disabled",get:function(){return ul(this,"disabled")}},{key:"nextSibling",get:function(){var e=this.parent;if(e){var t=e.childNodes.indexOf(this);if(t>-1)return e.childNodes[t+1]}return null}},{key:"previousSibling",get:function(){var e=this.parent;if(e){var t=e.childNodes.indexOf(this);if(t>-1)return t>0?e.childNodes[t-1]:null}return null}}]),e}(),pl=hl,fl="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function gl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var ml=function(){function e(t){var n=this;for(var i in gl(this,e),this.currentNode=null,this.currentNodeKey=null,t)t.hasOwnProperty(i)&&(this[i]=t[i]);if(this.nodesMap={},this.root=new pl({data:this.data,store:this}),this.lazy&&this.load){var r=this.load;r(this.root,(function(e){n.root.doCreateChildren(e),n._initDefaultCheckedNodes()}))}else this._initDefaultCheckedNodes()}return e.prototype.filter=function(e){var t=this.filterNodeMethod,n=this.lazy,i=function i(r){var o=r.root?r.root.childNodes:r.childNodes;if(o.forEach((function(n){n.visible=t.call(n,e,n.data,n),i(n)})),!r.visible&&o.length){var s=!0;s=!o.some((function(e){return e.visible})),r.root?r.root.visible=!1===s:r.visible=!1===s}e&&(!r.visible||r.isLeaf||n||r.expand())};i(this)},e.prototype.setData=function(e){var t=e!==this.root.data;t?(this.root.setData(e),this._initDefaultCheckedNodes()):this.root.updateChildren()},e.prototype.getNode=function(e){if(e instanceof pl)return e;var t="object"!==("undefined"===typeof e?"undefined":fl(e))?e:rl(this.key,e);return this.nodesMap[t]||null},e.prototype.insertBefore=function(e,t){var n=this.getNode(t);n.parent.insertBefore({data:e},n)},e.prototype.insertAfter=function(e,t){var n=this.getNode(t);n.parent.insertAfter({data:e},n)},e.prototype.remove=function(e){var t=this.getNode(e);t&&t.parent&&(t===this.currentNode&&(this.currentNode=null),t.parent.removeChild(t))},e.prototype.append=function(e,t){var n=t?this.getNode(t):this.root;n&&n.insertChild({data:e})},e.prototype._initDefaultCheckedNodes=function(){var e=this,t=this.defaultCheckedKeys||[],n=this.nodesMap;t.forEach((function(t){var i=n[t];i&&i.setChecked(!0,!e.checkStrictly)}))},e.prototype._initDefaultCheckedNode=function(e){var t=this.defaultCheckedKeys||[];-1!==t.indexOf(e.key)&&e.setChecked(!0,!this.checkStrictly)},e.prototype.setDefaultCheckedKey=function(e){e!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=e,this._initDefaultCheckedNodes())},e.prototype.registerNode=function(e){var t=this.key;if(t&&e&&e.data){var n=e.key;void 0!==n&&(this.nodesMap[e.key]=e)}},e.prototype.deregisterNode=function(e){var t=this,n=this.key;n&&e&&e.data&&(e.childNodes.forEach((function(e){t.deregisterNode(e)})),delete this.nodesMap[e.key])},e.prototype.getCheckedNodes=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],i=function i(r){var o=r.root?r.root.childNodes:r.childNodes;o.forEach((function(r){(r.checked||t&&r.indeterminate)&&(!e||e&&r.isLeaf)&&n.push(r.data),i(r)}))};return i(this),n},e.prototype.getCheckedKeys=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.getCheckedNodes(t).map((function(t){return(t||{})[e.key]}))},e.prototype.getHalfCheckedNodes=function(){var e=[],t=function t(n){var i=n.root?n.root.childNodes:n.childNodes;i.forEach((function(n){n.indeterminate&&e.push(n.data),t(n)}))};return t(this),e},e.prototype.getHalfCheckedKeys=function(){var e=this;return this.getHalfCheckedNodes().map((function(t){return(t||{})[e.key]}))},e.prototype._getAllNodes=function(){var e=[],t=this.nodesMap;for(var n in t)t.hasOwnProperty(n)&&e.push(t[n]);return e},e.prototype.updateChildren=function(e,t){var n=this.nodesMap[e];if(n){for(var i=n.childNodes,r=i.length-1;r>=0;r--){var o=i[r];this.remove(o.data)}for(var s=0,a=t.length;s<a;s++){var c=t[s];this.append(c,n.data)}}},e.prototype._setCheckedKeys=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments[2],i=this._getAllNodes().sort((function(e,t){return t.level-e.level})),r=Object.create(null),o=Object.keys(n);i.forEach((function(e){return e.setChecked(!1,!1)}));for(var s=0,a=i.length;s<a;s++){var c=i[s],l=c.data[e].toString(),u=o.indexOf(l)>-1;if(u){var d=c.parent;while(d&&d.level>0)r[d.data[e]]=!0,d=d.parent;c.isLeaf||this.checkStrictly?c.setChecked(!0,!1):(c.setChecked(!0,!0),t&&function(){c.setChecked(!1,!1);var e=function e(t){var n=t.childNodes;n.forEach((function(t){t.isLeaf||t.setChecked(!1,!1),e(t)}))};e(c)}())}else c.checked&&!r[l]&&c.setChecked(!1,!1)}},e.prototype.setCheckedNodes=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.key,i={};e.forEach((function(e){i[(e||{})[n]]=!0})),this._setCheckedKeys(n,t,i)},e.prototype.setCheckedKeys=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.defaultCheckedKeys=e;var n=this.key,i={};e.forEach((function(e){i[e]=!0})),this._setCheckedKeys(n,t,i)},e.prototype.setDefaultExpandedKeys=function(e){var t=this;e=e||[],this.defaultExpandedKeys=e,e.forEach((function(e){var n=t.getNode(e);n&&n.expand(null,t.autoExpandParent)}))},e.prototype.setChecked=function(e,t,n){var i=this.getNode(e);i&&i.setChecked(!!t,n)},e.prototype.getCurrentNode=function(){return this.currentNode},e.prototype.setCurrentNode=function(e){var t=this.currentNode;t&&(t.isCurrent=!1),this.currentNode=e,this.currentNode.isCurrent=!0},e.prototype.setUserCurrentNode=function(e){var t=e[this.key],n=this.nodesMap[t];this.setCurrentNode(n)},e.prototype.setCurrentNodeKey=function(e){if(null===e||void 0===e)return this.currentNode&&(this.currentNode.isCurrent=!1),void(this.currentNode=null);var t=this.getNode(e);t&&this.setCurrentNode(t)},e}(),_l=ml,vl=function(){var e=this,t=this,n=t.$createElement,i=t._self._c||n;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.node.visible,expression:"node.visible"}],ref:"node",staticClass:"el-tree-node",class:{"is-expanded":t.expanded,"is-current":t.node.isCurrent,"is-hidden":!t.node.visible,"is-focusable":!t.node.disabled,"is-checked":!t.node.disabled&&t.node.checked},attrs:{role:"treeitem",tabindex:"-1","aria-expanded":t.expanded,"aria-disabled":t.node.disabled,"aria-checked":t.node.checked,draggable:t.tree.draggable},on:{click:function(e){return e.stopPropagation(),t.handleClick(e)},contextmenu:function(t){return e.handleContextMenu(t)},dragstart:function(e){return e.stopPropagation(),t.handleDragStart(e)},dragover:function(e){return e.stopPropagation(),t.handleDragOver(e)},dragend:function(e){return e.stopPropagation(),t.handleDragEnd(e)},drop:function(e){return e.stopPropagation(),t.handleDrop(e)}}},[i("div",{staticClass:"el-tree-node__content",style:{"padding-left":(t.node.level-1)*t.tree.indent+"px"}},[i("span",{class:[{"is-leaf":t.node.isLeaf,expanded:!t.node.isLeaf&&t.expanded},"el-tree-node__expand-icon",t.tree.iconClass?t.tree.iconClass:"el-icon-caret-right"],on:{click:function(e){return e.stopPropagation(),t.handleExpandIconClick(e)}}}),t.showCheckbox?i("el-checkbox",{attrs:{indeterminate:t.node.indeterminate,disabled:!!t.node.disabled},on:{change:t.handleCheckChange},nativeOn:{click:function(e){e.stopPropagation()}},model:{value:t.node.checked,callback:function(e){t.$set(t.node,"checked",e)},expression:"node.checked"}}):t._e(),t.node.loading?i("span",{staticClass:"el-tree-node__loading-icon el-icon-loading"}):t._e(),i("node-content",{attrs:{node:t.node}})],1),i("el-collapse-transition",[!t.renderAfterExpand||t.childNodeRendered?i("div",{directives:[{name:"show",rawName:"v-show",value:t.expanded,expression:"expanded"}],staticClass:"el-tree-node__children",attrs:{role:"group","aria-expanded":t.expanded}},t._l(t.node.childNodes,(function(e){return i("el-tree-node",{key:t.getNodeKey(e),attrs:{"render-content":t.renderContent,"render-after-expand":t.renderAfterExpand,"show-checkbox":t.showCheckbox,node:e},on:{"node-expand":t.handleChildNodeExpand}})})),1):t._e()])],1)},yl=[];vl._withStripped=!0;var Cl={name:"ElTreeNode",componentName:"ElTreeNode",mixins:[O.a],props:{node:{default:function(){return{}}},props:{},renderContent:Function,renderAfterExpand:{type:Boolean,default:!0},showCheckbox:{type:Boolean,default:!1}},components:{ElCollapseTransition:Ge.a,ElCheckbox:Di.a,NodeContent:{props:{node:{required:!0}},render:function(e){var t=this.$parent,n=t.tree,i=this.node,r=i.data,o=i.store;return t.renderContent?t.renderContent.call(t._renderProxy,e,{_self:n.$vnode.context,node:i,data:r,store:o}):n.$scopedSlots.default?n.$scopedSlots.default({node:i,data:r}):e("span",{class:"el-tree-node__label"},[i.label])}}},data:function(){return{tree:null,expanded:!1,childNodeRendered:!1,oldChecked:null,oldIndeterminate:null}},watch:{"node.indeterminate":function(e){this.handleSelectChange(this.node.checked,e)},"node.checked":function(e){this.handleSelectChange(e,this.node.indeterminate)},"node.expanded":function(e){var t=this;this.$nextTick((function(){return t.expanded=e})),e&&(this.childNodeRendered=!0)}},methods:{getNodeKey:function(e){return rl(this.tree.nodeKey,e.data)},handleSelectChange:function(e,t){this.oldChecked!==e&&this.oldIndeterminate!==t&&this.tree.$emit("check-change",this.node.data,e,t),this.oldChecked=e,this.indeterminate=t},handleClick:function(){var e=this.tree.store;e.setCurrentNode(this.node),this.tree.$emit("current-change",e.currentNode?e.currentNode.data:null,e.currentNode),this.tree.currentNode=this,this.tree.expandOnClickNode&&this.handleExpandIconClick(),this.tree.checkOnClickNode&&!this.node.disabled&&this.handleCheckChange(null,{target:{checked:!this.node.checked}}),this.tree.$emit("node-click",this.node.data,this.node,this)},handleContextMenu:function(e){this.tree._events["node-contextmenu"]&&this.tree._events["node-contextmenu"].length>0&&(e.stopPropagation(),e.preventDefault()),this.tree.$emit("node-contextmenu",e,this.node.data,this.node,this)},handleExpandIconClick:function(){this.node.isLeaf||(this.expanded?(this.tree.$emit("node-collapse",this.node.data,this.node,this),this.node.collapse()):(this.node.expand(),this.$emit("node-expand",this.node.data,this.node,this)))},handleCheckChange:function(e,t){var n=this;this.node.setChecked(t.target.checked,!this.tree.checkStrictly),this.$nextTick((function(){var e=n.tree.store;n.tree.$emit("check",n.node.data,{checkedNodes:e.getCheckedNodes(),checkedKeys:e.getCheckedKeys(),halfCheckedNodes:e.getHalfCheckedNodes(),halfCheckedKeys:e.getHalfCheckedKeys()})}))},handleChildNodeExpand:function(e,t,n){this.broadcast("ElTreeNode","tree-node-expand",t),this.tree.$emit("node-expand",e,t,n)},handleDragStart:function(e){this.tree.draggable&&this.tree.$emit("tree-node-drag-start",e,this)},handleDragOver:function(e){this.tree.draggable&&(this.tree.$emit("tree-node-drag-over",e,this),e.preventDefault())},handleDrop:function(e){e.preventDefault()},handleDragEnd:function(e){this.tree.draggable&&this.tree.$emit("tree-node-drag-end",e,this)}},created:function(){var e=this,t=this.$parent;t.isTree?this.tree=t:this.tree=t.tree;var n=this.tree;n||console.warn("Can not find node's tree.");var i=n.props||{},r=i["children"]||"children";this.$watch("node.data."+r,(function(){e.node.updateChildren()})),this.node.expanded&&(this.expanded=!0,this.childNodeRendered=!0),this.tree.accordion&&this.$on("tree-node-expand",(function(t){e.node!==t&&e.node.collapse()}))}},El=Cl,bl=a(El,vl,yl,!1,null,null,null);bl.options.__file="packages/tree/src/tree-node.vue";var Tl=bl.exports,Sl={name:"ElTree",mixins:[O.a],components:{ElTreeNode:Tl},data:function(){return{store:null,root:null,currentNode:null,treeItems:null,checkboxItems:[],dragState:{showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0}}},props:{data:{type:Array},emptyText:{type:String,default:function(){return Object(fa["t"])("el.tree.emptyText")}},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkDescendants:{type:Boolean,default:!1},autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:Function,showCheckbox:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},allowDrag:Function,allowDrop:Function,props:{default:function(){return{children:"children",label:"label",disabled:"disabled"}}},lazy:{type:Boolean,default:!1},highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},iconClass:String},computed:{children:{set:function(e){this.data=e},get:function(){return this.data}},treeItemArray:function(){return Array.prototype.slice.call(this.treeItems)},isEmpty:function(){var e=this.root.childNodes;return!e||0===e.length||e.every((function(e){var t=e.visible;return!t}))}},watch:{defaultCheckedKeys:function(e){this.store.setDefaultCheckedKey(e)},defaultExpandedKeys:function(e){this.store.defaultExpandedKeys=e,this.store.setDefaultExpandedKeys(e)},data:function(e){this.store.setData(e)},checkboxItems:function(e){Array.prototype.forEach.call(e,(function(e){e.setAttribute("tabindex",-1)}))},checkStrictly:function(e){this.store.checkStrictly=e}},methods:{filter:function(e){if(!this.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");this.store.filter(e)},getNodeKey:function(e){return rl(this.nodeKey,e.data)},getNodePath:function(e){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");var t=this.store.getNode(e);if(!t)return[];var n=[t.data],i=t.parent;while(i&&i!==this.root)n.push(i.data),i=i.parent;return n.reverse()},getCheckedNodes:function(e,t){return this.store.getCheckedNodes(e,t)},getCheckedKeys:function(e){return this.store.getCheckedKeys(e)},getCurrentNode:function(){var e=this.store.getCurrentNode();return e?e.data:null},getCurrentKey:function(){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");var e=this.getCurrentNode();return e?e[this.nodeKey]:null},setCheckedNodes:function(e,t){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");this.store.setCheckedNodes(e,t)},setCheckedKeys:function(e,t){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");this.store.setCheckedKeys(e,t)},setChecked:function(e,t,n){this.store.setChecked(e,t,n)},getHalfCheckedNodes:function(){return this.store.getHalfCheckedNodes()},getHalfCheckedKeys:function(){return this.store.getHalfCheckedKeys()},setCurrentNode:function(e){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");this.store.setUserCurrentNode(e)},setCurrentKey:function(e){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");this.store.setCurrentNodeKey(e)},getNode:function(e){return this.store.getNode(e)},remove:function(e){this.store.remove(e)},append:function(e,t){this.store.append(e,t)},insertBefore:function(e,t){this.store.insertBefore(e,t)},insertAfter:function(e,t){this.store.insertAfter(e,t)},handleNodeExpand:function(e,t,n){this.broadcast("ElTreeNode","tree-node-expand",t),this.$emit("node-expand",e,t,n)},updateKeyChildren:function(e,t){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");this.store.updateChildren(e,t)},initTabIndex:function(){this.treeItems=this.$el.querySelectorAll(".is-focusable[role=treeitem]"),this.checkboxItems=this.$el.querySelectorAll("input[type=checkbox]");var e=this.$el.querySelectorAll(".is-checked[role=treeitem]");e.length?e[0].setAttribute("tabindex",0):this.treeItems[0]&&this.treeItems[0].setAttribute("tabindex",0)},handleKeydown:function(e){var t=e.target;if(-1!==t.className.indexOf("el-tree-node")){var n=e.keyCode;this.treeItems=this.$el.querySelectorAll(".is-focusable[role=treeitem]");var i=this.treeItemArray.indexOf(t),r=void 0;[38,40].indexOf(n)>-1&&(e.preventDefault(),r=38===n?0!==i?i-1:0:i<this.treeItemArray.length-1?i+1:0,this.treeItemArray[r].focus()),[37,39].indexOf(n)>-1&&(e.preventDefault(),t.click());var o=t.querySelector('[type="checkbox"]');[13,32].indexOf(n)>-1&&o&&(e.preventDefault(),o.click())}}},created:function(){var e=this;this.isTree=!0,this.store=new _l({key:this.nodeKey,data:this.data,lazy:this.lazy,props:this.props,load:this.load,currentNodeKey:this.currentNodeKey,checkStrictly:this.checkStrictly,checkDescendants:this.checkDescendants,defaultCheckedKeys:this.defaultCheckedKeys,defaultExpandedKeys:this.defaultExpandedKeys,autoExpandParent:this.autoExpandParent,defaultExpandAll:this.defaultExpandAll,filterNodeMethod:this.filterNodeMethod}),this.root=this.store.root;var t=this.dragState;this.$on("tree-node-drag-start",(function(n,i){if("function"===typeof e.allowDrag&&!e.allowDrag(i.node))return n.preventDefault(),!1;n.dataTransfer.effectAllowed="move";try{n.dataTransfer.setData("text/plain","")}catch(r){}t.draggingNode=i,e.$emit("node-drag-start",i.node,n)})),this.$on("tree-node-drag-over",(function(n,i){var r=ol(n.target,"ElTreeNode"),o=t.dropNode;o&&o!==r&&Object(Be["removeClass"])(o.$el,"is-drop-inner");var s=t.draggingNode;if(s&&r){var a=!0,c=!0,l=!0,u=!0;"function"===typeof e.allowDrop&&(a=e.allowDrop(s.node,r.node,"prev"),u=c=e.allowDrop(s.node,r.node,"inner"),l=e.allowDrop(s.node,r.node,"next")),n.dataTransfer.dropEffect=c?"move":"none",(a||c||l)&&o!==r&&(o&&e.$emit("node-drag-leave",s.node,o.node,n),e.$emit("node-drag-enter",s.node,r.node,n)),(a||c||l)&&(t.dropNode=r),r.node.nextSibling===s.node&&(l=!1),r.node.previousSibling===s.node&&(a=!1),r.node.contains(s.node,!1)&&(c=!1),(s.node===r.node||s.node.contains(r.node))&&(a=!1,c=!1,l=!1);var d=r.$el.getBoundingClientRect(),h=e.$el.getBoundingClientRect(),p=void 0,f=a?c?.25:l?.45:1:-1,g=l?c?.75:a?.55:0:1,m=-9999,_=n.clientY-d.top;p=_<d.height*f?"before":_>d.height*g?"after":c?"inner":"none";var v=r.$el.querySelector(".el-tree-node__expand-icon").getBoundingClientRect(),y=e.$refs.dropIndicator;"before"===p?m=v.top-h.top:"after"===p&&(m=v.bottom-h.top),y.style.top=m+"px",y.style.left=v.right-h.left+"px","inner"===p?Object(Be["addClass"])(r.$el,"is-drop-inner"):Object(Be["removeClass"])(r.$el,"is-drop-inner"),t.showDropIndicator="before"===p||"after"===p,t.allowDrop=t.showDropIndicator||u,t.dropType=p,e.$emit("node-drag-over",s.node,r.node,n)}})),this.$on("tree-node-drag-end",(function(n){var i=t.draggingNode,r=t.dropType,o=t.dropNode;if(n.preventDefault(),n.dataTransfer.dropEffect="move",i&&o){var s={data:i.node.data};"none"!==r&&i.node.remove(),"before"===r?o.node.parent.insertBefore(s,o.node):"after"===r?o.node.parent.insertAfter(s,o.node):"inner"===r&&o.node.insertChild(s),"none"!==r&&e.store.registerNode(s),Object(Be["removeClass"])(o.$el,"is-drop-inner"),e.$emit("node-drag-end",i.node,o.node,r,n),"none"!==r&&e.$emit("node-drop",i.node,o.node,r,n)}i&&!o&&e.$emit("node-drag-end",i.node,null,r,n),t.showDropIndicator=!1,t.draggingNode=null,t.dropNode=null,t.allowDrop=!0}))},mounted:function(){this.initTabIndex(),this.$el.addEventListener("keydown",this.handleKeydown)},updated:function(){this.treeItems=this.$el.querySelectorAll("[role=treeitem]"),this.checkboxItems=this.$el.querySelectorAll("input[type=checkbox]")}},Rl=Sl,Il=a(Rl,el,tl,!1,null,null,null);Il.options.__file="packages/tree/src/tree.vue";var wl=Il.exports;wl.install=function(e){e.component(wl.name,wl)};var Ol=wl,kl=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-alert-fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-alert",class:[e.typeClass,e.center?"is-center":"","is-"+e.effect],attrs:{role:"alert"}},[e.showIcon?n("i",{staticClass:"el-alert__icon",class:[e.iconClass,e.isBigIcon]}):e._e(),n("div",{staticClass:"el-alert__content"},[e.title||e.$slots.title?n("span",{staticClass:"el-alert__title",class:[e.isBoldTitle]},[e._t("title",[e._v(e._s(e.title))])],2):e._e(),e.$slots.default&&!e.description?n("p",{staticClass:"el-alert__description"},[e._t("default")],2):e._e(),e.description&&!e.$slots.default?n("p",{staticClass:"el-alert__description"},[e._v(e._s(e.description))]):e._e(),n("i",{directives:[{name:"show",rawName:"v-show",value:e.closable,expression:"closable"}],staticClass:"el-alert__closebtn",class:{"is-customed":""!==e.closeText,"el-icon-close":""===e.closeText},on:{click:function(t){e.close()}}},[e._v(e._s(e.closeText))])])])])},Ml=[];kl._withStripped=!0;var xl={success:"el-icon-success",warning:"el-icon-warning",error:"el-icon-error"},Pl={name:"ElAlert",props:{title:{type:String,default:""},description:{type:String,default:""},type:{type:String,default:"info"},closable:{type:Boolean,default:!0},closeText:{type:String,default:""},showIcon:Boolean,center:Boolean,effect:{type:String,default:"light",validator:function(e){return-1!==["light","dark"].indexOf(e)}}},data:function(){return{visible:!0}},methods:{close:function(){this.visible=!1,this.$emit("close")}},computed:{typeClass:function(){return"el-alert--"+this.type},iconClass:function(){return xl[this.type]||"el-icon-info"},isBigIcon:function(){return this.description||this.$slots.default?"is-big":""},isBoldTitle:function(){return this.description||this.$slots.default?"is-bold":""}}},Al=Pl,Dl=a(Al,kl,Ml,!1,null,null,null);Dl.options.__file="packages/alert/src/main.vue";var Nl=Dl.exports;Nl.install=function(e){e.component(Nl.name,Nl)};var Ll=Nl,Ul=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-notification-fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],class:["el-notification",e.customClass,e.horizontalClass],style:e.positionStyle,attrs:{role:"alert"},on:{mouseenter:function(t){e.clearTimer()},mouseleave:function(t){e.startTimer()},click:e.click}},[e.type||e.iconClass?n("i",{staticClass:"el-notification__icon",class:[e.typeClass,e.iconClass]}):e._e(),n("div",{staticClass:"el-notification__group",class:{"is-with-icon":e.typeClass||e.iconClass}},[n("h2",{staticClass:"el-notification__title",domProps:{textContent:e._s(e.title)}}),n("div",{directives:[{name:"show",rawName:"v-show",value:e.message,expression:"message"}],staticClass:"el-notification__content"},[e._t("default",[e.dangerouslyUseHTMLString?n("p",{domProps:{innerHTML:e._s(e.message)}}):n("p",[e._v(e._s(e.message))])])],2),e.showClose?n("div",{staticClass:"el-notification__closeBtn el-icon-close",on:{click:function(t){return t.stopPropagation(),e.close(t)}}}):e._e()])])])},Bl=[];Ul._withStripped=!0;var Vl={success:"success",info:"info",warning:"warning",error:"error"},jl={data:function(){return{visible:!1,title:"",message:"",duration:4500,type:"",showClose:!0,customClass:"",iconClass:"",onClose:null,onClick:null,closed:!1,verticalOffset:0,timer:null,dangerouslyUseHTMLString:!1,position:"top-right"}},computed:{typeClass:function(){return this.type&&Vl[this.type]?"el-icon-"+Vl[this.type]:""},horizontalClass:function(){return this.position.indexOf("right")>-1?"right":"left"},verticalProperty:function(){return/^top-/.test(this.position)?"top":"bottom"},positionStyle:function(){var e;return e={},e[this.verticalProperty]=this.verticalOffset+"px",e}},watch:{closed:function(e){e&&(this.visible=!1,this.$el.addEventListener("transitionend",this.destroyElement))}},methods:{destroyElement:function(){this.$el.removeEventListener("transitionend",this.destroyElement),this.$destroy(!0),this.$el.parentNode.removeChild(this.$el)},click:function(){"function"===typeof this.onClick&&this.onClick()},close:function(){this.closed=!0,"function"===typeof this.onClose&&this.onClose()},clearTimer:function(){clearTimeout(this.timer)},startTimer:function(){var e=this;this.duration>0&&(this.timer=setTimeout((function(){e.closed||e.close()}),this.duration))},keydown:function(e){46===e.keyCode||8===e.keyCode?this.clearTimer():27===e.keyCode?this.closed||this.close():this.startTimer()}},mounted:function(){var e=this;this.duration>0&&(this.timer=setTimeout((function(){e.closed||e.close()}),this.duration)),document.addEventListener("keydown",this.keydown)},beforeDestroy:function(){document.removeEventListener("keydown",this.keydown)}},Fl=jl,$l=a(Fl,Ul,Bl,!1,null,null,null);$l.options.__file="packages/notification/src/main.vue";var Hl=$l.exports,Kl=$i.a.extend(Hl),Wl=void 0,ql=[],Gl=1,zl=function e(t){if(!$i.a.prototype.$isServer){t=Rt()({},t);var n=t.onClose,i="notification_"+Gl++,r=t.position||"top-right";t.onClose=function(){e.close(i,n)},Wl=new Kl({data:t}),Object(Sa["isVNode"])(t.message)&&(Wl.$slots.default=[t.message],t.message="REPLACED_BY_VNODE"),Wl.id=i,Wl.$mount(),document.body.appendChild(Wl.$el),Wl.visible=!0,Wl.dom=Wl.$el,Wl.dom.style.zIndex=T["PopupManager"].nextZIndex();var o=t.offset||0;return ql.filter((function(e){return e.position===r})).forEach((function(e){o+=e.$el.offsetHeight+16})),o+=16,Wl.verticalOffset=o,ql.push(Wl),Wl}};["success","warning","info","error"].forEach((function(e){zl[e]=function(t){return("string"===typeof t||Object(Sa["isVNode"])(t))&&(t={message:t}),t.type=e,zl(t)}})),zl.close=function(e,t){var n=-1,i=ql.length,r=ql.filter((function(t,i){return t.id===e&&(n=i,!0)}))[0];if(r&&("function"===typeof t&&t(r),ql.splice(n,1),!(i<=1)))for(var o=r.position,s=r.dom.offsetHeight,a=n;a<i-1;a++)ql[a].position===o&&(ql[a].dom.style[r.verticalProperty]=parseInt(ql[a].dom.style[r.verticalProperty],10)-s-16+"px")},zl.closeAll=function(){for(var e=ql.length-1;e>=0;e--)ql[e].close()};var Yl=zl,Jl=Yl,Xl=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-slider",class:{"is-vertical":e.vertical,"el-slider--with-input":e.showInput},attrs:{role:"slider","aria-valuemin":e.min,"aria-valuemax":e.max,"aria-orientation":e.vertical?"vertical":"horizontal","aria-disabled":e.sliderDisabled}},[e.showInput&&!e.range?n("el-input-number",{ref:"input",staticClass:"el-slider__input",attrs:{step:e.step,disabled:e.sliderDisabled,controls:e.showInputControls,min:e.min,max:e.max,debounce:e.debounce,size:e.inputSize},on:{change:e.emitChange},model:{value:e.firstValue,callback:function(t){e.firstValue=t},expression:"firstValue"}}):e._e(),n("div",{ref:"slider",staticClass:"el-slider__runway",class:{"show-input":e.showInput,disabled:e.sliderDisabled},style:e.runwayStyle,on:{click:e.onSliderClick}},[n("div",{staticClass:"el-slider__bar",style:e.barStyle}),n("slider-button",{ref:"button1",attrs:{vertical:e.vertical,"tooltip-class":e.tooltipClass},model:{value:e.firstValue,callback:function(t){e.firstValue=t},expression:"firstValue"}}),e.range?n("slider-button",{ref:"button2",attrs:{vertical:e.vertical,"tooltip-class":e.tooltipClass},model:{value:e.secondValue,callback:function(t){e.secondValue=t},expression:"secondValue"}}):e._e(),e._l(e.stops,(function(t,i){return e.showStops?n("div",{key:i,staticClass:"el-slider__stop",style:e.getStopStyle(t)}):e._e()})),e.markList.length>0?[n("div",e._l(e.markList,(function(t,i){return n("div",{key:i,staticClass:"el-slider__stop el-slider__marks-stop",style:e.getStopStyle(t.position)})})),0),n("div",{staticClass:"el-slider__marks"},e._l(e.markList,(function(t,i){return n("slider-marker",{key:i,style:e.getStopStyle(t.position),attrs:{mark:t.mark}})})),1)]:e._e()],2)],1)},Ql=[];Xl._withStripped=!0;var Zl=n(41),eu=n.n(Zl),tu=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"button",staticClass:"el-slider__button-wrapper",class:{hover:e.hovering,dragging:e.dragging},style:e.wrapperStyle,attrs:{tabindex:"0"},on:{mouseenter:e.handleMouseEnter,mouseleave:e.handleMouseLeave,mousedown:e.onButtonDown,touchstart:e.onButtonDown,focus:e.handleMouseEnter,blur:e.handleMouseLeave,keydown:[function(t){return!("button"in t)&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])||"button"in t&&0!==t.button?null:e.onLeftKeyDown(t)},function(t){return!("button"in t)&&e._k(t.keyCode,"right",39,t.key,["Right","ArrowRight"])||"button"in t&&2!==t.button?null:e.onRightKeyDown(t)},function(t){return!("button"in t)&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.preventDefault(),e.onLeftKeyDown(t))},function(t){return!("button"in t)&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:(t.preventDefault(),e.onRightKeyDown(t))}]}},[n("el-tooltip",{ref:"tooltip",attrs:{placement:"top","popper-class":e.tooltipClass,disabled:!e.showTooltip}},[n("span",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(e.formatValue))]),n("div",{staticClass:"el-slider__button",class:{hover:e.hovering,dragging:e.dragging}})])],1)},nu=[];tu._withStripped=!0;var iu={name:"ElSliderButton",components:{ElTooltip:rt.a},props:{value:{type:Number,default:0},vertical:{type:Boolean,default:!1},tooltipClass:String},data:function(){return{hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:null,oldValue:this.value}},computed:{disabled:function(){return this.$parent.sliderDisabled},max:function(){return this.$parent.max},min:function(){return this.$parent.min},step:function(){return this.$parent.step},showTooltip:function(){return this.$parent.showTooltip},precision:function(){return this.$parent.precision},currentPosition:function(){return(this.value-this.min)/(this.max-this.min)*100+"%"},enableFormat:function(){return this.$parent.formatTooltip instanceof Function},formatValue:function(){return this.enableFormat&&this.$parent.formatTooltip(this.value)||this.value},wrapperStyle:function(){return this.vertical?{bottom:this.currentPosition}:{left:this.currentPosition}}},watch:{dragging:function(e){this.$parent.dragging=e}},methods:{displayTooltip:function(){this.$refs.tooltip&&(this.$refs.tooltip.showPopper=!0)},hideTooltip:function(){this.$refs.tooltip&&(this.$refs.tooltip.showPopper=!1)},handleMouseEnter:function(){this.hovering=!0,this.displayTooltip()},handleMouseLeave:function(){this.hovering=!1,this.hideTooltip()},onButtonDown:function(e){this.disabled||(e.preventDefault(),this.onDragStart(e),window.addEventListener("mousemove",this.onDragging),window.addEventListener("touchmove",this.onDragging),window.addEventListener("mouseup",this.onDragEnd),window.addEventListener("touchend",this.onDragEnd),window.addEventListener("contextmenu",this.onDragEnd))},onLeftKeyDown:function(){this.disabled||(this.newPosition=parseFloat(this.currentPosition)-this.step/(this.max-this.min)*100,this.setPosition(this.newPosition),this.$parent.emitChange())},onRightKeyDown:function(){this.disabled||(this.newPosition=parseFloat(this.currentPosition)+this.step/(this.max-this.min)*100,this.setPosition(this.newPosition),this.$parent.emitChange())},onDragStart:function(e){this.dragging=!0,this.isClick=!0,"touchstart"===e.type&&(e.clientY=e.touches[0].clientY,e.clientX=e.touches[0].clientX),this.vertical?this.startY=e.clientY:this.startX=e.clientX,this.startPosition=parseFloat(this.currentPosition),this.newPosition=this.startPosition},onDragging:function(e){if(this.dragging){this.isClick=!1,this.displayTooltip(),this.$parent.resetSize();var t=0;"touchmove"===e.type&&(e.clientY=e.touches[0].clientY,e.clientX=e.touches[0].clientX),this.vertical?(this.currentY=e.clientY,t=(this.startY-this.currentY)/this.$parent.sliderSize*100):(this.currentX=e.clientX,t=(this.currentX-this.startX)/this.$parent.sliderSize*100),this.newPosition=this.startPosition+t,this.setPosition(this.newPosition)}},onDragEnd:function(){var e=this;this.dragging&&(setTimeout((function(){e.dragging=!1,e.hideTooltip(),e.isClick||(e.setPosition(e.newPosition),e.$parent.emitChange())}),0),window.removeEventListener("mousemove",this.onDragging),window.removeEventListener("touchmove",this.onDragging),window.removeEventListener("mouseup",this.onDragEnd),window.removeEventListener("touchend",this.onDragEnd),window.removeEventListener("contextmenu",this.onDragEnd))},setPosition:function(e){var t=this;if(null!==e&&!isNaN(e)){e<0?e=0:e>100&&(e=100);var n=100/((this.max-this.min)/this.step),i=Math.round(e/n),r=i*n*(this.max-this.min)*.01+this.min;r=parseFloat(r.toFixed(this.precision)),this.$emit("input",r),this.$nextTick((function(){t.displayTooltip(),t.$refs.tooltip&&t.$refs.tooltip.updatePopper()})),this.dragging||this.value===this.oldValue||(this.oldValue=this.value)}}}},ru=iu,ou=a(ru,tu,nu,!1,null,null,null);ou.options.__file="packages/slider/src/button.vue";var su=ou.exports,au={name:"ElMarker",props:{mark:{type:[String,Object]}},render:function(){var e=arguments[0],t="string"===typeof this.mark?this.mark:this.mark.label;return e("div",{class:"el-slider__marks-text",style:this.mark.style||{}},[t])}},cu={name:"ElSlider",mixins:[O.a],inject:{elForm:{default:""}},props:{min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},value:{type:[Number,Array],default:0},showInput:{type:Boolean,default:!1},showInputControls:{type:Boolean,default:!0},inputSize:{type:String,default:"small"},showStops:{type:Boolean,default:!1},showTooltip:{type:Boolean,default:!0},formatTooltip:Function,disabled:{type:Boolean,default:!1},range:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1},height:{type:String},debounce:{type:Number,default:300},label:{type:String},tooltipClass:String,marks:Object},components:{ElInputNumber:eu.a,SliderButton:su,SliderMarker:au},data:function(){return{firstValue:null,secondValue:null,oldValue:null,dragging:!1,sliderSize:1}},watch:{value:function(e,t){this.dragging||Array.isArray(e)&&Array.isArray(t)&&e.every((function(e,n){return e===t[n]}))||this.setValues()},dragging:function(e){e||this.setValues()},firstValue:function(e){this.range?this.$emit("input",[this.minValue,this.maxValue]):this.$emit("input",e)},secondValue:function(){this.range&&this.$emit("input",[this.minValue,this.maxValue])},min:function(){this.setValues()},max:function(){this.setValues()}},methods:{valueChanged:function(){var e=this;return this.range?![this.minValue,this.maxValue].every((function(t,n){return t===e.oldValue[n]})):this.value!==this.oldValue},setValues:function(){if(this.min>this.max)console.error("[Element Error][Slider]min should not be greater than max.");else{var e=this.value;this.range&&Array.isArray(e)?e[1]<this.min?this.$emit("input",[this.min,this.min]):e[0]>this.max?this.$emit("input",[this.max,this.max]):e[0]<this.min?this.$emit("input",[this.min,e[1]]):e[1]>this.max?this.$emit("input",[e[0],this.max]):(this.firstValue=e[0],this.secondValue=e[1],this.valueChanged()&&(this.dispatch("ElFormItem","el.form.change",[this.minValue,this.maxValue]),this.oldValue=e.slice())):this.range||"number"!==typeof e||isNaN(e)||(e<this.min?this.$emit("input",this.min):e>this.max?this.$emit("input",this.max):(this.firstValue=e,this.valueChanged()&&(this.dispatch("ElFormItem","el.form.change",e),this.oldValue=e)))}},setPosition:function(e){var t=this.min+e*(this.max-this.min)/100;if(this.range){var n=void 0;n=Math.abs(this.minValue-t)<Math.abs(this.maxValue-t)?this.firstValue<this.secondValue?"button1":"button2":this.firstValue>this.secondValue?"button1":"button2",this.$refs[n].setPosition(e)}else this.$refs.button1.setPosition(e)},onSliderClick:function(e){if(!this.sliderDisabled&&!this.dragging){if(this.resetSize(),this.vertical){var t=this.$refs.slider.getBoundingClientRect().bottom;this.setPosition((t-e.clientY)/this.sliderSize*100)}else{var n=this.$refs.slider.getBoundingClientRect().left;this.setPosition((e.clientX-n)/this.sliderSize*100)}this.emitChange()}},resetSize:function(){this.$refs.slider&&(this.sliderSize=this.$refs.slider["client"+(this.vertical?"Height":"Width")])},emitChange:function(){var e=this;this.$nextTick((function(){e.$emit("change",e.range?[e.minValue,e.maxValue]:e.value)}))},getStopStyle:function(e){return this.vertical?{bottom:e+"%"}:{left:e+"%"}}},computed:{stops:function(){var e=this;if(!this.showStops||this.min>this.max)return[];if(0===this.step)return[];for(var t=(this.max-this.min)/this.step,n=100*this.step/(this.max-this.min),i=[],r=1;r<t;r++)i.push(r*n);return this.range?i.filter((function(t){return t<100*(e.minValue-e.min)/(e.max-e.min)||t>100*(e.maxValue-e.min)/(e.max-e.min)})):i.filter((function(t){return t>100*(e.firstValue-e.min)/(e.max-e.min)}))},markList:function(){var e=this;if(!this.marks)return[];var t=Object.keys(this.marks);return t.map(parseFloat).sort((function(e,t){return e-t})).filter((function(t){return t<=e.max&&t>=e.min})).map((function(t){return{point:t,position:100*(t-e.min)/(e.max-e.min),mark:e.marks[t]}}))},minValue:function(){return Math.min(this.firstValue,this.secondValue)},maxValue:function(){return Math.max(this.firstValue,this.secondValue)},barSize:function(){return this.range?100*(this.maxValue-this.minValue)/(this.max-this.min)+"%":100*(this.firstValue-this.min)/(this.max-this.min)+"%"},barStart:function(){return this.range?100*(this.minValue-this.min)/(this.max-this.min)+"%":"0%"},precision:function(){var e=[this.min,this.max,this.step].map((function(e){var t=(""+e).split(".")[1];return t?t.length:0}));return Math.max.apply(null,e)},runwayStyle:function(){return this.vertical?{height:this.height}:{}},barStyle:function(){return this.vertical?{height:this.barSize,bottom:this.barStart}:{width:this.barSize,left:this.barStart}},sliderDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},mounted:function(){var e=void 0;this.range?(Array.isArray(this.value)?(this.firstValue=Math.max(this.min,this.value[0]),this.secondValue=Math.min(this.max,this.value[1])):(this.firstValue=this.min,this.secondValue=this.max),this.oldValue=[this.firstValue,this.secondValue],e=this.firstValue+"-"+this.secondValue):("number"!==typeof this.value||isNaN(this.value)?this.firstValue=this.min:this.firstValue=Math.min(this.max,Math.max(this.min,this.value)),this.oldValue=this.firstValue,e=this.firstValue),this.$el.setAttribute("aria-valuetext",e),this.$el.setAttribute("aria-label",this.label?this.label:"slider between "+this.min+" and "+this.max),this.resetSize(),window.addEventListener("resize",this.resetSize)},beforeDestroy:function(){window.removeEventListener("resize",this.resetSize)}},lu=cu,uu=a(lu,Xl,Ql,!1,null,null,null);uu.options.__file="packages/slider/src/main.vue";var du=uu.exports;du.install=function(e){e.component(du.name,du)};var hu=du,pu=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-loading-fade"},on:{"after-leave":e.handleAfterLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-loading-mask",class:[e.customClass,{"is-fullscreen":e.fullscreen}],style:{backgroundColor:e.background||""}},[n("div",{staticClass:"el-loading-spinner"},[e.spinner?n("i",{class:e.spinner}):n("svg",{staticClass:"circular",attrs:{viewBox:"25 25 50 50"}},[n("circle",{staticClass:"path",attrs:{cx:"50",cy:"50",r:"20",fill:"none"}})]),e.text?n("p",{staticClass:"el-loading-text"},[e._v(e._s(e.text))]):e._e()])])])},fu=[];pu._withStripped=!0;var gu={data:function(){return{text:null,spinner:null,background:null,fullscreen:!0,visible:!1,customClass:""}},methods:{handleAfterLeave:function(){this.$emit("after-leave")},setText:function(e){this.text=e}}},mu=gu,_u=a(mu,pu,fu,!1,null,null,null);_u.options.__file="packages/loading/src/loading.vue";var vu=_u.exports,yu=n(32),Cu=n.n(yu),Eu=$i.a.extend(vu),bu={install:function(e){if(!e.prototype.$isServer){var t=function(t,i){i.value?e.nextTick((function(){i.modifiers.fullscreen?(t.originalPosition=Object(Be["getStyle"])(document.body,"position"),t.originalOverflow=Object(Be["getStyle"])(document.body,"overflow"),t.maskStyle.zIndex=T["PopupManager"].nextZIndex(),Object(Be["addClass"])(t.mask,"is-fullscreen"),n(document.body,t,i)):(Object(Be["removeClass"])(t.mask,"is-fullscreen"),i.modifiers.body?(t.originalPosition=Object(Be["getStyle"])(document.body,"position"),["top","left"].forEach((function(e){var n="top"===e?"scrollTop":"scrollLeft";t.maskStyle[e]=t.getBoundingClientRect()[e]+document.body[n]+document.documentElement[n]-parseInt(Object(Be["getStyle"])(document.body,"margin-"+e),10)+"px"})),["height","width"].forEach((function(e){t.maskStyle[e]=t.getBoundingClientRect()[e]+"px"})),n(document.body,t,i)):(t.originalPosition=Object(Be["getStyle"])(t,"position"),n(t,t,i)))})):(Cu()(t.instance,(function(e){if(t.instance.hiding){t.domVisible=!1;var n=i.modifiers.fullscreen||i.modifiers.body?document.body:t;Object(Be["removeClass"])(n,"el-loading-parent--relative"),Object(Be["removeClass"])(n,"el-loading-parent--hidden"),t.instance.hiding=!1}}),300,!0),t.instance.visible=!1,t.instance.hiding=!0)},n=function(t,n,i){n.domVisible||"none"===Object(Be["getStyle"])(n,"display")||"hidden"===Object(Be["getStyle"])(n,"visibility")?n.domVisible&&!0===n.instance.hiding&&(n.instance.visible=!0,n.instance.hiding=!1):(Object.keys(n.maskStyle).forEach((function(e){n.mask.style[e]=n.maskStyle[e]})),"absolute"!==n.originalPosition&&"fixed"!==n.originalPosition&&Object(Be["addClass"])(t,"el-loading-parent--relative"),i.modifiers.fullscreen&&i.modifiers.lock&&Object(Be["addClass"])(t,"el-loading-parent--hidden"),n.domVisible=!0,t.appendChild(n.mask),e.nextTick((function(){n.instance.hiding?n.instance.$emit("after-leave"):n.instance.visible=!0})),n.domInserted=!0)};e.directive("loading",{bind:function(e,n,i){var r=e.getAttribute("element-loading-text"),o=e.getAttribute("element-loading-spinner"),s=e.getAttribute("element-loading-background"),a=e.getAttribute("element-loading-custom-class"),c=i.context,l=new Eu({el:document.createElement("div"),data:{text:c&&c[r]||r,spinner:c&&c[o]||o,background:c&&c[s]||s,customClass:c&&c[a]||a,fullscreen:!!n.modifiers.fullscreen}});e.instance=l,e.mask=l.$el,e.maskStyle={},n.value&&t(e,n)},update:function(e,n){e.instance.setText(e.getAttribute("element-loading-text")),n.oldValue!==n.value&&t(e,n)},unbind:function(e,n){e.domInserted&&(e.mask&&e.mask.parentNode&&e.mask.parentNode.removeChild(e.mask),t(e,{value:!1,modifiers:n.modifiers})),e.instance&&e.instance.$destroy()}})}}},Tu=bu,Su=$i.a.extend(vu),Ru={text:null,fullscreen:!0,body:!1,lock:!1,customClass:""},Iu=void 0;Su.prototype.originalPosition="",Su.prototype.originalOverflow="",Su.prototype.close=function(){var e=this;this.fullscreen&&(Iu=void 0),Cu()(this,(function(t){var n=e.fullscreen||e.body?document.body:e.target;Object(Be["removeClass"])(n,"el-loading-parent--relative"),Object(Be["removeClass"])(n,"el-loading-parent--hidden"),e.$el&&e.$el.parentNode&&e.$el.parentNode.removeChild(e.$el),e.$destroy()}),300),this.visible=!1};var wu=function(e,t,n){var i={};e.fullscreen?(n.originalPosition=Object(Be["getStyle"])(document.body,"position"),n.originalOverflow=Object(Be["getStyle"])(document.body,"overflow"),i.zIndex=T["PopupManager"].nextZIndex()):e.body?(n.originalPosition=Object(Be["getStyle"])(document.body,"position"),["top","left"].forEach((function(t){var n="top"===t?"scrollTop":"scrollLeft";i[t]=e.target.getBoundingClientRect()[t]+document.body[n]+document.documentElement[n]+"px"})),["height","width"].forEach((function(t){i[t]=e.target.getBoundingClientRect()[t]+"px"}))):n.originalPosition=Object(Be["getStyle"])(t,"position"),Object.keys(i).forEach((function(e){n.$el.style[e]=i[e]}))},Ou=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!$i.a.prototype.$isServer){if(e=Rt()({},Ru,e),"string"===typeof e.target&&(e.target=document.querySelector(e.target)),e.target=e.target||document.body,e.target!==document.body?e.fullscreen=!1:e.body=!0,e.fullscreen&&Iu)return Iu;var t=e.body?document.body:e.target,n=new Su({el:document.createElement("div"),data:e});return wu(e,t,n),"absolute"!==n.originalPosition&&"fixed"!==n.originalPosition&&Object(Be["addClass"])(t,"el-loading-parent--relative"),e.fullscreen&&e.lock&&Object(Be["addClass"])(t,"el-loading-parent--hidden"),t.appendChild(n.$el),$i.a.nextTick((function(){n.visible=!0})),e.fullscreen&&(Iu=n),n}},ku=Ou,Mu={install:function(e){e.use(Tu),e.prototype.$loading=ku},directive:Tu,service:ku},xu=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("i",{class:"el-icon-"+e.name})},Pu=[];xu._withStripped=!0;var Au={name:"ElIcon",props:{name:String}},Du=Au,Nu=a(Du,xu,Pu,!1,null,null,null);Nu.options.__file="packages/icon/src/icon.vue";var Lu=Nu.exports;Lu.install=function(e){e.component(Lu.name,Lu)};var Uu=Lu,Bu={name:"ElRow",componentName:"ElRow",props:{tag:{type:String,default:"div"},gutter:Number,type:String,justify:{type:String,default:"start"},align:String},computed:{style:function(){var e={};return this.gutter&&(e.marginLeft="-"+this.gutter/2+"px",e.marginRight=e.marginLeft),e}},render:function(e){return e(this.tag,{class:["el-row","start"!==this.justify?"is-justify-"+this.justify:"",this.align?"is-align-"+this.align:"",{"el-row--flex":"flex"===this.type}],style:this.style},this.$slots.default)},install:function(e){e.component(Bu.name,Bu)}},Vu=Bu,ju="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fu={name:"ElCol",props:{span:{type:Number,default:24},tag:{type:String,default:"div"},offset:Number,pull:Number,push:Number,xs:[Number,Object],sm:[Number,Object],md:[Number,Object],lg:[Number,Object],xl:[Number,Object]},computed:{gutter:function(){var e=this.$parent;while(e&&"ElRow"!==e.$options.componentName)e=e.$parent;return e?e.gutter:0}},render:function(e){var t=this,n=[],i={};return this.gutter&&(i.paddingLeft=this.gutter/2+"px",i.paddingRight=i.paddingLeft),["span","offset","pull","push"].forEach((function(e){(t[e]||0===t[e])&&n.push("span"!==e?"el-col-"+e+"-"+t[e]:"el-col-"+t[e])})),["xs","sm","md","lg","xl"].forEach((function(e){if("number"===typeof t[e])n.push("el-col-"+e+"-"+t[e]);else if("object"===ju(t[e])){var i=t[e];Object.keys(i).forEach((function(t){n.push("span"!==t?"el-col-"+e+"-"+t+"-"+i[t]:"el-col-"+e+"-"+i[t])}))}})),e(this.tag,{class:["el-col",n],style:i},this.$slots.default)},install:function(e){e.component(Fu.name,Fu)}},$u=Fu,Hu=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition-group",{class:["el-upload-list","el-upload-list--"+e.listType,{"is-disabled":e.disabled}],attrs:{tag:"ul",name:"el-list"}},e._l(e.files,(function(t){return n("li",{key:t.uid,class:["el-upload-list__item","is-"+t.status,e.focusing?"focusing":""],attrs:{tabindex:"0"},on:{keydown:function(n){if(!("button"in n)&&e._k(n.keyCode,"delete",[8,46],n.key,["Backspace","Delete","Del"]))return null;!e.disabled&&e.$emit("remove",t)},focus:function(t){e.focusing=!0},blur:function(t){e.focusing=!1},click:function(t){e.focusing=!1}}},[e._t("default",["uploading"!==t.status&&["picture-card","picture"].indexOf(e.listType)>-1?n("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:t.url,alt:""}}):e._e(),n("a",{staticClass:"el-upload-list__item-name",on:{click:function(n){e.handleClick(t)}}},[n("i",{staticClass:"el-icon-document"}),e._v(e._s(t.name)+"\n      ")]),n("label",{staticClass:"el-upload-list__item-status-label"},[n("i",{class:{"el-icon-upload-success":!0,"el-icon-circle-check":"text"===e.listType,"el-icon-check":["picture-card","picture"].indexOf(e.listType)>-1}})]),e.disabled?e._e():n("i",{staticClass:"el-icon-close",on:{click:function(n){e.$emit("remove",t)}}}),e.disabled?e._e():n("i",{staticClass:"el-icon-close-tip"},[e._v(e._s(e.t("el.upload.deleteTip")))]),"uploading"===t.status?n("el-progress",{attrs:{type:"picture-card"===e.listType?"circle":"line","stroke-width":"picture-card"===e.listType?6:2,percentage:e.parsePercentage(t.percentage)}}):e._e(),"picture-card"===e.listType?n("span",{staticClass:"el-upload-list__item-actions"},[e.handlePreview&&"picture-card"===e.listType?n("span",{staticClass:"el-upload-list__item-preview",on:{click:function(n){e.handlePreview(t)}}},[n("i",{staticClass:"el-icon-zoom-in"})]):e._e(),e.disabled?e._e():n("span",{staticClass:"el-upload-list__item-delete",on:{click:function(n){e.$emit("remove",t)}}},[n("i",{staticClass:"el-icon-delete"})])]):e._e()],{file:t})],2)})),0)},Ku=[];Hu._withStripped=!0;var Wu=n(33),qu=n.n(Wu),Gu={name:"ElUploadList",mixins:[_.a],data:function(){return{focusing:!1}},components:{ElProgress:qu.a},props:{files:{type:Array,default:function(){return[]}},disabled:{type:Boolean,default:!1},handlePreview:Function,listType:String},methods:{parsePercentage:function(e){return parseInt(e,10)},handleClick:function(e){this.handlePreview&&this.handlePreview(e)}}},zu=Gu,Yu=a(zu,Hu,Ku,!1,null,null,null);Yu.options.__file="packages/upload/src/upload-list.vue";var Ju=Yu.exports,Xu=n(24),Qu=n.n(Xu);function Zu(e,t,n){var i=void 0;i=n.response?""+(n.response.error||n.response):n.responseText?""+n.responseText:"fail to post "+e+" "+n.status;var r=new Error(i);return r.status=n.status,r.method="post",r.url=e,r}function ed(e){var t=e.responseText||e.response;if(!t)return t;try{return JSON.parse(t)}catch(n){return t}}function td(e){if("undefined"!==typeof XMLHttpRequest){var t=new XMLHttpRequest,n=e.action;t.upload&&(t.upload.onprogress=function(t){t.total>0&&(t.percent=t.loaded/t.total*100),e.onProgress(t)});var i=new FormData;e.data&&Object.keys(e.data).forEach((function(t){i.append(t,e.data[t])})),i.append(e.filename,e.file,e.file.name),t.onerror=function(t){e.onError(t)},t.onload=function(){if(t.status<200||t.status>=300)return e.onError(Zu(n,e,t));e.onSuccess(ed(t))},t.open("post",n,!0),e.withCredentials&&"withCredentials"in t&&(t.withCredentials=!0);var r=e.headers||{};for(var o in r)r.hasOwnProperty(o)&&null!==r[o]&&t.setRequestHeader(o,r[o]);return t.send(i),t}}var nd=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-upload-dragger",class:{"is-dragover":e.dragover},on:{drop:function(t){return t.preventDefault(),e.onDrop(t)},dragover:function(t){return t.preventDefault(),e.onDragover(t)},dragleave:function(t){t.preventDefault(),e.dragover=!1}}},[e._t("default")],2)},id=[];nd._withStripped=!0;var rd={name:"ElUploadDrag",props:{disabled:Boolean},inject:{uploader:{default:""}},data:function(){return{dragover:!1}},methods:{onDragover:function(){this.disabled||(this.dragover=!0)},onDrop:function(e){if(!this.disabled&&this.uploader){var t=this.uploader.accept;this.dragover=!1,t?this.$emit("file",[].slice.call(e.dataTransfer.files).filter((function(e){var n=e.type,i=e.name,r=i.indexOf(".")>-1?"."+i.split(".").pop():"",o=n.replace(/\/.*$/,"");return t.split(",").map((function(e){return e.trim()})).filter((function(e){return e})).some((function(e){return/\..+$/.test(e)?r===e:/\/\*$/.test(e)?o===e.replace(/\/\*$/,""):!!/^[^\/]+\/[^\/]+$/.test(e)&&n===e}))}))):this.$emit("file",e.dataTransfer.files)}}}},od=rd,sd=a(od,nd,id,!1,null,null,null);sd.options.__file="packages/upload/src/upload-dragger.vue";var ad,cd,ld=sd.exports,ud={inject:["uploader"],components:{UploadDragger:ld},props:{type:String,action:{type:String,required:!0},name:{type:String,default:"file"},data:Object,headers:Object,withCredentials:Boolean,multiple:Boolean,accept:String,onStart:Function,onProgress:Function,onSuccess:Function,onError:Function,beforeUpload:Function,drag:Boolean,onPreview:{type:Function,default:function(){}},onRemove:{type:Function,default:function(){}},fileList:Array,autoUpload:Boolean,listType:String,httpRequest:{type:Function,default:td},disabled:Boolean,limit:Number,onExceed:Function},data:function(){return{mouseover:!1,reqs:{}}},methods:{isImage:function(e){return-1!==e.indexOf("image")},handleChange:function(e){var t=e.target.files;t&&this.uploadFiles(t)},uploadFiles:function(e){var t=this;if(this.limit&&this.fileList.length+e.length>this.limit)this.onExceed&&this.onExceed(e,this.fileList);else{var n=Array.prototype.slice.call(e);this.multiple||(n=n.slice(0,1)),0!==n.length&&n.forEach((function(e){t.onStart(e),t.autoUpload&&t.upload(e)}))}},upload:function(e){var t=this;if(this.$refs.input.value=null,!this.beforeUpload)return this.post(e);var n=this.beforeUpload(e);n&&n.then?n.then((function(n){var i=Object.prototype.toString.call(n);if("[object File]"===i||"[object Blob]"===i){for(var r in"[object Blob]"===i&&(n=new File([n],e.name,{type:e.type})),e)e.hasOwnProperty(r)&&(n[r]=e[r]);t.post(n)}else t.post(e)}),(function(){t.onRemove(null,e)})):!1!==n?this.post(e):this.onRemove(null,e)},abort:function(e){var t=this.reqs;if(e){var n=e;e.uid&&(n=e.uid),t[n]&&t[n].abort()}else Object.keys(t).forEach((function(e){t[e]&&t[e].abort(),delete t[e]}))},post:function(e){var t=this,n=e.uid,i={headers:this.headers,withCredentials:this.withCredentials,file:e,data:this.data,filename:this.name,action:this.action,onProgress:function(n){t.onProgress(n,e)},onSuccess:function(i){t.onSuccess(i,e),delete t.reqs[n]},onError:function(i){t.onError(i,e),delete t.reqs[n]}},r=this.httpRequest(i);this.reqs[n]=r,r&&r.then&&r.then(i.onSuccess,i.onError)},handleClick:function(){this.disabled||(this.$refs.input.value=null,this.$refs.input.click())},handleKeydown:function(e){e.target===e.currentTarget&&(13!==e.keyCode&&32!==e.keyCode||this.handleClick())}},render:function(e){var t=this.handleClick,n=this.drag,i=this.name,r=this.handleChange,o=this.multiple,s=this.accept,a=this.listType,c=this.uploadFiles,l=this.disabled,u=this.handleKeydown,d={class:{"el-upload":!0},on:{click:t,keydown:u}};return d.class["el-upload--"+a]=!0,e("div",Qu()([d,{attrs:{tabindex:"0"}}]),[n?e("upload-dragger",{attrs:{disabled:l},on:{file:c}},[this.$slots.default]):this.$slots.default,e("input",{class:"el-upload__input",attrs:{type:"file",name:i,multiple:o,accept:s},ref:"input",on:{change:r}})])}},dd=ud,hd=a(dd,ad,cd,!1,null,null,null);hd.options.__file="packages/upload/src/upload.vue";var pd=hd.exports;function fd(){}var gd,md,_d={name:"ElUpload",mixins:[I.a],components:{ElProgress:qu.a,UploadList:Ju,Upload:pd},provide:function(){return{uploader:this}},inject:{elForm:{default:""}},props:{action:{type:String,required:!0},headers:{type:Object,default:function(){return{}}},data:Object,multiple:Boolean,name:{type:String,default:"file"},drag:Boolean,dragger:Boolean,withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:String,type:{type:String,default:"select"},beforeUpload:Function,beforeRemove:Function,onRemove:{type:Function,default:fd},onChange:{type:Function,default:fd},onPreview:{type:Function},onSuccess:{type:Function,default:fd},onProgress:{type:Function,default:fd},onError:{type:Function,default:fd},fileList:{type:Array,default:function(){return[]}},autoUpload:{type:Boolean,default:!0},listType:{type:String,default:"text"},httpRequest:Function,disabled:Boolean,limit:Number,onExceed:{type:Function,default:fd}},data:function(){return{uploadFiles:[],dragOver:!1,draging:!1,tempIndex:1}},computed:{uploadDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},watch:{listType:function(e){"picture-card"!==e&&"picture"!==e||(this.uploadFiles=this.uploadFiles.map((function(e){if(!e.url&&e.raw)try{e.url=URL.createObjectURL(e.raw)}catch(t){console.error("[Element Error][Upload]",t)}return e})))},fileList:{immediate:!0,handler:function(e){var t=this;this.uploadFiles=e.map((function(e){return e.uid=e.uid||Date.now()+t.tempIndex++,e.status=e.status||"success",e}))}}},methods:{handleStart:function(e){e.uid=Date.now()+this.tempIndex++;var t={status:"ready",name:e.name,size:e.size,percentage:0,uid:e.uid,raw:e};if("picture-card"===this.listType||"picture"===this.listType)try{t.url=URL.createObjectURL(e)}catch(n){return void console.error("[Element Error][Upload]",n)}this.uploadFiles.push(t),this.onChange(t,this.uploadFiles)},handleProgress:function(e,t){var n=this.getFile(t);this.onProgress(e,n,this.uploadFiles),n.status="uploading",n.percentage=e.percent||0},handleSuccess:function(e,t){var n=this.getFile(t);n&&(n.status="success",n.response=e,this.onSuccess(e,n,this.uploadFiles),this.onChange(n,this.uploadFiles))},handleError:function(e,t){var n=this.getFile(t),i=this.uploadFiles;n.status="fail",i.splice(i.indexOf(n),1),this.onError(e,n,this.uploadFiles),this.onChange(n,this.uploadFiles)},handleRemove:function(e,t){var n=this;t&&(e=this.getFile(t));var i=function(){n.abort(e);var t=n.uploadFiles;t.splice(t.indexOf(e),1),n.onRemove(e,t)};if(this.beforeRemove){if("function"===typeof this.beforeRemove){var r=this.beforeRemove(e,this.uploadFiles);r&&r.then?r.then((function(){i()}),fd):!1!==r&&i()}}else i()},getFile:function(e){var t=this.uploadFiles,n=void 0;return t.every((function(t){return n=e.uid===t.uid?t:null,!n})),n},abort:function(e){this.$refs["upload-inner"].abort(e)},clearFiles:function(){this.uploadFiles=[]},submit:function(){var e=this;this.uploadFiles.filter((function(e){return"ready"===e.status})).forEach((function(t){e.$refs["upload-inner"].upload(t.raw)}))},getMigratingConfig:function(){return{props:{"default-file-list":"default-file-list is renamed to file-list.","show-upload-list":"show-upload-list is renamed to show-file-list.","thumbnail-mode":"thumbnail-mode has been deprecated, you can implement the same effect according to this case: http://element.eleme.io/#/zh-CN/component/upload#yong-hu-tou-xiang-shang-chuan"}}}},beforeDestroy:function(){this.uploadFiles.forEach((function(e){e.url&&0===e.url.indexOf("blob:")&&URL.revokeObjectURL(e.url)}))},render:function(e){var t=this,n=void 0;this.showFileList&&(n=e(Ju,{attrs:{disabled:this.uploadDisabled,listType:this.listType,files:this.uploadFiles,handlePreview:this.onPreview},on:{remove:this.handleRemove}},[function(e){if(t.$scopedSlots.file)return t.$scopedSlots.file({file:e.file})}]));var i={props:{type:this.type,drag:this.drag,action:this.action,multiple:this.multiple,"before-upload":this.beforeUpload,"with-credentials":this.withCredentials,headers:this.headers,name:this.name,data:this.data,accept:this.accept,fileList:this.uploadFiles,autoUpload:this.autoUpload,listType:this.listType,disabled:this.uploadDisabled,limit:this.limit,"on-exceed":this.onExceed,"on-start":this.handleStart,"on-progress":this.handleProgress,"on-success":this.handleSuccess,"on-error":this.handleError,"on-preview":this.onPreview,"on-remove":this.handleRemove,"http-request":this.httpRequest},ref:"upload-inner"},r=this.$slots.trigger||this.$slots.default,o=e("upload",i,[r]);return e("div",["picture-card"===this.listType?n:"",this.$slots.trigger?[o,this.$slots.default]:o,this.$slots.tip,"picture-card"!==this.listType?n:""])}},vd=_d,yd=a(vd,gd,md,!1,null,null,null);yd.options.__file="packages/upload/src/index.vue";var Cd=yd.exports;Cd.install=function(e){e.component(Cd.name,Cd)};var Ed=Cd,bd=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-progress",class:["el-progress--"+e.type,e.status?"is-"+e.status:"",{"el-progress--without-text":!e.showText,"el-progress--text-inside":e.textInside}],attrs:{role:"progressbar","aria-valuenow":e.percentage,"aria-valuemin":"0","aria-valuemax":"100"}},["line"===e.type?n("div",{staticClass:"el-progress-bar"},[n("div",{staticClass:"el-progress-bar__outer",style:{height:e.strokeWidth+"px"}},[n("div",{staticClass:"el-progress-bar__inner",style:e.barStyle},[e.showText&&e.textInside?n("div",{staticClass:"el-progress-bar__innerText"},[e._v(e._s(e.content))]):e._e()])])]):n("div",{staticClass:"el-progress-circle",style:{height:e.width+"px",width:e.width+"px"}},[n("svg",{attrs:{viewBox:"0 0 100 100"}},[n("path",{staticClass:"el-progress-circle__track",style:e.trailPathStyle,attrs:{d:e.trackPath,stroke:"#e5e9f2","stroke-width":e.relativeStrokeWidth,fill:"none"}}),n("path",{staticClass:"el-progress-circle__path",style:e.circlePathStyle,attrs:{d:e.trackPath,stroke:e.stroke,fill:"none","stroke-linecap":e.strokeLinecap,"stroke-width":e.percentage?e.relativeStrokeWidth:0}})])]),e.showText&&!e.textInside?n("div",{staticClass:"el-progress__text",style:{fontSize:e.progressTextSize+"px"}},[e.status?n("i",{class:e.iconClass}):[e._v(e._s(e.content))]],2):e._e()])},Td=[];bd._withStripped=!0;var Sd={name:"ElProgress",props:{type:{type:String,default:"line",validator:function(e){return["line","circle","dashboard"].indexOf(e)>-1}},percentage:{type:Number,default:0,required:!0,validator:function(e){return e>=0&&e<=100}},status:{type:String,validator:function(e){return["success","exception","warning"].indexOf(e)>-1}},strokeWidth:{type:Number,default:6},strokeLinecap:{type:String,default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:[String,Array,Function],default:""},format:Function},computed:{barStyle:function(){var e={};return e.width=this.percentage+"%",e.backgroundColor=this.getCurrentColor(this.percentage),e},relativeStrokeWidth:function(){return(this.strokeWidth/this.width*100).toFixed(1)},radius:function(){return"circle"===this.type||"dashboard"===this.type?parseInt(50-parseFloat(this.relativeStrokeWidth)/2,10):0},trackPath:function(){var e=this.radius,t="dashboard"===this.type;return"\n        M 50 50\n        m 0 "+(t?"":"-")+e+"\n        a "+e+" "+e+" 0 1 1 0 "+(t?"-":"")+2*e+"\n        a "+e+" "+e+" 0 1 1 0 "+(t?"":"-")+2*e+"\n        "},perimeter:function(){return 2*Math.PI*this.radius},rate:function(){return"dashboard"===this.type?.75:1},strokeDashoffset:function(){var e=-1*this.perimeter*(1-this.rate)/2;return e+"px"},trailPathStyle:function(){return{strokeDasharray:this.perimeter*this.rate+"px, "+this.perimeter+"px",strokeDashoffset:this.strokeDashoffset}},circlePathStyle:function(){return{strokeDasharray:this.perimeter*this.rate*(this.percentage/100)+"px, "+this.perimeter+"px",strokeDashoffset:this.strokeDashoffset,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease"}},stroke:function(){var e=void 0;if(this.color)e=this.getCurrentColor(this.percentage);else switch(this.status){case"success":e="#13ce66";break;case"exception":e="#ff4949";break;case"warning":e="#e6a23c";break;default:e="#20a0ff"}return e},iconClass:function(){return"warning"===this.status?"el-icon-warning":"line"===this.type?"success"===this.status?"el-icon-circle-check":"el-icon-circle-close":"success"===this.status?"el-icon-check":"el-icon-close"},progressTextSize:function(){return"line"===this.type?12+.4*this.strokeWidth:.111111*this.width+2},content:function(){return"function"===typeof this.format?this.format(this.percentage)||"":this.percentage+"%"}},methods:{getCurrentColor:function(e){return"function"===typeof this.color?this.color(e):"string"===typeof this.color?this.color:this.getLevelColor(e)},getLevelColor:function(e){for(var t=this.getColorArray().sort((function(e,t){return e.percentage-t.percentage})),n=0;n<t.length;n++)if(t[n].percentage>e)return t[n].color;return t[t.length-1].color},getColorArray:function(){var e=this.color,t=100/e.length;return e.map((function(e,n){return"string"===typeof e?{color:e,percentage:(n+1)*t}:e}))}}},Rd=Sd,Id=a(Rd,bd,Td,!1,null,null,null);Id.options.__file="packages/progress/src/progress.vue";var wd=Id.exports;wd.install=function(e){e.component(wd.name,wd)};var Od=wd,kd=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"el-spinner"},[n("svg",{staticClass:"el-spinner-inner",style:{width:e.radius/2+"px",height:e.radius/2+"px"},attrs:{viewBox:"0 0 50 50"}},[n("circle",{staticClass:"path",attrs:{cx:"25",cy:"25",r:"20",fill:"none",stroke:e.strokeColor,"stroke-width":e.strokeWidth}})])])},Md=[];kd._withStripped=!0;var xd={name:"ElSpinner",props:{type:String,radius:{type:Number,default:100},strokeWidth:{type:Number,default:5},strokeColor:{type:String,default:"#efefef"}}},Pd=xd,Ad=a(Pd,kd,Md,!1,null,null,null);Ad.options.__file="packages/spinner/src/spinner.vue";var Dd=Ad.exports;Dd.install=function(e){e.component(Dd.name,Dd)};var Nd=Dd,Ld=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-message-fade"},on:{"after-leave":e.handleAfterLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],class:["el-message",e.type&&!e.iconClass?"el-message--"+e.type:"",e.center?"is-center":"",e.showClose?"is-closable":"",e.customClass],style:e.positionStyle,attrs:{role:"alert"},on:{mouseenter:e.clearTimer,mouseleave:e.startTimer}},[e.iconClass?n("i",{class:e.iconClass}):n("i",{class:e.typeClass}),e._t("default",[e.dangerouslyUseHTMLString?n("p",{staticClass:"el-message__content",domProps:{innerHTML:e._s(e.message)}}):n("p",{staticClass:"el-message__content"},[e._v(e._s(e.message))])]),e.showClose?n("i",{staticClass:"el-message__closeBtn el-icon-close",on:{click:e.close}}):e._e()],2)])},Ud=[];Ld._withStripped=!0;var Bd={success:"success",info:"info",warning:"warning",error:"error"},Vd={data:function(){return{visible:!1,message:"",duration:3e3,type:"info",iconClass:"",customClass:"",onClose:null,showClose:!1,closed:!1,verticalOffset:20,timer:null,dangerouslyUseHTMLString:!1,center:!1}},computed:{typeClass:function(){return this.type&&!this.iconClass?"el-message__icon el-icon-"+Bd[this.type]:""},positionStyle:function(){return{top:this.verticalOffset+"px"}}},watch:{closed:function(e){e&&(this.visible=!1)}},methods:{handleAfterLeave:function(){this.$destroy(!0),this.$el.parentNode.removeChild(this.$el)},close:function(){this.closed=!0,"function"===typeof this.onClose&&this.onClose(this)},clearTimer:function(){clearTimeout(this.timer)},startTimer:function(){var e=this;this.duration>0&&(this.timer=setTimeout((function(){e.closed||e.close()}),this.duration))},keydown:function(e){27===e.keyCode&&(this.closed||this.close())}},mounted:function(){this.startTimer(),document.addEventListener("keydown",this.keydown)},beforeDestroy:function(){document.removeEventListener("keydown",this.keydown)}},jd=Vd,Fd=a(jd,Ld,Ud,!1,null,null,null);Fd.options.__file="packages/message/src/main.vue";var $d=Fd.exports,Hd=n(15),Kd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Wd=$i.a.extend($d),qd=void 0,Gd=[],zd=1,Yd=function e(t){if(!$i.a.prototype.$isServer){t=t||{},"string"===typeof t&&(t={message:t});var n=t.onClose,i="message_"+zd++;t.onClose=function(){e.close(i,n)},qd=new Wd({data:t}),qd.id=i,Object(Sa["isVNode"])(qd.message)&&(qd.$slots.default=[qd.message],qd.message=null),qd.$mount(),document.body.appendChild(qd.$el);var r=t.offset||20;return Gd.forEach((function(e){r+=e.$el.offsetHeight+16})),qd.verticalOffset=r,qd.visible=!0,qd.$el.style.zIndex=T["PopupManager"].nextZIndex(),Gd.push(qd),qd}};["success","warning","info","error"].forEach((function(e){Yd[e]=function(t){return Object(Hd["isObject"])(t)&&!Object(Sa["isVNode"])(t)?Yd(Kd({},t,{type:e})):Yd({type:e,message:t})}})),Yd.close=function(e,t){for(var n=Gd.length,i=-1,r=void 0,o=0;o<n;o++)if(e===Gd[o].id){r=Gd[o].$el.offsetHeight,i=o,"function"===typeof t&&t(Gd[o]),Gd.splice(o,1);break}if(!(n<=1||-1===i||i>Gd.length-1))for(var s=i;s<n-1;s++){var a=Gd[s].$el;a.style["top"]=parseInt(a.style["top"],10)-r-16+"px"}},Yd.closeAll=function(){for(var e=Gd.length-1;e>=0;e--)Gd[e].close()};var Jd=Yd,Xd=Jd,Qd=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-badge"},[e._t("default"),n("transition",{attrs:{name:"el-zoom-in-center"}},[n("sup",{directives:[{name:"show",rawName:"v-show",value:!e.hidden&&(e.content||0===e.content||e.isDot),expression:"!hidden && (content || content === 0 || isDot)"}],staticClass:"el-badge__content",class:["el-badge__content--"+e.type,{"is-fixed":e.$slots.default,"is-dot":e.isDot}],domProps:{textContent:e._s(e.content)}})])],2)},Zd=[];Qd._withStripped=!0;var eh={name:"ElBadge",props:{value:[String,Number],max:Number,isDot:Boolean,hidden:Boolean,type:{type:String,validator:function(e){return["primary","success","warning","info","danger"].indexOf(e)>-1}}},computed:{content:function(){if(!this.isDot){var e=this.value,t=this.max;return"number"===typeof e&&"number"===typeof t&&t<e?t+"+":e}}}},th=eh,nh=a(th,Qd,Zd,!1,null,null,null);nh.options.__file="packages/badge/src/main.vue";var ih=nh.exports;ih.install=function(e){e.component(ih.name,ih)};var rh=ih,oh=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-card",class:e.shadow?"is-"+e.shadow+"-shadow":"is-always-shadow"},[e.$slots.header||e.header?n("div",{staticClass:"el-card__header"},[e._t("header",[e._v(e._s(e.header))])],2):e._e(),n("div",{staticClass:"el-card__body",style:e.bodyStyle},[e._t("default")],2)])},sh=[];oh._withStripped=!0;var ah={name:"ElCard",props:{header:{},bodyStyle:{},shadow:{type:String}}},ch=ah,lh=a(ch,oh,sh,!1,null,null,null);lh.options.__file="packages/card/src/main.vue";var uh=lh.exports;uh.install=function(e){e.component(uh.name,uh)};var dh=uh,hh=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-rate",attrs:{role:"slider","aria-valuenow":e.currentValue,"aria-valuetext":e.text,"aria-valuemin":"0","aria-valuemax":e.max,tabindex:"0"},on:{keydown:e.handleKey}},[e._l(e.max,(function(t,i){return n("span",{key:i,staticClass:"el-rate__item",style:{cursor:e.rateDisabled?"auto":"pointer"},on:{mousemove:function(n){e.setCurrentValue(t,n)},mouseleave:e.resetCurrentValue,click:function(n){e.selectValue(t)}}},[n("i",{staticClass:"el-rate__icon",class:[e.classes[t-1],{hover:e.hoverIndex===t}],style:e.getIconStyle(t)},[e.showDecimalIcon(t)?n("i",{staticClass:"el-rate__decimal",class:e.decimalIconClass,style:e.decimalStyle}):e._e()])])})),e.showText||e.showScore?n("span",{staticClass:"el-rate__text",style:{color:e.textColor}},[e._v(e._s(e.text))]):e._e()],2)},ph=[];hh._withStripped=!0;var fh={name:"ElRate",mixins:[I.a],inject:{elForm:{default:""}},data:function(){return{pointerAtLeftHalf:!0,currentValue:this.value,hoverIndex:-1}},props:{value:{type:Number,default:0},lowThreshold:{type:Number,default:2},highThreshold:{type:Number,default:4},max:{type:Number,default:5},colors:{type:[Array,Object],default:function(){return["#F7BA2A","#F7BA2A","#F7BA2A"]}},voidColor:{type:String,default:"#C6D1DE"},disabledVoidColor:{type:String,default:"#EFF2F7"},iconClasses:{type:[Array,Object],default:function(){return["el-icon-star-on","el-icon-star-on","el-icon-star-on"]}},voidIconClass:{type:String,default:"el-icon-star-off"},disabledVoidIconClass:{type:String,default:"el-icon-star-on"},disabled:{type:Boolean,default:!1},allowHalf:{type:Boolean,default:!1},showText:{type:Boolean,default:!1},showScore:{type:Boolean,default:!1},textColor:{type:String,default:"#1f2d3d"},texts:{type:Array,default:function(){return["极差","失望","一般","满意","惊喜"]}},scoreTemplate:{type:String,default:"{value}"}},computed:{text:function(){var e="";return this.showScore?e=this.scoreTemplate.replace(/\{\s*value\s*\}/,this.rateDisabled?this.value:this.currentValue):this.showText&&(e=this.texts[Math.ceil(this.currentValue)-1]),e},decimalStyle:function(){var e="";return this.rateDisabled?e=this.valueDecimal+"%":this.allowHalf&&(e="50%"),{color:this.activeColor,width:e}},valueDecimal:function(){return 100*this.value-100*Math.floor(this.value)},classMap:function(){var e;return Array.isArray(this.iconClasses)?(e={},e[this.lowThreshold]=this.iconClasses[0],e[this.highThreshold]={value:this.iconClasses[1],excluded:!0},e[this.max]=this.iconClasses[2],e):this.iconClasses},decimalIconClass:function(){return this.getValueFromMap(this.value,this.classMap)},voidClass:function(){return this.rateDisabled?this.disabledVoidIconClass:this.voidIconClass},activeClass:function(){return this.getValueFromMap(this.currentValue,this.classMap)},colorMap:function(){var e;return Array.isArray(this.colors)?(e={},e[this.lowThreshold]=this.colors[0],e[this.highThreshold]={value:this.colors[1],excluded:!0},e[this.max]=this.colors[2],e):this.colors},activeColor:function(){return this.getValueFromMap(this.currentValue,this.colorMap)},classes:function(){var e=[],t=0,n=this.currentValue;for(this.allowHalf&&this.currentValue!==Math.floor(this.currentValue)&&n--;t<n;t++)e.push(this.activeClass);for(;t<this.max;t++)e.push(this.voidClass);return e},rateDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},watch:{value:function(e){this.currentValue=e,this.pointerAtLeftHalf=this.value!==Math.floor(this.value)}},methods:{getMigratingConfig:function(){return{props:{"text-template":"text-template is renamed to score-template."}}},getValueFromMap:function(e,t){var n=Object.keys(t).filter((function(n){var i=t[n],r=!!Object(Hd["isObject"])(i)&&i.excluded;return r?e<n:e<=n})).sort((function(e,t){return e-t})),i=t[n[0]];return Object(Hd["isObject"])(i)?i.value:i||""},showDecimalIcon:function(e){var t=this.rateDisabled&&this.valueDecimal>0&&e-1<this.value&&e>this.value,n=this.allowHalf&&this.pointerAtLeftHalf&&e-.5<=this.currentValue&&e>this.currentValue;return t||n},getIconStyle:function(e){var t=this.rateDisabled?this.disabledVoidColor:this.voidColor;return{color:e<=this.currentValue?this.activeColor:t}},selectValue:function(e){this.rateDisabled||(this.allowHalf&&this.pointerAtLeftHalf?(this.$emit("input",this.currentValue),this.$emit("change",this.currentValue)):(this.$emit("input",e),this.$emit("change",e)))},handleKey:function(e){if(!this.rateDisabled){var t=this.currentValue,n=e.keyCode;38===n||39===n?(this.allowHalf?t+=.5:t+=1,e.stopPropagation(),e.preventDefault()):37!==n&&40!==n||(this.allowHalf?t-=.5:t-=1,e.stopPropagation(),e.preventDefault()),t=t<0?0:t,t=t>this.max?this.max:t,this.$emit("input",t),this.$emit("change",t)}},setCurrentValue:function(e,t){if(!this.rateDisabled){if(this.allowHalf){var n=t.target;Object(Be["hasClass"])(n,"el-rate__item")&&(n=n.querySelector(".el-rate__icon")),Object(Be["hasClass"])(n,"el-rate__decimal")&&(n=n.parentNode),this.pointerAtLeftHalf=2*t.offsetX<=n.clientWidth,this.currentValue=this.pointerAtLeftHalf?e-.5:e}else this.currentValue=e;this.hoverIndex=e}},resetCurrentValue:function(){this.rateDisabled||(this.allowHalf&&(this.pointerAtLeftHalf=this.value!==Math.floor(this.value)),this.currentValue=this.value,this.hoverIndex=-1)}},created:function(){this.value||this.$emit("input",0)}},gh=fh,mh=a(gh,hh,ph,!1,null,null,null);mh.options.__file="packages/rate/src/main.vue";var _h=mh.exports;_h.install=function(e){e.component(_h.name,_h)};var vh=_h,yh=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-steps",class:[!e.simple&&"el-steps--"+e.direction,e.simple&&"el-steps--simple"]},[e._t("default")],2)},Ch=[];yh._withStripped=!0;var Eh={name:"ElSteps",mixins:[I.a],props:{space:[Number,String],active:Number,direction:{type:String,default:"horizontal"},alignCenter:Boolean,simple:Boolean,finishStatus:{type:String,default:"finish"},processStatus:{type:String,default:"process"}},data:function(){return{steps:[],stepOffset:0}},methods:{getMigratingConfig:function(){return{props:{center:"center is removed."}}}},watch:{active:function(e,t){this.$emit("change",e,t)},steps:function(e){e.forEach((function(e,t){e.index=t}))}}},bh=Eh,Th=a(bh,yh,Ch,!1,null,null,null);Th.options.__file="packages/steps/src/steps.vue";var Sh=Th.exports;Sh.install=function(e){e.component(Sh.name,Sh)};var Rh=Sh,Ih=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-step",class:[!e.isSimple&&"is-"+e.$parent.direction,e.isSimple&&"is-simple",e.isLast&&!e.space&&!e.isCenter&&"is-flex",e.isCenter&&!e.isVertical&&!e.isSimple&&"is-center"],style:e.style},[n("div",{staticClass:"el-step__head",class:"is-"+e.currentStatus},[n("div",{staticClass:"el-step__line",style:e.isLast?"":{marginRight:e.$parent.stepOffset+"px"}},[n("i",{staticClass:"el-step__line-inner",style:e.lineStyle})]),n("div",{staticClass:"el-step__icon",class:"is-"+(e.icon?"icon":"text")},["success"!==e.currentStatus&&"error"!==e.currentStatus?e._t("icon",[e.icon?n("i",{staticClass:"el-step__icon-inner",class:[e.icon]}):e._e(),e.icon||e.isSimple?e._e():n("div",{staticClass:"el-step__icon-inner"},[e._v(e._s(e.index+1))])]):n("i",{staticClass:"el-step__icon-inner is-status",class:["el-icon-"+("success"===e.currentStatus?"check":"close")]})],2)]),n("div",{staticClass:"el-step__main"},[n("div",{ref:"title",staticClass:"el-step__title",class:["is-"+e.currentStatus]},[e._t("title",[e._v(e._s(e.title))])],2),e.isSimple?n("div",{staticClass:"el-step__arrow"}):n("div",{staticClass:"el-step__description",class:["is-"+e.currentStatus]},[e._t("description",[e._v(e._s(e.description))])],2)])])},wh=[];Ih._withStripped=!0;var Oh={name:"ElStep",props:{title:String,icon:String,description:String,status:String},data:function(){return{index:-1,lineStyle:{},internalStatus:""}},beforeCreate:function(){this.$parent.steps.push(this)},beforeDestroy:function(){var e=this.$parent.steps,t=e.indexOf(this);t>=0&&e.splice(t,1)},computed:{currentStatus:function(){return this.status||this.internalStatus},prevStatus:function(){var e=this.$parent.steps[this.index-1];return e?e.currentStatus:"wait"},isCenter:function(){return this.$parent.alignCenter},isVertical:function(){return"vertical"===this.$parent.direction},isSimple:function(){return this.$parent.simple},isLast:function(){var e=this.$parent;return e.steps[e.steps.length-1]===this},stepsCount:function(){return this.$parent.steps.length},space:function(){var e=this.isSimple,t=this.$parent.space;return e?"":t},style:function(){var e={},t=this.$parent,n=t.steps.length,i="number"===typeof this.space?this.space+"px":this.space?this.space:100/(n-(this.isCenter?0:1))+"%";return e.flexBasis=i,this.isVertical||(this.isLast?e.maxWidth=100/this.stepsCount+"%":e.marginRight=-this.$parent.stepOffset+"px"),e}},methods:{updateStatus:function(e){var t=this.$parent.$children[this.index-1];e>this.index?this.internalStatus=this.$parent.finishStatus:e===this.index&&"error"!==this.prevStatus?this.internalStatus=this.$parent.processStatus:this.internalStatus="wait",t&&t.calcProgress(this.internalStatus)},calcProgress:function(e){var t=100,n={};n.transitionDelay=150*this.index+"ms",e===this.$parent.processStatus?(this.currentStatus,t=0):"wait"===e&&(t=0,n.transitionDelay=-150*this.index+"ms"),n.borderWidth=t&&!this.isSimple?"1px":0,"vertical"===this.$parent.direction?n.height=t+"%":n.width=t+"%",this.lineStyle=n}},mounted:function(){var e=this,t=this.$watch("index",(function(n){e.$watch("$parent.active",e.updateStatus,{immediate:!0}),e.$watch("$parent.processStatus",(function(){var t=e.$parent.active;e.updateStatus(t)}),{immediate:!0}),t()}))}},kh=Oh,Mh=a(kh,Ih,wh,!1,null,null,null);Mh.options.__file="packages/steps/src/step.vue";var xh=Mh.exports;xh.install=function(e){e.component(xh.name,xh)};var Ph=xh,Ah=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.carouselClasses,on:{mouseenter:function(t){return t.stopPropagation(),e.handleMouseEnter(t)},mouseleave:function(t){return t.stopPropagation(),e.handleMouseLeave(t)}}},[n("div",{staticClass:"el-carousel__container",style:{height:e.height}},[e.arrowDisplay?n("transition",{attrs:{name:"carousel-arrow-left"}},[n("button",{directives:[{name:"show",rawName:"v-show",value:("always"===e.arrow||e.hover)&&(e.loop||e.activeIndex>0),expression:"(arrow === 'always' || hover) && (loop || activeIndex > 0)"}],staticClass:"el-carousel__arrow el-carousel__arrow--left",attrs:{type:"button"},on:{mouseenter:function(t){e.handleButtonEnter("left")},mouseleave:e.handleButtonLeave,click:function(t){t.stopPropagation(),e.throttledArrowClick(e.activeIndex-1)}}},[n("i",{staticClass:"el-icon-arrow-left"})])]):e._e(),e.arrowDisplay?n("transition",{attrs:{name:"carousel-arrow-right"}},[n("button",{directives:[{name:"show",rawName:"v-show",value:("always"===e.arrow||e.hover)&&(e.loop||e.activeIndex<e.items.length-1),expression:"(arrow === 'always' || hover) && (loop || activeIndex < items.length - 1)"}],staticClass:"el-carousel__arrow el-carousel__arrow--right",attrs:{type:"button"},on:{mouseenter:function(t){e.handleButtonEnter("right")},mouseleave:e.handleButtonLeave,click:function(t){t.stopPropagation(),e.throttledArrowClick(e.activeIndex+1)}}},[n("i",{staticClass:"el-icon-arrow-right"})])]):e._e(),e._t("default")],2),"none"!==e.indicatorPosition?n("ul",{class:e.indicatorsClasses},e._l(e.items,(function(t,i){return n("li",{key:i,class:["el-carousel__indicator","el-carousel__indicator--"+e.direction,{"is-active":i===e.activeIndex}],on:{mouseenter:function(t){e.throttledIndicatorHover(i)},click:function(t){t.stopPropagation(),e.handleIndicatorClick(i)}}},[n("button",{staticClass:"el-carousel__button"},[e.hasLabel?n("span",[e._v(e._s(t.label))]):e._e()])])})),0):e._e()])},Dh=[];Ah._withStripped=!0;var Nh=n(25),Lh=n.n(Nh),Uh={name:"ElCarousel",props:{initialIndex:{type:Number,default:0},height:String,trigger:{type:String,default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:String,indicator:{type:Boolean,default:!0},arrow:{type:String,default:"hover"},type:String,loop:{type:Boolean,default:!0},direction:{type:String,default:"horizontal",validator:function(e){return-1!==["horizontal","vertical"].indexOf(e)}}},data:function(){return{items:[],activeIndex:-1,containerWidth:0,timer:null,hover:!1}},computed:{arrowDisplay:function(){return"never"!==this.arrow&&"vertical"!==this.direction},hasLabel:function(){return this.items.some((function(e){return e.label.toString().length>0}))},carouselClasses:function(){var e=["el-carousel","el-carousel--"+this.direction];return"card"===this.type&&e.push("el-carousel--card"),e},indicatorsClasses:function(){var e=["el-carousel__indicators","el-carousel__indicators--"+this.direction];return this.hasLabel&&e.push("el-carousel__indicators--labels"),"outside"!==this.indicatorPosition&&"card"!==this.type||e.push("el-carousel__indicators--outside"),e}},watch:{items:function(e){e.length>0&&this.setActiveItem(this.initialIndex)},activeIndex:function(e,t){this.resetItemPosition(t),t>-1&&this.$emit("change",e,t)},autoplay:function(e){e?this.startTimer():this.pauseTimer()},loop:function(){this.setActiveItem(this.activeIndex)},interval:function(){this.pauseTimer(),this.startTimer()}},methods:{handleMouseEnter:function(){this.hover=!0,this.pauseTimer()},handleMouseLeave:function(){this.hover=!1,this.startTimer()},itemInStage:function(e,t){var n=this.items.length;return t===n-1&&e.inStage&&this.items[0].active||e.inStage&&this.items[t+1]&&this.items[t+1].active?"left":!!(0===t&&e.inStage&&this.items[n-1].active||e.inStage&&this.items[t-1]&&this.items[t-1].active)&&"right"},handleButtonEnter:function(e){var t=this;"vertical"!==this.direction&&this.items.forEach((function(n,i){e===t.itemInStage(n,i)&&(n.hover=!0)}))},handleButtonLeave:function(){"vertical"!==this.direction&&this.items.forEach((function(e){e.hover=!1}))},updateItems:function(){this.items=this.$children.filter((function(e){return"ElCarouselItem"===e.$options.name}))},resetItemPosition:function(e){var t=this;this.items.forEach((function(n,i){n.translateItem(i,t.activeIndex,e)}))},playSlides:function(){this.activeIndex<this.items.length-1?this.activeIndex++:this.loop&&(this.activeIndex=0)},pauseTimer:function(){this.timer&&(clearInterval(this.timer),this.timer=null)},startTimer:function(){this.interval<=0||!this.autoplay||this.timer||(this.timer=setInterval(this.playSlides,this.interval))},resetTimer:function(){this.pauseTimer(),this.startTimer()},setActiveItem:function(e){if("string"===typeof e){var t=this.items.filter((function(t){return t.name===e}));t.length>0&&(e=this.items.indexOf(t[0]))}if(e=Number(e),isNaN(e)||e!==Math.floor(e))console.warn("[Element Warn][Carousel]index must be an integer.");else{var n=this.items.length,i=this.activeIndex;this.activeIndex=e<0?this.loop?n-1:0:e>=n?this.loop?0:n-1:e,i===this.activeIndex&&this.resetItemPosition(i),this.resetTimer()}},prev:function(){this.setActiveItem(this.activeIndex-1)},next:function(){this.setActiveItem(this.activeIndex+1)},handleIndicatorClick:function(e){this.activeIndex=e},handleIndicatorHover:function(e){"hover"===this.trigger&&e!==this.activeIndex&&(this.activeIndex=e)}},created:function(){var e=this;this.throttledArrowClick=Lh()(300,!0,(function(t){e.setActiveItem(t)})),this.throttledIndicatorHover=Lh()(300,(function(t){e.handleIndicatorHover(t)}))},mounted:function(){var e=this;this.updateItems(),this.$nextTick((function(){Object(ei["addResizeListener"])(e.$el,e.resetItemPosition),e.initialIndex<e.items.length&&e.initialIndex>=0&&(e.activeIndex=e.initialIndex),e.startTimer()}))},beforeDestroy:function(){this.$el&&Object(ei["removeResizeListener"])(this.$el,this.resetItemPosition),this.pauseTimer()}},Bh=Uh,Vh=a(Bh,Ah,Dh,!1,null,null,null);Vh.options.__file="packages/carousel/src/main.vue";var jh=Vh.exports;jh.install=function(e){e.component(jh.name,jh)};var Fh=jh,$h={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}};function Hh(e){var t=e.move,n=e.size,i=e.bar,r={},o="translate"+i.axis+"("+t+"%)";return r[i.size]=n,r.transform=o,r.msTransform=o,r.webkitTransform=o,r}var Kh={name:"Bar",props:{vertical:Boolean,size:String,move:Number},computed:{bar:function(){return $h[this.vertical?"vertical":"horizontal"]},wrap:function(){return this.$parent.wrap}},render:function(e){var t=this.size,n=this.move,i=this.bar;return e("div",{class:["el-scrollbar__bar","is-"+i.key],on:{mousedown:this.clickTrackHandler}},[e("div",{ref:"thumb",class:"el-scrollbar__thumb",on:{mousedown:this.clickThumbHandler},style:Hh({size:t,move:n,bar:i})})])},methods:{clickThumbHandler:function(e){e.ctrlKey||2===e.button||(this.startDrag(e),this[this.bar.axis]=e.currentTarget[this.bar.offset]-(e[this.bar.client]-e.currentTarget.getBoundingClientRect()[this.bar.direction]))},clickTrackHandler:function(e){var t=Math.abs(e.target.getBoundingClientRect()[this.bar.direction]-e[this.bar.client]),n=this.$refs.thumb[this.bar.offset]/2,i=100*(t-n)/this.$el[this.bar.offset];this.wrap[this.bar.scroll]=i*this.wrap[this.bar.scrollSize]/100},startDrag:function(e){e.stopImmediatePropagation(),this.cursorDown=!0,Object(Be["on"])(document,"mousemove",this.mouseMoveDocumentHandler),Object(Be["on"])(document,"mouseup",this.mouseUpDocumentHandler),document.onselectstart=function(){return!1}},mouseMoveDocumentHandler:function(e){if(!1!==this.cursorDown){var t=this[this.bar.axis];if(t){var n=-1*(this.$el.getBoundingClientRect()[this.bar.direction]-e[this.bar.client]),i=this.$refs.thumb[this.bar.offset]-t,r=100*(n-i)/this.$el[this.bar.offset];this.wrap[this.bar.scroll]=r*this.wrap[this.bar.scrollSize]/100}}},mouseUpDocumentHandler:function(e){this.cursorDown=!1,this[this.bar.axis]=0,Object(Be["off"])(document,"mousemove",this.mouseMoveDocumentHandler),document.onselectstart=null}},destroyed:function(){Object(Be["off"])(document,"mouseup",this.mouseUpDocumentHandler)}},Wh={name:"ElScrollbar",components:{Bar:Kh},props:{native:Boolean,wrapStyle:{},wrapClass:{},viewClass:{},viewStyle:{},noresize:Boolean,tag:{type:String,default:"div"}},data:function(){return{sizeWidth:"0",sizeHeight:"0",moveX:0,moveY:0}},computed:{wrap:function(){return this.$refs.wrap}},render:function(e){var t=_r()(),n=this.wrapStyle;if(t){var i="-"+t+"px",r="margin-bottom: "+i+"; margin-right: "+i+";";Array.isArray(this.wrapStyle)?(n=Object(v["toObject"])(this.wrapStyle),n.marginRight=n.marginBottom=i):"string"===typeof this.wrapStyle?n+=r:n=r}var o=e(this.tag,{class:["el-scrollbar__view",this.viewClass],style:this.viewStyle,ref:"resize"},this.$slots.default),s=e("div",{ref:"wrap",style:n,on:{scroll:this.handleScroll},class:[this.wrapClass,"el-scrollbar__wrap",t?"":"el-scrollbar__wrap--hidden-default"]},[[o]]),a=void 0;return a=this.native?[e("div",{ref:"wrap",class:[this.wrapClass,"el-scrollbar__wrap"],style:n},[[o]])]:[s,e(Kh,{attrs:{move:this.moveX,size:this.sizeWidth}}),e(Kh,{attrs:{vertical:!0,move:this.moveY,size:this.sizeHeight}})],e("div",{class:"el-scrollbar"},a)},methods:{handleScroll:function(){var e=this.wrap;this.moveY=100*e.scrollTop/e.clientHeight,this.moveX=100*e.scrollLeft/e.clientWidth},update:function(){var e=void 0,t=void 0,n=this.wrap;n&&(e=100*n.clientHeight/n.scrollHeight,t=100*n.clientWidth/n.scrollWidth,this.sizeHeight=e<100?e+"%":"",this.sizeWidth=t<100?t+"%":"")}},mounted:function(){this.native||(this.$nextTick(this.update),!this.noresize&&Object(ei["addResizeListener"])(this.$refs.resize,this.update))},beforeDestroy:function(){this.native||!this.noresize&&Object(ei["removeResizeListener"])(this.$refs.resize,this.update)},install:function(e){e.component(Wh.name,Wh)}},qh=Wh,Gh=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.ready,expression:"ready"}],staticClass:"el-carousel__item",class:{"is-active":e.active,"el-carousel__item--card":"card"===e.$parent.type,"is-in-stage":e.inStage,"is-hover":e.hover,"is-animating":e.animating},style:e.itemStyle,on:{click:e.handleItemClick}},["card"===e.$parent.type?n("div",{directives:[{name:"show",rawName:"v-show",value:!e.active,expression:"!active"}],staticClass:"el-carousel__mask"}):e._e(),e._t("default")],2)},zh=[];Gh._withStripped=!0;var Yh=.83,Jh={name:"ElCarouselItem",props:{name:String,label:{type:[String,Number],default:""}},data:function(){return{hover:!1,translate:0,scale:1,active:!1,ready:!1,inStage:!1,animating:!1}},methods:{processIndex:function(e,t,n){return 0===t&&e===n-1?-1:t===n-1&&0===e?n:e<t-1&&t-e>=n/2?n+1:e>t+1&&e-t>=n/2?-2:e},calcCardTranslate:function(e,t){var n=this.$parent.$el.offsetWidth;return this.inStage?n*((2-Yh)*(e-t)+1)/4:e<t?-(1+Yh)*n/4:(3+Yh)*n/4},calcTranslate:function(e,t,n){var i=this.$parent.$el[n?"offsetHeight":"offsetWidth"];return i*(e-t)},translateItem:function(e,t,n){var i=this.$parent.type,r=this.parentDirection,o=this.$parent.items.length;if("card"!==i&&void 0!==n&&(this.animating=e===t||e===n),e!==t&&o>2&&this.$parent.loop&&(e=this.processIndex(e,t,o)),"card"===i)"vertical"===r&&console.warn("[Element Warn][Carousel]vertical direction is not supported in card mode"),this.inStage=Math.round(Math.abs(e-t))<=1,this.active=e===t,this.translate=this.calcCardTranslate(e,t),this.scale=this.active?1:Yh;else{this.active=e===t;var s="vertical"===r;this.translate=this.calcTranslate(e,t,s),this.scale=1}this.ready=!0},handleItemClick:function(){var e=this.$parent;if(e&&"card"===e.type){var t=e.items.indexOf(this);e.setActiveItem(t)}}},computed:{parentDirection:function(){return this.$parent.direction},itemStyle:function(){var e="vertical"===this.parentDirection?"translateY":"translateX",t=e+"("+this.translate+"px) scale("+this.scale+")",n={transform:t};return Object(v["autoprefixer"])(n)}},created:function(){this.$parent&&this.$parent.updateItems()},destroyed:function(){this.$parent&&this.$parent.updateItems()}},Xh=Jh,Qh=a(Xh,Gh,zh,!1,null,null,null);Qh.options.__file="packages/carousel/src/item.vue";var Zh=Qh.exports;Zh.install=function(e){e.component(Zh.name,Zh)};var ep=Zh,tp=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-collapse",attrs:{role:"tablist","aria-multiselectable":"true"}},[e._t("default")],2)},np=[];tp._withStripped=!0;var ip={name:"ElCollapse",componentName:"ElCollapse",props:{accordion:Boolean,value:{type:[Array,String,Number],default:function(){return[]}}},data:function(){return{activeNames:[].concat(this.value)}},provide:function(){return{collapse:this}},watch:{value:function(e){this.activeNames=[].concat(e)}},methods:{setActiveNames:function(e){e=[].concat(e);var t=this.accordion?e[0]:e;this.activeNames=e,this.$emit("input",t),this.$emit("change",t)},handleItemClick:function(e){if(this.accordion)this.setActiveNames(!this.activeNames[0]&&0!==this.activeNames[0]||this.activeNames[0]!==e.name?e.name:"");else{var t=this.activeNames.slice(0),n=t.indexOf(e.name);n>-1?t.splice(n,1):t.push(e.name),this.setActiveNames(t)}}},created:function(){this.$on("item-click",this.handleItemClick)}},rp=ip,op=a(rp,tp,np,!1,null,null,null);op.options.__file="packages/collapse/src/collapse.vue";var sp=op.exports;sp.install=function(e){e.component(sp.name,sp)};var ap=sp,cp=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-collapse-item",class:{"is-active":e.isActive,"is-disabled":e.disabled}},[n("div",{attrs:{role:"tab","aria-expanded":e.isActive,"aria-controls":"el-collapse-content-"+e.id,"aria-describedby":"el-collapse-content-"+e.id}},[n("div",{staticClass:"el-collapse-item__header",class:{focusing:e.focusing,"is-active":e.isActive},attrs:{role:"button",id:"el-collapse-head-"+e.id,tabindex:e.disabled?void 0:0},on:{click:e.handleHeaderClick,keyup:function(t){return!("button"in t)&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.stopPropagation(),e.handleEnterClick(t))},focus:e.handleFocus,blur:function(t){e.focusing=!1}}},[e._t("title",[e._v(e._s(e.title))]),n("i",{staticClass:"el-collapse-item__arrow el-icon-arrow-right",class:{"is-active":e.isActive}})],2)]),n("el-collapse-transition",[n("div",{directives:[{name:"show",rawName:"v-show",value:e.isActive,expression:"isActive"}],staticClass:"el-collapse-item__wrap",attrs:{role:"tabpanel","aria-hidden":!e.isActive,"aria-labelledby":"el-collapse-head-"+e.id,id:"el-collapse-content-"+e.id}},[n("div",{staticClass:"el-collapse-item__content"},[e._t("default")],2)])])],1)},lp=[];cp._withStripped=!0;var up={name:"ElCollapseItem",componentName:"ElCollapseItem",mixins:[O.a],components:{ElCollapseTransition:Ge.a},data:function(){return{contentWrapStyle:{height:"auto",display:"block"},contentHeight:0,focusing:!1,isClick:!1,id:Object(v["generateId"])()}},inject:["collapse"],props:{title:String,name:{type:[String,Number],default:function(){return this._uid}},disabled:Boolean},computed:{isActive:function(){return this.collapse.activeNames.indexOf(this.name)>-1}},methods:{handleFocus:function(){var e=this;setTimeout((function(){e.isClick?e.isClick=!1:e.focusing=!0}),50)},handleHeaderClick:function(){this.disabled||(this.dispatch("ElCollapse","item-click",this),this.focusing=!1,this.isClick=!0)},handleEnterClick:function(){this.dispatch("ElCollapse","item-click",this)}}},dp=up,hp=a(dp,cp,lp,!1,null,null,null);hp.options.__file="packages/collapse/src/collapse-item.vue";var pp=hp.exports;pp.install=function(e){e.component(pp.name,pp)};var fp=pp,gp=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:function(){return e.toggleDropDownVisible(!1)},expression:"() => toggleDropDownVisible(false)"}],ref:"reference",class:["el-cascader",e.realSize&&"el-cascader--"+e.realSize,{"is-disabled":e.isDisabled}],on:{mouseenter:function(t){e.inputHover=!0},mouseleave:function(t){e.inputHover=!1},click:function(){return e.toggleDropDownVisible(!e.readonly||void 0)},keydown:e.handleKeyDown}},[n("el-input",{ref:"input",class:{"is-focus":e.dropDownVisible},attrs:{size:e.realSize,placeholder:e.placeholder,readonly:e.readonly,disabled:e.isDisabled,"validate-event":!1},on:{focus:e.handleFocus,blur:e.handleBlur,input:e.handleInput},model:{value:e.multiple?e.presentText:e.inputValue,callback:function(t){e.multiple?e.presentText:e.inputValue=t},expression:"multiple ? presentText : inputValue"}},[n("template",{slot:"suffix"},[e.clearBtnVisible?n("i",{key:"clear",staticClass:"el-input__icon el-icon-circle-close",on:{click:function(t){return t.stopPropagation(),e.handleClear(t)}}}):n("i",{key:"arrow-down",class:["el-input__icon","el-icon-arrow-down",e.dropDownVisible&&"is-reverse"],on:{click:function(t){t.stopPropagation(),e.toggleDropDownVisible()}}})])],2),e.multiple?n("div",{staticClass:"el-cascader__tags"},[e._l(e.presentTags,(function(t){return n("el-tag",{key:t.key,attrs:{type:"info",size:e.tagSize,hit:t.hitState,closable:t.closable,"disable-transitions":""},on:{close:function(n){e.deleteTag(t)}}},[n("span",[e._v(e._s(t.text))])])})),e.filterable&&!e.isDisabled?n("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.inputValue,expression:"inputValue",modifiers:{trim:!0}}],staticClass:"el-cascader__search-input",attrs:{type:"text",placeholder:e.presentTags.length?"":e.placeholder},domProps:{value:e.inputValue},on:{input:[function(t){t.target.composing||(e.inputValue=t.target.value.trim())},function(t){return e.handleInput(e.inputValue,t)}],click:function(t){t.stopPropagation(),e.toggleDropDownVisible(!0)},keydown:function(t){return!("button"in t)&&e._k(t.keyCode,"delete",[8,46],t.key,["Backspace","Delete","Del"])?null:e.handleDelete(t)},blur:function(t){e.$forceUpdate()}}}):e._e()],2):e._e(),n("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":e.handleDropdownLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.dropDownVisible,expression:"dropDownVisible"}],ref:"popper",class:["el-popper","el-cascader__dropdown",e.popperClass]},[n("el-cascader-panel",{directives:[{name:"show",rawName:"v-show",value:!e.filtering,expression:"!filtering"}],ref:"panel",attrs:{options:e.options,props:e.config,border:!1,"render-label":e.$scopedSlots.default},on:{"expand-change":e.handleExpandChange,close:function(t){e.toggleDropDownVisible(!1)}},model:{value:e.checkedValue,callback:function(t){e.checkedValue=t},expression:"checkedValue"}}),e.filterable?n("el-scrollbar",{directives:[{name:"show",rawName:"v-show",value:e.filtering,expression:"filtering"}],ref:"suggestionPanel",staticClass:"el-cascader__suggestion-panel",attrs:{tag:"ul","view-class":"el-cascader__suggestion-list"},nativeOn:{keydown:function(t){return e.handleSuggestionKeyDown(t)}}},[e.suggestions.length?e._l(e.suggestions,(function(t,i){return n("li",{key:t.uid,class:["el-cascader__suggestion-item",t.checked&&"is-checked"],attrs:{tabindex:-1},on:{click:function(t){e.handleSuggestionClick(i)}}},[n("span",[e._v(e._s(t.text))]),t.checked?n("i",{staticClass:"el-icon-check"}):e._e()])})):e._t("empty",[n("li",{staticClass:"el-cascader__empty-text"},[e._v(e._s(e.t("el.cascader.noMatch")))])])],2):e._e()],1)])],1)},mp=[];gp._withStripped=!0;var _p=n(42),vp=n.n(_p),yp=n(34),Cp=n.n(yp),Ep=Cp.a.keys,bp={expandTrigger:{newProp:"expandTrigger",type:String},changeOnSelect:{newProp:"checkStrictly",type:Boolean},hoverThreshold:{newProp:"hoverThreshold",type:Number}},Tp={props:{placement:{type:String,default:"bottom-start"},appendToBody:H.a.props.appendToBody,visibleArrow:{type:Boolean,default:!0},arrowOffset:H.a.props.arrowOffset,offset:H.a.props.offset,boundariesPadding:H.a.props.boundariesPadding,popperOptions:H.a.props.popperOptions},methods:H.a.methods,data:H.a.data,beforeDestroy:H.a.beforeDestroy},Sp={medium:36,small:32,mini:28},Rp={name:"ElCascader",directives:{Clickoutside:V.a},mixins:[Tp,O.a,_.a,I.a],inject:{elForm:{default:""},elFormItem:{default:""}},components:{ElInput:g.a,ElTag:Zn.a,ElScrollbar:W.a,ElCascaderPanel:vp.a},props:{value:{},options:Array,props:Object,size:String,placeholder:{type:String,default:function(){return Object(fa["t"])("el.cascader.placeholder")}},disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:Function,separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,debounce:{type:Number,default:300},beforeFilter:{type:Function,default:function(){return function(){}}},popperClass:String},data:function(){return{dropDownVisible:!1,checkedValue:this.value,inputHover:!1,inputValue:null,presentText:null,presentTags:[],checkedNodes:[],filtering:!1,suggestions:[],inputInitialHeight:0,pressDeleteCount:0}},computed:{realSize:function(){var e=(this.elFormItem||{}).elFormItemSize;return this.size||e||(this.$ELEMENT||{}).size},tagSize:function(){return["small","mini"].indexOf(this.realSize)>-1?"mini":"small"},isDisabled:function(){return this.disabled||(this.elForm||{}).disabled},config:function(){var e=this.props||{},t=this.$attrs;return Object.keys(bp).forEach((function(n){var i=bp[n],r=i.newProp,o=i.type,s=t[n]||t[Object(v["kebabCase"])(n)];Object(It["isDef"])(n)&&!Object(It["isDef"])(e[r])&&(o===Boolean&&""===s&&(s=!0),e[r]=s)})),e},multiple:function(){return this.config.multiple},leafOnly:function(){return!this.config.checkStrictly},readonly:function(){return!this.filterable||this.multiple},clearBtnVisible:function(){return!(!this.clearable||this.isDisabled||this.filtering||!this.inputHover)&&(this.multiple?!!this.checkedNodes.filter((function(e){return!e.isDisabled})).length:!!this.presentText)},panel:function(){return this.$refs.panel}},watch:{disabled:function(){this.computePresentContent()},value:function(e){Object(v["isEqual"])(e,this.checkedValue)||(this.checkedValue=e,this.computePresentContent())},checkedValue:function(e){var t=this.value,n=this.dropDownVisible,i=this.config,r=i.checkStrictly,o=i.multiple;Object(v["isEqual"])(e,t)&&!Object(Hd["isUndefined"])(t)||(this.computePresentContent(),o||r||!n||this.toggleDropDownVisible(!1),this.$emit("input",e),this.$emit("change",e),this.dispatch("ElFormItem","el.form.change",[e]))},options:{handler:function(){this.$nextTick(this.computePresentContent)},deep:!0},presentText:function(e){this.inputValue=e},presentTags:function(e,t){this.multiple&&(e.length||t.length)&&this.$nextTick(this.updateStyle)},filtering:function(e){this.$nextTick(this.updatePopper)}},mounted:function(){var e=this,t=this.$refs.input;t&&t.$el&&(this.inputInitialHeight=t.$el.offsetHeight||Sp[this.realSize]||40),this.isEmptyValue(this.value)||this.computePresentContent(),this.filterHandler=U()(this.debounce,(function(){var t=e.inputValue;if(t){var n=e.beforeFilter(t);n&&n.then?n.then(e.getSuggestions):!1!==n?e.getSuggestions():e.filtering=!1}else e.filtering=!1})),Object(ei["addResizeListener"])(this.$el,this.updateStyle)},beforeDestroy:function(){Object(ei["removeResizeListener"])(this.$el,this.updateStyle)},methods:{getMigratingConfig:function(){return{props:{"expand-trigger":"expand-trigger is removed, use `props.expandTrigger` instead.","change-on-select":"change-on-select is removed, use `props.checkStrictly` instead.","hover-threshold":"hover-threshold is removed, use `props.hoverThreshold` instead"},events:{"active-item-change":"active-item-change is renamed to expand-change"}}},toggleDropDownVisible:function(e){var t=this;if(!this.isDisabled){var n=this.dropDownVisible,i=this.$refs.input;e=Object(It["isDef"])(e)?e:!n,e!==n&&(this.dropDownVisible=e,e&&this.$nextTick((function(){t.updatePopper(),t.panel.scrollIntoView()})),i.$refs.input.setAttribute("aria-expanded",e),this.$emit("visible-change",e))}},handleDropdownLeave:function(){this.filtering=!1,this.inputValue=this.presentText,this.doDestroy()},handleKeyDown:function(e){switch(e.keyCode){case Ep.enter:this.toggleDropDownVisible();break;case Ep.down:this.toggleDropDownVisible(!0),this.focusFirstNode(),e.preventDefault();break;case Ep.esc:case Ep.tab:this.toggleDropDownVisible(!1);break}},handleFocus:function(e){this.$emit("focus",e)},handleBlur:function(e){this.$emit("blur",e)},handleInput:function(e,t){!this.dropDownVisible&&this.toggleDropDownVisible(!0),t&&t.isComposing||(e?this.filterHandler():this.filtering=!1)},handleClear:function(){this.presentText="",this.panel.clearCheckedNodes()},handleExpandChange:function(e){this.$nextTick(this.updatePopper.bind(this)),this.$emit("expand-change",e),this.$emit("active-item-change",e)},focusFirstNode:function(){var e=this;this.$nextTick((function(){var t=e.filtering,n=e.$refs,i=n.popper,r=n.suggestionPanel,o=null;if(t&&r)o=r.$el.querySelector(".el-cascader__suggestion-item");else{var s=i.querySelector(".el-cascader-menu");o=s.querySelector('.el-cascader-node[tabindex="-1"]')}o&&(o.focus(),!t&&o.click())}))},computePresentContent:function(){var e=this;this.$nextTick((function(){e.config.multiple?(e.computePresentTags(),e.presentText=e.presentTags.length?" ":null):e.computePresentText()}))},isEmptyValue:function(e){var t=this.multiple,n=this.panel.config.emitPath;return!(!t&&!n)&&Object(v["isEmpty"])(e)},computePresentText:function(){var e=this.checkedValue,t=this.config;if(!this.isEmptyValue(e)){var n=this.panel.getNodeByValue(e);if(n&&(t.checkStrictly||n.isLeaf))return void(this.presentText=n.getText(this.showAllLevels,this.separator))}this.presentText=null},computePresentTags:function(){var e=this.isDisabled,t=this.leafOnly,n=this.showAllLevels,i=this.separator,r=this.collapseTags,o=this.getCheckedNodes(t),s=[],a=function(t){return{node:t,key:t.uid,text:t.getText(n,i),hitState:!1,closable:!e&&!t.isDisabled}};if(o.length){var c=o[0],l=o.slice(1),u=l.length;s.push(a(c)),u&&(r?s.push({key:-1,text:"+ "+u,closable:!1}):l.forEach((function(e){return s.push(a(e))})))}this.checkedNodes=o,this.presentTags=s},getSuggestions:function(){var e=this,t=this.filterMethod;Object(Hd["isFunction"])(t)||(t=function(e,t){return e.text.includes(t)});var n=this.panel.getFlattedNodes(this.leafOnly).filter((function(n){return!n.isDisabled&&(n.text=n.getText(e.showAllLevels,e.separator)||"",t(n,e.inputValue))}));this.multiple?this.presentTags.forEach((function(e){e.hitState=!1})):n.forEach((function(t){t.checked=Object(v["isEqual"])(e.checkedValue,t.getValueByOption())})),this.filtering=!0,this.suggestions=n,this.$nextTick(this.updatePopper)},handleSuggestionKeyDown:function(e){var t=e.keyCode,n=e.target;switch(t){case Ep.enter:n.click();break;case Ep.up:var i=n.previousElementSibling;i&&i.focus();break;case Ep.down:var r=n.nextElementSibling;r&&r.focus();break;case Ep.esc:case Ep.tab:this.toggleDropDownVisible(!1);break}},handleDelete:function(){var e=this.inputValue,t=this.pressDeleteCount,n=this.presentTags,i=n.length-1,r=n[i];this.pressDeleteCount=e?0:t+1,r&&this.pressDeleteCount&&(r.hitState?this.deleteTag(r):r.hitState=!0)},handleSuggestionClick:function(e){var t=this.multiple,n=this.suggestions[e];if(t){var i=n.checked;n.doCheck(!i),this.panel.calculateMultiCheckedValue()}else this.checkedValue=n.getValueByOption(),this.toggleDropDownVisible(!1)},deleteTag:function(e){var t=this.checkedValue,n=e.node.getValueByOption(),i=t.find((function(e){return Object(v["isEqual"])(e,n)}));this.checkedValue=t.filter((function(e){return!Object(v["isEqual"])(e,n)})),this.$emit("remove-tag",i)},updateStyle:function(){var e=this.$el,t=this.inputInitialHeight;if(!this.$isServer&&e){var n=this.$refs.suggestionPanel,i=e.querySelector(".el-input__inner");if(i){var r=e.querySelector(".el-cascader__tags"),o=null;if(n&&(o=n.$el)){var s=o.querySelector(".el-cascader__suggestion-list");s.style.minWidth=i.offsetWidth+"px"}if(r){var a=Math.round(r.getBoundingClientRect().height),c=Math.max(a+6,t)+"px";i.style.height=c,this.dropDownVisible&&this.updatePopper()}}}},getCheckedNodes:function(e){return this.panel.getCheckedNodes(e)}}},Ip=Rp,wp=a(Ip,gp,mp,!1,null,null,null);wp.options.__file="packages/cascader/src/cascader.vue";var Op=wp.exports;Op.install=function(e){e.component(Op.name,Op)};var kp=Op,Mp=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.hide,expression:"hide"}],class:["el-color-picker",e.colorDisabled?"is-disabled":"",e.colorSize?"el-color-picker--"+e.colorSize:""]},[e.colorDisabled?n("div",{staticClass:"el-color-picker__mask"}):e._e(),n("div",{staticClass:"el-color-picker__trigger",on:{click:e.handleTrigger}},[n("span",{staticClass:"el-color-picker__color",class:{"is-alpha":e.showAlpha}},[n("span",{staticClass:"el-color-picker__color-inner",style:{backgroundColor:e.displayedColor}}),e.value||e.showPanelColor?e._e():n("span",{staticClass:"el-color-picker__empty el-icon-close"})]),n("span",{directives:[{name:"show",rawName:"v-show",value:e.value||e.showPanelColor,expression:"value || showPanelColor"}],staticClass:"el-color-picker__icon el-icon-arrow-down"})]),n("picker-dropdown",{ref:"dropdown",class:["el-color-picker__panel",e.popperClass||""],attrs:{color:e.color,"show-alpha":e.showAlpha,predefine:e.predefine},on:{pick:e.confirmValue,clear:e.clearValue},model:{value:e.showPicker,callback:function(t){e.showPicker=t},expression:"showPicker"}})],1)},xp=[];Mp._withStripped=!0;var Pp="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function Ap(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Dp=function(e,t,n){return[e,t*n/((e=(2-t)*n)<1?e:2-e)||0,e/2]},Np=function(e){return"string"===typeof e&&-1!==e.indexOf(".")&&1===parseFloat(e)},Lp=function(e){return"string"===typeof e&&-1!==e.indexOf("%")},Up=function(e,t){Np(e)&&(e="100%");var n=Lp(e);return e=Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)},Bp={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},Vp=function(e){var t=e.r,n=e.g,i=e.b,r=function(e){e=Math.min(Math.round(e),255);var t=Math.floor(e/16),n=e%16;return""+(Bp[t]||t)+(Bp[n]||n)};return isNaN(t)||isNaN(n)||isNaN(i)?"":"#"+r(t)+r(n)+r(i)},jp={A:10,B:11,C:12,D:13,E:14,F:15},Fp=function(e){return 2===e.length?16*(jp[e[0].toUpperCase()]||+e[0])+(jp[e[1].toUpperCase()]||+e[1]):jp[e[1].toUpperCase()]||+e[1]},$p=function(e,t,n){t/=100,n/=100;var i=t,r=Math.max(n,.01),o=void 0,s=void 0;return n*=2,t*=n<=1?n:2-n,i*=r<=1?r:2-r,s=(n+t)/2,o=0===n?2*i/(r+i):2*t/(n+t),{h:e,s:100*o,v:100*s}},Hp=function(e,t,n){e=Up(e,255),t=Up(t,255),n=Up(n,255);var i=Math.max(e,t,n),r=Math.min(e,t,n),o=void 0,s=void 0,a=i,c=i-r;if(s=0===i?0:c/i,i===r)o=0;else{switch(i){case e:o=(t-n)/c+(t<n?6:0);break;case t:o=(n-e)/c+2;break;case n:o=(e-t)/c+4;break}o/=6}return{h:360*o,s:100*s,v:100*a}},Kp=function(e,t,n){e=6*Up(e,360),t=Up(t,100),n=Up(n,100);var i=Math.floor(e),r=e-i,o=n*(1-t),s=n*(1-r*t),a=n*(1-(1-r)*t),c=i%6,l=[n,s,o,o,a,n][c],u=[a,n,n,s,o,o][c],d=[o,o,a,n,n,s][c];return{r:Math.round(255*l),g:Math.round(255*u),b:Math.round(255*d)}},Wp=function(){function e(t){for(var n in Ap(this,e),this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="",t=t||{},t)t.hasOwnProperty(n)&&(this[n]=t[n]);this.doOnChange()}return e.prototype.set=function(e,t){if(1!==arguments.length||"object"!==("undefined"===typeof e?"undefined":Pp(e)))this["_"+e]=t,this.doOnChange();else for(var n in e)e.hasOwnProperty(n)&&this.set(n,e[n])},e.prototype.get=function(e){return this["_"+e]},e.prototype.toRgb=function(){return Kp(this._hue,this._saturation,this._value)},e.prototype.fromString=function(e){var t=this;if(!e)return this._hue=0,this._saturation=100,this._value=100,void this.doOnChange();var n=function(e,n,i){t._hue=Math.max(0,Math.min(360,e)),t._saturation=Math.max(0,Math.min(100,n)),t._value=Math.max(0,Math.min(100,i)),t.doOnChange()};if(-1!==e.indexOf("hsl")){var i=e.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter((function(e){return""!==e})).map((function(e,t){return t>2?parseFloat(e):parseInt(e,10)}));if(4===i.length?this._alpha=Math.floor(100*parseFloat(i[3])):3===i.length&&(this._alpha=100),i.length>=3){var r=$p(i[0],i[1],i[2]),o=r.h,s=r.s,a=r.v;n(o,s,a)}}else if(-1!==e.indexOf("hsv")){var c=e.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter((function(e){return""!==e})).map((function(e,t){return t>2?parseFloat(e):parseInt(e,10)}));4===c.length?this._alpha=Math.floor(100*parseFloat(c[3])):3===c.length&&(this._alpha=100),c.length>=3&&n(c[0],c[1],c[2])}else if(-1!==e.indexOf("rgb")){var l=e.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter((function(e){return""!==e})).map((function(e,t){return t>2?parseFloat(e):parseInt(e,10)}));if(4===l.length?this._alpha=Math.floor(100*parseFloat(l[3])):3===l.length&&(this._alpha=100),l.length>=3){var u=Hp(l[0],l[1],l[2]),d=u.h,h=u.s,p=u.v;n(d,h,p)}}else if(-1!==e.indexOf("#")){var f=e.replace("#","").trim();if(!/^(?:[0-9a-fA-F]{3}){1,2}|[0-9a-fA-F]{8}$/.test(f))return;var g=void 0,m=void 0,_=void 0;3===f.length?(g=Fp(f[0]+f[0]),m=Fp(f[1]+f[1]),_=Fp(f[2]+f[2])):6!==f.length&&8!==f.length||(g=Fp(f.substring(0,2)),m=Fp(f.substring(2,4)),_=Fp(f.substring(4,6))),8===f.length?this._alpha=Math.floor(Fp(f.substring(6))/255*100):3!==f.length&&6!==f.length||(this._alpha=100);var v=Hp(g,m,_),y=v.h,C=v.s,E=v.v;n(y,C,E)}},e.prototype.compare=function(e){return Math.abs(e._hue-this._hue)<2&&Math.abs(e._saturation-this._saturation)<1&&Math.abs(e._value-this._value)<1&&Math.abs(e._alpha-this._alpha)<1},e.prototype.doOnChange=function(){var e=this._hue,t=this._saturation,n=this._value,i=this._alpha,r=this.format;if(this.enableAlpha)switch(r){case"hsl":var o=Dp(e,t/100,n/100);this.value="hsla("+e+", "+Math.round(100*o[1])+"%, "+Math.round(100*o[2])+"%, "+i/100+")";break;case"hsv":this.value="hsva("+e+", "+Math.round(t)+"%, "+Math.round(n)+"%, "+i/100+")";break;default:var s=Kp(e,t,n),a=s.r,c=s.g,l=s.b;this.value="rgba("+a+", "+c+", "+l+", "+i/100+")"}else switch(r){case"hsl":var u=Dp(e,t/100,n/100);this.value="hsl("+e+", "+Math.round(100*u[1])+"%, "+Math.round(100*u[2])+"%)";break;case"hsv":this.value="hsv("+e+", "+Math.round(t)+"%, "+Math.round(n)+"%)";break;case"rgb":var d=Kp(e,t,n),h=d.r,p=d.g,f=d.b;this.value="rgb("+h+", "+p+", "+f+")";break;default:this.value=Vp(Kp(e,t,n))}},e}(),qp=Wp,Gp=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":e.doDestroy}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.showPopper,expression:"showPopper"}],staticClass:"el-color-dropdown"},[n("div",{staticClass:"el-color-dropdown__main-wrapper"},[n("hue-slider",{ref:"hue",staticStyle:{float:"right"},attrs:{color:e.color,vertical:""}}),n("sv-panel",{ref:"sl",attrs:{color:e.color}})],1),e.showAlpha?n("alpha-slider",{ref:"alpha",attrs:{color:e.color}}):e._e(),e.predefine?n("predefine",{attrs:{color:e.color,colors:e.predefine}}):e._e(),n("div",{staticClass:"el-color-dropdown__btns"},[n("span",{staticClass:"el-color-dropdown__value"},[n("el-input",{attrs:{"validate-event":!1,size:"mini"},on:{blur:e.handleConfirm},nativeOn:{keyup:function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleConfirm(t)}},model:{value:e.customInput,callback:function(t){e.customInput=t},expression:"customInput"}})],1),n("el-button",{staticClass:"el-color-dropdown__link-btn",attrs:{size:"mini",type:"text"},on:{click:function(t){e.$emit("clear")}}},[e._v("\n        "+e._s(e.t("el.colorpicker.clear"))+"\n      ")]),n("el-button",{staticClass:"el-color-dropdown__btn",attrs:{plain:"",size:"mini"},on:{click:e.confirmValue}},[e._v("\n        "+e._s(e.t("el.colorpicker.confirm"))+"\n      ")])],1)],1)])},zp=[];Gp._withStripped=!0;var Yp=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-color-svpanel",style:{backgroundColor:e.background}},[n("div",{staticClass:"el-color-svpanel__white"}),n("div",{staticClass:"el-color-svpanel__black"}),n("div",{staticClass:"el-color-svpanel__cursor",style:{top:e.cursorTop+"px",left:e.cursorLeft+"px"}},[n("div")])])},Jp=[];Yp._withStripped=!0;var Xp=!1,Qp=function(e,t){if(!$i.a.prototype.$isServer){var n=function(e){t.drag&&t.drag(e)},i=function e(i){document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",e),document.onselectstart=null,document.ondragstart=null,Xp=!1,t.end&&t.end(i)};e.addEventListener("mousedown",(function(e){Xp||(document.onselectstart=function(){return!1},document.ondragstart=function(){return!1},document.addEventListener("mousemove",n),document.addEventListener("mouseup",i),Xp=!0,t.start&&t.start(e))}))}},Zp={name:"el-sl-panel",props:{color:{required:!0}},computed:{colorValue:function(){var e=this.color.get("hue"),t=this.color.get("value");return{hue:e,value:t}}},watch:{colorValue:function(){this.update()}},methods:{update:function(){var e=this.color.get("saturation"),t=this.color.get("value"),n=this.$el,i=n.clientWidth,r=n.clientHeight;this.cursorLeft=e*i/100,this.cursorTop=(100-t)*r/100,this.background="hsl("+this.color.get("hue")+", 100%, 50%)"},handleDrag:function(e){var t=this.$el,n=t.getBoundingClientRect(),i=e.clientX-n.left,r=e.clientY-n.top;i=Math.max(0,i),i=Math.min(i,n.width),r=Math.max(0,r),r=Math.min(r,n.height),this.cursorLeft=i,this.cursorTop=r,this.color.set({saturation:i/n.width*100,value:100-r/n.height*100})}},mounted:function(){var e=this;Qp(this.$el,{drag:function(t){e.handleDrag(t)},end:function(t){e.handleDrag(t)}}),this.update()},data:function(){return{cursorTop:0,cursorLeft:0,background:"hsl(0, 100%, 50%)"}}},ef=Zp,tf=a(ef,Yp,Jp,!1,null,null,null);tf.options.__file="packages/color-picker/src/components/sv-panel.vue";var nf=tf.exports,rf=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-color-hue-slider",class:{"is-vertical":e.vertical}},[n("div",{ref:"bar",staticClass:"el-color-hue-slider__bar",on:{click:e.handleClick}}),n("div",{ref:"thumb",staticClass:"el-color-hue-slider__thumb",style:{left:e.thumbLeft+"px",top:e.thumbTop+"px"}})])},of=[];rf._withStripped=!0;var sf={name:"el-color-hue-slider",props:{color:{required:!0},vertical:Boolean},data:function(){return{thumbLeft:0,thumbTop:0}},computed:{hueValue:function(){var e=this.color.get("hue");return e}},watch:{hueValue:function(){this.update()}},methods:{handleClick:function(e){var t=this.$refs.thumb,n=e.target;n!==t&&this.handleDrag(e)},handleDrag:function(e){var t=this.$el.getBoundingClientRect(),n=this.$refs.thumb,i=void 0;if(this.vertical){var r=e.clientY-t.top;r=Math.min(r,t.height-n.offsetHeight/2),r=Math.max(n.offsetHeight/2,r),i=Math.round((r-n.offsetHeight/2)/(t.height-n.offsetHeight)*360)}else{var o=e.clientX-t.left;o=Math.min(o,t.width-n.offsetWidth/2),o=Math.max(n.offsetWidth/2,o),i=Math.round((o-n.offsetWidth/2)/(t.width-n.offsetWidth)*360)}this.color.set("hue",i)},getThumbLeft:function(){if(this.vertical)return 0;var e=this.$el,t=this.color.get("hue");if(!e)return 0;var n=this.$refs.thumb;return Math.round(t*(e.offsetWidth-n.offsetWidth/2)/360)},getThumbTop:function(){if(!this.vertical)return 0;var e=this.$el,t=this.color.get("hue");if(!e)return 0;var n=this.$refs.thumb;return Math.round(t*(e.offsetHeight-n.offsetHeight/2)/360)},update:function(){this.thumbLeft=this.getThumbLeft(),this.thumbTop=this.getThumbTop()}},mounted:function(){var e=this,t=this.$refs,n=t.bar,i=t.thumb,r={drag:function(t){e.handleDrag(t)},end:function(t){e.handleDrag(t)}};Qp(n,r),Qp(i,r),this.update()}},af=sf,cf=a(af,rf,of,!1,null,null,null);cf.options.__file="packages/color-picker/src/components/hue-slider.vue";var lf=cf.exports,uf=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-color-alpha-slider",class:{"is-vertical":e.vertical}},[n("div",{ref:"bar",staticClass:"el-color-alpha-slider__bar",style:{background:e.background},on:{click:e.handleClick}}),n("div",{ref:"thumb",staticClass:"el-color-alpha-slider__thumb",style:{left:e.thumbLeft+"px",top:e.thumbTop+"px"}})])},df=[];uf._withStripped=!0;var hf={name:"el-color-alpha-slider",props:{color:{required:!0},vertical:Boolean},watch:{"color._alpha":function(){this.update()},"color.value":function(){this.update()}},methods:{handleClick:function(e){var t=this.$refs.thumb,n=e.target;n!==t&&this.handleDrag(e)},handleDrag:function(e){var t=this.$el.getBoundingClientRect(),n=this.$refs.thumb;if(this.vertical){var i=e.clientY-t.top;i=Math.max(n.offsetHeight/2,i),i=Math.min(i,t.height-n.offsetHeight/2),this.color.set("alpha",Math.round((i-n.offsetHeight/2)/(t.height-n.offsetHeight)*100))}else{var r=e.clientX-t.left;r=Math.max(n.offsetWidth/2,r),r=Math.min(r,t.width-n.offsetWidth/2),this.color.set("alpha",Math.round((r-n.offsetWidth/2)/(t.width-n.offsetWidth)*100))}},getThumbLeft:function(){if(this.vertical)return 0;var e=this.$el,t=this.color._alpha;if(!e)return 0;var n=this.$refs.thumb;return Math.round(t*(e.offsetWidth-n.offsetWidth/2)/100)},getThumbTop:function(){if(!this.vertical)return 0;var e=this.$el,t=this.color._alpha;if(!e)return 0;var n=this.$refs.thumb;return Math.round(t*(e.offsetHeight-n.offsetHeight/2)/100)},getBackground:function(){if(this.color&&this.color.value){var e=this.color.toRgb(),t=e.r,n=e.g,i=e.b;return"linear-gradient(to right, rgba("+t+", "+n+", "+i+", 0) 0%, rgba("+t+", "+n+", "+i+", 1) 100%)"}return null},update:function(){this.thumbLeft=this.getThumbLeft(),this.thumbTop=this.getThumbTop(),this.background=this.getBackground()}},data:function(){return{thumbLeft:0,thumbTop:0,background:null}},mounted:function(){var e=this,t=this.$refs,n=t.bar,i=t.thumb,r={drag:function(t){e.handleDrag(t)},end:function(t){e.handleDrag(t)}};Qp(n,r),Qp(i,r),this.update()}},pf=hf,ff=a(pf,uf,df,!1,null,null,null);ff.options.__file="packages/color-picker/src/components/alpha-slider.vue";var gf=ff.exports,mf=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-color-predefine"},[n("div",{staticClass:"el-color-predefine__colors"},e._l(e.rgbaColors,(function(t,i){return n("div",{key:e.colors[i],staticClass:"el-color-predefine__color-selector",class:{selected:t.selected,"is-alpha":t._alpha<100},on:{click:function(t){e.handleSelect(i)}}},[n("div",{style:{"background-color":t.value}})])})),0)])},_f=[];mf._withStripped=!0;var vf={props:{colors:{type:Array,required:!0},color:{required:!0}},data:function(){return{rgbaColors:this.parseColors(this.colors,this.color)}},methods:{handleSelect:function(e){this.color.fromString(this.colors[e])},parseColors:function(e,t){return e.map((function(e){var n=new qp;return n.enableAlpha=!0,n.format="rgba",n.fromString(e),n.selected=n.value===t.value,n}))}},watch:{"$parent.currentColor":function(e){var t=new qp;t.fromString(e),this.rgbaColors.forEach((function(e){e.selected=t.compare(e)}))},colors:function(e){this.rgbaColors=this.parseColors(e,this.color)},color:function(e){this.rgbaColors=this.parseColors(this.colors,e)}}},yf=vf,Cf=a(yf,mf,_f,!1,null,null,null);Cf.options.__file="packages/color-picker/src/components/predefine.vue";var Ef=Cf.exports,bf={name:"el-color-picker-dropdown",mixins:[H.a,_.a],components:{SvPanel:nf,HueSlider:lf,AlphaSlider:gf,ElInput:g.a,ElButton:se.a,Predefine:Ef},props:{color:{required:!0},showAlpha:Boolean,predefine:Array},data:function(){return{customInput:""}},computed:{currentColor:function(){var e=this.$parent;return e.value||e.showPanelColor?e.color.value:""}},methods:{confirmValue:function(){this.$emit("pick")},handleConfirm:function(){this.color.fromString(this.customInput)}},mounted:function(){this.$parent.popperElm=this.popperElm=this.$el,this.referenceElm=this.$parent.$el},watch:{showPopper:function(e){var t=this;!0===e&&this.$nextTick((function(){var e=t.$refs,n=e.sl,i=e.hue,r=e.alpha;n&&n.update(),i&&i.update(),r&&r.update()}))},currentColor:{immediate:!0,handler:function(e){this.customInput=e}}}},Tf=bf,Sf=a(Tf,Gp,zp,!1,null,null,null);Sf.options.__file="packages/color-picker/src/components/picker-dropdown.vue";var Rf=Sf.exports,If={name:"ElColorPicker",mixins:[O.a],props:{value:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:String,popperClass:String,predefine:Array},inject:{elForm:{default:""},elFormItem:{default:""}},directives:{Clickoutside:V.a},computed:{displayedColor:function(){return this.value||this.showPanelColor?this.displayedRgb(this.color,this.showAlpha):"transparent"},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},colorSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},colorDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},watch:{value:function(e){e?e&&e!==this.color.value&&this.color.fromString(e):this.showPanelColor=!1},color:{deep:!0,handler:function(){this.showPanelColor=!0}},displayedColor:function(e){if(this.showPicker){var t=new qp({enableAlpha:this.showAlpha,format:this.colorFormat});t.fromString(this.value);var n=this.displayedRgb(t,this.showAlpha);e!==n&&this.$emit("active-change",e)}}},methods:{handleTrigger:function(){this.colorDisabled||(this.showPicker=!this.showPicker)},confirmValue:function(){var e=this.color.value;this.$emit("input",e),this.$emit("change",e),this.dispatch("ElFormItem","el.form.change",e),this.showPicker=!1},clearValue:function(){this.$emit("input",null),this.$emit("change",null),null!==this.value&&this.dispatch("ElFormItem","el.form.change",null),this.showPanelColor=!1,this.showPicker=!1,this.resetColor()},hide:function(){this.showPicker=!1,this.resetColor()},resetColor:function(){var e=this;this.$nextTick((function(t){e.value?e.color.fromString(e.value):e.showPanelColor=!1}))},displayedRgb:function(e,t){if(!(e instanceof qp))throw Error("color should be instance of Color Class");var n=e.toRgb(),i=n.r,r=n.g,o=n.b;return t?"rgba("+i+", "+r+", "+o+", "+e.get("alpha")/100+")":"rgb("+i+", "+r+", "+o+")"}},mounted:function(){var e=this.value;e&&this.color.fromString(e),this.popperElm=this.$refs.dropdown.$el},data:function(){var e=new qp({enableAlpha:this.showAlpha,format:this.colorFormat});return{color:e,showPicker:!1,showPanelColor:!1}},components:{PickerDropdown:Rf}},wf=If,Of=a(wf,Mp,xp,!1,null,null,null);Of.options.__file="packages/color-picker/src/main.vue";var kf=Of.exports;kf.install=function(e){e.component(kf.name,kf)};var Mf=kf,xf=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-transfer"},[n("transfer-panel",e._b({ref:"leftPanel",attrs:{data:e.sourceData,title:e.titles[0]||e.t("el.transfer.titles.0"),"default-checked":e.leftDefaultChecked,placeholder:e.filterPlaceholder||e.t("el.transfer.filterPlaceholder")},on:{"checked-change":e.onSourceCheckedChange}},"transfer-panel",e.$props,!1),[e._t("left-footer")],2),n("div",{staticClass:"el-transfer__buttons"},[n("el-button",{class:["el-transfer__button",e.hasButtonTexts?"is-with-texts":""],attrs:{type:"primary",disabled:0===e.rightChecked.length},nativeOn:{click:function(t){return e.addToLeft(t)}}},[n("i",{staticClass:"el-icon-arrow-left"}),void 0!==e.buttonTexts[0]?n("span",[e._v(e._s(e.buttonTexts[0]))]):e._e()]),n("el-button",{class:["el-transfer__button",e.hasButtonTexts?"is-with-texts":""],attrs:{type:"primary",disabled:0===e.leftChecked.length},nativeOn:{click:function(t){return e.addToRight(t)}}},[void 0!==e.buttonTexts[1]?n("span",[e._v(e._s(e.buttonTexts[1]))]):e._e(),n("i",{staticClass:"el-icon-arrow-right"})])],1),n("transfer-panel",e._b({ref:"rightPanel",attrs:{data:e.targetData,title:e.titles[1]||e.t("el.transfer.titles.1"),"default-checked":e.rightDefaultChecked,placeholder:e.filterPlaceholder||e.t("el.transfer.filterPlaceholder")},on:{"checked-change":e.onTargetCheckedChange}},"transfer-panel",e.$props,!1),[e._t("right-footer")],2)],1)},Pf=[];xf._withStripped=!0;var Af=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-transfer-panel"},[n("p",{staticClass:"el-transfer-panel__header"},[n("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleAllCheckedChange},model:{value:e.allChecked,callback:function(t){e.allChecked=t},expression:"allChecked"}},[e._v("\n      "+e._s(e.title)+"\n      "),n("span",[e._v(e._s(e.checkedSummary))])])],1),n("div",{class:["el-transfer-panel__body",e.hasFooter?"is-with-footer":""]},[e.filterable?n("el-input",{staticClass:"el-transfer-panel__filter",attrs:{size:"small",placeholder:e.placeholder},nativeOn:{mouseenter:function(t){e.inputHover=!0},mouseleave:function(t){e.inputHover=!1}},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}},[n("i",{class:["el-input__icon","el-icon-"+e.inputIcon],attrs:{slot:"prefix"},on:{click:e.clearQuery},slot:"prefix"})]):e._e(),n("el-checkbox-group",{directives:[{name:"show",rawName:"v-show",value:!e.hasNoMatch&&e.data.length>0,expression:"!hasNoMatch && data.length > 0"}],staticClass:"el-transfer-panel__list",class:{"is-filterable":e.filterable},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},e._l(e.filteredData,(function(t){return n("el-checkbox",{key:t[e.keyProp],staticClass:"el-transfer-panel__item",attrs:{label:t[e.keyProp],disabled:t[e.disabledProp]}},[n("option-content",{attrs:{option:t}})],1)})),1),n("p",{directives:[{name:"show",rawName:"v-show",value:e.hasNoMatch,expression:"hasNoMatch"}],staticClass:"el-transfer-panel__empty"},[e._v(e._s(e.t("el.transfer.noMatch")))]),n("p",{directives:[{name:"show",rawName:"v-show",value:0===e.data.length&&!e.hasNoMatch,expression:"data.length === 0 && !hasNoMatch"}],staticClass:"el-transfer-panel__empty"},[e._v(e._s(e.t("el.transfer.noData")))])],1),e.hasFooter?n("p",{staticClass:"el-transfer-panel__footer"},[e._t("default")],2):e._e()])},Df=[];Af._withStripped=!0;var Nf={mixins:[_.a],name:"ElTransferPanel",componentName:"ElTransferPanel",components:{ElCheckboxGroup:Mr.a,ElCheckbox:Di.a,ElInput:g.a,OptionContent:{props:{option:Object},render:function(e){var t=function e(t){return"ElTransferPanel"===t.$options.componentName?t:t.$parent?e(t.$parent):t},n=t(this),i=n.$parent||n;return n.renderContent?n.renderContent(e,this.option):i.$scopedSlots.default?i.$scopedSlots.default({option:this.option}):e("span",[this.option[n.labelProp]||this.option[n.keyProp]])}}},props:{data:{type:Array,default:function(){return[]}},renderContent:Function,placeholder:String,title:String,filterable:Boolean,format:Object,filterMethod:Function,defaultChecked:Array,props:Object},data:function(){return{checked:[],allChecked:!1,query:"",inputHover:!1,checkChangeByUser:!0}},watch:{checked:function(e,t){if(this.updateAllChecked(),this.checkChangeByUser){var n=e.concat(t).filter((function(n){return-1===e.indexOf(n)||-1===t.indexOf(n)}));this.$emit("checked-change",e,n)}else this.$emit("checked-change",e),this.checkChangeByUser=!0},data:function(){var e=this,t=[],n=this.filteredData.map((function(t){return t[e.keyProp]}));this.checked.forEach((function(e){n.indexOf(e)>-1&&t.push(e)})),this.checkChangeByUser=!1,this.checked=t},checkableData:function(){this.updateAllChecked()},defaultChecked:{immediate:!0,handler:function(e,t){var n=this;if(!t||e.length!==t.length||!e.every((function(e){return t.indexOf(e)>-1}))){var i=[],r=this.checkableData.map((function(e){return e[n.keyProp]}));e.forEach((function(e){r.indexOf(e)>-1&&i.push(e)})),this.checkChangeByUser=!1,this.checked=i}}}},computed:{filteredData:function(){var e=this;return this.data.filter((function(t){if("function"===typeof e.filterMethod)return e.filterMethod(e.query,t);var n=t[e.labelProp]||t[e.keyProp].toString();return n.toLowerCase().indexOf(e.query.toLowerCase())>-1}))},checkableData:function(){var e=this;return this.filteredData.filter((function(t){return!t[e.disabledProp]}))},checkedSummary:function(){var e=this.checked.length,t=this.data.length,n=this.format,i=n.noChecked,r=n.hasChecked;return i&&r?e>0?r.replace(/\${checked}/g,e).replace(/\${total}/g,t):i.replace(/\${total}/g,t):e+"/"+t},isIndeterminate:function(){var e=this.checked.length;return e>0&&e<this.checkableData.length},hasNoMatch:function(){return this.query.length>0&&0===this.filteredData.length},inputIcon:function(){return this.query.length>0&&this.inputHover?"circle-close":"search"},labelProp:function(){return this.props.label||"label"},keyProp:function(){return this.props.key||"key"},disabledProp:function(){return this.props.disabled||"disabled"},hasFooter:function(){return!!this.$slots.default}},methods:{updateAllChecked:function(){var e=this,t=this.checkableData.map((function(t){return t[e.keyProp]}));this.allChecked=t.length>0&&t.every((function(t){return e.checked.indexOf(t)>-1}))},handleAllCheckedChange:function(e){var t=this;this.checked=e?this.checkableData.map((function(e){return e[t.keyProp]})):[]},clearQuery:function(){"circle-close"===this.inputIcon&&(this.query="")}}},Lf=Nf,Uf=a(Lf,Af,Df,!1,null,null,null);Uf.options.__file="packages/transfer/src/transfer-panel.vue";var Bf=Uf.exports,Vf={name:"ElTransfer",mixins:[O.a,_.a,I.a],components:{TransferPanel:Bf,ElButton:se.a},props:{data:{type:Array,default:function(){return[]}},titles:{type:Array,default:function(){return[]}},buttonTexts:{type:Array,default:function(){return[]}},filterPlaceholder:{type:String,default:""},filterMethod:Function,leftDefaultChecked:{type:Array,default:function(){return[]}},rightDefaultChecked:{type:Array,default:function(){return[]}},renderContent:Function,value:{type:Array,default:function(){return[]}},format:{type:Object,default:function(){return{}}},filterable:Boolean,props:{type:Object,default:function(){return{label:"label",key:"key",disabled:"disabled"}}},targetOrder:{type:String,default:"original"}},data:function(){return{leftChecked:[],rightChecked:[]}},computed:{dataObj:function(){var e=this.props.key;return this.data.reduce((function(t,n){return(t[n[e]]=n)&&t}),{})},sourceData:function(){var e=this;return this.data.filter((function(t){return-1===e.value.indexOf(t[e.props.key])}))},targetData:function(){var e=this;return"original"===this.targetOrder?this.data.filter((function(t){return e.value.indexOf(t[e.props.key])>-1})):this.value.reduce((function(t,n){var i=e.dataObj[n];return i&&t.push(i),t}),[])},hasButtonTexts:function(){return 2===this.buttonTexts.length}},watch:{value:function(e){this.dispatch("ElFormItem","el.form.change",e)}},methods:{getMigratingConfig:function(){return{props:{"footer-format":"footer-format is renamed to format."}}},onSourceCheckedChange:function(e,t){this.leftChecked=e,void 0!==t&&this.$emit("left-check-change",e,t)},onTargetCheckedChange:function(e,t){this.rightChecked=e,void 0!==t&&this.$emit("right-check-change",e,t)},addToLeft:function(){var e=this.value.slice();this.rightChecked.forEach((function(t){var n=e.indexOf(t);n>-1&&e.splice(n,1)})),this.$emit("input",e),this.$emit("change",e,"left",this.rightChecked)},addToRight:function(){var e=this,t=this.value.slice(),n=[],i=this.props.key;this.data.forEach((function(t){var r=t[i];e.leftChecked.indexOf(r)>-1&&-1===e.value.indexOf(r)&&n.push(r)})),t="unshift"===this.targetOrder?n.concat(t):t.concat(n),this.$emit("input",t),this.$emit("change",t,"right",this.leftChecked)},clearQuery:function(e){"left"===e?this.$refs.leftPanel.query="":"right"===e&&(this.$refs.rightPanel.query="")}}},jf=Vf,Ff=a(jf,xf,Pf,!1,null,null,null);Ff.options.__file="packages/transfer/src/main.vue";var $f=Ff.exports;$f.install=function(e){e.component($f.name,$f)};var Hf=$f,Kf=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"el-container",class:{"is-vertical":e.isVertical}},[e._t("default")],2)},Wf=[];Kf._withStripped=!0;var qf={name:"ElContainer",componentName:"ElContainer",props:{direction:String},computed:{isVertical:function(){return"vertical"===this.direction||"horizontal"!==this.direction&&(!(!this.$slots||!this.$slots.default)&&this.$slots.default.some((function(e){var t=e.componentOptions&&e.componentOptions.tag;return"el-header"===t||"el-footer"===t})))}}},Gf=qf,zf=a(Gf,Kf,Wf,!1,null,null,null);zf.options.__file="packages/container/src/main.vue";var Yf=zf.exports;Yf.install=function(e){e.component(Yf.name,Yf)};var Jf=Yf,Xf=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",{staticClass:"el-header",style:{height:e.height}},[e._t("default")],2)},Qf=[];Xf._withStripped=!0;var Zf={name:"ElHeader",componentName:"ElHeader",props:{height:{type:String,default:"60px"}}},eg=Zf,tg=a(eg,Xf,Qf,!1,null,null,null);tg.options.__file="packages/header/src/main.vue";var ng=tg.exports;ng.install=function(e){e.component(ng.name,ng)};var ig=ng,rg=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("aside",{staticClass:"el-aside",style:{width:e.width}},[e._t("default")],2)},og=[];rg._withStripped=!0;var sg={name:"ElAside",componentName:"ElAside",props:{width:{type:String,default:"300px"}}},ag=sg,cg=a(ag,rg,og,!1,null,null,null);cg.options.__file="packages/aside/src/main.vue";var lg=cg.exports;lg.install=function(e){e.component(lg.name,lg)};var ug=lg,dg=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",{staticClass:"el-main"},[e._t("default")],2)},hg=[];dg._withStripped=!0;var pg={name:"ElMain",componentName:"ElMain"},fg=pg,gg=a(fg,dg,hg,!1,null,null,null);gg.options.__file="packages/main/src/main.vue";var mg=gg.exports;mg.install=function(e){e.component(mg.name,mg)};var _g=mg,vg=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("footer",{staticClass:"el-footer",style:{height:e.height}},[e._t("default")],2)},yg=[];vg._withStripped=!0;var Cg={name:"ElFooter",componentName:"ElFooter",props:{height:{type:String,default:"60px"}}},Eg=Cg,bg=a(Eg,vg,yg,!1,null,null,null);bg.options.__file="packages/footer/src/main.vue";var Tg=bg.exports;Tg.install=function(e){e.component(Tg.name,Tg)};var Sg,Rg,Ig=Tg,wg={name:"ElTimeline",props:{reverse:{type:Boolean,default:!1}},provide:function(){return{timeline:this}},render:function(){var e=arguments[0],t=this.reverse,n={"el-timeline":!0,"is-reverse":t},i=this.$slots.default||[];return t&&(i=i.reverse()),e("ul",{class:n},[i])}},Og=wg,kg=a(Og,Sg,Rg,!1,null,null,null);kg.options.__file="packages/timeline/src/main.vue";var Mg=kg.exports;Mg.install=function(e){e.component(Mg.name,Mg)};var xg=Mg,Pg=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"el-timeline-item"},[n("div",{staticClass:"el-timeline-item__tail"}),e.$slots.dot?e._e():n("div",{staticClass:"el-timeline-item__node",class:["el-timeline-item__node--"+(e.size||""),"el-timeline-item__node--"+(e.type||"")],style:{backgroundColor:e.color}},[e.icon?n("i",{staticClass:"el-timeline-item__icon",class:e.icon}):e._e()]),e.$slots.dot?n("div",{staticClass:"el-timeline-item__dot"},[e._t("dot")],2):e._e(),n("div",{staticClass:"el-timeline-item__wrapper"},[e.hideTimestamp||"top"!==e.placement?e._e():n("div",{staticClass:"el-timeline-item__timestamp is-top"},[e._v("\n      "+e._s(e.timestamp)+"\n    ")]),n("div",{staticClass:"el-timeline-item__content"},[e._t("default")],2),e.hideTimestamp||"bottom"!==e.placement?e._e():n("div",{staticClass:"el-timeline-item__timestamp is-bottom"},[e._v("\n      "+e._s(e.timestamp)+"\n    ")])])])},Ag=[];Pg._withStripped=!0;var Dg={name:"ElTimelineItem",inject:["timeline"],props:{timestamp:String,hideTimestamp:{type:Boolean,default:!1},placement:{type:String,default:"bottom"},type:String,color:String,size:{type:String,default:"normal"},icon:String}},Ng=Dg,Lg=a(Ng,Pg,Ag,!1,null,null,null);Lg.options.__file="packages/timeline/src/item.vue";var Ug=Lg.exports;Ug.install=function(e){e.component(Ug.name,Ug)};var Bg=Ug,Vg=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a",e._b({class:["el-link",e.type?"el-link--"+e.type:"",e.disabled&&"is-disabled",e.underline&&!e.disabled&&"is-underline"],attrs:{href:e.disabled?null:e.href},on:{click:e.handleClick}},"a",e.$attrs,!1),[e.icon?n("i",{class:e.icon}):e._e(),e.$slots.default?n("span",{staticClass:"el-link--inner"},[e._t("default")],2):e._e(),e.$slots.icon?[e.$slots.icon?e._t("icon"):e._e()]:e._e()],2)},jg=[];Vg._withStripped=!0;var Fg={name:"ElLink",props:{type:{type:String,default:"default"},underline:{type:Boolean,default:!0},disabled:Boolean,href:String,icon:String},methods:{handleClick:function(e){this.disabled||this.href||this.$emit("click",e)}}},$g=Fg,Hg=a($g,Vg,jg,!1,null,null,null);Hg.options.__file="packages/link/src/main.vue";var Kg=Hg.exports;Kg.install=function(e){e.component(Kg.name,Kg)};var Wg=Kg,qg=function(e,t){var n=t._c;return n("div",t._g(t._b({class:[t.data.staticClass,"el-divider","el-divider--"+t.props.direction]},"div",t.data.attrs,!1),t.listeners),[t.slots().default&&"vertical"!==t.props.direction?n("div",{class:["el-divider__text","is-"+t.props.contentPosition]},[t._t("default")],2):t._e()])},Gg=[];qg._withStripped=!0;var zg={name:"ElDivider",props:{direction:{type:String,default:"horizontal",validator:function(e){return-1!==["horizontal","vertical"].indexOf(e)}},contentPosition:{type:String,default:"center",validator:function(e){return-1!==["left","center","right"].indexOf(e)}}}},Yg=zg,Jg=a(Yg,qg,Gg,!0,null,null,null);Jg.options.__file="packages/divider/src/main.vue";var Xg=Jg.exports;Xg.install=function(e){e.component(Xg.name,Xg)};var Qg=Xg,Zg=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-image"},[e.loading?e._t("placeholder",[n("div",{staticClass:"el-image__placeholder"})]):e.error?e._t("error",[n("div",{staticClass:"el-image__error"},[e._v(e._s(e.t("el.image.error")))])]):n("img",e._g(e._b({staticClass:"el-image__inner",class:{"el-image__inner--center":e.alignCenter,"el-image__preview":e.preview},style:e.imageStyle,attrs:{src:e.src},on:{click:e.clickHandler}},"img",e.$attrs,!1),e.$listeners)),e.preview?[e.showViewer?n("image-viewer",{attrs:{"z-index":e.zIndex,"initial-index":e.imageIndex,"on-close":e.closeViewer,"url-list":e.previewSrcList}}):e._e()]:e._e()],2)},em=[];Zg._withStripped=!0;var tm=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"viewer-fade"}},[n("div",{ref:"el-image-viewer__wrapper",staticClass:"el-image-viewer__wrapper",style:{"z-index":e.viewerZIndex},attrs:{tabindex:"-1"}},[n("div",{staticClass:"el-image-viewer__mask",on:{click:function(t){return t.target!==t.currentTarget?null:e.handleMaskClick(t)}}}),n("span",{staticClass:"el-image-viewer__btn el-image-viewer__close",on:{click:e.hide}},[n("i",{staticClass:"el-icon-close"})]),e.isSingle?e._e():[n("span",{staticClass:"el-image-viewer__btn el-image-viewer__prev",class:{"is-disabled":!e.infinite&&e.isFirst},on:{click:e.prev}},[n("i",{staticClass:"el-icon-arrow-left"})]),n("span",{staticClass:"el-image-viewer__btn el-image-viewer__next",class:{"is-disabled":!e.infinite&&e.isLast},on:{click:e.next}},[n("i",{staticClass:"el-icon-arrow-right"})])],n("div",{staticClass:"el-image-viewer__btn el-image-viewer__actions"},[n("div",{staticClass:"el-image-viewer__actions__inner"},[n("i",{staticClass:"el-icon-zoom-out",on:{click:function(t){e.handleActions("zoomOut")}}}),n("i",{staticClass:"el-icon-zoom-in",on:{click:function(t){e.handleActions("zoomIn")}}}),n("i",{staticClass:"el-image-viewer__actions__divider"}),n("i",{class:e.mode.icon,on:{click:e.toggleMode}}),n("i",{staticClass:"el-image-viewer__actions__divider"}),n("i",{staticClass:"el-icon-refresh-left",on:{click:function(t){e.handleActions("anticlocelise")}}}),n("i",{staticClass:"el-icon-refresh-right",on:{click:function(t){e.handleActions("clocelise")}}})])]),n("div",{staticClass:"el-image-viewer__canvas"},e._l(e.urlList,(function(t,i){return i===e.index?n("img",{key:t,ref:"img",refInFor:!0,staticClass:"el-image-viewer__img",style:e.imgStyle,attrs:{src:e.currentImg},on:{load:e.handleImgLoad,error:e.handleImgError,mousedown:e.handleMouseDown}}):e._e()})),0)],2)])},nm=[];tm._withStripped=!0;var im=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},rm={CONTAIN:{name:"contain",icon:"el-icon-full-screen"},ORIGINAL:{name:"original",icon:"el-icon-c-scale-to-original"}},om=Object(v["isFirefox"])()?"DOMMouseScroll":"mousewheel",sm={name:"elImageViewer",props:{urlList:{type:Array,default:function(){return[]}},zIndex:{type:Number,default:2e3},onSwitch:{type:Function,default:function(){}},onClose:{type:Function,default:function(){}},initialIndex:{type:Number,default:0},appendToBody:{type:Boolean,default:!0},maskClosable:{type:Boolean,default:!0}},data:function(){return{index:this.initialIndex,isShow:!1,infinite:!0,loading:!1,mode:rm.CONTAIN,transform:{scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}},computed:{isSingle:function(){return this.urlList.length<=1},isFirst:function(){return 0===this.index},isLast:function(){return this.index===this.urlList.length-1},currentImg:function(){return this.urlList[this.index]},imgStyle:function(){var e=this.transform,t=e.scale,n=e.deg,i=e.offsetX,r=e.offsetY,o=e.enableTransition,s={transform:"scale("+t+") rotate("+n+"deg)",transition:o?"transform .3s":"","margin-left":i+"px","margin-top":r+"px"};return this.mode===rm.CONTAIN&&(s.maxWidth=s.maxHeight="100%"),s},viewerZIndex:function(){var e=T["PopupManager"].nextZIndex();return this.zIndex>e?this.zIndex:e}},watch:{index:{handler:function(e){this.reset(),this.onSwitch(e)}},currentImg:function(e){var t=this;this.$nextTick((function(e){var n=t.$refs.img[0];n.complete||(t.loading=!0)}))}},methods:{hide:function(){this.deviceSupportUninstall(),this.onClose()},deviceSupportInstall:function(){var e=this;this._keyDownHandler=function(t){t.stopPropagation();var n=t.keyCode;switch(n){case 27:e.hide();break;case 32:e.toggleMode();break;case 37:e.prev();break;case 38:e.handleActions("zoomIn");break;case 39:e.next();break;case 40:e.handleActions("zoomOut");break}},this._mouseWheelHandler=Object(v["rafThrottle"])((function(t){var n=t.wheelDelta?t.wheelDelta:-t.detail;n>0?e.handleActions("zoomIn",{zoomRate:.015,enableTransition:!1}):e.handleActions("zoomOut",{zoomRate:.015,enableTransition:!1})})),Object(Be["on"])(document,"keydown",this._keyDownHandler),Object(Be["on"])(document,om,this._mouseWheelHandler)},deviceSupportUninstall:function(){Object(Be["off"])(document,"keydown",this._keyDownHandler),Object(Be["off"])(document,om,this._mouseWheelHandler),this._keyDownHandler=null,this._mouseWheelHandler=null},handleImgLoad:function(e){this.loading=!1},handleImgError:function(e){this.loading=!1,e.target.alt="加载失败"},handleMouseDown:function(e){var t=this;if(!this.loading&&0===e.button){var n=this.transform,i=n.offsetX,r=n.offsetY,o=e.pageX,s=e.pageY;this._dragHandler=Object(v["rafThrottle"])((function(e){t.transform.offsetX=i+e.pageX-o,t.transform.offsetY=r+e.pageY-s})),Object(Be["on"])(document,"mousemove",this._dragHandler),Object(Be["on"])(document,"mouseup",(function(e){Object(Be["off"])(document,"mousemove",t._dragHandler)})),e.preventDefault()}},handleMaskClick:function(){this.maskClosable&&this.hide()},reset:function(){this.transform={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}},toggleMode:function(){if(!this.loading){var e=Object.keys(rm),t=Object.values(rm),n=t.indexOf(this.mode),i=(n+1)%e.length;this.mode=rm[e[i]],this.reset()}},prev:function(){if(!this.isFirst||this.infinite){var e=this.urlList.length;this.index=(this.index-1+e)%e}},next:function(){if(!this.isLast||this.infinite){var e=this.urlList.length;this.index=(this.index+1)%e}},handleActions:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.loading){var n=im({zoomRate:.2,rotateDeg:90,enableTransition:!0},t),i=n.zoomRate,r=n.rotateDeg,o=n.enableTransition,s=this.transform;switch(e){case"zoomOut":s.scale>.2&&(s.scale=parseFloat((s.scale-i).toFixed(3)));break;case"zoomIn":s.scale=parseFloat((s.scale+i).toFixed(3));break;case"clocelise":s.deg+=r;break;case"anticlocelise":s.deg-=r;break}s.enableTransition=o}}},mounted:function(){this.deviceSupportInstall(),this.appendToBody&&document.body.appendChild(this.$el),this.$refs["el-image-viewer__wrapper"].focus()},destroyed:function(){this.appendToBody&&this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}},am=sm,cm=a(am,tm,nm,!1,null,null,null);cm.options.__file="packages/image/src/image-viewer.vue";var lm=cm.exports,um=function(){return void 0!==document.documentElement.style.objectFit},dm={NONE:"none",CONTAIN:"contain",COVER:"cover",FILL:"fill",SCALE_DOWN:"scale-down"},hm="",pm={name:"ElImage",mixins:[_.a],inheritAttrs:!1,components:{ImageViewer:lm},props:{src:String,fit:String,lazy:Boolean,scrollContainer:{},previewSrcList:{type:Array,default:function(){return[]}},zIndex:{type:Number,default:2e3}},data:function(){return{loading:!0,error:!1,show:!this.lazy,imageWidth:0,imageHeight:0,showViewer:!1}},computed:{imageStyle:function(){var e=this.fit;return!this.$isServer&&e?um()?{"object-fit":e}:this.getImageStyle(e):{}},alignCenter:function(){return!this.$isServer&&!um()&&this.fit!==dm.FILL},preview:function(){var e=this.previewSrcList;return Array.isArray(e)&&e.length>0},imageIndex:function(){var e=0,t=this.previewSrcList.indexOf(this.src);return t>=0&&(e=t),e}},watch:{src:function(e){this.show&&this.loadImage()},show:function(e){e&&this.loadImage()}},mounted:function(){this.lazy?this.addLazyLoadListener():this.loadImage()},beforeDestroy:function(){this.lazy&&this.removeLazyLoadListener()},methods:{loadImage:function(){var e=this;if(!this.$isServer){this.loading=!0,this.error=!1;var t=new Image;t.onload=function(n){return e.handleLoad(n,t)},t.onerror=this.handleError.bind(this),Object.keys(this.$attrs).forEach((function(n){var i=e.$attrs[n];t.setAttribute(n,i)})),t.src=this.src}},handleLoad:function(e,t){this.imageWidth=t.width,this.imageHeight=t.height,this.loading=!1,this.error=!1},handleError:function(e){this.loading=!1,this.error=!0,this.$emit("error",e)},handleLazyLoad:function(){Object(Be["isInContainer"])(this.$el,this._scrollContainer)&&(this.show=!0,this.removeLazyLoadListener())},addLazyLoadListener:function(){if(!this.$isServer){var e=this.scrollContainer,t=null;t=Object(Hd["isHtmlElement"])(e)?e:Object(Hd["isString"])(e)?document.querySelector(e):Object(Be["getScrollContainer"])(this.$el),t&&(this._scrollContainer=t,this._lazyLoadHandler=Lh()(200,this.handleLazyLoad),Object(Be["on"])(t,"scroll",this._lazyLoadHandler),this.handleLazyLoad())}},removeLazyLoadListener:function(){var e=this._scrollContainer,t=this._lazyLoadHandler;!this.$isServer&&e&&t&&(Object(Be["off"])(e,"scroll",t),this._scrollContainer=null,this._lazyLoadHandler=null)},getImageStyle:function(e){var t=this.imageWidth,n=this.imageHeight,i=this.$el,r=i.clientWidth,o=i.clientHeight;if(!t||!n||!r||!o)return{};var s=t/n,a=r/o;if(e===dm.SCALE_DOWN){var c=t<r&&n<o;e=c?dm.NONE:dm.CONTAIN}switch(e){case dm.NONE:return{width:"auto",height:"auto"};case dm.CONTAIN:return s<a?{width:"auto"}:{height:"auto"};case dm.COVER:return s<a?{height:"auto"}:{width:"auto"};default:return{}}},clickHandler:function(){this.preview&&(hm=document.body.style.overflow,document.body.style.overflow="hidden",this.showViewer=!0)},closeViewer:function(){document.body.style.overflow=hm,this.showViewer=!1}}},fm=pm,gm=a(fm,Zg,em,!1,null,null,null);gm.options.__file="packages/image/src/main.vue";var mm=gm.exports;mm.install=function(e){e.component(mm.name,mm)};var _m=mm,vm=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-calendar"},[n("div",{staticClass:"el-calendar__header"},[n("div",{staticClass:"el-calendar__title"},[e._v("\n      "+e._s(e.i18nDate)+"\n    ")]),0===e.validatedRange.length?n("div",{staticClass:"el-calendar__button-group"},[n("el-button-group",[n("el-button",{attrs:{type:"plain",size:"mini"},on:{click:function(t){e.selectDate("prev-month")}}},[e._v("\n          "+e._s(e.t("el.datepicker.prevMonth"))+"\n        ")]),n("el-button",{attrs:{type:"plain",size:"mini"},on:{click:function(t){e.selectDate("today")}}},[e._v("\n          "+e._s(e.t("el.datepicker.today"))+"\n        ")]),n("el-button",{attrs:{type:"plain",size:"mini"},on:{click:function(t){e.selectDate("next-month")}}},[e._v("\n          "+e._s(e.t("el.datepicker.nextMonth"))+"\n        ")])],1)],1):e._e()]),0===e.validatedRange.length?n("div",{key:"no-range",staticClass:"el-calendar__body"},[n("date-table",{attrs:{date:e.date,"selected-day":e.realSelectedDay,"first-day-of-week":e.realFirstDayOfWeek},on:{pick:e.pickDay}})],1):n("div",{key:"has-range",staticClass:"el-calendar__body"},e._l(e.validatedRange,(function(t,i){return n("date-table",{key:i,attrs:{date:t[0],"selected-day":e.realSelectedDay,range:t,"hide-header":0!==i,"first-day-of-week":e.realFirstDayOfWeek},on:{pick:e.pickDay}})})),1)])},ym=[];vm._withStripped=!0;var Cm,Em,bm=n(20),Tm=n.n(bm),Sm={props:{selectedDay:String,range:{type:Array,validator:function(e){if(!e||!e.length)return!0;var t=e[0],n=e[1];return Object(ro["validateRangeInOneMonth"])(t,n)}},date:Date,hideHeader:Boolean,firstDayOfWeek:Number},inject:["elCalendar"],methods:{toNestedArr:function(e){return Object(ro["range"])(e.length/7).map((function(t,n){var i=7*n;return e.slice(i,i+7)}))},getFormateDate:function(e,t){if(!e||-1===["prev","current","next"].indexOf(t))throw new Error("invalid day or type");var n=this.curMonthDatePrefix;return"prev"===t?n=this.prevMonthDatePrefix:"next"===t&&(n=this.nextMonthDatePrefix),e=("00"+e).slice(-2),n+"-"+e},getCellClass:function(e){var t=e.text,n=e.type,i=[n];if("current"===n){var r=this.getFormateDate(t,n);r===this.selectedDay&&i.push("is-selected"),r===this.formatedToday&&i.push("is-today")}return i},pickDay:function(e){var t=e.text,n=e.type,i=this.getFormateDate(t,n);this.$emit("pick",i)},cellRenderProxy:function(e){var t=e.text,n=e.type,i=this.$createElement,r=this.elCalendar.$scopedSlots.dateCell;if(!r)return i("span",[t]);var o=this.getFormateDate(t,n),s=new Date(o),a={isSelected:this.selectedDay===o,type:n+"-month",day:o};return r({date:s,data:a})}},computed:{WEEK_DAYS:function(){return Object(ro["getI18nSettings"])().dayNames},prevMonthDatePrefix:function(){var e=new Date(this.date.getTime());return e.setDate(0),Tm.a.format(e,"yyyy-MM")},curMonthDatePrefix:function(){return Tm.a.format(this.date,"yyyy-MM")},nextMonthDatePrefix:function(){var e=new Date(this.date.getFullYear(),this.date.getMonth()+1,1);return Tm.a.format(e,"yyyy-MM")},formatedToday:function(){return this.elCalendar.formatedToday},isInRange:function(){return this.range&&this.range.length},rows:function(){var e=[];if(this.isInRange){var t=this.range,n=t[0],i=t[1],r=Object(ro["range"])(i.getDate()-n.getDate()+1).map((function(e,t){return{text:n.getDate()+t,type:"current"}})),o=r.length%7;o=0===o?0:7-o;var s=Object(ro["range"])(o).map((function(e,t){return{text:t+1,type:"next"}}));e=r.concat(s)}else{var a=this.date,c=Object(ro["getFirstDayOfMonth"])(a);c=0===c?7:c;var l="number"===typeof this.firstDayOfWeek?this.firstDayOfWeek:1,u=(7+c-l)%7,d=Object(ro["getPrevMonthLastDays"])(a,u).map((function(e){return{text:e,type:"prev"}})),h=Object(ro["getMonthDays"])(a).map((function(e){return{text:e,type:"current"}}));e=[].concat(d,h);var p=Object(ro["range"])(42-e.length).map((function(e,t){return{text:t+1,type:"next"}}));e=e.concat(p)}return this.toNestedArr(e)},weekDays:function(){var e=this.firstDayOfWeek,t=this.WEEK_DAYS;return"number"!==typeof e||0===e?t.slice():t.slice(e).concat(t.slice(0,e))}},render:function(){var e=this,t=arguments[0],n=this.hideHeader?null:t("thead",[this.weekDays.map((function(e){return t("th",{key:e},[e])}))]);return t("table",{class:{"el-calendar-table":!0,"is-range":this.isInRange},attrs:{cellspacing:"0",cellpadding:"0"}},[n,t("tbody",[this.rows.map((function(n,i){return t("tr",{class:{"el-calendar-table__row":!0,"el-calendar-table__row--hide-border":0===i&&e.hideHeader},key:i},[n.map((function(n,i){return t("td",{key:i,class:e.getCellClass(n),on:{click:e.pickDay.bind(e,n)}},[t("div",{class:"el-calendar-day"},[e.cellRenderProxy(n)])])}))])}))])])}},Rm=Sm,Im=a(Rm,Cm,Em,!1,null,null,null);Im.options.__file="packages/calendar/src/date-table.vue";var wm=Im.exports,Om=["prev-month","today","next-month"],km=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Mm=864e5,xm={name:"ElCalendar",mixins:[_.a],components:{DateTable:wm,ElButton:se.a,ElButtonGroup:ce.a},props:{value:[Date,String,Number],range:{type:Array,validator:function(e){return!Array.isArray(e)||2===e.length&&e.every((function(e){return"string"===typeof e||"number"===typeof e||e instanceof Date}))}},firstDayOfWeek:{type:Number,default:1}},provide:function(){return{elCalendar:this}},methods:{pickDay:function(e){this.realSelectedDay=e},selectDate:function(e){if(-1===Om.indexOf(e))throw new Error("invalid type "+e);var t="";t="prev-month"===e?this.prevMonthDatePrefix+"-01":"next-month"===e?this.nextMonthDatePrefix+"-01":this.formatedToday,t!==this.formatedDate&&this.pickDay(t)},toDate:function(e){if(!e)throw new Error("invalid val");return e instanceof Date?e:new Date(e)},rangeValidator:function(e,t){var n=this.realFirstDayOfWeek,i=t?n:0===n?6:n-1,r=(t?"start":"end")+" of range should be "+km[i]+".";return e.getDay()===i||(console.warn("[ElementCalendar]",r,"Invalid range will be ignored."),!1)}},computed:{prevMonthDatePrefix:function(){var e=new Date(this.date.getTime());return e.setDate(0),Tm.a.format(e,"yyyy-MM")},curMonthDatePrefix:function(){return Tm.a.format(this.date,"yyyy-MM")},nextMonthDatePrefix:function(){var e=new Date(this.date.getFullYear(),this.date.getMonth()+1,1);return Tm.a.format(e,"yyyy-MM")},formatedDate:function(){return Tm.a.format(this.date,"yyyy-MM-dd")},i18nDate:function(){var e=this.date.getFullYear(),t=this.date.getMonth()+1;return e+" "+this.t("el.datepicker.year")+" "+this.t("el.datepicker.month"+t)},formatedToday:function(){return Tm.a.format(this.now,"yyyy-MM-dd")},realSelectedDay:{get:function(){return this.value?this.formatedDate:this.selectedDay},set:function(e){this.selectedDay=e;var t=new Date(e);this.$emit("input",t)}},date:function(){if(this.value)return this.toDate(this.value);if(this.realSelectedDay){var e=this.selectedDay.split("-");return new Date(e[0],e[1]-1,e[2])}return this.validatedRange.length?this.validatedRange[0][0]:this.now},validatedRange:function(){var e=this,t=this.range;if(!t)return[];if(t=t.reduce((function(t,n,i){var r=e.toDate(n);return e.rangeValidator(r,0===i)&&(t=t.concat(r)),t}),[]),2===t.length){var n=t,i=n[0],r=n[1];if(i>r)return console.warn("[ElementCalendar]end time should be greater than start time"),[];if(Object(ro["validateRangeInOneMonth"])(i,r))return[[i,r]];var o=[],s=new Date(i.getFullYear(),i.getMonth()+1,1),a=this.toDate(s.getTime()-Mm);if(!Object(ro["validateRangeInOneMonth"])(s,r))return console.warn("[ElementCalendar]start time and end time interval must not exceed two months"),[];o.push([i,a]);var c=this.realFirstDayOfWeek,l=s.getDay(),u=0;return l!==c&&(0===c?u=7-l:(u=c-l,u=u>0?u:7+u)),s=this.toDate(s.getTime()+u*Mm),s.getDate()<r.getDate()&&o.push([s,r]),o}return[]},realFirstDayOfWeek:function(){return this.firstDayOfWeek<1||this.firstDayOfWeek>6?0:Math.floor(this.firstDayOfWeek)}},data:function(){return{selectedDay:"",now:new Date}}},Pm=xm,Am=a(Pm,vm,ym,!1,null,null,null);Am.options.__file="packages/calendar/src/main.vue";var Dm=Am.exports;Dm.install=function(e){e.component(Dm.name,Dm)};var Nm=Dm,Lm=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-fade-in"}},[e.visible?n("div",{staticClass:"el-backtop",style:{right:e.styleRight,bottom:e.styleBottom},on:{click:function(t){return t.stopPropagation(),e.handleClick(t)}}},[e._t("default",[n("el-icon",{attrs:{name:"caret-top"}})])],2):e._e()])},Um=[];Lm._withStripped=!0;var Bm=function(e){return Math.pow(e,3)},Vm=function(e){return e<.5?Bm(2*e)/2:1-Bm(2*(1-e))/2},jm={name:"ElBacktop",props:{visibilityHeight:{type:Number,default:200},target:[String],right:{type:Number,default:40},bottom:{type:Number,default:40}},data:function(){return{el:null,container:null,visible:!1}},computed:{styleBottom:function(){return this.bottom+"px"},styleRight:function(){return this.right+"px"}},mounted:function(){this.init(),this.throttledScrollHandler=Lh()(300,this.onScroll),this.container.addEventListener("scroll",this.throttledScrollHandler)},methods:{init:function(){if(this.container=document,this.el=document.documentElement,this.target){if(this.el=document.querySelector(this.target),!this.el)throw new Error("target is not existed: "+this.target);this.container=this.el}},onScroll:function(){var e=this.el.scrollTop;this.visible=e>=this.visibilityHeight},handleClick:function(e){this.scrollToTop(),this.$emit("click",e)},scrollToTop:function(){var e=this.el,t=Date.now(),n=e.scrollTop,i=window.requestAnimationFrame||function(e){return setTimeout(e,16)},r=function r(){var o=(Date.now()-t)/500;o<1?(e.scrollTop=n*(1-Vm(o)),i(r)):e.scrollTop=0};i(r)}},beforeDestroy:function(){this.container.removeEventListener("scroll",this.throttledScrollHandler)}},Fm=jm,$m=a(Fm,Lm,Um,!1,null,null,null);$m.options.__file="packages/backtop/src/main.vue";var Hm=$m.exports;Hm.install=function(e){e.component(Hm.name,Hm)};var Km=Hm,Wm=function(e,t){if(e===window&&(e=document.documentElement),1!==e.nodeType)return[];var n=window.getComputedStyle(e,null);return t?n[t]:n},qm=function(e){return Object.keys(e||{}).map((function(t){return[t,e[t]]}))},Gm=function(e,t){return e===window||e===document?document.documentElement[t]:e[t]},zm=function(e){return Gm(e,"offsetHeight")},Ym=function(e){return Gm(e,"clientHeight")},Jm="ElInfiniteScroll",Xm={delay:{type:Number,default:200},distance:{type:Number,default:0},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},Qm=function(e,t){return Object(Hd["isHtmlElement"])(e)?qm(Xm).reduce((function(n,i){var r=i[0],o=i[1],s=o.type,a=o.default,c=e.getAttribute("infinite-scroll-"+r);switch(c=Object(Hd["isUndefined"])(t[c])?c:t[c],s){case Number:c=Number(c),c=Number.isNaN(c)?a:c;break;case Boolean:c=Object(Hd["isDefined"])(c)?"false"!==c&&Boolean(c):a;break;default:c=s(c)}return n[r]=c,n}),{}):{}},Zm=function(e){return e.getBoundingClientRect().top},e_=function(e){var t=this[Jm],n=t.el,i=t.vm,r=t.container,o=t.observer,s=Qm(n,i),a=s.distance,c=s.disabled;if(!c){var l=r.getBoundingClientRect();if(l.width||l.height){var u=!1;if(r===n){var d=r.scrollTop+Ym(r);u=r.scrollHeight-d<=a}else{var h=zm(n)+Zm(n)-Zm(r),p=zm(r),f=Number.parseFloat(Wm(r,"borderBottomWidth"));u=h-p+f<=a}u&&Object(Hd["isFunction"])(e)?e.call(i):o&&(o.disconnect(),this[Jm].observer=null)}}},t_={name:"InfiniteScroll",inserted:function(e,t,n){var i=t.value,r=n.context,o=Object(Be["getScrollContainer"])(e,!0),s=Qm(e,r),a=s.delay,c=s.immediate,l=U()(a,e_.bind(e,i));if(e[Jm]={el:e,vm:r,container:o,onScroll:l},o&&(o.addEventListener("scroll",l),c)){var u=e[Jm].observer=new MutationObserver(l);u.observe(o,{childList:!0,subtree:!0}),l()}},unbind:function(e){var t=e[Jm],n=t.container,i=t.onScroll;n&&n.removeEventListener("scroll",i)},install:function(e){e.directive(t_.name,t_)}},n_=t_,i_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-page-header"},[n("div",{staticClass:"el-page-header__left",on:{click:function(t){e.$emit("back")}}},[n("i",{staticClass:"el-icon-back"}),n("div",{staticClass:"el-page-header__title"},[e._t("title",[e._v(e._s(e.title))])],2)]),n("div",{staticClass:"el-page-header__content"},[e._t("content",[e._v(e._s(e.content))])],2)])},r_=[];i_._withStripped=!0;var o_={name:"ElPageHeader",props:{title:{type:String,default:function(){return Object(fa["t"])("el.pageHeader.title")}},content:String}},s_=o_,a_=a(s_,i_,r_,!1,null,null,null);a_.options.__file="packages/page-header/src/main.vue";var c_=a_.exports;c_.install=function(e){e.component(c_.name,c_)};var l_=c_,u_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:["el-cascader-panel",e.border&&"is-bordered"],on:{keydown:e.handleKeyDown}},e._l(e.menus,(function(e,t){return n("cascader-menu",{key:t,ref:"menu",refInFor:!0,attrs:{index:t,nodes:e}})})),1)},d_=[];u_._withStripped=!0;var h_,p_,f_=n(43),g_=n.n(f_),m_=function(e){return e.stopPropagation()},__={inject:["panel"],components:{ElCheckbox:Di.a,ElRadio:g_.a},props:{node:{required:!0},nodeId:String},computed:{config:function(){return this.panel.config},isLeaf:function(){return this.node.isLeaf},isDisabled:function(){return this.node.isDisabled},checkedValue:function(){return this.panel.checkedValue},isChecked:function(){return this.node.isSameNode(this.checkedValue)},inActivePath:function(){return this.isInPath(this.panel.activePath)},inCheckedPath:function(){var e=this;return!!this.config.checkStrictly&&this.panel.checkedNodePaths.some((function(t){return e.isInPath(t)}))},value:function(){return this.node.getValueByOption()}},methods:{handleExpand:function(){var e=this,t=this.panel,n=this.node,i=this.isDisabled,r=this.config,o=r.multiple,s=r.checkStrictly;!s&&i||n.loading||(r.lazy&&!n.loaded?t.lazyLoad(n,(function(){var t=e.isLeaf;if(t||e.handleExpand(),o){var i=!!t&&n.checked;e.handleMultiCheckChange(i)}})):t.handleExpand(n))},handleCheckChange:function(){var e=this.panel,t=this.value,n=this.node;e.handleCheckChange(t),e.handleExpand(n)},handleMultiCheckChange:function(e){this.node.doCheck(e),this.panel.calculateMultiCheckedValue()},isInPath:function(e){var t=this.node,n=e[t.level-1]||{};return n.uid===t.uid},renderPrefix:function(e){var t=this.isLeaf,n=this.isChecked,i=this.config,r=i.checkStrictly,o=i.multiple;return o?this.renderCheckbox(e):r?this.renderRadio(e):t&&n?this.renderCheckIcon(e):null},renderPostfix:function(e){var t=this.node,n=this.isLeaf;return t.loading?this.renderLoadingIcon(e):n?null:this.renderExpandIcon(e)},renderCheckbox:function(e){var t=this.node,n=this.config,i=this.isDisabled,r={on:{change:this.handleMultiCheckChange},nativeOn:{}};return n.checkStrictly&&(r.nativeOn.click=m_),e("el-checkbox",Qu()([{attrs:{value:t.checked,indeterminate:t.indeterminate,disabled:i}},r]))},renderRadio:function(e){var t=this.checkedValue,n=this.value,i=this.isDisabled;return Object(v["isEqual"])(n,t)&&(n=t),e("el-radio",{attrs:{value:t,label:n,disabled:i},on:{change:this.handleCheckChange},nativeOn:{click:m_}},[e("span")])},renderCheckIcon:function(e){return e("i",{class:"el-icon-check el-cascader-node__prefix"})},renderLoadingIcon:function(e){return e("i",{class:"el-icon-loading el-cascader-node__postfix"})},renderExpandIcon:function(e){return e("i",{class:"el-icon-arrow-right el-cascader-node__postfix"})},renderContent:function(e){var t=this.panel,n=this.node,i=t.renderLabelFn,r=i?i({node:n,data:n.data}):null;return e("span",{class:"el-cascader-node__label"},[r||n.label])}},render:function(e){var t=this,n=this.inActivePath,i=this.inCheckedPath,r=this.isChecked,o=this.isLeaf,s=this.isDisabled,a=this.config,c=this.nodeId,l=a.expandTrigger,u=a.checkStrictly,d=a.multiple,h=!u&&s,p={on:{}};return"click"===l?p.on.click=this.handleExpand:(p.on.mouseenter=function(e){t.handleExpand(),t.$emit("expand",e)},p.on.focus=function(e){t.handleExpand(),t.$emit("expand",e)}),!o||s||u||d||(p.on.click=this.handleCheckChange),e("li",Qu()([{attrs:{role:"menuitem",id:c,"aria-expanded":n,tabindex:h?null:-1},class:{"el-cascader-node":!0,"is-selectable":u,"in-active-path":n,"in-checked-path":i,"is-active":r,"is-disabled":h}},p]),[this.renderPrefix(e),this.renderContent(e),this.renderPostfix(e)])}},v_=__,y_=a(v_,h_,p_,!1,null,null,null);y_.options.__file="packages/cascader-panel/src/cascader-node.vue";var C_,E_,b_=y_.exports,T_={name:"ElCascaderMenu",mixins:[_.a],inject:["panel"],components:{ElScrollbar:W.a,CascaderNode:b_},props:{nodes:{type:Array,required:!0},index:Number},data:function(){return{activeNode:null,hoverTimer:null,id:Object(v["generateId"])()}},computed:{isEmpty:function(){return!this.nodes.length},menuId:function(){return"cascader-menu-"+this.id+"-"+this.index}},methods:{handleExpand:function(e){this.activeNode=e.target},handleMouseMove:function(e){var t=this.activeNode,n=this.hoverTimer,i=this.$refs.hoverZone;if(t&&i)if(t.contains(e.target)){clearTimeout(n);var r=this.$el.getBoundingClientRect(),o=r.left,s=e.clientX-o,a=this.$el,c=a.offsetWidth,l=a.offsetHeight,u=t.offsetTop,d=u+t.offsetHeight;i.innerHTML='\n          <path style="pointer-events: auto;" fill="transparent" d="M'+s+" "+u+" L"+c+" 0 V"+u+' Z" />\n          <path style="pointer-events: auto;" fill="transparent" d="M'+s+" "+d+" L"+c+" "+l+" V"+d+' Z" />\n        '}else n||(this.hoverTimer=setTimeout(this.clearHoverZone,this.panel.config.hoverThreshold))},clearHoverZone:function(){var e=this.$refs.hoverZone;e&&(e.innerHTML="")},renderEmptyText:function(e){return e("div",{class:"el-cascader-menu__empty-text"},[this.t("el.cascader.noData")])},renderNodeList:function(e){var t=this.menuId,n=this.panel.isHoverMenu,i={on:{}};n&&(i.on.expand=this.handleExpand);var r=this.nodes.map((function(n,r){var o=n.hasChildren;return e("cascader-node",Qu()([{key:n.uid,attrs:{node:n,"node-id":t+"-"+r,"aria-haspopup":o,"aria-owns":o?t:null}},i]))}));return[].concat(r,[n?e("svg",{ref:"hoverZone",class:"el-cascader-menu__hover-zone"}):null])}},render:function(e){var t=this.isEmpty,n=this.menuId,i={nativeOn:{}};return this.panel.isHoverMenu&&(i.nativeOn.mousemove=this.handleMouseMove),e("el-scrollbar",Qu()([{attrs:{tag:"ul",role:"menu",id:n,"wrap-class":"el-cascader-menu__wrap","view-class":{"el-cascader-menu__list":!0,"is-empty":t}},class:"el-cascader-menu"},i]),[t?this.renderEmptyText(e):this.renderNodeList(e)])}},S_=T_,R_=a(S_,C_,E_,!1,null,null,null);R_.options.__file="packages/cascader-panel/src/cascader-menu.vue";var I_=R_.exports,w_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function O_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var k_=0,M_=function(){function e(t,n,i){O_(this,e),this.data=t,this.config=n,this.parent=i||null,this.level=this.parent?this.parent.level+1:1,this.uid=k_++,this.initState(),this.initChildren()}return e.prototype.initState=function(){var e=this.config,t=e.value,n=e.label;this.value=this.data[t],this.label=this.data[n],this.pathNodes=this.calculatePathNodes(),this.path=this.pathNodes.map((function(e){return e.value})),this.pathLabels=this.pathNodes.map((function(e){return e.label})),this.loading=!1,this.loaded=!1},e.prototype.initChildren=function(){var t=this,n=this.config,i=n.children,r=this.data[i];this.hasChildren=Array.isArray(r),this.children=(r||[]).map((function(i){return new e(i,n,t)}))},e.prototype.calculatePathNodes=function(){var e=[this],t=this.parent;while(t)e.unshift(t),t=t.parent;return e},e.prototype.getPath=function(){return this.path},e.prototype.getValue=function(){return this.value},e.prototype.getValueByOption=function(){return this.config.emitPath?this.getPath():this.getValue()},e.prototype.getText=function(e,t){return e?this.pathLabels.join(t):this.label},e.prototype.isSameNode=function(e){var t=this.getValueByOption();return this.config.multiple&&Array.isArray(e)?e.some((function(e){return Object(v["isEqual"])(e,t)})):Object(v["isEqual"])(e,t)},e.prototype.broadcast=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r="onParent"+Object(v["capitalize"])(e);this.children.forEach((function(t){t&&(t.broadcast.apply(t,[e].concat(n)),t[r]&&t[r].apply(t,n))}))},e.prototype.emit=function(e){var t=this.parent,n="onChild"+Object(v["capitalize"])(e);if(t){for(var i=arguments.length,r=Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];t[n]&&t[n].apply(t,r),t.emit.apply(t,[e].concat(r))}},e.prototype.onParentCheck=function(e){this.isDisabled||this.setCheckState(e)},e.prototype.onChildCheck=function(){var e=this.children,t=e.filter((function(e){return!e.isDisabled})),n=!!t.length&&t.every((function(e){return e.checked}));this.setCheckState(n)},e.prototype.setCheckState=function(e){var t=this.children.length,n=this.children.reduce((function(e,t){var n=t.checked?1:t.indeterminate?.5:0;return e+n}),0);this.checked=e,this.indeterminate=n!==t&&n>0},e.prototype.syncCheckState=function(e){var t=this.getValueByOption(),n=this.isSameNode(e,t);this.doCheck(n)},e.prototype.doCheck=function(e){this.checked!==e&&(this.config.checkStrictly?this.checked=e:(this.broadcast("check",e),this.setCheckState(e),this.emit("check")))},w_(e,[{key:"isDisabled",get:function(){var e=this.data,t=this.parent,n=this.config,i=n.disabled,r=n.checkStrictly;return e[i]||!r&&t&&t.isDisabled}},{key:"isLeaf",get:function(){var e=this.data,t=this.loaded,n=this.hasChildren,i=this.children,r=this.config,o=r.lazy,s=r.leaf;if(o){var a=Object(It["isDef"])(e[s])?e[s]:!!t&&!i.length;return this.hasChildren=!a,a}return!n}}]),e}(),x_=M_;function P_(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var A_=function e(t,n){return t.reduce((function(t,i){return i.isLeaf?t.push(i):(!n&&t.push(i),t=t.concat(e(i.children,n))),t}),[])},D_=function(){function e(t,n){P_(this,e),this.config=n,this.initNodes(t)}return e.prototype.initNodes=function(e){var t=this;e=Object(v["coerceTruthyValueToArray"])(e),this.nodes=e.map((function(e){return new x_(e,t.config)})),this.flattedNodes=this.getFlattedNodes(!1,!1),this.leafNodes=this.getFlattedNodes(!0,!1)},e.prototype.appendNode=function(e,t){var n=new x_(e,this.config,t),i=t?t.children:this.nodes;i.push(n)},e.prototype.appendNodes=function(e,t){var n=this;e=Object(v["coerceTruthyValueToArray"])(e),e.forEach((function(e){return n.appendNode(e,t)}))},e.prototype.getNodes=function(){return this.nodes},e.prototype.getFlattedNodes=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e?this.leafNodes:this.flattedNodes;return t?n:A_(this.nodes,e)},e.prototype.getNodeByValue=function(e){var t=this.getFlattedNodes(!1,!this.config.lazy).filter((function(t){return Object(v["valueEquals"])(t.path,e)||t.value===e}));return t&&t.length?t[0]:null},e}(),N_=D_,L_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},U_=Cp.a.keys,B_={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:v["noop"],value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},V_=function(e){return!e.getAttribute("aria-owns")},j_=function(e,t){var n=e.parentNode;if(n){var i=n.querySelectorAll('.el-cascader-node[tabindex="-1"]'),r=Array.prototype.indexOf.call(i,e);return i[r+t]||null}return null},F_=function(e,t){if(e){var n=e.id.split("-");return Number(n[n.length-2])}},$_=function(e){e&&(e.focus(),!V_(e)&&e.click())},H_=function(e){if(e){var t=e.querySelector("input");t?t.click():V_(e)&&e.click()}},K_={name:"ElCascaderPanel",components:{CascaderMenu:I_},props:{value:{},options:Array,props:Object,border:{type:Boolean,default:!0},renderLabel:Function},provide:function(){return{panel:this}},data:function(){return{checkedValue:null,checkedNodePaths:[],store:[],menus:[],activePath:[],loadCount:0}},computed:{config:function(){return Rt()(L_({},B_),this.props||{})},multiple:function(){return this.config.multiple},checkStrictly:function(){return this.config.checkStrictly},leafOnly:function(){return!this.checkStrictly},isHoverMenu:function(){return"hover"===this.config.expandTrigger},renderLabelFn:function(){return this.renderLabel||this.$scopedSlots.default}},watch:{options:{handler:function(){this.initStore()},immediate:!0,deep:!0},value:function(){this.syncCheckedValue(),this.checkStrictly&&this.calculateCheckedNodePaths()},checkedValue:function(e){Object(v["isEqual"])(e,this.value)||(this.checkStrictly&&this.calculateCheckedNodePaths(),this.$emit("input",e),this.$emit("change",e))}},mounted:function(){this.isEmptyValue(this.value)||this.syncCheckedValue()},methods:{initStore:function(){var e=this.config,t=this.options;e.lazy&&Object(v["isEmpty"])(t)?this.lazyLoad():(this.store=new N_(t,e),this.menus=[this.store.getNodes()],this.syncMenuState())},syncCheckedValue:function(){var e=this.value,t=this.checkedValue;Object(v["isEqual"])(e,t)||(this.activePath=[],this.checkedValue=e,this.syncMenuState())},syncMenuState:function(){var e=this.multiple,t=this.checkStrictly;this.syncActivePath(),e&&this.syncMultiCheckState(),t&&this.calculateCheckedNodePaths(),this.$nextTick(this.scrollIntoView)},syncMultiCheckState:function(){var e=this,t=this.getFlattedNodes(this.leafOnly);t.forEach((function(t){t.syncCheckState(e.checkedValue)}))},isEmptyValue:function(e){var t=this.multiple,n=this.config,i=n.emitPath;return!(!t&&!i)&&Object(v["isEmpty"])(e)},syncActivePath:function(){var e=this,t=this.store,n=this.multiple,i=this.activePath,r=this.checkedValue;if(Object(v["isEmpty"])(i))if(this.isEmptyValue(r))this.activePath=[],this.menus=[t.getNodes()];else{var o=n?r[0]:r,s=this.getNodeByValue(o)||{},a=(s.pathNodes||[]).slice(0,-1);this.expandNodes(a)}else{var c=i.map((function(t){return e.getNodeByValue(t.getValue())}));this.expandNodes(c)}},expandNodes:function(e){var t=this;e.forEach((function(e){return t.handleExpand(e,!0)}))},calculateCheckedNodePaths:function(){var e=this,t=this.checkedValue,n=this.multiple,i=n?Object(v["coerceTruthyValueToArray"])(t):[t];this.checkedNodePaths=i.map((function(t){var n=e.getNodeByValue(t);return n?n.pathNodes:[]}))},handleKeyDown:function(e){var t=e.target,n=e.keyCode;switch(n){case U_.up:var i=j_(t,-1);$_(i);break;case U_.down:var r=j_(t,1);$_(r);break;case U_.left:var o=this.$refs.menu[F_(t)-1];if(o){var s=o.$el.querySelector('.el-cascader-node[aria-expanded="true"]');$_(s)}break;case U_.right:var a=this.$refs.menu[F_(t)+1];if(a){var c=a.$el.querySelector('.el-cascader-node[tabindex="-1"]');$_(c)}break;case U_.enter:H_(t);break;case U_.esc:case U_.tab:this.$emit("close");break;default:return}},handleExpand:function(e,t){var n=this.activePath,i=e.level,r=n.slice(0,i-1),o=this.menus.slice(0,i);if(e.isLeaf||(r.push(e),o.push(e.children)),this.activePath=r,this.menus=o,!t){var s=r.map((function(e){return e.getValue()})),a=n.map((function(e){return e.getValue()}));Object(v["valueEquals"])(s,a)||(this.$emit("active-item-change",s),this.$emit("expand-change",s))}},handleCheckChange:function(e){this.checkedValue=e},lazyLoad:function(e,t){var n=this,i=this.config;e||(e=e||{root:!0,level:0},this.store=new N_([],i),this.menus=[this.store.getNodes()]),e.loading=!0;var r=function(i){var r=e.root?null:e;if(i&&i.length&&n.store.appendNodes(i,r),e.loading=!1,e.loaded=!0,Array.isArray(n.checkedValue)){var o=n.checkedValue[n.loadCount++],s=n.config.value,a=n.config.leaf;if(Array.isArray(i)&&i.filter((function(e){return e[s]===o})).length>0){var c=n.store.getNodeByValue(o);c.data[a]||n.lazyLoad(c,(function(){n.handleExpand(c)})),n.loadCount===n.checkedValue.length&&n.$parent.computePresentText()}}t&&t(i)};i.lazyLoad(e,r)},calculateMultiCheckedValue:function(){this.checkedValue=this.getCheckedNodes(this.leafOnly).map((function(e){return e.getValueByOption()}))},scrollIntoView:function(){if(!this.$isServer){var e=this.$refs.menu||[];e.forEach((function(e){var t=e.$el;if(t){var n=t.querySelector(".el-scrollbar__wrap"),i=t.querySelector(".el-cascader-node.is-active")||t.querySelector(".el-cascader-node.in-active-path");ni()(n,i)}}))}},getNodeByValue:function(e){return this.store.getNodeByValue(e)},getFlattedNodes:function(e){var t=!this.config.lazy;return this.store.getFlattedNodes(e,t)},getCheckedNodes:function(e){var t=this.checkedValue,n=this.multiple;if(n){var i=this.getFlattedNodes(e);return i.filter((function(e){return e.checked}))}return this.isEmptyValue(t)?[]:[this.getNodeByValue(t)]},clearCheckedNodes:function(){var e=this.config,t=this.leafOnly,n=e.multiple,i=e.emitPath;n?(this.getCheckedNodes(t).filter((function(e){return!e.isDisabled})).forEach((function(e){return e.doCheck(!1)})),this.calculateMultiCheckedValue()):this.checkedValue=i?[]:null}}},W_=K_,q_=a(W_,u_,d_,!1,null,null,null);q_.options.__file="packages/cascader-panel/src/cascader-panel.vue";var G_=q_.exports;G_.install=function(e){e.component(G_.name,G_)};var z_,Y_,J_=G_,X_={name:"ElAvatar",props:{size:{type:[Number,String],validator:function(e){return"string"===typeof e?["large","medium","small"].includes(e):"number"===typeof e}},shape:{type:String,default:"circle",validator:function(e){return["circle","square"].includes(e)}},icon:String,src:String,alt:String,srcSet:String,error:Function,fit:{type:String,default:"cover"}},data:function(){return{isImageExist:!0}},computed:{avatarClass:function(){var e=this.size,t=this.icon,n=this.shape,i=["el-avatar"];return e&&"string"===typeof e&&i.push("el-avatar--"+e),t&&i.push("el-avatar--icon"),n&&i.push("el-avatar--"+n),i.join(" ")}},methods:{handleError:function(){var e=this.error,t=e?e():void 0;!1!==t&&(this.isImageExist=!1)},renderAvatar:function(){var e=this.$createElement,t=this.icon,n=this.src,i=this.alt,r=this.isImageExist,o=this.srcSet,s=this.fit;return r&&n?e("img",{attrs:{src:n,alt:i,srcSet:o},on:{error:this.handleError},style:{"object-fit":s}}):t?e("i",{class:t}):this.$slots.default}},render:function(){var e=arguments[0],t=this.avatarClass,n=this.size,i="number"===typeof n?{height:n+"px",width:n+"px",lineHeight:n+"px"}:{};return e("span",{class:t,style:i},[this.renderAvatar()])}},Q_=X_,Z_=a(Q_,z_,Y_,!1,null,null,null);Z_.options.__file="packages/avatar/src/main.vue";var ev=Z_.exports;ev.install=function(e){e.component(ev.name,ev)};var tv=ev,nv=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-drawer-fade"},on:{"after-enter":e.afterEnter,"after-leave":e.afterLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-drawer__wrapper",attrs:{tabindex:"-1"}},[n("div",{staticClass:"el-drawer__container",class:e.visible&&"el-drawer__open",attrs:{role:"document",tabindex:"-1"},on:{click:function(t){return t.target!==t.currentTarget?null:e.handleWrapperClick(t)}}},[n("div",{ref:"drawer",staticClass:"el-drawer",class:[e.direction,e.customClass],style:e.isHorizontal?"width: "+e.drawerSize:"height: "+e.drawerSize,attrs:{"aria-modal":"true","aria-labelledby":"el-drawer__title","aria-label":e.title,role:"dialog",tabindex:"-1"}},[e.withHeader?n("header",{staticClass:"el-drawer__header",attrs:{id:"el-drawer__title"}},[e._t("title",[n("span",{attrs:{role:"heading",title:e.title}},[e._v(e._s(e.title))])]),e.showClose?n("button",{staticClass:"el-drawer__close-btn",attrs:{"aria-label":"close "+(e.title||"drawer"),type:"button"},on:{click:e.closeDrawer}},[n("i",{staticClass:"el-dialog__close el-icon el-icon-close"})]):e._e()],2):e._e(),e.rendered?n("section",{staticClass:"el-drawer__body"},[e._t("default")],2):e._e()])])])])},iv=[];nv._withStripped=!0;var rv={name:"ElDrawer",mixins:[S.a,O.a],props:{appendToBody:{type:Boolean,default:!1},beforeClose:{type:Function},customClass:{type:String,default:""},closeOnPressEscape:{type:Boolean,default:!0},destroyOnClose:{type:Boolean,default:!1},modal:{type:Boolean,default:!0},direction:{type:String,default:"rtl",validator:function(e){return-1!==["ltr","rtl","ttb","btt"].indexOf(e)}},modalAppendToBody:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},size:{type:[Number,String],default:"30%"},title:{type:String,default:""},visible:{type:Boolean},wrapperClosable:{type:Boolean,default:!0},withHeader:{type:Boolean,default:!0}},computed:{isHorizontal:function(){return"rtl"===this.direction||"ltr"===this.direction},drawerSize:function(){return"number"===typeof this.size?this.size+"px":this.size}},data:function(){return{closed:!1,prevActiveElement:null}},watch:{visible:function(e){var t=this;e?(this.closed=!1,this.$emit("open"),this.appendToBody&&document.body.appendChild(this.$el),this.prevActiveElement=document.activeElement):(this.closed||(this.$emit("close"),!0===this.destroyOnClose&&(this.rendered=!1)),this.$nextTick((function(){t.prevActiveElement&&t.prevActiveElement.focus()})))}},methods:{afterEnter:function(){this.$emit("opened")},afterLeave:function(){this.$emit("closed")},hide:function(e){!1!==e&&(this.$emit("update:visible",!1),this.$emit("close"),!0===this.destroyOnClose&&(this.rendered=!1),this.closed=!0)},handleWrapperClick:function(){this.wrapperClosable&&this.closeDrawer()},closeDrawer:function(){"function"===typeof this.beforeClose?this.beforeClose(this.hide):this.hide()},handleClose:function(){this.closeDrawer()}},mounted:function(){this.visible&&(this.rendered=!0,this.open(),this.appendToBody&&document.body.appendChild(this.$el))},destroyed:function(){this.appendToBody&&this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}},ov=rv,sv=a(ov,nv,iv,!1,null,null,null);sv.options.__file="packages/drawer/src/main.vue";var av=sv.exports;av.install=function(e){e.component(av.name,av)};var cv=av,lv=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-popover",e._b({attrs:{trigger:"click"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},"el-popover",e.$attrs,!1),[n("div",{staticClass:"el-popconfirm"},[n("p",{staticClass:"el-popconfirm__main"},[e.hideIcon?e._e():n("i",{staticClass:"el-popconfirm__icon",class:e.icon,style:{color:e.iconColor}}),e._v("\n      "+e._s(e.title)+"\n    ")]),n("div",{staticClass:"el-popconfirm__action"},[n("el-button",{attrs:{size:"mini",type:e.cancelButtonType},on:{click:e.cancel}},[e._v("\n        "+e._s(e.displayCancelButtonText)+"\n      ")]),n("el-button",{attrs:{size:"mini",type:e.confirmButtonType},on:{click:e.confirm}},[e._v("\n        "+e._s(e.displayConfirmButtonText)+"\n      ")])],1)]),e._t("reference",null,{slot:"reference"})],2)},uv=[];lv._withStripped=!0;var dv=n(44),hv=n.n(dv),pv={name:"ElPopconfirm",props:{title:{type:String},confirmButtonText:{type:String},cancelButtonText:{type:String},confirmButtonType:{type:String,default:"primary"},cancelButtonType:{type:String,default:"text"},icon:{type:String,default:"el-icon-question"},iconColor:{type:String,default:"#f90"},hideIcon:{type:Boolean,default:!1}},components:{ElPopover:hv.a,ElButton:se.a},data:function(){return{visible:!1}},computed:{displayConfirmButtonText:function(){return this.confirmButtonText||Object(fa["t"])("el.popconfirm.confirmButtonText")},displayCancelButtonText:function(){return this.cancelButtonText||Object(fa["t"])("el.popconfirm.cancelButtonText")}},methods:{confirm:function(){this.visible=!1,this.$emit("confirm")},cancel:function(){this.visible=!1,this.$emit("cancel")}}},fv=pv,gv=a(fv,lv,uv,!1,null,null,null);gv.options.__file="packages/popconfirm/src/main.vue";var mv=gv.exports;mv.install=function(e){e.component(mv.name,mv)};var _v=mv,vv=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.uiLoading?[n("div",e._b({class:["el-skeleton",e.animated?"is-animated":""]},"div",e.$attrs,!1),[e._l(e.count,(function(t){return[e.loading?e._t("template",e._l(e.rows,(function(i){return n("el-skeleton-item",{key:t+"-"+i,class:{"el-skeleton__paragraph":1!==i,"is-first":1===i,"is-last":i===e.rows&&e.rows>1},attrs:{variant:"p"}})}))):e._e()]}))],2)]:[e._t("default",null,null,e.$attrs)]],2)},yv=[];vv._withStripped=!0;var Cv={name:"ElSkeleton",props:{animated:{type:Boolean,default:!1},count:{type:Number,default:1},rows:{type:Number,default:4},loading:{type:Boolean,default:!0},throttle:{type:Number,default:0}},watch:{loading:{handler:function(e){var t=this;this.throttle<=0?this.uiLoading=e:e?(clearTimeout(this.timeoutHandle),this.timeoutHandle=setTimeout((function(){t.uiLoading=t.loading}),this.throttle)):this.uiLoading=e},immediate:!0}},data:function(){return{uiLoading:this.throttle<=0&&this.loading}}},Ev=Cv,bv=a(Ev,vv,yv,!1,null,null,null);bv.options.__file="packages/skeleton/src/index.vue";var Tv=bv.exports;Tv.install=function(e){e.component(Tv.name,Tv)};var Sv=Tv,Rv=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:["el-skeleton__item","el-skeleton__"+e.variant]},["image"===e.variant?n("img-placeholder"):e._e()],1)},Iv=[];Rv._withStripped=!0;var wv=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{attrs:{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M64 896V128h896v768H64z m64-128l192-192 116.352 116.352L640 448l256 307.2V192H128v576z m224-480a96 96 0 1 1-0.064 192.064A96 96 0 0 1 352 288z"}})])},Ov=[];wv._withStripped=!0;var kv={name:"ImgPlaceholder"},Mv=kv,xv=a(Mv,wv,Ov,!1,null,null,null);xv.options.__file="packages/skeleton/src/img-placeholder.vue";var Pv,Av=xv.exports,Dv={name:"ElSkeletonItem",props:{variant:{type:String,default:"text"}},components:(Pv={},Pv[Av.name]=Av,Pv)},Nv=Dv,Lv=a(Nv,Rv,Iv,!1,null,null,null);Lv.options.__file="packages/skeleton/src/item.vue";var Uv=Lv.exports;Uv.install=function(e){e.component(Uv.name,Uv)};var Bv=Uv,Vv=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-empty"},[n("div",{staticClass:"el-empty__image",style:e.imageStyle},[e.image?n("img",{attrs:{src:e.image,ondragstart:"return false"}}):e._t("image",[n("img-empty")])],2),n("div",{staticClass:"el-empty__description"},[e.$slots.description?e._t("description"):n("p",[e._v(e._s(e.emptyDescription))])],2),e.$slots.default?n("div",{staticClass:"el-empty__bottom"},[e._t("default")],2):e._e()])},jv=[];Vv._withStripped=!0;var Fv=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{attrs:{viewBox:"0 0 79 86",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[n("defs",[n("linearGradient",{attrs:{id:"linearGradient-1-"+e.id,x1:"38.8503086%",y1:"0%",x2:"61.1496914%",y2:"100%"}},[n("stop",{attrs:{"stop-color":"#FCFCFD",offset:"0%"}}),n("stop",{attrs:{"stop-color":"#EEEFF3",offset:"100%"}})],1),n("linearGradient",{attrs:{id:"linearGradient-2-"+e.id,x1:"0%",y1:"9.5%",x2:"100%",y2:"90.5%"}},[n("stop",{attrs:{"stop-color":"#FCFCFD",offset:"0%"}}),n("stop",{attrs:{"stop-color":"#E9EBEF",offset:"100%"}})],1),n("rect",{attrs:{id:"path-3-"+e.id,x:"0",y:"0",width:"17",height:"36"}})],1),n("g",{attrs:{id:"Illustrations",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"}},[n("g",{attrs:{id:"B-type",transform:"translate(-1268.000000, -535.000000)"}},[n("g",{attrs:{id:"Group-2",transform:"translate(1268.000000, 535.000000)"}},[n("path",{attrs:{id:"Oval-Copy-2",d:"M39.5,86 C61.3152476,86 79,83.9106622 79,81.3333333 C79,78.7560045 57.3152476,78 35.5,78 C13.6847524,78 0,78.7560045 0,81.3333333 C0,83.9106622 17.6847524,86 39.5,86 Z",fill:"#F7F8FC"}}),n("polygon",{attrs:{id:"Rectangle-Copy-14",fill:"#E5E7E9",transform:"translate(27.500000, 51.500000) scale(1, -1) translate(-27.500000, -51.500000) ",points:"13 58 53 58 42 45 2 45"}}),n("g",{attrs:{id:"Group-Copy",transform:"translate(34.500000, 31.500000) scale(-1, 1) rotate(-25.000000) translate(-34.500000, -31.500000) translate(7.000000, 10.000000)"}},[n("polygon",{attrs:{id:"Rectangle-Copy-10",fill:"#E5E7E9",transform:"translate(11.500000, 5.000000) scale(1, -1) translate(-11.500000, -5.000000) ",points:"2.84078316e-14 3 18 3 23 7 5 7"}}),n("polygon",{attrs:{id:"Rectangle-Copy-11",fill:"#EDEEF2",points:"-3.69149156e-15 7 38 7 38 43 -3.69149156e-15 43"}}),n("rect",{attrs:{id:"Rectangle-Copy-12",fill:"url(#linearGradient-1-"+e.id+")",transform:"translate(46.500000, 25.000000) scale(-1, 1) translate(-46.500000, -25.000000) ",x:"38",y:"7",width:"17",height:"36"}}),n("polygon",{attrs:{id:"Rectangle-Copy-13",fill:"#F8F9FB",transform:"translate(39.500000, 3.500000) scale(-1, 1) translate(-39.500000, -3.500000) ",points:"24 7 41 7 55 -3.63806207e-12 38 -3.63806207e-12"}})]),n("rect",{attrs:{id:"Rectangle-Copy-15",fill:"url(#linearGradient-2-"+e.id+")",x:"13",y:"45",width:"40",height:"36"}}),n("g",{attrs:{id:"Rectangle-Copy-17",transform:"translate(53.000000, 45.000000)"}},[n("mask",{attrs:{id:"mask-4-"+e.id,fill:"white"}},[n("use",{attrs:{"xlink:href":"#path-3-"+e.id}})]),n("use",{attrs:{id:"Mask",fill:"#E0E3E9",transform:"translate(8.500000, 18.000000) scale(-1, 1) translate(-8.500000, -18.000000) ","xlink:href":"#path-3-"+e.id}}),n("polygon",{attrs:{id:"Rectangle-Copy",fill:"#D5D7DE",mask:"url(#mask-4-"+e.id+")",transform:"translate(12.000000, 9.000000) scale(-1, 1) translate(-12.000000, -9.000000) ",points:"7 0 24 0 20 18 -1.70530257e-13 16"}})]),n("polygon",{attrs:{id:"Rectangle-Copy-18",fill:"#F8F9FB",transform:"translate(66.000000, 51.500000) scale(-1, 1) translate(-66.000000, -51.500000) ",points:"62 45 79 45 70 58 53 58"}})])])])])},$v=[];Fv._withStripped=!0;var Hv=0,Kv={name:"ImgEmpty",data:function(){return{id:++Hv}}},Wv=Kv,qv=a(Wv,Fv,$v,!1,null,null,null);qv.options.__file="packages/empty/src/img-empty.vue";var Gv,zv=qv.exports,Yv={name:"ElEmpty",components:(Gv={},Gv[zv.name]=zv,Gv),props:{image:{type:String,default:""},imageSize:Number,description:{type:String,default:""}},computed:{emptyDescription:function(){return this.description||Object(fa["t"])("el.empty.description")},imageStyle:function(){return{width:this.imageSize?this.imageSize+"px":""}}}},Jv=Yv,Xv=a(Jv,Vv,jv,!1,null,null,null);Xv.options.__file="packages/empty/src/index.vue";var Qv=Xv.exports;Qv.install=function(e){e.component(Qv.name,Qv)};var Zv,ey=Qv,ty=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ny={name:"ElDescriptionsRow",props:{row:{type:Array}},inject:["elDescriptions"],render:function(e){var t=this.elDescriptions,n=(this.row||[]).map((function(e){return ty({},e,{label:e.slots.label||e.props.label},["labelClassName","contentClassName","labelStyle","contentStyle"].reduce((function(n,i){return n[i]=e.props[i]||t[i],n}),{}))}));return"vertical"===t.direction?e("tbody",[e("tr",{class:"el-descriptions-row"},[n.map((function(n){var i;return e("th",{class:(i={"el-descriptions-item__cell":!0,"el-descriptions-item__label":!0,"has-colon":!t.border&&t.colon,"is-bordered-label":t.border},i[n.labelClassName]=!0,i),style:n.labelStyle,attrs:{colSpan:n.props.span}},[n.label])}))]),e("tr",{class:"el-descriptions-row"},[n.map((function(t){return e("td",{class:["el-descriptions-item__cell","el-descriptions-item__content",t.contentClassName],style:t.contentStyle,attrs:{colSpan:t.props.span}},[t.slots.default])}))])]):t.border?e("tbody",[e("tr",{class:"el-descriptions-row"},[n.map((function(n){var i;return[e("th",{class:(i={"el-descriptions-item__cell":!0,"el-descriptions-item__label":!0,"is-bordered-label":t.border},i[n.labelClassName]=!0,i),style:n.labelStyle,attrs:{colSpan:"1"}},[n.label]),e("td",{class:["el-descriptions-item__cell","el-descriptions-item__content",n.contentClassName],style:n.contentStyle,attrs:{colSpan:2*n.props.span-1}},[n.slots.default])]}))])]):e("tbody",[e("tr",{class:"el-descriptions-row"},[n.map((function(n){var i;return e("td",{class:"el-descriptions-item el-descriptions-item__cell",attrs:{colSpan:n.props.span}},[e("div",{class:"el-descriptions-item__container"},[e("span",{class:(i={"el-descriptions-item__label":!0,"has-colon":t.colon},i[n.labelClassName]=!0,i),style:n.labelStyle},[n.props.label]),e("span",{class:["el-descriptions-item__content",n.contentClassName],style:n.contentStyle},[n.slots.default])])])}))])])}},iy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ry={name:"ElDescriptions",components:(Zv={},Zv[ny.name]=ny,Zv),props:{border:{type:Boolean,default:!1},column:{type:Number,default:3},direction:{type:String,default:"horizontal"},size:{type:String},title:{type:String,default:""},extra:{type:String,default:""},labelStyle:{type:Object},contentStyle:{type:Object},labelClassName:{type:String,default:""},contentClassName:{type:String,default:""},colon:{type:Boolean,default:!0}},computed:{descriptionsSize:function(){return this.size||(this.$ELEMENT||{}).size}},provide:function(){return{elDescriptions:this}},methods:{getOptionProps:function(e){if(e.componentOptions){var t=e.componentOptions,n=t.propsData,i=void 0===n?{}:n,r=t.Ctor,o=void 0===r?{}:r,s=(o.options||{}).props||{},a={};for(var c in s){var l=s[c],u=l.default;void 0!==u&&(a[c]=Object(Hd["isFunction"])(u)?u.call(e):u)}return iy({},a,i)}return{}},getSlots:function(e){var t=this,n=e.componentOptions||{},i=e.children||n.children||[],r={};return i.forEach((function(e){if(!t.isEmptyElement(e)){var n=e.data&&e.data.slot||"default";r[n]=r[n]||[],"template"===e.tag?r[n].push(e.children):r[n].push(e)}})),iy({},r)},isEmptyElement:function(e){return!(e.tag||e.text&&""!==e.text.trim())},filledNode:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return e.props||(e.props={}),t>n&&(e.props.span=n),i&&(e.props.span=n),e},getRows:function(){var e=this,t=(this.$slots.default||[]).filter((function(e){return e.tag&&e.componentOptions&&"ElDescriptionsItem"===e.componentOptions.Ctor.options.name})),n=t.map((function(t){return{props:e.getOptionProps(t),slots:e.getSlots(t),vnode:t}})),i=[],r=[],o=this.column;return n.forEach((function(n,s){var a=n.props.span||1;if(s===t.length-1)return r.push(e.filledNode(n,a,o,!0)),void i.push(r);a<o?(o-=a,r.push(n)):(r.push(e.filledNode(n,a,o)),i.push(r),o=e.column,r=[])})),i}},render:function(){var e=arguments[0],t=this.title,n=this.extra,i=this.border,r=this.descriptionsSize,o=this.$slots,s=this.getRows();return e("div",{class:"el-descriptions"},[t||n||o.title||o.extra?e("div",{class:"el-descriptions__header"},[e("div",{class:"el-descriptions__title"},[o.title?o.title:t]),e("div",{class:"el-descriptions__extra"},[o.extra?o.extra:n])]):null,e("div",{class:"el-descriptions__body"},[e("table",{class:["el-descriptions__table",{"is-bordered":i},r?"el-descriptions--"+r:""]},[s.map((function(t){return e(ny,{attrs:{row:t}})}))])])])},install:function(e){e.component(ry.name,ry)}},oy=ry,sy={name:"ElDescriptionsItem",props:{label:{type:String,default:""},span:{type:Number,default:1},contentClassName:{type:String,default:""},contentStyle:{type:Object},labelClassName:{type:String,default:""},labelStyle:{type:Object}},render:function(){return null},install:function(e){e.component(sy.name,sy)}},ay=sy,cy=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-result"},[n("div",{staticClass:"el-result__icon"},[e._t("icon",[n(e.iconElement,{tag:"component",class:e.iconElement})])],2),e.title||e.$slots.title?n("div",{staticClass:"el-result__title"},[e._t("title",[n("p",[e._v(e._s(e.title))])])],2):e._e(),e.subTitle||e.$slots.subTitle?n("div",{staticClass:"el-result__subtitle"},[e._t("subTitle",[n("p",[e._v(e._s(e.subTitle))])])],2):e._e(),e.$slots.extra?n("div",{staticClass:"el-result__extra"},[e._t("extra")],2):e._e()])},ly=[];cy._withStripped=!0;var uy=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{attrs:{viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M24,4 C35.045695,4 44,12.954305 44,24 C44,35.045695 35.045695,44 24,44 C12.954305,44 4,35.045695 4,24 C4,12.954305 12.954305,4 24,4 Z M34.5548098,16.4485711 C33.9612228,15.8504763 32.9988282,15.8504763 32.4052412,16.4485711 L32.4052412,16.4485711 L21.413757,27.5805811 L21.413757,27.5805811 L21.4034642,27.590855 C21.0097542,27.9781674 20.3766105,27.9729811 19.9892981,27.5792711 L19.9892981,27.5792711 L15.5947588,23.1121428 C15.0011718,22.514048 14.0387772,22.514048 13.4451902,23.1121428 C12.8516033,23.7102376 12.8516033,24.6799409 13.4451902,25.2780357 L13.4451902,25.2780357 L19.6260786,31.5514289 C20.2196656,32.1495237 21.1820602,32.1495237 21.7756472,31.5514289 L21.7756472,31.5514289 L34.5548098,18.614464 C35.1483967,18.0163692 35.1483967,17.0466659 34.5548098,16.4485711 Z"}})])},dy=[];uy._withStripped=!0;var hy={name:"IconSuccess"},py=hy,fy=a(py,uy,dy,!1,null,null,null);fy.options.__file="packages/result/src/icon-success.vue";var gy=fy.exports,my=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{attrs:{viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M24,4 C35.045695,4 44,12.954305 44,24 C44,35.045695 35.045695,44 24,44 C12.954305,44 4,35.045695 4,24 C4,12.954305 12.954305,4 24,4 Z M32.57818,15.42182 C32.0157534,14.8593933 31.1038797,14.8593933 30.541453,15.42182 L30.541453,15.42182 L24.0006789,21.9625941 L17.458547,15.42182 C16.8961203,14.8593933 15.9842466,14.8593933 15.42182,15.42182 C14.8593933,15.9842466 14.8593933,16.8961203 15.42182,17.458547 L15.42182,17.458547 L21.9639519,23.9993211 L15.42182,30.541453 C14.8593933,31.1038797 14.8593933,32.0157534 15.42182,32.57818 C15.9842466,33.1406067 16.8961203,33.1406067 17.458547,32.57818 L17.458547,32.57818 L24.0006789,26.0360481 L30.541453,32.57818 C31.1038797,33.1406067 32.0157534,33.1406067 32.57818,32.57818 C33.1406067,32.0157534 33.1406067,31.1038797 32.57818,30.541453 L32.57818,30.541453 L26.0374059,23.9993211 L32.57818,17.458547 C33.1406067,16.8961203 33.1406067,15.9842466 32.57818,15.42182 Z"}})])},_y=[];my._withStripped=!0;var vy={name:"IconError"},yy=vy,Cy=a(yy,my,_y,!1,null,null,null);Cy.options.__file="packages/result/src/icon-error.vue";var Ey=Cy.exports,by=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{attrs:{viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M24,4 C35.045695,4 44,12.954305 44,24 C44,35.045695 35.045695,44 24,44 C12.954305,44 4,35.045695 4,24 C4,12.954305 12.954305,4 24,4 Z M24,31 C22.8954305,31 22,31.8954305 22,33 C22,34.1045695 22.8954305,35 24,35 C25.1045695,35 26,34.1045695 26,33 C26,31.8954305 25.1045695,31 24,31 Z M24,14 C23.1715729,14 22.5,14.6715729 22.5,15.5 L22.5,15.5 L22.5,27.5 C22.5,28.3284271 23.1715729,29 24,29 C24.8284271,29 25.5,28.3284271 25.5,27.5 L25.5,27.5 L25.5,15.5 C25.5,14.6715729 24.8284271,14 24,14 Z"}})])},Ty=[];by._withStripped=!0;var Sy={name:"IconWarning"},Ry=Sy,Iy=a(Ry,by,Ty,!1,null,null,null);Iy.options.__file="packages/result/src/icon-warning.vue";var wy=Iy.exports,Oy=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{attrs:{viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M24,4 C35.045695,4 44,12.954305 44,24 C44,35.045695 35.045695,44 24,44 C12.954305,44 4,35.045695 4,24 C4,12.954305 12.954305,4 24,4 Z M24,19 L21,19 C20.1715729,19 19.5,19.6715729 19.5,20.5 C19.5,21.3284271 20.1715729,22 21,22 L21,22 L22.5,22 L22.5,31 L21,31 C20.1715729,31 19.5,31.6715729 19.5,32.5 C19.5,33.3284271 20.1715729,34 21,34 L21,34 L27,34 C27.8284271,34 28.5,33.3284271 28.5,32.5 C28.5,31.6715729 27.8284271,31 27,31 L27,31 L25.5,31 L25.5,20.5 C25.5,19.6715729 24.8284271,19 24,19 L24,19 Z M24,13 C22.8954305,13 22,13.8954305 22,15 C22,16.1045695 22.8954305,17 24,17 C25.1045695,17 26,16.1045695 26,15 C26,13.8954305 25.1045695,13 24,13 Z"}})])},ky=[];Oy._withStripped=!0;var My={name:"IconInfo"},xy=My,Py=a(xy,Oy,ky,!1,null,null,null);Py.options.__file="packages/result/src/icon-info.vue";var Ay,Dy=Py.exports,Ny={success:"icon-success",warning:"icon-warning",error:"icon-error",info:"icon-info"},Ly={name:"ElResult",components:(Ay={},Ay[gy.name]=gy,Ay[Ey.name]=Ey,Ay[wy.name]=wy,Ay[Dy.name]=Dy,Ay),props:{title:{type:String,default:""},subTitle:{type:String,default:""},icon:{type:String,default:"info"}},computed:{iconElement:function(){var e=this.icon;return e&&Ny[e]?Ny[e]:"icon-info"}}},Uy=Ly,By=a(Uy,cy,ly,!1,null,null,null);By.options.__file="packages/result/src/index.vue";var Vy=By.exports;Vy.install=function(e){e.component(Vy.name,Vy)};var jy=Vy,Fy=[C,A,re,pe,Ce,we,We,et,lt,mt,xt,Vt,qt,en,cn,gn,bn,kn,Ln,ci,li,mi,Ti,Mi,Gr,to,ks,Fs,ea,la,da,Ha,Ja,ic,vc,Vc,zc,Zc,Ol,Ll,hu,Uu,Vu,$u,Ed,Od,Nd,rh,dh,vh,Rh,Ph,Fh,qh,ep,ap,fp,kp,Mf,Hf,Jf,ig,ug,_g,Ig,xg,Bg,Wg,Qg,_m,Nm,Km,l_,J_,tv,cv,_v,Sv,Bv,ey,oy,ay,jy,Ge.a],$y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ga.a.use(t.locale),ga.a.i18n(t.i18n),Fy.forEach((function(t){e.component(t.name,t)})),e.use(n_),e.use(Mu.directive),e.prototype.$ELEMENT={size:t.size||"",zIndex:t.zIndex||2e3},e.prototype.$loading=Mu.service,e.prototype.$msgbox=La,e.prototype.$alert=La.alert,e.prototype.$confirm=La.confirm,e.prototype.$prompt=La.prompt,e.prototype.$notify=Jl,e.prototype.$message=Xd};"undefined"!==typeof window&&window.Vue&&$y(window.Vue);t["default"]={version:"2.15.6",locale:ga.a.use,i18n:ga.a.i18n,install:$y,CollapseTransition:Ge.a,Loading:Mu,Pagination:C,Dialog:A,Autocomplete:re,Dropdown:pe,DropdownMenu:Ce,DropdownItem:we,Menu:We,Submenu:et,MenuItem:lt,MenuItemGroup:mt,Input:xt,InputNumber:Vt,Radio:qt,RadioGroup:en,RadioButton:cn,Checkbox:gn,CheckboxButton:bn,CheckboxGroup:kn,Switch:Ln,Select:ci,Option:li,OptionGroup:mi,Button:Ti,ButtonGroup:Mi,Table:Gr,TableColumn:to,DatePicker:ks,TimeSelect:Fs,TimePicker:ea,Popover:la,Tooltip:da,MessageBox:La,Breadcrumb:Ha,BreadcrumbItem:Ja,Form:ic,FormItem:vc,Tabs:Vc,TabPane:zc,Tag:Zc,Tree:Ol,Alert:Ll,Notification:Jl,Slider:hu,Icon:Uu,Row:Vu,Col:$u,Upload:Ed,Progress:Od,Spinner:Nd,Message:Xd,Badge:rh,Card:dh,Rate:vh,Steps:Rh,Step:Ph,Carousel:Fh,Scrollbar:qh,CarouselItem:ep,Collapse:ap,CollapseItem:fp,Cascader:kp,ColorPicker:Mf,Transfer:Hf,Container:Jf,Header:ig,Aside:ug,Main:_g,Footer:Ig,Timeline:xg,TimelineItem:Bg,Link:Wg,Divider:Qg,Image:_m,Calendar:Nm,Backtop:Km,InfiniteScroll:n_,PageHeader:l_,CascaderPanel:J_,Avatar:tv,Drawer:cv,Popconfirm:_v,Skeleton:Sv,SkeletonItem:Bv,Empty:ey,Descriptions:oy,DescriptionsItem:ay,Result:jy}}])["default"]},"5e77":function(e,t,n){var i=n("83ab"),r=n("1a2d"),o=Function.prototype,s=i&&Object.getOwnPropertyDescriptor,a=r(o,"name"),c=a&&"something"===function(){}.name,l=a&&(!i||i&&s(o,"name").configurable);e.exports={EXISTS:a,PROPER:c,CONFIGURABLE:l}},"5f02":function(e,t,n){"use strict";e.exports=function(e){return"object"===typeof e&&!0===e.isAxiosError}},"5fb2":function(e,t,n){"use strict";var i=n("da84"),r=n("e330"),o=2147483647,s=36,a=1,c=26,l=38,u=700,d=72,h=128,p="-",f=/[^\0-\u007E]/,g=/[.\u3002\uFF0E\uFF61]/g,m="Overflow: input needs wider integers to process",_=s-a,v=i.RangeError,y=r(g.exec),C=Math.floor,E=String.fromCharCode,b=r("".charCodeAt),T=r([].join),S=r([].push),R=r("".replace),I=r("".split),w=r("".toLowerCase),O=function(e){var t=[],n=0,i=e.length;while(n<i){var r=b(e,n++);if(r>=55296&&r<=56319&&n<i){var o=b(e,n++);56320==(64512&o)?S(t,((1023&r)<<10)+(1023&o)+65536):(S(t,r),n--)}else S(t,r)}return t},k=function(e){return e+22+75*(e<26)},M=function(e,t,n){var i=0;for(e=n?C(e/u):e>>1,e+=C(e/t);e>_*c>>1;i+=s)e=C(e/_);return C(i+(_+1)*e/(e+l))},x=function(e){var t=[];e=O(e);var n,i,r=e.length,l=h,u=0,f=d;for(n=0;n<e.length;n++)i=e[n],i<128&&S(t,E(i));var g=t.length,_=g;g&&S(t,p);while(_<r){var y=o;for(n=0;n<e.length;n++)i=e[n],i>=l&&i<y&&(y=i);var b=_+1;if(y-l>C((o-u)/b))throw v(m);for(u+=(y-l)*b,l=y,n=0;n<e.length;n++){if(i=e[n],i<l&&++u>o)throw v(m);if(i==l){for(var R=u,I=s;;I+=s){var w=I<=f?a:I>=f+c?c:I-f;if(R<w)break;var x=R-w,P=s-w;S(t,E(k(w+x%P))),R=C(x/P)}S(t,E(k(R))),f=M(u,b,_==g),u=0,++_}}++u,++l}return T(t,"")};e.exports=function(e){var t,n,i=[],r=I(R(w(e),g,"."),".");for(t=0;t<r.length;t++)n=r[t],S(i,y(f,n)?"xn--"+x(n):n);return T(i,".")}},"605d":function(e,t,n){var i=n("c6b6"),r=n("da84");e.exports="process"==i(r.process)},6069:function(e,t){e.exports="object"==typeof window},"60da":function(e,t,n){"use strict";var i=n("83ab"),r=n("e330"),o=n("c65b"),s=n("d039"),a=n("df75"),c=n("7418"),l=n("d1e7"),u=n("7b0b"),d=n("44ad"),h=Object.assign,p=Object.defineProperty,f=r([].concat);e.exports=!h||s((function(){if(i&&1!==h({b:1},h(p({},"a",{enumerable:!0,get:function(){p(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=h({},e)[n]||a(h({},t)).join("")!=r}))?function(e,t){var n=u(e),r=arguments.length,s=1,h=c.f,p=l.f;while(r>s){var g,m=d(arguments[s++]),_=h?f(a(m),h(m)):a(m),v=_.length,y=0;while(v>y)g=_[y++],i&&!o(p,m,g)||(n[g]=m[g])}return n}:h},6167:function(e,t,n){"use strict";var i,r;"function"===typeof Symbol&&Symbol.iterator;(function(o,s){i=s,r="function"===typeof i?i.call(t,n,t,e):i,void 0===r||(e.exports=r)})(0,(function(){var e=window,t={placement:"bottom",gpuAcceleration:!0,offset:0,boundariesElement:"viewport",boundariesPadding:5,preventOverflowOrder:["left","right","top","bottom"],flipBehavior:"flip",arrowElement:"[x-arrow]",arrowOffset:0,modifiers:["shift","offset","preventOverflow","keepTogether","arrow","flip","applyStyle"],modifiersIgnored:[],forceAbsolute:!1};function n(e,n,i){this._reference=e.jquery?e[0]:e,this.state={};var r="undefined"===typeof n||null===n,o=n&&"[object Object]"===Object.prototype.toString.call(n);return this._popper=r||o?this.parse(o?n:{}):n.jquery?n[0]:n,this._options=Object.assign({},t,i),this._options.modifiers=this._options.modifiers.map(function(e){if(-1===this._options.modifiersIgnored.indexOf(e))return"applyStyle"===e&&this._popper.setAttribute("x-placement",this._options.placement),this.modifiers[e]||e}.bind(this)),this.state.position=this._getPosition(this._popper,this._reference),d(this._popper,{position:this.state.position,top:0}),this.update(),this._setupEventListeners(),this}function i(t){var n=t.style.display,i=t.style.visibility;t.style.display="block",t.style.visibility="hidden";t.offsetWidth;var r=e.getComputedStyle(t),o=parseFloat(r.marginTop)+parseFloat(r.marginBottom),s=parseFloat(r.marginLeft)+parseFloat(r.marginRight),a={width:t.offsetWidth+s,height:t.offsetHeight+o};return t.style.display=n,t.style.visibility=i,a}function r(e){var t={left:"right",right:"left",bottom:"top",top:"bottom"};return e.replace(/left|right|bottom|top/g,(function(e){return t[e]}))}function o(e){var t=Object.assign({},e);return t.right=t.left+t.width,t.bottom=t.top+t.height,t}function s(e,t){var n,i=0;for(n in e){if(e[n]===t)return i;i++}return null}function a(t,n){var i=e.getComputedStyle(t,null);return i[n]}function c(t){var n=t.offsetParent;return n!==e.document.body&&n?n:e.document.documentElement}function l(t){var n=t.parentNode;return n?n===e.document?e.document.body.scrollTop||e.document.body.scrollLeft?e.document.body:e.document.documentElement:-1!==["scroll","auto"].indexOf(a(n,"overflow"))||-1!==["scroll","auto"].indexOf(a(n,"overflow-x"))||-1!==["scroll","auto"].indexOf(a(n,"overflow-y"))?n:l(t.parentNode):t}function u(t){return t!==e.document.body&&("fixed"===a(t,"position")||(t.parentNode?u(t.parentNode):t))}function d(e,t){function n(e){return""!==e&&!isNaN(parseFloat(e))&&isFinite(e)}Object.keys(t).forEach((function(i){var r="";-1!==["width","height","top","right","bottom","left"].indexOf(i)&&n(t[i])&&(r="px"),e.style[i]=t[i]+r}))}function h(e){var t={};return e&&"[object Function]"===t.toString.call(e)}function p(e){var t={width:e.offsetWidth,height:e.offsetHeight,left:e.offsetLeft,top:e.offsetTop};return t.right=t.left+t.width,t.bottom=t.top+t.height,t}function f(e){var t=e.getBoundingClientRect(),n=-1!=navigator.userAgent.indexOf("MSIE"),i=n&&"HTML"===e.tagName?-e.scrollTop:t.top;return{left:t.left,top:i,right:t.right,bottom:t.bottom,width:t.right-t.left,height:t.bottom-i}}function g(e,t,n){var i=f(e),r=f(t);if(n){var o=l(t);r.top+=o.scrollTop,r.bottom+=o.scrollTop,r.left+=o.scrollLeft,r.right+=o.scrollLeft}var s={top:i.top-r.top,left:i.left-r.left,bottom:i.top-r.top+i.height,right:i.left-r.left+i.width,width:i.width,height:i.height};return s}function m(t){for(var n=["","ms","webkit","moz","o"],i=0;i<n.length;i++){var r=n[i]?n[i]+t.charAt(0).toUpperCase()+t.slice(1):t;if("undefined"!==typeof e.document.body.style[r])return r}return null}return n.prototype.destroy=function(){return this._popper.removeAttribute("x-placement"),this._popper.style.left="",this._popper.style.position="",this._popper.style.top="",this._popper.style[m("transform")]="",this._removeEventListeners(),this._options.removeOnDestroy&&this._popper.remove(),this},n.prototype.update=function(){var e={instance:this,styles:{}};e.placement=this._options.placement,e._originalPlacement=this._options.placement,e.offsets=this._getOffsets(this._popper,this._reference,e.placement),e.boundaries=this._getBoundaries(e,this._options.boundariesPadding,this._options.boundariesElement),e=this.runModifiers(e,this._options.modifiers),"function"===typeof this.state.updateCallback&&this.state.updateCallback(e)},n.prototype.onCreate=function(e){return e(this),this},n.prototype.onUpdate=function(e){return this.state.updateCallback=e,this},n.prototype.parse=function(t){var n={tagName:"div",classNames:["popper"],attributes:[],parent:e.document.body,content:"",contentType:"text",arrowTagName:"div",arrowClassNames:["popper__arrow"],arrowAttributes:["x-arrow"]};t=Object.assign({},n,t);var i=e.document,r=i.createElement(t.tagName);if(a(r,t.classNames),c(r,t.attributes),"node"===t.contentType?r.appendChild(t.content.jquery?t.content[0]:t.content):"html"===t.contentType?r.innerHTML=t.content:r.textContent=t.content,t.arrowTagName){var o=i.createElement(t.arrowTagName);a(o,t.arrowClassNames),c(o,t.arrowAttributes),r.appendChild(o)}var s=t.parent.jquery?t.parent[0]:t.parent;if("string"===typeof s){if(s=i.querySelectorAll(t.parent),s.length>1&&console.warn("WARNING: the given `parent` query("+t.parent+") matched more than one element, the first one will be used"),0===s.length)throw"ERROR: the given `parent` doesn't exists!";s=s[0]}return s.length>1&&s instanceof Element===!1&&(console.warn("WARNING: you have passed as parent a list of elements, the first one will be used"),s=s[0]),s.appendChild(r),r;function a(e,t){t.forEach((function(t){e.classList.add(t)}))}function c(e,t){t.forEach((function(t){e.setAttribute(t.split(":")[0],t.split(":")[1]||"")}))}},n.prototype._getPosition=function(e,t){var n=c(t);if(this._options.forceAbsolute)return"absolute";var i=u(t,n);return i?"fixed":"absolute"},n.prototype._getOffsets=function(e,t,n){n=n.split("-")[0];var r={};r.position=this.state.position;var o="fixed"===r.position,s=g(t,c(e),o),a=i(e);return-1!==["right","left"].indexOf(n)?(r.top=s.top+s.height/2-a.height/2,r.left="left"===n?s.left-a.width:s.right):(r.left=s.left+s.width/2-a.width/2,r.top="top"===n?s.top-a.height:s.bottom),r.width=a.width,r.height=a.height,{popper:r,reference:s}},n.prototype._setupEventListeners=function(){if(this.state.updateBound=this.update.bind(this),e.addEventListener("resize",this.state.updateBound),"window"!==this._options.boundariesElement){var t=l(this._reference);t!==e.document.body&&t!==e.document.documentElement||(t=e),t.addEventListener("scroll",this.state.updateBound),this.state.scrollTarget=t}},n.prototype._removeEventListeners=function(){e.removeEventListener("resize",this.state.updateBound),"window"!==this._options.boundariesElement&&this.state.scrollTarget&&(this.state.scrollTarget.removeEventListener("scroll",this.state.updateBound),this.state.scrollTarget=null),this.state.updateBound=null},n.prototype._getBoundaries=function(t,n,i){var r,o,s={};if("window"===i){var a=e.document.body,u=e.document.documentElement;o=Math.max(a.scrollHeight,a.offsetHeight,u.clientHeight,u.scrollHeight,u.offsetHeight),r=Math.max(a.scrollWidth,a.offsetWidth,u.clientWidth,u.scrollWidth,u.offsetWidth),s={top:0,right:r,bottom:o,left:0}}else if("viewport"===i){var d=c(this._popper),h=l(this._popper),f=p(d),g=function(e){return e==document.body?Math.max(document.documentElement.scrollTop,document.body.scrollTop):e.scrollTop},m=function(e){return e==document.body?Math.max(document.documentElement.scrollLeft,document.body.scrollLeft):e.scrollLeft},_="fixed"===t.offsets.popper.position?0:g(h),v="fixed"===t.offsets.popper.position?0:m(h);s={top:0-(f.top-_),right:e.document.documentElement.clientWidth-(f.left-v),bottom:e.document.documentElement.clientHeight-(f.top-_),left:0-(f.left-v)}}else s=c(this._popper)===i?{top:0,left:0,right:i.clientWidth,bottom:i.clientHeight}:p(i);return s.left+=n,s.right-=n,s.top=s.top+n,s.bottom=s.bottom-n,s},n.prototype.runModifiers=function(e,t,n){var i=t.slice();return void 0!==n&&(i=this._options.modifiers.slice(0,s(this._options.modifiers,n))),i.forEach(function(t){h(t)&&(e=t.call(this,e))}.bind(this)),e},n.prototype.isModifierRequired=function(e,t){var n=s(this._options.modifiers,e);return!!this._options.modifiers.slice(0,n).filter((function(e){return e===t})).length},n.prototype.modifiers={},n.prototype.modifiers.applyStyle=function(e){var t,n={position:e.offsets.popper.position},i=Math.round(e.offsets.popper.left),r=Math.round(e.offsets.popper.top);return this._options.gpuAcceleration&&(t=m("transform"))?(n[t]="translate3d("+i+"px, "+r+"px, 0)",n.top=0,n.left=0):(n.left=i,n.top=r),Object.assign(n,e.styles),d(this._popper,n),this._popper.setAttribute("x-placement",e.placement),this.isModifierRequired(this.modifiers.applyStyle,this.modifiers.arrow)&&e.offsets.arrow&&d(e.arrowElement,e.offsets.arrow),e},n.prototype.modifiers.shift=function(e){var t=e.placement,n=t.split("-")[0],i=t.split("-")[1];if(i){var r=e.offsets.reference,s=o(e.offsets.popper),a={y:{start:{top:r.top},end:{top:r.top+r.height-s.height}},x:{start:{left:r.left},end:{left:r.left+r.width-s.width}}},c=-1!==["bottom","top"].indexOf(n)?"x":"y";e.offsets.popper=Object.assign(s,a[c][i])}return e},n.prototype.modifiers.preventOverflow=function(e){var t=this._options.preventOverflowOrder,n=o(e.offsets.popper),i={left:function(){var t=n.left;return n.left<e.boundaries.left&&(t=Math.max(n.left,e.boundaries.left)),{left:t}},right:function(){var t=n.left;return n.right>e.boundaries.right&&(t=Math.min(n.left,e.boundaries.right-n.width)),{left:t}},top:function(){var t=n.top;return n.top<e.boundaries.top&&(t=Math.max(n.top,e.boundaries.top)),{top:t}},bottom:function(){var t=n.top;return n.bottom>e.boundaries.bottom&&(t=Math.min(n.top,e.boundaries.bottom-n.height)),{top:t}}};return t.forEach((function(t){e.offsets.popper=Object.assign(n,i[t]())})),e},n.prototype.modifiers.keepTogether=function(e){var t=o(e.offsets.popper),n=e.offsets.reference,i=Math.floor;return t.right<i(n.left)&&(e.offsets.popper.left=i(n.left)-t.width),t.left>i(n.right)&&(e.offsets.popper.left=i(n.right)),t.bottom<i(n.top)&&(e.offsets.popper.top=i(n.top)-t.height),t.top>i(n.bottom)&&(e.offsets.popper.top=i(n.bottom)),e},n.prototype.modifiers.flip=function(e){if(!this.isModifierRequired(this.modifiers.flip,this.modifiers.preventOverflow))return console.warn("WARNING: preventOverflow modifier is required by flip modifier in order to work, be sure to include it before flip!"),e;if(e.flipped&&e.placement===e._originalPlacement)return e;var t=e.placement.split("-")[0],n=r(t),i=e.placement.split("-")[1]||"",s=[];return s="flip"===this._options.flipBehavior?[t,n]:this._options.flipBehavior,s.forEach(function(a,c){if(t===a&&s.length!==c+1){t=e.placement.split("-")[0],n=r(t);var l=o(e.offsets.popper),u=-1!==["right","bottom"].indexOf(t);(u&&Math.floor(e.offsets.reference[t])>Math.floor(l[n])||!u&&Math.floor(e.offsets.reference[t])<Math.floor(l[n]))&&(e.flipped=!0,e.placement=s[c+1],i&&(e.placement+="-"+i),e.offsets.popper=this._getOffsets(this._popper,this._reference,e.placement).popper,e=this.runModifiers(e,this._options.modifiers,this._flip))}}.bind(this)),e},n.prototype.modifiers.offset=function(e){var t=this._options.offset,n=e.offsets.popper;return-1!==e.placement.indexOf("left")?n.top-=t:-1!==e.placement.indexOf("right")?n.top+=t:-1!==e.placement.indexOf("top")?n.left-=t:-1!==e.placement.indexOf("bottom")&&(n.left+=t),e},n.prototype.modifiers.arrow=function(e){var t=this._options.arrowElement,n=this._options.arrowOffset;if("string"===typeof t&&(t=this._popper.querySelector(t)),!t)return e;if(!this._popper.contains(t))return console.warn("WARNING: `arrowElement` must be child of its popper element!"),e;if(!this.isModifierRequired(this.modifiers.arrow,this.modifiers.keepTogether))return console.warn("WARNING: keepTogether modifier is required by arrow modifier in order to work, be sure to include it before arrow!"),e;var r={},s=e.placement.split("-")[0],a=o(e.offsets.popper),c=e.offsets.reference,l=-1!==["left","right"].indexOf(s),u=l?"height":"width",d=l?"top":"left",h=l?"left":"top",p=l?"bottom":"right",f=i(t)[u];c[p]-f<a[d]&&(e.offsets.popper[d]-=a[d]-(c[p]-f)),c[d]+f>a[p]&&(e.offsets.popper[d]+=c[d]+f-a[p]);var g=c[d]+(n||c[u]/2-f/2),m=g-a[d];return m=Math.max(Math.min(a[u]-f-8,m),8),r[d]=m,r[h]="",e.offsets.arrow=r,e.arrowElement=t,e},Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert first argument to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(void 0!==i&&null!==i){i=Object(i);for(var r=Object.keys(i),o=0,s=r.length;o<s;o++){var a=r[o],c=Object.getOwnPropertyDescriptor(i,a);void 0!==c&&c.enumerable&&(t[a]=i[a])}}}return t}}),n}))},"62e4":function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},6438:function(e,t,n){var i=n("03d6"),r=n("9742").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},6547:function(e,t,n){var i=n("e330"),r=n("5926"),o=n("577e"),s=n("1d80"),a=i("".charAt),c=i("".charCodeAt),l=i("".slice),u=function(e){return function(t,n){var i,u,d=o(s(t)),h=r(n),p=d.length;return h<0||h>=p?e?"":void 0:(i=c(d,h),i<55296||i>56319||h+1===p||(u=c(d,h+1))<56320||u>57343?e?a(d,h):i:e?l(d,h,h+2):u-56320+(i-55296<<10)+65536)}};e.exports={codeAt:u(!1),charAt:u(!0)}},"658f":function(e,t,n){n("6858");for(var i=n("ef08"),r=n("051b"),o=n("8a0d"),s=n("cc15")("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),c=0;c<a.length;c++){var l=a[c],u=i[l],d=u&&u.prototype;d&&!d[s]&&r(d,s,l),o[l]=o.Array}},"65f0":function(e,t,n){var i=n("0b42");e.exports=function(e,t){return new(i(e))(0===t?0:t)}},6858:function(e,t,n){"use strict";var i=n("2f9a"),r=n("ea34"),o=n("8a0d"),s=n("6ca1");e.exports=n("393a")(Array,"Array",(function(e,t){this._t=s(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,r(1)):r(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},"68ee":function(e,t,n){var i=n("e330"),r=n("d039"),o=n("1626"),s=n("f5df"),a=n("d066"),c=n("8925"),l=function(){},u=[],d=a("Reflect","construct"),h=/^\s*(?:class|function)\b/,p=i(h.exec),f=!h.exec(l),g=function(e){if(!o(e))return!1;try{return d(l,u,e),!0}catch(t){return!1}},m=function(e){if(!o(e))return!1;switch(s(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return f||!!p(h,c(e))};e.exports=!d||r((function(){var e;return g(g.call)||!g(Object)||!g((function(){e=!0}))||e}))?m:g},"693d":function(e,t,n){"use strict";var i=n("ef08"),r=n("9c0e"),o=n("0bad"),s=n("512c"),a=n("ba01"),c=n("e34a").KEY,l=n("4b8b"),u=n("b367"),d=n("92f0"),h=n("8b1a"),p=n("cc15"),f=n("fcd4"),g=n("e198"),m=n("0ae2"),_=n("4ebc"),v=n("77e9"),y=n("7a41"),C=n("0983"),E=n("6ca1"),b=n("3397"),T=n("10db"),S=n("6f4f"),R=n("1836"),I=n("4d20"),w=n("fed5"),O=n("1a14"),k=n("9876"),M=I.f,x=O.f,P=R.f,A=i.Symbol,D=i.JSON,N=D&&D.stringify,L="prototype",U=p("_hidden"),B=p("toPrimitive"),V={}.propertyIsEnumerable,j=u("symbol-registry"),F=u("symbols"),$=u("op-symbols"),H=Object[L],K="function"==typeof A&&!!w.f,W=i.QObject,q=!W||!W[L]||!W[L].findChild,G=o&&l((function(){return 7!=S(x({},"a",{get:function(){return x(this,"a",{value:7}).a}})).a}))?function(e,t,n){var i=M(H,t);i&&delete H[t],x(e,t,n),i&&e!==H&&x(H,t,i)}:x,z=function(e){var t=F[e]=S(A[L]);return t._k=e,t},Y=K&&"symbol"==typeof A.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof A},J=function(e,t,n){return e===H&&J($,t,n),v(e),t=b(t,!0),v(n),r(F,t)?(n.enumerable?(r(e,U)&&e[U][t]&&(e[U][t]=!1),n=S(n,{enumerable:T(0,!1)})):(r(e,U)||x(e,U,T(1,{})),e[U][t]=!0),G(e,t,n)):x(e,t,n)},X=function(e,t){v(e);var n,i=m(t=E(t)),r=0,o=i.length;while(o>r)J(e,n=i[r++],t[n]);return e},Q=function(e,t){return void 0===t?S(e):X(S(e),t)},Z=function(e){var t=V.call(this,e=b(e,!0));return!(this===H&&r(F,e)&&!r($,e))&&(!(t||!r(this,e)||!r(F,e)||r(this,U)&&this[U][e])||t)},ee=function(e,t){if(e=E(e),t=b(t,!0),e!==H||!r(F,t)||r($,t)){var n=M(e,t);return!n||!r(F,t)||r(e,U)&&e[U][t]||(n.enumerable=!0),n}},te=function(e){var t,n=P(E(e)),i=[],o=0;while(n.length>o)r(F,t=n[o++])||t==U||t==c||i.push(t);return i},ne=function(e){var t,n=e===H,i=P(n?$:E(e)),o=[],s=0;while(i.length>s)!r(F,t=i[s++])||n&&!r(H,t)||o.push(F[t]);return o};K||(A=function(){if(this instanceof A)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function(n){this===H&&t.call($,n),r(this,U)&&r(this[U],e)&&(this[U][e]=!1),G(this,e,T(1,n))};return o&&q&&G(H,e,{configurable:!0,set:t}),z(e)},a(A[L],"toString",(function(){return this._k})),I.f=ee,O.f=J,n("6438").f=R.f=te,n("1917").f=Z,w.f=ne,o&&!n("e444")&&a(H,"propertyIsEnumerable",Z,!0),f.f=function(e){return z(p(e))}),s(s.G+s.W+s.F*!K,{Symbol:A});for(var ie="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),re=0;ie.length>re;)p(ie[re++]);for(var oe=k(p.store),se=0;oe.length>se;)g(oe[se++]);s(s.S+s.F*!K,"Symbol",{for:function(e){return r(j,e+="")?j[e]:j[e]=A(e)},keyFor:function(e){if(!Y(e))throw TypeError(e+" is not a symbol!");for(var t in j)if(j[t]===e)return t},useSetter:function(){q=!0},useSimple:function(){q=!1}}),s(s.S+s.F*!K,"Object",{create:Q,defineProperty:J,defineProperties:X,getOwnPropertyDescriptor:ee,getOwnPropertyNames:te,getOwnPropertySymbols:ne});var ae=l((function(){w.f(1)}));s(s.S+s.F*ae,"Object",{getOwnPropertySymbols:function(e){return w.f(C(e))}}),D&&s(s.S+s.F*(!K||l((function(){var e=A();return"[null]"!=N([e])||"{}"!=N({a:e})||"{}"!=N(Object(e))}))),"JSON",{stringify:function(e){var t,n,i=[e],r=1;while(arguments.length>r)i.push(arguments[r++]);if(n=t=i[1],(y(t)||void 0!==e)&&!Y(e))return _(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!Y(t))return t}),i[1]=t,N.apply(D,i)}}),A[L][B]||n("051b")(A[L],B,A[L].valueOf),d(A,"Symbol"),d(Math,"Math",!0),d(i.JSON,"JSON",!0)},"69f3":function(e,t,n){var i,r,o,s=n("7f9a"),a=n("da84"),c=n("e330"),l=n("861d"),u=n("9112"),d=n("1a2d"),h=n("c6cd"),p=n("f772"),f=n("d012"),g="Object already initialized",m=a.TypeError,_=a.WeakMap,v=function(e){return o(e)?r(e):i(e,{})},y=function(e){return function(t){var n;if(!l(t)||(n=r(t)).type!==e)throw m("Incompatible receiver, "+e+" required");return n}};if(s||h.state){var C=h.state||(h.state=new _),E=c(C.get),b=c(C.has),T=c(C.set);i=function(e,t){if(b(C,e))throw new m(g);return t.facade=e,T(C,e,t),t},r=function(e){return E(C,e)||{}},o=function(e){return b(C,e)}}else{var S=p("state");f[S]=!0,i=function(e,t){if(d(e,S))throw new m(g);return t.facade=e,u(e,S,t),t},r=function(e){return d(e,S)?e[S]:{}},o=function(e){return d(e,S)}}e.exports={set:i,get:r,has:o,enforce:v,getterFor:y}},"6ac9":function(e,t,n){e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=79)}({0:function(e,t,n){"use strict";function i(e,t,n,i,r,o,s,a){var c,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),i&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=c):r&&(c=a?function(){r.call(this,this.$root.$options.shadowRoot)}:r),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}n.d(t,"a",(function(){return i}))},2:function(e,t){e.exports=n("5924")},3:function(e,t){e.exports=n("8122")},5:function(e,t){e.exports=n("e974")},7:function(e,t){e.exports=n("2b0e")},79:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[n("transition",{attrs:{name:e.transition},on:{"after-enter":e.handleAfterEnter,"after-leave":e.handleAfterLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.disabled&&e.showPopper,expression:"!disabled && showPopper"}],ref:"popper",staticClass:"el-popover el-popper",class:[e.popperClass,e.content&&"el-popover--plain"],style:{width:e.width+"px"},attrs:{role:"tooltip",id:e.tooltipId,"aria-hidden":e.disabled||!e.showPopper?"true":"false"}},[e.title?n("div",{staticClass:"el-popover__title",domProps:{textContent:e._s(e.title)}}):e._e(),e._t("default",[e._v(e._s(e.content))])],2)]),n("span",{ref:"wrapper",staticClass:"el-popover__reference-wrapper"},[e._t("reference")],2)],1)},r=[];i._withStripped=!0;var o=n(5),s=n.n(o),a=n(2),c=n(3),l={name:"ElPopover",mixins:[s.a],props:{trigger:{type:String,default:"click",validator:function(e){return["click","focus","hover","manual"].indexOf(e)>-1}},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:200},title:String,disabled:Boolean,content:String,reference:{},popperClass:String,width:{},visibleArrow:{default:!0},arrowOffset:{type:Number,default:0},transition:{type:String,default:"fade-in-linear"},tabindex:{type:Number,default:0}},computed:{tooltipId:function(){return"el-popover-"+Object(c["generateId"])()}},watch:{showPopper:function(e){this.disabled||(e?this.$emit("show"):this.$emit("hide"))}},mounted:function(){var e=this,t=this.referenceElm=this.reference||this.$refs.reference,n=this.popper||this.$refs.popper;!t&&this.$refs.wrapper.children&&(t=this.referenceElm=this.$refs.wrapper.children[0]),t&&(Object(a["addClass"])(t,"el-popover__reference"),t.setAttribute("aria-describedby",this.tooltipId),t.setAttribute("tabindex",this.tabindex),n.setAttribute("tabindex",0),"click"!==this.trigger&&(Object(a["on"])(t,"focusin",(function(){e.handleFocus();var n=t.__vue__;n&&"function"===typeof n.focus&&n.focus()})),Object(a["on"])(n,"focusin",this.handleFocus),Object(a["on"])(t,"focusout",this.handleBlur),Object(a["on"])(n,"focusout",this.handleBlur)),Object(a["on"])(t,"keydown",this.handleKeydown),Object(a["on"])(t,"click",this.handleClick)),"click"===this.trigger?(Object(a["on"])(t,"click",this.doToggle),Object(a["on"])(document,"click",this.handleDocumentClick)):"hover"===this.trigger?(Object(a["on"])(t,"mouseenter",this.handleMouseEnter),Object(a["on"])(n,"mouseenter",this.handleMouseEnter),Object(a["on"])(t,"mouseleave",this.handleMouseLeave),Object(a["on"])(n,"mouseleave",this.handleMouseLeave)):"focus"===this.trigger&&(this.tabindex<0&&console.warn("[Element Warn][Popover]a negative taindex means that the element cannot be focused by tab key"),t.querySelector("input, textarea")?(Object(a["on"])(t,"focusin",this.doShow),Object(a["on"])(t,"focusout",this.doClose)):(Object(a["on"])(t,"mousedown",this.doShow),Object(a["on"])(t,"mouseup",this.doClose)))},beforeDestroy:function(){this.cleanup()},deactivated:function(){this.cleanup()},methods:{doToggle:function(){this.showPopper=!this.showPopper},doShow:function(){this.showPopper=!0},doClose:function(){this.showPopper=!1},handleFocus:function(){Object(a["addClass"])(this.referenceElm,"focusing"),"click"!==this.trigger&&"focus"!==this.trigger||(this.showPopper=!0)},handleClick:function(){Object(a["removeClass"])(this.referenceElm,"focusing")},handleBlur:function(){Object(a["removeClass"])(this.referenceElm,"focusing"),"click"!==this.trigger&&"focus"!==this.trigger||(this.showPopper=!1)},handleMouseEnter:function(){var e=this;clearTimeout(this._timer),this.openDelay?this._timer=setTimeout((function(){e.showPopper=!0}),this.openDelay):this.showPopper=!0},handleKeydown:function(e){27===e.keyCode&&"manual"!==this.trigger&&this.doClose()},handleMouseLeave:function(){var e=this;clearTimeout(this._timer),this.closeDelay?this._timer=setTimeout((function(){e.showPopper=!1}),this.closeDelay):this.showPopper=!1},handleDocumentClick:function(e){var t=this.reference||this.$refs.reference,n=this.popper||this.$refs.popper;!t&&this.$refs.wrapper.children&&(t=this.referenceElm=this.$refs.wrapper.children[0]),this.$el&&t&&!this.$el.contains(e.target)&&!t.contains(e.target)&&n&&!n.contains(e.target)&&(this.showPopper=!1)},handleAfterEnter:function(){this.$emit("after-enter")},handleAfterLeave:function(){this.$emit("after-leave"),this.doDestroy()},cleanup:function(){(this.openDelay||this.closeDelay)&&clearTimeout(this._timer)}},destroyed:function(){var e=this.reference;Object(a["off"])(e,"click",this.doToggle),Object(a["off"])(e,"mouseup",this.doClose),Object(a["off"])(e,"mousedown",this.doShow),Object(a["off"])(e,"focusin",this.doShow),Object(a["off"])(e,"focusout",this.doClose),Object(a["off"])(e,"mousedown",this.doShow),Object(a["off"])(e,"mouseup",this.doClose),Object(a["off"])(e,"mouseleave",this.handleMouseLeave),Object(a["off"])(e,"mouseenter",this.handleMouseEnter),Object(a["off"])(document,"click",this.handleDocumentClick)}},u=l,d=n(0),h=Object(d["a"])(u,i,r,!1,null,null,null);h.options.__file="packages/popover/src/main.vue";var p=h.exports,f=function(e,t,n){var i=t.expression?t.value:t.arg,r=n.context.$refs[i];r&&(Array.isArray(r)?r[0].$refs.reference=e:r.$refs.reference=e)},g={bind:function(e,t,n){f(e,t,n)},inserted:function(e,t,n){f(e,t,n)}},m=n(7),_=n.n(m);_.a.directive("popover",g),p.install=function(e){e.directive("popover",g),e.component(p.name,p)},p.directive=g;t["default"]=p}})},"6b7c":function(e,t,n){"use strict";t.__esModule=!0;var i=n("4897");t.default={methods:{t:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.t.apply(this,t)}}}},"6ca1":function(e,t,n){var i=n("9fbb"),r=n("c901");e.exports=function(e){return i(r(e))}},"6dd80":function(e,t,n){"use strict";n.r(t),function(e){var n=function(){if("undefined"!==typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,i){return e[0]===t&&(n=i,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),i=this.__entries__[n];return i&&i[1]},t.prototype.set=function(t,n){var i=e(this.__entries__,t);~i?this.__entries__[i][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,i=e(n,t);~i&&n.splice(i,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,i=this.__entries__;n<i.length;n++){var r=i[n];e.call(t,r[1],r[0])}},t}()}(),i="undefined"!==typeof window&&"undefined"!==typeof document&&window.document===document,r=function(){return"undefined"!==typeof e&&e.Math===Math?e:"undefined"!==typeof self&&self.Math===Math?self:"undefined"!==typeof window&&window.Math===Math?window:Function("return this")()}(),o=function(){return"function"===typeof requestAnimationFrame?requestAnimationFrame.bind(r):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)}}(),s=2;function a(e,t){var n=!1,i=!1,r=0;function a(){n&&(n=!1,e()),i&&l()}function c(){o(a)}function l(){var e=Date.now();if(n){if(e-r<s)return;i=!0}else n=!0,i=!1,setTimeout(c,t);r=e}return l}var c=20,l=["top","right","bottom","left","width","height","size","weight"],u="undefined"!==typeof MutationObserver,d=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=a(this.refresh.bind(this),c)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){i&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),u?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){i&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t,i=l.some((function(e){return!!~n.indexOf(e)}));i&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),h=function(e,t){for(var n=0,i=Object.keys(t);n<i.length;n++){var r=i[n];Object.defineProperty(e,r,{value:t[r],enumerable:!1,writable:!1,configurable:!0})}return e},p=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||r},f=S(0,0,0,0);function g(e){return parseFloat(e)||0}function m(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){var i=e["border-"+n+"-width"];return t+g(i)}),0)}function _(e){for(var t=["top","right","bottom","left"],n={},i=0,r=t;i<r.length;i++){var o=r[i],s=e["padding-"+o];n[o]=g(s)}return n}function v(e){var t=e.getBBox();return S(0,0,t.width,t.height)}function y(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return f;var i=p(e).getComputedStyle(e),r=_(i),o=r.left+r.right,s=r.top+r.bottom,a=g(i.width),c=g(i.height);if("border-box"===i.boxSizing&&(Math.round(a+o)!==t&&(a-=m(i,"left","right")+o),Math.round(c+s)!==n&&(c-=m(i,"top","bottom")+s)),!E(e)){var l=Math.round(a+o)-t,u=Math.round(c+s)-n;1!==Math.abs(l)&&(a-=l),1!==Math.abs(u)&&(c-=u)}return S(r.left,r.top,a,c)}var C=function(){return"undefined"!==typeof SVGGraphicsElement?function(e){return e instanceof p(e).SVGGraphicsElement}:function(e){return e instanceof p(e).SVGElement&&"function"===typeof e.getBBox}}();function E(e){return e===p(e).document.documentElement}function b(e){return i?C(e)?v(e):y(e):f}function T(e){var t=e.x,n=e.y,i=e.width,r=e.height,o="undefined"!==typeof DOMRectReadOnly?DOMRectReadOnly:Object,s=Object.create(o.prototype);return h(s,{x:t,y:n,width:i,height:r,top:n,right:t+i,bottom:r+n,left:t}),s}function S(e,t,n,i){return{x:e,y:t,width:n,height:i}}var R=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=S(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=b(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),I=function(){function e(e,t){var n=T(t);h(this,{target:e,contentRect:n})}return e}(),w=function(){function e(e,t,i){if(this.activeObservations_=[],this.observations_=new n,"function"!==typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=i}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof p(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new R(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof p(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new I(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),O="undefined"!==typeof WeakMap?new WeakMap:new n,k=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=d.getInstance(),i=new w(t,n,this);O.set(this,i)}return e}();["observe","unobserve","disconnect"].forEach((function(e){k.prototype[e]=function(){var t;return(t=O.get(this))[e].apply(t,arguments)}}));var M=function(){return"undefined"!==typeof r.ResizeObserver?r.ResizeObserver:k}();t["default"]=M}.call(this,n("c8ba"))},"6eeb":function(e,t,n){var i=n("da84"),r=n("1626"),o=n("1a2d"),s=n("9112"),a=n("ce4e"),c=n("8925"),l=n("69f3"),u=n("5e77").CONFIGURABLE,d=l.get,h=l.enforce,p=String(String).split("String");(e.exports=function(e,t,n,c){var l,d=!!c&&!!c.unsafe,f=!!c&&!!c.enumerable,g=!!c&&!!c.noTargetGet,m=c&&void 0!==c.name?c.name:t;r(n)&&("Symbol("===String(m).slice(0,7)&&(m="["+String(m).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!o(n,"name")||u&&n.name!==m)&&s(n,"name",m),l=h(n),l.source||(l.source=p.join("string"==typeof m?m:""))),e!==i?(d?!g&&e[t]&&(f=!0):delete e[t],f?e[t]=n:s(e,t,n)):f?e[t]=n:a(t,n)})(Function.prototype,"toString",(function(){return r(this)&&d(this).source||c(this)}))},"6f4f":function(e,t,n){var i=n("77e9"),r=n("85e7"),o=n("9742"),s=n("5a94")("IE_PROTO"),a=function(){},c="prototype",l=function(){var e,t=n("05f5")("iframe"),i=o.length,r="<",s=">";t.style.display="none",n("9141").appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(r+"script"+s+"document.F=Object"+r+"/script"+s),e.close(),l=e.F;while(i--)delete l[c][o[i]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(a[c]=i(e),n=new a,a[c]=null,n[s]=e):n=l(),void 0===t?n:r(n,t)}},"6f53":function(e,t,n){var i=n("83ab"),r=n("e330"),o=n("df75"),s=n("fc6a"),a=n("d1e7").f,c=r(a),l=r([].push),u=function(e){return function(t){var n,r=s(t),a=o(r),u=a.length,d=0,h=[];while(u>d)n=a[d++],i&&!c(r,n)||l(h,e?[n,r[n]]:r[n]);return h}};e.exports={entries:u(!0),values:u(!1)}},7037:function(e,t,n){function i(t){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?(e.exports=i=function(e){return typeof e},e.exports["default"]=e.exports,e.exports.__esModule=!0):(e.exports=i=function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports["default"]=e.exports,e.exports.__esModule=!0),i(t)}n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),e.exports=i,e.exports["default"]=e.exports,e.exports.__esModule=!0},"703a":function(e,t,n){"use strict";n.r(t),n.d(t,"BackgroundPictureFillMode",(function(){return Ft})),n.d(t,"MixLayoutMode",(function(){return $t})),n.d(t,"MixVideoRenderMode",(function(){return Ht})),n.d(t,"RCAbstractRoom",(function(){return jt})),n.d(t,"RCAudienceClient",(function(){return nn})),n.d(t,"RCAudienceLivingRoom",(function(){return an})),n.d(t,"RCCameraVideoTrack",(function(){return Fe})),n.d(t,"RCFrameRate",(function(){return Re})),n.d(t,"RCInnerCDNPullIsHttps",(function(){return on})),n.d(t,"RCInnerCDNPullKind",(function(){return rn})),n.d(t,"RCKickReason",(function(){return un})),n.d(t,"RCLivingRoom",(function(){return Qt})),n.d(t,"RCLivingType",(function(){return Yt})),n.d(t,"RCLocalAudioTrack",(function(){return Ne})),n.d(t,"RCLocalFileAudioTrack",(function(){return Ve})),n.d(t,"RCLocalFileTrack",(function(){return Ue})),n.d(t,"RCLocalFileVideoTrack",(function(){return Be})),n.d(t,"RCLocalTrack",(function(){return De})),n.d(t,"RCLocalVideoTrack",(function(){return Le})),n.d(t,"RCMCUConfigBuilder",(function(){return Wt})),n.d(t,"RCMediaType",(function(){return we})),n.d(t,"RCMicphoneAudioTrack",(function(){return je})),n.d(t,"RCRTCClient",(function(){return ln})),n.d(t,"RCRTCCode",(function(){return s})),n.d(t,"RCRTCLiveRole",(function(){return Lt})),n.d(t,"RCRTCPingResult",(function(){return mt})),n.d(t,"RCRTCRoom",(function(){return Zt})),n.d(t,"RCRemoteAudioTrack",(function(){return Ke})),n.d(t,"RCRemoteTrack",(function(){return He})),n.d(t,"RCRemoteVideoTrack",(function(){return We})),n.d(t,"RCResolution",(function(){return Ie})),n.d(t,"RCScreenVideoTrack",(function(){return $e})),n.d(t,"RCTag",(function(){return hn})),n.d(t,"RCTrack",(function(){return Ae})),n.d(t,"device",(function(){return Pe})),n.d(t,"helper",(function(){return pn})),n.d(t,"installer",(function(){return dn}));var i=n("78b2");
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function r(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))}n.d(t,"RTCJoinType",(function(){return i["RTCJoinType"]}));const o=new i["Logger"]("RCRTC");var s,a;!function(e){e[e.SUCCESS=1e4]="SUCCESS",e[e.SIGNAL_DISCONNECTED=5e4]="SIGNAL_DISCONNECTED",e[e.PARAMS_ERROR=50001]="PARAMS_ERROR",e[e.REPERT_JOIN_ROOM=50002]="REPERT_JOIN_ROOM",e[e.NOT_IN_ROOM=50003]="NOT_IN_ROOM",e[e.SERVICE_INVALID=50004]="SERVICE_INVALID",e[e.RTC_TOKEN_INVALID=50006]="RTC_TOKEN_INVALID",e[e.SIGNAL_ERROR=53001]="SIGNAL_ERROR",e[e.CREATE_OFFER_FAILED=53003]="CREATE_OFFER_FAILED",e[e.REQUEST_FAILED=53004]="REQUEST_FAILED",e[e.MCU_SERVER_NOT_FOUND=53005]="MCU_SERVER_NOT_FOUND",e[e.BROADCAST_SUB_LIST_NOT_EMPTY=53007]="BROADCAST_SUB_LIST_NOT_EMPTY",e[e.ROOM_HAS_BEEN_DESTROYED=53008]="ROOM_HAS_BEEN_DESTROYED",e[e.NOT_OPEN_VIDEO_AUDIO_SERVER=53009]="NOT_OPEN_VIDEO_AUDIO_SERVER",e[e.GET_USER_MEDIA_FAILED=53010]="GET_USER_MEDIA_FAILED",e[e.GET_DISPLAY_MEDIA_FAILED=53011]="GET_DISPLAY_MEDIA_FAILED",e[e.PERMISSION_DENIED=53012]="PERMISSION_DENIED",e[e.CREATE_CUSTOM_TRACK_FAILED=53013]="CREATE_CUSTOM_TRACK_FAILED",e[e.INVALID_TAGS=53014]="INVALID_TAGS",e[e.INVALID_USER_ID=53015]="INVALID_USER_ID",e[e.CREATE_FILE_TRACK_FAILED=53016]="CREATE_FILE_TRACK_FAILED",e[e.INVALID_FILE_INSTANCE=53017]="INVALID_FILE_INSTANCE",e[e.SET_REMOTE_DESCRIPTION_FAILED=53018]="SET_REMOTE_DESCRIPTION_FAILED",e[e.BROWSER_NOT_SUPPORT=53019]="BROWSER_NOT_SUPPORT",e[e.TRACK_NOT_READY=53020]="TRACK_NOT_READY",e[e.VIDEO_TRACK_MISS_MEDIA_ELEMENT=53021]="VIDEO_TRACK_MISS_MEDIA_ELEMENT",e[e.TRACK_PLAY_ERROR=53022]="TRACK_PLAY_ERROR",e[e.SIGNAL_AUDIENCE_JOIN_ROOM_FAILED=53023]="SIGNAL_AUDIENCE_JOIN_ROOM_FAILED",e[e.SIGNAL_ROOM_CHANGE_IDENTITY_FAILED=53024]="SIGNAL_ROOM_CHANGE_IDENTITY_FAILED",e[e.PACKAGE_ENVIRONMENT_ERROR=53025]="PACKAGE_ENVIRONMENT_ERROR",e[e.PUBLISH_TRACK_LIMIT_EXCEEDED=53026]="PUBLISH_TRACK_LIMIT_EXCEEDED",e[e.CDN_RESOURCE_IS_EMPTY=53027]="CDN_RESOURCE_IS_EMPTY",e[e.SIGNAL_JOIN_RTC_ROOM_REFUSED=53028]="SIGNAL_JOIN_RTC_ROOM_REFUSED",e[e.NO_PERMISSION_TO_USE_REQUESTED_DEVICE=53029]="NO_PERMISSION_TO_USE_REQUESTED_DEVICE",e[e.THE_FUNCTION_IS_DISABLED_IN_PKROOM=53030]="THE_FUNCTION_IS_DISABLED_IN_PKROOM"}(s||(s={})),function(e){e[e.JOIN_REFUSED=40032]="JOIN_REFUSED"}(a||(a={}));class c{constructor(){this.queue=[],this.locked=!1}checkToStart(){return r(this,void 0,void 0,(function*(){if(0===this.queue.length||this.locked)return;this.locked=!0;const{resolve:e,task:t,reject:n}=this.queue.shift();let i;try{i=yield t(),e(i)}catch(e){n(e)}this.locked=!1,this.checkToStart()}))}push(e){const t=new Promise((t,n)=>{this.queue.push({resolve:t,task:e,reject:n})});return this.checkToStart(),t}}const l=new c,u=e=>l.push(e);let d=!0,h=!0;function p(e,t,n){const i=e.match(t);return i&&i.length>=n&&parseInt(i[n],10)}function f(e,t,n){if(!e.RTCPeerConnection)return;const i=e.RTCPeerConnection.prototype,r=i.addEventListener;i.addEventListener=function(e,i){if(e!==t)return r.apply(this,arguments);const o=e=>{const t=n(e);t&&(i.handleEvent?i.handleEvent(t):i(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(i,o),r.apply(this,[e,o])};const o=i.removeEventListener;i.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(n))return o.apply(this,arguments);const i=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,o.apply(this,[e,i])},Object.defineProperty(i,"on"+t,{get(){return this["_on"+t]},set(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}function g(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(d=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function m(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(h=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function _(){if("object"==typeof window){if(d)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function v(e,t){h&&console.warn(e+" is deprecated, please use "+t+" instead.")}function y(e){return"[object Object]"===Object.prototype.toString.call(e)}function C(e){return y(e)?Object.keys(e).reduce((function(t,n){const i=y(e[n]),r=i?C(e[n]):e[n],o=i&&!Object.keys(r).length;return void 0===r||o?t:Object.assign(t,{[n]:r})}),{}):e}function E(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach(i=>{i.endsWith("Id")?E(e,e.get(t[i]),n):i.endsWith("Ids")&&t[i].forEach(t=>{E(e,e.get(t),n)})}))}function b(e,t,n){const i=n?"outbound-rtp":"inbound-rtp",r=new Map;if(null===t)return r;const o=[];return e.forEach(e=>{"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)}),o.forEach(t=>{e.forEach(n=>{n.type===i&&n.trackId===t.id&&E(e,n,r)})}),r}const T=_;function S(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const i=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;const t={};return Object.keys(e).forEach(n=>{if("require"===n||"advanced"===n||"mediaSource"===n)return;const i="object"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==i.exact&&"number"==typeof i.exact&&(i.min=i.max=i.exact);const r=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==i.ideal){t.optional=t.optional||[];let e={};"number"==typeof i.ideal?(e[r("min",n)]=i.ideal,t.optional.push(e),e={},e[r("max",n)]=i.ideal,t.optional.push(e)):(e[r("",n)]=i.ideal,t.optional.push(e))}void 0!==i.exact&&"number"!=typeof i.exact?(t.mandatory=t.mandatory||{},t.mandatory[r("",n)]=i.exact):["min","max"].forEach(e=>{void 0!==i[e]&&(t.mandatory=t.mandatory||{},t.mandatory[r(e,n)]=i[e])})}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},r=function(e,r){if(t.version>=61)return r(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){const t=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};t((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),t(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=i(e.audio)}if(e&&"object"==typeof e.video){let o=e.video.facingMode;o=o&&("object"==typeof o?o:{ideal:o});const s=t.version<66;if(o&&("user"===o.exact||"environment"===o.exact||"user"===o.ideal||"environment"===o.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||s)){let t;if(delete e.video.facingMode,"environment"===o.exact||"environment"===o.ideal?t=["back","rear"]:"user"!==o.exact&&"user"!==o.ideal||(t=["front"]),t)return n.mediaDevices.enumerateDevices().then(n=>{let s=(n=n.filter(e=>"videoinput"===e.kind)).find(e=>t.some(t=>e.label.toLowerCase().includes(t)));return!s&&n.length&&t.includes("back")&&(s=n[n.length-1]),s&&(e.video.deviceId=o.exact?{exact:s.deviceId}:{ideal:s.deviceId}),e.video=i(e.video),T("chrome: "+JSON.stringify(e)),r(e)})}e.video=i(e.video)}return T("chrome: "+JSON.stringify(e)),r(e)},o=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=function(e,t,i){r(e,e=>{n.webkitGetUserMedia(e,t,e=>{i&&i(o(e))})})}.bind(n),n.mediaDevices.getUserMedia){const e=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(t){return r(t,t=>e(t).then(e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach(e=>{e.stop()}),new DOMException("","NotFoundError");return e},e=>Promise.reject(o(e))))}}}function R(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function I(e){if("object"==typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",n=>{let i;i=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(e=>e.track&&e.track.id===n.track.id):{track:n.track};const r=new Event("track");r.track=n.track,r.receiver=i,r.transceiver={receiver:i},r.streams=[t.stream],this.dispatchEvent(r)}),t.stream.getTracks().forEach(n=>{let i;i=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(e=>e.track&&e.track.id===n.id):{track:n};const r=new Event("track");r.track=n,r.receiver=i,r.transceiver={receiver:i},r.streams=[t.stream],this.dispatchEvent(r)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else f(e,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function w(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,i){let r=n.apply(this,arguments);return r||(r=t(this,e),this._senders.push(r)),r};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){i.apply(this,arguments);const t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],n.apply(this,[e]),e.getTracks().forEach(e=>{this._senders.push(t(this,e))})};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],i.apply(this,[e]),e.getTracks().forEach(e=>{const t=this._senders.find(t=>t.track===e);t&&this._senders.splice(this._senders.indexOf(t),1)})}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function O(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,n,i]=arguments;if(arguments.length>0&&"function"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof e))return t.apply(this,[]);const r=function(e){const t={};return e.result().forEach(e=>{const n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach(t=>{n[t]=e.stat(t)}),t[n.id]=n}),t},o=function(e){return new Map(Object.keys(e).map(t=>[t,e[t]]))};if(arguments.length>=2){const i=function(e){n(o(r(e)))};return t.apply(this,[i,e])}return new Promise((e,n)=>{t.apply(this,[function(t){e(o(r(t)))},n])}).then(n,i)}}function k(e){if(!("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then(t=>b(t,e.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e}),f(e,"track",e=>(e.receiver._pc=e.srcElement,e)),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then(t=>b(t,e.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const e=arguments[0];let t,n,i;return this.getSenders().forEach(n=>{n.track===e&&(t?i=!0:t=n)}),this.getReceivers().forEach(t=>(t.track===e&&(n?i=!0:n=t),t.track===e)),i||t&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function M(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(e=>this._shimmedLocalStreams[e][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const i=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(i)&&this._shimmedLocalStreams[n.id].push(i):this._shimmedLocalStreams[n.id]=[n,i],i};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach(e=>{if(this.getSenders().find(t=>t.track===e))throw new DOMException("Track already exists.","InvalidAccessError")});const t=this.getSenders();n.apply(this,arguments);const i=this.getSenders().filter(e=>-1===t.indexOf(e));this._shimmedLocalStreams[e.id]=[e].concat(i)};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],i.apply(this,arguments)};const r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach(t=>{const n=this._shimmedLocalStreams[t].indexOf(e);-1!==n&&this._shimmedLocalStreams[t].splice(n,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]}),r.apply(this,arguments)}}function x(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return M(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=n.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map(e=>this._reverseStreams[e.id])};const i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach(e=>{if(this.getSenders().find(t=>t.track===e))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[t.id]){const n=new e.MediaStream(t.getTracks());this._streams[t.id]=n,this._reverseStreams[n.id]=t,t=n}i.apply(this,[t])};const r=e.RTCPeerConnection.prototype.removeStream;function o(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(t=>{const i=e._reverseStreams[t],r=e._streams[i.id];n=n.replace(new RegExp(r.id,"g"),i.id)}),new RTCSessionDescription({type:t.type,sdp:n})}function s(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(t=>{const i=e._reverseStreams[t],r=e._streams[i.id];n=n.replace(new RegExp(i.id,"g"),r.id)}),new RTCSessionDescription({type:t.type,sdp:n})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},r.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find(e=>e===t))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");const r=this.getSenders().find(e=>e.track===t);if(r)throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const o=this._streams[n.id];if(o)o.addTrack(t),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const i=new e.MediaStream([t]);this._streams[n.id]=i,this._reverseStreams[i.id]=n,this.addStream(i)}return this.getSenders().find(e=>e.track===t)},["createOffer","createAnswer"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],i={[t](){const e=arguments;return arguments.length&&"function"==typeof arguments[0]?n.apply(this,[t=>{const n=o(this,t);e[0].apply(null,[n])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):n.apply(this,arguments).then(e=>o(this,e))}};e.RTCPeerConnection.prototype[t]=i[t]}));const a=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=s(this,arguments[0]),a.apply(this,arguments)):a.apply(this,arguments)};const c=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const e=c.get.apply(this);return""===e.type?e:o(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let t;this._streams=this._streams||{},Object.keys(this._streams).forEach(n=>{this._streams[n].getTracks().find(t=>e.track===t)&&(t=this._streams[n])}),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function P(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],i={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=i[t]}))}function A(e,t){f(e,"negotiationneeded",e=>{const n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e})}var D,N,L=Object.freeze({__proto__:null,shimMediaStream:R,shimOnTrack:I,shimGetSendersWithDtmf:w,shimGetStats:O,shimSenderReceiverGetStats:k,shimAddTrackRemoveTrackWithNative:M,shimAddTrackRemoveTrack:x,shimPeerConnection:P,fixNegotiationNeeded:A,shimGetUserMedia:S,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then(t=>{const i=n.video&&n.video.width,r=n.video&&n.video.height,o=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},i&&(n.video.mandatory.maxWidth=i),r&&(n.video.mandatory.maxHeight=r),e.navigator.mediaDevices.getUserMedia(n)})}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}}),U=(D=function(e){var t={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},t.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},t.getDescription=function(e){var n=t.splitSections(e);return n&&n[0]},t.getMediaSections=function(e){var n=t.splitSections(e);return n.shift(),n},t.matchPrefix=function(e,n){return t.splitLines(e).filter((function(e){return 0===e.indexOf(n)}))},t.parseCandidate=function(e){for(var t,n={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},i=8;i<t.length;i+=2)switch(t[i]){case"raddr":n.relatedAddress=t[i+1];break;case"rport":n.relatedPort=parseInt(t[i+1],10);break;case"tcptype":n.tcpType=t[i+1];break;case"ufrag":n.ufrag=t[i+1],n.usernameFragment=t[i+1];break;default:n[t[i]]=t[i+1]}return n},t.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substr(14).split(" ")},t.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},t.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},t.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},t.parseFmtp=function(e){for(var t,n={},i=e.substr(e.indexOf(" ")+1).split(";"),r=0;r<i.length;r++)n[(t=i[r].trim().split("="))[0].trim()]=t[1];return n},t.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var i=[];Object.keys(e.parameters).forEach((function(t){e.parameters[t]?i.push(t+"="+e.parameters[t]):i.push(t)})),t+="a=fmtp:"+n+" "+i.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},t.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},i=e.indexOf(":",t);return i>-1?(n.attribute=e.substr(t+1,i-t-1),n.value=e.substr(i+1)):n.attribute=e.substr(t+1),n},t.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},t.getMid=function(e){var n=t.matchPrefix(e,"a=mid:")[0];if(n)return n.substr(6)},t.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},t.getDtlsParameters=function(e,n){return{role:"auto",fingerprints:t.matchPrefix(e+n,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},t.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,n){return t.matchPrefix(e+n,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,n){var i=t.matchPrefix(e+n,"a=ice-ufrag:")[0],r=t.matchPrefix(e+n,"a=ice-pwd:")[0];return i&&r?{usernameFragment:i.substr(12),password:r.substr(10)}:null},t.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},t.parseRtpParameters=function(e){for(var n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},i=t.splitLines(e)[0].split(" "),r=3;r<i.length;r++){var o=i[r],s=t.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(s){var a=t.parseRtpMap(s),c=t.matchPrefix(e,"a=fmtp:"+o+" ");switch(a.parameters=c.length?t.parseFmtp(c[0]):{},a.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(t.parseRtcpFb),n.codecs.push(a),a.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(a.name.toUpperCase())}}}return t.matchPrefix(e,"a=extmap:").forEach((function(e){n.headerExtensions.push(t.parseExtmap(e))})),n},t.writeRtpDescription=function(e,n){var i="";i+="m="+e+" ",i+=n.codecs.length>0?"9":"0",i+=" UDP/TLS/RTP/SAVPF ",i+=n.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",i+="c=IN IP4 0.0.0.0\r\n",i+="a=rtcp:9 IN IP4 0.0.0.0\r\n",n.codecs.forEach((function(e){i+=t.writeRtpMap(e),i+=t.writeFmtp(e),i+=t.writeRtcpFb(e)}));var r=0;return n.codecs.forEach((function(e){e.maxptime>r&&(r=e.maxptime)})),r>0&&(i+="a=maxptime:"+r+"\r\n"),i+="a=rtcp-mux\r\n",n.headerExtensions&&n.headerExtensions.forEach((function(e){i+=t.writeExtmap(e)})),i},t.parseRtpEncodingParameters=function(e){var n,i=[],r=t.parseRtpParameters(e),o=-1!==r.fecMechanisms.indexOf("RED"),s=-1!==r.fecMechanisms.indexOf("ULPFEC"),a=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),c=a.length>0&&a[0].ssrc,l=t.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substr(17).split(" ").map((function(e){return parseInt(e,10)}))}));l.length>0&&l[0].length>1&&l[0][0]===c&&(n=l[0][1]),r.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var t={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&n&&(t.rtx={ssrc:n}),i.push(t),o&&((t=JSON.parse(JSON.stringify(t))).fec={ssrc:c,mechanism:s?"red+ulpfec":"red"},i.push(t))}})),0===i.length&&c&&i.push({ssrc:c});var u=t.matchPrefix(e,"b=");return u.length&&(u=0===u[0].indexOf("b=TIAS:")?parseInt(u[0].substr(7),10):0===u[0].indexOf("b=AS:")?1e3*parseInt(u[0].substr(5),10)*.95-16e3:void 0,i.forEach((function(e){e.maxBitrate=u}))),i},t.parseRtcpParameters=function(e){var n={},i=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];i&&(n.cname=i.value,n.ssrc=i.ssrc);var r=t.matchPrefix(e,"a=rtcp-rsize");n.reducedSize=r.length>0,n.compound=0===r.length;var o=t.matchPrefix(e,"a=rtcp-mux");return n.mux=o.length>0,n},t.parseMsid=function(e){var n,i=t.matchPrefix(e,"a=msid:");if(1===i.length)return{stream:(n=i[0].substr(7).split(" "))[0],track:n[1]};var r=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return r.length>0?{stream:(n=r[0].value.split(" "))[0],track:n[1]}:void 0},t.parseSctpDescription=function(e){var n,i=t.parseMLine(e),r=t.matchPrefix(e,"a=max-message-size:");r.length>0&&(n=parseInt(r[0].substr(19),10)),isNaN(n)&&(n=65536);var o=t.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substr(12),10),protocol:i.fmt,maxMessageSize:n};if(t.matchPrefix(e,"a=sctpmap:").length>0){var s=t.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(s[0],10),protocol:s[1],maxMessageSize:n}}},t.writeSctpDescription=function(e,t){var n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,21)},t.writeSessionBoilerplate=function(e,n,i){var r=void 0!==n?n:2;return"v=0\r\no="+(i||"thisisadapterortc")+" "+(e||t.generateSessionId())+" "+r+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.writeMediaSection=function(e,n,i,r){var o=t.writeRtpDescription(e.kind,n);if(o+=t.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=t.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===i?"actpass":"active"),o+="a=mid:"+e.mid+"\r\n",e.direction?o+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var s="msid:"+r.id+" "+e.rtpSender.track.id+"\r\n";o+="a="+s,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+s,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+s,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+t.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+t.localCName+"\r\n"),o},t.getDirection=function(e,n){for(var i=t.splitLines(e),r=0;r<i.length;r++)switch(i[r]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[r].substr(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substr(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){var n=t.splitLines(e)[0].substr(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},t.parseOLine=function(e){var n=t.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},t.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var n=t.splitLines(e),i=0;i<n.length;i++)if(n[i].length<2||"="!==n[i].charAt(1))return!1;return!0},e.exports=t},D(N={exports:{}},N.exports),N.exports);function B(e,t,n,i,r){var o=U.writeRtpDescription(e.kind,t);if(o+=U.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=U.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":r||"active"),o+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var s=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=s;var a="msid:"+(i?i.id:"-")+" "+s+"\r\n";o+="a="+a,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+a,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+a,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+U.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+U.localCName+"\r\n"),o}function V(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},i=function(e,t){e=parseInt(e,10);for(var n=0;n<t.length;n++)if(t[n].payloadType===e||t[n].preferredPayloadType===e)return t[n]},r=function(e,t,n,r){var o=i(e.parameters.apt,n),s=i(t.parameters.apt,r);return o&&s&&o.name.toLowerCase()===s.name.toLowerCase()};return e.codecs.forEach((function(i){for(var o=0;o<t.codecs.length;o++){var s=t.codecs[o];if(i.name.toLowerCase()===s.name.toLowerCase()&&i.clockRate===s.clockRate){if("rtx"===i.name.toLowerCase()&&i.parameters&&s.parameters.apt&&!r(i,s,e.codecs,t.codecs))continue;(s=JSON.parse(JSON.stringify(s))).numChannels=Math.min(i.numChannels,s.numChannels),n.codecs.push(s),s.rtcpFeedback=s.rtcpFeedback.filter((function(e){for(var t=0;t<i.rtcpFeedback.length;t++)if(i.rtcpFeedback[t].type===e.type&&i.rtcpFeedback[t].parameter===e.parameter)return!0;return!1}));break}}})),e.headerExtensions.forEach((function(e){for(var i=0;i<t.headerExtensions.length;i++){var r=t.headerExtensions[i];if(e.uri===r.uri){n.headerExtensions.push(r);break}}})),n}function j(e,t,n){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(n)}function F(e,t){var n=e.getRemoteCandidates().find((function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type}));return n||e.addRemoteCandidate(t),!n}function $(e,t){var n=new Error(t);return n.name=e,n.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],n}var H=function(e,t){function n(t,n){n.addTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function i(t,n,i,r){var o=new Event("track");o.track=n,o.receiver=i,o.transceiver={receiver:i},o.streams=r,e.setTimeout((function(){t._dispatchEvent("track",o)}))}var r=function(n){var i=this,r=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach((function(e){i[e]=r[e].bind(r)})),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",n=JSON.parse(JSON.stringify(n||{})),this.usingBundle="max-bundle"===n.bundlePolicy,"negotiate"===n.rtcpMuxPolicy)throw $("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(n.rtcpMuxPolicy||(n.rtcpMuxPolicy="require"),n.iceTransportPolicy){case"all":case"relay":break;default:n.iceTransportPolicy="all"}switch(n.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:n.bundlePolicy="balanced"}if(n.iceServers=function(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var i=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var r="string"==typeof i;return r&&(i=[i]),i=i.filter((function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||n?0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp"):(n=!0,!0)})),delete e.url,e.urls=r?i[0]:i,!!i.length}}))}(n.iceServers||[],t),this._iceGatherers=[],n.iceCandidatePoolSize)for(var o=n.iceCandidatePoolSize;o>0;o--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:n.iceServers,gatherPolicy:n.iceTransportPolicy}));else n.iceCandidatePoolSize=0;this._config=n,this.transceivers=[],this._sdpSessionId=U.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(r.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(r.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),r.prototype.onicecandidate=null,r.prototype.onaddstream=null,r.prototype.ontrack=null,r.prototype.onremovestream=null,r.prototype.onsignalingstatechange=null,r.prototype.oniceconnectionstatechange=null,r.prototype.onconnectionstatechange=null,r.prototype.onicegatheringstatechange=null,r.prototype.onnegotiationneeded=null,r.prototype.ondatachannel=null,r.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},r.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},r.prototype.getConfiguration=function(){return this._config},r.prototype.getLocalStreams=function(){return this.localStreams},r.prototype.getRemoteStreams=function(){return this.remoteStreams},r.prototype._createTransceiver=function(e,t){var n=this.transceivers.length>0,i={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&n)i.iceTransport=this.transceivers[0].iceTransport,i.dtlsTransport=this.transceivers[0].dtlsTransport;else{var r=this._createIceAndDtlsTransports();i.iceTransport=r.iceTransport,i.dtlsTransport=r.dtlsTransport}return t||this.transceivers.push(i),i},r.prototype.addTrack=function(t,n){if(this._isClosed)throw $("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var i;if(this.transceivers.find((function(e){return e.track===t})))throw $("InvalidAccessError","Track already exists.");for(var r=0;r<this.transceivers.length;r++)this.transceivers[r].track||this.transceivers[r].kind!==t.kind||(i=this.transceivers[r]);return i||(i=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(n)&&this.localStreams.push(n),i.track=t,i.stream=n,i.rtpSender=new e.RTCRtpSender(t,i.dtlsTransport),i.rtpSender},r.prototype.addStream=function(e){var n=this;if(t>=15025)e.getTracks().forEach((function(t){n.addTrack(t,e)}));else{var i=e.clone();e.getTracks().forEach((function(e,t){var n=i.getTracks()[t];e.addEventListener("enabled",(function(e){n.enabled=e.enabled}))})),i.getTracks().forEach((function(e){n.addTrack(e,i)}))}},r.prototype.removeTrack=function(t){if(this._isClosed)throw $("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var n=this.transceivers.find((function(e){return e.rtpSender===t}));if(!n)throw $("InvalidAccessError","Sender was not created by this connection.");var i=n.stream;n.rtpSender.stop(),n.rtpSender=null,n.track=null,n.stream=null,-1===this.transceivers.map((function(e){return e.stream})).indexOf(i)&&this.localStreams.indexOf(i)>-1&&this.localStreams.splice(this.localStreams.indexOf(i),1),this._maybeFireNegotiationNeeded()},r.prototype.removeStream=function(e){var t=this;e.getTracks().forEach((function(e){var n=t.getSenders().find((function(t){return t.track===e}));n&&t.removeTrack(n)}))},r.prototype.getSenders=function(){return this.transceivers.filter((function(e){return!!e.rtpSender})).map((function(e){return e.rtpSender}))},r.prototype.getReceivers=function(){return this.transceivers.filter((function(e){return!!e.rtpReceiver})).map((function(e){return e.rtpReceiver}))},r.prototype._createIceGatherer=function(t,n){var i=this;if(n&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var r=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(r,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var n=!e.candidate||0===Object.keys(e.candidate).length;r.state=n?"completed":"gathering",null!==i.transceivers[t].bufferedCandidateEvents&&i.transceivers[t].bufferedCandidateEvents.push(e)},r.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),r},r.prototype._gather=function(t,n){var i=this,r=this.transceivers[n].iceGatherer;if(!r.onlocalcandidate){var o=this.transceivers[n].bufferedCandidateEvents;this.transceivers[n].bufferedCandidateEvents=null,r.removeEventListener("localcandidate",this.transceivers[n].bufferCandidates),r.onlocalcandidate=function(e){if(!(i.usingBundle&&n>0)){var o=new Event("icecandidate");o.candidate={sdpMid:t,sdpMLineIndex:n};var s=e.candidate,a=!s||0===Object.keys(s).length;if(a)"new"!==r.state&&"gathering"!==r.state||(r.state="completed");else{"new"===r.state&&(r.state="gathering"),s.component=1,s.ufrag=r.getLocalParameters().usernameFragment;var c=U.writeCandidate(s);o.candidate=Object.assign(o.candidate,U.parseCandidate(c)),o.candidate.candidate=c,o.candidate.toJSON=function(){return{candidate:o.candidate.candidate,sdpMid:o.candidate.sdpMid,sdpMLineIndex:o.candidate.sdpMLineIndex,usernameFragment:o.candidate.usernameFragment}}}var l=U.getMediaSections(i._localDescription.sdp);l[o.candidate.sdpMLineIndex]+=a?"a=end-of-candidates\r\n":"a="+o.candidate.candidate+"\r\n",i._localDescription.sdp=U.getDescription(i._localDescription.sdp)+l.join("");var u=i.transceivers.every((function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state}));"gathering"!==i.iceGatheringState&&(i.iceGatheringState="gathering",i._emitGatheringStateChange()),a||i._dispatchEvent("icecandidate",o),u&&(i._dispatchEvent("icecandidate",new Event("icecandidate")),i.iceGatheringState="complete",i._emitGatheringStateChange())}},e.setTimeout((function(){o.forEach((function(e){r.onlocalcandidate(e)}))}),0)}},r.prototype._createIceAndDtlsTransports=function(){var t=this,n=new e.RTCIceTransport(null);n.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var i=new e.RTCDtlsTransport(n);return i.ondtlsstatechange=function(){t._updateConnectionState()},i.onerror=function(){Object.defineProperty(i,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:n,dtlsTransport:i}},r.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var n=this.transceivers[e].iceTransport;n&&(delete n.onicestatechange,delete this.transceivers[e].iceTransport);var i=this.transceivers[e].dtlsTransport;i&&(delete i.ondtlsstatechange,delete i.onerror,delete this.transceivers[e].dtlsTransport)},r.prototype._transceive=function(e,n,i){var r=V(e.localCapabilities,e.remoteCapabilities);n&&e.rtpSender&&(r.encodings=e.sendEncodingParameters,r.rtcp={cname:U.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(r.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(r)),i&&e.rtpReceiver&&r.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach((function(e){delete e.rtx})),e.recvEncodingParameters.length?r.encodings=e.recvEncodingParameters:r.encodings=[{}],r.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(r.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(r.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(r))},r.prototype.setLocalDescription=function(e){var t,n,i=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject($("TypeError",'Unsupported type "'+e.type+'"'));if(!j("setLocalDescription",e.type,i.signalingState)||i._isClosed)return Promise.reject($("InvalidStateError","Can not set local "+e.type+" in state "+i.signalingState));if("offer"===e.type)t=U.splitSections(e.sdp),n=t.shift(),t.forEach((function(e,t){var n=U.parseRtpParameters(e);i.transceivers[t].localCapabilities=n})),i.transceivers.forEach((function(e,t){i._gather(e.mid,t)}));else if("answer"===e.type){t=U.splitSections(i._remoteDescription.sdp),n=t.shift();var r=U.matchPrefix(n,"a=ice-lite").length>0;t.forEach((function(e,t){var o=i.transceivers[t],s=o.iceGatherer,a=o.iceTransport,c=o.dtlsTransport,l=o.localCapabilities,u=o.remoteCapabilities;if((!U.isRejected(e)||0!==U.matchPrefix(e,"a=bundle-only").length)&&!o.rejected){var d=U.getIceParameters(e,n),h=U.getDtlsParameters(e,n);r&&(h.role="server"),i.usingBundle&&0!==t||(i._gather(o.mid,t),"new"===a.state&&a.start(s,d,r?"controlling":"controlled"),"new"===c.state&&c.start(h));var p=V(l,u);i._transceive(o,p.codecs.length>0,!1)}}))}return i._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?i._updateSignalingState("have-local-offer"):i._updateSignalingState("stable"),Promise.resolve()},r.prototype.setRemoteDescription=function(r){var o=this;if(-1===["offer","answer"].indexOf(r.type))return Promise.reject($("TypeError",'Unsupported type "'+r.type+'"'));if(!j("setRemoteDescription",r.type,o.signalingState)||o._isClosed)return Promise.reject($("InvalidStateError","Can not set remote "+r.type+" in state "+o.signalingState));var s={};o.remoteStreams.forEach((function(e){s[e.id]=e}));var a=[],c=U.splitSections(r.sdp),l=c.shift(),u=U.matchPrefix(l,"a=ice-lite").length>0,d=U.matchPrefix(l,"a=group:BUNDLE ").length>0;o.usingBundle=d;var h=U.matchPrefix(l,"a=ice-options:")[0];return o.canTrickleIceCandidates=!!h&&h.substr(14).split(" ").indexOf("trickle")>=0,c.forEach((function(i,c){var h=U.splitLines(i),p=U.getKind(i),f=U.isRejected(i)&&0===U.matchPrefix(i,"a=bundle-only").length,g=h[0].substr(2).split(" ")[2],m=U.getDirection(i,l),_=U.parseMsid(i),v=U.getMid(i)||U.generateIdentifier();if(f||"application"===p&&("DTLS/SCTP"===g||"UDP/DTLS/SCTP"===g))o.transceivers[c]={mid:v,kind:p,protocol:g,rejected:!0};else{var y,C,E,b,T,S,R,I,w;!f&&o.transceivers[c]&&o.transceivers[c].rejected&&(o.transceivers[c]=o._createTransceiver(p,!0));var O,k,M=U.parseRtpParameters(i);f||(O=U.getIceParameters(i,l),(k=U.getDtlsParameters(i,l)).role="client"),R=U.parseRtpEncodingParameters(i);var x=U.parseRtcpParameters(i),P=U.matchPrefix(i,"a=end-of-candidates",l).length>0,A=U.matchPrefix(i,"a=candidate:").map((function(e){return U.parseCandidate(e)})).filter((function(e){return 1===e.component}));if(("offer"===r.type||"answer"===r.type)&&!f&&d&&c>0&&o.transceivers[c]&&(o._disposeIceAndDtlsTransports(c),o.transceivers[c].iceGatherer=o.transceivers[0].iceGatherer,o.transceivers[c].iceTransport=o.transceivers[0].iceTransport,o.transceivers[c].dtlsTransport=o.transceivers[0].dtlsTransport,o.transceivers[c].rtpSender&&o.transceivers[c].rtpSender.setTransport(o.transceivers[0].dtlsTransport),o.transceivers[c].rtpReceiver&&o.transceivers[c].rtpReceiver.setTransport(o.transceivers[0].dtlsTransport)),"offer"!==r.type||f)"answer"!==r.type||f||(C=(y=o.transceivers[c]).iceGatherer,E=y.iceTransport,b=y.dtlsTransport,T=y.rtpReceiver,S=y.sendEncodingParameters,I=y.localCapabilities,o.transceivers[c].recvEncodingParameters=R,o.transceivers[c].remoteCapabilities=M,o.transceivers[c].rtcpParameters=x,A.length&&"new"===E.state&&(!u&&!P||d&&0!==c?A.forEach((function(e){F(y.iceTransport,e)})):E.setRemoteCandidates(A)),d&&0!==c||("new"===E.state&&E.start(C,O,"controlling"),"new"===b.state&&b.start(k)),!V(y.localCapabilities,y.remoteCapabilities).codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&y.sendEncodingParameters[0].rtx&&delete y.sendEncodingParameters[0].rtx,o._transceive(y,"sendrecv"===m||"recvonly"===m,"sendrecv"===m||"sendonly"===m),!T||"sendrecv"!==m&&"sendonly"!==m?delete y.rtpReceiver:(w=T.track,_?(s[_.stream]||(s[_.stream]=new e.MediaStream),n(w,s[_.stream]),a.push([w,T,s[_.stream]])):(s.default||(s.default=new e.MediaStream),n(w,s.default),a.push([w,T,s.default]))));else{(y=o.transceivers[c]||o._createTransceiver(p)).mid=v,y.iceGatherer||(y.iceGatherer=o._createIceGatherer(c,d)),A.length&&"new"===y.iceTransport.state&&(!P||d&&0!==c?A.forEach((function(e){F(y.iceTransport,e)})):y.iceTransport.setRemoteCandidates(A)),I=e.RTCRtpReceiver.getCapabilities(p),t<15019&&(I.codecs=I.codecs.filter((function(e){return"rtx"!==e.name}))),S=y.sendEncodingParameters||[{ssrc:1001*(2*c+2)}];var D,N=!1;"sendrecv"===m||"sendonly"===m?(N=!y.rtpReceiver,T=y.rtpReceiver||new e.RTCRtpReceiver(y.dtlsTransport,p),N&&(w=T.track,_&&"-"===_.stream||(_?(s[_.stream]||(s[_.stream]=new e.MediaStream,Object.defineProperty(s[_.stream],"id",{get:function(){return _.stream}})),Object.defineProperty(w,"id",{get:function(){return _.track}}),D=s[_.stream]):(s.default||(s.default=new e.MediaStream),D=s.default)),D&&(n(w,D),y.associatedRemoteMediaStreams.push(D)),a.push([w,T,D]))):y.rtpReceiver&&y.rtpReceiver.track&&(y.associatedRemoteMediaStreams.forEach((function(t){var n=t.getTracks().find((function(e){return e.id===y.rtpReceiver.track.id}));n&&function(t,n){n.removeTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))}(n,t)})),y.associatedRemoteMediaStreams=[]),y.localCapabilities=I,y.remoteCapabilities=M,y.rtpReceiver=T,y.rtcpParameters=x,y.sendEncodingParameters=S,y.recvEncodingParameters=R,o._transceive(o.transceivers[c],!1,N)}}})),void 0===o._dtlsRole&&(o._dtlsRole="offer"===r.type?"active":"passive"),o._remoteDescription={type:r.type,sdp:r.sdp},"offer"===r.type?o._updateSignalingState("have-remote-offer"):o._updateSignalingState("stable"),Object.keys(s).forEach((function(t){var n=s[t];if(n.getTracks().length){if(-1===o.remoteStreams.indexOf(n)){o.remoteStreams.push(n);var r=new Event("addstream");r.stream=n,e.setTimeout((function(){o._dispatchEvent("addstream",r)}))}a.forEach((function(e){var t=e[0],r=e[1];n.id===e[2].id&&i(o,t,r,[n])}))}})),a.forEach((function(e){e[2]||i(o,e[0],e[1],[])})),e.setTimeout((function(){o&&o.transceivers&&o.transceivers.forEach((function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))}))}),4e3),Promise.resolve()},r.prototype.close=function(){this.transceivers.forEach((function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()})),this._isClosed=!0,this._updateSignalingState("closed")},r.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},r.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout((function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}}),0))},r.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++})),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var n=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",n)}},r.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)})),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var n=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",n)}},r.prototype.createOffer=function(){var n=this;if(n._isClosed)return Promise.reject($("InvalidStateError","Can not call createOffer after close"));var i=n.transceivers.filter((function(e){return"audio"===e.kind})).length,r=n.transceivers.filter((function(e){return"video"===e.kind})).length,o=arguments[0];if(o){if(o.mandatory||o.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==o.offerToReceiveAudio&&(i=!0===o.offerToReceiveAudio?1:!1===o.offerToReceiveAudio?0:o.offerToReceiveAudio),void 0!==o.offerToReceiveVideo&&(r=!0===o.offerToReceiveVideo?1:!1===o.offerToReceiveVideo?0:o.offerToReceiveVideo)}for(n.transceivers.forEach((function(e){"audio"===e.kind?--i<0&&(e.wantReceive=!1):"video"===e.kind&&--r<0&&(e.wantReceive=!1)}));i>0||r>0;)i>0&&(n._createTransceiver("audio"),i--),r>0&&(n._createTransceiver("video"),r--);var s=U.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.transceivers.forEach((function(i,r){var o=i.track,s=i.kind,a=i.mid||U.generateIdentifier();i.mid=a,i.iceGatherer||(i.iceGatherer=n._createIceGatherer(r,n.usingBundle));var c=e.RTCRtpSender.getCapabilities(s);t<15019&&(c.codecs=c.codecs.filter((function(e){return"rtx"!==e.name}))),c.codecs.forEach((function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),i.remoteCapabilities&&i.remoteCapabilities.codecs&&i.remoteCapabilities.codecs.forEach((function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)}))})),c.headerExtensions.forEach((function(e){(i.remoteCapabilities&&i.remoteCapabilities.headerExtensions||[]).forEach((function(t){e.uri===t.uri&&(e.id=t.id)}))}));var l=i.sendEncodingParameters||[{ssrc:1001*(2*r+1)}];o&&t>=15019&&"video"===s&&!l[0].rtx&&(l[0].rtx={ssrc:l[0].ssrc+1}),i.wantReceive&&(i.rtpReceiver=new e.RTCRtpReceiver(i.dtlsTransport,s)),i.localCapabilities=c,i.sendEncodingParameters=l})),"max-compat"!==n._config.bundlePolicy&&(s+="a=group:BUNDLE "+n.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),s+="a=ice-options:trickle\r\n",n.transceivers.forEach((function(e,t){s+=B(e,e.localCapabilities,"offer",e.stream,n._dtlsRole),s+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===n.iceGatheringState||0!==t&&n.usingBundle||(e.iceGatherer.getLocalCandidates().forEach((function(e){e.component=1,s+="a="+U.writeCandidate(e)+"\r\n"})),"completed"===e.iceGatherer.state&&(s+="a=end-of-candidates\r\n"))}));var a=new e.RTCSessionDescription({type:"offer",sdp:s});return Promise.resolve(a)},r.prototype.createAnswer=function(){var n=this;if(n._isClosed)return Promise.reject($("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==n.signalingState&&"have-local-pranswer"!==n.signalingState)return Promise.reject($("InvalidStateError","Can not call createAnswer in signalingState "+n.signalingState));var i=U.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.usingBundle&&(i+="a=group:BUNDLE "+n.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),i+="a=ice-options:trickle\r\n";var r=U.getMediaSections(n._remoteDescription.sdp).length;n.transceivers.forEach((function(e,o){if(!(o+1>r)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?i+="m=application 0 DTLS/SCTP 5000\r\n":i+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?i+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(i+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(i+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var s;e.stream&&("audio"===e.kind?s=e.stream.getAudioTracks()[0]:"video"===e.kind&&(s=e.stream.getVideoTracks()[0]),s&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1}));var a=V(e.localCapabilities,e.remoteCapabilities);!a.codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,i+=B(e,a,"answer",e.stream,n._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(i+="a=rtcp-rsize\r\n")}}));var o=new e.RTCSessionDescription({type:"answer",sdp:i});return Promise.resolve(o)},r.prototype.addIceCandidate=function(e){var t,n=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise((function(i,r){if(!n._remoteDescription)return r($("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var o=e.sdpMLineIndex;if(e.sdpMid)for(var s=0;s<n.transceivers.length;s++)if(n.transceivers[s].mid===e.sdpMid){o=s;break}var a=n.transceivers[o];if(!a)return r($("OperationError","Can not add ICE candidate"));if(a.rejected)return i();var c=Object.keys(e.candidate).length>0?U.parseCandidate(e.candidate):{};if("tcp"===c.protocol&&(0===c.port||9===c.port))return i();if(c.component&&1!==c.component)return i();if((0===o||o>0&&a.iceTransport!==n.transceivers[0].iceTransport)&&!F(a.iceTransport,c))return r($("OperationError","Can not add ICE candidate"));var l=e.candidate.trim();0===l.indexOf("a=")&&(l=l.substr(2)),(t=U.getMediaSections(n._remoteDescription.sdp))[o]+="a="+(c.type?l:"end-of-candidates")+"\r\n",n._remoteDescription.sdp=U.getDescription(n._remoteDescription.sdp)+t.join("")}else for(var u=0;u<n.transceivers.length&&(n.transceivers[u].rejected||(n.transceivers[u].iceTransport.addRemoteCandidate({}),(t=U.getMediaSections(n._remoteDescription.sdp))[u]+="a=end-of-candidates\r\n",n._remoteDescription.sdp=U.getDescription(n._remoteDescription.sdp)+t.join(""),!n.usingBundle));u++);i()}))},r.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var n=null;if(this.transceivers.forEach((function(e){e.rtpSender&&e.rtpSender.track===t?n=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(n=e.rtpReceiver)})),!n)throw $("InvalidAccessError","Invalid selector.");return n.getStats()}var i=[];return this.transceivers.forEach((function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach((function(t){e[t]&&i.push(e[t].getStats())}))})),Promise.all(i).then((function(e){var t=new Map;return e.forEach((function(e){e.forEach((function(e){t.set(e.id,e)}))})),t}))},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach((function(t){var n=e[t];if(n&&n.prototype&&n.prototype.getStats){var i=n.prototype.getStats;n.prototype.getStats=function(){return i.apply(this).then((function(e){var t=new Map;return Object.keys(e).forEach((function(n){var i;e[n].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(i=e[n]).type]||i.type,t.set(n,e[n])})),t}))}}}));var o=["createOffer","createAnswer"];return o.forEach((function(e){var t=r.prototype[e];r.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then((function(t){"function"==typeof e[0]&&e[0].apply(null,[t])}),(function(t){"function"==typeof e[1]&&e[1].apply(null,[t])})):t.apply(this,arguments)}})),(o=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach((function(e){var t=r.prototype[e];r.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)}),(function(t){"function"==typeof e[2]&&e[2].apply(null,[t])})):t.apply(this,arguments)}})),["getStats"].forEach((function(e){var t=r.prototype[e];r.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)})):t.apply(this,arguments)}})),r};function K(e){const t=e&&e.navigator,n=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return n(e).catch(e=>Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString(){return this.name}}}(e)))}}function W(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}function q(e,t){if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){const t=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set(e){t.set.call(this,e);const n=new Event("enabled");n.enabled=e,this.dispatchEvent(n)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);const n=H(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=function(e,t){let n=!1;return(e=JSON.parse(JSON.stringify(e))).filter(e=>{if(e&&(e.urls||e.url)){let t=e.urls||e.url;e.url&&!e.urls&&v("RTCIceServer.url","RTCIceServer.urls");const i="string"==typeof t;return i&&(t=[t]),t=t.filter(e=>{if(0===e.indexOf("stun:"))return!1;const t=e.startsWith("turn")&&!e.startsWith("turn:[")&&e.includes("transport=udp");return t&&!n?(n=!0,!0):t&&!n}),delete e.url,e.urls=i?t[0]:t,!!t.length}})}(e.iceServers,t.version),_("ICE servers after filtering:",e.iceServers)),new n(e)},e.RTCPeerConnection.prototype=n.prototype}function G(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}var z=Object.freeze({__proto__:null,shimPeerConnection:q,shimReplaceTrack:G,shimGetUserMedia:K,shimGetDisplayMedia:W});function Y(e,t){const n=e&&e.navigator,i=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,i){v("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,i)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const e=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},t=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(n){return"object"==typeof n&&"object"==typeof n.audio&&(n=JSON.parse(JSON.stringify(n)),e(n.audio,"autoGainControl","mozAutoGainControl"),e(n.audio,"noiseSuppression","mozNoiseSuppression")),t(n)},i&&i.prototype.getSettings){const t=i.prototype.getSettings;i.prototype.getSettings=function(){const n=t.apply(this,arguments);return e(n,"mozAutoGainControl","autoGainControl"),e(n,"mozNoiseSuppression","noiseSuppression"),n}}if(i&&i.prototype.applyConstraints){const t=i.prototype.applyConstraints;i.prototype.applyConstraints=function(n){return"audio"===this.kind&&"object"==typeof n&&(n=JSON.parse(JSON.stringify(n)),e(n,"autoGainControl","mozAutoGainControl"),e(n,"noiseSuppression","mozNoiseSuppression")),t.apply(this,[n])}}}}function J(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function X(e,t){if("object"!=typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],i={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=i[t]}));const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,r,o]=arguments;return i.apply(this,[e||null]).then(e=>{if(t.version<53&&!r)try{e.forEach(e=>{e.type=n[e.type]||e.type})}catch(t){if("TypeError"!==t.name)throw t;e.forEach((t,i)=>{e.set(i,Object.assign({},t,{type:n[t.type]||t.type}))})}return e}).then(r,o)}}function Q(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function Z(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach(e=>e._pc=this),e}),f(e,"track",e=>(e.receiver._pc=e.srcElement,e)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function ee(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){v("removeStream","removeTrack"),this.getSenders().forEach(t=>{t.track&&e.getTracks().includes(t.track)&&this.removeTrack(t)})})}function te(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function ne(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const e=arguments[1],n=e&&"sendEncodings"in e;n&&e.sendEncodings.forEach(e=>{if("rid"in e&&!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const i=t.apply(this,arguments);if(n){const{sender:t}=i,n=t.getParameters();(!("encodings"in n)||1===n.encodings.length&&0===Object.keys(n.encodings[0]).length)&&(n.encodings=e.sendEncodings,t.sendEncodings=e.sendEncodings,this.setParametersPromises.push(t.setParameters(n).then(()=>{delete t.sendEncodings}).catch(()=>{delete t.sendEncodings})))}return i})}function ie(e){if("object"!=typeof e||!e.RTCRtpSender)return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}function re(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function oe(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}var se=Object.freeze({__proto__:null,shimOnTrack:J,shimPeerConnection:X,shimSenderGetStats:Q,shimReceiverGetStats:Z,shimRemoveStream:ee,shimRTCDataChannel:te,shimAddTransceiver:ne,shimGetParameters:ie,shimCreateOffer:re,shimCreateAnswer:oe,shimGetUserMedia:Y,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){const e=new DOMException("getDisplayMedia without video constraints is undefined");return e.name="NotFoundError",e.code=8,Promise.reject(e)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}});function ae(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach(n=>t.call(this,n,e)),e.getVideoTracks().forEach(n=>t.call(this,n,e))},e.RTCPeerConnection.prototype.addTrack=function(e,...n){return n&&n.forEach(e=>{this._localStreams?this._localStreams.includes(e)||this._localStreams.push(e):this._localStreams=[e]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(-1===t)return;this._localStreams.splice(t,1);const n=e.getTracks();this.getSenders().forEach(e=>{n.includes(e.track)&&this.removeTrack(e)})})}}function ce(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=e=>{e.streams.forEach(e=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(e))return;this._remoteStreams.push(e);const t=new Event("addstream");t.stream=e,this.dispatchEvent(t)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach(t=>{if(e._remoteStreams||(e._remoteStreams=[]),e._remoteStreams.indexOf(t)>=0)return;e._remoteStreams.push(t);const n=new Event("addstream");n.stream=t,e.dispatchEvent(n)})}),t.apply(e,arguments)}}}function le(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,i=t.createAnswer,r=t.setLocalDescription,o=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(e,t){const i=arguments.length>=2?arguments[2]:arguments[0],r=n.apply(this,[i]);return t?(r.then(e,t),Promise.resolve()):r},t.createAnswer=function(e,t){const n=arguments.length>=2?arguments[2]:arguments[0],r=i.apply(this,[n]);return t?(r.then(e,t),Promise.resolve()):r};let a=function(e,t,n){const i=r.apply(this,[e]);return n?(i.then(t,n),Promise.resolve()):i};t.setLocalDescription=a,a=function(e,t,n){const i=o.apply(this,[e]);return n?(i.then(t,n),Promise.resolve()):i},t.setRemoteDescription=a,a=function(e,t,n){const i=s.apply(this,[e]);return n?(i.then(t,n),Promise.resolve()):i},t.addIceCandidate=a}function ue(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,n=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=e=>n(de(e))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,i){t.mediaDevices.getUserMedia(e).then(n,i)}.bind(t))}function de(e){return e&&void 0!==e.video?Object.assign({},e,{video:C(e.video)}):e}function he(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){const t=[];for(let n=0;n<e.iceServers.length;n++){let i=e.iceServers[n];!i.hasOwnProperty("urls")&&i.hasOwnProperty("url")?(v("RTCIceServer.url","RTCIceServer.urls"),i=JSON.parse(JSON.stringify(i)),i.urls=i.url,delete i.url,t.push(i)):t.push(e.iceServers[n])}e.iceServers=t}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function pe(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function fe(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find(e=>"audio"===e.receiver.track.kind);!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const n=this.getTransceivers().find(e=>"video"===e.receiver.track.kind);!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveVideo||n||this.addTransceiver("video")}return t.apply(this,arguments)}}function ge(e){"object"!=typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var me=Object.freeze({__proto__:null,shimLocalStreamsAPI:ae,shimRemoteStreamsAPI:ce,shimCallbacksAPI:le,shimGetUserMedia:ue,shimConstraints:de,shimRTCIceServerUrls:he,shimTrackEventTransceiver:pe,shimCreateOfferLegacy:fe,shimAudioContext:ge});function _e(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){const n=new t(e),i=U.parseCandidate(e.candidate),r=Object.assign(n,i);return r.toJSON=function(){return{candidate:r.candidate,sdpMid:r.sdpMid,sdpMLineIndex:r.sdpMLineIndex,usernameFragment:r.usernameFragment}},r}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,f(e,"icecandidate",t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t))}function ve(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const n=function(e){if(!e||!e.sdp)return!1;const t=U.splitSections(e.sdp);return t.shift(),t.some(e=>{const t=U.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")})},i=function(e){const t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;const n=parseInt(t[1],10);return n!=n?-1:n},r=function(e){let n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n},o=function(e,n){let i=65536;"firefox"===t.browser&&57===t.version&&(i=65535);const r=U.matchPrefix(e.sdp,"a=max-message-size:");return r.length>0?i=parseInt(r[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(i=2147483637),i},s=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){const{sdpSemantics:e}=this.getConfiguration();"plan-b"===e&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const e=i(arguments[0]),t=r(e),n=o(arguments[0],e);let s;s=0===t&&0===n?Number.POSITIVE_INFINITY:0===t||0===n?Math.max(t,n):Math.min(t,n);const a={};Object.defineProperty(a,"maxMessageSize",{get:()=>s}),this._sctp=a}return s.apply(this,arguments)}}function ye(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function t(e,t){const n=e.send;e.send=function(){const i=arguments[0],r=i.length||i.size||i.byteLength;if("open"===e.readyState&&t.sctp&&r>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const e=n.apply(this,arguments);return t(e,this),e},f(e,"datachannel",e=>(t(e.channel,e.target),e))}function Ce(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(e=>{const n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;const n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}})}function Ee(e,t){if(!e.RTCPeerConnection)return;if("chrome"===t.browser&&t.version>=71)return;if("safari"===t.browser&&t.version>=605)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){const n=t.sdp.split("\n").filter(e=>"a=extmap-allow-mixed"!==e.trim()).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:n}):t.sdp=n}return n.apply(this,arguments)}}function be(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}var Te=Object.freeze({__proto__:null,shimRTCIceCandidate:_e,shimMaxMessageSize:ve,shimSendThrowTypeError:ye,shimConnectionState:Ce,removeExtmapAllowMixed:Ee,shimAddIceCandidateNullOrEmpty:be});const Se=function({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0}){const n=_,i=function(e){const t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.mozGetUserMedia)t.browser="firefox",t.version=p(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=p(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(n.mediaDevices&&n.userAgent.match(/Edge\/(\d+).(\d+)$/))t.browser="edge",t.version=p(n.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=p(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}(e),r={browserDetails:i,commonShim:Te,extractVersion:p,disableLog:g,disableWarnings:m};switch(i.browser){case"chrome":if(!L||!P||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),r;if(null===i.version)return n("Chrome shim can not determine version, not shimming."),r;n("adapter.js shimming chrome."),r.browserShim=L,be(e,i),S(e,i),R(e),P(e,i),I(e),x(e,i),w(e),O(e),k(e),A(e,i),_e(e),Ce(e),ve(e,i),ye(e),Ee(e,i);break;case"firefox":if(!se||!X||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),r;n("adapter.js shimming firefox."),r.browserShim=se,be(e,i),Y(e,i),X(e,i),J(e),ee(e),Q(e),Z(e),te(e),ne(e),ie(e),re(e),oe(e),_e(e),Ce(e),ve(e,i),ye(e);break;case"edge":if(!z||!q||!t.shimEdge)return n("MS edge shim is not included in this adapter release."),r;n("adapter.js shimming edge."),r.browserShim=z,K(e),W(e),q(e,i),G(e),ve(e,i),ye(e);break;case"safari":if(!me||!t.shimSafari)return n("Safari shim is not included in this adapter release."),r;n("adapter.js shimming safari."),r.browserShim=me,be(e,i),he(e),fe(e),le(e),ae(e),ce(e),pe(e),ue(e),ge(e),_e(e),ve(e,i),ye(e),Ee(e,i);break;default:n("Unsupported browser!")}return r}({window:"undefined"==typeof window?void 0:window});var Re,Ie,we;!function(e){e.FPS_10="FPS_10",e.FPS_15="FPS_15",e.FPS_24="FPS_24",e.FPS_30="FPS_30"}(Re||(Re={})),function(e){e.W176_H132="W176_H132",e.W176_H144="W176_H144",e.W256_H144="W256_H144",e.W320_H180="W320_H180",e.W240_H240="W240_H240",e.W320_H240="W320_H240",e.W480_H360="W480_H360",e.W640_H360="W640_H360",e.W480_H480="W480_H480",e.W640_H480="W640_H480",e.W720_H480="W720_H480",e.W1280_H720="W1280_H720",e.W1920_H1080="W1920_H1080"}(Ie||(Ie={})),function(e){e[e.AUDIO_ONLY=0]="AUDIO_ONLY",e[e.VIDEO_ONLY=1]="VIDEO_ONLY",e[e.AUDIO_VIDEO=2]="AUDIO_VIDEO"}(we||(we={}));const Oe={[Ie.W176_H132]:{width:176,height:132,maxBitrate:150,minBitrate:80},[Ie.W176_H144]:{width:176,height:144,maxBitrate:160,minBitrate:80},[Ie.W256_H144]:{width:256,height:144,maxBitrate:240,minBitrate:120},[Ie.W320_H180]:{width:320,height:180,maxBitrate:280,minBitrate:120},[Ie.W240_H240]:{width:240,height:240,maxBitrate:280,minBitrate:120},[Ie.W320_H240]:{width:320,height:240,maxBitrate:400,minBitrate:120},[Ie.W480_H360]:{width:480,height:360,maxBitrate:650,minBitrate:150},[Ie.W640_H360]:{width:640,height:360,maxBitrate:800,minBitrate:180},[Ie.W480_H480]:{width:480,height:480,maxBitrate:800,minBitrate:180},[Ie.W640_H480]:{width:640,height:480,maxBitrate:900,minBitrate:200},[Ie.W720_H480]:{width:720,height:480,maxBitrate:1e3,minBitrate:200},[Ie.W1280_H720]:{width:1280,height:720,maxBitrate:2200,minBitrate:250},[Ie.W1920_H1080]:{width:1920,height:1080,maxBitrate:4e3,minBitrate:400}},ke=(e,t)=>{const n=e*t;let i=Number.MAX_VALUE,r=null;for(const o in Oe){const e=Oe[o],t=Math.abs(e.width*e.height-n);t<i&&(r=e,i=t)}return r},Me={10:1,15:1,24:1.5,30:1.5},xe=e=>{let t=Number.MAX_VALUE,n=1;for(const i in Me){const r=Math.abs(e-parseInt(i));r<t&&(t=r,n=Me[i])}return n},Pe={getCameras:()=>r(void 0,void 0,void 0,(function*(){return(yield navigator.mediaDevices.enumerateDevices()).filter(e=>"videoinput"===e.kind)})),getMicrophones:()=>r(void 0,void 0,void 0,(function*(){return(yield navigator.mediaDevices.enumerateDevices()).filter(e=>"audioinput"===e.kind)})),getSpeakers:()=>r(void 0,void 0,void 0,(function*(){return(yield navigator.mediaDevices.enumerateDevices()).filter(e=>"audiooutput"===e.kind)}))};class Ae extends i["EventEmitter"]{constructor(e,t,n,i,r){super(),this._tag=e,this._userId=t,this._kind=n,this._isLocalTrack=i,this._roomId=r,this._localMuted=!1,this._remoteMuted=!1,this._streamId=[this._userId||this._roomId,this._tag].join("_"),this._id=[this._streamId,this.isAudioTrack()?0:1].join("_")}getStreamId(){return this._streamId}getTrackId(){return this._id}getUserId(){return this._userId}__innerGetMediaStreamTrack(){return this._msTrack}getTag(){return this._tag}isLocalTrack(){return this._isLocalTrack}isVideoTrack(){return"video"===this._kind}isAudioTrack(){return"audio"===this._kind}isReady(){var e;return"live"===(null===(e=this._msTrack)||void 0===e?void 0:e.readyState)}__innerSetMediaStreamTrack(e){this._msTrack=e,this._setLocalMuted(this._localMuted);const t=this._msStream=this._msStream||new MediaStream,n=t.getTracks()[0];n&&t.removeTrack(n),e?t.addTrack(e):this._element&&(this._element.pause(),this._element.srcObject=null)}_setLocalMuted(e){this._msTrack&&(this._msTrack.enabled=!e),this._localMuted=e}mute(){o.info(`set ${this._id} enabled: false`),this._setLocalMuted(!0)}unmute(){o.info(`set ${this._id} enabled: true`),this._setLocalMuted(!1)}isLocalMuted(){return this._localMuted}isMCUTrack(){return Boolean(this._roomId)}isOwnerMuted(){return this._remoteMuted}play(e,t){return r(this,void 0,void 0,(function*(){if(!this._msTrack)return o.warn("the track is not ready to play -> id: "+this._id),{code:s.TRACK_NOT_READY};if("ended"===this._msTrack.readyState&&o.warn("the track's readyState is 'ended' -> id: "+this._id),null==t?void 0:t.volume){if(!Object(i["isNumber"])(null==t?void 0:t.volume))return o.error((null==t?void 0:t.volume)+" is not a number, the valid range of options.volume is 0-100"),{code:s.PARAMS_ERROR};(null==t?void 0:t.volume)<0&&(t.volume=0,o.warn("the valid range of options.volume is 0-100, the value of volume has been set 0")),(null==t?void 0:t.volume)>100&&(t.volume=100,o.warn("the valid range of options.volume is 0-100, the value of volume has been set 100"))}if((null==t?void 0:t.audioDeviceId)&&!(yield Pe.getSpeakers()).map(e=>e.deviceId).includes(t.audioDeviceId))return o.error("the options.audioDeviceId is invalid --\x3e "+t.audioDeviceId),{code:s.PARAMS_ERROR};const n=this.isVideoTrack();if(n&&(!e||!(e instanceof HTMLVideoElement)))return o.error("the video track need an <video> to play -> id: "+this._id),{code:s.VIDEO_TRACK_MISS_MEDIA_ELEMENT};this._element=n?e:this._element||new Audio,this._localMuted&&this._setLocalMuted(!1),this._element.srcObject&&this._element.srcObject===this._msStream||this._element.pause(),this._element.onloadstart=e=>{var t;o.debug(`HTMLMediaElement onloadstart -> id: ${null===(t=e.target)||void 0===t?void 0:t.id}, trackId: ${this._id}`)},this._element.ondurationchange=e=>{var t;o.debug(`HTMLMediaElement ondurationchange -> id: ${null===(t=e.target)||void 0===t?void 0:t.id}, trackId: ${this._id}`)},this._element.onloadedmetadata=e=>{var t;o.debug(`HTMLMediaElement onloadedmetadata -> id: ${null===(t=e.target)||void 0===t?void 0:t.id}, trackId: ${this._id}`)},this._element.onloadeddata=e=>{var t;o.debug(`HTMLMediaElement onloadeddata -> id: ${null===(t=e.target)||void 0===t?void 0:t.id}, trackId: ${this._id}`)},this._element.onabort=e=>{var t;o.info(`HTMLMediaElement onabort -> id: ${null===(t=e.target)||void 0===t?void 0:t.id}, trackId: ${this._id}`)},this._element.oncanplay=e=>{var t;o.info(`HTMLMediaElement oncanplay -> id: ${null===(t=e.target)||void 0===t?void 0:t.id}, trackId: ${this._id}`)},this._element.onvolumechange=e=>{var t;const n=Math.floor(100*(null===(t=e.target)||void 0===t?void 0:t.volume));o.info(`HTMLMediaElement onvolumechange -> volume: ${n}, trackId: ${this._id}`)},this._element.srcObject=this._msStream,this._element.autoplay=!0,n&&(this._element.playsInline=!0,this._element.x5PlaysInline=!0,this._element.webkitPlaysInline=!0),n||!(null==t?void 0:t.volume)&&0!==(null==t?void 0:t.volume)||(this._element.volume=(null==t?void 0:t.volume)/100);try{(null==t?void 0:t.audioDeviceId)&&!n?yield this._element.setSinkId(t.audioDeviceId):this._element.play()}catch(e){return"No permission to use requested device"===e.message?(o.error("setSinkId failed -> "+e.message),{code:s.NO_PERMISSION_TO_USE_REQUESTED_DEVICE}):(o.error(e),{code:s.TRACK_PLAY_ERROR})}return{code:s.SUCCESS}}))}__innerDestroy(){this.__innerSetMediaStreamTrack(void 0)}__releaseMediaElement(){this._element&&(this._element.remove(),this._element.srcObject=null)}}class De extends Ae{constructor(e,t,n,i){super(e,t,n,!0),this._isPublished=!1,this.__innerSetMediaStreamTrack(i),i.onended=()=>{i.onended=null,this.emit(De.EVENT_LOCAL_TRACK_END,this),this.removeAll(De.EVENT_LOCAL_TRACK_END)}}_setLocalMuted(e){const t=this._localMuted!==e;super._setLocalMuted(e),this._remoteMuted=this._localMuted,t&&this.emit(De.__INNER_EVENT_MUTED_CHANGE__,this)}__innerSetPublished(e){this._isPublished=e}isPublished(){return this._isPublished}destroy(){var e;o.info("track is destroyed -> trackId: "+this.getTrackId()),null===(e=this._msTrack)||void 0===e||e.stop(),super.__innerDestroy(),this.isAudioTrack()&&super.__releaseMediaElement(),this.emit(De.__INNER_EVENT_DESTROY__,this)}setBitrate(e=0,t=0,n=0){!Object(i["isNumber"])(e)||!Object(i["isNumber"])(t)||!Object(i["isNumber"])(n)||e<=0||t<=0||e<t?o.error("setBitrate params error ->"):this._bitrateInfo={max:e,min:t,start:n}}getBitrate(){var e,t;const{min:n,max:i}=this._msTrack?Qe(this._msTrack):{min:0,max:0};return{min:(null===(e=this._bitrateInfo)||void 0===e?void 0:e.min)||n,max:(null===(t=this._bitrateInfo)||void 0===t?void 0:t.max)||i}}}De.EVENT_LOCAL_TRACK_END="local-track-end",De.__INNER_EVENT_MUTED_CHANGE__="inner-muted-change",De.__INNER_EVENT_DESTROY__="inner-destroy";class Ne extends De{constructor(e,t,n){super(e,t,"audio",n)}setBitrate(e,t,n){o.warn("`setBitrate` invalid for audio track")}getBitrate(){return{start:32,max:32,min:32}}}class Le extends De{constructor(e,t,n,i=!1){super(e,t,"video",n),this._isTiny=i}__isTiny(){return this._isTiny}getStreamId(){const e=super.getStreamId();return this._isTiny?e+"_tiny":e}getTrackId(){const e=super.getTrackId();return this._isTiny?e+"_tiny":e}}class Ue extends De{constructor(e,t,n,i,r){super(e,t,n,i),this._resource=r,Ue.__innerSetMapping(this.getTrackId(),r)}static __innerSetMapping(e,t){const n=this._mapping.get(t)||[];n.push(e),this._mapping.set(t,n)}static __innerRemoveMapping(e,t){var n,i;const r=null===(n=this._mapping.get(t))||void 0===n?void 0:n.filter(t=>t!==e);r&&r.length>0?this._mapping.set(t,r):(this._mapping.delete(t),t.pause(),t.src="",null===(i=t.parentNode)||void 0===i||i.removeChild(t))}destroy(){this.isAudioTrack()&&this.mute(),Ue.__innerRemoveMapping(this.getTrackId(),this._resource),super.destroy()}}Ue._mapping=new Map;class Be extends Ue{constructor(e,t,n,i){super(e,t,"video",n,i)}}class Ve extends Ue{constructor(e,t,n,i){super(e,t,"audio",n,i)}_setLocalMuted(e){this._resource&&(this._resource.muted=e),super._setLocalMuted(e)}play(){return this._setLocalMuted(!1),Promise.resolve({code:s.SUCCESS})}}class je extends Ne{}class Fe extends Le{}class $e extends Le{}class He extends Ae{constructor(e,t,n,i){super(e,t,n,!1,i),this._isSubscribed=!1}__innerSetRemoteMuted(e){this._remoteMuted=e}__innerSetSubscribed(e){this._isSubscribed=e}isSubscribed(){return this._isSubscribed}}class Ke extends He{constructor(e,t,n){super(e,t,"audio",n)}}class We extends He{constructor(e,t,n){super(e,t,"video",n)}}const qe=(e,t)=>({name:e,content:JSON.stringify({uris:t,ignore:!0})}),Ge=e=>JSON.stringify(e),ze=e=>/^[a-zA-Z\d-=]+$/g.test(e),Ye="http:"!==location.protocol||["localhost","127.0.0.1"].includes(location.hostname),Je=e=>{if(void 0===e)return 0;if(Object(i["isNumber"])(e))return e;const t=e;return t.exact||t.ideal||t.max||0},Xe=e=>{const t=e.getConstraints();return{width:Je(t.width),height:Je(t.height),frameRate:Je(t.frameRate)}},Qe=e=>{const{width:t,height:n,frameRate:i}=Xe(e),r=ke(t,n),o=xe(i);return{min:r.minBitrate*o,max:r.maxBitrate*o}},Ze=e=>[e.msid,e.mediaType].join("_"),et=e=>{const t=e.split("_");return{mediaType:parseInt(t.pop()),tag:t.pop(),userId:t.join("_")}},tt=(e,t)=>[e,t].join("_"),nt=e=>e.map(e=>Object.assign({},e)),it=(e,t,n=!1)=>{e=e.slice();const i=[],r=[],o=[];return t.forEach(t=>{const r=Ze(t);let s=e.findIndex(e=>Ze(e)===r);if(n&&(s=e.findIndex(e=>e.uri===t.uri)),-1===s)return void i.push(t);const a=e[s];a.uri!==t.uri?i.push(t):a.state!==t.state&&o.push(t),e.splice(s,1)}),r.push(...e),{publishedList:i,unpublishedList:r,modifiedList:o}},rt=()=>{let e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}));return e=e.replace(/-/g,"")+"0",e=parseInt(e,16),e=(e=>{const t="0123456789abcdefghigklmnopqrstuvwxyzABCDEFGHIGKLMNOPQRSTUVWXYZ+/".split(""),n=t.length+1;let i=+e;const r=[];do{const e=i%n;i=(i-e)/n,r.unshift(t[e])}while(i);return r.join("")})(e),e.length>22&&(e=e.slice(0,22)),e},ot=e=>{const[t,n]=e.split("_").map(e=>parseInt(e.replace(/[^\d]/g,"")));return{width:t,height:n}},st=e=>!!Ie[e],at=e=>!!Re[e],ct=e=>parseInt(e.replace("FPS_","")),lt=(()=>{const{browser:e,version:t,supportsUnifiedPlan:n}=Se.browserDetails;return{browser:e,version:t,supportsUnifiedPlan:!1!==n}})();function ut(){return"captureStream"in HTMLMediaElement.prototype||"mozCaptureStream"in HTMLMediaElement.prototype}function dt(){return"mediaDevices"in navigator&&"getDisplayMedia"in navigator.mediaDevices}const ht=e=>"[object Null]"===Object.prototype.toString.call(e),pt=e=>1===e.type,ft=(e,t)=>{const n={},i=Object.keys(e.users);return i.length&&i.forEach(i=>{const r=[],s=e.users[i];if(s.extra){const e=JSON.parse(s.extra).roomId;if(t!==e)return}if(s.uris)try{r.push(...JSON.parse(s.uris))}catch(e){o.warn(`invalid user data -> userId: ${i}, userData: ${s}`)}n[i]=r}),n};var gt,mt,_t;!function(e){e.PUBLISH="RCRTC:PublishResource",e.UNPUBLISH="RCRTC:UnpublishResource",e.MODIFY="RCRTC:ModifyResource",e.TOTAL_CONTENT_RESOURCE="RCRTC:TotalContentResources",e.STATE="RCRTC:state",e.ROOM_NOTIFY="RCRTC:RoomNtf",e.USER_NOTIFY="RCRTC:UserNtf",e.KICK="RCRTC:kick",e.PK_INVITE="RCRTC:invite",e.PK_INVITE_TIMEOUT="RCRTC:inviteTimeout",e.PK_CANCEL_INVITE="RCRTC:cancelInvite",e.PK_INVITE_ANSWER="RCRTC:answerInvite",e.PK_END="RCRTC:endInvite",e.OTHER_ROOM_OFFLINE="RCRTC:otherRoomOffline"}(gt||(gt={})),function(e){e.SUCCESS="Success",e.FAIL="Fail"}(mt||(mt={}));class vt{constructor(e,t,n,i=1e4){this._roomId=e,this._roomMode=t,this._context=n,this._gap=i,this._latestTimestamp=Date.now(),this._timer=null}start(){return r(this,void 0,void 0,(function*(){this._timer||(this._timer=setInterval(this._loop.bind(this),this._gap))}))}_loop(){var e,t,n;return r(this,void 0,void 0,(function*(){const r=yield new Promise(e=>{this._context.rtcPing(this._roomId,this._roomMode).then(e).catch(t=>{o.error("rtcping receive unknown error -> "+t),e(i["ErrorCode"].UNKNOWN)}),setTimeout(e,1e4,i["ErrorCode"].TIMEOUT)}),s=Date.now();if(r===i["ErrorCode"].SUCCESS)return this._latestTimestamp=s,void(null===(e=this.onPingResult)||void 0===e||e.call(this,mt.SUCCESS));null===(t=this.onPingResult)||void 0===t||t.call(this,mt.FAIL),o.warn("rtcping failed -> code: "+r),(40003===r||s-this._latestTimestamp>6e4)&&(this.stop(),null===(n=this.onFailed)||void 0===n||n.call(this,40003===r))}))}stop(){this._timer&&(clearInterval(this._timer),this._timer=null)}}!function(e){e[e.NORMAL=1]="NORMAL",e[e.TINY=2]="TINY"}(_t||(_t={}));const yt=(e,t)=>Math.round(8*t/e),Ct=(e,t=2)=>{const n=10**t;return Math.round(e*n)/n},Et=(e,t=2)=>{e>1&&(e/=32767);const n=10**t;return Math.ceil(e*n)},bt=(e,t,n,i)=>{if(0===t)return 0;if(!n||!i)return Ct(e/t,3);const r=t-i;if(0===r)return 0;const o=e-n;return o<0||r<0?0:Ct(o/r,3)},Tt=e=>{const{jitter:t,rtt:n,packetsLostRate:i}=e;return!ht(t)||!ht(n)||0!==i};class St{constructor(e,t){this._rtcPeerConn=e,this._sdpSemantics=t,this._latestPacketsSent={},this._latestBytesSent={},this._latestBytesRecv={},this._latestPacketsRecv={}}updateBytesSent(e,t,n){let i,r;if(this._latestBytesSent[e]&&t<this._latestBytesSent[e].bytesSent&&this.clearLatestpacketsSent([e]),this._latestBytesSent[e]){const{bytesSent:o,timestamp:s}=this._latestBytesSent[e];i=t-o,r=n-s,this._latestBytesSent[e]={bytesSent:t,timestamp:n}}else i=t,r=1e3,this._latestBytesSent[e]={bytesSent:t,timestamp:n};return yt(r,i)}updateBytesRecv(e,t,n){let i,r;if(this._latestBytesRecv[e]&&t<this._latestBytesRecv[e].bytesRecv&&this.clearLatestPacketsRecv([e]),this._latestBytesRecv[e]){const{bytesRecv:o,timestamp:s}=this._latestBytesRecv[e];i=t-o,r=n-s,this._latestBytesRecv[e]={bytesRecv:t,timestamp:n}}else i=t,r=1e3,this._latestBytesRecv[e]={bytesRecv:t,timestamp:n};return yt(r,i)}updateSenderPacketsLost(e,t,n){let i;if(Object.prototype.hasOwnProperty.call(this._latestPacketsSent[e],"packetsSent")){const{packetsLost:r,packetsSent:o}=this._latestPacketsSent[e];i=bt(t,n,r,o),this._latestPacketsSent[e].packetsLost=t,this._latestPacketsSent[e].packetsSent=r===t?o:n}else i=bt(t,n),this._latestPacketsSent[e].packetsLost=t,this._latestPacketsSent[e].packetsSent=n;return i}updateReceiverPacketsLost(e,t,n){let i;if(this._latestPacketsRecv[e]){const{packetsLost:r,packetsRecv:o}=this._latestPacketsRecv[e];i=bt(t,n+t,r,o+r)}else i=bt(t,n);return this._latestPacketsRecv[e]={packetsLost:t,packetsRecv:n},i}clearLatestpacketsSent(e){e.forEach(e=>{if(parseInt(e.split("_").pop())===we.VIDEO_ONLY){const t=e+"_tiny";delete this._latestPacketsSent[t],delete this._latestBytesSent[t]}delete this._latestPacketsSent[e],delete this._latestBytesSent[e]})}clearLatestPacketsRecv(e){e.forEach(e=>{delete this._latestPacketsRecv[e],delete this._latestBytesRecv[e]})}parseRTCStatsReport(e){const t=e.keys(),n={};let i=t.next();for(;!i.done;){const r=i.value,o=e.get(r);/^RTCCodec_/.test(r)||(n[r]=o),i=t.next()}return n}formatRCRTCStateReport(e){return{senders:[],receivers:[]}}getAudioLevelList(e){return[]}getResourceIdByParseSdp(e){var t,n;const i=e.ssrc,r=e.kind||e.mediaType,o=null===(t=this._rtcPeerConn.currentLocalDescription)||void 0===t?void 0:t.sdp,s=null===(n=this._rtcPeerConn.currentRemoteDescription)||void 0===n?void 0:n.sdp;let a;a="unified-plan"===this._sdpSemantics?new RegExp("a=msid:(.*?) "):new RegExp(`a=ssrc:${i} msid:(.*?) `);const c=null==o?void 0:o.split("\r\nm="),l=null==c?void 0:c.filter(e=>e.includes("a=ssrc:"+i))[0],u=null==l?void 0:l.match(a);let d=u?u[1]:"";if(d)return`${d}_${"video"===r?1:0}`;const h=null==s?void 0:s.split("\r\nm="),p=null==h?void 0:h.filter(e=>e.includes("a=ssrc:"+i))[0],f=null==p?void 0:p.match(a);return d=f?f[1]:"",`${d}_${"video"===r?1:0}`}isValidSender(e){var t;const n=null===(t=this._rtcPeerConn.currentLocalDescription)||void 0===t?void 0:t.sdp,{ssrc:i}=e;return!(null==n?void 0:n.split("\r\nm=").some(e=>e.includes(i)&&e.includes("a=inactive")))}isValidReceiver(e){var t;const n=null===(t=this._rtcPeerConn.currentRemoteDescription)||void 0===t?void 0:t.sdp,{ssrc:i}=e;return!(null==n?void 0:n.split("\r\nm=").some(e=>e.includes(i)&&e.includes("a=inactive")))}}class Rt extends St{formatRCRTCStateReport(e){const t={senders:[],receivers:[]},n=Math.floor(e.RTCPeerConnection.timestamp);t.timestamp=n;const i=Object.keys(e);let r=0,o=0;i.filter(e=>/^RTCOutboundRTP(Video|Audio)Stream_/.test(e)).forEach(i=>{const s=e[i];if("unified-plan"===this._sdpSemantics&&!this.isValidSender(s))return;const{id:a,kind:c,transportId:l,mediaSourceId:u,remoteId:d,packetsSent:h,bytesSent:p,trackId:f,encoderImplementation:g,pliCount:m,nackCount:_,firCount:v}=s;if(!f)return;let{framesPerSecond:y,frameWidth:C,frameHeight:E}=s;"video"!==c||C||E||y||(C=e[f].frameWidth,E=e[f].frameHeight,y=u?e[u].framesPerSecond:null);const b=e[d];let T=null,S=null,R=0;b&&(T=b.jitter,S=b.roundTripTime,R=b.packetsLost),r+=R;const I=this.getResourceIdByParseSdp(s),w=u?e[u].audioLevel:e[f].audioLevel;let O=null;!this._latestPacketsSent[I]&&(this._latestPacketsSent[I]={}),b?O=this.updateSenderPacketsLost(I,R,h):this._latestPacketsSent[I].crtPacketsSent=h;let k=this.updateBytesSent(I,p,n);k<0&&(k=0),o+=k,t.senders.push({id:a,trackId:I,kind:c,packetsLostRate:O,remoteResource:!1,audioLevel:w||0===w?Et(w):null,frameWidth:C,frameHeight:E,frameRate:y,bitrate:k,jitter:T?Math.round(1e3*T):T,rtt:S,encoderImplementation:g,pliCount:m,nackCount:_,googFirsSent:-1,samplingRate:-1,googRenderDelayMs:-1,trackState:-1})}),i.filter(e=>/RTCRemoteInboundRtp(Video|Audio)Stream_/.test(e)).forEach(n=>{const{localId:i,jitter:r,roundTripTime:o,packetsLost:s}=e[n],a=t.senders.filter(e=>e.id===i)[0];if(a&&!Tt(a)){const t=this.getResourceIdByParseSdp(e[a.id]);a.jitter=Math.round(1e3*r),a.rtt=o;const n=this._latestPacketsSent[t].crtPacketsSent;a.packetsLostRate=this.updateSenderPacketsLost(t,s,n)}});let s=0;i.filter(e=>/^RTCInboundRTP(Video|Audio)Stream_/.test(e)).forEach(i=>{const o=e[i];if("unified-plan"===this._sdpSemantics&&!this.isValidReceiver(o))return;const{trackId:a,packetsLost:c,packetsReceived:l,jitter:u,bytesReceived:d,framesPerSecond:h,kind:p,codecImplementationName:f,nackCount:g,pliCount:m}=o;if(!a)return;let{frameWidth:_,frameHeight:v,audioLevel:y}=o;"video"===p?_||v||(_=e[a].frameWidth,v=e[a].frameHeight):y||(y=e[a].audioLevel),r+=c;const C=this.getResourceIdByParseSdp(o),E=this.updateReceiverPacketsLost(C,c,l);let b=this.updateBytesRecv(C,d,n);b<0&&(b=0),s+=b,t.receivers.push({trackId:C,kind:p,packetsLostRate:E,remoteResource:!0,audioLevel:y||0===y?Et(y):null,frameWidth:_,frameHeight:v,frameRate:h,bitrate:b,jitter:u?Math.round(1e3*u):0,codecImplementationName:f,nackCount:g,pliCount:m,rtt:null,samplingRate:-1,googFirsReceived:-1,googRenderDelayMs:-1,trackState:-1})});const a=i.filter(e=>/^RTCTransport_/.test(e))[0];if(a){const n=e[a],{selectedCandidatePairId:i}=n;if(i){const n=e[i],{availableOutgoingBitrate:a,availableIncomingBitrate:c,currentRoundTripTime:l,localCandidateId:u,remoteCandidateId:d}=n,h=e[u],{ip:p,port:f,networkType:g}=h,m=e[d],{ip:_,port:v,protocol:y}=m;t.iceCandidatePair={IP:p,port:f,networkType:g,remoteIP:_,remotePort:v,protocol:y,bitrateRecv:s,bitrateSend:o,rtt:1e3*l,availableOutgoingBitrate:a,availableIncomingBitrate:c,totalPacketsLost:r},t.receivers.forEach(e=>{e.rtt=l})}}return t}getAudioLevelList(e){const t=[],n=Object.keys(e);return n.filter(e=>/^RTCOutboundRTPAudioStream_/.test(e)).forEach(n=>{var i;const r=e[n];if("unified-plan"===this._sdpSemantics&&!this.isValidSender(r))return;const{mediaSourceId:o,trackId:s}=r,a=this.getResourceIdByParseSdp(r),c=o&&e[o]?e[o].audioLevel:(null===(i=e[s])||void 0===i?void 0:i.audioLevel)||null;t.push({trackId:a,audioLevel:c||0===c?Et(c):null})}),n.filter(e=>/^RTCInboundRTPAudioStream_/.test(e)).forEach(n=>{const i=e[n];if("unified-plan"===this._sdpSemantics&&!this.isValidReceiver(i))return;const{trackId:r}=i,o=i.audioLevel||e[r].audioLevel,s=this.getResourceIdByParseSdp(i);t.push({trackId:s,audioLevel:o||0===o?Et(o):null})}),t}}class It extends St{formatRCRTCStateReport(e){const t=+new Date,n={senders:[],receivers:[],timestamp:t};let i=0,r=0,o=0;for(const s in e){const a=e[s],c=a.type;if("outbound-rtp"===c){if("unified-plan"===this._sdpSemantics&&!this.isValidSender(a))continue;const{id:o,kind:s,bytesSent:c,packetsSent:l,bitrateMean:u,framerateMean:d,nackCount:h,pliCount:p,remoteId:f}=a,{jitter:g,roundTripTime:m,packetsLost:_}=f?e[f]:{jitter:null,roundTripTime:null,packetsLost:0},v=this.getResourceIdByParseSdp(a);i+=_;let y=null;!this._latestPacketsSent[v]&&(this._latestPacketsSent[v]={}),f?y=this.updateSenderPacketsLost(v,_,l):this._latestPacketsSent[v].crtPacketsSent=l;let C=0;"video"===s?u&&(C=Math.floor(u/1e3)):C=this.updateBytesSent(v,c,t),C<0&&(C=0),r+=C,n.senders.push({trackId:v,kind:s,packetsLostRate:y,remoteResource:!1,audioLevel:null,frameWidth:null,frameHeight:null,frameRate:Math.floor(d),bitrate:C,jitter:g?Math.round(1e3*g):null,rtt:m,encoderImplementation:null,pliCount:p,nackCount:h,googFirsSent:-1,samplingRate:-1,googRenderDelayMs:-1,trackState:-1})}if("remote-inbound-rtp"===c){const{localId:t}=a,i=this.getResourceIdByParseSdp(e[t]),r=n.senders.filter(e=>e.trackId===i)[0];r&&Tt(r)&&(r.jitter=Math.round(1e3*a.jitter),r.rtt=a.rtt,r.packetsLostRate=this.updateSenderPacketsLost(i,a.packetsLost,this._latestPacketsSent[i].crtPacketsSent))}if("inbound-rtp"===c){if("unified-plan"===this._sdpSemantics&&!this.isValidReceiver(a))continue;const{id:e,packetsLost:r,bytesReceived:s,packetsReceived:c,jitter:l,framerateMean:u,kind:d,bitrateMean:h,nackCount:p,pliCount:f}=a,g=this.getResourceIdByParseSdp(a);i+=r;const m=this.updateReceiverPacketsLost(g,r,c);let _=0;"video"===d?h&&(_=Math.floor(h/1e3)):_=this.updateBytesRecv(g,s,t),_<0&&(_=0),o+=_,n.receivers.push({trackId:g,kind:d,packetsLostRate:m,remoteResource:!0,audioLevel:null,frameWidth:null,frameHeight:null,frameRate:Math.floor(u),bitrate:_,jitter:l?Math.round(1e3*l):null,codecImplementationName:null,nackCount:p,pliCount:f,rtt:null,samplingRate:-1,googFirsReceived:-1,googRenderDelayMs:-1,trackState:-1})}if("candidate-pair"===c&&"succeeded"===a.state){const t=e[a.localCandidateId],{address:s,port:c}=t,l=e[a.remoteCandidateId],{address:u,port:d,protocol:h}=l;n.iceCandidatePair={IP:s,port:c,networkType:null,remoteIP:u,remotePort:d,protocol:h,bitrateRecv:o,bitrateSend:r,rtt:null,availableOutgoingBitrate:null,availableIncomingBitrate:null,totalPacketsLost:i}}}return n.iceCandidatePair&&(n.iceCandidatePair.bitrateSend=r),n.iceCandidatePair&&(n.iceCandidatePair.bitrateRecv=o),n}getAudioLevelList(e){const t=[];for(const n in e){const i=e[n],r=i.type;if("outbound-rtp"===r){if("unified-plan"===this._sdpSemantics&&!this.isValidSender(i))continue;const{kind:e}=i;if("video"===e)continue;const n=this.getResourceIdByParseSdp(i);t.push({trackId:n,audioLevel:null})}if("inbound-rtp"===r){if("unified-plan"===this._sdpSemantics&&!this.isValidReceiver(i))continue;const{kind:e}=i;if("video"===e)continue;const n=this.getResourceIdByParseSdp(i);t.push({trackId:n,audioLevel:null})}}return t}}class wt extends St{formatRCRTCStateReport(e){const t={senders:[],receivers:[]},n=Math.floor(e.RTCPeerConnection.timestamp);t.timestamp=n;const i=Object.keys(e);let r=0,o=0;i.filter(e=>/^RTCOutboundRTP(Video|Audio)Stream_/.test(e)).forEach(i=>{const r=e[i];if("unified-plan"===this._sdpSemantics&&!this.isValidSender(r))return;const s=this.getResourceIdByParseSdp(r),{mediaType:a,transportId:c,remoteId:l,packetsSent:u,bytesSent:d,trackId:h,encoderImplementation:p,pliCount:f,nackCount:g,firCount:m}=r;if(!h)return;const{audioLevel:_,frameHeight:v,frameWidth:y}=e[h];let C=this.updateBytesSent(s,d,n);C<0&&(C=0),o+=C,t.senders.push({trackId:s,kind:a,packetsLostRate:null,remoteResource:!1,audioLevel:_||0===_?Et(_):null,frameWidth:y,frameHeight:v,frameRate:null,bitrate:C,jitter:null,rtt:null,encoderImplementation:p,pliCount:f,nackCount:g,googFirsSent:-1,samplingRate:-1,googRenderDelayMs:-1,trackState:-1})});let s=0;i.filter(e=>/^RTCInboundRTP(Video|Audio)Stream_/.test(e)).forEach(i=>{const o=e[i];if("unified-plan"===this._sdpSemantics&&!this.isValidReceiver(o))return;const{trackId:a,packetsLost:c,packetsReceived:l,jitter:u,bytesReceived:d,mediaType:h,nackCount:p,pliCount:f}=o,g=this.getResourceIdByParseSdp(o);if(!a)return;const{frameHeight:m,frameWidth:_,audioLevel:v}=e[a];r+=c;const y=this.updateReceiverPacketsLost(g,c,l);let C=this.updateBytesRecv(g,d,n);C<0&&(C=0),s+=C,t.receivers.push({trackId:g,kind:h,packetsLostRate:y,remoteResource:!0,audioLevel:v||0===v?Et(v):null,frameWidth:_,frameHeight:m,frameRate:null,bitrate:C,jitter:u,codecImplementationName:null,nackCount:p,pliCount:f,rtt:null,samplingRate:-1,googFirsReceived:-1,googRenderDelayMs:-1,trackState:-1})});const a=i.filter(e=>/^RTCTransport_/.test(e))[0];if(a){const n=e[a],{selectedCandidatePairId:i}=n;if(i){const n=e[i],{availableOutgoingBitrate:a,availableIncomingBitrate:c,currentRoundTripTime:l,localCandidateId:u,remoteCandidateId:d}=n,h=e[u],{address:p,port:f}=h,g=e[d],{address:m,port:_,protocol:v}=g;t.iceCandidatePair={IP:p||null,port:f,networkType:null,remoteIP:m,remotePort:_,protocol:v,bitrateRecv:s,bitrateSend:o,rtt:1e3*l,availableOutgoingBitrate:a,availableIncomingBitrate:c,totalPacketsLost:r},t.receivers.forEach(e=>{e.rtt=l})}}return t}getAudioLevelList(e){const t=[],n=Object.keys(e);return n.filter(e=>/^RTCOutboundRTP(Video|Audio)Stream_/.test(e)).forEach(n=>{const i=e[n];if("unified-plan"===this._sdpSemantics&&!this.isValidSender(i))return;const{trackId:r,mediaType:o}=i;if("video"===o)return;const s=this.getResourceIdByParseSdp(i),a=e[r];t.push({trackId:s,audioLevel:a||0===a?Et(a):null})}),n.filter(e=>/^RTCInboundRTP(Video|Audio)Stream_/.test(e)).forEach(n=>{const i=e[n];if("unified-plan"===this._sdpSemantics&&!this.isValidReceiver(i))return;const{trackId:r,mediaType:o}=i;if(!r||"video"===o)return;const{audioLevel:s}=e[r],a=this.getResourceIdByParseSdp(i);t.push({trackId:a,audioLevel:s||0===s?Et(s):null})}),t}}class Ot{constructor(e){this._peer=e,this._outboundStreams={}}static setSdpSemantics(e){const{browser:t,version:n,supportsUnifiedPlan:i}=lt;i?/chrome/i.test(t)?this._sdpSemantics=n>92?"unified-plan":n<72?"plan-b":e:/firefox/i.test(t)?this._sdpSemantics="unified-plan":/safari/i.test(t)?this._sdpSemantics=n<12?"plan-b":"unified-plan":this._sdpSemantics="unified-plan":this._sdpSemantics="plan-b"}static getSdpSemantics(){return Ot._sdpSemantics}getOutboundVideoInfo(){const e=[];for(const t in this._outboundStreams){const n=this._outboundStreams[t].getVideoTracks()[0];if(!n)continue;const i=/_tiny$/.test(t),{width:r,height:o}=Xe(n);e.push({trackId:n.id,simulcast:i?_t.TINY:_t.NORMAL,resolution:`${r}x${o}`})}return e}setRemoteAnswer(e){return r(this,void 0,void 0,(function*(){e=e.replace(/\s+\r\n/g,"\r\n");try{yield this._peer.setRemoteDescription({type:"answer",sdp:e})}catch(e){return o.error(e),s.SET_REMOTE_DESCRIPTION_FAILED}return s.SUCCESS}))}getStatParsr(e,t){return/chrome/i.test(lt.browser)?new Rt(e,t):/Firefox/i.test(lt.browser)?new It(e,t):/Safari/i.test(lt.browser)?new wt(e,t):null}}class kt extends Ot{constructor(){super(...arguments),this.senders={},this._localTracks=[]}addLocalTrack(e){this._localTracks.includes(e)||this._localTracks.push(e);const t=e.getStreamId(),n=e.__innerGetMediaStreamTrack(),i=this._outboundStreams[t]||(this._outboundStreams[t]=new MediaStream);i.getTracks().forEach(e=>{e.kind===n.kind&&i.removeTrack(e)}),i.addTrack(n);const r=e.getTrackId(),o=this.senders[r];o?o.replaceTrack(n):this.senders[r]=this._peer.addTrack(n,i)}removeLocalTrack(e){const t=this._localTracks.findIndex(t=>t===e);t>=0&&this._localTracks.splice(t,1);const n=e.getTrackId(),i=this.senders[n];i&&(i.replaceTrack(null),this._peer.removeTrack(i),delete this.senders[n])}updateSubRemoteTracks(e){}updateRecvTransceiverMap(e,t){}setBitrate(e,t,n){this._maxBitrate=e,this._minBitrate=t,this._startBitrate=n||.7*e}createOffer(e){return r(this,void 0,void 0,(function*(){const t=yield this._peer.createOffer({iceRestart:e,offerToReceiveAudio:!0,offerToReceiveVideo:!0});for(const e in this._outboundStreams){const n=this._outboundStreams[e].id;t.sdp=t.sdp.replace(new RegExp(n,"g"),e)}return yield this._peer.setLocalDescription(t),{type:"offer",semantics:"plan-b",sdp:t.sdp}}))}setRemoteAnswer(e){let t=0,n=0;this._localTracks.forEach(e=>{const{min:i,max:r}=e.getBitrate();n+=i,t+=r}),t=this._maxBitrate&&this._maxBitrate>0?Math.min(t,this._maxBitrate):t,n=this._minBitrate&&this._minBitrate>0?Math.max(n,this._minBitrate):n;const i=this._startBitrate||Math.round(.7*t),r="b=AS:"+t;e=e.replace(/[\r\n]+m=video[^\r\n]+/,e=>`${e}\r\n${r}`);const o=[";x-google-min-bitrate="+n,";x-google-max-bitrate="+t,";x-google-start-bitrate="+i].join("");return e=e.replace(/[\r\n]+[^\r\n]+profile-level-id[^\r\n]+/g,e=>e+o),super.setRemoteAnswer(e)}}class Mt extends Ot{constructor(){super(...arguments),this._sendTransceiver={},this._localTracks={},this._recvAudio=[],this._recvVideo=[],this._recvTransceiver={},this._subedTracks=[]}setBitrate(e,t,n){o.warn("the interface named `setBitrate` is invalid while sdpSemantics value is `unified-plan`")}addLocalTrack(e){const t=e.getTrackId(),n=e.getStreamId(),i=e.__innerGetMediaStreamTrack();this._localTracks[t]=e;const r=this._outboundStreams[n]||(this._outboundStreams[n]=new MediaStream);r.getTracks().forEach(e=>{e.kind===i.kind&&r.removeTrack(e)}),r.addTrack(i);const o=this._sendTransceiver[t];o?(o.sender.replaceTrack(i),o.direction="sendonly"):this._sendTransceiver[t]=this._peer.addTransceiver(i,{direction:"sendonly",streams:[r]})}removeLocalTrack(e){const t=e.getTrackId(),n=e.getStreamId();e.__innerGetMediaStreamTrack(),delete this._localTracks[t];const i=this._sendTransceiver[t];if(!i)return;i.direction="inactive",this._peer.removeTrack(i.sender),i.sender.replaceTrack(null);const r=this._outboundStreams[n];(e.isAudioTrack()?r.getAudioTracks():r.getVideoTracks()).forEach(e=>r.removeTrack(e));const o=this._sendTransceiver[t+"_tiny"];if(!o||"inactive"===o.direction)return;o.direction="inactive";const s=o.sender,a=s.track;this._peer.removeTrack(s),s.replaceTrack(null),this._outboundStreams[n+"_tiny"].removeTrack(a),a.stop()}updateRecvTransceiverMap(e,t){const{mediaType:n}=et(e);this._recvTransceiver[e]=t;const i=n===we.AUDIO_ONLY?this._recvAudio:this._recvVideo,r=i.findIndex(e=>e===t);r>=0&&i.splice(r,1)}updateSubRemoteTracks(e){const t=e.slice(),n=this._subedTracks.slice();this._subedTracks=e.slice();for(let r=t.length-1;r>=0;r-=1){const e=t[r],i=n.findIndex(t=>t===e);i>=0&&(t.splice(r,1),n.splice(i,1))}n.length&&n.forEach(e=>{const t=e.getTrackId();e.__innerSetMediaStreamTrack(void 0);const n=this._recvTransceiver[t];n&&(n.direction="inactive")});const i={audio:0,video:0};t.length&&t.forEach(e=>{const t=e.isAudioTrack()?"audio":"video",n=this._recvTransceiver[e.getTrackId()];n?n.direction="recvonly":i[t]+=1});for(let r=this._recvAudio.length;r<i.audio;r+=1)this._recvAudio.push(this._peer.addTransceiver("audio",{direction:"recvonly"}));for(let r=this._recvVideo.length;r<i.video;r+=1)this._recvVideo.push(this._peer.addTransceiver("video",{direction:"recvonly"}))}createOffer(e){return r(this,void 0,void 0,(function*(){const t=yield this._peer.createOffer({iceRestart:e});let n=t.sdp;for(const e in this._outboundStreams){const t=this._outboundStreams[e].id;n=n.replace(new RegExp(t,"g"),e)}return n=(e=>e.split(/\r\n(?=m=)/).map(e=>(e=>/a=(recvonly|inactive)/.test(e)?e.replace(/\r\na=(ssrc|msid)[^\r\n]+/g,""):e)(e)).join("\r\n"))(n),n=n.replace(/a=ice-options:trickle/g,"a=ice-options:trickle\r\na=ice-options:renomination"),t.sdp=n,yield this._peer.setLocalDescription(t),{type:"offer",semantics:"unified-plan",sdp:n}}))}setRemoteAnswer(e){e=e.split(/\r\n(?=m=)/).map(e=>{var t;const n=e.match(/a=mid:[^\s]+/);if(!n)return e;const i=n[0].replace("a=mid:","");let r="";for(const d in this._sendTransceiver)if(this._sendTransceiver[d].mid===i){r=d;break}if(!r)return e;const o=null===(t=this._localTracks[r])||void 0===t?void 0:t.getBitrate();if(!o)return e;const{max:s,min:a}=o,c=s&&s>0?o.start||.7*s:0,l=[];if(s&&s>0&&l.push(";x-google-max-bitrate="+s),a&&a>0&&l.push(";x-google-min-bitrate="+a),c>0&&l.push(";x-google-start-bitrate="+c),0===l.length)return e;const u=l.join("");return e.replace(/[\r\n]+[^\r\n]+profile-level-id[^\r\n]+/g,e=>e+u)}).join("\r\n");const t=/[\r\n]+\r\n[\r\n]+/g;return t.test(e)&&(o.warn("answer sdp invalid -> "+JSON.stringify(e)),e=e.replace(t,"\r\n")),super.setRemoteAnswer(e)}}class xt extends i["EventEmitter"]{constructor(e,t){super(),this._reTryExchange=e,this._polarisReport=t,this.pubLocalTracks={},this._reTryExchangeTimer=null,this._reportStatsTimer=null,this._reportListener=null;const n=Ot.getSdpSemantics(),i=this._rtcPeerConn=new RTCPeerConnection({sdpSemantics:n});this._sdpStrategy="plan-b"===n?new kt(i):new Mt(i),this._rtcPeerConn.oniceconnectionstatechange=this._onICEConnectionStateChange.bind(this),this._rtcPeerConn.onconnectionstatechange=this._onConnectionStateChange.bind(this),this._rtcPeerConn.ontrack=this._onTrackReady.bind(this),this.reportParser=this._sdpStrategy.getStatParsr(this._rtcPeerConn,n)}getLocalTracks(){return Object.values(this.pubLocalTracks)}_onConnectionStateChange(){o.info("onconnectionstatechange -> "+this._rtcPeerConn.connectionState)}_onICEConnectionStateChange(){var e,t;o.info("oniceconnectionstatechange -> "+this._rtcPeerConn.iceConnectionState),"connected"===this._rtcPeerConn.iceConnectionState&&(this._reportStatsTimer&&clearInterval(this._reportStatsTimer),this._reportStatsTimer=setInterval(this._reportHandle.bind(this),1e3)),"failed"!==this._rtcPeerConn.iceConnectionState&&"disconnected"!==this._rtcPeerConn.iceConnectionState||(o.warn("iceconenction state is `failed`, exchange SDP to try again."),this._reTryExchange(),this._reTryExchangeTimer=setInterval(this._reTryExchange,15e3));try{null===(t=null===(e=this._reportListener)||void 0===e?void 0:e.onICEConnectionStateChange)||void 0===t||t.call(e,this._rtcPeerConn.iceConnectionState)}catch(e){o.error("onICEConnectionStateChange error",e)}}_onTrackReady(e){if(!e.streams.length)return;const t=[e.streams[0].id,"audio"===e.receiver.track.kind?we.AUDIO_ONLY:we.VIDEO_ONLY].join("_");this._updateRecvTransceiverMap(t,e.transceiver),this.emit(xt.__INNER_EVENT_TRACK_READY__,e)}setBitrate(e,t,n){return r(this,void 0,void 0,(function*(){this._sdpStrategy.setBitrate(e,t,n)}))}createOffer(e){return r(this,void 0,void 0,(function*(){const t=yield this._sdpStrategy.createOffer(e);return o.debug("offer -> "+JSON.stringify(t.sdp)),t}))}setRemoteAnswer(e){return r(this,void 0,void 0,(function*(){return o.debug("answer -> "+JSON.stringify(e)),this._sdpStrategy.setRemoteAnswer(e)}))}getLocalTrack(e){return this.pubLocalTracks[e]||null}addLocalTrack(e){this.pubLocalTracks[e.getTrackId()]=e,this._sdpStrategy.addLocalTrack(e),e.off(De.__INNER_EVENT_MUTED_CHANGE__,this._onLocalTrackMuted,this),e.off(De.__INNER_EVENT_DESTROY__,this._onLocalTrackDestroied,this),e.on(De.__INNER_EVENT_MUTED_CHANGE__,this._onLocalTrackMuted,this),e.on(De.__INNER_EVENT_DESTROY__,this._onLocalTrackDestroied,this)}removeLocalTrackById(e){const t=this.getLocalTrack(e);t&&this.removeLocalTrack(t)}removeAllLocalTrack(){Object.keys(this.pubLocalTracks).forEach(e=>{/_tiny$/.test(e)||this.removeLocalTrackById(e)})}removeLocalTrack(e){const t=e.getTrackId();delete this.pubLocalTracks[t],this._sdpStrategy.removeLocalTrack(e),e.__innerSetPublished(!1),e.off(De.__INNER_EVENT_MUTED_CHANGE__,this._onLocalTrackMuted,this),e.off(De.__INNER_EVENT_DESTROY__,this._onLocalTrackDestroied,this);const n=t+"_tiny",i=this.getLocalTrack(n);i&&(this._sdpStrategy.removeLocalTrack(i),delete this.pubLocalTracks[n],i.destroy())}_updateRecvTransceiverMap(e,t){this._sdpStrategy.updateRecvTransceiverMap(e,t)}updateSubRemoteTracks(e){this._sdpStrategy.updateSubRemoteTracks(e)}getOutboundVideoInfo(){return this._sdpStrategy.getOutboundVideoInfo()}_onLocalTrackMuted(e){const t=this.getLocalTrack(e.getTrackId()+"_tiny");t&&(t.__innerGetMediaStreamTrack().enabled=!e.isLocalMuted()),this.emit(De.__INNER_EVENT_MUTED_CHANGE__,e)}_onLocalTrackDestroied(e){this.emit(De.__INNER_EVENT_DESTROY__,e)}registerReportListener(e){this._reportListener=e}_createRCRTCStateReport(e){const{timestamp:t,iceCandidatePair:n,senders:i,receivers:r}=JSON.parse(JSON.stringify(e));null==n||delete n.totalPacketsLost;for(const o in n)ht(n[o])&&delete n[o];return{timestamp:t,iceCandidatePair:n,senders:i.map(e=>{const t={};return e.trackId&&(t.trackId=e.trackId),e.kind&&(t.kind=e.kind),(e.packetsLostRate||0===e.packetsLostRate)&&(t.packetsLostRate=e.packetsLostRate),t.remoteResource=e.remoteResource,(e.audioLevel||0===e.audioLevel)&&(t.audioLevel=e.audioLevel),e.frameWidth&&(t.frameWidth=e.frameWidth),e.frameHeight&&(t.frameHeight=e.frameHeight),e.frameRate&&(t.frameRate=e.frameRate),(e.bitrate||0===e.bitrate)&&(t.bitrate=e.bitrate),e.jitter&&(t.jitter=e.jitter),t}),receivers:r.map(e=>{const t={};return e.trackId&&(t.trackId=e.trackId),e.kind&&(t.kind=e.kind),(e.packetsLostRate||0===e.packetsLostRate)&&(t.packetsLostRate=e.packetsLostRate),t.remoteResource=e.remoteResource,(e.audioLevel||0===e.audioLevel)&&(t.audioLevel=e.audioLevel),e.frameWidth&&(t.frameWidth=e.frameWidth),e.frameHeight&&(t.frameHeight=e.frameHeight),e.frameRate&&(t.frameRate=e.frameRate),(e.bitrate||0===e.bitrate)&&(t.bitrate=e.bitrate),e.jitter&&(t.jitter=e.jitter),t})}}_getStatsData(){var e,t;return r(this,void 0,void 0,(function*(){const n=yield this._rtcPeerConn.getStats(),i=null===(e=this.reportParser)||void 0===e?void 0:e.parseRTCStatsReport(n);return null===(t=this.reportParser)||void 0===t?void 0:t.formatRCRTCStateReport(i)}))}getAudioLevelReportData(){var e,t;return r(this,void 0,void 0,(function*(){const n=yield this._rtcPeerConn.getStats(),i=null===(e=this.reportParser)||void 0===e?void 0:e.parseRTCStatsReport(n);return i?null===(t=this.reportParser)||void 0===t?void 0:t.getAudioLevelList(i):[]}))}_reportHandle(){var e,t,n;return r(this,void 0,void 0,(function*(){const i=yield this._getStatsData();if(!i)return;(i.senders.length||i.receivers.length)&&(null===(e=this._polarisReport)||void 0===e||e.sendR3R4Data(i));const r=this._createRCRTCStateReport(i);null===(n=null===(t=this._reportListener)||void 0===t?void 0:t.onStateReport)||void 0===n||n.call(t,r)}))}getRTCPeerConn(){return this._rtcPeerConn}destroy(){this.clear(),this.clearReTryExchangeTimer(),this._reportStatsTimer&&(clearInterval(this._reportStatsTimer),this._reportStatsTimer=null),this.registerReportListener(null),this._rtcPeerConn.close(),this.reportParser=null}clearReTryExchangeTimer(){clearInterval(this._reTryExchangeTimer),this._reTryExchangeTimer=null}}var Pt,At,Dt,Nt,Lt;xt.__INNER_EVENT_TRACK_READY__="inner-track-ready",function(e){e[e.DISABLE=0]="DISABLE",e[e.ENABLE=1]="ENABLE"}(Pt||(Pt={})),function(e){e[e.MeetingOrAnchor=1]="MeetingOrAnchor",e[e.Audience=2]="Audience"}(At||(At={}));class Ut{constructor(e,t,n,i,r=At.MeetingOrAnchor){this._context=e,this._runtime=t,this._roomId=n,this._crtRTCRoom=i,this._userRole=r}_send(e){this._context.getConnectionStatus()===i["ConnectionStatus"].CONNECTED&&this._context.setRTCState(this._roomId,e)}_getClientID(){const e="uuid";let t=this._runtime.localStorage.getItem(e);return t||(t=rt(),this._runtime.localStorage.setItem(e,t)),t}_getRealResourceId(e){let t=e;const n=e.indexOf("_tiny");return n>-1&&(t=e.slice(0,n)),t}_getPolarisTrackId(e){let t="";const n=e.split("_");if(e.includes("_tiny")){const e=n.pop(),i=parseInt(n.pop())===we.AUDIO_ONLY?"audio":"video",r=n.pop();t=[n.join("_"),r,e,i].join("_")}else{const e=parseInt(n.pop())===we.AUDIO_ONLY?"audio":"video",i=n.pop();t=[n.join("_"),i,e].join("_")}return t}sendR3R4Data(e){const{iceCandidatePair:t,senders:n,receivers:i}=e,r=(null==t?void 0:t.bitrateSend)||-1,o=(null==t?void 0:t.bitrateRecv)||-1,s=(null==t?void 0:t.networkType)||"unknown",a=(null==t?void 0:t.rtt)||-1,c=`${(null==t?void 0:t.IP)||-1}:${null==t?void 0:t.port}`,l=(null==t||t.remoteIP,null==t||t.remotePort,(null==t?void 0:t.availableIncomingBitrate)||-1),u=(null==t?void 0:t.availableOutgoingBitrate)||-1,d=(null==t?void 0:t.totalPacketsLost)||-1,h=this._context.getCurrentId();let p=`R3\t${r}\t-1\t-1\t-1\t${s}\t${a}\t${c}\t${l}\t${u}\t${d}\t${h}\r`,f=`R4\t${o}\t-1\t-1\t-1\t${s}\t${a}\t${c}\t${l}\t${u}\t${d}\t${h}\r`;const g=n.map(e=>{var t;const{trackId:n,audioLevel:i,samplingRate:r,bitrate:o,packetsLostRate:s,frameRate:a,frameWidth:c,frameHeight:l,googRenderDelayMs:u,jitter:d,nackCount:h,pliCount:p,rtt:f,googFirsSent:g,encoderImplementation:m}=e,_=this._getPolarisTrackId(n),v=this._getRealResourceId(n);return{trackId:_,googCodecName:m||String(-1),audioLevel:i||0===i?i:-1,bitrate:o||0===o?o:-1,packetsLostRate:s||0===s?s:-1,frameRate:a||-1,resolution:c&&l?`${c} * ${l}`:"-1",jitter:d||-1,nackCount:h||0===h?h:-1,pliCount:p||0===p?p:-1,rtt:f||-1,googFirsSent:g,samplingRate:r,googRenderDelayMs:u,encoderImplementation:m||String(-1),trackState:(null===(t=this._crtRTCRoom.getLocalTrack(v))||void 0===t?void 0:t.isLocalMuted())?Pt.DISABLE:Pt.ENABLE}}),m=i.filter(e=>!!e.trackId).map(e=>{var t;const{trackId:n,audioLevel:i,samplingRate:r,bitrate:o,packetsLostRate:s,frameRate:a,frameWidth:c,frameHeight:l,googRenderDelayMs:u,jitter:d,nackCount:h,pliCount:p,rtt:f,googFirsReceived:g,codecImplementationName:m}=e,_=this._getPolarisTrackId(n),v=this._getRealResourceId(n);return{trackId:_,googCodecName:m||String(-1),audioLevel:i||0===i?i:-1,bitrate:o||0===o?o:-1,packetsLostRate:s||0===s?s:-1,frameRate:a||-1,resolution:c&&l?`${c} * ${l}`:"-1",jitter:d||-1,nackCount:h||0===h?h:-1,pliCount:p||0===p?p:-1,rtt:f||-1,googFirsReceived:g,samplingRate:r,googRenderDelayMs:u,codecImplementationName:m||String(-1),trackState:(null===(t=this._crtRTCRoom.getRemoteTrack(v))||void 0===t?void 0:t.isLocalMuted())?Pt.DISABLE:Pt.ENABLE}});p+=g.map(e=>`${e.trackId}\t${e.googCodecName}\t${e.audioLevel}\t${e.samplingRate}\t${e.bitrate}\t${e.packetsLostRate}\t${e.frameRate}\t${e.resolution}\t${e.googRenderDelayMs}\t${e.jitter}\t${e.nackCount}\t${e.pliCount}\t${e.rtt}\t${e.googFirsSent}\t${e.encoderImplementation}\t${e.trackState}`).join("\n"),e.senders.length&&this._send(p+"\r"+this._userRole),f+=m.map(e=>`${e.trackId}\t${e.googCodecName}\t${e.audioLevel}\t${e.samplingRate}\t${e.bitrate}\t${e.packetsLostRate}\t${e.frameRate}\t${e.resolution}\t${e.googRenderDelayMs}\t${e.jitter}\t${e.nackCount}\t${e.pliCount}\t${e.rtt}\t${e.googFirsReceived}\t${e.codecImplementationName}\t${e.trackState}`).join("\n"),e.receivers.length&&this._send(f+"\r"+this._userRole)}sendR1(){const e=`R1\t5.3.2\t${this._context.getCoreVersion()}\tweb\t${navigator.platform}\t-1\t${lt.browser}\t${lt.version}\t${this._getClientID()}\t${this._userRole}`;this._send(e)}sendR2(e,t,n){const i=`R2\t${e}\t${t}\t${this._getClientID()}\r${n.join("\t")}\r${this._userRole}`;this._send(i)}}!function(e){e.PUBLISH="publish",e.SUBSCRIBE="subscribe"}(Dt||(Dt={})),function(e){e.BEGIN="begin",e.END="end"}(Nt||(Nt={}));class Bt{constructor(e){this._room=e,this._audioLevelChangeHandler=null,this._timer=null,this._pc=this._room.__getPC()}_audioLevelReport(){return r(this,void 0,void 0,(function*(){if("new"===this._pc.getRTCPeerConn().iceConnectionState||!this._audioLevelChangeHandler)return;const e=(yield this._pc.getAudioLevelReportData()).map(e=>{const{userId:t}=pn.parseTrackId(e.trackId);return{track:this._room.getCrtUserId()===t?this._room.getLocalTrack(e.trackId):this._room.getRemoteTrack(e.trackId),audioLevel:e.audioLevel||0}}).filter(e=>e.track);this._audioLevelChangeHandler(e)}))}onAudioLevelChange(e,t){t<300||t>1e3?o.error('the valid range of onAudioLevelChange params "gap" is: > 300 && < 1000'):e?(this._audioLevelChangeHandler=e,this._timer=setInterval(this._audioLevelReport.bind(this),t)):this._audioLevelChangeHandler=null}clearAudioLevelReportTimer(){this._timer&&(clearInterval(this._timer),this._timer=null)}}!function(e){e[e.ANCHOR=1]="ANCHOR",e[e.AUDIENCE=2]="AUDIENCE"}(Lt||(Lt={}));const Vt=e=>e instanceof Ae?e.getTrackId():e.track.getTrackId();class jt{constructor(e,t,n,i,r,s,a,l,d,h){this._context=e,this._runtime=t,this._roomId=n,this._roomMode=r,this._service=s,this._initOptions=a,this._ntfClearRoomItem=l,this._isMainRoom=h,this._remoteTracks={},this._subscribedList=[],this._destroyed=!1,this.msgTaskQueue=new c,this._appListener=null,this._onRecvPKMsg=null,this._token=i.token,this._sessionId=i.sessionId,this._roomResources=d?{}:ft(i,this._roomId),this._initRemoteTracks();const p=this._context.getCurrentId(),f=this._roomResources[p]=this._roomResources[p]||[];o.debug("room data -> "+JSON.stringify(this._roomResources)),f.length>0&&u(()=>this._unpublishPrev(f)),d&&this._afterChangedRole(i),this._pinger=new vt(n,this._roomMode,e,this._initOptions.pingGap),this._pinger.onFailed=this._kickoff.bind(this),this._pinger.onPingResult=this._handlePingResult.bind(this),this._pinger.start(),this._polarisReport=new Ut(this._context,this._runtime,this._roomId,this),this._polarisReport.sendR1(),this._pc=new xt(this._reTryExchange.bind(this),this._polarisReport),this._pc.on(xt.__INNER_EVENT_TRACK_READY__,this._onTrackReady,this),this._pc.on(De.__INNER_EVENT_MUTED_CHANGE__,this._onLocalTrackMuted,this),this._pc.on(De.__INNER_EVENT_DESTROY__,this._onLocalTrackDestroied,this)}_initRemoteTracks(){const e=this._context.getCurrentId();for(const t in this._roomResources){const n=this._roomResources[t];t!==e&&0!==n.length&&n.forEach(e=>{const t=Ze(e),{tag:n,userId:i,mediaType:r}=et(t),o=r===we.AUDIO_ONLY?new Ke(n,i):new We(n,i);o.__innerSetRemoteMuted(0===e.state),this._remoteTracks[t]=o})}}_handlePingResult(e){this._callAppListener("onPing",e)}setBitrate(e,t,n){o.warn("`RCAbstractRoom.setBitrate` will be deprecated, use `RCLocalTrack.setBitrate` instead."),Object(i["assert"])("max",e,e=>Object(i["isNumber"])(e)&&e>Math.max(t||1,200),!0),Object(i["assert"])("min",t,t=>Object(i["isNumber"])(t)&&t>=1&&(!Object(i["isNumber"])(e)||t<e),!0),Object(i["assert"])("start",n,n=>Object(i["isNumber"])(n)&&n>t&&n<=e),this._pc.setBitrate(e,t,n)}_onTrackReady(e){const t=e.streams[0].id,n=e.receiver.track,i=[t,"audio"===n.kind?we.AUDIO_ONLY:we.VIDEO_ONLY].join("_"),r=this._remoteTracks[i];r?(r.__innerSetMediaStreamTrack(n),this._callAppListener("onTrackReady",r)):o.warn("cannot found remote track "+n.id)}_callAppListener(e,...t){var n;const i=null===(n=this._appListener)||void 0===n?void 0:n[e];if(i)try{i(...t)}catch(e){o.error(e)}}_onUserUnpublish(e){return r(this,void 0,void 0,(function*(){yield this.unsubscribe(e),e.forEach(e=>{e.__innerDestroy(),delete this._remoteTracks[e.getTrackId()]}),this._onTrackUnpublish(e)}))}_onTrackUnpublish(e){this._callAppListener("onTrackUnpublish",e)}_unpublishPrev(e){return r(this,void 0,void 0,(function*(){const t=e.slice();e.length=0,o.info("unpublish uris prev login: "+JSON.stringify(t));const n=yield this._context.setRTCTotalRes(this._roomId,qe(gt.UNPUBLISH,t),Ge([]),gt.TOTAL_CONTENT_RESOURCE,Ge([]));n!==i["ErrorCode"].SUCCESS?o.error("unpublish prev uris failed -> code: "+n):o.debug("unpublish uris prev login succeed")}))}__parseInnerMessage(e){const{targetId:t,conversationType:n}=e;if(n!==i["ConversationType"].RTC_ROOM)return!1;if(t!==this._roomId)return!0;o.info(`recv inner msg -> message: ${JSON.stringify(e)} | roomid: ${this._roomId}`);const r=e.content;switch(e.messageType){case gt.KICK:this._kickoff(!0,r);break;case gt.STATE:this.msgTaskQueue.push(()=>this._stateHandle(r));break;case gt.MODIFY:case gt.PUBLISH:case gt.UNPUBLISH:case gt.TOTAL_CONTENT_RESOURCE:this.msgTaskQueue.push(()=>this._resourceHandle(r,e.messageType,e.senderUserId));break;case gt.ROOM_NOTIFY:this._callAppListener("onRoomAttributeChange",e.messageType,e.content);break;case gt.USER_NOTIFY:o.warn("TODO: "+gt.USER_NOTIFY);break;case gt.PK_INVITE:case gt.PK_CANCEL_INVITE:case gt.PK_INVITE_TIMEOUT:case gt.PK_INVITE_ANSWER:case gt.PK_END:this._onRecvPKMsg&&this._onRecvPKMsg(e);break;case gt.OTHER_ROOM_OFFLINE:break;default:this._callAppListener("onMessageReceive",e.messageType,e.content,e.senderUserId,e.messageUId)}return!0}_kickoff(e,t){let n;o.warn("onKickOff -> byServer: "+e),this._ntfClearRoomItem(),this._leaveHandle(!e),e&&((null==t?void 0:t.users)||[]).forEach(e=>{e.userId===this._context.getCurrentId()&&(n=e.type)}),this._callAppListener("onKickOff",e,n)}_rtcpeerClosed(){this._ntfClearRoomItem(),this._leaveHandle(!0),this._callAppListener("onRTCPeerConnectionCloseByException")}_resourceHandle(e,t,n){return r(this,void 0,void 0,(function*(){if(this._assertRoomDestroyed())return void o.warn("room has been destroyed. -> roomId: "+this._roomId);const{uris:i,ignore:r}=e;if(r||!i)return;const a=[],c=[],l=[];let d;const h=this._roomResources[n]||(this._roomResources[n]=[]);switch(t){case gt.MODIFY:l.push(...i);break;case gt.PUBLISH:a.push(...i);break;case gt.UNPUBLISH:c.push(...i);break;case gt.TOTAL_CONTENT_RESOURCE:d=it(h,i),a.push(...d.publishedList),c.push(...d.unpublishedList),l.push(...d.modifiedList)}if(a.length>0){const e=h.map(Ze),t=[],n=[];if(a.forEach(i=>{const r=Ze(i),o=e.indexOf(r),{userId:s,tag:a,mediaType:c}=et(r);o>-1?h[o]=i:h.push(i);let l=this._remoteTracks[r];l?l.isSubscribed()&&t.push(l):(l=c===we.AUDIO_ONLY?new Ke(a,s):new We(a,s),this._remoteTracks[r]=l,n.push(l)),l.__innerSetRemoteMuted(0===i.state)}),t.length){const e=t.map(e=>e.getTrackId());o.debug("resub tracks -> "+JSON.stringify(e));const{code:n}=yield u(()=>this.__subscribe(t,!0));n!==s.SUCCESS&&o.error(`resub tracks failed -> code: ${n}, ids: ${JSON.stringify(e)}`)}this._onTrackPublish(n)}if(c.length>0){const e=c.map(Ze);for(let n=h.length-1;n>=0;n-=1){const t=h[n];e.includes(Ze(t))&&h.splice(n,1)}const t=c.map(e=>{const t=Ze(e);return this._remoteTracks[t]});yield this._onUserUnpublish(t)}if(l.length>0){const e=h.map(Ze);for(let t=0;t<l.length;t+=1){const n=l[t],i=Ze(n),r=e.indexOf(i);h[r].state=n.state;const o=this._remoteTracks[i];o.__innerSetRemoteMuted(0===n.state),o.isAudioTrack()?this._onAudioMuteChange(o):this._onVideoMuteChange(o)}}}))}_onTrackPublish(e){this._callAppListener("onTrackPublish",e)}_stateHandle(e){var t;return r(this,void 0,void 0,(function*(){const{users:n}=e;if(0===n.length)return;for(let e=0;e<n.length;e++){const t=n[e];if(t.extra&&t.extra.roomId!==this._roomId)return;if(1==+t.state&&!this.getRemoteUserIds().includes(t.userId))return}const i=[],r=[],s=[],a=[];n.forEach(e=>{0==+e.state?(o.debug("user joined -> "+e.userId),this._roomResources[e.userId]||(e.switchRoleType?s.push(e.userId):i.push(e.userId)),this._roomResources[e.userId]=this._roomResources[e.userId]||[]):(o.debug("user left -> "+e.userId),e.switchRoleType?a.push(e.userId):r.push(e.userId))});const c=[...i,...s],l=[...r,...a];if(l.length){const e=[],t=[];l.forEach(n=>{e.push(...this.getRemoteTracksByUserId(n)),t.push(n)}),e.length&&(yield this.unsubscribe(e),e.forEach(e=>delete this._remoteTracks[e.getTrackId()])),t.length&&t.forEach(e=>delete this._roomResources[e])}if(null===(t=this._appListener)||void 0===t?void 0:t.onSwitchRole)return s.length&&s.forEach(e=>this._callAppListener("onSwitchRole",e,Lt.ANCHOR)),a.length&&a.forEach(e=>this._callAppListener("onSwitchRole",e,Lt.AUDIENCE)),i.length&&this._callAppListener("onUserJoin",i),void(r.length&&this._callAppListener("onUserLeave",r));c.length&&this._callAppListener("onUserJoin",c),l.length&&this._callAppListener("onUserLeave",l)}))}getRoomId(){return this._roomId}getCrtUserId(){return this._context.getCurrentId()}__getPC(){return this._pc}getRemoteUserIds(){const e=this._context.getCurrentId();return Object.keys(this._roomResources).filter(t=>t!==e)}getRemoteTracks(){const e=[];return this.getRemoteUserIds().forEach(t=>{e.push(...this.getRemoteTracksByUserId(t))}),e}getRemoteTracksByUserId(e){const t=[];for(const n in this._remoteTracks){const i=this._remoteTracks[n];i.getUserId()===e&&t.push(i)}return t}getSessionId(){return this._sessionId}sendMessage(e,t){return r(this,void 0,void 0,(function*(){const{code:n}=yield this._context.sendMessage(i["ConversationType"].RTC_ROOM,this._roomId,{messageType:e,content:t,isStatusMessage:!0});return n!==i["ErrorCode"].SUCCESS?(o.error("send message failed -> code: "+n),{code:s.SIGNAL_ERROR}):{code:s.SUCCESS}}))}setRoomAttribute(e,t,n,a=!1){return r(this,void 0,void 0,(function*(){const r=yield this._context.setRTCData(this._roomId,e,t,a,i["RTCApiType"].ROOM,n);return r!==i["ErrorCode"].SUCCESS?(o.error("SetRoomAttributeValue Failed: "+r),{code:s.SIGNAL_ERROR}):{code:s.SUCCESS}}))}deleteRoomAttributes(e,t,n=!1){return r(this,void 0,void 0,(function*(){const r=yield this._context.removeRTCData(this._roomId,e,n,i["RTCApiType"].ROOM,t);return r!==i["ErrorCode"].SUCCESS?(o.error("DeleteRoomAttribute Failed: "+r),{code:s.SIGNAL_ERROR}):{code:s.SUCCESS}}))}getRoomAttributes(e=[],t=!1){return r(this,void 0,void 0,(function*(){const{code:n,data:r}=yield this._context.getRTCData(this._roomId,e,t,i["RTCApiType"].ROOM);return n!==i["ErrorCode"].SUCCESS?(o.error("GetRoomAttributes Failed: "+n),{code:s.SIGNAL_ERROR}):{code:s.SUCCESS,data:r}}))}_setUserAttributeValue(e,t,n){return this._context.setRTCData(this._roomId,e,t,!1,i["RTCApiType"].PERSON,n)}_deleteUserAttributes(e,t){return this._context.removeRTCData(this._roomId,e,!1,i["RTCApiType"].PERSON,t)}_getUserAttributes(e){return this._context.getRTCData(this._roomId,e,!1,i["RTCApiType"].PERSON)}isDestroyed(){return this._destroyed}__destroy(e){return this._leaveHandle(e)}_leaveHandle(e){var t;return r(this,void 0,void 0,(function*(){this._destroyed||(this._destroyed=!0,null===(t=this._audioLevelReport)||void 0===t||t.clearAudioLevelReportTimer(),e&&(yield this._context.quitRTCRoom(this._roomId)),this._isMainRoom&&this._quitAllPKRoom(),this._pc.removeAllLocalTrack(),this._pinger.stop(),this._isMainRoom&&(yield this._service.exit(this._getRTCReqestHeaders())),this._pc.destroy(),this._polarisReport=null,this._removeRemoteTracks())}))}_onLocalTrackDestroied(e){e instanceof Le&&e.__isTiny()||this.unpublish([e])}_onLocalTrackMuted(e){return r(this,void 0,void 0,(function*(){const t=e.getTrackId(),n=this._context.getCurrentId(),r=[{resourceId:t,enabled:!e.isLocalMuted()}],s=this._roomResources[n]||[],a=[];for(let e=0;e<s.length;e+=1){const t=s[e],n=Ze(t),i=r.findIndex(e=>e.resourceId===n);if(i>=0){const{enabled:e}=r[i];t.state=e?1:0,a.push(t);break}}const c=yield u(()=>this._context.setRTCTotalRes(this._roomId,qe(gt.MODIFY,a),Ge(s),gt.TOTAL_CONTENT_RESOURCE));c!==i["ErrorCode"].SUCCESS&&o.error("notice `track.enabled` change failed -> code: "+c)}))}_removePubFailedTracks(e){e.forEach(e=>{const t=e instanceof De?e:e.track;o.debug("remove pub failed track from peerconnection -> trackId: "+t.getTrackId()),this._pc.removeLocalTrackById(t.getTrackId())})}publish(e){return r(this,void 0,void 0,(function*(){return u(()=>this.__publish(e))}))}__publish(e){return r(this,void 0,void 0,(function*(){if(!this._isMainRoom&&this instanceof Qt)return o.error("the `publish` is disabled in PK room"),{code:s.THE_FUNCTION_IS_DISABLED_IN_PKROOM};if(this._assertRoomDestroyed())return o.error("publish failed, room has been destroyed. -> roomId: "+this._roomId),{code:s.ROOM_HAS_BEEN_DESTROYED};if(!Object(i["validate"])("tracks",e,()=>Object(i["isArray"])(e)&&e.length>0&&e.every(e=>e instanceof De||e.track instanceof De),!0))return o.error("publish failed, tracks is invalid -> roomId: "+this._roomId),{code:s.PARAMS_ERROR};const t=this._context.getCurrentId();if(this._pc.getLocalTracks().length+(e=>{let t=0;return e.forEach(e=>{e instanceof De?t++:e.pubTiny&&e.track.isVideoTrack()?t+=2:t++}),t})(e)>10)return o.error("publish failed, tracks limit exceeded -> roomId: "+this._roomId),{code:s.PUBLISH_TRACK_LIMIT_EXCEEDED};o.debug(`publish tracks -> roomId: ${this._roomId}, tracks: ${e.map(Vt)}`),e.forEach(e=>{const{track:t,pubTiny:n}=e instanceof De?{pubTiny:!1,track:e}:e;if(this._pc.addLocalTrack(t),t.isVideoTrack()&&n){let e;try{e=t.__innerGetMediaStreamTrack().clone();const i=n.frameRate||Re.FPS_15,r=n.resolution||Ie.W176_H144,{width:o,height:s}=ot(r),a=ct(i);e.applyConstraints({width:o,height:s,frameRate:a})}catch(n){return null==e||e.stop(),void o.warn(`pubTiny failed -> id: ${t.getTrackId()}, msg: ${n.message}`)}this._pc.addLocalTrack(new Le(t.getTag(),t.getUserId(),e,!0))}}),this._pc.clearReTryExchangeTimer();const n=yield this._createExchangeParams(this._subscribedList,!1),r=this._getPushOtherRoomsParams();r&&(n.pushOtherRooms=r);const a=yield this._exchangeHandle(n);if(a.code!==s.SUCCESS)return o.error(`publish failed -> roomId: ${this._roomId}, code: ${a.code}`),this._removePubFailedTracks(e),{code:a.code};const{publishList:c,sdp:l,resultCode:u,message:d,urls:h,mcuPublishList:p}=a.data;if(u!==s.SUCCESS)return o.error(`publish failed -> roomId: ${this._roomId}, code: ${u}, msg: ${d}`),this._removePubFailedTracks(e),{code:u};const f=yield this._pc.setRemoteAnswer(l.sdp);if(f!==s.SUCCESS)return{code:f};const g=this._roomResources[t],m=c.map(e=>Object.assign({tag:e.msid.split("_").pop(),state:this._getResourceState(Ze(e))},e)),{publishedList:_}=it(g,m),v=(null==p?void 0:p.map(e=>Object.assign({tag:e.msid.split("_").pop(),state:1},e)))||[],y=yield this._context.setRTCTotalRes(this._roomId,qe(gt.PUBLISH,_),Ge(m),gt.TOTAL_CONTENT_RESOURCE,Ge(v));if(y!==i["ErrorCode"].SUCCESS)return o.error("send publish streams notification failed: "+y),{code:s.SIGNAL_ERROR};this._roomResources[t]=m;const C=_.map(e=>Ze(e));return this._polarisReport&&this._polarisReport.sendR2(Dt.PUBLISH,Nt.BEGIN,C),e.forEach(e=>{const{track:t}=e instanceof De?{track:e}:e;t.__innerSetPublished(!0)}),o.debug("publish success: "+C.join(",")),this._roomMode===i["RTCMode"].LIVE?{code:s.SUCCESS,liveUrl:null==h?void 0:h.liveUrl}:{code:s.SUCCESS}}))}_getPushOtherRoomsParams(){if(this instanceof Qt){const{code:e,roomPKHandler:t}=this.getRoomPKHandler(),n=[];if(e===s.SUCCESS&&t){const e=t.getJoinedPKRooms();for(const i in e){const r=e[i].getSessionId(),o=t.getPKInfo(i);if(!o)return;const{inviterUserAutoMix:s,inviteeUserAutoMix:a,inviterUserId:c}=o,l=this._context.getCurrentId()===c;n.push({roomId:i,sessionId:r,autoMix:l?!!s:!!a})}}return n}}_reTryExchange(){return r(this,void 0,void 0,(function*(){u(()=>r(this,void 0,void 0,(function*(){const e=yield this._createExchangeParams(this._subscribedList,!0),t=this._getPushOtherRoomsParams();t&&(e.pushOtherRooms=t);const n=yield this._exchangeHandle(e);if(n.code!==s.SUCCESS)return o.error("reTryExchange failed: "+n.code),{code:n.code};const{sdp:i,resultCode:r}=n.data;if(r!==s.SUCCESS)return o.error("reTryExchange failed: "+r),{code:r};this._pc.clearReTryExchangeTimer();const a=yield this._pc.setRemoteAnswer(i.sdp);return a!==s.SUCCESS?{code:a}:void 0})))}))}_exchangeHandle(e){return this._service.exchange(this._getRTCReqestHeaders(),e)}_getRTCReqestHeaders(){return{"App-Key":this._context.getAppkey(),RoomId:this._roomId,Token:this._token,RoomType:this._roomMode,UserId:this._context.getCurrentId()}}_createExchangeParams(e,t){return r(this,void 0,void 0,(function*(){return{sdp:yield this._pc.createOffer(t),extend:JSON.stringify({resolutionInfo:this._pc.getOutboundVideoInfo()}),subscribeList:e.filter(e=>{const t=e.track.getTrackId(),{userId:n}=et(t);if(!this._roomResources[n])return!1;const i=this._roomResources[n].filter(e=>t===`${e.msid}_${e.mediaType}`).length;return i}).map(e=>({simulcast:e.subTiny?_t.TINY:_t.NORMAL,resolution:"",uri:this._getResourceById(e.track.getTrackId()).uri})),switchstream:!1}}))}_getResourceState(e){var t;return(null===(t=this.getLocalTrack(e))||void 0===t?void 0:t.isLocalMuted())?0:1}unpublish(e){return r(this,void 0,void 0,(function*(){return u(()=>this.__unpublish(e))}))}__unpublish(e){var t;return r(this,void 0,void 0,(function*(){if(!this._isMainRoom&&this instanceof Qt)return o.error("the `unpublish` is disabled in PK room"),{code:s.THE_FUNCTION_IS_DISABLED_IN_PKROOM};if(this._assertRoomDestroyed())return o.warn("room has been destroyed, no need to unpublish tracks -> roomId: "+this._roomId),{code:s.SUCCESS};const n=this._context.getCurrentId();if(!Object(i["validate"])("tracks",e,()=>e.every(e=>e.getUserId()===n&&e instanceof De),!0))return o.warn(`unpublish failed, tracks is invalid -> roomId: ${this._roomId}, tracks: ${e.map(Vt)}`),{code:s.PARAMS_ERROR};const r=e.map(e=>e.getTrackId()),a=r.map(this._getResourceById.bind(this)).filter(e=>!!e);if(0===a.length)return{code:s.SUCCESS};const c=this._roomResources[n].filter(e=>!a.includes(e));r.forEach(e=>this._pc.removeLocalTrackById(e)),null===(t=this._polarisReport)||void 0===t||t.sendR2(Dt.PUBLISH,Nt.END,r),this._pc.clearReTryExchangeTimer();const l=yield this._createExchangeParams(this._subscribedList,!1),u=this._getPushOtherRoomsParams();u&&(l.pushOtherRooms=u);const d=yield this._exchangeHandle(l);if(d.code!==s.SUCCESS)return o.error("exchange failed -> code: "+d.code),{code:d.code};const{publishList:h,sdp:p,resultCode:f,message:g,mcuPublishList:m}=d.data;f!==s.SUCCESS&&o.error(`unpublish streams failed -> code: ${f}, msg: ${g}`);const _=m?m.map(e=>Object.assign({tag:e.msid.split("_").pop(),state:1},e)):[],v=yield this._context.setRTCTotalRes(this._roomId,qe(gt.UNPUBLISH,a),Ge(c),gt.TOTAL_CONTENT_RESOURCE,Ge(_));if(v!==i["ErrorCode"].SUCCESS)return o.error("send unpublish notification failed:",v),{code:s.SIGNAL_ERROR};o.debug("unpublish success -> tracks: "+r.join(","));const y=yield this._pc.setRemoteAnswer(p.sdp);if(y!==s.SUCCESS)return{code:y};const C=h.map(e=>Object.assign({tag:e.msid.split("_").pop(),state:this._getResourceState(Ze(e))},e));return this._roomResources[n]=C,{code:s.SUCCESS}}))}_getResourceById(e){const{userId:t}=et(e);return this._roomResources[t].find(t=>Ze(t)===e)}_isValidResourceId(e){var t;const{userId:n}=et(e);return!!(null===(t=this._roomResources[n])||void 0===t?void 0:t.find(t=>Ze(t)===e))}subscribe(e){return r(this,void 0,void 0,(function*(){return u(()=>this.__subscribe(e,!1))}))}__subscribe(e,t=!1){var n;return r(this,void 0,void 0,(function*(){if(this._assertRoomDestroyed())return o.error("subscribe failed, room has been destroyed -> roomId: "+this._roomId),{code:s.ROOM_HAS_BEEN_DESTROYED};if(!Object(i["validate"])("tracks",e,()=>Object(i["isArray"])(e)&&e.length>0&&e.every(e=>e instanceof He||e.track instanceof He),!0))return o.error("subscribe failed, tracks is invalid -> roomId: "+this._roomId),{code:s.PARAMS_ERROR};o.info(`subscribe -> roomId: ${this._roomId}, tracks: ${e.map(Vt)}`);const r=this._subscribedList.map(e=>Object.assign({},e)),a=e.map(e=>e instanceof He?{track:e}:e);let c=!1;const l=[];return a.forEach(e=>{const t=e.track.getTrackId();l.push(t);const n=r.find(e=>e.track.getTrackId()===t);n&&n.subTiny===e.subTiny||(n?n.subTiny=e.subTiny:r.push(e),c=!0)}),c||t?(null===(n=this._polarisReport)||void 0===n||n.sendR2(Dt.SUBSCRIBE,Nt.BEGIN,l),this._updateSubListHandle(r,!0)):{code:s.SUCCESS}}))}unsubscribe(e){return r(this,void 0,void 0,(function*(){return u(()=>this.__unsubscribe(e))}))}__unsubscribe(e){var t;return r(this,void 0,void 0,(function*(){if(this._assertRoomDestroyed())return o.warn("room has beed destroyed, no need to unsubscribe tracks -> roomId: "+this._roomId),{code:s.SUCCESS};if(!Object(i["validate"])("tracks",e,()=>Object(i["isArray"])(e)&&e.length>0&&e.every(e=>e instanceof He),!0))return o.error("unsubscribe failed, tracks is invalid -> roomId: "+this._roomId),{code:s.PARAMS_ERROR};o.info(`unsubscribe -> roomId: ${this._roomId}, tracks: ${e.map(Vt)}`);const n=this._subscribedList.map(e=>Object.assign({},e)).filter(t=>!e.includes(t.track));return null===(t=this._polarisReport)||void 0===t||t.sendR2(Dt.SUBSCRIBE,Nt.END,e.map(e=>e.getTrackId())),this._updateSubListHandle(n,!1)}))}_assertRoomDestroyed(){if(this._destroyed){const e="This room has been destroyed. Please use `RCRTCClient.joinRTCRoom` or `RCRTCClient.joinLivingRoom` to catch another instance.";return o.warn(e),s.ROOM_HAS_BEEN_DESTROYED}}getLocalTrack(e){return this._pc.getLocalTrack(e)}getLocalTracks(){return this._pc.getLocalTracks()}getRemoteTrack(e){return this._remoteTracks[e]||null}updateSubList(e){return r(this,void 0,void 0,(function*(){return u(()=>this._updateSubListHandle(e,!1))}))}_updateSubListHandle(e,t=!1){return r(this,void 0,void 0,(function*(){if(this._assertRoomDestroyed())return{code:s.ROOM_HAS_BEEN_DESTROYED};if(!Object(i["validate"])("resources",e,()=>Object(i["isArray"])(e)&&e.every(e=>e instanceof He||e.track instanceof He),!0))return o.error("update sublist failed, tracks is invalid -> roomId: "+this._roomId),{code:s.PARAMS_ERROR};o.info(`update subscribe list -> roomId: ${this._roomId}, forceReq: ${t}, tracks: ${e.map(Vt)}`);let n=e.map(e=>e instanceof He?{track:e}:Object.assign({},e));const r={};n=n.filter(e=>{const t=e.track.getTrackId();return this._remoteTracks[t]?!r[t]&&(r[t]=!0):(o.warn("track cannot found in room -> trackId: "+t),!1)}).map(e=>Object.assign({},e));const a=this._subscribedList.map(e=>Object.assign({},e));if(!t){let e=!1;if(n.forEach(t=>{const n=a.findIndex(e=>e.track===t.track);-1!==n?a.splice(n,1)[0].subTiny!==t.subTiny&&(e=!0):e=!0}),a.length&&(e=!0),!e)return{code:s.SUCCESS}}this._pc.clearReTryExchangeTimer(),this._pc.updateSubRemoteTracks(n.map(e=>e.track));const c=yield this._createExchangeParams(n,!1),l=this._getPushOtherRoomsParams();l&&(c.pushOtherRooms=l);const u=yield this._exchangeHandle(c),d=n.map(e=>e.track.getTrackId());if(u.code!==s.SUCCESS)return{code:u.code};const{sdp:h,resultCode:p,message:f,subscribedList:g}=u.data;if(p!==s.SUCCESS)return o.error("change subscribe list failed: "+p),{code:p};o.debug("subscribe success: "+d.join(","));const m=yield this._pc.setRemoteAnswer(h.sdp);if(m!==s.SUCCESS)return{code:m};const _=null==g?void 0:g.map(e=>`${e.msid}_${e.mediaType}`),v=n.filter(e=>null==_?void 0:_.includes(e.track.getTrackId())),y=n.filter(e=>!(null==_?void 0:_.includes(e.track.getTrackId())));for(const e in this._remoteTracks){const t=v.some(t=>t.track.getTrackId()===e);this._remoteTracks[e].__innerSetSubscribed(t)}return this._subscribedList.splice(0,this._subscribedList.length,...v),y.length?{code:s.SUCCESS,failedList:y}:{code:s.SUCCESS}}))}registerRoomEventListener(e){this._appListener=e}registerReportListener(e){this._pc.registerReportListener(e)}onAudioLevelChange(e,t){var n;null===(n=this._audioLevelReport)||void 0===n||n.clearAudioLevelReportTimer(),this._audioLevelReport=new Bt(this),this._audioLevelReport.onAudioLevelChange(e,t||1e3)}__onReconnected(e){return r(this,void 0,void 0,(function*(){if("closed"===this._pc.getRTCPeerConn().connectionState)return o.warn("RTCPeerConnection closed. Please rejoin room to restore services."),void this._rtcpeerClosed();const{code:t,data:n}=yield this._context.joinRTCRoom(this._roomId,this._roomMode,e);if(t!==i["ErrorCode"].SUCCESS)return void o.error("RTC __onReconnected getRTCRoomInfo failed: "+t);o.debug("RTC __onReconnected getRTCRoomInfo success: "+JSON.stringify(n));const r=[],s={},a={},c={},l=ft(n,this._roomId),u=Object.keys(l),d=Object.keys(this._roomResources);for(let e=u.length-1;e>=0;e-=1){const t=u[e],n=d.indexOf(t);if(-1===n){r.push(t),s[t]=nt(l[t]);continue}const i=this._roomResources[t],o=l[t],{publishedList:h,modifiedList:p,unpublishedList:f}=it(i,o,!0);s[t]=nt(h),a[t]=nt(f),c[t]=nt(p),d.splice(n,1)}d.length&&d.forEach(e=>{delete this._roomResources[e]}),Object.assign(this._roomResources,l),d.length&&this._callAppListener("onUserLeave",d),r.length&&this._callAppListener("onUserJoin",r);for(const e in a){const t=a[e];if(t.length){const e=t.map(e=>this._remoteTracks[Ze(e)]);yield this._onUserUnpublish(e)}}return Object.keys(s).forEach(e=>{const t=s[e];if(0===t.length)return;const n=t.map(e=>{const t=Ze(e),{userId:n,tag:i,mediaType:r}=et(t),o=this._remoteTracks[t]=r===we.AUDIO_ONLY?new Ke(i,n):new We(i,n);return o.__innerSetRemoteMuted(0===e.state),o});this._onTrackPublish(n)}),Object.keys(c).forEach(e=>{c[e].forEach(e=>{const t=Ze(e),n=this._remoteTracks[t];n.__innerSetRemoteMuted(0===e.state),n.isAudioTrack()?this._onAudioMuteChange(n):this._onVideoMuteChange(n)})}),{data:n}}))}_onAudioMuteChange(e){this._callAppListener("onAudioMuteChange",e)}_onVideoMuteChange(e){this._callAppListener("onVideoMuteChange",e)}_afterChangedRole(e){}_removeRemoteTracks(){const e=Object.values(this._remoteTracks);e.length&&(e.forEach(e=>{e.isAudioTrack()&&e.__releaseMediaElement()}),this._remoteTracks={})}_registerPKMsgListener(e){this._onRecvPKMsg=e}_quitAllPKRoom(){}}var Ft,$t,Ht;!function(e){e[e.CROP=1]="CROP",e[e.WHOLE=2]="WHOLE"}(Ft||(Ft={})),function(e){e[e.CUSTOMIZE=1]="CUSTOMIZE",e[e.SUSPENSION=2]="SUSPENSION",e[e.ADAPTATION=3]="ADAPTATION"}($t||($t={})),function(e){e[e.CROP=1]="CROP",e[e.WHOLE=2]="WHOLE"}(Ht||(Ht={}));const Kt=()=>({version:1,mode:$t.SUSPENSION});class Wt{constructor(e,t,n){this._onFlush=e,this._isValidTrackId=t,this._sendCDNInfoSignal=n,this._values=Kt()}setHostVideoTrack(e){if(!this._isValidTrackId(e))return o.error("setHostVideoTrack failed: videoTrackId is invalid -> "+e),this;const{mediaType:t,tag:n,userId:i}=et(e);return t!==we.VIDEO_ONLY?(o.error("setHostVideoTrack failed: kind of resource is not 'video' -> "+e),this):(this._values.host_stream_id=tt(i,n),this)}setMixLayoutMode(e){return[$t.CUSTOMIZE,$t.SUSPENSION,$t.ADAPTATION].includes(e)?(this._values.mode=e,this):(o.error("layout mode is invalid: "+e),this)}_addOutputValue(e,t,n="normal"){const i=this._values.output||(this._values.output={video:{normal:{width:640,height:480}}});if("cdn"===e)return void(i.cdn=t);if("audio"===e)return void(i.audio={bitrate:t});const r=i.video;if("normal"!==n&&"tiny"!==n)if("backgroundColor"!==n)if("exparams"!==n){if("backgroundPicture"===n){const e=r.backgroundPicture||(r.backgroundPicture={fillMode:Ft.CROP,picture:[]});Object.assign(e,t)}}else r.exparams={renderMode:t};else r.backgroundColor=t;else{const e=r[n]||(r[n]={});Object.assign(e,t)}}setOutputVideoResolution(e){if(!st(e))return o.warn("setOutputVideoResolution failed: `resolution` is invalid"),this;const{width:t,height:n}=ot(e);return this._addOutputValue("video",{width:t,height:n},"normal"),this}setOutputVideoFPS(e){if(!at(e))return o.warn("setOutputVideoFPS failed: `fps` is invalid"),this;const t=ct(e);return this._addOutputValue("video",{fps:t},"normal"),this}setOutputVideoBitrate(e){return!Object(i["isNumber"])(e)||e<=0?o.error("bitrate is invalid: "+e):this._addOutputValue("video",{bitrate:e},"normal"),this}setOutputTinyVideoResolution(e){if(!st(e))return o.warn("setOutputTinyVideoResolution failed: `resolution` is invalid"),this;const{width:t,height:n}=ot(e);return this._addOutputValue("video",{width:t,height:n},"tiny"),this}setOutputTinyVideoFPS(e){if(!at(e))return o.warn("setOutputTinyVideoFPS failed: `fps` is invalid"),this;const t=ct(e);return this._addOutputValue("video",{fps:t},"tiny"),this}setOutputTinyVideoBitrate(e){return!Object(i["isNumber"])(e)||e<=0?o.error("bitrate is invalid: "+e):this._addOutputValue("video",{bitrate:e},"tiny"),this}setOutputVideoRenderMode(e){return[Ht.CROP,Ht.WHOLE].includes(e)?this._addOutputValue("video",e,"exparams"):o.error("renderMode is invalid: "+e),this}setOutputAudioBitrate(e){return Object(i["isNumber"])(e)&&e>0?this._addOutputValue("audio",e):o.error("bitrate is invalid: "+e),this}setOutputBackgroundColor(e){return/^0x[a-fA-F0-9]{6}$/.test(e)?this._addOutputValue("video",e,"backgroundColor"):o.error("color is invalid: "+e),this}addOutputBackgroundPicture(e,t,n,r,s){var a,c,l;if(!Object(i["isHttpUrl"])(e))return o.error("uri is invalid: "+e),this;if([t,n,r,s].some(e=>!Object(i["isNumber"])(e)||e<0||e>1))return o.error(`some attrs of (x, y, w, h) is invalid: ${t}, ${n}, ${r}, ${s}`),this;const u=(null===(l=null===(c=null===(a=this._values.output)||void 0===a?void 0:a.video)||void 0===c?void 0:c.backgroundPicture)||void 0===l?void 0:l.picture)||[];return u.push({uri:e,w:r,h:s,x:t,y:n}),this._addOutputValue("video",{picture:u},"backgroundPicture"),this}removeOutputBackgroundPicture(e){var t,n,r;if(!Object(i["isHttpUrl"])(e))return o.error("uri is invalid: "+e),this;let s=null===(r=null===(n=null===(t=this._values.output)||void 0===t?void 0:t.video)||void 0===n?void 0:n.backgroundPicture)||void 0===r?void 0:r.picture;return s&&(s=s.filter(t=>t.uri!==e),this._addOutputValue("video",{pictures:s},"backgroundPicture")),this}clearOutputBackgroundPicture(){return this._addOutputValue("video",{pictures:[]},"backgroundPicture"),this}setOutputBackgroundPictureFillMode(e){return[Ft.CROP,Ft.WHOLE].includes(e)?this._addOutputValue("video",{fillMode:e},"backgroundPicture"):o.error("fillMode is invalid: "+e),this}addPublishStreamUrls(e){var t,n;const r=/^rtmp:\/\/.+/;if(!Object(i["isArray"])(e)||0===e.length||e.some(e=>!r.test(e)))return o.error("urls is invalid: "+e),this;const s=(null===(n=null===(t=this._values.output)||void 0===t?void 0:t.cdn)||void 0===n?void 0:n.concat())||[];let a=!1;return e.forEach(e=>{s.some(t=>t.pushurl===e)||(a=!0,s.push({pushurl:e}))}),s.length>5?(o.error("publish stream url no more than 5"),this):(a&&this._addOutputValue("cdn",s),this)}removePublishStreamUrls(e){var t,n;const r=/^rtmp:\/\/.+/;if(!Object(i["isArray"])(e)||0===e.length||e.some(e=>!r.test(e)))return o.error("urls is invalid: "+e),this;const s=(null===(n=null===(t=this._values.output)||void 0===t?void 0:t.cdn)||void 0===n?void 0:n.concat())||[];for(let i=s.length-1;i>=0;i-=1){const{pushurl:t}=s[i],n=e.indexOf(t);n>=0&&(e.splice(n,1),s.splice(i,1))}return this._addOutputValue("cdn",s),this}clearPublishStreamUrls(){return this._addOutputValue("cdn",[]),this}addCustomizeLayoutVideo(e,t,n,r,s){if(!this._isValidTrackId(e))return o.error("trackId is invalid: "+e),this;if(!Object(i["isNumber"])(t)||!Object(i["isNumber"])(n))return o.error(`some attrs of (x, y) is invalid: ${t}, ${n}`),this;if([r,s].some(e=>!Object(i["isNumber"])(e)||e<0))return o.error(`some attrs of (width, height) is invalid: ${r}, ${s}`),this;const{userId:a,tag:c,mediaType:l}=et(e);if(l!==we.VIDEO_ONLY)return o.error("kind of resource is not 'video': "+e),this;const u=tt(a,c);return(this._values.input||(this._values.input={video:[]})).video.push({user_id:a,stream_id:u,x:t,y:n,width:r,height:s}),this}removeCustomizeLayoutVideo(e){if(!this._isValidTrackId(e))return o.error("trackId is invalid: "+e),this;const{userId:t,tag:n,mediaType:i}=et(e);if(i!==we.VIDEO_ONLY)return o.error("kind of resource is not 'video': "+e),this;const r=tt(t,n),s=this._values.input||(this._values.input={video:[]});return s.video=s.video.filter(e=>e.stream_id===r),this}clearCustomizeLayoutVideo(){return(this._values.input||(this._values.input={video:[]})).video=[],this}flush(){var e,t,n,i;return r(this,void 0,void 0,(function*(){const r=JSON.parse(JSON.stringify(this._values)),{code:o}=yield this._onFlush(r);return o===s.SUCCESS&&((null===(t=null===(e=this._values.output)||void 0===e?void 0:e.video.normal)||void 0===t?void 0:t.width)||(null===(i=null===(n=this._values.output)||void 0===n?void 0:n.video.normal)||void 0===i?void 0:i.fps))&&this._sendCDNInfoSignal(),this._values=Kt(),{code:o}}))}}var qt,Gt,zt,Yt;!function(e){e[e.OPEN=1]="OPEN",e[e.STOP=2]="STOP"}(qt||(qt={})),function(e){e[e.SPREAD=0]="SPREAD",e[e.NO_SPREAD=-1]="NO_SPREAD"}(Gt||(Gt={})),function(e){e[e.AUTOMATIC=0]="AUTOMATIC",e[e.MANUAL=1]="MANUAL"}(zt||(zt={})),function(e){e[e.VIDEO=0]="VIDEO",e[e.AUDIO=1]="AUDIO"}(Yt||(Yt={}));const Jt=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}));class Xt{constructor(e,t,n,i,r,o,s,a,c){this._PKInfo=e,this._context=t,this._runtime=n,this._service=i,this._initOptions=r,this._mainLivingRoom=o,this._registerPKMsgListener=s,this._onJoinedPKRoom=a,this._onLeavePKRoom=c,this._inviteTimeout=30,this._appListener=null,this._joinedPKRooms={},this._registerPKMsgListener(this._onRecvPKMsg.bind(this)),this._mainRoomId=this._mainLivingRoom.getRoomId()}_callAppListener(e,...t){var n;const i=null===(n=this._appListener)||void 0===n?void 0:n[e];if(i)try{i(...t)}catch(e){o.error(e)}}_onInvite(e){const t=e.inviteInfo||{},{inviterRoomId:n,inviterUserId:i,extra:r}=t,o={inviterRoomId:n,inviterUserId:i};r&&Object.assign(o,{extra:r}),this._PKInfo[n]=t,this._callAppListener("onRequestJoinOtherRoom",o)}_onCancelInvite(e){const{inviterRoomId:t,inviterUserId:n,extra:i}=e.inviteInfo||{},r={inviterRoomId:t,inviterUserId:n};i&&Object.assign(r,{extra:i}),delete this._PKInfo[t],this._callAppListener("onCancelRequestOtherRoom",r)}_onInviteTimeout(e){}_onInviteAnswer(e){const{answerCode:t,inviteContent:n}=e,{inviteSessionId:i,inviterUserId:r,inviterRoomId:o,inviteeUserId:s,inviterUserAutoMix:a,inviteeUserAutoMix:c,inviteeRoomId:l,extra:u}=n,d={agree:1===t,inviterRoomId:o,inviterUserId:r,inviteeRoomId:l,inviteeUserId:s};this._PKInfo[l]=this._PKInfo[l]||{inviteSessionId:i,inviterRoomId:o,inviterUserId:r,inviterUserAutoMix:a,inviteeRoomId:l},this._PKInfo[l].inviteeUserAutoMix=c,this._callAppListener("onResponseJoinOtherRoom",d)}_onPKEnd(e){return r(this,void 0,void 0,(function*(){const{inviteeRoomId:t,inviterRoomId:n,userId:i}=e.inviteInfo,r=n===this._mainRoomId?t:n,o={endRoomId:r,endUserId:i};this._joinedPKRooms[r]&&(yield this.leaveOtherRoom(this._joinedPKRooms[r])),delete this._PKInfo[r],this._callAppListener("onFinishOtherRoom",o)}))}_onRecvPKMsg(e){const{targetId:t,content:n,messageType:i}=e;switch(i){case gt.PK_INVITE:this._onInvite(n);break;case gt.PK_CANCEL_INVITE:this._onCancelInvite(n);break;case gt.PK_INVITE_TIMEOUT:this._onInviteTimeout(n);break;case gt.PK_INVITE_ANSWER:this._onInviteAnswer(n);break;case gt.PK_END:this._onPKEnd(n)}}registerRoomPKEventListener(e){this._appListener=e}requestJoinOtherRoom(e,t,n){return r(this,void 0,void 0,(function*(){if(!Object(i["validate"])("inviteeRoomId",e,i["notEmptyString"],!0)||!Object(i["validate"])("inviteeUserId",t,i["notEmptyString"],!0))return{code:s.PARAMS_ERROR};o.info(`requestRoomPK -> inviteeRoomId: ${e}; inviteeUserId: ${t}; options: ${JSON.stringify(n||{})}`);const r=Jt(),a=!Object(i["isBoolean"])(null==n?void 0:n.autoMix)||(null==n?void 0:n.autoMix),c={inviteSessionId:r,inviterRoomId:this._mainRoomId,inviterUserId:this._context.getCurrentId(),inviterUserAutoMix:a,inviteeRoomId:e,inviteeUserId:t,inviteeTimeoutTime:this._inviteTimeout,extra:(null==n?void 0:n.extra)||""},l={roomId:this._mainRoomId,invitedRoomId:e,invitedUserId:t,inviteTimeout:this._inviteTimeout,inviteInfo:JSON.stringify(c),inviteSessionId:r};o.info("requestRoomPK -> params: "+JSON.stringify(l));const u=yield this._context.requestRoomPK(l);return u!==i["ErrorCode"].SUCCESS?(o.error("requestRoomPK failed: "+u),{code:u}):(o.info("requestRoomPK success"),this._PKInfo[e]={inviteSessionId:r,inviterRoomId:this._mainRoomId,inviterUserId:this._context.getCurrentId(),inviterUserAutoMix:a,inviteeRoomId:e},{code:s.SUCCESS})}))}cancelRequestJoinOtherRoom(e,t,n){return r(this,void 0,void 0,(function*(){if(!Object(i["validate"])("inviteeRoomId",e,i["notEmptyString"],!0)||!Object(i["validate"])("inviteeUserId",t,i["notEmptyString"],!0))return{code:s.PARAMS_ERROR};if(!this._PKInfo[e])return o.error(`未发起过与 ${e} 房间内 ${t} 连麦的请求`),{code:s.PARAMS_ERROR};o.info(`canceRequestJoinPK -> inviteeRoomId: ${e}; inviteeUserId: ${t}; extra: ${n}`);const r={inviterRoomId:this._mainRoomId,inviterUserId:this._context.getCurrentId(),inviteeRoomId:e,inviteeUserId:t,extra:n||""},a={roomId:this._mainRoomId,invitedRoomId:e,invitedUserId:t,inviteSessionId:this._PKInfo[e].inviteSessionId,inviteInfo:JSON.stringify(r)};o.info("canceRequestJoinPK -> params: "+JSON.stringify(a));const c=yield this._context.cancelRoomPK(a);return c!==i["ErrorCode"].SUCCESS?(o.error("canceRequestJoinPK failed: "+c),{code:c}):(o.info("canceRequestJoinPK success"),delete this._PKInfo[e],{code:s.SUCCESS})}))}responseJoinOtherRoom(e,t,n,a){return r(this,void 0,void 0,(function*(){if(!Object(i["validate"])("inviterRoomId",e,i["notEmptyString"],!0)||!Object(i["validate"])("inviterUserId",t,i["notEmptyString"],!0))return{code:s.PARAMS_ERROR};if(!this._PKInfo[e])return o.error(`${e} 房间内的 ${t} 未发起过连麦请求`),{code:s.PARAMS_ERROR};o.info(`responseRoomPK -> inviterRoomId: ${e}; inviterUserId: ${t}; agree: ${n}; options: ${JSON.stringify(a||{})}`);const{inviteSessionId:r,inviterUserAutoMix:c}=this._PKInfo[e],l=!Object(i["isBoolean"])(null==a?void 0:a.autoMix)||(null==a?void 0:a.autoMix),u={inviteSessionId:r,inviterRoomId:e,inviterUserId:t,inviterUserAutoMix:c,inviteeRoomId:this._mainRoomId,inviteeUserId:this._context.getCurrentId(),inviteeUserAutoMix:l},d=Object.assign(u,{inviterUserAutoMix:c}),h=n?Object.assign(u,{MultiRoomKey:`${e}|${this._mainRoomId}`,MultiRoomValue:JSON.stringify(d)}):u;!Object(i["isUndefined"])(null==a?void 0:a.extra)&&Object.assign(h,{extra:a.extra});const p={agree:n,roomId:this._mainRoomId,inviteSessionId:r,inviteRoomId:e,inviteUserId:t,content:JSON.stringify(h),key:`${e}|${this._mainRoomId}`,value:JSON.stringify(u)};o.info("responseRoomPK -> params: "+JSON.stringify(p));const f=yield this._context.responseRoomPK(p);return f!==i["ErrorCode"].SUCCESS?(o.error("responseRoomPK failed: "+f),{code:f}):(o.info("responseRoomPK success"),this._PKInfo[e].inviteeUserAutoMix=l,{code:s.SUCCESS})}))}_quitRoomPK(e){return r(this,void 0,void 0,(function*(){const{inviterRoomId:t,inviteeRoomId:n,inviterUserId:r}=this._PKInfo[e],a={inviteeRoomId:n,inviterRoomId:t,userId:this._context.getCurrentId()},c={roomId:this._mainRoomId,endRoomId:e,sessionId:this._PKInfo[e].inviteSessionId,content:JSON.stringify(a),keys:[`${t}|${r}`]};o.info("quitRoomPK -> params: "+JSON.stringify(c));const l=yield this._context.endRoomPK(c);return l!==i["ErrorCode"].SUCCESS?(o.error("quitRoomPK failed: "+l),{code:s.SIGNAL_ERROR}):(o.info("quitRoomPK success"),delete this._PKInfo[e],{code:s.SUCCESS})}))}_relaseCrtRoom(){}joinOtherRoom(e){return r(this,void 0,void 0,(function*(){if(!Object(i["validate"])("roomId",e,i["notEmptyString"],!0))return{code:s.PARAMS_ERROR};if(this._context.getConnectionStatus()!==i["ConnectionStatus"].CONNECTED)return{code:s.SIGNAL_DISCONNECTED};if(o.info("JoinPKRoom, roomId: "+e),this._joinedPKRooms[e])return{code:s.REPERT_JOIN_ROOM};const t=Yt.VIDEO,n={extra:`{"roomId": "${this._mainRoomId}"}`},{code:r,data:a}=yield this._context.joinRTCRoom(e,i["RTCMode"].LIVE,t,void 0,n);if(r!==i["ErrorCode"].SUCCESS)return o.error("JoinPKRoom failed -> code: "+r),{code:r};o.info(`JoinPKRoom success -> userId: ${this._context.getCurrentId()}, roomId: ${e}, data: ${JSON.stringify(a)}`);const c=new Qt(this._context,this._runtime,e,a,this._service,this._initOptions,this._relaseCrtRoom.bind(this),t,!1,!1);return this._joinedPKRooms[e]=c,this._onJoinedPKRoom(e,c),{room:c,code:s.SUCCESS,userIds:c.getRemoteUserIds(),tracks:c.getRemoteTracks()}}))}leaveOtherRoom(e,t){return r(this,void 0,void 0,(function*(){return u(()=>r(this,void 0,void 0,(function*(){const n=e.getRoomId();return o.info(`leavePKRoom -> userId: ${this._context.getCurrentId()} , roomId: ${n}`),yield e.__destroy(!0),delete this._joinedPKRooms[n],this._onLeavePKRoom(n),this._PKInfo[n]?(t&&this._quitRoomPK(n),{code:s.SUCCESS}):{code:s.SUCCESS}})))}))}getPKInfo(e){return this._PKInfo[e]}getAllPKInfo(){return this._PKInfo}getJoinedPKRooms(){return this._joinedPKRooms}}class Qt extends jt{constructor(e,t,n,r,o,s,a,c,l=!1,u){var d;if(super(e,t,n,r,i["RTCMode"].LIVE,o,s,a,l,u),this._livingType=c,this._isMainRoom=u,this._CDNUris=null,this._CDNEnable=!1,this._mcuConfigBuilder=new Wt(this._onMCUConfigFlush.bind(this),this._isValidResourceId.bind(this),this._sendCDNInfoSignal.bind(this)),this._isMainRoom){const n=((e,t)=>{const n={};return t.forEach(t=>{const i=JSON.parse(t.value),{inviterRoomId:r,inviteeRoomId:o}=i;n[e===r?o:r]=JSON.parse(t.value)}),n})(this._roomId,r.roomInfo);this._roomPKHandler=new Xt(n,e,t,o,s,this,super._registerPKMsgListener.bind(this),this._onJoinedPKRoom.bind(this),this._onLeavePKRoom.bind(this))}const h=null===(d=r.roomInfo.filter(e=>"cdn_uris"===e.key)[0])||void 0===d?void 0:d.value;h&&(this._CDNUris=JSON.parse(h)[0])}_isValidResourceId(e){var t;const{userId:n}=et(e),i=!!(null===(t=this._roomResources[n])||void 0===t?void 0:t.find(t=>Ze(t)===e));let r=!1;const{code:o,roomPKHandler:a}=this.getRoomPKHandler();if(o!==s.SUCCESS||!a)return i;const c=a.getJoinedPKRooms(),l=[];return Object.values(c).map(e=>{l.push(...e.getRemoteTracks())}),r=l.some(t=>e===t.getTrackId()),i||r}getLivingType(){return this._livingType}getMCUConfigBuilder(){return this._isMainRoom?this._mcuConfigBuilder:(o.error("the `getMCUConfigBuilder` is disabled in PK room"),{code:s.THE_FUNCTION_IS_DISABLED_IN_PKROOM})}_onMCUConfigFlush(e){return r(this,void 0,void 0,(function*(){const t={"App-Key":this._context.getAppkey(),Token:this._token,RoomId:this.getRoomId(),UserId:this._context.getCurrentId(),SessionId:this.getSessionId()},{code:n,res:i}=yield this._service.setMcuConfig(t,e);return n!==s.SUCCESS?(o.error("set MCU config failed: "+n),{code:n}):(o.info("set MCU config success"),i.pull_url&&(this._CDNUris=JSON.parse(i.pull_url)),{code:n,res:i})}))}__onReconnected(){const e=Object.create(null,{__onReconnected:{get:()=>super.__onReconnected}});var t,n;return r(this,void 0,void 0,(function*(){const i=yield e.__onReconnected.call(this,this._livingType);if(!i||!i.data)return;const r=i.data.roomInfo,o=null===(t=r.filter(e=>"cdn_uris"===e.key)[0])||void 0===t?void 0:t.value;if(!o)return;const s=JSON.parse(o);(null===(n=this._CDNUris)||void 0===n?void 0:n.enableInnerCDN)!==s.enableInnerCDN&&this._callAppListener("onCDNEnableChange",s.enableInnerCDN),this._CDNUris=s}))}enableInnerCDN(e){return r(this,void 0,void 0,(function*(){if(!this._isMainRoom)return o.error("the `enableInnerCDN` is disabled in PK room"),{code:s.THE_FUNCTION_IS_DISABLED_IN_PKROOM};if(!Object(i["isBoolean"])(e))return o.error("`enable` is invalid"),{code:s.PARAMS_ERROR};this._CDNEnable=e;const t={version:2,output:{inCDNModel:e?qt.OPEN:qt.STOP}},{code:n}=yield this._onMCUConfigFlush(t);if(n!==s.SUCCESS)return o.error("enableInnerCDN failed -> code: "+n),{code:s.SIGNAL_ERROR};if(this._CDNUris&&this._CDNUris.broadcast!==Gt.SPREAD)return o.info("enableInnerCDN succeed"),{code:s.SUCCESS};const{code:a}=yield u(()=>r(this,void 0,void 0,(function*(){return this._sendCDNInfoSignal()})));return a===s.SUCCESS?(o.info("enableInnerCDN succeed"),{code:s.SUCCESS}):(o.error("enableInnerCDN failed -> code: "+a),{code:a})}))}_sendCDNInfoSignal(){return r(this,void 0,void 0,(function*(){return this._CDNUris=Object.assign({},this._CDNUris,{enableInnerCDN:this._CDNEnable}),(yield Promise.all([this._spreadCDNInfo(this._CDNUris),this._setRoomCDNInfo(this._CDNUris)])).every(e=>e.code===s.SUCCESS)?{code:s.SUCCESS}:{code:s.SIGNAL_ERROR}}))}_spreadCDNInfo(e){return r(this,void 0,void 0,(function*(){const t=yield this._context.setRTCCDNUris(this._roomId,gt.TOTAL_CONTENT_RESOURCE,JSON.stringify([e]));return t!==i["ErrorCode"].SUCCESS?(o.error("spreadCDNInfo failed -> code: "+t),{code:s.SIGNAL_ERROR}):(o.info("spreadCDNInfo succeed"),{code:s.SUCCESS})}))}_setRoomCDNInfo(e){return r(this,void 0,void 0,(function*(){const t=yield this._context.setRTCData(this._roomId,"cdn_uris",JSON.stringify([e]),!0,i["RTCApiType"].ROOM);return t!==i["ErrorCode"].SUCCESS?(o.error("setRoomCDNInfo failed -> code: "+t),{code:s.SIGNAL_ERROR}):(o.info("setRoomCDNInfo succeed"),{code:s.SUCCESS})}))}_resourceHandle(e,t,n){const i=Object.create(null,{_resourceHandle:{get:()=>super._resourceHandle}});var o;return r(this,void 0,void 0,(function*(){i._resourceHandle.call(this,e,t,n),e.cdn_uris&&((null===(o=this._CDNUris)||void 0===o?void 0:o.enableInnerCDN)!==e.cdn_uris[0].enableInnerCDN&&this._callAppListener("onCDNEnableChange",!this.__getCDNEnable()),this._CDNUris=e.cdn_uris[0])}))}_exchangeHandle(e){var t,n,i;return r(this,void 0,void 0,(function*(){const r=yield this._service.exchange(this._getRTCReqestHeaders(),e),o=null===(n=null===(t=r.data)||void 0===t?void 0:t.urls)||void 0===n?void 0:n.pull_url;return r.code===s.SUCCESS&&o?(this._CDNUris=JSON.parse(o),(null===(i=this._CDNUris)||void 0===i?void 0:i.broadcast)===Gt.SPREAD&&(this._CDNEnable=!0,this._sendCDNInfoSignal()),r):r}))}_afterChangedRole(e){const t=ft(e,this._roomId),n=this._context.getCurrentId(),i=Object.keys(t);setTimeout(()=>{var r,o,s;const a=i.filter(e=>e!==n);a.length>0&&this._callAppListener("onUserJoin",a);for(const e in t)e!==n&&this._resourceHandle({uris:t[e]},gt.TOTAL_CONTENT_RESOURCE,e);(null===(r=e.roomInfo.filter(e=>"cdn_uris"===e.key)[0])||void 0===r?void 0:r.value)&&(null===(o=this._CDNUris)||void 0===o?void 0:o.push_mode)===zt.MANUAL&&this._callAppListener("onCDNEnableChange",null===(s=this._CDNUris)||void 0===s?void 0:s.enableInnerCDN)})}__getCDNEnable(){var e;return null===(e=this._CDNUris)||void 0===e?void 0:e.enableInnerCDN}__getCDNPushMode(){var e;return null===(e=this._CDNUris)||void 0===e?void 0:e.push_mode}_onJoinedPKRoom(e,t){const{code:n,roomPKHandler:i}=this.getRoomPKHandler();if(n===s.SUCCESS&&i){if(!i.getPKInfo(e))return;this._exchangeWithPushOtherRoom()}}_onLeavePKRoom(e){const{code:t,roomPKHandler:n}=this.getRoomPKHandler();if(t===s.SUCCESS&&n){if(!n.getPKInfo(e))return;this._exchangeWithPushOtherRoom()}}_exchangeWithPushOtherRoom(){return r(this,void 0,void 0,(function*(){if(!this.getLocalTracks().length)return;const e=yield this._createExchangeParams(this._subscribedList,!1),t=this._getPushOtherRoomsParams();t&&(e.pushOtherRooms=t);const n=yield this._exchangeHandle(e);if(n.code!==s.SUCCESS)return o.error("reTryExchange failed: "+n.code),{code:n.code};const{sdp:i,resultCode:r}=n.data;if(r!==s.SUCCESS)return o.error("exchange with pushOtherRoom failed: "+r),{code:r};const a=yield this._pc.setRemoteAnswer(i.sdp);return a!==s.SUCCESS?{code:a}:void 0}))}getRoomPKHandler(){return this._isMainRoom?{code:s.SUCCESS,roomPKHandler:this._roomPKHandler}:(o.error("the `getRoomPKHandler` is disabled in PK room"),{code:s.THE_FUNCTION_IS_DISABLED_IN_PKROOM})}_quitAllPKRoom(){const e=this._roomPKHandler.getJoinedPKRooms();for(const t in e){const n=e[t];this._roomPKHandler.leaveOtherRoom(n)}}isMainRoom(){return this._isMainRoom}}class Zt extends jt{constructor(e,t,n,r,o,s,a){super(e,t,n,r,i["RTCMode"].RTC,o,s,a,!1)}}const en=()=>({"Content-Type":"application/json;charset=UTF-8","Cache-Control":"no-cache",ClientType:`web|${lt.browser}|${lt.version}`,ClientVersion:"5.3.2","Client-Session-Id":Jt(),"Request-Id":Date.now().toString()});class tn{constructor(e,t,n,i=5e3){this._runtime=e,this._context=t,this._msUrl=n,this._timeout=i,this._msInNavi=[],this._failedMs=[],this._rtcFinger=void 0,this._clusterId="",this._configUrl=""}getNaviMS(){return this._msUrl?[this._msUrl]:this._clusterId?["https://"+this._clusterId]:(0===this._msInNavi.length&&(0===this._failedMs.length?this._msInNavi.push(...(e=>{var t;if(!e)return[];let n;try{n=JSON.parse(e.voipCallInfo||'{ "strategy": 0 }')}catch(t){return o.warn("parse `voipCallInfo` of navi failed: "+e.voipCallInfo),[]}if(0===n.strategy)return[];const i=null===(t=n.callEngine)||void 0===t?void 0:t.filter(e=>4===e.engineType);if(!i||0===i.length)return[];const r=i[0],s=[];return r.mediaServer&&s.push(r.mediaServer.replace(/^(https?:\/\/)?/,"https://")),r.backupMediaServer&&r.backupMediaServer.forEach(e=>{s.push(e.replace(/^(https?:\/\/)?/,"https://"))}),s})(this._context.getNaviInfo())):(this._msInNavi.push(...this._failedMs),this._failedMs.length=0)),this._msInNavi.map(e=>e.trim()))}_request(e,t,n){return r(this,void 0,void 0,(function*(){const r=this.getNaviMS();if(0===r.length)return{code:s.NOT_OPEN_VIDEO_AUDIO_SERVER};this._rtcFinger&&(n.rtcFinger=this._rtcFinger);for(let a=0;a<r.length;a+=1){const c=`${r[a]}${e}`,l=en();o.debug(`request -> Request-Id: ${l["Request-Id"]}, url: ${c}`);const{status:u,data:d}=yield this._runtime.httpReq({url:c,body:JSON.stringify(n),headers:Object.assign(Object.assign({},l),t),method:i["HttpMethod"].POST,timeout:this._timeout});if(200===u){const e=JSON.parse(d);return e.rtcFinger&&(this._rtcFinger=e.rtcFinger),e.clusterId&&(this._clusterId=e.clusterId),o.debug("request success -> Request-Id: "+l["Request-Id"]),{code:s.SUCCESS,data:e}}o.warn(`request failed -> Request-Id: ${l["Request-Id"]}, status: ${u}, url: ${c}`),this._failedMs.push(...this._msInNavi.splice(a,1))}return{code:s.REQUEST_FAILED}}))}exchange(e,t){var n;return r(this,void 0,void 0,(function*(){const i=yield this._request("/exchange",e,t);if(i.code===s.SUCCESS&&(null===(n=i.data)||void 0===n?void 0:n.resultCode)===s.SUCCESS){const e=i.data.urls;e&&(this._configUrl=e.configUrl)}return i}))}exit(e){return r(this,void 0,void 0,(function*(){const{code:t}=yield this._request("/exit",e,{});return t}))}broadcastSubscribe(e,t){return this._request("/broadcast/subscribe",e,t)}broadcastExit(e){return r(this,void 0,void 0,(function*(){const{code:t}=yield this._request("/broadcast/exit",e,{});return{code:t}}))}setMcuConfig(e,t){return r(this,void 0,void 0,(function*(){if(!this._configUrl)return{code:s.MCU_SERVER_NOT_FOUND};const n=this._configUrl.replace(/^(https?:\/\/)?/,"https://")+"/server/mcu/config",r=en();o.debug(`request -> Request-Id: ${r["Request-Id"]}, url: ${n}`);const{status:a,data:c}=yield this._runtime.httpReq({url:n,headers:Object.assign(Object.assign({},r),e),body:JSON.stringify(t),method:i["HttpMethod"].POST});if(200===a){o.debug("request success -> Request-Id: "+r["Request-Id"]);const e=JSON.parse(c);return{code:e.resultCode,res:e}}return{code:s.REQUEST_FAILED}}))}getCDNResourceInfo(e,t){return r(this,void 0,void 0,(function*(){const n=en(),{status:r,data:a}=yield this._runtime.httpReq({url:t,headers:Object.assign(Object.assign({},n),e),method:i["HttpMethod"].GET});if(200===r){const e=JSON.parse(a);return{code:e.resultCode,res:e}}return o.warn(`request failed -> Request-Id: ${n["Request-Id"]}, status: ${r}, url: ${t}`),{code:s.REQUEST_FAILED}}))}}class nn{constructor(e,t,n){this._context=e,this._rtcToken="",this._liveUrl="",this._subTracks=[],this._livingType=null,this._mediaType=null,this._subTiny=!1,this._fromRetry=!1,this._appListener=null,this._service=new tn(t,e,n.mediaServer)}_getReqHeaders(e){return r(this,void 0,void 0,(function*(){const t=this._context.getCurrentId(),n=t;if(!this._rtcToken){const{code:t,data:r}=yield this._context.getRTCToken(n,i["RTCMode"].LIVE,e);if(t!==i["ErrorCode"].SUCCESS)return o.error("getRTCToken failed: "+t),{code:s.SIGNAL_ERROR};this._rtcToken=r.rtcToken}return{code:s.SUCCESS,headers:{"App-Key":this._context.getAppkey(),UserId:t,RoomId:n,RoomType:i["RTCMode"].LIVE,Token:this._rtcToken}}}))}_clearSubscribeInfo(){var e;this._liveUrl="",this._livingType=null,this._mediaType=null,this._subTiny=!1,this._subTracks.length=0,null===(e=this._pc)||void 0===e||e.destroy(),this._pc=null}_reTryExchange(){var e;return r(this,void 0,void 0,(function*(){this._fromRetry=!0;const{code:t}=yield this.subscribe(this._liveUrl,this._livingType,this._mediaType,this._subTiny);t===s.SUCCESS&&(null===(e=this._pc)||void 0===e||e.clearReTryExchangeTimer())}))}subscribe(e,t,n,i=!1){return r(this,void 0,void 0,(function*(){return u(()=>this.__subscribe(e,t,n,i))}))}__subscribe(e,t,n,a=!1){var c;return r(this,void 0,void 0,(function*(){const r=[];if(pt(this._context.getNaviInfo()))return{code:s.PACKAGE_ENVIRONMENT_ERROR,tracks:r};if(!this._fromRetry&&(null===(c=this._pc)||void 0===c||c.clearReTryExchangeTimer()),this._fromRetry=!1,!Object(i["isString"])(e))return o.error("liveUrl is invalid: "+e),{code:s.PARAMS_ERROR,tracks:r};if(![Yt.AUDIO,Yt.VIDEO].includes(t))return o.error("livingType is invalid: "+t),{code:s.PARAMS_ERROR,tracks:r};if(![we.AUDIO_ONLY,we.VIDEO_ONLY,we.AUDIO_VIDEO].includes(n))return o.error("mediaType is invalid: "+n),{code:s.PARAMS_ERROR,tracks:r};if(this._liveUrl&&this._liveUrl!==e)return{code:s.BROADCAST_SUB_LIST_NOT_EMPTY,tracks:r};this._pc||(this._pc=new xt(this._reTryExchange.bind(this)),this._pc.on(xt.__INNER_EVENT_TRACK_READY__,this._onTrackReady,this),this.registerReportListener(this._reportListener)),this._liveUrl=e;const{code:l,headers:u}=yield this._getReqHeaders(t);if(l!==s.SUCCESS)return{code:l,tracks:r};const d="rc_mcu_"+Date.now(),h="RongCloudRTC";0===this._subTracks.length&&(this._subTracks.push(new Ke(h,d),new We(h,d)),this._pc.updateSubRemoteTracks(this._subTracks.slice()));const p={sdp:yield this._pc.createOffer(!0),liveUrl:e,mediaType:n,simulcast:a?_t.TINY:_t.NORMAL,switchstream:!1},f=yield this._service.broadcastSubscribe(u,p);if(f.code!==s.SUCCESS)return o.error("andience subscribe failed: "+f.code),{code:f.code,tracks:r};const g=f.data;if(g.resultCode!==s.SUCCESS)return o.error(`andience subscribe failed! code: ${g.resultCode}; message: ${g.message}`),{code:g.resultCode,tracks:r};o.debug("andience subscribe success: "+e),this._livingType=t,this._mediaType=n,this._subTiny=a;const{sdp:m,subscribedList:_}=g,v=[];return _.forEach(e=>{const{mediaType:t}=e,n=this._subTracks[t];v.push(n),n.__innerSetRemoteMuted(!0)}),this._pc.setRemoteAnswer(m.sdp),{code:s.SUCCESS,tracks:v}}))}unsubscribe(){return r(this,void 0,void 0,(function*(){return u(()=>this.__unsubscribe())}))}__unsubscribe(){var e;return r(this,void 0,void 0,(function*(){if(null===(e=this._pc)||void 0===e||e.clearReTryExchangeTimer(),!this._rtcToken||!this._liveUrl)return{code:s.SUCCESS};const{headers:t}=yield this._getReqHeaders(),{code:n}=yield this._service.broadcastExit(t);return n!==s.SUCCESS?o.error("broadcast unsubscribe failed: "+n):o.debug("broadcast unsubscribe success"),this._clearSubscribeInfo(),{code:n}}))}registerReportListener(e){var t;this._reportListener=e,null===(t=this._pc)||void 0===t||t.registerReportListener(e)}registerTrackEventListener(e){this._appListener=e}_onTrackReady(e){var t,n;const i=e.receiver.track,r="audio"===i.kind?we.AUDIO_ONLY:we.VIDEO_ONLY,s=this._subTracks[r];s.__innerSetMediaStreamTrack(i);try{null===(n=null===(t=this._appListener)||void 0===t?void 0:t.onTrackReady)||void 0===n||n.call(t,s)}catch(e){o.error(e)}}}var rn,on;!function(e){e.RTMP="rtmp",e.FLV="flv",e.HLS="hls"}(rn||(rn={})),function(e){e[e.NOT_HTTPS=0]="NOT_HTTPS",e[e.HTTPS=1]="HTTPS"}(on||(on={}));const sn=Object.assign(Object.assign({},ot(Ie.W176_H144)),{frameRate:ct(Re.FPS_15)});class an{constructor(e,t,n,i,r,s){this._context=e,this._runtime=t,this._initOptions=n,this._roomId=i,this._joinResData=r,this._livingType=s,this._roomAnchorList=[],this._roomRes={},this._roomAnchorRes={},this._remoteTracks={},this._appListener=null,this._subscribedList=[],this._sessionId="",this._destroyed=!1,this._setInitData(),this._service=new tn(this._runtime,this._context,this._initOptions.mediaServer,this._initOptions.timeout),this._polarisReport=new Ut(this._context,this._runtime,this._roomId,this,At.Audience),this._polarisReport.sendR1(),this._pc=new xt(this._reTryExchange.bind(this),this._polarisReport),this._pc.on(xt.__INNER_EVENT_TRACK_READY__,e=>{const t=e.streams[0].id,n=e.receiver.track,i=[t,"audio"===n.kind?we.AUDIO_ONLY:we.VIDEO_ONLY].join("_"),r=this._remoteTracks[i];r?(r.__innerSetMediaStreamTrack(n),this._callAppListener("onTrackReady",r)):o.warn("cannot found RCRemoteTrack:",n.id)}),this._context.onrtcdatachange=this.singalDataChange.bind(this)}_setInitData(){const{sessionId:e,remoteUserIds:t,remoteRTCUris:n,remoteMUCUris:i,remoteTracks:r,CDNUris:o}=((e,t)=>{const n=t.filter(e=>"RC_RTC_SESSIONID"===e.key)[0],i=n?n.value:"",r=t.filter(e=>"RC_ANCHOR_LIST"===e.key).map(e=>JSON.parse(e.value||"[]"))[0],o=t.filter(e=>e.key.includes("RC_RES_")).map(e=>JSON.parse(e.value||"{}")),s=o.length?JSON.parse(o[0].mcu_uris||"[]"):[],a=[];s.forEach(t=>{const{mediaType:n,tag:i}=t,r=n===we.AUDIO_ONLY?new Ke(i,"",e):new We(i,"",e);a.push(r)});const c=[],l=[];o.forEach(e=>{const t=JSON.parse(e.uris||"[]");c.push(...t),t.forEach(e=>{const{mediaType:t,tag:n,msid:i}=e,r=i.split("_")[0],o=t===we.AUDIO_ONLY?new Ke(n,r):new We(n,r);l.push(o)})});const u=t.filter(e=>"RC_CDN"===e.key).map(e=>{const t=JSON.parse(e.value||"[]");return JSON.parse(t.cdn_uris)[0]})[0];return{sessionId:i,remoteUserIds:r||[],remoteRTCUris:c,remoteMUCUris:s,remoteRTCTracks:l,remoteMCUTracks:a,remoteTracks:[...l,...a],CDNUris:u||{}}})(this._roomId,this._joinResData.kvEntries);this._sessionId=e,this._roomAnchorList=t,r.forEach(e=>{this._remoteTracks[e.getTrackId()]=e}),this._CDNUris=o,n.forEach(e=>{const t=e.msid.split("_")[0];this._roomAnchorRes[t]?this._roomAnchorRes[t].push(e):this._roomAnchorRes[t]=[e]}),i.forEach(e=>{const{mediaType:t,tag:n}=e,i=[this._roomId,n,t].join("_");this._roomRes[i]=e}),n.forEach(e=>{const t=Ze(e);this._roomRes[t]=e})}_assertRoomDestroyed(){if(this._destroyed){const e="This room has been destroyed. Please use `RCRTCClient.joinLivingRoomAsAudience` to catch another instance.";return o.warn(e),s.ROOM_HAS_BEEN_DESTROYED}}singalDataChange(e,t){var n;if(t!==this._roomId)return void o.warn(`singalDataChange -> not the current room data: data roomId: ${t}, current roomId: ${this._roomId}`);o.debug("singalDataChange -> singalData:",JSON.stringify(e||{}));const i=[],r=null===(n=e.filter(e=>"RC_CDN"===e.key)[0])||void 0===n?void 0:n.value;r&&this._diffCDNUris(JSON.parse(JSON.parse(r).cdn_uris)[0]),e.forEach(e=>{const{key:t,value:n,timestamp:r,uid:o}=e;if(-1!==t.indexOf("RC_RES_")){const e=JSON.parse(n||"{}"),t=JSON.parse(e.mcu_uris||"[]"),r=JSON.parse(e.uris||"[]");return i.push(...t),void this._diffAnchorResource(r,o)}if("RC_ANCHOR_LIST"===t){const e=JSON.parse(n||"[]"),{joinUserIds:t,leftUserIds:i}=this._diffAnchorList(e);t.length>0&&this._handleNewJoinedAnchor(t),i.length>0&&this._handleLeftedAnchor(i)}}),this._diffRoomResource(i)}_diffAnchorList(e){const t=e.filter(e=>this._roomAnchorList.indexOf(e)<0);return{leftUserIds:this._roomAnchorList.filter(t=>e.indexOf(t)<0),joinUserIds:t}}_handleNewJoinedAnchor(e){this._roomAnchorList.push(...e),this._callAppListener("onAnchorJoin",e)}_handleLeftedAnchor(e){return r(this,void 0,void 0,(function*(){this._roomAnchorList=this._roomAnchorList.filter(t=>!(e.indexOf(t)>-1));const t=[];e.forEach(e=>{t.push(...this.getRemoteTracksByUserId(e)),delete this._roomAnchorRes[e]}),t.length&&(yield this.unsubscribe(t),t.forEach(e=>delete this._remoteTracks[e.getTrackId()])),this._callAppListener("onAnchorLeave",e)}))}_diffRoomResource(e){return r(this,void 0,void 0,(function*(){const t=[],n=[],i=[];e.forEach(e=>{const n=Ze(e),{userId:r,tag:o,mediaType:s}=et(n),a=[this._roomId,o,s].join("_");if(!this._remoteTracks[a]){const n=s===we.AUDIO_ONLY?new Ke(o,"",this._roomId):new We(o,"",this._roomId);t.push(n),this._remoteTracks[a]=n,this._roomRes[n.getTrackId()]=e}i.push(a)}),Object.keys(this._remoteTracks).forEach(e=>{i.indexOf(e)<0&&this._remoteTracks[e].isMCUTrack()&&n.push(this._remoteTracks[e])}),t.length>0&&this._callAppListener("onTrackPublish",t),n.length>0&&this._onUserUnpublish(n,"onTrackUnpublish")}))}_diffAnchorResource(e,t){return r(this,void 0,void 0,(function*(){const n=this._roomAnchorRes[t]||(this._roomAnchorRes[t]=[]),{publishedList:i,unpublishedList:r,modifiedList:a}=it(n,e);if(i.length){const e=n.map(Ze),t=[],r=[];if(i.forEach(i=>{const o=Ze(i),s=e.indexOf(o),{userId:a,tag:c,mediaType:l}=et(o);s>-1?n[s]=i:n.push(i);let u=this._remoteTracks[o];this._roomRes[o]=i,u?u.isSubscribed()&&t.push(u):(u=l===we.AUDIO_ONLY?new Ke(c,a):new We(c,a),this._remoteTracks[o]=u,r.push(u)),u.__innerSetRemoteMuted(0===i.state)}),t.length){const e=t.map(e=>e.getTrackId());o.debug("resub tracks -> "+JSON.stringify(e));const{code:n}=yield u(()=>this._subscribeHandle(t,!0));n!==s.SUCCESS&&o.error(`resub tracks failed -> code: ${n}, ids: ${JSON.stringify(e)}`)}this._callAppListener("onAnchorTrackPublish",r)}if(r.length){const e=r.map(Ze);for(let i=n.length-1;i>=0;i-=1){const t=n[i];e.includes(Ze(t))&&n.splice(i,1)}const t=r.map(e=>{const t=Ze(e);return this._remoteTracks[t]});yield this._onUserUnpublish(t,"onAnchorTrackUnpublish")}if(a.length){const e=n.map(Ze);for(let t=0;t<a.length;t++){const i=a[t],r=Ze(i),o=e.indexOf(r);n[o].state=i.state;const s=this._remoteTracks[r];s.__innerSetRemoteMuted(0===i.state),s.isAudioTrack()?this._callAppListener("onAudioMuteChange",s):this._callAppListener("onVideoMuteChange",s)}}}))}_onUserUnpublish(e,t){return r(this,void 0,void 0,(function*(){yield this.unsubscribe(e),e.forEach(e=>{this._subscribedList=this._subscribedList.filter(t=>t.track.getTrackId()!==e.getTrackId()),delete this._roomRes[e.getTrackId()],e.__innerDestroy(),delete this._remoteTracks[e.getTrackId()]}),this._callAppListener(t,e)}))}_callAppListener(e,...t){var n;const i=null===(n=this._appListener)||void 0===n?void 0:n[e];if(i)try{i(...t)}catch(e){o.error(e)}}_reTryExchange(){return r(this,void 0,void 0,(function*(){u(()=>r(this,void 0,void 0,(function*(){var e;const{reqBody:t}=yield this._createSubscribeParams(this._subscribedList,{},!0),n=yield this._exchangeHandle(t);if(n.code!==s.SUCCESS)return o.error("reTryExchange failed: "+n.code),{code:n.code};const{sdp:i,resultCode:r}=n.data;if(r!==s.SUCCESS)return o.error("reTryExchange failed: "+r),{code:r};this._pc.clearReTryExchangeTimer();const a=this._subscribedList.filter(e=>e.track.isMCUTrack());if(a.length>0){const t=a[0].track.getTrackId(),n=null===(e=this._roomRes[t])||void 0===e?void 0:e.msid,r=[this._roomId,"RongCloudRTC"].join("_");i.sdp=i.sdp.replace(new RegExp(n,"g"),r)}const c=yield this._pc.setRemoteAnswer(i.sdp);return c!==s.SUCCESS?{code:c}:void 0})))}))}_createSubscribeParams(e,t,n){return r(this,void 0,void 0,(function*(){const i=yield this._pc.createOffer(n),r={resolutionInfo:[]},o={min:0,max:0};return Object.keys(t).forEach(e=>{const{mediaStream:n,tinyStream:s}=t[e];[n,s].forEach((t,n)=>{var s;const a=1===n?[e,"tiny"].join("_"):e;i.sdp=null===(s=i.sdp)||void 0===s?void 0:s.replace(new RegExp(t.id,"g"),a);const c=t.getVideoTracks()[0];if(!c)return;const l=0===n,{width:u,height:d,frameRate:h}=l?Xe(c):sn;r.resolutionInfo.push({trackId:c.id,simulcast:l?_t.NORMAL:_t.TINY,resolution:`${u}x${d}`});const p=ke(u,d),f=xe(h);o.min+=p.minBitrate*f,o.max+=p.maxBitrate*f})}),{reqBody:{sdp:i,switchstream:!1,newVersionFlag:!0,subscribeList:e.map(e=>({simulcast:e.subTiny?_t.TINY:_t.NORMAL,resolution:"",uri:this._roomRes[e.track.getTrackId()].uri}))},dynamicBitrate:o,offer:i}}))}_subscribeHandle(e,t=!1){var n;return r(this,void 0,void 0,(function*(){if(this._assertRoomDestroyed())return{code:s.ROOM_HAS_BEEN_DESTROYED};if(!Object(i["validate"])("tracks",e,()=>Object(i["isArray"])(e)&&e.length>0&&e.every(e=>e instanceof He||e.track instanceof He),!0))return{code:s.PARAMS_ERROR};const r=this._subscribedList.map(e=>Object.assign({},e)),o=e.map(e=>e instanceof He?{track:e}:e);let a=!1;const c=[];return o.forEach(e=>{const t=e.track.getTrackId();c.push(t);const n=r.find(e=>e.track.getTrackId()===t);n&&n.subTiny===e.subTiny||(n?n.subTiny=e.subTiny:r.push(e),a=!0)}),a||t?(null===(n=this._polarisReport)||void 0===n||n.sendR2(Dt.SUBSCRIBE,Nt.BEGIN,c),this._updateSubListHandle(r,!0)):{code:s.SUCCESS}}))}_getReqHeaders(){const e=this._context.getCurrentId();return{"App-Key":this._context.getAppkey(),RoomId:e,Token:this._joinResData.token,RoomType:i["RTCMode"].LIVE,UserId:e,"Session-Id":this._sessionId}}_exchangeHandle(e){return this._service.broadcastSubscribe(this._getReqHeaders(),e)}_updateSubListHandle(e,t=!1){var n;return r(this,void 0,void 0,(function*(){if(this._assertRoomDestroyed())return{code:s.ROOM_HAS_BEEN_DESTROYED};if(!Object(i["validate"])("resources",e,()=>Object(i["isArray"])(e)&&e.every(e=>e instanceof He||e.track instanceof He),!0))return{code:s.PARAMS_ERROR};let r=e.map(e=>e instanceof He?{track:e}:Object.assign({},e));const a={};r=r.filter(e=>{const t=e.track.getTrackId();return!a[t]&&(a[t]=!0)}).map(e=>Object.assign({},e));const c=this._subscribedList.map(e=>Object.assign({},e));if(!t){let e=!1;if(r.forEach(t=>{const n=c.findIndex(e=>e.track===t.track);-1!==n?c.splice(n,1)[0].subTiny!==t.subTiny&&(e=!0):e=!0}),c.length&&(e=!0),!e)return{code:s.SUCCESS}}this._pc.clearReTryExchangeTimer(),this._pc.updateSubRemoteTracks(r.map(e=>e.track));const{reqBody:l}=yield this._createSubscribeParams(r,{},!1),u=yield this._exchangeHandle(l);if(c.length){const e=[];c.forEach(t=>{e.push(t.track.getTrackId())}),null===(n=this._pc.reportParser)||void 0===n||n.clearLatestPacketsRecv(e)}if(u.code!==s.SUCCESS)return{code:u.code};const{sdp:d,resultCode:h,message:p,subscribedList:f}=u.data;if(h!==s.SUCCESS)return o.error("change subscribe list failed:",p,h),{code:h};r.forEach(e=>{const{track:t}=e;if(t.isMCUTrack()){const e=this._roomRes[t.getTrackId()].msid,{tag:n,userId:i}=et(t.getTrackId()),r=[i,n].join("_");d.sdp=d.sdp.replace(new RegExp(e,"g"),r)}});const g=yield this._pc.setRemoteAnswer(d.sdp);if(g!==s.SUCCESS)return{code:g};const m=null==f?void 0:f.map(e=>`${e.msid}_${e.mediaType}`),_=r.filter(e=>{if(e.track.isMCUTrack()){const t=this._roomRes[e.track.getTrackId()],n=`${t.msid}_${t.mediaType}`;return m.includes(n)}return null==m?void 0:m.includes(e.track.getTrackId())}),v=null==_?void 0:_.map(e=>""+e.track.getTrackId()),y=r.filter(e=>!(null==v?void 0:v.includes(e.track.getTrackId())));for(const e in this._remoteTracks){const t=_.some(t=>t.track.getTrackId()===e);this._remoteTracks[e].__innerSetSubscribed(t)}return this._subscribedList.splice(0,this._subscribedList.length,..._),y.length?{code:s.SUCCESS,failedList:y}:{code:s.SUCCESS}}))}_diffCDNUris(e){return r(this,void 0,void 0,(function*(){if(this._CDNUris.url&&!e.url)return this._callAppListener("onCDNInfoDisable"),void(this._CDNUris=e);(!this._CDNUris||!this._CDNUris.url&&e.url)&&this._callAppListener("onCDNInfoEnable",{resolution:`W${e.w}_H${e.h}`,fps:"FPS_"+e.fps});const t=this._CDNUris.w&&e.w&&this._CDNUris.w!==e.w,n=this._CDNUris.h&&e.h&&this._CDNUris.h!==e.h,i=this._CDNUris.fps&&e.fps&&this._CDNUris.fps!==e.fps;(t||n||i)&&this._callAppListener("onCDNInfoChange",{resolution:`W${e.w}_H${e.h}`,fps:"FPS_"+e.fps}),this._CDNUris=e}))}_getCDNPlayUrl(e){return r(this,void 0,void 0,(function*(){const{w:t,h:n,fps:i}=e,r=this._initOptions.pullInnerCDNProtocol||rn.FLV,a=this._initOptions.pullInnerCDNUseHttps===on.NOT_HTTPS?on.NOT_HTTPS:on.HTTPS;if(!this._CDNUris.url)return o.error("cdn_uris url is empty, the anchor need to open or push CDN, code: "+s.CDN_RESOURCE_IS_EMPTY),{code:s.CDN_RESOURCE_IS_EMPTY};const c={"App-Key":this._context.getAppkey(),Token:this._joinResData.token,RoomId:this.getRoomId(),UserId:this._context.getCurrentId(),SessionId:this.getSessionId()},l=[];t&&l.push("w="+t),n&&l.push("h="+n),i&&l.push("fps="+i),l.push("kind="+r),l.push("is_https="+a);const u=l.join("&");let d=this._CDNUris.url+"?";u&&(d+=u);const{code:h,res:p}=yield this._service.getCDNResourceInfo(c,d);return h!==s.SUCCESS?(o.error("getCDNPlayUrl failed: "+h),{code:h}):(o.info("getCDNPlayUrl success: "+(null==p?void 0:p.data.pull_url)),{code:h,CDNPlayUrl:null==p?void 0:p.data.pull_url})}))}getCDNPlayUrl(e,t){return r(this,void 0,void 0,(function*(){if(e&&!st(e))return o.error("`resolution` is invalid"),{code:s.PARAMS_ERROR};if(t&&!at(t))return o.error("`fps` is invalid"),{code:s.PARAMS_ERROR};const{width:n,height:i}=e?ot(e):{width:null,height:null},r=t?ct(t):null,a={};return n&&(a.w=n),i&&(a.h=i),r&&(a.fps=r),this._getCDNPlayUrl(a)}))}subscribe(e){return r(this,void 0,void 0,(function*(){return u(()=>this._subscribeHandle(e,!1))}))}__unsubscribe(e){var t;return r(this,void 0,void 0,(function*(){if(!Object(i["validate"])("tracks",e,()=>Object(i["isArray"])(e)&&e.length>0&&e.every(e=>e instanceof He),!0))return o.error("unsubscribe failed, tracks is invalid -> roomId: "+this._roomId),{code:s.PARAMS_ERROR};const n=this._subscribedList.map(e=>Object.assign({},e)).filter(t=>!e.includes(t.track));return null===(t=this._polarisReport)||void 0===t||t.sendR2(Dt.SUBSCRIBE,Nt.END,e.map(e=>e.getTrackId())),this._updateSubListHandle(n,!1)}))}unsubscribe(e){return r(this,void 0,void 0,(function*(){return u(()=>this.__unsubscribe(e))}))}__destroy(e){var t;return r(this,void 0,void 0,(function*(){this._destroyed||(this._destroyed=!0,null===(t=this._audioLevelReport)||void 0===t||t.clearAudioLevelReportTimer(),e&&(yield this._context.quitLivingRoomAsAudience(this._roomId)),yield this._service.broadcastExit(this._getReqHeaders()),this._pc.destroy(),this._polarisReport=null,this._context.onrtcdatachange=()=>{})}))}getRemoteTrack(e){return this._remoteTracks[e]}__getPC(){return this._pc}getLocalTrack(e){return{}}__onReconnected(){return r(this,void 0,void 0,(function*(){const{code:e}=yield this._context.joinLivingRoomAsAudience(this._roomId,i["RTCMode"].LIVE);e!==i["ErrorCode"].SUCCESS&&o.error("join living room error when on reconnected")}))}registerRoomEventListener(e){this._appListener=e}onAudioLevelChange(e,t){var n;null===(n=this._audioLevelReport)||void 0===n||n.clearAudioLevelReportTimer(),this._audioLevelReport=new Bt(this),this._audioLevelReport.onAudioLevelChange(e,t||1e3)}registerReportListener(e){var t;null===(t=this._pc)||void 0===t||t.registerReportListener(e)}getRoomId(){return this._roomId}getCrtUserId(){return this._context.getCurrentId()}getSessionId(){return this._sessionId}getRemoteUserIds(){return this._roomAnchorList}getRemoteTracksByUserId(e){const t=[];for(const n in this._remoteTracks){const i=this._remoteTracks[n];i.getUserId()===e&&t.push(i)}return t}getRemoteTracks(){const e=[],t=[];for(const n in this._remoteTracks){if(2===t.length)break;const e=this._remoteTracks[n];e.isMCUTrack()&&t.push(e)}return this._roomAnchorList.forEach(t=>{e.push(...this.getRemoteTracksByUserId(t))}),[...t,...e]}getRemoteRTCTracks(){const e=[];for(const t in this._remoteTracks){const n=this._remoteTracks[t];n.isMCUTrack()||e.push(n)}return e}getRemoteMCUTracks(){const e=[];for(const t in this._remoteTracks){const n=this._remoteTracks[t];n.isMCUTrack()&&e.push(n)}return e}getCDNInfo(){return this._CDNUris.w?{resolution:`W${this._CDNUris.w}_H${this._CDNUris.h}`,fps:"FPS_"+this._CDNUris.fps,CDNEnable:this._CDNUris.enableInnerCDN}:{CDNEnable:!1}}}const cn=(e,t)=>{const n=[];return n[0]=(null==t?void 0:t.withoutAudio)?void 0:e.getAudioTracks()[0],n[1]=(null==t?void 0:t.withoutVideo)?void 0:e.getVideoTracks()[0],n};class ln{constructor(e,t,n){this._context=e,this._runtime=t,this._options=n,this._crtRoom=null,this._audience=null,this._crtAudienceLivingRoom=null,Ot.setSdpSemantics(n.sdpSemantics||"plan-b"),this._service=new tn(this._runtime,this._context,this._options.mediaServer,this._options.timeout),this._context.onconnectionstatechange=this._onIMStatusChange.bind(this),this._context.ondisconnect=this._onIMDisconnect.bind(this),this._context.ondestroy=this._onIMUninit.bind(this),this._context.onmessage=this._handleMessage.bind(this)}_handleMessage(e){var t;return e.conversationType===i["ConversationType"].RTC_ROOM&&(this._crtRoom instanceof Qt&&this._getJoinedPKRoomList().forEach(t=>{t.__parseInnerMessage(e)}),null===(t=this._crtRoom)||void 0===t||t.__parseInnerMessage(e),!0)}_getJoinedPKRoomList(){const{code:e,roomPKHandler:t}=this._crtRoom.getRoomPKHandler();if(e===s.SUCCESS&&t){const e=t.getJoinedPKRooms()||{};return Object.values(e)}return[]}_getPKRoomIds(){const{code:e,roomPKHandler:t}=this._crtRoom.getRoomPKHandler();if(e===s.SUCCESS&&t){const e=t.getAllPKInfo();return Object.keys(e)}return[]}getCurrentId(){return this._context.getCurrentId()}joinRTCRoom(e,t,n){return u(()=>this._joinRTCRoom(e,t,n))}_joinRTCRoom(e,t,n){return r(this,void 0,void 0,(function*(){if(pt(this._context.getNaviInfo()))return{code:s.PACKAGE_ENVIRONMENT_ERROR};if(!Object(i["validate"])("roomId",e,i["notEmptyString"],!0))return{code:s.PARAMS_ERROR};if(!Object(i["validate"])("outerUserDatas",n,i["isObject"],!1))return{code:s.PARAMS_ERROR};if(n&&!Object.keys(n).every(e=>Object(i["validate"])("outerUserDatas."+e,n[e],i["isString"],!0)))return{code:s.PARAMS_ERROR};if(this._crtRoom)return{code:s.REPERT_JOIN_ROOM};if(this._context.getConnectionStatus()!==i["ConnectionStatus"].CONNECTED)return{code:s.SIGNAL_DISCONNECTED};if(!this._service.getNaviMS().length)return{code:s.NOT_OPEN_VIDEO_AUDIO_SERVER};o.debug(`joinRoom -> roomId: ${e}; joinType: ${t||i["RTCJoinType"].KICK}`);const{code:r,data:c}=yield this._context.joinRTCRoom(e,i["RTCMode"].RTC,void 0,t,void 0,n);if(r!==i["ErrorCode"].SUCCESS)return o.error("joinRoom failed -> code: "+r),{code:r===a.JOIN_REFUSED?s.SIGNAL_JOIN_RTC_ROOM_REFUSED:r};o.debug(`joinRoom success -> userId: ${this._context.getCurrentId()}, roomId: ${e}, data: ${JSON.stringify(c)}`);const l=new Zt(this._context,this._runtime,e,c,this._service,this._options,this._releaseCrtRoomObj.bind(this));return this._crtRoom=l,{room:l,code:s.SUCCESS,userIds:l.getRemoteUserIds(),tracks:l.getRemoteTracks()}}))}joinLivingRoom(e,t,n,i){return u(()=>this._joinLivingRoom(e,t,n,i))}_joinLivingRoom(e,t,n,a){return r(this,void 0,void 0,(function*(){if(pt(this._context.getNaviInfo()))return{code:s.PACKAGE_ENVIRONMENT_ERROR};if(!Object(i["validate"])("roomId",e,i["notEmptyString"],!0)||!Object(i["validate"])("livingType",t,e=>e===Yt.AUDIO||e===Yt.VIDEO))return{code:s.PARAMS_ERROR};if(!Object(i["validate"])("outerUserDatas",a,i["isObject"],!1))return{code:s.PARAMS_ERROR};if(a&&!Object.keys(a).every(e=>Object(i["validate"])("outerUserDatas."+e,a[e],i["isString"],!0)))return{code:s.PARAMS_ERROR};if(this._crtRoom)return{code:s.REPERT_JOIN_ROOM};if(this._context.getConnectionStatus()!==i["ConnectionStatus"].CONNECTED)return{code:s.SIGNAL_DISCONNECTED};if(!this._service.getNaviMS().length)return{code:s.NOT_OPEN_VIDEO_AUDIO_SERVER};o.debug("joinRoom, roomId: "+e);const{code:r,data:c}=yield this._context.joinRTCRoom(e,i["RTCMode"].LIVE,t,n,void 0,a);if(r!==i["ErrorCode"].SUCCESS)return o.error("joinRoom failed -> code: "+r),{code:r};o.debug(`JoinRoom success -> userId: ${this._context.getCurrentId()}, roomId: ${e}, data: ${JSON.stringify(c)}`);const l=new Qt(this._context,this._runtime,e,c,this._service,this._options,this._releaseCrtRoomObj.bind(this),t,!1,!0);this._crtRoom=l;const u={room:l,code:s.SUCCESS,userIds:l.getRemoteUserIds(),tracks:l.getRemoteTracks(),PKRoomIds:this._getPKRoomIds()};return l.__getCDNPushMode()===zt.MANUAL&&Object.assign(u,{CDNEnable:l.__getCDNEnable()}),u}))}getAudienceClient(){return this._audience||(this._audience=new nn(this._context,this._runtime,this._options)),this._audience}_onIMStatusChange(e){o.debug("signal server connection state change: "+e),e===i["ConnectionStatus"].CONNECTED&&(this._crtRoom instanceof Qt&&this._getJoinedPKRoomList().forEach(e=>{e.__onReconnected()}),this._crtRoom&&this._crtRoom.__onReconnected())}_onIMDisconnect(){o.debug("TODO -> on IM disconnect")}_onIMUninit(){o.debug("TODO -> on IM client ondestroy")}leaveRoom(e){return u(()=>this._leaveRoom(e))}_leaveRoom(e){return r(this,void 0,void 0,(function*(){return this._crtRoom?(yield this._crtRoom.__destroy(!0),o.debug(`quitRTCRoom -> userId: ${this._context.getCurrentId()} , roomId: ${this._crtRoom.getRoomId()}`),this._crtRoom=null,{code:s.SUCCESS}):{code:s.SUCCESS}}))}_releaseCrtRoomObj(){this._crtRoom=null}_getMediaStream(e,t="getUserMedia"){return r(this,void 0,void 0,(function*(){try{const n=yield navigator.mediaDevices[t](e);return{code:s.SUCCESS,stream:n}}catch(e){if("Permission denied"===e.message)return{code:s.PERMISSION_DENIED};o.error("get user media failed -> "+e.message)}return{code:"getUserMedia"===t?s.GET_USER_MEDIA_FAILED:s.GET_DISPLAY_MEDIA_FAILED}}))}createMicrophoneAudioTrack(e="RongCloudRTC",t){return r(this,void 0,void 0,(function*(){if(!ze(e))return{code:s.INVALID_TAGS};const n=this._context.getCurrentId();if(!n)return{code:s.INVALID_USER_ID};const{stream:i,code:r}=yield this._getMediaStream({audio:{deviceId:null==t?void 0:t.micphoneId,sampleRate:null==t?void 0:t.sampleRate}});if(r!==s.SUCCESS)return{code:r};const o=i.getAudioTracks()[0];return{code:r,track:new je(e,n,o)}}))}createCameraVideoTrack(e="RongCloudRTC",t){return r(this,void 0,void 0,(function*(){if(!ze(e))return{code:s.INVALID_TAGS};const n=this._context.getCurrentId();if(!n)return{code:s.INVALID_USER_ID};const i=st(null==t?void 0:t.resolution)?t.resolution:Ie.W640_H480,{width:r,height:o}=ot(i),{stream:a,code:c}=yield this._getMediaStream({video:{deviceId:null==t?void 0:t.cameraId,frameRate:ct((null==t?void 0:t.frameRate)||Re.FPS_15),width:r,height:o,facingMode:null==t?void 0:t.faceMode}});if(c!==s.SUCCESS)return{code:c};const l=a.getVideoTracks()[0];return{code:c,track:new Fe(e,n,l)}}))}createMicrophoneAndCameraTracks(e="RongCloudRTC",t){var n,i,o,a,c,l;return r(this,void 0,void 0,(function*(){const r=[];if(!ze(e))return{code:s.INVALID_TAGS,tracks:r};const u=this._context.getCurrentId();if(!u)return{code:s.INVALID_USER_ID,tracks:r};const d=st(null===(n=null==t?void 0:t.video)||void 0===n?void 0:n.resolution)?t.video.resolution:Ie.W640_H480,{width:h,height:p}=ot(d),{stream:f,code:g}=yield this._getMediaStream({video:{deviceId:null===(i=null==t?void 0:t.video)||void 0===i?void 0:i.cameraId,frameRate:ct((null===(o=null==t?void 0:t.video)||void 0===o?void 0:o.frameRate)||Re.FPS_15),width:h,height:p,facingMode:null===(a=null==t?void 0:t.video)||void 0===a?void 0:a.faceMode},audio:{deviceId:null===(c=null==t?void 0:t.audio)||void 0===c?void 0:c.micphoneId,sampleRate:null===(l=null==t?void 0:t.audio)||void 0===l?void 0:l.sampleRate}});return g!==s.SUCCESS||f.getTracks().forEach(t=>{"video"===t.kind?r.push(new Fe(e,u,t)):r.unshift(new je(e,u,t))}),{code:g,tracks:r}}))}createScreenVideoTrack(e="screenshare",t){return r(this,void 0,void 0,(function*(){if(!ze(e))return{code:s.INVALID_TAGS};const n=this._context.getCurrentId();if(!n)return{code:s.INVALID_USER_ID};if(!dt())return{code:s.BROWSER_NOT_SUPPORT};const i=/Electron/.test(navigator.userAgent);if(i&&!(null==t?void 0:t.chromeMediaSourceId))return{code:s.PARAMS_ERROR};const r=st(null==t?void 0:t.resolution)?t.resolution:Ie.W1280_H720,{width:o,height:a}=ot(r),c=i?{mandatory:{chromeMediaSourceId:t.chromeMediaSourceId,chromeMediaSource:"desktop",minWidth:o,maxWidth:o,minHeight:a,maxHeight:a}}:{frameRate:ct((null==t?void 0:t.frameRate)||Re.FPS_15),width:o,height:a},{stream:l,code:u}=yield this._getMediaStream({video:c,audio:!1},i?"getUserMedia":"getDisplayMedia");if(u!==s.SUCCESS)return{code:u};const d=l.getVideoTracks()[0];return{code:u,track:new $e(e,n,d)}}))}createLocalAudioTrack(e,t){return r(this,void 0,void 0,(function*(){if(!ze(e))return{code:s.INVALID_TAGS};if(!t||"[object MediaStreamTrack]"!==t.toString()||"audio"!==t.kind)return{code:s.CREATE_CUSTOM_TRACK_FAILED};const n=this._context.getCurrentId();return n?{code:s.SUCCESS,track:new Ne(e,n,t)}:{code:s.INVALID_USER_ID}}))}createLocalVideoTrack(e,t){return r(this,void 0,void 0,(function*(){if(!ze(e))return{code:s.INVALID_TAGS};if(!t||"[object MediaStreamTrack]"!==t.toString()||"video"!==t.kind)return{code:s.CREATE_CUSTOM_TRACK_FAILED};const n=this._context.getCurrentId();return n?{code:s.SUCCESS,track:new Le(e,n,t)}:{code:s.INVALID_USER_ID}}))}createLocalFileTracks(e,t,n){return r(this,void 0,void 0,(function*(){if(!ze(e))return{code:s.INVALID_TAGS,tracks:[]};if(!ut())return{code:s.BROWSER_NOT_SUPPORT,tracks:[]};const r=t instanceof File?URL.createObjectURL(t):t;if(!Object(i["isHttpUrl"])(r)&&!/^blob:/.test(r))return o.warn("createLocalFileTracks failed: params error -> url: "+r),{code:s.PARAMS_ERROR,tracks:[]};const a=this._context.getCurrentId();return a?new Promise(t=>{const i=document.createElement("video");(null==n?void 0:n.withoutAudio)&&(i.muted=!0),i.onloadedmetadata=()=>{const c=[];let l;try{const e=i.mozCaptureStream?"mozCaptureStream":"captureStream";l=i[e]()}catch(e){o.error("create RCLocalFileTrack failed, captureSteam error. -> url: "+r),o.error(e),t({code:s.CREATE_FILE_TRACK_FAILED,tracks:c})}const[u,d]=cn(l,n);u&&c.push(new Ve(e,a,u,i)),d&&c.push(new Be(e,a,d,i)),0===c.length&&(i.pause(),i.src=""),i.onerror=null,t({code:s.SUCCESS,tracks:c})},i.onerror=()=>{o.error("create RCLocalFileTrack failed -> url: "+r),t({code:s.CREATE_FILE_TRACK_FAILED,tracks:[]})},i.src=r,i.loop=!0,i.play()}):{code:s.INVALID_USER_ID,tracks:[]}}))}createLocalTracks(e,t,n){return r(this,void 0,void 0,(function*(){const i=[];if(!ze(e))return{code:s.INVALID_TAGS,tracks:i};if(!(t instanceof MediaStream))return{code:s.PARAMS_ERROR,tracks:i};const r=this._context.getCurrentId();if(!r)return{code:s.INVALID_USER_ID,tracks:i};const[o,a]=cn(t,n);return o&&i.push(new Ne(e,r,o)),a&&i.push(new Le(e,r,a)),{code:s.SUCCESS,tracks:i}}))}joinLivingRoomAsAudience(e,t){return r(this,void 0,void 0,(function*(){if(pt(this._context.getNaviInfo()))return{code:s.PACKAGE_ENVIRONMENT_ERROR};if(!Object(i["validate"])("roomId",e,i["notEmptyString"],!0)||!Object(i["validate"])("livingType",t,e=>e===Yt.AUDIO||e===Yt.VIDEO))return{code:s.PARAMS_ERROR};if(this._crtAudienceLivingRoom)return{code:s.REPERT_JOIN_ROOM};if(!this._service.getNaviMS().length)return{code:s.NOT_OPEN_VIDEO_AUDIO_SERVER};const{code:n,data:r}=yield this._context.joinLivingRoomAsAudience(e,i["RTCMode"].LIVE,t);if(n!==i["ErrorCode"].SUCCESS)return o.error("audienceJoinLivingRoomError:",n),{code:s.SIGNAL_AUDIENCE_JOIN_ROOM_FAILED};o.info("joinLivingRoomAsAudience success, room data: "+JSON.stringify(r));const a=new an(this._context,this._runtime,this._options,e,r,t);return this._crtAudienceLivingRoom=a,{room:a,code:s.SUCCESS,userIds:a.getRemoteUserIds(),RTCTracks:a.getRemoteRTCTracks(),MCUTracks:a.getRemoteMCUTracks(),CDNUris:a.getCDNInfo()}}))}leaveLivingRoomAsAudience(e){return r(this,void 0,void 0,(function*(){return this._crtAudienceLivingRoom?this._crtAudienceLivingRoom!==e?{code:s.PARAMS_ERROR}:(yield this._crtAudienceLivingRoom.__destroy(!0),this._crtAudienceLivingRoom=null,{code:s.SUCCESS}):{code:s.SUCCESS}}))}upgradeToAnchorRoom(e){return r(this,void 0,void 0,(function*(){if(!Object(i["validate"])("room._roomId",e._roomId,i["notEmptyString"],!0))return{code:s.PARAMS_ERROR};if(this._crtRoom)return{code:s.REPERT_JOIN_ROOM};const{code:t,data:n}=yield this._context.rtcIdentityChange(e._roomId,i["RTCIdentityChangeType"].ViewerToAnchor,e._livingType);if(t!==i["ErrorCode"].SUCCESS)return o.error("change room identity error",t),{code:s.SIGNAL_ROOM_CHANGE_IDENTITY_FAILED};yield this._crtAudienceLivingRoom.__destroy(!1);const r=new Qt(this._context,this._runtime,e._roomId,n,this._service,this._options,this._releaseCrtRoomObj.bind(this),e._livingType,!0,!0);return this._crtRoom=r,this._crtAudienceLivingRoom=null,{room:r,code:s.SUCCESS,userIds:e.getRemoteUserIds(),tracks:r.getRemoteTracks()}}))}downgradeToAudienceRoom(e){return r(this,void 0,void 0,(function*(){if(!e.isMainRoom())return o.error("the `downgradeToAudienceRoom` is disabled in PK room"),{code:s.THE_FUNCTION_IS_DISABLED_IN_PKROOM};if(!Object(i["validate"])("room._roomId",e._roomId,i["notEmptyString"],!0))return{code:s.PARAMS_ERROR};if(this._crtAudienceLivingRoom)return{code:s.REPERT_JOIN_ROOM};const{code:t,data:n}=yield this._context.rtcIdentityChange(e._roomId,i["RTCIdentityChangeType"].AnchorToViewer,e.getLivingType());if(t!==i["ErrorCode"].SUCCESS)return o.error("change room identity error",t),{code:s.SIGNAL_ROOM_CHANGE_IDENTITY_FAILED};o.info("downgradeToAudienceRoom success, room data: "+JSON.stringify(n));const r=new an(this._context,this._runtime,this._options,e._roomId,n,e.getLivingType());return this._crtAudienceLivingRoom=r,this._crtRoom.__destroy(!1),this._crtRoom=null,{room:r,code:s.SUCCESS,userIds:r.getRemoteUserIds(),RTCTracks:r.getRemoteRTCTracks(),MCUTracks:r.getRemoteMCUTracks(),CDNUris:r.getCDNInfo()}}))}getJoinedRoomInfo(){return r(this,void 0,void 0,(function*(){const{code:e,data:t}=yield this._context.getRTCJoinedUserInfo(this._context.getCurrentId());return e!==i["ErrorCode"].SUCCESS?(o.error("getJoinedUserInfo error",e),{code:s.SIGNAL_ROOM_CHANGE_IDENTITY_FAILED}):{code:s.SUCCESS,data:t}}))}}var un;!function(e){e[e.SERVER_KICK=1]="SERVER_KICK",e[e.OTHER_KICK=2]="OTHER_KICK"}(un||(un={}));const dn={tag:"RCRTC",verify:e=>"browser"!==e.tag?(o.error(`RCRTC Plugin is not support the runtime '${e.tag}'`),!1):Ye?(i["VersionManage"].add("plugin-rtc","5.3.2"),!!i["VersionManage"].validEngine("5.1.2")||(o.error(`The current engine version '${i["VersionManage"].getInfo().engine}' error, plugin-rtc required engine version at least '5.1.2'.`),!1)):(o.error("Please use the https protocol or use `http://localhost` to open the page!"),!1),setup:(e,t,n={})=>(o.setLogLevel(n.logLevel),o.setLogStdout(n.logStdout),o.warn("RCRTC Version: 5.3.2, Commit: f6a1d352339c5cf1f9d56f7e73f887fe69b6198a"),o.warn("browserInfo.browser -> "+lt.browser),o.warn("browserInfo.supportsUnifiedPlan -> "+lt.supportsUnifiedPlan),o.warn("browserInfo.version -> "+lt.version),Object(i["assert"])("options.mediaServer",n.mediaServer,e=>!(!Object(i["isHttpUrl"])(e)||"https:"===location.protocol&&!/^https/.test(e))),Object(i["assert"])("options.timeout",n.timeout,e=>Object(i["isNumber"])(e)&&e>=5e3&&e<=3e4),Object(i["assert"])("options.pingGap",n.pingGap,e=>Object(i["isNumber"])(e)&&e>=3e3&&e<=1e4),new ln(e,t,n))},hn={DEFAULT:"RongCloudRTC"},pn={transResolution:ot,transFrameRate:ct,parseTrackId:et,ifSupportLocalFileTrack:ut,ifSupportScreenShare:dt}},7156:function(e,t,n){var i=n("1626"),r=n("861d"),o=n("d2bb");e.exports=function(e,t,n){var s,a;return o&&i(s=t.constructor)&&s!==n&&r(a=s.prototype)&&a!==n.prototype&&o(e,a),e}},"722f":function(e,t,n){"use strict";t.__esModule=!0;var i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=n("e452"),o=s(r);function s(e){return e&&e.__esModule?e:{default:e}}var a,c=c||{};c.Dialog=function(e,t,n){var r=this;if(this.dialogNode=e,null===this.dialogNode||"dialog"!==this.dialogNode.getAttribute("role"))throw new Error("Dialog() requires a DOM element with ARIA role of dialog.");"string"===typeof t?this.focusAfterClosed=document.getElementById(t):"object"===("undefined"===typeof t?"undefined":i(t))?this.focusAfterClosed=t:this.focusAfterClosed=null,"string"===typeof n?this.focusFirst=document.getElementById(n):"object"===("undefined"===typeof n?"undefined":i(n))?this.focusFirst=n:this.focusFirst=null,this.focusFirst?this.focusFirst.focus():o.default.focusFirstDescendant(this.dialogNode),this.lastFocus=document.activeElement,a=function(e){r.trapFocus(e)},this.addListeners()},c.Dialog.prototype.addListeners=function(){document.addEventListener("focus",a,!0)},c.Dialog.prototype.removeListeners=function(){document.removeEventListener("focus",a,!0)},c.Dialog.prototype.closeDialog=function(){var e=this;this.removeListeners(),this.focusAfterClosed&&setTimeout((function(){e.focusAfterClosed.focus()}))},c.Dialog.prototype.trapFocus=function(e){o.default.IgnoreUtilFocusChanges||(this.dialogNode.contains(e.target)?this.lastFocus=e.target:(o.default.focusFirstDescendant(this.dialogNode),this.lastFocus===document.activeElement&&o.default.focusLastDescendant(this.dialogNode),this.lastFocus=document.activeElement))},t.default=c.Dialog},7418:function(e,t){t.f=Object.getOwnPropertySymbols},"746f":function(e,t,n){var i=n("428f"),r=n("1a2d"),o=n("e538"),s=n("9bf2").f;e.exports=function(e){var t=i.Symbol||(i.Symbol={});r(t,e)||s(t,e,{value:o.f(e)})}},"77e9":function(e,t,n){var i=n("7a41");e.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},7839:function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"785a":function(e,t,n){var i=n("cc12"),r=i("span").classList,o=r&&r.constructor&&r.constructor.prototype;e.exports=o===Object.prototype?void 0:o},"78b2":function(e,t,n){"use strict";n.r(t),function(e){var i;n.d(t,"AEngine",(function(){return Hr})),n.d(t,"ANavi",(function(){return Wr})),n.d(t,"APIContext",(function(){return Mo})),n.d(t,"AppStorage",(function(){return w})),n.d(t,"AssertRules",(function(){return Xe})),n.d(t,"CONNECTION_TYPE",(function(){return r})),n.d(t,"CPP_PROTOCAL_MSGTYPE_OPTION",(function(){return T})),n.d(t,"CallLibMsgType",(function(){return ze})),n.d(t,"ChatroomEntryType",(function(){return Le})),n.d(t,"ChatroomMemberChangeType",(function(){return Be})),n.d(t,"CometChannel",(function(){return $r})),n.d(t,"ConnectResultCode",(function(){return Ie})),n.d(t,"ConnectionStatus",(function(){return Re})),n.d(t,"ConversationType",(function(){return Y})),n.d(t,"DelayTimer",(function(){return wt})),n.d(t,"ErrorCode",(function(){return Te})),n.d(t,"EventEmitter",(function(){return ye})),n.d(t,"FileType",(function(){return X})),n.d(t,"HttpMethod",(function(){return Vr})),n.d(t,"IM_COMET_PULLMSG_TIMEOUT",(function(){return C})),n.d(t,"IM_PING_INTERVAL_TIME",(function(){return m})),n.d(t,"IM_PING_MIN_TIMEOUT",(function(){return v})),n.d(t,"IM_PING_TIMEOUT",(function(){return _})),n.d(t,"IM_SIGNAL_TIMEOUT",(function(){return f})),n.d(t,"LiveRole",(function(){return He})),n.d(t,"LiveType",(function(){return $e})),n.d(t,"LogLevel",(function(){return D})),n.d(t,"LogType",(function(){return N})),n.d(t,"Logger",(function(){return _e})),n.d(t,"MAX_MESSAGE_CONTENT_BYTES",(function(){return y})),n.d(t,"MINI_COMET_CONNECT_URIS",(function(){return p})),n.d(t,"MINI_SOCKET_CONNECT_URIS",(function(){return h})),n.d(t,"MentionedType",(function(){return Pe})),n.d(t,"MessageBlockType",(function(){return je})),n.d(t,"MessageDirection",(function(){return Ee})),n.d(t,"MessageType",(function(){return Oe})),n.d(t,"NAVI_CACHE_DURATION",(function(){return a})),n.d(t,"NAVI_REQ_TIMEOUT",(function(){return c})),n.d(t,"NotificationStatus",(function(){return Me})),n.d(t,"OperateStatus",(function(){return Ke})),n.d(t,"PING_REQ_TIMEOUT",(function(){return l})),n.d(t,"PUBLIC_CLOUD_NAVI_URIS",(function(){return d})),n.d(t,"PluginContext",(function(){return Eo})),n.d(t,"RCAssertError",(function(){return ot})),n.d(t,"RTCApiType",(function(){return We})),n.d(t,"RTCIdentityChangeType",(function(){return qe})),n.d(t,"RTCJoinType",(function(){return Ge})),n.d(t,"RTCMode",(function(){return Fe})),n.d(t,"RTCPluginContext",(function(){return bo})),n.d(t,"ReceivedStatus",(function(){return s})),n.d(t,"SEND_MESSAGE_TYPE_OPTION",(function(){return b})),n.d(t,"STATUS_MESSAGE",(function(){return S})),n.d(t,"STORAGE_ROOT_KEY",(function(){return E})),n.d(t,"TagChangeType",(function(){return ko})),n.d(t,"UploadMethod",(function(){return De})),n.d(t,"VersionManage",(function(){return Qe})),n.d(t,"WEB_SOCKET_TIMEOUT",(function(){return u})),n.d(t,"WebSocketChannel",(function(){return Fr})),n.d(t,"appendUrl",(function(){return j})),n.d(t,"assert",(function(){return st})),n.d(t,"clone",(function(){return Rt})),n.d(t,"cloneByJSON",(function(){return Ct})),n.d(t,"forEach",(function(){return gt})),n.d(t,"formatConnectResponseCode",(function(){return Tt})),n.d(t,"getBrowser",(function(){return bt})),n.d(t,"getMimeKey",(function(){return ut})),n.d(t,"getUploadFileName",(function(){return lt})),n.d(t,"indexOf",(function(){return _t})),n.d(t,"isArray",(function(){return te})),n.d(t,"isArrayBuffer",(function(){return ne})),n.d(t,"isBoolean",(function(){return Z})),n.d(t,"isFunction",(function(){return se})),n.d(t,"isHttpUrl",(function(){return le})),n.d(t,"isInObject",(function(){return yt})),n.d(t,"isInclude",(function(){return vt})),n.d(t,"isNull",(function(){return ce})),n.d(t,"isNumber",(function(){return ee})),n.d(t,"isObject",(function(){return oe})),n.d(t,"isString",(function(){return Q})),n.d(t,"isUndefined",(function(){return ae})),n.d(t,"isValidChrmEntryKey",(function(){return pt})),n.d(t,"isValidChrmEntryValue",(function(){return ft})),n.d(t,"isValidConversationType",(function(){return de})),n.d(t,"isValidExpansion",(function(){return pe})),n.d(t,"isValidFileType",(function(){return he})),n.d(t,"map",(function(){return mt})),n.d(t,"notEmptyArray",(function(){return re})),n.d(t,"notEmptyObject",(function(){return ue})),n.d(t,"notEmptyString",(function(){return ie})),n.d(t,"pushConfigsToJSON",(function(){return dt})),n.d(t,"pushJSONToConfigs",(function(){return ht})),n.d(t,"todo",(function(){return U})),n.d(t,"usingCppEngine",(function(){return Et})),n.d(t,"validate",(function(){return at})),n.d(t,"version",(function(){return xo})),function(e){e[e.READ=1]="READ",e[e.LISTENED=2]="LISTENED",e[e.DOWNLOADED=4]="DOWNLOADED",e[e.RETRIEVED=8]="RETRIEVED",e[e.UNREAD=0]="UNREAD"}(i||(i={}));var r,o,s=i,a=72e5,c=1e4,l=5e3,u=5e3,d=["https://nav.cn.ronghub.com","https://nav2-cn.ronghub.com"],h=["wsproxy.cn.ronghub.com","wsap-cn.ronghub.com"],p=["cometproxy-cn.ronghub.com","mini-cn.ronghub.com"],f=3e4,m=15e3,_=15e3,v=2e3,y=131072,C=45e3,E="RCV4-",b={"RC:TxtMsg":{isCounted:!0,isPersited:!0},"RC:ImgMsg":{isCounted:!0,isPersited:!0},"RC:VcMsg":{isCounted:!0,isPersited:!0},"RC:ImgTextMsg":{isCounted:!0,isPersited:!0},"RC:FileMsg":{isCounted:!0,isPersited:!0},"RC:HQVCMsg":{isCounted:!0,isPersited:!0},"RC:LBSMsg":{isCounted:!0,isPersited:!0},"RC:PSImgTxtMsg":{isCounted:!0,isPersited:!0},"RC:PSMultiImgTxtMsg":{isCounted:!0,isPersited:!0},"RCJrmf:RpMsg":{isCounted:!0,isPersited:!0},"RCJrmf:RpOpendMsg":{isCounted:!0,isPersited:!0},"RC:CombineMsg":{isCounted:!0,isPersited:!0},"RC:ReferenceMsg":{isCounted:!0,isPersited:!0},"RC:SightMsg":{isCounted:!0,isPersited:!0},"RC:GIFMsg":{isCounted:!0,isPersited:!0},"RC:InfoNtf":{isCounted:!1,isPersited:!0},"RC:ContactNtf":{isCounted:!1,isPersited:!0},"RC:ProfileNtf":{isCounted:!1,isPersited:!0},"RC:CmdNtf":{isCounted:!1,isPersited:!0},"RC:GrpNtf":{isCounted:!1,isPersited:!0},"RC:RcCmd":{isCounted:!1,isPersited:!0},"RC:CmdMsg":{isCounted:!1,isPersited:!1},"RC:TypSts":{isCounted:!1,isPersited:!1},"RC:PSCmd":{isCounted:!1,isPersited:!1},"RC:SRSMsg":{isCounted:!1,isPersited:!1},"RC:RRReqMsg":{isCounted:!1,isPersited:!1},"RC:RRRspMsg":{isCounted:!1,isPersited:!1},"RC:CsChaR":{isCounted:!1,isPersited:!1},"RC:CSCha":{isCounted:!1,isPersited:!1},"RC:CsEva":{isCounted:!1,isPersited:!1},"RC:CsContact":{isCounted:!1,isPersited:!1},"RC:CsHs":{isCounted:!1,isPersited:!1},"RC:CsHsR":{isCounted:!1,isPersited:!1},"RC:CsSp":{isCounted:!1,isPersited:!1},"RC:CsEnd":{isCounted:!1,isPersited:!1},"RC:CsUpdate":{isCounted:!1,isPersited:!1},"RC:ReadNtf":{isCounted:!1,isPersited:!1},"RC:chrmKVNotiMsg":{isCounted:!1,isPersited:!1},"RC:VCAccept":{isCounted:!1,isPersited:!1},"RC:VCRinging":{isCounted:!1,isPersited:!1},"RC:VCSummary":{isCounted:!1,isPersited:!1},"RC:VCHangup":{isCounted:!1,isPersited:!1},"RC:VCInvite":{isCounted:!1,isPersited:!1},"RC:VCModifyMedia":{isCounted:!1,isPersited:!1},"RC:VCModifyMem":{isCounted:!1,isPersited:!1},"RC:MsgExMsg":{isCounted:!1,isPersited:!1},"RC:RRMsg":{isCounted:!1,isPersited:!1},"RC:LogCmdMsg":{isCounted:!1,isPersited:!1},"RC:InterceptMsg":{isCounted:!1,isPersited:!1}},T={"RC:DizNtf":{isCounted:!1,isPersited:!1}},S=["RC:TypSts","RC:InterceptMsg"];!function(e){e.WEBSOCKET="websocket",e.COMET="comet"}(r||(r={}));var R=function(e){return o||(o={set:function(t,n){e.localStorage.setItem(t,JSON.stringify(n))},get:function(t){var n;try{n=JSON.parse(e.localStorage.getItem(t))}catch(e){n=null}return n},remove:function(t){return e.localStorage.removeItem(t)},getKeys:function(){var t=[];for(var n in e.localStorage)t.push(n);return t}}),o},I=function(){function e(e){this._caches={},e&&(this._caches=e)}return e.prototype.set=function(e,t){this._caches[e]=t},e.prototype.remove=function(e){var t=this.get(e);return delete this._caches[e],t},e.prototype.get=function(e){return this._caches[e]},e.prototype.getKeys=function(){var e=[];for(var t in this._caches)e.push(t);return e},e}(),w=function(){function e(e,t){var n,i=t?"RCV4-"+t:"RCV4-";this._rootStorage=R(e);var r=this._rootStorage.get(i)||{};this._cache=new I(((n={})[i]=r,n)),this._storageKey=i}return e.prototype._get=function(){var e=this._storageKey;return this._cache.get(e)||{}},e.prototype._set=function(e){var t=this._storageKey;e=e||{},this._cache.set(t,e),this._rootStorage.set(t,e)},e.prototype.set=function(e,t){var n=this._get();n[e]=t,this._set(n)},e.prototype.remove=function(e){var t=this._get();delete t[e],this._set(t)},e.prototype.clear=function(){var e=this._storageKey;this._rootStorage.remove(e),this._cache.remove(e)},e.prototype.get=function(e){return this._get()[e]},e.prototype.getKeys=function(){var e=this._get(),t=[];for(var n in e)t.push(n);return t},e.prototype.getValues=function(){return this._get()||{}},e}(),O=function(e,t){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function k(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}O(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var M=function(){return(M=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function x(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))}function P(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(r=s.trys,!((r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function A(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e}var D,N,L=function(e){function t(t){return e.call(this,"TODO => "+t)||this}return k(t,e),t}(Error),U=function(e){return new L(e)},B=function(e,t,n){if(void 0===t||void 0===n)return e.toUpperCase();var i=e.slice(t,n);return e.replace(i,(function(e){return e.toUpperCase()}))},V=function(e,t){void 0===t&&(t="utf-8");var n,i=0;if("utf-16"===t)for(var r=0,o=e.length;r<o;r++)i+=(n=e.charCodeAt(r))<=65535?2:4;else for(r=0,o=e.length;r<o;r++)i+=(n=e.charCodeAt(r))<127?1:n<=2047?2:n<=65535?3:4;return i},j=function(e,t){if(e=e.replace(/\?$/,""),!t)return e;var n=Object.keys(t).map((function(e){return e+"="+t[e]})).filter((function(e){return!!e}));return n.length?[e,n.join("&")].join("?"):e},F=function(e){return e.match(/\d+(\.\d+){2}/)[0]};!function(e){e[e.LOG=0]="LOG",e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARN=2]="WARN",e[e.ERROR=3]="ERROR",e[e.FATAL=4]="FATAL",e[e.NONE=1e3]="NONE"}(D||(D={})),function(e){e.IM="IM",e.RTC="RTC"}(N||(N={}));var $="RC_Logs";function H(e){var t=e.target.result;1===e.oldVersion&&t.deleteObjectStore($),function(e,t,n){var i;if(!e.objectStoreNames.contains(t)){var r=M({},n.objectStoreParams);i=e.createObjectStore(t,r),n.indexs&&n.indexs.length>0&&n.indexs.forEach((function(e){i.createIndex(e.indexName,e.key,{unique:e.unique})}))}}(t,$,{indexs:[{indexName:"time",key:"time",unique:!1}],objectStoreParams:{autoIncrement:!0}})}var K,W=function(){function e(){}return e.init=function(){if("undefined"!=typeof window&&window&&window.indexedDB){var t=window.indexedDB.open("RC_ENGINE_DB",2);t.onerror=function(e){console.warn("open indexDB request failed "+e.target.error)},t.onsuccess=function(t){e._db=t.target.result,e._db&&(e._db.onclose=function(t){var n;console.warn("The database "+(null===(n=e._db)||void 0===n?void 0:n.name)+" has unexpectedly closed.",t),e._db=null,window.__RCIndexDBInstance=null},e._db.onerror=function(t){var n;console.warn("The database "+(null===(n=e._db)||void 0===n?void 0:n.name)+" has opening error.",t),e._db=null,window.__RCIndexDBInstance=null},e._db.onabort=function(t){var n;console.warn("The database "+(null===(n=e._db)||void 0===n?void 0:n.name)+" has opening aborted.",t),e._db=null,window.__RCIndexDBInstance=null}),window.__RCIndexDBInstance=new e},t.onupgradeneeded=function(t){e._db=t.target.result,H(t)}}else console.debug("IndexDB is not currently supported in the environment!")},e.getInstance=function(){return window&&window.__RCIndexDBInstance?window.__RCIndexDBInstance:null},e.prototype.addList=function(t,n){return new Promise((function(i){if(e._db){var r=e._db.transaction([t],"readwrite"),o=r.objectStore(t);n.forEach((function(e){null==o||o.add(e)})),r.oncomplete=function(e){i(!0)},r.onerror=function(e){i(!1)}}else i(!1)}))},e.prototype.getRangeData=function(t,n,i,r){return new Promise((function(o){if(e._db){var s=e._db.transaction([t],"readwrite").objectStore(t),a=IDBKeyRange.bound(i,r),c=s.index(n),l=[],u=c.openCursor(a);u.onsuccess=function(e){var t=e.target.result;t?(l.push(t.value),t.continue()):o(l)},u.onerror=function(e){console.error(e),o([])}}else o([])}))},e.prototype.getCount=function(t,n){return new Promise((function(n){if(e._db){var i=e._db.transaction([t],"readonly").objectStore(t).count();i.onsuccess=function(){n(i.result)},i.onerror=function(e){console.error(e),n(0)}}else n(0)}))},e.prototype.removeFirstData=function(t,n,i){return new Promise((function(n){if(e._db){var r=e._db.transaction([t],"readwrite").objectStore(t),o=r.getAllKeys(IDBKeyRange.lowerBound(0),i);o.onsuccess=function(){var e=o.result;e.length>0&&(r.delete(IDBKeyRange.bound(e[0],e[e.length-1])).onsuccess=function(){n(!0)})}}else n(!1)}))},e._db=null,e}(),q=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},G=function(){var e=q();if(e=e.replace(/-/g,"")+"a",(e=function(e){var t="0123456789abcdefghigklmnopqrstuvwxyzABCDEFGHIGKLMNOPQRSTUVWXYZa0".split(""),n=t.length+1,i=+e,r=[];do{var o=i%n;i=(i-o)/n,r.unshift(t[o])}while(i);return r.join("")}(e=parseInt(e,16))).length>22&&(e=e.slice(0,22)),e.length<22)for(var t=22-e.length,n=0;n<t;n++)e+="0";return e};!function(e){e[e.NONE=0]="NONE",e[e.PRIVATE=1]="PRIVATE",e[e.DISCUSSION=2]="DISCUSSION",e[e.GROUP=3]="GROUP",e[e.CHATROOM=4]="CHATROOM",e[e.CUSTOMER_SERVICE=5]="CUSTOMER_SERVICE",e[e.SYSTEM=6]="SYSTEM",e[e.APP_PUBLIC_SERVICE=7]="APP_PUBLIC_SERVICE",e[e.PUBLIC_SERVICE=8]="PUBLIC_SERVICE",e[e.ULTRA_GROUP=10]="ULTRA_GROUP",e[e.RTC_ROOM=12]="RTC_ROOM"}(K||(K={}));var z,Y=K;!function(e){e[e.IMAGE=1]="IMAGE",e[e.AUDIO=2]="AUDIO",e[e.VIDEO=3]="VIDEO",e[e.FILE=4]="FILE",e[e.SIGHT=5]="SIGHT",e[e.COMBINE_HTML=6]="COMBINE_HTML"}(z||(z={}));var J,X=z,Q=function(e){return"string"==typeof e},Z=function(e){return"boolean"==typeof e},ee=function(e){return"number"==typeof e&&!isNaN(e)},te=function(e){return-1!==Object.prototype.toString.call(e).indexOf("Array")},ne=function(e){return"[object ArrayBuffer]"===Object.prototype.toString.call(e)},ie=function(e){return Q(e)&&e.length>0},re=function(e){return te(e)&&e.length>0},oe=function(e){return"[object Object]"===Object.prototype.toString.call(e)},se=function(e){return"[object Function]"===Object.prototype.toString.call(e)},ae=function(e){return void 0===e||"[object Undefined]"===Object.prototype.toString.call(e)},ce=function(e){return"[object Null]"===Object.prototype.toString.call(e)},le=function(e){return Q(e)&&/https?:\/\//.test(e)},ue=function(e){for(var t in e)return!0;return!1},de=function(e){return ee(e)&&Object.prototype.hasOwnProperty.call(Y,e)},he=function(e){return ee(e)&&Object.prototype.hasOwnProperty.call(X,e)},pe=function(e){var t=!1;if(oe(e))for(var n in e)if(t=Q(n)&&!/^[A-Za-z0-9_=+-]+$/.test(n))break;return t},fe={};console&&((J={})[D.DEBUG]=console.debug.bind(console),J[D.INFO]=console.info.bind(console),J[D.WARN]=console.warn.bind(console),J[D.ERROR]=console.error.bind(console),J[D.FATAL]=console.log.bind(console),fe=J);var ge,me=function(e){return Q(e)||ee(e)||ae(e)||Z(e)?e:e instanceof Error?JSON.stringify({name:e.name,message:e.message,stack:e.stack}):JSON.stringify(e)},_e=function(){function e(e,t,n){this.tag=e,this.type=t,this.initiator=n,this._outLevel=D.WARN,this.debug=this.log.bind(this,D.DEBUG),this.info=this.log.bind(this,D.INFO),this.warn=this.log.bind(this,D.WARN),this.error=this.log.bind(this,D.ERROR),this.fatal=this.log.bind(this,D.FATAL)}return e.init=function(t){e.userId=t},e.reset=function(){e.userId=""},e.prototype._defaultStdout=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];fe[e]&&fe[e].apply(fe,A([t+":"],n))},e.prototype.__pushLocalLog=function(t,n,i){var r;r=this.type?this.type:["RCRTCLog","RCCall","RCRTC","RTC-A"].includes(this.tag)?N.RTC:N.IM;var o=Date.now();V(n)>=1e3&&(n=function(e,t,n){if(void 0===n&&(n="utf-8"),!e||!t)return"";var i="utf-8"===n?3:2,r=0,o=0,s="";for(o=0;o<e.length;o++){if(e.charCodeAt(o)>255?r+=i:r++,r>t)return s;s+=e.charAt(o)}return e}(n,1e3));var s=JSON.stringify({message:n,userId:e.userId}).replace(/"/g,'""'),a=/^[\w]+-[\w]+-[\w]+?/.test(i)?i:(this.initiator||"L")+"-"+i+"-O",c={sessionId:e.sessionId,time:o,level:4-t,content:e.sessionId+","+Date.now()+","+r+","+(4-t)+","+a+',"'+s+'"\n',userId:e.userId};e.databaseLogList.push(c),(e.databaseLogList.length>=100||t===D.FATAL)&&this.__insertLogIntoDatabase()},e.prototype.__insertLogIntoDatabase=function(){return x(this,void 0,void 0,(function(){var t,n,i;return P(this,(function(r){switch(r.label){case 0:return t=A([],e.databaseLogList),e.databaseLogList=[],(n=W.getInstance())?[4,n.addList($,t)]:[3,3];case 1:return i=r.sent(),[4,n.getCount($,"time")];case 2:return r.sent()>1e5&&n.removeFirstData($,"time",2e3),[2,i];case 3:return[2,!1]}}))}))},e.prototype.setLogLevel=function(e){this._outLevel="number"!=typeof e?D.WARN:e},e.prototype.setLogStdout=function(e){this._logStdout=e},e.prototype.log=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(e>D.DEBUG&&this.__pushLocalLog(e,t.map(me).join(" "),this.tag),!(e<this._outLevel)){var i=(new Date).toISOString()+"["+this.tag+"]["+D[e]+"]",r=i+" - "+t.map(me).join(" ");this._logStdout?this._logStdout(e,r):this._stdout?this._stdout(e,r):this._defaultStdout.apply(this,A([e,i],t))}},e.prototype.reportLog=function(t,n,i){this.__pushLocalLog(4-t,i,n);var r=JSON.stringify({message:i}).replace(/"/g,'""');r='"'+r+'"';var o={level:t,content:[e.sessionId,Date.now(),this.type,t,n,r].join()+"\n"};e.realTimeLogList.push(o),e.realTimeLogList.length>=600&&(e.realTimeLogList=e.realTimeLogList.slice(-500))},e.prototype.set=function(e,t){this.warn("logger.set has being deprecated!")},e.prototype.setStdout=function(e){this._stdout=e},e.prototype.__clearRealTimeLog=function(){e.realTimeLogList=[]},e.databaseLogList=[],e.realTimeLogList=[],e.sessionId=G(),e.userId="",e}(),ve=new _e("RCLog"),ye=function(){function e(){this._map={}}return e.prototype.on=function(e,t,n){var i=this._map[e]||(this._map[e]=[]);i.some((function(e){return e.listener===t&&e.target===n}))||i.push({listener:t,target:n})},e.prototype.once=function(e,t,n){var i=this._map[e]||(this._map[e]=[]);i.some((function(e){return e.listener===t&&e.target===n}))||i.push({listener:t,target:n,once:!0})},e.prototype.off=function(e,t,n){var i=this._map[e];i&&((i=i.filter((function(e){return e.listener!==t||e.target!==n}))).length?this._map[e]=i:delete this._map[e])},e.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=this._map[e];if(i)for(var r=i.length-1;r>=0;r-=1){var o=i[r],s=o.target,a=o.once,c=o.listener;a&&i.splice(r,1);try{c.call.apply(c,A([s],t))}catch(e){ve.error(e)}}},e.prototype.removeAll=function(e){delete this._map[e]},e.prototype.clear=function(){Object.keys(this._map).forEach(this.removeAll,this)},e}();!function(e){e[e.SEND=1]="SEND",e[e.RECEIVE=2]="RECEIVE"}(ge||(ge={}));var Ce,Ee=ge;!function(e){e[e.TIMEOUT=-1]="TIMEOUT",e[e.UNKNOWN=-2]="UNKNOWN",e[e.PARAMETER_ERROR=-3]="PARAMETER_ERROR",e[e.EXTRA_METHOD_UNDEFINED=-4]="EXTRA_METHOD_UNDEFINED",e[e.MAIN_PROCESS_ERROR=-5]="MAIN_PROCESS_ERROR",e[e.PARAMETER_CHANGED=-6]="PARAMETER_CHANGED",e[e.SUCCESS=0]="SUCCESS",e[e.RC_MSG_UNAUTHORIZED=20406]="RC_MSG_UNAUTHORIZED",e[e.RC_DISCUSSION_GROUP_ID_INVALID=20407]="RC_DISCUSSION_GROUP_ID_INVALID",e[e.SEND_FREQUENCY_TOO_FAST=20604]="SEND_FREQUENCY_TOO_FAST",e[e.NOT_IN_DISCUSSION=21406]="NOT_IN_DISCUSSION",e[e.FORBIDDEN_IN_GROUP=22408]="FORBIDDEN_IN_GROUP",e[e.RECALL_MESSAGE=25101]="RECALL_MESSAGE",e[e.NOT_IN_GROUP=22406]="NOT_IN_GROUP",e[e.NOT_IN_CHATROOM=23406]="NOT_IN_CHATROOM",e[e.FORBIDDEN_IN_CHATROOM=23408]="FORBIDDEN_IN_CHATROOM",e[e.RC_CHATROOM_USER_KICKED=23409]="RC_CHATROOM_USER_KICKED",e[e.RC_CHATROOM_NOT_EXIST=23410]="RC_CHATROOM_NOT_EXIST",e[e.RC_CHATROOM_IS_FULL=23411]="RC_CHATROOM_IS_FULL",e[e.RC_CHATROOM_PATAMETER_INVALID=23412]="RC_CHATROOM_PATAMETER_INVALID",e[e.CHATROOM_GET_HISTORYMSG_ERROR=23413]="CHATROOM_GET_HISTORYMSG_ERROR",e[e.CHATROOM_NOT_OPEN_HISTORYMSG_STORE=23414]="CHATROOM_NOT_OPEN_HISTORYMSG_STORE",e[e.CHATROOM_KV_EXCEED=23423]="CHATROOM_KV_EXCEED",e[e.CHATROOM_KV_OVERWRITE_INVALID=23424]="CHATROOM_KV_OVERWRITE_INVALID",e[e.CHATROOM_KV_STORE_NOT_OPEN=23426]="CHATROOM_KV_STORE_NOT_OPEN",e[e.CHATROOM_KEY_NOT_EXIST=23427]="CHATROOM_KEY_NOT_EXIST",
/*!
     聊天室设置 KV 失败，出现在两人或者多端同时操作一个 kv。
     如果出现该错误，为避免和其他端同时操作，请延时一定时间再试
    */
e[e.CHATROOM_KV_SET_ERROR=23431]="CHATROOM_KV_SET_ERROR",e[e.SENSITIVE_SHIELD=21501]="SENSITIVE_SHIELD",e[e.SENSITIVE_REPLACE=21502]="SENSITIVE_REPLACE",e[e.JOIN_IN_DISCUSSION=21407]="JOIN_IN_DISCUSSION",e[e.CREATE_DISCUSSION=21408]="CREATE_DISCUSSION",e[e.INVITE_DICUSSION=21409]="INVITE_DICUSSION",e[e.GET_USERINFO_ERROR=23407]="GET_USERINFO_ERROR",e[e.REJECTED_BY_BLACKLIST=405]="REJECTED_BY_BLACKLIST",e[e.RC_NET_CHANNEL_INVALID=30001]="RC_NET_CHANNEL_INVALID",e[e.RC_NET_UNAVAILABLE=30002]="RC_NET_UNAVAILABLE",e[e.RC_MSG_RESP_TIMEOUT=30003]="RC_MSG_RESP_TIMEOUT",e[e.RC_HTTP_SEND_FAIL=30004]="RC_HTTP_SEND_FAIL",e[e.RC_HTTP_REQ_TIMEOUT=30005]="RC_HTTP_REQ_TIMEOUT",e[e.RC_HTTP_RECV_FAIL=30006]="RC_HTTP_RECV_FAIL",e[e.RC_NAVI_RESOURCE_ERROR=30007]="RC_NAVI_RESOURCE_ERROR",e[e.RC_NODE_NOT_FOUND=30008]="RC_NODE_NOT_FOUND",e[e.RC_DOMAIN_NOT_RESOLVE=30009]="RC_DOMAIN_NOT_RESOLVE",e[e.RC_SOCKET_NOT_CREATED=30010]="RC_SOCKET_NOT_CREATED",e[e.RC_SOCKET_DISCONNECTED=30011]="RC_SOCKET_DISCONNECTED",e[e.RC_PING_SEND_FAIL=30012]="RC_PING_SEND_FAIL",e[e.RC_PONG_RECV_FAIL=30013]="RC_PONG_RECV_FAIL",e[e.RC_MSG_SEND_FAIL=30014]="RC_MSG_SEND_FAIL",e[e.RC_MSG_CONTENT_EXCEED_LIMIT=30016]="RC_MSG_CONTENT_EXCEED_LIMIT",e[e.RC_CONN_ACK_TIMEOUT=31e3]="RC_CONN_ACK_TIMEOUT",e[e.RC_CONN_PROTO_VERSION_ERROR=31001]="RC_CONN_PROTO_VERSION_ERROR",e[e.RC_CONN_ID_REJECT=31002]="RC_CONN_ID_REJECT",e[e.RC_CONN_SERVER_UNAVAILABLE=31003]="RC_CONN_SERVER_UNAVAILABLE",e[e.RC_CONN_USER_OR_PASSWD_ERROR=31004]="RC_CONN_USER_OR_PASSWD_ERROR",e[e.RC_CONN_NOT_AUTHRORIZED=31005]="RC_CONN_NOT_AUTHRORIZED",e[e.RC_CONN_REDIRECTED=31006]="RC_CONN_REDIRECTED",e[e.RC_CONN_PACKAGE_NAME_INVALID=31007]="RC_CONN_PACKAGE_NAME_INVALID",e[e.RC_CONN_APP_BLOCKED_OR_DELETED=31008]="RC_CONN_APP_BLOCKED_OR_DELETED",e[e.RC_CONN_USER_BLOCKED=31009]="RC_CONN_USER_BLOCKED",e[e.RC_DISCONN_KICK=31010]="RC_DISCONN_KICK",e[e.RC_DISCONN_EXCEPTION=31011]="RC_DISCONN_EXCEPTION",e[e.RC_APP_AUTH_NOT_PASS=31026]="RC_APP_AUTH_NOT_PASS",e[e.RC_OTP_USED=31027]="RC_OTP_USED",e[e.RC_PLATFORM_ERROR=31028]="RC_PLATFORM_ERROR",e[e.RC_QUERY_ACK_NO_DATA=32001]="RC_QUERY_ACK_NO_DATA",e[e.RC_MSG_DATA_INCOMPLETE=32002]="RC_MSG_DATA_INCOMPLETE",e[e.BIZ_ERROR_CLIENT_NOT_INIT=33001]="BIZ_ERROR_CLIENT_NOT_INIT",e[e.BIZ_ERROR_DATABASE_ERROR=33002]="BIZ_ERROR_DATABASE_ERROR",e[e.BIZ_ERROR_INVALID_PARAMETER=33003]="BIZ_ERROR_INVALID_PARAMETER",e[e.BIZ_ERROR_NO_CHANNEL=33004]="BIZ_ERROR_NO_CHANNEL",e[e.BIZ_ERROR_RECONNECT_SUCCESS=33005]="BIZ_ERROR_RECONNECT_SUCCESS",e[e.BIZ_ERROR_CONNECTING=33006]="BIZ_ERROR_CONNECTING",e[e.MSG_ROAMING_SERVICE_UNAVAILABLE=33007]="MSG_ROAMING_SERVICE_UNAVAILABLE",e[e.MSG_INSERT_ERROR=33008]="MSG_INSERT_ERROR",e[e.MSG_DEL_ERROR=33009]="MSG_DEL_ERROR",e[e.TAG_EXISTS=33101]="TAG_EXISTS",e[e.TAG_NOT_EXIST=33100]="TAG_NOT_EXIST",e[e.NO_TAG_IN_CONVER=33102]="NO_TAG_IN_CONVER",e[e.CONVER_REMOVE_ERROR=34001]="CONVER_REMOVE_ERROR",e[e.CONVER_GETLIST_ERROR=34002]="CONVER_GETLIST_ERROR",e[e.CONVER_SETOP_ERROR=34003]="CONVER_SETOP_ERROR",e[e.CONVER_TOTAL_UNREAD_ERROR=34004]="CONVER_TOTAL_UNREAD_ERROR",e[e.CONVER_TYPE_UNREAD_ERROR=34005]="CONVER_TYPE_UNREAD_ERROR",e[e.CONVER_ID_TYPE_UNREAD_ERROR=34006]="CONVER_ID_TYPE_UNREAD_ERROR",e[e.CONVER_CLEAR_ERROR=34007]="CONVER_CLEAR_ERROR",e[e.EXPANSION_LIMIT_EXCEET=34010]="EXPANSION_LIMIT_EXCEET",e[e.MESSAGE_KV_NOT_SUPPORT=34008]="MESSAGE_KV_NOT_SUPPORT",e[e.CLEAR_HIS_TIME_ERROR=34011]="CLEAR_HIS_TIME_ERROR",e[e.CONVER_OUT_LIMIT_ERROR=34013]="CONVER_OUT_LIMIT_ERROR",e[e.CONVER_GET_ERROR=35021]="CONVER_GET_ERROR",e[e.GROUP_SYNC_ERROR=35001]="GROUP_SYNC_ERROR",e[e.GROUP_MATCH_ERROR=35002]="GROUP_MATCH_ERROR",e[e.READ_RECEIPT_ERROR=35003]="READ_RECEIPT_ERROR",e[e.PACKAGE_ENVIRONMENT_ERROR=35006]="PACKAGE_ENVIRONMENT_ERROR",e[e.CAN_NOT_RECONNECT=35007]="CAN_NOT_RECONNECT",e[e.SERVER_UNAVAILABLE=35008]="SERVER_UNAVAILABLE",e[e.HOSTNAME_ERROR=35009]="HOSTNAME_ERROR",e[e.HAS_OHTER_SAME_CLIENT_ON_LINE=35010]="HAS_OHTER_SAME_CLIENT_ON_LINE",e[e.METHOD_NOT_AVAILABLE=35011]="METHOD_NOT_AVAILABLE",e[e.METHOD_NOT_SUPPORT=35012]="METHOD_NOT_SUPPORT",e[e.MSG_LIMIT_ERROR=35013]="MSG_LIMIT_ERROR",e[e.METHOD_ONLY_SUPPORT_ULTRA_GROUP=35014]="METHOD_ONLY_SUPPORT_ULTRA_GROUP",e[e.UPLOAD_FILE_FAILED=35020]="UPLOAD_FILE_FAILED",e[e.CHATROOM_ID_ISNULL=36001]="CHATROOM_ID_ISNULL",e[e.CHARTOOM_JOIN_ERROR=36002]="CHARTOOM_JOIN_ERROR",e[e.CHATROOM_HISMESSAGE_ERROR=36003]="CHATROOM_HISMESSAGE_ERROR",e[e.CHATROOM_KV_NOT_FOUND=36004]="CHATROOM_KV_NOT_FOUND",e[e.BLACK_ADD_ERROR=37001]="BLACK_ADD_ERROR",e[e.BLACK_GETSTATUS_ERROR=37002]="BLACK_GETSTATUS_ERROR",e[e.BLACK_REMOVE_ERROR=37003]="BLACK_REMOVE_ERROR",e[e.DRAF_GET_ERROR=38001]="DRAF_GET_ERROR",e[e.DRAF_SAVE_ERROR=38002]="DRAF_SAVE_ERROR",e[e.DRAF_REMOVE_ERROR=38003]="DRAF_REMOVE_ERROR",e[e.SUBSCRIBE_ERROR=39001]="SUBSCRIBE_ERROR",e[e.NOT_SUPPORT=39002]="NOT_SUPPORT",e[e.QNTKN_FILETYPE_ERROR=41001]="QNTKN_FILETYPE_ERROR",e[e.QNTKN_GET_ERROR=41002]="QNTKN_GET_ERROR",e[e.COOKIE_ENABLE=51001]="COOKIE_ENABLE",e[e.GET_MESSAGE_BY_ID_ERROR=61001]="GET_MESSAGE_BY_ID_ERROR",e[e.HAVNODEVICEID=24001]="HAVNODEVICEID",e[e.DEVICEIDISHAVE=24002]="DEVICEIDISHAVE",e[e.FEILD=24009]="FEILD",e[e.VOIPISNULL=24013]="VOIPISNULL",e[e.NOENGINETYPE=24010]="NOENGINETYPE",e[e.NULLCHANNELNAME=24011]="NULLCHANNELNAME",e[e.VOIPDYANMICERROR=24012]="VOIPDYANMICERROR",e[e.NOVOIP=24014]="NOVOIP",e[e.INTERNALERRROR=24015]="INTERNALERRROR",e[e.VOIPCLOSE=24016]="VOIPCLOSE",e[e.CLOSE_BEFORE_OPEN=51001]="CLOSE_BEFORE_OPEN",e[e.ALREADY_IN_USE=51002]="ALREADY_IN_USE",e[e.INVALID_CHANNEL_NAME=51003]="INVALID_CHANNEL_NAME",e[e.VIDEO_CONTAINER_IS_NULL=51004]="VIDEO_CONTAINER_IS_NULL",e[e.DELETE_MESSAGE_ID_IS_NULL=61001]="DELETE_MESSAGE_ID_IS_NULL",e[e.CANCEL=1]="CANCEL",e[e.REJECT=2]="REJECT",e[e.HANGUP=3]="HANGUP",e[e.BUSYLINE=4]="BUSYLINE",e[e.NO_RESPONSE=5]="NO_RESPONSE",e[e.ENGINE_UN_SUPPORTED=6]="ENGINE_UN_SUPPORTED",e[e.NETWORK_ERROR=7]="NETWORK_ERROR",e[e.REMOTE_CANCEL=11]="REMOTE_CANCEL",e[e.REMOTE_REJECT=12]="REMOTE_REJECT",e[e.REMOTE_HANGUP=13]="REMOTE_HANGUP",e[e.REMOTE_BUSYLINE=14]="REMOTE_BUSYLINE",e[e.REMOTE_NO_RESPONSE=15]="REMOTE_NO_RESPONSE",e[e.REMOTE_ENGINE_UN_SUPPORTED=16]="REMOTE_ENGINE_UN_SUPPORTED",e[e.REMOTE_NETWORK_ERROR=17]="REMOTE_NETWORK_ERROR",e[e.VOIP_NOT_AVALIABLE=18]="VOIP_NOT_AVALIABLE",e[e.CHATROOM_KV_STORE_NOT_ALL_SUCCESS=23428]="CHATROOM_KV_STORE_NOT_ALL_SUCCESS",e[e.CHATROOM_KV_STORE_OUT_LIMIT=23429]="CHATROOM_KV_STORE_OUT_LIMIT"}(Ce||(Ce={}));var be,Te=Ce;!function(e){e[e.CONNECTED=0]="CONNECTED",e[e.CONNECTING=1]="CONNECTING",e[e.DISCONNECTED=2]="DISCONNECTED",e[e.NETWORK_UNAVAILABLE=3]="NETWORK_UNAVAILABLE",e[e.CONNECTION_CLOSED=4]="CONNECTION_CLOSED",e[e.KICKED_OFFLINE_BY_OTHER_CLIENT=6]="KICKED_OFFLINE_BY_OTHER_CLIENT",e[e.WEBSOCKET_UNAVAILABLE=7]="WEBSOCKET_UNAVAILABLE",e[e.WEBSOCKET_ERROR=8]="WEBSOCKET_ERROR",e[e.BLOCKED=9]="BLOCKED",e[e.DOMAIN_INCORRECT=12]="DOMAIN_INCORRECT",e[e.DISCONNECT_BY_SERVER=13]="DISCONNECT_BY_SERVER",e[e.REDIRECT=14]="REDIRECT",e[e.APPKEY_IS_FAKE=20]="APPKEY_IS_FAKE",e[e.ULTRALIMIT=1101]="ULTRALIMIT",e[e.REQUEST_NAVI=201]="REQUEST_NAVI",e[e.RESPONSE_NAVI=202]="RESPONSE_NAVI",e[e.RESPONSE_NAVI_ERROR=203]="RESPONSE_NAVI_ERROR",e[e.RESPONSE_NAVI_TIMEOUT=204]="RESPONSE_NAVI_TIMEOUT"}(be||(be={}));var Se,Re=be,Ie={ACCEPTED:0,UNACCEPTABLE_PROTOCOL_VERSION:1,IDENTIFIER_REJECTED:2,SERVER_UNAVAILABLE:3,TOKEN_INCORRECT:4,NOT_AUTHORIZED:5,REDIRECT:6,PACKAGE_ERROR:7,APP_BLOCK_OR_DELETE:8,BLOCK:9,TOKEN_EXPIRE:10,DEVICE_ERROR:11,HOSTNAME_ERROR:12,HASOHTERSAMECLIENTONLINE:13,IN_OTHER_CLUSTER:15,APP_AUTH_NOT_PASS:16,OTP_USED:17,PLATFORM_ERROR:18};!function(e){e.TextMessage="RC:TxtMsg",e.VOICE="RC:VcMsg",e.HQ_VOICE="RC:HQVCMsg",e.IMAGE="RC:ImgMsg",e.GIF="RC:GIFMsg",e.RICH_CONTENT="RC:ImgTextMsg",e.LOCATION="RC:LBSMsg",e.FILE="RC:FileMsg",e.SIGHT="RC:SightMsg",e.COMBINE="RC:CombineMsg",e.CHRM_KV_NOTIFY="RC:chrmKVNotiMsg",e.LOG_COMMAND="RC:LogCmdMsg",e.EXPANSION_NOTIFY="RC:MsgExMsg",e.REFERENCE="RC:ReferenceMsg",e.RECALL="RC:RcCmd",e.READ_RECEIPT="RC:ReadNtf",e.READ_RECEIPT_REQUEST="RC:RRReqMsg",e.READ_RECEIPT_RESPONSE="RC:RRRspMsg",e.SYNC_READ_STATUS="RC:SRSMsg",e.GROUP_READ_RECEIPT_REQUEST="RC:RRMsg",e.CHATROOM_JOIN="RC:ChrmJoinNtf",e.CHATROOM_LEFT="RC:ChrmQuitNtf",e.CHATROOM_MERGE_CHANGE="RC:ChrmMemChange",e.TYPING_STATUS="RC:TypSts",e.INTERCEPT="RC:InterceptMsg"}(Se||(Se={}));var we,Oe=Se;!function(e){e[e.OPEN=1]="OPEN",e[e.CLOSE=2]="CLOSE"}(we||(we={}));var ke,Me=we;!function(e){e[e.ALL=1]="ALL",e[e.SINGAL=2]="SINGAL"}(ke||(ke={}));var xe,Pe=ke;!function(e){e[e.QINIU=1]="QINIU",e[e.ALI=2]="ALI",e[e.AWS=3]="AWS",e[e.STC=4]="STC"}(xe||(xe={}));var Ae,De=xe;!function(e){e[e.UPDATE=1]="UPDATE",e[e.DELETE=2]="DELETE"}(Ae||(Ae={}));var Ne,Le=Ae;!function(e){e[e.QUIT=0]="QUIT",e[e.JOIN=1]="JOIN"}(Ne||(Ne={}));var Ue,Be=Ne;!function(e){
/*!
    全局敏感词：命中了融云内置的全局敏感词
   */
e[e.GLOBAL=1]="GLOBAL",
/*!
     自定义敏感词拦截：命中了客户在融云自定义的敏感词
    */
e[e.CUSTOM=2]="CUSTOM",
/*!
     第三方审核拦截：命中了第三方（数美）或模板路由决定不下发的状态
    */
e[e.THIRD_PARTY=3]="THIRD_PARTY"}(Ue||(Ue={}));var Ve,je=Ue;!function(e){e[e.typing=0]="typing"}(Ve||(Ve={}));var Fe,$e,He,Ke=Ve;!function(e){e[e.RTC=0]="RTC",e[e.LIVE=2]="LIVE"}(Fe||(Fe={})),function(e){e[e.AUDIO_AND_VIDEO=0]="AUDIO_AND_VIDEO",e[e.AUDIO=1]="AUDIO"}($e||($e={})),function(e){e[e.ANCHOR=1]="ANCHOR",e[e.AUDIENCE=2]="AUDIENCE"}(He||(He={}));var We,qe,Ge,ze={"RC:VCAccept":"RC:VCAccept","RC:VCRinging":"RC:VCRinging","RC:VCSummary":"RC:VCSummary","RC:VCHangup":"RC:VCHangup","RC:VCInvite":"RC:VCInvite","RC:VCModifyMedia":"RC:VCModifyMedia","RC:VCModifyMem":"RC:VCModifyMem"};!function(e){e[e.ROOM=1]="ROOM",e[e.PERSON=2]="PERSON"}(We||(We={})),function(e){e[e.AnchorToViewer=1]="AnchorToViewer",e[e.ViewerToAnchor=2]="ViewerToAnchor"}(qe||(qe={})),function(e){e[e.KICK=0]="KICK",e[e.REFUSE=1]="REFUSE",e[e.COEXIST=2]="COEXIST"}(Ge||(Ge={}));var Ye="undefined"!=typeof window&&window?(window.__RCVersionInfo||(window.__RCVersionInfo={}),window.__RCVersionInfo):{};Ye.engine="5.2.1";var Je,Xe,Qe=function(){function e(){}return e.add=function(e,t){Ye[e]=t},e.validEngine=function(e){var t=e.match(/\d+\.\d+\.\d+/);if(!t)return ve.warn("The validation engine version '"+e+"' is invalid!"),!1;var n=t[0].split(".").map((function(e){return e.padStart(3,"0")})).join("");return Ye.engine.match(/\d+\.\d+\.\d+/)[0].split(".").map((function(e){return e.padStart(3,"0")})).join("")>=n},e.getInfo=function(){return Ye},e}();!function(e){e[e.STRING=0]="STRING",e[e.ONLY_STRING=1]="ONLY_STRING",e[e.NUMBER=2]="NUMBER",e[e.BOOLEAN=3]="BOOLEAN",e[e.OBJECT=4]="OBJECT",e[e.ARRAY=5]="ARRAY",e[e.CALLBACK=6]="CALLBACK",e[e.CHANNEL_ID=7]="CHANNEL_ID"}(Xe||(Xe={}));var Ze,et,tt,nt,it,rt=((Je={})[Xe.STRING]=ie,Je[Xe.ONLY_STRING]=Q,Je[Xe.NUMBER]=ee,Je[Xe.BOOLEAN]=function(e){return"boolean"==typeof e},Je[Xe.OBJECT]=oe,Je[Xe.ARRAY]=te,Je[Xe.CALLBACK]=function(e){var t=!0;return oe(e)||(t=!1),(e=e||{}).onSuccess&&!se(e.onSuccess)&&(t=!1),e.onError&&!se(e.onError)&&(t=!1),t},Je[Xe.CHANNEL_ID]=function(e){var t=!1;return Q(e)&&!/_/g.test(e)&&e.length<=20&&(t=!0),t},Je),ot=function(e){function t(t){var n=e.call(this,t)||this;return n.name="RCAssertError",n}return k(t,e),t}(Error),st=function(e,t,n,i){if(void 0===i&&(i=!1),!at(e,t,n,i))throw new ot("'"+e+"' is invalid: "+JSON.stringify(t))},at=function(e,t,n,i){void 0===i&&(i=!1),n=rt[n]||n;var r=i&&!n(t)||!i&&!(ae(t)||null===t||n(t));return r&&ve.error("'"+e+"' is invalid: "+JSON.stringify(t)),!r},ct=function(e){if(!oe(e)||void 0===e.low||void 0===e.high)return e;var t=e.low;return t<0&&(t+=4294967296),t=t.toString(16),parseInt(e.high.toString(16)+"00000000".replace(new RegExp("0{"+t.length+"}$"),t),16)},lt=function(e,t){var n=Math.floor(1e3*Math.random()%1e4),i=q(),r=function(e){e=e||"-";var t=new Date;return""+t.getFullYear()+e+(t.getMonth()+1)+e+t.getDate()}(),o=(new Date).getTime(),s="";if(t){var a=t.split(".");s="."+a[a.length-1]}return e+"__RC-"+r+"_"+n+"_"+o+i+s},ut=function(e){var t="application/octet-stream";switch(e){case X.IMAGE:t="image/jpeg";break;case X.AUDIO:t="audio/amr";break;case X.VIDEO:t="video/3gpp";break;case X.SIGHT:t="video/mpeg4";break;case X.COMBINE_HTML:t="text/html"}return t},dt=function(e,t){void 0===e&&(e={}),void 0===t&&(t={});var n=e.threadId,i=e.apnsCollapseId,r=e.category,o=e.richMediaUri,s=t.channelIdMi,a=t.channelIdHW,c=t.channelIdOPPO,l=t.typeVivo,u=t.googleConfig,d={};d["thread-id"]=n||"",d["apns-collapse-id"]=i||"",d.category=r||"",d.richMediaUri=o||"";var h={};h.collapse_key=null==u?void 0:u.collapseKey,h.imageUrl=null==u?void 0:u.imageUrl;var p=null==u?void 0:u.priority;p&&!["high","normal"].includes(p)&&(p="normal"),h.priority=p;var f=[{HW:{channelId:a||""}},{MI:{channelId:s||""}},{OPPO:{channelId:c||""}},{VIVO:{classification:l||""}},{APNS:d},{FCM:h}];return JSON.stringify(f)},ht=function(e,t){var n={},i={notificationId:t||""};if(!e)return{iOSConfig:n,androidConfig:i};try{var r=JSON.parse(e);null==r||r.forEach((function(e){var t,r,o,s,a=Object.keys(e);if(0!==a.length){var c=a[0];switch(c){case"HW":return void(i.channelIdHW=null===(t=e[c])||void 0===t?void 0:t.channelId);case"MI":return void(i.channelIdMi=null===(r=e[c])||void 0===r?void 0:r.channelId);case"OPPO":return void(i.channelIdOPPO=null===(o=e[c])||void 0===o?void 0:o.channelId);case"VIVO":return void(i.typeVivo=null===(s=e[c])||void 0===s?void 0:s.classification);case"APNS":return n.threadId=e[c]["thread-id"],n.apnsCollapseId=e[c]["apns-collapse-id"],n.category=e[c].category,void(n.richMediaUri=e[c].richMediaUri);case"FCM":i.googleConfig={collapseKey:e[c].collapse_key||"",imageUrl:e[c].imageUrl||"",priority:e[c].priority||""}}}}))}catch(t){ve.error("Wrong format for pushConfigs field! content: "+e)}return{iOSConfig:n,androidConfig:i}},pt=function(e){var t=/^[A-Za-z0-9_=+-]+$/.test(e),n=e.length;return t&&n<=128&&n>=1},ft=function(e){var t=e.length;return t<=4096&&t>=1},gt=function(e,t,n){t=t||function(){};var i=(n=n||{}).isReverse;oe(e)&&function(){for(var n in e)t(e[n],n,e)}(),(te(e)||Q(e))&&function(){if(i)for(var n=e.length-1;n>=0;n--)t(e[n],n);else for(var r=0,o=e.length;r<o;r++)t(e[r],r)}()},mt=function(e,t){return gt(e,(function(n,i){e[i]=t(n,i)})),e},_t=function(e,t){if(e.indexOf)return e.indexOf(t);var n=-1;return gt(e,(function(e,i){t===e&&(n=i)})),n},vt=function(e,t){return-1!==_t(e,t)},yt=function(e,t){var n=[];return gt(e,(function(e){n.push(e)})),-1!==_t(n,t)},Ct=function(e){return JSON.parse(JSON.stringify(e))},Et=function(){return"undefined"!=typeof RCCppEngine},bt=function(e){if("browser"!==e.tag)return{type:e.tag,version:"UnKonw"};var t,n,i=navigator.userAgent,r={IE:/rv:([\d.]+)\) like Gecko|MSIE ([\d.]+)/,Edge:/Edge\/([\d.]+)/,Firefox:/Firefox\/([\d.]+)/,Opera:/(?:OPERA|OPR).([\d.]+)/,WeChat:/MicroMessenger\/([\d.]+)/,QQBrowser:/QQBrowser\/([\d.]+)/,Chrome:/Chrome\/([\d.]+)/,Safari:/Version\/([\d.]+).*Safari/,iOSChrome:/Mobile\/([\d.]+).*Safari/};for(var o in r)if(r.hasOwnProperty(o)){var s=i.match(r[o]);if(s){n=o,t=s[1]||s[2];break}}return{type:n||"UnKonw",version:t||"UnKonw"}},Tt=function(e){switch(e){case Ie.SERVER_UNAVAILABLE:return Te.SERVER_UNAVAILABLE;case Ie.TOKEN_INCORRECT:return Te.RC_CONN_USER_OR_PASSWD_ERROR;case Ie.REDIRECT:return Te.RC_CONN_REDIRECTED;case Ie.APP_BLOCK_OR_DELETE:return Te.RC_CONN_APP_BLOCKED_OR_DELETED;case Ie.BLOCK:return Te.RC_CONN_USER_BLOCKED;case Ie.TOKEN_EXPIRE:return Te.RC_CONN_USER_OR_PASSWD_ERROR;case Ie.HOSTNAME_ERROR:return Te.HOSTNAME_ERROR;case Ie.HASOHTERSAMECLIENTONLINE:return Te.HAS_OHTER_SAME_CLIENT_ON_LINE;case Ie.APP_AUTH_NOT_PASS:return Te.RC_APP_AUTH_NOT_PASS;case Ie.OTP_USED:return Te.RC_OTP_USED;case Ie.PLATFORM_ERROR:return Te.RC_PLATFORM_ERROR;default:return Te.RC_NET_UNAVAILABLE}},St=function(e){var t;if("object"==typeof e)if(Array.isArray(e))for(var n in t=[],e)t.push(St(e[n]));else for(var n in t={},e)t[n]=St(e[n]);else t=e;return t},Rt=function(e){var t;try{t=St(e)}catch(o){ve.error("clone err:",o),t=JSON.parse(JSON.stringify(e))}return t},It=function(e){var t={},n=JSON.parse(e);return gt(n,(function(e,n){t[n]=e.v})),t},wt={_delayTime:0,setTime:function(e){var t=(new Date).getTime();wt._delayTime=t-e},getTime:function(){var e=wt._delayTime;return(new Date).getTime()-e}},Ot=function(e,t){var n=0;return e.isAutoDelete&&(n|=1),e.isOverwrite&&(n|=2),2===t&&(n|=4),n};!function(e){e[e.AT_MOST_ONCE=0]="AT_MOST_ONCE",e[e.AT_LEAST_ONCE=1]="AT_LEAST_ONCE",e[e.EXACTLY_ONCE=2]="EXACTLY_ONCE",e[e.DEFAULT=3]="DEFAULT"}(Ze||(Ze={})),function(e){e[e.SYMMETRIC=0]="SYMMETRIC",e[e.CONNECT=1]="CONNECT",e[e.CONN_ACK=2]="CONN_ACK",e[e.PUBLISH=3]="PUBLISH",e[e.PUB_ACK=4]="PUB_ACK",e[e.QUERY=5]="QUERY",e[e.QUERY_ACK=6]="QUERY_ACK",e[e.QUERY_CONFIRM=7]="QUERY_CONFIRM",e[e.SUBSCRIBE=8]="SUBSCRIBE",e[e.SUB_ACK=9]="SUB_ACK",e[e.UNSUBSCRIBE=10]="UNSUBSCRIBE",e[e.UNSUB_ACK=11]="UNSUB_ACK",e[e.PING_REQ=12]="PING_REQ",e[e.PING_RESP=13]="PING_RESP",e[e.DISCONNECT=14]="DISCONNECT",e[e.RESERVER2=15]="RESERVER2"}(et||(et={})),function(e){e.CONN_ACK="ConnAckMessage",e.DISCONNECT="DisconnectMessage",e.PING_REQ="PingReqMessage",e.PING_RESP="PingRespMessage",e.PUBLISH="PublishMessage",e.PUB_ACK="PubAckMessage",e.QUERY="QueryMessage",e.QUERY_CON="QueryConMessage",e.QUERY_ACK="QueryAckMessage"}(tt||(tt={})),function(e){e.PUB="pub",e.QUERY="qry"}(nt||(nt={})),function(e){e[e.V4=4]="V4",e[e.V3=3]="V3"}(it||(it={}));var kt,Mt=function(){function e(e,t,n,i){void 0===t&&(t=!1),void 0===n&&(n=Ze.AT_LEAST_ONCE),void 0===i&&(i=!1),this._retain=!1,this.qos=Ze.AT_LEAST_ONCE,this._dup=!1,this.syncMsg=!1;var r=e>0;e&&r&&1===arguments.length?(this._retain=(1&e)>0,this.qos=(6&e)>>1,this._dup=(8&e)>0,this.type=e>>4&15,this.syncMsg=8==(8&e)):(this.type=e,this._retain=t,this.qos=n,this._dup=i)}return e.prototype.encode=function(){var e=this.type<<4;return e|=this._retain?1:0,e|=this.qos<<1,e|(this._dup?8:0)},e}(),xt=function(){function e(){}return e.writeUTF=function(e,t){var n=[],i=0;if(Q(e))for(var r=0,o=e.length;r<o;r++){var s=e.charCodeAt(r);s>=0&&s<=127?(i+=1,n.push(s)):s>=128&&s<=2047?(i+=2,n.push(192|31&s>>6),n.push(128|63&s)):s>=2048&&s<=65535&&(i+=3,n.push(224|15&s>>12),n.push(128|63&s>>6),n.push(128|63&s))}for(r=0,o=n.length;r<o;r++)n[r]>255&&(n[r]&=255);return t?n:i<=255?[0,i].concat(n):[i>>8,255&i].concat(n)},e.readUTF=function(e){for(var t,n,i=[],r=-1,o=e,s="";++r<o.length;){var a=Number(o[r]);if(a===(127&a)||(240==(240&a)?a=(a=(a=(a^=240)<<6|128^o[++r])<<6|128^o[++r])<<6|128^o[++r]:224==(224&a)?a=(a=(a^=224)<<6|128^o[++r])<<6|128^o[++r]:192==(192&a)&&(a=(a^=192)<<6|128^o[++r])),!isFinite(a)||a<0||a>1114111||Math.floor(a)!==a)throw RangeError("Invalid code point: "+a);a<=65535?i.push(a):(t=(a-=65536)>>10|55296,n=a%1024|56320,i.push(t,n)),(r+1===o.length||i.length>16384)&&(s+=String.fromCharCode.apply(null,i),i.length=0)}return s},e}(),Pt=function(){function e(e){this._position=0,this._poolLen=0,this._pool=e,this._poolLen=e.length}return e.prototype.check=function(){return this._position>=this._pool.length},e.prototype.read2Byte=function(){var e=this;if(e.check())return-1;for(var t="",n=0;n<2;n++){var i=e._pool[e._position++].toString(16);1===i.length&&(i="0"+i),t+=i.toString()}return parseInt(t,16)},e.prototype.readInt=function(){var e=this;if(e.check())return-1;for(var t="",n=0;n<4;n++){var i=e._pool[e._position++].toString(16);1===i.length&&(i="0"+i),t+=i.toString()}return parseInt(t,16)},e.prototype.readLong=function(){var e=this;if(e.check())return-1;for(var t="",n=0;n<8;n++){var i=e._pool[e._position++].toString(16);1===i.length&&(i="0"+i),t+=i}return parseInt(t,16)},e.prototype.readByte=function(){if(this.check())return-1;var e=this._pool[this._position++];return e>255&&(e&=255),e},e.prototype.readUTF=function(){if(this.check())return"";var e=this.readByte()<<8|this.readByte(),t=this._pool.subarray(this._position,this._position+=e);return xt.readUTF(t)},e.prototype.readAll=function(){return this._pool.subarray(this._position,this._poolLen)},e}(),At=function(){function e(){this._pool=[],this._position=0,this._writen=0}return e.prototype.write=function(e){return-1!==Object.prototype.toString.call(e).indexOf("Array")?this._pool=this._pool.concat(e):e>=0&&(e>255&&(e&=255),this._pool.push(e),this._writen++),e},e.prototype.writeArr=function(e){return this._pool=this._pool.concat(e),e},e.prototype.writeUTF=function(e){var t=xt.writeUTF(e);this._pool=this._pool.concat(t),this._writen+=t.length},e.prototype.getBytesArray=function(){return this._pool},e}(),Dt="UpStreamMessage",Nt="PushExtra",Lt="DownStreamMessage",Ut="DownStreamMessages",Bt="SessionsAttQryInput",Vt="SessionsAttOutput",jt="SyncRequestMsg",Ft="ChrmPullMsg",$t="NotifyMsg",Ht="HistoryMsgInput",Kt="HistoryMsgOuput",Wt="RelationQryInput",qt="RelationsOutput",Gt="DeleteSessionsInput",zt="SessionInfo",Yt="DeleteSessionsOutput",Jt="RelationsInput",Xt="DeleteMsgInput",Qt="CleanHisMsgInput",Zt="SessionMsgReadInput",en="ChrmInput",tn="ChrmOutput",nn="QueryChatRoomInfoInput",rn="QueryChatRoomInfoOutput",on="RtcInput",sn="RtcUserListOutput",an="SetUserStatusInput",cn="RtcSetDataInput",ln="RtcUserSetDataInput",un="RtcDataInput",dn="RtcSetOutDataInput",hn="MCFollowInput",pn="RtcTokenOutput",fn="RtcQryOutput",gn="RtcQryUserOutDataInput",mn="RtcUserOutDataOutput",_n="RtcQueryListInput",vn="RtcRoomInfoOutput",yn="RtcValueInfo",Cn="RtcKeyDeleteInput",En="GetQNupTokenInput",bn="GetQNupTokenOutput",Tn="GetQNdownloadUrlInput",Sn="GetDownloadUrlInput",Rn="GetQNdownloadUrlOutput",In="GetDownloadUrlOutput",wn="ChrmKVEntity",On="SetChrmKV",kn="SetChrmKVS",Mn="DeleteChrmKVS",xn="ChrmKVOutput",Pn="ChrmKVSOutput",An="ChrmKVSVersionEntity",Dn="ChrmKVSOutputEntity",Nn="QueryChrmKV",Ln="SetUserSettingInput",Un="SetUserSettingOutput",Bn="PullUserSettingInput",Vn="PullUserSettingOutput",jn="UserSettingNotification",Fn="SessionReq",$n="SessionStates",Hn="SessionState",Kn="SessionStateItem",Wn="SessionStateModifyReq",qn="SessionStateModifyResp",Gn="GrpReadReceiptMsg",zn="GrpReadReceiptQryReq",Yn="GrpReadReceiptQryResp",Jn="GrpMsgReadUser",Xn="SessionTagAddInput",Qn="SessionTagItem",Zn="SessionTagDelInput",ei="SessionDisTagReq",ti="ReportSDKInput",ni="ReportSDKOutput",ii="UltraGrpPullSes",ri="UltraGrpPullMsg",oi="MsgChangeReq",si="QueryMsgChange",ai="MsgChange",ci="MsgChangeList",li="MsgQuery",ui="MessageQueryInfo",di="MsgQueryAck",hi="OperateStatus",pi="OperateStatusNotify",fi="OperateInfo",gi="OperateSummary",mi="RtcNotifyMsg",_i="RtcPullKV",vi="RtcKVOutput",yi="RtcQueryUserJoinedInput",Ci="RtcQueryUserJoinedOutput",Ei="RtcViewerJoinedOutput",bi="RtcInviteInput",Ti="RtcCancelInviteInput",Si="RtcInviteAnswerInput",Ri="RtcEndInviteInput",Ii="SetRtcRoomIdInput",wi="SetRtcRoomIdOutput",Oi=((kt={})[Dt]=["sessionId","classname","content","pushText","userId","configFlag","appData","extraContent","pushExt","busChannel"],kt[Ut]=["list","syncTime","finished"],kt[Lt]=["fromUserId","type","groupId","classname","content","dataTime","status","msgId","extraContent","pushContent","configFlag","pushExt","busChannel"],kt[Nt]=["title","templateIdNoUse","pushId","pushConfigs","templateId"],kt[Bt]=["nothing"],kt[Vt]=["inboxTime","sendboxTime","totalUnreadCount"],kt[jt]=["syncTime","ispolling","isweb","isPullSend","isKeeping","sendBoxSyncTime"],kt[Ft]=["syncTime","count"],kt[$t]=["type","time","chrmId"],kt[Ht]=["targetId","time","count","order","busChannel"],kt[Kt]=["list","syncTime","hasMsg"],kt[Wt]=["type","count","startTime","order"],kt[qt]=["info","isFinished"],kt[Gt]=["sessions"],kt[zt]=["type","channelId","busChannel"],kt[Yt]=["nothing"],kt[Jt]=["type","msg","count","busChannel","startTime","endTime"],kt[Xt]=["type","conversationId","msgs","busChannel"],kt[Qt]=["targetId","dataTime","conversationType","busChannel"],kt[Zt]=["type","msgTime","channelId","busChannel"],kt[en]=["nothing"],kt[tn]=["nothing","sessionId","joinTime"],kt[nn]=["count","order"],kt[rn]=["userTotalNums","userInfos"],kt[En]=["type","key","httpMethod","queryString"],kt[Tn]=["type","key","fileName"],kt[Sn]=["type","key","fileName"],kt[bn]=["deadline","token","bosToken","bosDate","path","osskeyId","ossPolicy","ossSign","ossBucketName"],kt[Rn]=["downloadUrl"],kt[In]=["downloadUrl"],kt[wn]=["key","value","status","timestamp","uid","version"],kt[On]=["entry","bNotify","notification","type"],kt[kn]=["entry","bNotify","notification","type"],kt[Mn]=["entry","bNotify","notification","type"],kt[xn]=["entries","bFullUpdate","syncTime"],kt[Pn]=["timestamp","errorKeys","keysVersion"],kt[An]=["version","key"],kt[Dn]=["key","errorCode"],kt[Nn]=["timestamp"],kt[Ln]=["version","value"],kt[Un]=["version","reserve"],kt[Bn]=["version","reserve"],kt[Vn]=["items","version"],kt.UserSettingItem=["targetId","type","key","value","version","status","tags"],kt[Fn]=["time"],kt[$n]=["version","state"],kt[Hn]=["type","channelId","time","stateItem","busChannel"],kt[Kn]=["sessionStateType","value","tags"],kt[Wn]=["version","state"],kt[qn]=["version"],kt[Gn]=["msgId","busChannel"],kt[zn]=["msgId","busChannel"],kt[Yn]=["totalMemberNum","list"],kt[Jn]=["readTime","userId"],kt[Xn]=["version","tags"],kt[Qn]=["tagId","name","createdTime","isTop"],kt[Zn]=["version","tags"],kt[ei]=["tagId"],kt[jn]=["version","reserve"],kt[ti]=["sdkInfo"],kt[ni]=["nothing"],kt[ii]=["syncTime","isEraseMsgContent"],kt[ri]=["syncTime"],kt[oi]=["fromUserId","targetId","type","busChannel","msgUID","msgTime","content"],kt[si]=["syncTime"],kt[ci]=["list","syncTime","hasNext"],kt[ai]=["targetId","type","time","changeType","msgUID","msgTime","busChannel","isAdmin","isDel","operatorId"],kt[li]=["targetId","type","query"],kt[ui]=["msgTime","msgUID","busChannel"],kt[di]=["list"],kt[hi]=["targetId","type","opType","busChannel"],kt[pi]=["type","notifyType","info","summary"],kt[fi]=["targetId","busChannel","userId","opType","optime"],kt[gi]=["targetId","busChannel","count","opType"],kt[on]=["roomType","broadcastType","extraInnerData","needSysChatroom","identityChangeType","joinType"],kt[sn]=["users","token","sessionId","roomInfo"],kt[an]=["status"],kt[cn]=["interior","target","key","value","objectName","content"],kt[ln]=["valueInfo","objectName","content"],kt[un]=["interior","target","key","objectName","content"],kt[dn]=["target","valueInfo","objectName","content"],kt[hn]=["state"],kt[pn]=["rtcToken"],kt[fn]=["outInfo"],kt[gn]=["userId"],kt[mn]=["user"],kt[_n]=["order"],kt[vn]=["roomId","roomData","userCount","list"],kt[yn]=["key","value"],kt[Cn]=["key"],kt[mi]=["type","time","roomId"],kt[_i]=["timestamp","roomId"],kt[vi]=["entries","bFullUpdate","syncTime"],kt[yi]=["userId"],kt[Ci]=["info"],kt[bi]=["invitedUserId","timeoutTime","invitedRoomId","inviteInfo","inviteSessionId"],kt[Ti]=["invitedUserId","invitedRoomId","inviteInfo","inviteSessionId"],kt[Si]=["inviteUserID","answerCode","inviteRoomId","inviteSessionId","content","key","value"],kt[Ri]=["inviteRoomId","inviteSessionId","inviteContent","inviteRoomKeys"],kt[Ii]=["rtcRoomId"],kt[wi]=["nothing"],kt),ki={},Mi=function(e){var t=Oi[e];ki[e]=function(){for(var e={},n={getArrayData:function(){return e}},i=function(i){var r=t[i],o="set"+B(r,0,1);n[o]=function(t){e[r]=t}},r=0;r<t.length;r++)i(r);return n},ki[e].decode=function(e){var t={};Q(e)&&(e=JSON.parse(e));var n=function(n){var i="get"+B(n,0,1);t[n]=e[n],t[i]=function(){return e[n]}};for(var i in e)n(i);return t}};for(var xi in Oi)Mi(xi);ki.getModule=function(e){return ki[e]()};var Pi,Ai,Di,Ni,Li,Ui="\npackage Modules;\nmessage probuf {\n  message "+an+"\n  {\n    optional int32 status=1;\n  }\n\n  message SetUserStatusOutput\n  {\n    optional int32 nothing=1;\n  }\n\n  message GetUserStatusInput\n  {\n    optional int32 nothing=1;\n  }\n\n  message GetUserStatusOutput\n  {\n    optional string status=1;\n    optional string subUserId=2;\n  }\n\n  message SubUserStatusInput\n  {\n    repeated string userid =1;\n  }\n\n  message SubUserStatusOutput\n  {\n    optional int32 nothing=1;\n  }\n  message VoipDynamicInput\n  {\n    required int32  engineType = 1;\n    required string channelName = 2;\n    optional string channelExtra = 3;\n  }\n\n  message VoipDynamicOutput\n  {\n      required string dynamicKey=1;\n  }\n  message "+$t+" {\n    required int32 type = 1;\n    optional int64 time = 2;\n    optional string chrmId=3;\n  }\n  message "+jt+" {\n    required int64 syncTime = 1;\n    required bool ispolling = 2;\n    optional bool isweb=3;\n    optional bool isPullSend=4;\n    optional bool isKeeping=5;\n    optional int64 sendBoxSyncTime=6;\n  }\n  message "+Dt+" {\n    required int32 sessionId = 1;\n    required string classname = 2;\n    required bytes content = 3;\n    optional string pushText = 4;\n    optional string appData = 5;\n    repeated string userId = 6;\n    optional int64 delMsgTime = 7;\n    optional string delMsgId = 8;\n    optional int32 configFlag = 9;\n    optional int64 clientUniqueId = 10;\n    optional string extraContent = 11;\n    optional PushExtra pushExt = 12;\n    optional string busChannel = 13; // 该消息所属会话的业务标识\n  }\n  message "+Nt+" {\n    optional string title = 1;\n    optional int32  templateIdNoUse= 2;\n    optional string pushId = 3;\n    optional string pushConfigs = 4;\n    optional string templateId = 5;\n  }\n  message "+Ut+" {\n    repeated DownStreamMessage list = 1;\n    required int64 syncTime = 2;\n    optional bool finished = 3;\n  }\n  message "+Lt+" {\n    required string fromUserId = 1;\n    required ChannelType type = 2;\n    optional string groupId = 3;\n    required string classname = 4;\n    required bytes content = 5;\n    required int64 dataTime = 6;\n    required int64 status = 7;\n    optional int64 extra = 8;\n    optional string msgId = 9;\n    optional int32 direction = 10;\n    optional int32 plantform =11;\n    optional int32 isRemoved = 12;\n    optional string source = 13;\n    optional int64 clientUniqueId = 14;\n    optional string extraContent = 15;\n    optional string pushContent = 16;\n    optional int32 configFlag = 17;\n    optional PushExtra pushExt = 18;\n    optional string busChannel = 19; // 该消息所属会话的业务标识，限制20字符以内\n    optional int64 extStatus = 20; // 消息的扩展标记 第0位,表示送达状态: 0x01 表示已送达;断档: 0x02 表示是否需要执行断档策略; 消息修改: 0x04 拉取历史消息时表示该消息是否修改过\n  }\n  enum ChannelType {\n    PERSON = 1;\n    PERSONS = 2;\n    GROUP = 3;\n    TEMPGROUP = 4;\n    CUSTOMERSERVICE = 5;\n    NOTIFY = 6;\n    MC=7;\n    MP=8;\n    ULTRAGROUP = 10;\n  }\n  message CreateDiscussionInput {\n    optional string name = 1;\n  }\n  message CreateDiscussionOutput {\n    required string id = 1;\n  }\n  message ChannelInvitationInput {\n    repeated string users = 1;\n  }\n  message LeaveChannelInput {\n    required int32 nothing = 1;\n  }\n  message ChannelEvictionInput {\n    required string user = 1;\n  }\n  message RenameChannelInput {\n    required string name = 1;\n  }\n  message ChannelInfoInput {\n    required int32 nothing = 1;\n  }\n  message ChannelInfoOutput {\n    required ChannelType type = 1;\n    required string channelId = 2;\n    required string channelName = 3;\n    required string adminUserId = 4;\n    repeated string firstTenUserIds = 5;\n    required int32 openStatus = 6;\n  }\n  message ChannelInfosInput {\n    required int32 page = 1;\n    optional int32 number = 2;\n  }\n  message ChannelInfosOutput {\n    repeated ChannelInfoOutput channels = 1;\n    required int32 total = 2;\n  }\n  message MemberInfo {\n    required string userId = 1;\n    required string userName = 2;\n    required string userPortrait = 3;\n    required string extension = 4;\n  }\n  message GroupMembersInput {\n    required int32 page = 1;\n    optional int32 number = 2;\n  }\n  message GroupMembersOutput {\n    repeated MemberInfo members = 1;\n    required int32 total = 2;\n  }\n  message GetUserInfoInput {\n    required int32 nothing = 1;\n  }\n  message GetUserInfoOutput {\n    required string userId = 1;\n    required string userName = 2;\n    required string userPortrait = 3;\n  }\n  message GetSessionIdInput {\n    required int32 nothing = 1;\n  }\n  message GetSessionIdOutput {\n    required int32 sessionId = 1;\n  }\n  enum FileType {\n    image = "+X.IMAGE+";\n    audio = "+X.AUDIO+";\n    video = "+X.VIDEO+";\n    file = "+X.FILE+";\n  }\n  message "+En+" {\n    required FileType type = 1;\n    optional string key = 2;\n    optional string httpMethod = 3;\n    optional string queryString = 4;\n  }\n  message "+Tn+" {\n    required FileType type = 1;\n    required string key = 2;\n    optional string  fileName = 3;\n  }\n  message "+Sn+" {\n    required FileType type = 1;\n    required string key = 2;\n    optional string fileName = 3;\n   }\n  message "+bn+" {\n    required int64 deadline = 1;\n    required string token = 2;\n    optional string bosToken = 3;\n    optional string bosDate = 4;\n    optional string path = 5;\n    optional string osskeyId = 6;\n    optional string ossPolicy = 7;\n    optional string ossSign = 8;\n    optional string ossBucketName = 9;\n    optional string s3Credential = 10;\n    optional string s3Algorithm = 11;\n    optional string s3Date = 12;\n    optional string s3Policy = 13;\n    optional string s3Signature = 14;\n    optional string s3BucketName = 15;\n    optional string stcAuthorization = 16;\n    optional string stcContentSha256 = 17;\n    optional string stcDate = 18;\n    optional string stcBucketName = 19;\n  }\n  message "+Rn+" {\n    required string downloadUrl = 1;\n  }\n  message "+In+" {\n    required string downloadUrl = 1;\n  }\n  message Add2BlackListInput {\n    required string userId = 1;\n  }\n  message RemoveFromBlackListInput {\n    required string userId = 1;\n  }\n  message QueryBlackListInput {\n    required int32 nothing = 1;\n  }\n  message QueryBlackListOutput {\n    repeated string userIds = 1;\n  }\n  message BlackListStatusInput {\n    required string userId = 1;\n  }\n  message BlockPushInput {\n    required string blockeeId = 1;\n  }\n  message ModifyPermissionInput {\n    required int32 openStatus = 1;\n  }\n  message GroupInput {\n    repeated GroupInfo groupInfo = 1;\n  }\n  message GroupOutput {\n    required int32 nothing = 1;\n  }\n  message GroupInfo {\n    required string id = 1;\n    required string name = 2;\n  }\n  message GroupHashInput {\n    required string userId = 1;\n    required string groupHashCode = 2;\n  }\n  message GroupHashOutput {\n    required GroupHashType result = 1;\n  }\n  enum GroupHashType {\n    group_success = 0x00;\n    group_failure = 0x01;\n  }\n  message "+en+" {\n    required int32 nothing = 1;\n  }\n  message "+tn+" {\n    required int32 nothing = 1;\n    optional string sessionId = 2;\n    optional int64 joinTime = 3;\n  }\n  message "+Ft+" {\n    required int64 syncTime = 1;\n    required int32 count = 2;\n  }\n\n  message ChrmPullMsgNew\n  {\n    required int32 count = 1;\n    required int64 syncTime = 2;\n    optional string chrmId=3;\n  }\n  message "+Wt+"\n  {\n    optional ChannelType type = 1;\n    optional int32 count = 2;\n    optional int64 startTime = 3;\n    optional int32 order = 4;\n  }\n  message "+Jt+"\n  {\n    required ChannelType type = 1;\n    optional DownStreamMessage msg =2;\n    optional int32 count = 3;\n    repeated string busChannel = 4;\n    optional int64 startTime = 5;\n    optional int64 endTime = 6;\n  }\n  message "+qt+"\n  {\n    repeated RelationInfo info = 1;\n    optional bool isFinished = 2;//是否结束\n  }\n  message RelationInfo\n  {\n    required ChannelType type = 1;\n    required string userId = 2;\n    optional DownStreamMessage msg =3;\n    optional int64 readMsgTime= 4;\n    optional int64 unreadCount= 5;\n    optional string busChannel = 6;//该消息所属会话的业务标识\n    optional int64 versionTime = 7;//会话项变更时间戳，注意:非排序时间戳\n    optional int64 remindCount = 8;//被@的未读数\n  }\n  message RelationInfoReadTime\n  {\n    required ChannelType type = 1;\n    required int64 readMsgTime= 2;\n    required string targetId = 3;\n  }\n  message "+Qt+"\n  {\n      required string targetId = 1;\n      required int64 dataTime = 2;\n      optional int32 conversationType= 3;\n      optional string busChannel = 4; //该消息所属会话的业务标识，限制20字符以内\n  }\n  message HistoryMessageInput\n  {\n    required string targetId = 1;\n    required int64 dataTime =2;\n    required int32 size  = 3;\n  }\n\n  message HistoryMessagesOuput\n  {\n    repeated DownStreamMessage list = 1;\n    required int64 syncTime = 2;\n    required int32 hasMsg = 3;\n  }\n  message "+nn+"\n  {\n    required int32 count= 1;\n    optional int32 order= 2;\n  }\n\n  message "+rn+"\n  {\n    optional int32 userTotalNums = 1;\n    repeated ChrmMember userInfos = 2;\n  }\n  message ChrmMember\n  {\n    required int64 time = 1;\n    required string id = 2;\n  }\n  message MPFollowInput\n  {\n    required string id = 1;\n  }\n\n  message MPFollowOutput\n  {\n    required int32 nothing = 1;\n    optional MpInfo info =2;\n  }\n\n  message "+hn+"\n  {\n    required string state = 1;\n  }\n\n  message MCFollowOutput\n  {\n    required int32 nothing = 1;\n    optional MpInfo info =2;\n  }\n\n  message MpInfo\n  {\n    required string mpid=1;\n    required string name = 2;\n    required string type = 3;\n    required int64 time=4;\n    optional string portraitUrl=5;\n    optional string extra =6;\n  }\n\n  message SearchMpInput\n  {\n    required int32 type=1;\n    required string id=2;\n  }\n\n  message SearchMpOutput\n  {\n    required int32 nothing=1;\n    repeated MpInfo info = 2;\n  }\n\n  message PullMpInput\n  {\n    required int64 time=1;\n    required string mpid=2;\n  }\n\n  message PullMpOutput\n  {\n    required int32 status=1;\n    repeated MpInfo info = 2;\n  }\n  message "+Ht+"\n  {\n    optional string targetId = 1;\n    optional int64 time = 2;\n    optional int32 count  = 3;\n    optional int32 order = 4;\n    optional string busChannel = 5; //该消息所属会话的业务标识，限制20字符以内\n  }\n\n  message "+Kt+"\n  {\n    repeated DownStreamMessage list=1;\n    required int64 syncTime=2;\n    required int32 hasMsg=3;\n  }\n  message "+_n+"{\n    optional int32 order=1;\n  }\n\n  message "+Cn+"{\n    repeated string key=1;\n  }\n\n  message "+yn+"{\n    required string key=1;\n    required string value=2;\n  }\n\n  message RtcUserInfo{\n    required string userId=1;\n    repeated "+yn+" userData=2; //用户资源信息\n  }\n\n  message "+sn+"{\n    repeated RtcUserInfo users=1;\n    optional string token=2;\n    optional string sessionId=3;\n    repeated RtcValueInfo roomInfo = 4; //房间key value\n    repeated RtcKVEntity entries = 5;//直播KV属性对象集合\n    optional int64 syncTime = 6;//所有属性的最大时间戳（下次拉取KV时用）。\n    optional int32 offlineKickTime = 7;//server超时踢人时间，默认60s\n  }\n  message RtcRoomInfoOutput{\n    optional string roomId = 1;\n    repeated "+yn+" roomData = 2;\n    optional int32 userCount = 3;\n    repeated RtcUserInfo list=4;\n  }\n  message "+on+"{\n    required int32 roomType=1;\n    optional int32 broadcastType=2;\n    optional RtcValueInfo extraInnerData = 3;\n    optional bool needSysChatroom = 4; //是否需要同步聊天室\n    optional IdentityChangeType identityChangeType = 5; //身份变更类型\n    optional JoinType joinType = 6; // 加入房间类型\n    repeated "+yn+" innerDatas = 7; //用户内部inner数据，角色或者连麦信息等\n    repeated "+yn+" outerDatas = 8; //用户内部outer数据，自定义数据结构RtcInput。\n  }\n  enum JoinType {\n    KICK = 0; //踢前一个设备\n    REFUSE = 1; //当前加入拒绝\n    COEXIST = 2; //两个设备共存\n  }\n  message RtcQryInput{\n    required bool isInterior=1;\n    required targetType target=2;\n    repeated string key=3;\n  }\n  message "+fn+"{\n    repeated "+yn+" outInfo=1;\n  }\n  message RtcDelDataInput{\n    repeated string key=1;\n    required bool isInterior=2;\n    required targetType target=3;\n  }\n  message "+un+"{\n    required bool interior=1;\n    required targetType target=2;\n    repeated string key=3;\n    optional string objectName=4;\n    optional string content=5;\n  }\n  message "+cn+"{\n    required bool interior=1;\n    required targetType target=2;\n    required string key=3;\n    required string value=4;\n    optional string objectName=5;\n    optional string content=6;\n  }\n  message "+ln+" {\n    repeated "+yn+" valueInfo = 1;\n    required string objectName = 2;\n    repeated "+yn+" content = 3;\n  }\n  message RtcOutput\n  {\n    optional int32 nothing=1;\n  }\n  message "+pn+"{\n    required string rtcToken=1;\n  }\n  enum targetType {\n    ROOM =1 ;\n    PERSON = 2;\n  }\n  message "+dn+"{\n    required targetType target=1;\n    repeated "+yn+" valueInfo=2;\n    optional string objectName=3;\n    optional string content=4;\n  }\n  message "+gn+"{\n    repeated string userId = 1;\n  }\n  message "+mn+"{\n    repeated RtcUserInfo user = 1;\n  }\n  message "+Bt+"{\n    required int32 nothing = 1;\n  }\n  message "+Vt+"{\n    required int64 inboxTime = 1;\n    required int64 sendboxTime = 2;\n    required int64 totalUnreadCount = 3;\n  }\n  message "+Zt+"\n  {\n    required ChannelType type = 1;\n    required int64 msgTime = 2;\n    required string channelId = 3;\n    optional string busChannel = 4;//该消息所属会话的业务标识\n  }\n  message SessionMsgReadOutput\n  {\n    optional int32 nothing=1;\n  }\n  message "+Gt+"\n  {\n    repeated SessionInfo sessions = 1;\n  }\n  message "+zt+"\n  {\n    required ChannelType type = 1;\n    required string channelId = 2;\n    optional string busChannel = 3;//所属会话业务标识\n  }\n  message "+Yt+"\n  {\n    optional int32 nothing=1;\n  }\n  message "+Xt+"\n  {\n    optional ChannelType type = 1;\n    optional string conversationId = 2;\n    repeated DeleteMsg msgs = 3;\n    optional string busChannel = 4; //该消息所属会话的业务标识，限制20字符以内\n  }\n  message DeleteMsg\n  {\n    optional string msgId = 1;\n    optional int64 msgDataTime = 2;\n    optional int32 direct = 3;\n  }\n  message ChrmKVEntity {\n    required string key = 1;\n    required string value = 2;\n    optional int32 status = 3;\n    optional int64 timestamp = 4;\n    optional string uid = 5;\n    optional int64 version = 6;\n  }\n  message "+On+" {\n    required ChrmKVEntity entry = 1;\n    optional bool bNotify = 2;\n    optional UpStreamMessage notification = 3;\n    optional ChannelType type = 4;\n  }\n  message "+kn+" {\n    repeated ChrmKVEntity entry = 1;\n    optional bool bNotify = 2;\n    optional UpStreamMessage notification = 3;\n    optional ChannelType type = 4;\n  }\n  message "+Mn+" {\n    repeated ChrmKVEntity entry = 1;\n    optional bool bNotify = 2;\n    optional UpStreamMessage notification = 3;\n    optional ChannelType type = 4;\n  }\n  message "+xn+" {\n    repeated ChrmKVEntity entries = 1;\n    optional bool bFullUpdate = 2;\n    optional int64 syncTime = 3;\n  }\n  message ChrmKVSVersionEntity {\n    optional int64 version = 1;\n    optional string key = 2;\n  }\n\n  message "+Pn+" {\n    repeated ChrmKVSOutputEntity errorKeys = 1;\n    repeated ChrmKVSVersionEntity keysVersion = 2;\n  }\n  message "+Dn+"\n  {\n    optional string key = 1;\n    optional int32 errorCode = 2;\n  }\n  message "+Nn+" {\n    required int64 timestamp = 1;\n  }\n  message "+Ln+" {\n    required int64 version=1;\n    required string value=2;\n  }\n  message "+Un+" {\n    required int64 version=1;\n    required bool reserve=2;\n  }\n  message "+Bn+" {\n    required int64 version=1;\n    optional bool reserve=2;\n  }\n  message "+Vn+" {\n    repeated UserSettingItem items = 1;\n    required int64 version=2;\n  }\n  message UserSettingItem {\n    required string targetId= 1;\n    required ChannelType type = 2;\n    required string key = 4;\n    required bytes value = 5;\n    required int64 version=6;\n    required int32 status=7;\n    repeated SessionTagItem tags= 8;\n  }\n  message "+Fn+" {\n    required int64 time = 1;\n  }\n  message "+$n+" {\n    required int64 version=1;\n    repeated SessionState state= 2;\n  }\n  message "+Hn+" {\n    required ChannelType type = 1;\n    required string channelId = 2;\n    optional int64 time = 3;\n    repeated SessionStateItem stateItem = 4;\n    optional string busChannel = 5;//该消息所属会话的业务标识\n  }\n  message "+Kn+" {\n    required SessionStateType sessionStateType = 1;\n    required string value = 2;\n    repeated SessionTagItem tags = 3;\n  }\n  enum SessionStateType {\n    IsSilent = 1;\n    IsTop = 2;\n    Tags = 3;\n  }\n  message "+Wn+" {\n    required int64 version=1;\n    repeated SessionState state= 2;\n  }\n  message "+qn+" {\n    required int64 version=1;\n  }\n  message "+Gn+" {\n    repeated string msgId=1; //已读消息ID\n    optional string channelId = 2; // 该消息所属会话的业务标识\n  }\n  message "+zn+" {\n    repeated string msgId=1; //已读消息ID\n    optional string channelId = 2; // 该消息所属会话的业务标识\n  }\n  message "+Yn+" {\n    required int32 totalMemberNum = 1;//群内总人数\n    repeated GrpMsgReadUser list = 2;//已读用户列表（list复类型）\n  }\n  message "+Jn+" {\n    required int64 readTime = 1;//已读时间\n    required string userId = 2;//已读用户id\n  }\n  message "+Xn+" {\n    required int64 version=1;\n    repeated SessionTagItem tags=2;\n  }\n  message "+Qn+" {\n    required string tagId=1;\n    optional string name=2;\n    optional int64 createdTime=3;\n    optional bool isTop=4;\n  }\n  message "+Zn+" {\n    required int64 version=1;\n    repeated SessionTagItem tags=2;\n  }\n  message "+ei+" {\n    repeated string tagId=1;\n  }\n  message "+jn+" {\n    required int64 version=1;\n    required bool reserve=2;\n  }\n  message "+ti+' {\n    required string sdkInfo=1; // 用户集成的 sdk 信息,json 格式 {"web-rtc": "4.0.3.7"}\n  }\n  message '+ni+"\n  {\n    optional int32 nothing=1; //占位\n  }\n  message "+mi+" \n  {\n    required int32 type= 1;   //(通知类型 1:rtc房间状态KV变更通知)\n    optional int64 time= 2;   //消息产生时间\n    optional string roomId=3; //主播房间id\n  }\n  message "+_i+"\n  {\n    required int64 timestamp = 1;\n    required string roomId = 2;\n  }\n  message "+vi+"\n  {\n    repeated RtcKVEntity entries = 1;\n    optional bool bFullUpdate = 2;\n    optional int64 syncTime = 3; \n  }\n  message RtcKVEntity \n  {\n    required string key = 1;\n    required string value = 2;\n    optional int32 status = 3;\n    optional int64 timestamp = 4;\n    optional string uid = 5;\n  }\n  enum IdentityChangeType \n  {\n    AnchorToViewer = 1; //1为主播变观众\n    ViewerToAnchor = 2; //2为观众变主播\n  }\n  message "+yi+"\n  {\n    required string userId = 1;\n  }\n  message "+Ci+"\n  {\n    repeated RtcJoinedInfo info = 1;\n  }\n  message RtcJoinedInfo\n  {\n    required string deviceId = 1; //设备ID\n    required string roomId = 2;   //加入的房间ID\n    optional int64 joinTime = 3;  //加入的时间\n  }\n  message "+Ei+"\n  {\n    required string rtcToken=1;\n    repeated RtcKVEntity entries = 2;//KV属性对象集合\n    optional int64 syncTime = 3;//所有属性的最大时间戳（下次拉取KV时用）。\n  }\n  message "+bi+"\n  {\n    required string invitedUserId=1;    //被邀请的人的uid\n    optional int32  timeoutTime=2;       //邀请超时时间(秒),默认三十秒\n    required string invitedRoomId=3;    //被邀请的房间\n    required string inviteInfo=4;       //邀请的信息(包含邀请人,被邀请人,各自userid)客户端定义好.协议栈和server透传\n    required string inviteSessionId= 5; //客户端保证唯一性(建议roomid_userid_时间戳_随机数)\n  }\n  message "+Ti+"\n  {\n    required string invitedUserId=1;   //被邀请的人的uid\n    required string invitedRoomId=2;   //被邀请的房间\n    required string inviteInfo=3;      //取消邀请的信息(包含邀请人,被邀请人,各自userid)客户端定义好.协议栈和server透传\n    required string inviteSessionId=4; //邀请的sessionId,客户端发起邀请时产生\n  }\n  message "+Si+"\n  {\n    required string inviteUserId=1;    //邀请的人的uid\n    required int32  answerCode=2;      //是否接受连麦邀请.0为拒绝,1为接受\n    required string inviteRoomId=3;    //邀请的房间\n    required string inviteSessionId=4; //邀请的sessionId\n    required string content=5;         //需要转发的content\n    optional string key=6;             //如果接受的话,需要加这个字段,放在room级别的k和v,新加入房间的能拉取到\n    optional string value=7;           //如果接受的话,需要加这个字段,放在room级别的k和v,新加入房间的能拉取到\n  }\n  message "+Ri+"\n  {\n    required string inviteRoomId=1;    //邀请的房间\n    required string inviteSessionId=2; //邀请的sessionId\n    required string inviteContent=3;   //结束连麦的信息(需要透传给房间内其他人)\n    repeated string inviteRoomKeys=4;  //需要删除连麦的信息的key\n  }\n  message "+ii+"\n  {\n      required int64 syncTime = 1;//同步时间戳\n      optional bool isEraseMsgContent = 2;//拉取会话时，是否屏蔽掉消息内容\n  }\n  message "+ri+"\n  {\n    required int64 syncTime = 1;//同步时间戳\n  }\n  message  "+oi+"\n  {\n    required string fromUserId = 1;//（谁发的）\n    required string targetId = 2;// 目标Id(超级群Id)\n    required ChannelType type = 3;//发送类型如：（P2P,GROUP,ULTRAGROUP）\n    required string msgUID = 4; // 扩展消息的内容体\n    required int64 msgTime = 5; //原始消息时间\n    optional string busChannel = 6; // 该消息所属会话的业务标识，限制20字符以内\n    optional string content = 7; // 即extraContent消息扩展内容,下表格说明\n  }\n  message "+si+"  //查询入参\n  {\n    required int64 syncTime = 1;//同步时间戳\n  }\n  message "+ci+"  //应答结果\n  {\n    repeated MsgChange list = 1; //变更\n    required int64 syncTime = 2; //同步时间(用于下次同步入参)\n    optional bool  hasNext = 3 ;\n  }\n  message MsgChange  //变更详情\n  {\n    required string targetId = 1; //  目标Id(超级群Id)\n    required ChannelType type = 2; //  会话类型\n    required int64 time = 3;  // 变更时间\n    required int32 changeType = 4;  // 消息变更类型（1:扩展,2:修改,3:撤回)\n    required string msgUID  = 5;  // 消息ID\n    required int64 msgTime = 6;  //  消息时间\n    optional string busChannel = 7; // 频道ID\n    optional bool isAdmin = 8; //是否为管理员，默认为 0，设为 1 时，IMKit 收到此条消息后，小灰条默认显示为“管理员 撤回了一条消息”。\n    optional bool isDel = 9; //默认为 0 撤回该条消息同时，用户端将该条消息删除并替换为一条小灰条撤回提示消息；为 1 时，该条消息删除后，不替换为小灰条提示消息。\n    optional string operatorId = 10; // 新加 - 消息变更的操作人Id\n  }\n  message "+li+"  //请求\n  {\n    required string targetId = 1; //  目标Id(超级群Id)\n    required ChannelType type = 2; //  会话类型\n    repeated MessageQueryInfo query = 3; //\n  }\n  message MessageQueryInfo\n  {\n    required int64 msgTime = 1;  // 消息时间\n    required string msgUID  = 2;  // 消息ID\n    optional string busChannel = 3; // 频道ID\n  }\n  message "+di+"  //应答\n  {\n    repeated DownStreamMessage list = 1;//消息\n  }\n  message "+hi+"  //客户端发送\n  {\n    optional string targetId =  1;// targetId\n    optional ChannelType type = 2;//发送会话类型如：（P2P,GROUP） \n    optional int32 opType = 3;  //0 , 正在输入, 1 正在XXX  \n    optional string busChannel = 4; // 频道(channelId,可以为空)\n  }\n  message "+pi+"  //服务端发送\n  {\n      optional ChannelType type = 1;//发送会话类型如（P2P,GROUP） \n      optional int64 notifyType = 2; //0x1 表示明细, 0x2 表示汇总 0x3 表示明细+汇总\n      repeated OperateInfo info = 3 ; //明细列表 当notifyType 为 1和3时,有效\n      repeated OperateSummary summary = 4 ; //汇总列表, 当notifyType 为2和3 时,有效\n  }\n  message "+fi+" {\n    // XX 正在做什么\n    optional string targetId = 1; // 超级群Id  会话id\n    optional string busChannel = 2; // 频道(channelId,可以为空)\n    optional string userId = 3; // userId\n    optional int32 opType = 4;  //0 , 正在输入, 1 正在XX \n    optional int64 optime = 5;  //服务端收到用户操作的上行时间. \n  }\n      \n  message "+gi+" {\n    // 几个人 正在干什么\n    optional string targetId = 1; // 超级群Id  会话id\n    optional string busChannel = 2; // 频道(channelId,可以为空)\n    optional int32 count  = 3; // 操作人数\n    optional int32 opType = 4; //0, 正在输入, 1 正在XX \n  }\n  message "+Ii+"\n  {\n    required string  rtcRoomId= 1;  //rtc房间ID;\n  }\n  message "+wi+"\n  {\n    required int32 nothing = 1;   //用于占位\n  }\n}\n",Bi=(Pi=Ui,function(t,n){var i,r,o={};return o.ByteBuffer=t,o.c=t,i=t,o.Long=n||null,o.VERSION="5.0.1",o.WIRE_TYPES={},o.WIRE_TYPES.VARINT=0,o.WIRE_TYPES.BITS64=1,o.WIRE_TYPES.LDELIM=2,o.WIRE_TYPES.STARTGROUP=3,o.WIRE_TYPES.ENDGROUP=4,o.WIRE_TYPES.BITS32=5,o.PACKABLE_WIRE_TYPES=[o.WIRE_TYPES.VARINT,o.WIRE_TYPES.BITS64,o.WIRE_TYPES.BITS32],o.TYPES={int32:{name:"int32",wireType:o.WIRE_TYPES.VARINT,defaultValue:0},uint32:{name:"uint32",wireType:o.WIRE_TYPES.VARINT,defaultValue:0},sint32:{name:"sint32",wireType:o.WIRE_TYPES.VARINT,defaultValue:0},int64:{name:"int64",wireType:o.WIRE_TYPES.VARINT,defaultValue:o.Long?o.Long.ZERO:void 0},uint64:{name:"uint64",wireType:o.WIRE_TYPES.VARINT,defaultValue:o.Long?o.Long.UZERO:void 0},sint64:{name:"sint64",wireType:o.WIRE_TYPES.VARINT,defaultValue:o.Long?o.Long.ZERO:void 0},bool:{name:"bool",wireType:o.WIRE_TYPES.VARINT,defaultValue:!1},double:{name:"double",wireType:o.WIRE_TYPES.BITS64,defaultValue:0},string:{name:"string",wireType:o.WIRE_TYPES.LDELIM,defaultValue:""},bytes:{name:"bytes",wireType:o.WIRE_TYPES.LDELIM,defaultValue:null},fixed32:{name:"fixed32",wireType:o.WIRE_TYPES.BITS32,defaultValue:0},sfixed32:{name:"sfixed32",wireType:o.WIRE_TYPES.BITS32,defaultValue:0},fixed64:{name:"fixed64",wireType:o.WIRE_TYPES.BITS64,defaultValue:o.Long?o.Long.UZERO:void 0},sfixed64:{name:"sfixed64",wireType:o.WIRE_TYPES.BITS64,defaultValue:o.Long?o.Long.ZERO:void 0},float:{name:"float",wireType:o.WIRE_TYPES.BITS32,defaultValue:0},enum:{name:"enum",wireType:o.WIRE_TYPES.VARINT,defaultValue:0},message:{name:"message",wireType:o.WIRE_TYPES.LDELIM,defaultValue:null},group:{name:"group",wireType:o.WIRE_TYPES.STARTGROUP,defaultValue:null}},o.MAP_KEY_TYPES=[o.TYPES.int32,o.TYPES.sint32,o.TYPES.sfixed32,o.TYPES.uint32,o.TYPES.fixed32,o.TYPES.int64,o.TYPES.sint64,o.TYPES.sfixed64,o.TYPES.uint64,o.TYPES.fixed64,o.TYPES.bool,o.TYPES.string,o.TYPES.bytes],o.ID_MIN=1,o.ID_MAX=536870911,o.convertFieldsToCamelCase=!1,o.populateAccessors=!0,o.populateDefaults=!0,o.Util=function(){var t={};return t.IS_NODE=!("object"!=typeof e||e+""!="[object process]"||e.browser),t.XHR=function(){var e,t=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],n=null;for(e=0;e<t.length;e++){try{n=t[e]()}catch(e){continue}break}if(!n)throw Error("XMLHttpRequest is not supported");return n},t.fetch=function(e,n){if(n&&"function"!=typeof n&&(n=null),t.IS_NODE)if(n)g.readFile(e,(function(e,t){n(e?null:""+t)}));else try{return g.readFileSync(e)}catch(t){return null}else{var i=t.XHR();if(i.open("GET",e,!!n),i.setRequestHeader("Accept","text/plain"),"function"==typeof i.overrideMimeType&&i.overrideMimeType("text/plain"),!n)return i.send(null),200==i.status||0==i.status&&"string"==typeof i.responseText?i.responseText:null;if(i.onreadystatechange=function(){4==i.readyState&&(200==i.status||0==i.status&&"string"==typeof i.responseText?n(i.responseText):n(null))},4==i.readyState)return;i.send(null)}},t.toCamelCase=function(e){return e.replace(/_([a-zA-Z])/g,(function(e,t){return t.toUpperCase()}))},t}(),o.Lang={DELIM:/[\s\{\}=;:\[\],'"\(\)<>]/g,RULE:/^(?:required|optional|repeated|map)$/,TYPE:/^(?:double|float|int32|uint32|sint32|int64|uint64|sint64|fixed32|sfixed32|fixed64|sfixed64|bool|string|bytes)$/,NAME:/^[a-zA-Z_][a-zA-Z_0-9]*$/,TYPEDEF:/^[a-zA-Z][a-zA-Z_0-9]*$/,TYPEREF:/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)+$/,FQTYPEREF:/^(?:\.[a-zA-Z][a-zA-Z_0-9]*)+$/,NUMBER:/^-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+|([0-9]*(\.[0-9]*)?([Ee][+-]?[0-9]+)?)|inf|nan)$/,NUMBER_DEC:/^(?:[1-9][0-9]*|0)$/,NUMBER_HEX:/^0[xX][0-9a-fA-F]+$/,NUMBER_OCT:/^0[0-7]+$/,NUMBER_FLT:/^([0-9]*(\.[0-9]*)?([Ee][+-]?[0-9]+)?|inf|nan)$/,BOOL:/^(?:true|false)$/i,ID:/^(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/,NEGID:/^\-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/,WHITESPACE:/\s/,STRING:/(?:"([^"\\]*(?:\\.[^"\\]*)*)")|(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,STRING_DQ:/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,STRING_SQ:/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g},o.DotProto=function(e,t){function n(e,n){var i=-1,r=1;if("-"==e.charAt(0)&&(r=-1,e=e.substring(1)),t.NUMBER_DEC.test(e))i=parseInt(e);else if(t.NUMBER_HEX.test(e))i=parseInt(e.substring(2),16);else{if(!t.NUMBER_OCT.test(e))throw Error("illegal id value: "+(r<0?"-":"")+e);i=parseInt(e.substring(1),8)}if(i=0|r*i,!n&&i<0)throw Error("illegal id value: "+(r<0?"-":"")+e);return i}function i(e){var n=1;if("-"==e.charAt(0)&&(n=-1,e=e.substring(1)),t.NUMBER_DEC.test(e))return n*parseInt(e,10);if(t.NUMBER_HEX.test(e))return n*parseInt(e.substring(2),16);if(t.NUMBER_OCT.test(e))return n*parseInt(e.substring(1),8);if("inf"===e)return 1/0*n;if("nan"===e)return NaN;if(t.NUMBER_FLT.test(e))return n*parseFloat(e);throw Error("illegal number value: "+(n<0?"-":"")+e)}function r(e,t,n){void 0===e[t]?e[t]=n:(Array.isArray(e[t])||(e[t]=[e[t]]),e[t].push(n))}var o,s,a={},c=function(e){this.source=e+"",this.index=0,this.line=1,this.stack=[],this._stringOpen=null},l=c.prototype;return l._readString=function(){var e,n='"'===this._stringOpen?t.STRING_DQ:t.STRING_SQ;if(n.lastIndex=this.index-1,!(e=n.exec(this.source)))throw Error("unterminated string");return this.index=n.lastIndex,this.stack.push(this._stringOpen),this._stringOpen=null,e[1]},l.next=function(){var e,n,i,r,o;if(this.stack.length>0)return this.stack.shift();if(this.index>=this.source.length)return null;if(null!==this._stringOpen)return this._readString();do{for(e=!1;t.WHITESPACE.test(i=this.source.charAt(this.index));)if("\n"===i&&++this.line,++this.index===this.source.length)return null;if("/"===this.source.charAt(this.index))if(++this.index,"/"===this.source.charAt(this.index)){for(;"\n"!==this.source.charAt(++this.index);)if(this.index==this.source.length)return null;++this.index,++this.line,e=!0}else{if("*"!==(i=this.source.charAt(this.index)))return"/";do{if("\n"===i&&++this.line,++this.index===this.source.length)return null;n=i,i=this.source.charAt(this.index)}while("*"!==n||"/"!==i);++this.index,e=!0}}while(e);if(this.index===this.source.length)return null;if(r=this.index,t.DELIM.lastIndex=0,!t.DELIM.test(this.source.charAt(r++)))for(;r<this.source.length&&!t.DELIM.test(this.source.charAt(r));)++r;return('"'===(o=this.source.substring(this.index,this.index=r))||"'"===o)&&(this._stringOpen=o),o},l.peek=function(){if(0===this.stack.length){var e=this.next();if(null===e)return null;this.stack.push(e)}return this.stack[0]},l.skip=function(e){var t=this.next();if(t!==e)throw Error("illegal '"+t+"', '"+e+"' expected")},l.omit=function(e){return this.peek()===e&&(this.next(),!0)},l.toString=function(){return"Tokenizer ("+this.index+"/"+this.source.length+" at line "+this.line+")"},a.Tokenizer=c,(s=(o=function(e){this.tn=new c(e),this.proto3=!1}).prototype).parse=function(){var e,n={name:"[ROOT]",package:null,messages:[],enums:[],imports:[],options:{},services:[]},i=!0;try{for(;e=this.tn.next();)switch(e){case"package":if(!i||null!==n.package)throw Error("unexpected 'package'");if(e=this.tn.next(),!t.TYPEREF.test(e))throw Error("illegal package name: "+e);this.tn.skip(";"),n.package=e;break;case"import":if(!i)throw Error("unexpected 'import'");"public"===(e=this.tn.peek())&&this.tn.next(),e=this._readString(),this.tn.skip(";"),n.imports.push(e);break;case"syntax":if(!i)throw Error("unexpected 'syntax'");this.tn.skip("="),"proto3"===(n.syntax=this._readString())&&(this.proto3=!0),this.tn.skip(";");break;case"message":this._parseMessage(n,null),i=!1;break;case"enum":this._parseEnum(n),i=!1;break;case"option":this._parseOption(n);break;case"service":this._parseService(n);break;case"extend":this._parseExtend(n);break;default:throw Error("unexpected '"+e+"'")}}catch(e){throw e.message="Parse error at line "+this.tn.line+": "+e.message,e}return delete n.name,n},o.parse=function(e){return new o(e).parse()},s._readString=function(){var e,t,n="";do{if("'"!==(t=this.tn.next())&&'"'!==t)throw Error("illegal string delimiter: "+t);n+=this.tn.next(),this.tn.skip(t),e=this.tn.peek()}while('"'===e||'"'===e);return n},s._readValue=function(e){var n=this.tn.peek();if('"'===n||"'"===n)return this._readString();if(this.tn.next(),t.NUMBER.test(n))return i(n);if(t.BOOL.test(n))return"true"===n.toLowerCase();if(e&&t.TYPEREF.test(n))return n;throw Error("illegal value: "+n)},s._parseOption=function(e,n){var i,r=this.tn.next(),o=!1;if("("===r&&(o=!0,r=this.tn.next()),!t.TYPEREF.test(r))throw Error("illegal option name: "+r);i=r,o&&(this.tn.skip(")"),i="("+i+")",r=this.tn.peek(),t.FQTYPEREF.test(r)&&(i+=r,this.tn.next())),this.tn.skip("="),this._parseOptionValue(e,i),n||this.tn.skip(";")},s._parseOptionValue=function(e,n){var i=this.tn.peek();if("{"!==i)r(e.options,n,this._readValue(!0));else for(this.tn.skip("{");"}"!==(i=this.tn.next());){if(!t.NAME.test(i))throw Error("illegal option name: "+n+"."+i);this.tn.omit(":")?r(e.options,n+"."+i,this._readValue(!0)):this._parseOptionValue(e,n+"."+i)}},s._parseService=function(e){var n,i=this.tn.next();if(!t.NAME.test(i))throw Error("illegal service name at line "+this.tn.line+": "+i);for(n={name:i,rpc:{},options:{}},this.tn.skip("{");"}"!==(i=this.tn.next());)if("option"===i)this._parseOption(n);else{if("rpc"!==i)throw Error("illegal service token: "+i);this._parseServiceRPC(n)}this.tn.omit(";"),e.services.push(n)},s._parseServiceRPC=function(e){var n,i,r="rpc",o=this.tn.next();if(!t.NAME.test(o))throw Error("illegal rpc service method name: "+o);if(n=o,i={request:null,response:null,request_stream:!1,response_stream:!1,options:{}},this.tn.skip("("),"stream"===(o=this.tn.next()).toLowerCase()&&(i.request_stream=!0,o=this.tn.next()),!t.TYPEREF.test(o))throw Error("illegal rpc service request type: "+o);if(i.request=o,this.tn.skip(")"),"returns"!==(o=this.tn.next()).toLowerCase())throw Error("illegal rpc service request type delimiter: "+o);if(this.tn.skip("("),"stream"===(o=this.tn.next()).toLowerCase()&&(i.response_stream=!0,o=this.tn.next()),i.response=o,this.tn.skip(")"),"{"===(o=this.tn.peek())){for(this.tn.next();"}"!==(o=this.tn.next());){if("option"!==o)throw Error("illegal rpc service token: "+o);this._parseOption(i)}this.tn.omit(";")}else this.tn.skip(";");void 0===e[r]&&(e[r]={}),e[r][n]=i},s._parseMessage=function(e,i){var r=!!i,o=this.tn.next(),s={name:"",fields:[],enums:[],messages:[],options:{},services:[],oneofs:{}};if(!t.NAME.test(o))throw Error("illegal "+(r?"group":"message")+" name: "+o);for(s.name=o,r&&(this.tn.skip("="),i.id=n(this.tn.next()),s.isGroup=!0),"["===(o=this.tn.peek())&&i&&this._parseFieldOptions(i),this.tn.skip("{");"}"!==(o=this.tn.next());)if(t.RULE.test(o))this._parseMessageField(s,o);else if("oneof"===o)this._parseMessageOneOf(s);else if("enum"===o)this._parseEnum(s);else if("message"===o)this._parseMessage(s);else if("option"===o)this._parseOption(s);else if("service"===o)this._parseService(s);else if("extensions"===o)s.extensions=this._parseExtensionRanges();else if("reserved"===o)this._parseIgnored();else if("extend"===o)this._parseExtend(s);else{if(!t.TYPEREF.test(o))throw Error("illegal message token: "+o);if(!this.proto3)throw Error("illegal field rule: "+o);this._parseMessageField(s,"optional",o)}return this.tn.omit(";"),e.messages.push(s),s},s._parseIgnored=function(){for(;";"!==this.tn.peek();)this.tn.next();this.tn.skip(";")},s._parseMessageField=function(e,i,r){var o,s,a;if(!t.RULE.test(i))throw Error("illegal message field rule: "+i);if(o={rule:i,type:"",name:"",options:{},id:0},"map"===i){if(r)throw Error("illegal type: "+r);if(this.tn.skip("<"),s=this.tn.next(),!t.TYPE.test(s)&&!t.TYPEREF.test(s))throw Error("illegal message field type: "+s);if(o.keytype=s,this.tn.skip(","),s=this.tn.next(),!t.TYPE.test(s)&&!t.TYPEREF.test(s))throw Error("illegal message field: "+s);if(o.type=s,this.tn.skip(">"),s=this.tn.next(),!t.NAME.test(s))throw Error("illegal message field name: "+s);o.name=s,this.tn.skip("="),o.id=n(this.tn.next()),"["===(s=this.tn.peek())&&this._parseFieldOptions(o),this.tn.skip(";")}else if("group"===(r=void 0!==r?r:this.tn.next())){if(a=this._parseMessage(e,o),!/^[A-Z]/.test(a.name))throw Error("illegal group name: "+a.name);o.type=a.name,o.name=a.name.toLowerCase(),this.tn.omit(";")}else{if(!t.TYPE.test(r)&&!t.TYPEREF.test(r))throw Error("illegal message field type: "+r);if(o.type=r,s=this.tn.next(),!t.NAME.test(s))throw Error("illegal message field name: "+s);o.name=s,this.tn.skip("="),o.id=n(this.tn.next()),"["===(s=this.tn.peek())&&this._parseFieldOptions(o),this.tn.skip(";")}return e.fields.push(o),o},s._parseMessageOneOf=function(e){var n,i,r,o=this.tn.next();if(!t.NAME.test(o))throw Error("illegal oneof name: "+o);for(i=o,r=[],this.tn.skip("{");"}"!==(o=this.tn.next());)(n=this._parseMessageField(e,"optional",o)).oneof=i,r.push(n.id);this.tn.omit(";"),e.oneofs[i]=r},s._parseFieldOptions=function(e){this.tn.skip("[");for(var t=!0;"]"!==this.tn.peek();)t||this.tn.skip(","),this._parseOption(e,!0),t=!1;this.tn.next()},s._parseEnum=function(e){var i,r={name:"",values:[],options:{}},o=this.tn.next();if(!t.NAME.test(o))throw Error("illegal name: "+o);for(r.name=o,this.tn.skip("{");"}"!==(o=this.tn.next());)if("option"===o)this._parseOption(r);else{if(!t.NAME.test(o))throw Error("illegal name: "+o);this.tn.skip("="),i={name:o,id:n(this.tn.next(),!0)},"["===(o=this.tn.peek())&&this._parseFieldOptions({options:{}}),this.tn.skip(";"),r.values.push(i)}this.tn.omit(";"),e.enums.push(r)},s._parseExtensionRanges=function(){var t,n,r,o=[];do{for(n=[];;){switch(t=this.tn.next()){case"min":r=e.ID_MIN;break;case"max":r=e.ID_MAX;break;default:r=i(t)}if(n.push(r),2===n.length)break;if("to"!==this.tn.peek()){n.push(r);break}this.tn.next()}o.push(n)}while(this.tn.omit(","));return this.tn.skip(";"),o},s._parseExtend=function(e){var n,i=this.tn.next();if(!t.TYPEREF.test(i))throw Error("illegal extend reference: "+i);for(n={ref:i,fields:[]},this.tn.skip("{");"}"!==(i=this.tn.next());)if(t.RULE.test(i))this._parseMessageField(n,i);else{if(!t.TYPEREF.test(i))throw Error("illegal extend token: "+i);if(!this.proto3)throw Error("illegal field rule: "+i);this._parseMessageField(n,"optional",i)}return this.tn.omit(";"),e.messages.push(n),n},s.toString=function(){return"Parser at line "+this.tn.line},a.Parser=o,a}(o,o.Lang),o.Reflect=function(e){function n(t,n){if(t&&"number"==typeof t.low&&"number"==typeof t.high&&"boolean"==typeof t.unsigned&&t.low==t.low&&t.high==t.high)return new e.Long(t.low,t.high,void 0===n?t.unsigned:n);if("string"==typeof t)return e.Long.fromString(t,n||!1,10);if("number"==typeof t)return e.Long.fromNumber(t,n||!1);throw Error("not convertible to Long")}function r(t,n){var i=n.readVarint32(),o=7&i,s=i>>>3;switch(o){case e.WIRE_TYPES.VARINT:do{i=n.readUint8()}while(128==(128&i));break;case e.WIRE_TYPES.BITS64:n.offset+=8;break;case e.WIRE_TYPES.LDELIM:i=n.readVarint32(),n.offset+=i;break;case e.WIRE_TYPES.STARTGROUP:r(s,n);break;case e.WIRE_TYPES.ENDGROUP:if(s===t)return!1;throw Error("Illegal GROUPEND after unknown group: "+s+" ("+t+" expected)");case e.WIRE_TYPES.BITS32:n.offset+=4;break;default:throw Error("Illegal wire type in unknown group "+t+": "+o)}return!0}var o,s,a,c,l,u,d,h,p,f,g,m,_,v,y,C,E={},b=function(e,t,n){this.builder=e,this.parent=t,this.name=n,this.className},T=b.prototype;return T.fqn=function(){for(var e=this.name,t=this;null!=(t=t.parent);)e=t.name+"."+e;return e},T.toString=function(e){return(e?this.className+" ":"")+this.fqn()},T.build=function(){throw Error(this.toString(!0)+" cannot be built directly")},E.T=b,(s=(o=function(e,t,n,i,r){b.call(this,e,t,n),this.className="Namespace",this.children=[],this.options=i||{},this.syntax=r||"proto2"}).prototype=Object.create(b.prototype)).getChildren=function(e){var t,n,i;if(null==(e=e||null))return this.children.slice();for(t=[],n=0,i=this.children.length;i>n;++n)this.children[n]instanceof e&&t.push(this.children[n]);return t},s.addChild=function(e){var t;if(t=this.getChild(e.name))if(t instanceof l.Field&&t.name!==t.originalName&&null===this.getChild(t.originalName))t.name=t.originalName;else{if(!(e instanceof l.Field&&e.name!==e.originalName&&null===this.getChild(e.originalName)))throw Error("Duplicate name in namespace "+this.toString(!0)+": "+e.name);e.name=e.originalName}this.children.push(e)},s.getChild=function(e){var t,n,i="number"==typeof e?"id":"name";for(t=0,n=this.children.length;n>t;++t)if(this.children[t][i]===e)return this.children[t];return null},s.resolve=function(e,t){var n,i="string"==typeof e?e.split("."):e,r=this,o=0;if(""===i[o]){for(;null!==r.parent;)r=r.parent;o++}do{do{if(!(r instanceof E.Namespace)){r=null;break}if(!((n=r.getChild(i[o]))&&n instanceof E.T&&(!t||n instanceof E.Namespace))){r=null;break}r=n,o++}while(o<i.length);if(null!=r)break;if(null!==this.parent)return this.parent.resolve(e,t)}while(null!=r);return r},s.qn=function(e){var t,n,i=[],r=e;do{i.unshift(r.name),r=r.parent}while(null!==r);for(t=1;t<=i.length;t++)if(n=i.slice(i.length-t),e===this.resolve(n,e instanceof E.Namespace))return n.join(".");return e.fqn()},s.build=function(){var e,t,n,i={},r=this.children;for(t=0,n=r.length;n>t;++t)(e=r[t])instanceof o&&(i[e.name]=e.build());return Object.defineProperty&&Object.defineProperty(i,"$options",{value:this.buildOpt()}),i},s.buildOpt=function(){var e,t,n,i,r={},o=Object.keys(this.options);for(e=0,t=o.length;t>e;++e)n=o[e],i=this.options[o[e]],r[n]=i;return r},s.getOption=function(e){return void 0===e?this.options:void 0!==this.options[e]?this.options[e]:null},E.Namespace=o,c=(a=function(t,n,i,r){if(this.type=t,this.resolvedType=n,this.isMapKey=i,this.syntax=r,i&&e.MAP_KEY_TYPES.indexOf(t)<0)throw Error("Invalid map key type: "+t.name)}).prototype,a.defaultFieldValue=function(t){if("string"==typeof t&&(t=e.TYPES[t]),void 0===t.defaultValue)throw Error("default value for type "+t.name+" is not supported");return t==e.TYPES.bytes?new i(0):t.defaultValue},c.verifyValue=function(i){var r,o,s,a=function(e,t){throw Error("Illegal value for "+this.toString(!0)+" of type "+this.type.name+": "+e+" ("+t+")")}.bind(this);switch(this.type){case e.TYPES.int32:case e.TYPES.sint32:case e.TYPES.sfixed32:return("number"!=typeof i||i==i&&i%1!=0)&&a(typeof i,"not an integer"),i>4294967295?0|i:i;case e.TYPES.uint32:case e.TYPES.fixed32:return("number"!=typeof i||i==i&&i%1!=0)&&a(typeof i,"not an integer"),i<0?i>>>0:i;case e.TYPES.int64:case e.TYPES.sint64:case e.TYPES.sfixed64:if(e.Long)try{return n(i,!1)}catch(t){a(typeof i,t.message)}else a(typeof i,"requires Long.js");case e.TYPES.uint64:case e.TYPES.fixed64:if(e.Long)try{return n(i,!0)}catch(t){a(typeof i,t.message)}else a(typeof i,"requires Long.js");case e.TYPES.bool:return"boolean"!=typeof i&&a(typeof i,"not a boolean"),i;case e.TYPES.float:case e.TYPES.double:return"number"!=typeof i&&a(typeof i,"not a number"),i;case e.TYPES.string:return"string"==typeof i||i&&i instanceof String||a(typeof i,"not a string"),""+i;case e.TYPES.bytes:return t.isByteBuffer(i)?i:t.wrap(i);case e.TYPES.enum:for(r=this.resolvedType.getChildren(e.Reflect.Enum.Value),s=0;s<r.length;s++){if(r[s].name==i)return r[s].id;if(r[s].id==i)return r[s].id}if("proto3"===this.syntax)return("number"!=typeof i||i==i&&i%1!=0)&&a(typeof i,"not an integer"),(i>4294967295||i<0)&&a(typeof i,"not in range for uint32"),i;a(i,"not a valid enum value");case e.TYPES.group:case e.TYPES.message:if(i&&"object"==typeof i||a(typeof i,"object expected"),i instanceof this.resolvedType.clazz)return i;if(i instanceof e.Builder.Message){for(s in o={},i)i.hasOwnProperty(s)&&(o[s]=i[s]);i=o}return new this.resolvedType.clazz(i)}throw Error("[INTERNAL] Illegal value for "+this.toString(!0)+": "+i+" (undefined type "+this.type+")")},c.calculateLength=function(t,n){if(null===n)return 0;var r;switch(this.type){case e.TYPES.int32:return n<0?i.calculateVarint64(n):i.calculateVarint32(n);case e.TYPES.uint32:return i.calculateVarint32(n);case e.TYPES.sint32:return i.calculateVarint32(i.zigZagEncode32(n));case e.TYPES.fixed32:case e.TYPES.sfixed32:case e.TYPES.float:return 4;case e.TYPES.int64:case e.TYPES.uint64:return i.calculateVarint64(n);case e.TYPES.sint64:return i.calculateVarint64(i.zigZagEncode64(n));case e.TYPES.fixed64:case e.TYPES.sfixed64:return 8;case e.TYPES.bool:return 1;case e.TYPES.enum:return i.calculateVarint32(n);case e.TYPES.double:return 8;case e.TYPES.string:return r=i.calculateUTF8Bytes(n),i.calculateVarint32(r)+r;case e.TYPES.bytes:if(n.remaining()<0)throw Error("Illegal value for "+this.toString(!0)+": "+n.remaining()+" bytes remaining");return i.calculateVarint32(n.remaining())+n.remaining();case e.TYPES.message:return r=this.resolvedType.calculate(n),i.calculateVarint32(r)+r;case e.TYPES.group:return(r=this.resolvedType.calculate(n))+i.calculateVarint32(t<<3|e.WIRE_TYPES.ENDGROUP)}throw Error("[INTERNAL] Illegal value to encode in "+this.toString(!0)+": "+n+" (unknown type)")},c.encodeValue=function(t,n,r){var o,s;if(null===n)return r;switch(this.type){case e.TYPES.int32:n<0?r.writeVarint64(n):r.writeVarint32(n);break;case e.TYPES.uint32:r.writeVarint32(n);break;case e.TYPES.sint32:r.writeVarint32ZigZag(n);break;case e.TYPES.fixed32:r.writeUint32(n);break;case e.TYPES.sfixed32:r.writeInt32(n);break;case e.TYPES.int64:case e.TYPES.uint64:r.writeVarint64(n);break;case e.TYPES.sint64:r.writeVarint64ZigZag(n);break;case e.TYPES.fixed64:r.writeUint64(n);break;case e.TYPES.sfixed64:r.writeInt64(n);break;case e.TYPES.bool:"string"==typeof n?r.writeVarint32("false"===n.toLowerCase()?0:!!n):r.writeVarint32(n?1:0);break;case e.TYPES.enum:r.writeVarint32(n);break;case e.TYPES.float:r.writeFloat32(n);break;case e.TYPES.double:r.writeFloat64(n);break;case e.TYPES.string:r.writeVString(n);break;case e.TYPES.bytes:if(n.remaining()<0)throw Error("Illegal value for "+this.toString(!0)+": "+n.remaining()+" bytes remaining");o=n.offset,r.writeVarint32(n.remaining()),r.append(n),n.offset=o;break;case e.TYPES.message:s=(new i).LE(),this.resolvedType.encode(n,s),r.writeVarint32(s.offset),r.append(s.flip());break;case e.TYPES.group:this.resolvedType.encode(n,r),r.writeVarint32(t<<3|e.WIRE_TYPES.ENDGROUP);break;default:throw Error("[INTERNAL] Illegal value to encode in "+this.toString(!0)+": "+n+" (unknown type)")}return r},c.decode=function(t,n,i){if(n!=this.type.wireType)throw Error("Unexpected wire type for element");var r,o;switch(this.type){case e.TYPES.int32:return 0|t.readVarint32();case e.TYPES.uint32:return t.readVarint32()>>>0;case e.TYPES.sint32:return 0|t.readVarint32ZigZag();case e.TYPES.fixed32:return t.readUint32()>>>0;case e.TYPES.sfixed32:return 0|t.readInt32();case e.TYPES.int64:return t.readVarint64();case e.TYPES.uint64:return t.readVarint64().toUnsigned();case e.TYPES.sint64:return t.readVarint64ZigZag();case e.TYPES.fixed64:return t.readUint64();case e.TYPES.sfixed64:return t.readInt64();case e.TYPES.bool:return!!t.readVarint32();case e.TYPES.enum:return t.readVarint32();case e.TYPES.float:return t.readFloat();case e.TYPES.double:return t.readDouble();case e.TYPES.string:return t.readVString();case e.TYPES.bytes:if(o=t.readVarint32(),t.remaining()<o)throw Error("Illegal number of bytes for "+this.toString(!0)+": "+o+" required but got only "+t.remaining());return(r=t.clone()).limit=r.offset+o,t.offset+=o,r;case e.TYPES.message:return o=t.readVarint32(),this.resolvedType.decode(t,o);case e.TYPES.group:return this.resolvedType.decode(t,-1,i)}throw Error("[INTERNAL] Illegal decode type")},c.valueFromString=function(t){if(!this.isMapKey)throw Error("valueFromString() called on non-map-key element");switch(this.type){case e.TYPES.int32:case e.TYPES.sint32:case e.TYPES.sfixed32:case e.TYPES.uint32:case e.TYPES.fixed32:return this.verifyValue(parseInt(t));case e.TYPES.int64:case e.TYPES.sint64:case e.TYPES.sfixed64:case e.TYPES.uint64:case e.TYPES.fixed64:return this.verifyValue(t);case e.TYPES.bool:return"true"===t;case e.TYPES.string:return this.verifyValue(t);case e.TYPES.bytes:return i.fromBinary(t)}},c.valueToString=function(t){if(!this.isMapKey)throw Error("valueToString() called on non-map-key element");return this.type===e.TYPES.bytes?t.toString("binary"):t.toString()},E.Element=a,(u=(l=function(e,t,n,i,r,s){o.call(this,e,t,n,i,s),this.className="Message",this.extensions=void 0,this.clazz=null,this.isGroup=!!r,this._fields=null,this._fieldsById=null,this._fieldsByName=null}).prototype=Object.create(o.prototype)).build=function(n){var r,o,s,a;if(this.clazz&&!n)return this.clazz;for(r=function(e,n){function r(t,n,o,s){var a,c,l,u,d,h,p;if(null===t||"object"!=typeof t)return s&&s instanceof e.Reflect.Enum&&null!==(a=e.Reflect.Enum.getName(s.object,t))?a:t;if(i.isByteBuffer(t))return n?t.toBase64():t.toBuffer();if(e.Long.isLong(t))return o?t.toString():e.Long.fromValue(t);if(Array.isArray(t))return c=[],t.forEach((function(e,t){c[t]=r(e,n,o,s)})),c;if(c={},t instanceof e.Map){for(u=(l=t.entries()).next();!u.done;u=l.next())c[t.keyElem.valueToString(u.value[0])]=r(u.value[1],n,o,t.valueElem.resolvedType);return c}for(p in d=t.$type,h=void 0,t)t.hasOwnProperty(p)&&(c[p]=d&&(h=d.getChild(p))?r(t[p],n,o,h.resolvedType):r(t[p],n,o));return c}var o,s,a=n.getChildren(e.Reflect.Message.Field),c=n.getChildren(e.Reflect.Message.OneOf),l=function(t){var r,o,s,u;for(e.Builder.Message.call(this),r=0,o=c.length;o>r;++r)this[c[r].name]=null;for(r=0,o=a.length;o>r;++r)this[(s=a[r]).name]=s.repeated?[]:s.map?new e.Map(s):null,!s.required&&"proto3"!==n.syntax||null===s.defaultValue||(this[s.name]=s.defaultValue);if(arguments.length>0)if(1!==arguments.length||null===t||"object"!=typeof t||!("function"!=typeof t.encode||t instanceof l)||Array.isArray(t)||t instanceof e.Map||i.isByteBuffer(t)||t instanceof ArrayBuffer||e.Long&&t instanceof e.Long)for(r=0,o=arguments.length;o>r;++r)void 0!==(u=arguments[r])&&this.$set(a[r].name,u);else this.$set(t)},u=l.prototype=Object.create(e.Builder.Message.prototype);for(u.add=function(t,i,r){var o=n._fieldsByName[t];if(!r){if(!o)throw Error(this+"#"+t+" is undefined");if(!(o instanceof e.Reflect.Message.Field))throw Error(this+"#"+t+" is not a field: "+o.toString(!0));if(!o.repeated)throw Error(this+"#"+t+" is not a repeated field");i=o.verifyValue(i,!0)}return null===this[t]&&(this[t]=[]),this[t].push(i),this},u.$add=u.add,u.set=function(t,i,r){var o,s,a;if(t&&"object"==typeof t){for(o in r=i,t)t.hasOwnProperty(o)&&void 0!==(i=t[o])&&this.$set(o,i,r);return this}if(s=n._fieldsByName[t],r)this[t]=i;else{if(!s)throw Error(this+"#"+t+" is not a field: undefined");if(!(s instanceof e.Reflect.Message.Field))throw Error(this+"#"+t+" is not a field: "+s.toString(!0));this[s.name]=i=s.verifyValue(i)}return s&&s.oneof&&(a=this[s.oneof.name],null!==i?(null!==a&&a!==s.name&&(this[a]=null),this[s.oneof.name]=s.name):a===t&&(this[s.oneof.name]=null)),this},u.$set=u.set,u.get=function(t,i){if(i)return this[t];var r=n._fieldsByName[t];if(!(r&&r instanceof e.Reflect.Message.Field))throw Error(this+"#"+t+" is not a field: undefined");if(!(r instanceof e.Reflect.Message.Field))throw Error(this+"#"+t+" is not a field: "+r.toString(!0));return this[r.name]},u.$get=u.get,o=0;o<a.length;o++)(s=a[o])instanceof e.Reflect.Message.ExtensionField||n.builder.options.populateAccessors&&function(e){var t,i,r,o=e.originalName.replace(/(_[a-zA-Z])/g,(function(e){return e.toUpperCase().replace("_","")}));o=o.substring(0,1).toUpperCase()+o.substring(1),t=e.originalName.replace(/([A-Z])/g,(function(e){return"_"+e})),i=function(t,n){return this[e.name]=n?t:e.verifyValue(t),this},r=function(){return this[e.name]},null===n.getChild("set"+o)&&(u["set"+o]=i),null===n.getChild("set_"+t)&&(u["set_"+t]=i),null===n.getChild("get"+o)&&(u["get"+o]=r),null===n.getChild("get_"+t)&&(u["get_"+t]=r)}(s);return u.encode=function(e,i){var r,o;"boolean"==typeof e&&(i=e,e=void 0),r=!1,e||(e=new t,r=!0),o=e.littleEndian;try{return n.encode(this,e.LE(),i),(r?e.flip():e).LE(o)}catch(t){throw e.LE(o),t}},l.encode=function(e,t,n){return new l(e).encode(t,n)},u.calculate=function(){return n.calculate(this)},u.encodeDelimited=function(e){var t,r=!1;return e||(e=new i,r=!0),t=(new i).LE(),n.encode(this,t).flip(),e.writeVarint32(t.remaining()),e.append(t),r?e.flip():e},u.encodeAB=function(){try{return this.encode().toArrayBuffer()}catch(t){throw t.encoded&&(t.encoded=t.encoded.toArrayBuffer()),t}},u.toArrayBuffer=u.encodeAB,u.encodeNB=function(){try{return this.encode().toBuffer()}catch(t){throw t.encoded&&(t.encoded=t.encoded.toBuffer()),t}},u.toBuffer=u.encodeNB,u.encode64=function(){try{return this.encode().toBase64()}catch(t){throw t.encoded&&(t.encoded=t.encoded.toBase64()),t}},u.toBase64=u.encode64,u.encodeHex=function(){try{return this.encode().toHex()}catch(t){throw t.encoded&&(t.encoded=t.encoded.toHex()),t}},u.toHex=u.encodeHex,u.toRaw=function(e,t){return r(this,!!e,!!t,this.$type)},u.encodeJSON=function(){return JSON.stringify(r(this,!0,!0,this.$type))},l.decode=function(e,t){var r,o;"string"==typeof e&&(e=i.wrap(e,t||"base64")),r=(e=i.isByteBuffer(e)?e:i.wrap(e)).littleEndian;try{return o=n.decode(e.LE()),e.LE(r),o}catch(t){throw e.LE(r),t}},l.decodeDelimited=function(e,t){var r,o,s;if("string"==typeof e&&(e=i.wrap(e,t||"base64")),(e=i.isByteBuffer(e)?e:i.wrap(e)).remaining()<1)return null;if(r=e.offset,o=e.readVarint32(),e.remaining()<o)return e.offset=r,null;try{return s=n.decode(e.slice(e.offset,e.offset+o).LE()),e.offset+=o,s}catch(t){throw e.offset+=o,t}},l.decode64=function(e){return l.decode(e,"base64")},l.decodeHex=function(e){return l.decode(e,"hex")},l.decodeJSON=function(e){return new l(JSON.parse(e))},u.toString=function(){return n.toString()},Object.defineProperty&&(Object.defineProperty(l,"$options",{value:n.buildOpt()}),Object.defineProperty(u,"$options",{value:l.$options}),Object.defineProperty(l,"$type",{value:n}),Object.defineProperty(u,"$type",{value:n})),l}(e,this),this._fields=[],this._fieldsById={},this._fieldsByName={},s=0,a=this.children.length;a>s;s++)if((o=this.children[s])instanceof g||o instanceof l||o instanceof v){if(r.hasOwnProperty(o.name))throw Error("Illegal reflect child of "+this.toString(!0)+": "+o.toString(!0)+" cannot override static property '"+o.name+"'");r[o.name]=o.build()}else if(o instanceof l.Field)o.build(),this._fields.push(o),this._fieldsById[o.id]=o,this._fieldsByName[o.name]=o;else if(!(o instanceof l.OneOf||o instanceof _))throw Error("Illegal reflect child of "+this.toString(!0)+": "+this.children[s].toString(!0));return this.clazz=r},u.encode=function(e,t,n){var i,r,o,s,a,c=null;for(o=0,s=this._fields.length;s>o;++o)r=e[(i=this._fields[o]).name],i.required&&null===r?null===c&&(c=i):i.encode(n?r:i.verifyValue(r),t,e);if(null!==c)throw(a=Error("Missing at least one required field for "+this.toString(!0)+": "+c)).encoded=t,a;return t},u.calculate=function(e){for(var t,n,i=0,r=0,o=this._fields.length;o>r;++r){if(n=e[(t=this._fields[r]).name],t.required&&null===n)throw Error("Missing at least one required field for "+this.toString(!0)+": "+t);i+=t.calculate(n,e)}return i},u.decode=function(t,n,i){var o,s,a,c,l,u,d,h,p,f,g,m;for(n="number"==typeof n?n:-1,l=t.offset,u=new this.clazz;t.offset<l+n||-1===n&&t.remaining()>0;){if(a=(o=t.readVarint32())>>>3,(s=7&o)===e.WIRE_TYPES.ENDGROUP){if(a!==i)throw Error("Illegal group end indicator for "+this.toString(!0)+": "+a+" ("+(i?i+" expected":"not a group")+")");break}if(c=this._fieldsById[a])c.repeated&&!c.options.packed?u[c.name].push(c.decode(s,t)):c.map?(h=c.decode(s,t),u[c.name].set(h[0],h[1])):(u[c.name]=c.decode(s,t),c.oneof&&(null!==(p=u[c.oneof.name])&&p!==c.name&&(u[p]=null),u[c.oneof.name]=c.name));else switch(s){case e.WIRE_TYPES.VARINT:t.readVarint32();break;case e.WIRE_TYPES.BITS32:t.offset+=4;break;case e.WIRE_TYPES.BITS64:t.offset+=8;break;case e.WIRE_TYPES.LDELIM:d=t.readVarint32(),t.offset+=d;break;case e.WIRE_TYPES.STARTGROUP:for(;r(a,t););break;default:throw Error("Illegal wire type for unknown field "+a+" in "+this.toString(!0)+"#decode: "+s)}}for(f=0,g=this._fields.length;g>f;++f)if(null===u[(c=this._fields[f]).name])if("proto3"===this.syntax)u[c.name]=c.defaultValue;else{if(c.required)throw(m=Error("Missing at least one required field for "+this.toString(!0)+": "+c.name)).decoded=u,m;e.populateDefaults&&null!==c.defaultValue&&(u[c.name]=c.defaultValue)}return u},E.Message=l,(h=(d=function(t,n,i,r,o,s,a,c,u,d){b.call(this,t,n,s),this.className="Message.Field",this.required="required"===i,this.repeated="repeated"===i,this.map="map"===i,this.keyType=r||null,this.type=o,this.resolvedType=null,this.id=a,this.options=c||{},this.defaultValue=null,this.oneof=u||null,this.syntax=d||"proto2",this.originalName=this.name,this.element=null,this.keyElement=null,!this.builder.options.convertFieldsToCamelCase||this instanceof l.ExtensionField||(this.name=e.Util.toCamelCase(this.name))}).prototype=Object.create(b.prototype)).build=function(){this.element=new a(this.type,this.resolvedType,!1,this.syntax),this.map&&(this.keyElement=new a(this.keyType,void 0,!0,this.syntax)),"proto3"!==this.syntax||this.repeated||this.map?void 0!==this.options.default&&(this.defaultValue=this.verifyValue(this.options.default)):this.defaultValue=a.defaultFieldValue(this.type)},h.verifyValue=function(t,n){var i,r,o;if(n=n||!1,i=function(e,t){throw Error("Illegal value for "+this.toString(!0)+" of type "+this.type.name+": "+e+" ("+t+")")}.bind(this),null===t)return this.required&&i(typeof t,"required"),"proto3"===this.syntax&&this.type!==e.TYPES.message&&i(typeof t,"proto3 field without field presence cannot be null"),null;if(this.repeated&&!n){for(Array.isArray(t)||(t=[t]),o=[],r=0;r<t.length;r++)o.push(this.element.verifyValue(t[r]));return o}return this.map&&!n?t instanceof e.Map?t:(t instanceof Object||i(typeof t,"expected ProtoBuf.Map or raw object for map field"),new e.Map(this,t)):(!this.repeated&&Array.isArray(t)&&i(typeof t,"no array expected"),this.element.verifyValue(t))},h.hasWirePresence=function(t,n){if("proto3"!==this.syntax)return null!==t;if(this.oneof&&n[this.oneof.name]===this.name)return!0;switch(this.type){case e.TYPES.int32:case e.TYPES.sint32:case e.TYPES.sfixed32:case e.TYPES.uint32:case e.TYPES.fixed32:return 0!==t;case e.TYPES.int64:case e.TYPES.sint64:case e.TYPES.sfixed64:case e.TYPES.uint64:case e.TYPES.fixed64:return 0!==t.low||0!==t.high;case e.TYPES.bool:return t;case e.TYPES.float:case e.TYPES.double:return 0!==t;case e.TYPES.string:return t.length>0;case e.TYPES.bytes:return t.remaining()>0;case e.TYPES.enum:return 0!==t;case e.TYPES.message:return null!==t;default:return!0}},h.encode=function(t,n,r){var o,s,a,c,l;if(null===this.type||"object"!=typeof this.type)throw Error("[INTERNAL] Unresolved type in "+this.toString(!0)+": "+this.type);if(null===t||this.repeated&&0==t.length)return n;try{if(this.repeated)if(this.options.packed&&e.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0){for(n.writeVarint32(this.id<<3|e.WIRE_TYPES.LDELIM),n.ensureCapacity(n.offset+=1),s=n.offset,o=0;o<t.length;o++)this.element.encodeValue(this.id,t[o],n);a=n.offset-s,(c=i.calculateVarint32(a))>1&&(l=n.slice(s,n.offset),s+=c-1,n.offset=s,n.append(l)),n.writeVarint32(a,s-c)}else for(o=0;o<t.length;o++)n.writeVarint32(this.id<<3|this.type.wireType),this.element.encodeValue(this.id,t[o],n);else this.map?t.forEach((function(t,r){var o=i.calculateVarint32(8|this.keyType.wireType)+this.keyElement.calculateLength(1,r)+i.calculateVarint32(16|this.type.wireType)+this.element.calculateLength(2,t);n.writeVarint32(this.id<<3|e.WIRE_TYPES.LDELIM),n.writeVarint32(o),n.writeVarint32(8|this.keyType.wireType),this.keyElement.encodeValue(1,r,n),n.writeVarint32(16|this.type.wireType),this.element.encodeValue(2,t,n)}),this):this.hasWirePresence(t,r)&&(n.writeVarint32(this.id<<3|this.type.wireType),this.element.encodeValue(this.id,t,n))}catch(e){throw Error("Illegal value for "+this.toString(!0)+": "+t+" ("+e+")")}return n},h.calculate=function(t,n){var r,o,s;if(t=this.verifyValue(t),null===this.type||"object"!=typeof this.type)throw Error("[INTERNAL] Unresolved type in "+this.toString(!0)+": "+this.type);if(null===t||this.repeated&&0==t.length)return 0;r=0;try{if(this.repeated)if(this.options.packed&&e.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0){for(r+=i.calculateVarint32(this.id<<3|e.WIRE_TYPES.LDELIM),s=0,o=0;o<t.length;o++)s+=this.element.calculateLength(this.id,t[o]);r+=i.calculateVarint32(s),r+=s}else for(o=0;o<t.length;o++)r+=i.calculateVarint32(this.id<<3|this.type.wireType),r+=this.element.calculateLength(this.id,t[o]);else this.map?t.forEach((function(t,n){var o=i.calculateVarint32(8|this.keyType.wireType)+this.keyElement.calculateLength(1,n)+i.calculateVarint32(16|this.type.wireType)+this.element.calculateLength(2,t);r+=i.calculateVarint32(this.id<<3|e.WIRE_TYPES.LDELIM),r+=i.calculateVarint32(o),r+=o}),this):this.hasWirePresence(t,n)&&(r+=i.calculateVarint32(this.id<<3|this.type.wireType),r+=this.element.calculateLength(this.id,t))}catch(e){throw Error("Illegal value for "+this.toString(!0)+": "+t+" ("+e+")")}return r},h.decode=function(t,n,i){var r,o,s,c,l,u,d;if(!(!this.map&&t==this.type.wireType||!i&&this.repeated&&this.options.packed&&t==e.WIRE_TYPES.LDELIM||this.map&&t==e.WIRE_TYPES.LDELIM))throw Error("Illegal wire type for field "+this.toString(!0)+": "+t+" ("+this.type.wireType+" expected)");if(t==e.WIRE_TYPES.LDELIM&&this.repeated&&this.options.packed&&e.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0&&!i){for(o=n.readVarint32(),o=n.offset+o,s=[];n.offset<o;)s.push(this.decode(this.type.wireType,n,!0));return s}if(this.map){if(c=a.defaultFieldValue(this.keyType),r=a.defaultFieldValue(this.type),o=n.readVarint32(),n.remaining()<o)throw Error("Illegal number of bytes for "+this.toString(!0)+": "+o+" required but got only "+n.remaining());for((l=n.clone()).limit=l.offset+o,n.offset+=o;l.remaining()>0;)if(t=7&(u=l.readVarint32()),1==(d=u>>>3))c=this.keyElement.decode(l,t,d);else{if(2!==d)throw Error("Unexpected tag in map field key/value submessage");r=this.element.decode(l,t,d)}return[c,r]}return this.element.decode(n,t,this.id)},E.Message.Field=d,(p=function(e,t,n,i,r,o,s){d.call(this,e,t,n,null,i,r,o,s),this.extension}).prototype=Object.create(d.prototype),E.Message.ExtensionField=p,f=function(e,t,n){b.call(this,e,t,n),this.fields=[]},E.Message.OneOf=f,(g=function(e,t,n,i,r){o.call(this,e,t,n,i,r),this.className="Enum",this.object=null}).getName=function(e,t){var n,i,r=Object.keys(e);for(i=0;i<r.length;++i)if(e[n=r[i]]===t)return n;return null},(g.prototype=Object.create(o.prototype)).build=function(t){var n,i,r,o;if(this.object&&!t)return this.object;for(n=new e.Builder.Enum,r=0,o=(i=this.getChildren(g.Value)).length;o>r;++r)n[i[r].name]=i[r].id;return Object.defineProperty&&Object.defineProperty(n,"$options",{value:this.buildOpt(),enumerable:!1}),this.object=n},E.Enum=g,(m=function(e,t,n,i){b.call(this,e,t,n),this.className="Enum.Value",this.id=i}).prototype=Object.create(b.prototype),E.Enum.Value=m,(_=function(e,t,n,i){b.call(this,e,t,n),this.field=i}).prototype=Object.create(b.prototype),E.Extension=_,((v=function(e,t,n,i){o.call(this,e,t,n,i),this.className="Service",this.clazz=null}).prototype=Object.create(o.prototype)).build=function(t){return this.clazz&&!t?this.clazz:this.clazz=function(e,t){var n,r=function(t){e.Builder.Service.call(this),this.rpcImpl=t||function(e,t,n){setTimeout(n.bind(this,Error("Not implemented, see: https://github.com/dcodeIO/ProtoBuf.js/wiki/Services")),0)}},o=r.prototype=Object.create(e.Builder.Service.prototype),s=t.getChildren(e.Reflect.Service.RPCMethod);for(n=0;n<s.length;n++)!function(e){o[e.name]=function(n,r){try{try{n=e.resolvedRequestType.clazz.decode(i.wrap(n))}catch(e){if(!(e instanceof TypeError))throw e}if(null===n||"object"!=typeof n)throw Error("Illegal arguments");n instanceof e.resolvedRequestType.clazz||(n=new e.resolvedRequestType.clazz(n)),this.rpcImpl(e.fqn(),n,(function(n,i){if(!n){try{i=e.resolvedResponseType.clazz.decode(i)}catch(e){}return i&&i instanceof e.resolvedResponseType.clazz?void r(null,i):void r(Error("Illegal response type received in service method "+t.name+"#"+e.name))}r(n)}))}catch(e){setTimeout(r.bind(this,e),0)}},r[e.name]=function(t,n,i){new r(t)[e.name](n,i)},Object.defineProperty&&(Object.defineProperty(r[e.name],"$options",{value:e.buildOpt()}),Object.defineProperty(o[e.name],"$options",{value:r[e.name].$options}))}(s[n]);return Object.defineProperty&&(Object.defineProperty(r,"$options",{value:t.buildOpt()}),Object.defineProperty(o,"$options",{value:r.$options}),Object.defineProperty(r,"$type",{value:t}),Object.defineProperty(o,"$type",{value:t})),r}(e,this)},E.Service=v,((y=function(e,t,n,i){b.call(this,e,t,n),this.className="Service.Method",this.options=i||{}}).prototype=Object.create(b.prototype)).buildOpt=s.buildOpt,E.Service.Method=y,(C=function(e,t,n,i,r,o,s,a){y.call(this,e,t,n,a),this.className="Service.RPCMethod",this.requestName=i,this.responseName=r,this.requestStream=o,this.responseStream=s,this.resolvedRequestType=null,this.resolvedResponseType=null}).prototype=Object.create(y.prototype),E.Service.RPCMethod=C,E}(o),o.Builder=function(e,t,n){function i(e){e.messages&&e.messages.forEach((function(t){t.syntax=e.syntax,i(t)})),e.enums&&e.enums.forEach((function(t){t.syntax=e.syntax}))}var r=function(e){this.ns=new n.Namespace(this,null,""),this.ptr=this.ns,this.resolved=!1,this.result=null,this.files={},this.importRoot=null,this.options=e||{}},o=r.prototype;return r.isMessage=function(e){return"string"==typeof e.name&&void 0===e.values&&void 0===e.rpc},r.isMessageField=function(e){return"string"==typeof e.rule&&"string"==typeof e.name&&"string"==typeof e.type&&void 0!==e.id},r.isEnum=function(e){return"string"==typeof e.name&&!(void 0===e.values||!Array.isArray(e.values)||0===e.values.length)},r.isService=function(e){return!("string"!=typeof e.name||"object"!=typeof e.rpc||!e.rpc)},r.isExtend=function(e){return"string"==typeof e.ref},o.reset=function(){return this.ptr=this.ns,this},o.define=function(e){if("string"!=typeof e||!t.TYPEREF.test(e))throw Error("illegal namespace: "+e);return e.split(".").forEach((function(e){var t=this.ptr.getChild(e);null===t&&this.ptr.addChild(t=new n.Namespace(this,this.ptr,e)),this.ptr=t}),this),this},o.create=function(t){var i,o,s,a,c;if(!t)return this;if(Array.isArray(t)){if(0===t.length)return this;t=t.slice()}else t=[t];for(i=[t];i.length>0;){if(t=i.pop(),!Array.isArray(t))throw Error("not a valid namespace: "+JSON.stringify(t));for(;t.length>0;){if(o=t.shift(),r.isMessage(o)){if(s=new n.Message(this,this.ptr,o.name,o.options,o.isGroup,o.syntax),a={},o.oneofs&&Object.keys(o.oneofs).forEach((function(e){s.addChild(a[e]=new n.Message.OneOf(this,s,e))}),this),o.fields&&o.fields.forEach((function(e){if(null!==s.getChild(0|e.id))throw Error("duplicate or invalid field id in "+s.name+": "+e.id);if(e.options&&"object"!=typeof e.options)throw Error("illegal field options in "+s.name+"#"+e.name);var t=null;if("string"==typeof e.oneof&&!(t=a[e.oneof]))throw Error("illegal oneof in "+s.name+"#"+e.name+": "+e.oneof);e=new n.Message.Field(this,s,e.rule,e.keytype,e.type,e.name,e.id,e.options,t,o.syntax),t&&t.fields.push(e),s.addChild(e)}),this),c=[],o.enums&&o.enums.forEach((function(e){c.push(e)})),o.messages&&o.messages.forEach((function(e){c.push(e)})),o.services&&o.services.forEach((function(e){c.push(e)})),o.extensions&&(s.extensions="number"==typeof o.extensions[0]?[o.extensions]:o.extensions),this.ptr.addChild(s),c.length>0){i.push(t),t=c,c=null,this.ptr=s,s=null;continue}c=null}else if(r.isEnum(o))s=new n.Enum(this,this.ptr,o.name,o.options,o.syntax),o.values.forEach((function(e){s.addChild(new n.Enum.Value(this,s,e.name,e.id))}),this),this.ptr.addChild(s);else if(r.isService(o))s=new n.Service(this,this.ptr,o.name,o.options),Object.keys(o.rpc).forEach((function(e){var t=o.rpc[e];s.addChild(new n.Service.RPCMethod(this,s,e,t.request,t.response,!!t.request_stream,!!t.response_stream,t.options))}),this),this.ptr.addChild(s);else{if(!r.isExtend(o))throw Error("not a valid definition: "+JSON.stringify(o));if(s=this.ptr.resolve(o.ref,!0))o.fields.forEach((function(t){var i,r,o,a;if(null!==s.getChild(0|t.id))throw Error("duplicate extended field id in "+s.name+": "+t.id);if(s.extensions&&(i=!1,s.extensions.forEach((function(e){t.id>=e[0]&&t.id<=e[1]&&(i=!0)})),!i))throw Error("illegal extended field id in "+s.name+": "+t.id+" (not within valid ranges)");r=t.name,this.options.convertFieldsToCamelCase&&(r=e.Util.toCamelCase(r)),o=new n.Message.ExtensionField(this,s,t.rule,t.type,this.ptr.fqn()+"."+r,t.id,t.options),a=new n.Extension(this,this.ptr,t.name,o),o.extension=a,this.ptr.addChild(a),s.addChild(o)}),this);else if(!/\.?google\.protobuf\./.test(o.ref))throw Error("extended message "+o.ref+" is not defined")}o=null,s=null}t=null,this.ptr=this.ptr.parent}return this.resolved=!1,this.result=null,this},o.import=function(t,n){var r,o,s,a,c,l,u,d,h="/";if("string"==typeof n){if(e.Util.IS_NODE,!0===this.files[n])return this.reset();this.files[n]=!0}else if("object"==typeof n){if(r=n.root,e.Util.IS_NODE,(r.indexOf("\\")>=0||n.file.indexOf("\\")>=0)&&(h="\\"),o=r+h+n.file,!0===this.files[o])return this.reset();this.files[o]=!0}if(t.imports&&t.imports.length>0){for(a=!1,"object"==typeof n?(this.importRoot=n.root,a=!0,s=this.importRoot,n=n.file,(s.indexOf("\\")>=0||n.indexOf("\\")>=0)&&(h="\\")):"string"==typeof n?this.importRoot?s=this.importRoot:n.indexOf("/")>=0?""===(s=n.replace(/\/[^\/]*$/,""))&&(s="/"):n.indexOf("\\")>=0?(s=n.replace(/\\[^\\]*$/,""),h="\\"):s=".":s=null,c=0;c<t.imports.length;c++)if("string"==typeof t.imports[c]){if(!s)throw Error("cannot determine import root");if("google/protobuf/descriptor.proto"===(l=t.imports[c]))continue;if(l=s+h+l,!0===this.files[l])continue;if(/\.proto$/i.test(l)&&!e.DotProto&&(l=l.replace(/\.proto$/,".json")),null===(u=e.Util.fetch(l)))throw Error("failed to import '"+l+"' in '"+n+"': file not found");/\.json$/i.test(l)?this.import(JSON.parse(u+""),l):this.import(e.DotProto.Parser.parse(u),l)}else n?/\.(\w+)$/.test(n)?this.import(t.imports[c],n.replace(/^(.+)\.(\w+)$/,(function(e,t,n){return t+"_import"+c+"."+n}))):this.import(t.imports[c],n+"_import"+c):this.import(t.imports[c]);a&&(this.importRoot=null)}return t.package&&this.define(t.package),t.syntax&&i(t),d=this.ptr,t.options&&Object.keys(t.options).forEach((function(e){d.options[e]=t.options[e]})),t.messages&&(this.create(t.messages),this.ptr=d),t.enums&&(this.create(t.enums),this.ptr=d),t.services&&(this.create(t.services),this.ptr=d),t.extends&&this.create(t.extends),this.reset()},o.resolveAll=function(){var i;if(null==this.ptr||"object"==typeof this.ptr.type)return this;if(this.ptr instanceof n.Namespace)this.ptr.children.forEach((function(e){this.ptr=e,this.resolveAll()}),this);else if(this.ptr instanceof n.Message.Field){if(t.TYPE.test(this.ptr.type))this.ptr.type=e.TYPES[this.ptr.type];else{if(!t.TYPEREF.test(this.ptr.type))throw Error("illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);if(!(i=(this.ptr instanceof n.Message.ExtensionField?this.ptr.extension.parent:this.ptr.parent).resolve(this.ptr.type,!0)))throw Error("unresolvable type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);if(this.ptr.resolvedType=i,i instanceof n.Enum){if(this.ptr.type=e.TYPES.enum,"proto3"===this.ptr.syntax&&"proto3"!==i.syntax)throw Error("proto3 message cannot reference proto2 enum")}else{if(!(i instanceof n.Message))throw Error("illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);this.ptr.type=i.isGroup?e.TYPES.group:e.TYPES.message}}if(this.ptr.map){if(!t.TYPE.test(this.ptr.keyType))throw Error("illegal key type for map field in "+this.ptr.toString(!0)+": "+this.ptr.keyType);this.ptr.keyType=e.TYPES[this.ptr.keyType]}}else if(this.ptr instanceof e.Reflect.Service.Method){if(!(this.ptr instanceof e.Reflect.Service.RPCMethod))throw Error("illegal service type in "+this.ptr.toString(!0));if(!((i=this.ptr.parent.resolve(this.ptr.requestName,!0))&&i instanceof e.Reflect.Message))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.requestName);if(this.ptr.resolvedRequestType=i,!((i=this.ptr.parent.resolve(this.ptr.responseName,!0))&&i instanceof e.Reflect.Message))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.responseName);this.ptr.resolvedResponseType=i}else if(!(this.ptr instanceof e.Reflect.Message.OneOf||this.ptr instanceof e.Reflect.Extension||this.ptr instanceof e.Reflect.Enum.Value))throw Error("illegal object in namespace: "+typeof this.ptr+": "+this.ptr);return this.reset()},o.build=function(e){var t,n,i;if(this.reset(),this.resolved||(this.resolveAll(),this.resolved=!0,this.result=null),null===this.result&&(this.result=this.ns.build()),!e)return this.result;for(t="string"==typeof e?e.split("."):e,n=this.result,i=0;i<t.length;i++){if(!n[t[i]]){n=null;break}n=n[t[i]]}return n},o.lookup=function(e,t){return e?this.ns.resolve(e,t):this.ns},o.toString=function(){return"Builder"},r.Message=function(){},r.Enum=function(){},r.Service=function(){},r}(o,o.Lang,o.Reflect),o.Map=function(e,t){function n(e){var t=0;return{next:function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}}var i=function(e,n){var i,r,o,s;if(!e.map)throw Error("field is not a map");if(this.field=e,this.keyElem=new t.Element(e.keyType,null,!0,e.syntax),this.valueElem=new t.Element(e.type,e.resolvedType,!1,e.syntax),this.map={},Object.defineProperty(this,"size",{get:function(){return Object.keys(this.map).length}}),n)for(i=Object.keys(n),r=0;r<i.length;r++)o=this.keyElem.valueFromString(i[r]),s=this.valueElem.verifyValue(n[i[r]]),this.map[this.keyElem.valueToString(o)]={key:o,value:s}},r=i.prototype;return r.clear=function(){this.map={}},r.delete=function(e){var t=this.keyElem.valueToString(this.keyElem.verifyValue(e)),n=t in this.map;return delete this.map[t],n},r.entries=function(){var e,t,i=[],r=Object.keys(this.map);for(t=0;t<r.length;t++)i.push([(e=this.map[r[t]]).key,e.value]);return n(i)},r.keys=function(){var e,t=[],i=Object.keys(this.map);for(e=0;e<i.length;e++)t.push(this.map[i[e]].key);return n(t)},r.values=function(){var e,t=[],i=Object.keys(this.map);for(e=0;e<i.length;e++)t.push(this.map[i[e]].value);return n(t)},r.forEach=function(e,t){var n,i,r=Object.keys(this.map);for(i=0;i<r.length;i++)e.call(t,(n=this.map[r[i]]).value,n.key,this)},r.set=function(e,t){var n=this.keyElem.verifyValue(e),i=this.valueElem.verifyValue(t);return this.map[this.keyElem.valueToString(n)]={key:n,value:i},this},r.get=function(e){var t=this.keyElem.valueToString(this.keyElem.verifyValue(e));return t in this.map?this.map[t].value:void 0},r.has=function(e){return this.keyElem.valueToString(this.keyElem.verifyValue(e))in this.map},i}(0,o.Reflect),o.loadProto=function(e,t,n){return("string"==typeof t||t&&"string"==typeof t.file&&"string"==typeof t.root)&&(n=t,t=void 0),o.loadJson(o.DotProto.Parser.parse(e),t,n)},o.protoFromString=o.loadProto,o.loadProtoFile=function(e,t,n){if(t&&"object"==typeof t?(n=t,t=null):t&&"function"==typeof t||(t=null),t)return o.Util.fetch("string"==typeof e?e:e.root+"/"+e.file,(function(i){if(null!==i)try{t(null,o.loadProto(i,n,e))}catch(e){t(e)}else t(Error("Failed to fetch file"))}));var i=o.Util.fetch("object"==typeof e?e.root+"/"+e.file:e);return null===i?null:o.loadProto(i,n,e)},o.protoFromFile=o.loadProtoFile,o.newBuilder=function(e){return void 0===(e=e||{}).convertFieldsToCamelCase&&(e.convertFieldsToCamelCase=o.convertFieldsToCamelCase),void 0===e.populateAccessors&&(e.populateAccessors=o.populateAccessors),new o.Builder(e)},o.loadJson=function(e,t,n){return("string"==typeof t||t&&"string"==typeof t.file&&"string"==typeof t.root)&&(n=t,t=null),t&&"object"==typeof t||(t=o.newBuilder()),"string"==typeof e&&(e=JSON.parse(e)),t.import(e,n),t.resolveAll(),t},o.loadJsonFile=function(e,t,n){if(t&&"object"==typeof t?(n=t,t=null):t&&"function"==typeof t||(t=null),t)return o.Util.fetch("string"==typeof e?e:e.root+"/"+e.file,(function(i){if(null!==i)try{t(null,o.loadJson(JSON.parse(i),n,e))}catch(e){t(e)}else t(Error("Failed to fetch file"))}));var i=o.Util.fetch("object"==typeof e?e.root+"/"+e.file:e);return null===i?null:o.loadJson(JSON.parse(i),n,e)},r=Pi,o.loadProto(r,void 0,"").build("Modules").probuf}(function(e){function t(e){var t=0;return function(){return t<e.length?e.charCodeAt(t++):null}}function n(){var e=[],t=[];return function(){return 0===arguments.length?t.join("")+a.apply(String,e):(e.length+arguments.length>1024&&(t.push(a.apply(String,e)),e.length=0),void Array.prototype.push.apply(e,arguments))}}function i(e,t,n,i,r){var o,s,a=8*r-i-1,c=(1<<a)-1,l=c>>1,u=-7,d=n?r-1:0,h=n?-1:1,p=e[t+d];for(d+=h,o=p&(1<<-u)-1,p>>=-u,u+=a;u>0;o=256*o+e[t+d],d+=h,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=i;u>0;s=256*s+e[t+d],d+=h,u-=8);if(0===o)o=1-l;else{if(o===c)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,i),o-=l}return(p?-1:1)*s*Math.pow(2,o-i)}function r(e,t,n,i,r,o){var s,a,c,l=8*o-r-1,u=(1<<l)-1,d=u>>1,h=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,f=i?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||1/0===t?(a=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+d>=1?h/c:h*Math.pow(2,1-d))*c>=2&&(s++,c/=2),s+d>=u?(a=0,s=u):s+d>=1?(a=(t*c-1)*Math.pow(2,r),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,r),s=0));r>=8;e[n+p]=255&a,p+=f,a/=256,r-=8);for(s=s<<r|a,l+=r;l>0;e[n+p]=255&s,p+=f,s/=256,l-=8);e[n+p-f]|=128*g}var o,s,a,c,l,u=function(e,t,n){if(void 0===e&&(e=u.DEFAULT_CAPACITY),void 0===t&&(t=u.DEFAULT_ENDIAN),void 0===n&&(n=u.DEFAULT_NOASSERT),!n){if((e|=0)<0)throw RangeError("Illegal capacity");t=!!t,n=!!n}this.buffer=0===e?s:new ArrayBuffer(e),this.view=0===e?null:new Uint8Array(this.buffer),this.offset=0,this.markedOffset=-1,this.limit=e,this.littleEndian=t,this.noAssert=n};return u.VERSION="5.0.1",u.LITTLE_ENDIAN=!0,u.BIG_ENDIAN=!1,u.DEFAULT_CAPACITY=16,u.DEFAULT_ENDIAN=u.BIG_ENDIAN,u.DEFAULT_NOASSERT=!1,u.Long=e||null,(o=u.prototype).__isByteBuffer__,Object.defineProperty(o,"__isByteBuffer__",{value:!0,enumerable:!1,configurable:!1}),s=new ArrayBuffer(0),a=String.fromCharCode,u.accessor=function(){return Uint8Array},u.allocate=function(e,t,n){return new u(e,t,n)},u.concat=function(e,t,n,i){var r,o,s,a,c,l;for(("boolean"==typeof t||"string"!=typeof t)&&(i=n,n=t,t=void 0),r=0,s=0,a=e.length;a>s;++s)u.isByteBuffer(e[s])||(e[s]=u.wrap(e[s],t)),(o=e[s].limit-e[s].offset)>0&&(r+=o);if(0===r)return new u(0,n,i);for(l=new u(r,n,i),s=0;a>s;)(o=(c=e[s++]).limit-c.offset)<=0||(l.view.set(c.view.subarray(c.offset,c.limit),l.offset),l.offset+=o);return l.limit=l.offset,l.offset=0,l},u.isByteBuffer=function(e){return!0===(e&&e.__isByteBuffer__)},u.type=function(){return ArrayBuffer},u.wrap=function(e,t,n,i){var r,s;if("string"!=typeof t&&(i=n,n=t,t=void 0),"string"==typeof e)switch(void 0===t&&(t="utf8"),t){case"base64":return u.fromBase64(e,n);case"hex":return u.fromHex(e,n);case"binary":return u.fromBinary(e,n);case"utf8":return u.fromUTF8(e,n);case"debug":return u.fromDebug(e,n);default:throw Error("Unsupported encoding: "+t)}if(null===e||"object"!=typeof e)throw TypeError("Illegal buffer");if(u.isByteBuffer(e))return(r=o.clone.call(e)).markedOffset=-1,r;if(e instanceof Uint8Array)r=new u(0,n,i),e.length>0&&(r.buffer=e.buffer,r.offset=e.byteOffset,r.limit=e.byteOffset+e.byteLength,r.view=new Uint8Array(e.buffer));else if(e instanceof ArrayBuffer)r=new u(0,n,i),e.byteLength>0&&(r.buffer=e,r.offset=0,r.limit=e.byteLength,r.view=e.byteLength>0?new Uint8Array(e):null);else{if("[object Array]"!==Object.prototype.toString.call(e))throw TypeError("Illegal buffer");for((r=new u(e.length,n,i)).limit=e.length,s=0;s<e.length;++s)r.view[s]=e[s]}return r},o.writeBitSet=function(e,t){var n,i,r,o,s,a,c=void 0===t;if(c&&(t=this.offset),!this.noAssert){if(!(e instanceof Array))throw TypeError("Illegal BitSet: Not an array");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}for(i=t,o=(r=e.length)>>3,s=0,t+=this.writeVarint32(r,t);o--;)n=1&!!e[s++]|(1&!!e[s++])<<1|(1&!!e[s++])<<2|(1&!!e[s++])<<3|(1&!!e[s++])<<4|(1&!!e[s++])<<5|(1&!!e[s++])<<6|(1&!!e[s++])<<7,this.writeByte(n,t++);if(r>s){for(a=0,n=0;r>s;)n|=(1&!!e[s++])<<a++;this.writeByte(n,t++)}return c?(this.offset=t,this):t-i},o.readBitSet=function(e){var t,n,i,r,o,s,a,c=void 0===e;for(c&&(e=this.offset),r=(i=(n=this.readVarint32(e)).value)>>3,o=0,s=[],e+=n.length;r--;)t=this.readByte(e++),s[o++]=!!(1&t),s[o++]=!!(2&t),s[o++]=!!(4&t),s[o++]=!!(8&t),s[o++]=!!(16&t),s[o++]=!!(32&t),s[o++]=!!(64&t),s[o++]=!!(128&t);if(i>o)for(a=0,t=this.readByte(e++);i>o;)s[o++]=!!(1&t>>a++);return c&&(this.offset=e),s},o.readBytes=function(e,t){var n,i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+e>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+"+e+") <= "+this.buffer.byteLength)}return n=this.slice(t,t+e),i&&(this.offset+=e),n},o.writeBytes=o.append,o.writeInt8=function(e,t){var n,i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}return(t+=1)>(n=this.buffer.byteLength)&&this.resize((n*=2)>t?n:t),t-=1,this.view[t]=e,i&&(this.offset+=1),this},o.writeByte=o.writeInt8,o.readInt8=function(e){var t,n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}return 128==(128&(t=this.view[e]))&&(t=-(255-t+1)),n&&(this.offset+=1),t},o.readByte=o.readInt8,o.writeUint8=function(e,t){var n,i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}return(t+=1)>(n=this.buffer.byteLength)&&this.resize((n*=2)>t?n:t),t-=1,this.view[t]=e,i&&(this.offset+=1),this},o.writeUInt8=o.writeUint8,o.readUint8=function(e){var t,n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}return t=this.view[e],n&&(this.offset+=1),t},o.readUInt8=o.readUint8,o.writeInt16=function(e,t){var n,i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}return(t+=2)>(n=this.buffer.byteLength)&&this.resize((n*=2)>t?n:t),t-=2,this.littleEndian?(this.view[t+1]=(65280&e)>>>8,this.view[t]=255&e):(this.view[t]=(65280&e)>>>8,this.view[t+1]=255&e),i&&(this.offset+=2),this},o.writeShort=o.writeInt16,o.readInt16=function(e){var t,n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+2) <= "+this.buffer.byteLength)}return t=0,this.littleEndian?(t=this.view[e],t|=this.view[e+1]<<8):(t=this.view[e]<<8,t|=this.view[e+1]),32768==(32768&t)&&(t=-(65535-t+1)),n&&(this.offset+=2),t},o.readShort=o.readInt16,o.writeUint16=function(e,t){var n,i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}return(t+=2)>(n=this.buffer.byteLength)&&this.resize((n*=2)>t?n:t),t-=2,this.littleEndian?(this.view[t+1]=(65280&e)>>>8,this.view[t]=255&e):(this.view[t]=(65280&e)>>>8,this.view[t+1]=255&e),i&&(this.offset+=2),this},o.writeUInt16=o.writeUint16,o.readUint16=function(e){var t,n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+2) <= "+this.buffer.byteLength)}return t=0,this.littleEndian?(t=this.view[e],t|=this.view[e+1]<<8):(t=this.view[e]<<8,t|=this.view[e+1]),n&&(this.offset+=2),t},o.readUInt16=o.readUint16,o.writeInt32=function(e,t){var n,i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}return(t+=4)>(n=this.buffer.byteLength)&&this.resize((n*=2)>t?n:t),t-=4,this.littleEndian?(this.view[t+3]=255&e>>>24,this.view[t+2]=255&e>>>16,this.view[t+1]=255&e>>>8,this.view[t]=255&e):(this.view[t]=255&e>>>24,this.view[t+1]=255&e>>>16,this.view[t+2]=255&e>>>8,this.view[t+3]=255&e),i&&(this.offset+=4),this},o.writeInt=o.writeInt32,o.readInt32=function(e){var t,n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}return t=0,this.littleEndian?(t=this.view[e+2]<<16,t|=this.view[e+1]<<8,t|=this.view[e],t+=this.view[e+3]<<24>>>0):(t=this.view[e+1]<<16,t|=this.view[e+2]<<8,t|=this.view[e+3],t+=this.view[e]<<24>>>0),t|=0,n&&(this.offset+=4),t},o.readInt=o.readInt32,o.writeUint32=function(e,t){var n,i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}return(t+=4)>(n=this.buffer.byteLength)&&this.resize((n*=2)>t?n:t),t-=4,this.littleEndian?(this.view[t+3]=255&e>>>24,this.view[t+2]=255&e>>>16,this.view[t+1]=255&e>>>8,this.view[t]=255&e):(this.view[t]=255&e>>>24,this.view[t+1]=255&e>>>16,this.view[t+2]=255&e>>>8,this.view[t+3]=255&e),i&&(this.offset+=4),this},o.writeUInt32=o.writeUint32,o.readUint32=function(e){var t,n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}return t=0,this.littleEndian?(t=this.view[e+2]<<16,t|=this.view[e+1]<<8,t|=this.view[e],t+=this.view[e+3]<<24>>>0):(t=this.view[e+1]<<16,t|=this.view[e+2]<<8,t|=this.view[e+3],t+=this.view[e]<<24>>>0),n&&(this.offset+=4),t},o.readUInt32=o.readUint32,e&&(o.writeInt64=function(t,n){var i,r,o,s=void 0===n;if(s&&(n=this.offset),!this.noAssert){if("number"==typeof t)t=e.fromNumber(t);else if("string"==typeof t)t=e.fromString(t);else if(!(t&&t instanceof e))throw TypeError("Illegal value: "+t+" (not an integer or Long)");if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}return"number"==typeof t?t=e.fromNumber(t):"string"==typeof t&&(t=e.fromString(t)),(n+=8)>(i=this.buffer.byteLength)&&this.resize((i*=2)>n?i:n),n-=8,r=t.low,o=t.high,this.littleEndian?(this.view[n+3]=255&r>>>24,this.view[n+2]=255&r>>>16,this.view[n+1]=255&r>>>8,this.view[n]=255&r,n+=4,this.view[n+3]=255&o>>>24,this.view[n+2]=255&o>>>16,this.view[n+1]=255&o>>>8,this.view[n]=255&o):(this.view[n]=255&o>>>24,this.view[n+1]=255&o>>>16,this.view[n+2]=255&o>>>8,this.view[n+3]=255&o,n+=4,this.view[n]=255&r>>>24,this.view[n+1]=255&r>>>16,this.view[n+2]=255&r>>>8,this.view[n+3]=255&r),s&&(this.offset+=8),this},o.writeLong=o.writeInt64,o.readInt64=function(t){var n,i,r,o=void 0===t;if(o&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+8) <= "+this.buffer.byteLength)}return n=0,i=0,this.littleEndian?(n=this.view[t+2]<<16,n|=this.view[t+1]<<8,n|=this.view[t],n+=this.view[t+3]<<24>>>0,t+=4,i=this.view[t+2]<<16,i|=this.view[t+1]<<8,i|=this.view[t],i+=this.view[t+3]<<24>>>0):(i=this.view[t+1]<<16,i|=this.view[t+2]<<8,i|=this.view[t+3],i+=this.view[t]<<24>>>0,t+=4,n=this.view[t+1]<<16,n|=this.view[t+2]<<8,n|=this.view[t+3],n+=this.view[t]<<24>>>0),r=new e(n,i,!1),o&&(this.offset+=8),r},o.readLong=o.readInt64,o.writeUint64=function(t,n){var i,r,o,s=void 0===n;if(s&&(n=this.offset),!this.noAssert){if("number"==typeof t)t=e.fromNumber(t);else if("string"==typeof t)t=e.fromString(t);else if(!(t&&t instanceof e))throw TypeError("Illegal value: "+t+" (not an integer or Long)");if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}return"number"==typeof t?t=e.fromNumber(t):"string"==typeof t&&(t=e.fromString(t)),(n+=8)>(i=this.buffer.byteLength)&&this.resize((i*=2)>n?i:n),n-=8,r=t.low,o=t.high,this.littleEndian?(this.view[n+3]=255&r>>>24,this.view[n+2]=255&r>>>16,this.view[n+1]=255&r>>>8,this.view[n]=255&r,n+=4,this.view[n+3]=255&o>>>24,this.view[n+2]=255&o>>>16,this.view[n+1]=255&o>>>8,this.view[n]=255&o):(this.view[n]=255&o>>>24,this.view[n+1]=255&o>>>16,this.view[n+2]=255&o>>>8,this.view[n+3]=255&o,n+=4,this.view[n]=255&r>>>24,this.view[n+1]=255&r>>>16,this.view[n+2]=255&r>>>8,this.view[n+3]=255&r),s&&(this.offset+=8),this},o.writeUInt64=o.writeUint64,o.readUint64=function(t){var n,i,r,o=void 0===t;if(o&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+8) <= "+this.buffer.byteLength)}return n=0,i=0,this.littleEndian?(n=this.view[t+2]<<16,n|=this.view[t+1]<<8,n|=this.view[t],n+=this.view[t+3]<<24>>>0,t+=4,i=this.view[t+2]<<16,i|=this.view[t+1]<<8,i|=this.view[t],i+=this.view[t+3]<<24>>>0):(i=this.view[t+1]<<16,i|=this.view[t+2]<<8,i|=this.view[t+3],i+=this.view[t]<<24>>>0,t+=4,n=this.view[t+1]<<16,n|=this.view[t+2]<<8,n|=this.view[t+3],n+=this.view[t]<<24>>>0),r=new e(n,i,!0),o&&(this.offset+=8),r},o.readUInt64=o.readUint64),o.writeFloat32=function(e,t){var n,i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if("number"!=typeof e)throw TypeError("Illegal value: "+e+" (not a number)");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}return(t+=4)>(n=this.buffer.byteLength)&&this.resize((n*=2)>t?n:t),t-=4,r(this.view,e,t,this.littleEndian,23,4),i&&(this.offset+=4),this},o.writeFloat=o.writeFloat32,o.readFloat32=function(e){var t,n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}return t=i(this.view,e,this.littleEndian,23,4),n&&(this.offset+=4),t},o.readFloat=o.readFloat32,o.writeFloat64=function(e,t){var n,i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if("number"!=typeof e)throw TypeError("Illegal value: "+e+" (not a number)");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}return(t+=8)>(n=this.buffer.byteLength)&&this.resize((n*=2)>t?n:t),t-=8,r(this.view,e,t,this.littleEndian,52,8),i&&(this.offset+=8),this},o.writeDouble=o.writeFloat64,o.readFloat64=function(e){var t,n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+8) <= "+this.buffer.byteLength)}return t=i(this.view,e,this.littleEndian,52,8),n&&(this.offset+=8),t},o.readDouble=o.readFloat64,u.MAX_VARINT32_BYTES=5,u.calculateVarint32=function(e){return(e>>>=0)<128?1:e<16384?2:1<<21>e?3:1<<28>e?4:5},u.zigZagEncode32=function(e){return((e|=0)<<1^e>>31)>>>0},u.zigZagDecode32=function(e){return 0|e>>>1^-(1&e)},o.writeVarint32=function(e,t){var n,i,r,o=void 0===t;if(o&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}for((t+=i=u.calculateVarint32(e))>(r=this.buffer.byteLength)&&this.resize((r*=2)>t?r:t),t-=i,e>>>=0;e>=128;)n=128|127&e,this.view[t++]=n,e>>>=7;return this.view[t++]=e,o?(this.offset=t,this):i},o.writeVarint32ZigZag=function(e,t){return this.writeVarint32(u.zigZagEncode32(e),t)},o.readVarint32=function(e){var t,n,i,r,o=void 0===e;if(o&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}n=0,i=0;do{if(!this.noAssert&&e>this.limit)throw(r=Error("Truncated")).truncated=!0,r;t=this.view[e++],n<5&&(i|=(127&t)<<7*n),++n}while(0!=(128&t));return i|=0,o?(this.offset=e,i):{value:i,length:n}},o.readVarint32ZigZag=function(e){var t=this.readVarint32(e);return"object"==typeof t?t.value=u.zigZagDecode32(t.value):t=u.zigZagDecode32(t),t},e&&(u.MAX_VARINT64_BYTES=10,u.calculateVarint64=function(t){"number"==typeof t?t=e.fromNumber(t):"string"==typeof t&&(t=e.fromString(t));var n=t.toInt()>>>0,i=t.shiftRightUnsigned(28).toInt()>>>0,r=t.shiftRightUnsigned(56).toInt()>>>0;return 0==r?0==i?n<16384?n<128?1:2:1<<21>n?3:4:i<16384?i<128?5:6:1<<21>i?7:8:r<128?9:10},u.zigZagEncode64=function(t){return"number"==typeof t?t=e.fromNumber(t,!1):"string"==typeof t?t=e.fromString(t,!1):!1!==t.unsigned&&(t=t.toSigned()),t.shiftLeft(1).xor(t.shiftRight(63)).toUnsigned()},u.zigZagDecode64=function(t){return"number"==typeof t?t=e.fromNumber(t,!1):"string"==typeof t?t=e.fromString(t,!1):!1!==t.unsigned&&(t=t.toSigned()),t.shiftRightUnsigned(1).xor(t.and(e.ONE).toSigned().negate()).toSigned()},o.writeVarint64=function(t,n){var i,r,o,s,a,c=void 0===n;if(c&&(n=this.offset),!this.noAssert){if("number"==typeof t)t=e.fromNumber(t);else if("string"==typeof t)t=e.fromString(t);else if(!(t&&t instanceof e))throw TypeError("Illegal value: "+t+" (not an integer or Long)");if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}switch("number"==typeof t?t=e.fromNumber(t,!1):"string"==typeof t?t=e.fromString(t,!1):!1!==t.unsigned&&(t=t.toSigned()),i=u.calculateVarint64(t),r=t.toInt()>>>0,o=t.shiftRightUnsigned(28).toInt()>>>0,s=t.shiftRightUnsigned(56).toInt()>>>0,(n+=i)>(a=this.buffer.byteLength)&&this.resize((a*=2)>n?a:n),n-=i,i){case 10:this.view[n+9]=1&s>>>7;case 9:this.view[n+8]=9!==i?128|s:127&s;case 8:this.view[n+7]=8!==i?128|o>>>21:127&o>>>21;case 7:this.view[n+6]=7!==i?128|o>>>14:127&o>>>14;case 6:this.view[n+5]=6!==i?128|o>>>7:127&o>>>7;case 5:this.view[n+4]=5!==i?128|o:127&o;case 4:this.view[n+3]=4!==i?128|r>>>21:127&r>>>21;case 3:this.view[n+2]=3!==i?128|r>>>14:127&r>>>14;case 2:this.view[n+1]=2!==i?128|r>>>7:127&r>>>7;case 1:this.view[n]=1!==i?128|r:127&r}return c?(this.offset+=i,this):i},o.writeVarint64ZigZag=function(e,t){return this.writeVarint64(u.zigZagEncode64(e),t)},o.readVarint64=function(t){var n,i,r,o,s,a,c=void 0===t;if(c&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}if(n=t,i=0,r=0,o=0,s=0,i=127&(s=this.view[t++]),128&s&&(i|=(127&(s=this.view[t++]))<<7,(128&s||this.noAssert&&void 0===s)&&(i|=(127&(s=this.view[t++]))<<14,(128&s||this.noAssert&&void 0===s)&&(i|=(127&(s=this.view[t++]))<<21,(128&s||this.noAssert&&void 0===s)&&(r=127&(s=this.view[t++]),(128&s||this.noAssert&&void 0===s)&&(r|=(127&(s=this.view[t++]))<<7,(128&s||this.noAssert&&void 0===s)&&(r|=(127&(s=this.view[t++]))<<14,(128&s||this.noAssert&&void 0===s)&&(r|=(127&(s=this.view[t++]))<<21,(128&s||this.noAssert&&void 0===s)&&(o=127&(s=this.view[t++]),(128&s||this.noAssert&&void 0===s)&&(o|=(127&(s=this.view[t++]))<<7,128&s||this.noAssert&&void 0===s))))))))))throw Error("Buffer overrun");return a=e.fromBits(i|r<<28,r>>>4|o<<24,!1),c?(this.offset=t,a):{value:a,length:t-n}},o.readVarint64ZigZag=function(t){var n=this.readVarint64(t);return n&&n.value instanceof e?n.value=u.zigZagDecode64(n.value):n=u.zigZagDecode64(n),n}),o.writeCString=function(e,n){var i,r,o,s=void 0===n;if(s&&(n=this.offset),r=e.length,!this.noAssert){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");for(i=0;r>i;++i)if(0===e.charCodeAt(i))throw RangeError("Illegal str: Contains NULL-characters");if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}return r=l.calculateUTF16asUTF8(t(e))[1],n+=r+1,o=this.buffer.byteLength,n>o&&this.resize((o*=2)>n?o:n),n-=r+1,l.encodeUTF16toUTF8(t(e),function(e){this.view[n++]=e}.bind(this)),this.view[n++]=0,s?(this.offset=n,this):r},o.readCString=function(e){var t,i,r,o=void 0===e;if(o&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}return t=e,r=-1,l.decodeUTF8toUTF16(function(){if(0===r)return null;if(e>=this.limit)throw RangeError("Illegal range: Truncated data, "+e+" < "+this.limit);return 0===(r=this.view[e++])?null:r}.bind(this),i=n(),!0),o?(this.offset=e,i()):{string:i(),length:e-t}},o.writeIString=function(e,n){var i,r,o,s=void 0===n;if(s&&(n=this.offset),!this.noAssert){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}if(r=n,i=l.calculateUTF16asUTF8(t(e),this.noAssert)[1],n+=4+i,o=this.buffer.byteLength,n>o&&this.resize((o*=2)>n?o:n),n-=4+i,this.littleEndian?(this.view[n+3]=255&i>>>24,this.view[n+2]=255&i>>>16,this.view[n+1]=255&i>>>8,this.view[n]=255&i):(this.view[n]=255&i>>>24,this.view[n+1]=255&i>>>16,this.view[n+2]=255&i>>>8,this.view[n+3]=255&i),n+=4,l.encodeUTF16toUTF8(t(e),function(e){this.view[n++]=e}.bind(this)),n!==r+4+i)throw RangeError("Illegal range: Truncated data, "+n+" == "+(n+4+i));return s?(this.offset=n,this):n-r},o.readIString=function(e){var t,n,i,r=void 0===e;if(r&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}return t=e,n=this.readUint32(e),i=this.readUTF8String(n,u.METRICS_BYTES,e+=4),e+=i.length,r?(this.offset=e,i.string):{string:i.string,length:e-t}},u.METRICS_CHARS="c",u.METRICS_BYTES="b",o.writeUTF8String=function(e,n){var i,r,o,s=void 0===n;if(s&&(n=this.offset),!this.noAssert){if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}return r=n,i=l.calculateUTF16asUTF8(t(e))[1],n+=i,o=this.buffer.byteLength,n>o&&this.resize((o*=2)>n?o:n),n-=i,l.encodeUTF16toUTF8(t(e),function(e){this.view[n++]=e}.bind(this)),s?(this.offset=n,this):n-r},o.writeString=o.writeUTF8String,u.calculateUTF8Chars=function(e){return l.calculateUTF16asUTF8(t(e))[0]},u.calculateUTF8Bytes=function(e){return l.calculateUTF16asUTF8(t(e))[1]},u.calculateString=u.calculateUTF8Bytes,o.readUTF8String=function(e,t,i){var r,o,s,a,c;if("number"==typeof t&&(i=t,t=void 0),(r=void 0===i)&&(i=this.offset),void 0===t&&(t=u.METRICS_CHARS),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal length: "+e+" (not an integer)");if(e|=0,"number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}if(s=0,a=i,t===u.METRICS_CHARS){if(o=n(),l.decodeUTF8(function(){return e>s&&i<this.limit?this.view[i++]:null}.bind(this),(function(e){++s,l.UTF8toUTF16(e,o)})),s!==e)throw RangeError("Illegal range: Truncated data, "+s+" == "+e);return r?(this.offset=i,o()):{string:o(),length:i-a}}if(t===u.METRICS_BYTES){if(!this.noAssert){if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+e>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+"+e+") <= "+this.buffer.byteLength)}if(c=i+e,l.decodeUTF8toUTF16(function(){return c>i?this.view[i++]:null}.bind(this),o=n(),this.noAssert),i!==c)throw RangeError("Illegal range: Truncated data, "+i+" == "+c);return r?(this.offset=i,o()):{string:o(),length:i-a}}throw TypeError("Unsupported metrics: "+t)},o.readString=o.readUTF8String,o.writeVString=function(e,n){var i,r,o,s,a=void 0===n;if(a&&(n=this.offset),!this.noAssert){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}if(o=n,i=l.calculateUTF16asUTF8(t(e),this.noAssert)[1],r=u.calculateVarint32(i),n+=r+i,s=this.buffer.byteLength,n>s&&this.resize((s*=2)>n?s:n),n-=r+i,n+=this.writeVarint32(i,n),l.encodeUTF16toUTF8(t(e),function(e){this.view[n++]=e}.bind(this)),n!==o+i+r)throw RangeError("Illegal range: Truncated data, "+n+" == "+(n+i+r));return a?(this.offset=n,this):n-o},o.readVString=function(e){var t,n,i,r=void 0===e;if(r&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}return t=e,n=this.readVarint32(e),i=this.readUTF8String(n.value,u.METRICS_BYTES,e+=n.length),e+=i.length,r?(this.offset=e,i.string):{string:i.string,length:e-t}},o.append=function(e,t,n){var i,r,o;if(("number"==typeof t||"string"!=typeof t)&&(n=t,t=void 0),(i=void 0===n)&&(n=this.offset),!this.noAssert){if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}return e instanceof u||(e=u.wrap(e,t)),(r=e.limit-e.offset)<=0||((n+=r)>(o=this.buffer.byteLength)&&this.resize((o*=2)>n?o:n),n-=r,this.view.set(e.view.subarray(e.offset,e.limit),n),e.offset+=r,i&&(this.offset+=r)),this},o.appendTo=function(e,t){return e.append(this,t),this},o.assert=function(e){return this.noAssert=!e,this},o.capacity=function(){return this.buffer.byteLength},o.clear=function(){return this.offset=0,this.limit=this.buffer.byteLength,this.markedOffset=-1,this},o.clone=function(e){var t=new u(0,this.littleEndian,this.noAssert);return e?(t.buffer=new ArrayBuffer(this.buffer.byteLength),t.view=new Uint8Array(t.buffer)):(t.buffer=this.buffer,t.view=this.view),t.offset=this.offset,t.markedOffset=this.markedOffset,t.limit=this.limit,t},o.compact=function(e,t){var n,i,r;if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}return 0===e&&t===this.buffer.byteLength?this:0==(n=t-e)?(this.buffer=s,this.view=null,this.markedOffset>=0&&(this.markedOffset-=e),this.offset=0,this.limit=0,this):(i=new ArrayBuffer(n),(r=new Uint8Array(i)).set(this.view.subarray(e,t)),this.buffer=i,this.view=r,this.markedOffset>=0&&(this.markedOffset-=e),this.offset=0,this.limit=n,this)},o.copy=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}if(e===t)return new u(0,this.littleEndian,this.noAssert);var n=t-e,i=new u(n,this.littleEndian,this.noAssert);return i.offset=0,i.limit=n,i.markedOffset>=0&&(i.markedOffset-=e),this.copyTo(i,0,e,t),i},o.copyTo=function(e,t,n,i){var r,o,s;if(!this.noAssert&&!u.isByteBuffer(e))throw TypeError("Illegal target: Not a ByteBuffer");if(t=(o=void 0===t)?e.offset:0|t,n=(r=void 0===n)?this.offset:0|n,i=void 0===i?this.limit:0|i,t<0||t>e.buffer.byteLength)throw RangeError("Illegal target range: 0 <= "+t+" <= "+e.buffer.byteLength);if(n<0||i>this.buffer.byteLength)throw RangeError("Illegal source range: 0 <= "+n+" <= "+this.buffer.byteLength);return 0==(s=i-n)?e:(e.ensureCapacity(t+s),e.view.set(this.view.subarray(n,i),t),r&&(this.offset+=s),o&&(e.offset+=s),this)},o.ensureCapacity=function(e){var t=this.buffer.byteLength;return e>t?this.resize((t*=2)>e?t:e):this},o.fill=function(e,t,n){var i=void 0===t;if(i&&(t=this.offset),"string"==typeof e&&e.length>0&&(e=e.charCodeAt(0)),void 0===t&&(t=this.offset),void 0===n&&(n=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof n||n%1!=0)throw TypeError("Illegal end: Not an integer");if(n>>>=0,t<0||t>n||n>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+n+" <= "+this.buffer.byteLength)}if(t>=n)return this;for(;n>t;)this.view[t++]=e;return i&&(this.offset=t),this},o.flip=function(){return this.limit=this.offset,this.offset=0,this},o.mark=function(e){if(e=void 0===e?this.offset:e,!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}return this.markedOffset=e,this},o.order=function(e){if(!this.noAssert&&"boolean"!=typeof e)throw TypeError("Illegal littleEndian: Not a boolean");return this.littleEndian=!!e,this},o.LE=function(e){return this.littleEndian=void 0===e||!!e,this},o.BE=function(e){return this.littleEndian=void 0!==e&&!e,this},o.prepend=function(e,t,n){var i,r,o,s,a;if(("number"==typeof t||"string"!=typeof t)&&(n=t,t=void 0),(i=void 0===n)&&(n=this.offset),!this.noAssert){if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}return e instanceof u||(e=u.wrap(e,t)),(r=e.limit-e.offset)<=0||((o=r-n)>0?(s=new ArrayBuffer(this.buffer.byteLength+o),(a=new Uint8Array(s)).set(this.view.subarray(n,this.buffer.byteLength),r),this.buffer=s,this.view=a,this.offset+=o,this.markedOffset>=0&&(this.markedOffset+=o),this.limit+=o,n+=o):new Uint8Array(this.buffer),this.view.set(e.view.subarray(e.offset,e.limit),n-r),e.offset=e.limit,i&&(this.offset-=r)),this},o.prependTo=function(e,t){return e.prepend(this,t),this},o.printDebug=function(e){"function"!=typeof e&&(e=console.log.bind(console)),e(this.toString()+"\n-------------------------------------------------------------------\n"+this.toDebug(!0))},o.remaining=function(){return this.limit-this.offset},o.reset=function(){return this.markedOffset>=0?(this.offset=this.markedOffset,this.markedOffset=-1):this.offset=0,this},o.resize=function(e){var t,n;if(!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal capacity: "+e+" (not an integer)");if((e|=0)<0)throw RangeError("Illegal capacity: 0 <= "+e)}return this.buffer.byteLength<e&&(t=new ArrayBuffer(e),(n=new Uint8Array(t)).set(this.view),this.buffer=t,this.view=n),this},o.reverse=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}return e===t||Array.prototype.reverse.call(this.view.subarray(e,t)),this},o.skip=function(e){if(!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal length: "+e+" (not an integer)");e|=0}var t=this.offset+e;if(!this.noAssert&&(t<0||t>this.buffer.byteLength))throw RangeError("Illegal length: 0 <= "+this.offset+" + "+e+" <= "+this.buffer.byteLength);return this.offset=t,this},o.slice=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}var n=this.clone();return n.offset=e,n.limit=t,n},o.toBuffer=function(e){var t,n=this.offset,i=this.limit;if(!this.noAssert){if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: Not an integer");if(n>>>=0,"number"!=typeof i||i%1!=0)throw TypeError("Illegal limit: Not an integer");if(i>>>=0,n<0||n>i||i>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+n+" <= "+i+" <= "+this.buffer.byteLength)}return e||0!==n||i!==this.buffer.byteLength?n===i?s:(t=new ArrayBuffer(i-n),new Uint8Array(t).set(new Uint8Array(this.buffer).subarray(n,i),0),t):this.buffer},o.toArrayBuffer=o.toBuffer,o.toString=function(e,t,n){if(void 0===e)return"ByteBufferAB(offset="+this.offset+",markedOffset="+this.markedOffset+",limit="+this.limit+",capacity="+this.capacity()+")";switch("number"==typeof e&&(n=t=e="utf8"),e){case"utf8":return this.toUTF8(t,n);case"base64":return this.toBase64(t,n);case"hex":return this.toHex(t,n);case"binary":return this.toBinary(t,n);case"debug":return this.toDebug();case"columns":return this.toColumns();default:throw Error("Unsupported encoding: "+e)}},c=function(){var e,t,n={},i=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47],r=[];for(e=0,t=i.length;t>e;++e)r[i[e]]=e;return n.encode=function(e,t){for(var n,r;null!==(n=e());)t(i[63&n>>2]),r=(3&n)<<4,null!==(n=e())?(t(i[63&((r|=15&n>>4)|15&n>>4)]),r=(15&n)<<2,null!==(n=e())?(t(i[63&(r|3&n>>6)]),t(i[63&n])):(t(i[63&r]),t(61))):(t(i[63&r]),t(61),t(61))},n.decode=function(e,t){function n(e){throw Error("Illegal character code: "+e)}for(var i,o,s;null!==(i=e());)if(void 0===(o=r[i])&&n(i),null!==(i=e())&&(void 0===(s=r[i])&&n(i),t(o<<2>>>0|(48&s)>>4),null!==(i=e()))){if(void 0===(o=r[i])){if(61===i)break;n(i)}if(t((15&s)<<4>>>0|(60&o)>>2),null!==(i=e())){if(void 0===(s=r[i])){if(61===i)break;n(i)}t((3&o)<<6>>>0|s)}}},n.test=function(e){return/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(e)},n}(),o.toBase64=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),t|=0,(e|=0)<0||t>this.capacity||e>t)throw RangeError("begin, end");var i;return c.encode(function(){return t>e?this.view[e++]:null}.bind(this),i=n()),i()},u.fromBase64=function(e,n){if("string"!=typeof e)throw TypeError("str");var i=new u(e.length/4*3,n),r=0;return c.decode(t(e),(function(e){i.view[r++]=e})),i.limit=r,i},u.btoa=function(e){return u.fromBinary(e).toBase64()},u.atob=function(e){return u.fromBase64(e).toBinary()},o.toBinary=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),t|=0,(e|=0)<0||t>this.capacity()||e>t)throw RangeError("begin, end");if(e===t)return"";for(var n=[],i=[];t>e;)n.push(this.view[e++]),n.length>=1024&&(i.push(String.fromCharCode.apply(String,n)),n=[]);return i.join("")+String.fromCharCode.apply(String,n)},u.fromBinary=function(e,t){if("string"!=typeof e)throw TypeError("str");for(var n,i=0,r=e.length,o=new u(r,t);r>i;){if((n=e.charCodeAt(i))>255)throw RangeError("illegal char code: "+n);o.view[i++]=n}return o.limit=r,o},o.toDebug=function(e){for(var t,n=-1,i=this.buffer.byteLength,r="",o="",s="";i>n;){if(-1!==n&&(r+=(t=this.view[n])<16?"0"+t.toString(16).toUpperCase():t.toString(16).toUpperCase(),e&&(o+=t>32&&t<127?String.fromCharCode(t):".")),++n,e&&n>0&&n%16==0&&n!==i){for(;r.length<51;)r+=" ";s+=r+o+"\n",r=o=""}r+=n===this.offset&&n===this.limit?n===this.markedOffset?"!":"|":n===this.offset?n===this.markedOffset?"[":"<":n===this.limit?n===this.markedOffset?"]":">":n===this.markedOffset?"'":e||0!==n&&n!==i?" ":""}if(e&&" "!==r){for(;r.length<51;)r+=" ";s+=r+o+"\n"}return e?s:r},u.fromDebug=function(e,t,n){for(var i,r,o=e.length,s=new u(0|(o+1)/3,t,n),a=0,c=0,l=!1,d=!1,h=!1,p=!1,f=!1;o>a;){switch(i=e.charAt(a++)){case"!":if(!n){if(d||h||p){f=!0;break}d=h=p=!0}s.offset=s.markedOffset=s.limit=c,l=!1;break;case"|":if(!n){if(d||p){f=!0;break}d=p=!0}s.offset=s.limit=c,l=!1;break;case"[":if(!n){if(d||h){f=!0;break}d=h=!0}s.offset=s.markedOffset=c,l=!1;break;case"<":if(!n){if(d){f=!0;break}d=!0}s.offset=c,l=!1;break;case"]":if(!n){if(p||h){f=!0;break}p=h=!0}s.limit=s.markedOffset=c,l=!1;break;case">":if(!n){if(p){f=!0;break}p=!0}s.limit=c,l=!1;break;case"'":if(!n){if(h){f=!0;break}h=!0}s.markedOffset=c,l=!1;break;case" ":l=!1;break;default:if(!n&&l){f=!0;break}if(r=parseInt(i+e.charAt(a++),16),!n&&(isNaN(r)||r<0||r>255))throw TypeError("Illegal str: Not a debug encoded string");s.view[c++]=r,l=!0}if(f)throw TypeError("Illegal str: Invalid symbol at "+a)}if(!n){if(!d||!p)throw TypeError("Illegal str: Missing offset or limit");if(c<s.buffer.byteLength)throw TypeError("Illegal str: Not a debug encoded string (is it hex?) "+c+" < "+o)}return s},o.toHex=function(e,t){if(e=void 0===e?this.offset:e,t=void 0===t?this.limit:t,!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}for(var n,i=new Array(t-e);t>e;)(n=this.view[e++])<16?i.push("0",n.toString(16)):i.push(n.toString(16));return i.join("")},u.fromHex=function(e,t,n){var i,r,o,s,a;if(!n){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if(e.length%2!=0)throw TypeError("Illegal str: Length not a multiple of 2")}for(r=e.length,o=new u(0|r/2,t),s=0,a=0;r>s;s+=2){if(i=parseInt(e.substring(s,s+2),16),!n&&(!isFinite(i)||i<0||i>255))throw TypeError("Illegal str: Contains non-hex characters");o.view[a++]=i}return o.limit=a,o},l=function(){var e={MAX_CODEPOINT:1114111,encodeUTF8:function(e,t){var n=null;for("number"==typeof e&&(n=e,e=function(){return null});null!==n||null!==(n=e());)n<128?t(127&n):n<2048?(t(192|31&n>>6),t(128|63&n)):n<65536?(t(224|15&n>>12),t(128|63&n>>6),t(128|63&n)):(t(240|7&n>>18),t(128|63&n>>12),t(128|63&n>>6),t(128|63&n)),n=null},decodeUTF8:function(e,t){for(var n,i,r,o,s=function(e){e=e.slice(0,e.indexOf(null));var t=Error(e.toString());throw t.name="TruncatedError",t.bytes=e,t};null!==(n=e());)if(0==(128&n))t(n);else if(192==(224&n))null===(i=e())&&s([n,i]),t((31&n)<<6|63&i);else if(224==(240&n))(null===(i=e())||null===(r=e()))&&s([n,i,r]),t((15&n)<<12|(63&i)<<6|63&r);else{if(240!=(248&n))throw RangeError("Illegal starting byte: "+n);(null===(i=e())||null===(r=e())||null===(o=e()))&&s([n,i,r,o]),t((7&n)<<18|(63&i)<<12|(63&r)<<6|63&o)}},UTF16toUTF8:function(e,t){for(var n,i=null;null!==(n=null!==i?i:e());)n>=55296&&n<=57343&&null!==(i=e())&&i>=56320&&i<=57343?(t(1024*(n-55296)+i-56320+65536),i=null):t(n);null!==i&&t(i)},UTF8toUTF16:function(e,t){var n=null;for("number"==typeof e&&(n=e,e=function(){return null});null!==n||null!==(n=e());)n<=65535?t(n):(t(55296+((n-=65536)>>10)),t(n%1024+56320)),n=null},encodeUTF16toUTF8:function(t,n){e.UTF16toUTF8(t,(function(t){e.encodeUTF8(t,n)}))},decodeUTF8toUTF16:function(t,n){e.decodeUTF8(t,(function(t){e.UTF8toUTF16(t,n)}))},calculateCodePoint:function(e){return e<128?1:e<2048?2:e<65536?3:4},calculateUTF8:function(e){for(var t,n=0;null!==(t=e());)n+=t<128?1:t<2048?2:t<65536?3:4;return n},calculateUTF16asUTF8:function(t){var n=0,i=0;return e.UTF16toUTF8(t,(function(e){++n,i+=e<128?1:e<2048?2:e<65536?3:4})),[n,i]}};return e}(),o.toUTF8=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}var i;try{l.decodeUTF8toUTF16(function(){return t>e?this.view[e++]:null}.bind(this),i=n())}catch(n){if(e!==t)throw RangeError("Illegal range: Truncated data, "+e+" != "+t)}return i()},u.fromUTF8=function(e,n,i){if(!i&&"string"!=typeof e)throw TypeError("Illegal str: Not a string");var r=new u(l.calculateUTF16asUTF8(t(e),!0)[1],n,i),o=0;return l.encodeUTF16toUTF8(t(e),(function(e){r.view[o++]=e})),r.limit=o,r},u}(Ai=function(){function e(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function t(e){return!0===(e&&e.__isLong__)}function n(e,t){var n,i,o;return t?(o=(e>>>=0)>=0&&e<256)&&(i=c[e])?i:(n=r(e,(0|e)<0?-1:0,!0),o&&(c[e]=n),n):(o=(e|=0)>=-128&&e<128)&&(i=a[e])?i:(n=r(e,e<0?-1:0,!1),o&&(a[e]=n),n)}function i(e,t){if(isNaN(e)||!isFinite(e))return t?g:f;if(t){if(e<0)return g;if(e>=d)return C}else{if(-h>=e)return E;if(e+1>=h)return y}return e<0?i(-e,t).neg():r(0|e%u,0|e/u,t)}function r(t,n,i){return new e(t,n,i)}function o(e,t,n){var r,s,a,c,u,d,h;if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return f;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||n>36)throw RangeError("radix");if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return o(e.substring(1),t,n).neg();for(s=i(l(n,8)),a=f,c=0;c<e.length;c+=8)u=Math.min(8,e.length-c),d=parseInt(e.substring(c,c+u),n),u<8?(h=i(l(n,u)),a=a.mul(h).add(i(d))):a=(a=a.mul(s)).add(i(d));return a.unsigned=t,a}function s(t){return t instanceof e?t:"number"==typeof t?i(t):"string"==typeof t?o(t):r(t.low,t.high,t.unsigned)}var a,c,l,u,d,h,p,f,g,m,_,v,y,C,E,b;return e.prototype.__isLong__,Object.defineProperty(e.prototype,"__isLong__",{value:!0,enumerable:!1,configurable:!1}),e.isLong=t,a={},c={},e.fromInt=n,e.fromNumber=i,e.fromBits=r,l=Math.pow,e.fromString=o,e.fromValue=s,h=(d=(u=4294967296)*u)/2,p=n(16777216),f=n(0),e.ZERO=f,g=n(0,!0),e.UZERO=g,m=n(1),e.ONE=m,_=n(1,!0),e.UONE=_,v=n(-1),e.NEG_ONE=v,y=r(-1,2147483647,!1),e.MAX_VALUE=y,C=r(-1,-1,!0),e.MAX_UNSIGNED_VALUE=C,E=r(0,-2147483648,!1),e.MIN_VALUE=E,(b=e.prototype).toInt=function(){return this.unsigned?this.low>>>0:this.low},b.toNumber=function(){return this.unsigned?(this.high>>>0)*u+(this.low>>>0):this.high*u+(this.low>>>0)},b.toString=function(e){var t,n,r,o,s,a,c,u;if((e=e||10)<2||e>36)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())return this.eq(E)?(t=i(e),r=(n=this.div(t)).mul(t).sub(this),n.toString(e)+r.toInt().toString(e)):"-"+this.neg().toString(e);for(o=i(l(e,6),this.unsigned),s=this,a="";;){if(c=s.div(o),u=(s.sub(c.mul(o)).toInt()>>>0).toString(e),(s=c).isZero())return u+a;for(;u.length<6;)u="0"+u;a=""+u+a}},b.getHighBits=function(){return this.high},b.getHighBitsUnsigned=function(){return this.high>>>0},b.getLowBits=function(){return this.low},b.getLowBitsUnsigned=function(){return this.low>>>0},b.getNumBitsAbs=function(){var e,t;if(this.isNegative())return this.eq(E)?64:this.neg().getNumBitsAbs();for(e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},b.isZero=function(){return 0===this.high&&0===this.low},b.isNegative=function(){return!this.unsigned&&this.high<0},b.isPositive=function(){return this.unsigned||this.high>=0},b.isOdd=function(){return 1==(1&this.low)},b.isEven=function(){return 0==(1&this.low)},b.equals=function(e){return t(e)||(e=s(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},b.eq=b.equals,b.notEquals=function(e){return!this.eq(e)},b.neq=b.notEquals,b.lessThan=function(e){return this.comp(e)<0},b.lt=b.lessThan,b.lessThanOrEqual=function(e){return this.comp(e)<=0},b.lte=b.lessThanOrEqual,b.greaterThan=function(e){return this.comp(e)>0},b.gt=b.greaterThan,b.greaterThanOrEqual=function(e){return this.comp(e)>=0},b.gte=b.greaterThanOrEqual,b.compare=function(e){if(t(e)||(e=s(e)),this.eq(e))return 0;var n=this.isNegative(),i=e.isNegative();return n&&!i?-1:!n&&i?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},b.comp=b.compare,b.negate=function(){return!this.unsigned&&this.eq(E)?E:this.not().add(m)},b.neg=b.negate,b.add=function(e){var n,i,o,a,c,l,u,d,h,p,f;return t(e)||(e=s(e)),n=this.high>>>16,i=65535&this.high,o=this.low>>>16,a=65535&this.low,c=e.high>>>16,l=65535&e.high,u=e.low>>>16,d=0,h=0,p=0,f=0,p+=(f+=a+(65535&e.low))>>>16,h+=(p+=o+u)>>>16,d+=(h+=i+l)>>>16,d+=n+c,r((p&=65535)<<16|(f&=65535),(d&=65535)<<16|(h&=65535),this.unsigned)},b.subtract=function(e){return t(e)||(e=s(e)),this.add(e.neg())},b.sub=b.subtract,b.multiply=function(e){var n,o,a,c,l,u,d,h,g,m,_,v;return this.isZero()?f:(t(e)||(e=s(e)),e.isZero()?f:this.eq(E)?e.isOdd()?E:f:e.eq(E)?this.isOdd()?E:f:this.isNegative()?e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg():e.isNegative()?this.mul(e.neg()).neg():this.lt(p)&&e.lt(p)?i(this.toNumber()*e.toNumber(),this.unsigned):(n=this.high>>>16,o=65535&this.high,a=this.low>>>16,c=65535&this.low,l=e.high>>>16,u=65535&e.high,d=e.low>>>16,g=0,m=0,_=0,v=0,_+=(v+=c*(h=65535&e.low))>>>16,m+=(_+=a*h)>>>16,_&=65535,m+=(_+=c*d)>>>16,g+=(m+=o*h)>>>16,m&=65535,g+=(m+=a*d)>>>16,m&=65535,g+=(m+=c*u)>>>16,g+=n*h+o*d+a*u+c*l,r((_&=65535)<<16|(v&=65535),(g&=65535)<<16|(m&=65535),this.unsigned)))},b.mul=b.multiply,b.divide=function(e){var n,r,o,a,c,u,d;if(t(e)||(e=s(e)),e.isZero())throw Error("division by zero");if(this.isZero())return this.unsigned?g:f;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return g;if(e.gt(this.shru(1)))return _;o=g}else{if(this.eq(E))return e.eq(m)||e.eq(v)?E:e.eq(E)?m:(n=this.shr(1).div(e).shl(1)).eq(f)?e.isNegative()?m:v:(r=this.sub(e.mul(n)),o=n.add(r.div(e)));if(e.eq(E))return this.unsigned?g:f;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=f}for(r=this;r.gte(e);){for(n=Math.max(1,Math.floor(r.toNumber()/e.toNumber())),c=(a=Math.ceil(Math.log(n)/Math.LN2))<=48?1:l(2,a-48),d=(u=i(n)).mul(e);d.isNegative()||d.gt(r);)d=(u=i(n-=c,this.unsigned)).mul(e);u.isZero()&&(u=m),o=o.add(u),r=r.sub(d)}return o},b.div=b.divide,b.modulo=function(e){return t(e)||(e=s(e)),this.sub(this.div(e).mul(e))},b.mod=b.modulo,b.not=function(){return r(~this.low,~this.high,this.unsigned)},b.and=function(e){return t(e)||(e=s(e)),r(this.low&e.low,this.high&e.high,this.unsigned)},b.or=function(e){return t(e)||(e=s(e)),r(this.low|e.low,this.high|e.high,this.unsigned)},b.xor=function(e){return t(e)||(e=s(e)),r(this.low^e.low,this.high^e.high,this.unsigned)},b.shiftLeft=function(e){return t(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?r(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):r(0,this.low<<e-32,this.unsigned)},b.shl=b.shiftLeft,b.shiftRight=function(e){return t(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?r(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):r(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},b.shr=b.shiftRight,b.shiftRightUnsigned=function(e){var n;return t(e)&&(e=e.toInt()),0==(e&=63)?this:(n=this.high,e<32?r(this.low>>>e|n<<32-e,n>>>e,this.unsigned):r(32===e?n:n>>>e-32,0,this.unsigned))},b.shru=b.shiftRightUnsigned,b.toSigned=function(){return this.unsigned?r(this.low,this.high,!1):this},b.toUnsigned=function(){return this.unsigned?this:r(this.low,this.high,!0)},b.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},b.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,255&t>>>8,255&t>>>16,255&t>>>24,255&e,255&e>>>8,255&e>>>16,255&e>>>24]},b.toBytesBE=function(){var e=this.high,t=this.low;return[255&e>>>24,255&e>>>16,255&e>>>8,255&e,255&t>>>24,255&t>>>16,255&t>>>8,255&t]},e}()),Ai));Bi.getModule=function(e){var t=new Bi[e];return t.getArrayData=function(){var e=t.toArrayBuffer();return ne(e)?[].slice.call(new Int8Array(e)):e},t};var Vi,ji="pgMsgP",Fi="chatMsg",$i="pcMsgP",Hi={PRIVATE:"ppMsgS",GROUP:"pgMsgS",CHATROOM:"chatMsgS"},Ki="delMsg",Wi="joinChrm",qi="joinChrmR",Gi="exitChrm",zi="setKV",Yi="delKV",Ji="setKVS",Xi="delKVS",Qi="qryRelationR",Zi="delRelation",er="setSeAtt",tr={PRIVATE:"cleanPMsg",GROUP:"cleanGMsg",ULTRA_GROUP:"cleanGMsg",CUSTOMER_SERVICE:"cleanCMsg",SYSTEM:"cleanSMsg"},nr="qryPMsg",ir="qryGMsg",rr="qryCHMsg",or="qryCMsg",sr="qrySMsg",ar=((Di={})["ppMsgP"]=Y.PRIVATE,Di[ji]=Y.GROUP,Di[Fi]=Y.CHATROOM,Di[$i]=Y.CUSTOMER_SERVICE,Di),cr=((Ni={})[Y.PRIVATE]=nr,Ni[Y.GROUP]=ir,Ni[Y.CHATROOM]=rr,Ni[Y.CUSTOMER_SERVICE]=or,Ni[Y.SYSTEM]=sr,Ni),lr=((Li={})[Y.PRIVATE]=tr.PRIVATE,Li[Y.GROUP]=tr.GROUP,Li[Y.ULTRA_GROUP]=tr.ULTRA_GROUP,Li[Y.CUSTOMER_SERVICE]=tr.CUSTOMER_SERVICE,Li[Y.SYSTEM]=tr.SYSTEM,Li),ur="1",dr="0",hr=1,pr=2,fr=3,gr=function(){function e(e){this._codec="websocket"===e?Bi:ki,this._connectType=e}return e.prototype.decodeByPBName=function(e,t,n){var i,r=this,o=e,s=((i={})[Ut]=r._formatSyncMessages,i[Lt]=r._formatReceivedMessage,i[Dt]=r._formatSentMessage,i[Kt]=r._formatHistoryMessages,i[qt]=r._formatConversationList,i[rn]=r._formatChatRoomInfos,i[sn]=r._formatRTCUserList,i[fn]=r._formatRTCData,i[xn]=r._formatChatRoomKVList,i[Vn]=r._formatUserSetting,i[$n]=r._formatConversationStatus,i[Yn]=r._formatGrpReadReceiptQryResp,i[Un]=r._formatSetUserSettingOutput,i[jn]=r._formatUserSettingNotification,i[ci]=r._formatUltraMsgChangeList,i[pi]=r._formatUltraOperateStatusNotifyList,i[di]=r._formatUltraMsgList,i[tn]=r._formatChrmKVVersion,i[vi]=r._formatRTCRoomKVList,i[pn]=r._formatRTCAuidenceJoinRoomData,i[Ci]=r._formatRTCJoinedUserInfo,i)[t];try{o=e.length>0&&r._codec[t].decode(e),oe(o)&&(o=function(e){for(var t in e)oe(e[t])&&(e[t]=ct(e[t]));return e}(o)),se(s)&&(o=s.call(this,o,n))}catch(n){ve.error("PB parse error\n",n,e,t)}return o},e.prototype._readBytes=function(e){var t=e.offset,n=e.buffer,i=e.limit;if(t)try{var r=ne(n)?new Uint8Array(n):n;return xt.readUTF(r.subarray(t,i))}catch(e){ve.info("readBytes error\n",e)}return e},e.prototype._formatBytes=function(e){if(!e)return e;var t=this._readBytes(e);try{t=JSON.parse(t)}catch(e){ve.info("formatBytes error\n",e)}return t||e},e.prototype._formatSyncMessages=function(e,t){t=t||{};var n=this,i=e.list,r=e.syncTime,o=e.finished;return(ae(o)||null===o)&&(e.finished=!0),e.syncTime=ct(r),e.list=mt(i,(function(e){return n._formatReceivedMessage(e,t)})),e},e.prototype._formatReceivedMessage=function(e,t){if(!e)return e;var n=(t=t||{}).currentUserId,i=t.connectedTime,r=e.content,o=e.fromUserId,a=e.type,c=e.groupId,l=e.status,u=e.dataTime,d=e.classname,h=e.msgId,p=e.extraContent,f=e.pushContent,g=e.pushExt,m=e.configFlag,_=e.extStatus,v=(e.direction||Ee.RECEIVE)===Ee.SEND,y=function(e){var t=s.READ;return{isPersited:!!(16&e),isCounted:!!(32&e),isMentioned:!!(64&e),disableNotification:!!(512&e),receivedStatus:t=2&e?s.RETRIEVED:t,canIncludeExpansion:!!(1024&e)}}(l),C=y.isPersited,E=y.isCounted,b=y.isMentioned,T=y.disableNotification,S=y.receivedStatus,R=y.canIncludeExpansion,I=!!(2&(_||0)),w=!!(4&(_||0)),O=[Y.GROUP,Y.CHATROOM,Y.RTC_ROOM,Y.ULTRA_GROUP].indexOf(a)>-1?c:o,k=v?n:o,x=ct(u),P=x<i,A=a===Y.CHATROOM,D=this._formatBytes(r),N={};if(g&&(N=ht(g.pushConfigs,g.pushId)),D.user){var L=D.user,U=L.portrait,B=L.portraitUri,V=U||B;V&&(D.user.portrait=D.user.portraitUri=V)}var j,F=M(M({},N),{pushTitle:null==g?void 0:g.title,pushContent:f,pushData:f,disablePushTitle:!!m&&Boolean(4&m),forceShowDetailContent:!!m&&Boolean(8&m),templateId:null==g?void 0:g.templateId}),$=v?Ee.SEND:Ee.RECEIVE;A&&o===n&&($=Ee.SEND),p&&(j={},j=It(p));var H={conversationType:a,targetId:O,senderUserId:k,messageType:d,messageUId:h,isPersited:C,isCounted:E,isMentioned:b,sentTime:x,messageDirection:$,receivedTime:wt.getTime(),disableNotification:T,receivedStatus:S,canIncludeExpansion:R,content:D,expansion:j,configFlag:m,pushConfig:F,channelId:e.busChannel||"",isInterrupt:I,isModifyMessage:w};return a!==Y.ULTRA_GROUP&&(H.isOffLineMessage=P),H},e.prototype._formatSentMessage=function(e,t){var n,i=e.content,r=e.classname,o=e.sessionId,s=e.msgId,a=e.extraContent,c=e.pushExt,l=e.pushContent,u=e.configFlag,d=e.extStatus,h=t.signal,p=t.currentUserId,f=h.date,g=h.topic,m=h.targetId,_=!!(2&(d||0)),v=function(e){return{isPersited:!!(1&e),isCounted:!!(2&e),disableNotification:!!(32&e),canIncludeExpansion:!!(64&e)}}(o),y=v.isPersited,C=v.isCounted,E=v.disableNotification,b=v.canIncludeExpansion,T=ar[g]||Y.PRIVATE,S=yt(Hi,g),R=this._formatBytes(i),I=m;r===Oe.RECALL&&(T=R.conversationType||T,I=R.targetId||m),a&&(n={},n=It(a));var w={};c&&(w=ht(c.pushConfigs,c.pushId));var O=M(M({},w),{pushTitle:null==c?void 0:c.title,pushContent:l,pushData:l,disablePushTitle:!!u&&Boolean(4&u),forceShowDetailContent:!!u&&Boolean(8&u),templateId:null==c?void 0:c.templateId});return{conversationType:T,targetId:I,messageType:r,messageUId:s,isPersited:y,isCounted:C,isStatusMessage:S,senderUserId:p,content:this._formatBytes(i),sentTime:1e3*f,receivedTime:wt.getTime(),messageDirection:Ee.SEND,isOffLineMessage:!1,disableNotification:E,canIncludeExpansion:b,expansion:n,pushConfig:O,channelId:e.busChannel||"",isInterrupt:_}},e.prototype._formatHistoryMessages=function(e,t){var n=this,i=t.conversation||{},r=e.list,o=e.hasMsg,s=i.targetId,a=ct(e.syncTime),c=[];return gt(r,(function(e){var r=n._formatReceivedMessage(e,t);i.conversationType===Y.ULTRA_GROUP?r.targetId=e.groupId||i.targetId:r.targetId=s,c.push(r)}),{isReverse:!0}),{syncTime:a,list:c,hasMore:!!o}},e.prototype._formatUltraMsgChangeList=function(e){var t=e.list,n=e.syncTime,i=e.hasNext;return{syncTime:n,list:t&&t.map((function(e){var t=e.targetId,n=e.type,i=e.time,r=e.changeType,o=e.msgUID,s=e.msgTime,a=e.busChannel,c=e.isAdmin,l=e.isDel,u=e.operatorId;return{targetId:t,conversationType:n,changeType:r,messageUId:o,changeTime:ct(i),sendTime:ct(s),channelId:a,isAdmin:c,isDel:l,operatorId:u}})),hasNext:i}},e.prototype._formatUltraOperateStatusNotifyList=function(e){var t=e.type,n=e.notifyType,i=e.info,r=e.summary,o=[],s=[],a=2==(2&n),c=1==(1&n);return c&&Array.isArray(i)&&i.forEach((function(e){var t=e.targetId,n=e.busChannel,i=e.userId,r=e.opType,s=e.optime,a=ct(s);o.push({targetId:t,channelId:n,userId:i,operationType:r,operationTime:a})})),a&&Array.isArray(r)&&r.forEach((function(e){var t=e.targetId,n=e.busChannel,i=e.count,r=e.opType;s.push({targetId:t,channelId:n,count:i,operationType:r})})),{conversationType:t,info:o,summary:s,hasInfo:c,hasSummary:a}},e.prototype._formatUltraMsgList=function(e,t){var n=this,i=e.list;return{list:i&&i.map((function(e){return n._formatReceivedMessage(e,t)}))}},e.prototype._formatConversationList=function(e,t){var n=this,i=e.info,r=t.afterDecode||function(){},o={list:i=mt(i,(function(e){var i=e.msg,o=e.userId,s=e.type,a=e.unreadCount,c=e.busChannel,l=e.versionTime,u=e.remindCount,d=null;i&&((d=n._formatReceivedMessage(i,t)).targetId=o);var h={targetId:o,conversationType:s,unreadMessageCount:ct(a)||0,latestMessage:d||{},channelId:c||""};return s===Y.ULTRA_GROUP&&(h.versionTime=ct(l)||0,h.unreadMentionedCount=ct(u)||0),r(h)||h}))};return((null==t?void 0:t.conversationType)||Y.NONE)===Y.ULTRA_GROUP&&(o.isFinished=e.isFinished),o},e.prototype._formatSetUserSettingOutput=function(e){return e},e.prototype._formatChatRoomInfos=function(e){var t=e.userTotalNums,n=e.userInfos;return{userCount:t,userInfos:mt(n,(function(e){var t=e.id,n=e.time;return{id:t,time:ct(n)}}))}},e.prototype._formatChatRoomKVList=function(e){var t=e.entries,n=e.bFullUpdate,i=e.syncTime;return{kvEntries:t=mt(t=t||[],(function(e){var t=e.key,n=e.value,i=e.status,r=e.timestamp,o=e.uid,s=e.version,a=function(e){return{isAutoDelete:!!(1&e),isOverwrite:!!(2&e),type:4&e?Le.DELETE:Le.UPDATE}}(i);return{key:t,value:n,isAutoDelete:a.isAutoDelete,isOverwrite:a.isOverwrite,type:a.type,userId:o,timestamp:ct(r),version:ct(s)}})),isFullUpdate:n,syncTime:i}},e.prototype._formatUserSetting=function(e){var t=this,n=e.items,i=e.version,r={};return gt(n||[],(function(e){var n=e.key,i=e.version,o=e.value;e.version=ct(i),e.value=t._readBytes(o),"Tag"===n&&e.tags.forEach((function(e){e.createdTime=ct(e.createdTime),e.tagName=e.name})),r[n]=e})),{settings:r,version:i}},e.prototype._formatConversationStatus=function(e){var t=e.state,n=[];return gt(t,(function(e){var t=e.type,i=e.channelId,r=e.time,o=e.stateItem,s=e.busChannel,a=Me.CLOSE,c=!1,l=[];gt(o,(function(e){var t=e.sessionStateType,n=e.value,i=e.tags;switch(t){case hr:a=n===ur?Me.OPEN:Me.CLOSE;break;case pr:c=n===ur;break;case fr:l=i}})),n.push({conversationType:t,type:t,targetId:i,notificationStatus:a,isTop:c,updatedTime:ct(r),tags:l,channelId:s||""})})),n},e.prototype._formatRTCUserList=function(e){var t=e.users,n=e.token,i=e.sessionId,r=e.roomInfo,o=e.entries,s={};return gt(t,(function(e){var t=e.userId,n=e.userData,i={};gt(n,(function(e){var t=e.key,n=e.value;i[t]=n})),s[t]=i})),{users:s,token:n,sessionId:i,roomInfo:r,kvEntries:o}},e.prototype._formatRTCData=function(e){var t=e.outInfo,n={};return gt(t,(function(e){n[e.key]=e.value})),n},e.prototype._formatRTCRoomInfo=function(e){var t=e.roomId,n=e.userCount,i=e.roomData,r={id:t,total:n};return gt(i,(function(e){r[e.key]=e.value})),r},e.prototype._formatGrpReadReceiptQryResp=function(e){var t=e.totalMemberNum,n=e.list;return n.forEach((function(e){e.readTime=ct(e.readTime)})),{totalMemberCount:t,list:n}},e.prototype._formatUserSettingNotification=function(e){return e},e.prototype._formatRTCRoomKVList=function(e){var t=e.entries,n=e.bFullUpdate,i=e.syncTime;return{kvEntries:t=(t=t||[]).map((function(e){var t=e.timestamp;return Object.assign(e,{timestamp:ct(t)})})),isFullUpdate:n,syncTime:i}},e.prototype._formatChrmKVVersion=function(e){return e},e.prototype._formatRTCAuidenceJoinRoomData=function(e){return e},e.prototype._formatRTCJoinedUserInfo=function(e){return(e.info||[]).map((function(e){return{deviceId:e.deviceId,roomId:e.roomId,joinTime:ct(e.joinTime)}}))},e.prototype.encodeServerConfParams=function(){var e=this._codec.getModule(Bt);return e.setNothing(1),e.getArrayData()},e.prototype._getUpMsgModule=function(e,t){var n,i,r,o="comet"===this._connectType,s=e.conversationType,a=t.messageType,c=t.isMentioned,l=t.mentionedType,u=t.mentionedUserIdList,d=t.content,h=t.pushContent,p=t.pushData,f=t.directionalUserIdList,g=t.isFilerWhiteBlacklist,m=t.isVoipPush,_=t.canIncludeExpansion,v=t.expansion,y=t.pushConfig,C=t.channelId;[Y.GROUP,Y.ULTRA_GROUP].includes(s);var E=this._codec.getModule(Dt),b=function(e){var t=e.isStatusMessage,n=e.isPersited,i=e.isCounted;t&&(n=i=!1);var r=0;return n&&(r|=1),i&&(r|=2),e.isMentioned&&(r|=4),e.disableNotification&&(r|=32),e.canIncludeExpansion&&(r|=64),r}(t),T=y||{},S=T.pushTitle,R=T.pushContent,I=T.pushData,w=T.iOSConfig,O=T.androidConfig,k=T.templateId,M=T.disablePushTitle,x=T.forceShowDetailContent,P=0;E.setSessionId(b),c&&d&&(d.mentionedInfo={userIdList:(null===(n=d.mentionedInfo)||void 0===n?void 0:n.userIdList)||u||[],type:(null===(i=d.mentionedInfo)||void 0===i?void 0:i.type)||l||Pe.ALL,mentionedContent:(null===(r=d.mentionedInfo)||void 0===r?void 0:r.mentionedContent)||""});var A=R||h||"",D=I||p||"";if(A&&E.setPushText(A),D&&E.setAppData(D),f&&E.setUserId(f),P|=m?1:0,P|=g?2:0,P|=M?4:0,P|=x?8:0,E.setConfigFlag(P),E.setClassname(a),d.user&&d.user.portraitUri&&(d.user.portrait=d.user.portraitUri),E.setContent(JSON.stringify(d)),_&&v){var N={};gt(v,(function(e,t){N[t]={v:e}})),E.setExtraContent(JSON.stringify(N))}if(y){var L=this._codec.getModule(Nt);if(S&&L.setTitle(S),w&&O){var U=dt(w,O);L.setPushConfigs(U)}(null==O?void 0:O.notificationId)&&L.setPushId(null==O?void 0:O.notificationId),L.setTemplateId(k||""),E.setPushExt(o?L.getArrayData():L)}return ae(C)||E.setBusChannel(C),E},e.prototype.encodeUpMsg=function(e,t){return this._getUpMsgModule(e,t).getArrayData()},e.prototype.encodeSyncMsg=function(e){var t=e.sendboxTime,n=e.inboxTime,i=this._codec.getModule(jt);return i.setIspolling(!1),i.setIsPullSend(!0),i.setSendBoxSyncTime(t),i.setSyncTime(n),i.getArrayData()},e.prototype.encodeChrmSyncMsg=function(e,t){e=e||0,t=t||0;var n=this._codec.getModule(Ft);return n.setCount(t),n.setSyncTime(e),n.getArrayData()},e.prototype.encodeGetHistoryMsg=function(e,t){var n=t.count,i=t.order,r=t.timestamp,o=t.channelId,s=this._codec.getModule(Ht);return s.setTargetId(e),s.setTime(r),s.setCount(n),s.setOrder(i),s.setBusChannel(o||""),s.getArrayData()},e.prototype.encodeSuperSyncMsg=function(e){var t=this._codec.getModule(ri);return t.setSyncTime(e),t.getArrayData()},e.prototype.encodeGetConversationList=function(e){var t=(e=e||{}).count,n=e.startTime,i=this._codec.getModule(Wt);return i.setType(1),i.setCount(t),i.setStartTime(n),i.getArrayData()},e.prototype.encodeOldConversationList=function(e){var t=(e=e||{}).count,n=e.type,i=e.startTime,r=e.order;t=t||0,i=i||0,r=r||0;var o=this._codec.getModule(Wt);return o.setType(n),o.setCount(t),o.setStartTime(i),o.setOrder(r),o.getArrayData()},e.prototype.encodeRemoveOldConversationList=function(e){var t=(e=e||{}).conversationType,n=e.channelId,i=this._codec.getModule(Jt);return i.setType(t),n&&i.setBusChannel([n]),i.getArrayData()},e.prototype.encodeRemoveConversationList=function(e){var t=this,n=this._codec.getModule(Gt),i=[];return gt(e,(function(e){var n=e.conversationType,r=e.targetId,o=t._codec.getModule(zt);o.setType(n),o.setChannelId(r),i.push(o)})),n.setSessions(i),n.getArrayData()},e.prototype.encodeDeleteMessages=function(e,t,n,i){var r=this._codec.getModule(Xt),o=[];return gt(n,(function(e){o.push({msgId:e.messageUId,msgDataTime:e.sentTime,direct:e.messageDirection})})),r.setType(e),r.setConversationId(t),r.setMsgs(o),r.setBusChannel(i),r.getArrayData()},e.prototype.encodeClearMessages=function(e,t,n,i){var r=this._codec.getModule(Qt);return t=t||(new Date).getTime(),r.setDataTime(t),r.setTargetId(e),r.setBusChannel(n),r.setConversationType(i),r.getArrayData()},e.prototype.encodeClearUnreadCount=function(e,t){var n=e.conversationType,i=e.targetId,r=e.channelId,o=t.timestamp,s=this._codec.getModule(Zt);return o=o||+new Date,s.setType(n),s.setChannelId(i),s.setMsgTime(o),s.setBusChannel(r),s.getArrayData()},e.prototype.encodeExpandUltraMessage=function(e,t){var n=e.targetId,i=e.conversationType,r=e.channelId,o=e.messageUId,s=e.sendTime,a=e.keys,c={mid:o,put:e.expansion,del:a,clear:e.removeAll?1:0},l=this._codec.getModule(oi);return l.setFromUserId(t),l.setTargetId(n),l.setType(i),l.setBusChannel(r||""),l.setMsgUID(o),l.setMsgTime(s),l.setContent(JSON.stringify(c)),l.getArrayData()},e.prototype.encodemodifyMessage=function(e,t){var n=e.targetId,i=e.conversationType,r=e.channelId,o=e.messageUId,s=e.sendTime,a=e.content,c=this._codec.getModule(oi);return c.setFromUserId(t),c.setTargetId(n),c.setType(i),c.setBusChannel(r||""),c.setMsgUID(o),c.setMsgTime(s),c.setContent(JSON.stringify(a)),c.getArrayData()},e.prototype.encodeQueryMsgChange=function(e){var t=this._codec.getModule(si);return t.setSyncTime(e),t.getArrayData()},e.prototype.encodeMsgQuery=function(e){var t=e.targetId,n=e.conversationType,i=e.messages,r=this._codec.getModule(li),o=i.map((function(e){return{msgTime:e.sendTime,msgUID:e.messageUId,busChannel:e.channelId}}));return r.setTargetId(t),r.setType(n),r.setQuery(o),r.getArrayData()},e.prototype.encodeOperateStatus=function(e,t,n,i){var r=this._codec.getModule(hi);return r.setTargetId(e),r.setType(t),r.setBusChannel(n),r.setOpType(i),r.getArrayData()},e.prototype.encodeJoinOrQuitChatRoom=function(){var e=this._codec.getModule(en);return e.setNothing(1),e.getArrayData()},e.prototype.encodeGetChatRoomInfo=function(e,t){var n=this._codec.getModule(nn);return n.setCount(e),n.setOrder(t),n.getArrayData()},e.prototype.encodeGetFileToken=function(e,t,n,i){var r=this._codec.getModule(En);return r.setType(e),r.setKey(t),r.setHttpMethod(n),r.setQueryString(i),r.getArrayData()},e.prototype.encodeGetFileUrl=function(e,t,n,i){var r=this._codec.getModule(e);return r.setType(t),r.setKey(n),i&&r.setFileName(i),r.getArrayData()},e.prototype.encodeModifyChatRoomKV=function(e,t,n){var i="comet"===this._connectType,r=this._codec.getModule(On),o=t.key,s=t.value,a=t.notificationExtra,c=t.isSendNotification,l=t.type,u=t.timestamp,d=l||Le.UPDATE,h=Ot(t,d),p={key:o,value:s||"",uid:n,version:u};if(ae(h)||(p.status=h),r.setEntry(p),c){var f={conversationType:Y.CHATROOM,targetId:e},g={key:o,value:s,extra:a,type:d},m=this._getUpMsgModule(f,{messageType:Oe.CHRM_KV_NOTIFY,content:g,isPersited:!1,isCounted:!1});i?r.setNotification(m.getArrayData()):r.setNotification(m),r.setBNotify(!0),r.setType(Y.CHATROOM)}return r.getArrayData()},e.prototype.encodeModifyChatRoomKVS=function(e,t,n){this._connectType;var i=this._codec.getModule(kn),r=t.entries,o=t.type||Le.UPDATE,s=Ot(t,o),a=[];return r.forEach((function(e){var t={key:e.key,value:e.value||"",uid:n,version:e.timestamp};ae(s)||(t.status=s),a.push(t)})),i.setEntry(a),i.getArrayData()},e.prototype.encodePullChatRoomKV=function(e){var t=this._codec.getModule(Nn);return t.setTimestamp(e),t.getArrayData()},e.prototype.encodePullUserSetting=function(e){var t=this._codec.getModule(Bn);return t.setVersion(e),t.getArrayData()},e.prototype.encodeGetConversationStatus=function(e){var t=this._codec.getModule(Fn);return t.setTime(e),t.getArrayData()},e.prototype.encodeSetConversationStatus=function(e){var t=this,n="comet"===this._connectType,i=this._codec.getModule(Wn),r=wt.getTime(),o=[];return gt(e,(function(e){var i=t._codec.getModule(Hn),s=e.conversationType,a=e.targetId,c=e.notificationStatus,l=e.isTop,u=e.channelId,d=[];i.setType(s),i.setChannelId(a),i.setTime(r),i.setBusChannel(u);var h=c===Me.OPEN,p={};ae(c)||(p[hr]=h),ae(l)||(p[pr]=l),gt(p,(function(e,i){if(!ae(e)){var r=t._codec.getModule(Kn);e=e?ur:dr,r.setSessionStateType(Number(i)),r.setValue(e);var o=n?r.getArrayData():r;d.push(o)}})),i.setStateItem(d);var f=n?i.getArrayData():i;o.push(f)})),i.setVersion(r),i.setState(o),i.getArrayData()},e.prototype.encodeReadReceipt=function(e,t){var n=this._codec.getModule(Gn);return n.setMsgId(e),t&&n.setChannelId(t),n.getArrayData()},e.prototype.encodeCreateTag=function(e,t){var n=this,i="comet"===this._connectType,r=this._codec.getModule(Xn),o=[];return e.forEach((function(e){var t=n._codec.getModule(Qn);t.setTagId(e.tagId),t.setName(e.tagName),o.push(i?t.getArrayData():t)})),r.setTags(o),r.setVersion(t),r.getArrayData()},e.prototype.encodeMessageReader=function(e,t){var n=this._codec.getModule(Gn);return n.setMsgId(e),t&&n.setChannelId(t),n.getArrayData()},e.prototype.encodeRemoveTag=function(e,t){var n=this,i="comet"===this._connectType,r=this._codec.getModule(Zn),o=[];return e.forEach((function(e){var t=n._codec.getModule(Qn);t.setTagId(e),o.push(i?t.getArrayData():t)})),r.setTags(o),r.setVersion(t),r.getArrayData()},e.prototype.encodeDisConversationTag=function(e){var t=this._codec.getModule(ei);return t.setTagId(e),t.getArrayData()},e.prototype.encodeUpdateConversationTag=function(e,t){var n=this,i="comet"===this._connectType,r=this._codec.getModule(Wn),o=[];return t.forEach((function(t){var r=n._codec.getModule(Hn),s=n._codec.getModule(Kn),a=[];e.forEach((function(e){var t=n._codec.getModule(Qn);t.setTagId(e.tagId),ae(e.isTop)||t.setIsTop(e.isTop),a.push(i?t.getArrayData():t)})),s.setSessionStateType(fr),s.setValue(JSON.stringify(a)),s.setTags(a),r.setType(t.conversationType),r.setChannelId(t.targetId),r.setTime(Date.now()),r.setStateItem([i?s.getArrayData():s]),o.push(i?r.getArrayData():r)})),r.setState(o),r.setVersion(wt.getTime()),r.getArrayData()},e.prototype.encodeReportSDKInfo=function(e){var t=this._codec.getModule(ti);return t.setSdkInfo(e),t.getArrayData()},e.prototype.encodeUltraGroup=function(e,t){var n=this._codec.getModule(ii);return n.setSyncTime(e),n.setIsEraseMsgContent(t),n.getArrayData()},e.prototype.encodeJoinRTCRoom=function(e,t,n,i,r){var o=this,s="comet"===this._connectType,a=this._codec.getModule(on);if(e=e||0,a.setRoomType(e),ae(t)||a.setBroadcastType(t),ae(n)||a.setJoinType(n),i){var c=[],l=this._codec.getModule(yn);for(var u in i)l.setKey(u),l.setValue(i[u]),s?c.push(l.getArrayData()):c.push(l);a.setInnerDatas(c)}if(r){var d=[];Object.keys(r).forEach((function(e){var t=o._codec.getModule(yn);t.setKey(e),t.setValue(r[e]),s?d.push(t.getArrayData()):d.push(t)})),a.setOuterDatas(d)}return a.getArrayData()},e.prototype.encodeQuitRTCRoom=function(){return this._codec.getModule(an).getArrayData()},e.prototype.encodeSetRTCData=function(e,t,n,i,r){var o=this._codec.getModule(cn);if(o.setInterior(n),o.setTarget(i),o.setKey(e),o.setValue(t),r){r.name&&o.setObjectName(r.name);var s=r.content;s&&(oe(s)&&(s=JSON.stringify(s)),o.setContent(s))}return o.getArrayData()},e.prototype.encodeUserSetRTCData=function(e,t,n,i){var r=this,o="comet"===this._connectType,s=this._codec.getModule(ln);s.setObjectName(n);var a=this._codec.getModule(yn);a.setKey(e.name),a.setValue(e.content),o?s.setContent(a.getArrayData()):s.setContent(a);var c=[];return["uris","mcu_uris"].forEach((function(e){var n=r._codec.getModule(yn);n.setKey(e);var s="uris"===e?t:i;n.setValue(s),o?c.push(n.getArrayData()):c.push(n)})),s.setValueInfo(c),s.getArrayData()},e.prototype.encodeUserSetRTCCDNUris=function(e,t){this._connectType;var n=this._codec.getModule(ln);n.setObjectName(e);var i=this._codec.getModule(yn);return i.setKey("cdn_uris"),i.setValue(t),n.setValueInfo(i),n.getArrayData()},e.prototype.encodeGetRTCData=function(e,t,n){var i=this._codec.getModule(un);return i.setInterior(t),i.setTarget(n),i.setKey(e),i.getArrayData()},e.prototype.encodeRemoveRTCData=function(e,t,n,i){var r=this._codec.getModule(un);r.setInterior(t),r.setTarget(n),r.setKey(e);var o=(i=i||{}).name,s=i.content;return!ae(o)&&r.setObjectName(o),ae(s)||(oe(s)&&(s=JSON.stringify(s)),r.setContent(s)),r.getArrayData()},e.prototype.encodeSetRTCOutData=function(e,t,n){var i=this._codec.getModule(dn);i.setTarget(t),te(e)||(e=[e]),gt(e,(function(t,n){t.key=t.key?t.key.toString():t.key,t.value=t.value?t.value.toString():t.value,e[n]=t})),i.setValueInfo(e);var r=(n=n||{}).name,o=n.content;return!ae(r)&&i.setObjectName(r),ae(o)||(oe(o)&&(o=JSON.stringify(o)),i.setContent(o)),i.getArrayData()},e.prototype.ecnodeGetRTCOutData=function(e){var t=this._codec.getModule(gn);return t.setUserId(e),t.getArrayData()},e.prototype.encodeSetRTCState=function(e){var t=this._codec.getModule(hn);return t.setState(e),t.getArrayData()},e.prototype.encodeGetRTCRoomInfo=function(){var e=this._codec.getModule(_n);return e.setOrder(2),e.getArrayData()},e.prototype.encodeSetRTCUserInfo=function(e,t){var n=this._codec.getModule(yn);return n.setKey(e),n.setValue(t),n.getArrayData()},e.prototype.encodeRemoveRTCUserInfo=function(e){var t=this._codec.getModule(Cn);return t.setKey(e),t.getArrayData()},e.prototype.encodeIdentityChangeInfo=function(e,t,n){void 0===n&&(n=!1);var i=this._codec.getModule(on);return i.setRoomType(Fe.LIVE),t&&i.setBroadcastType(t),i.setIdentityChangeType(e),i.setNeedSysChatroom(n),i.getArrayData()},e.prototype.encodePullRTCRoomKV=function(e,t){var n=this._codec.getModule(_i);return n.setTimestamp(t),n.setRoomId(e),n.getArrayData()},e.prototype.encodeQueryUserJoinedInfo=function(e){var t=this._codec.getModule(yi);return t.setUserId(e),t.getArrayData()},e.prototype.encodeRequestRoomPK=function(e){var t=e.invitedRoomId,n=e.invitedUserId,i=e.inviteSessionId,r=e.inviteTimeout,o=e.inviteInfo,s=this._codec.getModule(bi);return s.setInvitedRoomId(t),s.setInvitedUserId(n),s.setInviteSessionId(i),s.setTimeoutTime(r),s.setInviteInfo(o),s.getArrayData()},e.prototype.encodeCancelRoomPK=function(e){var t=e.invitedRoomId,n=e.invitedUserId,i=e.inviteSessionId,r=e.inviteInfo,o=this._codec.getModule(Ti);return o.setInvitedRoomId(t),o.setInvitedUserId(n),o.setInviteSessionId(i),o.setInviteInfo(r),o.getArrayData()},e.prototype.encodeResponseRoomPK=function(e){var t=e.inviteUserId,n=e.inviteRoomId,i=e.inviteSessionId,r=e.content,o=e.key,s=e.value,a=e.agree?1:0,c=this._codec.getModule(Si);return c.setInviteUserId(t),c.setInviteRoomId(n),c.setInviteSessionId(i),c.setContent(r),c.setKey(o),c.setValue(s),c.setAnswerCode(a),c.getArrayData()},e.prototype.encodeEndRoomPK=function(e){var t=e.endRoomId,n=e.sessionId,i=e.content,r=e.keys,o=this._codec.getModule(Ri);return o.setInviteRoomId(t),o.setInviteSessionId(n),o.setInviteContent(i),o.setInviteRoomKeys(r),o.getArrayData()},e.prototype.encodebindRTCRoomForChatroom=function(e){var t=this._codec.getModule(Ii);return t.setRtcRoomId(e.rtcRoomId),t.getArrayData()},e}(),mr=function(e,t){this._watcher=t,this.codec=new gr(e)},_r=function(e,t){return e&&t?t+"_"+e:e||Date.now()},vr=function(){function e(e){this.header=e,this._name=null,this.lengthSize=0,this.messageId=0,this.timestamp=0,this.syncMsg=!1,this.identifier=""}return e.prototype.getIdentifier=function(){var e=this.messageId,t=this.identifier;return _r(e,t)},e.prototype.read=function(e,t,n){this.readMessage(e,t,n)},e.prototype.readMessage=function(e,t,n){return{stream:e,length:t}},e}(),yr=function(){function e(e){this.lengthSize=0,this.messageId=0,this.topic="",this.targetId="",this.identifier="",this._header=new Mt(e,!1,Ze.AT_MOST_ONCE,!1)}return e.prototype.getIdentifier=function(){var e=this.messageId,t=this.identifier;return _r(e,t)},e.prototype.write=function(e){var t=this.getHeaderFlag();e.write(t),this.writeMessage(e)},e.prototype.setHeaderQos=function(e){this._header.qos=e},e.prototype.getHeaderFlag=function(){return this._header.encode()},e.prototype.getLengthSize=function(){return this.lengthSize},e.prototype.getBufferData=function(){var e=new At;this.write(e);var t=e.getBytesArray();return new Int8Array(t)},e.prototype.getCometData=function(){var e=this.data||{};return JSON.stringify(e)},e}(),Cr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._name=tt.CONN_ACK,t.status=null,t.userId=null,t.timestamp=0,t}return k(t,e),t.prototype.readMessage=function(e,n,i){if(e.readByte(),this.status=+e.readByte(),n<=t.MESSAGE_LENGTH)return{stream:e,length:n};if(i===it.V4){var r=e.readByte();1&r&&(this.userId=e.readUTF()),2&r&&e.readUTF(),4&r&&(this.timestamp=e.readLong()),8&r&&(this.messageId=e.read2Byte())}else{this.userId=e.readUTF();var o=e.readUTF();ve.debug("server sessionId -> "+o),this.timestamp=e.readLong()}return{stream:e,length:n}},t.MESSAGE_LENGTH=2,t}(vr),Er=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._name=tt.DISCONNECT,t.status=0,t}return k(t,e),t.prototype.readMessage=function(e,t){return e.readByte(),this.status=+e.readByte(),{stream:e,length:t}},t.MESSAGE_LENGTH=2,t}(vr),br=function(e){function t(){var t=e.call(this,et.PING_REQ)||this;return t._name=tt.PING_REQ,t}return k(t,e),t.prototype.writeMessage=function(e){},t}(yr),Tr=function(e){function t(t){var n=e.call(this,t)||this;return n._name=tt.PING_RESP,n}return k(t,e),t}(vr),Sr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.messageId=0,t}return k(t,e),t.prototype.readMessage=function(e,t){var n=256*e.readByte()+e.readByte();return this.messageId=parseInt(n.toString(),10),{stream:e,length:t}},t}(vr),Rr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.messageId=0,t}return k(t,e),t.prototype.writeMessage=function(e){var t=this.messageId,n=255&t,i=(65280&t)>>8;e.write(i),e.write(n)},t}(yr),Ir=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._name=tt.PUBLISH,t.topic="",t.targetId="",t.syncMsg=!1,t.identifier=nt.PUB,t}return k(t,e),t.prototype.readMessage=function(t,n){return this.date=t.readInt(),this.topic=t.readUTF(),this.targetId=t.readUTF(),e.prototype.readMessage.call(this,t,n),this.data=t.readAll(),{stream:t,length:n}},t}(Sr),wr=function(e){function t(t,n,i){var r=e.call(this,et.PUBLISH)||this;return r._name=tt.PUBLISH,r.syncMsg=!1,r.identifier=nt.PUB,r.topic=t,r.data=Q(n)?xt.writeUTF(n):n,r.targetId=i,r}return k(t,e),t.prototype.writeMessage=function(t){t.writeUTF(this.topic),t.writeUTF(this.targetId),e.prototype.writeMessage.call(this,t),t.write(this.data)},t}(Rr),Or=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._name=tt.PUB_ACK,t.status=0,t.date=0,t.millisecond=0,t.messageUId="",t.timestamp=0,t.identifier=nt.PUB,t.topic="",t.targetId="",t}return k(t,e),t.prototype.readMessage=function(t,n){return e.prototype.readMessage.call(this,t,n),this.date=t.readInt(),this.status=256*t.readByte()+t.readByte(),this.millisecond=256*t.readByte()+t.readByte(),this.timestamp=1e3*this.date+this.millisecond,this.messageUId=t.readUTF(),{stream:t,length:n}},t}(Sr),kr=function(e){function t(t){var n=e.call(this,et.PUB_ACK)||this;return n._name=tt.PUB_ACK,n.status=0,n.date=0,n.millisecond=0,n.messageUId="",n.timestamp=0,n.messageId=t,n}return k(t,e),t.prototype.writeMessage=function(t){e.prototype.writeMessage.call(this,t)},t}(Rr),Mr=function(e){function t(t,n,i){var r=e.call(this,et.QUERY)||this;return r.name=tt.QUERY,r.identifier=nt.QUERY,r.topic=t,r.data=Q(n)?xt.writeUTF(n):n,r.targetId=i,r}return k(t,e),t.prototype.writeMessage=function(t){t.writeUTF(this.topic),t.writeUTF(this.targetId),e.prototype.writeMessage.call(this,t),t.write(this.data)},t}(Rr),xr=function(e){function t(t){var n=e.call(this,et.QUERY_CONFIRM)||this;return n._name=tt.QUERY_CON,n.messageId=t,n}return k(t,e),t}(Rr),Pr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._name=tt.QUERY_ACK,t.status=0,t.identifier=nt.QUERY,t.topic="",t.targetId="",t}return k(t,e),t.prototype.readMessage=function(t,n){return e.prototype.readMessage.call(this,t,n),this.date=t.readInt(),this.status=256*t.readByte()+t.readByte(),this.data=t.readAll(),{stream:t,length:n}},t}(Sr),Ar=function(e){var t,n=e.type;switch(n){case et.CONN_ACK:t=new Cr(e);break;case et.PUBLISH:(t=new Ir(e)).syncMsg=e.syncMsg;break;case et.PUB_ACK:t=new Or(e);break;case et.QUERY_ACK:t=new Pr(e);break;case et.SUB_ACK:case et.UNSUB_ACK:case et.PING_RESP:t=new Tr(e);break;case et.DISCONNECT:t=new Er(e);break;default:t=new vr(e),ve.error("No support for deserializing "+n+" messages")}return t};!function(e){e[e.ppMsgP=1]="ppMsgP",e[e.ppMsgN=2]="ppMsgN",e[e.ppMsgS=3]="ppMsgS",e[e.pgMsgP=4]="pgMsgP",e[e.chatMsg=5]="chatMsg",e[e.pcMsgP=6]="pcMsgP",e[e.qryPMsg=7]="qryPMsg",e[e.qryGMsg=8]="qryGMsg",e[e.qryCHMsg=9]="qryCHMsg",e[e.qryCMsg=10]="qryCMsg",e[e.qrySMsg=11]="qrySMsg",e[e.recallMsg=12]="recallMsg",e[e.prMsgS=13]="prMsgS",e[e.rrMsg=14]="rrMsg",e[e.rrList=15]="rrList",e[e.s_ntf=16]="s_ntf",e[e.s_msg=17]="s_msg",e[e.s_stat=18]="s_stat",e[e.s_cmd=19]="s_cmd",e[e.s_us=20]="s_us",e[e.pullUS=21]="pullUS",e[e.pgMsgS=22]="pgMsgS",e[e.chatMsgS=23]="chatMsgS",e[e.qrySessionsAtt=24]="qrySessionsAtt",e[e.pullMsg=25]="pullMsg",e[e.qrySessions=26]="qrySessions",e[e.delSessions=27]="delSessions",e[e.delMsg=28]="delMsg",e[e.updRRTime=29]="updRRTime",e[e.chrmPull=30]="chrmPull",e[e.joinChrm=31]="joinChrm",e[e.joinChrmR=32]="joinChrmR",e[e.exitChrm=33]="exitChrm",e[e.queryChrmI=34]="queryChrmI",e[e.setKV=35]="setKV",e[e.delKV=36]="delKV",e[e.pullKV=37]="pullKV",e[e.qryRelation=38]="qryRelation",e[e.delRelation=39]="delRelation",e[e.pullSeAtts=40]="pullSeAtts",e[e.setSeAtt=41]="setSeAtt",e[e.qnTkn=42]="qnTkn",e[e.qnUrl=43]="qnUrl",e[e.aliUrl=44]="aliUrl",e[e.s3Url=45]="s3Url",e[e.stcUrl=46]="stcUrl",e[e.cleanPMsg=47]="cleanPMsg",e[e.cleanGMsg=48]="cleanGMsg",e[e.cleanCMsg=49]="cleanCMsg",e[e.cleanSMsg=50]="cleanSMsg",e[e.rtcRJoin_data=51]="rtcRJoin_data",e[e.rtcRExit=52]="rtcRExit",e[e.rtcPing=53]="rtcPing",e[e.rtcSetData=54]="rtcSetData",e[e.rtc_ntf=55]="rtc_ntf",e[e.viewerJoinR=56]="viewerJoinR",e[e.viewerExitR=57]="viewerExitR",e[e.rtcPullKv=58]="rtcPullKv",e[e.rtcIdentityChange=59]="rtcIdentityChange",e[e.userSetData=60]="userSetData",e[e.rtcQryData=61]="rtcQryData",e[e.rtcDelData=62]="rtcDelData",e[e.rtcSetOutData=63]="rtcSetOutData",e[e.rtcQryUserOutData=64]="rtcQryUserOutData",e[e.rtcToken=65]="rtcToken",e[e.rtcUserState=66]="rtcUserState",e[e.rtcRInfo=67]="rtcRInfo",e[e.rtcUData=68]="rtcUData",e[e.rtcUPut=69]="rtcUPut",e[e.rtcUDel=70]="rtcUDel",e[e.rtcUList=71]="rtcUList",e[e.rtcQueryJoined=72]="rtcQueryJoined",e[e.rtcInvite=73]="rtcInvite",e[e.rtcCancelInvite=74]="rtcCancelInvite",e[e.rtcInviteAnswer=75]="rtcInviteAnswer",e[e.rtcEndInvite=76]="rtcEndInvite",e[e.addSeTag=77]="addSeTag",e[e.delSeTag=78]="delSeTag",e[e.addTag=79]="addTag",e[e.delTag=80]="delTag",e[e.disTag=81]="disTag",e[e.reportsdk=82]="reportsdk",e[e.pullUgSes=83]="pullUgSes",e[e.pullUgMsg=84]="pullUgMsg",e[e.ugMsg=85]="ugMsg",e[e.qryUgMsg=86]="qryUgMsg",e[e.updUgRTime=87]="updUgRTime",e[e.upMsgEx=88]="upMsgEx",e[e.modifyMsg=89]="modifyMsg",e[e.qryMsgChange=90]="qryMsgChange",e[e.qryMsg=91]="qryMsg",e[e.operate=92]="operate",e[e.s_opNtf=93]="s_opNtf",e[e.setRtcRoomId=94]="setRtcRoomId"}(Vi||(Vi={}));var Dr,Nr=Vi,Lr=function(e,t,n,i){return x(void 0,void 0,void 0,(function(){var r;return P(this,(function(o){return r=0,e.forEach((function(o){return x(void 0,void 0,void 0,(function(){var s,a,c;return P(this,(function(l){switch(l.label){case 0:s=t+"://"+o+"/ping?r="+(d=9999,(u=1e3)+Math.floor(Math.random()*(d-u))),ve.debug("start ping",s),r++,l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.httpReq({url:s,timeout:5e3})];case 2:return a=l.sent(),[3,4];case 3:return c=l.sent(),ve.error("ping error: ",c),i({finished:r===e.length,code:-2,host:o}),[2];case 4:return ve.debug("end ping",r,s,null==a?void 0:a.status),i({finished:r===e.length,code:a.status,host:o}),[2]}var u,d}))}))})),[2]}))}))},Ur=function(e,t,n,i,r,o,s,a){return e+"://"+t+"/websocket?appId="+n+"&token="+encodeURIComponent(i)+"&sdkVer="+o+"&pid="+s+"&apiVer="+(r.isFromUniapp?"uniapp":"normal")+(r.connectPlatform?"&platform="+r.connectPlatform:"")+(a?"&protocolVer="+a:"")},Br=function(e){return[Nr.ppMsgS,Nr.pgMsgS,Nr.chatMsgS].map((function(e){return Nr[e]})).indexOf(e)>=0};!function(e){e[e.REDIRECT=0]="REDIRECT",e[e.OTHER_DEVICE_LOGIN=1]="OTHER_DEVICE_LOGIN",e[e.BLOCK=2]="BLOCK",e[e.REMOTE_CLOSE=3]="REMOTE_CLOSE",e[e.LOGOUT=4]="LOGOUT",e[e.BLOCK_NEW=5]="BLOCK_NEW",e[e.REDIRECT_NEW=6]="REDIRECT_NEW"}(Dr||(Dr={}));var Vr,jr=function(e,t){ve.info("websocket send -> messageId: "+e.messageId+" topic: "+e.topic);var n=e.getBufferData();t.send(n.buffer)},Fr=function(e){function t(t,n){var i=e.call(this,"websocket",n)||this;return i._runtime=t,i._socket=null,i._messageIds={},i._syncMessageIds={},i._failedCount=0,i.ALLOW_FAILED_TIMES=2,i._timer=null,i._idCount=0,i._generateMessageId=function(){return i._idCount>=65535&&(i._idCount=0),++i._idCount},i}return k(t,e),t.prototype.connect=function(e,t,n,i,r,o){return x(this,void 0,void 0,(function(){var s=this;return P(this,(function(a){return[2,new Promise((function(a){var c=[],l=0,u=!1,d=!1,h=function(){return x(s,void 0,void 0,(function(){var n;return P(this,(function(s){switch(s.label){case 0:return 0===c.length||u?[2]:(u=!0,[4,this._connect(e,t,c.shift(),i,r,o)]);case 1:if((n=s.sent())===Te.SUCCESS)this._checkAlive(),a(n);else if(n===Ie.REDIRECT)a(n);else{if(d&&0===c.length)return a(Tt(n)),[2];u=!1,h()}return[2]}}))}))};r=F(r),s._watcher.status(Re.CONNECTING),Lr(n,i,s._runtime,(function(e){var t=e.code,n=e.finished,i=e.host;d=n,200===t&&(c.push(i),l++,h()),n&&0===l&&(ve.error("No valid websocket server hosts!"),a(Te.RC_SOCKET_NOT_CREATED))}))}))]}))}))},t.prototype._connect=function(e,t,n,i,r,o){return x(this,void 0,void 0,(function(){var s,a,c,l,u,d=this;return P(this,(function(h){switch(h.label){case 0:return s=i.replace("http","ws"),a=Ur(s,n,e,t,this._runtime,r,"",o),ve.debug("conenct start -> "+a),this.sendConnectTime=Date.now(),c=this._runtime.createWebSocket(a),l=function(e){d._timer&&(clearTimeout(d._timer),d._timer=null),d._socket===c&&(d._socket=null,d._watcher.status(e))},[4,new Promise((function(e){c.onMessage((function(t){if("[object ArrayBuffer]"===Object.prototype.toString.call(t)){var n=function(e,t){var n=new Uint8Array(e),i=new Pt(n),r=i.readByte(),o=new Mt(r),s=Ar(o);return s.read(i,n.length-1,t),s}(t,o);if(n instanceof Tr&&d._pingResolve)return d._pingResolve(Te.SUCCESS),void(d._pingResolve=void 0);if(n instanceof Cr)return ve.debug("recv connect ack -> "+n.status),n.status!==Ie.ACCEPTED?(ve.warn("connect failed: "+n.status),void e(n.status)):(ve.info("connect success -> "+a),d.connectedTime=n.timestamp,d.userId=n.userId||"",d._idCount=n.messageId,void e(Te.SUCCESS));if(n instanceof Er){var i=n.status;switch(ve.warn("recv disconnect signal -> status: "+i),i){case Dr.BLOCK_NEW:case Dr.BLOCK:d._watcher.status(Re.BLOCKED);break;case Dr.OTHER_DEVICE_LOGIN:d._watcher.status(Re.KICKED_OFFLINE_BY_OTHER_CLIENT);break;case Dr.REDIRECT_NEW:case Dr.REDIRECT:d._watcher.status(Re.REDIRECT);break;default:d._watcher.status(Re.DISCONNECT_BY_SERVER)}}else d._onReceiveSignal(n)}else ve.error("Socket received invalid data:",t)})),c.onClose((function(t,n){for(var i in ve.warn("websocket closed! code:",t,"reason:",n),l(Re.CONNECTION_CLOSED),d._messageIds){var r=d._messageIds[i];delete d._messageIds[i],r(Te.RC_NET_CHANNEL_INVALID)}e(t)})),c.onError((function(t){var n;for(var i in ve.error("websocket error!",null===(n=t)||void 0===n?void 0:n.stack),l(Re.WEBSOCKET_ERROR),d._messageIds){var r=d._messageIds[i];delete d._messageIds[i],r(Te.RC_NET_CHANNEL_INVALID)}e(Te.NETWORK_ERROR)})),c.onOpen((function(){return ve.debug("websocket open =>",a)})),setTimeout((function(){e(Te.TIMEOUT)}),5e3)}))];case 1:return(u=h.sent())===Te.SUCCESS?this._socket=c:(ve.warn("connect result -> code: "+u+", url: "+a),c.close()),[2,u]}}))}))},t.prototype._checkAlive=function(){var e;return x(this,void 0,void 0,(function(){var t,n=this;return P(this,(function(i){switch(i.label){case 0:return this._socket?(ve.debug("send ping ->"),this.sendOnly(new br),[4,new Promise((function(e){n._pingResolve=e,n._timer&&clearTimeout(n._timer),n._timer=setTimeout((function(){n._pingResolve=void 0,e(Te.TIMEOUT)}),15e3)}))]):[2];case 1:return(t=i.sent())!==Te.SUCCESS?(this._failedCount+=1,ve.warn("ping failed count: "+this._failedCount+", code: "+t),this._failedCount>=this.ALLOW_FAILED_TIMES?(this._failedCount=0,ve.warn("ping timeout, close current websocket to reconnect!"),null===(e=this._socket)||void 0===e||e.close(),this._watcher.status(Re.NETWORK_UNAVAILABLE)):this._checkAlive(),[2]):(ve.debug("recv pong <-"),this._failedCount=0,setTimeout((function(){return n._checkAlive()}),15e3),[2])}}))}))},t.prototype._onReceiveSignal=function(e){return x(this,void 0,void 0,(function(){var t,n,i,r,o,s,a=this;return P(this,(function(c){switch(c.label){case 0:return t=e.messageId,e.header&&e.header.qos!==Ze.AT_MOST_ONCE&&(e instanceof Ir&&!e.syncMsg&&(ve.info("send pubAck -> "+t+" "+e.topic),this.sendOnly(new kr(t))),e instanceof Pr&&(ve.info("send queryCon -> "+t+" "+e.topic),this.sendOnly(new xr(t)))),t>0&&(e instanceof Or||e instanceof Pr)&&(ve.info("recv ack -> messageId: "+t+" "+e.topic),(n=this._messageIds[t])&&(n(e),delete this._messageIds[t]),(i=this._syncMessageIds[t])&&(delete this._syncMessageIds[t],i(e))),e instanceof Ir?(r=e.syncMsg,o=e.topic,ve.info("recv PublishReader -> messageId: "+t+" "+o),o===Nr[Nr.userSetData]?[2]:!r||Br(o)?(this._watcher.signal(e),[2]):[4,new Promise((function(e){a._syncMessageIds[t]=e}))]):[3,2];case 1:s=c.sent(),delete this._syncMessageIds[t],this._watcher.signal(e,s),c.label=2;case 2:return[2]}}))}))},t.prototype.sendOnly=function(e){this._socket&&((e instanceof wr||e instanceof Mr)&&(e.messageId=this._generateMessageId()),jr(e,this._socket))},t.prototype.send=function(e,t,n,i){return void 0===i&&(i=3e4),x(this,void 0,void 0,(function(){var r,o,s,a=this;return P(this,(function(c){switch(c.label){case 0:return this._socket?(r=this._generateMessageId(),e.messageId=r,jr(e,this._socket),[4,new Promise((function(e){a._messageIds[r]=e,setTimeout((function(){a._messageIds[r]&&delete a._messageIds[r],e()}),i)}))]):[3,2];case 1:return(o=c.sent())?o instanceof Pr||o instanceof Or?(s=t&&o.data?this.codec.decodeByPBName(o.data,t,n):o,0!==o.status?(ve.warn("send failed -> message: "+r+", respPBName: "+t+", status: "+o.status),[2,{code:o.status,data:t&&o.data?s:null}]):[2,{code:Te.SUCCESS,data:s}]):[2,{code:o}]:(ve.warn("send timeout -> message: "+r+", respPBName: "+t+", timeout: "+i),[2,{code:Te.TIMEOUT}]);case 2:return[2,{code:Te.RC_NET_CHANNEL_INVALID}]}}))}))},t.prototype.close=function(){this._socket&&(this._socket.close(),this._socket=null,this._watcher.status(Re.DISCONNECTED))},t}(mr);!function(e){e.GET="GET",e.POST="POST"}(Vr||(Vr={}));var $r=function(e){function t(t,n){var i=e.call(this,"comet",n)||this;return i._runtime=t,i._messageIds={},i._syncMessageIds={},i._idCount=0,i._generateMessageId=function(){return++i._idCount},i._pid=encodeURIComponent((new Date).getTime()+Math.random()+""),i}return k(t,e),t.prototype.handleCometRes=function(e){var t=this;if(200!==e.status&&202!==e.status)return!1;var n=Q(e.data)?JSON.parse(e.data):e.data;return n?!te(n)||(gt(n,(function(e){return x(t,void 0,void 0,(function(){var t,n,i,r,o,s,a,c,l,u,d,h=this;return P(this,(function(p){switch(p.label){case 0:if((t=e.sessionid)&&(this._sessionid=t),n=function(e){var t=e.headerCode,n=new Mt(t),i=Ar(n);for(var r in e)i[r]=e[r];return i}(e),i=n.messageId,r=n._header,o=n.status,n.identifier,s=r&&r.qos!==Ze.AT_MOST_ONCE,i&&n.getIdentifier&&((a=this._messageIds[i])&&a(n),this._syncMessageIds[i]&&this._syncMessageIds[i](n)),s&&(n instanceof Ir&&!n.syncMsg&&(c=new kr(i),this.sendOnly(c)),n instanceof Pr&&(c=new xr(i),this.sendOnly(c))),n instanceof Er){switch(o){case Dr.OTHER_DEVICE_LOGIN:this._watcher.status(Re.KICKED_OFFLINE_BY_OTHER_CLIENT);break;case Dr.BLOCK:case Dr.BLOCK_NEW:this._watcher.status(Re.BLOCKED);break;case Dr.REDIRECT_NEW:case Dr.REDIRECT:this._watcher.status(Re.REDIRECT);break;default:this._watcher.status(Re.DISCONNECT_BY_SERVER)}return[2]}return n instanceof Ir?(l=n.syncMsg,u=n.topic,!l||Br(u)?(this._watcher.signal(n),[2,!1]):[4,new Promise((function(e){h._syncMessageIds[i]=e}))]):[3,2];case 1:d=p.sent(),delete this._syncMessageIds[i],this._watcher.signal(n,d),p.label=2;case 2:return[2]}}))}))})),!0):(ve.error("received data is not a validJson",n),!1)},t.prototype._startPullSignal=function(e){return x(this,void 0,void 0,(function(){var t,n,i,r;return P(this,(function(o){switch(o.label){case 0:return t=(new Date).getTime(),n=e+"://"+this._domain+"/pullmsg.js?sessionid="+this._sessionid+"&timestrap="+t+"&pid="+this._pid,[4,this._runtime.httpReq({url:n,body:{pid:this._pid},timeout:45e3})];case 1:return i=o.sent(),r=this.handleCometRes(i),this._isDisconnected||(r?this._startPullSignal(e):(this._isDisconnected=!0,this._watcher.status(Re.NETWORK_UNAVAILABLE))),[2]}}))}))},t.prototype.connect=function(e,t,n,i,r,o){return x(this,void 0,void 0,(function(){var o,s,a,c,l=this;return P(this,(function(u){return r=F(r),this._protocol=i,this._isDisconnected=!1,this._watcher.status(Re.CONNECTING),o=[],s=0,a=!1,c=!1,[2,new Promise((function(u){var d=function(){return x(l,void 0,void 0,(function(){var n;return P(this,(function(s){switch(s.label){case 0:return 0===o.length||a?[2]:(a=!0,[4,this._connect(e,t,o.shift(),i,r)]);case 1:if((n=s.sent())===Te.SUCCESS)this._startPullSignal(i),u(n);else if(n===Ie.REDIRECT)u(n);else{if(c&&0===o.length)return u(Tt(n)),[2];a=!1,d()}return[2]}}))}))};l._watcher.status(Re.CONNECTING),Lr(n,i,l._runtime,(function(e){var t=e.code,n=e.finished,i=e.host;c=n,200===t&&(o.push(i),s++,d()),n&&0===s&&(ve.error("No valid websocket server hosts!"),u(Te.RC_SOCKET_NOT_CREATED))}))}))]}))}))},t.prototype._connect=function(e,t,n,i,r){return x(this,void 0,void 0,(function(){var o,s,a,c;return P(this,(function(l){switch(l.label){case 0:return o=function(e){return 200!==e.status&&202!==e.status?(ve.error("handle comet res -> res: "+JSON.stringify(e||{})),!1):!!e.data&&(function(e){if(oe(e))return!0;var t=!1;try{var n=JSON.parse(e);t=JSON.stringify(n)===e}catch(e){t=!1}return t}(e.data)?oe(e.data)?e.data:JSON.parse(e.data):(ve.error("received data is not a validJson",e.data),!1))},s=Ur(i,n,e,t,this._runtime,r,this._pid),this.sendConnectTime=Date.now(),ve.debug("conenct start -> "+s),[4,this._runtime.httpReq({url:s,body:{pid:this._pid},timeout:5e3})];case 1:return a=l.sent(),c=o(a),this._domain=n,c&&0===c.status?(this._sessionid=c.sessionid,this.userId=c.userId,this.connectedTime=c.timestamp):ve.warn("connect result -> code: "+(null==c?void 0:c.status)+", url: "+s),[2,null==c?void 0:c.status]}}))}))},t.prototype.sendCometData=function(e,t){return x(this,void 0,void 0,(function(){var t,n,i,r,o,s,a,c,l,u;return P(this,(function(d){switch(d.label){case 0:return n=(t=this)._domain,i=t._sessionid,r=t._pid,o=e.messageId,s=e.topic,a=e.targetId,e.identifier,c=e.getHeaderFlag(),l=s?this._protocol+"://"+n+"/websocket?messageid="+o+"&header="+c+"&sessionid="+i+"&topic="+s+"&targetid="+a+"&pid="+r:this._protocol+"://"+n+"/websocket?messageid="+o+"&header="+c+"&sessionid="+i+"&pid="+r,[4,this._runtime.httpReq({url:l,method:Vr.POST,body:e.getCometData()})];case 1:return u=d.sent(),this.handleCometRes(u),[2]}}))}))},t.prototype.sendOnly=function(e){this.sendCometData(e)},t.prototype.send=function(e,t,n,i){return void 0===i&&(i=3e4),x(this,void 0,void 0,(function(){var r,o,s,a=this;return P(this,(function(c){switch(c.label){case 0:return r=this._generateMessageId(),e.messageId=r,this.sendCometData(e),[4,new Promise((function(e){a._messageIds[r]=e,setTimeout((function(){delete a._messageIds[r],e()}),i)}))];case 1:return(o=c.sent())?(s=t&&o.data?this.codec.decodeByPBName(o.data,t,n):o,0!==o.status?[2,{code:o.status,data:t&&o.data?s:null}]:[2,{code:Te.SUCCESS,data:s}]):[2,{code:Te.TIMEOUT}]}}))}))},t.prototype.close=function(){this._isDisconnected=!0,this._watcher.status(Re.DISCONNECTED)},t}(mr),Hr=function(e,t,n){this.runtime=e,this._watcher=t,this._options=n,this.currentUserId="",this._appkey=this._options.appkey,this._apiVer=this._options.apiVersion,this.navi=this._createNavi()},Kr=function(e){return["navi",e].join("_")},Wr=function(){function e(e,t){this._runtime=e,this._options=t,this._naviInfo=null,this._appkey=this._options.appkey,this._apiVersion=F(this._options.apiVersion)}return e.prototype.getInfo=function(e,t,n,i){return x(this,void 0,void 0,(function(){var r,o;return P(this,(function(s){switch(s.label){case 0:return n&&this._clear(e),(r=function(e,t,n){var i,r,o=Kr(e);try{var s=n.getItem(o);r=s?JSON.parse(s):[]}catch(e){r=[]}var a=Date.now();return r.length>0&&(r=r.filter((function(e){return a-e.timestamp<72e5}))),0===r.length?n.removeItem(o):n.setItem(o,JSON.stringify(r)),(null===(i=r.find((function(e){return e.token===t})))||void 0===i?void 0:i.naviInfo)||null}(this._appkey,e,this._runtime.localStorage))?(this._naviInfo=r,[2,r]):(o=this._options.navigators.slice(),t.length&&t.forEach((function(e){o.indexOf(e)<0&&o.unshift(e)})),[4,this._reqNavi(o,this._appkey,e,i)]);case 1:return(r=s.sent())?(this._naviInfo=r,this.setNaviInfo2Cache(e,r),[2,r]):[2,r]}}))}))},e.prototype.setNaviInfo2Cache=function(e,t){this._naviInfo=t,function(e,t,n,i){var r,o=Kr(e);try{var s=i.getItem(o);r=s?JSON.parse(s):[]}catch(e){r=[]}var a=Date.now();r.length>0&&(r=r.filter((function(e){return a-e.timestamp<72e5&&t!==e.token}))),r.push({timestamp:a,naviInfo:n,token:t}),i.setItem(o,JSON.stringify(r))}(this._appkey,e,t,this._runtime.localStorage)},e.prototype.getInfoFromCache=function(e){return this._naviInfo},e.prototype._clear=function(e){!function(e,t,n){var i,r=Kr(e);try{var o=n.getItem(r);i=o?JSON.parse(o):[]}catch(e){i=[]}var s=Date.now();i.length>0&&(i=i.filter((function(e){return s-e.timestamp<72e5&&t!==e.token}))),0===i.length?n.removeItem(r):n.setItem(r,JSON.stringify(i))}(this._appkey,e,this._runtime.localStorage)},e}(),qr=function(e,t,n){return[e,t,n].join("_")},Gr=function(){function e(e,t){this._runtime=e,this._appkey=t,this._users={}}return e.prototype._getMemData=function(e){return this._users[e]||(this._users[e]={inboxTime:0,outboxTime:0})},e.prototype.setInboxTime=function(e,t){var n=this._getMemData(t);if(!(n.inboxTime>e)){n.inboxTime=e;var i=qr("inbox",this._appkey,t);this._runtime.localStorage.setItem(i,e.toString())}},e.prototype.getInboxTime=function(e){var t=this._getMemData(e);if(0===t.inboxTime){var n=qr("inbox",this._appkey,e);t.inboxTime=parseInt(this._runtime.localStorage.getItem(n))||0}return t.inboxTime},e.prototype.setOutboxTime=function(e,t){var n=this._getMemData(t);if(!(n.outboxTime>=e)){n.outboxTime=e;var i=qr("outbox",this._appkey,t);this._runtime.localStorage.setItem(i,e.toString())}},e.prototype.getOutboxTime=function(e){var t=this._getMemData(e);if(0===t.outboxTime){var n=qr("outbox",this._appkey,e);t.outboxTime=parseInt(this._runtime.localStorage.getItem(n))||0}return t.outboxTime},e}(),zr={_caches:{},set:function(e,t){this._caches[e]=t},get:function(e){return this._caches[e]||0},clear:function(e){this._caches[e]=0}},Yr=function(){function e(e,t){this._kvCaches={},this._chatroomId=e,this._currentUserId=t}return e.prototype._add=function(e){var t=e.key;e.isDeleted=!1,this._kvCaches[t]=e},e.prototype._remove=function(e){var t=e.key,n=this._kvCaches[t];n&&(n.isDeleted=!0,this._kvCaches[t]=n)},e.prototype._setEntry=function(e,t){var n=e.key,i=e.type,r=e.isOverwrite,o=e.userId,s=this._getSetUserId(n),a=i===Le.DELETE,c=s===o,l=!this._isExisted(n),u=a?this._remove:this._add;(t||r||c||l)&&u.call(this,e)},e.prototype.getValue=function(e){var t=this._kvCaches[e]||{};return t.isDeleted?null:t.value},e.prototype.getVersion=function(e){var t=this._kvCaches[e]||{};return t.isDeleted?null:t.version},e.prototype.getAllValue=function(){var e={};for(var t in this._kvCaches)this._kvCaches[t].isDeleted||(e[t]=this._kvCaches[t].value);return e},e.prototype._getSetUserId=function(e){return(this._kvCaches[e]||{}).userId},e.prototype._isExisted=function(e){var t=this._kvCaches[e]||{},n=t.value,i=t.isDeleted;return n&&!i},e.prototype.setEntries=function(e){var t=this,n=e.kvEntries,i=e.isFullUpdate;n=n||[],(i=i||!1)&&this.clear(),n.forEach((function(e){t._setEntry(e,i)})),ve.debug("end setEntries")},e.prototype.clear=function(){this._kvCaches={}},e}(),Jr=function(){function e(e){this._pullQueue=[],this._isPulling=!1,this._storeCaches={},this._engine=e}return e.prototype._startPull=function(){return x(this,void 0,void 0,(function(){var e,t,n,i,r,o,s;return P(this,(function(a){switch(a.label){case 0:return this._isPulling||0===this._pullQueue.length?[2]:(this._isPulling=!0,e=this._pullQueue.splice(0,1)[0],t=e.chrmId,n=e.timestamp,(i=zr.get(t))>n?(this._isPulling=!1,this._startPull(),[2]):[4,this._engine.pullChatroomEntry(t,i)]);case 1:return r=a.sent(),o=r.code,s=r.data,this._isPulling=!1,o===Te.SUCCESS?(zr.set(t,s.syncTime||0),this._startPull()):this._startPull(),[2]}}))}))},e.prototype.reset=function(e){zr.clear(e);var t=this._storeCaches[e];t&&t.clear()},e.prototype.pullEntry=function(e,t){this._pullQueue.push({chrmId:e,timestamp:t}),this._startPull()},e.prototype.setLocal=function(e,t,n){var i=this._storeCaches[e];ue(i)||(i=new Yr(e,n)),i.setEntries(t),this._storeCaches[e]=i},e.prototype.getValue=function(e,t){var n=this._storeCaches[e];return n?n.getValue(t):null},e.prototype.getVersion=function(e,t){var n=this._storeCaches[e];return n?n.getVersion(t):null},e.prototype.getAll=function(e){var t=this._storeCaches[e],n={};return t&&(n=t.getAllValue()),n},e}(),Xr=function(){function e(e,t,n,i){this._runtime=e,this._appkey=t,this._userId=n,this._canJoinMulipleChrm=i,this._sessionKey="",this._joinedChrmsInfo={},this._sessionKey="sync-chrm-"+this._appkey+"-"+this._userId}return e.prototype.set=function(e,t){void 0===t&&(t=10),!this._canJoinMulipleChrm&&(this._joinedChrmsInfo={}),this._joinedChrmsInfo[e]=t,this._runtime.sessionStorage.setItem(this._sessionKey,JSON.stringify(this._joinedChrmsInfo))},e.prototype.get=function(){var e,t;try{t=this._runtime.sessionStorage.getItem(this._sessionKey),e=JSON.parse(t||"{}")}catch(o){ve.error("parse rejoined chrm infos error -> "+t),e={}}return e},e.prototype.remove=function(e){delete this._joinedChrmsInfo[e],ue(this._joinedChrmsInfo)?this._runtime.sessionStorage.setItem(this._sessionKey,JSON.stringify(this._joinedChrmsInfo)):this.clear()},e.prototype.clear=function(){this._joinedChrmsInfo={},this._runtime.sessionStorage.removeItem(this._sessionKey)},e}(),Qr="converStatusChanged",Zr=function(){function e(e,t,n){this._eventEmitter=new ye,this._pullQueue=[],this._isPulling=!1,this._storage=R(e.runtime),this._appkey=t,this._currentUserId=n,this._engine=e,this._storagePullTimeKey="con-s-"+t+"-"+n}return e.prototype._set=function(e){var t=this;if(!ae(e)&&Array.isArray(e)){var n=this._storage.get(this._storagePullTimeKey)||0,i=e.length;e.forEach((function(e,r){var o=e.updatedTime||0;n=o>n?o:n,e.conversationType=e.type,t._eventEmitter.emit(Qr,{statusItem:e,isLastPull:r===i-1})})),this._storage.set(this._storagePullTimeKey,n)}},e.prototype._startPull=function(){return x(this,void 0,void 0,(function(){var e,t,n,i;return P(this,(function(r){switch(r.label){case 0:return this._isPulling||0===this._pullQueue.length?[2]:(this._isPulling=!0,e=this._pullQueue.splice(0,1)[0],[4,this._engine.pullConversationStatus(e)]);case 1:return t=r.sent(),n=t.code,i=t.data,n===Te.SUCCESS?(this._isPulling=!1,this._set(i),this._startPull()):this._startPull(),[2]}}))}))},e.prototype.pull=function(e){var t=this._storage.get(this._storagePullTimeKey)||0;(e>t||0===e)&&(this._pullQueue.push(t),this._startPull())},e.prototype.watch=function(e){this._eventEmitter.on(Qr,(function(t){e(t)}))},e.prototype.unwatch=function(){this._eventEmitter.off(Qr,(function(e){}))},e}(),eo={c:{keyName:"unreadMessageCount",defaultVal:0},hm:{keyName:"hasMentioned",defaultVal:!1},m:{keyName:"mentionedInfo",defaultVal:null},t:{keyName:"lastUnreadTime",defaultVal:0},nc:{keyName:"notificationStatus",defaultVal:2},to:{keyName:"isTop",defaultVal:!1},tg:{keyName:"tags",defaultVal:{}},mc:{keyName:"unreadMentionedCount",defaultVal:0}},to={};for(var no in eo){var io=eo[no].keyName;to[io]=no}var ro,oo=function(){function e(e,t,n){this._appkey=t,this._currentUserId=n;var i="con-"+t+"-"+n;this.storage=new w(e,i),this._localStore=new w(e,"CONVER-"+t+"-"+n)}return e.prototype._getStoreKey=function(e,t,n){return n+"_"+e+"_"+t},e.prototype._getConOptionByKey=function(e){var t=(e=e||"").split("_");if(t.length>=2){var n=t.shift(),i=t.shift(),r=t.join("_");return{conversationType:Number(i),targetId:r,channelId:n}}return{conversationType:Y.PRIVATE,targetId:"",channelId:""}},e.prototype.updateMentionedData=function(e){var t=this,n=e.conversationType,i=e.targetId,r=e.messageType,o=e.isMentioned,s=e.content,a=e.senderUserId,c=e.channelId,l=this._getStoreKey(n,i,c),u=this._localStore.get(l)||{},d=to.mentionedInfo,h=to.hasMentioned,p=u[d]||{},f=p.userIdList||[],g=s.mentionedInfo;if(g){if(o&&n===Y.GROUP&&((g.userIdList||[]).forEach((function(e){e===t._currentUserId&&f.indexOf(a)<0&&f.push(a)})),g.type===Pe.ALL&&f.indexOf(a)<0&&f.push(a)),r===Oe.RECALL&&n===Y.GROUP){var m=f.indexOf(a);m>=0&&f.splice(m,1)}g={userIdList:f,type:(null==g?void 0:g.type)||p.type},0!==f.length?(u[d]=g,u[h]=!0):(delete u[d],delete u[h]),ue(u)?this._localStore.set(l,u):this._localStore.remove(l)}},e.prototype.set=function(e,t,n,i){var r=this._getStoreKey(e,t,i),o=this._localStore.get(r)||{};for(var s in n){var a=to[s],c=n[s];if(!ae(a)&&!ae(c)&&"hasMentioned"!==s&&"MentionedInfo"!==s){if(c===eo[a].defaultVal||"tags"===s&&!ue(c))delete o[a];else if("tags"===s){var l=c;for(var u in l)l[u].isTop||delete l[u].isTop;o[a]=c}else o[a]=c;o.c||(delete o.t,delete o.hm,delete o.m,delete o.mc)}}ue(o)?this._localStore.set(r,o):this._localStore.remove(r)},e.prototype.get=function(e,t,n){void 0===n&&(n="");var i=this._getStoreKey(e,t,n),r=this._localStore.get(i)||{},o={};for(var s in eo){var a=eo[s],c=a.keyName,l=a.defaultVal;o[c]=r[s]||Ct(l)}return o},e.prototype.getValue=function(e){var t=this._localStore.getValues()||{},n=[];for(var i in t){var r=this._getConOptionByKey(i),o={conversationType:r.conversationType,targetId:r.targetId,channelId:r.channelId},s=t[i];for(var a in s){var c=eo[a],l=c.keyName,u=c.defaultVal;o[l]=s[a]||Ct(u)}o=e?e(o):o,n.push(o)}return n},e.prototype.getValueForTag=function(){var e=this._localStore.getValues()||{},t={};for(var n in e){var i=this._getConOptionByKey(n),r=i.conversationType,o=i.targetId,s={},a=e[n];for(var c in a){var l=eo[c],u=l.keyName,d=l.defaultVal;s[u]=a[c]||Ct(d)}for(var h in s.tags){ae(t[h])&&(t[h]=[]);var p=Object.assign({},s,{conversationType:r,targetId:o});delete p.tags,t[h].push(p)}}return t},e.prototype.adaptOldStore=function(){try{var e=this.storage.getValues();if(0===Object.keys(e).length)return;for(var t in e){var n="_"+t;this._localStore.set(n,e[t])}}catch(e){ve.error("adaptOldStore error: "+e.message)}},e}(),so=[Y.PRIVATE,Y.GROUP,Y.SYSTEM,Y.PUBLIC_SERVICE,Y.APP_PUBLIC_SERVICE],ao="conversationChanged",co="conTagStatusChanged",lo=function(){function e(e,t,n,i,r){var o=this;this._updatedConversations={},this._conTagStatusChanged=!1,this._eventEmitter=new ye,this._draftMap={},this._appkey=t,this._loginUserId=n,this._store=new oo(e.runtime,t,n),this._statusManager=new Zr(e,t,n),this._statusManager.watch((function(e){var t=e.statusItem,n=e.isLastPull;o.addStatus(t,n)})),this._eventEmitter.on(ao,(function(e){i(e)})),this._eventEmitter.on(co,(function(){r()}))}return e.prototype._calcUnreadCount=function(e,t){var n=e.content,i=e.messageType,r=e.sentTime,o=e.isCounted,s=e.messageDirection,a=e.senderUserId,c=s===Ee.SEND&&a===this._loginUserId,l=i===Oe.RECALL,u=oe(n),d=!1,h={},p=t.lastUnreadTime||0,f=t.unreadMessageCount||0;return p>r||c||(o&&(t.unreadMessageCount=f+1,t.lastUnreadTime=r,d=!0),l&&u&&p>=n.sentTime&&f&&(t.unreadMessageCount=f-1,d=!0),d&&(h.unreadMessageCount={val:t.unreadMessageCount,time:r})),{hasChanged:d,localConversation:t,updateItems:h}},e.prototype._calcMentionedInfo=function(e,t){var n=e.content,i=(e.messageDirection,e.isMentioned),r=e.sentTime;Ee.SEND;var o=oe(n),s=!1,a={};return i&&o&&n.mentionedInfo&&(t.hasMentioned=!0,s=!0,a.hasMentioned={val:!0,time:r},a.mentionedInfo={val:n.mentionedInfo,time:r}),{hasChanged:s,localConversation:t,updateItems:a}},e.prototype._calcMentionedCount=function(e,t){var n=e.content,i=e.messageDirection,r=!1;if(e.isMentioned&&i===Ee.RECEIVE&&(null==n?void 0:n.mentionedInfo)){var o=n.mentionedInfo,s=o.type,a=o.userIdList;if(s===Pe.ALL||(a||[]).includes(this._loginUserId)){r=!0;var c=t.unreadMentionedCount||0;t.unreadMentionedCount=c+1}}return{hasChanged:r,localConversation:t}},e.prototype._setUpdatedConversation=function(e){if(oe(e)){var t=e.conversationType,n=e.targetId,i=e.channelId,r=t+"_"+n,o=this._store.get(t,n,i)||{};this._updatedConversations[r]=Object.assign(o,e)}},e.prototype._setConTagStatusChanged=function(e,t,n,i){var r=(this._store.get(e,t,i)||{}).tags||{};if(Object.keys(r).length===Object.keys(n).length){for(var o in r)if(!n[o]||r[o].isTop!==n[o].isTop)return void(this._conTagStatusChanged=!0)}else this._conTagStatusChanged=!0},e.prototype.addStatus=function(e,t){var n=e.conversationType,i=e.targetId,r=e.updatedTime,o=e.notificationStatus,s=e.isTop,a=e.tags,c=e.channelId,l={},u={};n!==Y.ULTRA_GROUP&&(ae(o)||(u.notificationStatus={time:r,val:o}),ae(s)||(u.isTop={time:r,val:s}),ae(a)||(u.tags={time:r,val:a},null==a||a.forEach((function(e){l[e.tagId]={isTop:e.isTop}}))),this._setConTagStatusChanged(n,i,l,c),this._store.set(n,i,{notificationStatus:o,isTop:s,tags:l},c),this._setUpdatedConversation({conversationType:n,targetId:i,updatedItems:u,channelId:c}),t&&this._notifyConversationChanged())},e.prototype._notifyConversationChanged=function(){var e=[];for(var t in this._updatedConversations)e.push(this._updatedConversations[t]);0!==e.length&&(this._eventEmitter.emit(ao,e),this._updatedConversations={},this._conTagStatusChanged&&(this._eventEmitter.emit(co),this._conTagStatusChanged=!1))},e.prototype.setConversationCacheByMessage=function(e,t){var n=this,i=e.conversationType,r=e.isPersited,o=e.targetId,s=e.channelId;if(so.indexOf(i)>=0){var a=!1,c=this._store.get(i,o,s),l={};if([this._calcUnreadCount,this._calcMentionedInfo,this._calcMentionedCount].forEach((function(t){var i=t.call(n,e,c),r=i.hasChanged,o=i.localConversation,s=i.updateItems;a=a||r,l=M(M({},l),s),c=Ct(o)})),a&&this._store.set(i,o,c,s),this._store.updateMentionedData(e),r){var u=this._store.get(i,o,s);u.updatedItems=M({latestMessage:{time:e.sentTime,val:e}},l),u.latestMessage=e;var d=Object.assign(u,{conversationType:i,targetId:o,channelId:s});this._setUpdatedConversation(d)}(a||r)&&this._notifyConversationChanged()}},e.prototype.get=function(e,t,n){return void 0===n&&(n=""),this._store.get(e,t,n)},e.prototype.getAllUnreadCount=function(e,t,n){var i=this._store.getValue(),r=0;return i.forEach((function(e){var i=e.unreadMessageCount,o=e.notificationStatus,s=e.conversationType;i=i||0,(n||1!==o)&&(t.length>0?t.includes(Number(s))&&(r+=Number(i)):r+=Number(i))})),r},e.prototype.getUnreadCountByTag=function(e,t){var n=this._store.getValueForTag()[e]||[],i=0;return n.forEach((function(e){var n=e.unreadMessageCount,r=e.notificationStatus;(t||1!==r)&&(n=n||0,i+=Number(n))})),i},e.prototype.getUnreadCount=function(e,t,n){return this._store.get(e,t,n).unreadMessageCount||0},e.prototype.clearUnreadCount=function(e,t,n,i){void 0===i&&(i=!0);var r=this._store.get(e,t,n),o=r.unreadMessageCount,s=r.hasMentioned,a={};if(o&&(r.unreadMessageCount=0,a.unreadMessageCount={val:0,time:Date.now()}),s&&(r.hasMentioned=!1,r.unreadMentionedCount=0,r.mentionedInfo=void 0,a.hasMentioned={val:!1,time:Date.now()},a.mentionedInfo={val:void 0,time:Date.now()}),this._store.set(e,t,r,n),i&&0!==Object.keys(a).length){var c=Object.assign(r,{conversationType:e,targetId:t,channelId:n,updatedItems:a});this._setUpdatedConversation(c),this._notifyConversationChanged()}},e.prototype.clearAllUnreadCount=function(){var e=this;this._store.getValue().forEach((function(t){t.unreadMessageCount&&(t.unreadMessageCount=0,e._store.set(t.conversationType,t.targetId,t,t.channelId))}))},e.prototype.startPullConversationStatus=function(e){this._statusManager.pull(e)},e.prototype.setDraft=function(e,t,n,i){var r=e+"_"+t+"_"+i;this._draftMap[r]=n},e.prototype.getDraft=function(e,t,n){var i=e+"_"+t+"_"+n;return this._draftMap[i]},e.prototype.clearDraft=function(e,t,n){var i=e+"_"+t+"_"+n;delete this._draftMap[i]},e.prototype.addTagStatus=function(e,t,n,i){void 0===i&&(i="");var r=this._store.get(e,t,i).tags;r=Object.assign(r,n),this._store.set(e,t,{tags:r},i)},e.prototype.deleteTagStatus=function(e,t,n,i){void 0===i&&(i="");var r=this._store.get(e,t,i).tags;n.forEach((function(e){delete r[e]})),this._store.set(e,t,{tags:r},i)},e.prototype.getConversationListForTag=function(){return this._store.getValueForTag()},e.prototype.getBlockConversationList=function(){return this._store.getValue().filter((function(e){return e.notificationStatus===Me.OPEN})).map((function(e){return{conversationType:e.conversationType,targetId:e.targetId,channelId:e.channelId}}))},e.prototype.getTopConversationList=function(){return(this._store.getValue()||{}).filter((function(e){return e.isTop})).map((function(e){return{conversationType:e.conversationType,targetId:e.targetId,channelId:e.channelId}}))},e.prototype.adaptOldStore=function(){this._store.adaptOldStore()},e.prototype.getUnreadMentionedCount=function(e,t,n){return void 0===e&&(e=""),this.get(t,n,e).unreadMentionedCount||0},e.prototype.getAllUnreadMentionedCount=function(){var e=this._store.getValue(),t=0;return e.forEach((function(e){var n=e.unreadMentionedCount;n=n||0,t+=Number(n)})),t},e.prototype.getAllConversationState=function(){return this._store.getValue().filter((function(e){return e.unreadMessageCount||e.unreadMentionedCount})).map((function(e){return{conversationType:e.conversationType,targetId:e.targetId,channelId:e.channelId,unreadCount:e.unreadMessageCount||0,unreadMentionedCount:e.unreadMentionedCount||0}}))},e}(),uo=function(){function e(e,t,n,i){this._pullQueue=[],this._isPulling=!1,this._storageTagKey="tag-"+t+"-"+n,this._storagePullTimeKey="us-s-"+t+"-"+n,this._storage=R(e.runtime),this._engine=e,this._tagWatcherFunc=i}return e.prototype._updateTag=function(e){var t=e.tags,n={};t.forEach((function(e){n[e.tagId]={tagName:e.tagName,createdTime:e.createdTime}})),this._storage.set(this._storageTagKey,n),this._tagWatcherFunc()},e.prototype.addTag=function(e,t){var n=this._storage.get(this._storageTagKey)||{};e.forEach((function(e){var t,i=(null===(t=n[e.tagId])||void 0===t?void 0:t.createdTime)||e.createdTime||0;n[e.tagId]={tagName:e.tagName,createdTime:i}})),this._storage.set(this._storageTagKey,n),this._storage.set(this._storagePullTimeKey,t)},e.prototype.deleteTag=function(e,t){var n=this._storage.get(this._storageTagKey)||{};e.forEach((function(e){delete n[e]})),this._storage.set(this._storageTagKey,n),this._storage.set(this._storagePullTimeKey,t)},e.prototype.getTagsInfo=function(){return this._storage.get(this._storageTagKey)||{}},e.prototype.getTags=function(){var e=this._storage.get(this._storageTagKey)||{},t=[];for(var n in e)t.push({tagId:n,tagName:e[n].tagName,createdTime:e[n].createdTime,conversationCount:0});return t.sort((function(e,t){return(e.createdTime||0)-(t.createdTime||0)}))},e.prototype.getTagById=function(e){var t=this._storage.get(this._storageTagKey)||{};return t[e]?{tagId:e,tagName:t[e].tagName,createdTime:t[e].createdTime,conversationCount:0}:null},e.prototype._startPull=function(){return x(this,void 0,void 0,(function(){var e,t,n,i,r,o,s,a;return P(this,(function(c){switch(c.label){case 0:return this._isPulling||0===this._pullQueue.length?[2]:(this._isPulling=!0,e=this._pullQueue.splice(0,1)[0],[4,this._engine.pullUserSettings(e)]);case 1:return t=c.sent(),n=t.code,i=t.data,n!==Te.SUCCESS||ae(i)?(this._isPulling=!1,this._startPull()):(o=(r=i).settings,s=r.version,a=o.Tag,ae(a)||this._updateTag(a),this._storage.set(this._storagePullTimeKey,s),this._isPulling=!1,this._startPull()),[2]}}))}))},e.prototype.pullUserSettings=function(e){var t=this._storage.get(this._storagePullTimeKey)||0;(e>t||0===e)&&(this._pullQueue.push(t),this._startPull())},e.prototype.getVersion=function(){return this._storage.get(this._storagePullTimeKey)||0},e}(),ho=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i._miniConnectUrl="",i._connectType=n.connectionType,i}return k(t,e),t.prototype._formatJSONPUrl=function(e,t,n,i){return e+"/"+(this._runtime.isSupportSocket()&&"websocket"===this._connectType?"navi":"cometnavi")+".js?appId="+n+"&token="+encodeURIComponent(t)+"&callBack="+i+"&v="+this._apiVersion+"&r="+Date.now()},t.prototype.getInfo=function(t,n,i){var r;return x(this,void 0,void 0,(function(){var o;return P(this,(function(s){return this._runtime.useNavi||(o=void 0,o=this._runtime.isSupportSocket()&&"websocket"===this._connectType?h.join(","):p.join(","),this._miniConnectUrl=(null===(r=this._options.miniCMPProxy)||void 0===r?void 0:r.length)?this._options.miniCMPProxy.join(","):o||"",n=[]),[2,e.prototype.getInfo.call(this,t,n,i)]}))}))},t.prototype._reqNavi=function(e,t,n){return x(this,void 0,void 0,(function(){var i,r,o,s,a,c,l,u,d;return P(this,(function(h){switch(h.label){case 0:i="getServerEndpoint",r=0,o=e.length,h.label=1;case 1:return r<o?(s=this._formatJSONPUrl(e[r],n,t,i),ve.debug("req navi => "+s),[4,this._runtime.httpReq({url:s,timeout:1e4,dataType:"text"})]):[3,4];case 2:if(200!==(a=h.sent()).status)return 403===a.status?ve.error("request navi error: "+Te.RC_CONN_USER_OR_PASSWD_ERROR):401===a.status&&ve.error("request navi error: "+Te.RC_CONN_APP_BLOCKED_OR_DELETED),[3,3];try{return c=a.data.match(/{[\d\D]+}/),0===(l=c&&c[0]?c[0]:"").indexOf('{\\"code\\":')&&(l=JSON.parse('"'+l+'"')),d=JSON.parse(l),u=/^https/.test(s)?"https":"http",d.protocol=u,this._runtime.useNavi||(d.server="",d.backupServer=this._miniConnectUrl,d.logSwitch=0),[2,d]}catch(e){ve.error("parse navi err =>",e)}h.label=3;case 3:return r+=1,[3,1];case 4:return this._runtime.useNavi?[2,null]:[2,d={code:200,protocol:"https",server:"",voipCallInfo:"",kvStorage:0,openHttpDNS:!1,historyMsg:!1,chatroomMsg:!1,uploadServer:"https://upload.qiniup.com",bosAddr:"https://gz.bcebos.com",location:"",monitor:0,joinMChrm:!1,openMp:0,openUS:0,grpMsgLimit:0,isFormatted:0,gifSize:2048,logSwitch:0,logPolicy:"",compDays:0,msgAck:"",activeServer:"",qnAddr:"",extkitSwitch:0,alone:!1,voipServer:"",offlinelogserver:"",backupServer:this._miniConnectUrl}]}}))}))},t}(Wr),po=function(){function e(e){this._pullQueue=[],this._isPulling=!1,this._pullTime=0,this._engine=e}return e.prototype._startPull=function(){return x(this,void 0,void 0,(function(){var e,t,n,i,r,o,s;return P(this,(function(a){switch(a.label){case 0:return this._isPulling||0===this._pullQueue.length?[2]:(this._isPulling=!0,e=this._pullQueue.splice(0,1)[0],t=e.roomId,n=e.timestamp,(i=this._pullTime)>n?(this._isPulling=!1,this._startPull(),[2]):[4,this._engine.pullRTCRoomEntry(t,i)]);case 1:return r=a.sent(),o=r.code,s=r.data,o===Te.SUCCESS?(this._isPulling=!1,this._pullTime=s.syncTime||0,this._startPull()):this._startPull(),[2]}}))}))},e.prototype.pullEntry=function(e,t){this._pullQueue.push({roomId:e,timestamp:t}),this._startPull()},e.prototype.reset=function(){this._pullTime=0,this._isPulling=!1},e}(),fo=function(e,t){return["send_msg",e,t].join("_")},go=function(){function e(e,t){this._runtime=e,this._appkey=t,this._sendMessageMap={},this._userId=""}return e.prototype.init=function(e){this._userId=e;var t=fo(this._appkey,e);this._sendMessageMap=this._getLocalInfo(t)},e.prototype._getLocalInfo=function(e){var t=this._runtime.localStorage.getItem(e);try{return t?JSON.parse(t):{}}catch(e){return{}}},e.prototype.setMessage=function(e,t){this._sendMessageMap[e]=t;var n=fo(this._appkey,this._userId),i=this._getLocalInfo(n);i[e]=t,this._runtime.localStorage.setItem(n,JSON.stringify(i))},e.prototype.getSendMessageMap=function(){return this._sendMessageMap},e.prototype.removeByUID=function(e){delete this._sendMessageMap[e]},e.prototype.removeByTimestamp=function(e){var t=fo(this._appkey,this._userId),n=this._getLocalInfo(t);Object.keys(n).forEach((function(t){n[t]<e&&delete n[t]})),this._runtime.localStorage.setItem(t,JSON.stringify(n))},e}(),mo=function(e){var t="RCDeviceId",n=R(e),i="",r=n.get(t);return r?i=r:(i=G(),n.set(t,i)),i};(ro={})[Y.PRIVATE]=Nr.qryPMsg,ro[Y.GROUP]=Nr.qryGMsg,ro[Y.CHATROOM]=Nr.qryCHMsg,ro[Y.CUSTOMER_SERVICE]=Nr.qryCMsg,ro[Y.SYSTEM]=Nr.qrySMsg;var _o=[Nr[Nr.recallMsg],Nr[Nr.ppMsgS],Nr[Nr.pgMsgS],Nr[Nr.ppMsgP],Nr[Nr.pgMsgP],Nr[Nr.chatMsg],Nr[Nr.pcMsgP],Nr[Nr.prMsgS],Nr[Nr.updUgRTime]],vo=function(e,t,n,i,r,o){return{conversationType:e,targetId:t,senderUserId:o,messageDirection:Ee.SEND,isCounted:!!n.isCounted,isMentioned:!!n.isMentioned,content:n.content,messageType:n.messageType,isOffLineMessage:!1,isPersited:!!n.isPersited,messageUId:i,sentTime:r,receivedTime:0,disableNotification:!!n.disableNotification,isStatusMessage:!!n.isStatusMessage,canIncludeExpansion:!!n.canIncludeExpansion,expansion:n.canIncludeExpansion?n.expansion:null,receivedStatus:s.UNREAD,pushConfig:n.pushConfig,channelId:n.channelId,isInterrupt:n.isInterrupt}},yo=function(e){return e.sort((function(e,t){var n,i,r=(null===(n=e.latestMessage)||void 0===n?void 0:n.sentTime)||0;return((null===(i=t.latestMessage)||void 0===i?void 0:i.sentTime)||0)-r}))},Co=function(e){function t(t,n,i){var r=e.call(this,t,n,i)||this;return r._customMessageType={},r._reconnectTimer=-1,r._pullOfflineFinished=!1,r._connectedTime=0,r._localConnectedTime=0,r._status=Re.DISCONNECTED,r._pullingMsg=!1,r._pullQueue=[],r._chrmsQueue={},r._latestSyncTimestamp=0,r._intervalTimer=-1,r._pullChatroomEntryTimestamp=0,r._lastSyncUltraMsgTimeStamp=0,r._lastSyncUltraMsgLocalTimeStamp=0,r._ultraGroupTimer=-1,r._isUltraPulling=!1,r._ultraGroupTimeQue=[],r._isUltraGroupListExist=!1,r._ultraGroupMap={},r._firstPullUltraGroupTime=0,r._ultraMsgMap={},r._pullUltraChangeMessageQue=[],r._isPullingUltraChangeMessage=!1,r._lastPullingUltraChangeMessageTime=0,r._ultraMsgChangeMap={},r._letterbox=new Gr(t,i.appkey),r._sendMessageStore=new go(t,i.appkey),r._chrmEntryHandler=new Jr(r),r}return k(t,e),t.prototype._createNavi=function(){return new ho(this.runtime,this._options)},t.prototype.getConnectedTime=function(){return this._connectedTime},t.prototype.connect=function(e,t){return x(this,void 0,void 0,(function(){var n,i,r,o,s,a=this;return P(this,(function(c){switch(c.label){case 0:return n=[],this._naviInfo=t,t.server?n.push(t.server):ve.warn("navi.server is invalid"),(i=t.backupServer)&&i.split(",").forEach((function(e){n.indexOf(e)<0&&n.push(e)})),0===n.length?(ve.error("navi invaild.",n),[2,Te.UNKNOWN]):(r=this.runtime.createDataChannel({status:function(i){a._connectionStatusHandler(i,e,n,t.protocol)},signal:this._signalHandler.bind(this)},this._options.connectionType),o=it.V3,1===t.openAnti&&(o=it.V4),[4,r.connect(this._appkey,e,n,t.protocol,this._apiVer,o)]);case 1:return(s=c.sent())===Te.SUCCESS?(this._channel=r,this.currentUserId=r.userId,this._connectedTime=r.connectedTime,this._localConnectedTime=Math.floor((Date.now()+r.sendConnectTime)/2),this._watcher.status(Re.CONNECTED),this._status=Re.CONNECTED,this._pullOfflineFinished=!1,this._conversationManager=new lo(this,this._appkey,this.currentUserId,this._watcher.conversation,this._watcher.conversationTag),this._conversationManager.startPullConversationStatus(0),this._userSettingManager=new uo(this,this._appkey,this.currentUserId,this._watcher.tag),this._userSettingManager.pullUserSettings(0),this._sendMessageStore.init(this.currentUserId),this._conversationManager.adaptOldStore(),this._rtcKVManager=new po(this),this._joinedChrmManager=new Xr(this.runtime,this._appkey,this.currentUserId,t.joinMChrm),this._startSyncInterval(),1===t.ugMsg&&this._startUltraSyncInterval()):r.close(),[2,s]}}))}))},t.prototype._connectionStatusHandler=function(e,t,n,i){if(ve.warn("connection status changed:",e),this._status=e,e!==Re.CONNECTING)if(e!==Re.CONNECTED){if(this._channel&&e!==Re.DISCONNECTED)return e===Re.BLOCKED||e===Re.KICKED_OFFLINE_BY_OTHER_CLIENT||e===Re.DISCONNECT_BY_SERVER?(this.disconnect(),void this._watcher.status(e)):void(e!==Re.REDIRECT?(this._watcher.status(e),this._try2Reconnect(t,n,i)):this._watcher.status(e));this._watcher.status(e)}else this._watcher.status(e);else this._watcher.status(e)},t.prototype._try2Reconnect=function(e,t,n){return x(this,void 0,void 0,(function(){var i,r=this;return P(this,(function(o){switch(o.label){case 0:return this._channel?(i=it.V3,1===this._naviInfo.openAnti&&(i=it.V4),[4,this._channel.connect(this._appkey,e,t,n,this._apiVer,i)]):[2];case 1:return o.sent()===Te.SUCCESS?(this._pullOfflineFinished=!1,this._startSyncInterval(),this._watcher.status(Re.CONNECTED),this._status=Re.CONNECTED,this._startUltraSyncInterval(),this._rejoinChrm(),ve.__insertLogIntoDatabase(),[2]):(this._watcher.status(Re.WEBSOCKET_UNAVAILABLE),this._status=Re.WEBSOCKET_UNAVAILABLE,this._reconnectTimer=setTimeout((function(){r._reconnectTimer=-1,r._try2Reconnect(e,t,n)}),5e3),[2])}}))}))},t.prototype._signalHandler=function(e,t){var n=e.syncMsg,i=e.topic;if(n)this._receiveSyncMsg(e,t);else{var r=Nr[i];if(r)switch(r){case Nr.s_ntf:ve.info("recv s_ntf -> signal.messageId: "+e.messageId),this._pullMsg(e);break;case Nr.s_msg:this._receiveMsg(e);break;case Nr.s_cmd:this._receiveStateNotify(e);break;case Nr.s_us:this._receiveSettingNotify(e);break;case Nr.rtc_ntf:this._receiveRtcKv(e);break;case Nr.s_opNtf:this._pullOperateStatusNotify(e)}else ve.error("unknown topic:",i)}},t.prototype._receiveStateNotify=function(e){var t,n=null===(t=this._channel)||void 0===t?void 0:t.codec.decodeByPBName(e.data,$t),i=n.time,r=n.type,o=n.chrmId;switch(r){case 2:this._chrmEntryHandler.pullEntry(o,i);break;case 3:this._conversationManager.startPullConversationStatus(i);break;case 4:this._chrmEntryHandler.reset(o),this._watcher.chatroom({chatroomDestroyed:e.targetId});break;case 6:this._ultraGroupTimeQue.push(i),this._syncUltraMsg(this._lastSyncUltraMsgTimeStamp);break;case 7:this._pullUltraChangeMessageQue.push(i),this._pullUltraChangeMessageList(this._lastPullingUltraChangeMessageTime)}},t.prototype._receiveSettingNotify=function(e){var t,n=(null===(t=this._channel)||void 0===t?void 0:t.codec.decodeByPBName(e.data,jn)).version;this._userSettingManager.pullUserSettings(n)},t.prototype._receiveRtcKv=function(e){var t,n=null===(t=this._channel)||void 0===t?void 0:t.codec.decodeByPBName(e.data,mi),i=n.time,r=n.type,o=n.roomId;switch(r){case 1:this._rtcKVManager.pullEntry(o,i)}},t.prototype._receiveMessageExpansion=function(e){var t=e.content,n=t.put,i=t.del,r=t.mid;n&&this._watcher.expansion({updatedExpansion:{messageUId:r,expansion:n}}),i&&this._watcher.expansion({deletedExpansion:{messageUId:r,deletedKeys:i}})},t.prototype._receiveSyncMsg=function(e,t){var n,i;if(_o.includes(e.topic)){if(e.topic===Nr[Nr.updUgRTime]){var r=null===(n=this._channel)||void 0===n?void 0:n.codec.decodeByPBName(e.data,Zt),o=r.channelId,s=r.busChannel,a=this._ultraGroupMap[s+"_"+o];return a&&(a.unreadMessageCount=0,a.unreadMentionedCount=0,a.lastReadTime=t.timestamp,this._watcher.conversation(Rt([a]))),void(t&&(this._ultraMsgMap[t.messageUId]=t.timestamp))}var c=null===(i=this._channel)||void 0===i?void 0:i.codec.decodeByPBName(e.data,Dt,{currentUserId:this.currentUserId,signal:e});c=this._handleMsgProperties(c),t&&(c.sentTime=t.timestamp,c.messageUId=t.messageUId),this._pullingMsg?this._pullQueue.push((null==t?void 0:t.timestamp)||c.sentTime):(t&&this._sendMessageStore.setMessage(t.messageUId,t.timestamp),c.messageType!==Oe.EXPANSION_NOTIFY?(c.messageType===Oe.SYNC_READ_STATUS&&this._conversationManager.clearUnreadCount(c.conversationType,c.targetId,c.channelId),this._conversationManager.setConversationCacheByMessage(c,!0),this._watcher.batchMessage([c])):this._receiveMessageExpansion(c))}},t.prototype._pullMsg=function(e){if(this._channel){var t=this._channel.codec.decodeByPBName(e.data,$t),n=t.type,i=t.chrmId,r=t.time;if(ve.info("s_ntf -> type: "+n+", chrmId: "+i+", time: "+r),2===n){var o=this._chrmsQueue[i];if(!o)return;o.queue.push(r),this._pullChrmMsg(i)}else this._pullQueue.push(r),this._syncMsg()}},t.prototype._startSyncInterval=function(){var e=this;this._stopSyncInterval(),this._intervalTimer=setInterval((function(){Date.now()-e._latestSyncTimestamp>=18e4&&e._syncMsg()}),3e4),this._latestSyncTimestamp=Date.now(),this._syncMsg()},t.prototype._stopSyncInterval=function(){-1!==this._intervalTimer&&(clearInterval(this._intervalTimer),this._intervalTimer=-1)},t.prototype._syncMsg=function(){return x(this,void 0,void 0,(function(){var e,t,n,i,r,o,s,a,c,l,u,d,h,p,f=this;return P(this,(function(g){switch(g.label){case 0:return this._pullingMsg?[2]:this._channel?(this._pullingMsg=!0,e=this._letterbox.getOutboxTime(this.currentUserId),t=this._letterbox.getInboxTime(this.currentUserId),ve.info("pullMsg -> sendboxTime: "+e+", inboxTime: "+t),n=this._channel.codec.encodeSyncMsg({sendboxTime:e,inboxTime:t}),i=new Mr(Nr[Nr.pullMsg],n,this.currentUserId),[4,this._channel.send(i,Ut,{connectedTime:this._channel.connectedTime,currentUserId:this.currentUserId})]):(this._pullingMsg=!1,[2]);case 1:return r=g.sent(),o=r.code,s=r.data,this._latestSyncTimestamp=Date.now(),o!==Te.SUCCESS||!s||ae(s.finished)||ae(s.list)||ae(s.syncTime)?(ve.warn("pullMsg failed -> code:",o,", data: ",s),this._pullingMsg=!1,[2]):(a=s.list,c=s.finished,l=s.syncTime,ve.info("pullMsg success -> syncTime: "+l+", finished: "+c),u=0,d=[],a.forEach((function(e){if(e.messageDirection===Ee.SEND&&(u=Math.max(e.sentTime,u),f._sendMessageStore.getSendMessageMap()[e.messageUId]))f._sendMessageStore.removeByUID(e.messageUId);else if(e.messageType!==Oe.EXPANSION_NOTIFY){if(e.messageType===Oe.SYNC_READ_STATUS){if(e.senderUserId!==f.currentUserId)return;f._conversationManager.clearUnreadCount(e.conversationType,e.targetId,e.channelId)}var t=f._handleMsgProperties(e);f._conversationManager.setConversationCacheByMessage(t,!0),d.push(t)}else f._receiveMessageExpansion(e)})),this._watcher.batchMessage(d),this._letterbox.setInboxTime(l,this.currentUserId),this._letterbox.setOutboxTime(u,this.currentUserId),this._sendMessageStore.removeByTimestamp(u),this._pullingMsg=!1,h=this._pullQueue.filter((function(e){return e>l})),this._pullQueue.length=0,(p=this._pullQueue).push.apply(p,h),c&&!this._pullOfflineFinished&&(this._pullOfflineFinished=!0,this._watcher.pullFinished()),(!c||h.length>0)&&this._syncMsg(),[2])}}))}))},t.prototype._receiveMsg=function(e){if(this._channel&&!this._pullingMsg)if(this._pullQueue.length>0)this._syncMsg();else{var t=this._channel.codec.decodeByPBName(e.data,Lt,{currentUserId:this.currentUserId,connectedTime:this._channel.connectedTime});(t=this._handleMsgProperties(t)).senderUserId===this.currentUserId&&this._sendMessageStore.setMessage(t.messageUId,t.sentTime),t.isStatusMessage||t.senderUserId===this.currentUserId||this._letterbox.setInboxTime(t.sentTime,this.currentUserId),t.messageType!==Oe.EXPANSION_NOTIFY?t.messageType===Oe.SYNC_READ_STATUS&&t.senderUserId!==this.currentUserId||(this._conversationManager.setConversationCacheByMessage(t,!0),this._watcher.batchMessage([t])):this._receiveMessageExpansion(t)}},t.prototype._handleMsgProperties=function(e,t){void 0===t&&(t=!1);var n,i=e.messageType,r=e.isCounted,o=e.isPersited,s=e.isStatusMessage,a=i in b,c=i in this._customMessageType;if(n=a?M(M({},b[i]),{isStatusMessage:S.includes(i)}):c?this._customMessageType[i]:{isCounted:!ce(r)&&r,isPersited:!ce(o)&&o,isStatusMessage:!1},Object.assign(e,n),t&&!ae(s)&&(e.isStatusMessage=s),!t){var l=e.content.user;if(l){var u=l.portrait,d=l.portraitUri,h=u||d;h&&(l.portrait=l.portraitUri=h)}}return e},t.prototype.getHistoryMessage=function(e,t,n,i,r,o){return void 0===o&&(o=""),x(this,void 0,void 0,(function(){var s,a,c,l,u,d,h,p,f;return P(this,(function(g){switch(g.label){case 0:return a=(s=this).currentUserId,c=s._channel,l=cr[e]||nr,u=1===i&&0===n,c?(d=c.codec.encodeGetHistoryMsg(t,{timestamp:n,count:u?2:i,order:r,channelId:o}),[4,c.send(new Mr(l,d,a),Kt,{currentUserId:a,connectedTime:c.connectedTime,conversation:{targetId:t}})]):[3,2];case 1:return h=g.sent(),(p=h.code)!==Te.SUCCESS?[2,{code:p}]:(f=h.data,u&&2===f.list.length&&(f.hasMore=!0,0===r?f.list.shift():f.list.pop()),[2,{code:p,data:{list:f.list,hasMore:f.hasMore}}]);case 2:return[2,{code:Te.RC_NET_CHANNEL_INVALID}]}}))}))},t.prototype.reportSDKInfo=function(e){var t=this.currentUserId,n=this._channel;if(n){ve.info("reportSDKInfo ->",e);var i=n.codec.encodeReportSDKInfo(JSON.stringify(e)),r=new Mr(Nr[Nr.reportsdk],i,t);n.send(r).then((function(e){var t=e.code;t!==Te.SUCCESS&&ve.warn("reportSDKInfo failed -> code: "+t)}))}},t.prototype.deleteRemoteMessage=function(e,t,n,i){return x(this,void 0,void 0,(function(){var r,o,s,a,c,l,u;return P(this,(function(d){switch(d.label){case 0:return o=(r=this).currentUserId,(s=r._channel)?(a=s.codec.encodeDeleteMessages(e,t,n,i),c=new Mr(Ki,a,o),[4,s.send(c)]):[3,2];case 1:return l=d.sent(),u=l.code,Te.SUCCESS,[2,u];case 2:return[2,Te.RC_NET_CHANNEL_INVALID]}}))}))},t.prototype.deleteRemoteMessageByTimestamp=function(e,t,n,i){return x(this,void 0,void 0,(function(){var r,o,s,a,c,l,u,d;return P(this,(function(h){switch(h.label){case 0:return o=(r=this).currentUserId,(s=r._channel)?(a=s.codec.encodeClearMessages(t,n,i,e),c=lr[e],l=new Mr(c,a,o),[4,s.send(l)]):[3,2];case 1:return u=h.sent(),d=u.code,Te.SUCCESS,[2,d];case 2:return[2,Te.RC_NET_CHANNEL_INVALID]}}))}))},t.prototype.getConversationList=function(e,t,n,i,r){return void 0===e&&(e=300),x(this,void 0,void 0,(function(){var r,o,s,a,c,l,u,d,h=this;return P(this,(function(p){switch(p.label){case 0:return o=(r=this).currentUserId,s=r._channel,t=t||Y.PRIVATE,s?(a=s.codec.encodeOldConversationList({count:e,type:t,startTime:n,order:i}),c=new Mr(Qi,a,o),[4,s.send(c,qt,{currentUserId:o,connectedTime:s.connectedTime,afterDecode:function(e){var t=e.conversationType,n=e.targetId,i=e.channelId,r=h._conversationManager.get(t,n,i);return Object.assign(e,r),e}})]):[3,2];case 1:return l=p.sent(),u=l.code,d=l.data,u!==Te.SUCCESS?[2,{code:u}]:[2,{code:u,data:null==d?void 0:d.list}];case 2:return[2,{code:Te.RC_NET_CHANNEL_INVALID}]}}))}))},t.prototype.removeConversation=function(e,t,n){return x(this,void 0,void 0,(function(){var i,r,o,s,a;return P(this,(function(c){switch(c.label){case 0:return(i=this._channel)?(r=i.codec.encodeRemoveOldConversationList({conversationType:e,channelId:n,targetId:t}),o=new Mr(Zi,r,t),[4,i.send(o)]):[3,2];case 1:return s=c.sent(),ve.info("RemoveConversation =>",s),a=s.code,Te.SUCCESS,[2,a];case 2:return[2,Te.RC_NET_CHANNEL_INVALID]}}))}))},t.prototype.getConversation=function(e,t,n){return x(this,void 0,void 0,(function(){var i,r,o,s,a,c;return P(this,(function(l){switch(l.label){case 0:return e!==Y.ULTRA_GROUP?[3,1]:(i=this._ultraGroupMap[n+"_"+t])?[3,3]:[2,{code:Te.CONVER_GET_ERROR}];case 1:return(r=this._conversationManager.get(e,t,n))?[4,this.getHistoryMessage(e,t,0,1,0)]:[2,{code:Te.CONVER_GET_ERROR}];case 2:if(o=l.sent(),s=o.code,a=o.data,s!==Te.SUCCESS)return[2,{code:Te.CONVER_GET_ERROR}];c=(null==a?void 0:a.list[0])||null,i={conversationType:e,targetId:t,channelId:n,unreadMessageCount:r.unreadMessageCount||0,latestMessage:c,notificationStatus:r.notificationStatus||Me.CLOSE,isTop:r.isTop||!1,lastUnreadTime:r.lastUnreadTime||0,unreadMentionedCount:r.unreadMentionedCount||0},l.label=3;case 3:return[2,{code:Te.SUCCESS,data:i}]}}))}))},t.prototype.getAllConversationUnreadCount=function(e,t,n){var i=this._conversationManager.getAllUnreadCount(e,t,n);return Promise.resolve({code:Te.SUCCESS,data:i})},t.prototype.getConversationUnreadCount=function(e,t,n){var i,r;return r=e===Y.ULTRA_GROUP?(null===(i=this._ultraGroupMap[n+"_"+t])||void 0===i?void 0:i.unreadMessageCount)||0:this._conversationManager.getUnreadCount(e,t,n),Promise.resolve({code:Te.SUCCESS,data:r})},t.prototype.clearConversationUnreadCount=function(e,t,n){return this._conversationManager.clearUnreadCount(e,t,n,!1),Promise.resolve(Te.SUCCESS)},t.prototype.clearAllUnreadCount=function(){return this._conversationManager.clearAllUnreadCount(),Promise.resolve(Te.SUCCESS)},t.prototype.getFirstUnreadMessage=function(e,t){throw new Error("Method not implemented.")},t.prototype.saveConversationMessageDraft=function(e,t,n,i){return this._conversationManager.setDraft(e,t,n,i),Promise.resolve(Te.SUCCESS)},t.prototype.getConversationMessageDraft=function(e,t,n){var i=this._conversationManager.getDraft(e,t,n);return Promise.resolve({code:Te.SUCCESS,data:i})},t.prototype.clearConversationMessageDraft=function(e,t,n){return this._conversationManager.clearDraft(e,t,n),Promise.resolve(Te.SUCCESS)},t.prototype.pullConversationStatus=function(e){return x(this,void 0,void 0,(function(){var t,n,i,r,o,s,a,c,l,u=this;return P(this,(function(d){switch(d.label){case 0:return n=(t=this)._channel,i=t.currentUserId,n?(r=n.codec.encodeGetConversationStatus(e),o=new Mr(Nr[Nr.pullSeAtts],r,i),[4,n.send(o,$n)]):[3,2];case 1:return s=d.sent(),a=s.code,c=s.data,a!==Te.SUCCESS?[2,{code:a}]:(l=[],Array.isArray(c)&&c.forEach((function(e){var t=e.conversationType,n=e.targetId,i=e.notificationStatus,r=e.channelId,o=e.isTop,s=u._ultraGroupMap[r+"_"+n];t===Y.ULTRA_GROUP?s&&(void 0!==i&&(s.notificationStatus=i),"boolean"==typeof o&&(s.isTop=o)):l.push(e)})),[2,{code:a,data:l}]);case 2:return[2,{code:Te.RC_NET_CHANNEL_INVALID}]}}))}))},t.prototype.batchSetConversationStatus=function(e){return x(this,void 0,void 0,(function(){var t,n,i,r,o,s,a,c,l,u,d,h=this;return P(this,(function(p){switch(p.label){case 0:return n=(t=this).currentUserId,(i=t._channel)?(r=i.codec.encodeSetConversationStatus(e),o=new Mr(er,r,n),[4,i.send(o,qn)]):[3,2];case 1:return s=p.sent(),a=s.code,c=s.data,a===Te.SUCCESS?(l=c,u=[],e.forEach((function(e){var t=e.conversationType,n=e.targetId,i=e.notificationStatus,r=e.channelId,o=e.isTop;if(t===Y.ULTRA_GROUP){var s=h._ultraGroupMap[r+"_"+n];s&&(void 0!==i&&(s.notificationStatus=i),void 0!==o&&(s.isTop=o),u.push(s))}else h._conversationManager.addStatus(M(M({},e),{updatedTime:l.version}),!0)})),u.length>0&&(d=Rt(u),d=yo(d),this._watcher.conversation(d)),[2,a]):[2,a];case 2:return[2,Te.RC_NET_CHANNEL_INVALID]}}))}))},t.prototype._joinChrm=function(e,t,n){return x(this,void 0,void 0,(function(){var i,r,o,s,a,c,l;return P(this,(function(u){switch(u.label){case 0:return(i=this._channel)?(r=i.codec.encodeJoinOrQuitChatRoom(),o=new Mr(n?qi:Wi,r,e),[4,i.send(o,tn)]):[2,Te.RC_NET_CHANNEL_INVALID];case 1:return s=u.sent(),a=s.code,c=s.data,a===Te.SUCCESS&&(l=c.joinTime,this._chrmsQueue[e]||(this._chrmsQueue[e]={pulling:!1,queue:[],timestamp:0}),this._pullChrmMsg(e,t,l),this._naviInfo.kvStorage&&this._chrmEntryHandler.pullEntry(e,0),this._joinedChrmManager.set(e,t)),[2,a]}}))}))},t.prototype._rejoinChrm=function(){return x(this,void 0,void 0,(function(){var e,t,n,i,r,o;return P(this,(function(s){switch(s.label){case 0:for(n in e=this._joinedChrmManager.get(),t=[],e)t.push(n);i=0,s.label=1;case 1:return i<t.length?(r=t[i],[4,this._joinChrm(r,e[r]||10,!0)]):[3,4];case 2:(o=s.sent())===Te.SUCCESS?this._watcher.chatroom({rejoinedRoom:{chatroomId:r,count:e[r]}}):this._watcher.chatroom({rejoinedRoom:{chatroomId:r,errorCode:o}}),s.label=3;case 3:return i++,[3,1];case 4:return[2]}}))}))},t.prototype._pullChrmMsg=function(e,t,n){return void 0===t&&(t=10),void 0===n&&(n=0),x(this,void 0,void 0,(function(){var i,r,o,s,a,c,l,u,d,h,p,f;return P(this,(function(g){switch(g.label){case 0:return this._channel?(i=this._chrmsQueue[e],r=i.pulling,o=i.timestamp,r?[2]:(i.pulling=!0,s=this._channel.codec.encodeChrmSyncMsg(o,t),a=new Mr(Nr[Nr.chrmPull],s,e),[4,this._channel.send(a,Ut,{connectedTime:this._channel.connectedTime,currentUserId:this.currentUserId})])):[2];case 1:return c=g.sent(),l=c.code,u=c.data,i.pulling=!1,l===Te.SUCCESS&&u?(d=u.list,h=u.syncTime,p=u.finished,i.timestamp=n?Math.max(h,n):h,i.queue=i.queue.filter((function(e){return e>h})),f=[],d.forEach((function(e){e.sentTime<o||f.push(e)})),this._watcher.batchMessage(f),(!p||i.queue.length>0)&&this._pullChrmMsg(e),[2]):(ve.warn("pull chatroom msg failed, code:",l,", data:",u),[2])}}))}))},t.prototype.joinChatroom=function(e,t){return x(this,void 0,void 0,(function(){return P(this,(function(n){return[2,this._joinChrm(e,t,!1)]}))}))},t.prototype.joinExistChatroom=function(e,t){return x(this,void 0,void 0,(function(){return P(this,(function(n){return[2,this._joinChrm(e,t,!0)]}))}))},t.prototype.quitChatroom=function(e){return x(this,void 0,void 0,(function(){var t,n,i,r,o;return P(this,(function(s){switch(s.label){case 0:return(t=this._channel)?(n=t.codec.encodeJoinOrQuitChatRoom(),i=new Mr(Gi,n,e),[4,t.send(i)]):[2,Te.RC_NET_CHANNEL_INVALID];case 1:return r=s.sent(),(o=r.code)===Te.SUCCESS&&(delete this._chrmsQueue[e],this._chrmEntryHandler.reset(e),this._joinedChrmManager.remove(e)),[2,o]}}))}))},t.prototype.getChatroomInfo=function(e,t,n){return x(this,void 0,void 0,(function(){var i,r,o,s,a,c;return P(this,(function(l){switch(l.label){case 0:return(i=this._channel)?(r=i.codec.encodeGetChatRoomInfo(t,n),o=new Mr(Nr[Nr.queryChrmI],r,e),[4,i.send(o,rn)]):[2,{code:Te.RC_NET_CHANNEL_INVALID}];case 1:return s=l.sent(),a=s.code,c=s.data,a!==Te.SUCCESS?[2,{code:a}]:[2,{code:a,data:c}]}}))}))},t.prototype.getChatroomHistoryMessages=function(e,t,n,i){return x(this,void 0,void 0,(function(){var r,o,s,a,c,l;return P(this,(function(u){switch(u.label){case 0:return(r=this._channel)?(o=r.codec.encodeGetHistoryMsg(e,{timestamp:t,count:n,order:i}),s=new Mr(rr,o,e),[4,r.send(s,Kt,{conversation:{targetId:e}})]):[2,{code:Te.RC_NET_CHANNEL_INVALID}];case 1:return a=u.sent(),c=a.code,l=a.data,c!==Te.SUCCESS?[2,{code:c}]:[2,{code:c,data:{list:l.list,hasMore:l.hasMore}}]}}))}))},t.prototype._modifyChatroomKV=function(e,t){return x(this,void 0,void 0,(function(){var n,i,r,o,s,a,c,l,u;return P(this,(function(d){switch(d.label){case 0:return i=(n=this)._channel,r=n.currentUserId,i?(o=this._chrmEntryHandler.getVersion(e,t.key),t.version=null==o?this.getServerTime():o,s=i.codec.encodeModifyChatRoomKV(e,t,r),a=t.type===Le.UPDATE?zi:Yi,c=new Mr(a,s,e),[4,i.send(c,tn)]):[2,Te.RC_NET_CHANNEL_INVALID];case 1:return l=d.sent(),(u=l.code)===Te.SUCCESS?(this._chrmEntryHandler.setLocal(e,{kvEntries:[t],syncTime:(new Date).getTime()},r),[2,u]):[2,u]}}))}))},t.prototype._modifyChatroomKVS=function(e,t){return x(this,void 0,void 0,(function(){var n,i,r,o,s,a,c,l,u,d,h,p,f=this;return P(this,(function(g){switch(g.label){case 0:return i=(n=this)._channel,r=n.currentUserId,i?(t.entries.forEach((function(t){var n=f._chrmEntryHandler.getVersion(e,t.key);t.version=null==n?f.getServerTime():n})),o=i.codec.encodeModifyChatRoomKVS(e,t,r),s=t.type===Le.UPDATE?Ji:Xi,a=new Mr(s,o,e),[4,i.send(a,Pn)]):[2,{code:Te.RC_NET_CHANNEL_INVALID}];case 1:return c=g.sent(),l=c.code,-1!==[Te.SUCCESS,Te.CHATROOM_KV_STORE_NOT_ALL_SUCCESS].indexOf(l)&&(d=[],delete(h=Object.assign({},t)).entries,t.entries.forEach((function(e){d.push(Object.assign({},e,h))})),l===Te.CHATROOM_KV_STORE_NOT_ALL_SUCCESS&&(p=c.data,ve.warn("设置失败的属性：",p.errorKeys),u=p.errorKeys,p&&Array.isArray(p.errorKeys)&&p.errorKeys.forEach((function(e){var t=d.findIndex((function(t){return e.key===t.key}));-1!==t&&d.splice(t,1)}))),ve.warn("设置成功的属性：",d),this._chrmEntryHandler.setLocal(e,{kvEntries:d,syncTime:(new Date).getTime()},r)),[2,{code:l,data:u}]}}))}))},t.prototype.setChatroomEntry=function(e,t){return x(this,void 0,void 0,(function(){return P(this,(function(n){return t.type=Le.UPDATE,t.userId=t.userId||this.currentUserId,[2,this._modifyChatroomKV(e,t)]}))}))},t.prototype.setChatroomEntries=function(e,t){return x(this,void 0,void 0,(function(){return P(this,(function(n){return t.type=Le.UPDATE,t.userId=t.userId||this.currentUserId,[2,this._modifyChatroomKVS(e,t)]}))}))},t.prototype.forceSetChatroomEntry=function(e,t){return x(this,void 0,void 0,(function(){return P(this,(function(n){return t.type=Le.UPDATE,t.isOverwrite=!0,t.userId=t.userId||this.currentUserId,[2,this._modifyChatroomKV(e,t)]}))}))},t.prototype.removeChatroomEntry=function(e,t){return x(this,void 0,void 0,(function(){return P(this,(function(n){return t.type=Le.DELETE,t.userId=t.userId||this.currentUserId,[2,this._modifyChatroomKV(e,t)]}))}))},t.prototype.removeChatroomEntries=function(e,t){return x(this,void 0,void 0,(function(){return P(this,(function(n){return t.type=Le.DELETE,t.userId=t.userId||this.currentUserId,[2,this._modifyChatroomKVS(e,t)]}))}))},t.prototype.forceRemoveChatroomEntry=function(e,t){return x(this,void 0,void 0,(function(){return P(this,(function(n){return t.type=Le.DELETE,t.isOverwrite=!0,t.userId=t.userId||this.currentUserId,[2,this._modifyChatroomKV(e,t)]}))}))},t.prototype.getChatroomEntry=function(e,t){return x(this,void 0,void 0,(function(){var n,i,r,o,s,a,c;return P(this,(function(l){switch(l.label){case 0:return(n=this._chrmEntryHandler.getValue(e,t))?[2,Promise.resolve({code:Te.SUCCESS,data:n})]:[3,1];case 1:return(i=this._channel)?(r=i.codec.encodePullChatRoomKV(0),o=new Mr(Nr[Nr.pullKV],r,e),[4,i.send(o,xn)]):[2,Promise.reject({code:Te.RC_NET_CHANNEL_INVALID})];case 2:return s=l.sent(),(a=s.data||{})&&a.kvEntries&&a.kvEntries.length&&void 0!==(c=a.kvEntries.find((function(e){return e.key===t})))?[2,Promise.resolve({code:Te.SUCCESS,data:null==c?void 0:c.value})]:[2,Promise.resolve({code:Te.CHATROOM_KEY_NOT_EXIST})]}}))}))},t.prototype.getAllChatroomEntry=function(e){return x(this,void 0,void 0,(function(){var t,n,i,r,o,s,a;return P(this,(function(c){switch(c.label){case 0:return(t=this._chrmEntryHandler.getAll(e))&&Object.keys(t).length?[2,Promise.resolve({code:Te.SUCCESS,data:t})]:[3,1];case 1:return(n=this._channel)?(i={},r=n.codec.encodePullChatRoomKV(0),o=new Mr(Nr[Nr.pullKV],r,e),[4,n.send(o,xn)]):[2,Promise.reject({code:Te.RC_NET_CHANNEL_INVALID})];case 2:return s=c.sent(),(a=s.data||{})&&a.kvEntries&&a.kvEntries.length&&a.kvEntries.forEach((function(e){e.key&&(i[e.key]=e.value||"")})),[2,Promise.resolve({code:Te.SUCCESS,data:i})]}}))}))},t.prototype.pullChatroomEntry=function(e,t){return x(this,void 0,void 0,(function(){var n,i,r,o,s,a,c,l,u,d,h,p;return P(this,(function(f){switch(f.label){case 0:return i=(n=this)._channel,r=n.currentUserId,i?(t||(t=this._pullChatroomEntryTimestamp),o=i.codec.encodePullChatRoomKV(t),s=new Mr(Nr[Nr.pullKV],o,e),[4,i.send(s,xn)]):[2,{code:Te.RC_NET_CHANNEL_INVALID}];case 1:return a=f.sent(),c=a.code,l=a.data,c===Te.SUCCESS?(ve.info("Pull success ChrmKV, "+JSON.stringify(a)),this._chrmEntryHandler.setLocal(e,l,r),ve.info("Save into cache success!"),d=(u=l).kvEntries,h=u.syncTime,this._pullChatroomEntryTimestamp=h||0,p=[],d.length>0&&(d.forEach((function(t){var n=t.key,i=t.value,r=t.type,o=t.timestamp;p.push({key:n,value:i,type:r,timestamp:o,chatroomId:e})})),this._watcher.chatroom({updatedEntries:p})),[2,{code:c,data:l}]):[2,{code:c}]}}))}))},t.prototype.sendMessage=function(e,t,n){return x(this,void 0,void 0,(function(){var i,r,o,s,a,c,l,u,d,h;return P(this,(function(p){switch(p.label){case 0:return this._channel?(n=function(e,t){return"RC:SRSMsg"===e.messageType&&Object.assign(e,{directionalUserIdList:[t]}),e}(n,this.currentUserId),n=this._handleMsgProperties(n,!0),i=!![Y.PRIVATE,Y.GROUP].includes(e)&&n.isStatusMessage,r=i?function(e){var t;return(t={},t[Y.PRIVATE]=Nr.ppMsgS,t[Y.GROUP]=Nr.pgMsgS,t)[e]}(e):function(e){var t;return(t={},t[Y.PRIVATE]=Nr.ppMsgP,t[Y.GROUP]=Nr.pgMsgP,t[Y.CHATROOM]=Nr.chatMsg,t[Y.CUSTOMER_SERVICE]=Nr.pcMsgP,t[Y.RTC_ROOM]=Nr.prMsgS,t)[e]}(e)||Nr.ppMsgP,i&&(n.isPersited=!1,n.isCounted=!1),o=this._channel.codec.encodeUpMsg({conversationType:e,targetId:t},n),(s=new wr(Nr[r],o,t)).setHeaderQos(Ze.AT_LEAST_ONCE),i?(this._channel.sendOnly(s),[2,{code:Te.SUCCESS,data:vo(e,t,M({},n),"",0,this.currentUserId)}]):(a=Date.now()-this._localConnectedTime+this._connectedTime,c=vo(e,t,M({},n),"",a,this.currentUserId),[4,this._channel.send(s)])):[2,{code:Te.RC_NET_CHANNEL_INVALID}];case 1:return l=p.sent(),u=l.code,d=l.data,u!==Te.SUCCESS?[2,{code:u,data:c}]:(h=d,this._sendMessageStore.setMessage(h.messageUId,h.timestamp),c.sentTime=h.timestamp,c.messageUId=h.messageUId,this._conversationManager.setConversationCacheByMessage(c,!0),[2,{code:Te.SUCCESS,data:c}])}}))}))},t.prototype.recallMsg=function(e,t,n,i,r){var o;return x(this,void 0,void 0,(function(){var s,a,c,l,u,d,h,p,f,g;return P(this,(function(m){switch(m.label){case 0:return this._channel?(s=r.user,a={content:{conversationType:e,targetId:t,messageUId:n,sentTime:i,user:s},messageType:"RC:RcCmd",disableNotification:null==r?void 0:r.disableNotification,pushConfig:null==r?void 0:r.pushConfig,pushContent:(null===(o=r.pushConfig)||void 0===o?void 0:o.pushContent)||r.pushContent||"",channelId:r.channelId},c=Nr[Nr.recallMsg],l=this._channel.codec.encodeUpMsg({conversationType:e,targetId:t},a),(u=new wr(c,l,this.currentUserId)).setHeaderQos(Ze.AT_LEAST_ONCE),[4,this._channel.send(u)]):[2,{code:Te.RC_NET_CHANNEL_INVALID}];case 1:return d=m.sent(),h=d.code,p=d.data,h!==Te.SUCCESS?[2,{code:h}]:(f=p,e===Y.ULTRA_GROUP?(this._ultraMsgMap[f.messageUId]=f.timestamp,[2,{code:Te.SUCCESS}]):(this._sendMessageStore.setMessage(f.messageUId,f.timestamp),g=vo(e,t,M(M({},a),{isPersited:!0}),f.messageUId,f.timestamp,this.currentUserId),this._conversationManager.setConversationCacheByMessage(g,!0),[2,{code:Te.SUCCESS,data:g}]))}}))}))},t.prototype.sendReadReceiptMessage=function(e,t,n){return x(this,void 0,void 0,(function(){var i,r;return P(this,(function(o){switch(o.label){case 0:return this._channel?(i=this._channel.codec.encodeReadReceipt(t,n),r=new Mr(Nr[Nr.rrMsg],i,e),[4,this._channel.send(r)]):[2,{code:Te.RC_NET_CHANNEL_INVALID}];case 1:return[2,o.sent()]}}))}))},t.prototype.getMessageReader=function(e,t,n){return x(this,void 0,void 0,(function(){var i,r;return P(this,(function(o){switch(o.label){case 0:return this._channel?(i=this._channel.codec.encodeMessageReader(t,n),r=new Mr(Nr[Nr.rrList],i,e),[4,this._channel.send(r,Yn)]):[2,{code:Te.RC_NET_CHANNEL_INVALID}];case 1:return[2,o.sent()]}}))}))},t.prototype.pullUserSettings=function(e){return x(this,void 0,void 0,(function(){var t,n;return P(this,(function(i){return this._channel?(t=this._channel.codec.encodePullUserSetting(e),n=new Mr(Nr[Nr.pullUS],t,this.currentUserId),[2,this._channel.send(n,Vn)]):[2,{code:Te.RC_NET_CHANNEL_INVALID}]}))}))},t.prototype.getFileToken=function(e,t,n,i){return x(this,void 0,void 0,(function(){var r,o,s,a,c,l;return P(this,(function(u){switch(u.label){case 0:return this._channel?(r=i&&"uploads"!==i?t||"":lt(e,t),o=this._channel.codec.encodeGetFileToken(e,r,n||"",i||""),s=new Mr(Nr[Nr.qnTkn],o,this.currentUserId),[4,this._channel.send(s,bn)]):[2,{code:Te.RC_NET_CHANNEL_INVALID}];case 1:return a=u.sent(),c=a.code,l=a.data,l=Object.assign(l,{fileName:r}),c===Te.SUCCESS?[2,{code:c,data:l}]:[2,{code:c}]}}))}))},t.prototype.getFileUrl=function(e,t,n,i){return x(this,void 0,void 0,(function(){var r,o,s,a,c,l,u,d,h;return P(this,(function(p){switch(p.label){case 0:return this._channel?(r="",o="",s="",t===De.QINIU?(o=Tn,s=Rn):(o=Sn,s=In),r=t===De.QINIU?Nr[Nr.qnUrl]:t===De.AWS?Nr[Nr.s3Url]:t===De.STC?Nr[Nr.stcUrl]:Nr[Nr.aliUrl],a=this._channel.codec.encodeGetFileUrl(o,e,n,i),c=new Mr(r,a,this.currentUserId),[4,this._channel.send(c,s)]):[2,{code:Te.RC_NET_CHANNEL_INVALID}];case 1:return l=p.sent(),u=l.code,d=l.data,h=d,u===Te.SUCCESS?[2,{code:u,data:h}]:[2,{code:u}]}}))}))},t.prototype.disconnect=function(){-1!==this._reconnectTimer&&(clearTimeout(this._reconnectTimer),this._reconnectTimer=-1),this._channel&&(this._channel.close(),this._channel=void 0),this._pullQueue.length=0,this._stopSyncInterval(),this._stopUltraSyncInterval()},t.prototype.destroy=function(){throw new Error("JSEngine's method not implemented.")},t.prototype.registerMessageType=function(e,t,n,i,r){this._customMessageType[e]={isPersited:t,isCounted:n,isStatusMessage:r}},t.prototype.getServerTime=function(){return Date.now()-this._localConnectedTime+this._connectedTime},t.prototype.getCurrentUserId=function(){return this.currentUserId},t.prototype.createTag=function(e){return x(this,void 0,void 0,(function(){var t,n,i,r,o,s,a;return P(this,(function(c){switch(c.label){case 0:return this._channel?(t=this._userSettingManager.getVersion(),n=this._channel.codec.encodeCreateTag([e],t),i=new Mr(Nr[Nr.addSeTag],n,this.currentUserId),[4,this._channel.send(i,Un)]):[2,{code:Te.RC_NET_CHANNEL_INVALID}];case 1:return r=c.sent(),o=r.code,s=r.data,o!==Te.SUCCESS?[2,{code:o}]:(a=s.version,this._userSettingManager.addTag([M(M({},e),{createdTime:a})],a),[2,{code:Te.SUCCESS,data:s}])}}))}))},t.prototype.removeTag=function(e){return x(this,void 0,void 0,(function(){var t,n,i,r,o,s,a;return P(this,(function(c){switch(c.label){case 0:return this._channel?(t=this._userSettingManager.getVersion(),n=this._channel.codec.encodeRemoveTag([e],t),i=new Mr(Nr[Nr.delSeTag],n,this.currentUserId),[4,this._channel.send(i,Un)]):[2,{code:Te.RC_NET_CHANNEL_INVALID}];case 1:return r=c.sent(),o=r.code,s=r.data,o!==Te.SUCCESS?[2,{code:o}]:(a=s.version,this._userSettingManager.deleteTag([e],a),[2,{code:Te.SUCCESS}])}}))}))},t.prototype.updateTag=function(e){return x(this,void 0,void 0,(function(){var t,n,i,r,o,s,a;return P(this,(function(c){switch(c.label){case 0:return this._channel?(t=this._userSettingManager.getVersion(),n=this._channel.codec.encodeCreateTag([e],t),i=new Mr(Nr[Nr.addSeTag],n,this.currentUserId),[4,this._channel.send(i,Un)]):[2,{code:Te.RC_NET_CHANNEL_INVALID}];case 1:return r=c.sent(),o=r.code,s=r.data,o!==Te.SUCCESS?[2,{code:o}]:(a=s.version,this._userSettingManager.addTag([e],a),[2,{code:Te.SUCCESS,data:s}])}}))}))},t.prototype.getTagList=function(){return x(this,void 0,void 0,(function(){var e,t;return P(this,(function(n){return e=this._userSettingManager.getTags(),t=this._conversationManager.getConversationListForTag(),e.forEach((function(e){e.conversationCount=t[e.tagId]?t[e.tagId].length:0})),[2,{code:Te.SUCCESS,data:e}]}))}))},t.prototype.addTagForConversations=function(e,t){return x(this,void 0,void 0,(function(){var n,i,r,o,s=this;return P(this,(function(a){switch(a.label){case 0:return this._channel?this._userSettingManager.getTagById(e)?(n=this._channel.codec.encodeUpdateConversationTag([{tagId:e}],t),i=new Mr(Nr[Nr.addTag],n,this.currentUserId),[4,this._channel.send(i)]):[2,{code:Te.TAG_NOT_EXIST}]:[2,{code:Te.RC_NET_CHANNEL_INVALID}];case 1:return(r=a.sent().code)!==Te.SUCCESS?[2,{code:r}]:((o={})[e]={},t.forEach((function(e){s._conversationManager.addTagStatus(e.conversationType,e.targetId,o,e.channelId)})),[2,{code:Te.SUCCESS}])}}))}))},t.prototype.removeTagForConversations=function(e,t){return x(this,void 0,void 0,(function(){var n,i,r,o=this;return P(this,(function(s){switch(s.label){case 0:return this._channel?(n=this._channel.codec.encodeUpdateConversationTag([{tagId:e}],t),i=new Mr(Nr[Nr.delTag],n,this.currentUserId),[4,this._channel.send(i)]):[2,{code:Te.RC_NET_CHANNEL_INVALID}];case 1:return(r=s.sent().code)!==Te.SUCCESS?[2,{code:r}]:(t.forEach((function(t){o._conversationManager.deleteTagStatus(t.conversationType,t.targetId,[e],t.channelId)})),[2,{code:Te.SUCCESS}])}}))}))},t.prototype.removeTagsForConversation=function(e,t){return x(this,void 0,void 0,(function(){var n,i,r,o,s,a,c;return P(this,(function(l){switch(l.label){case 0:return this._channel?(n=e.conversationType,i=e.targetId,r=e.channelId,o=t.map((function(e){return{tagId:e}})),s=this._channel.codec.encodeUpdateConversationTag(o,[e]),a=new Mr(Nr[Nr.delTag],s,this.currentUserId),[4,this._channel.send(a)]):[2,{code:Te.RC_NET_CHANNEL_INVALID}];case 1:return(c=l.sent().code)!==Te.SUCCESS?[2,{code:c}]:(this._conversationManager.deleteTagStatus(n,i,t,r),[2,{code:Te.SUCCESS}])}}))}))},t.prototype.getConversationListByTag=function(e,t,n){return x(this,void 0,void 0,(function(){var i,r,o,s,a,c,l,u,d;return P(this,(function(h){switch(h.label){case 0:return r=(i=this).currentUserId,(o=i._channel)?(s=o.codec.encodeOldConversationList({count:n,type:Y.PRIVATE,startTime:t}),a=new Mr(Qi,s,r),[4,o.send(a,qt,{currentUserId:r,connectedTime:o.connectedTime})]):[2,{code:Te.RC_NET_CHANNEL_INVALID}];case 1:return c=h.sent(),l=c.code,u=c.data,d=this._conversationHasTagFilter(e,null==u?void 0:u.list),ve.info("GetConversationListByTag",d),l!==Te.SUCCESS?[2,{code:l}]:[2,{code:l,data:d}]}}))}))},t.prototype._conversationHasTagFilter=function(e,t){var n=this,i=[],r=[];function o(e,t){return e.latestMessage&&t.latestMessage?e.latestMessage.sentTime-t.latestMessage.sentTime:0}return t.forEach((function(t){var o=t.conversationType,s=t.targetId,a=t.channelId,c=n._conversationManager.get(o,s,a),l=c.hasMentioned,u=c.mentionedInfo,d=c.lastUnreadTime,h=c.notificationStatus,p=c.isTop,f=c.tags,g=c.unreadMessageCount,m=f&&f[e];if(m){var _=M(M({},t),{hasMentioned:l,mentionedInfo:u,lastUnreadTime:d,notificationStatus:h,isTop:p,unreadMessageCount:g});m.isTop?i.push(M(M({},_),{isTopInTag:!0})):r.push(M(M({},_),{isTopInTag:!1}))}})),A(A([],i.sort(o)),r.sort(o))},t.prototype.getUnreadCountByTag=function(e,t){return x(this,void 0,void 0,(function(){var n;return P(this,(function(i){return this._channel?(n=this._conversationManager.getUnreadCountByTag(e,t),[2,{code:Te.SUCCESS,data:n}]):[2,{code:Te.RC_NET_CHANNEL_INVALID}]}))}))},t.prototype.setConversationStatusInTag=function(e,t,n){return x(this,void 0,void 0,(function(){var i,r,o,s,a,c,l,u,d,h;return P(this,(function(p){switch(p.label){case 0:return this._channel?(i=t.targetId,r=t.conversationType,o=t.channelId,s=n.isTop,a=[{tagId:e,isTop:s}],(c=this._conversationManager.get(r,i,o)).tags&&Object.hasOwnProperty.call(c.tags,e)?(l=this._channel.codec.encodeUpdateConversationTag(a,[t]),u=new Mr(Nr[Nr.addTag],l,this.currentUserId),[4,this._channel.send(u)]):[2,{code:Te.NO_TAG_IN_CONVER}]):[2,{code:Te.RC_NET_CHANNEL_INVALID}];case 1:return(d=p.sent().code)!==Te.SUCCESS?[2,{code:d}]:((h={})[e]={},s&&(h[e].isTop=!0),this._conversationManager.addTagStatus(r,i,h,o),[2,{code:Te.SUCCESS}])}}))}))},t.prototype.getTagsForConversation=function(e){var t;return x(this,void 0,void 0,(function(){var n,i,r,o;return P(this,(function(s){if(!this._channel)return[2,{code:Te.RC_NET_CHANNEL_INVALID}];if(n=this._conversationManager.get(e.conversationType,e.targetId,e.channelId),i=this._userSettingManager.getTagsInfo(),r=[],n.tags)for(o in n.tags)r.push({tagId:o,tagName:null===(t=i[o])||void 0===t?void 0:t.tagName});return[2,{code:Te.SUCCESS,data:r}]}))}))},t.prototype.getBlockConversationList=function(){var e=this._conversationManager.getBlockConversationList();return Promise.resolve({code:Te.SUCCESS,data:e})},t.prototype.getTopConversationList=function(){var e=this._conversationManager.getTopConversationList();return Promise.resolve({code:Te.SUCCESS,data:e})},t.prototype.getUnreadMentionedCount=function(e){var t,n;return n=e.conversationType===Y.ULTRA_GROUP?(null===(t=this._ultraGroupMap[e.channelId+"_"+e.targetId])||void 0===t?void 0:t.unreadMentionedCount)||0:this._conversationManager.getUnreadMentionedCount(e.channelId,e.conversationType,e.targetId),Promise.resolve({code:Te.SUCCESS,data:n})},t.prototype.getAllUnreadMentionedCount=function(){var e=this._conversationManager.getAllUnreadMentionedCount();return Promise.resolve({code:Te.SUCCESS,data:e})},t.prototype.getUltraGroupList=function(){return x(this,void 0,void 0,(function(){var e,t;return P(this,(function(n){return this._isUltraGroupListExist?(e=Object.values(this._ultraGroupMap),e=yo(e),t=Rt(e),[2,{code:Te.SUCCESS,data:t}]):[2,{code:Te.METHOD_NOT_AVAILABLE}]}))}))},t.prototype.getBlockUltraGroupList=function(){if(!this._isUltraGroupListExist)return Promise.resolve({code:Te.METHOD_NOT_AVAILABLE});var e=Object.values(this._ultraGroupMap),t=[];return e.forEach((function(e){e.notificationStatus===Me.OPEN&&t.push({conversationType:Y.ULTRA_GROUP,targetId:e.targetId,channelId:e.channelId})})),Promise.resolve({code:Te.SUCCESS,data:t})},t.prototype.getTopUltraGroupList=function(){if(!this._isUltraGroupListExist)return Promise.resolve({code:Te.METHOD_NOT_AVAILABLE});var e=Object.values(this._ultraGroupMap),t=[];return e.forEach((function(e){!0===e.isTop&&t.push({conversationType:Y.ULTRA_GROUP,targetId:e.targetId,channelId:e.channelId})})),Promise.resolve({code:Te.SUCCESS,data:t})},t.prototype.getUltraGroupUnreadMentionedCountByTargetId=function(e){if(!this._isUltraGroupListExist)return Promise.resolve({code:Te.METHOD_NOT_AVAILABLE});var t=0;for(var n in this._ultraGroupMap)n.match(/_.*/g)[0].substring(1)===e&&(t+=this._ultraGroupMap[n].unreadMentionedCount);return Promise.resolve({code:Te.SUCCESS,data:t})},t.prototype.clearUltraUnreadcount=function(e,t){return void 0===t&&(t=""),x(this,void 0,void 0,(function(){var n,i,r,o,s;return P(this,(function(a){switch(a.label){case 0:return this._isUltraGroupListExist?this._channel?this._status!==Re.CONNECTED?[2,Te.RC_NET_UNAVAILABLE]:(n=Date.now(),i=this._channel.codec.encodeClearUnreadCount({conversationType:Y.ULTRA_GROUP,targetId:e,channelId:t},{timestamp:n}),(r=new wr(Nr[Nr.updUgRTime],i,this.currentUserId)).setHeaderQos(Ze.AT_LEAST_ONCE),[4,this._channel.send(r)]):[2,Te.RC_NET_CHANNEL_INVALID]:[2,Promise.resolve(Te.METHOD_NOT_AVAILABLE)];case 1:return(o=a.sent().code)===Te.SUCCESS&&(s=this._ultraGroupMap[t+"_"+e])&&(s.unreadMessageCount=0,s.unreadMentionedCount=0,s.lastReadTime=n),[2,o]}}))}))},t.prototype._getUltraGroupList=function(e){return x(this,void 0,void 0,(function(){var t,n,i,r,o,s,a,c,l,u,d,h,p,f=this;return P(this,(function(g){switch(g.label){case 0:return this._channel&&this._status===Re.CONNECTED?(t=this._channel.codec.encodeUltraGroup(e,!1),n=new Mr(Nr[Nr.pullUgSes],t,this.currentUserId),[4,this._channel.send(n,qt,{currentUserId:this.currentUserId,conversationType:Y.ULTRA_GROUP})]):[2];case 1:return i=g.sent(),r=i.code,o=i.data,r===Te.SUCCESS&&o?(a=(null==o?void 0:o.list)||[],c=null==o?void 0:o.isFinished,a.forEach((function(e){e.notificationStatus=Me.CLOSE,e.isTop=!1,f._ultraGroupMap[e.channelId+"_"+e.targetId]=e})),!1!==c?[3,2]:(l=a.length>0&&a[a.length-1].versionTime||0,this._getUltraGroupList(l),[3,4])):(ve.warn("pull super conversation  failed, code:",r,", data:",o,"retrying..."),s=setTimeout((function(){f._firstPullUltraGroupTime=e,f._getUltraGroupList(e),clearTimeout(s)}),3e3),[2]);case 2:return[4,this.pullConversationStatus(this._firstPullUltraGroupTime)];case 3:u=g.sent(),d=u.code,h=u.data,d!==Te.SUCCESS&&ve.warn("pullConversationStatus fail code: "+d+", data: "+h),p=Object.values(this._ultraGroupMap),p=yo(p),this._isUltraGroupListExist=!0,this._watcher.ultraGroupEnable(Rt(p)),0===this._firstPullUltraGroupTime&&this._syncUltraMsg(this._lastSyncUltraMsgTimeStamp),g.label=4;case 4:return[2]}}))}))},t.prototype._startUltraSyncInterval=function(){var e=this,t=function(){e._ultraGroupTimer=setTimeout((function(){Date.now()-e._lastSyncUltraMsgLocalTimeStamp>=18e4&&e._syncUltraMsg(e._lastSyncUltraMsgTimeStamp),e._stopUltraSyncInterval(),t()}),3e4)};this._lastSyncUltraMsgLocalTimeStamp=Date.now(),this._syncUltraMsg(0),t()},t.prototype._stopUltraSyncInterval=function(){-1!==this._ultraGroupTimer&&(clearTimeout(this._ultraGroupTimer),this._ultraGroupTimer=-1)},t.prototype._syncUltraMsg=function(e){var t;return x(this,void 0,void 0,(function(){var n,i,r,o,s,a,c,l,u,d,h,p,f=this;return P(this,(function(g){switch(g.label){case 0:return this._channel&&this._status===Re.CONNECTED?this._isUltraPulling?[2]:(ve.info("start pull ultra msg, time: "+e),this._isUltraPulling=!0,n=this._channel.codec.encodeSuperSyncMsg(e),i=new Mr(Nr[Nr.pullUgMsg],n,this.currentUserId),[4,this._channel.send(i,Ut,{currentUserId:this.currentUserId,conversation:{conversationType:Y.ULTRA_GROUP}})]):[2];case 1:if(r=g.sent(),o=r.code,s=r.data,ve.info("end pull ultra msg, code: "+o+", syncTime: "+(null==s?void 0:s.syncTime)+", count: "+(null===(t=null==s?void 0:s.list)||void 0===t?void 0:t.length)),this._lastSyncUltraMsgLocalTimeStamp=Date.now(),o!==Te.SUCCESS||!s)return ve.warn("sync super  message  failed, code:",o,", data:",s),this._isUltraPulling=!1,[2];if(this._isUltraPulling=!1,a=s.list,c=s.syncTime,l=s.finished,!this._isUltraGroupListExist)return ve.info("init getUltraGroupList"),this._firstPullUltraGroupTime=0,this._getUltraGroupList(0),this._lastSyncUltraMsgTimeStamp=c,[2];for(p in u={},d=[],a.forEach((function(e){var t,n,i,r=e.targetId,o=e.content,s=e.messageType,a=e.messageUId,l=e.channelId,h=e.isCounted;if(f._ultraMsgMap[a])delete f._ultraMsgMap[a];else{var p=0;((null===(t=null==o?void 0:o.mentionedInfo)||void 0===t?void 0:t.type)===Pe.ALL||(null===(i=null===(n=null==o?void 0:o.mentionedInfo)||void 0===n?void 0:n.userIdList)||void 0===i?void 0:i.includes(f.currentUserId)))&&(p=1);var g=f._ultraGroupMap[l+"_"+r];if(g)h&&(s===Oe.RECALL?g.unreadMessageCount>0&&(g.unreadMessageCount-=1):(g.unreadMessageCount+=1,g.unreadMentionedCount+=p)),g.versionTime=c,g.latestMessage=e,u[l+"_"+r]=g;else{var m={conversationType:Y.ULTRA_GROUP,targetId:r,channelId:l,unreadMessageCount:1,unreadMentionedCount:p,versionTime:c,latestMessage:e,notificationStatus:Me.CLOSE,isTop:!1};f._ultraGroupMap[l+"_"+r]=m,u[l+"_"+r]=m}d.push(e)}})),Object.keys(u).length>0&&(ve.info("notice ultragroups"),h=Object.values(u),h=yo(h),this._watcher.conversation(Rt(h))),ve.info("notice ultragroup message"),this._watcher.batchMessage(d),this._ultraGroupTimeQue=this._ultraGroupTimeQue.filter((function(e){return e>c})),this._ultraMsgMap)this._ultraMsgMap[p]<c&&delete this._ultraMsgMap[p];return!1===l?this._syncUltraMsg(c):a&&a.length>0&&(this._lastSyncUltraMsgTimeStamp=c),this._ultraGroupTimeQue.length>0&&this._syncUltraMsg(this._lastSyncUltraMsgTimeStamp),[2]}}))}))},t.prototype.sendUltraMessage=function(e,t){return x(this,void 0,void 0,(function(){var n,i,r,o,s,a,c,l,u,d;return P(this,(function(h){switch(h.label){case 0:return this._channel?this._status!==Re.CONNECTED?[2,{code:Te.RC_NET_UNAVAILABLE}]:("RC:SRSMsg"===t.messageType&&ve.warn("ultra group -> direction message convert to message"),t=this._handleMsgProperties(t,!0),n=this._channel.codec.encodeUpMsg({conversationType:Y.ULTRA_GROUP,targetId:e},t),(i=new wr(Nr[Nr.ugMsg],n,e)).setHeaderQos(Ze.AT_LEAST_ONCE),r=Date.now()-this._localConnectedTime+this._connectedTime,o=vo(Y.ULTRA_GROUP,e,M({},t),"",r,this.currentUserId),[4,this._channel.send(i)]):[2,{code:Te.RC_NET_CHANNEL_INVALID}];case 1:return s=h.sent(),a=s.code,c=s.data,a!==Te.SUCCESS||(l=c,o.sentTime=l.timestamp,o.messageUId=l.messageUId,this._ultraMsgMap[l.messageUId]=l.timestamp,u=t.channelId||"",(d=this._ultraGroupMap[u+"_"+e])?d.latestMessage=o:(d={conversationType:Y.ULTRA_GROUP,targetId:e,channelId:u,unreadMessageCount:0,unreadMentionedCount:0,versionTime:o.sentTime,latestMessage:o,notificationStatus:Me.CLOSE,isTop:!1},this._ultraGroupMap[u+"_"+e]=d),this._watcher.conversation(Rt([d]))),[2,{code:a,data:o}]}}))}))},t.prototype.sendUltraGroupTypingStatus=function(e,t){return x(this,void 0,void 0,(function(){var n,i,r,o,s,a;return P(this,(function(c){switch(c.label){case 0:return this._channel?this._status!==Re.CONNECTED?[2,{code:Te.RC_NET_UNAVAILABLE}]:(n=e.conversationType,i=e.channelId,r=e.targetId,o=this._channel.codec.encodeOperateStatus(r,n,i||"",t||0),(s=new wr(Nr[Nr.operate],o,r)).setHeaderQos(Ze.AT_LEAST_ONCE),[4,this._channel.send(s)]):[2,{code:Te.RC_NET_CHANNEL_INVALID}];case 1:return(a=c.sent().code)!==Te.SUCCESS?[2,{code:a,msg:Te[a]}]:[2,{code:a}]}}))}))},t.prototype.getUltraGroupMessageListByMessageUId=function(e){return x(this,void 0,void 0,(function(){var t,n,i,r,o,s,a;return P(this,(function(c){switch(c.label){case 0:return this._channel?this._status!==Re.CONNECTED?[2,{code:Te.RC_NET_UNAVAILABLE}]:e.messages&&e.messages.length<1||e.messages&&e.messages.length>20?[2,{code:Te.MSG_LIMIT_ERROR}]:(t={},e.messages.forEach((function(e){t[e.messageUId]=void 0})),n=this._channel.codec.encodeMsgQuery(e),(i=new Mr(Nr[Nr.qryMsg],n,this.currentUserId)).setHeaderQos(Ze.AT_LEAST_ONCE),[4,this._channel.send(i,di)]):[2,{code:Te.RC_NET_CHANNEL_INVALID}];case 1:return r=c.sent(),o=r.code,s=r.data,o!==Te.SUCCESS?[2,{code:o,msg:Te[o]}]:(a=(s||{}).list,Array.isArray(a)&&a.forEach((function(e){var n=e.messageUId;t[n]=e})),[2,{code:0,data:t}])}}))}))},t.prototype._pullOperateStatusNotify=function(e){if(this._channel){var t=this._channel.codec.decodeByPBName(e.data,pi),n=t.conversationType,i=t.info,r=t.summary;ve.info("s_opNtf -> type: "+n+", info: "+i+", summary: "+r),this._watcher.operateStatus(t)}},t.prototype.expandUltraMessage=function(e){return x(this,void 0,void 0,(function(){var t,n,i,r,o,s;return P(this,(function(a){switch(a.label){case 0:return this._channel?this._status!==Re.CONNECTED?[2,{code:Te.RC_NET_UNAVAILABLE}]:(t=this._channel.codec.encodeExpandUltraMessage(e,this.currentUserId),(n=new wr(Nr[Nr.upMsgEx],t,e.targetId)).setHeaderQos(Ze.AT_LEAST_ONCE),[4,this._channel.send(n)]):[2,{code:Te.RC_NET_CHANNEL_INVALID}];case 1:return i=a.sent(),r=i.code,o=i.data,r!==Te.SUCCESS?[2,{code:r,msg:Te[r]}]:(s=o,this._ultraMsgMap[s.messageUId]=s.timestamp,[2,{code:r}])}}))}))},t.prototype.modifyMessage=function(e){return x(this,void 0,void 0,(function(){var t,n,i,r,o,s;return P(this,(function(a){switch(a.label){case 0:return this._channel?this._status!==Re.CONNECTED?[2,{code:Te.RC_NET_UNAVAILABLE}]:(t=this._channel.codec.encodemodifyMessage(e,this.currentUserId),(n=new wr(Nr[Nr.modifyMsg],t,e.targetId)).setHeaderQos(Ze.AT_LEAST_ONCE),[4,this._channel.send(n)]):[2,{code:Te.RC_NET_CHANNEL_INVALID}];case 1:return i=a.sent(),r=i.code,o=i.data,r!==Te.SUCCESS?[2,{code:r,msg:Te[r]}]:(s=o,this._ultraMsgMap[s.messageUId]=s.timestamp,[2,{code:r}])}}))}))},t.prototype._pullUltraChangeMessageList=function(e){return x(this,void 0,void 0,(function(){var t,n,i,r,o,s,a,c,l,u,d,h,p,f,g,m,_,v=this;return P(this,(function(y){switch(y.label){case 0:return this._channel?this._status!==Re.CONNECTED||this._isPullingUltraChangeMessage?[2]:(this._isPullingUltraChangeMessage=!0,t=this._channel.codec.encodeQueryMsgChange(e),(n=new wr(Nr[Nr.qryMsgChange],t,this.currentUserId)).setHeaderQos(Ze.AT_LEAST_ONCE),[4,this._channel.send(n,ci)]):[2];case 1:if(i=y.sent(),r=i.code,o=i.data,this._isPullingUltraChangeMessage=!1,r!==Te.SUCCESS)return[2];for(f in a=(s=o||{}).hasNext,c=s.list,l=(null==o?void 0:o.syncTime)||0,u=[],d={},Array.isArray(c)&&c.forEach((function(e){var t=e,n=t.targetId,i=t.conversationType,r=t.sendTime,o=t.messageUId,s=t.changeType,a=t.operatorId,c=e.channelId||"",l=i+"_"+n,h=o+"_"+c+"_"+r,p=d[l];if(p)p.add(h);else{var f=new Set([h]);d[l]=f}3!==s?v._ultraMsgChangeMap[o]=s:u.push({targetId:n,conversationType:i,sendTime:r,messageUId:o,senderUserId:a,channelId:c})})),Array.isArray(u)&&u.length>0&&this._watcher.ultraGroupMessageRecalled(u),h=function(e){var t=e.split("_"),n=t.shift(),i=t.join("_"),r=d[e],o=[];r.forEach((function(e){var t=e.split("_"),n=t[0],i=t[1],r=t[2];o.push({sendTime:Number(r),messageUId:n,channelId:i})}));var s={targetId:i,conversationType:Number(n),messages:o};p._pullUltraMessageList(s)},p=this,d)h(f);for(m in g=this._pullUltraChangeMessageQue.filter((function(e){return e>l})),this._pullUltraChangeMessageQue.length=0,(_=this._pullUltraChangeMessageQue).push.apply(_,g),this._ultraMsgMap)this._ultraMsgMap[m]<l&&delete this._ultraMsgMap[m];return a?this._pullUltraChangeMessageList(l):this._lastPullingUltraChangeMessageTime=l,[2]}}))}))},t.prototype._pullUltraMessageList=function(e){return x(this,void 0,void 0,(function(){var t,n,i,r,o,s,a,c,l=this;return P(this,(function(u){switch(u.label){case 0:return this._channel?this._status!==Re.CONNECTED?[2,{code:Te.RC_NET_UNAVAILABLE}]:(t=this._channel.codec.encodeMsgQuery(e),(n=new Mr(Nr[Nr.qryMsg],t,this.currentUserId)).setHeaderQos(Ze.AT_LEAST_ONCE),[4,this._channel.send(n,di)]):[2,{code:Te.RC_NET_CHANNEL_INVALID}];case 1:return i=u.sent(),r=i.code,o=i.data,r!==Te.SUCCESS?[2,{code:r,msg:Te[r]}]:(s=(o||{}).list,a=[],c=[],Array.isArray(s)&&s.forEach((function(e){var t=e.targetId,n=e.channelId,i=e.messageUId,r=l._ultraGroupMap[n+"_"+t];r&&r.latestMessage.messageUId===e.messageUId&&(r.latestMessage=e);var o=l._ultraMsgChangeMap[i+""];1===o?a.push(e):2===o&&c.push(e)})),a.length>0&&this._watcher.ultraGroupMessageExpansionUpdated(a||[]),c.length>0&&this._watcher.ultraGroupMessageModified(c||[]),[2])}}))}))},t.prototype.getUltraHistoryMsg=function(e,t){return x(this,void 0,void 0,(function(){var n,i,r,o,s;return P(this,(function(a){switch(a.label){case 0:return this._channel?this._status!==Re.CONNECTED?[2,{code:Te.RC_NET_UNAVAILABLE}]:(n=this._channel.codec.encodeGetHistoryMsg(e,t),i=new Mr(Nr[Nr.qryUgMsg],n,this.currentUserId),[4,this._channel.send(i,Kt,{currentUserId:this.currentUserId,conversation:{conversationType:Y.ULTRA_GROUP,targetId:e}})]):[2,{code:Te.RC_NET_CHANNEL_INVALID}];case 1:return r=a.sent(),o=r.code,s=r.data,o===Te.SUCCESS&&s?[2,{code:o,data:s}]:(ve.warn("get super history message  failed, code:",o,", data:",s),[2,{code:o}])}}))}))},t.prototype.searchUltraGroupMessages=function(e){return x(this,void 0,void 0,(function(){return P(this,(function(e){return this._channel?this._status!==Re.CONNECTED?[2,{code:Te.RC_NET_UNAVAILABLE}]:[2,{code:Te.SUCCESS}]:[2,{code:Te.RC_NET_CHANNEL_INVALID}]}))}))},t.prototype.getAllConversationState=function(){return Promise.resolve({code:Te.SUCCESS,data:this._conversationManager.getAllConversationState()})},t.prototype.joinRTCRoom=function(e,t,n,i,r,o){return x(this,void 0,void 0,(function(){var s,a;return P(this,(function(c){return this._channel?(s=this._channel.codec.encodeJoinRTCRoom(t,n,i,r,o),a=new Mr(Nr[Nr.rtcRJoin_data],s,e),[2,this._channel.send(a,sn)]):[2,{code:Te.RC_NET_CHANNEL_INVALID}]}))}))},t.prototype.quitRTCRoom=function(e){return x(this,void 0,void 0,(function(){var t,n;return P(this,(function(i){switch(i.label){case 0:return this._channel?(t=this._channel.codec.encodeQuitRTCRoom(),n=new Mr(Nr[Nr.rtcRExit],t,e),[4,this._channel.send(n)]):[2,Te.RC_NET_CHANNEL_INVALID];case 1:return[2,i.sent().code]}}))}))},t.prototype.rtcPing=function(e,t,n){return x(this,void 0,void 0,(function(){var i,r;return P(this,(function(o){switch(o.label){case 0:return this._channel?(i=this._channel.codec.encodeJoinRTCRoom(t,n),r=new Mr(Nr[Nr.rtcPing],i,e),[4,this._channel.send(r)]):[2,Te.RC_NET_CHANNEL_INVALID];case 1:return[2,o.sent().code]}}))}))},t.prototype.getRTCRoomInfo=function(e){return x(this,void 0,void 0,(function(){var t,n;return P(this,(function(i){return this._channel?(t=this._channel.codec.encodeGetRTCRoomInfo(),n=new Mr(Nr[Nr.rtcRInfo],t,e),[2,this._channel.send(n,vn)]):[2,{code:Te.RC_NET_CHANNEL_INVALID}]}))}))},t.prototype.getRTCUserInfoList=function(e){return x(this,void 0,void 0,(function(){var t,n,i,r,o;return P(this,(function(s){switch(s.label){case 0:return this._channel?(t=this._channel.codec.encodeGetRTCRoomInfo(),n=new Mr(Nr[Nr.rtcUData],t,e),[4,this._channel.send(n,sn)]):[2,{code:Te.RC_NET_CHANNEL_INVALID}];case 1:return i=s.sent(),r=i.code,o=i.data,[2,{code:r,data:o?{users:o.users}:o}]}}))}))},t.prototype.setRTCUserInfo=function(e,t,n){return x(this,void 0,void 0,(function(){var i,r;return P(this,(function(o){switch(o.label){case 0:return this._channel?(i=this._channel.codec.encodeSetRTCUserInfo(t,n),r=new Mr(Nr[Nr.rtcUPut],i,e),[4,this._channel.send(r)]):[2,Te.RC_NET_CHANNEL_INVALID];case 1:return[2,o.sent().code]}}))}))},t.prototype.removeRTCUserInfo=function(e,t){return x(this,void 0,void 0,(function(){var n,i;return P(this,(function(r){switch(r.label){case 0:return this._channel?(n=this._channel.codec.encodeRemoveRTCUserInfo(t),i=new wr(Nr[Nr.rtcUDel],n,e),[4,this._channel.send(i)]):[2,Te.RC_NET_CHANNEL_INVALID];case 1:return[2,r.sent().code]}}))}))},t.prototype.setRTCData=function(e,t,n,i,r,o){return x(this,void 0,void 0,(function(){var s,a;return P(this,(function(c){switch(c.label){case 0:return this._channel?(s=this._channel.codec.encodeSetRTCData(t,n,i,r,o),a=new wr(Nr[Nr.rtcSetData],s,e),[4,this._channel.send(a)]):[2,Te.RC_NET_CHANNEL_INVALID];case 1:return[2,c.sent().code]}}))}))},t.prototype.setRTCTotalRes=function(e,t,n,i,r){return x(this,void 0,void 0,(function(){var o,s;return P(this,(function(a){switch(a.label){case 0:return this._channel?(o=this._channel.codec.encodeUserSetRTCData(t,n,i,r),s=new Mr(Nr[Nr.userSetData],o,e),[4,this._channel.send(s)]):[2,Te.RC_NET_CHANNEL_INVALID];case 1:return[2,a.sent().code]}}))}))},t.prototype.setRTCCDNUris=function(e,t,n){return x(this,void 0,void 0,(function(){var i,r;return P(this,(function(o){switch(o.label){case 0:return this._channel?(i=this._channel.codec.encodeUserSetRTCCDNUris(t,n),r=new Mr(Nr[Nr.userSetData],i,e),[4,this._channel.send(r)]):[2,Te.RC_NET_CHANNEL_INVALID];case 1:return[2,o.sent().code]}}))}))},t.prototype.getRTCData=function(e,t,n,i){if(!this._channel)return Promise.resolve({code:Te.RC_NET_CHANNEL_INVALID});var r=this._channel.codec.encodeGetRTCData(t,n,i),o=new Mr(Nr[Nr.rtcQryData],r,e);return this._channel.send(o,fn)},t.prototype.removeRTCData=function(e,t,n,i,r){return x(this,void 0,void 0,(function(){var o,s;return P(this,(function(a){switch(a.label){case 0:return this._channel?(o=this._channel.codec.encodeRemoveRTCData(t,n,i,r),s=new wr(Nr[Nr.rtcDelData],o,e),[4,this._channel.send(s)]):[2,Te.RC_NET_CHANNEL_INVALID];case 1:return[2,a.sent().code]}}))}))},t.prototype.setRTCOutData=function(e,t,n,i){throw new Error("JSEngine's method not implemented.")},t.prototype.getRTCOutData=function(e,t){throw new Error("JSEngine's method not implemented.")},t.prototype.getRTCToken=function(e,t,n){return x(this,void 0,void 0,(function(){var i,r;return P(this,(function(o){return this._channel?(i=this._channel.codec.encodeJoinRTCRoom(t,n),r=new Mr(Nr[Nr.rtcToken],i,e),[2,this._channel.send(r,pn)]):[2,{code:Te.RC_NET_CHANNEL_INVALID}]}))}))},t.prototype.setRTCState=function(e,t){return x(this,void 0,void 0,(function(){var n,i;return P(this,(function(r){switch(r.label){case 0:return this._channel?(n=this._channel.codec.encodeSetRTCState(t),i=new Mr(Nr[Nr.rtcUserState],n,e),[4,this._channel.send(i)]):[2,Te.RC_NET_CHANNEL_INVALID];case 1:return[2,r.sent().code]}}))}))},t.prototype.getRTCUserInfo=function(e){return x(this,void 0,void 0,(function(){return P(this,(function(e){throw new Error("Method not implemented.")}))}))},t.prototype.getRTCUserList=function(e){if(!this._channel)return Promise.resolve({code:Te.RC_NET_CHANNEL_INVALID});var t=this._channel.codec.encodeGetRTCRoomInfo(),n=new Mr(Nr[Nr.rtcUList],t,e);return this._channel.send(n,sn)},t.prototype.joinLivingRoomAsAudience=function(e,t,n){return void 0===t&&(t=Fe.LIVE),x(this,void 0,void 0,(function(){var i,r,o,s,a,c,l,u;return P(this,(function(d){switch(d.label){case 0:return this._channel?(i=this._channel.codec.encodeJoinRTCRoom(t,n),r=new Mr(Nr[Nr.viewerJoinR],i,e),[4,this._channel.send(r,Ei)]):[2,{code:Te.RC_NET_CHANNEL_INVALID}];case 1:return o=d.sent(),s=o.code,a=o.data,s!==Te.SUCCESS?[2,{code:s}]:(l=(c=a).rtcToken,u=c.entries,[2,{code:s,data:{token:l,kvEntries:u}}])}}))}))},t.prototype.quitLivingRoomAsAudience=function(e){return x(this,void 0,void 0,(function(){var t,n,i;return P(this,(function(r){switch(r.label){case 0:return this._channel?(t=this._channel.codec.encodeQuitRTCRoom(),n=new Mr(Nr[Nr.viewerExitR],t,e),[4,this._channel.send(n)]):[2,Te.RC_NET_CHANNEL_INVALID];case 1:return i=r.sent().code,this._rtcKVManager.reset(),[2,i]}}))}))},t.prototype.rtcIdentityChange=function(e,t,n){return x(this,void 0,void 0,(function(){var i,r,o,s,a;return P(this,(function(c){switch(c.label){case 0:return this._channel?(i=this._channel.codec.encodeIdentityChangeInfo(t,n),r=new Mr(Nr[Nr.rtcIdentityChange],i,e),[4,this._channel.send(r,sn)]):[2,{code:Te.RC_NET_CHANNEL_INVALID}];case 1:return o=c.sent(),s=o.code,a=o.data,s!==Te.SUCCESS?[2,{code:s}]:[2,{code:s,data:a}]}}))}))},t.prototype.pullRTCRoomEntry=function(e,t){return x(this,void 0,void 0,(function(){var t,n,i,r,o,s,a,c,l;return P(this,(function(u){switch(u.label){case 0:return n=(t=this)._channel,i=t.currentUserId,n?(ve.info("audience in room start pull KV"),r=n.codec.encodePullRTCRoomKV(e,0),o=new Mr(Nr[Nr.rtcPullKv],r,i),[4,n.send(o,vi)]):[2,{code:Te.RC_NET_CHANNEL_INVALID}];case 1:return s=u.sent(),a=s.code,c=s.data,ve.info("audience in room end pull KV, code: "+a+", data: "+JSON.stringify(c||{})),a===Te.SUCCESS?(l=c.kvEntries,this._watcher.onRTCDataChange(l,e),[2,{code:a,data:c}]):[2,{code:a}]}}))}))},t.prototype.getRTCJoinedUserInfo=function(e){return x(this,void 0,void 0,(function(){var t,n,i,r,o,s,a,c;return P(this,(function(l){switch(l.label){case 0:return n=(t=this)._channel,i=t.currentUserId,n?(r=n.codec.encodeQueryUserJoinedInfo(e),o=new Mr(Nr[Nr.rtcQueryJoined],r,i),[4,n.send(o,Ci)]):[2,{code:Te.RC_NET_CHANNEL_INVALID}];case 1:return s=l.sent(),a=s.code,c=s.data,a===Te.SUCCESS?[2,{code:a,data:c}]:[2,{code:a}]}}))}))},t.prototype.getDeviceId=function(){return mo(this.runtime)},t.prototype.requestRoomPK=function(e){return x(this,void 0,void 0,(function(){var t,n,i;return P(this,(function(r){switch(r.label){case 0:return this._channel?(t=this._channel.codec.encodeRequestRoomPK(e),n=new Mr(Nr[Nr.rtcInvite],t,e.roomId),[4,this._channel.send(n)]):[2,Te.RC_NET_CHANNEL_INVALID];case 1:return i=r.sent().code,this._rtcKVManager.reset(),[2,i]}}))}))},t.prototype.cancelRoomPK=function(e){return x(this,void 0,void 0,(function(){var t,n,i;return P(this,(function(r){switch(r.label){case 0:return this._channel?(t=this._channel.codec.encodeCancelRoomPK(e),n=new Mr(Nr[Nr.rtcCancelInvite],t,e.roomId),[4,this._channel.send(n)]):[2,Te.RC_NET_CHANNEL_INVALID];case 1:return i=r.sent().code,this._rtcKVManager.reset(),[2,i]}}))}))},t.prototype.responseRoomPK=function(e){return x(this,void 0,void 0,(function(){var t,n,i;return P(this,(function(r){switch(r.label){case 0:return this._channel?(t=this._channel.codec.encodeResponseRoomPK(e),n=new Mr(Nr[Nr.rtcInviteAnswer],t,e.roomId),[4,this._channel.send(n)]):[2,Te.RC_NET_CHANNEL_INVALID];case 1:return i=r.sent().code,this._rtcKVManager.reset(),[2,i]}}))}))},t.prototype.endRoomPK=function(e){return x(this,void 0,void 0,(function(){var t,n,i;return P(this,(function(r){switch(r.label){case 0:return this._channel?(t=this._channel.codec.encodeEndRoomPK(e),n=new Mr(Nr[Nr.rtcEndInvite],t,e.roomId),[4,this._channel.send(n)]):[2,Te.RC_NET_CHANNEL_INVALID];case 1:return i=r.sent().code,this._rtcKVManager.reset(),[2,i]}}))}))},t.prototype.bindRTCRoomForChatroom=function(e){return x(this,void 0,void 0,(function(){var t,n,i,r;return P(this,(function(o){switch(o.label){case 0:return this._channel?(t=e.chatRoomId,n=this._channel.codec.encodebindRTCRoomForChatroom(e),i=new Mr(Nr[Nr.setRtcRoomId],n,t),[4,this._channel.send(i)]):[2,Te.RC_NET_CHANNEL_INVALID];case 1:return r=o.sent(),[2,r.code]}}))}))},t.prototype.callExtra=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return Promise.resolve({code:Te.EXTRA_METHOD_UNDEFINED})},t.prototype.getConversationListWithAllChannel=function(){throw new Error("Method not implemented.")},t.prototype.getConversationListWithAllChannelByPage=function(e,t){throw new Error("Method not implemented.")},t.prototype.clearConversations=function(){throw new Error("Method not implemented.")},t.prototype.setUserStatusListener=function(e,t){throw new Error("Method not implemented.")},t.prototype.setUserStatus=function(e){throw new Error("Method not implemented.")},t.prototype.subscribeUserStatus=function(e){throw new Error("Method not implemented.")},t.prototype.getUserStatus=function(e){throw new Error("Method not implemented.")},t.prototype.addToBlacklist=function(e){throw new Error("Method not implemented.")},t.prototype.removeFromBlacklist=function(e){throw new Error("Method not implemented.")},t.prototype.getBlacklist=function(){throw new Error("Method not implemented.")},t.prototype.getBlacklistStatus=function(e){throw new Error("Method not implemented.")},t.prototype.insertMessage=function(e,t,n){throw new Error("Method not implemented.")},t.prototype.deleteMessages=function(e){throw new Error("Method not implemented.")},t.prototype.deleteMessagesByTimestamp=function(e,t,n,i,r){throw new Error("Method not implemented.")},t.prototype.clearMessages=function(e,t,n){throw new Error("Method not implemented.")},t.prototype.getMessage=function(e){throw new Error("Method not implemented.")},t.prototype.setMessageContent=function(e,t,n){throw new Error("Method not implemented.")},t.prototype.setMessageSearchField=function(e,t,n){throw new Error("Method not implemented.")},t.prototype.searchConversationByContent=function(e,t,n,i){throw new Error("Method not implemented.")},t.prototype.searchMessageByContent=function(e,t,n,i,r,o){throw new Error("Method not implemented.")},t.prototype.getUnreadMentionedMessages=function(e,t){throw new Error("Method not implemented.")},t.prototype.setMessageSentStatus=function(e,t){throw new Error("Method not implemented.")},t.prototype.setMessageReceivedStatus=function(e,t){throw new Error("Method not implemented.")},t.prototype.clearUnreadCountByTimestamp=function(e,t,n,i){throw new Error("Method not implemented.")},t.prototype.getConversationNotificationStatus=function(e,t,n){var i=this._conversationManager.get(e,t,n);return i?Promise.resolve({code:Te.SUCCESS,data:i.notificationStatus}):Promise.resolve({code:Te.CONVER_GET_ERROR})},t.prototype.getRemoteHistoryMessages=function(e,t,n,i,r,o){return this.getHistoryMessage(e,t,n,i,r,o)},t}(Hr),Eo=function(){function e(e){this._context=e}return e.prototype.__getContext=function(){return this._context},e.prototype.getNaviInfo=function(){return this._context.getInfoFromCache()},e.prototype.getCoreVersion=function(){return this._context.coreVersion},e.prototype.getAPIVersion=function(){return this._context.apiVersion},e.prototype.getAppkey=function(){return this._context.appkey},e.prototype.getCurrentId=function(){return this._context.getCurrentUserId()},e.prototype.getConnectionStatus=function(){return this._context.getConnectionStatus()},e.prototype.getDeviceId=function(){return this._context.getDeviceId()},e.prototype.sendMessage=function(e,t,n){return this._context.sendMessage(e,t,n)},e.prototype.registerMessageType=function(e,t,n,i){void 0===i&&(i=[]),this._context.registerMessageType(e,t,n,i)},e.prototype.getServerTime=function(){return this._context.getServerTime()},e.prototype.getRTCJoinedUserInfo=function(e){return this._context.getRTCJoinedUserInfo(e)},e}(),bo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return k(t,e),t.prototype.getNaviInfo=function(){return this._context.getInfoFromCache()},t.prototype.joinRTCRoom=function(e,t,n,i,r,o){return this._context.joinRTCRoom(e,t,n,i,r,o)},t.prototype.quitRTCRoom=function(e){return this._context.quitRTCRoom(e)},t.prototype.rtcPing=function(e,t,n){return this._context.rtcPing(e,t,n)},t.prototype.getRTCRoomInfo=function(e){return this._context.getRTCRoomInfo(e)},t.prototype.getRTCUserInfoList=function(e){return this._context.getRTCUserInfoList(e)},t.prototype.getRTCUserInfo=function(e){return this._context.getRTCUserInfo(e)},t.prototype.setRTCUserInfo=function(e,t,n){return this._context.setRTCUserInfo(e,t,n)},t.prototype.removeRTCUserInfo=function(e,t){return this._context.removeRTCUserInfo(e,t)},t.prototype.setRTCData=function(e,t,n,i,r,o){return this._context.setRTCData(e,t,n,i,r,o)},t.prototype.setRTCTotalRes=function(e,t,n,i,r){return this._context.setRTCTotalRes(e,t,n,i,r)},t.prototype.setRTCCDNUris=function(e,t,n){return this._context.setRTCCDNUris(e,t,n)},t.prototype.getRTCData=function(e,t,n,i){return this._context.getRTCData(e,t,n,i)},t.prototype.removeRTCData=function(e,t,n,i,r){return this._context.removeRTCData(e,t,n,i,r)},t.prototype.setRTCOutData=function(e,t,n,i){return this._context.setRTCOutData(e,t,n,i)},t.prototype.getRTCOutData=function(e,t){return this._context.getRTCOutData(e,t)},t.prototype.getRTCToken=function(e,t,n){return this._context.getRTCToken(e,t,n)},t.prototype.setRTCState=function(e,t){return this._context.setRTCState(e,t)},t.prototype.getRTCUserList=function(e){return this._context.getRTCUserList(e)},t.prototype.joinLivingRoomAsAudience=function(e,t,n){return this._context.joinLivingRoomAsAudience(e,t,n)},t.prototype.quitLivingRoomAsAudience=function(e){return this._context.quitLivingRoomAsAudience(e)},t.prototype.rtcIdentityChange=function(e,t,n){return this._context.rtcIdentityChange(e,t,n)},t.prototype.requestRoomPK=function(e){return this._context.requestRoomPK(e)},t.prototype.cancelRoomPK=function(e){return this._context.cancelRoomPK(e)},t.prototype.responseRoomPK=function(e){return this._context.responseRoomPK(e)},t.prototype.endRoomPK=function(e){return this._context.endRoomPK(e)},t}(Eo),To=function(){function e(){}return e.compress=function(e){for(var t=this,n={},i=0;i<e.length-1;i++){var r=e.charAt(i)+e.charAt(i+1);n.hasOwnProperty(r)?n[r].push(i):n[r]=[i]}for(var o=[],s=[],a=function(){if(s.length>0){var e=s.join("");if(s=[],e.length>26){var n=t.numberEncode(e.length),i=String.fromCharCode(t.dataType.NormalExt|n.length);o.push(i+n)}else{var r=String.fromCharCode(t.dataType.Normal|e.length);o.push(r)}o.push(e)}},c=0;c<e.length;){var l=t.indexOf(n,e,c);if(l.length<2)s.push(e.charAt(c++));else if(l.length<4)s.push(e.substr(c,l.length)),c+=l.length;else{var u=t.numberEncode(c-l.offset),d=t.numberEncode(l.length);if(u.length+d.length>=l.length)s.push(e.substr(c,l.length)),c+=l.length;else{a();var h=String.fromCharCode(t.dataType.Compressed|u.length<<2|d.length);o.push(h+u+d),c+=l.length}}}a();var p=t.numberEncode(e.length),f=String.fromCharCode(t.dataType.Tail|p.length);return o.push(f+p),o.join("")},e.uncompress=function(e){var t=this,n=0,i="";e:do{var r=e.charCodeAt(n++),o=r&t.dataType.Mark,s=15&r,a=void 0;switch(o){case t.dataType.Compressed:var c=s>>2,l=3&s;if(0===c||0===l)throw new Error("Data parsing error,at "+n);var u=t.numberDecode(e.substr(n,c)),d=t.numberDecode(e.substr(n+=c,l));if((u=i.length-u)+d>i.length)throw new Error("Data parsing error,at "+n);n+=l,i+=i.substr(u,d);break;case t.dataType.Tail:if((a=t.numberDecode(e.substr(n,s)))!==i.length)throw console.log(i.length),console.log(a),new Error("Data parsing error,at "+n);n+=s;break e;case t.dataType.NormalExt:a=t.numberDecode(e.substr(n,s)),i+=e.substr(n+=s,a),n+=a;break;case t.dataType.Normal:i+=e.substr(n,s),n+=s;break;case t.dataType.Mark:if(s>10)throw new Error("Data parsing error,at "+n);i+=e.substr(n,16+s),n+=16+s;break;default:throw new Error("Data parsing error,at "+n+" header:"+o)}}while(n<e.length);return i},e.indexOf=function(e,t,n){var i={length:0,offset:-1};if(t.length,n>=t.length-1)return i;var r=e[t.charAt(n)+t.charAt(n+1)];if(r[0]===n)return i;for(var o=t.length-n,s=0,a=r.length;s<a;s++){var c=r[s],l=n-c;if(!(l>this.max)){var u=Math.min(o,l);if(u<=i.length)break;if(!(i.length>2&&t.charAt(c+i.length-1)!==t.charAt(n+i.length-1))){for(var d=2,h=d;h<u&&t.charAt(c+h)===t.charAt(n+h);h++)d++;d>=i.length&&(i.length=d,i.offset=c)}}}return i},e.numberEncode=function(e){var t=this,n=[],i=0;do{i=e%t.scale,n.push(t.chars.charAt(i)),e=(e-i)/t.scale}while(e>0);return n.join("")},e.numberDecode=function(e){for(var t=0,n=0,i=e.length-1;i>=0;i--){if(-1===(n=this.chars.indexOf(e.charAt(i))))throw new Error('decode number error, data is "'+e+'"');t=t*this.scale+n}return t},e.dataType={Tail:48,Compressed:64,NormalExt:80,Normal:96,Mark:112},e.chars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",e.scale=e.chars.length,e.max=238327,e}(),So=1,Ro=!1,Io="undefined"!=typeof location&&"https://"===location.protocol?"https://":"http://",wo=function(){function e(e){this.info=e,this.logUrl="logcollection.ronghub.com",this.level=1,this.itv=30,this.times=5,this.deviceId="",this.deviceInfo="",this.logSwitch=0,this.logUrl=e.logPolicy.url||this.logUrl,this.level=e.logPolicy.level||this.level,this.itv=e.logPolicy.itv||this.itv,this.times=e.logPolicy.times||this.times,this.deviceId=mo(e.runtime),this.logSwitch=e.logSwitch;var t=bt(e.runtime);this.deviceInfo=t.type+"|"+t.version+"|"+_e.sessionId,this.startReport()}return e.init=function(t){return Ro=!0,e._instance||(e._instance=new e(t)),e._instance},e.getInstance=function(){return e._instance},e.prototype.startReport=function(){var e=this;if(this.logSwitch&&Ro){var t=this.itv*Math.pow(2,So-1);So<this.times&&So++,setTimeout((function(){e.reportRealtimeLog()}),1e3*t)}},e.prototype.reportRealtimeLog=function(){var e=this,t=_e.realTimeLogList.filter((function(t){return t.level<=e.level}));if(0!==t.length){var n=To.compress(t.map((function(e){return e.content})).join("")),i=""+Io+this.logUrl+"?version="+this.info.version+"&appkey="+this.info.appkey+"&userId="+this.info.userId+"&deviceId="+this.deviceId+"&deviceInfo="+this.deviceInfo+"&platform=Web";this.info.runtime.httpReq({method:"POST",url:i,body:n}).then((function(t){ve.__clearRealTimeLog(),ve.debug("report real-time log success");var n=t.data;n&&(n=JSON.parse(n),e.itv=n.nextTime,e.level=n.level,e.logSwitch=n.logSwitch,So=1),e.startReport()})).catch((function(t){ve.debug("report real-time log error -> "+t),e.startReport()}))}else this.startReport()},e.prototype.reportFullLog=function(e){return x(this,void 0,void 0,(function(){var t,n,i,r,o,s,a,c,l,u,d=this;return P(this,(function(h){switch(h.label){case 0:return t=e.startTime,n=e.endTime,i=e.platform,r=e.logId,o=e.uri,s=W.getInstance(),ve.debug("received report log msg, "+i.toLowerCase(),s),"web"===i.toLowerCase()&&s?t>n?(ve.warn("report error: The start time("+t+") cannot be greater than the end time("+t+")"),[2]):[4,ve.__insertLogIntoDatabase()]:[2];case 1:return h.sent(),[4,s.getRangeData($,"time",t,n)];case 2:return a=(a=h.sent()).filter((function(e){return!e.userId||e.userId===d.info.userId})),c=To.compress(a.map((function(e){return e.content})).join("")||"no data"),l=1,(u=function(){if(!(l>3)&&Ro){var e=o||d.logUrl,t=""+Io+e+"?version="+d.info.version+"&appkey="+d.info.appkey+"&userId="+d.info.userId+"&logId="+r+"&deviceId="+d.deviceId+"&deviceInfo="+d.deviceInfo+"&platform=Web",n=5e3*(l-1);l++,setTimeout((function(){Ro&&d.info.runtime.httpReq({url:t,method:"POST",body:c}).then((function(){ve.debug("report full log success!")})).catch((function(e){u(),ve.warn("report full log error -> "+e)}))}),n)}})(),[2]}}))}))},e.prototype.distroy=function(){So=1,Ro=!1},e}();function Oo(e){return Object.assign({},e)}var ko,Mo=function(){function e(e,t){var n;this._runtime=e,this._token="",this._pluginContextQueue=[],this._pluginInstanseMap={},this.coreVersion="5.2.1",this._versionInfo={},this._typingInfo={},this._isInternalConnected=!1,this._connectionStatus=Re.DISCONNECTED,this._canRedirectConnect=!1,this._watcher={message:void 0,batchMessage:void 0,conversationState:void 0,chatroomState:void 0,connectionState:void 0,rtcInnerWatcher:void 0,expansion:void 0,tag:void 0,conversationTagChanged:void 0,pullFinished:void 0,onConnecting:void 0,onConnected:void 0,onDisconnect:void 0,onSuspend:void 0,readReceiptReceived:void 0,messageReceiptRequest:void 0,messageReceiptResponse:void 0,typingState:void 0,messageBlocked:void 0,ultraGroupEnable:void 0,operateStatus:void 0,ultraGroupMessageExpansionUpdated:void 0,ultraGroupMessageModified:void 0,ultraGroupMessageRecalled:void 0},this._typingInternalTimer=-1,this._typingExpireTime=2e3,this._typingChangedList=[],this.getChatRoomHistoryMessages=this.getChatroomHistoryMessages,this._options=Object.assign({},t),this.appkey=this._options.appkey,this.apiVersion=this._options.apiVersion,this._options.typingExpireTime&&(this._options.typingExpireTime<2e3?this._typingExpireTime=2e3:this._options.typingExpireTime>6e3?this._typingExpireTime=6e3:this._typingExpireTime=this._options.typingExpireTime),this._options.navigators=this._options.navigators.filter((function(e){return/^https?:\/\//.test(e)})),this._options.navigators=this._options.navigators.map((function(e){return e.replace(/\/$/g,"")})),0===this._options.navigators.length&&(n=this._options.navigators).push.apply(n,d);var i={status:this._connectionStatusListener.bind(this),batchMessage:this._batchMessageReceiver.bind(this),chatroom:this._chatroomInfoListener.bind(this),conversation:this._conversationInfoListener.bind(this),expansion:this._expansionInfoListener.bind(this),tag:this._tagListener.bind(this),conversationTag:this._conversationTagListener.bind(this),onRTCDataChange:this._rtcDataChange.bind(this),pullFinished:this._pullFinishedListener.bind(this),ultraGroupEnable:this._ultraGroupEnableListener.bind(this),operateStatus:this._operateStatusListener.bind(this),ultraGroupMessageExpansionUpdated:this._ultraGroupMessageExpansionUpdatedListener.bind(this),ultraGroupMessageModified:this._ultraGroupMessageModifiedListener.bind(this),ultraGroupMessageRecalled:this._ultraGroupMessageRecalledListener.bind(this)};this._engine=Et()?new RCCppEngine(e,i,this._options):new Co(e,i,this._options)}return e.init=function(t,n){return ve.setLogLevel(n.logLevel),ve.setLogStdout(n.logStdout),(n.indexDBSwitch||ae(n.indexDBSwitch))&&W.init(),ve.debug("APIContext.init =>",n.appkey,n.navigators),this._context?(ve.error("Repeat initialize!"),this._context):(ve.warn("RCEngine Commit:","5af4c20ffb161461319532f700e7603c9cd9893c"),this._context=new e(t,n),ve.__insertLogIntoDatabase(),this._context)},e.destroy=function(){this._context&&(this._context._destroy(),this._context=void 0)},e.prototype.install=function(e,t){if(this._pluginInstanseMap[e.tag])return ve.warn("Repeat install plugin: "+e.tag),this._pluginInstanseMap[e.tag];var n="RCRTC"===e.tag?new bo(this):new Eo(this),i=null;try{if(!e.verify(this._runtime))return null;i=e.setup(n,this._runtime,t)}catch(e){ve.error("install plugin error!\n",e)}return["RCRTC","RCCall"].includes(e.tag)&&e.version&&e.name&&(this._versionInfo[e.name]=e.version),i&&this._pluginContextQueue.push(n),i&&(this._pluginInstanseMap[e.tag]=i),i},e.prototype._handleRedirect=function(){return x(this,void 0,void 0,(function(){var e,t=this;return P(this,(function(n){switch(n.label){case 0:return ve.debug("_handleRedirct",this._token),[4,this.connect(this._token,!0)];case 1:return(e=n.sent().code)!==Te.SUCCESS&&this._canRedirectConnect&&(this._handleSuspend(e),setTimeout((function(){t._handleRedirect()}),5e3)),[2]}}))}))},e.prototype._connectionStatusListener=function(e){var t;return x(this,void 0,void 0,(function(){return P(this,(function(n){return e===Re.REDIRECT?(this._canRedirectConnect=!0,this._handleSuspend(e),this._handleRedirect()):e===Re.BLOCKED||e===Re.KICKED_OFFLINE_BY_OTHER_CLIENT||e===Re.DISCONNECT_BY_SERVER?(this._canRedirectConnect=!1,this._handleDisconnect(e)):e===Re.CONNECTING?this._handleConnecting():e===Re.CONNECTED?this._handleConnected():e===Re.DISCONNECTED?this._handleDisconnect(e):e===Re.NETWORK_UNAVAILABLE&&this._handleSuspend(e),this._connectionStatus=e,(null===(t=this._watcher.rtcInnerWatcher)||void 0===t?void 0:t.status)&&this._watcher.rtcInnerWatcher.status(e),this._pluginContextQueue.forEach((function(t){t.onconnectionstatechange&&t.onconnectionstatechange(e)})),this._watcher.connectionState&&this._watcher.connectionState(e),[2]}))}))},e.prototype._handleConnecting=function(){this._watcher.onConnecting&&this._watcher.onConnecting()},e.prototype._handleConnected=function(){this._watcher.onConnected&&this._watcher.onConnected()},e.prototype._handleDisconnect=function(e){this._watcher.onDisconnect&&this._watcher.onDisconnect(e)},e.prototype._handleSuspend=function(e){this._watcher.onSuspend&&this._watcher.onSuspend(e)},e.prototype._messageReceiver=function(e,t,n){var i,r,o;if((e.conversationType===Y.RTC_ROOM||Object.prototype.hasOwnProperty.call(ze,e.messageType))&&this._watcher.rtcInnerWatcher&&this._watcher.rtcInnerWatcher.message)this._watcher.rtcInnerWatcher.message(Oo(e));else if(-1===["RC:ChrmJoinNtf","RC:ChrmQuitNtf"].indexOf(e.messageType)||"function"!=typeof this._watcher.chatroomState){if("RC:ChrmMemChange"!==e.messageType){if(e.messageType!==Oe.TYPING_STATUS||(this._addTypingInfo(Oo(e)),!this._watcher.typingState))if(e.messageType!==Oe.LOG_COMMAND||"rongcloudsystem"!==e.senderUserId)if(e.messageType!==Oe.INTERCEPT){if(!this._pluginContextQueue.some((function(t){if(!t.onmessage)return!1;try{return t.onmessage(Oo(e))}catch(e){return ve.error("plugin error =>",e),!1}})))if(this._watcher.message&&this._watcher.message(Oo(e),t,n),"RC:ReadNtf"!==e.messageType)if("RC:RRReqMsg"!==e.messageType){if("RC:RRRspMsg"!==e.messageType)return e;var s=null===(o=e.content)||void 0===o?void 0:o.receiptMessageDic;s&&Array.isArray(s[this._engine.currentUserId])&&"function"==typeof this._watcher.messageReceiptResponse&&this._watcher.messageReceiptResponse({conversationType:e.conversationType,targetId:e.targetId,channelId:e.channelId},e.senderUserId,s[this._engine.currentUserId])}else"function"==typeof this._watcher.messageReceiptRequest&&this._watcher.messageReceiptRequest({conversationType:e.conversationType,targetId:e.targetId,channelId:e.channelId},e.content.messageUId,e.senderUserId);else"function"==typeof this._watcher.readReceiptReceived&&this._watcher.readReceiptReceived({conversationType:e.conversationType,targetId:e.targetId,channelId:e.channelId},e.content.messageUId,e.content.lastMessageSendTime)}else this._MessageBlockedListener({conversationType:e.conversationType,targetId:e.targetId,channelId:e.channelId||"",blockType:e.content.interceptType,blockedMessageUId:e.content.msgUId});else{var a=e.content,c=a.startTime,l=a.endTime,u=a.platform,d=a.logId,h=a.uri,p=a.packageName,f={startTime:parseInt(c),endTime:parseInt(l),platform:u,logId:d,uri:h,packageName:p};null===(r=wo.getInstance())||void 0===r||r.reportFullLog(f)}}else if("function"==typeof this._watcher.chatroomState){var g={};Array.isArray(e.content.userList)&&e.content.userList.forEach((function(e){g[e.userId]=e.status})),this._watcher.chatroomState({userChange:{users:g,chatroomId:e.targetId}})}}else this._watcher.chatroomState({userChange:{users:(i={},i[e.senderUserId]="RC:ChrmQuitNtf"===e.messageType?Be.QUIT:Be.JOIN,i),chatroomId:e.targetId}})},e.prototype._batchMessageReceiver=function(e,t,n){var i=this,r=[];e.forEach((function(e){var o=i._messageReceiver(e,t,n);o&&r.push(o)})),r.length&&this._watcher.batchMessage&&this._watcher.batchMessage(r)},e.prototype._chatroomInfoListener=function(e){this._watcher.chatroomState&&this._watcher.chatroomState(e)},e.prototype._conversationInfoListener=function(e){this._watcher.conversationState&&this._watcher.conversationState(e)},e.prototype._expansionInfoListener=function(e){this._watcher.expansion&&this._watcher.expansion(e)},e.prototype._tagListener=function(){this._watcher.tag&&this._watcher.tag()},e.prototype._conversationTagListener=function(){this._watcher.conversationTagChanged&&this._watcher.conversationTagChanged()},e.prototype._typingStatusListener=function(e){this._watcher.typingState&&this._watcher.typingState(e)},e.prototype._pullFinishedListener=function(){this._watcher.pullFinished&&this._watcher.pullFinished()},e.prototype._MessageBlockedListener=function(e){this._watcher.messageBlocked&&this._watcher.messageBlocked(e)},e.prototype._ultraGroupEnableListener=function(e){this._watcher.ultraGroupEnable&&this._watcher.ultraGroupEnable(e)},e.prototype._operateStatusListener=function(e){this._watcher.operateStatus&&this._watcher.operateStatus(e)},e.prototype._ultraGroupMessageExpansionUpdatedListener=function(e){this._watcher.ultraGroupMessageExpansionUpdated&&this._watcher.ultraGroupMessageExpansionUpdated(e)},e.prototype._ultraGroupMessageModifiedListener=function(e){this._watcher.ultraGroupMessageModified&&this._watcher.ultraGroupMessageModified(e)},e.prototype._ultraGroupMessageRecalledListener=function(e){this._watcher.ultraGroupMessageRecalled&&this._watcher.ultraGroupMessageRecalled(e)},e.prototype._rtcDataChange=function(e,t){this._pluginContextQueue.forEach((function(n){n.onrtcdatachange&&n.onrtcdatachange(e,t)}))},e.prototype.assignWatcher=function(e){var t=this;Object.keys(this._watcher).forEach((function(n){if(Object.prototype.hasOwnProperty.call(e,n)){var i=e[n];t._watcher[n]=se(i)||oe(i)?i:void 0}}))},e.prototype.resetWatcher=function(){var e=this;Object.keys(this._watcher).forEach((function(t){e._watcher[t]=void 0}))},e.prototype._addTypingInfo=function(e){var t=e.senderUserId,n=e.conversationType,i=e.targetId,r=e.content,o=e.channelId,s=r.typingContentType,a=n+"#"+i+"#"+(o||"");this._typingInfo[a]||(this._typingInfo[a]=[]);var c=this._typingInfo[a].findIndex((function(e){return e.userId===t}));c>=0&&this._typingInfo[a][c].messageType===s?this._typingInfo[a][c].timestamp=Date.now():(c>=0&&this._typingInfo[a].splice(c,1),this._typingInfo[a].push({userId:t,messageType:s,timestamp:Date.now()}),this._typingChangedList.includes(a)||this._typingChangedList.push(a),this._startCheckTypingInfo())},e.prototype._startCheckTypingInfo=function(){var e=this;-1===this._typingInternalTimer&&0!==Object.keys(this._typingInfo).length&&(this._typingInternalTimer=setInterval((function(){for(var t in e._typingInfo){var n=e._typingInfo[t].length;e._typingInfo[t]=e._typingInfo[t].filter((function(t){return Date.now()-t.timestamp<e._typingExpireTime})),e._typingInfo[t].length===n||e._typingChangedList.includes(t)||e._typingChangedList.push(t),0===e._typingInfo[t].length&&delete e._typingInfo[t]}if(e._typingChangedList.length>0){var i=e._typingChangedList.map((function(t){return{conversationType:Number(t.split("#")[0]),targetId:t.split("#")[1],channelId:t.split("#")[2],list:e._typingInfo[t]||[]}}));e._typingStatusListener(i),e._typingChangedList=[]}0===Object.keys(e._typingInfo).length&&(clearInterval(e._typingInternalTimer),e._typingInternalTimer=-1)}),500))},e.prototype.getConnectedTime=function(){return this._engine.getConnectedTime()},e.prototype.getServerTime=function(){return this._engine.getServerTime()},e.prototype.getDeviceId=function(){return this._engine.getDeviceId()},e.prototype.getCurrentUserId=function(){return this._engine.currentUserId},e.prototype.getConnectionStatus=function(){return this._connectionStatus},Object.defineProperty(e.prototype,"token",{get:function(){return this._token},enumerable:!1,configurable:!0}),e.prototype.connect=function(e,t,n){return void 0===t&&(t=!1),x(this,void 0,void 0,(function(){var i,r,o,s,a,c;return P(this,(function(l){switch(l.label){case 0:return this._connectionStatus===Re.CONNECTED?[2,{code:Te.SUCCESS,userId:this._engine.currentUserId}]:this._connectionStatus===Re.CONNECTING?[2,{code:Te.BIZ_ERROR_CONNECTING}]:"string"!=typeof e||0===e.length?[2,{code:Te.RC_CONN_USER_OR_PASSWD_ERROR}]:(this._token=e,i=e.split("@"),r=i[1],o=r?r.split(";").map((function(e){return/^https?:/.test(e)?e:"https://"+e})):[],[4,this._engine.navi.getInfo(this._getTokenWithoutNavi(),o,t,this._options.checkCA)]);case 1:return(s=l.sent())?1===(null==s?void 0:s.type)?[2,{code:Te.PACKAGE_ENVIRONMENT_ERROR}]:(a=Qe.getInfo(),[4,this._engine.connect(this._getTokenWithoutNavi(),s,n)]):[2,{code:Te.RC_NAVI_RESOURCE_ERROR}];case 2:return c=l.sent(),ve.__insertLogIntoDatabase(),c!==Ie.REDIRECT?[3,4]:(this._connectionStatus=Re.REDIRECT,[4,this.connect(e,!0)]);case 3:return[2,l.sent()];case 4:return c===Te.SUCCESS&&(ve.info("connect success, userId: "+this._engine.currentUserId),1!==(null==s?void 0:s.type)&&this._engine.reportSDKInfo&&this._engine.reportSDKInfo(a),wo.init({runtime:this._runtime,logSwitch:(null==s?void 0:s.logSwitch)||0,logPolicy:JSON.parse((null==s?void 0:s.logPolicy)||"{}"),appkey:this.appkey,version:this.apiVersion,userId:this._engine.currentUserId}),_e.init(this._engine.currentUserId),this._isInternalConnected=!0),c!==Te.SUCCESS||Et()||1===s.openUS&&this._pullUserSettings(),c!==Te.SUCCESS&&(this._connectionStatus=Re.CONNECTION_CLOSED),[2,{code:c,userId:this._engine.currentUserId}]}}))}))},e.prototype._pullUserSettings=function(){return x(this,void 0,void 0,(function(){return P(this,(function(e){return[2]}))}))},e.prototype.disconnect=function(){var e;return this._isInternalConnected=!1,clearInterval(this._typingInternalTimer),this._typingInternalTimer=-1,this._typingInfo={},null===(e=wo.getInstance())||void 0===e||e.distroy(),ve.__insertLogIntoDatabase(),_e.reset(),this._engine.disconnect(),this._pluginContextQueue.forEach((function(e){if(e.ondisconnect)try{e.ondisconnect()}catch(e){ve.error("plugin error =>",e)}})),Promise.resolve()},e.prototype.reconnect=function(e){return this._isInternalConnected?Promise.resolve({code:Te.CAN_NOT_RECONNECT}):this.connect(this._getTokenWithoutNavi(),!1,e)},e.prototype._getTokenWithoutNavi=function(){return this._token.replace(/@.+$/,"@")},e.prototype.getInfoFromCache=function(){return this._engine.navi.getInfoFromCache(this._getTokenWithoutNavi())},e.prototype.registerMessageType=function(e,t,n,i,r){void 0===i&&(i=[]),void 0===r&&(r=!1),this._engine.registerMessageType(e,t,n,i,r)},e.prototype.sendMessage=function(e,t,n,i){if(e!==Y.ULTRA_GROUP){var r=this.getInfoFromCache();if(1===((null==r?void 0:r.grpRRVer)||0)&&n.messageType===Oe.READ_RECEIPT_RESPONSE)return Promise.resolve({code:Te.READ_RECEIPT_ERROR})}var o=n.canIncludeExpansion,s=void 0!==o&&o,a=n.expansion;if(s&&pe(a))return Promise.resolve({code:Te.BIZ_ERROR_INVALID_PARAMETER});var c=JSON.stringify(n.content);return V(c)>131072?Promise.resolve({code:Te.RC_MSG_CONTENT_EXCEED_LIMIT}):e===Y.ULTRA_GROUP?this._engine.sendUltraMessage(t,n):this._engine.sendMessage(e,t,n,i)},e.prototype.sendExpansionMessage=function(e){return x(this,void 0,void 0,(function(){var t,n,i,r,o,s,a,c,l,u,d,h,p,f;return P(this,(function(g){switch(g.label){case 0:if(t=e.channelId,n=e.conversationType,i=e.targetId,r=e.messageUId,o=e.keys,s=e.expansion,a=e.removeAll,!e.canIncludeExpansion)return[2,{code:Te.MESSAGE_KV_NOT_SUPPORT}];if(c=!1,l=pe(s),u=!1,oe(s))for(h in d=Object.keys(s).length,c=d>20,s)if(p=s[h],(u=h.length>32||p.length>4096)||l)break;return c||u?[2,{code:Te.EXPANSION_LIMIT_EXCEET}]:l?[2,{code:Te.BIZ_ERROR_INVALID_PARAMETER}]:(f={mid:r},s&&(f.put=s),o&&(f.del=o),a&&(f.removeAll=1),[4,this._engine.sendMessage(n,i,{content:f,messageType:Oe.EXPANSION_NOTIFY,channelId:t})]);case 1:return[2,{code:g.sent().code}]}}))}))},e.prototype.sendReadReceiptMessage=function(e,t,n){return x(this,void 0,void 0,(function(){var i;return P(this,(function(r){return i=this.getInfoFromCache(),0===((null==i?void 0:i.grpRRVer)||0)?[2,{code:Te.READ_RECEIPT_ERROR,data:"The read receipt switch is not on, please call the sendMessage method!"}]:[2,this._engine.sendReadReceiptMessage(e,t,n)]}))}))},e.prototype.getMessageReader=function(e,t,n){return x(this,void 0,void 0,(function(){var i;return P(this,(function(r){return i=this.getInfoFromCache(),0===((null==i?void 0:i.grpRRVer)||0)?[2,{code:Te.READ_RECEIPT_ERROR}]:[2,this._engine.getMessageReader(e,t,n)]}))}))},e.prototype._destroy=function(){var e;this._isInternalConnected=!1,this._watcher={batchMessage:void 0,message:void 0,conversationState:void 0,chatroomState:void 0,connectionState:void 0,rtcInnerWatcher:void 0,expansion:void 0,tag:void 0,conversationTagChanged:void 0,typingState:void 0,pullFinished:void 0,onConnecting:void 0,onConnected:void 0,onDisconnect:void 0,onSuspend:void 0},this._engine.disconnect(),this._pluginContextQueue.forEach((function(e){if(e.ondestroy)try{e.ondestroy()}catch(e){ve.error("plugin error =>",e)}})),this._pluginContextQueue.length=0,this._pluginInstanseMap={},null===(e=wo.getInstance())||void 0===e||e.distroy(),_e.reset()},e.prototype.getHistoryMessage=function(e,t,n,i,r,o,s){if(void 0===n&&(n=0),void 0===i&&(i=20),void 0===r&&(r=0),void 0===o&&(o=""),void 0===s&&(s=""),e===Y.ULTRA_GROUP){var a={timestamp:n,count:i,order:r,channelId:o};return this._engine.getUltraHistoryMsg(t,a)}return this._engine.getHistoryMessage(e,t,n,i,r,o,s||"")},e.prototype.getConversationList=function(e,t,n,i,r){if(void 0===e&&(e=300),void 0===r&&(r=""),t===Y.ULTRA_GROUP){var o=Te.METHOD_NOT_SUPPORT;return Promise.resolve({code:o,msg:Te[o]})}return this._engine.getConversationList(e,t,n,i,r)},e.prototype.getConversation=function(e,t,n){return this._engine.getConversation(e,t,n)},e.prototype.removeConversation=function(e,t,n){return void 0===n&&(n=""),e===Y.ULTRA_GROUP?Promise.resolve(Te.METHOD_NOT_SUPPORT):this._engine.removeConversation(e,t,n)},e.prototype.getUltraGroupList=function(){return this._engine.getUltraGroupList()},e.prototype.getBlockUltraGroupList=function(){return this._engine.getBlockUltraGroupList()},e.prototype.getTopUltraGroupList=function(){return this._engine.getTopUltraGroupList()},e.prototype.clearUnreadCount=function(e,t,n){return void 0===n&&(n=""),e===Y.ULTRA_GROUP?this._engine.clearUltraUnreadcount(t,n):this._engine.clearConversationUnreadCount(e,t,n)},e.prototype.clearAllUnreadCount=function(){return this._engine.clearAllUnreadCount()},e.prototype.getUnreadCount=function(e,t,n){return void 0===n&&(n=""),this._engine.getConversationUnreadCount(e,t,n)},e.prototype.getTotalUnreadCount=function(e,t,n){if(t&&t.includes(Y.ULTRA_GROUP)){var i=Te.METHOD_NOT_SUPPORT;return Promise.resolve({code:i,msg:Te[i]})}return this._engine.getAllConversationUnreadCount(e,t&&t.length>0?t:[Y.PRIVATE,Y.GROUP,Y.SYSTEM,Y.PUBLIC_SERVICE],!!n)},e.prototype.getFirstUnreadMessage=function(e,t,n){return void 0===n&&(n=""),this._engine.getFirstUnreadMessage(e,t,n)},e.prototype.setConversationStatus=function(e,t,n,i,r){if(void 0===r&&(r=""),e===Y.ULTRA_GROUP&&void 0!==n)return Promise.resolve(Te.METHOD_NOT_SUPPORT);var o=[{conversationType:e,targetId:t,isTop:n,notificationStatus:i,channelId:r}];return this._engine.batchSetConversationStatus(o)},e.prototype.saveConversationMessageDraft=function(e,t,n,i){return void 0===i&&(i=""),this._engine.saveConversationMessageDraft(e,t,n,i)},e.prototype.getConversationMessageDraft=function(e,t,n){return void 0===n&&(n=""),this._engine.getConversationMessageDraft(e,t,n)},e.prototype.clearConversationMessageDraft=function(e,t,n){return void 0===n&&(n=""),this._engine.clearConversationMessageDraft(e,t,n)},e.prototype.recallMessage=function(e,t,n,i,r){return this._engine.recallMsg(e,t,n,i,r)},e.prototype.deleteRemoteMessage=function(e,t,n,i){return void 0===i&&(i=""),e===Y.ULTRA_GROUP?Promise.resolve(Te.METHOD_NOT_SUPPORT):this._engine.deleteRemoteMessage(e,t,n,i)},e.prototype.deleteRemoteMessageByTimestamp=function(e,t,n,i){return void 0===i&&(i=""),this._engine.deleteRemoteMessageByTimestamp(e,t,n,i)},e.prototype.joinChatroom=function(e,t){return void 0===t&&(t=10),this._engine.joinChatroom(e,t)},e.prototype.joinExistChatroom=function(e,t){return void 0===t&&(t=10),this._engine.joinExistChatroom(e,t)},e.prototype.quitChatroom=function(e){return this._engine.quitChatroom(e)},e.prototype.getChatroomInfo=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=0),this._engine.getChatroomInfo(e,t,n)},e.prototype.setChatroomEntry=function(e,t){var n=t.key,i=t.value;return pt(n)&&ft(i)?this._engine.setChatroomEntry(e,t):Promise.resolve(Te.BIZ_ERROR_INVALID_PARAMETER)},e.prototype.setChatroomEntries=function(e,t){for(var n=0;n<t.entries.length;n++){var i=t.entries[n],r=i.key,o=i.value;if(!pt(r)||!ft(o))return Promise.resolve({code:Te.BIZ_ERROR_INVALID_PARAMETER})}return this._engine.setChatroomEntries(e,t)},e.prototype.forceSetChatroomEntry=function(e,t){var n=t.key,i=t.value;return pt(n)&&ft(i)?this._engine.forceSetChatroomEntry(e,t):Promise.resolve(Te.BIZ_ERROR_INVALID_PARAMETER)},e.prototype.removeChatroomEntry=function(e,t){var n=t.key;return pt(n)?this._engine.removeChatroomEntry(e,t):Promise.resolve(Te.BIZ_ERROR_INVALID_PARAMETER)},e.prototype.removeChatroomEntries=function(e,t){for(var n=0;n<t.entries.length;n++){var i=t.entries[n].key;if(!pt(i))return Promise.resolve({code:Te.BIZ_ERROR_INVALID_PARAMETER})}return this._engine.removeChatroomEntries(e,t)},e.prototype.forceRemoveChatroomEntry=function(e,t){var n=t.key;return pt(n)?this._engine.forceRemoveChatroomEntry(e,t):Promise.resolve(Te.BIZ_ERROR_INVALID_PARAMETER)},e.prototype.getChatroomEntry=function(e,t){return this._engine.getChatroomEntry(e,t)},e.prototype.getAllChatroomEntries=function(e){return this._engine.getAllChatroomEntry(e)},e.prototype.getChatroomHistoryMessages=function(e,t,n,i){return void 0===t&&(t=20),void 0===n&&(n=0),void 0===i&&(i=0),this._engine.getChatroomHistoryMessages(e,i,t,n)},e.prototype.getFileToken=function(e,t,n,i){return x(this,void 0,void 0,(function(){var r,o,s,a,c,l,u;return P(this,(function(d){switch(d.label){case 0:return r=this.getInfoFromCache(),o=(null==r?void 0:r.bosAddr)||"",s=(null==r?void 0:r.uploadServer)||"",a=(null==r?void 0:r.ossConfig)||"",[4,this._engine.getFileToken(e,t,n,i)];case 1:return c=d.sent(),l=c.code,u=c.data,l===Te.SUCCESS?[2,Promise.resolve(Object.assign(u,{bos:o,qiniu:s,ossConfig:a}))]:[2,Promise.reject(l)]}}))}))},e.prototype.getFileUrl=function(e,t,n,i,r){return void 0===r&&(r=De.QINIU),x(this,void 0,void 0,(function(){var o,s,a;return P(this,(function(c){switch(c.label){case 0:return(null==i?void 0:i.isBosRes)?[2,Promise.resolve(i)]:[4,this._engine.getFileUrl(e,r,t,n)];case 1:return o=c.sent(),s=o.code,a=o.data,s===Te.SUCCESS?[2,Promise.resolve(a)]:[2,Promise.reject(s)]}}))}))},e.prototype.createTag=function(e){return x(this,void 0,void 0,(function(){return P(this,(function(t){return[2,this._engine.createTag(e)]}))}))},e.prototype.removeTag=function(e){return x(this,void 0,void 0,(function(){return P(this,(function(t){return[2,this._engine.removeTag(e)]}))}))},e.prototype.updateTag=function(e){return x(this,void 0,void 0,(function(){return P(this,(function(t){return[2,this._engine.updateTag(e)]}))}))},e.prototype.getTagList=function(){return x(this,void 0,void 0,(function(){return P(this,(function(e){return[2,this._engine.getTagList()]}))}))},e.prototype.addTagForConversations=function(e,t){return x(this,void 0,void 0,(function(){return P(this,(function(n){return t.length>1e3?[2,Promise.reject(Te.CONVER_OUT_LIMIT_ERROR)]:[2,this._engine.addTagForConversations(e,t)]}))}))},e.prototype.removeTagForConversations=function(e,t){return x(this,void 0,void 0,(function(){return P(this,(function(n){return[2,this._engine.removeTagForConversations(e,t)]}))}))},e.prototype.removeTagsForConversation=function(e,t){return x(this,void 0,void 0,(function(){return P(this,(function(n){return[2,this._engine.removeTagsForConversation(e,t)]}))}))},e.prototype.getConversationListByTag=function(e,t,n,i){return x(this,void 0,void 0,(function(){return P(this,(function(r){return[2,this._engine.getConversationListByTag(e,t,n,i)]}))}))},e.prototype.getUnreadCountByTag=function(e,t){return x(this,void 0,void 0,(function(){return P(this,(function(n){return[2,this._engine.getUnreadCountByTag(e,t)]}))}))},e.prototype.setConversationStatusInTag=function(e,t,n){return x(this,void 0,void 0,(function(){return P(this,(function(i){return[2,this._engine.setConversationStatusInTag(e,t,n)]}))}))},e.prototype.getTagsForConversation=function(e){return x(this,void 0,void 0,(function(){return P(this,(function(t){return[2,this._engine.getTagsForConversation(e)]}))}))},e.prototype.getBlockConversationList=function(){return this._engine.getBlockConversationList()},e.prototype.getTopConversationList=function(){return this._engine.getTopConversationList()},e.prototype.getUnreadMentionedCount=function(e){return this._engine.getUnreadMentionedCount(e)},e.prototype.getAllUnreadMentionedCount=function(){return this._engine.getAllUnreadMentionedCount()},e.prototype.sendUltraGroupTypingStatus=function(e){if(e.conversationType!==Y.ULTRA_GROUP){var t=Te.METHOD_ONLY_SUPPORT_ULTRA_GROUP;return Promise.resolve({code:t,msg:Te[t]})}return this._engine.sendUltraGroupTypingStatus(e)},e.prototype.getUltraGroupMessageListByMessageUId=function(e){return this._engine.getUltraGroupMessageListByMessageUId(e)},e.prototype.expandUltraMessage=function(e){return x(this,void 0,void 0,(function(){var t,n,i,r,o,s,a,c,l,u;return P(this,(function(d){switch(d.label){case 0:if(e.channelId,t=e.conversationType,e.targetId,e.messageUId,e.keys,n=e.expansion,e.removeAll,i=e.canIncludeExpansion,t!==Y.ULTRA_GROUP)return[2,{code:r=Te.METHOD_ONLY_SUPPORT_ULTRA_GROUP,msg:Te[r]}];if(!i)return[2,{code:Te.MESSAGE_KV_NOT_SUPPORT}];if(o=!1,s=pe(n),a=!1,oe(n))for(l in c=Object.keys(n).length,o=c>20,n)if(u=n[l],a=l.length>32||u.length>64)break;return o||a?[2,{code:Te.EXPANSION_LIMIT_EXCEET}]:s?[2,{code:Te.BIZ_ERROR_INVALID_PARAMETER}]:[4,this._engine.expandUltraMessage(e)];case 1:return[2,{code:d.sent().code}]}}))}))},e.prototype.modifyMessage=function(e){return x(this,void 0,void 0,(function(){var t;return P(this,(function(n){switch(n.label){case 0:return e.conversationType!==Y.ULTRA_GROUP?[2,{code:t=Te.METHOD_ONLY_SUPPORT_ULTRA_GROUP,msg:Te[t]}]:[4,this._engine.modifyMessage(e)];case 1:return[2,{code:n.sent().code}]}}))}))},e.prototype.getUltraGroupUnreadMentionedCountByTargetId=function(e){return this._engine.getUltraGroupUnreadMentionedCountByTargetId(e)},e.prototype.getAllConversationState=function(){return this._engine.getAllConversationState()},e.prototype.callExtra=function(e){for(var t,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return(t=this._engine).callExtra.apply(t,A([e],n))},e.prototype.clearConversations=function(e,t){return x(this,void 0,void 0,(function(){return P(this,(function(n){switch(n.label){case 0:return[4,this._engine.clearConversations(e,t)];case 1:return[2,n.sent()]}}))}))},e.prototype.setUserStatusListener=function(e,t){return this._engine.setUserStatusListener(e,(function(e){try{t(e)}catch(e){ve.error(e)}}))},e.prototype.addToBlacklist=function(e){return x(this,void 0,void 0,(function(){return P(this,(function(t){return[2,this._engine.addToBlacklist(e)]}))}))},e.prototype.removeFromBlacklist=function(e){return x(this,void 0,void 0,(function(){return P(this,(function(t){return[2,this._engine.removeFromBlacklist(e)]}))}))},e.prototype.getBlacklist=function(){return x(this,void 0,void 0,(function(){return P(this,(function(e){return[2,this._engine.getBlacklist()]}))}))},e.prototype.getBlacklistStatus=function(e){return x(this,void 0,void 0,(function(){return P(this,(function(t){return[2,this._engine.getBlacklistStatus(e)]}))}))},e.prototype.insertMessage=function(e,t,n){return x(this,void 0,void 0,(function(){return P(this,(function(i){return[2,this._engine.insertMessage(e,t,n)]}))}))},e.prototype.deleteMessages=function(e){return x(this,void 0,void 0,(function(){return P(this,(function(t){return[2,this._engine.deleteMessages(e)]}))}))},e.prototype.deleteMessagesByTimestamp=function(e,t,n,i,r){return void 0===r&&(r=""),x(this,void 0,void 0,(function(){return P(this,(function(o){return[2,this._engine.deleteMessagesByTimestamp(e,t,n,i,r)]}))}))},e.prototype.clearMessages=function(e,t,n){return void 0===n&&(n=""),x(this,void 0,void 0,(function(){return P(this,(function(i){return[2,this._engine.clearMessages(e,t,n)]}))}))},e.prototype.getMessage=function(e){return x(this,void 0,void 0,(function(){return P(this,(function(t){return[2,this._engine.getMessage(e)]}))}))},e.prototype.setMessageContent=function(e,t,n){return x(this,void 0,void 0,(function(){return P(this,(function(i){return[2,this._engine.setMessageContent(e,t,n)]}))}))},e.prototype.setMessageSearchField=function(e,t,n){return x(this,void 0,void 0,(function(){return P(this,(function(i){return[2,this._engine.setMessageSearchField(e,t,n)]}))}))},e.prototype.setMessageSentStatus=function(e,t){return x(this,void 0,void 0,(function(){return P(this,(function(n){return[2,this._engine.setMessageSentStatus(e,t)]}))}))},e.prototype.setMessageReceivedStatus=function(e,t){return x(this,void 0,void 0,(function(){return P(this,(function(n){return[2,this._engine.setMessageReceivedStatus(e,t)]}))}))},e.prototype.setUserStatus=function(e){return x(this,void 0,void 0,(function(){return P(this,(function(t){return[2,this._engine.setUserStatus(e)]}))}))},e.prototype.subscribeUserStatus=function(e){return x(this,void 0,void 0,(function(){return P(this,(function(t){return[2,this._engine.subscribeUserStatus(e)]}))}))},e.prototype.getUserStatus=function(e){return x(this,void 0,void 0,(function(){return P(this,(function(t){return[2,this._engine.getUserStatus(e)]}))}))},e.prototype.searchConversationByContent=function(e,t,n,i){return void 0===t&&(t=[]),void 0===n&&(n=""),x(this,void 0,void 0,(function(){return P(this,(function(r){return[2,this._engine.searchConversationByContent(e,t,n,i)]}))}))},e.prototype.searchMessageByContent=function(e,t,n,i,r,o,s){return void 0===s&&(s=""),x(this,void 0,void 0,(function(){return P(this,(function(a){return[2,this._engine.searchMessageByContent(e,t,n,i,r,o,s)]}))}))},e.prototype.getUnreadMentionedMessages=function(e,t,n){return void 0===n&&(n=""),this._engine.getUnreadMentionedMessages(e,t,n)},e.prototype.clearUnreadCountByTimestamp=function(e,t,n,i){return void 0===i&&(i=""),this._engine.clearUnreadCountByTimestamp(e,t,n,i)},e.prototype.getConversationNotificationStatus=function(e,t,n){return void 0===n&&(n=""),this._engine.getConversationNotificationStatus(e,t,n)},e.prototype.getRemoteHistoryMessages=function(e,t,n,i,r,o){return this._engine.getRemoteHistoryMessages(e,t,n,i,r,o)},e.prototype.getConversationListWithAllChannel=function(){return this._engine.getConversationListWithAllChannel()},e.prototype.getConversationListWithAllChannelByPage=function(e,t){return this._engine.getConversationListWithAllChannelByPage(e,t)},e.prototype.joinRTCRoom=function(e,t,n,i,r,o){return this._engine.joinRTCRoom(e,t,n,i,r,o)},e.prototype.quitRTCRoom=function(e){return this._engine.quitRTCRoom(e)},e.prototype.rtcPing=function(e,t,n){return this._engine.rtcPing(e,t,n)},e.prototype.getRTCRoomInfo=function(e){return this._engine.getRTCRoomInfo(e)},e.prototype.getRTCUserInfoList=function(e){return this._engine.getRTCUserInfoList(e)},e.prototype.getRTCUserInfo=function(e){return this._engine.getRTCUserInfo(e)},e.prototype.setRTCUserInfo=function(e,t,n){return this._engine.setRTCUserInfo(e,t,n)},e.prototype.removeRTCUserInfo=function(e,t){return this._engine.removeRTCUserInfo(e,t)},e.prototype.setRTCData=function(e,t,n,i,r,o){return this._engine.setRTCData(e,t,n,i,r,o)},e.prototype.setRTCTotalRes=function(e,t,n,i,r){return void 0===r&&(r=""),this._engine.setRTCTotalRes(e,t,n,i,r)},e.prototype.setRTCCDNUris=function(e,t,n){return this._engine.setRTCCDNUris(e,t,n)},e.prototype.getRTCData=function(e,t,n,i){return this._engine.getRTCData(e,t,n,i)},e.prototype.removeRTCData=function(e,t,n,i,r){return this._engine.removeRTCData(e,t,n,i,r)},e.prototype.setRTCOutData=function(e,t,n,i){return this._engine.setRTCOutData(e,t,n,i)},e.prototype.getRTCOutData=function(e,t){return this._engine.getRTCOutData(e,t)},e.prototype.getRTCToken=function(e,t,n){return this._engine.getRTCToken(e,t,n)},e.prototype.setRTCState=function(e,t){return this._engine.setRTCState(e,t)},e.prototype.getRTCUserList=function(e){return this._engine.getRTCUserList(e)},e.prototype.joinLivingRoomAsAudience=function(e,t,n){return this._engine.joinLivingRoomAsAudience(e,t,n)},e.prototype.quitLivingRoomAsAudience=function(e){return this._engine.quitLivingRoomAsAudience(e)},e.prototype.rtcIdentityChange=function(e,t,n){return this._engine.rtcIdentityChange(e,t,n)},e.prototype.getRTCJoinedUserInfo=function(e){return this._engine.getRTCJoinedUserInfo(e)},e.prototype.requestRoomPK=function(e){return this._engine.requestRoomPK(e)},e.prototype.cancelRoomPK=function(e){return this._engine.cancelRoomPK(e)},e.prototype.responseRoomPK=function(e){return this._engine.responseRoomPK(e)},e.prototype.endRoomPK=function(e){return this._engine.endRoomPK(e)},e.prototype.bindRTCRoomForChatroom=function(e){return this._engine.bindRTCRoomForChatroom(e)},e}();!function(e){e[e.add=1]="add",e[e.update=2]="update",e[e.delete=3]="delete"}(ko||(ko={}));var xo="5.2.1"}.call(this,n("4362"))},"7a41":function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},"7a77":function(e,t,n){"use strict";function i(e){this.message=e}i.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},i.prototype.__CANCEL__=!0,e.exports=i},"7aac":function(e,t,n){"use strict";var i=n("c532");e.exports=i.isStandardBrowserEnv()?function(){return{write:function(e,t,n,r,o,s){var a=[];a.push(e+"="+encodeURIComponent(t)),i.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),i.isString(r)&&a.push("path="+r),i.isString(o)&&a.push("domain="+o),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},"7b0b":function(e,t,n){var i=n("da84"),r=n("1d80"),o=i.Object;e.exports=function(e){return o(r(e))}},"7b3e":function(e,t,n){"use strict";var i,r=n("a3de");
/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */
function o(e,t){if(!r.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,o=n in document;if(!o){var s=document.createElement("div");s.setAttribute(n,"return;"),o="function"===typeof s[n]}return!o&&i&&"wheel"===e&&(o=document.implementation.hasFeature("Events.wheel","3.0")),o}r.canUseDOM&&(i=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("","")),e.exports=o},"7c73":function(e,t,n){var i,r=n("825a"),o=n("37e8"),s=n("7839"),a=n("d012"),c=n("1be4"),l=n("cc12"),u=n("f772"),d=">",h="<",p="prototype",f="script",g=u("IE_PROTO"),m=function(){},_=function(e){return h+f+d+e+h+"/"+f+d},v=function(e){e.write(_("")),e.close();var t=e.parentWindow.Object;return e=null,t},y=function(){var e,t=l("iframe"),n="java"+f+":";return t.style.display="none",c.appendChild(t),t.src=String(n),e=t.contentWindow.document,e.open(),e.write(_("document.F=Object")),e.close(),e.F},C=function(){try{i=new ActiveXObject("htmlfile")}catch(t){}C="undefined"!=typeof document?document.domain&&i?v(i):y():v(i);var e=s.length;while(e--)delete C[p][s[e]];return C()};a[g]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(m[p]=r(e),n=new m,m[p]=null,n[g]=e):n=C(),void 0===t?n:o(n,t)}},"7dd0":function(e,t,n){"use strict";var i=n("23e7"),r=n("c65b"),o=n("c430"),s=n("5e77"),a=n("1626"),c=n("9ed3"),l=n("e163"),u=n("d2bb"),d=n("d44e"),h=n("9112"),p=n("6eeb"),f=n("b622"),g=n("3f8c"),m=n("ae93"),_=s.PROPER,v=s.CONFIGURABLE,y=m.IteratorPrototype,C=m.BUGGY_SAFARI_ITERATORS,E=f("iterator"),b="keys",T="values",S="entries",R=function(){return this};e.exports=function(e,t,n,s,f,m,I){c(n,t,s);var w,O,k,M=function(e){if(e===f&&N)return N;if(!C&&e in A)return A[e];switch(e){case b:return function(){return new n(this,e)};case T:return function(){return new n(this,e)};case S:return function(){return new n(this,e)}}return function(){return new n(this)}},x=t+" Iterator",P=!1,A=e.prototype,D=A[E]||A["@@iterator"]||f&&A[f],N=!C&&D||M(f),L="Array"==t&&A.entries||D;if(L&&(w=l(L.call(new e)),w!==Object.prototype&&w.next&&(o||l(w)===y||(u?u(w,y):a(w[E])||p(w,E,R)),d(w,x,!0,!0),o&&(g[x]=R))),_&&f==T&&D&&D.name!==T&&(!o&&v?h(A,"name",T):(P=!0,N=function(){return r(D,this)})),f)if(O={values:M(T),keys:m?N:M(b),entries:M(S)},I)for(k in O)(C||P||!(k in A))&&p(A,k,O[k]);else i({target:t,proto:!0,forced:C||P},O);return o&&!I||A[E]===N||p(A,E,N,{name:f}),g[t]=N,O}},"7e74":function(e,t,n){"use strict";n.r(t),n.d(t,"BaseMessage",(function(){return Ke})),n.d(t,"CombineMessage",(function(){return Qe})),n.d(t,"ConnectType",(function(){return Sn})),n.d(t,"Events",(function(){return c})),n.d(t,"FileMessage",(function(){return Ze})),n.d(t,"GIFMessage",(function(){return et})),n.d(t,"HQVoiceMessage",(function(){return Ye})),n.d(t,"ImageMessage",(function(){return ze})),n.d(t,"LocationMessage",(function(){return it})),n.d(t,"MessageType",(function(){return Rn})),n.d(t,"ReferenceMessage",(function(){return rt})),n.d(t,"RichContentMessage",(function(){return ot})),n.d(t,"SightMessage",(function(){return Je})),n.d(t,"TextMessage",(function(){return Xe})),n.d(t,"VoiceMessage",(function(){return nt})),n.d(t,"__addSDKVersion",(function(){return te})),n.d(t,"addConversationsToTag",(function(){return _n})),n.d(t,"addEventListener",(function(){return J})),n.d(t,"addTag",(function(){return hn})),n.d(t,"bindRTCRoomForChatroom",(function(){return He})),n.d(t,"clearAllMessagesUnreadStatus",(function(){return ue})),n.d(t,"clearEventListeners",(function(){return ee})),n.d(t,"clearHistoryMessages",(function(){return Yt})),n.d(t,"clearMessages",(function(){return cn})),n.d(t,"clearMessagesUnreadStatus",(function(){return le})),n.d(t,"clearTextMessageDraft",(function(){return se})),n.d(t,"clearUnreadCountByTimestamp",(function(){return un})),n.d(t,"connect",(function(){return W})),n.d(t,"deleteLocalMessagesByTimestamp",(function(){return an})),n.d(t,"deleteMessages",(function(){return zt})),n.d(t,"disconnect",(function(){return q})),n.d(t,"forceRemoveChatRoomEntry",(function(){return Ve})),n.d(t,"forceSetChatRoomEntry",(function(){return Le})),n.d(t,"getAllChatRoomEntries",(function(){return Fe})),n.d(t,"getAllConversationState",(function(){return ve})),n.d(t,"getAllUnreadMentionedCount",(function(){return _e})),n.d(t,"getBlockUltraGroupList",(function(){return Ce})),n.d(t,"getBlockedConversationList",(function(){return pe})),n.d(t,"getChatRoomEntry",(function(){return je})),n.d(t,"getChatRoomInfo",(function(){return Ae})),n.d(t,"getChatroomHistoryMessages",(function(){return $e})),n.d(t,"getConnectionStatus",(function(){return G})),n.d(t,"getConversationList",(function(){return ne})),n.d(t,"getConversationNotificationStatus",(function(){return he})),n.d(t,"getConversationsFromTagByPage",(function(){return En})),n.d(t,"getCurrentUserId",(function(){return Y})),n.d(t,"getFileToken",(function(){return xt})),n.d(t,"getFileUrl",(function(){return Pt})),n.d(t,"getFirstUnreadMessage",(function(){return tn})),n.d(t,"getHistoryMessages",(function(){return jt})),n.d(t,"getMessage",(function(){return rn})),n.d(t,"getMessageReader",(function(){return Zt})),n.d(t,"getRemoteHistoryMessages",(function(){return Ft})),n.d(t,"getServerTime",(function(){return z})),n.d(t,"getTags",(function(){return gn})),n.d(t,"getTagsFromConversation",(function(){return mn})),n.d(t,"getTextMessageDraft",(function(){return re})),n.d(t,"getTopConversationList",(function(){return ge})),n.d(t,"getTotalUnreadCount",(function(){return ae})),n.d(t,"getUltraGroupList",(function(){return ye})),n.d(t,"getUltraGroupMessageListByMessageUId",(function(){return be})),n.d(t,"getUltraGroupUnreadMentionedCountByTargetId",(function(){return we})),n.d(t,"getUnreadCount",(function(){return ce})),n.d(t,"getUnreadCountByTag",(function(){return bn})),n.d(t,"getUnreadMentionedCount",(function(){return me})),n.d(t,"getUnreadMentionedMessages",(function(){return on})),n.d(t,"init",(function(){return H})),n.d(t,"insertMessage",(function(){return nn})),n.d(t,"installPlugin",(function(){return K})),n.d(t,"joinChatRoom",(function(){return Me})),n.d(t,"joinExistChatRoom",(function(){return xe})),n.d(t,"modifyMessage",(function(){return Ie})),n.d(t,"onceEventListener",(function(){return X})),n.d(t,"quitChatRoom",(function(){return Pe})),n.d(t,"recallMessage",(function(){return Gt})),n.d(t,"registerMessageType",(function(){return en})),n.d(t,"removeAllExpansionForUltraGroupMessage",(function(){return Re})),n.d(t,"removeChatRoomEntries",(function(){return Be})),n.d(t,"removeChatRoomEntry",(function(){return Ue})),n.d(t,"removeConversation",(function(){return ie})),n.d(t,"removeConversationsFromTag",(function(){return vn})),n.d(t,"removeEventListener",(function(){return Q})),n.d(t,"removeEventListeners",(function(){return Z})),n.d(t,"removeExpansionForUltraGroupMessage",(function(){return Se})),n.d(t,"removeMessageExpansionForKey",(function(){return Xt})),n.d(t,"removeTag",(function(){return pn})),n.d(t,"removeTagFromConversations",(function(){return Cn})),n.d(t,"removeTagsFromConversation",(function(){return yn})),n.d(t,"saveTextMessageDraft",(function(){return oe})),n.d(t,"searchConversationByContent",(function(){return ln})),n.d(t,"searchMessages",(function(){return sn})),n.d(t,"sendFileMessage",(function(){return Lt})),n.d(t,"sendHQVoiceMessage",(function(){return Bt})),n.d(t,"sendImageMessage",(function(){return Ut})),n.d(t,"sendMessage",(function(){return At})),n.d(t,"sendReadReceiptMessage",(function(){return $t})),n.d(t,"sendReadReceiptRequest",(function(){return Ht})),n.d(t,"sendReadReceiptResponse",(function(){return Kt})),n.d(t,"sendReadReceiptResponseV2",(function(){return Wt})),n.d(t,"sendSightMessage",(function(){return Vt})),n.d(t,"sendSyncReadStatusMessage",(function(){return qt})),n.d(t,"sendTextMessage",(function(){return Dt})),n.d(t,"sendTypingStatusMessage",(function(){return Qt})),n.d(t,"sendUltraGroupTypingStatus",(function(){return Ee})),n.d(t,"setChatRoomEntries",(function(){return Ne})),n.d(t,"setChatRoomEntry",(function(){return De})),n.d(t,"setConversationNotificationStatus",(function(){return de})),n.d(t,"setConversationToTop",(function(){return fe})),n.d(t,"setConversationToTopInTag",(function(){return Tn})),n.d(t,"setMessageReceivedStatus",(function(){return dn})),n.d(t,"updateExpansionForUltraGroupMessage",(function(){return Te})),n.d(t,"updateMessageExpansion",(function(){return Jt})),n.d(t,"updateTag",(function(){return fn}));var i=n("78b2");n.d(t,"ConnectionStatus",(function(){return i["ConnectionStatus"]})),n.d(t,"ConversationType",(function(){return i["ConversationType"]})),n.d(t,"ErrorCode",(function(){return i["ErrorCode"]})),n.d(t,"LogLevel",(function(){return i["LogLevel"]})),n.d(t,"MentionedType",(function(){return i["MentionedType"]})),n.d(t,"MessageBlockType",(function(){return i["MessageBlockType"]})),n.d(t,"MessageDirection",(function(){return i["MessageDirection"]})),n.d(t,"NotificationStatus",(function(){return i["NotificationStatus"]})),n.d(t,"ReceivedStatus",(function(){return i["ReceivedStatus"]})),n.d(t,"UploadMethod",(function(){return i["UploadMethod"]}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},o=function(){return o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},o.apply(this,arguments)};function s(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))}function a(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(r=s.trys,!((r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}var c,l=new i["Logger"]("RCIM"),u=function(){return!("undefined"==typeof uni||!function(e){for(var t=["canIUse","getSystemInfo"],n=0,i=t.length;n<i;n++)if(!e[t[n]])return!1;return!0}(uni))},d=u(),h={tag:"browser",httpReq:function(e){var t=e.method||i["HttpMethod"].GET,n=e.timeout||6e4,r=e.headers,o=e.query,s=e.body,a=Object(i["appendUrl"])(e.url,o);return new Promise((function(e){var i,o=(i="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,"undefined"!=typeof XMLHttpRequest&&i?new XMLHttpRequest:"undefined"!=typeof XDomainRequest?new XDomainRequest:new ActiveXObject("Microsoft.XMLHTTP")),c="[object XDomainRequest]"===Object.prototype.toString.call(o);if(o.open(t,a),r&&o.setRequestHeader)for(var l in r)o.setRequestHeader(l,r[l]);if(c){o.timeout=n,o.onload=function(){e({data:o.responseText,status:o.status||200})},o.onerror=function(){e({status:o.status||0})},o.ontimeout=function(){e({status:o.status||0})};var u="object"==typeof s?JSON.stringify(s):s;o.send(u)}else o.onreadystatechange=function(){4===o.readyState&&e({data:o.responseText,status:o.status})},o.onerror=function(){e({status:o.status||0})},setTimeout((function(){return e({status:o.status||0})}),n),o.send(s)}))},localStorage:null===window||void 0===window?void 0:window.localStorage,sessionStorage:null===window||void 0===window?void 0:window.sessionStorage,isSupportSocket:function(){var e="undefined"!=typeof WebSocket;return e||l.warn("websocket not support"),e},useNavi:!0,connectPlatform:"",isFromUniapp:d,createWebSocket:function(e,t){var n=new WebSocket(e,t);return n.binaryType="arraybuffer",{onClose:function(e){n.onclose=function(t){var n=t.code,i=t.reason;e(n,i)}},onError:function(e){n.onerror=e},onMessage:function(e){n.onmessage=function(t){e(t.data)}},onOpen:function(e){n.onopen=e},send:function(e){n.send(e)},close:function(e,t){n.close(e,t)}}},createDataChannel:function(e,t){return this.isSupportSocket()&&"websocket"===t?new i["WebSocketChannel"](this,e):new i["CometChannel"](this,e)}},p=u(),f=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return wx[e].apply(wx,t)}catch(e){l.error(e)}}},g={setItem:f("setStorageSync"),getItem:f("getStorageSync"),removeItem:f("removeStorageSync"),clear:f("clearStorageSync")},m={tag:"wechat",httpReq:function(e){var t=e.method||i["HttpMethod"].GET,n=e.timeout||6e4,r=e.headers,o=e.query,s=e.body,a=Object(i["appendUrl"])(e.url,o);return new Promise((function(e){wx.request({url:a,method:t,headers:r,timeout:n,data:s,success:function(t){e({data:t.data,status:t.statusCode})},fail:function(){e({status:i["ErrorCode"].RC_HTTP_REQ_TIMEOUT})}})}))},localStorage:g,sessionStorage:g,isSupportSocket:function(){return!0},useNavi:!1,connectPlatform:"MiniProgram",isFromUniapp:p,createWebSocket:function(e,t){var n=wx.connectSocket({url:e,protocols:t});return{onClose:function(e){n.onClose((function(t){e(t.code,t.reason)}))},onError:function(e){n.onError((function(t){e(t.errMsg)}))},onMessage:function(e){n.onMessage((function(t){e(t.data)}))},onOpen:function(e){n.onOpen(e)},send:function(e){n.send({data:e})},close:function(e,t){n.close({code:e,reason:t})}}},createDataChannel:function(e,t){return"websocket"===t?new i["WebSocketChannel"](this,e):new i["CometChannel"](this,e)}},_=u(),v=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return my[e].apply(my,t)}catch(e){l.error(e)}}},y={setItem:v("setStorageSync"),getItem:v("getStorageSync"),removeItem:v("removeStorageSync"),clear:v("clearStorageSync")},C={tag:"alipay",httpReq:function(e){var t=e.method||i["HttpMethod"].GET,n=e.timeout||6e4,r=e.headers,o=e.query,s=e.body,a=Object(i["appendUrl"])(e.url,o),c=e.dataType||"json";return new Promise((function(e){my.request({url:a,method:t,headers:r,timeout:n,data:s,dataType:c,success:function(t){e({data:t.data,status:t.status})},fail:function(){e({status:i["ErrorCode"].RC_HTTP_REQ_TIMEOUT})}})}))},localStorage:y,sessionStorage:y,isSupportSocket:function(){return!1},useNavi:!1,connectPlatform:"MiniProgram",isFromUniapp:_,createDataChannel:function(e,t){return"websocket"===t?new i["WebSocketChannel"](this,e):new i["CometChannel"](this,e)}},E=u(),b=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return console.log("tt",tt),tt[e].apply(tt,t)}catch(e){l.error(e)}}},T={setItem:b("setStorageSync"),getItem:b("getStorageSync"),removeItem:b("removeStorageSync"),clear:b("clearStorageSync")},S={tag:"toutiao",isSupportSocket:function(){return!0},useNavi:!1,connectPlatform:"MiniProgram",isFromUniapp:E,localStorage:T,sessionStorage:T,httpReq:function(e){return new Promise((function(t,n){tt.request({url:e.url,data:e.body,header:e.headers,method:e.method,success:function(e){console.log("调用成功",e.data);var n=(null==e?void 0:e.data)||{},i={data:JSON.stringify(n),status:e.statusCode};t(i)},fail:function(e){console.log("调用失败",e.errMsg),n({data:e.errMsg})}})}))},createWebSocket:function(e,t){var n=tt.connectSocket({url:e,protocols:t});return{onOpen:function(e){n.onOpen(e)},onClose:function(e){n.onClose((function(t){return e(t.code,t.reason)}))},onError:function(e){n.onError((function(t){return e(t.errMsg)}))},onMessage:function(e){n.onMessage((function(t){return e(t.data)}))},send:function(e){n.send({data:e})},close:function(e,t){n.close({code:e,reason:t})}}},createDataChannel:function(e,t){return"websocket"===t?new i["WebSocketChannel"](this,e):new i["CometChannel"](this,e)}},R=u(),I=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return console.log("swan",swan),swan[e].apply(swan,t)}catch(e){l.error(e)}}},w={setItem:I("setStorageSync"),getItem:I("getStorageSync"),removeItem:I("removeStorageSync"),clear:I("clearStorageSync")},O={tag:"baidu",isSupportSocket:function(){return!0},useNavi:!1,connectPlatform:"MiniProgram",isFromUniapp:R,localStorage:w,sessionStorage:w,httpReq:function(e){return new Promise((function(t,n){swan.request({url:e.url,data:e.body,header:e.headers,method:e.method,success:function(e){console.log("调用成功",e.data);var n=(null==e?void 0:e.data)||{},i={data:JSON.stringify(n),status:e.statusCode};t(i)},fail:function(e){console.log("调用失败",e.errorCode),n({data:e.errorCode})}})}))},createWebSocket:function(e,t){var n=swan.connectSocket({url:e,protocols:t});return{onOpen:function(e){n.onOpen(e)},onClose:function(e){n.onClose((function(t){return e(t.code,t.reason)}))},onError:function(e){n.onError((function(t){return e(t.errMsg)}))},onMessage:function(e){n.onMessage((function(t){return e(t.data)}))},send:function(e){n.send({data:e})},close:function(e,t){n.close({code:e,reason:t})}}},createDataChannel:function(e,t){return"websocket"===t?new i["WebSocketChannel"](this,e):new i["CometChannel"](this,e)}},k=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return uni[e].apply(uni,t)}catch(e){l.error(e)}}},M={setItem:k("setStorageSync"),getItem:k("getStorageSync"),removeItem:k("removeStorageSync"),clear:k("clearStorageSync")},x={tag:"uniapp",httpReq:function(e){var t=e.method||i["HttpMethod"].GET,n=e.timeout||6e4,r=e.headers,o=e.query,s=e.body,a=Object(i["appendUrl"])(e.url,o);return new Promise((function(e){uni.request({url:a,method:t,headers:r,timeout:n,data:s,success:function(t){e({data:t.data,status:t.statusCode})},fail:function(){e({status:i["ErrorCode"].RC_HTTP_REQ_TIMEOUT})}})}))},localStorage:M,sessionStorage:M,isSupportSocket:function(){return!0},useNavi:!0,connectPlatform:"",isFromUniapp:!0,createWebSocket:function(e,t){var n={complete:function(){},url:e,protocols:t},i=uni.connectSocket(n);return{onClose:function(e){i.onClose((function(t){e(t.code,t.reason)}))},onError:function(e){i.onError((function(t){e(t.errMsg)}))},onMessage:function(e){i.onMessage((function(t){e(t.data)}))},onOpen:function(e){i.onOpen(e)},send:function(e){i.send({data:e})},close:function(e,t){i.close({code:e,reason:t})}}},createDataChannel:function(e,t){return"websocket"===t?new i["WebSocketChannel"](this,e):new i["CometChannel"](this,e)}},P=function(e){return e&&e.canIUse&&e.getSystemInfo},A="undefined"!=typeof uni&&P(uni)?function(){switch(Object({NODE_ENV:"production",BASE_URL:"/rcrtc/"}).VUE_APP_PLATFORM){case"app-plus":return x;case"mp-baidu":return O;case"mp-toutiao":return S;case"mp-alipay":return C;case"mp-weixin":return m;default:return h}}():"undefined"!=typeof wx&&P(wx)?m:"undefined"!=typeof my&&P(my)?C:"undefined"!=typeof tt&&P(tt)?S:"undefined"!=typeof swan&&P(swan)?O:h;function D(e){var t=e.conversationType,n=e.channelId,r=e.messageType,o=e.content,s=e.senderUserId,a=e.targetId,c=e.sentTime,l=e.receivedTime,u=e.messageUId,d=e.messageDirection,h=e.isPersited,p=e.isCounted,f=e.isOffLineMessage,g=e.canIncludeExpansion,m=e.expansion,_=e.receivedStatus,v=e.disableNotification,y=e.isMentioned,C=e.isStatusMessage,E=e.readReceiptInfo,b=e.pushConfig,T=e.messageId,S=e.isInterrupt,R=e.isModifyMessage;_||(_=i["ReceivedStatus"].UNREAD);var I={messageType:r,channelId:n||"",content:o,senderUserId:s,targetId:a,conversationType:t,sentTime:c,receivedTime:l,messageUId:u,messageDirection:d,isPersited:h,isCounted:p,isMentioned:y,disableNotification:v,isStatusMessage:C,canIncludeExpansion:g,expansion:m,receivedStatus:_,readReceiptInfo:E,pushConfig:b,messageId:T,isInterrupt:S,isModifyMessage:R};return t!==i["ConversationType"].ULTRA_GROUP&&(I.isOffLineMessage=f),I}!function(e){e.CONNECTING="CONNECTING",e.CONNECTED="CONNECTED",e.DISCONNECT="DISCONNECT",e.SUSPEND="SUSPEND",e.MESSAGES="MESSAGES",e.READ_RECEIPT_RECEIVED="READ_RECEIPT_RECEIVED",e.MESSAGE_RECEIPT_REQUEST="MESSAGE_RECEIPT_REQUEST",e.MESSAGE_RECEIPT_RESPONSE="MESSAGE_RECEIPT_RESPONSE",e.CONVERSATION="CONVERSATION",e.CHATROOM="CHATROOM",e.EXPANSION="EXPANSION",e.PULL_OFFLINE_MESSAGE_FINISHED="PULL_OFFLINE_MESSAGE_FINISHED",e.TAG="TAG",e.CONVERSATION_TAG="CONVERSATION_TAG",e.TYPING_STATUS="TYPING_STATUS",e.MESSAGE_BLOCKED="MESSAGE_BLOCKED",e.ULTRA_GROUP_ENABLE="ULTRA_GROUP_ENABLE",e.OPERATE_STATUS="OPERATE_STATUS",e.ULTRA_GROUP_MESSAGE_EXPANSION_UPDATED="ULTRA_GROUP_MESSAGE_EXPANSION_UPDATED",e.ULTRA_GROUP_MESSAGE_MODIFIED="ULTRA_GROUP_MESSAGE_MODIFIED",e.ULTRA_GROUP_MESSAGE_RECALLED="ULTRA_GROUP_MESSAGE_RECALLED"}(c||(c={}));var N,L=function(e){function t(n){var r=e.call(this)||this;if(t.imClient)return l.error("Please do not repeatedly perform the init method"),t.imClient;Object(i["assert"])("options.navigators",n.navigators,(function(e){return Object(i["isArray"])(e)&&(0===e.length||e.every(i["isHttpUrl"]))}));var o=null==n?void 0:n.connectType;return o?i["CONNECTION_TYPE"].WEBSOCKET!==o&&i["CONNECTION_TYPE"].COMET!==o&&(l.warn("RongIMLib connectionType must be "+i["CONNECTION_TYPE"].WEBSOCKET+" or "+i["CONNECTION_TYPE"].COMET),o=i["CONNECTION_TYPE"].WEBSOCKET):o=i["CONNECTION_TYPE"].WEBSOCKET,r._context=i["APIContext"].init(A,{appkey:n.appkey,apiVersion:"5.2.1",navigators:n.navigators||[],miniCMPProxy:n.customCMP||[],connectionType:o,logLevel:n.logLevel,logStdout:n.logStdout,indexDBSwitch:n.indexDBSwitch,checkCA:n.checkCA}),r.watch(),t.imClient=r,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),Object.defineProperty(t.prototype,"context",{get:function(){if(!this._context)throw new Error("Please perform the init method!");return this._context},enumerable:!1,configurable:!0}),t.prototype.watch=function(){var e=this,t={onConnecting:function(){e.emit(c.CONNECTING)},onConnected:function(){e.emit(c.CONNECTED)},onDisconnect:function(t){e.emit(c.DISCONNECT,t)},onSuspend:function(t){e.emit(c.SUSPEND,t)},batchMessage:function(t){e.emit(c.MESSAGES,{messages:t.map((function(e){return D(e)}))})},typingState:function(t){e.emit(c.TYPING_STATUS,{status:t})},readReceiptReceived:function(t,n,i){e.emit(c.READ_RECEIPT_RECEIVED,{conversation:t,messageUId:n,sentTime:i})},messageReceiptRequest:function(t,n,i){e.emit(c.MESSAGE_RECEIPT_REQUEST,{conversation:t,messageUId:n,senderUserId:i})},messageReceiptResponse:function(t,n,i){e.emit(c.MESSAGE_RECEIPT_RESPONSE,{conversation:t,receivedUserId:n,messageUIdList:i})},conversationState:function(t){var n=t.map((function(e){var t=e.conversationType;return t===i["ConversationType"].ULTRA_GROUP?{conversation:{conversationType:t,latestMessage:e.latestMessage?D(e.latestMessage):null,targetId:e.targetId,unreadMessageCount:e.unreadMessageCount,unreadMentionedCount:e.unreadMentionedCount,versionTime:e.versionTime,notificationStatus:e.notificationStatus,lastUnreadTime:e.lastUnreadTime,channelId:e.channelId}}:{conversation:{conversationType:t,latestMessage:e.latestMessage?D(e.latestMessage):null,targetId:e.targetId,unreadMessageCount:e.unreadMessageCount,hasMentioned:e.hasMentioned,mentionedInfo:e.mentionedInfo,lastUnreadTime:e.lastUnreadTime,notificationStatus:e.notificationStatus,isTop:e.isTop,channelId:e.channelId,unreadMentionedCount:e.unreadMentionedCount},updatedItems:e.updatedItems}}));e.emit(c.CONVERSATION,{conversationList:n})},chatroomState:function(t){e.emit(c.CHATROOM,t)},expansion:function(t){e.emit(c.EXPANSION,t)},pullFinished:function(){e.emit(c.PULL_OFFLINE_MESSAGE_FINISHED)},tag:function(){e.emit(c.TAG)},conversationTagChanged:function(){e.emit(c.CONVERSATION_TAG)},messageBlocked:function(t){e.emit(c.MESSAGE_BLOCKED,t)},ultraGroupEnable:function(t){e.emit(c.ULTRA_GROUP_ENABLE,t)},operateStatus:function(t){e.emit(c.OPERATE_STATUS,t)},ultraGroupMessageExpansionUpdated:function(t){e.emit(c.ULTRA_GROUP_MESSAGE_EXPANSION_UPDATED,t)},ultraGroupMessageModified:function(t){e.emit(c.ULTRA_GROUP_MESSAGE_MODIFIED,t)},ultraGroupMessageRecalled:function(t){e.emit(c.ULTRA_GROUP_MESSAGE_RECALLED,t)}};this.context.assignWatcher(t)},t}(i["EventEmitter"]),U={TIMEOUT:{code:-1,msg:"Network timeout"},SDK_INTERNAL_ERROR:{code:-2,msg:"SDK internal error"},PARAMETER_ERROR:{code:-3,msg:"Please check the parameters, the {param} expected a value of {expect} but received {current}"},REJECTED_BY_BLACKLIST:{code:405,msg:"Blacklisted by the other party"},SEND_TOO_FAST:{code:20604,msg:"Sending messages too quickly"},NOT_IN_GROUP:{code:22406,msg:"Not in group"},FORBIDDEN_IN_GROUP:{code:22408,msg:"Forbbiden from speaking in the group"},NOT_IN_CHATROOM:{code:23406,msg:"Not in chatRoom"},FORBIDDEN_IN_CHATROOM:{code:23408,msg:"Forbbiden from speaking in the chatRoom"},KICKED_FROM_CHATROOM:{code:23409,msg:"Kicked out and forbbiden from joining the chatRoom"},CHATROOM_NOT_EXIST:{code:23410,msg:"ChatRoom does not exist"},CHATROOM_IS_FULL:{code:23411,msg:"ChatRoom members exceeded"},PARAMETER_INVALID_CHATROOM:{code:23412,msg:"Invalid chatRoom parameters"},ROAMING_SERVICE_UNAVAILABLE_CHATROOM:{code:23414,msg:"ChatRoom message roaming service is not open, Please go to the developer to open this service"},RECALLMESSAGE_PARAMETER_INVALID:{code:25101,msg:"Invalid recall message parameter"},ROAMING_SERVICE_UNAVAILABLE_MESSAGE:{code:25102,msg:"Single group chat roaming service is not open, Please go to the developer to open this service"},PUSHSETTING_PARAMETER_INVALID:{code:26001,msg:"Invalid push parameter"},OPERATION_BLOCKED:{code:20605,msg:"Operation is blocked"},OPERATION_NOT_SUPPORT:{code:20606,msg:"Operation is not supported"},MSG_BLOCKED_SENSITIVE_WORD:{code:21501,msg:"The sent message contains sensitive words"},REPLACED_SENSITIVE_WORD:{code:21502,msg:"Sensitive words in the message have been replaced"},NOT_CONNECTED:{code:30001,msg:"Please connect successfully first"},NAVI_REQUEST_ERROR:{code:30007,msg:"Navigation http request failed"},CMP_REQUEST_ERROR:{code:30010,msg:"CMP sniff http request failed"},CONN_APPKEY_FAKE:{code:31002,msg:"Your appkey is fake"},CONN_MINI_SERVICE_NOT_OPEN:{code:31003,msg:"Mini program service is not open, Please go to the developer to open this service"},CONN_ACK_TIMEOUT:{code:31e3,msg:"Connection ACK timeout"},CONN_TOKEN_INCORRECT:{code:31004,msg:"Your token is not valid or expired"},CONN_NOT_AUTHRORIZED:{code:31005,msg:"AppKey and Token do not match"},CONN_REDIRECTED:{code:31006,msg:"Connection redirection"},CONN_APP_BLOCKED_OR_DELETED:{code:31008,msg:"AppKey is banned or deleted"},CONN_USER_BLOCKED:{code:31009,msg:"User blocked"},CONN_DOMAIN_INCORRECT:{code:31012,msg:"Connect domain error, Please check the set security domain"},ROAMING_SERVICE_UNAVAILABLE:{code:33007,msg:"Roaming service cloud is not open, Please go to the developer to open this service"},RC_CONNECTION_EXIST:{code:34001,msg:"Connection already exists"},CHATROOM_KV_EXCEED:{code:23423,msg:"ChatRoom KV setting exceeds maximum"},CHATROOM_KV_OVERWRITE_INVALID:{code:23424,msg:"ChatRoom KV already exists"},CHATROOM_KV_STORE_NOT_OPEN:{code:23426,msg:"ChatRoom KV storage service is not open, Please go to the developer to open this service"},CHATROOM_KEY_NOT_EXIST:{code:23427,msg:"ChatRoom key does not exist"},MSG_KV_NOT_SUPPORT:{code:34008,msg:"The message cannot be extended"},SEND_MESSAGE_KV_FAIL:{code:34009,msg:"Sending RC expansion message fail"},EXPANSION_LIMIT_EXCEET:{code:34010,msg:"The message expansion size is beyond the limit"},ILLGAL_PARAMS:{code:33003,msg:"Incorrect parameters passed in while calling the interface"},UPLOAD_FILE_FAILED:{code:35020,msg:"File upload failed"},CHATROOM_KV_STORE_NOT_ALL_SUCCESS:{code:23428,msg:"Chatroom kv store not all success"},CHATROOM_KV_STORE_OUT_LIMIT:{code:23429,msg:"Chatroom kv's length is out of limit"},TAG_EXISTS:{code:33101,msg:"The tag already exists"},TAG_NOT_EXIST:{code:33100,msg:"The tag does not exist"},NOT_SUPPORT:{code:i["ErrorCode"].NOT_SUPPORT,msg:"The method is not supported in a browser!"}},B={},V={};for(var j in U){var F=U[j],$=F.code;B[$]=j,V[$]=F}U.ROAMING_SERVICE_UNAVAILABLE.code;var H=function(e){N=N||new L(e)};function K(e,t){return null==N?void 0:N.context.install(e,t)}function W(e,t){return s(this,void 0,void 0,(function(){var n;return a(this,(function(r){switch(r.label){case 0:return Object(i["assert"])("token",e,i["AssertRules"].STRING,!0),l.warn("RongIMLib Version: 5.2.1, Commit: 5f3d7b5af1e6e31d4545ef0973b990837060617b"),[4,N.context.connect(e,!1,t)];case 1:return(n=r.sent()).code===i["ErrorCode"].SUCCESS?[2,{code:n.code,data:{userId:n.userId}}]:[2,{code:n.code,msg:B[n.code]}]}}))}))}function q(){return N.context.disconnect()}function G(){return N.context.getConnectionStatus()}function z(){return N.context.getServerTime()}function Y(){return N.context.getCurrentUserId()}function J(e,t,n){N.on(e,t,n)}function X(e,t,n){N.once(e,t,n)}function Q(e,t,n){N.off(e,t,n)}function Z(e){N.removeAll(e)}function ee(){N.clear()}function te(e,t){i["VersionManage"].add(e,t)}function ne(e,t){return s(this,void 0,void 0,(function(){var n,r,o,s;return a(this,(function(a){switch(a.label){case 0:return l.debug("get conversation list ->"),[4,L.imClient.context.getConversationList(null==e?void 0:e.count,void 0,null==e?void 0:e.startTime,null==e?void 0:e.order,t)];case 1:return n=a.sent(),r=n.code,o=n.data,r===i["ErrorCode"].SUCCESS&&o?(s=o.map((function(e){return function(e){var t=e.conversationType,n=e.targetId,i=e.latestMessage,r=e.unreadMessageCount,o=e.hasMentioned,s=e.mentionedInfo,a=e.lastUnreadTime,c=e.notificationStatus,l=e.isTop,u=e.channelId,d=e.unreadMentionedCount;return{conversationType:t,targetId:n,latestMessage:i&&D(i),unreadMessageCount:r,hasMentioned:o,mentionedInfo:o?{type:null==s?void 0:s.type,userIdList:null==s?void 0:s.userIdList}:void 0,lastUnreadTime:a,notificationStatus:c,isTop:l,channelId:u,unreadMentionedCount:d}}(e)})),[2,{code:0,data:s}]):(l.warn("get conversation list fail ->"+r+":"+B[r]),[2,{code:r,msg:B[r]}])}}))}))}function ie(e){return s(this,void 0,void 0,(function(){var t,n;return a(this,(function(r){switch(r.label){case 0:return Object(i["assert"])("options.conversationType",e.conversationType,i["isValidConversationType"],!0),Object(i["assert"])("options.targetId",e.targetId,i["AssertRules"].STRING,!0),Object(i["assert"])("options.channelId",e.channelId,i["AssertRules"].CHANNEL_ID),[4,L.imClient.context.removeConversation(e.conversationType,e.targetId,e.channelId)];case 1:return t=r.sent(),n="conversationType:"+e.conversationType+",targetId:"+e.targetId,l.debug("destroy conversation ->"+n),t!==i["ErrorCode"].SUCCESS?(l.warn("destroy conversation fail ->"+t+":"+B[t]+","+n),[2,{code:t,msg:B[t]}]):[2,{code:t}]}}))}))}function re(e){return s(this,void 0,void 0,(function(){var t,n,r,o;return a(this,(function(s){switch(s.label){case 0:return Object(i["assert"])("options.conversationType",e.conversationType,i["isValidConversationType"],!0),Object(i["assert"])("options.targetId",e.targetId,i["AssertRules"].STRING,!0),Object(i["assert"])("options.channelId",e.channelId,i["AssertRules"].CHANNEL_ID),[4,L.imClient.context.getConversationMessageDraft(e.conversationType,e.targetId,e.channelId)];case 1:return t=s.sent(),n=t.code,r=t.data,o="conversationType:"+e.conversationType+",targetId:"+e.targetId,l.debug("get draft ->"+o),n===i["ErrorCode"].SUCCESS?[2,{code:n,data:r||""}]:(l.warn("get draft fail ->"+n+":"+B[n]+","+o),[2,{code:n,msg:B[n]}])}}))}))}function oe(e,t){return s(this,void 0,void 0,(function(){var n,r;return a(this,(function(o){switch(o.label){case 0:return Object(i["assert"])("options.conversationType",e.conversationType,i["isValidConversationType"],!0),Object(i["assert"])("options.targetId",e.targetId,i["AssertRules"].STRING,!0),Object(i["assert"])("options.channelId",e.channelId,i["AssertRules"].CHANNEL_ID),Object(i["assert"])("draft",t,i["AssertRules"].STRING,!0),n="conversationType:"+e.conversationType+",targetId:"+e.targetId,l.debug("set draft ->"+n),[4,L.imClient.context.saveConversationMessageDraft(e.conversationType,e.targetId,t,e.channelId)];case 1:return(r=o.sent())===i["ErrorCode"].SUCCESS?[2,{code:r}]:(l.warn("set draft fail ->"+r+":"+B[r]+","+n),[2,{code:r,msg:B[r]}])}}))}))}function se(e){return s(this,void 0,void 0,(function(){var t,n;return a(this,(function(r){switch(r.label){case 0:return Object(i["assert"])("options.conversationType",e.conversationType,i["isValidConversationType"],!0),Object(i["assert"])("options.targetId",e.targetId,i["AssertRules"].STRING,!0),Object(i["assert"])("options.channelId",e.channelId,i["AssertRules"].CHANNEL_ID),t="conversationType:"+e.conversationType+",targetId:"+e.targetId,l.debug("delete draft  ->"+t),[4,L.imClient.context.clearConversationMessageDraft(e.conversationType,e.targetId,e.channelId)];case 1:return(n=r.sent())===i["ErrorCode"].SUCCESS?[2,{code:n}]:(l.warn("delete draft fail ->"+n+":"+B[n]+","+t),[2,{code:n,msg:B[n]}])}}))}))}function ae(e,t){return s(this,void 0,void 0,(function(){var n,r,o,s,c,u;return a(this,(function(a){switch(a.label){case 0:if(l.debug("get total unread count -> ConversationType:"+JSON.stringify(t)+" includeMuted:"+e),Object(i["assert"])("includeMuted",e,i["AssertRules"].BOOLEAN,!1),Object(i["assert"])("conversationTypes",t,i["AssertRules"].ARRAY,!1),t)for(n=0,r=t;n<r.length;n++)o=r[n],Object(i["assert"])("conversationType",o,i["isValidConversationType"]);return[4,L.imClient.context.getTotalUnreadCount("",t,e)];case 1:return s=a.sent(),c=s.code,u=s.data,c===i["ErrorCode"].SUCCESS?[2,{code:c,data:u}]:(l.warn("getTotalUnreadCount fail ->"+c+":"+B[c]),[2,{code:c,msg:B[c]}])}}))}))}function ce(e){return s(this,void 0,void 0,(function(){var t,n,r,o;return a(this,(function(s){switch(s.label){case 0:return Object(i["assert"])("options.conversationType",e.conversationType,i["isValidConversationType"],!0),Object(i["assert"])("options.targetId",e.targetId,i["AssertRules"].STRING,!0),Object(i["assert"])("options.channelId",e.channelId,i["AssertRules"].CHANNEL_ID),[4,L.imClient.context.getUnreadCount(e.conversationType,e.targetId,e.channelId)];case 1:return t=s.sent(),n=t.code,r=t.data,o="conversationType:"+e.conversationType+",targetId:"+e.targetId,l.debug("get unreadCount ->"+o),n===i["ErrorCode"].SUCCESS?[2,{code:n,data:r}]:(l.warn("get unreadCount fail ->"+n+":"+B[n]+","+o),[2,{code:n,msg:B[n]}])}}))}))}function le(e){return s(this,void 0,void 0,(function(){var t,n;return a(this,(function(r){switch(r.label){case 0:return Object(i["assert"])("options.conversationType",e.conversationType,i["isValidConversationType"],!0),Object(i["assert"])("options.targetId",e.targetId,i["AssertRules"].STRING,!0),Object(i["assert"])("options.channelId",e.channelId,i["AssertRules"].CHANNEL_ID),[4,L.imClient.context.clearUnreadCount(e.conversationType,e.targetId,e.channelId)];case 1:return t=r.sent(),n="conversationType:"+e.conversationType+",targetId:"+e.targetId,l.debug("clear unreadMsgNum ->"+n),t!==i["ErrorCode"].SUCCESS?(l.warn("clear unreadMsgNum fail ->"+t+":"+B[t]+","+n),[2,{code:t,msg:B[t]}]):[2,{code:t}]}}))}))}function ue(){return s(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,L.imClient.context.clearAllUnreadCount()];case 1:return[2,{code:e.sent()}]}}))}))}function de(e,t){return s(this,void 0,void 0,(function(){var n,r;return a(this,(function(o){switch(o.label){case 0:return Object(i["assert"])("options.conversationType",e.conversationType,i["isValidConversationType"],!0),Object(i["assert"])("options.targetId",e.targetId,i["AssertRules"].STRING,!0),Object(i["assert"])("options.channelId",e.channelId,i["AssertRules"].CHANNEL_ID),Object(i["assert"])("notificationStatus",t,(function(e){return 1===e||2===e}),!0),n="conversationType:"+e.conversationType+",targetId:"+e.targetId,l.debug("set conversation status ->"+n),[4,L.imClient.context.setConversationStatus(e.conversationType,e.targetId,void 0,t,e.channelId)];case 1:return(r=o.sent())!==i["ErrorCode"].SUCCESS?(l.warn("set conversation status fail ->"+r+":"+B[r]+","+n),[2,{code:r,msg:B[r]}]):[2,{code:r}]}}))}))}function he(e){return s(this,void 0,void 0,(function(){var t,n,r;return a(this,(function(o){switch(o.label){case 0:return Object(i["assert"])("options.conversationType",e.conversationType,i["isValidConversationType"],!0),Object(i["assert"])("options.targetId",e.targetId,i["AssertRules"].STRING,!0),Object(i["assert"])("options.channelId",e.channelId,i["AssertRules"].CHANNEL_ID),l.info("getConversationNotificationStatus ->targetId:"+e.targetId+",conversationType:"+e.conversationType),[4,L.imClient.context.getConversationNotificationStatus(e.conversationType,e.targetId,e.channelId)];case 1:return t=o.sent(),n=t.code,r=t.data,n===i["ErrorCode"].SUCCESS?[2,{code:n,data:r}]:(l.warn("getConversationNotificationStatus ->code:"+n+",targetId:"+e.targetId),[2,{code:n,msg:B[n]}])}}))}))}function pe(){return s(this,void 0,void 0,(function(){var e,t,n;return a(this,(function(i){switch(i.label){case 0:return[4,L.imClient.context.getBlockConversationList()];case 1:return e=i.sent(),t=e.code,n=e.data,[2,{code:t,data:n}]}}))}))}function fe(e,t){return void 0===t&&(t=!0),s(this,void 0,void 0,(function(){var n,r;return a(this,(function(o){switch(o.label){case 0:return Object(i["assert"])("options.type",e.conversationType,i["isValidConversationType"],!0),Object(i["assert"])("options.targetId",e.targetId,i["AssertRules"].STRING,!0),Object(i["assert"])("options.channelId",e.channelId,i["AssertRules"].CHANNEL_ID),n="conversationType:"+e.conversationType+",targetId:"+e.targetId,l.debug("set conversation status ->"+n),[4,L.imClient.context.setConversationStatus(e.conversationType,e.targetId,t,void 0,e.channelId)];case 1:return(r=o.sent())!==i["ErrorCode"].SUCCESS?(l.warn("set conversation status fail ->"+r+":"+B[r]+","+n),[2,{code:r,msg:B[r]}]):[2,{code:r}]}}))}))}function ge(){return s(this,void 0,void 0,(function(){var e,t,n;return a(this,(function(i){switch(i.label){case 0:return[4,L.imClient.context.getTopConversationList()];case 1:return e=i.sent(),t=e.code,n=e.data,[2,{code:t,data:n}]}}))}))}function me(e){return s(this,void 0,void 0,(function(){return a(this,(function(t){return Object(i["assert"])("options.targetId",e.targetId,i["AssertRules"].STRING,!0),Object(i["assert"])("options.channelId",e.channelId,i["AssertRules"].CHANNEL_ID),l.debug("getUnreadMentionedCount"+e.targetId+",channelId:"+e.channelId),[2,L.imClient.context.getUnreadMentionedCount(e)]}))}))}function _e(){return s(this,void 0,void 0,(function(){return a(this,(function(e){return l.debug("getAllUnreadMentionedCount"),[2,L.imClient.context.getAllUnreadMentionedCount()]}))}))}function ve(){return s(this,void 0,void 0,(function(){return a(this,(function(e){return[2,L.imClient.context.getAllConversationState()]}))}))}function ye(){return s(this,void 0,void 0,(function(){var e,t,n;return a(this,(function(r){switch(r.label){case 0:return[4,L.imClient.context.getUltraGroupList()];case 1:return e=r.sent(),t=e.code,n=e.data,t===i["ErrorCode"].SUCCESS?[2,{code:i["ErrorCode"].SUCCESS,data:n}]:(l.warn("get ultragroup  ->"+t+":"+B[t]),[2,{code:t,msg:B[t]}])}}))}))}function Ce(){return s(this,void 0,void 0,(function(){var e,t,n;return a(this,(function(r){switch(r.label){case 0:return[4,L.imClient.context.getBlockUltraGroupList()];case 1:return e=r.sent(),t=e.code,n=e.data,t===i["ErrorCode"].SUCCESS?[2,{code:i["ErrorCode"].SUCCESS,data:n}]:(l.warn("get block ultragroup  ->"+t+":"+B[t]),[2,{code:t,msg:B[t]}])}}))}))}function Ee(e){return s(this,void 0,void 0,(function(){var t;return a(this,(function(n){switch(n.label){case 0:return Object(i["assert"])("options.targetId",e.targetId,i["AssertRules"].STRING,!0),Object(i["assert"])("options.channelId",e.channelId,i["AssertRules"].CHANNEL_ID),Object(i["assert"])("options.conversationType",e.conversationType,i["isValidConversationType"],!0),[4,L.imClient.context.sendUltraGroupTypingStatus(e)];case 1:return(t=n.sent().code)===i["ErrorCode"].SUCCESS?[2,{code:i["ErrorCode"].SUCCESS}]:(l.warn("send ultraGroup OperateStatus   ->"+t+":"+B[t]),[2,{code:t,msg:B[t]}])}}))}))}function be(e,t){return s(this,void 0,void 0,(function(){var n,r,o,s,c,u,d,h;return a(this,(function(a){switch(a.label){case 0:return Object(i["assert"])("options.targetId",e.targetId,i["AssertRules"].STRING,!0),Object(i["assert"])("options.channelId",e.channelId,i["AssertRules"].CHANNEL_ID),Object(i["assert"])("options.conversationType",e.conversationType,i["isValidConversationType"],!0),Object(i["assert"])("msgs",t,i["AssertRules"].ARRAY,!0),n=e.targetId,r=e.conversationType,o=e.channelId,s=[],t.forEach((function(e){var t=e.sendTime,n=e.messageUId;s.push({sendTime:t,messageUId:n,channelId:o})})),c={targetId:n,conversationType:r,messages:s},[4,L.imClient.context.getUltraGroupMessageListByMessageUId(c)];case 1:return u=a.sent(),d=u.code,h=u.data,d===i["ErrorCode"].SUCCESS?[2,{code:i["ErrorCode"].SUCCESS,data:h}]:(l.warn("get UltraGroup MessageList by messageUId   ->"+d+":"+B[d]),[2,{code:d,msg:B[d]}])}}))}))}function Te(e,t){return s(this,void 0,void 0,(function(){var n,r,o,s,c,u,d,h,p;return a(this,(function(a){switch(a.label){case 0:return Object(i["assert"])("expansion",e,i["AssertRules"].OBJECT,!0),Object(i["assert"])("message",t,i["AssertRules"].OBJECT,!0),n=t.conversationType,r=t.targetId,o=t.messageUId,s=t.sentTime,c=t.canIncludeExpansion,u=t.channelId,d="conversationType:"+n+",targetId:"+r+",channelId:"+u+",messageUId:"+o,l.debug("update expansion for ultragroup message  ->"+d),h={targetId:r,channelId:u,conversationType:n,sendTime:s,canIncludeExpansion:c,messageUId:o,expansion:e},[4,L.imClient.context.expandUltraMessage(h)];case 1:return(p=a.sent().code)===i["ErrorCode"].SUCCESS?[2,{code:i["ErrorCode"].SUCCESS}]:(l.warn("update expansion for ultragroup message   ->"+p+":"+B[p]),[2,{code:p,msg:B[p]}])}}))}))}function Se(e,t){return s(this,void 0,void 0,(function(){var n,r,o,s,c,u,d,h,p;return a(this,(function(a){switch(a.label){case 0:return Object(i["assert"])("expansion",e,i["AssertRules"].ARRAY,!0),Object(i["assert"])("message",t,i["AssertRules"].OBJECT,!0),n=t.conversationType,r=t.targetId,o=t.messageUId,s=t.sentTime,c=t.canIncludeExpansion,u=t.channelId,d="conversationType:"+n+",targetId:"+r+",channelId:"+u+",messageUId:"+o,l.debug("remove expansion for ultragroup message  ->"+d),h={targetId:r,channelId:u,conversationType:n,sendTime:s,canIncludeExpansion:c,messageUId:o,keys:e},[4,L.imClient.context.expandUltraMessage(h)];case 1:return(p=a.sent().code)===i["ErrorCode"].SUCCESS?[2,{code:i["ErrorCode"].SUCCESS}]:(l.warn("remove expansion for ultraGroup message   ->"+p+":"+B[p]),[2,{code:p,msg:B[p]}])}}))}))}function Re(e){return s(this,void 0,void 0,(function(){var t,n,r,o,s,c,u,d,h;return a(this,(function(a){switch(a.label){case 0:return Object(i["assert"])("message",e,i["AssertRules"].OBJECT,!0),t=e.conversationType,n=e.targetId,r=e.messageUId,o=e.sentTime,s=e.canIncludeExpansion,c=e.channelId,u="conversationType:"+t+",targetId:"+n+",channelId:"+c+",messageUId:"+r,l.debug("remove all expansion for ultraGroup message ->"+u),d={targetId:n,channelId:c,conversationType:t,sendTime:o,canIncludeExpansion:s,messageUId:r,removeAll:!0},[4,L.imClient.context.expandUltraMessage(d)];case 1:return(h=a.sent().code)===i["ErrorCode"].SUCCESS?[2,{code:i["ErrorCode"].SUCCESS}]:(l.warn("remove all expansion for ultraGroup message   ->"+h+":"+B[h]),[2,{code:h,msg:B[h]}])}}))}))}function Ie(e,t){return s(this,void 0,void 0,(function(){var n,r,o,s,c,u,d,h,p,f;return a(this,(function(a){switch(a.label){case 0:return Object(i["assert"])("content",e,i["AssertRules"].OBJECT,!0),Object(i["assert"])("message",t,i["AssertRules"].OBJECT,!0),n=t.conversationType,r=t.targetId,o=t.messageUId,s=t.senderUserId,c=t.sentTime,u=t.canIncludeExpansion,d=t.channelId,h="conversationType:"+n+",targetId:"+r+",channelId:"+d+",messageUId:"+o,l.debug("update ultragroup message expansion ->"+h),p={targetId:r,channelId:d,conversationType:n,fromUserId:s,sendTime:c,canIncludeExpansion:u,messageUId:o,content:e},[4,L.imClient.context.modifyMessage(p)];case 1:return(f=a.sent().code)===i["ErrorCode"].SUCCESS?[2,{code:i["ErrorCode"].SUCCESS}]:(l.warn("modify ultraGroup message   ->"+f+":"+B[f]),[2,{code:f,msg:B[f]}])}}))}))}function we(e){return s(this,void 0,void 0,(function(){var t,n,r;return a(this,(function(o){switch(o.label){case 0:return Object(i["assert"])("cotargetIdntent",e,i["AssertRules"].STRING,!0),l.debug("get UltraGroup unreadMentionedCount by targetId:"+e),[4,L.imClient.context.getUltraGroupUnreadMentionedCountByTargetId(e)];case 1:return t=o.sent(),n=t.code,r=t.data,n===i["ErrorCode"].SUCCESS?[2,{code:i["ErrorCode"].SUCCESS,data:r}]:(l.warn("get UltraGroup unreadMentionedCount by targetId error ->"+n+":"+B[n]),[2,{code:n,msg:B[n]}])}}))}))}var Oe=function(e){Object(i["assert"])("options.key",e.key,i["AssertRules"].STRING,!0),Object(i["assert"])("options.value",e.value,i["AssertRules"].STRING,!0),Object(i["assert"])("options.isAutoDelete",e.isAutoDelete,i["AssertRules"].BOOLEAN),Object(i["assert"])("options.isSendNotification",e.isSendNotification,i["AssertRules"].BOOLEAN),Object(i["assert"])("options.notificationExtra",e.notificationExtra,i["AssertRules"].STRING)},ke=function(e){Object(i["assert"])("options.key",e.key,i["AssertRules"].STRING,!0),Object(i["assert"])("options.isSendNotification",e.isSendNotification,i["AssertRules"].BOOLEAN),Object(i["assert"])("options.notificationExtra",e.notificationExtra,i["AssertRules"].STRING)};function Me(e,t){return s(this,void 0,void 0,(function(){var n,r;return a(this,(function(o){switch(o.label){case 0:return Object(i["assert"])("options.count",t.count,i["AssertRules"].NUMBER,!0),n="id:"+e,l.debug("join chatroom ->"+n),[4,L.imClient.context.joinChatroom(e,t.count)];case 1:return(r=o.sent())!==i["ErrorCode"].SUCCESS?(l.warn("join chatroom fail ->code+:"+B[r]+","+n),[2,{code:r,msg:B[r]}]):[2,{code:r}]}}))}))}function xe(e,t){return s(this,void 0,void 0,(function(){var n,r;return a(this,(function(o){switch(o.label){case 0:return Object(i["assert"])("options.count",t.count,i["AssertRules"].NUMBER,!0),n="id:"+e,l.debug("join exist chatroom ->"+n),[4,L.imClient.context.joinExistChatroom(e,t.count)];case 1:return(r=o.sent())!==i["ErrorCode"].SUCCESS?(l.warn("join exist chatroom fail ->code:"+B[r]+","+n),[2,{code:r,msg:B[r]}]):[2,{code:r}]}}))}))}function Pe(e){return s(this,void 0,void 0,(function(){var t,n;return a(this,(function(r){switch(r.label){case 0:return t="id:"+e,l.debug("quit chatroom ->"+t),[4,L.imClient.context.quitChatroom(e)];case 1:return(n=r.sent())!==i["ErrorCode"].SUCCESS?(l.warn("quit chatroom fail ->code+:"+B[n]+","+t),[2,{code:n,msg:B[n]}]):[2,{code:n}]}}))}))}function Ae(e,t){return s(this,void 0,void 0,(function(){var n,r,o,s;return a(this,(function(a){switch(a.label){case 0:return Object(i["assert"])("options.count",t.count,i["AssertRules"].NUMBER),Object(i["assert"])("options.order",t.order,(function(e){return[0,1,2].includes(e)})),n="id:"+e,l.debug("get chatroom info ->"+n),[4,L.imClient.context.getChatroomInfo(e,t.count,t.order)];case 1:return r=a.sent(),o=r.code,s=r.data,o===i["ErrorCode"].SUCCESS&&s?[2,{code:o,data:s}]:(l.warn("get chatroom info fail ->code+:"+B[o]+","+n),[2,{code:o,msg:B[o]}])}}))}))}function De(e,t){return s(this,void 0,void 0,(function(){var n,r;return a(this,(function(o){switch(o.label){case 0:return Object(i["assert"])("targetId",e,i["AssertRules"].STRING,!0),Oe(t),n="id:"+e,l.debug("set chatroom entry->"+n),[4,L.imClient.context.setChatroomEntry(e,t)];case 1:return(r=o.sent())!==i["ErrorCode"].SUCCESS?(l.warn("set chatroom entry fail ->code+:"+B[r]+","+n),[2,{code:r,msg:B[r]}]):[2,{code:r}]}}))}))}function Ne(e,t){return s(this,void 0,void 0,(function(){var n,r,o,s;return a(this,(function(a){switch(a.label){case 0:return Object(i["assert"])("targetId",e,i["AssertRules"].STRING,!0),function(e){e.entries.forEach((function(e){Object(i["assert"])("entry.key",e.key,i["AssertRules"].STRING,!0),Object(i["assert"])("entry.value",e.value,i["AssertRules"].STRING,!0)})),Object(i["assert"])("options.isAutoDelete",e.isAutoDelete,i["AssertRules"].BOOLEAN),Object(i["assert"])("options.notificationExtra",e.notificationExtra,i["AssertRules"].STRING)}(t),t.entries.length>10?[2,U.CHATROOM_KV_STORE_OUT_LIMIT]:(n="id:"+e,l.debug("set chatroom entry->"+n),[4,L.imClient.context.setChatroomEntries(e,t)]);case 1:return r=a.sent(),o=r.code,s=r.data,o!==i["ErrorCode"].SUCCESS?(l.warn("set chatroom entry fail ->code+:"+B[o]+","+n),[2,{code:o,msg:B[o],data:s}]):[2,{code:o}]}}))}))}function Le(e,t){return s(this,void 0,void 0,(function(){var n,r;return a(this,(function(o){switch(o.label){case 0:return Object(i["assert"])("targetId",e,i["AssertRules"].STRING,!0),Oe(t),n="id:"+e,l.debug("force set chatroom entry ->"+n),[4,L.imClient.context.forceSetChatroomEntry(e,t)];case 1:return(r=o.sent())!==i["ErrorCode"].SUCCESS?(l.warn("force set chatroom entry fail ->code+:"+B[r]+","+n),[2,{code:r,msg:B[r]}]):[2,{code:r}]}}))}))}function Ue(e,t){return s(this,void 0,void 0,(function(){var n,r;return a(this,(function(o){switch(o.label){case 0:return Object(i["assert"])("targetId",e,i["AssertRules"].STRING,!0),ke(t),n="id:"+e,l.debug("remove chatroom entry->"+n),[4,L.imClient.context.removeChatroomEntry(e,t)];case 1:return(r=o.sent())!==i["ErrorCode"].SUCCESS?(l.warn("remove chatroom entry fail ->code+:"+B[r]+","+n),[2,{code:r,msg:B[r]}]):[2,{code:r}]}}))}))}function Be(e,t){return s(this,void 0,void 0,(function(){var n,r,o,s,c;return a(this,(function(a){switch(a.label){case 0:return Object(i["assert"])("targetId",e,i["AssertRules"].STRING,!0),function(e){e.entries.forEach((function(e){Object(i["assert"])("key",e,i["AssertRules"].STRING,!0)})),Object(i["assert"])("options.notificationExtra",e.notificationExtra,i["AssertRules"].STRING)}(t),n="id:"+e,l.debug("remove chatroom entry->"+n),(r=Object.assign({},t)).entries=t.entries.map((function(e){return{key:e}})),[4,L.imClient.context.removeChatroomEntries(e,r)];case 1:return o=a.sent(),s=o.code,c=o.data,s!==i["ErrorCode"].SUCCESS?(l.warn("remove chatroom entry fail ->code+:"+B[s]+","+n),[2,{code:s,msg:B[s],data:c}]):[2,{code:s}]}}))}))}function Ve(e,t){return s(this,void 0,void 0,(function(){var n,r;return a(this,(function(o){switch(o.label){case 0:return Object(i["assert"])("targetId",e,i["AssertRules"].STRING,!0),ke(t),n="id:"+e,l.debug("force remove chatroom entry ->"+n),[4,L.imClient.context.forceRemoveChatroomEntry(e,t)];case 1:return(r=o.sent())!==i["ErrorCode"].SUCCESS?(l.warn("force remove chatroom entry fail ->code+:"+B[r]+","+n),[2,{code:r,msg:B[r]}]):[2,{code:r}]}}))}))}function je(e,t){return s(this,void 0,void 0,(function(){var n,r,o,s;return a(this,(function(a){switch(a.label){case 0:return Object(i["assert"])("key",t,(function(e){return Object(i["isString"])(e)&&/[\w+=-]+/.test(e)&&e.length<=128}),!0),n="id:"+e,l.debug("get chatroom entry->"+n),[4,L.imClient.context.getChatroomEntry(e,t)];case 1:return r=a.sent(),o=r.code,s=r.data,o===i["ErrorCode"].SUCCESS&&s?[2,{code:o,data:s}]:(l.warn("get chatroom entry fail ->code+:"+B[o]+","+n),[2,{code:o,msg:B[o]}])}}))}))}function Fe(e){return s(this,void 0,void 0,(function(){var t,n,r,o;return a(this,(function(s){switch(s.label){case 0:return t="id:"+e,l.debug("get all chatroom entries->"+t),[4,L.imClient.context.getAllChatroomEntries(e)];case 1:return n=s.sent(),r=n.code,o=n.data,r===i["ErrorCode"].SUCCESS&&o?[2,{code:r,data:o}]:(l.warn("get all chatroom entries fail ->code+:"+B[r]+","+t),[2,{code:r,msg:B[r]}])}}))}))}function $e(e,t){return s(this,void 0,void 0,(function(){var n,r,o,s,c;return a(this,(function(a){switch(a.label){case 0:return Object(i["assert"])("options.timestamp",t.timestamp,i["AssertRules"].NUMBER),Object(i["assert"])("options.count",t.count,i["AssertRules"].NUMBER),Object(i["assert"])("options.order",t.order,(function(e){return 0===e||1===e})),n="id:"+e,l.debug("get chatroom history message->"+n),[4,L.imClient.context.getChatRoomHistoryMessages(e,t.count,t.order,t.timestamp)];case 1:return r=a.sent(),o=r.code,s=r.data,o===i["ErrorCode"].SUCCESS&&s?(c=s.list.map((function(e){return D(e)})),[2,{code:o,data:{list:c,hasMore:!!s.hasMore}}]):(l.warn("get chatroom history message fail ->code+:"+B[o]+","+n),[2,{code:o,msg:B[o]}])}}))}))}function He(e){return s(this,void 0,void 0,(function(){var t;return a(this,(function(n){switch(n.label){case 0:return[4,L.imClient.context.bindRTCRoomForChatroom(e)];case 1:return[2,{code:t=n.sent(),msg:B[t]}]}}))}))}var Ke=function(e,t,n,i){void 0===n&&(n=!0),void 0===i&&(i=!0),this.messageType=e,this.content=t,this.isPersited=n,this.isCounted=i};function We(e,t,n){return void 0===t&&(t=!0),void 0===n&&(n=!0),function(i){return new Ke(e,i,t,n)}}var qe,Ge,ze=We("RC:ImgMsg"),Ye=We("RC:HQVCMsg"),Je=We("RC:SightMsg"),Xe=We("RC:TxtMsg"),Qe=We("RC:CombineMsg"),Ze=We("RC:FileMsg"),et=We("RC:GIFMsg"),nt=We("RC:VcMsg"),it=We("RC:LBSMsg"),rt=We("RC:ReferenceMsg"),ot=We("RC:ImgTextMsg"),st={qiniu:function(e,t,n,r){var o,s="https://"+t.uploadHost.qiniu;o=ut()+at[0][1]||s,at.shift();var a=new XMLHttpRequest;a.upload&&t.support_options&&(a.upload.onprogress=function(e){n.onProgress(e.loaded,e.total)}),a.onreadystatechange=function(){if(4===a.readyState){var o=a.responseText||"{}";(o=JSON.parse(o)).filename=t.uniqueValue,o.uploadMethod=i["UploadMethod"]?i["UploadMethod"].QINIU:"",200===a.status?n.onCompleted(o):at.length?st[at[0][0]](e,t,n,r):n.onError("upload fail")}},t.isChunk&&(o=function(e,t){var n="";return lt(t,(function(e,t){"token"!==e&&(n+=(n?"&":"")+encodeURIComponent(e)+"="+encodeURIComponent(t))})),n&&(e+=(e.indexOf("?")>0?"&":"?")+n),e}(o+="/mkblk/"+e.size,t.multi_parmas)),a.open(t.method,o,!0),n.onOpen(a),t.stream&&a.setRequestHeader("authorization","UpToken "+t.multi_parmas.token),lt(t.headers,(function(e,t){a.setRequestHeader(e,t)})),a.send(e)},baidu:function(e,t,n,i){if(console.log(i,t),i.size>ct)throw new Error("the file size is over 5GB!");var r=t||{};t=t||Ge;var o=new XMLHttpRequest,s=ut();if(r.uploadHost.bos||r.bosUploadPath){var a=s+at[0][1]+r.bosUploadPath;at.shift();var c=r.bosHeader||{},l={filename:t.uniqueValue||i.uniqueName,name:i.name,downloadUrl:a,isBosRes:!0};o.upload&&t.support_options&&(o.upload.onprogress=function(e){n.onProgress(e.loaded,e.total,!0)}),o.onreadystatechange=function(){if(4===o.readyState){var r=o.responseText||"{}";(r=JSON.parse(r)).filename=t.uniqueValue,200===o.status?n.onCompleted(l,!0):at.length?st[at[0][0]](e,t,n,i):n.onError("upload fail")}},o.open(t.method,a,!0),o.setRequestHeader("authorization",c.bosToken),o.setRequestHeader("x-bce-date",c.bosDate),o.send(i)}},aliyun:function(e,t,n,r){if(r.size>ct)throw new Error("the file size is over 5GB!");const o=new FormData;o.set("file",e.get("file")),o.set("key",e.get("key")),o.set("token",e.get("token"));const s=at[0][1];at.shift(),e=e||qe,t=(t=t||{})||Ge;var a=new XMLHttpRequest,c=ut()+t.ossBucketName+"."+s;a.upload&&t.support_options&&(a.upload.onprogress=function(e){n.onProgress(e.loaded,e.total)}),a.onreadystatechange=function(){if(4===a.readyState){var e=a.responseText||"{}";(e=JSON.parse(e)).name=t.uniqueValue,e.filename=t.uploadFileName,e.uploadMethod=i["UploadMethod"]?i["UploadMethod"].ALI:"",200===a.status?n.onCompleted(e):at.length?st[at[0][0]](o,t,n,r):n.onError("upload fail")}},a.open(t.method,c,!0),console.log("ali:url",c);var l=t.aliHeader||{};e.set("OSSAccessKeyId",l.osskeyId),e.set("policy",l.ossPolicy),e.set("Signature",l.ossSign),e.set("success_action_status",200),e.delete("key"),e.append("key",t.uploadFileName),e.delete("file"),e.append("file",r),a.send(e)},s3:function(e,t,n,r){var o=new FormData,s=new XMLHttpRequest,a=ut();const c=at[0][1];var l=a+t.s3BucketName+"."+c;console.log("uploadS3:url",l),at.shift(),s.upload&&t.support_options&&(s.upload.onprogress=function(e){n.onProgress(e.loaded,e.total)}),s.onreadystatechange=function(){if(4===s.readyState){var o=s.responseText||"{}";if((o=JSON.parse(o)).name=t.uniqueValue,o.filename=t.uploadFileName,o.uploadMethod=i["UploadMethod"].AWS,console.log("UploadMethod:",i["UploadMethod"]),200===s.status||204===s.status)n.onCompleted(o);else if(at.length){const i=new FormData;i.set("file",e.get("file")),i.set("key",e.get("key")),i.set("token",e.get("token")),st[at[0][0]](i,t,n,r)}else n.onError("upload fail")}},s.open(t.method,l,!0);var u=t?t.s3Header:{},d=r&&r.type;"text/html"===d?o.set("Content-Disposition","inline;"):o.set("Content-Disposition","attachment;"),o.set("Content-Type",d),o.set("x-amz-credential",u.s3Credential),o.set("x-amz-algorithm",u.s3Algorithm),o.set("x-amz-date",u.s3Date),o.set("policy",u.s3Policy),o.set("x-amz-signature",u.s3Signature),o.set("key",t.uploadFileName),o.set("file",r),s.send(o)},stc:function(e,t,n,r){new FormData;var o=new XMLHttpRequest;ut();var s="https://"+at[0][1]+"/"+t.stcBucketName+"/"+t.uploadFileName;at.shift(),o.upload&&t.support_options&&(o.upload.onprogress=function(e){n.onProgress(e.loaded,e.total)}),o.onreadystatechange=function(){if(4===o.readyState){var s=o.responseText||"{}";if((s=JSON.parse(s)).name=t.uniqueValue,s.filename=t.uploadFileName,s.uploadMethod=i["UploadMethod"]?i["UploadMethod"].STC:"",200===o.status||204===o.status)n.onCompleted(s);else if(at.length){const i=new FormData;i.set("file",e.get("file")),i.set("key",e.get("key")),i.set("token",e.get("token")),st[at[0][0]](i,t,n,r)}else n.onError("upload fail")}},o.open("PUT",s,!0);var a=t?t.stcHeader:{};o.setRequestHeader("Content-Type",r.type),"text/html"===r.type?o.setRequestHeader("Content-Disposition","inline;"):o.setRequestHeader("Content-Disposition","attachment;"),o.setRequestHeader("Authorization",a.stcAuthorization),o.setRequestHeader("x-amz-content-sha256",a.stcContentSha256),o.setRequestHeader("x-amz-date",a.stcDate),o.send(r)}},at=[],ct=5368709120;function lt(e,t){for(var n in e)t(n,e[n])}function ut(){var e="https://";return"http:"!==location.protocol&&"file:"!==location.protocol||(e="http://"),e}function dt(e,t,n){var r,o,s=e&&e.type||"text/plain",a=s.indexOf("image")>-1?1:4,c=Math.ceil(e.size/t.stc_chunk_size),l=t&&JSON.parse(t.ossConfig?t.ossConfig:"");Array.isArray(l)||(l=[]);var u=l.find(e=>Object.keys(e).includes("stc")),d="uploads";L.imClient.getFileToken(a,r,"POST",d).then((function(e){r=e.fileName,o="https://"+u.stc+"/"+t.stcBucketName+"/"+r,console.log("uploadStcMultipart:url",o);var i=new XMLHttpRequest;i.open("POST",o+"?"+d,!0),"text/html"===s?i.setRequestHeader("Content-Disposition","inline;"):i.setRequestHeader("Content-Disposition","attacshment;"),i.setRequestHeader("Authorization",e&&e.stcAuthorization),i.setRequestHeader("x-amz-content-sha256",e&&e.stcContentSha256),i.setRequestHeader("x-amz-date",e&&e.stcDate),i.setRequestHeader("Content-Type",s),i.send(),i.onreadystatechange=function(e){if(4===i.readyState){var t=i.response.match(/(?:<UploadId>)(\S*?)(?:<\/UploadId>)/);console.log("uploadId",t),200===i.status||204===i.status?function(e){for(var t=[],n=1;n<=c;n++)t.push(g(e,n));f(e,t)}(Array.isArray(t)&&t[1]):n.onError("uploadStcMultipart:did not get uploadId")}}}),(function(e){n.onError("uploadStcMultipart:"+e)}));var h=[],p=new Map;function f(l,u){u&&Array.isArray(u)&&0!==u.length&&Promise.all(u).then(()=>{var u="uploadId="+l;if(p.size===c)L.imClient.context.getFileToken(a,r,"POST",u).then((function(r){console.log("onSuccess",r),console.log("onSuccess:uploadId",l);var a=new XMLHttpRequest;a.open("POST",o+"?"+u,!0),a.setRequestHeader("Authorization",r&&r.stcAuthorization),a.setRequestHeader("x-amz-content-sha256",r&&r.stcContentSha256),a.setRequestHeader("x-amz-date",r&&r.stcDate),a.setRequestHeader("Content-Type",s);var c="<CompleteMultipartUpload xmlns='http://s3.amazonaws.com/doc/2006-03-01/'>",d=Array.from(p.keys()||[]).sort((e,t)=>e-t);console.log("keys",d),d.map(e=>{c+=`<Part><ETag>${p.get(e)}</ETag><PartNumber>${e}</PartNumber></Part>`}),c+="</CompleteMultipartUpload>",a.send(c),console.log("xml",c),a.onreadystatechange=function(){if(4===a.readyState)if(200===a.status||204===a.status){var r={};r.name=e.name,r.filename=t.uploadFileName,r.uploadMethod=i["UploadMethod"].STC,n.onCompleted(r)}else n.onError("uploadStcMultipart:upload does not end")}}),(function(e){n.onError("uploadStcMultipart:"+e)}));else{var d=[];for(var m of h)d.push(g(l,m));f(l,d)}},e=>{console.error(e),n.onError("uploadStcMultipart: chunkFiles upload failed and those will reupload");var t=[];for(var i of h)t.push(g(l,i));f(l,t)})}function g(n,i){return new Promise((c,l)=>{var u="partNumber="+i+"&uploadId="+n;L.imClient.context.getFileToken(a,r,"PUT",u).then((function(n){console.log("signature "+i+" onSuccess",n);var r=e&&e.slice((i-1)*t.stc_chunk_size,i*t.stc_chunk_size);console.log("fileChunk:size",r.size);var a=new XMLHttpRequest;a.open("PUT",o+"?"+u,!0),a.setRequestHeader("Authorization",n&&n.stcAuthorization),a.setRequestHeader("x-amz-content-sha256",n&&n.stcContentSha256),a.setRequestHeader("x-amz-date",n&&n.stcDate),a.setRequestHeader("Content-Type",s),a.send(r),a.onreadystatechange=function(){if(4===a.readyState)if(200===a.status||204===a.status){var e=a.getResponseHeader("etag");console.log("etag:"+i,e),p.set(i,e),c(e)}else h.includes(i)||h.push(i),l(i)}}),(function(e){console.log("getETags:签名验证失败"),h.includes(i)||h.push(i),l(i)}))})}}var ht={form:function(e,t){var n=new FormData;if(t.unique_key){var i=e.name.substr(e.name.lastIndexOf(".")),r=pt()+i;n.append(t.unique_key,r),t.uniqueValue=r}return n.append(t.file_data_name,e),ft(t.multi_parmas,(function(e,t){n.append(e,t)})),n},json:function(e,t){var n={};if(t.unique_key){var i=e.name.substr(e.name.lastIndexOf(".")),r=pt()+i;n[t.unique_key]=r,t.uniqueValue=r}return n[t.file_data_name]=e,ft(t.multi_parmas,(function(e,t){n[e]=t})),JSON.stringify(n)},data:function(e,t){return e}};function pt(){var e=(new Date).getTime();return"xxxxxx4xxxyxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))}function ft(e,t){for(var n in e)t(n,e[n])}var gt,mt=0;function _t(e){this.options=function(e){var t={domain:"",method:"POST",file_data_name:"file",unique_key:"key",base64_size:4194304,chunk_size:4194304,bos_chunk_size:4294967296,stc_chunk_size:10485760,headers:{},multi_parmas:{},query:{},support_options:!0,data:ht.form,genUId:pt};if(!e||!e.domain)throw new Error("domain is null");for(var n in e)t[n]=e[n];return t}(e),this.setOptions=function(e){var t=this;ft(e,(function(e,n){t.options[e]=n}))},console.log("options",e),this.upload=function(e,t){if(e){var n=this;!function(e,t,n){if(qe=e,Ge=t,at=[],t.ossConfig){const e=JSON.parse(t.ossConfig);let n,i,r="";const o=[];e.forEach(e=>{const t=Number(e.p)-1;for(const s in e)"aliyun"===s&&(r=e[s]),"s3"===s&&(n=e[s]),"stc"===s&&(i=e[s]),"p"!==s&&(o[t]=[s,e[s]])}),o.forEach((function(e){e&&at.push(e)})),e.length!==at.length&&(at=[["qiniu",t.domain],["baidu",t.uploadHost.bos],["aliyun",r],["s3",n],["stc",i]])}else at=[["qiniu",t.domain],["baidu",t.uploadHost.bos]];var i;if(t.ossConfig){var r=t&&JSON.parse(t.ossConfig);Array.isArray(r)||(r=[]),i=r.find(e=>Object.keys(e).includes("stc"))}if(i&&1===parseInt(i.p)&&e.size>=4194304)dt(e,t,n);else{var o=t.data(e,t);st[at[0][0]](o,t,n,e)}}(e,this.options,{onProgress:function(e,n,i){gt=e,i?gt=mt+e/n*(n-mt):mt=gt,t.onProgress(gt,n)},onCompleted:function(e){t.onCompleted(e)},onError:function(e){t.onError(e)},onOpen:function(e){n.xhr=e}})}else t.onError("upload file is null.")},this.cancel=function(){this.xhr&&this.xhr.abort()}}var vt={init:function(e){return new _t(e)},dataType:ht,resize:function(e,t,n){e.type;var i=document.createElement("canvas"),r=new FileReader;r.readAsDataURL(e),r.onload=function(e){var r=e.target.result,o=new Image;o.src=r;var s=o.width,a=o.height,c=function(e,t){var n=1,i=e.width,r=t.maxWidth||0;r>0&&i>r&&(n=r/i);var o=e.height,s=t.maxHeight||0;if(s>0&&o>s){var a=s/o;n=Math.min(n,a)}var c=t.maxSize||0,l=Math.ceil(e.size/1e3);if(l>c){var u=c/l;n=Math.min(n,u)}return n}({width:s,height:a,size:e.total},t),l=r;c<1&&(l=function(e,t,n){i.width=t,i.height=n,i.getContext("2d").drawImage(e,0,0,t,n);var r="image/jpg";return i.toDataURL(r)}(o,s*c,a*c)),n(l)}}};const yt=function(e,t,n){var i=document.createElement("canvas"),r=i.getContext("2d"),o=new Image;o.onload=function(){var s=function(e,t,n){var i,r,o,s=e<t,a=0,c=0;return(s?t/e:e/t)>n.scale?(s?(r=100,c=((o=t/(i=e/100))-n.maxHeight)/2):(o=100,a=((r=e/(i=t/100))-n.maxWidth)/2),{w:r,h:o,x:-a,y:-c}):(s?(i=t/n.maxHeight,o=n.maxHeight,r=e/i):(i=e/n.maxWidth,r=n.maxWidth,o=t/i),{w:r,h:o,x:-a,y:-c})}(o.width,o.height,t);i.width=s.w>t.maxWidth?t.maxWidth:s.w,i.height=s.h>t.maxHeight?t.maxHeight:s.h,r.drawImage(o,s.x,s.y,s.w,s.h);try{var a=i.toDataURL(e.type,t.quality),c=new RegExp("^data:image/[^;]+;base64,");a=a.replace(c,""),n(a)}catch(e){throw new Error(e)}},o.src="string"==typeof e?"data:image/jpg;base64,"+e:function(e){var t=window.URL||window.webkitURL;return t?t.createObjectURL(e):""}(e)},Ct=function(e,t){var n=e.file,i=e.compress;yt(n,i,t)},Et=function(e,t){if(e.getToken)e.getToken((function(n,i){i=i||{},e.multi_parmas||(e.multi_parmas={}),e.multi_parmas.token=n,e.uploadHost||(e.uploadHost={}),e.uploadHost.bos=i.bos,e.ossConfig=i.ossConfig,e.bosHeader||(e.bosHeader={}),e.bosHeader.bosDate=i.bosDate,e.bosHeader.bosToken=i.bosToken,e.bosUploadPath=i.path,e.aliHeader={},e.aliHeader.osskeyId=i.osskeyId,e.aliHeader.ossPolicy=i.ossPolicy,e.aliHeader.ossSign=i.ossSign,e.ossBucketName=i.ossBucketName,e.uploadFileName=i.fileName,e.s3Header={},e.s3Header.s3Credential=i.s3Credential,e.s3Header.s3Algorithm=i.s3Algorithm,e.s3Header.s3Date=i.s3Date,e.s3Header.s3Policy=i.s3Policy,e.s3Header.s3Signature=i.s3Signature,e.s3BucketName=i.s3BucketName,e.stcHeader={},e.stcHeader.stcAuthorization=i.stcAuthorization,e.stcHeader.stcContentSha256=i.stcContentSha256,e.stcHeader.stcDate=i.stcDate,e.stcBucketName=i.stcBucketName,e.headers||(e.headers={}),e.base64&&(e.headers["Content-type"]="application/octet-stream",e.headers.Authorization="UpToken "+n),console.log("data",i);var r=vt.init(e);t(r)}));else{e.headers||(e.headers={}),e.base64&&(e.headers["Content-type"]="application/octet-stream");var n=vt.init(e);t(n)}};var bt,Tt,St=function(e,t,n){t.upload(e.file,{onError:function(e){n.onError(e)},onProgress:function(e,t){n.onProgress(e,t)},onCompleted:function(t){t.filename||(t.filename=t.hash);var i=e.compressThumbnail||Ct;e.compress?i(e,(function(e){t.thumbnail=e,n.onCompleted(t)})):n.onCompleted(t)}})},Rt=function(e){var t=this;this.instance=e,this.upload=function(e,n){St({file:e},t.instance,n)},this.cancel=function(){t.instance.cancel()}},It=function(e,t){var n=this;this.cfg=t,this.instance=e,this.upload=function(e,t){var i={file:e,compress:n.cfg};St(i,n.instance,t)},this.cancel=function(){n.instance.cancel()}},wt=function(e,t){Et(e,(function(n){var i={maxHeight:e.maxHeight||160,maxWidth:e.maxWidth||160,quality:e.quality||.5,scale:e.scale||2.4},r=new It(n,i);t(r)}))},Ot=function(e,t){Et(e,(function(e){var n=new Rt(e);t(n)}))},kt=wt;function Mt(e){return bt=bt||new AudioContext,new Promise((function(t,n){bt.decodeAudioData(e,(function(e){t({duration:e.duration,length:e.length})}),n)}))}function xt(e,t,n,r){return new Promise((function(o){L.imClient.context.getFileToken(e,t,n,r).then((function(e){o({code:i["ErrorCode"].SUCCESS,data:e})})).catch((function(e){o({code:e,msg:B[e]})}))}))}function Pt(e,t,n,r,o){return Object(i["assert"])("fileType",e,i["isValidFileType"],!0),Object(i["assert"])("filename",t,i["AssertRules"].STRING),Object(i["assert"])("saveName",n,i["AssertRules"].STRING),Object(i["assert"])("serverType",o,i["AssertRules"].NUMBER),new Promise((function(s){L.imClient.context.getFileUrl(e,t,n,r,o).then((function(e){s({code:i["ErrorCode"].SUCCESS,data:e})})).catch((function(e){s({code:e})}))}))}function At(e,t,n){return s(this,void 0,void 0,(function(){var r,o,s,c,u,d,h,p,f,g;return a(this,(function(a){switch(a.label){case 0:return n=n||{},t instanceof Ke==0?(l.warn("send message fail -> message parameter is not an instance of BaseMessage"),[2,U.ILLGAL_PARAMS]):(Object(i["assert"])("conversation.channelId",null==e?void 0:e.channelId,i["AssertRules"].CHANNEL_ID),r=e.conversationType,o=e.targetId,s=e.channelId,c="conversationType:"+r+",targetId:"+o,l.debug("send message  ->"+c),(u=Object.assign(n,t)).channelId=s||"",[4,L.imClient.context.sendMessage(r,o,u)]);case 1:return d=a.sent(),h=d.code,p=d.data,h===i["ErrorCode"].SUCCESS?(f=D(p),[2,{code:h,data:f}]):(l.warn("send message fail ->"+h+":"+B[h]+","+c),g={isMentioned:!!n.isMentioned,content:t.content,messageType:t.messageType,isPersited:t.isPersited||!1,isCounted:t.isCounted||!1,disableNotification:!!(null==n?void 0:n.disableNotification),canIncludeExpansion:!!(null==n?void 0:n.canIncludeExpansion),expansion:(null==n?void 0:n.expansion)||null,conversationType:e.conversationType,targetId:e.targetId,channelId:e.channelId,senderUserId:L.imClient.context.getCurrentUserId(),messageUId:"",messageDirection:i["MessageDirection"].SEND,sentTime:(null==p?void 0:p.sentTime)||0,receivedTime:0,isStatusMessage:n.isStatusMessage||!1,receivedStatus:i["ReceivedStatus"].UNREAD,isOffLineMessage:!1},r!==i["ConversationType"].ULTRA_GROUP&&(g.isOffLineMessage=!1),[2,{code:h,msg:B[h],data:D(g)}])}}))}))}function Dt(e,t,n){return At(e,new Xe(t),n)}function Nt(e,t){return function(n,r,c,l){return new Promise((function(u){var d;!function(e,t,n,r){var c,l=this;if(void 0===t&&(t=i["FileType"].FILE),c=t===i["FileType"].IMAGE?i["FileType"].IMAGE:i["FileType"].FILE,!Tt){Tt="upload.qiniup.com";var u=L.imClient.context.getInfoFromCache();if(u&&u.ossConfig)try{var d=JSON.parse(u.ossConfig).find((function(e){return void 0!==e.qiniu}));d&&(Tt=d.qiniu)}catch(e){}}var h=o({domain:Tt,getToken:function(e){L.imClient.context.getFileToken(c).then((function(t){e(t.token,t)})).catch((function(e){n.onFail(e)}))}},r);(c===i["FileType"].IMAGE?kt:Ot)(h,(function(r){r.upload(e,{onProgress:function(e,t){var i,r=Math.floor(e/t*100);null===(i=n.onProgress)||void 0===i||i.call(n,r)},onCompleted:function(r){return s(l,void 0,void 0,(function(){var o=this;return a(this,(function(l){return Pt(c,r.filename,r.name,r,r.uploadMethod).then((function(l){return s(o,void 0,void 0,(function(){var o,s;return a(this,(function(a){return 0!==l.code?(n.onFail(l),[2]):((o=l.data).type=e.type,o.name=r.name||r.filename,t===i["FileType"].AUDIO?("function"==typeof e.arrayBuffer?e.arrayBuffer().then(Mt).then((function(e){Object.assign(o,e),n.onSuccess(o)}),(function(){n.onSuccess(o)})):((s=new FileReader).onload=function(){s.result?Mt(s.result).then((function(e){Object.assign(o,e),n.onSuccess(o)}),(function(){n.onSuccess(o)})):n.onSuccess(o)},s.onerror=function(){o.duration=0,n.onSuccess(o)},s.readAsArrayBuffer(e)),[2]):(c===i["FileType"].IMAGE&&(o.thumbnail=r.thumbnail),n.onSuccess(o),[2]))}))}))})).catch((function(e){n.onFail(e)})),[2]}))}))},onError:function(e){n.onFail(e)}})}))}(r.file,e,{onProgress:null==c?void 0:c.onProgress,onSuccess:function(e){var i,o=(null===(i=null==c?void 0:c.onComplete)||void 0===i?void 0:i.call(c,{url:e.downloadUrl}))||t(e,r);At(n,o,l).then(u)},onFail:function(e){u({code:i["ErrorCode"].UPLOAD_FILE_FAILED,msg:e||i["ErrorCode"][i["ErrorCode"].UPLOAD_FILE_FAILED]})}},(null===(d=l)||void 0===d?void 0:d.thumbnailConfig)||{})}))}}vt.dataType;var Lt=Nt(i["FileType"].FILE,(function(e,t){return new Ze({name:e.name,size:t.file.size,type:t.file.type,fileUrl:e.downloadUrl,user:t.user,extra:t.extra})})),Ut=Nt(i["FileType"].IMAGE,(function(e,t){return new ze({content:e.thumbnail,imageUri:e.downloadUrl,user:t.user,extra:t.extra})})),Bt=Nt(i["FileType"].AUDIO,(function(e,t){return new Ye({remoteUrl:e.downloadUrl,duration:e.duration,type:e.type,user:t.user,extra:t.extra})})),Vt=Nt(i["FileType"].SIGHT,(function(e,t){return new Je({sightUrl:e.downloadUrl,content:t.thumbnail,duration:t.duration,size:t.file.size||e.size,name:t.name||e.name,user:t.user,extra:t.extra})}));function jt(e,t){return s(this,void 0,void 0,(function(){var n,r,o,s,c;return a(this,(function(a){switch(a.label){case 0:return Object(i["assert"])("options.timestamp",null==t?void 0:t.timestamp,i["AssertRules"].NUMBER),Object(i["assert"])("options.count",null==t?void 0:t.count,i["AssertRules"].NUMBER),Object(i["assert"])("options.order",null==t?void 0:t.order,(function(e){return 0===e||1===e})),Object(i["assert"])("conversation.channelId",null==e?void 0:e.channelId,i["AssertRules"].CHANNEL_ID),n="conversationType:"+e.conversationType+",targetId:"+e.targetId,l.debug("get history message ->"+n),[4,L.imClient.context.getHistoryMessage(e.conversationType,e.targetId,null==t?void 0:t.timestamp,null==t?void 0:t.count,null==t?void 0:t.order,null==e?void 0:e.channelId)];case 1:return r=a.sent(),o=r.code,s=r.data,o===i["ErrorCode"].SUCCESS&&s?(c=s.list.map((function(e){return D(e)})),[2,{code:o,data:{list:c,hasMore:s.hasMore}}]):(l.warn("get history message fail ->"+o+":"+B[o]+","+n),[2,{code:o,msg:B[o]}])}}))}))}function Ft(e,t){return s(this,void 0,void 0,(function(){var n,r,o,s,c;return a(this,(function(a){switch(a.label){case 0:return Object(i["assert"])("options.timestamp",null==t?void 0:t.timestamp,i["AssertRules"].NUMBER),Object(i["assert"])("options.count",null==t?void 0:t.count,i["AssertRules"].NUMBER),Object(i["assert"])("options.order",null==t?void 0:t.order,(function(e){return 0===e||1===e})),Object(i["assert"])("conversation.channelId",null==e?void 0:e.channelId,i["AssertRules"].CHANNEL_ID),n="conversationType:"+e.conversationType+",targetId:"+e.targetId,l.debug("get history message ->"+n),[4,L.imClient.context.getRemoteHistoryMessages(e.conversationType,e.targetId,(null==t?void 0:t.timestamp)||0,(null==t?void 0:t.count)||20,(null==t?void 0:t.order)||0,e.channelId||"")];case 1:return r=a.sent(),o=r.code,s=r.data,o===i["ErrorCode"].SUCCESS&&s?(c=s.list.map((function(e){return D(e)})),[2,{code:o,data:{list:c,hasMore:s.hasMore}}]):(l.warn("get history message fail ->"+o+":"+B[o]+","+n),[2,{code:o,msg:B[o]}])}}))}))}function $t(e,t,n,r){return s(this,void 0,void 0,(function(){var o,s,c,l,u;return a(this,(function(a){switch(a.label){case 0:return o={targetId:e,conversationType:i["ConversationType"].PRIVATE,channelId:r},s=new Ke("RC:ReadNtf",{messageUId:t,lastMessageSendTime:n,type:1}),[4,At(o,s)];case 1:return c=a.sent(),l=c.code,u=c.msg,0===l?[2,{code:l}]:[2,{code:l,msg:u}]}}))}))}function Ht(e,t,n){return s(this,void 0,void 0,(function(){var r,o,s,c,u;return a(this,(function(a){switch(a.label){case 0:return Object(i["assert"])("messageUId",t,i["AssertRules"].STRING,!0),Object(i["assert"])("channelId",n,i["AssertRules"].CHANNEL_ID),r="messageUId:"+t+",targetId:"+e,l.debug("send read receipt message ->"+r),o=new Ke("RC:RRReqMsg",{messageUId:t}),[4,At({targetId:e,conversationType:i["ConversationType"].GROUP,channelId:n},o)];case 1:return s=a.sent(),c=s.code,u=s.msg,0===c?[2,{code:c}]:[2,{code:c,msg:u}]}}))}))}function Kt(e,t,n){return s(this,void 0,void 0,(function(){return a(this,(function(e){throw new Error("This method is deprecated, please use method sendReadReceiptResponseV2.")}))}))}function Wt(e,t,n){return s(this,void 0,void 0,(function(){var r,o,s,c,u,d,h;return a(this,(function(a){switch(a.label){case 0:return Object(i["assert"])("targetId",e,i["AssertRules"].STRING,!0),Object(i["assert"])("messageList",t,i["AssertRules"].OBJECT,!0),Object(i["assert"])("channelId",n,i["AssertRules"].CHANNEL_ID),Object.keys(t).forEach((function(e){Object(i["assert"])(e,t[e],i["AssertRules"].ARRAY)})),r={targetId:e,conversationType:i["ConversationType"].GROUP,channelId:n},s=L.imClient.context.getInfoFromCache(),0!==(c=(null==s?void 0:s.grpRRVer)||0)?[3,2]:(u=new Ke("RC:RRRspMsg",{receiptMessageDic:t}),[4,At(r,u)]);case 1:return o=a.sent(),[3,4];case 2:return 1!==c?[3,4]:(d=[],Object.keys(t).forEach((function(e){t[e].forEach((function(e){-1===d.indexOf(e)&&d.push(e)}))})),d.length?[4,L.imClient.context.sendReadReceiptMessage(e,d,n)]:(l.warn("Error in parameter messageList."),[2,{code:i["ErrorCode"].PARAMETER_ERROR}]));case 3:o=a.sent(),a.label=4;case 4:return(h=o.code)===i["ErrorCode"].SUCCESS?[2,{code:h}]:(l.warn("send read receipt message fail ->"+h+":"+B[h]),[2,{code:h,msg:B[h]}])}}))}))}function qt(e,t){return s(this,void 0,void 0,(function(){var n,r,o,s;return a(this,(function(a){switch(a.label){case 0:return Object(i["assert"])("conversation.type",e.conversationType,i["AssertRules"].NUMBER,!0),Object(i["assert"])("conversation.targetId",e.targetId,i["AssertRules"].STRING,!0),Object(i["assert"])("lastMessageSendTime",t,i["AssertRules"].NUMBER,!0),Object(i["assert"])("conversation.channelId",null==e?void 0:e.channelId,i["AssertRules"].CHANNEL_ID),n=new Ke("RC:SRSMsg",{lastMessageSendTime:t}),[4,At(e,n)];case 1:return r=a.sent(),o=r.code,s=r.msg,0===o?[2,{code:o}]:[2,{code:o,msg:s}]}}))}))}function Gt(e,t){return s(this,void 0,void 0,(function(){var n,r,o,s,c;return a(this,(function(a){switch(a.label){case 0:return Object(i["assert"])("options.messageUId",t.messageUId,i["AssertRules"].STRING,!0),Object(i["assert"])("options.sentTime",t.sentTime,i["AssertRules"].NUMBER,!0),Object(i["assert"])("options.disableNotification",null==t?void 0:t.disableNotification,i["AssertRules"].BOOLEAN),Object(i["assert"])("options.pushConfig",null==t?void 0:t.pushConfig,i["AssertRules"].OBJECT),Object(i["assert"])("conversation.channelId",null==e?void 0:e.channelId,i["AssertRules"].CHANNEL_ID),n={user:t.user,channelId:e.channelId||"",disableNotification:null==t?void 0:t.disableNotification,pushConfig:null==t?void 0:t.pushConfig},r="conversationType:"+e.conversationType+",targetId:"+e.targetId+",messageUId:"+t.messageUId,l.debug("recall message ->"+r),[4,L.imClient.context.recallMessage(e.conversationType,e.targetId,t.messageUId,t.sentTime,n)];case 1:return o=a.sent(),s=o.code,c=o.data,s===i["ErrorCode"].SUCCESS&&c?[2,{code:s,data:D(c)}]:s===i["ErrorCode"].SUCCESS?[2,{code:s}]:(l.warn("recall message fail ->"+s+":"+B[s]+","+r),[2,{code:s,msg:B[s]}])}}))}))}function zt(e,t){return s(this,void 0,void 0,(function(){var n,r;return a(this,(function(o){switch(o.label){case 0:return Object(i["assert"])("options",t,(function(e){return Object(i["isArray"])(e)&&e.length}),!0),t.forEach((function(e){Object(i["assert"])("options.messageUId",e.messageUId,i["AssertRules"].STRING,!0),Object(i["assert"])("options.sentTime",e.sentTime,i["AssertRules"].NUMBER,!0),Object(i["assert"])("options.messageDirection",e.messageDirection,(function(e){return 1===e||2===e}),!0)})),Object(i["assert"])("conversation.channelId",null==e?void 0:e.channelId,i["AssertRules"].CHANNEL_ID),n="conversationType:"+e.conversationType+",targetId:"+e.targetId,l.debug("delete messages ->"+n),[4,L.imClient.context.deleteRemoteMessage(e.conversationType,e.targetId,t,e.channelId)];case 1:return(r=o.sent())!==i["ErrorCode"].SUCCESS?(l.warn("delete message fail ->"+r+":"+B[r]+","+n),[2,{code:r,msg:B[r]}]):[2,{code:i["ErrorCode"].SUCCESS}]}}))}))}function Yt(e,t){return s(this,void 0,void 0,(function(){var n,r;return a(this,(function(o){switch(o.label){case 0:return Object(i["assert"])("options.timestamp",t,i["AssertRules"].NUMBER,!0),Object(i["assert"])("conversation.channelId",null==e?void 0:e.channelId,i["AssertRules"].CHANNEL_ID),n="conversationType:"+e.conversationType+",targetId:"+e.targetId,l.debug("clear message ->"+n),[4,L.imClient.context.deleteRemoteMessageByTimestamp(e.conversationType,e.targetId,t,e.channelId)];case 1:return(r=o.sent())!==i["ErrorCode"].SUCCESS?(l.warn("clear message ->"+r+":"+B[r]+","+n),[2,{code:r,msg:B[r]}]):[2,{code:i["ErrorCode"].SUCCESS}]}}))}))}function Jt(e,t){return s(this,void 0,void 0,(function(){var n,r,o,s,c,u,d,h;return a(this,(function(a){switch(a.label){case 0:return Object(i["assert"])("expansion",e,i["AssertRules"].OBJECT,!0),Object(i["assert"])("message",t,i["AssertRules"].OBJECT,!0),n=t.conversationType,r=t.targetId,o=t.messageUId,s=t.canIncludeExpansion,c=t.expansion,u=t.channelId,d="conversationType:"+n+",targetId:"+r+",messageUId:"+o,l.debug("update message expansion ->"+d),[4,L.imClient.context.sendExpansionMessage({conversationType:n,targetId:r,messageUId:o,expansion:e,canIncludeExpansion:s,originExpansion:c,channelId:u})];case 1:return(h=a.sent().code)!==i["ErrorCode"].SUCCESS?(l.warn("update message expansion fail ->"+h+":"+B[h]+","+d),[2,{code:h,msg:B[h]}]):[2,{code:h}]}}))}))}function Xt(e,t){return s(this,void 0,void 0,(function(){var n,r,o,s,c,u,d;return a(this,(function(a){switch(a.label){case 0:return Object(i["assert"])("keys",e,i["AssertRules"].ARRAY,!0),Object(i["assert"])("message",t,i["AssertRules"].OBJECT,!0),n=t.conversationType,r=t.targetId,o=t.messageUId,s=t.canIncludeExpansion,c=t.channelId,u="conversationType:"+n+",targetId:"+r+",messageUId:"+o,l.debug("remove message expansion ->"+u),[4,L.imClient.context.sendExpansionMessage({conversationType:n,targetId:r,messageUId:o,canIncludeExpansion:s,keys:e,channelId:c})];case 1:return(d=a.sent().code)!==i["ErrorCode"].SUCCESS?(l.warn("remove message expansion fail ->"+d+":"+B[d]+","+u),[2,{code:d,msg:B[d]}]):[2,{code:d}]}}))}))}function Qt(e,t){return s(this,void 0,void 0,(function(){var n,r,o,s,c;return a(this,(function(a){switch(a.label){case 0:return Object(i["assert"])("typingContentType",t,i["AssertRules"].STRING,!0),n="conversationType:"+e.conversationType+",targetId:"+e.targetId,l.debug("send typing status message ->"+n),r={messageType:"RC:TypSts",content:{typingContentType:t},isStatusMessage:!0,channelId:e.channelId},[4,L.imClient.context.sendMessage(e.conversationType,e.targetId,r)];case 1:return o=a.sent(),s=o.code,c=o.data,s===i["ErrorCode"].SUCCESS?[2,{code:s,data:D(c)}]:(l.warn("send typing status message fail ->"+s+":"+B[s]+","+n),[2,{code:s,msg:B[s]}])}}))}))}function Zt(e,t,n){return s(this,void 0,void 0,(function(){var r,o,s,c;return a(this,(function(a){switch(a.label){case 0:return Object(i["assert"])("messageUId",t,i["AssertRules"].STRING,!0),r="messageUId:"+t+",targetId:"+e,l.debug("get message reader ->"+r),[4,L.imClient.context.getMessageReader(e,t,n)];case 1:return o=a.sent(),s=o.code,c=o.data,s===i["ErrorCode"].SUCCESS?[2,{code:s,data:c}]:(l.warn("get message reader fail ->"+s+":"+B[s]+","+r),[2,{code:s,msg:B[s]}])}}))}))}function en(e,t,n,r,o){return Object(i["assert"])("messageType",e,i["AssertRules"].STRING,!0),Object(i["assert"])("isPersited",t,i["AssertRules"].BOOLEAN,!0),Object(i["assert"])("isCounted",n,i["AssertRules"].BOOLEAN,!0),Object(i["assert"])("isStatusMessage",o,i["AssertRules"].BOOLEAN,!1),L.imClient.context.registerMessageType(e,t,n,r,o),We(e,t,n)}function tn(e){return s(this,void 0,void 0,(function(){var t,n,r;return a(this,(function(o){switch(o.label){case 0:return Object(i["usingCppEngine"])()?(Object(i["assert"])("conversation.conversationType",e.conversationType,i["AssertRules"].NUMBER,!0),Object(i["assert"])("conversation.targetId",e.targetId,i["AssertRules"].STRING,!0),Object(i["assert"])("conversation.channelId",null==e?void 0:e.channelId,i["AssertRules"].CHANNEL_ID),[4,L.imClient.context.getFirstUnreadMessage(e.conversationType,e.targetId,e.channelId)]):[2,{code:i["ErrorCode"].NOT_SUPPORT,msg:B[i["ErrorCode"].NOT_SUPPORT]}];case 1:return t=o.sent(),n=t.code,r=t.data,n===i["ErrorCode"].SUCCESS?[2,{code:n,data:r}]:(l.warn("insertMessage ->code:"+n+",targetId:"+e.targetId),[2,{code:n,msg:B[n]}])}}))}))}function nn(e,t,n){return void 0===n&&(n={}),s(this,void 0,void 0,(function(){var r,o,s,c,u,d,h,p,f,g,m,_,v,y,C,E;return a(this,(function(a){switch(a.label){case 0:return Object(i["usingCppEngine"])()?(r=t.senderUserId,o=t.messageType,s=t.content,c=t.messageDirection,u=t.messageUId,d=t.canIncludeExpansion,h=t.expansion,p=t.disableNotification,f=t.sentTime,g=t.sentStatus,l.info("insertMessage ->targetId:"+e.targetId+",conversationType:"+e.conversationType),m=n.isUnread,_=n.searchContent,v={senderUserId:r,messageType:o,content:s,messageDirection:c,sentTime:f,sentStatus:g,searchContent:_,isUnread:m,messageUId:u,disableNotification:p,canIncludeExpansion:d,expansionMsg:JSON.stringify(h),channelId:e.channelId||""},[4,L.imClient.context.insertMessage(e.conversationType,e.targetId,v)]):[2,{code:i["ErrorCode"].NOT_SUPPORT,msg:B[i["ErrorCode"].NOT_SUPPORT]}];case 1:return y=a.sent(),C=y.code,E=y.data,C===i["ErrorCode"].SUCCESS?[2,{code:C,data:D(E)}]:(l.warn("insertMessage ->code:"+C+",targetId:"+e.targetId),[2,{code:C,msg:B[C]}])}}))}))}function rn(e){return s(this,void 0,void 0,(function(){var t,n,r;return a(this,(function(o){switch(o.label){case 0:return Object(i["usingCppEngine"])()?[4,L.imClient.context.getMessage(e)]:[2,{code:i["ErrorCode"].NOT_SUPPORT,msg:B[i["ErrorCode"].NOT_SUPPORT]}];case 1:return t=o.sent(),n=t.code,r=t.data,n===i["ErrorCode"].SUCCESS?[2,{code:n,data:D(r)}]:(l.warn("getMessage ->code:"+n+",messageId:"+e),[2,{code:n,msg:B[n]}])}}))}))}function on(e){if(!Object(i["usingCppEngine"])())return{code:i["ErrorCode"].NOT_SUPPORT,msg:B[i["ErrorCode"].NOT_SUPPORT]};Object(i["assert"])("conversationType",e.conversationType,i["AssertRules"].NUMBER,!0),Object(i["assert"])("targetId",e.targetId,i["AssertRules"].STRING,!0);var t=L.imClient.context.getUnreadMentionedMessages(e.conversationType,e.targetId),n=[];return t&&t.length&&t.forEach((function(e){return n.push(D(e))})),{code:i["ErrorCode"].SUCCESS,data:n}}function sn(e,t,n,r){return s(this,void 0,void 0,(function(){var o,s,c,u;return a(this,(function(a){switch(a.label){case 0:return Object(i["usingCppEngine"])()?(Object(i["assert"])("conversationType",e.conversationType,i["AssertRules"].NUMBER,!0),Object(i["assert"])("targetId",e.targetId,i["AssertRules"].STRING,!0),Object(i["assert"])("keyword",t,i["AssertRules"].STRING,!0),Object(i["assert"])("timestamp",n,i["AssertRules"].NUMBER),Object(i["assert"])("count",r,i["AssertRules"].NUMBER),[4,L.imClient.context.searchMessageByContent(e.conversationType,e.targetId,t,n,r,1,e.channelId)]):[2,{code:i["ErrorCode"].NOT_SUPPORT,msg:B[i["ErrorCode"].NOT_SUPPORT]}];case 1:return o=a.sent(),s=o.code,c=o.data,s===i["ErrorCode"].SUCCESS?(u=[],(null==c?void 0:c.messages)&&c.messages.length&&c.messages.forEach((function(e){return u.push(D(e))})),[2,{code:s,data:{messages:u,count:null==c?void 0:c.count}}]):(l.warn("searchMessages ->code:"+s+",targetId:"+e.targetId),[2,{code:s,msg:B[s]}])}}))}))}function an(e,t,n){return s(this,void 0,void 0,(function(){var r;return a(this,(function(o){switch(o.label){case 0:return Object(i["usingCppEngine"])()?(Object(i["assert"])("conversationType",e.conversationType,i["AssertRules"].NUMBER,!0),Object(i["assert"])("targetId",e.targetId,i["AssertRules"].STRING,!0),Object(i["assert"])("timestamp",t,i["AssertRules"].NUMBER,!0),Object(i["assert"])("cleanSpace",n,i["AssertRules"].BOOLEAN),[4,L.imClient.context.deleteMessagesByTimestamp(e.conversationType,e.targetId,t,n,e.channelId)]):[2,{code:i["ErrorCode"].NOT_SUPPORT,msg:B[i["ErrorCode"].NOT_SUPPORT]}];case 1:return(r=o.sent())===i["ErrorCode"].SUCCESS?[2,{code:r}]:(l.warn("deleteLocalMessagesByTimestamp ->code:"+r+",targetId:"+e.targetId),[2,{code:r,msg:B[r]}])}}))}))}function cn(e){return s(this,void 0,void 0,(function(){var t;return a(this,(function(n){switch(n.label){case 0:return Object(i["usingCppEngine"])()?(l.info("clearMessages ->targetId:"+e.targetId+",conversationType:"+e.conversationType),[4,L.imClient.context.clearMessages(e.conversationType,e.targetId,e.channelId)]):[2,{code:i["ErrorCode"].NOT_SUPPORT,msg:B[i["ErrorCode"].NOT_SUPPORT]}];case 1:return(t=n.sent())===i["ErrorCode"].SUCCESS?[2,{code:t}]:(l.warn("clearMessages ->code:"+t+",targetId:"+e.targetId),[2,{code:t,msg:B[t]}])}}))}))}function ln(e,t,n,r){return s(this,void 0,void 0,(function(){var o,s,c;return a(this,(function(a){switch(a.label){case 0:return Object(i["usingCppEngine"])()?(l.info("searchConversationByContent ->keyword:"+e),[4,L.imClient.context.searchConversationByContent(e,n,r,t)]):[2,{code:i["ErrorCode"].NOT_SUPPORT,msg:B[i["ErrorCode"].NOT_SUPPORT]}];case 1:return o=a.sent(),s=o.code,c=o.data,s===i["ErrorCode"].SUCCESS?[2,{code:s,data:c}]:(l.warn("searchConversationByContent ->code:"+s+",keyword:"+e),[2,{code:s,msg:B[s]}])}}))}))}function un(e,t){return s(this,void 0,void 0,(function(){var n;return a(this,(function(r){switch(r.label){case 0:return Object(i["usingCppEngine"])()?(l.info("clearUnreadCountByTimestamp ->targetId:"+e.targetId+",conversationType:"+e.conversationType),[4,L.imClient.context.clearUnreadCountByTimestamp(e.conversationType,e.targetId,t,e.channelId)]):[2,{code:i["ErrorCode"].NOT_SUPPORT,msg:B[i["ErrorCode"].NOT_SUPPORT]}];case 1:return(n=r.sent())===i["ErrorCode"].SUCCESS?[2,{code:n}]:(l.warn("clearUnreadCountByTimestamp ->code:"+n+",targetId:"+e.targetId),[2,{code:n,msg:B[n]}])}}))}))}function dn(e,t){return s(this,void 0,void 0,(function(){var n;return a(this,(function(r){switch(r.label){case 0:return Object(i["usingCppEngine"])()?(Object(i["assert"])("messageId",e,i["AssertRules"].NUMBER,!0),Object(i["assert"])("receivedStatus",t,i["AssertRules"].NUMBER,!0),l.info("setMessageReceivedStatus ->messageId:"+e+",receivedStatus:"+t),[4,L.imClient.context.setMessageReceivedStatus(e,t)]):[2,{code:i["ErrorCode"].NOT_SUPPORT,msg:B[i["ErrorCode"].NOT_SUPPORT]}];case 1:return(n=r.sent())===i["ErrorCode"].SUCCESS?[2,{code:n}]:(l.warn("setMessageReceivedStatus ->code:"+n+",messageId:"+e),[2,{code:n,msg:B[n]}])}}))}))}function hn(e){return s(this,void 0,void 0,(function(){var t;return a(this,(function(n){switch(n.label){case 0:return Object(i["assert"])("tag.tagId",e.tagId,i["AssertRules"].STRING,!0),Object(i["assert"])("tag.tagId",e.tagId,(function(e){return e.length<=10})),Object(i["assert"])("tag.tagName",e.tagName,(function(e){return e.length<=15})),Object(i["assert"])("tag.tagName",e.tagName,i["AssertRules"].STRING,!0),l.info("createTag ->tagId:"+e.tagId+",tagName:"+e.tagName),[4,L.imClient.context.createTag(e)];case 1:return(t=n.sent().code)===i["ErrorCode"].SUCCESS?[2,{code:t}]:(l.warn("createTag ->code:"+t+",tagId:"+e.tagId),[2,{code:t,msg:B[t]}])}}))}))}function pn(e){return s(this,void 0,void 0,(function(){var t;return a(this,(function(n){switch(n.label){case 0:return Object(i["assert"])("tagId",e,i["AssertRules"].STRING,!0),l.info("removeTag ->tagId:"+e),[4,L.imClient.context.removeTag(e)];case 1:return(t=n.sent().code)===i["ErrorCode"].SUCCESS?[2,{code:t}]:(l.warn("removeTag ->code:"+t+",tagId:"+e),[2,{code:t,msg:B[t]}])}}))}))}function fn(e){return s(this,void 0,void 0,(function(){var t;return a(this,(function(n){switch(n.label){case 0:return Object(i["assert"])("tag.tagId",e.tagId,i["AssertRules"].STRING,!0),Object(i["assert"])("tag.tagName",e.tagName,i["AssertRules"].STRING,!0),Object(i["assert"])("tag.tagName",e.tagName,(function(e){return e.length<=15})),l.info("updateTag ->tagId:"+e.tagId+",tagName:"+e.tagName),[4,L.imClient.context.updateTag(e)];case 1:return(t=n.sent().code)===i["ErrorCode"].SUCCESS?[2,{code:t}]:(l.warn("updateTag ->code:"+t+",tagId:"+e.tagId),[2,{code:t,msg:B[t]}])}}))}))}function gn(){return s(this,void 0,void 0,(function(){var e,t,n;return a(this,(function(r){switch(r.label){case 0:return[4,L.imClient.context.getTagList()];case 1:return e=r.sent(),t=e.code,n=e.data,t===i["ErrorCode"].SUCCESS?[2,{code:i["ErrorCode"].SUCCESS,data:n}]:(l.warn("getTagList ->code:"+t),[2,{code:t,msg:B[t]}])}}))}))}function mn(e){return s(this,void 0,void 0,(function(){var t,n,r;return a(this,(function(o){switch(o.label){case 0:return Object(i["assert"])("conversationType",e.conversationType,i["AssertRules"].NUMBER),Object(i["assert"])("targetId",e.targetId,i["AssertRules"].STRING),Object(i["assert"])("channelId",e.channelId,i["AssertRules"].CHANNEL_ID),l.info("getTagsForConversation ->targetId:"+e.targetId+",conversationType:"+e.conversationType),[4,L.imClient.context.getTagsForConversation(e)];case 1:return t=o.sent(),n=t.code,r=t.data,n===i["ErrorCode"].SUCCESS?[2,{code:n,data:r}]:[2,{code:n,msg:B[n]}]}}))}))}function _n(e,t){return s(this,void 0,void 0,(function(){var n;return a(this,(function(r){switch(r.label){case 0:return Object(i["assert"])("tagId",e,i["AssertRules"].STRING,!0),Object(i["assert"])("conversations",t,i["AssertRules"].ARRAY,!0),t.forEach((function(e){Object(i["assert"])("conversation.conversationType",e.conversationType,i["AssertRules"].NUMBER,!0),Object(i["assert"])("conversation.targetId",e.targetId,i["AssertRules"].STRING,!0),Object(i["assert"])("conversation.channelId",e.channelId,i["AssertRules"].CHANNEL_ID)})),l.info("addTagForConversations ->tagId:"+e),[4,L.imClient.context.addTagForConversations(e,t)];case 1:return(n=r.sent().code)===i["ErrorCode"].SUCCESS?[2,{code:n}]:(l.warn("addTagForConversations ->code:"+n+",tagId:"+e),[2,{code:n,msg:B[n]}])}}))}))}function vn(e,t){return s(this,void 0,void 0,(function(){var n;return a(this,(function(r){switch(r.label){case 0:return Object(i["assert"])("tagId",e,i["AssertRules"].STRING,!0),Object(i["assert"])("conversations",t,i["AssertRules"].ARRAY,!0),t.forEach((function(e){Object(i["assert"])("conversation.conversationType",e.conversationType,i["AssertRules"].NUMBER,!0),Object(i["assert"])("conversation.targetId",e.targetId,i["AssertRules"].STRING,!0),Object(i["assert"])("conversation.channelId",e.channelId,i["AssertRules"].CHANNEL_ID)})),l.info("removeTagForConversations ->tagId:"+e),[4,L.imClient.context.removeTagForConversations(e,t)];case 1:return(n=r.sent().code)===i["ErrorCode"].SUCCESS?[2,{code:n}]:(l.warn("removeTagForConversations ->code:"+n+",tagId:"+e),[2,{code:n,msg:B[n]}])}}))}))}function yn(e,t){return s(this,void 0,void 0,(function(){var n;return a(this,(function(r){switch(r.label){case 0:return Object(i["assert"])("conversation.conversationType",e.conversationType,i["AssertRules"].NUMBER,!0),Object(i["assert"])("conversation.targetId",e.targetId,i["AssertRules"].STRING,!0),Object(i["assert"])("conversation.channelId",e.channelId,i["AssertRules"].CHANNEL_ID),Object(i["assert"])("tagIds",t,i["AssertRules"].ARRAY,!0),t.forEach((function(e){Object(i["assert"])("tagId",e,i["AssertRules"].STRING,!0)})),l.info("removeTagsForConversation ->tagIds:"+t+",targetId:"+e.targetId+",conversationType:"+e.conversationType),[4,L.imClient.context.removeTagsForConversation(e,t)];case 1:return(n=r.sent().code)===i["ErrorCode"].SUCCESS?[2,{code:n}]:(l.warn("removeTagsForConversation ->code:"+n+",tagIds:"+t),[2,{code:n,msg:B[n]}])}}))}))}function Cn(e,t){return s(this,void 0,void 0,(function(){var n;return a(this,(function(r){switch(r.label){case 0:return Object(i["assert"])("tagId",e,i["AssertRules"].STRING,!0),Object(i["assert"])("conversations",t,i["AssertRules"].ARRAY,!0),t.forEach((function(e){Object(i["assert"])("conversation.conversationType",e.conversationType,i["AssertRules"].NUMBER,!0),Object(i["assert"])("conversation.targetId",e.targetId,i["AssertRules"].STRING,!0),Object(i["assert"])("conversation.channelId",e.channelId,i["AssertRules"].CHANNEL_ID)})),l.info("removeTagForConversations ->tagId:"+e),[4,L.imClient.context.removeTagForConversations(e,t)];case 1:return(n=r.sent().code)===i["ErrorCode"].SUCCESS?[2,{code:n}]:(l.warn("removeTagForConversations ->code:"+n+",tagId:"+e),[2,{code:n,msg:B[n]}])}}))}))}function En(e,t,n){return s(this,void 0,void 0,(function(){var r,o,s;return a(this,(function(a){switch(a.label){case 0:return Object(i["assert"])("tagId",e,i["AssertRules"].STRING,!0),Object(i["assert"])("count",t,i["AssertRules"].NUMBER,!0),Object(i["assert"])("startTime",n,i["AssertRules"].NUMBER,!0),l.info("getConversationListByTag ->tagId:"+e),[4,L.imClient.context.getConversationListByTag(e,n,t)];case 1:return r=a.sent(),o=r.code,s=r.data,o===i["ErrorCode"].SUCCESS?[2,{code:o,data:s}]:(l.warn("getConversationListByTag ->code:"+o+",tagId:"+e),[2,{code:o,msg:B[o]}])}}))}))}function bn(e,t){return s(this,void 0,void 0,(function(){var n,r,o;return a(this,(function(s){switch(s.label){case 0:return Object(i["assert"])("tagId",e,i["AssertRules"].STRING,!0),Object(i["assert"])("containMuted",t,i["AssertRules"].BOOLEAN,!0),l.info("getUnreadCountByTag ->tagId:"+e),[4,L.imClient.context.getUnreadCountByTag(e,t)];case 1:return n=s.sent(),r=n.code,o=n.data,l.info(r,o),r===i["ErrorCode"].SUCCESS?[2,{code:r,data:o}]:(l.warn("getUnreadCountByTag ->code:"+r+",tagId:"+e),[2,{code:r,msg:B[r]}])}}))}))}function Tn(e,t,n){return s(this,void 0,void 0,(function(){var r,o;return a(this,(function(s){switch(s.label){case 0:return Object(i["assert"])("tagId",e,i["AssertRules"].STRING,!0),Object(i["assert"])("conversation.targetId",t.targetId,i["AssertRules"].STRING,!0),Object(i["assert"])("conversation.conversationType",t.conversationType,i["AssertRules"].NUMBER,!0),Object(i["assert"])("conversation.channelId",t.channelId,i["AssertRules"].CHANNEL_ID),Object(i["assert"])("status.isTop",n,i["AssertRules"].BOOLEAN,!0),l.info("setConversationStatusInTag ->tagId:"+e+",targetId:"+t.targetId+",conversationType"+t.conversationType),[4,L.imClient.context.setConversationStatusInTag(e,t,{isTop:n})];case 1:return r=s.sent(),(o=r.code)===i["ErrorCode"].SUCCESS?[2,{code:o}]:(l.warn("setConversationStatusInTag ->code:"+o+",tagId:"+e),[2,{code:o,msg:B[o]}])}}))}))}Nt(i["FileType"].COMBINE_HTML,(function(e,t){return new Qe({remoteUrl:e.downloadUrl,nameList:t.nameList,summaryList:t.summaryList,conversationType:t.conversationType,user:t.user,extra:t.extra})}));var Sn={COMET:"comet",WEBSOCKET:"websocket"},Rn={TEXT:"RC:TxtMsg",VOICE:"RC:VcMsg",HQ_VOICE:"RC:HQVCMsg",IMAGE:"RC:ImgMsg",GIF:"RC:GIFMsg",RICH_CONTENT:"RC:ImgTextMsg",LOCATION:"RC:LBSMsg",FILE:"RC:FileMsg",SIGHT:"RC:SightMsg",COMBINE:"RC:CombineMsg",CHRM_KV_NOTIFY:"RC:chrmKVNotiMsg",LOG_COMMAND:"RC:LogCmdMsg",EXPANSION_NOTIFY:"RC:MsgExMsg",REFERENCE:"RC:ReferenceMsg",RECALL_MESSAGE_TYPE:"RC:RcCmd"};i["VersionManage"].add("imlib","5.2.1"),i["VersionManage"].validEngine("5.2.1")||l.error("The current engine version '"+i["VersionManage"].getInfo().engine+"' error，imlib required engine version at least '5.2.1'.")},"7f4d":function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){for(var t=1,n=arguments.length;t<n;t++){var i=arguments[t]||{};for(var r in i)if(i.hasOwnProperty(r)){var o=i[r];void 0!==o&&(e[r]=o)}}return e}},"7f9a":function(e,t,n){var i=n("da84"),r=n("1626"),o=n("8925"),s=i.WeakMap;e.exports=r(s)&&/native code/.test(o(s))},"7fc1":function(e,t,n){e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=126)}({0:function(e,t,n){"use strict";function i(e,t,n,i,r,o,s,a){var c,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),i&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=c):r&&(c=a?function(){r.call(this,this.$root.$options.shadowRoot)}:r),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}n.d(t,"a",(function(){return i}))},126:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-checkbox-group",attrs:{role:"group","aria-label":"checkbox-group"}},[e._t("default")],2)},r=[];i._withStripped=!0;var o=n(4),s=n.n(o),a={name:"ElCheckboxGroup",componentName:"ElCheckboxGroup",mixins:[s.a],inject:{elFormItem:{default:""}},props:{value:{},disabled:Boolean,min:Number,max:Number,size:String,fill:String,textColor:String},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},checkboxGroupSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size}},watch:{value:function(e){this.dispatch("ElFormItem","el.form.change",[e])}}},c=a,l=n(0),u=Object(l["a"])(c,i,r,!1,null,null,null);u.options.__file="packages/checkbox/src/checkbox-group.vue";var d=u.exports;d.install=function(e){e.component(d.name,d)};t["default"]=d},4:function(e,t){e.exports=n("d010")}})},8119:function(e,t,n){n("693d"),n("dfe5"),n("301c"),n("4e71"),e.exports=n("5524").Symbol},8122:function(e,t,n){"use strict";t.__esModule=!0,t.isEmpty=t.isEqual=t.arrayEquals=t.looseEqual=t.capitalize=t.kebabCase=t.autoprefixer=t.isFirefox=t.isEdge=t.isIE=t.coerceTruthyValueToArray=t.arrayFind=t.arrayFindIndex=t.escapeRegexpString=t.valueEquals=t.generateId=t.getValueByPath=void 0;var i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.noop=l,t.hasOwn=u,t.toObject=h,t.getPropByPath=p,t.rafThrottle=v,t.objToArray=y;var r=n("2b0e"),o=a(r),s=n("a742");function a(e){return e&&e.__esModule?e:{default:e}}var c=Object.prototype.hasOwnProperty;function l(){}function u(e,t){return c.call(e,t)}function d(e,t){for(var n in t)e[n]=t[n];return e}function h(e){for(var t={},n=0;n<e.length;n++)e[n]&&d(t,e[n]);return t}t.getValueByPath=function(e,t){t=t||"";for(var n=t.split("."),i=e,r=null,o=0,s=n.length;o<s;o++){var a=n[o];if(!i)break;if(o===s-1){r=i[a];break}i=i[a]}return r};function p(e,t,n){var i=e;t=t.replace(/\[(\w+)\]/g,".$1"),t=t.replace(/^\./,"");for(var r=t.split("."),o=0,s=r.length;o<s-1;++o){if(!i&&!n)break;var a=r[o];if(!(a in i)){if(n)throw new Error("please transfer a valid prop path to form item!");break}i=i[a]}return{o:i,k:r[o],v:i?i[r[o]]:null}}t.generateId=function(){return Math.floor(1e4*Math.random())},t.valueEquals=function(e,t){if(e===t)return!0;if(!(e instanceof Array))return!1;if(!(t instanceof Array))return!1;if(e.length!==t.length)return!1;for(var n=0;n!==e.length;++n)if(e[n]!==t[n])return!1;return!0},t.escapeRegexpString=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return String(e).replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")};var f=t.arrayFindIndex=function(e,t){for(var n=0;n!==e.length;++n)if(t(e[n]))return n;return-1},g=(t.arrayFind=function(e,t){var n=f(e,t);return-1!==n?e[n]:void 0},t.coerceTruthyValueToArray=function(e){return Array.isArray(e)?e:e?[e]:[]},t.isIE=function(){return!o.default.prototype.$isServer&&!isNaN(Number(document.documentMode))},t.isEdge=function(){return!o.default.prototype.$isServer&&navigator.userAgent.indexOf("Edge")>-1},t.isFirefox=function(){return!o.default.prototype.$isServer&&!!window.navigator.userAgent.match(/firefox/i)},t.autoprefixer=function(e){if("object"!==("undefined"===typeof e?"undefined":i(e)))return e;var t=["transform","transition","animation"],n=["ms-","webkit-"];return t.forEach((function(t){var i=e[t];t&&i&&n.forEach((function(n){e[n+t]=i}))})),e},t.kebabCase=function(e){var t=/([^-])([A-Z])/g;return e.replace(t,"$1-$2").replace(t,"$1-$2").toLowerCase()},t.capitalize=function(e){return(0,s.isString)(e)?e.charAt(0).toUpperCase()+e.slice(1):e},t.looseEqual=function(e,t){var n=(0,s.isObject)(e),i=(0,s.isObject)(t);return n&&i?JSON.stringify(e)===JSON.stringify(t):!n&&!i&&String(e)===String(t)}),m=t.arrayEquals=function(e,t){if(e=e||[],t=t||[],e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!g(e[n],t[n]))return!1;return!0},_=(t.isEqual=function(e,t){return Array.isArray(e)&&Array.isArray(t)?m(e,t):g(e,t)},t.isEmpty=function(e){if(null==e)return!0;if("boolean"===typeof e)return!1;if("number"===typeof e)return!e;if(e instanceof Error)return""===e.message;switch(Object.prototype.toString.call(e)){case"[object String]":case"[object Array]":return!e.length;case"[object File]":case"[object Map]":case"[object Set]":return!e.size;case"[object Object]":return!Object.keys(e).length}return!1});function v(e){var t=!1;return function(){for(var n=this,i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];t||(t=!0,window.requestAnimationFrame((function(i){e.apply(n,r),t=!1})))}}function y(e){return Array.isArray(e)?e:_(e)?[]:[e]}},8237:function(module,exports,__webpack_require__){(function(process,global){var __WEBPACK_AMD_DEFINE_RESULT__;
/**
 * [js-md5]{@link https://github.com/emn178/js-md5}
 *
 * @namespace md5
 * @version 0.7.3
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */(function(){"use strict";var ERROR="input is invalid type",WINDOW="object"===typeof window,root=WINDOW?window:{};root.JS_MD5_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&"object"===typeof self,NODE_JS=!root.JS_MD5_NO_NODE_JS&&"object"===typeof process&&process.versions&&process.versions.node;NODE_JS?root=global:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_MD5_NO_COMMON_JS&&"object"===typeof module&&module.exports,AMD=__webpack_require__("3c35"),ARRAY_BUFFER=!root.JS_MD5_NO_ARRAY_BUFFER&&"undefined"!==typeof ArrayBuffer,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[128,32768,8388608,-2147483648],SHIFT=[0,8,16,24],OUTPUT_TYPES=["hex","array","digest","buffer","arrayBuffer","base64"],BASE64_ENCODE_CHAR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),blocks=[],buffer8;if(ARRAY_BUFFER){var buffer=new ArrayBuffer(68);buffer8=new Uint8Array(buffer),blocks=new Uint32Array(buffer)}!root.JS_MD5_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!ARRAY_BUFFER||!root.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"===typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});var createOutputMethod=function(e){return function(t){return new Md5(!0).update(t)[e]()}},createMethod=function(){var e=createOutputMethod("hex");NODE_JS&&(e=nodeWrap(e)),e.create=function(){return new Md5},e.update=function(t){return e.create().update(t)};for(var t=0;t<OUTPUT_TYPES.length;++t){var n=OUTPUT_TYPES[t];e[n]=createOutputMethod(n)}return e},nodeWrap=function(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(e){if("string"===typeof e)return crypto.createHash("md5").update(e,"utf8").digest("hex");if(null===e||void 0===e)throw ERROR;return e.constructor===ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||ArrayBuffer.isView(e)||e.constructor===Buffer?crypto.createHash("md5").update(new Buffer(e)).digest("hex"):method(e)};return nodeMethod};function Md5(e){if(e)blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks,this.buffer8=buffer8;else if(ARRAY_BUFFER){var t=new ArrayBuffer(68);this.buffer8=new Uint8Array(t),this.blocks=new Uint32Array(t)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Md5.prototype.update=function(e){if(!this.finalized){var t,n=typeof e;if("string"!==n){if("object"!==n)throw ERROR;if(null===e)throw ERROR;if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!Array.isArray(e)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(e)))throw ERROR;t=!0}var i,r,o=0,s=e.length,a=this.blocks,c=this.buffer8;while(o<s){if(this.hashed&&(this.hashed=!1,a[0]=a[16],a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0),t)if(ARRAY_BUFFER)for(r=this.start;o<s&&r<64;++o)c[r++]=e[o];else for(r=this.start;o<s&&r<64;++o)a[r>>2]|=e[o]<<SHIFT[3&r++];else if(ARRAY_BUFFER)for(r=this.start;o<s&&r<64;++o)i=e.charCodeAt(o),i<128?c[r++]=i:i<2048?(c[r++]=192|i>>6,c[r++]=128|63&i):i<55296||i>=57344?(c[r++]=224|i>>12,c[r++]=128|i>>6&63,c[r++]=128|63&i):(i=65536+((1023&i)<<10|1023&e.charCodeAt(++o)),c[r++]=240|i>>18,c[r++]=128|i>>12&63,c[r++]=128|i>>6&63,c[r++]=128|63&i);else for(r=this.start;o<s&&r<64;++o)i=e.charCodeAt(o),i<128?a[r>>2]|=i<<SHIFT[3&r++]:i<2048?(a[r>>2]|=(192|i>>6)<<SHIFT[3&r++],a[r>>2]|=(128|63&i)<<SHIFT[3&r++]):i<55296||i>=57344?(a[r>>2]|=(224|i>>12)<<SHIFT[3&r++],a[r>>2]|=(128|i>>6&63)<<SHIFT[3&r++],a[r>>2]|=(128|63&i)<<SHIFT[3&r++]):(i=65536+((1023&i)<<10|1023&e.charCodeAt(++o)),a[r>>2]|=(240|i>>18)<<SHIFT[3&r++],a[r>>2]|=(128|i>>12&63)<<SHIFT[3&r++],a[r>>2]|=(128|i>>6&63)<<SHIFT[3&r++],a[r>>2]|=(128|63&i)<<SHIFT[3&r++]);this.lastByteIndex=r,this.bytes+=r-this.start,r>=64?(this.start=r-64,this.hash(),this.hashed=!0):this.start=r}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Md5.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[t>>2]|=EXTRA[3&t],t>=56&&(this.hashed||this.hash(),e[0]=e[16],e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.bytes<<3,e[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},Md5.prototype.hash=function(){var e,t,n,i,r,o,s=this.blocks;this.first?(e=s[0]-680876937,e=(e<<7|e>>>25)-271733879<<0,i=(-1732584194^2004318071&e)+s[1]-117830708,i=(i<<12|i>>>20)+e<<0,n=(-271733879^i&(-271733879^e))+s[2]-1126478375,n=(n<<17|n>>>15)+i<<0,t=(e^n&(i^e))+s[3]-1316259209,t=(t<<22|t>>>10)+n<<0):(e=this.h0,t=this.h1,n=this.h2,i=this.h3,e+=(i^t&(n^i))+s[0]-680876936,e=(e<<7|e>>>25)+t<<0,i+=(n^e&(t^n))+s[1]-389564586,i=(i<<12|i>>>20)+e<<0,n+=(t^i&(e^t))+s[2]+606105819,n=(n<<17|n>>>15)+i<<0,t+=(e^n&(i^e))+s[3]-1044525330,t=(t<<22|t>>>10)+n<<0),e+=(i^t&(n^i))+s[4]-176418897,e=(e<<7|e>>>25)+t<<0,i+=(n^e&(t^n))+s[5]+1200080426,i=(i<<12|i>>>20)+e<<0,n+=(t^i&(e^t))+s[6]-1473231341,n=(n<<17|n>>>15)+i<<0,t+=(e^n&(i^e))+s[7]-45705983,t=(t<<22|t>>>10)+n<<0,e+=(i^t&(n^i))+s[8]+1770035416,e=(e<<7|e>>>25)+t<<0,i+=(n^e&(t^n))+s[9]-1958414417,i=(i<<12|i>>>20)+e<<0,n+=(t^i&(e^t))+s[10]-42063,n=(n<<17|n>>>15)+i<<0,t+=(e^n&(i^e))+s[11]-1990404162,t=(t<<22|t>>>10)+n<<0,e+=(i^t&(n^i))+s[12]+1804603682,e=(e<<7|e>>>25)+t<<0,i+=(n^e&(t^n))+s[13]-40341101,i=(i<<12|i>>>20)+e<<0,n+=(t^i&(e^t))+s[14]-1502002290,n=(n<<17|n>>>15)+i<<0,t+=(e^n&(i^e))+s[15]+1236535329,t=(t<<22|t>>>10)+n<<0,e+=(n^i&(t^n))+s[1]-165796510,e=(e<<5|e>>>27)+t<<0,i+=(t^n&(e^t))+s[6]-1069501632,i=(i<<9|i>>>23)+e<<0,n+=(e^t&(i^e))+s[11]+643717713,n=(n<<14|n>>>18)+i<<0,t+=(i^e&(n^i))+s[0]-373897302,t=(t<<20|t>>>12)+n<<0,e+=(n^i&(t^n))+s[5]-701558691,e=(e<<5|e>>>27)+t<<0,i+=(t^n&(e^t))+s[10]+38016083,i=(i<<9|i>>>23)+e<<0,n+=(e^t&(i^e))+s[15]-660478335,n=(n<<14|n>>>18)+i<<0,t+=(i^e&(n^i))+s[4]-405537848,t=(t<<20|t>>>12)+n<<0,e+=(n^i&(t^n))+s[9]+568446438,e=(e<<5|e>>>27)+t<<0,i+=(t^n&(e^t))+s[14]-1019803690,i=(i<<9|i>>>23)+e<<0,n+=(e^t&(i^e))+s[3]-187363961,n=(n<<14|n>>>18)+i<<0,t+=(i^e&(n^i))+s[8]+1163531501,t=(t<<20|t>>>12)+n<<0,e+=(n^i&(t^n))+s[13]-1444681467,e=(e<<5|e>>>27)+t<<0,i+=(t^n&(e^t))+s[2]-51403784,i=(i<<9|i>>>23)+e<<0,n+=(e^t&(i^e))+s[7]+1735328473,n=(n<<14|n>>>18)+i<<0,t+=(i^e&(n^i))+s[12]-1926607734,t=(t<<20|t>>>12)+n<<0,r=t^n,e+=(r^i)+s[5]-378558,e=(e<<4|e>>>28)+t<<0,i+=(r^e)+s[8]-2022574463,i=(i<<11|i>>>21)+e<<0,o=i^e,n+=(o^t)+s[11]+1839030562,n=(n<<16|n>>>16)+i<<0,t+=(o^n)+s[14]-35309556,t=(t<<23|t>>>9)+n<<0,r=t^n,e+=(r^i)+s[1]-1530992060,e=(e<<4|e>>>28)+t<<0,i+=(r^e)+s[4]+1272893353,i=(i<<11|i>>>21)+e<<0,o=i^e,n+=(o^t)+s[7]-155497632,n=(n<<16|n>>>16)+i<<0,t+=(o^n)+s[10]-1094730640,t=(t<<23|t>>>9)+n<<0,r=t^n,e+=(r^i)+s[13]+681279174,e=(e<<4|e>>>28)+t<<0,i+=(r^e)+s[0]-358537222,i=(i<<11|i>>>21)+e<<0,o=i^e,n+=(o^t)+s[3]-722521979,n=(n<<16|n>>>16)+i<<0,t+=(o^n)+s[6]+76029189,t=(t<<23|t>>>9)+n<<0,r=t^n,e+=(r^i)+s[9]-640364487,e=(e<<4|e>>>28)+t<<0,i+=(r^e)+s[12]-421815835,i=(i<<11|i>>>21)+e<<0,o=i^e,n+=(o^t)+s[15]+530742520,n=(n<<16|n>>>16)+i<<0,t+=(o^n)+s[2]-995338651,t=(t<<23|t>>>9)+n<<0,e+=(n^(t|~i))+s[0]-198630844,e=(e<<6|e>>>26)+t<<0,i+=(t^(e|~n))+s[7]+1126891415,i=(i<<10|i>>>22)+e<<0,n+=(e^(i|~t))+s[14]-1416354905,n=(n<<15|n>>>17)+i<<0,t+=(i^(n|~e))+s[5]-57434055,t=(t<<21|t>>>11)+n<<0,e+=(n^(t|~i))+s[12]+1700485571,e=(e<<6|e>>>26)+t<<0,i+=(t^(e|~n))+s[3]-1894986606,i=(i<<10|i>>>22)+e<<0,n+=(e^(i|~t))+s[10]-1051523,n=(n<<15|n>>>17)+i<<0,t+=(i^(n|~e))+s[1]-2054922799,t=(t<<21|t>>>11)+n<<0,e+=(n^(t|~i))+s[8]+1873313359,e=(e<<6|e>>>26)+t<<0,i+=(t^(e|~n))+s[15]-30611744,i=(i<<10|i>>>22)+e<<0,n+=(e^(i|~t))+s[6]-1560198380,n=(n<<15|n>>>17)+i<<0,t+=(i^(n|~e))+s[13]+1309151649,t=(t<<21|t>>>11)+n<<0,e+=(n^(t|~i))+s[4]-145523070,e=(e<<6|e>>>26)+t<<0,i+=(t^(e|~n))+s[11]-1120210379,i=(i<<10|i>>>22)+e<<0,n+=(e^(i|~t))+s[2]+718787259,n=(n<<15|n>>>17)+i<<0,t+=(i^(n|~e))+s[9]-343485551,t=(t<<21|t>>>11)+n<<0,this.first?(this.h0=e+1732584193<<0,this.h1=t-271733879<<0,this.h2=n-1732584194<<0,this.h3=i+271733878<<0,this.first=!1):(this.h0=this.h0+e<<0,this.h1=this.h1+t<<0,this.h2=this.h2+n<<0,this.h3=this.h3+i<<0)},Md5.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,i=this.h3;return HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[15&n]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[i>>4&15]+HEX_CHARS[15&i]+HEX_CHARS[i>>12&15]+HEX_CHARS[i>>8&15]+HEX_CHARS[i>>20&15]+HEX_CHARS[i>>16&15]+HEX_CHARS[i>>28&15]+HEX_CHARS[i>>24&15]},Md5.prototype.toString=Md5.prototype.hex,Md5.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,i=this.h3;return[255&e,e>>8&255,e>>16&255,e>>24&255,255&t,t>>8&255,t>>16&255,t>>24&255,255&n,n>>8&255,n>>16&255,n>>24&255,255&i,i>>8&255,i>>16&255,i>>24&255]},Md5.prototype.array=Md5.prototype.digest,Md5.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(16),t=new Uint32Array(e);return t[0]=this.h0,t[1]=this.h1,t[2]=this.h2,t[3]=this.h3,e},Md5.prototype.buffer=Md5.prototype.arrayBuffer,Md5.prototype.base64=function(){for(var e,t,n,i="",r=this.array(),o=0;o<15;)e=r[o++],t=r[o++],n=r[o++],i+=BASE64_ENCODE_CHAR[e>>>2]+BASE64_ENCODE_CHAR[63&(e<<4|t>>>4)]+BASE64_ENCODE_CHAR[63&(t<<2|n>>>6)]+BASE64_ENCODE_CHAR[63&n];return e=r[o],i+=BASE64_ENCODE_CHAR[e>>>2]+BASE64_ENCODE_CHAR[e<<4&63]+"==",i};var exports=createMethod();COMMON_JS?module.exports=exports:(root.md5=exports,AMD&&(__WEBPACK_AMD_DEFINE_RESULT__=function(){return exports}.call(exports,__webpack_require__,exports,module),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))})()}).call(this,__webpack_require__("4362"),__webpack_require__("c8ba"))},"825a":function(e,t,n){var i=n("da84"),r=n("861d"),o=i.String,s=i.TypeError;e.exports=function(e){if(r(e))return e;throw s(o(e)+" is not an object")}},"83ab":function(e,t,n){var i=n("d039");e.exports=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},"83b9":function(e,t,n){"use strict";var i=n("d925"),r=n("e683");e.exports=function(e,t){return e&&!i(t)?r(e,t):t}},8418:function(e,t,n){"use strict";var i=n("a04b"),r=n("9bf2"),o=n("5c6c");e.exports=function(e,t,n){var s=i(t);s in e?r.f(e,s,o(0,n)):e[s]=n}},"845f":function(e,t,n){e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=87)}({0:function(e,t,n){"use strict";function i(e,t,n,i,r,o,s,a){var c,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),i&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=c):r&&(c=a?function(){r.call(this,this.$root.$options.shadowRoot)}:r),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}n.d(t,"a",(function(){return i}))},87:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-button-group"},[e._t("default")],2)},r=[];i._withStripped=!0;var o={name:"ElButtonGroup"},s=o,a=n(0),c=Object(a["a"])(s,i,r,!1,null,null,null);c.options.__file="packages/button/src/button-group.vue";var l=c.exports;l.install=function(e){e.component(l.name,l)};t["default"]=l}})},"848b":function(e,t,n){"use strict";var i=n("4a0c"),r={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){r[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var o={},s=i.version.split(".");function a(e,t){for(var n=t?t.split("."):s,i=e.split("."),r=0;r<3;r++){if(n[r]>i[r])return!0;if(n[r]<i[r])return!1}return!1}function c(e,t,n){if("object"!==typeof e)throw new TypeError("options must be an object");var i=Object.keys(e),r=i.length;while(r-- >0){var o=i[r],s=t[o];if(s){var a=e[o],c=void 0===a||s(a,o,e);if(!0!==c)throw new TypeError("option "+o+" must be "+c)}else if(!0!==n)throw Error("Unknown option "+o)}}r.transitional=function(e,t,n){var r=t&&a(t);function s(e,t){return"[Axios v"+i.version+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,i,a){if(!1===e)throw new Error(s(i," has been removed in "+t));return r&&!o[i]&&(o[i]=!0,console.warn(s(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,a)}},e.exports={isOlderVersion:a,assertOptions:c,validators:r}},"85e7":function(e,t,n){var i=n("1a14"),r=n("77e9"),o=n("9876");e.exports=n("0bad")?Object.defineProperties:function(e,t){r(e);var n,s=o(t),a=s.length,c=0;while(a>c)i.f(e,n=s[c++],t[n]);return e}},"861d":function(e,t,n){var i=n("1626");e.exports=function(e){return"object"==typeof e?null!==e:i(e)}},8925:function(e,t,n){var i=n("e330"),r=n("1626"),o=n("c6cd"),s=i(Function.toString);r(o.inspectSource)||(o.inspectSource=function(e){return s(e)}),e.exports=o.inspectSource},"8a0d":function(e,t){e.exports={}},"8aa5":function(e,t,n){"use strict";var i=n("6547").charAt;e.exports=function(e,t,n){return t+(n?i(e,t).length:1)}},"8b1a":function(e,t){var n=0,i=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+i).toString(36))}},"8bbc":function(e,t,n){e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=130)}({0:function(e,t,n){"use strict";function i(e,t,n,i,r,o,s,a){var c,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),i&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=c):r&&(c=a?function(){r.call(this,this.$root.$options.shadowRoot)}:r),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}n.d(t,"a",(function(){return i}))},130:function(e,t,n){"use strict";n.r(t);var i,r,o={name:"ElTag",props:{text:String,closable:Boolean,type:String,hit:Boolean,disableTransitions:Boolean,color:String,size:String,effect:{type:String,default:"light",validator:function(e){return-1!==["dark","light","plain"].indexOf(e)}}},methods:{handleClose:function(e){e.stopPropagation(),this.$emit("close",e)},handleClick:function(e){this.$emit("click",e)}},computed:{tagSize:function(){return this.size||(this.$ELEMENT||{}).size}},render:function(e){var t=this.type,n=this.tagSize,i=this.hit,r=this.effect,o=["el-tag",t?"el-tag--"+t:"",n?"el-tag--"+n:"",r?"el-tag--"+r:"",i&&"is-hit"],s=e("span",{class:o,style:{backgroundColor:this.color},on:{click:this.handleClick}},[this.$slots.default,this.closable&&e("i",{class:"el-tag__close el-icon-close",on:{click:this.handleClose}})]);return this.disableTransitions?s:e("transition",{attrs:{name:"el-zoom-in-center"}},[s])}},s=o,a=n(0),c=Object(a["a"])(s,i,r,!1,null,null,null);c.options.__file="packages/tag/src/tag.vue";var l=c.exports;l.install=function(e){e.component(l.name,l)};t["default"]=l}})},"8c4f":function(e,t,n){"use strict";
/*!
  * vue-router v3.5.3
  * (c) 2021 Evan You
  * @license MIT
  */function i(e,t){for(var n in t)e[n]=t[n];return e}var r=/[!'()*]/g,o=function(e){return"%"+e.charCodeAt(0).toString(16)},s=/%2C/g,a=function(e){return encodeURIComponent(e).replace(r,o).replace(s,",")};function c(e){try{return decodeURIComponent(e)}catch(t){0}return e}function l(e,t,n){void 0===t&&(t={});var i,r=n||d;try{i=r(e||"")}catch(a){i={}}for(var o in t){var s=t[o];i[o]=Array.isArray(s)?s.map(u):u(s)}return i}var u=function(e){return null==e||"object"===typeof e?e:String(e)};function d(e){var t={};return e=e.trim().replace(/^(\?|#|&)/,""),e?(e.split("&").forEach((function(e){var n=e.replace(/\+/g," ").split("="),i=c(n.shift()),r=n.length>0?c(n.join("=")):null;void 0===t[i]?t[i]=r:Array.isArray(t[i])?t[i].push(r):t[i]=[t[i],r]})),t):t}function h(e){var t=e?Object.keys(e).map((function(t){var n=e[t];if(void 0===n)return"";if(null===n)return a(t);if(Array.isArray(n)){var i=[];return n.forEach((function(e){void 0!==e&&(null===e?i.push(a(t)):i.push(a(t)+"="+a(e)))})),i.join("&")}return a(t)+"="+a(n)})).filter((function(e){return e.length>0})).join("&"):null;return t?"?"+t:""}var p=/\/?$/;function f(e,t,n,i){var r=i&&i.options.stringifyQuery,o=t.query||{};try{o=g(o)}catch(a){}var s={name:t.name||e&&e.name,meta:e&&e.meta||{},path:t.path||"/",hash:t.hash||"",query:o,params:t.params||{},fullPath:v(t,r),matched:e?_(e):[]};return n&&(s.redirectedFrom=v(n,r)),Object.freeze(s)}function g(e){if(Array.isArray(e))return e.map(g);if(e&&"object"===typeof e){var t={};for(var n in e)t[n]=g(e[n]);return t}return e}var m=f(null,{path:"/"});function _(e){var t=[];while(e)t.unshift(e),e=e.parent;return t}function v(e,t){var n=e.path,i=e.query;void 0===i&&(i={});var r=e.hash;void 0===r&&(r="");var o=t||h;return(n||"/")+o(i)+r}function y(e,t,n){return t===m?e===t:!!t&&(e.path&&t.path?e.path.replace(p,"")===t.path.replace(p,"")&&(n||e.hash===t.hash&&C(e.query,t.query)):!(!e.name||!t.name)&&(e.name===t.name&&(n||e.hash===t.hash&&C(e.query,t.query)&&C(e.params,t.params))))}function C(e,t){if(void 0===e&&(e={}),void 0===t&&(t={}),!e||!t)return e===t;var n=Object.keys(e).sort(),i=Object.keys(t).sort();return n.length===i.length&&n.every((function(n,r){var o=e[n],s=i[r];if(s!==n)return!1;var a=t[n];return null==o||null==a?o===a:"object"===typeof o&&"object"===typeof a?C(o,a):String(o)===String(a)}))}function E(e,t){return 0===e.path.replace(p,"/").indexOf(t.path.replace(p,"/"))&&(!t.hash||e.hash===t.hash)&&b(e.query,t.query)}function b(e,t){for(var n in t)if(!(n in e))return!1;return!0}function T(e){for(var t=0;t<e.matched.length;t++){var n=e.matched[t];for(var i in n.instances){var r=n.instances[i],o=n.enteredCbs[i];if(r&&o){delete n.enteredCbs[i];for(var s=0;s<o.length;s++)r._isBeingDestroyed||o[s](r)}}}}var S={name:"RouterView",functional:!0,props:{name:{type:String,default:"default"}},render:function(e,t){var n=t.props,r=t.children,o=t.parent,s=t.data;s.routerView=!0;var a=o.$createElement,c=n.name,l=o.$route,u=o._routerViewCache||(o._routerViewCache={}),d=0,h=!1;while(o&&o._routerRoot!==o){var p=o.$vnode?o.$vnode.data:{};p.routerView&&d++,p.keepAlive&&o._directInactive&&o._inactive&&(h=!0),o=o.$parent}if(s.routerViewDepth=d,h){var f=u[c],g=f&&f.component;return g?(f.configProps&&R(g,s,f.route,f.configProps),a(g,s,r)):a()}var m=l.matched[d],_=m&&m.components[c];if(!m||!_)return u[c]=null,a();u[c]={component:_},s.registerRouteInstance=function(e,t){var n=m.instances[c];(t&&n!==e||!t&&n===e)&&(m.instances[c]=t)},(s.hook||(s.hook={})).prepatch=function(e,t){m.instances[c]=t.componentInstance},s.hook.init=function(e){e.data.keepAlive&&e.componentInstance&&e.componentInstance!==m.instances[c]&&(m.instances[c]=e.componentInstance),T(l)};var v=m.props&&m.props[c];return v&&(i(u[c],{route:l,configProps:v}),R(_,s,l,v)),a(_,s,r)}};function R(e,t,n,r){var o=t.props=I(n,r);if(o){o=t.props=i({},o);var s=t.attrs=t.attrs||{};for(var a in o)e.props&&a in e.props||(s[a]=o[a],delete o[a])}}function I(e,t){switch(typeof t){case"undefined":return;case"object":return t;case"function":return t(e);case"boolean":return t?e.params:void 0;default:0}}function w(e,t,n){var i=e.charAt(0);if("/"===i)return e;if("?"===i||"#"===i)return t+e;var r=t.split("/");n&&r[r.length-1]||r.pop();for(var o=e.replace(/^\//,"").split("/"),s=0;s<o.length;s++){var a=o[s];".."===a?r.pop():"."!==a&&r.push(a)}return""!==r[0]&&r.unshift(""),r.join("/")}function O(e){var t="",n="",i=e.indexOf("#");i>=0&&(t=e.slice(i),e=e.slice(0,i));var r=e.indexOf("?");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{path:e,query:n,hash:t}}function k(e){return e.replace(/\/+/g,"/")}var M=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},x=J,P=U,A=B,D=F,N=Y,L=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function U(e,t){var n,i=[],r=0,o=0,s="",a=t&&t.delimiter||"/";while(null!=(n=L.exec(e))){var c=n[0],l=n[1],u=n.index;if(s+=e.slice(o,u),o=u+c.length,l)s+=l[1];else{var d=e[o],h=n[2],p=n[3],f=n[4],g=n[5],m=n[6],_=n[7];s&&(i.push(s),s="");var v=null!=h&&null!=d&&d!==h,y="+"===m||"*"===m,C="?"===m||"*"===m,E=n[2]||a,b=f||g;i.push({name:p||r++,prefix:h||"",delimiter:E,optional:C,repeat:y,partial:v,asterisk:!!_,pattern:b?H(b):_?".*":"[^"+$(E)+"]+?"})}}return o<e.length&&(s+=e.substr(o)),s&&i.push(s),i}function B(e,t){return F(U(e,t),t)}function V(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function j(e){return encodeURI(e).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function F(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"===typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",W(t)));return function(t,i){for(var r="",o=t||{},s=i||{},a=s.pretty?V:encodeURIComponent,c=0;c<e.length;c++){var l=e[c];if("string"!==typeof l){var u,d=o[l.name];if(null==d){if(l.optional){l.partial&&(r+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(M(d)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var h=0;h<d.length;h++){if(u=a(d[h]),!n[c].test(u))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(u)+"`");r+=(0===h?l.prefix:l.delimiter)+u}}else{if(u=l.asterisk?j(d):a(d),!n[c].test(u))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+u+'"');r+=l.prefix+u}}else r+=l}return r}}function $(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function H(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function K(e,t){return e.keys=t,e}function W(e){return e&&e.sensitive?"":"i"}function q(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var i=0;i<n.length;i++)t.push({name:i,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return K(e,t)}function G(e,t,n){for(var i=[],r=0;r<e.length;r++)i.push(J(e[r],t,n).source);var o=new RegExp("(?:"+i.join("|")+")",W(n));return K(o,t)}function z(e,t,n){return Y(U(e,n),t,n)}function Y(e,t,n){M(t)||(n=t||n,t=[]),n=n||{};for(var i=n.strict,r=!1!==n.end,o="",s=0;s<e.length;s++){var a=e[s];if("string"===typeof a)o+=$(a);else{var c=$(a.prefix),l="(?:"+a.pattern+")";t.push(a),a.repeat&&(l+="(?:"+c+l+")*"),l=a.optional?a.partial?c+"("+l+")?":"(?:"+c+"("+l+"))?":c+"("+l+")",o+=l}}var u=$(n.delimiter||"/"),d=o.slice(-u.length)===u;return i||(o=(d?o.slice(0,-u.length):o)+"(?:"+u+"(?=$))?"),o+=r?"$":i&&d?"":"(?="+u+"|$)",K(new RegExp("^"+o,W(n)),t)}function J(e,t,n){return M(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?q(e,t):M(e)?G(e,t,n):z(e,t,n)}x.parse=P,x.compile=A,x.tokensToFunction=D,x.tokensToRegExp=N;var X=Object.create(null);function Q(e,t,n){t=t||{};try{var i=X[e]||(X[e]=x.compile(e));return"string"===typeof t.pathMatch&&(t[0]=t.pathMatch),i(t,{pretty:!0})}catch(r){return""}finally{delete t[0]}}function Z(e,t,n,r){var o="string"===typeof e?{path:e}:e;if(o._normalized)return o;if(o.name){o=i({},e);var s=o.params;return s&&"object"===typeof s&&(o.params=i({},s)),o}if(!o.path&&o.params&&t){o=i({},o),o._normalized=!0;var a=i(i({},t.params),o.params);if(t.name)o.name=t.name,o.params=a;else if(t.matched.length){var c=t.matched[t.matched.length-1].path;o.path=Q(c,a,"path "+t.path)}else 0;return o}var u=O(o.path||""),d=t&&t.path||"/",h=u.path?w(u.path,d,n||o.append):d,p=l(u.query,o.query,r&&r.options.parseQuery),f=o.hash||u.hash;return f&&"#"!==f.charAt(0)&&(f="#"+f),{_normalized:!0,path:h,query:p,hash:f}}var ee,te=[String,Object],ne=[String,Array],ie=function(){},re={name:"RouterLink",props:{to:{type:te,required:!0},tag:{type:String,default:"a"},custom:Boolean,exact:Boolean,exactPath:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,ariaCurrentValue:{type:String,default:"page"},event:{type:ne,default:"click"}},render:function(e){var t=this,n=this.$router,r=this.$route,o=n.resolve(this.to,r,this.append),s=o.location,a=o.route,c=o.href,l={},u=n.options.linkActiveClass,d=n.options.linkExactActiveClass,h=null==u?"router-link-active":u,p=null==d?"router-link-exact-active":d,g=null==this.activeClass?h:this.activeClass,m=null==this.exactActiveClass?p:this.exactActiveClass,_=a.redirectedFrom?f(null,Z(a.redirectedFrom),null,n):a;l[m]=y(r,_,this.exactPath),l[g]=this.exact||this.exactPath?l[m]:E(r,_);var v=l[m]?this.ariaCurrentValue:null,C=function(e){oe(e)&&(t.replace?n.replace(s,ie):n.push(s,ie))},b={click:oe};Array.isArray(this.event)?this.event.forEach((function(e){b[e]=C})):b[this.event]=C;var T={class:l},S=!this.$scopedSlots.$hasNormal&&this.$scopedSlots.default&&this.$scopedSlots.default({href:c,route:a,navigate:C,isActive:l[g],isExactActive:l[m]});if(S){if(1===S.length)return S[0];if(S.length>1||!S.length)return 0===S.length?e():e("span",{},S)}if("a"===this.tag)T.on=b,T.attrs={href:c,"aria-current":v};else{var R=se(this.$slots.default);if(R){R.isStatic=!1;var I=R.data=i({},R.data);for(var w in I.on=I.on||{},I.on){var O=I.on[w];w in b&&(I.on[w]=Array.isArray(O)?O:[O])}for(var k in b)k in I.on?I.on[k].push(b[k]):I.on[k]=C;var M=R.data.attrs=i({},R.data.attrs);M.href=c,M["aria-current"]=v}else T.on=b}return e(this.tag,T,this.$slots.default)}};function oe(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&(void 0===e.button||0===e.button)){if(e.currentTarget&&e.currentTarget.getAttribute){var t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function se(e){if(e)for(var t,n=0;n<e.length;n++){if(t=e[n],"a"===t.tag)return t;if(t.children&&(t=se(t.children)))return t}}function ae(e){if(!ae.installed||ee!==e){ae.installed=!0,ee=e;var t=function(e){return void 0!==e},n=function(e,n){var i=e.$options._parentVnode;t(i)&&t(i=i.data)&&t(i=i.registerRouteInstance)&&i(e,n)};e.mixin({beforeCreate:function(){t(this.$options.router)?(this._routerRoot=this,this._router=this.$options.router,this._router.init(this),e.util.defineReactive(this,"_route",this._router.history.current)):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,n(this,this)},destroyed:function(){n(this)}}),Object.defineProperty(e.prototype,"$router",{get:function(){return this._routerRoot._router}}),Object.defineProperty(e.prototype,"$route",{get:function(){return this._routerRoot._route}}),e.component("RouterView",S),e.component("RouterLink",re);var i=e.config.optionMergeStrategies;i.beforeRouteEnter=i.beforeRouteLeave=i.beforeRouteUpdate=i.created}}var ce="undefined"!==typeof window;function le(e,t,n,i,r){var o=t||[],s=n||Object.create(null),a=i||Object.create(null);e.forEach((function(e){ue(o,s,a,e,r)}));for(var c=0,l=o.length;c<l;c++)"*"===o[c]&&(o.push(o.splice(c,1)[0]),l--,c--);return{pathList:o,pathMap:s,nameMap:a}}function ue(e,t,n,i,r,o){var s=i.path,a=i.name;var c=i.pathToRegexpOptions||{},l=he(s,r,c.strict);"boolean"===typeof i.caseSensitive&&(c.sensitive=i.caseSensitive);var u={path:l,regex:de(l,c),components:i.components||{default:i.component},alias:i.alias?"string"===typeof i.alias?[i.alias]:i.alias:[],instances:{},enteredCbs:{},name:a,parent:r,matchAs:o,redirect:i.redirect,beforeEnter:i.beforeEnter,meta:i.meta||{},props:null==i.props?{}:i.components?i.props:{default:i.props}};if(i.children&&i.children.forEach((function(i){var r=o?k(o+"/"+i.path):void 0;ue(e,t,n,i,u,r)})),t[u.path]||(e.push(u.path),t[u.path]=u),void 0!==i.alias)for(var d=Array.isArray(i.alias)?i.alias:[i.alias],h=0;h<d.length;++h){var p=d[h];0;var f={path:p,children:i.children};ue(e,t,n,f,r,u.path||"/")}a&&(n[a]||(n[a]=u))}function de(e,t){var n=x(e,[],t);return n}function he(e,t,n){return n||(e=e.replace(/\/$/,"")),"/"===e[0]||null==t?e:k(t.path+"/"+e)}function pe(e,t){var n=le(e),i=n.pathList,r=n.pathMap,o=n.nameMap;function s(e){le(e,i,r,o)}function a(e,t){var n="object"!==typeof e?o[e]:void 0;le([t||e],i,r,o,n),n&&n.alias.length&&le(n.alias.map((function(e){return{path:e,children:[t]}})),i,r,o,n)}function c(){return i.map((function(e){return r[e]}))}function l(e,n,s){var a=Z(e,n,!1,t),c=a.name;if(c){var l=o[c];if(!l)return h(null,a);var u=l.regex.keys.filter((function(e){return!e.optional})).map((function(e){return e.name}));if("object"!==typeof a.params&&(a.params={}),n&&"object"===typeof n.params)for(var d in n.params)!(d in a.params)&&u.indexOf(d)>-1&&(a.params[d]=n.params[d]);return a.path=Q(l.path,a.params,'named route "'+c+'"'),h(l,a,s)}if(a.path){a.params={};for(var p=0;p<i.length;p++){var f=i[p],g=r[f];if(fe(g.regex,a.path,a.params))return h(g,a,s)}}return h(null,a)}function u(e,n){var i=e.redirect,r="function"===typeof i?i(f(e,n,null,t)):i;if("string"===typeof r&&(r={path:r}),!r||"object"!==typeof r)return h(null,n);var s=r,a=s.name,c=s.path,u=n.query,d=n.hash,p=n.params;if(u=s.hasOwnProperty("query")?s.query:u,d=s.hasOwnProperty("hash")?s.hash:d,p=s.hasOwnProperty("params")?s.params:p,a){o[a];return l({_normalized:!0,name:a,query:u,hash:d,params:p},void 0,n)}if(c){var g=ge(c,e),m=Q(g,p,'redirect route with path "'+g+'"');return l({_normalized:!0,path:m,query:u,hash:d},void 0,n)}return h(null,n)}function d(e,t,n){var i=Q(n,t.params,'aliased route with path "'+n+'"'),r=l({_normalized:!0,path:i});if(r){var o=r.matched,s=o[o.length-1];return t.params=r.params,h(s,t)}return h(null,t)}function h(e,n,i){return e&&e.redirect?u(e,i||n):e&&e.matchAs?d(e,n,e.matchAs):f(e,n,i,t)}return{match:l,addRoute:a,getRoutes:c,addRoutes:s}}function fe(e,t,n){var i=t.match(e);if(!i)return!1;if(!n)return!0;for(var r=1,o=i.length;r<o;++r){var s=e.keys[r-1];s&&(n[s.name||"pathMatch"]="string"===typeof i[r]?c(i[r]):i[r])}return!0}function ge(e,t){return w(e,t.parent?t.parent.path:"/",!0)}var me=ce&&window.performance&&window.performance.now?window.performance:Date;function _e(){return me.now().toFixed(3)}var ve=_e();function ye(){return ve}function Ce(e){return ve=e}var Ee=Object.create(null);function be(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual");var e=window.location.protocol+"//"+window.location.host,t=window.location.href.replace(e,""),n=i({},window.history.state);return n.key=ye(),window.history.replaceState(n,"",t),window.addEventListener("popstate",Re),function(){window.removeEventListener("popstate",Re)}}function Te(e,t,n,i){if(e.app){var r=e.options.scrollBehavior;r&&e.app.$nextTick((function(){var o=Ie(),s=r.call(e,t,n,i?o:null);s&&("function"===typeof s.then?s.then((function(e){Ae(e,o)})).catch((function(e){0})):Ae(s,o))}))}}function Se(){var e=ye();e&&(Ee[e]={x:window.pageXOffset,y:window.pageYOffset})}function Re(e){Se(),e.state&&e.state.key&&Ce(e.state.key)}function Ie(){var e=ye();if(e)return Ee[e]}function we(e,t){var n=document.documentElement,i=n.getBoundingClientRect(),r=e.getBoundingClientRect();return{x:r.left-i.left-t.x,y:r.top-i.top-t.y}}function Oe(e){return xe(e.x)||xe(e.y)}function ke(e){return{x:xe(e.x)?e.x:window.pageXOffset,y:xe(e.y)?e.y:window.pageYOffset}}function Me(e){return{x:xe(e.x)?e.x:0,y:xe(e.y)?e.y:0}}function xe(e){return"number"===typeof e}var Pe=/^#\d/;function Ae(e,t){var n="object"===typeof e;if(n&&"string"===typeof e.selector){var i=Pe.test(e.selector)?document.getElementById(e.selector.slice(1)):document.querySelector(e.selector);if(i){var r=e.offset&&"object"===typeof e.offset?e.offset:{};r=Me(r),t=we(i,r)}else Oe(e)&&(t=ke(e))}else n&&Oe(e)&&(t=ke(e));t&&("scrollBehavior"in document.documentElement.style?window.scrollTo({left:t.x,top:t.y,behavior:e.behavior}):window.scrollTo(t.x,t.y))}var De=ce&&function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&(window.history&&"function"===typeof window.history.pushState)}();function Ne(e,t){Se();var n=window.history;try{if(t){var r=i({},n.state);r.key=ye(),n.replaceState(r,"",e)}else n.pushState({key:Ce(_e())},"",e)}catch(o){window.location[t?"replace":"assign"](e)}}function Le(e){Ne(e,!0)}function Ue(e,t,n){var i=function(r){r>=e.length?n():e[r]?t(e[r],(function(){i(r+1)})):i(r+1)};i(0)}var Be={redirected:2,aborted:4,cancelled:8,duplicated:16};function Ve(e,t){return He(e,t,Be.redirected,'Redirected when going from "'+e.fullPath+'" to "'+We(t)+'" via a navigation guard.')}function je(e,t){var n=He(e,t,Be.duplicated,'Avoided redundant navigation to current location: "'+e.fullPath+'".');return n.name="NavigationDuplicated",n}function Fe(e,t){return He(e,t,Be.cancelled,'Navigation cancelled from "'+e.fullPath+'" to "'+t.fullPath+'" with a new navigation.')}function $e(e,t){return He(e,t,Be.aborted,'Navigation aborted from "'+e.fullPath+'" to "'+t.fullPath+'" via a navigation guard.')}function He(e,t,n,i){var r=new Error(i);return r._isRouter=!0,r.from=e,r.to=t,r.type=n,r}var Ke=["params","query","hash"];function We(e){if("string"===typeof e)return e;if("path"in e)return e.path;var t={};return Ke.forEach((function(n){n in e&&(t[n]=e[n])})),JSON.stringify(t,null,2)}function qe(e){return Object.prototype.toString.call(e).indexOf("Error")>-1}function Ge(e,t){return qe(e)&&e._isRouter&&(null==t||e.type===t)}function ze(e){return function(t,n,i){var r=!1,o=0,s=null;Ye(e,(function(e,t,n,a){if("function"===typeof e&&void 0===e.cid){r=!0,o++;var c,l=Ze((function(t){Qe(t)&&(t=t.default),e.resolved="function"===typeof t?t:ee.extend(t),n.components[a]=t,o--,o<=0&&i()})),u=Ze((function(e){var t="Failed to resolve async component "+a+": "+e;s||(s=qe(e)?e:new Error(t),i(s))}));try{c=e(l,u)}catch(h){u(h)}if(c)if("function"===typeof c.then)c.then(l,u);else{var d=c.component;d&&"function"===typeof d.then&&d.then(l,u)}}})),r||i()}}function Ye(e,t){return Je(e.map((function(e){return Object.keys(e.components).map((function(n){return t(e.components[n],e.instances[n],e,n)}))})))}function Je(e){return Array.prototype.concat.apply([],e)}var Xe="function"===typeof Symbol&&"symbol"===typeof Symbol.toStringTag;function Qe(e){return e.__esModule||Xe&&"Module"===e[Symbol.toStringTag]}function Ze(e){var t=!1;return function(){var n=[],i=arguments.length;while(i--)n[i]=arguments[i];if(!t)return t=!0,e.apply(this,n)}}var et=function(e,t){this.router=e,this.base=tt(t),this.current=m,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[],this.listeners=[]};function tt(e){if(!e)if(ce){var t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^https?:\/\/[^\/]+/,"")}else e="/";return"/"!==e.charAt(0)&&(e="/"+e),e.replace(/\/$/,"")}function nt(e,t){var n,i=Math.max(e.length,t.length);for(n=0;n<i;n++)if(e[n]!==t[n])break;return{updated:t.slice(0,n),activated:t.slice(n),deactivated:e.slice(n)}}function it(e,t,n,i){var r=Ye(e,(function(e,i,r,o){var s=rt(e,t);if(s)return Array.isArray(s)?s.map((function(e){return n(e,i,r,o)})):n(s,i,r,o)}));return Je(i?r.reverse():r)}function rt(e,t){return"function"!==typeof e&&(e=ee.extend(e)),e.options[t]}function ot(e){return it(e,"beforeRouteLeave",at,!0)}function st(e){return it(e,"beforeRouteUpdate",at)}function at(e,t){if(t)return function(){return e.apply(t,arguments)}}function ct(e){return it(e,"beforeRouteEnter",(function(e,t,n,i){return lt(e,n,i)}))}function lt(e,t,n){return function(i,r,o){return e(i,r,(function(e){"function"===typeof e&&(t.enteredCbs[n]||(t.enteredCbs[n]=[]),t.enteredCbs[n].push(e)),o(e)}))}}et.prototype.listen=function(e){this.cb=e},et.prototype.onReady=function(e,t){this.ready?e():(this.readyCbs.push(e),t&&this.readyErrorCbs.push(t))},et.prototype.onError=function(e){this.errorCbs.push(e)},et.prototype.transitionTo=function(e,t,n){var i,r=this;try{i=this.router.match(e,this.current)}catch(s){throw this.errorCbs.forEach((function(e){e(s)})),s}var o=this.current;this.confirmTransition(i,(function(){r.updateRoute(i),t&&t(i),r.ensureURL(),r.router.afterHooks.forEach((function(e){e&&e(i,o)})),r.ready||(r.ready=!0,r.readyCbs.forEach((function(e){e(i)})))}),(function(e){n&&n(e),e&&!r.ready&&(Ge(e,Be.redirected)&&o===m||(r.ready=!0,r.readyErrorCbs.forEach((function(t){t(e)}))))}))},et.prototype.confirmTransition=function(e,t,n){var i=this,r=this.current;this.pending=e;var o=function(e){!Ge(e)&&qe(e)&&(i.errorCbs.length?i.errorCbs.forEach((function(t){t(e)})):console.error(e)),n&&n(e)},s=e.matched.length-1,a=r.matched.length-1;if(y(e,r)&&s===a&&e.matched[s]===r.matched[a])return this.ensureURL(),e.hash&&Te(this.router,r,e,!1),o(je(r,e));var c=nt(this.current.matched,e.matched),l=c.updated,u=c.deactivated,d=c.activated,h=[].concat(ot(u),this.router.beforeHooks,st(l),d.map((function(e){return e.beforeEnter})),ze(d)),p=function(t,n){if(i.pending!==e)return o(Fe(r,e));try{t(e,r,(function(t){!1===t?(i.ensureURL(!0),o($e(r,e))):qe(t)?(i.ensureURL(!0),o(t)):"string"===typeof t||"object"===typeof t&&("string"===typeof t.path||"string"===typeof t.name)?(o(Ve(r,e)),"object"===typeof t&&t.replace?i.replace(t):i.push(t)):n(t)}))}catch(s){o(s)}};Ue(h,p,(function(){var n=ct(d),s=n.concat(i.router.resolveHooks);Ue(s,p,(function(){if(i.pending!==e)return o(Fe(r,e));i.pending=null,t(e),i.router.app&&i.router.app.$nextTick((function(){T(e)}))}))}))},et.prototype.updateRoute=function(e){this.current=e,this.cb&&this.cb(e)},et.prototype.setupListeners=function(){},et.prototype.teardown=function(){this.listeners.forEach((function(e){e()})),this.listeners=[],this.current=m,this.pending=null};var ut=function(e){function t(t,n){e.call(this,t,n),this._startLocation=dt(this.base)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setupListeners=function(){var e=this;if(!(this.listeners.length>0)){var t=this.router,n=t.options.scrollBehavior,i=De&&n;i&&this.listeners.push(be());var r=function(){var n=e.current,r=dt(e.base);e.current===m&&r===e._startLocation||e.transitionTo(r,(function(e){i&&Te(t,e,n,!0)}))};window.addEventListener("popstate",r),this.listeners.push((function(){window.removeEventListener("popstate",r)}))}},t.prototype.go=function(e){window.history.go(e)},t.prototype.push=function(e,t,n){var i=this,r=this,o=r.current;this.transitionTo(e,(function(e){Ne(k(i.base+e.fullPath)),Te(i.router,e,o,!1),t&&t(e)}),n)},t.prototype.replace=function(e,t,n){var i=this,r=this,o=r.current;this.transitionTo(e,(function(e){Le(k(i.base+e.fullPath)),Te(i.router,e,o,!1),t&&t(e)}),n)},t.prototype.ensureURL=function(e){if(dt(this.base)!==this.current.fullPath){var t=k(this.base+this.current.fullPath);e?Ne(t):Le(t)}},t.prototype.getCurrentLocation=function(){return dt(this.base)},t}(et);function dt(e){var t=window.location.pathname,n=t.toLowerCase(),i=e.toLowerCase();return!e||n!==i&&0!==n.indexOf(k(i+"/"))||(t=t.slice(e.length)),(t||"/")+window.location.search+window.location.hash}var ht=function(e){function t(t,n,i){e.call(this,t,n),i&&pt(this.base)||ft()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setupListeners=function(){var e=this;if(!(this.listeners.length>0)){var t=this.router,n=t.options.scrollBehavior,i=De&&n;i&&this.listeners.push(be());var r=function(){var t=e.current;ft()&&e.transitionTo(gt(),(function(n){i&&Te(e.router,n,t,!0),De||vt(n.fullPath)}))},o=De?"popstate":"hashchange";window.addEventListener(o,r),this.listeners.push((function(){window.removeEventListener(o,r)}))}},t.prototype.push=function(e,t,n){var i=this,r=this,o=r.current;this.transitionTo(e,(function(e){_t(e.fullPath),Te(i.router,e,o,!1),t&&t(e)}),n)},t.prototype.replace=function(e,t,n){var i=this,r=this,o=r.current;this.transitionTo(e,(function(e){vt(e.fullPath),Te(i.router,e,o,!1),t&&t(e)}),n)},t.prototype.go=function(e){window.history.go(e)},t.prototype.ensureURL=function(e){var t=this.current.fullPath;gt()!==t&&(e?_t(t):vt(t))},t.prototype.getCurrentLocation=function(){return gt()},t}(et);function pt(e){var t=dt(e);if(!/^\/#/.test(t))return window.location.replace(k(e+"/#"+t)),!0}function ft(){var e=gt();return"/"===e.charAt(0)||(vt("/"+e),!1)}function gt(){var e=window.location.href,t=e.indexOf("#");return t<0?"":(e=e.slice(t+1),e)}function mt(e){var t=window.location.href,n=t.indexOf("#"),i=n>=0?t.slice(0,n):t;return i+"#"+e}function _t(e){De?Ne(mt(e)):window.location.hash=e}function vt(e){De?Le(mt(e)):window.location.replace(mt(e))}var yt=function(e){function t(t,n){e.call(this,t,n),this.stack=[],this.index=-1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.push=function(e,t,n){var i=this;this.transitionTo(e,(function(e){i.stack=i.stack.slice(0,i.index+1).concat(e),i.index++,t&&t(e)}),n)},t.prototype.replace=function(e,t,n){var i=this;this.transitionTo(e,(function(e){i.stack=i.stack.slice(0,i.index).concat(e),t&&t(e)}),n)},t.prototype.go=function(e){var t=this,n=this.index+e;if(!(n<0||n>=this.stack.length)){var i=this.stack[n];this.confirmTransition(i,(function(){var e=t.current;t.index=n,t.updateRoute(i),t.router.afterHooks.forEach((function(t){t&&t(i,e)}))}),(function(e){Ge(e,Be.duplicated)&&(t.index=n)}))}},t.prototype.getCurrentLocation=function(){var e=this.stack[this.stack.length-1];return e?e.fullPath:"/"},t.prototype.ensureURL=function(){},t}(et),Ct=function(e){void 0===e&&(e={}),this.app=null,this.apps=[],this.options=e,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=pe(e.routes||[],this);var t=e.mode||"hash";switch(this.fallback="history"===t&&!De&&!1!==e.fallback,this.fallback&&(t="hash"),ce||(t="abstract"),this.mode=t,t){case"history":this.history=new ut(this,e.base);break;case"hash":this.history=new ht(this,e.base,this.fallback);break;case"abstract":this.history=new yt(this,e.base);break;default:0}},Et={currentRoute:{configurable:!0}};function bt(e,t){return e.push(t),function(){var n=e.indexOf(t);n>-1&&e.splice(n,1)}}function Tt(e,t,n){var i="hash"===n?"#"+t:t;return e?k(e+"/"+i):i}Ct.prototype.match=function(e,t,n){return this.matcher.match(e,t,n)},Et.currentRoute.get=function(){return this.history&&this.history.current},Ct.prototype.init=function(e){var t=this;if(this.apps.push(e),e.$once("hook:destroyed",(function(){var n=t.apps.indexOf(e);n>-1&&t.apps.splice(n,1),t.app===e&&(t.app=t.apps[0]||null),t.app||t.history.teardown()})),!this.app){this.app=e;var n=this.history;if(n instanceof ut||n instanceof ht){var i=function(e){var i=n.current,r=t.options.scrollBehavior,o=De&&r;o&&"fullPath"in e&&Te(t,e,i,!1)},r=function(e){n.setupListeners(),i(e)};n.transitionTo(n.getCurrentLocation(),r,r)}n.listen((function(e){t.apps.forEach((function(t){t._route=e}))}))}},Ct.prototype.beforeEach=function(e){return bt(this.beforeHooks,e)},Ct.prototype.beforeResolve=function(e){return bt(this.resolveHooks,e)},Ct.prototype.afterEach=function(e){return bt(this.afterHooks,e)},Ct.prototype.onReady=function(e,t){this.history.onReady(e,t)},Ct.prototype.onError=function(e){this.history.onError(e)},Ct.prototype.push=function(e,t,n){var i=this;if(!t&&!n&&"undefined"!==typeof Promise)return new Promise((function(t,n){i.history.push(e,t,n)}));this.history.push(e,t,n)},Ct.prototype.replace=function(e,t,n){var i=this;if(!t&&!n&&"undefined"!==typeof Promise)return new Promise((function(t,n){i.history.replace(e,t,n)}));this.history.replace(e,t,n)},Ct.prototype.go=function(e){this.history.go(e)},Ct.prototype.back=function(){this.go(-1)},Ct.prototype.forward=function(){this.go(1)},Ct.prototype.getMatchedComponents=function(e){var t=e?e.matched?e:this.resolve(e).route:this.currentRoute;return t?[].concat.apply([],t.matched.map((function(e){return Object.keys(e.components).map((function(t){return e.components[t]}))}))):[]},Ct.prototype.resolve=function(e,t,n){t=t||this.history.current;var i=Z(e,t,n,this),r=this.match(i,t),o=r.redirectedFrom||r.fullPath,s=this.history.base,a=Tt(s,o,this.mode);return{location:i,route:r,href:a,normalizedTo:i,resolved:r}},Ct.prototype.getRoutes=function(){return this.matcher.getRoutes()},Ct.prototype.addRoute=function(e,t){this.matcher.addRoute(e,t),this.history.current!==m&&this.history.transitionTo(this.history.getCurrentLocation())},Ct.prototype.addRoutes=function(e){this.matcher.addRoutes(e),this.history.current!==m&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties(Ct.prototype,Et),Ct.install=ae,Ct.version="3.5.3",Ct.isNavigationFailure=Ge,Ct.NavigationFailureType=Be,Ct.START_LOCATION=m,ce&&window.Vue&&window.Vue.use(Ct),t["a"]=Ct},"8df4":function(e,t,n){"use strict";var i=n("7a77");function r(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new i(e),t(n.reason))}))}r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var e,t=new r((function(t){e=t}));return{token:t,cancel:e}},e.exports=r},"8eb7":function(e,t){var n,i,r,o,s,a,c,l,u,d,h,p,f,g,m,_=!1;function v(){if(!_){_=!0;var e=navigator.userAgent,t=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),v=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(p=/\b(iPhone|iP[ao]d)/.exec(e),f=/\b(iP[ao]d)/.exec(e),d=/Android/i.exec(e),g=/FBAN\/\w+;/i.exec(e),m=/Mobile/i.exec(e),h=!!/Win64/.exec(e),t){n=t[1]?parseFloat(t[1]):t[5]?parseFloat(t[5]):NaN,n&&document&&document.documentMode&&(n=document.documentMode);var y=/(?:Trident\/(\d+.\d+))/.exec(e);a=y?parseFloat(y[1])+4:n,i=t[2]?parseFloat(t[2]):NaN,r=t[3]?parseFloat(t[3]):NaN,o=t[4]?parseFloat(t[4]):NaN,o?(t=/(?:Chrome\/(\d+\.\d+))/.exec(e),s=t&&t[1]?parseFloat(t[1]):NaN):s=NaN}else n=i=r=s=o=NaN;if(v){if(v[1]){var C=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);c=!C||parseFloat(C[1].replace("_","."))}else c=!1;l=!!v[2],u=!!v[3]}else c=l=u=!1}}var y={ie:function(){return v()||n},ieCompatibilityMode:function(){return v()||a>n},ie64:function(){return y.ie()&&h},firefox:function(){return v()||i},opera:function(){return v()||r},webkit:function(){return v()||o},safari:function(){return y.webkit()},chrome:function(){return v()||s},windows:function(){return v()||l},osx:function(){return v()||c},linux:function(){return v()||u},iphone:function(){return v()||p},mobile:function(){return v()||p||f||d||m},nativeApp:function(){return v()||g},android:function(){return v()||d},ipad:function(){return v()||f}};e.exports=y},"90e3":function(e,t,n){var i=n("e330"),r=0,o=Math.random(),s=i(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+s(++r+o,36)}},9112:function(e,t,n){var i=n("83ab"),r=n("9bf2"),o=n("5c6c");e.exports=i?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},9141:function(e,t,n){var i=n("ef08").document;e.exports=i&&i.documentElement},9263:function(e,t,n){"use strict";var i=n("c65b"),r=n("e330"),o=n("577e"),s=n("ad6d"),a=n("9f7f"),c=n("5692"),l=n("7c73"),u=n("69f3").get,d=n("fce3"),h=n("107c"),p=c("native-string-replace",String.prototype.replace),f=RegExp.prototype.exec,g=f,m=r("".charAt),_=r("".indexOf),v=r("".replace),y=r("".slice),C=function(){var e=/a/,t=/b*/g;return i(f,e,"a"),i(f,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),E=a.UNSUPPORTED_Y||a.BROKEN_CARET,b=void 0!==/()??/.exec("")[1],T=C||b||E||d||h;T&&(g=function(e){var t,n,r,a,c,d,h,T=this,S=u(T),R=o(e),I=S.raw;if(I)return I.lastIndex=T.lastIndex,t=i(g,I,R),T.lastIndex=I.lastIndex,t;var w=S.groups,O=E&&T.sticky,k=i(s,T),M=T.source,x=0,P=R;if(O&&(k=v(k,"y",""),-1===_(k,"g")&&(k+="g"),P=y(R,T.lastIndex),T.lastIndex>0&&(!T.multiline||T.multiline&&"\n"!==m(R,T.lastIndex-1))&&(M="(?: "+M+")",P=" "+P,x++),n=new RegExp("^(?:"+M+")",k)),b&&(n=new RegExp("^"+M+"$(?!\\s)",k)),C&&(r=T.lastIndex),a=i(f,O?n:T,P),O?a?(a.input=y(a.input,x),a[0]=y(a[0],x),a.index=T.lastIndex,T.lastIndex+=a[0].length):T.lastIndex=0:C&&a&&(T.lastIndex=T.global?a.index+a[0].length:r),b&&a&&a.length>1&&i(p,a[0],n,(function(){for(c=1;c<arguments.length-2;c++)void 0===arguments[c]&&(a[c]=void 0)})),a&&w)for(a.groups=d=l(null),c=0;c<w.length;c++)h=w[c],d[h[0]]=a[h[1]];return a}),e.exports=g},"92f0":function(e,t,n){var i=n("1a14").f,r=n("9c0e"),o=n("cc15")("toStringTag");e.exports=function(e,t,n){e&&!r(e=n?e:e.prototype,o)&&i(e,o,{configurable:!0,value:t})}},"92fa":function(e,t){var n=/^(attrs|props|on|nativeOn|class|style|hook)$/;function i(e,t){return function(){e&&e.apply(this,arguments),t&&t.apply(this,arguments)}}e.exports=function(e){return e.reduce((function(e,t){var r,o,s,a,c;for(s in t)if(r=e[s],o=t[s],r&&n.test(s))if("class"===s&&("string"===typeof r&&(c=r,e[s]=r={},r[c]=!0),"string"===typeof o&&(c=o,t[s]=o={},o[c]=!0)),"on"===s||"nativeOn"===s||"hook"===s)for(a in o)r[a]=i(r[a],o[a]);else if(Array.isArray(r))e[s]=r.concat(o);else if(Array.isArray(o))e[s]=[r].concat(o);else for(a in o)r[a]=o[a];else e[s]=t[s];return e}),{})}},"944a":function(e,t,n){var i=n("746f");i("toStringTag")},"94ca":function(e,t,n){var i=n("d039"),r=n("1626"),o=/#|\.prototype\./,s=function(e,t){var n=c[a(e)];return n==u||n!=l&&(r(t)?i(t):!!t)},a=s.normalize=function(e){return String(e).replace(o,".").toLowerCase()},c=s.data={},l=s.NATIVE="N",u=s.POLYFILL="P";e.exports=s},9619:function(e,t,n){var i=n("597f"),r=n("0e15");e.exports={throttle:i,debounce:r}},"96cf":function(e,t){!function(t){"use strict";var n,i=Object.prototype,r=i.hasOwnProperty,o="function"===typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag",l="object"===typeof e,u=t.regeneratorRuntime;if(u)l&&(e.exports=u);else{u=t.regeneratorRuntime=l?e.exports:{},u.wrap=C;var d="suspendedStart",h="suspendedYield",p="executing",f="completed",g={},m={};m[s]=function(){return this};var _=Object.getPrototypeOf,v=_&&_(_(P([])));v&&v!==i&&r.call(v,s)&&(m=v);var y=S.prototype=b.prototype=Object.create(m);T.prototype=y.constructor=S,S.constructor=T,S[c]=T.displayName="GeneratorFunction",u.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===T||"GeneratorFunction"===(t.displayName||t.name))},u.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,S):(e.__proto__=S,c in e||(e[c]="GeneratorFunction")),e.prototype=Object.create(y),e},u.awrap=function(e){return{__await:e}},R(I.prototype),I.prototype[a]=function(){return this},u.AsyncIterator=I,u.async=function(e,t,n,i){var r=new I(C(e,t,n,i));return u.isGeneratorFunction(t)?r:r.next().then((function(e){return e.done?e.value:r.next()}))},R(y),y[c]="Generator",y[s]=function(){return this},y.toString=function(){return"[object Generator]"},u.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){while(t.length){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},u.values=P,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(M),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(i,r){return a.type="throw",a.arg=e,t.next=i,r&&(t.method="next",t.arg=n),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),l=r.call(s,"finallyLoc");if(c&&l){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;M(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,i){return this.delegate={iterator:P(e),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=n),g}}}function C(e,t,n,i){var r=t&&t.prototype instanceof b?t:b,o=Object.create(r.prototype),s=new x(i||[]);return o._invoke=w(e,n,s),o}function E(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(i){return{type:"throw",arg:i}}}function b(){}function T(){}function S(){}function R(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function I(e){function t(n,i,o,s){var a=E(e[n],e,i);if("throw"!==a.type){var c=a.arg,l=c.value;return l&&"object"===typeof l&&r.call(l,"__await")?Promise.resolve(l.__await).then((function(e){t("next",e,o,s)}),(function(e){t("throw",e,o,s)})):Promise.resolve(l).then((function(e){c.value=e,o(c)}),s)}s(a.arg)}var n;function i(e,i){function r(){return new Promise((function(n,r){t(e,i,n,r)}))}return n=n?n.then(r,r):r()}this._invoke=i}function w(e,t,n){var i=d;return function(r,o){if(i===p)throw new Error("Generator is already running");if(i===f){if("throw"===r)throw o;return A()}n.method=r,n.arg=o;while(1){var s=n.delegate;if(s){var a=O(s,n);if(a){if(a===g)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===d)throw i=f,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=p;var c=E(e,t,n);if("normal"===c.type){if(i=n.done?f:h,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=f,n.method="throw",n.arg=c.arg)}}}function O(e,t){var i=e.iterator[t.method];if(i===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=n,O(e,t),"throw"===t.method))return g;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var r=E(i,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,g;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,g):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,g)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function P(e){if(e){var t=e[s];if(t)return t.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function t(){while(++i<e.length)if(r.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=n,t.done=!0,t};return o.next=o}}return{next:A}}function A(){return{value:n,done:!0}}}(function(){return this}()||Function("return this")())},9742:function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},9861:function(e,t,n){"use strict";n("e260");var i=n("23e7"),r=n("da84"),o=n("d066"),s=n("c65b"),a=n("e330"),c=n("0d3b"),l=n("6eeb"),u=n("e2cc"),d=n("d44e"),h=n("9ed3"),p=n("69f3"),f=n("19aa"),g=n("1626"),m=n("1a2d"),_=n("0366"),v=n("f5df"),y=n("825a"),C=n("861d"),E=n("577e"),b=n("7c73"),T=n("5c6c"),S=n("9a1f"),R=n("35a1"),I=n("b622"),w=n("addb"),O=I("iterator"),k="URLSearchParams",M=k+"Iterator",x=p.set,P=p.getterFor(k),A=p.getterFor(M),D=o("fetch"),N=o("Request"),L=o("Headers"),U=N&&N.prototype,B=L&&L.prototype,V=r.RegExp,j=r.TypeError,F=r.decodeURIComponent,$=r.encodeURIComponent,H=a("".charAt),K=a([].join),W=a([].push),q=a("".replace),G=a([].shift),z=a([].splice),Y=a("".split),J=a("".slice),X=/\+/g,Q=Array(4),Z=function(e){return Q[e-1]||(Q[e-1]=V("((?:%[\\da-f]{2}){"+e+"})","gi"))},ee=function(e){try{return F(e)}catch(t){return e}},te=function(e){var t=q(e,X," "),n=4;try{return F(t)}catch(i){while(n)t=q(t,Z(n--),ee);return t}},ne=/[!'()~]|%20/g,ie={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},re=function(e){return ie[e]},oe=function(e){return q($(e),ne,re)},se=function(e,t){if(t){var n,i,r=Y(t,"&"),o=0;while(o<r.length)n=r[o++],n.length&&(i=Y(n,"="),W(e,{key:te(G(i)),value:te(K(i,"="))}))}},ae=function(e){this.entries.length=0,se(this.entries,e)},ce=function(e,t){if(e<t)throw j("Not enough arguments")},le=h((function(e,t){x(this,{type:M,iterator:S(P(e).entries),kind:t})}),"Iterator",(function(){var e=A(this),t=e.kind,n=e.iterator.next(),i=n.value;return n.done||(n.value="keys"===t?i.key:"values"===t?i.value:[i.key,i.value]),n})),ue=function(){f(this,de);var e,t,n,i,r,o,a,c,l,u=arguments.length>0?arguments[0]:void 0,d=this,h=[];if(x(d,{type:k,entries:h,updateURL:function(){},updateSearchParams:ae}),void 0!==u)if(C(u))if(e=R(u),e){t=S(u,e),n=t.next;while(!(i=s(n,t)).done){if(r=S(y(i.value)),o=r.next,(a=s(o,r)).done||(c=s(o,r)).done||!s(o,r).done)throw j("Expected sequence with length 2");W(h,{key:E(a.value),value:E(c.value)})}}else for(l in u)m(u,l)&&W(h,{key:l,value:E(u[l])});else se(h,"string"==typeof u?"?"===H(u,0)?J(u,1):u:E(u))},de=ue.prototype;if(u(de,{append:function(e,t){ce(arguments.length,2);var n=P(this);W(n.entries,{key:E(e),value:E(t)}),n.updateURL()},delete:function(e){ce(arguments.length,1);var t=P(this),n=t.entries,i=E(e),r=0;while(r<n.length)n[r].key===i?z(n,r,1):r++;t.updateURL()},get:function(e){ce(arguments.length,1);for(var t=P(this).entries,n=E(e),i=0;i<t.length;i++)if(t[i].key===n)return t[i].value;return null},getAll:function(e){ce(arguments.length,1);for(var t=P(this).entries,n=E(e),i=[],r=0;r<t.length;r++)t[r].key===n&&W(i,t[r].value);return i},has:function(e){ce(arguments.length,1);var t=P(this).entries,n=E(e),i=0;while(i<t.length)if(t[i++].key===n)return!0;return!1},set:function(e,t){ce(arguments.length,1);for(var n,i=P(this),r=i.entries,o=!1,s=E(e),a=E(t),c=0;c<r.length;c++)n=r[c],n.key===s&&(o?z(r,c--,1):(o=!0,n.value=a));o||W(r,{key:s,value:a}),i.updateURL()},sort:function(){var e=P(this);w(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){var t,n=P(this).entries,i=_(e,arguments.length>1?arguments[1]:void 0),r=0;while(r<n.length)t=n[r++],i(t.value,t.key,this)},keys:function(){return new le(this,"keys")},values:function(){return new le(this,"values")},entries:function(){return new le(this,"entries")}},{enumerable:!0}),l(de,O,de.entries,{name:"entries"}),l(de,"toString",(function(){var e,t=P(this).entries,n=[],i=0;while(i<t.length)e=t[i++],W(n,oe(e.key)+"="+oe(e.value));return K(n,"&")}),{enumerable:!0}),d(ue,k),i({global:!0,forced:!c},{URLSearchParams:ue}),!c&&g(L)){var he=a(B.has),pe=a(B.set),fe=function(e){if(C(e)){var t,n=e.body;if(v(n)===k)return t=e.headers?new L(e.headers):new L,he(t,"content-type")||pe(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),b(e,{body:T(0,E(n)),headers:T(0,t)})}return e};if(g(D)&&i({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return D(e,arguments.length>1?fe(arguments[1]):{})}}),g(N)){var ge=function(e){return f(this,U),new N(e,arguments.length>1?fe(arguments[1]):{})};U.constructor=ge,ge.prototype=U,i({global:!0,forced:!0},{Request:ge})}}e.exports={URLSearchParams:ue,getState:P}},9876:function(e,t,n){var i=n("03d6"),r=n("9742");e.exports=Object.keys||function(e){return i(e,r)}},"99af":function(e,t,n){"use strict";var i=n("23e7"),r=n("da84"),o=n("d039"),s=n("e8b5"),a=n("861d"),c=n("7b0b"),l=n("07fa"),u=n("8418"),d=n("65f0"),h=n("1dde"),p=n("b622"),f=n("2d00"),g=p("isConcatSpreadable"),m=9007199254740991,_="Maximum allowed index exceeded",v=r.TypeError,y=f>=51||!o((function(){var e=[];return e[g]=!1,e.concat()[0]!==e})),C=h("concat"),E=function(e){if(!a(e))return!1;var t=e[g];return void 0!==t?!!t:s(e)},b=!y||!C;i({target:"Array",proto:!0,forced:b},{concat:function(e){var t,n,i,r,o,s=c(this),a=d(s,0),h=0;for(t=-1,i=arguments.length;t<i;t++)if(o=-1===t?s:arguments[t],E(o)){if(r=l(o),h+r>m)throw v(_);for(n=0;n<r;n++,h++)n in o&&u(a,h,o[n])}else{if(h>=m)throw v(_);u(a,h++,o)}return a.length=h,a}})},"9a1f":function(e,t,n){var i=n("da84"),r=n("c65b"),o=n("59ed"),s=n("825a"),a=n("0d51"),c=n("35a1"),l=i.TypeError;e.exports=function(e,t){var n=arguments.length<2?c(e):t;if(o(n))return s(r(n,e));throw l(a(e)+" is not iterable")}},"9bdd":function(e,t,n){var i=n("825a"),r=n("2a62");e.exports=function(e,t,n,o){try{return o?t(i(n)[0],n[1]):t(n)}catch(s){r(e,"throw",s)}}},"9bf2":function(e,t,n){var i=n("da84"),r=n("83ab"),o=n("0cfb"),s=n("825a"),a=n("a04b"),c=i.TypeError,l=Object.defineProperty;t.f=r?l:function(e,t,n){if(s(e),t=a(t),s(n),o)try{return l(e,t,n)}catch(i){}if("get"in n||"set"in n)throw c("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},"9c0c":function(e,t,n){var i=n("1609");e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}}},"9c0e":function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},"9d11":function(e,t,n){var i=n("fc5e"),r=Math.max,o=Math.min;e.exports=function(e,t){return e=i(e),e<0?r(e+t,0):o(e,t)}},"9d7e":function(e,t,n){"use strict";t.__esModule=!0;var i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function(e){function t(e){for(var t=arguments.length,n=Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return 1===n.length&&"object"===i(n[0])&&(n=n[0]),n&&n.hasOwnProperty||(n={}),e.replace(o,(function(t,i,o,s){var a=void 0;return"{"===e[s-1]&&"}"===e[s+t.length]?o:(a=(0,r.hasOwn)(n,o)?n[o]:null,null===a||void 0===a?"":a)}))}return t};var r=n("8122"),o=/(%|)\{([0-9a-zA-Z_]+)\}/g},"9ed3":function(e,t,n){"use strict";var i=n("ae93").IteratorPrototype,r=n("7c73"),o=n("5c6c"),s=n("d44e"),a=n("3f8c"),c=function(){return this};e.exports=function(e,t,n){var l=t+" Iterator";return e.prototype=r(i,{next:o(1,n)}),s(e,l,!1,!0),a[l]=c,e}},"9f7f":function(e,t,n){var i=n("d039"),r=n("da84"),o=r.RegExp;t.UNSUPPORTED_Y=i((function(){var e=o("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=i((function(){var e=o("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},"9fbb":function(e,t,n){var i=n("4d88");e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},a04b:function(e,t,n){var i=n("c04e"),r=n("d9b5");e.exports=function(e){var t=i(e,"string");return r(t)?t:t+""}},a15e:function(e,t,n){"use strict";n.r(t);var i=n("41b2"),r=n.n(i),o=n("1098"),s=n.n(o),a=/%[sdj%]/g,c=function(){};function l(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=1,r=t[0],o=t.length;if("function"===typeof r)return r.apply(null,t.slice(1));if("string"===typeof r){for(var s=String(r).replace(a,(function(e){if("%%"===e)return"%";if(i>=o)return e;switch(e){case"%s":return String(t[i++]);case"%d":return Number(t[i++]);case"%j":try{return JSON.stringify(t[i++])}catch(n){return"[Circular]"}break;default:return e}})),c=t[i];i<o;c=t[++i])s+=" "+c;return s}return r}function u(e){return"string"===e||"url"===e||"hex"===e||"email"===e||"pattern"===e}function d(e,t){return void 0===e||null===e||(!("array"!==t||!Array.isArray(e)||e.length)||!(!u(t)||"string"!==typeof e||e))}function h(e,t,n){var i=[],r=0,o=e.length;function s(e){i.push.apply(i,e),r++,r===o&&n(i)}e.forEach((function(e){t(e,s)}))}function p(e,t,n){var i=0,r=e.length;function o(s){if(s&&s.length)n(s);else{var a=i;i+=1,a<r?t(e[a],o):n([])}}o([])}function f(e){var t=[];return Object.keys(e).forEach((function(n){t.push.apply(t,e[n])})),t}function g(e,t,n,i){if(t.first){var r=f(e);return p(r,n,i)}var o=t.firstFields||[];!0===o&&(o=Object.keys(e));var s=Object.keys(e),a=s.length,c=0,l=[],u=function(e){l.push.apply(l,e),c++,c===a&&i(l)};s.forEach((function(t){var i=e[t];-1!==o.indexOf(t)?p(i,n,u):h(i,n,u)}))}function m(e){return function(t){return t&&t.message?(t.field=t.field||e.fullField,t):{message:t,field:t.field||e.fullField}}}function _(e,t){if(t)for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];"object"===("undefined"===typeof i?"undefined":s()(i))&&"object"===s()(e[n])?e[n]=r()({},e[n],i):e[n]=i}return e}function v(e,t,n,i,r,o){!e.required||n.hasOwnProperty(e.field)&&!d(t,o||e.type)||i.push(l(r.messages.required,e.fullField))}var y=v;function C(e,t,n,i,r){(/^\s+$/.test(t)||""===t)&&i.push(l(r.messages.whitespace,e.fullField))}var E=C,b={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},T={integer:function(e){return T.number(e)&&parseInt(e,10)===e},float:function(e){return T.number(e)&&!T.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch(t){return!1}},date:function(e){return"function"===typeof e.getTime&&"function"===typeof e.getMonth&&"function"===typeof e.getYear},number:function(e){return!isNaN(e)&&"number"===typeof e},object:function(e){return"object"===("undefined"===typeof e?"undefined":s()(e))&&!T.array(e)},method:function(e){return"function"===typeof e},email:function(e){return"string"===typeof e&&!!e.match(b.email)&&e.length<255},url:function(e){return"string"===typeof e&&!!e.match(b.url)},hex:function(e){return"string"===typeof e&&!!e.match(b.hex)}};function S(e,t,n,i,r){if(e.required&&void 0===t)y(e,t,n,i,r);else{var o=["integer","float","array","regexp","object","method","email","number","date","url","hex"],a=e.type;o.indexOf(a)>-1?T[a](t)||i.push(l(r.messages.types[a],e.fullField,e.type)):a&&("undefined"===typeof t?"undefined":s()(t))!==e.type&&i.push(l(r.messages.types[a],e.fullField,e.type))}}var R=S;function I(e,t,n,i,r){var o="number"===typeof e.len,s="number"===typeof e.min,a="number"===typeof e.max,c=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,u=t,d=null,h="number"===typeof t,p="string"===typeof t,f=Array.isArray(t);if(h?d="number":p?d="string":f&&(d="array"),!d)return!1;f&&(u=t.length),p&&(u=t.replace(c,"_").length),o?u!==e.len&&i.push(l(r.messages[d].len,e.fullField,e.len)):s&&!a&&u<e.min?i.push(l(r.messages[d].min,e.fullField,e.min)):a&&!s&&u>e.max?i.push(l(r.messages[d].max,e.fullField,e.max)):s&&a&&(u<e.min||u>e.max)&&i.push(l(r.messages[d].range,e.fullField,e.min,e.max))}var w=I,O="enum";function k(e,t,n,i,r){e[O]=Array.isArray(e[O])?e[O]:[],-1===e[O].indexOf(t)&&i.push(l(r.messages[O],e.fullField,e[O].join(", ")))}var M=k;function x(e,t,n,i,r){if(e.pattern)if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(t)||i.push(l(r.messages.pattern.mismatch,e.fullField,t,e.pattern));else if("string"===typeof e.pattern){var o=new RegExp(e.pattern);o.test(t)||i.push(l(r.messages.pattern.mismatch,e.fullField,t,e.pattern))}}var P=x,A={required:y,whitespace:E,type:R,range:w,enum:M,pattern:P};function D(e,t,n,i,r){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(d(t,"string")&&!e.required)return n();A.required(e,t,i,o,r,"string"),d(t,"string")||(A.type(e,t,i,o,r),A.range(e,t,i,o,r),A.pattern(e,t,i,o,r),!0===e.whitespace&&A.whitespace(e,t,i,o,r))}n(o)}var N=D;function L(e,t,n,i,r){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(d(t)&&!e.required)return n();A.required(e,t,i,o,r),void 0!==t&&A.type(e,t,i,o,r)}n(o)}var U=L;function B(e,t,n,i,r){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(d(t)&&!e.required)return n();A.required(e,t,i,o,r),void 0!==t&&(A.type(e,t,i,o,r),A.range(e,t,i,o,r))}n(o)}var V=B;function j(e,t,n,i,r){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(d(t)&&!e.required)return n();A.required(e,t,i,o,r),void 0!==t&&A.type(e,t,i,o,r)}n(o)}var F=j;function $(e,t,n,i,r){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(d(t)&&!e.required)return n();A.required(e,t,i,o,r),d(t)||A.type(e,t,i,o,r)}n(o)}var H=$;function K(e,t,n,i,r){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(d(t)&&!e.required)return n();A.required(e,t,i,o,r),void 0!==t&&(A.type(e,t,i,o,r),A.range(e,t,i,o,r))}n(o)}var W=K;function q(e,t,n,i,r){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(d(t)&&!e.required)return n();A.required(e,t,i,o,r),void 0!==t&&(A.type(e,t,i,o,r),A.range(e,t,i,o,r))}n(o)}var G=q;function z(e,t,n,i,r){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(d(t,"array")&&!e.required)return n();A.required(e,t,i,o,r,"array"),d(t,"array")||(A.type(e,t,i,o,r),A.range(e,t,i,o,r))}n(o)}var Y=z;function J(e,t,n,i,r){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(d(t)&&!e.required)return n();A.required(e,t,i,o,r),void 0!==t&&A.type(e,t,i,o,r)}n(o)}var X=J,Q="enum";function Z(e,t,n,i,r){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(d(t)&&!e.required)return n();A.required(e,t,i,o,r),t&&A[Q](e,t,i,o,r)}n(o)}var ee=Z;function te(e,t,n,i,r){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(d(t,"string")&&!e.required)return n();A.required(e,t,i,o,r),d(t,"string")||A.pattern(e,t,i,o,r)}n(o)}var ne=te;function ie(e,t,n,i,r){var o=[],s=e.required||!e.required&&i.hasOwnProperty(e.field);if(s){if(d(t)&&!e.required)return n();if(A.required(e,t,i,o,r),!d(t)){var a=void 0;a="number"===typeof t?new Date(t):t,A.type(e,a,i,o,r),a&&A.range(e,a.getTime(),i,o,r)}}n(o)}var re=ie;function oe(e,t,n,i,r){var o=[],a=Array.isArray(t)?"array":"undefined"===typeof t?"undefined":s()(t);A.required(e,t,i,o,r,a),n(o)}var se=oe;function ae(e,t,n,i,r){var o=e.type,s=[],a=e.required||!e.required&&i.hasOwnProperty(e.field);if(a){if(d(t,o)&&!e.required)return n();A.required(e,t,i,s,r,o),d(t,o)||A.type(e,t,i,s,r)}n(s)}var ce=ae,le={string:N,method:U,number:V,boolean:F,regexp:H,integer:W,float:G,array:Y,object:X,enum:ee,pattern:ne,date:re,url:ce,hex:ce,email:ce,required:se};function ue(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var de=ue();function he(e){this.rules=null,this._messages=de,this.define(e)}he.prototype={messages:function(e){return e&&(this._messages=_(ue(),e)),this._messages},define:function(e){if(!e)throw new Error("Cannot configure a schema with no rules");if("object"!==("undefined"===typeof e?"undefined":s()(e))||Array.isArray(e))throw new Error("Rules must be an object");this.rules={};var t=void 0,n=void 0;for(t in e)e.hasOwnProperty(t)&&(n=e[t],this.rules[t]=Array.isArray(n)?n:[n])},validate:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments[2],o=e,a=n,u=i;if("function"===typeof a&&(u=a,a={}),this.rules&&0!==Object.keys(this.rules).length){if(a.messages){var d=this.messages();d===de&&(d=ue()),_(d,a.messages),a.messages=d}else a.messages=this.messages();var h=void 0,p=void 0,f={},v=a.keys||Object.keys(this.rules);v.forEach((function(n){h=t.rules[n],p=o[n],h.forEach((function(i){var s=i;"function"===typeof s.transform&&(o===e&&(o=r()({},o)),p=o[n]=s.transform(p)),s="function"===typeof s?{validator:s}:r()({},s),s.validator=t.getValidationMethod(s),s.field=n,s.fullField=s.fullField||n,s.type=t.getType(s),s.validator&&(f[n]=f[n]||[],f[n].push({rule:s,value:p,source:o,field:n}))}))}));var y={};g(f,a,(function(e,t){var n=e.rule,i=("object"===n.type||"array"===n.type)&&("object"===s()(n.fields)||"object"===s()(n.defaultField));function o(e,t){return r()({},t,{fullField:n.fullField+"."+e})}function u(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],u=s;if(Array.isArray(u)||(u=[u]),u.length&&c("async-validator:",u),u.length&&n.message&&(u=[].concat(n.message)),u=u.map(m(n)),a.first&&u.length)return y[n.field]=1,t(u);if(i){if(n.required&&!e.value)return u=n.message?[].concat(n.message).map(m(n)):a.error?[a.error(n,l(a.messages.required,n.field))]:[],t(u);var d={};if(n.defaultField)for(var h in e.value)e.value.hasOwnProperty(h)&&(d[h]=n.defaultField);for(var p in d=r()({},d,e.rule.fields),d)if(d.hasOwnProperty(p)){var f=Array.isArray(d[p])?d[p]:[d[p]];d[p]=f.map(o.bind(null,p))}var g=new he(d);g.messages(a.messages),e.rule.options&&(e.rule.options.messages=a.messages,e.rule.options.error=a.error),g.validate(e.value,e.rule.options||a,(function(e){t(e&&e.length?u.concat(e):e)}))}else t(u)}i=i&&(n.required||!n.required&&e.value),n.field=e.field;var d=n.validator(n,e.value,u,e.source,a);d&&d.then&&d.then((function(){return u()}),(function(e){return u(e)}))}),(function(e){C(e)}))}else u&&u();function C(e){var t=void 0,n=void 0,i=[],r={};function o(e){Array.isArray(e)?i=i.concat.apply(i,e):i.push(e)}for(t=0;t<e.length;t++)o(e[t]);if(i.length)for(t=0;t<i.length;t++)n=i[t].field,r[n]=r[n]||[],r[n].push(i[t]);else i=null,r=null;u(i,r)}},getType:function(e){if(void 0===e.type&&e.pattern instanceof RegExp&&(e.type="pattern"),"function"!==typeof e.validator&&e.type&&!le.hasOwnProperty(e.type))throw new Error(l("Unknown rule type %s",e.type));return e.type||"string"},getValidationMethod:function(e){if("function"===typeof e.validator)return e.validator;var t=Object.keys(e),n=t.indexOf("message");return-1!==n&&t.splice(n,1),1===t.length&&"required"===t[0]?le.required:le[this.getType(e)]||!1}},he.register=function(e,t){if("function"!==typeof t)throw new Error("Cannot register a validator by type, validator is not a function");le[e]=t},he.messages=de;t["default"]=he},a3de:function(e,t,n){"use strict";var i=!("undefined"===typeof window||!window.document||!window.document.createElement),r={canUseDOM:i,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:i&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:i&&!!window.screen,isInWorker:!i};e.exports=r},a434:function(e,t,n){"use strict";var i=n("23e7"),r=n("da84"),o=n("23cb"),s=n("5926"),a=n("07fa"),c=n("7b0b"),l=n("65f0"),u=n("8418"),d=n("1dde"),h=d("splice"),p=r.TypeError,f=Math.max,g=Math.min,m=9007199254740991,_="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!h},{splice:function(e,t){var n,i,r,d,h,v,y=c(this),C=a(y),E=o(e,C),b=arguments.length;if(0===b?n=i=0:1===b?(n=0,i=C-E):(n=b-2,i=g(f(s(t),0),C-E)),C+n-i>m)throw p(_);for(r=l(y,i),d=0;d<i;d++)h=E+d,h in y&&u(r,d,y[h]);if(r.length=i,n<i){for(d=E;d<C-i;d++)h=d+i,v=d+n,h in y?y[v]=y[h]:delete y[v];for(d=C;d>C-i+n;d--)delete y[d-1]}else if(n>i)for(d=C-i;d>E;d--)h=d+i-1,v=d+n-1,h in y?y[v]=y[h]:delete y[v];for(d=0;d<n;d++)y[d+E]=arguments[d+2];return y.length=C-i+n,r}})},a4b4:function(e,t,n){var i=n("342f");e.exports=/web0s(?!.*chrome)/i.test(i)},a4d3:function(e,t,n){"use strict";var i=n("23e7"),r=n("da84"),o=n("d066"),s=n("2ba4"),a=n("c65b"),c=n("e330"),l=n("c430"),u=n("83ab"),d=n("4930"),h=n("d039"),p=n("1a2d"),f=n("e8b5"),g=n("1626"),m=n("861d"),_=n("3a9b"),v=n("d9b5"),y=n("825a"),C=n("7b0b"),E=n("fc6a"),b=n("a04b"),T=n("577e"),S=n("5c6c"),R=n("7c73"),I=n("df75"),w=n("241c"),O=n("057f"),k=n("7418"),M=n("06cf"),x=n("9bf2"),P=n("d1e7"),A=n("f36a"),D=n("6eeb"),N=n("5692"),L=n("f772"),U=n("d012"),B=n("90e3"),V=n("b622"),j=n("e538"),F=n("746f"),$=n("d44e"),H=n("69f3"),K=n("b727").forEach,W=L("hidden"),q="Symbol",G="prototype",z=V("toPrimitive"),Y=H.set,J=H.getterFor(q),X=Object[G],Q=r.Symbol,Z=Q&&Q[G],ee=r.TypeError,te=r.QObject,ne=o("JSON","stringify"),ie=M.f,re=x.f,oe=O.f,se=P.f,ae=c([].push),ce=N("symbols"),le=N("op-symbols"),ue=N("string-to-symbol-registry"),de=N("symbol-to-string-registry"),he=N("wks"),pe=!te||!te[G]||!te[G].findChild,fe=u&&h((function(){return 7!=R(re({},"a",{get:function(){return re(this,"a",{value:7}).a}})).a}))?function(e,t,n){var i=ie(X,t);i&&delete X[t],re(e,t,n),i&&e!==X&&re(X,t,i)}:re,ge=function(e,t){var n=ce[e]=R(Z);return Y(n,{type:q,tag:e,description:t}),u||(n.description=t),n},me=function(e,t,n){e===X&&me(le,t,n),y(e);var i=b(t);return y(n),p(ce,i)?(n.enumerable?(p(e,W)&&e[W][i]&&(e[W][i]=!1),n=R(n,{enumerable:S(0,!1)})):(p(e,W)||re(e,W,S(1,{})),e[W][i]=!0),fe(e,i,n)):re(e,i,n)},_e=function(e,t){y(e);var n=E(t),i=I(n).concat(be(n));return K(i,(function(t){u&&!a(ye,n,t)||me(e,t,n[t])})),e},ve=function(e,t){return void 0===t?R(e):_e(R(e),t)},ye=function(e){var t=b(e),n=a(se,this,t);return!(this===X&&p(ce,t)&&!p(le,t))&&(!(n||!p(this,t)||!p(ce,t)||p(this,W)&&this[W][t])||n)},Ce=function(e,t){var n=E(e),i=b(t);if(n!==X||!p(ce,i)||p(le,i)){var r=ie(n,i);return!r||!p(ce,i)||p(n,W)&&n[W][i]||(r.enumerable=!0),r}},Ee=function(e){var t=oe(E(e)),n=[];return K(t,(function(e){p(ce,e)||p(U,e)||ae(n,e)})),n},be=function(e){var t=e===X,n=oe(t?le:E(e)),i=[];return K(n,(function(e){!p(ce,e)||t&&!p(X,e)||ae(i,ce[e])})),i};if(d||(Q=function(){if(_(Z,this))throw ee("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?T(arguments[0]):void 0,t=B(e),n=function(e){this===X&&a(n,le,e),p(this,W)&&p(this[W],t)&&(this[W][t]=!1),fe(this,t,S(1,e))};return u&&pe&&fe(X,t,{configurable:!0,set:n}),ge(t,e)},Z=Q[G],D(Z,"toString",(function(){return J(this).tag})),D(Q,"withoutSetter",(function(e){return ge(B(e),e)})),P.f=ye,x.f=me,M.f=Ce,w.f=O.f=Ee,k.f=be,j.f=function(e){return ge(V(e),e)},u&&(re(Z,"description",{configurable:!0,get:function(){return J(this).description}}),l||D(X,"propertyIsEnumerable",ye,{unsafe:!0}))),i({global:!0,wrap:!0,forced:!d,sham:!d},{Symbol:Q}),K(I(he),(function(e){F(e)})),i({target:q,stat:!0,forced:!d},{for:function(e){var t=T(e);if(p(ue,t))return ue[t];var n=Q(t);return ue[t]=n,de[n]=t,n},keyFor:function(e){if(!v(e))throw ee(e+" is not a symbol");if(p(de,e))return de[e]},useSetter:function(){pe=!0},useSimple:function(){pe=!1}}),i({target:"Object",stat:!0,forced:!d,sham:!u},{create:ve,defineProperty:me,defineProperties:_e,getOwnPropertyDescriptor:Ce}),i({target:"Object",stat:!0,forced:!d},{getOwnPropertyNames:Ee,getOwnPropertySymbols:be}),i({target:"Object",stat:!0,forced:h((function(){k.f(1)}))},{getOwnPropertySymbols:function(e){return k.f(C(e))}}),ne){var Te=!d||h((function(){var e=Q();return"[null]"!=ne([e])||"{}"!=ne({a:e})||"{}"!=ne(Object(e))}));i({target:"JSON",stat:!0,forced:Te},{stringify:function(e,t,n){var i=A(arguments),r=t;if((m(t)||void 0!==e)&&!v(e))return f(t)||(t=function(e,t){if(g(r)&&(t=a(r,this,e,t)),!v(t))return t}),i[1]=t,s(ne,null,i)}})}if(!Z[z]){var Se=Z.valueOf;D(Z,z,(function(e){return a(Se,this)}))}$(Q,q),U[W]=!0},a630:function(e,t,n){var i=n("23e7"),r=n("4df4"),o=n("1c7e"),s=!o((function(e){Array.from(e)}));i({target:"Array",stat:!0,forced:s},{from:r})},a640:function(e,t,n){"use strict";var i=n("d039");e.exports=function(e,t){var n=[][e];return!!n&&i((function(){n.call(null,t||function(){throw 1},1)}))}},a742:function(e,t,n){"use strict";t.__esModule=!0,t.isDefined=t.isUndefined=t.isFunction=void 0;var i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.isString=a,t.isObject=c,t.isHtmlElement=l;var r=n("2b0e"),o=s(r);function s(e){return e&&e.__esModule?e:{default:e}}function a(e){return"[object String]"===Object.prototype.toString.call(e)}function c(e){return"[object Object]"===Object.prototype.toString.call(e)}function l(e){return e&&e.nodeType===Node.ELEMENT_NODE}var u=function(e){var t={};return e&&"[object Function]"===t.toString.call(e)};"object"===("undefined"===typeof Int8Array?"undefined":i(Int8Array))||!o.default.prototype.$isServer&&"function"===typeof document.childNodes||(t.isFunction=u=function(e){return"function"===typeof e||!1}),t.isFunction=u;t.isUndefined=function(e){return void 0===e},t.isDefined=function(e){return void 0!==e&&null!==e}},a79d:function(e,t,n){"use strict";var i=n("23e7"),r=n("c430"),o=n("fea9"),s=n("d039"),a=n("d066"),c=n("1626"),l=n("4840"),u=n("cdf9"),d=n("6eeb"),h=!!o&&s((function(){o.prototype["finally"].call({then:function(){}},(function(){}))}));if(i({target:"Promise",proto:!0,real:!0,forced:h},{finally:function(e){var t=l(this,a("Promise")),n=c(e);return this.then(n?function(n){return u(t,e()).then((function(){return n}))}:e,n?function(n){return u(t,e()).then((function(){throw n}))}:e)}}),!r&&c(o)){var p=a("Promise").prototype["finally"];o.prototype["finally"]!==p&&d(o.prototype,"finally",p,{unsafe:!0})}},a9e3:function(e,t,n){"use strict";var i=n("83ab"),r=n("da84"),o=n("e330"),s=n("94ca"),a=n("6eeb"),c=n("1a2d"),l=n("7156"),u=n("3a9b"),d=n("d9b5"),h=n("c04e"),p=n("d039"),f=n("241c").f,g=n("06cf").f,m=n("9bf2").f,_=n("408a"),v=n("58a8").trim,y="Number",C=r[y],E=C.prototype,b=r.TypeError,T=o("".slice),S=o("".charCodeAt),R=function(e){var t=h(e,"number");return"bigint"==typeof t?t:I(t)},I=function(e){var t,n,i,r,o,s,a,c,l=h(e,"number");if(d(l))throw b("Cannot convert a Symbol value to a number");if("string"==typeof l&&l.length>2)if(l=v(l),t=S(l,0),43===t||45===t){if(n=S(l,2),88===n||120===n)return NaN}else if(48===t){switch(S(l,1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+l}for(o=T(l,2),s=o.length,a=0;a<s;a++)if(c=S(o,a),c<48||c>r)return NaN;return parseInt(o,i)}return+l};if(s(y,!C(" 0o1")||!C("0b1")||C("+0x1"))){for(var w,O=function(e){var t=arguments.length<1?0:C(R(e)),n=this;return u(E,n)&&p((function(){_(n)}))?l(Object(t),n,O):t},k=i?f(C):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),M=0;k.length>M;M++)c(C,w=k[M])&&!c(O,w)&&m(O,w,g(C,w));O.prototype=E,E.constructor=O,a(r,y,O)}},a9ee:function(e,t,n){"use strict";(function(n,i){var r,o;
/**
 * {@link https://github.com/muaz-khan/RecordRTC|RecordRTC} is a WebRTC JavaScript library for audio/video as well as screen activity recording. It supports Chrome, Firefox, Opera, Android, and Microsoft Edge. Platforms: Linux, Mac and Windows. 
 * @summary Record audio, video or screen inside the browser.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef RecordRTC
 * @class
 * @example
 * var recorder = RecordRTC(mediaStream or [arrayOfMediaStream], {
 *     type: 'video', // audio or video or gif or canvas
 *     recorderType: MediaStreamRecorder || CanvasRecorder || StereoAudioRecorder || Etc
 * });
 * recorder.startRecording();
 * @see For further information:
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - Single media-stream object, array of media-streams, html-canvas-element, etc.
 * @param {object} config - {type:"video", recorderType: MediaStreamRecorder, disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, desiredSampRate: 16000, video: HTMLVideoElement, etc.}
 */
function s(e,t){if(!e)throw"First parameter is required.";t=t||{type:"video"},t=new a(e,t);var n=this;function i(i){return t.disableLogs||console.log("RecordRTC version: ",n.version),i&&(t=new a(e,i)),t.disableLogs||console.log("started recording "+t.type+" stream."),m?(m.clearRecordedData(),m.record(),f("recording"),n.recordingDuration&&p(),n):(r((function(){n.recordingDuration&&p()})),n)}function r(n){n&&(t.initCallback=function(){n(),n=t.initCallback=null});var i=new c(e,t);m=new i(e,t),m.record(),f("recording"),t.disableLogs||console.log("Initialized recorderType:",m.constructor.name,"for output-type:",t.type)}function o(e){if(e=e||function(){},m){if("paused"===n.state)return n.resumeRecording(),void setTimeout((function(){o(e)}),1);"recording"===n.state||t.disableLogs||console.warn('Recording state should be: "recording", however current state is: ',n.state),t.disableLogs||console.log("Stopped recording "+t.type+" stream."),"gif"!==t.type?m.stop(i):(m.stop(),i()),f("stopped")}else v();function i(i){if(m){Object.keys(m).forEach((function(e){"function"!==typeof m[e]&&(n[e]=m[e])}));var r=m.blob;if(!r){if(!i)throw"Recording failed.";m.blob=r=i}if(r&&!t.disableLogs&&console.log(r.type,"->",b(r.size)),e){var o;try{o=g.createObjectURL(r)}catch(s){}"function"===typeof e.call?e.call(n,o):e(o)}t.autoWriteToDisk&&h((function(e){var n={};n[t.type+"Blob"]=e,N.Store(n)}))}else"function"===typeof e.call?e.call(n,""):e("")}}function l(){m?"recording"===n.state?(f("paused"),m.pause(),t.disableLogs||console.log("Paused recording.")):t.disableLogs||console.warn("Unable to pause the recording. Recording state: ",n.state):v()}function u(){m?"paused"===n.state?(f("recording"),m.resume(),t.disableLogs||console.log("Resumed recording.")):t.disableLogs||console.warn("Unable to resume the recording. Recording state: ",n.state):v()}function d(e){postMessage((new FileReaderSync).readAsDataURL(e))}function h(e,n){if(!e)throw"Pass a callback function over getDataURL.";var i=n?n.blob:(m||{}).blob;if(!i)return t.disableLogs||console.warn("Blob encoder did not finish its job yet."),void setTimeout((function(){h(e,n)}),1e3);if("undefined"===typeof Worker||navigator.mozGetUserMedia){var r=new FileReader;r.readAsDataURL(i),r.onload=function(t){e(t.target.result)}}else{var o=s(d);o.onmessage=function(t){e(t.data)},o.postMessage(i)}function s(e){try{var t=g.createObjectURL(new Blob([e.toString(),"this.onmessage =  function (eee) {"+e.name+"(eee.data);}"],{type:"application/javascript"})),n=new Worker(t);return g.revokeObjectURL(t),n}catch(i){}}}function p(e){e=e||0,"paused"!==n.state?"stopped"!==n.state&&(e>=n.recordingDuration?o(n.onRecordingStopped):(e+=1e3,setTimeout((function(){p(e)}),1e3))):setTimeout((function(){p(e)}),1e3)}function f(e){n&&(n.state=e,"function"===typeof n.onStateChanged.call?n.onStateChanged.call(n,e):n.onStateChanged(e))}var m,_='It seems that recorder is destroyed or "startRecording" is not invoked for '+t.type+" recorder.";function v(){!0!==t.disableLogs&&console.warn(_)}var y={startRecording:i,stopRecording:o,pauseRecording:l,resumeRecording:u,initRecorder:r,setRecordingDuration:function(e,t){if("undefined"===typeof e)throw"recordingDuration is required.";if("number"!==typeof e)throw"recordingDuration must be a number.";return n.recordingDuration=e,n.onRecordingStopped=t||function(){},{onRecordingStopped:function(e){n.onRecordingStopped=e}}},clearRecordedData:function(){m?(m.clearRecordedData(),t.disableLogs||console.log("Cleared old recorded data.")):v()},getBlob:function(){if(m)return m.blob;v()},getDataURL:h,toURL:function(){if(m)return g.createObjectURL(m.blob);v()},getInternalRecorder:function(){return m},save:function(e){m?T(m.blob,e):v()},getFromDisk:function(e){m?s.getFromDisk(t.type,e):v()},setAdvertisementArray:function(e){t.advertisement=[];for(var n=e.length,i=0;i<n;i++)t.advertisement.push({duration:i,image:e[i]})},blob:null,bufferSize:0,sampleRate:0,buffer:null,reset:function(){"recording"!==n.state||t.disableLogs||console.warn("Stop an active recorder."),m&&"function"===typeof m.clearRecordedData&&m.clearRecordedData(),m=null,f("inactive"),n.blob=null},onStateChanged:function(e){t.disableLogs||console.log("Recorder state changed:",e)},state:"inactive",getState:function(){return n.state},destroy:function(){var e=t.disableLogs;t={disableLogs:!0},n.reset(),f("destroyed"),y=n=null,O.AudioContextConstructor&&(O.AudioContextConstructor.close(),O.AudioContextConstructor=null),t.disableLogs=e,t.disableLogs||console.log("RecordRTC is destroyed.")},version:"5.6.2"};if(!this)return n=y,y;for(var C in y)this[C]=y[C];return n=this,y}
/**
 * {@link RecordRTCConfiguration} is an inner/private helper for {@link RecordRTC}.
 * @summary It configures the 2nd parameter passed over {@link RecordRTC} and returns a valid "config" object.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef RecordRTCConfiguration
 * @class
 * @example
 * var options = RecordRTCConfiguration(mediaStream, options);
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {type:"video", disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, getNativeBlob:true, etc.}
 */
function a(e,t){return t.recorderType||t.type||(t.audio&&t.video?t.type="video":t.audio&&!t.video&&(t.type="audio")),t.recorderType&&!t.type&&(t.recorderType===A||t.recorderType===P||"undefined"!==typeof j&&t.recorderType===j?t.type="video":t.recorderType===L?t.type="gif":t.recorderType===x?t.type="audio":t.recorderType===M&&(R(e,"audio").length&&R(e,"video").length||!R(e,"audio").length&&R(e,"video").length?t.type="video":R(e,"audio").length&&!R(e,"video").length&&(t.type="audio"))),"undefined"!==typeof M&&"undefined"!==typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&(t.mimeType||(t.mimeType="video/webm"),t.type||(t.type=t.mimeType.split("/")[0]),t.bitsPerSecond),t.type||(t.mimeType&&(t.type=t.mimeType.split("/")[0]),t.type||(t.type="audio")),t}
/**
 * {@link GetRecorderType} is an inner/private helper for {@link RecordRTC}.
 * @summary It returns best recorder-type available for your browser.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef GetRecorderType
 * @class
 * @example
 * var RecorderType = GetRecorderType(options);
 * var recorder = new RecorderType(options);
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {type:"video", disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, etc.}
 */function c(e,t){var n;return(y||m||_)&&(n=x),"undefined"!==typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&!y&&(n=M),"video"===t.type&&(y||_)&&(n=A,"undefined"!==typeof j&&"undefined"!==typeof ReadableStream&&(n=j)),"gif"===t.type&&(n=L),"canvas"===t.type&&(n=P),k()&&n!==P&&n!==L&&"undefined"!==typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&(R(e,"video").length||R(e,"audio").length)&&("audio"===t.type?"function"===typeof MediaRecorder.isTypeSupported&&MediaRecorder.isTypeSupported("audio/webm")&&(n=M):"function"===typeof MediaRecorder.isTypeSupported&&MediaRecorder.isTypeSupported("video/webm")&&(n=M)),e instanceof Array&&e.length&&(n=B),t.recorderType&&(n=t.recorderType),!t.disableLogs&&n&&n.name&&console.log("Using recorderType:",n.name||n.constructor.name),!n&&C&&(n=M),n}
/**
 * MRecordRTC runs on top of {@link RecordRTC} to bring multiple recordings in a single place, by providing simple API.
 * @summary MRecordRTC stands for "Multiple-RecordRTC".
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef MRecordRTC
 * @class
 * @example
 * var recorder = new MRecordRTC();
 * recorder.addStream(MediaStream);
 * recorder.mediaType = {
 *     audio: true, // or StereoAudioRecorder or MediaStreamRecorder
 *     video: true, // or WhammyRecorder or MediaStreamRecorder or WebAssemblyRecorder or CanvasRecorder
 *     gif: true    // or GifRecorder
 * };
 * // mimeType is optional and should be set only in advance cases.
 * recorder.mimeType = {
 *     audio: 'audio/wav',
 *     video: 'video/webm',
 *     gif:   'image/gif'
 * };
 * recorder.startRecording();
 * @see For further information:
 * @see {@link https://github.com/muaz-khan/RecordRTC/tree/master/MRecordRTC|MRecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @requires {@link RecordRTC}
 */function l(e){this.addStream=function(t){t&&(e=t)},this.mediaType={audio:!0,video:!0},this.startRecording=function(){var t,n=this.mediaType,i=this.mimeType||{audio:null,video:null,gif:null};if("function"!==typeof n.audio&&k()&&!R(e,"audio").length&&(n.audio=!1),"function"!==typeof n.video&&k()&&!R(e,"video").length&&(n.video=!1),"function"!==typeof n.gif&&k()&&!R(e,"video").length&&(n.gif=!1),!n.audio&&!n.video&&!n.gif)throw"MediaStream must have either audio or video tracks.";if(n.audio&&(t=null,"function"===typeof n.audio&&(t=n.audio),this.audioRecorder=new s(e,{type:"audio",bufferSize:this.bufferSize,sampleRate:this.sampleRate,numberOfAudioChannels:this.numberOfAudioChannels||2,disableLogs:this.disableLogs,recorderType:t,mimeType:i.audio,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp}),n.video||this.audioRecorder.startRecording()),n.video){t=null,"function"===typeof n.video&&(t=n.video);var r=e;if(k()&&n.audio&&"function"===typeof n.audio){var o=R(e,"video")[0];v?(r=new E,r.addTrack(o),t&&t===A&&(t=M)):(r=new E,r.addTrack(o))}this.videoRecorder=new s(r,{type:"video",video:this.video,canvas:this.canvas,frameInterval:this.frameInterval||10,disableLogs:this.disableLogs,recorderType:t,mimeType:i.video,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp,workerPath:this.workerPath,webAssemblyPath:this.webAssemblyPath,frameRate:this.frameRate,bitrate:this.bitrate}),n.audio||this.videoRecorder.startRecording()}if(n.audio&&n.video){var a=this,c=!0===k();(n.audio instanceof x&&n.video||!0!==n.audio&&!0!==n.video&&n.audio!==n.video)&&(c=!1),!0===c?(a.audioRecorder=null,a.videoRecorder.startRecording()):a.videoRecorder.initRecorder((function(){a.audioRecorder.initRecorder((function(){a.videoRecorder.startRecording(),a.audioRecorder.startRecording()}))}))}n.gif&&(t=null,"function"===typeof n.gif&&(t=n.gif),this.gifRecorder=new s(e,{type:"gif",frameRate:this.frameRate||200,quality:this.quality||10,disableLogs:this.disableLogs,recorderType:t,mimeType:i.gif}),this.gifRecorder.startRecording())},this.stopRecording=function(e){e=e||function(){},this.audioRecorder&&this.audioRecorder.stopRecording((function(t){e(t,"audio")})),this.videoRecorder&&this.videoRecorder.stopRecording((function(t){e(t,"video")})),this.gifRecorder&&this.gifRecorder.stopRecording((function(t){e(t,"gif")}))},this.pauseRecording=function(){this.audioRecorder&&this.audioRecorder.pauseRecording(),this.videoRecorder&&this.videoRecorder.pauseRecording(),this.gifRecorder&&this.gifRecorder.pauseRecording()},this.resumeRecording=function(){this.audioRecorder&&this.audioRecorder.resumeRecording(),this.videoRecorder&&this.videoRecorder.resumeRecording(),this.gifRecorder&&this.gifRecorder.resumeRecording()},this.getBlob=function(e){var t={};return this.audioRecorder&&(t.audio=this.audioRecorder.getBlob()),this.videoRecorder&&(t.video=this.videoRecorder.getBlob()),this.gifRecorder&&(t.gif=this.gifRecorder.getBlob()),e&&e(t),t},this.destroy=function(){this.audioRecorder&&(this.audioRecorder.destroy(),this.audioRecorder=null),this.videoRecorder&&(this.videoRecorder.destroy(),this.videoRecorder=null),this.gifRecorder&&(this.gifRecorder.destroy(),this.gifRecorder=null)},this.getDataURL=function(e){function t(e,t){if("undefined"!==typeof Worker){var i=n((function(e){postMessage((new FileReaderSync).readAsDataURL(e))}));i.onmessage=function(e){t(e.data)},i.postMessage(e)}else{var r=new FileReader;r.readAsDataURL(e),r.onload=function(e){t(e.target.result)}}}function n(e){var t,n=g.createObjectURL(new Blob([e.toString(),"this.onmessage =  function (eee) {"+e.name+"(eee.data);}"],{type:"application/javascript"})),i=new Worker(n);if("undefined"!==typeof g)t=g;else{if("undefined"===typeof webkitURL)throw"Neither URL nor webkitURL detected.";t=webkitURL}return t.revokeObjectURL(n),i}this.getBlob((function(n){n.audio&&n.video?t(n.audio,(function(i){t(n.video,(function(t){e({audio:i,video:t})}))})):n.audio?t(n.audio,(function(t){e({audio:t})})):n.video&&t(n.video,(function(t){e({video:t})}))}))},this.writeToDisk=function(){s.writeToDisk({audio:this.audioRecorder,video:this.videoRecorder,gif:this.gifRecorder})},this.save=function(e){e=e||{audio:!0,video:!0,gif:!0},e.audio&&this.audioRecorder&&this.audioRecorder.save("string"===typeof e.audio?e.audio:""),e.video&&this.videoRecorder&&this.videoRecorder.save("string"===typeof e.video?e.video:""),e.gif&&this.gifRecorder&&this.gifRecorder.save("string"===typeof e.gif?e.gif:"")}}s.version="5.6.2",e.exports=s,r=[],o=function(){return s}.apply(t,r),void 0===o||(e.exports=o),s.getFromDisk=function(e,t){if(!t)throw"callback is mandatory.";console.log("Getting recorded "+("all"===e?"blobs":e+" blob ")+" from disk!"),N.Fetch((function(n,i){"all"!==e&&i===e+"Blob"&&t&&t(n),"all"===e&&t&&t(n,i.replace("Blob",""))}))},s.writeToDisk=function(e){console.log("Writing recorded blob(s) to disk!"),e=e||{},e.audio&&e.video&&e.gif?e.audio.getDataURL((function(t){e.video.getDataURL((function(n){e.gif.getDataURL((function(e){N.Store({audioBlob:t,videoBlob:n,gifBlob:e})}))}))})):e.audio&&e.video?e.audio.getDataURL((function(t){e.video.getDataURL((function(e){N.Store({audioBlob:t,videoBlob:e})}))})):e.audio&&e.gif?e.audio.getDataURL((function(t){e.gif.getDataURL((function(e){N.Store({audioBlob:t,gifBlob:e})}))})):e.video&&e.gif?e.video.getDataURL((function(t){e.gif.getDataURL((function(e){N.Store({videoBlob:t,gifBlob:e})}))})):e.audio?e.audio.getDataURL((function(e){N.Store({audioBlob:e})})):e.video?e.video.getDataURL((function(e){N.Store({videoBlob:e})})):e.gif&&e.gif.getDataURL((function(e){N.Store({gifBlob:e})}))},l.getFromDisk=s.getFromDisk,l.writeToDisk=s.writeToDisk,"undefined"!==typeof s&&(s.MRecordRTC=l);var u="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45";(function(e){e&&"undefined"===typeof window&&"undefined"!==typeof n&&(n.navigator={userAgent:u,getUserMedia:function(){}},n.console||(n.console={}),"undefined"!==typeof n.console.log&&"undefined"!==typeof n.console.error||(n.console.error=n.console.log=n.console.log||function(){console.log(arguments)}),"undefined"===typeof document&&(e.document={documentElement:{appendChild:function(){return""}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var e={getContext:function(){return e},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""},style:{}};return e},e.HTMLVideoElement=function(){}),"undefined"===typeof location&&(e.location={protocol:"file:",href:"",hash:""}),"undefined"===typeof screen&&(e.screen={width:0,height:0}),"undefined"===typeof g&&(e.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),e.window=n)})("undefined"!==typeof n?n:null);var d=window.requestAnimationFrame;if("undefined"===typeof d)if("undefined"!==typeof webkitRequestAnimationFrame)d=webkitRequestAnimationFrame;else if("undefined"!==typeof mozRequestAnimationFrame)d=mozRequestAnimationFrame;else if("undefined"!==typeof msRequestAnimationFrame)d=msRequestAnimationFrame;else if("undefined"===typeof d){var h=0;d=function(e,t){var n=(new Date).getTime(),i=Math.max(0,16-(n-h)),r=setTimeout((function(){e(n+i)}),i);return h=n+i,r}}var p=window.cancelAnimationFrame;"undefined"===typeof p&&("undefined"!==typeof webkitCancelAnimationFrame?p=webkitCancelAnimationFrame:"undefined"!==typeof mozCancelAnimationFrame?p=mozCancelAnimationFrame:"undefined"!==typeof msCancelAnimationFrame?p=msCancelAnimationFrame:"undefined"===typeof p&&(p=function(e){clearTimeout(e)}));var f=window.AudioContext;"undefined"===typeof f&&("undefined"!==typeof webkitAudioContext&&(f=webkitAudioContext),"undefined"!==typeof mozAudioContext&&(f=mozAudioContext));var g=window.URL;"undefined"===typeof g&&"undefined"!==typeof webkitURL&&(g=webkitURL),"undefined"!==typeof navigator&&"undefined"===typeof navigator.getUserMedia&&("undefined"!==typeof navigator.webkitGetUserMedia&&(navigator.getUserMedia=navigator.webkitGetUserMedia),"undefined"!==typeof navigator.mozGetUserMedia&&(navigator.getUserMedia=navigator.mozGetUserMedia));var m=-1!==navigator.userAgent.indexOf("Edge")&&(!!navigator.msSaveBlob||!!navigator.msSaveOrOpenBlob),_=!!window.opera||-1!==navigator.userAgent.indexOf("OPR/"),v=navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&"netscape"in window&&/ rv:/.test(navigator.userAgent),y=!_&&!m&&!!navigator.webkitGetUserMedia||S()||-1!==navigator.userAgent.toLowerCase().indexOf("chrome/"),C=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);C&&!y&&-1!==navigator.userAgent.indexOf("CriOS")&&(C=!1,y=!0);var E=window.MediaStream;function b(e){var t=1e3,n=["Bytes","KB","MB","GB","TB"];if(0===e)return"0 Bytes";var i=parseInt(Math.floor(Math.log(e)/Math.log(t)),10);return(e/Math.pow(t,i)).toPrecision(3)+" "+n[i]}function T(e,t){if(!e)throw"Blob object is required.";if(!e.type)try{e.type="video/webm"}catch(s){}var n=(e.type||"video/webm").split("/")[1];if(-1!==n.indexOf(";")&&(n=n.split(";")[0]),t&&-1!==t.indexOf(".")){var i=t.split(".");t=i[0],n=i[1]}var r=(t||Math.round(9999999999*Math.random())+888888888)+"."+n;if("undefined"!==typeof navigator.msSaveOrOpenBlob)return navigator.msSaveOrOpenBlob(e,r);if("undefined"!==typeof navigator.msSaveBlob)return navigator.msSaveBlob(e,r);var o=document.createElement("a");o.href=g.createObjectURL(e),o.download=r,o.style="display:none;opacity:0;color:transparent;",(document.body||document.documentElement).appendChild(o),"function"===typeof o.click?o.click():(o.target="_blank",o.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))),g.revokeObjectURL(o.href)}function S(){return"undefined"!==typeof window&&"object"===typeof window.process&&"renderer"===window.process.type||(!("undefined"===typeof i||"object"!==typeof i.versions||!i.versions.electron)||"object"===typeof navigator&&"string"===typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}function R(e,t){return e&&e.getTracks?e.getTracks().filter((function(e){return e.kind===(t||"audio")})):[]}function I(e,t){"srcObject"in t?t.srcObject=e:"mozSrcObject"in t?t.mozSrcObject=e:t.srcObject=e}function w(e,t){if("undefined"===typeof EBML)throw new Error("Please link: https://www.webrtc-experiment.com/EBML.js");var n=new EBML.Reader,i=new EBML.Decoder,r=EBML.tools,o=new FileReader;o.onload=function(e){var o=i.decode(this.result);o.forEach((function(e){n.read(e)})),n.stop();var s=r.makeMetadataSeekable(n.metadatas,n.duration,n.cues),a=this.result.slice(n.metadataSize),c=new Blob([s,a],{type:"video/webm"});t(c)},o.readAsArrayBuffer(e)}"undefined"===typeof E&&"undefined"!==typeof webkitMediaStream&&(E=webkitMediaStream),"undefined"!==typeof E&&"undefined"===typeof E.prototype.stop&&(E.prototype.stop=function(){this.getTracks().forEach((function(e){e.stop()}))}),"undefined"!==typeof s&&(s.invokeSaveAsDialog=T,s.getTracks=R,s.getSeekableBlob=w,s.bytesToSize=b,s.isElectron=S);
/**
 * Storage is a standalone object used by {@link RecordRTC} to store reusable objects e.g. "new AudioContext".
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @example
 * Storage.AudioContext === webkitAudioContext
 * @property {webkitAudioContext} AudioContext - Keeps a reference to AudioContext object.
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 */
var O={};function k(){if(v||C||m)return!0;navigator.appVersion;var e,t,n=navigator.userAgent,i=""+parseFloat(navigator.appVersion),r=parseInt(navigator.appVersion,10);return(y||_)&&(e=n.indexOf("Chrome"),i=n.substring(e+7)),-1!==(t=i.indexOf(";"))&&(i=i.substring(0,t)),-1!==(t=i.indexOf(" "))&&(i=i.substring(0,t)),r=parseInt(""+i,10),isNaN(r)&&(i=""+parseFloat(navigator.appVersion),r=parseInt(navigator.appVersion,10)),r>=49}
/**
 * MediaStreamRecorder is an abstraction layer for {@link https://w3c.github.io/mediacapture-record/MediaRecorder.html|MediaRecorder API}. It is used by {@link RecordRTC} to record MediaStream(s) in both Chrome and Firefox.
 * @summary Runs top over {@link https://w3c.github.io/mediacapture-record/MediaRecorder.html|MediaRecorder API}.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://github.com/muaz-khan|Muaz Khan}
 * @typedef MediaStreamRecorder
 * @class
 * @example
 * var config = {
 *     mimeType: 'video/webm', // vp8, vp9, h264, mkv, opus/vorbis
 *     audioBitsPerSecond : 256 * 8 * 1024,
 *     videoBitsPerSecond : 256 * 8 * 1024,
 *     bitsPerSecond: 256 * 8 * 1024,  // if this is provided, skip above two
 *     checkForInactiveTracks: true,
 *     timeSlice: 1000, // concatenate intervals based blobs
 *     ondataavailable: function() {} // get intervals based blobs
 * }
 * var recorder = new MediaStreamRecorder(mediaStream, config);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 *
 *     // or
 *     var blob = recorder.blob;
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {disableLogs:true, initCallback: function, mimeType: "video/webm", timeSlice: 1000}
 * @throws Will throw an error if first argument "MediaStream" is missing. Also throws error if "MediaRecorder API" are not supported by the browser.
 */function M(e,t){var n=this;if("undefined"===typeof e)throw'First argument "MediaStream" is required.';if("undefined"===typeof MediaRecorder)throw"Your browser does not support the Media Recorder API. Please try other modules e.g. WhammyRecorder or StereoAudioRecorder.";if(t=t||{mimeType:"video/webm"},"audio"===t.type){var i;if(R(e,"video").length&&R(e,"audio").length)navigator.mozGetUserMedia?(i=new E,i.addTrack(R(e,"audio")[0])):i=new E(R(e,"audio")),e=i;t.mimeType&&-1!==t.mimeType.toString().toLowerCase().indexOf("audio")||(t.mimeType=y?"audio/webm":"audio/ogg"),t.mimeType&&"audio/ogg"!==t.mimeType.toString().toLowerCase()&&navigator.mozGetUserMedia&&(t.mimeType="audio/ogg")}var r,o=[];function s(){n.timestamps.push((new Date).getTime()),"function"===typeof t.onTimeStamp&&t.onTimeStamp(n.timestamps[n.timestamps.length-1],n.timestamps)}function a(e){return r&&r.mimeType?r.mimeType:e.mimeType||"video/webm"}function c(){o=[],r=null,n.timestamps=[]}function l(){if("active"in e){if(!e.active)return!1}else if("ended"in e&&e.ended)return!1;return!0}this.getArrayOfBlobs=function(){return o},this.record=function(){n.blob=null,n.clearRecordedData(),n.timestamps=[],u=[],o=[];var i=t;t.disableLogs||console.log("Passing following config over MediaRecorder API.",i),r&&(r=null),y&&!k()&&(i="video/vp8"),"function"===typeof MediaRecorder.isTypeSupported&&i.mimeType&&(MediaRecorder.isTypeSupported(i.mimeType)||(t.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",i.mimeType),i.mimeType="audio"===t.type?"audio/webm":"video/webm"));try{r=new MediaRecorder(e,i),t.mimeType=i.mimeType}catch(c){r=new MediaRecorder(e)}i.mimeType&&!MediaRecorder.isTypeSupported&&"canRecordMimeType"in r&&!1===r.canRecordMimeType(i.mimeType)&&(t.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",i.mimeType)),r.ondataavailable=function(e){if(e.data&&u.push("ondataavailable: "+b(e.data.size)),"number"!==typeof t.timeSlice)!e.data||!e.data.size||e.data.size<100||n.blob?n.recordingCallback&&(n.recordingCallback(new Blob([],{type:a(i)})),n.recordingCallback=null):(n.blob=t.getNativeBlob?e.data:new Blob([e.data],{type:a(i)}),n.recordingCallback&&(n.recordingCallback(n.blob),n.recordingCallback=null));else if(e.data&&e.data.size&&(o.push(e.data),s(),"function"===typeof t.ondataavailable)){var r=t.getNativeBlob?e.data:new Blob([e.data],{type:a(i)});t.ondataavailable(r)}},r.onstart=function(){u.push("started")},r.onpause=function(){u.push("paused")},r.onresume=function(){u.push("resumed")},r.onstop=function(){u.push("stopped")},r.onerror=function(e){e&&(e.name||(e.name="UnknownError"),u.push("error: "+e),t.disableLogs||(-1!==e.name.toString().toLowerCase().indexOf("invalidstate")?console.error("The MediaRecorder is not in a state in which the proposed operation is allowed to be executed.",e):-1!==e.name.toString().toLowerCase().indexOf("notsupported")?console.error("MIME type (",i.mimeType,") is not supported.",e):-1!==e.name.toString().toLowerCase().indexOf("security")?console.error("MediaRecorder security error",e):"OutOfMemory"===e.name?console.error("The UA has exhaused the available memory. User agents SHOULD provide as much additional information as possible in the message attribute.",e):"IllegalStreamModification"===e.name?console.error("A modification to the stream has occurred that makes it impossible to continue recording. An example would be the addition of a Track while recording is occurring. User agents SHOULD provide as much additional information as possible in the message attribute.",e):"OtherRecordingError"===e.name?console.error("Used for an fatal error other than those listed above. User agents SHOULD provide as much additional information as possible in the message attribute.",e):"GenericError"===e.name?console.error("The UA cannot provide the codec or recording option that has been requested.",e):console.error("MediaRecorder Error",e)),function(e){if(!n.manuallyStopped&&r&&"inactive"===r.state)return delete t.timeslice,void r.start(6e5);setTimeout(e,1e3)}(),"inactive"!==r.state&&"stopped"!==r.state&&r.stop())},"number"===typeof t.timeSlice?(s(),r.start(t.timeSlice)):r.start(36e5),t.initCallback&&t.initCallback()},this.timestamps=[],this.stop=function(e){e=e||function(){},n.manuallyStopped=!0,r&&(this.recordingCallback=e,"recording"===r.state&&r.stop(),"number"===typeof t.timeSlice&&setTimeout((function(){n.blob=new Blob(o,{type:a(t)}),n.recordingCallback(n.blob)}),100))},this.pause=function(){r&&"recording"===r.state&&r.pause()},this.resume=function(){r&&"paused"===r.state&&r.resume()},this.clearRecordedData=function(){r&&"recording"===r.state&&n.stop(c),c()},this.getInternalRecorder=function(){return r},this.blob=null,this.getState=function(){return r&&r.state||"inactive"};var u=[];this.getAllStates=function(){return u},"undefined"===typeof t.checkForInactiveTracks&&(t.checkForInactiveTracks=!1);n=this;(function e(){if(r&&!1!==t.checkForInactiveTracks)return!1===l()?(t.disableLogs||console.log("MediaStream seems stopped."),void n.stop()):void setTimeout(e,1e3)})(),this.name="MediaStreamRecorder",this.toString=function(){return this.name}}
/**
 * StereoAudioRecorder is a standalone class used by {@link RecordRTC} to bring "stereo" audio-recording in chrome.
 * @summary JavaScript standalone object for stereo audio recording.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef StereoAudioRecorder
 * @class
 * @example
 * var recorder = new StereoAudioRecorder(MediaStream, {
 *     sampleRate: 44100,
 *     bufferSize: 4096
 * });
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {sampleRate: 44100, bufferSize: 4096, numberOfAudioChannels: 1, etc.}
 */
function x(e,t){if(!R(e,"audio").length)throw"Your stream has no audio tracks.";t=t||{};var n,i=this,r=[],o=[],a=!1,c=0,l=2,u=t.desiredSampRate;function d(){if(!1===t.checkForInactiveTracks)return!0;if("active"in e){if(!e.active)return!1}else if("ended"in e&&e.ended)return!1;return!0}function h(e,t){function n(e,t){var n,i=e.numberOfAudioChannels,r=e.leftBuffers.slice(0),o=e.rightBuffers.slice(0),s=e.sampleRate,a=e.internalInterleavedLength,c=e.desiredSampRate;function l(e,t,n){var i=Math.round(e.length*(t/n)),r=[],o=Number((e.length-1)/(i-1));r[0]=e[0];for(var s=1;s<i-1;s++){var a=s*o,c=Number(Math.floor(a)).toFixed(),l=Number(Math.ceil(a)).toFixed(),d=a-c;r[s]=u(e[c],e[l],d)}return r[i-1]=e[e.length-1],r}function u(e,t,n){return e+(t-e)*n}function d(e,t){for(var n=new Float64Array(t),i=0,r=e.length,o=0;o<r;o++){var s=e[o];n.set(s,i),i+=s.length}return n}function h(e,t){for(var n=e.length+t.length,i=new Float64Array(n),r=0,o=0;o<n;)i[o++]=e[r],i[o++]=t[r],r++;return i}function p(e,t,n){for(var i=n.length,r=0;r<i;r++)e.setUint8(t+r,n.charCodeAt(r))}2===i&&(r=d(r,a),o=d(o,a),c&&(r=l(r,c,s),o=l(o,c,s))),1===i&&(r=d(r,a),c&&(r=l(r,c,s))),c&&(s=c),2===i&&(n=h(r,o)),1===i&&(n=r);var f=n.length,g=44+2*f,m=new ArrayBuffer(g),_=new DataView(m);p(_,0,"RIFF"),_.setUint32(4,36+2*f,!0),p(_,8,"WAVE"),p(_,12,"fmt "),_.setUint32(16,16,!0),_.setUint16(20,1,!0),_.setUint16(22,i,!0),_.setUint32(24,s,!0),_.setUint32(28,s*i*2,!0),_.setUint16(32,2*i,!0),_.setUint16(34,16,!0),p(_,36,"data"),_.setUint32(40,2*f,!0);for(var v=f,y=44,C=1,E=0;E<v;E++)_.setInt16(y,n[E]*(32767*C),!0),y+=2;if(t)return t({buffer:m,view:_});postMessage({buffer:m,view:_})}if(e.noWorker)n(e,(function(e){t(e.buffer,e.view)}));else{var i=p(n);i.onmessage=function(e){t(e.data.buffer,e.data.view),g.revokeObjectURL(i.workerURL),i.terminate()},i.postMessage(e)}}function p(e){var t=g.createObjectURL(new Blob([e.toString(),";this.onmessage =  function (eee) {"+e.name+"(eee.data);}"],{type:"application/javascript"})),n=new Worker(t);return n.workerURL=t,n}!0===t.leftChannel&&(l=1),1===t.numberOfAudioChannels&&(l=1),(!l||l<1)&&(l=2),t.disableLogs||console.log("StereoAudioRecorder is set to record number of channels: "+l),"undefined"===typeof t.checkForInactiveTracks&&(t.checkForInactiveTracks=!0),this.record=function(){if(!1===d())throw"Please make sure MediaStream is active.";E(),T=C=!1,a=!0,"undefined"!==typeof t.timeSlice&&w()},this.stop=function(e){e=e||function(){},a=!1,h({desiredSampRate:u,sampleRate:y,numberOfAudioChannels:l,internalInterleavedLength:c,leftBuffers:r,rightBuffers:1===l?[]:o,noWorker:t.noWorker},(function(t,n){i.blob=new Blob([n],{type:"audio/wav"}),i.buffer=new ArrayBuffer(n.buffer.byteLength),i.view=n,i.sampleRate=u||y,i.bufferSize=v,i.length=c,T=!1,e&&e(i.blob)}))},"undefined"===typeof s.Storage&&(s.Storage={AudioContextConstructor:null,AudioContext:window.AudioContext||window.webkitAudioContext}),s.Storage.AudioContextConstructor&&"closed"!==s.Storage.AudioContextConstructor.state||(s.Storage.AudioContextConstructor=new s.Storage.AudioContext);var f=s.Storage.AudioContextConstructor,m=f.createMediaStreamSource(e),_=[0,256,512,1024,2048,4096,8192,16384],v="undefined"===typeof t.bufferSize?4096:t.bufferSize;if(-1===_.indexOf(v)&&(t.disableLogs||console.log("Legal values for buffer-size are "+JSON.stringify(_,null,"\t"))),f.createJavaScriptNode)n=f.createJavaScriptNode(v,l,l);else{if(!f.createScriptProcessor)throw"WebAudio API has no support on this browser.";n=f.createScriptProcessor(v,l,l)}m.connect(n),t.bufferSize||(v=n.bufferSize);var y="undefined"!==typeof t.sampleRate?t.sampleRate:f.sampleRate||44100;(y<22050||y>96e3)&&(t.disableLogs||console.log("sample-rate must be under range 22050 and 96000.")),t.disableLogs||t.desiredSampRate&&console.log("Desired sample-rate: "+t.desiredSampRate);var C=!1;function E(){r=[],o=[],c=0,T=!1,a=!1,C=!1,f=null,i.leftchannel=r,i.rightchannel=o,i.numberOfAudioChannels=l,i.desiredSampRate=u,i.sampleRate=y,i.recordingLength=c,I={left:[],right:[],recordingLength:0}}function b(){n&&(n.onaudioprocess=null,n.disconnect(),n=null),m&&(m.disconnect(),m=null),E()}this.pause=function(){C=!0},this.resume=function(){if(!1===d())throw"Please make sure MediaStream is active.";if(!a)return t.disableLogs||console.log("Seems recording has been restarted."),void this.record();C=!1},this.clearRecordedData=function(){t.checkForInactiveTracks=!1,a&&this.stop(b),b()},this.name="StereoAudioRecorder",this.toString=function(){return this.name};var T=!1;function S(e){if(!C)if(!1===d()&&(t.disableLogs||console.log("MediaStream seems stopped."),n.disconnect(),a=!1),a){T||(T=!0,t.onAudioProcessStarted&&t.onAudioProcessStarted(),t.initCallback&&t.initCallback());var s=e.inputBuffer.getChannelData(0),u=new Float32Array(s);if(r.push(u),2===l){var h=e.inputBuffer.getChannelData(1),p=new Float32Array(h);o.push(p)}c+=v,i.recordingLength=c,"undefined"!==typeof t.timeSlice&&(I.recordingLength+=v,I.left.push(u),2===l&&I.right.push(p))}else m&&(m.disconnect(),m=null)}n.onaudioprocess=S,f.createMediaStreamDestination?n.connect(f.createMediaStreamDestination()):n.connect(f.destination),this.leftchannel=r,this.rightchannel=o,this.numberOfAudioChannels=l,this.desiredSampRate=u,this.sampleRate=y,i.recordingLength=c;var I={left:[],right:[],recordingLength:0};function w(){a&&"function"===typeof t.ondataavailable&&"undefined"!==typeof t.timeSlice&&(I.left.length?(h({desiredSampRate:u,sampleRate:y,numberOfAudioChannels:l,internalInterleavedLength:I.recordingLength,leftBuffers:I.left,rightBuffers:1===l?[]:I.right},(function(e,n){var i=new Blob([n],{type:"audio/wav"});t.ondataavailable(i),setTimeout(w,t.timeSlice)})),I={left:[],right:[],recordingLength:0}):setTimeout(w,t.timeSlice))}}
/**
 * CanvasRecorder is a standalone class used by {@link RecordRTC} to bring HTML5-Canvas recording into video WebM. It uses HTML2Canvas library and runs top over {@link Whammy}.
 * @summary HTML2Canvas recording into video WebM.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef CanvasRecorder
 * @class
 * @example
 * var recorder = new CanvasRecorder(htmlElement, { disableLogs: true, useWhammyRecorder: true });
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {HTMLElement} htmlElement - querySelector/getElementById/getElementsByTagName[0]/etc.
 * @param {object} config - {disableLogs:true, initCallback: function}
 */
function P(e,t){if("undefined"===typeof html2canvas)throw"Please link: https://www.webrtc-experiment.com/screenshot.js";t=t||{},t.frameInterval||(t.frameInterval=10);var n=!1;["captureStream","mozCaptureStream","webkitCaptureStream"].forEach((function(e){e in document.createElement("canvas")&&(n=!0)}));var i,r,o,s=(!!window.webkitRTCPeerConnection||!!window.webkitGetUserMedia)&&!!window.chrome,a=50,c=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);if(s&&c&&c[2]&&(a=parseInt(c[2],10)),s&&a<52&&(n=!1),t.useWhammyRecorder&&(n=!1),n)if(t.disableLogs||console.log("Your browser supports both MediRecorder API and canvas.captureStream!"),e instanceof HTMLCanvasElement)i=e;else{if(!(e instanceof CanvasRenderingContext2D))throw"Please pass either HTMLCanvasElement or CanvasRenderingContext2D.";i=e.canvas}else navigator.mozGetUserMedia&&(t.disableLogs||console.error("Canvas recording is NOT supported in Firefox."));this.record=function(){if(o=!0,n&&!t.useWhammyRecorder){var e;"captureStream"in i?e=i.captureStream(25):"mozCaptureStream"in i?e=i.mozCaptureStream(25):"webkitCaptureStream"in i&&(e=i.webkitCaptureStream(25));try{var s=new E;s.addTrack(R(e,"video")[0]),e=s}catch(a){}if(!e)throw"captureStream API are NOT available.";r=new M(e,{mimeType:t.mimeType||"video/webm"}),r.record()}else f.frames=[],p=(new Date).getTime(),h();t.initCallback&&t.initCallback()},this.getWebPImages=function(n){if("canvas"===e.nodeName.toLowerCase()){var i=f.frames.length;f.frames.forEach((function(e,n){var r=i-n;t.disableLogs||console.log(r+"/"+i+" frames remaining"),t.onEncodingCallback&&t.onEncodingCallback(r,i);var o=e.image.toDataURL("image/webp",1);f.frames[n].image=o})),t.disableLogs||console.log("Generating WebM"),n()}else n()},this.stop=function(e){o=!1;var i=this;n&&r?r.stop(e):this.getWebPImages((function(){f.compile((function(n){t.disableLogs||console.log("Recording finished!"),i.blob=n,i.blob.forEach&&(i.blob=new Blob([],{type:"video/webm"})),e&&e(i.blob),f.frames=[]}))}))};var l=!1;function u(){f.frames=[],o=!1,l=!1}function d(){var t=document.createElement("canvas"),n=t.getContext("2d");return t.width=e.width,t.height=e.height,n.drawImage(e,0,0),t}function h(){if(l)return p=(new Date).getTime(),setTimeout(h,500);if("canvas"===e.nodeName.toLowerCase()){var n=(new Date).getTime()-p;return p=(new Date).getTime(),f.frames.push({image:d(),duration:n}),void(o&&setTimeout(h,t.frameInterval))}html2canvas(e,{grabMouse:"undefined"===typeof t.showMousePointer||t.showMousePointer,onrendered:function(e){var n=(new Date).getTime()-p;if(!n)return setTimeout(h,t.frameInterval);p=(new Date).getTime(),f.frames.push({image:e.toDataURL("image/webp",1),duration:n}),o&&setTimeout(h,t.frameInterval)}})}this.pause=function(){l=!0,r instanceof M&&r.pause()},this.resume=function(){l=!1,r instanceof M?r.resume():o||this.record()},this.clearRecordedData=function(){o&&this.stop(u),u()},this.name="CanvasRecorder",this.toString=function(){return this.name};var p=(new Date).getTime(),f=new D.Video(100)}
/**
 * WhammyRecorder is a standalone class used by {@link RecordRTC} to bring video recording in Chrome. It runs top over {@link Whammy}.
 * @summary Video recording feature in Chrome.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef WhammyRecorder
 * @class
 * @example
 * var recorder = new WhammyRecorder(mediaStream);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {disableLogs: true, initCallback: function, video: HTMLVideoElement, etc.}
 */
function A(e,t){function n(e){e="undefined"!==typeof e?e:10;var t=(new Date).getTime()-l;return t?s?(l=(new Date).getTime(),setTimeout(n,100)):(l=(new Date).getTime(),c.paused&&c.play(),h.drawImage(c,0,0,d.width,d.height),u.frames.push({duration:t,image:d.toDataURL("image/webp")}),void(o||setTimeout(n,e,e))):setTimeout(n,e,e)}function i(e){var t=-1,n=e.length;(function i(){t++,t!==n?setTimeout((function(){e.functionToLoop(i,t)}),1):e.callback()})()}function r(e,t,n,r,o){var s=document.createElement("canvas");s.width=d.width,s.height=d.height;var a=s.getContext("2d"),c=[],l=-1===t,u=t&&t>0&&t<=e.length?t:e.length,h={r:0,g:0,b:0},p=Math.sqrt(Math.pow(255,2)+Math.pow(255,2)+Math.pow(255,2)),f=n&&n>=0&&n<=1?n:0,g=r&&r>=0&&r<=1?r:0,m=!1;i({length:u,functionToLoop:function(t,n){var i,r,o,s=function(){!m&&o-i<=o*g||(l&&(m=!0),c.push(e[n])),t()};if(m)s();else{var u=new Image;u.onload=function(){a.drawImage(u,0,0,d.width,d.height);var e=a.getImageData(0,0,d.width,d.height);i=0,r=e.data.length,o=e.data.length/4;for(var t=0;t<r;t+=4){var n={r:e.data[t],g:e.data[t+1],b:e.data[t+2]},c=Math.sqrt(Math.pow(n.r-h.r,2)+Math.pow(n.g-h.g,2)+Math.pow(n.b-h.b,2));c<=p*f&&i++}s()},u.src=e[n].image}},callback:function(){c=c.concat(e.slice(u)),c.length<=0&&c.push(e[e.length-1]),o(c)}})}t=t||{},t.frameInterval||(t.frameInterval=10),t.disableLogs||console.log("Using frames-interval:",t.frameInterval),this.record=function(){t.width||(t.width=320),t.height||(t.height=240),t.video||(t.video={width:t.width,height:t.height}),t.canvas||(t.canvas={width:t.width,height:t.height}),d.width=t.canvas.width||320,d.height=t.canvas.height||240,h=d.getContext("2d"),t.video&&t.video instanceof HTMLVideoElement?(c=t.video.cloneNode(),t.initCallback&&t.initCallback()):(c=document.createElement("video"),I(e,c),c.onloadedmetadata=function(){t.initCallback&&t.initCallback()},c.width=t.video.width,c.height=t.video.height),c.muted=!0,c.play(),l=(new Date).getTime(),u=new D.Video,t.disableLogs||(console.log("canvas resolutions",d.width,"*",d.height),console.log("video width/height",c.width||d.width,"*",c.height||d.height)),n(t.frameInterval)};var o=!1;this.stop=function(e){e=e||function(){},o=!0;var n=this;setTimeout((function(){r(u.frames,-1,null,null,(function(i){u.frames=i,t.advertisement&&t.advertisement.length&&(u.frames=t.advertisement.concat(u.frames)),u.compile((function(t){n.blob=t,n.blob.forEach&&(n.blob=new Blob([],{type:"video/webm"})),e&&e(n.blob)}))}))}),10)};var s=!1;function a(){u.frames=[],o=!0,s=!1}this.pause=function(){s=!0},this.resume=function(){s=!1,o&&this.record()},this.clearRecordedData=function(){o||this.stop(a),a()},this.name="WhammyRecorder",this.toString=function(){return this.name};var c,l,u,d=document.createElement("canvas"),h=d.getContext("2d")}"undefined"!==typeof f?O.AudioContext=f:"undefined"!==typeof webkitAudioContext&&(O.AudioContext=webkitAudioContext),"undefined"!==typeof s&&(s.Storage=O),"undefined"!==typeof s&&(s.MediaStreamRecorder=M),"undefined"!==typeof s&&(s.StereoAudioRecorder=x),"undefined"!==typeof s&&(s.CanvasRecorder=P),"undefined"!==typeof s&&(s.WhammyRecorder=A);
/**
 * Whammy is a standalone class used by {@link RecordRTC} to bring video recording in Chrome. It is written by {@link https://github.com/antimatter15|antimatter15}
 * @summary A real time javascript webm encoder based on a canvas hack.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef Whammy
 * @class
 * @example
 * var recorder = new Whammy().Video(15);
 * recorder.add(context || canvas || dataURL);
 * var output = recorder.compile();
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 */
var D=function(){function e(e){this.frames=[],this.duration=e||1,this.quality=.8}function t(e){var t=g.createObjectURL(new Blob([e.toString(),"this.onmessage =  function (eee) {"+e.name+"(eee.data);}"],{type:"application/javascript"})),n=new Worker(t);return g.revokeObjectURL(t),n}function n(e){function t(e){var t=i(e);if(!t)return[];var r=3e4,o=[{id:440786851,data:[{data:1,id:17030},{data:1,id:17143},{data:4,id:17138},{data:8,id:17139},{data:"webm",id:17026},{data:2,id:17031},{data:2,id:17029}]},{id:408125543,data:[{id:357149030,data:[{data:1e6,id:2807729},{data:"whammy",id:19840},{data:"whammy",id:22337},{data:h(t.duration),id:17545}]},{id:374648427,data:[{id:174,data:[{data:1,id:215},{data:1,id:29637},{data:0,id:156},{data:"und",id:2274716},{data:"V_VP8",id:134},{data:"VP8",id:2459272},{data:1,id:131},{id:224,data:[{data:t.width,id:176},{data:t.height,id:186}]}]}]}]}],s=0,c=0;while(s<e.length){var l=[],u=0;do{l.push(e[s]),u+=e[s].duration,s++}while(s<e.length&&u<r);var d=0,p={id:524531317,data:n(c,d,l)};o[1].data.push(p),c+=u}return a(o)}function n(e,t,n){return[{data:e,id:231}].concat(n.map((function(e){var n=c({discardable:0,frame:e.data.slice(4),invisible:0,keyframe:1,lacing:0,trackNum:1,timecode:Math.round(t)});return t+=e.duration,{data:n,id:163}})))}function i(e){if(e[0]){for(var t=e[0].width,n=e[0].height,i=e[0].duration,r=1;r<e.length;r++)i+=e[r].duration;return{duration:i,width:t,height:n}}postMessage({error:"Something went wrong. Maybe WebP format is not supported in the current browser."})}function r(e){var t=[];while(e>0)t.push(255&e),e>>=8;return new Uint8Array(t.reverse())}function o(e){return new Uint8Array(e.split("").map((function(e){return e.charCodeAt(0)})))}function s(e){var t=[],n=e.length%8?new Array(9-e.length%8).join("0"):"";e=n+e;for(var i=0;i<e.length;i+=8)t.push(parseInt(e.substr(i,8),2));return new Uint8Array(t)}function a(e){for(var t=[],n=0;n<e.length;n++){var i=e[n].data;"object"===typeof i&&(i=a(i)),"number"===typeof i&&(i=s(i.toString(2))),"string"===typeof i&&(i=o(i));var c=i.size||i.byteLength||i.length,l=Math.ceil(Math.ceil(Math.log(c)/Math.log(2))/8),u=c.toString(2),d=new Array(7*l+7+1-u.length).join("0")+u,h=new Array(l).join("0")+"1"+d;t.push(r(e[n].id)),t.push(s(h)),t.push(i)}return new Blob(t,{type:"video/webm"})}function c(e){var t=0;if(e.keyframe&&(t|=128),e.invisible&&(t|=8),e.lacing&&(t|=e.lacing<<1),e.discardable&&(t|=1),e.trackNum>127)throw"TrackNumber > 127 not supported";var n=[128|e.trackNum,e.timecode>>8,255&e.timecode,t].map((function(e){return String.fromCharCode(e)})).join("")+e.frame;return n}function l(e){for(var t,n,i,r=e.RIFF[0].WEBP[0],o=r.indexOf("*"),s=0,a=[];s<4;s++)a[s]=r.charCodeAt(o+3+s);return i=a[1]<<8|a[0],t=16383&i,i=a[3]<<8|a[2],n=16383&i,{width:t,height:n,data:r,riff:e}}function u(e,t){return parseInt(e.substr(t+4,4).split("").map((function(e){var t=e.charCodeAt(0).toString(2);return new Array(8-t.length+1).join("0")+t})).join(""),2)}function d(e){var t=0,n={};while(t<e.length){var i=e.substr(t,4),r=u(e,t),o=e.substr(t+4+4,r);t+=8+r,n[i]=n[i]||[],"RIFF"===i||"LIST"===i?n[i].push(d(o)):n[i].push(o)}return n}function h(e){return[].slice.call(new Uint8Array(new Float64Array([e]).buffer),0).map((function(e){return String.fromCharCode(e)})).reverse().join("")}var p=new t(e.map((function(e){var t=l(d(atob(e.image.slice(23))));return t.duration=e.duration,t})));postMessage(p)}return e.prototype.add=function(e,t){if("canvas"in e&&(e=e.canvas),"toDataURL"in e&&(e=e.toDataURL("image/webp",this.quality)),!/^data:image\/webp;base64,/gi.test(e))throw"Input must be formatted properly as a base64 encoded DataURI of type image/webp";this.frames.push({image:e,duration:t||this.duration})},e.prototype.compile=function(e){var i=t(n);i.onmessage=function(t){t.data.error?console.error(t.data.error):e(t.data)},i.postMessage(this.frames)},{Video:e}}();"undefined"!==typeof s&&(s.Whammy=D);
/**
 * DiskStorage is a standalone object used by {@link RecordRTC} to store recorded blobs in IndexedDB storage.
 * @summary Writing blobs into IndexedDB.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @example
 * DiskStorage.Store({
 *     audioBlob: yourAudioBlob,
 *     videoBlob: yourVideoBlob,
 *     gifBlob  : yourGifBlob
 * });
 * DiskStorage.Fetch(function(dataURL, type) {
 *     if(type === 'audioBlob') { }
 *     if(type === 'videoBlob') { }
 *     if(type === 'gifBlob')   { }
 * });
 * // DiskStorage.dataStoreName = 'recordRTC';
 * // DiskStorage.onError = function(error) { };
 * @property {function} init - This method must be called once to initialize IndexedDB ObjectStore. Though, it is auto-used internally.
 * @property {function} Fetch - This method fetches stored blobs from IndexedDB.
 * @property {function} Store - This method stores blobs in IndexedDB.
 * @property {function} onError - This function is invoked for any known/unknown error.
 * @property {string} dataStoreName - Name of the ObjectStore created in IndexedDB storage.
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 */var N={init:function(){var e=this;if("undefined"!==typeof indexedDB&&"undefined"!==typeof indexedDB.open){var t,n=1,i=this.dbName||location.href.replace(/\/|:|#|%|\.|\[|\]/g,""),r=indexedDB.open(i,n);r.onerror=e.onError,r.onsuccess=function(){if(t=r.result,t.onerror=e.onError,t.setVersion)if(t.version!==n){var i=t.setVersion(n);i.onsuccess=function(){o(t),s()}}else s();else s()},r.onupgradeneeded=function(e){o(e.target.result)}}else console.error("IndexedDB API are not available in this browser.");function o(t){t.createObjectStore(e.dataStoreName)}function s(){var n=t.transaction([e.dataStoreName],"readwrite");function i(t){n.objectStore(e.dataStoreName).get(t).onsuccess=function(n){e.callback&&e.callback(n.target.result,t)}}e.videoBlob&&n.objectStore(e.dataStoreName).put(e.videoBlob,"videoBlob"),e.gifBlob&&n.objectStore(e.dataStoreName).put(e.gifBlob,"gifBlob"),e.audioBlob&&n.objectStore(e.dataStoreName).put(e.audioBlob,"audioBlob"),i("audioBlob"),i("videoBlob"),i("gifBlob")}},Fetch:function(e){return this.callback=e,this.init(),this},Store:function(e){return this.audioBlob=e.audioBlob,this.videoBlob=e.videoBlob,this.gifBlob=e.gifBlob,this.init(),this},onError:function(e){console.error(JSON.stringify(e,null,"\t"))},dataStoreName:"recordRTC",dbName:null};
/**
 * GifRecorder is standalone calss used by {@link RecordRTC} to record video or canvas into animated gif.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef GifRecorder
 * @class
 * @example
 * var recorder = new GifRecorder(mediaStream || canvas || context, { onGifPreview: function, onGifRecordingStarted: function, width: 1280, height: 720, frameRate: 200, quality: 10 });
 * recorder.record();
 * recorder.stop(function(blob) {
 *     img.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object or HTMLCanvasElement or CanvasRenderingContext2D.
 * @param {object} config - {disableLogs:true, initCallback: function, width: 320, height: 240, frameRate: 200, quality: 10}
 */
function L(e,t){if("undefined"===typeof GIFEncoder){var n=document.createElement("script");n.src="https://www.webrtc-experiment.com/gif-recorder.js",(document.body||document.documentElement).appendChild(n)}t=t||{};var i=e instanceof CanvasRenderingContext2D||e instanceof HTMLCanvasElement;this.record=function(){function e(n){if(!0!==g.clearedRecordedData){if(r)return setTimeout((function(){e(n)}),100);f=d(e),void 0===typeof u&&(u=n),n-u<90||(!i&&l.paused&&l.play(),i||a.drawImage(l,0,0,s.width,s.height),t.onGifPreview&&t.onGifPreview(s.toDataURL("image/png")),h.addFrame(a),u=n)}}"undefined"!==typeof GIFEncoder&&c?(i||(t.width||(t.width=l.offsetWidth||320),t.height||(t.height=l.offsetHeight||240),t.video||(t.video={width:t.width,height:t.height}),t.canvas||(t.canvas={width:t.width,height:t.height}),s.width=t.canvas.width||320,s.height=t.canvas.height||240,l.width=t.video.width||320,l.height=t.video.height||240),h=new GIFEncoder,h.setRepeat(0),h.setDelay(t.frameRate||200),h.setQuality(t.quality||10),h.start(),"function"===typeof t.onGifRecordingStarted&&t.onGifRecordingStarted(),Date.now(),f=d(e),t.initCallback&&t.initCallback()):setTimeout(g.record,1e3)},this.stop=function(e){e=e||function(){},f&&p(f),Date.now(),this.blob=new Blob([new Uint8Array(h.stream().bin)],{type:"image/gif"}),e(this.blob),h.stream().bin=[]};var r=!1;function o(){h&&(h.stream().bin=[])}this.pause=function(){r=!0},this.resume=function(){r=!1},this.clearRecordedData=function(){g.clearedRecordedData=!0,o()},this.name="GifRecorder",this.toString=function(){return this.name};var s=document.createElement("canvas"),a=s.getContext("2d");i&&(e instanceof CanvasRenderingContext2D?(a=e,s=a.canvas):e instanceof HTMLCanvasElement&&(a=e.getContext("2d"),s=e));var c=!0;if(!i){var l=document.createElement("video");l.muted=!0,l.autoplay=!0,l.playsInline=!0,c=!1,l.onloadedmetadata=function(){c=!0},I(e,l),l.play()}var u,h,f=null,g=this}function U(e,t){var i="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45";(function(e){"undefined"===typeof s&&e&&"undefined"===typeof window&&"undefined"!==typeof n&&(n.navigator={userAgent:i,getUserMedia:function(){}},n.console||(n.console={}),"undefined"!==typeof n.console.log&&"undefined"!==typeof n.console.error||(n.console.error=n.console.log=n.console.log||function(){console.log(arguments)}),"undefined"===typeof document&&(e.document={documentElement:{appendChild:function(){return""}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var e={getContext:function(){return e},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""},style:{}};return e},e.HTMLVideoElement=function(){}),"undefined"===typeof location&&(e.location={protocol:"file:",href:"",hash:""}),"undefined"===typeof screen&&(e.screen={width:0,height:0}),"undefined"===typeof d&&(e.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),e.window=n)})("undefined"!==typeof n?n:null),t=t||"multi-streams-mixer";var r=[],o=!1,a=document.createElement("canvas"),c=a.getContext("2d");a.style.opacity=0,a.style.position="absolute",a.style.zIndex=-1,a.style.top="-1000em",a.style.left="-1000em",a.className=t,(document.body||document.documentElement).appendChild(a),this.disableLogs=!1,this.frameInterval=10,this.width=360,this.height=240,this.useGainNode=!0;var l=this,u=window.AudioContext;"undefined"===typeof u&&("undefined"!==typeof webkitAudioContext&&(u=webkitAudioContext),"undefined"!==typeof mozAudioContext&&(u=mozAudioContext));var d=window.URL;"undefined"===typeof d&&"undefined"!==typeof webkitURL&&(d=webkitURL),"undefined"!==typeof navigator&&"undefined"===typeof navigator.getUserMedia&&("undefined"!==typeof navigator.webkitGetUserMedia&&(navigator.getUserMedia=navigator.webkitGetUserMedia),"undefined"!==typeof navigator.mozGetUserMedia&&(navigator.getUserMedia=navigator.mozGetUserMedia));var h=window.MediaStream;"undefined"===typeof h&&"undefined"!==typeof webkitMediaStream&&(h=webkitMediaStream),"undefined"!==typeof h&&"undefined"===typeof h.prototype.stop&&(h.prototype.stop=function(){this.getTracks().forEach((function(e){e.stop()}))});var p={};function f(e,t){"srcObject"in t?t.srcObject=e:"mozSrcObject"in t?t.mozSrcObject=e:t.srcObject=e}function g(){if(!o){var e=r.length,t=!1,n=[];if(r.forEach((function(e){e.stream||(e.stream={}),e.stream.fullcanvas?t=e:n.push(e)})),t)a.width=t.stream.width,a.height=t.stream.height;else if(n.length){a.width=e>1?2*n[0].width:n[0].width;var i=1;3!==e&&4!==e||(i=2),5!==e&&6!==e||(i=3),7!==e&&8!==e||(i=4),9!==e&&10!==e||(i=5),a.height=n[0].height*i}else a.width=l.width||360,a.height=l.height||240;t&&t instanceof HTMLVideoElement&&m(t),n.forEach((function(e,t){m(e,t)})),setTimeout(g,l.frameInterval)}}function m(e,t){if(!o){var n=0,i=0,r=e.width,s=e.height;1===t&&(n=e.width),2===t&&(i=e.height),3===t&&(n=e.width,i=e.height),4===t&&(i=2*e.height),5===t&&(n=e.width,i=2*e.height),6===t&&(i=3*e.height),7===t&&(n=e.width,i=3*e.height),"undefined"!==typeof e.stream.left&&(n=e.stream.left),"undefined"!==typeof e.stream.top&&(i=e.stream.top),"undefined"!==typeof e.stream.width&&(r=e.stream.width),"undefined"!==typeof e.stream.height&&(s=e.stream.height),c.drawImage(e,n,i,r,s),"function"===typeof e.stream.onRender&&e.stream.onRender(c,n,i,r,s,t)}}function _(){o=!1;var t=v(),n=y();return n&&n.getTracks().filter((function(e){return"audio"===e.kind})).forEach((function(e){t.addTrack(e)})),e.forEach((function(e){e.fullcanvas&&!0})),t}function v(){var e;E(),"captureStream"in a?e=a.captureStream():"mozCaptureStream"in a?e=a.mozCaptureStream():l.disableLogs||console.error("Upgrade to latest Chrome or otherwise enable this flag: chrome://flags/#enable-experimental-web-platform-features");var t=new h;return e.getTracks().filter((function(e){return"video"===e.kind})).forEach((function(e){t.addTrack(e)})),a.stream=t,t}function y(){p.AudioContextConstructor||(p.AudioContextConstructor=new p.AudioContext),l.audioContext=p.AudioContextConstructor,l.audioSources=[],!0===l.useGainNode&&(l.gainNode=l.audioContext.createGain(),l.gainNode.connect(l.audioContext.destination),l.gainNode.gain.value=0);var t=0;if(e.forEach((function(e){if(e.getTracks().filter((function(e){return"audio"===e.kind})).length){t++;var n=l.audioContext.createMediaStreamSource(e);!0===l.useGainNode&&n.connect(l.gainNode),l.audioSources.push(n)}})),t)return l.audioDestination=l.audioContext.createMediaStreamDestination(),l.audioSources.forEach((function(e){e.connect(l.audioDestination)})),l.audioDestination.stream}function C(e){var n=document.createElement("video");return f(e,n),n.className=t,n.muted=!0,n.volume=0,n.width=e.width||l.width||360,n.height=e.height||l.height||240,n.play(),n}function E(t){r=[],t=t||e,t.forEach((function(e){if(e.getTracks().filter((function(e){return"video"===e.kind})).length){var t=C(e);t.stream=e,r.push(t)}}))}"undefined"!==typeof u?p.AudioContext=u:"undefined"!==typeof webkitAudioContext&&(p.AudioContext=webkitAudioContext),this.startDrawingFrames=function(){g()},this.appendStreams=function(t){if(!t)throw"First parameter is required.";t instanceof Array||(t=[t]),t.forEach((function(t){var n=new h;if(t.getTracks().filter((function(e){return"video"===e.kind})).length){var i=C(t);i.stream=t,r.push(i),n.addTrack(t.getTracks().filter((function(e){return"video"===e.kind}))[0])}if(t.getTracks().filter((function(e){return"audio"===e.kind})).length){var o=l.audioContext.createMediaStreamSource(t);l.audioDestination=l.audioContext.createMediaStreamDestination(),o.connect(l.audioDestination),n.addTrack(l.audioDestination.stream.getTracks().filter((function(e){return"audio"===e.kind}))[0])}e.push(n)}))},this.releaseStreams=function(){r=[],o=!0,l.gainNode&&(l.gainNode.disconnect(),l.gainNode=null),l.audioSources.length&&(l.audioSources.forEach((function(e){e.disconnect()})),l.audioSources=[]),l.audioDestination&&(l.audioDestination.disconnect(),l.audioDestination=null),l.audioContext&&l.audioContext.close(),l.audioContext=null,c.clearRect(0,0,a.width,a.height),a.stream&&(a.stream.stop(),a.stream=null)},this.resetVideoStreams=function(e){!e||e instanceof Array||(e=[e]),E(e)},this.name="MultiStreamsMixer",this.toString=function(){return this.name},this.getMixedStream=_}
/**
 * MultiStreamRecorder can record multiple videos in single container.
 * @summary Multi-videos recorder.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef MultiStreamRecorder
 * @class
 * @example
 * var options = {
 *     mimeType: 'video/webm'
 * }
 * var recorder = new MultiStreamRecorder(ArrayOfMediaStreams, options);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 *
 *     // or
 *     var blob = recorder.blob;
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStreams} mediaStreams - Array of MediaStreams.
 * @param {object} config - {disableLogs:true, frameInterval: 1, mimeType: "video/webm"}
 */
function B(e,t){e=e||[];var n,i,r=this;function o(){var t=[];return e.forEach((function(e){R(e,"video").forEach((function(e){t.push(e)}))})),t}t=t||{elementClass:"multi-streams-mixer",mimeType:"video/webm",video:{width:360,height:240}},t.frameInterval||(t.frameInterval=10),t.video||(t.video={}),t.video.width||(t.video.width=360),t.video.height||(t.video.height=240),this.record=function(){n=new U(e,t.elementClass||"multi-streams-mixer"),o().length&&(n.frameInterval=t.frameInterval||10,n.width=t.video.width||360,n.height=t.video.height||240,n.startDrawingFrames()),t.previewStream&&"function"===typeof t.previewStream&&t.previewStream(n.getMixedStream()),i=new M(n.getMixedStream(),t),i.record()},this.stop=function(e){i&&i.stop((function(t){r.blob=t,e(t),r.clearRecordedData()}))},this.pause=function(){i&&i.pause()},this.resume=function(){i&&i.resume()},this.clearRecordedData=function(){i&&(i.clearRecordedData(),i=null),n&&(n.releaseStreams(),n=null)},this.addStreams=function(r){if(!r)throw"First parameter is required.";r instanceof Array||(r=[r]),e.concat(r),i&&n&&(n.appendStreams(r),t.previewStream&&"function"===typeof t.previewStream&&t.previewStream(n.getMixedStream()))},this.resetVideoStreams=function(e){n&&(!e||e instanceof Array||(e=[e]),n.resetVideoStreams(e))},this.getMixer=function(){return n},this.name="MultiStreamRecorder",this.toString=function(){return this.name}}
/**
 * RecordRTCPromisesHandler adds promises support in {@link RecordRTC}. Try a {@link https://github.com/muaz-khan/RecordRTC/blob/master/simple-demos/RecordRTCPromisesHandler.html|demo here}
 * @summary Promises for {@link RecordRTC}
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef RecordRTCPromisesHandler
 * @class
 * @example
 * var recorder = new RecordRTCPromisesHandler(mediaStream, options);
 * recorder.startRecording()
 *         .then(successCB)
 *         .catch(errorCB);
 * // Note: You can access all RecordRTC API using "recorder.recordRTC" e.g. 
 * recorder.recordRTC.onStateChanged = function(state) {};
 * recorder.recordRTC.setRecordingDuration(5000);
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - Single media-stream object, array of media-streams, html-canvas-element, etc.
 * @param {object} config - {type:"video", recorderType: MediaStreamRecorder, disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, etc.}
 * @throws Will throw an error if "new" keyword is not used to initiate "RecordRTCPromisesHandler". Also throws error if first argument "MediaStream" is missing.
 * @requires {@link RecordRTC}
 */
function V(e,t){if(!this)throw'Use "new RecordRTCPromisesHandler()"';if("undefined"===typeof e)throw'First argument "MediaStream" is required.';var n=this;n.recordRTC=new s(e,t),this.startRecording=function(){return new Promise((function(e,t){try{n.recordRTC.startRecording(),e()}catch(i){t(i)}}))},this.stopRecording=function(){return new Promise((function(e,t){try{n.recordRTC.stopRecording((function(i){n.blob=n.recordRTC.getBlob(),n.blob&&n.blob.size?e(i):t("Empty blob.",n.blob)}))}catch(i){t(i)}}))},this.pauseRecording=function(){return new Promise((function(e,t){try{n.recordRTC.pauseRecording(),e()}catch(i){t(i)}}))},this.resumeRecording=function(){return new Promise((function(e,t){try{n.recordRTC.resumeRecording(),e()}catch(i){t(i)}}))},this.getDataURL=function(e){return new Promise((function(e,t){try{n.recordRTC.getDataURL((function(t){e(t)}))}catch(i){t(i)}}))},this.getBlob=function(){return new Promise((function(e,t){try{e(n.recordRTC.getBlob())}catch(i){t(i)}}))},this.getInternalRecorder=function(){return new Promise((function(e,t){try{e(n.recordRTC.getInternalRecorder())}catch(i){t(i)}}))},this.reset=function(){return new Promise((function(e,t){try{e(n.recordRTC.reset())}catch(i){t(i)}}))},this.destroy=function(){return new Promise((function(e,t){try{e(n.recordRTC.destroy())}catch(i){t(i)}}))},this.getState=function(){return new Promise((function(e,t){try{e(n.recordRTC.getState())}catch(i){t(i)}}))},this.blob=null,this.version="5.6.2"}
/**
 * WebAssemblyRecorder lets you create webm videos in JavaScript via WebAssembly. The library consumes raw RGBA32 buffers (4 bytes per pixel) and turns them into a webm video with the given framerate and quality. This makes it compatible out-of-the-box with ImageData from a CANVAS. With realtime mode you can also use webm-wasm for streaming webm videos.
 * @summary Video recording feature in Chrome, Firefox and maybe Edge.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef WebAssemblyRecorder
 * @class
 * @example
 * var recorder = new WebAssemblyRecorder(mediaStream);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {webAssemblyPath:'webm-wasm.wasm',workerPath: 'webm-worker.js', frameRate: 30, width: 1920, height: 1080, bitrate: 1024, realtime: true}
 */
function j(e,t){var n,i,r;function o(){return new ReadableStream({start:function(i){var r=document.createElement("canvas"),o=document.createElement("video"),s=!0;o.srcObject=e,o.muted=!0,o.height=t.height,o.width=t.width,o.volume=0,o.onplaying=function(){r.width=t.width,r.height=t.height;var e=r.getContext("2d"),a=1e3/t.frameRate,c=setInterval((function(){if(n&&(clearInterval(c),i.close()),s&&(s=!1,t.onVideoProcessStarted&&t.onVideoProcessStarted()),e.drawImage(o,0,0),"closed"!==i._controlledReadableStream.state)try{i.enqueue(e.getImageData(0,0,t.width,t.height))}catch(r){}}),a)},o.play()}})}function s(e,a){if(!t.workerPath&&!a)return n=!1,void fetch("https://unpkg.com/webm-wasm@latest/dist/webm-worker.js").then((function(t){t.arrayBuffer().then((function(t){s(e,t)}))}));if(!t.workerPath&&a instanceof ArrayBuffer){var l=new Blob([a],{type:"text/javascript"});t.workerPath=g.createObjectURL(l)}t.workerPath||console.error("workerPath parameter is missing."),i=new Worker(t.workerPath),i.postMessage(t.webAssemblyPath||"https://unpkg.com/webm-wasm@latest/dist/webm-wasm.wasm"),i.addEventListener("message",(function(e){"READY"===e.data?(i.postMessage({width:t.width,height:t.height,bitrate:t.bitrate||1200,timebaseDen:t.frameRate||30,realtime:t.realtime}),o().pipeTo(new WritableStream({write:function(e){n?console.error("Got image, but recorder is finished!"):i.postMessage(e.data.buffer,[e.data.buffer])}}))):e.data&&(r||c.push(e.data))}))}function a(e){i?(i.addEventListener("message",(function(t){null===t.data&&(i.terminate(),i=null,e&&e())})),i.postMessage(null)):e&&e()}"undefined"!==typeof ReadableStream&&"undefined"!==typeof WritableStream||console.error("Following polyfill is strongly recommended: https://unpkg.com/@mattiasbuelens/web-streams-polyfill/dist/polyfill.min.js"),t=t||{},t.width=t.width||640,t.height=t.height||480,t.frameRate=t.frameRate||30,t.bitrate=t.bitrate||1200,t.realtime=t.realtime||!0,this.record=function(){c=[],r=!1,this.blob=null,s(e),"function"===typeof t.initCallback&&t.initCallback()},this.pause=function(){r=!0},this.resume=function(){r=!1};var c=[];this.stop=function(e){n=!0;var t=this;a((function(){t.blob=new Blob(c,{type:"video/webm"}),e(t.blob)}))},this.name="WebAssemblyRecorder",this.toString=function(){return this.name},this.clearRecordedData=function(){c=[],r=!1,this.blob=null},this.blob=null}"undefined"!==typeof s&&(s.DiskStorage=N),"undefined"!==typeof s&&(s.GifRecorder=L),"undefined"===typeof s&&(e.exports=U,r=[],o=function(){return U}.apply(t,r),void 0===o||(e.exports=o)),"undefined"!==typeof s&&(s.MultiStreamRecorder=B),"undefined"!==typeof s&&(s.RecordRTCPromisesHandler=V),"undefined"!==typeof s&&(s.WebAssemblyRecorder=j)}).call(this,n("c8ba"),n("4362"))},ac1f:function(e,t,n){"use strict";var i=n("23e7"),r=n("9263");i({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},ad6d:function(e,t,n){"use strict";var i=n("825a");e.exports=function(){var e=i(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},addb:function(e,t,n){var i=n("f36a"),r=Math.floor,o=function(e,t){var n=e.length,c=r(n/2);return n<8?s(e,t):a(e,o(i(e,0,c),t),o(i(e,c),t),t)},s=function(e,t){var n,i,r=e.length,o=1;while(o<r){i=o,n=e[o];while(i&&t(e[i-1],n)>0)e[i]=e[--i];i!==o++&&(e[i]=n)}return e},a=function(e,t,n,i){var r=t.length,o=n.length,s=0,a=0;while(s<r||a<o)e[s+a]=s<r&&a<o?i(t[s],n[a])<=0?t[s++]:n[a++]:s<r?t[s++]:n[a++];return e};e.exports=o},ae93:function(e,t,n){"use strict";var i,r,o,s=n("d039"),a=n("1626"),c=n("7c73"),l=n("e163"),u=n("6eeb"),d=n("b622"),h=n("c430"),p=d("iterator"),f=!1;[].keys&&(o=[].keys(),"next"in o?(r=l(l(o)),r!==Object.prototype&&(i=r)):f=!0);var g=void 0==i||s((function(){var e={};return i[p].call(e)!==e}));g?i={}:h&&(i=c(i)),a(i[p])||u(i,p,(function(){return this})),e.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:f}},b041:function(e,t,n){"use strict";var i=n("00ee"),r=n("f5df");e.exports=i?{}.toString:function(){return"[object "+r(this)+"]"}},b0c0:function(e,t,n){var i=n("83ab"),r=n("5e77").EXISTS,o=n("e330"),s=n("9bf2").f,a=Function.prototype,c=o(a.toString),l=/^\s*function ([^ (]*)/,u=o(l.exec),d="name";i&&!r&&s(a,d,{configurable:!0,get:function(){try{return u(l,c(this))[1]}catch(e){return""}}})},b367:function(e,t,n){var i=n("5524"),r=n("ef08"),o="__core-js_shared__",s=r[o]||(r[o]={});(e.exports=function(e,t){return s[e]||(s[e]=void 0!==t?t:{})})("versions",[]).push({version:i.version,mode:n("e444")?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},b50d:function(e,t,n){"use strict";var i=n("c532"),r=n("467f"),o=n("7aac"),s=n("30b5"),a=n("83b9"),c=n("c345"),l=n("3934"),u=n("2d83");e.exports=function(e){return new Promise((function(t,n){var d=e.data,h=e.headers,p=e.responseType;i.isFormData(d)&&delete h["Content-Type"];var f=new XMLHttpRequest;if(e.auth){var g=e.auth.username||"",m=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";h.Authorization="Basic "+btoa(g+":"+m)}var _=a(e.baseURL,e.url);function v(){if(f){var i="getAllResponseHeaders"in f?c(f.getAllResponseHeaders()):null,o=p&&"text"!==p&&"json"!==p?f.response:f.responseText,s={data:o,status:f.status,statusText:f.statusText,headers:i,config:e,request:f};r(t,n,s),f=null}}if(f.open(e.method.toUpperCase(),s(_,e.params,e.paramsSerializer),!0),f.timeout=e.timeout,"onloadend"in f?f.onloadend=v:f.onreadystatechange=function(){f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))&&setTimeout(v)},f.onabort=function(){f&&(n(u("Request aborted",e,"ECONNABORTED",f)),f=null)},f.onerror=function(){n(u("Network Error",e,null,f)),f=null},f.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(u(t,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",f)),f=null},i.isStandardBrowserEnv()){var y=(e.withCredentials||l(_))&&e.xsrfCookieName?o.read(e.xsrfCookieName):void 0;y&&(h[e.xsrfHeaderName]=y)}"setRequestHeader"in f&&i.forEach(h,(function(e,t){"undefined"===typeof d&&"content-type"===t.toLowerCase()?delete h[t]:f.setRequestHeader(t,e)})),i.isUndefined(e.withCredentials)||(f.withCredentials=!!e.withCredentials),p&&"json"!==p&&(f.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&f.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){f&&(f.abort(),n(e),f=null)})),d||(d=null),f.send(d)}))}},b575:function(e,t,n){var i,r,o,s,a,c,l,u,d=n("da84"),h=n("0366"),p=n("06cf").f,f=n("2cf4").set,g=n("1cdc"),m=n("d4c3"),_=n("a4b4"),v=n("605d"),y=d.MutationObserver||d.WebKitMutationObserver,C=d.document,E=d.process,b=d.Promise,T=p(d,"queueMicrotask"),S=T&&T.value;S||(i=function(){var e,t;v&&(e=E.domain)&&e.exit();while(r){t=r.fn,r=r.next;try{t()}catch(n){throw r?s():o=void 0,n}}o=void 0,e&&e.enter()},g||v||_||!y||!C?!m&&b&&b.resolve?(l=b.resolve(void 0),l.constructor=b,u=h(l.then,l),s=function(){u(i)}):v?s=function(){E.nextTick(i)}:(f=h(f,d),s=function(){f(i)}):(a=!0,c=C.createTextNode(""),new y(i).observe(c,{characterData:!0}),s=function(){c.data=a=!a})),e.exports=S||function(e){var t={fn:e,next:void 0};o&&(o.next=t),r||(r=t,s()),o=t}},b622:function(e,t,n){var i=n("da84"),r=n("5692"),o=n("1a2d"),s=n("90e3"),a=n("4930"),c=n("fdbf"),l=r("wks"),u=i.Symbol,d=u&&u["for"],h=c?u:u&&u.withoutSetter||s;e.exports=function(e){if(!o(l,e)||!a&&"string"!=typeof l[e]){var t="Symbol."+e;a&&o(u,e)?l[e]=u[e]:l[e]=c&&d?d(t):h(t)}return l[e]}},b64b:function(e,t,n){var i=n("23e7"),r=n("7b0b"),o=n("df75"),s=n("d039"),a=s((function(){o(1)}));i({target:"Object",stat:!0,forced:a},{keys:function(e){return o(r(e))}})},b727:function(e,t,n){var i=n("0366"),r=n("e330"),o=n("44ad"),s=n("7b0b"),a=n("07fa"),c=n("65f0"),l=r([].push),u=function(e){var t=1==e,n=2==e,r=3==e,u=4==e,d=6==e,h=7==e,p=5==e||d;return function(f,g,m,_){for(var v,y,C=s(f),E=o(C),b=i(g,m),T=a(E),S=0,R=_||c,I=t?R(f,T):n||h?R(f,0):void 0;T>S;S++)if((p||S in E)&&(v=E[S],y=b(v,S,C),e))if(t)I[S]=y;else if(y)switch(e){case 3:return!0;case 5:return v;case 6:return S;case 2:l(I,v)}else switch(e){case 4:return!1;case 7:l(I,v)}return d?-1:r||u?u:I}};e.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterReject:u(7)}},b9c7:function(e,t,n){n("e507"),e.exports=n("5524").Object.assign},ba01:function(e,t,n){e.exports=n("051b")},bc3a:function(e,t,n){e.exports=n("cee4")},c04e:function(e,t,n){var i=n("da84"),r=n("c65b"),o=n("861d"),s=n("d9b5"),a=n("dc4a"),c=n("485a"),l=n("b622"),u=i.TypeError,d=l("toPrimitive");e.exports=function(e,t){if(!o(e)||s(e))return e;var n,i=a(e,d);if(i){if(void 0===t&&(t="default"),n=r(i,e,t),!o(n)||s(n))return n;throw u("Can't convert object to primitive value")}return void 0===t&&(t="number"),c(e,t)}},c098:function(e,t,n){e.exports=n("d4af")},c284:function(e,t,n){e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=90)}({0:function(e,t,n){"use strict";function i(e,t,n,i,r,o,s,a){var c,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),i&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=c):r&&(c=a?function(){r.call(this,this.$root.$options.shadowRoot)}:r),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}n.d(t,"a",(function(){return i}))},90:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-progress",class:["el-progress--"+e.type,e.status?"is-"+e.status:"",{"el-progress--without-text":!e.showText,"el-progress--text-inside":e.textInside}],attrs:{role:"progressbar","aria-valuenow":e.percentage,"aria-valuemin":"0","aria-valuemax":"100"}},["line"===e.type?n("div",{staticClass:"el-progress-bar"},[n("div",{staticClass:"el-progress-bar__outer",style:{height:e.strokeWidth+"px"}},[n("div",{staticClass:"el-progress-bar__inner",style:e.barStyle},[e.showText&&e.textInside?n("div",{staticClass:"el-progress-bar__innerText"},[e._v(e._s(e.content))]):e._e()])])]):n("div",{staticClass:"el-progress-circle",style:{height:e.width+"px",width:e.width+"px"}},[n("svg",{attrs:{viewBox:"0 0 100 100"}},[n("path",{staticClass:"el-progress-circle__track",style:e.trailPathStyle,attrs:{d:e.trackPath,stroke:"#e5e9f2","stroke-width":e.relativeStrokeWidth,fill:"none"}}),n("path",{staticClass:"el-progress-circle__path",style:e.circlePathStyle,attrs:{d:e.trackPath,stroke:e.stroke,fill:"none","stroke-linecap":e.strokeLinecap,"stroke-width":e.percentage?e.relativeStrokeWidth:0}})])]),e.showText&&!e.textInside?n("div",{staticClass:"el-progress__text",style:{fontSize:e.progressTextSize+"px"}},[e.status?n("i",{class:e.iconClass}):[e._v(e._s(e.content))]],2):e._e()])},r=[];i._withStripped=!0;var o={name:"ElProgress",props:{type:{type:String,default:"line",validator:function(e){return["line","circle","dashboard"].indexOf(e)>-1}},percentage:{type:Number,default:0,required:!0,validator:function(e){return e>=0&&e<=100}},status:{type:String,validator:function(e){return["success","exception","warning"].indexOf(e)>-1}},strokeWidth:{type:Number,default:6},strokeLinecap:{type:String,default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:[String,Array,Function],default:""},format:Function},computed:{barStyle:function(){var e={};return e.width=this.percentage+"%",e.backgroundColor=this.getCurrentColor(this.percentage),e},relativeStrokeWidth:function(){return(this.strokeWidth/this.width*100).toFixed(1)},radius:function(){return"circle"===this.type||"dashboard"===this.type?parseInt(50-parseFloat(this.relativeStrokeWidth)/2,10):0},trackPath:function(){var e=this.radius,t="dashboard"===this.type;return"\n        M 50 50\n        m 0 "+(t?"":"-")+e+"\n        a "+e+" "+e+" 0 1 1 0 "+(t?"-":"")+2*e+"\n        a "+e+" "+e+" 0 1 1 0 "+(t?"":"-")+2*e+"\n        "},perimeter:function(){return 2*Math.PI*this.radius},rate:function(){return"dashboard"===this.type?.75:1},strokeDashoffset:function(){var e=-1*this.perimeter*(1-this.rate)/2;return e+"px"},trailPathStyle:function(){return{strokeDasharray:this.perimeter*this.rate+"px, "+this.perimeter+"px",strokeDashoffset:this.strokeDashoffset}},circlePathStyle:function(){return{strokeDasharray:this.perimeter*this.rate*(this.percentage/100)+"px, "+this.perimeter+"px",strokeDashoffset:this.strokeDashoffset,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease"}},stroke:function(){var e=void 0;if(this.color)e=this.getCurrentColor(this.percentage);else switch(this.status){case"success":e="#13ce66";break;case"exception":e="#ff4949";break;case"warning":e="#e6a23c";break;default:e="#20a0ff"}return e},iconClass:function(){return"warning"===this.status?"el-icon-warning":"line"===this.type?"success"===this.status?"el-icon-circle-check":"el-icon-circle-close":"success"===this.status?"el-icon-check":"el-icon-close"},progressTextSize:function(){return"line"===this.type?12+.4*this.strokeWidth:.111111*this.width+2},content:function(){return"function"===typeof this.format?this.format(this.percentage)||"":this.percentage+"%"}},methods:{getCurrentColor:function(e){return"function"===typeof this.color?this.color(e):"string"===typeof this.color?this.color:this.getLevelColor(e)},getLevelColor:function(e){for(var t=this.getColorArray().sort((function(e,t){return e.percentage-t.percentage})),n=0;n<t.length;n++)if(t[n].percentage>e)return t[n].color;return t[t.length-1].color},getColorArray:function(){var e=this.color,t=100/e.length;return e.map((function(e,n){return"string"===typeof e?{color:e,percentage:(n+1)*t}:e}))}}},s=o,a=n(0),c=Object(a["a"])(s,i,r,!1,null,null,null);c.options.__file="packages/progress/src/progress.vue";var l=c.exports;l.install=function(e){e.component(l.name,l)};t["default"]=l}})},c345:function(e,t,n){"use strict";var i=n("c532"),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,s={};return e?(i.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=i.trim(e.substr(0,o)).toLowerCase(),n=i.trim(e.substr(o+1)),t){if(s[t]&&r.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([n]):s[t]?s[t]+", "+n:n}})),s):s}},c401:function(e,t,n){"use strict";var i=n("c532"),r=n("2444");e.exports=function(e,t,n){var o=this||r;return i.forEach(n,(function(n){e=n.call(o,e,t)})),e}},c430:function(e,t){e.exports=!1},c532:function(e,t,n){"use strict";var i=n("1d2b"),r=Object.prototype.toString;function o(e){return"[object Array]"===r.call(e)}function s(e){return"undefined"===typeof e}function a(e){return null!==e&&!s(e)&&null!==e.constructor&&!s(e.constructor)&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function c(e){return"[object ArrayBuffer]"===r.call(e)}function l(e){return"undefined"!==typeof FormData&&e instanceof FormData}function u(e){var t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function d(e){return"string"===typeof e}function h(e){return"number"===typeof e}function p(e){return null!==e&&"object"===typeof e}function f(e){if("[object Object]"!==r.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function g(e){return"[object Date]"===r.call(e)}function m(e){return"[object File]"===r.call(e)}function _(e){return"[object Blob]"===r.call(e)}function v(e){return"[object Function]"===r.call(e)}function y(e){return p(e)&&v(e.pipe)}function C(e){return"undefined"!==typeof URLSearchParams&&e instanceof URLSearchParams}function E(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function b(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)}function T(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),o(e))for(var n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(null,e[r],r,e)}function S(){var e={};function t(t,n){f(e[n])&&f(t)?e[n]=S(e[n],t):f(t)?e[n]=S({},t):o(t)?e[n]=t.slice():e[n]=t}for(var n=0,i=arguments.length;n<i;n++)T(arguments[n],t);return e}function R(e,t,n){return T(t,(function(t,r){e[r]=n&&"function"===typeof t?i(t,n):t})),e}function I(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}e.exports={isArray:o,isArrayBuffer:c,isBuffer:a,isFormData:l,isArrayBufferView:u,isString:d,isNumber:h,isObject:p,isPlainObject:f,isUndefined:s,isDate:g,isFile:m,isBlob:_,isFunction:v,isStream:y,isURLSearchParams:C,isStandardBrowserEnv:b,forEach:T,merge:S,extend:R,trim:E,stripBOM:I}},c56a:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!e||!t)throw new Error("instance & callback is required");var r=!1,o=function(){r||(r=!0,t&&t.apply(null,arguments))};i?e.$once("after-leave",o):e.$on("after-leave",o),setTimeout((function(){o()}),n+100)}},c65b:function(e,t){var n=Function.prototype.call;e.exports=n.bind?n.bind(n):function(){return n.apply(n,arguments)}},c6b6:function(e,t,n){var i=n("e330"),r=i({}.toString),o=i("".slice);e.exports=function(e){return o(r(e),8,-1)}},c6cd:function(e,t,n){var i=n("da84"),r=n("ce4e"),o="__core-js_shared__",s=i[o]||r(o,{});e.exports=s},c8af:function(e,t,n){"use strict";var i=n("c532");e.exports=function(e,t){i.forEach(e,(function(n,i){i!==t&&i.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[i])}))}},c8ba:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(i){"object"===typeof window&&(n=window)}e.exports=n},c901:function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},ca84:function(e,t,n){var i=n("e330"),r=n("1a2d"),o=n("fc6a"),s=n("4d64").indexOf,a=n("d012"),c=i([].push);e.exports=function(e,t){var n,i=o(e),l=0,u=[];for(n in i)!r(a,n)&&r(i,n)&&c(u,n);while(t.length>l)r(i,n=t[l++])&&(~s(u,n)||c(u,n));return u}},cc12:function(e,t,n){var i=n("da84"),r=n("861d"),o=i.document,s=r(o)&&r(o.createElement);e.exports=function(e){return s?o.createElement(e):{}}},cc15:function(e,t,n){var i=n("b367")("wks"),r=n("8b1a"),o=n("ef08").Symbol,s="function"==typeof o,a=e.exports=function(e){return i[e]||(i[e]=s&&o[e]||(s?o:r)("Symbol."+e))};a.store=i},cca6:function(e,t,n){var i=n("23e7"),r=n("60da");i({target:"Object",stat:!0,forced:Object.assign!==r},{assign:r})},cdf9:function(e,t,n){var i=n("825a"),r=n("861d"),o=n("f069");e.exports=function(e,t){if(i(e),r(t)&&t.constructor===e)return t;var n=o.f(e),s=n.resolve;return s(t),n.promise}},ce4e:function(e,t,n){var i=n("da84"),r=Object.defineProperty;e.exports=function(e,t){try{r(i,e,{value:t,configurable:!0,writable:!0})}catch(n){i[e]=t}return t}},ce7a:function(e,t,n){var i=n("9c0e"),r=n("0983"),o=n("5a94")("IE_PROTO"),s=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=r(e),i(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},cee4:function(e,t,n){"use strict";var i=n("c532"),r=n("1d2b"),o=n("0a06"),s=n("4a7b"),a=n("2444");function c(e){var t=new o(e),n=r(o.prototype.request,t);return i.extend(n,o.prototype,t),i.extend(n,t),n}var l=c(a);l.Axios=o,l.create=function(e){return c(s(l.defaults,e))},l.Cancel=n("7a77"),l.CancelToken=n("8df4"),l.isCancel=n("2e67"),l.all=function(e){return Promise.all(e)},l.spread=n("0df6"),l.isAxiosError=n("5f02"),e.exports=l,e.exports.default=l},d010:function(e,t,n){"use strict";function i(e,t,n){this.$children.forEach((function(r){var o=r.$options.componentName;o===e?r.$emit.apply(r,[t].concat(n)):i.apply(r,[e,t].concat([n]))}))}t.__esModule=!0,t.default={methods:{dispatch:function(e,t,n){var i=this.$parent||this.$root,r=i.$options.componentName;while(i&&(!r||r!==e))i=i.$parent,i&&(r=i.$options.componentName);i&&i.$emit.apply(i,[t].concat(n))},broadcast:function(e,t,n){i.call(this,e,t,n)}}}},d012:function(e,t){e.exports={}},d039:function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},d066:function(e,t,n){var i=n("da84"),r=n("1626"),o=function(e){return r(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?o(i[e]):i[e]&&i[e][t]}},d16a:function(e,t,n){var i=n("fc5e"),r=Math.min;e.exports=function(e){return e>0?r(i(e),9007199254740991):0}},d1e7:function(e,t,n){"use strict";var i={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,o=r&&!i.call({1:2},1);t.f=o?function(e){var t=r(this,e);return!!t&&t.enumerable}:i},d28b:function(e,t,n){var i=n("746f");i("iterator")},d2bb:function(e,t,n){var i=n("e330"),r=n("825a"),o=n("3bbe");e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{e=i(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),e(n,[]),t=n instanceof Array}catch(s){}return function(n,i){return r(n),o(i),t?e(n,i):n.__proto__=i,n}}():void 0)},d340:function(module,exports,__webpack_require__){(function(e,t){module.exports=t()})(self,(function(){return(()=>{"use strict";var __webpack_modules__={"./node_modules/@rongcloud/engine/dist/index.esm.js":
/*!**********************************************************!*\
  !*** ./node_modules/@rongcloud/engine/dist/index.esm.js ***!
  \**********************************************************/(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "AEngine": () => (/* binding */ vr),\n/* harmony export */   "ANavi": () => (/* binding */ mr),\n/* harmony export */   "APIContext": () => (/* binding */ is),\n/* harmony export */   "AppStorage": () => (/* binding */ R),\n/* harmony export */   "AssertRules": () => (/* binding */ He),\n/* harmony export */   "CONNECTION_TYPE": () => (/* binding */ t),\n/* harmony export */   "CPP_PROTOCAL_MSGTYPE_OPTION": () => (/* binding */ m),\n/* harmony export */   "CallLibMsgType": () => (/* binding */ qe),\n/* harmony export */   "ChatroomEntryType": () => (/* binding */ Ue),\n/* harmony export */   "ChatroomMemberChangeType": () => (/* binding */ Pe),\n/* harmony export */   "CometChannel": () => (/* binding */ yr),\n/* harmony export */   "ConnectResultCode": () => (/* binding */ Te),\n/* harmony export */   "ConnectionStatus": () => (/* binding */ Ie),\n/* harmony export */   "ConversationType": () => (/* binding */ j),\n/* harmony export */   "DelayTimer": () => (/* binding */ Et),\n/* harmony export */   "ErrorCode": () => (/* binding */ Ee),\n/* harmony export */   "EventEmitter": () => (/* binding */ ge),\n/* harmony export */   "FileType": () => (/* binding */ W),\n/* harmony export */   "HttpMethod": () => (/* binding */ pr),\n/* harmony export */   "IM_COMET_PULLMSG_TIMEOUT": () => (/* binding */ y),\n/* harmony export */   "IM_PING_INTERVAL_TIME": () => (/* binding */ d),\n/* harmony export */   "IM_PING_MIN_TIMEOUT": () => (/* binding */ p),\n/* harmony export */   "IM_PING_TIMEOUT": () => (/* binding */ f),\n/* harmony export */   "IM_SIGNAL_TIMEOUT": () => (/* binding */ l),\n/* harmony export */   "LiveRole": () => (/* binding */ ke),\n/* harmony export */   "LiveType": () => (/* binding */ Ve),\n/* harmony export */   "LogLevel": () => (/* binding */ A),\n/* harmony export */   "LogType": () => (/* binding */ U),\n/* harmony export */   "Logger": () => (/* binding */ fe),\n/* harmony export */   "MAX_MESSAGE_CONTENT_BYTES": () => (/* binding */ _),\n/* harmony export */   "MINI_COMET_CONNECT_URIS": () => (/* binding */ h),\n/* harmony export */   "MINI_SOCKET_CONNECT_URIS": () => (/* binding */ c),\n/* harmony export */   "MentionedType": () => (/* binding */ we),\n/* harmony export */   "MessageBlockType": () => (/* binding */ xe),\n/* harmony export */   "MessageDirection": () => (/* binding */ ye),\n/* harmony export */   "MessageType": () => (/* binding */ Re),\n/* harmony export */   "NAVI_CACHE_DURATION": () => (/* binding */ r),\n/* harmony export */   "NAVI_REQ_TIMEOUT": () => (/* binding */ s),\n/* harmony export */   "NotificationStatus": () => (/* binding */ Ne),\n/* harmony export */   "PING_REQ_TIMEOUT": () => (/* binding */ o),\n/* harmony export */   "PUBLIC_CLOUD_NAVI_URIS": () => (/* binding */ u),\n/* harmony export */   "PluginContext": () => (/* binding */ Wr),\n/* harmony export */   "RCAssertError": () => (/* binding */ $e),\n/* harmony export */   "RTCApiType": () => (/* binding */ Be),\n/* harmony export */   "RTCIdentityChangeType": () => (/* binding */ Fe),\n/* harmony export */   "RTCJoinType": () => (/* binding */ Ke),\n/* harmony export */   "RTCMode": () => (/* binding */ De),\n/* harmony export */   "RTCPluginContext": () => (/* binding */ Jr),\n/* harmony export */   "ReceivedStatus": () => (/* binding */ i),\n/* harmony export */   "SEND_MESSAGE_TYPE_OPTION": () => (/* binding */ E),\n/* harmony export */   "STATUS_MESSAGE": () => (/* binding */ I),\n/* harmony export */   "STORAGE_ROOT_KEY": () => (/* binding */ v),\n/* harmony export */   "TagChangeType": () => (/* binding */ ns),\n/* harmony export */   "UploadMethod": () => (/* binding */ Me),\n/* harmony export */   "VersionManage": () => (/* binding */ je),\n/* harmony export */   "WEB_SOCKET_TIMEOUT": () => (/* binding */ a),\n/* harmony export */   "WebSocketChannel": () => (/* binding */ _r),\n/* harmony export */   "appendUrl": () => (/* binding */ k),\n/* harmony export */   "assert": () => (/* binding */ et),\n/* harmony export */   "cloneByJSON": () => (/* binding */ pt),\n/* harmony export */   "forEach": () => (/* binding */ ct),\n/* harmony export */   "formatConnectResponseCode": () => (/* binding */ yt),\n/* harmony export */   "getBrowser": () => (/* binding */ _t),\n/* harmony export */   "getMimeKey": () => (/* binding */ rt),\n/* harmony export */   "getUploadFileName": () => (/* binding */ it),\n/* harmony export */   "indexOf": () => (/* binding */ lt),\n/* harmony export */   "isArray": () => (/* binding */ X),\n/* harmony export */   "isArrayBuffer": () => (/* binding */ $),\n/* harmony export */   "isBoolean": () => (/* binding */ z),\n/* harmony export */   "isFunction": () => (/* binding */ ie),\n/* harmony export */   "isHttpUrl": () => (/* binding */ oe),\n/* harmony export */   "isInObject": () => (/* binding */ ft),\n/* harmony export */   "isInclude": () => (/* binding */ dt),\n/* harmony export */   "isNull": () => (/* binding */ se),\n/* harmony export */   "isNumber": () => (/* binding */ Z),\n/* harmony export */   "isObject": () => (/* binding */ ne),\n/* harmony export */   "isString": () => (/* binding */ J),\n/* harmony export */   "isUndefined": () => (/* binding */ re),\n/* harmony export */   "isValidChrmEntryKey": () => (/* binding */ at),\n/* harmony export */   "isValidChrmEntryValue": () => (/* binding */ ut),\n/* harmony export */   "isValidConversationType": () => (/* binding */ ue),\n/* harmony export */   "isValidFileType": () => (/* binding */ ce),\n/* harmony export */   "map": () => (/* binding */ ht),\n/* harmony export */   "notEmptyArray": () => (/* binding */ te),\n/* harmony export */   "notEmptyObject": () => (/* binding */ ae),\n/* harmony export */   "notEmptyString": () => (/* binding */ ee),\n/* harmony export */   "pushConfigsToJSON": () => (/* binding */ st),\n/* harmony export */   "pushJSONToConfigs": () => (/* binding */ ot),\n/* harmony export */   "todo": () => (/* binding */ P),\n/* harmony export */   "usingCppEngine": () => (/* binding */ gt),\n/* harmony export */   "validate": () => (/* binding */ tt),\n/* harmony export */   "version": () => (/* binding */ rs)\n/* harmony export */ });\nvar e;!function(e){e[e.READ=1]="READ",e[e.LISTENED=2]="LISTENED",e[e.DOWNLOADED=4]="DOWNLOADED",e[e.RETRIEVED=8]="RETRIEVED",e[e.UNREAD=0]="UNREAD"}(e||(e={}));var t,n,i=e,r=72e5,s=1e4,o=5e3,a=5e3,u=["https://nav.cn.ronghub.com","https://nav2-cn.ronghub.com"],c=["wsproxy.cn.ronghub.com","wsap-cn.ronghub.com"],h=["cometproxy-cn.ronghub.com","mini-cn.ronghub.com"],l=3e4,d=15e3,f=15e3,p=2e3,_=131072,y=45e3,v="RCV4-",E={"RC:TxtMsg":{isCounted:!0,isPersited:!0},"RC:ImgMsg":{isCounted:!0,isPersited:!0},"RC:VcMsg":{isCounted:!0,isPersited:!0},"RC:ImgTextMsg":{isCounted:!0,isPersited:!0},"RC:FileMsg":{isCounted:!0,isPersited:!0},"RC:HQVCMsg":{isCounted:!0,isPersited:!0},"RC:LBSMsg":{isCounted:!0,isPersited:!0},"RC:PSImgTxtMsg":{isCounted:!0,isPersited:!0},"RC:PSMultiImgTxtMsg":{isCounted:!0,isPersited:!0},"RCJrmf:RpMsg":{isCounted:!0,isPersited:!0},"RCJrmf:RpOpendMsg":{isCounted:!0,isPersited:!0},"RC:CombineMsg":{isCounted:!0,isPersited:!0},"RC:ReferenceMsg":{isCounted:!0,isPersited:!0},"RC:SightMsg":{isCounted:!0,isPersited:!0},"RC:GIFMsg":{isCounted:!0,isPersited:!0},"RC:InfoNtf":{isCounted:!1,isPersited:!0},"RC:ContactNtf":{isCounted:!1,isPersited:!0},"RC:ProfileNtf":{isCounted:!1,isPersited:!0},"RC:CmdNtf":{isCounted:!1,isPersited:!0},"RC:GrpNtf":{isCounted:!1,isPersited:!0},"RC:RcCmd":{isCounted:!1,isPersited:!0},"RC:CmdMsg":{isCounted:!1,isPersited:!1},"RC:TypSts":{isCounted:!1,isPersited:!1},"RC:PSCmd":{isCounted:!1,isPersited:!1},"RC:SRSMsg":{isCounted:!1,isPersited:!1},"RC:RRReqMsg":{isCounted:!1,isPersited:!1},"RC:RRRspMsg":{isCounted:!1,isPersited:!1},"RC:CsChaR":{isCounted:!1,isPersited:!1},"RC:CSCha":{isCounted:!1,isPersited:!1},"RC:CsEva":{isCounted:!1,isPersited:!1},"RC:CsContact":{isCounted:!1,isPersited:!1},"RC:CsHs":{isCounted:!1,isPersited:!1},"RC:CsHsR":{isCounted:!1,isPersited:!1},"RC:CsSp":{isCounted:!1,isPersited:!1},"RC:CsEnd":{isCounted:!1,isPersited:!1},"RC:CsUpdate":{isCounted:!1,isPersited:!1},"RC:ReadNtf":{isCounted:!1,isPersited:!1},"RC:chrmKVNotiMsg":{isCounted:!1,isPersited:!1},"RC:VCAccept":{isCounted:!1,isPersited:!1},"RC:VCRinging":{isCounted:!1,isPersited:!1},"RC:VCSummary":{isCounted:!1,isPersited:!1},"RC:VCHangup":{isCounted:!1,isPersited:!1},"RC:VCInvite":{isCounted:!1,isPersited:!1},"RC:VCModifyMedia":{isCounted:!1,isPersited:!1},"RC:VCModifyMem":{isCounted:!1,isPersited:!1},"RC:MsgExMsg":{isCounted:!1,isPersited:!1},"RC:RRMsg":{isCounted:!1,isPersited:!1},"RC:LogCmdMsg":{isCounted:!1,isPersited:!1},"RC:InterceptMsg":{isCounted:!1,isPersited:!1}},m={"RC:DizNtf":{isCounted:!1,isPersited:!1}},I=["RC:TypSts","RC:InterceptMsg"];!function(e){e.WEBSOCKET="websocket",e.COMET="comet"}(t||(t={}));var T=function(e){return n||(n={set:function(t,n){e.localStorage.setItem(t,JSON.stringify(n))},get:function(t){var n;try{n=JSON.parse(e.localStorage.getItem(t))}catch(e){n=null}return n},remove:function(t){return e.localStorage.removeItem(t)},getKeys:function(){var t=[];for(var n in e.localStorage)t.push(n);return t}}),n},C=function(){function e(e){this._caches={},e&&(this._caches=e)}return e.prototype.set=function(e,t){this._caches[e]=t},e.prototype.remove=function(e){var t=this.get(e);return delete this._caches[e],t},e.prototype.get=function(e){return this._caches[e]},e.prototype.getKeys=function(){var e=[];for(var t in this._caches)e.push(t);return e},e}(),R=function(){function e(e,t){var n,i=t?"RCV4-"+t:"RCV4-";this._rootStorage=T(e);var r=this._rootStorage.get(i)||{};this._cache=new C(((n={})[i]=r,n)),this._storageKey=i}return e.prototype._get=function(){var e=this._storageKey;return this._cache.get(e)||{}},e.prototype._set=function(e){var t=this._storageKey;e=e||{},this._cache.set(t,e),this._rootStorage.set(t,e)},e.prototype.set=function(e,t){var n=this._get();n[e]=t,this._set(n)},e.prototype.remove=function(e){var t=this._get();delete t[e],this._set(t)},e.prototype.clear=function(){var e=this._storageKey;this._rootStorage.remove(e),this._cache.remove(e)},e.prototype.get=function(e){return this._get()[e]},e.prototype.getKeys=function(){var e=this._get(),t=[];for(var n in e)t.push(n);return t},e.prototype.getValues=function(){return this._get()||{}},e}(),S=function(e,t){return(S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function N(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}S(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var O=function(){return(O=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function w(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{u(i.next(e))}catch(e){s(e)}}function a(e){try{u(i.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}u((i=i.apply(e,t||[])).next())}))}function b(e,t){var n,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function M(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e}var A,U,L=function(e){function t(t){return e.call(this,"TODO => "+t)||this}return N(t,e),t}(Error),P=function(e){return new L(e)},D=function(e,t,n){if(void 0===t||void 0===n)return e.toUpperCase();var i=e.slice(t,n);return e=e.replace(i,(function(e){return e.toUpperCase()}))},V=function(e,t){void 0===t&&(t="utf-8");var n,i=0;if("utf-16"===t)for(var r=0,s=e.length;r<s;r++)i+=(n=e.charCodeAt(r))<=65535?2:4;else for(r=0,s=e.length;r<s;r++)i+=(n=e.charCodeAt(r))<127?1:n<=2047?2:n<=65535?3:4;return i},k=function(e,t){if(e=e.replace(/\\?$/,""),!t)return e;var n=Object.keys(t).map((function(e){return e+"="+t[e]})).filter((function(e){return!!e}));return n.length?[e,n.join("&")].join("?"):e},x=function(e){return e.match(/\\d+(\\.\\d+){2}/)[0]};!function(e){e[e.LOG=0]="LOG",e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARN=2]="WARN",e[e.ERROR=3]="ERROR",e[e.FATAL=4]="FATAL",e[e.NONE=1e3]="NONE"}(A||(A={})),function(e){e.IM="IM",e.RTC="RTC"}(U||(U={}));var B="RC_Logs";function F(e){var t=e.target.result;1===e.oldVersion&&t.deleteObjectStore(B),function(e,t,n){var i;if(!e.objectStoreNames.contains(t)){var r=O({},n.objectStoreParams);i=e.createObjectStore(t,r),n.indexs&&n.indexs.length>0&&n.indexs.forEach((function(e){i.createIndex(e.indexName,e.key,{unique:e.unique})}))}}(t,B,{indexs:[{indexName:"time",key:"time",unique:!1}],objectStoreParams:{autoIncrement:!0}})}var K,q=function(){function e(){}return e.init=function(){if("undefined"!=typeof window&&window&&window.indexedDB){var t=window.indexedDB.open("RC_ENGINE_DB",2);t.onerror=function(e){console.warn("open indexDB request failed "+e.target.error)},t.onsuccess=function(t){e._db=t.target.result,e._db&&(e._db.onclose=function(t){var n;console.warn("The database "+(null===(n=e._db)||void 0===n?void 0:n.name)+" has unexpectedly closed.",t),e._db=null,e._instance=null},e._db.onerror=function(t){var n;console.warn("The database "+(null===(n=e._db)||void 0===n?void 0:n.name)+" has opening error.",t),e._db=null,e._instance=null},e._db.onabort=function(t){var n;console.warn("The database "+(null===(n=e._db)||void 0===n?void 0:n.name)+" has opening aborted.",t),e._db=null,e._instance=null}),e._instance=new e},t.onupgradeneeded=function(t){e._db=t.target.result,F(t)}}else console.debug("IndexDB is not currently supported in the environment!")},e.getInstance=function(){return e._instance},e.prototype.addList=function(t,n){return new Promise((function(i){if(e._db){var r=e._db.transaction([t],"readwrite"),s=r.objectStore(t);n.forEach((function(e){null==s||s.add(e)})),r.oncomplete=function(e){i(!0)},r.onerror=function(e){i(!1)}}else i(!1)}))},e.prototype.getRangeData=function(t,n,i,r){return new Promise((function(s){if(e._db){var o=e._db.transaction([t],"readwrite").objectStore(t),a=IDBKeyRange.bound(i,r),u=o.index(n),c=[],h=u.openCursor(a);h.onsuccess=function(e){var t=e.target.result;t?(c.push(t.value),t.continue()):s(c)},h.onerror=function(e){console.error(e),s([])}}else s([])}))},e.prototype.getCount=function(t,n){return new Promise((function(n){if(e._db){var i=e._db.transaction([t],"readonly").objectStore(t).count();i.onsuccess=function(){n(i.result)},i.onerror=function(e){console.error(e),n(0)}}else n(0)}))},e.prototype.removeFirstData=function(t,n,i){return new Promise((function(n){if(e._db){var r=e._db.transaction([t],"readwrite").objectStore(t),s=r.getAllKeys(IDBKeyRange.lowerBound(0),i);s.onsuccess=function(){var e=s.result;e.length>0&&(r.delete(IDBKeyRange.bound(e[0],e[e.length-1])).onsuccess=function(){n(!0)})}}else n(!1)}))},e._db=null,e}(),Y=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},H=function(){var e=Y();if(e=e.replace(/-/g,"")+"a",(e=function(e){var t="0123456789abcdefghigklmnopqrstuvwxyzABCDEFGHIGKLMNOPQRSTUVWXYZa0".split(""),n=t.length+1,i=+e,r=[];do{var s=i%n;i=(i-s)/n,r.unshift(t[s])}while(i);return r.join("")}(e=parseInt(e,16))).length>22&&(e=e.slice(0,22)),e.length<22)for(var t=22-e.length,n=0;n<t;n++)e+="0";return e};!function(e){e[e.NONE=0]="NONE",e[e.PRIVATE=1]="PRIVATE",e[e.DISCUSSION=2]="DISCUSSION",e[e.GROUP=3]="GROUP",e[e.CHATROOM=4]="CHATROOM",e[e.CUSTOMER_SERVICE=5]="CUSTOMER_SERVICE",e[e.SYSTEM=6]="SYSTEM",e[e.APP_PUBLIC_SERVICE=7]="APP_PUBLIC_SERVICE",e[e.PUBLIC_SERVICE=8]="PUBLIC_SERVICE",e[e.RTC_ROOM=12]="RTC_ROOM"}(K||(K={}));var G,j=K;!function(e){e[e.IMAGE=1]="IMAGE",e[e.AUDIO=2]="AUDIO",e[e.VIDEO=3]="VIDEO",e[e.FILE=4]="FILE",e[e.SIGHT=5]="SIGHT",e[e.COMBINE_HTML=6]="COMBINE_HTML"}(G||(G={}));var Q,W=G,J=function(e){return"string"==typeof e},z=function(e){return"boolean"==typeof e},Z=function(e){return"number"==typeof e&&!isNaN(e)},X=function(e){return-1!==Object.prototype.toString.call(e).indexOf("Array")},$=function(e){return"[object ArrayBuffer]"===Object.prototype.toString.call(e)},ee=function(e){return J(e)&&e.length>0},te=function(e){return X(e)&&e.length>0},ne=function(e){return"[object Object]"===Object.prototype.toString.call(e)},ie=function(e){return"[object Function]"===Object.prototype.toString.call(e)},re=function(e){return void 0===e||"[object Undefined]"===Object.prototype.toString.call(e)},se=function(e){return"[object Null]"===Object.prototype.toString.call(e)},oe=function(e){return J(e)&&/https?:\\/\\//.test(e)},ae=function(e){for(var t in e)return!0;return!1},ue=function(e){return Z(e)&&Object.prototype.hasOwnProperty.call(j,e)},ce=function(e){return Z(e)&&Object.prototype.hasOwnProperty.call(W,e)},he={};console&&((Q={})[A.DEBUG]=console.debug.bind(console),Q[A.INFO]=console.info.bind(console),Q[A.WARN]=console.warn.bind(console),Q[A.ERROR]=console.error.bind(console),Q[A.FATAL]=console.log.bind(console),he=Q);var le,de=function(e){return J(e)||Z(e)||re(e)||z(e)?e:e instanceof Error?JSON.stringify({name:e.name,message:e.message,stack:e.stack}):JSON.stringify(e)},fe=function(){function e(e,t,n){this.tag=e,this.type=t,this.initiator=n,this._outLevel=A.WARN,this.debug=this.log.bind(this,A.DEBUG),this.info=this.log.bind(this,A.INFO),this.warn=this.log.bind(this,A.WARN),this.error=this.log.bind(this,A.ERROR),this.fatal=this.log.bind(this,A.FATAL)}return e.init=function(t){e.userId=t},e.reset=function(){e.userId=""},e.prototype._defaultStdout=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];he[e]&&he[e].apply(he,M([t+":"],n))},e.prototype.__pushLocalLog=function(t,n,i){var r;r=this.type?this.type:["RCRTCLog","RCCall","RCRTC","RTC-A"].includes(this.tag)?U.RTC:U.IM;var s=Date.now();V(n)>=1e3&&(n=function(e,t,n){if(void 0===n&&(n="utf-8"),!e||!t)return"";var i="utf-8"===n?3:2,r=0,s=0,o="";for(s=0;s<e.length;s++){if(e.charCodeAt(s)>255?r+=i:r++,r>t)return o;o+=e.charAt(s)}return e}(n,1e3));var o=JSON.stringify({message:n,userId:e.userId}).replace(/"/g,\'""\'),a=/^[\\w]+-[\\w]+-[\\w]+?/.test(i)?i:(this.initiator||"L")+"-"+i+"-O",u={sessionId:e.sessionId,time:s,level:4-t,content:e.sessionId+","+Date.now()+","+r+","+(4-t)+","+a+\',"\'+o+\'"\\n\',userId:e.userId};e.databaseLogList.push(u),(e.databaseLogList.length>=100||t===A.FATAL)&&this.__insertLogIntoDatabase()},e.prototype.__insertLogIntoDatabase=function(){return w(this,void 0,void 0,(function(){var t,n,i;return b(this,(function(r){switch(r.label){case 0:return t=M([],e.databaseLogList),e.databaseLogList=[],(n=q.getInstance())?[4,n.addList(B,t)]:[3,3];case 1:return i=r.sent(),[4,n.getCount(B,"time")];case 2:return r.sent()>1e5&&n.removeFirstData(B,"time",2e3),[2,i];case 3:return[2,!1]}}))}))},e.prototype.setLogLevel=function(e){this._outLevel="number"!=typeof e?A.WARN:e},e.prototype.setLogStdout=function(e){this._logStdout=e},e.prototype.log=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(e>A.DEBUG&&this.__pushLocalLog(e,t.map(de).join(" "),this.tag),!(e<this._outLevel)){var i=(new Date).toISOString()+"["+this.tag+"]["+A[e]+"]",r=i+" - "+t.map(de).join(" ");this._logStdout?this._logStdout(e,r):this._stdout?this._stdout(e,r):this._defaultStdout.apply(this,M([e,i],t))}},e.prototype.reportLog=function(t,n,i){this.__pushLocalLog(4-t,i,n);var r=JSON.stringify({message:i}).replace(/"/g,\'""\');r=\'"\'+r+\'"\';var s={level:t,content:[e.sessionId,Date.now(),this.type,t,n,r].join()+"\\n"};e.realTimeLogList.push(s),e.realTimeLogList.length>=600&&(e.realTimeLogList=e.realTimeLogList.slice(-500))},e.prototype.set=function(e,t){this.warn("logger.set has being deprecated!")},e.prototype.setStdout=function(e){this._stdout=e},e.prototype.__clearRealTimeLog=function(){e.realTimeLogList=[]},e.databaseLogList=[],e.realTimeLogList=[],e.sessionId=H(),e.userId="",e}(),pe=new fe("RCLog"),ge=function(){function e(){this._map={}}return e.prototype.on=function(e,t,n){var i=this._map[e]||(this._map[e]=[]);i.some((function(e){return e.listener===t&&e.target===n}))||i.push({listener:t,target:n})},e.prototype.once=function(e,t,n){var i=this._map[e]||(this._map[e]=[]);i.some((function(e){return e.listener===t&&e.target===n}))||i.push({listener:t,target:n,once:!0})},e.prototype.off=function(e,t,n){var i=this._map[e];i&&((i=i.filter((function(e){return e.listener!==t||e.target!==n}))).length?this._map[e]=i:delete this._map[e])},e.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=this._map[e];if(i)for(var r=i.length-1;r>=0;r-=1){var s=i[r],o=s.target,a=s.once,u=s.listener;a&&i.splice(r,1);try{u.call.apply(u,M([o],t))}catch(e){pe.error(e)}}},e.prototype.removeAll=function(e){delete this._map[e]},e.prototype.clear=function(){Object.keys(this._map).forEach(this.removeAll,this)},e}();!function(e){e[e.SEND=1]="SEND",e[e.RECEIVE=2]="RECEIVE"}(le||(le={}));var _e,ye=le;!function(e){e[e.TIMEOUT=-1]="TIMEOUT",e[e.UNKNOWN=-2]="UNKNOWN",e[e.PARAMETER_ERROR=-3]="PARAMETER_ERROR",e[e.EXTRA_METHOD_UNDEFINED=-4]="EXTRA_METHOD_UNDEFINED",e[e.MAIN_PROCESS_ERROR=-5]="MAIN_PROCESS_ERROR",e[e.PARAMETER_CHANGED=-6]="PARAMETER_CHANGED",e[e.SUCCESS=0]="SUCCESS",e[e.RC_MSG_UNAUTHORIZED=20406]="RC_MSG_UNAUTHORIZED",e[e.RC_DISCUSSION_GROUP_ID_INVALID=20407]="RC_DISCUSSION_GROUP_ID_INVALID",e[e.SEND_FREQUENCY_TOO_FAST=20604]="SEND_FREQUENCY_TOO_FAST",e[e.NOT_IN_DISCUSSION=21406]="NOT_IN_DISCUSSION",e[e.FORBIDDEN_IN_GROUP=22408]="FORBIDDEN_IN_GROUP",e[e.RECALL_MESSAGE=25101]="RECALL_MESSAGE",e[e.NOT_IN_GROUP=22406]="NOT_IN_GROUP",e[e.NOT_IN_CHATROOM=23406]="NOT_IN_CHATROOM",e[e.FORBIDDEN_IN_CHATROOM=23408]="FORBIDDEN_IN_CHATROOM",e[e.RC_CHATROOM_USER_KICKED=23409]="RC_CHATROOM_USER_KICKED",e[e.RC_CHATROOM_NOT_EXIST=23410]="RC_CHATROOM_NOT_EXIST",e[e.RC_CHATROOM_IS_FULL=23411]="RC_CHATROOM_IS_FULL",e[e.RC_CHATROOM_PATAMETER_INVALID=23412]="RC_CHATROOM_PATAMETER_INVALID",e[e.CHATROOM_GET_HISTORYMSG_ERROR=23413]="CHATROOM_GET_HISTORYMSG_ERROR",e[e.CHATROOM_NOT_OPEN_HISTORYMSG_STORE=23414]="CHATROOM_NOT_OPEN_HISTORYMSG_STORE",e[e.CHATROOM_KV_EXCEED=23423]="CHATROOM_KV_EXCEED",e[e.CHATROOM_KV_OVERWRITE_INVALID=23424]="CHATROOM_KV_OVERWRITE_INVALID",e[e.CHATROOM_KV_STORE_NOT_OPEN=23426]="CHATROOM_KV_STORE_NOT_OPEN",e[e.CHATROOM_KEY_NOT_EXIST=23427]="CHATROOM_KEY_NOT_EXIST",e[e.SENSITIVE_SHIELD=21501]="SENSITIVE_SHIELD",e[e.SENSITIVE_REPLACE=21502]="SENSITIVE_REPLACE",e[e.JOIN_IN_DISCUSSION=21407]="JOIN_IN_DISCUSSION",e[e.CREATE_DISCUSSION=21408]="CREATE_DISCUSSION",e[e.INVITE_DICUSSION=21409]="INVITE_DICUSSION",e[e.GET_USERINFO_ERROR=23407]="GET_USERINFO_ERROR",e[e.REJECTED_BY_BLACKLIST=405]="REJECTED_BY_BLACKLIST",e[e.RC_NET_CHANNEL_INVALID=30001]="RC_NET_CHANNEL_INVALID",e[e.RC_NET_UNAVAILABLE=30002]="RC_NET_UNAVAILABLE",e[e.RC_MSG_RESP_TIMEOUT=30003]="RC_MSG_RESP_TIMEOUT",e[e.RC_HTTP_SEND_FAIL=30004]="RC_HTTP_SEND_FAIL",e[e.RC_HTTP_REQ_TIMEOUT=30005]="RC_HTTP_REQ_TIMEOUT",e[e.RC_HTTP_RECV_FAIL=30006]="RC_HTTP_RECV_FAIL",e[e.RC_NAVI_RESOURCE_ERROR=30007]="RC_NAVI_RESOURCE_ERROR",e[e.RC_NODE_NOT_FOUND=30008]="RC_NODE_NOT_FOUND",e[e.RC_DOMAIN_NOT_RESOLVE=30009]="RC_DOMAIN_NOT_RESOLVE",e[e.RC_SOCKET_NOT_CREATED=30010]="RC_SOCKET_NOT_CREATED",e[e.RC_SOCKET_DISCONNECTED=30011]="RC_SOCKET_DISCONNECTED",e[e.RC_PING_SEND_FAIL=30012]="RC_PING_SEND_FAIL",e[e.RC_PONG_RECV_FAIL=30013]="RC_PONG_RECV_FAIL",e[e.RC_MSG_SEND_FAIL=30014]="RC_MSG_SEND_FAIL",e[e.RC_MSG_CONTENT_EXCEED_LIMIT=30016]="RC_MSG_CONTENT_EXCEED_LIMIT",e[e.RC_CONN_ACK_TIMEOUT=31e3]="RC_CONN_ACK_TIMEOUT",e[e.RC_CONN_PROTO_VERSION_ERROR=31001]="RC_CONN_PROTO_VERSION_ERROR",e[e.RC_CONN_ID_REJECT=31002]="RC_CONN_ID_REJECT",e[e.RC_CONN_SERVER_UNAVAILABLE=31003]="RC_CONN_SERVER_UNAVAILABLE",e[e.RC_CONN_USER_OR_PASSWD_ERROR=31004]="RC_CONN_USER_OR_PASSWD_ERROR",e[e.RC_CONN_NOT_AUTHRORIZED=31005]="RC_CONN_NOT_AUTHRORIZED",e[e.RC_CONN_REDIRECTED=31006]="RC_CONN_REDIRECTED",e[e.RC_CONN_PACKAGE_NAME_INVALID=31007]="RC_CONN_PACKAGE_NAME_INVALID",e[e.RC_CONN_APP_BLOCKED_OR_DELETED=31008]="RC_CONN_APP_BLOCKED_OR_DELETED",e[e.RC_CONN_USER_BLOCKED=31009]="RC_CONN_USER_BLOCKED",e[e.RC_DISCONN_KICK=31010]="RC_DISCONN_KICK",e[e.RC_DISCONN_EXCEPTION=31011]="RC_DISCONN_EXCEPTION",e[e.RC_APP_AUTH_NOT_PASS=31026]="RC_APP_AUTH_NOT_PASS",e[e.RC_OTP_USED=31027]="RC_OTP_USED",e[e.RC_PLATFORM_ERROR=31028]="RC_PLATFORM_ERROR",e[e.RC_QUERY_ACK_NO_DATA=32001]="RC_QUERY_ACK_NO_DATA",e[e.RC_MSG_DATA_INCOMPLETE=32002]="RC_MSG_DATA_INCOMPLETE",e[e.BIZ_ERROR_CLIENT_NOT_INIT=33001]="BIZ_ERROR_CLIENT_NOT_INIT",e[e.BIZ_ERROR_DATABASE_ERROR=33002]="BIZ_ERROR_DATABASE_ERROR",e[e.BIZ_ERROR_INVALID_PARAMETER=33003]="BIZ_ERROR_INVALID_PARAMETER",e[e.BIZ_ERROR_NO_CHANNEL=33004]="BIZ_ERROR_NO_CHANNEL",e[e.BIZ_ERROR_RECONNECT_SUCCESS=33005]="BIZ_ERROR_RECONNECT_SUCCESS",e[e.BIZ_ERROR_CONNECTING=33006]="BIZ_ERROR_CONNECTING",e[e.MSG_ROAMING_SERVICE_UNAVAILABLE=33007]="MSG_ROAMING_SERVICE_UNAVAILABLE",e[e.MSG_INSERT_ERROR=33008]="MSG_INSERT_ERROR",e[e.MSG_DEL_ERROR=33009]="MSG_DEL_ERROR",e[e.TAG_EXISTS=33101]="TAG_EXISTS",e[e.TAG_NOT_EXIST=33100]="TAG_NOT_EXIST",e[e.NO_TAG_IN_CONVER=33102]="NO_TAG_IN_CONVER",e[e.CONVER_REMOVE_ERROR=34001]="CONVER_REMOVE_ERROR",e[e.CONVER_GETLIST_ERROR=34002]="CONVER_GETLIST_ERROR",e[e.CONVER_SETOP_ERROR=34003]="CONVER_SETOP_ERROR",e[e.CONVER_TOTAL_UNREAD_ERROR=34004]="CONVER_TOTAL_UNREAD_ERROR",e[e.CONVER_TYPE_UNREAD_ERROR=34005]="CONVER_TYPE_UNREAD_ERROR",e[e.CONVER_ID_TYPE_UNREAD_ERROR=34006]="CONVER_ID_TYPE_UNREAD_ERROR",e[e.CONVER_CLEAR_ERROR=34007]="CONVER_CLEAR_ERROR",e[e.EXPANSION_LIMIT_EXCEET=34010]="EXPANSION_LIMIT_EXCEET",e[e.MESSAGE_KV_NOT_SUPPORT=34008]="MESSAGE_KV_NOT_SUPPORT",e[e.CLEAR_HIS_TIME_ERROR=34011]="CLEAR_HIS_TIME_ERROR",e[e.CONVER_OUT_LIMIT_ERROR=34013]="CONVER_OUT_LIMIT_ERROR",e[e.CONVER_GET_ERROR=35021]="CONVER_GET_ERROR",e[e.GROUP_SYNC_ERROR=35001]="GROUP_SYNC_ERROR",e[e.GROUP_MATCH_ERROR=35002]="GROUP_MATCH_ERROR",e[e.READ_RECEIPT_ERROR=35003]="READ_RECEIPT_ERROR",e[e.PACKAGE_ENVIRONMENT_ERROR=35006]="PACKAGE_ENVIRONMENT_ERROR",e[e.CAN_NOT_RECONNECT=35007]="CAN_NOT_RECONNECT",e[e.SERVER_UNAVAILABLE=35008]="SERVER_UNAVAILABLE",e[e.HOSTNAME_ERROR=35009]="HOSTNAME_ERROR",e[e.HAS_OHTER_SAME_CLIENT_ON_LINE=35010]="HAS_OHTER_SAME_CLIENT_ON_LINE",e[e.UPLOAD_FILE_FAILED=35020]="UPLOAD_FILE_FAILED",e[e.CHATROOM_ID_ISNULL=36001]="CHATROOM_ID_ISNULL",e[e.CHARTOOM_JOIN_ERROR=36002]="CHARTOOM_JOIN_ERROR",e[e.CHATROOM_HISMESSAGE_ERROR=36003]="CHATROOM_HISMESSAGE_ERROR",e[e.CHATROOM_KV_NOT_FOUND=36004]="CHATROOM_KV_NOT_FOUND",e[e.BLACK_ADD_ERROR=37001]="BLACK_ADD_ERROR",e[e.BLACK_GETSTATUS_ERROR=37002]="BLACK_GETSTATUS_ERROR",e[e.BLACK_REMOVE_ERROR=37003]="BLACK_REMOVE_ERROR",e[e.DRAF_GET_ERROR=38001]="DRAF_GET_ERROR",e[e.DRAF_SAVE_ERROR=38002]="DRAF_SAVE_ERROR",e[e.DRAF_REMOVE_ERROR=38003]="DRAF_REMOVE_ERROR",e[e.SUBSCRIBE_ERROR=39001]="SUBSCRIBE_ERROR",e[e.NOT_SUPPORT=39002]="NOT_SUPPORT",e[e.QNTKN_FILETYPE_ERROR=41001]="QNTKN_FILETYPE_ERROR",e[e.QNTKN_GET_ERROR=41002]="QNTKN_GET_ERROR",e[e.COOKIE_ENABLE=51001]="COOKIE_ENABLE",e[e.GET_MESSAGE_BY_ID_ERROR=61001]="GET_MESSAGE_BY_ID_ERROR",e[e.HAVNODEVICEID=24001]="HAVNODEVICEID",e[e.DEVICEIDISHAVE=24002]="DEVICEIDISHAVE",e[e.FEILD=24009]="FEILD",e[e.VOIPISNULL=24013]="VOIPISNULL",e[e.NOENGINETYPE=24010]="NOENGINETYPE",e[e.NULLCHANNELNAME=24011]="NULLCHANNELNAME",e[e.VOIPDYANMICERROR=24012]="VOIPDYANMICERROR",e[e.NOVOIP=24014]="NOVOIP",e[e.INTERNALERRROR=24015]="INTERNALERRROR",e[e.VOIPCLOSE=24016]="VOIPCLOSE",e[e.CLOSE_BEFORE_OPEN=51001]="CLOSE_BEFORE_OPEN",e[e.ALREADY_IN_USE=51002]="ALREADY_IN_USE",e[e.INVALID_CHANNEL_NAME=51003]="INVALID_CHANNEL_NAME",e[e.VIDEO_CONTAINER_IS_NULL=51004]="VIDEO_CONTAINER_IS_NULL",e[e.DELETE_MESSAGE_ID_IS_NULL=61001]="DELETE_MESSAGE_ID_IS_NULL",e[e.CANCEL=1]="CANCEL",e[e.REJECT=2]="REJECT",e[e.HANGUP=3]="HANGUP",e[e.BUSYLINE=4]="BUSYLINE",e[e.NO_RESPONSE=5]="NO_RESPONSE",e[e.ENGINE_UN_SUPPORTED=6]="ENGINE_UN_SUPPORTED",e[e.NETWORK_ERROR=7]="NETWORK_ERROR",e[e.REMOTE_CANCEL=11]="REMOTE_CANCEL",e[e.REMOTE_REJECT=12]="REMOTE_REJECT",e[e.REMOTE_HANGUP=13]="REMOTE_HANGUP",e[e.REMOTE_BUSYLINE=14]="REMOTE_BUSYLINE",e[e.REMOTE_NO_RESPONSE=15]="REMOTE_NO_RESPONSE",e[e.REMOTE_ENGINE_UN_SUPPORTED=16]="REMOTE_ENGINE_UN_SUPPORTED",e[e.REMOTE_NETWORK_ERROR=17]="REMOTE_NETWORK_ERROR",e[e.VOIP_NOT_AVALIABLE=18]="VOIP_NOT_AVALIABLE",e[e.CHATROOM_KV_STORE_NOT_ALL_SUCCESS=23428]="CHATROOM_KV_STORE_NOT_ALL_SUCCESS",e[e.CHATROOM_KV_STORE_OUT_LIMIT=23429]="CHATROOM_KV_STORE_OUT_LIMIT"}(_e||(_e={}));var ve,Ee=_e;!function(e){e[e.CONNECTED=0]="CONNECTED",e[e.CONNECTING=1]="CONNECTING",e[e.DISCONNECTED=2]="DISCONNECTED",e[e.NETWORK_UNAVAILABLE=3]="NETWORK_UNAVAILABLE",e[e.CONNECTION_CLOSED=4]="CONNECTION_CLOSED",e[e.KICKED_OFFLINE_BY_OTHER_CLIENT=6]="KICKED_OFFLINE_BY_OTHER_CLIENT",e[e.WEBSOCKET_UNAVAILABLE=7]="WEBSOCKET_UNAVAILABLE",e[e.WEBSOCKET_ERROR=8]="WEBSOCKET_ERROR",e[e.BLOCKED=9]="BLOCKED",e[e.DOMAIN_INCORRECT=12]="DOMAIN_INCORRECT",e[e.DISCONNECT_BY_SERVER=13]="DISCONNECT_BY_SERVER",e[e.REDIRECT=14]="REDIRECT",e[e.APPKEY_IS_FAKE=20]="APPKEY_IS_FAKE",e[e.ULTRALIMIT=1101]="ULTRALIMIT",e[e.REQUEST_NAVI=201]="REQUEST_NAVI",e[e.RESPONSE_NAVI=202]="RESPONSE_NAVI",e[e.RESPONSE_NAVI_ERROR=203]="RESPONSE_NAVI_ERROR",e[e.RESPONSE_NAVI_TIMEOUT=204]="RESPONSE_NAVI_TIMEOUT"}(ve||(ve={}));var me,Ie=ve,Te={ACCEPTED:0,UNACCEPTABLE_PROTOCOL_VERSION:1,IDENTIFIER_REJECTED:2,SERVER_UNAVAILABLE:3,TOKEN_INCORRECT:4,NOT_AUTHORIZED:5,REDIRECT:6,PACKAGE_ERROR:7,APP_BLOCK_OR_DELETE:8,BLOCK:9,TOKEN_EXPIRE:10,DEVICE_ERROR:11,HOSTNAME_ERROR:12,HASOHTERSAMECLIENTONLINE:13,IN_OTHER_CLUSTER:15,APP_AUTH_NOT_PASS:16,OTP_USED:17,PLATFORM_ERROR:18};!function(e){e.TextMessage="RC:TxtMsg",e.VOICE="RC:VcMsg",e.HQ_VOICE="RC:HQVCMsg",e.IMAGE="RC:ImgMsg",e.GIF="RC:GIFMsg",e.RICH_CONTENT="RC:ImgTextMsg",e.LOCATION="RC:LBSMsg",e.FILE="RC:FileMsg",e.SIGHT="RC:SightMsg",e.COMBINE="RC:CombineMsg",e.CHRM_KV_NOTIFY="RC:chrmKVNotiMsg",e.LOG_COMMAND="RC:LogCmdMsg",e.EXPANSION_NOTIFY="RC:MsgExMsg",e.REFERENCE="RC:ReferenceMsg",e.RECALL="RC:RcCmd",e.READ_RECEIPT="RC:ReadNtf",e.READ_RECEIPT_REQUEST="RC:RRReqMsg",e.READ_RECEIPT_RESPONSE="RC:RRRspMsg",e.SYNC_READ_STATUS="RC:SRSMsg",e.GROUP_READ_RECEIPT_REQUEST="RC:RRMsg",e.CHATROOM_JOIN="RC:ChrmJoinNtf",e.CHATROOM_LEFT="RC:ChrmQuitNtf",e.CHATROOM_MERGE_CHANGE="RC:ChrmMemChange",e.TYPING_STATUS="RC:TypSts",e.INTERCEPT="RC:InterceptMsg"}(me||(me={}));var Ce,Re=me;!function(e){e[e.OPEN=1]="OPEN",e[e.CLOSE=2]="CLOSE"}(Ce||(Ce={}));var Se,Ne=Ce;!function(e){e[e.ALL=1]="ALL",e[e.SINGAL=2]="SINGAL"}(Se||(Se={}));var Oe,we=Se;!function(e){e[e.QINIU=1]="QINIU",e[e.ALI=2]="ALI",e[e.AWS=3]="AWS",e[e.STC=4]="STC"}(Oe||(Oe={}));var be,Me=Oe;!function(e){e[e.UPDATE=1]="UPDATE",e[e.DELETE=2]="DELETE"}(be||(be={}));var Ae,Ue=be;!function(e){e[e.QUIT=0]="QUIT",e[e.JOIN=1]="JOIN"}(Ae||(Ae={}));var Le,Pe=Ae;!function(e){\n/*!\n    全局敏感词：命中了融云内置的全局敏感词\n   */\ne[e.GLOBAL=1]="GLOBAL",\n/*!\n     自定义敏感词拦截：命中了客户在融云自定义的敏感词\n    */\ne[e.CUSTOM=2]="CUSTOM",\n/*!\n     第三方审核拦截：命中了第三方（数美）或模板路由决定不下发的状态\n    */\ne[e.THIRD_PARTY=3]="THIRD_PARTY"}(Le||(Le={}));var De,Ve,ke,xe=Le;!function(e){e[e.RTC=0]="RTC",e[e.LIVE=2]="LIVE"}(De||(De={})),function(e){e[e.AUDIO_AND_VIDEO=0]="AUDIO_AND_VIDEO",e[e.AUDIO=1]="AUDIO"}(Ve||(Ve={})),function(e){e[e.ANCHOR=1]="ANCHOR",e[e.AUDIENCE=2]="AUDIENCE"}(ke||(ke={}));var Be,Fe,Ke,qe={"RC:VCAccept":"RC:VCAccept","RC:VCRinging":"RC:VCRinging","RC:VCSummary":"RC:VCSummary","RC:VCHangup":"RC:VCHangup","RC:VCInvite":"RC:VCInvite","RC:VCModifyMedia":"RC:VCModifyMedia","RC:VCModifyMem":"RC:VCModifyMem"};!function(e){e[e.ROOM=1]="ROOM",e[e.PERSON=2]="PERSON"}(Be||(Be={})),function(e){e[e.AnchorToViewer=1]="AnchorToViewer",e[e.ViewerToAnchor=2]="ViewerToAnchor"}(Fe||(Fe={})),function(e){e[e.KICK=0]="KICK",e[e.REFUSE=1]="REFUSE",e[e.COEXIST=2]="COEXIST"}(Ke||(Ke={}));var Ye,He,Ge={engine:"5.1.2"},je=function(){function e(){}return e.add=function(e,t){Ge[e]=t},e.validEngine=function(e){var t=e.match(/\\d+\\.\\d+\\.\\d+/);if(!t)return pe.warn("The validation engine version \'"+e+"\' is invalid!"),!1;var n=t[0].split(".").map((function(e){return e.padStart(3,"0")})).join("");return Ge.engine.match(/\\d+\\.\\d+\\.\\d+/)[0].split(".").map((function(e){return e.padStart(3,"0")})).join("")>=n},e.getInfo=function(){return Ge},e}();!function(e){e[e.STRING=0]="STRING",e[e.ONLY_STRING=1]="ONLY_STRING",e[e.NUMBER=2]="NUMBER",e[e.BOOLEAN=3]="BOOLEAN",e[e.OBJECT=4]="OBJECT",e[e.ARRAY=5]="ARRAY",e[e.CALLBACK=6]="CALLBACK",e[e.CHANNEL_ID=7]="CHANNEL_ID"}(He||(He={}));var Qe,We,Je,ze,Ze,Xe=((Ye={})[He.STRING]=ee,Ye[He.ONLY_STRING]=J,Ye[He.NUMBER]=Z,Ye[He.BOOLEAN]=function(e){return"boolean"==typeof e},Ye[He.OBJECT]=ne,Ye[He.ARRAY]=X,Ye[He.CALLBACK]=function(e){var t=!0;return ne(e)||(t=!1),(e=e||{}).onSuccess&&!ie(e.onSuccess)&&(t=!1),e.onError&&!ie(e.onError)&&(t=!1),t},Ye[He.CHANNEL_ID]=function(e){var t=!1;return J(e)&&!/_/g.test(e)&&e.length<=20&&(t=!0),t},Ye),$e=function(e){function t(t){var n=e.call(this,t)||this;return n.name="RCAssertError",n}return N(t,e),t}(Error),et=function(e,t,n,i){if(void 0===i&&(i=!1),!tt(e,t,n,i))throw new $e("\'"+e+"\' is invalid: "+JSON.stringify(t))},tt=function(e,t,n,i){void 0===i&&(i=!1),n=Xe[n]||n;var r=i&&!n(t)||!i&&!(re(t)||null===t||n(t));return r&&pe.error("\'"+e+"\' is invalid: "+JSON.stringify(t)),!r},nt=function(e){if(!ne(e)||void 0===e.low||void 0===e.high)return e;var t=e.low;return t<0&&(t+=4294967296),t=t.toString(16),parseInt(e.high.toString(16)+"00000000".replace(new RegExp("0{"+t.length+"}$"),t),16)},it=function(e,t){var n=Math.floor(1e3*Math.random()%1e4),i=Y(),r=function(e){e=e||"-";var t=new Date;return""+t.getFullYear()+e+(t.getMonth()+1)+e+t.getDate()}(),s=(new Date).getTime(),o="";if(t){var a=t.split(".");o="."+a[a.length-1]}return e+"__RC-"+r+"_"+n+"_"+s+i+o},rt=function(e){var t="application/octet-stream";switch(e){case W.IMAGE:t="image/jpeg";break;case W.AUDIO:t="audio/amr";break;case W.VIDEO:t="video/3gpp";break;case W.SIGHT:t="video/mpeg4";break;case W.COMBINE_HTML:t="text/html"}return t},st=function(e,t){void 0===e&&(e={}),void 0===t&&(t={});var n=e.threadId,i=e.apnsCollapseId,r=e.category,s=e.richMediaUri,o=t.channelIdMi,a=t.channelIdHW,u=t.channelIdOPPO,c=t.typeVivo,h=t.googleConfig,l={};l["thread-id"]=n||"",l["apns-collapse-id"]=i||"",l.category=r||"",l.richMediaUri=s||"";var d={};d.collapse_key=null==h?void 0:h.collapseKey,d.imageUrl=null==h?void 0:h.imageUrl;var f=null==h?void 0:h.priority;f&&!["high","normal"].includes(f)&&(f="normal"),d.priority=f;var p=[{HW:{channelId:a||""}},{MI:{channelId:o||""}},{OPPO:{channelId:u||""}},{VIVO:{classification:c||""}},{APNS:l},{FCM:d}];return JSON.stringify(p)},ot=function(e,t){var n={},i={notificationId:t||""};if(!e)return{iOSConfig:n,androidConfig:i};try{var r=JSON.parse(e);null==r||r.forEach((function(e){var t,r,s,o,a=Object.keys(e);if(0!==a.length){var u=a[0];switch(u){case"HW":return void(i.channelIdHW=null===(t=e[u])||void 0===t?void 0:t.channelId);case"MI":return void(i.channelIdMi=null===(r=e[u])||void 0===r?void 0:r.channelId);case"OPPO":return void(i.channelIdOPPO=null===(s=e[u])||void 0===s?void 0:s.channelId);case"VIVO":return void(i.typeVivo=null===(o=e[u])||void 0===o?void 0:o.classification);case"APNS":return n.threadId=e[u]["thread-id"],n.apnsCollapseId=e[u]["apns-collapse-id"],n.category=e[u].category,void(n.richMediaUri=e[u].richMediaUri);case"FCM":i.googleConfig={collapseKey:e[u].collapse_key||"",imageUrl:e[u].imageUrl||"",priority:e[u].priority||""}}}}))}catch(t){pe.error("Wrong format for pushConfigs field! content: "+e)}return{iOSConfig:n,androidConfig:i}},at=function(e){var t=/^[A-Za-z0-9_=+-]+$/.test(e),n=e.length;return t&&(n<=128&&n>=1)},ut=function(e){var t=e.length;return t<=4096&&t>=1},ct=function(e,t,n){t=t||function(){};var i=(n=n||{}).isReverse;ne(e)&&function(){for(var n in e)t(e[n],n,e)}(),(X(e)||J(e))&&function(){if(i)for(var n=e.length-1;n>=0;n--)t(e[n],n);else for(var r=0,s=e.length;r<s;r++)t(e[r],r)}()},ht=function(e,t){return ct(e,(function(n,i){e[i]=t(n,i)})),e},lt=function(e,t){if(e.indexOf)return e.indexOf(t);var n=-1;return ct(e,(function(e,i){t===e&&(n=i)})),n},dt=function(e,t){return-1!==lt(e,t)},ft=function(e,t){var n=[];return ct(e,(function(e){n.push(e)})),-1!==lt(n,t)},pt=function(e){return JSON.parse(JSON.stringify(e))},gt=function(){return"undefined"!=typeof RCCppEngine},_t=function(e){if("browser"!==e.tag)return{type:e.tag,version:"UnKonw"};var t,n,i=navigator.userAgent,r={IE:/rv:([\\d.]+)\\) like Gecko|MSIE ([\\d.]+)/,Edge:/Edge\\/([\\d.]+)/,Firefox:/Firefox\\/([\\d.]+)/,Opera:/(?:OPERA|OPR).([\\d.]+)/,WeChat:/MicroMessenger\\/([\\d.]+)/,QQBrowser:/QQBrowser\\/([\\d.]+)/,Chrome:/Chrome\\/([\\d.]+)/,Safari:/Version\\/([\\d.]+).*Safari/,iOSChrome:/Mobile\\/([\\d.]+).*Safari/};for(var s in r)if(r.hasOwnProperty(s)){var o=i.match(r[s]);if(o){n=s,t=o[1]||o[2];break}}return{type:n||"UnKonw",version:t||"UnKonw"}},yt=function(e){switch(e){case Te.SERVER_UNAVAILABLE:return Ee.SERVER_UNAVAILABLE;case Te.TOKEN_INCORRECT:return Ee.RC_CONN_USER_OR_PASSWD_ERROR;case Te.REDIRECT:return Ee.RC_CONN_REDIRECTED;case Te.APP_BLOCK_OR_DELETE:return Ee.RC_CONN_APP_BLOCKED_OR_DELETED;case Te.BLOCK:return Ee.RC_CONN_USER_BLOCKED;case Te.TOKEN_EXPIRE:return Ee.RC_CONN_USER_OR_PASSWD_ERROR;case Te.HOSTNAME_ERROR:return Ee.HOSTNAME_ERROR;case Te.HASOHTERSAMECLIENTONLINE:return Ee.HAS_OHTER_SAME_CLIENT_ON_LINE;case Te.APP_AUTH_NOT_PASS:return Ee.RC_APP_AUTH_NOT_PASS;case Te.OTP_USED:return Ee.RC_OTP_USED;case Te.PLATFORM_ERROR:return Ee.RC_PLATFORM_ERROR;default:return Ee.RC_NET_UNAVAILABLE}},vt=function(e){var t={},n=JSON.parse(e);return ct(n,(function(e,n){t[n]=e.v})),t},Et={_delayTime:0,setTime:function(e){var t=(new Date).getTime();Et._delayTime=t-e},getTime:function(){var e=Et._delayTime;return(new Date).getTime()-e}},mt=function(e,t){var n=0;return e.isAutoDelete&&(n|=1),e.isOverwrite&&(n|=2),2===t&&(n|=4),n};!function(e){e[e.AT_MOST_ONCE=0]="AT_MOST_ONCE",e[e.AT_LEAST_ONCE=1]="AT_LEAST_ONCE",e[e.EXACTLY_ONCE=2]="EXACTLY_ONCE",e[e.DEFAULT=3]="DEFAULT"}(Qe||(Qe={})),function(e){e[e.SYMMETRIC=0]="SYMMETRIC",e[e.CONNECT=1]="CONNECT",e[e.CONN_ACK=2]="CONN_ACK",e[e.PUBLISH=3]="PUBLISH",e[e.PUB_ACK=4]="PUB_ACK",e[e.QUERY=5]="QUERY",e[e.QUERY_ACK=6]="QUERY_ACK",e[e.QUERY_CONFIRM=7]="QUERY_CONFIRM",e[e.SUBSCRIBE=8]="SUBSCRIBE",e[e.SUB_ACK=9]="SUB_ACK",e[e.UNSUBSCRIBE=10]="UNSUBSCRIBE",e[e.UNSUB_ACK=11]="UNSUB_ACK",e[e.PING_REQ=12]="PING_REQ",e[e.PING_RESP=13]="PING_RESP",e[e.DISCONNECT=14]="DISCONNECT",e[e.RESERVER2=15]="RESERVER2"}(We||(We={})),function(e){e.CONN_ACK="ConnAckMessage",e.DISCONNECT="DisconnectMessage",e.PING_REQ="PingReqMessage",e.PING_RESP="PingRespMessage",e.PUBLISH="PublishMessage",e.PUB_ACK="PubAckMessage",e.QUERY="QueryMessage",e.QUERY_CON="QueryConMessage",e.QUERY_ACK="QueryAckMessage"}(Je||(Je={})),function(e){e.PUB="pub",e.QUERY="qry"}(ze||(ze={})),function(e){e[e.V4=4]="V4",e[e.V3=3]="V3"}(Ze||(Ze={}));var It,Tt=function(){function e(e,t,n,i){void 0===t&&(t=!1),void 0===n&&(n=Qe.AT_LEAST_ONCE),void 0===i&&(i=!1),this._retain=!1,this.qos=Qe.AT_LEAST_ONCE,this._dup=!1,this.syncMsg=!1;var r=e>0;e&&r&&1===arguments.length?(this._retain=(1&e)>0,this.qos=(6&e)>>1,this._dup=(8&e)>0,this.type=e>>4&15,this.syncMsg=8==(8&e)):(this.type=e,this._retain=t,this.qos=n,this._dup=i)}return e.prototype.encode=function(){var e=this.type<<4;return e|=this._retain?1:0,e|=this.qos<<1,e|=this._dup?8:0},e}(),Ct=function(){function e(){}return e.writeUTF=function(e,t){var n=[],i=0;if(J(e))for(var r=0,s=e.length;r<s;r++){var o=e.charCodeAt(r);o>=0&&o<=127?(i+=1,n.push(o)):o>=128&&o<=2047?(i+=2,n.push(192|31&o>>6),n.push(128|63&o)):o>=2048&&o<=65535&&(i+=3,n.push(224|15&o>>12),n.push(128|63&o>>6),n.push(128|63&o))}for(r=0,s=n.length;r<s;r++)n[r]>255&&(n[r]&=255);return t?n:i<=255?[0,i].concat(n):[i>>8,255&i].concat(n)},e.readUTF=function(e){for(var t,n,i=[],r=-1,s=e,o="";++r<s.length;){var a=Number(s[r]);if(a===(127&a)||(240==(240&a)?a=(a=(a=(a^=240)<<6|128^s[++r])<<6|128^s[++r])<<6|128^s[++r]:224==(224&a)?a=(a=(a^=224)<<6|128^s[++r])<<6|128^s[++r]:192==(192&a)&&(a=(a^=192)<<6|128^s[++r])),!isFinite(a)||a<0||a>1114111||Math.floor(a)!==a)throw RangeError("Invalid code point: "+a);a<=65535?i.push(a):(t=(a-=65536)>>10|55296,n=a%1024|56320,i.push(t,n)),(r+1===s.length||i.length>16384)&&(o+=String.fromCharCode.apply(null,i),i.length=0)}return o},e}(),Rt=function(){function e(e){this._position=0,this._poolLen=0,this._pool=e,this._poolLen=e.length}return e.prototype.check=function(){return this._position>=this._pool.length},e.prototype.read2Byte=function(){var e=this;if(e.check())return-1;for(var t="",n=0;n<2;n++){var i=e._pool[e._position++].toString(16);1===i.length&&(i="0"+i),t+=i.toString()}return parseInt(t,16)},e.prototype.readInt=function(){var e=this;if(e.check())return-1;for(var t="",n=0;n<4;n++){var i=e._pool[e._position++].toString(16);1===i.length&&(i="0"+i),t+=i.toString()}return parseInt(t,16)},e.prototype.readLong=function(){var e=this;if(e.check())return-1;for(var t="",n=0;n<8;n++){var i=e._pool[e._position++].toString(16);1===i.length&&(i="0"+i),t+=i}return parseInt(t,16)},e.prototype.readByte=function(){if(this.check())return-1;var e=this._pool[this._position++];return e>255&&(e&=255),e},e.prototype.readUTF=function(){if(this.check())return"";var e=this.readByte()<<8|this.readByte(),t=this._pool.subarray(this._position,this._position+=e);return Ct.readUTF(t)},e.prototype.readAll=function(){return this._pool.subarray(this._position,this._poolLen)},e}(),St=function(){function e(){this._pool=[],this._position=0,this._writen=0}return e.prototype.write=function(e){return-1!==Object.prototype.toString.call(e).indexOf("Array")?this._pool=this._pool.concat(e):e>=0&&(e>255&&(e&=255),this._pool.push(e),this._writen++),e},e.prototype.writeArr=function(e){return this._pool=this._pool.concat(e),e},e.prototype.writeUTF=function(e){var t=Ct.writeUTF(e);this._pool=this._pool.concat(t),this._writen+=t.length},e.prototype.getBytesArray=function(){return this._pool},e}(),Nt="UpStreamMessage",Ot="PushExtra",wt="DownStreamMessage",bt="DownStreamMessages",Mt="SessionsAttQryInput",At="SessionsAttOutput",Ut="SyncRequestMsg",Lt="ChrmPullMsg",Pt="NotifyMsg",Dt="HistoryMsgInput",Vt="HistoryMsgOuput",kt="RelationQryInput",xt="RelationsOutput",Bt="DeleteSessionsInput",Ft="SessionInfo",Kt="DeleteSessionsOutput",qt="RelationsInput",Yt="DeleteMsgInput",Ht="CleanHisMsgInput",Gt="SessionMsgReadInput",jt="ChrmInput",Qt="ChrmOutput",Wt="QueryChatRoomInfoInput",Jt="QueryChatRoomInfoOutput",zt="RtcInput",Zt="RtcUserListOutput",Xt="SetUserStatusInput",$t="RtcSetDataInput",en="RtcUserSetDataInput",tn="RtcDataInput",nn="RtcSetOutDataInput",rn="MCFollowInput",sn="RtcTokenOutput",on="RtcQryOutput",an="RtcQryUserOutDataInput",un="RtcUserOutDataOutput",cn="RtcQueryListInput",hn="RtcRoomInfoOutput",ln="RtcValueInfo",dn="RtcKeyDeleteInput",fn="GetQNupTokenInput",pn="GetQNupTokenOutput",gn="GetQNdownloadUrlInput",_n="GetDownloadUrlInput",yn="GetQNdownloadUrlOutput",vn="GetDownloadUrlOutput",En="SetChrmKV",mn="SetChrmKVS",In="DeleteChrmKVS",Tn="ChrmKVOutput",Cn="ChrmKVSOutput",Rn="ChrmKVSOutputEntity",Sn="QueryChrmKV",Nn="SetUserSettingInput",On="SetUserSettingOutput",wn="PullUserSettingInput",bn="PullUserSettingOutput",Mn="UserSettingNotification",An="SessionReq",Un="SessionStates",Ln="SessionState",Pn="SessionStateItem",Dn="SessionStateModifyReq",Vn="SessionStateModifyResp",kn="GrpReadReceiptMsg",xn="GrpReadReceiptQryReq",Bn="GrpReadReceiptQryResp",Fn="GrpMsgReadUser",Kn="SessionTagAddInput",qn="SessionTagItem",Yn="SessionTagDelInput",Hn="SessionDisTagReq",Gn="ReportSDKInput",jn="ReportSDKOutput",Qn="RtcNotifyMsg",Wn="RtcPullKV",Jn="RtcKVOutput",zn="RtcQueryUserJoinedInput",Zn="RtcQueryUserJoinedOutput",Xn="RtcViewerJoinedOutput",$n="RtcInviteInput",ei="RtcCancelInviteInput",ti="RtcInviteAnswerInput",ni="RtcEndInviteInput",ii=((It={})[Nt]=["sessionId","classname","content","pushText","userId","configFlag","appData","extraContent","pushExt","busChannel"],It[bt]=["list","syncTime","finished"],It[wt]=["fromUserId","type","groupId","classname","content","dataTime","status","msgId","extraContent","pushContent","configFlag","pushExt","busChannel"],It[Ot]=["title","templateIdNoUse","pushId","pushConfigs","templateId"],It[Mt]=["nothing"],It[At]=["inboxTime","sendboxTime","totalUnreadCount"],It[Ut]=["syncTime","ispolling","isweb","isPullSend","isKeeping","sendBoxSyncTime"],It[Lt]=["syncTime","count"],It[Pt]=["type","time","chrmId"],It[Dt]=["targetId","time","count","order","busChannel"],It[Vt]=["list","syncTime","hasMsg"],It[kt]=["type","count","startTime","order"],It[xt]=["info"],It[Bt]=["sessions"],It[Ft]=["type","channelId","busChannel"],It[Kt]=["nothing"],It[qt]=["type","msg","count","busChannel","startTime","endTime"],It[Yt]=["type","conversationId","msgs","busChannel"],It[Ht]=["targetId","dataTime","conversationType","busChannel"],It[Gt]=["type","msgTime","channelId"],It[jt]=["nothing"],It[Qt]=["nothing","sessionId","joinTime"],It[Wt]=["count","order"],It[Jt]=["userTotalNums","userInfos"],It[fn]=["type","key","httpMethod","queryString"],It[gn]=["type","key","fileName"],It[_n]=["type","key","fileName"],It[pn]=["deadline","token","bosToken","bosDate","path","osskeyId","ossPolicy","ossSign","ossBucketName"],It[yn]=["downloadUrl"],It[vn]=["downloadUrl"],It[En]=["entry","bNotify","notification","type"],It[mn]=["entry","bNotify","notification","type"],It[In]=["entry","bNotify","notification","type"],It[Tn]=["entries","bFullUpdate","syncTime"],It[Cn]=["timestamp","errorKeys"],It[Rn]=["key","errorCode"],It[Sn]=["timestamp"],It[Nn]=["version","value"],It[On]=["version","reserve"],It[wn]=["version","reserve"],It[bn]=["items","version"],It.UserSettingItem=["targetId","type","key","value","version","status","tags"],It[An]=["time"],It[Un]=["version","state"],It[Ln]=["type","channelId","time","stateItem","busChannel"],It[Pn]=["sessionStateType","value","tags"],It[Dn]=["version","state"],It[Vn]=["version"],It[kn]=["msgId","busChannel"],It[xn]=["msgId","busChannel"],It[Bn]=["totalMemberNum","list"],It[Fn]=["readTime","userId"],It[Kn]=["version","tags"],It[qn]=["tagId","name","createdTime","isTop"],It[Yn]=["version","tags"],It[Hn]=["tagId"],It[Mn]=["version","reserve"],It[Gn]=["sdkInfo"],It[jn]=["nothing"],It[zt]=["roomType","broadcastType","extraInnerData","needSysChatroom","identityChangeType","joinType"],It[Zt]=["users","token","sessionId","roomInfo"],It[Xt]=["status"],It[$t]=["interior","target","key","value","objectName","content"],It[en]=["valueInfo","objectName","content"],It[tn]=["interior","target","key","objectName","content"],It[nn]=["target","valueInfo","objectName","content"],It[rn]=["state"],It[sn]=["rtcToken"],It[on]=["outInfo"],It[an]=["userId"],It[un]=["user"],It[cn]=["order"],It[hn]=["roomId","roomData","userCount","list"],It[ln]=["key","value"],It[dn]=["key"],It[Qn]=["type","time","roomId"],It[Wn]=["timestamp","roomId"],It[Jn]=["entries","bFullUpdate","syncTime"],It[zn]=["userId"],It[Zn]=["info"],It[$n]=["invitedUserId","timeoutTime","invitedRoomId","inviteInfo","inviteSessionId"],It[ei]=["invitedUserId","invitedRoomId","inviteInfo","inviteSessionId"],It[ti]=["inviteUserID","answerCode","inviteRoomId","inviteSessionId","content","key","value"],It[ni]=["inviteRoomId","inviteSessionId","inviteContent","inviteRoomKeys"],It),ri={},si=function(e){var t=ii[e];ri[e]=function(){for(var e={},n={getArrayData:function(){return e}},i=function(i){var r=t[i],s="set"+D(r,0,1);n[s]=function(t){e[r]=t}},r=0;r<t.length;r++)i(r);return n},ri[e].decode=function(e){var t={};J(e)&&(e=JSON.parse(e));var n=function(n){var i="get"+D(n,0,1);t[n]=e[n],t[i]=function(){return e[n]}};for(var i in e)n(i);return t}};for(var oi in ii)si(oi);ri.getModule=function(e){return ri[e]()};var ai="\\npackage Modules;\\nmessage probuf {\\n  message "+Xt+"\\n  {\\n    optional int32 status=1;\\n  }\\n\\n  message SetUserStatusOutput\\n  {\\n    optional int32 nothing=1;\\n  }\\n\\n  message GetUserStatusInput\\n  {\\n    optional int32 nothing=1;\\n  }\\n\\n  message GetUserStatusOutput\\n  {\\n    optional string status=1;\\n    optional string subUserId=2;\\n  }\\n\\n  message SubUserStatusInput\\n  {\\n    repeated string userid =1;\\n  }\\n\\n  message SubUserStatusOutput\\n  {\\n    optional int32 nothing=1;\\n  }\\n  message VoipDynamicInput\\n  {\\n    required int32  engineType = 1;\\n    required string channelName = 2;\\n    optional string channelExtra = 3;\\n  }\\n\\n  message VoipDynamicOutput\\n  {\\n      required string dynamicKey=1;\\n  }\\n  message "+Pt+" {\\n    required int32 type = 1;\\n    optional int64 time = 2;\\n    optional string chrmId=3;\\n  }\\n  message "+Ut+" {\\n    required int64 syncTime = 1;\\n    required bool ispolling = 2;\\n    optional bool isweb=3;\\n    optional bool isPullSend=4;\\n    optional bool isKeeping=5;\\n    optional int64 sendBoxSyncTime=6;\\n  }\\n  message "+Nt+" {\\n    required int32 sessionId = 1;\\n    required string classname = 2;\\n    required bytes content = 3;\\n    optional string pushText = 4;\\n    optional string appData = 5;\\n    repeated string userId = 6;\\n    optional int64 delMsgTime = 7;\\n    optional string delMsgId = 8;\\n    optional int32 configFlag = 9;\\n    optional int64 clientUniqueId = 10;\\n    optional string extraContent = 11;\\n    optional PushExtra pushExt = 12;\\n    optional string busChannel = 13; // 该消息所属会话的业务标识\\n  }\\n  message "+Ot+" {\\n    optional string title = 1;\\n    optional int32  templateIdNoUse= 2;\\n    optional string pushId = 3;\\n    optional string pushConfigs = 4;\\n    optional string templateId = 5;\\n  }\\n  message "+bt+" {\\n    repeated DownStreamMessage list = 1;\\n    required int64 syncTime = 2;\\n    optional bool finished = 3;\\n  }\\n  message "+wt+" {\\n    required string fromUserId = 1;\\n    required ChannelType type = 2;\\n    optional string groupId = 3;\\n    required string classname = 4;\\n    required bytes content = 5;\\n    required int64 dataTime = 6;\\n    required int64 status = 7;\\n    optional int64 extra = 8;\\n    optional string msgId = 9;\\n    optional int32 direction = 10;\\n    optional int32 plantform =11;\\n    optional int32 isRemoved = 12;\\n    optional string source = 13;\\n    optional int64 clientUniqueId = 14;\\n    optional string extraContent = 15;\\n    optional string pushContent = 16;\\n    optional int32 configFlag = 17;\\n    optional PushExtra pushExt = 18;\\n    optional string busChannel = 19; // 该消息所属会话的业务标识，限制20字符以内\\n  }\\n  enum ChannelType {\\n    PERSON = 1;\\n    PERSONS = 2;\\n    GROUP = 3;\\n    TEMPGROUP = 4;\\n    CUSTOMERSERVICE = 5;\\n    NOTIFY = 6;\\n    MC=7;\\n    MP=8;\\n  }\\n  message CreateDiscussionInput {\\n    optional string name = 1;\\n  }\\n  message CreateDiscussionOutput {\\n    required string id = 1;\\n  }\\n  message ChannelInvitationInput {\\n    repeated string users = 1;\\n  }\\n  message LeaveChannelInput {\\n    required int32 nothing = 1;\\n  }\\n  message ChannelEvictionInput {\\n    required string user = 1;\\n  }\\n  message RenameChannelInput {\\n    required string name = 1;\\n  }\\n  message ChannelInfoInput {\\n    required int32 nothing = 1;\\n  }\\n  message ChannelInfoOutput {\\n    required ChannelType type = 1;\\n    required string channelId = 2;\\n    required string channelName = 3;\\n    required string adminUserId = 4;\\n    repeated string firstTenUserIds = 5;\\n    required int32 openStatus = 6;\\n  }\\n  message ChannelInfosInput {\\n    required int32 page = 1;\\n    optional int32 number = 2;\\n  }\\n  message ChannelInfosOutput {\\n    repeated ChannelInfoOutput channels = 1;\\n    required int32 total = 2;\\n  }\\n  message MemberInfo {\\n    required string userId = 1;\\n    required string userName = 2;\\n    required string userPortrait = 3;\\n    required string extension = 4;\\n  }\\n  message GroupMembersInput {\\n    required int32 page = 1;\\n    optional int32 number = 2;\\n  }\\n  message GroupMembersOutput {\\n    repeated MemberInfo members = 1;\\n    required int32 total = 2;\\n  }\\n  message GetUserInfoInput {\\n    required int32 nothing = 1;\\n  }\\n  message GetUserInfoOutput {\\n    required string userId = 1;\\n    required string userName = 2;\\n    required string userPortrait = 3;\\n  }\\n  message GetSessionIdInput {\\n    required int32 nothing = 1;\\n  }\\n  message GetSessionIdOutput {\\n    required int32 sessionId = 1;\\n  }\\n  enum FileType {\\n    image = "+W.IMAGE+";\\n    audio = "+W.AUDIO+";\\n    video = "+W.VIDEO+";\\n    file = "+W.FILE+";\\n  }\\n  message "+fn+" {\\n    required FileType type = 1;\\n    optional string key = 2;\\n    optional string httpMethod = 3;\\n    optional string queryString = 4;\\n  }\\n  message "+gn+" {\\n    required FileType type = 1;\\n    required string key = 2;\\n    optional string  fileName = 3;\\n  }\\n  message "+_n+" {\\n    required FileType type = 1;\\n    required string key = 2;\\n    optional string fileName = 3;\\n   }\\n  message "+pn+" {\\n    required int64 deadline = 1;\\n    required string token = 2;\\n    optional string bosToken = 3;\\n    optional string bosDate = 4;\\n    optional string path = 5;\\n    optional string osskeyId = 6;\\n    optional string ossPolicy = 7;\\n    optional string ossSign = 8;\\n    optional string ossBucketName = 9;\\n    optional string s3Credential = 10;\\n    optional string s3Algorithm = 11;\\n    optional string s3Date = 12;\\n    optional string s3Policy = 13;\\n    optional string s3Signature = 14;\\n    optional string s3BucketName = 15;\\n    optional string stcAuthorization = 16;\\n    optional string stcContentSha256 = 17;\\n    optional string stcDate = 18;\\n    optional string stcBucketName = 19;\\n  }\\n  message "+yn+" {\\n    required string downloadUrl = 1;\\n  }\\n  message "+vn+" {\\n    required string downloadUrl = 1;\\n  }\\n  message Add2BlackListInput {\\n    required string userId = 1;\\n  }\\n  message RemoveFromBlackListInput {\\n    required string userId = 1;\\n  }\\n  message QueryBlackListInput {\\n    required int32 nothing = 1;\\n  }\\n  message QueryBlackListOutput {\\n    repeated string userIds = 1;\\n  }\\n  message BlackListStatusInput {\\n    required string userId = 1;\\n  }\\n  message BlockPushInput {\\n    required string blockeeId = 1;\\n  }\\n  message ModifyPermissionInput {\\n    required int32 openStatus = 1;\\n  }\\n  message GroupInput {\\n    repeated GroupInfo groupInfo = 1;\\n  }\\n  message GroupOutput {\\n    required int32 nothing = 1;\\n  }\\n  message GroupInfo {\\n    required string id = 1;\\n    required string name = 2;\\n  }\\n  message GroupHashInput {\\n    required string userId = 1;\\n    required string groupHashCode = 2;\\n  }\\n  message GroupHashOutput {\\n    required GroupHashType result = 1;\\n  }\\n  enum GroupHashType {\\n    group_success = 0x00;\\n    group_failure = 0x01;\\n  }\\n  message "+jt+" {\\n    required int32 nothing = 1;\\n  }\\n  message "+Qt+" {\\n    required int32 nothing = 1;\\n    optional string sessionId = 2;\\n    optional int64 joinTime = 3;\\n  }\\n  message "+Lt+" {\\n    required int64 syncTime = 1;\\n    required int32 count = 2;\\n  }\\n\\n  message ChrmPullMsgNew\\n  {\\n    required int32 count = 1;\\n    required int64 syncTime = 2;\\n    optional string chrmId=3;\\n  }\\n  message "+kt+"\\n  {\\n    optional ChannelType type = 1;\\n    optional int32 count = 2;\\n    optional int64 startTime = 3;\\n    optional int32 order = 4;\\n  }\\n  message "+qt+"\\n  {\\n    required ChannelType type = 1;\\n    optional DownStreamMessage msg =2;\\n    optional int32 count = 3;\\n    optional string busChannel = 4;\\n    optional int64 startTime = 5;\\n    optional int64 endTime = 6;\\n  }\\n  message "+xt+"\\n  {\\n    repeated RelationInfo info = 1;\\n  }\\n  message RelationInfo\\n  {\\n    required ChannelType type = 1;\\n    required string userId = 2;\\n    optional DownStreamMessage msg =3;\\n    optional int64 readMsgTime= 4;\\n    optional int64 unreadCount= 5;\\n    optional string busChannel = 6;//该消息所属会话的业务标识\\n  }\\n  message RelationInfoReadTime\\n  {\\n    required ChannelType type = 1;\\n    required int64 readMsgTime= 2;\\n    required string targetId = 3;\\n  }\\n  message "+Ht+"\\n  {\\n      required string targetId = 1;\\n      required int64 dataTime = 2;\\n      optional int32 conversationType= 3;\\n      optional string busChannel = 4; //该消息所属会话的业务标识，限制20字符以内\\n  }\\n  message HistoryMessageInput\\n  {\\n    required string targetId = 1;\\n    required int64 dataTime =2;\\n    required int32 size  = 3;\\n  }\\n\\n  message HistoryMessagesOuput\\n  {\\n    repeated DownStreamMessage list = 1;\\n    required int64 syncTime = 2;\\n    required int32 hasMsg = 3;\\n  }\\n  message "+Wt+"\\n  {\\n    required int32 count= 1;\\n    optional int32 order= 2;\\n  }\\n\\n  message "+Jt+"\\n  {\\n    optional int32 userTotalNums = 1;\\n    repeated ChrmMember userInfos = 2;\\n  }\\n  message ChrmMember\\n  {\\n    required int64 time = 1;\\n    required string id = 2;\\n  }\\n  message MPFollowInput\\n  {\\n    required string id = 1;\\n  }\\n\\n  message MPFollowOutput\\n  {\\n    required int32 nothing = 1;\\n    optional MpInfo info =2;\\n  }\\n\\n  message "+rn+"\\n  {\\n    required string state = 1;\\n  }\\n\\n  message MCFollowOutput\\n  {\\n    required int32 nothing = 1;\\n    optional MpInfo info =2;\\n  }\\n\\n  message MpInfo\\n  {\\n    required string mpid=1;\\n    required string name = 2;\\n    required string type = 3;\\n    required int64 time=4;\\n    optional string portraitUrl=5;\\n    optional string extra =6;\\n  }\\n\\n  message SearchMpInput\\n  {\\n    required int32 type=1;\\n    required string id=2;\\n  }\\n\\n  message SearchMpOutput\\n  {\\n    required int32 nothing=1;\\n    repeated MpInfo info = 2;\\n  }\\n\\n  message PullMpInput\\n  {\\n    required int64 time=1;\\n    required string mpid=2;\\n  }\\n\\n  message PullMpOutput\\n  {\\n    required int32 status=1;\\n    repeated MpInfo info = 2;\\n  }\\n  message "+Dt+"\\n  {\\n    optional string targetId = 1;\\n    optional int64 time = 2;\\n    optional int32 count  = 3;\\n    optional int32 order = 4;\\n    optional string busChannel = 5; //该消息所属会话的业务标识，限制20字符以内\\n  }\\n\\n  message "+Vt+"\\n  {\\n    repeated DownStreamMessage list=1;\\n    required int64 syncTime=2;\\n    required int32 hasMsg=3;\\n  }\\n  message "+cn+"{\\n    optional int32 order=1;\\n  }\\n\\n  message "+dn+"{\\n    repeated string key=1;\\n  }\\n\\n  message "+ln+"{\\n    required string key=1;\\n    required string value=2;\\n  }\\n\\n  message RtcUserInfo{\\n    required string userId=1;\\n    repeated "+ln+" userData=2; //用户资源信息\\n  }\\n\\n  message "+Zt+"{\\n    repeated RtcUserInfo users=1;\\n    optional string token=2;\\n    optional string sessionId=3;\\n    repeated RtcValueInfo roomInfo = 4; //房间key value\\n    repeated RtcKVEntity entries = 5;//直播KV属性对象集合\\n    optional int64 syncTime = 6;//所有属性的最大时间戳（下次拉取KV时用）。\\n    optional int32 offlineKickTime = 7;//server超时踢人时间，默认60s\\n  }\\n  message RtcRoomInfoOutput{\\n    optional string roomId = 1;\\n    repeated "+ln+" roomData = 2;\\n    optional int32 userCount = 3;\\n    repeated RtcUserInfo list=4;\\n  }\\n  message "+zt+"{\\n    required int32 roomType=1;\\n    optional int32 broadcastType=2;\\n    optional RtcValueInfo extraInnerData = 3;\\n    optional bool needSysChatroom = 4; //是否需要同步聊天室\\n    optional IdentityChangeType identityChangeType = 5; //身份变更类型\\n    optional JoinType joinType = 6; // 加入房间类型\\n    repeated "+ln+" innerDatas = 7; //用户内部inner数据，角色或者连麦信息等\\n    repeated "+ln+" outerDatas = 8; //用户内部outer数据，自定义数据结构RtcInput。\\n  }\\n  enum JoinType {\\n    KICK = 0; //踢前一个设备\\n    REFUSE = 1; //当前加入拒绝\\n    COEXIST = 2; //两个设备共存\\n  }\\n  message RtcQryInput{\\n    required bool isInterior=1;\\n    required targetType target=2;\\n    repeated string key=3;\\n  }\\n  message "+on+"{\\n    repeated "+ln+" outInfo=1;\\n  }\\n  message RtcDelDataInput{\\n    repeated string key=1;\\n    required bool isInterior=2;\\n    required targetType target=3;\\n  }\\n  message "+tn+"{\\n    required bool interior=1;\\n    required targetType target=2;\\n    repeated string key=3;\\n    optional string objectName=4;\\n    optional string content=5;\\n  }\\n  message "+$t+"{\\n    required bool interior=1;\\n    required targetType target=2;\\n    required string key=3;\\n    required string value=4;\\n    optional string objectName=5;\\n    optional string content=6;\\n  }\\n  message "+en+" {\\n    repeated "+ln+" valueInfo = 1;\\n    required string objectName = 2;\\n    repeated "+ln+" content = 3;\\n  }\\n  message RtcOutput\\n  {\\n    optional int32 nothing=1;\\n  }\\n  message "+sn+"{\\n    required string rtcToken=1;\\n  }\\n  enum targetType {\\n    ROOM =1 ;\\n    PERSON = 2;\\n  }\\n  message "+nn+"{\\n    required targetType target=1;\\n    repeated "+ln+" valueInfo=2;\\n    optional string objectName=3;\\n    optional string content=4;\\n  }\\n  message "+an+"{\\n    repeated string userId = 1;\\n  }\\n  message "+un+"{\\n    repeated RtcUserInfo user = 1;\\n  }\\n  message "+Mt+"{\\n    required int32 nothing = 1;\\n  }\\n  message "+At+"{\\n    required int64 inboxTime = 1;\\n    required int64 sendboxTime = 2;\\n    required int64 totalUnreadCount = 3;\\n  }\\n  message "+Gt+"\\n  {\\n    required ChannelType type = 1;\\n    required int64 msgTime = 2;\\n    required string channelId = 3;\\n  }\\n  message SessionMsgReadOutput\\n  {\\n    optional int32 nothing=1;\\n  }\\n  message "+Bt+"\\n  {\\n    repeated SessionInfo sessions = 1;\\n  }\\n  message "+Ft+"\\n  {\\n    required ChannelType type = 1;\\n    required string channelId = 2;\\n    optional string busChannel = 3;//所属会话业务标识\\n  }\\n  message "+Kt+"\\n  {\\n    optional int32 nothing=1;\\n  }\\n  message "+Yt+"\\n  {\\n    optional ChannelType type = 1;\\n    optional string conversationId = 2;\\n    repeated DeleteMsg msgs = 3;\\n    optional string busChannel = 4; //该消息所属会话的业务标识，限制20字符以内\\n  }\\n  message DeleteMsg\\n  {\\n    optional string msgId = 1;\\n    optional int64 msgDataTime = 2;\\n    optional int32 direct = 3;\\n  }\\n  message ChrmKVEntity {\\n    required string key = 1;\\n    required string value = 2;\\n    optional int32 status = 3;\\n    optional int64 timestamp = 4;\\n    optional string uid = 5;\\n  }\\n  message "+En+" {\\n    required ChrmKVEntity entry = 1;\\n    optional bool bNotify = 2;\\n    optional UpStreamMessage notification = 3;\\n    optional ChannelType type = 4;\\n  }\\n  message "+mn+" {\\n    repeated ChrmKVEntity entry = 1;\\n    optional bool bNotify = 2;\\n    optional UpStreamMessage notification = 3;\\n    optional ChannelType type = 4;\\n  }\\n  message "+In+" {\\n    repeated ChrmKVEntity entry = 1;\\n    optional bool bNotify = 2;\\n    optional UpStreamMessage notification = 3;\\n    optional ChannelType type = 4;\\n  }\\n  message "+Tn+" {\\n    repeated ChrmKVEntity entries = 1;\\n    optional bool bFullUpdate = 2;\\n    optional int64 syncTime = 3;\\n  }\\n  message "+Cn+" {\\n    repeated ChrmKVSOutputEntity errorKeys = 1;\\n  }\\n  message "+Rn+"\\n  {\\n    optional string key = 1;\\n    optional int32 errorCode = 2;\\n  }\\n  message "+Sn+" {\\n    required int64 timestamp = 1;\\n  }\\n  message "+Nn+" {\\n    required int64 version=1;\\n    required string value=2;\\n  }\\n  message "+On+" {\\n    required int64 version=1;\\n    required bool reserve=2;\\n  }\\n  message "+wn+" {\\n    required int64 version=1;\\n    optional bool reserve=2;\\n  }\\n  message "+bn+" {\\n    repeated UserSettingItem items = 1;\\n    required int64 version=2;\\n  }\\n  message UserSettingItem {\\n    required string targetId= 1;\\n    required ChannelType type = 2;\\n    required string key = 4;\\n    required bytes value = 5;\\n    required int64 version=6;\\n    required int32 status=7;\\n    repeated SessionTagItem tags= 8;\\n  }\\n  message "+An+" {\\n    required int64 time = 1;\\n  }\\n  message "+Un+" {\\n    required int64 version=1;\\n    repeated SessionState state= 2;\\n  }\\n  message "+Ln+" {\\n    required ChannelType type = 1;\\n    required string channelId = 2;\\n    optional int64 time = 3;\\n    repeated SessionStateItem stateItem = 4;\\n    optional string busChannel = 5;//该消息所属会话的业务标识\\n  }\\n  message "+Pn+" {\\n    required SessionStateType sessionStateType = 1;\\n    required string value = 2;\\n    repeated SessionTagItem tags = 3;\\n  }\\n  enum SessionStateType {\\n    IsSilent = 1;\\n    IsTop = 2;\\n    Tags = 3;\\n  }\\n  message "+Dn+" {\\n    required int64 version=1;\\n    repeated SessionState state= 2;\\n  }\\n  message "+Vn+" {\\n    required int64 version=1;\\n  }\\n  message "+kn+" {\\n    repeated string msgId=1; //已读消息ID\\n    optional string channelId = 2; // 该消息所属会话的业务标识\\n  }\\n  message "+xn+" {\\n    repeated string msgId=1; //已读消息ID\\n    optional string channelId = 2; // 该消息所属会话的业务标识\\n  }\\n  message "+Bn+" {\\n    required int32 totalMemberNum = 1;//群内总人数\\n    repeated GrpMsgReadUser list = 2;//已读用户列表（list复类型）\\n  }\\n  message "+Fn+" {\\n    required int64 readTime = 1;//已读时间\\n    required string userId = 2;//已读用户id\\n  }\\n  message "+Kn+" {\\n    required int64 version=1;\\n    repeated SessionTagItem tags=2;\\n  }\\n  message "+qn+" {\\n    required string tagId=1;\\n    optional string name=2;\\n    optional int64 createdTime=3;\\n    optional bool isTop=4;\\n  }\\n  message "+Yn+" {\\n    required int64 version=1;\\n    repeated SessionTagItem tags=2;\\n  }\\n  message "+Hn+" {\\n    repeated string tagId=1;\\n  }\\n  message "+Mn+" {\\n    required int64 version=1;\\n    required bool reserve=2;\\n  }\\n  message "+Gn+\' {\\n    required string sdkInfo=1; // 用户集成的 sdk 信息,json 格式 {"web-rtc": "4.0.3.7"}\\n  }\\n  message \'+jn+"\\n  {\\n    optional int32 nothing=1; //占位\\n  }\\n  message "+Qn+" \\n  {\\n    required int32 type= 1;   //(通知类型 1:rtc房间状态KV变更通知)\\n    optional int64 time= 2;   //消息产生时间\\n    optional string roomId=3; //主播房间id\\n  }\\n  message "+Wn+"\\n  {\\n    required int64 timestamp = 1;\\n    required string roomId = 2;\\n  }\\n  message "+Jn+"\\n  {\\n    repeated RtcKVEntity entries = 1;\\n    optional bool bFullUpdate = 2;\\n    optional int64 syncTime = 3; \\n  }\\n  message RtcKVEntity \\n  {\\n    required string key = 1;\\n    required string value = 2;\\n    optional int32 status = 3;\\n    optional int64 timestamp = 4;\\n    optional string uid = 5;\\n  }\\n  enum IdentityChangeType \\n  {\\n    AnchorToViewer = 1; //1为主播变观众\\n    ViewerToAnchor = 2; //2为观众变主播\\n  }\\n  message "+zn+"\\n  {\\n    required string userId = 1;\\n  }\\n  message "+Zn+"\\n  {\\n    repeated RtcJoinedInfo info = 1;\\n  }\\n  message RtcJoinedInfo\\n  {\\n    required string deviceId = 1; //设备ID\\n    required string roomId = 2;   //加入的房间ID\\n    optional int64 joinTime = 3;  //加入的时间\\n  }\\n  message "+Xn+"\\n  {\\n    required string rtcToken=1;\\n    repeated RtcKVEntity entries = 2;//KV属性对象集合\\n    optional int64 syncTime = 3;//所有属性的最大时间戳（下次拉取KV时用）。\\n  }\\n  message "+$n+"\\n  {\\n    required string invitedUserId=1;    //被邀请的人的uid\\n    optional int32  timeoutTime=2;       //邀请超时时间(秒),默认三十秒\\n    required string invitedRoomId=3;    //被邀请的房间\\n    required string inviteInfo=4;       //邀请的信息(包含邀请人,被邀请人,各自userid)客户端定义好.协议栈和server透传\\n    required string inviteSessionId= 5; //客户端保证唯一性(建议roomid_userid_时间戳_随机数)\\n  }\\n  message "+ei+"\\n  {\\n    required string invitedUserId=1;   //被邀请的人的uid\\n    required string invitedRoomId=2;   //被邀请的房间\\n    required string inviteInfo=3;      //取消邀请的信息(包含邀请人,被邀请人,各自userid)客户端定义好.协议栈和server透传\\n    required string inviteSessionId=4; //邀请的sessionId,客户端发起邀请时产生\\n  }\\n  message "+ti+"\\n  {\\n    required string inviteUserId=1;    //邀请的人的uid\\n    required int32  answerCode=2;      //是否接受连麦邀请.0为拒绝,1为接受\\n    required string inviteRoomId=3;    //邀请的房间\\n    required string inviteSessionId=4; //邀请的sessionId\\n    required string content=5;         //需要转发的content\\n    optional string key=6;             //如果接受的话,需要加这个字段,放在room级别的k和v,新加入房间的能拉取到\\n    optional string value=7;           //如果接受的话,需要加这个字段,放在room级别的k和v,新加入房间的能拉取到\\n  }\\n  message "+ni+"\\n  {\\n    required string inviteRoomId=1;    //邀请的房间\\n    required string inviteSessionId=2; //邀请的sessionId\\n    required string inviteContent=3;   //结束连麦的信息(需要透传给房间内其他人)\\n    repeated string inviteRoomKeys=4;  //需要删除连麦的信息的key\\n  }\\n}\\n";var ui,ci,hi,li,di,fi=(ui=ai,function(e,t){var n,i,r={};return r.ByteBuffer=e,r.c=e,n=e,r.Long=t||null,r.VERSION="5.0.1",r.WIRE_TYPES={},r.WIRE_TYPES.VARINT=0,r.WIRE_TYPES.BITS64=1,r.WIRE_TYPES.LDELIM=2,r.WIRE_TYPES.STARTGROUP=3,r.WIRE_TYPES.ENDGROUP=4,r.WIRE_TYPES.BITS32=5,r.PACKABLE_WIRE_TYPES=[r.WIRE_TYPES.VARINT,r.WIRE_TYPES.BITS64,r.WIRE_TYPES.BITS32],r.TYPES={int32:{name:"int32",wireType:r.WIRE_TYPES.VARINT,defaultValue:0},uint32:{name:"uint32",wireType:r.WIRE_TYPES.VARINT,defaultValue:0},sint32:{name:"sint32",wireType:r.WIRE_TYPES.VARINT,defaultValue:0},int64:{name:"int64",wireType:r.WIRE_TYPES.VARINT,defaultValue:r.Long?r.Long.ZERO:void 0},uint64:{name:"uint64",wireType:r.WIRE_TYPES.VARINT,defaultValue:r.Long?r.Long.UZERO:void 0},sint64:{name:"sint64",wireType:r.WIRE_TYPES.VARINT,defaultValue:r.Long?r.Long.ZERO:void 0},bool:{name:"bool",wireType:r.WIRE_TYPES.VARINT,defaultValue:!1},double:{name:"double",wireType:r.WIRE_TYPES.BITS64,defaultValue:0},string:{name:"string",wireType:r.WIRE_TYPES.LDELIM,defaultValue:""},bytes:{name:"bytes",wireType:r.WIRE_TYPES.LDELIM,defaultValue:null},fixed32:{name:"fixed32",wireType:r.WIRE_TYPES.BITS32,defaultValue:0},sfixed32:{name:"sfixed32",wireType:r.WIRE_TYPES.BITS32,defaultValue:0},fixed64:{name:"fixed64",wireType:r.WIRE_TYPES.BITS64,defaultValue:r.Long?r.Long.UZERO:void 0},sfixed64:{name:"sfixed64",wireType:r.WIRE_TYPES.BITS64,defaultValue:r.Long?r.Long.ZERO:void 0},float:{name:"float",wireType:r.WIRE_TYPES.BITS32,defaultValue:0},enum:{name:"enum",wireType:r.WIRE_TYPES.VARINT,defaultValue:0},message:{name:"message",wireType:r.WIRE_TYPES.LDELIM,defaultValue:null},group:{name:"group",wireType:r.WIRE_TYPES.STARTGROUP,defaultValue:null}},r.MAP_KEY_TYPES=[r.TYPES.int32,r.TYPES.sint32,r.TYPES.sfixed32,r.TYPES.uint32,r.TYPES.fixed32,r.TYPES.int64,r.TYPES.sint64,r.TYPES.sfixed64,r.TYPES.uint64,r.TYPES.fixed64,r.TYPES.bool,r.TYPES.string,r.TYPES.bytes],r.ID_MIN=1,r.ID_MAX=536870911,r.convertFieldsToCamelCase=!1,r.populateAccessors=!0,r.populateDefaults=!0,r.Util=function(){var e={};return e.IS_NODE=!("object"!=typeof process||process+""!="[object process]"||process.browser),e.XHR=function(){var e,t=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],n=null;for(e=0;e<t.length;e++){try{n=t[e]()}catch(e){continue}break}if(!n)throw Error("XMLHttpRequest is not supported");return n},e.fetch=function(t,n){if(n&&"function"!=typeof n&&(n=null),e.IS_NODE)if(n)g.readFile(t,(function(e,t){n(e?null:""+t)}));else try{return g.readFileSync(t)}catch(e){return null}else{var i=e.XHR();if(i.open("GET",t,!!n),i.setRequestHeader("Accept","text/plain"),"function"==typeof i.overrideMimeType&&i.overrideMimeType("text/plain"),!n)return i.send(null),200==i.status||0==i.status&&"string"==typeof i.responseText?i.responseText:null;if(i.onreadystatechange=function(){4==i.readyState&&(200==i.status||0==i.status&&"string"==typeof i.responseText?n(i.responseText):n(null))},4==i.readyState)return;i.send(null)}},e.toCamelCase=function(e){return e.replace(/_([a-zA-Z])/g,(function(e,t){return t.toUpperCase()}))},e}(),r.Lang={DELIM:/[\\s\\{\\}=;:\\[\\],\'"\\(\\)<>]/g,RULE:/^(?:required|optional|repeated|map)$/,TYPE:/^(?:double|float|int32|uint32|sint32|int64|uint64|sint64|fixed32|sfixed32|fixed64|sfixed64|bool|string|bytes)$/,NAME:/^[a-zA-Z_][a-zA-Z_0-9]*$/,TYPEDEF:/^[a-zA-Z][a-zA-Z_0-9]*$/,TYPEREF:/^(?:\\.?[a-zA-Z_][a-zA-Z_0-9]*)+$/,FQTYPEREF:/^(?:\\.[a-zA-Z][a-zA-Z_0-9]*)+$/,NUMBER:/^-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+|([0-9]*(\\.[0-9]*)?([Ee][+-]?[0-9]+)?)|inf|nan)$/,NUMBER_DEC:/^(?:[1-9][0-9]*|0)$/,NUMBER_HEX:/^0[xX][0-9a-fA-F]+$/,NUMBER_OCT:/^0[0-7]+$/,NUMBER_FLT:/^([0-9]*(\\.[0-9]*)?([Ee][+-]?[0-9]+)?|inf|nan)$/,BOOL:/^(?:true|false)$/i,ID:/^(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/,NEGID:/^\\-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/,WHITESPACE:/\\s/,STRING:/(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)")|(?:\'([^\'\\\\]*(?:\\\\.[^\'\\\\]*)*)\')/g,STRING_DQ:/(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)")/g,STRING_SQ:/(?:\'([^\'\\\\]*(?:\\\\.[^\'\\\\]*)*)\')/g},r.DotProto=function(e,t){function n(e,n){var i=-1,r=1;if("-"==e.charAt(0)&&(r=-1,e=e.substring(1)),t.NUMBER_DEC.test(e))i=parseInt(e);else if(t.NUMBER_HEX.test(e))i=parseInt(e.substring(2),16);else{if(!t.NUMBER_OCT.test(e))throw Error("illegal id value: "+(r<0?"-":"")+e);i=parseInt(e.substring(1),8)}if(i=0|r*i,!n&&i<0)throw Error("illegal id value: "+(r<0?"-":"")+e);return i}function i(e){var n=1;if("-"==e.charAt(0)&&(n=-1,e=e.substring(1)),t.NUMBER_DEC.test(e))return n*parseInt(e,10);if(t.NUMBER_HEX.test(e))return n*parseInt(e.substring(2),16);if(t.NUMBER_OCT.test(e))return n*parseInt(e.substring(1),8);if("inf"===e)return 1/0*n;if("nan"===e)return NaN;if(t.NUMBER_FLT.test(e))return n*parseFloat(e);throw Error("illegal number value: "+(n<0?"-":"")+e)}function r(e,t,n){void 0===e[t]?e[t]=n:(Array.isArray(e[t])||(e[t]=[e[t]]),e[t].push(n))}var s,o,a={},u=function(e){this.source=e+"",this.index=0,this.line=1,this.stack=[],this._stringOpen=null},c=u.prototype;return c._readString=function(){var e,n=\'"\'===this._stringOpen?t.STRING_DQ:t.STRING_SQ;if(n.lastIndex=this.index-1,!(e=n.exec(this.source)))throw Error("unterminated string");return this.index=n.lastIndex,this.stack.push(this._stringOpen),this._stringOpen=null,e[1]},c.next=function(){var e,n,i,r,s;if(this.stack.length>0)return this.stack.shift();if(this.index>=this.source.length)return null;if(null!==this._stringOpen)return this._readString();do{for(e=!1;t.WHITESPACE.test(i=this.source.charAt(this.index));)if("\\n"===i&&++this.line,++this.index===this.source.length)return null;if("/"===this.source.charAt(this.index))if(++this.index,"/"===this.source.charAt(this.index)){for(;"\\n"!==this.source.charAt(++this.index);)if(this.index==this.source.length)return null;++this.index,++this.line,e=!0}else{if("*"!==(i=this.source.charAt(this.index)))return"/";do{if("\\n"===i&&++this.line,++this.index===this.source.length)return null;n=i,i=this.source.charAt(this.index)}while("*"!==n||"/"!==i);++this.index,e=!0}}while(e);if(this.index===this.source.length)return null;if(r=this.index,t.DELIM.lastIndex=0,!t.DELIM.test(this.source.charAt(r++)))for(;r<this.source.length&&!t.DELIM.test(this.source.charAt(r));)++r;return(\'"\'===(s=this.source.substring(this.index,this.index=r))||"\'"===s)&&(this._stringOpen=s),s},c.peek=function(){if(0===this.stack.length){var e=this.next();if(null===e)return null;this.stack.push(e)}return this.stack[0]},c.skip=function(e){var t=this.next();if(t!==e)throw Error("illegal \'"+t+"\', \'"+e+"\' expected")},c.omit=function(e){return this.peek()===e&&(this.next(),!0)},c.toString=function(){return"Tokenizer ("+this.index+"/"+this.source.length+" at line "+this.line+")"},a.Tokenizer=u,(o=(s=function(e){this.tn=new u(e),this.proto3=!1}).prototype).parse=function(){var e,n={name:"[ROOT]",package:null,messages:[],enums:[],imports:[],options:{},services:[]},i=!0;try{for(;e=this.tn.next();)switch(e){case"package":if(!i||null!==n.package)throw Error("unexpected \'package\'");if(e=this.tn.next(),!t.TYPEREF.test(e))throw Error("illegal package name: "+e);this.tn.skip(";"),n.package=e;break;case"import":if(!i)throw Error("unexpected \'import\'");"public"===(e=this.tn.peek())&&this.tn.next(),e=this._readString(),this.tn.skip(";"),n.imports.push(e);break;case"syntax":if(!i)throw Error("unexpected \'syntax\'");this.tn.skip("="),"proto3"===(n.syntax=this._readString())&&(this.proto3=!0),this.tn.skip(";");break;case"message":this._parseMessage(n,null),i=!1;break;case"enum":this._parseEnum(n),i=!1;break;case"option":this._parseOption(n);break;case"service":this._parseService(n);break;case"extend":this._parseExtend(n);break;default:throw Error("unexpected \'"+e+"\'")}}catch(e){throw e.message="Parse error at line "+this.tn.line+": "+e.message,e}return delete n.name,n},s.parse=function(e){return new s(e).parse()},o._readString=function(){var e,t,n="";do{if("\'"!==(t=this.tn.next())&&\'"\'!==t)throw Error("illegal string delimiter: "+t);n+=this.tn.next(),this.tn.skip(t),e=this.tn.peek()}while(\'"\'===e||\'"\'===e);return n},o._readValue=function(e){var n=this.tn.peek();if(\'"\'===n||"\'"===n)return this._readString();if(this.tn.next(),t.NUMBER.test(n))return i(n);if(t.BOOL.test(n))return"true"===n.toLowerCase();if(e&&t.TYPEREF.test(n))return n;throw Error("illegal value: "+n)},o._parseOption=function(e,n){var i,r=this.tn.next(),s=!1;if("("===r&&(s=!0,r=this.tn.next()),!t.TYPEREF.test(r))throw Error("illegal option name: "+r);i=r,s&&(this.tn.skip(")"),i="("+i+")",r=this.tn.peek(),t.FQTYPEREF.test(r)&&(i+=r,this.tn.next())),this.tn.skip("="),this._parseOptionValue(e,i),n||this.tn.skip(";")},o._parseOptionValue=function(e,n){var i=this.tn.peek();if("{"!==i)r(e.options,n,this._readValue(!0));else for(this.tn.skip("{");"}"!==(i=this.tn.next());){if(!t.NAME.test(i))throw Error("illegal option name: "+n+"."+i);this.tn.omit(":")?r(e.options,n+"."+i,this._readValue(!0)):this._parseOptionValue(e,n+"."+i)}},o._parseService=function(e){var n,i=this.tn.next();if(!t.NAME.test(i))throw Error("illegal service name at line "+this.tn.line+": "+i);for(n={name:i,rpc:{},options:{}},this.tn.skip("{");"}"!==(i=this.tn.next());)if("option"===i)this._parseOption(n);else{if("rpc"!==i)throw Error("illegal service token: "+i);this._parseServiceRPC(n)}this.tn.omit(";"),e.services.push(n)},o._parseServiceRPC=function(e){var n,i,r="rpc",s=this.tn.next();if(!t.NAME.test(s))throw Error("illegal rpc service method name: "+s);if(n=s,i={request:null,response:null,request_stream:!1,response_stream:!1,options:{}},this.tn.skip("("),"stream"===(s=this.tn.next()).toLowerCase()&&(i.request_stream=!0,s=this.tn.next()),!t.TYPEREF.test(s))throw Error("illegal rpc service request type: "+s);if(i.request=s,this.tn.skip(")"),"returns"!==(s=this.tn.next()).toLowerCase())throw Error("illegal rpc service request type delimiter: "+s);if(this.tn.skip("("),"stream"===(s=this.tn.next()).toLowerCase()&&(i.response_stream=!0,s=this.tn.next()),i.response=s,this.tn.skip(")"),"{"===(s=this.tn.peek())){for(this.tn.next();"}"!==(s=this.tn.next());){if("option"!==s)throw Error("illegal rpc service token: "+s);this._parseOption(i)}this.tn.omit(";")}else this.tn.skip(";");void 0===e[r]&&(e[r]={}),e[r][n]=i},o._parseMessage=function(e,i){var r=!!i,s=this.tn.next(),o={name:"",fields:[],enums:[],messages:[],options:{},services:[],oneofs:{}};if(!t.NAME.test(s))throw Error("illegal "+(r?"group":"message")+" name: "+s);for(o.name=s,r&&(this.tn.skip("="),i.id=n(this.tn.next()),o.isGroup=!0),"["===(s=this.tn.peek())&&i&&this._parseFieldOptions(i),this.tn.skip("{");"}"!==(s=this.tn.next());)if(t.RULE.test(s))this._parseMessageField(o,s);else if("oneof"===s)this._parseMessageOneOf(o);else if("enum"===s)this._parseEnum(o);else if("message"===s)this._parseMessage(o);else if("option"===s)this._parseOption(o);else if("service"===s)this._parseService(o);else if("extensions"===s)o.extensions=this._parseExtensionRanges();else if("reserved"===s)this._parseIgnored();else if("extend"===s)this._parseExtend(o);else{if(!t.TYPEREF.test(s))throw Error("illegal message token: "+s);if(!this.proto3)throw Error("illegal field rule: "+s);this._parseMessageField(o,"optional",s)}return this.tn.omit(";"),e.messages.push(o),o},o._parseIgnored=function(){for(;";"!==this.tn.peek();)this.tn.next();this.tn.skip(";")},o._parseMessageField=function(e,i,r){var s,o,a;if(!t.RULE.test(i))throw Error("illegal message field rule: "+i);if(s={rule:i,type:"",name:"",options:{},id:0},"map"===i){if(r)throw Error("illegal type: "+r);if(this.tn.skip("<"),o=this.tn.next(),!t.TYPE.test(o)&&!t.TYPEREF.test(o))throw Error("illegal message field type: "+o);if(s.keytype=o,this.tn.skip(","),o=this.tn.next(),!t.TYPE.test(o)&&!t.TYPEREF.test(o))throw Error("illegal message field: "+o);if(s.type=o,this.tn.skip(">"),o=this.tn.next(),!t.NAME.test(o))throw Error("illegal message field name: "+o);s.name=o,this.tn.skip("="),s.id=n(this.tn.next()),"["===(o=this.tn.peek())&&this._parseFieldOptions(s),this.tn.skip(";")}else if("group"===(r=void 0!==r?r:this.tn.next())){if(a=this._parseMessage(e,s),!/^[A-Z]/.test(a.name))throw Error("illegal group name: "+a.name);s.type=a.name,s.name=a.name.toLowerCase(),this.tn.omit(";")}else{if(!t.TYPE.test(r)&&!t.TYPEREF.test(r))throw Error("illegal message field type: "+r);if(s.type=r,o=this.tn.next(),!t.NAME.test(o))throw Error("illegal message field name: "+o);s.name=o,this.tn.skip("="),s.id=n(this.tn.next()),"["===(o=this.tn.peek())&&this._parseFieldOptions(s),this.tn.skip(";")}return e.fields.push(s),s},o._parseMessageOneOf=function(e){var n,i,r,s=this.tn.next();if(!t.NAME.test(s))throw Error("illegal oneof name: "+s);for(i=s,r=[],this.tn.skip("{");"}"!==(s=this.tn.next());)(n=this._parseMessageField(e,"optional",s)).oneof=i,r.push(n.id);this.tn.omit(";"),e.oneofs[i]=r},o._parseFieldOptions=function(e){this.tn.skip("[");for(var t=!0;"]"!==this.tn.peek();)t||this.tn.skip(","),this._parseOption(e,!0),t=!1;this.tn.next()},o._parseEnum=function(e){var i,r={name:"",values:[],options:{}},s=this.tn.next();if(!t.NAME.test(s))throw Error("illegal name: "+s);for(r.name=s,this.tn.skip("{");"}"!==(s=this.tn.next());)if("option"===s)this._parseOption(r);else{if(!t.NAME.test(s))throw Error("illegal name: "+s);this.tn.skip("="),i={name:s,id:n(this.tn.next(),!0)},"["===(s=this.tn.peek())&&this._parseFieldOptions({options:{}}),this.tn.skip(";"),r.values.push(i)}this.tn.omit(";"),e.enums.push(r)},o._parseExtensionRanges=function(){var t,n,r,s=[];do{for(n=[];;){switch(t=this.tn.next()){case"min":r=e.ID_MIN;break;case"max":r=e.ID_MAX;break;default:r=i(t)}if(n.push(r),2===n.length)break;if("to"!==this.tn.peek()){n.push(r);break}this.tn.next()}s.push(n)}while(this.tn.omit(","));return this.tn.skip(";"),s},o._parseExtend=function(e){var n,i=this.tn.next();if(!t.TYPEREF.test(i))throw Error("illegal extend reference: "+i);for(n={ref:i,fields:[]},this.tn.skip("{");"}"!==(i=this.tn.next());)if(t.RULE.test(i))this._parseMessageField(n,i);else{if(!t.TYPEREF.test(i))throw Error("illegal extend token: "+i);if(!this.proto3)throw Error("illegal field rule: "+i);this._parseMessageField(n,"optional",i)}return this.tn.omit(";"),e.messages.push(n),n},o.toString=function(){return"Parser at line "+this.tn.line},a.Parser=s,a}(r,r.Lang),r.Reflect=function(t){function i(e,n){if(e&&"number"==typeof e.low&&"number"==typeof e.high&&"boolean"==typeof e.unsigned&&e.low==e.low&&e.high==e.high)return new t.Long(e.low,e.high,void 0===n?e.unsigned:n);if("string"==typeof e)return t.Long.fromString(e,n||!1,10);if("number"==typeof e)return t.Long.fromNumber(e,n||!1);throw Error("not convertible to Long")}function r(e,n){var i=n.readVarint32(),s=7&i,o=i>>>3;switch(s){case t.WIRE_TYPES.VARINT:do{i=n.readUint8()}while(128==(128&i));break;case t.WIRE_TYPES.BITS64:n.offset+=8;break;case t.WIRE_TYPES.LDELIM:i=n.readVarint32(),n.offset+=i;break;case t.WIRE_TYPES.STARTGROUP:r(o,n);break;case t.WIRE_TYPES.ENDGROUP:if(o===e)return!1;throw Error("Illegal GROUPEND after unknown group: "+o+" ("+e+" expected)");case t.WIRE_TYPES.BITS32:n.offset+=4;break;default:throw Error("Illegal wire type in unknown group "+e+": "+s)}return!0}var s,o,a,u,c,h,l,d,f,p,g,_,y,v,E,m,I={},T=function(e,t,n){this.builder=e,this.parent=t,this.name=n,this.className},C=T.prototype;return C.fqn=function(){for(var e=this.name,t=this;null!=(t=t.parent);)e=t.name+"."+e;return e},C.toString=function(e){return(e?this.className+" ":"")+this.fqn()},C.build=function(){throw Error(this.toString(!0)+" cannot be built directly")},I.T=T,(o=(s=function(e,t,n,i,r){T.call(this,e,t,n),this.className="Namespace",this.children=[],this.options=i||{},this.syntax=r||"proto2"}).prototype=Object.create(T.prototype)).getChildren=function(e){var t,n,i;if(null==(e=e||null))return this.children.slice();for(t=[],n=0,i=this.children.length;i>n;++n)this.children[n]instanceof e&&t.push(this.children[n]);return t},o.addChild=function(e){var t;if(t=this.getChild(e.name))if(t instanceof c.Field&&t.name!==t.originalName&&null===this.getChild(t.originalName))t.name=t.originalName;else{if(!(e instanceof c.Field&&e.name!==e.originalName&&null===this.getChild(e.originalName)))throw Error("Duplicate name in namespace "+this.toString(!0)+": "+e.name);e.name=e.originalName}this.children.push(e)},o.getChild=function(e){var t,n,i="number"==typeof e?"id":"name";for(t=0,n=this.children.length;n>t;++t)if(this.children[t][i]===e)return this.children[t];return null},o.resolve=function(e,t){var n,i="string"==typeof e?e.split("."):e,r=this,s=0;if(""===i[s]){for(;null!==r.parent;)r=r.parent;s++}do{do{if(!(r instanceof I.Namespace)){r=null;break}if(!((n=r.getChild(i[s]))&&n instanceof I.T&&(!t||n instanceof I.Namespace))){r=null;break}r=n,s++}while(s<i.length);if(null!=r)break;if(null!==this.parent)return this.parent.resolve(e,t)}while(null!=r);return r},o.qn=function(e){var t,n,i=[],r=e;do{i.unshift(r.name),r=r.parent}while(null!==r);for(t=1;t<=i.length;t++)if(n=i.slice(i.length-t),e===this.resolve(n,e instanceof I.Namespace))return n.join(".");return e.fqn()},o.build=function(){var e,t,n,i={},r=this.children;for(t=0,n=r.length;n>t;++t)(e=r[t])instanceof s&&(i[e.name]=e.build());return Object.defineProperty&&Object.defineProperty(i,"$options",{value:this.buildOpt()}),i},o.buildOpt=function(){var e,t,n,i,r={},s=Object.keys(this.options);for(e=0,t=s.length;t>e;++e)n=s[e],i=this.options[s[e]],r[n]=i;return r},o.getOption=function(e){return void 0===e?this.options:void 0!==this.options[e]?this.options[e]:null},I.Namespace=s,u=(a=function(e,n,i,r){if(this.type=e,this.resolvedType=n,this.isMapKey=i,this.syntax=r,i&&t.MAP_KEY_TYPES.indexOf(e)<0)throw Error("Invalid map key type: "+e.name)}).prototype,a.defaultFieldValue=function(e){if("string"==typeof e&&(e=t.TYPES[e]),void 0===e.defaultValue)throw Error("default value for type "+e.name+" is not supported");return e==t.TYPES.bytes?new n(0):e.defaultValue},u.verifyValue=function(n){var r,s,o,a=function(e,t){throw Error("Illegal value for "+this.toString(!0)+" of type "+this.type.name+": "+e+" ("+t+")")}.bind(this);switch(this.type){case t.TYPES.int32:case t.TYPES.sint32:case t.TYPES.sfixed32:return("number"!=typeof n||n==n&&n%1!=0)&&a(typeof n,"not an integer"),n>4294967295?0|n:n;case t.TYPES.uint32:case t.TYPES.fixed32:return("number"!=typeof n||n==n&&n%1!=0)&&a(typeof n,"not an integer"),n<0?n>>>0:n;case t.TYPES.int64:case t.TYPES.sint64:case t.TYPES.sfixed64:if(t.Long)try{return i(n,!1)}catch(e){a(typeof n,e.message)}else a(typeof n,"requires Long.js");case t.TYPES.uint64:case t.TYPES.fixed64:if(t.Long)try{return i(n,!0)}catch(e){a(typeof n,e.message)}else a(typeof n,"requires Long.js");case t.TYPES.bool:return"boolean"!=typeof n&&a(typeof n,"not a boolean"),n;case t.TYPES.float:case t.TYPES.double:return"number"!=typeof n&&a(typeof n,"not a number"),n;case t.TYPES.string:return"string"==typeof n||n&&n instanceof String||a(typeof n,"not a string"),""+n;case t.TYPES.bytes:return e.isByteBuffer(n)?n:e.wrap(n);case t.TYPES.enum:for(r=this.resolvedType.getChildren(t.Reflect.Enum.Value),o=0;o<r.length;o++){if(r[o].name==n)return r[o].id;if(r[o].id==n)return r[o].id}if("proto3"===this.syntax)return("number"!=typeof n||n==n&&n%1!=0)&&a(typeof n,"not an integer"),(n>4294967295||n<0)&&a(typeof n,"not in range for uint32"),n;a(n,"not a valid enum value");case t.TYPES.group:case t.TYPES.message:if(n&&"object"==typeof n||a(typeof n,"object expected"),n instanceof this.resolvedType.clazz)return n;if(n instanceof t.Builder.Message){for(o in s={},n)n.hasOwnProperty(o)&&(s[o]=n[o]);n=s}return new this.resolvedType.clazz(n)}throw Error("[INTERNAL] Illegal value for "+this.toString(!0)+": "+n+" (undefined type "+this.type+")")},u.calculateLength=function(e,i){if(null===i)return 0;var r;switch(this.type){case t.TYPES.int32:return i<0?n.calculateVarint64(i):n.calculateVarint32(i);case t.TYPES.uint32:return n.calculateVarint32(i);case t.TYPES.sint32:return n.calculateVarint32(n.zigZagEncode32(i));case t.TYPES.fixed32:case t.TYPES.sfixed32:case t.TYPES.float:return 4;case t.TYPES.int64:case t.TYPES.uint64:return n.calculateVarint64(i);case t.TYPES.sint64:return n.calculateVarint64(n.zigZagEncode64(i));case t.TYPES.fixed64:case t.TYPES.sfixed64:return 8;case t.TYPES.bool:return 1;case t.TYPES.enum:return n.calculateVarint32(i);case t.TYPES.double:return 8;case t.TYPES.string:return r=n.calculateUTF8Bytes(i),n.calculateVarint32(r)+r;case t.TYPES.bytes:if(i.remaining()<0)throw Error("Illegal value for "+this.toString(!0)+": "+i.remaining()+" bytes remaining");return n.calculateVarint32(i.remaining())+i.remaining();case t.TYPES.message:return r=this.resolvedType.calculate(i),n.calculateVarint32(r)+r;case t.TYPES.group:return(r=this.resolvedType.calculate(i))+n.calculateVarint32(e<<3|t.WIRE_TYPES.ENDGROUP)}throw Error("[INTERNAL] Illegal value to encode in "+this.toString(!0)+": "+i+" (unknown type)")},u.encodeValue=function(e,i,r){var s,o;if(null===i)return r;switch(this.type){case t.TYPES.int32:i<0?r.writeVarint64(i):r.writeVarint32(i);break;case t.TYPES.uint32:r.writeVarint32(i);break;case t.TYPES.sint32:r.writeVarint32ZigZag(i);break;case t.TYPES.fixed32:r.writeUint32(i);break;case t.TYPES.sfixed32:r.writeInt32(i);break;case t.TYPES.int64:case t.TYPES.uint64:r.writeVarint64(i);break;case t.TYPES.sint64:r.writeVarint64ZigZag(i);break;case t.TYPES.fixed64:r.writeUint64(i);break;case t.TYPES.sfixed64:r.writeInt64(i);break;case t.TYPES.bool:"string"==typeof i?r.writeVarint32("false"===i.toLowerCase()?0:!!i):r.writeVarint32(i?1:0);break;case t.TYPES.enum:r.writeVarint32(i);break;case t.TYPES.float:r.writeFloat32(i);break;case t.TYPES.double:r.writeFloat64(i);break;case t.TYPES.string:r.writeVString(i);break;case t.TYPES.bytes:if(i.remaining()<0)throw Error("Illegal value for "+this.toString(!0)+": "+i.remaining()+" bytes remaining");s=i.offset,r.writeVarint32(i.remaining()),r.append(i),i.offset=s;break;case t.TYPES.message:o=(new n).LE(),this.resolvedType.encode(i,o),r.writeVarint32(o.offset),r.append(o.flip());break;case t.TYPES.group:this.resolvedType.encode(i,r),r.writeVarint32(e<<3|t.WIRE_TYPES.ENDGROUP);break;default:throw Error("[INTERNAL] Illegal value to encode in "+this.toString(!0)+": "+i+" (unknown type)")}return r},u.decode=function(e,n,i){if(n!=this.type.wireType)throw Error("Unexpected wire type for element");var r,s;switch(this.type){case t.TYPES.int32:return 0|e.readVarint32();case t.TYPES.uint32:return e.readVarint32()>>>0;case t.TYPES.sint32:return 0|e.readVarint32ZigZag();case t.TYPES.fixed32:return e.readUint32()>>>0;case t.TYPES.sfixed32:return 0|e.readInt32();case t.TYPES.int64:return e.readVarint64();case t.TYPES.uint64:return e.readVarint64().toUnsigned();case t.TYPES.sint64:return e.readVarint64ZigZag();case t.TYPES.fixed64:return e.readUint64();case t.TYPES.sfixed64:return e.readInt64();case t.TYPES.bool:return!!e.readVarint32();case t.TYPES.enum:return e.readVarint32();case t.TYPES.float:return e.readFloat();case t.TYPES.double:return e.readDouble();case t.TYPES.string:return e.readVString();case t.TYPES.bytes:if(s=e.readVarint32(),e.remaining()<s)throw Error("Illegal number of bytes for "+this.toString(!0)+": "+s+" required but got only "+e.remaining());return(r=e.clone()).limit=r.offset+s,e.offset+=s,r;case t.TYPES.message:return s=e.readVarint32(),this.resolvedType.decode(e,s);case t.TYPES.group:return this.resolvedType.decode(e,-1,i)}throw Error("[INTERNAL] Illegal decode type")},u.valueFromString=function(e){if(!this.isMapKey)throw Error("valueFromString() called on non-map-key element");switch(this.type){case t.TYPES.int32:case t.TYPES.sint32:case t.TYPES.sfixed32:case t.TYPES.uint32:case t.TYPES.fixed32:return this.verifyValue(parseInt(e));case t.TYPES.int64:case t.TYPES.sint64:case t.TYPES.sfixed64:case t.TYPES.uint64:case t.TYPES.fixed64:return this.verifyValue(e);case t.TYPES.bool:return"true"===e;case t.TYPES.string:return this.verifyValue(e);case t.TYPES.bytes:return n.fromBinary(e)}},u.valueToString=function(e){if(!this.isMapKey)throw Error("valueToString() called on non-map-key element");return this.type===t.TYPES.bytes?e.toString("binary"):e.toString()},I.Element=a,(h=(c=function(e,t,n,i,r,o){s.call(this,e,t,n,i,o),this.className="Message",this.extensions=void 0,this.clazz=null,this.isGroup=!!r,this._fields=null,this._fieldsById=null,this._fieldsByName=null}).prototype=Object.create(s.prototype)).build=function(i){var r,s,o,a;if(this.clazz&&!i)return this.clazz;for(r=function(t,i){function r(e,i,s,o){var a,u,c,h,l,d,f;if(null===e||"object"!=typeof e)return o&&o instanceof t.Reflect.Enum&&null!==(a=t.Reflect.Enum.getName(o.object,e))?a:e;if(n.isByteBuffer(e))return i?e.toBase64():e.toBuffer();if(t.Long.isLong(e))return s?e.toString():t.Long.fromValue(e);if(Array.isArray(e))return u=[],e.forEach((function(e,t){u[t]=r(e,i,s,o)})),u;if(u={},e instanceof t.Map){for(h=(c=e.entries()).next();!h.done;h=c.next())u[e.keyElem.valueToString(h.value[0])]=r(h.value[1],i,s,e.valueElem.resolvedType);return u}for(f in l=e.$type,d=void 0,e)e.hasOwnProperty(f)&&(u[f]=l&&(d=l.getChild(f))?r(e[f],i,s,d.resolvedType):r(e[f],i,s));return u}var s,o,a=i.getChildren(t.Reflect.Message.Field),u=i.getChildren(t.Reflect.Message.OneOf),c=function(e){var r,s,o,h;for(t.Builder.Message.call(this),r=0,s=u.length;s>r;++r)this[u[r].name]=null;for(r=0,s=a.length;s>r;++r)this[(o=a[r]).name]=o.repeated?[]:o.map?new t.Map(o):null,!o.required&&"proto3"!==i.syntax||null===o.defaultValue||(this[o.name]=o.defaultValue);if(arguments.length>0)if(1!==arguments.length||null===e||"object"!=typeof e||!("function"!=typeof e.encode||e instanceof c)||Array.isArray(e)||e instanceof t.Map||n.isByteBuffer(e)||e instanceof ArrayBuffer||t.Long&&e instanceof t.Long)for(r=0,s=arguments.length;s>r;++r)void 0!==(h=arguments[r])&&this.$set(a[r].name,h);else this.$set(e)},h=c.prototype=Object.create(t.Builder.Message.prototype);for(h.add=function(e,n,r){var s=i._fieldsByName[e];if(!r){if(!s)throw Error(this+"#"+e+" is undefined");if(!(s instanceof t.Reflect.Message.Field))throw Error(this+"#"+e+" is not a field: "+s.toString(!0));if(!s.repeated)throw Error(this+"#"+e+" is not a repeated field");n=s.verifyValue(n,!0)}return null===this[e]&&(this[e]=[]),this[e].push(n),this},h.$add=h.add,h.set=function(e,n,r){var s,o,a;if(e&&"object"==typeof e){for(s in r=n,e)e.hasOwnProperty(s)&&void 0!==(n=e[s])&&this.$set(s,n,r);return this}if(o=i._fieldsByName[e],r)this[e]=n;else{if(!o)throw Error(this+"#"+e+" is not a field: undefined");if(!(o instanceof t.Reflect.Message.Field))throw Error(this+"#"+e+" is not a field: "+o.toString(!0));this[o.name]=n=o.verifyValue(n)}return o&&o.oneof&&(a=this[o.oneof.name],null!==n?(null!==a&&a!==o.name&&(this[a]=null),this[o.oneof.name]=o.name):a===e&&(this[o.oneof.name]=null)),this},h.$set=h.set,h.get=function(e,n){if(n)return this[e];var r=i._fieldsByName[e];if(!(r&&r instanceof t.Reflect.Message.Field))throw Error(this+"#"+e+" is not a field: undefined");if(!(r instanceof t.Reflect.Message.Field))throw Error(this+"#"+e+" is not a field: "+r.toString(!0));return this[r.name]},h.$get=h.get,s=0;s<a.length;s++)(o=a[s])instanceof t.Reflect.Message.ExtensionField||i.builder.options.populateAccessors&&function(e){var t,n,r,s=e.originalName.replace(/(_[a-zA-Z])/g,(function(e){return e.toUpperCase().replace("_","")}));s=s.substring(0,1).toUpperCase()+s.substring(1),t=e.originalName.replace(/([A-Z])/g,(function(e){return"_"+e})),n=function(t,n){return this[e.name]=n?t:e.verifyValue(t),this},r=function(){return this[e.name]},null===i.getChild("set"+s)&&(h["set"+s]=n),null===i.getChild("set_"+t)&&(h["set_"+t]=n),null===i.getChild("get"+s)&&(h["get"+s]=r),null===i.getChild("get_"+t)&&(h["get_"+t]=r)}(o);return h.encode=function(t,n){var r,s;"boolean"==typeof t&&(n=t,t=void 0),r=!1,t||(t=new e,r=!0),s=t.littleEndian;try{return i.encode(this,t.LE(),n),(r?t.flip():t).LE(s)}catch(e){throw t.LE(s),e}},c.encode=function(e,t,n){return new c(e).encode(t,n)},h.calculate=function(){return i.calculate(this)},h.encodeDelimited=function(e){var t,r=!1;return e||(e=new n,r=!0),t=(new n).LE(),i.encode(this,t).flip(),e.writeVarint32(t.remaining()),e.append(t),r?e.flip():e},h.encodeAB=function(){try{return this.encode().toArrayBuffer()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toArrayBuffer()),e}},h.toArrayBuffer=h.encodeAB,h.encodeNB=function(){try{return this.encode().toBuffer()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toBuffer()),e}},h.toBuffer=h.encodeNB,h.encode64=function(){try{return this.encode().toBase64()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toBase64()),e}},h.toBase64=h.encode64,h.encodeHex=function(){try{return this.encode().toHex()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toHex()),e}},h.toHex=h.encodeHex,h.toRaw=function(e,t){return r(this,!!e,!!t,this.$type)},h.encodeJSON=function(){return JSON.stringify(r(this,!0,!0,this.$type))},c.decode=function(e,t){var r,s;"string"==typeof e&&(e=n.wrap(e,t||"base64")),r=(e=n.isByteBuffer(e)?e:n.wrap(e)).littleEndian;try{return s=i.decode(e.LE()),e.LE(r),s}catch(t){throw e.LE(r),t}},c.decodeDelimited=function(e,t){var r,s,o;if("string"==typeof e&&(e=n.wrap(e,t||"base64")),(e=n.isByteBuffer(e)?e:n.wrap(e)).remaining()<1)return null;if(r=e.offset,s=e.readVarint32(),e.remaining()<s)return e.offset=r,null;try{return o=i.decode(e.slice(e.offset,e.offset+s).LE()),e.offset+=s,o}catch(t){throw e.offset+=s,t}},c.decode64=function(e){return c.decode(e,"base64")},c.decodeHex=function(e){return c.decode(e,"hex")},c.decodeJSON=function(e){return new c(JSON.parse(e))},h.toString=function(){return i.toString()},Object.defineProperty&&(Object.defineProperty(c,"$options",{value:i.buildOpt()}),Object.defineProperty(h,"$options",{value:c.$options}),Object.defineProperty(c,"$type",{value:i}),Object.defineProperty(h,"$type",{value:i})),c}(t,this),this._fields=[],this._fieldsById={},this._fieldsByName={},o=0,a=this.children.length;a>o;o++)if((s=this.children[o])instanceof g||s instanceof c||s instanceof v){if(r.hasOwnProperty(s.name))throw Error("Illegal reflect child of "+this.toString(!0)+": "+s.toString(!0)+" cannot override static property \'"+s.name+"\'");r[s.name]=s.build()}else if(s instanceof c.Field)s.build(),this._fields.push(s),this._fieldsById[s.id]=s,this._fieldsByName[s.name]=s;else if(!(s instanceof c.OneOf||s instanceof y))throw Error("Illegal reflect child of "+this.toString(!0)+": "+this.children[o].toString(!0));return this.clazz=r},h.encode=function(e,t,n){var i,r,s,o,a,u=null;for(s=0,o=this._fields.length;o>s;++s)r=e[(i=this._fields[s]).name],i.required&&null===r?null===u&&(u=i):i.encode(n?r:i.verifyValue(r),t,e);if(null!==u)throw(a=Error("Missing at least one required field for "+this.toString(!0)+": "+u)).encoded=t,a;return t},h.calculate=function(e){for(var t,n,i=0,r=0,s=this._fields.length;s>r;++r){if(n=e[(t=this._fields[r]).name],t.required&&null===n)throw Error("Missing at least one required field for "+this.toString(!0)+": "+t);i+=t.calculate(n,e)}return i},h.decode=function(e,n,i){var s,o,a,u,c,h,l,d,f,p,g,_;for(n="number"==typeof n?n:-1,c=e.offset,h=new this.clazz;e.offset<c+n||-1===n&&e.remaining()>0;){if(a=(s=e.readVarint32())>>>3,(o=7&s)===t.WIRE_TYPES.ENDGROUP){if(a!==i)throw Error("Illegal group end indicator for "+this.toString(!0)+": "+a+" ("+(i?i+" expected":"not a group")+")");break}if(u=this._fieldsById[a])u.repeated&&!u.options.packed?h[u.name].push(u.decode(o,e)):u.map?(d=u.decode(o,e),h[u.name].set(d[0],d[1])):(h[u.name]=u.decode(o,e),u.oneof&&(null!==(f=h[u.oneof.name])&&f!==u.name&&(h[f]=null),h[u.oneof.name]=u.name));else switch(o){case t.WIRE_TYPES.VARINT:e.readVarint32();break;case t.WIRE_TYPES.BITS32:e.offset+=4;break;case t.WIRE_TYPES.BITS64:e.offset+=8;break;case t.WIRE_TYPES.LDELIM:l=e.readVarint32(),e.offset+=l;break;case t.WIRE_TYPES.STARTGROUP:for(;r(a,e););break;default:throw Error("Illegal wire type for unknown field "+a+" in "+this.toString(!0)+"#decode: "+o)}}for(p=0,g=this._fields.length;g>p;++p)if(null===h[(u=this._fields[p]).name])if("proto3"===this.syntax)h[u.name]=u.defaultValue;else{if(u.required)throw(_=Error("Missing at least one required field for "+this.toString(!0)+": "+u.name)).decoded=h,_;t.populateDefaults&&null!==u.defaultValue&&(h[u.name]=u.defaultValue)}return h},I.Message=c,(d=(l=function(e,n,i,r,s,o,a,u,h,l){T.call(this,e,n,o),this.className="Message.Field",this.required="required"===i,this.repeated="repeated"===i,this.map="map"===i,this.keyType=r||null,this.type=s,this.resolvedType=null,this.id=a,this.options=u||{},this.defaultValue=null,this.oneof=h||null,this.syntax=l||"proto2",this.originalName=this.name,this.element=null,this.keyElement=null,!this.builder.options.convertFieldsToCamelCase||this instanceof c.ExtensionField||(this.name=t.Util.toCamelCase(this.name))}).prototype=Object.create(T.prototype)).build=function(){this.element=new a(this.type,this.resolvedType,!1,this.syntax),this.map&&(this.keyElement=new a(this.keyType,void 0,!0,this.syntax)),"proto3"!==this.syntax||this.repeated||this.map?void 0!==this.options.default&&(this.defaultValue=this.verifyValue(this.options.default)):this.defaultValue=a.defaultFieldValue(this.type)},d.verifyValue=function(e,n){var i,r,s;if(n=n||!1,i=function(e,t){throw Error("Illegal value for "+this.toString(!0)+" of type "+this.type.name+": "+e+" ("+t+")")}.bind(this),null===e)return this.required&&i(typeof e,"required"),"proto3"===this.syntax&&this.type!==t.TYPES.message&&i(typeof e,"proto3 field without field presence cannot be null"),null;if(this.repeated&&!n){for(Array.isArray(e)||(e=[e]),s=[],r=0;r<e.length;r++)s.push(this.element.verifyValue(e[r]));return s}return this.map&&!n?e instanceof t.Map?e:(e instanceof Object||i(typeof e,"expected ProtoBuf.Map or raw object for map field"),new t.Map(this,e)):(!this.repeated&&Array.isArray(e)&&i(typeof e,"no array expected"),this.element.verifyValue(e))},d.hasWirePresence=function(e,n){if("proto3"!==this.syntax)return null!==e;if(this.oneof&&n[this.oneof.name]===this.name)return!0;switch(this.type){case t.TYPES.int32:case t.TYPES.sint32:case t.TYPES.sfixed32:case t.TYPES.uint32:case t.TYPES.fixed32:return 0!==e;case t.TYPES.int64:case t.TYPES.sint64:case t.TYPES.sfixed64:case t.TYPES.uint64:case t.TYPES.fixed64:return 0!==e.low||0!==e.high;case t.TYPES.bool:return e;case t.TYPES.float:case t.TYPES.double:return 0!==e;case t.TYPES.string:return e.length>0;case t.TYPES.bytes:return e.remaining()>0;case t.TYPES.enum:return 0!==e;case t.TYPES.message:return null!==e;default:return!0}},d.encode=function(e,i,r){var s,o,a,u,c;if(null===this.type||"object"!=typeof this.type)throw Error("[INTERNAL] Unresolved type in "+this.toString(!0)+": "+this.type);if(null===e||this.repeated&&0==e.length)return i;try{if(this.repeated)if(this.options.packed&&t.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0){for(i.writeVarint32(this.id<<3|t.WIRE_TYPES.LDELIM),i.ensureCapacity(i.offset+=1),o=i.offset,s=0;s<e.length;s++)this.element.encodeValue(this.id,e[s],i);a=i.offset-o,(u=n.calculateVarint32(a))>1&&(c=i.slice(o,i.offset),o+=u-1,i.offset=o,i.append(c)),i.writeVarint32(a,o-u)}else for(s=0;s<e.length;s++)i.writeVarint32(this.id<<3|this.type.wireType),this.element.encodeValue(this.id,e[s],i);else this.map?e.forEach((function(e,r){var s=n.calculateVarint32(8|this.keyType.wireType)+this.keyElement.calculateLength(1,r)+n.calculateVarint32(16|this.type.wireType)+this.element.calculateLength(2,e);i.writeVarint32(this.id<<3|t.WIRE_TYPES.LDELIM),i.writeVarint32(s),i.writeVarint32(8|this.keyType.wireType),this.keyElement.encodeValue(1,r,i),i.writeVarint32(16|this.type.wireType),this.element.encodeValue(2,e,i)}),this):this.hasWirePresence(e,r)&&(i.writeVarint32(this.id<<3|this.type.wireType),this.element.encodeValue(this.id,e,i))}catch(t){throw Error("Illegal value for "+this.toString(!0)+": "+e+" ("+t+")")}return i},d.calculate=function(e,i){var r,s,o;if(e=this.verifyValue(e),null===this.type||"object"!=typeof this.type)throw Error("[INTERNAL] Unresolved type in "+this.toString(!0)+": "+this.type);if(null===e||this.repeated&&0==e.length)return 0;r=0;try{if(this.repeated)if(this.options.packed&&t.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0){for(r+=n.calculateVarint32(this.id<<3|t.WIRE_TYPES.LDELIM),o=0,s=0;s<e.length;s++)o+=this.element.calculateLength(this.id,e[s]);r+=n.calculateVarint32(o),r+=o}else for(s=0;s<e.length;s++)r+=n.calculateVarint32(this.id<<3|this.type.wireType),r+=this.element.calculateLength(this.id,e[s]);else this.map?e.forEach((function(e,i){var s=n.calculateVarint32(8|this.keyType.wireType)+this.keyElement.calculateLength(1,i)+n.calculateVarint32(16|this.type.wireType)+this.element.calculateLength(2,e);r+=n.calculateVarint32(this.id<<3|t.WIRE_TYPES.LDELIM),r+=n.calculateVarint32(s),r+=s}),this):this.hasWirePresence(e,i)&&(r+=n.calculateVarint32(this.id<<3|this.type.wireType),r+=this.element.calculateLength(this.id,e))}catch(t){throw Error("Illegal value for "+this.toString(!0)+": "+e+" ("+t+")")}return r},d.decode=function(e,n,i){var r,s,o,u,c,h,l;if(!(!this.map&&e==this.type.wireType||!i&&this.repeated&&this.options.packed&&e==t.WIRE_TYPES.LDELIM||this.map&&e==t.WIRE_TYPES.LDELIM))throw Error("Illegal wire type for field "+this.toString(!0)+": "+e+" ("+this.type.wireType+" expected)");if(e==t.WIRE_TYPES.LDELIM&&this.repeated&&this.options.packed&&t.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0&&!i){for(s=n.readVarint32(),s=n.offset+s,o=[];n.offset<s;)o.push(this.decode(this.type.wireType,n,!0));return o}if(this.map){if(u=a.defaultFieldValue(this.keyType),r=a.defaultFieldValue(this.type),s=n.readVarint32(),n.remaining()<s)throw Error("Illegal number of bytes for "+this.toString(!0)+": "+s+" required but got only "+n.remaining());for((c=n.clone()).limit=c.offset+s,n.offset+=s;c.remaining()>0;)if(e=7&(h=c.readVarint32()),1==(l=h>>>3))u=this.keyElement.decode(c,e,l);else{if(2!==l)throw Error("Unexpected tag in map field key/value submessage");r=this.element.decode(c,e,l)}return[u,r]}return this.element.decode(n,e,this.id)},I.Message.Field=l,(f=function(e,t,n,i,r,s,o){l.call(this,e,t,n,null,i,r,s,o),this.extension}).prototype=Object.create(l.prototype),I.Message.ExtensionField=f,p=function(e,t,n){T.call(this,e,t,n),this.fields=[]},I.Message.OneOf=p,(g=function(e,t,n,i,r){s.call(this,e,t,n,i,r),this.className="Enum",this.object=null}).getName=function(e,t){var n,i,r=Object.keys(e);for(i=0;i<r.length;++i)if(e[n=r[i]]===t)return n;return null},(g.prototype=Object.create(s.prototype)).build=function(e){var n,i,r,s;if(this.object&&!e)return this.object;for(n=new t.Builder.Enum,r=0,s=(i=this.getChildren(g.Value)).length;s>r;++r)n[i[r].name]=i[r].id;return Object.defineProperty&&Object.defineProperty(n,"$options",{value:this.buildOpt(),enumerable:!1}),this.object=n},I.Enum=g,(_=function(e,t,n,i){T.call(this,e,t,n),this.className="Enum.Value",this.id=i}).prototype=Object.create(T.prototype),I.Enum.Value=_,(y=function(e,t,n,i){T.call(this,e,t,n),this.field=i}).prototype=Object.create(T.prototype),I.Extension=y,((v=function(e,t,n,i){s.call(this,e,t,n,i),this.className="Service",this.clazz=null}).prototype=Object.create(s.prototype)).build=function(e){return this.clazz&&!e?this.clazz:this.clazz=function(e,t){var i,r=function(t){e.Builder.Service.call(this),this.rpcImpl=t||function(e,t,n){setTimeout(n.bind(this,Error("Not implemented, see: https://github.com/dcodeIO/ProtoBuf.js/wiki/Services")),0)}},s=r.prototype=Object.create(e.Builder.Service.prototype),o=t.getChildren(e.Reflect.Service.RPCMethod);for(i=0;i<o.length;i++)!function(e){s[e.name]=function(i,r){try{try{i=e.resolvedRequestType.clazz.decode(n.wrap(i))}catch(e){if(!(e instanceof TypeError))throw e}if(null===i||"object"!=typeof i)throw Error("Illegal arguments");i instanceof e.resolvedRequestType.clazz||(i=new e.resolvedRequestType.clazz(i)),this.rpcImpl(e.fqn(),i,(function(n,i){if(!n){try{i=e.resolvedResponseType.clazz.decode(i)}catch(e){}return i&&i instanceof e.resolvedResponseType.clazz?void r(null,i):void r(Error("Illegal response type received in service method "+t.name+"#"+e.name))}r(n)}))}catch(e){setTimeout(r.bind(this,e),0)}},r[e.name]=function(t,n,i){new r(t)[e.name](n,i)},Object.defineProperty&&(Object.defineProperty(r[e.name],"$options",{value:e.buildOpt()}),Object.defineProperty(s[e.name],"$options",{value:r[e.name].$options}))}(o[i]);return Object.defineProperty&&(Object.defineProperty(r,"$options",{value:t.buildOpt()}),Object.defineProperty(s,"$options",{value:r.$options}),Object.defineProperty(r,"$type",{value:t}),Object.defineProperty(s,"$type",{value:t})),r}(t,this)},I.Service=v,((E=function(e,t,n,i){T.call(this,e,t,n),this.className="Service.Method",this.options=i||{}}).prototype=Object.create(T.prototype)).buildOpt=o.buildOpt,I.Service.Method=E,(m=function(e,t,n,i,r,s,o,a){E.call(this,e,t,n,a),this.className="Service.RPCMethod",this.requestName=i,this.responseName=r,this.requestStream=s,this.responseStream=o,this.resolvedRequestType=null,this.resolvedResponseType=null}).prototype=Object.create(E.prototype),I.Service.RPCMethod=m,I}(r),r.Builder=function(e,t,n){function i(e){e.messages&&e.messages.forEach((function(t){t.syntax=e.syntax,i(t)})),e.enums&&e.enums.forEach((function(t){t.syntax=e.syntax}))}var r=function(e){this.ns=new n.Namespace(this,null,""),this.ptr=this.ns,this.resolved=!1,this.result=null,this.files={},this.importRoot=null,this.options=e||{}},s=r.prototype;return r.isMessage=function(e){return"string"==typeof e.name&&void 0===e.values&&void 0===e.rpc},r.isMessageField=function(e){return"string"==typeof e.rule&&"string"==typeof e.name&&"string"==typeof e.type&&void 0!==e.id},r.isEnum=function(e){return"string"==typeof e.name&&!(void 0===e.values||!Array.isArray(e.values)||0===e.values.length)},r.isService=function(e){return!("string"!=typeof e.name||"object"!=typeof e.rpc||!e.rpc)},r.isExtend=function(e){return"string"==typeof e.ref},s.reset=function(){return this.ptr=this.ns,this},s.define=function(e){if("string"!=typeof e||!t.TYPEREF.test(e))throw Error("illegal namespace: "+e);return e.split(".").forEach((function(e){var t=this.ptr.getChild(e);null===t&&this.ptr.addChild(t=new n.Namespace(this,this.ptr,e)),this.ptr=t}),this),this},s.create=function(t){var i,s,o,a,u;if(!t)return this;if(Array.isArray(t)){if(0===t.length)return this;t=t.slice()}else t=[t];for(i=[t];i.length>0;){if(t=i.pop(),!Array.isArray(t))throw Error("not a valid namespace: "+JSON.stringify(t));for(;t.length>0;){if(s=t.shift(),r.isMessage(s)){if(o=new n.Message(this,this.ptr,s.name,s.options,s.isGroup,s.syntax),a={},s.oneofs&&Object.keys(s.oneofs).forEach((function(e){o.addChild(a[e]=new n.Message.OneOf(this,o,e))}),this),s.fields&&s.fields.forEach((function(e){if(null!==o.getChild(0|e.id))throw Error("duplicate or invalid field id in "+o.name+": "+e.id);if(e.options&&"object"!=typeof e.options)throw Error("illegal field options in "+o.name+"#"+e.name);var t=null;if("string"==typeof e.oneof&&!(t=a[e.oneof]))throw Error("illegal oneof in "+o.name+"#"+e.name+": "+e.oneof);e=new n.Message.Field(this,o,e.rule,e.keytype,e.type,e.name,e.id,e.options,t,s.syntax),t&&t.fields.push(e),o.addChild(e)}),this),u=[],s.enums&&s.enums.forEach((function(e){u.push(e)})),s.messages&&s.messages.forEach((function(e){u.push(e)})),s.services&&s.services.forEach((function(e){u.push(e)})),s.extensions&&(o.extensions="number"==typeof s.extensions[0]?[s.extensions]:s.extensions),this.ptr.addChild(o),u.length>0){i.push(t),t=u,u=null,this.ptr=o,o=null;continue}u=null}else if(r.isEnum(s))o=new n.Enum(this,this.ptr,s.name,s.options,s.syntax),s.values.forEach((function(e){o.addChild(new n.Enum.Value(this,o,e.name,e.id))}),this),this.ptr.addChild(o);else if(r.isService(s))o=new n.Service(this,this.ptr,s.name,s.options),Object.keys(s.rpc).forEach((function(e){var t=s.rpc[e];o.addChild(new n.Service.RPCMethod(this,o,e,t.request,t.response,!!t.request_stream,!!t.response_stream,t.options))}),this),this.ptr.addChild(o);else{if(!r.isExtend(s))throw Error("not a valid definition: "+JSON.stringify(s));if(o=this.ptr.resolve(s.ref,!0))s.fields.forEach((function(t){var i,r,s,a;if(null!==o.getChild(0|t.id))throw Error("duplicate extended field id in "+o.name+": "+t.id);if(o.extensions&&(i=!1,o.extensions.forEach((function(e){t.id>=e[0]&&t.id<=e[1]&&(i=!0)})),!i))throw Error("illegal extended field id in "+o.name+": "+t.id+" (not within valid ranges)");r=t.name,this.options.convertFieldsToCamelCase&&(r=e.Util.toCamelCase(r)),s=new n.Message.ExtensionField(this,o,t.rule,t.type,this.ptr.fqn()+"."+r,t.id,t.options),a=new n.Extension(this,this.ptr,t.name,s),s.extension=a,this.ptr.addChild(a),o.addChild(s)}),this);else if(!/\\.?google\\.protobuf\\./.test(s.ref))throw Error("extended message "+s.ref+" is not defined")}s=null,o=null}t=null,this.ptr=this.ptr.parent}return this.resolved=!1,this.result=null,this},s.import=function(t,n){var r,s,o,a,u,c,h,l,d="/";if("string"==typeof n){if(e.Util.IS_NODE,!0===this.files[n])return this.reset();this.files[n]=!0}else if("object"==typeof n){if(r=n.root,e.Util.IS_NODE,(r.indexOf("\\\\")>=0||n.file.indexOf("\\\\")>=0)&&(d="\\\\"),s=r+d+n.file,!0===this.files[s])return this.reset();this.files[s]=!0}if(t.imports&&t.imports.length>0){for(a=!1,"object"==typeof n?(this.importRoot=n.root,a=!0,o=this.importRoot,n=n.file,(o.indexOf("\\\\")>=0||n.indexOf("\\\\")>=0)&&(d="\\\\")):"string"==typeof n?this.importRoot?o=this.importRoot:n.indexOf("/")>=0?""===(o=n.replace(/\\/[^\\/]*$/,""))&&(o="/"):n.indexOf("\\\\")>=0?(o=n.replace(/\\\\[^\\\\]*$/,""),d="\\\\"):o=".":o=null,u=0;u<t.imports.length;u++)if("string"==typeof t.imports[u]){if(!o)throw Error("cannot determine import root");if("google/protobuf/descriptor.proto"===(c=t.imports[u]))continue;if(c=o+d+c,!0===this.files[c])continue;if(/\\.proto$/i.test(c)&&!e.DotProto&&(c=c.replace(/\\.proto$/,".json")),null===(h=e.Util.fetch(c)))throw Error("failed to import \'"+c+"\' in \'"+n+"\': file not found");/\\.json$/i.test(c)?this.import(JSON.parse(h+""),c):this.import(e.DotProto.Parser.parse(h),c)}else n?/\\.(\\w+)$/.test(n)?this.import(t.imports[u],n.replace(/^(.+)\\.(\\w+)$/,(function(e,t,n){return t+"_import"+u+"."+n}))):this.import(t.imports[u],n+"_import"+u):this.import(t.imports[u]);a&&(this.importRoot=null)}return t.package&&this.define(t.package),t.syntax&&i(t),l=this.ptr,t.options&&Object.keys(t.options).forEach((function(e){l.options[e]=t.options[e]})),t.messages&&(this.create(t.messages),this.ptr=l),t.enums&&(this.create(t.enums),this.ptr=l),t.services&&(this.create(t.services),this.ptr=l),t.extends&&this.create(t.extends),this.reset()},s.resolveAll=function(){var i;if(null==this.ptr||"object"==typeof this.ptr.type)return this;if(this.ptr instanceof n.Namespace)this.ptr.children.forEach((function(e){this.ptr=e,this.resolveAll()}),this);else if(this.ptr instanceof n.Message.Field){if(t.TYPE.test(this.ptr.type))this.ptr.type=e.TYPES[this.ptr.type];else{if(!t.TYPEREF.test(this.ptr.type))throw Error("illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);if(!(i=(this.ptr instanceof n.Message.ExtensionField?this.ptr.extension.parent:this.ptr.parent).resolve(this.ptr.type,!0)))throw Error("unresolvable type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);if(this.ptr.resolvedType=i,i instanceof n.Enum){if(this.ptr.type=e.TYPES.enum,"proto3"===this.ptr.syntax&&"proto3"!==i.syntax)throw Error("proto3 message cannot reference proto2 enum")}else{if(!(i instanceof n.Message))throw Error("illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);this.ptr.type=i.isGroup?e.TYPES.group:e.TYPES.message}}if(this.ptr.map){if(!t.TYPE.test(this.ptr.keyType))throw Error("illegal key type for map field in "+this.ptr.toString(!0)+": "+this.ptr.keyType);this.ptr.keyType=e.TYPES[this.ptr.keyType]}}else if(this.ptr instanceof e.Reflect.Service.Method){if(!(this.ptr instanceof e.Reflect.Service.RPCMethod))throw Error("illegal service type in "+this.ptr.toString(!0));if(!((i=this.ptr.parent.resolve(this.ptr.requestName,!0))&&i instanceof e.Reflect.Message))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.requestName);if(this.ptr.resolvedRequestType=i,!((i=this.ptr.parent.resolve(this.ptr.responseName,!0))&&i instanceof e.Reflect.Message))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.responseName);this.ptr.resolvedResponseType=i}else if(!(this.ptr instanceof e.Reflect.Message.OneOf||this.ptr instanceof e.Reflect.Extension||this.ptr instanceof e.Reflect.Enum.Value))throw Error("illegal object in namespace: "+typeof this.ptr+": "+this.ptr);return this.reset()},s.build=function(e){var t,n,i;if(this.reset(),this.resolved||(this.resolveAll(),this.resolved=!0,this.result=null),null===this.result&&(this.result=this.ns.build()),!e)return this.result;for(t="string"==typeof e?e.split("."):e,n=this.result,i=0;i<t.length;i++){if(!n[t[i]]){n=null;break}n=n[t[i]]}return n},s.lookup=function(e,t){return e?this.ns.resolve(e,t):this.ns},s.toString=function(){return"Builder"},r.Message=function(){},r.Enum=function(){},r.Service=function(){},r}(r,r.Lang,r.Reflect),r.Map=function(e,t){function n(e){var t=0;return{next:function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}}var i=function(e,n){var i,r,s,o;if(!e.map)throw Error("field is not a map");if(this.field=e,this.keyElem=new t.Element(e.keyType,null,!0,e.syntax),this.valueElem=new t.Element(e.type,e.resolvedType,!1,e.syntax),this.map={},Object.defineProperty(this,"size",{get:function(){return Object.keys(this.map).length}}),n)for(i=Object.keys(n),r=0;r<i.length;r++)s=this.keyElem.valueFromString(i[r]),o=this.valueElem.verifyValue(n[i[r]]),this.map[this.keyElem.valueToString(s)]={key:s,value:o}},r=i.prototype;return r.clear=function(){this.map={}},r.delete=function(e){var t=this.keyElem.valueToString(this.keyElem.verifyValue(e)),n=t in this.map;return delete this.map[t],n},r.entries=function(){var e,t,i=[],r=Object.keys(this.map);for(t=0;t<r.length;t++)i.push([(e=this.map[r[t]]).key,e.value]);return n(i)},r.keys=function(){var e,t=[],i=Object.keys(this.map);for(e=0;e<i.length;e++)t.push(this.map[i[e]].key);return n(t)},r.values=function(){var e,t=[],i=Object.keys(this.map);for(e=0;e<i.length;e++)t.push(this.map[i[e]].value);return n(t)},r.forEach=function(e,t){var n,i,r=Object.keys(this.map);for(i=0;i<r.length;i++)e.call(t,(n=this.map[r[i]]).value,n.key,this)},r.set=function(e,t){var n=this.keyElem.verifyValue(e),i=this.valueElem.verifyValue(t);return this.map[this.keyElem.valueToString(n)]={key:n,value:i},this},r.get=function(e){var t=this.keyElem.valueToString(this.keyElem.verifyValue(e));return t in this.map?this.map[t].value:void 0},r.has=function(e){return this.keyElem.valueToString(this.keyElem.verifyValue(e))in this.map},i}(0,r.Reflect),r.loadProto=function(e,t,n){return("string"==typeof t||t&&"string"==typeof t.file&&"string"==typeof t.root)&&(n=t,t=void 0),r.loadJson(r.DotProto.Parser.parse(e),t,n)},r.protoFromString=r.loadProto,r.loadProtoFile=function(e,t,n){if(t&&"object"==typeof t?(n=t,t=null):t&&"function"==typeof t||(t=null),t)return r.Util.fetch("string"==typeof e?e:e.root+"/"+e.file,(function(i){if(null!==i)try{t(null,r.loadProto(i,n,e))}catch(e){t(e)}else t(Error("Failed to fetch file"))}));var i=r.Util.fetch("object"==typeof e?e.root+"/"+e.file:e);return null===i?null:r.loadProto(i,n,e)},r.protoFromFile=r.loadProtoFile,r.newBuilder=function(e){return void 0===(e=e||{}).convertFieldsToCamelCase&&(e.convertFieldsToCamelCase=r.convertFieldsToCamelCase),void 0===e.populateAccessors&&(e.populateAccessors=r.populateAccessors),new r.Builder(e)},r.loadJson=function(e,t,n){return("string"==typeof t||t&&"string"==typeof t.file&&"string"==typeof t.root)&&(n=t,t=null),t&&"object"==typeof t||(t=r.newBuilder()),"string"==typeof e&&(e=JSON.parse(e)),t.import(e,n),t.resolveAll(),t},r.loadJsonFile=function(e,t,n){if(t&&"object"==typeof t?(n=t,t=null):t&&"function"==typeof t||(t=null),t)return r.Util.fetch("string"==typeof e?e:e.root+"/"+e.file,(function(i){if(null!==i)try{t(null,r.loadJson(JSON.parse(i),n,e))}catch(e){t(e)}else t(Error("Failed to fetch file"))}));var i=r.Util.fetch("object"==typeof e?e.root+"/"+e.file:e);return null===i?null:r.loadJson(JSON.parse(i),n,e)},i=ui,r.loadProto(i,void 0,"").build("Modules").probuf}(function(e){function t(e){var t=0;return function(){return t<e.length?e.charCodeAt(t++):null}}function n(){var e=[],t=[];return function(){return 0===arguments.length?t.join("")+a.apply(String,e):(e.length+arguments.length>1024&&(t.push(a.apply(String,e)),e.length=0),void Array.prototype.push.apply(e,arguments))}}function i(e,t,n,i,r){var s,o,a=8*r-i-1,u=(1<<a)-1,c=u>>1,h=-7,l=n?r-1:0,d=n?-1:1,f=e[t+l];for(l+=d,s=f&(1<<-h)-1,f>>=-h,h+=a;h>0;s=256*s+e[t+l],l+=d,h-=8);for(o=s&(1<<-h)-1,s>>=-h,h+=i;h>0;o=256*o+e[t+l],l+=d,h-=8);if(0===s)s=1-c;else{if(s===u)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,i),s-=c}return(f?-1:1)*o*Math.pow(2,s-i)}function r(e,t,n,i,r,s){var o,a,u,c=8*s-r-1,h=(1<<c)-1,l=h>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:s-1,p=i?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||1/0===t?(a=isNaN(t)?1:0,o=h):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),(t+=o+l>=1?d/u:d*Math.pow(2,1-l))*u>=2&&(o++,u/=2),o+l>=h?(a=0,o=h):o+l>=1?(a=(t*u-1)*Math.pow(2,r),o+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,r),o=0));r>=8;e[n+f]=255&a,f+=p,a/=256,r-=8);for(o=o<<r|a,c+=r;c>0;e[n+f]=255&o,f+=p,o/=256,c-=8);e[n+f-p]|=128*g}var s,o,a,u,c,h=function(e,t,n){if(void 0===e&&(e=h.DEFAULT_CAPACITY),void 0===t&&(t=h.DEFAULT_ENDIAN),void 0===n&&(n=h.DEFAULT_NOASSERT),!n){if((e|=0)<0)throw RangeError("Illegal capacity");t=!!t,n=!!n}this.buffer=0===e?o:new ArrayBuffer(e),this.view=0===e?null:new Uint8Array(this.buffer),this.offset=0,this.markedOffset=-1,this.limit=e,this.littleEndian=t,this.noAssert=n};return h.VERSION="5.0.1",h.LITTLE_ENDIAN=!0,h.BIG_ENDIAN=!1,h.DEFAULT_CAPACITY=16,h.DEFAULT_ENDIAN=h.BIG_ENDIAN,h.DEFAULT_NOASSERT=!1,h.Long=e||null,(s=h.prototype).__isByteBuffer__,Object.defineProperty(s,"__isByteBuffer__",{value:!0,enumerable:!1,configurable:!1}),o=new ArrayBuffer(0),a=String.fromCharCode,h.accessor=function(){return Uint8Array},h.allocate=function(e,t,n){return new h(e,t,n)},h.concat=function(e,t,n,i){var r,s,o,a,u,c;for(("boolean"==typeof t||"string"!=typeof t)&&(i=n,n=t,t=void 0),r=0,o=0,a=e.length;a>o;++o)h.isByteBuffer(e[o])||(e[o]=h.wrap(e[o],t)),(s=e[o].limit-e[o].offset)>0&&(r+=s);if(0===r)return new h(0,n,i);for(c=new h(r,n,i),o=0;a>o;)(s=(u=e[o++]).limit-u.offset)<=0||(c.view.set(u.view.subarray(u.offset,u.limit),c.offset),c.offset+=s);return c.limit=c.offset,c.offset=0,c},h.isByteBuffer=function(e){return!0===(e&&e.__isByteBuffer__)},h.type=function(){return ArrayBuffer},h.wrap=function(e,t,n,i){var r,o;if("string"!=typeof t&&(i=n,n=t,t=void 0),"string"==typeof e)switch(void 0===t&&(t="utf8"),t){case"base64":return h.fromBase64(e,n);case"hex":return h.fromHex(e,n);case"binary":return h.fromBinary(e,n);case"utf8":return h.fromUTF8(e,n);case"debug":return h.fromDebug(e,n);default:throw Error("Unsupported encoding: "+t)}if(null===e||"object"!=typeof e)throw TypeError("Illegal buffer");if(h.isByteBuffer(e))return(r=s.clone.call(e)).markedOffset=-1,r;if(e instanceof Uint8Array)r=new h(0,n,i),e.length>0&&(r.buffer=e.buffer,r.offset=e.byteOffset,r.limit=e.byteOffset+e.byteLength,r.view=new Uint8Array(e.buffer));else if(e instanceof ArrayBuffer)r=new h(0,n,i),e.byteLength>0&&(r.buffer=e,r.offset=0,r.limit=e.byteLength,r.view=e.byteLength>0?new Uint8Array(e):null);else{if("[object Array]"!==Object.prototype.toString.call(e))throw TypeError("Illegal buffer");for((r=new h(e.length,n,i)).limit=e.length,o=0;o<e.length;++o)r.view[o]=e[o]}return r},s.writeBitSet=function(e,t){var n,i,r,s,o,a,u=void 0===t;if(u&&(t=this.offset),!this.noAssert){if(!(e instanceof Array))throw TypeError("Illegal BitSet: Not an array");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}for(i=t,s=(r=e.length)>>3,o=0,t+=this.writeVarint32(r,t);s--;)n=1&!!e[o++]|(1&!!e[o++])<<1|(1&!!e[o++])<<2|(1&!!e[o++])<<3|(1&!!e[o++])<<4|(1&!!e[o++])<<5|(1&!!e[o++])<<6|(1&!!e[o++])<<7,this.writeByte(n,t++);if(r>o){for(a=0,n=0;r>o;)n|=(1&!!e[o++])<<a++;this.writeByte(n,t++)}return u?(this.offset=t,this):t-i},s.readBitSet=function(e){var t,n,i,r,s,o,a,u=void 0===e;for(u&&(e=this.offset),r=(i=(n=this.readVarint32(e)).value)>>3,s=0,o=[],e+=n.length;r--;)t=this.readByte(e++),o[s++]=!!(1&t),o[s++]=!!(2&t),o[s++]=!!(4&t),o[s++]=!!(8&t),o[s++]=!!(16&t),o[s++]=!!(32&t),o[s++]=!!(64&t),o[s++]=!!(128&t);if(i>s)for(a=0,t=this.readByte(e++);i>s;)o[s++]=!!(1&t>>a++);return u&&(this.offset=e),o},s.readBytes=function(e,t){var n,i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+e>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+"+e+") <= "+this.buffer.byteLength)}return n=this.slice(t,t+e),i&&(this.offset+=e),n},s.writeBytes=s.append,s.writeInt8=function(e,t){var n,i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}return(t+=1)>(n=this.buffer.byteLength)&&this.resize((n*=2)>t?n:t),t-=1,this.view[t]=e,i&&(this.offset+=1),this},s.writeByte=s.writeInt8,s.readInt8=function(e){var t,n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}return 128==(128&(t=this.view[e]))&&(t=-(255-t+1)),n&&(this.offset+=1),t},s.readByte=s.readInt8,s.writeUint8=function(e,t){var n,i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}return(t+=1)>(n=this.buffer.byteLength)&&this.resize((n*=2)>t?n:t),t-=1,this.view[t]=e,i&&(this.offset+=1),this},s.writeUInt8=s.writeUint8,s.readUint8=function(e){var t,n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}return t=this.view[e],n&&(this.offset+=1),t},s.readUInt8=s.readUint8,s.writeInt16=function(e,t){var n,i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}return(t+=2)>(n=this.buffer.byteLength)&&this.resize((n*=2)>t?n:t),t-=2,this.littleEndian?(this.view[t+1]=(65280&e)>>>8,this.view[t]=255&e):(this.view[t]=(65280&e)>>>8,this.view[t+1]=255&e),i&&(this.offset+=2),this},s.writeShort=s.writeInt16,s.readInt16=function(e){var t,n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+2) <= "+this.buffer.byteLength)}return t=0,this.littleEndian?(t=this.view[e],t|=this.view[e+1]<<8):(t=this.view[e]<<8,t|=this.view[e+1]),32768==(32768&t)&&(t=-(65535-t+1)),n&&(this.offset+=2),t},s.readShort=s.readInt16,s.writeUint16=function(e,t){var n,i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}return(t+=2)>(n=this.buffer.byteLength)&&this.resize((n*=2)>t?n:t),t-=2,this.littleEndian?(this.view[t+1]=(65280&e)>>>8,this.view[t]=255&e):(this.view[t]=(65280&e)>>>8,this.view[t+1]=255&e),i&&(this.offset+=2),this},s.writeUInt16=s.writeUint16,s.readUint16=function(e){var t,n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+2) <= "+this.buffer.byteLength)}return t=0,this.littleEndian?(t=this.view[e],t|=this.view[e+1]<<8):(t=this.view[e]<<8,t|=this.view[e+1]),n&&(this.offset+=2),t},s.readUInt16=s.readUint16,s.writeInt32=function(e,t){var n,i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}return(t+=4)>(n=this.buffer.byteLength)&&this.resize((n*=2)>t?n:t),t-=4,this.littleEndian?(this.view[t+3]=255&e>>>24,this.view[t+2]=255&e>>>16,this.view[t+1]=255&e>>>8,this.view[t]=255&e):(this.view[t]=255&e>>>24,this.view[t+1]=255&e>>>16,this.view[t+2]=255&e>>>8,this.view[t+3]=255&e),i&&(this.offset+=4),this},s.writeInt=s.writeInt32,s.readInt32=function(e){var t,n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}return t=0,this.littleEndian?(t=this.view[e+2]<<16,t|=this.view[e+1]<<8,t|=this.view[e],t+=this.view[e+3]<<24>>>0):(t=this.view[e+1]<<16,t|=this.view[e+2]<<8,t|=this.view[e+3],t+=this.view[e]<<24>>>0),t|=0,n&&(this.offset+=4),t},s.readInt=s.readInt32,s.writeUint32=function(e,t){var n,i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}return(t+=4)>(n=this.buffer.byteLength)&&this.resize((n*=2)>t?n:t),t-=4,this.littleEndian?(this.view[t+3]=255&e>>>24,this.view[t+2]=255&e>>>16,this.view[t+1]=255&e>>>8,this.view[t]=255&e):(this.view[t]=255&e>>>24,this.view[t+1]=255&e>>>16,this.view[t+2]=255&e>>>8,this.view[t+3]=255&e),i&&(this.offset+=4),this},s.writeUInt32=s.writeUint32,s.readUint32=function(e){var t,n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}return t=0,this.littleEndian?(t=this.view[e+2]<<16,t|=this.view[e+1]<<8,t|=this.view[e],t+=this.view[e+3]<<24>>>0):(t=this.view[e+1]<<16,t|=this.view[e+2]<<8,t|=this.view[e+3],t+=this.view[e]<<24>>>0),n&&(this.offset+=4),t},s.readUInt32=s.readUint32,e&&(s.writeInt64=function(t,n){var i,r,s,o=void 0===n;if(o&&(n=this.offset),!this.noAssert){if("number"==typeof t)t=e.fromNumber(t);else if("string"==typeof t)t=e.fromString(t);else if(!(t&&t instanceof e))throw TypeError("Illegal value: "+t+" (not an integer or Long)");if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}return"number"==typeof t?t=e.fromNumber(t):"string"==typeof t&&(t=e.fromString(t)),(n+=8)>(i=this.buffer.byteLength)&&this.resize((i*=2)>n?i:n),n-=8,r=t.low,s=t.high,this.littleEndian?(this.view[n+3]=255&r>>>24,this.view[n+2]=255&r>>>16,this.view[n+1]=255&r>>>8,this.view[n]=255&r,n+=4,this.view[n+3]=255&s>>>24,this.view[n+2]=255&s>>>16,this.view[n+1]=255&s>>>8,this.view[n]=255&s):(this.view[n]=255&s>>>24,this.view[n+1]=255&s>>>16,this.view[n+2]=255&s>>>8,this.view[n+3]=255&s,n+=4,this.view[n]=255&r>>>24,this.view[n+1]=255&r>>>16,this.view[n+2]=255&r>>>8,this.view[n+3]=255&r),o&&(this.offset+=8),this},s.writeLong=s.writeInt64,s.readInt64=function(t){var n,i,r,s=void 0===t;if(s&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+8) <= "+this.buffer.byteLength)}return n=0,i=0,this.littleEndian?(n=this.view[t+2]<<16,n|=this.view[t+1]<<8,n|=this.view[t],n+=this.view[t+3]<<24>>>0,t+=4,i=this.view[t+2]<<16,i|=this.view[t+1]<<8,i|=this.view[t],i+=this.view[t+3]<<24>>>0):(i=this.view[t+1]<<16,i|=this.view[t+2]<<8,i|=this.view[t+3],i+=this.view[t]<<24>>>0,t+=4,n=this.view[t+1]<<16,n|=this.view[t+2]<<8,n|=this.view[t+3],n+=this.view[t]<<24>>>0),r=new e(n,i,!1),s&&(this.offset+=8),r},s.readLong=s.readInt64,s.writeUint64=function(t,n){var i,r,s,o=void 0===n;if(o&&(n=this.offset),!this.noAssert){if("number"==typeof t)t=e.fromNumber(t);else if("string"==typeof t)t=e.fromString(t);else if(!(t&&t instanceof e))throw TypeError("Illegal value: "+t+" (not an integer or Long)");if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}return"number"==typeof t?t=e.fromNumber(t):"string"==typeof t&&(t=e.fromString(t)),(n+=8)>(i=this.buffer.byteLength)&&this.resize((i*=2)>n?i:n),n-=8,r=t.low,s=t.high,this.littleEndian?(this.view[n+3]=255&r>>>24,this.view[n+2]=255&r>>>16,this.view[n+1]=255&r>>>8,this.view[n]=255&r,n+=4,this.view[n+3]=255&s>>>24,this.view[n+2]=255&s>>>16,this.view[n+1]=255&s>>>8,this.view[n]=255&s):(this.view[n]=255&s>>>24,this.view[n+1]=255&s>>>16,this.view[n+2]=255&s>>>8,this.view[n+3]=255&s,n+=4,this.view[n]=255&r>>>24,this.view[n+1]=255&r>>>16,this.view[n+2]=255&r>>>8,this.view[n+3]=255&r),o&&(this.offset+=8),this},s.writeUInt64=s.writeUint64,s.readUint64=function(t){var n,i,r,s=void 0===t;if(s&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+8) <= "+this.buffer.byteLength)}return n=0,i=0,this.littleEndian?(n=this.view[t+2]<<16,n|=this.view[t+1]<<8,n|=this.view[t],n+=this.view[t+3]<<24>>>0,t+=4,i=this.view[t+2]<<16,i|=this.view[t+1]<<8,i|=this.view[t],i+=this.view[t+3]<<24>>>0):(i=this.view[t+1]<<16,i|=this.view[t+2]<<8,i|=this.view[t+3],i+=this.view[t]<<24>>>0,t+=4,n=this.view[t+1]<<16,n|=this.view[t+2]<<8,n|=this.view[t+3],n+=this.view[t]<<24>>>0),r=new e(n,i,!0),s&&(this.offset+=8),r},s.readUInt64=s.readUint64),s.writeFloat32=function(e,t){var n,i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if("number"!=typeof e)throw TypeError("Illegal value: "+e+" (not a number)");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}return(t+=4)>(n=this.buffer.byteLength)&&this.resize((n*=2)>t?n:t),t-=4,r(this.view,e,t,this.littleEndian,23,4),i&&(this.offset+=4),this},s.writeFloat=s.writeFloat32,s.readFloat32=function(e){var t,n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}return t=i(this.view,e,this.littleEndian,23,4),n&&(this.offset+=4),t},s.readFloat=s.readFloat32,s.writeFloat64=function(e,t){var n,i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if("number"!=typeof e)throw TypeError("Illegal value: "+e+" (not a number)");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}return(t+=8)>(n=this.buffer.byteLength)&&this.resize((n*=2)>t?n:t),t-=8,r(this.view,e,t,this.littleEndian,52,8),i&&(this.offset+=8),this},s.writeDouble=s.writeFloat64,s.readFloat64=function(e){var t,n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+8) <= "+this.buffer.byteLength)}return t=i(this.view,e,this.littleEndian,52,8),n&&(this.offset+=8),t},s.readDouble=s.readFloat64,h.MAX_VARINT32_BYTES=5,h.calculateVarint32=function(e){return(e>>>=0)<128?1:e<16384?2:1<<21>e?3:1<<28>e?4:5},h.zigZagEncode32=function(e){return((e|=0)<<1^e>>31)>>>0},h.zigZagDecode32=function(e){return 0|e>>>1^-(1&e)},s.writeVarint32=function(e,t){var n,i,r,s=void 0===t;if(s&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}for((t+=i=h.calculateVarint32(e))>(r=this.buffer.byteLength)&&this.resize((r*=2)>t?r:t),t-=i,e>>>=0;e>=128;)n=128|127&e,this.view[t++]=n,e>>>=7;return this.view[t++]=e,s?(this.offset=t,this):i},s.writeVarint32ZigZag=function(e,t){return this.writeVarint32(h.zigZagEncode32(e),t)},s.readVarint32=function(e){var t,n,i,r,s=void 0===e;if(s&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}n=0,i=0;do{if(!this.noAssert&&e>this.limit)throw(r=Error("Truncated")).truncated=!0,r;t=this.view[e++],n<5&&(i|=(127&t)<<7*n),++n}while(0!=(128&t));return i|=0,s?(this.offset=e,i):{value:i,length:n}},s.readVarint32ZigZag=function(e){var t=this.readVarint32(e);return"object"==typeof t?t.value=h.zigZagDecode32(t.value):t=h.zigZagDecode32(t),t},e&&(h.MAX_VARINT64_BYTES=10,h.calculateVarint64=function(t){"number"==typeof t?t=e.fromNumber(t):"string"==typeof t&&(t=e.fromString(t));var n=t.toInt()>>>0,i=t.shiftRightUnsigned(28).toInt()>>>0,r=t.shiftRightUnsigned(56).toInt()>>>0;return 0==r?0==i?n<16384?n<128?1:2:1<<21>n?3:4:i<16384?i<128?5:6:1<<21>i?7:8:r<128?9:10},h.zigZagEncode64=function(t){return"number"==typeof t?t=e.fromNumber(t,!1):"string"==typeof t?t=e.fromString(t,!1):!1!==t.unsigned&&(t=t.toSigned()),t.shiftLeft(1).xor(t.shiftRight(63)).toUnsigned()},h.zigZagDecode64=function(t){return"number"==typeof t?t=e.fromNumber(t,!1):"string"==typeof t?t=e.fromString(t,!1):!1!==t.unsigned&&(t=t.toSigned()),t.shiftRightUnsigned(1).xor(t.and(e.ONE).toSigned().negate()).toSigned()},s.writeVarint64=function(t,n){var i,r,s,o,a,u=void 0===n;if(u&&(n=this.offset),!this.noAssert){if("number"==typeof t)t=e.fromNumber(t);else if("string"==typeof t)t=e.fromString(t);else if(!(t&&t instanceof e))throw TypeError("Illegal value: "+t+" (not an integer or Long)");if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}switch("number"==typeof t?t=e.fromNumber(t,!1):"string"==typeof t?t=e.fromString(t,!1):!1!==t.unsigned&&(t=t.toSigned()),i=h.calculateVarint64(t),r=t.toInt()>>>0,s=t.shiftRightUnsigned(28).toInt()>>>0,o=t.shiftRightUnsigned(56).toInt()>>>0,(n+=i)>(a=this.buffer.byteLength)&&this.resize((a*=2)>n?a:n),n-=i,i){case 10:this.view[n+9]=1&o>>>7;case 9:this.view[n+8]=9!==i?128|o:127&o;case 8:this.view[n+7]=8!==i?128|s>>>21:127&s>>>21;case 7:this.view[n+6]=7!==i?128|s>>>14:127&s>>>14;case 6:this.view[n+5]=6!==i?128|s>>>7:127&s>>>7;case 5:this.view[n+4]=5!==i?128|s:127&s;case 4:this.view[n+3]=4!==i?128|r>>>21:127&r>>>21;case 3:this.view[n+2]=3!==i?128|r>>>14:127&r>>>14;case 2:this.view[n+1]=2!==i?128|r>>>7:127&r>>>7;case 1:this.view[n]=1!==i?128|r:127&r}return u?(this.offset+=i,this):i},s.writeVarint64ZigZag=function(e,t){return this.writeVarint64(h.zigZagEncode64(e),t)},s.readVarint64=function(t){var n,i,r,s,o,a,u=void 0===t;if(u&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}if(n=t,i=0,r=0,s=0,o=0,i=127&(o=this.view[t++]),128&o&&(i|=(127&(o=this.view[t++]))<<7,(128&o||this.noAssert&&void 0===o)&&(i|=(127&(o=this.view[t++]))<<14,(128&o||this.noAssert&&void 0===o)&&(i|=(127&(o=this.view[t++]))<<21,(128&o||this.noAssert&&void 0===o)&&(r=127&(o=this.view[t++]),(128&o||this.noAssert&&void 0===o)&&(r|=(127&(o=this.view[t++]))<<7,(128&o||this.noAssert&&void 0===o)&&(r|=(127&(o=this.view[t++]))<<14,(128&o||this.noAssert&&void 0===o)&&(r|=(127&(o=this.view[t++]))<<21,(128&o||this.noAssert&&void 0===o)&&(s=127&(o=this.view[t++]),(128&o||this.noAssert&&void 0===o)&&(s|=(127&(o=this.view[t++]))<<7,128&o||this.noAssert&&void 0===o))))))))))throw Error("Buffer overrun");return a=e.fromBits(i|r<<28,r>>>4|s<<24,!1),u?(this.offset=t,a):{value:a,length:t-n}},s.readVarint64ZigZag=function(t){var n=this.readVarint64(t);return n&&n.value instanceof e?n.value=h.zigZagDecode64(n.value):n=h.zigZagDecode64(n),n}),s.writeCString=function(e,n){var i,r,s,o=void 0===n;if(o&&(n=this.offset),r=e.length,!this.noAssert){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");for(i=0;r>i;++i)if(0===e.charCodeAt(i))throw RangeError("Illegal str: Contains NULL-characters");if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}return r=c.calculateUTF16asUTF8(t(e))[1],n+=r+1,s=this.buffer.byteLength,n>s&&this.resize((s*=2)>n?s:n),n-=r+1,c.encodeUTF16toUTF8(t(e),function(e){this.view[n++]=e}.bind(this)),this.view[n++]=0,o?(this.offset=n,this):r},s.readCString=function(e){var t,i,r,s=void 0===e;if(s&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}return t=e,r=-1,c.decodeUTF8toUTF16(function(){if(0===r)return null;if(e>=this.limit)throw RangeError("Illegal range: Truncated data, "+e+" < "+this.limit);return 0===(r=this.view[e++])?null:r}.bind(this),i=n(),!0),s?(this.offset=e,i()):{string:i(),length:e-t}},s.writeIString=function(e,n){var i,r,s,o=void 0===n;if(o&&(n=this.offset),!this.noAssert){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}if(r=n,i=c.calculateUTF16asUTF8(t(e),this.noAssert)[1],n+=4+i,s=this.buffer.byteLength,n>s&&this.resize((s*=2)>n?s:n),n-=4+i,this.littleEndian?(this.view[n+3]=255&i>>>24,this.view[n+2]=255&i>>>16,this.view[n+1]=255&i>>>8,this.view[n]=255&i):(this.view[n]=255&i>>>24,this.view[n+1]=255&i>>>16,this.view[n+2]=255&i>>>8,this.view[n+3]=255&i),n+=4,c.encodeUTF16toUTF8(t(e),function(e){this.view[n++]=e}.bind(this)),n!==r+4+i)throw RangeError("Illegal range: Truncated data, "+n+" == "+(n+4+i));return o?(this.offset=n,this):n-r},s.readIString=function(e){var t,n,i,r=void 0===e;if(r&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}return t=e,n=this.readUint32(e),i=this.readUTF8String(n,h.METRICS_BYTES,e+=4),e+=i.length,r?(this.offset=e,i.string):{string:i.string,length:e-t}},h.METRICS_CHARS="c",h.METRICS_BYTES="b",s.writeUTF8String=function(e,n){var i,r,s,o=void 0===n;if(o&&(n=this.offset),!this.noAssert){if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}return r=n,i=c.calculateUTF16asUTF8(t(e))[1],n+=i,s=this.buffer.byteLength,n>s&&this.resize((s*=2)>n?s:n),n-=i,c.encodeUTF16toUTF8(t(e),function(e){this.view[n++]=e}.bind(this)),o?(this.offset=n,this):n-r},s.writeString=s.writeUTF8String,h.calculateUTF8Chars=function(e){return c.calculateUTF16asUTF8(t(e))[0]},h.calculateUTF8Bytes=function(e){return c.calculateUTF16asUTF8(t(e))[1]},h.calculateString=h.calculateUTF8Bytes,s.readUTF8String=function(e,t,i){var r,s,o,a,u;if("number"==typeof t&&(i=t,t=void 0),(r=void 0===i)&&(i=this.offset),void 0===t&&(t=h.METRICS_CHARS),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal length: "+e+" (not an integer)");if(e|=0,"number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}if(o=0,a=i,t===h.METRICS_CHARS){if(s=n(),c.decodeUTF8(function(){return e>o&&i<this.limit?this.view[i++]:null}.bind(this),(function(e){++o,c.UTF8toUTF16(e,s)})),o!==e)throw RangeError("Illegal range: Truncated data, "+o+" == "+e);return r?(this.offset=i,s()):{string:s(),length:i-a}}if(t===h.METRICS_BYTES){if(!this.noAssert){if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+e>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+"+e+") <= "+this.buffer.byteLength)}if(u=i+e,c.decodeUTF8toUTF16(function(){return u>i?this.view[i++]:null}.bind(this),s=n(),this.noAssert),i!==u)throw RangeError("Illegal range: Truncated data, "+i+" == "+u);return r?(this.offset=i,s()):{string:s(),length:i-a}}throw TypeError("Unsupported metrics: "+t)},s.readString=s.readUTF8String,s.writeVString=function(e,n){var i,r,s,o,a=void 0===n;if(a&&(n=this.offset),!this.noAssert){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}if(s=n,i=c.calculateUTF16asUTF8(t(e),this.noAssert)[1],r=h.calculateVarint32(i),n+=r+i,o=this.buffer.byteLength,n>o&&this.resize((o*=2)>n?o:n),n-=r+i,n+=this.writeVarint32(i,n),c.encodeUTF16toUTF8(t(e),function(e){this.view[n++]=e}.bind(this)),n!==s+i+r)throw RangeError("Illegal range: Truncated data, "+n+" == "+(n+i+r));return a?(this.offset=n,this):n-s},s.readVString=function(e){var t,n,i,r=void 0===e;if(r&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}return t=e,n=this.readVarint32(e),i=this.readUTF8String(n.value,h.METRICS_BYTES,e+=n.length),e+=i.length,r?(this.offset=e,i.string):{string:i.string,length:e-t}},s.append=function(e,t,n){var i,r,s;if(("number"==typeof t||"string"!=typeof t)&&(n=t,t=void 0),(i=void 0===n)&&(n=this.offset),!this.noAssert){if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}return e instanceof h||(e=h.wrap(e,t)),(r=e.limit-e.offset)<=0||((n+=r)>(s=this.buffer.byteLength)&&this.resize((s*=2)>n?s:n),n-=r,this.view.set(e.view.subarray(e.offset,e.limit),n),e.offset+=r,i&&(this.offset+=r)),this},s.appendTo=function(e,t){return e.append(this,t),this},s.assert=function(e){return this.noAssert=!e,this},s.capacity=function(){return this.buffer.byteLength},s.clear=function(){return this.offset=0,this.limit=this.buffer.byteLength,this.markedOffset=-1,this},s.clone=function(e){var t=new h(0,this.littleEndian,this.noAssert);return e?(t.buffer=new ArrayBuffer(this.buffer.byteLength),t.view=new Uint8Array(t.buffer)):(t.buffer=this.buffer,t.view=this.view),t.offset=this.offset,t.markedOffset=this.markedOffset,t.limit=this.limit,t},s.compact=function(e,t){var n,i,r;if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}return 0===e&&t===this.buffer.byteLength?this:0==(n=t-e)?(this.buffer=o,this.view=null,this.markedOffset>=0&&(this.markedOffset-=e),this.offset=0,this.limit=0,this):(i=new ArrayBuffer(n),(r=new Uint8Array(i)).set(this.view.subarray(e,t)),this.buffer=i,this.view=r,this.markedOffset>=0&&(this.markedOffset-=e),this.offset=0,this.limit=n,this)},s.copy=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}if(e===t)return new h(0,this.littleEndian,this.noAssert);var n=t-e,i=new h(n,this.littleEndian,this.noAssert);return i.offset=0,i.limit=n,i.markedOffset>=0&&(i.markedOffset-=e),this.copyTo(i,0,e,t),i},s.copyTo=function(e,t,n,i){var r,s,o;if(!this.noAssert&&!h.isByteBuffer(e))throw TypeError("Illegal target: Not a ByteBuffer");if(t=(s=void 0===t)?e.offset:0|t,n=(r=void 0===n)?this.offset:0|n,i=void 0===i?this.limit:0|i,t<0||t>e.buffer.byteLength)throw RangeError("Illegal target range: 0 <= "+t+" <= "+e.buffer.byteLength);if(n<0||i>this.buffer.byteLength)throw RangeError("Illegal source range: 0 <= "+n+" <= "+this.buffer.byteLength);return 0==(o=i-n)?e:(e.ensureCapacity(t+o),e.view.set(this.view.subarray(n,i),t),r&&(this.offset+=o),s&&(e.offset+=o),this)},s.ensureCapacity=function(e){var t=this.buffer.byteLength;return e>t?this.resize((t*=2)>e?t:e):this},s.fill=function(e,t,n){var i=void 0===t;if(i&&(t=this.offset),"string"==typeof e&&e.length>0&&(e=e.charCodeAt(0)),void 0===t&&(t=this.offset),void 0===n&&(n=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof n||n%1!=0)throw TypeError("Illegal end: Not an integer");if(n>>>=0,t<0||t>n||n>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+n+" <= "+this.buffer.byteLength)}if(t>=n)return this;for(;n>t;)this.view[t++]=e;return i&&(this.offset=t),this},s.flip=function(){return this.limit=this.offset,this.offset=0,this},s.mark=function(e){if(e=void 0===e?this.offset:e,!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}return this.markedOffset=e,this},s.order=function(e){if(!this.noAssert&&"boolean"!=typeof e)throw TypeError("Illegal littleEndian: Not a boolean");return this.littleEndian=!!e,this},s.LE=function(e){return this.littleEndian=void 0===e||!!e,this},s.BE=function(e){return this.littleEndian=void 0!==e&&!e,this},s.prepend=function(e,t,n){var i,r,s,o,a;if(("number"==typeof t||"string"!=typeof t)&&(n=t,t=void 0),(i=void 0===n)&&(n=this.offset),!this.noAssert){if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}return e instanceof h||(e=h.wrap(e,t)),(r=e.limit-e.offset)<=0||((s=r-n)>0?(o=new ArrayBuffer(this.buffer.byteLength+s),(a=new Uint8Array(o)).set(this.view.subarray(n,this.buffer.byteLength),r),this.buffer=o,this.view=a,this.offset+=s,this.markedOffset>=0&&(this.markedOffset+=s),this.limit+=s,n+=s):new Uint8Array(this.buffer),this.view.set(e.view.subarray(e.offset,e.limit),n-r),e.offset=e.limit,i&&(this.offset-=r)),this},s.prependTo=function(e,t){return e.prepend(this,t),this},s.printDebug=function(e){"function"!=typeof e&&(e=console.log.bind(console)),e(this.toString()+"\\n-------------------------------------------------------------------\\n"+this.toDebug(!0))},s.remaining=function(){return this.limit-this.offset},s.reset=function(){return this.markedOffset>=0?(this.offset=this.markedOffset,this.markedOffset=-1):this.offset=0,this},s.resize=function(e){var t,n;if(!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal capacity: "+e+" (not an integer)");if((e|=0)<0)throw RangeError("Illegal capacity: 0 <= "+e)}return this.buffer.byteLength<e&&(t=new ArrayBuffer(e),(n=new Uint8Array(t)).set(this.view),this.buffer=t,this.view=n),this},s.reverse=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}return e===t||Array.prototype.reverse.call(this.view.subarray(e,t)),this},s.skip=function(e){if(!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal length: "+e+" (not an integer)");e|=0}var t=this.offset+e;if(!this.noAssert&&(t<0||t>this.buffer.byteLength))throw RangeError("Illegal length: 0 <= "+this.offset+" + "+e+" <= "+this.buffer.byteLength);return this.offset=t,this},s.slice=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}var n=this.clone();return n.offset=e,n.limit=t,n},s.toBuffer=function(e){var t,n=this.offset,i=this.limit;if(!this.noAssert){if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: Not an integer");if(n>>>=0,"number"!=typeof i||i%1!=0)throw TypeError("Illegal limit: Not an integer");if(i>>>=0,n<0||n>i||i>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+n+" <= "+i+" <= "+this.buffer.byteLength)}return e||0!==n||i!==this.buffer.byteLength?n===i?o:(t=new ArrayBuffer(i-n),new Uint8Array(t).set(new Uint8Array(this.buffer).subarray(n,i),0),t):this.buffer},s.toArrayBuffer=s.toBuffer,s.toString=function(e,t,n){if(void 0===e)return"ByteBufferAB(offset="+this.offset+",markedOffset="+this.markedOffset+",limit="+this.limit+",capacity="+this.capacity()+")";switch("number"==typeof e&&(n=t=e="utf8"),e){case"utf8":return this.toUTF8(t,n);case"base64":return this.toBase64(t,n);case"hex":return this.toHex(t,n);case"binary":return this.toBinary(t,n);case"debug":return this.toDebug();case"columns":return this.toColumns();default:throw Error("Unsupported encoding: "+e)}},u=function(){var e,t,n={},i=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47],r=[];for(e=0,t=i.length;t>e;++e)r[i[e]]=e;return n.encode=function(e,t){for(var n,r;null!==(n=e());)t(i[63&n>>2]),r=(3&n)<<4,null!==(n=e())?(t(i[63&((r|=15&n>>4)|15&n>>4)]),r=(15&n)<<2,null!==(n=e())?(t(i[63&(r|3&n>>6)]),t(i[63&n])):(t(i[63&r]),t(61))):(t(i[63&r]),t(61),t(61))},n.decode=function(e,t){function n(e){throw Error("Illegal character code: "+e)}for(var i,s,o;null!==(i=e());)if(void 0===(s=r[i])&&n(i),null!==(i=e())&&(void 0===(o=r[i])&&n(i),t(s<<2>>>0|(48&o)>>4),null!==(i=e()))){if(void 0===(s=r[i])){if(61===i)break;n(i)}if(t((15&o)<<4>>>0|(60&s)>>2),null!==(i=e())){if(void 0===(o=r[i])){if(61===i)break;n(i)}t((3&s)<<6>>>0|o)}}},n.test=function(e){return/^(?:[A-Za-z0-9+\\/]{4})*(?:[A-Za-z0-9+\\/]{2}==|[A-Za-z0-9+\\/]{3}=)?$/.test(e)},n}(),s.toBase64=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),t|=0,(e|=0)<0||t>this.capacity||e>t)throw RangeError("begin, end");var i;return u.encode(function(){return t>e?this.view[e++]:null}.bind(this),i=n()),i()},h.fromBase64=function(e,n){if("string"!=typeof e)throw TypeError("str");var i=new h(e.length/4*3,n),r=0;return u.decode(t(e),(function(e){i.view[r++]=e})),i.limit=r,i},h.btoa=function(e){return h.fromBinary(e).toBase64()},h.atob=function(e){return h.fromBase64(e).toBinary()},s.toBinary=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),t|=0,(e|=0)<0||t>this.capacity()||e>t)throw RangeError("begin, end");if(e===t)return"";for(var n=[],i=[];t>e;)n.push(this.view[e++]),n.length>=1024&&(i.push(String.fromCharCode.apply(String,n)),n=[]);return i.join("")+String.fromCharCode.apply(String,n)},h.fromBinary=function(e,t){if("string"!=typeof e)throw TypeError("str");for(var n,i=0,r=e.length,s=new h(r,t);r>i;){if((n=e.charCodeAt(i))>255)throw RangeError("illegal char code: "+n);s.view[i++]=n}return s.limit=r,s},s.toDebug=function(e){for(var t,n=-1,i=this.buffer.byteLength,r="",s="",o="";i>n;){if(-1!==n&&(r+=(t=this.view[n])<16?"0"+t.toString(16).toUpperCase():t.toString(16).toUpperCase(),e&&(s+=t>32&&t<127?String.fromCharCode(t):".")),++n,e&&n>0&&n%16==0&&n!==i){for(;r.length<51;)r+=" ";o+=r+s+"\\n",r=s=""}r+=n===this.offset&&n===this.limit?n===this.markedOffset?"!":"|":n===this.offset?n===this.markedOffset?"[":"<":n===this.limit?n===this.markedOffset?"]":">":n===this.markedOffset?"\'":e||0!==n&&n!==i?" ":""}if(e&&" "!==r){for(;r.length<51;)r+=" ";o+=r+s+"\\n"}return e?o:r},h.fromDebug=function(e,t,n){for(var i,r,s=e.length,o=new h(0|(s+1)/3,t,n),a=0,u=0,c=!1,l=!1,d=!1,f=!1,p=!1;s>a;){switch(i=e.charAt(a++)){case"!":if(!n){if(l||d||f){p=!0;break}l=d=f=!0}o.offset=o.markedOffset=o.limit=u,c=!1;break;case"|":if(!n){if(l||f){p=!0;break}l=f=!0}o.offset=o.limit=u,c=!1;break;case"[":if(!n){if(l||d){p=!0;break}l=d=!0}o.offset=o.markedOffset=u,c=!1;break;case"<":if(!n){if(l){p=!0;break}l=!0}o.offset=u,c=!1;break;case"]":if(!n){if(f||d){p=!0;break}f=d=!0}o.limit=o.markedOffset=u,c=!1;break;case">":if(!n){if(f){p=!0;break}f=!0}o.limit=u,c=!1;break;case"\'":if(!n){if(d){p=!0;break}d=!0}o.markedOffset=u,c=!1;break;case" ":c=!1;break;default:if(!n&&c){p=!0;break}if(r=parseInt(i+e.charAt(a++),16),!n&&(isNaN(r)||r<0||r>255))throw TypeError("Illegal str: Not a debug encoded string");o.view[u++]=r,c=!0}if(p)throw TypeError("Illegal str: Invalid symbol at "+a)}if(!n){if(!l||!f)throw TypeError("Illegal str: Missing offset or limit");if(u<o.buffer.byteLength)throw TypeError("Illegal str: Not a debug encoded string (is it hex?) "+u+" < "+s)}return o},s.toHex=function(e,t){if(e=void 0===e?this.offset:e,t=void 0===t?this.limit:t,!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}for(var n,i=new Array(t-e);t>e;)(n=this.view[e++])<16?i.push("0",n.toString(16)):i.push(n.toString(16));return i.join("")},h.fromHex=function(e,t,n){var i,r,s,o,a;if(!n){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if(e.length%2!=0)throw TypeError("Illegal str: Length not a multiple of 2")}for(r=e.length,s=new h(0|r/2,t),o=0,a=0;r>o;o+=2){if(i=parseInt(e.substring(o,o+2),16),!n&&(!isFinite(i)||i<0||i>255))throw TypeError("Illegal str: Contains non-hex characters");s.view[a++]=i}return s.limit=a,s},c=function(){var e={MAX_CODEPOINT:1114111,encodeUTF8:function(e,t){var n=null;for("number"==typeof e&&(n=e,e=function(){return null});null!==n||null!==(n=e());)n<128?t(127&n):n<2048?(t(192|31&n>>6),t(128|63&n)):n<65536?(t(224|15&n>>12),t(128|63&n>>6),t(128|63&n)):(t(240|7&n>>18),t(128|63&n>>12),t(128|63&n>>6),t(128|63&n)),n=null},decodeUTF8:function(e,t){for(var n,i,r,s,o=function(e){e=e.slice(0,e.indexOf(null));var t=Error(e.toString());throw t.name="TruncatedError",t.bytes=e,t};null!==(n=e());)if(0==(128&n))t(n);else if(192==(224&n))null===(i=e())&&o([n,i]),t((31&n)<<6|63&i);else if(224==(240&n))(null===(i=e())||null===(r=e()))&&o([n,i,r]),t((15&n)<<12|(63&i)<<6|63&r);else{if(240!=(248&n))throw RangeError("Illegal starting byte: "+n);(null===(i=e())||null===(r=e())||null===(s=e()))&&o([n,i,r,s]),t((7&n)<<18|(63&i)<<12|(63&r)<<6|63&s)}},UTF16toUTF8:function(e,t){for(var n,i=null;null!==(n=null!==i?i:e());)n>=55296&&n<=57343&&null!==(i=e())&&i>=56320&&i<=57343?(t(1024*(n-55296)+i-56320+65536),i=null):t(n);null!==i&&t(i)},UTF8toUTF16:function(e,t){var n=null;for("number"==typeof e&&(n=e,e=function(){return null});null!==n||null!==(n=e());)n<=65535?t(n):(t(55296+((n-=65536)>>10)),t(n%1024+56320)),n=null},encodeUTF16toUTF8:function(t,n){e.UTF16toUTF8(t,(function(t){e.encodeUTF8(t,n)}))},decodeUTF8toUTF16:function(t,n){e.decodeUTF8(t,(function(t){e.UTF8toUTF16(t,n)}))},calculateCodePoint:function(e){return e<128?1:e<2048?2:e<65536?3:4},calculateUTF8:function(e){for(var t,n=0;null!==(t=e());)n+=t<128?1:t<2048?2:t<65536?3:4;return n},calculateUTF16asUTF8:function(t){var n=0,i=0;return e.UTF16toUTF8(t,(function(e){++n,i+=e<128?1:e<2048?2:e<65536?3:4})),[n,i]}};return e}(),s.toUTF8=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}var i;try{c.decodeUTF8toUTF16(function(){return t>e?this.view[e++]:null}.bind(this),i=n())}catch(n){if(e!==t)throw RangeError("Illegal range: Truncated data, "+e+" != "+t)}return i()},h.fromUTF8=function(e,n,i){if(!i&&"string"!=typeof e)throw TypeError("Illegal str: Not a string");var r=new h(c.calculateUTF16asUTF8(t(e),!0)[1],n,i),s=0;return c.encodeUTF16toUTF8(t(e),(function(e){r.view[s++]=e})),r.limit=s,r},h}(ci=function(){function e(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function t(e){return!0===(e&&e.__isLong__)}function n(e,t){var n,i,s;return t?(s=(e>>>=0)>=0&&e<256)&&(i=u[e])?i:(n=r(e,(0|e)<0?-1:0,!0),s&&(u[e]=n),n):(s=(e|=0)>=-128&&e<128)&&(i=a[e])?i:(n=r(e,e<0?-1:0,!1),s&&(a[e]=n),n)}function i(e,t){if(isNaN(e)||!isFinite(e))return t?g:p;if(t){if(e<0)return g;if(e>=l)return m}else{if(-d>=e)return I;if(e+1>=d)return E}return e<0?i(-e,t).neg():r(0|e%h,0|e/h,t)}function r(t,n,i){return new e(t,n,i)}function s(e,t,n){var r,o,a,u,h,l,d;if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return p;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||n>36)throw RangeError("radix");if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return s(e.substring(1),t,n).neg();for(o=i(c(n,8)),a=p,u=0;u<e.length;u+=8)h=Math.min(8,e.length-u),l=parseInt(e.substring(u,u+h),n),h<8?(d=i(c(n,h)),a=a.mul(d).add(i(l))):a=(a=a.mul(o)).add(i(l));return a.unsigned=t,a}function o(t){return t instanceof e?t:"number"==typeof t?i(t):"string"==typeof t?s(t):r(t.low,t.high,t.unsigned)}var a,u,c,h,l,d,f,p,g,_,y,v,E,m,I,T;return e.prototype.__isLong__,Object.defineProperty(e.prototype,"__isLong__",{value:!0,enumerable:!1,configurable:!1}),e.isLong=t,a={},u={},e.fromInt=n,e.fromNumber=i,e.fromBits=r,c=Math.pow,e.fromString=s,e.fromValue=o,d=(l=(h=4294967296)*h)/2,f=n(16777216),p=n(0),e.ZERO=p,g=n(0,!0),e.UZERO=g,_=n(1),e.ONE=_,y=n(1,!0),e.UONE=y,v=n(-1),e.NEG_ONE=v,E=r(-1,2147483647,!1),e.MAX_VALUE=E,m=r(-1,-1,!0),e.MAX_UNSIGNED_VALUE=m,I=r(0,-2147483648,!1),e.MIN_VALUE=I,(T=e.prototype).toInt=function(){return this.unsigned?this.low>>>0:this.low},T.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},T.toString=function(e){var t,n,r,s,o,a,u,h;if((e=e||10)<2||e>36)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())return this.eq(I)?(t=i(e),r=(n=this.div(t)).mul(t).sub(this),n.toString(e)+r.toInt().toString(e)):"-"+this.neg().toString(e);for(s=i(c(e,6),this.unsigned),o=this,a="";;){if(u=o.div(s),h=(o.sub(u.mul(s)).toInt()>>>0).toString(e),(o=u).isZero())return h+a;for(;h.length<6;)h="0"+h;a=""+h+a}},T.getHighBits=function(){return this.high},T.getHighBitsUnsigned=function(){return this.high>>>0},T.getLowBits=function(){return this.low},T.getLowBitsUnsigned=function(){return this.low>>>0},T.getNumBitsAbs=function(){var e,t;if(this.isNegative())return this.eq(I)?64:this.neg().getNumBitsAbs();for(e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},T.isZero=function(){return 0===this.high&&0===this.low},T.isNegative=function(){return!this.unsigned&&this.high<0},T.isPositive=function(){return this.unsigned||this.high>=0},T.isOdd=function(){return 1==(1&this.low)},T.isEven=function(){return 0==(1&this.low)},T.equals=function(e){return t(e)||(e=o(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},T.eq=T.equals,T.notEquals=function(e){return!this.eq(e)},T.neq=T.notEquals,T.lessThan=function(e){return this.comp(e)<0},T.lt=T.lessThan,T.lessThanOrEqual=function(e){return this.comp(e)<=0},T.lte=T.lessThanOrEqual,T.greaterThan=function(e){return this.comp(e)>0},T.gt=T.greaterThan,T.greaterThanOrEqual=function(e){return this.comp(e)>=0},T.gte=T.greaterThanOrEqual,T.compare=function(e){if(t(e)||(e=o(e)),this.eq(e))return 0;var n=this.isNegative(),i=e.isNegative();return n&&!i?-1:!n&&i?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},T.comp=T.compare,T.negate=function(){return!this.unsigned&&this.eq(I)?I:this.not().add(_)},T.neg=T.negate,T.add=function(e){var n,i,s,a,u,c,h,l,d,f,p;return t(e)||(e=o(e)),n=this.high>>>16,i=65535&this.high,s=this.low>>>16,a=65535&this.low,u=e.high>>>16,c=65535&e.high,h=e.low>>>16,l=0,d=0,f=0,p=0,f+=(p+=a+(65535&e.low))>>>16,d+=(f+=s+h)>>>16,l+=(d+=i+c)>>>16,l+=n+u,r((f&=65535)<<16|(p&=65535),(l&=65535)<<16|(d&=65535),this.unsigned)},T.subtract=function(e){return t(e)||(e=o(e)),this.add(e.neg())},T.sub=T.subtract,T.multiply=function(e){var n,s,a,u,c,h,l,d,g,_,y,v;return this.isZero()?p:(t(e)||(e=o(e)),e.isZero()?p:this.eq(I)?e.isOdd()?I:p:e.eq(I)?this.isOdd()?I:p:this.isNegative()?e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg():e.isNegative()?this.mul(e.neg()).neg():this.lt(f)&&e.lt(f)?i(this.toNumber()*e.toNumber(),this.unsigned):(n=this.high>>>16,s=65535&this.high,a=this.low>>>16,u=65535&this.low,c=e.high>>>16,h=65535&e.high,l=e.low>>>16,g=0,_=0,y=0,v=0,y+=(v+=u*(d=65535&e.low))>>>16,_+=(y+=a*d)>>>16,y&=65535,_+=(y+=u*l)>>>16,g+=(_+=s*d)>>>16,_&=65535,g+=(_+=a*l)>>>16,_&=65535,g+=(_+=u*h)>>>16,g+=n*d+s*l+a*h+u*c,r((y&=65535)<<16|(v&=65535),(g&=65535)<<16|(_&=65535),this.unsigned)))},T.mul=T.multiply,T.divide=function(e){var n,r,s,a,u,h,l;if(t(e)||(e=o(e)),e.isZero())throw Error("division by zero");if(this.isZero())return this.unsigned?g:p;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return g;if(e.gt(this.shru(1)))return y;s=g}else{if(this.eq(I))return e.eq(_)||e.eq(v)?I:e.eq(I)?_:(n=this.shr(1).div(e).shl(1)).eq(p)?e.isNegative()?_:v:(r=this.sub(e.mul(n)),s=n.add(r.div(e)));if(e.eq(I))return this.unsigned?g:p;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=p}for(r=this;r.gte(e);){for(n=Math.max(1,Math.floor(r.toNumber()/e.toNumber())),u=(a=Math.ceil(Math.log(n)/Math.LN2))<=48?1:c(2,a-48),l=(h=i(n)).mul(e);l.isNegative()||l.gt(r);)l=(h=i(n-=u,this.unsigned)).mul(e);h.isZero()&&(h=_),s=s.add(h),r=r.sub(l)}return s},T.div=T.divide,T.modulo=function(e){return t(e)||(e=o(e)),this.sub(this.div(e).mul(e))},T.mod=T.modulo,T.not=function(){return r(~this.low,~this.high,this.unsigned)},T.and=function(e){return t(e)||(e=o(e)),r(this.low&e.low,this.high&e.high,this.unsigned)},T.or=function(e){return t(e)||(e=o(e)),r(this.low|e.low,this.high|e.high,this.unsigned)},T.xor=function(e){return t(e)||(e=o(e)),r(this.low^e.low,this.high^e.high,this.unsigned)},T.shiftLeft=function(e){return t(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?r(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):r(0,this.low<<e-32,this.unsigned)},T.shl=T.shiftLeft,T.shiftRight=function(e){return t(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?r(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):r(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},T.shr=T.shiftRight,T.shiftRightUnsigned=function(e){var n;return t(e)&&(e=e.toInt()),0==(e&=63)?this:(n=this.high,e<32?r(this.low>>>e|n<<32-e,n>>>e,this.unsigned):r(32===e?n:n>>>e-32,0,this.unsigned))},T.shru=T.shiftRightUnsigned,T.toSigned=function(){return this.unsigned?r(this.low,this.high,!1):this},T.toUnsigned=function(){return this.unsigned?this:r(this.low,this.high,!0)},T.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},T.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,255&t>>>8,255&t>>>16,255&t>>>24,255&e,255&e>>>8,255&e>>>16,255&e>>>24]},T.toBytesBE=function(){var e=this.high,t=this.low;return[255&e>>>24,255&e>>>16,255&e>>>8,255&e,255&t>>>24,255&t>>>16,255&t>>>8,255&t]},e}()),ci));fi.getModule=function(e){var t=new fi[e];return t.getArrayData=function(){var e=t.toArrayBuffer();return e=$(e)?[].slice.call(new Int8Array(e)):e},t};var pi,gi="pgMsgP",_i="chatMsg",yi="pcMsgP",vi={PRIVATE:"ppMsgS",GROUP:"pgMsgS",CHATROOM:"chatMsgS"},Ei="delMsg",mi="joinChrm",Ii="joinChrmR",Ti="exitChrm",Ci="setKV",Ri="delKV",Si="setKVS",Ni="delKVS",Oi="qryRelationR",wi="delRelation",bi="setSeAtt",Mi={PRIVATE:"cleanPMsg",GROUP:"cleanGMsg",CUSTOMER_SERVICE:"cleanCMsg",SYSTEM:"cleanSMsg"},Ai="qryPMsg",Ui="qryGMsg",Li="qryCHMsg",Pi="qryCMsg",Di="qrySMsg",Vi=((hi={})["ppMsgP"]=j.PRIVATE,hi[gi]=j.GROUP,hi[_i]=j.CHATROOM,hi[yi]=j.CUSTOMER_SERVICE,hi),ki=((li={})[j.PRIVATE]=Ai,li[j.GROUP]=Ui,li[j.CHATROOM]=Li,li[j.CUSTOMER_SERVICE]=Pi,li[j.SYSTEM]=Di,li),xi=((di={})[j.PRIVATE]=Mi.PRIVATE,di[j.GROUP]=Mi.GROUP,di[j.CUSTOMER_SERVICE]=Mi.CUSTOMER_SERVICE,di[j.SYSTEM]=Mi.SYSTEM,di),Bi="1",Fi="0",Ki=1,qi=2,Yi=3,Hi=function(){function e(e){this._codec="websocket"===e?fi:ri,this._connectType=e}return e.prototype.decodeByPBName=function(e,t,n){var i,r=this,s=e,o=((i={})[bt]=r._formatSyncMessages,i[wt]=r._formatReceivedMessage,i[Nt]=r._formatSentMessage,i[Vt]=r._formatHistoryMessages,i[xt]=r._formatConversationList,i[Jt]=r._formatChatRoomInfos,i[Zt]=r._formatRTCUserList,i[on]=r._formatRTCData,i[Tn]=r._formatChatRoomKVList,i[bn]=r._formatUserSetting,i[Un]=r._formatConversationStatus,i[Bn]=r._formatGrpReadReceiptQryResp,i[On]=r._formatSetUserSettingOutput,i[Mn]=r._formatUserSettingNotification,i[Jn]=r._formatRTCRoomKVList,i[sn]=r._formatRTCAuidenceJoinRoomData,i[Zn]=r._formatRTCJoinedUserInfo,i)[t];try{s=e.length>0&&r._codec[t].decode(e),ne(s)&&(s=function(e){for(var t in e)ne(e[t])&&(e[t]=nt(e[t]));return e}(s)),ie(o)&&(s=o.call(this,s,n))}catch(n){pe.error("PB parse error\\n",n,e,t)}return s},e.prototype._readBytes=function(e){var t=e.offset,n=e.buffer,i=e.limit;if(t)try{var r=$(n)?new Uint8Array(n):n;return Ct.readUTF(r.subarray(t,i))}catch(e){pe.info("readBytes error\\n",e)}return e},e.prototype._formatBytes=function(e){var t=this._readBytes(e);try{t=JSON.parse(t)}catch(e){pe.info("formatBytes error\\n",e)}return t||e},e.prototype._formatSyncMessages=function(e,t){t=t||{};var n=this,i=e.list,r=e.syncTime,s=e.finished;return(re(s)||null===s)&&(e.finished=!0),e.syncTime=nt(r),e.list=ht(i,(function(e){return n._formatReceivedMessage(e,t)})),e},e.prototype._formatReceivedMessage=function(e,t){var n=(t=t||{}).currentUserId,r=t.connectedTime,s=e.content,o=e.fromUserId,a=e.type,u=e.groupId,c=e.status,h=e.dataTime,l=e.classname,d=e.msgId,f=e.extraContent,p=e.pushContent,g=e.pushExt,_=e.configFlag,y=(e.direction||ye.RECEIVE)===ye.SEND,v=function(e){var t=i.READ;return{isPersited:!!(16&e),isCounted:!!(32&e),isMentioned:!!(64&e),disableNotification:!!(512&e),receivedStatus:t=2&e?i.RETRIEVED:t,canIncludeExpansion:!!(1024&e)}}(c),E=v.isPersited,m=v.isCounted,I=v.isMentioned,T=v.disableNotification,C=v.receivedStatus,R=v.canIncludeExpansion,S=[j.GROUP,j.CHATROOM,j.RTC_ROOM].indexOf(a)>-1?u:o,N=y?n:o,w=nt(h),b=w<r,M=a===j.CHATROOM,A=this._formatBytes(s),U={};if(g&&(U=ot(g.pushConfigs,g.pushId)),A.user){var L=A.user,P=L.portrait,D=L.portraitUri,V=P||D;V&&(A.user.portrait=A.user.portraitUri=V)}var k,x=O(O({},U),{pushTitle:null==g?void 0:g.title,pushContent:p,pushData:p,disablePushTitle:!!_&&Boolean(4&_),forceShowDetailContent:!!_&&Boolean(8&_),templateId:null==g?void 0:g.templateId}),B=y?ye.SEND:ye.RECEIVE;return M&&o===n&&(B=ye.SEND),f&&(k={},k=vt(f)),{conversationType:a,targetId:S,senderUserId:N,messageType:l,messageUId:d,isPersited:E,isCounted:m,isMentioned:I,sentTime:w,isOffLineMessage:b,messageDirection:B,receivedTime:Et.getTime(),disableNotification:T,receivedStatus:C,canIncludeExpansion:R,content:A,expansion:k,configFlag:_,pushConfig:x,channelId:e.busChannel||""}},e.prototype._formatSentMessage=function(e,t){var n,i=e.content,r=e.classname,s=e.sessionId,o=e.msgId,a=e.extraContent,u=e.pushExt,c=e.pushContent,h=e.configFlag,l=t.signal,d=t.currentUserId,f=l.date,p=l.topic,g=l.targetId,_=function(e){return{isPersited:!!(1&e),isCounted:!!(2&e),disableNotification:!!(32&e),canIncludeExpansion:!!(64&e)}}(s),y=_.isPersited,v=_.isCounted,E=_.disableNotification,m=_.canIncludeExpansion,I=Vi[p]||j.PRIVATE,T=ft(vi,p),C=this._formatBytes(i),R=g;r===Re.RECALL&&(I=C.conversationType||I,R=C.targetId||g),a&&(n={},n=vt(a));var S={};u&&(S=ot(u.pushConfigs,u.pushId));var N=O(O({},S),{pushTitle:null==u?void 0:u.title,pushContent:c,pushData:c,disablePushTitle:!!h&&Boolean(4&h),forceShowDetailContent:!!h&&Boolean(8&h),templateId:null==u?void 0:u.templateId});return{conversationType:I,targetId:R,messageType:r,messageUId:o,isPersited:y,isCounted:v,isStatusMessage:T,senderUserId:d,content:this._formatBytes(i),sentTime:1e3*f,receivedTime:Et.getTime(),messageDirection:ye.SEND,isOffLineMessage:!1,disableNotification:E,canIncludeExpansion:m,expansion:n,pushConfig:N,channelId:e.busChannel||""}},e.prototype._formatHistoryMessages=function(e,t){var n=this,i=t.conversation||{},r=e.list,s=e.hasMsg,o=i.targetId,a=nt(e.syncTime),u=[];return ct(r,(function(e){var i=n._formatReceivedMessage(e,t);i.targetId=o,u.push(i)}),{isReverse:!0}),{syncTime:a,list:u,hasMore:!!s}},e.prototype._formatConversationList=function(e,t){var n=this,i=e.info,r=t.afterDecode||function(){};return(i=ht(i,(function(e){var i=e.msg,s=e.userId,o=e.type,a=e.unreadCount,u=e.busChannel,c=null;i&&((c=n._formatReceivedMessage(i,t)).targetId=s);var h={targetId:s,conversationType:o,unreadMessageCount:a,latestMessage:c,channelId:u||""};return r(h)||h})))||[]},e.prototype._formatSetUserSettingOutput=function(e){return e},e.prototype._formatChatRoomInfos=function(e){var t=e.userTotalNums,n=e.userInfos;return{userCount:t,userInfos:ht(n,(function(e){var t=e.id,n=e.time;return{id:t,time:nt(n)}}))}},e.prototype._formatChatRoomKVList=function(e){var t=e.entries,n=e.bFullUpdate,i=e.syncTime;return{kvEntries:t=ht(t=t||[],(function(e){var t=e.key,n=e.value,i=e.status,r=e.timestamp,s=e.uid,o=function(e){return{isAutoDelete:!!(1&e),isOverwrite:!!(2&e),type:4&e?Ue.DELETE:Ue.UPDATE}}(i);return{key:t,value:n,isAutoDelete:o.isAutoDelete,isOverwrite:o.isOverwrite,type:o.type,userId:s,timestamp:nt(r)}})),isFullUpdate:n,syncTime:i}},e.prototype._formatUserSetting=function(e){var t=this,n=e.items,i=e.version,r={};return ct(n||[],(function(e){var n=e.key,i=e.version,s=e.value;e.version=nt(i),e.value=t._readBytes(s),"Tag"===n&&e.tags.forEach((function(e){e.createdTime=nt(e.createdTime),e.tagName=e.name})),r[n]=e})),{settings:r,version:i}},e.prototype._formatConversationStatus=function(e){var t=e.state,n=[];return ct(t,(function(e){var t=e.type,i=e.channelId,r=e.time,s=e.stateItem,o=e.busChannel,a=Ne.CLOSE,u=!1,c=[];ct(s,(function(e){var t=e.sessionStateType,n=e.value,i=e.tags;switch(t){case Ki:a=n===Bi?Ne.OPEN:Ne.CLOSE;break;case qi:u=n===Bi;break;case Yi:c=i}})),n.push({conversationType:t,type:t,targetId:i,notificationStatus:a,isTop:u,updatedTime:nt(r),tags:c,channelId:o||""})})),n},e.prototype._formatRTCUserList=function(e){var t=e.users,n=e.token,i=e.sessionId,r=e.roomInfo,s=e.entries,o={};return ct(t,(function(e){var t=e.userId,n=e.userData,i={};ct(n,(function(e){var t=e.key,n=e.value;i[t]=n})),o[t]=i})),{users:o,token:n,sessionId:i,roomInfo:r,kvEntries:s}},e.prototype._formatRTCData=function(e){var t=e.outInfo,n={};return ct(t,(function(e){n[e.key]=e.value})),n},e.prototype._formatRTCRoomInfo=function(e){var t=e.roomId,n=e.userCount,i=e.roomData,r={id:t,total:n};return ct(i,(function(e){r[e.key]=e.value})),r},e.prototype._formatGrpReadReceiptQryResp=function(e){var t=e.totalMemberNum,n=e.list;return n.forEach((function(e){e.readTime=nt(e.readTime)})),{totalMemberCount:t,list:n}},e.prototype._formatUserSettingNotification=function(e){return e},e.prototype._formatRTCRoomKVList=function(e){var t=e.entries,n=e.bFullUpdate,i=e.syncTime;return{kvEntries:t=(t=t||[]).map((function(e){var t=e.timestamp;return Object.assign(e,{timestamp:nt(t)})})),isFullUpdate:n,syncTime:i}},e.prototype._formatRTCAuidenceJoinRoomData=function(e){return e},e.prototype._formatRTCJoinedUserInfo=function(e){return(e.info||[]).map((function(e){return{deviceId:e.deviceId,roomId:e.roomId,joinTime:nt(e.joinTime)}}))},e.prototype.encodeServerConfParams=function(){var e=this._codec.getModule(Mt);return e.setNothing(1),e.getArrayData()},e.prototype._getUpMsgModule=function(e,t){var n,i,r,s="comet"===this._connectType,o=(e.conversationType,t.messageType),a=t.isMentioned,u=t.mentionedType,c=t.mentionedUserIdList,h=t.content,l=t.pushContent,d=t.pushData,f=t.directionalUserIdList,p=t.isFilerWhiteBlacklist,g=t.isVoipPush,_=t.canIncludeExpansion,y=t.expansion,v=t.pushConfig,E=t.channelId;j.GROUP;var m=this._codec.getModule(Nt),I=function(e){var t=e.isStatusMessage,n=e.isPersited,i=e.isCounted;t&&(n=i=!1);var r=0;return n&&(r|=1),i&&(r|=2),e.isMentioned&&(r|=4),e.disableNotification&&(r|=32),e.canIncludeExpansion&&(r|=64),r}(t),T=v||{},C=T.pushTitle,R=T.pushContent,S=T.pushData,N=T.iOSConfig,O=T.androidConfig,w=T.templateId,b=T.disablePushTitle,M=T.forceShowDetailContent,A=0;m.setSessionId(I),a&&h&&(h.mentionedInfo={userIdList:(null===(n=h.mentionedInfo)||void 0===n?void 0:n.userIdList)||c||[],type:(null===(i=h.mentionedInfo)||void 0===i?void 0:i.type)||u||we.ALL,mentionedContent:(null===(r=h.mentionedInfo)||void 0===r?void 0:r.mentionedContent)||""});var U=R||l||"",L=S||d||"";if(U&&m.setPushText(U),L&&m.setAppData(L),f&&m.setUserId(f),A|=g?1:0,A|=p?2:0,A|=b?4:0,A|=M?8:0,m.setConfigFlag(A),m.setClassname(o),h.user&&h.user.portraitUri&&(h.user.portrait=h.user.portraitUri),m.setContent(JSON.stringify(h)),_&&y){var P={};ct(y,(function(e,t){P[t]={v:e}})),m.setExtraContent(JSON.stringify(P))}if(v){var D=this._codec.getModule(Ot);if(C&&D.setTitle(C),N&&O){var V=st(N,O);D.setPushConfigs(V)}(null==O?void 0:O.notificationId)&&D.setPushId(null==O?void 0:O.notificationId),D.setTemplateId(w||""),m.setPushExt(s?D.getArrayData():D)}return re(E)||m.setBusChannel(E),m},e.prototype.encodeUpMsg=function(e,t){return this._getUpMsgModule(e,t).getArrayData()},e.prototype.encodeSyncMsg=function(e){var t=e.sendboxTime,n=e.inboxTime,i=this._codec.getModule(Ut);return i.setIspolling(!1),i.setIsPullSend(!0),i.setSendBoxSyncTime(t),i.setSyncTime(n),i.getArrayData()},e.prototype.encodeChrmSyncMsg=function(e,t){e=e||0,t=t||0;var n=this._codec.getModule(Lt);return n.setCount(t),n.setSyncTime(e),n.getArrayData()},e.prototype.encodeGetHistoryMsg=function(e,t){var n=t.count,i=t.order,r=t.timestamp,s=t.channelId,o=this._codec.getModule(Dt);return o.setTargetId(e),o.setTime(r),o.setCount(n),o.setOrder(i),o.setBusChannel(s||""),o.getArrayData()},e.prototype.encodeGetConversationList=function(e){var t=(e=e||{}).count,n=e.startTime,i=this._codec.getModule(kt);return i.setType(1),i.setCount(t),i.setStartTime(n),i.getArrayData()},e.prototype.encodeOldConversationList=function(e){var t=(e=e||{}).count,n=e.type,i=e.startTime,r=e.order;t=t||0,i=i||0,r=r||0;var s=this._codec.getModule(kt);return s.setType(n),s.setCount(t),s.setStartTime(i),s.setOrder(r),s.getArrayData()},e.prototype.encodeRemoveOldConversationList=function(e){var t=(e=e||{}).conversationType,n=e.channelId,i=this._codec.getModule(qt);return i.setType(t),i.setBusChannel(n),i.getArrayData()},e.prototype.encodeRemoveConversationList=function(e){var t=this,n=this._codec.getModule(Bt),i=[];return ct(e,(function(e){var n=e.conversationType,r=e.targetId,s=t._codec.getModule(Ft);s.setType(n),s.setChannelId(r),i.push(s)})),n.setSessions(i),n.getArrayData()},e.prototype.encodeDeleteMessages=function(e,t,n,i){var r=this._codec.getModule(Yt),s=[];return ct(n,(function(e){s.push({msgId:e.messageUId,msgDataTime:e.sentTime,direct:e.messageDirection})})),r.setType(e),r.setConversationId(t),r.setMsgs(s),r.setBusChannel(i),r.getArrayData()},e.prototype.encodeClearMessages=function(e,t,n){var i=this._codec.getModule(Ht);return t=t||(new Date).getTime(),i.setDataTime(t),i.setTargetId(e),i.setBusChannel(n),i.getArrayData()},e.prototype.encodeClearUnreadCount=function(e,t){var n=e.conversationType,i=e.targetId,r=t.timestamp,s=this._codec.getModule(Gt);return r=r||+new Date,s.setType(n),s.setChannelId(i),s.setMsgTime(r),s.getArrayData()},e.prototype.encodeJoinOrQuitChatRoom=function(){var e=this._codec.getModule(jt);return e.setNothing(1),e.getArrayData()},e.prototype.encodeGetChatRoomInfo=function(e,t){var n=this._codec.getModule(Wt);return n.setCount(e),n.setOrder(t),n.getArrayData()},e.prototype.encodeGetFileToken=function(e,t,n,i){var r=this._codec.getModule(fn);return r.setType(e),r.setKey(t),r.setHttpMethod(n),r.setQueryString(i),r.getArrayData()},e.prototype.encodeGetFileUrl=function(e,t,n,i){var r=this._codec.getModule(e);return r.setType(t),r.setKey(n),i&&r.setFileName(i),r.getArrayData()},e.prototype.encodeModifyChatRoomKV=function(e,t,n){var i="comet"===this._connectType,r=this._codec.getModule(En),s=t.key,o=t.value,a=t.notificationExtra,u=t.isSendNotification,c=t.type||Ue.UPDATE,h=mt(t,c),l={key:s,value:o||"",uid:n};if(re(h)||(l.status=h),r.setEntry(l),u){var d={conversationType:j.CHATROOM,targetId:e},f={key:s,value:o,extra:a,type:c},p=this._getUpMsgModule(d,{messageType:Re.CHRM_KV_NOTIFY,content:f,isPersited:!1,isCounted:!1});i?r.setNotification(p.getArrayData()):r.setNotification(p),r.setBNotify(!0),r.setType(j.CHATROOM)}return r.getArrayData()},e.prototype.encodeModifyChatRoomKVS=function(e,t,n){this._connectType;var i=this._codec.getModule(mn),r=t.entries,s=t.type||Ue.UPDATE,o=mt(t,s),a=[];return r.forEach((function(e){var t={key:e.key,value:e.value||"",uid:n};re(o)||(t.status=o),a.push(t)})),i.setEntry(a),i.getArrayData()},e.prototype.encodePullChatRoomKV=function(e){var t=this._codec.getModule(Sn);return t.setTimestamp(e),t.getArrayData()},e.prototype.encodePullUserSetting=function(e){var t=this._codec.getModule(wn);return t.setVersion(e),t.getArrayData()},e.prototype.encodeGetConversationStatus=function(e){var t=this._codec.getModule(An);return t.setTime(e),t.getArrayData()},e.prototype.encodeSetConversationStatus=function(e){var t=this,n="comet"===this._connectType,i=this._codec.getModule(Dn),r=Et.getTime(),s=[];return ct(e,(function(e){var i=t._codec.getModule(Ln),o=e.conversationType,a=e.targetId,u=e.notificationStatus,c=e.isTop,h=e.channelId,l=[];i.setType(o),i.setChannelId(a),i.setTime(r),i.setBusChannel(h);var d=u===Ne.OPEN,f={};re(u)||(f[Ki]=d),re(c)||(f[qi]=c),ct(f,(function(e,i){if(!re(e)){var r=t._codec.getModule(Pn);e=e?Bi:Fi,r.setSessionStateType(Number(i)),r.setValue(e);var s=n?r.getArrayData():r;l.push(s)}})),i.setStateItem(l);var p=n?i.getArrayData():i;s.push(p)})),i.setVersion(r),i.setState(s),i.getArrayData()},e.prototype.encodeReadReceipt=function(e,t){var n=this._codec.getModule(kn);return n.setMsgId(e),t&&n.setChannelId(t),n.getArrayData()},e.prototype.encodeCreateTag=function(e,t){var n=this,i="comet"===this._connectType,r=this._codec.getModule(Kn),s=[];return e.forEach((function(e){var t=n._codec.getModule(qn);t.setTagId(e.tagId),t.setName(e.tagName),s.push(i?t.getArrayData():t)})),r.setTags(s),r.setVersion(t),r.getArrayData()},e.prototype.encodeMessageReader=function(e,t){var n=this._codec.getModule(kn);return n.setMsgId(e),t&&n.setChannelId(t),n.getArrayData()},e.prototype.encodeRemoveTag=function(e,t){var n=this,i="comet"===this._connectType,r=this._codec.getModule(Yn),s=[];return e.forEach((function(e){var t=n._codec.getModule(qn);t.setTagId(e),s.push(i?t.getArrayData():t)})),r.setTags(s),r.setVersion(t),r.getArrayData()},e.prototype.encodeDisConversationTag=function(e){var t=this._codec.getModule(Hn);return t.setTagId(e),t.getArrayData()},e.prototype.encodeUpdateConversationTag=function(e,t){var n=this,i="comet"===this._connectType,r=this._codec.getModule(Dn),s=[];return t.forEach((function(t){var r=n._codec.getModule(Ln),o=n._codec.getModule(Pn),a=[];e.forEach((function(e){var t=n._codec.getModule(qn);t.setTagId(e.tagId),re(e.isTop)||t.setIsTop(e.isTop),a.push(i?t.getArrayData():t)})),o.setSessionStateType(Yi),o.setValue(JSON.stringify(a)),o.setTags(a),r.setType(t.conversationType),r.setChannelId(t.targetId),r.setTime(Date.now()),r.setStateItem([i?o.getArrayData():o]),s.push(i?r.getArrayData():r)})),r.setState(s),r.setVersion(Et.getTime()),r.getArrayData()},e.prototype.encodeReportSDKInfo=function(e){var t=this._codec.getModule(Gn);return t.setSdkInfo(e),t.getArrayData()},e.prototype.encodeJoinRTCRoom=function(e,t,n,i,r){var s=this,o="comet"===this._connectType,a=this._codec.getModule(zt);if(e=e||0,a.setRoomType(e),re(t)||a.setBroadcastType(t),re(n)||a.setJoinType(n),i){var u=[],c=this._codec.getModule(ln);for(var h in i)c.setKey(h),c.setValue(i[h]),o?u.push(c.getArrayData()):u.push(c);a.setInnerDatas(u)}if(r){var l=[];Object.keys(r).forEach((function(e){var t=s._codec.getModule(ln);t.setKey(e),t.setValue(r[e]),o?l.push(t.getArrayData()):l.push(t)})),a.setOuterDatas(l)}return a.getArrayData()},e.prototype.encodeQuitRTCRoom=function(){return this._codec.getModule(Xt).getArrayData()},e.prototype.encodeSetRTCData=function(e,t,n,i,r){var s=this._codec.getModule($t);if(s.setInterior(n),s.setTarget(i),s.setKey(e),s.setValue(t),r){r.name&&s.setObjectName(r.name);var o=r.content;o&&(ne(o)&&(o=JSON.stringify(o)),s.setContent(o))}return s.getArrayData()},e.prototype.encodeUserSetRTCData=function(e,t,n,i){var r=this,s="comet"===this._connectType,o=this._codec.getModule(en);o.setObjectName(n);var a=this._codec.getModule(ln);a.setKey(e.name),a.setValue(e.content),s?o.setContent(a.getArrayData()):o.setContent(a);var u=[];return["uris","mcu_uris"].forEach((function(e){var n=r._codec.getModule(ln);n.setKey(e);var o="uris"===e?t:i;n.setValue(o),s?u.push(n.getArrayData()):u.push(n)})),o.setValueInfo(u),o.getArrayData()},e.prototype.encodeUserSetRTCCDNUris=function(e,t){this._connectType;var n=this._codec.getModule(en);n.setObjectName(e);var i=this._codec.getModule(ln);return i.setKey("cdn_uris"),i.setValue(t),n.setValueInfo(i),n.getArrayData()},e.prototype.encodeGetRTCData=function(e,t,n){var i=this._codec.getModule(tn);return i.setInterior(t),i.setTarget(n),i.setKey(e),i.getArrayData()},e.prototype.encodeRemoveRTCData=function(e,t,n,i){var r=this._codec.getModule(tn);r.setInterior(t),r.setTarget(n),r.setKey(e);var s=(i=i||{}).name,o=i.content;return!re(s)&&r.setObjectName(s),re(o)||(ne(o)&&(o=JSON.stringify(o)),r.setContent(o)),r.getArrayData()},e.prototype.encodeSetRTCOutData=function(e,t,n){var i=this._codec.getModule(nn);i.setTarget(t),X(e)||(e=[e]),ct(e,(function(t,n){t.key=t.key?t.key.toString():t.key,t.value=t.value?t.value.toString():t.value,e[n]=t})),i.setValueInfo(e);var r=(n=n||{}).name,s=n.content;return!re(r)&&i.setObjectName(r),re(s)||(ne(s)&&(s=JSON.stringify(s)),i.setContent(s)),i.getArrayData()},e.prototype.ecnodeGetRTCOutData=function(e){var t=this._codec.getModule(an);return t.setUserId(e),t.getArrayData()},e.prototype.encodeSetRTCState=function(e){var t=this._codec.getModule(rn);return t.setState(e),t.getArrayData()},e.prototype.encodeGetRTCRoomInfo=function(){var e=this._codec.getModule(cn);return e.setOrder(2),e.getArrayData()},e.prototype.encodeSetRTCUserInfo=function(e,t){var n=this._codec.getModule(ln);return n.setKey(e),n.setValue(t),n.getArrayData()},e.prototype.encodeRemoveRTCUserInfo=function(e){var t=this._codec.getModule(dn);return t.setKey(e),t.getArrayData()},e.prototype.encodeIdentityChangeInfo=function(e,t,n){void 0===n&&(n=!1);var i=this._codec.getModule(zt);return i.setRoomType(De.LIVE),t&&i.setBroadcastType(t),i.setIdentityChangeType(e),i.setNeedSysChatroom(n),i.getArrayData()},e.prototype.encodePullRTCRoomKV=function(e,t){var n=this._codec.getModule(Wn);return n.setTimestamp(t),n.setRoomId(e),n.getArrayData()},e.prototype.encodeQueryUserJoinedInfo=function(e){var t=this._codec.getModule(zn);return t.setUserId(e),t.getArrayData()},e.prototype.encodeRequestRoomPK=function(e){var t=e.invitedRoomId,n=e.invitedUserId,i=e.inviteSessionId,r=e.inviteTimeout,s=e.inviteInfo,o=this._codec.getModule($n);return o.setInvitedRoomId(t),o.setInvitedUserId(n),o.setInviteSessionId(i),o.setTimeoutTime(r),o.setInviteInfo(s),o.getArrayData()},e.prototype.encodeCancelRoomPK=function(e){var t=e.invitedRoomId,n=e.invitedUserId,i=e.inviteSessionId,r=e.inviteInfo,s=this._codec.getModule(ei);return s.setInvitedRoomId(t),s.setInvitedUserId(n),s.setInviteSessionId(i),s.setInviteInfo(r),s.getArrayData()},e.prototype.encodeResponseRoomPK=function(e){var t=e.inviteUserId,n=e.inviteRoomId,i=e.inviteSessionId,r=e.content,s=e.key,o=e.value,a=e.agree?1:0,u=this._codec.getModule(ti);return u.setInviteUserId(t),u.setInviteRoomId(n),u.setInviteSessionId(i),u.setContent(r),u.setKey(s),u.setValue(o),u.setAnswerCode(a),u.getArrayData()},e.prototype.encodeEndRoomPK=function(e){var t=e.endRoomId,n=e.sessionId,i=e.content,r=e.keys,s=this._codec.getModule(ni);return s.setInviteRoomId(t),s.setInviteSessionId(n),s.setInviteContent(i),s.setInviteRoomKeys(r),s.getArrayData()},e}(),Gi=function(e,t){this._watcher=t,this.codec=new Hi(e)},ji=function(e,t){return e&&t?t+"_"+e:e||Date.now()},Qi=function(){function e(e){this.header=e,this._name=null,this.lengthSize=0,this.messageId=0,this.timestamp=0,this.syncMsg=!1,this.identifier=""}return e.prototype.getIdentifier=function(){var e=this.messageId,t=this.identifier;return ji(e,t)},e.prototype.read=function(e,t,n){this.readMessage(e,t,n)},e.prototype.readMessage=function(e,t,n){return{stream:e,length:t}},e}(),Wi=function(){function e(e){this.lengthSize=0,this.messageId=0,this.topic="",this.targetId="",this.identifier="",this._header=new Tt(e,!1,Qe.AT_MOST_ONCE,!1)}return e.prototype.getIdentifier=function(){var e=this.messageId,t=this.identifier;return ji(e,t)},e.prototype.write=function(e){var t=this.getHeaderFlag();e.write(t),this.writeMessage(e)},e.prototype.setHeaderQos=function(e){this._header.qos=e},e.prototype.getHeaderFlag=function(){return this._header.encode()},e.prototype.getLengthSize=function(){return this.lengthSize},e.prototype.getBufferData=function(){var e=new St;this.write(e);var t=e.getBytesArray();return new Int8Array(t)},e.prototype.getCometData=function(){var e=this.data||{};return JSON.stringify(e)},e}(),Ji=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._name=Je.CONN_ACK,t.status=null,t.userId=null,t.timestamp=0,t}return N(t,e),t.prototype.readMessage=function(e,n,i){if(e.readByte(),this.status=+e.readByte(),n<=t.MESSAGE_LENGTH)return{stream:e,length:n};if(i===Ze.V4){var r=e.readByte();1&r&&(this.userId=e.readUTF()),2&r&&e.readUTF(),4&r&&(this.timestamp=e.readLong()),8&r&&(this.messageId=e.read2Byte())}else{this.userId=e.readUTF();var s=e.readUTF();pe.debug("server sessionId -> "+s),this.timestamp=e.readLong()}return{stream:e,length:n}},t.MESSAGE_LENGTH=2,t}(Qi),zi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._name=Je.DISCONNECT,t.status=0,t}return N(t,e),t.prototype.readMessage=function(e,t){return e.readByte(),this.status=+e.readByte(),{stream:e,length:t}},t.MESSAGE_LENGTH=2,t}(Qi),Zi=function(e){function t(){var t=e.call(this,We.PING_REQ)||this;return t._name=Je.PING_REQ,t}return N(t,e),t.prototype.writeMessage=function(e){},t}(Wi),Xi=function(e){function t(t){var n=e.call(this,t)||this;return n._name=Je.PING_RESP,n}return N(t,e),t}(Qi),$i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.messageId=0,t}return N(t,e),t.prototype.readMessage=function(e,t){var n=256*e.readByte()+e.readByte();return this.messageId=parseInt(n.toString(),10),{stream:e,length:t}},t}(Qi),er=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.messageId=0,t}return N(t,e),t.prototype.writeMessage=function(e){var t=this.messageId,n=255&t,i=(65280&t)>>8;e.write(i),e.write(n)},t}(Wi),tr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._name=Je.PUBLISH,t.topic="",t.targetId="",t.syncMsg=!1,t.identifier=ze.PUB,t}return N(t,e),t.prototype.readMessage=function(t,n){return this.date=t.readInt(),this.topic=t.readUTF(),this.targetId=t.readUTF(),e.prototype.readMessage.call(this,t,n),this.data=t.readAll(),{stream:t,length:n}},t}($i),nr=function(e){function t(t,n,i){var r=e.call(this,We.PUBLISH)||this;return r._name=Je.PUBLISH,r.syncMsg=!1,r.identifier=ze.PUB,r.topic=t,r.data=J(n)?Ct.writeUTF(n):n,r.targetId=i,r}return N(t,e),t.prototype.writeMessage=function(t){t.writeUTF(this.topic),t.writeUTF(this.targetId),e.prototype.writeMessage.call(this,t),t.write(this.data)},t}(er),ir=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._name=Je.PUB_ACK,t.status=0,t.date=0,t.millisecond=0,t.messageUId="",t.timestamp=0,t.identifier=ze.PUB,t.topic="",t.targetId="",t}return N(t,e),t.prototype.readMessage=function(t,n){return e.prototype.readMessage.call(this,t,n),this.date=t.readInt(),this.status=256*t.readByte()+t.readByte(),this.millisecond=256*t.readByte()+t.readByte(),this.timestamp=1e3*this.date+this.millisecond,this.messageUId=t.readUTF(),{stream:t,length:n}},t}($i),rr=function(e){function t(t){var n=e.call(this,We.PUB_ACK)||this;return n._name=Je.PUB_ACK,n.status=0,n.date=0,n.millisecond=0,n.messageUId="",n.timestamp=0,n.messageId=t,n}return N(t,e),t.prototype.writeMessage=function(t){e.prototype.writeMessage.call(this,t)},t}(er),sr=function(e){function t(t,n,i){var r=e.call(this,We.QUERY)||this;return r.name=Je.QUERY,r.identifier=ze.QUERY,r.topic=t,r.data=J(n)?Ct.writeUTF(n):n,r.targetId=i,r}return N(t,e),t.prototype.writeMessage=function(t){t.writeUTF(this.topic),t.writeUTF(this.targetId),e.prototype.writeMessage.call(this,t),t.write(this.data)},t}(er),or=function(e){function t(t){var n=e.call(this,We.QUERY_CONFIRM)||this;return n._name=Je.QUERY_CON,n.messageId=t,n}return N(t,e),t}(er),ar=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._name=Je.QUERY_ACK,t.status=0,t.identifier=ze.QUERY,t.topic="",t.targetId="",t}return N(t,e),t.prototype.readMessage=function(t,n){return e.prototype.readMessage.call(this,t,n),this.date=t.readInt(),this.status=256*t.readByte()+t.readByte(),this.data=t.readAll(),{stream:t,length:n}},t}($i),ur=function(e){var t,n=e.type;switch(n){case We.CONN_ACK:t=new Ji(e);break;case We.PUBLISH:(t=new tr(e)).syncMsg=e.syncMsg;break;case We.PUB_ACK:t=new ir(e);break;case We.QUERY_ACK:t=new ar(e);break;case We.SUB_ACK:case We.UNSUB_ACK:case We.PING_RESP:t=new Xi(e);break;case We.DISCONNECT:t=new zi(e);break;default:t=new Qi(e),pe.error("No support for deserializing "+n+" messages")}return t};!function(e){e[e.ppMsgP=1]="ppMsgP",e[e.ppMsgN=2]="ppMsgN",e[e.ppMsgS=3]="ppMsgS",e[e.pgMsgP=4]="pgMsgP",e[e.chatMsg=5]="chatMsg",e[e.pcMsgP=6]="pcMsgP",e[e.qryPMsg=7]="qryPMsg",e[e.qryGMsg=8]="qryGMsg",e[e.qryCHMsg=9]="qryCHMsg",e[e.qryCMsg=10]="qryCMsg",e[e.qrySMsg=11]="qrySMsg",e[e.recallMsg=12]="recallMsg",e[e.prMsgS=13]="prMsgS",e[e.rrMsg=14]="rrMsg",e[e.rrList=15]="rrList",e[e.s_ntf=16]="s_ntf",e[e.s_msg=17]="s_msg",e[e.s_stat=18]="s_stat",e[e.s_cmd=19]="s_cmd",e[e.s_us=20]="s_us",e[e.pullUS=21]="pullUS",e[e.pgMsgS=22]="pgMsgS",e[e.chatMsgS=23]="chatMsgS",e[e.qrySessionsAtt=24]="qrySessionsAtt",e[e.pullMsg=25]="pullMsg",e[e.qrySessions=26]="qrySessions",e[e.delSessions=27]="delSessions",e[e.delMsg=28]="delMsg",e[e.updRRTime=29]="updRRTime",e[e.chrmPull=30]="chrmPull",e[e.joinChrm=31]="joinChrm",e[e.joinChrmR=32]="joinChrmR",e[e.exitChrm=33]="exitChrm",e[e.queryChrmI=34]="queryChrmI",e[e.setKV=35]="setKV",e[e.delKV=36]="delKV",e[e.pullKV=37]="pullKV",e[e.qryRelation=38]="qryRelation",e[e.delRelation=39]="delRelation",e[e.pullSeAtts=40]="pullSeAtts",e[e.setSeAtt=41]="setSeAtt",e[e.qnTkn=42]="qnTkn",e[e.qnUrl=43]="qnUrl",e[e.aliUrl=44]="aliUrl",e[e.s3Url=45]="s3Url",e[e.stcUrl=46]="stcUrl",e[e.cleanPMsg=47]="cleanPMsg",e[e.cleanGMsg=48]="cleanGMsg",e[e.cleanCMsg=49]="cleanCMsg",e[e.cleanSMsg=50]="cleanSMsg",e[e.rtcRJoin_data=51]="rtcRJoin_data",e[e.rtcRExit=52]="rtcRExit",e[e.rtcPing=53]="rtcPing",e[e.rtcSetData=54]="rtcSetData",e[e.rtc_ntf=55]="rtc_ntf",e[e.viewerJoinR=56]="viewerJoinR",e[e.viewerExitR=57]="viewerExitR",e[e.rtcPullKv=58]="rtcPullKv",e[e.rtcIdentityChange=59]="rtcIdentityChange",e[e.userSetData=60]="userSetData",e[e.rtcQryData=61]="rtcQryData",e[e.rtcDelData=62]="rtcDelData",e[e.rtcSetOutData=63]="rtcSetOutData",e[e.rtcQryUserOutData=64]="rtcQryUserOutData",e[e.rtcToken=65]="rtcToken",e[e.rtcUserState=66]="rtcUserState",e[e.rtcRInfo=67]="rtcRInfo",e[e.rtcUData=68]="rtcUData",e[e.rtcUPut=69]="rtcUPut",e[e.rtcUDel=70]="rtcUDel",e[e.rtcUList=71]="rtcUList",e[e.rtcQueryJoined=72]="rtcQueryJoined",e[e.addSeTag=73]="addSeTag",e[e.delSeTag=74]="delSeTag",e[e.addTag=75]="addTag",e[e.delTag=76]="delTag",e[e.disTag=77]="disTag",e[e.reportsdk=78]="reportsdk",e[e.rtcInvite=79]="rtcInvite",e[e.rtcCancelInvite=80]="rtcCancelInvite",e[e.rtcInviteAnswer=81]="rtcInviteAnswer",e[e.rtcEndInvite=82]="rtcEndInvite"}(pi||(pi={}));var cr,hr=pi,lr=function(e,t,n,i){return w(void 0,void 0,void 0,(function(){var r;return b(this,(function(s){return r=0,e.forEach((function(s){return w(void 0,void 0,void 0,(function(){var o,a;return b(this,(function(u){switch(u.label){case 0:return o=t+"://"+s+"/ping?r="+(h=9999,(c=1e3)+Math.floor(Math.random()*(h-c))),pe.debug("start ping",o),[4,n.httpReq({url:o,timeout:5e3})];case 1:return a=u.sent(),pe.debug("end ping",r,o,a.status),r++,i({finished:r===e.length,code:a.status,host:s}),[2]}var c,h}))}))})),[2]}))}))},dr=function(e,t,n,i,r,s,o,a){return e+"://"+t+"/websocket?appId="+n+"&token="+encodeURIComponent(i)+"&sdkVer="+s+"&pid="+o+"&apiVer="+(r.isFromUniapp?"uniapp":"normal")+(r.connectPlatform?"&platform="+r.connectPlatform:"")+(a?"&protocolVer="+a:"")},fr=function(e){return[hr.ppMsgS,hr.pgMsgS,hr.chatMsgS].map((function(e){return hr[e]})).indexOf(e)>=0};!function(e){e[e.REDIRECT=0]="REDIRECT",e[e.OTHER_DEVICE_LOGIN=1]="OTHER_DEVICE_LOGIN",e[e.BLOCK=2]="BLOCK",e[e.REMOTE_CLOSE=3]="REMOTE_CLOSE",e[e.LOGOUT=4]="LOGOUT",e[e.BLOCK_NEW=5]="BLOCK_NEW",e[e.REDIRECT_NEW=6]="REDIRECT_NEW"}(cr||(cr={}));var pr,gr=function(e,t){pe.info("websocket send -> messageId: "+e.messageId+" topic: "+e.topic);var n=e.getBufferData();t.send(n.buffer)},_r=function(e){function t(t,n){var i=e.call(this,"websocket",n)||this;return i._runtime=t,i._socket=null,i._messageIds={},i._syncMessageIds={},i._failedCount=0,i.ALLOW_FAILED_TIMES=2,i._timer=null,i._idCount=0,i._generateMessageId=function(){return i._idCount>=65535&&(i._idCount=0),++i._idCount},i}return N(t,e),t.prototype.connect=function(e,t,n,i,r,s){return w(this,void 0,void 0,(function(){var o=this;return b(this,(function(a){return[2,new Promise((function(a){var u=[],c=0,h=!1,l=!1,d=function(){return w(o,void 0,void 0,(function(){var n;return b(this,(function(o){switch(o.label){case 0:return 0===u.length||h?[2]:(h=!0,[4,this._connect(e,t,u.shift(),i,r,s)]);case 1:if((n=o.sent())===Ee.SUCCESS)this._checkAlive(),a(n);else if(n===Te.REDIRECT)a(n);else{if(l&&0===u.length)return a(yt(n)),[2];h=!1,d()}return[2]}}))}))};r=x(r),o._watcher.status(Ie.CONNECTING),lr(n,i,o._runtime,(function(e){var t=e.code,n=e.finished,i=e.host;l=n,200===t&&(u.push(i),c++,d()),n&&0===c&&(pe.error("No valid websocket server hosts!"),a(Ee.RC_SOCKET_NOT_CREATED))}))}))]}))}))},t.prototype._connect=function(e,t,n,i,r,s){return w(this,void 0,void 0,(function(){var o,a,u,c,h,l=this;return b(this,(function(d){switch(d.label){case 0:return o=i.replace("http","ws"),a=dr(o,n,e,t,this._runtime,r,"",s),pe.debug("conenct start -> "+a),this.sendConnectTime=Date.now(),u=this._runtime.createWebSocket(a),c=function(e){l._timer&&(clearTimeout(l._timer),l._timer=null),l._socket===u&&(l._socket=null,l._watcher.status(e))},[4,new Promise((function(e){u.onMessage((function(t){if("[object ArrayBuffer]"===Object.prototype.toString.call(t)){var n=function(e,t){var n=new Uint8Array(e),i=new Rt(n),r=i.readByte(),s=new Tt(r),o=ur(s);return o.read(i,n.length-1,t),o}(t,s);if(n instanceof Xi&&l._pingResolve)return l._pingResolve(Ee.SUCCESS),void(l._pingResolve=void 0);if(n instanceof Ji)return pe.debug("recv connect ack -> "+n.status),n.status!==Te.ACCEPTED?(pe.warn("connect failed: "+n.status),void e(n.status)):(pe.info("connect success -> "+a),l.connectedTime=n.timestamp,l.userId=n.userId||"",l._idCount=n.messageId,void e(Ee.SUCCESS));if(n instanceof zi){var i=n.status;switch(pe.warn("recv disconnect signal -> status: "+i),i){case cr.BLOCK_NEW:case cr.BLOCK:l._watcher.status(Ie.BLOCKED);break;case cr.OTHER_DEVICE_LOGIN:l._watcher.status(Ie.KICKED_OFFLINE_BY_OTHER_CLIENT);break;case cr.REDIRECT_NEW:case cr.REDIRECT:l._watcher.status(Ie.REDIRECT);break;default:l._watcher.status(Ie.DISCONNECT_BY_SERVER)}}else l._onReceiveSignal(n)}else pe.error("Socket received invalid data:",t)})),u.onClose((function(t,n){for(var i in pe.warn("websocket closed! code:",t,"reason:",n),c(Ie.CONNECTION_CLOSED),l._messageIds){var r=l._messageIds[i];delete l._messageIds[i],r(Ee.RC_NET_CHANNEL_INVALID)}e(t)})),u.onError((function(t){var n;for(var i in pe.error("websocket error!",null===(n=t)||void 0===n?void 0:n.stack),c(Ie.WEBSOCKET_ERROR),l._messageIds){var r=l._messageIds[i];delete l._messageIds[i],r(Ee.RC_NET_CHANNEL_INVALID)}e(Ee.NETWORK_ERROR)})),u.onOpen((function(){return pe.debug("websocket open =>",a)})),setTimeout((function(){e(Ee.TIMEOUT)}),5e3)}))];case 1:return(h=d.sent())===Ee.SUCCESS?this._socket=u:(pe.warn("connect result -> code: "+h+", url: "+a),u.close()),[2,h]}}))}))},t.prototype._checkAlive=function(){var e;return w(this,void 0,void 0,(function(){var t,n=this;return b(this,(function(i){switch(i.label){case 0:return this._socket?(pe.debug("send ping ->"),this.sendOnly(new Zi),[4,new Promise((function(e){n._pingResolve=e,n._timer&&clearTimeout(n._timer),n._timer=setTimeout((function(){n._pingResolve=void 0,e(Ee.TIMEOUT)}),15e3)}))]):[2];case 1:return(t=i.sent())!==Ee.SUCCESS?(this._failedCount+=1,pe.warn("ping failed count: "+this._failedCount+", code: "+t),this._failedCount>=this.ALLOW_FAILED_TIMES?(this._failedCount=0,pe.warn("ping timeout, close current websocket to reconnect!"),null===(e=this._socket)||void 0===e||e.close(),this._watcher.status(Ie.NETWORK_UNAVAILABLE)):this._checkAlive(),[2]):(pe.debug("recv pong <-"),this._failedCount=0,setTimeout((function(){return n._checkAlive()}),15e3),[2])}}))}))},t.prototype._onReceiveSignal=function(e){return w(this,void 0,void 0,(function(){var t,n,i,r,s,o,a=this;return b(this,(function(u){switch(u.label){case 0:return t=e.messageId,e.header&&e.header.qos!==Qe.AT_MOST_ONCE&&(e instanceof tr&&!e.syncMsg&&(pe.info("send pubAck -> "+t+" "+e.topic),this.sendOnly(new rr(t))),e instanceof ar&&(pe.info("send queryCon -> "+t+" "+e.topic),this.sendOnly(new or(t)))),t>0&&(e instanceof ir||e instanceof ar)&&(pe.info("recv ack -> messageId: "+t+" "+e.topic),(n=this._messageIds[t])&&(n(e),delete this._messageIds[t]),(i=this._syncMessageIds[t])&&(delete this._syncMessageIds[t],i(e))),e instanceof tr?(r=e.syncMsg,s=e.topic,pe.info("recv PublishReader -> messageId: "+t+" "+s),s===hr[hr.userSetData]?[2]:!r||fr(s)?(this._watcher.signal(e),[2]):[4,new Promise((function(e){a._syncMessageIds[t]=e}))]):[3,2];case 1:o=u.sent(),delete this._syncMessageIds[t],this._watcher.signal(e,o),u.label=2;case 2:return[2]}}))}))},t.prototype.sendOnly=function(e){this._socket&&((e instanceof nr||e instanceof sr)&&(e.messageId=this._generateMessageId()),gr(e,this._socket))},t.prototype.send=function(e,t,n,i){return void 0===i&&(i=3e4),w(this,void 0,void 0,(function(){var r,s,o,a=this;return b(this,(function(u){switch(u.label){case 0:return this._socket?(r=this._generateMessageId(),e.messageId=r,gr(e,this._socket),[4,new Promise((function(e){a._messageIds[r]=e,setTimeout((function(){a._messageIds[r]&&delete a._messageIds[r],e()}),i)}))]):[3,2];case 1:return(s=u.sent())?s instanceof ar||s instanceof ir?(o=t&&s.data?this.codec.decodeByPBName(s.data,t,n):s,0!==s.status?(pe.warn("send failed -> message: "+r+", respPBName: "+t+", status: "+s.status),[2,{code:s.status,data:t&&s.data?o:null}]):[2,{code:Ee.SUCCESS,data:o}]):[2,{code:s}]:(pe.warn("send timeout -> message: "+r+", respPBName: "+t+", timeout: "+i),[2,{code:Ee.TIMEOUT}]);case 2:return[2,{code:Ee.RC_NET_CHANNEL_INVALID}]}}))}))},t.prototype.close=function(){this._socket&&(this._socket.close(),this._socket=null,this._watcher.status(Ie.DISCONNECTED))},t}(Gi);!function(e){e.GET="GET",e.POST="POST"}(pr||(pr={}));var yr=function(e){function t(t,n){var i=e.call(this,"comet",n)||this;return i._runtime=t,i._messageIds={},i._syncMessageIds={},i._idCount=0,i._generateMessageId=function(){return++i._idCount},i._pid=encodeURIComponent((new Date).getTime()+Math.random()+""),i}return N(t,e),t.prototype.handleCometRes=function(e){var t=this;if(200!==e.status&&202!==e.status)return!1;var n=J(e.data)?JSON.parse(e.data):e.data;return n?!X(n)||(ct(n,(function(e){return w(t,void 0,void 0,(function(){var t,n,i,r,s,o,a,u,c,h,l,d=this;return b(this,(function(f){switch(f.label){case 0:if((t=e.sessionid)&&(this._sessionid=t),n=function(e){var t=e.headerCode,n=new Tt(t),i=ur(n);for(var r in e)i[r]=e[r];return i}(e),i=n.messageId,r=n._header,s=n.status,n.identifier,o=r&&r.qos!==Qe.AT_MOST_ONCE,i&&n.getIdentifier&&((a=this._messageIds[i])&&a(n),this._syncMessageIds[i]&&this._syncMessageIds[i](n)),o&&(n instanceof tr&&!n.syncMsg&&(u=new rr(i),this.sendOnly(u)),n instanceof ar&&(u=new or(i),this.sendOnly(u))),n instanceof zi){switch(s){case cr.OTHER_DEVICE_LOGIN:this._watcher.status(Ie.KICKED_OFFLINE_BY_OTHER_CLIENT);break;case cr.BLOCK:case cr.BLOCK_NEW:this._watcher.status(Ie.BLOCKED);break;case cr.REDIRECT_NEW:case cr.REDIRECT:this._watcher.status(Ie.REDIRECT);break;default:this._watcher.status(Ie.DISCONNECT_BY_SERVER)}return[2]}return n instanceof tr?(c=n.syncMsg,h=n.topic,!c||fr(h)?(this._watcher.signal(n),[2,!1]):[4,new Promise((function(e){d._syncMessageIds[i]=e}))]):[3,2];case 1:l=f.sent(),delete this._syncMessageIds[i],this._watcher.signal(n,l),f.label=2;case 2:return[2]}}))}))})),!0):(pe.error("received data is not a validJson",n),!1)},t.prototype._startPullSignal=function(e){return w(this,void 0,void 0,(function(){var t,n,i,r;return b(this,(function(s){switch(s.label){case 0:return t=(new Date).getTime(),n=e+"://"+this._domain+"/pullmsg.js?sessionid="+this._sessionid+"&timestrap="+t+"&pid="+this._pid,[4,this._runtime.httpReq({url:n,body:{pid:this._pid},timeout:45e3})];case 1:return i=s.sent(),r=this.handleCometRes(i),this._isDisconnected||(r?this._startPullSignal(e):(this._isDisconnected=!0,this._watcher.status(Ie.NETWORK_UNAVAILABLE))),[2]}}))}))},t.prototype.connect=function(e,t,n,i,r,s){return w(this,void 0,void 0,(function(){var s,o,a,u,c=this;return b(this,(function(h){return r=x(r),this._protocol=i,this._isDisconnected=!1,this._watcher.status(Ie.CONNECTING),s=[],o=0,a=!1,u=!1,[2,new Promise((function(h){var l=function(){return w(c,void 0,void 0,(function(){var n;return b(this,(function(o){switch(o.label){case 0:return 0===s.length||a?[2]:(a=!0,[4,this._connect(e,t,s.shift(),i,r)]);case 1:if((n=o.sent())===Ee.SUCCESS)this._startPullSignal(i),h(n);else if(n===Te.REDIRECT)h(n);else{if(u&&0===s.length)return h(yt(n)),[2];a=!1,l()}return[2]}}))}))};c._watcher.status(Ie.CONNECTING),lr(n,i,c._runtime,(function(e){var t=e.code,n=e.finished,i=e.host;u=n,200===t&&(s.push(i),o++,l()),n&&0===o&&(pe.error("No valid websocket server hosts!"),h(Ee.RC_SOCKET_NOT_CREATED))}))}))]}))}))},t.prototype._connect=function(e,t,n,i,r){return w(this,void 0,void 0,(function(){var s,o,a,u;return b(this,(function(c){switch(c.label){case 0:return s=function(e){return 200!==e.status&&202!==e.status?(pe.error("handle comet res -> res: "+JSON.stringify(e||{})),!1):!!e.data&&(function(e){if(ne(e))return!0;var t=!1;try{var n=JSON.parse(e);t=JSON.stringify(n)===e}catch(e){t=!1}return t}(e.data)?ne(e.data)?e.data:JSON.parse(e.data):(pe.error("received data is not a validJson",e.data),!1))},o=dr(i,n,e,t,this._runtime,r,this._pid),this.sendConnectTime=Date.now(),pe.debug("conenct start -> "+o),[4,this._runtime.httpReq({url:o,body:{pid:this._pid},timeout:5e3})];case 1:return a=c.sent(),u=s(a),this._domain=n,u&&0===u.status?(this._sessionid=u.sessionid,this.userId=u.userId,this.connectedTime=u.timestamp):pe.warn("connect result -> code: "+(null==u?void 0:u.status)+", url: "+o),[2,null==u?void 0:u.status]}}))}))},t.prototype.sendCometData=function(e,t){return w(this,void 0,void 0,(function(){var t,n,i,r,s,o,a,u,c,h;return b(this,(function(l){switch(l.label){case 0:return n=(t=this)._domain,i=t._sessionid,r=t._pid,s=e.messageId,o=e.topic,a=e.targetId,e.identifier,u=e.getHeaderFlag(),c=o?this._protocol+"://"+n+"/websocket?messageid="+s+"&header="+u+"&sessionid="+i+"&topic="+o+"&targetid="+a+"&pid="+r:this._protocol+"://"+n+"/websocket?messageid="+s+"&header="+u+"&sessionid="+i+"&pid="+r,[4,this._runtime.httpReq({url:c,method:pr.POST,body:e.getCometData()})];case 1:return h=l.sent(),this.handleCometRes(h),[2]}}))}))},t.prototype.sendOnly=function(e){this.sendCometData(e)},t.prototype.send=function(e,t,n,i){return void 0===i&&(i=3e4),w(this,void 0,void 0,(function(){var r,s,o,a=this;return b(this,(function(u){switch(u.label){case 0:return r=this._generateMessageId(),e.messageId=r,this.sendCometData(e),[4,new Promise((function(e){a._messageIds[r]=e,setTimeout((function(){delete a._messageIds[r],e()}),i)}))];case 1:return(s=u.sent())?(o=t&&s.data?this.codec.decodeByPBName(s.data,t,n):s,0!==s.status?[2,{code:s.status,data:t&&s.data?o:null}]:[2,{code:Ee.SUCCESS,data:o}]):[2,{code:Ee.TIMEOUT}]}}))}))},t.prototype.close=function(){this._isDisconnected=!0,this._watcher.status(Ie.DISCONNECTED)},t}(Gi),vr=function(e,t,n){this.runtime=e,this._watcher=t,this._options=n,this.currentUserId="",this._appkey=this._options.appkey,this._apiVer=this._options.apiVersion,this.navi=this._createNavi()},Er=function(e){return["navi",e].join("_")},mr=function(){function e(e,t){this._runtime=e,this._options=t,this._naviInfo=null,this._appkey=this._options.appkey,this._apiVersion=x(this._options.apiVersion)}return e.prototype.getInfo=function(e,t,n,i){return w(this,void 0,void 0,(function(){var r,s;return b(this,(function(o){switch(o.label){case 0:return n&&this._clear(e),(r=function(e,t,n){var i,r,s=Er(e);try{var o=n.getItem(s);r=o?JSON.parse(o):[]}catch(e){r=[]}var a=Date.now();return r.length>0&&(r=r.filter((function(e){return a-e.timestamp<72e5}))),0===r.length?n.removeItem(s):n.setItem(s,JSON.stringify(r)),(null===(i=r.find((function(e){return e.token===t})))||void 0===i?void 0:i.naviInfo)||null}(this._appkey,e,this._runtime.localStorage))?(this._naviInfo=r,[2,r]):(s=this._options.navigators.slice(),t.length&&t.forEach((function(e){s.indexOf(e)<0&&s.unshift(e)})),[4,this._reqNavi(s,this._appkey,e,i)]);case 1:return(r=o.sent())?(this._naviInfo=r,this.setNaviInfo2Cache(e,r),[2,r]):[2,r]}}))}))},e.prototype.setNaviInfo2Cache=function(e,t){this._naviInfo=t,function(e,t,n,i){var r,s=Er(e);try{var o=i.getItem(s);r=o?JSON.parse(o):[]}catch(e){r=[]}var a=Date.now();r.length>0&&(r=r.filter((function(e){return a-e.timestamp<72e5&&t!==e.token}))),r.push({timestamp:a,naviInfo:n,token:t}),i.setItem(s,JSON.stringify(r))}(this._appkey,e,t,this._runtime.localStorage)},e.prototype.getInfoFromCache=function(e){return this._naviInfo},e.prototype._clear=function(e){!function(e,t,n){var i,r=Er(e);try{var s=n.getItem(r);i=s?JSON.parse(s):[]}catch(e){i=[]}var o=Date.now();i.length>0&&(i=i.filter((function(e){return o-e.timestamp<72e5&&t!==e.token}))),0===i.length?n.removeItem(r):n.setItem(r,JSON.stringify(i))}(this._appkey,e,this._runtime.localStorage)},e}(),Ir=function(e,t,n){return[e,t,n].join("_")},Tr=function(){function e(e,t){this._runtime=e,this._appkey=t,this._users={}}return e.prototype._getMemData=function(e){return this._users[e]||(this._users[e]={inboxTime:0,outboxTime:0})},e.prototype.setInboxTime=function(e,t){var n=this._getMemData(t);if(!(n.inboxTime>e)){n.inboxTime=e;var i=Ir("inbox",this._appkey,t);this._runtime.localStorage.setItem(i,e.toString())}},e.prototype.getInboxTime=function(e){var t=this._getMemData(e);if(0===t.inboxTime){var n=Ir("inbox",this._appkey,e);t.inboxTime=parseInt(this._runtime.localStorage.getItem(n))||0}return t.inboxTime},e.prototype.setOutboxTime=function(e,t){var n=this._getMemData(t);if(!(n.outboxTime>=e)){n.outboxTime=e;var i=Ir("outbox",this._appkey,t);this._runtime.localStorage.setItem(i,e.toString())}},e.prototype.getOutboxTime=function(e){var t=this._getMemData(e);if(0===t.outboxTime){var n=Ir("outbox",this._appkey,e);t.outboxTime=parseInt(this._runtime.localStorage.getItem(n))||0}return t.outboxTime},e}(),Cr={_caches:{},set:function(e,t){this._caches[e]=t},get:function(e){return this._caches[e]||0},clear:function(e){this._caches[e]=0}},Rr=function(){function e(e,t){this._kvCaches={},this._chatroomId=e,this._currentUserId=t}return e.prototype._add=function(e){var t=e.key;e.isDeleted=!1,this._kvCaches[t]=e},e.prototype._remove=function(e){var t=e.key,n=this._kvCaches[t];n&&(n.isDeleted=!0,this._kvCaches[t]=n)},e.prototype._setEntry=function(e,t){var n=e.key,i=e.type,r=e.isOverwrite,s=e.userId,o=this._getSetUserId(n),a=i===Ue.DELETE,u=o===s,c=!this._isExisted(n),h=a?this._remove:this._add;(t||r||u||c)&&h.call(this,e)},e.prototype.getValue=function(e){var t=this._kvCaches[e]||{};return t.isDeleted?null:t.value},e.prototype.getAllValue=function(){var e={};for(var t in this._kvCaches)this._kvCaches[t].isDeleted||(e[t]=this._kvCaches[t].value);return e},e.prototype._getSetUserId=function(e){return(this._kvCaches[e]||{}).userId},e.prototype._isExisted=function(e){var t=this._kvCaches[e]||{},n=t.value,i=t.isDeleted;return n&&!i},e.prototype.setEntries=function(e){var t=this,n=e.kvEntries,i=e.isFullUpdate;n=n||[],(i=i||!1)&&this.clear(),n.forEach((function(e){t._setEntry(e,i)})),pe.debug("end setEntries")},e.prototype.clear=function(){this._kvCaches={}},e}(),Sr=function(){function e(e){this._pullQueue=[],this._isPulling=!1,this._storeCaches={},this._engine=e}return e.prototype._startPull=function(){return w(this,void 0,void 0,(function(){var e,t,n,i,r,s,o;return b(this,(function(a){switch(a.label){case 0:return this._isPulling||0===this._pullQueue.length?[2]:(this._isPulling=!0,e=this._pullQueue.splice(0,1)[0],t=e.chrmId,n=e.timestamp,(i=Cr.get(t))>n?(this._isPulling=!1,this._startPull(),[2]):[4,this._engine.pullChatroomEntry(t,i)]);case 1:return r=a.sent(),s=r.code,o=r.data,this._isPulling=!1,s===Ee.SUCCESS?(Cr.set(t,o.syncTime||0),this._startPull()):this._startPull(),[2]}}))}))},e.prototype.reset=function(e){Cr.clear(e);var t=this._storeCaches[e];t&&t.clear()},e.prototype.pullEntry=function(e,t){this._pullQueue.push({chrmId:e,timestamp:t}),this._startPull()},e.prototype.setLocal=function(e,t,n){var i=this._storeCaches[e];ae(i)||(i=new Rr(e,n)),i.setEntries(t),this._storeCaches[e]=i},e.prototype.getValue=function(e,t){var n=this._storeCaches[e];return n?n.getValue(t):null},e.prototype.getAll=function(e){var t=this._storeCaches[e],n={};return t&&(n=t.getAllValue()),n},e}(),Nr=function(){function e(e,t,n,i){this._runtime=e,this._appkey=t,this._userId=n,this._canJoinMulipleChrm=i,this._sessionKey="",this._joinedChrmsInfo={},this._sessionKey="sync-chrm-"+this._appkey+"-"+this._userId}return e.prototype.set=function(e,t){void 0===t&&(t=10),!this._canJoinMulipleChrm&&(this._joinedChrmsInfo={}),this._joinedChrmsInfo[e]=t,this._runtime.sessionStorage.setItem(this._sessionKey,JSON.stringify(this._joinedChrmsInfo))},e.prototype.get=function(){var e,t;try{t=this._runtime.sessionStorage.getItem(this._sessionKey),e=JSON.parse(t||"{}")}catch(n){pe.error("parse rejoined chrm infos error -> "+t),e={}}return e},e.prototype.remove=function(e){delete this._joinedChrmsInfo[e],ae(this._joinedChrmsInfo)?this._runtime.sessionStorage.setItem(this._sessionKey,JSON.stringify(this._joinedChrmsInfo)):this.clear()},e.prototype.clear=function(){this._joinedChrmsInfo={},this._runtime.sessionStorage.removeItem(this._sessionKey)},e}(),Or="converStatusChanged",wr=function(){function e(e,t,n){this._eventEmitter=new ge,this._pullQueue=[],this._isPulling=!1,this._storage=T(e.runtime),this._appkey=t,this._currentUserId=n,this._engine=e,this._storagePullTimeKey="con-s-"+t+"-"+n}return e.prototype._set=function(e){var t=this;if(!re(e)&&Array.isArray(e)){var n=this._storage.get(this._storagePullTimeKey)||0,i=e.length;e.forEach((function(e,r){var s=e.updatedTime||0;n=s>n?s:n,e.conversationType=e.type,t._eventEmitter.emit(Or,{statusItem:e,isLastPull:r===i-1})})),this._storage.set(this._storagePullTimeKey,n)}},e.prototype._startPull=function(){return w(this,void 0,void 0,(function(){var e,t,n,i;return b(this,(function(r){switch(r.label){case 0:return this._isPulling||0===this._pullQueue.length?[2]:(this._isPulling=!0,e=this._pullQueue.splice(0,1)[0],[4,this._engine.pullConversationStatus(e)]);case 1:return t=r.sent(),n=t.code,i=t.data,n===Ee.SUCCESS?(this._isPulling=!1,this._set(i),this._startPull()):this._startPull(),[2]}}))}))},e.prototype.pull=function(e){var t=this._storage.get(this._storagePullTimeKey)||0;(e>t||0===e)&&(this._pullQueue.push(t),this._startPull())},e.prototype.watch=function(e){this._eventEmitter.on(Or,(function(t){e(t)}))},e.prototype.unwatch=function(){this._eventEmitter.off(Or,(function(e){}))},e}(),br={c:{keyName:"unreadMessageCount",defaultVal:0},hm:{keyName:"hasMentioned",defaultVal:!1},m:{keyName:"mentionedInfo",defaultVal:null},t:{keyName:"lastUnreadTime",defaultVal:0},nc:{keyName:"notificationStatus",defaultVal:2},to:{keyName:"isTop",defaultVal:!1},tg:{keyName:"tags",defaultVal:{}},mc:{keyName:"unreadMentionedCount",defaultVal:0}},Mr={};for(var Ar in br){var Ur=br[Ar].keyName;Mr[Ur]=Ar}var Lr,Pr=function(){function e(e,t,n){this._appkey=t,this._currentUserId=n;var i="con-"+t+"-"+n;this.storage=new R(e,i),this._localStore=new R(e,"CONVER-"+t+"-"+n)}return e.prototype._getStoreKey=function(e,t,n){return n+"_"+e+"_"+t},e.prototype._getConOptionByKey=function(e){var t=(e=e||"").split("_");if(t.length>=2){var n=t.shift(),i=t.shift(),r=t.join("_");return{conversationType:Number(i),targetId:r,channelId:n}}return{conversationType:j.PRIVATE,targetId:"",channelId:""}},e.prototype.updateMentionedData=function(e){var t=this,n=e.conversationType,i=e.targetId,r=e.messageType,s=e.isMentioned,o=e.content,a=e.senderUserId,u=e.channelId,c=this._getStoreKey(n,i,u),h=this._localStore.get(c)||{},l=Mr.mentionedInfo,d=Mr.hasMentioned,f=h[l]||{},p=f.userIdList||[],g=o.mentionedInfo;if(g){if(s&&n===j.GROUP)(g.userIdList||[]).forEach((function(e){e===t._currentUserId&&p.indexOf(a)<0&&p.push(a)})),g.type===we.ALL&&p.indexOf(a)<0&&p.push(a);if(r===Re.RECALL&&n===j.GROUP){var _=p.indexOf(a);_>=0&&p.splice(_,1)}g={userIdList:p,type:(null==g?void 0:g.type)||f.type},0!==p.length?(h[l]=g,h[d]=!0):(delete h[l],delete h[d]),ae(h)?this._localStore.set(c,h):this._localStore.remove(c)}},e.prototype.set=function(e,t,n,i){var r=this._getStoreKey(e,t,i),s=this._localStore.get(r)||{};for(var o in n){var a=Mr[o],u=n[o];if(!re(a)&&!re(u)&&"hasMentioned"!==o&&"MentionedInfo"!==o){if(u===br[a].defaultVal||"tags"===o&&!ae(u))delete s[a];else if("tags"===o){var c=u;for(var h in c)c[h].isTop||delete c[h].isTop;s[a]=u}else s[a]=u;s.c||(delete s.t,delete s.hm,delete s.m,delete s.mc)}}ae(s)?this._localStore.set(r,s):this._localStore.remove(r)},e.prototype.get=function(e,t,n){void 0===n&&(n="");var i=this._getStoreKey(e,t,n),r=this._localStore.get(i)||{},s={};for(var o in br){var a=br[o],u=a.keyName,c=a.defaultVal;s[u]=r[o]||pt(c)}return s},e.prototype.getValue=function(e){var t=this._localStore.getValues()||{},n=[];for(var i in t){var r=this._getConOptionByKey(i),s={conversationType:r.conversationType,targetId:r.targetId,channelId:r.channelId},o=t[i];for(var a in o){var u=br[a],c=u.keyName,h=u.defaultVal;s[c]=o[a]||pt(h)}s=e?e(s):s,n.push(s)}return n},e.prototype.getValueForTag=function(){var e=this._localStore.getValues()||{},t={};for(var n in e){var i=this._getConOptionByKey(n),r=i.conversationType,s=i.targetId,o={},a=e[n];for(var u in a){var c=br[u],h=c.keyName,l=c.defaultVal;o[h]=a[u]||pt(l)}for(var d in o.tags){re(t[d])&&(t[d]=[]);var f=Object.assign({},o,{conversationType:r,targetId:s});delete f.tags,t[d].push(f)}}return t},e.prototype.adaptOldStore=function(){try{var e=this.storage.getValues();if(0===Object.keys(e).length)return;for(var t in e){var n="_"+t;this._localStore.set(n,e[t])}}catch(e){pe.error("adaptOldStore error: "+e.message)}},e}(),Dr=[j.PRIVATE,j.GROUP,j.SYSTEM,j.PUBLIC_SERVICE,j.APP_PUBLIC_SERVICE],Vr="conversationChanged",kr="conTagStatusChanged",xr=function(){function e(e,t,n,i,r){var s=this;this._updatedConversations={},this._conTagStatusChanged=!1,this._eventEmitter=new ge,this._draftMap={},this._appkey=t,this._loginUserId=n,this._store=new Pr(e.runtime,t,n),this._statusManager=new wr(e,t,n),this._statusManager.watch((function(e){var t=e.statusItem,n=e.isLastPull;s.addStatus(t,n)})),this._eventEmitter.on(Vr,(function(e){i(e)})),this._eventEmitter.on(kr,(function(){r()}))}return e.prototype._calcUnreadCount=function(e,t){var n=e.content,i=e.messageType,r=e.sentTime,s=e.isCounted,o=e.messageDirection,a=e.senderUserId,u=o===ye.SEND&&a===this._loginUserId,c=i===Re.RECALL,h=ne(n),l=!1,d={},f=t.lastUnreadTime||0,p=t.unreadMessageCount||0;if(f>r||u)return{hasChanged:l,localConversation:t,updateItems:d};(s&&(t.unreadMessageCount=p+1,t.lastUnreadTime=r,l=!0),c&&h)&&(f>=n.sentTime&&p&&(t.unreadMessageCount=p-1,l=!0));return l&&(d.unreadMessageCount={val:t.unreadMessageCount,time:r}),{hasChanged:l,localConversation:t,updateItems:d}},e.prototype._calcMentionedInfo=function(e,t){var n=e.content,i=(e.messageDirection,e.isMentioned),r=e.sentTime;ye.SEND;var s=ne(n),o=!1,a={};return i&&s&&n.mentionedInfo&&(t.hasMentioned=!0,o=!0,a.hasMentioned={val:!0,time:r},a.mentionedInfo={val:n.mentionedInfo,time:r}),{hasChanged:o,localConversation:t,updateItems:a}},e.prototype._calcMentionedCount=function(e,t){var n=e.content,i=e.messageDirection,r=!1;if(e.isMentioned&&i===ye.RECEIVE&&(null==n?void 0:n.mentionedInfo)){var s=n.mentionedInfo,o=s.type,a=s.userIdList;if(o===we.ALL||(a||[]).includes(this._loginUserId)){r=!0;var u=t.unreadMentionedCount||0;t.unreadMentionedCount=u+1}}return{hasChanged:r,localConversation:t}},e.prototype._setUpdatedConversation=function(e){if(ne(e)){var t=e.conversationType,n=e.targetId,i=e.channelId,r=t+"_"+n,s=this._store.get(t,n,i)||{};this._updatedConversations[r]=Object.assign(s,e)}},e.prototype._setConTagStatusChanged=function(e,t,n,i){var r=(this._store.get(e,t,i)||{}).tags||{};if(Object.keys(r).length===Object.keys(n).length){for(var s in r)if(!n[s]||r[s].isTop!==n[s].isTop)return void(this._conTagStatusChanged=!0)}else this._conTagStatusChanged=!0},e.prototype.addStatus=function(e,t){var n=e.conversationType,i=e.targetId,r=e.updatedTime,s=e.notificationStatus,o=e.isTop,a=e.tags,u=e.channelId,c={},h={};re(s)||(h.notificationStatus={time:r,val:s}),re(o)||(h.isTop={time:r,val:o}),re(a)||(h.tags={time:r,val:a},null==a||a.forEach((function(e){c[e.tagId]={isTop:e.isTop}}))),this._setConTagStatusChanged(n,i,c,u),this._store.set(n,i,{notificationStatus:s,isTop:o,tags:c},u),this._setUpdatedConversation({conversationType:n,targetId:i,updatedItems:h,channelId:u}),t&&this._notifyConversationChanged()},e.prototype._notifyConversationChanged=function(){var e=[];for(var t in this._updatedConversations)e.push(this._updatedConversations[t]);0!==e.length&&(this._eventEmitter.emit(Vr,e),this._updatedConversations={},this._conTagStatusChanged&&(this._eventEmitter.emit(kr),this._conTagStatusChanged=!1))},e.prototype.setConversationCacheByMessage=function(e,t){var n=this,i=e.conversationType,r=e.isPersited,s=e.targetId,o=e.channelId;if(Dr.indexOf(i)>=0){var a=!1,u=this._store.get(i,s,o),c={};if([this._calcUnreadCount,this._calcMentionedInfo,this._calcMentionedCount].forEach((function(t){var i=t.call(n,e,u),r=i.hasChanged,s=i.localConversation,o=i.updateItems;a=a||r,c=O(O({},c),o),u=pt(s)})),a&&this._store.set(i,s,u,o),this._store.updateMentionedData(e),r){var h=this._store.get(i,s,o);h.updatedItems=O({latestMessage:{time:e.sentTime,val:e}},c),h.latestMessage=e;var l=Object.assign(h,{conversationType:i,targetId:s,channelId:o});this._setUpdatedConversation(l)}(a||r)&&this._notifyConversationChanged()}},e.prototype.get=function(e,t,n){return void 0===n&&(n=""),this._store.get(e,t,n)},e.prototype.getAllUnreadCount=function(e,t,n){var i=this._store.getValue(),r=0;return i.forEach((function(e){var i=e.unreadMessageCount,s=e.notificationStatus,o=e.conversationType;i=i||0,(n||1!==s)&&(t.length>0?t.includes(Number(o))&&(r+=Number(i)):r+=Number(i))})),r},e.prototype.getUnreadCountByTag=function(e,t){var n=this._store.getValueForTag()[e]||[],i=0;return n.forEach((function(e){var n=e.unreadMessageCount,r=e.notificationStatus;(t||1!==r)&&(n=n||0,i+=Number(n))})),i},e.prototype.getUnreadCount=function(e,t,n){return this._store.get(e,t,n).unreadMessageCount||0},e.prototype.clearUnreadCount=function(e,t,n,i){void 0===i&&(i=!0);var r=this._store.get(e,t,n),s=r.unreadMessageCount,o=r.hasMentioned,a={};if(s&&(r.unreadMessageCount=0,a.unreadMessageCount={val:0,time:Date.now()}),o&&(r.hasMentioned=!1,r.unreadMentionedCount=0,r.mentionedInfo=void 0,a.hasMentioned={val:!1,time:Date.now()},a.mentionedInfo={val:void 0,time:Date.now()}),this._store.set(e,t,r,n),i&&0!==Object.keys(a).length){var u=Object.assign(r,{conversationType:e,targetId:t,channelId:n,updatedItems:a});this._setUpdatedConversation(u),this._notifyConversationChanged()}},e.prototype.clearAllUnreadCount=function(){var e=this;this._store.getValue().forEach((function(t){t.unreadMessageCount&&(t.unreadMessageCount=0,e._store.set(t.conversationType,t.targetId,t,t.channelId))}))},e.prototype.startPullConversationStatus=function(e){this._statusManager.pull(e)},e.prototype.setDraft=function(e,t,n,i){var r=e+"_"+t+"_"+i;this._draftMap[r]=n},e.prototype.getDraft=function(e,t,n){var i=e+"_"+t+"_"+n;return this._draftMap[i]},e.prototype.clearDraft=function(e,t,n){var i=e+"_"+t+"_"+n;delete this._draftMap[i]},e.prototype.addTagStatus=function(e,t,n,i){void 0===i&&(i="");var r=this._store.get(e,t,i).tags;r=Object.assign(r,n),this._store.set(e,t,{tags:r},i)},e.prototype.deleteTagStatus=function(e,t,n,i){void 0===i&&(i="");var r=this._store.get(e,t,i).tags;n.forEach((function(e){delete r[e]})),this._store.set(e,t,{tags:r},i)},e.prototype.getConversationListForTag=function(){return this._store.getValueForTag()},e.prototype.getBlockConversationList=function(){return this._store.getValue().filter((function(e){return e.notificationStatus===Ne.OPEN})).map((function(e){return{conversationType:e.conversationType,targetId:e.targetId,channelId:e.channelId}}))},e.prototype.getTopConversationList=function(){return(this._store.getValue()||{}).filter((function(e){return e.isTop})).map((function(e){return{conversationType:e.conversationType,targetId:e.targetId,channelId:e.channelId}}))},e.prototype.adaptOldStore=function(){this._store.adaptOldStore()},e.prototype.getUnreadMentionedCount=function(e,t,n){return void 0===e&&(e=""),this.get(t,n,e).unreadMentionedCount||0},e.prototype.getAllUnreadMentionedCount=function(){var e=this._store.getValue(),t=0;return e.forEach((function(e){var n=e.unreadMentionedCount;n=n||0,t+=Number(n)})),t},e.prototype.getAllConversationState=function(){return this._store.getValue().filter((function(e){return e.unreadMessageCount||e.unreadMentionedCount})).map((function(e){return{conversationType:e.conversationType,targetId:e.targetId,channelId:e.channelId,unreadCount:e.unreadMessageCount||0,unreadMentionedCount:e.unreadMentionedCount||0}}))},e}(),Br=function(){function e(e,t,n,i){this._pullQueue=[],this._isPulling=!1,this._storageTagKey="tag-"+t+"-"+n,this._storagePullTimeKey="us-s-"+t+"-"+n,this._storage=T(e.runtime),this._engine=e,this._tagWatcherFunc=i}return e.prototype._updateTag=function(e){var t=e.tags,n={};t.forEach((function(e){n[e.tagId]={tagName:e.tagName,createdTime:e.createdTime}})),this._storage.set(this._storageTagKey,n),this._tagWatcherFunc()},e.prototype.addTag=function(e,t){var n=this._storage.get(this._storageTagKey)||{};e.forEach((function(e){var t,i=(null===(t=n[e.tagId])||void 0===t?void 0:t.createdTime)||e.createdTime||0;n[e.tagId]={tagName:e.tagName,createdTime:i}})),this._storage.set(this._storageTagKey,n),this._storage.set(this._storagePullTimeKey,t)},e.prototype.deleteTag=function(e,t){var n=this._storage.get(this._storageTagKey)||{};e.forEach((function(e){delete n[e]})),this._storage.set(this._storageTagKey,n),this._storage.set(this._storagePullTimeKey,t)},e.prototype.getTagsInfo=function(){return this._storage.get(this._storageTagKey)||{}},e.prototype.getTags=function(){var e=this._storage.get(this._storageTagKey)||{},t=[];for(var n in e)t.push({tagId:n,tagName:e[n].tagName,createdTime:e[n].createdTime,conversationCount:0});return t.sort((function(e,t){return(e.createdTime||0)-(t.createdTime||0)}))},e.prototype.getTagById=function(e){var t=this._storage.get(this._storageTagKey)||{};return t[e]?{tagId:e,tagName:t[e].tagName,createdTime:t[e].createdTime,conversationCount:0}:null},e.prototype._startPull=function(){return w(this,void 0,void 0,(function(){var e,t,n,i,r,s,o,a;return b(this,(function(u){switch(u.label){case 0:return this._isPulling||0===this._pullQueue.length?[2]:(this._isPulling=!0,e=this._pullQueue.splice(0,1)[0],[4,this._engine.pullUserSettings(e)]);case 1:return t=u.sent(),n=t.code,i=t.data,n!==Ee.SUCCESS||re(i)?(this._isPulling=!1,this._startPull()):(s=(r=i).settings,o=r.version,a=s.Tag,re(a)||this._updateTag(a),this._storage.set(this._storagePullTimeKey,o),this._isPulling=!1,this._startPull()),[2]}}))}))},e.prototype.pullUserSettings=function(e){var t=this._storage.get(this._storagePullTimeKey)||0;(e>t||0===e)&&(this._pullQueue.push(t),this._startPull())},e.prototype.getVersion=function(){return this._storage.get(this._storagePullTimeKey)||0},e}(),Fr=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i._miniConnectUrl="",i._connectType=n.connectionType,i}return N(t,e),t.prototype._formatJSONPUrl=function(e,t,n,i){return e+"/"+(this._runtime.isSupportSocket()&&"websocket"===this._connectType?"navi":"cometnavi")+".js?appId="+n+"&token="+encodeURIComponent(t)+"&callBack="+i+"&v="+this._apiVersion+"&r="+Date.now()},t.prototype.getInfo=function(t,n,i){var r;return w(this,void 0,void 0,(function(){var s;return b(this,(function(o){return this._runtime.useNavi||(s=void 0,s=this._runtime.isSupportSocket()&&"websocket"===this._connectType?c.join(","):h.join(","),this._miniConnectUrl=(null===(r=this._options.miniCMPProxy)||void 0===r?void 0:r.length)?this._options.miniCMPProxy.join(","):s||"",n=[]),[2,e.prototype.getInfo.call(this,t,n,i)]}))}))},t.prototype._reqNavi=function(e,t,n){return w(this,void 0,void 0,(function(){var i,r,s,o,a,u,c,h,l;return b(this,(function(d){switch(d.label){case 0:i="getServerEndpoint",r=0,s=e.length,d.label=1;case 1:return r<s?(o=this._formatJSONPUrl(e[r],n,t,i),pe.debug("req navi => "+o),[4,this._runtime.httpReq({url:o,timeout:1e4,dataType:"text"})]):[3,4];case 2:if(200!==(a=d.sent()).status)return 403===a.status?pe.error("request navi error: "+Ee.RC_CONN_USER_OR_PASSWD_ERROR):401===a.status&&pe.error("request navi error: "+Ee.RC_CONN_APP_BLOCKED_OR_DELETED),[3,3];try{return u=a.data.match(/{[\\d\\D]+}/),0===(c=u&&u[0]?u[0]:"").indexOf(\'{\\\\"code\\\\":\')&&(c=JSON.parse(\'"\'+c+\'"\')),l=JSON.parse(c),h=/^https/.test(o)?"https":"http",l.protocol=h,this._runtime.useNavi||(l.server="",l.backupServer=this._miniConnectUrl,l.logSwitch=0),[2,l]}catch(e){pe.error("parse navi err =>",e)}d.label=3;case 3:return r+=1,[3,1];case 4:return this._runtime.useNavi?[2,null]:[2,l={code:200,protocol:"https",server:"",voipCallInfo:"",kvStorage:0,openHttpDNS:!1,historyMsg:!1,chatroomMsg:!1,uploadServer:"https://upload.qiniup.com",bosAddr:"https://gz.bcebos.com",location:"",monitor:0,joinMChrm:!1,openMp:0,openUS:0,grpMsgLimit:0,isFormatted:0,gifSize:2048,logSwitch:0,logPolicy:"",compDays:0,msgAck:"",activeServer:"",qnAddr:"",extkitSwitch:0,alone:!1,voipServer:"",offlinelogserver:"",backupServer:this._miniConnectUrl}]}}))}))},t}(mr),Kr=function(){function e(e){this._pullQueue=[],this._isPulling=!1,this._pullTime=0,this._engine=e}return e.prototype._startPull=function(){return w(this,void 0,void 0,(function(){var e,t,n,i,r,s,o;return b(this,(function(a){switch(a.label){case 0:return this._isPulling||0===this._pullQueue.length?[2]:(this._isPulling=!0,e=this._pullQueue.splice(0,1)[0],t=e.roomId,n=e.timestamp,(i=this._pullTime)>n?(this._isPulling=!1,this._startPull(),[2]):[4,this._engine.pullRTCRoomEntry(t,i)]);case 1:return r=a.sent(),s=r.code,o=r.data,s===Ee.SUCCESS?(this._isPulling=!1,this._pullTime=o.syncTime||0,this._startPull()):this._startPull(),[2]}}))}))},e.prototype.pullEntry=function(e,t){this._pullQueue.push({roomId:e,timestamp:t}),this._startPull()},e.prototype.reset=function(){this._pullTime=0,this._isPulling=!1},e}(),qr=function(e,t){return["send_msg",e,t].join("_")},Yr=function(){function e(e,t){this._runtime=e,this._appkey=t,this._sendMessageMap={},this._userId=""}return e.prototype.init=function(e){this._userId=e;var t=qr(this._appkey,e);this._sendMessageMap=this._getLocalInfo(t)},e.prototype._getLocalInfo=function(e){var t=this._runtime.localStorage.getItem(e);try{return t?JSON.parse(t):{}}catch(e){return{}}},e.prototype.setMessage=function(e,t){this._sendMessageMap[e]=t;var n=qr(this._appkey,this._userId),i=this._getLocalInfo(n);i[e]=t,this._runtime.localStorage.setItem(n,JSON.stringify(i))},e.prototype.getSendMessageMap=function(){return this._sendMessageMap},e.prototype.removeByUID=function(e){delete this._sendMessageMap[e]},e.prototype.removeByTimestamp=function(e){var t=qr(this._appkey,this._userId),n=this._getLocalInfo(t);Object.keys(n).forEach((function(t){n[t]<e&&delete n[t]})),this._runtime.localStorage.setItem(t,JSON.stringify(n))},e}(),Hr=function(e){var t="RCDeviceId",n=T(e),i="",r=n.get(t);return r?i=r:(i=H(),n.set(t,i)),i};(Lr={})[j.PRIVATE]=hr.qryPMsg,Lr[j.GROUP]=hr.qryGMsg,Lr[j.CHATROOM]=hr.qryCHMsg,Lr[j.CUSTOMER_SERVICE]=hr.qryCMsg,Lr[j.SYSTEM]=hr.qrySMsg;var Gr=[hr[hr.recallMsg],hr[hr.ppMsgS],hr[hr.pgMsgS],hr[hr.ppMsgP],hr[hr.pgMsgP],hr[hr.chatMsg],hr[hr.pcMsgP],hr[hr.prMsgS]],jr=function(e,t,n,r,s,o){return{conversationType:e,targetId:t,senderUserId:o,messageDirection:ye.SEND,isCounted:!!n.isCounted,isMentioned:!!n.isMentioned,content:n.content,messageType:n.messageType,isOffLineMessage:!1,isPersited:!!n.isPersited,messageUId:r,sentTime:s,receivedTime:0,disableNotification:!!n.disableNotification,isStatusMessage:!!n.isStatusMessage,canIncludeExpansion:!!n.canIncludeExpansion,expansion:n.canIncludeExpansion?n.expansion:null,receivedStatus:i.UNREAD,pushConfig:n.pushConfig,channelId:n.channelId}},Qr=function(e){function t(t,n,i){var r=e.call(this,t,n,i)||this;return r._customMessageType={},r._reconnectTimer=-1,r._pullOfflineFinished=!1,r._connectedTime=0,r._localConnectedTime=0,r._pullingMsg=!1,r._pullQueue=[],r._chrmsQueue={},r._latestSyncTimestamp=0,r._intervalTimer=-1,r._letterbox=new Tr(t,i.appkey),r._sendMessageStore=new Yr(t,i.appkey),r._chrmEntryHandler=new Sr(r),r}return N(t,e),t.prototype._createNavi=function(){return new Fr(this.runtime,this._options)},t.prototype.getConnectedTime=function(){return this._connectedTime},t.prototype.connect=function(e,t){return w(this,void 0,void 0,(function(){var n,i,r,s,o,a=this;return b(this,(function(u){switch(u.label){case 0:return n=[],this._naviInfo=t,t.server?n.push(t.server):pe.warn("navi.server is invalid"),(i=t.backupServer)&&i.split(",").forEach((function(e){n.indexOf(e)<0&&n.push(e)})),0===n.length?(pe.error("navi invaild.",n),[2,Ee.UNKNOWN]):(r=this.runtime.createDataChannel({status:function(i){a._connectionStatusHandler(i,e,n,t.protocol)},signal:this._signalHandler.bind(this)},this._options.connectionType),s=Ze.V3,1===t.openAnti&&(s=Ze.V4),[4,r.connect(this._appkey,e,n,t.protocol,this._apiVer,s)]);case 1:return(o=u.sent())===Ee.SUCCESS?(this._channel=r,this.currentUserId=r.userId,this._connectedTime=r.connectedTime,this._localConnectedTime=Math.floor((Date.now()+r.sendConnectTime)/2),this._watcher.status(Ie.CONNECTED),this._pullOfflineFinished=!1,this._conversationManager=new xr(this,this._appkey,this.currentUserId,this._watcher.conversation,this._watcher.conversationTag),this._conversationManager.startPullConversationStatus(0),this._userSettingManager=new Br(this,this._appkey,this.currentUserId,this._watcher.tag),this._userSettingManager.pullUserSettings(0),this._sendMessageStore.init(this.currentUserId),this._conversationManager.adaptOldStore(),this._rtcKVManager=new Kr(this),this._joinedChrmManager=new Nr(this.runtime,this._appkey,this.currentUserId,t.joinMChrm),this._startSyncInterval()):r.close(),[2,o]}}))}))},t.prototype._connectionStatusHandler=function(e,t,n,i){if(pe.warn("connection status changed:",e),e!==Ie.CONNECTING)if(e!==Ie.CONNECTED){if(this._channel&&e!==Ie.DISCONNECTED)return e===Ie.BLOCKED||e===Ie.KICKED_OFFLINE_BY_OTHER_CLIENT||e===Ie.DISCONNECT_BY_SERVER?(this.disconnect(),void this._watcher.status(e)):void(e!==Ie.REDIRECT?(this._watcher.status(e),this._try2Reconnect(t,n,i)):this._watcher.status(e));this._watcher.status(e)}else this._watcher.status(e);else this._watcher.status(e)},t.prototype._try2Reconnect=function(e,t,n){return w(this,void 0,void 0,(function(){var i,r=this;return b(this,(function(s){switch(s.label){case 0:return this._channel?(i=Ze.V3,1===this._naviInfo.openAnti&&(i=Ze.V4),[4,this._channel.connect(this._appkey,e,t,n,this._apiVer,i)]):[2];case 1:return s.sent()===Ee.SUCCESS?(this._pullOfflineFinished=!1,this._startSyncInterval(),this._watcher.status(Ie.CONNECTED),this._rejoinChrm(),pe.__insertLogIntoDatabase(),[2]):(this._watcher.status(Ie.WEBSOCKET_UNAVAILABLE),this._reconnectTimer=setTimeout((function(){r._reconnectTimer=-1,r._try2Reconnect(e,t,n)}),5e3),[2])}}))}))},t.prototype._signalHandler=function(e,t){var n=e.syncMsg,i=e.topic;if(n)this._receiveSyncMsg(e,t);else{var r=hr[i];if(r)switch(r){case hr.s_ntf:pe.info("recv s_ntf -> signal.messageId: "+e.messageId),this._pullMsg(e);break;case hr.s_msg:this._receiveMsg(e);break;case hr.s_cmd:this._receiveStateNotify(e);break;case hr.s_us:this._receiveSettingNotify(e);break;case hr.rtc_ntf:this._receiveRtcKv(e)}else pe.error("unknown topic:",i)}},t.prototype._receiveStateNotify=function(e){var t,n=null===(t=this._channel)||void 0===t?void 0:t.codec.decodeByPBName(e.data,Pt),i=n.time,r=n.type,s=n.chrmId;switch(r){case 2:this._chrmEntryHandler.pullEntry(s,i);break;case 3:this._conversationManager.startPullConversationStatus(i);break;case 4:this._chrmEntryHandler.reset(s),this._watcher.chatroom({chatroomDestroyed:e.targetId})}},t.prototype._receiveSettingNotify=function(e){var t,n=(null===(t=this._channel)||void 0===t?void 0:t.codec.decodeByPBName(e.data,Mn)).version;this._userSettingManager.pullUserSettings(n)},t.prototype._receiveRtcKv=function(e){var t,n=null===(t=this._channel)||void 0===t?void 0:t.codec.decodeByPBName(e.data,Qn),i=n.time,r=n.type,s=n.roomId;switch(r){case 1:this._rtcKVManager.pullEntry(s,i)}},t.prototype._receiveMessageExpansion=function(e){var t=e.content,n=t.put,i=t.del,r=t.mid;n&&this._watcher.expansion({updatedExpansion:{messageUId:r,expansion:n}}),i&&this._watcher.expansion({deletedExpansion:{messageUId:r,deletedKeys:i}})},t.prototype._receiveSyncMsg=function(e,t){var n;if(Gr.includes(e.topic)){var i=null===(n=this._channel)||void 0===n?void 0:n.codec.decodeByPBName(e.data,Nt,{currentUserId:this.currentUserId,signal:e});i=this._handleMsgProperties(i),t&&(i.sentTime=t.timestamp,i.messageUId=t.messageUId),this._pullingMsg?this._pullQueue.push((null==t?void 0:t.timestamp)||i.sentTime):(t&&this._sendMessageStore.setMessage(t.messageUId,t.timestamp),i.messageType!==Re.EXPANSION_NOTIFY?(i.messageType===Re.SYNC_READ_STATUS&&this._conversationManager.clearUnreadCount(i.conversationType,i.targetId,i.channelId),this._conversationManager.setConversationCacheByMessage(i,!0),this._watcher.batchMessage([i])):this._receiveMessageExpansion(i))}},t.prototype._pullMsg=function(e){if(this._channel){var t=this._channel.codec.decodeByPBName(e.data,Pt),n=t.type,i=t.chrmId,r=t.time;if(pe.info("s_ntf -> type: "+n+", chrmId: "+i+", time: "+r),2===n){var s=this._chrmsQueue[i];if(!s)return;s.queue.push(r),this._pullChrmMsg(i)}else this._pullQueue.push(r),this._syncMsg()}},t.prototype._startSyncInterval=function(){var e=this;this._stopSyncInterval();this._intervalTimer=setInterval((function(){Date.now()-e._latestSyncTimestamp>=18e4&&e._syncMsg()}),3e4),this._latestSyncTimestamp=Date.now(),this._syncMsg()},t.prototype._stopSyncInterval=function(){-1!==this._intervalTimer&&(clearInterval(this._intervalTimer),this._intervalTimer=-1)},t.prototype._syncMsg=function(){return w(this,void 0,void 0,(function(){var e,t,n,i,r,s,o,a,u,c,h,l,d,f,p=this;return b(this,(function(g){switch(g.label){case 0:return this._pullingMsg?[2]:this._channel?(this._pullingMsg=!0,e=this._letterbox.getOutboxTime(this.currentUserId),t=this._letterbox.getInboxTime(this.currentUserId),pe.info("pullMsg -> sendboxTime: "+e+", inboxTime: "+t),n=this._channel.codec.encodeSyncMsg({sendboxTime:e,inboxTime:t}),i=new sr(hr[hr.pullMsg],n,this.currentUserId),[4,this._channel.send(i,bt,{connectedTime:this._channel.connectedTime,currentUserId:this.currentUserId})]):(this._pullingMsg=!1,[2]);case 1:return r=g.sent(),s=r.code,o=r.data,this._latestSyncTimestamp=Date.now(),s!==Ee.SUCCESS||!o||re(o.finished)||re(o.list)||re(o.syncTime)?(pe.warn("pullMsg failed -> code:",s,", data: ",o),this._pullingMsg=!1,[2]):(a=o.list,u=o.finished,c=o.syncTime,pe.info("pullMsg success -> syncTime: "+c+", finished: "+u),h=0,l=[],a.forEach((function(e){if(e.messageDirection===ye.SEND&&(h=Math.max(e.sentTime,h),p._sendMessageStore.getSendMessageMap()[e.messageUId]))return void p._sendMessageStore.removeByUID(e.messageUId);if(e.messageType!==Re.EXPANSION_NOTIFY){if(e.messageType===Re.SYNC_READ_STATUS){if(e.senderUserId!==p.currentUserId)return;p._conversationManager.clearUnreadCount(e.conversationType,e.targetId,e.channelId)}var t=p._handleMsgProperties(e);p._conversationManager.setConversationCacheByMessage(t,!0),l.push(t)}else p._receiveMessageExpansion(e)})),this._watcher.batchMessage(l),this._letterbox.setInboxTime(c,this.currentUserId),this._letterbox.setOutboxTime(h,this.currentUserId),this._sendMessageStore.removeByTimestamp(h),this._pullingMsg=!1,d=this._pullQueue.filter((function(e){return e>c})),this._pullQueue.length=0,(f=this._pullQueue).push.apply(f,d),u&&!this._pullOfflineFinished&&(this._pullOfflineFinished=!0,this._watcher.pullFinished()),(!u||d.length>0)&&this._syncMsg(),[2])}}))}))},t.prototype._receiveMsg=function(e){if(this._channel&&!this._pullingMsg)if(this._pullQueue.length>0)this._syncMsg();else{var t=this._channel.codec.decodeByPBName(e.data,wt,{currentUserId:this.currentUserId,connectedTime:this._channel.connectedTime});(t=this._handleMsgProperties(t)).senderUserId===this.currentUserId&&this._sendMessageStore.setMessage(t.messageUId,t.sentTime),t.isStatusMessage||t.senderUserId===this.currentUserId||this._letterbox.setInboxTime(t.sentTime,this.currentUserId),t.messageType!==Re.EXPANSION_NOTIFY?t.messageType===Re.SYNC_READ_STATUS&&t.senderUserId!==this.currentUserId||(this._conversationManager.setConversationCacheByMessage(t,!0),this._watcher.batchMessage([t])):this._receiveMessageExpansion(t)}},t.prototype._handleMsgProperties=function(e,t){void 0===t&&(t=!1);var n,i=e.messageType,r=e.isCounted,s=e.isPersited,o=e.isStatusMessage,a=i in E,u=i in this._customMessageType;if(n=a?O(O({},E[i]),{isStatusMessage:I.includes(i)}):u?this._customMessageType[i]:{isCounted:!se(r)&&r,isPersited:!se(s)&&s,isStatusMessage:!1},Object.assign(e,n),t&&!re(o)&&(e.isStatusMessage=o),!t){var c=e.content.user;if(c){var h=c.portrait,l=c.portraitUri,d=h||l;d&&(c.portrait=c.portraitUri=d)}}return e},t.prototype.getHistoryMessage=function(e,t,n,i,r,s){return void 0===s&&(s=""),w(this,void 0,void 0,(function(){var o,a,u,c,h,l,d,f,p;return b(this,(function(g){switch(g.label){case 0:return a=(o=this).currentUserId,u=o._channel,c=ki[e]||Ai,h=1===i&&0===n,u?(l=u.codec.encodeGetHistoryMsg(t,{timestamp:n,count:h?2:i,order:r,channelId:s}),[4,u.send(new sr(c,l,a),Vt,{currentUserId:a,connectedTime:u.connectedTime,conversation:{targetId:t}})]):[3,2];case 1:return d=g.sent(),(f=d.code)!==Ee.SUCCESS?[2,{code:f}]:(p=d.data,h&&2===p.list.length&&(p.hasMore=!0,0===r?p.list.shift():p.list.pop()),[2,{code:f,data:{list:p.list,hasMore:p.hasMore}}]);case 2:return[2,{code:Ee.RC_NET_CHANNEL_INVALID}]}}))}))},t.prototype.reportSDKInfo=function(e){var t=this.currentUserId,n=this._channel;if(n){pe.info("reportSDKInfo ->",e);var i=n.codec.encodeReportSDKInfo(JSON.stringify(e)),r=new sr(hr[hr.reportsdk],i,t);n.send(r).then((function(e){var t=e.code;t!==Ee.SUCCESS&&pe.warn("reportSDKInfo failed -> code: "+t)}))}},t.prototype.deleteRemoteMessage=function(e,t,n,i){return w(this,void 0,void 0,(function(){var r,s,o,a,u,c,h;return b(this,(function(l){switch(l.label){case 0:return s=(r=this).currentUserId,(o=r._channel)?(a=o.codec.encodeDeleteMessages(e,t,n,i),u=new sr(Ei,a,s),[4,o.send(u)]):[3,2];case 1:return c=l.sent(),h=c.code,Ee.SUCCESS,[2,h];case 2:return[2,Ee.RC_NET_CHANNEL_INVALID]}}))}))},t.prototype.deleteRemoteMessageByTimestamp=function(e,t,n,i){return w(this,void 0,void 0,(function(){var r,s,o,a,u,c,h,l;return b(this,(function(d){switch(d.label){case 0:return s=(r=this).currentUserId,(o=r._channel)?(a=o.codec.encodeClearMessages(t,n,i),u=xi[e],c=new sr(u,a,s),[4,o.send(c)]):[3,2];case 1:return h=d.sent(),l=h.code,Ee.SUCCESS,[2,l];case 2:return[2,Ee.RC_NET_CHANNEL_INVALID]}}))}))},t.prototype.getConversationList=function(e,t,n,i,r){return void 0===e&&(e=300),w(this,void 0,void 0,(function(){var r,s,o,a,u,c,h,l,d=this;return b(this,(function(f){switch(f.label){case 0:return s=(r=this).currentUserId,o=r._channel,t=t||j.PRIVATE,o?(a=o.codec.encodeOldConversationList({count:e,type:t,startTime:n,order:i}),u=new sr(Oi,a,s),[4,o.send(u,xt,{currentUserId:s,connectedTime:o.connectedTime,afterDecode:function(e){var t=e.conversationType,n=e.targetId,i=e.channelId,r=d._conversationManager.get(t,n,i);return Object.assign(e,r),e}})]):[3,2];case 1:return c=f.sent(),h=c.code,l=c.data,h!==Ee.SUCCESS?[2,{code:h}]:[2,{code:h,data:l}];case 2:return[2,{code:Ee.RC_NET_CHANNEL_INVALID}]}}))}))},t.prototype.removeConversation=function(e,t,n){return w(this,void 0,void 0,(function(){var i,r,s,o,a;return b(this,(function(u){switch(u.label){case 0:return(i=this._channel)?(r=i.codec.encodeRemoveOldConversationList({conversationType:e,channelId:n,targetId:t}),s=new sr(wi,r,t),[4,i.send(s)]):[3,2];case 1:return o=u.sent(),pe.info("RemoveConversation =>",o),a=o.code,Ee.SUCCESS,[2,a];case 2:return[2,Ee.RC_NET_CHANNEL_INVALID]}}))}))},t.prototype.getConversation=function(e,t,n){return w(this,void 0,void 0,(function(){var i,r,s,o,a,u;return b(this,(function(c){switch(c.label){case 0:return(i=this._conversationManager.get(e,t,n))?[4,this.getHistoryMessage(e,t,0,1,0)]:[2,{code:Ee.CONVER_GET_ERROR}];case 1:return r=c.sent(),s=r.code,o=r.data,s!==Ee.SUCCESS?[2,{code:Ee.CONVER_GET_ERROR}]:(a=(null==o?void 0:o.list[0])||null,u={conversationType:e,targetId:t,channelId:n,unreadMessageCount:i.unreadMessageCount||0,latestMessage:a,notificationStatus:i.notificationStatus||Ne.CLOSE,isTop:i.isTop||!1,lastUnreadTime:i.lastUnreadTime||0,unreadMentionedCount:i.unreadMentionedCount||0},[2,{code:Ee.SUCCESS,data:u}])}}))}))},t.prototype.getAllConversationUnreadCount=function(e,t,n){var i=this._conversationManager.getAllUnreadCount(e,t,n);return Promise.resolve({code:Ee.SUCCESS,data:i})},t.prototype.getConversationUnreadCount=function(e,t,n){var i=this._conversationManager.getUnreadCount(e,t,n);return Promise.resolve({code:Ee.SUCCESS,data:i})},t.prototype.clearConversationUnreadCount=function(e,t,n){return this._conversationManager.clearUnreadCount(e,t,n,!1),Promise.resolve(Ee.SUCCESS)},t.prototype.clearAllUnreadCount=function(){return this._conversationManager.clearAllUnreadCount(),Promise.resolve(Ee.SUCCESS)},t.prototype.getFirstUnreadMessage=function(e,t){throw new Error("Method not implemented.")},t.prototype.saveConversationMessageDraft=function(e,t,n,i){return this._conversationManager.setDraft(e,t,n,i),Promise.resolve(Ee.SUCCESS)},t.prototype.getConversationMessageDraft=function(e,t,n){var i=this._conversationManager.getDraft(e,t,n);return Promise.resolve({code:Ee.SUCCESS,data:i})},t.prototype.clearConversationMessageDraft=function(e,t,n){return this._conversationManager.clearDraft(e,t,n),Promise.resolve(Ee.SUCCESS)},t.prototype.pullConversationStatus=function(e){return w(this,void 0,void 0,(function(){var t,n,i,r,s,o,a,u;return b(this,(function(c){switch(c.label){case 0:return n=(t=this)._channel,i=t.currentUserId,n?(r=n.codec.encodeGetConversationStatus(e),s=new sr(hr[hr.pullSeAtts],r,i),[4,n.send(s,Un)]):[3,2];case 1:return o=c.sent(),a=o.code,u=o.data,a!==Ee.SUCCESS?[2,{code:a}]:[2,{code:a,data:u}];case 2:return[2,{code:Ee.RC_NET_CHANNEL_INVALID}]}}))}))},t.prototype.batchSetConversationStatus=function(e){return w(this,void 0,void 0,(function(){var t,n,i,r,s,o,a,u,c,h=this;return b(this,(function(l){switch(l.label){case 0:return n=(t=this).currentUserId,(i=t._channel)?(r=i.codec.encodeSetConversationStatus(e),s=new sr(bi,r,n),[4,i.send(s,Vn)]):[3,2];case 1:return o=l.sent(),a=o.code,u=o.data,a===Ee.SUCCESS?(c=u,e.forEach((function(e){h._conversationManager.addStatus(O(O({},e),{updatedTime:c.version}),!0)})),[2,a]):[2,a];case 2:return[2,Ee.RC_NET_CHANNEL_INVALID]}}))}))},t.prototype._joinChrm=function(e,t,n){return w(this,void 0,void 0,(function(){var i,r,s,o,a,u,c;return b(this,(function(h){switch(h.label){case 0:return(i=this._channel)?(r=i.codec.encodeJoinOrQuitChatRoom(),s=new sr(n?Ii:mi,r,e),[4,i.send(s,Qt)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return o=h.sent(),a=o.code,u=o.data,a===Ee.SUCCESS&&(c=u.joinTime,this._chrmsQueue[e]||(this._chrmsQueue[e]={pulling:!1,queue:[],timestamp:0}),this._pullChrmMsg(e,t,c),this._naviInfo.kvStorage&&this._chrmEntryHandler.pullEntry(e,0),this._joinedChrmManager.set(e,t)),[2,a]}}))}))},t.prototype._rejoinChrm=function(){return w(this,void 0,void 0,(function(){var e,t,n,i,r,s;return b(this,(function(o){switch(o.label){case 0:for(n in e=this._joinedChrmManager.get(),t=[],e)t.push(n);i=0,o.label=1;case 1:return i<t.length?(r=t[i],[4,this._joinChrm(r,e[r]||10,!0)]):[3,4];case 2:(s=o.sent())===Ee.SUCCESS?this._watcher.chatroom({rejoinedRoom:{chatroomId:r,count:e[r]}}):this._watcher.chatroom({rejoinedRoom:{chatroomId:r,errorCode:s}}),o.label=3;case 3:return i++,[3,1];case 4:return[2]}}))}))},t.prototype._pullChrmMsg=function(e,t,n){return void 0===t&&(t=10),void 0===n&&(n=0),w(this,void 0,void 0,(function(){var i,r,s,o,a,u,c,h,l,d,f,p;return b(this,(function(g){switch(g.label){case 0:return this._channel?(i=this._chrmsQueue[e],r=i.pulling,s=i.timestamp,r?[2]:(i.pulling=!0,o=this._channel.codec.encodeChrmSyncMsg(s,t),a=new sr(hr[hr.chrmPull],o,e),[4,this._channel.send(a,bt,{connectedTime:this._channel.connectedTime,currentUserId:this.currentUserId})])):[2];case 1:return u=g.sent(),c=u.code,h=u.data,i.pulling=!1,c===Ee.SUCCESS&&h?(l=h.list,d=h.syncTime,f=h.finished,i.timestamp=n?Math.max(d,n):d,i.queue=i.queue.filter((function(e){return e>d})),p=[],l.forEach((function(e){e.sentTime<s||p.push(e)})),this._watcher.batchMessage(p),(!f||i.queue.length>0)&&this._pullChrmMsg(e),[2]):(pe.warn("pull chatroom msg failed, code:",c,", data:",h),[2])}}))}))},t.prototype.joinChatroom=function(e,t){return w(this,void 0,void 0,(function(){return b(this,(function(n){return[2,this._joinChrm(e,t,!1)]}))}))},t.prototype.joinExistChatroom=function(e,t){return w(this,void 0,void 0,(function(){return b(this,(function(n){return[2,this._joinChrm(e,t,!0)]}))}))},t.prototype.quitChatroom=function(e){return w(this,void 0,void 0,(function(){var t,n,i,r,s;return b(this,(function(o){switch(o.label){case 0:return(t=this._channel)?(n=t.codec.encodeJoinOrQuitChatRoom(),i=new sr(Ti,n,e),[4,t.send(i)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return r=o.sent(),(s=r.code)===Ee.SUCCESS&&(delete this._chrmsQueue[e],this._chrmEntryHandler.reset(e),this._joinedChrmManager.remove(e)),[2,s]}}))}))},t.prototype.getChatroomInfo=function(e,t,n){return w(this,void 0,void 0,(function(){var i,r,s,o,a,u;return b(this,(function(c){switch(c.label){case 0:return(i=this._channel)?(r=i.codec.encodeGetChatRoomInfo(t,n),s=new sr(hr[hr.queryChrmI],r,e),[4,i.send(s,Jt)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return o=c.sent(),a=o.code,u=o.data,a!==Ee.SUCCESS?[2,{code:a}]:[2,{code:a,data:u}]}}))}))},t.prototype.getChatroomHistoryMessages=function(e,t,n,i){return w(this,void 0,void 0,(function(){var r,s,o,a,u,c;return b(this,(function(h){switch(h.label){case 0:return(r=this._channel)?(s=r.codec.encodeGetHistoryMsg(e,{timestamp:t,count:n,order:i}),o=new sr(Li,s,e),[4,r.send(o,Vt,{conversation:{targetId:e}})]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return a=h.sent(),u=a.code,c=a.data,u!==Ee.SUCCESS?[2,{code:u}]:[2,{code:u,data:{list:c.list,hasMore:c.hasMore}}]}}))}))},t.prototype._modifyChatroomKV=function(e,t){return w(this,void 0,void 0,(function(){var n,i,r,s,o,a,u,c;return b(this,(function(h){switch(h.label){case 0:return i=(n=this)._channel,r=n.currentUserId,i?(s=i.codec.encodeModifyChatRoomKV(e,t,r),o=t.type===Ue.UPDATE?Ci:Ri,a=new sr(o,s,e),[4,i.send(a)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return u=h.sent(),(c=u.code)===Ee.SUCCESS?(this._chrmEntryHandler.setLocal(e,{kvEntries:[t],syncTime:(new Date).getTime()},r),[2,c]):[2,c]}}))}))},t.prototype._modifyChatroomKVS=function(e,t){return w(this,void 0,void 0,(function(){var n,i,r,s,o,a,u,c,h,l,d,f;return b(this,(function(p){switch(p.label){case 0:return i=(n=this)._channel,r=n.currentUserId,i?(s=i.codec.encodeModifyChatRoomKVS(e,t,r),o=t.type===Ue.UPDATE?Si:Ni,a=new sr(o,s,e),[4,i.send(a,Cn)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return u=p.sent(),c=u.code,-1!==[Ee.SUCCESS,Ee.CHATROOM_KV_STORE_NOT_ALL_SUCCESS].indexOf(c)&&(l=[],delete(d=Object.assign({},t)).entries,t.entries.forEach((function(e){l.push(Object.assign({},e,d))})),c===Ee.CHATROOM_KV_STORE_NOT_ALL_SUCCESS&&(f=u.data,pe.warn("设置失败的属性：",f.errorKeys),h=f.errorKeys,f&&Array.isArray(f.errorKeys)&&f.errorKeys.forEach((function(e){var t=l.findIndex((function(t){return e.key===t.key}));-1!==t&&l.splice(t,1)}))),pe.warn("设置成功的属性：",l),this._chrmEntryHandler.setLocal(e,{kvEntries:l,syncTime:(new Date).getTime()},r)),[2,{code:c,data:h}]}}))}))},t.prototype.setChatroomEntry=function(e,t){return w(this,void 0,void 0,(function(){return b(this,(function(n){return t.type=Ue.UPDATE,t.userId=t.userId||this.currentUserId,[2,this._modifyChatroomKV(e,t)]}))}))},t.prototype.setChatroomEntries=function(e,t){return w(this,void 0,void 0,(function(){return b(this,(function(n){return t.type=Ue.UPDATE,t.userId=t.userId||this.currentUserId,[2,this._modifyChatroomKVS(e,t)]}))}))},t.prototype.forceSetChatroomEntry=function(e,t){return w(this,void 0,void 0,(function(){return b(this,(function(n){return t.type=Ue.UPDATE,t.isOverwrite=!0,t.userId=t.userId||this.currentUserId,[2,this._modifyChatroomKV(e,t)]}))}))},t.prototype.removeChatroomEntry=function(e,t){return w(this,void 0,void 0,(function(){return b(this,(function(n){return t.type=Ue.DELETE,t.userId=t.userId||this.currentUserId,[2,this._modifyChatroomKV(e,t)]}))}))},t.prototype.removeChatroomEntries=function(e,t){return w(this,void 0,void 0,(function(){return b(this,(function(n){return t.type=Ue.DELETE,t.userId=t.userId||this.currentUserId,[2,this._modifyChatroomKVS(e,t)]}))}))},t.prototype.forceRemoveChatroomEntry=function(e,t){return w(this,void 0,void 0,(function(){return b(this,(function(n){return t.type=Ue.DELETE,t.isOverwrite=!0,t.userId=t.userId||this.currentUserId,[2,this._modifyChatroomKV(e,t)]}))}))},t.prototype.getChatroomEntry=function(e,t){return w(this,void 0,void 0,(function(){var n,i,r,s,o,a,u;return b(this,(function(c){switch(c.label){case 0:return(n=this._chrmEntryHandler.getValue(e,t))?[2,Promise.resolve({code:Ee.SUCCESS,data:n})]:[3,1];case 1:return(i=this._channel)?(r=i.codec.encodePullChatRoomKV(0),s=new sr(hr[hr.pullKV],r,e),[4,i.send(s,Tn)]):[2,Promise.reject({code:Ee.RC_NET_CHANNEL_INVALID})];case 2:return o=c.sent(),(a=o.data||{})&&a.kvEntries&&a.kvEntries.length&&void 0!==(u=a.kvEntries.find((function(e){return e.key===t})))?[2,Promise.resolve({code:Ee.SUCCESS,data:null==u?void 0:u.value})]:[2,Promise.resolve({code:Ee.CHATROOM_KEY_NOT_EXIST})]}}))}))},t.prototype.getAllChatroomEntry=function(e){return w(this,void 0,void 0,(function(){var t,n,i,r,s,o,a;return b(this,(function(u){switch(u.label){case 0:return(t=this._chrmEntryHandler.getAll(e))&&Object.keys(t).length?[2,Promise.resolve({code:Ee.SUCCESS,data:t})]:[3,1];case 1:return(n=this._channel)?(i={},r=n.codec.encodePullChatRoomKV(0),s=new sr(hr[hr.pullKV],r,e),[4,n.send(s,Tn)]):[2,Promise.reject({code:Ee.RC_NET_CHANNEL_INVALID})];case 2:return o=u.sent(),(a=o.data||{})&&a.kvEntries&&a.kvEntries.length&&a.kvEntries.forEach((function(e){e.key&&(i[e.key]=e.value||"")})),[2,Promise.resolve({code:Ee.SUCCESS,data:i})]}}))}))},t.prototype.pullChatroomEntry=function(e,t){return w(this,void 0,void 0,(function(){var n,i,r,s,o,a,u,c,h,l;return b(this,(function(d){switch(d.label){case 0:return i=(n=this)._channel,r=n.currentUserId,i?(s=i.codec.encodePullChatRoomKV(t),o=new sr(hr[hr.pullKV],s,e),[4,i.send(o,Tn)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return a=d.sent(),u=a.code,c=a.data,u===Ee.SUCCESS?(pe.info("Pull success ChrmKV, "+JSON.stringify(a)),this._chrmEntryHandler.setLocal(e,c,r),pe.info("Save into cache success!"),h=c.kvEntries,l=[],h.length>0&&(h.forEach((function(t){var n=t.key,i=t.value,r=t.type,s=t.timestamp;l.push({key:n,value:i,type:r,timestamp:s,chatroomId:e})})),this._watcher.chatroom({updatedEntries:l})),[2,{code:u,data:c}]):[2,{code:u}]}}))}))},t.prototype.sendMessage=function(e,t,n){return w(this,void 0,void 0,(function(){var i,r,s,o,a,u,c,h,l,d;return b(this,(function(f){switch(f.label){case 0:return this._channel?(n=function(e,t){return"RC:SRSMsg"===e.messageType&&Object.assign(e,{directionalUserIdList:[t]}),e}(n,this.currentUserId),n=this._handleMsgProperties(n,!0),i=!![j.PRIVATE,j.GROUP].includes(e)&&n.isStatusMessage,r=i?function(e){var t;return(t={},t[j.PRIVATE]=hr.ppMsgS,t[j.GROUP]=hr.pgMsgS,t)[e]}(e):function(e){var t;return(t={},t[j.PRIVATE]=hr.ppMsgP,t[j.GROUP]=hr.pgMsgP,t[j.CHATROOM]=hr.chatMsg,t[j.CUSTOMER_SERVICE]=hr.pcMsgP,t[j.RTC_ROOM]=hr.prMsgS,t)[e]}(e)||hr.ppMsgP,i&&(n.isPersited=!1,n.isCounted=!1),s=this._channel.codec.encodeUpMsg({conversationType:e,targetId:t},n),(o=new nr(hr[r],s,t)).setHeaderQos(Qe.AT_LEAST_ONCE),i?(this._channel.sendOnly(o),[2,{code:Ee.SUCCESS,data:jr(e,t,O({},n),"",0,this.currentUserId)}]):(a=Date.now()-this._localConnectedTime+this._connectedTime,u=jr(e,t,O({},n),"",a,this.currentUserId),[4,this._channel.send(o)])):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return c=f.sent(),h=c.code,l=c.data,h!==Ee.SUCCESS?[2,{code:h,data:u}]:(d=l,this._sendMessageStore.setMessage(d.messageUId,d.timestamp),u.sentTime=d.timestamp,u.messageUId=d.messageUId,this._conversationManager.setConversationCacheByMessage(u,!0),[2,{code:Ee.SUCCESS,data:u}])}}))}))},t.prototype.recallMsg=function(e,t,n,i,r){var s;return w(this,void 0,void 0,(function(){var o,a,u,c,h,l,d,f,p,g;return b(this,(function(_){switch(_.label){case 0:return this._channel?(o=r.user,a={content:{conversationType:e,targetId:t,messageUId:n,sentTime:i,user:o},messageType:"RC:RcCmd",disableNotification:null==r?void 0:r.disableNotification,pushConfig:null==r?void 0:r.pushConfig,pushContent:(null===(s=r.pushConfig)||void 0===s?void 0:s.pushContent)||r.pushContent||"",channelId:r.channelId},u=hr[hr.recallMsg],c=this._channel.codec.encodeUpMsg({conversationType:e,targetId:t},a),(h=new nr(u,c,this.currentUserId)).setHeaderQos(Qe.AT_LEAST_ONCE),[4,this._channel.send(h)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return l=_.sent(),d=l.code,f=l.data,d!==Ee.SUCCESS?[2,{code:d}]:(p=f,this._sendMessageStore.setMessage(p.messageUId,p.timestamp),g=jr(e,t,O(O({},a),{isPersited:!0}),p.messageUId,p.timestamp,this.currentUserId),this._conversationManager.setConversationCacheByMessage(g,!0),[2,{code:Ee.SUCCESS,data:g}])}}))}))},t.prototype.sendReadReceiptMessage=function(e,t,n){return w(this,void 0,void 0,(function(){var i,r;return b(this,(function(s){switch(s.label){case 0:return this._channel?(i=this._channel.codec.encodeReadReceipt(t,n),r=new sr(hr[hr.rrMsg],i,e),[4,this._channel.send(r)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return[2,s.sent()]}}))}))},t.prototype.getMessageReader=function(e,t,n){return w(this,void 0,void 0,(function(){var i,r;return b(this,(function(s){switch(s.label){case 0:return this._channel?(i=this._channel.codec.encodeMessageReader(t,n),r=new sr(hr[hr.rrList],i,e),[4,this._channel.send(r,Bn)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return[2,s.sent()]}}))}))},t.prototype.pullUserSettings=function(e){return w(this,void 0,void 0,(function(){var t,n;return b(this,(function(i){return this._channel?(t=this._channel.codec.encodePullUserSetting(e),n=new sr(hr[hr.pullUS],t,this.currentUserId),[2,this._channel.send(n,bn)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}]}))}))},t.prototype.getFileToken=function(e,t,n,i){return w(this,void 0,void 0,(function(){var r,s,o,a,u,c;return b(this,(function(h){switch(h.label){case 0:return this._channel?(r=i&&"uploads"!==i?t||"":it(e,t),s=this._channel.codec.encodeGetFileToken(e,r,n||"",i||""),o=new sr(hr[hr.qnTkn],s,this.currentUserId),[4,this._channel.send(o,pn)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return a=h.sent(),u=a.code,c=a.data,c=Object.assign(c,{fileName:r}),u===Ee.SUCCESS?[2,{code:u,data:c}]:[2,{code:u}]}}))}))},t.prototype.getFileUrl=function(e,t,n,i){return w(this,void 0,void 0,(function(){var r,s,o,a,u,c,h,l,d;return b(this,(function(f){switch(f.label){case 0:return this._channel?(r="",s="",o="",t===Me.QINIU?(s=gn,o=yn):(s=_n,o=vn),r=t===Me.QINIU?hr[hr.qnUrl]:t===Me.AWS?hr[hr.s3Url]:t===Me.STC?hr[hr.stcUrl]:hr[hr.aliUrl],a=this._channel.codec.encodeGetFileUrl(s,e,n,i),u=new sr(r,a,this.currentUserId),[4,this._channel.send(u,o)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return c=f.sent(),h=c.code,l=c.data,d=l,h===Ee.SUCCESS?[2,{code:h,data:d}]:[2,{code:h}]}}))}))},t.prototype.disconnect=function(){-1!==this._reconnectTimer&&(clearTimeout(this._reconnectTimer),this._reconnectTimer=-1),this._channel&&(this._channel.close(),this._channel=void 0),this._pullQueue.length=0,this._stopSyncInterval()},t.prototype.destroy=function(){throw new Error("JSEngine\'s method not implemented.")},t.prototype.registerMessageType=function(e,t,n,i,r){this._customMessageType[e]={isPersited:t,isCounted:n,isStatusMessage:r}},t.prototype.getServerTime=function(){return Date.now()-this._localConnectedTime+this._connectedTime},t.prototype.getCurrentUserId=function(){return this.currentUserId},t.prototype.createTag=function(e){return w(this,void 0,void 0,(function(){var t,n,i,r,s,o,a;return b(this,(function(u){switch(u.label){case 0:return this._channel?(t=this._userSettingManager.getVersion(),n=this._channel.codec.encodeCreateTag([e],t),i=new sr(hr[hr.addSeTag],n,this.currentUserId),[4,this._channel.send(i,On)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return r=u.sent(),s=r.code,o=r.data,s!==Ee.SUCCESS?[2,{code:s}]:(a=o.version,this._userSettingManager.addTag([O(O({},e),{createdTime:a})],a),[2,{code:Ee.SUCCESS,data:o}])}}))}))},t.prototype.removeTag=function(e){return w(this,void 0,void 0,(function(){var t,n,i,r,s,o,a;return b(this,(function(u){switch(u.label){case 0:return this._channel?(t=this._userSettingManager.getVersion(),n=this._channel.codec.encodeRemoveTag([e],t),i=new sr(hr[hr.delSeTag],n,this.currentUserId),[4,this._channel.send(i,On)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return r=u.sent(),s=r.code,o=r.data,s!==Ee.SUCCESS?[2,{code:s}]:(a=o.version,this._userSettingManager.deleteTag([e],a),[2,{code:Ee.SUCCESS}])}}))}))},t.prototype.updateTag=function(e){return w(this,void 0,void 0,(function(){var t,n,i,r,s,o,a;return b(this,(function(u){switch(u.label){case 0:return this._channel?(t=this._userSettingManager.getVersion(),n=this._channel.codec.encodeCreateTag([e],t),i=new sr(hr[hr.addSeTag],n,this.currentUserId),[4,this._channel.send(i,On)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return r=u.sent(),s=r.code,o=r.data,s!==Ee.SUCCESS?[2,{code:s}]:(a=o.version,this._userSettingManager.addTag([e],a),[2,{code:Ee.SUCCESS,data:o}])}}))}))},t.prototype.getTagList=function(){return w(this,void 0,void 0,(function(){var e,t;return b(this,(function(n){return e=this._userSettingManager.getTags(),t=this._conversationManager.getConversationListForTag(),e.forEach((function(e){e.conversationCount=t[e.tagId]?t[e.tagId].length:0})),[2,{code:Ee.SUCCESS,data:e}]}))}))},t.prototype.addTagForConversations=function(e,t){return w(this,void 0,void 0,(function(){var n,i,r,s,o=this;return b(this,(function(a){switch(a.label){case 0:return this._channel?this._userSettingManager.getTagById(e)?(n=this._channel.codec.encodeUpdateConversationTag([{tagId:e}],t),i=new sr(hr[hr.addTag],n,this.currentUserId),[4,this._channel.send(i)]):[2,{code:Ee.TAG_NOT_EXIST}]:[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return(r=a.sent().code)!==Ee.SUCCESS?[2,{code:r}]:((s={})[e]={},t.forEach((function(e){o._conversationManager.addTagStatus(e.conversationType,e.targetId,s,e.channelId)})),[2,{code:Ee.SUCCESS}])}}))}))},t.prototype.removeTagForConversations=function(e,t){return w(this,void 0,void 0,(function(){var n,i,r,s=this;return b(this,(function(o){switch(o.label){case 0:return this._channel?(n=this._channel.codec.encodeUpdateConversationTag([{tagId:e}],t),i=new sr(hr[hr.delTag],n,this.currentUserId),[4,this._channel.send(i)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return(r=o.sent().code)!==Ee.SUCCESS?[2,{code:r}]:(t.forEach((function(t){s._conversationManager.deleteTagStatus(t.conversationType,t.targetId,[e],t.channelId)})),[2,{code:Ee.SUCCESS}])}}))}))},t.prototype.removeTagsForConversation=function(e,t){return w(this,void 0,void 0,(function(){var n,i,r,s,o,a,u;return b(this,(function(c){switch(c.label){case 0:return this._channel?(n=e.conversationType,i=e.targetId,r=e.channelId,s=t.map((function(e){return{tagId:e}})),o=this._channel.codec.encodeUpdateConversationTag(s,[e]),a=new sr(hr[hr.delTag],o,this.currentUserId),[4,this._channel.send(a)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return(u=c.sent().code)!==Ee.SUCCESS?[2,{code:u}]:(this._conversationManager.deleteTagStatus(n,i,t,r),[2,{code:Ee.SUCCESS}])}}))}))},t.prototype.getConversationListByTag=function(e,t,n){return w(this,void 0,void 0,(function(){var i,r,s,o,a,u,c,h,l;return b(this,(function(d){switch(d.label){case 0:return r=(i=this).currentUserId,(s=i._channel)?(o=s.codec.encodeOldConversationList({count:n,type:j.PRIVATE,startTime:t}),a=new sr(Oi,o,r),[4,s.send(a,xt,{currentUserId:r,connectedTime:s.connectedTime})]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return u=d.sent(),c=u.code,h=u.data,l=this._conversationHasTagFilter(e,h),pe.info("GetConversationListByTag",l),c!==Ee.SUCCESS?[2,{code:c}]:[2,{code:c,data:l}]}}))}))},t.prototype._conversationHasTagFilter=function(e,t){var n=this,i=[],r=[];function s(e,t){return e.latestMessage&&t.latestMessage?e.latestMessage.sentTime-t.latestMessage.sentTime:0}return t.forEach((function(t){var s=t.conversationType,o=t.targetId,a=t.channelId,u=n._conversationManager.get(s,o,a),c=u.hasMentioned,h=u.mentionedInfo,l=u.lastUnreadTime,d=u.notificationStatus,f=u.isTop,p=u.tags,g=u.unreadMessageCount,_=p&&p[e];if(_){var y=O(O({},t),{hasMentioned:c,mentionedInfo:h,lastUnreadTime:l,notificationStatus:d,isTop:f,unreadMessageCount:g});_.isTop?i.push(O(O({},y),{isTopInTag:!0})):r.push(O(O({},y),{isTopInTag:!1}))}})),M(M([],i.sort(s)),r.sort(s))},t.prototype.getUnreadCountByTag=function(e,t){return w(this,void 0,void 0,(function(){var n;return b(this,(function(i){return this._channel?(n=this._conversationManager.getUnreadCountByTag(e,t),[2,{code:Ee.SUCCESS,data:n}]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}]}))}))},t.prototype.setConversationStatusInTag=function(e,t,n){return w(this,void 0,void 0,(function(){var i,r,s,o,a,u,c,h,l,d;return b(this,(function(f){switch(f.label){case 0:return this._channel?(i=t.targetId,r=t.conversationType,s=t.channelId,o=n.isTop,a=[{tagId:e,isTop:o}],(u=this._conversationManager.get(r,i,s)).tags&&Object.hasOwnProperty.call(u.tags,e)?(c=this._channel.codec.encodeUpdateConversationTag(a,[t]),h=new sr(hr[hr.addTag],c,this.currentUserId),[4,this._channel.send(h)]):[2,{code:Ee.NO_TAG_IN_CONVER}]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return(l=f.sent().code)!==Ee.SUCCESS?[2,{code:l}]:((d={})[e]={},o&&(d[e].isTop=!0),this._conversationManager.addTagStatus(r,i,d,s),[2,{code:Ee.SUCCESS}])}}))}))},t.prototype.getTagsForConversation=function(e){var t;return w(this,void 0,void 0,(function(){var n,i,r,s;return b(this,(function(o){if(!this._channel)return[2,{code:Ee.RC_NET_CHANNEL_INVALID}];if(n=this._conversationManager.get(e.conversationType,e.targetId,e.channelId),i=this._userSettingManager.getTagsInfo(),r=[],n.tags)for(s in n.tags)r.push({tagId:s,tagName:null===(t=i[s])||void 0===t?void 0:t.tagName});return[2,{code:Ee.SUCCESS,data:r}]}))}))},t.prototype.getBlockConversationList=function(){var e=this._conversationManager.getBlockConversationList();return Promise.resolve({code:Ee.SUCCESS,data:e})},t.prototype.getTopConversationList=function(){var e=this._conversationManager.getTopConversationList();return Promise.resolve({code:Ee.SUCCESS,data:e})},t.prototype.getUnreadMentionedCount=function(e){var t=this._conversationManager.getUnreadMentionedCount(e.channelId,e.conversationType,e.targetId);return Promise.resolve({code:Ee.SUCCESS,data:t})},t.prototype.getAllUnreadMentionedCount=function(){var e=this._conversationManager.getAllUnreadMentionedCount();return Promise.resolve({code:Ee.SUCCESS,data:e})},t.prototype.getAllConversationState=function(){return Promise.resolve({code:Ee.SUCCESS,data:this._conversationManager.getAllConversationState()})},t.prototype.joinRTCRoom=function(e,t,n,i,r,s){return w(this,void 0,void 0,(function(){var o,a;return b(this,(function(u){return this._channel?(o=this._channel.codec.encodeJoinRTCRoom(t,n,i,r,s),a=new sr(hr[hr.rtcRJoin_data],o,e),[2,this._channel.send(a,Zt)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}]}))}))},t.prototype.quitRTCRoom=function(e){return w(this,void 0,void 0,(function(){var t,n;return b(this,(function(i){switch(i.label){case 0:return this._channel?(t=this._channel.codec.encodeQuitRTCRoom(),n=new sr(hr[hr.rtcRExit],t,e),[4,this._channel.send(n)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return[2,i.sent().code]}}))}))},t.prototype.rtcPing=function(e,t,n){return w(this,void 0,void 0,(function(){var i,r;return b(this,(function(s){switch(s.label){case 0:return this._channel?(i=this._channel.codec.encodeJoinRTCRoom(t,n),r=new sr(hr[hr.rtcPing],i,e),[4,this._channel.send(r)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return[2,s.sent().code]}}))}))},t.prototype.getRTCRoomInfo=function(e){return w(this,void 0,void 0,(function(){var t,n;return b(this,(function(i){return this._channel?(t=this._channel.codec.encodeGetRTCRoomInfo(),n=new sr(hr[hr.rtcRInfo],t,e),[2,this._channel.send(n,hn)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}]}))}))},t.prototype.getRTCUserInfoList=function(e){return w(this,void 0,void 0,(function(){var t,n,i,r,s;return b(this,(function(o){switch(o.label){case 0:return this._channel?(t=this._channel.codec.encodeGetRTCRoomInfo(),n=new sr(hr[hr.rtcUData],t,e),[4,this._channel.send(n,Zt)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return i=o.sent(),r=i.code,s=i.data,[2,{code:r,data:s?{users:s.users}:s}]}}))}))},t.prototype.setRTCUserInfo=function(e,t,n){return w(this,void 0,void 0,(function(){var i,r;return b(this,(function(s){switch(s.label){case 0:return this._channel?(i=this._channel.codec.encodeSetRTCUserInfo(t,n),r=new sr(hr[hr.rtcUPut],i,e),[4,this._channel.send(r)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return[2,s.sent().code]}}))}))},t.prototype.removeRTCUserInfo=function(e,t){return w(this,void 0,void 0,(function(){var n,i;return b(this,(function(r){switch(r.label){case 0:return this._channel?(n=this._channel.codec.encodeRemoveRTCUserInfo(t),i=new nr(hr[hr.rtcUDel],n,e),[4,this._channel.send(i)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return[2,r.sent().code]}}))}))},t.prototype.setRTCData=function(e,t,n,i,r,s){return w(this,void 0,void 0,(function(){var o,a;return b(this,(function(u){switch(u.label){case 0:return this._channel?(o=this._channel.codec.encodeSetRTCData(t,n,i,r,s),a=new nr(hr[hr.rtcSetData],o,e),[4,this._channel.send(a)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return[2,u.sent().code]}}))}))},t.prototype.setRTCTotalRes=function(e,t,n,i,r){return w(this,void 0,void 0,(function(){var s,o;return b(this,(function(a){switch(a.label){case 0:return this._channel?(s=this._channel.codec.encodeUserSetRTCData(t,n,i,r),o=new sr(hr[hr.userSetData],s,e),[4,this._channel.send(o)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return[2,a.sent().code]}}))}))},t.prototype.setRTCCDNUris=function(e,t,n){return w(this,void 0,void 0,(function(){var i,r;return b(this,(function(s){switch(s.label){case 0:return this._channel?(i=this._channel.codec.encodeUserSetRTCCDNUris(t,n),r=new sr(hr[hr.userSetData],i,e),[4,this._channel.send(r)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return[2,s.sent().code]}}))}))},t.prototype.getRTCData=function(e,t,n,i){if(!this._channel)return Promise.resolve({code:Ee.RC_NET_CHANNEL_INVALID});var r=this._channel.codec.encodeGetRTCData(t,n,i),s=new sr(hr[hr.rtcQryData],r,e);return this._channel.send(s,on)},t.prototype.removeRTCData=function(e,t,n,i,r){return w(this,void 0,void 0,(function(){var s,o;return b(this,(function(a){switch(a.label){case 0:return this._channel?(s=this._channel.codec.encodeRemoveRTCData(t,n,i,r),o=new nr(hr[hr.rtcDelData],s,e),[4,this._channel.send(o)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return[2,a.sent().code]}}))}))},t.prototype.setRTCOutData=function(e,t,n,i){throw new Error("JSEngine\'s method not implemented.")},t.prototype.getRTCOutData=function(e,t){throw new Error("JSEngine\'s method not implemented.")},t.prototype.getRTCToken=function(e,t,n){return w(this,void 0,void 0,(function(){var i,r;return b(this,(function(s){return this._channel?(i=this._channel.codec.encodeJoinRTCRoom(t,n),r=new sr(hr[hr.rtcToken],i,e),[2,this._channel.send(r,sn)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}]}))}))},t.prototype.setRTCState=function(e,t){return w(this,void 0,void 0,(function(){var n,i;return b(this,(function(r){switch(r.label){case 0:return this._channel?(n=this._channel.codec.encodeSetRTCState(t),i=new sr(hr[hr.rtcUserState],n,e),[4,this._channel.send(i)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return[2,r.sent().code]}}))}))},t.prototype.getRTCUserInfo=function(e){return w(this,void 0,void 0,(function(){return b(this,(function(e){throw new Error("Method not implemented.")}))}))},t.prototype.getRTCUserList=function(e){if(!this._channel)return Promise.resolve({code:Ee.RC_NET_CHANNEL_INVALID});var t=this._channel.codec.encodeGetRTCRoomInfo(),n=new sr(hr[hr.rtcUList],t,e);return this._channel.send(n,Zt)},t.prototype.joinLivingRoomAsAudience=function(e,t,n){return void 0===t&&(t=De.LIVE),w(this,void 0,void 0,(function(){var i,r,s,o,a,u,c,h;return b(this,(function(l){switch(l.label){case 0:return this._channel?(i=this._channel.codec.encodeJoinRTCRoom(t,n),r=new sr(hr[hr.viewerJoinR],i,e),[4,this._channel.send(r,Xn)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return s=l.sent(),o=s.code,a=s.data,o!==Ee.SUCCESS?[2,{code:o}]:(c=(u=a).rtcToken,h=u.entries,[2,{code:o,data:{token:c,kvEntries:h}}])}}))}))},t.prototype.quitLivingRoomAsAudience=function(e){return w(this,void 0,void 0,(function(){var t,n,i;return b(this,(function(r){switch(r.label){case 0:return this._channel?(t=this._channel.codec.encodeQuitRTCRoom(),n=new sr(hr[hr.viewerExitR],t,e),[4,this._channel.send(n)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return i=r.sent().code,this._rtcKVManager.reset(),[2,i]}}))}))},t.prototype.rtcIdentityChange=function(e,t,n){return w(this,void 0,void 0,(function(){var i,r,s,o,a;return b(this,(function(u){switch(u.label){case 0:return this._channel?(i=this._channel.codec.encodeIdentityChangeInfo(t,n),r=new sr(hr[hr.rtcIdentityChange],i,e),[4,this._channel.send(r,Zt)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return s=u.sent(),o=s.code,a=s.data,o!==Ee.SUCCESS?[2,{code:o}]:[2,{code:o,data:a}]}}))}))},t.prototype.pullRTCRoomEntry=function(e,t){return w(this,void 0,void 0,(function(){var t,n,i,r,s,o,a,u,c;return b(this,(function(h){switch(h.label){case 0:return n=(t=this)._channel,i=t.currentUserId,n?(pe.info("audience in room start pull KV"),r=n.codec.encodePullRTCRoomKV(e,0),s=new sr(hr[hr.rtcPullKv],r,i),[4,n.send(s,Jn)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return o=h.sent(),a=o.code,u=o.data,pe.info("audience in room end pull KV, code: "+a+", data: "+JSON.stringify(u||{})),a===Ee.SUCCESS?(c=u.kvEntries,this._watcher.onRTCDataChange(c,e),[2,{code:a,data:u}]):[2,{code:a}]}}))}))},t.prototype.getRTCJoinedUserInfo=function(e){return w(this,void 0,void 0,(function(){var t,n,i,r,s,o,a,u;return b(this,(function(c){switch(c.label){case 0:return n=(t=this)._channel,i=t.currentUserId,n?(r=n.codec.encodeQueryUserJoinedInfo(e),s=new sr(hr[hr.rtcQueryJoined],r,i),[4,n.send(s,Zn)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return o=c.sent(),a=o.code,u=o.data,a===Ee.SUCCESS?[2,{code:a,data:u}]:[2,{code:a}]}}))}))},t.prototype.getDeviceId=function(){return Hr(this.runtime)},t.prototype.requestRoomPK=function(e){return w(this,void 0,void 0,(function(){var t,n,i;return b(this,(function(r){switch(r.label){case 0:return this._channel?(t=this._channel.codec.encodeRequestRoomPK(e),n=new sr(hr[hr.rtcInvite],t,e.roomId),[4,this._channel.send(n)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return i=r.sent().code,this._rtcKVManager.reset(),[2,i]}}))}))},t.prototype.cancelRoomPK=function(e){return w(this,void 0,void 0,(function(){var t,n,i;return b(this,(function(r){switch(r.label){case 0:return this._channel?(t=this._channel.codec.encodeCancelRoomPK(e),n=new sr(hr[hr.rtcCancelInvite],t,e.roomId),[4,this._channel.send(n)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return i=r.sent().code,this._rtcKVManager.reset(),[2,i]}}))}))},t.prototype.responseRoomPK=function(e){return w(this,void 0,void 0,(function(){var t,n,i;return b(this,(function(r){switch(r.label){case 0:return this._channel?(t=this._channel.codec.encodeResponseRoomPK(e),n=new sr(hr[hr.rtcInviteAnswer],t,e.roomId),[4,this._channel.send(n)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return i=r.sent().code,this._rtcKVManager.reset(),[2,i]}}))}))},t.prototype.endRoomPK=function(e){return w(this,void 0,void 0,(function(){var t,n,i;return b(this,(function(r){switch(r.label){case 0:return this._channel?(t=this._channel.codec.encodeEndRoomPK(e),n=new sr(hr[hr.rtcEndInvite],t,e.roomId),[4,this._channel.send(n)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return i=r.sent().code,this._rtcKVManager.reset(),[2,i]}}))}))},t.prototype.callExtra=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return Promise.resolve({code:Ee.EXTRA_METHOD_UNDEFINED})},t.prototype.getConversationListWithAllChannel=function(){throw new Error("Method not implemented.")},t.prototype.getConversationListWithAllChannelByPage=function(e,t){throw new Error("Method not implemented.")},t.prototype.clearConversations=function(){throw new Error("Method not implemented.")},t.prototype.setUserStatusListener=function(e,t){throw new Error("Method not implemented.")},t.prototype.setUserStatus=function(e){throw new Error("Method not implemented.")},t.prototype.subscribeUserStatus=function(e){throw new Error("Method not implemented.")},t.prototype.getUserStatus=function(e){throw new Error("Method not implemented.")},t.prototype.addToBlacklist=function(e){throw new Error("Method not implemented.")},t.prototype.removeFromBlacklist=function(e){throw new Error("Method not implemented.")},t.prototype.getBlacklist=function(){throw new Error("Method not implemented.")},t.prototype.getBlacklistStatus=function(e){throw new Error("Method not implemented.")},t.prototype.insertMessage=function(e,t,n){throw new Error("Method not implemented.")},t.prototype.deleteMessages=function(e){throw new Error("Method not implemented.")},t.prototype.deleteMessagesByTimestamp=function(e,t,n,i,r){throw new Error("Method not implemented.")},t.prototype.clearMessages=function(e,t,n){throw new Error("Method not implemented.")},t.prototype.getMessage=function(e){throw new Error("Method not implemented.")},t.prototype.setMessageContent=function(e,t,n){throw new Error("Method not implemented.")},t.prototype.setMessageSearchField=function(e,t,n){throw new Error("Method not implemented.")},t.prototype.searchConversationByContent=function(e,t,n,i){throw new Error("Method not implemented.")},t.prototype.searchMessageByContent=function(e,t,n,i,r,s){throw new Error("Method not implemented.")},t.prototype.getUnreadMentionedMessages=function(e,t){throw new Error("Method not implemented.")},t.prototype.setMessageSentStatus=function(e,t){throw new Error("Method not implemented.")},t.prototype.setMessageReceivedStatus=function(e,t){throw new Error("Method not implemented.")},t.prototype.clearUnreadCountByTimestamp=function(e,t,n,i){throw new Error("Method not implemented.")},t.prototype.getConversationNotificationStatus=function(e,t,n){var i=this._conversationManager.get(e,t,n);return i?Promise.resolve({code:Ee.SUCCESS,data:i.notificationStatus}):Promise.resolve({code:Ee.CONVER_GET_ERROR})},t.prototype.getRemoteHistoryMessages=function(e,t,n,i,r,s){return this.getHistoryMessage(e,t,n,i,r,s)},t}(vr),Wr=function(){function e(e){this._context=e}return e.prototype.__getContext=function(){return this._context},e.prototype.getNaviInfo=function(){return this._context.getInfoFromCache()},e.prototype.getCoreVersion=function(){return this._context.coreVersion},e.prototype.getAPIVersion=function(){return this._context.apiVersion},e.prototype.getAppkey=function(){return this._context.appkey},e.prototype.getCurrentId=function(){return this._context.getCurrentUserId()},e.prototype.getConnectionStatus=function(){return this._context.getConnectionStatus()},e.prototype.getDeviceId=function(){return this._context.getDeviceId()},e.prototype.sendMessage=function(e,t,n){return this._context.sendMessage(e,t,n)},e.prototype.registerMessageType=function(e,t,n,i){void 0===i&&(i=[]),this._context.registerMessageType(e,t,n,i)},e.prototype.getServerTime=function(){return this._context.getServerTime()},e.prototype.getRTCJoinedUserInfo=function(e){return this._context.getRTCJoinedUserInfo(e)},e}(),Jr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return N(t,e),t.prototype.getNaviInfo=function(){return this._context.getInfoFromCache()},t.prototype.joinRTCRoom=function(e,t,n,i,r,s){return this._context.joinRTCRoom(e,t,n,i,r,s)},t.prototype.quitRTCRoom=function(e){return this._context.quitRTCRoom(e)},t.prototype.rtcPing=function(e,t,n){return this._context.rtcPing(e,t,n)},t.prototype.getRTCRoomInfo=function(e){return this._context.getRTCRoomInfo(e)},t.prototype.getRTCUserInfoList=function(e){return this._context.getRTCUserInfoList(e)},t.prototype.getRTCUserInfo=function(e){return this._context.getRTCUserInfo(e)},t.prototype.setRTCUserInfo=function(e,t,n){return this._context.setRTCUserInfo(e,t,n)},t.prototype.removeRTCUserInfo=function(e,t){return this._context.removeRTCUserInfo(e,t)},t.prototype.setRTCData=function(e,t,n,i,r,s){return this._context.setRTCData(e,t,n,i,r,s)},t.prototype.setRTCTotalRes=function(e,t,n,i,r){return this._context.setRTCTotalRes(e,t,n,i,r)},t.prototype.setRTCCDNUris=function(e,t,n){return this._context.setRTCCDNUris(e,t,n)},t.prototype.getRTCData=function(e,t,n,i){return this._context.getRTCData(e,t,n,i)},t.prototype.removeRTCData=function(e,t,n,i,r){return this._context.removeRTCData(e,t,n,i,r)},t.prototype.setRTCOutData=function(e,t,n,i){return this._context.setRTCOutData(e,t,n,i)},t.prototype.getRTCOutData=function(e,t){return this._context.getRTCOutData(e,t)},t.prototype.getRTCToken=function(e,t,n){return this._context.getRTCToken(e,t,n)},t.prototype.setRTCState=function(e,t){return this._context.setRTCState(e,t)},t.prototype.getRTCUserList=function(e){return this._context.getRTCUserList(e)},t.prototype.joinLivingRoomAsAudience=function(e,t,n){return this._context.joinLivingRoomAsAudience(e,t,n)},t.prototype.quitLivingRoomAsAudience=function(e){return this._context.quitLivingRoomAsAudience(e)},t.prototype.rtcIdentityChange=function(e,t,n){return this._context.rtcIdentityChange(e,t,n)},t.prototype.requestRoomPK=function(e){return this._context.requestRoomPK(e)},t.prototype.cancelRoomPK=function(e){return this._context.cancelRoomPK(e)},t.prototype.responseRoomPK=function(e){return this._context.responseRoomPK(e)},t.prototype.endRoomPK=function(e){return this._context.endRoomPK(e)},t}(Wr),zr=function(){function e(){}return e.compress=function(e){for(var t=this,n={},i=0;i<e.length-1;i++){var r=e.charAt(i)+e.charAt(i+1);n.hasOwnProperty(r)?n[r].push(i):n[r]=[i]}for(var s=[],o=[],a=function(){if(o.length>0){var e=o.join("");if(o=[],e.length>26){var n=t.numberEncode(e.length),i=String.fromCharCode(t.dataType.NormalExt|n.length);s.push(i+n)}else{var r=String.fromCharCode(t.dataType.Normal|e.length);s.push(r)}s.push(e)}},u=0;u<e.length;){var c=t.indexOf(n,e,u);if(c.length<2)o.push(e.charAt(u++));else if(c.length<4)o.push(e.substr(u,c.length)),u+=c.length;else{var h=t.numberEncode(u-c.offset),l=t.numberEncode(c.length);if(h.length+l.length>=c.length)o.push(e.substr(u,c.length)),u+=c.length;else{a();var d=String.fromCharCode(t.dataType.Compressed|h.length<<2|l.length);s.push(d+h+l),u+=c.length}}}a();var f=t.numberEncode(e.length),p=String.fromCharCode(t.dataType.Tail|f.length);return s.push(p+f),s.join("")},e.uncompress=function(e){var t=this,n=0,i="";e:do{var r=e.charCodeAt(n++),s=r&t.dataType.Mark,o=15&r,a=void 0;switch(s){case t.dataType.Compressed:var u=o>>2,c=3&o;if(0===u||0===c)throw new Error("Data parsing error,at "+n);var h=t.numberDecode(e.substr(n,u)),l=t.numberDecode(e.substr(n+=u,c));if((h=i.length-h)+l>i.length)throw new Error("Data parsing error,at "+n);n+=c,i+=i.substr(h,l);break;case t.dataType.Tail:if((a=t.numberDecode(e.substr(n,o)))!==i.length)throw console.log(i.length),console.log(a),new Error("Data parsing error,at "+n);n+=o;break e;case t.dataType.NormalExt:a=t.numberDecode(e.substr(n,o)),i+=e.substr(n+=o,a),n+=a;break;case t.dataType.Normal:i+=e.substr(n,o),n+=o;break;case t.dataType.Mark:if(o>10)throw new Error("Data parsing error,at "+n);i+=e.substr(n,16+o),n+=16+o;break;default:throw new Error("Data parsing error,at "+n+" header:"+s)}}while(n<e.length);return i},e.indexOf=function(e,t,n){var i={length:0,offset:-1};if(t.length,n>=t.length-1)return i;var r=e[t.charAt(n)+t.charAt(n+1)];if(r[0]===n)return i;for(var s=t.length-n,o=0,a=r.length;o<a;o++){var u=r[o],c=n-u;if(!(c>this.max)){var h=Math.min(s,c);if(h<=i.length)break;if(!(i.length>2&&t.charAt(u+i.length-1)!==t.charAt(n+i.length-1))){for(var l=2,d=l;d<h&&t.charAt(u+d)===t.charAt(n+d);d++)l++;l>=i.length&&(i.length=l,i.offset=u)}}}return i},e.numberEncode=function(e){var t=this,n=[],i=0;do{i=e%t.scale,n.push(t.chars.charAt(i)),e=(e-i)/t.scale}while(e>0);return n.join("")},e.numberDecode=function(e){for(var t=0,n=0,i=e.length-1;i>=0;i--){if(-1===(n=this.chars.indexOf(e.charAt(i))))throw new Error(\'decode number error, data is "\'+e+\'"\');t=t*this.scale+n}return t},e.dataType={Tail:48,Compressed:64,NormalExt:80,Normal:96,Mark:112},e.chars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",e.scale=e.chars.length,e.max=238327,e}(),Zr=1,Xr=!1,$r="undefined"!=typeof location&&"https://"===location.protocol?"https://":"http://",es=function(){function e(e){this.info=e,this.logUrl="logcollection.ronghub.com",this.level=1,this.itv=30,this.times=5,this.deviceId="",this.deviceInfo="",this.logSwitch=0,this.logUrl=e.logPolicy.url||this.logUrl,this.level=e.logPolicy.level||this.level,this.itv=e.logPolicy.itv||this.itv,this.times=e.logPolicy.times||this.times,this.deviceId=Hr(e.runtime),this.logSwitch=e.logSwitch;var t=_t(e.runtime);this.deviceInfo=t.type+"|"+t.version+"|"+fe.sessionId,this.startReport()}return e.init=function(t){return Xr=!0,e._instance||(e._instance=new e(t)),e._instance},e.getInstance=function(){return e._instance},e.prototype.startReport=function(){var e=this;if(this.logSwitch&&Xr){var t=this.itv*Math.pow(2,Zr-1);Zr<this.times&&Zr++,setTimeout((function(){e.reportRealtimeLog()}),1e3*t)}},e.prototype.reportRealtimeLog=function(){var e=this,t=fe.realTimeLogList.filter((function(t){return t.level<=e.level}));if(0!==t.length){var n=zr.compress(t.map((function(e){return e.content})).join("")),i=""+$r+this.logUrl+"?version="+this.info.version+"&appkey="+this.info.appkey+"&userId="+this.info.userId+"&deviceId="+this.deviceId+"&deviceInfo="+this.deviceInfo+"&platform=Web";this.info.runtime.httpReq({method:"POST",url:i,body:n}).then((function(t){pe.__clearRealTimeLog(),pe.debug("report real-time log success");var n=t.data;n&&(n=JSON.parse(n),e.itv=n.nextTime,e.level=n.level,e.logSwitch=n.logSwitch,Zr=1),e.startReport()})).catch((function(t){pe.debug("report real-time log error -> "+t),e.startReport()}))}else this.startReport()},e.prototype.reportFullLog=function(e){return w(this,void 0,void 0,(function(){var t,n,i,r,s,o,a,u,c,h,l=this;return b(this,(function(d){switch(d.label){case 0:return t=e.startTime,n=e.endTime,i=e.platform,r=e.logId,s=e.uri,o=q.getInstance(),pe.debug("received report log msg, "+i.toLowerCase(),o),"web"===i.toLowerCase()&&o?t>n?(pe.warn("report error: The start time("+t+") cannot be greater than the end time("+t+")"),[2]):[4,pe.__insertLogIntoDatabase()]:[2];case 1:return d.sent(),[4,o.getRangeData(B,"time",t,n)];case 2:return a=(a=d.sent()).filter((function(e){return!e.userId||e.userId===l.info.userId})),u=zr.compress(a.map((function(e){return e.content})).join("")||"no data"),5e3,c=1,(h=function(){if(!(c>3)&&Xr){var e=s||l.logUrl,t=""+$r+e+"?version="+l.info.version+"&appkey="+l.info.appkey+"&userId="+l.info.userId+"&logId="+r+"&deviceId="+l.deviceId+"&deviceInfo="+l.deviceInfo+"&platform=Web",n=5e3*(c-1);c++,setTimeout((function(){Xr&&l.info.runtime.httpReq({url:t,method:"POST",body:u}).then((function(){pe.debug("report full log success!")})).catch((function(e){h(),pe.warn("report full log error -> "+e)}))}),n)}})(),[2]}}))}))},e.prototype.distroy=function(){Zr=1,Xr=!1},e}();function ts(e){return Object.assign({},e)}var ns,is=function(){function e(e,t){var n;this._runtime=e,this._token="",this._pluginContextQueue=[],this._pluginInstanseMap={},this.coreVersion="5.1.2",this._versionInfo={},this._typingInfo={},this._isInternalConnected=!1,this._connectionStatus=Ie.DISCONNECTED,this._canRedirectConnect=!1,this._watcher={message:void 0,batchMessage:void 0,conversationState:void 0,chatroomState:void 0,connectionState:void 0,rtcInnerWatcher:void 0,expansion:void 0,tag:void 0,conversationTagChanged:void 0,pullFinished:void 0,onConnecting:void 0,onConnected:void 0,onDisconnect:void 0,onSuspend:void 0,readReceiptReceived:void 0,messageReceiptRequest:void 0,messageReceiptResponse:void 0,typingState:void 0,messageBlocked:void 0},this._typingInternalTimer=-1,this._typingExpireTime=2e3,this._typingChangedList=[],this.getChatRoomHistoryMessages=this.getChatroomHistoryMessages,this._options=Object.assign({},t),this.appkey=this._options.appkey,this.apiVersion=this._options.apiVersion,this._options.typingExpireTime&&(this._options.typingExpireTime<2e3?this._typingExpireTime=2e3:this._options.typingExpireTime>6e3?this._typingExpireTime=6e3:this._typingExpireTime=this._options.typingExpireTime),this._options.navigators=this._options.navigators.filter((function(e){return/^https?:\\/\\//.test(e)})),this._options.navigators=this._options.navigators.map((function(e){return e.replace(/\\/$/g,"")})),0===this._options.navigators.length&&(n=this._options.navigators).push.apply(n,u);var i={status:this._connectionStatusListener.bind(this),batchMessage:this._batchMessageReceiver.bind(this),chatroom:this._chatroomInfoListener.bind(this),conversation:this._conversationInfoListener.bind(this),expansion:this._expansionInfoListener.bind(this),tag:this._tagListener.bind(this),conversationTag:this._conversationTagListener.bind(this),onRTCDataChange:this._rtcDataChange.bind(this),pullFinished:this._pullFinishedListener.bind(this)};this._engine=gt()?new RCCppEngine(e,i,this._options):new Qr(e,i,this._options)}return e.init=function(t,n){return pe.setLogLevel(n.logLevel),pe.setLogStdout(n.logStdout),(n.indexDBSwitch||re(n.indexDBSwitch))&&q.init(),pe.debug("APIContext.init =>",n.appkey,n.navigators),this._context?(pe.error("Repeat initialize!"),this._context):(pe.warn("RCEngine Commit:","efd1b7f44d2517ab9a2fab003c298184d1f06fca"),this._context=new e(t,n),pe.__insertLogIntoDatabase(),this._context)},e.destroy=function(){this._context&&(this._context._destroy(),this._context=void 0)},e.prototype.install=function(e,t){if(this._pluginInstanseMap[e.tag])return pe.warn("Repeat install plugin: "+e.tag),this._pluginInstanseMap[e.tag];var n="RCRTC"===e.tag?new Jr(this):new Wr(this),i=null;try{if(!e.verify(this._runtime))return null;i=e.setup(n,this._runtime,t)}catch(e){pe.error("install plugin error!\\n",e)}return["RCRTC","RCCall"].includes(e.tag)&&e.version&&e.name&&(this._versionInfo[e.name]=e.version),i&&this._pluginContextQueue.push(n),i&&(this._pluginInstanseMap[e.tag]=i),i},e.prototype._handleRedirect=function(){return w(this,void 0,void 0,(function(){var e,t=this;return b(this,(function(n){switch(n.label){case 0:return pe.debug("_handleRedirct",this._token),[4,this.connect(this._token,!0)];case 1:return(e=n.sent().code)!==Ee.SUCCESS&&this._canRedirectConnect&&(this._handleSuspend(e),setTimeout((function(){t._handleRedirect()}),5e3)),[2]}}))}))},e.prototype._connectionStatusListener=function(e){var t;return w(this,void 0,void 0,(function(){return b(this,(function(n){return e===Ie.REDIRECT?(this._canRedirectConnect=!0,this._handleSuspend(e),this._handleRedirect()):e===Ie.BLOCKED||e===Ie.KICKED_OFFLINE_BY_OTHER_CLIENT||e===Ie.DISCONNECT_BY_SERVER?(this._canRedirectConnect=!1,this._handleDisconnect(e)):e===Ie.CONNECTING?this._handleConnecting():e===Ie.CONNECTED?this._handleConnected():e===Ie.DISCONNECTED?this._handleDisconnect(e):e===Ie.NETWORK_UNAVAILABLE&&this._handleSuspend(e),this._connectionStatus=e,(null===(t=this._watcher.rtcInnerWatcher)||void 0===t?void 0:t.status)&&this._watcher.rtcInnerWatcher.status(e),this._pluginContextQueue.forEach((function(t){t.onconnectionstatechange&&t.onconnectionstatechange(e)})),this._watcher.connectionState&&this._watcher.connectionState(e),[2]}))}))},e.prototype._handleConnecting=function(){this._watcher.onConnecting&&this._watcher.onConnecting()},e.prototype._handleConnected=function(){this._watcher.onConnected&&this._watcher.onConnected()},e.prototype._handleDisconnect=function(e){this._watcher.onDisconnect&&this._watcher.onDisconnect(e)},e.prototype._handleSuspend=function(e){this._watcher.onSuspend&&this._watcher.onSuspend(e)},e.prototype._messageReceiver=function(e,t,n){var i,r,s;if((e.conversationType===j.RTC_ROOM||Object.prototype.hasOwnProperty.call(qe,e.messageType))&&this._watcher.rtcInnerWatcher&&this._watcher.rtcInnerWatcher.message)this._watcher.rtcInnerWatcher.message(ts(e));else if(-1===["RC:ChrmJoinNtf","RC:ChrmQuitNtf"].indexOf(e.messageType)||"function"!=typeof this._watcher.chatroomState){if("RC:ChrmMemChange"!==e.messageType){if(e.messageType!==Re.TYPING_STATUS||(this._addTypingInfo(ts(e)),!this._watcher.typingState))if(e.messageType!==Re.LOG_COMMAND||"rongcloudsystem"!==e.senderUserId)if(e.messageType!==Re.INTERCEPT){if(!this._pluginContextQueue.some((function(t){if(!t.onmessage)return!1;try{return t.onmessage(ts(e))}catch(e){return pe.error("plugin error =>",e),!1}})))if(this._watcher.message&&this._watcher.message(ts(e),t,n),"RC:ReadNtf"!==e.messageType)if("RC:RRReqMsg"!==e.messageType){if("RC:RRRspMsg"!==e.messageType)return e;var o=null===(s=e.content)||void 0===s?void 0:s.receiptMessageDic;o&&Array.isArray(o[this._engine.currentUserId])&&"function"==typeof this._watcher.messageReceiptResponse&&this._watcher.messageReceiptResponse({conversationType:e.conversationType,targetId:e.targetId,channelId:e.channelId},e.senderUserId,o[this._engine.currentUserId])}else"function"==typeof this._watcher.messageReceiptRequest&&this._watcher.messageReceiptRequest({conversationType:e.conversationType,targetId:e.targetId,channelId:e.channelId},e.content.messageUId,e.senderUserId);else"function"==typeof this._watcher.readReceiptReceived&&this._watcher.readReceiptReceived({conversationType:e.conversationType,targetId:e.targetId,channelId:e.channelId},e.content.messageUId,e.content.lastMessageSendTime)}else this._MessageBlockedListener({conversationType:e.conversationType,targetId:e.targetId,channelId:e.channelId||"",blockType:e.content.interceptType,blockedMessageUId:e.content.msgUId});else{var a=e.content,u=a.startTime,c=a.endTime,h=a.platform,l=a.logId,d=a.uri,f=a.packageName,p={startTime:parseInt(u),endTime:parseInt(c),platform:h,logId:l,uri:d,packageName:f};null===(r=es.getInstance())||void 0===r||r.reportFullLog(p)}}else if("function"==typeof this._watcher.chatroomState){var g={};Array.isArray(e.content.userList)&&e.content.userList.forEach((function(e){g[e.userId]=e.status})),this._watcher.chatroomState({userChange:{users:g,chatroomId:e.targetId}})}}else this._watcher.chatroomState({userChange:{users:(i={},i[e.senderUserId]="RC:ChrmQuitNtf"===e.messageType?Pe.QUIT:Pe.JOIN,i),chatroomId:e.targetId}})},e.prototype._batchMessageReceiver=function(e,t,n){var i=this,r=[];e.forEach((function(e){var s=i._messageReceiver(e,t,n);s&&r.push(s)})),r.length&&this._watcher.batchMessage&&this._watcher.batchMessage(r)},e.prototype._chatroomInfoListener=function(e){this._watcher.chatroomState&&this._watcher.chatroomState(e)},e.prototype._conversationInfoListener=function(e){this._watcher.conversationState&&this._watcher.conversationState(e)},e.prototype._expansionInfoListener=function(e){this._watcher.expansion&&this._watcher.expansion(e)},e.prototype._tagListener=function(){this._watcher.tag&&this._watcher.tag()},e.prototype._conversationTagListener=function(){this._watcher.conversationTagChanged&&this._watcher.conversationTagChanged()},e.prototype._typingStatusListener=function(e){this._watcher.typingState&&this._watcher.typingState(e)},e.prototype._pullFinishedListener=function(){this._watcher.pullFinished&&this._watcher.pullFinished()},e.prototype._MessageBlockedListener=function(e){this._watcher.messageBlocked&&this._watcher.messageBlocked(e)},e.prototype._rtcDataChange=function(e,t){this._pluginContextQueue.forEach((function(n){n.onrtcdatachange&&n.onrtcdatachange(e,t)}))},e.prototype.assignWatcher=function(e){var t=this;Object.keys(this._watcher).forEach((function(n){if(Object.prototype.hasOwnProperty.call(e,n)){var i=e[n];t._watcher[n]=ie(i)||ne(i)?i:void 0}}))},e.prototype.resetWatcher=function(){var e=this;Object.keys(this._watcher).forEach((function(t){e._watcher[t]=void 0}))},e.prototype._addTypingInfo=function(e){var t=e.senderUserId,n=e.conversationType,i=e.targetId,r=e.content,s=e.channelId,o=r.typingContentType,a=n+"#"+i+"#"+(s||"");this._typingInfo[a]||(this._typingInfo[a]=[]);var u=this._typingInfo[a].findIndex((function(e){return e.userId===t}));u>=0&&this._typingInfo[a][u].messageType===o?this._typingInfo[a][u].timestamp=Date.now():(u>=0&&this._typingInfo[a].splice(u,1),this._typingInfo[a].push({userId:t,messageType:o,timestamp:Date.now()}),this._typingChangedList.includes(a)||this._typingChangedList.push(a),this._startCheckTypingInfo())},e.prototype._startCheckTypingInfo=function(){var e=this;-1===this._typingInternalTimer&&0!==Object.keys(this._typingInfo).length&&(this._typingInternalTimer=setInterval((function(){for(var t in e._typingInfo){var n=e._typingInfo[t].length;e._typingInfo[t]=e._typingInfo[t].filter((function(t){return Date.now()-t.timestamp<e._typingExpireTime})),e._typingInfo[t].length===n||e._typingChangedList.includes(t)||e._typingChangedList.push(t),0===e._typingInfo[t].length&&delete e._typingInfo[t]}if(e._typingChangedList.length>0){var i=e._typingChangedList.map((function(t){return{conversationType:Number(t.split("#")[0]),targetId:t.split("#")[1],channelId:t.split("#")[2],list:e._typingInfo[t]||[]}}));e._typingStatusListener(i),e._typingChangedList=[]}0===Object.keys(e._typingInfo).length&&(clearInterval(e._typingInternalTimer),e._typingInternalTimer=-1)}),500))},e.prototype.getConnectedTime=function(){return this._engine.getConnectedTime()},e.prototype.getServerTime=function(){return this._engine.getServerTime()},e.prototype.getDeviceId=function(){return this._engine.getDeviceId()},e.prototype.getCurrentUserId=function(){return this._engine.currentUserId},e.prototype.getConnectionStatus=function(){return this._connectionStatus},Object.defineProperty(e.prototype,"token",{get:function(){return this._token},enumerable:!1,configurable:!0}),e.prototype.connect=function(e,t,n){return void 0===t&&(t=!1),w(this,void 0,void 0,(function(){var i,r,s,o,a,u;return b(this,(function(c){switch(c.label){case 0:return this._connectionStatus===Ie.CONNECTED?[2,{code:Ee.SUCCESS,userId:this._engine.currentUserId}]:this._connectionStatus===Ie.CONNECTING?[2,{code:Ee.BIZ_ERROR_CONNECTING}]:"string"!=typeof e||0===e.length?[2,{code:Ee.RC_CONN_USER_OR_PASSWD_ERROR}]:(this._token=e,i=e.split("@"),r=i[1],s=r?r.split(";").map((function(e){return/^https?:/.test(e)?e:"https://"+e})):[],[4,this._engine.navi.getInfo(this._getTokenWithoutNavi(),s,t,this._options.checkCA)]);case 1:return(o=c.sent())?1===(null==o?void 0:o.type)?[2,{code:Ee.PACKAGE_ENVIRONMENT_ERROR}]:(a=je.getInfo(),[4,this._engine.connect(this._getTokenWithoutNavi(),o,n)]):[2,{code:Ee.RC_NAVI_RESOURCE_ERROR}];case 2:return u=c.sent(),pe.__insertLogIntoDatabase(),u!==Te.REDIRECT?[3,4]:(this._connectionStatus=Ie.REDIRECT,[4,this.connect(e,!0)]);case 3:return[2,c.sent()];case 4:return u===Ee.SUCCESS&&(pe.info("connect success, userId: "+this._engine.currentUserId),1!==(null==o?void 0:o.type)&&this._engine.reportSDKInfo&&this._engine.reportSDKInfo(a),es.init({runtime:this._runtime,logSwitch:(null==o?void 0:o.logSwitch)||0,logPolicy:JSON.parse((null==o?void 0:o.logPolicy)||"{}"),appkey:this.appkey,version:this.apiVersion,userId:this._engine.currentUserId}),fe.init(this._engine.currentUserId),this._isInternalConnected=!0),u!==Ee.SUCCESS||gt()||1===o.openUS&&this._pullUserSettings(),u!==Ee.SUCCESS&&(this._connectionStatus=Ie.CONNECTION_CLOSED),[2,{code:u,userId:this._engine.currentUserId}]}}))}))},e.prototype._pullUserSettings=function(){return w(this,void 0,void 0,(function(){return b(this,(function(e){return[2]}))}))},e.prototype.disconnect=function(){var e;return this._isInternalConnected=!1,clearInterval(this._typingInternalTimer),this._typingInternalTimer=-1,this._typingInfo={},null===(e=es.getInstance())||void 0===e||e.distroy(),pe.__insertLogIntoDatabase(),fe.reset(),this._engine.disconnect(),this._pluginContextQueue.forEach((function(e){if(e.ondisconnect)try{e.ondisconnect()}catch(e){pe.error("plugin error =>",e)}})),Promise.resolve()},e.prototype.reconnect=function(e){return this._isInternalConnected?Promise.resolve({code:Ee.CAN_NOT_RECONNECT}):this.connect(this._getTokenWithoutNavi(),!1,e)},e.prototype._getTokenWithoutNavi=function(){return this._token.replace(/@.+$/,"@")},e.prototype.getInfoFromCache=function(){return this._engine.navi.getInfoFromCache(this._getTokenWithoutNavi())},e.prototype.registerMessageType=function(e,t,n,i,r){void 0===i&&(i=[]),void 0===r&&(r=!1),this._engine.registerMessageType(e,t,n,i,r)},e.prototype.sendMessage=function(e,t,n,i){var r=this.getInfoFromCache();if(1===((null==r?void 0:r.grpRRVer)||0)&&n.messageType===Re.READ_RECEIPT_RESPONSE)return Promise.resolve({code:Ee.READ_RECEIPT_ERROR});var s=JSON.stringify(n.content);return V(s)>131072?Promise.resolve({code:Ee.RC_MSG_CONTENT_EXCEED_LIMIT}):this._engine.sendMessage(e,t,n,i)},e.prototype.sendExpansionMessage=function(e){return w(this,void 0,void 0,(function(){var t,n,i,r,s,o,a,u,c,h,l,d,f,p;return b(this,(function(g){switch(g.label){case 0:if(t=e.channelId,n=e.conversationType,i=e.targetId,r=e.messageUId,s=e.keys,o=e.expansion,a=e.removeAll,!e.canIncludeExpansion)return[2,{code:Ee.MESSAGE_KV_NOT_SUPPORT}];if(u=!1,c=!1,h=!1,ne(o))for(d in l=Object.keys(o).length,u=l>20,o)if(f=o[d],c=J(d)&&!/^[A-Za-z0-9_=+-]+$/.test(d),(h=d.length>32||f.length>4096)||c)break;return u||h?[2,{code:Ee.EXPANSION_LIMIT_EXCEET}]:c?[2,{code:Ee.BIZ_ERROR_INVALID_PARAMETER}]:(p={mid:r},o&&(p.put=o),s&&(p.del=s),a&&(p.removeAll=1),[4,this._engine.sendMessage(n,i,{content:p,messageType:Re.EXPANSION_NOTIFY,channelId:t})]);case 1:return[2,{code:g.sent().code}]}}))}))},e.prototype.sendReadReceiptMessage=function(e,t,n){return w(this,void 0,void 0,(function(){var i;return b(this,(function(r){return i=this.getInfoFromCache(),0===((null==i?void 0:i.grpRRVer)||0)?[2,{code:Ee.READ_RECEIPT_ERROR,data:"The read receipt switch is not on, please call the sendMessage method!"}]:[2,this._engine.sendReadReceiptMessage(e,t,n)]}))}))},e.prototype.getMessageReader=function(e,t,n){return w(this,void 0,void 0,(function(){var i;return b(this,(function(r){return i=this.getInfoFromCache(),0===((null==i?void 0:i.grpRRVer)||0)?[2,{code:Ee.READ_RECEIPT_ERROR}]:[2,this._engine.getMessageReader(e,t,n)]}))}))},e.prototype._destroy=function(){var e;this._isInternalConnected=!1,this._watcher={batchMessage:void 0,message:void 0,conversationState:void 0,chatroomState:void 0,connectionState:void 0,rtcInnerWatcher:void 0,expansion:void 0,tag:void 0,conversationTagChanged:void 0,typingState:void 0,pullFinished:void 0,onConnecting:void 0,onConnected:void 0,onDisconnect:void 0,onSuspend:void 0},this._engine.disconnect(),this._pluginContextQueue.forEach((function(e){if(e.ondestroy)try{e.ondestroy()}catch(e){pe.error("plugin error =>",e)}})),this._pluginContextQueue.length=0,this._pluginInstanseMap={},null===(e=es.getInstance())||void 0===e||e.distroy(),fe.reset()},e.prototype.getHistoryMessage=function(e,t,n,i,r,s,o){return void 0===n&&(n=0),void 0===i&&(i=20),void 0===r&&(r=0),void 0===s&&(s=""),void 0===o&&(o=""),this._engine.getHistoryMessage(e,t,n,i,r,s,o||"")},e.prototype.getConversationList=function(e,t,n,i,r){return void 0===e&&(e=300),void 0===r&&(r=""),this._engine.getConversationList(e,t,n,i,r)},e.prototype.getConversation=function(e,t,n){return this._engine.getConversation(e,t,n)},e.prototype.removeConversation=function(e,t,n){return void 0===n&&(n=""),this._engine.removeConversation(e,t,n)},e.prototype.clearUnreadCount=function(e,t,n){return void 0===n&&(n=""),this._engine.clearConversationUnreadCount(e,t,n)},e.prototype.clearAllUnreadCount=function(){return this._engine.clearAllUnreadCount()},e.prototype.getUnreadCount=function(e,t,n){return void 0===n&&(n=""),this._engine.getConversationUnreadCount(e,t,n)},e.prototype.getTotalUnreadCount=function(e,t,n){return this._engine.getAllConversationUnreadCount(e,t&&t.length>0?t:[j.PRIVATE,j.GROUP,j.SYSTEM,j.PUBLIC_SERVICE],!!n)},e.prototype.getFirstUnreadMessage=function(e,t,n){return void 0===n&&(n=""),this._engine.getFirstUnreadMessage(e,t,n)},e.prototype.setConversationStatus=function(e,t,n,i,r){void 0===r&&(r="");var s=[{conversationType:e,targetId:t,isTop:n,notificationStatus:i,channelId:r}];return this._engine.batchSetConversationStatus(s)},e.prototype.saveConversationMessageDraft=function(e,t,n,i){return void 0===i&&(i=""),this._engine.saveConversationMessageDraft(e,t,n,i)},e.prototype.getConversationMessageDraft=function(e,t,n){return void 0===n&&(n=""),this._engine.getConversationMessageDraft(e,t,n)},e.prototype.clearConversationMessageDraft=function(e,t,n){return void 0===n&&(n=""),this._engine.clearConversationMessageDraft(e,t,n)},e.prototype.recallMessage=function(e,t,n,i,r){return this._engine.recallMsg(e,t,n,i,r)},e.prototype.deleteRemoteMessage=function(e,t,n,i){return void 0===i&&(i=""),this._engine.deleteRemoteMessage(e,t,n,i)},e.prototype.deleteRemoteMessageByTimestamp=function(e,t,n,i){return void 0===i&&(i=""),this._engine.deleteRemoteMessageByTimestamp(e,t,n,i)},e.prototype.joinChatroom=function(e,t){return void 0===t&&(t=10),this._engine.joinChatroom(e,t)},e.prototype.joinExistChatroom=function(e,t){return void 0===t&&(t=10),this._engine.joinExistChatroom(e,t)},e.prototype.quitChatroom=function(e){return this._engine.quitChatroom(e)},e.prototype.getChatroomInfo=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=0),this._engine.getChatroomInfo(e,t,n)},e.prototype.setChatroomEntry=function(e,t){var n=t.key,i=t.value;return at(n)&&ut(i)?this._engine.setChatroomEntry(e,t):Promise.resolve(Ee.BIZ_ERROR_INVALID_PARAMETER)},e.prototype.setChatroomEntries=function(e,t){for(var n=0;n<t.entries.length;n++){var i=t.entries[n],r=i.key,s=i.value;if(!at(r)||!ut(s))return Promise.resolve({code:Ee.BIZ_ERROR_INVALID_PARAMETER})}return this._engine.setChatroomEntries(e,t)},e.prototype.forceSetChatroomEntry=function(e,t){var n=t.key,i=t.value;return at(n)&&ut(i)?this._engine.forceSetChatroomEntry(e,t):Promise.resolve(Ee.BIZ_ERROR_INVALID_PARAMETER)},e.prototype.removeChatroomEntry=function(e,t){var n=t.key;return at(n)?this._engine.removeChatroomEntry(e,t):Promise.resolve(Ee.BIZ_ERROR_INVALID_PARAMETER)},e.prototype.removeChatroomEntries=function(e,t){for(var n=0;n<t.entries.length;n++){var i=t.entries[n].key;if(!at(i))return Promise.resolve({code:Ee.BIZ_ERROR_INVALID_PARAMETER})}return this._engine.removeChatroomEntries(e,t)},e.prototype.forceRemoveChatroomEntry=function(e,t){var n=t.key;return at(n)?this._engine.forceRemoveChatroomEntry(e,t):Promise.resolve(Ee.BIZ_ERROR_INVALID_PARAMETER)},e.prototype.getChatroomEntry=function(e,t){return this._engine.getChatroomEntry(e,t)},e.prototype.getAllChatroomEntries=function(e){return this._engine.getAllChatroomEntry(e)},e.prototype.getChatroomHistoryMessages=function(e,t,n,i){return void 0===t&&(t=20),void 0===n&&(n=0),void 0===i&&(i=0),this._engine.getChatroomHistoryMessages(e,i,t,n)},e.prototype.getFileToken=function(e,t,n,i){return w(this,void 0,void 0,(function(){var r,s,o,a,u,c,h;return b(this,(function(l){switch(l.label){case 0:return r=this.getInfoFromCache(),s=(null==r?void 0:r.bosAddr)||"",o=(null==r?void 0:r.uploadServer)||"",a=(null==r?void 0:r.ossConfig)||"",[4,this._engine.getFileToken(e,t,n,i)];case 1:return u=l.sent(),c=u.code,h=u.data,c===Ee.SUCCESS?[2,Promise.resolve(Object.assign(h,{bos:s,qiniu:o,ossConfig:a}))]:[2,Promise.reject(c)]}}))}))},e.prototype.getFileUrl=function(e,t,n,i,r){return void 0===r&&(r=Me.QINIU),w(this,void 0,void 0,(function(){var s,o,a;return b(this,(function(u){switch(u.label){case 0:return(null==i?void 0:i.isBosRes)?[2,Promise.resolve(i)]:[4,this._engine.getFileUrl(e,r,t,n)];case 1:return s=u.sent(),o=s.code,a=s.data,o===Ee.SUCCESS?[2,Promise.resolve(a)]:[2,Promise.reject(o)]}}))}))},e.prototype.createTag=function(e){return w(this,void 0,void 0,(function(){return b(this,(function(t){return[2,this._engine.createTag(e)]}))}))},e.prototype.removeTag=function(e){return w(this,void 0,void 0,(function(){return b(this,(function(t){return[2,this._engine.removeTag(e)]}))}))},e.prototype.updateTag=function(e){return w(this,void 0,void 0,(function(){return b(this,(function(t){return[2,this._engine.updateTag(e)]}))}))},e.prototype.getTagList=function(){return w(this,void 0,void 0,(function(){return b(this,(function(e){return[2,this._engine.getTagList()]}))}))},e.prototype.addTagForConversations=function(e,t){return w(this,void 0,void 0,(function(){return b(this,(function(n){return t.length>1e3?[2,Promise.reject(Ee.CONVER_OUT_LIMIT_ERROR)]:[2,this._engine.addTagForConversations(e,t)]}))}))},e.prototype.removeTagForConversations=function(e,t){return w(this,void 0,void 0,(function(){return b(this,(function(n){return[2,this._engine.removeTagForConversations(e,t)]}))}))},e.prototype.removeTagsForConversation=function(e,t){return w(this,void 0,void 0,(function(){return b(this,(function(n){return[2,this._engine.removeTagsForConversation(e,t)]}))}))},e.prototype.getConversationListByTag=function(e,t,n,i){return w(this,void 0,void 0,(function(){return b(this,(function(r){return[2,this._engine.getConversationListByTag(e,t,n,i)]}))}))},e.prototype.getUnreadCountByTag=function(e,t){return w(this,void 0,void 0,(function(){return b(this,(function(n){return[2,this._engine.getUnreadCountByTag(e,t)]}))}))},e.prototype.setConversationStatusInTag=function(e,t,n){return w(this,void 0,void 0,(function(){return b(this,(function(i){return[2,this._engine.setConversationStatusInTag(e,t,n)]}))}))},e.prototype.getTagsForConversation=function(e){return w(this,void 0,void 0,(function(){return b(this,(function(t){return[2,this._engine.getTagsForConversation(e)]}))}))},e.prototype.getBlockConversationList=function(){return this._engine.getBlockConversationList()},e.prototype.getTopConversationList=function(){return this._engine.getTopConversationList()},e.prototype.getUnreadMentionedCount=function(e){return this._engine.getUnreadMentionedCount(e)},e.prototype.getAllUnreadMentionedCount=function(){return this._engine.getAllUnreadMentionedCount()},e.prototype.getAllConversationState=function(){return this._engine.getAllConversationState()},e.prototype.callExtra=function(e){for(var t,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return(t=this._engine).callExtra.apply(t,M([e],n))},e.prototype.clearConversations=function(e,t){return w(this,void 0,void 0,(function(){return b(this,(function(n){switch(n.label){case 0:return[4,this._engine.clearConversations(e,t)];case 1:return[2,n.sent()]}}))}))},e.prototype.setUserStatusListener=function(e,t){return this._engine.setUserStatusListener(e,(function(e){try{t(e)}catch(e){pe.error(e)}}))},e.prototype.addToBlacklist=function(e){return w(this,void 0,void 0,(function(){return b(this,(function(t){return[2,this._engine.addToBlacklist(e)]}))}))},e.prototype.removeFromBlacklist=function(e){return w(this,void 0,void 0,(function(){return b(this,(function(t){return[2,this._engine.removeFromBlacklist(e)]}))}))},e.prototype.getBlacklist=function(){return w(this,void 0,void 0,(function(){return b(this,(function(e){return[2,this._engine.getBlacklist()]}))}))},e.prototype.getBlacklistStatus=function(e){return w(this,void 0,void 0,(function(){return b(this,(function(t){return[2,this._engine.getBlacklistStatus(e)]}))}))},e.prototype.insertMessage=function(e,t,n){return w(this,void 0,void 0,(function(){return b(this,(function(i){return[2,this._engine.insertMessage(e,t,n)]}))}))},e.prototype.deleteMessages=function(e){return w(this,void 0,void 0,(function(){return b(this,(function(t){return[2,this._engine.deleteMessages(e)]}))}))},e.prototype.deleteMessagesByTimestamp=function(e,t,n,i,r){return void 0===r&&(r=""),w(this,void 0,void 0,(function(){return b(this,(function(s){return[2,this._engine.deleteMessagesByTimestamp(e,t,n,i,r)]}))}))},e.prototype.clearMessages=function(e,t,n){return void 0===n&&(n=""),w(this,void 0,void 0,(function(){return b(this,(function(i){return[2,this._engine.clearMessages(e,t,n)]}))}))},e.prototype.getMessage=function(e){return w(this,void 0,void 0,(function(){return b(this,(function(t){return[2,this._engine.getMessage(e)]}))}))},e.prototype.setMessageContent=function(e,t,n){return w(this,void 0,void 0,(function(){return b(this,(function(i){return[2,this._engine.setMessageContent(e,t,n)]}))}))},e.prototype.setMessageSearchField=function(e,t,n){return w(this,void 0,void 0,(function(){return b(this,(function(i){return[2,this._engine.setMessageSearchField(e,t,n)]}))}))},e.prototype.setMessageSentStatus=function(e,t){return w(this,void 0,void 0,(function(){return b(this,(function(n){return[2,this._engine.setMessageSentStatus(e,t)]}))}))},e.prototype.setMessageReceivedStatus=function(e,t){return w(this,void 0,void 0,(function(){return b(this,(function(n){return[2,this._engine.setMessageReceivedStatus(e,t)]}))}))},e.prototype.setUserStatus=function(e){return w(this,void 0,void 0,(function(){return b(this,(function(t){return[2,this._engine.setUserStatus(e)]}))}))},e.prototype.subscribeUserStatus=function(e){return w(this,void 0,void 0,(function(){return b(this,(function(t){return[2,this._engine.subscribeUserStatus(e)]}))}))},e.prototype.getUserStatus=function(e){return w(this,void 0,void 0,(function(){return b(this,(function(t){return[2,this._engine.getUserStatus(e)]}))}))},e.prototype.searchConversationByContent=function(e,t,n,i){return void 0===t&&(t=[]),void 0===n&&(n=""),w(this,void 0,void 0,(function(){return b(this,(function(r){return[2,this._engine.searchConversationByContent(e,t,n,i)]}))}))},e.prototype.searchMessageByContent=function(e,t,n,i,r,s,o){return void 0===o&&(o=""),w(this,void 0,void 0,(function(){return b(this,(function(a){return[2,this._engine.searchMessageByContent(e,t,n,i,r,s,o)]}))}))},e.prototype.getUnreadMentionedMessages=function(e,t,n){return void 0===n&&(n=""),this._engine.getUnreadMentionedMessages(e,t,n)},e.prototype.clearUnreadCountByTimestamp=function(e,t,n,i){return void 0===i&&(i=""),this._engine.clearUnreadCountByTimestamp(e,t,n,i)},e.prototype.getConversationNotificationStatus=function(e,t,n){return void 0===n&&(n=""),this._engine.getConversationNotificationStatus(e,t,n)},e.prototype.getRemoteHistoryMessages=function(e,t,n,i,r,s){return this._engine.getRemoteHistoryMessages(e,t,n,i,r,s)},e.prototype.getConversationListWithAllChannel=function(){return this._engine.getConversationListWithAllChannel()},e.prototype.getConversationListWithAllChannelByPage=function(e,t){return this._engine.getConversationListWithAllChannelByPage(e,t)},e.prototype.joinRTCRoom=function(e,t,n,i,r,s){return this._engine.joinRTCRoom(e,t,n,i,r,s)},e.prototype.quitRTCRoom=function(e){return this._engine.quitRTCRoom(e)},e.prototype.rtcPing=function(e,t,n){return this._engine.rtcPing(e,t,n)},e.prototype.getRTCRoomInfo=function(e){return this._engine.getRTCRoomInfo(e)},e.prototype.getRTCUserInfoList=function(e){return this._engine.getRTCUserInfoList(e)},e.prototype.getRTCUserInfo=function(e){return this._engine.getRTCUserInfo(e)},e.prototype.setRTCUserInfo=function(e,t,n){return this._engine.setRTCUserInfo(e,t,n)},e.prototype.removeRTCUserInfo=function(e,t){return this._engine.removeRTCUserInfo(e,t)},e.prototype.setRTCData=function(e,t,n,i,r,s){return this._engine.setRTCData(e,t,n,i,r,s)},e.prototype.setRTCTotalRes=function(e,t,n,i,r){return void 0===r&&(r=""),this._engine.setRTCTotalRes(e,t,n,i,r)},e.prototype.setRTCCDNUris=function(e,t,n){return this._engine.setRTCCDNUris(e,t,n)},e.prototype.getRTCData=function(e,t,n,i){return this._engine.getRTCData(e,t,n,i)},e.prototype.removeRTCData=function(e,t,n,i,r){return this._engine.removeRTCData(e,t,n,i,r)},e.prototype.setRTCOutData=function(e,t,n,i){return this._engine.setRTCOutData(e,t,n,i)},e.prototype.getRTCOutData=function(e,t){return this._engine.getRTCOutData(e,t)},e.prototype.getRTCToken=function(e,t,n){return this._engine.getRTCToken(e,t,n)},e.prototype.setRTCState=function(e,t){return this._engine.setRTCState(e,t)},e.prototype.getRTCUserList=function(e){return this._engine.getRTCUserList(e)},e.prototype.joinLivingRoomAsAudience=function(e,t,n){return this._engine.joinLivingRoomAsAudience(e,t,n)},e.prototype.quitLivingRoomAsAudience=function(e){return this._engine.quitLivingRoomAsAudience(e)},e.prototype.rtcIdentityChange=function(e,t,n){return this._engine.rtcIdentityChange(e,t,n)},e.prototype.getRTCJoinedUserInfo=function(e){return this._engine.getRTCJoinedUserInfo(e)},e.prototype.requestRoomPK=function(e){return this._engine.requestRoomPK(e)},e.prototype.cancelRoomPK=function(e){return this._engine.cancelRoomPK(e)},e.prototype.responseRoomPK=function(e){return this._engine.responseRoomPK(e)},e.prototype.endRoomPK=function(e){return this._engine.endRoomPK(e)},e}();!function(e){e[e.add=1]="add",e[e.update=2]="update",e[e.delete=3]="delete"}(ns||(ns={}));var rs="5.1.2";\n\n\n//# sourceURL=webpack://@rongcloud/rcvoiceroomlib-v1/./node_modules/@rongcloud/engine/dist/index.esm.js?')},"./node_modules/@rongcloud/imlib-next/dist/index.esm.js":
/*!**************************************************************!*\
  !*** ./node_modules/@rongcloud/imlib-next/dist/index.esm.js ***!
  \**************************************************************/(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "ConnectionStatus": () => (/* reexport safe */ _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ConnectionStatus),\n/* harmony export */   "ConversationType": () => (/* reexport safe */ _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ConversationType),\n/* harmony export */   "ErrorCode": () => (/* reexport safe */ _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode),\n/* harmony export */   "LogLevel": () => (/* reexport safe */ _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.LogLevel),\n/* harmony export */   "MentionedType": () => (/* reexport safe */ _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.MentionedType),\n/* harmony export */   "MessageBlockType": () => (/* reexport safe */ _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.MessageBlockType),\n/* harmony export */   "MessageDirection": () => (/* reexport safe */ _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.MessageDirection),\n/* harmony export */   "NotificationStatus": () => (/* reexport safe */ _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.NotificationStatus),\n/* harmony export */   "ReceivedStatus": () => (/* reexport safe */ _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ReceivedStatus),\n/* harmony export */   "UploadMethod": () => (/* reexport safe */ _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.UploadMethod),\n/* harmony export */   "BaseMessage": () => (/* binding */ Ze),\n/* harmony export */   "CombineMessage": () => (/* binding */ ct),\n/* harmony export */   "ConnectType": () => (/* binding */ An),\n/* harmony export */   "Events": () => (/* binding */ U),\n/* harmony export */   "FileMessage": () => (/* binding */ ut),\n/* harmony export */   "GIFMessage": () => (/* binding */ dt),\n/* harmony export */   "HQVoiceMessage": () => (/* binding */ rt),\n/* harmony export */   "ImageMessage": () => (/* binding */ at),\n/* harmony export */   "LocationMessage": () => (/* binding */ gt),\n/* harmony export */   "MessageType": () => (/* binding */ Pn),\n/* harmony export */   "ReferenceMessage": () => (/* binding */ ft),\n/* harmony export */   "RichContentMessage": () => (/* binding */ mt),\n/* harmony export */   "SightMessage": () => (/* binding */ it),\n/* harmony export */   "TextMessage": () => (/* binding */ st),\n/* harmony export */   "VoiceMessage": () => (/* binding */ lt),\n/* harmony export */   "__addSDKVersion": () => (/* binding */ Ce),\n/* harmony export */   "addConversationsToTag": () => (/* binding */ On),\n/* harmony export */   "addEventListener": () => (/* binding */ he),\n/* harmony export */   "addTag": () => (/* binding */ Tn),\n/* harmony export */   "clearAllMessagesUnreadStatus": () => (/* binding */ _e),\n/* harmony export */   "clearEventListeners": () => (/* binding */ Se),\n/* harmony export */   "clearHistoryMessages": () => (/* binding */ an),\n/* harmony export */   "clearMessages": () => (/* binding */ vn),\n/* harmony export */   "clearMessagesUnreadStatus": () => (/* binding */ Me),\n/* harmony export */   "clearTextMessageDraft": () => (/* binding */ Re),\n/* harmony export */   "clearUnreadCountByTimestamp": () => (/* binding */ Sn),\n/* harmony export */   "connect": () => (/* binding */ de),\n/* harmony export */   "deleteLocalMessagesByTimestamp": () => (/* binding */ pn),\n/* harmony export */   "deleteMessages": () => (/* binding */ on),\n/* harmony export */   "disconnect": () => (/* binding */ le),\n/* harmony export */   "forceRemoveChatRoomEntry": () => (/* binding */ Je),\n/* harmony export */   "forceSetChatRoomEntry": () => (/* binding */ je),\n/* harmony export */   "getAllChatRoomEntries": () => (/* binding */ Qe),\n/* harmony export */   "getAllConversationState": () => (/* binding */ He),\n/* harmony export */   "getAllUnreadMentionedCount": () => (/* binding */ De),\n/* harmony export */   "getBlockedConversationList": () => (/* binding */ be),\n/* harmony export */   "getChatRoomEntry": () => (/* binding */ Ye),\n/* harmony export */   "getChatRoomInfo": () => (/* binding */ Ve),\n/* harmony export */   "getChatroomHistoryMessages": () => (/* binding */ $e),\n/* harmony export */   "getConnectionStatus": () => (/* binding */ ge),\n/* harmony export */   "getConversationList": () => (/* binding */ Te),\n/* harmony export */   "getConversationNotificationStatus": () => (/* binding */ xe),\n/* harmony export */   "getConversationsFromTagByPage": () => (/* binding */ Un),\n/* harmony export */   "getCurrentUserId": () => (/* binding */ me),\n/* harmony export */   "getFileToken": () => (/* binding */ Bt),\n/* harmony export */   "getFileUrl": () => (/* binding */ qt),\n/* harmony export */   "getFirstUnreadMessage": () => (/* binding */ ln),\n/* harmony export */   "getHistoryMessages": () => (/* binding */ Jt),\n/* harmony export */   "getMessage": () => (/* binding */ fn),\n/* harmony export */   "getMessageReader": () => (/* binding */ un),\n/* harmony export */   "getRemoteHistoryMessages": () => (/* binding */ Yt),\n/* harmony export */   "getServerTime": () => (/* binding */ fe),\n/* harmony export */   "getTags": () => (/* binding */ Nn),\n/* harmony export */   "getTagsFromConversation": () => (/* binding */ Rn),\n/* harmony export */   "getTextMessageDraft": () => (/* binding */ ye),\n/* harmony export */   "getTopConversationList": () => (/* binding */ Pe),\n/* harmony export */   "getTotalUnreadCount": () => (/* binding */ Oe),\n/* harmony export */   "getUnreadCount": () => (/* binding */ we),\n/* harmony export */   "getUnreadCountByTag": () => (/* binding */ xn),\n/* harmony export */   "getUnreadMentionedCount": () => (/* binding */ Le),\n/* harmony export */   "getUnreadMentionedMessages": () => (/* binding */ mn),\n/* harmony export */   "init": () => (/* binding */ ce),\n/* harmony export */   "insertMessage": () => (/* binding */ gn),\n/* harmony export */   "installPlugin": () => (/* binding */ ue),\n/* harmony export */   "joinChatRoom": () => (/* binding */ Be),\n/* harmony export */   "joinExistChatRoom": () => (/* binding */ qe),\n/* harmony export */   "onceEventListener": () => (/* binding */ pe),\n/* harmony export */   "quitChatRoom": () => (/* binding */ Fe),\n/* harmony export */   "recallMessage": () => (/* binding */ nn),\n/* harmony export */   "registerMessageType": () => (/* binding */ dn),\n/* harmony export */   "removeChatRoomEntries": () => (/* binding */ We),\n/* harmony export */   "removeChatRoomEntry": () => (/* binding */ Xe),\n/* harmony export */   "removeConversation": () => (/* binding */ Ee),\n/* harmony export */   "removeConversationsFromTag": () => (/* binding */ wn),\n/* harmony export */   "removeEventListener": () => (/* binding */ ve),\n/* harmony export */   "removeEventListeners": () => (/* binding */ Ie),\n/* harmony export */   "removeMessageExpansionForKey": () => (/* binding */ sn),\n/* harmony export */   "removeTag": () => (/* binding */ En),\n/* harmony export */   "removeTagFromConversations": () => (/* binding */ _n),\n/* harmony export */   "removeTagsFromConversation": () => (/* binding */ Mn),\n/* harmony export */   "saveTextMessageDraft": () => (/* binding */ Ne),\n/* harmony export */   "searchConversationByContent": () => (/* binding */ In),\n/* harmony export */   "searchMessages": () => (/* binding */ hn),\n/* harmony export */   "sendFileMessage": () => (/* binding */ Kt),\n/* harmony export */   "sendHQVoiceMessage": () => (/* binding */ Xt),\n/* harmony export */   "sendImageMessage": () => (/* binding */ jt),\n/* harmony export */   "sendMessage": () => (/* binding */ Ft),\n/* harmony export */   "sendReadReceiptMessage": () => (/* binding */ Qt),\n/* harmony export */   "sendReadReceiptRequest": () => (/* binding */ $t),\n/* harmony export */   "sendReadReceiptResponse": () => (/* binding */ Zt),\n/* harmony export */   "sendReadReceiptResponseV2": () => (/* binding */ en),\n/* harmony export */   "sendSightMessage": () => (/* binding */ Wt),\n/* harmony export */   "sendSyncReadStatusMessage": () => (/* binding */ tn),\n/* harmony export */   "sendTextMessage": () => (/* binding */ Vt),\n/* harmony export */   "sendTypingStatusMessage": () => (/* binding */ cn),\n/* harmony export */   "setChatRoomEntries": () => (/* binding */ Ke),\n/* harmony export */   "setChatRoomEntry": () => (/* binding */ ze),\n/* harmony export */   "setConversationNotificationStatus": () => (/* binding */ Ue),\n/* harmony export */   "setConversationToTop": () => (/* binding */ Ae),\n/* harmony export */   "setConversationToTopInTag": () => (/* binding */ bn),\n/* harmony export */   "setMessageReceivedStatus": () => (/* binding */ Cn),\n/* harmony export */   "updateMessageExpansion": () => (/* binding */ rn),\n/* harmony export */   "updateTag": () => (/* binding */ yn)\n/* harmony export */ });\n/* harmony import */ var _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @rongcloud/engine */ "./node_modules/@rongcloud/engine/dist/index.esm.js");\n\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */var y=function(e,t){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},y(e,t)};var N=function(){return N=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},N.apply(this,arguments)};function R(e,t,n,o){return new(n||(n=Promise))((function(a,r){function i(e){try{c(o.next(e))}catch(e){r(e)}}function s(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((o=o.apply(e,t||[])).next())}))}function O(e,t){var n,o,a,r,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(a=2&r[0]?o.return:r[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,o=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==r[0]&&2!==r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(e){r=[6,e],o=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}var w=new _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.Logger("RCIM"),M=function(){return!("undefined"==typeof uni||!function(e){for(var t=["canIUse","getSystemInfo"],n=0,o=t.length;n<o;n++)if(!e[t[n]])return!1;return!0}(uni))},_=M();var U,x={tag:"browser",httpReq:function(e){var t=e.method||_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.HttpMethod.GET,n=e.timeout||6e4,r=e.headers,i=e.query,s=e.body,c=(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.appendUrl)(e.url,i);return new Promise((function(e){var o,a=(o="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,"undefined"!=typeof XMLHttpRequest&&o?new XMLHttpRequest:"undefined"!=typeof XDomainRequest?new XDomainRequest:new ActiveXObject("Microsoft.XMLHTTP")),i="[object XDomainRequest]"===Object.prototype.toString.call(a);if(a.open(t,c),r&&a.setRequestHeader)for(var u in r)a.setRequestHeader(u,r[u]);if(i){a.timeout=n,a.onload=function(){e({data:a.responseText,status:a.status||200})},a.onerror=function(){e({status:a.status||0})},a.ontimeout=function(){e({status:a.status||0})};var d="object"==typeof s?JSON.stringify(s):s;a.send(d)}else a.onreadystatechange=function(){4===a.readyState&&e({data:a.responseText,status:a.status})},a.onerror=function(){e({status:a.status||0})},setTimeout((function(){return e({status:a.status||0})}),n),a.send(s)}))},localStorage:null===window||void 0===window?void 0:window.localStorage,sessionStorage:null===window||void 0===window?void 0:window.sessionStorage,isSupportSocket:function(){var e="undefined"!=typeof WebSocket;return e||w.warn("websocket not support"),e},useNavi:!0,connectPlatform:"",isFromUniapp:_,createWebSocket:function(e,t){var n=new WebSocket(e,t);return n.binaryType="arraybuffer",{onClose:function(e){n.onclose=function(t){var n=t.code,o=t.reason;e(n,o)}},onError:function(e){n.onerror=e},onMessage:function(e){n.onmessage=function(t){e(t.data)}},onOpen:function(e){n.onopen=e},send:function(e){n.send(e)},close:function(e,t){n.close(e,t)}}},createDataChannel:function(e,o){return this.isSupportSocket()&&"websocket"===o?new _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.WebSocketChannel(this,e):new _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.CometChannel(this,e)}},b=M(),A=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return wx[e].apply(wx,t)}catch(e){w.error(e)}}},P={setItem:A("setStorageSync"),getItem:A("getStorageSync"),removeItem:A("removeStorageSync"),clear:A("clearStorageSync")},L={tag:"wechat",httpReq:function(e){var t=e.method||_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.HttpMethod.GET,n=e.timeout||6e4,i=e.headers,s=e.query,c=e.body,u=(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.appendUrl)(e.url,s);return new Promise((function(e){wx.request({url:u,method:t,headers:i,timeout:n,data:c,success:function(t){e({data:t.data,status:t.statusCode})},fail:function(){e({status:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.RC_HTTP_REQ_TIMEOUT})}})}))},localStorage:P,sessionStorage:P,isSupportSocket:function(){return!0},useNavi:!1,connectPlatform:"MiniProgram",isFromUniapp:b,createWebSocket:function(e,t){var n=wx.connectSocket({url:e,protocols:t});return{onClose:function(e){n.onClose((function(t){e(t.code,t.reason)}))},onError:function(e){n.onError((function(t){e(t.errMsg)}))},onMessage:function(e){n.onMessage((function(t){e(t.data)}))},onOpen:function(e){n.onOpen(e)},send:function(e){n.send({data:e})},close:function(e,t){n.close({code:e,reason:t})}}},createDataChannel:function(e,o){return"websocket"===o?new _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.WebSocketChannel(this,e):new _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.CometChannel(this,e)}},D=M(),H=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return my[e].apply(my,t)}catch(e){w.error(e)}}},k={setItem:H("setStorageSync"),getItem:H("getStorageSync"),removeItem:H("removeStorageSync"),clear:H("clearStorageSync")},G={tag:"alipay",httpReq:function(e){var t=e.method||_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.HttpMethod.GET,n=e.timeout||6e4,i=e.headers,s=e.query,c=e.body,u=(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.appendUrl)(e.url,s),d=e.dataType||"json";return new Promise((function(e){my.request({url:u,method:t,headers:i,timeout:n,data:c,dataType:d,success:function(t){e({data:t.data,status:t.status})},fail:function(){e({status:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.RC_HTTP_REQ_TIMEOUT})}})}))},localStorage:k,sessionStorage:k,isSupportSocket:function(){return!1},useNavi:!1,connectPlatform:"MiniProgram",isFromUniapp:D,createDataChannel:function(e,o){return"websocket"===o?new _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.WebSocketChannel(this,e):new _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.CometChannel(this,e)}},B=M(),q=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return console.log("tt",tt),tt[e].apply(tt,t)}catch(e){w.error(e)}}},F={setItem:q("setStorageSync"),getItem:q("getStorageSync"),removeItem:q("removeStorageSync"),clear:q("clearStorageSync")},V={tag:"toutiao",isSupportSocket:function(){return!0},useNavi:!1,connectPlatform:"MiniProgram",isFromUniapp:B,localStorage:F,sessionStorage:F,httpReq:function(e){return new Promise((function(t,n){tt.request({url:e.url,data:e.body,header:e.headers,method:e.method,success:function(e){console.log("调用成功",e.data);var n=(null==e?void 0:e.data)||{},o={data:JSON.stringify(n),status:e.statusCode};t(o)},fail:function(e){console.log("调用失败",e.errMsg),n({data:e.errMsg})}})}))},createWebSocket:function(e,t){var n=tt.connectSocket({url:e,protocols:t});return{onOpen:function(e){n.onOpen(e)},onClose:function(e){n.onClose((function(t){return e(t.code,t.reason)}))},onError:function(e){n.onError((function(t){return e(t.errMsg)}))},onMessage:function(e){n.onMessage((function(t){return e(t.data)}))},send:function(e){n.send({data:e})},close:function(e,t){n.close({code:e,reason:t})}}},createDataChannel:function(e,o){return"websocket"===o?new _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.WebSocketChannel(this,e):new _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.CometChannel(this,e)}},z=M(),K=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return console.log("swan",swan),swan[e].apply(swan,t)}catch(e){w.error(e)}}},j={setItem:K("setStorageSync"),getItem:K("getStorageSync"),removeItem:K("removeStorageSync"),clear:K("clearStorageSync")},X={tag:"baidu",isSupportSocket:function(){return!0},useNavi:!1,connectPlatform:"MiniProgram",isFromUniapp:z,localStorage:j,sessionStorage:j,httpReq:function(e){return new Promise((function(t,n){swan.request({url:e.url,data:e.body,header:e.headers,method:e.method,success:function(e){console.log("调用成功",e.data);var n=(null==e?void 0:e.data)||{},o={data:JSON.stringify(n),status:e.statusCode};t(o)},fail:function(e){console.log("调用失败",e.errorCode),n({data:e.errorCode})}})}))},createWebSocket:function(e,t){var n=swan.connectSocket({url:e,protocols:t});return{onOpen:function(e){n.onOpen(e)},onClose:function(e){n.onClose((function(t){return e(t.code,t.reason)}))},onError:function(e){n.onError((function(t){return e(t.errMsg)}))},onMessage:function(e){n.onMessage((function(t){return e(t.data)}))},send:function(e){n.send({data:e})},close:function(e,t){n.close({code:e,reason:t})}}},createDataChannel:function(e,o){return"websocket"===o?new _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.WebSocketChannel(this,e):new _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.CometChannel(this,e)}},W=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return uni[e].apply(uni,t)}catch(e){w.error(e)}}},J={setItem:W("setStorageSync"),getItem:W("getStorageSync"),removeItem:W("removeStorageSync"),clear:W("clearStorageSync")},Y={tag:"uniapp",httpReq:function(e){var t=e.method||_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.HttpMethod.GET,n=e.timeout||6e4,i=e.headers,s=e.query,c=e.body,u=(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.appendUrl)(e.url,s);return new Promise((function(e){uni.request({url:u,method:t,headers:i,timeout:n,data:c,success:function(t){e({data:t.data,status:t.statusCode})},fail:function(){e({status:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.RC_HTTP_REQ_TIMEOUT})}})}))},localStorage:J,sessionStorage:J,isSupportSocket:function(){return!0},useNavi:!0,connectPlatform:"",isFromUniapp:!0,createWebSocket:function(e,t){var n={complete:function(){},url:e,protocols:t},o=uni.connectSocket(n);return{onClose:function(e){o.onClose((function(t){e(t.code,t.reason)}))},onError:function(e){o.onError((function(t){e(t.errMsg)}))},onMessage:function(e){o.onMessage((function(t){e(t.data)}))},onOpen:function(e){o.onOpen(e)},send:function(e){o.send({data:e})},close:function(e,t){o.close({code:e,reason:t})}}},createDataChannel:function(e,o){return"websocket"===o?new _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.WebSocketChannel(this,e):new _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.CometChannel(this,e)}},Q=function(e){return e&&e.canIUse&&e.getSystemInfo},$="undefined"!=typeof uni&&Q(uni)?function(){switch(process.env.VUE_APP_PLATFORM){case"app-plus":return Y;case"mp-baidu":return X;case"mp-toutiao":return V;case"mp-alipay":return G;case"mp-weixin":return L;default:return x}}():"undefined"!=typeof wx&&Q(wx)?L:"undefined"!=typeof my&&Q(my)?G:"undefined"!=typeof tt&&Q(tt)?V:"undefined"!=typeof swan&&Q(swan)?X:x;function Z(e){var t=e.conversationType,n=e.channelId,o=e.messageType,a=e.content,r=e.senderUserId,s=e.targetId,c=e.sentTime,u=e.receivedTime,d=e.messageUId,l=e.messageDirection,g=e.isPersited,f=e.isCounted,m=e.isOffLineMessage,h=e.canIncludeExpansion,p=e.expansion,v=e.receivedStatus,I=e.disableNotification,S=e.isMentioned,C=e.isStatusMessage,T=e.readReceiptInfo,E=e.pushConfig,y=e.messageId;return v||(v=_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ReceivedStatus.UNREAD),{messageType:o,channelId:n||"",content:a,senderUserId:r,targetId:s,conversationType:t,sentTime:c,receivedTime:u,messageUId:d,messageDirection:l,isPersited:g,isCounted:f,isOffLineMessage:m,isMentioned:S,disableNotification:I,isStatusMessage:C,canIncludeExpansion:h,expansion:p,receivedStatus:v,readReceiptInfo:T,pushConfig:E,messageId:y}}!function(e){e.CONNECTING="CONNECTING",e.CONNECTED="CONNECTED",e.DISCONNECT="DISCONNECT",e.SUSPEND="SUSPEND",e.MESSAGES="MESSAGES",e.READ_RECEIPT_RECEIVED="READ_RECEIPT_RECEIVED",e.MESSAGE_RECEIPT_REQUEST="MESSAGE_RECEIPT_REQUEST",e.MESSAGE_RECEIPT_RESPONSE="MESSAGE_RECEIPT_RESPONSE",e.CONVERSATION="CONVERSATION",e.CHATROOM="CHATROOM",e.EXPANSION="EXPANSION",e.PULL_OFFLINE_MESSAGE_FINISHED="PULL_OFFLINE_MESSAGE_FINISHED",e.TAG="TAG",e.CONVERSATION_TAG="CONVERSATION_TAG",e.TYPING_STATUS="TYPING_STATUS",e.MESSAGE_BLOCKED="MESSAGE_BLOCKED"}(U||(U={}));var ee,te=function(e){function t(n){var o=e.call(this)||this;if(t.imClient)return w.error("Please do not repeatedly perform the init method"),t.imClient;(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.navigators",n.navigators,(function(e){return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isArray)(e)&&(0===e.length||e.every(_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isHttpUrl))}));var a=null==n?void 0:n.connectType;return a?_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.CONNECTION_TYPE.WEBSOCKET!==a&&_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.CONNECTION_TYPE.COMET!==a&&(w.warn("RongIMLib connectionType must be "+_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.CONNECTION_TYPE.WEBSOCKET+" or "+_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.CONNECTION_TYPE.COMET),a=_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.CONNECTION_TYPE.WEBSOCKET):a=_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.CONNECTION_TYPE.WEBSOCKET,o._context=_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.APIContext.init($,{appkey:n.appkey,apiVersion:"5.1.2",navigators:n.navigators||[],miniCMPProxy:n.customCMP||[],connectionType:a,logLevel:n.logLevel,logStdout:n.logStdout,indexDBSwitch:n.indexDBSwitch,checkCA:n.checkCA}),o.watch(),t.imClient=o,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}y(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),Object.defineProperty(t.prototype,"context",{get:function(){if(!this._context)throw new Error("Please perform the init method!");return this._context},enumerable:!1,configurable:!0}),t.prototype.watch=function(){var e=this,t={onConnecting:function(){e.emit(U.CONNECTING)},onConnected:function(){e.emit(U.CONNECTED)},onDisconnect:function(t){e.emit(U.DISCONNECT,t)},onSuspend:function(t){e.emit(U.SUSPEND,t)},batchMessage:function(t){e.emit(U.MESSAGES,{messages:t.map((function(e){return Z(e)}))})},typingState:function(t){e.emit(U.TYPING_STATUS,{status:t})},readReceiptReceived:function(t,n,o){e.emit(U.READ_RECEIPT_RECEIVED,{conversation:t,messageUId:n,sentTime:o})},messageReceiptRequest:function(t,n,o){e.emit(U.MESSAGE_RECEIPT_REQUEST,{conversation:t,messageUId:n,senderUserId:o})},messageReceiptResponse:function(t,n,o){e.emit(U.MESSAGE_RECEIPT_RESPONSE,{conversation:t,receivedUserId:n,messageUIdList:o})},conversationState:function(t){var n=t.map((function(e){return{conversation:{conversationType:e.conversationType,latestMessage:e.latestMessage?Z(e.latestMessage):null,targetId:e.targetId,unreadMessageCount:e.unreadMessageCount,hasMentioned:e.hasMentioned,mentionedInfo:e.mentionedInfo,lastUnreadTime:e.lastUnreadTime,notificationStatus:e.notificationStatus,isTop:e.isTop,channelId:e.channelId,unreadMentionedCount:e.unreadMentionedCount},updatedItems:e.updatedItems}}));e.emit(U.CONVERSATION,{conversationList:n})},chatroomState:function(t){e.emit(U.CHATROOM,t)},expansion:function(t){e.emit(U.EXPANSION,t)},pullFinished:function(){e.emit(U.PULL_OFFLINE_MESSAGE_FINISHED)},tag:function(){e.emit(U.TAG)},conversationTagChanged:function(){e.emit(U.CONVERSATION_TAG)},messageBlocked:function(t){e.emit(U.MESSAGE_BLOCKED,t)}};this.context.assignWatcher(t)},t}(_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.EventEmitter),ne={TIMEOUT:{code:-1,msg:"Network timeout"},SDK_INTERNAL_ERROR:{code:-2,msg:"SDK internal error"},PARAMETER_ERROR:{code:-3,msg:"Please check the parameters, the {param} expected a value of {expect} but received {current}"},REJECTED_BY_BLACKLIST:{code:405,msg:"Blacklisted by the other party"},SEND_TOO_FAST:{code:20604,msg:"Sending messages too quickly"},NOT_IN_GROUP:{code:22406,msg:"Not in group"},FORBIDDEN_IN_GROUP:{code:22408,msg:"Forbbiden from speaking in the group"},NOT_IN_CHATROOM:{code:23406,msg:"Not in chatRoom"},FORBIDDEN_IN_CHATROOM:{code:23408,msg:"Forbbiden from speaking in the chatRoom"},KICKED_FROM_CHATROOM:{code:23409,msg:"Kicked out and forbbiden from joining the chatRoom"},CHATROOM_NOT_EXIST:{code:23410,msg:"ChatRoom does not exist"},CHATROOM_IS_FULL:{code:23411,msg:"ChatRoom members exceeded"},PARAMETER_INVALID_CHATROOM:{code:23412,msg:"Invalid chatRoom parameters"},ROAMING_SERVICE_UNAVAILABLE_CHATROOM:{code:23414,msg:"ChatRoom message roaming service is not open, Please go to the developer to open this service"},RECALLMESSAGE_PARAMETER_INVALID:{code:25101,msg:"Invalid recall message parameter"},ROAMING_SERVICE_UNAVAILABLE_MESSAGE:{code:25102,msg:"Single group chat roaming service is not open, Please go to the developer to open this service"},PUSHSETTING_PARAMETER_INVALID:{code:26001,msg:"Invalid push parameter"},OPERATION_BLOCKED:{code:20605,msg:"Operation is blocked"},OPERATION_NOT_SUPPORT:{code:20606,msg:"Operation is not supported"},MSG_BLOCKED_SENSITIVE_WORD:{code:21501,msg:"The sent message contains sensitive words"},REPLACED_SENSITIVE_WORD:{code:21502,msg:"Sensitive words in the message have been replaced"},NOT_CONNECTED:{code:30001,msg:"Please connect successfully first"},NAVI_REQUEST_ERROR:{code:30007,msg:"Navigation http request failed"},CMP_REQUEST_ERROR:{code:30010,msg:"CMP sniff http request failed"},CONN_APPKEY_FAKE:{code:31002,msg:"Your appkey is fake"},CONN_MINI_SERVICE_NOT_OPEN:{code:31003,msg:"Mini program service is not open, Please go to the developer to open this service"},CONN_ACK_TIMEOUT:{code:31e3,msg:"Connection ACK timeout"},CONN_TOKEN_INCORRECT:{code:31004,msg:"Your token is not valid or expired"},CONN_NOT_AUTHRORIZED:{code:31005,msg:"AppKey and Token do not match"},CONN_REDIRECTED:{code:31006,msg:"Connection redirection"},CONN_APP_BLOCKED_OR_DELETED:{code:31008,msg:"AppKey is banned or deleted"},CONN_USER_BLOCKED:{code:31009,msg:"User blocked"},CONN_DOMAIN_INCORRECT:{code:31012,msg:"Connect domain error, Please check the set security domain"},ROAMING_SERVICE_UNAVAILABLE:{code:33007,msg:"Roaming service cloud is not open, Please go to the developer to open this service"},RC_CONNECTION_EXIST:{code:34001,msg:"Connection already exists"},CHATROOM_KV_EXCEED:{code:23423,msg:"ChatRoom KV setting exceeds maximum"},CHATROOM_KV_OVERWRITE_INVALID:{code:23424,msg:"ChatRoom KV already exists"},CHATROOM_KV_STORE_NOT_OPEN:{code:23426,msg:"ChatRoom KV storage service is not open, Please go to the developer to open this service"},CHATROOM_KEY_NOT_EXIST:{code:23427,msg:"ChatRoom key does not exist"},MSG_KV_NOT_SUPPORT:{code:34008,msg:"The message cannot be extended"},SEND_MESSAGE_KV_FAIL:{code:34009,msg:"Sending RC expansion message fail"},EXPANSION_LIMIT_EXCEET:{code:34010,msg:"The message expansion size is beyond the limit"},ILLGAL_PARAMS:{code:33003,msg:"Incorrect parameters passed in while calling the interface"},UPLOAD_FILE_FAILED:{code:35020,msg:"File upload failed"},CHATROOM_KV_STORE_NOT_ALL_SUCCESS:{code:23428,msg:"Chatroom kv store not all success"},CHATROOM_KV_STORE_OUT_LIMIT:{code:23429,msg:"Chatroom kv\'s length is out of limit"},TAG_EXISTS:{code:33101,msg:"The tag already exists"},TAG_NOT_EXIST:{code:33100,msg:"The tag does not exist"},NOT_SUPPORT:{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT,msg:"The method is not supported in a browser!"}},oe={},ae={};for(var re in ne){var ie=ne[re],se=ie.code;oe[se]=re,ae[se]=ie}ne.ROAMING_SERVICE_UNAVAILABLE.code;var ce=function(e){ee=ee||new te(e)};function ue(e,t){return null==ee?void 0:ee.context.install(e,t)}function de(e,t){return R(this,void 0,void 0,(function(){var n;return O(this,(function(o){switch(o.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("token",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),w.warn("RongIMLib Version: 5.1.2, Commit: 5f8c7ef795a4271181ff3bc26e8b9003e3693988"),[4,ee.context.connect(e,!1,t)];case 1:return(n=o.sent()).code===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:n.code,data:{userId:n.userId}}]:[2,{code:n.code,msg:oe[n.code]}]}}))}))}function le(){return ee.context.disconnect()}function ge(){return ee.context.getConnectionStatus()}function fe(){return ee.context.getServerTime()}function me(){return ee.context.getCurrentUserId()}function he(e,t,n){ee.on(e,t,n)}function pe(e,t,n){ee.once(e,t,n)}function ve(e,t,n){ee.off(e,t,n)}function Ie(e){ee.removeAll(e)}function Se(){ee.clear()}function Ce(e,t){_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.VersionManage.add(e,t)}function Te(e,t){return R(this,void 0,void 0,(function(){var n,o,a,i;return O(this,(function(s){switch(s.label){case 0:return w.debug("get conversation list ->"),[4,te.imClient.context.getConversationList(null==e?void 0:e.count,void 0,null==e?void 0:e.startTime,null==e?void 0:e.order,t)];case 1:return n=s.sent(),o=n.code,a=n.data,o===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS&&a?(i=a.map((function(e){return function(e){var t=e.conversationType,n=e.targetId,o=e.latestMessage,a=e.unreadMessageCount,r=e.hasMentioned,i=e.mentionedInfo,s=e.lastUnreadTime,c=e.notificationStatus,u=e.isTop,d=e.channelId,l=e.unreadMentionedCount;return{conversationType:t,targetId:n,latestMessage:o&&Z(o),unreadMessageCount:a,hasMentioned:r,mentionedInfo:r?{type:null==i?void 0:i.type,userIdList:null==i?void 0:i.userIdList}:void 0,lastUnreadTime:s,notificationStatus:c,isTop:u,channelId:d,unreadMentionedCount:l}}(e)})),[2,{code:0,data:i}]):(w.warn("get conversation list fail ->"+o+":"+oe[o]),[2,{code:o,msg:oe[o]}])}}))}))}function Ee(e){return R(this,void 0,void 0,(function(){var t,n;return O(this,(function(o){switch(o.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.conversationType",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isValidConversationType,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.targetId",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.channelId",e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),[4,te.imClient.context.removeConversation(e.conversationType,e.targetId,e.channelId)];case 1:return t=o.sent(),n="conversationType:"+e.conversationType+",targetId:"+e.targetId,w.debug("destroy conversation ->"+n),t!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(w.warn("destroy conversation fail ->"+t+":"+oe[t]+","+n),[2,{code:t,msg:oe[t]}]):[2,{code:t}]}}))}))}function ye(e){return R(this,void 0,void 0,(function(){var t,n,o,a;return O(this,(function(i){switch(i.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.conversationType",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isValidConversationType,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.targetId",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.channelId",e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),[4,te.imClient.context.getConversationMessageDraft(e.conversationType,e.targetId,e.channelId)];case 1:return t=i.sent(),n=t.code,o=t.data,a="conversationType:"+e.conversationType+",targetId:"+e.targetId,w.debug("get draft ->"+a),n===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:n,data:o||""}]:(w.warn("get draft fail ->"+n+":"+oe[n]+","+a),[2,{code:n,msg:oe[n]}])}}))}))}function Ne(e,t){return R(this,void 0,void 0,(function(){var n,o;return O(this,(function(a){switch(a.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.conversationType",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isValidConversationType,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.targetId",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.channelId",e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("draft",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),n="conversationType:"+e.conversationType+",targetId:"+e.targetId,w.debug("set draft ->"+n),[4,te.imClient.context.saveConversationMessageDraft(e.conversationType,e.targetId,t,e.channelId)];case 1:return(o=a.sent())===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:o}]:(w.warn("set draft fail ->"+o+":"+oe[o]+","+n),[2,{code:o,msg:oe[o]}])}}))}))}function Re(e){return R(this,void 0,void 0,(function(){var t,n;return O(this,(function(o){switch(o.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.conversationType",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isValidConversationType,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.targetId",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.channelId",e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),t="conversationType:"+e.conversationType+",targetId:"+e.targetId,w.debug("delete draft  ->"+t),[4,te.imClient.context.clearConversationMessageDraft(e.conversationType,e.targetId,e.channelId)];case 1:return(n=o.sent())===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:n}]:(w.warn("delete draft fail ->"+n+":"+oe[n]+","+t),[2,{code:n,msg:oe[n]}])}}))}))}function Oe(e,t){return R(this,void 0,void 0,(function(){var n,o,a,i,c,u;return O(this,(function(d){switch(d.label){case 0:if(w.debug("get total unread count -> ConversationType:"+JSON.stringify(t)+" includeMuted:"+e),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("includeMuted",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.BOOLEAN,!1),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("conversationTypes",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.ARRAY,!1),t)for(n=0,o=t;n<o.length;n++)a=o[n],(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("conversationType",a,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isValidConversationType);return[4,te.imClient.context.getTotalUnreadCount("",t,e)];case 1:return i=d.sent(),c=i.code,u=i.data,c===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:c,data:u}]:(w.warn("getTotalUnreadCount fail ->"+c+":"+oe[c]),[2,{code:c,msg:oe[c]}])}}))}))}function we(e){return R(this,void 0,void 0,(function(){var t,n,o,a;return O(this,(function(i){switch(i.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.conversationType",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isValidConversationType,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.targetId",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.channelId",e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),[4,te.imClient.context.getUnreadCount(e.conversationType,e.targetId,e.channelId)];case 1:return t=i.sent(),n=t.code,o=t.data,a="conversationType:"+e.conversationType+",targetId:"+e.targetId,w.debug("get unreadCount ->"+a),n===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:n,data:o}]:(w.warn("get unreadCount fail ->"+n+":"+oe[n]+","+a),[2,{code:n,msg:oe[n]}])}}))}))}function Me(e){return R(this,void 0,void 0,(function(){var t,n;return O(this,(function(o){switch(o.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.conversationType",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isValidConversationType,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.targetId",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.channelId",e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),[4,te.imClient.context.clearUnreadCount(e.conversationType,e.targetId,e.channelId)];case 1:return t=o.sent(),n="conversationType:"+e.conversationType+",targetId:"+e.targetId,w.debug("clear unreadMsgNum ->"+n),t!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(w.warn("clear unreadMsgNum fail ->"+t+":"+oe[t]+","+n),[2,{code:t,msg:oe[t]}]):[2,{code:t}]}}))}))}function _e(){return R(this,void 0,void 0,(function(){return O(this,(function(e){switch(e.label){case 0:return[4,te.imClient.context.clearAllUnreadCount()];case 1:return[2,{code:e.sent()}]}}))}))}function Ue(e,t){return R(this,void 0,void 0,(function(){var n,o;return O(this,(function(a){switch(a.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.conversationType",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isValidConversationType,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.targetId",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.channelId",e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("notificationStatus",t,(function(e){return 1===e||2===e}),!0),n="conversationType:"+e.conversationType+",targetId:"+e.targetId,w.debug("set conversation status ->"+n),[4,te.imClient.context.setConversationStatus(e.conversationType,e.targetId,void 0,t,e.channelId)];case 1:return(o=a.sent())!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(w.warn("set conversation status fail ->"+o+":"+oe[o]+","+n),[2,{code:o,msg:oe[o]}]):[2,{code:o}]}}))}))}function xe(e){return R(this,void 0,void 0,(function(){var t,n,o;return O(this,(function(a){switch(a.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.conversationType",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isValidConversationType,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.targetId",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.channelId",e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),w.info("getConversationNotificationStatus ->targetId:"+e.targetId+",conversationType:"+e.conversationType),[4,te.imClient.context.getConversationNotificationStatus(e.conversationType,e.targetId,e.channelId)];case 1:return t=a.sent(),n=t.code,o=t.data,n===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:n,data:o}]:(w.warn("getConversationNotificationStatus ->code:"+n+",targetId:"+e.targetId),[2,{code:n,msg:oe[n]}])}}))}))}function be(){return R(this,void 0,void 0,(function(){var e,t,n;return O(this,(function(o){switch(o.label){case 0:return[4,te.imClient.context.getBlockConversationList()];case 1:return e=o.sent(),t=e.code,n=e.data,[2,{code:t,data:n}]}}))}))}function Ae(e,t){return void 0===t&&(t=!0),R(this,void 0,void 0,(function(){var n,o;return O(this,(function(a){switch(a.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.type",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isValidConversationType,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.targetId",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.channelId",e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),n="conversationType:"+e.conversationType+",targetId:"+e.targetId,w.debug("set conversation status ->"+n),[4,te.imClient.context.setConversationStatus(e.conversationType,e.targetId,t,void 0,e.channelId)];case 1:return(o=a.sent())!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(w.warn("set conversation status fail ->"+o+":"+oe[o]+","+n),[2,{code:o,msg:oe[o]}]):[2,{code:o}]}}))}))}function Pe(){return R(this,void 0,void 0,(function(){var e,t,n;return O(this,(function(o){switch(o.label){case 0:return[4,te.imClient.context.getTopConversationList()];case 1:return e=o.sent(),t=e.code,n=e.data,[2,{code:t,data:n}]}}))}))}function Le(e){return R(this,void 0,void 0,(function(){return O(this,(function(t){return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.targetId",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.channelId",e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),w.debug("getUnreadMentionedCount"+e.targetId+",channelId:"+e.channelId),[2,te.imClient.context.getUnreadMentionedCount(e)]}))}))}function De(){return R(this,void 0,void 0,(function(){return O(this,(function(e){return w.debug("getAllUnreadMentionedCount"),[2,te.imClient.context.getAllUnreadMentionedCount()]}))}))}function He(){return R(this,void 0,void 0,(function(){return O(this,(function(e){return[2,te.imClient.context.getAllConversationState()]}))}))}var ke=function(e){(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.key",e.key,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.value",e.value,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.isAutoDelete",e.isAutoDelete,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.BOOLEAN),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.isSendNotification",e.isSendNotification,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.BOOLEAN),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.notificationExtra",e.notificationExtra,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING)},Ge=function(e){(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.key",e.key,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.isSendNotification",e.isSendNotification,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.BOOLEAN),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.notificationExtra",e.notificationExtra,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING)};function Be(e,t){return R(this,void 0,void 0,(function(){var n,o;return O(this,(function(a){switch(a.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.count",t.count,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),n="id:"+e,w.debug("join chatroom ->"+n),[4,te.imClient.context.joinChatroom(e,t.count)];case 1:return(o=a.sent())!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(w.warn("join chatroom fail ->code+:"+oe[o]+","+n),[2,{code:o,msg:oe[o]}]):[2,{code:o}]}}))}))}function qe(e,t){return R(this,void 0,void 0,(function(){var n,o;return O(this,(function(a){switch(a.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.count",t.count,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),n="id:"+e,w.debug("join exist chatroom ->"+n),[4,te.imClient.context.joinExistChatroom(e,t.count)];case 1:return(o=a.sent())!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(w.warn("join exist chatroom fail ->code:"+oe[o]+","+n),[2,{code:o,msg:oe[o]}]):[2,{code:o}]}}))}))}function Fe(e){return R(this,void 0,void 0,(function(){var t,n;return O(this,(function(o){switch(o.label){case 0:return t="id:"+e,w.debug("quit chatroom ->"+t),[4,te.imClient.context.quitChatroom(e)];case 1:return(n=o.sent())!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(w.warn("quit chatroom fail ->code+:"+oe[n]+","+t),[2,{code:n,msg:oe[n]}]):[2,{code:n}]}}))}))}function Ve(e,t){return R(this,void 0,void 0,(function(){var n,o,a,i;return O(this,(function(c){switch(c.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.count",t.count,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.order",t.order,(function(e){return[0,1,2].includes(e)})),n="id:"+e,w.debug("get chatroom info ->"+n),[4,te.imClient.context.getChatroomInfo(e,t.count,t.order)];case 1:return o=c.sent(),a=o.code,i=o.data,a===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS&&i?[2,{code:a,data:i}]:(w.warn("get chatroom info fail ->code+:"+oe[a]+","+n),[2,{code:a,msg:oe[a]}])}}))}))}function ze(e,t){return R(this,void 0,void 0,(function(){var n,o;return O(this,(function(a){switch(a.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("targetId",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),ke(t),n="id:"+e,w.debug("set chatroom entry->"+n),[4,te.imClient.context.setChatroomEntry(e,t)];case 1:return(o=a.sent())!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(w.warn("set chatroom entry fail ->code+:"+oe[o]+","+n),[2,{code:o,msg:oe[o]}]):[2,{code:o}]}}))}))}function Ke(e,t){return R(this,void 0,void 0,(function(){var n,o,a,i;return O(this,(function(c){switch(c.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("targetId",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),function(e){e.entries.forEach((function(e){(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("entry.key",e.key,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("entry.value",e.value,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0)})),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.isAutoDelete",e.isAutoDelete,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.BOOLEAN),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.notificationExtra",e.notificationExtra,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING)}(t),t.entries.length>10?[2,ne.CHATROOM_KV_STORE_OUT_LIMIT]:(n="id:"+e,w.debug("set chatroom entry->"+n),[4,te.imClient.context.setChatroomEntries(e,t)]);case 1:return o=c.sent(),a=o.code,i=o.data,a!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(w.warn("set chatroom entry fail ->code+:"+oe[a]+","+n),[2,{code:a,msg:oe[a],data:i}]):[2,{code:a}]}}))}))}function je(e,t){return R(this,void 0,void 0,(function(){var n,o;return O(this,(function(a){switch(a.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("targetId",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),ke(t),n="id:"+e,w.debug("force set chatroom entry ->"+n),[4,te.imClient.context.forceSetChatroomEntry(e,t)];case 1:return(o=a.sent())!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(w.warn("force set chatroom entry fail ->code+:"+oe[o]+","+n),[2,{code:o,msg:oe[o]}]):[2,{code:o}]}}))}))}function Xe(e,t){return R(this,void 0,void 0,(function(){var n,o;return O(this,(function(a){switch(a.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("targetId",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),Ge(t),n="id:"+e,w.debug("remove chatroom entry->"+n),[4,te.imClient.context.removeChatroomEntry(e,t)];case 1:return(o=a.sent())!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(w.warn("remove chatroom entry fail ->code+:"+oe[o]+","+n),[2,{code:o,msg:oe[o]}]):[2,{code:o}]}}))}))}function We(e,t){return R(this,void 0,void 0,(function(){var n,o,a,i,c;return O(this,(function(u){switch(u.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("targetId",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),function(e){e.entries.forEach((function(e){(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("key",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0)})),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.notificationExtra",e.notificationExtra,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING)}(t),n="id:"+e,w.debug("remove chatroom entry->"+n),(o=Object.assign({},t)).entries=t.entries.map((function(e){return{key:e}})),[4,te.imClient.context.removeChatroomEntries(e,o)];case 1:return a=u.sent(),i=a.code,c=a.data,i!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(w.warn("remove chatroom entry fail ->code+:"+oe[i]+","+n),[2,{code:i,msg:oe[i],data:c}]):[2,{code:i}]}}))}))}function Je(e,t){return R(this,void 0,void 0,(function(){var n,o;return O(this,(function(a){switch(a.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("targetId",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),Ge(t),n="id:"+e,w.debug("force remove chatroom entry ->"+n),[4,te.imClient.context.forceRemoveChatroomEntry(e,t)];case 1:return(o=a.sent())!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(w.warn("force remove chatroom entry fail ->code+:"+oe[o]+","+n),[2,{code:o,msg:oe[o]}]):[2,{code:o}]}}))}))}function Ye(e,t){return R(this,void 0,void 0,(function(){var n,o,a,i;return O(this,(function(c){switch(c.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("key",t,(function(e){return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isString)(e)&&/[\\w+=-]+/.test(e)&&e.length<=128}),!0),n="id:"+e,w.debug("get chatroom entry->"+n),[4,te.imClient.context.getChatroomEntry(e,t)];case 1:return o=c.sent(),a=o.code,i=o.data,a===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS&&i?[2,{code:a,data:i}]:(w.warn("get chatroom entry fail ->code+:"+oe[a]+","+n),[2,{code:a,msg:oe[a]}])}}))}))}function Qe(e){return R(this,void 0,void 0,(function(){var t,n,o,a;return O(this,(function(i){switch(i.label){case 0:return t="id:"+e,w.debug("get all chatroom entries->"+t),[4,te.imClient.context.getAllChatroomEntries(e)];case 1:return n=i.sent(),o=n.code,a=n.data,o===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS&&a?[2,{code:o,data:a}]:(w.warn("get all chatroom entries fail ->code+:"+oe[o]+","+t),[2,{code:o,msg:oe[o]}])}}))}))}function $e(e,t){return R(this,void 0,void 0,(function(){var n,o,a,i,c;return O(this,(function(u){switch(u.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.timestamp",t.timestamp,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.count",t.count,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.order",t.order,(function(e){return 0===e||1===e})),n="id:"+e,w.debug("get chatroom history message->"+n),[4,te.imClient.context.getChatRoomHistoryMessages(e,t.count,t.order,t.timestamp)];case 1:return o=u.sent(),a=o.code,i=o.data,a===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS&&i?(c=i.list.map((function(e){return Z(e)})),[2,{code:a,data:{list:c,hasMore:!!i.hasMore}}]):(w.warn("get chatroom history message fail ->code+:"+oe[a]+","+n),[2,{code:a,msg:oe[a]}])}}))}))}var Ze=function(e,t,n,o){void 0===n&&(n=!0),void 0===o&&(o=!0),this.messageType=e,this.content=t,this.isPersited=n,this.isCounted=o};function et(e,t,n){void 0===t&&(t=!0),void 0===n&&(n=!0);return function(o){return new Ze(e,o,t,n)}}var nt,ot,at=et("RC:ImgMsg"),rt=et("RC:HQVCMsg"),it=et("RC:SightMsg"),st=et("RC:TxtMsg"),ct=et("RC:CombineMsg"),ut=et("RC:FileMsg"),dt=et("RC:GIFMsg"),lt=et("RC:VcMsg"),gt=et("RC:LBSMsg"),ft=et("RC:ReferenceMsg"),mt=et("RC:ImgTextMsg"),ht={qiniu:function(e,t,n,o){var a,r="https://"+t.uploadHost.qiniu;a=St()+pt[0][1]||r,pt.shift();var i=new XMLHttpRequest;i.upload&&t.support_options&&(i.upload.onprogress=function(e){n.onProgress(e.loaded,e.total)});i.onreadystatechange=function(){if(4===i.readyState){var a=i.responseText||"{}";(a=JSON.parse(a)).filename=t.uniqueValue,a.uploadMethod=_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.UploadMethod?_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.UploadMethod.QINIU:"",200===i.status?n.onCompleted(a):pt.length?ht[pt[0][0]](e,t,n,o):n.onError("upload fail")}},t.isChunk&&(a=function(e,t){var n="";It(t,(function(e,t){"token"!==e&&(n+=(n?"&":"")+encodeURIComponent(e)+"="+encodeURIComponent(t))})),n&&(e+=(e.indexOf("?")>0?"&":"?")+n);return e}(a+="/mkblk/"+e.size,t.multi_parmas));i.open(t.method,a,!0),n.onOpen(i),t.stream&&i.setRequestHeader("authorization","UpToken "+t.multi_parmas.token);It(t.headers,(function(e,t){i.setRequestHeader(e,t)})),i.send(e)},baidu:function(e,t,n,o){if(console.log(o,t),o.size>vt)throw new Error("the file size is over 5GB!");var a=t||{};t=t||ot;var r=new XMLHttpRequest,i=St();if(!a.uploadHost.bos&&!a.bosUploadPath)return;var s=i+pt[0][1]+a.bosUploadPath;pt.shift();var c=a.bosHeader||{},u={filename:t.uniqueValue||o.uniqueName,name:o.name,downloadUrl:s,isBosRes:!0};r.upload&&t.support_options&&(r.upload.onprogress=function(e){n.onProgress(e.loaded,e.total,!0)});r.onreadystatechange=function(){if(4===r.readyState){var a=r.responseText||"{}";if((a=JSON.parse(a)).filename=t.uniqueValue,200===r.status){n.onCompleted(u,!0)}else pt.length?ht[pt[0][0]](e,t,n,o):n.onError("upload fail")}},r.open(t.method,s,!0),r.setRequestHeader("authorization",c.bosToken),r.setRequestHeader("x-bce-date",c.bosDate),r.send(o)},aliyun:function(e,t,n,o){if(o.size>vt)throw new Error("the file size is over 5GB!");const a=new FormData;a.set("file",e.get("file")),a.set("key",e.get("key")),a.set("token",e.get("token"));const r=pt[0][1];pt.shift(),e=e||nt,t=(t=t||{})||ot;var i=new XMLHttpRequest,s=St()+t.ossBucketName+"."+r;i.upload&&t.support_options&&(i.upload.onprogress=function(e){n.onProgress(e.loaded,e.total)});i.onreadystatechange=function(){if(4===i.readyState){var e=i.responseText||"{}";(e=JSON.parse(e)).name=t.uniqueValue,e.filename=t.uploadFileName,e.uploadMethod=_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.UploadMethod?_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.UploadMethod.ALI:"",200===i.status?n.onCompleted(e):pt.length?ht[pt[0][0]](a,t,n,o):n.onError("upload fail")}},i.open(t.method,s,!0),console.log("ali:url",s);var c=t.aliHeader||{};e.set("OSSAccessKeyId",c.osskeyId),e.set("policy",c.ossPolicy),e.set("Signature",c.ossSign),e.set("success_action_status",200),e.delete("key"),e.append("key",t.uploadFileName),e.delete("file"),e.append("file",o),i.send(e)},s3:function(e,t,n,o){var a=new FormData,r=new XMLHttpRequest,i=St();const s=pt[0][1];var c=i+t.s3BucketName+"."+s;console.log("uploadS3:url",c),pt.shift(),r.upload&&t.support_options&&(r.upload.onprogress=function(e){n.onProgress(e.loaded,e.total)});r.onreadystatechange=function(){if(4===r.readyState){var a=r.responseText||"{}";if((a=JSON.parse(a)).name=t.uniqueValue,a.filename=t.uploadFileName,a.uploadMethod=_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.UploadMethod.AWS,console.log("UploadMethod:",_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.UploadMethod),200===r.status||204===r.status)n.onCompleted(a);else if(pt.length){const a=new FormData;a.set("file",e.get("file")),a.set("key",e.get("key")),a.set("token",e.get("token")),ht[pt[0][0]](a,t,n,o)}else n.onError("upload fail")}},r.open(t.method,c,!0);var u=t?t.s3Header:{},d=o&&o.type;"text/html"===d?a.set("Content-Disposition","inline;"):a.set("Content-Disposition","attachment;");a.set("Content-Type",d),a.set("x-amz-credential",u.s3Credential),a.set("x-amz-algorithm",u.s3Algorithm),a.set("x-amz-date",u.s3Date),a.set("policy",u.s3Policy),a.set("x-amz-signature",u.s3Signature),a.set("key",t.uploadFileName),a.set("file",o),r.send(a)},stc:function(e,t,n,o){new FormData;var a=new XMLHttpRequest;St();var r="https://"+pt[0][1]+"/"+t.stcBucketName+"/"+t.uploadFileName;pt.shift(),a.upload&&t.support_options&&(a.upload.onprogress=function(e){n.onProgress(e.loaded,e.total)});a.onreadystatechange=function(){if(4===a.readyState){var r=a.responseText||"{}";if((r=JSON.parse(r)).name=t.uniqueValue,r.filename=t.uploadFileName,r.uploadMethod=_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.UploadMethod?_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.UploadMethod.STC:"",200===a.status||204===a.status)n.onCompleted(r);else if(pt.length){const a=new FormData;a.set("file",e.get("file")),a.set("key",e.get("key")),a.set("token",e.get("token")),ht[pt[0][0]](a,t,n,o)}else n.onError("upload fail")}},a.open("PUT",r,!0);var i=t?t.stcHeader:{};a.setRequestHeader("Content-Type",o.type),"text/html"===o.type?a.setRequestHeader("Content-Disposition","inline;"):a.setRequestHeader("Content-Disposition","attachment;");a.setRequestHeader("Authorization",i.stcAuthorization),a.setRequestHeader("x-amz-content-sha256",i.stcContentSha256),a.setRequestHeader("x-amz-date",i.stcDate),a.send(o)}},pt=[],vt=5368709120;function It(e,t){for(var n in e)t(n,e[n])}function St(){var e="https://";return"http:"!==location.protocol&&"file:"!==location.protocol||(e="http://"),e}function Ct(e,t,n){var o,a,r=e&&e.type||"text/plain",i=r.indexOf("image")>-1?1:4,s=Math.ceil(e.size/t.stc_chunk_size),c=t&&JSON.parse(t.ossConfig?t.ossConfig:"");Array.isArray(c)||(c=[]);var u=c.find((e=>Object.keys(e).includes("stc"))),d="uploads";te.imClient.getFileToken(i,o,"POST",d).then((function(e){o=e.fileName,a="https://"+u.stc+"/"+t.stcBucketName+"/"+o,console.log("uploadStcMultipart:url",a);var i=new XMLHttpRequest;i.open("POST",a+"?"+d,!0),"text/html"===r?i.setRequestHeader("Content-Disposition","inline;"):i.setRequestHeader("Content-Disposition","attacshment;"),i.setRequestHeader("Authorization",e&&e.stcAuthorization),i.setRequestHeader("x-amz-content-sha256",e&&e.stcContentSha256),i.setRequestHeader("x-amz-date",e&&e.stcDate),i.setRequestHeader("Content-Type",r),i.send(),i.onreadystatechange=function(e){if(4===i.readyState){var t=i.response.match(/(?:<UploadId>)(\\S*?)(?:<\\/UploadId>)/);console.log("uploadId",t),200===i.status||204===i.status?function(e){for(var t=[],n=1;n<=s;n++)t.push(m(e,n));f(e,t)}(Array.isArray(t)&&t[1]):n.onError("uploadStcMultipart:did not get uploadId")}}}),(function(e){n.onError("uploadStcMultipart:"+e)}));var l=[],g=new Map;function f(c,u){u&&Array.isArray(u)&&0!==u.length&&Promise.all(u).then((()=>{var u="uploadId="+c;if(g.size===s)te.imClient.context.getFileToken(i,o,"POST",u).then((function(o){console.log("onSuccess",o),console.log("onSuccess:uploadId",c);var i=new XMLHttpRequest;i.open("POST",a+"?"+u,!0),i.setRequestHeader("Authorization",o&&o.stcAuthorization),i.setRequestHeader("x-amz-content-sha256",o&&o.stcContentSha256),i.setRequestHeader("x-amz-date",o&&o.stcDate),i.setRequestHeader("Content-Type",r);var s="<CompleteMultipartUpload xmlns=\'http://s3.amazonaws.com/doc/2006-03-01/\'>",d=Array.from(g.keys()||[]).sort(((e,t)=>e-t));console.log("keys",d),d.map((e=>{s+=`<Part><ETag>${g.get(e)}</ETag><PartNumber>${e}</PartNumber></Part>`})),s+="</CompleteMultipartUpload>",i.send(s),console.log("xml",s),i.onreadystatechange=function(){if(4===i.readyState)if(200===i.status||204===i.status){var o={};o.name=e.name,o.filename=t.uploadFileName,o.uploadMethod=_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.UploadMethod.STC,n.onCompleted(o)}else n.onError("uploadStcMultipart:upload does not end")}}),(function(e){n.onError("uploadStcMultipart:"+e)}));else{var d=[];for(var h of l)d.push(m(c,h));f(c,d)}}),(e=>{console.error(e),n.onError("uploadStcMultipart: chunkFiles upload failed and those will reupload");var t=[];for(var o of l)t.push(m(c,o));f(c,t)}))}function m(n,s){return new Promise(((c,u)=>{var d="partNumber="+s+"&uploadId="+n;te.imClient.context.getFileToken(i,o,"PUT",d).then((function(n){console.log("signature "+s+" onSuccess",n);var o=e&&e.slice((s-1)*t.stc_chunk_size,s*t.stc_chunk_size);console.log("fileChunk:size",o.size);var i=new XMLHttpRequest;i.open("PUT",a+"?"+d,!0),i.setRequestHeader("Authorization",n&&n.stcAuthorization),i.setRequestHeader("x-amz-content-sha256",n&&n.stcContentSha256),i.setRequestHeader("x-amz-date",n&&n.stcDate),i.setRequestHeader("Content-Type",r),i.send(o),i.onreadystatechange=function(){if(4===i.readyState)if(200===i.status||204===i.status){var e=i.getResponseHeader("etag");console.log("etag:"+s,e),g.set(s,e),c(e)}else l.includes(s)||l.push(s),u(s)}}),(function(e){console.log("getETags:签名验证失败"),l.includes(s)||l.push(s),u(s)}))}))}}var Tt={form:function(e,t){var n=new FormData;if(t.unique_key){var o=e.name.substr(e.name.lastIndexOf(".")),a=Et()+o;n.append(t.unique_key,a),t.uniqueValue=a}return n.append(t.file_data_name,e),yt(t.multi_parmas,(function(e,t){n.append(e,t)})),n},json:function(e,t){var n={};if(t.unique_key){var o=e.name.substr(e.name.lastIndexOf(".")),a=Et()+o;n[t.unique_key]=a,t.uniqueValue=a}return n[t.file_data_name]=e,yt(t.multi_parmas,(function(e,t){n[e]=t})),JSON.stringify(n)},data:function(e,t){return e}};function Et(){var e=(new Date).getTime();return"xxxxxx4xxxyxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))}function yt(e,t){for(var n in e)t(n,e[n])}var Nt,Rt=0;function Ot(e){this.options=function(e){var t={domain:"",method:"POST",file_data_name:"file",unique_key:"key",base64_size:4194304,chunk_size:4194304,bos_chunk_size:4294967296,stc_chunk_size:10485760,headers:{},multi_parmas:{},query:{},support_options:!0,data:Tt.form,genUId:Et};if(!e||!e.domain)throw new Error("domain is null");for(var n in e)t[n]=e[n];return t}(e),this.setOptions=function(e){var t=this;yt(e,(function(e,n){t.options[e]=n}))},console.log("options",e),this.upload=function(e,t){if(e){var n=this;!function(e,t,n){if(nt=e,ot=t,pt=[],t.ossConfig){const e=JSON.parse(t.ossConfig);let n,o,a="";const r=[];e.forEach((e=>{const t=Number(e.p)-1;for(const i in e)"aliyun"===i&&(a=e[i]),"s3"===i&&(n=e[i]),"stc"===i&&(o=e[i]),"p"!==i&&(r[t]=[i,e[i]])})),r.forEach((function(e){e&&pt.push(e)})),e.length!==pt.length&&(pt=[["qiniu",t.domain],["baidu",t.uploadHost.bos],["aliyun",a],["s3",n],["stc",o]])}else pt=[["qiniu",t.domain],["baidu",t.uploadHost.bos]];var o;if(t.ossConfig){var a=t&&JSON.parse(t.ossConfig);Array.isArray(a)||(a=[]),o=a.find((e=>Object.keys(e).includes("stc")))}if(o&&1===parseInt(o.p)&&e.size>=4194304)Ct(e,t,n);else{var r=t.data(e,t);ht[pt[0][0]](r,t,n,e)}}(e,this.options,{onProgress:function(e,n,o){if(Nt=e,o){Nt=Rt+e/n*(n-Rt)}else Rt=Nt;t.onProgress(Nt,n)},onCompleted:function(e){t.onCompleted(e)},onError:function(e){t.onError(e)},onOpen:function(e){n.xhr=e}})}else t.onError("upload file is null.")},this.cancel=function(){this.xhr&&this.xhr.abort()}}var wt={init:function(e){return new Ot(e)},dataType:Tt,resize:function(e,t,n){e.type;var o=document.createElement("canvas"),a=new FileReader;a.readAsDataURL(e),a.onload=function(e){var a=e.target.result,r=new Image;r.src=a;var i=r.width,s=r.height,c=function(e,t){var n=1,o=e.width,a=t.maxWidth||0;a>0&&o>a&&(n=a/o);var r=e.height,i=t.maxHeight||0;if(i>0&&r>i){var s=i/r;n=Math.min(n,s)}var c=t.maxSize||0,u=Math.ceil(e.size/1e3);if(u>c){var d=c/u;n=Math.min(n,d)}return n}({width:i,height:s,size:e.total},t),u=a;c<1&&(u=function(e,t,n){o.width=t,o.height=n,o.getContext("2d").drawImage(e,0,0,t,n);var a="image/jpg";return o.toDataURL(a)}(r,i*c,s*c)),n(u)}}};const Mt=function(e,t,n){var o=document.createElement("canvas"),a=o.getContext("2d"),r=new Image;r.onload=function(){var i=function(e,t,n){var o,a,r,i=e<t,s=0,c=0;return(i?t/e:e/t)>n.scale?(i?(a=100,c=((r=t/(o=e/100))-n.maxHeight)/2):(r=100,s=((a=e/(o=t/100))-n.maxWidth)/2),{w:a,h:r,x:-s,y:-c}):(i?(o=t/n.maxHeight,r=n.maxHeight,a=e/o):(o=e/n.maxWidth,a=n.maxWidth,r=t/o),{w:a,h:r,x:-s,y:-c})}(r.width,r.height,t);o.width=i.w>t.maxWidth?t.maxWidth:i.w,o.height=i.h>t.maxHeight?t.maxHeight:i.h,a.drawImage(r,i.x,i.y,i.w,i.h);try{var s=o.toDataURL(e.type,t.quality),c=new RegExp("^data:image/[^;]+;base64,");s=s.replace(c,""),n(s)}catch(e){throw new Error(e)}},r.src="string"==typeof e?"data:image/jpg;base64,"+e:function(e){var t=window.URL||window.webkitURL;return t?t.createObjectURL(e):""}(e)},_t=function(e,t){var n=e.file,o=e.compress;Mt(n,o,t)},Ut=function(e,t){if(e.getToken)e.getToken((function(n,o){o=o||{},e.multi_parmas||(e.multi_parmas={}),e.multi_parmas.token=n,e.uploadHost||(e.uploadHost={}),e.uploadHost.bos=o.bos,e.ossConfig=o.ossConfig,e.bosHeader||(e.bosHeader={}),e.bosHeader.bosDate=o.bosDate,e.bosHeader.bosToken=o.bosToken,e.bosUploadPath=o.path,e.aliHeader={},e.aliHeader.osskeyId=o.osskeyId,e.aliHeader.ossPolicy=o.ossPolicy,e.aliHeader.ossSign=o.ossSign,e.ossBucketName=o.ossBucketName,e.uploadFileName=o.fileName,e.s3Header={},e.s3Header.s3Credential=o.s3Credential,e.s3Header.s3Algorithm=o.s3Algorithm,e.s3Header.s3Date=o.s3Date,e.s3Header.s3Policy=o.s3Policy,e.s3Header.s3Signature=o.s3Signature,e.s3BucketName=o.s3BucketName,e.stcHeader={},e.stcHeader.stcAuthorization=o.stcAuthorization,e.stcHeader.stcContentSha256=o.stcContentSha256,e.stcHeader.stcDate=o.stcDate,e.stcBucketName=o.stcBucketName,e.headers||(e.headers={}),e.base64&&(e.headers["Content-type"]="application/octet-stream",e.headers.Authorization="UpToken "+n),console.log("data",o);var a=wt.init(e);t(a)}));else{e.headers||(e.headers={}),e.base64&&(e.headers["Content-type"]="application/octet-stream");var n=wt.init(e);t(n)}};var xt,bt,At=function(e,t,n){t.upload(e.file,{onError:function(e){n.onError(e)},onProgress:function(e,t){n.onProgress(e,t)},onCompleted:function(t){t.filename||(t.filename=t.hash);var o=e.compressThumbnail||_t;e.compress?o(e,(function(e){t.thumbnail=e,n.onCompleted(t)})):n.onCompleted(t)}})},Pt=function(e){var t=this;this.instance=e,this.upload=function(e,n){At({file:e},t.instance,n)},this.cancel=function(){t.instance.cancel()}},Lt=function(e,t){var n=this;this.cfg=t,this.instance=e,this.upload=function(e,t){var o={file:e,compress:n.cfg};At(o,n.instance,t)},this.cancel=function(){n.instance.cancel()}},Dt=function(e,t){Ut(e,(function(n){var o={maxHeight:e.maxHeight||160,maxWidth:e.maxWidth||160,quality:e.quality||.5,scale:e.scale||2.4},a=new Lt(n,o);t(a)}))},Ht=function(e,t){Ut(e,(function(e){var n=new Pt(e);t(n)}))},kt=Dt;wt.dataType;function Gt(e){return xt=xt||new AudioContext,new Promise((function(t,n){xt.decodeAudioData(e,(function(e){t({duration:e.duration,length:e.length})}),n)}))}function Bt(e,t,n,o){return new Promise((function(a){te.imClient.context.getFileToken(e,t,n,o).then((function(e){a({code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS,data:e})})).catch((function(e){a({code:e,msg:oe[e]})}))}))}function qt(e,t,n,o,a){return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("fileType",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isValidFileType,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("filename",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("saveName",n,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("serverType",a,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER),new Promise((function(i){te.imClient.context.getFileUrl(e,t,n,o,a).then((function(e){i({code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS,data:e})})).catch((function(e){i({code:e})}))}))}function Ft(e,t,n){return R(this,void 0,void 0,(function(){var o,a,c,u,d,l,g,f,h;return O(this,(function(p){switch(p.label){case 0:return n=n||{},t instanceof Ze==!1?(w.warn("send message fail -> message parameter is not an instance of BaseMessage"),[2,ne.ILLGAL_PARAMS]):((0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("conversation.channelId",null==e?void 0:e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),o=e.conversationType,a=e.targetId,c=e.channelId,u="conversationType:"+o+",targetId:"+a,w.debug("send message  ->"+u),(d=Object.assign(n,t)).channelId=c||"",[4,te.imClient.context.sendMessage(o,a,d)]);case 1:return l=p.sent(),g=l.code,f=l.data,g===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(h=Z(f),[2,{code:g,data:h}]):(w.warn("send message fail ->"+g+":"+oe[g]+","+u),[2,{code:g,msg:oe[g],data:Z({isMentioned:!!n.isMentioned,content:t.content,messageType:t.messageType,isPersited:t.isPersited||!1,isCounted:t.isCounted||!1,disableNotification:!!(null==n?void 0:n.disableNotification),canIncludeExpansion:!!(null==n?void 0:n.canIncludeExpansion),expansion:(null==n?void 0:n.expansion)||null,conversationType:o,targetId:a,channelId:c||"",senderUserId:te.imClient.context.getCurrentUserId(),messageUId:"",messageDirection:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.MessageDirection.SEND,isOffLineMessage:!1,sentTime:(null==f?void 0:f.sentTime)||0,receivedTime:0,isStatusMessage:n.isStatusMessage||!1,receivedStatus:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ReceivedStatus.UNREAD})}])}}))}))}function Vt(e,t,n){return Ft(e,new st(t),n)}function zt(e,t){return function(n,o,a,i){return new Promise((function(s){var c;!function(e,t,n,o){var a,r=this;if(void 0===t&&(t=_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.FileType.FILE),a=t===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.FileType.IMAGE?_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.FileType.IMAGE:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.FileType.FILE,!bt){bt="upload.qiniup.com";var i=te.imClient.context.getInfoFromCache();if(i&&i.ossConfig)try{var s=JSON.parse(i.ossConfig).find((function(e){return void 0!==e.qiniu}));s&&(bt=s.qiniu)}catch(e){}}var c=N({domain:bt,getToken:function(e){te.imClient.context.getFileToken(a).then((function(t){e(t.token,t)})).catch((function(e){n.onFail(e)}))}},o);(a===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.FileType.IMAGE?kt:Ht)(c,(function(o){o.upload(e,{onProgress:function(e,t){var o,a=Math.floor(e/t*100);null===(o=n.onProgress)||void 0===o||o.call(n,a)},onCompleted:function(o){return R(r,void 0,void 0,(function(){var r=this;return O(this,(function(i){return qt(a,o.filename,o.name,o,o.uploadMethod).then((function(i){return R(r,void 0,void 0,(function(){var r,s;return O(this,(function(c){return 0!==i.code?(n.onFail(i),[2]):((r=i.data).type=e.type,r.name=o.name||o.filename,t===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.FileType.AUDIO?("function"==typeof e.arrayBuffer?e.arrayBuffer().then(Gt).then((function(e){Object.assign(r,e),n.onSuccess(r)}),(function(){n.onSuccess(r)})):((s=new FileReader).onload=function(){s.result?Gt(s.result).then((function(e){Object.assign(r,e),n.onSuccess(r)}),(function(){n.onSuccess(r)})):n.onSuccess(r)},s.onerror=function(){r.duration=0,n.onSuccess(r)},s.readAsArrayBuffer(e)),[2]):(a===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.FileType.IMAGE&&(r.thumbnail=o.thumbnail),n.onSuccess(r),[2]))}))}))})).catch((function(e){n.onFail(e)})),[2]}))}))},onError:function(e){n.onFail(e)}})}))}(o.file,e,{onProgress:null==a?void 0:a.onProgress,onSuccess:function(e){var r,c=(null===(r=null==a?void 0:a.onComplete)||void 0===r?void 0:r.call(a,{url:e.downloadUrl}))||t(e,o);Ft(n,c,i).then(s)},onFail:function(e){s({code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.UPLOAD_FILE_FAILED,msg:e||_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode[_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.UPLOAD_FILE_FAILED]})}},(null===(c=i)||void 0===c?void 0:c.thumbnailConfig)||{})}))}}var Kt=zt(_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.FileType.FILE,(function(e,t){return new ut({name:e.name,size:t.file.size,type:t.file.type,fileUrl:e.downloadUrl,user:t.user,extra:t.extra})})),jt=zt(_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.FileType.IMAGE,(function(e,t){return new at({content:e.thumbnail,imageUri:e.downloadUrl,user:t.user,extra:t.extra})})),Xt=zt(_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.FileType.AUDIO,(function(e,t){return new rt({remoteUrl:e.downloadUrl,duration:e.duration,type:e.type,user:t.user,extra:t.extra})})),Wt=zt(_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.FileType.SIGHT,(function(e,t){return new it({sightUrl:e.downloadUrl,content:t.thumbnail,duration:t.duration,size:t.file.size||e.size,name:t.name||e.name,user:t.user,extra:t.extra})}));function Jt(e,t){return R(this,void 0,void 0,(function(){var n,o,a,i,c;return O(this,(function(u){switch(u.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.timestamp",null==t?void 0:t.timestamp,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.count",null==t?void 0:t.count,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.order",null==t?void 0:t.order,(function(e){return 0===e||1===e})),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("conversation.channelId",null==e?void 0:e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),n="conversationType:"+e.conversationType+",targetId:"+e.targetId,w.debug("get history message ->"+n),[4,te.imClient.context.getHistoryMessage(e.conversationType,e.targetId,null==t?void 0:t.timestamp,null==t?void 0:t.count,null==t?void 0:t.order,null==e?void 0:e.channelId)];case 1:return o=u.sent(),a=o.code,i=o.data,a===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS&&i?(c=i.list.map((function(e){return Z(e)})),[2,{code:a,data:{list:c,hasMore:i.hasMore}}]):(w.warn("get history message fail ->"+a+":"+oe[a]+","+n),[2,{code:a,msg:oe[a]}])}}))}))}function Yt(e,t){return R(this,void 0,void 0,(function(){var n,o,a,i,c;return O(this,(function(u){switch(u.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.timestamp",null==t?void 0:t.timestamp,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.count",null==t?void 0:t.count,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.order",null==t?void 0:t.order,(function(e){return 0===e||1===e})),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("conversation.channelId",null==e?void 0:e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),n="conversationType:"+e.conversationType+",targetId:"+e.targetId,w.debug("get history message ->"+n),[4,te.imClient.context.getRemoteHistoryMessages(e.conversationType,e.targetId,(null==t?void 0:t.timestamp)||0,(null==t?void 0:t.count)||20,(null==t?void 0:t.order)||0,e.channelId||"")];case 1:return o=u.sent(),a=o.code,i=o.data,a===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS&&i?(c=i.list.map((function(e){return Z(e)})),[2,{code:a,data:{list:c,hasMore:i.hasMore}}]):(w.warn("get history message fail ->"+a+":"+oe[a]+","+n),[2,{code:a,msg:oe[a]}])}}))}))}function Qt(e,t,n,o){return R(this,void 0,void 0,(function(){var a,r,i,s,c;return O(this,(function(u){switch(u.label){case 0:return a={targetId:e,conversationType:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ConversationType.PRIVATE,channelId:o},r=new Ze("RC:ReadNtf",{messageUId:t,lastMessageSendTime:n,type:1}),[4,Ft(a,r)];case 1:return i=u.sent(),s=i.code,c=i.msg,0===s?[2,{code:s}]:[2,{code:s,msg:c}]}}))}))}function $t(e,t,n){return R(this,void 0,void 0,(function(){var o,a,r,i,c;return O(this,(function(u){switch(u.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("messageUId",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("channelId",n,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),o="messageUId:"+t+",targetId:"+e,w.debug("send read receipt message ->"+o),a=new Ze("RC:RRReqMsg",{messageUId:t}),[4,Ft({targetId:e,conversationType:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ConversationType.GROUP,channelId:n},a)];case 1:return r=u.sent(),i=r.code,c=r.msg,0===i?[2,{code:i}]:[2,{code:i,msg:c}]}}))}))}function Zt(e,t,n){return R(this,void 0,void 0,(function(){return O(this,(function(e){throw new Error("This method is deprecated, please use method sendReadReceiptResponseV2.")}))}))}function en(e,t,n){return R(this,void 0,void 0,(function(){var o,a,i,c,u,d,l;return O(this,(function(g){switch(g.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("targetId",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("messageList",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.OBJECT,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("channelId",n,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),Object.keys(t).forEach((function(e){(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(e,t[e],_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.ARRAY)})),o={targetId:e,conversationType:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ConversationType.GROUP,channelId:n},i=te.imClient.context.getInfoFromCache(),0!==(c=(null==i?void 0:i.grpRRVer)||0)?[3,2]:(u=new Ze("RC:RRRspMsg",{receiptMessageDic:t}),[4,Ft(o,u)]);case 1:return a=g.sent(),[3,4];case 2:return 1!==c?[3,4]:(d=[],Object.keys(t).forEach((function(e){t[e].forEach((function(e){-1===d.indexOf(e)&&d.push(e)}))})),d.length?[4,te.imClient.context.sendReadReceiptMessage(e,d,n)]:(w.warn("Error in parameter messageList."),[2,{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.PARAMETER_ERROR}]));case 3:a=g.sent(),g.label=4;case 4:return(l=a.code)===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:l}]:(w.warn("send read receipt message fail ->"+l+":"+oe[l]),[2,{code:l,msg:oe[l]}])}}))}))}function tn(e,t){return R(this,void 0,void 0,(function(){var n,o,a,r;return O(this,(function(i){switch(i.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("conversation.type",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("conversation.targetId",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("lastMessageSendTime",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("conversation.channelId",null==e?void 0:e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),n=new Ze("RC:SRSMsg",{lastMessageSendTime:t}),[4,Ft(e,n)];case 1:return o=i.sent(),a=o.code,r=o.msg,0===a?[2,{code:a}]:[2,{code:a,msg:r}]}}))}))}function nn(e,t){return R(this,void 0,void 0,(function(){var n,o,a,i,c;return O(this,(function(u){switch(u.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.messageUId",t.messageUId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.sentTime",t.sentTime,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.disableNotification",null==t?void 0:t.disableNotification,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.BOOLEAN),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.pushConfig",null==t?void 0:t.pushConfig,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.OBJECT),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("conversation.channelId",null==e?void 0:e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),n={user:t.user,channelId:e.channelId||"",disableNotification:null==t?void 0:t.disableNotification,pushConfig:null==t?void 0:t.pushConfig},o="conversationType:"+e.conversationType+",targetId:"+e.targetId+",messageUId:"+t.messageUId,w.debug("recall message ->"+o),[4,te.imClient.context.recallMessage(e.conversationType,e.targetId,t.messageUId,t.sentTime,n)];case 1:return a=u.sent(),i=a.code,c=a.data,i===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS&&c?[2,{code:i,data:Z(c)}]:(w.warn("recall message fail ->"+i+":"+oe[i]+","+o),[2,{code:i,msg:oe[i]}])}}))}))}function on(e,t){return R(this,void 0,void 0,(function(){var n,o;return O(this,(function(a){switch(a.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options",t,(function(e){return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isArray)(e)&&e.length}),!0),t.forEach((function(e){(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.messageUId",e.messageUId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.sentTime",e.sentTime,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.messageDirection",e.messageDirection,(function(e){return 1===e||2===e}),!0)})),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("conversation.channelId",null==e?void 0:e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),n="conversationType:"+e.conversationType+",targetId:"+e.targetId,w.debug("delete messages ->"+n),[4,te.imClient.context.deleteRemoteMessage(e.conversationType,e.targetId,t,e.channelId)];case 1:return(o=a.sent())!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(w.warn("delete message fail ->"+o+":"+oe[o]+","+n),[2,{code:o,msg:oe[o]}]):[2,{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS}]}}))}))}function an(e,t){return R(this,void 0,void 0,(function(){var n,o;return O(this,(function(a){switch(a.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.timestamp",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("conversation.channelId",null==e?void 0:e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),n="conversationType:"+e.conversationType+",targetId:"+e.targetId,w.debug("clear message ->"+n),[4,te.imClient.context.deleteRemoteMessageByTimestamp(e.conversationType,e.targetId,t,e.channelId)];case 1:return(o=a.sent())!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(w.warn("clear message ->"+o+":"+oe[o]+","+n),[2,{code:o,msg:oe[o]}]):[2,{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS}]}}))}))}function rn(e,t){return R(this,void 0,void 0,(function(){var n,o,a,i,c,u,d,l;return O(this,(function(g){switch(g.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("expansion",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.OBJECT,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("message",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.OBJECT,!0),n=t.conversationType,o=t.targetId,a=t.messageUId,i=t.canIncludeExpansion,c=t.expansion,u=t.channelId,d="conversationType:"+n+",targetId:"+o+",messageUId:"+a,w.debug("update message expansion ->"+d),[4,te.imClient.context.sendExpansionMessage({conversationType:n,targetId:o,messageUId:a,expansion:e,canIncludeExpansion:i,originExpansion:c,channelId:u})];case 1:return(l=g.sent().code)!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(w.warn("update message expansion fail ->"+l+":"+oe[l]+","+d),[2,{code:l,msg:oe[l]}]):[2,{code:l}]}}))}))}function sn(e,t){return R(this,void 0,void 0,(function(){var n,o,a,i,c,u,d;return O(this,(function(l){switch(l.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("keys",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.ARRAY,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("message",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.OBJECT,!0),n=t.conversationType,o=t.targetId,a=t.messageUId,i=t.canIncludeExpansion,c=t.channelId,u="conversationType:"+n+",targetId:"+o+",messageUId:"+a,w.debug("remove message expansion ->"+u),[4,te.imClient.context.sendExpansionMessage({conversationType:n,targetId:o,messageUId:a,canIncludeExpansion:i,keys:e,channelId:c})];case 1:return(d=l.sent().code)!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(w.warn("remove message expansion fail ->"+d+":"+oe[d]+","+u),[2,{code:d,msg:oe[d]}]):[2,{code:d}]}}))}))}function cn(e,t){return R(this,void 0,void 0,(function(){var n,o,a,i,c;return O(this,(function(u){switch(u.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("typingContentType",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),n="conversationType:"+e.conversationType+",targetId:"+e.targetId,w.debug("send typing status message ->"+n),o={messageType:"RC:TypSts",content:{typingContentType:t},isStatusMessage:!0,channelId:e.channelId},[4,te.imClient.context.sendMessage(e.conversationType,e.targetId,o)];case 1:return a=u.sent(),i=a.code,c=a.data,i===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:i,data:Z(c)}]:(w.warn("send typing status message fail ->"+i+":"+oe[i]+","+n),[2,{code:i,msg:oe[i]}])}}))}))}function un(e,t,n){return R(this,void 0,void 0,(function(){var o,a,i,c;return O(this,(function(u){switch(u.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("messageUId",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),o="messageUId:"+t+",targetId:"+e,w.debug("get message reader ->"+o),[4,te.imClient.context.getMessageReader(e,t,n)];case 1:return a=u.sent(),i=a.code,c=a.data,i===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:i,data:c}]:(w.warn("get message reader fail ->"+i+":"+oe[i]+","+o),[2,{code:i,msg:oe[i]}])}}))}))}function dn(e,t,n,o,a){return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("messageType",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("isPersited",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.BOOLEAN,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("isCounted",n,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.BOOLEAN,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("isStatusMessage",a,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.BOOLEAN,!1),te.imClient.context.registerMessageType(e,t,n,o,a),et(e,t,n)}function ln(e){return R(this,void 0,void 0,(function(){var t,n,o;return O(this,(function(a){switch(a.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.usingCppEngine)()?((0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("conversation.conversationType",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("conversation.targetId",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("conversation.channelId",null==e?void 0:e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),[4,te.imClient.context.getFirstUnreadMessage(e.conversationType,e.targetId,e.channelId)]):[2,{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT,msg:oe[_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT]}];case 1:return t=a.sent(),n=t.code,o=t.data,n===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:n,data:o}]:(w.warn("insertMessage ->code:"+n+",targetId:"+e.targetId),[2,{code:n,msg:oe[n]}])}}))}))}function gn(e,t,n){return void 0===n&&(n={}),R(this,void 0,void 0,(function(){var o,a,i,s,c,u,d,l,g,f,m,h,p,v,I,S;return O(this,(function(T){switch(T.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.usingCppEngine)()?(o=t.senderUserId,a=t.messageType,i=t.content,s=t.messageDirection,c=t.messageUId,u=t.canIncludeExpansion,d=t.expansion,l=t.disableNotification,g=t.sentTime,f=t.sentStatus,w.info("insertMessage ->targetId:"+e.targetId+",conversationType:"+e.conversationType),m=n.isUnread,h=n.searchContent,p={senderUserId:o,messageType:a,content:i,messageDirection:s,sentTime:g,sentStatus:f,searchContent:h,isUnread:m,messageUId:c,disableNotification:l,canIncludeExpansion:u,expansionMsg:JSON.stringify(d),channelId:e.channelId||""},[4,te.imClient.context.insertMessage(e.conversationType,e.targetId,p)]):[2,{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT,msg:oe[_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT]}];case 1:return v=T.sent(),I=v.code,S=v.data,I===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:I,data:Z(S)}]:(w.warn("insertMessage ->code:"+I+",targetId:"+e.targetId),[2,{code:I,msg:oe[I]}])}}))}))}function fn(e){return R(this,void 0,void 0,(function(){var t,n,o;return O(this,(function(a){switch(a.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.usingCppEngine)()?[4,te.imClient.context.getMessage(e)]:[2,{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT,msg:oe[_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT]}];case 1:return t=a.sent(),n=t.code,o=t.data,n===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:n,data:Z(o)}]:(w.warn("getMessage ->code:"+n+",messageId:"+e),[2,{code:n,msg:oe[n]}])}}))}))}function mn(e){if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.usingCppEngine)())return{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT,msg:oe[_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT]};(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("conversationType",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("targetId",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0);var t=te.imClient.context.getUnreadMentionedMessages(e.conversationType,e.targetId),n=[];return t&&t.length&&t.forEach((function(e){return n.push(Z(e))})),{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS,data:n}}function hn(e,t,n,o){return R(this,void 0,void 0,(function(){var a,i,c,u;return O(this,(function(d){switch(d.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.usingCppEngine)()?((0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("conversationType",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("targetId",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("keyword",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("timestamp",n,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("count",o,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER),1,[4,te.imClient.context.searchMessageByContent(e.conversationType,e.targetId,t,n,o,1,e.channelId)]):[2,{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT,msg:oe[_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT]}];case 1:return a=d.sent(),i=a.code,c=a.data,i===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(u=[],(null==c?void 0:c.messages)&&c.messages.length&&c.messages.forEach((function(e){return u.push(Z(e))})),[2,{code:i,data:{messages:u,count:null==c?void 0:c.count}}]):(w.warn("searchMessages ->code:"+i+",targetId:"+e.targetId),[2,{code:i,msg:oe[i]}])}}))}))}function pn(e,t,n){return R(this,void 0,void 0,(function(){var o;return O(this,(function(a){switch(a.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.usingCppEngine)()?((0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("conversationType",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("targetId",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("timestamp",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("cleanSpace",n,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.BOOLEAN),[4,te.imClient.context.deleteMessagesByTimestamp(e.conversationType,e.targetId,t,n,e.channelId)]):[2,{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT,msg:oe[_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT]}];case 1:return(o=a.sent())===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:o}]:(w.warn("deleteLocalMessagesByTimestamp ->code:"+o+",targetId:"+e.targetId),[2,{code:o,msg:oe[o]}])}}))}))}function vn(e){return R(this,void 0,void 0,(function(){var t;return O(this,(function(n){switch(n.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.usingCppEngine)()?(w.info("clearMessages ->targetId:"+e.targetId+",conversationType:"+e.conversationType),[4,te.imClient.context.clearMessages(e.conversationType,e.targetId,e.channelId)]):[2,{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT,msg:oe[_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT]}];case 1:return(t=n.sent())===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:t}]:(w.warn("clearMessages ->code:"+t+",targetId:"+e.targetId),[2,{code:t,msg:oe[t]}])}}))}))}function In(e,t,n,o){return R(this,void 0,void 0,(function(){var a,i,s;return O(this,(function(c){switch(c.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.usingCppEngine)()?(w.info("searchConversationByContent ->keyword:"+e),[4,te.imClient.context.searchConversationByContent(e,n,o,t)]):[2,{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT,msg:oe[_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT]}];case 1:return a=c.sent(),i=a.code,s=a.data,i===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:i,data:s}]:(w.warn("searchConversationByContent ->code:"+i+",keyword:"+e),[2,{code:i,msg:oe[i]}])}}))}))}function Sn(e,t){return R(this,void 0,void 0,(function(){var n;return O(this,(function(o){switch(o.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.usingCppEngine)()?(w.info("clearUnreadCountByTimestamp ->targetId:"+e.targetId+",conversationType:"+e.conversationType),[4,te.imClient.context.clearUnreadCountByTimestamp(e.conversationType,e.targetId,t,e.channelId)]):[2,{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT,msg:oe[_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT]}];case 1:return(n=o.sent())===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:n}]:(w.warn("clearUnreadCountByTimestamp ->code:"+n+",targetId:"+e.targetId),[2,{code:n,msg:oe[n]}])}}))}))}function Cn(e,t){return R(this,void 0,void 0,(function(){var n;return O(this,(function(o){switch(o.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.usingCppEngine)()?((0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("messageId",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("receivedStatus",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),w.info("setMessageReceivedStatus ->messageId:"+e+",receivedStatus:"+t),[4,te.imClient.context.setMessageReceivedStatus(e,t)]):[2,{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT,msg:oe[_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT]}];case 1:return(n=o.sent())===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:n}]:(w.warn("setMessageReceivedStatus ->code:"+n+",messageId:"+e),[2,{code:n,msg:oe[n]}])}}))}))}function Tn(e){return R(this,void 0,void 0,(function(){var t;return O(this,(function(n){switch(n.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("tag.tagId",e.tagId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("tag.tagId",e.tagId,(function(e){return e.length<=10})),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("tag.tagName",e.tagName,(function(e){return e.length<=15})),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("tag.tagName",e.tagName,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),w.info("createTag ->tagId:"+e.tagId+",tagName:"+e.tagName),[4,te.imClient.context.createTag(e)];case 1:return(t=n.sent().code)===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:t}]:(w.warn("createTag ->code:"+t+",tagId:"+e.tagId),[2,{code:t,msg:oe[t]}])}}))}))}function En(e){return R(this,void 0,void 0,(function(){var t;return O(this,(function(n){switch(n.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("tagId",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),w.info("removeTag ->tagId:"+e),[4,te.imClient.context.removeTag(e)];case 1:return(t=n.sent().code)===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:t}]:(w.warn("removeTag ->code:"+t+",tagId:"+e),[2,{code:t,msg:oe[t]}])}}))}))}function yn(e){return R(this,void 0,void 0,(function(){var t;return O(this,(function(n){switch(n.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("tag.tagId",e.tagId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("tag.tagName",e.tagName,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("tag.tagName",e.tagName,(function(e){return e.length<=15})),w.info("updateTag ->tagId:"+e.tagId+",tagName:"+e.tagName),[4,te.imClient.context.updateTag(e)];case 1:return(t=n.sent().code)===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:t}]:(w.warn("updateTag ->code:"+t+",tagId:"+e.tagId),[2,{code:t,msg:oe[t]}])}}))}))}function Nn(){return R(this,void 0,void 0,(function(){var e,t,n;return O(this,(function(o){switch(o.label){case 0:return[4,te.imClient.context.getTagList()];case 1:return e=o.sent(),t=e.code,n=e.data,t===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS,data:n}]:(w.warn("getTagList ->code:"+t),[2,{code:t,msg:oe[t]}])}}))}))}function Rn(e){return R(this,void 0,void 0,(function(){var t,n,o;return O(this,(function(a){switch(a.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("conversationType",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("targetId",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("channelId",e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),w.info("getTagsForConversation ->targetId:"+e.targetId+",conversationType:"+e.conversationType),[4,te.imClient.context.getTagsForConversation(e)];case 1:return t=a.sent(),n=t.code,o=t.data,n===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:n,data:o}]:[2,{code:n,msg:oe[n]}]}}))}))}function On(e,t){return R(this,void 0,void 0,(function(){var n;return O(this,(function(o){switch(o.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("tagId",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("conversations",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.ARRAY,!0),t.forEach((function(e){(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("conversation.conversationType",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("conversation.targetId",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("conversation.channelId",e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID)})),w.info("addTagForConversations ->tagId:"+e),[4,te.imClient.context.addTagForConversations(e,t)];case 1:return(n=o.sent().code)===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:n}]:(w.warn("addTagForConversations ->code:"+n+",tagId:"+e),[2,{code:n,msg:oe[n]}])}}))}))}function wn(e,t){return R(this,void 0,void 0,(function(){var n;return O(this,(function(o){switch(o.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("tagId",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("conversations",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.ARRAY,!0),t.forEach((function(e){(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("conversation.conversationType",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("conversation.targetId",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("conversation.channelId",e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID)})),w.info("removeTagForConversations ->tagId:"+e),[4,te.imClient.context.removeTagForConversations(e,t)];case 1:return(n=o.sent().code)===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:n}]:(w.warn("removeTagForConversations ->code:"+n+",tagId:"+e),[2,{code:n,msg:oe[n]}])}}))}))}function Mn(e,t){return R(this,void 0,void 0,(function(){var n;return O(this,(function(o){switch(o.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("conversation.conversationType",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("conversation.targetId",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("conversation.channelId",e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("tagIds",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.ARRAY,!0),t.forEach((function(e){(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("tagId",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0)})),w.info("removeTagsForConversation ->tagIds:"+t+",targetId:"+e.targetId+",conversationType:"+e.conversationType),[4,te.imClient.context.removeTagsForConversation(e,t)];case 1:return(n=o.sent().code)===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:n}]:(w.warn("removeTagsForConversation ->code:"+n+",tagIds:"+t),[2,{code:n,msg:oe[n]}])}}))}))}function _n(e,t){return R(this,void 0,void 0,(function(){var n;return O(this,(function(o){switch(o.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("tagId",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("conversations",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.ARRAY,!0),t.forEach((function(e){(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("conversation.conversationType",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("conversation.targetId",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("conversation.channelId",e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID)})),w.info("removeTagForConversations ->tagId:"+e),[4,te.imClient.context.removeTagForConversations(e,t)];case 1:return(n=o.sent().code)===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:n}]:(w.warn("removeTagForConversations ->code:"+n+",tagId:"+e),[2,{code:n,msg:oe[n]}])}}))}))}function Un(e,t,n){return R(this,void 0,void 0,(function(){var o,a,i;return O(this,(function(c){switch(c.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("tagId",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("count",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("startTime",n,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),w.info("getConversationListByTag ->tagId:"+e),[4,te.imClient.context.getConversationListByTag(e,n,t)];case 1:return o=c.sent(),a=o.code,i=o.data,a===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:a,data:i}]:(w.warn("getConversationListByTag ->code:"+a+",tagId:"+e),[2,{code:a,msg:oe[a]}])}}))}))}function xn(e,t){return R(this,void 0,void 0,(function(){var n,o,a;return O(this,(function(i){switch(i.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("tagId",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("containMuted",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.BOOLEAN,!0),w.info("getUnreadCountByTag ->tagId:"+e),[4,te.imClient.context.getUnreadCountByTag(e,t)];case 1:return n=i.sent(),o=n.code,a=n.data,w.info(o,a),o===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:o,data:a}]:(w.warn("getUnreadCountByTag ->code:"+o+",tagId:"+e),[2,{code:o,msg:oe[o]}])}}))}))}function bn(e,t,n){return R(this,void 0,void 0,(function(){var o,a;return O(this,(function(i){switch(i.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("tagId",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("conversation.targetId",t.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("conversation.conversationType",t.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("conversation.channelId",t.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("status.isTop",n,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.BOOLEAN,!0),w.info("setConversationStatusInTag ->tagId:"+e+",targetId:"+t.targetId+",conversationType"+t.conversationType),[4,te.imClient.context.setConversationStatusInTag(e,t,{isTop:n})];case 1:return o=i.sent(),(a=o.code)===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:a}]:(w.warn("setConversationStatusInTag ->code:"+a+",tagId:"+e),[2,{code:a,msg:oe[a]}])}}))}))}zt(_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.FileType.COMBINE_HTML,(function(e,t){return new ct({remoteUrl:e.downloadUrl,nameList:t.nameList,summaryList:t.summaryList,conversationType:t.conversationType,user:t.user,extra:t.extra})}));var An={COMET:"comet",WEBSOCKET:"websocket"},Pn={TEXT:"RC:TxtMsg",VOICE:"RC:VcMsg",HQ_VOICE:"RC:HQVCMsg",IMAGE:"RC:ImgMsg",GIF:"RC:GIFMsg",RICH_CONTENT:"RC:ImgTextMsg",LOCATION:"RC:LBSMsg",FILE:"RC:FileMsg",SIGHT:"RC:SightMsg",COMBINE:"RC:CombineMsg",CHRM_KV_NOTIFY:"RC:chrmKVNotiMsg",LOG_COMMAND:"RC:LogCmdMsg",EXPANSION_NOTIFY:"RC:MsgExMsg",REFERENCE:"RC:ReferenceMsg",RECALL_MESSAGE_TYPE:"RC:RcCmd"};_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.VersionManage.add("imlib","5.1.2"),_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.VersionManage.validEngine("~5.1.2")||w.error("The current engine version \'"+_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.VersionManage.getInfo().engine+"\' error，imlib required engine version at least \'~5.1.2\'.");\n\n\n//# sourceURL=webpack://@rongcloud/rcvoiceroomlib-v1/./node_modules/@rongcloud/imlib-next/dist/index.esm.js?')},"./node_modules/@rongcloud/plugin-rtc/dist/index.esm.js":
/*!**************************************************************!*\
  !*** ./node_modules/@rongcloud/plugin-rtc/dist/index.esm.js ***!
  \**************************************************************/(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "RTCJoinType": () => (/* reexport safe */ _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCJoinType),\n/* harmony export */   "BackgroundPictureFillMode": () => (/* binding */ ir),\n/* harmony export */   "MixLayoutMode": () => (/* binding */ nr),\n/* harmony export */   "MixVideoRenderMode": () => (/* binding */ sr),\n/* harmony export */   "RCAbstractRoom": () => (/* binding */ rr),\n/* harmony export */   "RCAudienceClient": () => (/* binding */ Rr),\n/* harmony export */   "RCAudienceLivingRoom": () => (/* binding */ Tr),\n/* harmony export */   "RCCameraVideoTrack": () => (/* binding */ it),\n/* harmony export */   "RCFrameRate": () => (/* binding */ Be),\n/* harmony export */   "RCInnerCDNPullIsHttps": () => (/* binding */ Sr),\n/* harmony export */   "RCInnerCDNPullKind": () => (/* binding */ gr),\n/* harmony export */   "RCKickReason": () => (/* binding */ yr),\n/* harmony export */   "RCLivingRoom": () => (/* binding */ _r),\n/* harmony export */   "RCLivingType": () => (/* binding */ lr),\n/* harmony export */   "RCLocalAudioTrack": () => (/* binding */ Qe),\n/* harmony export */   "RCLocalFileAudioTrack": () => (/* binding */ tt),\n/* harmony export */   "RCLocalFileTrack": () => (/* binding */ Ze),\n/* harmony export */   "RCLocalFileVideoTrack": () => (/* binding */ et),\n/* harmony export */   "RCLocalTrack": () => (/* binding */ ze),\n/* harmony export */   "RCLocalVideoTrack": () => (/* binding */ Xe),\n/* harmony export */   "RCMCUConfigBuilder": () => (/* binding */ ar),\n/* harmony export */   "RCMediaType": () => (/* binding */ Fe),\n/* harmony export */   "RCMicphoneAudioTrack": () => (/* binding */ rt),\n/* harmony export */   "RCRTCClient": () => (/* binding */ Er),\n/* harmony export */   "RCRTCCode": () => (/* binding */ T),\n/* harmony export */   "RCRTCLiveRole": () => (/* binding */ Xt),\n/* harmony export */   "RCRTCPingResult": () => (/* binding */ Dt),\n/* harmony export */   "RCRTCRoom": () => (/* binding */ mr),\n/* harmony export */   "RCRemoteAudioTrack": () => (/* binding */ ot),\n/* harmony export */   "RCRemoteTrack": () => (/* binding */ st),\n/* harmony export */   "RCRemoteVideoTrack": () => (/* binding */ at),\n/* harmony export */   "RCResolution": () => (/* binding */ He),\n/* harmony export */   "RCScreenVideoTrack": () => (/* binding */ nt),\n/* harmony export */   "RCTag": () => (/* binding */ br),\n/* harmony export */   "RCTrack": () => (/* binding */ qe),\n/* harmony export */   "device": () => (/* binding */ Ye),\n/* harmony export */   "helper": () => (/* binding */ Pr),\n/* harmony export */   "installer": () => (/* binding */ kr)\n/* harmony export */ });\n/* harmony import */ var _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @rongcloud/engine */ "./node_modules/@rongcloud/engine/dist/index.esm.js");\n\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */function S(e,t,r,i){return new(r||(r=Promise))((function(n,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))}const C=new _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.Logger("RCRTC");var T,I;!function(e){e[e.SUCCESS=1e4]="SUCCESS",e[e.SIGNAL_DISCONNECTED=5e4]="SIGNAL_DISCONNECTED",e[e.PARAMS_ERROR=50001]="PARAMS_ERROR",e[e.REPERT_JOIN_ROOM=50002]="REPERT_JOIN_ROOM",e[e.NOT_IN_ROOM=50003]="NOT_IN_ROOM",e[e.SERVICE_INVALID=50004]="SERVICE_INVALID",e[e.RTC_TOKEN_INVALID=50006]="RTC_TOKEN_INVALID",e[e.SIGNAL_ERROR=53001]="SIGNAL_ERROR",e[e.CREATE_OFFER_FAILED=53003]="CREATE_OFFER_FAILED",e[e.REQUEST_FAILED=53004]="REQUEST_FAILED",e[e.MCU_SERVER_NOT_FOUND=53005]="MCU_SERVER_NOT_FOUND",e[e.BROADCAST_SUB_LIST_NOT_EMPTY=53007]="BROADCAST_SUB_LIST_NOT_EMPTY",e[e.ROOM_HAS_BEEN_DESTROYED=53008]="ROOM_HAS_BEEN_DESTROYED",e[e.NOT_OPEN_VIDEO_AUDIO_SERVER=53009]="NOT_OPEN_VIDEO_AUDIO_SERVER",e[e.GET_USER_MEDIA_FAILED=53010]="GET_USER_MEDIA_FAILED",e[e.GET_DISPLAY_MEDIA_FAILED=53011]="GET_DISPLAY_MEDIA_FAILED",e[e.PERMISSION_DENIED=53012]="PERMISSION_DENIED",e[e.CREATE_CUSTOM_TRACK_FAILED=53013]="CREATE_CUSTOM_TRACK_FAILED",e[e.INVALID_TAGS=53014]="INVALID_TAGS",e[e.INVALID_USER_ID=53015]="INVALID_USER_ID",e[e.CREATE_FILE_TRACK_FAILED=53016]="CREATE_FILE_TRACK_FAILED",e[e.INVALID_FILE_INSTANCE=53017]="INVALID_FILE_INSTANCE",e[e.SET_REMOTE_DESCRIPTION_FAILED=53018]="SET_REMOTE_DESCRIPTION_FAILED",e[e.BROWSER_NOT_SUPPORT=53019]="BROWSER_NOT_SUPPORT",e[e.TRACK_NOT_READY=53020]="TRACK_NOT_READY",e[e.VIDEO_TRACK_MISS_MEDIA_ELEMENT=53021]="VIDEO_TRACK_MISS_MEDIA_ELEMENT",e[e.TRACK_PLAY_ERROR=53022]="TRACK_PLAY_ERROR",e[e.SIGNAL_AUDIENCE_JOIN_ROOM_FAILED=53023]="SIGNAL_AUDIENCE_JOIN_ROOM_FAILED",e[e.SIGNAL_ROOM_CHANGE_IDENTITY_FAILED=53024]="SIGNAL_ROOM_CHANGE_IDENTITY_FAILED",e[e.PACKAGE_ENVIRONMENT_ERROR=53025]="PACKAGE_ENVIRONMENT_ERROR",e[e.PUBLISH_TRACK_LIMIT_EXCEEDED=53026]="PUBLISH_TRACK_LIMIT_EXCEEDED",e[e.CDN_RESOURCE_IS_EMPTY=53027]="CDN_RESOURCE_IS_EMPTY",e[e.SIGNAL_JOIN_RTC_ROOM_REFUSED=53028]="SIGNAL_JOIN_RTC_ROOM_REFUSED",e[e.NO_PERMISSION_TO_USE_REQUESTED_DEVICE=53029]="NO_PERMISSION_TO_USE_REQUESTED_DEVICE",e[e.THE_FUNCTION_IS_DISABLED_IN_PKROOM=53030]="THE_FUNCTION_IS_DISABLED_IN_PKROOM"}(T||(T={})),function(e){e[e.JOIN_REFUSED=40032]="JOIN_REFUSED"}(I||(I={}));class E{constructor(){this.queue=[],this.locked=!1}checkToStart(){return S(this,void 0,void 0,(function*(){if(0===this.queue.length||this.locked)return;this.locked=!0;const{resolve:e,task:t,reject:r}=this.queue.shift();let i;try{i=yield t(),e(i)}catch(e){r(e)}this.locked=!1,this.checkToStart()}))}push(e){const t=new Promise(((t,r)=>{this.queue.push({resolve:t,task:e,reject:r})}));return this.checkToStart(),t}}const y=new E,k=e=>y.push(e);let b=!0,P=!0;function O(e,t,r){const i=e.match(t);return i&&i.length>=r&&parseInt(i[r],10)}function L(e,t,r){if(!e.RTCPeerConnection)return;const i=e.RTCPeerConnection.prototype,n=i.addEventListener;i.addEventListener=function(e,i){if(e!==t)return n.apply(this,arguments);const s=e=>{const t=r(e);t&&(i.handleEvent?i.handleEvent(t):i(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(i,s),n.apply(this,[e,s])};const s=i.removeEventListener;i.removeEventListener=function(e,r){if(e!==t||!this._eventMap||!this._eventMap[t])return s.apply(this,arguments);if(!this._eventMap[t].has(r))return s.apply(this,arguments);const i=this._eventMap[t].get(r);return this._eventMap[t].delete(r),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,s.apply(this,[e,i])},Object.defineProperty(i,"on"+t,{get(){return this["_on"+t]},set(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}function N(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(b=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function D(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(P=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function A(){if("object"==typeof window){if(b)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function M(e,t){P&&console.warn(e+" is deprecated, please use "+t+" instead.")}function x(e){return"[object Object]"===Object.prototype.toString.call(e)}function U(e){return x(e)?Object.keys(e).reduce((function(t,r){const i=x(e[r]),n=i?U(e[r]):e[r],s=i&&!Object.keys(n).length;return void 0===n||s?t:Object.assign(t,{[r]:n})}),{}):e}function w(e,t,r){t&&!r.has(t.id)&&(r.set(t.id,t),Object.keys(t).forEach((i=>{i.endsWith("Id")?w(e,e.get(t[i]),r):i.endsWith("Ids")&&t[i].forEach((t=>{w(e,e.get(t),r)}))})))}function $(e,t,r){const i=r?"outbound-rtp":"inbound-rtp",n=new Map;if(null===t)return n;const s=[];return e.forEach((e=>{"track"===e.type&&e.trackIdentifier===t.id&&s.push(e)})),s.forEach((t=>{e.forEach((r=>{r.type===i&&r.trackId===t.id&&w(e,r,n)}))})),n}const j=A;function V(e,t){const r=e&&e.navigator;if(!r.mediaDevices)return;const i=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;const t={};return Object.keys(e).forEach((r=>{if("require"===r||"advanced"===r||"mediaSource"===r)return;const i="object"==typeof e[r]?e[r]:{ideal:e[r]};void 0!==i.exact&&"number"==typeof i.exact&&(i.min=i.max=i.exact);const n=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==i.ideal){t.optional=t.optional||[];let e={};"number"==typeof i.ideal?(e[n("min",r)]=i.ideal,t.optional.push(e),e={},e[n("max",r)]=i.ideal,t.optional.push(e)):(e[n("",r)]=i.ideal,t.optional.push(e))}void 0!==i.exact&&"number"!=typeof i.exact?(t.mandatory=t.mandatory||{},t.mandatory[n("",r)]=i.exact):["min","max"].forEach((e=>{void 0!==i[e]&&(t.mandatory=t.mandatory||{},t.mandatory[n(e,r)]=i[e])}))})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},n=function(e,n){if(t.version>=61)return n(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){const t=function(e,t,r){t in e&&!(r in e)&&(e[r]=e[t],delete e[t])};t((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),t(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=i(e.audio)}if(e&&"object"==typeof e.video){let s=e.video.facingMode;s=s&&("object"==typeof s?s:{ideal:s});const o=t.version<66;if(s&&("user"===s.exact||"environment"===s.exact||"user"===s.ideal||"environment"===s.ideal)&&(!r.mediaDevices.getSupportedConstraints||!r.mediaDevices.getSupportedConstraints().facingMode||o)){let t;if(delete e.video.facingMode,"environment"===s.exact||"environment"===s.ideal?t=["back","rear"]:"user"!==s.exact&&"user"!==s.ideal||(t=["front"]),t)return r.mediaDevices.enumerateDevices().then((r=>{let o=(r=r.filter((e=>"videoinput"===e.kind))).find((e=>t.some((t=>e.label.toLowerCase().includes(t)))));return!o&&r.length&&t.includes("back")&&(o=r[r.length-1]),o&&(e.video.deviceId=s.exact?{exact:o.deviceId}:{ideal:o.deviceId}),e.video=i(e.video),j("chrome: "+JSON.stringify(e)),n(e)}))}e.video=i(e.video)}return j("chrome: "+JSON.stringify(e)),n(e)},s=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(r.getUserMedia=function(e,t,i){n(e,(e=>{r.webkitGetUserMedia(e,t,(e=>{i&&i(s(e))}))}))}.bind(r),r.mediaDevices.getUserMedia){const e=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(t){return n(t,(t=>e(t).then((e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach((e=>{e.stop()})),new DOMException("","NotFoundError");return e}),(e=>Promise.reject(s(e))))))}}}function B(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function H(e){if("object"==typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",(r=>{let i;i=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===r.track.id)):{track:r.track};const n=new Event("track");n.track=r.track,n.receiver=i,n.transceiver={receiver:i},n.streams=[t.stream],this.dispatchEvent(n)})),t.stream.getTracks().forEach((r=>{let i;i=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===r.id)):{track:r};const n=new Event("track");n.track=r,n.receiver=i,n.transceiver={receiver:i},n.streams=[t.stream],this.dispatchEvent(n)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else L(e,"track",(e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e)))}function F(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const r=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,i){let n=r.apply(this,arguments);return n||(n=t(this,e),this._senders.push(n)),n};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){i.apply(this,arguments);const t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],r.apply(this,[e]),e.getTracks().forEach((e=>{this._senders.push(t(this,e))}))};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],i.apply(this,[e]),e.getTracks().forEach((e=>{const t=this._senders.find((t=>t.track===e));t&&this._senders.splice(this._senders.indexOf(t),1)}))}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function K(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,r,i]=arguments;if(arguments.length>0&&"function"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof e))return t.apply(this,[]);const n=function(e){const t={};return e.result().forEach((e=>{const r={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((t=>{r[t]=e.stat(t)})),t[r.id]=r})),t},s=function(e){return new Map(Object.keys(e).map((t=>[t,e[t]])))};if(arguments.length>=2){const i=function(e){r(s(n(e)))};return t.apply(this,[i,e])}return new Promise(((e,r)=>{t.apply(this,[function(t){e(s(n(t)))},r])})).then(r,i)}}function G(e){if(!("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=r.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>$(t,e.track,!0)))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),L(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>$(t,e.track,!1)))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const e=arguments[0];let t,r,i;return this.getSenders().forEach((r=>{r.track===e&&(t?i=!0:t=r)})),this.getReceivers().forEach((t=>(t.track===e&&(r?i=!0:r=t),t.track===e))),i||t&&r?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():r?r.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function J(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((e=>this._shimmedLocalStreams[e][0]))};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){if(!r)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const i=t.apply(this,arguments);return this._shimmedLocalStreams[r.id]?-1===this._shimmedLocalStreams[r.id].indexOf(i)&&this._shimmedLocalStreams[r.id].push(i):this._shimmedLocalStreams[r.id]=[r,i],i};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")}));const t=this.getSenders();r.apply(this,arguments);const i=this.getSenders().filter((e=>-1===t.indexOf(e)));this._shimmedLocalStreams[e.id]=[e].concat(i)};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],i.apply(this,arguments)};const n=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((t=>{const r=this._shimmedLocalStreams[t].indexOf(e);-1!==r&&this._shimmedLocalStreams[t].splice(r,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]})),n.apply(this,arguments)}}function W(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return J(e);const r=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=r.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map((e=>this._reverseStreams[e.id]))};const i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){const r=new e.MediaStream(t.getTracks());this._streams[t.id]=r,this._reverseStreams[r.id]=t,t=r}i.apply(this,[t])};const n=e.RTCPeerConnection.prototype.removeStream;function s(e,t){let r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const i=e._reverseStreams[t],n=e._streams[i.id];r=r.replace(new RegExp(n.id,"g"),i.id)})),new RTCSessionDescription({type:t.type,sdp:r})}function o(e,t){let r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const i=e._reverseStreams[t],n=e._streams[i.id];r=r.replace(new RegExp(i.id,"g"),n.id)})),new RTCSessionDescription({type:t.type,sdp:r})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},n.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,r){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection\'s signalingState is \'closed\'.","InvalidStateError");const i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find((e=>e===t)))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");const n=this.getSenders().find((e=>e.track===t));if(n)throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const s=this._streams[r.id];if(s)s.addTrack(t),Promise.resolve().then((()=>{this.dispatchEvent(new Event("negotiationneeded"))}));else{const i=new e.MediaStream([t]);this._streams[r.id]=i,this._reverseStreams[i.id]=r,this.addStream(i)}return this.getSenders().find((e=>e.track===t))},["createOffer","createAnswer"].forEach((function(t){const r=e.RTCPeerConnection.prototype[t],i={[t](){const e=arguments;return arguments.length&&"function"==typeof arguments[0]?r.apply(this,[t=>{const r=s(this,t);e[0].apply(null,[r])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):r.apply(this,arguments).then((e=>s(this,e)))}};e.RTCPeerConnection.prototype[t]=i[t]}));const a=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=o(this,arguments[0]),a.apply(this,arguments)):a.apply(this,arguments)};const c=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const e=c.get.apply(this);return""===e.type?e:s(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection\'s signalingState is \'closed\'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(e._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let t;this._streams=this._streams||{},Object.keys(this._streams).forEach((r=>{this._streams[r].getTracks().find((t=>e.track===t))&&(t=this._streams[r])})),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Y(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const r=e.RTCPeerConnection.prototype[t],i={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=i[t]}))}function q(e,t){L(e,"negotiationneeded",(e=>{const r=e.target;if(!(t.version<72||r.getConfiguration&&"plan-b"===r.getConfiguration().sdpSemantics)||"stable"===r.signalingState)return e}))}var z=Object.freeze({__proto__:null,shimMediaStream:B,shimOnTrack:H,shimGetSendersWithDtmf:F,shimGetStats:K,shimSenderReceiverGetStats:G,shimAddTrackRemoveTrackWithNative:J,shimAddTrackRemoveTrack:W,shimPeerConnection:Y,fixNegotiationNeeded:q,shimGetUserMedia:V,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(r){return t(r).then((t=>{const i=r.video&&r.video.width,n=r.video&&r.video.height,s=r.video&&r.video.frameRate;return r.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:s||3}},i&&(r.video.mandatory.maxWidth=i),n&&(r.video.mandatory.maxHeight=n),e.navigator.mediaDevices.getUserMedia(r)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}});var Q,X,Z=(Q=function(e){var t={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\\n").map((function(e){return e.trim()}))},t.splitSections=function(e){return e.split("\\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\\r\\n"}))},t.getDescription=function(e){var r=t.splitSections(e);return r&&r[0]},t.getMediaSections=function(e){var r=t.splitSections(e);return r.shift(),r},t.matchPrefix=function(e,r){return t.splitLines(e).filter((function(e){return 0===e.indexOf(r)}))},t.parseCandidate=function(e){for(var t,r={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},i=8;i<t.length;i+=2)switch(t[i]){case"raddr":r.relatedAddress=t[i+1];break;case"rport":r.relatedPort=parseInt(t[i+1],10);break;case"tcptype":r.tcpType=t[i+1];break;case"ufrag":r.ufrag=t[i+1],r.usernameFragment=t[i+1];break;default:r[t[i]]=t[i+1]}return r},t.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var r=e.type;return t.push("typ"),t.push(r),"host"!==r&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substr(14).split(" ")},t.parseRtpMap=function(e){var t=e.substr(9).split(" "),r={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),r.name=t[0],r.clockRate=parseInt(t[1],10),r.channels=3===t.length?parseInt(t[2],10):1,r.numChannels=r.channels,r},t.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var r=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==r?"/"+r:"")+"\\r\\n"},t.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\\r\\n"},t.parseFmtp=function(e){for(var t,r={},i=e.substr(e.indexOf(" ")+1).split(";"),n=0;n<i.length;n++)r[(t=i[n].trim().split("="))[0].trim()]=t[1];return r},t.writeFmtp=function(e){var t="",r=e.payloadType;if(void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var i=[];Object.keys(e.parameters).forEach((function(t){e.parameters[t]?i.push(t+"="+e.parameters[t]):i.push(t)})),t+="a=fmtp:"+r+" "+i.join(";")+"\\r\\n"}return t},t.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){var t="",r=e.payloadType;return void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+r+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\\r\\n"})),t},t.parseSsrcMedia=function(e){var t=e.indexOf(" "),r={ssrc:parseInt(e.substr(7,t-7),10)},i=e.indexOf(":",t);return i>-1?(r.attribute=e.substr(t+1,i-t-1),r.value=e.substr(i+1)):r.attribute=e.substr(t+1),r},t.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},t.getMid=function(e){var r=t.matchPrefix(e,"a=mid:")[0];if(r)return r.substr(6)},t.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},t.getDtlsParameters=function(e,r){return{role:"auto",fingerprints:t.matchPrefix(e+r,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){var r="a=setup:"+t+"\\r\\n";return e.fingerprints.forEach((function(e){r+="a=fingerprint:"+e.algorithm+" "+e.value+"\\r\\n"})),r},t.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\\r\\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,r){return t.matchPrefix(e+r,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,r){var i=t.matchPrefix(e+r,"a=ice-ufrag:")[0],n=t.matchPrefix(e+r,"a=ice-pwd:")[0];return i&&n?{usernameFragment:i.substr(12),password:n.substr(10)}:null},t.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\\r\\na=ice-pwd:"+e.password+"\\r\\n"},t.parseRtpParameters=function(e){for(var r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},i=t.splitLines(e)[0].split(" "),n=3;n<i.length;n++){var s=i[n],o=t.matchPrefix(e,"a=rtpmap:"+s+" ")[0];if(o){var a=t.parseRtpMap(o),c=t.matchPrefix(e,"a=fmtp:"+s+" ");switch(a.parameters=c.length?t.parseFmtp(c[0]):{},a.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+s+" ").map(t.parseRtcpFb),r.codecs.push(a),a.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(a.name.toUpperCase())}}}return t.matchPrefix(e,"a=extmap:").forEach((function(e){r.headerExtensions.push(t.parseExtmap(e))})),r},t.writeRtpDescription=function(e,r){var i="";i+="m="+e+" ",i+=r.codecs.length>0?"9":"0",i+=" UDP/TLS/RTP/SAVPF ",i+=r.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\\r\\n",i+="c=IN IP4 0.0.0.0\\r\\n",i+="a=rtcp:9 IN IP4 0.0.0.0\\r\\n",r.codecs.forEach((function(e){i+=t.writeRtpMap(e),i+=t.writeFmtp(e),i+=t.writeRtcpFb(e)}));var n=0;return r.codecs.forEach((function(e){e.maxptime>n&&(n=e.maxptime)})),n>0&&(i+="a=maxptime:"+n+"\\r\\n"),i+="a=rtcp-mux\\r\\n",r.headerExtensions&&r.headerExtensions.forEach((function(e){i+=t.writeExtmap(e)})),i},t.parseRtpEncodingParameters=function(e){var r,i=[],n=t.parseRtpParameters(e),s=-1!==n.fecMechanisms.indexOf("RED"),o=-1!==n.fecMechanisms.indexOf("ULPFEC"),a=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),c=a.length>0&&a[0].ssrc,d=t.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substr(17).split(" ").map((function(e){return parseInt(e,10)}))}));d.length>0&&d[0].length>1&&d[0][0]===c&&(r=d[0][1]),n.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var t={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&r&&(t.rtx={ssrc:r}),i.push(t),s&&((t=JSON.parse(JSON.stringify(t))).fec={ssrc:c,mechanism:o?"red+ulpfec":"red"},i.push(t))}})),0===i.length&&c&&i.push({ssrc:c});var u=t.matchPrefix(e,"b=");return u.length&&(u=0===u[0].indexOf("b=TIAS:")?parseInt(u[0].substr(7),10):0===u[0].indexOf("b=AS:")?1e3*parseInt(u[0].substr(5),10)*.95-16e3:void 0,i.forEach((function(e){e.maxBitrate=u}))),i},t.parseRtcpParameters=function(e){var r={},i=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);var n=t.matchPrefix(e,"a=rtcp-rsize");r.reducedSize=n.length>0,r.compound=0===n.length;var s=t.matchPrefix(e,"a=rtcp-mux");return r.mux=s.length>0,r},t.parseMsid=function(e){var r,i=t.matchPrefix(e,"a=msid:");if(1===i.length)return{stream:(r=i[0].substr(7).split(" "))[0],track:r[1]};var n=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return n.length>0?{stream:(r=n[0].value.split(" "))[0],track:r[1]}:void 0},t.parseSctpDescription=function(e){var r,i=t.parseMLine(e),n=t.matchPrefix(e,"a=max-message-size:");n.length>0&&(r=parseInt(n[0].substr(19),10)),isNaN(r)&&(r=65536);var s=t.matchPrefix(e,"a=sctp-port:");if(s.length>0)return{port:parseInt(s[0].substr(12),10),protocol:i.fmt,maxMessageSize:r};if(t.matchPrefix(e,"a=sctpmap:").length>0){var o=t.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(o[0],10),protocol:o[1],maxMessageSize:r}}},t.writeSctpDescription=function(e,t){var r=[];return r="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\\r\\n","c=IN IP4 0.0.0.0\\r\\n","a=sctp-port:"+t.port+"\\r\\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\\r\\n","c=IN IP4 0.0.0.0\\r\\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\\r\\n"],void 0!==t.maxMessageSize&&r.push("a=max-message-size:"+t.maxMessageSize+"\\r\\n"),r.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,21)},t.writeSessionBoilerplate=function(e,r,i){var n=void 0!==r?r:2;return"v=0\\r\\no="+(i||"thisisadapterortc")+" "+(e||t.generateSessionId())+" "+n+" IN IP4 127.0.0.1\\r\\ns=-\\r\\nt=0 0\\r\\n"},t.writeMediaSection=function(e,r,i,n){var s=t.writeRtpDescription(e.kind,r);if(s+=t.writeIceParameters(e.iceGatherer.getLocalParameters()),s+=t.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===i?"actpass":"active"),s+="a=mid:"+e.mid+"\\r\\n",e.direction?s+="a="+e.direction+"\\r\\n":e.rtpSender&&e.rtpReceiver?s+="a=sendrecv\\r\\n":e.rtpSender?s+="a=sendonly\\r\\n":e.rtpReceiver?s+="a=recvonly\\r\\n":s+="a=inactive\\r\\n",e.rtpSender){var o="msid:"+n.id+" "+e.rtpSender.track.id+"\\r\\n";s+="a="+o,s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+o,e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+o,s+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\\r\\n")}return s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+t.localCName+"\\r\\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+t.localCName+"\\r\\n"),s},t.getDirection=function(e,r){for(var i=t.splitLines(e),n=0;n<i.length;n++)switch(i[n]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[n].substr(2)}return r?t.getDirection(r):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substr(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){var r=t.splitLines(e)[0].substr(2).split(" ");return{kind:r[0],port:parseInt(r[1],10),protocol:r[2],fmt:r.slice(3).join(" ")}},t.parseOLine=function(e){var r=t.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:r[0],sessionId:r[1],sessionVersion:parseInt(r[2],10),netType:r[3],addressType:r[4],address:r[5]}},t.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var r=t.splitLines(e),i=0;i<r.length;i++)if(r[i].length<2||"="!==r[i].charAt(1))return!1;return!0},e.exports=t},Q(X={exports:{}},X.exports),X.exports);function ee(e,t,r,i,n){var s=Z.writeRtpDescription(e.kind,t);if(s+=Z.writeIceParameters(e.iceGatherer.getLocalParameters()),s+=Z.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===r?"actpass":n||"active"),s+="a=mid:"+e.mid+"\\r\\n",e.rtpSender&&e.rtpReceiver?s+="a=sendrecv\\r\\n":e.rtpSender?s+="a=sendonly\\r\\n":e.rtpReceiver?s+="a=recvonly\\r\\n":s+="a=inactive\\r\\n",e.rtpSender){var o=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=o;var a="msid:"+(i?i.id:"-")+" "+o+"\\r\\n";s+="a="+a,s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+a,e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+a,s+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\\r\\n")}return s+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+Z.localCName+"\\r\\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+Z.localCName+"\\r\\n"),s}function te(e,t){var r={codecs:[],headerExtensions:[],fecMechanisms:[]},i=function(e,t){e=parseInt(e,10);for(var r=0;r<t.length;r++)if(t[r].payloadType===e||t[r].preferredPayloadType===e)return t[r]},n=function(e,t,r,n){var s=i(e.parameters.apt,r),o=i(t.parameters.apt,n);return s&&o&&s.name.toLowerCase()===o.name.toLowerCase()};return e.codecs.forEach((function(i){for(var s=0;s<t.codecs.length;s++){var o=t.codecs[s];if(i.name.toLowerCase()===o.name.toLowerCase()&&i.clockRate===o.clockRate){if("rtx"===i.name.toLowerCase()&&i.parameters&&o.parameters.apt&&!n(i,o,e.codecs,t.codecs))continue;(o=JSON.parse(JSON.stringify(o))).numChannels=Math.min(i.numChannels,o.numChannels),r.codecs.push(o),o.rtcpFeedback=o.rtcpFeedback.filter((function(e){for(var t=0;t<i.rtcpFeedback.length;t++)if(i.rtcpFeedback[t].type===e.type&&i.rtcpFeedback[t].parameter===e.parameter)return!0;return!1}));break}}})),e.headerExtensions.forEach((function(e){for(var i=0;i<t.headerExtensions.length;i++){var n=t.headerExtensions[i];if(e.uri===n.uri){r.headerExtensions.push(n);break}}})),r}function re(e,t,r){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(r)}function ie(e,t){var r=e.getRemoteCandidates().find((function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type}));return r||e.addRemoteCandidate(t),!r}function ne(e,t){var r=new Error(t);return r.name=e,r.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],r}var se=function(e,t){function r(t,r){r.addTrack(t),r.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function i(t,r,i,n){var s=new Event("track");s.track=r,s.receiver=i,s.transceiver={receiver:i},s.streams=n,e.setTimeout((function(){t._dispatchEvent("track",s)}))}var n=function(r){var i=this,n=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach((function(e){i[e]=n[e].bind(n)})),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",r=JSON.parse(JSON.stringify(r||{})),this.usingBundle="max-bundle"===r.bundlePolicy,"negotiate"===r.rtcpMuxPolicy)throw ne("NotSupportedError","rtcpMuxPolicy \'negotiate\' is not supported");switch(r.rtcpMuxPolicy||(r.rtcpMuxPolicy="require"),r.iceTransportPolicy){case"all":case"relay":break;default:r.iceTransportPolicy="all"}switch(r.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:r.bundlePolicy="balanced"}if(r.iceServers=function(e,t){var r=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var i=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var n="string"==typeof i;return n&&(i=[i]),i=i.filter((function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||r?0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp"):(r=!0,!0)})),delete e.url,e.urls=n?i[0]:i,!!i.length}}))}(r.iceServers||[],t),this._iceGatherers=[],r.iceCandidatePoolSize)for(var s=r.iceCandidatePoolSize;s>0;s--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:r.iceServers,gatherPolicy:r.iceTransportPolicy}));else r.iceCandidatePoolSize=0;this._config=r,this.transceivers=[],this._sdpSessionId=Z.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(n.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(n.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),n.prototype.onicecandidate=null,n.prototype.onaddstream=null,n.prototype.ontrack=null,n.prototype.onremovestream=null,n.prototype.onsignalingstatechange=null,n.prototype.oniceconnectionstatechange=null,n.prototype.onconnectionstatechange=null,n.prototype.onicegatheringstatechange=null,n.prototype.onnegotiationneeded=null,n.prototype.ondatachannel=null,n.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},n.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},n.prototype.getConfiguration=function(){return this._config},n.prototype.getLocalStreams=function(){return this.localStreams},n.prototype.getRemoteStreams=function(){return this.remoteStreams},n.prototype._createTransceiver=function(e,t){var r=this.transceivers.length>0,i={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&r)i.iceTransport=this.transceivers[0].iceTransport,i.dtlsTransport=this.transceivers[0].dtlsTransport;else{var n=this._createIceAndDtlsTransports();i.iceTransport=n.iceTransport,i.dtlsTransport=n.dtlsTransport}return t||this.transceivers.push(i),i},n.prototype.addTrack=function(t,r){if(this._isClosed)throw ne("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var i;if(this.transceivers.find((function(e){return e.track===t})))throw ne("InvalidAccessError","Track already exists.");for(var n=0;n<this.transceivers.length;n++)this.transceivers[n].track||this.transceivers[n].kind!==t.kind||(i=this.transceivers[n]);return i||(i=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(r)&&this.localStreams.push(r),i.track=t,i.stream=r,i.rtpSender=new e.RTCRtpSender(t,i.dtlsTransport),i.rtpSender},n.prototype.addStream=function(e){var r=this;if(t>=15025)e.getTracks().forEach((function(t){r.addTrack(t,e)}));else{var i=e.clone();e.getTracks().forEach((function(e,t){var r=i.getTracks()[t];e.addEventListener("enabled",(function(e){r.enabled=e.enabled}))})),i.getTracks().forEach((function(e){r.addTrack(e,i)}))}},n.prototype.removeTrack=function(t){if(this._isClosed)throw ne("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var r=this.transceivers.find((function(e){return e.rtpSender===t}));if(!r)throw ne("InvalidAccessError","Sender was not created by this connection.");var i=r.stream;r.rtpSender.stop(),r.rtpSender=null,r.track=null,r.stream=null,-1===this.transceivers.map((function(e){return e.stream})).indexOf(i)&&this.localStreams.indexOf(i)>-1&&this.localStreams.splice(this.localStreams.indexOf(i),1),this._maybeFireNegotiationNeeded()},n.prototype.removeStream=function(e){var t=this;e.getTracks().forEach((function(e){var r=t.getSenders().find((function(t){return t.track===e}));r&&t.removeTrack(r)}))},n.prototype.getSenders=function(){return this.transceivers.filter((function(e){return!!e.rtpSender})).map((function(e){return e.rtpSender}))},n.prototype.getReceivers=function(){return this.transceivers.filter((function(e){return!!e.rtpReceiver})).map((function(e){return e.rtpReceiver}))},n.prototype._createIceGatherer=function(t,r){var i=this;if(r&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var n=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(n,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var r=!e.candidate||0===Object.keys(e.candidate).length;n.state=r?"completed":"gathering",null!==i.transceivers[t].bufferedCandidateEvents&&i.transceivers[t].bufferedCandidateEvents.push(e)},n.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),n},n.prototype._gather=function(t,r){var i=this,n=this.transceivers[r].iceGatherer;if(!n.onlocalcandidate){var s=this.transceivers[r].bufferedCandidateEvents;this.transceivers[r].bufferedCandidateEvents=null,n.removeEventListener("localcandidate",this.transceivers[r].bufferCandidates),n.onlocalcandidate=function(e){if(!(i.usingBundle&&r>0)){var s=new Event("icecandidate");s.candidate={sdpMid:t,sdpMLineIndex:r};var o=e.candidate,a=!o||0===Object.keys(o).length;if(a)"new"!==n.state&&"gathering"!==n.state||(n.state="completed");else{"new"===n.state&&(n.state="gathering"),o.component=1,o.ufrag=n.getLocalParameters().usernameFragment;var c=Z.writeCandidate(o);s.candidate=Object.assign(s.candidate,Z.parseCandidate(c)),s.candidate.candidate=c,s.candidate.toJSON=function(){return{candidate:s.candidate.candidate,sdpMid:s.candidate.sdpMid,sdpMLineIndex:s.candidate.sdpMLineIndex,usernameFragment:s.candidate.usernameFragment}}}var d=Z.getMediaSections(i._localDescription.sdp);d[s.candidate.sdpMLineIndex]+=a?"a=end-of-candidates\\r\\n":"a="+s.candidate.candidate+"\\r\\n",i._localDescription.sdp=Z.getDescription(i._localDescription.sdp)+d.join("");var u=i.transceivers.every((function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state}));"gathering"!==i.iceGatheringState&&(i.iceGatheringState="gathering",i._emitGatheringStateChange()),a||i._dispatchEvent("icecandidate",s),u&&(i._dispatchEvent("icecandidate",new Event("icecandidate")),i.iceGatheringState="complete",i._emitGatheringStateChange())}},e.setTimeout((function(){s.forEach((function(e){n.onlocalcandidate(e)}))}),0)}},n.prototype._createIceAndDtlsTransports=function(){var t=this,r=new e.RTCIceTransport(null);r.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var i=new e.RTCDtlsTransport(r);return i.ondtlsstatechange=function(){t._updateConnectionState()},i.onerror=function(){Object.defineProperty(i,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:r,dtlsTransport:i}},n.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var r=this.transceivers[e].iceTransport;r&&(delete r.onicestatechange,delete this.transceivers[e].iceTransport);var i=this.transceivers[e].dtlsTransport;i&&(delete i.ondtlsstatechange,delete i.onerror,delete this.transceivers[e].dtlsTransport)},n.prototype._transceive=function(e,r,i){var n=te(e.localCapabilities,e.remoteCapabilities);r&&e.rtpSender&&(n.encodings=e.sendEncodingParameters,n.rtcp={cname:Z.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(n.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(n)),i&&e.rtpReceiver&&n.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach((function(e){delete e.rtx})),e.recvEncodingParameters.length?n.encodings=e.recvEncodingParameters:n.encodings=[{}],n.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(n.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(n.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(n))},n.prototype.setLocalDescription=function(e){var t,r,i=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(ne("TypeError",\'Unsupported type "\'+e.type+\'"\'));if(!re("setLocalDescription",e.type,i.signalingState)||i._isClosed)return Promise.reject(ne("InvalidStateError","Can not set local "+e.type+" in state "+i.signalingState));if("offer"===e.type)t=Z.splitSections(e.sdp),r=t.shift(),t.forEach((function(e,t){var r=Z.parseRtpParameters(e);i.transceivers[t].localCapabilities=r})),i.transceivers.forEach((function(e,t){i._gather(e.mid,t)}));else if("answer"===e.type){t=Z.splitSections(i._remoteDescription.sdp),r=t.shift();var n=Z.matchPrefix(r,"a=ice-lite").length>0;t.forEach((function(e,t){var s=i.transceivers[t],o=s.iceGatherer,a=s.iceTransport,c=s.dtlsTransport,d=s.localCapabilities,u=s.remoteCapabilities;if(!(Z.isRejected(e)&&0===Z.matchPrefix(e,"a=bundle-only").length)&&!s.rejected){var l=Z.getIceParameters(e,r),h=Z.getDtlsParameters(e,r);n&&(h.role="server"),i.usingBundle&&0!==t||(i._gather(s.mid,t),"new"===a.state&&a.start(o,l,n?"controlling":"controlled"),"new"===c.state&&c.start(h));var p=te(d,u);i._transceive(s,p.codecs.length>0,!1)}}))}return i._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?i._updateSignalingState("have-local-offer"):i._updateSignalingState("stable"),Promise.resolve()},n.prototype.setRemoteDescription=function(n){var s=this;if(-1===["offer","answer"].indexOf(n.type))return Promise.reject(ne("TypeError",\'Unsupported type "\'+n.type+\'"\'));if(!re("setRemoteDescription",n.type,s.signalingState)||s._isClosed)return Promise.reject(ne("InvalidStateError","Can not set remote "+n.type+" in state "+s.signalingState));var o={};s.remoteStreams.forEach((function(e){o[e.id]=e}));var a=[],c=Z.splitSections(n.sdp),d=c.shift(),u=Z.matchPrefix(d,"a=ice-lite").length>0,l=Z.matchPrefix(d,"a=group:BUNDLE ").length>0;s.usingBundle=l;var h=Z.matchPrefix(d,"a=ice-options:")[0];return s.canTrickleIceCandidates=!!h&&h.substr(14).split(" ").indexOf("trickle")>=0,c.forEach((function(i,c){var h=Z.splitLines(i),p=Z.getKind(i),_=Z.isRejected(i)&&0===Z.matchPrefix(i,"a=bundle-only").length,m=h[0].substr(2).split(" ")[2],f=Z.getDirection(i,d),v=Z.parseMsid(i),R=Z.getMid(i)||Z.generateIdentifier();if(_||"application"===p&&("DTLS/SCTP"===m||"UDP/DTLS/SCTP"===m))s.transceivers[c]={mid:R,kind:p,protocol:m,rejected:!0};else{var g,S,C,T,I,E,y,k,b;!_&&s.transceivers[c]&&s.transceivers[c].rejected&&(s.transceivers[c]=s._createTransceiver(p,!0));var P,O,L=Z.parseRtpParameters(i);_||(P=Z.getIceParameters(i,d),(O=Z.getDtlsParameters(i,d)).role="client"),y=Z.parseRtpEncodingParameters(i);var N=Z.parseRtcpParameters(i),D=Z.matchPrefix(i,"a=end-of-candidates",d).length>0,A=Z.matchPrefix(i,"a=candidate:").map((function(e){return Z.parseCandidate(e)})).filter((function(e){return 1===e.component}));if(("offer"===n.type||"answer"===n.type)&&!_&&l&&c>0&&s.transceivers[c]&&(s._disposeIceAndDtlsTransports(c),s.transceivers[c].iceGatherer=s.transceivers[0].iceGatherer,s.transceivers[c].iceTransport=s.transceivers[0].iceTransport,s.transceivers[c].dtlsTransport=s.transceivers[0].dtlsTransport,s.transceivers[c].rtpSender&&s.transceivers[c].rtpSender.setTransport(s.transceivers[0].dtlsTransport),s.transceivers[c].rtpReceiver&&s.transceivers[c].rtpReceiver.setTransport(s.transceivers[0].dtlsTransport)),"offer"!==n.type||_){if("answer"===n.type&&!_){S=(g=s.transceivers[c]).iceGatherer,C=g.iceTransport,T=g.dtlsTransport,I=g.rtpReceiver,E=g.sendEncodingParameters,k=g.localCapabilities,s.transceivers[c].recvEncodingParameters=y,s.transceivers[c].remoteCapabilities=L,s.transceivers[c].rtcpParameters=N,A.length&&"new"===C.state&&(!u&&!D||l&&0!==c?A.forEach((function(e){ie(g.iceTransport,e)})):C.setRemoteCandidates(A)),l&&0!==c||("new"===C.state&&C.start(S,P,"controlling"),"new"===T.state&&T.start(O)),!te(g.localCapabilities,g.remoteCapabilities).codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&g.sendEncodingParameters[0].rtx&&delete g.sendEncodingParameters[0].rtx,s._transceive(g,"sendrecv"===f||"recvonly"===f,"sendrecv"===f||"sendonly"===f),!I||"sendrecv"!==f&&"sendonly"!==f?delete g.rtpReceiver:(b=I.track,v?(o[v.stream]||(o[v.stream]=new e.MediaStream),r(b,o[v.stream]),a.push([b,I,o[v.stream]])):(o.default||(o.default=new e.MediaStream),r(b,o.default),a.push([b,I,o.default])))}}else{(g=s.transceivers[c]||s._createTransceiver(p)).mid=R,g.iceGatherer||(g.iceGatherer=s._createIceGatherer(c,l)),A.length&&"new"===g.iceTransport.state&&(!D||l&&0!==c?A.forEach((function(e){ie(g.iceTransport,e)})):g.iceTransport.setRemoteCandidates(A)),k=e.RTCRtpReceiver.getCapabilities(p),t<15019&&(k.codecs=k.codecs.filter((function(e){return"rtx"!==e.name}))),E=g.sendEncodingParameters||[{ssrc:1001*(2*c+2)}];var M,x=!1;if("sendrecv"===f||"sendonly"===f){if(x=!g.rtpReceiver,I=g.rtpReceiver||new e.RTCRtpReceiver(g.dtlsTransport,p),x)b=I.track,v&&"-"===v.stream||(v?(o[v.stream]||(o[v.stream]=new e.MediaStream,Object.defineProperty(o[v.stream],"id",{get:function(){return v.stream}})),Object.defineProperty(b,"id",{get:function(){return v.track}}),M=o[v.stream]):(o.default||(o.default=new e.MediaStream),M=o.default)),M&&(r(b,M),g.associatedRemoteMediaStreams.push(M)),a.push([b,I,M])}else g.rtpReceiver&&g.rtpReceiver.track&&(g.associatedRemoteMediaStreams.forEach((function(t){var r=t.getTracks().find((function(e){return e.id===g.rtpReceiver.track.id}));r&&function(t,r){r.removeTrack(t),r.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))}(r,t)})),g.associatedRemoteMediaStreams=[]);g.localCapabilities=k,g.remoteCapabilities=L,g.rtpReceiver=I,g.rtcpParameters=N,g.sendEncodingParameters=E,g.recvEncodingParameters=y,s._transceive(s.transceivers[c],!1,x)}}})),void 0===s._dtlsRole&&(s._dtlsRole="offer"===n.type?"active":"passive"),s._remoteDescription={type:n.type,sdp:n.sdp},"offer"===n.type?s._updateSignalingState("have-remote-offer"):s._updateSignalingState("stable"),Object.keys(o).forEach((function(t){var r=o[t];if(r.getTracks().length){if(-1===s.remoteStreams.indexOf(r)){s.remoteStreams.push(r);var n=new Event("addstream");n.stream=r,e.setTimeout((function(){s._dispatchEvent("addstream",n)}))}a.forEach((function(e){var t=e[0],n=e[1];r.id===e[2].id&&i(s,t,n,[r])}))}})),a.forEach((function(e){e[2]||i(s,e[0],e[1],[])})),e.setTimeout((function(){s&&s.transceivers&&s.transceivers.forEach((function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))}))}),4e3),Promise.resolve()},n.prototype.close=function(){this.transceivers.forEach((function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()})),this._isClosed=!0,this._updateSignalingState("closed")},n.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},n.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout((function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}}),0))},n.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++})),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var r=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",r)}},n.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)})),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var r=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",r)}},n.prototype.createOffer=function(){var r=this;if(r._isClosed)return Promise.reject(ne("InvalidStateError","Can not call createOffer after close"));var i=r.transceivers.filter((function(e){return"audio"===e.kind})).length,n=r.transceivers.filter((function(e){return"video"===e.kind})).length,s=arguments[0];if(s){if(s.mandatory||s.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==s.offerToReceiveAudio&&(i=!0===s.offerToReceiveAudio?1:!1===s.offerToReceiveAudio?0:s.offerToReceiveAudio),void 0!==s.offerToReceiveVideo&&(n=!0===s.offerToReceiveVideo?1:!1===s.offerToReceiveVideo?0:s.offerToReceiveVideo)}for(r.transceivers.forEach((function(e){"audio"===e.kind?--i<0&&(e.wantReceive=!1):"video"===e.kind&&--n<0&&(e.wantReceive=!1)}));i>0||n>0;)i>0&&(r._createTransceiver("audio"),i--),n>0&&(r._createTransceiver("video"),n--);var o=Z.writeSessionBoilerplate(r._sdpSessionId,r._sdpSessionVersion++);r.transceivers.forEach((function(i,n){var s=i.track,o=i.kind,a=i.mid||Z.generateIdentifier();i.mid=a,i.iceGatherer||(i.iceGatherer=r._createIceGatherer(n,r.usingBundle));var c=e.RTCRtpSender.getCapabilities(o);t<15019&&(c.codecs=c.codecs.filter((function(e){return"rtx"!==e.name}))),c.codecs.forEach((function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),i.remoteCapabilities&&i.remoteCapabilities.codecs&&i.remoteCapabilities.codecs.forEach((function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)}))})),c.headerExtensions.forEach((function(e){(i.remoteCapabilities&&i.remoteCapabilities.headerExtensions||[]).forEach((function(t){e.uri===t.uri&&(e.id=t.id)}))}));var d=i.sendEncodingParameters||[{ssrc:1001*(2*n+1)}];s&&t>=15019&&"video"===o&&!d[0].rtx&&(d[0].rtx={ssrc:d[0].ssrc+1}),i.wantReceive&&(i.rtpReceiver=new e.RTCRtpReceiver(i.dtlsTransport,o)),i.localCapabilities=c,i.sendEncodingParameters=d})),"max-compat"!==r._config.bundlePolicy&&(o+="a=group:BUNDLE "+r.transceivers.map((function(e){return e.mid})).join(" ")+"\\r\\n"),o+="a=ice-options:trickle\\r\\n",r.transceivers.forEach((function(e,t){o+=ee(e,e.localCapabilities,"offer",e.stream,r._dtlsRole),o+="a=rtcp-rsize\\r\\n",!e.iceGatherer||"new"===r.iceGatheringState||0!==t&&r.usingBundle||(e.iceGatherer.getLocalCandidates().forEach((function(e){e.component=1,o+="a="+Z.writeCandidate(e)+"\\r\\n"})),"completed"===e.iceGatherer.state&&(o+="a=end-of-candidates\\r\\n"))}));var a=new e.RTCSessionDescription({type:"offer",sdp:o});return Promise.resolve(a)},n.prototype.createAnswer=function(){var r=this;if(r._isClosed)return Promise.reject(ne("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==r.signalingState&&"have-local-pranswer"!==r.signalingState)return Promise.reject(ne("InvalidStateError","Can not call createAnswer in signalingState "+r.signalingState));var i=Z.writeSessionBoilerplate(r._sdpSessionId,r._sdpSessionVersion++);r.usingBundle&&(i+="a=group:BUNDLE "+r.transceivers.map((function(e){return e.mid})).join(" ")+"\\r\\n"),i+="a=ice-options:trickle\\r\\n";var n=Z.getMediaSections(r._remoteDescription.sdp).length;r.transceivers.forEach((function(e,s){if(!(s+1>n)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?i+="m=application 0 DTLS/SCTP 5000\\r\\n":i+="m=application 0 "+e.protocol+" webrtc-datachannel\\r\\n":"audio"===e.kind?i+="m=audio 0 UDP/TLS/RTP/SAVPF 0\\r\\na=rtpmap:0 PCMU/8000\\r\\n":"video"===e.kind&&(i+="m=video 0 UDP/TLS/RTP/SAVPF 120\\r\\na=rtpmap:120 VP8/90000\\r\\n"),void(i+="c=IN IP4 0.0.0.0\\r\\na=inactive\\r\\na=mid:"+e.mid+"\\r\\n");var o;if(e.stream)"audio"===e.kind?o=e.stream.getAudioTracks()[0]:"video"===e.kind&&(o=e.stream.getVideoTracks()[0]),o&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1});var a=te(e.localCapabilities,e.remoteCapabilities);!a.codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,i+=ee(e,a,"answer",e.stream,r._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(i+="a=rtcp-rsize\\r\\n")}}));var s=new e.RTCSessionDescription({type:"answer",sdp:i});return Promise.resolve(s)},n.prototype.addIceCandidate=function(e){var t,r=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise((function(i,n){if(!r._remoteDescription)return n(ne("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var s=e.sdpMLineIndex;if(e.sdpMid)for(var o=0;o<r.transceivers.length;o++)if(r.transceivers[o].mid===e.sdpMid){s=o;break}var a=r.transceivers[s];if(!a)return n(ne("OperationError","Can not add ICE candidate"));if(a.rejected)return i();var c=Object.keys(e.candidate).length>0?Z.parseCandidate(e.candidate):{};if("tcp"===c.protocol&&(0===c.port||9===c.port))return i();if(c.component&&1!==c.component)return i();if((0===s||s>0&&a.iceTransport!==r.transceivers[0].iceTransport)&&!ie(a.iceTransport,c))return n(ne("OperationError","Can not add ICE candidate"));var d=e.candidate.trim();0===d.indexOf("a=")&&(d=d.substr(2)),(t=Z.getMediaSections(r._remoteDescription.sdp))[s]+="a="+(c.type?d:"end-of-candidates")+"\\r\\n",r._remoteDescription.sdp=Z.getDescription(r._remoteDescription.sdp)+t.join("")}else for(var u=0;u<r.transceivers.length&&(r.transceivers[u].rejected||(r.transceivers[u].iceTransport.addRemoteCandidate({}),(t=Z.getMediaSections(r._remoteDescription.sdp))[u]+="a=end-of-candidates\\r\\n",r._remoteDescription.sdp=Z.getDescription(r._remoteDescription.sdp)+t.join(""),!r.usingBundle));u++);i()}))},n.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var r=null;if(this.transceivers.forEach((function(e){e.rtpSender&&e.rtpSender.track===t?r=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(r=e.rtpReceiver)})),!r)throw ne("InvalidAccessError","Invalid selector.");return r.getStats()}var i=[];return this.transceivers.forEach((function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach((function(t){e[t]&&i.push(e[t].getStats())}))})),Promise.all(i).then((function(e){var t=new Map;return e.forEach((function(e){e.forEach((function(e){t.set(e.id,e)}))})),t}))};["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach((function(t){var r=e[t];if(r&&r.prototype&&r.prototype.getStats){var i=r.prototype.getStats;r.prototype.getStats=function(){return i.apply(this).then((function(e){var t=new Map;return Object.keys(e).forEach((function(r){var i;e[r].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(i=e[r]).type]||i.type,t.set(r,e[r])})),t}))}}}));var s=["createOffer","createAnswer"];return s.forEach((function(e){var t=n.prototype[e];n.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then((function(t){"function"==typeof e[0]&&e[0].apply(null,[t])}),(function(t){"function"==typeof e[1]&&e[1].apply(null,[t])})):t.apply(this,arguments)}})),(s=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach((function(e){var t=n.prototype[e];n.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)}),(function(t){"function"==typeof e[2]&&e[2].apply(null,[t])})):t.apply(this,arguments)}})),["getStats"].forEach((function(e){var t=n.prototype[e];n.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)})):t.apply(this,arguments)}})),n};function oe(e){const t=e&&e.navigator,r=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return r(e).catch((e=>Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString(){return this.name}}}(e))))}}function ae(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}function ce(e,t){if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){const t=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set(e){t.set.call(this,e);const r=new Event("enabled");r.enabled=e,this.dispatchEvent(r)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);const r=se(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=function(e,t){let r=!1;return(e=JSON.parse(JSON.stringify(e))).filter((e=>{if(e&&(e.urls||e.url)){let t=e.urls||e.url;e.url&&!e.urls&&M("RTCIceServer.url","RTCIceServer.urls");const i="string"==typeof t;return i&&(t=[t]),t=t.filter((e=>{if(0===e.indexOf("stun:"))return!1;const t=e.startsWith("turn")&&!e.startsWith("turn:[")&&e.includes("transport=udp");return t&&!r?(r=!0,!0):t&&!r})),delete e.url,e.urls=i?t[0]:t,!!t.length}}))}(e.iceServers,t.version),A("ICE servers after filtering:",e.iceServers)),new r(e)},e.RTCPeerConnection.prototype=r.prototype}function de(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}var ue=Object.freeze({__proto__:null,shimPeerConnection:ce,shimReplaceTrack:de,shimGetUserMedia:oe,shimGetDisplayMedia:ae});function le(e,t){const r=e&&e.navigator,i=e&&e.MediaStreamTrack;if(r.getUserMedia=function(e,t,i){M("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),r.mediaDevices.getUserMedia(e).then(t,i)},!(t.version>55&&"autoGainControl"in r.mediaDevices.getSupportedConstraints())){const e=function(e,t,r){t in e&&!(r in e)&&(e[r]=e[t],delete e[t])},t=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(r){return"object"==typeof r&&"object"==typeof r.audio&&(r=JSON.parse(JSON.stringify(r)),e(r.audio,"autoGainControl","mozAutoGainControl"),e(r.audio,"noiseSuppression","mozNoiseSuppression")),t(r)},i&&i.prototype.getSettings){const t=i.prototype.getSettings;i.prototype.getSettings=function(){const r=t.apply(this,arguments);return e(r,"mozAutoGainControl","autoGainControl"),e(r,"mozNoiseSuppression","noiseSuppression"),r}}if(i&&i.prototype.applyConstraints){const t=i.prototype.applyConstraints;i.prototype.applyConstraints=function(r){return"audio"===this.kind&&"object"==typeof r&&(r=JSON.parse(JSON.stringify(r)),e(r,"autoGainControl","mozAutoGainControl"),e(r,"noiseSuppression","mozNoiseSuppression")),t.apply(this,[r])}}}}function he(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function pe(e,t){if("object"!=typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const r=e.RTCPeerConnection.prototype[t],i={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=i[t]}));const r={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,n,s]=arguments;return i.apply(this,[e||null]).then((e=>{if(t.version<53&&!n)try{e.forEach((e=>{e.type=r[e.type]||e.type}))}catch(t){if("TypeError"!==t.name)throw t;e.forEach(((t,i)=>{e.set(i,Object.assign({},t,{type:r[t.type]||t.type}))}))}return e})).then(n,s)}}function _e(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=r.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function me(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),L(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function fe(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){M("removeStream","removeTrack"),this.getSenders().forEach((t=>{t.track&&e.getTracks().includes(t.track)&&this.removeTrack(t)}))})}function ve(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function Re(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const e=arguments[1],r=e&&"sendEncodings"in e;r&&e.sendEncodings.forEach((e=>{if("rid"in e){if(!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));const i=t.apply(this,arguments);if(r){const{sender:t}=i,r=t.getParameters();(!("encodings"in r)||1===r.encodings.length&&0===Object.keys(r.encodings[0]).length)&&(r.encodings=e.sendEncodings,t.sendEncodings=e.sendEncodings,this.setParametersPromises.push(t.setParameters(r).then((()=>{delete t.sendEncodings})).catch((()=>{delete t.sendEncodings}))))}return i})}function ge(e){if("object"!=typeof e||!e.RTCRtpSender)return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}function Se(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}function Ce(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}var Te=Object.freeze({__proto__:null,shimOnTrack:he,shimPeerConnection:pe,shimSenderGetStats:_e,shimReceiverGetStats:me,shimRemoveStream:fe,shimRTCDataChannel:ve,shimAddTransceiver:Re,shimGetParameters:ge,shimCreateOffer:Se,shimCreateAnswer:Ce,shimGetUserMedia:le,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!r||!r.video){const e=new DOMException("getDisplayMedia without video constraints is undefined");return e.name="NotFoundError",e.code=8,Promise.reject(e)}return!0===r.video?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})}});function Ie(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((r=>t.call(this,r,e))),e.getVideoTracks().forEach((r=>t.call(this,r,e)))},e.RTCPeerConnection.prototype.addTrack=function(e,...r){return r&&r.forEach((e=>{this._localStreams?this._localStreams.includes(e)||this._localStreams.push(e):this._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(-1===t)return;this._localStreams.splice(t,1);const r=e.getTracks();this.getSenders().forEach((e=>{r.includes(e.track)&&this.removeTrack(e)}))})}}function Ee(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=e=>{e.streams.forEach((e=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(e))return;this._remoteStreams.push(e);const t=new Event("addstream");t.stream=e,this.dispatchEvent(t)}))})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((t=>{if(e._remoteStreams||(e._remoteStreams=[]),e._remoteStreams.indexOf(t)>=0)return;e._remoteStreams.push(t);const r=new Event("addstream");r.stream=t,e.dispatchEvent(r)}))}),t.apply(e,arguments)}}}function ye(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,r=t.createOffer,i=t.createAnswer,n=t.setLocalDescription,s=t.setRemoteDescription,o=t.addIceCandidate;t.createOffer=function(e,t){const i=arguments.length>=2?arguments[2]:arguments[0],n=r.apply(this,[i]);return t?(n.then(e,t),Promise.resolve()):n},t.createAnswer=function(e,t){const r=arguments.length>=2?arguments[2]:arguments[0],n=i.apply(this,[r]);return t?(n.then(e,t),Promise.resolve()):n};let a=function(e,t,r){const i=n.apply(this,[e]);return r?(i.then(t,r),Promise.resolve()):i};t.setLocalDescription=a,a=function(e,t,r){const i=s.apply(this,[e]);return r?(i.then(t,r),Promise.resolve()):i},t.setRemoteDescription=a,a=function(e,t,r){const i=o.apply(this,[e]);return r?(i.then(t,r),Promise.resolve()):i},t.addIceCandidate=a}function ke(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,r=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=e=>r(be(e))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,r,i){t.mediaDevices.getUserMedia(e).then(r,i)}.bind(t))}function be(e){return e&&void 0!==e.video?Object.assign({},e,{video:U(e.video)}):e}function Pe(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,r){if(e&&e.iceServers){const t=[];for(let r=0;r<e.iceServers.length;r++){let i=e.iceServers[r];!i.hasOwnProperty("urls")&&i.hasOwnProperty("url")?(M("RTCIceServer.url","RTCIceServer.urls"),i=JSON.parse(JSON.stringify(i)),i.urls=i.url,delete i.url,t.push(i)):t.push(e.iceServers[r])}e.iceServers=t}return new t(e,r)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function Oe(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Le(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find((e=>"audio"===e.receiver.track.kind));!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const r=this.getTransceivers().find((e=>"video"===e.receiver.track.kind));!1===e.offerToReceiveVideo&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveVideo||r||this.addTransceiver("video")}return t.apply(this,arguments)}}function Ne(e){"object"!=typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var De=Object.freeze({__proto__:null,shimLocalStreamsAPI:Ie,shimRemoteStreamsAPI:Ee,shimCallbacksAPI:ye,shimGetUserMedia:ke,shimConstraints:be,shimRTCIceServerUrls:Pe,shimTrackEventTransceiver:Oe,shimCreateOfferLegacy:Le,shimAudioContext:Ne});function Ae(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){const r=new t(e),i=Z.parseCandidate(e.candidate),n=Object.assign(r,i);return n.toJSON=function(){return{candidate:n.candidate,sdpMid:n.sdpMid,sdpMLineIndex:n.sdpMLineIndex,usernameFragment:n.usernameFragment}},n}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,L(e,"icecandidate",(t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t)))}function Me(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const r=function(e){if(!e||!e.sdp)return!1;const t=Z.splitSections(e.sdp);return t.shift(),t.some((e=>{const t=Z.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))},i=function(e){const t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\\d+)/);if(null===t||t.length<2)return-1;const r=parseInt(t[1],10);return r!=r?-1:r},n=function(e){let r=65536;return"firefox"===t.browser&&(r=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),r},s=function(e,r){let i=65536;"firefox"===t.browser&&57===t.version&&(i=65535);const n=Z.matchPrefix(e.sdp,"a=max-message-size:");return n.length>0?i=parseInt(n[0].substr(19),10):"firefox"===t.browser&&-1!==r&&(i=2147483637),i},o=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){const{sdpSemantics:e}=this.getConfiguration();"plan-b"===e&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(r(arguments[0])){const e=i(arguments[0]),t=n(e),r=s(arguments[0],e);let o;o=0===t&&0===r?Number.POSITIVE_INFINITY:0===t||0===r?Math.max(t,r):Math.min(t,r);const a={};Object.defineProperty(a,"maxMessageSize",{get:()=>o}),this._sctp=a}return o.apply(this,arguments)}}function xe(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function t(e,t){const r=e.send;e.send=function(){const i=arguments[0],n=i.length||i.size||i.byteLength;if("open"===e.readyState&&t.sctp&&n>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return r.apply(e,arguments)}}const r=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const e=r.apply(this,arguments);return t(e,this),e},L(e,"datachannel",(e=>(t(e.channel,e.target),e)))}function Ue(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((e=>{const r=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;const r=new Event("connectionstatechange",e);t.dispatchEvent(r)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}}))}function we(e,t){if(!e.RTCPeerConnection)return;if("chrome"===t.browser&&t.version>=71)return;if("safari"===t.browser&&t.version>=605)return;const r=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\\na=extmap-allow-mixed")){const r=t.sdp.split("\\n").filter((e=>"a=extmap-allow-mixed"!==e.trim())).join("\\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:r}):t.sdp=r}return r.apply(this,arguments)}}function $e(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const r=e.RTCPeerConnection.prototype.addIceCandidate;r&&0!==r.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}var je=Object.freeze({__proto__:null,shimRTCIceCandidate:Ae,shimMaxMessageSize:Me,shimSendThrowTypeError:xe,shimConnectionState:Ue,removeExtmapAllowMixed:we,shimAddIceCandidateNullOrEmpty:$e});const Ve=function({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0}){const r=A,i=function(e){const t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;const{navigator:r}=e;if(r.mozGetUserMedia)t.browser="firefox",t.version=O(r.userAgent,/Firefox\\/(\\d+)\\./,1);else if(r.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=O(r.userAgent,/Chrom(e|ium)\\/(\\d+)\\./,2);else if(r.mediaDevices&&r.userAgent.match(/Edge\\/(\\d+).(\\d+)$/))t.browser="edge",t.version=O(r.userAgent,/Edge\\/(\\d+).(\\d+)$/,2);else{if(!e.RTCPeerConnection||!r.userAgent.match(/AppleWebKit\\/(\\d+)\\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=O(r.userAgent,/AppleWebKit\\/(\\d+)\\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}(e),n={browserDetails:i,commonShim:je,extractVersion:O,disableLog:N,disableWarnings:D};switch(i.browser){case"chrome":if(!z||!Y||!t.shimChrome)return r("Chrome shim is not included in this adapter release."),n;if(null===i.version)return r("Chrome shim can not determine version, not shimming."),n;r("adapter.js shimming chrome."),n.browserShim=z,$e(e,i),V(e,i),B(e),Y(e,i),H(e),W(e,i),F(e),K(e),G(e),q(e,i),Ae(e),Ue(e),Me(e,i),xe(e),we(e,i);break;case"firefox":if(!Te||!pe||!t.shimFirefox)return r("Firefox shim is not included in this adapter release."),n;r("adapter.js shimming firefox."),n.browserShim=Te,$e(e,i),le(e,i),pe(e,i),he(e),fe(e),_e(e),me(e),ve(e),Re(e),ge(e),Se(e),Ce(e),Ae(e),Ue(e),Me(e,i),xe(e);break;case"edge":if(!ue||!ce||!t.shimEdge)return r("MS edge shim is not included in this adapter release."),n;r("adapter.js shimming edge."),n.browserShim=ue,oe(e),ae(e),ce(e,i),de(e),Me(e,i),xe(e);break;case"safari":if(!De||!t.shimSafari)return r("Safari shim is not included in this adapter release."),n;r("adapter.js shimming safari."),n.browserShim=De,$e(e,i),Pe(e),Le(e),ye(e),Ie(e),Ee(e),Oe(e),ke(e),Ne(e),Ae(e),Me(e,i),xe(e),we(e,i);break;default:r("Unsupported browser!")}return n}({window:"undefined"==typeof window?void 0:window});var Be,He,Fe;!function(e){e.FPS_10="FPS_10",e.FPS_15="FPS_15",e.FPS_24="FPS_24",e.FPS_30="FPS_30"}(Be||(Be={})),function(e){e.W176_H132="W176_H132",e.W176_H144="W176_H144",e.W256_H144="W256_H144",e.W320_H180="W320_H180",e.W240_H240="W240_H240",e.W320_H240="W320_H240",e.W480_H360="W480_H360",e.W640_H360="W640_H360",e.W480_H480="W480_H480",e.W640_H480="W640_H480",e.W720_H480="W720_H480",e.W1280_H720="W1280_H720",e.W1920_H1080="W1920_H1080"}(He||(He={})),function(e){e[e.AUDIO_ONLY=0]="AUDIO_ONLY",e[e.VIDEO_ONLY=1]="VIDEO_ONLY",e[e.AUDIO_VIDEO=2]="AUDIO_VIDEO"}(Fe||(Fe={}));const Ke={[He.W176_H132]:{width:176,height:132,maxBitrate:150,minBitrate:80},[He.W176_H144]:{width:176,height:144,maxBitrate:160,minBitrate:80},[He.W256_H144]:{width:256,height:144,maxBitrate:240,minBitrate:120},[He.W320_H180]:{width:320,height:180,maxBitrate:280,minBitrate:120},[He.W240_H240]:{width:240,height:240,maxBitrate:280,minBitrate:120},[He.W320_H240]:{width:320,height:240,maxBitrate:400,minBitrate:120},[He.W480_H360]:{width:480,height:360,maxBitrate:650,minBitrate:150},[He.W640_H360]:{width:640,height:360,maxBitrate:800,minBitrate:180},[He.W480_H480]:{width:480,height:480,maxBitrate:800,minBitrate:180},[He.W640_H480]:{width:640,height:480,maxBitrate:900,minBitrate:200},[He.W720_H480]:{width:720,height:480,maxBitrate:1e3,minBitrate:200},[He.W1280_H720]:{width:1280,height:720,maxBitrate:2200,minBitrate:250},[He.W1920_H1080]:{width:1920,height:1080,maxBitrate:4e3,minBitrate:400}},Ge=(e,t)=>{const r=e*t;let i=Number.MAX_VALUE,n=null;for(const e in Ke){const t=Ke[e],s=Math.abs(t.width*t.height-r);s<i&&(n=t,i=s)}return n},Je={10:1,15:1,24:1.5,30:1.5},We=e=>{let t=Number.MAX_VALUE,r=1;for(const i in Je){const n=Math.abs(e-parseInt(i));n<t&&(t=n,r=Je[i])}return r},Ye={getCameras:()=>S(void 0,void 0,void 0,(function*(){return(yield navigator.mediaDevices.enumerateDevices()).filter((e=>"videoinput"===e.kind))})),getMicrophones:()=>S(void 0,void 0,void 0,(function*(){return(yield navigator.mediaDevices.enumerateDevices()).filter((e=>"audioinput"===e.kind))})),getSpeakers:()=>S(void 0,void 0,void 0,(function*(){return(yield navigator.mediaDevices.enumerateDevices()).filter((e=>"audiooutput"===e.kind))}))};class qe extends _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.EventEmitter{constructor(e,t,r,i,n){super(),this._tag=e,this._userId=t,this._kind=r,this._isLocalTrack=i,this._roomId=n,this._localMuted=!1,this._remoteMuted=!1,this._streamId=[this._userId||this._roomId,this._tag].join("_"),this._id=[this._streamId,this.isAudioTrack()?0:1].join("_")}getStreamId(){return this._streamId}getTrackId(){return this._id}getUserId(){return this._userId}__innerGetMediaStreamTrack(){return this._msTrack}getTag(){return this._tag}isLocalTrack(){return this._isLocalTrack}isVideoTrack(){return"video"===this._kind}isAudioTrack(){return"audio"===this._kind}isReady(){var e;return"live"===(null===(e=this._msTrack)||void 0===e?void 0:e.readyState)}__innerSetMediaStreamTrack(e){this._msTrack=e,this._setLocalMuted(this._localMuted);const t=this._msStream=this._msStream||new MediaStream,r=t.getTracks()[0];r&&t.removeTrack(r),e?t.addTrack(e):this._element&&(this._element.pause(),this._element.srcObject=null)}_setLocalMuted(e){this._msTrack&&(this._msTrack.enabled=!e),this._localMuted=e}mute(){C.info(`set ${this._id} enabled: false`),this._setLocalMuted(!0)}unmute(){C.info(`set ${this._id} enabled: true`),this._setLocalMuted(!1)}isLocalMuted(){return this._localMuted}isMCUTrack(){return Boolean(this._roomId)}isOwnerMuted(){return this._remoteMuted}play(e,t){return S(this,void 0,void 0,(function*(){if(!this._msTrack)return C.warn(`the track is not ready to play -> id: ${this._id}`),{code:T.TRACK_NOT_READY};if("ended"===this._msTrack.readyState&&C.warn(`the track\'s readyState is \'ended\' -> id: ${this._id}`),null==t?void 0:t.volume){if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(null==t?void 0:t.volume))return C.error(`${null==t?void 0:t.volume} is not a number, the valid range of options.volume is 0-100`),{code:T.PARAMS_ERROR};(null==t?void 0:t.volume)<0&&(t.volume=0,C.warn("the valid range of options.volume is 0-100, the value of volume has been set 0")),(null==t?void 0:t.volume)>100&&(t.volume=100,C.warn("the valid range of options.volume is 0-100, the value of volume has been set 100"))}if(null==t?void 0:t.audioDeviceId){if(!(yield Ye.getSpeakers()).map((e=>e.deviceId)).includes(t.audioDeviceId))return C.error(`the options.audioDeviceId is invalid --\\x3e ${t.audioDeviceId}`),{code:T.PARAMS_ERROR}}const i=this.isVideoTrack();if(i&&(!e||!(e instanceof HTMLVideoElement)))return C.error(`the video track need an <video> to play -> id: ${this._id}`),{code:T.VIDEO_TRACK_MISS_MEDIA_ELEMENT};this._element=i?e:this._element||new Audio,this._localMuted&&this._setLocalMuted(!1),this._element.srcObject&&this._element.srcObject===this._msStream||this._element.pause(),this._element.onloadstart=e=>{var t;C.debug(`HTMLMediaElement onloadstart -> id: ${null===(t=e.target)||void 0===t?void 0:t.id}, trackId: ${this._id}`)},this._element.ondurationchange=e=>{var t;C.debug(`HTMLMediaElement ondurationchange -> id: ${null===(t=e.target)||void 0===t?void 0:t.id}, trackId: ${this._id}`)},this._element.onloadedmetadata=e=>{var t;C.debug(`HTMLMediaElement onloadedmetadata -> id: ${null===(t=e.target)||void 0===t?void 0:t.id}, trackId: ${this._id}`)},this._element.onloadeddata=e=>{var t;C.debug(`HTMLMediaElement onloadeddata -> id: ${null===(t=e.target)||void 0===t?void 0:t.id}, trackId: ${this._id}`)},this._element.onabort=e=>{var t;C.info(`HTMLMediaElement onabort -> id: ${null===(t=e.target)||void 0===t?void 0:t.id}, trackId: ${this._id}`)},this._element.oncanplay=e=>{var t;C.info(`HTMLMediaElement oncanplay -> id: ${null===(t=e.target)||void 0===t?void 0:t.id}, trackId: ${this._id}`)},this._element.onvolumechange=e=>{var t;const r=Math.floor(100*(null===(t=e.target)||void 0===t?void 0:t.volume));C.info(`HTMLMediaElement onvolumechange -> volume: ${r}, trackId: ${this._id}`)},this._element.srcObject=this._msStream,this._element.autoplay=!0,i&&(this._element.playsInline=!0,this._element.x5PlaysInline=!0,this._element.webkitPlaysInline=!0),i||!(null==t?void 0:t.volume)&&0!==(null==t?void 0:t.volume)||(this._element.volume=(null==t?void 0:t.volume)/100);try{(null==t?void 0:t.audioDeviceId)&&!i?yield this._element.setSinkId(t.audioDeviceId):this._element.play()}catch(e){return"No permission to use requested device"===e.message?(C.error(`setSinkId failed -> ${e.message}`),{code:T.NO_PERMISSION_TO_USE_REQUESTED_DEVICE}):(C.error(e),{code:T.TRACK_PLAY_ERROR})}return{code:T.SUCCESS}}))}__innerDestroy(){this.__innerSetMediaStreamTrack(void 0)}__releaseMediaElement(){this._element&&(this._element.remove(),this._element.srcObject=null)}}class ze extends qe{constructor(e,t,r,i){super(e,t,r,!0),this._isPublished=!1,this.__innerSetMediaStreamTrack(i),i.onended=()=>{i.onended=null,this.emit(ze.EVENT_LOCAL_TRACK_END,this),this.removeAll(ze.EVENT_LOCAL_TRACK_END)}}_setLocalMuted(e){const t=this._localMuted!==e;super._setLocalMuted(e),this._remoteMuted=this._localMuted,t&&this.emit(ze.__INNER_EVENT_MUTED_CHANGE__,this)}__innerSetPublished(e){this._isPublished=e}isPublished(){return this._isPublished}destroy(){var e;C.info(`track is destroyed -> trackId: ${this.getTrackId()}`),null===(e=this._msTrack)||void 0===e||e.stop(),super.__innerDestroy(),this.isAudioTrack()&&super.__releaseMediaElement(),this.emit(ze.__INNER_EVENT_DESTROY__,this)}setBitrate(e=0,t=0,i=0){!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(e)||!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(t)||!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(i)||e<=0||t<=0||e<t?C.error("setBitrate params error ->"):this._bitrateInfo={max:e,min:t,start:i}}getBitrate(){var e,t;const{min:r,max:i}=this._msTrack?_t(this._msTrack):{min:0,max:0};return{min:(null===(e=this._bitrateInfo)||void 0===e?void 0:e.min)||r,max:(null===(t=this._bitrateInfo)||void 0===t?void 0:t.max)||i}}}ze.EVENT_LOCAL_TRACK_END="local-track-end",ze.__INNER_EVENT_MUTED_CHANGE__="inner-muted-change",ze.__INNER_EVENT_DESTROY__="inner-destroy";class Qe extends ze{constructor(e,t,r){super(e,t,"audio",r)}setBitrate(e,t,r){C.warn("`setBitrate` invalid for audio track")}getBitrate(){return{start:32,max:32,min:32}}}class Xe extends ze{constructor(e,t,r,i=!1){super(e,t,"video",r),this._isTiny=i}__isTiny(){return this._isTiny}getStreamId(){const e=super.getStreamId();return this._isTiny?`${e}_tiny`:e}getTrackId(){const e=super.getTrackId();return this._isTiny?`${e}_tiny`:e}}class Ze extends ze{constructor(e,t,r,i,n){super(e,t,r,i),this._resource=n,Ze.__innerSetMapping(this.getTrackId(),n)}static __innerSetMapping(e,t){const r=this._mapping.get(t)||[];r.push(e),this._mapping.set(t,r)}static __innerRemoveMapping(e,t){var r,i;const n=null===(r=this._mapping.get(t))||void 0===r?void 0:r.filter((t=>t!==e));n&&n.length>0?this._mapping.set(t,n):(this._mapping.delete(t),t.pause(),t.src="",null===(i=t.parentNode)||void 0===i||i.removeChild(t))}destroy(){this.isAudioTrack()&&this.mute(),Ze.__innerRemoveMapping(this.getTrackId(),this._resource),super.destroy()}}Ze._mapping=new Map;class et extends Ze{constructor(e,t,r,i){super(e,t,"video",r,i)}}class tt extends Ze{constructor(e,t,r,i){super(e,t,"audio",r,i)}_setLocalMuted(e){this._resource&&(this._resource.muted=e),super._setLocalMuted(e)}play(){return this._setLocalMuted(!1),Promise.resolve({code:T.SUCCESS})}}class rt extends Qe{}class it extends Xe{}class nt extends Xe{}class st extends qe{constructor(e,t,r,i){super(e,t,r,!1,i),this._isSubscribed=!1}__innerSetRemoteMuted(e){this._remoteMuted=e}__innerSetSubscribed(e){this._isSubscribed=e}isSubscribed(){return this._isSubscribed}}class ot extends st{constructor(e,t,r){super(e,t,"audio",r)}}class at extends st{constructor(e,t,r){super(e,t,"video",r)}}const ct=(e,t)=>({name:e,content:JSON.stringify({uris:t,ignore:!0})}),dt=e=>JSON.stringify(e),ut=e=>/^[a-zA-Z\\d-=]+$/g.test(e),lt="http:"!==location.protocol||["localhost","127.0.0.1"].includes(location.hostname),ht=e=>{if(void 0===e)return 0;if((0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(e))return e;const t=e;return t.exact||t.ideal||t.max||0},pt=e=>{const t=e.getConstraints();return{width:ht(t.width),height:ht(t.height),frameRate:ht(t.frameRate)}},_t=e=>{const{width:t,height:r,frameRate:i}=pt(e),n=Ge(t,r),s=We(i);return{min:n.minBitrate*s,max:n.maxBitrate*s}},mt=e=>[e.msid,e.mediaType].join("_"),ft=e=>{const t=e.split("_");return{mediaType:parseInt(t.pop()),tag:t.pop(),userId:t.join("_")}},vt=(e,t)=>[e,t].join("_"),Rt=e=>e.map((e=>Object.assign({},e))),gt=(e,t,r=!1)=>{e=e.slice();const i=[],n=[],s=[];return t.forEach((t=>{const n=mt(t);let o=e.findIndex((e=>mt(e)===n));if(r&&(o=e.findIndex((e=>e.uri===t.uri))),-1===o)return void i.push(t);const a=e[o];a.uri!==t.uri?i.push(t):a.state!==t.state&&s.push(t),e.splice(o,1)})),n.push(...e),{publishedList:i,unpublishedList:n,modifiedList:s}},St=()=>{let e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}));return e=e.replace(/-/g,"")+"0",e=parseInt(e,16),e=(e=>{const t="0123456789abcdefghigklmnopqrstuvwxyzABCDEFGHIGKLMNOPQRSTUVWXYZ+/".split(""),r=t.length+1;let i=+e;const n=[];do{const e=i%r;i=(i-e)/r,n.unshift(t[e])}while(i);return n.join("")})(e),e.length>22&&(e=e.slice(0,22)),e},Ct=e=>{const[t,r]=e.split("_").map((e=>parseInt(e.replace(/[^\\d]/g,""))));return{width:t,height:r}},Tt=e=>!!He[e],It=e=>!!Be[e],Et=e=>parseInt(e.replace("FPS_","")),yt=(()=>{const{browser:e,version:t,supportsUnifiedPlan:r}=Ve.browserDetails;return{browser:e,version:t,supportsUnifiedPlan:!1!==r}})();function kt(){return"captureStream"in HTMLMediaElement.prototype||"mozCaptureStream"in HTMLMediaElement.prototype}function bt(){return"mediaDevices"in navigator&&"getDisplayMedia"in navigator.mediaDevices}const Pt=e=>"[object Null]"===Object.prototype.toString.call(e),Ot=e=>1===e.type,Lt=e=>{const t={},r=Object.keys(e.users);return r.length&&r.forEach((r=>{const i=[],n=e.users[r];if(n.uris)try{i.push(...JSON.parse(n.uris))}catch(e){C.warn(`invalid user data -> userId: ${r}, userData: ${n}`)}t[r]=i})),t};var Nt,Dt;!function(e){e.PUBLISH="RCRTC:PublishResource",e.UNPUBLISH="RCRTC:UnpublishResource",e.MODIFY="RCRTC:ModifyResource",e.TOTAL_CONTENT_RESOURCE="RCRTC:TotalContentResources",e.STATE="RCRTC:state",e.ROOM_NOTIFY="RCRTC:RoomNtf",e.USER_NOTIFY="RCRTC:UserNtf",e.KICK="RCRTC:kick",e.PK_INVITE="RCRTC:invite",e.PK_INVITE_TIMEOUT="RCRTC:inviteTimeout",e.PK_CANCEL_INVITE="RCRTC:cancelInvite",e.PK_INVITE_ANSWER="RCRTC:answerInvite",e.PK_END="RCRTC:endInvite",e.OTHER_ROOM_OFFLINE="RCRTC:otherRoomOffline"}(Nt||(Nt={})),function(e){e.SUCCESS="Success",e.FAIL="Fail"}(Dt||(Dt={}));class At{constructor(e,t,r,i=1e4){this._roomId=e,this._roomMode=t,this._context=r,this._gap=i,this._latestTimestamp=Date.now(),this._timer=null}start(){return S(this,void 0,void 0,(function*(){this._timer||(this._timer=setInterval(this._loop.bind(this),this._gap))}))}_loop(){var e,t,r;return S(this,void 0,void 0,(function*(){const n=yield new Promise((e=>{this._context.rtcPing(this._roomId,this._roomMode).then(e).catch((t=>{C.error(`rtcping receive unknown error -> ${t}`),e(_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.UNKNOWN)})),setTimeout(e,1e4,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.TIMEOUT)})),s=Date.now();if(n===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS)return this._latestTimestamp=s,void(null===(e=this.onPingResult)||void 0===e||e.call(this,Dt.SUCCESS));null===(t=this.onPingResult)||void 0===t||t.call(this,Dt.FAIL),C.warn(`rtcping failed -> code: ${n}`),(40003===n||s-this._latestTimestamp>6e4)&&(this.stop(),null===(r=this.onFailed)||void 0===r||r.call(this,40003===n))}))}stop(){this._timer&&(clearInterval(this._timer),this._timer=null)}}var Mt;!function(e){e[e.NORMAL=1]="NORMAL",e[e.TINY=2]="TINY"}(Mt||(Mt={}));const xt=(e,t)=>Math.round(8*t/e),Ut=(e,t=2)=>{const r=10**t;return Math.round(e*r)/r},wt=(e,t=2)=>{e>1&&(e/=32767);const r=10**t;return Math.ceil(e*r)},$t=(e,t,r,i)=>{if(0===t)return 0;if(!r||!i)return Ut(e/t,3);const n=t-i;if(0===n)return 0;const s=e-r;return s<0||n<0?0:Ut(s/n,3)},jt=e=>{const{jitter:t,rtt:r,packetsLostRate:i}=e;return!Pt(t)||!Pt(r)||0!==i};class Vt{constructor(e,t){this._rtcPeerConn=e,this._sdpSemantics=t,this._latestPacketsSent={},this._latestBytesSent={},this._latestBytesRecv={},this._latestPacketsRecv={}}updateBytesSent(e,t,r){let i,n;if(this._latestBytesSent[e]&&t<this._latestBytesSent[e].bytesSent&&this.clearLatestpacketsSent([e]),this._latestBytesSent[e]){const{bytesSent:s,timestamp:o}=this._latestBytesSent[e];i=t-s,n=r-o,this._latestBytesSent[e]={bytesSent:t,timestamp:r}}else i=t,n=1e3,this._latestBytesSent[e]={bytesSent:t,timestamp:r};return xt(n,i)}updateBytesRecv(e,t,r){let i,n;if(this._latestBytesRecv[e]&&t<this._latestBytesRecv[e].bytesRecv&&this.clearLatestPacketsRecv([e]),this._latestBytesRecv[e]){const{bytesRecv:s,timestamp:o}=this._latestBytesRecv[e];i=t-s,n=r-o,this._latestBytesRecv[e]={bytesRecv:t,timestamp:r}}else i=t,n=1e3,this._latestBytesRecv[e]={bytesRecv:t,timestamp:r};return xt(n,i)}updateSenderPacketsLost(e,t,r){let i;if(Object.prototype.hasOwnProperty.call(this._latestPacketsSent[e],"packetsSent")){const{packetsLost:n,packetsSent:s}=this._latestPacketsSent[e];i=$t(t,r,n,s),this._latestPacketsSent[e].packetsLost=t,this._latestPacketsSent[e].packetsSent=n===t?s:r}else i=$t(t,r),this._latestPacketsSent[e].packetsLost=t,this._latestPacketsSent[e].packetsSent=r;return i}updateReceiverPacketsLost(e,t,r){let i;if(this._latestPacketsRecv[e]){const{packetsLost:n,packetsRecv:s}=this._latestPacketsRecv[e];i=$t(t,r+t,n,s+n)}else i=$t(t,r);return this._latestPacketsRecv[e]={packetsLost:t,packetsRecv:r},i}clearLatestpacketsSent(e){e.forEach((e=>{if(parseInt(e.split("_").pop())===Fe.VIDEO_ONLY){const t=`${e}_tiny`;delete this._latestPacketsSent[t],delete this._latestBytesSent[t]}delete this._latestPacketsSent[e],delete this._latestBytesSent[e]}))}clearLatestPacketsRecv(e){e.forEach((e=>{delete this._latestPacketsRecv[e],delete this._latestBytesRecv[e]}))}parseRTCStatsReport(e){const t=e.keys(),r={};let i=t.next();for(;!i.done;){const n=i.value,s=e.get(n);/^RTCCodec_/.test(n)||(r[n]=s),i=t.next()}return r}formatRCRTCStateReport(e){return{senders:[],receivers:[]}}getAudioLevelList(e){return[]}getResourceIdByParseSdp(e){var t,r;const i=e.ssrc,n=e.kind||e.mediaType,s=null===(t=this._rtcPeerConn.currentLocalDescription)||void 0===t?void 0:t.sdp,o=null===(r=this._rtcPeerConn.currentRemoteDescription)||void 0===r?void 0:r.sdp;let a;a="unified-plan"===this._sdpSemantics?new RegExp("a=msid:(.*?) "):new RegExp(`a=ssrc:${i} msid:(.*?) `);const c=null==s?void 0:s.split("\\r\\nm="),d=null==c?void 0:c.filter((e=>e.includes(`a=ssrc:${i}`)))[0],u=null==d?void 0:d.match(a);let l=u?u[1]:"";if(l)return`${l}_${"video"===n?1:0}`;const h=null==o?void 0:o.split("\\r\\nm="),p=null==h?void 0:h.filter((e=>e.includes(`a=ssrc:${i}`)))[0],_=null==p?void 0:p.match(a);return l=_?_[1]:"",`${l}_${"video"===n?1:0}`}isValidSender(e){var t;const r=null===(t=this._rtcPeerConn.currentLocalDescription)||void 0===t?void 0:t.sdp,{ssrc:i}=e;return!(null==r?void 0:r.split("\\r\\nm=").some((e=>e.includes(i)&&e.includes("a=inactive"))))}isValidReceiver(e){var t;const r=null===(t=this._rtcPeerConn.currentRemoteDescription)||void 0===t?void 0:t.sdp,{ssrc:i}=e;return!(null==r?void 0:r.split("\\r\\nm=").some((e=>e.includes(i)&&e.includes("a=inactive"))))}}class Bt extends Vt{formatRCRTCStateReport(e){const t={senders:[],receivers:[]},r=Math.floor(e.RTCPeerConnection.timestamp);t.timestamp=r;const i=Object.keys(e);let n=0,s=0;i.filter((e=>/^RTCOutboundRTP(Video|Audio)Stream_/.test(e))).forEach((i=>{const o=e[i];if("unified-plan"===this._sdpSemantics&&!this.isValidSender(o))return;const{id:a,kind:c,transportId:d,mediaSourceId:u,remoteId:l,packetsSent:h,bytesSent:p,trackId:_,encoderImplementation:m,pliCount:f,nackCount:v,firCount:R}=o;if(!_)return;let{framesPerSecond:g,frameWidth:S,frameHeight:C}=o;"video"!==c||S||C||g||(S=e[_].frameWidth,C=e[_].frameHeight,g=u?e[u].framesPerSecond:null);const T=e[l];let I=null,E=null,y=0;T&&(I=T.jitter,E=T.roundTripTime,y=T.packetsLost),n+=y;const k=this.getResourceIdByParseSdp(o),b=u?e[u].audioLevel:e[_].audioLevel;let P=null;!this._latestPacketsSent[k]&&(this._latestPacketsSent[k]={}),T?P=this.updateSenderPacketsLost(k,y,h):this._latestPacketsSent[k].crtPacketsSent=h;let O=this.updateBytesSent(k,p,r);O<0&&(O=0),s+=O,t.senders.push({id:a,trackId:k,kind:c,packetsLostRate:P,remoteResource:!1,audioLevel:b||0===b?wt(b):null,frameWidth:S,frameHeight:C,frameRate:g,bitrate:O,jitter:I?Math.round(1e3*I):I,rtt:E,encoderImplementation:m,pliCount:f,nackCount:v,googFirsSent:-1,samplingRate:-1,googRenderDelayMs:-1,trackState:-1})}));i.filter((e=>/RTCRemoteInboundRtp(Video|Audio)Stream_/.test(e))).forEach((r=>{const{localId:i,jitter:n,roundTripTime:s,packetsLost:o}=e[r],a=t.senders.filter((e=>e.id===i))[0];if(a&&!jt(a)){const t=this.getResourceIdByParseSdp(e[a.id]);a.jitter=Math.round(1e3*n),a.rtt=s;const r=this._latestPacketsSent[t].crtPacketsSent;a.packetsLostRate=this.updateSenderPacketsLost(t,o,r)}}));let o=0;i.filter((e=>/^RTCInboundRTP(Video|Audio)Stream_/.test(e))).forEach((i=>{const s=e[i];if("unified-plan"===this._sdpSemantics&&!this.isValidReceiver(s))return;const{trackId:a,packetsLost:c,packetsReceived:d,jitter:u,bytesReceived:l,framesPerSecond:h,kind:p,codecImplementationName:_,nackCount:m,pliCount:f}=s;if(!a)return;let{frameWidth:v,frameHeight:R,audioLevel:g}=s;"video"===p?v||R||(v=e[a].frameWidth,R=e[a].frameHeight):g||(g=e[a].audioLevel),n+=c;const S=this.getResourceIdByParseSdp(s),C=this.updateReceiverPacketsLost(S,c,d);let T=this.updateBytesRecv(S,l,r);T<0&&(T=0),o+=T,t.receivers.push({trackId:S,kind:p,packetsLostRate:C,remoteResource:!0,audioLevel:g||0===g?wt(g):null,frameWidth:v,frameHeight:R,frameRate:h,bitrate:T,jitter:u?Math.round(1e3*u):0,codecImplementationName:_,nackCount:m,pliCount:f,rtt:null,samplingRate:-1,googFirsReceived:-1,googRenderDelayMs:-1,trackState:-1})}));const a=i.filter((e=>/^RTCTransport_/.test(e)))[0];if(a){const r=e[a],{selectedCandidatePairId:i}=r;if(i){const r=e[i],{availableOutgoingBitrate:a,availableIncomingBitrate:c,currentRoundTripTime:d,localCandidateId:u,remoteCandidateId:l}=r,h=e[u],{ip:p,port:_,networkType:m}=h,f=e[l],{ip:v,port:R,protocol:g}=f;t.iceCandidatePair={IP:p,port:_,networkType:m,remoteIP:v,remotePort:R,protocol:g,bitrateRecv:o,bitrateSend:s,rtt:1e3*d,availableOutgoingBitrate:a,availableIncomingBitrate:c,totalPacketsLost:n},t.receivers.forEach((e=>{e.rtt=d}))}}return t}getAudioLevelList(e){const t=[],r=Object.keys(e);r.filter((e=>/^RTCOutboundRTPAudioStream_/.test(e))).forEach((r=>{var i;const n=e[r];if("unified-plan"===this._sdpSemantics&&!this.isValidSender(n))return;const{mediaSourceId:s,trackId:o}=n,a=this.getResourceIdByParseSdp(n),c=s&&e[s]?e[s].audioLevel:(null===(i=e[o])||void 0===i?void 0:i.audioLevel)||null;t.push({trackId:a,audioLevel:c||0===c?wt(c):null})}));return r.filter((e=>/^RTCInboundRTPAudioStream_/.test(e))).forEach((r=>{const i=e[r];if("unified-plan"===this._sdpSemantics&&!this.isValidReceiver(i))return;const{trackId:n}=i,s=i.audioLevel||e[n].audioLevel,o=this.getResourceIdByParseSdp(i);t.push({trackId:o,audioLevel:s||0===s?wt(s):null})})),t}}class Ht extends Vt{formatRCRTCStateReport(e){const t=+new Date,r={senders:[],receivers:[],timestamp:t};let i=0,n=0,s=0;for(const o in e){const a=e[o],c=a.type;if("outbound-rtp"===c){if("unified-plan"===this._sdpSemantics&&!this.isValidSender(a))continue;const{id:s,kind:o,bytesSent:c,packetsSent:d,bitrateMean:u,framerateMean:l,nackCount:h,pliCount:p,remoteId:_}=a,{jitter:m,roundTripTime:f,packetsLost:v}=_?e[_]:{jitter:null,roundTripTime:null,packetsLost:0},R=this.getResourceIdByParseSdp(a);i+=v;let g=null;!this._latestPacketsSent[R]&&(this._latestPacketsSent[R]={}),_?g=this.updateSenderPacketsLost(R,v,d):this._latestPacketsSent[R].crtPacketsSent=d;let S=0;"video"===o?u&&(S=Math.floor(u/1e3)):S=this.updateBytesSent(R,c,t),S<0&&(S=0),n+=S,r.senders.push({trackId:R,kind:o,packetsLostRate:g,remoteResource:!1,audioLevel:null,frameWidth:null,frameHeight:null,frameRate:Math.floor(l),bitrate:S,jitter:m?Math.round(1e3*m):null,rtt:f,encoderImplementation:null,pliCount:p,nackCount:h,googFirsSent:-1,samplingRate:-1,googRenderDelayMs:-1,trackState:-1})}if("remote-inbound-rtp"===c){const{localId:t}=a,i=this.getResourceIdByParseSdp(e[t]),n=r.senders.filter((e=>e.trackId===i))[0];n&&jt(n)&&(n.jitter=Math.round(1e3*a.jitter),n.rtt=a.rtt,n.packetsLostRate=this.updateSenderPacketsLost(i,a.packetsLost,this._latestPacketsSent[i].crtPacketsSent))}if("inbound-rtp"===c){if("unified-plan"===this._sdpSemantics&&!this.isValidReceiver(a))continue;const{id:e,packetsLost:n,bytesReceived:o,packetsReceived:c,jitter:d,framerateMean:u,kind:l,bitrateMean:h,nackCount:p,pliCount:_}=a,m=this.getResourceIdByParseSdp(a);i+=n;const f=this.updateReceiverPacketsLost(m,n,c);let v=0;"video"===l?h&&(v=Math.floor(h/1e3)):v=this.updateBytesRecv(m,o,t),v<0&&(v=0),s+=v,r.receivers.push({trackId:m,kind:l,packetsLostRate:f,remoteResource:!0,audioLevel:null,frameWidth:null,frameHeight:null,frameRate:Math.floor(u),bitrate:v,jitter:d?Math.round(1e3*d):null,codecImplementationName:null,nackCount:p,pliCount:_,rtt:null,samplingRate:-1,googFirsReceived:-1,googRenderDelayMs:-1,trackState:-1})}if("candidate-pair"===c&&"succeeded"===a.state){const t=e[a.localCandidateId],{address:o,port:c}=t,d=e[a.remoteCandidateId],{address:u,port:l,protocol:h}=d;r.iceCandidatePair={IP:o,port:c,networkType:null,remoteIP:u,remotePort:l,protocol:h,bitrateRecv:s,bitrateSend:n,rtt:null,availableOutgoingBitrate:null,availableIncomingBitrate:null,totalPacketsLost:i}}}return r.iceCandidatePair&&(r.iceCandidatePair.bitrateSend=n),r.iceCandidatePair&&(r.iceCandidatePair.bitrateRecv=s),r}getAudioLevelList(e){const t=[];for(const r in e){const i=e[r],n=i.type;if("outbound-rtp"===n){if("unified-plan"===this._sdpSemantics&&!this.isValidSender(i))continue;const{kind:e}=i;if("video"===e)continue;const r=this.getResourceIdByParseSdp(i);t.push({trackId:r,audioLevel:null})}if("inbound-rtp"===n){if("unified-plan"===this._sdpSemantics&&!this.isValidReceiver(i))continue;const{kind:e}=i;if("video"===e)continue;const r=this.getResourceIdByParseSdp(i);t.push({trackId:r,audioLevel:null})}}return t}}class Ft extends Vt{formatRCRTCStateReport(e){const t={senders:[],receivers:[]},r=Math.floor(e.RTCPeerConnection.timestamp);t.timestamp=r;const i=Object.keys(e);let n=0,s=0;i.filter((e=>/^RTCOutboundRTP(Video|Audio)Stream_/.test(e))).forEach((i=>{const n=e[i];if("unified-plan"===this._sdpSemantics&&!this.isValidSender(n))return;const o=this.getResourceIdByParseSdp(n),{mediaType:a,transportId:c,remoteId:d,packetsSent:u,bytesSent:l,trackId:h,encoderImplementation:p,pliCount:_,nackCount:m,firCount:f}=n;if(!h)return;const{audioLevel:v,frameHeight:R,frameWidth:g}=e[h];let S=this.updateBytesSent(o,l,r);S<0&&(S=0),s+=S,t.senders.push({trackId:o,kind:a,packetsLostRate:null,remoteResource:!1,audioLevel:v||0===v?wt(v):null,frameWidth:g,frameHeight:R,frameRate:null,bitrate:S,jitter:null,rtt:null,encoderImplementation:p,pliCount:_,nackCount:m,googFirsSent:-1,samplingRate:-1,googRenderDelayMs:-1,trackState:-1})}));let o=0;i.filter((e=>/^RTCInboundRTP(Video|Audio)Stream_/.test(e))).forEach((i=>{const s=e[i];if("unified-plan"===this._sdpSemantics&&!this.isValidReceiver(s))return;const{trackId:a,packetsLost:c,packetsReceived:d,jitter:u,bytesReceived:l,mediaType:h,nackCount:p,pliCount:_}=s,m=this.getResourceIdByParseSdp(s);if(!a)return;const{frameHeight:f,frameWidth:v,audioLevel:R}=e[a];n+=c;const g=this.updateReceiverPacketsLost(m,c,d);let S=this.updateBytesRecv(m,l,r);S<0&&(S=0),o+=S,t.receivers.push({trackId:m,kind:h,packetsLostRate:g,remoteResource:!0,audioLevel:R||0===R?wt(R):null,frameWidth:v,frameHeight:f,frameRate:null,bitrate:S,jitter:u,codecImplementationName:null,nackCount:p,pliCount:_,rtt:null,samplingRate:-1,googFirsReceived:-1,googRenderDelayMs:-1,trackState:-1})}));const a=i.filter((e=>/^RTCTransport_/.test(e)))[0];if(a){const r=e[a],{selectedCandidatePairId:i}=r;if(i){const r=e[i],{availableOutgoingBitrate:a,availableIncomingBitrate:c,currentRoundTripTime:d,localCandidateId:u,remoteCandidateId:l}=r,h=e[u],{address:p,port:_}=h,m=e[l],{address:f,port:v,protocol:R}=m;t.iceCandidatePair={IP:p||null,port:_,networkType:null,remoteIP:f,remotePort:v,protocol:R,bitrateRecv:o,bitrateSend:s,rtt:1e3*d,availableOutgoingBitrate:a,availableIncomingBitrate:c,totalPacketsLost:n},t.receivers.forEach((e=>{e.rtt=d}))}}return t}getAudioLevelList(e){const t=[],r=Object.keys(e);r.filter((e=>/^RTCOutboundRTP(Video|Audio)Stream_/.test(e))).forEach((r=>{const i=e[r];if("unified-plan"===this._sdpSemantics&&!this.isValidSender(i))return;const{trackId:n,mediaType:s}=i;if("video"===s)return;const o=this.getResourceIdByParseSdp(i),a=e[n];t.push({trackId:o,audioLevel:a||0===a?wt(a):null})}));return r.filter((e=>/^RTCInboundRTP(Video|Audio)Stream_/.test(e))).forEach((r=>{const i=e[r];if("unified-plan"===this._sdpSemantics&&!this.isValidReceiver(i))return;const{trackId:n,mediaType:s}=i;if(!n||"video"===s)return;const{audioLevel:o}=e[n],a=this.getResourceIdByParseSdp(i);t.push({trackId:a,audioLevel:o||0===o?wt(o):null})})),t}}class Kt{constructor(e){this._peer=e,this._outboundStreams={}}static setSdpSemantics(e){const{browser:t,version:r,supportsUnifiedPlan:i}=yt;i?/chrome/i.test(t)?this._sdpSemantics=r>92?"unified-plan":r<72?"plan-b":e:/firefox/i.test(t)?this._sdpSemantics="unified-plan":/safari/i.test(t)?this._sdpSemantics=r<12?"plan-b":"unified-plan":this._sdpSemantics="unified-plan":this._sdpSemantics="plan-b"}static getSdpSemantics(){return Kt._sdpSemantics}getOutboundVideoInfo(){const e=[];for(const t in this._outboundStreams){const r=this._outboundStreams[t].getVideoTracks()[0];if(!r)continue;const i=/_tiny$/.test(t),{width:n,height:s}=pt(r);e.push({trackId:r.id,simulcast:i?Mt.TINY:Mt.NORMAL,resolution:`${n}x${s}`})}return e}setRemoteAnswer(e){return S(this,void 0,void 0,(function*(){e=e.replace(/\\s+\\r\\n/g,"\\r\\n");try{yield this._peer.setRemoteDescription({type:"answer",sdp:e})}catch(e){return C.error(e),T.SET_REMOTE_DESCRIPTION_FAILED}return T.SUCCESS}))}getStatParsr(e,t){return/chrome/i.test(yt.browser)?new Bt(e,t):/Firefox/i.test(yt.browser)?new Ht(e,t):/Safari/i.test(yt.browser)?new Ft(e,t):null}}class Gt extends Kt{constructor(){super(...arguments),this.senders={},this._localTracks=[]}addLocalTrack(e){this._localTracks.includes(e)||this._localTracks.push(e);const t=e.getStreamId(),r=e.__innerGetMediaStreamTrack(),i=this._outboundStreams[t]||(this._outboundStreams[t]=new MediaStream);i.getTracks().forEach((e=>{e.kind===r.kind&&i.removeTrack(e)})),i.addTrack(r);const n=e.getTrackId(),s=this.senders[n];s?s.replaceTrack(r):this.senders[n]=this._peer.addTrack(r,i)}removeLocalTrack(e){const t=this._localTracks.findIndex((t=>t===e));t>=0&&this._localTracks.splice(t,1);const r=e.getTrackId(),i=this.senders[r];i&&(i.replaceTrack(null),this._peer.removeTrack(i),delete this.senders[r])}updateSubRemoteTracks(e){}updateRecvTransceiverMap(e,t){}setBitrate(e,t,r){this._maxBitrate=e,this._minBitrate=t,this._startBitrate=r||.7*e}createOffer(e){return S(this,void 0,void 0,(function*(){const t=yield this._peer.createOffer({iceRestart:e,offerToReceiveAudio:!0,offerToReceiveVideo:!0});for(const e in this._outboundStreams){const r=this._outboundStreams[e].id;t.sdp=t.sdp.replace(new RegExp(r,"g"),e)}return yield this._peer.setLocalDescription(t),{type:"offer",semantics:"plan-b",sdp:t.sdp}}))}setRemoteAnswer(e){let t=0,r=0;this._localTracks.forEach((e=>{const{min:i,max:n}=e.getBitrate();r+=i,t+=n})),t=this._maxBitrate&&this._maxBitrate>0?Math.min(t,this._maxBitrate):t,r=this._minBitrate&&this._minBitrate>0?Math.max(r,this._minBitrate):r;const i=this._startBitrate||Math.round(.7*t),n=`b=AS:${t}`;e=e.replace(/[\\r\\n]+m=video[^\\r\\n]+/,(e=>`${e}\\r\\n${n}`));const s=[`;x-google-min-bitrate=${r}`,`;x-google-max-bitrate=${t}`,`;x-google-start-bitrate=${i}`].join("");return e=e.replace(/[\\r\\n]+[^\\r\\n]+profile-level-id[^\\r\\n]+/g,(e=>e+s)),super.setRemoteAnswer(e)}}class Jt extends Kt{constructor(){super(...arguments),this._sendTransceiver={},this._localTracks={},this._recvAudio=[],this._recvVideo=[],this._recvTransceiver={},this._subedTracks=[]}setBitrate(e,t,r){C.warn("the interface named `setBitrate` is invalid while sdpSemantics value is `unified-plan`")}addLocalTrack(e){const t=e.getTrackId(),r=e.getStreamId(),i=e.__innerGetMediaStreamTrack();this._localTracks[t]=e;const n=this._outboundStreams[r]||(this._outboundStreams[r]=new MediaStream);n.getTracks().forEach((e=>{e.kind===i.kind&&n.removeTrack(e)})),n.addTrack(i);const s=this._sendTransceiver[t];s?(s.sender.replaceTrack(i),s.direction="sendonly"):this._sendTransceiver[t]=this._peer.addTransceiver(i,{direction:"sendonly",streams:[n]})}removeLocalTrack(e){const t=e.getTrackId(),r=e.getStreamId();e.__innerGetMediaStreamTrack(),delete this._localTracks[t];const i=this._sendTransceiver[t];if(!i)return;i.direction="inactive",this._peer.removeTrack(i.sender),i.sender.replaceTrack(null);const n=this._outboundStreams[r];(e.isAudioTrack()?n.getAudioTracks():n.getVideoTracks()).forEach((e=>n.removeTrack(e)));const s=this._sendTransceiver[`${t}_tiny`];if(!s||"inactive"===s.direction)return;s.direction="inactive";const o=s.sender,a=o.track;this._peer.removeTrack(o),o.replaceTrack(null);this._outboundStreams[`${r}_tiny`].removeTrack(a),a.stop()}updateRecvTransceiverMap(e,t){const{mediaType:r}=ft(e);this._recvTransceiver[e]=t;const i=r===Fe.AUDIO_ONLY?this._recvAudio:this._recvVideo,n=i.findIndex((e=>e===t));n>=0&&i.splice(n,1)}updateSubRemoteTracks(e){const t=e.slice(),r=this._subedTracks.slice();this._subedTracks=e.slice();for(let e=t.length-1;e>=0;e-=1){const i=t[e],n=r.findIndex((e=>e===i));n>=0&&(t.splice(e,1),r.splice(n,1))}r.length&&r.forEach((e=>{const t=e.getTrackId();e.__innerSetMediaStreamTrack(void 0);const r=this._recvTransceiver[t];r&&(r.direction="inactive")}));const i={audio:0,video:0};t.length&&t.forEach((e=>{const t=e.isAudioTrack()?"audio":"video",r=this._recvTransceiver[e.getTrackId()];r?r.direction="recvonly":i[t]+=1}));for(let e=this._recvAudio.length;e<i.audio;e+=1)this._recvAudio.push(this._peer.addTransceiver("audio",{direction:"recvonly"}));for(let e=this._recvVideo.length;e<i.video;e+=1)this._recvVideo.push(this._peer.addTransceiver("video",{direction:"recvonly"}))}createOffer(e){return S(this,void 0,void 0,(function*(){const t=yield this._peer.createOffer({iceRestart:e});let r=t.sdp;for(const e in this._outboundStreams){const t=this._outboundStreams[e].id;r=r.replace(new RegExp(t,"g"),e)}return r=(e=>e.split(/\\r\\n(?=m=)/).map((e=>(e=>/a=(recvonly|inactive)/.test(e)?e.replace(/\\r\\na=(ssrc|msid)[^\\r\\n]+/g,""):e)(e))).join("\\r\\n"))(r),r=r.replace(/a=ice-options:trickle/g,"a=ice-options:trickle\\r\\na=ice-options:renomination"),t.sdp=r,yield this._peer.setLocalDescription(t),{type:"offer",semantics:"unified-plan",sdp:r}}))}setRemoteAnswer(e){e=e.split(/\\r\\n(?=m=)/).map((e=>{var t;const r=e.match(/a=mid:[^\\s]+/);if(!r)return e;const i=r[0].replace("a=mid:","");let n="";for(const e in this._sendTransceiver){if(this._sendTransceiver[e].mid===i){n=e;break}}if(!n)return e;const s=null===(t=this._localTracks[n])||void 0===t?void 0:t.getBitrate();if(!s)return e;const{max:o,min:a}=s,c=o&&o>0?s.start||.7*o:0,d=[];if(o&&o>0&&d.push(`;x-google-max-bitrate=${o}`),a&&a>0&&d.push(`;x-google-min-bitrate=${a}`),c>0&&d.push(`;x-google-start-bitrate=${c}`),0===d.length)return e;const u=d.join("");return e.replace(/[\\r\\n]+[^\\r\\n]+profile-level-id[^\\r\\n]+/g,(e=>e+u))})).join("\\r\\n");const t=/[\\r\\n]+\\r\\n[\\r\\n]+/g;return t.test(e)&&(C.warn(`answer sdp invalid -> ${JSON.stringify(e)}`),e=e.replace(t,"\\r\\n")),super.setRemoteAnswer(e)}}class Wt extends _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.EventEmitter{constructor(e,t){super(),this._reTryExchange=e,this._polarisReport=t,this.pubLocalTracks={},this._reTryExchangeTimer=null,this._reportStatsTimer=null,this._reportListener=null;const r=Kt.getSdpSemantics(),i=this._rtcPeerConn=new RTCPeerConnection({sdpSemantics:r});this._sdpStrategy="plan-b"===r?new Gt(i):new Jt(i),this._rtcPeerConn.oniceconnectionstatechange=this._onICEConnectionStateChange.bind(this),this._rtcPeerConn.onconnectionstatechange=this._onConnectionStateChange.bind(this),this._rtcPeerConn.ontrack=this._onTrackReady.bind(this),this.reportParser=this._sdpStrategy.getStatParsr(this._rtcPeerConn,r)}getLocalTracks(){return Object.values(this.pubLocalTracks)}_onConnectionStateChange(){C.info(`onconnectionstatechange -> ${this._rtcPeerConn.connectionState}`)}_onICEConnectionStateChange(){var e,t;C.info(`oniceconnectionstatechange -> ${this._rtcPeerConn.iceConnectionState}`),"connected"===this._rtcPeerConn.iceConnectionState&&(this._reportStatsTimer&&clearInterval(this._reportStatsTimer),this._reportStatsTimer=setInterval(this._reportHandle.bind(this),1e3)),"failed"!==this._rtcPeerConn.iceConnectionState&&"disconnected"!==this._rtcPeerConn.iceConnectionState||(C.warn("iceconenction state is `failed`, exchange SDP to try again."),this._reTryExchange(),this._reTryExchangeTimer=setInterval(this._reTryExchange,15e3));try{null===(t=null===(e=this._reportListener)||void 0===e?void 0:e.onICEConnectionStateChange)||void 0===t||t.call(e,this._rtcPeerConn.iceConnectionState)}catch(e){C.error("onICEConnectionStateChange error",e)}}_onTrackReady(e){if(!e.streams.length)return;const t=[e.streams[0].id,"audio"===e.receiver.track.kind?Fe.AUDIO_ONLY:Fe.VIDEO_ONLY].join("_");this._updateRecvTransceiverMap(t,e.transceiver),this.emit(Wt.__INNER_EVENT_TRACK_READY__,e)}setBitrate(e,t,r){return S(this,void 0,void 0,(function*(){this._sdpStrategy.setBitrate(e,t,r)}))}createOffer(e){return S(this,void 0,void 0,(function*(){const t=yield this._sdpStrategy.createOffer(e);return C.debug(`offer -> ${JSON.stringify(t.sdp)}`),t}))}setRemoteAnswer(e){return S(this,void 0,void 0,(function*(){return C.debug(`answer -> ${JSON.stringify(e)}`),this._sdpStrategy.setRemoteAnswer(e)}))}getLocalTrack(e){return this.pubLocalTracks[e]||null}addLocalTrack(e){this.pubLocalTracks[e.getTrackId()]=e,this._sdpStrategy.addLocalTrack(e),e.off(ze.__INNER_EVENT_MUTED_CHANGE__,this._onLocalTrackMuted,this),e.off(ze.__INNER_EVENT_DESTROY__,this._onLocalTrackDestroied,this),e.on(ze.__INNER_EVENT_MUTED_CHANGE__,this._onLocalTrackMuted,this),e.on(ze.__INNER_EVENT_DESTROY__,this._onLocalTrackDestroied,this)}removeLocalTrackById(e){const t=this.getLocalTrack(e);t&&this.removeLocalTrack(t)}removeAllLocalTrack(){Object.keys(this.pubLocalTracks).forEach((e=>{/_tiny$/.test(e)||this.removeLocalTrackById(e)}))}removeLocalTrack(e){const t=e.getTrackId();delete this.pubLocalTracks[t],this._sdpStrategy.removeLocalTrack(e),e.__innerSetPublished(!1),e.off(ze.__INNER_EVENT_MUTED_CHANGE__,this._onLocalTrackMuted,this),e.off(ze.__INNER_EVENT_DESTROY__,this._onLocalTrackDestroied,this);const r=`${t}_tiny`,i=this.getLocalTrack(r);i&&(this._sdpStrategy.removeLocalTrack(i),delete this.pubLocalTracks[r],i.destroy())}_updateRecvTransceiverMap(e,t){this._sdpStrategy.updateRecvTransceiverMap(e,t)}updateSubRemoteTracks(e){this._sdpStrategy.updateSubRemoteTracks(e)}getOutboundVideoInfo(){return this._sdpStrategy.getOutboundVideoInfo()}_onLocalTrackMuted(e){const t=this.getLocalTrack(`${e.getTrackId()}_tiny`);t&&(t.__innerGetMediaStreamTrack().enabled=!e.isLocalMuted()),this.emit(ze.__INNER_EVENT_MUTED_CHANGE__,e)}_onLocalTrackDestroied(e){this.emit(ze.__INNER_EVENT_DESTROY__,e)}registerReportListener(e){this._reportListener=e}_createRCRTCStateReport(e){const{timestamp:t,iceCandidatePair:r,senders:i,receivers:n}=JSON.parse(JSON.stringify(e));null==r||delete r.totalPacketsLost;for(const e in r)Pt(r[e])&&delete r[e];return{timestamp:t,iceCandidatePair:r,senders:i.map((e=>{const t={};return e.trackId&&(t.trackId=e.trackId),e.kind&&(t.kind=e.kind),(e.packetsLostRate||0===e.packetsLostRate)&&(t.packetsLostRate=e.packetsLostRate),t.remoteResource=e.remoteResource,(e.audioLevel||0===e.audioLevel)&&(t.audioLevel=e.audioLevel),e.frameWidth&&(t.frameWidth=e.frameWidth),e.frameHeight&&(t.frameHeight=e.frameHeight),e.frameRate&&(t.frameRate=e.frameRate),(e.bitrate||0===e.bitrate)&&(t.bitrate=e.bitrate),e.jitter&&(t.jitter=e.jitter),t})),receivers:n.map((e=>{const t={};return e.trackId&&(t.trackId=e.trackId),e.kind&&(t.kind=e.kind),(e.packetsLostRate||0===e.packetsLostRate)&&(t.packetsLostRate=e.packetsLostRate),t.remoteResource=e.remoteResource,(e.audioLevel||0===e.audioLevel)&&(t.audioLevel=e.audioLevel),e.frameWidth&&(t.frameWidth=e.frameWidth),e.frameHeight&&(t.frameHeight=e.frameHeight),e.frameRate&&(t.frameRate=e.frameRate),(e.bitrate||0===e.bitrate)&&(t.bitrate=e.bitrate),e.jitter&&(t.jitter=e.jitter),t}))}}_getStatsData(){var e,t;return S(this,void 0,void 0,(function*(){const r=yield this._rtcPeerConn.getStats(),i=null===(e=this.reportParser)||void 0===e?void 0:e.parseRTCStatsReport(r);return null===(t=this.reportParser)||void 0===t?void 0:t.formatRCRTCStateReport(i)}))}getAudioLevelReportData(){var e,t;return S(this,void 0,void 0,(function*(){const r=yield this._rtcPeerConn.getStats(),i=null===(e=this.reportParser)||void 0===e?void 0:e.parseRTCStatsReport(r);if(!i)return[];return null===(t=this.reportParser)||void 0===t?void 0:t.getAudioLevelList(i)}))}_reportHandle(){var e,t,r;return S(this,void 0,void 0,(function*(){const i=yield this._getStatsData();if(!i)return;(i.senders.length||i.receivers.length)&&(null===(e=this._polarisReport)||void 0===e||e.sendR3R4Data(i));const n=this._createRCRTCStateReport(i);null===(r=null===(t=this._reportListener)||void 0===t?void 0:t.onStateReport)||void 0===r||r.call(t,n)}))}getRTCPeerConn(){return this._rtcPeerConn}destroy(){this.clear(),this.clearReTryExchangeTimer(),this._reportStatsTimer&&(clearInterval(this._reportStatsTimer),this._reportStatsTimer=null),this.registerReportListener(null),this._rtcPeerConn.close(),this.reportParser=null}clearReTryExchangeTimer(){clearInterval(this._reTryExchangeTimer),this._reTryExchangeTimer=null}}var Yt,qt,zt,Qt,Xt;Wt.__INNER_EVENT_TRACK_READY__="inner-track-ready",function(e){e[e.DISABLE=0]="DISABLE",e[e.ENABLE=1]="ENABLE"}(Yt||(Yt={})),function(e){e[e.MeetingOrAnchor=1]="MeetingOrAnchor",e[e.Audience=2]="Audience"}(qt||(qt={}));class Zt{constructor(e,t,r,i,n=qt.MeetingOrAnchor){this._context=e,this._runtime=t,this._roomId=r,this._crtRTCRoom=i,this._userRole=n}_send(e){this._context.getConnectionStatus()===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ConnectionStatus.CONNECTED&&this._context.setRTCState(this._roomId,e)}_getClientID(){const e="uuid";let t=this._runtime.localStorage.getItem(e);return t||(t=St(),this._runtime.localStorage.setItem(e,t)),t}_getRealResourceId(e){let t=e;const r=e.indexOf("_tiny");return r>-1&&(t=e.slice(0,r)),t}_getPolarisTrackId(e){let t="";const r=e.split("_");if(e.includes("_tiny")){const e=r.pop(),i=parseInt(r.pop())===Fe.AUDIO_ONLY?"audio":"video",n=r.pop();t=[r.join("_"),n,e,i].join("_")}else{const e=parseInt(r.pop())===Fe.AUDIO_ONLY?"audio":"video",i=r.pop();t=[r.join("_"),i,e].join("_")}return t}sendR3R4Data(e){const{iceCandidatePair:t,senders:r,receivers:i}=e,n=(null==t?void 0:t.bitrateSend)||-1,s=(null==t?void 0:t.bitrateRecv)||-1,o=(null==t?void 0:t.networkType)||"unknown",a=(null==t?void 0:t.rtt)||-1,c=`${(null==t?void 0:t.IP)||-1}:${null==t?void 0:t.port}`,d=(null==t||t.remoteIP,null==t||t.remotePort,(null==t?void 0:t.availableIncomingBitrate)||-1),u=(null==t?void 0:t.availableOutgoingBitrate)||-1,l=(null==t?void 0:t.totalPacketsLost)||-1,h=this._context.getCurrentId();let p=`R3\\t${n}\\t-1\\t-1\\t-1\\t${o}\\t${a}\\t${c}\\t${d}\\t${u}\\t${l}\\t${h}\\r`,_=`R4\\t${s}\\t-1\\t-1\\t-1\\t${o}\\t${a}\\t${c}\\t${d}\\t${u}\\t${l}\\t${h}\\r`;const m=r.map((e=>{var t;const{trackId:r,audioLevel:i,samplingRate:n,bitrate:s,packetsLostRate:o,frameRate:a,frameWidth:c,frameHeight:d,googRenderDelayMs:u,jitter:l,nackCount:h,pliCount:p,rtt:_,googFirsSent:m,encoderImplementation:f}=e,v=this._getPolarisTrackId(r),R=this._getRealResourceId(r);return{trackId:v,googCodecName:f||String(-1),audioLevel:i||0===i?i:-1,bitrate:s||0===s?s:-1,packetsLostRate:o||0===o?o:-1,frameRate:a||-1,resolution:c&&d?`${c} * ${d}`:"-1",jitter:l||-1,nackCount:h||0===h?h:-1,pliCount:p||0===p?p:-1,rtt:_||-1,googFirsSent:m,samplingRate:n,googRenderDelayMs:u,encoderImplementation:f||String(-1),trackState:(null===(t=this._crtRTCRoom.getLocalTrack(R))||void 0===t?void 0:t.isLocalMuted())?Yt.DISABLE:Yt.ENABLE}})),f=i.filter((e=>!!e.trackId)).map((e=>{var t;const{trackId:r,audioLevel:i,samplingRate:n,bitrate:s,packetsLostRate:o,frameRate:a,frameWidth:c,frameHeight:d,googRenderDelayMs:u,jitter:l,nackCount:h,pliCount:p,rtt:_,googFirsReceived:m,codecImplementationName:f}=e,v=this._getPolarisTrackId(r),R=this._getRealResourceId(r);return{trackId:v,googCodecName:f||String(-1),audioLevel:i||0===i?i:-1,bitrate:s||0===s?s:-1,packetsLostRate:o||0===o?o:-1,frameRate:a||-1,resolution:c&&d?`${c} * ${d}`:"-1",jitter:l||-1,nackCount:h||0===h?h:-1,pliCount:p||0===p?p:-1,rtt:_||-1,googFirsReceived:m,samplingRate:n,googRenderDelayMs:u,codecImplementationName:f||String(-1),trackState:(null===(t=this._crtRTCRoom.getRemoteTrack(R))||void 0===t?void 0:t.isLocalMuted())?Yt.DISABLE:Yt.ENABLE}}));p+=m.map((e=>`${e.trackId}\\t${e.googCodecName}\\t${e.audioLevel}\\t${e.samplingRate}\\t${e.bitrate}\\t${e.packetsLostRate}\\t${e.frameRate}\\t${e.resolution}\\t${e.googRenderDelayMs}\\t${e.jitter}\\t${e.nackCount}\\t${e.pliCount}\\t${e.rtt}\\t${e.googFirsSent}\\t${e.encoderImplementation}\\t${e.trackState}`)).join("\\n"),e.senders.length&&this._send(p+`\\r${this._userRole}`),_+=f.map((e=>`${e.trackId}\\t${e.googCodecName}\\t${e.audioLevel}\\t${e.samplingRate}\\t${e.bitrate}\\t${e.packetsLostRate}\\t${e.frameRate}\\t${e.resolution}\\t${e.googRenderDelayMs}\\t${e.jitter}\\t${e.nackCount}\\t${e.pliCount}\\t${e.rtt}\\t${e.googFirsReceived}\\t${e.codecImplementationName}\\t${e.trackState}`)).join("\\n"),e.receivers.length&&this._send(_+`\\r${this._userRole}`)}sendR1(){const e=`R1\\t5.3.1\\t${this._context.getCoreVersion()}\\tweb\\t${navigator.platform}\\t-1\\t${yt.browser}\\t${yt.version}\\t${this._getClientID()}\\t${this._userRole}`;this._send(e)}sendR2(e,t,r){const i=`R2\\t${e}\\t${t}\\t${this._getClientID()}\\r${r.join("\\t")}\\r${this._userRole}`;this._send(i)}}!function(e){e.PUBLISH="publish",e.SUBSCRIBE="subscribe"}(zt||(zt={})),function(e){e.BEGIN="begin",e.END="end"}(Qt||(Qt={}));class er{constructor(e){this._room=e,this._audioLevelChangeHandler=null,this._timer=null,this._pc=this._room.__getPC()}_audioLevelReport(){return S(this,void 0,void 0,(function*(){if("new"===this._pc.getRTCPeerConn().iceConnectionState||!this._audioLevelChangeHandler)return;const e=(yield this._pc.getAudioLevelReportData()).map((e=>{const{userId:t}=Pr.parseTrackId(e.trackId);return{track:this._room.getCrtUserId()===t?this._room.getLocalTrack(e.trackId):this._room.getRemoteTrack(e.trackId),audioLevel:e.audioLevel||0}})).filter((e=>e.track));this._audioLevelChangeHandler(e)}))}onAudioLevelChange(e,t){t<300||t>1e3?C.error(\'the valid range of onAudioLevelChange params "gap" is: > 300 && < 1000\'):e?(this._audioLevelChangeHandler=e,this._timer=setInterval(this._audioLevelReport.bind(this),t)):this._audioLevelChangeHandler=null}clearAudioLevelReportTimer(){this._timer&&(clearInterval(this._timer),this._timer=null)}}!function(e){e[e.ANCHOR=1]="ANCHOR",e[e.AUDIENCE=2]="AUDIENCE"}(Xt||(Xt={}));const tr=e=>e instanceof qe?e.getTrackId():e.track.getTrackId();class rr{constructor(e,t,r,i,n,s,o,a,c,d){this._context=e,this._runtime=t,this._roomId=r,this._roomMode=n,this._service=s,this._initOptions=o,this._ntfClearRoomItem=a,this._isMainRoom=d,this._remoteTracks={},this._subscribedList=[],this._destroyed=!1,this.msgTaskQueue=new E,this._appListener=null,this._onRecvPKMsg=null,this._token=i.token,this._sessionId=i.sessionId,this._roomResources=c?{}:Lt(i),this._initRemoteTracks();const u=this._context.getCurrentId(),l=this._roomResources[u]=this._roomResources[u]||[];C.debug(`room data -> ${JSON.stringify(this._roomResources)}`),l.length>0&&k((()=>this._unpublishPrev(l))),c&&this._afterChangedRole(i),this._pinger=new At(r,this._roomMode,e,this._initOptions.pingGap),this._pinger.onFailed=this._kickoff.bind(this),this._pinger.onPingResult=this._handlePingResult.bind(this),this._pinger.start(),this._polarisReport=new Zt(this._context,this._runtime,this._roomId,this),this._polarisReport.sendR1(),this._pc=new Wt(this._reTryExchange.bind(this),this._polarisReport),this._pc.on(Wt.__INNER_EVENT_TRACK_READY__,this._onTrackReady,this),this._pc.on(ze.__INNER_EVENT_MUTED_CHANGE__,this._onLocalTrackMuted,this),this._pc.on(ze.__INNER_EVENT_DESTROY__,this._onLocalTrackDestroied,this)}_initRemoteTracks(){const e=this._context.getCurrentId();for(const t in this._roomResources){const r=this._roomResources[t];t!==e&&0!==r.length&&r.forEach((e=>{const t=mt(e),{tag:r,userId:i,mediaType:n}=ft(t),s=n===Fe.AUDIO_ONLY?new ot(r,i):new at(r,i);s.__innerSetRemoteMuted(0===e.state),this._remoteTracks[t]=s}))}}_handlePingResult(e){this._callAppListener("onPing",e)}setBitrate(e,t,i){C.warn("`RCAbstractRoom.setBitrate` will be deprecated, use `RCLocalTrack.setBitrate` instead."),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("max",e,(e=>(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(e)&&e>Math.max(t||1,200)),!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("min",t,(t=>(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(t)&&t>=1&&(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(e)||t<e)),!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("start",i,(i=>(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(i)&&i>t&&i<=e)),this._pc.setBitrate(e,t,i)}_onTrackReady(e){const t=e.streams[0].id,r=e.receiver.track,i=[t,"audio"===r.kind?Fe.AUDIO_ONLY:Fe.VIDEO_ONLY].join("_"),n=this._remoteTracks[i];n?(n.__innerSetMediaStreamTrack(r),this._callAppListener("onTrackReady",n)):C.warn(`cannot found remote track ${r.id}`)}_callAppListener(e,...t){var r;const i=null===(r=this._appListener)||void 0===r?void 0:r[e];if(i)try{i(...t)}catch(e){C.error(e)}}_onUserUnpublish(e){return S(this,void 0,void 0,(function*(){yield this.unsubscribe(e),e.forEach((e=>{e.__innerDestroy(),delete this._remoteTracks[e.getTrackId()]})),this._onTrackUnpublish(e)}))}_onTrackUnpublish(e){this._callAppListener("onTrackUnpublish",e)}_unpublishPrev(e){return S(this,void 0,void 0,(function*(){const t=e.slice();e.length=0,C.info(`unpublish uris prev login: ${JSON.stringify(t)}`);const r=yield this._context.setRTCTotalRes(this._roomId,ct(Nt.UNPUBLISH,t),dt([]),Nt.TOTAL_CONTENT_RESOURCE,dt([]));r!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?C.error(`unpublish prev uris failed -> code: ${r}`):C.debug("unpublish uris prev login succeed")}))}__parseInnerMessage(e){const{targetId:t,conversationType:r}=e;if(r!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ConversationType.RTC_ROOM)return!1;if(t!==this._roomId)return!0;C.info(`recv inner msg -> message: ${JSON.stringify(e)} | roomid: ${this._roomId}`);const i=e.content;switch(e.messageType){case Nt.KICK:this._kickoff(!0,i);break;case Nt.STATE:this.msgTaskQueue.push((()=>this._stateHandle(i)));break;case Nt.MODIFY:case Nt.PUBLISH:case Nt.UNPUBLISH:case Nt.TOTAL_CONTENT_RESOURCE:this.msgTaskQueue.push((()=>this._resourceHandle(i,e.messageType,e.senderUserId)));break;case Nt.ROOM_NOTIFY:this._callAppListener("onRoomAttributeChange",e.messageType,e.content);break;case Nt.USER_NOTIFY:C.warn(`TODO: ${Nt.USER_NOTIFY}`);break;case Nt.PK_INVITE:case Nt.PK_CANCEL_INVITE:case Nt.PK_INVITE_TIMEOUT:case Nt.PK_INVITE_ANSWER:case Nt.PK_END:this._onRecvPKMsg&&this._onRecvPKMsg(e);break;case Nt.OTHER_ROOM_OFFLINE:break;default:this._callAppListener("onMessageReceive",e.messageType,e.content,e.senderUserId,e.messageUId)}return!0}_kickoff(e,t){let r;C.warn(`onKickOff -> byServer: ${e}`),this._ntfClearRoomItem(),this._leaveHandle(!e),e&&((null==t?void 0:t.users)||[]).forEach((e=>{e.userId===this._context.getCurrentId()&&(r=e.type)})),this._callAppListener("onKickOff",e,r)}_rtcpeerClosed(){this._ntfClearRoomItem(),this._leaveHandle(!0),this._callAppListener("onRTCPeerConnectionCloseByException")}_resourceHandle(e,t,r){return S(this,void 0,void 0,(function*(){if(this._assertRoomDestroyed())return void C.warn(`room has been destroyed. -> roomId: ${this._roomId}`);const{uris:i,ignore:n}=e;if(n||!i)return;const s=[],o=[],a=[];let c;const d=this._roomResources[r]||(this._roomResources[r]=[]);switch(t){case Nt.MODIFY:a.push(...i);break;case Nt.PUBLISH:s.push(...i);break;case Nt.UNPUBLISH:o.push(...i);break;case Nt.TOTAL_CONTENT_RESOURCE:c=gt(d,i),s.push(...c.publishedList),o.push(...c.unpublishedList),a.push(...c.modifiedList)}if(s.length>0){const e=d.map(mt),t=[],r=[];if(s.forEach((i=>{const n=mt(i),s=e.indexOf(n),{userId:o,tag:a,mediaType:c}=ft(n);s>-1?d[s]=i:d.push(i);let u=this._remoteTracks[n];u?u.isSubscribed()&&t.push(u):(u=c===Fe.AUDIO_ONLY?new ot(a,o):new at(a,o),this._remoteTracks[n]=u,r.push(u)),u.__innerSetRemoteMuted(0===i.state)})),t.length){const e=t.map((e=>e.getTrackId()));C.debug(`resub tracks -> ${JSON.stringify(e)}`);const{code:r}=yield k((()=>this.__subscribe(t,!0)));r!==T.SUCCESS&&C.error(`resub tracks failed -> code: ${r}, ids: ${JSON.stringify(e)}`)}this._onTrackPublish(r)}if(o.length>0){const e=o.map(mt);for(let t=d.length-1;t>=0;t-=1){const r=d[t];e.includes(mt(r))&&d.splice(t,1)}const t=o.map((e=>{const t=mt(e);return this._remoteTracks[t]}));yield this._onUserUnpublish(t)}if(a.length>0){const e=d.map(mt);for(let t=0;t<a.length;t+=1){const r=a[t],i=mt(r),n=e.indexOf(i);d[n].state=r.state;const s=this._remoteTracks[i];s.__innerSetRemoteMuted(0===r.state),s.isAudioTrack()?this._onAudioMuteChange(s):this._onVideoMuteChange(s)}}}))}_onTrackPublish(e){this._callAppListener("onTrackPublish",e)}_stateHandle(e){var t;return S(this,void 0,void 0,(function*(){const{users:r}=e;if(0===r.length)return;const i=[],n=[],s=[],o=[];r.forEach((e=>{0==+e.state?(C.debug(`user joined -> ${e.userId}`),this._roomResources[e.userId]||(e.switchRoleType?s.push(e.userId):i.push(e.userId)),this._roomResources[e.userId]=this._roomResources[e.userId]||[]):(C.debug(`user left -> ${e.userId}`),e.switchRoleType?o.push(e.userId):n.push(e.userId))}));const a=[...i,...s],c=[...n,...o];if(c.length){const e=[],t=[];c.forEach((r=>{e.push(...this.getRemoteTracksByUserId(r)),t.push(r)})),e.length&&(yield this.unsubscribe(e),e.forEach((e=>delete this._remoteTracks[e.getTrackId()]))),t.length&&t.forEach((e=>delete this._roomResources[e]))}if(null===(t=this._appListener)||void 0===t?void 0:t.onSwitchRole)return s.length&&s.forEach((e=>this._callAppListener("onSwitchRole",e,Xt.ANCHOR))),o.length&&o.forEach((e=>this._callAppListener("onSwitchRole",e,Xt.AUDIENCE))),i.length&&this._callAppListener("onUserJoin",i),void(n.length&&this._callAppListener("onUserLeave",n));a.length&&this._callAppListener("onUserJoin",a),c.length&&this._callAppListener("onUserLeave",c)}))}getRoomId(){return this._roomId}getCrtUserId(){return this._context.getCurrentId()}__getPC(){return this._pc}getRemoteUserIds(){const e=this._context.getCurrentId();return Object.keys(this._roomResources).filter((t=>t!==e))}getRemoteTracks(){const e=[];return this.getRemoteUserIds().forEach((t=>{e.push(...this.getRemoteTracksByUserId(t))})),e}getRemoteTracksByUserId(e){const t=[];for(const r in this._remoteTracks){const i=this._remoteTracks[r];i.getUserId()===e&&t.push(i)}return t}getSessionId(){return this._sessionId}sendMessage(e,t){return S(this,void 0,void 0,(function*(){const{code:r}=yield this._context.sendMessage(_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ConversationType.RTC_ROOM,this._roomId,{messageType:e,content:t,isStatusMessage:!0});return r!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(C.error(`send message failed -> code: ${r}`),{code:T.SIGNAL_ERROR}):{code:T.SUCCESS}}))}setRoomAttribute(e,t,r,n=!1){return S(this,void 0,void 0,(function*(){const s=yield this._context.setRTCData(this._roomId,e,t,n,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCApiType.ROOM,r);return s!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(C.error(`SetRoomAttributeValue Failed: ${s}`),{code:T.SIGNAL_ERROR}):{code:T.SUCCESS}}))}deleteRoomAttributes(e,t,r=!1){return S(this,void 0,void 0,(function*(){const n=yield this._context.removeRTCData(this._roomId,e,r,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCApiType.ROOM,t);return n!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(C.error(`DeleteRoomAttribute Failed: ${n}`),{code:T.SIGNAL_ERROR}):{code:T.SUCCESS}}))}getRoomAttributes(e=[],t=!1){return S(this,void 0,void 0,(function*(){const{code:r,data:n}=yield this._context.getRTCData(this._roomId,e,t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCApiType.ROOM);return r!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(C.error(`GetRoomAttributes Failed: ${r}`),{code:T.SIGNAL_ERROR}):{code:T.SUCCESS,data:n}}))}_setUserAttributeValue(e,t,r){return this._context.setRTCData(this._roomId,e,t,!1,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCApiType.PERSON,r)}_deleteUserAttributes(e,t){return this._context.removeRTCData(this._roomId,e,!1,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCApiType.PERSON,t)}_getUserAttributes(e){return this._context.getRTCData(this._roomId,e,!1,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCApiType.PERSON)}isDestroyed(){return this._destroyed}__destroy(e){return this._leaveHandle(e)}_leaveHandle(e){var t;return S(this,void 0,void 0,(function*(){this._destroyed||(this._destroyed=!0,null===(t=this._audioLevelReport)||void 0===t||t.clearAudioLevelReportTimer(),e&&(yield this._context.quitRTCRoom(this._roomId)),this._isMainRoom&&this._quitAllPKRoom(),this._pc.removeAllLocalTrack(),this._pinger.stop(),this._isMainRoom&&(yield this._service.exit(this._getRTCReqestHeaders())),this._pc.destroy(),this._polarisReport=null,this._removeRemoteTracks())}))}_onLocalTrackDestroied(e){e instanceof Xe&&e.__isTiny()||this.unpublish([e])}_onLocalTrackMuted(e){return S(this,void 0,void 0,(function*(){const t=e.getTrackId(),r=this._context.getCurrentId(),n=[{resourceId:t,enabled:!e.isLocalMuted()}],s=this._roomResources[r]||[],o=[];for(let e=0;e<s.length;e+=1){const t=s[e],r=mt(t),i=n.findIndex((e=>e.resourceId===r));if(i>=0){const{enabled:e}=n[i];t.state=e?1:0,o.push(t);break}}const a=yield k((()=>this._context.setRTCTotalRes(this._roomId,ct(Nt.MODIFY,o),dt(s),Nt.TOTAL_CONTENT_RESOURCE)));a!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS&&C.error("notice `track.enabled` change failed -> code: "+a)}))}_removePubFailedTracks(e){e.forEach((e=>{const t=e instanceof ze?e:e.track;C.debug(`remove pub failed track from peerconnection -> trackId: ${t.getTrackId()}`),this._pc.removeLocalTrackById(t.getTrackId())}))}publish(e){return S(this,void 0,void 0,(function*(){return k((()=>this.__publish(e)))}))}__publish(e){return S(this,void 0,void 0,(function*(){if(!this._isMainRoom&&this instanceof _r)return C.error("the `publish` is disabled in PK room "),{code:T.THE_FUNCTION_IS_DISABLED_IN_PKROOM};if(this._assertRoomDestroyed())return C.error(`publish failed, room has been destroyed. -> roomId: ${this._roomId}`),{code:T.ROOM_HAS_BEEN_DESTROYED};if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)("tracks",e,(()=>(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isArray)(e)&&e.length>0&&e.every((e=>e instanceof ze||e.track instanceof ze))),!0))return C.error(`publish failed, tracks is invalid -> roomId: ${this._roomId}`),{code:T.PARAMS_ERROR};const t=this._context.getCurrentId();if(this._pc.getLocalTracks().length+(e=>{let t=0;return e.forEach((e=>{e instanceof ze?t++:e.pubTiny&&e.track.isVideoTrack()?t+=2:t++})),t})(e)>10)return C.error(`publish failed, tracks limit exceeded -> roomId: ${this._roomId}`),{code:T.PUBLISH_TRACK_LIMIT_EXCEEDED};C.debug(`publish tracks -> roomId: ${this._roomId}, tracks: ${e.map(tr)}`),e.forEach((e=>{const{track:t,pubTiny:r}=e instanceof ze?{pubTiny:!1,track:e}:e;if(this._pc.addLocalTrack(t),t.isVideoTrack()&&r){let e;try{e=t.__innerGetMediaStreamTrack().clone();const i=r.frameRate||Be.FPS_15,n=r.resolution||He.W176_H144,{width:s,height:o}=Ct(n),a=Et(i);e.applyConstraints({width:s,height:o,frameRate:a})}catch(r){return null==e||e.stop(),void C.warn(`pubTiny failed -> id: ${t.getTrackId()}, msg: ${r.message}`)}this._pc.addLocalTrack(new Xe(t.getTag(),t.getUserId(),e,!0))}})),this._pc.clearReTryExchangeTimer();const r=yield this._createExchangeParams(this._subscribedList,!1),n=this._getPushOtherRoomsParams();n&&(r.pushOtherRooms=n);const s=yield this._exchangeHandle(r);if(s.code!==T.SUCCESS)return C.error(`publish failed -> roomId: ${this._roomId}, code: ${s.code}`),this._removePubFailedTracks(e),{code:s.code};const{publishList:o,sdp:a,resultCode:l,message:h,urls:p,mcuPublishList:_}=s.data;if(l!==T.SUCCESS)return C.error(`publish failed -> roomId: ${this._roomId}, code: ${l}, msg: ${h}`),this._removePubFailedTracks(e),{code:l};const m=yield this._pc.setRemoteAnswer(a.sdp);if(m!==T.SUCCESS)return{code:m};const f=this._roomResources[t],v=o.map((e=>Object.assign({tag:e.msid.split("_").pop(),state:this._getResourceState(mt(e))},e))),{publishedList:R}=gt(f,v),g=(null==_?void 0:_.map((e=>Object.assign({tag:e.msid.split("_").pop(),state:1},e))))||[],S=yield this._context.setRTCTotalRes(this._roomId,ct(Nt.PUBLISH,R),dt(v),Nt.TOTAL_CONTENT_RESOURCE,dt(g));if(S!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS)return C.error(`send publish streams notification failed: ${S}`),{code:T.SIGNAL_ERROR};this._roomResources[t]=v;const I=R.map((e=>mt(e)));return this._polarisReport&&this._polarisReport.sendR2(zt.PUBLISH,Qt.BEGIN,I),e.forEach((e=>{const{track:t}=e instanceof ze?{track:e}:e;t.__innerSetPublished(!0)})),C.debug(`publish success: ${I.join(",")}`),this._roomMode===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCMode.LIVE?{code:T.SUCCESS,liveUrl:null==p?void 0:p.liveUrl}:{code:T.SUCCESS}}))}_getPushOtherRoomsParams(){if(this instanceof _r){const{code:e,roomPKHandler:t}=this.getRoomPKHandler(),r=[];if(e===T.SUCCESS&&t){const e=t.getJoinedPKRooms();for(const i in e){const n=e[i].getSessionId(),s=t.getPKInfo(i);if(!s)return;const{inviterUserAutoMix:o,inviteeUserAutoMix:a,inviterUserId:c}=s,d=this._context.getCurrentId()===c;r.push({roomId:i,sessionId:n,autoMix:d?!!o:!!a})}}return r}}_reTryExchange(){return S(this,void 0,void 0,(function*(){k((()=>S(this,void 0,void 0,(function*(){const e=yield this._createExchangeParams(this._subscribedList,!0),t=this._getPushOtherRoomsParams();t&&(e.pushOtherRooms=t);const r=yield this._exchangeHandle(e);if(r.code!==T.SUCCESS)return C.error(`reTryExchange failed: ${r.code}`),{code:r.code};const{sdp:i,resultCode:n}=r.data;if(n!==T.SUCCESS)return C.error(`reTryExchange failed: ${n}`),{code:n};this._pc.clearReTryExchangeTimer();const s=yield this._pc.setRemoteAnswer(i.sdp);return s!==T.SUCCESS?{code:s}:void 0}))))}))}_exchangeHandle(e){return this._service.exchange(this._getRTCReqestHeaders(),e)}_getRTCReqestHeaders(){return{"App-Key":this._context.getAppkey(),RoomId:this._roomId,Token:this._token,RoomType:this._roomMode,UserId:this._context.getCurrentId()}}_createExchangeParams(e,t){return S(this,void 0,void 0,(function*(){return{sdp:yield this._pc.createOffer(t),extend:JSON.stringify({resolutionInfo:this._pc.getOutboundVideoInfo()}),subscribeList:e.filter((e=>{const t=e.track.getTrackId(),{userId:r}=ft(t);if(!this._roomResources[r])return!1;const i=this._roomResources[r].filter((e=>t===`${e.msid}_${e.mediaType}`)).length;return i})).map((e=>({simulcast:e.subTiny?Mt.TINY:Mt.NORMAL,resolution:"",uri:this._getResourceById(e.track.getTrackId()).uri}))),switchstream:!1}}))}_getResourceState(e){var t;return(null===(t=this.getLocalTrack(e))||void 0===t?void 0:t.isLocalMuted())?0:1}unpublish(e){return S(this,void 0,void 0,(function*(){return k((()=>this.__unpublish(e)))}))}__unpublish(e){var t;return S(this,void 0,void 0,(function*(){if(!this._isMainRoom&&this instanceof _r)return C.error("the `unpublish` is disabled in PK room "),{code:T.THE_FUNCTION_IS_DISABLED_IN_PKROOM};if(this._assertRoomDestroyed())return C.warn(`room has been destroyed, no need to unpublish tracks -> roomId: ${this._roomId}`),{code:T.SUCCESS};const r=this._context.getCurrentId();if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)("tracks",e,(()=>e.every((e=>e.getUserId()===r&&e instanceof ze))),!0))return C.warn(`unpublish failed, tracks is invalid -> roomId: ${this._roomId}, tracks: ${e.map(tr)}`),{code:T.PARAMS_ERROR};const n=e.map((e=>e.getTrackId())),s=n.map(this._getResourceById.bind(this)).filter((e=>!!e));if(0===s.length)return{code:T.SUCCESS};const o=this._roomResources[r].filter((e=>!s.includes(e)));n.forEach((e=>this._pc.removeLocalTrackById(e))),null===(t=this._polarisReport)||void 0===t||t.sendR2(zt.PUBLISH,Qt.END,n),this._pc.clearReTryExchangeTimer();const a=yield this._createExchangeParams(this._subscribedList,!1),d=this._getPushOtherRoomsParams();d&&(a.pushOtherRooms=d);const u=yield this._exchangeHandle(a);if(u.code!==T.SUCCESS)return C.error(`exchange failed -> code: ${u.code}`),{code:u.code};const{publishList:l,sdp:h,resultCode:p,message:_,mcuPublishList:m}=u.data;p!==T.SUCCESS&&C.error(`unpublish streams failed -> code: ${p}, msg: ${_}`);const f=m?m.map((e=>Object.assign({tag:e.msid.split("_").pop(),state:1},e))):[],v=yield this._context.setRTCTotalRes(this._roomId,ct(Nt.UNPUBLISH,s),dt(o),Nt.TOTAL_CONTENT_RESOURCE,dt(f));if(v!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS)return C.error("send unpublish notification failed:",v),{code:T.SIGNAL_ERROR};C.debug(`unpublish success -> tracks: ${n.join(",")}`);const R=yield this._pc.setRemoteAnswer(h.sdp);if(R!==T.SUCCESS)return{code:R};const g=l.map((e=>Object.assign({tag:e.msid.split("_").pop(),state:this._getResourceState(mt(e))},e)));return this._roomResources[r]=g,{code:T.SUCCESS}}))}_getResourceById(e){const{userId:t}=ft(e);return this._roomResources[t].find((t=>mt(t)===e))}_isValidResourceId(e){var t;const{userId:r}=ft(e);return!!(null===(t=this._roomResources[r])||void 0===t?void 0:t.find((t=>mt(t)===e)))}subscribe(e){return S(this,void 0,void 0,(function*(){return k((()=>this.__subscribe(e,!1)))}))}__subscribe(e,t=!1){var r;return S(this,void 0,void 0,(function*(){if(this._assertRoomDestroyed())return C.error(`subscribe failed, room has been destroyed -> roomId: ${this._roomId}`),{code:T.ROOM_HAS_BEEN_DESTROYED};if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)("tracks",e,(()=>(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isArray)(e)&&e.length>0&&e.every((e=>e instanceof st||e.track instanceof st))),!0))return C.error(`subscribe failed, tracks is invalid -> roomId: ${this._roomId}`),{code:T.PARAMS_ERROR};C.info(`subscribe -> roomId: ${this._roomId}, tracks: ${e.map(tr)}`);const i=this._subscribedList.map((e=>Object.assign({},e))),n=e.map((e=>e instanceof st?{track:e}:e));let s=!1;const o=[];return n.forEach((e=>{const t=e.track.getTrackId();o.push(t);const r=i.find((e=>e.track.getTrackId()===t));r&&r.subTiny===e.subTiny||(r?r.subTiny=e.subTiny:i.push(e),s=!0)})),s||t?(null===(r=this._polarisReport)||void 0===r||r.sendR2(zt.SUBSCRIBE,Qt.BEGIN,o),this._updateSubListHandle(i,!0)):{code:T.SUCCESS}}))}unsubscribe(e){return S(this,void 0,void 0,(function*(){return k((()=>this.__unsubscribe(e)))}))}__unsubscribe(e){var t;return S(this,void 0,void 0,(function*(){if(this._assertRoomDestroyed())return C.warn(`room has beed destroyed, no need to unsubscribe tracks -> roomId: ${this._roomId}`),{code:T.SUCCESS};if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)("tracks",e,(()=>(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isArray)(e)&&e.length>0&&e.every((e=>e instanceof st))),!0))return C.error(`unsubscribe failed, tracks is invalid -> roomId: ${this._roomId}`),{code:T.PARAMS_ERROR};C.info(`unsubscribe -> roomId: ${this._roomId}, tracks: ${e.map(tr)}`);const r=this._subscribedList.map((e=>Object.assign({},e))).filter((t=>!e.includes(t.track)));return null===(t=this._polarisReport)||void 0===t||t.sendR2(zt.SUBSCRIBE,Qt.END,e.map((e=>e.getTrackId()))),this._updateSubListHandle(r,!1)}))}_assertRoomDestroyed(){if(this._destroyed){const e="This room has been destroyed. Please use `RCRTCClient.joinRTCRoom` or `RCRTCClient.joinLivingRoom` to catch another instance.";return C.warn(e),T.ROOM_HAS_BEEN_DESTROYED}}getLocalTrack(e){return this._pc.getLocalTrack(e)}getLocalTracks(){return this._pc.getLocalTracks()}getRemoteTrack(e){return this._remoteTracks[e]||null}updateSubList(e){return S(this,void 0,void 0,(function*(){return k((()=>this._updateSubListHandle(e,!1)))}))}_updateSubListHandle(e,t=!1){return S(this,void 0,void 0,(function*(){if(this._assertRoomDestroyed())return{code:T.ROOM_HAS_BEEN_DESTROYED};if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)("resources",e,(()=>(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isArray)(e)&&e.every((e=>e instanceof st||e.track instanceof st))),!0))return C.error(`update sublist failed, tracks is invalid -> roomId: ${this._roomId}`),{code:T.PARAMS_ERROR};C.info(`update subscribe list -> roomId: ${this._roomId}, forceReq: ${t}, tracks: ${e.map(tr)}`);let r=e.map((e=>e instanceof st?{track:e}:Object.assign({},e)));const i={};r=r.filter((e=>{const t=e.track.getTrackId();return this._remoteTracks[t]?!i[t]&&(i[t]=!0):(C.warn(`track cannot found in room -> trackId: ${t}`),!1)})).map((e=>Object.assign({},e)));const n=this._subscribedList.map((e=>Object.assign({},e)));if(!t){let e=!1;if(r.forEach((t=>{const r=n.findIndex((e=>e.track===t.track));if(-1===r)return void(e=!0);n.splice(r,1)[0].subTiny!==t.subTiny&&(e=!0)})),n.length&&(e=!0),!e)return{code:T.SUCCESS}}this._pc.clearReTryExchangeTimer(),this._pc.updateSubRemoteTracks(r.map((e=>e.track)));const s=yield this._createExchangeParams(r,!1),o=this._getPushOtherRoomsParams();o&&(s.pushOtherRooms=o);const a=yield this._exchangeHandle(s),u=r.map((e=>e.track.getTrackId()));if(a.code!==T.SUCCESS)return{code:a.code};const{sdp:l,resultCode:h,message:p,subscribedList:_}=a.data;if(h!==T.SUCCESS)return C.error(`change subscribe list failed: ${h}`),{code:h};C.debug(`subscribe success: ${u.join(",")}`);const m=yield this._pc.setRemoteAnswer(l.sdp);if(m!==T.SUCCESS)return{code:m};const f=null==_?void 0:_.map((e=>`${e.msid}_${e.mediaType}`)),v=r.filter((e=>null==f?void 0:f.includes(e.track.getTrackId()))),R=r.filter((e=>!(null==f?void 0:f.includes(e.track.getTrackId()))));for(const e in this._remoteTracks){const t=v.some((t=>t.track.getTrackId()===e));this._remoteTracks[e].__innerSetSubscribed(t)}return this._subscribedList.splice(0,this._subscribedList.length,...v),R.length?{code:T.SUCCESS,failedList:R}:{code:T.SUCCESS}}))}registerRoomEventListener(e){this._appListener=e}registerReportListener(e){this._pc.registerReportListener(e)}onAudioLevelChange(e,t){var r;null===(r=this._audioLevelReport)||void 0===r||r.clearAudioLevelReportTimer(),this._audioLevelReport=new er(this),this._audioLevelReport.onAudioLevelChange(e,t||1e3)}__onReconnected(e){return S(this,void 0,void 0,(function*(){if("closed"===this._pc.getRTCPeerConn().connectionState)return C.warn("RTCPeerConnection closed. Please rejoin room to restore services."),void this._rtcpeerClosed();const{code:t,data:r}=yield this._context.joinRTCRoom(this._roomId,this._roomMode,e);if(t!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS)return void C.error(`RTC __onReconnected getRTCRoomInfo failed: ${t}`);C.debug(`RTC __onReconnected getRTCRoomInfo success: ${JSON.stringify(r)}`);const n=[],s={},o={},a={},c=Lt(r),d=Object.keys(c),u=Object.keys(this._roomResources);for(let e=d.length-1;e>=0;e-=1){const t=d[e],r=u.indexOf(t);if(-1===r){n.push(t),s[t]=Rt(c[t]);continue}const i=this._roomResources[t],l=c[t],{publishedList:h,modifiedList:p,unpublishedList:_}=gt(i,l,!0);s[t]=Rt(h),o[t]=Rt(_),a[t]=Rt(p),u.splice(r,1)}u.length&&u.forEach((e=>{delete this._roomResources[e]})),Object.assign(this._roomResources,c),u.length&&this._callAppListener("onUserLeave",u),n.length&&this._callAppListener("onUserJoin",n);for(const e in o){const t=o[e];if(t.length){const e=t.map((e=>this._remoteTracks[mt(e)]));yield this._onUserUnpublish(e)}}return Object.keys(s).forEach((e=>{const t=s[e];if(0===t.length)return;const r=t.map((e=>{const t=mt(e),{userId:r,tag:i,mediaType:n}=ft(t),s=this._remoteTracks[t]=n===Fe.AUDIO_ONLY?new ot(i,r):new at(i,r);return s.__innerSetRemoteMuted(0===e.state),s}));this._onTrackPublish(r)})),Object.keys(a).forEach((e=>{a[e].forEach((e=>{const t=mt(e),r=this._remoteTracks[t];r.__innerSetRemoteMuted(0===e.state),r.isAudioTrack()?this._onAudioMuteChange(r):this._onVideoMuteChange(r)}))})),{data:r}}))}_onAudioMuteChange(e){this._callAppListener("onAudioMuteChange",e)}_onVideoMuteChange(e){this._callAppListener("onVideoMuteChange",e)}_afterChangedRole(e){}_removeRemoteTracks(){const e=Object.values(this._remoteTracks);e.length&&(e.forEach((e=>{e.isAudioTrack()&&e.__releaseMediaElement()})),this._remoteTracks={})}_registerPKMsgListener(e){this._onRecvPKMsg=e}_quitAllPKRoom(){}}var ir,nr,sr;!function(e){e[e.CROP=1]="CROP",e[e.WHOLE=2]="WHOLE"}(ir||(ir={})),function(e){e[e.CUSTOMIZE=1]="CUSTOMIZE",e[e.SUSPENSION=2]="SUSPENSION",e[e.ADAPTATION=3]="ADAPTATION"}(nr||(nr={})),function(e){e[e.CROP=1]="CROP",e[e.WHOLE=2]="WHOLE"}(sr||(sr={}));const or=()=>({version:1,mode:nr.SUSPENSION});class ar{constructor(e,t,r){this._onFlush=e,this._isValidTrackId=t,this._sendCDNInfoSignal=r,this._values=or()}setHostVideoTrack(e){if(!this._isValidTrackId(e))return C.error(`setHostVideoTrack failed: videoTrackId is invalid -> ${e}`),this;const{mediaType:t,tag:r,userId:i}=ft(e);return t!==Fe.VIDEO_ONLY?(C.error(`setHostVideoTrack failed: kind of resource is not \'video\' -> ${e}`),this):(this._values.host_stream_id=vt(i,r),this)}setMixLayoutMode(e){return[nr.CUSTOMIZE,nr.SUSPENSION,nr.ADAPTATION].includes(e)?(this._values.mode=e,this):(C.error(`layout mode is invalid: ${e}`),this)}_addOutputValue(e,t,r="normal"){const i=this._values.output||(this._values.output={video:{normal:{width:640,height:480}}});if("cdn"===e)return void(i.cdn=t);if("audio"===e)return void(i.audio={bitrate:t});const n=i.video;if("normal"!==r&&"tiny"!==r)if("backgroundColor"!==r)if("exparams"!==r){if("backgroundPicture"===r){const e=n.backgroundPicture||(n.backgroundPicture={fillMode:ir.CROP,picture:[]});Object.assign(e,t)}}else n.exparams={renderMode:t};else n.backgroundColor=t;else{const e=n[r]||(n[r]={});Object.assign(e,t)}}setOutputVideoResolution(e){if(!Tt(e))return C.warn("setOutputVideoResolution failed: `resolution` is invalid"),this;const{width:t,height:r}=Ct(e);return this._addOutputValue("video",{width:t,height:r},"normal"),this}setOutputVideoFPS(e){if(!It(e))return C.warn("setOutputVideoFPS failed: `fps` is invalid"),this;const t=Et(e);return this._addOutputValue("video",{fps:t},"normal"),this}setOutputVideoBitrate(e){return!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(e)||e<=0?C.error(`bitrate is invalid: ${e}`):this._addOutputValue("video",{bitrate:e},"normal"),this}setOutputTinyVideoResolution(e){if(!Tt(e))return C.warn("setOutputTinyVideoResolution failed: `resolution` is invalid"),this;const{width:t,height:r}=Ct(e);return this._addOutputValue("video",{width:t,height:r},"tiny"),this}setOutputTinyVideoFPS(e){if(!It(e))return C.warn("setOutputTinyVideoFPS failed: `fps` is invalid"),this;const t=Et(e);return this._addOutputValue("video",{fps:t},"tiny"),this}setOutputTinyVideoBitrate(e){return!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(e)||e<=0?C.error(`bitrate is invalid: ${e}`):this._addOutputValue("video",{bitrate:e},"tiny"),this}setOutputVideoRenderMode(e){return[sr.CROP,sr.WHOLE].includes(e)?this._addOutputValue("video",e,"exparams"):C.error(`renderMode is invalid: ${e}`),this}setOutputAudioBitrate(e){return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(e)&&e>0?this._addOutputValue("audio",e):C.error(`bitrate is invalid: ${e}`),this}setOutputBackgroundColor(e){return/^0x[a-fA-F0-9]{6}$/.test(e)?this._addOutputValue("video",e,"backgroundColor"):C.error(`color is invalid: ${e}`),this}addOutputBackgroundPicture(e,t,i,n,s){var o,a,c;if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isHttpUrl)(e))return C.error(`uri is invalid: ${e}`),this;if([t,i,n,s].some((e=>!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(e)||e<0||e>1)))return C.error(`some attrs of (x, y, w, h) is invalid: ${t}, ${i}, ${n}, ${s}`),this;const d=(null===(c=null===(a=null===(o=this._values.output)||void 0===o?void 0:o.video)||void 0===a?void 0:a.backgroundPicture)||void 0===c?void 0:c.picture)||[];return d.push({uri:e,w:n,h:s,x:t,y:i}),this._addOutputValue("video",{picture:d},"backgroundPicture"),this}removeOutputBackgroundPicture(e){var t,r,i;if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isHttpUrl)(e))return C.error(`uri is invalid: ${e}`),this;let n=null===(i=null===(r=null===(t=this._values.output)||void 0===t?void 0:t.video)||void 0===r?void 0:r.backgroundPicture)||void 0===i?void 0:i.picture;return n&&(n=n.filter((t=>t.uri!==e)),this._addOutputValue("video",{pictures:n},"backgroundPicture")),this}clearOutputBackgroundPicture(){return this._addOutputValue("video",{pictures:[]},"backgroundPicture"),this}setOutputBackgroundPictureFillMode(e){return[ir.CROP,ir.WHOLE].includes(e)?this._addOutputValue("video",{fillMode:e},"backgroundPicture"):C.error(`fillMode is invalid: ${e}`),this}addPublishStreamUrls(e){var t,r;const i=/^rtmp:\\/\\/.+/;if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isArray)(e)||0===e.length||e.some((e=>!i.test(e))))return C.error(`urls is invalid: ${e}`),this;const n=(null===(r=null===(t=this._values.output)||void 0===t?void 0:t.cdn)||void 0===r?void 0:r.concat())||[];let s=!1;return e.forEach((e=>{n.some((t=>t.pushurl===e))||(s=!0,n.push({pushurl:e}))})),n.length>5?(C.error("publish stream url no more than 5"),this):(s&&this._addOutputValue("cdn",n),this)}removePublishStreamUrls(e){var t,r;const i=/^rtmp:\\/\\/.+/;if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isArray)(e)||0===e.length||e.some((e=>!i.test(e))))return C.error(`urls is invalid: ${e}`),this;const n=(null===(r=null===(t=this._values.output)||void 0===t?void 0:t.cdn)||void 0===r?void 0:r.concat())||[];for(let t=n.length-1;t>=0;t-=1){const{pushurl:r}=n[t],i=e.indexOf(r);i>=0&&(e.splice(i,1),n.splice(t,1))}return this._addOutputValue("cdn",n),this}clearPublishStreamUrls(){return this._addOutputValue("cdn",[]),this}addCustomizeLayoutVideo(e,t,i,n,s){if(!this._isValidTrackId(e))return C.error(`trackId is invalid: ${e}`),this;if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(t)||!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(i))return C.error(`some attrs of (x, y) is invalid: ${t}, ${i}`),this;if([n,s].some((e=>!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(e)||e<0)))return C.error(`some attrs of (width, height) is invalid: ${n}, ${s}`),this;const{userId:o,tag:a,mediaType:c}=ft(e);if(c!==Fe.VIDEO_ONLY)return C.error(`kind of resource is not \'video\': ${e}`),this;const d=vt(o,a);return(this._values.input||(this._values.input={video:[]})).video.push({user_id:o,stream_id:d,x:t,y:i,width:n,height:s}),this}removeCustomizeLayoutVideo(e){if(!this._isValidTrackId(e))return C.error(`trackId is invalid: ${e}`),this;const{userId:t,tag:r,mediaType:i}=ft(e);if(i!==Fe.VIDEO_ONLY)return C.error(`kind of resource is not \'video\': ${e}`),this;const n=vt(t,r),s=this._values.input||(this._values.input={video:[]});return s.video=s.video.filter((e=>e.stream_id===n)),this}clearCustomizeLayoutVideo(){return(this._values.input||(this._values.input={video:[]})).video=[],this}flush(){var e,t,r,i;return S(this,void 0,void 0,(function*(){const n=JSON.parse(JSON.stringify(this._values)),{code:s}=yield this._onFlush(n);return s===T.SUCCESS&&((null===(t=null===(e=this._values.output)||void 0===e?void 0:e.video.normal)||void 0===t?void 0:t.width)||(null===(i=null===(r=this._values.output)||void 0===r?void 0:r.video.normal)||void 0===i?void 0:i.fps))&&this._sendCDNInfoSignal(),this._values=or(),{code:s}}))}}var cr,dr,ur,lr;!function(e){e[e.OPEN=1]="OPEN",e[e.STOP=2]="STOP"}(cr||(cr={})),function(e){e[e.SPREAD=0]="SPREAD",e[e.NO_SPREAD=-1]="NO_SPREAD"}(dr||(dr={})),function(e){e[e.AUTOMATIC=0]="AUTOMATIC",e[e.MANUAL=1]="MANUAL"}(ur||(ur={})),function(e){e[e.VIDEO=0]="VIDEO",e[e.AUDIO=1]="AUDIO"}(lr||(lr={}));const hr=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}));class pr{constructor(e,t,r,i,n,s,o,a){this._context=e,this._runtime=t,this._service=r,this._initOptions=i,this._mainLivingRoom=n,this._registerPKMsgListener=s,this._onJoinedPKRoom=o,this._onLeavePKRoom=a,this._inviteTimeout=30,this._PKInfo={},this._appListener=null,this._joinedPKRooms={},this._registerPKMsgListener(this._onRecvPKMsg.bind(this)),this._mainRoomId=this._mainLivingRoom.getRoomId()}_callAppListener(e,...t){var r;const i=null===(r=this._appListener)||void 0===r?void 0:r[e];if(i)try{i(...t)}catch(e){C.error(e)}}_onInvite(e){const t=e.inviteInfo||{},{inviterRoomId:r,inviterUserId:i,extra:n}=t,s={inviterRoomId:r,inviterUserId:i};n&&Object.assign(s,{extra:n}),this._PKInfo[r]=t,this._callAppListener("onRequestJoinOtherRoom",s)}_onCancelInvite(e){const{inviterRoomId:t,inviterUserId:r,extra:i}=e.inviteInfo||{},n={inviterRoomId:t,inviterUserId:r};i&&Object.assign(n,{extra:i}),delete this._PKInfo[t],this._callAppListener("onCancelRequestOtherRoom",n)}_onInviteTimeout(e){}_onInviteAnswer(e){const{answerCode:t,inviteContent:r,inviteeUserAutoMix:i}=e,{inviterUserId:n,inviterRoomId:s,inviteeUserId:o,inviteeRoomId:a,extra:c}=r,d={agree:1===t,inviterRoomId:s,inviterUserId:n,inviteeRoomId:a,inviteeUserId:o};this._PKInfo[a].inviteeUserAutoMix=i,this._callAppListener("onResponseJoinOtherRoom",d)}_onPKEnd(e){return S(this,void 0,void 0,(function*(){const{inviteeRoomId:t,inviterRoomId:r,userId:i}=e.inviteInfo,n=r===this._mainRoomId?t:r,s={endRoomId:n,endUserId:i};yield this.leaveOtherRoom(this._joinedPKRooms[n]),delete this._PKInfo[n],this._callAppListener("onFinishOtherRoom",s)}))}_onRecvPKMsg(e){const{targetId:t,content:r,messageType:i}=e;switch(i){case Nt.PK_INVITE:this._onInvite(r);break;case Nt.PK_CANCEL_INVITE:this._onCancelInvite(r);break;case Nt.PK_INVITE_TIMEOUT:this._onInviteTimeout(r);break;case Nt.PK_INVITE_ANSWER:this._onInviteAnswer(r);break;case Nt.PK_END:this._onPKEnd(r)}}registerRoomPKEventListener(e){this._appListener=e}requestJoinOtherRoom(e,t,r){return S(this,void 0,void 0,(function*(){if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)("inviteeRoomId",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.notEmptyString,!0)||!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)("inviteeUserId",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.notEmptyString,!0))return{code:T.PARAMS_ERROR};C.debug(`requestRoomPK -> inviteeRoomId: ${e}; inviteeUserId: ${t}; options: ${JSON.stringify(r||{})}`);const n=hr(),s=!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isBoolean)(null==r?void 0:r.autoMix)||(null==r?void 0:r.autoMix),o={inviteSessionId:n,inviterRoomId:this._mainRoomId,inviterUserId:this._context.getCurrentId(),inviterUserAutoMix:s,inviteeRoomId:e,inviteeUserId:t,inviteeTimeoutTime:this._inviteTimeout,extra:(null==r?void 0:r.extra)||""},a={roomId:this._mainRoomId,invitedRoomId:e,invitedUserId:t,inviteTimeout:this._inviteTimeout,inviteInfo:JSON.stringify(o),inviteSessionId:n};C.debug(`requestRoomPK -> params: ${JSON.stringify(a)}`);const d=yield this._context.requestRoomPK(a);return d!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(C.error(`requestRoomPK failed: ${d}`),{code:d}):(C.debug("requestRoomPK success"),this._PKInfo[e]={inviteSessionId:n,inviterRoomId:this._mainRoomId,inviterUserId:this._context.getCurrentId(),inviterUserAutoMix:s,inviteeRoomId:e},{code:T.SUCCESS})}))}cancelRequestJoinOtherRoom(e,t,r){return S(this,void 0,void 0,(function*(){if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)("inviteeRoomId",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.notEmptyString,!0)||!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)("inviteeUserId",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.notEmptyString,!0))return{code:T.PARAMS_ERROR};if(!this._PKInfo[e])return C.error(`未发起过与 ${e} 房间内 ${t} 连麦的请求`),{code:T.PARAMS_ERROR};C.debug(`canceRequestJoinPK -> inviteeRoomId: ${e}; inviteeUserId: ${t}; extra: ${r}`);const n={inviterRoomId:this._mainRoomId,inviterUserId:this._context.getCurrentId(),inviteeRoomId:e,inviteeUserId:t,extra:r||""},s={roomId:this._mainRoomId,invitedRoomId:e,invitedUserId:t,inviteSessionId:this._PKInfo[e].inviteSessionId,inviteInfo:JSON.stringify(n)};C.debug(`canceRequestJoinPK -> params: ${JSON.stringify(s)}`);const o=yield this._context.cancelRoomPK(s);return o!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(C.error(`canceRequestJoinPK failed: ${o}`),{code:o}):(C.debug("canceRequestJoinPK success"),delete this._PKInfo[e],{code:T.SUCCESS})}))}responseJoinOtherRoom(e,t,r,n){return S(this,void 0,void 0,(function*(){if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)("inviterRoomId",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.notEmptyString,!0)||!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)("inviterUserId",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.notEmptyString,!0))return{code:T.PARAMS_ERROR};if(!this._PKInfo[e])return C.error(`${e} 房间内的 ${t} 未发起过连麦请求`),{code:T.PARAMS_ERROR};C.debug(`responseRoomPK -> inviterRoomId: ${e}; inviterUserId: ${t}; agree: ${r}; options: ${JSON.stringify(n||{})}`);const{inviteSessionId:s,inviterUserAutoMix:o}=this._PKInfo[e],a=!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isBoolean)(null==n?void 0:n.autoMix)||(null==n?void 0:n.autoMix),d={inviteSessionId:s,inviterRoomId:e,inviterUserId:t,inviteeRoomId:this._mainRoomId,inviteeUserId:this._context.getCurrentId(),inviteeUserAutoMix:a},u=Object.assign(d,{inviterUserAutoMix:o}),l=r?Object.assign(d,{MultiRoomKey:`${e}|${this._mainRoomId}`,MultiRoomValue:JSON.stringify(u)}):d;!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isUndefined)(null==n?void 0:n.extra)&&Object.assign(l,{extra:n.extra});const m={agree:r,roomId:this._mainRoomId,inviteSessionId:s,inviteRoomId:e,inviteUserId:t,content:JSON.stringify(l),key:`${e}|${t}`,value:JSON.stringify(d)};C.debug(`responseRoomPK -> params: ${JSON.stringify(m)}`);const f=yield this._context.responseRoomPK(m);return f!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(C.error(`responseRoomPK failed: ${f}`),{code:f}):(C.debug("responseRoomPK success"),this._PKInfo[e].inviteeUserAutoMix=a,{code:T.SUCCESS})}))}_quitRoomPK(e){return S(this,void 0,void 0,(function*(){const{inviterRoomId:t,inviteeRoomId:r,inviterUserId:n}=this._PKInfo[e],s={inviteeRoomId:r,inviterRoomId:t,userId:this._context.getCurrentId()},o={roomId:this._mainRoomId,endRoomId:e,sessionId:this._PKInfo[e].inviteSessionId,content:JSON.stringify(s),keys:[`${t}|${n}`]};C.debug(`quitRoomPK -> params: ${JSON.stringify(o)}`);const a=yield this._context.endRoomPK(o);return a!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(C.error(`quitRoomPK failed: ${a}`),{code:T.SIGNAL_ERROR}):(C.debug("quitRoomPK success"),delete this._PKInfo[e],{code:T.SUCCESS})}))}_relaseCrtRoom(){}joinOtherRoom(e){return S(this,void 0,void 0,(function*(){if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)("roomId",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.notEmptyString,!0))return{code:T.PARAMS_ERROR};if(this._context.getConnectionStatus()!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ConnectionStatus.CONNECTED)return{code:T.SIGNAL_DISCONNECTED};if(C.debug(`joinPKRoom, roomId: ${e}`),this._joinedPKRooms[e])return{code:T.REPERT_JOIN_ROOM};const t=lr.VIDEO,{code:r,data:s}=yield this._context.joinRTCRoom(e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCMode.LIVE,t);if(r!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS)return C.error(`joinRoom failed -> code: ${r}`),{code:r};C.debug(`JoinPKRoom success -> userId: ${this._context.getCurrentId()}, roomId: ${e}, data: ${JSON.stringify(s)}`);const o=new _r(this._context,this._runtime,e,s,this._service,this._initOptions,this._relaseCrtRoom.bind(this),t,!1,!1);return this._joinedPKRooms[e]=o,this._onJoinedPKRoom(e,o),{room:o,code:T.SUCCESS,userIds:o.getRemoteUserIds(),tracks:o.getRemoteTracks()}}))}leaveOtherRoom(e,t){return S(this,void 0,void 0,(function*(){return k((()=>S(this,void 0,void 0,(function*(){const r=e.getRoomId();return C.debug(`leavePKRoom -> userId: ${this._context.getCurrentId()} , roomId: ${r}`),yield e.__destroy(!0),delete this._joinedPKRooms[r],this._onLeavePKRoom(r),this._PKInfo[r]?(t&&this._quitRoomPK(r),{code:T.SUCCESS}):{code:T.SUCCESS}}))))}))}getPKInfo(e){return this._PKInfo[e]}getJoinedPKRooms(){return this._joinedPKRooms}}class _r extends rr{constructor(e,t,r,i,n,s,o,a,c=!1,d){var l;super(e,t,r,i,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCMode.LIVE,n,s,o,c,d),this._livingType=a,this._isMainRoom=d,this._CDNUris=null,this._CDNEnable=!1,this._mcuConfigBuilder=new ar(this._onMCUConfigFlush.bind(this),this._isValidResourceId.bind(this),this._sendCDNInfoSignal.bind(this)),this._isMainRoom&&(this._roomPKHandler=new pr(e,t,n,s,this,super._registerPKMsgListener.bind(this),this._onJoinedPKRoom.bind(this),this._onLeavePKRoom.bind(this)));const h=null===(l=i.roomInfo.filter((e=>"cdn_uris"===e.key))[0])||void 0===l?void 0:l.value;h&&(this._CDNUris=JSON.parse(h)[0])}_isValidResourceId(e){var t;const{userId:r}=ft(e),i=!!(null===(t=this._roomResources[r])||void 0===t?void 0:t.find((t=>mt(t)===e)));let n=!1;const{code:s,roomPKHandler:o}=this.getRoomPKHandler();if(s!==T.SUCCESS||!o)return i;const a=o.getJoinedPKRooms(),c=[];return Object.values(a).map((e=>{c.push(...e.getRemoteTracks())})),n=c.some((t=>e===t.getTrackId())),i||n}getLivingType(){return this._livingType}getMCUConfigBuilder(){return this._isMainRoom?this._mcuConfigBuilder:(C.error("the `getMCUConfigBuilder` is disabled in PK room "),{code:T.THE_FUNCTION_IS_DISABLED_IN_PKROOM})}_onMCUConfigFlush(e){return S(this,void 0,void 0,(function*(){const t={"App-Key":this._context.getAppkey(),Token:this._token,RoomId:this.getRoomId(),UserId:this._context.getCurrentId(),SessionId:this.getSessionId()},{code:r,res:i}=yield this._service.setMcuConfig(t,e);return r!==T.SUCCESS?(C.error(`set MCU config failed: ${r}`),{code:r}):(C.info("set MCU config success"),i.pull_url&&(this._CDNUris=JSON.parse(i.pull_url)),{code:r,res:i})}))}__onReconnected(){const e=Object.create(null,{__onReconnected:{get:()=>super.__onReconnected}});var t,r;return S(this,void 0,void 0,(function*(){const i=yield e.__onReconnected.call(this,this._livingType);if(!i||!i.data)return;const n=i.data.roomInfo,s=null===(t=n.filter((e=>"cdn_uris"===e.key))[0])||void 0===t?void 0:t.value;if(!s)return;const o=JSON.parse(s);(null===(r=this._CDNUris)||void 0===r?void 0:r.enableInnerCDN)!==o.enableInnerCDN&&this._callAppListener("onCDNEnableChange",o.enableInnerCDN),this._CDNUris=o}))}enableInnerCDN(e){return S(this,void 0,void 0,(function*(){if(!this._isMainRoom)return C.error("the `enableInnerCDN` is disabled in PK room "),{code:T.THE_FUNCTION_IS_DISABLED_IN_PKROOM};if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isBoolean)(e))return C.error("`enable` is invalid"),{code:T.PARAMS_ERROR};this._CDNEnable=e;const t={version:2,output:{inCDNModel:e?cr.OPEN:cr.STOP}},{code:r}=yield this._onMCUConfigFlush(t);if(r!==T.SUCCESS)return C.error(`enableInnerCDN failed -> code: ${r}`),{code:T.SIGNAL_ERROR};if(this._CDNUris&&this._CDNUris.broadcast!==dr.SPREAD)return C.info("enableInnerCDN succeed"),{code:T.SUCCESS};const{code:i}=yield k((()=>S(this,void 0,void 0,(function*(){return this._sendCDNInfoSignal()}))));return i===T.SUCCESS?(C.info("enableInnerCDN succeed"),{code:T.SUCCESS}):(C.error(`enableInnerCDN failed -> code: ${i}`),{code:i})}))}_sendCDNInfoSignal(){return S(this,void 0,void 0,(function*(){this._CDNUris=Object.assign({},this._CDNUris,{enableInnerCDN:this._CDNEnable});return(yield Promise.all([this._spreadCDNInfo(this._CDNUris),this._setRoomCDNInfo(this._CDNUris)])).every((e=>e.code===T.SUCCESS))?{code:T.SUCCESS}:{code:T.SIGNAL_ERROR}}))}_spreadCDNInfo(e){return S(this,void 0,void 0,(function*(){const t=yield this._context.setRTCCDNUris(this._roomId,Nt.TOTAL_CONTENT_RESOURCE,JSON.stringify([e]));return t!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(C.error(`spreadCDNInfo failed -> code: ${t}`),{code:T.SIGNAL_ERROR}):(C.info("spreadCDNInfo succeed"),{code:T.SUCCESS})}))}_setRoomCDNInfo(e){return S(this,void 0,void 0,(function*(){const t=yield this._context.setRTCData(this._roomId,"cdn_uris",JSON.stringify([e]),!0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCApiType.ROOM);return t!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(C.error(`setRoomCDNInfo failed -> code: ${t}`),{code:T.SIGNAL_ERROR}):(C.info("setRoomCDNInfo succeed"),{code:T.SUCCESS})}))}_resourceHandle(e,t,r){const i=Object.create(null,{_resourceHandle:{get:()=>super._resourceHandle}});var n;return S(this,void 0,void 0,(function*(){i._resourceHandle.call(this,e,t,r),e.cdn_uris&&((null===(n=this._CDNUris)||void 0===n?void 0:n.enableInnerCDN)!==e.cdn_uris[0].enableInnerCDN&&this._callAppListener("onCDNEnableChange",!this.__getCDNEnable()),this._CDNUris=e.cdn_uris[0])}))}_exchangeHandle(e){var t,r,i;return S(this,void 0,void 0,(function*(){const n=yield this._service.exchange(this._getRTCReqestHeaders(),e),s=null===(r=null===(t=n.data)||void 0===t?void 0:t.urls)||void 0===r?void 0:r.pull_url;return n.code===T.SUCCESS&&s?(this._CDNUris=JSON.parse(s),(null===(i=this._CDNUris)||void 0===i?void 0:i.broadcast)===dr.SPREAD&&(this._CDNEnable=!0,this._sendCDNInfoSignal()),n):n}))}_afterChangedRole(e){const t=Lt(e),r=this._context.getCurrentId(),i=Object.keys(t);setTimeout((()=>{var n,s,o;const a=i.filter((e=>e!==r));a.length>0&&this._callAppListener("onUserJoin",a);for(const e in t)e!==r&&this._resourceHandle({uris:t[e]},Nt.TOTAL_CONTENT_RESOURCE,e);(null===(n=e.roomInfo.filter((e=>"cdn_uris"===e.key))[0])||void 0===n?void 0:n.value)&&(null===(s=this._CDNUris)||void 0===s?void 0:s.push_mode)===ur.MANUAL&&this._callAppListener("onCDNEnableChange",null===(o=this._CDNUris)||void 0===o?void 0:o.enableInnerCDN)}))}__getCDNEnable(){var e;return null===(e=this._CDNUris)||void 0===e?void 0:e.enableInnerCDN}__getCDNPushMode(){var e;return null===(e=this._CDNUris)||void 0===e?void 0:e.push_mode}_onJoinedPKRoom(e,t){const{code:r,roomPKHandler:i}=this.getRoomPKHandler();if(r===T.SUCCESS&&i){if(!i.getPKInfo(e))return;this._exchangeWithPushOtherRoom()}}_onLeavePKRoom(e){const{code:t,roomPKHandler:r}=this.getRoomPKHandler();if(t===T.SUCCESS&&r){if(!r.getPKInfo(e))return;this._exchangeWithPushOtherRoom()}}_exchangeWithPushOtherRoom(){return S(this,void 0,void 0,(function*(){if(!this.getLocalTracks().length)return;const e=yield this._createExchangeParams(this._subscribedList,!1),t=this._getPushOtherRoomsParams();t&&(e.pushOtherRooms=t);const r=yield this._exchangeHandle(e);if(r.code!==T.SUCCESS)return C.error(`reTryExchange failed: ${r.code}`),{code:r.code};const{sdp:i,resultCode:n}=r.data;if(n!==T.SUCCESS)return C.error(`exchange with pushOtherRoom failed: ${n}`),{code:n};const s=yield this._pc.setRemoteAnswer(i.sdp);return s!==T.SUCCESS?{code:s}:void 0}))}getRoomPKHandler(){return this._isMainRoom?{code:T.SUCCESS,roomPKHandler:this._roomPKHandler}:(C.error("the `getRoomPKHandler` is disabled in PK room "),{code:T.THE_FUNCTION_IS_DISABLED_IN_PKROOM})}_quitAllPKRoom(){const e=this._roomPKHandler.getJoinedPKRooms();for(const t in e){const r=e[t];this._roomPKHandler.leaveOtherRoom(r)}}}class mr extends rr{constructor(e,t,r,i,n,s,o){super(e,t,r,i,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCMode.RTC,n,s,o,!1)}}const fr=()=>({"Content-Type":"application/json;charset=UTF-8","Cache-Control":"no-cache",ClientType:`web|${yt.browser}|${yt.version}`,ClientVersion:"5.3.1","Client-Session-Id":hr(),"Request-Id":Date.now().toString()});class vr{constructor(e,t,r,i=5e3){this._runtime=e,this._context=t,this._msUrl=r,this._timeout=i,this._msInNavi=[],this._failedMs=[],this._rtcFinger=void 0,this._clusterId="",this._configUrl=""}getNaviMS(){return this._msUrl?[this._msUrl]:this._clusterId?[`https://${this._clusterId}`]:(0===this._msInNavi.length&&(0===this._failedMs.length?this._msInNavi.push(...(e=>{var t;if(!e)return[];let r;try{r=JSON.parse(e.voipCallInfo||\'{ "strategy": 0 }\')}catch(t){return C.warn("parse `voipCallInfo` of navi failed: "+e.voipCallInfo),[]}if(0===r.strategy)return[];const i=null===(t=r.callEngine)||void 0===t?void 0:t.filter((e=>4===e.engineType));if(!i||0===i.length)return[];const n=i[0],s=[];return n.mediaServer&&s.push(n.mediaServer.replace(/^(https?:\\/\\/)?/,"https://")),n.backupMediaServer&&n.backupMediaServer.forEach((e=>{s.push(e.replace(/^(https?:\\/\\/)?/,"https://"))})),s})(this._context.getNaviInfo())):(this._msInNavi.push(...this._failedMs),this._failedMs.length=0)),this._msInNavi.map((e=>e.trim())))}_request(e,t,r){return S(this,void 0,void 0,(function*(){const i=this.getNaviMS();if(0===i.length)return{code:T.NOT_OPEN_VIDEO_AUDIO_SERVER};this._rtcFinger&&(r.rtcFinger=this._rtcFinger);for(let n=0;n<i.length;n+=1){const s=`${i[n]}${e}`,o=fr();C.debug(`request -> Request-Id: ${o["Request-Id"]}, url: ${s}`);const{status:a,data:c}=yield this._runtime.httpReq({url:s,body:JSON.stringify(r),headers:Object.assign(Object.assign({},o),t),method:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.HttpMethod.POST,timeout:this._timeout});if(200===a){const e=JSON.parse(c);return e.rtcFinger&&(this._rtcFinger=e.rtcFinger),e.clusterId&&(this._clusterId=e.clusterId),C.debug(`request success -> Request-Id: ${o["Request-Id"]}`),{code:T.SUCCESS,data:e}}C.warn(`request failed -> Request-Id: ${o["Request-Id"]}, status: ${a}, url: ${s}`),this._failedMs.push(...this._msInNavi.splice(n,1))}return{code:T.REQUEST_FAILED}}))}exchange(e,t){var r;return S(this,void 0,void 0,(function*(){const i=yield this._request("/exchange",e,t);if(i.code===T.SUCCESS&&(null===(r=i.data)||void 0===r?void 0:r.resultCode)===T.SUCCESS){const e=i.data.urls;e&&(this._configUrl=e.configUrl)}return i}))}exit(e){return S(this,void 0,void 0,(function*(){const{code:t}=yield this._request("/exit",e,{});return t}))}broadcastSubscribe(e,t){return this._request("/broadcast/subscribe",e,t)}broadcastExit(e){return S(this,void 0,void 0,(function*(){const{code:t}=yield this._request("/broadcast/exit",e,{});return{code:t}}))}setMcuConfig(e,t){return S(this,void 0,void 0,(function*(){if(!this._configUrl)return{code:T.MCU_SERVER_NOT_FOUND};const r=`${this._configUrl.replace(/^(https?:\\/\\/)?/,"https://")}/server/mcu/config`,i=fr();C.debug(`request -> Request-Id: ${i["Request-Id"]}, url: ${r}`);const{status:n,data:s}=yield this._runtime.httpReq({url:r,headers:Object.assign(Object.assign({},i),e),body:JSON.stringify(t),method:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.HttpMethod.POST});if(200===n){C.debug(`request success -> Request-Id: ${i["Request-Id"]}`);const e=JSON.parse(s);return{code:e.resultCode,res:e}}return{code:T.REQUEST_FAILED}}))}getCDNResourceInfo(e,t){return S(this,void 0,void 0,(function*(){const r=fr(),{status:i,data:n}=yield this._runtime.httpReq({url:t,headers:Object.assign(Object.assign({},r),e),method:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.HttpMethod.GET});if(200===i){const e=JSON.parse(n);return{code:e.resultCode,res:e}}return C.warn(`request failed -> Request-Id: ${r["Request-Id"]}, status: ${i}, url: ${t}`),{code:T.REQUEST_FAILED}}))}}class Rr{constructor(e,t,r){this._context=e,this._rtcToken="",this._liveUrl="",this._subTracks=[],this._livingType=null,this._mediaType=null,this._subTiny=!1,this._fromRetry=!1,this._appListener=null,this._service=new vr(t,e,r.mediaServer)}_getReqHeaders(e){return S(this,void 0,void 0,(function*(){const t=this._context.getCurrentId(),r=t;if(!this._rtcToken){const{code:t,data:n}=yield this._context.getRTCToken(r,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCMode.LIVE,e);if(t!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS)return C.error(`getRTCToken failed: ${t}`),{code:T.SIGNAL_ERROR};this._rtcToken=n.rtcToken}return{code:T.SUCCESS,headers:{"App-Key":this._context.getAppkey(),UserId:t,RoomId:r,RoomType:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCMode.LIVE,Token:this._rtcToken}}}))}_clearSubscribeInfo(){var e;this._liveUrl="",this._livingType=null,this._mediaType=null,this._subTiny=!1,this._subTracks.length=0,null===(e=this._pc)||void 0===e||e.destroy(),this._pc=null}_reTryExchange(){var e;return S(this,void 0,void 0,(function*(){this._fromRetry=!0;const{code:t}=yield this.subscribe(this._liveUrl,this._livingType,this._mediaType,this._subTiny);t===T.SUCCESS&&(null===(e=this._pc)||void 0===e||e.clearReTryExchangeTimer())}))}subscribe(e,t,r,i=!1){return S(this,void 0,void 0,(function*(){return k((()=>this.__subscribe(e,t,r,i)))}))}__subscribe(e,t,r,i=!1){var n;return S(this,void 0,void 0,(function*(){const s=[];if(Ot(this._context.getNaviInfo()))return{code:T.PACKAGE_ENVIRONMENT_ERROR,tracks:s};if(!this._fromRetry&&(null===(n=this._pc)||void 0===n||n.clearReTryExchangeTimer()),this._fromRetry=!1,!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isString)(e))return C.error(`liveUrl is invalid: ${e}`),{code:T.PARAMS_ERROR,tracks:s};if(![lr.AUDIO,lr.VIDEO].includes(t))return C.error(`livingType is invalid: ${t}`),{code:T.PARAMS_ERROR,tracks:s};if(![Fe.AUDIO_ONLY,Fe.VIDEO_ONLY,Fe.AUDIO_VIDEO].includes(r))return C.error(`mediaType is invalid: ${r}`),{code:T.PARAMS_ERROR,tracks:s};if(this._liveUrl&&this._liveUrl!==e)return{code:T.BROADCAST_SUB_LIST_NOT_EMPTY,tracks:s};this._pc||(this._pc=new Wt(this._reTryExchange.bind(this)),this._pc.on(Wt.__INNER_EVENT_TRACK_READY__,this._onTrackReady,this),this.registerReportListener(this._reportListener)),this._liveUrl=e;const{code:o,headers:a}=yield this._getReqHeaders(t);if(o!==T.SUCCESS)return{code:o,tracks:s};const c=`rc_mcu_${Date.now()}`,d="RongCloudRTC";0===this._subTracks.length&&(this._subTracks.push(new ot(d,c),new at(d,c)),this._pc.updateSubRemoteTracks(this._subTracks.slice()));const u={sdp:yield this._pc.createOffer(!0),liveUrl:e,mediaType:r,simulcast:i?Mt.TINY:Mt.NORMAL,switchstream:!1},l=yield this._service.broadcastSubscribe(a,u);if(l.code!==T.SUCCESS)return C.error(`andience subscribe failed: ${l.code}`),{code:l.code,tracks:s};const h=l.data;if(h.resultCode!==T.SUCCESS)return C.error(`andience subscribe failed! code: ${h.resultCode}; message: ${h.message}`),{code:h.resultCode,tracks:s};C.debug(`andience subscribe success: ${e}`),this._livingType=t,this._mediaType=r,this._subTiny=i;const{sdp:p,subscribedList:_}=h,m=[];return _.forEach((e=>{const{mediaType:t}=e,r=this._subTracks[t];m.push(r),r.__innerSetRemoteMuted(!0)})),this._pc.setRemoteAnswer(p.sdp),{code:T.SUCCESS,tracks:m}}))}unsubscribe(){return S(this,void 0,void 0,(function*(){return k((()=>this.__unsubscribe()))}))}__unsubscribe(){var e;return S(this,void 0,void 0,(function*(){if(null===(e=this._pc)||void 0===e||e.clearReTryExchangeTimer(),!this._rtcToken||!this._liveUrl)return{code:T.SUCCESS};const{headers:t}=yield this._getReqHeaders(),{code:r}=yield this._service.broadcastExit(t);return r!==T.SUCCESS?C.error(`broadcast unsubscribe failed: ${r}`):C.debug("broadcast unsubscribe success"),this._clearSubscribeInfo(),{code:r}}))}registerReportListener(e){var t;this._reportListener=e,null===(t=this._pc)||void 0===t||t.registerReportListener(e)}registerTrackEventListener(e){this._appListener=e}_onTrackReady(e){var t,r;const i=e.receiver.track,n="audio"===i.kind?Fe.AUDIO_ONLY:Fe.VIDEO_ONLY,s=this._subTracks[n];s.__innerSetMediaStreamTrack(i);try{null===(r=null===(t=this._appListener)||void 0===t?void 0:t.onTrackReady)||void 0===r||r.call(t,s)}catch(e){C.error(e)}}}var gr,Sr;!function(e){e.RTMP="rtmp",e.FLV="flv",e.HLS="hls"}(gr||(gr={})),function(e){e[e.NOT_HTTPS=0]="NOT_HTTPS",e[e.HTTPS=1]="HTTPS"}(Sr||(Sr={}));const Cr=Object.assign(Object.assign({},Ct(He.W176_H144)),{frameRate:Et(Be.FPS_15)});class Tr{constructor(e,t,r,i,n,s){this._context=e,this._runtime=t,this._initOptions=r,this._roomId=i,this._joinResData=n,this._livingType=s,this._roomAnchorList=[],this._roomRes={},this._roomAnchorRes={},this._remoteTracks={},this._appListener=null,this._subscribedList=[],this._sessionId="",this._destroyed=!1,this._setInitData(),this._service=new vr(this._runtime,this._context,this._initOptions.mediaServer,this._initOptions.timeout),this._polarisReport=new Zt(this._context,this._runtime,this._roomId,this,qt.Audience),this._polarisReport.sendR1(),this._pc=new Wt(this._reTryExchange.bind(this),this._polarisReport),this._pc.on(Wt.__INNER_EVENT_TRACK_READY__,(e=>{const t=e.streams[0].id,r=e.receiver.track,i=[t,"audio"===r.kind?Fe.AUDIO_ONLY:Fe.VIDEO_ONLY].join("_"),n=this._remoteTracks[i];n?(n.__innerSetMediaStreamTrack(r),this._callAppListener("onTrackReady",n)):C.warn("cannot found RCRemoteTrack:",r.id)})),this._context.onrtcdatachange=this.singalDataChange.bind(this)}_setInitData(){const{sessionId:e,remoteUserIds:t,remoteRTCUris:r,remoteMUCUris:i,remoteTracks:n,CDNUris:s}=((e,t)=>{const r=t.filter((e=>"RC_RTC_SESSIONID"===e.key))[0],i=r?r.value:"",n=t.filter((e=>"RC_ANCHOR_LIST"===e.key)).map((e=>JSON.parse(e.value||"[]")))[0],s=t.filter((e=>e.key.includes("RC_RES_"))).map((e=>JSON.parse(e.value||"{}"))),o=s.length?JSON.parse(s[0].mcu_uris||"[]"):[],a=[];o.forEach((t=>{const{mediaType:r,tag:i}=t,n=r===Fe.AUDIO_ONLY?new ot(i,"",e):new at(i,"",e);a.push(n)}));const c=[],d=[];s.forEach((e=>{const t=JSON.parse(e.uris||"[]");c.push(...t),t.forEach((e=>{const{mediaType:t,tag:r,msid:i}=e,n=i.split("_")[0],s=t===Fe.AUDIO_ONLY?new ot(r,n):new at(r,n);d.push(s)}))}));const u=t.filter((e=>"RC_CDN"===e.key)).map((e=>{const t=JSON.parse(e.value||"[]");return JSON.parse(t.cdn_uris)[0]}))[0];return{sessionId:i,remoteUserIds:n||[],remoteRTCUris:c,remoteMUCUris:o,remoteRTCTracks:d,remoteMCUTracks:a,remoteTracks:[...d,...a],CDNUris:u||{}}})(this._roomId,this._joinResData.kvEntries);this._sessionId=e,this._roomAnchorList=t,n.forEach((e=>{this._remoteTracks[e.getTrackId()]=e})),this._CDNUris=s,r.forEach((e=>{const t=e.msid.split("_")[0];this._roomAnchorRes[t]?this._roomAnchorRes[t].push(e):this._roomAnchorRes[t]=[e]})),i.forEach((e=>{const{mediaType:t,tag:r}=e,i=[this._roomId,r,t].join("_");this._roomRes[i]=e})),r.forEach((e=>{const t=mt(e);this._roomRes[t]=e}))}_assertRoomDestroyed(){if(this._destroyed){const e="This room has been destroyed. Please use `RCRTCClient.joinLivingRoomAsAudience` to catch another instance.";return C.warn(e),T.ROOM_HAS_BEEN_DESTROYED}}singalDataChange(e,t){var r;if(t!==this._roomId)return void C.warn(`singalDataChange -> not the current room data: data roomId: ${t}, current roomId: ${this._roomId}`);C.debug("singalDataChange -> singalData:",JSON.stringify(e||{}));const i=[],n=null===(r=e.filter((e=>"RC_CDN"===e.key))[0])||void 0===r?void 0:r.value;n&&this._diffCDNUris(JSON.parse(JSON.parse(n).cdn_uris)[0]),e.forEach((e=>{const{key:t,value:r,timestamp:n,uid:s}=e;if(-1!==t.indexOf("RC_RES_")){const e=JSON.parse(r||"{}"),t=JSON.parse(e.mcu_uris||"[]"),n=JSON.parse(e.uris||"[]");return i.push(...t),void this._diffAnchorResource(n,s)}if("RC_ANCHOR_LIST"===t){const e=JSON.parse(r||"[]"),{joinUserIds:t,leftUserIds:i}=this._diffAnchorList(e);t.length>0&&this._handleNewJoinedAnchor(t),i.length>0&&this._handleLeftedAnchor(i)}})),this._diffRoomResource(i)}_diffAnchorList(e){const t=e.filter((e=>this._roomAnchorList.indexOf(e)<0));return{leftUserIds:this._roomAnchorList.filter((t=>e.indexOf(t)<0)),joinUserIds:t}}_handleNewJoinedAnchor(e){this._roomAnchorList.push(...e),this._callAppListener("onAnchorJoin",e)}_handleLeftedAnchor(e){return S(this,void 0,void 0,(function*(){this._roomAnchorList=this._roomAnchorList.filter((t=>!(e.indexOf(t)>-1)));const t=[];e.forEach((e=>{t.push(...this.getRemoteTracksByUserId(e)),delete this._roomAnchorRes[e]})),t.length&&(yield this.unsubscribe(t),t.forEach((e=>delete this._remoteTracks[e.getTrackId()]))),this._callAppListener("onAnchorLeave",e)}))}_diffRoomResource(e){return S(this,void 0,void 0,(function*(){const t=[],r=[],i=[];e.forEach((e=>{const r=mt(e),{userId:n,tag:s,mediaType:o}=ft(r),a=[this._roomId,s,o].join("_");if(!this._remoteTracks[a]){const r=o===Fe.AUDIO_ONLY?new ot(s,"",this._roomId):new at(s,"",this._roomId);t.push(r),this._remoteTracks[a]=r,this._roomRes[r.getTrackId()]=e}i.push(a)})),Object.keys(this._remoteTracks).forEach((e=>{i.indexOf(e)<0&&this._remoteTracks[e].isMCUTrack()&&r.push(this._remoteTracks[e])})),t.length>0&&this._callAppListener("onTrackPublish",t),r.length>0&&this._onUserUnpublish(r,"onTrackUnpublish")}))}_diffAnchorResource(e,t){return S(this,void 0,void 0,(function*(){const r=this._roomAnchorRes[t]||(this._roomAnchorRes[t]=[]),{publishedList:i,unpublishedList:n,modifiedList:s}=gt(r,e);if(i.length){const e=r.map(mt),t=[],n=[];if(i.forEach((i=>{const s=mt(i),o=e.indexOf(s),{userId:a,tag:c,mediaType:d}=ft(s);o>-1?r[o]=i:r.push(i);let u=this._remoteTracks[s];this._roomRes[s]=i,u?u.isSubscribed()&&t.push(u):(u=d===Fe.AUDIO_ONLY?new ot(c,a):new at(c,a),this._remoteTracks[s]=u,n.push(u)),u.__innerSetRemoteMuted(0===i.state)})),t.length){const e=t.map((e=>e.getTrackId()));C.debug(`resub tracks -> ${JSON.stringify(e)}`);const{code:r}=yield k((()=>this._subscribeHandle(t,!0)));r!==T.SUCCESS&&C.error(`resub tracks failed -> code: ${r}, ids: ${JSON.stringify(e)}`)}this._callAppListener("onAnchorTrackPublish",n)}if(n.length){const e=n.map(mt);for(let t=r.length-1;t>=0;t-=1){const i=r[t];e.includes(mt(i))&&r.splice(t,1)}const t=n.map((e=>{const t=mt(e);return this._remoteTracks[t]}));yield this._onUserUnpublish(t,"onAnchorTrackUnpublish")}if(s.length){const e=r.map(mt);for(let t=0;t<s.length;t++){const i=s[t],n=mt(i),o=e.indexOf(n);r[o].state=i.state;const a=this._remoteTracks[n];a.__innerSetRemoteMuted(0===i.state),a.isAudioTrack()?this._callAppListener("onAudioMuteChange",a):this._callAppListener("onVideoMuteChange",a)}}}))}_onUserUnpublish(e,t){return S(this,void 0,void 0,(function*(){yield this.unsubscribe(e),e.forEach((e=>{this._subscribedList=this._subscribedList.filter((t=>t.track.getTrackId()!==e.getTrackId())),delete this._roomRes[e.getTrackId()],e.__innerDestroy(),delete this._remoteTracks[e.getTrackId()]})),this._callAppListener(t,e)}))}_callAppListener(e,...t){var r;const i=null===(r=this._appListener)||void 0===r?void 0:r[e];if(i)try{i(...t)}catch(e){C.error(e)}}_reTryExchange(){return S(this,void 0,void 0,(function*(){k((()=>S(this,void 0,void 0,(function*(){var e;const{reqBody:t}=yield this._createSubscribeParams(this._subscribedList,{},!0),r=yield this._exchangeHandle(t);if(r.code!==T.SUCCESS)return C.error(`reTryExchange failed: ${r.code}`),{code:r.code};const{sdp:i,resultCode:n}=r.data;if(n!==T.SUCCESS)return C.error(`reTryExchange failed: ${n}`),{code:n};this._pc.clearReTryExchangeTimer();const s=this._subscribedList.filter((e=>e.track.isMCUTrack()));if(s.length>0){const t=s[0].track.getTrackId(),r=null===(e=this._roomRes[t])||void 0===e?void 0:e.msid,n=[this._roomId,"RongCloudRTC"].join("_");i.sdp=i.sdp.replace(new RegExp(r,"g"),n)}const o=yield this._pc.setRemoteAnswer(i.sdp);return o!==T.SUCCESS?{code:o}:void 0}))))}))}_createSubscribeParams(e,t,r){return S(this,void 0,void 0,(function*(){const i=yield this._pc.createOffer(r),n={resolutionInfo:[]},s={min:0,max:0};Object.keys(t).forEach((e=>{const{mediaStream:r,tinyStream:o}=t[e];[r,o].forEach(((t,r)=>{var o;const a=1===r?[e,"tiny"].join("_"):e;i.sdp=null===(o=i.sdp)||void 0===o?void 0:o.replace(new RegExp(t.id,"g"),a);const c=t.getVideoTracks()[0];if(!c)return;const d=0===r,{width:u,height:l,frameRate:h}=d?pt(c):Cr;n.resolutionInfo.push({trackId:c.id,simulcast:d?Mt.NORMAL:Mt.TINY,resolution:`${u}x${l}`});const p=Ge(u,l),_=We(h);s.min+=p.minBitrate*_,s.max+=p.maxBitrate*_}))}));return{reqBody:{sdp:i,switchstream:!1,newVersionFlag:!0,subscribeList:e.map((e=>({simulcast:e.subTiny?Mt.TINY:Mt.NORMAL,resolution:"",uri:this._roomRes[e.track.getTrackId()].uri})))},dynamicBitrate:s,offer:i}}))}_subscribeHandle(e,t=!1){var r;return S(this,void 0,void 0,(function*(){if(this._assertRoomDestroyed())return{code:T.ROOM_HAS_BEEN_DESTROYED};if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)("tracks",e,(()=>(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isArray)(e)&&e.length>0&&e.every((e=>e instanceof st||e.track instanceof st))),!0))return{code:T.PARAMS_ERROR};const i=this._subscribedList.map((e=>Object.assign({},e))),n=e.map((e=>e instanceof st?{track:e}:e));let s=!1;const o=[];return n.forEach((e=>{const t=e.track.getTrackId();o.push(t);const r=i.find((e=>e.track.getTrackId()===t));r&&r.subTiny===e.subTiny||(r?r.subTiny=e.subTiny:i.push(e),s=!0)})),s||t?(null===(r=this._polarisReport)||void 0===r||r.sendR2(zt.SUBSCRIBE,Qt.BEGIN,o),this._updateSubListHandle(i,!0)):{code:T.SUCCESS}}))}_getReqHeaders(){const e=this._context.getCurrentId();return{"App-Key":this._context.getAppkey(),RoomId:e,Token:this._joinResData.token,RoomType:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCMode.LIVE,UserId:e,"Session-Id":this._sessionId}}_exchangeHandle(e){return this._service.broadcastSubscribe(this._getReqHeaders(),e)}_updateSubListHandle(e,t=!1){var r;return S(this,void 0,void 0,(function*(){if(this._assertRoomDestroyed())return{code:T.ROOM_HAS_BEEN_DESTROYED};if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)("resources",e,(()=>(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isArray)(e)&&e.every((e=>e instanceof st||e.track instanceof st))),!0))return{code:T.PARAMS_ERROR};let i=e.map((e=>e instanceof st?{track:e}:Object.assign({},e)));const n={};i=i.filter((e=>{const t=e.track.getTrackId();return!n[t]&&(n[t]=!0)})).map((e=>Object.assign({},e)));const s=this._subscribedList.map((e=>Object.assign({},e)));if(!t){let e=!1;if(i.forEach((t=>{const r=s.findIndex((e=>e.track===t.track));if(-1===r)return void(e=!0);s.splice(r,1)[0].subTiny!==t.subTiny&&(e=!0)})),s.length&&(e=!0),!e)return{code:T.SUCCESS}}this._pc.clearReTryExchangeTimer(),this._pc.updateSubRemoteTracks(i.map((e=>e.track)));const{reqBody:o}=yield this._createSubscribeParams(i,{},!1),a=yield this._exchangeHandle(o);if(s.length){const e=[];s.forEach((t=>{e.push(t.track.getTrackId())})),null===(r=this._pc.reportParser)||void 0===r||r.clearLatestPacketsRecv(e)}if(a.code!==T.SUCCESS)return{code:a.code};const{sdp:u,resultCode:l,message:h,subscribedList:p}=a.data;if(l!==T.SUCCESS)return C.error("change subscribe list failed:",h,l),{code:l};i.forEach((e=>{const{track:t}=e;if(t.isMCUTrack()){const e=this._roomRes[t.getTrackId()].msid,{tag:r,userId:i}=ft(t.getTrackId()),n=[i,r].join("_");u.sdp=u.sdp.replace(new RegExp(e,"g"),n)}}));const _=yield this._pc.setRemoteAnswer(u.sdp);if(_!==T.SUCCESS)return{code:_};const m=null==p?void 0:p.map((e=>`${e.msid}_${e.mediaType}`)),f=i.filter((e=>{if(e.track.isMCUTrack()){const t=this._roomRes[e.track.getTrackId()],r=`${t.msid}_${t.mediaType}`;return m.includes(r)}return null==m?void 0:m.includes(e.track.getTrackId())})),v=null==f?void 0:f.map((e=>`${e.track.getTrackId()}`)),R=i.filter((e=>!(null==v?void 0:v.includes(e.track.getTrackId()))));for(const e in this._remoteTracks){const t=f.some((t=>t.track.getTrackId()===e));this._remoteTracks[e].__innerSetSubscribed(t)}return this._subscribedList.splice(0,this._subscribedList.length,...f),R.length?{code:T.SUCCESS,failedList:R}:{code:T.SUCCESS}}))}_diffCDNUris(e){return S(this,void 0,void 0,(function*(){if(this._CDNUris.url&&!e.url)return this._callAppListener("onCDNInfoDisable"),void(this._CDNUris=e);(!this._CDNUris||!this._CDNUris.url&&e.url)&&this._callAppListener("onCDNInfoEnable",{resolution:`W${e.w}_H${e.h}`,fps:`FPS_${e.fps}`});const t=this._CDNUris.w&&e.w&&this._CDNUris.w!==e.w,r=this._CDNUris.h&&e.h&&this._CDNUris.h!==e.h,i=this._CDNUris.fps&&e.fps&&this._CDNUris.fps!==e.fps;(t||r||i)&&this._callAppListener("onCDNInfoChange",{resolution:`W${e.w}_H${e.h}`,fps:`FPS_${e.fps}`}),this._CDNUris=e}))}_getCDNPlayUrl(e){return S(this,void 0,void 0,(function*(){const{w:t,h:r,fps:i}=e,n=this._initOptions.pullInnerCDNProtocol||gr.FLV,s=this._initOptions.pullInnerCDNUseHttps===Sr.NOT_HTTPS?Sr.NOT_HTTPS:Sr.HTTPS;if(!this._CDNUris.url)return C.error(`cdn_uris url is empty, the anchor need to open or push CDN, code: ${T.CDN_RESOURCE_IS_EMPTY}`),{code:T.CDN_RESOURCE_IS_EMPTY};const o={"App-Key":this._context.getAppkey(),Token:this._joinResData.token,RoomId:this.getRoomId(),UserId:this._context.getCurrentId(),SessionId:this.getSessionId()},a=[];t&&a.push(`w=${t}`),r&&a.push(`h=${r}`),i&&a.push(`fps=${i}`),a.push(`kind=${n}`),a.push(`is_https=${s}`);const c=a.join("&");let d=`${this._CDNUris.url}?`;c&&(d+=c);const{code:u,res:l}=yield this._service.getCDNResourceInfo(o,d);return u!==T.SUCCESS?(C.error(`getCDNPlayUrl failed: ${u}`),{code:u}):(C.info(`getCDNPlayUrl success: ${null==l?void 0:l.data.pull_url}`),{code:u,CDNPlayUrl:null==l?void 0:l.data.pull_url})}))}getCDNPlayUrl(e,t){return S(this,void 0,void 0,(function*(){if(e&&!Tt(e))return C.error("`resolution` is invalid"),{code:T.PARAMS_ERROR};if(t&&!It(t))return C.error("`fps` is invalid"),{code:T.PARAMS_ERROR};const{width:r,height:i}=e?Ct(e):{width:null,height:null},n=t?Et(t):null,s={};return r&&(s.w=r),i&&(s.h=i),n&&(s.fps=n),this._getCDNPlayUrl(s)}))}subscribe(e){return S(this,void 0,void 0,(function*(){return k((()=>this._subscribeHandle(e,!1)))}))}__unsubscribe(e){var t;return S(this,void 0,void 0,(function*(){if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)("tracks",e,(()=>(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isArray)(e)&&e.length>0&&e.every((e=>e instanceof st))),!0))return C.error(`unsubscribe failed, tracks is invalid -> roomId: ${this._roomId}`),{code:T.PARAMS_ERROR};const r=this._subscribedList.map((e=>Object.assign({},e))).filter((t=>!e.includes(t.track)));return null===(t=this._polarisReport)||void 0===t||t.sendR2(zt.SUBSCRIBE,Qt.END,e.map((e=>e.getTrackId()))),this._updateSubListHandle(r,!1)}))}unsubscribe(e){return S(this,void 0,void 0,(function*(){return k((()=>this.__unsubscribe(e)))}))}__destroy(e){var t;return S(this,void 0,void 0,(function*(){this._destroyed||(this._destroyed=!0,null===(t=this._audioLevelReport)||void 0===t||t.clearAudioLevelReportTimer(),e&&(yield this._context.quitLivingRoomAsAudience(this._roomId)),yield this._service.broadcastExit(this._getReqHeaders()),this._pc.destroy(),this._polarisReport=null,this._context.onrtcdatachange=()=>{})}))}getRemoteTrack(e){return this._remoteTracks[e]}__getPC(){return this._pc}getLocalTrack(e){return{}}__onReconnected(){return S(this,void 0,void 0,(function*(){const{code:e}=yield this._context.joinLivingRoomAsAudience(this._roomId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCMode.LIVE);e!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS&&C.error("join living room error when on reconnected")}))}registerRoomEventListener(e){this._appListener=e}onAudioLevelChange(e,t){var r;null===(r=this._audioLevelReport)||void 0===r||r.clearAudioLevelReportTimer(),this._audioLevelReport=new er(this),this._audioLevelReport.onAudioLevelChange(e,t||1e3)}registerReportListener(e){var t;null===(t=this._pc)||void 0===t||t.registerReportListener(e)}getRoomId(){return this._roomId}getCrtUserId(){return this._context.getCurrentId()}getSessionId(){return this._sessionId}getRemoteUserIds(){return this._roomAnchorList}getRemoteTracksByUserId(e){const t=[];for(const r in this._remoteTracks){const i=this._remoteTracks[r];i.getUserId()===e&&t.push(i)}return t}getRemoteTracks(){const e=[],t=[];for(const e in this._remoteTracks){if(2===t.length)break;const r=this._remoteTracks[e];r.isMCUTrack()&&t.push(r)}return this._roomAnchorList.forEach((t=>{e.push(...this.getRemoteTracksByUserId(t))})),[...t,...e]}getRemoteRTCTracks(){const e=[];for(const t in this._remoteTracks){const r=this._remoteTracks[t];r.isMCUTrack()||e.push(r)}return e}getRemoteMCUTracks(){const e=[];for(const t in this._remoteTracks){const r=this._remoteTracks[t];r.isMCUTrack()&&e.push(r)}return e}getCDNInfo(){return this._CDNUris.w?{resolution:`W${this._CDNUris.w}_H${this._CDNUris.h}`,fps:`FPS_${this._CDNUris.fps}`,CDNEnable:this._CDNUris.enableInnerCDN}:{CDNEnable:!1}}}const Ir=(e,t)=>{const r=[];return r[0]=(null==t?void 0:t.withoutAudio)?void 0:e.getAudioTracks()[0],r[1]=(null==t?void 0:t.withoutVideo)?void 0:e.getVideoTracks()[0],r};class Er{constructor(e,t,r){this._context=e,this._runtime=t,this._options=r,this._crtRoom=null,this._audience=null,this._crtAudienceLivingRoom=null,Kt.setSdpSemantics(r.sdpSemantics||"plan-b"),this._service=new vr(this._runtime,this._context,this._options.mediaServer,this._options.timeout),this._context.onconnectionstatechange=this._onIMStatusChange.bind(this),this._context.ondisconnect=this._onIMDisconnect.bind(this),this._context.ondestroy=this._onIMUninit.bind(this),this._context.onmessage=this._handleMessage.bind(this)}_handleMessage(e){var t;if(e.conversationType!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ConversationType.RTC_ROOM)return!1;if(this._crtRoom instanceof _r){this._getJoinedPKRoomList().forEach((t=>{t.__parseInnerMessage(e)}))}return null===(t=this._crtRoom)||void 0===t||t.__parseInnerMessage(e),!0}_getJoinedPKRoomList(){const{code:e,roomPKHandler:t}=this._crtRoom.getRoomPKHandler();if(e===T.SUCCESS&&t){const e=t.getJoinedPKRooms()||{};return Object.values(e)}return[]}getCurrentId(){return this._context.getCurrentId()}joinRTCRoom(e,t){return k((()=>this._joinRTCRoom(e,t)))}_joinRTCRoom(e,t){return S(this,void 0,void 0,(function*(){if(Ot(this._context.getNaviInfo()))return{code:T.PACKAGE_ENVIRONMENT_ERROR};if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)("roomId",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.notEmptyString,!0))return{code:T.PARAMS_ERROR};if(this._crtRoom)return{code:T.REPERT_JOIN_ROOM};if(this._context.getConnectionStatus()!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ConnectionStatus.CONNECTED)return{code:T.SIGNAL_DISCONNECTED};if(!this._service.getNaviMS().length)return{code:T.NOT_OPEN_VIDEO_AUDIO_SERVER};C.debug(`joinRoom -> roomId: ${e}; joinType: ${t||_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCJoinType.KICK}`);const{code:r,data:s}=yield this._context.joinRTCRoom(e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCMode.RTC,void 0,t);if(r!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS){C.error(`joinRoom failed -> code: ${r}`);return{code:r===I.JOIN_REFUSED?T.SIGNAL_JOIN_RTC_ROOM_REFUSED:r}}C.debug(`joinRoom success -> userId: ${this._context.getCurrentId()}, roomId: ${e}, data: ${JSON.stringify(s)}`);const o=new mr(this._context,this._runtime,e,s,this._service,this._options,this._releaseCrtRoomObj.bind(this));return this._crtRoom=o,{room:o,code:T.SUCCESS,userIds:o.getRemoteUserIds(),tracks:o.getRemoteTracks()}}))}joinLivingRoom(e,t){return k((()=>this._joinLivingRoom(e,t)))}_joinLivingRoom(e,t){return S(this,void 0,void 0,(function*(){if(Ot(this._context.getNaviInfo()))return{code:T.PACKAGE_ENVIRONMENT_ERROR};if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)("roomId",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.notEmptyString,!0)||!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)("livingType",t,(e=>e===lr.AUDIO||e===lr.VIDEO)))return{code:T.PARAMS_ERROR};if(this._crtRoom)return{code:T.REPERT_JOIN_ROOM};if(this._context.getConnectionStatus()!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ConnectionStatus.CONNECTED)return{code:T.SIGNAL_DISCONNECTED};if(!this._service.getNaviMS().length)return{code:T.NOT_OPEN_VIDEO_AUDIO_SERVER};C.debug(`joinRoom, roomId: ${e}`);const{code:r,data:s}=yield this._context.joinRTCRoom(e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCMode.LIVE,t);if(r!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS)return C.error(`joinRoom failed -> code: ${r}`),{code:r};C.debug(`JoinRoom success -> userId: ${this._context.getCurrentId()}, roomId: ${e}, data: ${JSON.stringify(s)}`);const o=new _r(this._context,this._runtime,e,s,this._service,this._options,this._releaseCrtRoomObj.bind(this),t,!1,!0);this._crtRoom=o;const a={room:o,code:T.SUCCESS,userIds:o.getRemoteUserIds(),tracks:o.getRemoteTracks()};return o.__getCDNPushMode()===ur.MANUAL&&Object.assign(a,{CDNEnable:o.__getCDNEnable()}),a}))}getAudienceClient(){return this._audience||(this._audience=new Rr(this._context,this._runtime,this._options)),this._audience}_onIMStatusChange(e){if(C.debug(`signal server connection state change: ${e}`),e===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ConnectionStatus.CONNECTED){if(this._crtRoom instanceof _r){this._getJoinedPKRoomList().forEach((e=>{e.__onReconnected()}))}this._crtRoom&&this._crtRoom.__onReconnected()}}_onIMDisconnect(){C.debug("TODO -> on IM disconnect")}_onIMUninit(){C.debug("TODO -> on IM client ondestroy")}leaveRoom(e){return k((()=>this._leaveRoom(e)))}_leaveRoom(e){return S(this,void 0,void 0,(function*(){return this._crtRoom?(yield this._crtRoom.__destroy(!0),C.debug(`quitRTCRoom -> userId: ${this._context.getCurrentId()} , roomId: ${this._crtRoom.getRoomId()}`),this._crtRoom=null,{code:T.SUCCESS}):{code:T.SUCCESS}}))}_releaseCrtRoomObj(){this._crtRoom=null}_getMediaStream(e,t="getUserMedia"){return S(this,void 0,void 0,(function*(){try{const r=yield navigator.mediaDevices[t](e);return{code:T.SUCCESS,stream:r}}catch(e){if("Permission denied"===e.message)return{code:T.PERMISSION_DENIED};C.error(`get user media failed -> ${e.message}`)}return{code:"getUserMedia"===t?T.GET_USER_MEDIA_FAILED:T.GET_DISPLAY_MEDIA_FAILED}}))}createMicrophoneAudioTrack(e="RongCloudRTC",t){return S(this,void 0,void 0,(function*(){if(!ut(e))return{code:T.INVALID_TAGS};const r=this._context.getCurrentId();if(!r)return{code:T.INVALID_USER_ID};const{stream:i,code:n}=yield this._getMediaStream({audio:{deviceId:null==t?void 0:t.micphoneId,sampleRate:null==t?void 0:t.sampleRate}});if(n!==T.SUCCESS)return{code:n};const s=i.getAudioTracks()[0];return{code:n,track:new rt(e,r,s)}}))}createCameraVideoTrack(e="RongCloudRTC",t){return S(this,void 0,void 0,(function*(){if(!ut(e))return{code:T.INVALID_TAGS};const r=this._context.getCurrentId();if(!r)return{code:T.INVALID_USER_ID};const i=Tt(null==t?void 0:t.resolution)?t.resolution:He.W640_H480,{width:n,height:s}=Ct(i),{stream:o,code:a}=yield this._getMediaStream({video:{deviceId:null==t?void 0:t.cameraId,frameRate:Et((null==t?void 0:t.frameRate)||Be.FPS_15),width:n,height:s,facingMode:null==t?void 0:t.faceMode}});if(a!==T.SUCCESS)return{code:a};const c=o.getVideoTracks()[0];return{code:a,track:new it(e,r,c)}}))}createMicrophoneAndCameraTracks(e="RongCloudRTC",t){var r,i,n,s,o,a;return S(this,void 0,void 0,(function*(){const c=[];if(!ut(e))return{code:T.INVALID_TAGS,tracks:c};const d=this._context.getCurrentId();if(!d)return{code:T.INVALID_USER_ID,tracks:c};const u=Tt(null===(r=null==t?void 0:t.video)||void 0===r?void 0:r.resolution)?t.video.resolution:He.W640_H480,{width:l,height:h}=Ct(u),{stream:p,code:_}=yield this._getMediaStream({video:{deviceId:null===(i=null==t?void 0:t.video)||void 0===i?void 0:i.cameraId,frameRate:Et((null===(n=null==t?void 0:t.video)||void 0===n?void 0:n.frameRate)||Be.FPS_15),width:l,height:h,facingMode:null===(s=null==t?void 0:t.video)||void 0===s?void 0:s.faceMode},audio:{deviceId:null===(o=null==t?void 0:t.audio)||void 0===o?void 0:o.micphoneId,sampleRate:null===(a=null==t?void 0:t.audio)||void 0===a?void 0:a.sampleRate}});return _!==T.SUCCESS||p.getTracks().forEach((t=>{"video"===t.kind?c.push(new it(e,d,t)):c.unshift(new rt(e,d,t))})),{code:_,tracks:c}}))}createScreenVideoTrack(e="screenshare",t){return S(this,void 0,void 0,(function*(){if(!ut(e))return{code:T.INVALID_TAGS};const r=this._context.getCurrentId();if(!r)return{code:T.INVALID_USER_ID};if(!bt())return{code:T.BROWSER_NOT_SUPPORT};const i=/Electron/.test(navigator.userAgent);if(i&&!(null==t?void 0:t.chromeMediaSourceId))return{code:T.PARAMS_ERROR};const n=Tt(null==t?void 0:t.resolution)?t.resolution:He.W1280_H720,{width:s,height:o}=Ct(n),a=i?{mandatory:{chromeMediaSourceId:t.chromeMediaSourceId,chromeMediaSource:"desktop",minWidth:s,maxWidth:s,minHeight:o,maxHeight:o}}:{frameRate:Et((null==t?void 0:t.frameRate)||Be.FPS_15),width:s,height:o},{stream:c,code:d}=yield this._getMediaStream({video:a,audio:!1},i?"getUserMedia":"getDisplayMedia");if(d!==T.SUCCESS)return{code:d};const u=c.getVideoTracks()[0];return{code:d,track:new nt(e,r,u)}}))}createLocalAudioTrack(e,t){return S(this,void 0,void 0,(function*(){if(!ut(e))return{code:T.INVALID_TAGS};if(!t||"[object MediaStreamTrack]"!==t.toString()||"audio"!==t.kind)return{code:T.CREATE_CUSTOM_TRACK_FAILED};const r=this._context.getCurrentId();return r?{code:T.SUCCESS,track:new Qe(e,r,t)}:{code:T.INVALID_USER_ID}}))}createLocalVideoTrack(e,t){return S(this,void 0,void 0,(function*(){if(!ut(e))return{code:T.INVALID_TAGS};if(!t||"[object MediaStreamTrack]"!==t.toString()||"video"!==t.kind)return{code:T.CREATE_CUSTOM_TRACK_FAILED};const r=this._context.getCurrentId();return r?{code:T.SUCCESS,track:new Xe(e,r,t)}:{code:T.INVALID_USER_ID}}))}createLocalFileTracks(e,t,r){return S(this,void 0,void 0,(function*(){if(!ut(e))return{code:T.INVALID_TAGS,tracks:[]};if(!kt())return{code:T.BROWSER_NOT_SUPPORT,tracks:[]};const i=t instanceof File?URL.createObjectURL(t):t;if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isHttpUrl)(i)&&!/^blob:/.test(i))return C.warn(`createLocalFileTracks failed: params error -> url: ${i}`),{code:T.PARAMS_ERROR,tracks:[]};const n=this._context.getCurrentId();return n?new Promise((t=>{const s=document.createElement("video");(null==r?void 0:r.withoutAudio)&&(s.muted=!0),s.onloadedmetadata=()=>{const o=[];let a;try{const e=s.mozCaptureStream?"mozCaptureStream":"captureStream";a=s[e]()}catch(e){C.error(`create RCLocalFileTrack failed, captureSteam error. -> url: ${i}`),C.error(e),t({code:T.CREATE_FILE_TRACK_FAILED,tracks:o})}const[c,d]=Ir(a,r);c&&o.push(new tt(e,n,c,s)),d&&o.push(new et(e,n,d,s)),0===o.length&&(s.pause(),s.src=""),s.onerror=null,t({code:T.SUCCESS,tracks:o})},s.onerror=()=>{C.error(`create RCLocalFileTrack failed -> url: ${i}`),t({code:T.CREATE_FILE_TRACK_FAILED,tracks:[]})},s.src=i,s.loop=!0,s.play()})):{code:T.INVALID_USER_ID,tracks:[]}}))}createLocalTracks(e,t,r){return S(this,void 0,void 0,(function*(){const i=[];if(!ut(e))return{code:T.INVALID_TAGS,tracks:i};if(!(t instanceof MediaStream))return{code:T.PARAMS_ERROR,tracks:i};const n=this._context.getCurrentId();if(!n)return{code:T.INVALID_USER_ID,tracks:i};const[s,o]=Ir(t,r);return s&&i.push(new Qe(e,n,s)),o&&i.push(new Xe(e,n,o)),{code:T.SUCCESS,tracks:i}}))}joinLivingRoomAsAudience(e,t){return S(this,void 0,void 0,(function*(){if(Ot(this._context.getNaviInfo()))return{code:T.PACKAGE_ENVIRONMENT_ERROR};if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)("roomId",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.notEmptyString,!0)||!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)("livingType",t,(e=>e===lr.AUDIO||e===lr.VIDEO)))return{code:T.PARAMS_ERROR};if(this._crtAudienceLivingRoom)return{code:T.REPERT_JOIN_ROOM};if(!this._service.getNaviMS().length)return{code:T.NOT_OPEN_VIDEO_AUDIO_SERVER};const{code:r,data:n}=yield this._context.joinLivingRoomAsAudience(e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCMode.LIVE,t);if(r!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS)return C.error("audienceJoinLivingRoomError:",r),{code:T.SIGNAL_AUDIENCE_JOIN_ROOM_FAILED};C.info(`joinLivingRoomAsAudience success, room data: ${JSON.stringify(n)}`);const s=new Tr(this._context,this._runtime,this._options,e,n,t);return this._crtAudienceLivingRoom=s,{room:s,code:T.SUCCESS,userIds:s.getRemoteUserIds(),RTCTracks:s.getRemoteRTCTracks(),MCUTracks:s.getRemoteMCUTracks(),CDNUris:s.getCDNInfo()}}))}leaveLivingRoomAsAudience(e){return S(this,void 0,void 0,(function*(){return this._crtAudienceLivingRoom?this._crtAudienceLivingRoom!==e?{code:T.PARAMS_ERROR}:(yield this._crtAudienceLivingRoom.__destroy(!0),this._crtAudienceLivingRoom=null,{code:T.SUCCESS}):{code:T.SUCCESS}}))}upgradeToAnchorRoom(e){return S(this,void 0,void 0,(function*(){if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)("room._roomId",e._roomId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.notEmptyString,!0))return{code:T.PARAMS_ERROR};if(this._crtRoom)return{code:T.REPERT_JOIN_ROOM};const{code:t,data:r}=yield this._context.rtcIdentityChange(e._roomId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCIdentityChangeType.ViewerToAnchor,e._livingType);if(t!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS)return C.error("change room identity error",t),{code:T.SIGNAL_ROOM_CHANGE_IDENTITY_FAILED};yield this._crtAudienceLivingRoom.__destroy(!1);const n=new _r(this._context,this._runtime,e._roomId,r,this._service,this._options,this._releaseCrtRoomObj.bind(this),e._livingType,!0,!0);return this._crtRoom=n,this._crtAudienceLivingRoom=null,{room:n,code:T.SUCCESS,userIds:e.getRemoteUserIds(),tracks:n.getRemoteTracks()}}))}downgradeToAudienceRoom(e){return S(this,void 0,void 0,(function*(){if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)("room._roomId",e._roomId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.notEmptyString,!0))return{code:T.PARAMS_ERROR};if(this._crtAudienceLivingRoom)return{code:T.REPERT_JOIN_ROOM};const{code:t,data:r}=yield this._context.rtcIdentityChange(e._roomId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCIdentityChangeType.AnchorToViewer,e.getLivingType());if(t!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS)return C.error("change room identity error",t),{code:T.SIGNAL_ROOM_CHANGE_IDENTITY_FAILED};C.info(`downgradeToAudienceRoom success, room data: ${JSON.stringify(r)}`);const n=new Tr(this._context,this._runtime,this._options,e._roomId,r,e.getLivingType());return this._crtAudienceLivingRoom=n,this._crtRoom.__destroy(!1),this._crtRoom=null,{room:n,code:T.SUCCESS,userIds:n.getRemoteUserIds(),RTCTracks:n.getRemoteRTCTracks(),MCUTracks:n.getRemoteMCUTracks(),CDNUris:n.getCDNInfo()}}))}getJoinedRoomInfo(){return S(this,void 0,void 0,(function*(){const{code:e,data:t}=yield this._context.getRTCJoinedUserInfo(this._context.getCurrentId());return e!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(C.error("getJoinedUserInfo error",e),{code:T.SIGNAL_ROOM_CHANGE_IDENTITY_FAILED}):{code:T.SUCCESS,data:t}}))}}var yr;!function(e){e[e.SERVER_KICK=1]="SERVER_KICK",e[e.OTHER_KICK=2]="OTHER_KICK"}(yr||(yr={}));const kr={tag:"RCRTC",verify:e=>"browser"!==e.tag?(C.error(`RCRTC Plugin is not support the runtime \'${e.tag}\'`),!1):lt?(_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.VersionManage.add("plugin-rtc","5.3.1"),!!_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.VersionManage.validEngine("5.1.0")||(C.error(`The current engine version \'${_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.VersionManage.getInfo().engine}\' error, plugin-rtc required engine version at least \'5.1.0\'.`),!1)):(C.error("Please use the https protocol or use `http://localhost` to open the page!"),!1),setup:(e,t,i={})=>(C.setLogLevel(i.logLevel),C.setLogStdout(i.logStdout),C.warn("RCRTC Version: 5.3.1, Commit: e1af0f5ccb06a0084c94e1219d8af54c9793c06b"),C.warn(`browserInfo.browser -> ${yt.browser}`),C.warn(`browserInfo.supportsUnifiedPlan -> ${yt.supportsUnifiedPlan}`),C.warn(`browserInfo.version -> ${yt.version}`),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.mediaServer",i.mediaServer,(e=>!(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isHttpUrl)(e)||"https:"===location.protocol&&!/^https/.test(e)))),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.timeout",i.timeout,(e=>(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(e)&&e>=5e3&&e<=3e4)),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)("options.pingGap",i.pingGap,(e=>(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(e)&&e>=3e3&&e<=1e4)),new Er(e,t,i))},br={DEFAULT:"RongCloudRTC"},Pr={transResolution:Ct,transFrameRate:Et,parseTrackId:ft,ifSupportLocalFileTrack:kt,ifSupportScreenShare:bt};\n\n\n//# sourceURL=webpack://@rongcloud/rcvoiceroomlib-v1/./node_modules/@rongcloud/plugin-rtc/dist/index.esm.js?')},"./node_modules/events/events.js":
/*!***************************************!*\
  !*** ./node_modules/events/events.js ***!
  \***************************************/module=>{eval("// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n\n\n//# sourceURL=webpack://@rongcloud/rcvoiceroomlib-v1/./node_modules/events/events.js?")},"./src/config.ts":
/*!***********************!*\
  !*** ./src/config.ts ***!
  \***********************/(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "sdkStatus": () => (/* binding */ sdkStatus),\n/* harmony export */   "debug": () => (/* binding */ debug),\n/* harmony export */   "RCSeatStatus": () => (/* binding */ RCSeatStatus)\n/* harmony export */ });\n//sdk自身状态\nvar sdkStatus;\n(function (sdkStatus) {\n    sdkStatus[sdkStatus["initing"] = 0] = "initing";\n    sdkStatus[sdkStatus["ready"] = 1] = "ready"; //初始化完成\n})(sdkStatus || (sdkStatus = {}));\nvar debug = true;\nvar RCSeatStatus = {\n    // 空麦位\n    RCSeatStatusEmpty: 0,\n    // 麦位被使用，userId不为null\n    RCSeatStatusUsing: 1,\n    // 麦位被锁定\n    RCSeatStatusLocking: 2\n};\n\n\n\n//# sourceURL=webpack://@rongcloud/rcvoiceroomlib-v1/./src/config.ts?')},"./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! events */ \"./node_modules/events/events.js\");\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(events__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _modules_im_index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./modules/im/index */ \"./src/modules/im/index.ts\");\n/* harmony import */ var _modules_rtc_index__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./modules/rtc/index */ \"./src/modules/rtc/index.ts\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./config */ \"./src/config.ts\");\n/* harmony import */ var _loger__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./loger */ \"./src/loger.ts\");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (undefined && undefined.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n// import * as RongIMNext from '@rongcloud/imlib-next'\n// import { installer, RCRTCCode, RCLivingType } from '@rongcloud/plugin-rtc'\n// import { RCRemoteTrack } from '../node_modules/@rongcloud/plugin-rtc/dist/index';\n\n\n\n\n\nvar RCVoiceRoomLibClass = /** @class */ (function (_super) {\n    __extends(RCVoiceRoomLibClass, _super);\n    function RCVoiceRoomLibClass() {\n        var _this = _super.call(this) || this;\n        _this._roomidcli = \"\";\n        _this.isAnchor = false; // 默认观众\n        _this.seatInfoList = []; //房间信息\n        _this.RCSeatInfoSeatPartPrefixKey = \"RCSeatInfoSeatPartPrefixKey_\";\n        // RCSeatInfoUserPartPrefixKey: string = \"RCSeatInfoUserPartPrefixKey_\";\n        _this.leaveRoomControl = true;\n        _this.seatInfo = {\n            status: 0,\n            mute: false,\n            speaking: false,\n        };\n        return _this;\n    }\n    /**\n    * 初始化\n    **/\n    RCVoiceRoomLibClass.prototype.init = function (item) {\n        var _this = this;\n        var AppKey = item.AppKey, RongIMLib = item.RongIMLib, RongRTCLib = item.RongRTCLib;\n        /**\n        * 开始初始化 imlib 和 rtc客户端\n        */\n        var im = new _modules_im_index__WEBPACK_IMPORTED_MODULE_1__.default({ appkey: AppKey, imLib: RongIMLib });\n        var rtc = new _modules_rtc_index__WEBPACK_IMPORTED_MODULE_2__.default();\n        this.im = im;\n        this.rtc = rtc;\n        //im初始化完成 进行rtc初始化\n        im.on(\"imReady\", function (RongIMLib) {\n            _loger__WEBPACK_IMPORTED_MODULE_4__.default.log('im初始化完成');\n            _this.rtc.init({ im: RongIMLib, rtcLib: RongRTCLib });\n        });\n        //im connect完成\n        im.on(\"connectReady\", function () {\n            _this.imready = true;\n            _this.readyCheck();\n        });\n        //im加入房间后 加入rtc房间\n        im.on(\"joinRoom\", function (o) { return __awaiter(_this, void 0, void 0, function () {\n            var Inseat;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (this.im.seatInfoList[0] && this.im.seatInfoList[0].status != _config__WEBPACK_IMPORTED_MODULE_3__.RCSeatStatus.RCSeatStatusEmpty) {\n                            console.warn(\"调用加入已经存在的房间不能使用 creatandJoinroom方法\");\n                            return [2 /*return*/];\n                        }\n                        return [4 /*yield*/, this.im.getRoomInfo(o)];\n                    case 1:\n                        Inseat = _a.sent();\n                        this.rtc.isAnchor = Inseat;\n                        return [2 /*return*/, this.rtc.joinRoom(o.roomId)];\n                }\n            });\n        }); });\n        //新房间初始化 如果是房主直接上0号麦位\n        im.on(\"setNewRoom\", function () { return __awaiter(_this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                this.seatInfoList = this.im.seatInfoList;\n                console.log('this.seatInfoList', this.seatInfoList);\n                this.emit(\"seatInfoDidUpdate\", this.seatInfoList);\n                return [2 /*return*/];\n            });\n        }); });\n        //changeRoomInfo 更改麦位数，更新房间内座位\n        im.on(\"changeRoomInfo\", function () {\n            _this.seatInfoList = _this.im.seatInfoList;\n            _this.emit(\"seatInfoDidUpdate\", _this.seatInfoList);\n        });\n        //房间信息发声变化\n        im.on(\"roomInfoDidUpdate\", function (parm) {\n            _this.roomInfo = parm.roomInfo;\n            console.log('parm.roomInfo', parm.roomInfo);\n            _this.emit(\"roomInfoDidUpdate\", _this.roomInfo);\n        });\n        //座位发生变化\n        im.on(\"seatInfoDidUpdate\", function () {\n            _this.seatInfoList = im.seatInfoList;\n            _this.emit(\"seatInfoDidUpdate\", _this.seatInfoList);\n        });\n        //座位发生变化(有人进来)\n        im.on(\"onAudienceEnter\", function (res) {\n            _this.emit(\"AudienceEnter\", res);\n        });\n        //座位发生变化(有人离开)\n        im.on(\"onAudienceExit\", function (res) {\n            _this.emit(\"AudienceExit\", res);\n        });\n        //各种公屏消息\n        im.on(\"onMessageReceived\", function (message) {\n            //默认消息\n            // console.log('onMessageReceived', message);\n            _this.emit(\"MessageReceived\", message);\n        });\n        // //音量状态变更\n        // im.on(\"speakingStatusChange\", (parm) => {     \n        //     this.emit(\"speakingStatusChange\", parm)\n        //     if (this.seatInfoList[Number(parm.index)]) {\n        //         this.seatInfoList[Number(parm.index)]['speaking'] = parm.speaking;\n        //     }\n        // })\n        //是否静音操作\n        im.on(\"mute\", function (ismute) {\n            if (ismute) {\n                _this.rtc.mute();\n            }\n            else {\n                _this.rtc.unmute();\n            }\n            _this.emit(\"SeatMute\", ismute);\n        });\n        //被抱下麦\n        im.on(\"leaveSeat\", function () {\n            console.log('被抱下麦leaveSeat');\n            _this.leaveSeat(true);\n            _this.emit(\"KickSeatReceived\");\n        });\n        //收到被邀请上麦\n        im.on(\"RCPickerUserSeatContent\", function (parm) {\n            _this.emit(\"RCPickerUserSeatContent\", parm);\n        });\n        //收到同意邀请上麦消息\n        im.on(\"VoiceRoomAgreeManagePick\", function (parm) {\n            _this.emit(\"VoiceRoomAgreeManagePick\", parm);\n        });\n        //收到拒绝邀请上麦消息\n        im.on(\"VoiceRoomRejectManagePick\", function (parm) {\n            _this.emit(\"VoiceRoomRejectManagePick\", parm);\n        });\n        //被踢出房间\n        im.on(\"RCKickUserOutRoomContent\", function (parm) {\n            _this.emit(\"RCKickUserOutRoomContent\", parm);\n            if (parm.targetId == _this.im.userId) {\n                // console.log('this._roomidcli', this._roomidcli);\n                _this.leaveRoom(_this._roomidcli);\n            }\n        });\n        //申请上麦被同意上报\n        im.on(\"RequestSeatAccepted\", function () { return __awaiter(_this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.im.seatInfoRemove('RCRequestSeatPrefixKey_' + this.im.userId).then(function (res) {\n                        // 强制删除聊天室属性成功\n                        if (res.code === 0) {\n                            _this.emit(\"RequestSeatAccepted\");\n                            return '操作成功:70000';\n                        }\n                    }).catch(function (error) {\n                        throw new Error('同意排麦请求发送失败:70017');\n                    })];\n            });\n        }); });\n        //申请上麦被拒绝上报\n        im.on(\"RequestSeatRejected\", function () { return __awaiter(_this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.im.seatInfoRemove('RCRequestSeatPrefixKey_' + this.im.userId).then(function (res) {\n                        // 强制删除聊天室属性成功\n                        if (res.code === 0) {\n                            _this.emit(\"RequestSeatRejected\");\n                            return '操作成功:70000';\n                        }\n                    }).catch(function (error) {\n                        throw new Error('拒绝排麦请求发送失败:70018');\n                    })];\n            });\n        }); });\n        //申请上麦人员发生变化上报\n        im.on(\"RequestSeatListChanged\", function () {\n            _this.emit(\"RequestSeatListChanged\");\n        });\n        //所有刷新消息的通知上报\n        im.on(\"onRoomNotificationReceived\", function (info) {\n            console.log(info);\n            _this.emit(\"RoomNotificationReceived\", info);\n        });\n        //房间关闭上报\n        im.on(\"VoiceRoomClosed\", function () {\n            _this.emit(\"VoiceRoomClosed\");\n        });\n        //更换背景上报\n        im.on(\"VoiceRoomBackgroundChanged\", function (img) {\n            _this.emit(\"VoiceRoomBackgroundChanged\", img);\n        });\n        //账号被顶掉上报\n        im.on(\"connectioBreakOff\", function () {\n            _this.emit(\"ConnectioBreakOff\");\n        });\n        //房间被销毁上报\n        im.on(\"chatroomDestroyed\", function () {\n            _this.emit(\"ChatroomDestroyed\");\n        });\n        //rtc 断开连接 主播端\n        this.rtc.on(\"onRTCPeerConnectionCloseByException\", function () {\n            _this.emit(\"RTCPeerConnectionCloseByException\");\n        });\n        //rtc初始化完成\n        rtc.on(\"ready\", function () {\n            _loger__WEBPACK_IMPORTED_MODULE_4__.default.log('rtc初始化完成');\n            _this.rtcready = true;\n            _this.readyCheck();\n        });\n        //rtc加入房间\n        rtc.on(\"joinRoom\", function () { return __awaiter(_this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                // if (this.rtc.isDisable) {\n                //     this.rtc.mute();\n                //     return\n                // }\n                if (this.seatInfoList.length && this.seatInfoList[this.im.seatIndex] && this.seatInfoList[this.im.seatIndex].mute) {\n                    // console.log(\"上了静音买位\");\n                    this.rtc.mute();\n                }\n                return [2 /*return*/];\n            });\n        }); });\n        // rtc.on('audioChenge', (level: { track: { _userId: any; }; _userId: any; audioLevel: any; }) => {\n        //     if (level.track._userId && level.track._userId == this.im.userId) {\n        //         let content: { name: string; content: string; }\n        //         let speak: { index: string; speaking: string; }\n        //         if (level.audioLevel) {\n        //             content = {\n        //                 name: \"RCUserOnSeatSpeakingKey_\" + this.rtc.currentSeat,// 文本内容\n        //                 content: '1'\n        //             }\n        //             speak = {\n        //                 index: this.rtc.currentSeat + '',\n        //                 speaking: '1'\n        //             }\n        //         } else {\n        //             content = {\n        //                 name: \"RCUserOnSeatSpeakingKey_\" + this.rtc.currentSeat,// 文本内容\n        //                 content: '0'\n        //             }\n        //             speak = {\n        //                 index: this.rtc.currentSeat + '',\n        //                 speaking: '0'\n        //             }\n        //         }\n        //         // console.log('RCUserOnSeatSpeakingKey_', this.rtc.currentSeat);\n        //         this.im.messageUpdate(\"RC:VRLRefreshMsg\", content)\n        //         this.emit(\"speakingStatusChange\", speak)\n        //         if (this.seatInfoList[Number(speak.index)]) {\n        //             // this.seatInfoList[Number(parm.index)].speaking = parm.speaking;\n        //             if (Number(speak.speaking)) {\n        //                 this.seatInfoList[Number(speak.index)]['speaking'] = true\n        //             } else {\n        //                 this.seatInfoList[Number(speak.index)]['speaking'] = false\n        //             }\n        //         }\n        //     }\n        // })\n    };\n    /**\n    *\n    * im链接connect\n    *\n    */\n    RCVoiceRoomLibClass.prototype.connect = function (token) {\n        return this.im.connect(token);\n    };\n    /**\n    *\n    * 两模块就绪报上层ready\n    *\n    */\n    RCVoiceRoomLibClass.prototype.readyCheck = function () {\n        if (this.status == _config__WEBPACK_IMPORTED_MODULE_3__.sdkStatus.ready) {\n            _loger__WEBPACK_IMPORTED_MODULE_4__.default.log(\"已经就绪\");\n            return;\n        }\n        else {\n            if (this.imready && this.rtcready) {\n                this.emit(\"ready\");\n            }\n        }\n    };\n    /**\n    *\n    * 创建并加入房间(房间已创建)\n    *\n    */\n    RCVoiceRoomLibClass.prototype.createAndJoinRoom = function (op) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                // console.log(\"主播创建并加入房间\", op.roomId);\n                this.rtc.isAnchor = true;\n                this.rtc.currentSeat = 0;\n                this._roomidcli = op.roomId;\n                if (!('roomName' in op) || !('seatCount' in op)) {\n                    throw new Error('创建房间信息:70036');\n                }\n                return [2 /*return*/, this.im.joinRoom({\n                        roomId: op.roomId,\n                        roomName: op.roomName,\n                        seatCount: op.seatCount\n                    }).then(function (res) {\n                        return '创建并加入语聊房成功!';\n                    }).catch(function (err) {\n                        throw new Error('创建语聊房失败:70028');\n                    })];\n            });\n        });\n    };\n    /**\n    *\n    * 加入已创建房间(房间未创建)\n    *\n    */\n    RCVoiceRoomLibClass.prototype.joinRoom = function (roomid) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                // console.log(\"加入已存在房间:\", roomid);\n                this._roomidcli = roomid;\n                return [2 /*return*/, this.im.joinRoom({\n                        roomId: roomid\n                    }).then(function (res) {\n                        return '加入语聊房成功!';\n                    }).catch(function (err) {\n                        throw new Error('加入语聊房失败:70010');\n                    })];\n            });\n        });\n    };\n    /**\n    *\n    * 离开房间\n    *\n    */\n    RCVoiceRoomLibClass.prototype.leaveRoom = function (roomid) {\n        return __awaiter(this, void 0, void 0, function () {\n            var index;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!this.leaveRoomControl) return [3 /*break*/, 5];\n                        this.leaveRoomControl = false;\n                        index = 0;\n                        _a.label = 1;\n                    case 1:\n                        if (!(index < this.seatInfoList.length)) return [3 /*break*/, 4];\n                        if (!(this.seatInfoList[index]['userId'] && this.seatInfoList[index]['userId'] == this.im.userId)) return [3 /*break*/, 3];\n                        return [4 /*yield*/, this.leaveSeat(false, true)];\n                    case 2:\n                        _a.sent();\n                        return [3 /*break*/, 4];\n                    case 3:\n                        index += 1;\n                        return [3 /*break*/, 1];\n                    case 4: return [2 /*return*/, Promise.all([this.rtc.leaveRoom(roomid), this.im.leaveRoom(roomid)]).then(function () {\n                            _this.rtc.isDisable = false;\n                            setTimeout(function () {\n                                _this.leaveRoomControl = true;\n                            }, 1000);\n                            return '操作成功:70000';\n                        }).catch(function () {\n                            throw new Error('离开语聊房失败:70011');\n                        })];\n                    case 5: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n    *\n    * 寻找空麦位(除 0 号麦位外)\n    * 无空麦位 返回 null\n    */\n    RCVoiceRoomLibClass.prototype.findSeat = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var i;\n            return __generator(this, function (_a) {\n                for (i = 1; i < this.seatInfoList.length; i++) {\n                    if (Number(this.seatInfoList[i].status) == _config__WEBPACK_IMPORTED_MODULE_3__.RCSeatStatus.RCSeatStatusEmpty) {\n                        return [2 /*return*/, i];\n                    }\n                    if (i = this.seatInfoList.length - 1) {\n                        return [2 /*return*/, null];\n                    }\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    /**\n    *\n    * 用户上麦\n    *\n    * @param seatIndex 麦位序号\n    */\n    RCVoiceRoomLibClass.prototype.enterSeat = function (seatIndex) {\n        return __awaiter(this, void 0, void 0, function () {\n            var i, targetSeatInfo;\n            var _this = this;\n            return __generator(this, function (_a) {\n                // console.log(\"上麦操作\", seatIndex);\n                // console.log(\"当前麦位信息\", this.seatInfoList);\n                // console.log(\"this.roomInfo.seatCount\", this.roomInfo.seatCount);\n                for (i = 0; i < this.seatInfoList.length; i += 1) {\n                    if (this.seatInfoList[i]['userId'] && this.seatInfoList[i]['userId'] == this.im.userId) {\n                        throw new Error('该上麦用户此时已经在麦位上:70003');\n                    }\n                }\n                // if (this.seatInfoList.length == seatIndex) { //本地麦位未更新时生成一个默认麦位\n                //     targetSeatInfo = this.seatInfo\n                // } else {\n                if (this.roomInfo && this.roomInfo.seatCount && (seatIndex >= this.roomInfo.seatCount)) {\n                    throw new Error('麦位序号不正确:70002');\n                }\n                targetSeatInfo = this.seatInfoList[seatIndex];\n                if (targetSeatInfo.status != _config__WEBPACK_IMPORTED_MODULE_3__.RCSeatStatus.RCSeatStatusEmpty) { //当前麦位非空闲\n                    throw new Error(\"麦位不是空置状态,无法上麦:70006\");\n                }\n                // }\n                targetSeatInfo.userId = this.im.userId;\n                targetSeatInfo.status = _config__WEBPACK_IMPORTED_MODULE_3__.RCSeatStatus.RCSeatStatusUsing;\n                // console.log(\"当前更新\", this.RCSeatInfoSeatPartPrefixKey + seatIndex);\n                return [2 /*return*/, this.im.seatInfoUpdate(this.RCSeatInfoSeatPartPrefixKey + seatIndex, targetSeatInfo).then(function () { return __awaiter(_this, void 0, void 0, function () {\n                        var _this = this;\n                        return __generator(this, function (_a) {\n                            this.seatInfoList[seatIndex]['userId'] = this.im.userId;\n                            this.seatInfoList[seatIndex]['status'] = Number(_config__WEBPACK_IMPORTED_MODULE_3__.RCSeatStatus.RCSeatStatusUsing);\n                            this.seatInfoList[seatIndex]['speaking'] = false;\n                            this.im.seatIndex = seatIndex;\n                            this.rtc.currentSeat = seatIndex;\n                            return [2 /*return*/, this.rtc.enterSeat(seatIndex).then(function () {\n                                    if (targetSeatInfo.mute || _this.rtc.isDisable) {\n                                        _this.rtc.isMuteOwner = true;\n                                        return _this.rtc.mute();\n                                    }\n                                    else {\n                                        return _this.rtc.unmute();\n                                    }\n                                })];\n                        });\n                    }); }).catch(function () {\n                        throw new Error('上麦失败');\n                    })];\n            });\n        });\n    };\n    /**\n    *\n    * 用户下麦\n    * 注意：和 enterSeat()成对调用\n    *\n    */\n    RCVoiceRoomLibClass.prototype.leaveSeat = function (ispassive, isLeaveRoom) {\n        return __awaiter(this, void 0, void 0, function () {\n            var index, have, status, i, value;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!isLeaveRoom) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.rtc.leaveSeat(true)];\n                    case 1:\n                        _a.sent();\n                        return [3 /*break*/, 4];\n                    case 2: return [4 /*yield*/, this.rtc.leaveSeat(false)];\n                    case 3:\n                        _a.sent();\n                        _a.label = 4;\n                    case 4:\n                        if (ispassive) { //被动下麦不操作远程数据\n                            _loger__WEBPACK_IMPORTED_MODULE_4__.default.log(\"被动下麦\");\n                            return [2 /*return*/];\n                        }\n                        index = null;\n                        have = false;\n                        status = Number(_config__WEBPACK_IMPORTED_MODULE_3__.RCSeatStatus.RCSeatStatusEmpty);\n                        for (i = 0; i < this.seatInfoList.length; i += 1) {\n                            if (this.seatInfoList[i].userId == this.im.userId) {\n                                index = i;\n                                have = true;\n                            }\n                        }\n                        if (!have) {\n                            throw new Error('用户不在麦位上:70004');\n                        }\n                        else {\n                            value = __assign(__assign({}, this.seatInfoList[index]), { status: status });\n                            delete value['userId'];\n                            //console.log(this.RCSeatInfoSeatPartPrefixKey + index, '下麦操作：', value);\n                            return [2 /*return*/, this.im.seatInfoUpdate(this.RCSeatInfoSeatPartPrefixKey + index, value).then(function (result) {\n                                    _this.seatInfoList[index]['status'] = status;\n                                    _this.seatInfoList[index]['mute'] = _this.seatInfoList[index].mute;\n                                    _this.seatInfoList[index]['speaking'] = _this.seatInfoList[index].speaking;\n                                    delete _this.seatInfoList[index]['userId'];\n                                    // this.seatInfoList[index]['userId'] = '';\n                                    // console.log('this.seatInfoList', this.seatInfoList);\n                                    return '操作成功:70000';\n                                }).catch(function () {\n                                    //  throw new Error('未知错误:-1')\n                                })];\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n    *\n    * 将指定麦位下麦\n    *\n    * @param userId   用户 Id\n    */\n    RCVoiceRoomLibClass.prototype.kickUserFromSeat = function (userId) {\n        return __awaiter(this, void 0, void 0, function () {\n            var index, have, arr, i, value;\n            var _this = this;\n            return __generator(this, function (_a) {\n                index = null;\n                have = false;\n                arr = [];\n                if (userId == this.im.userId) {\n                    throw new Error('不能踢自己下麦:70009');\n                }\n                for (i = 0; i < this.seatInfoList.length; i += 1) {\n                    //console.log(\"id:\",this.seatInfoList[i].userId);\n                    //console.log(\"idcheckd:\",userId);\n                    if (this.seatInfoList[i].userId == userId) {\n                        index = i;\n                        have = true;\n                    }\n                }\n                if (!have) {\n                    throw new Error('用户不在麦上:-1');\n                }\n                value = {\n                    status: 0,\n                    mute: this.seatInfoList[index].mute,\n                    speaking: this.seatInfoList[index].speaking,\n                };\n                arr.push(this.im.seatInfoUpdate(this.RCSeatInfoSeatPartPrefixKey + index, value));\n                return [2 /*return*/, Promise.all(arr).then(function (result) {\n                        // this.seatInfoList[index] = {\n                        //     status: 0,\n                        //     mute: this.seatInfoList[index].mute,\n                        //     speaking: this.seatInfoList[index].speaking,\n                        // };\n                        _this.seatInfoList[index]['status'] = 0;\n                        _this.seatInfoList[index]['mute'] = _this.seatInfoList[index].mute;\n                        _this.seatInfoList[index]['speaking'] = _this.seatInfoList[index].speaking;\n                        delete _this.seatInfoList[index]['userId'];\n                        // this.seatInfoList[index]['userId'] = '';\n                        // console.log('this.seatInfoList', this.seatInfoList);\n                        return '操作成功:70000';\n                    }).catch(function () {\n                        throw new Error('未知错误:-1');\n                    })];\n            });\n        });\n    };\n    /**\n    *\n    * 用户跳麦\n    * 注意：在用户已经在麦位想切换麦位时调用\n    *\n    * @param seatIndex 需要跳转的麦位序号\n    */\n    RCVoiceRoomLibClass.prototype.switchSeatTo = function (seatIndex) {\n        return __awaiter(this, void 0, void 0, function () {\n            var index, i, valueOld;\n            var _this = this;\n            return __generator(this, function (_a) {\n                if (!this.seatInfoList[seatIndex]) {\n                    throw new Error('麦位不存在');\n                }\n                if (Number(this.seatInfoList[seatIndex].status) == _config__WEBPACK_IMPORTED_MODULE_3__.RCSeatStatus.RCSeatStatusLocking) {\n                    throw new Error(\"麦位被锁定不能跳麦\");\n                }\n                index = null;\n                for (i = 0; i < this.seatInfoList.length; i += 1) {\n                    if (this.seatInfoList[i].userId === this.im.userId) {\n                        index = i;\n                        break;\n                    }\n                }\n                if (index === null) {\n                    throw new Error('用户不在麦位上:70004');\n                }\n                else {\n                    if (!this.seatInfoList[seatIndex]['userId']) {\n                        valueOld = {\n                            status: 0,\n                            mute: this.seatInfoList[index].mute,\n                            speaking: this.seatInfoList[index].speaking,\n                        };\n                        return [2 /*return*/, this.im.seatInfoUpdate(this.RCSeatInfoSeatPartPrefixKey + index, valueOld).then(function (result) {\n                                // this.seatInfoList[index] = valueOld\n                                _this.seatInfoList[index]['status'] = 0;\n                                _this.seatInfoList[index]['mute'] = _this.seatInfoList[index].mute;\n                                _this.seatInfoList[index]['speaking'] = _this.seatInfoList[index].speaking;\n                                delete _this.seatInfoList[index]['userId'];\n                                return _this.enterSeat(seatIndex);\n                            }).catch(function () {\n                                throw new Error('未知错误:-1');\n                            })];\n                    }\n                    else {\n                        if (this.seatInfoList[seatIndex].userId == this.im.userId) {\n                            throw new Error('用户跳麦的麦位和之前的一样:70005');\n                        }\n                        else {\n                            throw new Error('麦位不是空置状态:70006');\n                        }\n                    }\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    /**\n    *\n    * 抱用户上麦\n    *\n    * @param userId   用户 Id\n    */\n    RCVoiceRoomLibClass.prototype.pickUserToSeat = function (userId) {\n        return __awaiter(this, void 0, void 0, function () {\n            var value;\n            return __generator(this, function (_a) {\n                value = {\n                    // 填写开发者定义的消息内容\n                    content: \"RCPickerUserSeatContent\",\n                    invitationId: \"f9e6765b-304d-451a-be91-2bb936175888\",\n                    sendUserId: this.im.userId,\n                    targetId: userId,\n                    type: 0,\n                };\n                if (userId == this.im.userId) {\n                    throw new Error('抱人上麦不能选择自己:70007');\n                }\n                else {\n                    return [2 /*return*/, this.im.messageUpdate(\"RC:VRLInviteMsg\", value).then(function (massage) {\n                            return '操作成功:70000';\n                        }).catch(function (err) {\n                            throw new Error('发送上麦邀请失败:70008');\n                        })];\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    /**\n    *\n    * 将用户踢出房间\n    *\n    * @param userId   用户 Id\n    */\n    RCVoiceRoomLibClass.prototype.kickUserFromRoom = function (userId) {\n        return __awaiter(this, void 0, void 0, function () {\n            var value;\n            return __generator(this, function (_a) {\n                value = {\n                    // 填写开发者定义的消息内容\n                    content: \"RCKickUserOutRoomContent\",\n                    invitationId: \"yourRandomString\" + Math.random(),\n                    sendUserId: this.im.userId,\n                    targetId: userId,\n                    type: 0,\n                };\n                if (userId == this.im.userId) {\n                    throw new Error('未知错误:-1');\n                }\n                else {\n                    return [2 /*return*/, this.im.messageUpdate(\"RC:VRLInviteMsg\", value).then(function (massage) {\n                            return '操作成功:70000';\n                        }).catch(function (err) {\n                            throw new Error('发送信息失败:70023');\n                        })];\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    /**\n    *\n    * 将某个麦位静音\n    *\n    * @param seatIndex 麦位序号\n    * @param isMute    是否静音\n    */\n    RCVoiceRoomLibClass.prototype.muteSeat = function (seatIndex, ismute) {\n        return __awaiter(this, void 0, void 0, function () {\n            var arr, value;\n            var _this = this;\n            return __generator(this, function (_a) {\n                arr = [];\n                value = __assign(__assign({}, this.seatInfoList[seatIndex]), { mute: ismute });\n                arr.push(this.im.seatInfoUpdate(this.RCSeatInfoSeatPartPrefixKey + seatIndex, value));\n                return [2 /*return*/, Promise.all(arr).then(function (result) {\n                        if (seatIndex == _this.im.seatIndex) {\n                            if (ismute) {\n                                _this.rtc.mute();\n                            }\n                            else {\n                                _this.rtc.unmute();\n                            }\n                        }\n                        _this.seatInfoList[seatIndex]['mute'] = ismute;\n                        return '操作成功:70000';\n                    }).catch(function () {\n                        throw new Error('未知错误:-1');\n                    })];\n            });\n        });\n    };\n    /**\n    *\n    * 将某个麦位锁定\n    *\n    * @param seatIndex 麦位序号\n    * @param isLocked  是否锁麦位\n    */\n    RCVoiceRoomLibClass.prototype.lockSeat = function (seatIndex, isLocked) {\n        return __awaiter(this, void 0, void 0, function () {\n            var arr, isLock, value;\n            var _this = this;\n            return __generator(this, function (_a) {\n                if (!this.seatInfoList[seatIndex]) {\n                    throw new Error('麦位不存在');\n                }\n                arr = [];\n                isLock = isLocked ? 2 : 0;\n                value = {\n                    mute: this.seatInfoList[seatIndex].mute,\n                    speaking: this.seatInfoList[seatIndex].speaking,\n                    status: isLock,\n                };\n                arr.push(this.im.seatInfoUpdate(this.RCSeatInfoSeatPartPrefixKey + seatIndex, value));\n                return [2 /*return*/, Promise.all(arr).then(function (result) {\n                        _this.seatInfoList[seatIndex]['status'] = isLock;\n                        _this.seatInfoList[seatIndex]['mute'] = _this.seatInfoList[seatIndex].mute;\n                        _this.seatInfoList[seatIndex]['speaking'] = _this.seatInfoList[seatIndex].speaking;\n                        delete _this.seatInfoList[seatIndex]['userId'];\n                        return '操作成功:70000';\n                    }).catch(function () {\n                        throw new Error('未知错误:-1');\n                    })];\n            });\n        });\n    };\n    /**\n    * 设置房间信息，房间的id必须与当前房间id一致\n    *\n    * @param roomInfo 修改的房间信息\n    */\n    RCVoiceRoomLibClass.prototype.setRoomInfo = function (roomInfo) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                // console.log(\"roominfo\", roomInfo, this.roomInfo);\n                // console.log(\"this.roomInfo\", this.roomInfo);\n                // seatCount\n                if (Number(roomInfo.seatCount) != Number(this.roomInfo.seatCount)) { //座位数发生了变更\n                    this.im.changeRoomInfo(roomInfo);\n                }\n                if (roomInfo.isMuteAll != this.roomInfo.isMuteAll) { //将所有麦位静音打开或者关闭\n                    this.muteOtherSeats(roomInfo.isMuteAll);\n                    // this.im.seatInfoUpdate(\"RCRoomInfoKey\", roomInfo)\n                }\n                if (roomInfo.isLockAll != this.roomInfo.isLockAll) { //将所有麦位所卖或者解除锁麦\n                    this.lockOtherSeats(roomInfo.isLockAll);\n                    // this.im.seatInfoUpdate(\"RCRoomInfoKey\", roomInfo)\n                }\n                this.im.seatInfoUpdate(\"RCRoomInfoKey\", roomInfo);\n                this.roomInfo = __assign({}, roomInfo);\n                this.emit(\"roomInfoDidUpdate\", this.roomInfo);\n                return [2 /*return*/];\n            });\n        });\n    };\n    /**\n    *\n    * 将所有麦位静音打开或者关闭\n    *\n    * @param isMute 是否静音\n    */\n    RCVoiceRoomLibClass.prototype.muteOtherSeats = function (isMute) {\n        return __awaiter(this, void 0, void 0, function () {\n            var arr, roomData, i, value;\n            var _this = this;\n            return __generator(this, function (_a) {\n                arr = [];\n                roomData = __assign(__assign({}, this.roomInfo), { isMuteAll: isMute });\n                // const unMute = !isMute\n                for (i = 0; i < this.seatInfoList.length; i += 1) {\n                    // if (this.seatInfoList[i]['userId'] == this.im.userId){//当前麦位本地操作\n                    //     this.updateLocalInfo(this.seatInfoList[i])\n                    // }\n                    if (this.seatInfoList[i]['userId'] != this.im.userId && this.seatInfoList[i]['mute'] != isMute) {\n                        value = __assign(__assign({}, this.seatInfoList[i]), { mute: isMute });\n                        arr.push(this.im.seatInfoUpdate(this.RCSeatInfoSeatPartPrefixKey + i, value));\n                    }\n                }\n                return [2 /*return*/, Promise.all(arr).then(function (result) {\n                        _this.roomInfo = roomData;\n                        _this.emit(\"roomInfoDidUpdate\", _this.roomInfo);\n                        for (var i = 0; i < _this.seatInfoList.length; i += 1) {\n                            if (_this.seatInfoList[i]['userId'] != _this.im.userId && _this.seatInfoList[i]['mute'] != isMute) {\n                                _this.seatInfoList[i]['mute'] = isMute;\n                            }\n                        }\n                        return '操作成功:70000';\n                    }).catch(function () {\n                        throw new Error('未知错误:-1');\n                    })];\n            });\n        });\n    };\n    /**\n    *\n    * 将所有麦位所卖或者解除锁麦\n    *\n    * @param isLock 是否锁麦\n    */\n    RCVoiceRoomLibClass.prototype.lockOtherSeats = function (isLock) {\n        return __awaiter(this, void 0, void 0, function () {\n            var arr, Lock, roomData, i, value;\n            var _this = this;\n            return __generator(this, function (_a) {\n                arr = [];\n                Lock = isLock ? 2 : 0;\n                roomData = __assign(__assign({}, this.roomInfo), { isLockAll: isLock });\n                for (i = 0; i < this.seatInfoList.length; i += 1) {\n                    if (!this.seatInfoList[i]['userId'] && this.seatInfoList[i]['status'] != Lock) {\n                        value = __assign(__assign({}, this.seatInfoList[i]), { status: Lock });\n                        arr.push(this.im.seatInfoUpdate(this.RCSeatInfoSeatPartPrefixKey + i, value));\n                    }\n                }\n                return [2 /*return*/, Promise.all(arr).then(function (result) {\n                        _this.roomInfo = roomData;\n                        _this.emit(\"roomInfoDidUpdate\", _this.roomInfo);\n                        for (var i = 0; i < _this.seatInfoList.length; i += 1) {\n                            if (!_this.seatInfoList[i]['userId'] && _this.seatInfoList[i]['status'] != Lock) {\n                                _this.seatInfoList[i]['status'] = Lock;\n                            }\n                        }\n                        return '操作成功:70000';\n                    }).catch(function () {\n                        throw new Error('未知错误:-1');\n                    })];\n            });\n        });\n    };\n    /**\n    * 通知房间所有用户执行某个刷新操作\n    *\n    * @param name    刷新操作的名称\n    * @param content 刷新操作的内容\n    */\n    RCVoiceRoomLibClass.prototype.notifyVoiceRoom = function (name, content) {\n        return __awaiter(this, void 0, void 0, function () {\n            var value;\n            return __generator(this, function (_a) {\n                value = {\n                    content: content,\n                    name: name,\n                };\n                return [2 /*return*/, this.im.messageUpdate(\"RC:VRLRefreshMsg\", value).then(function (massage) {\n                        return '操作成功:70000';\n                    }).catch(function (err) {\n                        throw new Error('发送信息失败:70023');\n                    })];\n            });\n        });\n    };\n    /**\n    *\n    * 获取排麦用户的标识集合\n    *\n    */\n    RCVoiceRoomLibClass.prototype.getRequestSeatUserIds = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var arr;\n            return __generator(this, function (_a) {\n                arr = [];\n                return [2 /*return*/, this.im.chatRoom.getAllChatRoomEntries(this._roomidcli).then(function (data) {\n                        if (data.code === 0) {\n                            var entries_1 = data.data;\n                            Object.keys(entries_1).forEach(function (key) {\n                                if (key.split(\"_\")[0] == \"RCRequestSeatPrefixKey\" &&\n                                    entries_1[key] == \"RCRequestSeatContentRequest\") {\n                                    arr.push(key.split(\"_\")[1]);\n                                }\n                            });\n                            return arr;\n                        }\n                    }).catch(function () {\n                        throw new Error('获取排麦请求列表失败:70022');\n                    })];\n            });\n        });\n    };\n    /**\n    *\n    * 获取最新麦位信息\n    *\n    */\n    RCVoiceRoomLibClass.prototype.getLatestSeatInfo = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var arr;\n            return __generator(this, function (_a) {\n                arr = [];\n                // console.log('this._roomidcli', this._roomidcli);\n                return [2 /*return*/, this.im.chatRoom.getAllChatRoomEntries(this._roomidcli).then(function (res) {\n                        console.log('entries:', res);\n                        if (res.code === 0) {\n                            Object.keys(res.data).forEach(function (key) {\n                                var entriesArr = key.split(\"_\");\n                                if (entriesArr[0] == \"RCSeatInfoSeatPartPrefixKey\") {\n                                    //console.log('Number(entriesArr[1])', Number(entriesArr[1]));\n                                    //console.log('entries[key]', entries[key]);\n                                    arr[Number(entriesArr[1])] = JSON.parse(res.data[key]);\n                                }\n                            });\n                            return arr;\n                        }\n                    }).catch(function () {\n                        throw new Error('同步麦位信息失败:70030');\n                    })];\n            });\n        });\n    };\n    /**\n    *\n    * 更新指定麦位信息中的extra字段\n    *\n    * @param index 麦位\n    * @param extra extra字段\n    */\n    RCVoiceRoomLibClass.prototype.updateSeatInfoExtra = function (index, extra) {\n        return __awaiter(this, void 0, void 0, function () {\n            var arr, value;\n            var _this = this;\n            return __generator(this, function (_a) {\n                arr = [];\n                value = __assign(__assign({}, this.seatInfoList[index]), { extra: extra });\n                arr.push(this.im.seatInfoUpdate(this.RCSeatInfoSeatPartPrefixKey + index, value));\n                return [2 /*return*/, Promise.all(arr).then(function (result) {\n                        _this.seatInfoList[index]['extra'] = extra;\n                        return '操作成功:70000';\n                    }).catch(function () {\n                        throw new Error('未知错误:-1');\n                    })];\n            });\n        });\n    };\n    /**\n    *\n    * 请求排麦\n    */\n    RCVoiceRoomLibClass.prototype.requestSeat = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var len, bor, i, arr;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.getRequestSeatUserIds()];\n                    case 1:\n                        len = _a.sent();\n                        bor = false;\n                        for (i = 0; i < len.length; i += 1) {\n                            if (len[i] == this.im.userId) {\n                                bor = true;\n                            }\n                        }\n                        arr = [];\n                        if (len.length > 20) {\n                            throw new Error('排麦人数过多:70014');\n                        }\n                        else if (bor) {\n                            throw new Error('已经在排麦中:70013');\n                        }\n                        else {\n                            arr.push(this.im.RequestseatInfoUpdate(\"RCRequestSeatPrefixKey_\" + this.im.userId, \"RCRequestSeatContentRequest\"));\n                            return [2 /*return*/, Promise.all(arr).then(function (result) {\n                                    return '操作成功:70000';\n                                }).catch(function () {\n                                    throw new Error('排麦请求发送失败:70015');\n                                })];\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n    *\n    * 取消排麦请求\n    *\n    */\n    RCVoiceRoomLibClass.prototype.cancelRequestSeat = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.im.seatInfoRemove(\"RCRequestSeatPrefixKey_\" + this.im.userId).then(function (res) {\n                        // 强制删除聊天室属性成功\n                        if (res.code === 0) {\n                            return '操作成功:70000';\n                        }\n                    }).catch(function (error) {\n                        throw new Error('取消排麦发送失败:70016');\n                    })];\n            });\n        });\n    };\n    /**\n    *\n    *  同意用户排麦请求\n    *\n    * @param userId   请求排麦的用户 Id\n    */\n    RCVoiceRoomLibClass.prototype.acceptRequestSeat = function (userId) {\n        return __awaiter(this, void 0, void 0, function () {\n            var arr;\n            return __generator(this, function (_a) {\n                arr = [];\n                arr.push(this.im.RequestseatInfoUpdate(\"RCRequestSeatPrefixKey_\" + userId, \"RCRequestSeatContentAccept\"));\n                return [2 /*return*/, Promise.all(arr).then(function (result) {\n                        return '操作成功:70000';\n                    }).catch(function () {\n                        throw new Error('同意排麦请求发送失败:70017');\n                    })];\n            });\n        });\n    };\n    /**\n    * 拒绝用户排麦请求\n    *\n    * @param userId 请求排麦的用户 Id\n    */\n    RCVoiceRoomLibClass.prototype.rejectRequestSeat = function (userId) {\n        return __awaiter(this, void 0, void 0, function () {\n            var arr;\n            return __generator(this, function (_a) {\n                arr = [];\n                arr.push(this.im.RequestseatInfoUpdate(\"RCRequestSeatPrefixKey_\" + userId, \"RCRequestSeatContentDeny\"));\n                return [2 /*return*/, Promise.all(arr).then(function (result) {\n                        _loger__WEBPACK_IMPORTED_MODULE_4__.default.log('操作成功:70000');\n                    }).catch(function () {\n                        throw new Error('拒绝排麦请求发送失败:70018');\n                    })];\n            });\n        });\n    };\n    /**\n    *\n    * 静音所有远程音频流\n    *\n    * @param isMute 是否静音\n    */\n    RCVoiceRoomLibClass.prototype.muteAllRemoteStreams = function (isMute) {\n        return __awaiter(this, void 0, void 0, function () {\n            var remoteTracksObj;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        this.rtc.isMuteOther = isMute;\n                        return [4 /*yield*/, this.rtc.room.getRemoteTracks()];\n                    case 1:\n                        remoteTracksObj = _a.sent();\n                        if (remoteTracksObj.length) {\n                            if (isMute) {\n                                return [2 /*return*/, this.rtc.room.unsubscribe(remoteTracksObj)];\n                            }\n                            else {\n                                if (this.rtc.rtcTracks) {\n                                    return [2 /*return*/, this.rtc.room.subscribe(this.rtc.rtcTracks)];\n                                }\n                                else {\n                                    return [2 /*return*/, this.rtc.room.subscribe(remoteTracksObj)];\n                                }\n                            }\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n    *\n    * 禁用本地麦克风\n    *\n    * @param isDisable 是否禁用\n    */\n    RCVoiceRoomLibClass.prototype.disableAudioRecording = function (isDisable) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                this.rtc.isDisable = isDisable;\n                if (isDisable) {\n                    return [2 /*return*/, this.rtc.mute()];\n                }\n                else {\n                    return [2 /*return*/, this.rtc.unmute()];\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    /**\n    *\n    * 获取本地本地麦克风状态\n    *\n    */\n    RCVoiceRoomLibClass.prototype.isDisableAudioRecording = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.rtc.isDisable];\n            });\n        });\n    };\n    /**\n    *\n    * 主动打开扬声器\n    *\n    */\n    RCVoiceRoomLibClass.prototype.enableSpeaker = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.rtc.audioPlay()];\n            });\n        });\n    };\n    /**\n    *\n    * 发布自定义音频流\n    * @param file 本地 MP3 file实例\n    */\n    RCVoiceRoomLibClass.prototype.createTrack = function (file) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.rtc.createTrack(file)];\n            });\n        });\n    };\n    /**\n    *\n    * 停止发布自定义音频流(调用默认已发布自定义音频流)\n    *\n    */\n    RCVoiceRoomLibClass.prototype.stopCreateTrack = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.rtc.stopCreateTrack()];\n            });\n        });\n    };\n    /**\n    *\n    * 直播预览\n    *\n    * @param videoNode\n    */\n    RCVoiceRoomLibClass.prototype.preview = function (o) {\n        this.rtc.preview(o.videoNode);\n    };\n    return RCVoiceRoomLibClass;\n}(events__WEBPACK_IMPORTED_MODULE_0__.EventEmitter));\nvar RCVoiceRoomLib = new RCVoiceRoomLibClass();\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (RCVoiceRoomLib);\n\n\n//# sourceURL=webpack://@rongcloud/rcvoiceroomlib-v1/./src/index.ts?")},"./src/loger.ts":
/*!**********************!*\
  !*** ./src/loger.ts ***!
  \**********************/(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config */ "./src/config.ts");\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! events */ "./node_modules/events/events.js");\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(events__WEBPACK_IMPORTED_MODULE_1__);\n\n\nvar Loger = /** @class */ (function () {\n    function Loger() {\n        this.History = [];\n    }\n    Loger.prototype.log = function (target, t) {\n        if (t === void 0) { t = ""; }\n        if (!_config__WEBPACK_IMPORTED_MODULE_0__.debug)\n            return;\n        switch (typeof (target)) {\n            case "number":\n                console.log("its a number ===>", target);\n                break;\n            case "string":\n                console.log(target, t);\n                break;\n            case "object":\n                console.log("its a object ===>", target);\n                break;\n            case "function":\n                console.log("its a function ===>", target);\n            default:\n                // console.log(target);\n                break;\n        }\n    };\n    Loger.prototype._log = function (target) {\n        var l = {\n            mainStatus: 0,\n            moduleNum: 0,\n            readyNum: 0,\n            loadingList: [],\n            readyList: [],\n            runningList: [],\n            brokenList: [],\n            unKnowStatesList: []\n        };\n        if (Array.isArray(target)) { //array类型.\n            target.forEach(function (element) {\n                if ((element instanceof events__WEBPACK_IMPORTED_MODULE_1__.EventEmitter) && (element.name)) { //队列内容是模块数据检查\n                    l.moduleNum++;\n                    switch (element.states) {\n                        case 0:\n                            l.loadingList.push(element.name);\n                            break;\n                        case 1:\n                            l.readyList.push(element.name);\n                            l.readyNum++;\n                            break;\n                        case 2:\n                            l.runningList.push(element.name);\n                            break;\n                        case 9:\n                            l.brokenList.push(element.name);\n                            break;\n                        default:\n                            l.unKnowStatesList.push(element.name);\n                            break;\n                    }\n                }\n                else {\n                    console.warn("数据非法");\n                }\n            });\n            this.History.push(l);\n            if (this.History.length > 99) {\n                this.History.shift();\n            }\n        }\n        else { //普通对象类型\n            console.warn("_log 方法存在异常调用", target);\n        }\n    };\n    Loger.prototype.history = function () {\n        console.log(this.History);\n    };\n    Loger.prototype.warn = function (target, e) {\n        if (e === void 0) { e = null; }\n        console.warn(target, e);\n    };\n    //错误上报: 参数 e:原始错误信息  errtype:错误类型 mod:错误发生模块 errnum:错误编号;errmessage:错误消息\n    Loger.prototype.error = function (e, errtype, mod, errnum, errmessage) {\n        if (errtype === void 0) { errtype = "0"; }\n        if (mod === void 0) { mod = null; }\n        if (errnum === void 0) { errnum = "00"; }\n        if (errmessage === void 0) { errmessage = "unknow err"; }\n        var errModNum = "0";\n        //遇到错误时尝试重启该模块.\n        mod.reboot();\n    };\n    Loger.prototype._error = function (target, e) {\n        if (e === void 0) { e = null; }\n        throw new Error(target);\n    };\n    return Loger;\n}());\nvar loger = new Loger();\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (loger);\n//执行码 \n/*\n千位 执行类别  1数据错误 2网络错误 3硬件 4外部软件环境原因 5自身错误\n百位 模块号 1主模块 2通信 3录音 4桥接 5pcm 0未找到具体模块\n十位个位 具体命令\n    00 未知错误;\n    01 初始化错误;\n    02 参数错误;\n    03 ws接收数据错误;\n    04 音频navigator获取失败;\n    05 模块自身损坏\n    06 native 相关错误\n    */ \n\n\n//# sourceURL=webpack://@rongcloud/rcvoiceroomlib-v1/./src/loger.ts?')},"./src/modules/im/index.ts":
/*!*********************************!*\
  !*** ./src/modules/im/index.ts ***!
  \*********************************/(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _structure_modules__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../structure/modules */ "./src/structure/modules.ts");\n/* harmony import */ var _rongcloud_imlib_next__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @rongcloud/imlib-next */ "./node_modules/@rongcloud/imlib-next/dist/index.esm.js");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../config */ "./src/config.ts");\n/* harmony import */ var _loger__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../loger */ "./src/loger.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== "function" && b !== null)\n            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (undefined && undefined.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError("Generator is already executing.");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n\n\n\n\nvar IM = /** @class */ (function (_super) {\n    __extends(IM, _super);\n    function IM(item) {\n        var _this = _super.call(this) || this;\n        _this.states = 0; //0初始化未完成 1就绪 2正在初始化  9浏览器不支持\n        _this.userId = \'\';\n        _this.roomId = \'\';\n        _this.seatInfoList = [];\n        _this.init(item);\n        return _this;\n    }\n    //im注册\n    IM.prototype.init = function (item) {\n        return __awaiter(this, void 0, void 0, function () {\n            var RongIMLib, Events, that;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (item.imLib) {\n                            RongIMLib = item.imLib;\n                        }\n                        else {\n                            RongIMLib = _rongcloud_imlib_next__WEBPACK_IMPORTED_MODULE_1__;\n                        }\n                        return [4 /*yield*/, RongIMLib.__addSDKVersion(\'rcvoiceroomlib\', \'2.0.0\')\n                            // 获取 IMLib 实例\n                        ];\n                    case 1:\n                        _a.sent();\n                        // 获取 IMLib 实例\n                        return [4 /*yield*/, RongIMLib.init({ appkey: item.appkey })];\n                    case 2:\n                        // 获取 IMLib 实例\n                        _a.sent();\n                        Events = RongIMLib.Events;\n                        this.chatRoom = RongIMLib;\n                        this.body = RongIMLib;\n                        that = this;\n                        //添加消息监听\n                        RongIMLib.addEventListener(Events.MESSAGES, function (m) {\n                            var message = m.messages[0];\n                            // console.log(\'message\', message);\n                            switch (message.messageType) {\n                                case "RC:VRLRefreshMsg":\n                                    that.emit("onRoomNotificationReceived", {\n                                        name: message.content.name,\n                                        content: message.content.content,\n                                    });\n                                    switch (message.content.name.split("_")[0]) {\n                                        case "RCAudienceJoinRoom":\n                                            that.chatRoom.getChatRoomInfo(that.roomId, {\n                                                count: 0,\n                                                order: 0\n                                            }).then(function (result) {\n                                                if (result.code == 0) {\n                                                    that.emit("onAudienceEnter", result.data.userCount);\n                                                }\n                                            });\n                                            break;\n                                        case "RCAudienceLeaveRoom":\n                                            that.chatRoom.getChatRoomInfo(that.roomId, {\n                                                count: 0,\n                                                order: 0\n                                            }).then(function (result) {\n                                                if (result.code == 0) {\n                                                    that.emit("onAudienceExit", result.data.userCount);\n                                                }\n                                            });\n                                            break;\n                                        case "RCUserOnSeatSpeakingKey":\n                                            //console.log("originkey:", message.content.name)\n                                            that.emit("speakingStatusChange", { index: message.content.name.split("_")[1], speaking: message.content.content });\n                                            break;\n                                        case "VoiceRoomClosed":\n                                            //console.log("originkey:", message.content.name)\n                                            that.emit("VoiceRoomClosed");\n                                            break;\n                                        case "VoiceRoomBackgroundChanged":\n                                            //console.log("originkey:", message.content.name)\n                                            that.emit("VoiceRoomBackgroundChanged", message.content.content);\n                                            break;\n                                        case "VoiceRoomAgreeManagePick":\n                                            //console.log("originkey:", message.content.name)\n                                            that.emit("VoiceRoomAgreeManagePick", message.content.content);\n                                            break;\n                                        case "VoiceRoomRejectManagePick":\n                                            //console.log("originkey:", message.content.name)\n                                            that.emit("VoiceRoomRejectManagePick", message.content.content);\n                                            break;\n                                        default:\n                                            break;\n                                    }\n                                    break;\n                                case "RC:VRLInviteMsg":\n                                    switch (message.content.content) {\n                                        case "RCKickUserOutRoomContent":\n                                            that.emit("RCKickUserOutRoomContent", {\n                                                targetId: message.content.targetId,\n                                                userId: message.content.sendUserId,\n                                            });\n                                            break;\n                                        case "RCPickerUserSeatContent":\n                                            that.emit("RCPickerUserSeatContent", {\n                                                targetId: message.content.targetId,\n                                                sendUserId: message.content.sendUserId,\n                                            });\n                                            //console.log("被抱上麦");\n                                            break;\n                                        default:\n                                            break;\n                                    }\n                                default:\n                                    that.emit("onMessageReceived", message);\n                                    break;\n                            }\n                        });\n                        /**\n                         * 正在链接的事件状态\n                         */\n                        RongIMLib.addEventListener(Events.CONNECTING, function () {\n                            // console.log(\'正在链接...\')\n                        });\n                        /**\n                         * 链接到服务器会触发这个事件\n                         */\n                        RongIMLib.addEventListener(Events.CONNECTED, function () {\n                            console.log(\'连接成功\');\n                        });\n                        /**\n                         * 手动调用 disconnect 方法或者用户被踢下线 会触发这个事件\n                         */\n                        RongIMLib.addEventListener(Events.DISCONNECT, function () {\n                            that.emit("connectioBreakOff");\n                        });\n                        /**\n                         * 链接出问题时，内部进行重新链接，会出发这个事件\n                         */\n                        RongIMLib.addEventListener(Events.SUSPEND, function () {\n                            // console.log(\'链接中断,SDK 会尝试重连,业务层无需关心\')\n                        });\n                        //聊天室KV更新\n                        RongIMLib.addEventListener(Events.CHATROOM, function (event) {\n                            if (event[\'chatroomDestroyed\']) {\n                                that.emit("chatroomDestroyed");\n                            }\n                            else {\n                                /**\n                                * 聊天室 KV 存储数据更新  ^[0-9]*$\n                                */\n                                var updatedEntries = event.updatedEntries;\n                                // console.log("kvup==================", event.updatedEntries)\n                                updatedEntries.forEach(function (obj) {\n                                    switch (obj.key.split("_")[0]) {\n                                        case "RCRoomInfoKey":\n                                            var roomInfo = JSON.parse(obj.value);\n                                            that.emit("roomInfoDidUpdate", { roomInfo: roomInfo });\n                                            if (that.seatIndex > roomInfo.seatCount) {\n                                                _loger__WEBPACK_IMPORTED_MODULE_3__.default.log("seatCount不对下麦");\n                                                that.emit("leaveSeat");\n                                            }\n                                            if (that.seatInfoList.length > roomInfo.seatCount) {\n                                                that.seatInfoList.length = roomInfo.seatCount;\n                                            }\n                                            break;\n                                        case "RCSeatInfoSeatPartPrefixKey":\n                                            //麦位操作\n                                            //筛查被更改的麦位\n                                            if (roomInfo && (obj.key.split("_")[1] >= roomInfo.seatCount)) { //大于当前seatCount的属性不处理\n                                                return;\n                                            }\n                                            var currentSeatInfo = that.seatInfoList[Number(obj.key.split("_")[1])]; //当前麦位信息\n                                            if (!obj.value)\n                                                return; // 麦位信息不完整直接返回 \n                                            var newSeatInfo = JSON.parse(obj.value); //传入的麦位信息\n                                            if (that.seatIndex == obj.key.split("_")[1]) { //当前在被操作的麦位上\n                                                for (var key in currentSeatInfo) {\n                                                    switch (key) {\n                                                        case "userId":\n                                                            // if (currentSeatInfo.userId != newSeatInfo.userId) {\n                                                            //     that.emit("leaveSeat");\n                                                            // }\n                                                            break;\n                                                        case "mute":\n                                                            if (currentSeatInfo.mute != newSeatInfo.mute) {\n                                                                that.emit("mute", newSeatInfo.mute);\n                                                            }\n                                                            break;\n                                                        case "status":\n                                                            switch (Number(newSeatInfo.status)) {\n                                                                case _config__WEBPACK_IMPORTED_MODULE_2__.RCSeatStatus.RCSeatStatusEmpty:\n                                                                    if (currentSeatInfo.status == 1) {\n                                                                        that.emit("leaveSeat");\n                                                                        _loger__WEBPACK_IMPORTED_MODULE_3__.default.log("接受到消息下麦");\n                                                                    }\n                                                                    break;\n                                                                case _config__WEBPACK_IMPORTED_MODULE_2__.RCSeatStatus.RCSeatStatusLocking:\n                                                                    _loger__WEBPACK_IMPORTED_MODULE_3__.default.log("锁麦位下麦");\n                                                                    that.emit("leaveSeat");\n                                                                    break;\n                                                                default:\n                                                                    break;\n                                                            }\n                                                        default:\n                                                            break;\n                                                    }\n                                                }\n                                            }\n                                            that.seatInfoList[obj.key.split("_")[1]] = JSON.parse(obj.value);\n                                            that.emit("seatInfoDidUpdate");\n                                            break;\n                                        case "RCRequestSeatPrefixKey":\n                                            if (that.userId && obj.key.split("_")[1] == that.userId) {\n                                                if (obj.value == "RCRequestSeatContentAccept") {\n                                                    that.emit("RequestSeatAccepted");\n                                                }\n                                                else if (obj.value == "RCRequestSeatContentDeny") {\n                                                    that.emit("RequestSeatRejected");\n                                                }\n                                            }\n                                            that.emit("RequestSeatListChanged");\n                                            break;\n                                        default:\n                                            break;\n                                    }\n                                });\n                            }\n                        });\n                        that.emit("imReady", RongIMLib);\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    //im链接\n    IM.prototype.connect = function (token) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.chatRoom.connect(token).then(function (res) {\n                        if (res.code === 0) {\n                            _this.emit("connectReady");\n                            if (res.data.userId) {\n                                _this.userId = res.data.userId;\n                                return \'操作成功:70000\';\n                            }\n                            else {\n                                return \'当前用户 Id 为空:70029\';\n                            }\n                        }\n                    }).catch(function (error) {\n                        _this.userId = \'\';\n                        return \'连接服务器失败:70001\';\n                    })];\n            });\n        });\n    };\n    //加入房间\n    IM.prototype.joinRoom = function (o) {\n        return __awaiter(this, void 0, void 0, function () {\n            var that;\n            var _this = this;\n            return __generator(this, function (_a) {\n                if (o.roomName) {\n                    this._roomName = o.roomName;\n                }\n                this.roomId = o.roomId;\n                that = this;\n                return [2 /*return*/, this.chatRoom.joinChatRoom(o.roomId, {\n                        count: -1\n                    }).then(function (res) { return __awaiter(_this, void 0, void 0, function () {\n                        return __generator(this, function (_a) {\n                            // 加入聊天室成功\n                            that.messageUpdate("RC:VRLRefreshMsg", {\n                                name: "RCAudienceJoinRoom",\n                                content: that.userId\n                            }).then(function () {\n                                _loger__WEBPACK_IMPORTED_MODULE_3__.default.log(\'发送进房间消息成功\');\n                            }).catch(function (err) {\n                                _loger__WEBPACK_IMPORTED_MODULE_3__.default._error(\'发送进房间消息失败:\', err);\n                            });\n                            that.emit("joinRoom", o);\n                            return [2 /*return*/, \'加入聊天室成功\'];\n                        });\n                    }); }).catch(function (error) {\n                        return error;\n                    })];\n            });\n        });\n    };\n    //获取房间属性\n    IM.prototype.getRoomInfo = function (o) {\n        return __awaiter(this, void 0, void 0, function () {\n            var data, ifinseat;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        ifinseat = false;\n                        return [4 /*yield*/, this.chatRoom.getAllChatRoomEntries(o.roomId).then(function (entries) {\n                                // console.log(\'获取所有聊天室属性信息:\', entries.data);\n                                data = entries.data;\n                                if (JSON.stringify(data) == \'{}\') {\n                                    //空房间 初始化roominfo\n                                    _this.setNewRoom(o);\n                                    // ifinseat = true;\n                                }\n                                else {\n                                    for (var key in data) {\n                                        //this.roomInfo[i]=JSON.parse(info[i])\n                                        if (key == "RCRoomInfoKey") {\n                                            _this.roomInfo = JSON.parse(data[key]);\n                                            _this.emit("roomInfoDidUpdate", { roomInfo: _this.roomInfo });\n                                        }\n                                        else if (key.split("_")[0] == \'RCSeatInfoSeatPartPrefixKey\') {\n                                            console.log(\'data[key]\', data[key]);\n                                            _this.seatInfoList[key.split("_")[1]] = JSON.parse(data[key]);\n                                            if (JSON.parse(data[key])[\'userId\'] && JSON.parse(data[key])[\'userId\'] == _this.userId) {\n                                                ifinseat = true;\n                                            }\n                                            _this.emit("seatInfoDidUpdate");\n                                        }\n                                    }\n                                }\n                                ;\n                            })];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/, ifinseat];\n                }\n            });\n        });\n    };\n    //changeRoomInfo属性\n    IM.prototype.changeRoomInfo = function (roominfo) {\n        return __awaiter(this, void 0, void 0, function () {\n            var seatCount, OldseatCount, key, defaultSeatInfo, value, list, m, arr, i;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        seatCount = roominfo.seatCount;\n                        OldseatCount = this.roomInfo.seatCount;\n                        key = \'RCRoomInfoKey\';\n                        defaultSeatInfo = {\n                            status: 0,\n                            mute: false,\n                            speaking: false,\n                        };\n                        value = JSON.stringify(roominfo);\n                        if (!(OldseatCount > seatCount)) return [3 /*break*/, 2];\n                        list = [];\n                        for (m = seatCount; m < OldseatCount; m++) {\n                            list.push(this.chatRoom.forceRemoveChatRoomEntry(this.roomId, {\n                                key: "RCSeatInfoSeatPartPrefixKey_" + m,\n                                isSendNotification: false\n                            }));\n                        }\n                        // console.log(\'removeChatRoomEntries\', list);\n                        return [4 /*yield*/, Promise.all(list).then(function (res) {\n                                console.log("删除属性成功", res);\n                            }).catch(function (error) {\n                                console.log(error);\n                            })\n                            // await this.chatRoom.removeChatRoomEntries(this.roomId, { entries: list, isAutoDelete: false }).then((res) => {\n                            //     console.log("删除属性成功", res);\n                            // }).catch(error => {\n                            //     console.log(error)\n                            // })\n                        ];\n                    case 1:\n                        // console.log(\'removeChatRoomEntries\', list);\n                        _a.sent();\n                        _a.label = 2;\n                    case 2: return [4 /*yield*/, this.chatRoom.forceSetChatRoomEntry(this.roomId, {\n                            key: key,\n                            value: value,\n                            isAutoDelete: false,\n                            isSendNotification: true,\n                            notificationExtra: \'Change Count\'\n                        }).then(function (res) {\n                            _this.roomInfo = roominfo;\n                            _this.emit("roomInfoDidUpdate", { roomInfo: _this.roomInfo });\n                        }).catch(function (error) {\n                            console.log(error);\n                        })];\n                    case 3:\n                        _a.sent();\n                        arr = [];\n                        // let seatarr = []\n                        for (i = 1; i < seatCount; i += 1) {\n                            arr.push(this.chatRoom.forceSetChatRoomEntry(this.roomId, {\n                                key: "RCSeatInfoSeatPartPrefixKey_" + i,\n                                value: JSON.stringify(__assign({}, defaultSeatInfo)),\n                                isAutoDelete: false,\n                                isSendNotification: true,\n                                notificationExtra: \'Change Count\'\n                            }));\n                            this.seatInfoList[i] = __assign({}, defaultSeatInfo);\n                        }\n                        return [4 /*yield*/, Promise.all(arr).then(function (res) {\n                                console.log("设置属性成功", res);\n                            }).catch(function (error) {\n                                console.log(error);\n                            })\n                            // console.log(\'setChatRoomEntries\', arr);\n                            // await this.chatRoom.setChatRoomEntries(this.roomId, { entries: arr, isAutoDelete: false }).then((res) => {\n                            //     console.log("设置属性成功", res);\n                            // }).catch(error => {\n                            //     console.log(error)\n                            // })\n                        ];\n                    case 4:\n                        _a.sent();\n                        // console.log(\'setChatRoomEntries\', arr);\n                        // await this.chatRoom.setChatRoomEntries(this.roomId, { entries: arr, isAutoDelete: false }).then((res) => {\n                        //     console.log("设置属性成功", res);\n                        // }).catch(error => {\n                        //     console.log(error)\n                        // })\n                        this.seatInfoList.length = seatCount;\n                        // this.seatInfoList = seatarr\n                        this.emit(\'changeRoomInfo\');\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    //设置到RoomLib属性\n    IM.prototype.setNewRoom = function (parm) {\n        return __awaiter(this, void 0, void 0, function () {\n            var seatCount, key, defaultRoomInfo, value, defaultSeatInfo, arr, seatarr, i;\n            var _this = this;\n            return __generator(this, function (_a) {\n                console.log(\'setNewRoom\', parm);\n                seatCount = 9;\n                if (parm && parm.seatCount) {\n                    seatCount = parm.seatCount;\n                }\n                key = \'RCRoomInfoKey\';\n                defaultRoomInfo = {\n                    isFreeEnterSeat: false,\n                    isLockAll: false,\n                    isMuteAll: false,\n                    roomName: this._roomName + "",\n                    seatCount: seatCount //麦位数量\n                };\n                value = JSON.stringify(defaultRoomInfo);\n                this.chatRoom.forceSetChatRoomEntry(this.roomId, {\n                    key: key,\n                    value: value,\n                    isAutoDelete: false,\n                    isSendNotification: true,\n                    notificationExtra: \'Change Count\'\n                }).then(function (res) {\n                    _this.roomInfo = defaultRoomInfo;\n                    _this.emit("roomInfoDidUpdate", { roomInfo: _this.roomInfo });\n                }).catch(function (error) {\n                    console.log(error);\n                });\n                defaultSeatInfo = {\n                    status: 0,\n                    mute: false,\n                    speaking: false,\n                };\n                arr = [];\n                seatarr = [];\n                for (i = 0; i < seatCount; i += 1) {\n                    arr.push({\n                        key: "RCSeatInfoSeatPartPrefixKey_" + i,\n                        value: JSON.stringify(__assign({}, defaultSeatInfo)),\n                        isAutoDelete: false,\n                        isSendNotification: true,\n                        notificationExtra: \'Change Count\'\n                    });\n                    seatarr.push(__assign({}, defaultSeatInfo));\n                }\n                this.chatRoom.setChatRoomEntries(parm.roomId, { entries: arr, isAutoDelete: false }).then(function (res) {\n                    console.log("设置属性成功");\n                }).catch(function (error) {\n                    console.log(error);\n                });\n                this.seatInfoList = seatarr;\n                this.emit(\'setNewRoom\');\n                return [2 /*return*/];\n            });\n        });\n    };\n    //更新消息\n    IM.prototype.messageUpdate = function (messageType, content) {\n        var PersonMessage = this.chatRoom.registerMessageType(messageType, false, false, []);\n        var message = new PersonMessage(content);\n        var arr = [\n            this.chatRoom\n                .sendMessage({\n                conversationType: this.chatRoom.ConversationType.CHATROOM,\n                targetId: this.roomId\n            }, message),\n            // this.chatRoom\n            //     .insertMessage(\n            //         {\n            //             conversationType: this.chatRoom.ConversationType.CHATROOM,\n            //             targetId: this.roomId\n            //         },\n            //         {\n            //             senderUserId: this.userId,\n            //             messageType: messageType,\n            //             content: content,\n            //         })\n        ];\n        return Promise.all(arr);\n    };\n    //im离开房间\n    IM.prototype.leaveRoom = function (roomid) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.chatRoom.quitChatRoom(roomid).then(function (res) {\n                        //退出时清理房间数据\n                        if (res.code === 0) {\n                            _this.roomInfo = null;\n                            _this.seatInfoList.length = 0;\n                            // console.log(\'退出聊天室 \' + roomid)\n                            _this.messageUpdate("RC:VRLRefreshMsg", {\n                                name: "RCAudienceLeaveRoom",\n                                content: _this.userId,\n                            });\n                        }\n                    })];\n            });\n        });\n    };\n    //设置麦位信息\n    IM.prototype.seatInfoUpdate = function (key, value) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                //console.log(key);\n                return [2 /*return*/, this.chatRoom.forceSetChatRoomEntry(this.roomId, {\n                        key: key,\n                        value: JSON.stringify(value),\n                        notificationExtra: \'extra\',\n                        isAutoDelete: false,\n                        isSendNotification: false,\n                    }).then(function () {\n                        return \'设置聊天室属性成功!\';\n                    }).catch(function (err) {\n                        return \'设置聊天室属性失败:\' + err;\n                    })];\n            });\n        });\n    };\n    //排麦消息设置\n    IM.prototype.RequestseatInfoUpdate = function (key, value) {\n        //console.log(key);\n        return this.chatRoom.forceSetChatRoomEntry(this.roomId, {\n            key: key,\n            value: value,\n            isAutoDelete: true,\n            type: 1,\n            isSendNotification: false,\n        }).then(function () {\n            return \'排麦操作成功!\';\n        }).catch(function (err) {\n            return \'排麦操作失败:\' + err;\n        });\n    };\n    //删除麦位信息\n    IM.prototype.seatInfoRemove = function (key) {\n        return this.chatRoom.forceRemoveChatRoomEntry(this.roomId, {\n            key: key,\n            isSendNotification: false,\n        });\n    };\n    return IM;\n}(_structure_modules__WEBPACK_IMPORTED_MODULE_0__.default));\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (IM);\n\n\n//# sourceURL=webpack://@rongcloud/rcvoiceroomlib-v1/./src/modules/im/index.ts?')},"./src/modules/rtc/index.ts":
/*!**********************************!*\
  !*** ./src/modules/rtc/index.ts ***!
  \**********************************/(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _structure_modules__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../structure/modules */ "./src/structure/modules.ts");\n/* harmony import */ var _rongcloud_plugin_rtc__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @rongcloud/plugin-rtc */ "./node_modules/@rongcloud/plugin-rtc/dist/index.esm.js");\n/* harmony import */ var _rongcloud_engine__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @rongcloud/engine */ "./node_modules/@rongcloud/engine/dist/index.esm.js");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== "function" && b !== null)\n            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError("Generator is already executing.");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __spreadArray = (undefined && undefined.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\n\n// import { installer, RCRTCCode, RCLivingType } from \'@rongcloud/plugin-rtc\'\n\n\nvar RTC = /** @class */ (function (_super) {\n    __extends(RTC, _super);\n    // roomType: string;\n    // videoNode: any;\n    function RTC() {\n        var _this = _super.call(this) || this;\n        _this.states = 0; //0初始化未完成 1就绪 2正在初始化  9浏览器不支持\n        _this.isAnchor = false; //身份标识 是否主播\n        _this.audioTrack = null;\n        _this.isDisable = false;\n        _this.isMuteOther = false;\n        _this.isMuteOwner = false;\n        return _this;\n        // this.init(item);\n    }\n    RTC.prototype.init = function (item) {\n        /*初始化参数请参考下方参数说明*/\n        var im = item.im;\n        // console.log(\'item.rtcLib\', item.rtcLib);\n        if (item.rtcLib) {\n            this.RTCLib = item.rtcLib;\n        }\n        else {\n            this.RTCLib = _rongcloud_plugin_rtc__WEBPACK_IMPORTED_MODULE_1__;\n        }\n        var rtcClient = im.installPlugin(this.RTCLib.installer, {});\n        this.body = rtcClient;\n        console.log(\'rtc初始化完成\', rtcClient);\n        if (!item.rtcLib) {\n            console.log(\'内部各SDK版本\', _rongcloud_engine__WEBPACK_IMPORTED_MODULE_2__.VersionManage.getInfo());\n        }\n        this.emit("ready");\n    };\n    RTC.prototype.joinRoom = function (roomid) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                // console.log("加入rtcroom", roomid);\n                console.log("我是不是主播", this.isAnchor);\n                if (this.isAnchor) {\n                    this.joinLivingRoomAsAnchor(roomid);\n                }\n                else {\n                    this.joinLivingRoomAsAudience(roomid);\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    //主播加入rtcroom\n    RTC.prototype.joinLivingRoomAsAnchor = function (roomid) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, room, RTCTracks, MCUTracks, CDNUris, userIds, code, that, getTrack, publishTrack, remoteTracksObj, obj;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        console.log("主播加入rtcroom", roomid);\n                        return [4 /*yield*/, this.body.joinLivingRoom(roomid, this.RTCLib.RCLivingType.AUDIO)\n                            // 若加入失败，则 room、userIds、tracks 值为 undefined\n                        ];\n                    case 1:\n                        _a = _b.sent(), room = _a.room, RTCTracks = _a.RTCTracks, MCUTracks = _a.MCUTracks, CDNUris = _a.CDNUris, userIds = _a.userIds, code = _a.code;\n                        // 若加入失败，则 room、userIds、tracks 值为 undefined\n                        console.log(code);\n                        console.log(this.RTCLib.RCRTCCode.SUCCESS);\n                        if (code !== this.RTCLib.RCRTCCode.SUCCESS) {\n                            return [2 /*return*/];\n                        }\n                        // this.rtcTracks = RTCTracks\n                        // let object\n                        // if (!this.isMuteOther) {\n                        //     object = room.subscribe(RTCTracks);\n                        // } else {\n                        //     object = room.unsubscribe(RTCTracks);\n                        // }\n                        this.room = room;\n                        that = this;\n                        // 注册房间事件监听器，重复注册时，仅最后一次注册有效\n                        room.registerRoomEventListener({\n                            onRTCPeerConnectionCloseByException: function () {\n                                that.emit(\'onRTCPeerConnectionCloseByException\');\n                            },\n                            /**\n                             * 当本端被剔出房间\n                             * @description 被踢出房间可能是由于服务端超出一定时间未能收到 rtcPing 消息，所以认为己方离线。\n                             * 另一种可能是己方 rtcPing 失败次数超出上限，故而主动断线\n                             * @param byServer\n                             * 当值为 false 时，说明本端 rtcPing 超时\n                             * 当值为 true 时，说明本端收到被踢出房间通知\n                             */\n                            onKickOff: function (byServer) {\n                            },\n                            /**\n                             * 接收到房间信令时回调，用户可通过房间实例的 `messageUpdate(name, content)` 接口发送信令\n                             * @param name 信令名\n                             * @param content 信令内容\n                             * @param senderUserId 发送者 Id\n                             * @param messageUId 消息唯一标识\n                             */\n                            onMessageReceive: function (name, content, senderUserId, messageUId) {\n                                // console.log("eeeeeevent: 主播房间收到消息", name, content, senderUserId, messageUId);\n                            },\n                            /**\n                             * 监听房间属性变更通知\n                             * @param name\n                             * @param content\n                             */\n                            onRoomAttributeChange: function (name, content) {\n                                // console.log("eeeeeevent: 主播房间属性变更");\n                            },\n                            /**\n                             * 房间用户禁用/启用音频\n                             * @param audioTrack RCRemoteAudioTrack 类实例\n                             */\n                            onAudioMuteChange: function (audioTrack) {\n                                //console.log("eeeeeevent: 主播房间 音频 静音");\n                            },\n                            /**\n                             * 房间用户禁用/启用视频\n                             * @param videoTrack RCRemoteVideoTrack 类实例对象\n                             */\n                            onVideoMuteChange: function (videoTrack) {\n                                //console.log("eeeeeevent: 主播房间 视频 静音");\n                            },\n                            /**\n                             * 房间内用户发布资源\n                             * @param tracks 新发布的音轨与视轨数据列表，包含新发布的 RCRemoteAudioTrack 与 RCRemoteVideoTrack 实例\n                             */\n                            onTrackPublish: function (tracks) {\n                                return __awaiter(this, void 0, void 0, function () {\n                                    var obj;\n                                    return __generator(this, function (_a) {\n                                        // 按业务需求选择需要订阅资源，\n                                        that.rtcTracks = tracks;\n                                        console.log(\'tracks+++++\', tracks);\n                                        if (!that.isMuteOther) {\n                                            obj = room.subscribe(tracks);\n                                        }\n                                        else {\n                                            obj = room.unsubscribe(tracks);\n                                        }\n                                        return [2 /*return*/];\n                                    });\n                                });\n                            },\n                            /**\n                             * 房间用户取消发布资源\n                             * @param tracks 被取消发布的音轨与视轨数据列表\n                             * @description 当资源被取消发布时，SDK 内部会取消对相关资源的订阅，业务层仅需处理 UI 业务\n                             */\n                            onTrackUnpublish: function (tracks) {\n                                //console.log("eeeeeevent: 主播房间取消发布", tracks);\n                            },\n                            /*\n                             * 房间内主播资源发布\n                             * @param track RCRemoteTrack 类实例\n                             * * 触发时机: 主播发布资源后\n                             */\n                            onAnchorTrackPublish: function (tracks) {\n                                // that.rtcTracks = tracks\n                                // let obj\n                                // if (!that.isMuteOther) {\n                                //     obj = room.subscribe(tracks);\n                                // } else {\n                                //     obj = room.unsubscribe(tracks);\n                                // }\n                            },\n                            /*\n                           * 房间内主播资源取消发布\n                           * @param track RCRemoteTrack 类实例\n                           * * 触发时机: 主播取消发布资源后\n                           */\n                            onAnchorTrackUnpublish: function (tracks) {\n                                // console.log(\'onAnchorTrackUnpublish\', tracks);\n                            },\n                            /**\n                             * 订阅的音视频流通道已建立, track 已可以进行播放\n                             * @param track RCRemoteTrack 类实例\n                             */\n                            onTrackReady: function (track) {\n                                console.log(\'tracks+++++====\', track);\n                                that.audioTrack = track;\n                                if (track.isAudioTrack()) {\n                                    // 音轨不需要传递播放控件\n                                    track.play();\n                                }\n                                else {\n                                    // 视轨需要一个 video 标签才可进行播放\n                                    // const element = document.createElement(\'video\')\n                                    // document.body.appendChild(element)\n                                    // track.play(element)\n                                }\n                            },\n                            /**\n                             * 人员加入\n                             * @param userIds 加入的人员 id 列表\n                             */\n                            onUserJoin: function (userIds) {\n                                //console.log("eeeeeevent: 主播房间 用户加入", userIds);\n                            },\n                            /**\n                             * 人员退出\n                             * @param userIds\n                             */\n                            onUserLeave: function (userIds) {\n                                //console.log("eeeeeevent: 主播房间 用户离开", userIds);\n                            },\n                        });\n                        return [4 /*yield*/, this.body.createMicrophoneAudioTrack()\n                            //console.log("track", getTrack.track)\n                        ];\n                    case 2:\n                        getTrack = _b.sent();\n                        //console.log("track", getTrack.track)\n                        this.tracks = getTrack.track;\n                        if (!(this.isDisable || this.isMuteOwner)) return [3 /*break*/, 4];\n                        return [4 /*yield*/, room.unpublish([getTrack.track])];\n                    case 3:\n                        publishTrack = _b.sent();\n                        return [3 /*break*/, 6];\n                    case 4: return [4 /*yield*/, room.publish([getTrack.track])];\n                    case 5:\n                        publishTrack = _b.sent();\n                        _b.label = 6;\n                    case 6:\n                        // 若资源发布失败\n                        if (publishTrack.code !== this.RTCLib.RCRTCCode.SUCCESS) {\n                            console.log(\'资源发布失败:\', publishTrack.code);\n                        }\n                        else {\n                            // console.log("资源 发布成功");\n                            // const handler = (audioLevelReportList: { track, audioLevel: number }[]) => {\n                            //     // let level: number = 0;\n                            //     for (var i in audioLevelReportList) {\n                            //         // level = audioLevelReportList[i].audioLevel\n                            //         this.emit("audioChenge", audioLevelReportList[i])\n                            //         // console.log("audioreport++++++++++++++++:", audioLevelReportList[i])\n                            //     }\n                            // }\n                            // room.onAudioLevelChange(handler, 1000)\n                            console.log("资源 发布 成功");\n                        }\n                        return [4 /*yield*/, room.getRemoteTracks()];\n                    case 7:\n                        remoteTracksObj = _b.sent();\n                        this.rtcTracks = false;\n                        if (!remoteTracksObj.length) return [3 /*break*/, 11];\n                        if (!this.isMuteOther) return [3 /*break*/, 9];\n                        return [4 /*yield*/, room.unsubscribe(remoteTracksObj)];\n                    case 8:\n                        obj = _b.sent();\n                        return [3 /*break*/, 11];\n                    case 9: return [4 /*yield*/, room.subscribe(remoteTracksObj)];\n                    case 10:\n                        obj = _b.sent();\n                        _b.label = 11;\n                    case 11:\n                        this.emit("joinRoom");\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    //观众加入rtcroom\n    RTC.prototype.joinLivingRoomAsAudience = function (roomid) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, room, RTCTracks, MCUTracks, CDNUris, userIds, code, obj, that;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        console.log("观众加入rtcroom", roomid);\n                        return [4 /*yield*/, this.body.joinLivingRoomAsAudience(roomid, this.RTCLib.RCLivingType.AUDIO)\n                            // 若加入失败，则 room 值为 undefined\n                        ];\n                    case 1:\n                        _a = _b.sent(), room = _a.room, RTCTracks = _a.RTCTracks, MCUTracks = _a.MCUTracks, CDNUris = _a.CDNUris, userIds = _a.userIds, code = _a.code;\n                        // 若加入失败，则 room 值为 undefined\n                        if (code !== this.RTCLib.RCRTCCode.SUCCESS) {\n                            // console.log(\'join room as audience failed:\', code)\n                            return [2 /*return*/];\n                        }\n                        this.room = room;\n                        this.tracks = MCUTracks;\n                        // const MCUTracks = room.getRemoteMCUTracks();\n                        if (MCUTracks.length != 0) {\n                            obj = void 0;\n                            this.rtcTracks = MCUTracks;\n                            if (this.isMuteOther) {\n                                obj = room.unsubscribe(MCUTracks);\n                            }\n                            else {\n                                obj = room.subscribe(MCUTracks);\n                            }\n                        }\n                        that = this;\n                        room.registerRoomEventListener({\n                            /**\n                             * 主播加入\n                             * @param userIds 加入的主播 id 列表\n                             */\n                            onAnchorJoin: function (userIds) {\n                                //console.log("观众房间监听");\n                                //console.log("主播加入", userIds)\n                            },\n                            /**\n                             * 主播离开\n                             * @param userIds 离开的主播 id 列表\n                             */\n                            onAnchorLeave: function (userIds) {\n                            },\n                            /*\n                             * 房间内直播合流资源发布\n                             * @param track RCRemoteTrack 类实例\n                             * * 房间类型以第一个加入房间用户设置的直播类型为准\n                             * * 房间直播类型为 RCLivingType.AUDIO_VIDEO ，tracks 包含 RCRemoteAudioTrack 与 RCRemoteVideoTrack 实例\n                             * * 直播类型为 RCLivingType.AUDIO ， tracks 仅包含 RCRemoteAudioTrack 实例\n                             */\n                            onTrackPublish: function (tracks) {\n                                that.rtcTracks = tracks;\n                                var obj;\n                                if (that.isMuteOther) {\n                                    obj = room.unsubscribe(tracks);\n                                }\n                                else {\n                                    obj = room.subscribe(tracks);\n                                }\n                            },\n                            /*\n                             * 房间内直播合流资源取消发布\n                             * @param track RCRemoteTrack 类实例\n                             * * 触发时机: 全部主播退出房间（因资源为多个主播发布的合流资源，单个主播取消发布不会触发）\n                             */\n                            onTrackUnpublish: function (tracks) {\n                            },\n                            onTrackReady: function (track) {\n                                that.audioTrack = track;\n                                // 订阅的音视频轨道已连接，可以根据业务需求选择性播放\n                                if (track.isAudioTrack()) {\n                                    // 音频播放无需传递组件\n                                    track.play();\n                                }\n                                else {\n                                    // 此处的 videoNode 为 <video> 标签元素实例\n                                    //track.play(videoNode)\n                                }\n                            }\n                        });\n                        // const handler = (audioLevelReportList: { track, audioLevel: number }[]) => {\n                        //     // let level: number = 0;\n                        //     for (var i in audioLevelReportList) {\n                        //         // level = audioLevelReportList[i].audioLevel\n                        //         this.emit("audioChenge", audioLevelReportList[i])\n                        //     }\n                        // }\n                        // room.onAudioLevelChange(handler, 1000)\n                        this.emit("joinRoom");\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    //离开rtc房间\n    RTC.prototype.leaveRoom = function (roomid) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                if (roomid && roomid != \'\') {\n                    if (this.isAnchor) { //在麦位退出房间或下麦\n                        return [2 /*return*/, this.body.leaveRoom(this.room)];\n                    }\n                    else {\n                        return [2 /*return*/, this.body.leaveLivingRoomAsAudience(this.room)];\n                    }\n                }\n                else {\n                    console.log(\'roomid 错误\');\n                    return [2 /*return*/];\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    //闭麦\n    RTC.prototype.mute = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var code;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!this.tracks || this.tracks.length == 0)\n                            return [2 /*return*/];\n                        console.log(\'this.room\', this.room);\n                        if (!this.room) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.room.unpublish([this.tracks])];\n                    case 1:\n                        code = (_a.sent()).code;\n                        console.log(\'取消发布\', code);\n                        return [3 /*break*/, 3];\n                    case 2:\n                        console.log(\'this.room\', this.room);\n                        _a.label = 3;\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    //开麦\n    RTC.prototype.unmute = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var code;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        // console.log(this.tracks);\n                        if (!this.tracks || this.tracks.length == 0)\n                            return [2 /*return*/];\n                        return [4 /*yield*/, this.room.publish([this.tracks])\n                            // // 若资源发布失败\n                        ];\n                    case 1:\n                        code = (_a.sent()).code;\n                        // // 若资源发布失败\n                        if (code !== this.RTCLib.RCRTCCode.SUCCESS) {\n                            console.log(\'资源发布失败:\', code);\n                        }\n                        else {\n                            console.log("资源发布成功");\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    //上麦\n    RTC.prototype.enterSeat = function (index) {\n        return __awaiter(this, void 0, void 0, function () {\n            var id, that;\n            return __generator(this, function (_a) {\n                this.currentSeat = index;\n                if (this.isAnchor) {\n                    // console.log("用户已经在麦上");\n                    return [2 /*return*/];\n                }\n                id = this.room.getRoomId();\n                that = this;\n                return [2 /*return*/, this.leaveRoom(id).then(function () {\n                        that.isAnchor = true;\n                        return that.joinLivingRoomAsAnchor(id);\n                    })];\n            });\n        });\n    };\n    //下麦\n    RTC.prototype.leaveSeat = function (item) {\n        return __awaiter(this, void 0, void 0, function () {\n            var id, that;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!this.isAnchor) {\n                            console.log("已经是观众无法下麦");\n                            return [2 /*return*/];\n                        }\n                        if (this.tracks) {\n                            this.tracks.destroy();\n                        }\n                        return [4 /*yield*/, this.stopCreateTrack()];\n                    case 1:\n                        _a.sent();\n                        return [4 /*yield*/, this.room.getRoomId()];\n                    case 2:\n                        id = _a.sent();\n                        if (item) {\n                            return [2 /*return*/, this.leaveRoom(id)];\n                        }\n                        that = this;\n                        return [2 /*return*/, this.leaveRoom(id).then(function () { return __awaiter(_this, void 0, void 0, function () {\n                                return __generator(this, function (_a) {\n                                    // console.log(\'this.leaveRoom(id)\');\n                                    that.isAnchor = false;\n                                    return [2 /*return*/, that.joinLivingRoomAsAudience(id)];\n                                });\n                            }); })];\n                }\n            });\n        });\n    };\n    //自定义音频流发布\n    RTC.prototype.createTrack = function (item) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, code, tracks, re;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (!this.isAnchor) {\n                            console.log(\'非主播不能发布自定义音频流\');\n                            return [2 /*return*/];\n                        }\n                        return [4 /*yield*/, this.body.createLocalFileTracks(\'tag\', // track 标识\n                            item, // 网络资源 url 地址或者file 实例\n                            {\n                                withoutAudio: false,\n                                withoutVideo: true, // 当值为 true 时将不产生视轨，默认为 false\n                            })];\n                    case 1:\n                        _a = _b.sent(), code = _a.code, tracks = _a.tracks;\n                        console.log(\'createLocalFileTracks.code\', code);\n                        // console.log(\'createLocalFileTracks.tracks\', tracks,);\n                        this.musicTracks = tracks;\n                        if (!this.isDisable) return [3 /*break*/, 3];\n                        return [4 /*yield*/, this.room.publish(__spreadArray([], tracks, true))];\n                    case 2:\n                        re = _b.sent();\n                        return [3 /*break*/, 5];\n                    case 3: return [4 /*yield*/, this.room.publish(__spreadArray(__spreadArray([], tracks, true), [this.tracks], false))];\n                    case 4:\n                        re = _b.sent();\n                        _b.label = 5;\n                    case 5:\n                        console.log(\'发布自定义音频流发布\', re.code);\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    RTC.prototype.stopCreateTrack = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var code;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!this.isAnchor) {\n                            console.log(\'非主播不能操作自定义音频流\');\n                            return [2 /*return*/];\n                        }\n                        if (!this.musicTracks) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.room.unpublish(this.musicTracks)];\n                    case 1:\n                        code = (_a.sent()).code;\n                        this.musicTracks[0].destroy();\n                        console.log(\'停止发布自定义音频流\', code);\n                        _a.label = 2;\n                    case 2: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    //兼容mac火狐不能自动播放问题\n    RTC.prototype.preview = function (videoNode) {\n        return __awaiter(this, void 0, void 0, function () {\n            var o;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.body.createCameraVideoTrack(\'RongCloudRTC\')];\n                    case 1:\n                        o = _a.sent();\n                        return [2 /*return*/, o.track.play(videoNode)];\n                }\n            });\n        });\n    };\n    //兼容mac火狐不能自动播放问题\n    RTC.prototype.audioPlay = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.audioTrack.play()];\n            });\n        });\n    };\n    return RTC;\n}(_structure_modules__WEBPACK_IMPORTED_MODULE_0__.default));\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (RTC);\n\n\n//# sourceURL=webpack://@rongcloud/rcvoiceroomlib-v1/./src/modules/rtc/index.ts?')},"./src/structure/modules.ts":
/*!**********************************!*\
  !*** ./src/structure/modules.ts ***!
  \**********************************/(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! events */ "./node_modules/events/events.js");\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(events__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _loger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../loger */ "./src/loger.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== "function" && b !== null)\n            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\nvar Module = /** @class */ (function (_super) {\n    __extends(Module, _super);\n    function Module() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Module.prototype.init = function (d) {\n        if (d === void 0) { d = null; }\n        _loger__WEBPACK_IMPORTED_MODULE_1__.default.log("default init: " + this.name + ":" + this.name, d);\n    };\n    Module.prototype.input = function (d) {\n        _loger__WEBPACK_IMPORTED_MODULE_1__.default.log("default input: " + this.name + ":" + this.name, d);\n    };\n    Module.prototype.start = function () {\n        _loger__WEBPACK_IMPORTED_MODULE_1__.default.log("default start: " + this.name);\n    };\n    Module.prototype.stop = function () {\n        _loger__WEBPACK_IMPORTED_MODULE_1__.default.log("default stop: " + this.name);\n    };\n    Module.prototype.cancel = function () {\n        _loger__WEBPACK_IMPORTED_MODULE_1__.default.log("default cancel" + this.name);\n    };\n    Module.prototype.reboot = function () {\n        var _this = this;\n        switch (this.states) {\n            case 1: //就绪.\n                _loger__WEBPACK_IMPORTED_MODULE_1__.default.log("no Err please check code.");\n                break;\n            case 2: //占用中.\n                _loger__WEBPACK_IMPORTED_MODULE_1__.default.log(this.name + \' is on using. try reboot.\');\n                setTimeout(function () {\n                    _this.cancel();\n                }, 0);\n            default:\n                _loger__WEBPACK_IMPORTED_MODULE_1__.default.log("unknowStates at rebooting." + this.name);\n                break;\n        }\n    };\n    Module.prototype.reinit = function () {\n        var _this = this;\n        console.log("reiniting");\n        var initpro = new Promise(function (resolve, reject) {\n            _this.init(1);\n        });\n        initpro.then(function (resolve) {\n            var o = {\n                from: _this.name,\n                to: "main",\n                data: "reboot",\n            };\n            _this.emit("output", o);\n            console.log("重启成功!");\n        });\n        initpro.catch(function (e) {\n            _loger__WEBPACK_IMPORTED_MODULE_1__.default.error(e, "5", _this, "01", "重启失败放弃吧少年");\n        });\n    };\n    return Module;\n}(events__WEBPACK_IMPORTED_MODULE_0__.EventEmitter));\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Module);\n\n\n//# sourceURL=webpack://@rongcloud/rcvoiceroomlib-v1/./src/structure/modules.ts?')}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}(()=>{__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return __webpack_require__.d(t,{a:t}),t}})(),(()=>{__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}})(),(()=>{__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{__webpack_require__.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})();var __webpack_exports__=__webpack_require__("./src/index.ts");return __webpack_exports__})()}))},d397:function(e,t,n){"use strict";function i(e){return void 0!==e&&null!==e}function r(e){var t=/([(\uAC00-\uD7AF)|(\u3130-\u318F)])+/gi;return t.test(e)}t.__esModule=!0,t.isDef=i,t.isKorean=r},d3b7:function(e,t,n){var i=n("00ee"),r=n("6eeb"),o=n("b041");i||r(Object.prototype,"toString",o,{unsafe:!0})},d44e:function(e,t,n){var i=n("9bf2").f,r=n("1a2d"),o=n("b622"),s=o("toStringTag");e.exports=function(e,t,n){e&&!r(e=n?e:e.prototype,s)&&i(e,s,{configurable:!0,value:t})}},d4af:function(e,t,n){"use strict";var i=n("8eb7"),r=n("7b3e"),o=10,s=40,a=800;function c(e){var t=0,n=0,i=0,r=0;return"detail"in e&&(n=e.detail),"wheelDelta"in e&&(n=-e.wheelDelta/120),"wheelDeltaY"in e&&(n=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=n,n=0),i=t*o,r=n*o,"deltaY"in e&&(r=e.deltaY),"deltaX"in e&&(i=e.deltaX),(i||r)&&e.deltaMode&&(1==e.deltaMode?(i*=s,r*=s):(i*=a,r*=a)),i&&!t&&(t=i<1?-1:1),r&&!n&&(n=r<1?-1:1),{spinX:t,spinY:n,pixelX:i,pixelY:r}}c.getEventType=function(){return i.firefox()?"DOMMouseScroll":r("wheel")?"wheel":"mousewheel"},e.exports=c},d4c3:function(e,t,n){var i=n("342f"),r=n("da84");e.exports=/ipad|iphone|ipod/i.test(i)&&void 0!==r.Pebble},d784:function(e,t,n){"use strict";n("ac1f");var i=n("e330"),r=n("6eeb"),o=n("9263"),s=n("d039"),a=n("b622"),c=n("9112"),l=a("species"),u=RegExp.prototype;e.exports=function(e,t,n,d){var h=a(e),p=!s((function(){var t={};return t[h]=function(){return 7},7!=""[e](t)})),f=p&&!s((function(){var t=!1,n=/a/;return"split"===e&&(n={},n.constructor={},n.constructor[l]=function(){return n},n.flags="",n[h]=/./[h]),n.exec=function(){return t=!0,null},n[h](""),!t}));if(!p||!f||n){var g=i(/./[h]),m=t(h,""[e],(function(e,t,n,r,s){var a=i(e),c=t.exec;return c===o||c===u.exec?p&&!s?{done:!0,value:g(t,n,r)}:{done:!0,value:a(n,t,r)}:{done:!1}}));r(String.prototype,e,m[0]),r(u,h,m[1])}d&&c(u[h],"sham",!0)}},d7d1:function(e,t,n){"use strict";var i;(function(r){var o={},s=/d{1,4}|M{1,4}|yy(?:yy)?|S{1,3}|Do|ZZ|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,a="\\d\\d?",c="\\d{3}",l="\\d{4}",u="[^\\s]+",d=/\[([^]*?)\]/gm,h=function(){};function p(e){return e.replace(/[|\\{()[^$+*?.-]/g,"\\$&")}function f(e,t){for(var n=[],i=0,r=e.length;i<r;i++)n.push(e[i].substr(0,t));return n}function g(e){return function(t,n,i){var r=i[e].indexOf(n.charAt(0).toUpperCase()+n.substr(1).toLowerCase());~r&&(t.month=r)}}function m(e,t){e=String(e),t=t||2;while(e.length<t)e="0"+e;return e}var _=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],v=["January","February","March","April","May","June","July","August","September","October","November","December"],y=f(v,3),C=f(_,3);o.i18n={dayNamesShort:C,dayNames:_,monthNamesShort:y,monthNames:v,amPm:["am","pm"],DoFn:function(e){return e+["th","st","nd","rd"][e%10>3?0:(e-e%10!==10)*e%10]}};var E={D:function(e){return e.getDay()},DD:function(e){return m(e.getDay())},Do:function(e,t){return t.DoFn(e.getDate())},d:function(e){return e.getDate()},dd:function(e){return m(e.getDate())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return e.getMonth()+1},MM:function(e){return m(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},yy:function(e){return m(String(e.getFullYear()),4).substr(2)},yyyy:function(e){return m(e.getFullYear(),4)},h:function(e){return e.getHours()%12||12},hh:function(e){return m(e.getHours()%12||12)},H:function(e){return e.getHours()},HH:function(e){return m(e.getHours())},m:function(e){return e.getMinutes()},mm:function(e){return m(e.getMinutes())},s:function(e){return e.getSeconds()},ss:function(e){return m(e.getSeconds())},S:function(e){return Math.round(e.getMilliseconds()/100)},SS:function(e){return m(Math.round(e.getMilliseconds()/10),2)},SSS:function(e){return m(e.getMilliseconds(),3)},a:function(e,t){return e.getHours()<12?t.amPm[0]:t.amPm[1]},A:function(e,t){return e.getHours()<12?t.amPm[0].toUpperCase():t.amPm[1].toUpperCase()},ZZ:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+m(100*Math.floor(Math.abs(t)/60)+Math.abs(t)%60,4)}},b={d:[a,function(e,t){e.day=t}],Do:[a+u,function(e,t){e.day=parseInt(t,10)}],M:[a,function(e,t){e.month=t-1}],yy:[a,function(e,t){var n=new Date,i=+(""+n.getFullYear()).substr(0,2);e.year=""+(t>68?i-1:i)+t}],h:[a,function(e,t){e.hour=t}],m:[a,function(e,t){e.minute=t}],s:[a,function(e,t){e.second=t}],yyyy:[l,function(e,t){e.year=t}],S:["\\d",function(e,t){e.millisecond=100*t}],SS:["\\d{2}",function(e,t){e.millisecond=10*t}],SSS:[c,function(e,t){e.millisecond=t}],D:[a,h],ddd:[u,h],MMM:[u,g("monthNamesShort")],MMMM:[u,g("monthNames")],a:[u,function(e,t,n){var i=t.toLowerCase();i===n.amPm[0]?e.isPm=!1:i===n.amPm[1]&&(e.isPm=!0)}],ZZ:["[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z",function(e,t){var n,i=(t+"").match(/([+-]|\d\d)/gi);i&&(n=60*i[1]+parseInt(i[2],10),e.timezoneOffset="+"===i[0]?n:-n)}]};b.dd=b.d,b.dddd=b.ddd,b.DD=b.D,b.mm=b.m,b.hh=b.H=b.HH=b.h,b.MM=b.M,b.ss=b.s,b.A=b.a,o.masks={default:"ddd MMM dd yyyy HH:mm:ss",shortDate:"M/D/yy",mediumDate:"MMM d, yyyy",longDate:"MMMM d, yyyy",fullDate:"dddd, MMMM d, yyyy",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},o.format=function(e,t,n){var i=n||o.i18n;if("number"===typeof e&&(e=new Date(e)),"[object Date]"!==Object.prototype.toString.call(e)||isNaN(e.getTime()))throw new Error("Invalid Date in fecha.format");t=o.masks[t]||t||o.masks["default"];var r=[];return t=t.replace(d,(function(e,t){return r.push(t),"@@@"})),t=t.replace(s,(function(t){return t in E?E[t](e,i):t.slice(1,t.length-1)})),t.replace(/@@@/g,(function(){return r.shift()}))},o.parse=function(e,t,n){var i=n||o.i18n;if("string"!==typeof t)throw new Error("Invalid format in fecha.parse");if(t=o.masks[t]||t,e.length>1e3)return null;var r={},a=[],c=[];t=t.replace(d,(function(e,t){return c.push(t),"@@@"}));var l=p(t).replace(s,(function(e){if(b[e]){var t=b[e];return a.push(t[1]),"("+t[0]+")"}return e}));l=l.replace(/@@@/g,(function(){return c.shift()}));var u=e.match(new RegExp(l,"i"));if(!u)return null;for(var h=1;h<u.length;h++)a[h-1](r,u[h],i);var f,g=new Date;return!0===r.isPm&&null!=r.hour&&12!==+r.hour?r.hour=+r.hour+12:!1===r.isPm&&12===+r.hour&&(r.hour=0),null!=r.timezoneOffset?(r.minute=+(r.minute||0)-+r.timezoneOffset,f=new Date(Date.UTC(r.year||g.getFullYear(),r.month||0,r.day||1,r.hour||0,r.minute||0,r.second||0,r.millisecond||0))):f=new Date(r.year||g.getFullYear(),r.month||0,r.day||1,r.hour||0,r.minute||0,r.second||0,r.millisecond||0),f},e.exports?e.exports=o:(i=function(){return o}.call(t,n,t,e),void 0===i||(e.exports=i))})()},d925:function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},d940:function(e,t,n){"use strict";t.__esModule=!0,t.validateRangeInOneMonth=t.extractTimeFormat=t.extractDateFormat=t.nextYear=t.prevYear=t.nextMonth=t.prevMonth=t.changeYearMonthAndClampDate=t.timeWithinRange=t.limitTimeRange=t.clearMilliseconds=t.clearTime=t.modifyWithTimeString=t.modifyTime=t.modifyDate=t.range=t.getRangeMinutes=t.getMonthDays=t.getPrevMonthLastDays=t.getRangeHours=t.getWeekNumber=t.getStartDateOfMonth=t.nextDate=t.prevDate=t.getFirstDayOfMonth=t.getDayCountOfYear=t.getDayCountOfMonth=t.parseDate=t.formatDate=t.isDateObject=t.isDate=t.toDate=t.getI18nSettings=void 0;var i=n("d7d1"),r=s(i),o=n("4897");function s(e){return e&&e.__esModule?e:{default:e}}var a=["sun","mon","tue","wed","thu","fri","sat"],c=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],l=function(e,t){for(var n=[],i=e;i<=t;i++)n.push(i);return n},u=t.getI18nSettings=function(){return{dayNamesShort:a.map((function(e){return(0,o.t)("el.datepicker.weeks."+e)})),dayNames:a.map((function(e){return(0,o.t)("el.datepicker.weeks."+e)})),monthNamesShort:c.map((function(e){return(0,o.t)("el.datepicker.months."+e)})),monthNames:c.map((function(e,t){return(0,o.t)("el.datepicker.month"+(t+1))})),amPm:["am","pm"]}},d=t.toDate=function(e){return h(e)?new Date(e):null},h=t.isDate=function(e){return null!==e&&void 0!==e&&(!isNaN(new Date(e).getTime())&&!Array.isArray(e))},p=(t.isDateObject=function(e){return e instanceof Date},t.formatDate=function(e,t){return e=d(e),e?r.default.format(e,t||"yyyy-MM-dd",u()):""},t.parseDate=function(e,t){return r.default.parse(e,t||"yyyy-MM-dd",u())}),f=t.getDayCountOfMonth=function(e,t){return 3===t||5===t||8===t||10===t?30:1===t?e%4===0&&e%100!==0||e%400===0?29:28:31},g=(t.getDayCountOfYear=function(e){var t=e%400===0||e%100!==0&&e%4===0;return t?366:365},t.getFirstDayOfMonth=function(e){var t=new Date(e.getTime());return t.setDate(1),t.getDay()},t.prevDate=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new Date(e.getFullYear(),e.getMonth(),e.getDate()-t)});t.nextDate=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new Date(e.getFullYear(),e.getMonth(),e.getDate()+t)},t.getStartDateOfMonth=function(e,t){var n=new Date(e,t,1),i=n.getDay();return g(n,0===i?7:i)},t.getWeekNumber=function(e){if(!h(e))return null;var t=new Date(e.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var n=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-n.getTime())/864e5-3+(n.getDay()+6)%7)/7)},t.getRangeHours=function(e){var t=[],n=[];if((e||[]).forEach((function(e){var t=e.map((function(e){return e.getHours()}));n=n.concat(l(t[0],t[1]))})),n.length)for(var i=0;i<24;i++)t[i]=-1===n.indexOf(i);else for(var r=0;r<24;r++)t[r]=!1;return t},t.getPrevMonthLastDays=function(e,t){if(t<=0)return[];var n=new Date(e.getTime());n.setDate(0);var i=n.getDate();return _(t).map((function(e,n){return i-(t-n-1)}))},t.getMonthDays=function(e){var t=new Date(e.getFullYear(),e.getMonth()+1,0),n=t.getDate();return _(n).map((function(e,t){return t+1}))};function m(e,t,n,i){for(var r=t;r<n;r++)e[r]=i}t.getRangeMinutes=function(e,t){var n=new Array(60);return e.length>0?e.forEach((function(e){var i=e[0],r=e[1],o=i.getHours(),s=i.getMinutes(),a=r.getHours(),c=r.getMinutes();o===t&&a!==t?m(n,s,60,!0):o===t&&a===t?m(n,s,c+1,!0):o!==t&&a===t?m(n,0,c+1,!0):o<t&&a>t&&m(n,0,60,!0)})):m(n,0,60,!0),n};var _=t.range=function(e){return Array.apply(null,{length:e}).map((function(e,t){return t}))},v=t.modifyDate=function(e,t,n,i){return new Date(t,n,i,e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())},y=t.modifyTime=function(e,t,n,i){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),t,n,i,e.getMilliseconds())},C=(t.modifyWithTimeString=function(e,t){return null!=e&&t?(t=p(t,"HH:mm:ss"),y(e,t.getHours(),t.getMinutes(),t.getSeconds())):e},t.clearTime=function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())},t.clearMilliseconds=function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),0)},t.limitTimeRange=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"HH:mm:ss";if(0===t.length)return e;var i=function(e){return r.default.parse(r.default.format(e,n),n)},o=i(e),s=t.map((function(e){return e.map(i)}));if(s.some((function(e){return o>=e[0]&&o<=e[1]})))return e;var a=s[0][0],c=s[0][0];s.forEach((function(e){a=new Date(Math.min(e[0],a)),c=new Date(Math.max(e[1],a))}));var l=o<a?a:c;return v(l,e.getFullYear(),e.getMonth(),e.getDate())}),E=(t.timeWithinRange=function(e,t,n){var i=C(e,t,n);return i.getTime()===e.getTime()},t.changeYearMonthAndClampDate=function(e,t,n){var i=Math.min(e.getDate(),f(t,n));return v(e,t,n,i)});t.prevMonth=function(e){var t=e.getFullYear(),n=e.getMonth();return 0===n?E(e,t-1,11):E(e,t,n-1)},t.nextMonth=function(e){var t=e.getFullYear(),n=e.getMonth();return 11===n?E(e,t+1,0):E(e,t,n+1)},t.prevYear=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e.getFullYear(),i=e.getMonth();return E(e,n-t,i)},t.nextYear=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e.getFullYear(),i=e.getMonth();return E(e,n+t,i)},t.extractDateFormat=function(e){return e.replace(/\W?m{1,2}|\W?ZZ/g,"").replace(/\W?h{1,2}|\W?s{1,3}|\W?a/gi,"").trim()},t.extractTimeFormat=function(e){return e.replace(/\W?D{1,2}|\W?Do|\W?d{1,4}|\W?M{1,4}|\W?y{2,4}/g,"").trim()},t.validateRangeInOneMonth=function(e,t){return e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}},d9b5:function(e,t,n){var i=n("da84"),r=n("d066"),o=n("1626"),s=n("3a9b"),a=n("fdbf"),c=i.Object;e.exports=a?function(e){return"symbol"==typeof e}:function(e){var t=r("Symbol");return o(t)&&s(t.prototype,c(e))}},da84:function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||function(){return this}()||Function("return this")()}).call(this,n("c8ba"))},dbb4:function(e,t,n){var i=n("23e7"),r=n("83ab"),o=n("56ef"),s=n("fc6a"),a=n("06cf"),c=n("8418");i({target:"Object",stat:!0,sham:!r},{getOwnPropertyDescriptors:function(e){var t,n,i=s(e),r=a.f,l=o(i),u={},d=0;while(l.length>d)n=r(i,t=l[d++]),void 0!==n&&c(u,t,n);return u}})},dc4a:function(e,t,n){var i=n("59ed");e.exports=function(e,t){var n=e[t];return null==n?void 0:i(n)}},dcdc:function(e,t,n){e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=120)}({0:function(e,t,n){"use strict";function i(e,t,n,i,r,o,s,a){var c,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),i&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=c):r&&(c=a?function(){r.call(this,this.$root.$options.shadowRoot)}:r),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}n.d(t,"a",(function(){return i}))},120:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"el-checkbox",class:[e.border&&e.checkboxSize?"el-checkbox--"+e.checkboxSize:"",{"is-disabled":e.isDisabled},{"is-bordered":e.border},{"is-checked":e.isChecked}],attrs:{id:e.id}},[n("span",{staticClass:"el-checkbox__input",class:{"is-disabled":e.isDisabled,"is-checked":e.isChecked,"is-indeterminate":e.indeterminate,"is-focus":e.focus},attrs:{tabindex:!!e.indeterminate&&0,role:!!e.indeterminate&&"checkbox","aria-checked":!!e.indeterminate&&"mixed"}},[n("span",{staticClass:"el-checkbox__inner"}),e.trueLabel||e.falseLabel?n("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],staticClass:"el-checkbox__original",attrs:{type:"checkbox","aria-hidden":e.indeterminate?"true":"false",name:e.name,disabled:e.isDisabled,"true-value":e.trueLabel,"false-value":e.falseLabel},domProps:{checked:Array.isArray(e.model)?e._i(e.model,null)>-1:e._q(e.model,e.trueLabel)},on:{change:[function(t){var n=e.model,i=t.target,r=i.checked?e.trueLabel:e.falseLabel;if(Array.isArray(n)){var o=null,s=e._i(n,o);i.checked?s<0&&(e.model=n.concat([o])):s>-1&&(e.model=n.slice(0,s).concat(n.slice(s+1)))}else e.model=r},e.handleChange],focus:function(t){e.focus=!0},blur:function(t){e.focus=!1}}}):n("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],staticClass:"el-checkbox__original",attrs:{type:"checkbox","aria-hidden":e.indeterminate?"true":"false",disabled:e.isDisabled,name:e.name},domProps:{value:e.label,checked:Array.isArray(e.model)?e._i(e.model,e.label)>-1:e.model},on:{change:[function(t){var n=e.model,i=t.target,r=!!i.checked;if(Array.isArray(n)){var o=e.label,s=e._i(n,o);i.checked?s<0&&(e.model=n.concat([o])):s>-1&&(e.model=n.slice(0,s).concat(n.slice(s+1)))}else e.model=r},e.handleChange],focus:function(t){e.focus=!0},blur:function(t){e.focus=!1}}})]),e.$slots.default||e.label?n("span",{staticClass:"el-checkbox__label"},[e._t("default"),e.$slots.default?e._e():[e._v(e._s(e.label))]],2):e._e()])},r=[];i._withStripped=!0;var o=n(4),s=n.n(o),a={name:"ElCheckbox",mixins:[s.a],inject:{elForm:{default:""},elFormItem:{default:""}},componentName:"ElCheckbox",data:function(){return{selfModel:!1,focus:!1,isLimitExceeded:!1}},computed:{model:{get:function(){return this.isGroup?this.store:void 0!==this.value?this.value:this.selfModel},set:function(e){this.isGroup?(this.isLimitExceeded=!1,void 0!==this._checkboxGroup.min&&e.length<this._checkboxGroup.min&&(this.isLimitExceeded=!0),void 0!==this._checkboxGroup.max&&e.length>this._checkboxGroup.max&&(this.isLimitExceeded=!0),!1===this.isLimitExceeded&&this.dispatch("ElCheckboxGroup","input",[e])):(this.$emit("input",e),this.selfModel=e)}},isChecked:function(){return"[object Boolean]"==={}.toString.call(this.model)?this.model:Array.isArray(this.model)?this.model.indexOf(this.label)>-1:null!==this.model&&void 0!==this.model?this.model===this.trueLabel:void 0},isGroup:function(){var e=this.$parent;while(e){if("ElCheckboxGroup"===e.$options.componentName)return this._checkboxGroup=e,!0;e=e.$parent}return!1},store:function(){return this._checkboxGroup?this._checkboxGroup.value:this.value},isLimitDisabled:function(){var e=this._checkboxGroup,t=e.max,n=e.min;return!(!t&&!n)&&this.model.length>=t&&!this.isChecked||this.model.length<=n&&this.isChecked},isDisabled:function(){return this.isGroup?this._checkboxGroup.disabled||this.disabled||(this.elForm||{}).disabled||this.isLimitDisabled:this.disabled||(this.elForm||{}).disabled},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},checkboxSize:function(){var e=this.size||this._elFormItemSize||(this.$ELEMENT||{}).size;return this.isGroup&&this._checkboxGroup.checkboxGroupSize||e}},props:{value:{},label:{},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:String,trueLabel:[String,Number],falseLabel:[String,Number],id:String,controls:String,border:Boolean,size:String},methods:{addToStore:function(){Array.isArray(this.model)&&-1===this.model.indexOf(this.label)?this.model.push(this.label):this.model=this.trueLabel||!0},handleChange:function(e){var t=this;if(!this.isLimitExceeded){var n=void 0;n=e.target.checked?void 0===this.trueLabel||this.trueLabel:void 0!==this.falseLabel&&this.falseLabel,this.$emit("change",n,e),this.$nextTick((function(){t.isGroup&&t.dispatch("ElCheckboxGroup","change",[t._checkboxGroup.value])}))}}},created:function(){this.checked&&this.addToStore()},mounted:function(){this.indeterminate&&this.$el.setAttribute("aria-controls",this.controls)},watch:{value:function(e){this.dispatch("ElFormItem","el.form.change",e)}}},c=a,l=n(0),u=Object(l["a"])(c,i,r,!1,null,null,null);u.options.__file="packages/checkbox/src/checkbox.vue";var d=u.exports;d.install=function(e){e.component(d.name,d)};t["default"]=d},4:function(e,t){e.exports=n("d010")}})},ddb0:function(e,t,n){var i=n("da84"),r=n("fdbc"),o=n("785a"),s=n("e260"),a=n("9112"),c=n("b622"),l=c("iterator"),u=c("toStringTag"),d=s.values,h=function(e,t){if(e){if(e[l]!==d)try{a(e,l,d)}catch(i){e[l]=d}if(e[u]||a(e,u,t),r[t])for(var n in s)if(e[n]!==s[n])try{a(e,n,s[n])}catch(i){e[n]=s[n]}}};for(var p in r)h(i[p]&&i[p].prototype,p);h(o,"DOMTokenList")},df75:function(e,t,n){var i=n("ca84"),r=n("7839");e.exports=Object.keys||function(e){return i(e,r)}},df7c:function(e,t,n){(function(e){function n(e,t){for(var n=0,i=e.length-1;i>=0;i--){var r=e[i];"."===r?e.splice(i,1):".."===r?(e.splice(i,1),n++):n&&(e.splice(i,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function i(e){"string"!==typeof e&&(e+="");var t,n=0,i=-1,r=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!r){n=t+1;break}}else-1===i&&(r=!1,i=t+1);return-1===i?"":e.slice(n,i)}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],i=0;i<e.length;i++)t(e[i],i,e)&&n.push(e[i]);return n}t.resolve=function(){for(var t="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var s=o>=0?arguments[o]:e.cwd();if("string"!==typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(t=s+"/"+t,i="/"===s.charAt(0))}return t=n(r(t.split("/"),(function(e){return!!e})),!i).join("/"),(i?"/":"")+t||"."},t.normalize=function(e){var i=t.isAbsolute(e),s="/"===o(e,-1);return e=n(r(e.split("/"),(function(e){return!!e})),!i).join("/"),e||i||(e="."),e&&s&&(e+="/"),(i?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(r(e,(function(e,t){if("string"!==typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,n){function i(e){for(var t=0;t<e.length;t++)if(""!==e[t])break;for(var n=e.length-1;n>=0;n--)if(""!==e[n])break;return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var r=i(e.split("/")),o=i(n.split("/")),s=Math.min(r.length,o.length),a=s,c=0;c<s;c++)if(r[c]!==o[c]){a=c;break}var l=[];for(c=a;c<r.length;c++)l.push("..");return l=l.concat(o.slice(a)),l.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!==typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,i=-1,r=!0,o=e.length-1;o>=1;--o)if(t=e.charCodeAt(o),47===t){if(!r){i=o;break}}else r=!1;return-1===i?n?"/":".":n&&1===i?"/":e.slice(0,i)},t.basename=function(e,t){var n=i(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){"string"!==typeof e&&(e+="");for(var t=-1,n=0,i=-1,r=!0,o=0,s=e.length-1;s>=0;--s){var a=e.charCodeAt(s);if(47!==a)-1===i&&(r=!1,i=s+1),46===a?-1===t?t=s:1!==o&&(o=1):-1!==t&&(o=-1);else if(!r){n=s+1;break}}return-1===t||-1===i||0===o||1===o&&t===i-1&&t===n+1?"":e.slice(t,i)};var o="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n("4362"))},dfe5:function(e,t){},e01a:function(e,t,n){"use strict";var i=n("23e7"),r=n("83ab"),o=n("da84"),s=n("e330"),a=n("1a2d"),c=n("1626"),l=n("3a9b"),u=n("577e"),d=n("9bf2").f,h=n("e893"),p=o.Symbol,f=p&&p.prototype;if(r&&c(p)&&(!("description"in f)||void 0!==p().description)){var g={},m=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:u(arguments[0]),t=l(f,this)?new p(e):void 0===e?p():p(e);return""===e&&(g[t]=!0),t};h(m,p),m.prototype=f,f.constructor=m;var _="Symbol(test)"==String(p("test")),v=s(f.toString),y=s(f.valueOf),C=/^Symbol\((.*)\)[^)]+$/,E=s("".replace),b=s("".slice);d(f,"description",{configurable:!0,get:function(){var e=y(this),t=v(e);if(a(g,e))return"";var n=_?b(t,7,-1):E(t,C,"$1");return""===n?void 0:n}}),i({global:!0,forced:!0},{Symbol:m})}},e163:function(e,t,n){var i=n("da84"),r=n("1a2d"),o=n("1626"),s=n("7b0b"),a=n("f772"),c=n("e177"),l=a("IE_PROTO"),u=i.Object,d=u.prototype;e.exports=c?u.getPrototypeOf:function(e){var t=s(e);if(r(t,l))return t[l];var n=t.constructor;return o(n)&&t instanceof n?n.prototype:t instanceof u?d:null}},e177:function(e,t,n){var i=n("d039");e.exports=!i((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},e198:function(e,t,n){var i=n("ef08"),r=n("5524"),o=n("e444"),s=n("fcd4"),a=n("1a14").f;e.exports=function(e){var t=r.Symbol||(r.Symbol=o?{}:i.Symbol||{});"_"==e.charAt(0)||e in t||a(t,e,{value:s.f(e)})}},e260:function(e,t,n){"use strict";var i=n("fc6a"),r=n("44d2"),o=n("3f8c"),s=n("69f3"),a=n("7dd0"),c="Array Iterator",l=s.set,u=s.getterFor(c);e.exports=a(Array,"Array",(function(e,t){l(this,{type:c,target:i(e),index:0,kind:t})}),(function(){var e=u(this),t=e.target,n=e.kind,i=e.index++;return!t||i>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:i,done:!1}:"values"==n?{value:t[i],done:!1}:{value:[i,t[i]],done:!1}}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},e2cc:function(e,t,n){var i=n("6eeb");e.exports=function(e,t,n){for(var r in t)i(e,r,t[r],n);return e}},e330:function(e,t){var n=Function.prototype,i=n.bind,r=n.call,o=i&&i.bind(r);e.exports=i?function(e){return e&&o(r,e)}:function(e){return e&&function(){return r.apply(e,arguments)}}},e34a:function(e,t,n){var i=n("8b1a")("meta"),r=n("7a41"),o=n("9c0e"),s=n("1a14").f,a=0,c=Object.isExtensible||function(){return!0},l=!n("4b8b")((function(){return c(Object.preventExtensions({}))})),u=function(e){s(e,i,{value:{i:"O"+ ++a,w:{}}})},d=function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,i)){if(!c(e))return"F";if(!t)return"E";u(e)}return e[i].i},h=function(e,t){if(!o(e,i)){if(!c(e))return!0;if(!t)return!1;u(e)}return e[i].w},p=function(e){return l&&f.NEED&&c(e)&&!o(e,i)&&u(e),e},f=e.exports={KEY:i,NEED:!1,fastKey:d,getWeak:h,onFreeze:p}},e439:function(e,t,n){var i=n("23e7"),r=n("d039"),o=n("fc6a"),s=n("06cf").f,a=n("83ab"),c=r((function(){s(1)})),l=!a||c;i({target:"Object",stat:!0,forced:l,sham:!a},{getOwnPropertyDescriptor:function(e,t){return s(o(e),t)}})},e444:function(e,t){e.exports=!0},e450:function(e,t,n){e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=104)}({0:function(e,t,n){"use strict";function i(e,t,n,i,r,o,s,a){var c,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),i&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=c):r&&(c=a?function(){r.call(this,this.$root.$options.shadowRoot)}:r),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}n.d(t,"a",(function(){return i}))},10:function(e,t){e.exports=n("f3ad")},104:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:["el-input-number",e.inputNumberSize?"el-input-number--"+e.inputNumberSize:"",{"is-disabled":e.inputNumberDisabled},{"is-without-controls":!e.controls},{"is-controls-right":e.controlsAtRight}],on:{dragstart:function(e){e.preventDefault()}}},[e.controls?n("span",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:e.decrease,expression:"decrease"}],staticClass:"el-input-number__decrease",class:{"is-disabled":e.minDisabled},attrs:{role:"button"},on:{keydown:function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.decrease(t)}}},[n("i",{class:"el-icon-"+(e.controlsAtRight?"arrow-down":"minus")})]):e._e(),e.controls?n("span",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:e.increase,expression:"increase"}],staticClass:"el-input-number__increase",class:{"is-disabled":e.maxDisabled},attrs:{role:"button"},on:{keydown:function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.increase(t)}}},[n("i",{class:"el-icon-"+(e.controlsAtRight?"arrow-up":"plus")})]):e._e(),n("el-input",{ref:"input",attrs:{value:e.displayValue,placeholder:e.placeholder,disabled:e.inputNumberDisabled,size:e.inputNumberSize,max:e.max,min:e.min,name:e.name,label:e.label},on:{blur:e.handleBlur,focus:e.handleFocus,input:e.handleInput,change:e.handleInputChange},nativeOn:{keydown:[function(t){return!("button"in t)&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:(t.preventDefault(),e.increase(t))},function(t){return!("button"in t)&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.preventDefault(),e.decrease(t))}]}})],1)},r=[];i._withStripped=!0;var o=n(10),s=n.n(o),a=n(22),c=n.n(a),l=n(30),u={name:"ElInputNumber",mixins:[c()("input")],inject:{elForm:{default:""},elFormItem:{default:""}},directives:{repeatClick:l["a"]},components:{ElInput:s.a},props:{step:{type:Number,default:1},stepStrictly:{type:Boolean,default:!1},max:{type:Number,default:1/0},min:{type:Number,default:-1/0},value:{},disabled:Boolean,size:String,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:""},name:String,label:String,placeholder:String,precision:{type:Number,validator:function(e){return e>=0&&e===parseInt(e,10)}}},data:function(){return{currentValue:0,userInput:null}},watch:{value:{immediate:!0,handler:function(e){var t=void 0===e?e:Number(e);if(void 0!==t){if(isNaN(t))return;if(this.stepStrictly){var n=this.getPrecision(this.step),i=Math.pow(10,n);t=Math.round(t/this.step)*i*this.step/i}void 0!==this.precision&&(t=this.toPrecision(t,this.precision))}t>=this.max&&(t=this.max),t<=this.min&&(t=this.min),this.currentValue=t,this.userInput=null,this.$emit("input",t)}}},computed:{minDisabled:function(){return this._decrease(this.value,this.step)<this.min},maxDisabled:function(){return this._increase(this.value,this.step)>this.max},numPrecision:function(){var e=this.value,t=this.step,n=this.getPrecision,i=this.precision,r=n(t);return void 0!==i?(r>i&&console.warn("[Element Warn][InputNumber]precision should not be less than the decimal places of step"),i):Math.max(n(e),r)},controlsAtRight:function(){return this.controls&&"right"===this.controlsPosition},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},inputNumberSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},inputNumberDisabled:function(){return this.disabled||!!(this.elForm||{}).disabled},displayValue:function(){if(null!==this.userInput)return this.userInput;var e=this.currentValue;if("number"===typeof e){if(this.stepStrictly){var t=this.getPrecision(this.step),n=Math.pow(10,t);e=Math.round(e/this.step)*n*this.step/n}void 0!==this.precision&&(e=e.toFixed(this.precision))}return e}},methods:{toPrecision:function(e,t){return void 0===t&&(t=this.numPrecision),parseFloat(Math.round(e*Math.pow(10,t))/Math.pow(10,t))},getPrecision:function(e){if(void 0===e)return 0;var t=e.toString(),n=t.indexOf("."),i=0;return-1!==n&&(i=t.length-n-1),i},_increase:function(e,t){if("number"!==typeof e&&void 0!==e)return this.currentValue;var n=Math.pow(10,this.numPrecision);return this.toPrecision((n*e+n*t)/n)},_decrease:function(e,t){if("number"!==typeof e&&void 0!==e)return this.currentValue;var n=Math.pow(10,this.numPrecision);return this.toPrecision((n*e-n*t)/n)},increase:function(){if(!this.inputNumberDisabled&&!this.maxDisabled){var e=this.value||0,t=this._increase(e,this.step);this.setCurrentValue(t)}},decrease:function(){if(!this.inputNumberDisabled&&!this.minDisabled){var e=this.value||0,t=this._decrease(e,this.step);this.setCurrentValue(t)}},handleBlur:function(e){this.$emit("blur",e)},handleFocus:function(e){this.$emit("focus",e)},setCurrentValue:function(e){var t=this.currentValue;"number"===typeof e&&void 0!==this.precision&&(e=this.toPrecision(e,this.precision)),e>=this.max&&(e=this.max),e<=this.min&&(e=this.min),t!==e&&(this.userInput=null,this.$emit("input",e),this.$emit("change",e,t),this.currentValue=e)},handleInput:function(e){this.userInput=e},handleInputChange:function(e){var t=""===e?void 0:Number(e);isNaN(t)&&""!==e||this.setCurrentValue(t),this.userInput=null},select:function(){this.$refs.input.select()}},mounted:function(){var e=this.$refs.input.$refs.input;e.setAttribute("role","spinbutton"),e.setAttribute("aria-valuemax",this.max),e.setAttribute("aria-valuemin",this.min),e.setAttribute("aria-valuenow",this.currentValue),e.setAttribute("aria-disabled",this.inputNumberDisabled)},updated:function(){if(this.$refs&&this.$refs.input){var e=this.$refs.input.$refs.input;e.setAttribute("aria-valuenow",this.currentValue)}}},d=u,h=n(0),p=Object(h["a"])(d,i,r,!1,null,null,null);p.options.__file="packages/input-number/src/input-number.vue";var f=p.exports;f.install=function(e){e.component(f.name,f)};t["default"]=f},2:function(e,t){e.exports=n("5924")},22:function(e,t){e.exports=n("12f2")},30:function(e,t,n){"use strict";var i=n(2);t["a"]={bind:function(e,t,n){var r=null,o=void 0,s=function(){return n.context[t.expression].apply()},a=function(){Date.now()-o<100&&s(),clearInterval(r),r=null};Object(i["on"])(e,"mousedown",(function(e){0===e.button&&(o=Date.now(),Object(i["once"])(document,"mouseup",a),clearInterval(r),r=setInterval(s,100))}))}}}})},e452:function(e,t,n){"use strict";t.__esModule=!0;var i=i||{};i.Utils=i.Utils||{},i.Utils.focusFirstDescendant=function(e){for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(i.Utils.attemptFocus(n)||i.Utils.focusFirstDescendant(n))return!0}return!1},i.Utils.focusLastDescendant=function(e){for(var t=e.childNodes.length-1;t>=0;t--){var n=e.childNodes[t];if(i.Utils.attemptFocus(n)||i.Utils.focusLastDescendant(n))return!0}return!1},i.Utils.attemptFocus=function(e){if(!i.Utils.isFocusable(e))return!1;i.Utils.IgnoreUtilFocusChanges=!0;try{e.focus()}catch(t){}return i.Utils.IgnoreUtilFocusChanges=!1,document.activeElement===e},i.Utils.isFocusable=function(e){if(e.tabIndex>0||0===e.tabIndex&&null!==e.getAttribute("tabIndex"))return!0;if(e.disabled)return!1;switch(e.nodeName){case"A":return!!e.href&&"ignore"!==e.rel;case"INPUT":return"hidden"!==e.type&&"file"!==e.type;case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},i.Utils.triggerEvent=function(e,t){var n=void 0;n=/^mouse|click/.test(t)?"MouseEvents":/^key/.test(t)?"KeyboardEvent":"HTMLEvents";for(var i=document.createEvent(n),r=arguments.length,o=Array(r>2?r-2:0),s=2;s<r;s++)o[s-2]=arguments[s];return i.initEvent.apply(i,[t].concat(o)),e.dispatchEvent?e.dispatchEvent(i):e.fireEvent("on"+t,i),e},i.Utils.keys={tab:9,enter:13,space:32,left:37,up:38,right:39,down:40,esc:27},t.default=i.Utils},e507:function(e,t,n){var i=n("512c");i(i.S+i.F,"Object",{assign:n("072d")})},e538:function(e,t,n){var i=n("b622");t.f=i},e62d:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(){if(r.default.prototype.$isServer)return 0;if(void 0!==s)return s;var e=document.createElement("div");e.className="el-scrollbar__wrap",e.style.visibility="hidden",e.style.width="100px",e.style.position="absolute",e.style.top="-9999px",document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var n=document.createElement("div");n.style.width="100%",e.appendChild(n);var i=n.offsetWidth;return e.parentNode.removeChild(e),s=t-i,s};var i=n("2b0e"),r=o(i);function o(e){return e&&e.__esModule?e:{default:e}}var s=void 0},e667:function(e,t){e.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}},e683:function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},e6cf:function(e,t,n){"use strict";var i,r,o,s,a=n("23e7"),c=n("c430"),l=n("da84"),u=n("d066"),d=n("c65b"),h=n("fea9"),p=n("6eeb"),f=n("e2cc"),g=n("d2bb"),m=n("d44e"),_=n("2626"),v=n("59ed"),y=n("1626"),C=n("861d"),E=n("19aa"),b=n("8925"),T=n("2266"),S=n("1c7e"),R=n("4840"),I=n("2cf4").set,w=n("b575"),O=n("cdf9"),k=n("44de"),M=n("f069"),x=n("e667"),P=n("69f3"),A=n("94ca"),D=n("b622"),N=n("6069"),L=n("605d"),U=n("2d00"),B=D("species"),V="Promise",j=P.get,F=P.set,$=P.getterFor(V),H=h&&h.prototype,K=h,W=H,q=l.TypeError,G=l.document,z=l.process,Y=M.f,J=Y,X=!!(G&&G.createEvent&&l.dispatchEvent),Q=y(l.PromiseRejectionEvent),Z="unhandledrejection",ee="rejectionhandled",te=0,ne=1,ie=2,re=1,oe=2,se=!1,ae=A(V,(function(){var e=b(K),t=e!==String(K);if(!t&&66===U)return!0;if(c&&!W["finally"])return!0;if(U>=51&&/native code/.test(e))return!1;var n=new K((function(e){e(1)})),i=function(e){e((function(){}),(function(){}))},r=n.constructor={};return r[B]=i,se=n.then((function(){}))instanceof i,!se||!t&&N&&!Q})),ce=ae||!S((function(e){K.all(e)["catch"]((function(){}))})),le=function(e){var t;return!(!C(e)||!y(t=e.then))&&t},ue=function(e,t){if(!e.notified){e.notified=!0;var n=e.reactions;w((function(){var i=e.value,r=e.state==ne,o=0;while(n.length>o){var s,a,c,l=n[o++],u=r?l.ok:l.fail,h=l.resolve,p=l.reject,f=l.domain;try{u?(r||(e.rejection===oe&&fe(e),e.rejection=re),!0===u?s=i:(f&&f.enter(),s=u(i),f&&(f.exit(),c=!0)),s===l.promise?p(q("Promise-chain cycle")):(a=le(s))?d(a,s,h,p):h(s)):p(i)}catch(g){f&&!c&&f.exit(),p(g)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&he(e)}))}},de=function(e,t,n){var i,r;X?(i=G.createEvent("Event"),i.promise=t,i.reason=n,i.initEvent(e,!1,!0),l.dispatchEvent(i)):i={promise:t,reason:n},!Q&&(r=l["on"+e])?r(i):e===Z&&k("Unhandled promise rejection",n)},he=function(e){d(I,l,(function(){var t,n=e.facade,i=e.value,r=pe(e);if(r&&(t=x((function(){L?z.emit("unhandledRejection",i,n):de(Z,n,i)})),e.rejection=L||pe(e)?oe:re,t.error))throw t.value}))},pe=function(e){return e.rejection!==re&&!e.parent},fe=function(e){d(I,l,(function(){var t=e.facade;L?z.emit("rejectionHandled",t):de(ee,t,e.value)}))},ge=function(e,t,n){return function(i){e(t,i,n)}},me=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=ie,ue(e,!0))},_e=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw q("Promise can't be resolved itself");var i=le(t);i?w((function(){var n={done:!1};try{d(i,t,ge(_e,n,e),ge(me,n,e))}catch(r){me(n,r,e)}})):(e.value=t,e.state=ne,ue(e,!1))}catch(r){me({done:!1},r,e)}}};if(ae&&(K=function(e){E(this,W),v(e),d(i,this);var t=j(this);try{e(ge(_e,t),ge(me,t))}catch(n){me(t,n)}},W=K.prototype,i=function(e){F(this,{type:V,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:te,value:void 0})},i.prototype=f(W,{then:function(e,t){var n=$(this),i=n.reactions,r=Y(R(this,K));return r.ok=!y(e)||e,r.fail=y(t)&&t,r.domain=L?z.domain:void 0,n.parent=!0,i[i.length]=r,n.state!=te&&ue(n,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),r=function(){var e=new i,t=j(e);this.promise=e,this.resolve=ge(_e,t),this.reject=ge(me,t)},M.f=Y=function(e){return e===K||e===o?new r(e):J(e)},!c&&y(h)&&H!==Object.prototype)){s=H.then,se||(p(H,"then",(function(e,t){var n=this;return new K((function(e,t){d(s,n,e,t)})).then(e,t)}),{unsafe:!0}),p(H,"catch",W["catch"],{unsafe:!0}));try{delete H.constructor}catch(ve){}g&&g(H,W)}a({global:!0,wrap:!0,forced:ae},{Promise:K}),m(K,V,!1,!0),_(V),o=u(V),a({target:V,stat:!0,forced:ae},{reject:function(e){var t=Y(this);return d(t.reject,void 0,e),t.promise}}),a({target:V,stat:!0,forced:c||ae},{resolve:function(e){return O(c&&this===o?K:this,e)}}),a({target:V,stat:!0,forced:ce},{all:function(e){var t=this,n=Y(t),i=n.resolve,r=n.reject,o=x((function(){var n=v(t.resolve),o=[],s=0,a=1;T(e,(function(e){var c=s++,l=!1;a++,d(n,t,e).then((function(e){l||(l=!0,o[c]=e,--a||i(o))}),r)})),--a||i(o)}));return o.error&&r(o.value),n.promise},race:function(e){var t=this,n=Y(t),i=n.reject,r=x((function(){var r=v(t.resolve);T(e,(function(e){d(r,t,e).then(n.resolve,i)}))}));return r.error&&i(r.value),n.promise}})},e772:function(e,t,n){e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=53)}({0:function(e,t,n){"use strict";function i(e,t,n,i,r,o,s,a){var c,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),i&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=c):r&&(c=a?function(){r.call(this,this.$root.$options.shadowRoot)}:r),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}n.d(t,"a",(function(){return i}))},3:function(e,t){e.exports=n("8122")},33:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-select-dropdown__item",class:{selected:e.itemSelected,"is-disabled":e.disabled||e.groupDisabled||e.limitReached,hover:e.hover},on:{mouseenter:e.hoverItem,click:function(t){return t.stopPropagation(),e.selectOptionClick(t)}}},[e._t("default",[n("span",[e._v(e._s(e.currentLabel))])])],2)},r=[];i._withStripped=!0;var o=n(4),s=n.n(o),a=n(3),c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l={mixins:[s.a],name:"ElOption",componentName:"ElOption",inject:["select"],props:{value:{required:!0},label:[String,Number],created:Boolean,disabled:{type:Boolean,default:!1}},data:function(){return{index:-1,groupDisabled:!1,visible:!0,hitState:!1,hover:!1}},computed:{isObject:function(){return"[object object]"===Object.prototype.toString.call(this.value).toLowerCase()},currentLabel:function(){return this.label||(this.isObject?"":this.value)},currentValue:function(){return this.value||this.label||""},itemSelected:function(){return this.select.multiple?this.contains(this.select.value,this.value):this.isEqual(this.value,this.select.value)},limitReached:function(){return!!this.select.multiple&&(!this.itemSelected&&(this.select.value||[]).length>=this.select.multipleLimit&&this.select.multipleLimit>0)}},watch:{currentLabel:function(){this.created||this.select.remote||this.dispatch("ElSelect","setSelected")},value:function(e,t){var n=this.select,i=n.remote,r=n.valueKey;if(!this.created&&!i){if(r&&"object"===("undefined"===typeof e?"undefined":c(e))&&"object"===("undefined"===typeof t?"undefined":c(t))&&e[r]===t[r])return;this.dispatch("ElSelect","setSelected")}}},methods:{isEqual:function(e,t){if(this.isObject){var n=this.select.valueKey;return Object(a["getValueByPath"])(e,n)===Object(a["getValueByPath"])(t,n)}return e===t},contains:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];if(this.isObject){var n=this.select.valueKey;return e&&e.some((function(e){return Object(a["getValueByPath"])(e,n)===Object(a["getValueByPath"])(t,n)}))}return e&&e.indexOf(t)>-1},handleGroupDisabled:function(e){this.groupDisabled=e},hoverItem:function(){this.disabled||this.groupDisabled||(this.select.hoverIndex=this.select.options.indexOf(this))},selectOptionClick:function(){!0!==this.disabled&&!0!==this.groupDisabled&&this.dispatch("ElSelect","handleOptionClick",[this,!0])},queryChange:function(e){this.visible=new RegExp(Object(a["escapeRegexpString"])(e),"i").test(this.currentLabel)||this.created,this.visible||this.select.filteredOptionsCount--}},created:function(){this.select.options.push(this),this.select.cachedOptions.push(this),this.select.optionsCount++,this.select.filteredOptionsCount++,this.$on("queryChange",this.queryChange),this.$on("handleGroupDisabled",this.handleGroupDisabled)},beforeDestroy:function(){var e=this.select,t=e.selected,n=e.multiple,i=n?t:[t],r=this.select.cachedOptions.indexOf(this),o=i.indexOf(this);r>-1&&o<0&&this.select.cachedOptions.splice(r,1),this.select.onOptionDestroy(this.select.options.indexOf(this))}},u=l,d=n(0),h=Object(d["a"])(u,i,r,!1,null,null,null);h.options.__file="packages/select/src/option.vue";t["a"]=h.exports},4:function(e,t){e.exports=n("d010")},53:function(e,t,n){"use strict";n.r(t);var i=n(33);i["a"].install=function(e){e.component(i["a"].name,i["a"])},t["default"]=i["a"]}})},e893:function(e,t,n){var i=n("1a2d"),r=n("56ef"),o=n("06cf"),s=n("9bf2");e.exports=function(e,t){for(var n=r(t),a=s.f,c=o.f,l=0;l<n.length;l++){var u=n[l];i(e,u)||a(e,u,c(t,u))}}},e8b5:function(e,t,n){var i=n("c6b6");e.exports=Array.isArray||function(e){return"Array"==i(e)}},e95a:function(e,t,n){var i=n("b622"),r=n("3f8c"),o=i("iterator"),s=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||s[o]===e)}},e974:function(e,t,n){"use strict";t.__esModule=!0;var i=n("2b0e"),r=s(i),o=n("5128");function s(e){return e&&e.__esModule?e:{default:e}}var a=r.default.prototype.$isServer?function(){}:n("6167"),c=function(e){return e.stopPropagation()};t.default={props:{transformOrigin:{type:[Boolean,String],default:!0},placement:{type:String,default:"bottom"},boundariesPadding:{type:Number,default:5},reference:{},popper:{},offset:{default:0},value:Boolean,visibleArrow:Boolean,arrowOffset:{type:Number,default:35},appendToBody:{type:Boolean,default:!0},popperOptions:{type:Object,default:function(){return{gpuAcceleration:!1}}}},data:function(){return{showPopper:!1,currentPlacement:""}},watch:{value:{immediate:!0,handler:function(e){this.showPopper=e,this.$emit("input",e)}},showPopper:function(e){this.disabled||(e?this.updatePopper():this.destroyPopper(),this.$emit("input",e))}},methods:{createPopper:function(){var e=this;if(!this.$isServer&&(this.currentPlacement=this.currentPlacement||this.placement,/^(top|bottom|left|right)(-start|-end)?$/g.test(this.currentPlacement))){var t=this.popperOptions,n=this.popperElm=this.popperElm||this.popper||this.$refs.popper,i=this.referenceElm=this.referenceElm||this.reference||this.$refs.reference;!i&&this.$slots.reference&&this.$slots.reference[0]&&(i=this.referenceElm=this.$slots.reference[0].elm),n&&i&&(this.visibleArrow&&this.appendArrow(n),this.appendToBody&&document.body.appendChild(this.popperElm),this.popperJS&&this.popperJS.destroy&&this.popperJS.destroy(),t.placement=this.currentPlacement,t.offset=this.offset,t.arrowOffset=this.arrowOffset,this.popperJS=new a(i,n,t),this.popperJS.onCreate((function(t){e.$emit("created",e),e.resetTransformOrigin(),e.$nextTick(e.updatePopper)})),"function"===typeof t.onUpdate&&this.popperJS.onUpdate(t.onUpdate),this.popperJS._popper.style.zIndex=o.PopupManager.nextZIndex(),this.popperElm.addEventListener("click",c))}},updatePopper:function(){var e=this.popperJS;e?(e.update(),e._popper&&(e._popper.style.zIndex=o.PopupManager.nextZIndex())):this.createPopper()},doDestroy:function(e){!this.popperJS||this.showPopper&&!e||(this.popperJS.destroy(),this.popperJS=null)},destroyPopper:function(){this.popperJS&&this.resetTransformOrigin()},resetTransformOrigin:function(){if(this.transformOrigin){var e={top:"bottom",bottom:"top",left:"right",right:"left"},t=this.popperJS._popper.getAttribute("x-placement").split("-")[0],n=e[t];this.popperJS._popper.style.transformOrigin="string"===typeof this.transformOrigin?this.transformOrigin:["top","bottom"].indexOf(t)>-1?"center "+n:n+" center"}},appendArrow:function(e){var t=void 0;if(!this.appended){for(var n in this.appended=!0,e.attributes)if(/^_v-/.test(e.attributes[n].name)){t=e.attributes[n].name;break}var i=document.createElement("div");t&&i.setAttribute(t,""),i.setAttribute("x-arrow",""),i.className="popper__arrow",e.appendChild(i)}}},beforeDestroy:function(){this.doDestroy(!0),this.popperElm&&this.popperElm.parentNode===document.body&&(this.popperElm.removeEventListener("click",c),document.body.removeChild(this.popperElm))},deactivated:function(){this.$options.beforeDestroy[0].call(this)}}},ea34:function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},eedf:function(e,t,n){e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=86)}({0:function(e,t,n){"use strict";function i(e,t,n,i,r,o,s,a){var c,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),i&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=c):r&&(c=a?function(){r.call(this,this.$root.$options.shadowRoot)}:r),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}n.d(t,"a",(function(){return i}))},86:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"el-button",class:[e.type?"el-button--"+e.type:"",e.buttonSize?"el-button--"+e.buttonSize:"",{"is-disabled":e.buttonDisabled,"is-loading":e.loading,"is-plain":e.plain,"is-round":e.round,"is-circle":e.circle}],attrs:{disabled:e.buttonDisabled||e.loading,autofocus:e.autofocus,type:e.nativeType},on:{click:e.handleClick}},[e.loading?n("i",{staticClass:"el-icon-loading"}):e._e(),e.icon&&!e.loading?n("i",{class:e.icon}):e._e(),e.$slots.default?n("span",[e._t("default")],2):e._e()])},r=[];i._withStripped=!0;var o={name:"ElButton",inject:{elForm:{default:""},elFormItem:{default:""}},props:{type:{type:String,default:"default"},size:String,icon:{type:String,default:""},nativeType:{type:String,default:"button"},loading:Boolean,disabled:Boolean,plain:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},buttonSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},buttonDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},methods:{handleClick:function(e){this.$emit("click",e)}}},s=o,a=n(0),c=Object(a["a"])(s,i,r,!1,null,null,null);c.options.__file="packages/button/src/button.vue";var l=c.exports;l.install=function(e){e.component(l.name,l)};t["default"]=l}})},ef08:function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},f069:function(e,t,n){"use strict";var i=n("59ed"),r=function(e){var t,n;this.promise=new e((function(e,i){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=i})),this.resolve=i(t),this.reject=i(n)};e.exports.f=function(e){return new r(e)}},f0d9:function(e,t,n){"use strict";t.__esModule=!0,t.default={el:{colorpicker:{confirm:"确定",clear:"清空"},datepicker:{now:"此刻",today:"今天",cancel:"取消",clear:"清空",confirm:"确定",selectDate:"选择日期",selectTime:"选择时间",startDate:"开始日期",startTime:"开始时间",endDate:"结束日期",endTime:"结束时间",prevYear:"前一年",nextYear:"后一年",prevMonth:"上个月",nextMonth:"下个月",year:"年",month1:"1 月",month2:"2 月",month3:"3 月",month4:"4 月",month5:"5 月",month6:"6 月",month7:"7 月",month8:"8 月",month9:"9 月",month10:"10 月",month11:"11 月",month12:"12 月",weeks:{sun:"日",mon:"一",tue:"二",wed:"三",thu:"四",fri:"五",sat:"六"},months:{jan:"一月",feb:"二月",mar:"三月",apr:"四月",may:"五月",jun:"六月",jul:"七月",aug:"八月",sep:"九月",oct:"十月",nov:"十一月",dec:"十二月"}},select:{loading:"加载中",noMatch:"无匹配数据",noData:"无数据",placeholder:"请选择"},cascader:{noMatch:"无匹配数据",loading:"加载中",placeholder:"请选择",noData:"暂无数据"},pagination:{goto:"前往",pagesize:"条/页",total:"共 {total} 条",pageClassifier:"页"},messagebox:{title:"提示",confirm:"确定",cancel:"取消",error:"输入的数据不合法!"},upload:{deleteTip:"按 delete 键可删除",delete:"删除",preview:"查看图片",continue:"继续上传"},table:{emptyText:"暂无数据",confirmFilter:"筛选",resetFilter:"重置",clearFilter:"全部",sumText:"合计"},tree:{emptyText:"暂无数据"},transfer:{noMatch:"无匹配数据",noData:"无数据",titles:["列表 1","列表 2"],filterPlaceholder:"请输入搜索内容",noCheckedFormat:"共 {total} 项",hasCheckedFormat:"已选 {checked}/{total} 项"},image:{error:"加载失败"},pageHeader:{title:"返回"},popconfirm:{confirmButtonText:"确定",cancelButtonText:"取消"},empty:{description:"暂无数据"}}}},f36a:function(e,t,n){var i=n("e330");e.exports=i([].slice)},f3ad:function(e,t,n){e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=73)}({0:function(e,t,n){"use strict";function i(e,t,n,i,r,o,s,a){var c,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),i&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=c):r&&(c=a?function(){r.call(this,this.$root.$options.shadowRoot)}:r),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}n.d(t,"a",(function(){return i}))},11:function(e,t){e.exports=n("2bb5")},21:function(e,t){e.exports=n("d397")},4:function(e,t){e.exports=n("d010")},73:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:["textarea"===e.type?"el-textarea":"el-input",e.inputSize?"el-input--"+e.inputSize:"",{"is-disabled":e.inputDisabled,"is-exceed":e.inputExceed,"el-input-group":e.$slots.prepend||e.$slots.append,"el-input-group--append":e.$slots.append,"el-input-group--prepend":e.$slots.prepend,"el-input--prefix":e.$slots.prefix||e.prefixIcon,"el-input--suffix":e.$slots.suffix||e.suffixIcon||e.clearable||e.showPassword}],on:{mouseenter:function(t){e.hovering=!0},mouseleave:function(t){e.hovering=!1}}},["textarea"!==e.type?[e.$slots.prepend?n("div",{staticClass:"el-input-group__prepend"},[e._t("prepend")],2):e._e(),"textarea"!==e.type?n("input",e._b({ref:"input",staticClass:"el-input__inner",attrs:{tabindex:e.tabindex,type:e.showPassword?e.passwordVisible?"text":"password":e.type,disabled:e.inputDisabled,readonly:e.readonly,autocomplete:e.autoComplete||e.autocomplete,"aria-label":e.label},on:{compositionstart:e.handleCompositionStart,compositionupdate:e.handleCompositionUpdate,compositionend:e.handleCompositionEnd,input:e.handleInput,focus:e.handleFocus,blur:e.handleBlur,change:e.handleChange}},"input",e.$attrs,!1)):e._e(),e.$slots.prefix||e.prefixIcon?n("span",{staticClass:"el-input__prefix"},[e._t("prefix"),e.prefixIcon?n("i",{staticClass:"el-input__icon",class:e.prefixIcon}):e._e()],2):e._e(),e.getSuffixVisible()?n("span",{staticClass:"el-input__suffix"},[n("span",{staticClass:"el-input__suffix-inner"},[e.showClear&&e.showPwdVisible&&e.isWordLimitVisible?e._e():[e._t("suffix"),e.suffixIcon?n("i",{staticClass:"el-input__icon",class:e.suffixIcon}):e._e()],e.showClear?n("i",{staticClass:"el-input__icon el-icon-circle-close el-input__clear",on:{mousedown:function(e){e.preventDefault()},click:e.clear}}):e._e(),e.showPwdVisible?n("i",{staticClass:"el-input__icon el-icon-view el-input__clear",on:{click:e.handlePasswordVisible}}):e._e(),e.isWordLimitVisible?n("span",{staticClass:"el-input__count"},[n("span",{staticClass:"el-input__count-inner"},[e._v("\n            "+e._s(e.textLength)+"/"+e._s(e.upperLimit)+"\n          ")])]):e._e()],2),e.validateState?n("i",{staticClass:"el-input__icon",class:["el-input__validateIcon",e.validateIcon]}):e._e()]):e._e(),e.$slots.append?n("div",{staticClass:"el-input-group__append"},[e._t("append")],2):e._e()]:n("textarea",e._b({ref:"textarea",staticClass:"el-textarea__inner",style:e.textareaStyle,attrs:{tabindex:e.tabindex,disabled:e.inputDisabled,readonly:e.readonly,autocomplete:e.autoComplete||e.autocomplete,"aria-label":e.label},on:{compositionstart:e.handleCompositionStart,compositionupdate:e.handleCompositionUpdate,compositionend:e.handleCompositionEnd,input:e.handleInput,focus:e.handleFocus,blur:e.handleBlur,change:e.handleChange}},"textarea",e.$attrs,!1)),e.isWordLimitVisible&&"textarea"===e.type?n("span",{staticClass:"el-input__count"},[e._v(e._s(e.textLength)+"/"+e._s(e.upperLimit))]):e._e()],2)},r=[];i._withStripped=!0;var o=n(4),s=n.n(o),a=n(11),c=n.n(a),l=void 0,u="\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important\n",d=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function h(e){var t=window.getComputedStyle(e),n=t.getPropertyValue("box-sizing"),i=parseFloat(t.getPropertyValue("padding-bottom"))+parseFloat(t.getPropertyValue("padding-top")),r=parseFloat(t.getPropertyValue("border-bottom-width"))+parseFloat(t.getPropertyValue("border-top-width")),o=d.map((function(e){return e+":"+t.getPropertyValue(e)})).join(";");return{contextStyle:o,paddingSize:i,borderSize:r,boxSizing:n}}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;l||(l=document.createElement("textarea"),document.body.appendChild(l));var i=h(e),r=i.paddingSize,o=i.borderSize,s=i.boxSizing,a=i.contextStyle;l.setAttribute("style",a+";"+u),l.value=e.value||e.placeholder||"";var c=l.scrollHeight,d={};"border-box"===s?c+=o:"content-box"===s&&(c-=r),l.value="";var p=l.scrollHeight-r;if(null!==t){var f=p*t;"border-box"===s&&(f=f+r+o),c=Math.max(f,c),d.minHeight=f+"px"}if(null!==n){var g=p*n;"border-box"===s&&(g=g+r+o),c=Math.min(g,c)}return d.height=c+"px",l.parentNode&&l.parentNode.removeChild(l),l=null,d}var f=n(9),g=n.n(f),m=n(21),_={name:"ElInput",componentName:"ElInput",mixins:[s.a,c.a],inheritAttrs:!1,inject:{elForm:{default:""},elFormItem:{default:""}},data:function(){return{textareaCalcStyle:{},hovering:!1,focused:!1,isComposing:!1,passwordVisible:!1}},props:{value:[String,Number],size:String,resize:String,form:String,disabled:Boolean,readonly:Boolean,type:{type:String,default:"text"},autosize:{type:[Boolean,Object],default:!1},autocomplete:{type:String,default:"off"},autoComplete:{type:String,validator:function(e){return!0}},validateEvent:{type:Boolean,default:!0},suffixIcon:String,prefixIcon:String,label:String,clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},tabindex:String},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},validateState:function(){return this.elFormItem?this.elFormItem.validateState:""},needStatusIcon:function(){return!!this.elForm&&this.elForm.statusIcon},validateIcon:function(){return{validating:"el-icon-loading",success:"el-icon-circle-check",error:"el-icon-circle-close"}[this.validateState]},textareaStyle:function(){return g()({},this.textareaCalcStyle,{resize:this.resize})},inputSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},inputDisabled:function(){return this.disabled||(this.elForm||{}).disabled},nativeInputValue:function(){return null===this.value||void 0===this.value?"":String(this.value)},showClear:function(){return this.clearable&&!this.inputDisabled&&!this.readonly&&this.nativeInputValue&&(this.focused||this.hovering)},showPwdVisible:function(){return this.showPassword&&!this.inputDisabled&&!this.readonly&&(!!this.nativeInputValue||this.focused)},isWordLimitVisible:function(){return this.showWordLimit&&this.$attrs.maxlength&&("text"===this.type||"textarea"===this.type)&&!this.inputDisabled&&!this.readonly&&!this.showPassword},upperLimit:function(){return this.$attrs.maxlength},textLength:function(){return"number"===typeof this.value?String(this.value).length:(this.value||"").length},inputExceed:function(){return this.isWordLimitVisible&&this.textLength>this.upperLimit}},watch:{value:function(e){this.$nextTick(this.resizeTextarea),this.validateEvent&&this.dispatch("ElFormItem","el.form.change",[e])},nativeInputValue:function(){this.setNativeInputValue()},type:function(){var e=this;this.$nextTick((function(){e.setNativeInputValue(),e.resizeTextarea(),e.updateIconOffset()}))}},methods:{focus:function(){this.getInput().focus()},blur:function(){this.getInput().blur()},getMigratingConfig:function(){return{props:{icon:"icon is removed, use suffix-icon / prefix-icon instead.","on-icon-click":"on-icon-click is removed."},events:{click:"click is removed."}}},handleBlur:function(e){this.focused=!1,this.$emit("blur",e),this.validateEvent&&this.dispatch("ElFormItem","el.form.blur",[this.value])},select:function(){this.getInput().select()},resizeTextarea:function(){if(!this.$isServer){var e=this.autosize,t=this.type;if("textarea"===t)if(e){var n=e.minRows,i=e.maxRows;this.textareaCalcStyle=p(this.$refs.textarea,n,i)}else this.textareaCalcStyle={minHeight:p(this.$refs.textarea).minHeight}}},setNativeInputValue:function(){var e=this.getInput();e&&e.value!==this.nativeInputValue&&(e.value=this.nativeInputValue)},handleFocus:function(e){this.focused=!0,this.$emit("focus",e)},handleCompositionStart:function(){this.isComposing=!0},handleCompositionUpdate:function(e){var t=e.target.value,n=t[t.length-1]||"";this.isComposing=!Object(m["isKorean"])(n)},handleCompositionEnd:function(e){this.isComposing&&(this.isComposing=!1,this.handleInput(e))},handleInput:function(e){this.isComposing||e.target.value!==this.nativeInputValue&&(this.$emit("input",e.target.value),this.$nextTick(this.setNativeInputValue))},handleChange:function(e){this.$emit("change",e.target.value)},calcIconOffset:function(e){var t=[].slice.call(this.$el.querySelectorAll(".el-input__"+e)||[]);if(t.length){for(var n=null,i=0;i<t.length;i++)if(t[i].parentNode===this.$el){n=t[i];break}if(n){var r={suffix:"append",prefix:"prepend"},o=r[e];this.$slots[o]?n.style.transform="translateX("+("suffix"===e?"-":"")+this.$el.querySelector(".el-input-group__"+o).offsetWidth+"px)":n.removeAttribute("style")}}},updateIconOffset:function(){this.calcIconOffset("prefix"),this.calcIconOffset("suffix")},clear:function(){this.$emit("input",""),this.$emit("change",""),this.$emit("clear")},handlePasswordVisible:function(){var e=this;this.passwordVisible=!this.passwordVisible,this.$nextTick((function(){e.focus()}))},getInput:function(){return this.$refs.input||this.$refs.textarea},getSuffixVisible:function(){return this.$slots.suffix||this.suffixIcon||this.showClear||this.showPassword||this.isWordLimitVisible||this.validateState&&this.needStatusIcon}},created:function(){this.$on("inputSelect",this.select)},mounted:function(){this.setNativeInputValue(),this.resizeTextarea(),this.updateIconOffset()},updated:function(){this.$nextTick(this.updateIconOffset)}},v=_,y=n(0),C=Object(y["a"])(v,i,r,!1,null,null,null);C.options.__file="packages/input/src/input.vue";var E=C.exports;E.install=function(e){e.component(E.name,E)};t["default"]=E},9:function(e,t){e.exports=n("7f4d")}})},f40f:function(e,t,n){"use strict";
/*!
 * better-scroll / better-scroll
 * (c) 2016-2021 ustbhuangyi
 * Released under the MIT License.
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)};function r(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},o.apply(this,arguments)};function s(e,t,n,i){function r(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function s(e){try{c(i.next(e))}catch(t){o(t)}}function a(e){try{c(i["throw"](e))}catch(t){o(t)}}function c(e){e.done?n(e.value):r(e.value).then(s,a)}c((i=i.apply(e,t||[])).next())}))}function a(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(e){return function(t){return c([e,t])}}function c(o){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,i&&(r=2&o[0]?i["return"]:o[0]?i["throw"]||((r=i["return"])&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(r=s.trys,!(r=r.length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}}function c(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i}var l=[{sourceKey:"scroller.scrollBehaviorX.currentPos",key:"x"},{sourceKey:"scroller.scrollBehaviorY.currentPos",key:"y"},{sourceKey:"scroller.scrollBehaviorX.hasScroll",key:"hasHorizontalScroll"},{sourceKey:"scroller.scrollBehaviorY.hasScroll",key:"hasVerticalScroll"},{sourceKey:"scroller.scrollBehaviorX.contentSize",key:"scrollerWidth"},{sourceKey:"scroller.scrollBehaviorY.contentSize",key:"scrollerHeight"},{sourceKey:"scroller.scrollBehaviorX.maxScrollPos",key:"maxScrollX"},{sourceKey:"scroller.scrollBehaviorY.maxScrollPos",key:"maxScrollY"},{sourceKey:"scroller.scrollBehaviorX.minScrollPos",key:"minScrollX"},{sourceKey:"scroller.scrollBehaviorY.minScrollPos",key:"minScrollY"},{sourceKey:"scroller.scrollBehaviorX.movingDirection",key:"movingDirectionX"},{sourceKey:"scroller.scrollBehaviorY.movingDirection",key:"movingDirectionY"},{sourceKey:"scroller.scrollBehaviorX.direction",key:"directionX"},{sourceKey:"scroller.scrollBehaviorY.direction",key:"directionY"},{sourceKey:"scroller.actions.enabled",key:"enabled"},{sourceKey:"scroller.animater.pending",key:"pending"},{sourceKey:"scroller.animater.stop",key:"stop"},{sourceKey:"scroller.scrollTo",key:"scrollTo"},{sourceKey:"scroller.scrollBy",key:"scrollBy"},{sourceKey:"scroller.scrollToElement",key:"scrollToElement"},{sourceKey:"scroller.resetPosition",key:"resetPosition"}];function u(e){console.error("[BScroll warn]: "+e)}function d(e,t){if(!e)throw new Error("[BScroll] "+t)}var h="undefined"!==typeof window,p=h&&navigator.userAgent.toLowerCase(),f=!(!p||!/wechatdevtools/.test(p)),g=p&&p.indexOf("android")>0,m=function(){if("string"===typeof p){var e=/os (\d\d?_\d(_\d)?)/,t=e.exec(p);if(!t)return!1;var n=t[1].split("_").map((function(e){return parseInt(e,10)}));return!!(13===n[0]&&n[1]>=4)}return!1}(),_=!1;if(h){var v="test-passive";try{var y={};Object.defineProperty(y,"passive",{get:function(){_=!0}}),window.addEventListener(v,(function(){}),y)}catch(sn){}}function C(){return window.performance&&window.performance.now&&window.performance.timing?window.performance.now()+window.performance.timing.navigationStart:+new Date}var E=function(e,t){for(var n in t)e[n]=t[n];return e};function b(e){return void 0===e||null===e}function T(e,t){return Math.sqrt(e*e+t*t)}function S(e,t,n){return e<t?t:e>n?n:e}function R(e,t){if(e.findIndex)return e.findIndex(t);var n=-1;return e.some((function(e,i,r){var o=t(e,i,r);if(o)return n=i,o})),n}var I=h&&document.createElement("div").style,w=function(){if(!h)return!1;for(var e=[{key:"standard",value:"transform"},{key:"webkit",value:"webkitTransform"},{key:"Moz",value:"MozTransform"},{key:"O",value:"OTransform"},{key:"ms",value:"msTransform"}],t=0,n=e;t<n.length;t++){var i=n[t];if(void 0!==I[i.value])return i.key}return!1}();function O(e){return!1===w?e:"standard"===w?"transitionEnd"===e?"transitionend":e:w+e.charAt(0).toUpperCase()+e.substr(1)}function k(e){return"string"===typeof e?document.querySelector(e):e}function M(e,t,n,i){var r=_?{passive:!1,capture:!!i}:!!i;e.addEventListener(t,n,r)}function x(e,t,n,i){e.removeEventListener(t,n,{capture:!!i})}function P(e){var t=0,n=0;while(e)t-=e.offsetLeft,n-=e.offsetTop,e=e.offsetParent;return{left:t,top:n}}function A(e){var t=e.getBoundingClientRect();return{left:-(t.left+window.pageXOffset),top:-(t.top+window.pageYOffset)}}var D=w&&"standard"!==w?"-"+w.toLowerCase()+"-":"",N=O("transform"),L=O("transition"),U=h&&O("perspective")in I,B=h&&("ontouchstart"in window||f),V=h&&L in I,j={transform:N,transition:L,transitionTimingFunction:O("transitionTimingFunction"),transitionDuration:O("transitionDuration"),transitionDelay:O("transitionDelay"),transformOrigin:O("transformOrigin"),transitionEnd:O("transitionEnd"),transitionProperty:O("transitionProperty")},F={touchstart:1,touchmove:1,touchend:1,touchcancel:1,mousedown:2,mousemove:2,mouseup:2};function $(e){if(e instanceof window.SVGElement){var t=e.getBoundingClientRect();return{top:t.top,left:t.left,width:t.width,height:t.height}}return{top:e.offsetTop,left:e.offsetLeft,width:e.offsetWidth,height:e.offsetHeight}}function H(e,t){for(var n in t)if(t[n].test(e[n]))return!0;return!1}var K=H;function W(e,t){var n=document.createEvent("Event");n.initEvent(t,!0,!0),n.pageX=e.pageX,n.pageY=e.pageY,e.target.dispatchEvent(n)}function q(e,t){var n;void 0===t&&(t="click"),"mouseup"===e.type?n=e:"touchend"!==e.type&&"touchcancel"!==e.type||(n=e.changedTouches[0]);var i,r={};n&&(r.screenX=n.screenX||0,r.screenY=n.screenY||0,r.clientX=n.clientX||0,r.clientY=n.clientY||0);var s=!0,a=!0,c=e.ctrlKey,l=e.shiftKey,u=e.altKey,d=e.metaKey,h={ctrlKey:c,shiftKey:l,altKey:u,metaKey:d};if("undefined"!==typeof MouseEvent)try{i=new MouseEvent(t,E(o({bubbles:s,cancelable:a},h),r))}catch(e){p()}else p();function p(){i=document.createEvent("Event"),i.initEvent(t,s,a),E(i,r)}i.forwardedTouchEvent=!0,i._constructed=!0,e.target.dispatchEvent(i)}function G(e){q(e,"dblclick")}function z(e,t){var n=t.firstChild;n?Y(e,n):t.appendChild(e)}function Y(e,t){var n=t.parentNode;n.insertBefore(e,t)}function J(e,t){e.removeChild(t)}function X(e,t){var n=new RegExp("(^|\\s)"+t+"(\\s|$)");return n.test(e.className)}function Q(e){return Array.prototype.slice.call(e,0)}function Z(e){return{width:e.clientWidth,height:e.clientHeight}}var ee={swipe:{style:"cubic-bezier(0.23, 1, 0.32, 1)",fn:function(e){return 1+--e*e*e*e*e}},swipeBounce:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(e){return e*(2-e)}},bounce:{style:"cubic-bezier(0.165, 0.84, 0.44, 1)",fn:function(e){return 1- --e*e*e*e}}},te=1e3/60,ne=h&&window;function ie(){}var re=function(){return h?ne.requestAnimationFrame||ne.webkitRequestAnimationFrame||ne.mozRequestAnimationFrame||ne.oRequestAnimationFrame||function(e){return window.setTimeout(e,e.interval||te)}:ie}(),oe=function(){return h?ne.cancelAnimationFrame||ne.webkitCancelAnimationFrame||ne.mozCancelAnimationFrame||ne.oCancelAnimationFrame||function(e){window.clearTimeout(e)}:ie}(),se=function(e){},ae={enumerable:!0,configurable:!0,get:se,set:se},ce=function(e,t){for(var n=t.split("."),i=0;i<n.length-1;i++)if(e=e[n[i]],"object"!==typeof e||!e)return;var r=n.pop();return"function"===typeof e[r]?function(){return e[r].apply(e,arguments)}:e[r]},le=function(e,t,n){for(var i,r=t.split("."),o=0;o<r.length-1;o++)i=r[o],e[i]||(e[i]={}),e=e[i];e[r.pop()]=n};function ue(e,t,n){ae.get=function(){return ce(this,t)},ae.set=function(e){le(this,t,e)},Object.defineProperty(e,n,ae)}var de=function(){function e(e){this.events={},this.eventTypes={},this.registerType(e)}return e.prototype.on=function(e,t,n){return void 0===n&&(n=this),this.hasType(e),this.events[e]||(this.events[e]=[]),this.events[e].push([t,n]),this},e.prototype.once=function(e,t,n){var i=this;void 0===n&&(n=this),this.hasType(e);var r=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];i.off(e,r);var a=t.apply(n,o);if(!0===a)return a};return r.fn=t,this.on(e,r),this},e.prototype.off=function(e,t){if(!e&&!t)return this.events={},this;if(e){if(this.hasType(e),!t)return this.events[e]=[],this;var n=this.events[e];if(!n)return this;var i=n.length;while(i--)(n[i][0]===t||n[i][0]&&n[i][0].fn===t)&&n.splice(i,1);return this}},e.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.hasType(e);var i=this.events[e];if(i)for(var r,o=i.length,s=c(i),a=0;a<o;a++){var l=s[a],u=l[0],d=l[1];if(u&&(r=u.apply(d,t),!0===r))return r}},e.prototype.registerType=function(e){var t=this;e.forEach((function(e){t.eventTypes[e]=e}))},e.prototype.destroy=function(){this.events={},this.eventTypes={}},e.prototype.hasType=function(e){var t=this.eventTypes,n=t[e]===e;n||u('EventEmitter has used unknown event type: "'+e+'", should be oneof ['+Object.keys(t).map((function(e){return JSON.stringify(e)}))+"]")},e}(),he=function(){function e(e,t){this.wrapper=e,this.events=t,this.addDOMEvents()}return e.prototype.destroy=function(){this.removeDOMEvents(),this.events=[]},e.prototype.addDOMEvents=function(){this.handleDOMEvents(M)},e.prototype.removeDOMEvents=function(){this.handleDOMEvents(x)},e.prototype.handleDOMEvents=function(e){var t=this,n=this.wrapper;this.events.forEach((function(i){e(n,i.name,t,!!i.capture)}))},e.prototype.handleEvent=function(e){var t=e.type;this.events.some((function(n){return n.name===t&&(n.handler(e),!0)}))},e}(),pe=function(){function e(){}return e}(),fe=function(e){function t(){var t=e.call(this)||this;return t.startX=0,t.startY=0,t.scrollX=!1,t.scrollY=!0,t.freeScroll=!1,t.directionLockThreshold=0,t.eventPassthrough="",t.click=!1,t.dblclick=!1,t.tap="",t.bounce={top:!0,bottom:!0,left:!0,right:!0},t.bounceTime=800,t.momentum=!0,t.momentumLimitTime=300,t.momentumLimitDistance=15,t.swipeTime=2500,t.swipeBounceTime=500,t.deceleration=.0015,t.flickLimitTime=200,t.flickLimitDistance=100,t.resizePolling=60,t.probeType=0,t.stopPropagation=!1,t.preventDefault=!0,t.preventDefaultException={tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT|AUDIO)$/},t.tagException={tagName:/^TEXTAREA$/},t.HWCompositing=!0,t.useTransition=!0,t.bindToWrapper=!1,t.bindToTarget=!1,t.disableMouse=B,t.disableTouch=!B,t.autoBlur=!0,t.autoEndDistance=5,t.outOfBoundaryDampingFactor=1/3,t.specifiedIndexAsContent=0,t.quadrant=1,t}return r(t,e),t.prototype.merge=function(e){if(!e)return this;for(var t in e)"bounce"!==t?this[t]=e[t]:this.bounce=this.resolveBounce(e[t]);return this},t.prototype.process=function(){return this.translateZ=this.HWCompositing&&U?" translateZ(1px)":"",this.useTransition=this.useTransition&&V,this.preventDefault=!this.eventPassthrough&&this.preventDefault,this.scrollX="horizontal"!==this.eventPassthrough&&this.scrollX,this.scrollY="vertical"!==this.eventPassthrough&&this.scrollY,this.freeScroll=this.freeScroll&&!this.eventPassthrough,this.scrollX=!!this.freeScroll||this.scrollX,this.scrollY=!!this.freeScroll||this.scrollY,this.directionLockThreshold=this.eventPassthrough?0:this.directionLockThreshold,this},t.prototype.resolveBounce=function(e){var t,n={top:!0,right:!0,bottom:!0,left:!0},i={top:!1,right:!1,bottom:!1,left:!1};return t="object"===typeof e?E(n,e):e?n:i,t},t}(pe),ge=function(){function e(e,t){this.wrapper=e,this.options=t,this.hooks=new de(["beforeStart","start","move","end","click"]),this.handleDOMEvents()}return e.prototype.handleDOMEvents=function(){var e=this.options,t=e.bindToWrapper,n=e.disableMouse,i=e.disableTouch,r=e.click,o=this.wrapper,s=t?o:window,a=[],c=[],l=!i,u=!n;r&&a.push({name:"click",handler:this.click.bind(this),capture:!0}),l&&(a.push({name:"touchstart",handler:this.start.bind(this)}),c.push({name:"touchmove",handler:this.move.bind(this)},{name:"touchend",handler:this.end.bind(this)},{name:"touchcancel",handler:this.end.bind(this)})),u&&(a.push({name:"mousedown",handler:this.start.bind(this)}),c.push({name:"mousemove",handler:this.move.bind(this)},{name:"mouseup",handler:this.end.bind(this)})),this.wrapperEventRegister=new he(o,a),this.targetEventRegister=new he(s,c)},e.prototype.beforeHandler=function(e,t){var n=this.options,i=n.preventDefault,r=n.stopPropagation,o=n.preventDefaultException,s={start:function(){return i&&!H(e.target,o)},end:function(){return i&&!H(e.target,o)},move:function(){return i}};s[t]()&&e.preventDefault(),r&&e.stopPropagation()},e.prototype.setInitiated=function(e){void 0===e&&(e=0),this.initiated=e},e.prototype.start=function(e){var t=F[e.type];if(!this.initiated||this.initiated===t)if(this.setInitiated(t),K(e.target,this.options.tagException))this.setInitiated();else if((2!==t||0===e.button)&&!this.hooks.trigger(this.hooks.eventTypes.beforeStart,e)){this.beforeHandler(e,"start");var n=e.touches?e.touches[0]:e;this.pointX=n.pageX,this.pointY=n.pageY,this.hooks.trigger(this.hooks.eventTypes.start,e)}},e.prototype.move=function(e){if(F[e.type]===this.initiated){this.beforeHandler(e,"move");var t=e.touches?e.touches[0]:e,n=t.pageX-this.pointX,i=t.pageY-this.pointY;if(this.pointX=t.pageX,this.pointY=t.pageY,!this.hooks.trigger(this.hooks.eventTypes.move,{deltaX:n,deltaY:i,e:e})){var r=document.documentElement.scrollLeft||window.pageXOffset||document.body.scrollLeft,o=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop,s=this.pointX-r,a=this.pointY-o,c=this.options.autoEndDistance;(s>document.documentElement.clientWidth-c||a>document.documentElement.clientHeight-c||s<c||a<c)&&this.end(e)}}},e.prototype.end=function(e){F[e.type]===this.initiated&&(this.setInitiated(),this.beforeHandler(e,"end"),this.hooks.trigger(this.hooks.eventTypes.end,e))},e.prototype.click=function(e){this.hooks.trigger(this.hooks.eventTypes.click,e)},e.prototype.setContent=function(e){e!==this.wrapper&&(this.wrapper=e,this.rebindDOMEvents())},e.prototype.rebindDOMEvents=function(){this.wrapperEventRegister.destroy(),this.targetEventRegister.destroy(),this.handleDOMEvents()},e.prototype.destroy=function(){this.wrapperEventRegister.destroy(),this.targetEventRegister.destroy(),this.hooks.destroy()},e}(),me={x:["translateX","px"],y:["translateY","px"]},_e=function(){function e(e){this.setContent(e),this.hooks=new de(["beforeTranslate","translate"])}return e.prototype.getComputedPosition=function(){var e=window.getComputedStyle(this.content,null),t=e[j.transform].split(")")[0].split(", "),n=+(t[12]||t[4])||0,i=+(t[13]||t[5])||0;return{x:n,y:i}},e.prototype.translate=function(e){var t=[];Object.keys(e).forEach((function(n){if(me[n]){var i=me[n][0];if(i){var r=me[n][1],o=e[n];t.push(i+"("+o+r+")")}}})),this.hooks.trigger(this.hooks.eventTypes.beforeTranslate,t,e),this.style[j.transform]=t.join(" "),this.hooks.trigger(this.hooks.eventTypes.translate,e)},e.prototype.setContent=function(e){this.content!==e&&(this.content=e,this.style=e.style)},e.prototype.destroy=function(){this.hooks.destroy()},e}(),ve=function(){function e(e,t,n){this.translater=t,this.options=n,this.timer=0,this.hooks=new de(["move","end","beforeForceStop","forceStop","callStop","time","timeFunction"]),this.setContent(e)}return e.prototype.translate=function(e){this.translater.translate(e)},e.prototype.setPending=function(e){this.pending=e},e.prototype.setForceStopped=function(e){this.forceStopped=e},e.prototype.setCallStop=function(e){this.callStopWhenPending=e},e.prototype.setContent=function(e){this.content!==e&&(this.content=e,this.style=e.style,this.stop())},e.prototype.clearTimer=function(){this.timer&&(oe(this.timer),this.timer=0)},e.prototype.destroy=function(){this.hooks.destroy(),oe(this.timer)},e}(),ye=function(e,t,n,i){var r=function(e,t){var n=e-t,i=n>0?-1:n<0?1:0;return i},o=r(t.x,e.x),s=r(t.y,e.y),a=n.x-i.x,c=n.y-i.y;return o*a<=0&&s*c<=0},Ce=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.startProbe=function(e,t){var n=this,i=e,r=function(){var o=n.translater.getComputedPosition();ye(e,t,o,i)&&n.hooks.trigger(n.hooks.eventTypes.move,o),n.pending||(n.callStopWhenPending?n.callStopWhenPending=!1:n.hooks.trigger(n.hooks.eventTypes.end,o)),i=o,n.pending&&(n.timer=re(r))};this.callStopWhenPending&&this.setCallStop(!1),oe(this.timer),r()},t.prototype.transitionTime=function(e){void 0===e&&(e=0),this.style[j.transitionDuration]=e+"ms",this.hooks.trigger(this.hooks.eventTypes.time,e)},t.prototype.transitionTimingFunction=function(e){this.style[j.transitionTimingFunction]=e,this.hooks.trigger(this.hooks.eventTypes.timeFunction,e)},t.prototype.transitionProperty=function(){this.style[j.transitionProperty]=j.transform},t.prototype.move=function(e,t,n,i){this.setPending(n>0),this.transitionTimingFunction(i),this.transitionProperty(),this.transitionTime(n),this.translate(t);var r=3===this.options.probeType;n&&r&&this.startProbe(e,t),n||(this._reflow=this.content.offsetHeight,r&&this.hooks.trigger(this.hooks.eventTypes.move,t),this.hooks.trigger(this.hooks.eventTypes.end,t))},t.prototype.doStop=function(){var e=this.pending;if(this.setForceStopped(!1),this.setCallStop(!1),e){this.setPending(!1),oe(this.timer);var t=this.translater.getComputedPosition(),n=t.x,i=t.y;this.transitionTime(),this.translate({x:n,y:i}),this.setForceStopped(!0),this.setCallStop(!0),this.hooks.trigger(this.hooks.eventTypes.forceStop,{x:n,y:i})}return e},t.prototype.stop=function(){var e=this.doStop();e&&this.hooks.trigger(this.hooks.eventTypes.callStop)},t}(ve),Ee=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.move=function(e,t,n,i){if(!n)return this.translate(t),3===this.options.probeType&&this.hooks.trigger(this.hooks.eventTypes.move,t),void this.hooks.trigger(this.hooks.eventTypes.end,t);this.animate(e,t,n,i)},t.prototype.animate=function(e,t,n,i){var r=this,o=C(),s=o+n,a=3===this.options.probeType,c=function(){var l=C();if(l>=s)return r.translate(t),a&&r.hooks.trigger(r.hooks.eventTypes.move,t),void r.hooks.trigger(r.hooks.eventTypes.end,t);l=(l-o)/n;var u=i(l),d={};Object.keys(t).forEach((function(n){var i=e[n],r=t[n];d[n]=(r-i)*u+i})),r.translate(d),a&&r.hooks.trigger(r.hooks.eventTypes.move,d),r.pending&&(r.timer=re(c)),r.pending||(r.callStopWhenPending?r.callStopWhenPending=!1:r.hooks.trigger(r.hooks.eventTypes.end,t))};this.setPending(!0),this.callStopWhenPending&&this.setCallStop(!1),oe(this.timer),c()},t.prototype.doStop=function(){var e=this.pending;if(this.setForceStopped(!1),this.setCallStop(!1),e){this.setPending(!1),oe(this.timer);var t=this.translater.getComputedPosition();this.setForceStopped(!0),this.setCallStop(!0),this.hooks.trigger(this.hooks.eventTypes.forceStop,t)}return e},t.prototype.stop=function(){var e=this.doStop();e&&this.hooks.trigger(this.hooks.eventTypes.callStop)},t}(ve);function be(e,t,n){var i=n.useTransition,r={};return Object.defineProperty(r,"probeType",{enumerable:!0,configurable:!1,get:function(){return n.probeType}}),i?new Ce(e,t,r):new Ee(e,t,r)}var Te,Se,Re,Ie,we=function(){function e(e,t,n){this.wrapper=e,this.options=n,this.hooks=new de(["beforeComputeBoundary","computeBoundary","momentum","end","ignoreHasScroll"]),this.refresh(t)}return e.prototype.start=function(){this.dist=0,this.setMovingDirection(0),this.setDirection(0)},e.prototype.move=function(e){return e=this.hasScroll?e:0,this.setMovingDirection(e),this.performDampingAlgorithm(e,this.options.outOfBoundaryDampingFactor)},e.prototype.setMovingDirection=function(e){this.movingDirection=e>0?-1:e<0?1:0},e.prototype.setDirection=function(e){this.direction=e>0?-1:e<0?1:0},e.prototype.performDampingAlgorithm=function(e,t){var n=this.currentPos+e;return(n>this.minScrollPos||n<this.maxScrollPos)&&(n=n>this.minScrollPos&&this.options.bounces[0]||n<this.maxScrollPos&&this.options.bounces[1]?this.currentPos+e*t:n>this.minScrollPos?this.minScrollPos:this.maxScrollPos),n},e.prototype.end=function(e){var t={duration:0},n=Math.abs(this.currentPos-this.startPos);if(this.options.momentum&&e<this.options.momentumLimitTime&&n>this.options.momentumLimitDistance){var i=-1===this.direction&&this.options.bounces[0]||1===this.direction&&this.options.bounces[1]?this.wrapperSize:0;t=this.hasScroll?this.momentum(this.currentPos,this.startPos,e,this.maxScrollPos,this.minScrollPos,i,this.options):{destination:this.currentPos,duration:0}}else this.hooks.trigger(this.hooks.eventTypes.end,t);return t},e.prototype.momentum=function(e,t,n,i,r,o,s){void 0===s&&(s=this.options);var a=e-t,c=Math.abs(a)/n,l=s.deceleration,u=s.swipeBounceTime,d=s.swipeTime,h=Math.min(d,2*c/l),p={destination:e+c*c/l*(a<0?-1:1),duration:h,rate:15};return this.hooks.trigger(this.hooks.eventTypes.momentum,p,a),p.destination<i?(p.destination=o?Math.max(i-o/4,i-o/p.rate*c):i,p.duration=u):p.destination>r&&(p.destination=o?Math.min(r+o/4,r+o/p.rate*c):r,p.duration=u),p.destination=Math.round(p.destination),p},e.prototype.updateDirection=function(){var e=this.currentPos-this.absStartPos;this.setDirection(e)},e.prototype.refresh=function(e){var t=this.options.rect,n=t.size,i=t.position,r="static"===window.getComputedStyle(this.wrapper,null).position,o=$(this.wrapper);this.wrapperSize=this.wrapper["width"===n?"clientWidth":"clientHeight"],this.setContent(e);var s=$(this.content);this.contentSize=s[n],this.relativeOffset=s[i],r&&(this.relativeOffset-=o[i]),this.computeBoundary(),this.setDirection(0)},e.prototype.setContent=function(e){e!==this.content&&(this.content=e,this.resetState())},e.prototype.resetState=function(){this.currentPos=0,this.startPos=0,this.dist=0,this.setDirection(0),this.setMovingDirection(0),this.resetStartPos()},e.prototype.computeBoundary=function(){this.hooks.trigger(this.hooks.eventTypes.beforeComputeBoundary);var e={minScrollPos:0,maxScrollPos:this.wrapperSize-this.contentSize};e.maxScrollPos<0&&(e.maxScrollPos-=this.relativeOffset,0===this.options.specifiedIndexAsContent&&(e.minScrollPos=-this.relativeOffset)),this.hooks.trigger(this.hooks.eventTypes.computeBoundary,e),this.minScrollPos=e.minScrollPos,this.maxScrollPos=e.maxScrollPos,this.hasScroll=this.options.scrollable&&this.maxScrollPos<this.minScrollPos,!this.hasScroll&&this.minScrollPos<this.maxScrollPos&&(this.maxScrollPos=this.minScrollPos,this.contentSize=this.wrapperSize)},e.prototype.updatePosition=function(e){this.currentPos=e},e.prototype.getCurrentPos=function(){return this.currentPos},e.prototype.checkInBoundary=function(){var e=this.adjustPosition(this.currentPos),t=e===this.getCurrentPos();return{position:e,inBoundary:t}},e.prototype.adjustPosition=function(e){return this.hasScroll||this.hooks.trigger(this.hooks.eventTypes.ignoreHasScroll)?e>this.minScrollPos?e=this.minScrollPos:e<this.maxScrollPos&&(e=this.maxScrollPos):e=this.minScrollPos,e},e.prototype.updateStartPos=function(){this.startPos=this.currentPos},e.prototype.updateAbsStartPos=function(){this.absStartPos=this.currentPos},e.prototype.resetStartPos=function(){this.updateStartPos(),this.updateAbsStartPos()},e.prototype.getAbsDist=function(e){return this.dist+=e,Math.abs(this.dist)},e.prototype.destroy=function(){this.hooks.destroy()},e}(),Oe=(Te={},Te["yes"]=function(e){return!0},Te["no"]=function(e){return e.preventDefault(),!1},Te),ke=(Se={},Se["horizontal"]=(Re={},Re["yes"]="horizontal",Re["no"]="vertical",Re),Se["vertical"]=(Ie={},Ie["yes"]="vertical",Ie["no"]="horizontal",Ie),Se),Me=function(){function e(e,t,n){this.directionLockThreshold=e,this.freeScroll=t,this.eventPassthrough=n,this.reset()}return e.prototype.reset=function(){this.directionLocked=""},e.prototype.checkMovingDirection=function(e,t,n){return this.computeDirectionLock(e,t),this.handleEventPassthrough(n)},e.prototype.adjustDelta=function(e,t){return"horizontal"===this.directionLocked?t=0:"vertical"===this.directionLocked&&(e=0),{deltaX:e,deltaY:t}},e.prototype.computeDirectionLock=function(e,t){""!==this.directionLocked||this.freeScroll||(e>t+this.directionLockThreshold?this.directionLocked="horizontal":t>=e+this.directionLockThreshold?this.directionLocked="vertical":this.directionLocked="none")},e.prototype.handleEventPassthrough=function(e){var t=ke[this.directionLocked];if(t){if(this.eventPassthrough===t["yes"])return Oe["yes"](e);if(this.eventPassthrough===t["no"])return Oe["no"](e)}return!1},e}(),xe=function(e,t,n){return 2===n?[t,-e]:3===n?[-e,-t]:4===n?[-t,e]:[e,t]},Pe=function(){function e(e,t,n,i,r){this.hooks=new de(["start","beforeMove","scrollStart","scroll","beforeEnd","end","scrollEnd","contentNotMoved","detectMovingDirection","coordinateTransformation"]),this.scrollBehaviorX=e,this.scrollBehaviorY=t,this.actionsHandler=n,this.animater=i,this.options=r,this.directionLockAction=new Me(r.directionLockThreshold,r.freeScroll,r.eventPassthrough),this.enabled=!0,this.bindActionsHandler()}return e.prototype.bindActionsHandler=function(){var e=this;this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.start,(function(t){return!e.enabled||e.handleStart(t)})),this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.move,(function(t){var n=t.deltaX,i=t.deltaY,r=t.e;if(!e.enabled)return!0;var o=xe(n,i,e.options.quadrant),s=o[0],a=o[1],c={deltaX:s,deltaY:a};return e.hooks.trigger(e.hooks.eventTypes.coordinateTransformation,c),e.handleMove(c.deltaX,c.deltaY,r)})),this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.end,(function(t){return!e.enabled||e.handleEnd(t)})),this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.click,(function(t){e.enabled&&!t._constructed&&e.handleClick(t)}))},e.prototype.handleStart=function(e){var t=C();this.fingerMoved=!1,this.contentMoved=!1,this.startTime=t,this.directionLockAction.reset(),this.scrollBehaviorX.start(),this.scrollBehaviorY.start(),this.animater.doStop(),this.scrollBehaviorX.resetStartPos(),this.scrollBehaviorY.resetStartPos(),this.hooks.trigger(this.hooks.eventTypes.start,e)},e.prototype.handleMove=function(e,t,n){if(!this.hooks.trigger(this.hooks.eventTypes.beforeMove,n)){var i=this.scrollBehaviorX.getAbsDist(e),r=this.scrollBehaviorY.getAbsDist(t),o=C();if(this.checkMomentum(i,r,o))return!0;if(this.directionLockAction.checkMovingDirection(i,r,n))return this.actionsHandler.setInitiated(),!0;var s=this.directionLockAction.adjustDelta(e,t),a=this.scrollBehaviorX.getCurrentPos(),c=this.scrollBehaviorX.move(s.deltaX),l=this.scrollBehaviorY.getCurrentPos(),u=this.scrollBehaviorY.move(s.deltaY);if(!this.hooks.trigger(this.hooks.eventTypes.detectMovingDirection)){this.fingerMoved||(this.fingerMoved=!0);var d=c!==a||u!==l;this.contentMoved||d||this.hooks.trigger(this.hooks.eventTypes.contentNotMoved),!this.contentMoved&&d&&(this.contentMoved=!0,this.hooks.trigger(this.hooks.eventTypes.scrollStart)),this.contentMoved&&d&&(this.animater.translate({x:c,y:u}),this.dispatchScroll(o))}}},e.prototype.dispatchScroll=function(e){e-this.startTime>this.options.momentumLimitTime&&(this.startTime=e,this.scrollBehaviorX.updateStartPos(),this.scrollBehaviorY.updateStartPos(),1===this.options.probeType&&this.hooks.trigger(this.hooks.eventTypes.scroll,this.getCurrentPos())),this.options.probeType>1&&this.hooks.trigger(this.hooks.eventTypes.scroll,this.getCurrentPos())},e.prototype.checkMomentum=function(e,t,n){return n-this.endTime>this.options.momentumLimitTime&&t<this.options.momentumLimitDistance&&e<this.options.momentumLimitDistance},e.prototype.handleEnd=function(e){if(!this.hooks.trigger(this.hooks.eventTypes.beforeEnd,e)){var t=this.getCurrentPos();if(this.scrollBehaviorX.updateDirection(),this.scrollBehaviorY.updateDirection(),this.hooks.trigger(this.hooks.eventTypes.end,e,t))return!0;t=this.ensureIntegerPos(t),this.animater.translate(t),this.endTime=C();var n=this.endTime-this.startTime;this.hooks.trigger(this.hooks.eventTypes.scrollEnd,t,n)}},e.prototype.ensureIntegerPos=function(e){this.ensuringInteger=!0;var t=e.x,n=e.y,i=this.scrollBehaviorX,r=i.minScrollPos,o=i.maxScrollPos,s=this.scrollBehaviorY,a=s.minScrollPos,c=s.maxScrollPos;return t=t>0?Math.ceil(t):Math.floor(t),n=n>0?Math.ceil(n):Math.floor(n),t=S(t,o,r),n=S(n,c,a),{x:t,y:n}},e.prototype.handleClick=function(e){H(e.target,this.options.preventDefaultException)||(e.preventDefault(),e.stopPropagation())},e.prototype.getCurrentPos=function(){return{x:this.scrollBehaviorX.getCurrentPos(),y:this.scrollBehaviorY.getCurrentPos()}},e.prototype.refresh=function(){this.endTime=0},e.prototype.destroy=function(){this.hooks.destroy()},e}();function Ae(e){var t=["click","bindToWrapper","disableMouse","disableTouch","preventDefault","stopPropagation","tagException","preventDefaultException","autoEndDistance"].reduce((function(t,n){return t[n]=e[n],t}),{});return t}function De(e,t,n,i){var r=["momentum","momentumLimitTime","momentumLimitDistance","deceleration","swipeBounceTime","swipeTime","outOfBoundaryDampingFactor","specifiedIndexAsContent"].reduce((function(t,n){return t[n]=e[n],t}),{});return r.scrollable=!!e[t],r.bounces=n,r.rect=i,r}function Ne(e,t,n){n.forEach((function(n){var i,r;"string"===typeof n?i=r=n:(i=n.source,r=n.target),e.on(i,(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.trigger.apply(t,c([r],e))}))}))}function Le(e,t){for(var n=Object.keys(e),i=0,r=n;i<r.length;i++){var o=r[i];if(e[o]!==t[o])return!1}return!0}var Ue=1,Be=function(){function e(e,t,n){this.wrapper=e,this.content=t,this.resizeTimeout=0,this.hooks=new de(["beforeStart","beforeMove","beforeScrollStart","scrollStart","scroll","beforeEnd","scrollEnd","resize","touchEnd","end","flick","scrollCancel","momentum","scrollTo","minDistanceScroll","scrollToElement","beforeRefresh"]),this.options=n;var i=this.options.bounce,r=i.left,o=i.right,s=i.top,a=i.bottom;this.scrollBehaviorX=new we(e,t,De(n,"scrollX",[r,o],{size:"width",position:"left"})),this.scrollBehaviorY=new we(e,t,De(n,"scrollY",[s,a],{size:"height",position:"top"})),this.translater=new _e(this.content),this.animater=be(this.content,this.translater,this.options),this.actionsHandler=new ge(this.options.bindToTarget?this.content:e,Ae(this.options)),this.actions=new Pe(this.scrollBehaviorX,this.scrollBehaviorY,this.actionsHandler,this.animater,this.options);var c=this.resize.bind(this);this.resizeRegister=new he(window,[{name:"orientationchange",handler:c},{name:"resize",handler:c}]),this.registerTransitionEnd(),this.init()}return e.prototype.init=function(){var e=this;this.bindTranslater(),this.bindAnimater(),this.bindActions(),this.hooks.on(this.hooks.eventTypes.scrollEnd,(function(){e.togglePointerEvents(!0)}))},e.prototype.registerTransitionEnd=function(){this.transitionEndRegister=new he(this.content,[{name:j.transitionEnd,handler:this.transitionEnd.bind(this)}])},e.prototype.bindTranslater=function(){var e=this,t=this.translater.hooks;t.on(t.eventTypes.beforeTranslate,(function(t){e.options.translateZ&&t.push(e.options.translateZ)})),t.on(t.eventTypes.translate,(function(t){var n=e.getCurrentPos();e.updatePositions(t),!0!==e.actions.ensuringInteger?t.x===n.x&&t.y===n.y||e.togglePointerEvents(!1):e.actions.ensuringInteger=!1}))},e.prototype.bindAnimater=function(){var e=this;this.animater.hooks.on(this.animater.hooks.eventTypes.end,(function(t){e.resetPosition(e.options.bounceTime)||(e.animater.setPending(!1),e.hooks.trigger(e.hooks.eventTypes.scrollEnd,t))})),Ne(this.animater.hooks,this.hooks,[{source:this.animater.hooks.eventTypes.move,target:this.hooks.eventTypes.scroll},{source:this.animater.hooks.eventTypes.forceStop,target:this.hooks.eventTypes.scrollEnd}])},e.prototype.bindActions=function(){var e=this,t=this.actions;Ne(t.hooks,this.hooks,[{source:t.hooks.eventTypes.start,target:this.hooks.eventTypes.beforeStart},{source:t.hooks.eventTypes.start,target:this.hooks.eventTypes.beforeScrollStart},{source:t.hooks.eventTypes.beforeMove,target:this.hooks.eventTypes.beforeMove},{source:t.hooks.eventTypes.scrollStart,target:this.hooks.eventTypes.scrollStart},{source:t.hooks.eventTypes.scroll,target:this.hooks.eventTypes.scroll},{source:t.hooks.eventTypes.beforeEnd,target:this.hooks.eventTypes.beforeEnd}]),t.hooks.on(t.hooks.eventTypes.end,(function(n,i){return e.hooks.trigger(e.hooks.eventTypes.touchEnd,i),!!e.hooks.trigger(e.hooks.eventTypes.end,i)||(!(t.fingerMoved||(e.hooks.trigger(e.hooks.eventTypes.scrollCancel),!e.checkClick(n)))||(e.resetPosition(e.options.bounceTime,ee.bounce)?(e.animater.setForceStopped(!1),!0):void 0))})),t.hooks.on(t.hooks.eventTypes.scrollEnd,(function(n,i){var r=Math.abs(n.x-e.scrollBehaviorX.startPos),o=Math.abs(n.y-e.scrollBehaviorY.startPos);if(e.checkFlick(i,r,o))return e.animater.setForceStopped(!1),void e.hooks.trigger(e.hooks.eventTypes.flick);e.momentum(n,i)?e.animater.setForceStopped(!1):(t.contentMoved&&e.hooks.trigger(e.hooks.eventTypes.scrollEnd,n),e.animater.forceStopped&&e.animater.setForceStopped(!1))}))},e.prototype.checkFlick=function(e,t,n){var i=1;if(this.hooks.events.flick.length>1&&e<this.options.flickLimitTime&&t<this.options.flickLimitDistance&&n<this.options.flickLimitDistance&&(n>i||t>i))return!0},e.prototype.momentum=function(e,t){var n={time:0,easing:ee.swiper,newX:e.x,newY:e.y},i=this.scrollBehaviorX.end(t),r=this.scrollBehaviorY.end(t);if(n.newX=b(i.destination)?n.newX:i.destination,n.newY=b(r.destination)?n.newY:r.destination,n.time=Math.max(i.duration,r.duration),this.hooks.trigger(this.hooks.eventTypes.momentum,n,this),n.newX!==e.x||n.newY!==e.y)return(n.newX>this.scrollBehaviorX.minScrollPos||n.newX<this.scrollBehaviorX.maxScrollPos||n.newY>this.scrollBehaviorY.minScrollPos||n.newY<this.scrollBehaviorY.maxScrollPos)&&(n.easing=ee.swipeBounce),this.scrollTo(n.newX,n.newY,n.time,n.easing),!0},e.prototype.checkClick=function(e){var t={preventClick:this.animater.forceStopped};if(this.hooks.trigger(this.hooks.eventTypes.checkClick))return this.animater.setForceStopped(!1),!0;if(!t.preventClick){var n=this.options.dblclick,i=!1;if(n&&this.lastClickTime){var r=n.delay,o=void 0===r?300:r;C()-this.lastClickTime<o&&(i=!0,G(e))}return this.options.tap&&W(e,this.options.tap),this.options.click&&!H(e.target,this.options.preventDefaultException)&&q(e),this.lastClickTime=i?null:C(),!0}return!1},e.prototype.resize=function(){var e=this;this.actions.enabled&&(g&&(this.wrapper.scrollTop=0),clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout((function(){e.hooks.trigger(e.hooks.eventTypes.resize)}),this.options.resizePolling))},e.prototype.transitionEnd=function(e){if(e.target===this.content&&this.animater.pending){var t=this.animater;t.transitionTime(),this.resetPosition(this.options.bounceTime,ee.bounce)||(this.animater.setPending(!1),3!==this.options.probeType&&this.hooks.trigger(this.hooks.eventTypes.scrollEnd,this.getCurrentPos()))}},e.prototype.togglePointerEvents=function(e){void 0===e&&(e=!0);for(var t=this.content.children.length?this.content.children:[this.content],n=e?"auto":"none",i=0;i<t.length;i++){var r=t[i];r.isBScrollContainer||(r.style.pointerEvents=n)}},e.prototype.refresh=function(e){var t=this.setContent(e);this.hooks.trigger(this.hooks.eventTypes.beforeRefresh),this.scrollBehaviorX.refresh(e),this.scrollBehaviorY.refresh(e),t&&(this.translater.setContent(e),this.animater.setContent(e),this.transitionEndRegister.destroy(),this.registerTransitionEnd(),this.options.bindToTarget&&this.actionsHandler.setContent(e)),this.actions.refresh(),this.wrapperOffset=P(this.wrapper)},e.prototype.setContent=function(e){var t=e!==this.content;return t&&(this.content=e),t},e.prototype.scrollBy=function(e,t,n,i){void 0===n&&(n=0);var r=this.getCurrentPos(),o=r.x,s=r.y;i=i||ee.bounce,e+=o,t+=s,this.scrollTo(e,t,n,i)},e.prototype.scrollTo=function(e,t,n,i,r){void 0===n&&(n=0),void 0===i&&(i=ee.bounce),void 0===r&&(r={start:{},end:{}});var s=this.options.useTransition?i.style:i.fn,a=this.getCurrentPos(),c=o({x:a.x,y:a.y},r.start),l=o({x:e,y:t},r.end);if(this.hooks.trigger(this.hooks.eventTypes.scrollTo,l),!Le(c,l)){var u=Math.abs(l.x-c.x),d=Math.abs(l.y-c.y);u<Ue&&d<Ue&&(n=0,this.hooks.trigger(this.hooks.eventTypes.minDistanceScroll)),this.animater.move(c,l,n,s)}},e.prototype.scrollToElement=function(e,t,n,i,r){var o=k(e),s=P(o),a=function(e,t,n){return"number"===typeof e?e:e?Math.round(t/2-n/2):0};n=a(n,o.offsetWidth,this.wrapper.offsetWidth),i=a(i,o.offsetHeight,this.wrapper.offsetHeight);var c=function(e,t,n,i){return e-=t,e=i.adjustPosition(e-n),e};s.left=c(s.left,this.wrapperOffset.left,n,this.scrollBehaviorX),s.top=c(s.top,this.wrapperOffset.top,i,this.scrollBehaviorY),this.hooks.trigger(this.hooks.eventTypes.scrollToElement,o,s)||this.scrollTo(s.left,s.top,t,r)},e.prototype.resetPosition=function(e,t){void 0===e&&(e=0),void 0===t&&(t=ee.bounce);var n=this.scrollBehaviorX.checkInBoundary(),i=n.position,r=n.inBoundary,o=this.scrollBehaviorY.checkInBoundary(),s=o.position,a=o.inBoundary;return(!r||!a)&&(m&&this.reflow(),this.scrollTo(i,s,e,t),!0)},e.prototype.reflow=function(){this._reflow=this.content.offsetHeight},e.prototype.updatePositions=function(e){this.scrollBehaviorX.updatePosition(e.x),this.scrollBehaviorY.updatePosition(e.y)},e.prototype.getCurrentPos=function(){return this.actions.getCurrentPos()},e.prototype.enable=function(){this.actions.enabled=!0},e.prototype.disable=function(){oe(this.animater.timer),this.actions.enabled=!1},e.prototype.destroy=function(){var e=this,t=["resizeRegister","transitionEndRegister","actionsHandler","actions","hooks","animater","translater","scrollBehaviorX","scrollBehaviorY"];t.forEach((function(t){return e[t].destroy()}))},e}(),Ve=function(e){function t(t,n){var i=e.call(this,["refresh","contentChanged","enable","disable","beforeScrollStart","scrollStart","scroll","scrollEnd","scrollCancel","touchEnd","flick","destroy"])||this,r=k(t);return r?(i.plugins={},i.options=(new fe).merge(n).process(),i.setContent(r).valid?(i.hooks=new de(["refresh","enable","disable","destroy","beforeInitialScrollTo","contentChanged"]),i.init(r),i):i):(u("Can not resolve the wrapper DOM."),i)}return r(t,e),t.use=function(e){var n=e.pluginName,i=t.plugins.some((function(t){return e===t.ctor}));return i?t:b(n)?(u("Plugin Class must specify plugin's name in static property by 'pluginName' field."),t):(t.pluginsMap[n]=!0,t.plugins.push({name:n,applyOrder:e.applyOrder,ctor:e}),t)},t.prototype.setContent=function(e){var t=!1,n=!0,i=e.children[this.options.specifiedIndexAsContent];return i?(t=this.content!==i,t&&(this.content=i)):(u("The wrapper need at least one child element to be content element to scroll."),n=!1),{valid:n,contentChanged:t}},t.prototype.init=function(e){var t=this;this.wrapper=e,e.isBScrollContainer=!0,this.scroller=new Be(e,this.content,this.options),this.scroller.hooks.on(this.scroller.hooks.eventTypes.resize,(function(){t.refresh()})),this.eventBubbling(),this.handleAutoBlur(),this.enable(),this.proxy(l),this.applyPlugins(),this.refreshWithoutReset(this.content);var n=this.options,i=n.startX,r=n.startY,o={x:i,y:r};this.hooks.trigger(this.hooks.eventTypes.beforeInitialScrollTo,o)||this.scroller.scrollTo(o.x,o.y)},t.prototype.applyPlugins=function(){var e=this,n=this.options;t.plugins.sort((function(e,t){var n,i=(n={},n["pre"]=-1,n["post"]=1,n),r=e.applyOrder?i[e.applyOrder]:0,o=t.applyOrder?i[t.applyOrder]:0;return r-o})).forEach((function(t){var i=t.ctor;n[t.name]&&"function"===typeof i&&(e.plugins[t.name]=new i(e))}))},t.prototype.handleAutoBlur=function(){this.options.autoBlur&&this.on(this.eventTypes.beforeScrollStart,(function(){var e=document.activeElement;!e||"INPUT"!==e.tagName&&"TEXTAREA"!==e.tagName||e.blur()}))},t.prototype.eventBubbling=function(){Ne(this.scroller.hooks,this,[this.eventTypes.beforeScrollStart,this.eventTypes.scrollStart,this.eventTypes.scroll,this.eventTypes.scrollEnd,this.eventTypes.scrollCancel,this.eventTypes.touchEnd,this.eventTypes.flick])},t.prototype.refreshWithoutReset=function(e){this.scroller.refresh(e),this.hooks.trigger(this.hooks.eventTypes.refresh,e),this.trigger(this.eventTypes.refresh,e)},t.prototype.proxy=function(e){var t=this;e.forEach((function(e){var n=e.key,i=e.sourceKey;ue(t,i,n)}))},t.prototype.refresh=function(){var e=this.setContent(this.wrapper),t=e.contentChanged,n=e.valid;if(n){var i=this.content;this.refreshWithoutReset(i),t&&(this.hooks.trigger(this.hooks.eventTypes.contentChanged,i),this.trigger(this.eventTypes.contentChanged,i)),this.scroller.resetPosition()}},t.prototype.enable=function(){this.scroller.enable(),this.hooks.trigger(this.hooks.eventTypes.enable),this.trigger(this.eventTypes.enable)},t.prototype.disable=function(){this.scroller.disable(),this.hooks.trigger(this.hooks.eventTypes.disable),this.trigger(this.eventTypes.disable)},t.prototype.destroy=function(){this.hooks.trigger(this.hooks.eventTypes.destroy),this.trigger(this.eventTypes.destroy),this.scroller.destroy()},t.prototype.eventRegister=function(e){this.registerType(e)},t.plugins=[],t.pluginsMap={},t}(de);function je(e,t){var n=new Ve(e,t);return n}je.use=Ve.use,je.plugins=Ve.plugins,je.pluginsMap=Ve.pluginsMap;var Fe=je,$e=function(){function e(e){this.scroll=e,this.wheelEndTimer=0,this.wheelMoveTimer=0,this.wheelStart=!1,this.init()}return e.prototype.init=function(){this.handleBScroll(),this.handleOptions(),this.handleHooks(),this.registerEvent()},e.prototype.handleBScroll=function(){this.scroll.registerType(["alterOptions","mousewheelStart","mousewheelMove","mousewheelEnd"])},e.prototype.handleOptions=function(){var e=!0===this.scroll.options.mouseWheel?{}:this.scroll.options.mouseWheel,t={speed:20,invert:!1,easeTime:300,discreteTime:400,throttleTime:0,dampingFactor:.1};this.mouseWheelOpt=E(t,e)},e.prototype.handleHooks=function(){this.hooksFn=[],this.registerHooks(this.scroll.hooks,"destroy",this.destroy)},e.prototype.registerEvent=function(){this.eventRegister=new he(this.scroll.scroller.wrapper,[{name:"wheel",handler:this.wheelHandler.bind(this)},{name:"mousewheel",handler:this.wheelHandler.bind(this)},{name:"DOMMouseScroll",handler:this.wheelHandler.bind(this)}])},e.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},e.prototype.wheelHandler=function(e){if(this.scroll.enabled){this.beforeHandler(e),this.wheelStart||(this.wheelStartHandler(e),this.wheelStart=!0);var t=this.getWheelDelta(e);this.wheelMoveHandler(t),this.wheelEndDetector(t)}},e.prototype.wheelStartHandler=function(e){this.cleanCache();var t=this.scroll.scroller,n=t.scrollBehaviorX,i=t.scrollBehaviorY;n.setMovingDirection(0),i.setMovingDirection(0),n.setDirection(0),i.setDirection(0),this.scroll.trigger(this.scroll.eventTypes.alterOptions,this.mouseWheelOpt),this.scroll.trigger(this.scroll.eventTypes.mousewheelStart)},e.prototype.cleanCache=function(){this.deltaCache=[]},e.prototype.wheelMoveHandler=function(e){var t=this,n=this.mouseWheelOpt,i=n.throttleTime,r=n.dampingFactor;if(i&&this.wheelMoveTimer)this.deltaCache.push(e);else{var o=this.deltaCache.reduce((function(e,t){return{x:e.x+t.x,y:e.y+t.y}}),{x:0,y:0});this.cleanCache();var s=this.scroll.scroller,a=s.scrollBehaviorX,c=s.scrollBehaviorY;a.setMovingDirection(-e.directionX),c.setMovingDirection(-e.directionY),a.setDirection(e.x),c.setDirection(e.y);var l=a.performDampingAlgorithm(Math.round(e.x)+o.x,r),u=c.performDampingAlgorithm(Math.round(e.y)+o.x,r);if(!this.scroll.trigger(this.scroll.eventTypes.mousewheelMove,{x:l,y:u})){var d=this.getEaseTime();l===this.scroll.x&&u===this.scroll.y||this.scroll.scrollTo(l,u,d)}i&&(this.wheelMoveTimer=window.setTimeout((function(){t.wheelMoveTimer=0}),i))}},e.prototype.wheelEndDetector=function(e){var t=this;window.clearTimeout(this.wheelEndTimer),this.wheelEndTimer=window.setTimeout((function(){t.wheelStart=!1,window.clearTimeout(t.wheelMoveTimer),t.wheelMoveTimer=0,t.scroll.trigger(t.scroll.eventTypes.mousewheelEnd,e)}),this.mouseWheelOpt.discreteTime)},e.prototype.getWheelDelta=function(e){var t=this.mouseWheelOpt,n=t.speed,i=t.invert,r=0,o=0,s=i?-1:1;switch(!0){case"deltaX"in e:1===e.deltaMode?(r=-e.deltaX*n,o=-e.deltaY*n):(r=-e.deltaX,o=-e.deltaY);break;case"wheelDeltaX"in e:r=e.wheelDeltaX/120*n,o=e.wheelDeltaY/120*n;break;case"wheelDelta"in e:r=o=e.wheelDelta/120*n;break;case"detail"in e:r=o=-e.detail/3*n;break}r*=s,o*=s,this.scroll.hasVerticalScroll||(Math.abs(o)>Math.abs(r)&&(r=o),o=0),this.scroll.hasHorizontalScroll||(r=0);var a=r>0?-1:r<0?1:0,c=o>0?-1:o<0?1:0;return{x:r,y:o,directionX:a,directionY:c}},e.prototype.beforeHandler=function(e){var t=this.scroll.options,n=t.preventDefault,i=t.stopPropagation,r=t.preventDefaultException;n&&!H(e.target,r)&&e.preventDefault(),i&&e.stopPropagation()},e.prototype.getEaseTime=function(){var e=100,t=this.mouseWheelOpt.easeTime;return t<e&&u("easeTime should be greater than 100.If mouseWheel easeTime is too small,scrollEnd will be triggered many times."),Math.max(t,e)},e.prototype.destroy=function(){this.eventRegister.destroy(),window.clearTimeout(this.wheelEndTimer),window.clearTimeout(this.wheelMoveTimer),this.hooksFn.forEach((function(e){var t=e[0],n=e[1],i=e[2];t.off(n,i)}))},e.pluginName="mouseWheel",e.applyOrder="pre",e}(),He=function(){function e(e){this.scroll=e,this.stopObserver=!1,this.init()}return e.prototype.init=function(){this.handleMutationObserver(),this.handleHooks()},e.prototype.handleMutationObserver=function(){var e=this;if("undefined"!==typeof MutationObserver){var t=0;this.observer=new MutationObserver((function(n){e.mutationObserverHandler(n,t)})),this.startObserve(this.observer)}else this.checkDOMUpdate()},e.prototype.handleHooks=function(){var e=this;this.hooksFn=[],this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.contentChanged,(function(){e.stopObserve(),e.handleMutationObserver()})),this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.enable,(function(){e.stopObserver&&e.handleMutationObserver()})),this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.disable,(function(){e.stopObserve()})),this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.destroy,(function(){e.destroy()}))},e.prototype.mutationObserverHandler=function(e,t){var n=this;if(!this.shouldNotRefresh()){for(var i=!1,r=!1,o=0;o<e.length;o++){var s=e[o];if("attributes"!==s.type){i=!0;break}if(s.target!==this.scroll.scroller.content){r=!0;break}}i?this.scroll.refresh():r&&(clearTimeout(t),t=window.setTimeout((function(){n.shouldNotRefresh()||n.scroll.refresh()}),60))}},e.prototype.startObserve=function(e){var t={attributes:!0,childList:!0,subtree:!0};e.observe(this.scroll.scroller.content,t)},e.prototype.shouldNotRefresh=function(){var e=this.scroll.scroller,t=e.scrollBehaviorX,n=e.scrollBehaviorY,i=t.currentPos>t.minScrollPos||t.currentPos<t.maxScrollPos||n.currentPos>n.minScrollPos||n.currentPos<n.maxScrollPos;return e.animater.pending||i},e.prototype.checkDOMUpdate=function(){var e=this,t=this.scroll.scroller.content,n=$(t),i=n.width,r=n.height,o=function(){if(!e.stopObserver){n=$(t);var o=n.width,a=n.height;i===o&&r===a||e.scroll.refresh(),i=o,r=a,s()}},s=function(){setTimeout((function(){o()}),1e3)};s()},e.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},e.prototype.stopObserve=function(){this.stopObserver=!0,this.observer&&this.observer.disconnect()},e.prototype.destroy=function(){this.stopObserve(),this.hooksFn.forEach((function(e){var t=e[0],n=e[1],i=e[2];t.off(n,i)})),this.hooksFn.length=0},e.pluginName="observeDOM",e}(),Ke="plugins.pullDownRefresh",We=[{key:"finishPullDown",name:"finishPullDown"},{key:"openPullDown",name:"openPullDown"},{key:"closePullDown",name:"closePullDown"},{key:"autoPullDownRefresh",name:"autoPullDownRefresh"}],qe=We.map((function(e){return{key:e.key,sourceKey:Ke+"."+e.name}})),Ge="pullingDown",ze="enterThreshold",Ye="leaveThreshold",Je=function(){function e(e){this.scroll=e,this.pulling=0,this.thresholdBoundary=0,this.init()}return e.prototype.setPulling=function(e){this.pulling=e},e.prototype.setThresholdBoundary=function(e){this.thresholdBoundary=e},e.prototype.init=function(){this.handleBScroll(),this.handleOptions(this.scroll.options.pullDownRefresh),this.handleHooks(),this.watch()},e.prototype.handleBScroll=function(){this.scroll.registerType([Ge,ze,Ye]),this.scroll.proxy(qe)},e.prototype.handleOptions=function(e){void 0===e&&(e={}),e=!0===e?{}:e;var t={threshold:90,stop:40};this.options=E(t,e),this.scroll.options.probeType=3},e.prototype.handleHooks=function(){var e=this;this.hooksFn=[];var t=this.scroll.scroller,n=t.scrollBehaviorY;this.currentMinScrollY=this.cachedOriginanMinScrollY=n.minScrollPos,this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.contentChanged,(function(){e.finishPullDown()})),this.registerHooks(n.hooks,n.hooks.eventTypes.computeBoundary,(function(t){t.maxScrollPos>0&&(t.maxScrollPos=-1),t.minScrollPos=e.currentMinScrollY})),this.hasMouseWheelPlugin()&&(this.registerHooks(this.scroll,this.scroll.eventTypes.alterOptions,(function(e){var t=300,n=350;e.discreteTime=t,e.easeTime=n})),this.registerHooks(this.scroll,this.scroll.eventTypes.mousewheelEnd,(function(){t.hooks.trigger(t.hooks.eventTypes.end)})))},e.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},e.prototype.hasMouseWheelPlugin=function(){return!!this.scroll.eventTypes.alterOptions},e.prototype.watch=function(){var e=this.scroll.scroller;this.watching=!0,this.registerHooks(e.hooks,e.hooks.eventTypes.end,this.checkPullDown),this.registerHooks(this.scroll,this.scroll.eventTypes.scrollStart,this.resetStateBeforeScrollStart),this.registerHooks(this.scroll,this.scroll.eventTypes.scroll,this.checkLocationOfThresholdBoundary),this.hasMouseWheelPlugin()&&this.registerHooks(this.scroll,this.scroll.eventTypes.mousewheelStart,this.resetStateBeforeScrollStart)},e.prototype.resetStateBeforeScrollStart=function(){this.isFetchingStatus()||(this.setPulling(1),this.setThresholdBoundary(0))},e.prototype.checkLocationOfThresholdBoundary=function(){if(1===this.pulling){var e=this.scroll,t=1!==this.thresholdBoundary&&this.locateInsideThresholdBoundary(),n=2!==this.thresholdBoundary&&!this.locateInsideThresholdBoundary();t&&(this.setThresholdBoundary(1),e.trigger(ze)),n&&(this.setThresholdBoundary(2),e.trigger(Ye))}},e.prototype.locateInsideThresholdBoundary=function(){return this.scroll.y<=this.options.threshold},e.prototype.unwatch=function(){var e=this.scroll,t=e.scroller;this.watching=!1,t.hooks.off(t.hooks.eventTypes.end,this.checkPullDown),e.off(e.eventTypes.scrollStart,this.resetStateBeforeScrollStart),e.off(e.eventTypes.scroll,this.checkLocationOfThresholdBoundary),this.hasMouseWheelPlugin()&&e.off(e.eventTypes.mousewheelStart,this.resetStateBeforeScrollStart)},e.prototype.checkPullDown=function(){var e=this.options,t=e.threshold,n=e.stop;return!(this.scroll.y<t)&&(1===this.pulling&&(this.modifyBehaviorYBoundary(n),this.setPulling(2),this.scroll.trigger(Ge)),this.scroll.scrollTo(this.scroll.x,n,this.scroll.options.bounceTime,ee.bounce),this.isFetchingStatus())},e.prototype.isFetchingStatus=function(){return 2===this.pulling},e.prototype.modifyBehaviorYBoundary=function(e){var t=this.scroll.scroller.scrollBehaviorY;this.cachedOriginanMinScrollY=t.minScrollPos,this.currentMinScrollY=e,t.computeBoundary()},e.prototype.finishPullDown=function(){if(this.isFetchingStatus()){var e=this.scroll.scroller.scrollBehaviorY;this.currentMinScrollY=this.cachedOriginanMinScrollY,e.computeBoundary(),this.setPulling(0),this.scroll.resetPosition(this.scroll.options.bounceTime,ee.bounce)}},e.prototype.openPullDown=function(e){void 0===e&&(e={}),this.handleOptions(e),this.watching||this.watch()},e.prototype.closePullDown=function(){this.unwatch()},e.prototype.autoPullDownRefresh=function(){var e=this.options,t=e.threshold,n=e.stop;!this.isFetchingStatus()&&this.watching&&(this.modifyBehaviorYBoundary(n),this.scroll.trigger(this.scroll.eventTypes.scrollStart),this.scroll.scrollTo(this.scroll.x,t),this.setPulling(2),this.scroll.trigger(Ge),this.scroll.scrollTo(this.scroll.x,n,this.scroll.options.bounceTime,ee.bounce))},e.pluginName="pullDownRefresh",e}(),Xe="plugins.pullUpLoad",Qe=[{key:"finishPullUp",name:"finishPullUp"},{key:"openPullUp",name:"openPullUp"},{key:"closePullUp",name:"closePullUp"},{key:"autoPullUpLoad",name:"autoPullUpLoad"}],Ze=Qe.map((function(e){return{key:e.key,sourceKey:Xe+"."+e.name}})),et="pullingUp",tt=function(){function e(e){this.scroll=e,this.pulling=!1,this.watching=!1,this.init()}return e.prototype.init=function(){this.handleBScroll(),this.handleOptions(this.scroll.options.pullUpLoad),this.handleHooks(),this.watch()},e.prototype.handleBScroll=function(){this.scroll.registerType([et]),this.scroll.proxy(Ze)},e.prototype.handleOptions=function(e){void 0===e&&(e={}),e=!0===e?{}:e;var t={threshold:0};this.options=E(t,e),this.scroll.options.probeType=3},e.prototype.handleHooks=function(){var e=this;this.hooksFn=[];var t=this.scroll.scroller.scrollBehaviorY;this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.contentChanged,(function(){e.finishPullUp()})),this.registerHooks(t.hooks,t.hooks.eventTypes.computeBoundary,(function(e){e.maxScrollPos>0&&(e.maxScrollPos=-1)}))},e.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},e.prototype.watch=function(){this.watching||(this.watching=!0,this.registerHooks(this.scroll,this.scroll.eventTypes.scroll,this.checkPullUp))},e.prototype.unwatch=function(){this.watching=!1,this.scroll.off(this.scroll.eventTypes.scroll,this.checkPullUp)},e.prototype.checkPullUp=function(e){var t=this,n=this.options.threshold;1===this.scroll.movingDirectionY&&e.y<=this.scroll.maxScrollY+n&&(this.pulling=!0,this.scroll.once(this.scroll.eventTypes.scrollEnd,(function(){t.pulling=!1})),this.unwatch(),this.scroll.trigger(et))},e.prototype.finishPullUp=function(){var e=this;this.scroll.scroller.scrollBehaviorY.setMovingDirection(0),this.pulling?this.scroll.once(this.scroll.eventTypes.scrollEnd,(function(){e.watch()})):this.watch()},e.prototype.openPullUp=function(e){void 0===e&&(e={}),this.handleOptions(e),this.watch()},e.prototype.closePullUp=function(){this.unwatch()},e.prototype.autoPullUpLoad=function(){var e=this.options.threshold,t=this.scroll.scroller.scrollBehaviorY;if(!this.pulling&&this.watching){var n=-1,i=t.maxScrollPos+e+n;this.scroll.scroller.scrollBehaviorY.setMovingDirection(n),this.scroll.scrollTo(this.scroll.x,i,this.scroll.options.bounceTime)}},e.pluginName="pullUpLoad",e}(),nt=function(){function e(e,t){this.indicator=e,this.options=t,this.hooks=new de(["touchStart","touchMove","touchEnd"]),this.registerEvents()}return e.prototype.registerEvents=function(){var e=this.options,t=e.disableMouse,n=e.disableTouch,i=[],r=[],o=[];t||(i.push({name:"mousedown",handler:this.start.bind(this)}),r.push({name:"mousemove",handler:this.move.bind(this)}),o.push({name:"mouseup",handler:this.end.bind(this)})),n||(i.push({name:"touchstart",handler:this.start.bind(this)}),r.push({name:"touchmove",handler:this.move.bind(this)}),o.push({name:"touchend",handler:this.end.bind(this)},{name:"touchcancel",handler:this.end.bind(this)})),this.startEventRegister=new he(this.indicator.indicatorEl,i),this.moveEventRegister=new he(window,r),this.endEventRegister=new he(window,o)},e.prototype.BScrollIsDisabled=function(){return!this.indicator.scroll.enabled},e.prototype.start=function(e){if(!this.BScrollIsDisabled()){var t=e.touches?e.touches[0]:e;e.preventDefault(),e.stopPropagation(),this.initiated=!0,this.lastPoint=t[this.indicator.keysMap.point],this.hooks.trigger(this.hooks.eventTypes.touchStart)}},e.prototype.move=function(e){if(this.initiated){var t=e.touches?e.touches[0]:e,n=t[this.indicator.keysMap.point];e.preventDefault(),e.stopPropagation();var i=n-this.lastPoint;this.lastPoint=n,this.hooks.trigger(this.hooks.eventTypes.touchMove,i)}},e.prototype.end=function(e){this.initiated&&(this.initiated=!1,e.preventDefault(),e.stopPropagation(),this.hooks.trigger(this.hooks.eventTypes.touchEnd))},e.prototype.destroy=function(){this.startEventRegister.destroy(),this.moveEventRegister.destroy(),this.endEventRegister.destroy()},e}(),it=function(){function e(e,t){this.scroll=e,this.options=t,this.hooksFn=[],this.wrapper=t.wrapper,this.direction=t.direction,this.indicatorEl=this.wrapper.children[0],this.keysMap=this.getKeysMap(),this.handleFade(),this.handleHooks()}return e.prototype.handleFade=function(){this.options.fade&&(this.wrapper.style.opacity="0")},e.prototype.handleHooks=function(){var e=this,t=this.options,n=t.fade,i=t.interactive,r=t.scrollbarTrackClickable,o=this.scroll,s=o.hooks,a=o.scroller.translater.hooks,c=o.scroller.animater.hooks;if(this.registerHooks(s,s.eventTypes.refresh,this.refresh),this.registerHooks(a,a.eventTypes.translate,(function(t){var n=e.keysMap.hasScroll;e.scroll[n]&&e.updatePosition(t)})),this.registerHooks(c,c.eventTypes.time,this.transitionTime),this.registerHooks(c,c.eventTypes.timeFunction,this.transitionTimingFunction),n&&(this.registerHooks(o,o.eventTypes.scrollEnd,(function(){e.fade()})),this.registerHooks(o,o.eventTypes.scrollStart,(function(){e.fade(!0)})),o.eventTypes.mousewheelStart&&o.eventTypes.mousewheelEnd&&(this.registerHooks(o,o.eventTypes.mousewheelStart,(function(){e.fade(!0)})),this.registerHooks(o,o.eventTypes.mousewheelMove,(function(){e.fade(!0)})),this.registerHooks(o,o.eventTypes.mousewheelEnd,(function(){e.fade()})))),i){var l=this.scroll.options,u=l.disableMouse,d=l.disableTouch;this.eventHandler=new nt(this,{disableMouse:u,disableTouch:d});var h=this.eventHandler.hooks;this.registerHooks(h,h.eventTypes.touchStart,this.startHandler),this.registerHooks(h,h.eventTypes.touchMove,this.moveHandler),this.registerHooks(h,h.eventTypes.touchEnd,this.endHandler)}r&&this.bindClick()},e.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},e.prototype.bindClick=function(){var e=this.wrapper;this.clickEventRegister=new he(e,[{name:"click",handler:this.handleClick.bind(this)}])},e.prototype.handleClick=function(e){var t=this.calculateclickOffsetPos(e),n=this.scroll,i=n.x,r=n.y;i="horizontal"===this.direction?t:i,r="vertical"===this.direction?t:r,this.scroll.scrollTo(i,r,this.options.scrollbarTrackOffsetTime)},e.prototype.calculateclickOffsetPos=function(e){var t=this.keysMap,n=t.point,i=t.domRect,r=this.options.scrollbarTrackOffsetType,o=e[n]-this.wrapperRect[i],s=o<this.currentPos?-1:1,a=0,c=this.currentPos;return"step"===r?a=this.scrollInfo.baseSize*s:(a=0,c=o),this.newPos(c,a,this.scrollInfo)},e.prototype.getKeysMap=function(){return"vertical"===this.direction?{hasScroll:"hasVerticalScroll",size:"height",wrapperSize:"clientHeight",scrollerSize:"scrollerHeight",maxScrollPos:"maxScrollY",pos:"y",point:"pageY",translateProperty:"translateY",domRect:"top"}:{hasScroll:"hasHorizontalScroll",size:"width",wrapperSize:"clientWidth",scrollerSize:"scrollerWidth",maxScrollPos:"maxScrollX",pos:"x",point:"pageX",translateProperty:"translateX",domRect:"left"}},e.prototype.fade=function(e){var t=this.options,n=t.fadeInTime,i=t.fadeOutTime,r=e?n:i,o=this.wrapper;o.style[j.transitionDuration]=r+"ms",o.style.opacity=e?"1":"0"},e.prototype.refresh=function(){var e=this.keysMap.hasScroll,t=this.scroll,n=t.x,i=t.y;if(this.wrapperRect=this.wrapper.getBoundingClientRect(),this.canScroll(t[e])){var r=this.keysMap,o=r.wrapperSize,s=r.scrollerSize,a=r.maxScrollPos;this.scrollInfo=this.refreshScrollInfo(this.wrapper[o],t[s],t[a],this.indicatorEl[o]),this.updatePosition({x:n,y:i})}},e.prototype.transitionTime=function(e){void 0===e&&(e=0),this.indicatorEl.style[j.transitionDuration]=e+"ms"},e.prototype.transitionTimingFunction=function(e){this.indicatorEl.style[j.transitionTimingFunction]=e},e.prototype.canScroll=function(e){return this.wrapper.style.display=e?"block":"none",e},e.prototype.refreshScrollInfo=function(e,t,n,i){var r=Math.max(Math.round(e*e/(t||e||1)),this.options.minSize);this.options.isCustom&&(r=i);var o=e-r,s=o/n;return{baseSize:r,maxScrollPos:o,minScrollPos:0,sizeRatio:s}},e.prototype.updatePosition=function(e){var t=this.caculatePosAndSize(e,this.scrollInfo),n=t.pos,i=t.size;this.refreshStyle(i,n),this.currentPos=n},e.prototype.caculatePosAndSize=function(e,t){var n,i=this.keysMap.pos,r=t.sizeRatio,o=t.baseSize,s=t.maxScrollPos,a=t.minScrollPos,c=this.options.minSize,l=Math.round(r*e[i]);return l<a?(n=Math.max(o+3*l,c),l=a):l>s?(n=Math.max(o-3*(l-s),c),l=s+o-n):n=o,{pos:l,size:n}},e.prototype.refreshStyle=function(e,t){var n=this.keysMap,i=n.translateProperty,r=n.size,o=this.scroll.options.translateZ;this.indicatorEl.style[r]=e+"px",this.indicatorEl.style[j.transform]=i+"("+t+"px)"+o},e.prototype.startHandler=function(){this.moved=!1,this.startTime=C(),this.transitionTime(),this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.beforeScrollStart)},e.prototype.moveHandler=function(e){if(this.moved||this.indicatorNotMoved(e)||(this.moved=!0,this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.scrollStart)),this.moved){var t=this.newPos(this.currentPos,e,this.scrollInfo);this.syncBScroll(t)}},e.prototype.endHandler=function(){if(this.moved){var e=this.scroll,t=e.x,n=e.y;this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.scrollEnd,{x:t,y:n})}},e.prototype.indicatorNotMoved=function(e){var t=this.currentPos,n=this.scrollInfo,i=n.maxScrollPos,r=n.minScrollPos,o=t===r&&e<=0||t===i&&e>=0;return o},e.prototype.syncBScroll=function(e){var t=C(),n=this.scroll,i=n.x,r=n.y,o=n.options,s=n.scroller,a=n.maxScrollY,c=n.minScrollY,l=n.maxScrollX,u=n.minScrollX,d=o.probeType,h=o.momentumLimitTime,p={x:i,y:r};"vertical"===this.direction?p.y=S(e,a,c):p.x=S(e,l,u),s.translater.translate(p),t-this.startTime>h&&(this.startTime=t,1===d&&s.hooks.trigger(s.hooks.eventTypes.scroll,p)),d>1&&s.hooks.trigger(s.hooks.eventTypes.scroll,p)},e.prototype.newPos=function(e,t,n){var i=n.maxScrollPos,r=n.sizeRatio,o=n.minScrollPos,s=e+t;return s=S(s,o,i),Math.round(s/r)},e.prototype.destroy=function(){var e=this.options,t=e.interactive,n=e.scrollbarTrackClickable,i=e.isCustom;t&&this.eventHandler.destroy(),n&&this.clickEventRegister.destroy(),i||this.wrapper.parentNode.removeChild(this.wrapper),this.hooksFn.forEach((function(e){var t=e[0],n=e[1],i=e[2];t.off(n,i)})),this.hooksFn.length=0},e}(),rt=function(){function e(e){this.scroll=e,this.handleOptions(),this.createIndicators(),this.handleHooks()}return e.prototype.handleHooks=function(){var e=this,t=this.scroll;t.hooks.on(t.hooks.eventTypes.destroy,(function(){for(var t=0,n=e.indicators;t<n.length;t++){var i=n[t];i.destroy()}}))},e.prototype.handleOptions=function(){var e=!0===this.scroll.options.scrollbar?{}:this.scroll.options.scrollbar,t={fade:!0,fadeInTime:250,fadeOutTime:500,interactive:!1,customElements:[],minSize:8,scrollbarTrackClickable:!1,scrollbarTrackOffsetType:"step",scrollbarTrackOffsetTime:300};this.options=E(t,e)},e.prototype.createIndicators=function(){for(var e,t=this.scroll,n=[],i=["scrollX","scrollY"],r=["horizontal","vertical"],s=this.options.customElements,a=0;a<i.length;a++){var c=i[a];if(t.options[c]){var l=s.shift(),u=r[a],d=!1,h=l||this.createScrollbarElement(u);h!==l?t.wrapper.appendChild(h):d=!0,e=o(o({wrapper:h,direction:u},this.options),{isCustom:d}),n.push(new it(t,e))}}this.indicators=n},e.prototype.createScrollbarElement=function(e,t){void 0===t&&(t=this.options.scrollbarTrackClickable);var n=document.createElement("div"),i=document.createElement("div");return n.style.cssText="position:absolute;z-index:9999;overflow:hidden;",i.style.cssText="box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px;",i.className="bscroll-indicator","horizontal"===e?(n.style.cssText+="height:7px;left:2px;right:2px;bottom:0;",i.style.height="100%",n.className="bscroll-horizontal-scrollbar"):(n.style.cssText+="width:7px;bottom:2px;top:2px;right:1px;",i.style.width="100%",n.className="bscroll-vertical-scrollbar"),t||(n.style.cssText+="pointer-events:none;"),n.appendChild(i),n},e.pluginName="scrollbar",e}(),ot=function(){function e(e){this.scroll=e,this.init()}return e.prototype.init=function(){var e=this.scroll.scroller,t=e.scrollBehaviorX,n=e.scrollBehaviorY;this.wrapperWidth=t.wrapperSize,this.wrapperHeight=n.wrapperSize,this.scrollerHeight=n.contentSize,this.scrollerWidth=t.contentSize,this.pages=this.buildPagesMatrix(this.wrapperWidth,this.wrapperHeight),this.pageLengthOfX=this.pages?this.pages.length:0,this.pageLengthOfY=this.pages&&this.pages[0]?this.pages[0].length:0},e.prototype.getPageStats=function(e,t){return this.pages[e][t]},e.prototype.getNearestPageIndex=function(e,t){for(var n=0,i=0,r=this.pages.length;n<r-1;n++)if(e>=this.pages[n][0].cx)break;for(r=this.pages[n].length;i<r-1;i++)if(t>=this.pages[0][i].cy)break;return{pageX:n,pageY:i}},e.prototype.buildPagesMatrix=function(e,t){var n,i,r,o,s=[],a=0,c=0,l=this.scroll.scroller.scrollBehaviorX.maxScrollPos,u=this.scroll.scroller.scrollBehaviorY.maxScrollPos;i=Math.round(e/2),r=Math.round(t/2);while(a>-this.scrollerWidth){s[c]=[],o=0,n=0;while(n>-this.scrollerHeight)s[c][o]={x:Math.max(a,l),y:Math.max(n,u),width:e,height:t,cx:a-i,cy:n-r},n-=t,o++;a-=e,c++}return s},e}(),st={pageX:0,pageY:0,x:0,y:0},at=function(){function e(e,t){this.scroll=e,this.slideOptions=t,this.slideX=!1,this.slideY=!1,this.currentPage=E({},st)}return e.prototype.refresh=function(){this.pagesMatrix=new ot(this.scroll),this.checkSlideLoop(),this.currentPage=this.getAdjustedCurrentPage()},e.prototype.getAdjustedCurrentPage=function(){var e=this.currentPage,t=e.pageX,n=e.pageY;t=Math.min(t,this.pagesMatrix.pageLengthOfX-1),n=Math.min(n,this.pagesMatrix.pageLengthOfY-1),this.loopX&&(t=Math.min(t,this.pagesMatrix.pageLengthOfX-2)),this.loopY&&(n=Math.min(n,this.pagesMatrix.pageLengthOfY-2));var i=this.pagesMatrix.getPageStats(t,n),r=i.x,o=i.y;return{pageX:t,pageY:n,x:r,y:o}},e.prototype.setCurrentPage=function(e){this.currentPage=e},e.prototype.getInternalPage=function(e,t){e>=this.pagesMatrix.pageLengthOfX?e=this.pagesMatrix.pageLengthOfX-1:e<0&&(e=0),t>=this.pagesMatrix.pageLengthOfY?t=this.pagesMatrix.pageLengthOfY-1:t<0&&(t=0);var n=this.pagesMatrix.getPageStats(e,t),i=n.x,r=n.y;return{pageX:e,pageY:t,x:i,y:r}},e.prototype.getInitialPage=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);var n=this.slideOptions,i=n.startPageXIndex,r=n.startPageYIndex,o=this.loopX?1:0,s=this.loopY?1:0,a=e?o:this.currentPage.pageX,c=e?s:this.currentPage.pageY;t?(a=this.loopX?i+1:i,c=this.loopY?r+1:r):(a=e?o:this.currentPage.pageX,c=e?s:this.currentPage.pageY);var l=this.pagesMatrix.getPageStats(a,c),u=l.x,d=l.y;return{pageX:a,pageY:c,x:u,y:d}},e.prototype.getExposedPage=function(e){var t=E({},e);return this.loopX&&(t.pageX=this.fixedPage(t.pageX,this.pagesMatrix.pageLengthOfX-2)),this.loopY&&(t.pageY=this.fixedPage(t.pageY,this.pagesMatrix.pageLengthOfY-2)),t},e.prototype.getExposedPageByPageIndex=function(e,t){var n={pageX:e,pageY:t};this.loopX&&(n.pageX=e+1),this.loopY&&(n.pageY=t+1);var i=this.pagesMatrix.getPageStats(n.pageX,n.pageY),r=i.x,o=i.y;return{x:r,y:o,pageX:e,pageY:t}},e.prototype.getWillChangedPage=function(e){return e=E({},e),this.loopX&&(e.pageX=this.fixedPage(e.pageX,this.pagesMatrix.pageLengthOfX-2),e.x=this.pagesMatrix.getPageStats(e.pageX+1,0).x),this.loopY&&(e.pageY=this.fixedPage(e.pageY,this.pagesMatrix.pageLengthOfY-2),e.y=this.pagesMatrix.getPageStats(0,e.pageY+1).y),e},e.prototype.fixedPage=function(e,t){for(var n=[],i=0;i<t;i++)n.push(i);return n.unshift(t-1),n.push(0),n[e]},e.prototype.getPageStats=function(){return this.pagesMatrix.getPageStats(this.currentPage.pageX,this.currentPage.pageY)},e.prototype.getValidPageIndex=function(e,t){var n=this.pagesMatrix.pageLengthOfX-1,i=this.pagesMatrix.pageLengthOfY-1,r=0,o=0;return this.loopX&&(e+=1,r+=1,n-=1),this.loopY&&(t+=1,o+=1,i-=1),e=S(e,r,n),t=S(t,o,i),{pageX:e,pageY:t}},e.prototype.nextPageIndex=function(){return this.getPageIndexByDirection("positive")},e.prototype.prevPageIndex=function(){return this.getPageIndexByDirection("negative")},e.prototype.getNearestPage=function(e,t){var n=this.pagesMatrix.getNearestPageIndex(e,t),i=n.pageX,r=n.pageY,o=this.pagesMatrix.getPageStats(i,0).x,s=this.pagesMatrix.getPageStats(0,r).y;return{x:o,y:s,pageX:i,pageY:r}},e.prototype.getPageByDirection=function(e,t,n){var i=e.pageX,r=e.pageY;i===this.currentPage.pageX&&(i=S(i+t,0,this.pagesMatrix.pageLengthOfX-1)),r===this.currentPage.pageY&&(r=S(r+n,0,this.pagesMatrix.pageLengthOfY-1));var o=this.pagesMatrix.getPageStats(i,0).x,s=this.pagesMatrix.getPageStats(0,r).y;return{x:o,y:s,pageX:i,pageY:r}},e.prototype.resetLoopPage=function(){if(this.loopX){if(0===this.currentPage.pageX)return{pageX:this.pagesMatrix.pageLengthOfX-2,pageY:this.currentPage.pageY};if(this.currentPage.pageX===this.pagesMatrix.pageLengthOfX-1)return{pageX:1,pageY:this.currentPage.pageY}}if(this.loopY){if(0===this.currentPage.pageY)return{pageX:this.currentPage.pageX,pageY:this.pagesMatrix.pageLengthOfY-2};if(this.currentPage.pageY===this.pagesMatrix.pageLengthOfY-1)return{pageX:this.currentPage.pageX,pageY:1}}},e.prototype.getPageIndexByDirection=function(e){var t=this.currentPage.pageX,n=this.currentPage.pageY;return this.slideX&&(t="negative"===e?t-1:t+1),this.slideY&&(n="negative"===e?n-1:n+1),{pageX:t,pageY:n}},e.prototype.checkSlideLoop=function(){this.wannaLoop=this.slideOptions.loop,this.pagesMatrix.pageLengthOfX>1?this.slideX=!0:this.slideX=!1,this.pagesMatrix.pages[0]&&this.pagesMatrix.pageLengthOfY>1?this.slideY=!0:this.slideY=!1,this.loopX=this.wannaLoop&&this.slideX,this.loopY=this.wannaLoop&&this.slideY,this.slideX&&this.slideY&&u("slide does not support two direction at the same time.")},e}(),ct="plugins.slide",lt=[{key:"next",name:"next"},{key:"prev",name:"prev"},{key:"goToPage",name:"goToPage"},{key:"getCurrentPage",name:"getCurrentPage"},{key:"startPlay",name:"startPlay"},{key:"pausePlay",name:"pausePlay"}],ut=lt.map((function(e){return{key:e.key,sourceKey:ct+"."+e.name}})),dt=function(e,t){return e.pageX===t.pageX&&e.pageY===t.pageY},ht=function(){function e(e){this.scroll=e,this.cachedClonedPageDOM=[],this.resetLooping=!1,this.autoplayTimer=0,this.satisfyInitialization()&&this.init()}return e.prototype.satisfyInitialization=function(){return!(this.scroll.scroller.content.children.length<=0)||(u("slide need at least one slide page to be initialised.please check your DOM layout."),!1)},e.prototype.init=function(){this.willChangeToPage=E({},st),this.handleBScroll(),this.handleOptions(),this.handleHooks(),this.createPages()},e.prototype.createPages=function(){this.pages=new at(this.scroll,this.options)},e.prototype.handleBScroll=function(){this.scroll.registerType(["slideWillChange","slidePageChanged"]),this.scroll.proxy(ut)},e.prototype.handleOptions=function(){var e=!0===this.scroll.options.slide?{}:this.scroll.options.slide,t={loop:!0,threshold:.1,speed:400,easing:ee.bounce,listenFlick:!0,autoplay:!0,interval:3e3,startPageXIndex:0,startPageYIndex:0};this.options=E(t,e)},e.prototype.handleLoop=function(e){var t=this.options.loop,n=this.scroll.scroller.content,i=n.children.length;t&&(n!==e?(this.resetLoopChangedStatus(),this.removeClonedSlidePage(e),i>1&&this.cloneFirstAndLastSlidePage(n)):3===i&&this.initialised?(this.removeClonedSlidePage(n),this.moreToOnePageInLoop=!0,this.oneToMorePagesInLoop=!1):i>1?(this.initialised&&0===this.cachedClonedPageDOM.length?(this.oneToMorePagesInLoop=!0,this.moreToOnePageInLoop=!1):(this.removeClonedSlidePage(n),this.resetLoopChangedStatus()),this.cloneFirstAndLastSlidePage(n)):this.resetLoopChangedStatus())},e.prototype.resetLoopChangedStatus=function(){this.moreToOnePageInLoop=!1,this.oneToMorePagesInLoop=!1},e.prototype.handleHooks=function(){var e=this,t=this.scroll.hooks,n=this.scroll.scroller.hooks,i=this.options.listenFlick;this.prevContent=this.scroll.scroller.content,this.hooksFn=[],this.registerHooks(this.scroll,this.scroll.eventTypes.beforeScrollStart,this.pausePlay),this.registerHooks(this.scroll,this.scroll.eventTypes.scrollEnd,this.modifyCurrentPage),this.registerHooks(this.scroll,this.scroll.eventTypes.scrollEnd,this.startPlay),this.scroll.eventTypes.mousewheelMove&&(this.registerHooks(this.scroll,this.scroll.eventTypes.mousewheelMove,(function(){return!0})),this.registerHooks(this.scroll,this.scroll.eventTypes.mousewheelEnd,(function(t){1!==t.directionX&&1!==t.directionY||e.next(),-1!==t.directionX&&-1!==t.directionY||e.prev()}))),this.registerHooks(t,t.eventTypes.refresh,this.refreshHandler),this.registerHooks(t,t.eventTypes.destroy,this.destroy),this.registerHooks(n,n.eventTypes.beforeRefresh,(function(){e.handleLoop(e.prevContent),e.setSlideInlineStyle()})),this.registerHooks(n,n.eventTypes.momentum,this.modifyScrollMetaHandler),this.registerHooks(n,n.eventTypes.scroll,this.scrollHandler),this.registerHooks(n,n.eventTypes.checkClick,this.startPlay),i&&this.registerHooks(n,n.eventTypes.flick,this.flickHandler)},e.prototype.startPlay=function(){var e=this,t=this.options,n=t.interval,i=t.autoplay;i&&(clearTimeout(this.autoplayTimer),this.autoplayTimer=window.setTimeout((function(){e.next()}),n))},e.prototype.pausePlay=function(){this.options.autoplay&&clearTimeout(this.autoplayTimer)},e.prototype.setSlideInlineStyle=function(){var e=[{direction:"scrollX",sizeType:"offsetWidth",styleType:"width"},{direction:"scrollY",sizeType:"offsetHeight",styleType:"height"}],t=this.scroll.scroller,n=t.content,i=t.wrapper,r=this.scroll.options;e.forEach((function(e){var t=e.direction,o=e.sizeType,s=e.styleType;if(r[t]){for(var a=i[o],c=n.children,l=c.length,u=0;u<l;u++){var d=c[u];d.style[s]=a+"px"}n.style[s]=a*l+"px"}}))},e.prototype.next=function(e,t){var n=this.pages.nextPageIndex(),i=n.pageX,r=n.pageY;this.goTo(i,r,e,t)},e.prototype.prev=function(e,t){var n=this.pages.prevPageIndex(),i=n.pageX,r=n.pageY;this.goTo(i,r,e,t)},e.prototype.goToPage=function(e,t,n,i){var r=this.pages.getValidPageIndex(e,t);this.goTo(r.pageX,r.pageY,n,i)},e.prototype.getCurrentPage=function(){return this.exposedPage||this.pages.getInitialPage(!1,!0)},e.prototype.setCurrentPage=function(e){this.pages.setCurrentPage(e),this.exposedPage=this.pages.getExposedPage(e)},e.prototype.nearestPage=function(e,t){var n=this.scroll.scroller,i=n.scrollBehaviorX,r=n.scrollBehaviorY,o=i.maxScrollPos,s=i.minScrollPos,a=r.maxScrollPos,c=r.minScrollPos;return this.pages.getNearestPage(S(e,o,s),S(t,a,c))},e.prototype.satisfyThreshold=function(e,t){var n=this.scroll.scroller,i=n.scrollBehaviorX,r=n.scrollBehaviorY,o=!0;return Math.abs(e-i.absStartPos)<=this.thresholdX&&Math.abs(t-r.absStartPos)<=this.thresholdY&&(o=!1),o},e.prototype.refreshHandler=function(e){var t=this;if(this.satisfyInitialization()){this.pages.refresh(),this.computeThreshold();var n=this.contentChanged=this.prevContent!==e;n&&(this.prevContent=e);var i=this.pages.getInitialPage(this.oneToMorePagesInLoop||this.moreToOnePageInLoop,n||!this.initialised);this.initialised?this.goTo(i.pageX,i.pageY,0):this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.beforeInitialScrollTo,(function(e){t.initialised=!0,e.x=i.x,e.y=i.y})),this.startPlay()}},e.prototype.computeThreshold=function(){var e=this.options.threshold;if(e%1===0)this.thresholdX=e,this.thresholdY=e;else{var t=this.pages.getPageStats(),n=t.width,i=t.height;this.thresholdX=Math.round(n*e),this.thresholdY=Math.round(i*e)}},e.prototype.cloneFirstAndLastSlidePage=function(e){var t=e.children,n=t[t.length-1].cloneNode(!0),i=t[0].cloneNode(!0);z(n,e),e.appendChild(i),this.cachedClonedPageDOM=[n,i]},e.prototype.removeClonedSlidePage=function(e){var t=e&&e.children||[];t.length&&this.cachedClonedPageDOM.forEach((function(t){J(e,t)})),this.cachedClonedPageDOM=[]},e.prototype.modifyCurrentPage=function(e){var t=this.getCurrentPage(),n=t.pageX,i=t.pageY,r=this.nearestPage(e.x,e.y);if(this.setCurrentPage(r),this.contentChanged)return this.contentChanged=!1,!0;var o=this.getCurrentPage(),s=o.pageX,a=o.pageY;if(this.pageWillChangeTo(r),this.oneToMorePagesInLoop)return this.oneToMorePagesInLoop=!1,!0;if(this.moreToOnePageInLoop&&0===n&&0===i)return this.moreToOnePageInLoop=!1,!0;if(n!==s||i!==a){var c=this.pages.getExposedPageByPageIndex(s,a);this.scroll.trigger(this.scroll.eventTypes.slidePageChanged,c)}if(!this.resetLooping){var l=this.pages.resetLoopPage();return l?(this.resetLooping=!0,this.goTo(l.pageX,l.pageY,0),!0):void 0}this.resetLooping=!1},e.prototype.goTo=function(e,t,n,i){var r=this.pages.getInternalPage(e,t),o=i||this.options.easing||ee.bounce,s=r.x,a=r.y,c=s-this.scroll.scroller.scrollBehaviorX.currentPos,l=a-this.scroll.scroller.scrollBehaviorY.currentPos;c||l?(n=void 0===n?this.getEaseTime(c,l):n,this.scroll.scroller.scrollTo(s,a,n,o)):this.scroll.scroller.togglePointerEvents(!0)},e.prototype.flickHandler=function(){var e=this.scroll.scroller,t=e.scrollBehaviorX,n=e.scrollBehaviorY,i=t.currentPos,r=t.startPos,o=t.direction,s=n.currentPos,a=n.startPos,c=n.direction,l=this.pages.currentPage,u=l.pageX,d=l.pageY,h=this.getEaseTime(i-r,s-a);this.goTo(u+o,d+c,h)},e.prototype.getEaseTime=function(e,t){return this.options.speed||Math.max(Math.max(Math.min(Math.abs(e),1e3),Math.min(Math.abs(t),1e3)),300)},e.prototype.modifyScrollMetaHandler=function(e){var t=this.scroll.scroller,n=t.scrollBehaviorX,i=t.scrollBehaviorY,r=t.animater,o=e.newX,s=e.newY,a=this.satisfyThreshold(o,s)||r.forceStopped?this.pages.getPageByDirection(this.nearestPage(o,s),n.direction,i.direction):this.pages.currentPage;e.time=this.getEaseTime(e.newX-a.x,e.newY-a.y),e.newX=a.x,e.newY=a.y,e.easing=this.options.easing||ee.bounce},e.prototype.scrollHandler=function(e){var t=e.x,n=e.y;if(this.satisfyThreshold(t,n)){var i=this.nearestPage(t,n);this.pageWillChangeTo(i)}},e.prototype.pageWillChangeTo=function(e){var t=this.pages.getWillChangedPage(e);dt(this.willChangeToPage,t)||(this.willChangeToPage=t,this.scroll.trigger(this.scroll.eventTypes.slideWillChange,this.willChangeToPage))},e.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},e.prototype.destroy=function(){var e=this.scroll.scroller.content,t=this.options,n=t.loop,i=t.autoplay;n&&this.removeClonedSlidePage(e),i&&clearTimeout(this.autoplayTimer),this.hooksFn.forEach((function(e){var t=e[0],n=e[1],i=e[2];t.eventTypes[n]&&t.off(n,i)})),this.hooksFn.length=0},e.pluginName="slide",e}(),pt="plugins.wheel",ft=[{key:"wheelTo",name:"wheelTo"},{key:"getSelectedIndex",name:"getSelectedIndex"},{key:"restorePosition",name:"restorePosition"}],gt=ft.map((function(e){return{key:e.key,sourceKey:pt+"."+e.name}})),mt="wheelIndexChanged",_t={rate:4},vt=function(){function e(e){this.scroll=e,this.init()}return e.prototype.init=function(){this.handleBScroll(),this.handleOptions(),this.handleHooks(),this.refreshBoundary(),this.setSelectedIndex(this.options.selectedIndex)},e.prototype.handleBScroll=function(){this.scroll.proxy(gt),this.scroll.registerType([mt])},e.prototype.handleOptions=function(){var e=!0===this.scroll.options.wheel?{}:this.scroll.options.wheel,t={wheelWrapperClass:"wheel-scroll",wheelItemClass:"wheel-item",rotate:25,adjustTime:400,selectedIndex:0,wheelDisabledItemClass:"wheel-disabled-item"};this.options=E(t,e)},e.prototype.handleHooks=function(){var e=this,t=this.scroll,n=this.scroll.scroller,i=n.actionsHandler,r=n.scrollBehaviorX,o=n.scrollBehaviorY,s=n.animater,a=n.content;t.on(t.eventTypes.scrollEnd,(function(t){var i=e.findNearestValidWheel(t.y).index;if(n.animater.forceStopped&&!e.isAdjustingPosition)return e.target=e.items[i],!0;e.setSelectedIndex(i),e.isAdjustingPosition&&(e.isAdjustingPosition=!1)})),this.scroll.hooks.on(this.scroll.hooks.eventTypes.refresh,(function(t){t!==a&&(a=t,e.setSelectedIndex(e.options.selectedIndex,!0)),e.rotateX(e.scroll.y),e.wheelTo(e.selectedIndex,0)})),this.scroll.hooks.on(this.scroll.hooks.eventTypes.beforeInitialScrollTo,(function(t){t.x=0,t.y=-e.selectedIndex*e.itemHeight})),n.hooks.on(n.hooks.eventTypes.checkClick,(function(){var t=Q(e.items).indexOf(e.target);return-1===t||e.wheelTo(t,e.options.adjustTime,ee.swipe),!0})),n.hooks.on(n.hooks.eventTypes.scrollTo,(function(t){t.y=e.findNearestValidWheel(t.y).y})),n.hooks.on(n.hooks.eventTypes.minDistanceScroll,(function(){var e=n.animater;!0===e.forceStopped&&(e.forceStopped=!1)})),n.hooks.on(n.hooks.eventTypes.scrollToElement,(function(t,n){if(!X(t,e.options.wheelItemClass))return!0;n.top=e.findNearestValidWheel(n.top).y})),i.hooks.on(i.hooks.eventTypes.beforeStart,(function(t){e.target=t.target})),r.hooks.on(r.hooks.eventTypes.computeBoundary,(function(e){e.maxScrollPos=0,e.minScrollPos=0})),o.hooks.on(o.hooks.eventTypes.computeBoundary,(function(t){e.items=e.scroll.scroller.content.children,e.checkWheelAllDisabled(),e.itemHeight=e.items.length>0?o.contentSize/e.items.length:0,t.maxScrollPos=-e.itemHeight*(e.items.length-1),t.minScrollPos=0})),o.hooks.on(o.hooks.eventTypes.momentum,(function(t){t.rate=_t.rate,t.destination=e.findNearestValidWheel(t.destination).y})),o.hooks.on(o.hooks.eventTypes.end,(function(t){var n=e.findNearestValidWheel(o.currentPos);t.destination=n.y,t.duration=e.options.adjustTime})),s.hooks.on(s.hooks.eventTypes.time,(function(t){e.transitionDuration(t)})),s.hooks.on(s.hooks.eventTypes.timeFunction,(function(t){e.timeFunction(t)})),s.hooks.on(s.hooks.eventTypes.callStop,(function(){var t=e.findNearestValidWheel(e.scroll.y).index;e.isAdjustingPosition=!0,e.wheelTo(t,0)})),s.translater.hooks.on(s.translater.hooks.eventTypes.translate,(function(t){e.rotateX(t.y)}))},e.prototype.refreshBoundary=function(){var e=this.scroll.scroller,t=e.scrollBehaviorX,n=e.scrollBehaviorY,i=e.content;t.refresh(i),n.refresh(i)},e.prototype.setSelectedIndex=function(e,t){void 0===t&&(t=!1);var n=this.selectedIndex;this.selectedIndex=e,n===e||t||this.scroll.trigger(mt,e)},e.prototype.getSelectedIndex=function(){return this.selectedIndex},e.prototype.wheelTo=function(e,t,n){void 0===e&&(e=0),void 0===t&&(t=0);var i=-e*this.itemHeight;this.scroll.scrollTo(0,i,t,n)},e.prototype.restorePosition=function(){var e=this.scroll.pending;if(e){var t=this.getSelectedIndex();this.scroll.scroller.animater.clearTimer(),this.wheelTo(t,0)}},e.prototype.transitionDuration=function(e){for(var t=0;t<this.items.length;t++)this.items[t].style[j.transitionDuration]=e+"ms"},e.prototype.timeFunction=function(e){for(var t=0;t<this.items.length;t++)this.items[t].style[j.transitionTimingFunction]=e},e.prototype.rotateX=function(e){for(var t=this.options.rotate,n=void 0===t?25:t,i=0;i<this.items.length;i++){var r=n*(e/this.itemHeight+i),o=r.toFixed(3);this.items[i].style[j.transform]="rotateX("+o+"deg)"}},e.prototype.findNearestValidWheel=function(e){e=e>0?0:e<this.scroll.maxScrollY?this.scroll.maxScrollY:e;var t=Math.abs(Math.round(-e/this.itemHeight)),n=t,i=this.items,r=this.options.wheelDisabledItemClass;while(t>=0){if(!X(i[t],r))break;t--}if(t<0){t=n;while(t<=i.length-1){if(!X(i[t],r))break;t++}}return t===i.length&&(t=n),{index:this.wheelItemsAllDisabled?-1:t,y:-t*this.itemHeight}},e.prototype.checkWheelAllDisabled=function(){var e=this.options.wheelDisabledItemClass,t=this.items;this.wheelItemsAllDisabled=!0;for(var n=0;n<t.length;n++)if(!X(t[n],e)){this.wheelItemsAllDisabled=!1;break}},e.pluginName="wheel",e}(),yt="plugins.zoom",Ct=[{key:"zoomTo",name:"zoomTo"}],Et=Ct.map((function(e){return{key:e.key,sourceKey:yt+"."+e.name}})),bt=2,Tt=1,St=function(){function e(e){this.scroll=e,this.scale=Tt,this.prevScale=1,this.init()}return e.prototype.init=function(){this.handleBScroll(),this.handleOptions(),this.handleHooks(),this.tryInitialZoomTo(this.zoomOpt)},e.prototype.zoomTo=function(e,t,n,i){var r=this.resolveOrigin(t,n),o=r.originX,s=r.originY,a={x:o,y:s,baseScale:this.scale};this._doZoomTo(e,a,i,!0)},e.prototype.handleBScroll=function(){this.scroll.proxy(Et),this.scroll.registerType(["beforeZoomStart","zoomStart","zooming","zoomEnd"])},e.prototype.handleOptions=function(){var e=!0===this.scroll.options.zoom?{}:this.scroll.options.zoom,t={start:1,min:1,max:4,initialOrigin:[0,0],minimalZoomDistance:5,bounceTime:800};this.zoomOpt=E(t,e)},e.prototype.handleHooks=function(){var e=this,t=this.scroll,n=this.scroll.scroller;this.wrapper=this.scroll.scroller.wrapper,this.setTransformOrigin(this.scroll.scroller.content);var i=n.scrollBehaviorX,r=n.scrollBehaviorY;this.hooksFn=[],this.registerHooks(t.hooks,t.hooks.eventTypes.contentChanged,(function(t){e.setTransformOrigin(t),e.scale=Tt,e.tryInitialZoomTo(e.zoomOpt)})),this.registerHooks(t.hooks,t.hooks.eventTypes.beforeInitialScrollTo,(function(){if(e.zoomOpt.start!==Tt)return!0})),this.registerHooks(i.hooks,i.hooks.eventTypes.beforeComputeBoundary,(function(){var t=$(e.scroll.scroller.content);i.contentSize=Math.floor(t.width*e.scale)})),this.registerHooks(r.hooks,r.hooks.eventTypes.beforeComputeBoundary,(function(){var t=$(e.scroll.scroller.content);r.contentSize=Math.floor(t.height*e.scale)})),this.registerHooks(n.actions.hooks,n.actions.hooks.eventTypes.start,(function(t){var n=t.touches&&t.touches.length||0;e.fingersOperation(n),n===bt&&e.zoomStart(t)})),this.registerHooks(n.actions.hooks,n.actions.hooks.eventTypes.beforeMove,(function(t){var n=t.touches&&t.touches.length||0;if(e.fingersOperation(n),n===bt)return e.zoom(t),!0})),this.registerHooks(n.actions.hooks,n.actions.hooks.eventTypes.beforeEnd,(function(t){var n=e.fingersOperation();if(n===bt)return e.zoomEnd(),!0})),this.registerHooks(n.translater.hooks,n.translater.hooks.eventTypes.beforeTranslate,(function(t,n){var i=n.scale?n.scale:e.prevScale;e.prevScale=i,t.push("scale("+i+")")})),this.registerHooks(n.hooks,n.hooks.eventTypes.scrollEnd,(function(){e.fingersOperation()===bt&&e.scroll.trigger(e.scroll.eventTypes.zoomEnd,{scale:e.scale})})),this.registerHooks(this.scroll.hooks,"destroy",this.destroy)},e.prototype.setTransformOrigin=function(e){e.style[j.transformOrigin]="0 0"},e.prototype.tryInitialZoomTo=function(e){var t=e.start,n=e.initialOrigin,i=this.scroll.scroller,r=i.scrollBehaviorX,o=i.scrollBehaviorY;t!==Tt&&(this.resetBoundaries([r,o]),this.zoomTo(t,n[0],n[1],0))},e.prototype.fingersOperation=function(e){if("number"!==typeof e)return this.numberOfFingers;this.numberOfFingers=e},e.prototype._doZoomTo=function(e,t,n,i){var r=this;void 0===n&&(n=this.zoomOpt.bounceTime),void 0===i&&(i=!1);var o=this.zoomOpt,s=o.min,a=o.max,c=this.scale,l=S(e,s,a);(function(){if(0!==n){if(n>0){var e,t=C(),i=t+n,o=function(){var s=C();if(s>=i)return r.scroll.trigger(r.scroll.eventTypes.zooming,{scale:l}),void oe(e);var a=ee.bounce.fn((s-t)/n),u=a*(l-c)+c;r.scroll.trigger(r.scroll.eventTypes.zooming,{scale:u}),e=re(o)};o()}}else r.scroll.trigger(r.scroll.eventTypes.zooming,{scale:l})})(),this.fingersOperation(2),this._zoomTo(l,c,t,n,i)},e.prototype._zoomTo=function(e,t,n,i,r){void 0===r&&(r=!1);var o=e/n.baseScale;this.setScale(e);var s=this.scroll.scroller,a=s.scrollBehaviorX,c=s.scrollBehaviorY;this.resetBoundaries([a,c]);var l=this.getNewPos(n.x,o,a,!0,r),u=this.getNewPos(n.y,o,c,!0,r);a.currentPos===Math.round(l)&&c.currentPos===Math.round(u)&&e===t||s.scrollTo(l,u,i,ee.bounce,{start:{scale:t},end:{scale:e}})},e.prototype.resolveOrigin=function(e,t){var n=this.scroll.scroller,i=n.scrollBehaviorX,r=n.scrollBehaviorY,o={left:function(){return 0},top:function(){return 0},right:function(){return i.contentSize},bottom:function(){return r.contentSize},center:function(e){var t=0===e?i.contentSize:r.contentSize;return t/2}};return{originX:"number"===typeof e?e:o[e](0),originY:"number"===typeof t?t:o[t](1)}},e.prototype.zoomStart=function(e){var t=e.touches[0],n=e.touches[1];this.startDistance=this.getFingerDistance(e),this.startScale=this.scale;var i=A(this.wrapper),r=i.left,o=i.top;this.origin={x:Math.abs(t.pageX+n.pageX)/2+r-this.scroll.x,y:Math.abs(t.pageY+n.pageY)/2+o-this.scroll.y,baseScale:this.startScale},this.scroll.trigger(this.scroll.eventTypes.beforeZoomStart)},e.prototype.zoom=function(e){var t=this.getFingerDistance(e);if(this.zoomed||!(Math.abs(t-this.startDistance)<this.zoomOpt.minimalZoomDistance)){var n=this.dampingScale(t/this.startDistance*this.startScale),i=n/this.startScale;this.setScale(n),this.zoomed||(this.zoomed=!0,this.scroll.trigger(this.scroll.eventTypes.zoomStart));var r=this.scroll.scroller,o=r.scrollBehaviorX,s=r.scrollBehaviorY,a=this.getNewPos(this.origin.x,i,o,!1,!1),c=this.getNewPos(this.origin.y,i,s,!1,!1);this.scroll.trigger(this.scroll.eventTypes.zooming,{scale:this.scale}),r.translater.translate({x:a,y:c,scale:n})}},e.prototype.zoomEnd=function(){this.zoomed&&(this.shouldRebound()?this._doZoomTo(this.scale,this.origin,this.zoomOpt.bounceTime):this.scroll.trigger(this.scroll.eventTypes.zoomEnd,{scale:this.scale}))},e.prototype.getFingerDistance=function(e){var t=e.touches[0],n=e.touches[1],i=Math.abs(t.pageX-n.pageX),r=Math.abs(t.pageY-n.pageY);return T(i,r)},e.prototype.shouldRebound=function(){var e=this.zoomOpt,t=e.min,n=e.max,i=this.scale;if(i!==S(i,t,n))return!0;var r=this.scroll.scroller,o=r.scrollBehaviorX,s=r.scrollBehaviorY;this.resetBoundaries([o,s]);var a=o.checkInBoundary().inBoundary,c=o.checkInBoundary().inBoundary;return!(a&&c)},e.prototype.dampingScale=function(e){var t=this.zoomOpt,n=t.min,i=t.max;return e<n?e=.5*n*Math.pow(2,e/n):e>i&&(e=2*i*Math.pow(.5,i/e)),e},e.prototype.setScale=function(e){this.scale=e},e.prototype.resetBoundaries=function(e){e.forEach((function(e){return e.computeBoundary()}))},e.prototype.getNewPos=function(e,t,n,i,r){void 0===r&&(r=!1);var o=e-e*t+(r?n.currentPos:n.startPos);return i&&(o=S(o,n.maxScrollPos,n.minScrollPos)),o>0?Math.floor(o):Math.ceil(o)},e.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},e.prototype.destroy=function(){this.hooksFn.forEach((function(e){var t=e[0],n=e[1],i=e[2];t.off(n,i)})),this.hooksFn.length=0},e.pluginName="zoom",e}(),Rt=function(){function e(e){this.ancestors=[],this.descendants=[],this.hooksManager=[],this.analyzed=!1,this.selfScroll=e}return e.create=function(t){return new e(t)},e.prototype.hasAncestors=function(e){var t=R(this.ancestors,(function(t){var n=t[0];return n===e}));return t>-1},e.prototype.hasDescendants=function(e){var t=R(this.descendants,(function(t){var n=t[0];return n===e}));return t>-1},e.prototype.addAncestor=function(e,t){var n=this.ancestors;n.push([e,t]),n.sort((function(e,t){return e[1]-t[1]}))},e.prototype.addDescendant=function(e,t){var n=this.descendants;n.push([e,t]),n.sort((function(e,t){return e[1]-t[1]}))},e.prototype.removeAncestor=function(e){var t=this.ancestors;if(t.length){var n=R(this.ancestors,(function(t){var n=t[0];return n===e}));if(n>-1)return t.splice(n,1)}},e.prototype.removeDescendant=function(e){var t=this.descendants;if(t.length){var n=R(this.descendants,(function(t){var n=t[0];return n===e}));if(n>-1)return t.splice(n,1)}},e.prototype.registerHooks=function(e,t,n){e.on(t,n),this.hooksManager.push([e,t,n])},e.prototype.setAnalyzed=function(e){void 0===e&&(e=!1),this.analyzed=e},e.prototype.purge=function(){var e=this;this.ancestors.forEach((function(t){var n=t[0];n.removeDescendant(e)})),this.descendants.forEach((function(t){var n=t[0];n.removeAncestor(e)})),this.hooksManager.forEach((function(e){var t=e[0],n=e[1],i=e[2];t.off(n,i)})),this.hooksManager=[]},e}(),It="plugins.nestedScroll",wt=[{key:"purgeNestedScroll",name:"purgeNestedScroll"}],Ot=wt.map((function(e){return{key:e.key,sourceKey:It+"."+e.name}})),kt="INTERNAL_NESTED_SCROLL",Mt=function(e){e.forEach((function(e){e.pending&&(e.stop(),e.resetPosition())}))},xt=function(e){e.forEach((function(e){e.enable()}))},Pt=function(e,t){e.forEach((function(e){e.hasHorizontalScroll!==t.hasHorizontalScroll&&e.hasVerticalScroll!==t.hasVerticalScroll||e.disable()}))},At=function(e){e.forEach((function(e){var t=e.scroller,n=t.actions,i=t.scrollBehaviorX,r=t.scrollBehaviorY;n.fingerMoved=!0,n.contentMoved=!1,n.directionLockAction.reset(),i.start(),r.start(),i.resetStartPos(),r.resetStartPos(),n.startTime=+new Date}))},Dt=function(e){var t=e.hasHorizontalScroll,n=e.hasVerticalScroll,i=e.x,r=e.y,o=e.minScrollX,s=e.maxScrollX,a=e.minScrollY,c=e.maxScrollY,l=e.movingDirectionX,u=e.movingDirectionY,d=!1,h=i>=o&&-1===l,p=i<=s&&1===l,f=r>=a&&-1===u,g=r<=c&&1===u;return n?d=f||g:t&&(d=h||p),d},Nt=function(e){var t=e.hasHorizontalScroll,n=e.hasVerticalScroll,i=e.x,r=e.y,o=e.minScrollX,s=e.maxScrollX,a=e.minScrollY,c=e.maxScrollY,l=!1,u=i>o,d=i<s,h=r>a,p=r<c;return n?l=h||p:t&&(l=u||d),l},Lt=function(e){e.scroller.reflow(),e.resetPosition(0)},Ut=function(e,t){var n=0,i=e.parentNode;while(i&&i!==t)n++,i=i.parentNode;return n},Bt=function(){function e(t){var n=this.handleOptions(t),i=e.instancesMap[n];return i||(i=e.instancesMap[n]=this,i.store=[],i.hooksFn=[]),i.init(t),i}return e.getAllNestedScrolls=function(){var t=e.instancesMap;return Object.keys(t).map((function(e){return t[e]}))},e.purgeAllNestedScrolls=function(){var t=e.getAllNestedScrolls();t.forEach((function(e){return e.purgeNestedScroll()}))},e.prototype.handleOptions=function(e){var t=!0===e.options.nestedScroll?{}:e.options.nestedScroll,n={groupId:kt};this.options=E(n,t);var i=typeof this.options.groupId;return"string"!==i&&"number"!==i&&u("groupId must be string or number for NestedScroll plugin"),this.options.groupId},e.prototype.init=function(e){e.proxy(Ot),this.addBScroll(e),this.buildBScrollGraph(),this.analyzeBScrollGraph(),this.ensureEventInvokeSequence(),this.handleHooks(e)},e.prototype.handleHooks=function(e){var t=this;this.registerHooks(e.hooks,e.hooks.eventTypes.destroy,(function(){t.deleteScroll(e)}))},e.prototype.deleteScroll=function(e){var t=e.wrapper;t.isBScrollContainer=void 0;var n=this.store,i=this.hooksFn,r=R(n,(function(t){return t.selfScroll===e}));if(r>-1){var o=n[r];o.purge(),n.splice(r,1)}var s=R(i,(function(t){var n=t[0];return n===e.hooks}));if(s>-1){var a=i[s],c=a[0],l=a[1],u=a[2];c.off(l,u),i.splice(s,1)}},e.prototype.addBScroll=function(e){this.store.push(Rt.create(e))},e.prototype.buildBScrollGraph=function(){for(var e,t,n,i,r=this.store,o=this.store.length,s=0;s<o;s++){e=r[s],n=e.selfScroll.wrapper;for(var a=0;a<o;a++)if(t=r[a],i=t.selfScroll.wrapper,e!==t&&n.contains(i)){var c=Ut(i,n);e.hasDescendants(t)||e.addDescendant(t,c),t.hasAncestors(e)||t.addAncestor(e,c)}}},e.prototype.analyzeBScrollGraph=function(){this.store.forEach((function(e){if(!e.analyzed){var t=e.ancestors,n=e.descendants,i=e.selfScroll,r=function(){var e=t.map((function(e){var t=e[0];return t.selfScroll})),r=n.map((function(e){var t=e[0];return t.selfScroll}));Mt(c(e,r)),Nt(i)&&Lt(i),At(e),Pt(e,i)},o=function(){var e=t.map((function(e){var t=e[0];return t.selfScroll})),i=n.map((function(e){var t=e[0];return t.selfScroll}));xt(c(e,i))};e.registerHooks(i,i.eventTypes.beforeScrollStart,r),e.registerHooks(i,i.eventTypes.touchEnd,o);var s=i.scroller.actions.hooks;e.registerHooks(s,s.eventTypes.detectMovingDirection,(function(){var e=t.map((function(e){var t=e[0];return t.selfScroll})),n=e[0],r=e.slice(1),o=i.scroller.actions.contentMoved,s=0===e.length;if(o)Pt(e,i);else if(!s&&Dt(i))return Pt([i],i),n&&xt([n]),Pt(r,i),!0})),e.setAnalyzed(!0)}}))},e.prototype.ensureEventInvokeSequence=function(){var e=this.store.slice(),t=e.sort((function(e,t){return e.descendants.length-t.descendants.length}));t.forEach((function(e){var t=e.selfScroll;t.scroller.actionsHandler.rebindDOMEvents()}))},e.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},e.prototype.purgeNestedScroll=function(){var t=this.options.groupId;this.store.forEach((function(e){e.purge()})),this.store=[],this.hooksFn.forEach((function(e){var t=e[0],n=e[1],i=e[2];t.off(n,i)})),this.hooksFn=[],delete e.instancesMap[t]},e.pluginName="nestedScroll",e.instancesMap={},e}(),Vt=10,jt=30,Ft=function(){function e(e,t){this.wrapperHeight=e,this.tombstoneHeight=t,this.lastDirection=1,this.lastPos=0}return e.prototype.calculate=function(e,t){var n=e-this.lastPos;this.lastPos=e;var i=this.getDirection(n),r=this.calculateIndex(0,e,t),o=this.calculateIndex(r,e+this.wrapperHeight,t);return 1===i?(r-=Vt,o+=jt):(r-=jt,o+=Vt),r<0&&(r=0),{start:r,end:o}},e.prototype.getDirection=function(e){var t;if(e>0)t=1;else{if(!(e<0))return this.lastDirection;t=0}return this.lastDirection=t,t},e.prototype.calculateIndex=function(e,t,n){if(t<=0)return e;var i=e,r=n[i]&&-1!==n[i].pos?n[i].pos:0,o=r,s=0;while(i<n.length&&n[i].pos<t)o=n[i].pos,i++;return i===n.length&&(s=Math.floor((t-o)/this.tombstoneHeight)),i+=s,i},e.prototype.resetState=function(){this.lastDirection=1,this.lastPos=0},e}(),$t=function(){function e(){this.data=null,this.dom=null,this.tombstone=null,this.width=0,this.height=0,this.pos=0}return e}(),Ht=function(){function e(e,t,n){this.fetchFn=t,this.onFetchFinish=n,this.loadedNum=0,this.fetching=!1,this.hasMore=!0,this.list=e||[]}return e.prototype.update=function(e){return s(this,void 0,void 0,(function(){var t;return a(this,(function(n){return this.hasMore||(e=Math.min(e,this.list.length)),e>this.list.length&&(t=e-this.list.length,this.addEmptyData(t)),[2,this.checkToFetch(e)]}))}))},e.prototype.add=function(e){for(var t=0;t<e.length;t++)this.list[this.loadedNum]?this.list[this.loadedNum]=o(o({},this.list[this.loadedNum]),{data:e[t]}):this.list[this.loadedNum]={data:e[t]},this.loadedNum++;return this.list},e.prototype.addEmptyData=function(e){for(var t=0;t<e;t++)this.list.push(new $t);return this.list},e.prototype.fetch=function(e){return s(this,void 0,void 0,(function(){var t;return a(this,(function(n){switch(n.label){case 0:return this.fetching?[2,[]]:(this.fetching=!0,[4,this.fetchFn(e)]);case 1:return t=n.sent(),this.fetching=!1,[2,t]}}))}))},e.prototype.checkToFetch=function(e){return s(this,void 0,void 0,(function(){var t,n,i;return a(this,(function(r){switch(r.label){case 0:return this.hasMore?e<=this.loadedNum?[2]:(t=e-this.loadedNum,[4,this.fetch(t)]):[2];case 1:return n=r.sent(),n instanceof Array&&n.length?(this.add(n),i=this.onFetchFinish(this.list,!0),[2,this.checkToFetch(i)]):("boolean"===typeof n&&!1===n&&(this.hasMore=!1,this.list.splice(this.loadedNum),this.onFetchFinish(this.list,!1)),[2])}}))}))},e.prototype.getList=function(){return this.list},e.prototype.resetState=function(){this.loadedNum=0,this.fetching=!1,this.hasMore=!0,this.list=[]},e}(),Kt=function(){function e(e){this.create=e,this.cached=[],this.width=0,this.height=0,this.initialed=!1,this.getSize()}return e.isTombstone=function(e){return!(!e||!e.classList)&&e.classList.contains("tombstone")},e.prototype.getSize=function(){if(!this.initialed){var e=this.create();e.style.position="absolute",document.body.appendChild(e),e.style.display="",this.height=e.offsetHeight,this.width=e.offsetWidth,document.body.removeChild(e),this.cached.push(e)}},e.prototype.getOne=function(){var e=this.cached.pop();if(e){var t=e.style;return t.display="",t.opacity="1",t[j.transform]="",t[j.transition]="",e}return this.create()},e.prototype.recycle=function(e){for(var t=0,n=e;t<n.length;t++){var i=n[t];i.style.display="none",this.cached.push(i)}return this.cached},e.prototype.recycleOne=function(e){return this.cached.push(e),this.cached},e}(),Wt=200,qt=function(){function e(e,t,n){this.renderFn=t,this.tombstone=n,this.unusedDom=[],this.timers=[],this.setContent(e)}return e.prototype.update=function(e,t,n){t>=e.length&&(t=e.length-1),n>e.length&&(n=e.length),this.collectUnusedDom(e,t,n),this.createDom(e,t,n),this.cacheHeight(e,t,n);var i=this.positionDom(e,t,n),r=i.startPos,o=i.startDelta,s=i.endPos;return{start:t,startPos:r,startDelta:o,end:n,endPos:s}},e.prototype.collectUnusedDom=function(e,t,n){for(var i=0;i<e.length;i++)if(i!==t){if(e[i].dom){var r=e[i].dom;Kt.isTombstone(r)?(this.tombstone.recycleOne(r),r.style.display="none"):this.unusedDom.push(r),e[i].dom=null}}else i=n-1;return e},e.prototype.createDom=function(e,t,n){for(var i=t;i<n;i++){var r=e[i].dom,o=e[i].data;if(r){if(!Kt.isTombstone(r)||!o)continue;e[i].tombstone=r,e[i].dom=null}r=o?this.renderFn(o,this.unusedDom.pop()):this.tombstone.getOne(),r.style.position="absolute",e[i].dom=r,e[i].pos=-1,this.content.appendChild(r)}},e.prototype.cacheHeight=function(e,t,n){for(var i=t;i<n;i++)e[i].data&&!e[i].height&&(e[i].height=e[i].dom.offsetHeight)},e.prototype.positionDom=function(e,t,n){for(var i=this,r=[],o=this.getStartPos(e,t,n),s=o.start,a=o.delta,c=s,l=t;l<n;l++){var u=e[l].tombstone;if(u){var d=u.style;d[j.transition]=D+"transform "+Wt+"ms, opacity "+Wt+"ms",d[j.transform]="translateY("+c+"px)",d.opacity="0",e[l].tombstone=null,r.push(u)}e[l].dom&&e[l].pos!==c&&(e[l].dom.style[j.transform]="translateY("+c+"px)",e[l].pos=c),c+=e[l].height||this.tombstone.height}var h=window.setTimeout((function(){i.tombstone.recycle(r)}),Wt);return this.timers.push(h),{startPos:s,startDelta:a,endPos:c}},e.prototype.getStartPos=function(e,t,n){if(e[t]&&-1!==e[t].pos)return{start:e[t].pos,delta:0};for(var i=-1===e[0].pos?0:e[0].pos,r=0;r<t;r++)i+=e[r].height||this.tombstone.height;var o,s=i;for(o=t;o<n;o++)if(!Kt.isTombstone(e[o].dom)&&-1!==e[o].pos){i=e[o].pos;break}var a=o;if(a<n)while(a>t)i-=e[a-1].height,a--;var c=s-i;return{start:i,delta:c}},e.prototype.removeTombstone=function(){for(var e=this.content.querySelectorAll(".tombstone"),t=e.length-1;t>=0;t--)this.content.removeChild(e[t])},e.prototype.setContent=function(e){e!==this.content&&(this.content=e)},e.prototype.destroy=function(){this.removeTombstone(),this.timers.forEach((function(e){clearTimeout(e)}))},e.prototype.resetState=function(){this.destroy(),this.timers=[],this.unusedDom=[]},e}(),Gt=-2e3,zt=function(){function e(e){this.scroll=e,this.start=0,this.end=0,this.init()}return e.prototype.init=function(){var e=this;this.handleOptions();var t=this.options,n=t.fetch,i=t.render,r=t.createTombstone;this.tombstone=new Kt(r),this.indexCalculator=new Ft(this.scroll.scroller.scrollBehaviorY.wrapperSize,this.tombstone.height),this.domManager=new qt(this.scroll.scroller.content,i,this.tombstone),this.dataManager=new Ht([],n,this.onFetchFinish.bind(this)),this.scroll.on(this.scroll.eventTypes.destroy,this.destroy,this),this.scroll.on(this.scroll.eventTypes.scroll,this.update,this),this.scroll.on(this.scroll.eventTypes.contentChanged,(function(t){e.domManager.setContent(t),e.indexCalculator.resetState(),e.domManager.resetState(),e.dataManager.resetState(),e.update({y:0})}));var o=this.scroll.scroller.scrollBehaviorY;o.hooks.on(o.hooks.eventTypes.computeBoundary,this.modifyBoundary,this),this.update({y:0})},e.prototype.modifyBoundary=function(e){e.maxScrollPos=Gt},e.prototype.handleOptions=function(){var e=this.scroll.options.infinity;e&&("function"!==typeof e.fetch&&u("Infinity plugin need fetch Function to new data."),"function"!==typeof e.render&&u("Infinity plugin need render Function to render each item."),"function"!==typeof e.render&&u("Infinity plugin need createTombstone Function to create tombstone."),this.options=e),this.scroll.options.probeType=3},e.prototype.update=function(e){var t=Math.round(-e.y),n=this.indexCalculator.calculate(t,this.dataManager.getList()),i=n.start,r=n.end;this.start=i,this.end=r,this.dataManager.update(r),this.updateDom(this.dataManager.getList())},e.prototype.onFetchFinish=function(e,t){var n=this.updateDom(e).end;return t||(this.domManager.removeTombstone(),this.scroll.scroller.animater.stop(),this.scroll.resetPosition()),n},e.prototype.updateDom=function(e){var t=this.domManager.update(e,this.start,this.end),n=t.end,i=t.startPos,r=t.endPos,o=t.startDelta;return o&&(this.scroll.minScrollY=o),r>this.scroll.maxScrollY&&(this.scroll.maxScrollY=-(r-this.scroll.scroller.scrollBehaviorY.wrapperSize)),{end:n,startPos:i,endPos:r}},e.prototype.destroy=function(){var e=this.scroll.scroller,t=e.content,n=e.scrollBehaviorY;while(t.firstChild)t.removeChild(t.firstChild);this.domManager.destroy(),this.scroll.off("scroll",this.update),this.scroll.off("destroy",this.destroy),n.hooks.off(n.hooks.eventTypes.computeBoundary)},e.pluginName="infinity",e}(),Yt="plugins.movable",Jt=[{key:"putAt",name:"putAt"}],Xt=Jt.map((function(e){return{key:e.key,sourceKey:Yt+"."+e.name}})),Qt=function(){function e(e){this.scroll=e,this.handleBScroll(),this.handleHooks()}return e.prototype.handleBScroll=function(){this.scroll.proxy(Xt)},e.prototype.handleHooks=function(){var e=this;this.hooksFn=[];var t=this.scroll.scroller,n=t.scrollBehaviorX,i=t.scrollBehaviorY,r=function(e,t){e.maxScrollPos>0&&(e.minScrollPos=t.wrapperSize-t.contentSize,e.maxScrollPos=0)};this.registerHooks(n.hooks,n.hooks.eventTypes.ignoreHasScroll,(function(){return!0})),this.registerHooks(n.hooks,n.hooks.eventTypes.computeBoundary,(function(e){r(e,n)})),this.registerHooks(i.hooks,i.hooks.eventTypes.ignoreHasScroll,(function(){return!0})),this.registerHooks(i.hooks,i.hooks.eventTypes.computeBoundary,(function(e){r(e,i)})),this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.destroy,(function(){e.destroy()}))},e.prototype.putAt=function(e,t,n,i){void 0===n&&(n=this.scroll.options.bounceTime),void 0===i&&(i=ee.bounce);var r=this.resolvePostion(e,t);this.scroll.scrollTo(r.x,r.y,n,i)},e.prototype.resolvePostion=function(e,t){var n=this.scroll.scroller,i=n.scrollBehaviorX,r=n.scrollBehaviorY,o={left:function(){return 0},top:function(){return 0},right:function(){return i.minScrollPos},bottom:function(){return r.minScrollPos},center:function(e){var t=0===e?i.minScrollPos:r.minScrollPos;return t/2}};return{x:"number"===typeof e?e:o[e](0),y:"number"===typeof t?t:o[t](1)}},e.prototype.destroy=function(){this.hooksFn.forEach((function(e){var t=e[0],n=e[1],i=e[2];t.off(n,i)})),this.hooksFn.length=0},e.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},e.pluginName="movable",e.applyOrder="pre",e}(),Zt=function(e){return"img"===e.tagName.toLowerCase()},en=function(){function e(e){this.scroll=e,this.refreshTimer=0,this.init()}return e.prototype.init=function(){this.handleOptions(this.scroll.options.observeImage),this.bindEventsToWrapper()},e.prototype.handleOptions=function(e){void 0===e&&(e={}),e=!0===e?{}:e;var t={debounceTime:100};this.options=E(t,e)},e.prototype.bindEventsToWrapper=function(){var e=this.scroll.scroller.wrapper;this.imageLoadEventRegister=new he(e,[{name:"load",handler:this.load.bind(this),capture:!0}]),this.imageErrorEventRegister=new he(e,[{name:"error",handler:this.load.bind(this),capture:!0}])},e.prototype.load=function(e){var t=this,n=e.target,i=this.options.debounceTime;n&&Zt(n)&&(0===i?this.scroll.refresh():(clearTimeout(this.refreshTimer),this.refreshTimer=window.setTimeout((function(){t.scroll.refresh()}),this.options.debounceTime)))},e.pluginName="observeImage",e}(),tn=function(e){var t={ratioX:0,ratioY:0};return e?("number"===typeof e?t.ratioX=t.ratioY=e:"object"===typeof e&&e&&(t.ratioX=e.x||0,t.ratioY=e.y||0),t):t},nn=function(e){e.preventDefault(),e.stopPropagation()},rn=function(){function e(e,t){this.scroll=e,this.options=t,this.currentPos={x:0,y:0},this.hooksFn=[],this.handleDOM(),this.handleHooks(),this.handleInteractive()}return e.prototype.handleDOM=function(){var e=this.options,t=e.relationElement,n=e.relationElementHandleElementIndex,i=void 0===n?0:n;this.wrapper=t,this.indicatorEl=this.wrapper.children[i]},e.prototype.handleHooks=function(){var e=this,t=this.scroll,n=t.hooks,i=t.scroller.translater.hooks,r=t.scroller.animater.hooks;this.registerHooks(n,n.eventTypes.refresh,this.refresh),this.registerHooks(i,i.eventTypes.translate,(function(t){e.updatePosition(t)})),this.registerHooks(r,r.eventTypes.time,this.transitionTime),this.registerHooks(r,r.eventTypes.timeFunction,this.transitionTimingFunction)},e.prototype.transitionTime=function(e){void 0===e&&(e=0),this.indicatorEl.style[j.transitionDuration]=e+"ms"},e.prototype.transitionTimingFunction=function(e){this.indicatorEl.style[j.transitionTimingFunction]=e},e.prototype.handleInteractive=function(){!1!==this.options.interactive&&this.registerEvents()},e.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},e.prototype.registerEvents=function(){var e=this.scroll.options,t=e.disableMouse,n=e.disableTouch,i=[],r=[],o=[];t||(i.push({name:"mousedown",handler:this.start.bind(this)}),r.push({name:"mousemove",handler:this.move.bind(this)}),o.push({name:"mouseup",handler:this.end.bind(this)})),n||(i.push({name:"touchstart",handler:this.start.bind(this)}),r.push({name:"touchmove",handler:this.move.bind(this)}),o.push({name:"touchend",handler:this.end.bind(this)},{name:"touchcancel",handler:this.end.bind(this)})),this.startEventRegister=new he(this.indicatorEl,i),this.moveEventRegister=new he(window,r),this.endEventRegister=new he(window,o)},e.prototype.refresh=function(){var e=this.scroll,t=e.x,n=e.y,i=e.hasHorizontalScroll,r=e.hasVerticalScroll,o=e.maxScrollX,s=e.maxScrollY,a=tn(this.options.ratio),c=a.ratioX,l=a.ratioY,u=Z(this.wrapper),d=u.width,h=u.height,p=$(this.indicatorEl),f=p.width,g=p.height;i&&(this.maxScrollX=d-f,this.translateXSign=this.maxScrollX>0?-1:1,this.minScrollX=0,this.ratioX=c||Math.abs(this.maxScrollX/o)),r&&(this.maxScrollY=h-g,this.translateYSign=this.maxScrollY>0?-1:1,this.minScrollY=0,this.ratioY=l||Math.abs(this.maxScrollY/s)),this.updatePosition({x:t,y:n})},e.prototype.start=function(e){if(!this.BScrollIsDisabled()){var t=e.touches?e.touches[0]:e;nn(e),this.initiated=!0,this.moved=!1,this.lastPointX=t.pageX,this.lastPointY=t.pageY,this.startTime=C(),this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.beforeScrollStart)}},e.prototype.BScrollIsDisabled=function(){return!this.scroll.enabled},e.prototype.move=function(e){if(this.initiated){var t=e.touches?e.touches[0]:e,n=t.pageX,i=t.pageY;nn(e);var r=n-this.lastPointX,o=i-this.lastPointY;if(this.lastPointX=n,this.lastPointY=i,this.moved||this.indicatorNotMoved(r,o)||(this.moved=!0,this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.scrollStart)),this.moved){var s=this.getBScrollPosByRatio(this.currentPos,r,o);this.syncBScroll(s)}}},e.prototype.end=function(e){if(this.initiated&&(this.initiated=!1,nn(e),this.moved)){var t=this.scroll,n=t.x,i=t.y;this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.scrollEnd,{x:n,y:i})}},e.prototype.getBScrollPosByRatio=function(e,t,n){var i=e.x,r=e.y,o=this.scroll,s=o.hasHorizontalScroll,a=o.hasVerticalScroll,c=o.minScrollX,l=o.maxScrollX,u=o.minScrollY,d=o.maxScrollY,h=this.scroll,p=h.x,f=h.y;if(s){var g=S(i+t,Math.min(this.minScrollX,this.maxScrollX),Math.max(this.minScrollX,this.maxScrollX)),m=Math.round(g/this.ratioX*this.translateXSign);p=S(m,l,c)}if(a){var _=S(r+n,Math.min(this.minScrollY,this.maxScrollY),Math.max(this.minScrollY,this.maxScrollY)),v=Math.round(_/this.ratioY*this.translateYSign);f=S(v,d,u)}return{x:p,y:f}},e.prototype.indicatorNotMoved=function(e,t){var n=this.currentPos,i=n.x,r=n.y,o=i===this.minScrollX&&e<=0||i===this.maxScrollX&&e>=0,s=r===this.minScrollY&&t<=0||r===this.maxScrollY&&t>=0;return o&&s},e.prototype.syncBScroll=function(e){var t=C(),n=this.scroll,i=n.options,r=n.scroller,o=i.probeType,s=i.momentumLimitTime;r.translater.translate(e),t-this.startTime>s&&(this.startTime=t,1===o&&r.hooks.trigger(r.hooks.eventTypes.scroll,e)),o>1&&r.hooks.trigger(r.hooks.eventTypes.scroll,e)},e.prototype.updatePosition=function(e){var t=this.getIndicatorPosByRatio(e);this.applyTransformProperty(t),this.currentPos=o({},t)},e.prototype.applyTransformProperty=function(e){var t=this.scroll.options.translateZ,n=["translateX("+e.x+"px)","translateY("+e.y+"px)",""+t];this.indicatorEl.style[j.transform]=n.join(" ")},e.prototype.getIndicatorPosByRatio=function(e){var t=e.x,n=e.y,i=this.scroll,r=i.hasHorizontalScroll,s=i.hasVerticalScroll,a=o({},this.currentPos);if(r){var c=Math.round(this.ratioX*t*this.translateXSign);a.x=S(c,Math.min(this.minScrollX,this.maxScrollX),Math.max(this.minScrollX,this.maxScrollX))}if(s){var l=Math.round(this.ratioY*n*this.translateYSign);a.y=S(l,Math.min(this.minScrollY,this.maxScrollY),Math.max(this.minScrollY,this.maxScrollY))}return a},e.prototype.destroy=function(){!1!==this.options.interactive&&(this.startEventRegister.destroy(),this.moveEventRegister.destroy(),this.endEventRegister.destroy()),this.hooksFn.forEach((function(e){var t=e[0],n=e[1],i=e[2];t.off(n,i)})),this.hooksFn.length=0},e}(),on=function(){function e(e){this.scroll=e,this.options=[],this.indicators=[],this.handleOptions(),this.handleHooks()}return e.prototype.handleOptions=function(){var e=this.scroll.options.indicators;d(Array.isArray(e),"'indicators' must be an array.");for(var t=0,n=e;t<n.length;t++){var i=n[t];d(!!i.relationElement,"'relationElement' must be a HTMLElement."),this.createIndicators(i)}},e.prototype.createIndicators=function(e){this.indicators.push(new rn(this.scroll,e))},e.prototype.handleHooks=function(){var e=this,t=this.scroll.hooks;t.on(t.eventTypes.destroy,(function(){for(var t=0,n=e.indicators;t<n.length;t++){var i=n[t];i.destroy()}e.indicators=[]}))},e.pluginName="indicators",e}();Fe.use($e).use(He).use(Je).use(tt).use(rt).use(ht).use(vt).use(St).use(Bt).use(zt).use(Qt).use(en).use(on),t["a"]=Fe},f494:function(e,t,n){e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=108)}({0:function(e,t,n){"use strict";function i(e,t,n,i,r,o,s,a){var c,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),i&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},l._ssrRegister=c):r&&(c=a?function(){r.call(this,this.$root.$options.shadowRoot)}:r),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}n.d(t,"a",(function(){return i}))},108:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"el-radio",class:[e.border&&e.radioSize?"el-radio--"+e.radioSize:"",{"is-disabled":e.isDisabled},{"is-focus":e.focus},{"is-bordered":e.border},{"is-checked":e.model===e.label}],attrs:{role:"radio","aria-checked":e.model===e.label,"aria-disabled":e.isDisabled,tabindex:e.tabIndex},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"]))return null;t.stopPropagation(),t.preventDefault(),e.model=e.isDisabled?e.model:e.label}}},[n("span",{staticClass:"el-radio__input",class:{"is-disabled":e.isDisabled,"is-checked":e.model===e.label}},[n("span",{staticClass:"el-radio__inner"}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],ref:"radio",staticClass:"el-radio__original",attrs:{type:"radio","aria-hidden":"true",name:e.name,disabled:e.isDisabled,tabindex:"-1",autocomplete:"off"},domProps:{value:e.label,checked:e._q(e.model,e.label)},on:{focus:function(t){e.focus=!0},blur:function(t){e.focus=!1},change:[function(t){e.model=e.label},e.handleChange]}})]),n("span",{staticClass:"el-radio__label",on:{keydown:function(e){e.stopPropagation()}}},[e._t("default"),e.$slots.default?e._e():[e._v(e._s(e.label))]],2)])},r=[];i._withStripped=!0;var o=n(4),s=n.n(o),a={name:"ElRadio",mixins:[s.a],inject:{elForm:{default:""},elFormItem:{default:""}},componentName:"ElRadio",props:{value:{},label:{},disabled:Boolean,name:String,border:Boolean,size:String},data:function(){return{focus:!1}},computed:{isGroup:function(){var e=this.$parent;while(e){if("ElRadioGroup"===e.$options.componentName)return this._radioGroup=e,!0;e=e.$parent}return!1},model:{get:function(){return this.isGroup?this._radioGroup.value:this.value},set:function(e){this.isGroup?this.dispatch("ElRadioGroup","input",[e]):this.$emit("input",e),this.$refs.radio&&(this.$refs.radio.checked=this.model===this.label)}},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},radioSize:function(){var e=this.size||this._elFormItemSize||(this.$ELEMENT||{}).size;return this.isGroup&&this._radioGroup.radioGroupSize||e},isDisabled:function(){return this.isGroup?this._radioGroup.disabled||this.disabled||(this.elForm||{}).disabled:this.disabled||(this.elForm||{}).disabled},tabIndex:function(){return this.isDisabled||this.isGroup&&this.model!==this.label?-1:0}},methods:{handleChange:function(){var e=this;this.$nextTick((function(){e.$emit("change",e.model),e.isGroup&&e.dispatch("ElRadioGroup","handleChange",e.model)}))}}},c=a,l=n(0),u=Object(l["a"])(c,i,r,!1,null,null,null);u.options.__file="packages/radio/src/radio.vue";var d=u.exports;d.install=function(e){e.component(d.name,d)};t["default"]=d},4:function(e,t){e.exports=n("d010")}})},f5df:function(e,t,n){var i=n("da84"),r=n("00ee"),o=n("1626"),s=n("c6b6"),a=n("b622"),c=a("toStringTag"),l=i.Object,u="Arguments"==s(function(){return arguments}()),d=function(e,t){try{return e[t]}catch(n){}};e.exports=r?s:function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=d(t=l(e),c))?n:u?s(t):"Object"==(i=s(t))&&o(t.callee)?"Arguments":i}},f6b4:function(e,t,n){"use strict";var i=n("c532");function r(){this.handlers=[]}r.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){i.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=r},f772:function(e,t,n){var i=n("5692"),r=n("90e3"),o=i("keys");e.exports=function(e){return o[e]||(o[e]=r(e))}},f893:function(e,t,n){e.exports={default:n("8119"),__esModule:!0}},faf5:function(e,t,n){e.exports=!n("0bad")&&!n("4b8b")((function(){return 7!=Object.defineProperty(n("05f5")("div"),"a",{get:function(){return 7}}).a}))},fb6a:function(e,t,n){"use strict";var i=n("23e7"),r=n("da84"),o=n("e8b5"),s=n("68ee"),a=n("861d"),c=n("23cb"),l=n("07fa"),u=n("fc6a"),d=n("8418"),h=n("b622"),p=n("1dde"),f=n("f36a"),g=p("slice"),m=h("species"),_=r.Array,v=Math.max;i({target:"Array",proto:!0,forced:!g},{slice:function(e,t){var n,i,r,h=u(this),p=l(h),g=c(e,p),y=c(void 0===t?p:t,p);if(o(h)&&(n=h.constructor,s(n)&&(n===_||o(n.prototype))?n=void 0:a(n)&&(n=n[m],null===n&&(n=void 0)),n===_||void 0===n))return f(h,g,y);for(i=new(void 0===n?_:n)(v(y-g,0)),r=0;g<y;g++,r++)g in h&&d(i,r,h[g]);return i.length=r,i}})},fc5e:function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},fc6a:function(e,t,n){var i=n("44ad"),r=n("1d80");e.exports=function(e){return i(r(e))}},fcd4:function(e,t,n){t.f=n("cc15")},fce3:function(e,t,n){var i=n("d039"),r=n("da84"),o=r.RegExp;e.exports=i((function(){var e=o(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},fdbc:function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(e,t,n){var i=n("4930");e.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},fea9:function(e,t,n){var i=n("da84");e.exports=i.Promise},fed5:function(e,t){t.f=Object.getOwnPropertySymbols}}]);
//# sourceMappingURL=chunk-vendors.cd7a1a9f.js.map