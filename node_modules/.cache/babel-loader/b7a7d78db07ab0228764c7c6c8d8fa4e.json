{"remainingRequest":"/Users/cuifengbo/work/RCRTC-Git/rcrtc-web/node_modules/babel-loader/lib/index.js!/Users/cuifengbo/work/RCRTC-Git/rcrtc-web/node_modules/eslint-loader/index.js??ref--13-0!/Users/cuifengbo/work/RCVoiceRoomLib-Web/dist/main.js","dependencies":[{"path":"/Users/cuifengbo/work/RCVoiceRoomLib-Web/dist/main.js","mtime":1648197471126},{"path":"/Users/cuifengbo/work/RCRTC-Git/rcrtc-web/babel.config.js","mtime":1648104828534},{"path":"/Users/cuifengbo/work/RCRTC-Git/rcrtc-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cuifengbo/work/RCRTC-Git/rcrtc-web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/cuifengbo/work/RCRTC-Git/rcrtc-web/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF90eXBlb2Y9cmVxdWlyZSgiL1VzZXJzL2N1aWZlbmdiby93b3JrL1JDUlRDLUdpdC9yY3J0Yy13ZWIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvdHlwZW9mIikuZGVmYXVsdDtyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIik7cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5kZXNjcmlwdGlvbi5qcyIpO3JlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIik7cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC50by1zdHJpbmctdGFnLmpzIik7cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmpzb24udG8tc3RyaW5nLXRhZy5qcyIpO3JlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5tYXRoLnRvLXN0cmluZy10YWcuanMiKTsvKgogKiBBVFRFTlRJT046IFRoZSAiZXZhbCIgZGV2dG9vbCBoYXMgYmVlbiB1c2VkIChtYXliZSBieSBkZWZhdWx0IGluIG1vZGU6ICJkZXZlbG9wbWVudCIpLgogKiBUaGlzIGRldnRvb2wgaXMgbmVpdGhlciBtYWRlIGZvciBwcm9kdWN0aW9uIG5vciBmb3IgcmVhZGFibGUgb3V0cHV0IGZpbGVzLgogKiBJdCB1c2VzICJldmFsKCkiIGNhbGxzIHRvIGNyZWF0ZSBhIHNlcGFyYXRlIHNvdXJjZSBmaWxlIGluIHRoZSBicm93c2VyIGRldnRvb2xzLgogKiBJZiB5b3UgYXJlIHRyeWluZyB0byByZWFkIHRoZSBvdXRwdXQgZmlsZSwgc2VsZWN0IGEgZGlmZmVyZW50IGRldnRvb2wgKGh0dHBzOi8vd2VicGFjay5qcy5vcmcvY29uZmlndXJhdGlvbi9kZXZ0b29sLykKICogb3IgZGlzYWJsZSB0aGUgZGVmYXVsdCBkZXZ0b29sIHdpdGggImRldnRvb2w6IGZhbHNlIi4KICogSWYgeW91IGFyZSBsb29raW5nIGZvciBwcm9kdWN0aW9uLXJlYWR5IG91dHB1dCBmaWxlcywgc2VlIG1vZGU6ICJwcm9kdWN0aW9uIiAoaHR0cHM6Ly93ZWJwYWNrLmpzLm9yZy9jb25maWd1cmF0aW9uL21vZGUvKS4KICovKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsZmFjdG9yeSl7aWYoKHR5cGVvZiBleHBvcnRzPT09InVuZGVmaW5lZCI/InVuZGVmaW5lZCI6X3R5cGVvZihleHBvcnRzKSk9PT0nb2JqZWN0JyYmKHR5cGVvZiBtb2R1bGU9PT0idW5kZWZpbmVkIj8idW5kZWZpbmVkIjpfdHlwZW9mKG1vZHVsZSkpPT09J29iamVjdCcpbW9kdWxlLmV4cG9ydHM9ZmFjdG9yeSgpO2Vsc2UgaWYodHlwZW9mIGRlZmluZT09PSdmdW5jdGlvbicmJmRlZmluZS5hbWQpZGVmaW5lKFtdLGZhY3RvcnkpO2Vsc2V7dmFyIGE9ZmFjdG9yeSgpO2Zvcih2YXIgaSBpbiBhKXsoKHR5cGVvZiBleHBvcnRzPT09InVuZGVmaW5lZCI/InVuZGVmaW5lZCI6X3R5cGVvZihleHBvcnRzKSk9PT0nb2JqZWN0Jz9leHBvcnRzOnJvb3QpW2ldPWFbaV07fX19KShzZWxmLGZ1bmN0aW9uKCl7cmV0dXJuKC8qKioqKiovZnVuY3Rpb24oKXsvLyB3ZWJwYWNrQm9vdHN0cmFwCi8qKioqKiovInVzZSBzdHJpY3QiOy8qKioqKiovdmFyIF9fd2VicGFja19tb2R1bGVzX189ey8qKiovIi4vbm9kZV9tb2R1bGVzL0Byb25nY2xvdWQvZW5naW5lL2Rpc3QvaW5kZXguZXNtLmpzIjovKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcCiAgISoqKiAuL25vZGVfbW9kdWxlcy9Acm9uZ2Nsb3VkL2VuZ2luZS9kaXN0L2luZGV4LmVzbS5qcyAqKiohCiAgXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovIC8qKiovZnVuY3Rpb24gbm9kZV9tb2R1bGVzUm9uZ2Nsb3VkRW5naW5lRGlzdEluZGV4RXNtSnMoX191bnVzZWRfd2VicGFja19tb2R1bGUsX193ZWJwYWNrX2V4cG9ydHNfXyxfX3dlYnBhY2tfcmVxdWlyZV9fKXtldmFsKCJfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywge1xuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIkFFbmdpbmVcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gR3IpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIkFOYXZpXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHFyKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJBUElDb250ZXh0XCI6ICgpID0+ICgvKiBiaW5kaW5nICovIE5zKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJBcHBTdG9yYWdlXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIFIpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIkFzc2VydFJ1bGVzXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIFdlKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJDT05ORUNUSU9OX1RZUEVcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gdCksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiQ1BQX1BST1RPQ0FMX01TR1RZUEVfT1BUSU9OXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIEUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIkNhbGxMaWJNc2dUeXBlXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIFllKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJDaGF0cm9vbUVudHJ5VHlwZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBMZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiQ2hhdHJvb21NZW1iZXJDaGFuZ2VUeXBlXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIERlKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJDb21ldENoYW5uZWxcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gQnIpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIkNvbm5lY3RSZXN1bHRDb2RlXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIENlKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJDb25uZWN0aW9uU3RhdHVzXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIEllKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJDb252ZXJzYXRpb25UeXBlXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIGopLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIkRlbGF5VGltZXJcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gUnQpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIkVycm9yQ29kZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBFZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiRXZlbnRFbWl0dGVyXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIF9lKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJGaWxlVHlwZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBXKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJIdHRwTWV0aG9kXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIFZyKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJJTV9DT01FVF9QVUxMTVNHX1RJTUVPVVRcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8geSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiSU1fUElOR19JTlRFUlZBTF9USU1FXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIGQpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIklNX1BJTkdfTUlOX1RJTUVPVVRcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gcCksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiSU1fUElOR19USU1FT1VUXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIGYpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIklNX1NJR05BTF9USU1FT1VUXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIGwpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIkxpdmVSb2xlXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIEdlKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJMaXZlVHlwZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBCZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiTG9nTGV2ZWxcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gVSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiTG9nVHlwZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBiKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJMb2dnZXJcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gcGUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIk1BWF9NRVNTQUdFX0NPTlRFTlRfQllURVNcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gXyksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiTUlOSV9DT01FVF9DT05ORUNUX1VSSVNcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gaCksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiTUlOSV9TT0NLRVRfQ09OTkVDVF9VUklTXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIGMpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIk1lbnRpb25lZFR5cGVcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gd2UpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIk1lc3NhZ2VCbG9ja1R5cGVcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8ga2UpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIk1lc3NhZ2VEaXJlY3Rpb25cIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gbWUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIk1lc3NhZ2VUeXBlXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIFNlKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJOQVZJX0NBQ0hFX0RVUkFUSU9OXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHIpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIk5BVklfUkVRX1RJTUVPVVRcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gcyksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiTm90aWZpY2F0aW9uU3RhdHVzXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIE9lKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJPcGVyYXRlU3RhdHVzXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIEZlKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJQSU5HX1JFUV9USU1FT1VUXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIG8pLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIlBVQkxJQ19DTE9VRF9OQVZJX1VSSVNcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gdSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiUGx1Z2luQ29udGV4dFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyB5cyksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiUkNBc3NlcnRFcnJvclwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBudCksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiUlRDQXBpVHlwZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBxZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiUlRDSWRlbnRpdHlDaGFuZ2VUeXBlXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIEtlKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJSVENKb2luVHlwZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBIZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiUlRDTW9kZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyB4ZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiUlRDUGx1Z2luQ29udGV4dFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBtcyksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiUmVjZWl2ZWRTdGF0dXNcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gaSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiU0VORF9NRVNTQUdFX1RZUEVfT1BUSU9OXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHYpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIlNUQVRVU19NRVNTQUdFXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIFQpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIlNUT1JBR0VfUk9PVF9LRVlcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gbSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiVGFnQ2hhbmdlVHlwZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBTcyksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiVXBsb2FkTWV0aG9kXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIFVlKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJWZXJzaW9uTWFuYWdlXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIEplKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJXRUJfU09DS0VUX1RJTUVPVVRcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gYSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiV2ViU29ja2V0Q2hhbm5lbFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyB4ciksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiYXBwZW5kVXJsXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIGspLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImFzc2VydFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBpdCksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiY2xvbmVcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gSXQpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImNsb25lQnlKU09OXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHl0KSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJmb3JFYWNoXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIGR0KSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJmb3JtYXRDb25uZWN0UmVzcG9uc2VDb2RlXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIEV0KSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJnZXRCcm93c2VyXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHZ0KSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJnZXRNaW1lS2V5XCI6ICgpID0+ICgvKiBiaW5kaW5nICovIGF0KSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJnZXRVcGxvYWRGaWxlTmFtZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBvdCksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiaW5kZXhPZlwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBwdCksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiaXNBcnJheVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBYKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJpc0FycmF5QnVmZmVyXCI6ICgpID0+ICgvKiBiaW5kaW5nICovICQpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImlzQm9vbGVhblwiOiAoKSA9PiAoLyogYmluZGluZyAqLyB6KSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJpc0Z1bmN0aW9uXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIGllKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJpc0h0dHBVcmxcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gb2UpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImlzSW5PYmplY3RcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gX3QpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImlzSW5jbHVkZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBndCksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiaXNOdWxsXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHNlKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJpc051bWJlclwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBaKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJpc09iamVjdFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBuZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiaXNTdHJpbmdcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gSiksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiaXNVbmRlZmluZWRcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gcmUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImlzVmFsaWRDaHJtRW50cnlLZXlcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gaHQpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImlzVmFsaWRDaHJtRW50cnlWYWx1ZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBsdCksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiaXNWYWxpZENvbnZlcnNhdGlvblR5cGVcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gdWUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImlzVmFsaWRFeHBhbnNpb25cIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gaGUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImlzVmFsaWRGaWxlVHlwZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBjZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwibWFwXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIGZ0KSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJub3RFbXB0eUFycmF5XCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHRlKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJub3RFbXB0eU9iamVjdFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBhZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwibm90RW1wdHlTdHJpbmdcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gZWUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcInB1c2hDb25maWdzVG9KU09OXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHV0KSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJwdXNoSlNPTlRvQ29uZmlnc1wiOiAoKSA9PiAoLyogYmluZGluZyAqLyBjdCksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwidG9kb1wiOiAoKSA9PiAoLyogYmluZGluZyAqLyBQKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJ1c2luZ0NwcEVuZ2luZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBtdCksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwidmFsaWRhdGVcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gcnQpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcInZlcnNpb25cIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gT3MpXG4vKiBoYXJtb255IGV4cG9ydCAqLyB9KTtcbnZhciBlOyFmdW5jdGlvbihlKXtlW2UuUkVBRD0xXT1cIlJFQURcIixlW2UuTElTVEVORUQ9Ml09XCJMSVNURU5FRFwiLGVbZS5ET1dOTE9BREVEPTRdPVwiRE9XTkxPQURFRFwiLGVbZS5SRVRSSUVWRUQ9OF09XCJSRVRSSUVWRURcIixlW2UuVU5SRUFEPTBdPVwiVU5SRUFEXCJ9KGV8fChlPXt9KSk7dmFyIHQsbixpPWUscj03MmU1LHM9MWU0LG89NWUzLGE9NWUzLHU9W1wiaHR0cHM6Ly9uYXYuY24ucm9uZ2h1Yi5jb21cIixcImh0dHBzOi8vbmF2Mi1jbi5yb25naHViLmNvbVwiXSxjPVtcIndzcHJveHkuY24ucm9uZ2h1Yi5jb21cIixcIndzYXAtY24ucm9uZ2h1Yi5jb21cIl0saD1bXCJjb21ldHByb3h5LWNuLnJvbmdodWIuY29tXCIsXCJtaW5pLWNuLnJvbmdodWIuY29tXCJdLGw9M2U0LGQ9MTVlMyxmPTE1ZTMscD0yZTMsXz0xMzEwNzIseT00NWUzLG09XCJSQ1Y0LVwiLHY9e1wiUkM6VHh0TXNnXCI6e2lzQ291bnRlZDohMCxpc1BlcnNpdGVkOiEwfSxcIlJDOkltZ01zZ1wiOntpc0NvdW50ZWQ6ITAsaXNQZXJzaXRlZDohMH0sXCJSQzpWY01zZ1wiOntpc0NvdW50ZWQ6ITAsaXNQZXJzaXRlZDohMH0sXCJSQzpJbWdUZXh0TXNnXCI6e2lzQ291bnRlZDohMCxpc1BlcnNpdGVkOiEwfSxcIlJDOkZpbGVNc2dcIjp7aXNDb3VudGVkOiEwLGlzUGVyc2l0ZWQ6ITB9LFwiUkM6SFFWQ01zZ1wiOntpc0NvdW50ZWQ6ITAsaXNQZXJzaXRlZDohMH0sXCJSQzpMQlNNc2dcIjp7aXNDb3VudGVkOiEwLGlzUGVyc2l0ZWQ6ITB9LFwiUkM6UFNJbWdUeHRNc2dcIjp7aXNDb3VudGVkOiEwLGlzUGVyc2l0ZWQ6ITB9LFwiUkM6UFNNdWx0aUltZ1R4dE1zZ1wiOntpc0NvdW50ZWQ6ITAsaXNQZXJzaXRlZDohMH0sXCJSQ0pybWY6UnBNc2dcIjp7aXNDb3VudGVkOiEwLGlzUGVyc2l0ZWQ6ITB9LFwiUkNKcm1mOlJwT3BlbmRNc2dcIjp7aXNDb3VudGVkOiEwLGlzUGVyc2l0ZWQ6ITB9LFwiUkM6Q29tYmluZU1zZ1wiOntpc0NvdW50ZWQ6ITAsaXNQZXJzaXRlZDohMH0sXCJSQzpSZWZlcmVuY2VNc2dcIjp7aXNDb3VudGVkOiEwLGlzUGVyc2l0ZWQ6ITB9LFwiUkM6U2lnaHRNc2dcIjp7aXNDb3VudGVkOiEwLGlzUGVyc2l0ZWQ6ITB9LFwiUkM6R0lGTXNnXCI6e2lzQ291bnRlZDohMCxpc1BlcnNpdGVkOiEwfSxcIlJDOkluZm9OdGZcIjp7aXNDb3VudGVkOiExLGlzUGVyc2l0ZWQ6ITB9LFwiUkM6Q29udGFjdE50ZlwiOntpc0NvdW50ZWQ6ITEsaXNQZXJzaXRlZDohMH0sXCJSQzpQcm9maWxlTnRmXCI6e2lzQ291bnRlZDohMSxpc1BlcnNpdGVkOiEwfSxcIlJDOkNtZE50ZlwiOntpc0NvdW50ZWQ6ITEsaXNQZXJzaXRlZDohMH0sXCJSQzpHcnBOdGZcIjp7aXNDb3VudGVkOiExLGlzUGVyc2l0ZWQ6ITB9LFwiUkM6UmNDbWRcIjp7aXNDb3VudGVkOiExLGlzUGVyc2l0ZWQ6ITB9LFwiUkM6Q21kTXNnXCI6e2lzQ291bnRlZDohMSxpc1BlcnNpdGVkOiExfSxcIlJDOlR5cFN0c1wiOntpc0NvdW50ZWQ6ITEsaXNQZXJzaXRlZDohMX0sXCJSQzpQU0NtZFwiOntpc0NvdW50ZWQ6ITEsaXNQZXJzaXRlZDohMX0sXCJSQzpTUlNNc2dcIjp7aXNDb3VudGVkOiExLGlzUGVyc2l0ZWQ6ITF9LFwiUkM6UlJSZXFNc2dcIjp7aXNDb3VudGVkOiExLGlzUGVyc2l0ZWQ6ITF9LFwiUkM6UlJSc3BNc2dcIjp7aXNDb3VudGVkOiExLGlzUGVyc2l0ZWQ6ITF9LFwiUkM6Q3NDaGFSXCI6e2lzQ291bnRlZDohMSxpc1BlcnNpdGVkOiExfSxcIlJDOkNTQ2hhXCI6e2lzQ291bnRlZDohMSxpc1BlcnNpdGVkOiExfSxcIlJDOkNzRXZhXCI6e2lzQ291bnRlZDohMSxpc1BlcnNpdGVkOiExfSxcIlJDOkNzQ29udGFjdFwiOntpc0NvdW50ZWQ6ITEsaXNQZXJzaXRlZDohMX0sXCJSQzpDc0hzXCI6e2lzQ291bnRlZDohMSxpc1BlcnNpdGVkOiExfSxcIlJDOkNzSHNSXCI6e2lzQ291bnRlZDohMSxpc1BlcnNpdGVkOiExfSxcIlJDOkNzU3BcIjp7aXNDb3VudGVkOiExLGlzUGVyc2l0ZWQ6ITF9LFwiUkM6Q3NFbmRcIjp7aXNDb3VudGVkOiExLGlzUGVyc2l0ZWQ6ITF9LFwiUkM6Q3NVcGRhdGVcIjp7aXNDb3VudGVkOiExLGlzUGVyc2l0ZWQ6ITF9LFwiUkM6UmVhZE50ZlwiOntpc0NvdW50ZWQ6ITEsaXNQZXJzaXRlZDohMX0sXCJSQzpjaHJtS1ZOb3RpTXNnXCI6e2lzQ291bnRlZDohMSxpc1BlcnNpdGVkOiExfSxcIlJDOlZDQWNjZXB0XCI6e2lzQ291bnRlZDohMSxpc1BlcnNpdGVkOiExfSxcIlJDOlZDUmluZ2luZ1wiOntpc0NvdW50ZWQ6ITEsaXNQZXJzaXRlZDohMX0sXCJSQzpWQ1N1bW1hcnlcIjp7aXNDb3VudGVkOiExLGlzUGVyc2l0ZWQ6ITF9LFwiUkM6VkNIYW5ndXBcIjp7aXNDb3VudGVkOiExLGlzUGVyc2l0ZWQ6ITF9LFwiUkM6VkNJbnZpdGVcIjp7aXNDb3VudGVkOiExLGlzUGVyc2l0ZWQ6ITF9LFwiUkM6VkNNb2RpZnlNZWRpYVwiOntpc0NvdW50ZWQ6ITEsaXNQZXJzaXRlZDohMX0sXCJSQzpWQ01vZGlmeU1lbVwiOntpc0NvdW50ZWQ6ITEsaXNQZXJzaXRlZDohMX0sXCJSQzpNc2dFeE1zZ1wiOntpc0NvdW50ZWQ6ITEsaXNQZXJzaXRlZDohMX0sXCJSQzpSUk1zZ1wiOntpc0NvdW50ZWQ6ITEsaXNQZXJzaXRlZDohMX0sXCJSQzpMb2dDbWRNc2dcIjp7aXNDb3VudGVkOiExLGlzUGVyc2l0ZWQ6ITF9LFwiUkM6SW50ZXJjZXB0TXNnXCI6e2lzQ291bnRlZDohMSxpc1BlcnNpdGVkOiExfX0sRT17XCJSQzpEaXpOdGZcIjp7aXNDb3VudGVkOiExLGlzUGVyc2l0ZWQ6ITF9fSxUPVtcIlJDOlR5cFN0c1wiLFwiUkM6SW50ZXJjZXB0TXNnXCJdOyFmdW5jdGlvbihlKXtlLldFQlNPQ0tFVD1cIndlYnNvY2tldFwiLGUuQ09NRVQ9XCJjb21ldFwifSh0fHwodD17fSkpO3ZhciBJPWZ1bmN0aW9uKGUpe3JldHVybiBufHwobj17c2V0OmZ1bmN0aW9uKHQsbil7ZS5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSh0LEpTT04uc3RyaW5naWZ5KG4pKX0sZ2V0OmZ1bmN0aW9uKHQpe3ZhciBuO3RyeXtuPUpTT04ucGFyc2UoZS5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSh0KSl9Y2F0Y2goZSl7bj1udWxsfXJldHVybiBufSxyZW1vdmU6ZnVuY3Rpb24odCl7cmV0dXJuIGUubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0odCl9LGdldEtleXM6ZnVuY3Rpb24oKXt2YXIgdD1bXTtmb3IodmFyIG4gaW4gZS5sb2NhbFN0b3JhZ2UpdC5wdXNoKG4pO3JldHVybiB0fX0pLG59LEM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuX2NhY2hlcz17fSxlJiYodGhpcy5fY2FjaGVzPWUpfXJldHVybiBlLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24oZSx0KXt0aGlzLl9jYWNoZXNbZV09dH0sZS5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ2V0KGUpO3JldHVybiBkZWxldGUgdGhpcy5fY2FjaGVzW2VdLHR9LGUucHJvdG90eXBlLmdldD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fY2FjaGVzW2VdfSxlLnByb3RvdHlwZS5nZXRLZXlzPWZ1bmN0aW9uKCl7dmFyIGU9W107Zm9yKHZhciB0IGluIHRoaXMuX2NhY2hlcyllLnB1c2godCk7cmV0dXJuIGV9LGV9KCksUj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt2YXIgbixpPXQ/XCJSQ1Y0LVwiK3Q6XCJSQ1Y0LVwiO3RoaXMuX3Jvb3RTdG9yYWdlPUkoZSk7dmFyIHI9dGhpcy5fcm9vdFN0b3JhZ2UuZ2V0KGkpfHx7fTt0aGlzLl9jYWNoZT1uZXcgQygoKG49e30pW2ldPXIsbikpLHRoaXMuX3N0b3JhZ2VLZXk9aX1yZXR1cm4gZS5wcm90b3R5cGUuX2dldD1mdW5jdGlvbigpe3ZhciBlPXRoaXMuX3N0b3JhZ2VLZXk7cmV0dXJuIHRoaXMuX2NhY2hlLmdldChlKXx8e319LGUucHJvdG90eXBlLl9zZXQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fc3RvcmFnZUtleTtlPWV8fHt9LHRoaXMuX2NhY2hlLnNldCh0LGUpLHRoaXMuX3Jvb3RTdG9yYWdlLnNldCh0LGUpfSxlLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLl9nZXQoKTtuW2VdPXQsdGhpcy5fc2V0KG4pfSxlLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fZ2V0KCk7ZGVsZXRlIHRbZV0sdGhpcy5fc2V0KHQpfSxlLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3ZhciBlPXRoaXMuX3N0b3JhZ2VLZXk7dGhpcy5fcm9vdFN0b3JhZ2UucmVtb3ZlKGUpLHRoaXMuX2NhY2hlLnJlbW92ZShlKX0sZS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9nZXQoKVtlXX0sZS5wcm90b3R5cGUuZ2V0S2V5cz1mdW5jdGlvbigpe3ZhciBlPXRoaXMuX2dldCgpLHQ9W107Zm9yKHZhciBuIGluIGUpdC5wdXNoKG4pO3JldHVybiB0fSxlLnByb3RvdHlwZS5nZXRWYWx1ZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0KCl8fHt9fSxlfSgpLFM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4oUz1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG4gaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxuKSYmKGVbbl09dFtuXSl9KShlLHQpfTtmdW5jdGlvbiBOKGUsdCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIrU3RyaW5nKHQpK1wiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9ZX1TKGUsdCksZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KToobi5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IG4pfXZhciBPPWZ1bmN0aW9uKCl7cmV0dXJuKE89T2JqZWN0LmFzc2lnbnx8ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG49MSxpPWFyZ3VtZW50cy5sZW5ndGg7bjxpO24rKylmb3IodmFyIHIgaW4gdD1hcmd1bWVudHNbbl0pT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pO3JldHVybiBlfSkuYXBwbHkodGhpcyxhcmd1bWVudHMpfTtmdW5jdGlvbiBNKGUsdCxuLGkpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKChmdW5jdGlvbihyLHMpe2Z1bmN0aW9uIG8oZSl7dHJ5e3UoaS5uZXh0KGUpKX1jYXRjaChlKXtzKGUpfX1mdW5jdGlvbiBhKGUpe3RyeXt1KGkudGhyb3coZSkpfWNhdGNoKGUpe3MoZSl9fWZ1bmN0aW9uIHUoZSl7dmFyIHQ7ZS5kb25lP3IoZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKChmdW5jdGlvbihlKXtlKHQpfSkpKS50aGVuKG8sYSl9dSgoaT1pLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSkpfWZ1bmN0aW9uIHcoZSx0KXt2YXIgbixpLHIscyxvPXtsYWJlbDowLHNlbnQ6ZnVuY3Rpb24oKXtpZigxJnJbMF0pdGhyb3cgclsxXTtyZXR1cm4gclsxXX0sdHJ5czpbXSxvcHM6W119O3JldHVybiBzPXtuZXh0OmEoMCksdGhyb3c6YSgxKSxyZXR1cm46YSgyKX0sXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiYoc1tTeW1ib2wuaXRlcmF0b3JdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KSxzO2Z1bmN0aW9uIGEocyl7cmV0dXJuIGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihzKXtpZihuKXRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO2Zvcig7bzspdHJ5e2lmKG49MSxpJiYocj0yJnNbMF0/aS5yZXR1cm46c1swXT9pLnRocm93fHwoKHI9aS5yZXR1cm4pJiZyLmNhbGwoaSksMCk6aS5uZXh0KSYmIShyPXIuY2FsbChpLHNbMV0pKS5kb25lKXJldHVybiByO3N3aXRjaChpPTAsciYmKHM9WzImc1swXSxyLnZhbHVlXSksc1swXSl7Y2FzZSAwOmNhc2UgMTpyPXM7YnJlYWs7Y2FzZSA0OnJldHVybiBvLmxhYmVsKysse3ZhbHVlOnNbMV0sZG9uZTohMX07Y2FzZSA1Om8ubGFiZWwrKyxpPXNbMV0scz1bMF07Y29udGludWU7Y2FzZSA3OnM9by5vcHMucG9wKCksby50cnlzLnBvcCgpO2NvbnRpbnVlO2RlZmF1bHQ6aWYoIShyPW8udHJ5cywocj1yLmxlbmd0aD4wJiZyW3IubGVuZ3RoLTFdKXx8NiE9PXNbMF0mJjIhPT1zWzBdKSl7bz0wO2NvbnRpbnVlfWlmKDM9PT1zWzBdJiYoIXJ8fHNbMV0+clswXSYmc1sxXTxyWzNdKSl7by5sYWJlbD1zWzFdO2JyZWFrfWlmKDY9PT1zWzBdJiZvLmxhYmVsPHJbMV0pe28ubGFiZWw9clsxXSxyPXM7YnJlYWt9aWYociYmby5sYWJlbDxyWzJdKXtvLmxhYmVsPXJbMl0sby5vcHMucHVzaChzKTticmVha31yWzJdJiZvLm9wcy5wb3AoKSxvLnRyeXMucG9wKCk7Y29udGludWV9cz10LmNhbGwoZSxvKX1jYXRjaChlKXtzPVs2LGVdLGk9MH1maW5hbGx5e249cj0wfWlmKDUmc1swXSl0aHJvdyBzWzFdO3JldHVybnt2YWx1ZTpzWzBdP3NbMV06dm9pZCAwLGRvbmU6ITB9fShbcyxhXSl9fX1mdW5jdGlvbiBBKGUsdCl7Zm9yKHZhciBuPTAsaT10Lmxlbmd0aCxyPWUubGVuZ3RoO248aTtuKysscisrKWVbcl09dFtuXTtyZXR1cm4gZX12YXIgVSxiLEw9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0KXtyZXR1cm4gZS5jYWxsKHRoaXMsXCJUT0RPID0+IFwiK3QpfHx0aGlzfXJldHVybiBOKHQsZSksdH0oRXJyb3IpLFA9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBMKGUpfSxEPWZ1bmN0aW9uKGUsdCxuKXtpZih2b2lkIDA9PT10fHx2b2lkIDA9PT1uKXJldHVybiBlLnRvVXBwZXJDYXNlKCk7dmFyIGk9ZS5zbGljZSh0LG4pO3JldHVybiBlPWUucmVwbGFjZShpLChmdW5jdGlvbihlKXtyZXR1cm4gZS50b1VwcGVyQ2FzZSgpfSkpfSxWPWZ1bmN0aW9uKGUsdCl7dm9pZCAwPT09dCYmKHQ9XCJ1dGYtOFwiKTt2YXIgbixpPTA7aWYoXCJ1dGYtMTZcIj09PXQpZm9yKHZhciByPTAscz1lLmxlbmd0aDtyPHM7cisrKWkrPShuPWUuY2hhckNvZGVBdChyKSk8PTY1NTM1PzI6NDtlbHNlIGZvcihyPTAscz1lLmxlbmd0aDtyPHM7cisrKWkrPShuPWUuY2hhckNvZGVBdChyKSk8MTI3PzE6bjw9MjA0Nz8yOm48PTY1NTM1PzM6NDtyZXR1cm4gaX0saz1mdW5jdGlvbihlLHQpe2lmKGU9ZS5yZXBsYWNlKC9cXD8kLyxcIlwiKSwhdClyZXR1cm4gZTt2YXIgbj1PYmplY3Qua2V5cyh0KS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlK1wiPVwiK3RbZV19KSkuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4hIWV9KSk7cmV0dXJuIG4ubGVuZ3RoP1tlLG4uam9pbihcIiZcIildLmpvaW4oXCI/XCIpOmV9LHg9ZnVuY3Rpb24oZSl7cmV0dXJuIGUubWF0Y2goL1xcZCsoXFwuXFxkKyl7Mn0vKVswXX07IWZ1bmN0aW9uKGUpe2VbZS5MT0c9MF09XCJMT0dcIixlW2UuREVCVUc9MF09XCJERUJVR1wiLGVbZS5JTkZPPTFdPVwiSU5GT1wiLGVbZS5XQVJOPTJdPVwiV0FSTlwiLGVbZS5FUlJPUj0zXT1cIkVSUk9SXCIsZVtlLkZBVEFMPTRdPVwiRkFUQUxcIixlW2UuTk9ORT0xZTNdPVwiTk9ORVwifShVfHwoVT17fSkpLGZ1bmN0aW9uKGUpe2UuSU09XCJJTVwiLGUuUlRDPVwiUlRDXCJ9KGJ8fChiPXt9KSk7dmFyIEI9XCJSQ19Mb2dzXCI7ZnVuY3Rpb24gRyhlKXt2YXIgdD1lLnRhcmdldC5yZXN1bHQ7MT09PWUub2xkVmVyc2lvbiYmdC5kZWxldGVPYmplY3RTdG9yZShCKSxmdW5jdGlvbihlLHQsbil7dmFyIGk7aWYoIWUub2JqZWN0U3RvcmVOYW1lcy5jb250YWlucyh0KSl7dmFyIHI9Tyh7fSxuLm9iamVjdFN0b3JlUGFyYW1zKTtpPWUuY3JlYXRlT2JqZWN0U3RvcmUodCxyKSxuLmluZGV4cyYmbi5pbmRleHMubGVuZ3RoPjAmJm4uaW5kZXhzLmZvckVhY2goKGZ1bmN0aW9uKGUpe2kuY3JlYXRlSW5kZXgoZS5pbmRleE5hbWUsZS5rZXkse3VuaXF1ZTplLnVuaXF1ZX0pfSkpfX0odCxCLHtpbmRleHM6W3tpbmRleE5hbWU6XCJ0aW1lXCIsa2V5OlwidGltZVwiLHVuaXF1ZTohMX1dLG9iamVjdFN0b3JlUGFyYW1zOnthdXRvSW5jcmVtZW50OiEwfX0pfXZhciBGLHE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBlLmluaXQ9ZnVuY3Rpb24oKXtpZihcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiZ3aW5kb3cmJndpbmRvdy5pbmRleGVkREIpe3ZhciB0PXdpbmRvdy5pbmRleGVkREIub3BlbihcIlJDX0VOR0lORV9EQlwiLDIpO3Qub25lcnJvcj1mdW5jdGlvbihlKXtjb25zb2xlLndhcm4oXCJvcGVuIGluZGV4REIgcmVxdWVzdCBmYWlsZWQgXCIrZS50YXJnZXQuZXJyb3IpfSx0Lm9uc3VjY2Vzcz1mdW5jdGlvbih0KXtlLl9kYj10LnRhcmdldC5yZXN1bHQsZS5fZGImJihlLl9kYi5vbmNsb3NlPWZ1bmN0aW9uKHQpe3ZhciBuO2NvbnNvbGUud2FybihcIlRoZSBkYXRhYmFzZSBcIisobnVsbD09PShuPWUuX2RiKXx8dm9pZCAwPT09bj92b2lkIDA6bi5uYW1lKStcIiBoYXMgdW5leHBlY3RlZGx5IGNsb3NlZC5cIix0KSxlLl9kYj1udWxsLHdpbmRvdy5fX1JDSW5kZXhEQkluc3RhbmNlPW51bGx9LGUuX2RiLm9uZXJyb3I9ZnVuY3Rpb24odCl7dmFyIG47Y29uc29sZS53YXJuKFwiVGhlIGRhdGFiYXNlIFwiKyhudWxsPT09KG49ZS5fZGIpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLm5hbWUpK1wiIGhhcyBvcGVuaW5nIGVycm9yLlwiLHQpLGUuX2RiPW51bGwsd2luZG93Ll9fUkNJbmRleERCSW5zdGFuY2U9bnVsbH0sZS5fZGIub25hYm9ydD1mdW5jdGlvbih0KXt2YXIgbjtjb25zb2xlLndhcm4oXCJUaGUgZGF0YWJhc2UgXCIrKG51bGw9PT0obj1lLl9kYil8fHZvaWQgMD09PW4/dm9pZCAwOm4ubmFtZSkrXCIgaGFzIG9wZW5pbmcgYWJvcnRlZC5cIix0KSxlLl9kYj1udWxsLHdpbmRvdy5fX1JDSW5kZXhEQkluc3RhbmNlPW51bGx9KSx3aW5kb3cuX19SQ0luZGV4REJJbnN0YW5jZT1uZXcgZX0sdC5vbnVwZ3JhZGVuZWVkZWQ9ZnVuY3Rpb24odCl7ZS5fZGI9dC50YXJnZXQucmVzdWx0LEcodCl9fWVsc2UgY29uc29sZS5kZWJ1ZyhcIkluZGV4REIgaXMgbm90IGN1cnJlbnRseSBzdXBwb3J0ZWQgaW4gdGhlIGVudmlyb25tZW50IVwiKX0sZS5nZXRJbnN0YW5jZT1mdW5jdGlvbigpe3JldHVybiB3aW5kb3cmJndpbmRvdy5fX1JDSW5kZXhEQkluc3RhbmNlP3dpbmRvdy5fX1JDSW5kZXhEQkluc3RhbmNlOm51bGx9LGUucHJvdG90eXBlLmFkZExpc3Q9ZnVuY3Rpb24odCxuKXtyZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKGkpe2lmKGUuX2RiKXt2YXIgcj1lLl9kYi50cmFuc2FjdGlvbihbdF0sXCJyZWFkd3JpdGVcIikscz1yLm9iamVjdFN0b3JlKHQpO24uZm9yRWFjaCgoZnVuY3Rpb24oZSl7bnVsbD09c3x8cy5hZGQoZSl9KSksci5vbmNvbXBsZXRlPWZ1bmN0aW9uKGUpe2koITApfSxyLm9uZXJyb3I9ZnVuY3Rpb24oZSl7aSghMSl9fWVsc2UgaSghMSl9KSl9LGUucHJvdG90eXBlLmdldFJhbmdlRGF0YT1mdW5jdGlvbih0LG4saSxyKXtyZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKHMpe2lmKGUuX2RiKXt2YXIgbz1lLl9kYi50cmFuc2FjdGlvbihbdF0sXCJyZWFkd3JpdGVcIikub2JqZWN0U3RvcmUodCksYT1JREJLZXlSYW5nZS5ib3VuZChpLHIpLHU9by5pbmRleChuKSxjPVtdLGg9dS5vcGVuQ3Vyc29yKGEpO2gub25zdWNjZXNzPWZ1bmN0aW9uKGUpe3ZhciB0PWUudGFyZ2V0LnJlc3VsdDt0PyhjLnB1c2godC52YWx1ZSksdC5jb250aW51ZSgpKTpzKGMpfSxoLm9uZXJyb3I9ZnVuY3Rpb24oZSl7Y29uc29sZS5lcnJvcihlKSxzKFtdKX19ZWxzZSBzKFtdKX0pKX0sZS5wcm90b3R5cGUuZ2V0Q291bnQ9ZnVuY3Rpb24odCxuKXtyZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKG4pe2lmKGUuX2RiKXt2YXIgaT1lLl9kYi50cmFuc2FjdGlvbihbdF0sXCJyZWFkb25seVwiKS5vYmplY3RTdG9yZSh0KS5jb3VudCgpO2kub25zdWNjZXNzPWZ1bmN0aW9uKCl7bihpLnJlc3VsdCl9LGkub25lcnJvcj1mdW5jdGlvbihlKXtjb25zb2xlLmVycm9yKGUpLG4oMCl9fWVsc2UgbigwKX0pKX0sZS5wcm90b3R5cGUucmVtb3ZlRmlyc3REYXRhPWZ1bmN0aW9uKHQsbixpKXtyZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKG4pe2lmKGUuX2RiKXt2YXIgcj1lLl9kYi50cmFuc2FjdGlvbihbdF0sXCJyZWFkd3JpdGVcIikub2JqZWN0U3RvcmUodCkscz1yLmdldEFsbEtleXMoSURCS2V5UmFuZ2UubG93ZXJCb3VuZCgwKSxpKTtzLm9uc3VjY2Vzcz1mdW5jdGlvbigpe3ZhciBlPXMucmVzdWx0O2UubGVuZ3RoPjAmJihyLmRlbGV0ZShJREJLZXlSYW5nZS5ib3VuZChlWzBdLGVbZS5sZW5ndGgtMV0pKS5vbnN1Y2Nlc3M9ZnVuY3Rpb24oKXtuKCEwKX0pfX1lbHNlIG4oITEpfSkpfSxlLl9kYj1udWxsLGV9KCksSz1mdW5jdGlvbigpe3JldHVyblwieHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4XCIucmVwbGFjZSgvW3h5XS9nLChmdW5jdGlvbihlKXt2YXIgdD0xNipNYXRoLnJhbmRvbSgpfDA7cmV0dXJuKFwieFwiPT09ZT90OjMmdHw4KS50b1N0cmluZygxNil9KSl9LEg9ZnVuY3Rpb24oKXt2YXIgZT1LKCk7aWYoZT1lLnJlcGxhY2UoLy0vZyxcIlwiKStcImFcIiwoZT1mdW5jdGlvbihlKXt2YXIgdD1cIjAxMjM0NTY3ODlhYmNkZWZnaGlna2xtbm9wcXJzdHV2d3h5ekFCQ0RFRkdISUdLTE1OT1BRUlNUVVZXWFlaYTBcIi5zcGxpdChcIlwiKSxuPXQubGVuZ3RoKzEsaT0rZSxyPVtdO2Rve3ZhciBzPWklbjtpPShpLXMpL24sci51bnNoaWZ0KHRbc10pfXdoaWxlKGkpO3JldHVybiByLmpvaW4oXCJcIil9KGU9cGFyc2VJbnQoZSwxNikpKS5sZW5ndGg+MjImJihlPWUuc2xpY2UoMCwyMikpLGUubGVuZ3RoPDIyKWZvcih2YXIgdD0yMi1lLmxlbmd0aCxuPTA7bjx0O24rKyllKz1cIjBcIjtyZXR1cm4gZX07IWZ1bmN0aW9uKGUpe2VbZS5OT05FPTBdPVwiTk9ORVwiLGVbZS5QUklWQVRFPTFdPVwiUFJJVkFURVwiLGVbZS5ESVNDVVNTSU9OPTJdPVwiRElTQ1VTU0lPTlwiLGVbZS5HUk9VUD0zXT1cIkdST1VQXCIsZVtlLkNIQVRST09NPTRdPVwiQ0hBVFJPT01cIixlW2UuQ1VTVE9NRVJfU0VSVklDRT01XT1cIkNVU1RPTUVSX1NFUlZJQ0VcIixlW2UuU1lTVEVNPTZdPVwiU1lTVEVNXCIsZVtlLkFQUF9QVUJMSUNfU0VSVklDRT03XT1cIkFQUF9QVUJMSUNfU0VSVklDRVwiLGVbZS5QVUJMSUNfU0VSVklDRT04XT1cIlBVQkxJQ19TRVJWSUNFXCIsZVtlLlVMVFJBX0dST1VQPTEwXT1cIlVMVFJBX0dST1VQXCIsZVtlLlJUQ19ST09NPTEyXT1cIlJUQ19ST09NXCJ9KEZ8fChGPXt9KSk7dmFyIFksaj1GOyFmdW5jdGlvbihlKXtlW2UuSU1BR0U9MV09XCJJTUFHRVwiLGVbZS5BVURJTz0yXT1cIkFVRElPXCIsZVtlLlZJREVPPTNdPVwiVklERU9cIixlW2UuRklMRT00XT1cIkZJTEVcIixlW2UuU0lHSFQ9NV09XCJTSUdIVFwiLGVbZS5DT01CSU5FX0hUTUw9Nl09XCJDT01CSU5FX0hUTUxcIn0oWXx8KFk9e30pKTt2YXIgUSxXPVksSj1mdW5jdGlvbihlKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgZX0sej1mdW5jdGlvbihlKXtyZXR1cm5cImJvb2xlYW5cIj09dHlwZW9mIGV9LFo9ZnVuY3Rpb24oZSl7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIGUmJiFpc05hTihlKX0sWD1mdW5jdGlvbihlKXtyZXR1cm4tMSE9PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKS5pbmRleE9mKFwiQXJyYXlcIil9LCQ9ZnVuY3Rpb24oZSl7cmV0dXJuXCJbb2JqZWN0IEFycmF5QnVmZmVyXVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpfSxlZT1mdW5jdGlvbihlKXtyZXR1cm4gSihlKSYmZS5sZW5ndGg+MH0sdGU9ZnVuY3Rpb24oZSl7cmV0dXJuIFgoZSkmJmUubGVuZ3RoPjB9LG5lPWZ1bmN0aW9uKGUpe3JldHVyblwiW29iamVjdCBPYmplY3RdXCI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSl9LGllPWZ1bmN0aW9uKGUpe3JldHVyblwiW29iamVjdCBGdW5jdGlvbl1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKX0scmU9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMD09PWV8fFwiW29iamVjdCBVbmRlZmluZWRdXCI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSl9LHNlPWZ1bmN0aW9uKGUpe3JldHVyblwiW29iamVjdCBOdWxsXVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpfSxvZT1mdW5jdGlvbihlKXtyZXR1cm4gSihlKSYmL2h0dHBzPzpcXC9cXC8vLnRlc3QoZSl9LGFlPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCBpbiBlKXJldHVybiEwO3JldHVybiExfSx1ZT1mdW5jdGlvbihlKXtyZXR1cm4gWihlKSYmT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGosZSl9LGNlPWZ1bmN0aW9uKGUpe3JldHVybiBaKGUpJiZPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoVyxlKX0saGU9ZnVuY3Rpb24oZSl7dmFyIHQ9ITE7aWYobmUoZSkpZm9yKHZhciBuIGluIGUpaWYodD1KKG4pJiYhL15bQS1aYS16MC05Xz0rLV0rJC8udGVzdChuKSlicmVhaztyZXR1cm4gdH0sbGU9e307Y29uc29sZSYmKChRPXt9KVtVLkRFQlVHXT1jb25zb2xlLmRlYnVnLmJpbmQoY29uc29sZSksUVtVLklORk9dPWNvbnNvbGUuaW5mby5iaW5kKGNvbnNvbGUpLFFbVS5XQVJOXT1jb25zb2xlLndhcm4uYmluZChjb25zb2xlKSxRW1UuRVJST1JdPWNvbnNvbGUuZXJyb3IuYmluZChjb25zb2xlKSxRW1UuRkFUQUxdPWNvbnNvbGUubG9nLmJpbmQoY29uc29sZSksbGU9USk7dmFyIGRlLGZlPWZ1bmN0aW9uKGUpe3JldHVybiBKKGUpfHxaKGUpfHxyZShlKXx8eihlKT9lOmUgaW5zdGFuY2VvZiBFcnJvcj9KU09OLnN0cmluZ2lmeSh7bmFtZTplLm5hbWUsbWVzc2FnZTplLm1lc3NhZ2Usc3RhY2s6ZS5zdGFja30pOkpTT04uc3RyaW5naWZ5KGUpfSxwZT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LG4pe3RoaXMudGFnPWUsdGhpcy50eXBlPXQsdGhpcy5pbml0aWF0b3I9bix0aGlzLl9vdXRMZXZlbD1VLldBUk4sdGhpcy5kZWJ1Zz10aGlzLmxvZy5iaW5kKHRoaXMsVS5ERUJVRyksdGhpcy5pbmZvPXRoaXMubG9nLmJpbmQodGhpcyxVLklORk8pLHRoaXMud2Fybj10aGlzLmxvZy5iaW5kKHRoaXMsVS5XQVJOKSx0aGlzLmVycm9yPXRoaXMubG9nLmJpbmQodGhpcyxVLkVSUk9SKSx0aGlzLmZhdGFsPXRoaXMubG9nLmJpbmQodGhpcyxVLkZBVEFMKX1yZXR1cm4gZS5pbml0PWZ1bmN0aW9uKHQpe2UudXNlcklkPXR9LGUucmVzZXQ9ZnVuY3Rpb24oKXtlLnVzZXJJZD1cIlwifSxlLnByb3RvdHlwZS5fZGVmYXVsdFN0ZG91dD1mdW5jdGlvbihlLHQpe2Zvcih2YXIgbj1bXSxpPTI7aTxhcmd1bWVudHMubGVuZ3RoO2krKyluW2ktMl09YXJndW1lbnRzW2ldO2xlW2VdJiZsZVtlXS5hcHBseShsZSxBKFt0K1wiOlwiXSxuKSl9LGUucHJvdG90eXBlLl9fcHVzaExvY2FsTG9nPWZ1bmN0aW9uKHQsbixpKXt2YXIgcjtyPXRoaXMudHlwZT90aGlzLnR5cGU6W1wiUkNSVENMb2dcIixcIlJDQ2FsbFwiLFwiUkNSVENcIixcIlJUQy1BXCJdLmluY2x1ZGVzKHRoaXMudGFnKT9iLlJUQzpiLklNO3ZhciBzPURhdGUubm93KCk7VihuKT49MWUzJiYobj1mdW5jdGlvbihlLHQsbil7aWYodm9pZCAwPT09biYmKG49XCJ1dGYtOFwiKSwhZXx8IXQpcmV0dXJuXCJcIjt2YXIgaT1cInV0Zi04XCI9PT1uPzM6MixyPTAscz0wLG89XCJcIjtmb3Iocz0wO3M8ZS5sZW5ndGg7cysrKXtpZihlLmNoYXJDb2RlQXQocyk+MjU1P3IrPWk6cisrLHI+dClyZXR1cm4gbztvKz1lLmNoYXJBdChzKX1yZXR1cm4gZX0obiwxZTMpKTt2YXIgbz1KU09OLnN0cmluZ2lmeSh7bWVzc2FnZTpuLHVzZXJJZDplLnVzZXJJZH0pLnJlcGxhY2UoL1wiL2csJ1wiXCInKSxhPS9eW1xcd10rLVtcXHddKy1bXFx3XSs/Ly50ZXN0KGkpP2k6KHRoaXMuaW5pdGlhdG9yfHxcIkxcIikrXCItXCIraStcIi1PXCIsdT17c2Vzc2lvbklkOmUuc2Vzc2lvbklkLHRpbWU6cyxsZXZlbDo0LXQsY29udGVudDplLnNlc3Npb25JZCtcIixcIitEYXRlLm5vdygpK1wiLFwiK3IrXCIsXCIrKDQtdCkrXCIsXCIrYSsnLFwiJytvKydcIlxcbicsdXNlcklkOmUudXNlcklkfTtlLmRhdGFiYXNlTG9nTGlzdC5wdXNoKHUpLChlLmRhdGFiYXNlTG9nTGlzdC5sZW5ndGg+PTEwMHx8dD09PVUuRkFUQUwpJiZ0aGlzLl9faW5zZXJ0TG9nSW50b0RhdGFiYXNlKCl9LGUucHJvdG90eXBlLl9faW5zZXJ0TG9nSW50b0RhdGFiYXNlPWZ1bmN0aW9uKCl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciB0LG4saTtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihyKXtzd2l0Y2goci5sYWJlbCl7Y2FzZSAwOnJldHVybiB0PUEoW10sZS5kYXRhYmFzZUxvZ0xpc3QpLGUuZGF0YWJhc2VMb2dMaXN0PVtdLChuPXEuZ2V0SW5zdGFuY2UoKSk/WzQsbi5hZGRMaXN0KEIsdCldOlszLDNdO2Nhc2UgMTpyZXR1cm4gaT1yLnNlbnQoKSxbNCxuLmdldENvdW50KEIsXCJ0aW1lXCIpXTtjYXNlIDI6cmV0dXJuIHIuc2VudCgpPjFlNSYmbi5yZW1vdmVGaXJzdERhdGEoQixcInRpbWVcIiwyZTMpLFsyLGldO2Nhc2UgMzpyZXR1cm5bMiwhMV19fSkpfSkpfSxlLnByb3RvdHlwZS5zZXRMb2dMZXZlbD1mdW5jdGlvbihlKXt0aGlzLl9vdXRMZXZlbD1cIm51bWJlclwiIT10eXBlb2YgZT9VLldBUk46ZX0sZS5wcm90b3R5cGUuc2V0TG9nU3Rkb3V0PWZ1bmN0aW9uKGUpe3RoaXMuX2xvZ1N0ZG91dD1lfSxlLnByb3RvdHlwZS5sb2c9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLG49MTtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKXRbbi0xXT1hcmd1bWVudHNbbl07aWYoZT5VLkRFQlVHJiZ0aGlzLl9fcHVzaExvY2FsTG9nKGUsdC5tYXAoZmUpLmpvaW4oXCIgXCIpLHRoaXMudGFnKSwhKGU8dGhpcy5fb3V0TGV2ZWwpKXt2YXIgaT0obmV3IERhdGUpLnRvSVNPU3RyaW5nKCkrXCJbXCIrdGhpcy50YWcrXCJdW1wiK1VbZV0rXCJdXCIscj1pK1wiIC0gXCIrdC5tYXAoZmUpLmpvaW4oXCIgXCIpO3RoaXMuX2xvZ1N0ZG91dD90aGlzLl9sb2dTdGRvdXQoZSxyKTp0aGlzLl9zdGRvdXQ/dGhpcy5fc3Rkb3V0KGUscik6dGhpcy5fZGVmYXVsdFN0ZG91dC5hcHBseSh0aGlzLEEoW2UsaV0sdCkpfX0sZS5wcm90b3R5cGUucmVwb3J0TG9nPWZ1bmN0aW9uKHQsbixpKXt0aGlzLl9fcHVzaExvY2FsTG9nKDQtdCxpLG4pO3ZhciByPUpTT04uc3RyaW5naWZ5KHttZXNzYWdlOml9KS5yZXBsYWNlKC9cIi9nLCdcIlwiJyk7cj0nXCInK3IrJ1wiJzt2YXIgcz17bGV2ZWw6dCxjb250ZW50OltlLnNlc3Npb25JZCxEYXRlLm5vdygpLHRoaXMudHlwZSx0LG4scl0uam9pbigpK1wiXFxuXCJ9O2UucmVhbFRpbWVMb2dMaXN0LnB1c2gocyksZS5yZWFsVGltZUxvZ0xpc3QubGVuZ3RoPj02MDAmJihlLnJlYWxUaW1lTG9nTGlzdD1lLnJlYWxUaW1lTG9nTGlzdC5zbGljZSgtNTAwKSl9LGUucHJvdG90eXBlLnNldD1mdW5jdGlvbihlLHQpe3RoaXMud2FybihcImxvZ2dlci5zZXQgaGFzIGJlaW5nIGRlcHJlY2F0ZWQhXCIpfSxlLnByb3RvdHlwZS5zZXRTdGRvdXQ9ZnVuY3Rpb24oZSl7dGhpcy5fc3Rkb3V0PWV9LGUucHJvdG90eXBlLl9fY2xlYXJSZWFsVGltZUxvZz1mdW5jdGlvbigpe2UucmVhbFRpbWVMb2dMaXN0PVtdfSxlLmRhdGFiYXNlTG9nTGlzdD1bXSxlLnJlYWxUaW1lTG9nTGlzdD1bXSxlLnNlc3Npb25JZD1IKCksZS51c2VySWQ9XCJcIixlfSgpLGdlPW5ldyBwZShcIlJDTG9nXCIpLF9lPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuX21hcD17fX1yZXR1cm4gZS5wcm90b3R5cGUub249ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXMuX21hcFtlXXx8KHRoaXMuX21hcFtlXT1bXSk7aS5zb21lKChmdW5jdGlvbihlKXtyZXR1cm4gZS5saXN0ZW5lcj09PXQmJmUudGFyZ2V0PT09bn0pKXx8aS5wdXNoKHtsaXN0ZW5lcjp0LHRhcmdldDpufSl9LGUucHJvdG90eXBlLm9uY2U9ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXMuX21hcFtlXXx8KHRoaXMuX21hcFtlXT1bXSk7aS5zb21lKChmdW5jdGlvbihlKXtyZXR1cm4gZS5saXN0ZW5lcj09PXQmJmUudGFyZ2V0PT09bn0pKXx8aS5wdXNoKHtsaXN0ZW5lcjp0LHRhcmdldDpuLG9uY2U6ITB9KX0sZS5wcm90b3R5cGUub2ZmPWZ1bmN0aW9uKGUsdCxuKXt2YXIgaT10aGlzLl9tYXBbZV07aSYmKChpPWkuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4gZS5saXN0ZW5lciE9PXR8fGUudGFyZ2V0IT09bn0pKSkubGVuZ3RoP3RoaXMuX21hcFtlXT1pOmRlbGV0ZSB0aGlzLl9tYXBbZV0pfSxlLnByb3RvdHlwZS5lbWl0PWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxuPTE7bjxhcmd1bWVudHMubGVuZ3RoO24rKyl0W24tMV09YXJndW1lbnRzW25dO3ZhciBpPXRoaXMuX21hcFtlXTtpZihpKWZvcih2YXIgcj1pLmxlbmd0aC0xO3I+PTA7ci09MSl7dmFyIHM9aVtyXSxvPXMudGFyZ2V0LGE9cy5vbmNlLHU9cy5saXN0ZW5lcjthJiZpLnNwbGljZShyLDEpO3RyeXt1LmNhbGwuYXBwbHkodSxBKFtvXSx0KSl9Y2F0Y2goZSl7Z2UuZXJyb3IoZSl9fX0sZS5wcm90b3R5cGUucmVtb3ZlQWxsPWZ1bmN0aW9uKGUpe2RlbGV0ZSB0aGlzLl9tYXBbZV19LGUucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7T2JqZWN0LmtleXModGhpcy5fbWFwKS5mb3JFYWNoKHRoaXMucmVtb3ZlQWxsLHRoaXMpfSxlfSgpOyFmdW5jdGlvbihlKXtlW2UuU0VORD0xXT1cIlNFTkRcIixlW2UuUkVDRUlWRT0yXT1cIlJFQ0VJVkVcIn0oZGV8fChkZT17fSkpO3ZhciB5ZSxtZT1kZTshZnVuY3Rpb24oZSl7ZVtlLlRJTUVPVVQ9LTFdPVwiVElNRU9VVFwiLGVbZS5VTktOT1dOPS0yXT1cIlVOS05PV05cIixlW2UuUEFSQU1FVEVSX0VSUk9SPS0zXT1cIlBBUkFNRVRFUl9FUlJPUlwiLGVbZS5FWFRSQV9NRVRIT0RfVU5ERUZJTkVEPS00XT1cIkVYVFJBX01FVEhPRF9VTkRFRklORURcIixlW2UuTUFJTl9QUk9DRVNTX0VSUk9SPS01XT1cIk1BSU5fUFJPQ0VTU19FUlJPUlwiLGVbZS5QQVJBTUVURVJfQ0hBTkdFRD0tNl09XCJQQVJBTUVURVJfQ0hBTkdFRFwiLGVbZS5TVUNDRVNTPTBdPVwiU1VDQ0VTU1wiLGVbZS5SQ19NU0dfVU5BVVRIT1JJWkVEPTIwNDA2XT1cIlJDX01TR19VTkFVVEhPUklaRURcIixlW2UuUkNfRElTQ1VTU0lPTl9HUk9VUF9JRF9JTlZBTElEPTIwNDA3XT1cIlJDX0RJU0NVU1NJT05fR1JPVVBfSURfSU5WQUxJRFwiLGVbZS5TRU5EX0ZSRVFVRU5DWV9UT09fRkFTVD0yMDYwNF09XCJTRU5EX0ZSRVFVRU5DWV9UT09fRkFTVFwiLGVbZS5OT1RfSU5fRElTQ1VTU0lPTj0yMTQwNl09XCJOT1RfSU5fRElTQ1VTU0lPTlwiLGVbZS5GT1JCSURERU5fSU5fR1JPVVA9MjI0MDhdPVwiRk9SQklEREVOX0lOX0dST1VQXCIsZVtlLlJFQ0FMTF9NRVNTQUdFPTI1MTAxXT1cIlJFQ0FMTF9NRVNTQUdFXCIsZVtlLk5PVF9JTl9HUk9VUD0yMjQwNl09XCJOT1RfSU5fR1JPVVBcIixlW2UuTk9UX0lOX0NIQVRST09NPTIzNDA2XT1cIk5PVF9JTl9DSEFUUk9PTVwiLGVbZS5GT1JCSURERU5fSU5fQ0hBVFJPT009MjM0MDhdPVwiRk9SQklEREVOX0lOX0NIQVRST09NXCIsZVtlLlJDX0NIQVRST09NX1VTRVJfS0lDS0VEPTIzNDA5XT1cIlJDX0NIQVRST09NX1VTRVJfS0lDS0VEXCIsZVtlLlJDX0NIQVRST09NX05PVF9FWElTVD0yMzQxMF09XCJSQ19DSEFUUk9PTV9OT1RfRVhJU1RcIixlW2UuUkNfQ0hBVFJPT01fSVNfRlVMTD0yMzQxMV09XCJSQ19DSEFUUk9PTV9JU19GVUxMXCIsZVtlLlJDX0NIQVRST09NX1BBVEFNRVRFUl9JTlZBTElEPTIzNDEyXT1cIlJDX0NIQVRST09NX1BBVEFNRVRFUl9JTlZBTElEXCIsZVtlLkNIQVRST09NX0dFVF9ISVNUT1JZTVNHX0VSUk9SPTIzNDEzXT1cIkNIQVRST09NX0dFVF9ISVNUT1JZTVNHX0VSUk9SXCIsZVtlLkNIQVRST09NX05PVF9PUEVOX0hJU1RPUllNU0dfU1RPUkU9MjM0MTRdPVwiQ0hBVFJPT01fTk9UX09QRU5fSElTVE9SWU1TR19TVE9SRVwiLGVbZS5DSEFUUk9PTV9LVl9FWENFRUQ9MjM0MjNdPVwiQ0hBVFJPT01fS1ZfRVhDRUVEXCIsZVtlLkNIQVRST09NX0tWX09WRVJXUklURV9JTlZBTElEPTIzNDI0XT1cIkNIQVRST09NX0tWX09WRVJXUklURV9JTlZBTElEXCIsZVtlLkNIQVRST09NX0tWX1NUT1JFX05PVF9PUEVOPTIzNDI2XT1cIkNIQVRST09NX0tWX1NUT1JFX05PVF9PUEVOXCIsZVtlLkNIQVRST09NX0tFWV9OT1RfRVhJU1Q9MjM0MjddPVwiQ0hBVFJPT01fS0VZX05PVF9FWElTVFwiLFxuLyohXG4gICAgIOiBiuWkqeWupOiuvue9riBLViDlpLHotKXvvIzlh7rnjrDlnKjkuKTkurrmiJbogIXlpJrnq6/lkIzml7bmk43kvZzkuIDkuKoga3bjgIJcbiAgICAg5aaC5p6c5Ye6546w6K+l6ZSZ6K+v77yM5Li66YG/5YWN5ZKM5YW25LuW56uv5ZCM5pe25pON5L2c77yM6K+35bu25pe25LiA5a6a5pe26Ze05YaN6K+VXG4gICAgKi9cbmVbZS5DSEFUUk9PTV9LVl9TRVRfRVJST1I9MjM0MzFdPVwiQ0hBVFJPT01fS1ZfU0VUX0VSUk9SXCIsZVtlLlNFTlNJVElWRV9TSElFTEQ9MjE1MDFdPVwiU0VOU0lUSVZFX1NISUVMRFwiLGVbZS5TRU5TSVRJVkVfUkVQTEFDRT0yMTUwMl09XCJTRU5TSVRJVkVfUkVQTEFDRVwiLGVbZS5KT0lOX0lOX0RJU0NVU1NJT049MjE0MDddPVwiSk9JTl9JTl9ESVNDVVNTSU9OXCIsZVtlLkNSRUFURV9ESVNDVVNTSU9OPTIxNDA4XT1cIkNSRUFURV9ESVNDVVNTSU9OXCIsZVtlLklOVklURV9ESUNVU1NJT049MjE0MDldPVwiSU5WSVRFX0RJQ1VTU0lPTlwiLGVbZS5HRVRfVVNFUklORk9fRVJST1I9MjM0MDddPVwiR0VUX1VTRVJJTkZPX0VSUk9SXCIsZVtlLlJFSkVDVEVEX0JZX0JMQUNLTElTVD00MDVdPVwiUkVKRUNURURfQllfQkxBQ0tMSVNUXCIsZVtlLlJDX05FVF9DSEFOTkVMX0lOVkFMSUQ9MzAwMDFdPVwiUkNfTkVUX0NIQU5ORUxfSU5WQUxJRFwiLGVbZS5SQ19ORVRfVU5BVkFJTEFCTEU9MzAwMDJdPVwiUkNfTkVUX1VOQVZBSUxBQkxFXCIsZVtlLlJDX01TR19SRVNQX1RJTUVPVVQ9MzAwMDNdPVwiUkNfTVNHX1JFU1BfVElNRU9VVFwiLGVbZS5SQ19IVFRQX1NFTkRfRkFJTD0zMDAwNF09XCJSQ19IVFRQX1NFTkRfRkFJTFwiLGVbZS5SQ19IVFRQX1JFUV9USU1FT1VUPTMwMDA1XT1cIlJDX0hUVFBfUkVRX1RJTUVPVVRcIixlW2UuUkNfSFRUUF9SRUNWX0ZBSUw9MzAwMDZdPVwiUkNfSFRUUF9SRUNWX0ZBSUxcIixlW2UuUkNfTkFWSV9SRVNPVVJDRV9FUlJPUj0zMDAwN109XCJSQ19OQVZJX1JFU09VUkNFX0VSUk9SXCIsZVtlLlJDX05PREVfTk9UX0ZPVU5EPTMwMDA4XT1cIlJDX05PREVfTk9UX0ZPVU5EXCIsZVtlLlJDX0RPTUFJTl9OT1RfUkVTT0xWRT0zMDAwOV09XCJSQ19ET01BSU5fTk9UX1JFU09MVkVcIixlW2UuUkNfU09DS0VUX05PVF9DUkVBVEVEPTMwMDEwXT1cIlJDX1NPQ0tFVF9OT1RfQ1JFQVRFRFwiLGVbZS5SQ19TT0NLRVRfRElTQ09OTkVDVEVEPTMwMDExXT1cIlJDX1NPQ0tFVF9ESVNDT05ORUNURURcIixlW2UuUkNfUElOR19TRU5EX0ZBSUw9MzAwMTJdPVwiUkNfUElOR19TRU5EX0ZBSUxcIixlW2UuUkNfUE9OR19SRUNWX0ZBSUw9MzAwMTNdPVwiUkNfUE9OR19SRUNWX0ZBSUxcIixlW2UuUkNfTVNHX1NFTkRfRkFJTD0zMDAxNF09XCJSQ19NU0dfU0VORF9GQUlMXCIsZVtlLlJDX01TR19DT05URU5UX0VYQ0VFRF9MSU1JVD0zMDAxNl09XCJSQ19NU0dfQ09OVEVOVF9FWENFRURfTElNSVRcIixlW2UuUkNfQ09OTl9BQ0tfVElNRU9VVD0zMWUzXT1cIlJDX0NPTk5fQUNLX1RJTUVPVVRcIixlW2UuUkNfQ09OTl9QUk9UT19WRVJTSU9OX0VSUk9SPTMxMDAxXT1cIlJDX0NPTk5fUFJPVE9fVkVSU0lPTl9FUlJPUlwiLGVbZS5SQ19DT05OX0lEX1JFSkVDVD0zMTAwMl09XCJSQ19DT05OX0lEX1JFSkVDVFwiLGVbZS5SQ19DT05OX1NFUlZFUl9VTkFWQUlMQUJMRT0zMTAwM109XCJSQ19DT05OX1NFUlZFUl9VTkFWQUlMQUJMRVwiLGVbZS5SQ19DT05OX1VTRVJfT1JfUEFTU1dEX0VSUk9SPTMxMDA0XT1cIlJDX0NPTk5fVVNFUl9PUl9QQVNTV0RfRVJST1JcIixlW2UuUkNfQ09OTl9OT1RfQVVUSFJPUklaRUQ9MzEwMDVdPVwiUkNfQ09OTl9OT1RfQVVUSFJPUklaRURcIixlW2UuUkNfQ09OTl9SRURJUkVDVEVEPTMxMDA2XT1cIlJDX0NPTk5fUkVESVJFQ1RFRFwiLGVbZS5SQ19DT05OX1BBQ0tBR0VfTkFNRV9JTlZBTElEPTMxMDA3XT1cIlJDX0NPTk5fUEFDS0FHRV9OQU1FX0lOVkFMSURcIixlW2UuUkNfQ09OTl9BUFBfQkxPQ0tFRF9PUl9ERUxFVEVEPTMxMDA4XT1cIlJDX0NPTk5fQVBQX0JMT0NLRURfT1JfREVMRVRFRFwiLGVbZS5SQ19DT05OX1VTRVJfQkxPQ0tFRD0zMTAwOV09XCJSQ19DT05OX1VTRVJfQkxPQ0tFRFwiLGVbZS5SQ19ESVNDT05OX0tJQ0s9MzEwMTBdPVwiUkNfRElTQ09OTl9LSUNLXCIsZVtlLlJDX0RJU0NPTk5fRVhDRVBUSU9OPTMxMDExXT1cIlJDX0RJU0NPTk5fRVhDRVBUSU9OXCIsZVtlLlJDX0FQUF9BVVRIX05PVF9QQVNTPTMxMDI2XT1cIlJDX0FQUF9BVVRIX05PVF9QQVNTXCIsZVtlLlJDX09UUF9VU0VEPTMxMDI3XT1cIlJDX09UUF9VU0VEXCIsZVtlLlJDX1BMQVRGT1JNX0VSUk9SPTMxMDI4XT1cIlJDX1BMQVRGT1JNX0VSUk9SXCIsZVtlLlJDX1FVRVJZX0FDS19OT19EQVRBPTMyMDAxXT1cIlJDX1FVRVJZX0FDS19OT19EQVRBXCIsZVtlLlJDX01TR19EQVRBX0lOQ09NUExFVEU9MzIwMDJdPVwiUkNfTVNHX0RBVEFfSU5DT01QTEVURVwiLGVbZS5CSVpfRVJST1JfQ0xJRU5UX05PVF9JTklUPTMzMDAxXT1cIkJJWl9FUlJPUl9DTElFTlRfTk9UX0lOSVRcIixlW2UuQklaX0VSUk9SX0RBVEFCQVNFX0VSUk9SPTMzMDAyXT1cIkJJWl9FUlJPUl9EQVRBQkFTRV9FUlJPUlwiLGVbZS5CSVpfRVJST1JfSU5WQUxJRF9QQVJBTUVURVI9MzMwMDNdPVwiQklaX0VSUk9SX0lOVkFMSURfUEFSQU1FVEVSXCIsZVtlLkJJWl9FUlJPUl9OT19DSEFOTkVMPTMzMDA0XT1cIkJJWl9FUlJPUl9OT19DSEFOTkVMXCIsZVtlLkJJWl9FUlJPUl9SRUNPTk5FQ1RfU1VDQ0VTUz0zMzAwNV09XCJCSVpfRVJST1JfUkVDT05ORUNUX1NVQ0NFU1NcIixlW2UuQklaX0VSUk9SX0NPTk5FQ1RJTkc9MzMwMDZdPVwiQklaX0VSUk9SX0NPTk5FQ1RJTkdcIixlW2UuTVNHX1JPQU1JTkdfU0VSVklDRV9VTkFWQUlMQUJMRT0zMzAwN109XCJNU0dfUk9BTUlOR19TRVJWSUNFX1VOQVZBSUxBQkxFXCIsZVtlLk1TR19JTlNFUlRfRVJST1I9MzMwMDhdPVwiTVNHX0lOU0VSVF9FUlJPUlwiLGVbZS5NU0dfREVMX0VSUk9SPTMzMDA5XT1cIk1TR19ERUxfRVJST1JcIixlW2UuVEFHX0VYSVNUUz0zMzEwMV09XCJUQUdfRVhJU1RTXCIsZVtlLlRBR19OT1RfRVhJU1Q9MzMxMDBdPVwiVEFHX05PVF9FWElTVFwiLGVbZS5OT19UQUdfSU5fQ09OVkVSPTMzMTAyXT1cIk5PX1RBR19JTl9DT05WRVJcIixlW2UuQ09OVkVSX1JFTU9WRV9FUlJPUj0zNDAwMV09XCJDT05WRVJfUkVNT1ZFX0VSUk9SXCIsZVtlLkNPTlZFUl9HRVRMSVNUX0VSUk9SPTM0MDAyXT1cIkNPTlZFUl9HRVRMSVNUX0VSUk9SXCIsZVtlLkNPTlZFUl9TRVRPUF9FUlJPUj0zNDAwM109XCJDT05WRVJfU0VUT1BfRVJST1JcIixlW2UuQ09OVkVSX1RPVEFMX1VOUkVBRF9FUlJPUj0zNDAwNF09XCJDT05WRVJfVE9UQUxfVU5SRUFEX0VSUk9SXCIsZVtlLkNPTlZFUl9UWVBFX1VOUkVBRF9FUlJPUj0zNDAwNV09XCJDT05WRVJfVFlQRV9VTlJFQURfRVJST1JcIixlW2UuQ09OVkVSX0lEX1RZUEVfVU5SRUFEX0VSUk9SPTM0MDA2XT1cIkNPTlZFUl9JRF9UWVBFX1VOUkVBRF9FUlJPUlwiLGVbZS5DT05WRVJfQ0xFQVJfRVJST1I9MzQwMDddPVwiQ09OVkVSX0NMRUFSX0VSUk9SXCIsZVtlLkVYUEFOU0lPTl9MSU1JVF9FWENFRVQ9MzQwMTBdPVwiRVhQQU5TSU9OX0xJTUlUX0VYQ0VFVFwiLGVbZS5NRVNTQUdFX0tWX05PVF9TVVBQT1JUPTM0MDA4XT1cIk1FU1NBR0VfS1ZfTk9UX1NVUFBPUlRcIixlW2UuQ0xFQVJfSElTX1RJTUVfRVJST1I9MzQwMTFdPVwiQ0xFQVJfSElTX1RJTUVfRVJST1JcIixlW2UuQ09OVkVSX09VVF9MSU1JVF9FUlJPUj0zNDAxM109XCJDT05WRVJfT1VUX0xJTUlUX0VSUk9SXCIsZVtlLkNPTlZFUl9HRVRfRVJST1I9MzUwMjFdPVwiQ09OVkVSX0dFVF9FUlJPUlwiLGVbZS5HUk9VUF9TWU5DX0VSUk9SPTM1MDAxXT1cIkdST1VQX1NZTkNfRVJST1JcIixlW2UuR1JPVVBfTUFUQ0hfRVJST1I9MzUwMDJdPVwiR1JPVVBfTUFUQ0hfRVJST1JcIixlW2UuUkVBRF9SRUNFSVBUX0VSUk9SPTM1MDAzXT1cIlJFQURfUkVDRUlQVF9FUlJPUlwiLGVbZS5QQUNLQUdFX0VOVklST05NRU5UX0VSUk9SPTM1MDA2XT1cIlBBQ0tBR0VfRU5WSVJPTk1FTlRfRVJST1JcIixlW2UuQ0FOX05PVF9SRUNPTk5FQ1Q9MzUwMDddPVwiQ0FOX05PVF9SRUNPTk5FQ1RcIixlW2UuU0VSVkVSX1VOQVZBSUxBQkxFPTM1MDA4XT1cIlNFUlZFUl9VTkFWQUlMQUJMRVwiLGVbZS5IT1NUTkFNRV9FUlJPUj0zNTAwOV09XCJIT1NUTkFNRV9FUlJPUlwiLGVbZS5IQVNfT0hURVJfU0FNRV9DTElFTlRfT05fTElORT0zNTAxMF09XCJIQVNfT0hURVJfU0FNRV9DTElFTlRfT05fTElORVwiLGVbZS5NRVRIT0RfTk9UX0FWQUlMQUJMRT0zNTAxMV09XCJNRVRIT0RfTk9UX0FWQUlMQUJMRVwiLGVbZS5NRVRIT0RfTk9UX1NVUFBPUlQ9MzUwMTJdPVwiTUVUSE9EX05PVF9TVVBQT1JUXCIsZVtlLk1TR19MSU1JVF9FUlJPUj0zNTAxM109XCJNU0dfTElNSVRfRVJST1JcIixlW2UuTUVUSE9EX09OTFlfU1VQUE9SVF9VTFRSQV9HUk9VUD0zNTAxNF09XCJNRVRIT0RfT05MWV9TVVBQT1JUX1VMVFJBX0dST1VQXCIsZVtlLlVQTE9BRF9GSUxFX0ZBSUxFRD0zNTAyMF09XCJVUExPQURfRklMRV9GQUlMRURcIixlW2UuQ0hBVFJPT01fSURfSVNOVUxMPTM2MDAxXT1cIkNIQVRST09NX0lEX0lTTlVMTFwiLGVbZS5DSEFSVE9PTV9KT0lOX0VSUk9SPTM2MDAyXT1cIkNIQVJUT09NX0pPSU5fRVJST1JcIixlW2UuQ0hBVFJPT01fSElTTUVTU0FHRV9FUlJPUj0zNjAwM109XCJDSEFUUk9PTV9ISVNNRVNTQUdFX0VSUk9SXCIsZVtlLkNIQVRST09NX0tWX05PVF9GT1VORD0zNjAwNF09XCJDSEFUUk9PTV9LVl9OT1RfRk9VTkRcIixlW2UuQkxBQ0tfQUREX0VSUk9SPTM3MDAxXT1cIkJMQUNLX0FERF9FUlJPUlwiLGVbZS5CTEFDS19HRVRTVEFUVVNfRVJST1I9MzcwMDJdPVwiQkxBQ0tfR0VUU1RBVFVTX0VSUk9SXCIsZVtlLkJMQUNLX1JFTU9WRV9FUlJPUj0zNzAwM109XCJCTEFDS19SRU1PVkVfRVJST1JcIixlW2UuRFJBRl9HRVRfRVJST1I9MzgwMDFdPVwiRFJBRl9HRVRfRVJST1JcIixlW2UuRFJBRl9TQVZFX0VSUk9SPTM4MDAyXT1cIkRSQUZfU0FWRV9FUlJPUlwiLGVbZS5EUkFGX1JFTU9WRV9FUlJPUj0zODAwM109XCJEUkFGX1JFTU9WRV9FUlJPUlwiLGVbZS5TVUJTQ1JJQkVfRVJST1I9MzkwMDFdPVwiU1VCU0NSSUJFX0VSUk9SXCIsZVtlLk5PVF9TVVBQT1JUPTM5MDAyXT1cIk5PVF9TVVBQT1JUXCIsZVtlLlFOVEtOX0ZJTEVUWVBFX0VSUk9SPTQxMDAxXT1cIlFOVEtOX0ZJTEVUWVBFX0VSUk9SXCIsZVtlLlFOVEtOX0dFVF9FUlJPUj00MTAwMl09XCJRTlRLTl9HRVRfRVJST1JcIixlW2UuQ09PS0lFX0VOQUJMRT01MTAwMV09XCJDT09LSUVfRU5BQkxFXCIsZVtlLkdFVF9NRVNTQUdFX0JZX0lEX0VSUk9SPTYxMDAxXT1cIkdFVF9NRVNTQUdFX0JZX0lEX0VSUk9SXCIsZVtlLkhBVk5PREVWSUNFSUQ9MjQwMDFdPVwiSEFWTk9ERVZJQ0VJRFwiLGVbZS5ERVZJQ0VJRElTSEFWRT0yNDAwMl09XCJERVZJQ0VJRElTSEFWRVwiLGVbZS5GRUlMRD0yNDAwOV09XCJGRUlMRFwiLGVbZS5WT0lQSVNOVUxMPTI0MDEzXT1cIlZPSVBJU05VTExcIixlW2UuTk9FTkdJTkVUWVBFPTI0MDEwXT1cIk5PRU5HSU5FVFlQRVwiLGVbZS5OVUxMQ0hBTk5FTE5BTUU9MjQwMTFdPVwiTlVMTENIQU5ORUxOQU1FXCIsZVtlLlZPSVBEWUFOTUlDRVJST1I9MjQwMTJdPVwiVk9JUERZQU5NSUNFUlJPUlwiLGVbZS5OT1ZPSVA9MjQwMTRdPVwiTk9WT0lQXCIsZVtlLklOVEVSTkFMRVJSUk9SPTI0MDE1XT1cIklOVEVSTkFMRVJSUk9SXCIsZVtlLlZPSVBDTE9TRT0yNDAxNl09XCJWT0lQQ0xPU0VcIixlW2UuQ0xPU0VfQkVGT1JFX09QRU49NTEwMDFdPVwiQ0xPU0VfQkVGT1JFX09QRU5cIixlW2UuQUxSRUFEWV9JTl9VU0U9NTEwMDJdPVwiQUxSRUFEWV9JTl9VU0VcIixlW2UuSU5WQUxJRF9DSEFOTkVMX05BTUU9NTEwMDNdPVwiSU5WQUxJRF9DSEFOTkVMX05BTUVcIixlW2UuVklERU9fQ09OVEFJTkVSX0lTX05VTEw9NTEwMDRdPVwiVklERU9fQ09OVEFJTkVSX0lTX05VTExcIixlW2UuREVMRVRFX01FU1NBR0VfSURfSVNfTlVMTD02MTAwMV09XCJERUxFVEVfTUVTU0FHRV9JRF9JU19OVUxMXCIsZVtlLkNBTkNFTD0xXT1cIkNBTkNFTFwiLGVbZS5SRUpFQ1Q9Ml09XCJSRUpFQ1RcIixlW2UuSEFOR1VQPTNdPVwiSEFOR1VQXCIsZVtlLkJVU1lMSU5FPTRdPVwiQlVTWUxJTkVcIixlW2UuTk9fUkVTUE9OU0U9NV09XCJOT19SRVNQT05TRVwiLGVbZS5FTkdJTkVfVU5fU1VQUE9SVEVEPTZdPVwiRU5HSU5FX1VOX1NVUFBPUlRFRFwiLGVbZS5ORVRXT1JLX0VSUk9SPTddPVwiTkVUV09SS19FUlJPUlwiLGVbZS5SRU1PVEVfQ0FOQ0VMPTExXT1cIlJFTU9URV9DQU5DRUxcIixlW2UuUkVNT1RFX1JFSkVDVD0xMl09XCJSRU1PVEVfUkVKRUNUXCIsZVtlLlJFTU9URV9IQU5HVVA9MTNdPVwiUkVNT1RFX0hBTkdVUFwiLGVbZS5SRU1PVEVfQlVTWUxJTkU9MTRdPVwiUkVNT1RFX0JVU1lMSU5FXCIsZVtlLlJFTU9URV9OT19SRVNQT05TRT0xNV09XCJSRU1PVEVfTk9fUkVTUE9OU0VcIixlW2UuUkVNT1RFX0VOR0lORV9VTl9TVVBQT1JURUQ9MTZdPVwiUkVNT1RFX0VOR0lORV9VTl9TVVBQT1JURURcIixlW2UuUkVNT1RFX05FVFdPUktfRVJST1I9MTddPVwiUkVNT1RFX05FVFdPUktfRVJST1JcIixlW2UuVk9JUF9OT1RfQVZBTElBQkxFPTE4XT1cIlZPSVBfTk9UX0FWQUxJQUJMRVwiLGVbZS5DSEFUUk9PTV9LVl9TVE9SRV9OT1RfQUxMX1NVQ0NFU1M9MjM0MjhdPVwiQ0hBVFJPT01fS1ZfU1RPUkVfTk9UX0FMTF9TVUNDRVNTXCIsZVtlLkNIQVRST09NX0tWX1NUT1JFX09VVF9MSU1JVD0yMzQyOV09XCJDSEFUUk9PTV9LVl9TVE9SRV9PVVRfTElNSVRcIn0oeWV8fCh5ZT17fSkpO3ZhciB2ZSxFZT15ZTshZnVuY3Rpb24oZSl7ZVtlLkNPTk5FQ1RFRD0wXT1cIkNPTk5FQ1RFRFwiLGVbZS5DT05ORUNUSU5HPTFdPVwiQ09OTkVDVElOR1wiLGVbZS5ESVNDT05ORUNURUQ9Ml09XCJESVNDT05ORUNURURcIixlW2UuTkVUV09SS19VTkFWQUlMQUJMRT0zXT1cIk5FVFdPUktfVU5BVkFJTEFCTEVcIixlW2UuQ09OTkVDVElPTl9DTE9TRUQ9NF09XCJDT05ORUNUSU9OX0NMT1NFRFwiLGVbZS5LSUNLRURfT0ZGTElORV9CWV9PVEhFUl9DTElFTlQ9Nl09XCJLSUNLRURfT0ZGTElORV9CWV9PVEhFUl9DTElFTlRcIixlW2UuV0VCU09DS0VUX1VOQVZBSUxBQkxFPTddPVwiV0VCU09DS0VUX1VOQVZBSUxBQkxFXCIsZVtlLldFQlNPQ0tFVF9FUlJPUj04XT1cIldFQlNPQ0tFVF9FUlJPUlwiLGVbZS5CTE9DS0VEPTldPVwiQkxPQ0tFRFwiLGVbZS5ET01BSU5fSU5DT1JSRUNUPTEyXT1cIkRPTUFJTl9JTkNPUlJFQ1RcIixlW2UuRElTQ09OTkVDVF9CWV9TRVJWRVI9MTNdPVwiRElTQ09OTkVDVF9CWV9TRVJWRVJcIixlW2UuUkVESVJFQ1Q9MTRdPVwiUkVESVJFQ1RcIixlW2UuQVBQS0VZX0lTX0ZBS0U9MjBdPVwiQVBQS0VZX0lTX0ZBS0VcIixlW2UuVUxUUkFMSU1JVD0xMTAxXT1cIlVMVFJBTElNSVRcIixlW2UuUkVRVUVTVF9OQVZJPTIwMV09XCJSRVFVRVNUX05BVklcIixlW2UuUkVTUE9OU0VfTkFWST0yMDJdPVwiUkVTUE9OU0VfTkFWSVwiLGVbZS5SRVNQT05TRV9OQVZJX0VSUk9SPTIwM109XCJSRVNQT05TRV9OQVZJX0VSUk9SXCIsZVtlLlJFU1BPTlNFX05BVklfVElNRU9VVD0yMDRdPVwiUkVTUE9OU0VfTkFWSV9USU1FT1VUXCJ9KHZlfHwodmU9e30pKTt2YXIgVGUsSWU9dmUsQ2U9e0FDQ0VQVEVEOjAsVU5BQ0NFUFRBQkxFX1BST1RPQ09MX1ZFUlNJT046MSxJREVOVElGSUVSX1JFSkVDVEVEOjIsU0VSVkVSX1VOQVZBSUxBQkxFOjMsVE9LRU5fSU5DT1JSRUNUOjQsTk9UX0FVVEhPUklaRUQ6NSxSRURJUkVDVDo2LFBBQ0tBR0VfRVJST1I6NyxBUFBfQkxPQ0tfT1JfREVMRVRFOjgsQkxPQ0s6OSxUT0tFTl9FWFBJUkU6MTAsREVWSUNFX0VSUk9SOjExLEhPU1ROQU1FX0VSUk9SOjEyLEhBU09IVEVSU0FNRUNMSUVOVE9OTElORToxMyxJTl9PVEhFUl9DTFVTVEVSOjE1LEFQUF9BVVRIX05PVF9QQVNTOjE2LE9UUF9VU0VEOjE3LFBMQVRGT1JNX0VSUk9SOjE4fTshZnVuY3Rpb24oZSl7ZS5UZXh0TWVzc2FnZT1cIlJDOlR4dE1zZ1wiLGUuVk9JQ0U9XCJSQzpWY01zZ1wiLGUuSFFfVk9JQ0U9XCJSQzpIUVZDTXNnXCIsZS5JTUFHRT1cIlJDOkltZ01zZ1wiLGUuR0lGPVwiUkM6R0lGTXNnXCIsZS5SSUNIX0NPTlRFTlQ9XCJSQzpJbWdUZXh0TXNnXCIsZS5MT0NBVElPTj1cIlJDOkxCU01zZ1wiLGUuRklMRT1cIlJDOkZpbGVNc2dcIixlLlNJR0hUPVwiUkM6U2lnaHRNc2dcIixlLkNPTUJJTkU9XCJSQzpDb21iaW5lTXNnXCIsZS5DSFJNX0tWX05PVElGWT1cIlJDOmNocm1LVk5vdGlNc2dcIixlLkxPR19DT01NQU5EPVwiUkM6TG9nQ21kTXNnXCIsZS5FWFBBTlNJT05fTk9USUZZPVwiUkM6TXNnRXhNc2dcIixlLlJFRkVSRU5DRT1cIlJDOlJlZmVyZW5jZU1zZ1wiLGUuUkVDQUxMPVwiUkM6UmNDbWRcIixlLlJFQURfUkVDRUlQVD1cIlJDOlJlYWROdGZcIixlLlJFQURfUkVDRUlQVF9SRVFVRVNUPVwiUkM6UlJSZXFNc2dcIixlLlJFQURfUkVDRUlQVF9SRVNQT05TRT1cIlJDOlJSUnNwTXNnXCIsZS5TWU5DX1JFQURfU1RBVFVTPVwiUkM6U1JTTXNnXCIsZS5HUk9VUF9SRUFEX1JFQ0VJUFRfUkVRVUVTVD1cIlJDOlJSTXNnXCIsZS5DSEFUUk9PTV9KT0lOPVwiUkM6Q2hybUpvaW5OdGZcIixlLkNIQVRST09NX0xFRlQ9XCJSQzpDaHJtUXVpdE50ZlwiLGUuQ0hBVFJPT01fTUVSR0VfQ0hBTkdFPVwiUkM6Q2hybU1lbUNoYW5nZVwiLGUuVFlQSU5HX1NUQVRVUz1cIlJDOlR5cFN0c1wiLGUuSU5URVJDRVBUPVwiUkM6SW50ZXJjZXB0TXNnXCJ9KFRlfHwoVGU9e30pKTt2YXIgUmUsU2U9VGU7IWZ1bmN0aW9uKGUpe2VbZS5PUEVOPTFdPVwiT1BFTlwiLGVbZS5DTE9TRT0yXT1cIkNMT1NFXCJ9KFJlfHwoUmU9e30pKTt2YXIgTmUsT2U9UmU7IWZ1bmN0aW9uKGUpe2VbZS5BTEw9MV09XCJBTExcIixlW2UuU0lOR0FMPTJdPVwiU0lOR0FMXCJ9KE5lfHwoTmU9e30pKTt2YXIgTWUsd2U9TmU7IWZ1bmN0aW9uKGUpe2VbZS5RSU5JVT0xXT1cIlFJTklVXCIsZVtlLkFMST0yXT1cIkFMSVwiLGVbZS5BV1M9M109XCJBV1NcIixlW2UuU1RDPTRdPVwiU1RDXCJ9KE1lfHwoTWU9e30pKTt2YXIgQWUsVWU9TWU7IWZ1bmN0aW9uKGUpe2VbZS5VUERBVEU9MV09XCJVUERBVEVcIixlW2UuREVMRVRFPTJdPVwiREVMRVRFXCJ9KEFlfHwoQWU9e30pKTt2YXIgYmUsTGU9QWU7IWZ1bmN0aW9uKGUpe2VbZS5RVUlUPTBdPVwiUVVJVFwiLGVbZS5KT0lOPTFdPVwiSk9JTlwifShiZXx8KGJlPXt9KSk7dmFyIFBlLERlPWJlOyFmdW5jdGlvbihlKXtcbi8qIVxuICAgIOWFqOWxgOaVj+aEn+ivje+8muWRveS4reS6huiejeS6keWGhee9rueahOWFqOWxgOaVj+aEn+ivjVxuICAgKi9cbmVbZS5HTE9CQUw9MV09XCJHTE9CQUxcIixcbi8qIVxuICAgICDoh6rlrprkuYnmlY/mhJ/or43mi6bmiKrvvJrlkb3kuK3kuoblrqLmiLflnKjono3kupHoh6rlrprkuYnnmoTmlY/mhJ/or41cbiAgICAqL1xuZVtlLkNVU1RPTT0yXT1cIkNVU1RPTVwiLFxuLyohXG4gICAgIOesrOS4ieaWueWuoeaguOaLpuaIqu+8muWRveS4reS6huesrOS4ieaWue+8iOaVsOe+ju+8ieaIluaooeadv+i3r+eUseWGs+WumuS4jeS4i+WPkeeahOeKtuaAgVxuICAgICovXG5lW2UuVEhJUkRfUEFSVFk9M109XCJUSElSRF9QQVJUWVwifShQZXx8KFBlPXt9KSk7dmFyIFZlLGtlPVBlOyFmdW5jdGlvbihlKXtlW2UudHlwaW5nPTBdPVwidHlwaW5nXCJ9KFZlfHwoVmU9e30pKTt2YXIgeGUsQmUsR2UsRmU9VmU7IWZ1bmN0aW9uKGUpe2VbZS5SVEM9MF09XCJSVENcIixlW2UuTElWRT0yXT1cIkxJVkVcIn0oeGV8fCh4ZT17fSkpLGZ1bmN0aW9uKGUpe2VbZS5BVURJT19BTkRfVklERU89MF09XCJBVURJT19BTkRfVklERU9cIixlW2UuQVVESU89MV09XCJBVURJT1wifShCZXx8KEJlPXt9KSksZnVuY3Rpb24oZSl7ZVtlLkFOQ0hPUj0xXT1cIkFOQ0hPUlwiLGVbZS5BVURJRU5DRT0yXT1cIkFVRElFTkNFXCJ9KEdlfHwoR2U9e30pKTt2YXIgcWUsS2UsSGUsWWU9e1wiUkM6VkNBY2NlcHRcIjpcIlJDOlZDQWNjZXB0XCIsXCJSQzpWQ1JpbmdpbmdcIjpcIlJDOlZDUmluZ2luZ1wiLFwiUkM6VkNTdW1tYXJ5XCI6XCJSQzpWQ1N1bW1hcnlcIixcIlJDOlZDSGFuZ3VwXCI6XCJSQzpWQ0hhbmd1cFwiLFwiUkM6VkNJbnZpdGVcIjpcIlJDOlZDSW52aXRlXCIsXCJSQzpWQ01vZGlmeU1lZGlhXCI6XCJSQzpWQ01vZGlmeU1lZGlhXCIsXCJSQzpWQ01vZGlmeU1lbVwiOlwiUkM6VkNNb2RpZnlNZW1cIn07IWZ1bmN0aW9uKGUpe2VbZS5ST09NPTFdPVwiUk9PTVwiLGVbZS5QRVJTT049Ml09XCJQRVJTT05cIn0ocWV8fChxZT17fSkpLGZ1bmN0aW9uKGUpe2VbZS5BbmNob3JUb1ZpZXdlcj0xXT1cIkFuY2hvclRvVmlld2VyXCIsZVtlLlZpZXdlclRvQW5jaG9yPTJdPVwiVmlld2VyVG9BbmNob3JcIn0oS2V8fChLZT17fSkpLGZ1bmN0aW9uKGUpe2VbZS5LSUNLPTBdPVwiS0lDS1wiLGVbZS5SRUZVU0U9MV09XCJSRUZVU0VcIixlW2UuQ09FWElTVD0yXT1cIkNPRVhJU1RcIn0oSGV8fChIZT17fSkpO3ZhciBqZT1cInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiZ3aW5kb3c/KHdpbmRvdy5fX1JDVmVyc2lvbkluZm98fCh3aW5kb3cuX19SQ1ZlcnNpb25JbmZvPXt9KSx3aW5kb3cuX19SQ1ZlcnNpb25JbmZvKTp7fTtqZS5lbmdpbmU9XCI1LjIuMVwiO3ZhciBRZSxXZSxKZT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt9cmV0dXJuIGUuYWRkPWZ1bmN0aW9uKGUsdCl7amVbZV09dH0sZS52YWxpZEVuZ2luZT1mdW5jdGlvbihlKXt2YXIgdD1lLm1hdGNoKC9cXGQrXFwuXFxkK1xcLlxcZCsvKTtpZighdClyZXR1cm4gZ2Uud2FybihcIlRoZSB2YWxpZGF0aW9uIGVuZ2luZSB2ZXJzaW9uICdcIitlK1wiJyBpcyBpbnZhbGlkIVwiKSwhMTt2YXIgbj10WzBdLnNwbGl0KFwiLlwiKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlLnBhZFN0YXJ0KDMsXCIwXCIpfSkpLmpvaW4oXCJcIik7cmV0dXJuIGplLmVuZ2luZS5tYXRjaCgvXFxkK1xcLlxcZCtcXC5cXGQrLylbMF0uc3BsaXQoXCIuXCIpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUucGFkU3RhcnQoMyxcIjBcIil9KSkuam9pbihcIlwiKT49bn0sZS5nZXRJbmZvPWZ1bmN0aW9uKCl7cmV0dXJuIGplfSxlfSgpOyFmdW5jdGlvbihlKXtlW2UuU1RSSU5HPTBdPVwiU1RSSU5HXCIsZVtlLk9OTFlfU1RSSU5HPTFdPVwiT05MWV9TVFJJTkdcIixlW2UuTlVNQkVSPTJdPVwiTlVNQkVSXCIsZVtlLkJPT0xFQU49M109XCJCT09MRUFOXCIsZVtlLk9CSkVDVD00XT1cIk9CSkVDVFwiLGVbZS5BUlJBWT01XT1cIkFSUkFZXCIsZVtlLkNBTExCQUNLPTZdPVwiQ0FMTEJBQ0tcIixlW2UuQ0hBTk5FTF9JRD03XT1cIkNIQU5ORUxfSURcIn0oV2V8fChXZT17fSkpO3ZhciB6ZSxaZSxYZSwkZSxldCx0dD0oKFFlPXt9KVtXZS5TVFJJTkddPWVlLFFlW1dlLk9OTFlfU1RSSU5HXT1KLFFlW1dlLk5VTUJFUl09WixRZVtXZS5CT09MRUFOXT1mdW5jdGlvbihlKXtyZXR1cm5cImJvb2xlYW5cIj09dHlwZW9mIGV9LFFlW1dlLk9CSkVDVF09bmUsUWVbV2UuQVJSQVldPVgsUWVbV2UuQ0FMTEJBQ0tdPWZ1bmN0aW9uKGUpe3ZhciB0PSEwO3JldHVybiBuZShlKXx8KHQ9ITEpLChlPWV8fHt9KS5vblN1Y2Nlc3MmJiFpZShlLm9uU3VjY2VzcykmJih0PSExKSxlLm9uRXJyb3ImJiFpZShlLm9uRXJyb3IpJiYodD0hMSksdH0sUWVbV2UuQ0hBTk5FTF9JRF09ZnVuY3Rpb24oZSl7dmFyIHQ9ITE7cmV0dXJuIEooZSkmJiEvXy9nLnRlc3QoZSkmJmUubGVuZ3RoPD0yMCYmKHQ9ITApLHR9LFFlKSxudD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQpe3ZhciBuPWUuY2FsbCh0aGlzLHQpfHx0aGlzO3JldHVybiBuLm5hbWU9XCJSQ0Fzc2VydEVycm9yXCIsbn1yZXR1cm4gTih0LGUpLHR9KEVycm9yKSxpdD1mdW5jdGlvbihlLHQsbixpKXtpZih2b2lkIDA9PT1pJiYoaT0hMSksIXJ0KGUsdCxuLGkpKXRocm93IG5ldyBudChcIidcIitlK1wiJyBpcyBpbnZhbGlkOiBcIitKU09OLnN0cmluZ2lmeSh0KSl9LHJ0PWZ1bmN0aW9uKGUsdCxuLGkpe3ZvaWQgMD09PWkmJihpPSExKSxuPXR0W25dfHxuO3ZhciByPWkmJiFuKHQpfHwhaSYmIShyZSh0KXx8bnVsbD09PXR8fG4odCkpO3JldHVybiByJiZnZS5lcnJvcihcIidcIitlK1wiJyBpcyBpbnZhbGlkOiBcIitKU09OLnN0cmluZ2lmeSh0KSksIXJ9LHN0PWZ1bmN0aW9uKGUpe2lmKCFuZShlKXx8dm9pZCAwPT09ZS5sb3d8fHZvaWQgMD09PWUuaGlnaClyZXR1cm4gZTt2YXIgdD1lLmxvdztyZXR1cm4gdDwwJiYodCs9NDI5NDk2NzI5NiksdD10LnRvU3RyaW5nKDE2KSxwYXJzZUludChlLmhpZ2gudG9TdHJpbmcoMTYpK1wiMDAwMDAwMDBcIi5yZXBsYWNlKG5ldyBSZWdFeHAoXCIwe1wiK3QubGVuZ3RoK1wifSRcIiksdCksMTYpfSxvdD1mdW5jdGlvbihlLHQpe3ZhciBuPU1hdGguZmxvb3IoMWUzKk1hdGgucmFuZG9tKCklMWU0KSxpPUsoKSxyPWZ1bmN0aW9uKGUpe2U9ZXx8XCItXCI7dmFyIHQ9bmV3IERhdGU7cmV0dXJuXCJcIit0LmdldEZ1bGxZZWFyKCkrZSsodC5nZXRNb250aCgpKzEpK2UrdC5nZXREYXRlKCl9KCkscz0obmV3IERhdGUpLmdldFRpbWUoKSxvPVwiXCI7aWYodCl7dmFyIGE9dC5zcGxpdChcIi5cIik7bz1cIi5cIithW2EubGVuZ3RoLTFdfXJldHVybiBlK1wiX19SQy1cIityK1wiX1wiK24rXCJfXCIrcytpK299LGF0PWZ1bmN0aW9uKGUpe3ZhciB0PVwiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtXCI7c3dpdGNoKGUpe2Nhc2UgVy5JTUFHRTp0PVwiaW1hZ2UvanBlZ1wiO2JyZWFrO2Nhc2UgVy5BVURJTzp0PVwiYXVkaW8vYW1yXCI7YnJlYWs7Y2FzZSBXLlZJREVPOnQ9XCJ2aWRlby8zZ3BwXCI7YnJlYWs7Y2FzZSBXLlNJR0hUOnQ9XCJ2aWRlby9tcGVnNFwiO2JyZWFrO2Nhc2UgVy5DT01CSU5FX0hUTUw6dD1cInRleHQvaHRtbFwifXJldHVybiB0fSx1dD1mdW5jdGlvbihlLHQpe3ZvaWQgMD09PWUmJihlPXt9KSx2b2lkIDA9PT10JiYodD17fSk7dmFyIG49ZS50aHJlYWRJZCxpPWUuYXBuc0NvbGxhcHNlSWQscj1lLmNhdGVnb3J5LHM9ZS5yaWNoTWVkaWFVcmksbz10LmNoYW5uZWxJZE1pLGE9dC5jaGFubmVsSWRIVyx1PXQuY2hhbm5lbElkT1BQTyxjPXQudHlwZVZpdm8saD10Lmdvb2dsZUNvbmZpZyxsPXt9O2xbXCJ0aHJlYWQtaWRcIl09bnx8XCJcIixsW1wiYXBucy1jb2xsYXBzZS1pZFwiXT1pfHxcIlwiLGwuY2F0ZWdvcnk9cnx8XCJcIixsLnJpY2hNZWRpYVVyaT1zfHxcIlwiO3ZhciBkPXt9O2QuY29sbGFwc2Vfa2V5PW51bGw9PWg/dm9pZCAwOmguY29sbGFwc2VLZXksZC5pbWFnZVVybD1udWxsPT1oP3ZvaWQgMDpoLmltYWdlVXJsO3ZhciBmPW51bGw9PWg/dm9pZCAwOmgucHJpb3JpdHk7ZiYmIVtcImhpZ2hcIixcIm5vcm1hbFwiXS5pbmNsdWRlcyhmKSYmKGY9XCJub3JtYWxcIiksZC5wcmlvcml0eT1mO3ZhciBwPVt7SFc6e2NoYW5uZWxJZDphfHxcIlwifX0se01JOntjaGFubmVsSWQ6b3x8XCJcIn19LHtPUFBPOntjaGFubmVsSWQ6dXx8XCJcIn19LHtWSVZPOntjbGFzc2lmaWNhdGlvbjpjfHxcIlwifX0se0FQTlM6bH0se0ZDTTpkfV07cmV0dXJuIEpTT04uc3RyaW5naWZ5KHApfSxjdD1mdW5jdGlvbihlLHQpe3ZhciBuPXt9LGk9e25vdGlmaWNhdGlvbklkOnR8fFwiXCJ9O2lmKCFlKXJldHVybntpT1NDb25maWc6bixhbmRyb2lkQ29uZmlnOml9O3RyeXt2YXIgcj1KU09OLnBhcnNlKGUpO251bGw9PXJ8fHIuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHQscixzLG8sYT1PYmplY3Qua2V5cyhlKTtpZigwIT09YS5sZW5ndGgpe3ZhciB1PWFbMF07c3dpdGNoKHUpe2Nhc2VcIkhXXCI6cmV0dXJuIHZvaWQoaS5jaGFubmVsSWRIVz1udWxsPT09KHQ9ZVt1XSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuY2hhbm5lbElkKTtjYXNlXCJNSVwiOnJldHVybiB2b2lkKGkuY2hhbm5lbElkTWk9bnVsbD09PShyPWVbdV0pfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLmNoYW5uZWxJZCk7Y2FzZVwiT1BQT1wiOnJldHVybiB2b2lkKGkuY2hhbm5lbElkT1BQTz1udWxsPT09KHM9ZVt1XSl8fHZvaWQgMD09PXM/dm9pZCAwOnMuY2hhbm5lbElkKTtjYXNlXCJWSVZPXCI6cmV0dXJuIHZvaWQoaS50eXBlVml2bz1udWxsPT09KG89ZVt1XSl8fHZvaWQgMD09PW8/dm9pZCAwOm8uY2xhc3NpZmljYXRpb24pO2Nhc2VcIkFQTlNcIjpyZXR1cm4gbi50aHJlYWRJZD1lW3VdW1widGhyZWFkLWlkXCJdLG4uYXBuc0NvbGxhcHNlSWQ9ZVt1XVtcImFwbnMtY29sbGFwc2UtaWRcIl0sbi5jYXRlZ29yeT1lW3VdLmNhdGVnb3J5LHZvaWQobi5yaWNoTWVkaWFVcmk9ZVt1XS5yaWNoTWVkaWFVcmkpO2Nhc2VcIkZDTVwiOmkuZ29vZ2xlQ29uZmlnPXtjb2xsYXBzZUtleTplW3VdLmNvbGxhcHNlX2tleXx8XCJcIixpbWFnZVVybDplW3VdLmltYWdlVXJsfHxcIlwiLHByaW9yaXR5OmVbdV0ucHJpb3JpdHl8fFwiXCJ9fX19KSl9Y2F0Y2godCl7Z2UuZXJyb3IoXCJXcm9uZyBmb3JtYXQgZm9yIHB1c2hDb25maWdzIGZpZWxkISBjb250ZW50OiBcIitlKX1yZXR1cm57aU9TQ29uZmlnOm4sYW5kcm9pZENvbmZpZzppfX0saHQ9ZnVuY3Rpb24oZSl7dmFyIHQ9L15bQS1aYS16MC05Xz0rLV0rJC8udGVzdChlKSxuPWUubGVuZ3RoO3JldHVybiB0JiYobjw9MTI4JiZuPj0xKX0sbHQ9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5sZW5ndGg7cmV0dXJuIHQ8PTQwOTYmJnQ+PTF9LGR0PWZ1bmN0aW9uKGUsdCxuKXt0PXR8fGZ1bmN0aW9uKCl7fTt2YXIgaT0obj1ufHx7fSkuaXNSZXZlcnNlO25lKGUpJiZmdW5jdGlvbigpe2Zvcih2YXIgbiBpbiBlKXQoZVtuXSxuLGUpfSgpLChYKGUpfHxKKGUpKSYmZnVuY3Rpb24oKXtpZihpKWZvcih2YXIgbj1lLmxlbmd0aC0xO24+PTA7bi0tKXQoZVtuXSxuKTtlbHNlIGZvcih2YXIgcj0wLHM9ZS5sZW5ndGg7cjxzO3IrKyl0KGVbcl0scil9KCl9LGZ0PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGR0KGUsKGZ1bmN0aW9uKG4saSl7ZVtpXT10KG4saSl9KSksZX0scHQ9ZnVuY3Rpb24oZSx0KXtpZihlLmluZGV4T2YpcmV0dXJuIGUuaW5kZXhPZih0KTt2YXIgbj0tMTtyZXR1cm4gZHQoZSwoZnVuY3Rpb24oZSxpKXt0PT09ZSYmKG49aSl9KSksbn0sZ3Q9ZnVuY3Rpb24oZSx0KXtyZXR1cm4tMSE9PXB0KGUsdCl9LF90PWZ1bmN0aW9uKGUsdCl7dmFyIG49W107cmV0dXJuIGR0KGUsKGZ1bmN0aW9uKGUpe24ucHVzaChlKX0pKSwtMSE9PXB0KG4sdCl9LHl0PWZ1bmN0aW9uKGUpe3JldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGUpKX0sbXQ9ZnVuY3Rpb24oKXtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2YgUkNDcHBFbmdpbmV9LHZ0PWZ1bmN0aW9uKGUpe2lmKFwiYnJvd3NlclwiIT09ZS50YWcpcmV0dXJue3R5cGU6ZS50YWcsdmVyc2lvbjpcIlVuS29ud1wifTt2YXIgdCxuLGk9bmF2aWdhdG9yLnVzZXJBZ2VudCxyPXtJRTovcnY6KFtcXGQuXSspXFwpIGxpa2UgR2Vja298TVNJRSAoW1xcZC5dKykvLEVkZ2U6L0VkZ2VcXC8oW1xcZC5dKykvLEZpcmVmb3g6L0ZpcmVmb3hcXC8oW1xcZC5dKykvLE9wZXJhOi8oPzpPUEVSQXxPUFIpLihbXFxkLl0rKS8sV2VDaGF0Oi9NaWNyb01lc3NlbmdlclxcLyhbXFxkLl0rKS8sUVFCcm93c2VyOi9RUUJyb3dzZXJcXC8oW1xcZC5dKykvLENocm9tZTovQ2hyb21lXFwvKFtcXGQuXSspLyxTYWZhcmk6L1ZlcnNpb25cXC8oW1xcZC5dKykuKlNhZmFyaS8saU9TQ2hyb21lOi9Nb2JpbGVcXC8oW1xcZC5dKykuKlNhZmFyaS99O2Zvcih2YXIgcyBpbiByKWlmKHIuaGFzT3duUHJvcGVydHkocykpe3ZhciBvPWkubWF0Y2gocltzXSk7aWYobyl7bj1zLHQ9b1sxXXx8b1syXTticmVha319cmV0dXJue3R5cGU6bnx8XCJVbktvbndcIix2ZXJzaW9uOnR8fFwiVW5Lb253XCJ9fSxFdD1mdW5jdGlvbihlKXtzd2l0Y2goZSl7Y2FzZSBDZS5TRVJWRVJfVU5BVkFJTEFCTEU6cmV0dXJuIEVlLlNFUlZFUl9VTkFWQUlMQUJMRTtjYXNlIENlLlRPS0VOX0lOQ09SUkVDVDpyZXR1cm4gRWUuUkNfQ09OTl9VU0VSX09SX1BBU1NXRF9FUlJPUjtjYXNlIENlLlJFRElSRUNUOnJldHVybiBFZS5SQ19DT05OX1JFRElSRUNURUQ7Y2FzZSBDZS5BUFBfQkxPQ0tfT1JfREVMRVRFOnJldHVybiBFZS5SQ19DT05OX0FQUF9CTE9DS0VEX09SX0RFTEVURUQ7Y2FzZSBDZS5CTE9DSzpyZXR1cm4gRWUuUkNfQ09OTl9VU0VSX0JMT0NLRUQ7Y2FzZSBDZS5UT0tFTl9FWFBJUkU6cmV0dXJuIEVlLlJDX0NPTk5fVVNFUl9PUl9QQVNTV0RfRVJST1I7Y2FzZSBDZS5IT1NUTkFNRV9FUlJPUjpyZXR1cm4gRWUuSE9TVE5BTUVfRVJST1I7Y2FzZSBDZS5IQVNPSFRFUlNBTUVDTElFTlRPTkxJTkU6cmV0dXJuIEVlLkhBU19PSFRFUl9TQU1FX0NMSUVOVF9PTl9MSU5FO2Nhc2UgQ2UuQVBQX0FVVEhfTk9UX1BBU1M6cmV0dXJuIEVlLlJDX0FQUF9BVVRIX05PVF9QQVNTO2Nhc2UgQ2UuT1RQX1VTRUQ6cmV0dXJuIEVlLlJDX09UUF9VU0VEO2Nhc2UgQ2UuUExBVEZPUk1fRVJST1I6cmV0dXJuIEVlLlJDX1BMQVRGT1JNX0VSUk9SO2RlZmF1bHQ6cmV0dXJuIEVlLlJDX05FVF9VTkFWQUlMQUJMRX19LFR0PWZ1bmN0aW9uKGUpe3ZhciB0O2lmKFwib2JqZWN0XCI9PXR5cGVvZiBlKWlmKEFycmF5LmlzQXJyYXkoZSkpZm9yKHZhciBuIGluIHQ9W10sZSl0LnB1c2goVHQoZVtuXSkpO2Vsc2UgZm9yKHZhciBuIGluIHQ9e30sZSl0W25dPVR0KGVbbl0pO2Vsc2UgdD1lO3JldHVybiB0fSxJdD1mdW5jdGlvbihlKXt2YXIgdDt0cnl7dD1UdChlKX1jYXRjaChuKXtnZS5lcnJvcihcImNsb25lIGVycjpcIixuKSx0PUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZSkpfXJldHVybiB0fSxDdD1mdW5jdGlvbihlKXt2YXIgdD17fSxuPUpTT04ucGFyc2UoZSk7cmV0dXJuIGR0KG4sKGZ1bmN0aW9uKGUsbil7dFtuXT1lLnZ9KSksdH0sUnQ9e19kZWxheVRpbWU6MCxzZXRUaW1lOmZ1bmN0aW9uKGUpe3ZhciB0PShuZXcgRGF0ZSkuZ2V0VGltZSgpO1J0Ll9kZWxheVRpbWU9dC1lfSxnZXRUaW1lOmZ1bmN0aW9uKCl7dmFyIGU9UnQuX2RlbGF5VGltZTtyZXR1cm4obmV3IERhdGUpLmdldFRpbWUoKS1lfX0sU3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbj0wO3JldHVybiBlLmlzQXV0b0RlbGV0ZSYmKG58PTEpLGUuaXNPdmVyd3JpdGUmJihufD0yKSwyPT09dCYmKG58PTQpLG59OyFmdW5jdGlvbihlKXtlW2UuQVRfTU9TVF9PTkNFPTBdPVwiQVRfTU9TVF9PTkNFXCIsZVtlLkFUX0xFQVNUX09OQ0U9MV09XCJBVF9MRUFTVF9PTkNFXCIsZVtlLkVYQUNUTFlfT05DRT0yXT1cIkVYQUNUTFlfT05DRVwiLGVbZS5ERUZBVUxUPTNdPVwiREVGQVVMVFwifSh6ZXx8KHplPXt9KSksZnVuY3Rpb24oZSl7ZVtlLlNZTU1FVFJJQz0wXT1cIlNZTU1FVFJJQ1wiLGVbZS5DT05ORUNUPTFdPVwiQ09OTkVDVFwiLGVbZS5DT05OX0FDSz0yXT1cIkNPTk5fQUNLXCIsZVtlLlBVQkxJU0g9M109XCJQVUJMSVNIXCIsZVtlLlBVQl9BQ0s9NF09XCJQVUJfQUNLXCIsZVtlLlFVRVJZPTVdPVwiUVVFUllcIixlW2UuUVVFUllfQUNLPTZdPVwiUVVFUllfQUNLXCIsZVtlLlFVRVJZX0NPTkZJUk09N109XCJRVUVSWV9DT05GSVJNXCIsZVtlLlNVQlNDUklCRT04XT1cIlNVQlNDUklCRVwiLGVbZS5TVUJfQUNLPTldPVwiU1VCX0FDS1wiLGVbZS5VTlNVQlNDUklCRT0xMF09XCJVTlNVQlNDUklCRVwiLGVbZS5VTlNVQl9BQ0s9MTFdPVwiVU5TVUJfQUNLXCIsZVtlLlBJTkdfUkVRPTEyXT1cIlBJTkdfUkVRXCIsZVtlLlBJTkdfUkVTUD0xM109XCJQSU5HX1JFU1BcIixlW2UuRElTQ09OTkVDVD0xNF09XCJESVNDT05ORUNUXCIsZVtlLlJFU0VSVkVSMj0xNV09XCJSRVNFUlZFUjJcIn0oWmV8fChaZT17fSkpLGZ1bmN0aW9uKGUpe2UuQ09OTl9BQ0s9XCJDb25uQWNrTWVzc2FnZVwiLGUuRElTQ09OTkVDVD1cIkRpc2Nvbm5lY3RNZXNzYWdlXCIsZS5QSU5HX1JFUT1cIlBpbmdSZXFNZXNzYWdlXCIsZS5QSU5HX1JFU1A9XCJQaW5nUmVzcE1lc3NhZ2VcIixlLlBVQkxJU0g9XCJQdWJsaXNoTWVzc2FnZVwiLGUuUFVCX0FDSz1cIlB1YkFja01lc3NhZ2VcIixlLlFVRVJZPVwiUXVlcnlNZXNzYWdlXCIsZS5RVUVSWV9DT049XCJRdWVyeUNvbk1lc3NhZ2VcIixlLlFVRVJZX0FDSz1cIlF1ZXJ5QWNrTWVzc2FnZVwifShYZXx8KFhlPXt9KSksZnVuY3Rpb24oZSl7ZS5QVUI9XCJwdWJcIixlLlFVRVJZPVwicXJ5XCJ9KCRlfHwoJGU9e30pKSxmdW5jdGlvbihlKXtlW2UuVjQ9NF09XCJWNFwiLGVbZS5WMz0zXT1cIlYzXCJ9KGV0fHwoZXQ9e30pKTt2YXIgTnQsT3Q9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxuLGkpe3ZvaWQgMD09PXQmJih0PSExKSx2b2lkIDA9PT1uJiYobj16ZS5BVF9MRUFTVF9PTkNFKSx2b2lkIDA9PT1pJiYoaT0hMSksdGhpcy5fcmV0YWluPSExLHRoaXMucW9zPXplLkFUX0xFQVNUX09OQ0UsdGhpcy5fZHVwPSExLHRoaXMuc3luY01zZz0hMTt2YXIgcj1lPjA7ZSYmciYmMT09PWFyZ3VtZW50cy5sZW5ndGg/KHRoaXMuX3JldGFpbj0oMSZlKT4wLHRoaXMucW9zPSg2JmUpPj4xLHRoaXMuX2R1cD0oOCZlKT4wLHRoaXMudHlwZT1lPj40JjE1LHRoaXMuc3luY01zZz04PT0oOCZlKSk6KHRoaXMudHlwZT1lLHRoaXMuX3JldGFpbj10LHRoaXMucW9zPW4sdGhpcy5fZHVwPWkpfXJldHVybiBlLnByb3RvdHlwZS5lbmNvZGU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnR5cGU8PDQ7cmV0dXJuIGV8PXRoaXMuX3JldGFpbj8xOjAsZXw9dGhpcy5xb3M8PDEsZXw9dGhpcy5fZHVwPzg6MH0sZX0oKSxNdD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt9cmV0dXJuIGUud3JpdGVVVEY9ZnVuY3Rpb24oZSx0KXt2YXIgbj1bXSxpPTA7aWYoSihlKSlmb3IodmFyIHI9MCxzPWUubGVuZ3RoO3I8cztyKyspe3ZhciBvPWUuY2hhckNvZGVBdChyKTtvPj0wJiZvPD0xMjc/KGkrPTEsbi5wdXNoKG8pKTpvPj0xMjgmJm88PTIwNDc/KGkrPTIsbi5wdXNoKDE5MnwzMSZvPj42KSxuLnB1c2goMTI4fDYzJm8pKTpvPj0yMDQ4JiZvPD02NTUzNSYmKGkrPTMsbi5wdXNoKDIyNHwxNSZvPj4xMiksbi5wdXNoKDEyOHw2MyZvPj42KSxuLnB1c2goMTI4fDYzJm8pKX1mb3Iocj0wLHM9bi5sZW5ndGg7cjxzO3IrKyluW3JdPjI1NSYmKG5bcl0mPTI1NSk7cmV0dXJuIHQ/bjppPD0yNTU/WzAsaV0uY29uY2F0KG4pOltpPj44LDI1NSZpXS5jb25jYXQobil9LGUucmVhZFVURj1mdW5jdGlvbihlKXtmb3IodmFyIHQsbixpPVtdLHI9LTEscz1lLG89XCJcIjsrK3I8cy5sZW5ndGg7KXt2YXIgYT1OdW1iZXIoc1tyXSk7aWYoYT09PSgxMjcmYSl8fCgyNDA9PSgyNDAmYSk/YT0oYT0oYT0oYV49MjQwKTw8NnwxMjhec1srK3JdKTw8NnwxMjhec1srK3JdKTw8NnwxMjhec1srK3JdOjIyND09KDIyNCZhKT9hPShhPShhXj0yMjQpPDw2fDEyOF5zWysrcl0pPDw2fDEyOF5zWysrcl06MTkyPT0oMTkyJmEpJiYoYT0oYV49MTkyKTw8NnwxMjhec1srK3JdKSksIWlzRmluaXRlKGEpfHxhPDB8fGE+MTExNDExMXx8TWF0aC5mbG9vcihhKSE9PWEpdGhyb3cgUmFuZ2VFcnJvcihcIkludmFsaWQgY29kZSBwb2ludDogXCIrYSk7YTw9NjU1MzU/aS5wdXNoKGEpOih0PShhLT02NTUzNik+PjEwfDU1Mjk2LG49YSUxMDI0fDU2MzIwLGkucHVzaCh0LG4pKSwocisxPT09cy5sZW5ndGh8fGkubGVuZ3RoPjE2Mzg0KSYmKG8rPVN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCxpKSxpLmxlbmd0aD0wKX1yZXR1cm4gb30sZX0oKSx3dD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5fcG9zaXRpb249MCx0aGlzLl9wb29sTGVuPTAsdGhpcy5fcG9vbD1lLHRoaXMuX3Bvb2xMZW49ZS5sZW5ndGh9cmV0dXJuIGUucHJvdG90eXBlLmNoZWNrPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Bvc2l0aW9uPj10aGlzLl9wb29sLmxlbmd0aH0sZS5wcm90b3R5cGUucmVhZDJCeXRlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztpZihlLmNoZWNrKCkpcmV0dXJuLTE7Zm9yKHZhciB0PVwiXCIsbj0wO248MjtuKyspe3ZhciBpPWUuX3Bvb2xbZS5fcG9zaXRpb24rK10udG9TdHJpbmcoMTYpOzE9PT1pLmxlbmd0aCYmKGk9XCIwXCIraSksdCs9aS50b1N0cmluZygpfXJldHVybiBwYXJzZUludCh0LDE2KX0sZS5wcm90b3R5cGUucmVhZEludD1mdW5jdGlvbigpe3ZhciBlPXRoaXM7aWYoZS5jaGVjaygpKXJldHVybi0xO2Zvcih2YXIgdD1cIlwiLG49MDtuPDQ7bisrKXt2YXIgaT1lLl9wb29sW2UuX3Bvc2l0aW9uKytdLnRvU3RyaW5nKDE2KTsxPT09aS5sZW5ndGgmJihpPVwiMFwiK2kpLHQrPWkudG9TdHJpbmcoKX1yZXR1cm4gcGFyc2VJbnQodCwxNil9LGUucHJvdG90eXBlLnJlYWRMb25nPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztpZihlLmNoZWNrKCkpcmV0dXJuLTE7Zm9yKHZhciB0PVwiXCIsbj0wO248ODtuKyspe3ZhciBpPWUuX3Bvb2xbZS5fcG9zaXRpb24rK10udG9TdHJpbmcoMTYpOzE9PT1pLmxlbmd0aCYmKGk9XCIwXCIraSksdCs9aX1yZXR1cm4gcGFyc2VJbnQodCwxNil9LGUucHJvdG90eXBlLnJlYWRCeXRlPWZ1bmN0aW9uKCl7aWYodGhpcy5jaGVjaygpKXJldHVybi0xO3ZhciBlPXRoaXMuX3Bvb2xbdGhpcy5fcG9zaXRpb24rK107cmV0dXJuIGU+MjU1JiYoZSY9MjU1KSxlfSxlLnByb3RvdHlwZS5yZWFkVVRGPWZ1bmN0aW9uKCl7aWYodGhpcy5jaGVjaygpKXJldHVyblwiXCI7dmFyIGU9dGhpcy5yZWFkQnl0ZSgpPDw4fHRoaXMucmVhZEJ5dGUoKSx0PXRoaXMuX3Bvb2wuc3ViYXJyYXkodGhpcy5fcG9zaXRpb24sdGhpcy5fcG9zaXRpb24rPWUpO3JldHVybiBNdC5yZWFkVVRGKHQpfSxlLnByb3RvdHlwZS5yZWFkQWxsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Bvb2wuc3ViYXJyYXkodGhpcy5fcG9zaXRpb24sdGhpcy5fcG9vbExlbil9LGV9KCksQXQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5fcG9vbD1bXSx0aGlzLl9wb3NpdGlvbj0wLHRoaXMuX3dyaXRlbj0wfXJldHVybiBlLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbihlKXtyZXR1cm4tMSE9PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKS5pbmRleE9mKFwiQXJyYXlcIik/dGhpcy5fcG9vbD10aGlzLl9wb29sLmNvbmNhdChlKTplPj0wJiYoZT4yNTUmJihlJj0yNTUpLHRoaXMuX3Bvb2wucHVzaChlKSx0aGlzLl93cml0ZW4rKyksZX0sZS5wcm90b3R5cGUud3JpdGVBcnI9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3Bvb2w9dGhpcy5fcG9vbC5jb25jYXQoZSksZX0sZS5wcm90b3R5cGUud3JpdGVVVEY9ZnVuY3Rpb24oZSl7dmFyIHQ9TXQud3JpdGVVVEYoZSk7dGhpcy5fcG9vbD10aGlzLl9wb29sLmNvbmNhdCh0KSx0aGlzLl93cml0ZW4rPXQubGVuZ3RofSxlLnByb3RvdHlwZS5nZXRCeXRlc0FycmF5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Bvb2x9LGV9KCksVXQ9XCJVcFN0cmVhbU1lc3NhZ2VcIixidD1cIlB1c2hFeHRyYVwiLEx0PVwiRG93blN0cmVhbU1lc3NhZ2VcIixQdD1cIkRvd25TdHJlYW1NZXNzYWdlc1wiLER0PVwiU2Vzc2lvbnNBdHRRcnlJbnB1dFwiLFZ0PVwiU2Vzc2lvbnNBdHRPdXRwdXRcIixrdD1cIlN5bmNSZXF1ZXN0TXNnXCIseHQ9XCJDaHJtUHVsbE1zZ1wiLEJ0PVwiTm90aWZ5TXNnXCIsR3Q9XCJIaXN0b3J5TXNnSW5wdXRcIixGdD1cIkhpc3RvcnlNc2dPdXB1dFwiLHF0PVwiUmVsYXRpb25RcnlJbnB1dFwiLEt0PVwiUmVsYXRpb25zT3V0cHV0XCIsSHQ9XCJEZWxldGVTZXNzaW9uc0lucHV0XCIsWXQ9XCJTZXNzaW9uSW5mb1wiLGp0PVwiRGVsZXRlU2Vzc2lvbnNPdXRwdXRcIixRdD1cIlJlbGF0aW9uc0lucHV0XCIsV3Q9XCJEZWxldGVNc2dJbnB1dFwiLEp0PVwiQ2xlYW5IaXNNc2dJbnB1dFwiLHp0PVwiU2Vzc2lvbk1zZ1JlYWRJbnB1dFwiLFp0PVwiQ2hybUlucHV0XCIsWHQ9XCJDaHJtT3V0cHV0XCIsJHQ9XCJRdWVyeUNoYXRSb29tSW5mb0lucHV0XCIsZW49XCJRdWVyeUNoYXRSb29tSW5mb091dHB1dFwiLHRuPVwiUnRjSW5wdXRcIixubj1cIlJ0Y1VzZXJMaXN0T3V0cHV0XCIscm49XCJTZXRVc2VyU3RhdHVzSW5wdXRcIixzbj1cIlJ0Y1NldERhdGFJbnB1dFwiLG9uPVwiUnRjVXNlclNldERhdGFJbnB1dFwiLGFuPVwiUnRjRGF0YUlucHV0XCIsdW49XCJSdGNTZXRPdXREYXRhSW5wdXRcIixjbj1cIk1DRm9sbG93SW5wdXRcIixobj1cIlJ0Y1Rva2VuT3V0cHV0XCIsbG49XCJSdGNRcnlPdXRwdXRcIixkbj1cIlJ0Y1FyeVVzZXJPdXREYXRhSW5wdXRcIixmbj1cIlJ0Y1VzZXJPdXREYXRhT3V0cHV0XCIscG49XCJSdGNRdWVyeUxpc3RJbnB1dFwiLGduPVwiUnRjUm9vbUluZm9PdXRwdXRcIixfbj1cIlJ0Y1ZhbHVlSW5mb1wiLHluPVwiUnRjS2V5RGVsZXRlSW5wdXRcIixtbj1cIkdldFFOdXBUb2tlbklucHV0XCIsdm49XCJHZXRRTnVwVG9rZW5PdXRwdXRcIixFbj1cIkdldFFOZG93bmxvYWRVcmxJbnB1dFwiLFRuPVwiR2V0RG93bmxvYWRVcmxJbnB1dFwiLEluPVwiR2V0UU5kb3dubG9hZFVybE91dHB1dFwiLENuPVwiR2V0RG93bmxvYWRVcmxPdXRwdXRcIixSbj1cIkNocm1LVkVudGl0eVwiLFNuPVwiU2V0Q2hybUtWXCIsTm49XCJTZXRDaHJtS1ZTXCIsT249XCJEZWxldGVDaHJtS1ZTXCIsTW49XCJDaHJtS1ZPdXRwdXRcIix3bj1cIkNocm1LVlNPdXRwdXRcIixBbj1cIkNocm1LVlNWZXJzaW9uRW50aXR5XCIsVW49XCJDaHJtS1ZTT3V0cHV0RW50aXR5XCIsYm49XCJRdWVyeUNocm1LVlwiLExuPVwiU2V0VXNlclNldHRpbmdJbnB1dFwiLFBuPVwiU2V0VXNlclNldHRpbmdPdXRwdXRcIixEbj1cIlB1bGxVc2VyU2V0dGluZ0lucHV0XCIsVm49XCJQdWxsVXNlclNldHRpbmdPdXRwdXRcIixrbj1cIlVzZXJTZXR0aW5nTm90aWZpY2F0aW9uXCIseG49XCJTZXNzaW9uUmVxXCIsQm49XCJTZXNzaW9uU3RhdGVzXCIsR249XCJTZXNzaW9uU3RhdGVcIixGbj1cIlNlc3Npb25TdGF0ZUl0ZW1cIixxbj1cIlNlc3Npb25TdGF0ZU1vZGlmeVJlcVwiLEtuPVwiU2Vzc2lvblN0YXRlTW9kaWZ5UmVzcFwiLEhuPVwiR3JwUmVhZFJlY2VpcHRNc2dcIixZbj1cIkdycFJlYWRSZWNlaXB0UXJ5UmVxXCIsam49XCJHcnBSZWFkUmVjZWlwdFFyeVJlc3BcIixRbj1cIkdycE1zZ1JlYWRVc2VyXCIsV249XCJTZXNzaW9uVGFnQWRkSW5wdXRcIixKbj1cIlNlc3Npb25UYWdJdGVtXCIsem49XCJTZXNzaW9uVGFnRGVsSW5wdXRcIixabj1cIlNlc3Npb25EaXNUYWdSZXFcIixYbj1cIlJlcG9ydFNES0lucHV0XCIsJG49XCJSZXBvcnRTREtPdXRwdXRcIixlaT1cIlVsdHJhR3JwUHVsbFNlc1wiLHRpPVwiVWx0cmFHcnBQdWxsTXNnXCIsbmk9XCJNc2dDaGFuZ2VSZXFcIixpaT1cIlF1ZXJ5TXNnQ2hhbmdlXCIscmk9XCJNc2dDaGFuZ2VcIixzaT1cIk1zZ0NoYW5nZUxpc3RcIixvaT1cIk1zZ1F1ZXJ5XCIsYWk9XCJNZXNzYWdlUXVlcnlJbmZvXCIsdWk9XCJNc2dRdWVyeUFja1wiLGNpPVwiT3BlcmF0ZVN0YXR1c1wiLGhpPVwiT3BlcmF0ZVN0YXR1c05vdGlmeVwiLGxpPVwiT3BlcmF0ZUluZm9cIixkaT1cIk9wZXJhdGVTdW1tYXJ5XCIsZmk9XCJSdGNOb3RpZnlNc2dcIixwaT1cIlJ0Y1B1bGxLVlwiLGdpPVwiUnRjS1ZPdXRwdXRcIixfaT1cIlJ0Y1F1ZXJ5VXNlckpvaW5lZElucHV0XCIseWk9XCJSdGNRdWVyeVVzZXJKb2luZWRPdXRwdXRcIixtaT1cIlJ0Y1ZpZXdlckpvaW5lZE91dHB1dFwiLHZpPVwiUnRjSW52aXRlSW5wdXRcIixFaT1cIlJ0Y0NhbmNlbEludml0ZUlucHV0XCIsVGk9XCJSdGNJbnZpdGVBbnN3ZXJJbnB1dFwiLElpPVwiUnRjRW5kSW52aXRlSW5wdXRcIixDaT1cIlNldFJ0Y1Jvb21JZElucHV0XCIsUmk9XCJTZXRSdGNSb29tSWRPdXRwdXRcIixTaT0oKE50PXt9KVtVdF09W1wic2Vzc2lvbklkXCIsXCJjbGFzc25hbWVcIixcImNvbnRlbnRcIixcInB1c2hUZXh0XCIsXCJ1c2VySWRcIixcImNvbmZpZ0ZsYWdcIixcImFwcERhdGFcIixcImV4dHJhQ29udGVudFwiLFwicHVzaEV4dFwiLFwiYnVzQ2hhbm5lbFwiXSxOdFtQdF09W1wibGlzdFwiLFwic3luY1RpbWVcIixcImZpbmlzaGVkXCJdLE50W0x0XT1bXCJmcm9tVXNlcklkXCIsXCJ0eXBlXCIsXCJncm91cElkXCIsXCJjbGFzc25hbWVcIixcImNvbnRlbnRcIixcImRhdGFUaW1lXCIsXCJzdGF0dXNcIixcIm1zZ0lkXCIsXCJleHRyYUNvbnRlbnRcIixcInB1c2hDb250ZW50XCIsXCJjb25maWdGbGFnXCIsXCJwdXNoRXh0XCIsXCJidXNDaGFubmVsXCJdLE50W2J0XT1bXCJ0aXRsZVwiLFwidGVtcGxhdGVJZE5vVXNlXCIsXCJwdXNoSWRcIixcInB1c2hDb25maWdzXCIsXCJ0ZW1wbGF0ZUlkXCJdLE50W0R0XT1bXCJub3RoaW5nXCJdLE50W1Z0XT1bXCJpbmJveFRpbWVcIixcInNlbmRib3hUaW1lXCIsXCJ0b3RhbFVucmVhZENvdW50XCJdLE50W2t0XT1bXCJzeW5jVGltZVwiLFwiaXNwb2xsaW5nXCIsXCJpc3dlYlwiLFwiaXNQdWxsU2VuZFwiLFwiaXNLZWVwaW5nXCIsXCJzZW5kQm94U3luY1RpbWVcIl0sTnRbeHRdPVtcInN5bmNUaW1lXCIsXCJjb3VudFwiXSxOdFtCdF09W1widHlwZVwiLFwidGltZVwiLFwiY2hybUlkXCJdLE50W0d0XT1bXCJ0YXJnZXRJZFwiLFwidGltZVwiLFwiY291bnRcIixcIm9yZGVyXCIsXCJidXNDaGFubmVsXCJdLE50W0Z0XT1bXCJsaXN0XCIsXCJzeW5jVGltZVwiLFwiaGFzTXNnXCJdLE50W3F0XT1bXCJ0eXBlXCIsXCJjb3VudFwiLFwic3RhcnRUaW1lXCIsXCJvcmRlclwiXSxOdFtLdF09W1wiaW5mb1wiLFwiaXNGaW5pc2hlZFwiXSxOdFtIdF09W1wic2Vzc2lvbnNcIl0sTnRbWXRdPVtcInR5cGVcIixcImNoYW5uZWxJZFwiLFwiYnVzQ2hhbm5lbFwiXSxOdFtqdF09W1wibm90aGluZ1wiXSxOdFtRdF09W1widHlwZVwiLFwibXNnXCIsXCJjb3VudFwiLFwiYnVzQ2hhbm5lbFwiLFwic3RhcnRUaW1lXCIsXCJlbmRUaW1lXCJdLE50W1d0XT1bXCJ0eXBlXCIsXCJjb252ZXJzYXRpb25JZFwiLFwibXNnc1wiLFwiYnVzQ2hhbm5lbFwiXSxOdFtKdF09W1widGFyZ2V0SWRcIixcImRhdGFUaW1lXCIsXCJjb252ZXJzYXRpb25UeXBlXCIsXCJidXNDaGFubmVsXCJdLE50W3p0XT1bXCJ0eXBlXCIsXCJtc2dUaW1lXCIsXCJjaGFubmVsSWRcIixcImJ1c0NoYW5uZWxcIl0sTnRbWnRdPVtcIm5vdGhpbmdcIl0sTnRbWHRdPVtcIm5vdGhpbmdcIixcInNlc3Npb25JZFwiLFwiam9pblRpbWVcIl0sTnRbJHRdPVtcImNvdW50XCIsXCJvcmRlclwiXSxOdFtlbl09W1widXNlclRvdGFsTnVtc1wiLFwidXNlckluZm9zXCJdLE50W21uXT1bXCJ0eXBlXCIsXCJrZXlcIixcImh0dHBNZXRob2RcIixcInF1ZXJ5U3RyaW5nXCJdLE50W0VuXT1bXCJ0eXBlXCIsXCJrZXlcIixcImZpbGVOYW1lXCJdLE50W1RuXT1bXCJ0eXBlXCIsXCJrZXlcIixcImZpbGVOYW1lXCJdLE50W3ZuXT1bXCJkZWFkbGluZVwiLFwidG9rZW5cIixcImJvc1Rva2VuXCIsXCJib3NEYXRlXCIsXCJwYXRoXCIsXCJvc3NrZXlJZFwiLFwib3NzUG9saWN5XCIsXCJvc3NTaWduXCIsXCJvc3NCdWNrZXROYW1lXCJdLE50W0luXT1bXCJkb3dubG9hZFVybFwiXSxOdFtDbl09W1wiZG93bmxvYWRVcmxcIl0sTnRbUm5dPVtcImtleVwiLFwidmFsdWVcIixcInN0YXR1c1wiLFwidGltZXN0YW1wXCIsXCJ1aWRcIixcInZlcnNpb25cIl0sTnRbU25dPVtcImVudHJ5XCIsXCJiTm90aWZ5XCIsXCJub3RpZmljYXRpb25cIixcInR5cGVcIl0sTnRbTm5dPVtcImVudHJ5XCIsXCJiTm90aWZ5XCIsXCJub3RpZmljYXRpb25cIixcInR5cGVcIl0sTnRbT25dPVtcImVudHJ5XCIsXCJiTm90aWZ5XCIsXCJub3RpZmljYXRpb25cIixcInR5cGVcIl0sTnRbTW5dPVtcImVudHJpZXNcIixcImJGdWxsVXBkYXRlXCIsXCJzeW5jVGltZVwiXSxOdFt3bl09W1widGltZXN0YW1wXCIsXCJlcnJvcktleXNcIixcImtleXNWZXJzaW9uXCJdLE50W0FuXT1bXCJ2ZXJzaW9uXCIsXCJrZXlcIl0sTnRbVW5dPVtcImtleVwiLFwiZXJyb3JDb2RlXCJdLE50W2JuXT1bXCJ0aW1lc3RhbXBcIl0sTnRbTG5dPVtcInZlcnNpb25cIixcInZhbHVlXCJdLE50W1BuXT1bXCJ2ZXJzaW9uXCIsXCJyZXNlcnZlXCJdLE50W0RuXT1bXCJ2ZXJzaW9uXCIsXCJyZXNlcnZlXCJdLE50W1ZuXT1bXCJpdGVtc1wiLFwidmVyc2lvblwiXSxOdC5Vc2VyU2V0dGluZ0l0ZW09W1widGFyZ2V0SWRcIixcInR5cGVcIixcImtleVwiLFwidmFsdWVcIixcInZlcnNpb25cIixcInN0YXR1c1wiLFwidGFnc1wiXSxOdFt4bl09W1widGltZVwiXSxOdFtCbl09W1widmVyc2lvblwiLFwic3RhdGVcIl0sTnRbR25dPVtcInR5cGVcIixcImNoYW5uZWxJZFwiLFwidGltZVwiLFwic3RhdGVJdGVtXCIsXCJidXNDaGFubmVsXCJdLE50W0ZuXT1bXCJzZXNzaW9uU3RhdGVUeXBlXCIsXCJ2YWx1ZVwiLFwidGFnc1wiXSxOdFtxbl09W1widmVyc2lvblwiLFwic3RhdGVcIl0sTnRbS25dPVtcInZlcnNpb25cIl0sTnRbSG5dPVtcIm1zZ0lkXCIsXCJidXNDaGFubmVsXCJdLE50W1luXT1bXCJtc2dJZFwiLFwiYnVzQ2hhbm5lbFwiXSxOdFtqbl09W1widG90YWxNZW1iZXJOdW1cIixcImxpc3RcIl0sTnRbUW5dPVtcInJlYWRUaW1lXCIsXCJ1c2VySWRcIl0sTnRbV25dPVtcInZlcnNpb25cIixcInRhZ3NcIl0sTnRbSm5dPVtcInRhZ0lkXCIsXCJuYW1lXCIsXCJjcmVhdGVkVGltZVwiLFwiaXNUb3BcIl0sTnRbem5dPVtcInZlcnNpb25cIixcInRhZ3NcIl0sTnRbWm5dPVtcInRhZ0lkXCJdLE50W2tuXT1bXCJ2ZXJzaW9uXCIsXCJyZXNlcnZlXCJdLE50W1huXT1bXCJzZGtJbmZvXCJdLE50WyRuXT1bXCJub3RoaW5nXCJdLE50W2VpXT1bXCJzeW5jVGltZVwiLFwiaXNFcmFzZU1zZ0NvbnRlbnRcIl0sTnRbdGldPVtcInN5bmNUaW1lXCJdLE50W25pXT1bXCJmcm9tVXNlcklkXCIsXCJ0YXJnZXRJZFwiLFwidHlwZVwiLFwiYnVzQ2hhbm5lbFwiLFwibXNnVUlEXCIsXCJtc2dUaW1lXCIsXCJjb250ZW50XCJdLE50W2lpXT1bXCJzeW5jVGltZVwiXSxOdFtzaV09W1wibGlzdFwiLFwic3luY1RpbWVcIixcImhhc05leHRcIl0sTnRbcmldPVtcInRhcmdldElkXCIsXCJ0eXBlXCIsXCJ0aW1lXCIsXCJjaGFuZ2VUeXBlXCIsXCJtc2dVSURcIixcIm1zZ1RpbWVcIixcImJ1c0NoYW5uZWxcIixcImlzQWRtaW5cIixcImlzRGVsXCIsXCJvcGVyYXRvcklkXCJdLE50W29pXT1bXCJ0YXJnZXRJZFwiLFwidHlwZVwiLFwicXVlcnlcIl0sTnRbYWldPVtcIm1zZ1RpbWVcIixcIm1zZ1VJRFwiLFwiYnVzQ2hhbm5lbFwiXSxOdFt1aV09W1wibGlzdFwiXSxOdFtjaV09W1widGFyZ2V0SWRcIixcInR5cGVcIixcIm9wVHlwZVwiLFwiYnVzQ2hhbm5lbFwiXSxOdFtoaV09W1widHlwZVwiLFwibm90aWZ5VHlwZVwiLFwiaW5mb1wiLFwic3VtbWFyeVwiXSxOdFtsaV09W1widGFyZ2V0SWRcIixcImJ1c0NoYW5uZWxcIixcInVzZXJJZFwiLFwib3BUeXBlXCIsXCJvcHRpbWVcIl0sTnRbZGldPVtcInRhcmdldElkXCIsXCJidXNDaGFubmVsXCIsXCJjb3VudFwiLFwib3BUeXBlXCJdLE50W3RuXT1bXCJyb29tVHlwZVwiLFwiYnJvYWRjYXN0VHlwZVwiLFwiZXh0cmFJbm5lckRhdGFcIixcIm5lZWRTeXNDaGF0cm9vbVwiLFwiaWRlbnRpdHlDaGFuZ2VUeXBlXCIsXCJqb2luVHlwZVwiXSxOdFtubl09W1widXNlcnNcIixcInRva2VuXCIsXCJzZXNzaW9uSWRcIixcInJvb21JbmZvXCJdLE50W3JuXT1bXCJzdGF0dXNcIl0sTnRbc25dPVtcImludGVyaW9yXCIsXCJ0YXJnZXRcIixcImtleVwiLFwidmFsdWVcIixcIm9iamVjdE5hbWVcIixcImNvbnRlbnRcIl0sTnRbb25dPVtcInZhbHVlSW5mb1wiLFwib2JqZWN0TmFtZVwiLFwiY29udGVudFwiXSxOdFthbl09W1wiaW50ZXJpb3JcIixcInRhcmdldFwiLFwia2V5XCIsXCJvYmplY3ROYW1lXCIsXCJjb250ZW50XCJdLE50W3VuXT1bXCJ0YXJnZXRcIixcInZhbHVlSW5mb1wiLFwib2JqZWN0TmFtZVwiLFwiY29udGVudFwiXSxOdFtjbl09W1wic3RhdGVcIl0sTnRbaG5dPVtcInJ0Y1Rva2VuXCJdLE50W2xuXT1bXCJvdXRJbmZvXCJdLE50W2RuXT1bXCJ1c2VySWRcIl0sTnRbZm5dPVtcInVzZXJcIl0sTnRbcG5dPVtcIm9yZGVyXCJdLE50W2duXT1bXCJyb29tSWRcIixcInJvb21EYXRhXCIsXCJ1c2VyQ291bnRcIixcImxpc3RcIl0sTnRbX25dPVtcImtleVwiLFwidmFsdWVcIl0sTnRbeW5dPVtcImtleVwiXSxOdFtmaV09W1widHlwZVwiLFwidGltZVwiLFwicm9vbUlkXCJdLE50W3BpXT1bXCJ0aW1lc3RhbXBcIixcInJvb21JZFwiXSxOdFtnaV09W1wiZW50cmllc1wiLFwiYkZ1bGxVcGRhdGVcIixcInN5bmNUaW1lXCJdLE50W19pXT1bXCJ1c2VySWRcIl0sTnRbeWldPVtcImluZm9cIl0sTnRbdmldPVtcImludml0ZWRVc2VySWRcIixcInRpbWVvdXRUaW1lXCIsXCJpbnZpdGVkUm9vbUlkXCIsXCJpbnZpdGVJbmZvXCIsXCJpbnZpdGVTZXNzaW9uSWRcIl0sTnRbRWldPVtcImludml0ZWRVc2VySWRcIixcImludml0ZWRSb29tSWRcIixcImludml0ZUluZm9cIixcImludml0ZVNlc3Npb25JZFwiXSxOdFtUaV09W1wiaW52aXRlVXNlcklEXCIsXCJhbnN3ZXJDb2RlXCIsXCJpbnZpdGVSb29tSWRcIixcImludml0ZVNlc3Npb25JZFwiLFwiY29udGVudFwiLFwia2V5XCIsXCJ2YWx1ZVwiXSxOdFtJaV09W1wiaW52aXRlUm9vbUlkXCIsXCJpbnZpdGVTZXNzaW9uSWRcIixcImludml0ZUNvbnRlbnRcIixcImludml0ZVJvb21LZXlzXCJdLE50W0NpXT1bXCJydGNSb29tSWRcIl0sTnRbUmldPVtcIm5vdGhpbmdcIl0sTnQpLE5pPXt9LE9pPWZ1bmN0aW9uKGUpe3ZhciB0PVNpW2VdO05pW2VdPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPXt9LG49e2dldEFycmF5RGF0YTpmdW5jdGlvbigpe3JldHVybiBlfX0saT1mdW5jdGlvbihpKXt2YXIgcj10W2ldLHM9XCJzZXRcIitEKHIsMCwxKTtuW3NdPWZ1bmN0aW9uKHQpe2Vbcl09dH19LHI9MDtyPHQubGVuZ3RoO3IrKylpKHIpO3JldHVybiBufSxOaVtlXS5kZWNvZGU9ZnVuY3Rpb24oZSl7dmFyIHQ9e307SihlKSYmKGU9SlNPTi5wYXJzZShlKSk7dmFyIG49ZnVuY3Rpb24obil7dmFyIGk9XCJnZXRcIitEKG4sMCwxKTt0W25dPWVbbl0sdFtpXT1mdW5jdGlvbigpe3JldHVybiBlW25dfX07Zm9yKHZhciBpIGluIGUpbihpKTtyZXR1cm4gdH19O2Zvcih2YXIgTWkgaW4gU2kpT2koTWkpO05pLmdldE1vZHVsZT1mdW5jdGlvbihlKXtyZXR1cm4gTmlbZV0oKX07dmFyIHdpPVwiXFxucGFja2FnZSBNb2R1bGVzO1xcbm1lc3NhZ2UgcHJvYnVmIHtcXG4gIG1lc3NhZ2UgXCIrcm4rXCJcXG4gIHtcXG4gICAgb3B0aW9uYWwgaW50MzIgc3RhdHVzPTE7XFxuICB9XFxuXFxuICBtZXNzYWdlIFNldFVzZXJTdGF0dXNPdXRwdXRcXG4gIHtcXG4gICAgb3B0aW9uYWwgaW50MzIgbm90aGluZz0xO1xcbiAgfVxcblxcbiAgbWVzc2FnZSBHZXRVc2VyU3RhdHVzSW5wdXRcXG4gIHtcXG4gICAgb3B0aW9uYWwgaW50MzIgbm90aGluZz0xO1xcbiAgfVxcblxcbiAgbWVzc2FnZSBHZXRVc2VyU3RhdHVzT3V0cHV0XFxuICB7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBzdGF0dXM9MTtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIHN1YlVzZXJJZD0yO1xcbiAgfVxcblxcbiAgbWVzc2FnZSBTdWJVc2VyU3RhdHVzSW5wdXRcXG4gIHtcXG4gICAgcmVwZWF0ZWQgc3RyaW5nIHVzZXJpZCA9MTtcXG4gIH1cXG5cXG4gIG1lc3NhZ2UgU3ViVXNlclN0YXR1c091dHB1dFxcbiAge1xcbiAgICBvcHRpb25hbCBpbnQzMiBub3RoaW5nPTE7XFxuICB9XFxuICBtZXNzYWdlIFZvaXBEeW5hbWljSW5wdXRcXG4gIHtcXG4gICAgcmVxdWlyZWQgaW50MzIgIGVuZ2luZVR5cGUgPSAxO1xcbiAgICByZXF1aXJlZCBzdHJpbmcgY2hhbm5lbE5hbWUgPSAyO1xcbiAgICBvcHRpb25hbCBzdHJpbmcgY2hhbm5lbEV4dHJhID0gMztcXG4gIH1cXG5cXG4gIG1lc3NhZ2UgVm9pcER5bmFtaWNPdXRwdXRcXG4gIHtcXG4gICAgICByZXF1aXJlZCBzdHJpbmcgZHluYW1pY0tleT0xO1xcbiAgfVxcbiAgbWVzc2FnZSBcIitCdCtcIiB7XFxuICAgIHJlcXVpcmVkIGludDMyIHR5cGUgPSAxO1xcbiAgICBvcHRpb25hbCBpbnQ2NCB0aW1lID0gMjtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIGNocm1JZD0zO1xcbiAgfVxcbiAgbWVzc2FnZSBcIitrdCtcIiB7XFxuICAgIHJlcXVpcmVkIGludDY0IHN5bmNUaW1lID0gMTtcXG4gICAgcmVxdWlyZWQgYm9vbCBpc3BvbGxpbmcgPSAyO1xcbiAgICBvcHRpb25hbCBib29sIGlzd2ViPTM7XFxuICAgIG9wdGlvbmFsIGJvb2wgaXNQdWxsU2VuZD00O1xcbiAgICBvcHRpb25hbCBib29sIGlzS2VlcGluZz01O1xcbiAgICBvcHRpb25hbCBpbnQ2NCBzZW5kQm94U3luY1RpbWU9NjtcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrVXQrXCIge1xcbiAgICByZXF1aXJlZCBpbnQzMiBzZXNzaW9uSWQgPSAxO1xcbiAgICByZXF1aXJlZCBzdHJpbmcgY2xhc3NuYW1lID0gMjtcXG4gICAgcmVxdWlyZWQgYnl0ZXMgY29udGVudCA9IDM7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBwdXNoVGV4dCA9IDQ7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBhcHBEYXRhID0gNTtcXG4gICAgcmVwZWF0ZWQgc3RyaW5nIHVzZXJJZCA9IDY7XFxuICAgIG9wdGlvbmFsIGludDY0IGRlbE1zZ1RpbWUgPSA3O1xcbiAgICBvcHRpb25hbCBzdHJpbmcgZGVsTXNnSWQgPSA4O1xcbiAgICBvcHRpb25hbCBpbnQzMiBjb25maWdGbGFnID0gOTtcXG4gICAgb3B0aW9uYWwgaW50NjQgY2xpZW50VW5pcXVlSWQgPSAxMDtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIGV4dHJhQ29udGVudCA9IDExO1xcbiAgICBvcHRpb25hbCBQdXNoRXh0cmEgcHVzaEV4dCA9IDEyO1xcbiAgICBvcHRpb25hbCBzdHJpbmcgYnVzQ2hhbm5lbCA9IDEzOyAvLyDor6Xmtojmga/miYDlsZ7kvJror53nmoTkuJrliqHmoIfor4ZcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrYnQrXCIge1xcbiAgICBvcHRpb25hbCBzdHJpbmcgdGl0bGUgPSAxO1xcbiAgICBvcHRpb25hbCBpbnQzMiAgdGVtcGxhdGVJZE5vVXNlPSAyO1xcbiAgICBvcHRpb25hbCBzdHJpbmcgcHVzaElkID0gMztcXG4gICAgb3B0aW9uYWwgc3RyaW5nIHB1c2hDb25maWdzID0gNDtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIHRlbXBsYXRlSWQgPSA1O1xcbiAgfVxcbiAgbWVzc2FnZSBcIitQdCtcIiB7XFxuICAgIHJlcGVhdGVkIERvd25TdHJlYW1NZXNzYWdlIGxpc3QgPSAxO1xcbiAgICByZXF1aXJlZCBpbnQ2NCBzeW5jVGltZSA9IDI7XFxuICAgIG9wdGlvbmFsIGJvb2wgZmluaXNoZWQgPSAzO1xcbiAgfVxcbiAgbWVzc2FnZSBcIitMdCtcIiB7XFxuICAgIHJlcXVpcmVkIHN0cmluZyBmcm9tVXNlcklkID0gMTtcXG4gICAgcmVxdWlyZWQgQ2hhbm5lbFR5cGUgdHlwZSA9IDI7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBncm91cElkID0gMztcXG4gICAgcmVxdWlyZWQgc3RyaW5nIGNsYXNzbmFtZSA9IDQ7XFxuICAgIHJlcXVpcmVkIGJ5dGVzIGNvbnRlbnQgPSA1O1xcbiAgICByZXF1aXJlZCBpbnQ2NCBkYXRhVGltZSA9IDY7XFxuICAgIHJlcXVpcmVkIGludDY0IHN0YXR1cyA9IDc7XFxuICAgIG9wdGlvbmFsIGludDY0IGV4dHJhID0gODtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIG1zZ0lkID0gOTtcXG4gICAgb3B0aW9uYWwgaW50MzIgZGlyZWN0aW9uID0gMTA7XFxuICAgIG9wdGlvbmFsIGludDMyIHBsYW50Zm9ybSA9MTE7XFxuICAgIG9wdGlvbmFsIGludDMyIGlzUmVtb3ZlZCA9IDEyO1xcbiAgICBvcHRpb25hbCBzdHJpbmcgc291cmNlID0gMTM7XFxuICAgIG9wdGlvbmFsIGludDY0IGNsaWVudFVuaXF1ZUlkID0gMTQ7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBleHRyYUNvbnRlbnQgPSAxNTtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIHB1c2hDb250ZW50ID0gMTY7XFxuICAgIG9wdGlvbmFsIGludDMyIGNvbmZpZ0ZsYWcgPSAxNztcXG4gICAgb3B0aW9uYWwgUHVzaEV4dHJhIHB1c2hFeHQgPSAxODtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIGJ1c0NoYW5uZWwgPSAxOTsgLy8g6K+l5raI5oGv5omA5bGe5Lya6K+d55qE5Lia5Yqh5qCH6K+G77yM6ZmQ5Yi2MjDlrZfnrKbku6XlhoVcXG4gICAgb3B0aW9uYWwgaW50NjQgZXh0U3RhdHVzID0gMjA7IC8vIOa2iOaBr+eahOaJqeWxleagh+iusCDnrKww5L2NLOihqOekuumAgei+vueKtuaAgTogMHgwMSDooajnpLrlt7LpgIHovr475pat5qGjOiAweDAyIOihqOekuuaYr+WQpumcgOimgeaJp+ihjOaWreaho+etlueVpTsg5raI5oGv5L+u5pS5OiAweDA0IOaLieWPluWOhuWPsua2iOaBr+aXtuihqOekuuivpea2iOaBr+aYr+WQpuS/ruaUuei/h1xcbiAgfVxcbiAgZW51bSBDaGFubmVsVHlwZSB7XFxuICAgIFBFUlNPTiA9IDE7XFxuICAgIFBFUlNPTlMgPSAyO1xcbiAgICBHUk9VUCA9IDM7XFxuICAgIFRFTVBHUk9VUCA9IDQ7XFxuICAgIENVU1RPTUVSU0VSVklDRSA9IDU7XFxuICAgIE5PVElGWSA9IDY7XFxuICAgIE1DPTc7XFxuICAgIE1QPTg7XFxuICAgIFVMVFJBR1JPVVAgPSAxMDtcXG4gIH1cXG4gIG1lc3NhZ2UgQ3JlYXRlRGlzY3Vzc2lvbklucHV0IHtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIG5hbWUgPSAxO1xcbiAgfVxcbiAgbWVzc2FnZSBDcmVhdGVEaXNjdXNzaW9uT3V0cHV0IHtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIGlkID0gMTtcXG4gIH1cXG4gIG1lc3NhZ2UgQ2hhbm5lbEludml0YXRpb25JbnB1dCB7XFxuICAgIHJlcGVhdGVkIHN0cmluZyB1c2VycyA9IDE7XFxuICB9XFxuICBtZXNzYWdlIExlYXZlQ2hhbm5lbElucHV0IHtcXG4gICAgcmVxdWlyZWQgaW50MzIgbm90aGluZyA9IDE7XFxuICB9XFxuICBtZXNzYWdlIENoYW5uZWxFdmljdGlvbklucHV0IHtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIHVzZXIgPSAxO1xcbiAgfVxcbiAgbWVzc2FnZSBSZW5hbWVDaGFubmVsSW5wdXQge1xcbiAgICByZXF1aXJlZCBzdHJpbmcgbmFtZSA9IDE7XFxuICB9XFxuICBtZXNzYWdlIENoYW5uZWxJbmZvSW5wdXQge1xcbiAgICByZXF1aXJlZCBpbnQzMiBub3RoaW5nID0gMTtcXG4gIH1cXG4gIG1lc3NhZ2UgQ2hhbm5lbEluZm9PdXRwdXQge1xcbiAgICByZXF1aXJlZCBDaGFubmVsVHlwZSB0eXBlID0gMTtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIGNoYW5uZWxJZCA9IDI7XFxuICAgIHJlcXVpcmVkIHN0cmluZyBjaGFubmVsTmFtZSA9IDM7XFxuICAgIHJlcXVpcmVkIHN0cmluZyBhZG1pblVzZXJJZCA9IDQ7XFxuICAgIHJlcGVhdGVkIHN0cmluZyBmaXJzdFRlblVzZXJJZHMgPSA1O1xcbiAgICByZXF1aXJlZCBpbnQzMiBvcGVuU3RhdHVzID0gNjtcXG4gIH1cXG4gIG1lc3NhZ2UgQ2hhbm5lbEluZm9zSW5wdXQge1xcbiAgICByZXF1aXJlZCBpbnQzMiBwYWdlID0gMTtcXG4gICAgb3B0aW9uYWwgaW50MzIgbnVtYmVyID0gMjtcXG4gIH1cXG4gIG1lc3NhZ2UgQ2hhbm5lbEluZm9zT3V0cHV0IHtcXG4gICAgcmVwZWF0ZWQgQ2hhbm5lbEluZm9PdXRwdXQgY2hhbm5lbHMgPSAxO1xcbiAgICByZXF1aXJlZCBpbnQzMiB0b3RhbCA9IDI7XFxuICB9XFxuICBtZXNzYWdlIE1lbWJlckluZm8ge1xcbiAgICByZXF1aXJlZCBzdHJpbmcgdXNlcklkID0gMTtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIHVzZXJOYW1lID0gMjtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIHVzZXJQb3J0cmFpdCA9IDM7XFxuICAgIHJlcXVpcmVkIHN0cmluZyBleHRlbnNpb24gPSA0O1xcbiAgfVxcbiAgbWVzc2FnZSBHcm91cE1lbWJlcnNJbnB1dCB7XFxuICAgIHJlcXVpcmVkIGludDMyIHBhZ2UgPSAxO1xcbiAgICBvcHRpb25hbCBpbnQzMiBudW1iZXIgPSAyO1xcbiAgfVxcbiAgbWVzc2FnZSBHcm91cE1lbWJlcnNPdXRwdXQge1xcbiAgICByZXBlYXRlZCBNZW1iZXJJbmZvIG1lbWJlcnMgPSAxO1xcbiAgICByZXF1aXJlZCBpbnQzMiB0b3RhbCA9IDI7XFxuICB9XFxuICBtZXNzYWdlIEdldFVzZXJJbmZvSW5wdXQge1xcbiAgICByZXF1aXJlZCBpbnQzMiBub3RoaW5nID0gMTtcXG4gIH1cXG4gIG1lc3NhZ2UgR2V0VXNlckluZm9PdXRwdXQge1xcbiAgICByZXF1aXJlZCBzdHJpbmcgdXNlcklkID0gMTtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIHVzZXJOYW1lID0gMjtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIHVzZXJQb3J0cmFpdCA9IDM7XFxuICB9XFxuICBtZXNzYWdlIEdldFNlc3Npb25JZElucHV0IHtcXG4gICAgcmVxdWlyZWQgaW50MzIgbm90aGluZyA9IDE7XFxuICB9XFxuICBtZXNzYWdlIEdldFNlc3Npb25JZE91dHB1dCB7XFxuICAgIHJlcXVpcmVkIGludDMyIHNlc3Npb25JZCA9IDE7XFxuICB9XFxuICBlbnVtIEZpbGVUeXBlIHtcXG4gICAgaW1hZ2UgPSBcIitXLklNQUdFK1wiO1xcbiAgICBhdWRpbyA9IFwiK1cuQVVESU8rXCI7XFxuICAgIHZpZGVvID0gXCIrVy5WSURFTytcIjtcXG4gICAgZmlsZSA9IFwiK1cuRklMRStcIjtcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrbW4rXCIge1xcbiAgICByZXF1aXJlZCBGaWxlVHlwZSB0eXBlID0gMTtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIGtleSA9IDI7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBodHRwTWV0aG9kID0gMztcXG4gICAgb3B0aW9uYWwgc3RyaW5nIHF1ZXJ5U3RyaW5nID0gNDtcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrRW4rXCIge1xcbiAgICByZXF1aXJlZCBGaWxlVHlwZSB0eXBlID0gMTtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIGtleSA9IDI7XFxuICAgIG9wdGlvbmFsIHN0cmluZyAgZmlsZU5hbWUgPSAzO1xcbiAgfVxcbiAgbWVzc2FnZSBcIitUbitcIiB7XFxuICAgIHJlcXVpcmVkIEZpbGVUeXBlIHR5cGUgPSAxO1xcbiAgICByZXF1aXJlZCBzdHJpbmcga2V5ID0gMjtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIGZpbGVOYW1lID0gMztcXG4gICB9XFxuICBtZXNzYWdlIFwiK3ZuK1wiIHtcXG4gICAgcmVxdWlyZWQgaW50NjQgZGVhZGxpbmUgPSAxO1xcbiAgICByZXF1aXJlZCBzdHJpbmcgdG9rZW4gPSAyO1xcbiAgICBvcHRpb25hbCBzdHJpbmcgYm9zVG9rZW4gPSAzO1xcbiAgICBvcHRpb25hbCBzdHJpbmcgYm9zRGF0ZSA9IDQ7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBwYXRoID0gNTtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIG9zc2tleUlkID0gNjtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIG9zc1BvbGljeSA9IDc7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBvc3NTaWduID0gODtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIG9zc0J1Y2tldE5hbWUgPSA5O1xcbiAgICBvcHRpb25hbCBzdHJpbmcgczNDcmVkZW50aWFsID0gMTA7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBzM0FsZ29yaXRobSA9IDExO1xcbiAgICBvcHRpb25hbCBzdHJpbmcgczNEYXRlID0gMTI7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBzM1BvbGljeSA9IDEzO1xcbiAgICBvcHRpb25hbCBzdHJpbmcgczNTaWduYXR1cmUgPSAxNDtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIHMzQnVja2V0TmFtZSA9IDE1O1xcbiAgICBvcHRpb25hbCBzdHJpbmcgc3RjQXV0aG9yaXphdGlvbiA9IDE2O1xcbiAgICBvcHRpb25hbCBzdHJpbmcgc3RjQ29udGVudFNoYTI1NiA9IDE3O1xcbiAgICBvcHRpb25hbCBzdHJpbmcgc3RjRGF0ZSA9IDE4O1xcbiAgICBvcHRpb25hbCBzdHJpbmcgc3RjQnVja2V0TmFtZSA9IDE5O1xcbiAgfVxcbiAgbWVzc2FnZSBcIitJbitcIiB7XFxuICAgIHJlcXVpcmVkIHN0cmluZyBkb3dubG9hZFVybCA9IDE7XFxuICB9XFxuICBtZXNzYWdlIFwiK0NuK1wiIHtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIGRvd25sb2FkVXJsID0gMTtcXG4gIH1cXG4gIG1lc3NhZ2UgQWRkMkJsYWNrTGlzdElucHV0IHtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIHVzZXJJZCA9IDE7XFxuICB9XFxuICBtZXNzYWdlIFJlbW92ZUZyb21CbGFja0xpc3RJbnB1dCB7XFxuICAgIHJlcXVpcmVkIHN0cmluZyB1c2VySWQgPSAxO1xcbiAgfVxcbiAgbWVzc2FnZSBRdWVyeUJsYWNrTGlzdElucHV0IHtcXG4gICAgcmVxdWlyZWQgaW50MzIgbm90aGluZyA9IDE7XFxuICB9XFxuICBtZXNzYWdlIFF1ZXJ5QmxhY2tMaXN0T3V0cHV0IHtcXG4gICAgcmVwZWF0ZWQgc3RyaW5nIHVzZXJJZHMgPSAxO1xcbiAgfVxcbiAgbWVzc2FnZSBCbGFja0xpc3RTdGF0dXNJbnB1dCB7XFxuICAgIHJlcXVpcmVkIHN0cmluZyB1c2VySWQgPSAxO1xcbiAgfVxcbiAgbWVzc2FnZSBCbG9ja1B1c2hJbnB1dCB7XFxuICAgIHJlcXVpcmVkIHN0cmluZyBibG9ja2VlSWQgPSAxO1xcbiAgfVxcbiAgbWVzc2FnZSBNb2RpZnlQZXJtaXNzaW9uSW5wdXQge1xcbiAgICByZXF1aXJlZCBpbnQzMiBvcGVuU3RhdHVzID0gMTtcXG4gIH1cXG4gIG1lc3NhZ2UgR3JvdXBJbnB1dCB7XFxuICAgIHJlcGVhdGVkIEdyb3VwSW5mbyBncm91cEluZm8gPSAxO1xcbiAgfVxcbiAgbWVzc2FnZSBHcm91cE91dHB1dCB7XFxuICAgIHJlcXVpcmVkIGludDMyIG5vdGhpbmcgPSAxO1xcbiAgfVxcbiAgbWVzc2FnZSBHcm91cEluZm8ge1xcbiAgICByZXF1aXJlZCBzdHJpbmcgaWQgPSAxO1xcbiAgICByZXF1aXJlZCBzdHJpbmcgbmFtZSA9IDI7XFxuICB9XFxuICBtZXNzYWdlIEdyb3VwSGFzaElucHV0IHtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIHVzZXJJZCA9IDE7XFxuICAgIHJlcXVpcmVkIHN0cmluZyBncm91cEhhc2hDb2RlID0gMjtcXG4gIH1cXG4gIG1lc3NhZ2UgR3JvdXBIYXNoT3V0cHV0IHtcXG4gICAgcmVxdWlyZWQgR3JvdXBIYXNoVHlwZSByZXN1bHQgPSAxO1xcbiAgfVxcbiAgZW51bSBHcm91cEhhc2hUeXBlIHtcXG4gICAgZ3JvdXBfc3VjY2VzcyA9IDB4MDA7XFxuICAgIGdyb3VwX2ZhaWx1cmUgPSAweDAxO1xcbiAgfVxcbiAgbWVzc2FnZSBcIitadCtcIiB7XFxuICAgIHJlcXVpcmVkIGludDMyIG5vdGhpbmcgPSAxO1xcbiAgfVxcbiAgbWVzc2FnZSBcIitYdCtcIiB7XFxuICAgIHJlcXVpcmVkIGludDMyIG5vdGhpbmcgPSAxO1xcbiAgICBvcHRpb25hbCBzdHJpbmcgc2Vzc2lvbklkID0gMjtcXG4gICAgb3B0aW9uYWwgaW50NjQgam9pblRpbWUgPSAzO1xcbiAgfVxcbiAgbWVzc2FnZSBcIit4dCtcIiB7XFxuICAgIHJlcXVpcmVkIGludDY0IHN5bmNUaW1lID0gMTtcXG4gICAgcmVxdWlyZWQgaW50MzIgY291bnQgPSAyO1xcbiAgfVxcblxcbiAgbWVzc2FnZSBDaHJtUHVsbE1zZ05ld1xcbiAge1xcbiAgICByZXF1aXJlZCBpbnQzMiBjb3VudCA9IDE7XFxuICAgIHJlcXVpcmVkIGludDY0IHN5bmNUaW1lID0gMjtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIGNocm1JZD0zO1xcbiAgfVxcbiAgbWVzc2FnZSBcIitxdCtcIlxcbiAge1xcbiAgICBvcHRpb25hbCBDaGFubmVsVHlwZSB0eXBlID0gMTtcXG4gICAgb3B0aW9uYWwgaW50MzIgY291bnQgPSAyO1xcbiAgICBvcHRpb25hbCBpbnQ2NCBzdGFydFRpbWUgPSAzO1xcbiAgICBvcHRpb25hbCBpbnQzMiBvcmRlciA9IDQ7XFxuICB9XFxuICBtZXNzYWdlIFwiK1F0K1wiXFxuICB7XFxuICAgIHJlcXVpcmVkIENoYW5uZWxUeXBlIHR5cGUgPSAxO1xcbiAgICBvcHRpb25hbCBEb3duU3RyZWFtTWVzc2FnZSBtc2cgPTI7XFxuICAgIG9wdGlvbmFsIGludDMyIGNvdW50ID0gMztcXG4gICAgcmVwZWF0ZWQgc3RyaW5nIGJ1c0NoYW5uZWwgPSA0O1xcbiAgICBvcHRpb25hbCBpbnQ2NCBzdGFydFRpbWUgPSA1O1xcbiAgICBvcHRpb25hbCBpbnQ2NCBlbmRUaW1lID0gNjtcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrS3QrXCJcXG4gIHtcXG4gICAgcmVwZWF0ZWQgUmVsYXRpb25JbmZvIGluZm8gPSAxO1xcbiAgICBvcHRpb25hbCBib29sIGlzRmluaXNoZWQgPSAyOy8v5piv5ZCm57uT5p2fXFxuICB9XFxuICBtZXNzYWdlIFJlbGF0aW9uSW5mb1xcbiAge1xcbiAgICByZXF1aXJlZCBDaGFubmVsVHlwZSB0eXBlID0gMTtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIHVzZXJJZCA9IDI7XFxuICAgIG9wdGlvbmFsIERvd25TdHJlYW1NZXNzYWdlIG1zZyA9MztcXG4gICAgb3B0aW9uYWwgaW50NjQgcmVhZE1zZ1RpbWU9IDQ7XFxuICAgIG9wdGlvbmFsIGludDY0IHVucmVhZENvdW50PSA1O1xcbiAgICBvcHRpb25hbCBzdHJpbmcgYnVzQ2hhbm5lbCA9IDY7Ly/or6Xmtojmga/miYDlsZ7kvJror53nmoTkuJrliqHmoIfor4ZcXG4gICAgb3B0aW9uYWwgaW50NjQgdmVyc2lvblRpbWUgPSA3Oy8v5Lya6K+d6aG55Y+Y5pu05pe26Ze05oiz77yM5rOo5oSPOumdnuaOkuW6j+aXtumXtOaIs1xcbiAgICBvcHRpb25hbCBpbnQ2NCByZW1pbmRDb3VudCA9IDg7Ly/ooqtA55qE5pyq6K+75pWwXFxuICB9XFxuICBtZXNzYWdlIFJlbGF0aW9uSW5mb1JlYWRUaW1lXFxuICB7XFxuICAgIHJlcXVpcmVkIENoYW5uZWxUeXBlIHR5cGUgPSAxO1xcbiAgICByZXF1aXJlZCBpbnQ2NCByZWFkTXNnVGltZT0gMjtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIHRhcmdldElkID0gMztcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrSnQrXCJcXG4gIHtcXG4gICAgICByZXF1aXJlZCBzdHJpbmcgdGFyZ2V0SWQgPSAxO1xcbiAgICAgIHJlcXVpcmVkIGludDY0IGRhdGFUaW1lID0gMjtcXG4gICAgICBvcHRpb25hbCBpbnQzMiBjb252ZXJzYXRpb25UeXBlPSAzO1xcbiAgICAgIG9wdGlvbmFsIHN0cmluZyBidXNDaGFubmVsID0gNDsgLy/or6Xmtojmga/miYDlsZ7kvJror53nmoTkuJrliqHmoIfor4bvvIzpmZDliLYyMOWtl+espuS7peWGhVxcbiAgfVxcbiAgbWVzc2FnZSBIaXN0b3J5TWVzc2FnZUlucHV0XFxuICB7XFxuICAgIHJlcXVpcmVkIHN0cmluZyB0YXJnZXRJZCA9IDE7XFxuICAgIHJlcXVpcmVkIGludDY0IGRhdGFUaW1lID0yO1xcbiAgICByZXF1aXJlZCBpbnQzMiBzaXplICA9IDM7XFxuICB9XFxuXFxuICBtZXNzYWdlIEhpc3RvcnlNZXNzYWdlc091cHV0XFxuICB7XFxuICAgIHJlcGVhdGVkIERvd25TdHJlYW1NZXNzYWdlIGxpc3QgPSAxO1xcbiAgICByZXF1aXJlZCBpbnQ2NCBzeW5jVGltZSA9IDI7XFxuICAgIHJlcXVpcmVkIGludDMyIGhhc01zZyA9IDM7XFxuICB9XFxuICBtZXNzYWdlIFwiKyR0K1wiXFxuICB7XFxuICAgIHJlcXVpcmVkIGludDMyIGNvdW50PSAxO1xcbiAgICBvcHRpb25hbCBpbnQzMiBvcmRlcj0gMjtcXG4gIH1cXG5cXG4gIG1lc3NhZ2UgXCIrZW4rXCJcXG4gIHtcXG4gICAgb3B0aW9uYWwgaW50MzIgdXNlclRvdGFsTnVtcyA9IDE7XFxuICAgIHJlcGVhdGVkIENocm1NZW1iZXIgdXNlckluZm9zID0gMjtcXG4gIH1cXG4gIG1lc3NhZ2UgQ2hybU1lbWJlclxcbiAge1xcbiAgICByZXF1aXJlZCBpbnQ2NCB0aW1lID0gMTtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIGlkID0gMjtcXG4gIH1cXG4gIG1lc3NhZ2UgTVBGb2xsb3dJbnB1dFxcbiAge1xcbiAgICByZXF1aXJlZCBzdHJpbmcgaWQgPSAxO1xcbiAgfVxcblxcbiAgbWVzc2FnZSBNUEZvbGxvd091dHB1dFxcbiAge1xcbiAgICByZXF1aXJlZCBpbnQzMiBub3RoaW5nID0gMTtcXG4gICAgb3B0aW9uYWwgTXBJbmZvIGluZm8gPTI7XFxuICB9XFxuXFxuICBtZXNzYWdlIFwiK2NuK1wiXFxuICB7XFxuICAgIHJlcXVpcmVkIHN0cmluZyBzdGF0ZSA9IDE7XFxuICB9XFxuXFxuICBtZXNzYWdlIE1DRm9sbG93T3V0cHV0XFxuICB7XFxuICAgIHJlcXVpcmVkIGludDMyIG5vdGhpbmcgPSAxO1xcbiAgICBvcHRpb25hbCBNcEluZm8gaW5mbyA9MjtcXG4gIH1cXG5cXG4gIG1lc3NhZ2UgTXBJbmZvXFxuICB7XFxuICAgIHJlcXVpcmVkIHN0cmluZyBtcGlkPTE7XFxuICAgIHJlcXVpcmVkIHN0cmluZyBuYW1lID0gMjtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIHR5cGUgPSAzO1xcbiAgICByZXF1aXJlZCBpbnQ2NCB0aW1lPTQ7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBwb3J0cmFpdFVybD01O1xcbiAgICBvcHRpb25hbCBzdHJpbmcgZXh0cmEgPTY7XFxuICB9XFxuXFxuICBtZXNzYWdlIFNlYXJjaE1wSW5wdXRcXG4gIHtcXG4gICAgcmVxdWlyZWQgaW50MzIgdHlwZT0xO1xcbiAgICByZXF1aXJlZCBzdHJpbmcgaWQ9MjtcXG4gIH1cXG5cXG4gIG1lc3NhZ2UgU2VhcmNoTXBPdXRwdXRcXG4gIHtcXG4gICAgcmVxdWlyZWQgaW50MzIgbm90aGluZz0xO1xcbiAgICByZXBlYXRlZCBNcEluZm8gaW5mbyA9IDI7XFxuICB9XFxuXFxuICBtZXNzYWdlIFB1bGxNcElucHV0XFxuICB7XFxuICAgIHJlcXVpcmVkIGludDY0IHRpbWU9MTtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIG1waWQ9MjtcXG4gIH1cXG5cXG4gIG1lc3NhZ2UgUHVsbE1wT3V0cHV0XFxuICB7XFxuICAgIHJlcXVpcmVkIGludDMyIHN0YXR1cz0xO1xcbiAgICByZXBlYXRlZCBNcEluZm8gaW5mbyA9IDI7XFxuICB9XFxuICBtZXNzYWdlIFwiK0d0K1wiXFxuICB7XFxuICAgIG9wdGlvbmFsIHN0cmluZyB0YXJnZXRJZCA9IDE7XFxuICAgIG9wdGlvbmFsIGludDY0IHRpbWUgPSAyO1xcbiAgICBvcHRpb25hbCBpbnQzMiBjb3VudCAgPSAzO1xcbiAgICBvcHRpb25hbCBpbnQzMiBvcmRlciA9IDQ7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBidXNDaGFubmVsID0gNTsgLy/or6Xmtojmga/miYDlsZ7kvJror53nmoTkuJrliqHmoIfor4bvvIzpmZDliLYyMOWtl+espuS7peWGhVxcbiAgfVxcblxcbiAgbWVzc2FnZSBcIitGdCtcIlxcbiAge1xcbiAgICByZXBlYXRlZCBEb3duU3RyZWFtTWVzc2FnZSBsaXN0PTE7XFxuICAgIHJlcXVpcmVkIGludDY0IHN5bmNUaW1lPTI7XFxuICAgIHJlcXVpcmVkIGludDMyIGhhc01zZz0zO1xcbiAgfVxcbiAgbWVzc2FnZSBcIitwbitcIntcXG4gICAgb3B0aW9uYWwgaW50MzIgb3JkZXI9MTtcXG4gIH1cXG5cXG4gIG1lc3NhZ2UgXCIreW4rXCJ7XFxuICAgIHJlcGVhdGVkIHN0cmluZyBrZXk9MTtcXG4gIH1cXG5cXG4gIG1lc3NhZ2UgXCIrX24rXCJ7XFxuICAgIHJlcXVpcmVkIHN0cmluZyBrZXk9MTtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIHZhbHVlPTI7XFxuICB9XFxuXFxuICBtZXNzYWdlIFJ0Y1VzZXJJbmZve1xcbiAgICByZXF1aXJlZCBzdHJpbmcgdXNlcklkPTE7XFxuICAgIHJlcGVhdGVkIFwiK19uK1wiIHVzZXJEYXRhPTI7IC8v55So5oi36LWE5rqQ5L+h5oGvXFxuICB9XFxuXFxuICBtZXNzYWdlIFwiK25uK1wie1xcbiAgICByZXBlYXRlZCBSdGNVc2VySW5mbyB1c2Vycz0xO1xcbiAgICBvcHRpb25hbCBzdHJpbmcgdG9rZW49MjtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIHNlc3Npb25JZD0zO1xcbiAgICByZXBlYXRlZCBSdGNWYWx1ZUluZm8gcm9vbUluZm8gPSA0OyAvL+aIv+mXtGtleSB2YWx1ZVxcbiAgICByZXBlYXRlZCBSdGNLVkVudGl0eSBlbnRyaWVzID0gNTsvL+ebtOaSrUtW5bGe5oCn5a+56LGh6ZuG5ZCIXFxuICAgIG9wdGlvbmFsIGludDY0IHN5bmNUaW1lID0gNjsvL+aJgOacieWxnuaAp+eahOacgOWkp+aXtumXtOaIs++8iOS4i+asoeaLieWPlktW5pe255So77yJ44CCXFxuICAgIG9wdGlvbmFsIGludDMyIG9mZmxpbmVLaWNrVGltZSA9IDc7Ly9zZXJ2ZXLotoXml7bouKLkurrml7bpl7TvvIzpu5jorqQ2MHNcXG4gIH1cXG4gIG1lc3NhZ2UgUnRjUm9vbUluZm9PdXRwdXR7XFxuICAgIG9wdGlvbmFsIHN0cmluZyByb29tSWQgPSAxO1xcbiAgICByZXBlYXRlZCBcIitfbitcIiByb29tRGF0YSA9IDI7XFxuICAgIG9wdGlvbmFsIGludDMyIHVzZXJDb3VudCA9IDM7XFxuICAgIHJlcGVhdGVkIFJ0Y1VzZXJJbmZvIGxpc3Q9NDtcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrdG4rXCJ7XFxuICAgIHJlcXVpcmVkIGludDMyIHJvb21UeXBlPTE7XFxuICAgIG9wdGlvbmFsIGludDMyIGJyb2FkY2FzdFR5cGU9MjtcXG4gICAgb3B0aW9uYWwgUnRjVmFsdWVJbmZvIGV4dHJhSW5uZXJEYXRhID0gMztcXG4gICAgb3B0aW9uYWwgYm9vbCBuZWVkU3lzQ2hhdHJvb20gPSA0OyAvL+aYr+WQpumcgOimgeWQjOatpeiBiuWkqeWupFxcbiAgICBvcHRpb25hbCBJZGVudGl0eUNoYW5nZVR5cGUgaWRlbnRpdHlDaGFuZ2VUeXBlID0gNTsgLy/ouqvku73lj5jmm7TnsbvlnotcXG4gICAgb3B0aW9uYWwgSm9pblR5cGUgam9pblR5cGUgPSA2OyAvLyDliqDlhaXmiL/pl7TnsbvlnotcXG4gICAgcmVwZWF0ZWQgXCIrX24rXCIgaW5uZXJEYXRhcyA9IDc7IC8v55So5oi35YaF6YOoaW5uZXLmlbDmja7vvIzop5LoibLmiJbogIXov57puqbkv6Hmga/nrYlcXG4gICAgcmVwZWF0ZWQgXCIrX24rXCIgb3V0ZXJEYXRhcyA9IDg7IC8v55So5oi35YaF6YOob3V0ZXLmlbDmja7vvIzoh6rlrprkuYnmlbDmja7nu5PmnoRSdGNJbnB1dOOAglxcbiAgfVxcbiAgZW51bSBKb2luVHlwZSB7XFxuICAgIEtJQ0sgPSAwOyAvL+i4ouWJjeS4gOS4quiuvuWkh1xcbiAgICBSRUZVU0UgPSAxOyAvL+W9k+WJjeWKoOWFpeaLkue7nVxcbiAgICBDT0VYSVNUID0gMjsgLy/kuKTkuKrorr7lpIflhbHlrZhcXG4gIH1cXG4gIG1lc3NhZ2UgUnRjUXJ5SW5wdXR7XFxuICAgIHJlcXVpcmVkIGJvb2wgaXNJbnRlcmlvcj0xO1xcbiAgICByZXF1aXJlZCB0YXJnZXRUeXBlIHRhcmdldD0yO1xcbiAgICByZXBlYXRlZCBzdHJpbmcga2V5PTM7XFxuICB9XFxuICBtZXNzYWdlIFwiK2xuK1wie1xcbiAgICByZXBlYXRlZCBcIitfbitcIiBvdXRJbmZvPTE7XFxuICB9XFxuICBtZXNzYWdlIFJ0Y0RlbERhdGFJbnB1dHtcXG4gICAgcmVwZWF0ZWQgc3RyaW5nIGtleT0xO1xcbiAgICByZXF1aXJlZCBib29sIGlzSW50ZXJpb3I9MjtcXG4gICAgcmVxdWlyZWQgdGFyZ2V0VHlwZSB0YXJnZXQ9MztcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrYW4rXCJ7XFxuICAgIHJlcXVpcmVkIGJvb2wgaW50ZXJpb3I9MTtcXG4gICAgcmVxdWlyZWQgdGFyZ2V0VHlwZSB0YXJnZXQ9MjtcXG4gICAgcmVwZWF0ZWQgc3RyaW5nIGtleT0zO1xcbiAgICBvcHRpb25hbCBzdHJpbmcgb2JqZWN0TmFtZT00O1xcbiAgICBvcHRpb25hbCBzdHJpbmcgY29udGVudD01O1xcbiAgfVxcbiAgbWVzc2FnZSBcIitzbitcIntcXG4gICAgcmVxdWlyZWQgYm9vbCBpbnRlcmlvcj0xO1xcbiAgICByZXF1aXJlZCB0YXJnZXRUeXBlIHRhcmdldD0yO1xcbiAgICByZXF1aXJlZCBzdHJpbmcga2V5PTM7XFxuICAgIHJlcXVpcmVkIHN0cmluZyB2YWx1ZT00O1xcbiAgICBvcHRpb25hbCBzdHJpbmcgb2JqZWN0TmFtZT01O1xcbiAgICBvcHRpb25hbCBzdHJpbmcgY29udGVudD02O1xcbiAgfVxcbiAgbWVzc2FnZSBcIitvbitcIiB7XFxuICAgIHJlcGVhdGVkIFwiK19uK1wiIHZhbHVlSW5mbyA9IDE7XFxuICAgIHJlcXVpcmVkIHN0cmluZyBvYmplY3ROYW1lID0gMjtcXG4gICAgcmVwZWF0ZWQgXCIrX24rXCIgY29udGVudCA9IDM7XFxuICB9XFxuICBtZXNzYWdlIFJ0Y091dHB1dFxcbiAge1xcbiAgICBvcHRpb25hbCBpbnQzMiBub3RoaW5nPTE7XFxuICB9XFxuICBtZXNzYWdlIFwiK2huK1wie1xcbiAgICByZXF1aXJlZCBzdHJpbmcgcnRjVG9rZW49MTtcXG4gIH1cXG4gIGVudW0gdGFyZ2V0VHlwZSB7XFxuICAgIFJPT00gPTEgO1xcbiAgICBQRVJTT04gPSAyO1xcbiAgfVxcbiAgbWVzc2FnZSBcIit1bitcIntcXG4gICAgcmVxdWlyZWQgdGFyZ2V0VHlwZSB0YXJnZXQ9MTtcXG4gICAgcmVwZWF0ZWQgXCIrX24rXCIgdmFsdWVJbmZvPTI7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBvYmplY3ROYW1lPTM7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBjb250ZW50PTQ7XFxuICB9XFxuICBtZXNzYWdlIFwiK2RuK1wie1xcbiAgICByZXBlYXRlZCBzdHJpbmcgdXNlcklkID0gMTtcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrZm4rXCJ7XFxuICAgIHJlcGVhdGVkIFJ0Y1VzZXJJbmZvIHVzZXIgPSAxO1xcbiAgfVxcbiAgbWVzc2FnZSBcIitEdCtcIntcXG4gICAgcmVxdWlyZWQgaW50MzIgbm90aGluZyA9IDE7XFxuICB9XFxuICBtZXNzYWdlIFwiK1Z0K1wie1xcbiAgICByZXF1aXJlZCBpbnQ2NCBpbmJveFRpbWUgPSAxO1xcbiAgICByZXF1aXJlZCBpbnQ2NCBzZW5kYm94VGltZSA9IDI7XFxuICAgIHJlcXVpcmVkIGludDY0IHRvdGFsVW5yZWFkQ291bnQgPSAzO1xcbiAgfVxcbiAgbWVzc2FnZSBcIit6dCtcIlxcbiAge1xcbiAgICByZXF1aXJlZCBDaGFubmVsVHlwZSB0eXBlID0gMTtcXG4gICAgcmVxdWlyZWQgaW50NjQgbXNnVGltZSA9IDI7XFxuICAgIHJlcXVpcmVkIHN0cmluZyBjaGFubmVsSWQgPSAzO1xcbiAgICBvcHRpb25hbCBzdHJpbmcgYnVzQ2hhbm5lbCA9IDQ7Ly/or6Xmtojmga/miYDlsZ7kvJror53nmoTkuJrliqHmoIfor4ZcXG4gIH1cXG4gIG1lc3NhZ2UgU2Vzc2lvbk1zZ1JlYWRPdXRwdXRcXG4gIHtcXG4gICAgb3B0aW9uYWwgaW50MzIgbm90aGluZz0xO1xcbiAgfVxcbiAgbWVzc2FnZSBcIitIdCtcIlxcbiAge1xcbiAgICByZXBlYXRlZCBTZXNzaW9uSW5mbyBzZXNzaW9ucyA9IDE7XFxuICB9XFxuICBtZXNzYWdlIFwiK1l0K1wiXFxuICB7XFxuICAgIHJlcXVpcmVkIENoYW5uZWxUeXBlIHR5cGUgPSAxO1xcbiAgICByZXF1aXJlZCBzdHJpbmcgY2hhbm5lbElkID0gMjtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIGJ1c0NoYW5uZWwgPSAzOy8v5omA5bGe5Lya6K+d5Lia5Yqh5qCH6K+GXFxuICB9XFxuICBtZXNzYWdlIFwiK2p0K1wiXFxuICB7XFxuICAgIG9wdGlvbmFsIGludDMyIG5vdGhpbmc9MTtcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrV3QrXCJcXG4gIHtcXG4gICAgb3B0aW9uYWwgQ2hhbm5lbFR5cGUgdHlwZSA9IDE7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBjb252ZXJzYXRpb25JZCA9IDI7XFxuICAgIHJlcGVhdGVkIERlbGV0ZU1zZyBtc2dzID0gMztcXG4gICAgb3B0aW9uYWwgc3RyaW5nIGJ1c0NoYW5uZWwgPSA0OyAvL+ivpea2iOaBr+aJgOWxnuS8muivneeahOS4muWKoeagh+ivhu+8jOmZkOWItjIw5a2X56ym5Lul5YaFXFxuICB9XFxuICBtZXNzYWdlIERlbGV0ZU1zZ1xcbiAge1xcbiAgICBvcHRpb25hbCBzdHJpbmcgbXNnSWQgPSAxO1xcbiAgICBvcHRpb25hbCBpbnQ2NCBtc2dEYXRhVGltZSA9IDI7XFxuICAgIG9wdGlvbmFsIGludDMyIGRpcmVjdCA9IDM7XFxuICB9XFxuICBtZXNzYWdlIENocm1LVkVudGl0eSB7XFxuICAgIHJlcXVpcmVkIHN0cmluZyBrZXkgPSAxO1xcbiAgICByZXF1aXJlZCBzdHJpbmcgdmFsdWUgPSAyO1xcbiAgICBvcHRpb25hbCBpbnQzMiBzdGF0dXMgPSAzO1xcbiAgICBvcHRpb25hbCBpbnQ2NCB0aW1lc3RhbXAgPSA0O1xcbiAgICBvcHRpb25hbCBzdHJpbmcgdWlkID0gNTtcXG4gICAgb3B0aW9uYWwgaW50NjQgdmVyc2lvbiA9IDY7XFxuICB9XFxuICBtZXNzYWdlIFwiK1NuK1wiIHtcXG4gICAgcmVxdWlyZWQgQ2hybUtWRW50aXR5IGVudHJ5ID0gMTtcXG4gICAgb3B0aW9uYWwgYm9vbCBiTm90aWZ5ID0gMjtcXG4gICAgb3B0aW9uYWwgVXBTdHJlYW1NZXNzYWdlIG5vdGlmaWNhdGlvbiA9IDM7XFxuICAgIG9wdGlvbmFsIENoYW5uZWxUeXBlIHR5cGUgPSA0O1xcbiAgfVxcbiAgbWVzc2FnZSBcIitObitcIiB7XFxuICAgIHJlcGVhdGVkIENocm1LVkVudGl0eSBlbnRyeSA9IDE7XFxuICAgIG9wdGlvbmFsIGJvb2wgYk5vdGlmeSA9IDI7XFxuICAgIG9wdGlvbmFsIFVwU3RyZWFtTWVzc2FnZSBub3RpZmljYXRpb24gPSAzO1xcbiAgICBvcHRpb25hbCBDaGFubmVsVHlwZSB0eXBlID0gNDtcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrT24rXCIge1xcbiAgICByZXBlYXRlZCBDaHJtS1ZFbnRpdHkgZW50cnkgPSAxO1xcbiAgICBvcHRpb25hbCBib29sIGJOb3RpZnkgPSAyO1xcbiAgICBvcHRpb25hbCBVcFN0cmVhbU1lc3NhZ2Ugbm90aWZpY2F0aW9uID0gMztcXG4gICAgb3B0aW9uYWwgQ2hhbm5lbFR5cGUgdHlwZSA9IDQ7XFxuICB9XFxuICBtZXNzYWdlIFwiK01uK1wiIHtcXG4gICAgcmVwZWF0ZWQgQ2hybUtWRW50aXR5IGVudHJpZXMgPSAxO1xcbiAgICBvcHRpb25hbCBib29sIGJGdWxsVXBkYXRlID0gMjtcXG4gICAgb3B0aW9uYWwgaW50NjQgc3luY1RpbWUgPSAzO1xcbiAgfVxcbiAgbWVzc2FnZSBDaHJtS1ZTVmVyc2lvbkVudGl0eSB7XFxuICAgIG9wdGlvbmFsIGludDY0IHZlcnNpb24gPSAxO1xcbiAgICBvcHRpb25hbCBzdHJpbmcga2V5ID0gMjtcXG4gIH1cXG5cXG4gIG1lc3NhZ2UgXCIrd24rXCIge1xcbiAgICByZXBlYXRlZCBDaHJtS1ZTT3V0cHV0RW50aXR5IGVycm9yS2V5cyA9IDE7XFxuICAgIHJlcGVhdGVkIENocm1LVlNWZXJzaW9uRW50aXR5IGtleXNWZXJzaW9uID0gMjtcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrVW4rXCJcXG4gIHtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIGtleSA9IDE7XFxuICAgIG9wdGlvbmFsIGludDMyIGVycm9yQ29kZSA9IDI7XFxuICB9XFxuICBtZXNzYWdlIFwiK2JuK1wiIHtcXG4gICAgcmVxdWlyZWQgaW50NjQgdGltZXN0YW1wID0gMTtcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrTG4rXCIge1xcbiAgICByZXF1aXJlZCBpbnQ2NCB2ZXJzaW9uPTE7XFxuICAgIHJlcXVpcmVkIHN0cmluZyB2YWx1ZT0yO1xcbiAgfVxcbiAgbWVzc2FnZSBcIitQbitcIiB7XFxuICAgIHJlcXVpcmVkIGludDY0IHZlcnNpb249MTtcXG4gICAgcmVxdWlyZWQgYm9vbCByZXNlcnZlPTI7XFxuICB9XFxuICBtZXNzYWdlIFwiK0RuK1wiIHtcXG4gICAgcmVxdWlyZWQgaW50NjQgdmVyc2lvbj0xO1xcbiAgICBvcHRpb25hbCBib29sIHJlc2VydmU9MjtcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrVm4rXCIge1xcbiAgICByZXBlYXRlZCBVc2VyU2V0dGluZ0l0ZW0gaXRlbXMgPSAxO1xcbiAgICByZXF1aXJlZCBpbnQ2NCB2ZXJzaW9uPTI7XFxuICB9XFxuICBtZXNzYWdlIFVzZXJTZXR0aW5nSXRlbSB7XFxuICAgIHJlcXVpcmVkIHN0cmluZyB0YXJnZXRJZD0gMTtcXG4gICAgcmVxdWlyZWQgQ2hhbm5lbFR5cGUgdHlwZSA9IDI7XFxuICAgIHJlcXVpcmVkIHN0cmluZyBrZXkgPSA0O1xcbiAgICByZXF1aXJlZCBieXRlcyB2YWx1ZSA9IDU7XFxuICAgIHJlcXVpcmVkIGludDY0IHZlcnNpb249NjtcXG4gICAgcmVxdWlyZWQgaW50MzIgc3RhdHVzPTc7XFxuICAgIHJlcGVhdGVkIFNlc3Npb25UYWdJdGVtIHRhZ3M9IDg7XFxuICB9XFxuICBtZXNzYWdlIFwiK3huK1wiIHtcXG4gICAgcmVxdWlyZWQgaW50NjQgdGltZSA9IDE7XFxuICB9XFxuICBtZXNzYWdlIFwiK0JuK1wiIHtcXG4gICAgcmVxdWlyZWQgaW50NjQgdmVyc2lvbj0xO1xcbiAgICByZXBlYXRlZCBTZXNzaW9uU3RhdGUgc3RhdGU9IDI7XFxuICB9XFxuICBtZXNzYWdlIFwiK0duK1wiIHtcXG4gICAgcmVxdWlyZWQgQ2hhbm5lbFR5cGUgdHlwZSA9IDE7XFxuICAgIHJlcXVpcmVkIHN0cmluZyBjaGFubmVsSWQgPSAyO1xcbiAgICBvcHRpb25hbCBpbnQ2NCB0aW1lID0gMztcXG4gICAgcmVwZWF0ZWQgU2Vzc2lvblN0YXRlSXRlbSBzdGF0ZUl0ZW0gPSA0O1xcbiAgICBvcHRpb25hbCBzdHJpbmcgYnVzQ2hhbm5lbCA9IDU7Ly/or6Xmtojmga/miYDlsZ7kvJror53nmoTkuJrliqHmoIfor4ZcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrRm4rXCIge1xcbiAgICByZXF1aXJlZCBTZXNzaW9uU3RhdGVUeXBlIHNlc3Npb25TdGF0ZVR5cGUgPSAxO1xcbiAgICByZXF1aXJlZCBzdHJpbmcgdmFsdWUgPSAyO1xcbiAgICByZXBlYXRlZCBTZXNzaW9uVGFnSXRlbSB0YWdzID0gMztcXG4gIH1cXG4gIGVudW0gU2Vzc2lvblN0YXRlVHlwZSB7XFxuICAgIElzU2lsZW50ID0gMTtcXG4gICAgSXNUb3AgPSAyO1xcbiAgICBUYWdzID0gMztcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrcW4rXCIge1xcbiAgICByZXF1aXJlZCBpbnQ2NCB2ZXJzaW9uPTE7XFxuICAgIHJlcGVhdGVkIFNlc3Npb25TdGF0ZSBzdGF0ZT0gMjtcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrS24rXCIge1xcbiAgICByZXF1aXJlZCBpbnQ2NCB2ZXJzaW9uPTE7XFxuICB9XFxuICBtZXNzYWdlIFwiK0huK1wiIHtcXG4gICAgcmVwZWF0ZWQgc3RyaW5nIG1zZ0lkPTE7IC8v5bey6K+75raI5oGvSURcXG4gICAgb3B0aW9uYWwgc3RyaW5nIGNoYW5uZWxJZCA9IDI7IC8vIOivpea2iOaBr+aJgOWxnuS8muivneeahOS4muWKoeagh+ivhlxcbiAgfVxcbiAgbWVzc2FnZSBcIitZbitcIiB7XFxuICAgIHJlcGVhdGVkIHN0cmluZyBtc2dJZD0xOyAvL+W3suivu+a2iOaBr0lEXFxuICAgIG9wdGlvbmFsIHN0cmluZyBjaGFubmVsSWQgPSAyOyAvLyDor6Xmtojmga/miYDlsZ7kvJror53nmoTkuJrliqHmoIfor4ZcXG4gIH1cXG4gIG1lc3NhZ2UgXCIram4rXCIge1xcbiAgICByZXF1aXJlZCBpbnQzMiB0b3RhbE1lbWJlck51bSA9IDE7Ly/nvqTlhoXmgLvkurrmlbBcXG4gICAgcmVwZWF0ZWQgR3JwTXNnUmVhZFVzZXIgbGlzdCA9IDI7Ly/lt7Lor7vnlKjmiLfliJfooajvvIhsaXN05aSN57G75Z6L77yJXFxuICB9XFxuICBtZXNzYWdlIFwiK1FuK1wiIHtcXG4gICAgcmVxdWlyZWQgaW50NjQgcmVhZFRpbWUgPSAxOy8v5bey6K+75pe26Ze0XFxuICAgIHJlcXVpcmVkIHN0cmluZyB1c2VySWQgPSAyOy8v5bey6K+755So5oi3aWRcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrV24rXCIge1xcbiAgICByZXF1aXJlZCBpbnQ2NCB2ZXJzaW9uPTE7XFxuICAgIHJlcGVhdGVkIFNlc3Npb25UYWdJdGVtIHRhZ3M9MjtcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrSm4rXCIge1xcbiAgICByZXF1aXJlZCBzdHJpbmcgdGFnSWQ9MTtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIG5hbWU9MjtcXG4gICAgb3B0aW9uYWwgaW50NjQgY3JlYXRlZFRpbWU9MztcXG4gICAgb3B0aW9uYWwgYm9vbCBpc1RvcD00O1xcbiAgfVxcbiAgbWVzc2FnZSBcIit6bitcIiB7XFxuICAgIHJlcXVpcmVkIGludDY0IHZlcnNpb249MTtcXG4gICAgcmVwZWF0ZWQgU2Vzc2lvblRhZ0l0ZW0gdGFncz0yO1xcbiAgfVxcbiAgbWVzc2FnZSBcIitabitcIiB7XFxuICAgIHJlcGVhdGVkIHN0cmluZyB0YWdJZD0xO1xcbiAgfVxcbiAgbWVzc2FnZSBcIitrbitcIiB7XFxuICAgIHJlcXVpcmVkIGludDY0IHZlcnNpb249MTtcXG4gICAgcmVxdWlyZWQgYm9vbCByZXNlcnZlPTI7XFxuICB9XFxuICBtZXNzYWdlIFwiK1huKycge1xcbiAgICByZXF1aXJlZCBzdHJpbmcgc2RrSW5mbz0xOyAvLyDnlKjmiLfpm4bmiJDnmoQgc2RrIOS/oeaBryxqc29uIOagvOW8jyB7XCJ3ZWItcnRjXCI6IFwiNC4wLjMuN1wifVxcbiAgfVxcbiAgbWVzc2FnZSAnKyRuK1wiXFxuICB7XFxuICAgIG9wdGlvbmFsIGludDMyIG5vdGhpbmc9MTsgLy/ljaDkvY1cXG4gIH1cXG4gIG1lc3NhZ2UgXCIrZmkrXCIgXFxuICB7XFxuICAgIHJlcXVpcmVkIGludDMyIHR5cGU9IDE7ICAgLy8o6YCa55+l57G75Z6LIDE6cnRj5oi/6Ze054q25oCBS1blj5jmm7TpgJrnn6UpXFxuICAgIG9wdGlvbmFsIGludDY0IHRpbWU9IDI7ICAgLy/mtojmga/kuqfnlJ/ml7bpl7RcXG4gICAgb3B0aW9uYWwgc3RyaW5nIHJvb21JZD0zOyAvL+S4u+aSreaIv+mXtGlkXFxuICB9XFxuICBtZXNzYWdlIFwiK3BpK1wiXFxuICB7XFxuICAgIHJlcXVpcmVkIGludDY0IHRpbWVzdGFtcCA9IDE7XFxuICAgIHJlcXVpcmVkIHN0cmluZyByb29tSWQgPSAyO1xcbiAgfVxcbiAgbWVzc2FnZSBcIitnaStcIlxcbiAge1xcbiAgICByZXBlYXRlZCBSdGNLVkVudGl0eSBlbnRyaWVzID0gMTtcXG4gICAgb3B0aW9uYWwgYm9vbCBiRnVsbFVwZGF0ZSA9IDI7XFxuICAgIG9wdGlvbmFsIGludDY0IHN5bmNUaW1lID0gMzsgXFxuICB9XFxuICBtZXNzYWdlIFJ0Y0tWRW50aXR5IFxcbiAge1xcbiAgICByZXF1aXJlZCBzdHJpbmcga2V5ID0gMTtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIHZhbHVlID0gMjtcXG4gICAgb3B0aW9uYWwgaW50MzIgc3RhdHVzID0gMztcXG4gICAgb3B0aW9uYWwgaW50NjQgdGltZXN0YW1wID0gNDtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIHVpZCA9IDU7XFxuICB9XFxuICBlbnVtIElkZW50aXR5Q2hhbmdlVHlwZSBcXG4gIHtcXG4gICAgQW5jaG9yVG9WaWV3ZXIgPSAxOyAvLzHkuLrkuLvmkq3lj5jop4LkvJdcXG4gICAgVmlld2VyVG9BbmNob3IgPSAyOyAvLzLkuLrop4LkvJflj5jkuLvmkq1cXG4gIH1cXG4gIG1lc3NhZ2UgXCIrX2krXCJcXG4gIHtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIHVzZXJJZCA9IDE7XFxuICB9XFxuICBtZXNzYWdlIFwiK3lpK1wiXFxuICB7XFxuICAgIHJlcGVhdGVkIFJ0Y0pvaW5lZEluZm8gaW5mbyA9IDE7XFxuICB9XFxuICBtZXNzYWdlIFJ0Y0pvaW5lZEluZm9cXG4gIHtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIGRldmljZUlkID0gMTsgLy/orr7lpIdJRFxcbiAgICByZXF1aXJlZCBzdHJpbmcgcm9vbUlkID0gMjsgICAvL+WKoOWFpeeahOaIv+mXtElEXFxuICAgIG9wdGlvbmFsIGludDY0IGpvaW5UaW1lID0gMzsgIC8v5Yqg5YWl55qE5pe26Ze0XFxuICB9XFxuICBtZXNzYWdlIFwiK21pK1wiXFxuICB7XFxuICAgIHJlcXVpcmVkIHN0cmluZyBydGNUb2tlbj0xO1xcbiAgICByZXBlYXRlZCBSdGNLVkVudGl0eSBlbnRyaWVzID0gMjsvL0tW5bGe5oCn5a+56LGh6ZuG5ZCIXFxuICAgIG9wdGlvbmFsIGludDY0IHN5bmNUaW1lID0gMzsvL+aJgOacieWxnuaAp+eahOacgOWkp+aXtumXtOaIs++8iOS4i+asoeaLieWPlktW5pe255So77yJ44CCXFxuICB9XFxuICBtZXNzYWdlIFwiK3ZpK1wiXFxuICB7XFxuICAgIHJlcXVpcmVkIHN0cmluZyBpbnZpdGVkVXNlcklkPTE7ICAgIC8v6KKr6YKA6K+355qE5Lq655qEdWlkXFxuICAgIG9wdGlvbmFsIGludDMyICB0aW1lb3V0VGltZT0yOyAgICAgICAvL+mCgOivt+i2heaXtuaXtumXtCjnp5IpLOm7mOiupOS4ieWNgeenklxcbiAgICByZXF1aXJlZCBzdHJpbmcgaW52aXRlZFJvb21JZD0zOyAgICAvL+iiq+mCgOivt+eahOaIv+mXtFxcbiAgICByZXF1aXJlZCBzdHJpbmcgaW52aXRlSW5mbz00OyAgICAgICAvL+mCgOivt+eahOS/oeaBryjljIXlkKvpgoDor7fkuros6KKr6YKA6K+35Lq6LOWQhOiHqnVzZXJpZCnlrqLmiLfnq6/lrprkuYnlpb0u5Y2P6K6u5qCI5ZKMc2VydmVy6YCP5LygXFxuICAgIHJlcXVpcmVkIHN0cmluZyBpbnZpdGVTZXNzaW9uSWQ9IDU7IC8v5a6i5oi356uv5L+d6K+B5ZSv5LiA5oCnKOW7uuiurnJvb21pZF91c2VyaWRf5pe26Ze05oizX+maj+acuuaVsClcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrRWkrXCJcXG4gIHtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIGludml0ZWRVc2VySWQ9MTsgICAvL+iiq+mCgOivt+eahOS6uueahHVpZFxcbiAgICByZXF1aXJlZCBzdHJpbmcgaW52aXRlZFJvb21JZD0yOyAgIC8v6KKr6YKA6K+355qE5oi/6Ze0XFxuICAgIHJlcXVpcmVkIHN0cmluZyBpbnZpdGVJbmZvPTM7ICAgICAgLy/lj5bmtojpgoDor7fnmoTkv6Hmga8o5YyF5ZCr6YKA6K+35Lq6LOiiq+mCgOivt+S6uizlkIToh6p1c2VyaWQp5a6i5oi356uv5a6a5LmJ5aW9LuWNj+iuruagiOWSjHNlcnZlcumAj+S8oFxcbiAgICByZXF1aXJlZCBzdHJpbmcgaW52aXRlU2Vzc2lvbklkPTQ7IC8v6YKA6K+355qEc2Vzc2lvbklkLOWuouaIt+err+WPkei1t+mCgOivt+aXtuS6p+eUn1xcbiAgfVxcbiAgbWVzc2FnZSBcIitUaStcIlxcbiAge1xcbiAgICByZXF1aXJlZCBzdHJpbmcgaW52aXRlVXNlcklkPTE7ICAgIC8v6YKA6K+355qE5Lq655qEdWlkXFxuICAgIHJlcXVpcmVkIGludDMyICBhbnN3ZXJDb2RlPTI7ICAgICAgLy/mmK/lkKbmjqXlj5fov57puqbpgoDor7cuMOS4uuaLkue7nSwx5Li65o6l5Y+XXFxuICAgIHJlcXVpcmVkIHN0cmluZyBpbnZpdGVSb29tSWQ9MzsgICAgLy/pgoDor7fnmoTmiL/pl7RcXG4gICAgcmVxdWlyZWQgc3RyaW5nIGludml0ZVNlc3Npb25JZD00OyAvL+mCgOivt+eahHNlc3Npb25JZFxcbiAgICByZXF1aXJlZCBzdHJpbmcgY29udGVudD01OyAgICAgICAgIC8v6ZyA6KaB6L2s5Y+R55qEY29udGVudFxcbiAgICBvcHRpb25hbCBzdHJpbmcga2V5PTY7ICAgICAgICAgICAgIC8v5aaC5p6c5o6l5Y+X55qE6K+dLOmcgOimgeWKoOi/meS4quWtl+autSzmlL7lnKhyb29t57qn5Yir55qEa+WSjHYs5paw5Yqg5YWl5oi/6Ze055qE6IO95ouJ5Y+W5YiwXFxuICAgIG9wdGlvbmFsIHN0cmluZyB2YWx1ZT03OyAgICAgICAgICAgLy/lpoLmnpzmjqXlj5fnmoTor50s6ZyA6KaB5Yqg6L+Z5Liq5a2X5q61LOaUvuWcqHJvb23nuqfliKvnmoRr5ZKMdizmlrDliqDlhaXmiL/pl7TnmoTog73mi4nlj5bliLBcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrSWkrXCJcXG4gIHtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIGludml0ZVJvb21JZD0xOyAgICAvL+mCgOivt+eahOaIv+mXtFxcbiAgICByZXF1aXJlZCBzdHJpbmcgaW52aXRlU2Vzc2lvbklkPTI7IC8v6YKA6K+355qEc2Vzc2lvbklkXFxuICAgIHJlcXVpcmVkIHN0cmluZyBpbnZpdGVDb250ZW50PTM7ICAgLy/nu5PmnZ/ov57puqbnmoTkv6Hmga8o6ZyA6KaB6YCP5Lyg57uZ5oi/6Ze05YaF5YW25LuW5Lq6KVxcbiAgICByZXBlYXRlZCBzdHJpbmcgaW52aXRlUm9vbUtleXM9NDsgIC8v6ZyA6KaB5Yig6Zmk6L+e6bqm55qE5L+h5oGv55qEa2V5XFxuICB9XFxuICBtZXNzYWdlIFwiK2VpK1wiXFxuICB7XFxuICAgICAgcmVxdWlyZWQgaW50NjQgc3luY1RpbWUgPSAxOy8v5ZCM5q2l5pe26Ze05oizXFxuICAgICAgb3B0aW9uYWwgYm9vbCBpc0VyYXNlTXNnQ29udGVudCA9IDI7Ly/mi4nlj5bkvJror53ml7bvvIzmmK/lkKblsY/olL3mjonmtojmga/lhoXlrrlcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrdGkrXCJcXG4gIHtcXG4gICAgcmVxdWlyZWQgaW50NjQgc3luY1RpbWUgPSAxOy8v5ZCM5q2l5pe26Ze05oizXFxuICB9XFxuICBtZXNzYWdlICBcIituaStcIlxcbiAge1xcbiAgICByZXF1aXJlZCBzdHJpbmcgZnJvbVVzZXJJZCA9IDE7Ly/vvIjosIHlj5HnmoTvvIlcXG4gICAgcmVxdWlyZWQgc3RyaW5nIHRhcmdldElkID0gMjsvLyDnm67moIdJZCjotoXnuqfnvqRJZClcXG4gICAgcmVxdWlyZWQgQ2hhbm5lbFR5cGUgdHlwZSA9IDM7Ly/lj5HpgIHnsbvlnovlpoLvvJrvvIhQMlAsR1JPVVAsVUxUUkFHUk9VUO+8iVxcbiAgICByZXF1aXJlZCBzdHJpbmcgbXNnVUlEID0gNDsgLy8g5omp5bGV5raI5oGv55qE5YaF5a655L2TXFxuICAgIHJlcXVpcmVkIGludDY0IG1zZ1RpbWUgPSA1OyAvL+WOn+Wni+a2iOaBr+aXtumXtFxcbiAgICBvcHRpb25hbCBzdHJpbmcgYnVzQ2hhbm5lbCA9IDY7IC8vIOivpea2iOaBr+aJgOWxnuS8muivneeahOS4muWKoeagh+ivhu+8jOmZkOWItjIw5a2X56ym5Lul5YaFXFxuICAgIG9wdGlvbmFsIHN0cmluZyBjb250ZW50ID0gNzsgLy8g5Y2zZXh0cmFDb250ZW505raI5oGv5omp5bGV5YaF5a65LOS4i+ihqOagvOivtOaYjlxcbiAgfVxcbiAgbWVzc2FnZSBcIitpaStcIiAgLy/mn6Xor6LlhaXlj4JcXG4gIHtcXG4gICAgcmVxdWlyZWQgaW50NjQgc3luY1RpbWUgPSAxOy8v5ZCM5q2l5pe26Ze05oizXFxuICB9XFxuICBtZXNzYWdlIFwiK3NpK1wiICAvL+W6lOetlOe7k+aenFxcbiAge1xcbiAgICByZXBlYXRlZCBNc2dDaGFuZ2UgbGlzdCA9IDE7IC8v5Y+Y5pu0XFxuICAgIHJlcXVpcmVkIGludDY0IHN5bmNUaW1lID0gMjsgLy/lkIzmraXml7bpl7Qo55So5LqO5LiL5qyh5ZCM5q2l5YWl5Y+CKVxcbiAgICBvcHRpb25hbCBib29sICBoYXNOZXh0ID0gMyA7XFxuICB9XFxuICBtZXNzYWdlIE1zZ0NoYW5nZSAgLy/lj5jmm7Tor6bmg4VcXG4gIHtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIHRhcmdldElkID0gMTsgLy8gIOebruagh0lkKOi2hee6p+e+pElkKVxcbiAgICByZXF1aXJlZCBDaGFubmVsVHlwZSB0eXBlID0gMjsgLy8gIOS8muivneexu+Wei1xcbiAgICByZXF1aXJlZCBpbnQ2NCB0aW1lID0gMzsgIC8vIOWPmOabtOaXtumXtFxcbiAgICByZXF1aXJlZCBpbnQzMiBjaGFuZ2VUeXBlID0gNDsgIC8vIOa2iOaBr+WPmOabtOexu+Wei++8iDE65omp5bGVLDI65L+u5pS5LDM65pKk5ZueKVxcbiAgICByZXF1aXJlZCBzdHJpbmcgbXNnVUlEICA9IDU7ICAvLyDmtojmga9JRFxcbiAgICByZXF1aXJlZCBpbnQ2NCBtc2dUaW1lID0gNjsgIC8vICDmtojmga/ml7bpl7RcXG4gICAgb3B0aW9uYWwgc3RyaW5nIGJ1c0NoYW5uZWwgPSA3OyAvLyDpopHpgZNJRFxcbiAgICBvcHRpb25hbCBib29sIGlzQWRtaW4gPSA4OyAvL+aYr+WQpuS4uueuoeeQhuWRmO+8jOm7mOiupOS4uiAw77yM6K6+5Li6IDEg5pe277yMSU1LaXQg5pS25Yiw5q2k5p2h5raI5oGv5ZCO77yM5bCP54Gw5p2h6buY6K6k5pi+56S65Li64oCc566h55CG5ZGYIOaSpOWbnuS6huS4gOadoea2iOaBr+KAneOAglxcbiAgICBvcHRpb25hbCBib29sIGlzRGVsID0gOTsgLy/pu5jorqTkuLogMCDmkqTlm57or6XmnaHmtojmga/lkIzml7bvvIznlKjmiLfnq6/lsIbor6XmnaHmtojmga/liKDpmaTlubbmm7/mjaLkuLrkuIDmnaHlsI/ngbDmnaHmkqTlm57mj5DnpLrmtojmga/vvJvkuLogMSDml7bvvIzor6XmnaHmtojmga/liKDpmaTlkI7vvIzkuI3mm7/mjaLkuLrlsI/ngbDmnaHmj5DnpLrmtojmga/jgIJcXG4gICAgb3B0aW9uYWwgc3RyaW5nIG9wZXJhdG9ySWQgPSAxMDsgLy8g5paw5YqgIC0g5raI5oGv5Y+Y5pu055qE5pON5L2c5Lq6SWRcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrb2krXCIgIC8v6K+35rGCXFxuICB7XFxuICAgIHJlcXVpcmVkIHN0cmluZyB0YXJnZXRJZCA9IDE7IC8vICDnm67moIdJZCjotoXnuqfnvqRJZClcXG4gICAgcmVxdWlyZWQgQ2hhbm5lbFR5cGUgdHlwZSA9IDI7IC8vICDkvJror53nsbvlnotcXG4gICAgcmVwZWF0ZWQgTWVzc2FnZVF1ZXJ5SW5mbyBxdWVyeSA9IDM7IC8vXFxuICB9XFxuICBtZXNzYWdlIE1lc3NhZ2VRdWVyeUluZm9cXG4gIHtcXG4gICAgcmVxdWlyZWQgaW50NjQgbXNnVGltZSA9IDE7ICAvLyDmtojmga/ml7bpl7RcXG4gICAgcmVxdWlyZWQgc3RyaW5nIG1zZ1VJRCAgPSAyOyAgLy8g5raI5oGvSURcXG4gICAgb3B0aW9uYWwgc3RyaW5nIGJ1c0NoYW5uZWwgPSAzOyAvLyDpopHpgZNJRFxcbiAgfVxcbiAgbWVzc2FnZSBcIit1aStcIiAgLy/lupTnrZRcXG4gIHtcXG4gICAgcmVwZWF0ZWQgRG93blN0cmVhbU1lc3NhZ2UgbGlzdCA9IDE7Ly/mtojmga9cXG4gIH1cXG4gIG1lc3NhZ2UgXCIrY2krXCIgIC8v5a6i5oi356uv5Y+R6YCBXFxuICB7XFxuICAgIG9wdGlvbmFsIHN0cmluZyB0YXJnZXRJZCA9ICAxOy8vIHRhcmdldElkXFxuICAgIG9wdGlvbmFsIENoYW5uZWxUeXBlIHR5cGUgPSAyOy8v5Y+R6YCB5Lya6K+d57G75Z6L5aaC77ya77yIUDJQLEdST1VQ77yJIFxcbiAgICBvcHRpb25hbCBpbnQzMiBvcFR5cGUgPSAzOyAgLy8wICwg5q2j5Zyo6L6T5YWlLCAxIOato+WcqFhYWCAgXFxuICAgIG9wdGlvbmFsIHN0cmluZyBidXNDaGFubmVsID0gNDsgLy8g6aKR6YGTKGNoYW5uZWxJZCzlj6/ku6XkuLrnqbopXFxuICB9XFxuICBtZXNzYWdlIFwiK2hpK1wiICAvL+acjeWKoeerr+WPkemAgVxcbiAge1xcbiAgICAgIG9wdGlvbmFsIENoYW5uZWxUeXBlIHR5cGUgPSAxOy8v5Y+R6YCB5Lya6K+d57G75Z6L5aaC77yIUDJQLEdST1VQ77yJIFxcbiAgICAgIG9wdGlvbmFsIGludDY0IG5vdGlmeVR5cGUgPSAyOyAvLzB4MSDooajnpLrmmI7nu4YsIDB4MiDooajnpLrmsYfmgLsgMHgzIOihqOekuuaYjue7hivmsYfmgLtcXG4gICAgICByZXBlYXRlZCBPcGVyYXRlSW5mbyBpbmZvID0gMyA7IC8v5piO57uG5YiX6KGoIOW9k25vdGlmeVR5cGUg5Li6IDHlkowz5pe2LOacieaViFxcbiAgICAgIHJlcGVhdGVkIE9wZXJhdGVTdW1tYXJ5IHN1bW1hcnkgPSA0IDsgLy/msYfmgLvliJfooagsIOW9k25vdGlmeVR5cGUg5Li6MuWSjDMg5pe2LOacieaViFxcbiAgfVxcbiAgbWVzc2FnZSBcIitsaStcIiB7XFxuICAgIC8vIFhYIOato+WcqOWBmuS7gOS5iFxcbiAgICBvcHRpb25hbCBzdHJpbmcgdGFyZ2V0SWQgPSAxOyAvLyDotoXnuqfnvqRJZCAg5Lya6K+daWRcXG4gICAgb3B0aW9uYWwgc3RyaW5nIGJ1c0NoYW5uZWwgPSAyOyAvLyDpopHpgZMoY2hhbm5lbElkLOWPr+S7peS4uuepuilcXG4gICAgb3B0aW9uYWwgc3RyaW5nIHVzZXJJZCA9IDM7IC8vIHVzZXJJZFxcbiAgICBvcHRpb25hbCBpbnQzMiBvcFR5cGUgPSA0OyAgLy8wICwg5q2j5Zyo6L6T5YWlLCAxIOato+WcqFhYIFxcbiAgICBvcHRpb25hbCBpbnQ2NCBvcHRpbWUgPSA1OyAgLy/mnI3liqHnq6/mlLbliLDnlKjmiLfmk43kvZznmoTkuIrooYzml7bpl7QuIFxcbiAgfVxcbiAgICAgIFxcbiAgbWVzc2FnZSBcIitkaStcIiB7XFxuICAgIC8vIOWHoOS4quS6uiDmraPlnKjlubLku4DkuYhcXG4gICAgb3B0aW9uYWwgc3RyaW5nIHRhcmdldElkID0gMTsgLy8g6LaF57qn576kSWQgIOS8muivnWlkXFxuICAgIG9wdGlvbmFsIHN0cmluZyBidXNDaGFubmVsID0gMjsgLy8g6aKR6YGTKGNoYW5uZWxJZCzlj6/ku6XkuLrnqbopXFxuICAgIG9wdGlvbmFsIGludDMyIGNvdW50ICA9IDM7IC8vIOaTjeS9nOS6uuaVsFxcbiAgICBvcHRpb25hbCBpbnQzMiBvcFR5cGUgPSA0OyAvLzAsIOato+WcqOi+k+WFpSwgMSDmraPlnKhYWCBcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrQ2krXCJcXG4gIHtcXG4gICAgcmVxdWlyZWQgc3RyaW5nICBydGNSb29tSWQ9IDE7ICAvL3J0Y+aIv+mXtElEO1xcbiAgfVxcbiAgbWVzc2FnZSBcIitSaStcIlxcbiAge1xcbiAgICByZXF1aXJlZCBpbnQzMiBub3RoaW5nID0gMTsgICAvL+eUqOS6juWNoOS9jVxcbiAgfVxcbn1cXG5cIjt2YXIgQWksVWksYmksTGksUGksRGk9KEFpPXdpLGZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyPXt9O3JldHVybiByLkJ5dGVCdWZmZXI9ZSxyLmM9ZSxuPWUsci5Mb25nPXR8fG51bGwsci5WRVJTSU9OPVwiNS4wLjFcIixyLldJUkVfVFlQRVM9e30sci5XSVJFX1RZUEVTLlZBUklOVD0wLHIuV0lSRV9UWVBFUy5CSVRTNjQ9MSxyLldJUkVfVFlQRVMuTERFTElNPTIsci5XSVJFX1RZUEVTLlNUQVJUR1JPVVA9MyxyLldJUkVfVFlQRVMuRU5ER1JPVVA9NCxyLldJUkVfVFlQRVMuQklUUzMyPTUsci5QQUNLQUJMRV9XSVJFX1RZUEVTPVtyLldJUkVfVFlQRVMuVkFSSU5ULHIuV0lSRV9UWVBFUy5CSVRTNjQsci5XSVJFX1RZUEVTLkJJVFMzMl0sci5UWVBFUz17aW50MzI6e25hbWU6XCJpbnQzMlwiLHdpcmVUeXBlOnIuV0lSRV9UWVBFUy5WQVJJTlQsZGVmYXVsdFZhbHVlOjB9LHVpbnQzMjp7bmFtZTpcInVpbnQzMlwiLHdpcmVUeXBlOnIuV0lSRV9UWVBFUy5WQVJJTlQsZGVmYXVsdFZhbHVlOjB9LHNpbnQzMjp7bmFtZTpcInNpbnQzMlwiLHdpcmVUeXBlOnIuV0lSRV9UWVBFUy5WQVJJTlQsZGVmYXVsdFZhbHVlOjB9LGludDY0OntuYW1lOlwiaW50NjRcIix3aXJlVHlwZTpyLldJUkVfVFlQRVMuVkFSSU5ULGRlZmF1bHRWYWx1ZTpyLkxvbmc/ci5Mb25nLlpFUk86dm9pZCAwfSx1aW50NjQ6e25hbWU6XCJ1aW50NjRcIix3aXJlVHlwZTpyLldJUkVfVFlQRVMuVkFSSU5ULGRlZmF1bHRWYWx1ZTpyLkxvbmc/ci5Mb25nLlVaRVJPOnZvaWQgMH0sc2ludDY0OntuYW1lOlwic2ludDY0XCIsd2lyZVR5cGU6ci5XSVJFX1RZUEVTLlZBUklOVCxkZWZhdWx0VmFsdWU6ci5Mb25nP3IuTG9uZy5aRVJPOnZvaWQgMH0sYm9vbDp7bmFtZTpcImJvb2xcIix3aXJlVHlwZTpyLldJUkVfVFlQRVMuVkFSSU5ULGRlZmF1bHRWYWx1ZTohMX0sZG91YmxlOntuYW1lOlwiZG91YmxlXCIsd2lyZVR5cGU6ci5XSVJFX1RZUEVTLkJJVFM2NCxkZWZhdWx0VmFsdWU6MH0sc3RyaW5nOntuYW1lOlwic3RyaW5nXCIsd2lyZVR5cGU6ci5XSVJFX1RZUEVTLkxERUxJTSxkZWZhdWx0VmFsdWU6XCJcIn0sYnl0ZXM6e25hbWU6XCJieXRlc1wiLHdpcmVUeXBlOnIuV0lSRV9UWVBFUy5MREVMSU0sZGVmYXVsdFZhbHVlOm51bGx9LGZpeGVkMzI6e25hbWU6XCJmaXhlZDMyXCIsd2lyZVR5cGU6ci5XSVJFX1RZUEVTLkJJVFMzMixkZWZhdWx0VmFsdWU6MH0sc2ZpeGVkMzI6e25hbWU6XCJzZml4ZWQzMlwiLHdpcmVUeXBlOnIuV0lSRV9UWVBFUy5CSVRTMzIsZGVmYXVsdFZhbHVlOjB9LGZpeGVkNjQ6e25hbWU6XCJmaXhlZDY0XCIsd2lyZVR5cGU6ci5XSVJFX1RZUEVTLkJJVFM2NCxkZWZhdWx0VmFsdWU6ci5Mb25nP3IuTG9uZy5VWkVSTzp2b2lkIDB9LHNmaXhlZDY0OntuYW1lOlwic2ZpeGVkNjRcIix3aXJlVHlwZTpyLldJUkVfVFlQRVMuQklUUzY0LGRlZmF1bHRWYWx1ZTpyLkxvbmc/ci5Mb25nLlpFUk86dm9pZCAwfSxmbG9hdDp7bmFtZTpcImZsb2F0XCIsd2lyZVR5cGU6ci5XSVJFX1RZUEVTLkJJVFMzMixkZWZhdWx0VmFsdWU6MH0sZW51bTp7bmFtZTpcImVudW1cIix3aXJlVHlwZTpyLldJUkVfVFlQRVMuVkFSSU5ULGRlZmF1bHRWYWx1ZTowfSxtZXNzYWdlOntuYW1lOlwibWVzc2FnZVwiLHdpcmVUeXBlOnIuV0lSRV9UWVBFUy5MREVMSU0sZGVmYXVsdFZhbHVlOm51bGx9LGdyb3VwOntuYW1lOlwiZ3JvdXBcIix3aXJlVHlwZTpyLldJUkVfVFlQRVMuU1RBUlRHUk9VUCxkZWZhdWx0VmFsdWU6bnVsbH19LHIuTUFQX0tFWV9UWVBFUz1bci5UWVBFUy5pbnQzMixyLlRZUEVTLnNpbnQzMixyLlRZUEVTLnNmaXhlZDMyLHIuVFlQRVMudWludDMyLHIuVFlQRVMuZml4ZWQzMixyLlRZUEVTLmludDY0LHIuVFlQRVMuc2ludDY0LHIuVFlQRVMuc2ZpeGVkNjQsci5UWVBFUy51aW50NjQsci5UWVBFUy5maXhlZDY0LHIuVFlQRVMuYm9vbCxyLlRZUEVTLnN0cmluZyxyLlRZUEVTLmJ5dGVzXSxyLklEX01JTj0xLHIuSURfTUFYPTUzNjg3MDkxMSxyLmNvbnZlcnRGaWVsZHNUb0NhbWVsQ2FzZT0hMSxyLnBvcHVsYXRlQWNjZXNzb3JzPSEwLHIucG9wdWxhdGVEZWZhdWx0cz0hMCxyLlV0aWw9ZnVuY3Rpb24oKXt2YXIgZT17fTtyZXR1cm4gZS5JU19OT0RFPSEoXCJvYmplY3RcIiE9dHlwZW9mIHByb2Nlc3N8fHByb2Nlc3MrXCJcIiE9XCJbb2JqZWN0IHByb2Nlc3NdXCJ8fHByb2Nlc3MuYnJvd3NlciksZS5YSFI9ZnVuY3Rpb24oKXt2YXIgZSx0PVtmdW5jdGlvbigpe3JldHVybiBuZXcgWE1MSHR0cFJlcXVlc3R9LGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBBY3RpdmVYT2JqZWN0KFwiTXN4bWwyLlhNTEhUVFBcIil9LGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBBY3RpdmVYT2JqZWN0KFwiTXN4bWwzLlhNTEhUVFBcIil9LGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBBY3RpdmVYT2JqZWN0KFwiTWljcm9zb2Z0LlhNTEhUVFBcIil9XSxuPW51bGw7Zm9yKGU9MDtlPHQubGVuZ3RoO2UrKyl7dHJ5e249dFtlXSgpfWNhdGNoKGUpe2NvbnRpbnVlfWJyZWFrfWlmKCFuKXRocm93IEVycm9yKFwiWE1MSHR0cFJlcXVlc3QgaXMgbm90IHN1cHBvcnRlZFwiKTtyZXR1cm4gbn0sZS5mZXRjaD1mdW5jdGlvbih0LG4pe2lmKG4mJlwiZnVuY3Rpb25cIiE9dHlwZW9mIG4mJihuPW51bGwpLGUuSVNfTk9ERSlpZihuKWcucmVhZEZpbGUodCwoZnVuY3Rpb24oZSx0KXtuKGU/bnVsbDpcIlwiK3QpfSkpO2Vsc2UgdHJ5e3JldHVybiBnLnJlYWRGaWxlU3luYyh0KX1jYXRjaChlKXtyZXR1cm4gbnVsbH1lbHNle3ZhciBpPWUuWEhSKCk7aWYoaS5vcGVuKFwiR0VUXCIsdCwhIW4pLGkuc2V0UmVxdWVzdEhlYWRlcihcIkFjY2VwdFwiLFwidGV4dC9wbGFpblwiKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBpLm92ZXJyaWRlTWltZVR5cGUmJmkub3ZlcnJpZGVNaW1lVHlwZShcInRleHQvcGxhaW5cIiksIW4pcmV0dXJuIGkuc2VuZChudWxsKSwyMDA9PWkuc3RhdHVzfHwwPT1pLnN0YXR1cyYmXCJzdHJpbmdcIj09dHlwZW9mIGkucmVzcG9uc2VUZXh0P2kucmVzcG9uc2VUZXh0Om51bGw7aWYoaS5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXs0PT1pLnJlYWR5U3RhdGUmJigyMDA9PWkuc3RhdHVzfHwwPT1pLnN0YXR1cyYmXCJzdHJpbmdcIj09dHlwZW9mIGkucmVzcG9uc2VUZXh0P24oaS5yZXNwb25zZVRleHQpOm4obnVsbCkpfSw0PT1pLnJlYWR5U3RhdGUpcmV0dXJuO2kuc2VuZChudWxsKX19LGUudG9DYW1lbENhc2U9ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZSgvXyhbYS16QS1aXSkvZywoZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC50b1VwcGVyQ2FzZSgpfSkpfSxlfSgpLHIuTGFuZz17REVMSU06L1tcXHNcXHtcXH09OzpcXFtcXF0sJ1wiXFwoXFwpPD5dL2csUlVMRTovXig/OnJlcXVpcmVkfG9wdGlvbmFsfHJlcGVhdGVkfG1hcCkkLyxUWVBFOi9eKD86ZG91YmxlfGZsb2F0fGludDMyfHVpbnQzMnxzaW50MzJ8aW50NjR8dWludDY0fHNpbnQ2NHxmaXhlZDMyfHNmaXhlZDMyfGZpeGVkNjR8c2ZpeGVkNjR8Ym9vbHxzdHJpbmd8Ynl0ZXMpJC8sTkFNRTovXlthLXpBLVpfXVthLXpBLVpfMC05XSokLyxUWVBFREVGOi9eW2EtekEtWl1bYS16QS1aXzAtOV0qJC8sVFlQRVJFRjovXig/OlxcLj9bYS16QS1aX11bYS16QS1aXzAtOV0qKSskLyxGUVRZUEVSRUY6L14oPzpcXC5bYS16QS1aXVthLXpBLVpfMC05XSopKyQvLE5VTUJFUjovXi0/KD86WzEtOV1bMC05XSp8MHwwW3hYXVswLTlhLWZBLUZdK3wwWzAtN10rfChbMC05XSooXFwuWzAtOV0qKT8oW0VlXVsrLV0/WzAtOV0rKT8pfGluZnxuYW4pJC8sTlVNQkVSX0RFQzovXig/OlsxLTldWzAtOV0qfDApJC8sTlVNQkVSX0hFWDovXjBbeFhdWzAtOWEtZkEtRl0rJC8sTlVNQkVSX09DVDovXjBbMC03XSskLyxOVU1CRVJfRkxUOi9eKFswLTldKihcXC5bMC05XSopPyhbRWVdWystXT9bMC05XSspP3xpbmZ8bmFuKSQvLEJPT0w6L14oPzp0cnVlfGZhbHNlKSQvaSxJRDovXig/OlsxLTldWzAtOV0qfDB8MFt4WF1bMC05YS1mQS1GXSt8MFswLTddKykkLyxORUdJRDovXlxcLT8oPzpbMS05XVswLTldKnwwfDBbeFhdWzAtOWEtZkEtRl0rfDBbMC03XSspJC8sV0hJVEVTUEFDRTovXFxzLyxTVFJJTkc6Lyg/OlwiKFteXCJcXFxcXSooPzpcXFxcLlteXCJcXFxcXSopKilcIil8KD86JyhbXidcXFxcXSooPzpcXFxcLlteJ1xcXFxdKikqKScpL2csU1RSSU5HX0RROi8oPzpcIihbXlwiXFxcXF0qKD86XFxcXC5bXlwiXFxcXF0qKSopXCIpL2csU1RSSU5HX1NROi8oPzonKFteJ1xcXFxdKig/OlxcXFwuW14nXFxcXF0qKSopJykvZ30sci5Eb3RQcm90bz1mdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oZSxuKXt2YXIgaT0tMSxyPTE7aWYoXCItXCI9PWUuY2hhckF0KDApJiYocj0tMSxlPWUuc3Vic3RyaW5nKDEpKSx0Lk5VTUJFUl9ERUMudGVzdChlKSlpPXBhcnNlSW50KGUpO2Vsc2UgaWYodC5OVU1CRVJfSEVYLnRlc3QoZSkpaT1wYXJzZUludChlLnN1YnN0cmluZygyKSwxNik7ZWxzZXtpZighdC5OVU1CRVJfT0NULnRlc3QoZSkpdGhyb3cgRXJyb3IoXCJpbGxlZ2FsIGlkIHZhbHVlOiBcIisocjwwP1wiLVwiOlwiXCIpK2UpO2k9cGFyc2VJbnQoZS5zdWJzdHJpbmcoMSksOCl9aWYoaT0wfHIqaSwhbiYmaTwwKXRocm93IEVycm9yKFwiaWxsZWdhbCBpZCB2YWx1ZTogXCIrKHI8MD9cIi1cIjpcIlwiKStlKTtyZXR1cm4gaX1mdW5jdGlvbiBpKGUpe3ZhciBuPTE7aWYoXCItXCI9PWUuY2hhckF0KDApJiYobj0tMSxlPWUuc3Vic3RyaW5nKDEpKSx0Lk5VTUJFUl9ERUMudGVzdChlKSlyZXR1cm4gbipwYXJzZUludChlLDEwKTtpZih0Lk5VTUJFUl9IRVgudGVzdChlKSlyZXR1cm4gbipwYXJzZUludChlLnN1YnN0cmluZygyKSwxNik7aWYodC5OVU1CRVJfT0NULnRlc3QoZSkpcmV0dXJuIG4qcGFyc2VJbnQoZS5zdWJzdHJpbmcoMSksOCk7aWYoXCJpbmZcIj09PWUpcmV0dXJuIDEvMCpuO2lmKFwibmFuXCI9PT1lKXJldHVybiBOYU47aWYodC5OVU1CRVJfRkxULnRlc3QoZSkpcmV0dXJuIG4qcGFyc2VGbG9hdChlKTt0aHJvdyBFcnJvcihcImlsbGVnYWwgbnVtYmVyIHZhbHVlOiBcIisobjwwP1wiLVwiOlwiXCIpK2UpfWZ1bmN0aW9uIHIoZSx0LG4pe3ZvaWQgMD09PWVbdF0/ZVt0XT1uOihBcnJheS5pc0FycmF5KGVbdF0pfHwoZVt0XT1bZVt0XV0pLGVbdF0ucHVzaChuKSl9dmFyIHMsbyxhPXt9LHU9ZnVuY3Rpb24oZSl7dGhpcy5zb3VyY2U9ZStcIlwiLHRoaXMuaW5kZXg9MCx0aGlzLmxpbmU9MSx0aGlzLnN0YWNrPVtdLHRoaXMuX3N0cmluZ09wZW49bnVsbH0sYz11LnByb3RvdHlwZTtyZXR1cm4gYy5fcmVhZFN0cmluZz1mdW5jdGlvbigpe3ZhciBlLG49J1wiJz09PXRoaXMuX3N0cmluZ09wZW4/dC5TVFJJTkdfRFE6dC5TVFJJTkdfU1E7aWYobi5sYXN0SW5kZXg9dGhpcy5pbmRleC0xLCEoZT1uLmV4ZWModGhpcy5zb3VyY2UpKSl0aHJvdyBFcnJvcihcInVudGVybWluYXRlZCBzdHJpbmdcIik7cmV0dXJuIHRoaXMuaW5kZXg9bi5sYXN0SW5kZXgsdGhpcy5zdGFjay5wdXNoKHRoaXMuX3N0cmluZ09wZW4pLHRoaXMuX3N0cmluZ09wZW49bnVsbCxlWzFdfSxjLm5leHQ9ZnVuY3Rpb24oKXt2YXIgZSxuLGkscixzO2lmKHRoaXMuc3RhY2subGVuZ3RoPjApcmV0dXJuIHRoaXMuc3RhY2suc2hpZnQoKTtpZih0aGlzLmluZGV4Pj10aGlzLnNvdXJjZS5sZW5ndGgpcmV0dXJuIG51bGw7aWYobnVsbCE9PXRoaXMuX3N0cmluZ09wZW4pcmV0dXJuIHRoaXMuX3JlYWRTdHJpbmcoKTtkb3tmb3IoZT0hMTt0LldISVRFU1BBQ0UudGVzdChpPXRoaXMuc291cmNlLmNoYXJBdCh0aGlzLmluZGV4KSk7KWlmKFwiXFxuXCI9PT1pJiYrK3RoaXMubGluZSwrK3RoaXMuaW5kZXg9PT10aGlzLnNvdXJjZS5sZW5ndGgpcmV0dXJuIG51bGw7aWYoXCIvXCI9PT10aGlzLnNvdXJjZS5jaGFyQXQodGhpcy5pbmRleCkpaWYoKyt0aGlzLmluZGV4LFwiL1wiPT09dGhpcy5zb3VyY2UuY2hhckF0KHRoaXMuaW5kZXgpKXtmb3IoO1wiXFxuXCIhPT10aGlzLnNvdXJjZS5jaGFyQXQoKyt0aGlzLmluZGV4KTspaWYodGhpcy5pbmRleD09dGhpcy5zb3VyY2UubGVuZ3RoKXJldHVybiBudWxsOysrdGhpcy5pbmRleCwrK3RoaXMubGluZSxlPSEwfWVsc2V7aWYoXCIqXCIhPT0oaT10aGlzLnNvdXJjZS5jaGFyQXQodGhpcy5pbmRleCkpKXJldHVyblwiL1wiO2Rve2lmKFwiXFxuXCI9PT1pJiYrK3RoaXMubGluZSwrK3RoaXMuaW5kZXg9PT10aGlzLnNvdXJjZS5sZW5ndGgpcmV0dXJuIG51bGw7bj1pLGk9dGhpcy5zb3VyY2UuY2hhckF0KHRoaXMuaW5kZXgpfXdoaWxlKFwiKlwiIT09bnx8XCIvXCIhPT1pKTsrK3RoaXMuaW5kZXgsZT0hMH19d2hpbGUoZSk7aWYodGhpcy5pbmRleD09PXRoaXMuc291cmNlLmxlbmd0aClyZXR1cm4gbnVsbDtpZihyPXRoaXMuaW5kZXgsdC5ERUxJTS5sYXN0SW5kZXg9MCwhdC5ERUxJTS50ZXN0KHRoaXMuc291cmNlLmNoYXJBdChyKyspKSlmb3IoO3I8dGhpcy5zb3VyY2UubGVuZ3RoJiYhdC5ERUxJTS50ZXN0KHRoaXMuc291cmNlLmNoYXJBdChyKSk7KSsrcjtyZXR1cm4oJ1wiJz09PShzPXRoaXMuc291cmNlLnN1YnN0cmluZyh0aGlzLmluZGV4LHRoaXMuaW5kZXg9cikpfHxcIidcIj09PXMpJiYodGhpcy5fc3RyaW5nT3Blbj1zKSxzfSxjLnBlZWs9ZnVuY3Rpb24oKXtpZigwPT09dGhpcy5zdGFjay5sZW5ndGgpe3ZhciBlPXRoaXMubmV4dCgpO2lmKG51bGw9PT1lKXJldHVybiBudWxsO3RoaXMuc3RhY2sucHVzaChlKX1yZXR1cm4gdGhpcy5zdGFja1swXX0sYy5za2lwPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMubmV4dCgpO2lmKHQhPT1lKXRocm93IEVycm9yKFwiaWxsZWdhbCAnXCIrdCtcIicsICdcIitlK1wiJyBleHBlY3RlZFwiKX0sYy5vbWl0PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnBlZWsoKT09PWUmJih0aGlzLm5leHQoKSwhMCl9LGMudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm5cIlRva2VuaXplciAoXCIrdGhpcy5pbmRleCtcIi9cIit0aGlzLnNvdXJjZS5sZW5ndGgrXCIgYXQgbGluZSBcIit0aGlzLmxpbmUrXCIpXCJ9LGEuVG9rZW5pemVyPXUsKG89KHM9ZnVuY3Rpb24oZSl7dGhpcy50bj1uZXcgdShlKSx0aGlzLnByb3RvMz0hMX0pLnByb3RvdHlwZSkucGFyc2U9ZnVuY3Rpb24oKXt2YXIgZSxuPXtuYW1lOlwiW1JPT1RdXCIscGFja2FnZTpudWxsLG1lc3NhZ2VzOltdLGVudW1zOltdLGltcG9ydHM6W10sb3B0aW9uczp7fSxzZXJ2aWNlczpbXX0saT0hMDt0cnl7Zm9yKDtlPXRoaXMudG4ubmV4dCgpOylzd2l0Y2goZSl7Y2FzZVwicGFja2FnZVwiOmlmKCFpfHxudWxsIT09bi5wYWNrYWdlKXRocm93IEVycm9yKFwidW5leHBlY3RlZCAncGFja2FnZSdcIik7aWYoZT10aGlzLnRuLm5leHQoKSwhdC5UWVBFUkVGLnRlc3QoZSkpdGhyb3cgRXJyb3IoXCJpbGxlZ2FsIHBhY2thZ2UgbmFtZTogXCIrZSk7dGhpcy50bi5za2lwKFwiO1wiKSxuLnBhY2thZ2U9ZTticmVhaztjYXNlXCJpbXBvcnRcIjppZighaSl0aHJvdyBFcnJvcihcInVuZXhwZWN0ZWQgJ2ltcG9ydCdcIik7XCJwdWJsaWNcIj09PShlPXRoaXMudG4ucGVlaygpKSYmdGhpcy50bi5uZXh0KCksZT10aGlzLl9yZWFkU3RyaW5nKCksdGhpcy50bi5za2lwKFwiO1wiKSxuLmltcG9ydHMucHVzaChlKTticmVhaztjYXNlXCJzeW50YXhcIjppZighaSl0aHJvdyBFcnJvcihcInVuZXhwZWN0ZWQgJ3N5bnRheCdcIik7dGhpcy50bi5za2lwKFwiPVwiKSxcInByb3RvM1wiPT09KG4uc3ludGF4PXRoaXMuX3JlYWRTdHJpbmcoKSkmJih0aGlzLnByb3RvMz0hMCksdGhpcy50bi5za2lwKFwiO1wiKTticmVhaztjYXNlXCJtZXNzYWdlXCI6dGhpcy5fcGFyc2VNZXNzYWdlKG4sbnVsbCksaT0hMTticmVhaztjYXNlXCJlbnVtXCI6dGhpcy5fcGFyc2VFbnVtKG4pLGk9ITE7YnJlYWs7Y2FzZVwib3B0aW9uXCI6dGhpcy5fcGFyc2VPcHRpb24obik7YnJlYWs7Y2FzZVwic2VydmljZVwiOnRoaXMuX3BhcnNlU2VydmljZShuKTticmVhaztjYXNlXCJleHRlbmRcIjp0aGlzLl9wYXJzZUV4dGVuZChuKTticmVhaztkZWZhdWx0OnRocm93IEVycm9yKFwidW5leHBlY3RlZCAnXCIrZStcIidcIil9fWNhdGNoKGUpe3Rocm93IGUubWVzc2FnZT1cIlBhcnNlIGVycm9yIGF0IGxpbmUgXCIrdGhpcy50bi5saW5lK1wiOiBcIitlLm1lc3NhZ2UsZX1yZXR1cm4gZGVsZXRlIG4ubmFtZSxufSxzLnBhcnNlPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgcyhlKS5wYXJzZSgpfSxvLl9yZWFkU3RyaW5nPWZ1bmN0aW9uKCl7dmFyIGUsdCxuPVwiXCI7ZG97aWYoXCInXCIhPT0odD10aGlzLnRuLm5leHQoKSkmJidcIichPT10KXRocm93IEVycm9yKFwiaWxsZWdhbCBzdHJpbmcgZGVsaW1pdGVyOiBcIit0KTtuKz10aGlzLnRuLm5leHQoKSx0aGlzLnRuLnNraXAodCksZT10aGlzLnRuLnBlZWsoKX13aGlsZSgnXCInPT09ZXx8J1wiJz09PWUpO3JldHVybiBufSxvLl9yZWFkVmFsdWU9ZnVuY3Rpb24oZSl7dmFyIG49dGhpcy50bi5wZWVrKCk7aWYoJ1wiJz09PW58fFwiJ1wiPT09bilyZXR1cm4gdGhpcy5fcmVhZFN0cmluZygpO2lmKHRoaXMudG4ubmV4dCgpLHQuTlVNQkVSLnRlc3QobikpcmV0dXJuIGkobik7aWYodC5CT09MLnRlc3QobikpcmV0dXJuXCJ0cnVlXCI9PT1uLnRvTG93ZXJDYXNlKCk7aWYoZSYmdC5UWVBFUkVGLnRlc3QobikpcmV0dXJuIG47dGhyb3cgRXJyb3IoXCJpbGxlZ2FsIHZhbHVlOiBcIituKX0sby5fcGFyc2VPcHRpb249ZnVuY3Rpb24oZSxuKXt2YXIgaSxyPXRoaXMudG4ubmV4dCgpLHM9ITE7aWYoXCIoXCI9PT1yJiYocz0hMCxyPXRoaXMudG4ubmV4dCgpKSwhdC5UWVBFUkVGLnRlc3QocikpdGhyb3cgRXJyb3IoXCJpbGxlZ2FsIG9wdGlvbiBuYW1lOiBcIityKTtpPXIscyYmKHRoaXMudG4uc2tpcChcIilcIiksaT1cIihcIitpK1wiKVwiLHI9dGhpcy50bi5wZWVrKCksdC5GUVRZUEVSRUYudGVzdChyKSYmKGkrPXIsdGhpcy50bi5uZXh0KCkpKSx0aGlzLnRuLnNraXAoXCI9XCIpLHRoaXMuX3BhcnNlT3B0aW9uVmFsdWUoZSxpKSxufHx0aGlzLnRuLnNraXAoXCI7XCIpfSxvLl9wYXJzZU9wdGlvblZhbHVlPWZ1bmN0aW9uKGUsbil7dmFyIGk9dGhpcy50bi5wZWVrKCk7aWYoXCJ7XCIhPT1pKXIoZS5vcHRpb25zLG4sdGhpcy5fcmVhZFZhbHVlKCEwKSk7ZWxzZSBmb3IodGhpcy50bi5za2lwKFwie1wiKTtcIn1cIiE9PShpPXRoaXMudG4ubmV4dCgpKTspe2lmKCF0Lk5BTUUudGVzdChpKSl0aHJvdyBFcnJvcihcImlsbGVnYWwgb3B0aW9uIG5hbWU6IFwiK24rXCIuXCIraSk7dGhpcy50bi5vbWl0KFwiOlwiKT9yKGUub3B0aW9ucyxuK1wiLlwiK2ksdGhpcy5fcmVhZFZhbHVlKCEwKSk6dGhpcy5fcGFyc2VPcHRpb25WYWx1ZShlLG4rXCIuXCIraSl9fSxvLl9wYXJzZVNlcnZpY2U9ZnVuY3Rpb24oZSl7dmFyIG4saT10aGlzLnRuLm5leHQoKTtpZighdC5OQU1FLnRlc3QoaSkpdGhyb3cgRXJyb3IoXCJpbGxlZ2FsIHNlcnZpY2UgbmFtZSBhdCBsaW5lIFwiK3RoaXMudG4ubGluZStcIjogXCIraSk7Zm9yKG49e25hbWU6aSxycGM6e30sb3B0aW9uczp7fX0sdGhpcy50bi5za2lwKFwie1wiKTtcIn1cIiE9PShpPXRoaXMudG4ubmV4dCgpKTspaWYoXCJvcHRpb25cIj09PWkpdGhpcy5fcGFyc2VPcHRpb24obik7ZWxzZXtpZihcInJwY1wiIT09aSl0aHJvdyBFcnJvcihcImlsbGVnYWwgc2VydmljZSB0b2tlbjogXCIraSk7dGhpcy5fcGFyc2VTZXJ2aWNlUlBDKG4pfXRoaXMudG4ub21pdChcIjtcIiksZS5zZXJ2aWNlcy5wdXNoKG4pfSxvLl9wYXJzZVNlcnZpY2VSUEM9ZnVuY3Rpb24oZSl7dmFyIG4saSxyPVwicnBjXCIscz10aGlzLnRuLm5leHQoKTtpZighdC5OQU1FLnRlc3QocykpdGhyb3cgRXJyb3IoXCJpbGxlZ2FsIHJwYyBzZXJ2aWNlIG1ldGhvZCBuYW1lOiBcIitzKTtpZihuPXMsaT17cmVxdWVzdDpudWxsLHJlc3BvbnNlOm51bGwscmVxdWVzdF9zdHJlYW06ITEscmVzcG9uc2Vfc3RyZWFtOiExLG9wdGlvbnM6e319LHRoaXMudG4uc2tpcChcIihcIiksXCJzdHJlYW1cIj09PShzPXRoaXMudG4ubmV4dCgpKS50b0xvd2VyQ2FzZSgpJiYoaS5yZXF1ZXN0X3N0cmVhbT0hMCxzPXRoaXMudG4ubmV4dCgpKSwhdC5UWVBFUkVGLnRlc3QocykpdGhyb3cgRXJyb3IoXCJpbGxlZ2FsIHJwYyBzZXJ2aWNlIHJlcXVlc3QgdHlwZTogXCIrcyk7aWYoaS5yZXF1ZXN0PXMsdGhpcy50bi5za2lwKFwiKVwiKSxcInJldHVybnNcIiE9PShzPXRoaXMudG4ubmV4dCgpKS50b0xvd2VyQ2FzZSgpKXRocm93IEVycm9yKFwiaWxsZWdhbCBycGMgc2VydmljZSByZXF1ZXN0IHR5cGUgZGVsaW1pdGVyOiBcIitzKTtpZih0aGlzLnRuLnNraXAoXCIoXCIpLFwic3RyZWFtXCI9PT0ocz10aGlzLnRuLm5leHQoKSkudG9Mb3dlckNhc2UoKSYmKGkucmVzcG9uc2Vfc3RyZWFtPSEwLHM9dGhpcy50bi5uZXh0KCkpLGkucmVzcG9uc2U9cyx0aGlzLnRuLnNraXAoXCIpXCIpLFwie1wiPT09KHM9dGhpcy50bi5wZWVrKCkpKXtmb3IodGhpcy50bi5uZXh0KCk7XCJ9XCIhPT0ocz10aGlzLnRuLm5leHQoKSk7KXtpZihcIm9wdGlvblwiIT09cyl0aHJvdyBFcnJvcihcImlsbGVnYWwgcnBjIHNlcnZpY2UgdG9rZW46IFwiK3MpO3RoaXMuX3BhcnNlT3B0aW9uKGkpfXRoaXMudG4ub21pdChcIjtcIil9ZWxzZSB0aGlzLnRuLnNraXAoXCI7XCIpO3ZvaWQgMD09PWVbcl0mJihlW3JdPXt9KSxlW3JdW25dPWl9LG8uX3BhcnNlTWVzc2FnZT1mdW5jdGlvbihlLGkpe3ZhciByPSEhaSxzPXRoaXMudG4ubmV4dCgpLG89e25hbWU6XCJcIixmaWVsZHM6W10sZW51bXM6W10sbWVzc2FnZXM6W10sb3B0aW9uczp7fSxzZXJ2aWNlczpbXSxvbmVvZnM6e319O2lmKCF0Lk5BTUUudGVzdChzKSl0aHJvdyBFcnJvcihcImlsbGVnYWwgXCIrKHI/XCJncm91cFwiOlwibWVzc2FnZVwiKStcIiBuYW1lOiBcIitzKTtmb3Ioby5uYW1lPXMsciYmKHRoaXMudG4uc2tpcChcIj1cIiksaS5pZD1uKHRoaXMudG4ubmV4dCgpKSxvLmlzR3JvdXA9ITApLFwiW1wiPT09KHM9dGhpcy50bi5wZWVrKCkpJiZpJiZ0aGlzLl9wYXJzZUZpZWxkT3B0aW9ucyhpKSx0aGlzLnRuLnNraXAoXCJ7XCIpO1wifVwiIT09KHM9dGhpcy50bi5uZXh0KCkpOylpZih0LlJVTEUudGVzdChzKSl0aGlzLl9wYXJzZU1lc3NhZ2VGaWVsZChvLHMpO2Vsc2UgaWYoXCJvbmVvZlwiPT09cyl0aGlzLl9wYXJzZU1lc3NhZ2VPbmVPZihvKTtlbHNlIGlmKFwiZW51bVwiPT09cyl0aGlzLl9wYXJzZUVudW0obyk7ZWxzZSBpZihcIm1lc3NhZ2VcIj09PXMpdGhpcy5fcGFyc2VNZXNzYWdlKG8pO2Vsc2UgaWYoXCJvcHRpb25cIj09PXMpdGhpcy5fcGFyc2VPcHRpb24obyk7ZWxzZSBpZihcInNlcnZpY2VcIj09PXMpdGhpcy5fcGFyc2VTZXJ2aWNlKG8pO2Vsc2UgaWYoXCJleHRlbnNpb25zXCI9PT1zKW8uZXh0ZW5zaW9ucz10aGlzLl9wYXJzZUV4dGVuc2lvblJhbmdlcygpO2Vsc2UgaWYoXCJyZXNlcnZlZFwiPT09cyl0aGlzLl9wYXJzZUlnbm9yZWQoKTtlbHNlIGlmKFwiZXh0ZW5kXCI9PT1zKXRoaXMuX3BhcnNlRXh0ZW5kKG8pO2Vsc2V7aWYoIXQuVFlQRVJFRi50ZXN0KHMpKXRocm93IEVycm9yKFwiaWxsZWdhbCBtZXNzYWdlIHRva2VuOiBcIitzKTtpZighdGhpcy5wcm90bzMpdGhyb3cgRXJyb3IoXCJpbGxlZ2FsIGZpZWxkIHJ1bGU6IFwiK3MpO3RoaXMuX3BhcnNlTWVzc2FnZUZpZWxkKG8sXCJvcHRpb25hbFwiLHMpfXJldHVybiB0aGlzLnRuLm9taXQoXCI7XCIpLGUubWVzc2FnZXMucHVzaChvKSxvfSxvLl9wYXJzZUlnbm9yZWQ9ZnVuY3Rpb24oKXtmb3IoO1wiO1wiIT09dGhpcy50bi5wZWVrKCk7KXRoaXMudG4ubmV4dCgpO3RoaXMudG4uc2tpcChcIjtcIil9LG8uX3BhcnNlTWVzc2FnZUZpZWxkPWZ1bmN0aW9uKGUsaSxyKXt2YXIgcyxvLGE7aWYoIXQuUlVMRS50ZXN0KGkpKXRocm93IEVycm9yKFwiaWxsZWdhbCBtZXNzYWdlIGZpZWxkIHJ1bGU6IFwiK2kpO2lmKHM9e3J1bGU6aSx0eXBlOlwiXCIsbmFtZTpcIlwiLG9wdGlvbnM6e30saWQ6MH0sXCJtYXBcIj09PWkpe2lmKHIpdGhyb3cgRXJyb3IoXCJpbGxlZ2FsIHR5cGU6IFwiK3IpO2lmKHRoaXMudG4uc2tpcChcIjxcIiksbz10aGlzLnRuLm5leHQoKSwhdC5UWVBFLnRlc3QobykmJiF0LlRZUEVSRUYudGVzdChvKSl0aHJvdyBFcnJvcihcImlsbGVnYWwgbWVzc2FnZSBmaWVsZCB0eXBlOiBcIitvKTtpZihzLmtleXR5cGU9byx0aGlzLnRuLnNraXAoXCIsXCIpLG89dGhpcy50bi5uZXh0KCksIXQuVFlQRS50ZXN0KG8pJiYhdC5UWVBFUkVGLnRlc3QobykpdGhyb3cgRXJyb3IoXCJpbGxlZ2FsIG1lc3NhZ2UgZmllbGQ6IFwiK28pO2lmKHMudHlwZT1vLHRoaXMudG4uc2tpcChcIj5cIiksbz10aGlzLnRuLm5leHQoKSwhdC5OQU1FLnRlc3QobykpdGhyb3cgRXJyb3IoXCJpbGxlZ2FsIG1lc3NhZ2UgZmllbGQgbmFtZTogXCIrbyk7cy5uYW1lPW8sdGhpcy50bi5za2lwKFwiPVwiKSxzLmlkPW4odGhpcy50bi5uZXh0KCkpLFwiW1wiPT09KG89dGhpcy50bi5wZWVrKCkpJiZ0aGlzLl9wYXJzZUZpZWxkT3B0aW9ucyhzKSx0aGlzLnRuLnNraXAoXCI7XCIpfWVsc2UgaWYoXCJncm91cFwiPT09KHI9dm9pZCAwIT09cj9yOnRoaXMudG4ubmV4dCgpKSl7aWYoYT10aGlzLl9wYXJzZU1lc3NhZ2UoZSxzKSwhL15bQS1aXS8udGVzdChhLm5hbWUpKXRocm93IEVycm9yKFwiaWxsZWdhbCBncm91cCBuYW1lOiBcIithLm5hbWUpO3MudHlwZT1hLm5hbWUscy5uYW1lPWEubmFtZS50b0xvd2VyQ2FzZSgpLHRoaXMudG4ub21pdChcIjtcIil9ZWxzZXtpZighdC5UWVBFLnRlc3QocikmJiF0LlRZUEVSRUYudGVzdChyKSl0aHJvdyBFcnJvcihcImlsbGVnYWwgbWVzc2FnZSBmaWVsZCB0eXBlOiBcIityKTtpZihzLnR5cGU9cixvPXRoaXMudG4ubmV4dCgpLCF0Lk5BTUUudGVzdChvKSl0aHJvdyBFcnJvcihcImlsbGVnYWwgbWVzc2FnZSBmaWVsZCBuYW1lOiBcIitvKTtzLm5hbWU9byx0aGlzLnRuLnNraXAoXCI9XCIpLHMuaWQ9bih0aGlzLnRuLm5leHQoKSksXCJbXCI9PT0obz10aGlzLnRuLnBlZWsoKSkmJnRoaXMuX3BhcnNlRmllbGRPcHRpb25zKHMpLHRoaXMudG4uc2tpcChcIjtcIil9cmV0dXJuIGUuZmllbGRzLnB1c2gocyksc30sby5fcGFyc2VNZXNzYWdlT25lT2Y9ZnVuY3Rpb24oZSl7dmFyIG4saSxyLHM9dGhpcy50bi5uZXh0KCk7aWYoIXQuTkFNRS50ZXN0KHMpKXRocm93IEVycm9yKFwiaWxsZWdhbCBvbmVvZiBuYW1lOiBcIitzKTtmb3IoaT1zLHI9W10sdGhpcy50bi5za2lwKFwie1wiKTtcIn1cIiE9PShzPXRoaXMudG4ubmV4dCgpKTspKG49dGhpcy5fcGFyc2VNZXNzYWdlRmllbGQoZSxcIm9wdGlvbmFsXCIscykpLm9uZW9mPWksci5wdXNoKG4uaWQpO3RoaXMudG4ub21pdChcIjtcIiksZS5vbmVvZnNbaV09cn0sby5fcGFyc2VGaWVsZE9wdGlvbnM9ZnVuY3Rpb24oZSl7dGhpcy50bi5za2lwKFwiW1wiKTtmb3IodmFyIHQ9ITA7XCJdXCIhPT10aGlzLnRuLnBlZWsoKTspdHx8dGhpcy50bi5za2lwKFwiLFwiKSx0aGlzLl9wYXJzZU9wdGlvbihlLCEwKSx0PSExO3RoaXMudG4ubmV4dCgpfSxvLl9wYXJzZUVudW09ZnVuY3Rpb24oZSl7dmFyIGkscj17bmFtZTpcIlwiLHZhbHVlczpbXSxvcHRpb25zOnt9fSxzPXRoaXMudG4ubmV4dCgpO2lmKCF0Lk5BTUUudGVzdChzKSl0aHJvdyBFcnJvcihcImlsbGVnYWwgbmFtZTogXCIrcyk7Zm9yKHIubmFtZT1zLHRoaXMudG4uc2tpcChcIntcIik7XCJ9XCIhPT0ocz10aGlzLnRuLm5leHQoKSk7KWlmKFwib3B0aW9uXCI9PT1zKXRoaXMuX3BhcnNlT3B0aW9uKHIpO2Vsc2V7aWYoIXQuTkFNRS50ZXN0KHMpKXRocm93IEVycm9yKFwiaWxsZWdhbCBuYW1lOiBcIitzKTt0aGlzLnRuLnNraXAoXCI9XCIpLGk9e25hbWU6cyxpZDpuKHRoaXMudG4ubmV4dCgpLCEwKX0sXCJbXCI9PT0ocz10aGlzLnRuLnBlZWsoKSkmJnRoaXMuX3BhcnNlRmllbGRPcHRpb25zKHtvcHRpb25zOnt9fSksdGhpcy50bi5za2lwKFwiO1wiKSxyLnZhbHVlcy5wdXNoKGkpfXRoaXMudG4ub21pdChcIjtcIiksZS5lbnVtcy5wdXNoKHIpfSxvLl9wYXJzZUV4dGVuc2lvblJhbmdlcz1mdW5jdGlvbigpe3ZhciB0LG4scixzPVtdO2Rve2ZvcihuPVtdOzspe3N3aXRjaCh0PXRoaXMudG4ubmV4dCgpKXtjYXNlXCJtaW5cIjpyPWUuSURfTUlOO2JyZWFrO2Nhc2VcIm1heFwiOnI9ZS5JRF9NQVg7YnJlYWs7ZGVmYXVsdDpyPWkodCl9aWYobi5wdXNoKHIpLDI9PT1uLmxlbmd0aClicmVhaztpZihcInRvXCIhPT10aGlzLnRuLnBlZWsoKSl7bi5wdXNoKHIpO2JyZWFrfXRoaXMudG4ubmV4dCgpfXMucHVzaChuKX13aGlsZSh0aGlzLnRuLm9taXQoXCIsXCIpKTtyZXR1cm4gdGhpcy50bi5za2lwKFwiO1wiKSxzfSxvLl9wYXJzZUV4dGVuZD1mdW5jdGlvbihlKXt2YXIgbixpPXRoaXMudG4ubmV4dCgpO2lmKCF0LlRZUEVSRUYudGVzdChpKSl0aHJvdyBFcnJvcihcImlsbGVnYWwgZXh0ZW5kIHJlZmVyZW5jZTogXCIraSk7Zm9yKG49e3JlZjppLGZpZWxkczpbXX0sdGhpcy50bi5za2lwKFwie1wiKTtcIn1cIiE9PShpPXRoaXMudG4ubmV4dCgpKTspaWYodC5SVUxFLnRlc3QoaSkpdGhpcy5fcGFyc2VNZXNzYWdlRmllbGQobixpKTtlbHNle2lmKCF0LlRZUEVSRUYudGVzdChpKSl0aHJvdyBFcnJvcihcImlsbGVnYWwgZXh0ZW5kIHRva2VuOiBcIitpKTtpZighdGhpcy5wcm90bzMpdGhyb3cgRXJyb3IoXCJpbGxlZ2FsIGZpZWxkIHJ1bGU6IFwiK2kpO3RoaXMuX3BhcnNlTWVzc2FnZUZpZWxkKG4sXCJvcHRpb25hbFwiLGkpfXJldHVybiB0aGlzLnRuLm9taXQoXCI7XCIpLGUubWVzc2FnZXMucHVzaChuKSxufSxvLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuXCJQYXJzZXIgYXQgbGluZSBcIit0aGlzLnRuLmxpbmV9LGEuUGFyc2VyPXMsYX0ocixyLkxhbmcpLHIuUmVmbGVjdD1mdW5jdGlvbih0KXtmdW5jdGlvbiBpKGUsbil7aWYoZSYmXCJudW1iZXJcIj09dHlwZW9mIGUubG93JiZcIm51bWJlclwiPT10eXBlb2YgZS5oaWdoJiZcImJvb2xlYW5cIj09dHlwZW9mIGUudW5zaWduZWQmJmUubG93PT1lLmxvdyYmZS5oaWdoPT1lLmhpZ2gpcmV0dXJuIG5ldyB0LkxvbmcoZS5sb3csZS5oaWdoLHZvaWQgMD09PW4/ZS51bnNpZ25lZDpuKTtpZihcInN0cmluZ1wiPT10eXBlb2YgZSlyZXR1cm4gdC5Mb25nLmZyb21TdHJpbmcoZSxufHwhMSwxMCk7aWYoXCJudW1iZXJcIj09dHlwZW9mIGUpcmV0dXJuIHQuTG9uZy5mcm9tTnVtYmVyKGUsbnx8ITEpO3Rocm93IEVycm9yKFwibm90IGNvbnZlcnRpYmxlIHRvIExvbmdcIil9ZnVuY3Rpb24gcihlLG4pe3ZhciBpPW4ucmVhZFZhcmludDMyKCkscz03Jmksbz1pPj4+Mztzd2l0Y2gocyl7Y2FzZSB0LldJUkVfVFlQRVMuVkFSSU5UOmRve2k9bi5yZWFkVWludDgoKX13aGlsZSgxMjg9PSgxMjgmaSkpO2JyZWFrO2Nhc2UgdC5XSVJFX1RZUEVTLkJJVFM2NDpuLm9mZnNldCs9ODticmVhaztjYXNlIHQuV0lSRV9UWVBFUy5MREVMSU06aT1uLnJlYWRWYXJpbnQzMigpLG4ub2Zmc2V0Kz1pO2JyZWFrO2Nhc2UgdC5XSVJFX1RZUEVTLlNUQVJUR1JPVVA6cihvLG4pO2JyZWFrO2Nhc2UgdC5XSVJFX1RZUEVTLkVOREdST1VQOmlmKG89PT1lKXJldHVybiExO3Rocm93IEVycm9yKFwiSWxsZWdhbCBHUk9VUEVORCBhZnRlciB1bmtub3duIGdyb3VwOiBcIitvK1wiIChcIitlK1wiIGV4cGVjdGVkKVwiKTtjYXNlIHQuV0lSRV9UWVBFUy5CSVRTMzI6bi5vZmZzZXQrPTQ7YnJlYWs7ZGVmYXVsdDp0aHJvdyBFcnJvcihcIklsbGVnYWwgd2lyZSB0eXBlIGluIHVua25vd24gZ3JvdXAgXCIrZStcIjogXCIrcyl9cmV0dXJuITB9dmFyIHMsbyxhLHUsYyxoLGwsZCxmLHAsZyxfLHksbSx2LEUsVD17fSxJPWZ1bmN0aW9uKGUsdCxuKXt0aGlzLmJ1aWxkZXI9ZSx0aGlzLnBhcmVudD10LHRoaXMubmFtZT1uLHRoaXMuY2xhc3NOYW1lfSxDPUkucHJvdG90eXBlO3JldHVybiBDLmZxbj1mdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzLm5hbWUsdD10aGlzO251bGwhPSh0PXQucGFyZW50KTspZT10Lm5hbWUrXCIuXCIrZTtyZXR1cm4gZX0sQy50b1N0cmluZz1mdW5jdGlvbihlKXtyZXR1cm4oZT90aGlzLmNsYXNzTmFtZStcIiBcIjpcIlwiKSt0aGlzLmZxbigpfSxDLmJ1aWxkPWZ1bmN0aW9uKCl7dGhyb3cgRXJyb3IodGhpcy50b1N0cmluZyghMCkrXCIgY2Fubm90IGJlIGJ1aWx0IGRpcmVjdGx5XCIpfSxULlQ9SSwobz0ocz1mdW5jdGlvbihlLHQsbixpLHIpe0kuY2FsbCh0aGlzLGUsdCxuKSx0aGlzLmNsYXNzTmFtZT1cIk5hbWVzcGFjZVwiLHRoaXMuY2hpbGRyZW49W10sdGhpcy5vcHRpb25zPWl8fHt9LHRoaXMuc3ludGF4PXJ8fFwicHJvdG8yXCJ9KS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShJLnByb3RvdHlwZSkpLmdldENoaWxkcmVuPWZ1bmN0aW9uKGUpe3ZhciB0LG4saTtpZihudWxsPT0oZT1lfHxudWxsKSlyZXR1cm4gdGhpcy5jaGlsZHJlbi5zbGljZSgpO2Zvcih0PVtdLG49MCxpPXRoaXMuY2hpbGRyZW4ubGVuZ3RoO2k+bjsrK24pdGhpcy5jaGlsZHJlbltuXWluc3RhbmNlb2YgZSYmdC5wdXNoKHRoaXMuY2hpbGRyZW5bbl0pO3JldHVybiB0fSxvLmFkZENoaWxkPWZ1bmN0aW9uKGUpe3ZhciB0O2lmKHQ9dGhpcy5nZXRDaGlsZChlLm5hbWUpKWlmKHQgaW5zdGFuY2VvZiBjLkZpZWxkJiZ0Lm5hbWUhPT10Lm9yaWdpbmFsTmFtZSYmbnVsbD09PXRoaXMuZ2V0Q2hpbGQodC5vcmlnaW5hbE5hbWUpKXQubmFtZT10Lm9yaWdpbmFsTmFtZTtlbHNle2lmKCEoZSBpbnN0YW5jZW9mIGMuRmllbGQmJmUubmFtZSE9PWUub3JpZ2luYWxOYW1lJiZudWxsPT09dGhpcy5nZXRDaGlsZChlLm9yaWdpbmFsTmFtZSkpKXRocm93IEVycm9yKFwiRHVwbGljYXRlIG5hbWUgaW4gbmFtZXNwYWNlIFwiK3RoaXMudG9TdHJpbmcoITApK1wiOiBcIitlLm5hbWUpO2UubmFtZT1lLm9yaWdpbmFsTmFtZX10aGlzLmNoaWxkcmVuLnB1c2goZSl9LG8uZ2V0Q2hpbGQ9ZnVuY3Rpb24oZSl7dmFyIHQsbixpPVwibnVtYmVyXCI9PXR5cGVvZiBlP1wiaWRcIjpcIm5hbWVcIjtmb3IodD0wLG49dGhpcy5jaGlsZHJlbi5sZW5ndGg7bj50OysrdClpZih0aGlzLmNoaWxkcmVuW3RdW2ldPT09ZSlyZXR1cm4gdGhpcy5jaGlsZHJlblt0XTtyZXR1cm4gbnVsbH0sby5yZXNvbHZlPWZ1bmN0aW9uKGUsdCl7dmFyIG4saT1cInN0cmluZ1wiPT10eXBlb2YgZT9lLnNwbGl0KFwiLlwiKTplLHI9dGhpcyxzPTA7aWYoXCJcIj09PWlbc10pe2Zvcig7bnVsbCE9PXIucGFyZW50OylyPXIucGFyZW50O3MrK31kb3tkb3tpZighKHIgaW5zdGFuY2VvZiBULk5hbWVzcGFjZSkpe3I9bnVsbDticmVha31pZighKChuPXIuZ2V0Q2hpbGQoaVtzXSkpJiZuIGluc3RhbmNlb2YgVC5UJiYoIXR8fG4gaW5zdGFuY2VvZiBULk5hbWVzcGFjZSkpKXtyPW51bGw7YnJlYWt9cj1uLHMrK313aGlsZShzPGkubGVuZ3RoKTtpZihudWxsIT1yKWJyZWFrO2lmKG51bGwhPT10aGlzLnBhcmVudClyZXR1cm4gdGhpcy5wYXJlbnQucmVzb2x2ZShlLHQpfXdoaWxlKG51bGwhPXIpO3JldHVybiByfSxvLnFuPWZ1bmN0aW9uKGUpe3ZhciB0LG4saT1bXSxyPWU7ZG97aS51bnNoaWZ0KHIubmFtZSkscj1yLnBhcmVudH13aGlsZShudWxsIT09cik7Zm9yKHQ9MTt0PD1pLmxlbmd0aDt0KyspaWYobj1pLnNsaWNlKGkubGVuZ3RoLXQpLGU9PT10aGlzLnJlc29sdmUobixlIGluc3RhbmNlb2YgVC5OYW1lc3BhY2UpKXJldHVybiBuLmpvaW4oXCIuXCIpO3JldHVybiBlLmZxbigpfSxvLmJ1aWxkPWZ1bmN0aW9uKCl7dmFyIGUsdCxuLGk9e30scj10aGlzLmNoaWxkcmVuO2Zvcih0PTAsbj1yLmxlbmd0aDtuPnQ7Kyt0KShlPXJbdF0paW5zdGFuY2VvZiBzJiYoaVtlLm5hbWVdPWUuYnVpbGQoKSk7cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGksXCIkb3B0aW9uc1wiLHt2YWx1ZTp0aGlzLmJ1aWxkT3B0KCl9KSxpfSxvLmJ1aWxkT3B0PWZ1bmN0aW9uKCl7dmFyIGUsdCxuLGkscj17fSxzPU9iamVjdC5rZXlzKHRoaXMub3B0aW9ucyk7Zm9yKGU9MCx0PXMubGVuZ3RoO3Q+ZTsrK2Upbj1zW2VdLGk9dGhpcy5vcHRpb25zW3NbZV1dLHJbbl09aTtyZXR1cm4gcn0sby5nZXRPcHRpb249ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMD09PWU/dGhpcy5vcHRpb25zOnZvaWQgMCE9PXRoaXMub3B0aW9uc1tlXT90aGlzLm9wdGlvbnNbZV06bnVsbH0sVC5OYW1lc3BhY2U9cyx1PShhPWZ1bmN0aW9uKGUsbixpLHIpe2lmKHRoaXMudHlwZT1lLHRoaXMucmVzb2x2ZWRUeXBlPW4sdGhpcy5pc01hcEtleT1pLHRoaXMuc3ludGF4PXIsaSYmdC5NQVBfS0VZX1RZUEVTLmluZGV4T2YoZSk8MCl0aHJvdyBFcnJvcihcIkludmFsaWQgbWFwIGtleSB0eXBlOiBcIitlLm5hbWUpfSkucHJvdG90eXBlLGEuZGVmYXVsdEZpZWxkVmFsdWU9ZnVuY3Rpb24oZSl7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGUmJihlPXQuVFlQRVNbZV0pLHZvaWQgMD09PWUuZGVmYXVsdFZhbHVlKXRocm93IEVycm9yKFwiZGVmYXVsdCB2YWx1ZSBmb3IgdHlwZSBcIitlLm5hbWUrXCIgaXMgbm90IHN1cHBvcnRlZFwiKTtyZXR1cm4gZT09dC5UWVBFUy5ieXRlcz9uZXcgbigwKTplLmRlZmF1bHRWYWx1ZX0sdS52ZXJpZnlWYWx1ZT1mdW5jdGlvbihuKXt2YXIgcixzLG8sYT1mdW5jdGlvbihlLHQpe3Rocm93IEVycm9yKFwiSWxsZWdhbCB2YWx1ZSBmb3IgXCIrdGhpcy50b1N0cmluZyghMCkrXCIgb2YgdHlwZSBcIit0aGlzLnR5cGUubmFtZStcIjogXCIrZStcIiAoXCIrdCtcIilcIil9LmJpbmQodGhpcyk7c3dpdGNoKHRoaXMudHlwZSl7Y2FzZSB0LlRZUEVTLmludDMyOmNhc2UgdC5UWVBFUy5zaW50MzI6Y2FzZSB0LlRZUEVTLnNmaXhlZDMyOnJldHVybihcIm51bWJlclwiIT10eXBlb2Ygbnx8bj09biYmbiUxIT0wKSYmYSh0eXBlb2YgbixcIm5vdCBhbiBpbnRlZ2VyXCIpLG4+NDI5NDk2NzI5NT8wfG46bjtjYXNlIHQuVFlQRVMudWludDMyOmNhc2UgdC5UWVBFUy5maXhlZDMyOnJldHVybihcIm51bWJlclwiIT10eXBlb2Ygbnx8bj09biYmbiUxIT0wKSYmYSh0eXBlb2YgbixcIm5vdCBhbiBpbnRlZ2VyXCIpLG48MD9uPj4+MDpuO2Nhc2UgdC5UWVBFUy5pbnQ2NDpjYXNlIHQuVFlQRVMuc2ludDY0OmNhc2UgdC5UWVBFUy5zZml4ZWQ2NDppZih0LkxvbmcpdHJ5e3JldHVybiBpKG4sITEpfWNhdGNoKGUpe2EodHlwZW9mIG4sZS5tZXNzYWdlKX1lbHNlIGEodHlwZW9mIG4sXCJyZXF1aXJlcyBMb25nLmpzXCIpO2Nhc2UgdC5UWVBFUy51aW50NjQ6Y2FzZSB0LlRZUEVTLmZpeGVkNjQ6aWYodC5Mb25nKXRyeXtyZXR1cm4gaShuLCEwKX1jYXRjaChlKXthKHR5cGVvZiBuLGUubWVzc2FnZSl9ZWxzZSBhKHR5cGVvZiBuLFwicmVxdWlyZXMgTG9uZy5qc1wiKTtjYXNlIHQuVFlQRVMuYm9vbDpyZXR1cm5cImJvb2xlYW5cIiE9dHlwZW9mIG4mJmEodHlwZW9mIG4sXCJub3QgYSBib29sZWFuXCIpLG47Y2FzZSB0LlRZUEVTLmZsb2F0OmNhc2UgdC5UWVBFUy5kb3VibGU6cmV0dXJuXCJudW1iZXJcIiE9dHlwZW9mIG4mJmEodHlwZW9mIG4sXCJub3QgYSBudW1iZXJcIiksbjtjYXNlIHQuVFlQRVMuc3RyaW5nOnJldHVyblwic3RyaW5nXCI9PXR5cGVvZiBufHxuJiZuIGluc3RhbmNlb2YgU3RyaW5nfHxhKHR5cGVvZiBuLFwibm90IGEgc3RyaW5nXCIpLFwiXCIrbjtjYXNlIHQuVFlQRVMuYnl0ZXM6cmV0dXJuIGUuaXNCeXRlQnVmZmVyKG4pP246ZS53cmFwKG4pO2Nhc2UgdC5UWVBFUy5lbnVtOmZvcihyPXRoaXMucmVzb2x2ZWRUeXBlLmdldENoaWxkcmVuKHQuUmVmbGVjdC5FbnVtLlZhbHVlKSxvPTA7bzxyLmxlbmd0aDtvKyspe2lmKHJbb10ubmFtZT09bilyZXR1cm4gcltvXS5pZDtpZihyW29dLmlkPT1uKXJldHVybiByW29dLmlkfWlmKFwicHJvdG8zXCI9PT10aGlzLnN5bnRheClyZXR1cm4oXCJudW1iZXJcIiE9dHlwZW9mIG58fG49PW4mJm4lMSE9MCkmJmEodHlwZW9mIG4sXCJub3QgYW4gaW50ZWdlclwiKSwobj40Mjk0OTY3Mjk1fHxuPDApJiZhKHR5cGVvZiBuLFwibm90IGluIHJhbmdlIGZvciB1aW50MzJcIiksbjthKG4sXCJub3QgYSB2YWxpZCBlbnVtIHZhbHVlXCIpO2Nhc2UgdC5UWVBFUy5ncm91cDpjYXNlIHQuVFlQRVMubWVzc2FnZTppZihuJiZcIm9iamVjdFwiPT10eXBlb2Ygbnx8YSh0eXBlb2YgbixcIm9iamVjdCBleHBlY3RlZFwiKSxuIGluc3RhbmNlb2YgdGhpcy5yZXNvbHZlZFR5cGUuY2xhenopcmV0dXJuIG47aWYobiBpbnN0YW5jZW9mIHQuQnVpbGRlci5NZXNzYWdlKXtmb3IobyBpbiBzPXt9LG4pbi5oYXNPd25Qcm9wZXJ0eShvKSYmKHNbb109bltvXSk7bj1zfXJldHVybiBuZXcgdGhpcy5yZXNvbHZlZFR5cGUuY2xhenoobil9dGhyb3cgRXJyb3IoXCJbSU5URVJOQUxdIElsbGVnYWwgdmFsdWUgZm9yIFwiK3RoaXMudG9TdHJpbmcoITApK1wiOiBcIituK1wiICh1bmRlZmluZWQgdHlwZSBcIit0aGlzLnR5cGUrXCIpXCIpfSx1LmNhbGN1bGF0ZUxlbmd0aD1mdW5jdGlvbihlLGkpe2lmKG51bGw9PT1pKXJldHVybiAwO3ZhciByO3N3aXRjaCh0aGlzLnR5cGUpe2Nhc2UgdC5UWVBFUy5pbnQzMjpyZXR1cm4gaTwwP24uY2FsY3VsYXRlVmFyaW50NjQoaSk6bi5jYWxjdWxhdGVWYXJpbnQzMihpKTtjYXNlIHQuVFlQRVMudWludDMyOnJldHVybiBuLmNhbGN1bGF0ZVZhcmludDMyKGkpO2Nhc2UgdC5UWVBFUy5zaW50MzI6cmV0dXJuIG4uY2FsY3VsYXRlVmFyaW50MzIobi56aWdaYWdFbmNvZGUzMihpKSk7Y2FzZSB0LlRZUEVTLmZpeGVkMzI6Y2FzZSB0LlRZUEVTLnNmaXhlZDMyOmNhc2UgdC5UWVBFUy5mbG9hdDpyZXR1cm4gNDtjYXNlIHQuVFlQRVMuaW50NjQ6Y2FzZSB0LlRZUEVTLnVpbnQ2NDpyZXR1cm4gbi5jYWxjdWxhdGVWYXJpbnQ2NChpKTtjYXNlIHQuVFlQRVMuc2ludDY0OnJldHVybiBuLmNhbGN1bGF0ZVZhcmludDY0KG4uemlnWmFnRW5jb2RlNjQoaSkpO2Nhc2UgdC5UWVBFUy5maXhlZDY0OmNhc2UgdC5UWVBFUy5zZml4ZWQ2NDpyZXR1cm4gODtjYXNlIHQuVFlQRVMuYm9vbDpyZXR1cm4gMTtjYXNlIHQuVFlQRVMuZW51bTpyZXR1cm4gbi5jYWxjdWxhdGVWYXJpbnQzMihpKTtjYXNlIHQuVFlQRVMuZG91YmxlOnJldHVybiA4O2Nhc2UgdC5UWVBFUy5zdHJpbmc6cmV0dXJuIHI9bi5jYWxjdWxhdGVVVEY4Qnl0ZXMoaSksbi5jYWxjdWxhdGVWYXJpbnQzMihyKStyO2Nhc2UgdC5UWVBFUy5ieXRlczppZihpLnJlbWFpbmluZygpPDApdGhyb3cgRXJyb3IoXCJJbGxlZ2FsIHZhbHVlIGZvciBcIit0aGlzLnRvU3RyaW5nKCEwKStcIjogXCIraS5yZW1haW5pbmcoKStcIiBieXRlcyByZW1haW5pbmdcIik7cmV0dXJuIG4uY2FsY3VsYXRlVmFyaW50MzIoaS5yZW1haW5pbmcoKSkraS5yZW1haW5pbmcoKTtjYXNlIHQuVFlQRVMubWVzc2FnZTpyZXR1cm4gcj10aGlzLnJlc29sdmVkVHlwZS5jYWxjdWxhdGUoaSksbi5jYWxjdWxhdGVWYXJpbnQzMihyKStyO2Nhc2UgdC5UWVBFUy5ncm91cDpyZXR1cm4ocj10aGlzLnJlc29sdmVkVHlwZS5jYWxjdWxhdGUoaSkpK24uY2FsY3VsYXRlVmFyaW50MzIoZTw8M3x0LldJUkVfVFlQRVMuRU5ER1JPVVApfXRocm93IEVycm9yKFwiW0lOVEVSTkFMXSBJbGxlZ2FsIHZhbHVlIHRvIGVuY29kZSBpbiBcIit0aGlzLnRvU3RyaW5nKCEwKStcIjogXCIraStcIiAodW5rbm93biB0eXBlKVwiKX0sdS5lbmNvZGVWYWx1ZT1mdW5jdGlvbihlLGkscil7dmFyIHMsbztpZihudWxsPT09aSlyZXR1cm4gcjtzd2l0Y2godGhpcy50eXBlKXtjYXNlIHQuVFlQRVMuaW50MzI6aTwwP3Iud3JpdGVWYXJpbnQ2NChpKTpyLndyaXRlVmFyaW50MzIoaSk7YnJlYWs7Y2FzZSB0LlRZUEVTLnVpbnQzMjpyLndyaXRlVmFyaW50MzIoaSk7YnJlYWs7Y2FzZSB0LlRZUEVTLnNpbnQzMjpyLndyaXRlVmFyaW50MzJaaWdaYWcoaSk7YnJlYWs7Y2FzZSB0LlRZUEVTLmZpeGVkMzI6ci53cml0ZVVpbnQzMihpKTticmVhaztjYXNlIHQuVFlQRVMuc2ZpeGVkMzI6ci53cml0ZUludDMyKGkpO2JyZWFrO2Nhc2UgdC5UWVBFUy5pbnQ2NDpjYXNlIHQuVFlQRVMudWludDY0OnIud3JpdGVWYXJpbnQ2NChpKTticmVhaztjYXNlIHQuVFlQRVMuc2ludDY0OnIud3JpdGVWYXJpbnQ2NFppZ1phZyhpKTticmVhaztjYXNlIHQuVFlQRVMuZml4ZWQ2NDpyLndyaXRlVWludDY0KGkpO2JyZWFrO2Nhc2UgdC5UWVBFUy5zZml4ZWQ2NDpyLndyaXRlSW50NjQoaSk7YnJlYWs7Y2FzZSB0LlRZUEVTLmJvb2w6XCJzdHJpbmdcIj09dHlwZW9mIGk/ci53cml0ZVZhcmludDMyKFwiZmFsc2VcIj09PWkudG9Mb3dlckNhc2UoKT8wOiEhaSk6ci53cml0ZVZhcmludDMyKGk/MTowKTticmVhaztjYXNlIHQuVFlQRVMuZW51bTpyLndyaXRlVmFyaW50MzIoaSk7YnJlYWs7Y2FzZSB0LlRZUEVTLmZsb2F0OnIud3JpdGVGbG9hdDMyKGkpO2JyZWFrO2Nhc2UgdC5UWVBFUy5kb3VibGU6ci53cml0ZUZsb2F0NjQoaSk7YnJlYWs7Y2FzZSB0LlRZUEVTLnN0cmluZzpyLndyaXRlVlN0cmluZyhpKTticmVhaztjYXNlIHQuVFlQRVMuYnl0ZXM6aWYoaS5yZW1haW5pbmcoKTwwKXRocm93IEVycm9yKFwiSWxsZWdhbCB2YWx1ZSBmb3IgXCIrdGhpcy50b1N0cmluZyghMCkrXCI6IFwiK2kucmVtYWluaW5nKCkrXCIgYnl0ZXMgcmVtYWluaW5nXCIpO3M9aS5vZmZzZXQsci53cml0ZVZhcmludDMyKGkucmVtYWluaW5nKCkpLHIuYXBwZW5kKGkpLGkub2Zmc2V0PXM7YnJlYWs7Y2FzZSB0LlRZUEVTLm1lc3NhZ2U6bz0obmV3IG4pLkxFKCksdGhpcy5yZXNvbHZlZFR5cGUuZW5jb2RlKGksbyksci53cml0ZVZhcmludDMyKG8ub2Zmc2V0KSxyLmFwcGVuZChvLmZsaXAoKSk7YnJlYWs7Y2FzZSB0LlRZUEVTLmdyb3VwOnRoaXMucmVzb2x2ZWRUeXBlLmVuY29kZShpLHIpLHIud3JpdGVWYXJpbnQzMihlPDwzfHQuV0lSRV9UWVBFUy5FTkRHUk9VUCk7YnJlYWs7ZGVmYXVsdDp0aHJvdyBFcnJvcihcIltJTlRFUk5BTF0gSWxsZWdhbCB2YWx1ZSB0byBlbmNvZGUgaW4gXCIrdGhpcy50b1N0cmluZyghMCkrXCI6IFwiK2krXCIgKHVua25vd24gdHlwZSlcIil9cmV0dXJuIHJ9LHUuZGVjb2RlPWZ1bmN0aW9uKGUsbixpKXtpZihuIT10aGlzLnR5cGUud2lyZVR5cGUpdGhyb3cgRXJyb3IoXCJVbmV4cGVjdGVkIHdpcmUgdHlwZSBmb3IgZWxlbWVudFwiKTt2YXIgcixzO3N3aXRjaCh0aGlzLnR5cGUpe2Nhc2UgdC5UWVBFUy5pbnQzMjpyZXR1cm4gMHxlLnJlYWRWYXJpbnQzMigpO2Nhc2UgdC5UWVBFUy51aW50MzI6cmV0dXJuIGUucmVhZFZhcmludDMyKCk+Pj4wO2Nhc2UgdC5UWVBFUy5zaW50MzI6cmV0dXJuIDB8ZS5yZWFkVmFyaW50MzJaaWdaYWcoKTtjYXNlIHQuVFlQRVMuZml4ZWQzMjpyZXR1cm4gZS5yZWFkVWludDMyKCk+Pj4wO2Nhc2UgdC5UWVBFUy5zZml4ZWQzMjpyZXR1cm4gMHxlLnJlYWRJbnQzMigpO2Nhc2UgdC5UWVBFUy5pbnQ2NDpyZXR1cm4gZS5yZWFkVmFyaW50NjQoKTtjYXNlIHQuVFlQRVMudWludDY0OnJldHVybiBlLnJlYWRWYXJpbnQ2NCgpLnRvVW5zaWduZWQoKTtjYXNlIHQuVFlQRVMuc2ludDY0OnJldHVybiBlLnJlYWRWYXJpbnQ2NFppZ1phZygpO2Nhc2UgdC5UWVBFUy5maXhlZDY0OnJldHVybiBlLnJlYWRVaW50NjQoKTtjYXNlIHQuVFlQRVMuc2ZpeGVkNjQ6cmV0dXJuIGUucmVhZEludDY0KCk7Y2FzZSB0LlRZUEVTLmJvb2w6cmV0dXJuISFlLnJlYWRWYXJpbnQzMigpO2Nhc2UgdC5UWVBFUy5lbnVtOnJldHVybiBlLnJlYWRWYXJpbnQzMigpO2Nhc2UgdC5UWVBFUy5mbG9hdDpyZXR1cm4gZS5yZWFkRmxvYXQoKTtjYXNlIHQuVFlQRVMuZG91YmxlOnJldHVybiBlLnJlYWREb3VibGUoKTtjYXNlIHQuVFlQRVMuc3RyaW5nOnJldHVybiBlLnJlYWRWU3RyaW5nKCk7Y2FzZSB0LlRZUEVTLmJ5dGVzOmlmKHM9ZS5yZWFkVmFyaW50MzIoKSxlLnJlbWFpbmluZygpPHMpdGhyb3cgRXJyb3IoXCJJbGxlZ2FsIG51bWJlciBvZiBieXRlcyBmb3IgXCIrdGhpcy50b1N0cmluZyghMCkrXCI6IFwiK3MrXCIgcmVxdWlyZWQgYnV0IGdvdCBvbmx5IFwiK2UucmVtYWluaW5nKCkpO3JldHVybihyPWUuY2xvbmUoKSkubGltaXQ9ci5vZmZzZXQrcyxlLm9mZnNldCs9cyxyO2Nhc2UgdC5UWVBFUy5tZXNzYWdlOnJldHVybiBzPWUucmVhZFZhcmludDMyKCksdGhpcy5yZXNvbHZlZFR5cGUuZGVjb2RlKGUscyk7Y2FzZSB0LlRZUEVTLmdyb3VwOnJldHVybiB0aGlzLnJlc29sdmVkVHlwZS5kZWNvZGUoZSwtMSxpKX10aHJvdyBFcnJvcihcIltJTlRFUk5BTF0gSWxsZWdhbCBkZWNvZGUgdHlwZVwiKX0sdS52YWx1ZUZyb21TdHJpbmc9ZnVuY3Rpb24oZSl7aWYoIXRoaXMuaXNNYXBLZXkpdGhyb3cgRXJyb3IoXCJ2YWx1ZUZyb21TdHJpbmcoKSBjYWxsZWQgb24gbm9uLW1hcC1rZXkgZWxlbWVudFwiKTtzd2l0Y2godGhpcy50eXBlKXtjYXNlIHQuVFlQRVMuaW50MzI6Y2FzZSB0LlRZUEVTLnNpbnQzMjpjYXNlIHQuVFlQRVMuc2ZpeGVkMzI6Y2FzZSB0LlRZUEVTLnVpbnQzMjpjYXNlIHQuVFlQRVMuZml4ZWQzMjpyZXR1cm4gdGhpcy52ZXJpZnlWYWx1ZShwYXJzZUludChlKSk7Y2FzZSB0LlRZUEVTLmludDY0OmNhc2UgdC5UWVBFUy5zaW50NjQ6Y2FzZSB0LlRZUEVTLnNmaXhlZDY0OmNhc2UgdC5UWVBFUy51aW50NjQ6Y2FzZSB0LlRZUEVTLmZpeGVkNjQ6cmV0dXJuIHRoaXMudmVyaWZ5VmFsdWUoZSk7Y2FzZSB0LlRZUEVTLmJvb2w6cmV0dXJuXCJ0cnVlXCI9PT1lO2Nhc2UgdC5UWVBFUy5zdHJpbmc6cmV0dXJuIHRoaXMudmVyaWZ5VmFsdWUoZSk7Y2FzZSB0LlRZUEVTLmJ5dGVzOnJldHVybiBuLmZyb21CaW5hcnkoZSl9fSx1LnZhbHVlVG9TdHJpbmc9ZnVuY3Rpb24oZSl7aWYoIXRoaXMuaXNNYXBLZXkpdGhyb3cgRXJyb3IoXCJ2YWx1ZVRvU3RyaW5nKCkgY2FsbGVkIG9uIG5vbi1tYXAta2V5IGVsZW1lbnRcIik7cmV0dXJuIHRoaXMudHlwZT09PXQuVFlQRVMuYnl0ZXM/ZS50b1N0cmluZyhcImJpbmFyeVwiKTplLnRvU3RyaW5nKCl9LFQuRWxlbWVudD1hLChoPShjPWZ1bmN0aW9uKGUsdCxuLGkscixvKXtzLmNhbGwodGhpcyxlLHQsbixpLG8pLHRoaXMuY2xhc3NOYW1lPVwiTWVzc2FnZVwiLHRoaXMuZXh0ZW5zaW9ucz12b2lkIDAsdGhpcy5jbGF6ej1udWxsLHRoaXMuaXNHcm91cD0hIXIsdGhpcy5fZmllbGRzPW51bGwsdGhpcy5fZmllbGRzQnlJZD1udWxsLHRoaXMuX2ZpZWxkc0J5TmFtZT1udWxsfSkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUocy5wcm90b3R5cGUpKS5idWlsZD1mdW5jdGlvbihpKXt2YXIgcixzLG8sYTtpZih0aGlzLmNsYXp6JiYhaSlyZXR1cm4gdGhpcy5jbGF6ejtmb3Iocj1mdW5jdGlvbih0LGkpe2Z1bmN0aW9uIHIoZSxpLHMsbyl7dmFyIGEsdSxjLGgsbCxkLGY7aWYobnVsbD09PWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlKXJldHVybiBvJiZvIGluc3RhbmNlb2YgdC5SZWZsZWN0LkVudW0mJm51bGwhPT0oYT10LlJlZmxlY3QuRW51bS5nZXROYW1lKG8ub2JqZWN0LGUpKT9hOmU7aWYobi5pc0J5dGVCdWZmZXIoZSkpcmV0dXJuIGk/ZS50b0Jhc2U2NCgpOmUudG9CdWZmZXIoKTtpZih0LkxvbmcuaXNMb25nKGUpKXJldHVybiBzP2UudG9TdHJpbmcoKTp0LkxvbmcuZnJvbVZhbHVlKGUpO2lmKEFycmF5LmlzQXJyYXkoZSkpcmV0dXJuIHU9W10sZS5mb3JFYWNoKChmdW5jdGlvbihlLHQpe3VbdF09cihlLGkscyxvKX0pKSx1O2lmKHU9e30sZSBpbnN0YW5jZW9mIHQuTWFwKXtmb3IoaD0oYz1lLmVudHJpZXMoKSkubmV4dCgpOyFoLmRvbmU7aD1jLm5leHQoKSl1W2Uua2V5RWxlbS52YWx1ZVRvU3RyaW5nKGgudmFsdWVbMF0pXT1yKGgudmFsdWVbMV0saSxzLGUudmFsdWVFbGVtLnJlc29sdmVkVHlwZSk7cmV0dXJuIHV9Zm9yKGYgaW4gbD1lLiR0eXBlLGQ9dm9pZCAwLGUpZS5oYXNPd25Qcm9wZXJ0eShmKSYmKHVbZl09bCYmKGQ9bC5nZXRDaGlsZChmKSk/cihlW2ZdLGkscyxkLnJlc29sdmVkVHlwZSk6cihlW2ZdLGkscykpO3JldHVybiB1fXZhciBzLG8sYT1pLmdldENoaWxkcmVuKHQuUmVmbGVjdC5NZXNzYWdlLkZpZWxkKSx1PWkuZ2V0Q2hpbGRyZW4odC5SZWZsZWN0Lk1lc3NhZ2UuT25lT2YpLGM9ZnVuY3Rpb24oZSl7dmFyIHIscyxvLGg7Zm9yKHQuQnVpbGRlci5NZXNzYWdlLmNhbGwodGhpcykscj0wLHM9dS5sZW5ndGg7cz5yOysrcil0aGlzW3Vbcl0ubmFtZV09bnVsbDtmb3Iocj0wLHM9YS5sZW5ndGg7cz5yOysrcil0aGlzWyhvPWFbcl0pLm5hbWVdPW8ucmVwZWF0ZWQ/W106by5tYXA/bmV3IHQuTWFwKG8pOm51bGwsIW8ucmVxdWlyZWQmJlwicHJvdG8zXCIhPT1pLnN5bnRheHx8bnVsbD09PW8uZGVmYXVsdFZhbHVlfHwodGhpc1tvLm5hbWVdPW8uZGVmYXVsdFZhbHVlKTtpZihhcmd1bWVudHMubGVuZ3RoPjApaWYoMSE9PWFyZ3VtZW50cy5sZW5ndGh8fG51bGw9PT1lfHxcIm9iamVjdFwiIT10eXBlb2YgZXx8IShcImZ1bmN0aW9uXCIhPXR5cGVvZiBlLmVuY29kZXx8ZSBpbnN0YW5jZW9mIGMpfHxBcnJheS5pc0FycmF5KGUpfHxlIGluc3RhbmNlb2YgdC5NYXB8fG4uaXNCeXRlQnVmZmVyKGUpfHxlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXJ8fHQuTG9uZyYmZSBpbnN0YW5jZW9mIHQuTG9uZylmb3Iocj0wLHM9YXJndW1lbnRzLmxlbmd0aDtzPnI7KytyKXZvaWQgMCE9PShoPWFyZ3VtZW50c1tyXSkmJnRoaXMuJHNldChhW3JdLm5hbWUsaCk7ZWxzZSB0aGlzLiRzZXQoZSl9LGg9Yy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0LkJ1aWxkZXIuTWVzc2FnZS5wcm90b3R5cGUpO2ZvcihoLmFkZD1mdW5jdGlvbihlLG4scil7dmFyIHM9aS5fZmllbGRzQnlOYW1lW2VdO2lmKCFyKXtpZighcyl0aHJvdyBFcnJvcih0aGlzK1wiI1wiK2UrXCIgaXMgdW5kZWZpbmVkXCIpO2lmKCEocyBpbnN0YW5jZW9mIHQuUmVmbGVjdC5NZXNzYWdlLkZpZWxkKSl0aHJvdyBFcnJvcih0aGlzK1wiI1wiK2UrXCIgaXMgbm90IGEgZmllbGQ6IFwiK3MudG9TdHJpbmcoITApKTtpZighcy5yZXBlYXRlZCl0aHJvdyBFcnJvcih0aGlzK1wiI1wiK2UrXCIgaXMgbm90IGEgcmVwZWF0ZWQgZmllbGRcIik7bj1zLnZlcmlmeVZhbHVlKG4sITApfXJldHVybiBudWxsPT09dGhpc1tlXSYmKHRoaXNbZV09W10pLHRoaXNbZV0ucHVzaChuKSx0aGlzfSxoLiRhZGQ9aC5hZGQsaC5zZXQ9ZnVuY3Rpb24oZSxuLHIpe3ZhciBzLG8sYTtpZihlJiZcIm9iamVjdFwiPT10eXBlb2YgZSl7Zm9yKHMgaW4gcj1uLGUpZS5oYXNPd25Qcm9wZXJ0eShzKSYmdm9pZCAwIT09KG49ZVtzXSkmJnRoaXMuJHNldChzLG4scik7cmV0dXJuIHRoaXN9aWYobz1pLl9maWVsZHNCeU5hbWVbZV0scil0aGlzW2VdPW47ZWxzZXtpZighbyl0aHJvdyBFcnJvcih0aGlzK1wiI1wiK2UrXCIgaXMgbm90IGEgZmllbGQ6IHVuZGVmaW5lZFwiKTtpZighKG8gaW5zdGFuY2VvZiB0LlJlZmxlY3QuTWVzc2FnZS5GaWVsZCkpdGhyb3cgRXJyb3IodGhpcytcIiNcIitlK1wiIGlzIG5vdCBhIGZpZWxkOiBcIitvLnRvU3RyaW5nKCEwKSk7dGhpc1tvLm5hbWVdPW49by52ZXJpZnlWYWx1ZShuKX1yZXR1cm4gbyYmby5vbmVvZiYmKGE9dGhpc1tvLm9uZW9mLm5hbWVdLG51bGwhPT1uPyhudWxsIT09YSYmYSE9PW8ubmFtZSYmKHRoaXNbYV09bnVsbCksdGhpc1tvLm9uZW9mLm5hbWVdPW8ubmFtZSk6YT09PWUmJih0aGlzW28ub25lb2YubmFtZV09bnVsbCkpLHRoaXN9LGguJHNldD1oLnNldCxoLmdldD1mdW5jdGlvbihlLG4pe2lmKG4pcmV0dXJuIHRoaXNbZV07dmFyIHI9aS5fZmllbGRzQnlOYW1lW2VdO2lmKCEociYmciBpbnN0YW5jZW9mIHQuUmVmbGVjdC5NZXNzYWdlLkZpZWxkKSl0aHJvdyBFcnJvcih0aGlzK1wiI1wiK2UrXCIgaXMgbm90IGEgZmllbGQ6IHVuZGVmaW5lZFwiKTtpZighKHIgaW5zdGFuY2VvZiB0LlJlZmxlY3QuTWVzc2FnZS5GaWVsZCkpdGhyb3cgRXJyb3IodGhpcytcIiNcIitlK1wiIGlzIG5vdCBhIGZpZWxkOiBcIityLnRvU3RyaW5nKCEwKSk7cmV0dXJuIHRoaXNbci5uYW1lXX0saC4kZ2V0PWguZ2V0LHM9MDtzPGEubGVuZ3RoO3MrKykobz1hW3NdKWluc3RhbmNlb2YgdC5SZWZsZWN0Lk1lc3NhZ2UuRXh0ZW5zaW9uRmllbGR8fGkuYnVpbGRlci5vcHRpb25zLnBvcHVsYXRlQWNjZXNzb3JzJiZmdW5jdGlvbihlKXt2YXIgdCxuLHIscz1lLm9yaWdpbmFsTmFtZS5yZXBsYWNlKC8oX1thLXpBLVpdKS9nLChmdW5jdGlvbihlKXtyZXR1cm4gZS50b1VwcGVyQ2FzZSgpLnJlcGxhY2UoXCJfXCIsXCJcIil9KSk7cz1zLnN1YnN0cmluZygwLDEpLnRvVXBwZXJDYXNlKCkrcy5zdWJzdHJpbmcoMSksdD1lLm9yaWdpbmFsTmFtZS5yZXBsYWNlKC8oW0EtWl0pL2csKGZ1bmN0aW9uKGUpe3JldHVyblwiX1wiK2V9KSksbj1mdW5jdGlvbih0LG4pe3JldHVybiB0aGlzW2UubmFtZV09bj90OmUudmVyaWZ5VmFsdWUodCksdGhpc30scj1mdW5jdGlvbigpe3JldHVybiB0aGlzW2UubmFtZV19LG51bGw9PT1pLmdldENoaWxkKFwic2V0XCIrcykmJihoW1wic2V0XCIrc109biksbnVsbD09PWkuZ2V0Q2hpbGQoXCJzZXRfXCIrdCkmJihoW1wic2V0X1wiK3RdPW4pLG51bGw9PT1pLmdldENoaWxkKFwiZ2V0XCIrcykmJihoW1wiZ2V0XCIrc109ciksbnVsbD09PWkuZ2V0Q2hpbGQoXCJnZXRfXCIrdCkmJihoW1wiZ2V0X1wiK3RdPXIpfShvKTtyZXR1cm4gaC5lbmNvZGU9ZnVuY3Rpb24odCxuKXt2YXIgcixzO1wiYm9vbGVhblwiPT10eXBlb2YgdCYmKG49dCx0PXZvaWQgMCkscj0hMSx0fHwodD1uZXcgZSxyPSEwKSxzPXQubGl0dGxlRW5kaWFuO3RyeXtyZXR1cm4gaS5lbmNvZGUodGhpcyx0LkxFKCksbiksKHI/dC5mbGlwKCk6dCkuTEUocyl9Y2F0Y2goZSl7dGhyb3cgdC5MRShzKSxlfX0sYy5lbmNvZGU9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBuZXcgYyhlKS5lbmNvZGUodCxuKX0saC5jYWxjdWxhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gaS5jYWxjdWxhdGUodGhpcyl9LGguZW5jb2RlRGVsaW1pdGVkPWZ1bmN0aW9uKGUpe3ZhciB0LHI9ITE7cmV0dXJuIGV8fChlPW5ldyBuLHI9ITApLHQ9KG5ldyBuKS5MRSgpLGkuZW5jb2RlKHRoaXMsdCkuZmxpcCgpLGUud3JpdGVWYXJpbnQzMih0LnJlbWFpbmluZygpKSxlLmFwcGVuZCh0KSxyP2UuZmxpcCgpOmV9LGguZW5jb2RlQUI9ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIHRoaXMuZW5jb2RlKCkudG9BcnJheUJ1ZmZlcigpfWNhdGNoKGUpe3Rocm93IGUuZW5jb2RlZCYmKGUuZW5jb2RlZD1lLmVuY29kZWQudG9BcnJheUJ1ZmZlcigpKSxlfX0saC50b0FycmF5QnVmZmVyPWguZW5jb2RlQUIsaC5lbmNvZGVOQj1mdW5jdGlvbigpe3RyeXtyZXR1cm4gdGhpcy5lbmNvZGUoKS50b0J1ZmZlcigpfWNhdGNoKGUpe3Rocm93IGUuZW5jb2RlZCYmKGUuZW5jb2RlZD1lLmVuY29kZWQudG9CdWZmZXIoKSksZX19LGgudG9CdWZmZXI9aC5lbmNvZGVOQixoLmVuY29kZTY0PWZ1bmN0aW9uKCl7dHJ5e3JldHVybiB0aGlzLmVuY29kZSgpLnRvQmFzZTY0KCl9Y2F0Y2goZSl7dGhyb3cgZS5lbmNvZGVkJiYoZS5lbmNvZGVkPWUuZW5jb2RlZC50b0Jhc2U2NCgpKSxlfX0saC50b0Jhc2U2ND1oLmVuY29kZTY0LGguZW5jb2RlSGV4PWZ1bmN0aW9uKCl7dHJ5e3JldHVybiB0aGlzLmVuY29kZSgpLnRvSGV4KCl9Y2F0Y2goZSl7dGhyb3cgZS5lbmNvZGVkJiYoZS5lbmNvZGVkPWUuZW5jb2RlZC50b0hleCgpKSxlfX0saC50b0hleD1oLmVuY29kZUhleCxoLnRvUmF3PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHIodGhpcywhIWUsISF0LHRoaXMuJHR5cGUpfSxoLmVuY29kZUpTT049ZnVuY3Rpb24oKXtyZXR1cm4gSlNPTi5zdHJpbmdpZnkocih0aGlzLCEwLCEwLHRoaXMuJHR5cGUpKX0sYy5kZWNvZGU9ZnVuY3Rpb24oZSx0KXt2YXIgcixzO1wic3RyaW5nXCI9PXR5cGVvZiBlJiYoZT1uLndyYXAoZSx0fHxcImJhc2U2NFwiKSkscj0oZT1uLmlzQnl0ZUJ1ZmZlcihlKT9lOm4ud3JhcChlKSkubGl0dGxlRW5kaWFuO3RyeXtyZXR1cm4gcz1pLmRlY29kZShlLkxFKCkpLGUuTEUociksc31jYXRjaCh0KXt0aHJvdyBlLkxFKHIpLHR9fSxjLmRlY29kZURlbGltaXRlZD1mdW5jdGlvbihlLHQpe3ZhciByLHMsbztpZihcInN0cmluZ1wiPT10eXBlb2YgZSYmKGU9bi53cmFwKGUsdHx8XCJiYXNlNjRcIikpLChlPW4uaXNCeXRlQnVmZmVyKGUpP2U6bi53cmFwKGUpKS5yZW1haW5pbmcoKTwxKXJldHVybiBudWxsO2lmKHI9ZS5vZmZzZXQscz1lLnJlYWRWYXJpbnQzMigpLGUucmVtYWluaW5nKCk8cylyZXR1cm4gZS5vZmZzZXQ9cixudWxsO3RyeXtyZXR1cm4gbz1pLmRlY29kZShlLnNsaWNlKGUub2Zmc2V0LGUub2Zmc2V0K3MpLkxFKCkpLGUub2Zmc2V0Kz1zLG99Y2F0Y2godCl7dGhyb3cgZS5vZmZzZXQrPXMsdH19LGMuZGVjb2RlNjQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGMuZGVjb2RlKGUsXCJiYXNlNjRcIil9LGMuZGVjb2RlSGV4PWZ1bmN0aW9uKGUpe3JldHVybiBjLmRlY29kZShlLFwiaGV4XCIpfSxjLmRlY29kZUpTT049ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBjKEpTT04ucGFyc2UoZSkpfSxoLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIGkudG9TdHJpbmcoKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5JiYoT2JqZWN0LmRlZmluZVByb3BlcnR5KGMsXCIkb3B0aW9uc1wiLHt2YWx1ZTppLmJ1aWxkT3B0KCl9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoaCxcIiRvcHRpb25zXCIse3ZhbHVlOmMuJG9wdGlvbnN9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoYyxcIiR0eXBlXCIse3ZhbHVlOml9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoaCxcIiR0eXBlXCIse3ZhbHVlOml9KSksY30odCx0aGlzKSx0aGlzLl9maWVsZHM9W10sdGhpcy5fZmllbGRzQnlJZD17fSx0aGlzLl9maWVsZHNCeU5hbWU9e30sbz0wLGE9dGhpcy5jaGlsZHJlbi5sZW5ndGg7YT5vO28rKylpZigocz10aGlzLmNoaWxkcmVuW29dKWluc3RhbmNlb2YgZ3x8cyBpbnN0YW5jZW9mIGN8fHMgaW5zdGFuY2VvZiBtKXtpZihyLmhhc093blByb3BlcnR5KHMubmFtZSkpdGhyb3cgRXJyb3IoXCJJbGxlZ2FsIHJlZmxlY3QgY2hpbGQgb2YgXCIrdGhpcy50b1N0cmluZyghMCkrXCI6IFwiK3MudG9TdHJpbmcoITApK1wiIGNhbm5vdCBvdmVycmlkZSBzdGF0aWMgcHJvcGVydHkgJ1wiK3MubmFtZStcIidcIik7cltzLm5hbWVdPXMuYnVpbGQoKX1lbHNlIGlmKHMgaW5zdGFuY2VvZiBjLkZpZWxkKXMuYnVpbGQoKSx0aGlzLl9maWVsZHMucHVzaChzKSx0aGlzLl9maWVsZHNCeUlkW3MuaWRdPXMsdGhpcy5fZmllbGRzQnlOYW1lW3MubmFtZV09cztlbHNlIGlmKCEocyBpbnN0YW5jZW9mIGMuT25lT2Z8fHMgaW5zdGFuY2VvZiB5KSl0aHJvdyBFcnJvcihcIklsbGVnYWwgcmVmbGVjdCBjaGlsZCBvZiBcIit0aGlzLnRvU3RyaW5nKCEwKStcIjogXCIrdGhpcy5jaGlsZHJlbltvXS50b1N0cmluZyghMCkpO3JldHVybiB0aGlzLmNsYXp6PXJ9LGguZW5jb2RlPWZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLHMsbyxhLHU9bnVsbDtmb3Iocz0wLG89dGhpcy5fZmllbGRzLmxlbmd0aDtvPnM7KytzKXI9ZVsoaT10aGlzLl9maWVsZHNbc10pLm5hbWVdLGkucmVxdWlyZWQmJm51bGw9PT1yP251bGw9PT11JiYodT1pKTppLmVuY29kZShuP3I6aS52ZXJpZnlWYWx1ZShyKSx0LGUpO2lmKG51bGwhPT11KXRocm93KGE9RXJyb3IoXCJNaXNzaW5nIGF0IGxlYXN0IG9uZSByZXF1aXJlZCBmaWVsZCBmb3IgXCIrdGhpcy50b1N0cmluZyghMCkrXCI6IFwiK3UpKS5lbmNvZGVkPXQsYTtyZXR1cm4gdH0saC5jYWxjdWxhdGU9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG4saT0wLHI9MCxzPXRoaXMuX2ZpZWxkcy5sZW5ndGg7cz5yOysrcil7aWYobj1lWyh0PXRoaXMuX2ZpZWxkc1tyXSkubmFtZV0sdC5yZXF1aXJlZCYmbnVsbD09PW4pdGhyb3cgRXJyb3IoXCJNaXNzaW5nIGF0IGxlYXN0IG9uZSByZXF1aXJlZCBmaWVsZCBmb3IgXCIrdGhpcy50b1N0cmluZyghMCkrXCI6IFwiK3QpO2krPXQuY2FsY3VsYXRlKG4sZSl9cmV0dXJuIGl9LGguZGVjb2RlPWZ1bmN0aW9uKGUsbixpKXt2YXIgcyxvLGEsdSxjLGgsbCxkLGYscCxnLF87Zm9yKG49XCJudW1iZXJcIj09dHlwZW9mIG4/bjotMSxjPWUub2Zmc2V0LGg9bmV3IHRoaXMuY2xheno7ZS5vZmZzZXQ8YytufHwtMT09PW4mJmUucmVtYWluaW5nKCk+MDspe2lmKGE9KHM9ZS5yZWFkVmFyaW50MzIoKSk+Pj4zLChvPTcmcyk9PT10LldJUkVfVFlQRVMuRU5ER1JPVVApe2lmKGEhPT1pKXRocm93IEVycm9yKFwiSWxsZWdhbCBncm91cCBlbmQgaW5kaWNhdG9yIGZvciBcIit0aGlzLnRvU3RyaW5nKCEwKStcIjogXCIrYStcIiAoXCIrKGk/aStcIiBleHBlY3RlZFwiOlwibm90IGEgZ3JvdXBcIikrXCIpXCIpO2JyZWFrfWlmKHU9dGhpcy5fZmllbGRzQnlJZFthXSl1LnJlcGVhdGVkJiYhdS5vcHRpb25zLnBhY2tlZD9oW3UubmFtZV0ucHVzaCh1LmRlY29kZShvLGUpKTp1Lm1hcD8oZD11LmRlY29kZShvLGUpLGhbdS5uYW1lXS5zZXQoZFswXSxkWzFdKSk6KGhbdS5uYW1lXT11LmRlY29kZShvLGUpLHUub25lb2YmJihudWxsIT09KGY9aFt1Lm9uZW9mLm5hbWVdKSYmZiE9PXUubmFtZSYmKGhbZl09bnVsbCksaFt1Lm9uZW9mLm5hbWVdPXUubmFtZSkpO2Vsc2Ugc3dpdGNoKG8pe2Nhc2UgdC5XSVJFX1RZUEVTLlZBUklOVDplLnJlYWRWYXJpbnQzMigpO2JyZWFrO2Nhc2UgdC5XSVJFX1RZUEVTLkJJVFMzMjplLm9mZnNldCs9NDticmVhaztjYXNlIHQuV0lSRV9UWVBFUy5CSVRTNjQ6ZS5vZmZzZXQrPTg7YnJlYWs7Y2FzZSB0LldJUkVfVFlQRVMuTERFTElNOmw9ZS5yZWFkVmFyaW50MzIoKSxlLm9mZnNldCs9bDticmVhaztjYXNlIHQuV0lSRV9UWVBFUy5TVEFSVEdST1VQOmZvcig7cihhLGUpOyk7YnJlYWs7ZGVmYXVsdDp0aHJvdyBFcnJvcihcIklsbGVnYWwgd2lyZSB0eXBlIGZvciB1bmtub3duIGZpZWxkIFwiK2ErXCIgaW4gXCIrdGhpcy50b1N0cmluZyghMCkrXCIjZGVjb2RlOiBcIitvKX19Zm9yKHA9MCxnPXRoaXMuX2ZpZWxkcy5sZW5ndGg7Zz5wOysrcClpZihudWxsPT09aFsodT10aGlzLl9maWVsZHNbcF0pLm5hbWVdKWlmKFwicHJvdG8zXCI9PT10aGlzLnN5bnRheCloW3UubmFtZV09dS5kZWZhdWx0VmFsdWU7ZWxzZXtpZih1LnJlcXVpcmVkKXRocm93KF89RXJyb3IoXCJNaXNzaW5nIGF0IGxlYXN0IG9uZSByZXF1aXJlZCBmaWVsZCBmb3IgXCIrdGhpcy50b1N0cmluZyghMCkrXCI6IFwiK3UubmFtZSkpLmRlY29kZWQ9aCxfO3QucG9wdWxhdGVEZWZhdWx0cyYmbnVsbCE9PXUuZGVmYXVsdFZhbHVlJiYoaFt1Lm5hbWVdPXUuZGVmYXVsdFZhbHVlKX1yZXR1cm4gaH0sVC5NZXNzYWdlPWMsKGQ9KGw9ZnVuY3Rpb24oZSxuLGkscixzLG8sYSx1LGgsbCl7SS5jYWxsKHRoaXMsZSxuLG8pLHRoaXMuY2xhc3NOYW1lPVwiTWVzc2FnZS5GaWVsZFwiLHRoaXMucmVxdWlyZWQ9XCJyZXF1aXJlZFwiPT09aSx0aGlzLnJlcGVhdGVkPVwicmVwZWF0ZWRcIj09PWksdGhpcy5tYXA9XCJtYXBcIj09PWksdGhpcy5rZXlUeXBlPXJ8fG51bGwsdGhpcy50eXBlPXMsdGhpcy5yZXNvbHZlZFR5cGU9bnVsbCx0aGlzLmlkPWEsdGhpcy5vcHRpb25zPXV8fHt9LHRoaXMuZGVmYXVsdFZhbHVlPW51bGwsdGhpcy5vbmVvZj1ofHxudWxsLHRoaXMuc3ludGF4PWx8fFwicHJvdG8yXCIsdGhpcy5vcmlnaW5hbE5hbWU9dGhpcy5uYW1lLHRoaXMuZWxlbWVudD1udWxsLHRoaXMua2V5RWxlbWVudD1udWxsLCF0aGlzLmJ1aWxkZXIub3B0aW9ucy5jb252ZXJ0RmllbGRzVG9DYW1lbENhc2V8fHRoaXMgaW5zdGFuY2VvZiBjLkV4dGVuc2lvbkZpZWxkfHwodGhpcy5uYW1lPXQuVXRpbC50b0NhbWVsQ2FzZSh0aGlzLm5hbWUpKX0pLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEkucHJvdG90eXBlKSkuYnVpbGQ9ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQ9bmV3IGEodGhpcy50eXBlLHRoaXMucmVzb2x2ZWRUeXBlLCExLHRoaXMuc3ludGF4KSx0aGlzLm1hcCYmKHRoaXMua2V5RWxlbWVudD1uZXcgYSh0aGlzLmtleVR5cGUsdm9pZCAwLCEwLHRoaXMuc3ludGF4KSksXCJwcm90bzNcIiE9PXRoaXMuc3ludGF4fHx0aGlzLnJlcGVhdGVkfHx0aGlzLm1hcD92b2lkIDAhPT10aGlzLm9wdGlvbnMuZGVmYXVsdCYmKHRoaXMuZGVmYXVsdFZhbHVlPXRoaXMudmVyaWZ5VmFsdWUodGhpcy5vcHRpb25zLmRlZmF1bHQpKTp0aGlzLmRlZmF1bHRWYWx1ZT1hLmRlZmF1bHRGaWVsZFZhbHVlKHRoaXMudHlwZSl9LGQudmVyaWZ5VmFsdWU9ZnVuY3Rpb24oZSxuKXt2YXIgaSxyLHM7aWYobj1ufHwhMSxpPWZ1bmN0aW9uKGUsdCl7dGhyb3cgRXJyb3IoXCJJbGxlZ2FsIHZhbHVlIGZvciBcIit0aGlzLnRvU3RyaW5nKCEwKStcIiBvZiB0eXBlIFwiK3RoaXMudHlwZS5uYW1lK1wiOiBcIitlK1wiIChcIit0K1wiKVwiKX0uYmluZCh0aGlzKSxudWxsPT09ZSlyZXR1cm4gdGhpcy5yZXF1aXJlZCYmaSh0eXBlb2YgZSxcInJlcXVpcmVkXCIpLFwicHJvdG8zXCI9PT10aGlzLnN5bnRheCYmdGhpcy50eXBlIT09dC5UWVBFUy5tZXNzYWdlJiZpKHR5cGVvZiBlLFwicHJvdG8zIGZpZWxkIHdpdGhvdXQgZmllbGQgcHJlc2VuY2UgY2Fubm90IGJlIG51bGxcIiksbnVsbDtpZih0aGlzLnJlcGVhdGVkJiYhbil7Zm9yKEFycmF5LmlzQXJyYXkoZSl8fChlPVtlXSkscz1bXSxyPTA7cjxlLmxlbmd0aDtyKyspcy5wdXNoKHRoaXMuZWxlbWVudC52ZXJpZnlWYWx1ZShlW3JdKSk7cmV0dXJuIHN9cmV0dXJuIHRoaXMubWFwJiYhbj9lIGluc3RhbmNlb2YgdC5NYXA/ZTooZSBpbnN0YW5jZW9mIE9iamVjdHx8aSh0eXBlb2YgZSxcImV4cGVjdGVkIFByb3RvQnVmLk1hcCBvciByYXcgb2JqZWN0IGZvciBtYXAgZmllbGRcIiksbmV3IHQuTWFwKHRoaXMsZSkpOighdGhpcy5yZXBlYXRlZCYmQXJyYXkuaXNBcnJheShlKSYmaSh0eXBlb2YgZSxcIm5vIGFycmF5IGV4cGVjdGVkXCIpLHRoaXMuZWxlbWVudC52ZXJpZnlWYWx1ZShlKSl9LGQuaGFzV2lyZVByZXNlbmNlPWZ1bmN0aW9uKGUsbil7aWYoXCJwcm90bzNcIiE9PXRoaXMuc3ludGF4KXJldHVybiBudWxsIT09ZTtpZih0aGlzLm9uZW9mJiZuW3RoaXMub25lb2YubmFtZV09PT10aGlzLm5hbWUpcmV0dXJuITA7c3dpdGNoKHRoaXMudHlwZSl7Y2FzZSB0LlRZUEVTLmludDMyOmNhc2UgdC5UWVBFUy5zaW50MzI6Y2FzZSB0LlRZUEVTLnNmaXhlZDMyOmNhc2UgdC5UWVBFUy51aW50MzI6Y2FzZSB0LlRZUEVTLmZpeGVkMzI6cmV0dXJuIDAhPT1lO2Nhc2UgdC5UWVBFUy5pbnQ2NDpjYXNlIHQuVFlQRVMuc2ludDY0OmNhc2UgdC5UWVBFUy5zZml4ZWQ2NDpjYXNlIHQuVFlQRVMudWludDY0OmNhc2UgdC5UWVBFUy5maXhlZDY0OnJldHVybiAwIT09ZS5sb3d8fDAhPT1lLmhpZ2g7Y2FzZSB0LlRZUEVTLmJvb2w6cmV0dXJuIGU7Y2FzZSB0LlRZUEVTLmZsb2F0OmNhc2UgdC5UWVBFUy5kb3VibGU6cmV0dXJuIDAhPT1lO2Nhc2UgdC5UWVBFUy5zdHJpbmc6cmV0dXJuIGUubGVuZ3RoPjA7Y2FzZSB0LlRZUEVTLmJ5dGVzOnJldHVybiBlLnJlbWFpbmluZygpPjA7Y2FzZSB0LlRZUEVTLmVudW06cmV0dXJuIDAhPT1lO2Nhc2UgdC5UWVBFUy5tZXNzYWdlOnJldHVybiBudWxsIT09ZTtkZWZhdWx0OnJldHVybiEwfX0sZC5lbmNvZGU9ZnVuY3Rpb24oZSxpLHIpe3ZhciBzLG8sYSx1LGM7aWYobnVsbD09PXRoaXMudHlwZXx8XCJvYmplY3RcIiE9dHlwZW9mIHRoaXMudHlwZSl0aHJvdyBFcnJvcihcIltJTlRFUk5BTF0gVW5yZXNvbHZlZCB0eXBlIGluIFwiK3RoaXMudG9TdHJpbmcoITApK1wiOiBcIit0aGlzLnR5cGUpO2lmKG51bGw9PT1lfHx0aGlzLnJlcGVhdGVkJiYwPT1lLmxlbmd0aClyZXR1cm4gaTt0cnl7aWYodGhpcy5yZXBlYXRlZClpZih0aGlzLm9wdGlvbnMucGFja2VkJiZ0LlBBQ0tBQkxFX1dJUkVfVFlQRVMuaW5kZXhPZih0aGlzLnR5cGUud2lyZVR5cGUpPj0wKXtmb3IoaS53cml0ZVZhcmludDMyKHRoaXMuaWQ8PDN8dC5XSVJFX1RZUEVTLkxERUxJTSksaS5lbnN1cmVDYXBhY2l0eShpLm9mZnNldCs9MSksbz1pLm9mZnNldCxzPTA7czxlLmxlbmd0aDtzKyspdGhpcy5lbGVtZW50LmVuY29kZVZhbHVlKHRoaXMuaWQsZVtzXSxpKTthPWkub2Zmc2V0LW8sKHU9bi5jYWxjdWxhdGVWYXJpbnQzMihhKSk+MSYmKGM9aS5zbGljZShvLGkub2Zmc2V0KSxvKz11LTEsaS5vZmZzZXQ9byxpLmFwcGVuZChjKSksaS53cml0ZVZhcmludDMyKGEsby11KX1lbHNlIGZvcihzPTA7czxlLmxlbmd0aDtzKyspaS53cml0ZVZhcmludDMyKHRoaXMuaWQ8PDN8dGhpcy50eXBlLndpcmVUeXBlKSx0aGlzLmVsZW1lbnQuZW5jb2RlVmFsdWUodGhpcy5pZCxlW3NdLGkpO2Vsc2UgdGhpcy5tYXA/ZS5mb3JFYWNoKChmdW5jdGlvbihlLHIpe3ZhciBzPW4uY2FsY3VsYXRlVmFyaW50MzIoOHx0aGlzLmtleVR5cGUud2lyZVR5cGUpK3RoaXMua2V5RWxlbWVudC5jYWxjdWxhdGVMZW5ndGgoMSxyKStuLmNhbGN1bGF0ZVZhcmludDMyKDE2fHRoaXMudHlwZS53aXJlVHlwZSkrdGhpcy5lbGVtZW50LmNhbGN1bGF0ZUxlbmd0aCgyLGUpO2kud3JpdGVWYXJpbnQzMih0aGlzLmlkPDwzfHQuV0lSRV9UWVBFUy5MREVMSU0pLGkud3JpdGVWYXJpbnQzMihzKSxpLndyaXRlVmFyaW50MzIoOHx0aGlzLmtleVR5cGUud2lyZVR5cGUpLHRoaXMua2V5RWxlbWVudC5lbmNvZGVWYWx1ZSgxLHIsaSksaS53cml0ZVZhcmludDMyKDE2fHRoaXMudHlwZS53aXJlVHlwZSksdGhpcy5lbGVtZW50LmVuY29kZVZhbHVlKDIsZSxpKX0pLHRoaXMpOnRoaXMuaGFzV2lyZVByZXNlbmNlKGUscikmJihpLndyaXRlVmFyaW50MzIodGhpcy5pZDw8M3x0aGlzLnR5cGUud2lyZVR5cGUpLHRoaXMuZWxlbWVudC5lbmNvZGVWYWx1ZSh0aGlzLmlkLGUsaSkpfWNhdGNoKHQpe3Rocm93IEVycm9yKFwiSWxsZWdhbCB2YWx1ZSBmb3IgXCIrdGhpcy50b1N0cmluZyghMCkrXCI6IFwiK2UrXCIgKFwiK3QrXCIpXCIpfXJldHVybiBpfSxkLmNhbGN1bGF0ZT1mdW5jdGlvbihlLGkpe3ZhciByLHMsbztpZihlPXRoaXMudmVyaWZ5VmFsdWUoZSksbnVsbD09PXRoaXMudHlwZXx8XCJvYmplY3RcIiE9dHlwZW9mIHRoaXMudHlwZSl0aHJvdyBFcnJvcihcIltJTlRFUk5BTF0gVW5yZXNvbHZlZCB0eXBlIGluIFwiK3RoaXMudG9TdHJpbmcoITApK1wiOiBcIit0aGlzLnR5cGUpO2lmKG51bGw9PT1lfHx0aGlzLnJlcGVhdGVkJiYwPT1lLmxlbmd0aClyZXR1cm4gMDtyPTA7dHJ5e2lmKHRoaXMucmVwZWF0ZWQpaWYodGhpcy5vcHRpb25zLnBhY2tlZCYmdC5QQUNLQUJMRV9XSVJFX1RZUEVTLmluZGV4T2YodGhpcy50eXBlLndpcmVUeXBlKT49MCl7Zm9yKHIrPW4uY2FsY3VsYXRlVmFyaW50MzIodGhpcy5pZDw8M3x0LldJUkVfVFlQRVMuTERFTElNKSxvPTAscz0wO3M8ZS5sZW5ndGg7cysrKW8rPXRoaXMuZWxlbWVudC5jYWxjdWxhdGVMZW5ndGgodGhpcy5pZCxlW3NdKTtyKz1uLmNhbGN1bGF0ZVZhcmludDMyKG8pLHIrPW99ZWxzZSBmb3Iocz0wO3M8ZS5sZW5ndGg7cysrKXIrPW4uY2FsY3VsYXRlVmFyaW50MzIodGhpcy5pZDw8M3x0aGlzLnR5cGUud2lyZVR5cGUpLHIrPXRoaXMuZWxlbWVudC5jYWxjdWxhdGVMZW5ndGgodGhpcy5pZCxlW3NdKTtlbHNlIHRoaXMubWFwP2UuZm9yRWFjaCgoZnVuY3Rpb24oZSxpKXt2YXIgcz1uLmNhbGN1bGF0ZVZhcmludDMyKDh8dGhpcy5rZXlUeXBlLndpcmVUeXBlKSt0aGlzLmtleUVsZW1lbnQuY2FsY3VsYXRlTGVuZ3RoKDEsaSkrbi5jYWxjdWxhdGVWYXJpbnQzMigxNnx0aGlzLnR5cGUud2lyZVR5cGUpK3RoaXMuZWxlbWVudC5jYWxjdWxhdGVMZW5ndGgoMixlKTtyKz1uLmNhbGN1bGF0ZVZhcmludDMyKHRoaXMuaWQ8PDN8dC5XSVJFX1RZUEVTLkxERUxJTSkscis9bi5jYWxjdWxhdGVWYXJpbnQzMihzKSxyKz1zfSksdGhpcyk6dGhpcy5oYXNXaXJlUHJlc2VuY2UoZSxpKSYmKHIrPW4uY2FsY3VsYXRlVmFyaW50MzIodGhpcy5pZDw8M3x0aGlzLnR5cGUud2lyZVR5cGUpLHIrPXRoaXMuZWxlbWVudC5jYWxjdWxhdGVMZW5ndGgodGhpcy5pZCxlKSl9Y2F0Y2godCl7dGhyb3cgRXJyb3IoXCJJbGxlZ2FsIHZhbHVlIGZvciBcIit0aGlzLnRvU3RyaW5nKCEwKStcIjogXCIrZStcIiAoXCIrdCtcIilcIil9cmV0dXJuIHJ9LGQuZGVjb2RlPWZ1bmN0aW9uKGUsbixpKXt2YXIgcixzLG8sdSxjLGgsbDtpZighKCF0aGlzLm1hcCYmZT09dGhpcy50eXBlLndpcmVUeXBlfHwhaSYmdGhpcy5yZXBlYXRlZCYmdGhpcy5vcHRpb25zLnBhY2tlZCYmZT09dC5XSVJFX1RZUEVTLkxERUxJTXx8dGhpcy5tYXAmJmU9PXQuV0lSRV9UWVBFUy5MREVMSU0pKXRocm93IEVycm9yKFwiSWxsZWdhbCB3aXJlIHR5cGUgZm9yIGZpZWxkIFwiK3RoaXMudG9TdHJpbmcoITApK1wiOiBcIitlK1wiIChcIit0aGlzLnR5cGUud2lyZVR5cGUrXCIgZXhwZWN0ZWQpXCIpO2lmKGU9PXQuV0lSRV9UWVBFUy5MREVMSU0mJnRoaXMucmVwZWF0ZWQmJnRoaXMub3B0aW9ucy5wYWNrZWQmJnQuUEFDS0FCTEVfV0lSRV9UWVBFUy5pbmRleE9mKHRoaXMudHlwZS53aXJlVHlwZSk+PTAmJiFpKXtmb3Iocz1uLnJlYWRWYXJpbnQzMigpLHM9bi5vZmZzZXQrcyxvPVtdO24ub2Zmc2V0PHM7KW8ucHVzaCh0aGlzLmRlY29kZSh0aGlzLnR5cGUud2lyZVR5cGUsbiwhMCkpO3JldHVybiBvfWlmKHRoaXMubWFwKXtpZih1PWEuZGVmYXVsdEZpZWxkVmFsdWUodGhpcy5rZXlUeXBlKSxyPWEuZGVmYXVsdEZpZWxkVmFsdWUodGhpcy50eXBlKSxzPW4ucmVhZFZhcmludDMyKCksbi5yZW1haW5pbmcoKTxzKXRocm93IEVycm9yKFwiSWxsZWdhbCBudW1iZXIgb2YgYnl0ZXMgZm9yIFwiK3RoaXMudG9TdHJpbmcoITApK1wiOiBcIitzK1wiIHJlcXVpcmVkIGJ1dCBnb3Qgb25seSBcIituLnJlbWFpbmluZygpKTtmb3IoKGM9bi5jbG9uZSgpKS5saW1pdD1jLm9mZnNldCtzLG4ub2Zmc2V0Kz1zO2MucmVtYWluaW5nKCk+MDspaWYoZT03JihoPWMucmVhZFZhcmludDMyKCkpLDE9PShsPWg+Pj4zKSl1PXRoaXMua2V5RWxlbWVudC5kZWNvZGUoYyxlLGwpO2Vsc2V7aWYoMiE9PWwpdGhyb3cgRXJyb3IoXCJVbmV4cGVjdGVkIHRhZyBpbiBtYXAgZmllbGQga2V5L3ZhbHVlIHN1Ym1lc3NhZ2VcIik7cj10aGlzLmVsZW1lbnQuZGVjb2RlKGMsZSxsKX1yZXR1cm5bdSxyXX1yZXR1cm4gdGhpcy5lbGVtZW50LmRlY29kZShuLGUsdGhpcy5pZCl9LFQuTWVzc2FnZS5GaWVsZD1sLChmPWZ1bmN0aW9uKGUsdCxuLGkscixzLG8pe2wuY2FsbCh0aGlzLGUsdCxuLG51bGwsaSxyLHMsbyksdGhpcy5leHRlbnNpb259KS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShsLnByb3RvdHlwZSksVC5NZXNzYWdlLkV4dGVuc2lvbkZpZWxkPWYscD1mdW5jdGlvbihlLHQsbil7SS5jYWxsKHRoaXMsZSx0LG4pLHRoaXMuZmllbGRzPVtdfSxULk1lc3NhZ2UuT25lT2Y9cCwoZz1mdW5jdGlvbihlLHQsbixpLHIpe3MuY2FsbCh0aGlzLGUsdCxuLGksciksdGhpcy5jbGFzc05hbWU9XCJFbnVtXCIsdGhpcy5vYmplY3Q9bnVsbH0pLmdldE5hbWU9ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI9T2JqZWN0LmtleXMoZSk7Zm9yKGk9MDtpPHIubGVuZ3RoOysraSlpZihlW249cltpXV09PT10KXJldHVybiBuO3JldHVybiBudWxsfSwoZy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShzLnByb3RvdHlwZSkpLmJ1aWxkPWZ1bmN0aW9uKGUpe3ZhciBuLGkscixzO2lmKHRoaXMub2JqZWN0JiYhZSlyZXR1cm4gdGhpcy5vYmplY3Q7Zm9yKG49bmV3IHQuQnVpbGRlci5FbnVtLHI9MCxzPShpPXRoaXMuZ2V0Q2hpbGRyZW4oZy5WYWx1ZSkpLmxlbmd0aDtzPnI7KytyKW5baVtyXS5uYW1lXT1pW3JdLmlkO3JldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLFwiJG9wdGlvbnNcIix7dmFsdWU6dGhpcy5idWlsZE9wdCgpLGVudW1lcmFibGU6ITF9KSx0aGlzLm9iamVjdD1ufSxULkVudW09ZywoXz1mdW5jdGlvbihlLHQsbixpKXtJLmNhbGwodGhpcyxlLHQsbiksdGhpcy5jbGFzc05hbWU9XCJFbnVtLlZhbHVlXCIsdGhpcy5pZD1pfSkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoSS5wcm90b3R5cGUpLFQuRW51bS5WYWx1ZT1fLCh5PWZ1bmN0aW9uKGUsdCxuLGkpe0kuY2FsbCh0aGlzLGUsdCxuKSx0aGlzLmZpZWxkPWl9KS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShJLnByb3RvdHlwZSksVC5FeHRlbnNpb249eSwoKG09ZnVuY3Rpb24oZSx0LG4saSl7cy5jYWxsKHRoaXMsZSx0LG4saSksdGhpcy5jbGFzc05hbWU9XCJTZXJ2aWNlXCIsdGhpcy5jbGF6ej1udWxsfSkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUocy5wcm90b3R5cGUpKS5idWlsZD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5jbGF6eiYmIWU/dGhpcy5jbGF6ejp0aGlzLmNsYXp6PWZ1bmN0aW9uKGUsdCl7dmFyIGkscj1mdW5jdGlvbih0KXtlLkJ1aWxkZXIuU2VydmljZS5jYWxsKHRoaXMpLHRoaXMucnBjSW1wbD10fHxmdW5jdGlvbihlLHQsbil7c2V0VGltZW91dChuLmJpbmQodGhpcyxFcnJvcihcIk5vdCBpbXBsZW1lbnRlZCwgc2VlOiBodHRwczovL2dpdGh1Yi5jb20vZGNvZGVJTy9Qcm90b0J1Zi5qcy93aWtpL1NlcnZpY2VzXCIpKSwwKX19LHM9ci5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlLkJ1aWxkZXIuU2VydmljZS5wcm90b3R5cGUpLG89dC5nZXRDaGlsZHJlbihlLlJlZmxlY3QuU2VydmljZS5SUENNZXRob2QpO2ZvcihpPTA7aTxvLmxlbmd0aDtpKyspIWZ1bmN0aW9uKGUpe3NbZS5uYW1lXT1mdW5jdGlvbihpLHIpe3RyeXt0cnl7aT1lLnJlc29sdmVkUmVxdWVzdFR5cGUuY2xhenouZGVjb2RlKG4ud3JhcChpKSl9Y2F0Y2goZSl7aWYoIShlIGluc3RhbmNlb2YgVHlwZUVycm9yKSl0aHJvdyBlfWlmKG51bGw9PT1pfHxcIm9iamVjdFwiIT10eXBlb2YgaSl0aHJvdyBFcnJvcihcIklsbGVnYWwgYXJndW1lbnRzXCIpO2kgaW5zdGFuY2VvZiBlLnJlc29sdmVkUmVxdWVzdFR5cGUuY2xhenp8fChpPW5ldyBlLnJlc29sdmVkUmVxdWVzdFR5cGUuY2xhenooaSkpLHRoaXMucnBjSW1wbChlLmZxbigpLGksKGZ1bmN0aW9uKG4saSl7aWYoIW4pe3RyeXtpPWUucmVzb2x2ZWRSZXNwb25zZVR5cGUuY2xhenouZGVjb2RlKGkpfWNhdGNoKGUpe31yZXR1cm4gaSYmaSBpbnN0YW5jZW9mIGUucmVzb2x2ZWRSZXNwb25zZVR5cGUuY2xheno/dm9pZCByKG51bGwsaSk6dm9pZCByKEVycm9yKFwiSWxsZWdhbCByZXNwb25zZSB0eXBlIHJlY2VpdmVkIGluIHNlcnZpY2UgbWV0aG9kIFwiK3QubmFtZStcIiNcIitlLm5hbWUpKX1yKG4pfSkpfWNhdGNoKGUpe3NldFRpbWVvdXQoci5iaW5kKHRoaXMsZSksMCl9fSxyW2UubmFtZV09ZnVuY3Rpb24odCxuLGkpe25ldyByKHQpW2UubmFtZV0obixpKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5JiYoT2JqZWN0LmRlZmluZVByb3BlcnR5KHJbZS5uYW1lXSxcIiRvcHRpb25zXCIse3ZhbHVlOmUuYnVpbGRPcHQoKX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzW2UubmFtZV0sXCIkb3B0aW9uc1wiLHt2YWx1ZTpyW2UubmFtZV0uJG9wdGlvbnN9KSl9KG9baV0pO3JldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkmJihPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIiRvcHRpb25zXCIse3ZhbHVlOnQuYnVpbGRPcHQoKX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLFwiJG9wdGlvbnNcIix7dmFsdWU6ci4kb3B0aW9uc30pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwiJHR5cGVcIix7dmFsdWU6dH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLFwiJHR5cGVcIix7dmFsdWU6dH0pKSxyfSh0LHRoaXMpfSxULlNlcnZpY2U9bSwoKHY9ZnVuY3Rpb24oZSx0LG4saSl7SS5jYWxsKHRoaXMsZSx0LG4pLHRoaXMuY2xhc3NOYW1lPVwiU2VydmljZS5NZXRob2RcIix0aGlzLm9wdGlvbnM9aXx8e319KS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShJLnByb3RvdHlwZSkpLmJ1aWxkT3B0PW8uYnVpbGRPcHQsVC5TZXJ2aWNlLk1ldGhvZD12LChFPWZ1bmN0aW9uKGUsdCxuLGkscixzLG8sYSl7di5jYWxsKHRoaXMsZSx0LG4sYSksdGhpcy5jbGFzc05hbWU9XCJTZXJ2aWNlLlJQQ01ldGhvZFwiLHRoaXMucmVxdWVzdE5hbWU9aSx0aGlzLnJlc3BvbnNlTmFtZT1yLHRoaXMucmVxdWVzdFN0cmVhbT1zLHRoaXMucmVzcG9uc2VTdHJlYW09byx0aGlzLnJlc29sdmVkUmVxdWVzdFR5cGU9bnVsbCx0aGlzLnJlc29sdmVkUmVzcG9uc2VUeXBlPW51bGx9KS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh2LnByb3RvdHlwZSksVC5TZXJ2aWNlLlJQQ01ldGhvZD1FLFR9KHIpLHIuQnVpbGRlcj1mdW5jdGlvbihlLHQsbil7ZnVuY3Rpb24gaShlKXtlLm1lc3NhZ2VzJiZlLm1lc3NhZ2VzLmZvckVhY2goKGZ1bmN0aW9uKHQpe3Quc3ludGF4PWUuc3ludGF4LGkodCl9KSksZS5lbnVtcyYmZS5lbnVtcy5mb3JFYWNoKChmdW5jdGlvbih0KXt0LnN5bnRheD1lLnN5bnRheH0pKX12YXIgcj1mdW5jdGlvbihlKXt0aGlzLm5zPW5ldyBuLk5hbWVzcGFjZSh0aGlzLG51bGwsXCJcIiksdGhpcy5wdHI9dGhpcy5ucyx0aGlzLnJlc29sdmVkPSExLHRoaXMucmVzdWx0PW51bGwsdGhpcy5maWxlcz17fSx0aGlzLmltcG9ydFJvb3Q9bnVsbCx0aGlzLm9wdGlvbnM9ZXx8e319LHM9ci5wcm90b3R5cGU7cmV0dXJuIHIuaXNNZXNzYWdlPWZ1bmN0aW9uKGUpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBlLm5hbWUmJnZvaWQgMD09PWUudmFsdWVzJiZ2b2lkIDA9PT1lLnJwY30sci5pc01lc3NhZ2VGaWVsZD1mdW5jdGlvbihlKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgZS5ydWxlJiZcInN0cmluZ1wiPT10eXBlb2YgZS5uYW1lJiZcInN0cmluZ1wiPT10eXBlb2YgZS50eXBlJiZ2b2lkIDAhPT1lLmlkfSxyLmlzRW51bT1mdW5jdGlvbihlKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgZS5uYW1lJiYhKHZvaWQgMD09PWUudmFsdWVzfHwhQXJyYXkuaXNBcnJheShlLnZhbHVlcyl8fDA9PT1lLnZhbHVlcy5sZW5ndGgpfSxyLmlzU2VydmljZT1mdW5jdGlvbihlKXtyZXR1cm4hKFwic3RyaW5nXCIhPXR5cGVvZiBlLm5hbWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlLnJwY3x8IWUucnBjKX0sci5pc0V4dGVuZD1mdW5jdGlvbihlKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgZS5yZWZ9LHMucmVzZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdHI9dGhpcy5ucyx0aGlzfSxzLmRlZmluZT1mdW5jdGlvbihlKXtpZihcInN0cmluZ1wiIT10eXBlb2YgZXx8IXQuVFlQRVJFRi50ZXN0KGUpKXRocm93IEVycm9yKFwiaWxsZWdhbCBuYW1lc3BhY2U6IFwiK2UpO3JldHVybiBlLnNwbGl0KFwiLlwiKS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgdD10aGlzLnB0ci5nZXRDaGlsZChlKTtudWxsPT09dCYmdGhpcy5wdHIuYWRkQ2hpbGQodD1uZXcgbi5OYW1lc3BhY2UodGhpcyx0aGlzLnB0cixlKSksdGhpcy5wdHI9dH0pLHRoaXMpLHRoaXN9LHMuY3JlYXRlPWZ1bmN0aW9uKHQpe3ZhciBpLHMsbyxhLHU7aWYoIXQpcmV0dXJuIHRoaXM7aWYoQXJyYXkuaXNBcnJheSh0KSl7aWYoMD09PXQubGVuZ3RoKXJldHVybiB0aGlzO3Q9dC5zbGljZSgpfWVsc2UgdD1bdF07Zm9yKGk9W3RdO2kubGVuZ3RoPjA7KXtpZih0PWkucG9wKCksIUFycmF5LmlzQXJyYXkodCkpdGhyb3cgRXJyb3IoXCJub3QgYSB2YWxpZCBuYW1lc3BhY2U6IFwiK0pTT04uc3RyaW5naWZ5KHQpKTtmb3IoO3QubGVuZ3RoPjA7KXtpZihzPXQuc2hpZnQoKSxyLmlzTWVzc2FnZShzKSl7aWYobz1uZXcgbi5NZXNzYWdlKHRoaXMsdGhpcy5wdHIscy5uYW1lLHMub3B0aW9ucyxzLmlzR3JvdXAscy5zeW50YXgpLGE9e30scy5vbmVvZnMmJk9iamVjdC5rZXlzKHMub25lb2ZzKS5mb3JFYWNoKChmdW5jdGlvbihlKXtvLmFkZENoaWxkKGFbZV09bmV3IG4uTWVzc2FnZS5PbmVPZih0aGlzLG8sZSkpfSksdGhpcykscy5maWVsZHMmJnMuZmllbGRzLmZvckVhY2goKGZ1bmN0aW9uKGUpe2lmKG51bGwhPT1vLmdldENoaWxkKDB8ZS5pZCkpdGhyb3cgRXJyb3IoXCJkdXBsaWNhdGUgb3IgaW52YWxpZCBmaWVsZCBpZCBpbiBcIitvLm5hbWUrXCI6IFwiK2UuaWQpO2lmKGUub3B0aW9ucyYmXCJvYmplY3RcIiE9dHlwZW9mIGUub3B0aW9ucyl0aHJvdyBFcnJvcihcImlsbGVnYWwgZmllbGQgb3B0aW9ucyBpbiBcIitvLm5hbWUrXCIjXCIrZS5uYW1lKTt2YXIgdD1udWxsO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlLm9uZW9mJiYhKHQ9YVtlLm9uZW9mXSkpdGhyb3cgRXJyb3IoXCJpbGxlZ2FsIG9uZW9mIGluIFwiK28ubmFtZStcIiNcIitlLm5hbWUrXCI6IFwiK2Uub25lb2YpO2U9bmV3IG4uTWVzc2FnZS5GaWVsZCh0aGlzLG8sZS5ydWxlLGUua2V5dHlwZSxlLnR5cGUsZS5uYW1lLGUuaWQsZS5vcHRpb25zLHQscy5zeW50YXgpLHQmJnQuZmllbGRzLnB1c2goZSksby5hZGRDaGlsZChlKX0pLHRoaXMpLHU9W10scy5lbnVtcyYmcy5lbnVtcy5mb3JFYWNoKChmdW5jdGlvbihlKXt1LnB1c2goZSl9KSkscy5tZXNzYWdlcyYmcy5tZXNzYWdlcy5mb3JFYWNoKChmdW5jdGlvbihlKXt1LnB1c2goZSl9KSkscy5zZXJ2aWNlcyYmcy5zZXJ2aWNlcy5mb3JFYWNoKChmdW5jdGlvbihlKXt1LnB1c2goZSl9KSkscy5leHRlbnNpb25zJiYoby5leHRlbnNpb25zPVwibnVtYmVyXCI9PXR5cGVvZiBzLmV4dGVuc2lvbnNbMF0/W3MuZXh0ZW5zaW9uc106cy5leHRlbnNpb25zKSx0aGlzLnB0ci5hZGRDaGlsZChvKSx1Lmxlbmd0aD4wKXtpLnB1c2godCksdD11LHU9bnVsbCx0aGlzLnB0cj1vLG89bnVsbDtjb250aW51ZX11PW51bGx9ZWxzZSBpZihyLmlzRW51bShzKSlvPW5ldyBuLkVudW0odGhpcyx0aGlzLnB0cixzLm5hbWUscy5vcHRpb25zLHMuc3ludGF4KSxzLnZhbHVlcy5mb3JFYWNoKChmdW5jdGlvbihlKXtvLmFkZENoaWxkKG5ldyBuLkVudW0uVmFsdWUodGhpcyxvLGUubmFtZSxlLmlkKSl9KSx0aGlzKSx0aGlzLnB0ci5hZGRDaGlsZChvKTtlbHNlIGlmKHIuaXNTZXJ2aWNlKHMpKW89bmV3IG4uU2VydmljZSh0aGlzLHRoaXMucHRyLHMubmFtZSxzLm9wdGlvbnMpLE9iamVjdC5rZXlzKHMucnBjKS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgdD1zLnJwY1tlXTtvLmFkZENoaWxkKG5ldyBuLlNlcnZpY2UuUlBDTWV0aG9kKHRoaXMsbyxlLHQucmVxdWVzdCx0LnJlc3BvbnNlLCEhdC5yZXF1ZXN0X3N0cmVhbSwhIXQucmVzcG9uc2Vfc3RyZWFtLHQub3B0aW9ucykpfSksdGhpcyksdGhpcy5wdHIuYWRkQ2hpbGQobyk7ZWxzZXtpZighci5pc0V4dGVuZChzKSl0aHJvdyBFcnJvcihcIm5vdCBhIHZhbGlkIGRlZmluaXRpb246IFwiK0pTT04uc3RyaW5naWZ5KHMpKTtpZihvPXRoaXMucHRyLnJlc29sdmUocy5yZWYsITApKXMuZmllbGRzLmZvckVhY2goKGZ1bmN0aW9uKHQpe3ZhciBpLHIscyxhO2lmKG51bGwhPT1vLmdldENoaWxkKDB8dC5pZCkpdGhyb3cgRXJyb3IoXCJkdXBsaWNhdGUgZXh0ZW5kZWQgZmllbGQgaWQgaW4gXCIrby5uYW1lK1wiOiBcIit0LmlkKTtpZihvLmV4dGVuc2lvbnMmJihpPSExLG8uZXh0ZW5zaW9ucy5mb3JFYWNoKChmdW5jdGlvbihlKXt0LmlkPj1lWzBdJiZ0LmlkPD1lWzFdJiYoaT0hMCl9KSksIWkpKXRocm93IEVycm9yKFwiaWxsZWdhbCBleHRlbmRlZCBmaWVsZCBpZCBpbiBcIitvLm5hbWUrXCI6IFwiK3QuaWQrXCIgKG5vdCB3aXRoaW4gdmFsaWQgcmFuZ2VzKVwiKTtyPXQubmFtZSx0aGlzLm9wdGlvbnMuY29udmVydEZpZWxkc1RvQ2FtZWxDYXNlJiYocj1lLlV0aWwudG9DYW1lbENhc2UocikpLHM9bmV3IG4uTWVzc2FnZS5FeHRlbnNpb25GaWVsZCh0aGlzLG8sdC5ydWxlLHQudHlwZSx0aGlzLnB0ci5mcW4oKStcIi5cIityLHQuaWQsdC5vcHRpb25zKSxhPW5ldyBuLkV4dGVuc2lvbih0aGlzLHRoaXMucHRyLHQubmFtZSxzKSxzLmV4dGVuc2lvbj1hLHRoaXMucHRyLmFkZENoaWxkKGEpLG8uYWRkQ2hpbGQocyl9KSx0aGlzKTtlbHNlIGlmKCEvXFwuP2dvb2dsZVxcLnByb3RvYnVmXFwuLy50ZXN0KHMucmVmKSl0aHJvdyBFcnJvcihcImV4dGVuZGVkIG1lc3NhZ2UgXCIrcy5yZWYrXCIgaXMgbm90IGRlZmluZWRcIil9cz1udWxsLG89bnVsbH10PW51bGwsdGhpcy5wdHI9dGhpcy5wdHIucGFyZW50fXJldHVybiB0aGlzLnJlc29sdmVkPSExLHRoaXMucmVzdWx0PW51bGwsdGhpc30scy5pbXBvcnQ9ZnVuY3Rpb24odCxuKXt2YXIgcixzLG8sYSx1LGMsaCxsLGQ9XCIvXCI7aWYoXCJzdHJpbmdcIj09dHlwZW9mIG4pe2lmKGUuVXRpbC5JU19OT0RFLCEwPT09dGhpcy5maWxlc1tuXSlyZXR1cm4gdGhpcy5yZXNldCgpO3RoaXMuZmlsZXNbbl09ITB9ZWxzZSBpZihcIm9iamVjdFwiPT10eXBlb2Ygbil7aWYocj1uLnJvb3QsZS5VdGlsLklTX05PREUsKHIuaW5kZXhPZihcIlxcXFxcIik+PTB8fG4uZmlsZS5pbmRleE9mKFwiXFxcXFwiKT49MCkmJihkPVwiXFxcXFwiKSxzPXIrZCtuLmZpbGUsITA9PT10aGlzLmZpbGVzW3NdKXJldHVybiB0aGlzLnJlc2V0KCk7dGhpcy5maWxlc1tzXT0hMH1pZih0LmltcG9ydHMmJnQuaW1wb3J0cy5sZW5ndGg+MCl7Zm9yKGE9ITEsXCJvYmplY3RcIj09dHlwZW9mIG4/KHRoaXMuaW1wb3J0Um9vdD1uLnJvb3QsYT0hMCxvPXRoaXMuaW1wb3J0Um9vdCxuPW4uZmlsZSwoby5pbmRleE9mKFwiXFxcXFwiKT49MHx8bi5pbmRleE9mKFwiXFxcXFwiKT49MCkmJihkPVwiXFxcXFwiKSk6XCJzdHJpbmdcIj09dHlwZW9mIG4/dGhpcy5pbXBvcnRSb290P289dGhpcy5pbXBvcnRSb290Om4uaW5kZXhPZihcIi9cIik+PTA/XCJcIj09PShvPW4ucmVwbGFjZSgvXFwvW15cXC9dKiQvLFwiXCIpKSYmKG89XCIvXCIpOm4uaW5kZXhPZihcIlxcXFxcIik+PTA/KG89bi5yZXBsYWNlKC9cXFxcW15cXFxcXSokLyxcIlwiKSxkPVwiXFxcXFwiKTpvPVwiLlwiOm89bnVsbCx1PTA7dTx0LmltcG9ydHMubGVuZ3RoO3UrKylpZihcInN0cmluZ1wiPT10eXBlb2YgdC5pbXBvcnRzW3VdKXtpZighbyl0aHJvdyBFcnJvcihcImNhbm5vdCBkZXRlcm1pbmUgaW1wb3J0IHJvb3RcIik7aWYoXCJnb29nbGUvcHJvdG9idWYvZGVzY3JpcHRvci5wcm90b1wiPT09KGM9dC5pbXBvcnRzW3VdKSljb250aW51ZTtpZihjPW8rZCtjLCEwPT09dGhpcy5maWxlc1tjXSljb250aW51ZTtpZigvXFwucHJvdG8kL2kudGVzdChjKSYmIWUuRG90UHJvdG8mJihjPWMucmVwbGFjZSgvXFwucHJvdG8kLyxcIi5qc29uXCIpKSxudWxsPT09KGg9ZS5VdGlsLmZldGNoKGMpKSl0aHJvdyBFcnJvcihcImZhaWxlZCB0byBpbXBvcnQgJ1wiK2MrXCInIGluICdcIituK1wiJzogZmlsZSBub3QgZm91bmRcIik7L1xcLmpzb24kL2kudGVzdChjKT90aGlzLmltcG9ydChKU09OLnBhcnNlKGgrXCJcIiksYyk6dGhpcy5pbXBvcnQoZS5Eb3RQcm90by5QYXJzZXIucGFyc2UoaCksYyl9ZWxzZSBuPy9cXC4oXFx3KykkLy50ZXN0KG4pP3RoaXMuaW1wb3J0KHQuaW1wb3J0c1t1XSxuLnJlcGxhY2UoL14oLispXFwuKFxcdyspJC8sKGZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdCtcIl9pbXBvcnRcIit1K1wiLlwiK259KSkpOnRoaXMuaW1wb3J0KHQuaW1wb3J0c1t1XSxuK1wiX2ltcG9ydFwiK3UpOnRoaXMuaW1wb3J0KHQuaW1wb3J0c1t1XSk7YSYmKHRoaXMuaW1wb3J0Um9vdD1udWxsKX1yZXR1cm4gdC5wYWNrYWdlJiZ0aGlzLmRlZmluZSh0LnBhY2thZ2UpLHQuc3ludGF4JiZpKHQpLGw9dGhpcy5wdHIsdC5vcHRpb25zJiZPYmplY3Qua2V5cyh0Lm9wdGlvbnMpLmZvckVhY2goKGZ1bmN0aW9uKGUpe2wub3B0aW9uc1tlXT10Lm9wdGlvbnNbZV19KSksdC5tZXNzYWdlcyYmKHRoaXMuY3JlYXRlKHQubWVzc2FnZXMpLHRoaXMucHRyPWwpLHQuZW51bXMmJih0aGlzLmNyZWF0ZSh0LmVudW1zKSx0aGlzLnB0cj1sKSx0LnNlcnZpY2VzJiYodGhpcy5jcmVhdGUodC5zZXJ2aWNlcyksdGhpcy5wdHI9bCksdC5leHRlbmRzJiZ0aGlzLmNyZWF0ZSh0LmV4dGVuZHMpLHRoaXMucmVzZXQoKX0scy5yZXNvbHZlQWxsPWZ1bmN0aW9uKCl7dmFyIGk7aWYobnVsbD09dGhpcy5wdHJ8fFwib2JqZWN0XCI9PXR5cGVvZiB0aGlzLnB0ci50eXBlKXJldHVybiB0aGlzO2lmKHRoaXMucHRyIGluc3RhbmNlb2Ygbi5OYW1lc3BhY2UpdGhpcy5wdHIuY2hpbGRyZW4uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dGhpcy5wdHI9ZSx0aGlzLnJlc29sdmVBbGwoKX0pLHRoaXMpO2Vsc2UgaWYodGhpcy5wdHIgaW5zdGFuY2VvZiBuLk1lc3NhZ2UuRmllbGQpe2lmKHQuVFlQRS50ZXN0KHRoaXMucHRyLnR5cGUpKXRoaXMucHRyLnR5cGU9ZS5UWVBFU1t0aGlzLnB0ci50eXBlXTtlbHNle2lmKCF0LlRZUEVSRUYudGVzdCh0aGlzLnB0ci50eXBlKSl0aHJvdyBFcnJvcihcImlsbGVnYWwgdHlwZSByZWZlcmVuY2UgaW4gXCIrdGhpcy5wdHIudG9TdHJpbmcoITApK1wiOiBcIit0aGlzLnB0ci50eXBlKTtpZighKGk9KHRoaXMucHRyIGluc3RhbmNlb2Ygbi5NZXNzYWdlLkV4dGVuc2lvbkZpZWxkP3RoaXMucHRyLmV4dGVuc2lvbi5wYXJlbnQ6dGhpcy5wdHIucGFyZW50KS5yZXNvbHZlKHRoaXMucHRyLnR5cGUsITApKSl0aHJvdyBFcnJvcihcInVucmVzb2x2YWJsZSB0eXBlIHJlZmVyZW5jZSBpbiBcIit0aGlzLnB0ci50b1N0cmluZyghMCkrXCI6IFwiK3RoaXMucHRyLnR5cGUpO2lmKHRoaXMucHRyLnJlc29sdmVkVHlwZT1pLGkgaW5zdGFuY2VvZiBuLkVudW0pe2lmKHRoaXMucHRyLnR5cGU9ZS5UWVBFUy5lbnVtLFwicHJvdG8zXCI9PT10aGlzLnB0ci5zeW50YXgmJlwicHJvdG8zXCIhPT1pLnN5bnRheCl0aHJvdyBFcnJvcihcInByb3RvMyBtZXNzYWdlIGNhbm5vdCByZWZlcmVuY2UgcHJvdG8yIGVudW1cIil9ZWxzZXtpZighKGkgaW5zdGFuY2VvZiBuLk1lc3NhZ2UpKXRocm93IEVycm9yKFwiaWxsZWdhbCB0eXBlIHJlZmVyZW5jZSBpbiBcIit0aGlzLnB0ci50b1N0cmluZyghMCkrXCI6IFwiK3RoaXMucHRyLnR5cGUpO3RoaXMucHRyLnR5cGU9aS5pc0dyb3VwP2UuVFlQRVMuZ3JvdXA6ZS5UWVBFUy5tZXNzYWdlfX1pZih0aGlzLnB0ci5tYXApe2lmKCF0LlRZUEUudGVzdCh0aGlzLnB0ci5rZXlUeXBlKSl0aHJvdyBFcnJvcihcImlsbGVnYWwga2V5IHR5cGUgZm9yIG1hcCBmaWVsZCBpbiBcIit0aGlzLnB0ci50b1N0cmluZyghMCkrXCI6IFwiK3RoaXMucHRyLmtleVR5cGUpO3RoaXMucHRyLmtleVR5cGU9ZS5UWVBFU1t0aGlzLnB0ci5rZXlUeXBlXX19ZWxzZSBpZih0aGlzLnB0ciBpbnN0YW5jZW9mIGUuUmVmbGVjdC5TZXJ2aWNlLk1ldGhvZCl7aWYoISh0aGlzLnB0ciBpbnN0YW5jZW9mIGUuUmVmbGVjdC5TZXJ2aWNlLlJQQ01ldGhvZCkpdGhyb3cgRXJyb3IoXCJpbGxlZ2FsIHNlcnZpY2UgdHlwZSBpbiBcIit0aGlzLnB0ci50b1N0cmluZyghMCkpO2lmKCEoKGk9dGhpcy5wdHIucGFyZW50LnJlc29sdmUodGhpcy5wdHIucmVxdWVzdE5hbWUsITApKSYmaSBpbnN0YW5jZW9mIGUuUmVmbGVjdC5NZXNzYWdlKSl0aHJvdyBFcnJvcihcIklsbGVnYWwgdHlwZSByZWZlcmVuY2UgaW4gXCIrdGhpcy5wdHIudG9TdHJpbmcoITApK1wiOiBcIit0aGlzLnB0ci5yZXF1ZXN0TmFtZSk7aWYodGhpcy5wdHIucmVzb2x2ZWRSZXF1ZXN0VHlwZT1pLCEoKGk9dGhpcy5wdHIucGFyZW50LnJlc29sdmUodGhpcy5wdHIucmVzcG9uc2VOYW1lLCEwKSkmJmkgaW5zdGFuY2VvZiBlLlJlZmxlY3QuTWVzc2FnZSkpdGhyb3cgRXJyb3IoXCJJbGxlZ2FsIHR5cGUgcmVmZXJlbmNlIGluIFwiK3RoaXMucHRyLnRvU3RyaW5nKCEwKStcIjogXCIrdGhpcy5wdHIucmVzcG9uc2VOYW1lKTt0aGlzLnB0ci5yZXNvbHZlZFJlc3BvbnNlVHlwZT1pfWVsc2UgaWYoISh0aGlzLnB0ciBpbnN0YW5jZW9mIGUuUmVmbGVjdC5NZXNzYWdlLk9uZU9mfHx0aGlzLnB0ciBpbnN0YW5jZW9mIGUuUmVmbGVjdC5FeHRlbnNpb258fHRoaXMucHRyIGluc3RhbmNlb2YgZS5SZWZsZWN0LkVudW0uVmFsdWUpKXRocm93IEVycm9yKFwiaWxsZWdhbCBvYmplY3QgaW4gbmFtZXNwYWNlOiBcIit0eXBlb2YgdGhpcy5wdHIrXCI6IFwiK3RoaXMucHRyKTtyZXR1cm4gdGhpcy5yZXNldCgpfSxzLmJ1aWxkPWZ1bmN0aW9uKGUpe3ZhciB0LG4saTtpZih0aGlzLnJlc2V0KCksdGhpcy5yZXNvbHZlZHx8KHRoaXMucmVzb2x2ZUFsbCgpLHRoaXMucmVzb2x2ZWQ9ITAsdGhpcy5yZXN1bHQ9bnVsbCksbnVsbD09PXRoaXMucmVzdWx0JiYodGhpcy5yZXN1bHQ9dGhpcy5ucy5idWlsZCgpKSwhZSlyZXR1cm4gdGhpcy5yZXN1bHQ7Zm9yKHQ9XCJzdHJpbmdcIj09dHlwZW9mIGU/ZS5zcGxpdChcIi5cIik6ZSxuPXRoaXMucmVzdWx0LGk9MDtpPHQubGVuZ3RoO2krKyl7aWYoIW5bdFtpXV0pe249bnVsbDticmVha31uPW5bdFtpXV19cmV0dXJuIG59LHMubG9va3VwPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU/dGhpcy5ucy5yZXNvbHZlKGUsdCk6dGhpcy5uc30scy50b1N0cmluZz1mdW5jdGlvbigpe3JldHVyblwiQnVpbGRlclwifSxyLk1lc3NhZ2U9ZnVuY3Rpb24oKXt9LHIuRW51bT1mdW5jdGlvbigpe30sci5TZXJ2aWNlPWZ1bmN0aW9uKCl7fSxyfShyLHIuTGFuZyxyLlJlZmxlY3QpLHIuTWFwPWZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlKXt2YXIgdD0wO3JldHVybntuZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIHQ8ZS5sZW5ndGg/e2RvbmU6ITEsdmFsdWU6ZVt0KytdfTp7ZG9uZTohMH19fX12YXIgaT1mdW5jdGlvbihlLG4pe3ZhciBpLHIscyxvO2lmKCFlLm1hcCl0aHJvdyBFcnJvcihcImZpZWxkIGlzIG5vdCBhIG1hcFwiKTtpZih0aGlzLmZpZWxkPWUsdGhpcy5rZXlFbGVtPW5ldyB0LkVsZW1lbnQoZS5rZXlUeXBlLG51bGwsITAsZS5zeW50YXgpLHRoaXMudmFsdWVFbGVtPW5ldyB0LkVsZW1lbnQoZS50eXBlLGUucmVzb2x2ZWRUeXBlLCExLGUuc3ludGF4KSx0aGlzLm1hcD17fSxPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcInNpemVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIE9iamVjdC5rZXlzKHRoaXMubWFwKS5sZW5ndGh9fSksbilmb3IoaT1PYmplY3Qua2V5cyhuKSxyPTA7cjxpLmxlbmd0aDtyKyspcz10aGlzLmtleUVsZW0udmFsdWVGcm9tU3RyaW5nKGlbcl0pLG89dGhpcy52YWx1ZUVsZW0udmVyaWZ5VmFsdWUobltpW3JdXSksdGhpcy5tYXBbdGhpcy5rZXlFbGVtLnZhbHVlVG9TdHJpbmcocyldPXtrZXk6cyx2YWx1ZTpvfX0scj1pLnByb3RvdHlwZTtyZXR1cm4gci5jbGVhcj1mdW5jdGlvbigpe3RoaXMubWFwPXt9fSxyLmRlbGV0ZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmtleUVsZW0udmFsdWVUb1N0cmluZyh0aGlzLmtleUVsZW0udmVyaWZ5VmFsdWUoZSkpLG49dCBpbiB0aGlzLm1hcDtyZXR1cm4gZGVsZXRlIHRoaXMubWFwW3RdLG59LHIuZW50cmllcz1mdW5jdGlvbigpe3ZhciBlLHQsaT1bXSxyPU9iamVjdC5rZXlzKHRoaXMubWFwKTtmb3IodD0wO3Q8ci5sZW5ndGg7dCsrKWkucHVzaChbKGU9dGhpcy5tYXBbclt0XV0pLmtleSxlLnZhbHVlXSk7cmV0dXJuIG4oaSl9LHIua2V5cz1mdW5jdGlvbigpe3ZhciBlLHQ9W10saT1PYmplY3Qua2V5cyh0aGlzLm1hcCk7Zm9yKGU9MDtlPGkubGVuZ3RoO2UrKyl0LnB1c2godGhpcy5tYXBbaVtlXV0ua2V5KTtyZXR1cm4gbih0KX0sci52YWx1ZXM9ZnVuY3Rpb24oKXt2YXIgZSx0PVtdLGk9T2JqZWN0LmtleXModGhpcy5tYXApO2ZvcihlPTA7ZTxpLmxlbmd0aDtlKyspdC5wdXNoKHRoaXMubWFwW2lbZV1dLnZhbHVlKTtyZXR1cm4gbih0KX0sci5mb3JFYWNoPWZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyPU9iamVjdC5rZXlzKHRoaXMubWFwKTtmb3IoaT0wO2k8ci5sZW5ndGg7aSsrKWUuY2FsbCh0LChuPXRoaXMubWFwW3JbaV1dKS52YWx1ZSxuLmtleSx0aGlzKX0sci5zZXQ9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLmtleUVsZW0udmVyaWZ5VmFsdWUoZSksaT10aGlzLnZhbHVlRWxlbS52ZXJpZnlWYWx1ZSh0KTtyZXR1cm4gdGhpcy5tYXBbdGhpcy5rZXlFbGVtLnZhbHVlVG9TdHJpbmcobildPXtrZXk6bix2YWx1ZTppfSx0aGlzfSxyLmdldD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmtleUVsZW0udmFsdWVUb1N0cmluZyh0aGlzLmtleUVsZW0udmVyaWZ5VmFsdWUoZSkpO3JldHVybiB0IGluIHRoaXMubWFwP3RoaXMubWFwW3RdLnZhbHVlOnZvaWQgMH0sci5oYXM9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMua2V5RWxlbS52YWx1ZVRvU3RyaW5nKHRoaXMua2V5RWxlbS52ZXJpZnlWYWx1ZShlKSlpbiB0aGlzLm1hcH0saX0oMCxyLlJlZmxlY3QpLHIubG9hZFByb3RvPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4oXCJzdHJpbmdcIj09dHlwZW9mIHR8fHQmJlwic3RyaW5nXCI9PXR5cGVvZiB0LmZpbGUmJlwic3RyaW5nXCI9PXR5cGVvZiB0LnJvb3QpJiYobj10LHQ9dm9pZCAwKSxyLmxvYWRKc29uKHIuRG90UHJvdG8uUGFyc2VyLnBhcnNlKGUpLHQsbil9LHIucHJvdG9Gcm9tU3RyaW5nPXIubG9hZFByb3RvLHIubG9hZFByb3RvRmlsZT1mdW5jdGlvbihlLHQsbil7aWYodCYmXCJvYmplY3RcIj09dHlwZW9mIHQ/KG49dCx0PW51bGwpOnQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHR8fCh0PW51bGwpLHQpcmV0dXJuIHIuVXRpbC5mZXRjaChcInN0cmluZ1wiPT10eXBlb2YgZT9lOmUucm9vdCtcIi9cIitlLmZpbGUsKGZ1bmN0aW9uKGkpe2lmKG51bGwhPT1pKXRyeXt0KG51bGwsci5sb2FkUHJvdG8oaSxuLGUpKX1jYXRjaChlKXt0KGUpfWVsc2UgdChFcnJvcihcIkZhaWxlZCB0byBmZXRjaCBmaWxlXCIpKX0pKTt2YXIgaT1yLlV0aWwuZmV0Y2goXCJvYmplY3RcIj09dHlwZW9mIGU/ZS5yb290K1wiL1wiK2UuZmlsZTplKTtyZXR1cm4gbnVsbD09PWk/bnVsbDpyLmxvYWRQcm90byhpLG4sZSl9LHIucHJvdG9Gcm9tRmlsZT1yLmxvYWRQcm90b0ZpbGUsci5uZXdCdWlsZGVyPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT0oZT1lfHx7fSkuY29udmVydEZpZWxkc1RvQ2FtZWxDYXNlJiYoZS5jb252ZXJ0RmllbGRzVG9DYW1lbENhc2U9ci5jb252ZXJ0RmllbGRzVG9DYW1lbENhc2UpLHZvaWQgMD09PWUucG9wdWxhdGVBY2Nlc3NvcnMmJihlLnBvcHVsYXRlQWNjZXNzb3JzPXIucG9wdWxhdGVBY2Nlc3NvcnMpLG5ldyByLkJ1aWxkZXIoZSl9LHIubG9hZEpzb249ZnVuY3Rpb24oZSx0LG4pe3JldHVybihcInN0cmluZ1wiPT10eXBlb2YgdHx8dCYmXCJzdHJpbmdcIj09dHlwZW9mIHQuZmlsZSYmXCJzdHJpbmdcIj09dHlwZW9mIHQucm9vdCkmJihuPXQsdD1udWxsKSx0JiZcIm9iamVjdFwiPT10eXBlb2YgdHx8KHQ9ci5uZXdCdWlsZGVyKCkpLFwic3RyaW5nXCI9PXR5cGVvZiBlJiYoZT1KU09OLnBhcnNlKGUpKSx0LmltcG9ydChlLG4pLHQucmVzb2x2ZUFsbCgpLHR9LHIubG9hZEpzb25GaWxlPWZ1bmN0aW9uKGUsdCxuKXtpZih0JiZcIm9iamVjdFwiPT10eXBlb2YgdD8obj10LHQ9bnVsbCk6dCYmXCJmdW5jdGlvblwiPT10eXBlb2YgdHx8KHQ9bnVsbCksdClyZXR1cm4gci5VdGlsLmZldGNoKFwic3RyaW5nXCI9PXR5cGVvZiBlP2U6ZS5yb290K1wiL1wiK2UuZmlsZSwoZnVuY3Rpb24oaSl7aWYobnVsbCE9PWkpdHJ5e3QobnVsbCxyLmxvYWRKc29uKEpTT04ucGFyc2UoaSksbixlKSl9Y2F0Y2goZSl7dChlKX1lbHNlIHQoRXJyb3IoXCJGYWlsZWQgdG8gZmV0Y2ggZmlsZVwiKSl9KSk7dmFyIGk9ci5VdGlsLmZldGNoKFwib2JqZWN0XCI9PXR5cGVvZiBlP2Uucm9vdCtcIi9cIitlLmZpbGU6ZSk7cmV0dXJuIG51bGw9PT1pP251bGw6ci5sb2FkSnNvbihKU09OLnBhcnNlKGkpLG4sZSl9LGk9QWksci5sb2FkUHJvdG8oaSx2b2lkIDAsXCJcIikuYnVpbGQoXCJNb2R1bGVzXCIpLnByb2J1Zn0oZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlKXt2YXIgdD0wO3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0PGUubGVuZ3RoP2UuY2hhckNvZGVBdCh0KyspOm51bGx9fWZ1bmN0aW9uIG4oKXt2YXIgZT1bXSx0PVtdO3JldHVybiBmdW5jdGlvbigpe3JldHVybiAwPT09YXJndW1lbnRzLmxlbmd0aD90LmpvaW4oXCJcIikrYS5hcHBseShTdHJpbmcsZSk6KGUubGVuZ3RoK2FyZ3VtZW50cy5sZW5ndGg+MTAyNCYmKHQucHVzaChhLmFwcGx5KFN0cmluZyxlKSksZS5sZW5ndGg9MCksdm9pZCBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShlLGFyZ3VtZW50cykpfX1mdW5jdGlvbiBpKGUsdCxuLGkscil7dmFyIHMsbyxhPTgqci1pLTEsdT0oMTw8YSktMSxjPXU+PjEsaD0tNyxsPW4/ci0xOjAsZD1uPy0xOjEsZj1lW3QrbF07Zm9yKGwrPWQscz1mJigxPDwtaCktMSxmPj49LWgsaCs9YTtoPjA7cz0yNTYqcytlW3QrbF0sbCs9ZCxoLT04KTtmb3Iobz1zJigxPDwtaCktMSxzPj49LWgsaCs9aTtoPjA7bz0yNTYqbytlW3QrbF0sbCs9ZCxoLT04KTtpZigwPT09cylzPTEtYztlbHNle2lmKHM9PT11KXJldHVybiBvP05hTjoxLzAqKGY/LTE6MSk7bys9TWF0aC5wb3coMixpKSxzLT1jfXJldHVybihmPy0xOjEpKm8qTWF0aC5wb3coMixzLWkpfWZ1bmN0aW9uIHIoZSx0LG4saSxyLHMpe3ZhciBvLGEsdSxjPTgqcy1yLTEsaD0oMTw8YyktMSxsPWg+PjEsZD0yMz09PXI/TWF0aC5wb3coMiwtMjQpLU1hdGgucG93KDIsLTc3KTowLGY9aT8wOnMtMSxwPWk/MTotMSxnPXQ8MHx8MD09PXQmJjEvdDwwPzE6MDtmb3IodD1NYXRoLmFicyh0KSxpc05hTih0KXx8MS8wPT09dD8oYT1pc05hTih0KT8xOjAsbz1oKToobz1NYXRoLmZsb29yKE1hdGgubG9nKHQpL01hdGguTE4yKSx0Kih1PU1hdGgucG93KDIsLW8pKTwxJiYoby0tLHUqPTIpLCh0Kz1vK2w+PTE/ZC91OmQqTWF0aC5wb3coMiwxLWwpKSp1Pj0yJiYobysrLHUvPTIpLG8rbD49aD8oYT0wLG89aCk6bytsPj0xPyhhPSh0KnUtMSkqTWF0aC5wb3coMixyKSxvKz1sKTooYT10Kk1hdGgucG93KDIsbC0xKSpNYXRoLnBvdygyLHIpLG89MCkpO3I+PTg7ZVtuK2ZdPTI1NSZhLGYrPXAsYS89MjU2LHItPTgpO2ZvcihvPW88PHJ8YSxjKz1yO2M+MDtlW24rZl09MjU1Jm8sZis9cCxvLz0yNTYsYy09OCk7ZVtuK2YtcF18PTEyOCpnfXZhciBzLG8sYSx1LGMsaD1mdW5jdGlvbihlLHQsbil7aWYodm9pZCAwPT09ZSYmKGU9aC5ERUZBVUxUX0NBUEFDSVRZKSx2b2lkIDA9PT10JiYodD1oLkRFRkFVTFRfRU5ESUFOKSx2b2lkIDA9PT1uJiYobj1oLkRFRkFVTFRfTk9BU1NFUlQpLCFuKXtpZigoZXw9MCk8MCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBjYXBhY2l0eVwiKTt0PSEhdCxuPSEhbn10aGlzLmJ1ZmZlcj0wPT09ZT9vOm5ldyBBcnJheUJ1ZmZlcihlKSx0aGlzLnZpZXc9MD09PWU/bnVsbDpuZXcgVWludDhBcnJheSh0aGlzLmJ1ZmZlciksdGhpcy5vZmZzZXQ9MCx0aGlzLm1hcmtlZE9mZnNldD0tMSx0aGlzLmxpbWl0PWUsdGhpcy5saXR0bGVFbmRpYW49dCx0aGlzLm5vQXNzZXJ0PW59O3JldHVybiBoLlZFUlNJT049XCI1LjAuMVwiLGguTElUVExFX0VORElBTj0hMCxoLkJJR19FTkRJQU49ITEsaC5ERUZBVUxUX0NBUEFDSVRZPTE2LGguREVGQVVMVF9FTkRJQU49aC5CSUdfRU5ESUFOLGguREVGQVVMVF9OT0FTU0VSVD0hMSxoLkxvbmc9ZXx8bnVsbCwocz1oLnByb3RvdHlwZSkuX19pc0J5dGVCdWZmZXJfXyxPYmplY3QuZGVmaW5lUHJvcGVydHkocyxcIl9faXNCeXRlQnVmZmVyX19cIix7dmFsdWU6ITAsZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITF9KSxvPW5ldyBBcnJheUJ1ZmZlcigwKSxhPVN0cmluZy5mcm9tQ2hhckNvZGUsaC5hY2Nlc3Nvcj1mdW5jdGlvbigpe3JldHVybiBVaW50OEFycmF5fSxoLmFsbG9jYXRlPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gbmV3IGgoZSx0LG4pfSxoLmNvbmNhdD1mdW5jdGlvbihlLHQsbixpKXt2YXIgcixzLG8sYSx1LGM7Zm9yKChcImJvb2xlYW5cIj09dHlwZW9mIHR8fFwic3RyaW5nXCIhPXR5cGVvZiB0KSYmKGk9bixuPXQsdD12b2lkIDApLHI9MCxvPTAsYT1lLmxlbmd0aDthPm87KytvKWguaXNCeXRlQnVmZmVyKGVbb10pfHwoZVtvXT1oLndyYXAoZVtvXSx0KSksKHM9ZVtvXS5saW1pdC1lW29dLm9mZnNldCk+MCYmKHIrPXMpO2lmKDA9PT1yKXJldHVybiBuZXcgaCgwLG4saSk7Zm9yKGM9bmV3IGgocixuLGkpLG89MDthPm87KShzPSh1PWVbbysrXSkubGltaXQtdS5vZmZzZXQpPD0wfHwoYy52aWV3LnNldCh1LnZpZXcuc3ViYXJyYXkodS5vZmZzZXQsdS5saW1pdCksYy5vZmZzZXQpLGMub2Zmc2V0Kz1zKTtyZXR1cm4gYy5saW1pdD1jLm9mZnNldCxjLm9mZnNldD0wLGN9LGguaXNCeXRlQnVmZmVyPWZ1bmN0aW9uKGUpe3JldHVybiEwPT09KGUmJmUuX19pc0J5dGVCdWZmZXJfXyl9LGgudHlwZT1mdW5jdGlvbigpe3JldHVybiBBcnJheUJ1ZmZlcn0saC53cmFwPWZ1bmN0aW9uKGUsdCxuLGkpe3ZhciByLG87aWYoXCJzdHJpbmdcIiE9dHlwZW9mIHQmJihpPW4sbj10LHQ9dm9pZCAwKSxcInN0cmluZ1wiPT10eXBlb2YgZSlzd2l0Y2godm9pZCAwPT09dCYmKHQ9XCJ1dGY4XCIpLHQpe2Nhc2VcImJhc2U2NFwiOnJldHVybiBoLmZyb21CYXNlNjQoZSxuKTtjYXNlXCJoZXhcIjpyZXR1cm4gaC5mcm9tSGV4KGUsbik7Y2FzZVwiYmluYXJ5XCI6cmV0dXJuIGguZnJvbUJpbmFyeShlLG4pO2Nhc2VcInV0ZjhcIjpyZXR1cm4gaC5mcm9tVVRGOChlLG4pO2Nhc2VcImRlYnVnXCI6cmV0dXJuIGguZnJvbURlYnVnKGUsbik7ZGVmYXVsdDp0aHJvdyBFcnJvcihcIlVuc3VwcG9ydGVkIGVuY29kaW5nOiBcIit0KX1pZihudWxsPT09ZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUpdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBidWZmZXJcIik7aWYoaC5pc0J5dGVCdWZmZXIoZSkpcmV0dXJuKHI9cy5jbG9uZS5jYWxsKGUpKS5tYXJrZWRPZmZzZXQ9LTEscjtpZihlIGluc3RhbmNlb2YgVWludDhBcnJheSlyPW5ldyBoKDAsbixpKSxlLmxlbmd0aD4wJiYoci5idWZmZXI9ZS5idWZmZXIsci5vZmZzZXQ9ZS5ieXRlT2Zmc2V0LHIubGltaXQ9ZS5ieXRlT2Zmc2V0K2UuYnl0ZUxlbmd0aCxyLnZpZXc9bmV3IFVpbnQ4QXJyYXkoZS5idWZmZXIpKTtlbHNlIGlmKGUgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcilyPW5ldyBoKDAsbixpKSxlLmJ5dGVMZW5ndGg+MCYmKHIuYnVmZmVyPWUsci5vZmZzZXQ9MCxyLmxpbWl0PWUuYnl0ZUxlbmd0aCxyLnZpZXc9ZS5ieXRlTGVuZ3RoPjA/bmV3IFVpbnQ4QXJyYXkoZSk6bnVsbCk7ZWxzZXtpZihcIltvYmplY3QgQXJyYXldXCIhPT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSkpdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBidWZmZXJcIik7Zm9yKChyPW5ldyBoKGUubGVuZ3RoLG4saSkpLmxpbWl0PWUubGVuZ3RoLG89MDtvPGUubGVuZ3RoOysrbylyLnZpZXdbb109ZVtvXX1yZXR1cm4gcn0scy53cml0ZUJpdFNldD1mdW5jdGlvbihlLHQpe3ZhciBuLGkscixzLG8sYSx1PXZvaWQgMD09PXQ7aWYodSYmKHQ9dGhpcy5vZmZzZXQpLCF0aGlzLm5vQXNzZXJ0KXtpZighKGUgaW5zdGFuY2VvZiBBcnJheSkpdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBCaXRTZXQ6IE5vdCBhbiBhcnJheVwiKTtpZihcIm51bWJlclwiIT10eXBlb2YgdHx8dCUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiBcIit0K1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoKHQ+Pj49MCk8MHx8dCswPnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiAwIDw9IFwiK3QrXCIgKCswKSA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX1mb3IoaT10LHM9KHI9ZS5sZW5ndGgpPj4zLG89MCx0Kz10aGlzLndyaXRlVmFyaW50MzIocix0KTtzLS07KW49MSYhIWVbbysrXXwoMSYhIWVbbysrXSk8PDF8KDEmISFlW28rK10pPDwyfCgxJiEhZVtvKytdKTw8M3woMSYhIWVbbysrXSk8PDR8KDEmISFlW28rK10pPDw1fCgxJiEhZVtvKytdKTw8NnwoMSYhIWVbbysrXSk8PDcsdGhpcy53cml0ZUJ5dGUobix0KyspO2lmKHI+byl7Zm9yKGE9MCxuPTA7cj5vOylufD0oMSYhIWVbbysrXSk8PGErKzt0aGlzLndyaXRlQnl0ZShuLHQrKyl9cmV0dXJuIHU/KHRoaXMub2Zmc2V0PXQsdGhpcyk6dC1pfSxzLnJlYWRCaXRTZXQ9ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIscyxvLGEsdT12b2lkIDA9PT1lO2Zvcih1JiYoZT10aGlzLm9mZnNldCkscj0oaT0obj10aGlzLnJlYWRWYXJpbnQzMihlKSkudmFsdWUpPj4zLHM9MCxvPVtdLGUrPW4ubGVuZ3RoO3ItLTspdD10aGlzLnJlYWRCeXRlKGUrKyksb1tzKytdPSEhKDEmdCksb1tzKytdPSEhKDImdCksb1tzKytdPSEhKDQmdCksb1tzKytdPSEhKDgmdCksb1tzKytdPSEhKDE2JnQpLG9bcysrXT0hISgzMiZ0KSxvW3MrK109ISEoNjQmdCksb1tzKytdPSEhKDEyOCZ0KTtpZihpPnMpZm9yKGE9MCx0PXRoaXMucmVhZEJ5dGUoZSsrKTtpPnM7KW9bcysrXT0hISgxJnQ+PmErKyk7cmV0dXJuIHUmJih0aGlzLm9mZnNldD1lKSxvfSxzLnJlYWRCeXRlcz1mdW5jdGlvbihlLHQpe3ZhciBuLGk9dm9pZCAwPT09dDtpZihpJiYodD10aGlzLm9mZnNldCksIXRoaXMubm9Bc3NlcnQpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiB0fHx0JTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK3QrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigodD4+Pj0wKTwwfHx0K2U+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrdCtcIiAoK1wiK2UrXCIpIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXJldHVybiBuPXRoaXMuc2xpY2UodCx0K2UpLGkmJih0aGlzLm9mZnNldCs9ZSksbn0scy53cml0ZUJ5dGVzPXMuYXBwZW5kLHMud3JpdGVJbnQ4PWZ1bmN0aW9uKGUsdCl7dmFyIG4saT12b2lkIDA9PT10O2lmKGkmJih0PXRoaXMub2Zmc2V0KSwhdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIHZhbHVlOiBcIitlK1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoZXw9MCxcIm51bWJlclwiIT10eXBlb2YgdHx8dCUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiBcIit0K1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoKHQ+Pj49MCk8MHx8dCswPnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiAwIDw9IFwiK3QrXCIgKCswKSA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX1yZXR1cm4odCs9MSk+KG49dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCkmJnRoaXMucmVzaXplKChuKj0yKT50P246dCksdC09MSx0aGlzLnZpZXdbdF09ZSxpJiYodGhpcy5vZmZzZXQrPTEpLHRoaXN9LHMud3JpdGVCeXRlPXMud3JpdGVJbnQ4LHMucmVhZEludDg9ZnVuY3Rpb24oZSl7dmFyIHQsbj12b2lkIDA9PT1lO2lmKG4mJihlPXRoaXMub2Zmc2V0KSwhdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrZStcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKChlPj4+PTApPDB8fGUrMT50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIitlK1wiICgrMSkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9cmV0dXJuIDEyOD09KDEyOCYodD10aGlzLnZpZXdbZV0pKSYmKHQ9LSgyNTUtdCsxKSksbiYmKHRoaXMub2Zmc2V0Kz0xKSx0fSxzLnJlYWRCeXRlPXMucmVhZEludDgscy53cml0ZVVpbnQ4PWZ1bmN0aW9uKGUsdCl7dmFyIG4saT12b2lkIDA9PT10O2lmKGkmJih0PXRoaXMub2Zmc2V0KSwhdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIHZhbHVlOiBcIitlK1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoZT4+Pj0wLFwibnVtYmVyXCIhPXR5cGVvZiB0fHx0JTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK3QrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigodD4+Pj0wKTwwfHx0KzA+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrdCtcIiAoKzApIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXJldHVybih0Kz0xKT4obj10aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKSYmdGhpcy5yZXNpemUoKG4qPTIpPnQ/bjp0KSx0LT0xLHRoaXMudmlld1t0XT1lLGkmJih0aGlzLm9mZnNldCs9MSksdGhpc30scy53cml0ZVVJbnQ4PXMud3JpdGVVaW50OCxzLnJlYWRVaW50OD1mdW5jdGlvbihlKXt2YXIgdCxuPXZvaWQgMD09PWU7aWYobiYmKGU9dGhpcy5vZmZzZXQpLCF0aGlzLm5vQXNzZXJ0KXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZSUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiBcIitlK1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoKGU+Pj49MCk8MHx8ZSsxPnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiAwIDw9IFwiK2UrXCIgKCsxKSA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX1yZXR1cm4gdD10aGlzLnZpZXdbZV0sbiYmKHRoaXMub2Zmc2V0Kz0xKSx0fSxzLnJlYWRVSW50OD1zLnJlYWRVaW50OCxzLndyaXRlSW50MTY9ZnVuY3Rpb24oZSx0KXt2YXIgbixpPXZvaWQgMD09PXQ7aWYoaSYmKHQ9dGhpcy5vZmZzZXQpLCF0aGlzLm5vQXNzZXJ0KXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZSUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgdmFsdWU6IFwiK2UrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZihlfD0wLFwibnVtYmVyXCIhPXR5cGVvZiB0fHx0JTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK3QrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigodD4+Pj0wKTwwfHx0KzA+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrdCtcIiAoKzApIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXJldHVybih0Kz0yKT4obj10aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKSYmdGhpcy5yZXNpemUoKG4qPTIpPnQ/bjp0KSx0LT0yLHRoaXMubGl0dGxlRW5kaWFuPyh0aGlzLnZpZXdbdCsxXT0oNjUyODAmZSk+Pj44LHRoaXMudmlld1t0XT0yNTUmZSk6KHRoaXMudmlld1t0XT0oNjUyODAmZSk+Pj44LHRoaXMudmlld1t0KzFdPTI1NSZlKSxpJiYodGhpcy5vZmZzZXQrPTIpLHRoaXN9LHMud3JpdGVTaG9ydD1zLndyaXRlSW50MTYscy5yZWFkSW50MTY9ZnVuY3Rpb24oZSl7dmFyIHQsbj12b2lkIDA9PT1lO2lmKG4mJihlPXRoaXMub2Zmc2V0KSwhdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrZStcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKChlPj4+PTApPDB8fGUrMj50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIitlK1wiICgrMikgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9cmV0dXJuIHQ9MCx0aGlzLmxpdHRsZUVuZGlhbj8odD10aGlzLnZpZXdbZV0sdHw9dGhpcy52aWV3W2UrMV08PDgpOih0PXRoaXMudmlld1tlXTw8OCx0fD10aGlzLnZpZXdbZSsxXSksMzI3Njg9PSgzMjc2OCZ0KSYmKHQ9LSg2NTUzNS10KzEpKSxuJiYodGhpcy5vZmZzZXQrPTIpLHR9LHMucmVhZFNob3J0PXMucmVhZEludDE2LHMud3JpdGVVaW50MTY9ZnVuY3Rpb24oZSx0KXt2YXIgbixpPXZvaWQgMD09PXQ7aWYoaSYmKHQ9dGhpcy5vZmZzZXQpLCF0aGlzLm5vQXNzZXJ0KXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZSUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgdmFsdWU6IFwiK2UrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZihlPj4+PTAsXCJudW1iZXJcIiE9dHlwZW9mIHR8fHQlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrdCtcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKCh0Pj4+PTApPDB8fHQrMD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIit0K1wiICgrMCkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9cmV0dXJuKHQrPTIpPihuPXRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpJiZ0aGlzLnJlc2l6ZSgobio9Mik+dD9uOnQpLHQtPTIsdGhpcy5saXR0bGVFbmRpYW4/KHRoaXMudmlld1t0KzFdPSg2NTI4MCZlKT4+PjgsdGhpcy52aWV3W3RdPTI1NSZlKToodGhpcy52aWV3W3RdPSg2NTI4MCZlKT4+PjgsdGhpcy52aWV3W3QrMV09MjU1JmUpLGkmJih0aGlzLm9mZnNldCs9MiksdGhpc30scy53cml0ZVVJbnQxNj1zLndyaXRlVWludDE2LHMucmVhZFVpbnQxNj1mdW5jdGlvbihlKXt2YXIgdCxuPXZvaWQgMD09PWU7aWYobiYmKGU9dGhpcy5vZmZzZXQpLCF0aGlzLm5vQXNzZXJ0KXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZSUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiBcIitlK1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoKGU+Pj49MCk8MHx8ZSsyPnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiAwIDw9IFwiK2UrXCIgKCsyKSA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX1yZXR1cm4gdD0wLHRoaXMubGl0dGxlRW5kaWFuPyh0PXRoaXMudmlld1tlXSx0fD10aGlzLnZpZXdbZSsxXTw8OCk6KHQ9dGhpcy52aWV3W2VdPDw4LHR8PXRoaXMudmlld1tlKzFdKSxuJiYodGhpcy5vZmZzZXQrPTIpLHR9LHMucmVhZFVJbnQxNj1zLnJlYWRVaW50MTYscy53cml0ZUludDMyPWZ1bmN0aW9uKGUsdCl7dmFyIG4saT12b2lkIDA9PT10O2lmKGkmJih0PXRoaXMub2Zmc2V0KSwhdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIHZhbHVlOiBcIitlK1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoZXw9MCxcIm51bWJlclwiIT10eXBlb2YgdHx8dCUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiBcIit0K1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoKHQ+Pj49MCk8MHx8dCswPnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiAwIDw9IFwiK3QrXCIgKCswKSA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX1yZXR1cm4odCs9NCk+KG49dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCkmJnRoaXMucmVzaXplKChuKj0yKT50P246dCksdC09NCx0aGlzLmxpdHRsZUVuZGlhbj8odGhpcy52aWV3W3QrM109MjU1JmU+Pj4yNCx0aGlzLnZpZXdbdCsyXT0yNTUmZT4+PjE2LHRoaXMudmlld1t0KzFdPTI1NSZlPj4+OCx0aGlzLnZpZXdbdF09MjU1JmUpOih0aGlzLnZpZXdbdF09MjU1JmU+Pj4yNCx0aGlzLnZpZXdbdCsxXT0yNTUmZT4+PjE2LHRoaXMudmlld1t0KzJdPTI1NSZlPj4+OCx0aGlzLnZpZXdbdCszXT0yNTUmZSksaSYmKHRoaXMub2Zmc2V0Kz00KSx0aGlzfSxzLndyaXRlSW50PXMud3JpdGVJbnQzMixzLnJlYWRJbnQzMj1mdW5jdGlvbihlKXt2YXIgdCxuPXZvaWQgMD09PWU7aWYobiYmKGU9dGhpcy5vZmZzZXQpLCF0aGlzLm5vQXNzZXJ0KXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZSUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiBcIitlK1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoKGU+Pj49MCk8MHx8ZSs0PnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiAwIDw9IFwiK2UrXCIgKCs0KSA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX1yZXR1cm4gdD0wLHRoaXMubGl0dGxlRW5kaWFuPyh0PXRoaXMudmlld1tlKzJdPDwxNix0fD10aGlzLnZpZXdbZSsxXTw8OCx0fD10aGlzLnZpZXdbZV0sdCs9dGhpcy52aWV3W2UrM108PDI0Pj4+MCk6KHQ9dGhpcy52aWV3W2UrMV08PDE2LHR8PXRoaXMudmlld1tlKzJdPDw4LHR8PXRoaXMudmlld1tlKzNdLHQrPXRoaXMudmlld1tlXTw8MjQ+Pj4wKSx0fD0wLG4mJih0aGlzLm9mZnNldCs9NCksdH0scy5yZWFkSW50PXMucmVhZEludDMyLHMud3JpdGVVaW50MzI9ZnVuY3Rpb24oZSx0KXt2YXIgbixpPXZvaWQgMD09PXQ7aWYoaSYmKHQ9dGhpcy5vZmZzZXQpLCF0aGlzLm5vQXNzZXJ0KXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZSUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgdmFsdWU6IFwiK2UrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZihlPj4+PTAsXCJudW1iZXJcIiE9dHlwZW9mIHR8fHQlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrdCtcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKCh0Pj4+PTApPDB8fHQrMD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIit0K1wiICgrMCkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9cmV0dXJuKHQrPTQpPihuPXRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpJiZ0aGlzLnJlc2l6ZSgobio9Mik+dD9uOnQpLHQtPTQsdGhpcy5saXR0bGVFbmRpYW4/KHRoaXMudmlld1t0KzNdPTI1NSZlPj4+MjQsdGhpcy52aWV3W3QrMl09MjU1JmU+Pj4xNix0aGlzLnZpZXdbdCsxXT0yNTUmZT4+PjgsdGhpcy52aWV3W3RdPTI1NSZlKToodGhpcy52aWV3W3RdPTI1NSZlPj4+MjQsdGhpcy52aWV3W3QrMV09MjU1JmU+Pj4xNix0aGlzLnZpZXdbdCsyXT0yNTUmZT4+PjgsdGhpcy52aWV3W3QrM109MjU1JmUpLGkmJih0aGlzLm9mZnNldCs9NCksdGhpc30scy53cml0ZVVJbnQzMj1zLndyaXRlVWludDMyLHMucmVhZFVpbnQzMj1mdW5jdGlvbihlKXt2YXIgdCxuPXZvaWQgMD09PWU7aWYobiYmKGU9dGhpcy5vZmZzZXQpLCF0aGlzLm5vQXNzZXJ0KXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZSUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiBcIitlK1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoKGU+Pj49MCk8MHx8ZSs0PnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiAwIDw9IFwiK2UrXCIgKCs0KSA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX1yZXR1cm4gdD0wLHRoaXMubGl0dGxlRW5kaWFuPyh0PXRoaXMudmlld1tlKzJdPDwxNix0fD10aGlzLnZpZXdbZSsxXTw8OCx0fD10aGlzLnZpZXdbZV0sdCs9dGhpcy52aWV3W2UrM108PDI0Pj4+MCk6KHQ9dGhpcy52aWV3W2UrMV08PDE2LHR8PXRoaXMudmlld1tlKzJdPDw4LHR8PXRoaXMudmlld1tlKzNdLHQrPXRoaXMudmlld1tlXTw8MjQ+Pj4wKSxuJiYodGhpcy5vZmZzZXQrPTQpLHR9LHMucmVhZFVJbnQzMj1zLnJlYWRVaW50MzIsZSYmKHMud3JpdGVJbnQ2ND1mdW5jdGlvbih0LG4pe3ZhciBpLHIscyxvPXZvaWQgMD09PW47aWYobyYmKG49dGhpcy5vZmZzZXQpLCF0aGlzLm5vQXNzZXJ0KXtpZihcIm51bWJlclwiPT10eXBlb2YgdCl0PWUuZnJvbU51bWJlcih0KTtlbHNlIGlmKFwic3RyaW5nXCI9PXR5cGVvZiB0KXQ9ZS5mcm9tU3RyaW5nKHQpO2Vsc2UgaWYoISh0JiZ0IGluc3RhbmNlb2YgZSkpdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCB2YWx1ZTogXCIrdCtcIiAobm90IGFuIGludGVnZXIgb3IgTG9uZylcIik7aWYoXCJudW1iZXJcIiE9dHlwZW9mIG58fG4lMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrbitcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKChuPj4+PTApPDB8fG4rMD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIituK1wiICgrMCkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIHQ/dD1lLmZyb21OdW1iZXIodCk6XCJzdHJpbmdcIj09dHlwZW9mIHQmJih0PWUuZnJvbVN0cmluZyh0KSksKG4rPTgpPihpPXRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpJiZ0aGlzLnJlc2l6ZSgoaSo9Mik+bj9pOm4pLG4tPTgscj10LmxvdyxzPXQuaGlnaCx0aGlzLmxpdHRsZUVuZGlhbj8odGhpcy52aWV3W24rM109MjU1JnI+Pj4yNCx0aGlzLnZpZXdbbisyXT0yNTUmcj4+PjE2LHRoaXMudmlld1tuKzFdPTI1NSZyPj4+OCx0aGlzLnZpZXdbbl09MjU1JnIsbis9NCx0aGlzLnZpZXdbbiszXT0yNTUmcz4+PjI0LHRoaXMudmlld1tuKzJdPTI1NSZzPj4+MTYsdGhpcy52aWV3W24rMV09MjU1JnM+Pj44LHRoaXMudmlld1tuXT0yNTUmcyk6KHRoaXMudmlld1tuXT0yNTUmcz4+PjI0LHRoaXMudmlld1tuKzFdPTI1NSZzPj4+MTYsdGhpcy52aWV3W24rMl09MjU1JnM+Pj44LHRoaXMudmlld1tuKzNdPTI1NSZzLG4rPTQsdGhpcy52aWV3W25dPTI1NSZyPj4+MjQsdGhpcy52aWV3W24rMV09MjU1JnI+Pj4xNix0aGlzLnZpZXdbbisyXT0yNTUmcj4+PjgsdGhpcy52aWV3W24rM109MjU1JnIpLG8mJih0aGlzLm9mZnNldCs9OCksdGhpc30scy53cml0ZUxvbmc9cy53cml0ZUludDY0LHMucmVhZEludDY0PWZ1bmN0aW9uKHQpe3ZhciBuLGkscixzPXZvaWQgMD09PXQ7aWYocyYmKHQ9dGhpcy5vZmZzZXQpLCF0aGlzLm5vQXNzZXJ0KXtpZihcIm51bWJlclwiIT10eXBlb2YgdHx8dCUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiBcIit0K1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoKHQ+Pj49MCk8MHx8dCs4PnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiAwIDw9IFwiK3QrXCIgKCs4KSA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX1yZXR1cm4gbj0wLGk9MCx0aGlzLmxpdHRsZUVuZGlhbj8obj10aGlzLnZpZXdbdCsyXTw8MTYsbnw9dGhpcy52aWV3W3QrMV08PDgsbnw9dGhpcy52aWV3W3RdLG4rPXRoaXMudmlld1t0KzNdPDwyND4+PjAsdCs9NCxpPXRoaXMudmlld1t0KzJdPDwxNixpfD10aGlzLnZpZXdbdCsxXTw8OCxpfD10aGlzLnZpZXdbdF0saSs9dGhpcy52aWV3W3QrM108PDI0Pj4+MCk6KGk9dGhpcy52aWV3W3QrMV08PDE2LGl8PXRoaXMudmlld1t0KzJdPDw4LGl8PXRoaXMudmlld1t0KzNdLGkrPXRoaXMudmlld1t0XTw8MjQ+Pj4wLHQrPTQsbj10aGlzLnZpZXdbdCsxXTw8MTYsbnw9dGhpcy52aWV3W3QrMl08PDgsbnw9dGhpcy52aWV3W3QrM10sbis9dGhpcy52aWV3W3RdPDwyND4+PjApLHI9bmV3IGUobixpLCExKSxzJiYodGhpcy5vZmZzZXQrPTgpLHJ9LHMucmVhZExvbmc9cy5yZWFkSW50NjQscy53cml0ZVVpbnQ2ND1mdW5jdGlvbih0LG4pe3ZhciBpLHIscyxvPXZvaWQgMD09PW47aWYobyYmKG49dGhpcy5vZmZzZXQpLCF0aGlzLm5vQXNzZXJ0KXtpZihcIm51bWJlclwiPT10eXBlb2YgdCl0PWUuZnJvbU51bWJlcih0KTtlbHNlIGlmKFwic3RyaW5nXCI9PXR5cGVvZiB0KXQ9ZS5mcm9tU3RyaW5nKHQpO2Vsc2UgaWYoISh0JiZ0IGluc3RhbmNlb2YgZSkpdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCB2YWx1ZTogXCIrdCtcIiAobm90IGFuIGludGVnZXIgb3IgTG9uZylcIik7aWYoXCJudW1iZXJcIiE9dHlwZW9mIG58fG4lMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrbitcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKChuPj4+PTApPDB8fG4rMD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIituK1wiICgrMCkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIHQ/dD1lLmZyb21OdW1iZXIodCk6XCJzdHJpbmdcIj09dHlwZW9mIHQmJih0PWUuZnJvbVN0cmluZyh0KSksKG4rPTgpPihpPXRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpJiZ0aGlzLnJlc2l6ZSgoaSo9Mik+bj9pOm4pLG4tPTgscj10LmxvdyxzPXQuaGlnaCx0aGlzLmxpdHRsZUVuZGlhbj8odGhpcy52aWV3W24rM109MjU1JnI+Pj4yNCx0aGlzLnZpZXdbbisyXT0yNTUmcj4+PjE2LHRoaXMudmlld1tuKzFdPTI1NSZyPj4+OCx0aGlzLnZpZXdbbl09MjU1JnIsbis9NCx0aGlzLnZpZXdbbiszXT0yNTUmcz4+PjI0LHRoaXMudmlld1tuKzJdPTI1NSZzPj4+MTYsdGhpcy52aWV3W24rMV09MjU1JnM+Pj44LHRoaXMudmlld1tuXT0yNTUmcyk6KHRoaXMudmlld1tuXT0yNTUmcz4+PjI0LHRoaXMudmlld1tuKzFdPTI1NSZzPj4+MTYsdGhpcy52aWV3W24rMl09MjU1JnM+Pj44LHRoaXMudmlld1tuKzNdPTI1NSZzLG4rPTQsdGhpcy52aWV3W25dPTI1NSZyPj4+MjQsdGhpcy52aWV3W24rMV09MjU1JnI+Pj4xNix0aGlzLnZpZXdbbisyXT0yNTUmcj4+PjgsdGhpcy52aWV3W24rM109MjU1JnIpLG8mJih0aGlzLm9mZnNldCs9OCksdGhpc30scy53cml0ZVVJbnQ2ND1zLndyaXRlVWludDY0LHMucmVhZFVpbnQ2ND1mdW5jdGlvbih0KXt2YXIgbixpLHIscz12b2lkIDA9PT10O2lmKHMmJih0PXRoaXMub2Zmc2V0KSwhdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIHR8fHQlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrdCtcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKCh0Pj4+PTApPDB8fHQrOD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIit0K1wiICgrOCkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9cmV0dXJuIG49MCxpPTAsdGhpcy5saXR0bGVFbmRpYW4/KG49dGhpcy52aWV3W3QrMl08PDE2LG58PXRoaXMudmlld1t0KzFdPDw4LG58PXRoaXMudmlld1t0XSxuKz10aGlzLnZpZXdbdCszXTw8MjQ+Pj4wLHQrPTQsaT10aGlzLnZpZXdbdCsyXTw8MTYsaXw9dGhpcy52aWV3W3QrMV08PDgsaXw9dGhpcy52aWV3W3RdLGkrPXRoaXMudmlld1t0KzNdPDwyND4+PjApOihpPXRoaXMudmlld1t0KzFdPDwxNixpfD10aGlzLnZpZXdbdCsyXTw8OCxpfD10aGlzLnZpZXdbdCszXSxpKz10aGlzLnZpZXdbdF08PDI0Pj4+MCx0Kz00LG49dGhpcy52aWV3W3QrMV08PDE2LG58PXRoaXMudmlld1t0KzJdPDw4LG58PXRoaXMudmlld1t0KzNdLG4rPXRoaXMudmlld1t0XTw8MjQ+Pj4wKSxyPW5ldyBlKG4saSwhMCkscyYmKHRoaXMub2Zmc2V0Kz04KSxyfSxzLnJlYWRVSW50NjQ9cy5yZWFkVWludDY0KSxzLndyaXRlRmxvYXQzMj1mdW5jdGlvbihlLHQpe3ZhciBuLGk9dm9pZCAwPT09dDtpZihpJiYodD10aGlzLm9mZnNldCksIXRoaXMubm9Bc3NlcnQpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgdmFsdWU6IFwiK2UrXCIgKG5vdCBhIG51bWJlcilcIik7aWYoXCJudW1iZXJcIiE9dHlwZW9mIHR8fHQlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrdCtcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKCh0Pj4+PTApPDB8fHQrMD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIit0K1wiICgrMCkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9cmV0dXJuKHQrPTQpPihuPXRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpJiZ0aGlzLnJlc2l6ZSgobio9Mik+dD9uOnQpLHQtPTQscih0aGlzLnZpZXcsZSx0LHRoaXMubGl0dGxlRW5kaWFuLDIzLDQpLGkmJih0aGlzLm9mZnNldCs9NCksdGhpc30scy53cml0ZUZsb2F0PXMud3JpdGVGbG9hdDMyLHMucmVhZEZsb2F0MzI9ZnVuY3Rpb24oZSl7dmFyIHQsbj12b2lkIDA9PT1lO2lmKG4mJihlPXRoaXMub2Zmc2V0KSwhdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrZStcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKChlPj4+PTApPDB8fGUrND50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIitlK1wiICgrNCkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9cmV0dXJuIHQ9aSh0aGlzLnZpZXcsZSx0aGlzLmxpdHRsZUVuZGlhbiwyMyw0KSxuJiYodGhpcy5vZmZzZXQrPTQpLHR9LHMucmVhZEZsb2F0PXMucmVhZEZsb2F0MzIscy53cml0ZUZsb2F0NjQ9ZnVuY3Rpb24oZSx0KXt2YXIgbixpPXZvaWQgMD09PXQ7aWYoaSYmKHQ9dGhpcy5vZmZzZXQpLCF0aGlzLm5vQXNzZXJ0KXtpZihcIm51bWJlclwiIT10eXBlb2YgZSl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIHZhbHVlOiBcIitlK1wiIChub3QgYSBudW1iZXIpXCIpO2lmKFwibnVtYmVyXCIhPXR5cGVvZiB0fHx0JTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK3QrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigodD4+Pj0wKTwwfHx0KzA+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrdCtcIiAoKzApIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXJldHVybih0Kz04KT4obj10aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKSYmdGhpcy5yZXNpemUoKG4qPTIpPnQ/bjp0KSx0LT04LHIodGhpcy52aWV3LGUsdCx0aGlzLmxpdHRsZUVuZGlhbiw1Miw4KSxpJiYodGhpcy5vZmZzZXQrPTgpLHRoaXN9LHMud3JpdGVEb3VibGU9cy53cml0ZUZsb2F0NjQscy5yZWFkRmxvYXQ2ND1mdW5jdGlvbihlKXt2YXIgdCxuPXZvaWQgMD09PWU7aWYobiYmKGU9dGhpcy5vZmZzZXQpLCF0aGlzLm5vQXNzZXJ0KXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZSUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiBcIitlK1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoKGU+Pj49MCk8MHx8ZSs4PnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiAwIDw9IFwiK2UrXCIgKCs4KSA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX1yZXR1cm4gdD1pKHRoaXMudmlldyxlLHRoaXMubGl0dGxlRW5kaWFuLDUyLDgpLG4mJih0aGlzLm9mZnNldCs9OCksdH0scy5yZWFkRG91YmxlPXMucmVhZEZsb2F0NjQsaC5NQVhfVkFSSU5UMzJfQllURVM9NSxoLmNhbGN1bGF0ZVZhcmludDMyPWZ1bmN0aW9uKGUpe3JldHVybihlPj4+PTApPDEyOD8xOmU8MTYzODQ/MjoxPDwyMT5lPzM6MTw8Mjg+ZT80OjV9LGguemlnWmFnRW5jb2RlMzI9ZnVuY3Rpb24oZSl7cmV0dXJuKChlfD0wKTw8MV5lPj4zMSk+Pj4wfSxoLnppZ1phZ0RlY29kZTMyPWZ1bmN0aW9uKGUpe3JldHVybiAwfGU+Pj4xXi0oMSZlKX0scy53cml0ZVZhcmludDMyPWZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLHM9dm9pZCAwPT09dDtpZihzJiYodD10aGlzLm9mZnNldCksIXRoaXMubm9Bc3NlcnQpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlfHxlJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCB2YWx1ZTogXCIrZStcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKGV8PTAsXCJudW1iZXJcIiE9dHlwZW9mIHR8fHQlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrdCtcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKCh0Pj4+PTApPDB8fHQrMD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIit0K1wiICgrMCkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9Zm9yKCh0Kz1pPWguY2FsY3VsYXRlVmFyaW50MzIoZSkpPihyPXRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpJiZ0aGlzLnJlc2l6ZSgocio9Mik+dD9yOnQpLHQtPWksZT4+Pj0wO2U+PTEyODspbj0xMjh8MTI3JmUsdGhpcy52aWV3W3QrK109bixlPj4+PTc7cmV0dXJuIHRoaXMudmlld1t0KytdPWUscz8odGhpcy5vZmZzZXQ9dCx0aGlzKTppfSxzLndyaXRlVmFyaW50MzJaaWdaYWc9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy53cml0ZVZhcmludDMyKGguemlnWmFnRW5jb2RlMzIoZSksdCl9LHMucmVhZFZhcmludDMyPWZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyLHM9dm9pZCAwPT09ZTtpZihzJiYoZT10aGlzLm9mZnNldCksIXRoaXMubm9Bc3NlcnQpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlfHxlJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK2UrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigoZT4+Pj0wKTwwfHxlKzE+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrZStcIiAoKzEpIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfW49MCxpPTA7ZG97aWYoIXRoaXMubm9Bc3NlcnQmJmU+dGhpcy5saW1pdCl0aHJvdyhyPUVycm9yKFwiVHJ1bmNhdGVkXCIpKS50cnVuY2F0ZWQ9ITAscjt0PXRoaXMudmlld1tlKytdLG48NSYmKGl8PSgxMjcmdCk8PDcqbiksKytufXdoaWxlKDAhPSgxMjgmdCkpO3JldHVybiBpfD0wLHM/KHRoaXMub2Zmc2V0PWUsaSk6e3ZhbHVlOmksbGVuZ3RoOm59fSxzLnJlYWRWYXJpbnQzMlppZ1phZz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLnJlYWRWYXJpbnQzMihlKTtyZXR1cm5cIm9iamVjdFwiPT10eXBlb2YgdD90LnZhbHVlPWguemlnWmFnRGVjb2RlMzIodC52YWx1ZSk6dD1oLnppZ1phZ0RlY29kZTMyKHQpLHR9LGUmJihoLk1BWF9WQVJJTlQ2NF9CWVRFUz0xMCxoLmNhbGN1bGF0ZVZhcmludDY0PWZ1bmN0aW9uKHQpe1wibnVtYmVyXCI9PXR5cGVvZiB0P3Q9ZS5mcm9tTnVtYmVyKHQpOlwic3RyaW5nXCI9PXR5cGVvZiB0JiYodD1lLmZyb21TdHJpbmcodCkpO3ZhciBuPXQudG9JbnQoKT4+PjAsaT10LnNoaWZ0UmlnaHRVbnNpZ25lZCgyOCkudG9JbnQoKT4+PjAscj10LnNoaWZ0UmlnaHRVbnNpZ25lZCg1NikudG9JbnQoKT4+PjA7cmV0dXJuIDA9PXI/MD09aT9uPDE2Mzg0P248MTI4PzE6MjoxPDwyMT5uPzM6NDppPDE2Mzg0P2k8MTI4PzU6NjoxPDwyMT5pPzc6ODpyPDEyOD85OjEwfSxoLnppZ1phZ0VuY29kZTY0PWZ1bmN0aW9uKHQpe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiB0P3Q9ZS5mcm9tTnVtYmVyKHQsITEpOlwic3RyaW5nXCI9PXR5cGVvZiB0P3Q9ZS5mcm9tU3RyaW5nKHQsITEpOiExIT09dC51bnNpZ25lZCYmKHQ9dC50b1NpZ25lZCgpKSx0LnNoaWZ0TGVmdCgxKS54b3IodC5zaGlmdFJpZ2h0KDYzKSkudG9VbnNpZ25lZCgpfSxoLnppZ1phZ0RlY29kZTY0PWZ1bmN0aW9uKHQpe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiB0P3Q9ZS5mcm9tTnVtYmVyKHQsITEpOlwic3RyaW5nXCI9PXR5cGVvZiB0P3Q9ZS5mcm9tU3RyaW5nKHQsITEpOiExIT09dC51bnNpZ25lZCYmKHQ9dC50b1NpZ25lZCgpKSx0LnNoaWZ0UmlnaHRVbnNpZ25lZCgxKS54b3IodC5hbmQoZS5PTkUpLnRvU2lnbmVkKCkubmVnYXRlKCkpLnRvU2lnbmVkKCl9LHMud3JpdGVWYXJpbnQ2ND1mdW5jdGlvbih0LG4pe3ZhciBpLHIscyxvLGEsdT12b2lkIDA9PT1uO2lmKHUmJihuPXRoaXMub2Zmc2V0KSwhdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIj09dHlwZW9mIHQpdD1lLmZyb21OdW1iZXIodCk7ZWxzZSBpZihcInN0cmluZ1wiPT10eXBlb2YgdCl0PWUuZnJvbVN0cmluZyh0KTtlbHNlIGlmKCEodCYmdCBpbnN0YW5jZW9mIGUpKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgdmFsdWU6IFwiK3QrXCIgKG5vdCBhbiBpbnRlZ2VyIG9yIExvbmcpXCIpO2lmKFwibnVtYmVyXCIhPXR5cGVvZiBufHxuJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK24rXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigobj4+Pj0wKTwwfHxuKzA+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrbitcIiAoKzApIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXN3aXRjaChcIm51bWJlclwiPT10eXBlb2YgdD90PWUuZnJvbU51bWJlcih0LCExKTpcInN0cmluZ1wiPT10eXBlb2YgdD90PWUuZnJvbVN0cmluZyh0LCExKTohMSE9PXQudW5zaWduZWQmJih0PXQudG9TaWduZWQoKSksaT1oLmNhbGN1bGF0ZVZhcmludDY0KHQpLHI9dC50b0ludCgpPj4+MCxzPXQuc2hpZnRSaWdodFVuc2lnbmVkKDI4KS50b0ludCgpPj4+MCxvPXQuc2hpZnRSaWdodFVuc2lnbmVkKDU2KS50b0ludCgpPj4+MCwobis9aSk+KGE9dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCkmJnRoaXMucmVzaXplKChhKj0yKT5uP2E6biksbi09aSxpKXtjYXNlIDEwOnRoaXMudmlld1tuKzldPTEmbz4+Pjc7Y2FzZSA5OnRoaXMudmlld1tuKzhdPTkhPT1pPzEyOHxvOjEyNyZvO2Nhc2UgODp0aGlzLnZpZXdbbis3XT04IT09aT8xMjh8cz4+PjIxOjEyNyZzPj4+MjE7Y2FzZSA3OnRoaXMudmlld1tuKzZdPTchPT1pPzEyOHxzPj4+MTQ6MTI3JnM+Pj4xNDtjYXNlIDY6dGhpcy52aWV3W24rNV09NiE9PWk/MTI4fHM+Pj43OjEyNyZzPj4+NztjYXNlIDU6dGhpcy52aWV3W24rNF09NSE9PWk/MTI4fHM6MTI3JnM7Y2FzZSA0OnRoaXMudmlld1tuKzNdPTQhPT1pPzEyOHxyPj4+MjE6MTI3JnI+Pj4yMTtjYXNlIDM6dGhpcy52aWV3W24rMl09MyE9PWk/MTI4fHI+Pj4xNDoxMjcmcj4+PjE0O2Nhc2UgMjp0aGlzLnZpZXdbbisxXT0yIT09aT8xMjh8cj4+Pjc6MTI3JnI+Pj43O2Nhc2UgMTp0aGlzLnZpZXdbbl09MSE9PWk/MTI4fHI6MTI3JnJ9cmV0dXJuIHU/KHRoaXMub2Zmc2V0Kz1pLHRoaXMpOml9LHMud3JpdGVWYXJpbnQ2NFppZ1phZz1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLndyaXRlVmFyaW50NjQoaC56aWdaYWdFbmNvZGU2NChlKSx0KX0scy5yZWFkVmFyaW50NjQ9ZnVuY3Rpb24odCl7dmFyIG4saSxyLHMsbyxhLHU9dm9pZCAwPT09dDtpZih1JiYodD10aGlzLm9mZnNldCksIXRoaXMubm9Bc3NlcnQpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiB0fHx0JTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK3QrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigodD4+Pj0wKTwwfHx0KzE+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrdCtcIiAoKzEpIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfWlmKG49dCxpPTAscj0wLHM9MCxvPTAsaT0xMjcmKG89dGhpcy52aWV3W3QrK10pLDEyOCZvJiYoaXw9KDEyNyYobz10aGlzLnZpZXdbdCsrXSkpPDw3LCgxMjgmb3x8dGhpcy5ub0Fzc2VydCYmdm9pZCAwPT09bykmJihpfD0oMTI3JihvPXRoaXMudmlld1t0KytdKSk8PDE0LCgxMjgmb3x8dGhpcy5ub0Fzc2VydCYmdm9pZCAwPT09bykmJihpfD0oMTI3JihvPXRoaXMudmlld1t0KytdKSk8PDIxLCgxMjgmb3x8dGhpcy5ub0Fzc2VydCYmdm9pZCAwPT09bykmJihyPTEyNyYobz10aGlzLnZpZXdbdCsrXSksKDEyOCZvfHx0aGlzLm5vQXNzZXJ0JiZ2b2lkIDA9PT1vKSYmKHJ8PSgxMjcmKG89dGhpcy52aWV3W3QrK10pKTw8NywoMTI4Jm98fHRoaXMubm9Bc3NlcnQmJnZvaWQgMD09PW8pJiYocnw9KDEyNyYobz10aGlzLnZpZXdbdCsrXSkpPDwxNCwoMTI4Jm98fHRoaXMubm9Bc3NlcnQmJnZvaWQgMD09PW8pJiYocnw9KDEyNyYobz10aGlzLnZpZXdbdCsrXSkpPDwyMSwoMTI4Jm98fHRoaXMubm9Bc3NlcnQmJnZvaWQgMD09PW8pJiYocz0xMjcmKG89dGhpcy52aWV3W3QrK10pLCgxMjgmb3x8dGhpcy5ub0Fzc2VydCYmdm9pZCAwPT09bykmJihzfD0oMTI3JihvPXRoaXMudmlld1t0KytdKSk8PDcsMTI4Jm98fHRoaXMubm9Bc3NlcnQmJnZvaWQgMD09PW8pKSkpKSkpKSkpdGhyb3cgRXJyb3IoXCJCdWZmZXIgb3ZlcnJ1blwiKTtyZXR1cm4gYT1lLmZyb21CaXRzKGl8cjw8Mjgscj4+PjR8czw8MjQsITEpLHU/KHRoaXMub2Zmc2V0PXQsYSk6e3ZhbHVlOmEsbGVuZ3RoOnQtbn19LHMucmVhZFZhcmludDY0WmlnWmFnPWZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMucmVhZFZhcmludDY0KHQpO3JldHVybiBuJiZuLnZhbHVlIGluc3RhbmNlb2YgZT9uLnZhbHVlPWguemlnWmFnRGVjb2RlNjQobi52YWx1ZSk6bj1oLnppZ1phZ0RlY29kZTY0KG4pLG59KSxzLndyaXRlQ1N0cmluZz1mdW5jdGlvbihlLG4pe3ZhciBpLHIscyxvPXZvaWQgMD09PW47aWYobyYmKG49dGhpcy5vZmZzZXQpLHI9ZS5sZW5ndGgsIXRoaXMubm9Bc3NlcnQpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBlKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgc3RyOiBOb3QgYSBzdHJpbmdcIik7Zm9yKGk9MDtyPmk7KytpKWlmKDA9PT1lLmNoYXJDb2RlQXQoaSkpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgc3RyOiBDb250YWlucyBOVUxMLWNoYXJhY3RlcnNcIik7aWYoXCJudW1iZXJcIiE9dHlwZW9mIG58fG4lMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrbitcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKChuPj4+PTApPDB8fG4rMD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIituK1wiICgrMCkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9cmV0dXJuIHI9Yy5jYWxjdWxhdGVVVEYxNmFzVVRGOCh0KGUpKVsxXSxuKz1yKzEscz10aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoLG4+cyYmdGhpcy5yZXNpemUoKHMqPTIpPm4/czpuKSxuLT1yKzEsYy5lbmNvZGVVVEYxNnRvVVRGOCh0KGUpLGZ1bmN0aW9uKGUpe3RoaXMudmlld1tuKytdPWV9LmJpbmQodGhpcykpLHRoaXMudmlld1tuKytdPTAsbz8odGhpcy5vZmZzZXQ9bix0aGlzKTpyfSxzLnJlYWRDU3RyaW5nPWZ1bmN0aW9uKGUpe3ZhciB0LGkscixzPXZvaWQgMD09PWU7aWYocyYmKGU9dGhpcy5vZmZzZXQpLCF0aGlzLm5vQXNzZXJ0KXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZSUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiBcIitlK1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoKGU+Pj49MCk8MHx8ZSsxPnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiAwIDw9IFwiK2UrXCIgKCsxKSA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX1yZXR1cm4gdD1lLHI9LTEsYy5kZWNvZGVVVEY4dG9VVEYxNihmdW5jdGlvbigpe2lmKDA9PT1yKXJldHVybiBudWxsO2lmKGU+PXRoaXMubGltaXQpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgcmFuZ2U6IFRydW5jYXRlZCBkYXRhLCBcIitlK1wiIDwgXCIrdGhpcy5saW1pdCk7cmV0dXJuIDA9PT0ocj10aGlzLnZpZXdbZSsrXSk/bnVsbDpyfS5iaW5kKHRoaXMpLGk9bigpLCEwKSxzPyh0aGlzLm9mZnNldD1lLGkoKSk6e3N0cmluZzppKCksbGVuZ3RoOmUtdH19LHMud3JpdGVJU3RyaW5nPWZ1bmN0aW9uKGUsbil7dmFyIGkscixzLG89dm9pZCAwPT09bjtpZihvJiYobj10aGlzLm9mZnNldCksIXRoaXMubm9Bc3NlcnQpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBlKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgc3RyOiBOb3QgYSBzdHJpbmdcIik7aWYoXCJudW1iZXJcIiE9dHlwZW9mIG58fG4lMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrbitcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKChuPj4+PTApPDB8fG4rMD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIituK1wiICgrMCkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9aWYocj1uLGk9Yy5jYWxjdWxhdGVVVEYxNmFzVVRGOCh0KGUpLHRoaXMubm9Bc3NlcnQpWzFdLG4rPTQraSxzPXRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgsbj5zJiZ0aGlzLnJlc2l6ZSgocyo9Mik+bj9zOm4pLG4tPTQraSx0aGlzLmxpdHRsZUVuZGlhbj8odGhpcy52aWV3W24rM109MjU1Jmk+Pj4yNCx0aGlzLnZpZXdbbisyXT0yNTUmaT4+PjE2LHRoaXMudmlld1tuKzFdPTI1NSZpPj4+OCx0aGlzLnZpZXdbbl09MjU1JmkpOih0aGlzLnZpZXdbbl09MjU1Jmk+Pj4yNCx0aGlzLnZpZXdbbisxXT0yNTUmaT4+PjE2LHRoaXMudmlld1tuKzJdPTI1NSZpPj4+OCx0aGlzLnZpZXdbbiszXT0yNTUmaSksbis9NCxjLmVuY29kZVVURjE2dG9VVEY4KHQoZSksZnVuY3Rpb24oZSl7dGhpcy52aWV3W24rK109ZX0uYmluZCh0aGlzKSksbiE9PXIrNCtpKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIHJhbmdlOiBUcnVuY2F0ZWQgZGF0YSwgXCIrbitcIiA9PSBcIisobis0K2kpKTtyZXR1cm4gbz8odGhpcy5vZmZzZXQ9bix0aGlzKTpuLXJ9LHMucmVhZElTdHJpbmc9ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHI9dm9pZCAwPT09ZTtpZihyJiYoZT10aGlzLm9mZnNldCksIXRoaXMubm9Bc3NlcnQpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlfHxlJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK2UrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigoZT4+Pj0wKTwwfHxlKzQ+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrZStcIiAoKzQpIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXJldHVybiB0PWUsbj10aGlzLnJlYWRVaW50MzIoZSksaT10aGlzLnJlYWRVVEY4U3RyaW5nKG4saC5NRVRSSUNTX0JZVEVTLGUrPTQpLGUrPWkubGVuZ3RoLHI/KHRoaXMub2Zmc2V0PWUsaS5zdHJpbmcpOntzdHJpbmc6aS5zdHJpbmcsbGVuZ3RoOmUtdH19LGguTUVUUklDU19DSEFSUz1cImNcIixoLk1FVFJJQ1NfQllURVM9XCJiXCIscy53cml0ZVVURjhTdHJpbmc9ZnVuY3Rpb24oZSxuKXt2YXIgaSxyLHMsbz12b2lkIDA9PT1uO2lmKG8mJihuPXRoaXMub2Zmc2V0KSwhdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIG58fG4lMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrbitcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKChuPj4+PTApPDB8fG4rMD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIituK1wiICgrMCkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9cmV0dXJuIHI9bixpPWMuY2FsY3VsYXRlVVRGMTZhc1VURjgodChlKSlbMV0sbis9aSxzPXRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgsbj5zJiZ0aGlzLnJlc2l6ZSgocyo9Mik+bj9zOm4pLG4tPWksYy5lbmNvZGVVVEYxNnRvVVRGOCh0KGUpLGZ1bmN0aW9uKGUpe3RoaXMudmlld1tuKytdPWV9LmJpbmQodGhpcykpLG8/KHRoaXMub2Zmc2V0PW4sdGhpcyk6bi1yfSxzLndyaXRlU3RyaW5nPXMud3JpdGVVVEY4U3RyaW5nLGguY2FsY3VsYXRlVVRGOENoYXJzPWZ1bmN0aW9uKGUpe3JldHVybiBjLmNhbGN1bGF0ZVVURjE2YXNVVEY4KHQoZSkpWzBdfSxoLmNhbGN1bGF0ZVVURjhCeXRlcz1mdW5jdGlvbihlKXtyZXR1cm4gYy5jYWxjdWxhdGVVVEYxNmFzVVRGOCh0KGUpKVsxXX0saC5jYWxjdWxhdGVTdHJpbmc9aC5jYWxjdWxhdGVVVEY4Qnl0ZXMscy5yZWFkVVRGOFN0cmluZz1mdW5jdGlvbihlLHQsaSl7dmFyIHIscyxvLGEsdTtpZihcIm51bWJlclwiPT10eXBlb2YgdCYmKGk9dCx0PXZvaWQgMCksKHI9dm9pZCAwPT09aSkmJihpPXRoaXMub2Zmc2V0KSx2b2lkIDA9PT10JiYodD1oLk1FVFJJQ1NfQ0hBUlMpLCF0aGlzLm5vQXNzZXJ0KXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZSUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgbGVuZ3RoOiBcIitlK1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoZXw9MCxcIm51bWJlclwiIT10eXBlb2YgaXx8aSUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiBcIitpK1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoKGk+Pj49MCk8MHx8aSswPnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiAwIDw9IFwiK2krXCIgKCswKSA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX1pZihvPTAsYT1pLHQ9PT1oLk1FVFJJQ1NfQ0hBUlMpe2lmKHM9bigpLGMuZGVjb2RlVVRGOChmdW5jdGlvbigpe3JldHVybiBlPm8mJmk8dGhpcy5saW1pdD90aGlzLnZpZXdbaSsrXTpudWxsfS5iaW5kKHRoaXMpLChmdW5jdGlvbihlKXsrK28sYy5VVEY4dG9VVEYxNihlLHMpfSkpLG8hPT1lKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIHJhbmdlOiBUcnVuY2F0ZWQgZGF0YSwgXCIrbytcIiA9PSBcIitlKTtyZXR1cm4gcj8odGhpcy5vZmZzZXQ9aSxzKCkpOntzdHJpbmc6cygpLGxlbmd0aDppLWF9fWlmKHQ9PT1oLk1FVFJJQ1NfQllURVMpe2lmKCF0aGlzLm5vQXNzZXJ0KXtpZihcIm51bWJlclwiIT10eXBlb2YgaXx8aSUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiBcIitpK1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoKGk+Pj49MCk8MHx8aStlPnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiAwIDw9IFwiK2krXCIgKCtcIitlK1wiKSA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX1pZih1PWkrZSxjLmRlY29kZVVURjh0b1VURjE2KGZ1bmN0aW9uKCl7cmV0dXJuIHU+aT90aGlzLnZpZXdbaSsrXTpudWxsfS5iaW5kKHRoaXMpLHM9bigpLHRoaXMubm9Bc3NlcnQpLGkhPT11KXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIHJhbmdlOiBUcnVuY2F0ZWQgZGF0YSwgXCIraStcIiA9PSBcIit1KTtyZXR1cm4gcj8odGhpcy5vZmZzZXQ9aSxzKCkpOntzdHJpbmc6cygpLGxlbmd0aDppLWF9fXRocm93IFR5cGVFcnJvcihcIlVuc3VwcG9ydGVkIG1ldHJpY3M6IFwiK3QpfSxzLnJlYWRTdHJpbmc9cy5yZWFkVVRGOFN0cmluZyxzLndyaXRlVlN0cmluZz1mdW5jdGlvbihlLG4pe3ZhciBpLHIscyxvLGE9dm9pZCAwPT09bjtpZihhJiYobj10aGlzLm9mZnNldCksIXRoaXMubm9Bc3NlcnQpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBlKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgc3RyOiBOb3QgYSBzdHJpbmdcIik7aWYoXCJudW1iZXJcIiE9dHlwZW9mIG58fG4lMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrbitcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKChuPj4+PTApPDB8fG4rMD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIituK1wiICgrMCkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9aWYocz1uLGk9Yy5jYWxjdWxhdGVVVEYxNmFzVVRGOCh0KGUpLHRoaXMubm9Bc3NlcnQpWzFdLHI9aC5jYWxjdWxhdGVWYXJpbnQzMihpKSxuKz1yK2ksbz10aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoLG4+byYmdGhpcy5yZXNpemUoKG8qPTIpPm4/bzpuKSxuLT1yK2ksbis9dGhpcy53cml0ZVZhcmludDMyKGksbiksYy5lbmNvZGVVVEYxNnRvVVRGOCh0KGUpLGZ1bmN0aW9uKGUpe3RoaXMudmlld1tuKytdPWV9LmJpbmQodGhpcykpLG4hPT1zK2krcil0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCByYW5nZTogVHJ1bmNhdGVkIGRhdGEsIFwiK24rXCIgPT0gXCIrKG4raStyKSk7cmV0dXJuIGE/KHRoaXMub2Zmc2V0PW4sdGhpcyk6bi1zfSxzLnJlYWRWU3RyaW5nPWZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyPXZvaWQgMD09PWU7aWYociYmKGU9dGhpcy5vZmZzZXQpLCF0aGlzLm5vQXNzZXJ0KXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZSUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiBcIitlK1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoKGU+Pj49MCk8MHx8ZSsxPnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiAwIDw9IFwiK2UrXCIgKCsxKSA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX1yZXR1cm4gdD1lLG49dGhpcy5yZWFkVmFyaW50MzIoZSksaT10aGlzLnJlYWRVVEY4U3RyaW5nKG4udmFsdWUsaC5NRVRSSUNTX0JZVEVTLGUrPW4ubGVuZ3RoKSxlKz1pLmxlbmd0aCxyPyh0aGlzLm9mZnNldD1lLGkuc3RyaW5nKTp7c3RyaW5nOmkuc3RyaW5nLGxlbmd0aDplLXR9fSxzLmFwcGVuZD1mdW5jdGlvbihlLHQsbil7dmFyIGkscixzO2lmKChcIm51bWJlclwiPT10eXBlb2YgdHx8XCJzdHJpbmdcIiE9dHlwZW9mIHQpJiYobj10LHQ9dm9pZCAwKSwoaT12b2lkIDA9PT1uKSYmKG49dGhpcy5vZmZzZXQpLCF0aGlzLm5vQXNzZXJ0KXtpZihcIm51bWJlclwiIT10eXBlb2Ygbnx8biUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiBcIituK1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoKG4+Pj49MCk8MHx8biswPnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiAwIDw9IFwiK24rXCIgKCswKSA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX1yZXR1cm4gZSBpbnN0YW5jZW9mIGh8fChlPWgud3JhcChlLHQpKSwocj1lLmxpbWl0LWUub2Zmc2V0KTw9MHx8KChuKz1yKT4ocz10aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKSYmdGhpcy5yZXNpemUoKHMqPTIpPm4/czpuKSxuLT1yLHRoaXMudmlldy5zZXQoZS52aWV3LnN1YmFycmF5KGUub2Zmc2V0LGUubGltaXQpLG4pLGUub2Zmc2V0Kz1yLGkmJih0aGlzLm9mZnNldCs9cikpLHRoaXN9LHMuYXBwZW5kVG89ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5hcHBlbmQodGhpcyx0KSx0aGlzfSxzLmFzc2VydD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5ub0Fzc2VydD0hZSx0aGlzfSxzLmNhcGFjaXR5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYnVmZmVyLmJ5dGVMZW5ndGh9LHMuY2xlYXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vZmZzZXQ9MCx0aGlzLmxpbWl0PXRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgsdGhpcy5tYXJrZWRPZmZzZXQ9LTEsdGhpc30scy5jbG9uZT1mdW5jdGlvbihlKXt2YXIgdD1uZXcgaCgwLHRoaXMubGl0dGxlRW5kaWFuLHRoaXMubm9Bc3NlcnQpO3JldHVybiBlPyh0LmJ1ZmZlcj1uZXcgQXJyYXlCdWZmZXIodGhpcy5idWZmZXIuYnl0ZUxlbmd0aCksdC52aWV3PW5ldyBVaW50OEFycmF5KHQuYnVmZmVyKSk6KHQuYnVmZmVyPXRoaXMuYnVmZmVyLHQudmlldz10aGlzLnZpZXcpLHQub2Zmc2V0PXRoaXMub2Zmc2V0LHQubWFya2VkT2Zmc2V0PXRoaXMubWFya2VkT2Zmc2V0LHQubGltaXQ9dGhpcy5saW1pdCx0fSxzLmNvbXBhY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI7aWYodm9pZCAwPT09ZSYmKGU9dGhpcy5vZmZzZXQpLHZvaWQgMD09PXQmJih0PXRoaXMubGltaXQpLCF0aGlzLm5vQXNzZXJ0KXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZSUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgYmVnaW46IE5vdCBhbiBpbnRlZ2VyXCIpO2lmKGU+Pj49MCxcIm51bWJlclwiIT10eXBlb2YgdHx8dCUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgZW5kOiBOb3QgYW4gaW50ZWdlclwiKTtpZih0Pj4+PTAsZTwwfHxlPnR8fHQ+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCByYW5nZTogMCA8PSBcIitlK1wiIDw9IFwiK3QrXCIgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9cmV0dXJuIDA9PT1lJiZ0PT09dGhpcy5idWZmZXIuYnl0ZUxlbmd0aD90aGlzOjA9PShuPXQtZSk/KHRoaXMuYnVmZmVyPW8sdGhpcy52aWV3PW51bGwsdGhpcy5tYXJrZWRPZmZzZXQ+PTAmJih0aGlzLm1hcmtlZE9mZnNldC09ZSksdGhpcy5vZmZzZXQ9MCx0aGlzLmxpbWl0PTAsdGhpcyk6KGk9bmV3IEFycmF5QnVmZmVyKG4pLChyPW5ldyBVaW50OEFycmF5KGkpKS5zZXQodGhpcy52aWV3LnN1YmFycmF5KGUsdCkpLHRoaXMuYnVmZmVyPWksdGhpcy52aWV3PXIsdGhpcy5tYXJrZWRPZmZzZXQ+PTAmJih0aGlzLm1hcmtlZE9mZnNldC09ZSksdGhpcy5vZmZzZXQ9MCx0aGlzLmxpbWl0PW4sdGhpcyl9LHMuY29weT1mdW5jdGlvbihlLHQpe2lmKHZvaWQgMD09PWUmJihlPXRoaXMub2Zmc2V0KSx2b2lkIDA9PT10JiYodD10aGlzLmxpbWl0KSwhdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGJlZ2luOiBOb3QgYW4gaW50ZWdlclwiKTtpZihlPj4+PTAsXCJudW1iZXJcIiE9dHlwZW9mIHR8fHQlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGVuZDogTm90IGFuIGludGVnZXJcIik7aWYodD4+Pj0wLGU8MHx8ZT50fHx0PnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgcmFuZ2U6IDAgPD0gXCIrZStcIiA8PSBcIit0K1wiIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfWlmKGU9PT10KXJldHVybiBuZXcgaCgwLHRoaXMubGl0dGxlRW5kaWFuLHRoaXMubm9Bc3NlcnQpO3ZhciBuPXQtZSxpPW5ldyBoKG4sdGhpcy5saXR0bGVFbmRpYW4sdGhpcy5ub0Fzc2VydCk7cmV0dXJuIGkub2Zmc2V0PTAsaS5saW1pdD1uLGkubWFya2VkT2Zmc2V0Pj0wJiYoaS5tYXJrZWRPZmZzZXQtPWUpLHRoaXMuY29weVRvKGksMCxlLHQpLGl9LHMuY29weVRvPWZ1bmN0aW9uKGUsdCxuLGkpe3ZhciByLHMsbztpZighdGhpcy5ub0Fzc2VydCYmIWguaXNCeXRlQnVmZmVyKGUpKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgdGFyZ2V0OiBOb3QgYSBCeXRlQnVmZmVyXCIpO2lmKHQ9KHM9dm9pZCAwPT09dCk/ZS5vZmZzZXQ6MHx0LG49KHI9dm9pZCAwPT09bik/dGhpcy5vZmZzZXQ6MHxuLGk9dm9pZCAwPT09aT90aGlzLmxpbWl0OjB8aSx0PDB8fHQ+ZS5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCB0YXJnZXQgcmFuZ2U6IDAgPD0gXCIrdCtcIiA8PSBcIitlLmJ1ZmZlci5ieXRlTGVuZ3RoKTtpZihuPDB8fGk+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBzb3VyY2UgcmFuZ2U6IDAgPD0gXCIrbitcIiA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKTtyZXR1cm4gMD09KG89aS1uKT9lOihlLmVuc3VyZUNhcGFjaXR5KHQrbyksZS52aWV3LnNldCh0aGlzLnZpZXcuc3ViYXJyYXkobixpKSx0KSxyJiYodGhpcy5vZmZzZXQrPW8pLHMmJihlLm9mZnNldCs9byksdGhpcyl9LHMuZW5zdXJlQ2FwYWNpdHk9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5idWZmZXIuYnl0ZUxlbmd0aDtyZXR1cm4gZT50P3RoaXMucmVzaXplKCh0Kj0yKT5lP3Q6ZSk6dGhpc30scy5maWxsPWZ1bmN0aW9uKGUsdCxuKXt2YXIgaT12b2lkIDA9PT10O2lmKGkmJih0PXRoaXMub2Zmc2V0KSxcInN0cmluZ1wiPT10eXBlb2YgZSYmZS5sZW5ndGg+MCYmKGU9ZS5jaGFyQ29kZUF0KDApKSx2b2lkIDA9PT10JiYodD10aGlzLm9mZnNldCksdm9pZCAwPT09biYmKG49dGhpcy5saW1pdCksIXRoaXMubm9Bc3NlcnQpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlfHxlJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCB2YWx1ZTogXCIrZStcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKGV8PTAsXCJudW1iZXJcIiE9dHlwZW9mIHR8fHQlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGJlZ2luOiBOb3QgYW4gaW50ZWdlclwiKTtpZih0Pj4+PTAsXCJudW1iZXJcIiE9dHlwZW9mIG58fG4lMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGVuZDogTm90IGFuIGludGVnZXJcIik7aWYobj4+Pj0wLHQ8MHx8dD5ufHxuPnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgcmFuZ2U6IDAgPD0gXCIrdCtcIiA8PSBcIituK1wiIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfWlmKHQ+PW4pcmV0dXJuIHRoaXM7Zm9yKDtuPnQ7KXRoaXMudmlld1t0KytdPWU7cmV0dXJuIGkmJih0aGlzLm9mZnNldD10KSx0aGlzfSxzLmZsaXA9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5saW1pdD10aGlzLm9mZnNldCx0aGlzLm9mZnNldD0wLHRoaXN9LHMubWFyaz1mdW5jdGlvbihlKXtpZihlPXZvaWQgMD09PWU/dGhpcy5vZmZzZXQ6ZSwhdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrZStcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKChlPj4+PTApPDB8fGUrMD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIitlK1wiICgrMCkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9cmV0dXJuIHRoaXMubWFya2VkT2Zmc2V0PWUsdGhpc30scy5vcmRlcj1mdW5jdGlvbihlKXtpZighdGhpcy5ub0Fzc2VydCYmXCJib29sZWFuXCIhPXR5cGVvZiBlKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgbGl0dGxlRW5kaWFuOiBOb3QgYSBib29sZWFuXCIpO3JldHVybiB0aGlzLmxpdHRsZUVuZGlhbj0hIWUsdGhpc30scy5MRT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5saXR0bGVFbmRpYW49dm9pZCAwPT09ZXx8ISFlLHRoaXN9LHMuQkU9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMubGl0dGxlRW5kaWFuPXZvaWQgMCE9PWUmJiFlLHRoaXN9LHMucHJlcGVuZD1mdW5jdGlvbihlLHQsbil7dmFyIGkscixzLG8sYTtpZigoXCJudW1iZXJcIj09dHlwZW9mIHR8fFwic3RyaW5nXCIhPXR5cGVvZiB0KSYmKG49dCx0PXZvaWQgMCksKGk9dm9pZCAwPT09bikmJihuPXRoaXMub2Zmc2V0KSwhdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIG58fG4lMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrbitcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKChuPj4+PTApPDB8fG4rMD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIituK1wiICgrMCkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9cmV0dXJuIGUgaW5zdGFuY2VvZiBofHwoZT1oLndyYXAoZSx0KSksKHI9ZS5saW1pdC1lLm9mZnNldCk8PTB8fCgocz1yLW4pPjA/KG89bmV3IEFycmF5QnVmZmVyKHRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgrcyksKGE9bmV3IFVpbnQ4QXJyYXkobykpLnNldCh0aGlzLnZpZXcuc3ViYXJyYXkobix0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKSxyKSx0aGlzLmJ1ZmZlcj1vLHRoaXMudmlldz1hLHRoaXMub2Zmc2V0Kz1zLHRoaXMubWFya2VkT2Zmc2V0Pj0wJiYodGhpcy5tYXJrZWRPZmZzZXQrPXMpLHRoaXMubGltaXQrPXMsbis9cyk6bmV3IFVpbnQ4QXJyYXkodGhpcy5idWZmZXIpLHRoaXMudmlldy5zZXQoZS52aWV3LnN1YmFycmF5KGUub2Zmc2V0LGUubGltaXQpLG4tciksZS5vZmZzZXQ9ZS5saW1pdCxpJiYodGhpcy5vZmZzZXQtPXIpKSx0aGlzfSxzLnByZXBlbmRUbz1mdW5jdGlvbihlLHQpe3JldHVybiBlLnByZXBlbmQodGhpcyx0KSx0aGlzfSxzLnByaW50RGVidWc9ZnVuY3Rpb24oZSl7XCJmdW5jdGlvblwiIT10eXBlb2YgZSYmKGU9Y29uc29sZS5sb2cuYmluZChjb25zb2xlKSksZSh0aGlzLnRvU3RyaW5nKCkrXCJcXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXFxuXCIrdGhpcy50b0RlYnVnKCEwKSl9LHMucmVtYWluaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGltaXQtdGhpcy5vZmZzZXR9LHMucmVzZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXJrZWRPZmZzZXQ+PTA/KHRoaXMub2Zmc2V0PXRoaXMubWFya2VkT2Zmc2V0LHRoaXMubWFya2VkT2Zmc2V0PS0xKTp0aGlzLm9mZnNldD0wLHRoaXN9LHMucmVzaXplPWZ1bmN0aW9uKGUpe3ZhciB0LG47aWYoIXRoaXMubm9Bc3NlcnQpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlfHxlJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBjYXBhY2l0eTogXCIrZStcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKChlfD0wKTwwKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIGNhcGFjaXR5OiAwIDw9IFwiK2UpfXJldHVybiB0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoPGUmJih0PW5ldyBBcnJheUJ1ZmZlcihlKSwobj1uZXcgVWludDhBcnJheSh0KSkuc2V0KHRoaXMudmlldyksdGhpcy5idWZmZXI9dCx0aGlzLnZpZXc9biksdGhpc30scy5yZXZlcnNlPWZ1bmN0aW9uKGUsdCl7aWYodm9pZCAwPT09ZSYmKGU9dGhpcy5vZmZzZXQpLHZvaWQgMD09PXQmJih0PXRoaXMubGltaXQpLCF0aGlzLm5vQXNzZXJ0KXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZSUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgYmVnaW46IE5vdCBhbiBpbnRlZ2VyXCIpO2lmKGU+Pj49MCxcIm51bWJlclwiIT10eXBlb2YgdHx8dCUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgZW5kOiBOb3QgYW4gaW50ZWdlclwiKTtpZih0Pj4+PTAsZTwwfHxlPnR8fHQ+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCByYW5nZTogMCA8PSBcIitlK1wiIDw9IFwiK3QrXCIgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9cmV0dXJuIGU9PT10fHxBcnJheS5wcm90b3R5cGUucmV2ZXJzZS5jYWxsKHRoaXMudmlldy5zdWJhcnJheShlLHQpKSx0aGlzfSxzLnNraXA9ZnVuY3Rpb24oZSl7aWYoIXRoaXMubm9Bc3NlcnQpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlfHxlJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBsZW5ndGg6IFwiK2UrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtlfD0wfXZhciB0PXRoaXMub2Zmc2V0K2U7aWYoIXRoaXMubm9Bc3NlcnQmJih0PDB8fHQ+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCkpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgbGVuZ3RoOiAwIDw9IFwiK3RoaXMub2Zmc2V0K1wiICsgXCIrZStcIiA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKTtyZXR1cm4gdGhpcy5vZmZzZXQ9dCx0aGlzfSxzLnNsaWNlPWZ1bmN0aW9uKGUsdCl7aWYodm9pZCAwPT09ZSYmKGU9dGhpcy5vZmZzZXQpLHZvaWQgMD09PXQmJih0PXRoaXMubGltaXQpLCF0aGlzLm5vQXNzZXJ0KXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZSUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgYmVnaW46IE5vdCBhbiBpbnRlZ2VyXCIpO2lmKGU+Pj49MCxcIm51bWJlclwiIT10eXBlb2YgdHx8dCUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgZW5kOiBOb3QgYW4gaW50ZWdlclwiKTtpZih0Pj4+PTAsZTwwfHxlPnR8fHQ+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCByYW5nZTogMCA8PSBcIitlK1wiIDw9IFwiK3QrXCIgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9dmFyIG49dGhpcy5jbG9uZSgpO3JldHVybiBuLm9mZnNldD1lLG4ubGltaXQ9dCxufSxzLnRvQnVmZmVyPWZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcy5vZmZzZXQsaT10aGlzLmxpbWl0O2lmKCF0aGlzLm5vQXNzZXJ0KXtpZihcIm51bWJlclwiIT10eXBlb2Ygbnx8biUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiBOb3QgYW4gaW50ZWdlclwiKTtpZihuPj4+PTAsXCJudW1iZXJcIiE9dHlwZW9mIGl8fGklMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGxpbWl0OiBOb3QgYW4gaW50ZWdlclwiKTtpZihpPj4+PTAsbjwwfHxuPml8fGk+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCByYW5nZTogMCA8PSBcIituK1wiIDw9IFwiK2krXCIgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9cmV0dXJuIGV8fDAhPT1ufHxpIT09dGhpcy5idWZmZXIuYnl0ZUxlbmd0aD9uPT09aT9vOih0PW5ldyBBcnJheUJ1ZmZlcihpLW4pLG5ldyBVaW50OEFycmF5KHQpLnNldChuZXcgVWludDhBcnJheSh0aGlzLmJ1ZmZlcikuc3ViYXJyYXkobixpKSwwKSx0KTp0aGlzLmJ1ZmZlcn0scy50b0FycmF5QnVmZmVyPXMudG9CdWZmZXIscy50b1N0cmluZz1mdW5jdGlvbihlLHQsbil7aWYodm9pZCAwPT09ZSlyZXR1cm5cIkJ5dGVCdWZmZXJBQihvZmZzZXQ9XCIrdGhpcy5vZmZzZXQrXCIsbWFya2VkT2Zmc2V0PVwiK3RoaXMubWFya2VkT2Zmc2V0K1wiLGxpbWl0PVwiK3RoaXMubGltaXQrXCIsY2FwYWNpdHk9XCIrdGhpcy5jYXBhY2l0eSgpK1wiKVwiO3N3aXRjaChcIm51bWJlclwiPT10eXBlb2YgZSYmKG49dD1lPVwidXRmOFwiKSxlKXtjYXNlXCJ1dGY4XCI6cmV0dXJuIHRoaXMudG9VVEY4KHQsbik7Y2FzZVwiYmFzZTY0XCI6cmV0dXJuIHRoaXMudG9CYXNlNjQodCxuKTtjYXNlXCJoZXhcIjpyZXR1cm4gdGhpcy50b0hleCh0LG4pO2Nhc2VcImJpbmFyeVwiOnJldHVybiB0aGlzLnRvQmluYXJ5KHQsbik7Y2FzZVwiZGVidWdcIjpyZXR1cm4gdGhpcy50b0RlYnVnKCk7Y2FzZVwiY29sdW1uc1wiOnJldHVybiB0aGlzLnRvQ29sdW1ucygpO2RlZmF1bHQ6dGhyb3cgRXJyb3IoXCJVbnN1cHBvcnRlZCBlbmNvZGluZzogXCIrZSl9fSx1PWZ1bmN0aW9uKCl7dmFyIGUsdCxuPXt9LGk9WzY1LDY2LDY3LDY4LDY5LDcwLDcxLDcyLDczLDc0LDc1LDc2LDc3LDc4LDc5LDgwLDgxLDgyLDgzLDg0LDg1LDg2LDg3LDg4LDg5LDkwLDk3LDk4LDk5LDEwMCwxMDEsMTAyLDEwMywxMDQsMTA1LDEwNiwxMDcsMTA4LDEwOSwxMTAsMTExLDExMiwxMTMsMTE0LDExNSwxMTYsMTE3LDExOCwxMTksMTIwLDEyMSwxMjIsNDgsNDksNTAsNTEsNTIsNTMsNTQsNTUsNTYsNTcsNDMsNDddLHI9W107Zm9yKGU9MCx0PWkubGVuZ3RoO3Q+ZTsrK2UpcltpW2VdXT1lO3JldHVybiBuLmVuY29kZT1mdW5jdGlvbihlLHQpe2Zvcih2YXIgbixyO251bGwhPT0obj1lKCkpOyl0KGlbNjMmbj4+Ml0pLHI9KDMmbik8PDQsbnVsbCE9PShuPWUoKSk/KHQoaVs2MyYoKHJ8PTE1Jm4+PjQpfDE1Jm4+PjQpXSkscj0oMTUmbik8PDIsbnVsbCE9PShuPWUoKSk/KHQoaVs2MyYocnwzJm4+PjYpXSksdChpWzYzJm5dKSk6KHQoaVs2MyZyXSksdCg2MSkpKToodChpWzYzJnJdKSx0KDYxKSx0KDYxKSl9LG4uZGVjb2RlPWZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlKXt0aHJvdyBFcnJvcihcIklsbGVnYWwgY2hhcmFjdGVyIGNvZGU6IFwiK2UpfWZvcih2YXIgaSxzLG87bnVsbCE9PShpPWUoKSk7KWlmKHZvaWQgMD09PShzPXJbaV0pJiZuKGkpLG51bGwhPT0oaT1lKCkpJiYodm9pZCAwPT09KG89cltpXSkmJm4oaSksdChzPDwyPj4+MHwoNDgmbyk+PjQpLG51bGwhPT0oaT1lKCkpKSl7aWYodm9pZCAwPT09KHM9cltpXSkpe2lmKDYxPT09aSlicmVhaztuKGkpfWlmKHQoKDE1Jm8pPDw0Pj4+MHwoNjAmcyk+PjIpLG51bGwhPT0oaT1lKCkpKXtpZih2b2lkIDA9PT0obz1yW2ldKSl7aWYoNjE9PT1pKWJyZWFrO24oaSl9dCgoMyZzKTw8Nj4+PjB8byl9fX0sbi50ZXN0PWZ1bmN0aW9uKGUpe3JldHVybi9eKD86W0EtWmEtejAtOStcXC9dezR9KSooPzpbQS1aYS16MC05K1xcL117Mn09PXxbQS1aYS16MC05K1xcL117M309KT8kLy50ZXN0KGUpfSxufSgpLHMudG9CYXNlNjQ9ZnVuY3Rpb24oZSx0KXtpZih2b2lkIDA9PT1lJiYoZT10aGlzLm9mZnNldCksdm9pZCAwPT09dCYmKHQ9dGhpcy5saW1pdCksdHw9MCwoZXw9MCk8MHx8dD50aGlzLmNhcGFjaXR5fHxlPnQpdGhyb3cgUmFuZ2VFcnJvcihcImJlZ2luLCBlbmRcIik7dmFyIGk7cmV0dXJuIHUuZW5jb2RlKGZ1bmN0aW9uKCl7cmV0dXJuIHQ+ZT90aGlzLnZpZXdbZSsrXTpudWxsfS5iaW5kKHRoaXMpLGk9bigpKSxpKCl9LGguZnJvbUJhc2U2ND1mdW5jdGlvbihlLG4pe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBlKXRocm93IFR5cGVFcnJvcihcInN0clwiKTt2YXIgaT1uZXcgaChlLmxlbmd0aC80KjMsbikscj0wO3JldHVybiB1LmRlY29kZSh0KGUpLChmdW5jdGlvbihlKXtpLnZpZXdbcisrXT1lfSkpLGkubGltaXQ9cixpfSxoLmJ0b2E9ZnVuY3Rpb24oZSl7cmV0dXJuIGguZnJvbUJpbmFyeShlKS50b0Jhc2U2NCgpfSxoLmF0b2I9ZnVuY3Rpb24oZSl7cmV0dXJuIGguZnJvbUJhc2U2NChlKS50b0JpbmFyeSgpfSxzLnRvQmluYXJ5PWZ1bmN0aW9uKGUsdCl7aWYodm9pZCAwPT09ZSYmKGU9dGhpcy5vZmZzZXQpLHZvaWQgMD09PXQmJih0PXRoaXMubGltaXQpLHR8PTAsKGV8PTApPDB8fHQ+dGhpcy5jYXBhY2l0eSgpfHxlPnQpdGhyb3cgUmFuZ2VFcnJvcihcImJlZ2luLCBlbmRcIik7aWYoZT09PXQpcmV0dXJuXCJcIjtmb3IodmFyIG49W10saT1bXTt0PmU7KW4ucHVzaCh0aGlzLnZpZXdbZSsrXSksbi5sZW5ndGg+PTEwMjQmJihpLnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsbikpLG49W10pO3JldHVybiBpLmpvaW4oXCJcIikrU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsbil9LGguZnJvbUJpbmFyeT1mdW5jdGlvbihlLHQpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBlKXRocm93IFR5cGVFcnJvcihcInN0clwiKTtmb3IodmFyIG4saT0wLHI9ZS5sZW5ndGgscz1uZXcgaChyLHQpO3I+aTspe2lmKChuPWUuY2hhckNvZGVBdChpKSk+MjU1KXRocm93IFJhbmdlRXJyb3IoXCJpbGxlZ2FsIGNoYXIgY29kZTogXCIrbik7cy52aWV3W2krK109bn1yZXR1cm4gcy5saW1pdD1yLHN9LHMudG9EZWJ1Zz1mdW5jdGlvbihlKXtmb3IodmFyIHQsbj0tMSxpPXRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgscj1cIlwiLHM9XCJcIixvPVwiXCI7aT5uOyl7aWYoLTEhPT1uJiYocis9KHQ9dGhpcy52aWV3W25dKTwxNj9cIjBcIit0LnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpOnQudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCksZSYmKHMrPXQ+MzImJnQ8MTI3P1N0cmluZy5mcm9tQ2hhckNvZGUodCk6XCIuXCIpKSwrK24sZSYmbj4wJiZuJTE2PT0wJiZuIT09aSl7Zm9yKDtyLmxlbmd0aDw1MTspcis9XCIgXCI7bys9citzK1wiXFxuXCIscj1zPVwiXCJ9cis9bj09PXRoaXMub2Zmc2V0JiZuPT09dGhpcy5saW1pdD9uPT09dGhpcy5tYXJrZWRPZmZzZXQ/XCIhXCI6XCJ8XCI6bj09PXRoaXMub2Zmc2V0P249PT10aGlzLm1hcmtlZE9mZnNldD9cIltcIjpcIjxcIjpuPT09dGhpcy5saW1pdD9uPT09dGhpcy5tYXJrZWRPZmZzZXQ/XCJdXCI6XCI+XCI6bj09PXRoaXMubWFya2VkT2Zmc2V0P1wiJ1wiOmV8fDAhPT1uJiZuIT09aT9cIiBcIjpcIlwifWlmKGUmJlwiIFwiIT09cil7Zm9yKDtyLmxlbmd0aDw1MTspcis9XCIgXCI7bys9citzK1wiXFxuXCJ9cmV0dXJuIGU/bzpyfSxoLmZyb21EZWJ1Zz1mdW5jdGlvbihlLHQsbil7Zm9yKHZhciBpLHIscz1lLmxlbmd0aCxvPW5ldyBoKDB8KHMrMSkvMyx0LG4pLGE9MCx1PTAsYz0hMSxsPSExLGQ9ITEsZj0hMSxwPSExO3M+YTspe3N3aXRjaChpPWUuY2hhckF0KGErKykpe2Nhc2VcIiFcIjppZighbil7aWYobHx8ZHx8Zil7cD0hMDticmVha31sPWQ9Zj0hMH1vLm9mZnNldD1vLm1hcmtlZE9mZnNldD1vLmxpbWl0PXUsYz0hMTticmVhaztjYXNlXCJ8XCI6aWYoIW4pe2lmKGx8fGYpe3A9ITA7YnJlYWt9bD1mPSEwfW8ub2Zmc2V0PW8ubGltaXQ9dSxjPSExO2JyZWFrO2Nhc2VcIltcIjppZighbil7aWYobHx8ZCl7cD0hMDticmVha31sPWQ9ITB9by5vZmZzZXQ9by5tYXJrZWRPZmZzZXQ9dSxjPSExO2JyZWFrO2Nhc2VcIjxcIjppZighbil7aWYobCl7cD0hMDticmVha31sPSEwfW8ub2Zmc2V0PXUsYz0hMTticmVhaztjYXNlXCJdXCI6aWYoIW4pe2lmKGZ8fGQpe3A9ITA7YnJlYWt9Zj1kPSEwfW8ubGltaXQ9by5tYXJrZWRPZmZzZXQ9dSxjPSExO2JyZWFrO2Nhc2VcIj5cIjppZighbil7aWYoZil7cD0hMDticmVha31mPSEwfW8ubGltaXQ9dSxjPSExO2JyZWFrO2Nhc2VcIidcIjppZighbil7aWYoZCl7cD0hMDticmVha31kPSEwfW8ubWFya2VkT2Zmc2V0PXUsYz0hMTticmVhaztjYXNlXCIgXCI6Yz0hMTticmVhaztkZWZhdWx0OmlmKCFuJiZjKXtwPSEwO2JyZWFrfWlmKHI9cGFyc2VJbnQoaStlLmNoYXJBdChhKyspLDE2KSwhbiYmKGlzTmFOKHIpfHxyPDB8fHI+MjU1KSl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIHN0cjogTm90IGEgZGVidWcgZW5jb2RlZCBzdHJpbmdcIik7by52aWV3W3UrK109cixjPSEwfWlmKHApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBzdHI6IEludmFsaWQgc3ltYm9sIGF0IFwiK2EpfWlmKCFuKXtpZighbHx8IWYpdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBzdHI6IE1pc3Npbmcgb2Zmc2V0IG9yIGxpbWl0XCIpO2lmKHU8by5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIHN0cjogTm90IGEgZGVidWcgZW5jb2RlZCBzdHJpbmcgKGlzIGl0IGhleD8pIFwiK3UrXCIgPCBcIitzKX1yZXR1cm4gb30scy50b0hleD1mdW5jdGlvbihlLHQpe2lmKGU9dm9pZCAwPT09ZT90aGlzLm9mZnNldDplLHQ9dm9pZCAwPT09dD90aGlzLmxpbWl0OnQsIXRoaXMubm9Bc3NlcnQpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlfHxlJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBiZWdpbjogTm90IGFuIGludGVnZXJcIik7aWYoZT4+Pj0wLFwibnVtYmVyXCIhPXR5cGVvZiB0fHx0JTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBlbmQ6IE5vdCBhbiBpbnRlZ2VyXCIpO2lmKHQ+Pj49MCxlPDB8fGU+dHx8dD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIHJhbmdlOiAwIDw9IFwiK2UrXCIgPD0gXCIrdCtcIiA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX1mb3IodmFyIG4saT1uZXcgQXJyYXkodC1lKTt0PmU7KShuPXRoaXMudmlld1tlKytdKTwxNj9pLnB1c2goXCIwXCIsbi50b1N0cmluZygxNikpOmkucHVzaChuLnRvU3RyaW5nKDE2KSk7cmV0dXJuIGkuam9pbihcIlwiKX0saC5mcm9tSGV4PWZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLHMsbyxhO2lmKCFuKXtpZihcInN0cmluZ1wiIT10eXBlb2YgZSl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIHN0cjogTm90IGEgc3RyaW5nXCIpO2lmKGUubGVuZ3RoJTIhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBzdHI6IExlbmd0aCBub3QgYSBtdWx0aXBsZSBvZiAyXCIpfWZvcihyPWUubGVuZ3RoLHM9bmV3IGgoMHxyLzIsdCksbz0wLGE9MDtyPm87bys9Mil7aWYoaT1wYXJzZUludChlLnN1YnN0cmluZyhvLG8rMiksMTYpLCFuJiYoIWlzRmluaXRlKGkpfHxpPDB8fGk+MjU1KSl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIHN0cjogQ29udGFpbnMgbm9uLWhleCBjaGFyYWN0ZXJzXCIpO3Mudmlld1thKytdPWl9cmV0dXJuIHMubGltaXQ9YSxzfSxjPWZ1bmN0aW9uKCl7dmFyIGU9e01BWF9DT0RFUE9JTlQ6MTExNDExMSxlbmNvZGVVVEY4OmZ1bmN0aW9uKGUsdCl7dmFyIG49bnVsbDtmb3IoXCJudW1iZXJcIj09dHlwZW9mIGUmJihuPWUsZT1mdW5jdGlvbigpe3JldHVybiBudWxsfSk7bnVsbCE9PW58fG51bGwhPT0obj1lKCkpOyluPDEyOD90KDEyNyZuKTpuPDIwNDg/KHQoMTkyfDMxJm4+PjYpLHQoMTI4fDYzJm4pKTpuPDY1NTM2Pyh0KDIyNHwxNSZuPj4xMiksdCgxMjh8NjMmbj4+NiksdCgxMjh8NjMmbikpOih0KDI0MHw3Jm4+PjE4KSx0KDEyOHw2MyZuPj4xMiksdCgxMjh8NjMmbj4+NiksdCgxMjh8NjMmbikpLG49bnVsbH0sZGVjb2RlVVRGODpmdW5jdGlvbihlLHQpe2Zvcih2YXIgbixpLHIscyxvPWZ1bmN0aW9uKGUpe2U9ZS5zbGljZSgwLGUuaW5kZXhPZihudWxsKSk7dmFyIHQ9RXJyb3IoZS50b1N0cmluZygpKTt0aHJvdyB0Lm5hbWU9XCJUcnVuY2F0ZWRFcnJvclwiLHQuYnl0ZXM9ZSx0fTtudWxsIT09KG49ZSgpKTspaWYoMD09KDEyOCZuKSl0KG4pO2Vsc2UgaWYoMTkyPT0oMjI0Jm4pKW51bGw9PT0oaT1lKCkpJiZvKFtuLGldKSx0KCgzMSZuKTw8Nnw2MyZpKTtlbHNlIGlmKDIyND09KDI0MCZuKSkobnVsbD09PShpPWUoKSl8fG51bGw9PT0ocj1lKCkpKSYmbyhbbixpLHJdKSx0KCgxNSZuKTw8MTJ8KDYzJmkpPDw2fDYzJnIpO2Vsc2V7aWYoMjQwIT0oMjQ4Jm4pKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIHN0YXJ0aW5nIGJ5dGU6IFwiK24pOyhudWxsPT09KGk9ZSgpKXx8bnVsbD09PShyPWUoKSl8fG51bGw9PT0ocz1lKCkpKSYmbyhbbixpLHIsc10pLHQoKDcmbik8PDE4fCg2MyZpKTw8MTJ8KDYzJnIpPDw2fDYzJnMpfX0sVVRGMTZ0b1VURjg6ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG4saT1udWxsO251bGwhPT0obj1udWxsIT09aT9pOmUoKSk7KW4+PTU1Mjk2JiZuPD01NzM0MyYmbnVsbCE9PShpPWUoKSkmJmk+PTU2MzIwJiZpPD01NzM0Mz8odCgxMDI0KihuLTU1Mjk2KStpLTU2MzIwKzY1NTM2KSxpPW51bGwpOnQobik7bnVsbCE9PWkmJnQoaSl9LFVURjh0b1VURjE2OmZ1bmN0aW9uKGUsdCl7dmFyIG49bnVsbDtmb3IoXCJudW1iZXJcIj09dHlwZW9mIGUmJihuPWUsZT1mdW5jdGlvbigpe3JldHVybiBudWxsfSk7bnVsbCE9PW58fG51bGwhPT0obj1lKCkpOyluPD02NTUzNT90KG4pOih0KDU1Mjk2Kygobi09NjU1MzYpPj4xMCkpLHQobiUxMDI0KzU2MzIwKSksbj1udWxsfSxlbmNvZGVVVEYxNnRvVVRGODpmdW5jdGlvbih0LG4pe2UuVVRGMTZ0b1VURjgodCwoZnVuY3Rpb24odCl7ZS5lbmNvZGVVVEY4KHQsbil9KSl9LGRlY29kZVVURjh0b1VURjE2OmZ1bmN0aW9uKHQsbil7ZS5kZWNvZGVVVEY4KHQsKGZ1bmN0aW9uKHQpe2UuVVRGOHRvVVRGMTYodCxuKX0pKX0sY2FsY3VsYXRlQ29kZVBvaW50OmZ1bmN0aW9uKGUpe3JldHVybiBlPDEyOD8xOmU8MjA0OD8yOmU8NjU1MzY/Mzo0fSxjYWxjdWxhdGVVVEY4OmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuPTA7bnVsbCE9PSh0PWUoKSk7KW4rPXQ8MTI4PzE6dDwyMDQ4PzI6dDw2NTUzNj8zOjQ7cmV0dXJuIG59LGNhbGN1bGF0ZVVURjE2YXNVVEY4OmZ1bmN0aW9uKHQpe3ZhciBuPTAsaT0wO3JldHVybiBlLlVURjE2dG9VVEY4KHQsKGZ1bmN0aW9uKGUpeysrbixpKz1lPDEyOD8xOmU8MjA0OD8yOmU8NjU1MzY/Mzo0fSkpLFtuLGldfX07cmV0dXJuIGV9KCkscy50b1VURjg9ZnVuY3Rpb24oZSx0KXtpZih2b2lkIDA9PT1lJiYoZT10aGlzLm9mZnNldCksdm9pZCAwPT09dCYmKHQ9dGhpcy5saW1pdCksIXRoaXMubm9Bc3NlcnQpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlfHxlJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBiZWdpbjogTm90IGFuIGludGVnZXJcIik7aWYoZT4+Pj0wLFwibnVtYmVyXCIhPXR5cGVvZiB0fHx0JTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBlbmQ6IE5vdCBhbiBpbnRlZ2VyXCIpO2lmKHQ+Pj49MCxlPDB8fGU+dHx8dD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIHJhbmdlOiAwIDw9IFwiK2UrXCIgPD0gXCIrdCtcIiA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX12YXIgaTt0cnl7Yy5kZWNvZGVVVEY4dG9VVEYxNihmdW5jdGlvbigpe3JldHVybiB0PmU/dGhpcy52aWV3W2UrK106bnVsbH0uYmluZCh0aGlzKSxpPW4oKSl9Y2F0Y2gobil7aWYoZSE9PXQpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgcmFuZ2U6IFRydW5jYXRlZCBkYXRhLCBcIitlK1wiICE9IFwiK3QpfXJldHVybiBpKCl9LGguZnJvbVVURjg9ZnVuY3Rpb24oZSxuLGkpe2lmKCFpJiZcInN0cmluZ1wiIT10eXBlb2YgZSl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIHN0cjogTm90IGEgc3RyaW5nXCIpO3ZhciByPW5ldyBoKGMuY2FsY3VsYXRlVVRGMTZhc1VURjgodChlKSwhMClbMV0sbixpKSxzPTA7cmV0dXJuIGMuZW5jb2RlVVRGMTZ0b1VURjgodChlKSwoZnVuY3Rpb24oZSl7ci52aWV3W3MrK109ZX0pKSxyLmxpbWl0PXMscn0saH0oVWk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxuKXt0aGlzLmxvdz0wfGUsdGhpcy5oaWdoPTB8dCx0aGlzLnVuc2lnbmVkPSEhbn1mdW5jdGlvbiB0KGUpe3JldHVybiEwPT09KGUmJmUuX19pc0xvbmdfXyl9ZnVuY3Rpb24gbihlLHQpe3ZhciBuLGkscztyZXR1cm4gdD8ocz0oZT4+Pj0wKT49MCYmZTwyNTYpJiYoaT11W2VdKT9pOihuPXIoZSwoMHxlKTwwPy0xOjAsITApLHMmJih1W2VdPW4pLG4pOihzPShlfD0wKT49LTEyOCYmZTwxMjgpJiYoaT1hW2VdKT9pOihuPXIoZSxlPDA/LTE6MCwhMSkscyYmKGFbZV09biksbil9ZnVuY3Rpb24gaShlLHQpe2lmKGlzTmFOKGUpfHwhaXNGaW5pdGUoZSkpcmV0dXJuIHQ/ZzpwO2lmKHQpe2lmKGU8MClyZXR1cm4gZztpZihlPj1sKXJldHVybiBFfWVsc2V7aWYoLWQ+PWUpcmV0dXJuIFQ7aWYoZSsxPj1kKXJldHVybiB2fXJldHVybiBlPDA/aSgtZSx0KS5uZWcoKTpyKDB8ZSVoLDB8ZS9oLHQpfWZ1bmN0aW9uIHIodCxuLGkpe3JldHVybiBuZXcgZSh0LG4saSl9ZnVuY3Rpb24gcyhlLHQsbil7dmFyIHIsbyxhLHUsaCxsLGQ7aWYoMD09PWUubGVuZ3RoKXRocm93IEVycm9yKFwiZW1wdHkgc3RyaW5nXCIpO2lmKFwiTmFOXCI9PT1lfHxcIkluZmluaXR5XCI9PT1lfHxcIitJbmZpbml0eVwiPT09ZXx8XCItSW5maW5pdHlcIj09PWUpcmV0dXJuIHA7aWYoXCJudW1iZXJcIj09dHlwZW9mIHQ/KG49dCx0PSExKTp0PSEhdCwobj1ufHwxMCk8Mnx8bj4zNil0aHJvdyBSYW5nZUVycm9yKFwicmFkaXhcIik7aWYoKHI9ZS5pbmRleE9mKFwiLVwiKSk+MCl0aHJvdyBFcnJvcihcImludGVyaW9yIGh5cGhlblwiKTtpZigwPT09cilyZXR1cm4gcyhlLnN1YnN0cmluZygxKSx0LG4pLm5lZygpO2ZvcihvPWkoYyhuLDgpKSxhPXAsdT0wO3U8ZS5sZW5ndGg7dSs9OCloPU1hdGgubWluKDgsZS5sZW5ndGgtdSksbD1wYXJzZUludChlLnN1YnN0cmluZyh1LHUraCksbiksaDw4PyhkPWkoYyhuLGgpKSxhPWEubXVsKGQpLmFkZChpKGwpKSk6YT0oYT1hLm11bChvKSkuYWRkKGkobCkpO3JldHVybiBhLnVuc2lnbmVkPXQsYX1mdW5jdGlvbiBvKHQpe3JldHVybiB0IGluc3RhbmNlb2YgZT90OlwibnVtYmVyXCI9PXR5cGVvZiB0P2kodCk6XCJzdHJpbmdcIj09dHlwZW9mIHQ/cyh0KTpyKHQubG93LHQuaGlnaCx0LnVuc2lnbmVkKX12YXIgYSx1LGMsaCxsLGQsZixwLGcsXyx5LG0sdixFLFQsSTtyZXR1cm4gZS5wcm90b3R5cGUuX19pc0xvbmdfXyxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJfX2lzTG9uZ19fXCIse3ZhbHVlOiEwLGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiExfSksZS5pc0xvbmc9dCxhPXt9LHU9e30sZS5mcm9tSW50PW4sZS5mcm9tTnVtYmVyPWksZS5mcm9tQml0cz1yLGM9TWF0aC5wb3csZS5mcm9tU3RyaW5nPXMsZS5mcm9tVmFsdWU9byxkPShsPShoPTQyOTQ5NjcyOTYpKmgpLzIsZj1uKDE2Nzc3MjE2KSxwPW4oMCksZS5aRVJPPXAsZz1uKDAsITApLGUuVVpFUk89ZyxfPW4oMSksZS5PTkU9Xyx5PW4oMSwhMCksZS5VT05FPXksbT1uKC0xKSxlLk5FR19PTkU9bSx2PXIoLTEsMjE0NzQ4MzY0NywhMSksZS5NQVhfVkFMVUU9dixFPXIoLTEsLTEsITApLGUuTUFYX1VOU0lHTkVEX1ZBTFVFPUUsVD1yKDAsLTIxNDc0ODM2NDgsITEpLGUuTUlOX1ZBTFVFPVQsKEk9ZS5wcm90b3R5cGUpLnRvSW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudW5zaWduZWQ/dGhpcy5sb3c+Pj4wOnRoaXMubG93fSxJLnRvTnVtYmVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudW5zaWduZWQ/KHRoaXMuaGlnaD4+PjApKmgrKHRoaXMubG93Pj4+MCk6dGhpcy5oaWdoKmgrKHRoaXMubG93Pj4+MCl9LEkudG9TdHJpbmc9ZnVuY3Rpb24oZSl7dmFyIHQsbixyLHMsbyxhLHUsaDtpZigoZT1lfHwxMCk8Mnx8ZT4zNil0aHJvdyBSYW5nZUVycm9yKFwicmFkaXhcIik7aWYodGhpcy5pc1plcm8oKSlyZXR1cm5cIjBcIjtpZih0aGlzLmlzTmVnYXRpdmUoKSlyZXR1cm4gdGhpcy5lcShUKT8odD1pKGUpLHI9KG49dGhpcy5kaXYodCkpLm11bCh0KS5zdWIodGhpcyksbi50b1N0cmluZyhlKStyLnRvSW50KCkudG9TdHJpbmcoZSkpOlwiLVwiK3RoaXMubmVnKCkudG9TdHJpbmcoZSk7Zm9yKHM9aShjKGUsNiksdGhpcy51bnNpZ25lZCksbz10aGlzLGE9XCJcIjs7KXtpZih1PW8uZGl2KHMpLGg9KG8uc3ViKHUubXVsKHMpKS50b0ludCgpPj4+MCkudG9TdHJpbmcoZSksKG89dSkuaXNaZXJvKCkpcmV0dXJuIGgrYTtmb3IoO2gubGVuZ3RoPDY7KWg9XCIwXCIraDthPVwiXCIraCthfX0sSS5nZXRIaWdoQml0cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmhpZ2h9LEkuZ2V0SGlnaEJpdHNVbnNpZ25lZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmhpZ2g+Pj4wfSxJLmdldExvd0JpdHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sb3d9LEkuZ2V0TG93Qml0c1Vuc2lnbmVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubG93Pj4+MH0sSS5nZXROdW1CaXRzQWJzPWZ1bmN0aW9uKCl7dmFyIGUsdDtpZih0aGlzLmlzTmVnYXRpdmUoKSlyZXR1cm4gdGhpcy5lcShUKT82NDp0aGlzLm5lZygpLmdldE51bUJpdHNBYnMoKTtmb3IoZT0wIT10aGlzLmhpZ2g/dGhpcy5oaWdoOnRoaXMubG93LHQ9MzE7dD4wJiYwPT0oZSYxPDx0KTt0LS0pO3JldHVybiAwIT10aGlzLmhpZ2g/dCszMzp0KzF9LEkuaXNaZXJvPWZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLmhpZ2gmJjA9PT10aGlzLmxvd30sSS5pc05lZ2F0aXZlPWZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMudW5zaWduZWQmJnRoaXMuaGlnaDwwfSxJLmlzUG9zaXRpdmU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy51bnNpZ25lZHx8dGhpcy5oaWdoPj0wfSxJLmlzT2RkPWZ1bmN0aW9uKCl7cmV0dXJuIDE9PSgxJnRoaXMubG93KX0sSS5pc0V2ZW49ZnVuY3Rpb24oKXtyZXR1cm4gMD09KDEmdGhpcy5sb3cpfSxJLmVxdWFscz1mdW5jdGlvbihlKXtyZXR1cm4gdChlKXx8KGU9byhlKSksKHRoaXMudW5zaWduZWQ9PT1lLnVuc2lnbmVkfHx0aGlzLmhpZ2g+Pj4zMSE9MXx8ZS5oaWdoPj4+MzEhPTEpJiZ0aGlzLmhpZ2g9PT1lLmhpZ2gmJnRoaXMubG93PT09ZS5sb3d9LEkuZXE9SS5lcXVhbHMsSS5ub3RFcXVhbHM9ZnVuY3Rpb24oZSl7cmV0dXJuIXRoaXMuZXEoZSl9LEkubmVxPUkubm90RXF1YWxzLEkubGVzc1RoYW49ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuY29tcChlKTwwfSxJLmx0PUkubGVzc1RoYW4sSS5sZXNzVGhhbk9yRXF1YWw9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuY29tcChlKTw9MH0sSS5sdGU9SS5sZXNzVGhhbk9yRXF1YWwsSS5ncmVhdGVyVGhhbj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5jb21wKGUpPjB9LEkuZ3Q9SS5ncmVhdGVyVGhhbixJLmdyZWF0ZXJUaGFuT3JFcXVhbD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5jb21wKGUpPj0wfSxJLmd0ZT1JLmdyZWF0ZXJUaGFuT3JFcXVhbCxJLmNvbXBhcmU9ZnVuY3Rpb24oZSl7aWYodChlKXx8KGU9byhlKSksdGhpcy5lcShlKSlyZXR1cm4gMDt2YXIgbj10aGlzLmlzTmVnYXRpdmUoKSxpPWUuaXNOZWdhdGl2ZSgpO3JldHVybiBuJiYhaT8tMTohbiYmaT8xOnRoaXMudW5zaWduZWQ/ZS5oaWdoPj4+MD50aGlzLmhpZ2g+Pj4wfHxlLmhpZ2g9PT10aGlzLmhpZ2gmJmUubG93Pj4+MD50aGlzLmxvdz4+PjA/LTE6MTp0aGlzLnN1YihlKS5pc05lZ2F0aXZlKCk/LTE6MX0sSS5jb21wPUkuY29tcGFyZSxJLm5lZ2F0ZT1mdW5jdGlvbigpe3JldHVybiF0aGlzLnVuc2lnbmVkJiZ0aGlzLmVxKFQpP1Q6dGhpcy5ub3QoKS5hZGQoXyl9LEkubmVnPUkubmVnYXRlLEkuYWRkPWZ1bmN0aW9uKGUpe3ZhciBuLGkscyxhLHUsYyxoLGwsZCxmLHA7cmV0dXJuIHQoZSl8fChlPW8oZSkpLG49dGhpcy5oaWdoPj4+MTYsaT02NTUzNSZ0aGlzLmhpZ2gscz10aGlzLmxvdz4+PjE2LGE9NjU1MzUmdGhpcy5sb3csdT1lLmhpZ2g+Pj4xNixjPTY1NTM1JmUuaGlnaCxoPWUubG93Pj4+MTYsbD0wLGQ9MCxmPTAscD0wLGYrPShwKz1hKyg2NTUzNSZlLmxvdykpPj4+MTYsZCs9KGYrPXMraCk+Pj4xNixsKz0oZCs9aStjKT4+PjE2LGwrPW4rdSxyKChmJj02NTUzNSk8PDE2fChwJj02NTUzNSksKGwmPTY1NTM1KTw8MTZ8KGQmPTY1NTM1KSx0aGlzLnVuc2lnbmVkKX0sSS5zdWJ0cmFjdD1mdW5jdGlvbihlKXtyZXR1cm4gdChlKXx8KGU9byhlKSksdGhpcy5hZGQoZS5uZWcoKSl9LEkuc3ViPUkuc3VidHJhY3QsSS5tdWx0aXBseT1mdW5jdGlvbihlKXt2YXIgbixzLGEsdSxjLGgsbCxkLGcsXyx5LG07cmV0dXJuIHRoaXMuaXNaZXJvKCk/cDoodChlKXx8KGU9byhlKSksZS5pc1plcm8oKT9wOnRoaXMuZXEoVCk/ZS5pc09kZCgpP1Q6cDplLmVxKFQpP3RoaXMuaXNPZGQoKT9UOnA6dGhpcy5pc05lZ2F0aXZlKCk/ZS5pc05lZ2F0aXZlKCk/dGhpcy5uZWcoKS5tdWwoZS5uZWcoKSk6dGhpcy5uZWcoKS5tdWwoZSkubmVnKCk6ZS5pc05lZ2F0aXZlKCk/dGhpcy5tdWwoZS5uZWcoKSkubmVnKCk6dGhpcy5sdChmKSYmZS5sdChmKT9pKHRoaXMudG9OdW1iZXIoKSplLnRvTnVtYmVyKCksdGhpcy51bnNpZ25lZCk6KG49dGhpcy5oaWdoPj4+MTYscz02NTUzNSZ0aGlzLmhpZ2gsYT10aGlzLmxvdz4+PjE2LHU9NjU1MzUmdGhpcy5sb3csYz1lLmhpZ2g+Pj4xNixoPTY1NTM1JmUuaGlnaCxsPWUubG93Pj4+MTYsZz0wLF89MCx5PTAsbT0wLHkrPShtKz11KihkPTY1NTM1JmUubG93KSk+Pj4xNixfKz0oeSs9YSpkKT4+PjE2LHkmPTY1NTM1LF8rPSh5Kz11KmwpPj4+MTYsZys9KF8rPXMqZCk+Pj4xNixfJj02NTUzNSxnKz0oXys9YSpsKT4+PjE2LF8mPTY1NTM1LGcrPShfKz11KmgpPj4+MTYsZys9bipkK3MqbCthKmgrdSpjLHIoKHkmPTY1NTM1KTw8MTZ8KG0mPTY1NTM1KSwoZyY9NjU1MzUpPDwxNnwoXyY9NjU1MzUpLHRoaXMudW5zaWduZWQpKSl9LEkubXVsPUkubXVsdGlwbHksSS5kaXZpZGU9ZnVuY3Rpb24oZSl7dmFyIG4scixzLGEsdSxoLGw7aWYodChlKXx8KGU9byhlKSksZS5pc1plcm8oKSl0aHJvdyBFcnJvcihcImRpdmlzaW9uIGJ5IHplcm9cIik7aWYodGhpcy5pc1plcm8oKSlyZXR1cm4gdGhpcy51bnNpZ25lZD9nOnA7aWYodGhpcy51bnNpZ25lZCl7aWYoZS51bnNpZ25lZHx8KGU9ZS50b1Vuc2lnbmVkKCkpLGUuZ3QodGhpcykpcmV0dXJuIGc7aWYoZS5ndCh0aGlzLnNocnUoMSkpKXJldHVybiB5O3M9Z31lbHNle2lmKHRoaXMuZXEoVCkpcmV0dXJuIGUuZXEoXyl8fGUuZXEobSk/VDplLmVxKFQpP186KG49dGhpcy5zaHIoMSkuZGl2KGUpLnNobCgxKSkuZXEocCk/ZS5pc05lZ2F0aXZlKCk/XzptOihyPXRoaXMuc3ViKGUubXVsKG4pKSxzPW4uYWRkKHIuZGl2KGUpKSk7aWYoZS5lcShUKSlyZXR1cm4gdGhpcy51bnNpZ25lZD9nOnA7aWYodGhpcy5pc05lZ2F0aXZlKCkpcmV0dXJuIGUuaXNOZWdhdGl2ZSgpP3RoaXMubmVnKCkuZGl2KGUubmVnKCkpOnRoaXMubmVnKCkuZGl2KGUpLm5lZygpO2lmKGUuaXNOZWdhdGl2ZSgpKXJldHVybiB0aGlzLmRpdihlLm5lZygpKS5uZWcoKTtzPXB9Zm9yKHI9dGhpcztyLmd0ZShlKTspe2ZvcihuPU1hdGgubWF4KDEsTWF0aC5mbG9vcihyLnRvTnVtYmVyKCkvZS50b051bWJlcigpKSksdT0oYT1NYXRoLmNlaWwoTWF0aC5sb2cobikvTWF0aC5MTjIpKTw9NDg/MTpjKDIsYS00OCksbD0oaD1pKG4pKS5tdWwoZSk7bC5pc05lZ2F0aXZlKCl8fGwuZ3Qocik7KWw9KGg9aShuLT11LHRoaXMudW5zaWduZWQpKS5tdWwoZSk7aC5pc1plcm8oKSYmKGg9Xykscz1zLmFkZChoKSxyPXIuc3ViKGwpfXJldHVybiBzfSxJLmRpdj1JLmRpdmlkZSxJLm1vZHVsbz1mdW5jdGlvbihlKXtyZXR1cm4gdChlKXx8KGU9byhlKSksdGhpcy5zdWIodGhpcy5kaXYoZSkubXVsKGUpKX0sSS5tb2Q9SS5tb2R1bG8sSS5ub3Q9ZnVuY3Rpb24oKXtyZXR1cm4gcih+dGhpcy5sb3csfnRoaXMuaGlnaCx0aGlzLnVuc2lnbmVkKX0sSS5hbmQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHQoZSl8fChlPW8oZSkpLHIodGhpcy5sb3cmZS5sb3csdGhpcy5oaWdoJmUuaGlnaCx0aGlzLnVuc2lnbmVkKX0sSS5vcj1mdW5jdGlvbihlKXtyZXR1cm4gdChlKXx8KGU9byhlKSkscih0aGlzLmxvd3xlLmxvdyx0aGlzLmhpZ2h8ZS5oaWdoLHRoaXMudW5zaWduZWQpfSxJLnhvcj1mdW5jdGlvbihlKXtyZXR1cm4gdChlKXx8KGU9byhlKSkscih0aGlzLmxvd15lLmxvdyx0aGlzLmhpZ2heZS5oaWdoLHRoaXMudW5zaWduZWQpfSxJLnNoaWZ0TGVmdD1mdW5jdGlvbihlKXtyZXR1cm4gdChlKSYmKGU9ZS50b0ludCgpKSwwPT0oZSY9NjMpP3RoaXM6ZTwzMj9yKHRoaXMubG93PDxlLHRoaXMuaGlnaDw8ZXx0aGlzLmxvdz4+PjMyLWUsdGhpcy51bnNpZ25lZCk6cigwLHRoaXMubG93PDxlLTMyLHRoaXMudW5zaWduZWQpfSxJLnNobD1JLnNoaWZ0TGVmdCxJLnNoaWZ0UmlnaHQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHQoZSkmJihlPWUudG9JbnQoKSksMD09KGUmPTYzKT90aGlzOmU8MzI/cih0aGlzLmxvdz4+PmV8dGhpcy5oaWdoPDwzMi1lLHRoaXMuaGlnaD4+ZSx0aGlzLnVuc2lnbmVkKTpyKHRoaXMuaGlnaD4+ZS0zMix0aGlzLmhpZ2g+PTA/MDotMSx0aGlzLnVuc2lnbmVkKX0sSS5zaHI9SS5zaGlmdFJpZ2h0LEkuc2hpZnRSaWdodFVuc2lnbmVkPWZ1bmN0aW9uKGUpe3ZhciBuO3JldHVybiB0KGUpJiYoZT1lLnRvSW50KCkpLDA9PShlJj02Myk/dGhpczoobj10aGlzLmhpZ2gsZTwzMj9yKHRoaXMubG93Pj4+ZXxuPDwzMi1lLG4+Pj5lLHRoaXMudW5zaWduZWQpOnIoMzI9PT1lP246bj4+PmUtMzIsMCx0aGlzLnVuc2lnbmVkKSl9LEkuc2hydT1JLnNoaWZ0UmlnaHRVbnNpZ25lZCxJLnRvU2lnbmVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudW5zaWduZWQ/cih0aGlzLmxvdyx0aGlzLmhpZ2gsITEpOnRoaXN9LEkudG9VbnNpZ25lZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnVuc2lnbmVkP3RoaXM6cih0aGlzLmxvdyx0aGlzLmhpZ2gsITApfSxJLnRvQnl0ZXM9ZnVuY3Rpb24oZSl7cmV0dXJuIGU/dGhpcy50b0J5dGVzTEUoKTp0aGlzLnRvQnl0ZXNCRSgpfSxJLnRvQnl0ZXNMRT1mdW5jdGlvbigpe3ZhciBlPXRoaXMuaGlnaCx0PXRoaXMubG93O3JldHVyblsyNTUmdCwyNTUmdD4+PjgsMjU1JnQ+Pj4xNiwyNTUmdD4+PjI0LDI1NSZlLDI1NSZlPj4+OCwyNTUmZT4+PjE2LDI1NSZlPj4+MjRdfSxJLnRvQnl0ZXNCRT1mdW5jdGlvbigpe3ZhciBlPXRoaXMuaGlnaCx0PXRoaXMubG93O3JldHVyblsyNTUmZT4+PjI0LDI1NSZlPj4+MTYsMjU1JmU+Pj44LDI1NSZlLDI1NSZ0Pj4+MjQsMjU1JnQ+Pj4xNiwyNTUmdD4+PjgsMjU1JnRdfSxlfSgpKSxVaSkpO0RpLmdldE1vZHVsZT1mdW5jdGlvbihlKXt2YXIgdD1uZXcgRGlbZV07cmV0dXJuIHQuZ2V0QXJyYXlEYXRhPWZ1bmN0aW9uKCl7dmFyIGU9dC50b0FycmF5QnVmZmVyKCk7cmV0dXJuIGU9JChlKT9bXS5zbGljZS5jYWxsKG5ldyBJbnQ4QXJyYXkoZSkpOmV9LHR9O3ZhciBWaSxraT1cInBnTXNnUFwiLHhpPVwiY2hhdE1zZ1wiLEJpPVwicGNNc2dQXCIsR2k9e1BSSVZBVEU6XCJwcE1zZ1NcIixHUk9VUDpcInBnTXNnU1wiLENIQVRST09NOlwiY2hhdE1zZ1NcIn0sRmk9XCJkZWxNc2dcIixxaT1cImpvaW5DaHJtXCIsS2k9XCJqb2luQ2hybVJcIixIaT1cImV4aXRDaHJtXCIsWWk9XCJzZXRLVlwiLGppPVwiZGVsS1ZcIixRaT1cInNldEtWU1wiLFdpPVwiZGVsS1ZTXCIsSmk9XCJxcnlSZWxhdGlvblJcIix6aT1cImRlbFJlbGF0aW9uXCIsWmk9XCJzZXRTZUF0dFwiLFhpPXtQUklWQVRFOlwiY2xlYW5QTXNnXCIsR1JPVVA6XCJjbGVhbkdNc2dcIixVTFRSQV9HUk9VUDpcImNsZWFuR01zZ1wiLENVU1RPTUVSX1NFUlZJQ0U6XCJjbGVhbkNNc2dcIixTWVNURU06XCJjbGVhblNNc2dcIn0sJGk9XCJxcnlQTXNnXCIsZXI9XCJxcnlHTXNnXCIsdHI9XCJxcnlDSE1zZ1wiLG5yPVwicXJ5Q01zZ1wiLGlyPVwicXJ5U01zZ1wiLHJyPSgoYmk9e30pW1wicHBNc2dQXCJdPWouUFJJVkFURSxiaVtraV09ai5HUk9VUCxiaVt4aV09ai5DSEFUUk9PTSxiaVtCaV09ai5DVVNUT01FUl9TRVJWSUNFLGJpKSxzcj0oKExpPXt9KVtqLlBSSVZBVEVdPSRpLExpW2ouR1JPVVBdPWVyLExpW2ouQ0hBVFJPT01dPXRyLExpW2ouQ1VTVE9NRVJfU0VSVklDRV09bnIsTGlbai5TWVNURU1dPWlyLExpKSxvcj0oKFBpPXt9KVtqLlBSSVZBVEVdPVhpLlBSSVZBVEUsUGlbai5HUk9VUF09WGkuR1JPVVAsUGlbai5VTFRSQV9HUk9VUF09WGkuVUxUUkFfR1JPVVAsUGlbai5DVVNUT01FUl9TRVJWSUNFXT1YaS5DVVNUT01FUl9TRVJWSUNFLFBpW2ouU1lTVEVNXT1YaS5TWVNURU0sUGkpLGFyPVwiMVwiLHVyPVwiMFwiLGNyPTEsaHI9Mixscj0zLGRyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLl9jb2RlYz1cIndlYnNvY2tldFwiPT09ZT9EaTpOaSx0aGlzLl9jb25uZWN0VHlwZT1lfXJldHVybiBlLnByb3RvdHlwZS5kZWNvZGVCeVBCTmFtZT1mdW5jdGlvbihlLHQsbil7dmFyIGkscj10aGlzLHM9ZSxvPSgoaT17fSlbUHRdPXIuX2Zvcm1hdFN5bmNNZXNzYWdlcyxpW0x0XT1yLl9mb3JtYXRSZWNlaXZlZE1lc3NhZ2UsaVtVdF09ci5fZm9ybWF0U2VudE1lc3NhZ2UsaVtGdF09ci5fZm9ybWF0SGlzdG9yeU1lc3NhZ2VzLGlbS3RdPXIuX2Zvcm1hdENvbnZlcnNhdGlvbkxpc3QsaVtlbl09ci5fZm9ybWF0Q2hhdFJvb21JbmZvcyxpW25uXT1yLl9mb3JtYXRSVENVc2VyTGlzdCxpW2xuXT1yLl9mb3JtYXRSVENEYXRhLGlbTW5dPXIuX2Zvcm1hdENoYXRSb29tS1ZMaXN0LGlbVm5dPXIuX2Zvcm1hdFVzZXJTZXR0aW5nLGlbQm5dPXIuX2Zvcm1hdENvbnZlcnNhdGlvblN0YXR1cyxpW2puXT1yLl9mb3JtYXRHcnBSZWFkUmVjZWlwdFFyeVJlc3AsaVtQbl09ci5fZm9ybWF0U2V0VXNlclNldHRpbmdPdXRwdXQsaVtrbl09ci5fZm9ybWF0VXNlclNldHRpbmdOb3RpZmljYXRpb24saVtzaV09ci5fZm9ybWF0VWx0cmFNc2dDaGFuZ2VMaXN0LGlbaGldPXIuX2Zvcm1hdFVsdHJhT3BlcmF0ZVN0YXR1c05vdGlmeUxpc3QsaVt1aV09ci5fZm9ybWF0VWx0cmFNc2dMaXN0LGlbWHRdPXIuX2Zvcm1hdENocm1LVlZlcnNpb24saVtnaV09ci5fZm9ybWF0UlRDUm9vbUtWTGlzdCxpW2huXT1yLl9mb3JtYXRSVENBdWlkZW5jZUpvaW5Sb29tRGF0YSxpW3lpXT1yLl9mb3JtYXRSVENKb2luZWRVc2VySW5mbyxpKVt0XTt0cnl7cz1lLmxlbmd0aD4wJiZyLl9jb2RlY1t0XS5kZWNvZGUoZSksbmUocykmJihzPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCBpbiBlKW5lKGVbdF0pJiYoZVt0XT1zdChlW3RdKSk7cmV0dXJuIGV9KHMpKSxpZShvKSYmKHM9by5jYWxsKHRoaXMscyxuKSl9Y2F0Y2gobil7Z2UuZXJyb3IoXCJQQiBwYXJzZSBlcnJvclxcblwiLG4sZSx0KX1yZXR1cm4gc30sZS5wcm90b3R5cGUuX3JlYWRCeXRlcz1mdW5jdGlvbihlKXt2YXIgdD1lLm9mZnNldCxuPWUuYnVmZmVyLGk9ZS5saW1pdDtpZih0KXRyeXt2YXIgcj0kKG4pP25ldyBVaW50OEFycmF5KG4pOm47cmV0dXJuIE10LnJlYWRVVEYoci5zdWJhcnJheSh0LGkpKX1jYXRjaChlKXtnZS5pbmZvKFwicmVhZEJ5dGVzIGVycm9yXFxuXCIsZSl9cmV0dXJuIGV9LGUucHJvdG90eXBlLl9mb3JtYXRCeXRlcz1mdW5jdGlvbihlKXtpZighZSlyZXR1cm4gZTt2YXIgdD10aGlzLl9yZWFkQnl0ZXMoZSk7dHJ5e3Q9SlNPTi5wYXJzZSh0KX1jYXRjaChlKXtnZS5pbmZvKFwiZm9ybWF0Qnl0ZXMgZXJyb3JcXG5cIixlKX1yZXR1cm4gdHx8ZX0sZS5wcm90b3R5cGUuX2Zvcm1hdFN5bmNNZXNzYWdlcz1mdW5jdGlvbihlLHQpe3Q9dHx8e307dmFyIG49dGhpcyxpPWUubGlzdCxyPWUuc3luY1RpbWUscz1lLmZpbmlzaGVkO3JldHVybihyZShzKXx8bnVsbD09PXMpJiYoZS5maW5pc2hlZD0hMCksZS5zeW5jVGltZT1zdChyKSxlLmxpc3Q9ZnQoaSwoZnVuY3Rpb24oZSl7cmV0dXJuIG4uX2Zvcm1hdFJlY2VpdmVkTWVzc2FnZShlLHQpfSkpLGV9LGUucHJvdG90eXBlLl9mb3JtYXRSZWNlaXZlZE1lc3NhZ2U9ZnVuY3Rpb24oZSx0KXtpZighZSlyZXR1cm4gZTt2YXIgbj0odD10fHx7fSkuY3VycmVudFVzZXJJZCxyPXQuY29ubmVjdGVkVGltZSxzPWUuY29udGVudCxvPWUuZnJvbVVzZXJJZCxhPWUudHlwZSx1PWUuZ3JvdXBJZCxjPWUuc3RhdHVzLGg9ZS5kYXRhVGltZSxsPWUuY2xhc3NuYW1lLGQ9ZS5tc2dJZCxmPWUuZXh0cmFDb250ZW50LHA9ZS5wdXNoQ29udGVudCxnPWUucHVzaEV4dCxfPWUuY29uZmlnRmxhZyx5PWUuZXh0U3RhdHVzLG09KGUuZGlyZWN0aW9ufHxtZS5SRUNFSVZFKT09PW1lLlNFTkQsdj1mdW5jdGlvbihlKXt2YXIgdD1pLlJFQUQ7cmV0dXJue2lzUGVyc2l0ZWQ6ISEoMTYmZSksaXNDb3VudGVkOiEhKDMyJmUpLGlzTWVudGlvbmVkOiEhKDY0JmUpLGRpc2FibGVOb3RpZmljYXRpb246ISEoNTEyJmUpLHJlY2VpdmVkU3RhdHVzOnQ9MiZlP2kuUkVUUklFVkVEOnQsY2FuSW5jbHVkZUV4cGFuc2lvbjohISgxMDI0JmUpfX0oYyksRT12LmlzUGVyc2l0ZWQsVD12LmlzQ291bnRlZCxJPXYuaXNNZW50aW9uZWQsQz12LmRpc2FibGVOb3RpZmljYXRpb24sUj12LnJlY2VpdmVkU3RhdHVzLFM9di5jYW5JbmNsdWRlRXhwYW5zaW9uLE49ISEoMiYoeXx8MCkpLE09ISEoNCYoeXx8MCkpLHc9W2ouR1JPVVAsai5DSEFUUk9PTSxqLlJUQ19ST09NLGouVUxUUkFfR1JPVVBdLmluZGV4T2YoYSk+LTE/dTpvLEE9bT9uOm8sVT1zdChoKSxiPVU8cixMPWE9PT1qLkNIQVRST09NLFA9dGhpcy5fZm9ybWF0Qnl0ZXMocyksRD17fTtpZihnJiYoRD1jdChnLnB1c2hDb25maWdzLGcucHVzaElkKSksUC51c2VyKXt2YXIgVj1QLnVzZXIsaz1WLnBvcnRyYWl0LHg9Vi5wb3J0cmFpdFVyaSxCPWt8fHg7QiYmKFAudXNlci5wb3J0cmFpdD1QLnVzZXIucG9ydHJhaXRVcmk9Qil9dmFyIEcsRj1PKE8oe30sRCkse3B1c2hUaXRsZTpudWxsPT1nP3ZvaWQgMDpnLnRpdGxlLHB1c2hDb250ZW50OnAscHVzaERhdGE6cCxkaXNhYmxlUHVzaFRpdGxlOiEhXyYmQm9vbGVhbig0Jl8pLGZvcmNlU2hvd0RldGFpbENvbnRlbnQ6ISFfJiZCb29sZWFuKDgmXyksdGVtcGxhdGVJZDpudWxsPT1nP3ZvaWQgMDpnLnRlbXBsYXRlSWR9KSxxPW0/bWUuU0VORDptZS5SRUNFSVZFO0wmJm89PT1uJiYocT1tZS5TRU5EKSxmJiYoRz17fSxHPUN0KGYpKTt2YXIgSz17Y29udmVyc2F0aW9uVHlwZTphLHRhcmdldElkOncsc2VuZGVyVXNlcklkOkEsbWVzc2FnZVR5cGU6bCxtZXNzYWdlVUlkOmQsaXNQZXJzaXRlZDpFLGlzQ291bnRlZDpULGlzTWVudGlvbmVkOkksc2VudFRpbWU6VSxtZXNzYWdlRGlyZWN0aW9uOnEscmVjZWl2ZWRUaW1lOlJ0LmdldFRpbWUoKSxkaXNhYmxlTm90aWZpY2F0aW9uOkMscmVjZWl2ZWRTdGF0dXM6UixjYW5JbmNsdWRlRXhwYW5zaW9uOlMsY29udGVudDpQLGV4cGFuc2lvbjpHLGNvbmZpZ0ZsYWc6XyxwdXNoQ29uZmlnOkYsY2hhbm5lbElkOmUuYnVzQ2hhbm5lbHx8XCJcIixpc0ludGVycnVwdDpOLGlzTW9kaWZ5TWVzc2FnZTpNfTtyZXR1cm4gYSE9PWouVUxUUkFfR1JPVVAmJihLLmlzT2ZmTGluZU1lc3NhZ2U9YiksS30sZS5wcm90b3R5cGUuX2Zvcm1hdFNlbnRNZXNzYWdlPWZ1bmN0aW9uKGUsdCl7dmFyIG4saT1lLmNvbnRlbnQscj1lLmNsYXNzbmFtZSxzPWUuc2Vzc2lvbklkLG89ZS5tc2dJZCxhPWUuZXh0cmFDb250ZW50LHU9ZS5wdXNoRXh0LGM9ZS5wdXNoQ29udGVudCxoPWUuY29uZmlnRmxhZyxsPWUuZXh0U3RhdHVzLGQ9dC5zaWduYWwsZj10LmN1cnJlbnRVc2VySWQscD1kLmRhdGUsZz1kLnRvcGljLF89ZC50YXJnZXRJZCx5PSEhKDImKGx8fDApKSxtPWZ1bmN0aW9uKGUpe3JldHVybntpc1BlcnNpdGVkOiEhKDEmZSksaXNDb3VudGVkOiEhKDImZSksZGlzYWJsZU5vdGlmaWNhdGlvbjohISgzMiZlKSxjYW5JbmNsdWRlRXhwYW5zaW9uOiEhKDY0JmUpfX0ocyksdj1tLmlzUGVyc2l0ZWQsRT1tLmlzQ291bnRlZCxUPW0uZGlzYWJsZU5vdGlmaWNhdGlvbixJPW0uY2FuSW5jbHVkZUV4cGFuc2lvbixDPXJyW2ddfHxqLlBSSVZBVEUsUj1fdChHaSxnKSxTPXRoaXMuX2Zvcm1hdEJ5dGVzKGkpLE49XztyPT09U2UuUkVDQUxMJiYoQz1TLmNvbnZlcnNhdGlvblR5cGV8fEMsTj1TLnRhcmdldElkfHxfKSxhJiYobj17fSxuPUN0KGEpKTt2YXIgTT17fTt1JiYoTT1jdCh1LnB1c2hDb25maWdzLHUucHVzaElkKSk7dmFyIHc9TyhPKHt9LE0pLHtwdXNoVGl0bGU6bnVsbD09dT92b2lkIDA6dS50aXRsZSxwdXNoQ29udGVudDpjLHB1c2hEYXRhOmMsZGlzYWJsZVB1c2hUaXRsZTohIWgmJkJvb2xlYW4oNCZoKSxmb3JjZVNob3dEZXRhaWxDb250ZW50OiEhaCYmQm9vbGVhbig4JmgpLHRlbXBsYXRlSWQ6bnVsbD09dT92b2lkIDA6dS50ZW1wbGF0ZUlkfSk7cmV0dXJue2NvbnZlcnNhdGlvblR5cGU6Qyx0YXJnZXRJZDpOLG1lc3NhZ2VUeXBlOnIsbWVzc2FnZVVJZDpvLGlzUGVyc2l0ZWQ6dixpc0NvdW50ZWQ6RSxpc1N0YXR1c01lc3NhZ2U6UixzZW5kZXJVc2VySWQ6Zixjb250ZW50OnRoaXMuX2Zvcm1hdEJ5dGVzKGkpLHNlbnRUaW1lOjFlMypwLHJlY2VpdmVkVGltZTpSdC5nZXRUaW1lKCksbWVzc2FnZURpcmVjdGlvbjptZS5TRU5ELGlzT2ZmTGluZU1lc3NhZ2U6ITEsZGlzYWJsZU5vdGlmaWNhdGlvbjpULGNhbkluY2x1ZGVFeHBhbnNpb246SSxleHBhbnNpb246bixwdXNoQ29uZmlnOncsY2hhbm5lbElkOmUuYnVzQ2hhbm5lbHx8XCJcIixpc0ludGVycnVwdDp5fX0sZS5wcm90b3R5cGUuX2Zvcm1hdEhpc3RvcnlNZXNzYWdlcz1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMsaT10LmNvbnZlcnNhdGlvbnx8e30scj1lLmxpc3Qscz1lLmhhc01zZyxvPWkudGFyZ2V0SWQsYT1zdChlLnN5bmNUaW1lKSx1PVtdO3JldHVybiBkdChyLChmdW5jdGlvbihlKXt2YXIgcj1uLl9mb3JtYXRSZWNlaXZlZE1lc3NhZ2UoZSx0KTtpLmNvbnZlcnNhdGlvblR5cGU9PT1qLlVMVFJBX0dST1VQP3IudGFyZ2V0SWQ9ZS5ncm91cElkfHxpLnRhcmdldElkOnIudGFyZ2V0SWQ9byx1LnB1c2gocil9KSx7aXNSZXZlcnNlOiEwfSkse3N5bmNUaW1lOmEsbGlzdDp1LGhhc01vcmU6ISFzfX0sZS5wcm90b3R5cGUuX2Zvcm1hdFVsdHJhTXNnQ2hhbmdlTGlzdD1mdW5jdGlvbihlKXt2YXIgdD1lLmxpc3Qsbj1lLnN5bmNUaW1lLGk9ZS5oYXNOZXh0O3JldHVybntzeW5jVGltZTpuLGxpc3Q6dCYmdC5tYXAoKGZ1bmN0aW9uKGUpe3ZhciB0PWUudGFyZ2V0SWQsbj1lLnR5cGUsaT1lLnRpbWUscj1lLmNoYW5nZVR5cGUscz1lLm1zZ1VJRCxvPWUubXNnVGltZSxhPWUuYnVzQ2hhbm5lbCx1PWUuaXNBZG1pbixjPWUuaXNEZWwsaD1lLm9wZXJhdG9ySWQ7cmV0dXJue3RhcmdldElkOnQsY29udmVyc2F0aW9uVHlwZTpuLGNoYW5nZVR5cGU6cixtZXNzYWdlVUlkOnMsY2hhbmdlVGltZTpzdChpKSxzZW5kVGltZTpzdChvKSxjaGFubmVsSWQ6YSxpc0FkbWluOnUsaXNEZWw6YyxvcGVyYXRvcklkOmh9fSkpLGhhc05leHQ6aX19LGUucHJvdG90eXBlLl9mb3JtYXRVbHRyYU9wZXJhdGVTdGF0dXNOb3RpZnlMaXN0PWZ1bmN0aW9uKGUpe3ZhciB0PWUudHlwZSxuPWUubm90aWZ5VHlwZSxpPWUuaW5mbyxyPWUuc3VtbWFyeSxzPVtdLG89W10sYT0yPT0oMiZuKSx1PTE9PSgxJm4pO3JldHVybiB1JiZBcnJheS5pc0FycmF5KGkpJiZpLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0PWUudGFyZ2V0SWQsbj1lLmJ1c0NoYW5uZWwsaT1lLnVzZXJJZCxyPWUub3BUeXBlLG89ZS5vcHRpbWUsYT1zdChvKTtzLnB1c2goe3RhcmdldElkOnQsY2hhbm5lbElkOm4sdXNlcklkOmksb3BlcmF0aW9uVHlwZTpyLG9wZXJhdGlvblRpbWU6YX0pfSkpLGEmJkFycmF5LmlzQXJyYXkocikmJnIuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHQ9ZS50YXJnZXRJZCxuPWUuYnVzQ2hhbm5lbCxpPWUuY291bnQscj1lLm9wVHlwZTtvLnB1c2goe3RhcmdldElkOnQsY2hhbm5lbElkOm4sY291bnQ6aSxvcGVyYXRpb25UeXBlOnJ9KX0pKSx7Y29udmVyc2F0aW9uVHlwZTp0LGluZm86cyxzdW1tYXJ5Om8saGFzSW5mbzp1LGhhc1N1bW1hcnk6YX19LGUucHJvdG90eXBlLl9mb3JtYXRVbHRyYU1zZ0xpc3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLGk9ZS5saXN0O3JldHVybntsaXN0OmkmJmkubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gbi5fZm9ybWF0UmVjZWl2ZWRNZXNzYWdlKGUsdCl9KSl9fSxlLnByb3RvdHlwZS5fZm9ybWF0Q29udmVyc2F0aW9uTGlzdD1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMsaT1lLmluZm8scj10LmFmdGVyRGVjb2RlfHxmdW5jdGlvbigpe30scz17bGlzdDppPWZ0KGksKGZ1bmN0aW9uKGUpe3ZhciBpPWUubXNnLHM9ZS51c2VySWQsbz1lLnR5cGUsYT1lLnVucmVhZENvdW50LHU9ZS5idXNDaGFubmVsLGM9ZS52ZXJzaW9uVGltZSxoPWUucmVtaW5kQ291bnQsbD1udWxsO2kmJigobD1uLl9mb3JtYXRSZWNlaXZlZE1lc3NhZ2UoaSx0KSkudGFyZ2V0SWQ9cyk7dmFyIGQ9e3RhcmdldElkOnMsY29udmVyc2F0aW9uVHlwZTpvLHVucmVhZE1lc3NhZ2VDb3VudDpzdChhKXx8MCxsYXRlc3RNZXNzYWdlOmx8fHt9LGNoYW5uZWxJZDp1fHxcIlwifTtyZXR1cm4gbz09PWouVUxUUkFfR1JPVVAmJihkLnZlcnNpb25UaW1lPXN0KGMpfHwwLGQudW5yZWFkTWVudGlvbmVkQ291bnQ9c3QoaCl8fDApLHIoZCl8fGR9KSl9O3JldHVybigobnVsbD09dD92b2lkIDA6dC5jb252ZXJzYXRpb25UeXBlKXx8ai5OT05FKT09PWouVUxUUkFfR1JPVVAmJihzLmlzRmluaXNoZWQ9ZS5pc0ZpbmlzaGVkKSxzfSxlLnByb3RvdHlwZS5fZm9ybWF0U2V0VXNlclNldHRpbmdPdXRwdXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGV9LGUucHJvdG90eXBlLl9mb3JtYXRDaGF0Um9vbUluZm9zPWZ1bmN0aW9uKGUpe3ZhciB0PWUudXNlclRvdGFsTnVtcyxuPWUudXNlckluZm9zO3JldHVybnt1c2VyQ291bnQ6dCx1c2VySW5mb3M6ZnQobiwoZnVuY3Rpb24oZSl7dmFyIHQ9ZS5pZCxuPWUudGltZTtyZXR1cm57aWQ6dCx0aW1lOnN0KG4pfX0pKX19LGUucHJvdG90eXBlLl9mb3JtYXRDaGF0Um9vbUtWTGlzdD1mdW5jdGlvbihlKXt2YXIgdD1lLmVudHJpZXMsbj1lLmJGdWxsVXBkYXRlLGk9ZS5zeW5jVGltZTtyZXR1cm57a3ZFbnRyaWVzOnQ9ZnQodD10fHxbXSwoZnVuY3Rpb24oZSl7dmFyIHQ9ZS5rZXksbj1lLnZhbHVlLGk9ZS5zdGF0dXMscj1lLnRpbWVzdGFtcCxzPWUudWlkLG89ZS52ZXJzaW9uLGE9ZnVuY3Rpb24oZSl7cmV0dXJue2lzQXV0b0RlbGV0ZTohISgxJmUpLGlzT3ZlcndyaXRlOiEhKDImZSksdHlwZTo0JmU/TGUuREVMRVRFOkxlLlVQREFURX19KGkpO3JldHVybntrZXk6dCx2YWx1ZTpuLGlzQXV0b0RlbGV0ZTphLmlzQXV0b0RlbGV0ZSxpc092ZXJ3cml0ZTphLmlzT3ZlcndyaXRlLHR5cGU6YS50eXBlLHVzZXJJZDpzLHRpbWVzdGFtcDpzdChyKSx2ZXJzaW9uOnN0KG8pfX0pKSxpc0Z1bGxVcGRhdGU6bixzeW5jVGltZTppfX0sZS5wcm90b3R5cGUuX2Zvcm1hdFVzZXJTZXR0aW5nPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLml0ZW1zLGk9ZS52ZXJzaW9uLHI9e307cmV0dXJuIGR0KG58fFtdLChmdW5jdGlvbihlKXt2YXIgbj1lLmtleSxpPWUudmVyc2lvbixzPWUudmFsdWU7ZS52ZXJzaW9uPXN0KGkpLGUudmFsdWU9dC5fcmVhZEJ5dGVzKHMpLFwiVGFnXCI9PT1uJiZlLnRhZ3MuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZS5jcmVhdGVkVGltZT1zdChlLmNyZWF0ZWRUaW1lKSxlLnRhZ05hbWU9ZS5uYW1lfSkpLHJbbl09ZX0pKSx7c2V0dGluZ3M6cix2ZXJzaW9uOml9fSxlLnByb3RvdHlwZS5fZm9ybWF0Q29udmVyc2F0aW9uU3RhdHVzPWZ1bmN0aW9uKGUpe3ZhciB0PWUuc3RhdGUsbj1bXTtyZXR1cm4gZHQodCwoZnVuY3Rpb24oZSl7dmFyIHQ9ZS50eXBlLGk9ZS5jaGFubmVsSWQscj1lLnRpbWUscz1lLnN0YXRlSXRlbSxvPWUuYnVzQ2hhbm5lbCxhPU9lLkNMT1NFLHU9ITEsYz1bXTtkdChzLChmdW5jdGlvbihlKXt2YXIgdD1lLnNlc3Npb25TdGF0ZVR5cGUsbj1lLnZhbHVlLGk9ZS50YWdzO3N3aXRjaCh0KXtjYXNlIGNyOmE9bj09PWFyP09lLk9QRU46T2UuQ0xPU0U7YnJlYWs7Y2FzZSBocjp1PW49PT1hcjticmVhaztjYXNlIGxyOmM9aX19KSksbi5wdXNoKHtjb252ZXJzYXRpb25UeXBlOnQsdHlwZTp0LHRhcmdldElkOmksbm90aWZpY2F0aW9uU3RhdHVzOmEsaXNUb3A6dSx1cGRhdGVkVGltZTpzdChyKSx0YWdzOmMsY2hhbm5lbElkOm98fFwiXCJ9KX0pKSxufSxlLnByb3RvdHlwZS5fZm9ybWF0UlRDVXNlckxpc3Q9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS51c2VycyxuPWUudG9rZW4saT1lLnNlc3Npb25JZCxyPWUucm9vbUluZm8scz1lLmVudHJpZXMsbz17fTtyZXR1cm4gZHQodCwoZnVuY3Rpb24oZSl7dmFyIHQ9ZS51c2VySWQsbj1lLnVzZXJEYXRhLGk9e307ZHQobiwoZnVuY3Rpb24oZSl7dmFyIHQ9ZS5rZXksbj1lLnZhbHVlO2lbdF09bn0pKSxvW3RdPWl9KSkse3VzZXJzOm8sdG9rZW46bixzZXNzaW9uSWQ6aSxyb29tSW5mbzpyLGt2RW50cmllczpzfX0sZS5wcm90b3R5cGUuX2Zvcm1hdFJUQ0RhdGE9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5vdXRJbmZvLG49e307cmV0dXJuIGR0KHQsKGZ1bmN0aW9uKGUpe25bZS5rZXldPWUudmFsdWV9KSksbn0sZS5wcm90b3R5cGUuX2Zvcm1hdFJUQ1Jvb21JbmZvPWZ1bmN0aW9uKGUpe3ZhciB0PWUucm9vbUlkLG49ZS51c2VyQ291bnQsaT1lLnJvb21EYXRhLHI9e2lkOnQsdG90YWw6bn07cmV0dXJuIGR0KGksKGZ1bmN0aW9uKGUpe3JbZS5rZXldPWUudmFsdWV9KSkscn0sZS5wcm90b3R5cGUuX2Zvcm1hdEdycFJlYWRSZWNlaXB0UXJ5UmVzcD1mdW5jdGlvbihlKXt2YXIgdD1lLnRvdGFsTWVtYmVyTnVtLG49ZS5saXN0O3JldHVybiBuLmZvckVhY2goKGZ1bmN0aW9uKGUpe2UucmVhZFRpbWU9c3QoZS5yZWFkVGltZSl9KSkse3RvdGFsTWVtYmVyQ291bnQ6dCxsaXN0Om59fSxlLnByb3RvdHlwZS5fZm9ybWF0VXNlclNldHRpbmdOb3RpZmljYXRpb249ZnVuY3Rpb24oZSl7cmV0dXJuIGV9LGUucHJvdG90eXBlLl9mb3JtYXRSVENSb29tS1ZMaXN0PWZ1bmN0aW9uKGUpe3ZhciB0PWUuZW50cmllcyxuPWUuYkZ1bGxVcGRhdGUsaT1lLnN5bmNUaW1lO3JldHVybntrdkVudHJpZXM6dD0odD10fHxbXSkubWFwKChmdW5jdGlvbihlKXt2YXIgdD1lLnRpbWVzdGFtcDtyZXR1cm4gT2JqZWN0LmFzc2lnbihlLHt0aW1lc3RhbXA6c3QodCl9KX0pKSxpc0Z1bGxVcGRhdGU6bixzeW5jVGltZTppfX0sZS5wcm90b3R5cGUuX2Zvcm1hdENocm1LVlZlcnNpb249ZnVuY3Rpb24oZSl7cmV0dXJuIGV9LGUucHJvdG90eXBlLl9mb3JtYXRSVENBdWlkZW5jZUpvaW5Sb29tRGF0YT1mdW5jdGlvbihlKXtyZXR1cm4gZX0sZS5wcm90b3R5cGUuX2Zvcm1hdFJUQ0pvaW5lZFVzZXJJbmZvPWZ1bmN0aW9uKGUpe3JldHVybihlLmluZm98fFtdKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybntkZXZpY2VJZDplLmRldmljZUlkLHJvb21JZDplLnJvb21JZCxqb2luVGltZTpzdChlLmpvaW5UaW1lKX19KSl9LGUucHJvdG90eXBlLmVuY29kZVNlcnZlckNvbmZQYXJhbXM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9jb2RlYy5nZXRNb2R1bGUoRHQpO3JldHVybiBlLnNldE5vdGhpbmcoMSksZS5nZXRBcnJheURhdGEoKX0sZS5wcm90b3R5cGUuX2dldFVwTXNnTW9kdWxlPWZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLHM9XCJjb21ldFwiPT09dGhpcy5fY29ubmVjdFR5cGUsbz1lLmNvbnZlcnNhdGlvblR5cGUsYT10Lm1lc3NhZ2VUeXBlLHU9dC5pc01lbnRpb25lZCxjPXQubWVudGlvbmVkVHlwZSxoPXQubWVudGlvbmVkVXNlcklkTGlzdCxsPXQuY29udGVudCxkPXQucHVzaENvbnRlbnQsZj10LnB1c2hEYXRhLHA9dC5kaXJlY3Rpb25hbFVzZXJJZExpc3QsZz10LmlzRmlsZXJXaGl0ZUJsYWNrbGlzdCxfPXQuaXNWb2lwUHVzaCx5PXQuY2FuSW5jbHVkZUV4cGFuc2lvbixtPXQuZXhwYW5zaW9uLHY9dC5wdXNoQ29uZmlnLEU9dC5jaGFubmVsSWQ7W2ouR1JPVVAsai5VTFRSQV9HUk9VUF0uaW5jbHVkZXMobyk7dmFyIFQ9dGhpcy5fY29kZWMuZ2V0TW9kdWxlKFV0KSxJPWZ1bmN0aW9uKGUpe3ZhciB0PWUuaXNTdGF0dXNNZXNzYWdlLG49ZS5pc1BlcnNpdGVkLGk9ZS5pc0NvdW50ZWQ7dCYmKG49aT0hMSk7dmFyIHI9MDtyZXR1cm4gbiYmKHJ8PTEpLGkmJihyfD0yKSxlLmlzTWVudGlvbmVkJiYocnw9NCksZS5kaXNhYmxlTm90aWZpY2F0aW9uJiYocnw9MzIpLGUuY2FuSW5jbHVkZUV4cGFuc2lvbiYmKHJ8PTY0KSxyfSh0KSxDPXZ8fHt9LFI9Qy5wdXNoVGl0bGUsUz1DLnB1c2hDb250ZW50LE49Qy5wdXNoRGF0YSxPPUMuaU9TQ29uZmlnLE09Qy5hbmRyb2lkQ29uZmlnLHc9Qy50ZW1wbGF0ZUlkLEE9Qy5kaXNhYmxlUHVzaFRpdGxlLFU9Qy5mb3JjZVNob3dEZXRhaWxDb250ZW50LGI9MDtULnNldFNlc3Npb25JZChJKSx1JiZsJiYobC5tZW50aW9uZWRJbmZvPXt1c2VySWRMaXN0OihudWxsPT09KG49bC5tZW50aW9uZWRJbmZvKXx8dm9pZCAwPT09bj92b2lkIDA6bi51c2VySWRMaXN0KXx8aHx8W10sdHlwZToobnVsbD09PShpPWwubWVudGlvbmVkSW5mbyl8fHZvaWQgMD09PWk/dm9pZCAwOmkudHlwZSl8fGN8fHdlLkFMTCxtZW50aW9uZWRDb250ZW50OihudWxsPT09KHI9bC5tZW50aW9uZWRJbmZvKXx8dm9pZCAwPT09cj92b2lkIDA6ci5tZW50aW9uZWRDb250ZW50KXx8XCJcIn0pO3ZhciBMPVN8fGR8fFwiXCIsUD1OfHxmfHxcIlwiO2lmKEwmJlQuc2V0UHVzaFRleHQoTCksUCYmVC5zZXRBcHBEYXRhKFApLHAmJlQuc2V0VXNlcklkKHApLGJ8PV8/MTowLGJ8PWc/MjowLGJ8PUE/NDowLGJ8PVU/ODowLFQuc2V0Q29uZmlnRmxhZyhiKSxULnNldENsYXNzbmFtZShhKSxsLnVzZXImJmwudXNlci5wb3J0cmFpdFVyaSYmKGwudXNlci5wb3J0cmFpdD1sLnVzZXIucG9ydHJhaXRVcmkpLFQuc2V0Q29udGVudChKU09OLnN0cmluZ2lmeShsKSkseSYmbSl7dmFyIEQ9e307ZHQobSwoZnVuY3Rpb24oZSx0KXtEW3RdPXt2OmV9fSkpLFQuc2V0RXh0cmFDb250ZW50KEpTT04uc3RyaW5naWZ5KEQpKX1pZih2KXt2YXIgVj10aGlzLl9jb2RlYy5nZXRNb2R1bGUoYnQpO2lmKFImJlYuc2V0VGl0bGUoUiksTyYmTSl7dmFyIGs9dXQoTyxNKTtWLnNldFB1c2hDb25maWdzKGspfShudWxsPT1NP3ZvaWQgMDpNLm5vdGlmaWNhdGlvbklkKSYmVi5zZXRQdXNoSWQobnVsbD09TT92b2lkIDA6TS5ub3RpZmljYXRpb25JZCksVi5zZXRUZW1wbGF0ZUlkKHd8fFwiXCIpLFQuc2V0UHVzaEV4dChzP1YuZ2V0QXJyYXlEYXRhKCk6Vil9cmV0dXJuIHJlKEUpfHxULnNldEJ1c0NoYW5uZWwoRSksVH0sZS5wcm90b3R5cGUuZW5jb2RlVXBNc2c9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5fZ2V0VXBNc2dNb2R1bGUoZSx0KS5nZXRBcnJheURhdGEoKX0sZS5wcm90b3R5cGUuZW5jb2RlU3luY01zZz1mdW5jdGlvbihlKXt2YXIgdD1lLnNlbmRib3hUaW1lLG49ZS5pbmJveFRpbWUsaT10aGlzLl9jb2RlYy5nZXRNb2R1bGUoa3QpO3JldHVybiBpLnNldElzcG9sbGluZyghMSksaS5zZXRJc1B1bGxTZW5kKCEwKSxpLnNldFNlbmRCb3hTeW5jVGltZSh0KSxpLnNldFN5bmNUaW1lKG4pLGkuZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLmVuY29kZUNocm1TeW5jTXNnPWZ1bmN0aW9uKGUsdCl7ZT1lfHwwLHQ9dHx8MDt2YXIgbj10aGlzLl9jb2RlYy5nZXRNb2R1bGUoeHQpO3JldHVybiBuLnNldENvdW50KHQpLG4uc2V0U3luY1RpbWUoZSksbi5nZXRBcnJheURhdGEoKX0sZS5wcm90b3R5cGUuZW5jb2RlR2V0SGlzdG9yeU1zZz1mdW5jdGlvbihlLHQpe3ZhciBuPXQuY291bnQsaT10Lm9yZGVyLHI9dC50aW1lc3RhbXAscz10LmNoYW5uZWxJZCxvPXRoaXMuX2NvZGVjLmdldE1vZHVsZShHdCk7cmV0dXJuIG8uc2V0VGFyZ2V0SWQoZSksby5zZXRUaW1lKHIpLG8uc2V0Q291bnQobiksby5zZXRPcmRlcihpKSxvLnNldEJ1c0NoYW5uZWwoc3x8XCJcIiksby5nZXRBcnJheURhdGEoKX0sZS5wcm90b3R5cGUuZW5jb2RlU3VwZXJTeW5jTXNnPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2NvZGVjLmdldE1vZHVsZSh0aSk7cmV0dXJuIHQuc2V0U3luY1RpbWUoZSksdC5nZXRBcnJheURhdGEoKX0sZS5wcm90b3R5cGUuZW5jb2RlR2V0Q29udmVyc2F0aW9uTGlzdD1mdW5jdGlvbihlKXt2YXIgdD0oZT1lfHx7fSkuY291bnQsbj1lLnN0YXJ0VGltZSxpPXRoaXMuX2NvZGVjLmdldE1vZHVsZShxdCk7cmV0dXJuIGkuc2V0VHlwZSgxKSxpLnNldENvdW50KHQpLGkuc2V0U3RhcnRUaW1lKG4pLGkuZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLmVuY29kZU9sZENvbnZlcnNhdGlvbkxpc3Q9ZnVuY3Rpb24oZSl7dmFyIHQ9KGU9ZXx8e30pLmNvdW50LG49ZS50eXBlLGk9ZS5zdGFydFRpbWUscj1lLm9yZGVyO3Q9dHx8MCxpPWl8fDAscj1yfHwwO3ZhciBzPXRoaXMuX2NvZGVjLmdldE1vZHVsZShxdCk7cmV0dXJuIHMuc2V0VHlwZShuKSxzLnNldENvdW50KHQpLHMuc2V0U3RhcnRUaW1lKGkpLHMuc2V0T3JkZXIocikscy5nZXRBcnJheURhdGEoKX0sZS5wcm90b3R5cGUuZW5jb2RlUmVtb3ZlT2xkQ29udmVyc2F0aW9uTGlzdD1mdW5jdGlvbihlKXt2YXIgdD0oZT1lfHx7fSkuY29udmVyc2F0aW9uVHlwZSxuPWUuY2hhbm5lbElkLGk9dGhpcy5fY29kZWMuZ2V0TW9kdWxlKFF0KTtyZXR1cm4gaS5zZXRUeXBlKHQpLG4mJmkuc2V0QnVzQ2hhbm5lbChbbl0pLGkuZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLmVuY29kZVJlbW92ZUNvbnZlcnNhdGlvbkxpc3Q9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXRoaXMuX2NvZGVjLmdldE1vZHVsZShIdCksaT1bXTtyZXR1cm4gZHQoZSwoZnVuY3Rpb24oZSl7dmFyIG49ZS5jb252ZXJzYXRpb25UeXBlLHI9ZS50YXJnZXRJZCxzPXQuX2NvZGVjLmdldE1vZHVsZShZdCk7cy5zZXRUeXBlKG4pLHMuc2V0Q2hhbm5lbElkKHIpLGkucHVzaChzKX0pKSxuLnNldFNlc3Npb25zKGkpLG4uZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLmVuY29kZURlbGV0ZU1lc3NhZ2VzPWZ1bmN0aW9uKGUsdCxuLGkpe3ZhciByPXRoaXMuX2NvZGVjLmdldE1vZHVsZShXdCkscz1bXTtyZXR1cm4gZHQobiwoZnVuY3Rpb24oZSl7cy5wdXNoKHttc2dJZDplLm1lc3NhZ2VVSWQsbXNnRGF0YVRpbWU6ZS5zZW50VGltZSxkaXJlY3Q6ZS5tZXNzYWdlRGlyZWN0aW9ufSl9KSksci5zZXRUeXBlKGUpLHIuc2V0Q29udmVyc2F0aW9uSWQodCksci5zZXRNc2dzKHMpLHIuc2V0QnVzQ2hhbm5lbChpKSxyLmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVDbGVhck1lc3NhZ2VzPWZ1bmN0aW9uKGUsdCxuLGkpe3ZhciByPXRoaXMuX2NvZGVjLmdldE1vZHVsZShKdCk7cmV0dXJuIHQ9dHx8KG5ldyBEYXRlKS5nZXRUaW1lKCksci5zZXREYXRhVGltZSh0KSxyLnNldFRhcmdldElkKGUpLHIuc2V0QnVzQ2hhbm5lbChuKSxyLnNldENvbnZlcnNhdGlvblR5cGUoaSksci5nZXRBcnJheURhdGEoKX0sZS5wcm90b3R5cGUuZW5jb2RlQ2xlYXJVbnJlYWRDb3VudD1mdW5jdGlvbihlLHQpe3ZhciBuPWUuY29udmVyc2F0aW9uVHlwZSxpPWUudGFyZ2V0SWQscj1lLmNoYW5uZWxJZCxzPXQudGltZXN0YW1wLG89dGhpcy5fY29kZWMuZ2V0TW9kdWxlKHp0KTtyZXR1cm4gcz1zfHwrbmV3IERhdGUsby5zZXRUeXBlKG4pLG8uc2V0Q2hhbm5lbElkKGkpLG8uc2V0TXNnVGltZShzKSxvLnNldEJ1c0NoYW5uZWwociksby5nZXRBcnJheURhdGEoKX0sZS5wcm90b3R5cGUuZW5jb2RlRXhwYW5kVWx0cmFNZXNzYWdlPWZ1bmN0aW9uKGUsdCl7dmFyIG49ZS50YXJnZXRJZCxpPWUuY29udmVyc2F0aW9uVHlwZSxyPWUuY2hhbm5lbElkLHM9ZS5tZXNzYWdlVUlkLG89ZS5zZW5kVGltZSxhPWUua2V5cyx1PXttaWQ6cyxwdXQ6ZS5leHBhbnNpb24sZGVsOmEsY2xlYXI6ZS5yZW1vdmVBbGw/MTowfSxjPXRoaXMuX2NvZGVjLmdldE1vZHVsZShuaSk7cmV0dXJuIGMuc2V0RnJvbVVzZXJJZCh0KSxjLnNldFRhcmdldElkKG4pLGMuc2V0VHlwZShpKSxjLnNldEJ1c0NoYW5uZWwocnx8XCJcIiksYy5zZXRNc2dVSUQocyksYy5zZXRNc2dUaW1lKG8pLGMuc2V0Q29udGVudChKU09OLnN0cmluZ2lmeSh1KSksYy5nZXRBcnJheURhdGEoKX0sZS5wcm90b3R5cGUuZW5jb2RlbW9kaWZ5TWVzc2FnZT1mdW5jdGlvbihlLHQpe3ZhciBuPWUudGFyZ2V0SWQsaT1lLmNvbnZlcnNhdGlvblR5cGUscj1lLmNoYW5uZWxJZCxzPWUubWVzc2FnZVVJZCxvPWUuc2VuZFRpbWUsYT1lLmNvbnRlbnQsdT10aGlzLl9jb2RlYy5nZXRNb2R1bGUobmkpO3JldHVybiB1LnNldEZyb21Vc2VySWQodCksdS5zZXRUYXJnZXRJZChuKSx1LnNldFR5cGUoaSksdS5zZXRCdXNDaGFubmVsKHJ8fFwiXCIpLHUuc2V0TXNnVUlEKHMpLHUuc2V0TXNnVGltZShvKSx1LnNldENvbnRlbnQoSlNPTi5zdHJpbmdpZnkoYSkpLHUuZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLmVuY29kZVF1ZXJ5TXNnQ2hhbmdlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2NvZGVjLmdldE1vZHVsZShpaSk7cmV0dXJuIHQuc2V0U3luY1RpbWUoZSksdC5nZXRBcnJheURhdGEoKX0sZS5wcm90b3R5cGUuZW5jb2RlTXNnUXVlcnk9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS50YXJnZXRJZCxuPWUuY29udmVyc2F0aW9uVHlwZSxpPWUubWVzc2FnZXMscj10aGlzLl9jb2RlYy5nZXRNb2R1bGUob2kpLHM9aS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybnttc2dUaW1lOmUuc2VuZFRpbWUsbXNnVUlEOmUubWVzc2FnZVVJZCxidXNDaGFubmVsOmUuY2hhbm5lbElkfX0pKTtyZXR1cm4gci5zZXRUYXJnZXRJZCh0KSxyLnNldFR5cGUobiksci5zZXRRdWVyeShzKSxyLmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVPcGVyYXRlU3RhdHVzPWZ1bmN0aW9uKGUsdCxuLGkpe3ZhciByPXRoaXMuX2NvZGVjLmdldE1vZHVsZShjaSk7cmV0dXJuIHIuc2V0VGFyZ2V0SWQoZSksci5zZXRUeXBlKHQpLHIuc2V0QnVzQ2hhbm5lbChuKSxyLnNldE9wVHlwZShpKSxyLmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVKb2luT3JRdWl0Q2hhdFJvb209ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9jb2RlYy5nZXRNb2R1bGUoWnQpO3JldHVybiBlLnNldE5vdGhpbmcoMSksZS5nZXRBcnJheURhdGEoKX0sZS5wcm90b3R5cGUuZW5jb2RlR2V0Q2hhdFJvb21JbmZvPWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5fY29kZWMuZ2V0TW9kdWxlKCR0KTtyZXR1cm4gbi5zZXRDb3VudChlKSxuLnNldE9yZGVyKHQpLG4uZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLmVuY29kZUdldEZpbGVUb2tlbj1mdW5jdGlvbihlLHQsbixpKXt2YXIgcj10aGlzLl9jb2RlYy5nZXRNb2R1bGUobW4pO3JldHVybiByLnNldFR5cGUoZSksci5zZXRLZXkodCksci5zZXRIdHRwTWV0aG9kKG4pLHIuc2V0UXVlcnlTdHJpbmcoaSksci5nZXRBcnJheURhdGEoKX0sZS5wcm90b3R5cGUuZW5jb2RlR2V0RmlsZVVybD1mdW5jdGlvbihlLHQsbixpKXt2YXIgcj10aGlzLl9jb2RlYy5nZXRNb2R1bGUoZSk7cmV0dXJuIHIuc2V0VHlwZSh0KSxyLnNldEtleShuKSxpJiZyLnNldEZpbGVOYW1lKGkpLHIuZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLmVuY29kZU1vZGlmeUNoYXRSb29tS1Y9ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPVwiY29tZXRcIj09PXRoaXMuX2Nvbm5lY3RUeXBlLHI9dGhpcy5fY29kZWMuZ2V0TW9kdWxlKFNuKSxzPXQua2V5LG89dC52YWx1ZSxhPXQubm90aWZpY2F0aW9uRXh0cmEsdT10LmlzU2VuZE5vdGlmaWNhdGlvbixjPXQudHlwZSxoPXQudGltZXN0YW1wLGw9Y3x8TGUuVVBEQVRFLGQ9U3QodCxsKSxmPXtrZXk6cyx2YWx1ZTpvfHxcIlwiLHVpZDpuLHZlcnNpb246aH07aWYocmUoZCl8fChmLnN0YXR1cz1kKSxyLnNldEVudHJ5KGYpLHUpe3ZhciBwPXtjb252ZXJzYXRpb25UeXBlOmouQ0hBVFJPT00sdGFyZ2V0SWQ6ZX0sZz17a2V5OnMsdmFsdWU6byxleHRyYTphLHR5cGU6bH0sXz10aGlzLl9nZXRVcE1zZ01vZHVsZShwLHttZXNzYWdlVHlwZTpTZS5DSFJNX0tWX05PVElGWSxjb250ZW50OmcsaXNQZXJzaXRlZDohMSxpc0NvdW50ZWQ6ITF9KTtpP3Iuc2V0Tm90aWZpY2F0aW9uKF8uZ2V0QXJyYXlEYXRhKCkpOnIuc2V0Tm90aWZpY2F0aW9uKF8pLHIuc2V0Qk5vdGlmeSghMCksci5zZXRUeXBlKGouQ0hBVFJPT00pfXJldHVybiByLmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVNb2RpZnlDaGF0Um9vbUtWUz1mdW5jdGlvbihlLHQsbil7dGhpcy5fY29ubmVjdFR5cGU7dmFyIGk9dGhpcy5fY29kZWMuZ2V0TW9kdWxlKE5uKSxyPXQuZW50cmllcyxzPXQudHlwZXx8TGUuVVBEQVRFLG89U3QodCxzKSxhPVtdO3JldHVybiByLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0PXtrZXk6ZS5rZXksdmFsdWU6ZS52YWx1ZXx8XCJcIix1aWQ6bix2ZXJzaW9uOmUudGltZXN0YW1wfTtyZShvKXx8KHQuc3RhdHVzPW8pLGEucHVzaCh0KX0pKSxpLnNldEVudHJ5KGEpLGkuZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLmVuY29kZVB1bGxDaGF0Um9vbUtWPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2NvZGVjLmdldE1vZHVsZShibik7cmV0dXJuIHQuc2V0VGltZXN0YW1wKGUpLHQuZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLmVuY29kZVB1bGxVc2VyU2V0dGluZz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9jb2RlYy5nZXRNb2R1bGUoRG4pO3JldHVybiB0LnNldFZlcnNpb24oZSksdC5nZXRBcnJheURhdGEoKX0sZS5wcm90b3R5cGUuZW5jb2RlR2V0Q29udmVyc2F0aW9uU3RhdHVzPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2NvZGVjLmdldE1vZHVsZSh4bik7cmV0dXJuIHQuc2V0VGltZShlKSx0LmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVTZXRDb252ZXJzYXRpb25TdGF0dXM9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPVwiY29tZXRcIj09PXRoaXMuX2Nvbm5lY3RUeXBlLGk9dGhpcy5fY29kZWMuZ2V0TW9kdWxlKHFuKSxyPVJ0LmdldFRpbWUoKSxzPVtdO3JldHVybiBkdChlLChmdW5jdGlvbihlKXt2YXIgaT10Ll9jb2RlYy5nZXRNb2R1bGUoR24pLG89ZS5jb252ZXJzYXRpb25UeXBlLGE9ZS50YXJnZXRJZCx1PWUubm90aWZpY2F0aW9uU3RhdHVzLGM9ZS5pc1RvcCxoPWUuY2hhbm5lbElkLGw9W107aS5zZXRUeXBlKG8pLGkuc2V0Q2hhbm5lbElkKGEpLGkuc2V0VGltZShyKSxpLnNldEJ1c0NoYW5uZWwoaCk7dmFyIGQ9dT09PU9lLk9QRU4sZj17fTtyZSh1KXx8KGZbY3JdPWQpLHJlKGMpfHwoZltocl09YyksZHQoZiwoZnVuY3Rpb24oZSxpKXtpZighcmUoZSkpe3ZhciByPXQuX2NvZGVjLmdldE1vZHVsZShGbik7ZT1lP2FyOnVyLHIuc2V0U2Vzc2lvblN0YXRlVHlwZShOdW1iZXIoaSkpLHIuc2V0VmFsdWUoZSk7dmFyIHM9bj9yLmdldEFycmF5RGF0YSgpOnI7bC5wdXNoKHMpfX0pKSxpLnNldFN0YXRlSXRlbShsKTt2YXIgcD1uP2kuZ2V0QXJyYXlEYXRhKCk6aTtzLnB1c2gocCl9KSksaS5zZXRWZXJzaW9uKHIpLGkuc2V0U3RhdGUocyksaS5nZXRBcnJheURhdGEoKX0sZS5wcm90b3R5cGUuZW5jb2RlUmVhZFJlY2VpcHQ9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLl9jb2RlYy5nZXRNb2R1bGUoSG4pO3JldHVybiBuLnNldE1zZ0lkKGUpLHQmJm4uc2V0Q2hhbm5lbElkKHQpLG4uZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLmVuY29kZUNyZWF0ZVRhZz1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMsaT1cImNvbWV0XCI9PT10aGlzLl9jb25uZWN0VHlwZSxyPXRoaXMuX2NvZGVjLmdldE1vZHVsZShXbikscz1bXTtyZXR1cm4gZS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgdD1uLl9jb2RlYy5nZXRNb2R1bGUoSm4pO3Quc2V0VGFnSWQoZS50YWdJZCksdC5zZXROYW1lKGUudGFnTmFtZSkscy5wdXNoKGk/dC5nZXRBcnJheURhdGEoKTp0KX0pKSxyLnNldFRhZ3Mocyksci5zZXRWZXJzaW9uKHQpLHIuZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLmVuY29kZU1lc3NhZ2VSZWFkZXI9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLl9jb2RlYy5nZXRNb2R1bGUoSG4pO3JldHVybiBuLnNldE1zZ0lkKGUpLHQmJm4uc2V0Q2hhbm5lbElkKHQpLG4uZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLmVuY29kZVJlbW92ZVRhZz1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMsaT1cImNvbWV0XCI9PT10aGlzLl9jb25uZWN0VHlwZSxyPXRoaXMuX2NvZGVjLmdldE1vZHVsZSh6bikscz1bXTtyZXR1cm4gZS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgdD1uLl9jb2RlYy5nZXRNb2R1bGUoSm4pO3Quc2V0VGFnSWQoZSkscy5wdXNoKGk/dC5nZXRBcnJheURhdGEoKTp0KX0pKSxyLnNldFRhZ3Mocyksci5zZXRWZXJzaW9uKHQpLHIuZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLmVuY29kZURpc0NvbnZlcnNhdGlvblRhZz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9jb2RlYy5nZXRNb2R1bGUoWm4pO3JldHVybiB0LnNldFRhZ0lkKGUpLHQuZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLmVuY29kZVVwZGF0ZUNvbnZlcnNhdGlvblRhZz1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMsaT1cImNvbWV0XCI9PT10aGlzLl9jb25uZWN0VHlwZSxyPXRoaXMuX2NvZGVjLmdldE1vZHVsZShxbikscz1bXTtyZXR1cm4gdC5mb3JFYWNoKChmdW5jdGlvbih0KXt2YXIgcj1uLl9jb2RlYy5nZXRNb2R1bGUoR24pLG89bi5fY29kZWMuZ2V0TW9kdWxlKEZuKSxhPVtdO2UuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHQ9bi5fY29kZWMuZ2V0TW9kdWxlKEpuKTt0LnNldFRhZ0lkKGUudGFnSWQpLHJlKGUuaXNUb3ApfHx0LnNldElzVG9wKGUuaXNUb3ApLGEucHVzaChpP3QuZ2V0QXJyYXlEYXRhKCk6dCl9KSksby5zZXRTZXNzaW9uU3RhdGVUeXBlKGxyKSxvLnNldFZhbHVlKEpTT04uc3RyaW5naWZ5KGEpKSxvLnNldFRhZ3MoYSksci5zZXRUeXBlKHQuY29udmVyc2F0aW9uVHlwZSksci5zZXRDaGFubmVsSWQodC50YXJnZXRJZCksci5zZXRUaW1lKERhdGUubm93KCkpLHIuc2V0U3RhdGVJdGVtKFtpP28uZ2V0QXJyYXlEYXRhKCk6b10pLHMucHVzaChpP3IuZ2V0QXJyYXlEYXRhKCk6cil9KSksci5zZXRTdGF0ZShzKSxyLnNldFZlcnNpb24oUnQuZ2V0VGltZSgpKSxyLmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVSZXBvcnRTREtJbmZvPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2NvZGVjLmdldE1vZHVsZShYbik7cmV0dXJuIHQuc2V0U2RrSW5mbyhlKSx0LmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVVbHRyYUdyb3VwPWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5fY29kZWMuZ2V0TW9kdWxlKGVpKTtyZXR1cm4gbi5zZXRTeW5jVGltZShlKSxuLnNldElzRXJhc2VNc2dDb250ZW50KHQpLG4uZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLmVuY29kZUpvaW5SVENSb29tPWZ1bmN0aW9uKGUsdCxuLGkscil7dmFyIHM9dGhpcyxvPVwiY29tZXRcIj09PXRoaXMuX2Nvbm5lY3RUeXBlLGE9dGhpcy5fY29kZWMuZ2V0TW9kdWxlKHRuKTtpZihlPWV8fDAsYS5zZXRSb29tVHlwZShlKSxyZSh0KXx8YS5zZXRCcm9hZGNhc3RUeXBlKHQpLHJlKG4pfHxhLnNldEpvaW5UeXBlKG4pLGkpe3ZhciB1PVtdLGM9dGhpcy5fY29kZWMuZ2V0TW9kdWxlKF9uKTtmb3IodmFyIGggaW4gaSljLnNldEtleShoKSxjLnNldFZhbHVlKGlbaF0pLG8/dS5wdXNoKGMuZ2V0QXJyYXlEYXRhKCkpOnUucHVzaChjKTthLnNldElubmVyRGF0YXModSl9aWYocil7dmFyIGw9W107T2JqZWN0LmtleXMocikuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHQ9cy5fY29kZWMuZ2V0TW9kdWxlKF9uKTt0LnNldEtleShlKSx0LnNldFZhbHVlKHJbZV0pLG8/bC5wdXNoKHQuZ2V0QXJyYXlEYXRhKCkpOmwucHVzaCh0KX0pKSxhLnNldE91dGVyRGF0YXMobCl9cmV0dXJuIGEuZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLmVuY29kZVF1aXRSVENSb29tPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvZGVjLmdldE1vZHVsZShybikuZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLmVuY29kZVNldFJUQ0RhdGE9ZnVuY3Rpb24oZSx0LG4saSxyKXt2YXIgcz10aGlzLl9jb2RlYy5nZXRNb2R1bGUoc24pO2lmKHMuc2V0SW50ZXJpb3Iobikscy5zZXRUYXJnZXQoaSkscy5zZXRLZXkoZSkscy5zZXRWYWx1ZSh0KSxyKXtyLm5hbWUmJnMuc2V0T2JqZWN0TmFtZShyLm5hbWUpO3ZhciBvPXIuY29udGVudDtvJiYobmUobykmJihvPUpTT04uc3RyaW5naWZ5KG8pKSxzLnNldENvbnRlbnQobykpfXJldHVybiBzLmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVVc2VyU2V0UlRDRGF0YT1mdW5jdGlvbihlLHQsbixpKXt2YXIgcj10aGlzLHM9XCJjb21ldFwiPT09dGhpcy5fY29ubmVjdFR5cGUsbz10aGlzLl9jb2RlYy5nZXRNb2R1bGUob24pO28uc2V0T2JqZWN0TmFtZShuKTt2YXIgYT10aGlzLl9jb2RlYy5nZXRNb2R1bGUoX24pO2Euc2V0S2V5KGUubmFtZSksYS5zZXRWYWx1ZShlLmNvbnRlbnQpLHM/by5zZXRDb250ZW50KGEuZ2V0QXJyYXlEYXRhKCkpOm8uc2V0Q29udGVudChhKTt2YXIgdT1bXTtyZXR1cm5bXCJ1cmlzXCIsXCJtY3VfdXJpc1wiXS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbj1yLl9jb2RlYy5nZXRNb2R1bGUoX24pO24uc2V0S2V5KGUpO3ZhciBvPVwidXJpc1wiPT09ZT90Omk7bi5zZXRWYWx1ZShvKSxzP3UucHVzaChuLmdldEFycmF5RGF0YSgpKTp1LnB1c2gobil9KSksby5zZXRWYWx1ZUluZm8odSksby5nZXRBcnJheURhdGEoKX0sZS5wcm90b3R5cGUuZW5jb2RlVXNlclNldFJUQ0NETlVyaXM9ZnVuY3Rpb24oZSx0KXt0aGlzLl9jb25uZWN0VHlwZTt2YXIgbj10aGlzLl9jb2RlYy5nZXRNb2R1bGUob24pO24uc2V0T2JqZWN0TmFtZShlKTt2YXIgaT10aGlzLl9jb2RlYy5nZXRNb2R1bGUoX24pO3JldHVybiBpLnNldEtleShcImNkbl91cmlzXCIpLGkuc2V0VmFsdWUodCksbi5zZXRWYWx1ZUluZm8oaSksbi5nZXRBcnJheURhdGEoKX0sZS5wcm90b3R5cGUuZW5jb2RlR2V0UlRDRGF0YT1mdW5jdGlvbihlLHQsbil7dmFyIGk9dGhpcy5fY29kZWMuZ2V0TW9kdWxlKGFuKTtyZXR1cm4gaS5zZXRJbnRlcmlvcih0KSxpLnNldFRhcmdldChuKSxpLnNldEtleShlKSxpLmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVSZW1vdmVSVENEYXRhPWZ1bmN0aW9uKGUsdCxuLGkpe3ZhciByPXRoaXMuX2NvZGVjLmdldE1vZHVsZShhbik7ci5zZXRJbnRlcmlvcih0KSxyLnNldFRhcmdldChuKSxyLnNldEtleShlKTt2YXIgcz0oaT1pfHx7fSkubmFtZSxvPWkuY29udGVudDtyZXR1cm4hcmUocykmJnIuc2V0T2JqZWN0TmFtZShzKSxyZShvKXx8KG5lKG8pJiYobz1KU09OLnN0cmluZ2lmeShvKSksci5zZXRDb250ZW50KG8pKSxyLmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVTZXRSVENPdXREYXRhPWZ1bmN0aW9uKGUsdCxuKXt2YXIgaT10aGlzLl9jb2RlYy5nZXRNb2R1bGUodW4pO2kuc2V0VGFyZ2V0KHQpLFgoZSl8fChlPVtlXSksZHQoZSwoZnVuY3Rpb24odCxuKXt0LmtleT10LmtleT90LmtleS50b1N0cmluZygpOnQua2V5LHQudmFsdWU9dC52YWx1ZT90LnZhbHVlLnRvU3RyaW5nKCk6dC52YWx1ZSxlW25dPXR9KSksaS5zZXRWYWx1ZUluZm8oZSk7dmFyIHI9KG49bnx8e30pLm5hbWUscz1uLmNvbnRlbnQ7cmV0dXJuIXJlKHIpJiZpLnNldE9iamVjdE5hbWUocikscmUocyl8fChuZShzKSYmKHM9SlNPTi5zdHJpbmdpZnkocykpLGkuc2V0Q29udGVudChzKSksaS5nZXRBcnJheURhdGEoKX0sZS5wcm90b3R5cGUuZWNub2RlR2V0UlRDT3V0RGF0YT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9jb2RlYy5nZXRNb2R1bGUoZG4pO3JldHVybiB0LnNldFVzZXJJZChlKSx0LmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVTZXRSVENTdGF0ZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9jb2RlYy5nZXRNb2R1bGUoY24pO3JldHVybiB0LnNldFN0YXRlKGUpLHQuZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLmVuY29kZUdldFJUQ1Jvb21JbmZvPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fY29kZWMuZ2V0TW9kdWxlKHBuKTtyZXR1cm4gZS5zZXRPcmRlcigyKSxlLmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVTZXRSVENVc2VySW5mbz1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuX2NvZGVjLmdldE1vZHVsZShfbik7cmV0dXJuIG4uc2V0S2V5KGUpLG4uc2V0VmFsdWUodCksbi5nZXRBcnJheURhdGEoKX0sZS5wcm90b3R5cGUuZW5jb2RlUmVtb3ZlUlRDVXNlckluZm89ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fY29kZWMuZ2V0TW9kdWxlKHluKTtyZXR1cm4gdC5zZXRLZXkoZSksdC5nZXRBcnJheURhdGEoKX0sZS5wcm90b3R5cGUuZW5jb2RlSWRlbnRpdHlDaGFuZ2VJbmZvPWZ1bmN0aW9uKGUsdCxuKXt2b2lkIDA9PT1uJiYobj0hMSk7dmFyIGk9dGhpcy5fY29kZWMuZ2V0TW9kdWxlKHRuKTtyZXR1cm4gaS5zZXRSb29tVHlwZSh4ZS5MSVZFKSx0JiZpLnNldEJyb2FkY2FzdFR5cGUodCksaS5zZXRJZGVudGl0eUNoYW5nZVR5cGUoZSksaS5zZXROZWVkU3lzQ2hhdHJvb20obiksaS5nZXRBcnJheURhdGEoKX0sZS5wcm90b3R5cGUuZW5jb2RlUHVsbFJUQ1Jvb21LVj1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuX2NvZGVjLmdldE1vZHVsZShwaSk7cmV0dXJuIG4uc2V0VGltZXN0YW1wKHQpLG4uc2V0Um9vbUlkKGUpLG4uZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLmVuY29kZVF1ZXJ5VXNlckpvaW5lZEluZm89ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fY29kZWMuZ2V0TW9kdWxlKF9pKTtyZXR1cm4gdC5zZXRVc2VySWQoZSksdC5nZXRBcnJheURhdGEoKX0sZS5wcm90b3R5cGUuZW5jb2RlUmVxdWVzdFJvb21QSz1mdW5jdGlvbihlKXt2YXIgdD1lLmludml0ZWRSb29tSWQsbj1lLmludml0ZWRVc2VySWQsaT1lLmludml0ZVNlc3Npb25JZCxyPWUuaW52aXRlVGltZW91dCxzPWUuaW52aXRlSW5mbyxvPXRoaXMuX2NvZGVjLmdldE1vZHVsZSh2aSk7cmV0dXJuIG8uc2V0SW52aXRlZFJvb21JZCh0KSxvLnNldEludml0ZWRVc2VySWQobiksby5zZXRJbnZpdGVTZXNzaW9uSWQoaSksby5zZXRUaW1lb3V0VGltZShyKSxvLnNldEludml0ZUluZm8ocyksby5nZXRBcnJheURhdGEoKX0sZS5wcm90b3R5cGUuZW5jb2RlQ2FuY2VsUm9vbVBLPWZ1bmN0aW9uKGUpe3ZhciB0PWUuaW52aXRlZFJvb21JZCxuPWUuaW52aXRlZFVzZXJJZCxpPWUuaW52aXRlU2Vzc2lvbklkLHI9ZS5pbnZpdGVJbmZvLHM9dGhpcy5fY29kZWMuZ2V0TW9kdWxlKEVpKTtyZXR1cm4gcy5zZXRJbnZpdGVkUm9vbUlkKHQpLHMuc2V0SW52aXRlZFVzZXJJZChuKSxzLnNldEludml0ZVNlc3Npb25JZChpKSxzLnNldEludml0ZUluZm8ocikscy5nZXRBcnJheURhdGEoKX0sZS5wcm90b3R5cGUuZW5jb2RlUmVzcG9uc2VSb29tUEs9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5pbnZpdGVVc2VySWQsbj1lLmludml0ZVJvb21JZCxpPWUuaW52aXRlU2Vzc2lvbklkLHI9ZS5jb250ZW50LHM9ZS5rZXksbz1lLnZhbHVlLGE9ZS5hZ3JlZT8xOjAsdT10aGlzLl9jb2RlYy5nZXRNb2R1bGUoVGkpO3JldHVybiB1LnNldEludml0ZVVzZXJJZCh0KSx1LnNldEludml0ZVJvb21JZChuKSx1LnNldEludml0ZVNlc3Npb25JZChpKSx1LnNldENvbnRlbnQociksdS5zZXRLZXkocyksdS5zZXRWYWx1ZShvKSx1LnNldEFuc3dlckNvZGUoYSksdS5nZXRBcnJheURhdGEoKX0sZS5wcm90b3R5cGUuZW5jb2RlRW5kUm9vbVBLPWZ1bmN0aW9uKGUpe3ZhciB0PWUuZW5kUm9vbUlkLG49ZS5zZXNzaW9uSWQsaT1lLmNvbnRlbnQscj1lLmtleXMscz10aGlzLl9jb2RlYy5nZXRNb2R1bGUoSWkpO3JldHVybiBzLnNldEludml0ZVJvb21JZCh0KSxzLnNldEludml0ZVNlc3Npb25JZChuKSxzLnNldEludml0ZUNvbnRlbnQoaSkscy5zZXRJbnZpdGVSb29tS2V5cyhyKSxzLmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGViaW5kUlRDUm9vbUZvckNoYXRyb29tPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2NvZGVjLmdldE1vZHVsZShDaSk7cmV0dXJuIHQuc2V0UnRjUm9vbUlkKGUucnRjUm9vbUlkKSx0LmdldEFycmF5RGF0YSgpfSxlfSgpLGZyPWZ1bmN0aW9uKGUsdCl7dGhpcy5fd2F0Y2hlcj10LHRoaXMuY29kZWM9bmV3IGRyKGUpfSxwcj1mdW5jdGlvbihlLHQpe3JldHVybiBlJiZ0P3QrXCJfXCIrZTplfHxEYXRlLm5vdygpfSxncj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5oZWFkZXI9ZSx0aGlzLl9uYW1lPW51bGwsdGhpcy5sZW5ndGhTaXplPTAsdGhpcy5tZXNzYWdlSWQ9MCx0aGlzLnRpbWVzdGFtcD0wLHRoaXMuc3luY01zZz0hMSx0aGlzLmlkZW50aWZpZXI9XCJcIn1yZXR1cm4gZS5wcm90b3R5cGUuZ2V0SWRlbnRpZmllcj1mdW5jdGlvbigpe3ZhciBlPXRoaXMubWVzc2FnZUlkLHQ9dGhpcy5pZGVudGlmaWVyO3JldHVybiBwcihlLHQpfSxlLnByb3RvdHlwZS5yZWFkPWZ1bmN0aW9uKGUsdCxuKXt0aGlzLnJlYWRNZXNzYWdlKGUsdCxuKX0sZS5wcm90b3R5cGUucmVhZE1lc3NhZ2U9ZnVuY3Rpb24oZSx0LG4pe3JldHVybntzdHJlYW06ZSxsZW5ndGg6dH19LGV9KCksX3I9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMubGVuZ3RoU2l6ZT0wLHRoaXMubWVzc2FnZUlkPTAsdGhpcy50b3BpYz1cIlwiLHRoaXMudGFyZ2V0SWQ9XCJcIix0aGlzLmlkZW50aWZpZXI9XCJcIix0aGlzLl9oZWFkZXI9bmV3IE90KGUsITEsemUuQVRfTU9TVF9PTkNFLCExKX1yZXR1cm4gZS5wcm90b3R5cGUuZ2V0SWRlbnRpZmllcj1mdW5jdGlvbigpe3ZhciBlPXRoaXMubWVzc2FnZUlkLHQ9dGhpcy5pZGVudGlmaWVyO3JldHVybiBwcihlLHQpfSxlLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmdldEhlYWRlckZsYWcoKTtlLndyaXRlKHQpLHRoaXMud3JpdGVNZXNzYWdlKGUpfSxlLnByb3RvdHlwZS5zZXRIZWFkZXJRb3M9ZnVuY3Rpb24oZSl7dGhpcy5faGVhZGVyLnFvcz1lfSxlLnByb3RvdHlwZS5nZXRIZWFkZXJGbGFnPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2hlYWRlci5lbmNvZGUoKX0sZS5wcm90b3R5cGUuZ2V0TGVuZ3RoU2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxlbmd0aFNpemV9LGUucHJvdG90eXBlLmdldEJ1ZmZlckRhdGE9ZnVuY3Rpb24oKXt2YXIgZT1uZXcgQXQ7dGhpcy53cml0ZShlKTt2YXIgdD1lLmdldEJ5dGVzQXJyYXkoKTtyZXR1cm4gbmV3IEludDhBcnJheSh0KX0sZS5wcm90b3R5cGUuZ2V0Q29tZXREYXRhPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5kYXRhfHx7fTtyZXR1cm4gSlNPTi5zdHJpbmdpZnkoZSl9LGV9KCkseXI9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3ZhciB0PW51bGwhPT1lJiZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpcztyZXR1cm4gdC5fbmFtZT1YZS5DT05OX0FDSyx0LnN0YXR1cz1udWxsLHQudXNlcklkPW51bGwsdC50aW1lc3RhbXA9MCx0fXJldHVybiBOKHQsZSksdC5wcm90b3R5cGUucmVhZE1lc3NhZ2U9ZnVuY3Rpb24oZSxuLGkpe2lmKGUucmVhZEJ5dGUoKSx0aGlzLnN0YXR1cz0rZS5yZWFkQnl0ZSgpLG48PXQuTUVTU0FHRV9MRU5HVEgpcmV0dXJue3N0cmVhbTplLGxlbmd0aDpufTtpZihpPT09ZXQuVjQpe3ZhciByPWUucmVhZEJ5dGUoKTsxJnImJih0aGlzLnVzZXJJZD1lLnJlYWRVVEYoKSksMiZyJiZlLnJlYWRVVEYoKSw0JnImJih0aGlzLnRpbWVzdGFtcD1lLnJlYWRMb25nKCkpLDgmciYmKHRoaXMubWVzc2FnZUlkPWUucmVhZDJCeXRlKCkpfWVsc2V7dGhpcy51c2VySWQ9ZS5yZWFkVVRGKCk7dmFyIHM9ZS5yZWFkVVRGKCk7Z2UuZGVidWcoXCJzZXJ2ZXIgc2Vzc2lvbklkIC0+IFwiK3MpLHRoaXMudGltZXN0YW1wPWUucmVhZExvbmcoKX1yZXR1cm57c3RyZWFtOmUsbGVuZ3RoOm59fSx0Lk1FU1NBR0VfTEVOR1RIPTIsdH0oZ3IpLG1yPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXt2YXIgdD1udWxsIT09ZSYmZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXM7cmV0dXJuIHQuX25hbWU9WGUuRElTQ09OTkVDVCx0LnN0YXR1cz0wLHR9cmV0dXJuIE4odCxlKSx0LnByb3RvdHlwZS5yZWFkTWVzc2FnZT1mdW5jdGlvbihlLHQpe3JldHVybiBlLnJlYWRCeXRlKCksdGhpcy5zdGF0dXM9K2UucmVhZEJ5dGUoKSx7c3RyZWFtOmUsbGVuZ3RoOnR9fSx0Lk1FU1NBR0VfTEVOR1RIPTIsdH0oZ3IpLHZyPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXt2YXIgdD1lLmNhbGwodGhpcyxaZS5QSU5HX1JFUSl8fHRoaXM7cmV0dXJuIHQuX25hbWU9WGUuUElOR19SRVEsdH1yZXR1cm4gTih0LGUpLHQucHJvdG90eXBlLndyaXRlTWVzc2FnZT1mdW5jdGlvbihlKXt9LHR9KF9yKSxFcj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQpe3ZhciBuPWUuY2FsbCh0aGlzLHQpfHx0aGlzO3JldHVybiBuLl9uYW1lPVhlLlBJTkdfUkVTUCxufXJldHVybiBOKHQsZSksdH0oZ3IpLFRyPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXt2YXIgdD1udWxsIT09ZSYmZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXM7cmV0dXJuIHQubWVzc2FnZUlkPTAsdH1yZXR1cm4gTih0LGUpLHQucHJvdG90eXBlLnJlYWRNZXNzYWdlPWZ1bmN0aW9uKGUsdCl7dmFyIG49MjU2KmUucmVhZEJ5dGUoKStlLnJlYWRCeXRlKCk7cmV0dXJuIHRoaXMubWVzc2FnZUlkPXBhcnNlSW50KG4udG9TdHJpbmcoKSwxMCkse3N0cmVhbTplLGxlbmd0aDp0fX0sdH0oZ3IpLElyPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXt2YXIgdD1udWxsIT09ZSYmZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXM7cmV0dXJuIHQubWVzc2FnZUlkPTAsdH1yZXR1cm4gTih0LGUpLHQucHJvdG90eXBlLndyaXRlTWVzc2FnZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLm1lc3NhZ2VJZCxuPTI1NSZ0LGk9KDY1MjgwJnQpPj44O2Uud3JpdGUoaSksZS53cml0ZShuKX0sdH0oX3IpLENyPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXt2YXIgdD1udWxsIT09ZSYmZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXM7cmV0dXJuIHQuX25hbWU9WGUuUFVCTElTSCx0LnRvcGljPVwiXCIsdC50YXJnZXRJZD1cIlwiLHQuc3luY01zZz0hMSx0LmlkZW50aWZpZXI9JGUuUFVCLHR9cmV0dXJuIE4odCxlKSx0LnByb3RvdHlwZS5yZWFkTWVzc2FnZT1mdW5jdGlvbih0LG4pe3JldHVybiB0aGlzLmRhdGU9dC5yZWFkSW50KCksdGhpcy50b3BpYz10LnJlYWRVVEYoKSx0aGlzLnRhcmdldElkPXQucmVhZFVURigpLGUucHJvdG90eXBlLnJlYWRNZXNzYWdlLmNhbGwodGhpcyx0LG4pLHRoaXMuZGF0YT10LnJlYWRBbGwoKSx7c3RyZWFtOnQsbGVuZ3RoOm59fSx0fShUciksUnI9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LG4saSl7dmFyIHI9ZS5jYWxsKHRoaXMsWmUuUFVCTElTSCl8fHRoaXM7cmV0dXJuIHIuX25hbWU9WGUuUFVCTElTSCxyLnN5bmNNc2c9ITEsci5pZGVudGlmaWVyPSRlLlBVQixyLnRvcGljPXQsci5kYXRhPUoobik/TXQud3JpdGVVVEYobik6bixyLnRhcmdldElkPWkscn1yZXR1cm4gTih0LGUpLHQucHJvdG90eXBlLndyaXRlTWVzc2FnZT1mdW5jdGlvbih0KXt0LndyaXRlVVRGKHRoaXMudG9waWMpLHQud3JpdGVVVEYodGhpcy50YXJnZXRJZCksZS5wcm90b3R5cGUud3JpdGVNZXNzYWdlLmNhbGwodGhpcyx0KSx0LndyaXRlKHRoaXMuZGF0YSl9LHR9KElyKSxTcj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7dmFyIHQ9bnVsbCE9PWUmJmUuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzO3JldHVybiB0Ll9uYW1lPVhlLlBVQl9BQ0ssdC5zdGF0dXM9MCx0LmRhdGU9MCx0Lm1pbGxpc2Vjb25kPTAsdC5tZXNzYWdlVUlkPVwiXCIsdC50aW1lc3RhbXA9MCx0LmlkZW50aWZpZXI9JGUuUFVCLHQudG9waWM9XCJcIix0LnRhcmdldElkPVwiXCIsdH1yZXR1cm4gTih0LGUpLHQucHJvdG90eXBlLnJlYWRNZXNzYWdlPWZ1bmN0aW9uKHQsbil7cmV0dXJuIGUucHJvdG90eXBlLnJlYWRNZXNzYWdlLmNhbGwodGhpcyx0LG4pLHRoaXMuZGF0ZT10LnJlYWRJbnQoKSx0aGlzLnN0YXR1cz0yNTYqdC5yZWFkQnl0ZSgpK3QucmVhZEJ5dGUoKSx0aGlzLm1pbGxpc2Vjb25kPTI1Nip0LnJlYWRCeXRlKCkrdC5yZWFkQnl0ZSgpLHRoaXMudGltZXN0YW1wPTFlMyp0aGlzLmRhdGUrdGhpcy5taWxsaXNlY29uZCx0aGlzLm1lc3NhZ2VVSWQ9dC5yZWFkVVRGKCkse3N0cmVhbTp0LGxlbmd0aDpufX0sdH0oVHIpLE5yPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCl7dmFyIG49ZS5jYWxsKHRoaXMsWmUuUFVCX0FDSyl8fHRoaXM7cmV0dXJuIG4uX25hbWU9WGUuUFVCX0FDSyxuLnN0YXR1cz0wLG4uZGF0ZT0wLG4ubWlsbGlzZWNvbmQ9MCxuLm1lc3NhZ2VVSWQ9XCJcIixuLnRpbWVzdGFtcD0wLG4ubWVzc2FnZUlkPXQsbn1yZXR1cm4gTih0LGUpLHQucHJvdG90eXBlLndyaXRlTWVzc2FnZT1mdW5jdGlvbih0KXtlLnByb3RvdHlwZS53cml0ZU1lc3NhZ2UuY2FsbCh0aGlzLHQpfSx0fShJciksT3I9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LG4saSl7dmFyIHI9ZS5jYWxsKHRoaXMsWmUuUVVFUlkpfHx0aGlzO3JldHVybiByLm5hbWU9WGUuUVVFUlksci5pZGVudGlmaWVyPSRlLlFVRVJZLHIudG9waWM9dCxyLmRhdGE9SihuKT9NdC53cml0ZVVURihuKTpuLHIudGFyZ2V0SWQ9aSxyfXJldHVybiBOKHQsZSksdC5wcm90b3R5cGUud3JpdGVNZXNzYWdlPWZ1bmN0aW9uKHQpe3Qud3JpdGVVVEYodGhpcy50b3BpYyksdC53cml0ZVVURih0aGlzLnRhcmdldElkKSxlLnByb3RvdHlwZS53cml0ZU1lc3NhZ2UuY2FsbCh0aGlzLHQpLHQud3JpdGUodGhpcy5kYXRhKX0sdH0oSXIpLE1yPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCl7dmFyIG49ZS5jYWxsKHRoaXMsWmUuUVVFUllfQ09ORklSTSl8fHRoaXM7cmV0dXJuIG4uX25hbWU9WGUuUVVFUllfQ09OLG4ubWVzc2FnZUlkPXQsbn1yZXR1cm4gTih0LGUpLHR9KElyKSx3cj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7dmFyIHQ9bnVsbCE9PWUmJmUuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzO3JldHVybiB0Ll9uYW1lPVhlLlFVRVJZX0FDSyx0LnN0YXR1cz0wLHQuaWRlbnRpZmllcj0kZS5RVUVSWSx0LnRvcGljPVwiXCIsdC50YXJnZXRJZD1cIlwiLHR9cmV0dXJuIE4odCxlKSx0LnByb3RvdHlwZS5yZWFkTWVzc2FnZT1mdW5jdGlvbih0LG4pe3JldHVybiBlLnByb3RvdHlwZS5yZWFkTWVzc2FnZS5jYWxsKHRoaXMsdCxuKSx0aGlzLmRhdGU9dC5yZWFkSW50KCksdGhpcy5zdGF0dXM9MjU2KnQucmVhZEJ5dGUoKSt0LnJlYWRCeXRlKCksdGhpcy5kYXRhPXQucmVhZEFsbCgpLHtzdHJlYW06dCxsZW5ndGg6bn19LHR9KFRyKSxBcj1mdW5jdGlvbihlKXt2YXIgdCxuPWUudHlwZTtzd2l0Y2gobil7Y2FzZSBaZS5DT05OX0FDSzp0PW5ldyB5cihlKTticmVhaztjYXNlIFplLlBVQkxJU0g6KHQ9bmV3IENyKGUpKS5zeW5jTXNnPWUuc3luY01zZzticmVhaztjYXNlIFplLlBVQl9BQ0s6dD1uZXcgU3IoZSk7YnJlYWs7Y2FzZSBaZS5RVUVSWV9BQ0s6dD1uZXcgd3IoZSk7YnJlYWs7Y2FzZSBaZS5TVUJfQUNLOmNhc2UgWmUuVU5TVUJfQUNLOmNhc2UgWmUuUElOR19SRVNQOnQ9bmV3IEVyKGUpO2JyZWFrO2Nhc2UgWmUuRElTQ09OTkVDVDp0PW5ldyBtcihlKTticmVhaztkZWZhdWx0OnQ9bmV3IGdyKGUpLGdlLmVycm9yKFwiTm8gc3VwcG9ydCBmb3IgZGVzZXJpYWxpemluZyBcIituK1wiIG1lc3NhZ2VzXCIpfXJldHVybiB0fTshZnVuY3Rpb24oZSl7ZVtlLnBwTXNnUD0xXT1cInBwTXNnUFwiLGVbZS5wcE1zZ049Ml09XCJwcE1zZ05cIixlW2UucHBNc2dTPTNdPVwicHBNc2dTXCIsZVtlLnBnTXNnUD00XT1cInBnTXNnUFwiLGVbZS5jaGF0TXNnPTVdPVwiY2hhdE1zZ1wiLGVbZS5wY01zZ1A9Nl09XCJwY01zZ1BcIixlW2UucXJ5UE1zZz03XT1cInFyeVBNc2dcIixlW2UucXJ5R01zZz04XT1cInFyeUdNc2dcIixlW2UucXJ5Q0hNc2c9OV09XCJxcnlDSE1zZ1wiLGVbZS5xcnlDTXNnPTEwXT1cInFyeUNNc2dcIixlW2UucXJ5U01zZz0xMV09XCJxcnlTTXNnXCIsZVtlLnJlY2FsbE1zZz0xMl09XCJyZWNhbGxNc2dcIixlW2UucHJNc2dTPTEzXT1cInByTXNnU1wiLGVbZS5yck1zZz0xNF09XCJyck1zZ1wiLGVbZS5yckxpc3Q9MTVdPVwicnJMaXN0XCIsZVtlLnNfbnRmPTE2XT1cInNfbnRmXCIsZVtlLnNfbXNnPTE3XT1cInNfbXNnXCIsZVtlLnNfc3RhdD0xOF09XCJzX3N0YXRcIixlW2Uuc19jbWQ9MTldPVwic19jbWRcIixlW2Uuc191cz0yMF09XCJzX3VzXCIsZVtlLnB1bGxVUz0yMV09XCJwdWxsVVNcIixlW2UucGdNc2dTPTIyXT1cInBnTXNnU1wiLGVbZS5jaGF0TXNnUz0yM109XCJjaGF0TXNnU1wiLGVbZS5xcnlTZXNzaW9uc0F0dD0yNF09XCJxcnlTZXNzaW9uc0F0dFwiLGVbZS5wdWxsTXNnPTI1XT1cInB1bGxNc2dcIixlW2UucXJ5U2Vzc2lvbnM9MjZdPVwicXJ5U2Vzc2lvbnNcIixlW2UuZGVsU2Vzc2lvbnM9MjddPVwiZGVsU2Vzc2lvbnNcIixlW2UuZGVsTXNnPTI4XT1cImRlbE1zZ1wiLGVbZS51cGRSUlRpbWU9MjldPVwidXBkUlJUaW1lXCIsZVtlLmNocm1QdWxsPTMwXT1cImNocm1QdWxsXCIsZVtlLmpvaW5DaHJtPTMxXT1cImpvaW5DaHJtXCIsZVtlLmpvaW5DaHJtUj0zMl09XCJqb2luQ2hybVJcIixlW2UuZXhpdENocm09MzNdPVwiZXhpdENocm1cIixlW2UucXVlcnlDaHJtST0zNF09XCJxdWVyeUNocm1JXCIsZVtlLnNldEtWPTM1XT1cInNldEtWXCIsZVtlLmRlbEtWPTM2XT1cImRlbEtWXCIsZVtlLnB1bGxLVj0zN109XCJwdWxsS1ZcIixlW2UucXJ5UmVsYXRpb249MzhdPVwicXJ5UmVsYXRpb25cIixlW2UuZGVsUmVsYXRpb249MzldPVwiZGVsUmVsYXRpb25cIixlW2UucHVsbFNlQXR0cz00MF09XCJwdWxsU2VBdHRzXCIsZVtlLnNldFNlQXR0PTQxXT1cInNldFNlQXR0XCIsZVtlLnFuVGtuPTQyXT1cInFuVGtuXCIsZVtlLnFuVXJsPTQzXT1cInFuVXJsXCIsZVtlLmFsaVVybD00NF09XCJhbGlVcmxcIixlW2UuczNVcmw9NDVdPVwiczNVcmxcIixlW2Uuc3RjVXJsPTQ2XT1cInN0Y1VybFwiLGVbZS5jbGVhblBNc2c9NDddPVwiY2xlYW5QTXNnXCIsZVtlLmNsZWFuR01zZz00OF09XCJjbGVhbkdNc2dcIixlW2UuY2xlYW5DTXNnPTQ5XT1cImNsZWFuQ01zZ1wiLGVbZS5jbGVhblNNc2c9NTBdPVwiY2xlYW5TTXNnXCIsZVtlLnJ0Y1JKb2luX2RhdGE9NTFdPVwicnRjUkpvaW5fZGF0YVwiLGVbZS5ydGNSRXhpdD01Ml09XCJydGNSRXhpdFwiLGVbZS5ydGNQaW5nPTUzXT1cInJ0Y1BpbmdcIixlW2UucnRjU2V0RGF0YT01NF09XCJydGNTZXREYXRhXCIsZVtlLnJ0Y19udGY9NTVdPVwicnRjX250ZlwiLGVbZS52aWV3ZXJKb2luUj01Nl09XCJ2aWV3ZXJKb2luUlwiLGVbZS52aWV3ZXJFeGl0Uj01N109XCJ2aWV3ZXJFeGl0UlwiLGVbZS5ydGNQdWxsS3Y9NThdPVwicnRjUHVsbEt2XCIsZVtlLnJ0Y0lkZW50aXR5Q2hhbmdlPTU5XT1cInJ0Y0lkZW50aXR5Q2hhbmdlXCIsZVtlLnVzZXJTZXREYXRhPTYwXT1cInVzZXJTZXREYXRhXCIsZVtlLnJ0Y1FyeURhdGE9NjFdPVwicnRjUXJ5RGF0YVwiLGVbZS5ydGNEZWxEYXRhPTYyXT1cInJ0Y0RlbERhdGFcIixlW2UucnRjU2V0T3V0RGF0YT02M109XCJydGNTZXRPdXREYXRhXCIsZVtlLnJ0Y1FyeVVzZXJPdXREYXRhPTY0XT1cInJ0Y1FyeVVzZXJPdXREYXRhXCIsZVtlLnJ0Y1Rva2VuPTY1XT1cInJ0Y1Rva2VuXCIsZVtlLnJ0Y1VzZXJTdGF0ZT02Nl09XCJydGNVc2VyU3RhdGVcIixlW2UucnRjUkluZm89NjddPVwicnRjUkluZm9cIixlW2UucnRjVURhdGE9NjhdPVwicnRjVURhdGFcIixlW2UucnRjVVB1dD02OV09XCJydGNVUHV0XCIsZVtlLnJ0Y1VEZWw9NzBdPVwicnRjVURlbFwiLGVbZS5ydGNVTGlzdD03MV09XCJydGNVTGlzdFwiLGVbZS5ydGNRdWVyeUpvaW5lZD03Ml09XCJydGNRdWVyeUpvaW5lZFwiLGVbZS5ydGNJbnZpdGU9NzNdPVwicnRjSW52aXRlXCIsZVtlLnJ0Y0NhbmNlbEludml0ZT03NF09XCJydGNDYW5jZWxJbnZpdGVcIixlW2UucnRjSW52aXRlQW5zd2VyPTc1XT1cInJ0Y0ludml0ZUFuc3dlclwiLGVbZS5ydGNFbmRJbnZpdGU9NzZdPVwicnRjRW5kSW52aXRlXCIsZVtlLmFkZFNlVGFnPTc3XT1cImFkZFNlVGFnXCIsZVtlLmRlbFNlVGFnPTc4XT1cImRlbFNlVGFnXCIsZVtlLmFkZFRhZz03OV09XCJhZGRUYWdcIixlW2UuZGVsVGFnPTgwXT1cImRlbFRhZ1wiLGVbZS5kaXNUYWc9ODFdPVwiZGlzVGFnXCIsZVtlLnJlcG9ydHNkaz04Ml09XCJyZXBvcnRzZGtcIixlW2UucHVsbFVnU2VzPTgzXT1cInB1bGxVZ1Nlc1wiLGVbZS5wdWxsVWdNc2c9ODRdPVwicHVsbFVnTXNnXCIsZVtlLnVnTXNnPTg1XT1cInVnTXNnXCIsZVtlLnFyeVVnTXNnPTg2XT1cInFyeVVnTXNnXCIsZVtlLnVwZFVnUlRpbWU9ODddPVwidXBkVWdSVGltZVwiLGVbZS51cE1zZ0V4PTg4XT1cInVwTXNnRXhcIixlW2UubW9kaWZ5TXNnPTg5XT1cIm1vZGlmeU1zZ1wiLGVbZS5xcnlNc2dDaGFuZ2U9OTBdPVwicXJ5TXNnQ2hhbmdlXCIsZVtlLnFyeU1zZz05MV09XCJxcnlNc2dcIixlW2Uub3BlcmF0ZT05Ml09XCJvcGVyYXRlXCIsZVtlLnNfb3BOdGY9OTNdPVwic19vcE50ZlwiLGVbZS5zZXRSdGNSb29tSWQ9OTRdPVwic2V0UnRjUm9vbUlkXCJ9KFZpfHwoVmk9e30pKTt2YXIgVXIsYnI9VmksTHI9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIE0odm9pZCAwLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHI7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24ocyl7cmV0dXJuIHI9MCxlLmZvckVhY2goKGZ1bmN0aW9uKHMpe3JldHVybiBNKHZvaWQgMCx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBvLGEsdTtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihjKXtzd2l0Y2goYy5sYWJlbCl7Y2FzZSAwOm89dCtcIjovL1wiK3MrXCIvcGluZz9yPVwiKyhsPTk5OTksKGg9MWUzKStNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqKGwtaCkpKSxnZS5kZWJ1ZyhcInN0YXJ0IHBpbmdcIixvKSxyKyssYy5sYWJlbD0xO2Nhc2UgMTpyZXR1cm4gYy50cnlzLnB1c2goWzEsMywsNF0pLFs0LG4uaHR0cFJlcSh7dXJsOm8sdGltZW91dDo1ZTN9KV07Y2FzZSAyOnJldHVybiBhPWMuc2VudCgpLFszLDRdO2Nhc2UgMzpyZXR1cm4gdT1jLnNlbnQoKSxnZS5lcnJvcihcInBpbmcgZXJyb3I6IFwiLHUpLGkoe2ZpbmlzaGVkOnI9PT1lLmxlbmd0aCxjb2RlOi0yLGhvc3Q6c30pLFsyXTtjYXNlIDQ6cmV0dXJuIGdlLmRlYnVnKFwiZW5kIHBpbmdcIixyLG8sbnVsbD09YT92b2lkIDA6YS5zdGF0dXMpLGkoe2ZpbmlzaGVkOnI9PT1lLmxlbmd0aCxjb2RlOmEuc3RhdHVzLGhvc3Q6c30pLFsyXX12YXIgaCxsfSkpfSkpfSkpLFsyXX0pKX0pKX0sUHI9ZnVuY3Rpb24oZSx0LG4saSxyLHMsbyxhKXtyZXR1cm4gZStcIjovL1wiK3QrXCIvd2Vic29ja2V0P2FwcElkPVwiK24rXCImdG9rZW49XCIrZW5jb2RlVVJJQ29tcG9uZW50KGkpK1wiJnNka1Zlcj1cIitzK1wiJnBpZD1cIitvK1wiJmFwaVZlcj1cIisoci5pc0Zyb21VbmlhcHA/XCJ1bmlhcHBcIjpcIm5vcm1hbFwiKSsoci5jb25uZWN0UGxhdGZvcm0/XCImcGxhdGZvcm09XCIrci5jb25uZWN0UGxhdGZvcm06XCJcIikrKGE/XCImcHJvdG9jb2xWZXI9XCIrYTpcIlwiKX0sRHI9ZnVuY3Rpb24oZSl7cmV0dXJuW2JyLnBwTXNnUyxici5wZ01zZ1MsYnIuY2hhdE1zZ1NdLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIGJyW2VdfSkpLmluZGV4T2YoZSk+PTB9OyFmdW5jdGlvbihlKXtlW2UuUkVESVJFQ1Q9MF09XCJSRURJUkVDVFwiLGVbZS5PVEhFUl9ERVZJQ0VfTE9HSU49MV09XCJPVEhFUl9ERVZJQ0VfTE9HSU5cIixlW2UuQkxPQ0s9Ml09XCJCTE9DS1wiLGVbZS5SRU1PVEVfQ0xPU0U9M109XCJSRU1PVEVfQ0xPU0VcIixlW2UuTE9HT1VUPTRdPVwiTE9HT1VUXCIsZVtlLkJMT0NLX05FVz01XT1cIkJMT0NLX05FV1wiLGVbZS5SRURJUkVDVF9ORVc9Nl09XCJSRURJUkVDVF9ORVdcIn0oVXJ8fChVcj17fSkpO3ZhciBWcixrcj1mdW5jdGlvbihlLHQpe2dlLmluZm8oXCJ3ZWJzb2NrZXQgc2VuZCAtPiBtZXNzYWdlSWQ6IFwiK2UubWVzc2FnZUlkK1wiIHRvcGljOiBcIitlLnRvcGljKTt2YXIgbj1lLmdldEJ1ZmZlckRhdGEoKTt0LnNlbmQobi5idWZmZXIpfSx4cj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQsbil7dmFyIGk9ZS5jYWxsKHRoaXMsXCJ3ZWJzb2NrZXRcIixuKXx8dGhpcztyZXR1cm4gaS5fcnVudGltZT10LGkuX3NvY2tldD1udWxsLGkuX21lc3NhZ2VJZHM9e30saS5fc3luY01lc3NhZ2VJZHM9e30saS5fZmFpbGVkQ291bnQ9MCxpLkFMTE9XX0ZBSUxFRF9USU1FUz0yLGkuX3RpbWVyPW51bGwsaS5faWRDb3VudD0wLGkuX2dlbmVyYXRlTWVzc2FnZUlkPWZ1bmN0aW9uKCl7cmV0dXJuIGkuX2lkQ291bnQ+PTY1NTM1JiYoaS5faWRDb3VudD0wKSwrK2kuX2lkQ291bnR9LGl9cmV0dXJuIE4odCxlKSx0LnByb3RvdHlwZS5jb25uZWN0PWZ1bmN0aW9uKGUsdCxuLGkscixzKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG89dGhpcztyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihhKXtyZXR1cm5bMixuZXcgUHJvbWlzZSgoZnVuY3Rpb24oYSl7dmFyIHU9W10sYz0wLGg9ITEsbD0hMSxkPWZ1bmN0aW9uKCl7cmV0dXJuIE0obyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBuO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKG8pe3N3aXRjaChvLmxhYmVsKXtjYXNlIDA6cmV0dXJuIDA9PT11Lmxlbmd0aHx8aD9bMl06KGg9ITAsWzQsdGhpcy5fY29ubmVjdChlLHQsdS5zaGlmdCgpLGkscixzKV0pO2Nhc2UgMTppZigobj1vLnNlbnQoKSk9PT1FZS5TVUNDRVNTKXRoaXMuX2NoZWNrQWxpdmUoKSxhKG4pO2Vsc2UgaWYobj09PUNlLlJFRElSRUNUKWEobik7ZWxzZXtpZihsJiYwPT09dS5sZW5ndGgpcmV0dXJuIGEoRXQobikpLFsyXTtoPSExLGQoKX1yZXR1cm5bMl19fSkpfSkpfTtyPXgociksby5fd2F0Y2hlci5zdGF0dXMoSWUuQ09OTkVDVElORyksTHIobixpLG8uX3J1bnRpbWUsKGZ1bmN0aW9uKGUpe3ZhciB0PWUuY29kZSxuPWUuZmluaXNoZWQsaT1lLmhvc3Q7bD1uLDIwMD09PXQmJih1LnB1c2goaSksYysrLGQoKSksbiYmMD09PWMmJihnZS5lcnJvcihcIk5vIHZhbGlkIHdlYnNvY2tldCBzZXJ2ZXIgaG9zdHMhXCIpLGEoRWUuUkNfU09DS0VUX05PVF9DUkVBVEVEKSl9KSl9KSldfSkpfSkpfSx0LnByb3RvdHlwZS5fY29ubmVjdD1mdW5jdGlvbihlLHQsbixpLHIscyl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBvLGEsdSxjLGgsbD10aGlzO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGQpe3N3aXRjaChkLmxhYmVsKXtjYXNlIDA6cmV0dXJuIG89aS5yZXBsYWNlKFwiaHR0cFwiLFwid3NcIiksYT1QcihvLG4sZSx0LHRoaXMuX3J1bnRpbWUscixcIlwiLHMpLGdlLmRlYnVnKFwiY29uZW5jdCBzdGFydCAtPiBcIithKSx0aGlzLnNlbmRDb25uZWN0VGltZT1EYXRlLm5vdygpLHU9dGhpcy5fcnVudGltZS5jcmVhdGVXZWJTb2NrZXQoYSksYz1mdW5jdGlvbihlKXtsLl90aW1lciYmKGNsZWFyVGltZW91dChsLl90aW1lciksbC5fdGltZXI9bnVsbCksbC5fc29ja2V0PT09dSYmKGwuX3NvY2tldD1udWxsLGwuX3dhdGNoZXIuc3RhdHVzKGUpKX0sWzQsbmV3IFByb21pc2UoKGZ1bmN0aW9uKGUpe3Uub25NZXNzYWdlKChmdW5jdGlvbih0KXtpZihcIltvYmplY3QgQXJyYXlCdWZmZXJdXCI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCkpe3ZhciBuPWZ1bmN0aW9uKGUsdCl7dmFyIG49bmV3IFVpbnQ4QXJyYXkoZSksaT1uZXcgd3Qobikscj1pLnJlYWRCeXRlKCkscz1uZXcgT3Qociksbz1BcihzKTtyZXR1cm4gby5yZWFkKGksbi5sZW5ndGgtMSx0KSxvfSh0LHMpO2lmKG4gaW5zdGFuY2VvZiBFciYmbC5fcGluZ1Jlc29sdmUpcmV0dXJuIGwuX3BpbmdSZXNvbHZlKEVlLlNVQ0NFU1MpLHZvaWQobC5fcGluZ1Jlc29sdmU9dm9pZCAwKTtpZihuIGluc3RhbmNlb2YgeXIpcmV0dXJuIGdlLmRlYnVnKFwicmVjdiBjb25uZWN0IGFjayAtPiBcIituLnN0YXR1cyksbi5zdGF0dXMhPT1DZS5BQ0NFUFRFRD8oZ2Uud2FybihcImNvbm5lY3QgZmFpbGVkOiBcIituLnN0YXR1cyksdm9pZCBlKG4uc3RhdHVzKSk6KGdlLmluZm8oXCJjb25uZWN0IHN1Y2Nlc3MgLT4gXCIrYSksbC5jb25uZWN0ZWRUaW1lPW4udGltZXN0YW1wLGwudXNlcklkPW4udXNlcklkfHxcIlwiLGwuX2lkQ291bnQ9bi5tZXNzYWdlSWQsdm9pZCBlKEVlLlNVQ0NFU1MpKTtpZihuIGluc3RhbmNlb2YgbXIpe3ZhciBpPW4uc3RhdHVzO3N3aXRjaChnZS53YXJuKFwicmVjdiBkaXNjb25uZWN0IHNpZ25hbCAtPiBzdGF0dXM6IFwiK2kpLGkpe2Nhc2UgVXIuQkxPQ0tfTkVXOmNhc2UgVXIuQkxPQ0s6bC5fd2F0Y2hlci5zdGF0dXMoSWUuQkxPQ0tFRCk7YnJlYWs7Y2FzZSBVci5PVEhFUl9ERVZJQ0VfTE9HSU46bC5fd2F0Y2hlci5zdGF0dXMoSWUuS0lDS0VEX09GRkxJTkVfQllfT1RIRVJfQ0xJRU5UKTticmVhaztjYXNlIFVyLlJFRElSRUNUX05FVzpjYXNlIFVyLlJFRElSRUNUOmwuX3dhdGNoZXIuc3RhdHVzKEllLlJFRElSRUNUKTticmVhaztkZWZhdWx0OmwuX3dhdGNoZXIuc3RhdHVzKEllLkRJU0NPTk5FQ1RfQllfU0VSVkVSKX19ZWxzZSBsLl9vblJlY2VpdmVTaWduYWwobil9ZWxzZSBnZS5lcnJvcihcIlNvY2tldCByZWNlaXZlZCBpbnZhbGlkIGRhdGE6XCIsdCl9KSksdS5vbkNsb3NlKChmdW5jdGlvbih0LG4pe2Zvcih2YXIgaSBpbiBnZS53YXJuKFwid2Vic29ja2V0IGNsb3NlZCEgY29kZTpcIix0LFwicmVhc29uOlwiLG4pLGMoSWUuQ09OTkVDVElPTl9DTE9TRUQpLGwuX21lc3NhZ2VJZHMpe3ZhciByPWwuX21lc3NhZ2VJZHNbaV07ZGVsZXRlIGwuX21lc3NhZ2VJZHNbaV0scihFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEKX1lKHQpfSkpLHUub25FcnJvcigoZnVuY3Rpb24odCl7dmFyIG47Zm9yKHZhciBpIGluIGdlLmVycm9yKFwid2Vic29ja2V0IGVycm9yIVwiLG51bGw9PT0obj10KXx8dm9pZCAwPT09bj92b2lkIDA6bi5zdGFjayksYyhJZS5XRUJTT0NLRVRfRVJST1IpLGwuX21lc3NhZ2VJZHMpe3ZhciByPWwuX21lc3NhZ2VJZHNbaV07ZGVsZXRlIGwuX21lc3NhZ2VJZHNbaV0scihFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEKX1lKEVlLk5FVFdPUktfRVJST1IpfSkpLHUub25PcGVuKChmdW5jdGlvbigpe3JldHVybiBnZS5kZWJ1ZyhcIndlYnNvY2tldCBvcGVuID0+XCIsYSl9KSksc2V0VGltZW91dCgoZnVuY3Rpb24oKXtlKEVlLlRJTUVPVVQpfSksNWUzKX0pKV07Y2FzZSAxOnJldHVybihoPWQuc2VudCgpKT09PUVlLlNVQ0NFU1M/dGhpcy5fc29ja2V0PXU6KGdlLndhcm4oXCJjb25uZWN0IHJlc3VsdCAtPiBjb2RlOiBcIitoK1wiLCB1cmw6IFwiK2EpLHUuY2xvc2UoKSksWzIsaF19fSkpfSkpfSx0LnByb3RvdHlwZS5fY2hlY2tBbGl2ZT1mdW5jdGlvbigpe3ZhciBlO3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgdCxuPXRoaXM7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oaSl7c3dpdGNoKGkubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5fc29ja2V0PyhnZS5kZWJ1ZyhcInNlbmQgcGluZyAtPlwiKSx0aGlzLnNlbmRPbmx5KG5ldyB2ciksWzQsbmV3IFByb21pc2UoKGZ1bmN0aW9uKGUpe24uX3BpbmdSZXNvbHZlPWUsbi5fdGltZXImJmNsZWFyVGltZW91dChuLl90aW1lciksbi5fdGltZXI9c2V0VGltZW91dCgoZnVuY3Rpb24oKXtuLl9waW5nUmVzb2x2ZT12b2lkIDAsZShFZS5USU1FT1VUKX0pLDE1ZTMpfSkpXSk6WzJdO2Nhc2UgMTpyZXR1cm4odD1pLnNlbnQoKSkhPT1FZS5TVUNDRVNTPyh0aGlzLl9mYWlsZWRDb3VudCs9MSxnZS53YXJuKFwicGluZyBmYWlsZWQgY291bnQ6IFwiK3RoaXMuX2ZhaWxlZENvdW50K1wiLCBjb2RlOiBcIit0KSx0aGlzLl9mYWlsZWRDb3VudD49dGhpcy5BTExPV19GQUlMRURfVElNRVM/KHRoaXMuX2ZhaWxlZENvdW50PTAsZ2Uud2FybihcInBpbmcgdGltZW91dCwgY2xvc2UgY3VycmVudCB3ZWJzb2NrZXQgdG8gcmVjb25uZWN0IVwiKSxudWxsPT09KGU9dGhpcy5fc29ja2V0KXx8dm9pZCAwPT09ZXx8ZS5jbG9zZSgpLHRoaXMuX3dhdGNoZXIuc3RhdHVzKEllLk5FVFdPUktfVU5BVkFJTEFCTEUpKTp0aGlzLl9jaGVja0FsaXZlKCksWzJdKTooZ2UuZGVidWcoXCJyZWN2IHBvbmcgPC1cIiksdGhpcy5fZmFpbGVkQ291bnQ9MCxzZXRUaW1lb3V0KChmdW5jdGlvbigpe3JldHVybiBuLl9jaGVja0FsaXZlKCl9KSwxNWUzKSxbMl0pfX0pKX0pKX0sdC5wcm90b3R5cGUuX29uUmVjZWl2ZVNpZ25hbD1mdW5jdGlvbihlKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHQsbixpLHIscyxvLGE9dGhpcztyZXR1cm4gdyh0aGlzLChmdW5jdGlvbih1KXtzd2l0Y2godS5sYWJlbCl7Y2FzZSAwOnJldHVybiB0PWUubWVzc2FnZUlkLGUuaGVhZGVyJiZlLmhlYWRlci5xb3MhPT16ZS5BVF9NT1NUX09OQ0UmJihlIGluc3RhbmNlb2YgQ3ImJiFlLnN5bmNNc2cmJihnZS5pbmZvKFwic2VuZCBwdWJBY2sgLT4gXCIrdCtcIiBcIitlLnRvcGljKSx0aGlzLnNlbmRPbmx5KG5ldyBOcih0KSkpLGUgaW5zdGFuY2VvZiB3ciYmKGdlLmluZm8oXCJzZW5kIHF1ZXJ5Q29uIC0+IFwiK3QrXCIgXCIrZS50b3BpYyksdGhpcy5zZW5kT25seShuZXcgTXIodCkpKSksdD4wJiYoZSBpbnN0YW5jZW9mIFNyfHxlIGluc3RhbmNlb2Ygd3IpJiYoZ2UuaW5mbyhcInJlY3YgYWNrIC0+IG1lc3NhZ2VJZDogXCIrdCtcIiBcIitlLnRvcGljKSwobj10aGlzLl9tZXNzYWdlSWRzW3RdKSYmKG4oZSksZGVsZXRlIHRoaXMuX21lc3NhZ2VJZHNbdF0pLChpPXRoaXMuX3N5bmNNZXNzYWdlSWRzW3RdKSYmKGRlbGV0ZSB0aGlzLl9zeW5jTWVzc2FnZUlkc1t0XSxpKGUpKSksZSBpbnN0YW5jZW9mIENyPyhyPWUuc3luY01zZyxzPWUudG9waWMsZ2UuaW5mbyhcInJlY3YgUHVibGlzaFJlYWRlciAtPiBtZXNzYWdlSWQ6IFwiK3QrXCIgXCIrcykscz09PWJyW2JyLnVzZXJTZXREYXRhXT9bMl06IXJ8fERyKHMpPyh0aGlzLl93YXRjaGVyLnNpZ25hbChlKSxbMl0pOls0LG5ldyBQcm9taXNlKChmdW5jdGlvbihlKXthLl9zeW5jTWVzc2FnZUlkc1t0XT1lfSkpXSk6WzMsMl07Y2FzZSAxOm89dS5zZW50KCksZGVsZXRlIHRoaXMuX3N5bmNNZXNzYWdlSWRzW3RdLHRoaXMuX3dhdGNoZXIuc2lnbmFsKGUsbyksdS5sYWJlbD0yO2Nhc2UgMjpyZXR1cm5bMl19fSkpfSkpfSx0LnByb3RvdHlwZS5zZW5kT25seT1mdW5jdGlvbihlKXt0aGlzLl9zb2NrZXQmJigoZSBpbnN0YW5jZW9mIFJyfHxlIGluc3RhbmNlb2YgT3IpJiYoZS5tZXNzYWdlSWQ9dGhpcy5fZ2VuZXJhdGVNZXNzYWdlSWQoKSksa3IoZSx0aGlzLl9zb2NrZXQpKX0sdC5wcm90b3R5cGUuc2VuZD1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gdm9pZCAwPT09aSYmKGk9M2U0KSxNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgcixzLG8sYT10aGlzO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKHUpe3N3aXRjaCh1LmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuX3NvY2tldD8ocj10aGlzLl9nZW5lcmF0ZU1lc3NhZ2VJZCgpLGUubWVzc2FnZUlkPXIsa3IoZSx0aGlzLl9zb2NrZXQpLFs0LG5ldyBQcm9taXNlKChmdW5jdGlvbihlKXthLl9tZXNzYWdlSWRzW3JdPWUsc2V0VGltZW91dCgoZnVuY3Rpb24oKXthLl9tZXNzYWdlSWRzW3JdJiZkZWxldGUgYS5fbWVzc2FnZUlkc1tyXSxlKCl9KSxpKX0pKV0pOlszLDJdO2Nhc2UgMTpyZXR1cm4ocz11LnNlbnQoKSk/cyBpbnN0YW5jZW9mIHdyfHxzIGluc3RhbmNlb2YgU3I/KG89dCYmcy5kYXRhP3RoaXMuY29kZWMuZGVjb2RlQnlQQk5hbWUocy5kYXRhLHQsbik6cywwIT09cy5zdGF0dXM/KGdlLndhcm4oXCJzZW5kIGZhaWxlZCAtPiBtZXNzYWdlOiBcIityK1wiLCByZXNwUEJOYW1lOiBcIit0K1wiLCBzdGF0dXM6IFwiK3Muc3RhdHVzKSxbMix7Y29kZTpzLnN0YXR1cyxkYXRhOnQmJnMuZGF0YT9vOm51bGx9XSk6WzIse2NvZGU6RWUuU1VDQ0VTUyxkYXRhOm99XSk6WzIse2NvZGU6c31dOihnZS53YXJuKFwic2VuZCB0aW1lb3V0IC0+IG1lc3NhZ2U6IFwiK3IrXCIsIHJlc3BQQk5hbWU6IFwiK3QrXCIsIHRpbWVvdXQ6IFwiK2kpLFsyLHtjb2RlOkVlLlRJTUVPVVR9XSk7Y2FzZSAyOnJldHVyblsyLHtjb2RlOkVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSUR9XX19KSl9KSl9LHQucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uKCl7dGhpcy5fc29ja2V0JiYodGhpcy5fc29ja2V0LmNsb3NlKCksdGhpcy5fc29ja2V0PW51bGwsdGhpcy5fd2F0Y2hlci5zdGF0dXMoSWUuRElTQ09OTkVDVEVEKSl9LHR9KGZyKTshZnVuY3Rpb24oZSl7ZS5HRVQ9XCJHRVRcIixlLlBPU1Q9XCJQT1NUXCJ9KFZyfHwoVnI9e30pKTt2YXIgQnI9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LG4pe3ZhciBpPWUuY2FsbCh0aGlzLFwiY29tZXRcIixuKXx8dGhpcztyZXR1cm4gaS5fcnVudGltZT10LGkuX21lc3NhZ2VJZHM9e30saS5fc3luY01lc3NhZ2VJZHM9e30saS5faWRDb3VudD0wLGkuX2dlbmVyYXRlTWVzc2FnZUlkPWZ1bmN0aW9uKCl7cmV0dXJuKytpLl9pZENvdW50fSxpLl9waWQ9ZW5jb2RlVVJJQ29tcG9uZW50KChuZXcgRGF0ZSkuZ2V0VGltZSgpK01hdGgucmFuZG9tKCkrXCJcIiksaX1yZXR1cm4gTih0LGUpLHQucHJvdG90eXBlLmhhbmRsZUNvbWV0UmVzPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYoMjAwIT09ZS5zdGF0dXMmJjIwMiE9PWUuc3RhdHVzKXJldHVybiExO3ZhciBuPUooZS5kYXRhKT9KU09OLnBhcnNlKGUuZGF0YSk6ZS5kYXRhO3JldHVybiBuPyFYKG4pfHwoZHQobiwoZnVuY3Rpb24oZSl7cmV0dXJuIE0odCx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciB0LG4saSxyLHMsbyxhLHUsYyxoLGwsZD10aGlzO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGYpe3N3aXRjaChmLmxhYmVsKXtjYXNlIDA6aWYoKHQ9ZS5zZXNzaW9uaWQpJiYodGhpcy5fc2Vzc2lvbmlkPXQpLG49ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5oZWFkZXJDb2RlLG49bmV3IE90KHQpLGk9QXIobik7Zm9yKHZhciByIGluIGUpaVtyXT1lW3JdO3JldHVybiBpfShlKSxpPW4ubWVzc2FnZUlkLHI9bi5faGVhZGVyLHM9bi5zdGF0dXMsbi5pZGVudGlmaWVyLG89ciYmci5xb3MhPT16ZS5BVF9NT1NUX09OQ0UsaSYmbi5nZXRJZGVudGlmaWVyJiYoKGE9dGhpcy5fbWVzc2FnZUlkc1tpXSkmJmEobiksdGhpcy5fc3luY01lc3NhZ2VJZHNbaV0mJnRoaXMuX3N5bmNNZXNzYWdlSWRzW2ldKG4pKSxvJiYobiBpbnN0YW5jZW9mIENyJiYhbi5zeW5jTXNnJiYodT1uZXcgTnIoaSksdGhpcy5zZW5kT25seSh1KSksbiBpbnN0YW5jZW9mIHdyJiYodT1uZXcgTXIoaSksdGhpcy5zZW5kT25seSh1KSkpLG4gaW5zdGFuY2VvZiBtcil7c3dpdGNoKHMpe2Nhc2UgVXIuT1RIRVJfREVWSUNFX0xPR0lOOnRoaXMuX3dhdGNoZXIuc3RhdHVzKEllLktJQ0tFRF9PRkZMSU5FX0JZX09USEVSX0NMSUVOVCk7YnJlYWs7Y2FzZSBVci5CTE9DSzpjYXNlIFVyLkJMT0NLX05FVzp0aGlzLl93YXRjaGVyLnN0YXR1cyhJZS5CTE9DS0VEKTticmVhaztjYXNlIFVyLlJFRElSRUNUX05FVzpjYXNlIFVyLlJFRElSRUNUOnRoaXMuX3dhdGNoZXIuc3RhdHVzKEllLlJFRElSRUNUKTticmVhaztkZWZhdWx0OnRoaXMuX3dhdGNoZXIuc3RhdHVzKEllLkRJU0NPTk5FQ1RfQllfU0VSVkVSKX1yZXR1cm5bMl19cmV0dXJuIG4gaW5zdGFuY2VvZiBDcj8oYz1uLnN5bmNNc2csaD1uLnRvcGljLCFjfHxEcihoKT8odGhpcy5fd2F0Y2hlci5zaWduYWwobiksWzIsITFdKTpbNCxuZXcgUHJvbWlzZSgoZnVuY3Rpb24oZSl7ZC5fc3luY01lc3NhZ2VJZHNbaV09ZX0pKV0pOlszLDJdO2Nhc2UgMTpsPWYuc2VudCgpLGRlbGV0ZSB0aGlzLl9zeW5jTWVzc2FnZUlkc1tpXSx0aGlzLl93YXRjaGVyLnNpZ25hbChuLGwpLGYubGFiZWw9MjtjYXNlIDI6cmV0dXJuWzJdfX0pKX0pKX0pKSwhMCk6KGdlLmVycm9yKFwicmVjZWl2ZWQgZGF0YSBpcyBub3QgYSB2YWxpZEpzb25cIixuKSwhMSl9LHQucHJvdG90eXBlLl9zdGFydFB1bGxTaWduYWw9ZnVuY3Rpb24oZSl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciB0LG4saSxyO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKHMpe3N3aXRjaChzLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHQ9KG5ldyBEYXRlKS5nZXRUaW1lKCksbj1lK1wiOi8vXCIrdGhpcy5fZG9tYWluK1wiL3B1bGxtc2cuanM/c2Vzc2lvbmlkPVwiK3RoaXMuX3Nlc3Npb25pZCtcIiZ0aW1lc3RyYXA9XCIrdCtcIiZwaWQ9XCIrdGhpcy5fcGlkLFs0LHRoaXMuX3J1bnRpbWUuaHR0cFJlcSh7dXJsOm4sYm9keTp7cGlkOnRoaXMuX3BpZH0sdGltZW91dDo0NWUzfSldO2Nhc2UgMTpyZXR1cm4gaT1zLnNlbnQoKSxyPXRoaXMuaGFuZGxlQ29tZXRSZXMoaSksdGhpcy5faXNEaXNjb25uZWN0ZWR8fChyP3RoaXMuX3N0YXJ0UHVsbFNpZ25hbChlKToodGhpcy5faXNEaXNjb25uZWN0ZWQ9ITAsdGhpcy5fd2F0Y2hlci5zdGF0dXMoSWUuTkVUV09SS19VTkFWQUlMQUJMRSkpKSxbMl19fSkpfSkpfSx0LnByb3RvdHlwZS5jb25uZWN0PWZ1bmN0aW9uKGUsdCxuLGkscixzKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHMsbyxhLHUsYz10aGlzO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGgpe3JldHVybiByPXgociksdGhpcy5fcHJvdG9jb2w9aSx0aGlzLl9pc0Rpc2Nvbm5lY3RlZD0hMSx0aGlzLl93YXRjaGVyLnN0YXR1cyhJZS5DT05ORUNUSU5HKSxzPVtdLG89MCxhPSExLHU9ITEsWzIsbmV3IFByb21pc2UoKGZ1bmN0aW9uKGgpe3ZhciBsPWZ1bmN0aW9uKCl7cmV0dXJuIE0oYyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBuO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKG8pe3N3aXRjaChvLmxhYmVsKXtjYXNlIDA6cmV0dXJuIDA9PT1zLmxlbmd0aHx8YT9bMl06KGE9ITAsWzQsdGhpcy5fY29ubmVjdChlLHQscy5zaGlmdCgpLGkscildKTtjYXNlIDE6aWYoKG49by5zZW50KCkpPT09RWUuU1VDQ0VTUyl0aGlzLl9zdGFydFB1bGxTaWduYWwoaSksaChuKTtlbHNlIGlmKG49PT1DZS5SRURJUkVDVCloKG4pO2Vsc2V7aWYodSYmMD09PXMubGVuZ3RoKXJldHVybiBoKEV0KG4pKSxbMl07YT0hMSxsKCl9cmV0dXJuWzJdfX0pKX0pKX07Yy5fd2F0Y2hlci5zdGF0dXMoSWUuQ09OTkVDVElORyksTHIobixpLGMuX3J1bnRpbWUsKGZ1bmN0aW9uKGUpe3ZhciB0PWUuY29kZSxuPWUuZmluaXNoZWQsaT1lLmhvc3Q7dT1uLDIwMD09PXQmJihzLnB1c2goaSksbysrLGwoKSksbiYmMD09PW8mJihnZS5lcnJvcihcIk5vIHZhbGlkIHdlYnNvY2tldCBzZXJ2ZXIgaG9zdHMhXCIpLGgoRWUuUkNfU09DS0VUX05PVF9DUkVBVEVEKSl9KSl9KSldfSkpfSkpfSx0LnByb3RvdHlwZS5fY29ubmVjdD1mdW5jdGlvbihlLHQsbixpLHIpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgcyxvLGEsdTtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihjKXtzd2l0Y2goYy5sYWJlbCl7Y2FzZSAwOnJldHVybiBzPWZ1bmN0aW9uKGUpe3JldHVybiAyMDAhPT1lLnN0YXR1cyYmMjAyIT09ZS5zdGF0dXM/KGdlLmVycm9yKFwiaGFuZGxlIGNvbWV0IHJlcyAtPiByZXM6IFwiK0pTT04uc3RyaW5naWZ5KGV8fHt9KSksITEpOiEhZS5kYXRhJiYoZnVuY3Rpb24oZSl7aWYobmUoZSkpcmV0dXJuITA7dmFyIHQ9ITE7dHJ5e3ZhciBuPUpTT04ucGFyc2UoZSk7dD1KU09OLnN0cmluZ2lmeShuKT09PWV9Y2F0Y2goZSl7dD0hMX1yZXR1cm4gdH0oZS5kYXRhKT9uZShlLmRhdGEpP2UuZGF0YTpKU09OLnBhcnNlKGUuZGF0YSk6KGdlLmVycm9yKFwicmVjZWl2ZWQgZGF0YSBpcyBub3QgYSB2YWxpZEpzb25cIixlLmRhdGEpLCExKSl9LG89UHIoaSxuLGUsdCx0aGlzLl9ydW50aW1lLHIsdGhpcy5fcGlkKSx0aGlzLnNlbmRDb25uZWN0VGltZT1EYXRlLm5vdygpLGdlLmRlYnVnKFwiY29uZW5jdCBzdGFydCAtPiBcIitvKSxbNCx0aGlzLl9ydW50aW1lLmh0dHBSZXEoe3VybDpvLGJvZHk6e3BpZDp0aGlzLl9waWR9LHRpbWVvdXQ6NWUzfSldO2Nhc2UgMTpyZXR1cm4gYT1jLnNlbnQoKSx1PXMoYSksdGhpcy5fZG9tYWluPW4sdSYmMD09PXUuc3RhdHVzPyh0aGlzLl9zZXNzaW9uaWQ9dS5zZXNzaW9uaWQsdGhpcy51c2VySWQ9dS51c2VySWQsdGhpcy5jb25uZWN0ZWRUaW1lPXUudGltZXN0YW1wKTpnZS53YXJuKFwiY29ubmVjdCByZXN1bHQgLT4gY29kZTogXCIrKG51bGw9PXU/dm9pZCAwOnUuc3RhdHVzKStcIiwgdXJsOiBcIitvKSxbMixudWxsPT11P3ZvaWQgMDp1LnN0YXR1c119fSkpfSkpfSx0LnByb3RvdHlwZS5zZW5kQ29tZXREYXRhPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciB0LG4saSxyLHMsbyxhLHUsYyxoO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGwpe3N3aXRjaChsLmxhYmVsKXtjYXNlIDA6cmV0dXJuIG49KHQ9dGhpcykuX2RvbWFpbixpPXQuX3Nlc3Npb25pZCxyPXQuX3BpZCxzPWUubWVzc2FnZUlkLG89ZS50b3BpYyxhPWUudGFyZ2V0SWQsZS5pZGVudGlmaWVyLHU9ZS5nZXRIZWFkZXJGbGFnKCksYz1vP3RoaXMuX3Byb3RvY29sK1wiOi8vXCIrbitcIi93ZWJzb2NrZXQ/bWVzc2FnZWlkPVwiK3MrXCImaGVhZGVyPVwiK3UrXCImc2Vzc2lvbmlkPVwiK2krXCImdG9waWM9XCIrbytcIiZ0YXJnZXRpZD1cIithK1wiJnBpZD1cIityOnRoaXMuX3Byb3RvY29sK1wiOi8vXCIrbitcIi93ZWJzb2NrZXQ/bWVzc2FnZWlkPVwiK3MrXCImaGVhZGVyPVwiK3UrXCImc2Vzc2lvbmlkPVwiK2krXCImcGlkPVwiK3IsWzQsdGhpcy5fcnVudGltZS5odHRwUmVxKHt1cmw6YyxtZXRob2Q6VnIuUE9TVCxib2R5OmUuZ2V0Q29tZXREYXRhKCl9KV07Y2FzZSAxOnJldHVybiBoPWwuc2VudCgpLHRoaXMuaGFuZGxlQ29tZXRSZXMoaCksWzJdfX0pKX0pKX0sdC5wcm90b3R5cGUuc2VuZE9ubHk9ZnVuY3Rpb24oZSl7dGhpcy5zZW5kQ29tZXREYXRhKGUpfSx0LnByb3RvdHlwZS5zZW5kPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiB2b2lkIDA9PT1pJiYoaT0zZTQpLE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciByLHMsbyxhPXRoaXM7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24odSl7c3dpdGNoKHUubGFiZWwpe2Nhc2UgMDpyZXR1cm4gcj10aGlzLl9nZW5lcmF0ZU1lc3NhZ2VJZCgpLGUubWVzc2FnZUlkPXIsdGhpcy5zZW5kQ29tZXREYXRhKGUpLFs0LG5ldyBQcm9taXNlKChmdW5jdGlvbihlKXthLl9tZXNzYWdlSWRzW3JdPWUsc2V0VGltZW91dCgoZnVuY3Rpb24oKXtkZWxldGUgYS5fbWVzc2FnZUlkc1tyXSxlKCl9KSxpKX0pKV07Y2FzZSAxOnJldHVybihzPXUuc2VudCgpKT8obz10JiZzLmRhdGE/dGhpcy5jb2RlYy5kZWNvZGVCeVBCTmFtZShzLmRhdGEsdCxuKTpzLDAhPT1zLnN0YXR1cz9bMix7Y29kZTpzLnN0YXR1cyxkYXRhOnQmJnMuZGF0YT9vOm51bGx9XTpbMix7Y29kZTpFZS5TVUNDRVNTLGRhdGE6b31dKTpbMix7Y29kZTpFZS5USU1FT1VUfV19fSkpfSkpfSx0LnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbigpe3RoaXMuX2lzRGlzY29ubmVjdGVkPSEwLHRoaXMuX3dhdGNoZXIuc3RhdHVzKEllLkRJU0NPTk5FQ1RFRCl9LHR9KGZyKSxHcj1mdW5jdGlvbihlLHQsbil7dGhpcy5ydW50aW1lPWUsdGhpcy5fd2F0Y2hlcj10LHRoaXMuX29wdGlvbnM9bix0aGlzLmN1cnJlbnRVc2VySWQ9XCJcIix0aGlzLl9hcHBrZXk9dGhpcy5fb3B0aW9ucy5hcHBrZXksdGhpcy5fYXBpVmVyPXRoaXMuX29wdGlvbnMuYXBpVmVyc2lvbix0aGlzLm5hdmk9dGhpcy5fY3JlYXRlTmF2aSgpfSxGcj1mdW5jdGlvbihlKXtyZXR1cm5bXCJuYXZpXCIsZV0uam9pbihcIl9cIil9LHFyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3RoaXMuX3J1bnRpbWU9ZSx0aGlzLl9vcHRpb25zPXQsdGhpcy5fbmF2aUluZm89bnVsbCx0aGlzLl9hcHBrZXk9dGhpcy5fb3B0aW9ucy5hcHBrZXksdGhpcy5fYXBpVmVyc2lvbj14KHRoaXMuX29wdGlvbnMuYXBpVmVyc2lvbil9cmV0dXJuIGUucHJvdG90eXBlLmdldEluZm89ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciByLHM7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24obyl7c3dpdGNoKG8ubGFiZWwpe2Nhc2UgMDpyZXR1cm4gbiYmdGhpcy5fY2xlYXIoZSksKHI9ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIscz1GcihlKTt0cnl7dmFyIG89bi5nZXRJdGVtKHMpO3I9bz9KU09OLnBhcnNlKG8pOltdfWNhdGNoKGUpe3I9W119dmFyIGE9RGF0ZS5ub3coKTtyZXR1cm4gci5sZW5ndGg+MCYmKHI9ci5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiBhLWUudGltZXN0YW1wPDcyZTV9KSkpLDA9PT1yLmxlbmd0aD9uLnJlbW92ZUl0ZW0ocyk6bi5zZXRJdGVtKHMsSlNPTi5zdHJpbmdpZnkocikpLChudWxsPT09KGk9ci5maW5kKChmdW5jdGlvbihlKXtyZXR1cm4gZS50b2tlbj09PXR9KSkpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLm5hdmlJbmZvKXx8bnVsbH0odGhpcy5fYXBwa2V5LGUsdGhpcy5fcnVudGltZS5sb2NhbFN0b3JhZ2UpKT8odGhpcy5fbmF2aUluZm89cixbMixyXSk6KHM9dGhpcy5fb3B0aW9ucy5uYXZpZ2F0b3JzLnNsaWNlKCksdC5sZW5ndGgmJnQuZm9yRWFjaCgoZnVuY3Rpb24oZSl7cy5pbmRleE9mKGUpPDAmJnMudW5zaGlmdChlKX0pKSxbNCx0aGlzLl9yZXFOYXZpKHMsdGhpcy5fYXBwa2V5LGUsaSldKTtjYXNlIDE6cmV0dXJuKHI9by5zZW50KCkpPyh0aGlzLl9uYXZpSW5mbz1yLHRoaXMuc2V0TmF2aUluZm8yQ2FjaGUoZSxyKSxbMixyXSk6WzIscl19fSkpfSkpfSxlLnByb3RvdHlwZS5zZXROYXZpSW5mbzJDYWNoZT1mdW5jdGlvbihlLHQpe3RoaXMuX25hdmlJbmZvPXQsZnVuY3Rpb24oZSx0LG4saSl7dmFyIHIscz1GcihlKTt0cnl7dmFyIG89aS5nZXRJdGVtKHMpO3I9bz9KU09OLnBhcnNlKG8pOltdfWNhdGNoKGUpe3I9W119dmFyIGE9RGF0ZS5ub3coKTtyLmxlbmd0aD4wJiYocj1yLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIGEtZS50aW1lc3RhbXA8NzJlNSYmdCE9PWUudG9rZW59KSkpLHIucHVzaCh7dGltZXN0YW1wOmEsbmF2aUluZm86bix0b2tlbjp0fSksaS5zZXRJdGVtKHMsSlNPTi5zdHJpbmdpZnkocikpfSh0aGlzLl9hcHBrZXksZSx0LHRoaXMuX3J1bnRpbWUubG9jYWxTdG9yYWdlKX0sZS5wcm90b3R5cGUuZ2V0SW5mb0Zyb21DYWNoZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbmF2aUluZm99LGUucHJvdG90eXBlLl9jbGVhcj1mdW5jdGlvbihlKXshZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHI9RnIoZSk7dHJ5e3ZhciBzPW4uZ2V0SXRlbShyKTtpPXM/SlNPTi5wYXJzZShzKTpbXX1jYXRjaChlKXtpPVtdfXZhciBvPURhdGUubm93KCk7aS5sZW5ndGg+MCYmKGk9aS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiBvLWUudGltZXN0YW1wPDcyZTUmJnQhPT1lLnRva2VufSkpKSwwPT09aS5sZW5ndGg/bi5yZW1vdmVJdGVtKHIpOm4uc2V0SXRlbShyLEpTT04uc3RyaW5naWZ5KGkpKX0odGhpcy5fYXBwa2V5LGUsdGhpcy5fcnVudGltZS5sb2NhbFN0b3JhZ2UpfSxlfSgpLEtyPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm5bZSx0LG5dLmpvaW4oXCJfXCIpfSxIcj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt0aGlzLl9ydW50aW1lPWUsdGhpcy5fYXBwa2V5PXQsdGhpcy5fdXNlcnM9e319cmV0dXJuIGUucHJvdG90eXBlLl9nZXRNZW1EYXRhPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl91c2Vyc1tlXXx8KHRoaXMuX3VzZXJzW2VdPXtpbmJveFRpbWU6MCxvdXRib3hUaW1lOjB9KX0sZS5wcm90b3R5cGUuc2V0SW5ib3hUaW1lPWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5fZ2V0TWVtRGF0YSh0KTtpZighKG4uaW5ib3hUaW1lPmUpKXtuLmluYm94VGltZT1lO3ZhciBpPUtyKFwiaW5ib3hcIix0aGlzLl9hcHBrZXksdCk7dGhpcy5fcnVudGltZS5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShpLGUudG9TdHJpbmcoKSl9fSxlLnByb3RvdHlwZS5nZXRJbmJveFRpbWU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fZ2V0TWVtRGF0YShlKTtpZigwPT09dC5pbmJveFRpbWUpe3ZhciBuPUtyKFwiaW5ib3hcIix0aGlzLl9hcHBrZXksZSk7dC5pbmJveFRpbWU9cGFyc2VJbnQodGhpcy5fcnVudGltZS5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShuKSl8fDB9cmV0dXJuIHQuaW5ib3hUaW1lfSxlLnByb3RvdHlwZS5zZXRPdXRib3hUaW1lPWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5fZ2V0TWVtRGF0YSh0KTtpZighKG4ub3V0Ym94VGltZT49ZSkpe24ub3V0Ym94VGltZT1lO3ZhciBpPUtyKFwib3V0Ym94XCIsdGhpcy5fYXBwa2V5LHQpO3RoaXMuX3J1bnRpbWUubG9jYWxTdG9yYWdlLnNldEl0ZW0oaSxlLnRvU3RyaW5nKCkpfX0sZS5wcm90b3R5cGUuZ2V0T3V0Ym94VGltZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9nZXRNZW1EYXRhKGUpO2lmKDA9PT10Lm91dGJveFRpbWUpe3ZhciBuPUtyKFwib3V0Ym94XCIsdGhpcy5fYXBwa2V5LGUpO3Qub3V0Ym94VGltZT1wYXJzZUludCh0aGlzLl9ydW50aW1lLmxvY2FsU3RvcmFnZS5nZXRJdGVtKG4pKXx8MH1yZXR1cm4gdC5vdXRib3hUaW1lfSxlfSgpLFlyPXtfY2FjaGVzOnt9LHNldDpmdW5jdGlvbihlLHQpe3RoaXMuX2NhY2hlc1tlXT10fSxnZXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2NhY2hlc1tlXXx8MH0sY2xlYXI6ZnVuY3Rpb24oZSl7dGhpcy5fY2FjaGVzW2VdPTB9fSxqcj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt0aGlzLl9rdkNhY2hlcz17fSx0aGlzLl9jaGF0cm9vbUlkPWUsdGhpcy5fY3VycmVudFVzZXJJZD10fXJldHVybiBlLnByb3RvdHlwZS5fYWRkPWZ1bmN0aW9uKGUpe3ZhciB0PWUua2V5O2UuaXNEZWxldGVkPSExLHRoaXMuX2t2Q2FjaGVzW3RdPWV9LGUucHJvdG90eXBlLl9yZW1vdmU9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5rZXksbj10aGlzLl9rdkNhY2hlc1t0XTtuJiYobi5pc0RlbGV0ZWQ9ITAsdGhpcy5fa3ZDYWNoZXNbdF09bil9LGUucHJvdG90eXBlLl9zZXRFbnRyeT1mdW5jdGlvbihlLHQpe3ZhciBuPWUua2V5LGk9ZS50eXBlLHI9ZS5pc092ZXJ3cml0ZSxzPWUudXNlcklkLG89dGhpcy5fZ2V0U2V0VXNlcklkKG4pLGE9aT09PUxlLkRFTEVURSx1PW89PT1zLGM9IXRoaXMuX2lzRXhpc3RlZChuKSxoPWE/dGhpcy5fcmVtb3ZlOnRoaXMuX2FkZDsodHx8cnx8dXx8YykmJmguY2FsbCh0aGlzLGUpfSxlLnByb3RvdHlwZS5nZXRWYWx1ZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9rdkNhY2hlc1tlXXx8e307cmV0dXJuIHQuaXNEZWxldGVkP251bGw6dC52YWx1ZX0sZS5wcm90b3R5cGUuZ2V0VmVyc2lvbj1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9rdkNhY2hlc1tlXXx8e307cmV0dXJuIHQuaXNEZWxldGVkP251bGw6dC52ZXJzaW9ufSxlLnByb3RvdHlwZS5nZXRBbGxWYWx1ZT1mdW5jdGlvbigpe3ZhciBlPXt9O2Zvcih2YXIgdCBpbiB0aGlzLl9rdkNhY2hlcyl0aGlzLl9rdkNhY2hlc1t0XS5pc0RlbGV0ZWR8fChlW3RdPXRoaXMuX2t2Q2FjaGVzW3RdLnZhbHVlKTtyZXR1cm4gZX0sZS5wcm90b3R5cGUuX2dldFNldFVzZXJJZD1mdW5jdGlvbihlKXtyZXR1cm4odGhpcy5fa3ZDYWNoZXNbZV18fHt9KS51c2VySWR9LGUucHJvdG90eXBlLl9pc0V4aXN0ZWQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fa3ZDYWNoZXNbZV18fHt9LG49dC52YWx1ZSxpPXQuaXNEZWxldGVkO3JldHVybiBuJiYhaX0sZS5wcm90b3R5cGUuc2V0RW50cmllcz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5rdkVudHJpZXMsaT1lLmlzRnVsbFVwZGF0ZTtuPW58fFtdLChpPWl8fCExKSYmdGhpcy5jbGVhcigpLG4uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dC5fc2V0RW50cnkoZSxpKX0pKSxnZS5kZWJ1ZyhcImVuZCBzZXRFbnRyaWVzXCIpfSxlLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3RoaXMuX2t2Q2FjaGVzPXt9fSxlfSgpLFFyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLl9wdWxsUXVldWU9W10sdGhpcy5faXNQdWxsaW5nPSExLHRoaXMuX3N0b3JlQ2FjaGVzPXt9LHRoaXMuX2VuZ2luZT1lfXJldHVybiBlLnByb3RvdHlwZS5fc3RhcnRQdWxsPWZ1bmN0aW9uKCl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBlLHQsbixpLHIscyxvO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGEpe3N3aXRjaChhLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuX2lzUHVsbGluZ3x8MD09PXRoaXMuX3B1bGxRdWV1ZS5sZW5ndGg/WzJdOih0aGlzLl9pc1B1bGxpbmc9ITAsZT10aGlzLl9wdWxsUXVldWUuc3BsaWNlKDAsMSlbMF0sdD1lLmNocm1JZCxuPWUudGltZXN0YW1wLChpPVlyLmdldCh0KSk+bj8odGhpcy5faXNQdWxsaW5nPSExLHRoaXMuX3N0YXJ0UHVsbCgpLFsyXSk6WzQsdGhpcy5fZW5naW5lLnB1bGxDaGF0cm9vbUVudHJ5KHQsaSldKTtjYXNlIDE6cmV0dXJuIHI9YS5zZW50KCkscz1yLmNvZGUsbz1yLmRhdGEsdGhpcy5faXNQdWxsaW5nPSExLHM9PT1FZS5TVUNDRVNTPyhZci5zZXQodCxvLnN5bmNUaW1lfHwwKSx0aGlzLl9zdGFydFB1bGwoKSk6dGhpcy5fc3RhcnRQdWxsKCksWzJdfX0pKX0pKX0sZS5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oZSl7WXIuY2xlYXIoZSk7dmFyIHQ9dGhpcy5fc3RvcmVDYWNoZXNbZV07dCYmdC5jbGVhcigpfSxlLnByb3RvdHlwZS5wdWxsRW50cnk9ZnVuY3Rpb24oZSx0KXt0aGlzLl9wdWxsUXVldWUucHVzaCh7Y2hybUlkOmUsdGltZXN0YW1wOnR9KSx0aGlzLl9zdGFydFB1bGwoKX0sZS5wcm90b3R5cGUuc2V0TG9jYWw9ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXMuX3N0b3JlQ2FjaGVzW2VdO2FlKGkpfHwoaT1uZXcganIoZSxuKSksaS5zZXRFbnRyaWVzKHQpLHRoaXMuX3N0b3JlQ2FjaGVzW2VdPWl9LGUucHJvdG90eXBlLmdldFZhbHVlPWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5fc3RvcmVDYWNoZXNbZV07cmV0dXJuIG4/bi5nZXRWYWx1ZSh0KTpudWxsfSxlLnByb3RvdHlwZS5nZXRWZXJzaW9uPWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5fc3RvcmVDYWNoZXNbZV07cmV0dXJuIG4/bi5nZXRWZXJzaW9uKHQpOm51bGx9LGUucHJvdG90eXBlLmdldEFsbD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9zdG9yZUNhY2hlc1tlXSxuPXt9O3JldHVybiB0JiYobj10LmdldEFsbFZhbHVlKCkpLG59LGV9KCksV3I9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxuLGkpe3RoaXMuX3J1bnRpbWU9ZSx0aGlzLl9hcHBrZXk9dCx0aGlzLl91c2VySWQ9bix0aGlzLl9jYW5Kb2luTXVsaXBsZUNocm09aSx0aGlzLl9zZXNzaW9uS2V5PVwiXCIsdGhpcy5fam9pbmVkQ2hybXNJbmZvPXt9LHRoaXMuX3Nlc3Npb25LZXk9XCJzeW5jLWNocm0tXCIrdGhpcy5fYXBwa2V5K1wiLVwiK3RoaXMuX3VzZXJJZH1yZXR1cm4gZS5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKGUsdCl7dm9pZCAwPT09dCYmKHQ9MTApLCF0aGlzLl9jYW5Kb2luTXVsaXBsZUNocm0mJih0aGlzLl9qb2luZWRDaHJtc0luZm89e30pLHRoaXMuX2pvaW5lZENocm1zSW5mb1tlXT10LHRoaXMuX3J1bnRpbWUuc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSh0aGlzLl9zZXNzaW9uS2V5LEpTT04uc3RyaW5naWZ5KHRoaXMuX2pvaW5lZENocm1zSW5mbykpfSxlLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oKXt2YXIgZSx0O3RyeXt0PXRoaXMuX3J1bnRpbWUuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSh0aGlzLl9zZXNzaW9uS2V5KSxlPUpTT04ucGFyc2UodHx8XCJ7fVwiKX1jYXRjaChuKXtnZS5lcnJvcihcInBhcnNlIHJlam9pbmVkIGNocm0gaW5mb3MgZXJyb3IgLT4gXCIrdCksZT17fX1yZXR1cm4gZX0sZS5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKGUpe2RlbGV0ZSB0aGlzLl9qb2luZWRDaHJtc0luZm9bZV0sYWUodGhpcy5fam9pbmVkQ2hybXNJbmZvKT90aGlzLl9ydW50aW1lLnNlc3Npb25TdG9yYWdlLnNldEl0ZW0odGhpcy5fc2Vzc2lvbktleSxKU09OLnN0cmluZ2lmeSh0aGlzLl9qb2luZWRDaHJtc0luZm8pKTp0aGlzLmNsZWFyKCl9LGUucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy5fam9pbmVkQ2hybXNJbmZvPXt9LHRoaXMuX3J1bnRpbWUuc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbSh0aGlzLl9zZXNzaW9uS2V5KX0sZX0oKSxKcj1cImNvbnZlclN0YXR1c0NoYW5nZWRcIix6cj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LG4pe3RoaXMuX2V2ZW50RW1pdHRlcj1uZXcgX2UsdGhpcy5fcHVsbFF1ZXVlPVtdLHRoaXMuX2lzUHVsbGluZz0hMSx0aGlzLl9zdG9yYWdlPUkoZS5ydW50aW1lKSx0aGlzLl9hcHBrZXk9dCx0aGlzLl9jdXJyZW50VXNlcklkPW4sdGhpcy5fZW5naW5lPWUsdGhpcy5fc3RvcmFnZVB1bGxUaW1lS2V5PVwiY29uLXMtXCIrdCtcIi1cIitufXJldHVybiBlLnByb3RvdHlwZS5fc2V0PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYoIXJlKGUpJiZBcnJheS5pc0FycmF5KGUpKXt2YXIgbj10aGlzLl9zdG9yYWdlLmdldCh0aGlzLl9zdG9yYWdlUHVsbFRpbWVLZXkpfHwwLGk9ZS5sZW5ndGg7ZS5mb3JFYWNoKChmdW5jdGlvbihlLHIpe3ZhciBzPWUudXBkYXRlZFRpbWV8fDA7bj1zPm4/czpuLGUuY29udmVyc2F0aW9uVHlwZT1lLnR5cGUsdC5fZXZlbnRFbWl0dGVyLmVtaXQoSnIse3N0YXR1c0l0ZW06ZSxpc0xhc3RQdWxsOnI9PT1pLTF9KX0pKSx0aGlzLl9zdG9yYWdlLnNldCh0aGlzLl9zdG9yYWdlUHVsbFRpbWVLZXksbil9fSxlLnByb3RvdHlwZS5fc3RhcnRQdWxsPWZ1bmN0aW9uKCl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBlLHQsbixpO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKHIpe3N3aXRjaChyLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuX2lzUHVsbGluZ3x8MD09PXRoaXMuX3B1bGxRdWV1ZS5sZW5ndGg/WzJdOih0aGlzLl9pc1B1bGxpbmc9ITAsZT10aGlzLl9wdWxsUXVldWUuc3BsaWNlKDAsMSlbMF0sWzQsdGhpcy5fZW5naW5lLnB1bGxDb252ZXJzYXRpb25TdGF0dXMoZSldKTtjYXNlIDE6cmV0dXJuIHQ9ci5zZW50KCksbj10LmNvZGUsaT10LmRhdGEsbj09PUVlLlNVQ0NFU1M/KHRoaXMuX2lzUHVsbGluZz0hMSx0aGlzLl9zZXQoaSksdGhpcy5fc3RhcnRQdWxsKCkpOnRoaXMuX3N0YXJ0UHVsbCgpLFsyXX19KSl9KSl9LGUucHJvdG90eXBlLnB1bGw9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fc3RvcmFnZS5nZXQodGhpcy5fc3RvcmFnZVB1bGxUaW1lS2V5KXx8MDsoZT50fHwwPT09ZSkmJih0aGlzLl9wdWxsUXVldWUucHVzaCh0KSx0aGlzLl9zdGFydFB1bGwoKSl9LGUucHJvdG90eXBlLndhdGNoPWZ1bmN0aW9uKGUpe3RoaXMuX2V2ZW50RW1pdHRlci5vbihKciwoZnVuY3Rpb24odCl7ZSh0KX0pKX0sZS5wcm90b3R5cGUudW53YXRjaD1mdW5jdGlvbigpe3RoaXMuX2V2ZW50RW1pdHRlci5vZmYoSnIsKGZ1bmN0aW9uKGUpe30pKX0sZX0oKSxacj17Yzp7a2V5TmFtZTpcInVucmVhZE1lc3NhZ2VDb3VudFwiLGRlZmF1bHRWYWw6MH0saG06e2tleU5hbWU6XCJoYXNNZW50aW9uZWRcIixkZWZhdWx0VmFsOiExfSxtOntrZXlOYW1lOlwibWVudGlvbmVkSW5mb1wiLGRlZmF1bHRWYWw6bnVsbH0sdDp7a2V5TmFtZTpcImxhc3RVbnJlYWRUaW1lXCIsZGVmYXVsdFZhbDowfSxuYzp7a2V5TmFtZTpcIm5vdGlmaWNhdGlvblN0YXR1c1wiLGRlZmF1bHRWYWw6Mn0sdG86e2tleU5hbWU6XCJpc1RvcFwiLGRlZmF1bHRWYWw6ITF9LHRnOntrZXlOYW1lOlwidGFnc1wiLGRlZmF1bHRWYWw6e319LG1jOntrZXlOYW1lOlwidW5yZWFkTWVudGlvbmVkQ291bnRcIixkZWZhdWx0VmFsOjB9fSxYcj17fTtmb3IodmFyICRyIGluIFpyKXt2YXIgZXM9WnJbJHJdLmtleU5hbWU7WHJbZXNdPSRyfXZhciB0cyxucz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LG4pe3RoaXMuX2FwcGtleT10LHRoaXMuX2N1cnJlbnRVc2VySWQ9bjt2YXIgaT1cImNvbi1cIit0K1wiLVwiK247dGhpcy5zdG9yYWdlPW5ldyBSKGUsaSksdGhpcy5fbG9jYWxTdG9yZT1uZXcgUihlLFwiQ09OVkVSLVwiK3QrXCItXCIrbil9cmV0dXJuIGUucHJvdG90eXBlLl9nZXRTdG9yZUtleT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIG4rXCJfXCIrZStcIl9cIit0fSxlLnByb3RvdHlwZS5fZ2V0Q29uT3B0aW9uQnlLZXk9ZnVuY3Rpb24oZSl7dmFyIHQ9KGU9ZXx8XCJcIikuc3BsaXQoXCJfXCIpO2lmKHQubGVuZ3RoPj0yKXt2YXIgbj10LnNoaWZ0KCksaT10LnNoaWZ0KCkscj10LmpvaW4oXCJfXCIpO3JldHVybntjb252ZXJzYXRpb25UeXBlOk51bWJlcihpKSx0YXJnZXRJZDpyLGNoYW5uZWxJZDpufX1yZXR1cm57Y29udmVyc2F0aW9uVHlwZTpqLlBSSVZBVEUsdGFyZ2V0SWQ6XCJcIixjaGFubmVsSWQ6XCJcIn19LGUucHJvdG90eXBlLnVwZGF0ZU1lbnRpb25lZERhdGE9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUuY29udmVyc2F0aW9uVHlwZSxpPWUudGFyZ2V0SWQscj1lLm1lc3NhZ2VUeXBlLHM9ZS5pc01lbnRpb25lZCxvPWUuY29udGVudCxhPWUuc2VuZGVyVXNlcklkLHU9ZS5jaGFubmVsSWQsYz10aGlzLl9nZXRTdG9yZUtleShuLGksdSksaD10aGlzLl9sb2NhbFN0b3JlLmdldChjKXx8e30sbD1Yci5tZW50aW9uZWRJbmZvLGQ9WHIuaGFzTWVudGlvbmVkLGY9aFtsXXx8e30scD1mLnVzZXJJZExpc3R8fFtdLGc9by5tZW50aW9uZWRJbmZvO2lmKGcpe2lmKHMmJm49PT1qLkdST1VQKShnLnVzZXJJZExpc3R8fFtdKS5mb3JFYWNoKChmdW5jdGlvbihlKXtlPT09dC5fY3VycmVudFVzZXJJZCYmcC5pbmRleE9mKGEpPDAmJnAucHVzaChhKX0pKSxnLnR5cGU9PT13ZS5BTEwmJnAuaW5kZXhPZihhKTwwJiZwLnB1c2goYSk7aWYocj09PVNlLlJFQ0FMTCYmbj09PWouR1JPVVApe3ZhciBfPXAuaW5kZXhPZihhKTtfPj0wJiZwLnNwbGljZShfLDEpfWc9e3VzZXJJZExpc3Q6cCx0eXBlOihudWxsPT1nP3ZvaWQgMDpnLnR5cGUpfHxmLnR5cGV9LDAhPT1wLmxlbmd0aD8oaFtsXT1nLGhbZF09ITApOihkZWxldGUgaFtsXSxkZWxldGUgaFtkXSksYWUoaCk/dGhpcy5fbG9jYWxTdG9yZS5zZXQoYyxoKTp0aGlzLl9sb2NhbFN0b3JlLnJlbW92ZShjKX19LGUucHJvdG90eXBlLnNldD1mdW5jdGlvbihlLHQsbixpKXt2YXIgcj10aGlzLl9nZXRTdG9yZUtleShlLHQsaSkscz10aGlzLl9sb2NhbFN0b3JlLmdldChyKXx8e307Zm9yKHZhciBvIGluIG4pe3ZhciBhPVhyW29dLHU9bltvXTtpZighcmUoYSkmJiFyZSh1KSYmXCJoYXNNZW50aW9uZWRcIiE9PW8mJlwiTWVudGlvbmVkSW5mb1wiIT09byl7aWYodT09PVpyW2FdLmRlZmF1bHRWYWx8fFwidGFnc1wiPT09byYmIWFlKHUpKWRlbGV0ZSBzW2FdO2Vsc2UgaWYoXCJ0YWdzXCI9PT1vKXt2YXIgYz11O2Zvcih2YXIgaCBpbiBjKWNbaF0uaXNUb3B8fGRlbGV0ZSBjW2hdLmlzVG9wO3NbYV09dX1lbHNlIHNbYV09dTtzLmN8fChkZWxldGUgcy50LGRlbGV0ZSBzLmhtLGRlbGV0ZSBzLm0sZGVsZXRlIHMubWMpfX1hZShzKT90aGlzLl9sb2NhbFN0b3JlLnNldChyLHMpOnRoaXMuX2xvY2FsU3RvcmUucmVtb3ZlKHIpfSxlLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oZSx0LG4pe3ZvaWQgMD09PW4mJihuPVwiXCIpO3ZhciBpPXRoaXMuX2dldFN0b3JlS2V5KGUsdCxuKSxyPXRoaXMuX2xvY2FsU3RvcmUuZ2V0KGkpfHx7fSxzPXt9O2Zvcih2YXIgbyBpbiBacil7dmFyIGE9WnJbb10sdT1hLmtleU5hbWUsYz1hLmRlZmF1bHRWYWw7c1t1XT1yW29dfHx5dChjKX1yZXR1cm4gc30sZS5wcm90b3R5cGUuZ2V0VmFsdWU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fbG9jYWxTdG9yZS5nZXRWYWx1ZXMoKXx8e30sbj1bXTtmb3IodmFyIGkgaW4gdCl7dmFyIHI9dGhpcy5fZ2V0Q29uT3B0aW9uQnlLZXkoaSkscz17Y29udmVyc2F0aW9uVHlwZTpyLmNvbnZlcnNhdGlvblR5cGUsdGFyZ2V0SWQ6ci50YXJnZXRJZCxjaGFubmVsSWQ6ci5jaGFubmVsSWR9LG89dFtpXTtmb3IodmFyIGEgaW4gbyl7dmFyIHU9WnJbYV0sYz11LmtleU5hbWUsaD11LmRlZmF1bHRWYWw7c1tjXT1vW2FdfHx5dChoKX1zPWU/ZShzKTpzLG4ucHVzaChzKX1yZXR1cm4gbn0sZS5wcm90b3R5cGUuZ2V0VmFsdWVGb3JUYWc9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9sb2NhbFN0b3JlLmdldFZhbHVlcygpfHx7fSx0PXt9O2Zvcih2YXIgbiBpbiBlKXt2YXIgaT10aGlzLl9nZXRDb25PcHRpb25CeUtleShuKSxyPWkuY29udmVyc2F0aW9uVHlwZSxzPWkudGFyZ2V0SWQsbz17fSxhPWVbbl07Zm9yKHZhciB1IGluIGEpe3ZhciBjPVpyW3VdLGg9Yy5rZXlOYW1lLGw9Yy5kZWZhdWx0VmFsO29baF09YVt1XXx8eXQobCl9Zm9yKHZhciBkIGluIG8udGFncyl7cmUodFtkXSkmJih0W2RdPVtdKTt2YXIgZj1PYmplY3QuYXNzaWduKHt9LG8se2NvbnZlcnNhdGlvblR5cGU6cix0YXJnZXRJZDpzfSk7ZGVsZXRlIGYudGFncyx0W2RdLnB1c2goZil9fXJldHVybiB0fSxlLnByb3RvdHlwZS5hZGFwdE9sZFN0b3JlPWZ1bmN0aW9uKCl7dHJ5e3ZhciBlPXRoaXMuc3RvcmFnZS5nZXRWYWx1ZXMoKTtpZigwPT09T2JqZWN0LmtleXMoZSkubGVuZ3RoKXJldHVybjtmb3IodmFyIHQgaW4gZSl7dmFyIG49XCJfXCIrdDt0aGlzLl9sb2NhbFN0b3JlLnNldChuLGVbdF0pfX1jYXRjaChlKXtnZS5lcnJvcihcImFkYXB0T2xkU3RvcmUgZXJyb3I6IFwiK2UubWVzc2FnZSl9fSxlfSgpLGlzPVtqLlBSSVZBVEUsai5HUk9VUCxqLlNZU1RFTSxqLlBVQkxJQ19TRVJWSUNFLGouQVBQX1BVQkxJQ19TRVJWSUNFXSxycz1cImNvbnZlcnNhdGlvbkNoYW5nZWRcIixzcz1cImNvblRhZ1N0YXR1c0NoYW5nZWRcIixvcz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LG4saSxyKXt2YXIgcz10aGlzO3RoaXMuX3VwZGF0ZWRDb252ZXJzYXRpb25zPXt9LHRoaXMuX2NvblRhZ1N0YXR1c0NoYW5nZWQ9ITEsdGhpcy5fZXZlbnRFbWl0dGVyPW5ldyBfZSx0aGlzLl9kcmFmdE1hcD17fSx0aGlzLl9hcHBrZXk9dCx0aGlzLl9sb2dpblVzZXJJZD1uLHRoaXMuX3N0b3JlPW5ldyBucyhlLnJ1bnRpbWUsdCxuKSx0aGlzLl9zdGF0dXNNYW5hZ2VyPW5ldyB6cihlLHQsbiksdGhpcy5fc3RhdHVzTWFuYWdlci53YXRjaCgoZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zdGF0dXNJdGVtLG49ZS5pc0xhc3RQdWxsO3MuYWRkU3RhdHVzKHQsbil9KSksdGhpcy5fZXZlbnRFbWl0dGVyLm9uKHJzLChmdW5jdGlvbihlKXtpKGUpfSkpLHRoaXMuX2V2ZW50RW1pdHRlci5vbihzcywoZnVuY3Rpb24oKXtyKCl9KSl9cmV0dXJuIGUucHJvdG90eXBlLl9jYWxjVW5yZWFkQ291bnQ9ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLmNvbnRlbnQsaT1lLm1lc3NhZ2VUeXBlLHI9ZS5zZW50VGltZSxzPWUuaXNDb3VudGVkLG89ZS5tZXNzYWdlRGlyZWN0aW9uLGE9ZS5zZW5kZXJVc2VySWQsdT1vPT09bWUuU0VORCYmYT09PXRoaXMuX2xvZ2luVXNlcklkLGM9aT09PVNlLlJFQ0FMTCxoPW5lKG4pLGw9ITEsZD17fSxmPXQubGFzdFVucmVhZFRpbWV8fDAscD10LnVucmVhZE1lc3NhZ2VDb3VudHx8MDtpZihmPnJ8fHUpcmV0dXJue2hhc0NoYW5nZWQ6bCxsb2NhbENvbnZlcnNhdGlvbjp0LHVwZGF0ZUl0ZW1zOmR9OyhzJiYodC51bnJlYWRNZXNzYWdlQ291bnQ9cCsxLHQubGFzdFVucmVhZFRpbWU9cixsPSEwKSxjJiZoKSYmKGY+PW4uc2VudFRpbWUmJnAmJih0LnVucmVhZE1lc3NhZ2VDb3VudD1wLTEsbD0hMCkpO3JldHVybiBsJiYoZC51bnJlYWRNZXNzYWdlQ291bnQ9e3ZhbDp0LnVucmVhZE1lc3NhZ2VDb3VudCx0aW1lOnJ9KSx7aGFzQ2hhbmdlZDpsLGxvY2FsQ29udmVyc2F0aW9uOnQsdXBkYXRlSXRlbXM6ZH19LGUucHJvdG90eXBlLl9jYWxjTWVudGlvbmVkSW5mbz1mdW5jdGlvbihlLHQpe3ZhciBuPWUuY29udGVudCxpPShlLm1lc3NhZ2VEaXJlY3Rpb24sZS5pc01lbnRpb25lZCkscj1lLnNlbnRUaW1lO21lLlNFTkQ7dmFyIHM9bmUobiksbz0hMSxhPXt9O3JldHVybiBpJiZzJiZuLm1lbnRpb25lZEluZm8mJih0Lmhhc01lbnRpb25lZD0hMCxvPSEwLGEuaGFzTWVudGlvbmVkPXt2YWw6ITAsdGltZTpyfSxhLm1lbnRpb25lZEluZm89e3ZhbDpuLm1lbnRpb25lZEluZm8sdGltZTpyfSkse2hhc0NoYW5nZWQ6byxsb2NhbENvbnZlcnNhdGlvbjp0LHVwZGF0ZUl0ZW1zOmF9fSxlLnByb3RvdHlwZS5fY2FsY01lbnRpb25lZENvdW50PWZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5jb250ZW50LGk9ZS5tZXNzYWdlRGlyZWN0aW9uLHI9ITE7aWYoZS5pc01lbnRpb25lZCYmaT09PW1lLlJFQ0VJVkUmJihudWxsPT1uP3ZvaWQgMDpuLm1lbnRpb25lZEluZm8pKXt2YXIgcz1uLm1lbnRpb25lZEluZm8sbz1zLnR5cGUsYT1zLnVzZXJJZExpc3Q7aWYobz09PXdlLkFMTHx8KGF8fFtdKS5pbmNsdWRlcyh0aGlzLl9sb2dpblVzZXJJZCkpe3I9ITA7dmFyIHU9dC51bnJlYWRNZW50aW9uZWRDb3VudHx8MDt0LnVucmVhZE1lbnRpb25lZENvdW50PXUrMX19cmV0dXJue2hhc0NoYW5nZWQ6cixsb2NhbENvbnZlcnNhdGlvbjp0fX0sZS5wcm90b3R5cGUuX3NldFVwZGF0ZWRDb252ZXJzYXRpb249ZnVuY3Rpb24oZSl7aWYobmUoZSkpe3ZhciB0PWUuY29udmVyc2F0aW9uVHlwZSxuPWUudGFyZ2V0SWQsaT1lLmNoYW5uZWxJZCxyPXQrXCJfXCIrbixzPXRoaXMuX3N0b3JlLmdldCh0LG4saSl8fHt9O3RoaXMuX3VwZGF0ZWRDb252ZXJzYXRpb25zW3JdPU9iamVjdC5hc3NpZ24ocyxlKX19LGUucHJvdG90eXBlLl9zZXRDb25UYWdTdGF0dXNDaGFuZ2VkPWZ1bmN0aW9uKGUsdCxuLGkpe3ZhciByPSh0aGlzLl9zdG9yZS5nZXQoZSx0LGkpfHx7fSkudGFnc3x8e307aWYoT2JqZWN0LmtleXMocikubGVuZ3RoPT09T2JqZWN0LmtleXMobikubGVuZ3RoKXtmb3IodmFyIHMgaW4gcilpZighbltzXXx8cltzXS5pc1RvcCE9PW5bc10uaXNUb3ApcmV0dXJuIHZvaWQodGhpcy5fY29uVGFnU3RhdHVzQ2hhbmdlZD0hMCl9ZWxzZSB0aGlzLl9jb25UYWdTdGF0dXNDaGFuZ2VkPSEwfSxlLnByb3RvdHlwZS5hZGRTdGF0dXM9ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLmNvbnZlcnNhdGlvblR5cGUsaT1lLnRhcmdldElkLHI9ZS51cGRhdGVkVGltZSxzPWUubm90aWZpY2F0aW9uU3RhdHVzLG89ZS5pc1RvcCxhPWUudGFncyx1PWUuY2hhbm5lbElkLGM9e30saD17fTtuIT09ai5VTFRSQV9HUk9VUCYmKHJlKHMpfHwoaC5ub3RpZmljYXRpb25TdGF0dXM9e3RpbWU6cix2YWw6c30pLHJlKG8pfHwoaC5pc1RvcD17dGltZTpyLHZhbDpvfSkscmUoYSl8fChoLnRhZ3M9e3RpbWU6cix2YWw6YX0sbnVsbD09YXx8YS5mb3JFYWNoKChmdW5jdGlvbihlKXtjW2UudGFnSWRdPXtpc1RvcDplLmlzVG9wfX0pKSksdGhpcy5fc2V0Q29uVGFnU3RhdHVzQ2hhbmdlZChuLGksYyx1KSx0aGlzLl9zdG9yZS5zZXQobixpLHtub3RpZmljYXRpb25TdGF0dXM6cyxpc1RvcDpvLHRhZ3M6Y30sdSksdGhpcy5fc2V0VXBkYXRlZENvbnZlcnNhdGlvbih7Y29udmVyc2F0aW9uVHlwZTpuLHRhcmdldElkOmksdXBkYXRlZEl0ZW1zOmgsY2hhbm5lbElkOnV9KSx0JiZ0aGlzLl9ub3RpZnlDb252ZXJzYXRpb25DaGFuZ2VkKCkpfSxlLnByb3RvdHlwZS5fbm90aWZ5Q29udmVyc2F0aW9uQ2hhbmdlZD1mdW5jdGlvbigpe3ZhciBlPVtdO2Zvcih2YXIgdCBpbiB0aGlzLl91cGRhdGVkQ29udmVyc2F0aW9ucyllLnB1c2godGhpcy5fdXBkYXRlZENvbnZlcnNhdGlvbnNbdF0pOzAhPT1lLmxlbmd0aCYmKHRoaXMuX2V2ZW50RW1pdHRlci5lbWl0KHJzLGUpLHRoaXMuX3VwZGF0ZWRDb252ZXJzYXRpb25zPXt9LHRoaXMuX2NvblRhZ1N0YXR1c0NoYW5nZWQmJih0aGlzLl9ldmVudEVtaXR0ZXIuZW1pdChzcyksdGhpcy5fY29uVGFnU3RhdHVzQ2hhbmdlZD0hMSkpfSxlLnByb3RvdHlwZS5zZXRDb252ZXJzYXRpb25DYWNoZUJ5TWVzc2FnZT1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMsaT1lLmNvbnZlcnNhdGlvblR5cGUscj1lLmlzUGVyc2l0ZWQscz1lLnRhcmdldElkLG89ZS5jaGFubmVsSWQ7aWYoaXMuaW5kZXhPZihpKT49MCl7dmFyIGE9ITEsdT10aGlzLl9zdG9yZS5nZXQoaSxzLG8pLGM9e307aWYoW3RoaXMuX2NhbGNVbnJlYWRDb3VudCx0aGlzLl9jYWxjTWVudGlvbmVkSW5mbyx0aGlzLl9jYWxjTWVudGlvbmVkQ291bnRdLmZvckVhY2goKGZ1bmN0aW9uKHQpe3ZhciBpPXQuY2FsbChuLGUsdSkscj1pLmhhc0NoYW5nZWQscz1pLmxvY2FsQ29udmVyc2F0aW9uLG89aS51cGRhdGVJdGVtczthPWF8fHIsYz1PKE8oe30sYyksbyksdT15dChzKX0pKSxhJiZ0aGlzLl9zdG9yZS5zZXQoaSxzLHUsbyksdGhpcy5fc3RvcmUudXBkYXRlTWVudGlvbmVkRGF0YShlKSxyKXt2YXIgaD10aGlzLl9zdG9yZS5nZXQoaSxzLG8pO2gudXBkYXRlZEl0ZW1zPU8oe2xhdGVzdE1lc3NhZ2U6e3RpbWU6ZS5zZW50VGltZSx2YWw6ZX19LGMpLGgubGF0ZXN0TWVzc2FnZT1lO3ZhciBsPU9iamVjdC5hc3NpZ24oaCx7Y29udmVyc2F0aW9uVHlwZTppLHRhcmdldElkOnMsY2hhbm5lbElkOm99KTt0aGlzLl9zZXRVcGRhdGVkQ29udmVyc2F0aW9uKGwpfShhfHxyKSYmdGhpcy5fbm90aWZ5Q29udmVyc2F0aW9uQ2hhbmdlZCgpfX0sZS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdm9pZCAwPT09biYmKG49XCJcIiksdGhpcy5fc3RvcmUuZ2V0KGUsdCxuKX0sZS5wcm90b3R5cGUuZ2V0QWxsVW5yZWFkQ291bnQ9ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXMuX3N0b3JlLmdldFZhbHVlKCkscj0wO3JldHVybiBpLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBpPWUudW5yZWFkTWVzc2FnZUNvdW50LHM9ZS5ub3RpZmljYXRpb25TdGF0dXMsbz1lLmNvbnZlcnNhdGlvblR5cGU7aT1pfHwwLChufHwxIT09cykmJih0Lmxlbmd0aD4wP3QuaW5jbHVkZXMoTnVtYmVyKG8pKSYmKHIrPU51bWJlcihpKSk6cis9TnVtYmVyKGkpKX0pKSxyfSxlLnByb3RvdHlwZS5nZXRVbnJlYWRDb3VudEJ5VGFnPWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5fc3RvcmUuZ2V0VmFsdWVGb3JUYWcoKVtlXXx8W10saT0wO3JldHVybiBuLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBuPWUudW5yZWFkTWVzc2FnZUNvdW50LHI9ZS5ub3RpZmljYXRpb25TdGF0dXM7KHR8fDEhPT1yKSYmKG49bnx8MCxpKz1OdW1iZXIobikpfSkpLGl9LGUucHJvdG90eXBlLmdldFVucmVhZENvdW50PWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdGhpcy5fc3RvcmUuZ2V0KGUsdCxuKS51bnJlYWRNZXNzYWdlQ291bnR8fDB9LGUucHJvdG90eXBlLmNsZWFyVW5yZWFkQ291bnQ9ZnVuY3Rpb24oZSx0LG4saSl7dm9pZCAwPT09aSYmKGk9ITApO3ZhciByPXRoaXMuX3N0b3JlLmdldChlLHQsbikscz1yLnVucmVhZE1lc3NhZ2VDb3VudCxvPXIuaGFzTWVudGlvbmVkLGE9e307aWYocyYmKHIudW5yZWFkTWVzc2FnZUNvdW50PTAsYS51bnJlYWRNZXNzYWdlQ291bnQ9e3ZhbDowLHRpbWU6RGF0ZS5ub3coKX0pLG8mJihyLmhhc01lbnRpb25lZD0hMSxyLnVucmVhZE1lbnRpb25lZENvdW50PTAsci5tZW50aW9uZWRJbmZvPXZvaWQgMCxhLmhhc01lbnRpb25lZD17dmFsOiExLHRpbWU6RGF0ZS5ub3coKX0sYS5tZW50aW9uZWRJbmZvPXt2YWw6dm9pZCAwLHRpbWU6RGF0ZS5ub3coKX0pLHRoaXMuX3N0b3JlLnNldChlLHQscixuKSxpJiYwIT09T2JqZWN0LmtleXMoYSkubGVuZ3RoKXt2YXIgdT1PYmplY3QuYXNzaWduKHIse2NvbnZlcnNhdGlvblR5cGU6ZSx0YXJnZXRJZDp0LGNoYW5uZWxJZDpuLHVwZGF0ZWRJdGVtczphfSk7dGhpcy5fc2V0VXBkYXRlZENvbnZlcnNhdGlvbih1KSx0aGlzLl9ub3RpZnlDb252ZXJzYXRpb25DaGFuZ2VkKCl9fSxlLnByb3RvdHlwZS5jbGVhckFsbFVucmVhZENvdW50PWZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLl9zdG9yZS5nZXRWYWx1ZSgpLmZvckVhY2goKGZ1bmN0aW9uKHQpe3QudW5yZWFkTWVzc2FnZUNvdW50JiYodC51bnJlYWRNZXNzYWdlQ291bnQ9MCxlLl9zdG9yZS5zZXQodC5jb252ZXJzYXRpb25UeXBlLHQudGFyZ2V0SWQsdCx0LmNoYW5uZWxJZCkpfSkpfSxlLnByb3RvdHlwZS5zdGFydFB1bGxDb252ZXJzYXRpb25TdGF0dXM9ZnVuY3Rpb24oZSl7dGhpcy5fc3RhdHVzTWFuYWdlci5wdWxsKGUpfSxlLnByb3RvdHlwZS5zZXREcmFmdD1mdW5jdGlvbihlLHQsbixpKXt2YXIgcj1lK1wiX1wiK3QrXCJfXCIraTt0aGlzLl9kcmFmdE1hcFtyXT1ufSxlLnByb3RvdHlwZS5nZXREcmFmdD1mdW5jdGlvbihlLHQsbil7dmFyIGk9ZStcIl9cIit0K1wiX1wiK247cmV0dXJuIHRoaXMuX2RyYWZ0TWFwW2ldfSxlLnByb3RvdHlwZS5jbGVhckRyYWZ0PWZ1bmN0aW9uKGUsdCxuKXt2YXIgaT1lK1wiX1wiK3QrXCJfXCIrbjtkZWxldGUgdGhpcy5fZHJhZnRNYXBbaV19LGUucHJvdG90eXBlLmFkZFRhZ1N0YXR1cz1mdW5jdGlvbihlLHQsbixpKXt2b2lkIDA9PT1pJiYoaT1cIlwiKTt2YXIgcj10aGlzLl9zdG9yZS5nZXQoZSx0LGkpLnRhZ3M7cj1PYmplY3QuYXNzaWduKHIsbiksdGhpcy5fc3RvcmUuc2V0KGUsdCx7dGFnczpyfSxpKX0sZS5wcm90b3R5cGUuZGVsZXRlVGFnU3RhdHVzPWZ1bmN0aW9uKGUsdCxuLGkpe3ZvaWQgMD09PWkmJihpPVwiXCIpO3ZhciByPXRoaXMuX3N0b3JlLmdldChlLHQsaSkudGFncztuLmZvckVhY2goKGZ1bmN0aW9uKGUpe2RlbGV0ZSByW2VdfSkpLHRoaXMuX3N0b3JlLnNldChlLHQse3RhZ3M6cn0saSl9LGUucHJvdG90eXBlLmdldENvbnZlcnNhdGlvbkxpc3RGb3JUYWc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RvcmUuZ2V0VmFsdWVGb3JUYWcoKX0sZS5wcm90b3R5cGUuZ2V0QmxvY2tDb252ZXJzYXRpb25MaXN0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0b3JlLmdldFZhbHVlKCkuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4gZS5ub3RpZmljYXRpb25TdGF0dXM9PT1PZS5PUEVOfSkpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJue2NvbnZlcnNhdGlvblR5cGU6ZS5jb252ZXJzYXRpb25UeXBlLHRhcmdldElkOmUudGFyZ2V0SWQsY2hhbm5lbElkOmUuY2hhbm5lbElkfX0pKX0sZS5wcm90b3R5cGUuZ2V0VG9wQ29udmVyc2F0aW9uTGlzdD1mdW5jdGlvbigpe3JldHVybih0aGlzLl9zdG9yZS5nZXRWYWx1ZSgpfHx7fSkuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4gZS5pc1RvcH0pKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybntjb252ZXJzYXRpb25UeXBlOmUuY29udmVyc2F0aW9uVHlwZSx0YXJnZXRJZDplLnRhcmdldElkLGNoYW5uZWxJZDplLmNoYW5uZWxJZH19KSl9LGUucHJvdG90eXBlLmFkYXB0T2xkU3RvcmU9ZnVuY3Rpb24oKXt0aGlzLl9zdG9yZS5hZGFwdE9sZFN0b3JlKCl9LGUucHJvdG90eXBlLmdldFVucmVhZE1lbnRpb25lZENvdW50PWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9XCJcIiksdGhpcy5nZXQodCxuLGUpLnVucmVhZE1lbnRpb25lZENvdW50fHwwfSxlLnByb3RvdHlwZS5nZXRBbGxVbnJlYWRNZW50aW9uZWRDb3VudD1mdW5jdGlvbigpe3ZhciBlPXRoaXMuX3N0b3JlLmdldFZhbHVlKCksdD0wO3JldHVybiBlLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBuPWUudW5yZWFkTWVudGlvbmVkQ291bnQ7bj1ufHwwLHQrPU51bWJlcihuKX0pKSx0fSxlLnByb3RvdHlwZS5nZXRBbGxDb252ZXJzYXRpb25TdGF0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdG9yZS5nZXRWYWx1ZSgpLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIGUudW5yZWFkTWVzc2FnZUNvdW50fHxlLnVucmVhZE1lbnRpb25lZENvdW50fSkpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJue2NvbnZlcnNhdGlvblR5cGU6ZS5jb252ZXJzYXRpb25UeXBlLHRhcmdldElkOmUudGFyZ2V0SWQsY2hhbm5lbElkOmUuY2hhbm5lbElkLHVucmVhZENvdW50OmUudW5yZWFkTWVzc2FnZUNvdW50fHwwLHVucmVhZE1lbnRpb25lZENvdW50OmUudW5yZWFkTWVudGlvbmVkQ291bnR8fDB9fSkpfSxlfSgpLGFzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQsbixpKXt0aGlzLl9wdWxsUXVldWU9W10sdGhpcy5faXNQdWxsaW5nPSExLHRoaXMuX3N0b3JhZ2VUYWdLZXk9XCJ0YWctXCIrdCtcIi1cIituLHRoaXMuX3N0b3JhZ2VQdWxsVGltZUtleT1cInVzLXMtXCIrdCtcIi1cIituLHRoaXMuX3N0b3JhZ2U9SShlLnJ1bnRpbWUpLHRoaXMuX2VuZ2luZT1lLHRoaXMuX3RhZ1dhdGNoZXJGdW5jPWl9cmV0dXJuIGUucHJvdG90eXBlLl91cGRhdGVUYWc9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS50YWdzLG49e307dC5mb3JFYWNoKChmdW5jdGlvbihlKXtuW2UudGFnSWRdPXt0YWdOYW1lOmUudGFnTmFtZSxjcmVhdGVkVGltZTplLmNyZWF0ZWRUaW1lfX0pKSx0aGlzLl9zdG9yYWdlLnNldCh0aGlzLl9zdG9yYWdlVGFnS2V5LG4pLHRoaXMuX3RhZ1dhdGNoZXJGdW5jKCl9LGUucHJvdG90eXBlLmFkZFRhZz1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuX3N0b3JhZ2UuZ2V0KHRoaXMuX3N0b3JhZ2VUYWdLZXkpfHx7fTtlLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0LGk9KG51bGw9PT0odD1uW2UudGFnSWRdKXx8dm9pZCAwPT09dD92b2lkIDA6dC5jcmVhdGVkVGltZSl8fGUuY3JlYXRlZFRpbWV8fDA7bltlLnRhZ0lkXT17dGFnTmFtZTplLnRhZ05hbWUsY3JlYXRlZFRpbWU6aX19KSksdGhpcy5fc3RvcmFnZS5zZXQodGhpcy5fc3RvcmFnZVRhZ0tleSxuKSx0aGlzLl9zdG9yYWdlLnNldCh0aGlzLl9zdG9yYWdlUHVsbFRpbWVLZXksdCl9LGUucHJvdG90eXBlLmRlbGV0ZVRhZz1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuX3N0b3JhZ2UuZ2V0KHRoaXMuX3N0b3JhZ2VUYWdLZXkpfHx7fTtlLmZvckVhY2goKGZ1bmN0aW9uKGUpe2RlbGV0ZSBuW2VdfSkpLHRoaXMuX3N0b3JhZ2Uuc2V0KHRoaXMuX3N0b3JhZ2VUYWdLZXksbiksdGhpcy5fc3RvcmFnZS5zZXQodGhpcy5fc3RvcmFnZVB1bGxUaW1lS2V5LHQpfSxlLnByb3RvdHlwZS5nZXRUYWdzSW5mbz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdG9yYWdlLmdldCh0aGlzLl9zdG9yYWdlVGFnS2V5KXx8e319LGUucHJvdG90eXBlLmdldFRhZ3M9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9zdG9yYWdlLmdldCh0aGlzLl9zdG9yYWdlVGFnS2V5KXx8e30sdD1bXTtmb3IodmFyIG4gaW4gZSl0LnB1c2goe3RhZ0lkOm4sdGFnTmFtZTplW25dLnRhZ05hbWUsY3JlYXRlZFRpbWU6ZVtuXS5jcmVhdGVkVGltZSxjb252ZXJzYXRpb25Db3VudDowfSk7cmV0dXJuIHQuc29ydCgoZnVuY3Rpb24oZSx0KXtyZXR1cm4oZS5jcmVhdGVkVGltZXx8MCktKHQuY3JlYXRlZFRpbWV8fDApfSkpfSxlLnByb3RvdHlwZS5nZXRUYWdCeUlkPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX3N0b3JhZ2UuZ2V0KHRoaXMuX3N0b3JhZ2VUYWdLZXkpfHx7fTtyZXR1cm4gdFtlXT97dGFnSWQ6ZSx0YWdOYW1lOnRbZV0udGFnTmFtZSxjcmVhdGVkVGltZTp0W2VdLmNyZWF0ZWRUaW1lLGNvbnZlcnNhdGlvbkNvdW50OjB9Om51bGx9LGUucHJvdG90eXBlLl9zdGFydFB1bGw9ZnVuY3Rpb24oKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIGUsdCxuLGkscixzLG8sYTtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbih1KXtzd2l0Y2godS5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9pc1B1bGxpbmd8fDA9PT10aGlzLl9wdWxsUXVldWUubGVuZ3RoP1syXToodGhpcy5faXNQdWxsaW5nPSEwLGU9dGhpcy5fcHVsbFF1ZXVlLnNwbGljZSgwLDEpWzBdLFs0LHRoaXMuX2VuZ2luZS5wdWxsVXNlclNldHRpbmdzKGUpXSk7Y2FzZSAxOnJldHVybiB0PXUuc2VudCgpLG49dC5jb2RlLGk9dC5kYXRhLG4hPT1FZS5TVUNDRVNTfHxyZShpKT8odGhpcy5faXNQdWxsaW5nPSExLHRoaXMuX3N0YXJ0UHVsbCgpKToocz0ocj1pKS5zZXR0aW5ncyxvPXIudmVyc2lvbixhPXMuVGFnLHJlKGEpfHx0aGlzLl91cGRhdGVUYWcoYSksdGhpcy5fc3RvcmFnZS5zZXQodGhpcy5fc3RvcmFnZVB1bGxUaW1lS2V5LG8pLHRoaXMuX2lzUHVsbGluZz0hMSx0aGlzLl9zdGFydFB1bGwoKSksWzJdfX0pKX0pKX0sZS5wcm90b3R5cGUucHVsbFVzZXJTZXR0aW5ncz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9zdG9yYWdlLmdldCh0aGlzLl9zdG9yYWdlUHVsbFRpbWVLZXkpfHwwOyhlPnR8fDA9PT1lKSYmKHRoaXMuX3B1bGxRdWV1ZS5wdXNoKHQpLHRoaXMuX3N0YXJ0UHVsbCgpKX0sZS5wcm90b3R5cGUuZ2V0VmVyc2lvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdG9yYWdlLmdldCh0aGlzLl9zdG9yYWdlUHVsbFRpbWVLZXkpfHwwfSxlfSgpLHVzPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxuKXt2YXIgaT1lLmNhbGwodGhpcyx0LG4pfHx0aGlzO3JldHVybiBpLl9taW5pQ29ubmVjdFVybD1cIlwiLGkuX2Nvbm5lY3RUeXBlPW4uY29ubmVjdGlvblR5cGUsaX1yZXR1cm4gTih0LGUpLHQucHJvdG90eXBlLl9mb3JtYXRKU09OUFVybD1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gZStcIi9cIisodGhpcy5fcnVudGltZS5pc1N1cHBvcnRTb2NrZXQoKSYmXCJ3ZWJzb2NrZXRcIj09PXRoaXMuX2Nvbm5lY3RUeXBlP1wibmF2aVwiOlwiY29tZXRuYXZpXCIpK1wiLmpzP2FwcElkPVwiK24rXCImdG9rZW49XCIrZW5jb2RlVVJJQ29tcG9uZW50KHQpK1wiJmNhbGxCYWNrPVwiK2krXCImdj1cIit0aGlzLl9hcGlWZXJzaW9uK1wiJnI9XCIrRGF0ZS5ub3coKX0sdC5wcm90b3R5cGUuZ2V0SW5mbz1mdW5jdGlvbih0LG4saSl7dmFyIHI7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBzO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKG8pe3JldHVybiB0aGlzLl9ydW50aW1lLnVzZU5hdml8fChzPXZvaWQgMCxzPXRoaXMuX3J1bnRpbWUuaXNTdXBwb3J0U29ja2V0KCkmJlwid2Vic29ja2V0XCI9PT10aGlzLl9jb25uZWN0VHlwZT9jLmpvaW4oXCIsXCIpOmguam9pbihcIixcIiksdGhpcy5fbWluaUNvbm5lY3RVcmw9KG51bGw9PT0ocj10aGlzLl9vcHRpb25zLm1pbmlDTVBQcm94eSl8fHZvaWQgMD09PXI/dm9pZCAwOnIubGVuZ3RoKT90aGlzLl9vcHRpb25zLm1pbmlDTVBQcm94eS5qb2luKFwiLFwiKTpzfHxcIlwiLG49W10pLFsyLGUucHJvdG90eXBlLmdldEluZm8uY2FsbCh0aGlzLHQsbixpKV19KSl9KSl9LHQucHJvdG90eXBlLl9yZXFOYXZpPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIGkscixzLG8sYSx1LGMsaCxsO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGQpe3N3aXRjaChkLmxhYmVsKXtjYXNlIDA6aT1cImdldFNlcnZlckVuZHBvaW50XCIscj0wLHM9ZS5sZW5ndGgsZC5sYWJlbD0xO2Nhc2UgMTpyZXR1cm4gcjxzPyhvPXRoaXMuX2Zvcm1hdEpTT05QVXJsKGVbcl0sbix0LGkpLGdlLmRlYnVnKFwicmVxIG5hdmkgPT4gXCIrbyksWzQsdGhpcy5fcnVudGltZS5odHRwUmVxKHt1cmw6byx0aW1lb3V0OjFlNCxkYXRhVHlwZTpcInRleHRcIn0pXSk6WzMsNF07Y2FzZSAyOmlmKDIwMCE9PShhPWQuc2VudCgpKS5zdGF0dXMpcmV0dXJuIDQwMz09PWEuc3RhdHVzP2dlLmVycm9yKFwicmVxdWVzdCBuYXZpIGVycm9yOiBcIitFZS5SQ19DT05OX1VTRVJfT1JfUEFTU1dEX0VSUk9SKTo0MDE9PT1hLnN0YXR1cyYmZ2UuZXJyb3IoXCJyZXF1ZXN0IG5hdmkgZXJyb3I6IFwiK0VlLlJDX0NPTk5fQVBQX0JMT0NLRURfT1JfREVMRVRFRCksWzMsM107dHJ5e3JldHVybiB1PWEuZGF0YS5tYXRjaCgve1tcXGRcXERdK30vKSwwPT09KGM9dSYmdVswXT91WzBdOlwiXCIpLmluZGV4T2YoJ3tcXFxcXCJjb2RlXFxcXFwiOicpJiYoYz1KU09OLnBhcnNlKCdcIicrYysnXCInKSksbD1KU09OLnBhcnNlKGMpLGg9L15odHRwcy8udGVzdChvKT9cImh0dHBzXCI6XCJodHRwXCIsbC5wcm90b2NvbD1oLHRoaXMuX3J1bnRpbWUudXNlTmF2aXx8KGwuc2VydmVyPVwiXCIsbC5iYWNrdXBTZXJ2ZXI9dGhpcy5fbWluaUNvbm5lY3RVcmwsbC5sb2dTd2l0Y2g9MCksWzIsbF19Y2F0Y2goZSl7Z2UuZXJyb3IoXCJwYXJzZSBuYXZpIGVyciA9PlwiLGUpfWQubGFiZWw9MztjYXNlIDM6cmV0dXJuIHIrPTEsWzMsMV07Y2FzZSA0OnJldHVybiB0aGlzLl9ydW50aW1lLnVzZU5hdmk/WzIsbnVsbF06WzIsbD17Y29kZToyMDAscHJvdG9jb2w6XCJodHRwc1wiLHNlcnZlcjpcIlwiLHZvaXBDYWxsSW5mbzpcIlwiLGt2U3RvcmFnZTowLG9wZW5IdHRwRE5TOiExLGhpc3RvcnlNc2c6ITEsY2hhdHJvb21Nc2c6ITEsdXBsb2FkU2VydmVyOlwiaHR0cHM6Ly91cGxvYWQucWluaXVwLmNvbVwiLGJvc0FkZHI6XCJodHRwczovL2d6LmJjZWJvcy5jb21cIixsb2NhdGlvbjpcIlwiLG1vbml0b3I6MCxqb2luTUNocm06ITEsb3Blbk1wOjAsb3BlblVTOjAsZ3JwTXNnTGltaXQ6MCxpc0Zvcm1hdHRlZDowLGdpZlNpemU6MjA0OCxsb2dTd2l0Y2g6MCxsb2dQb2xpY3k6XCJcIixjb21wRGF5czowLG1zZ0FjazpcIlwiLGFjdGl2ZVNlcnZlcjpcIlwiLHFuQWRkcjpcIlwiLGV4dGtpdFN3aXRjaDowLGFsb25lOiExLHZvaXBTZXJ2ZXI6XCJcIixvZmZsaW5lbG9nc2VydmVyOlwiXCIsYmFja3VwU2VydmVyOnRoaXMuX21pbmlDb25uZWN0VXJsfV19fSkpfSkpfSx0fShxciksY3M9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuX3B1bGxRdWV1ZT1bXSx0aGlzLl9pc1B1bGxpbmc9ITEsdGhpcy5fcHVsbFRpbWU9MCx0aGlzLl9lbmdpbmU9ZX1yZXR1cm4gZS5wcm90b3R5cGUuX3N0YXJ0UHVsbD1mdW5jdGlvbigpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgZSx0LG4saSxyLHMsbztyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihhKXtzd2l0Y2goYS5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9pc1B1bGxpbmd8fDA9PT10aGlzLl9wdWxsUXVldWUubGVuZ3RoP1syXToodGhpcy5faXNQdWxsaW5nPSEwLGU9dGhpcy5fcHVsbFF1ZXVlLnNwbGljZSgwLDEpWzBdLHQ9ZS5yb29tSWQsbj1lLnRpbWVzdGFtcCwoaT10aGlzLl9wdWxsVGltZSk+bj8odGhpcy5faXNQdWxsaW5nPSExLHRoaXMuX3N0YXJ0UHVsbCgpLFsyXSk6WzQsdGhpcy5fZW5naW5lLnB1bGxSVENSb29tRW50cnkodCxpKV0pO2Nhc2UgMTpyZXR1cm4gcj1hLnNlbnQoKSxzPXIuY29kZSxvPXIuZGF0YSxzPT09RWUuU1VDQ0VTUz8odGhpcy5faXNQdWxsaW5nPSExLHRoaXMuX3B1bGxUaW1lPW8uc3luY1RpbWV8fDAsdGhpcy5fc3RhcnRQdWxsKCkpOnRoaXMuX3N0YXJ0UHVsbCgpLFsyXX19KSl9KSl9LGUucHJvdG90eXBlLnB1bGxFbnRyeT1mdW5jdGlvbihlLHQpe3RoaXMuX3B1bGxRdWV1ZS5wdXNoKHtyb29tSWQ6ZSx0aW1lc3RhbXA6dH0pLHRoaXMuX3N0YXJ0UHVsbCgpfSxlLnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3RoaXMuX3B1bGxUaW1lPTAsdGhpcy5faXNQdWxsaW5nPSExfSxlfSgpLGhzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuW1wic2VuZF9tc2dcIixlLHRdLmpvaW4oXCJfXCIpfSxscz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt0aGlzLl9ydW50aW1lPWUsdGhpcy5fYXBwa2V5PXQsdGhpcy5fc2VuZE1lc3NhZ2VNYXA9e30sdGhpcy5fdXNlcklkPVwiXCJ9cmV0dXJuIGUucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oZSl7dGhpcy5fdXNlcklkPWU7dmFyIHQ9aHModGhpcy5fYXBwa2V5LGUpO3RoaXMuX3NlbmRNZXNzYWdlTWFwPXRoaXMuX2dldExvY2FsSW5mbyh0KX0sZS5wcm90b3R5cGUuX2dldExvY2FsSW5mbz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9ydW50aW1lLmxvY2FsU3RvcmFnZS5nZXRJdGVtKGUpO3RyeXtyZXR1cm4gdD9KU09OLnBhcnNlKHQpOnt9fWNhdGNoKGUpe3JldHVybnt9fX0sZS5wcm90b3R5cGUuc2V0TWVzc2FnZT1mdW5jdGlvbihlLHQpe3RoaXMuX3NlbmRNZXNzYWdlTWFwW2VdPXQ7dmFyIG49aHModGhpcy5fYXBwa2V5LHRoaXMuX3VzZXJJZCksaT10aGlzLl9nZXRMb2NhbEluZm8obik7aVtlXT10LHRoaXMuX3J1bnRpbWUubG9jYWxTdG9yYWdlLnNldEl0ZW0obixKU09OLnN0cmluZ2lmeShpKSl9LGUucHJvdG90eXBlLmdldFNlbmRNZXNzYWdlTWFwPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NlbmRNZXNzYWdlTWFwfSxlLnByb3RvdHlwZS5yZW1vdmVCeVVJRD1mdW5jdGlvbihlKXtkZWxldGUgdGhpcy5fc2VuZE1lc3NhZ2VNYXBbZV19LGUucHJvdG90eXBlLnJlbW92ZUJ5VGltZXN0YW1wPWZ1bmN0aW9uKGUpe3ZhciB0PWhzKHRoaXMuX2FwcGtleSx0aGlzLl91c2VySWQpLG49dGhpcy5fZ2V0TG9jYWxJbmZvKHQpO09iamVjdC5rZXlzKG4pLmZvckVhY2goKGZ1bmN0aW9uKHQpe25bdF08ZSYmZGVsZXRlIG5bdF19KSksdGhpcy5fcnVudGltZS5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSh0LEpTT04uc3RyaW5naWZ5KG4pKX0sZX0oKSxkcz1mdW5jdGlvbihlKXt2YXIgdD1cIlJDRGV2aWNlSWRcIixuPUkoZSksaT1cIlwiLHI9bi5nZXQodCk7cmV0dXJuIHI/aT1yOihpPUgoKSxuLnNldCh0LGkpKSxpfTsodHM9e30pW2ouUFJJVkFURV09YnIucXJ5UE1zZyx0c1tqLkdST1VQXT1ici5xcnlHTXNnLHRzW2ouQ0hBVFJPT01dPWJyLnFyeUNITXNnLHRzW2ouQ1VTVE9NRVJfU0VSVklDRV09YnIucXJ5Q01zZyx0c1tqLlNZU1RFTV09YnIucXJ5U01zZzt2YXIgZnM9W2JyW2JyLnJlY2FsbE1zZ10sYnJbYnIucHBNc2dTXSxicltici5wZ01zZ1NdLGJyW2JyLnBwTXNnUF0sYnJbYnIucGdNc2dQXSxicltici5jaGF0TXNnXSxicltici5wY01zZ1BdLGJyW2JyLnByTXNnU10sYnJbYnIudXBkVWdSVGltZV1dLHBzPWZ1bmN0aW9uKGUsdCxuLHIscyxvKXtyZXR1cm57Y29udmVyc2F0aW9uVHlwZTplLHRhcmdldElkOnQsc2VuZGVyVXNlcklkOm8sbWVzc2FnZURpcmVjdGlvbjptZS5TRU5ELGlzQ291bnRlZDohIW4uaXNDb3VudGVkLGlzTWVudGlvbmVkOiEhbi5pc01lbnRpb25lZCxjb250ZW50Om4uY29udGVudCxtZXNzYWdlVHlwZTpuLm1lc3NhZ2VUeXBlLGlzT2ZmTGluZU1lc3NhZ2U6ITEsaXNQZXJzaXRlZDohIW4uaXNQZXJzaXRlZCxtZXNzYWdlVUlkOnIsc2VudFRpbWU6cyxyZWNlaXZlZFRpbWU6MCxkaXNhYmxlTm90aWZpY2F0aW9uOiEhbi5kaXNhYmxlTm90aWZpY2F0aW9uLGlzU3RhdHVzTWVzc2FnZTohIW4uaXNTdGF0dXNNZXNzYWdlLGNhbkluY2x1ZGVFeHBhbnNpb246ISFuLmNhbkluY2x1ZGVFeHBhbnNpb24sZXhwYW5zaW9uOm4uY2FuSW5jbHVkZUV4cGFuc2lvbj9uLmV4cGFuc2lvbjpudWxsLHJlY2VpdmVkU3RhdHVzOmkuVU5SRUFELHB1c2hDb25maWc6bi5wdXNoQ29uZmlnLGNoYW5uZWxJZDpuLmNoYW5uZWxJZCxpc0ludGVycnVwdDpuLmlzSW50ZXJydXB0fX0sZ3M9ZnVuY3Rpb24oZSl7cmV0dXJuIGUuc29ydCgoZnVuY3Rpb24oZSx0KXt2YXIgbixpLHI9KG51bGw9PT0obj1lLmxhdGVzdE1lc3NhZ2UpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLnNlbnRUaW1lKXx8MDtyZXR1cm4oKG51bGw9PT0oaT10LmxhdGVzdE1lc3NhZ2UpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLnNlbnRUaW1lKXx8MCktcn0pKX0sX3M9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LG4saSl7dmFyIHI9ZS5jYWxsKHRoaXMsdCxuLGkpfHx0aGlzO3JldHVybiByLl9jdXN0b21NZXNzYWdlVHlwZT17fSxyLl9yZWNvbm5lY3RUaW1lcj0tMSxyLl9wdWxsT2ZmbGluZUZpbmlzaGVkPSExLHIuX2Nvbm5lY3RlZFRpbWU9MCxyLl9sb2NhbENvbm5lY3RlZFRpbWU9MCxyLl9zdGF0dXM9SWUuRElTQ09OTkVDVEVELHIuX3B1bGxpbmdNc2c9ITEsci5fcHVsbFF1ZXVlPVtdLHIuX2Nocm1zUXVldWU9e30sci5fbGF0ZXN0U3luY1RpbWVzdGFtcD0wLHIuX2ludGVydmFsVGltZXI9LTEsci5fcHVsbENoYXRyb29tRW50cnlUaW1lc3RhbXA9MCxyLl9sYXN0U3luY1VsdHJhTXNnVGltZVN0YW1wPTAsci5fbGFzdFN5bmNVbHRyYU1zZ0xvY2FsVGltZVN0YW1wPTAsci5fdWx0cmFHcm91cFRpbWVyPS0xLHIuX2lzVWx0cmFQdWxsaW5nPSExLHIuX3VsdHJhR3JvdXBUaW1lUXVlPVtdLHIuX2lzVWx0cmFHcm91cExpc3RFeGlzdD0hMSxyLl91bHRyYUdyb3VwTWFwPXt9LHIuX2ZpcnN0UHVsbFVsdHJhR3JvdXBUaW1lPTAsci5fdWx0cmFNc2dNYXA9e30sci5fcHVsbFVsdHJhQ2hhbmdlTWVzc2FnZVF1ZT1bXSxyLl9pc1B1bGxpbmdVbHRyYUNoYW5nZU1lc3NhZ2U9ITEsci5fbGFzdFB1bGxpbmdVbHRyYUNoYW5nZU1lc3NhZ2VUaW1lPTAsci5fdWx0cmFNc2dDaGFuZ2VNYXA9e30sci5fbGV0dGVyYm94PW5ldyBIcih0LGkuYXBwa2V5KSxyLl9zZW5kTWVzc2FnZVN0b3JlPW5ldyBscyh0LGkuYXBwa2V5KSxyLl9jaHJtRW50cnlIYW5kbGVyPW5ldyBRcihyKSxyfXJldHVybiBOKHQsZSksdC5wcm90b3R5cGUuX2NyZWF0ZU5hdmk9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHVzKHRoaXMucnVudGltZSx0aGlzLl9vcHRpb25zKX0sdC5wcm90b3R5cGUuZ2V0Q29ubmVjdGVkVGltZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb25uZWN0ZWRUaW1lfSx0LnByb3RvdHlwZS5jb25uZWN0PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBuLGkscixzLG8sYT10aGlzO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKHUpe3N3aXRjaCh1LmxhYmVsKXtjYXNlIDA6cmV0dXJuIG49W10sdGhpcy5fbmF2aUluZm89dCx0LnNlcnZlcj9uLnB1c2godC5zZXJ2ZXIpOmdlLndhcm4oXCJuYXZpLnNlcnZlciBpcyBpbnZhbGlkXCIpLChpPXQuYmFja3VwU2VydmVyKSYmaS5zcGxpdChcIixcIikuZm9yRWFjaCgoZnVuY3Rpb24oZSl7bi5pbmRleE9mKGUpPDAmJm4ucHVzaChlKX0pKSwwPT09bi5sZW5ndGg/KGdlLmVycm9yKFwibmF2aSBpbnZhaWxkLlwiLG4pLFsyLEVlLlVOS05PV05dKToocj10aGlzLnJ1bnRpbWUuY3JlYXRlRGF0YUNoYW5uZWwoe3N0YXR1czpmdW5jdGlvbihpKXthLl9jb25uZWN0aW9uU3RhdHVzSGFuZGxlcihpLGUsbix0LnByb3RvY29sKX0sc2lnbmFsOnRoaXMuX3NpZ25hbEhhbmRsZXIuYmluZCh0aGlzKX0sdGhpcy5fb3B0aW9ucy5jb25uZWN0aW9uVHlwZSkscz1ldC5WMywxPT09dC5vcGVuQW50aSYmKHM9ZXQuVjQpLFs0LHIuY29ubmVjdCh0aGlzLl9hcHBrZXksZSxuLHQucHJvdG9jb2wsdGhpcy5fYXBpVmVyLHMpXSk7Y2FzZSAxOnJldHVybihvPXUuc2VudCgpKT09PUVlLlNVQ0NFU1M/KHRoaXMuX2NoYW5uZWw9cix0aGlzLmN1cnJlbnRVc2VySWQ9ci51c2VySWQsdGhpcy5fY29ubmVjdGVkVGltZT1yLmNvbm5lY3RlZFRpbWUsdGhpcy5fbG9jYWxDb25uZWN0ZWRUaW1lPU1hdGguZmxvb3IoKERhdGUubm93KCkrci5zZW5kQ29ubmVjdFRpbWUpLzIpLHRoaXMuX3dhdGNoZXIuc3RhdHVzKEllLkNPTk5FQ1RFRCksdGhpcy5fc3RhdHVzPUllLkNPTk5FQ1RFRCx0aGlzLl9wdWxsT2ZmbGluZUZpbmlzaGVkPSExLHRoaXMuX2NvbnZlcnNhdGlvbk1hbmFnZXI9bmV3IG9zKHRoaXMsdGhpcy5fYXBwa2V5LHRoaXMuY3VycmVudFVzZXJJZCx0aGlzLl93YXRjaGVyLmNvbnZlcnNhdGlvbix0aGlzLl93YXRjaGVyLmNvbnZlcnNhdGlvblRhZyksdGhpcy5fY29udmVyc2F0aW9uTWFuYWdlci5zdGFydFB1bGxDb252ZXJzYXRpb25TdGF0dXMoMCksdGhpcy5fdXNlclNldHRpbmdNYW5hZ2VyPW5ldyBhcyh0aGlzLHRoaXMuX2FwcGtleSx0aGlzLmN1cnJlbnRVc2VySWQsdGhpcy5fd2F0Y2hlci50YWcpLHRoaXMuX3VzZXJTZXR0aW5nTWFuYWdlci5wdWxsVXNlclNldHRpbmdzKDApLHRoaXMuX3NlbmRNZXNzYWdlU3RvcmUuaW5pdCh0aGlzLmN1cnJlbnRVc2VySWQpLHRoaXMuX2NvbnZlcnNhdGlvbk1hbmFnZXIuYWRhcHRPbGRTdG9yZSgpLHRoaXMuX3J0Y0tWTWFuYWdlcj1uZXcgY3ModGhpcyksdGhpcy5fam9pbmVkQ2hybU1hbmFnZXI9bmV3IFdyKHRoaXMucnVudGltZSx0aGlzLl9hcHBrZXksdGhpcy5jdXJyZW50VXNlcklkLHQuam9pbk1DaHJtKSx0aGlzLl9zdGFydFN5bmNJbnRlcnZhbCgpLDE9PT10LnVnTXNnJiZ0aGlzLl9zdGFydFVsdHJhU3luY0ludGVydmFsKCkpOnIuY2xvc2UoKSxbMixvXX19KSl9KSl9LHQucHJvdG90eXBlLl9jb25uZWN0aW9uU3RhdHVzSGFuZGxlcj1mdW5jdGlvbihlLHQsbixpKXtpZihnZS53YXJuKFwiY29ubmVjdGlvbiBzdGF0dXMgY2hhbmdlZDpcIixlKSx0aGlzLl9zdGF0dXM9ZSxlIT09SWUuQ09OTkVDVElORylpZihlIT09SWUuQ09OTkVDVEVEKXtpZih0aGlzLl9jaGFubmVsJiZlIT09SWUuRElTQ09OTkVDVEVEKXJldHVybiBlPT09SWUuQkxPQ0tFRHx8ZT09PUllLktJQ0tFRF9PRkZMSU5FX0JZX09USEVSX0NMSUVOVHx8ZT09PUllLkRJU0NPTk5FQ1RfQllfU0VSVkVSPyh0aGlzLmRpc2Nvbm5lY3QoKSx2b2lkIHRoaXMuX3dhdGNoZXIuc3RhdHVzKGUpKTp2b2lkKGUhPT1JZS5SRURJUkVDVD8odGhpcy5fd2F0Y2hlci5zdGF0dXMoZSksdGhpcy5fdHJ5MlJlY29ubmVjdCh0LG4saSkpOnRoaXMuX3dhdGNoZXIuc3RhdHVzKGUpKTt0aGlzLl93YXRjaGVyLnN0YXR1cyhlKX1lbHNlIHRoaXMuX3dhdGNoZXIuc3RhdHVzKGUpO2Vsc2UgdGhpcy5fd2F0Y2hlci5zdGF0dXMoZSl9LHQucHJvdG90eXBlLl90cnkyUmVjb25uZWN0PWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIGkscj10aGlzO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKHMpe3N3aXRjaChzLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuX2NoYW5uZWw/KGk9ZXQuVjMsMT09PXRoaXMuX25hdmlJbmZvLm9wZW5BbnRpJiYoaT1ldC5WNCksWzQsdGhpcy5fY2hhbm5lbC5jb25uZWN0KHRoaXMuX2FwcGtleSxlLHQsbix0aGlzLl9hcGlWZXIsaSldKTpbMl07Y2FzZSAxOnJldHVybiBzLnNlbnQoKT09PUVlLlNVQ0NFU1M/KHRoaXMuX3B1bGxPZmZsaW5lRmluaXNoZWQ9ITEsdGhpcy5fc3RhcnRTeW5jSW50ZXJ2YWwoKSx0aGlzLl93YXRjaGVyLnN0YXR1cyhJZS5DT05ORUNURUQpLHRoaXMuX3N0YXR1cz1JZS5DT05ORUNURUQsdGhpcy5fc3RhcnRVbHRyYVN5bmNJbnRlcnZhbCgpLHRoaXMuX3Jlam9pbkNocm0oKSxnZS5fX2luc2VydExvZ0ludG9EYXRhYmFzZSgpLFsyXSk6KHRoaXMuX3dhdGNoZXIuc3RhdHVzKEllLldFQlNPQ0tFVF9VTkFWQUlMQUJMRSksdGhpcy5fc3RhdHVzPUllLldFQlNPQ0tFVF9VTkFWQUlMQUJMRSx0aGlzLl9yZWNvbm5lY3RUaW1lcj1zZXRUaW1lb3V0KChmdW5jdGlvbigpe3IuX3JlY29ubmVjdFRpbWVyPS0xLHIuX3RyeTJSZWNvbm5lY3QoZSx0LG4pfSksNWUzKSxbMl0pfX0pKX0pKX0sdC5wcm90b3R5cGUuX3NpZ25hbEhhbmRsZXI9ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLnN5bmNNc2csaT1lLnRvcGljO2lmKG4pdGhpcy5fcmVjZWl2ZVN5bmNNc2coZSx0KTtlbHNle3ZhciByPWJyW2ldO2lmKHIpc3dpdGNoKHIpe2Nhc2UgYnIuc19udGY6Z2UuaW5mbyhcInJlY3Ygc19udGYgLT4gc2lnbmFsLm1lc3NhZ2VJZDogXCIrZS5tZXNzYWdlSWQpLHRoaXMuX3B1bGxNc2coZSk7YnJlYWs7Y2FzZSBici5zX21zZzp0aGlzLl9yZWNlaXZlTXNnKGUpO2JyZWFrO2Nhc2UgYnIuc19jbWQ6dGhpcy5fcmVjZWl2ZVN0YXRlTm90aWZ5KGUpO2JyZWFrO2Nhc2UgYnIuc191czp0aGlzLl9yZWNlaXZlU2V0dGluZ05vdGlmeShlKTticmVhaztjYXNlIGJyLnJ0Y19udGY6dGhpcy5fcmVjZWl2ZVJ0Y0t2KGUpO2JyZWFrO2Nhc2UgYnIuc19vcE50Zjp0aGlzLl9wdWxsT3BlcmF0ZVN0YXR1c05vdGlmeShlKX1lbHNlIGdlLmVycm9yKFwidW5rbm93biB0b3BpYzpcIixpKX19LHQucHJvdG90eXBlLl9yZWNlaXZlU3RhdGVOb3RpZnk9ZnVuY3Rpb24oZSl7dmFyIHQsbj1udWxsPT09KHQ9dGhpcy5fY2hhbm5lbCl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuY29kZWMuZGVjb2RlQnlQQk5hbWUoZS5kYXRhLEJ0KSxpPW4udGltZSxyPW4udHlwZSxzPW4uY2hybUlkO3N3aXRjaChyKXtjYXNlIDI6dGhpcy5fY2hybUVudHJ5SGFuZGxlci5wdWxsRW50cnkocyxpKTticmVhaztjYXNlIDM6dGhpcy5fY29udmVyc2F0aW9uTWFuYWdlci5zdGFydFB1bGxDb252ZXJzYXRpb25TdGF0dXMoaSk7YnJlYWs7Y2FzZSA0OnRoaXMuX2Nocm1FbnRyeUhhbmRsZXIucmVzZXQocyksdGhpcy5fd2F0Y2hlci5jaGF0cm9vbSh7Y2hhdHJvb21EZXN0cm95ZWQ6ZS50YXJnZXRJZH0pO2JyZWFrO2Nhc2UgNjp0aGlzLl91bHRyYUdyb3VwVGltZVF1ZS5wdXNoKGkpLHRoaXMuX3N5bmNVbHRyYU1zZyh0aGlzLl9sYXN0U3luY1VsdHJhTXNnVGltZVN0YW1wKTticmVhaztjYXNlIDc6dGhpcy5fcHVsbFVsdHJhQ2hhbmdlTWVzc2FnZVF1ZS5wdXNoKGkpLHRoaXMuX3B1bGxVbHRyYUNoYW5nZU1lc3NhZ2VMaXN0KHRoaXMuX2xhc3RQdWxsaW5nVWx0cmFDaGFuZ2VNZXNzYWdlVGltZSl9fSx0LnByb3RvdHlwZS5fcmVjZWl2ZVNldHRpbmdOb3RpZnk9ZnVuY3Rpb24oZSl7dmFyIHQsbj0obnVsbD09PSh0PXRoaXMuX2NoYW5uZWwpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmNvZGVjLmRlY29kZUJ5UEJOYW1lKGUuZGF0YSxrbikpLnZlcnNpb247dGhpcy5fdXNlclNldHRpbmdNYW5hZ2VyLnB1bGxVc2VyU2V0dGluZ3Mobil9LHQucHJvdG90eXBlLl9yZWNlaXZlUnRjS3Y9ZnVuY3Rpb24oZSl7dmFyIHQsbj1udWxsPT09KHQ9dGhpcy5fY2hhbm5lbCl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuY29kZWMuZGVjb2RlQnlQQk5hbWUoZS5kYXRhLGZpKSxpPW4udGltZSxyPW4udHlwZSxzPW4ucm9vbUlkO3N3aXRjaChyKXtjYXNlIDE6dGhpcy5fcnRjS1ZNYW5hZ2VyLnB1bGxFbnRyeShzLGkpfX0sdC5wcm90b3R5cGUuX3JlY2VpdmVNZXNzYWdlRXhwYW5zaW9uPWZ1bmN0aW9uKGUpe3ZhciB0PWUuY29udGVudCxuPXQucHV0LGk9dC5kZWwscj10Lm1pZDtuJiZ0aGlzLl93YXRjaGVyLmV4cGFuc2lvbih7dXBkYXRlZEV4cGFuc2lvbjp7bWVzc2FnZVVJZDpyLGV4cGFuc2lvbjpufX0pLGkmJnRoaXMuX3dhdGNoZXIuZXhwYW5zaW9uKHtkZWxldGVkRXhwYW5zaW9uOnttZXNzYWdlVUlkOnIsZGVsZXRlZEtleXM6aX19KX0sdC5wcm90b3R5cGUuX3JlY2VpdmVTeW5jTXNnPWZ1bmN0aW9uKGUsdCl7dmFyIG4saTtpZihmcy5pbmNsdWRlcyhlLnRvcGljKSl7aWYoZS50b3BpYz09PWJyW2JyLnVwZFVnUlRpbWVdKXt2YXIgcj1udWxsPT09KG49dGhpcy5fY2hhbm5lbCl8fHZvaWQgMD09PW4/dm9pZCAwOm4uY29kZWMuZGVjb2RlQnlQQk5hbWUoZS5kYXRhLHp0KSxzPXIuY2hhbm5lbElkLG89ci5idXNDaGFubmVsLGE9dGhpcy5fdWx0cmFHcm91cE1hcFtvK1wiX1wiK3NdO3JldHVybiBhJiYoYS51bnJlYWRNZXNzYWdlQ291bnQ9MCxhLnVucmVhZE1lbnRpb25lZENvdW50PTAsYS5sYXN0UmVhZFRpbWU9dC50aW1lc3RhbXAsdGhpcy5fd2F0Y2hlci5jb252ZXJzYXRpb24oSXQoW2FdKSkpLHZvaWQodCYmKHRoaXMuX3VsdHJhTXNnTWFwW3QubWVzc2FnZVVJZF09dC50aW1lc3RhbXApKX12YXIgdT1udWxsPT09KGk9dGhpcy5fY2hhbm5lbCl8fHZvaWQgMD09PWk/dm9pZCAwOmkuY29kZWMuZGVjb2RlQnlQQk5hbWUoZS5kYXRhLFV0LHtjdXJyZW50VXNlcklkOnRoaXMuY3VycmVudFVzZXJJZCxzaWduYWw6ZX0pO3U9dGhpcy5faGFuZGxlTXNnUHJvcGVydGllcyh1KSx0JiYodS5zZW50VGltZT10LnRpbWVzdGFtcCx1Lm1lc3NhZ2VVSWQ9dC5tZXNzYWdlVUlkKSx0aGlzLl9wdWxsaW5nTXNnP3RoaXMuX3B1bGxRdWV1ZS5wdXNoKChudWxsPT10P3ZvaWQgMDp0LnRpbWVzdGFtcCl8fHUuc2VudFRpbWUpOih0JiZ0aGlzLl9zZW5kTWVzc2FnZVN0b3JlLnNldE1lc3NhZ2UodC5tZXNzYWdlVUlkLHQudGltZXN0YW1wKSx1Lm1lc3NhZ2VUeXBlIT09U2UuRVhQQU5TSU9OX05PVElGWT8odS5tZXNzYWdlVHlwZT09PVNlLlNZTkNfUkVBRF9TVEFUVVMmJnRoaXMuX2NvbnZlcnNhdGlvbk1hbmFnZXIuY2xlYXJVbnJlYWRDb3VudCh1LmNvbnZlcnNhdGlvblR5cGUsdS50YXJnZXRJZCx1LmNoYW5uZWxJZCksdGhpcy5fY29udmVyc2F0aW9uTWFuYWdlci5zZXRDb252ZXJzYXRpb25DYWNoZUJ5TWVzc2FnZSh1LCEwKSx0aGlzLl93YXRjaGVyLmJhdGNoTWVzc2FnZShbdV0pKTp0aGlzLl9yZWNlaXZlTWVzc2FnZUV4cGFuc2lvbih1KSl9fSx0LnByb3RvdHlwZS5fcHVsbE1zZz1mdW5jdGlvbihlKXtpZih0aGlzLl9jaGFubmVsKXt2YXIgdD10aGlzLl9jaGFubmVsLmNvZGVjLmRlY29kZUJ5UEJOYW1lKGUuZGF0YSxCdCksbj10LnR5cGUsaT10LmNocm1JZCxyPXQudGltZTtpZihnZS5pbmZvKFwic19udGYgLT4gdHlwZTogXCIrbitcIiwgY2hybUlkOiBcIitpK1wiLCB0aW1lOiBcIityKSwyPT09bil7dmFyIHM9dGhpcy5fY2hybXNRdWV1ZVtpXTtpZighcylyZXR1cm47cy5xdWV1ZS5wdXNoKHIpLHRoaXMuX3B1bGxDaHJtTXNnKGkpfWVsc2UgdGhpcy5fcHVsbFF1ZXVlLnB1c2gociksdGhpcy5fc3luY01zZygpfX0sdC5wcm90b3R5cGUuX3N0YXJ0U3luY0ludGVydmFsPWZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLl9zdG9wU3luY0ludGVydmFsKCk7dGhpcy5faW50ZXJ2YWxUaW1lcj1zZXRJbnRlcnZhbCgoZnVuY3Rpb24oKXtEYXRlLm5vdygpLWUuX2xhdGVzdFN5bmNUaW1lc3RhbXA+PTE4ZTQmJmUuX3N5bmNNc2coKX0pLDNlNCksdGhpcy5fbGF0ZXN0U3luY1RpbWVzdGFtcD1EYXRlLm5vdygpLHRoaXMuX3N5bmNNc2coKX0sdC5wcm90b3R5cGUuX3N0b3BTeW5jSW50ZXJ2YWw9ZnVuY3Rpb24oKXstMSE9PXRoaXMuX2ludGVydmFsVGltZXImJihjbGVhckludGVydmFsKHRoaXMuX2ludGVydmFsVGltZXIpLHRoaXMuX2ludGVydmFsVGltZXI9LTEpfSx0LnByb3RvdHlwZS5fc3luY01zZz1mdW5jdGlvbigpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgZSx0LG4saSxyLHMsbyxhLHUsYyxoLGwsZCxmLHA9dGhpcztyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihnKXtzd2l0Y2goZy5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9wdWxsaW5nTXNnP1syXTp0aGlzLl9jaGFubmVsPyh0aGlzLl9wdWxsaW5nTXNnPSEwLGU9dGhpcy5fbGV0dGVyYm94LmdldE91dGJveFRpbWUodGhpcy5jdXJyZW50VXNlcklkKSx0PXRoaXMuX2xldHRlcmJveC5nZXRJbmJveFRpbWUodGhpcy5jdXJyZW50VXNlcklkKSxnZS5pbmZvKFwicHVsbE1zZyAtPiBzZW5kYm94VGltZTogXCIrZStcIiwgaW5ib3hUaW1lOiBcIit0KSxuPXRoaXMuX2NoYW5uZWwuY29kZWMuZW5jb2RlU3luY01zZyh7c2VuZGJveFRpbWU6ZSxpbmJveFRpbWU6dH0pLGk9bmV3IE9yKGJyW2JyLnB1bGxNc2ddLG4sdGhpcy5jdXJyZW50VXNlcklkKSxbNCx0aGlzLl9jaGFubmVsLnNlbmQoaSxQdCx7Y29ubmVjdGVkVGltZTp0aGlzLl9jaGFubmVsLmNvbm5lY3RlZFRpbWUsY3VycmVudFVzZXJJZDp0aGlzLmN1cnJlbnRVc2VySWR9KV0pOih0aGlzLl9wdWxsaW5nTXNnPSExLFsyXSk7Y2FzZSAxOnJldHVybiByPWcuc2VudCgpLHM9ci5jb2RlLG89ci5kYXRhLHRoaXMuX2xhdGVzdFN5bmNUaW1lc3RhbXA9RGF0ZS5ub3coKSxzIT09RWUuU1VDQ0VTU3x8IW98fHJlKG8uZmluaXNoZWQpfHxyZShvLmxpc3QpfHxyZShvLnN5bmNUaW1lKT8oZ2Uud2FybihcInB1bGxNc2cgZmFpbGVkIC0+IGNvZGU6XCIscyxcIiwgZGF0YTogXCIsbyksdGhpcy5fcHVsbGluZ01zZz0hMSxbMl0pOihhPW8ubGlzdCx1PW8uZmluaXNoZWQsYz1vLnN5bmNUaW1lLGdlLmluZm8oXCJwdWxsTXNnIHN1Y2Nlc3MgLT4gc3luY1RpbWU6IFwiK2MrXCIsIGZpbmlzaGVkOiBcIit1KSxoPTAsbD1bXSxhLmZvckVhY2goKGZ1bmN0aW9uKGUpe2lmKGUubWVzc2FnZURpcmVjdGlvbj09PW1lLlNFTkQmJihoPU1hdGgubWF4KGUuc2VudFRpbWUsaCkscC5fc2VuZE1lc3NhZ2VTdG9yZS5nZXRTZW5kTWVzc2FnZU1hcCgpW2UubWVzc2FnZVVJZF0pKXJldHVybiB2b2lkIHAuX3NlbmRNZXNzYWdlU3RvcmUucmVtb3ZlQnlVSUQoZS5tZXNzYWdlVUlkKTtpZihlLm1lc3NhZ2VUeXBlIT09U2UuRVhQQU5TSU9OX05PVElGWSl7aWYoZS5tZXNzYWdlVHlwZT09PVNlLlNZTkNfUkVBRF9TVEFUVVMpe2lmKGUuc2VuZGVyVXNlcklkIT09cC5jdXJyZW50VXNlcklkKXJldHVybjtwLl9jb252ZXJzYXRpb25NYW5hZ2VyLmNsZWFyVW5yZWFkQ291bnQoZS5jb252ZXJzYXRpb25UeXBlLGUudGFyZ2V0SWQsZS5jaGFubmVsSWQpfXZhciB0PXAuX2hhbmRsZU1zZ1Byb3BlcnRpZXMoZSk7cC5fY29udmVyc2F0aW9uTWFuYWdlci5zZXRDb252ZXJzYXRpb25DYWNoZUJ5TWVzc2FnZSh0LCEwKSxsLnB1c2godCl9ZWxzZSBwLl9yZWNlaXZlTWVzc2FnZUV4cGFuc2lvbihlKX0pKSx0aGlzLl93YXRjaGVyLmJhdGNoTWVzc2FnZShsKSx0aGlzLl9sZXR0ZXJib3guc2V0SW5ib3hUaW1lKGMsdGhpcy5jdXJyZW50VXNlcklkKSx0aGlzLl9sZXR0ZXJib3guc2V0T3V0Ym94VGltZShoLHRoaXMuY3VycmVudFVzZXJJZCksdGhpcy5fc2VuZE1lc3NhZ2VTdG9yZS5yZW1vdmVCeVRpbWVzdGFtcChoKSx0aGlzLl9wdWxsaW5nTXNnPSExLGQ9dGhpcy5fcHVsbFF1ZXVlLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIGU+Y30pKSx0aGlzLl9wdWxsUXVldWUubGVuZ3RoPTAsKGY9dGhpcy5fcHVsbFF1ZXVlKS5wdXNoLmFwcGx5KGYsZCksdSYmIXRoaXMuX3B1bGxPZmZsaW5lRmluaXNoZWQmJih0aGlzLl9wdWxsT2ZmbGluZUZpbmlzaGVkPSEwLHRoaXMuX3dhdGNoZXIucHVsbEZpbmlzaGVkKCkpLCghdXx8ZC5sZW5ndGg+MCkmJnRoaXMuX3N5bmNNc2coKSxbMl0pfX0pKX0pKX0sdC5wcm90b3R5cGUuX3JlY2VpdmVNc2c9ZnVuY3Rpb24oZSl7aWYodGhpcy5fY2hhbm5lbCYmIXRoaXMuX3B1bGxpbmdNc2cpaWYodGhpcy5fcHVsbFF1ZXVlLmxlbmd0aD4wKXRoaXMuX3N5bmNNc2coKTtlbHNle3ZhciB0PXRoaXMuX2NoYW5uZWwuY29kZWMuZGVjb2RlQnlQQk5hbWUoZS5kYXRhLEx0LHtjdXJyZW50VXNlcklkOnRoaXMuY3VycmVudFVzZXJJZCxjb25uZWN0ZWRUaW1lOnRoaXMuX2NoYW5uZWwuY29ubmVjdGVkVGltZX0pOyh0PXRoaXMuX2hhbmRsZU1zZ1Byb3BlcnRpZXModCkpLnNlbmRlclVzZXJJZD09PXRoaXMuY3VycmVudFVzZXJJZCYmdGhpcy5fc2VuZE1lc3NhZ2VTdG9yZS5zZXRNZXNzYWdlKHQubWVzc2FnZVVJZCx0LnNlbnRUaW1lKSx0LmlzU3RhdHVzTWVzc2FnZXx8dC5zZW5kZXJVc2VySWQ9PT10aGlzLmN1cnJlbnRVc2VySWR8fHRoaXMuX2xldHRlcmJveC5zZXRJbmJveFRpbWUodC5zZW50VGltZSx0aGlzLmN1cnJlbnRVc2VySWQpLHQubWVzc2FnZVR5cGUhPT1TZS5FWFBBTlNJT05fTk9USUZZP3QubWVzc2FnZVR5cGU9PT1TZS5TWU5DX1JFQURfU1RBVFVTJiZ0LnNlbmRlclVzZXJJZCE9PXRoaXMuY3VycmVudFVzZXJJZHx8KHRoaXMuX2NvbnZlcnNhdGlvbk1hbmFnZXIuc2V0Q29udmVyc2F0aW9uQ2FjaGVCeU1lc3NhZ2UodCwhMCksdGhpcy5fd2F0Y2hlci5iYXRjaE1lc3NhZ2UoW3RdKSk6dGhpcy5fcmVjZWl2ZU1lc3NhZ2VFeHBhbnNpb24odCl9fSx0LnByb3RvdHlwZS5faGFuZGxlTXNnUHJvcGVydGllcz1mdW5jdGlvbihlLHQpe3ZvaWQgMD09PXQmJih0PSExKTt2YXIgbixpPWUubWVzc2FnZVR5cGUscj1lLmlzQ291bnRlZCxzPWUuaXNQZXJzaXRlZCxvPWUuaXNTdGF0dXNNZXNzYWdlLGE9aSBpbiB2LHU9aSBpbiB0aGlzLl9jdXN0b21NZXNzYWdlVHlwZTtpZihuPWE/TyhPKHt9LHZbaV0pLHtpc1N0YXR1c01lc3NhZ2U6VC5pbmNsdWRlcyhpKX0pOnU/dGhpcy5fY3VzdG9tTWVzc2FnZVR5cGVbaV06e2lzQ291bnRlZDohc2UocikmJnIsaXNQZXJzaXRlZDohc2UocykmJnMsaXNTdGF0dXNNZXNzYWdlOiExfSxPYmplY3QuYXNzaWduKGUsbiksdCYmIXJlKG8pJiYoZS5pc1N0YXR1c01lc3NhZ2U9byksIXQpe3ZhciBjPWUuY29udGVudC51c2VyO2lmKGMpe3ZhciBoPWMucG9ydHJhaXQsbD1jLnBvcnRyYWl0VXJpLGQ9aHx8bDtkJiYoYy5wb3J0cmFpdD1jLnBvcnRyYWl0VXJpPWQpfX1yZXR1cm4gZX0sdC5wcm90b3R5cGUuZ2V0SGlzdG9yeU1lc3NhZ2U9ZnVuY3Rpb24oZSx0LG4saSxyLHMpe3JldHVybiB2b2lkIDA9PT1zJiYocz1cIlwiKSxNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbyxhLHUsYyxoLGwsZCxmLHA7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oZyl7c3dpdGNoKGcubGFiZWwpe2Nhc2UgMDpyZXR1cm4gYT0obz10aGlzKS5jdXJyZW50VXNlcklkLHU9by5fY2hhbm5lbCxjPXNyW2VdfHwkaSxoPTE9PT1pJiYwPT09bix1PyhsPXUuY29kZWMuZW5jb2RlR2V0SGlzdG9yeU1zZyh0LHt0aW1lc3RhbXA6bixjb3VudDpoPzI6aSxvcmRlcjpyLGNoYW5uZWxJZDpzfSksWzQsdS5zZW5kKG5ldyBPcihjLGwsYSksRnQse2N1cnJlbnRVc2VySWQ6YSxjb25uZWN0ZWRUaW1lOnUuY29ubmVjdGVkVGltZSxjb252ZXJzYXRpb246e3RhcmdldElkOnR9fSldKTpbMywyXTtjYXNlIDE6cmV0dXJuIGQ9Zy5zZW50KCksKGY9ZC5jb2RlKSE9PUVlLlNVQ0NFU1M/WzIse2NvZGU6Zn1dOihwPWQuZGF0YSxoJiYyPT09cC5saXN0Lmxlbmd0aCYmKHAuaGFzTW9yZT0hMCwwPT09cj9wLmxpc3Quc2hpZnQoKTpwLmxpc3QucG9wKCkpLFsyLHtjb2RlOmYsZGF0YTp7bGlzdDpwLmxpc3QsaGFzTW9yZTpwLmhhc01vcmV9fV0pO2Nhc2UgMjpyZXR1cm5bMix7Y29kZTpFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEfV19fSkpfSkpfSx0LnByb3RvdHlwZS5yZXBvcnRTREtJbmZvPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuY3VycmVudFVzZXJJZCxuPXRoaXMuX2NoYW5uZWw7aWYobil7Z2UuaW5mbyhcInJlcG9ydFNES0luZm8gLT5cIixlKTt2YXIgaT1uLmNvZGVjLmVuY29kZVJlcG9ydFNES0luZm8oSlNPTi5zdHJpbmdpZnkoZSkpLHI9bmV3IE9yKGJyW2JyLnJlcG9ydHNka10saSx0KTtuLnNlbmQocikudGhlbigoZnVuY3Rpb24oZSl7dmFyIHQ9ZS5jb2RlO3QhPT1FZS5TVUNDRVNTJiZnZS53YXJuKFwicmVwb3J0U0RLSW5mbyBmYWlsZWQgLT4gY29kZTogXCIrdCl9KSl9fSx0LnByb3RvdHlwZS5kZWxldGVSZW1vdGVNZXNzYWdlPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgcixzLG8sYSx1LGMsaDtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihsKXtzd2l0Y2gobC5sYWJlbCl7Y2FzZSAwOnJldHVybiBzPShyPXRoaXMpLmN1cnJlbnRVc2VySWQsKG89ci5fY2hhbm5lbCk/KGE9by5jb2RlYy5lbmNvZGVEZWxldGVNZXNzYWdlcyhlLHQsbixpKSx1PW5ldyBPcihGaSxhLHMpLFs0LG8uc2VuZCh1KV0pOlszLDJdO2Nhc2UgMTpyZXR1cm4gYz1sLnNlbnQoKSxoPWMuY29kZSxFZS5TVUNDRVNTLFsyLGhdO2Nhc2UgMjpyZXR1cm5bMixFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEXX19KSl9KSl9LHQucHJvdG90eXBlLmRlbGV0ZVJlbW90ZU1lc3NhZ2VCeVRpbWVzdGFtcD1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHIscyxvLGEsdSxjLGgsbDtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihkKXtzd2l0Y2goZC5sYWJlbCl7Y2FzZSAwOnJldHVybiBzPShyPXRoaXMpLmN1cnJlbnRVc2VySWQsKG89ci5fY2hhbm5lbCk/KGE9by5jb2RlYy5lbmNvZGVDbGVhck1lc3NhZ2VzKHQsbixpLGUpLHU9b3JbZV0sYz1uZXcgT3IodSxhLHMpLFs0LG8uc2VuZChjKV0pOlszLDJdO2Nhc2UgMTpyZXR1cm4gaD1kLnNlbnQoKSxsPWguY29kZSxFZS5TVUNDRVNTLFsyLGxdO2Nhc2UgMjpyZXR1cm5bMixFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEXX19KSl9KSl9LHQucHJvdG90eXBlLmdldENvbnZlcnNhdGlvbkxpc3Q9ZnVuY3Rpb24oZSx0LG4saSxyKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9MzAwKSxNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgcixzLG8sYSx1LGMsaCxsLGQ9dGhpcztyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihmKXtzd2l0Y2goZi5sYWJlbCl7Y2FzZSAwOnJldHVybiBzPShyPXRoaXMpLmN1cnJlbnRVc2VySWQsbz1yLl9jaGFubmVsLHQ9dHx8ai5QUklWQVRFLG8/KGE9by5jb2RlYy5lbmNvZGVPbGRDb252ZXJzYXRpb25MaXN0KHtjb3VudDplLHR5cGU6dCxzdGFydFRpbWU6bixvcmRlcjppfSksdT1uZXcgT3IoSmksYSxzKSxbNCxvLnNlbmQodSxLdCx7Y3VycmVudFVzZXJJZDpzLGNvbm5lY3RlZFRpbWU6by5jb25uZWN0ZWRUaW1lLGFmdGVyRGVjb2RlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuY29udmVyc2F0aW9uVHlwZSxuPWUudGFyZ2V0SWQsaT1lLmNoYW5uZWxJZCxyPWQuX2NvbnZlcnNhdGlvbk1hbmFnZXIuZ2V0KHQsbixpKTtyZXR1cm4gT2JqZWN0LmFzc2lnbihlLHIpLGV9fSldKTpbMywyXTtjYXNlIDE6cmV0dXJuIGM9Zi5zZW50KCksaD1jLmNvZGUsbD1jLmRhdGEsaCE9PUVlLlNVQ0NFU1M/WzIse2NvZGU6aH1dOlsyLHtjb2RlOmgsZGF0YTpudWxsPT1sP3ZvaWQgMDpsLmxpc3R9XTtjYXNlIDI6cmV0dXJuWzIse2NvZGU6RWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRH1dfX0pKX0pKX0sdC5wcm90b3R5cGUucmVtb3ZlQ29udmVyc2F0aW9uPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIGkscixzLG8sYTtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbih1KXtzd2l0Y2godS5sYWJlbCl7Y2FzZSAwOnJldHVybihpPXRoaXMuX2NoYW5uZWwpPyhyPWkuY29kZWMuZW5jb2RlUmVtb3ZlT2xkQ29udmVyc2F0aW9uTGlzdCh7Y29udmVyc2F0aW9uVHlwZTplLGNoYW5uZWxJZDpuLHRhcmdldElkOnR9KSxzPW5ldyBPcih6aSxyLHQpLFs0LGkuc2VuZChzKV0pOlszLDJdO2Nhc2UgMTpyZXR1cm4gbz11LnNlbnQoKSxnZS5pbmZvKFwiUmVtb3ZlQ29udmVyc2F0aW9uID0+XCIsbyksYT1vLmNvZGUsRWUuU1VDQ0VTUyxbMixhXTtjYXNlIDI6cmV0dXJuWzIsRWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRF19fSkpfSkpfSx0LnByb3RvdHlwZS5nZXRDb252ZXJzYXRpb249ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgaSxyLHMsbyxhLHU7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oYyl7c3dpdGNoKGMubGFiZWwpe2Nhc2UgMDpyZXR1cm4gZSE9PWouVUxUUkFfR1JPVVA/WzMsMV06KGk9dGhpcy5fdWx0cmFHcm91cE1hcFtuK1wiX1wiK3RdKT9bMywzXTpbMix7Y29kZTpFZS5DT05WRVJfR0VUX0VSUk9SfV07Y2FzZSAxOnJldHVybihyPXRoaXMuX2NvbnZlcnNhdGlvbk1hbmFnZXIuZ2V0KGUsdCxuKSk/WzQsdGhpcy5nZXRIaXN0b3J5TWVzc2FnZShlLHQsMCwxLDApXTpbMix7Y29kZTpFZS5DT05WRVJfR0VUX0VSUk9SfV07Y2FzZSAyOmlmKHM9Yy5zZW50KCksbz1zLmNvZGUsYT1zLmRhdGEsbyE9PUVlLlNVQ0NFU1MpcmV0dXJuWzIse2NvZGU6RWUuQ09OVkVSX0dFVF9FUlJPUn1dO3U9KG51bGw9PWE/dm9pZCAwOmEubGlzdFswXSl8fG51bGwsaT17Y29udmVyc2F0aW9uVHlwZTplLHRhcmdldElkOnQsY2hhbm5lbElkOm4sdW5yZWFkTWVzc2FnZUNvdW50OnIudW5yZWFkTWVzc2FnZUNvdW50fHwwLGxhdGVzdE1lc3NhZ2U6dSxub3RpZmljYXRpb25TdGF0dXM6ci5ub3RpZmljYXRpb25TdGF0dXN8fE9lLkNMT1NFLGlzVG9wOnIuaXNUb3B8fCExLGxhc3RVbnJlYWRUaW1lOnIubGFzdFVucmVhZFRpbWV8fDAsdW5yZWFkTWVudGlvbmVkQ291bnQ6ci51bnJlYWRNZW50aW9uZWRDb3VudHx8MH0sYy5sYWJlbD0zO2Nhc2UgMzpyZXR1cm5bMix7Y29kZTpFZS5TVUNDRVNTLGRhdGE6aX1dfX0pKX0pKX0sdC5wcm90b3R5cGUuZ2V0QWxsQ29udmVyc2F0aW9uVW5yZWFkQ291bnQ9ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXMuX2NvbnZlcnNhdGlvbk1hbmFnZXIuZ2V0QWxsVW5yZWFkQ291bnQoZSx0LG4pO3JldHVybiBQcm9taXNlLnJlc29sdmUoe2NvZGU6RWUuU1VDQ0VTUyxkYXRhOml9KX0sdC5wcm90b3R5cGUuZ2V0Q29udmVyc2F0aW9uVW5yZWFkQ291bnQ9ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHI7cmV0dXJuIHI9ZT09PWouVUxUUkFfR1JPVVA/KG51bGw9PT0oaT10aGlzLl91bHRyYUdyb3VwTWFwW24rXCJfXCIrdF0pfHx2b2lkIDA9PT1pP3ZvaWQgMDppLnVucmVhZE1lc3NhZ2VDb3VudCl8fDA6dGhpcy5fY29udmVyc2F0aW9uTWFuYWdlci5nZXRVbnJlYWRDb3VudChlLHQsbiksUHJvbWlzZS5yZXNvbHZlKHtjb2RlOkVlLlNVQ0NFU1MsZGF0YTpyfSl9LHQucHJvdG90eXBlLmNsZWFyQ29udmVyc2F0aW9uVW5yZWFkQ291bnQ9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB0aGlzLl9jb252ZXJzYXRpb25NYW5hZ2VyLmNsZWFyVW5yZWFkQ291bnQoZSx0LG4sITEpLFByb21pc2UucmVzb2x2ZShFZS5TVUNDRVNTKX0sdC5wcm90b3R5cGUuY2xlYXJBbGxVbnJlYWRDb3VudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb252ZXJzYXRpb25NYW5hZ2VyLmNsZWFyQWxsVW5yZWFkQ291bnQoKSxQcm9taXNlLnJlc29sdmUoRWUuU1VDQ0VTUyl9LHQucHJvdG90eXBlLmdldEZpcnN0VW5yZWFkTWVzc2FnZT1mdW5jdGlvbihlLHQpe3Rocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpfSx0LnByb3RvdHlwZS5zYXZlQ29udmVyc2F0aW9uTWVzc2FnZURyYWZ0PWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiB0aGlzLl9jb252ZXJzYXRpb25NYW5hZ2VyLnNldERyYWZ0KGUsdCxuLGkpLFByb21pc2UucmVzb2x2ZShFZS5TVUNDRVNTKX0sdC5wcm90b3R5cGUuZ2V0Q29udmVyc2F0aW9uTWVzc2FnZURyYWZ0PWZ1bmN0aW9uKGUsdCxuKXt2YXIgaT10aGlzLl9jb252ZXJzYXRpb25NYW5hZ2VyLmdldERyYWZ0KGUsdCxuKTtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtjb2RlOkVlLlNVQ0NFU1MsZGF0YTppfSl9LHQucHJvdG90eXBlLmNsZWFyQ29udmVyc2F0aW9uTWVzc2FnZURyYWZ0PWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdGhpcy5fY29udmVyc2F0aW9uTWFuYWdlci5jbGVhckRyYWZ0KGUsdCxuKSxQcm9taXNlLnJlc29sdmUoRWUuU1VDQ0VTUyl9LHQucHJvdG90eXBlLnB1bGxDb252ZXJzYXRpb25TdGF0dXM9ZnVuY3Rpb24oZSl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciB0LG4saSxyLHMsbyxhLHUsYyxoPXRoaXM7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24obCl7c3dpdGNoKGwubGFiZWwpe2Nhc2UgMDpyZXR1cm4gbj0odD10aGlzKS5fY2hhbm5lbCxpPXQuY3VycmVudFVzZXJJZCxuPyhyPW4uY29kZWMuZW5jb2RlR2V0Q29udmVyc2F0aW9uU3RhdHVzKGUpLHM9bmV3IE9yKGJyW2JyLnB1bGxTZUF0dHNdLHIsaSksWzQsbi5zZW5kKHMsQm4pXSk6WzMsMl07Y2FzZSAxOnJldHVybiBvPWwuc2VudCgpLGE9by5jb2RlLHU9by5kYXRhLGEhPT1FZS5TVUNDRVNTP1syLHtjb2RlOmF9XTooYz1bXSxBcnJheS5pc0FycmF5KHUpJiZ1LmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0PWUuY29udmVyc2F0aW9uVHlwZSxuPWUudGFyZ2V0SWQsaT1lLm5vdGlmaWNhdGlvblN0YXR1cyxyPWUuY2hhbm5lbElkLHM9ZS5pc1RvcCxvPWguX3VsdHJhR3JvdXBNYXBbcitcIl9cIituXTt0PT09ai5VTFRSQV9HUk9VUD9vJiYodm9pZCAwIT09aSYmKG8ubm90aWZpY2F0aW9uU3RhdHVzPWkpLFwiYm9vbGVhblwiPT10eXBlb2YgcyYmKG8uaXNUb3A9cykpOmMucHVzaChlKX0pKSxbMix7Y29kZTphLGRhdGE6Y31dKTtjYXNlIDI6cmV0dXJuWzIse2NvZGU6RWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRH1dfX0pKX0pKX0sdC5wcm90b3R5cGUuYmF0Y2hTZXRDb252ZXJzYXRpb25TdGF0dXM9ZnVuY3Rpb24oZSl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciB0LG4saSxyLHMsbyxhLHUsYyxoLGwsZD10aGlzO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGYpe3N3aXRjaChmLmxhYmVsKXtjYXNlIDA6cmV0dXJuIG49KHQ9dGhpcykuY3VycmVudFVzZXJJZCwoaT10Ll9jaGFubmVsKT8ocj1pLmNvZGVjLmVuY29kZVNldENvbnZlcnNhdGlvblN0YXR1cyhlKSxzPW5ldyBPcihaaSxyLG4pLFs0LGkuc2VuZChzLEtuKV0pOlszLDJdO2Nhc2UgMTpyZXR1cm4gbz1mLnNlbnQoKSxhPW8uY29kZSx1PW8uZGF0YSxhPT09RWUuU1VDQ0VTUz8oYz11LGg9W10sZS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgdD1lLmNvbnZlcnNhdGlvblR5cGUsbj1lLnRhcmdldElkLGk9ZS5ub3RpZmljYXRpb25TdGF0dXMscj1lLmNoYW5uZWxJZCxzPWUuaXNUb3A7aWYodD09PWouVUxUUkFfR1JPVVApe3ZhciBvPWQuX3VsdHJhR3JvdXBNYXBbcitcIl9cIituXTtvJiYodm9pZCAwIT09aSYmKG8ubm90aWZpY2F0aW9uU3RhdHVzPWkpLHZvaWQgMCE9PXMmJihvLmlzVG9wPXMpLGgucHVzaChvKSl9ZWxzZSBkLl9jb252ZXJzYXRpb25NYW5hZ2VyLmFkZFN0YXR1cyhPKE8oe30sZSkse3VwZGF0ZWRUaW1lOmMudmVyc2lvbn0pLCEwKX0pKSxoLmxlbmd0aD4wJiYobD1JdChoKSxsPWdzKGwpLHRoaXMuX3dhdGNoZXIuY29udmVyc2F0aW9uKGwpKSxbMixhXSk6WzIsYV07Y2FzZSAyOnJldHVyblsyLEVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSURdfX0pKX0pKX0sdC5wcm90b3R5cGUuX2pvaW5DaHJtPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIGkscixzLG8sYSx1LGM7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oaCl7c3dpdGNoKGgubGFiZWwpe2Nhc2UgMDpyZXR1cm4oaT10aGlzLl9jaGFubmVsKT8ocj1pLmNvZGVjLmVuY29kZUpvaW5PclF1aXRDaGF0Um9vbSgpLHM9bmV3IE9yKG4/S2k6cWkscixlKSxbNCxpLnNlbmQocyxYdCldKTpbMixFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEXTtjYXNlIDE6cmV0dXJuIG89aC5zZW50KCksYT1vLmNvZGUsdT1vLmRhdGEsYT09PUVlLlNVQ0NFU1MmJihjPXUuam9pblRpbWUsdGhpcy5fY2hybXNRdWV1ZVtlXXx8KHRoaXMuX2Nocm1zUXVldWVbZV09e3B1bGxpbmc6ITEscXVldWU6W10sdGltZXN0YW1wOjB9KSx0aGlzLl9wdWxsQ2hybU1zZyhlLHQsYyksdGhpcy5fbmF2aUluZm8ua3ZTdG9yYWdlJiZ0aGlzLl9jaHJtRW50cnlIYW5kbGVyLnB1bGxFbnRyeShlLDApLHRoaXMuX2pvaW5lZENocm1NYW5hZ2VyLnNldChlLHQpKSxbMixhXX19KSl9KSl9LHQucHJvdG90eXBlLl9yZWpvaW5DaHJtPWZ1bmN0aW9uKCl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBlLHQsbixpLHIscztyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihvKXtzd2l0Y2goby5sYWJlbCl7Y2FzZSAwOmZvcihuIGluIGU9dGhpcy5fam9pbmVkQ2hybU1hbmFnZXIuZ2V0KCksdD1bXSxlKXQucHVzaChuKTtpPTAsby5sYWJlbD0xO2Nhc2UgMTpyZXR1cm4gaTx0Lmxlbmd0aD8ocj10W2ldLFs0LHRoaXMuX2pvaW5DaHJtKHIsZVtyXXx8MTAsITApXSk6WzMsNF07Y2FzZSAyOihzPW8uc2VudCgpKT09PUVlLlNVQ0NFU1M/dGhpcy5fd2F0Y2hlci5jaGF0cm9vbSh7cmVqb2luZWRSb29tOntjaGF0cm9vbUlkOnIsY291bnQ6ZVtyXX19KTp0aGlzLl93YXRjaGVyLmNoYXRyb29tKHtyZWpvaW5lZFJvb206e2NoYXRyb29tSWQ6cixlcnJvckNvZGU6c319KSxvLmxhYmVsPTM7Y2FzZSAzOnJldHVybiBpKyssWzMsMV07Y2FzZSA0OnJldHVyblsyXX19KSl9KSl9LHQucHJvdG90eXBlLl9wdWxsQ2hybU1zZz1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHZvaWQgMD09PXQmJih0PTEwKSx2b2lkIDA9PT1uJiYobj0wKSxNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgaSxyLHMsbyxhLHUsYyxoLGwsZCxmLHA7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oZyl7c3dpdGNoKGcubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5fY2hhbm5lbD8oaT10aGlzLl9jaHJtc1F1ZXVlW2VdLHI9aS5wdWxsaW5nLHM9aS50aW1lc3RhbXAscj9bMl06KGkucHVsbGluZz0hMCxvPXRoaXMuX2NoYW5uZWwuY29kZWMuZW5jb2RlQ2hybVN5bmNNc2cocyx0KSxhPW5ldyBPcihicltici5jaHJtUHVsbF0sbyxlKSxbNCx0aGlzLl9jaGFubmVsLnNlbmQoYSxQdCx7Y29ubmVjdGVkVGltZTp0aGlzLl9jaGFubmVsLmNvbm5lY3RlZFRpbWUsY3VycmVudFVzZXJJZDp0aGlzLmN1cnJlbnRVc2VySWR9KV0pKTpbMl07Y2FzZSAxOnJldHVybiB1PWcuc2VudCgpLGM9dS5jb2RlLGg9dS5kYXRhLGkucHVsbGluZz0hMSxjPT09RWUuU1VDQ0VTUyYmaD8obD1oLmxpc3QsZD1oLnN5bmNUaW1lLGY9aC5maW5pc2hlZCxpLnRpbWVzdGFtcD1uP01hdGgubWF4KGQsbik6ZCxpLnF1ZXVlPWkucXVldWUuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4gZT5kfSkpLHA9W10sbC5mb3JFYWNoKChmdW5jdGlvbihlKXtlLnNlbnRUaW1lPHN8fHAucHVzaChlKX0pKSx0aGlzLl93YXRjaGVyLmJhdGNoTWVzc2FnZShwKSwoIWZ8fGkucXVldWUubGVuZ3RoPjApJiZ0aGlzLl9wdWxsQ2hybU1zZyhlKSxbMl0pOihnZS53YXJuKFwicHVsbCBjaGF0cm9vbSBtc2cgZmFpbGVkLCBjb2RlOlwiLGMsXCIsIGRhdGE6XCIsaCksWzJdKX19KSl9KSl9LHQucHJvdG90eXBlLmpvaW5DaGF0cm9vbT1mdW5jdGlvbihlLHQpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihuKXtyZXR1cm5bMix0aGlzLl9qb2luQ2hybShlLHQsITEpXX0pKX0pKX0sdC5wcm90b3R5cGUuam9pbkV4aXN0Q2hhdHJvb209ZnVuY3Rpb24oZSx0KXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24obil7cmV0dXJuWzIsdGhpcy5fam9pbkNocm0oZSx0LCEwKV19KSl9KSl9LHQucHJvdG90eXBlLnF1aXRDaGF0cm9vbT1mdW5jdGlvbihlKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHQsbixpLHIscztyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihvKXtzd2l0Y2goby5sYWJlbCl7Y2FzZSAwOnJldHVybih0PXRoaXMuX2NoYW5uZWwpPyhuPXQuY29kZWMuZW5jb2RlSm9pbk9yUXVpdENoYXRSb29tKCksaT1uZXcgT3IoSGksbixlKSxbNCx0LnNlbmQoaSldKTpbMixFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEXTtjYXNlIDE6cmV0dXJuIHI9by5zZW50KCksKHM9ci5jb2RlKT09PUVlLlNVQ0NFU1MmJihkZWxldGUgdGhpcy5fY2hybXNRdWV1ZVtlXSx0aGlzLl9jaHJtRW50cnlIYW5kbGVyLnJlc2V0KGUpLHRoaXMuX2pvaW5lZENocm1NYW5hZ2VyLnJlbW92ZShlKSksWzIsc119fSkpfSkpfSx0LnByb3RvdHlwZS5nZXRDaGF0cm9vbUluZm89ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgaSxyLHMsbyxhLHU7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oYyl7c3dpdGNoKGMubGFiZWwpe2Nhc2UgMDpyZXR1cm4oaT10aGlzLl9jaGFubmVsKT8ocj1pLmNvZGVjLmVuY29kZUdldENoYXRSb29tSW5mbyh0LG4pLHM9bmV3IE9yKGJyW2JyLnF1ZXJ5Q2hybUldLHIsZSksWzQsaS5zZW5kKHMsZW4pXSk6WzIse2NvZGU6RWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRH1dO2Nhc2UgMTpyZXR1cm4gbz1jLnNlbnQoKSxhPW8uY29kZSx1PW8uZGF0YSxhIT09RWUuU1VDQ0VTUz9bMix7Y29kZTphfV06WzIse2NvZGU6YSxkYXRhOnV9XX19KSl9KSl9LHQucHJvdG90eXBlLmdldENoYXRyb29tSGlzdG9yeU1lc3NhZ2VzPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgcixzLG8sYSx1LGM7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oaCl7c3dpdGNoKGgubGFiZWwpe2Nhc2UgMDpyZXR1cm4ocj10aGlzLl9jaGFubmVsKT8ocz1yLmNvZGVjLmVuY29kZUdldEhpc3RvcnlNc2coZSx7dGltZXN0YW1wOnQsY291bnQ6bixvcmRlcjppfSksbz1uZXcgT3IodHIscyxlKSxbNCxyLnNlbmQobyxGdCx7Y29udmVyc2F0aW9uOnt0YXJnZXRJZDplfX0pXSk6WzIse2NvZGU6RWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRH1dO2Nhc2UgMTpyZXR1cm4gYT1oLnNlbnQoKSx1PWEuY29kZSxjPWEuZGF0YSx1IT09RWUuU1VDQ0VTUz9bMix7Y29kZTp1fV06WzIse2NvZGU6dSxkYXRhOntsaXN0OmMubGlzdCxoYXNNb3JlOmMuaGFzTW9yZX19XX19KSl9KSl9LHQucHJvdG90eXBlLl9tb2RpZnlDaGF0cm9vbUtWPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBuLGkscixzLG8sYSx1LGMsaDtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihsKXtzd2l0Y2gobC5sYWJlbCl7Y2FzZSAwOnJldHVybiBpPShuPXRoaXMpLl9jaGFubmVsLHI9bi5jdXJyZW50VXNlcklkLGk/KHM9dGhpcy5fY2hybUVudHJ5SGFuZGxlci5nZXRWZXJzaW9uKGUsdC5rZXkpLHQudmVyc2lvbj1udWxsPT1zP3RoaXMuZ2V0U2VydmVyVGltZSgpOnMsbz1pLmNvZGVjLmVuY29kZU1vZGlmeUNoYXRSb29tS1YoZSx0LHIpLGE9dC50eXBlPT09TGUuVVBEQVRFP1lpOmppLHU9bmV3IE9yKGEsbyxlKSxbNCxpLnNlbmQodSxYdCldKTpbMixFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEXTtjYXNlIDE6cmV0dXJuIGM9bC5zZW50KCksKGg9Yy5jb2RlKT09PUVlLlNVQ0NFU1M/KHRoaXMuX2Nocm1FbnRyeUhhbmRsZXIuc2V0TG9jYWwoZSx7a3ZFbnRyaWVzOlt0XSxzeW5jVGltZToobmV3IERhdGUpLmdldFRpbWUoKX0sciksWzIsaF0pOlsyLGhdfX0pKX0pKX0sdC5wcm90b3R5cGUuX21vZGlmeUNoYXRyb29tS1ZTPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBuLGkscixzLG8sYSx1LGMsaCxsLGQsZixwPXRoaXM7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oZyl7c3dpdGNoKGcubGFiZWwpe2Nhc2UgMDpyZXR1cm4gaT0obj10aGlzKS5fY2hhbm5lbCxyPW4uY3VycmVudFVzZXJJZCxpPyh0LmVudHJpZXMuZm9yRWFjaCgoZnVuY3Rpb24odCl7dmFyIG49cC5fY2hybUVudHJ5SGFuZGxlci5nZXRWZXJzaW9uKGUsdC5rZXkpO3QudmVyc2lvbj1udWxsPT1uP3AuZ2V0U2VydmVyVGltZSgpOm59KSkscz1pLmNvZGVjLmVuY29kZU1vZGlmeUNoYXRSb29tS1ZTKGUsdCxyKSxvPXQudHlwZT09PUxlLlVQREFURT9RaTpXaSxhPW5ldyBPcihvLHMsZSksWzQsaS5zZW5kKGEsd24pXSk6WzIse2NvZGU6RWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRH1dO2Nhc2UgMTpyZXR1cm4gdT1nLnNlbnQoKSxjPXUuY29kZSwtMSE9PVtFZS5TVUNDRVNTLEVlLkNIQVRST09NX0tWX1NUT1JFX05PVF9BTExfU1VDQ0VTU10uaW5kZXhPZihjKSYmKGw9W10sZGVsZXRlKGQ9T2JqZWN0LmFzc2lnbih7fSx0KSkuZW50cmllcyx0LmVudHJpZXMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7bC5wdXNoKE9iamVjdC5hc3NpZ24oe30sZSxkKSl9KSksYz09PUVlLkNIQVRST09NX0tWX1NUT1JFX05PVF9BTExfU1VDQ0VTUyYmKGY9dS5kYXRhLGdlLndhcm4oXCLorr7nva7lpLHotKXnmoTlsZ7mgKfvvJpcIixmLmVycm9yS2V5cyksaD1mLmVycm9yS2V5cyxmJiZBcnJheS5pc0FycmF5KGYuZXJyb3JLZXlzKSYmZi5lcnJvcktleXMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHQ9bC5maW5kSW5kZXgoKGZ1bmN0aW9uKHQpe3JldHVybiBlLmtleT09PXQua2V5fSkpOy0xIT09dCYmbC5zcGxpY2UodCwxKX0pKSksZ2Uud2FybihcIuiuvue9ruaIkOWKn+eahOWxnuaAp++8mlwiLGwpLHRoaXMuX2Nocm1FbnRyeUhhbmRsZXIuc2V0TG9jYWwoZSx7a3ZFbnRyaWVzOmwsc3luY1RpbWU6KG5ldyBEYXRlKS5nZXRUaW1lKCl9LHIpKSxbMix7Y29kZTpjLGRhdGE6aH1dfX0pKX0pKX0sdC5wcm90b3R5cGUuc2V0Q2hhdHJvb21FbnRyeT1mdW5jdGlvbihlLHQpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihuKXtyZXR1cm4gdC50eXBlPUxlLlVQREFURSx0LnVzZXJJZD10LnVzZXJJZHx8dGhpcy5jdXJyZW50VXNlcklkLFsyLHRoaXMuX21vZGlmeUNoYXRyb29tS1YoZSx0KV19KSl9KSl9LHQucHJvdG90eXBlLnNldENoYXRyb29tRW50cmllcz1mdW5jdGlvbihlLHQpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihuKXtyZXR1cm4gdC50eXBlPUxlLlVQREFURSx0LnVzZXJJZD10LnVzZXJJZHx8dGhpcy5jdXJyZW50VXNlcklkLFsyLHRoaXMuX21vZGlmeUNoYXRyb29tS1ZTKGUsdCldfSkpfSkpfSx0LnByb3RvdHlwZS5mb3JjZVNldENoYXRyb29tRW50cnk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24obil7cmV0dXJuIHQudHlwZT1MZS5VUERBVEUsdC5pc092ZXJ3cml0ZT0hMCx0LnVzZXJJZD10LnVzZXJJZHx8dGhpcy5jdXJyZW50VXNlcklkLFsyLHRoaXMuX21vZGlmeUNoYXRyb29tS1YoZSx0KV19KSl9KSl9LHQucHJvdG90eXBlLnJlbW92ZUNoYXRyb29tRW50cnk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24obil7cmV0dXJuIHQudHlwZT1MZS5ERUxFVEUsdC51c2VySWQ9dC51c2VySWR8fHRoaXMuY3VycmVudFVzZXJJZCxbMix0aGlzLl9tb2RpZnlDaGF0cm9vbUtWKGUsdCldfSkpfSkpfSx0LnByb3RvdHlwZS5yZW1vdmVDaGF0cm9vbUVudHJpZXM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24obil7cmV0dXJuIHQudHlwZT1MZS5ERUxFVEUsdC51c2VySWQ9dC51c2VySWR8fHRoaXMuY3VycmVudFVzZXJJZCxbMix0aGlzLl9tb2RpZnlDaGF0cm9vbUtWUyhlLHQpXX0pKX0pKX0sdC5wcm90b3R5cGUuZm9yY2VSZW1vdmVDaGF0cm9vbUVudHJ5PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKG4pe3JldHVybiB0LnR5cGU9TGUuREVMRVRFLHQuaXNPdmVyd3JpdGU9ITAsdC51c2VySWQ9dC51c2VySWR8fHRoaXMuY3VycmVudFVzZXJJZCxbMix0aGlzLl9tb2RpZnlDaGF0cm9vbUtWKGUsdCldfSkpfSkpfSx0LnByb3RvdHlwZS5nZXRDaGF0cm9vbUVudHJ5PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBuLGkscixzLG8sYSx1O3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGMpe3N3aXRjaChjLmxhYmVsKXtjYXNlIDA6cmV0dXJuKG49dGhpcy5fY2hybUVudHJ5SGFuZGxlci5nZXRWYWx1ZShlLHQpKT9bMixQcm9taXNlLnJlc29sdmUoe2NvZGU6RWUuU1VDQ0VTUyxkYXRhOm59KV06WzMsMV07Y2FzZSAxOnJldHVybihpPXRoaXMuX2NoYW5uZWwpPyhyPWkuY29kZWMuZW5jb2RlUHVsbENoYXRSb29tS1YoMCkscz1uZXcgT3IoYnJbYnIucHVsbEtWXSxyLGUpLFs0LGkuc2VuZChzLE1uKV0pOlsyLFByb21pc2UucmVqZWN0KHtjb2RlOkVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSUR9KV07Y2FzZSAyOnJldHVybiBvPWMuc2VudCgpLChhPW8uZGF0YXx8e30pJiZhLmt2RW50cmllcyYmYS5rdkVudHJpZXMubGVuZ3RoJiZ2b2lkIDAhPT0odT1hLmt2RW50cmllcy5maW5kKChmdW5jdGlvbihlKXtyZXR1cm4gZS5rZXk9PT10fSkpKT9bMixQcm9taXNlLnJlc29sdmUoe2NvZGU6RWUuU1VDQ0VTUyxkYXRhOm51bGw9PXU/dm9pZCAwOnUudmFsdWV9KV06WzIsUHJvbWlzZS5yZXNvbHZlKHtjb2RlOkVlLkNIQVRST09NX0tFWV9OT1RfRVhJU1R9KV19fSkpfSkpfSx0LnByb3RvdHlwZS5nZXRBbGxDaGF0cm9vbUVudHJ5PWZ1bmN0aW9uKGUpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgdCxuLGkscixzLG8sYTtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbih1KXtzd2l0Y2godS5sYWJlbCl7Y2FzZSAwOnJldHVybih0PXRoaXMuX2Nocm1FbnRyeUhhbmRsZXIuZ2V0QWxsKGUpKSYmT2JqZWN0LmtleXModCkubGVuZ3RoP1syLFByb21pc2UucmVzb2x2ZSh7Y29kZTpFZS5TVUNDRVNTLGRhdGE6dH0pXTpbMywxXTtjYXNlIDE6cmV0dXJuKG49dGhpcy5fY2hhbm5lbCk/KGk9e30scj1uLmNvZGVjLmVuY29kZVB1bGxDaGF0Um9vbUtWKDApLHM9bmV3IE9yKGJyW2JyLnB1bGxLVl0scixlKSxbNCxuLnNlbmQocyxNbildKTpbMixQcm9taXNlLnJlamVjdCh7Y29kZTpFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEfSldO2Nhc2UgMjpyZXR1cm4gbz11LnNlbnQoKSwoYT1vLmRhdGF8fHt9KSYmYS5rdkVudHJpZXMmJmEua3ZFbnRyaWVzLmxlbmd0aCYmYS5rdkVudHJpZXMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZS5rZXkmJihpW2Uua2V5XT1lLnZhbHVlfHxcIlwiKX0pKSxbMixQcm9taXNlLnJlc29sdmUoe2NvZGU6RWUuU1VDQ0VTUyxkYXRhOml9KV19fSkpfSkpfSx0LnByb3RvdHlwZS5wdWxsQ2hhdHJvb21FbnRyeT1mdW5jdGlvbihlLHQpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbixpLHIscyxvLGEsdSxjLGgsbCxkLGY7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24ocCl7c3dpdGNoKHAubGFiZWwpe2Nhc2UgMDpyZXR1cm4gaT0obj10aGlzKS5fY2hhbm5lbCxyPW4uY3VycmVudFVzZXJJZCxpPyh0fHwodD10aGlzLl9wdWxsQ2hhdHJvb21FbnRyeVRpbWVzdGFtcCkscz1pLmNvZGVjLmVuY29kZVB1bGxDaGF0Um9vbUtWKHQpLG89bmV3IE9yKGJyW2JyLnB1bGxLVl0scyxlKSxbNCxpLnNlbmQobyxNbildKTpbMix7Y29kZTpFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEfV07Y2FzZSAxOnJldHVybiBhPXAuc2VudCgpLHU9YS5jb2RlLGM9YS5kYXRhLHU9PT1FZS5TVUNDRVNTPyhnZS5pbmZvKFwiUHVsbCBzdWNjZXNzIENocm1LViwgXCIrSlNPTi5zdHJpbmdpZnkoYSkpLHRoaXMuX2Nocm1FbnRyeUhhbmRsZXIuc2V0TG9jYWwoZSxjLHIpLGdlLmluZm8oXCJTYXZlIGludG8gY2FjaGUgc3VjY2VzcyFcIiksbD0oaD1jKS5rdkVudHJpZXMsZD1oLnN5bmNUaW1lLHRoaXMuX3B1bGxDaGF0cm9vbUVudHJ5VGltZXN0YW1wPWR8fDAsZj1bXSxsLmxlbmd0aD4wJiYobC5mb3JFYWNoKChmdW5jdGlvbih0KXt2YXIgbj10LmtleSxpPXQudmFsdWUscj10LnR5cGUscz10LnRpbWVzdGFtcDtmLnB1c2goe2tleTpuLHZhbHVlOmksdHlwZTpyLHRpbWVzdGFtcDpzLGNoYXRyb29tSWQ6ZX0pfSkpLHRoaXMuX3dhdGNoZXIuY2hhdHJvb20oe3VwZGF0ZWRFbnRyaWVzOmZ9KSksWzIse2NvZGU6dSxkYXRhOmN9XSk6WzIse2NvZGU6dX1dfX0pKX0pKX0sdC5wcm90b3R5cGUuc2VuZE1lc3NhZ2U9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgaSxyLHMsbyxhLHUsYyxoLGwsZDtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihmKXtzd2l0Y2goZi5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9jaGFubmVsPyhuPWZ1bmN0aW9uKGUsdCl7cmV0dXJuXCJSQzpTUlNNc2dcIj09PWUubWVzc2FnZVR5cGUmJk9iamVjdC5hc3NpZ24oZSx7ZGlyZWN0aW9uYWxVc2VySWRMaXN0Olt0XX0pLGV9KG4sdGhpcy5jdXJyZW50VXNlcklkKSxuPXRoaXMuX2hhbmRsZU1zZ1Byb3BlcnRpZXMobiwhMCksaT0hIVtqLlBSSVZBVEUsai5HUk9VUF0uaW5jbHVkZXMoZSkmJm4uaXNTdGF0dXNNZXNzYWdlLHI9aT9mdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4odD17fSx0W2ouUFJJVkFURV09YnIucHBNc2dTLHRbai5HUk9VUF09YnIucGdNc2dTLHQpW2VdfShlKTpmdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4odD17fSx0W2ouUFJJVkFURV09YnIucHBNc2dQLHRbai5HUk9VUF09YnIucGdNc2dQLHRbai5DSEFUUk9PTV09YnIuY2hhdE1zZyx0W2ouQ1VTVE9NRVJfU0VSVklDRV09YnIucGNNc2dQLHRbai5SVENfUk9PTV09YnIucHJNc2dTLHQpW2VdfShlKXx8YnIucHBNc2dQLGkmJihuLmlzUGVyc2l0ZWQ9ITEsbi5pc0NvdW50ZWQ9ITEpLHM9dGhpcy5fY2hhbm5lbC5jb2RlYy5lbmNvZGVVcE1zZyh7Y29udmVyc2F0aW9uVHlwZTplLHRhcmdldElkOnR9LG4pLChvPW5ldyBScihicltyXSxzLHQpKS5zZXRIZWFkZXJRb3MoemUuQVRfTEVBU1RfT05DRSksaT8odGhpcy5fY2hhbm5lbC5zZW5kT25seShvKSxbMix7Y29kZTpFZS5TVUNDRVNTLGRhdGE6cHMoZSx0LE8oe30sbiksXCJcIiwwLHRoaXMuY3VycmVudFVzZXJJZCl9XSk6KGE9RGF0ZS5ub3coKS10aGlzLl9sb2NhbENvbm5lY3RlZFRpbWUrdGhpcy5fY29ubmVjdGVkVGltZSx1PXBzKGUsdCxPKHt9LG4pLFwiXCIsYSx0aGlzLmN1cnJlbnRVc2VySWQpLFs0LHRoaXMuX2NoYW5uZWwuc2VuZChvKV0pKTpbMix7Y29kZTpFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEfV07Y2FzZSAxOnJldHVybiBjPWYuc2VudCgpLGg9Yy5jb2RlLGw9Yy5kYXRhLGghPT1FZS5TVUNDRVNTP1syLHtjb2RlOmgsZGF0YTp1fV06KGQ9bCx0aGlzLl9zZW5kTWVzc2FnZVN0b3JlLnNldE1lc3NhZ2UoZC5tZXNzYWdlVUlkLGQudGltZXN0YW1wKSx1LnNlbnRUaW1lPWQudGltZXN0YW1wLHUubWVzc2FnZVVJZD1kLm1lc3NhZ2VVSWQsdGhpcy5fY29udmVyc2F0aW9uTWFuYWdlci5zZXRDb252ZXJzYXRpb25DYWNoZUJ5TWVzc2FnZSh1LCEwKSxbMix7Y29kZTpFZS5TVUNDRVNTLGRhdGE6dX1dKX19KSl9KSl9LHQucHJvdG90eXBlLnJlY2FsbE1zZz1mdW5jdGlvbihlLHQsbixpLHIpe3ZhciBzO3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbyxhLHUsYyxoLGwsZCxmLHAsZztyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihfKXtzd2l0Y2goXy5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9jaGFubmVsPyhvPXIudXNlcixhPXtjb250ZW50Ontjb252ZXJzYXRpb25UeXBlOmUsdGFyZ2V0SWQ6dCxtZXNzYWdlVUlkOm4sc2VudFRpbWU6aSx1c2VyOm99LG1lc3NhZ2VUeXBlOlwiUkM6UmNDbWRcIixkaXNhYmxlTm90aWZpY2F0aW9uOm51bGw9PXI/dm9pZCAwOnIuZGlzYWJsZU5vdGlmaWNhdGlvbixwdXNoQ29uZmlnOm51bGw9PXI/dm9pZCAwOnIucHVzaENvbmZpZyxwdXNoQ29udGVudDoobnVsbD09PShzPXIucHVzaENvbmZpZyl8fHZvaWQgMD09PXM/dm9pZCAwOnMucHVzaENvbnRlbnQpfHxyLnB1c2hDb250ZW50fHxcIlwiLGNoYW5uZWxJZDpyLmNoYW5uZWxJZH0sdT1icltici5yZWNhbGxNc2ddLGM9dGhpcy5fY2hhbm5lbC5jb2RlYy5lbmNvZGVVcE1zZyh7Y29udmVyc2F0aW9uVHlwZTplLHRhcmdldElkOnR9LGEpLChoPW5ldyBScih1LGMsdGhpcy5jdXJyZW50VXNlcklkKSkuc2V0SGVhZGVyUW9zKHplLkFUX0xFQVNUX09OQ0UpLFs0LHRoaXMuX2NoYW5uZWwuc2VuZChoKV0pOlsyLHtjb2RlOkVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSUR9XTtjYXNlIDE6cmV0dXJuIGw9Xy5zZW50KCksZD1sLmNvZGUsZj1sLmRhdGEsZCE9PUVlLlNVQ0NFU1M/WzIse2NvZGU6ZH1dOihwPWYsZT09PWouVUxUUkFfR1JPVVA/KHRoaXMuX3VsdHJhTXNnTWFwW3AubWVzc2FnZVVJZF09cC50aW1lc3RhbXAsWzIse2NvZGU6RWUuU1VDQ0VTU31dKToodGhpcy5fc2VuZE1lc3NhZ2VTdG9yZS5zZXRNZXNzYWdlKHAubWVzc2FnZVVJZCxwLnRpbWVzdGFtcCksZz1wcyhlLHQsTyhPKHt9LGEpLHtpc1BlcnNpdGVkOiEwfSkscC5tZXNzYWdlVUlkLHAudGltZXN0YW1wLHRoaXMuY3VycmVudFVzZXJJZCksdGhpcy5fY29udmVyc2F0aW9uTWFuYWdlci5zZXRDb252ZXJzYXRpb25DYWNoZUJ5TWVzc2FnZShnLCEwKSxbMix7Y29kZTpFZS5TVUNDRVNTLGRhdGE6Z31dKSl9fSkpfSkpfSx0LnByb3RvdHlwZS5zZW5kUmVhZFJlY2VpcHRNZXNzYWdlPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIGkscjtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihzKXtzd2l0Y2gocy5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9jaGFubmVsPyhpPXRoaXMuX2NoYW5uZWwuY29kZWMuZW5jb2RlUmVhZFJlY2VpcHQodCxuKSxyPW5ldyBPcihicltici5yck1zZ10saSxlKSxbNCx0aGlzLl9jaGFubmVsLnNlbmQocildKTpbMix7Y29kZTpFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEfV07Y2FzZSAxOnJldHVyblsyLHMuc2VudCgpXX19KSl9KSl9LHQucHJvdG90eXBlLmdldE1lc3NhZ2VSZWFkZXI9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgaSxyO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKHMpe3N3aXRjaChzLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuX2NoYW5uZWw/KGk9dGhpcy5fY2hhbm5lbC5jb2RlYy5lbmNvZGVNZXNzYWdlUmVhZGVyKHQsbikscj1uZXcgT3IoYnJbYnIucnJMaXN0XSxpLGUpLFs0LHRoaXMuX2NoYW5uZWwuc2VuZChyLGpuKV0pOlsyLHtjb2RlOkVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSUR9XTtjYXNlIDE6cmV0dXJuWzIscy5zZW50KCldfX0pKX0pKX0sdC5wcm90b3R5cGUucHVsbFVzZXJTZXR0aW5ncz1mdW5jdGlvbihlKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHQsbjtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihpKXtyZXR1cm4gdGhpcy5fY2hhbm5lbD8odD10aGlzLl9jaGFubmVsLmNvZGVjLmVuY29kZVB1bGxVc2VyU2V0dGluZyhlKSxuPW5ldyBPcihicltici5wdWxsVVNdLHQsdGhpcy5jdXJyZW50VXNlcklkKSxbMix0aGlzLl9jaGFubmVsLnNlbmQobixWbildKTpbMix7Y29kZTpFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEfV19KSl9KSl9LHQucHJvdG90eXBlLmdldEZpbGVUb2tlbj1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHIscyxvLGEsdSxjO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGgpe3N3aXRjaChoLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuX2NoYW5uZWw/KHI9aSYmXCJ1cGxvYWRzXCIhPT1pP3R8fFwiXCI6b3QoZSx0KSxzPXRoaXMuX2NoYW5uZWwuY29kZWMuZW5jb2RlR2V0RmlsZVRva2VuKGUscixufHxcIlwiLGl8fFwiXCIpLG89bmV3IE9yKGJyW2JyLnFuVGtuXSxzLHRoaXMuY3VycmVudFVzZXJJZCksWzQsdGhpcy5fY2hhbm5lbC5zZW5kKG8sdm4pXSk6WzIse2NvZGU6RWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRH1dO2Nhc2UgMTpyZXR1cm4gYT1oLnNlbnQoKSx1PWEuY29kZSxjPWEuZGF0YSxjPU9iamVjdC5hc3NpZ24oYyx7ZmlsZU5hbWU6cn0pLHU9PT1FZS5TVUNDRVNTP1syLHtjb2RlOnUsZGF0YTpjfV06WzIse2NvZGU6dX1dfX0pKX0pKX0sdC5wcm90b3R5cGUuZ2V0RmlsZVVybD1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHIscyxvLGEsdSxjLGgsbCxkO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGYpe3N3aXRjaChmLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuX2NoYW5uZWw/KHI9XCJcIixzPVwiXCIsbz1cIlwiLHQ9PT1VZS5RSU5JVT8ocz1FbixvPUluKToocz1UbixvPUNuKSxyPXQ9PT1VZS5RSU5JVT9icltici5xblVybF06dD09PVVlLkFXUz9icltici5zM1VybF06dD09PVVlLlNUQz9icltici5zdGNVcmxdOmJyW2JyLmFsaVVybF0sYT10aGlzLl9jaGFubmVsLmNvZGVjLmVuY29kZUdldEZpbGVVcmwocyxlLG4saSksdT1uZXcgT3IocixhLHRoaXMuY3VycmVudFVzZXJJZCksWzQsdGhpcy5fY2hhbm5lbC5zZW5kKHUsbyldKTpbMix7Y29kZTpFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEfV07Y2FzZSAxOnJldHVybiBjPWYuc2VudCgpLGg9Yy5jb2RlLGw9Yy5kYXRhLGQ9bCxoPT09RWUuU1VDQ0VTUz9bMix7Y29kZTpoLGRhdGE6ZH1dOlsyLHtjb2RlOmh9XX19KSl9KSl9LHQucHJvdG90eXBlLmRpc2Nvbm5lY3Q9ZnVuY3Rpb24oKXstMSE9PXRoaXMuX3JlY29ubmVjdFRpbWVyJiYoY2xlYXJUaW1lb3V0KHRoaXMuX3JlY29ubmVjdFRpbWVyKSx0aGlzLl9yZWNvbm5lY3RUaW1lcj0tMSksdGhpcy5fY2hhbm5lbCYmKHRoaXMuX2NoYW5uZWwuY2xvc2UoKSx0aGlzLl9jaGFubmVsPXZvaWQgMCksdGhpcy5fcHVsbFF1ZXVlLmxlbmd0aD0wLHRoaXMuX3N0b3BTeW5jSW50ZXJ2YWwoKSx0aGlzLl9zdG9wVWx0cmFTeW5jSW50ZXJ2YWwoKX0sdC5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcihcIkpTRW5naW5lJ3MgbWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIil9LHQucHJvdG90eXBlLnJlZ2lzdGVyTWVzc2FnZVR5cGU9ZnVuY3Rpb24oZSx0LG4saSxyKXt0aGlzLl9jdXN0b21NZXNzYWdlVHlwZVtlXT17aXNQZXJzaXRlZDp0LGlzQ291bnRlZDpuLGlzU3RhdHVzTWVzc2FnZTpyfX0sdC5wcm90b3R5cGUuZ2V0U2VydmVyVGltZT1mdW5jdGlvbigpe3JldHVybiBEYXRlLm5vdygpLXRoaXMuX2xvY2FsQ29ubmVjdGVkVGltZSt0aGlzLl9jb25uZWN0ZWRUaW1lfSx0LnByb3RvdHlwZS5nZXRDdXJyZW50VXNlcklkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY3VycmVudFVzZXJJZH0sdC5wcm90b3R5cGUuY3JlYXRlVGFnPWZ1bmN0aW9uKGUpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgdCxuLGkscixzLG8sYTtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbih1KXtzd2l0Y2godS5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9jaGFubmVsPyh0PXRoaXMuX3VzZXJTZXR0aW5nTWFuYWdlci5nZXRWZXJzaW9uKCksbj10aGlzLl9jaGFubmVsLmNvZGVjLmVuY29kZUNyZWF0ZVRhZyhbZV0sdCksaT1uZXcgT3IoYnJbYnIuYWRkU2VUYWddLG4sdGhpcy5jdXJyZW50VXNlcklkKSxbNCx0aGlzLl9jaGFubmVsLnNlbmQoaSxQbildKTpbMix7Y29kZTpFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEfV07Y2FzZSAxOnJldHVybiByPXUuc2VudCgpLHM9ci5jb2RlLG89ci5kYXRhLHMhPT1FZS5TVUNDRVNTP1syLHtjb2RlOnN9XTooYT1vLnZlcnNpb24sdGhpcy5fdXNlclNldHRpbmdNYW5hZ2VyLmFkZFRhZyhbTyhPKHt9LGUpLHtjcmVhdGVkVGltZTphfSldLGEpLFsyLHtjb2RlOkVlLlNVQ0NFU1MsZGF0YTpvfV0pfX0pKX0pKX0sdC5wcm90b3R5cGUucmVtb3ZlVGFnPWZ1bmN0aW9uKGUpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgdCxuLGkscixzLG8sYTtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbih1KXtzd2l0Y2godS5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9jaGFubmVsPyh0PXRoaXMuX3VzZXJTZXR0aW5nTWFuYWdlci5nZXRWZXJzaW9uKCksbj10aGlzLl9jaGFubmVsLmNvZGVjLmVuY29kZVJlbW92ZVRhZyhbZV0sdCksaT1uZXcgT3IoYnJbYnIuZGVsU2VUYWddLG4sdGhpcy5jdXJyZW50VXNlcklkKSxbNCx0aGlzLl9jaGFubmVsLnNlbmQoaSxQbildKTpbMix7Y29kZTpFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEfV07Y2FzZSAxOnJldHVybiByPXUuc2VudCgpLHM9ci5jb2RlLG89ci5kYXRhLHMhPT1FZS5TVUNDRVNTP1syLHtjb2RlOnN9XTooYT1vLnZlcnNpb24sdGhpcy5fdXNlclNldHRpbmdNYW5hZ2VyLmRlbGV0ZVRhZyhbZV0sYSksWzIse2NvZGU6RWUuU1VDQ0VTU31dKX19KSl9KSl9LHQucHJvdG90eXBlLnVwZGF0ZVRhZz1mdW5jdGlvbihlKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHQsbixpLHIscyxvLGE7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24odSl7c3dpdGNoKHUubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5fY2hhbm5lbD8odD10aGlzLl91c2VyU2V0dGluZ01hbmFnZXIuZ2V0VmVyc2lvbigpLG49dGhpcy5fY2hhbm5lbC5jb2RlYy5lbmNvZGVDcmVhdGVUYWcoW2VdLHQpLGk9bmV3IE9yKGJyW2JyLmFkZFNlVGFnXSxuLHRoaXMuY3VycmVudFVzZXJJZCksWzQsdGhpcy5fY2hhbm5lbC5zZW5kKGksUG4pXSk6WzIse2NvZGU6RWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRH1dO2Nhc2UgMTpyZXR1cm4gcj11LnNlbnQoKSxzPXIuY29kZSxvPXIuZGF0YSxzIT09RWUuU1VDQ0VTUz9bMix7Y29kZTpzfV06KGE9by52ZXJzaW9uLHRoaXMuX3VzZXJTZXR0aW5nTWFuYWdlci5hZGRUYWcoW2VdLGEpLFsyLHtjb2RlOkVlLlNVQ0NFU1MsZGF0YTpvfV0pfX0pKX0pKX0sdC5wcm90b3R5cGUuZ2V0VGFnTGlzdD1mdW5jdGlvbigpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgZSx0O3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKG4pe3JldHVybiBlPXRoaXMuX3VzZXJTZXR0aW5nTWFuYWdlci5nZXRUYWdzKCksdD10aGlzLl9jb252ZXJzYXRpb25NYW5hZ2VyLmdldENvbnZlcnNhdGlvbkxpc3RGb3JUYWcoKSxlLmZvckVhY2goKGZ1bmN0aW9uKGUpe2UuY29udmVyc2F0aW9uQ291bnQ9dFtlLnRhZ0lkXT90W2UudGFnSWRdLmxlbmd0aDowfSkpLFsyLHtjb2RlOkVlLlNVQ0NFU1MsZGF0YTplfV19KSl9KSl9LHQucHJvdG90eXBlLmFkZFRhZ0ZvckNvbnZlcnNhdGlvbnM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG4saSxyLHMsbz10aGlzO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGEpe3N3aXRjaChhLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuX2NoYW5uZWw/dGhpcy5fdXNlclNldHRpbmdNYW5hZ2VyLmdldFRhZ0J5SWQoZSk/KG49dGhpcy5fY2hhbm5lbC5jb2RlYy5lbmNvZGVVcGRhdGVDb252ZXJzYXRpb25UYWcoW3t0YWdJZDplfV0sdCksaT1uZXcgT3IoYnJbYnIuYWRkVGFnXSxuLHRoaXMuY3VycmVudFVzZXJJZCksWzQsdGhpcy5fY2hhbm5lbC5zZW5kKGkpXSk6WzIse2NvZGU6RWUuVEFHX05PVF9FWElTVH1dOlsyLHtjb2RlOkVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSUR9XTtjYXNlIDE6cmV0dXJuKHI9YS5zZW50KCkuY29kZSkhPT1FZS5TVUNDRVNTP1syLHtjb2RlOnJ9XTooKHM9e30pW2VdPXt9LHQuZm9yRWFjaCgoZnVuY3Rpb24oZSl7by5fY29udmVyc2F0aW9uTWFuYWdlci5hZGRUYWdTdGF0dXMoZS5jb252ZXJzYXRpb25UeXBlLGUudGFyZ2V0SWQscyxlLmNoYW5uZWxJZCl9KSksWzIse2NvZGU6RWUuU1VDQ0VTU31dKX19KSl9KSl9LHQucHJvdG90eXBlLnJlbW92ZVRhZ0ZvckNvbnZlcnNhdGlvbnM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG4saSxyLHM9dGhpcztyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihvKXtzd2l0Y2goby5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9jaGFubmVsPyhuPXRoaXMuX2NoYW5uZWwuY29kZWMuZW5jb2RlVXBkYXRlQ29udmVyc2F0aW9uVGFnKFt7dGFnSWQ6ZX1dLHQpLGk9bmV3IE9yKGJyW2JyLmRlbFRhZ10sbix0aGlzLmN1cnJlbnRVc2VySWQpLFs0LHRoaXMuX2NoYW5uZWwuc2VuZChpKV0pOlsyLHtjb2RlOkVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSUR9XTtjYXNlIDE6cmV0dXJuKHI9by5zZW50KCkuY29kZSkhPT1FZS5TVUNDRVNTP1syLHtjb2RlOnJ9XToodC5mb3JFYWNoKChmdW5jdGlvbih0KXtzLl9jb252ZXJzYXRpb25NYW5hZ2VyLmRlbGV0ZVRhZ1N0YXR1cyh0LmNvbnZlcnNhdGlvblR5cGUsdC50YXJnZXRJZCxbZV0sdC5jaGFubmVsSWQpfSkpLFsyLHtjb2RlOkVlLlNVQ0NFU1N9XSl9fSkpfSkpfSx0LnByb3RvdHlwZS5yZW1vdmVUYWdzRm9yQ29udmVyc2F0aW9uPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBuLGkscixzLG8sYSx1O3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGMpe3N3aXRjaChjLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuX2NoYW5uZWw/KG49ZS5jb252ZXJzYXRpb25UeXBlLGk9ZS50YXJnZXRJZCxyPWUuY2hhbm5lbElkLHM9dC5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybnt0YWdJZDplfX0pKSxvPXRoaXMuX2NoYW5uZWwuY29kZWMuZW5jb2RlVXBkYXRlQ29udmVyc2F0aW9uVGFnKHMsW2VdKSxhPW5ldyBPcihicltici5kZWxUYWddLG8sdGhpcy5jdXJyZW50VXNlcklkKSxbNCx0aGlzLl9jaGFubmVsLnNlbmQoYSldKTpbMix7Y29kZTpFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEfV07Y2FzZSAxOnJldHVybih1PWMuc2VudCgpLmNvZGUpIT09RWUuU1VDQ0VTUz9bMix7Y29kZTp1fV06KHRoaXMuX2NvbnZlcnNhdGlvbk1hbmFnZXIuZGVsZXRlVGFnU3RhdHVzKG4saSx0LHIpLFsyLHtjb2RlOkVlLlNVQ0NFU1N9XSl9fSkpfSkpfSx0LnByb3RvdHlwZS5nZXRDb252ZXJzYXRpb25MaXN0QnlUYWc9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgaSxyLHMsbyxhLHUsYyxoLGw7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oZCl7c3dpdGNoKGQubGFiZWwpe2Nhc2UgMDpyZXR1cm4gcj0oaT10aGlzKS5jdXJyZW50VXNlcklkLChzPWkuX2NoYW5uZWwpPyhvPXMuY29kZWMuZW5jb2RlT2xkQ29udmVyc2F0aW9uTGlzdCh7Y291bnQ6bix0eXBlOmouUFJJVkFURSxzdGFydFRpbWU6dH0pLGE9bmV3IE9yKEppLG8sciksWzQscy5zZW5kKGEsS3Qse2N1cnJlbnRVc2VySWQ6cixjb25uZWN0ZWRUaW1lOnMuY29ubmVjdGVkVGltZX0pXSk6WzIse2NvZGU6RWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRH1dO2Nhc2UgMTpyZXR1cm4gdT1kLnNlbnQoKSxjPXUuY29kZSxoPXUuZGF0YSxsPXRoaXMuX2NvbnZlcnNhdGlvbkhhc1RhZ0ZpbHRlcihlLG51bGw9PWg/dm9pZCAwOmgubGlzdCksZ2UuaW5mbyhcIkdldENvbnZlcnNhdGlvbkxpc3RCeVRhZ1wiLGwpLGMhPT1FZS5TVUNDRVNTP1syLHtjb2RlOmN9XTpbMix7Y29kZTpjLGRhdGE6bH1dfX0pKX0pKX0sdC5wcm90b3R5cGUuX2NvbnZlcnNhdGlvbkhhc1RhZ0ZpbHRlcj1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMsaT1bXSxyPVtdO2Z1bmN0aW9uIHMoZSx0KXtyZXR1cm4gZS5sYXRlc3RNZXNzYWdlJiZ0LmxhdGVzdE1lc3NhZ2U/ZS5sYXRlc3RNZXNzYWdlLnNlbnRUaW1lLXQubGF0ZXN0TWVzc2FnZS5zZW50VGltZTowfXJldHVybiB0LmZvckVhY2goKGZ1bmN0aW9uKHQpe3ZhciBzPXQuY29udmVyc2F0aW9uVHlwZSxvPXQudGFyZ2V0SWQsYT10LmNoYW5uZWxJZCx1PW4uX2NvbnZlcnNhdGlvbk1hbmFnZXIuZ2V0KHMsbyxhKSxjPXUuaGFzTWVudGlvbmVkLGg9dS5tZW50aW9uZWRJbmZvLGw9dS5sYXN0VW5yZWFkVGltZSxkPXUubm90aWZpY2F0aW9uU3RhdHVzLGY9dS5pc1RvcCxwPXUudGFncyxnPXUudW5yZWFkTWVzc2FnZUNvdW50LF89cCYmcFtlXTtpZihfKXt2YXIgeT1PKE8oe30sdCkse2hhc01lbnRpb25lZDpjLG1lbnRpb25lZEluZm86aCxsYXN0VW5yZWFkVGltZTpsLG5vdGlmaWNhdGlvblN0YXR1czpkLGlzVG9wOmYsdW5yZWFkTWVzc2FnZUNvdW50Omd9KTtfLmlzVG9wP2kucHVzaChPKE8oe30seSkse2lzVG9wSW5UYWc6ITB9KSk6ci5wdXNoKE8oTyh7fSx5KSx7aXNUb3BJblRhZzohMX0pKX19KSksQShBKFtdLGkuc29ydChzKSksci5zb3J0KHMpKX0sdC5wcm90b3R5cGUuZ2V0VW5yZWFkQ291bnRCeVRhZz1mdW5jdGlvbihlLHQpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbjtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihpKXtyZXR1cm4gdGhpcy5fY2hhbm5lbD8obj10aGlzLl9jb252ZXJzYXRpb25NYW5hZ2VyLmdldFVucmVhZENvdW50QnlUYWcoZSx0KSxbMix7Y29kZTpFZS5TVUNDRVNTLGRhdGE6bn1dKTpbMix7Y29kZTpFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEfV19KSl9KSl9LHQucHJvdG90eXBlLnNldENvbnZlcnNhdGlvblN0YXR1c0luVGFnPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIGkscixzLG8sYSx1LGMsaCxsLGQ7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oZil7c3dpdGNoKGYubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5fY2hhbm5lbD8oaT10LnRhcmdldElkLHI9dC5jb252ZXJzYXRpb25UeXBlLHM9dC5jaGFubmVsSWQsbz1uLmlzVG9wLGE9W3t0YWdJZDplLGlzVG9wOm99XSwodT10aGlzLl9jb252ZXJzYXRpb25NYW5hZ2VyLmdldChyLGkscykpLnRhZ3MmJk9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKHUudGFncyxlKT8oYz10aGlzLl9jaGFubmVsLmNvZGVjLmVuY29kZVVwZGF0ZUNvbnZlcnNhdGlvblRhZyhhLFt0XSksaD1uZXcgT3IoYnJbYnIuYWRkVGFnXSxjLHRoaXMuY3VycmVudFVzZXJJZCksWzQsdGhpcy5fY2hhbm5lbC5zZW5kKGgpXSk6WzIse2NvZGU6RWUuTk9fVEFHX0lOX0NPTlZFUn1dKTpbMix7Y29kZTpFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEfV07Y2FzZSAxOnJldHVybihsPWYuc2VudCgpLmNvZGUpIT09RWUuU1VDQ0VTUz9bMix7Y29kZTpsfV06KChkPXt9KVtlXT17fSxvJiYoZFtlXS5pc1RvcD0hMCksdGhpcy5fY29udmVyc2F0aW9uTWFuYWdlci5hZGRUYWdTdGF0dXMocixpLGQscyksWzIse2NvZGU6RWUuU1VDQ0VTU31dKX19KSl9KSl9LHQucHJvdG90eXBlLmdldFRhZ3NGb3JDb252ZXJzYXRpb249ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBuLGkscixzO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKG8pe2lmKCF0aGlzLl9jaGFubmVsKXJldHVyblsyLHtjb2RlOkVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSUR9XTtpZihuPXRoaXMuX2NvbnZlcnNhdGlvbk1hbmFnZXIuZ2V0KGUuY29udmVyc2F0aW9uVHlwZSxlLnRhcmdldElkLGUuY2hhbm5lbElkKSxpPXRoaXMuX3VzZXJTZXR0aW5nTWFuYWdlci5nZXRUYWdzSW5mbygpLHI9W10sbi50YWdzKWZvcihzIGluIG4udGFncylyLnB1c2goe3RhZ0lkOnMsdGFnTmFtZTpudWxsPT09KHQ9aVtzXSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQudGFnTmFtZX0pO3JldHVyblsyLHtjb2RlOkVlLlNVQ0NFU1MsZGF0YTpyfV19KSl9KSl9LHQucHJvdG90eXBlLmdldEJsb2NrQ29udmVyc2F0aW9uTGlzdD1mdW5jdGlvbigpe3ZhciBlPXRoaXMuX2NvbnZlcnNhdGlvbk1hbmFnZXIuZ2V0QmxvY2tDb252ZXJzYXRpb25MaXN0KCk7cmV0dXJuIFByb21pc2UucmVzb2x2ZSh7Y29kZTpFZS5TVUNDRVNTLGRhdGE6ZX0pfSx0LnByb3RvdHlwZS5nZXRUb3BDb252ZXJzYXRpb25MaXN0PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fY29udmVyc2F0aW9uTWFuYWdlci5nZXRUb3BDb252ZXJzYXRpb25MaXN0KCk7cmV0dXJuIFByb21pc2UucmVzb2x2ZSh7Y29kZTpFZS5TVUNDRVNTLGRhdGE6ZX0pfSx0LnByb3RvdHlwZS5nZXRVbnJlYWRNZW50aW9uZWRDb3VudD1mdW5jdGlvbihlKXt2YXIgdCxuO3JldHVybiBuPWUuY29udmVyc2F0aW9uVHlwZT09PWouVUxUUkFfR1JPVVA/KG51bGw9PT0odD10aGlzLl91bHRyYUdyb3VwTWFwW2UuY2hhbm5lbElkK1wiX1wiK2UudGFyZ2V0SWRdKXx8dm9pZCAwPT09dD92b2lkIDA6dC51bnJlYWRNZW50aW9uZWRDb3VudCl8fDA6dGhpcy5fY29udmVyc2F0aW9uTWFuYWdlci5nZXRVbnJlYWRNZW50aW9uZWRDb3VudChlLmNoYW5uZWxJZCxlLmNvbnZlcnNhdGlvblR5cGUsZS50YXJnZXRJZCksUHJvbWlzZS5yZXNvbHZlKHtjb2RlOkVlLlNVQ0NFU1MsZGF0YTpufSl9LHQucHJvdG90eXBlLmdldEFsbFVucmVhZE1lbnRpb25lZENvdW50PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fY29udmVyc2F0aW9uTWFuYWdlci5nZXRBbGxVbnJlYWRNZW50aW9uZWRDb3VudCgpO3JldHVybiBQcm9taXNlLnJlc29sdmUoe2NvZGU6RWUuU1VDQ0VTUyxkYXRhOmV9KX0sdC5wcm90b3R5cGUuZ2V0VWx0cmFHcm91cExpc3Q9ZnVuY3Rpb24oKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIGUsdDtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihuKXtyZXR1cm4gdGhpcy5faXNVbHRyYUdyb3VwTGlzdEV4aXN0PyhlPU9iamVjdC52YWx1ZXModGhpcy5fdWx0cmFHcm91cE1hcCksZT1ncyhlKSx0PUl0KGUpLFsyLHtjb2RlOkVlLlNVQ0NFU1MsZGF0YTp0fV0pOlsyLHtjb2RlOkVlLk1FVEhPRF9OT1RfQVZBSUxBQkxFfV19KSl9KSl9LHQucHJvdG90eXBlLmdldEJsb2NrVWx0cmFHcm91cExpc3Q9ZnVuY3Rpb24oKXtpZighdGhpcy5faXNVbHRyYUdyb3VwTGlzdEV4aXN0KXJldHVybiBQcm9taXNlLnJlc29sdmUoe2NvZGU6RWUuTUVUSE9EX05PVF9BVkFJTEFCTEV9KTt2YXIgZT1PYmplY3QudmFsdWVzKHRoaXMuX3VsdHJhR3JvdXBNYXApLHQ9W107cmV0dXJuIGUuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZS5ub3RpZmljYXRpb25TdGF0dXM9PT1PZS5PUEVOJiZ0LnB1c2goe2NvbnZlcnNhdGlvblR5cGU6ai5VTFRSQV9HUk9VUCx0YXJnZXRJZDplLnRhcmdldElkLGNoYW5uZWxJZDplLmNoYW5uZWxJZH0pfSkpLFByb21pc2UucmVzb2x2ZSh7Y29kZTpFZS5TVUNDRVNTLGRhdGE6dH0pfSx0LnByb3RvdHlwZS5nZXRUb3BVbHRyYUdyb3VwTGlzdD1mdW5jdGlvbigpe2lmKCF0aGlzLl9pc1VsdHJhR3JvdXBMaXN0RXhpc3QpcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7Y29kZTpFZS5NRVRIT0RfTk9UX0FWQUlMQUJMRX0pO3ZhciBlPU9iamVjdC52YWx1ZXModGhpcy5fdWx0cmFHcm91cE1hcCksdD1bXTtyZXR1cm4gZS5mb3JFYWNoKChmdW5jdGlvbihlKXshMD09PWUuaXNUb3AmJnQucHVzaCh7Y29udmVyc2F0aW9uVHlwZTpqLlVMVFJBX0dST1VQLHRhcmdldElkOmUudGFyZ2V0SWQsY2hhbm5lbElkOmUuY2hhbm5lbElkfSl9KSksUHJvbWlzZS5yZXNvbHZlKHtjb2RlOkVlLlNVQ0NFU1MsZGF0YTp0fSl9LHQucHJvdG90eXBlLmdldFVsdHJhR3JvdXBVbnJlYWRNZW50aW9uZWRDb3VudEJ5VGFyZ2V0SWQ9ZnVuY3Rpb24oZSl7aWYoIXRoaXMuX2lzVWx0cmFHcm91cExpc3RFeGlzdClyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtjb2RlOkVlLk1FVEhPRF9OT1RfQVZBSUxBQkxFfSk7dmFyIHQ9MDtmb3IodmFyIG4gaW4gdGhpcy5fdWx0cmFHcm91cE1hcCl7bi5tYXRjaCgvXy4qL2cpWzBdLnN1YnN0cmluZygxKT09PWUmJih0Kz10aGlzLl91bHRyYUdyb3VwTWFwW25dLnVucmVhZE1lbnRpb25lZENvdW50KX1yZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtjb2RlOkVlLlNVQ0NFU1MsZGF0YTp0fSl9LHQucHJvdG90eXBlLmNsZWFyVWx0cmFVbnJlYWRjb3VudD1mdW5jdGlvbihlLHQpe3JldHVybiB2b2lkIDA9PT10JiYodD1cIlwiKSxNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbixpLHIscyxvO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGEpe3N3aXRjaChhLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuX2lzVWx0cmFHcm91cExpc3RFeGlzdD90aGlzLl9jaGFubmVsP3RoaXMuX3N0YXR1cyE9PUllLkNPTk5FQ1RFRD9bMixFZS5SQ19ORVRfVU5BVkFJTEFCTEVdOihuPURhdGUubm93KCksaT10aGlzLl9jaGFubmVsLmNvZGVjLmVuY29kZUNsZWFyVW5yZWFkQ291bnQoe2NvbnZlcnNhdGlvblR5cGU6ai5VTFRSQV9HUk9VUCx0YXJnZXRJZDplLGNoYW5uZWxJZDp0fSx7dGltZXN0YW1wOm59KSwocj1uZXcgUnIoYnJbYnIudXBkVWdSVGltZV0saSx0aGlzLmN1cnJlbnRVc2VySWQpKS5zZXRIZWFkZXJRb3MoemUuQVRfTEVBU1RfT05DRSksWzQsdGhpcy5fY2hhbm5lbC5zZW5kKHIpXSk6WzIsRWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRF06WzIsUHJvbWlzZS5yZXNvbHZlKEVlLk1FVEhPRF9OT1RfQVZBSUxBQkxFKV07Y2FzZSAxOnJldHVybihzPWEuc2VudCgpLmNvZGUpPT09RWUuU1VDQ0VTUyYmKG89dGhpcy5fdWx0cmFHcm91cE1hcFt0K1wiX1wiK2VdKSYmKG8udW5yZWFkTWVzc2FnZUNvdW50PTAsby51bnJlYWRNZW50aW9uZWRDb3VudD0wLG8ubGFzdFJlYWRUaW1lPW4pLFsyLHNdfX0pKX0pKX0sdC5wcm90b3R5cGUuX2dldFVsdHJhR3JvdXBMaXN0PWZ1bmN0aW9uKGUpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgdCxuLGkscixzLG8sYSx1LGMsaCxsLGQsZixwPXRoaXM7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oZyl7c3dpdGNoKGcubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5fY2hhbm5lbCYmdGhpcy5fc3RhdHVzPT09SWUuQ09OTkVDVEVEPyghMSx0PXRoaXMuX2NoYW5uZWwuY29kZWMuZW5jb2RlVWx0cmFHcm91cChlLGZhbHNlKSxuPW5ldyBPcihicltici5wdWxsVWdTZXNdLHQsdGhpcy5jdXJyZW50VXNlcklkKSxbNCx0aGlzLl9jaGFubmVsLnNlbmQobixLdCx7Y3VycmVudFVzZXJJZDp0aGlzLmN1cnJlbnRVc2VySWQsY29udmVyc2F0aW9uVHlwZTpqLlVMVFJBX0dST1VQfSldKTpbMl07Y2FzZSAxOnJldHVybiBpPWcuc2VudCgpLHI9aS5jb2RlLHM9aS5kYXRhLHI9PT1FZS5TVUNDRVNTJiZzPyhhPShudWxsPT1zP3ZvaWQgMDpzLmxpc3QpfHxbXSx1PW51bGw9PXM/dm9pZCAwOnMuaXNGaW5pc2hlZCxhLmZvckVhY2goKGZ1bmN0aW9uKGUpe2Uubm90aWZpY2F0aW9uU3RhdHVzPU9lLkNMT1NFLGUuaXNUb3A9ITEscC5fdWx0cmFHcm91cE1hcFtlLmNoYW5uZWxJZCtcIl9cIitlLnRhcmdldElkXT1lfSkpLCExIT09dT9bMywyXTooYz1hLmxlbmd0aD4wJiZhW2EubGVuZ3RoLTFdLnZlcnNpb25UaW1lfHwwLHRoaXMuX2dldFVsdHJhR3JvdXBMaXN0KGMpLFszLDRdKSk6KGdlLndhcm4oXCJwdWxsIHN1cGVyIGNvbnZlcnNhdGlvbiAgZmFpbGVkLCBjb2RlOlwiLHIsXCIsIGRhdGE6XCIscyxcInJldHJ5aW5nLi4uXCIpLG89c2V0VGltZW91dCgoZnVuY3Rpb24oKXtwLl9maXJzdFB1bGxVbHRyYUdyb3VwVGltZT1lLHAuX2dldFVsdHJhR3JvdXBMaXN0KGUpLGNsZWFyVGltZW91dChvKX0pLDNlMyksWzJdKTtjYXNlIDI6cmV0dXJuWzQsdGhpcy5wdWxsQ29udmVyc2F0aW9uU3RhdHVzKHRoaXMuX2ZpcnN0UHVsbFVsdHJhR3JvdXBUaW1lKV07Y2FzZSAzOmg9Zy5zZW50KCksbD1oLmNvZGUsZD1oLmRhdGEsbCE9PUVlLlNVQ0NFU1MmJmdlLndhcm4oXCJwdWxsQ29udmVyc2F0aW9uU3RhdHVzIGZhaWwgY29kZTogXCIrbCtcIiwgZGF0YTogXCIrZCksZj1PYmplY3QudmFsdWVzKHRoaXMuX3VsdHJhR3JvdXBNYXApLGY9Z3MoZiksdGhpcy5faXNVbHRyYUdyb3VwTGlzdEV4aXN0PSEwLHRoaXMuX3dhdGNoZXIudWx0cmFHcm91cEVuYWJsZShJdChmKSksMD09PXRoaXMuX2ZpcnN0UHVsbFVsdHJhR3JvdXBUaW1lJiZ0aGlzLl9zeW5jVWx0cmFNc2codGhpcy5fbGFzdFN5bmNVbHRyYU1zZ1RpbWVTdGFtcCksZy5sYWJlbD00O2Nhc2UgNDpyZXR1cm5bMl19fSkpfSkpfSx0LnByb3RvdHlwZS5fc3RhcnRVbHRyYVN5bmNJbnRlcnZhbD1mdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1mdW5jdGlvbigpe2UuX3VsdHJhR3JvdXBUaW1lcj1zZXRUaW1lb3V0KChmdW5jdGlvbigpe0RhdGUubm93KCktZS5fbGFzdFN5bmNVbHRyYU1zZ0xvY2FsVGltZVN0YW1wPj0xOGU0JiZlLl9zeW5jVWx0cmFNc2coZS5fbGFzdFN5bmNVbHRyYU1zZ1RpbWVTdGFtcCksZS5fc3RvcFVsdHJhU3luY0ludGVydmFsKCksdCgpfSksM2U0KX07dGhpcy5fbGFzdFN5bmNVbHRyYU1zZ0xvY2FsVGltZVN0YW1wPURhdGUubm93KCksdGhpcy5fc3luY1VsdHJhTXNnKDApLHQoKX0sdC5wcm90b3R5cGUuX3N0b3BVbHRyYVN5bmNJbnRlcnZhbD1mdW5jdGlvbigpey0xIT09dGhpcy5fdWx0cmFHcm91cFRpbWVyJiYoY2xlYXJUaW1lb3V0KHRoaXMuX3VsdHJhR3JvdXBUaW1lciksdGhpcy5fdWx0cmFHcm91cFRpbWVyPS0xKX0sdC5wcm90b3R5cGUuX3N5bmNVbHRyYU1zZz1mdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG4saSxyLHMsbyxhLHUsYyxoLGwsZCxmLHA9dGhpcztyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihnKXtzd2l0Y2goZy5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9jaGFubmVsJiZ0aGlzLl9zdGF0dXM9PT1JZS5DT05ORUNURUQ/dGhpcy5faXNVbHRyYVB1bGxpbmc/WzJdOihnZS5pbmZvKFwic3RhcnQgcHVsbCB1bHRyYSBtc2csIHRpbWU6IFwiK2UpLHRoaXMuX2lzVWx0cmFQdWxsaW5nPSEwLG49dGhpcy5fY2hhbm5lbC5jb2RlYy5lbmNvZGVTdXBlclN5bmNNc2coZSksaT1uZXcgT3IoYnJbYnIucHVsbFVnTXNnXSxuLHRoaXMuY3VycmVudFVzZXJJZCksWzQsdGhpcy5fY2hhbm5lbC5zZW5kKGksUHQse2N1cnJlbnRVc2VySWQ6dGhpcy5jdXJyZW50VXNlcklkLGNvbnZlcnNhdGlvbjp7Y29udmVyc2F0aW9uVHlwZTpqLlVMVFJBX0dST1VQfX0pXSk6WzJdO2Nhc2UgMTppZihyPWcuc2VudCgpLHM9ci5jb2RlLG89ci5kYXRhLGdlLmluZm8oXCJlbmQgcHVsbCB1bHRyYSBtc2csIGNvZGU6IFwiK3MrXCIsIHN5bmNUaW1lOiBcIisobnVsbD09bz92b2lkIDA6by5zeW5jVGltZSkrXCIsIGNvdW50OiBcIisobnVsbD09PSh0PW51bGw9PW8/dm9pZCAwOm8ubGlzdCl8fHZvaWQgMD09PXQ/dm9pZCAwOnQubGVuZ3RoKSksdGhpcy5fbGFzdFN5bmNVbHRyYU1zZ0xvY2FsVGltZVN0YW1wPURhdGUubm93KCkscyE9PUVlLlNVQ0NFU1N8fCFvKXJldHVybiBnZS53YXJuKFwic3luYyBzdXBlciAgbWVzc2FnZSAgZmFpbGVkLCBjb2RlOlwiLHMsXCIsIGRhdGE6XCIsbyksdGhpcy5faXNVbHRyYVB1bGxpbmc9ITEsWzJdO2lmKHRoaXMuX2lzVWx0cmFQdWxsaW5nPSExLGE9by5saXN0LHU9by5zeW5jVGltZSxjPW8uZmluaXNoZWQsIXRoaXMuX2lzVWx0cmFHcm91cExpc3RFeGlzdClyZXR1cm4gZ2UuaW5mbyhcImluaXQgZ2V0VWx0cmFHcm91cExpc3RcIiksdGhpcy5fZmlyc3RQdWxsVWx0cmFHcm91cFRpbWU9MCx0aGlzLl9nZXRVbHRyYUdyb3VwTGlzdCgwKSx0aGlzLl9sYXN0U3luY1VsdHJhTXNnVGltZVN0YW1wPXUsWzJdO2ZvcihmIGluIGg9e30sbD1bXSxhLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyPWUudGFyZ2V0SWQscz1lLmNvbnRlbnQsbz1lLm1lc3NhZ2VUeXBlLGE9ZS5tZXNzYWdlVUlkLGM9ZS5jaGFubmVsSWQsZD1lLmlzQ291bnRlZDtpZihwLl91bHRyYU1zZ01hcFthXSlkZWxldGUgcC5fdWx0cmFNc2dNYXBbYV07ZWxzZXt2YXIgZj0wOygobnVsbD09PSh0PW51bGw9PXM/dm9pZCAwOnMubWVudGlvbmVkSW5mbyl8fHZvaWQgMD09PXQ/dm9pZCAwOnQudHlwZSk9PT13ZS5BTEx8fChudWxsPT09KGk9bnVsbD09PShuPW51bGw9PXM/dm9pZCAwOnMubWVudGlvbmVkSW5mbyl8fHZvaWQgMD09PW4/dm9pZCAwOm4udXNlcklkTGlzdCl8fHZvaWQgMD09PWk/dm9pZCAwOmkuaW5jbHVkZXMocC5jdXJyZW50VXNlcklkKSkpJiYoZj0xKTt2YXIgZz1wLl91bHRyYUdyb3VwTWFwW2MrXCJfXCIrcl07aWYoZylkJiYobz09PVNlLlJFQ0FMTD9nLnVucmVhZE1lc3NhZ2VDb3VudD4wJiYoZy51bnJlYWRNZXNzYWdlQ291bnQtPTEpOihnLnVucmVhZE1lc3NhZ2VDb3VudCs9MSxnLnVucmVhZE1lbnRpb25lZENvdW50Kz1mKSksZy52ZXJzaW9uVGltZT11LGcubGF0ZXN0TWVzc2FnZT1lLGhbYytcIl9cIityXT1nO2Vsc2V7dmFyIF89e2NvbnZlcnNhdGlvblR5cGU6ai5VTFRSQV9HUk9VUCx0YXJnZXRJZDpyLGNoYW5uZWxJZDpjLHVucmVhZE1lc3NhZ2VDb3VudDoxLHVucmVhZE1lbnRpb25lZENvdW50OmYsdmVyc2lvblRpbWU6dSxsYXRlc3RNZXNzYWdlOmUsbm90aWZpY2F0aW9uU3RhdHVzOk9lLkNMT1NFLGlzVG9wOiExfTtwLl91bHRyYUdyb3VwTWFwW2MrXCJfXCIrcl09XyxoW2MrXCJfXCIrcl09X31sLnB1c2goZSl9fSkpLE9iamVjdC5rZXlzKGgpLmxlbmd0aD4wJiYoZ2UuaW5mbyhcIm5vdGljZSB1bHRyYWdyb3Vwc1wiKSxkPU9iamVjdC52YWx1ZXMoaCksZD1ncyhkKSx0aGlzLl93YXRjaGVyLmNvbnZlcnNhdGlvbihJdChkKSkpLGdlLmluZm8oXCJub3RpY2UgdWx0cmFncm91cCBtZXNzYWdlXCIpLHRoaXMuX3dhdGNoZXIuYmF0Y2hNZXNzYWdlKGwpLHRoaXMuX3VsdHJhR3JvdXBUaW1lUXVlPXRoaXMuX3VsdHJhR3JvdXBUaW1lUXVlLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIGU+dX0pKSx0aGlzLl91bHRyYU1zZ01hcCl0aGlzLl91bHRyYU1zZ01hcFtmXTx1JiZkZWxldGUgdGhpcy5fdWx0cmFNc2dNYXBbZl07cmV0dXJuITE9PT1jP3RoaXMuX3N5bmNVbHRyYU1zZyh1KTphJiZhLmxlbmd0aD4wJiYodGhpcy5fbGFzdFN5bmNVbHRyYU1zZ1RpbWVTdGFtcD11KSx0aGlzLl91bHRyYUdyb3VwVGltZVF1ZS5sZW5ndGg+MCYmdGhpcy5fc3luY1VsdHJhTXNnKHRoaXMuX2xhc3RTeW5jVWx0cmFNc2dUaW1lU3RhbXApLFsyXX19KSl9KSl9LHQucHJvdG90eXBlLnNlbmRVbHRyYU1lc3NhZ2U9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG4saSxyLHMsbyxhLHUsYyxoLGw7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oZCl7c3dpdGNoKGQubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5fY2hhbm5lbD90aGlzLl9zdGF0dXMhPT1JZS5DT05ORUNURUQ/WzIse2NvZGU6RWUuUkNfTkVUX1VOQVZBSUxBQkxFfV06KFwiUkM6U1JTTXNnXCI9PT10Lm1lc3NhZ2VUeXBlJiZnZS53YXJuKFwidWx0cmEgZ3JvdXAgLT4gZGlyZWN0aW9uIG1lc3NhZ2UgY29udmVydCB0byBtZXNzYWdlXCIpLHQ9dGhpcy5faGFuZGxlTXNnUHJvcGVydGllcyh0LCEwKSxuPXRoaXMuX2NoYW5uZWwuY29kZWMuZW5jb2RlVXBNc2coe2NvbnZlcnNhdGlvblR5cGU6ai5VTFRSQV9HUk9VUCx0YXJnZXRJZDplfSx0KSwoaT1uZXcgUnIoYnJbYnIudWdNc2ddLG4sZSkpLnNldEhlYWRlclFvcyh6ZS5BVF9MRUFTVF9PTkNFKSxyPURhdGUubm93KCktdGhpcy5fbG9jYWxDb25uZWN0ZWRUaW1lK3RoaXMuX2Nvbm5lY3RlZFRpbWUscz1wcyhqLlVMVFJBX0dST1VQLGUsTyh7fSx0KSxcIlwiLHIsdGhpcy5jdXJyZW50VXNlcklkKSxbNCx0aGlzLl9jaGFubmVsLnNlbmQoaSldKTpbMix7Y29kZTpFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEfV07Y2FzZSAxOnJldHVybiBvPWQuc2VudCgpLGE9by5jb2RlLHU9by5kYXRhLGEhPT1FZS5TVUNDRVNTP1syLHtjb2RlOmEsZGF0YTpzfV06KGM9dSxzLnNlbnRUaW1lPWMudGltZXN0YW1wLHMubWVzc2FnZVVJZD1jLm1lc3NhZ2VVSWQsdGhpcy5fdWx0cmFNc2dNYXBbYy5tZXNzYWdlVUlkXT1jLnRpbWVzdGFtcCxoPXQuY2hhbm5lbElkfHxcIlwiLChsPXRoaXMuX3VsdHJhR3JvdXBNYXBbaCtcIl9cIitlXSk/bC5sYXRlc3RNZXNzYWdlPXM6KGw9e2NvbnZlcnNhdGlvblR5cGU6ai5VTFRSQV9HUk9VUCx0YXJnZXRJZDplLGNoYW5uZWxJZDpoLHVucmVhZE1lc3NhZ2VDb3VudDowLHVucmVhZE1lbnRpb25lZENvdW50OjAsdmVyc2lvblRpbWU6cy5zZW50VGltZSxsYXRlc3RNZXNzYWdlOnMsbm90aWZpY2F0aW9uU3RhdHVzOk9lLkNMT1NFLGlzVG9wOiExfSx0aGlzLl91bHRyYUdyb3VwTWFwW2grXCJfXCIrZV09bCksdGhpcy5fd2F0Y2hlci5jb252ZXJzYXRpb24oSXQoW2xdKSksWzIse2NvZGU6YSxkYXRhOnN9XSl9fSkpfSkpfSx0LnByb3RvdHlwZS5zZW5kVWx0cmFHcm91cFR5cGluZ1N0YXR1cz1mdW5jdGlvbihlLHQpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbixpLHIscyxvLGE7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24odSl7c3dpdGNoKHUubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5fY2hhbm5lbD90aGlzLl9zdGF0dXMhPT1JZS5DT05ORUNURUQ/WzIse2NvZGU6RWUuUkNfTkVUX1VOQVZBSUxBQkxFfV06KG49ZS5jb252ZXJzYXRpb25UeXBlLGk9ZS5jaGFubmVsSWQscj1lLnRhcmdldElkLHM9dGhpcy5fY2hhbm5lbC5jb2RlYy5lbmNvZGVPcGVyYXRlU3RhdHVzKHIsbixpfHxcIlwiLHR8fDApLChvPW5ldyBScihicltici5vcGVyYXRlXSxzLHIpKS5zZXRIZWFkZXJRb3MoemUuQVRfTEVBU1RfT05DRSksWzQsdGhpcy5fY2hhbm5lbC5zZW5kKG8pXSk6WzIse2NvZGU6RWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRH1dO2Nhc2UgMTpyZXR1cm4oYT11LnNlbnQoKS5jb2RlKSE9PUVlLlNVQ0NFU1M/WzIse2NvZGU6YSxtc2c6RWVbYV19XTpbMix7Y29kZTphfV19fSkpfSkpfSx0LnByb3RvdHlwZS5nZXRVbHRyYUdyb3VwTWVzc2FnZUxpc3RCeU1lc3NhZ2VVSWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciB0LG4saSxyLHMsbyxhO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKHUpe3N3aXRjaCh1LmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuX2NoYW5uZWw/dGhpcy5fc3RhdHVzIT09SWUuQ09OTkVDVEVEP1syLHtjb2RlOkVlLlJDX05FVF9VTkFWQUlMQUJMRX1dOmUubWVzc2FnZXMmJmUubWVzc2FnZXMubGVuZ3RoPDF8fGUubWVzc2FnZXMmJmUubWVzc2FnZXMubGVuZ3RoPjIwP1syLHtjb2RlOkVlLk1TR19MSU1JVF9FUlJPUn1dOih0PXt9LGUubWVzc2FnZXMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dFtlLm1lc3NhZ2VVSWRdPXZvaWQgMH0pKSxuPXRoaXMuX2NoYW5uZWwuY29kZWMuZW5jb2RlTXNnUXVlcnkoZSksKGk9bmV3IE9yKGJyW2JyLnFyeU1zZ10sbix0aGlzLmN1cnJlbnRVc2VySWQpKS5zZXRIZWFkZXJRb3MoemUuQVRfTEVBU1RfT05DRSksWzQsdGhpcy5fY2hhbm5lbC5zZW5kKGksdWkpXSk6WzIse2NvZGU6RWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRH1dO2Nhc2UgMTpyZXR1cm4gcj11LnNlbnQoKSxzPXIuY29kZSxvPXIuZGF0YSxzIT09RWUuU1VDQ0VTUz9bMix7Y29kZTpzLG1zZzpFZVtzXX1dOihhPShvfHx7fSkubGlzdCxBcnJheS5pc0FycmF5KGEpJiZhLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBuPWUubWVzc2FnZVVJZDt0W25dPWV9KSksWzIse2NvZGU6MCxkYXRhOnR9XSl9fSkpfSkpfSx0LnByb3RvdHlwZS5fcHVsbE9wZXJhdGVTdGF0dXNOb3RpZnk9ZnVuY3Rpb24oZSl7aWYodGhpcy5fY2hhbm5lbCl7dmFyIHQ9dGhpcy5fY2hhbm5lbC5jb2RlYy5kZWNvZGVCeVBCTmFtZShlLmRhdGEsaGkpLG49dC5jb252ZXJzYXRpb25UeXBlLGk9dC5pbmZvLHI9dC5zdW1tYXJ5O2dlLmluZm8oXCJzX29wTnRmIC0+IHR5cGU6IFwiK24rXCIsIGluZm86IFwiK2krXCIsIHN1bW1hcnk6IFwiK3IpLHRoaXMuX3dhdGNoZXIub3BlcmF0ZVN0YXR1cyh0KX19LHQucHJvdG90eXBlLmV4cGFuZFVsdHJhTWVzc2FnZT1mdW5jdGlvbihlKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHQsbixpLHIscyxvO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGEpe3N3aXRjaChhLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuX2NoYW5uZWw/dGhpcy5fc3RhdHVzIT09SWUuQ09OTkVDVEVEP1syLHtjb2RlOkVlLlJDX05FVF9VTkFWQUlMQUJMRX1dOih0PXRoaXMuX2NoYW5uZWwuY29kZWMuZW5jb2RlRXhwYW5kVWx0cmFNZXNzYWdlKGUsdGhpcy5jdXJyZW50VXNlcklkKSwobj1uZXcgUnIoYnJbYnIudXBNc2dFeF0sdCxlLnRhcmdldElkKSkuc2V0SGVhZGVyUW9zKHplLkFUX0xFQVNUX09OQ0UpLFs0LHRoaXMuX2NoYW5uZWwuc2VuZChuKV0pOlsyLHtjb2RlOkVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSUR9XTtjYXNlIDE6cmV0dXJuIGk9YS5zZW50KCkscj1pLmNvZGUscz1pLmRhdGEsciE9PUVlLlNVQ0NFU1M/WzIse2NvZGU6cixtc2c6RWVbcl19XToobz1zLHRoaXMuX3VsdHJhTXNnTWFwW28ubWVzc2FnZVVJZF09by50aW1lc3RhbXAsWzIse2NvZGU6cn1dKX19KSl9KSl9LHQucHJvdG90eXBlLm1vZGlmeU1lc3NhZ2U9ZnVuY3Rpb24oZSl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciB0LG4saSxyLHMsbztyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihhKXtzd2l0Y2goYS5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9jaGFubmVsP3RoaXMuX3N0YXR1cyE9PUllLkNPTk5FQ1RFRD9bMix7Y29kZTpFZS5SQ19ORVRfVU5BVkFJTEFCTEV9XToodD10aGlzLl9jaGFubmVsLmNvZGVjLmVuY29kZW1vZGlmeU1lc3NhZ2UoZSx0aGlzLmN1cnJlbnRVc2VySWQpLChuPW5ldyBScihicltici5tb2RpZnlNc2ddLHQsZS50YXJnZXRJZCkpLnNldEhlYWRlclFvcyh6ZS5BVF9MRUFTVF9PTkNFKSxbNCx0aGlzLl9jaGFubmVsLnNlbmQobildKTpbMix7Y29kZTpFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEfV07Y2FzZSAxOnJldHVybiBpPWEuc2VudCgpLHI9aS5jb2RlLHM9aS5kYXRhLHIhPT1FZS5TVUNDRVNTP1syLHtjb2RlOnIsbXNnOkVlW3JdfV06KG89cyx0aGlzLl91bHRyYU1zZ01hcFtvLm1lc3NhZ2VVSWRdPW8udGltZXN0YW1wLFsyLHtjb2RlOnJ9XSl9fSkpfSkpfSx0LnByb3RvdHlwZS5fcHVsbFVsdHJhQ2hhbmdlTWVzc2FnZUxpc3Q9ZnVuY3Rpb24oZSl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciB0LG4saSxyLHMsbyxhLHUsYyxoLGwsZCxmLHAsZyxfLHksbT10aGlzO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKHYpe3N3aXRjaCh2LmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuX2NoYW5uZWw/dGhpcy5fc3RhdHVzIT09SWUuQ09OTkVDVEVEfHx0aGlzLl9pc1B1bGxpbmdVbHRyYUNoYW5nZU1lc3NhZ2U/WzJdOih0aGlzLl9pc1B1bGxpbmdVbHRyYUNoYW5nZU1lc3NhZ2U9ITAsdD10aGlzLl9jaGFubmVsLmNvZGVjLmVuY29kZVF1ZXJ5TXNnQ2hhbmdlKGUpLChuPW5ldyBScihicltici5xcnlNc2dDaGFuZ2VdLHQsdGhpcy5jdXJyZW50VXNlcklkKSkuc2V0SGVhZGVyUW9zKHplLkFUX0xFQVNUX09OQ0UpLFs0LHRoaXMuX2NoYW5uZWwuc2VuZChuLHNpKV0pOlsyXTtjYXNlIDE6aWYoaT12LnNlbnQoKSxyPWkuY29kZSxzPWkuZGF0YSx0aGlzLl9pc1B1bGxpbmdVbHRyYUNoYW5nZU1lc3NhZ2U9ITEsciE9PUVlLlNVQ0NFU1MpcmV0dXJuWzJdO2ZvcihwIGluIGE9KG89c3x8e30pLmhhc05leHQsdT1vLmxpc3QsYz0obnVsbD09cz92b2lkIDA6cy5zeW5jVGltZSl8fDAsaD1bXSxsPXt9LEFycmF5LmlzQXJyYXkodSkmJnUuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHQ9ZSxuPXQudGFyZ2V0SWQsaT10LmNvbnZlcnNhdGlvblR5cGUscj10LnNlbmRUaW1lLHM9dC5tZXNzYWdlVUlkLG89dC5jaGFuZ2VUeXBlLGE9dC5vcGVyYXRvcklkLHU9ZS5jaGFubmVsSWR8fFwiXCIsYz1pK1wiX1wiK24sZD1zK1wiX1wiK3UrXCJfXCIrcixmPWxbY107aWYoZilmLmFkZChkKTtlbHNle3ZhciBwPW5ldyBTZXQoW2RdKTtsW2NdPXB9MyE9PW8/bS5fdWx0cmFNc2dDaGFuZ2VNYXBbc109bzpoLnB1c2goe3RhcmdldElkOm4sY29udmVyc2F0aW9uVHlwZTppLHNlbmRUaW1lOnIsbWVzc2FnZVVJZDpzLHNlbmRlclVzZXJJZDphLGNoYW5uZWxJZDp1fSl9KSksQXJyYXkuaXNBcnJheShoKSYmaC5sZW5ndGg+MCYmdGhpcy5fd2F0Y2hlci51bHRyYUdyb3VwTWVzc2FnZVJlY2FsbGVkKGgpLGQ9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zcGxpdChcIl9cIiksbj10LnNoaWZ0KCksaT10LmpvaW4oXCJfXCIpLHI9bFtlXSxzPVtdO3IuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zcGxpdChcIl9cIiksbj10WzBdLGk9dFsxXSxyPXRbMl07cy5wdXNoKHtzZW5kVGltZTpOdW1iZXIociksbWVzc2FnZVVJZDpuLGNoYW5uZWxJZDppfSl9KSk7dmFyIG89e3RhcmdldElkOmksY29udmVyc2F0aW9uVHlwZTpOdW1iZXIobiksbWVzc2FnZXM6c307Zi5fcHVsbFVsdHJhTWVzc2FnZUxpc3Qobyl9LGY9dGhpcyxsKWQocCk7Zm9yKF8gaW4gZz10aGlzLl9wdWxsVWx0cmFDaGFuZ2VNZXNzYWdlUXVlLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIGU+Y30pKSx0aGlzLl9wdWxsVWx0cmFDaGFuZ2VNZXNzYWdlUXVlLmxlbmd0aD0wLCh5PXRoaXMuX3B1bGxVbHRyYUNoYW5nZU1lc3NhZ2VRdWUpLnB1c2guYXBwbHkoeSxnKSx0aGlzLl91bHRyYU1zZ01hcCl0aGlzLl91bHRyYU1zZ01hcFtfXTxjJiZkZWxldGUgdGhpcy5fdWx0cmFNc2dNYXBbX107cmV0dXJuIGE/dGhpcy5fcHVsbFVsdHJhQ2hhbmdlTWVzc2FnZUxpc3QoYyk6dGhpcy5fbGFzdFB1bGxpbmdVbHRyYUNoYW5nZU1lc3NhZ2VUaW1lPWMsWzJdfX0pKX0pKX0sdC5wcm90b3R5cGUuX3B1bGxVbHRyYU1lc3NhZ2VMaXN0PWZ1bmN0aW9uKGUpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgdCxuLGkscixzLG8sYSx1LGM9dGhpcztyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihoKXtzd2l0Y2goaC5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9jaGFubmVsP3RoaXMuX3N0YXR1cyE9PUllLkNPTk5FQ1RFRD9bMix7Y29kZTpFZS5SQ19ORVRfVU5BVkFJTEFCTEV9XToodD10aGlzLl9jaGFubmVsLmNvZGVjLmVuY29kZU1zZ1F1ZXJ5KGUpLChuPW5ldyBPcihicltici5xcnlNc2ddLHQsdGhpcy5jdXJyZW50VXNlcklkKSkuc2V0SGVhZGVyUW9zKHplLkFUX0xFQVNUX09OQ0UpLFs0LHRoaXMuX2NoYW5uZWwuc2VuZChuLHVpKV0pOlsyLHtjb2RlOkVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSUR9XTtjYXNlIDE6cmV0dXJuIGk9aC5zZW50KCkscj1pLmNvZGUscz1pLmRhdGEsciE9PUVlLlNVQ0NFU1M/WzIse2NvZGU6cixtc2c6RWVbcl19XToobz0oc3x8e30pLmxpc3QsYT1bXSx1PVtdLEFycmF5LmlzQXJyYXkobykmJm8uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHQ9ZS50YXJnZXRJZCxuPWUuY2hhbm5lbElkLGk9ZS5tZXNzYWdlVUlkLHI9Yy5fdWx0cmFHcm91cE1hcFtuK1wiX1wiK3RdO3ImJnIubGF0ZXN0TWVzc2FnZS5tZXNzYWdlVUlkPT09ZS5tZXNzYWdlVUlkJiYoci5sYXRlc3RNZXNzYWdlPWUpO3ZhciBzPWMuX3VsdHJhTXNnQ2hhbmdlTWFwW2krXCJcIl07MT09PXM/YS5wdXNoKGUpOjI9PT1zJiZ1LnB1c2goZSl9KSksYS5sZW5ndGg+MCYmdGhpcy5fd2F0Y2hlci51bHRyYUdyb3VwTWVzc2FnZUV4cGFuc2lvblVwZGF0ZWQoYXx8W10pLHUubGVuZ3RoPjAmJnRoaXMuX3dhdGNoZXIudWx0cmFHcm91cE1lc3NhZ2VNb2RpZmllZCh1fHxbXSksWzJdKX19KSl9KSl9LHQucHJvdG90eXBlLmdldFVsdHJhSGlzdG9yeU1zZz1mdW5jdGlvbihlLHQpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbixpLHIscyxvO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGEpe3N3aXRjaChhLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuX2NoYW5uZWw/dGhpcy5fc3RhdHVzIT09SWUuQ09OTkVDVEVEP1syLHtjb2RlOkVlLlJDX05FVF9VTkFWQUlMQUJMRX1dOihuPXRoaXMuX2NoYW5uZWwuY29kZWMuZW5jb2RlR2V0SGlzdG9yeU1zZyhlLHQpLGk9bmV3IE9yKGJyW2JyLnFyeVVnTXNnXSxuLHRoaXMuY3VycmVudFVzZXJJZCksWzQsdGhpcy5fY2hhbm5lbC5zZW5kKGksRnQse2N1cnJlbnRVc2VySWQ6dGhpcy5jdXJyZW50VXNlcklkLGNvbnZlcnNhdGlvbjp7Y29udmVyc2F0aW9uVHlwZTpqLlVMVFJBX0dST1VQLHRhcmdldElkOmV9fSldKTpbMix7Y29kZTpFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEfV07Y2FzZSAxOnJldHVybiByPWEuc2VudCgpLHM9ci5jb2RlLG89ci5kYXRhLHM9PT1FZS5TVUNDRVNTJiZvP1syLHtjb2RlOnMsZGF0YTpvfV06KGdlLndhcm4oXCJnZXQgc3VwZXIgaGlzdG9yeSBtZXNzYWdlICBmYWlsZWQsIGNvZGU6XCIscyxcIiwgZGF0YTpcIixvKSxbMix7Y29kZTpzfV0pfX0pKX0pKX0sdC5wcm90b3R5cGUuc2VhcmNoVWx0cmFHcm91cE1lc3NhZ2VzPWZ1bmN0aW9uKGUpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fY2hhbm5lbD90aGlzLl9zdGF0dXMhPT1JZS5DT05ORUNURUQ/WzIse2NvZGU6RWUuUkNfTkVUX1VOQVZBSUxBQkxFfV06WzIse2NvZGU6RWUuU1VDQ0VTU31dOlsyLHtjb2RlOkVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSUR9XX0pKX0pKX0sdC5wcm90b3R5cGUuZ2V0QWxsQ29udmVyc2F0aW9uU3RhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtjb2RlOkVlLlNVQ0NFU1MsZGF0YTp0aGlzLl9jb252ZXJzYXRpb25NYW5hZ2VyLmdldEFsbENvbnZlcnNhdGlvblN0YXRlKCl9KX0sdC5wcm90b3R5cGUuam9pblJUQ1Jvb209ZnVuY3Rpb24oZSx0LG4saSxyLHMpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbyxhO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKHUpe3JldHVybiB0aGlzLl9jaGFubmVsPyhvPXRoaXMuX2NoYW5uZWwuY29kZWMuZW5jb2RlSm9pblJUQ1Jvb20odCxuLGkscixzKSxhPW5ldyBPcihicltici5ydGNSSm9pbl9kYXRhXSxvLGUpLFsyLHRoaXMuX2NoYW5uZWwuc2VuZChhLG5uKV0pOlsyLHtjb2RlOkVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSUR9XX0pKX0pKX0sdC5wcm90b3R5cGUucXVpdFJUQ1Jvb209ZnVuY3Rpb24oZSl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciB0LG47cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oaSl7c3dpdGNoKGkubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5fY2hhbm5lbD8odD10aGlzLl9jaGFubmVsLmNvZGVjLmVuY29kZVF1aXRSVENSb29tKCksbj1uZXcgT3IoYnJbYnIucnRjUkV4aXRdLHQsZSksWzQsdGhpcy5fY2hhbm5lbC5zZW5kKG4pXSk6WzIsRWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRF07Y2FzZSAxOnJldHVyblsyLGkuc2VudCgpLmNvZGVdfX0pKX0pKX0sdC5wcm90b3R5cGUucnRjUGluZz1mdW5jdGlvbihlLHQsbil7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBpLHI7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24ocyl7c3dpdGNoKHMubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5fY2hhbm5lbD8oaT10aGlzLl9jaGFubmVsLmNvZGVjLmVuY29kZUpvaW5SVENSb29tKHQsbikscj1uZXcgT3IoYnJbYnIucnRjUGluZ10saSxlKSxbNCx0aGlzLl9jaGFubmVsLnNlbmQocildKTpbMixFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEXTtjYXNlIDE6cmV0dXJuWzIscy5zZW50KCkuY29kZV19fSkpfSkpfSx0LnByb3RvdHlwZS5nZXRSVENSb29tSW5mbz1mdW5jdGlvbihlKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHQsbjtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihpKXtyZXR1cm4gdGhpcy5fY2hhbm5lbD8odD10aGlzLl9jaGFubmVsLmNvZGVjLmVuY29kZUdldFJUQ1Jvb21JbmZvKCksbj1uZXcgT3IoYnJbYnIucnRjUkluZm9dLHQsZSksWzIsdGhpcy5fY2hhbm5lbC5zZW5kKG4sZ24pXSk6WzIse2NvZGU6RWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRH1dfSkpfSkpfSx0LnByb3RvdHlwZS5nZXRSVENVc2VySW5mb0xpc3Q9ZnVuY3Rpb24oZSl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciB0LG4saSxyLHM7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24obyl7c3dpdGNoKG8ubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5fY2hhbm5lbD8odD10aGlzLl9jaGFubmVsLmNvZGVjLmVuY29kZUdldFJUQ1Jvb21JbmZvKCksbj1uZXcgT3IoYnJbYnIucnRjVURhdGFdLHQsZSksWzQsdGhpcy5fY2hhbm5lbC5zZW5kKG4sbm4pXSk6WzIse2NvZGU6RWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRH1dO2Nhc2UgMTpyZXR1cm4gaT1vLnNlbnQoKSxyPWkuY29kZSxzPWkuZGF0YSxbMix7Y29kZTpyLGRhdGE6cz97dXNlcnM6cy51c2Vyc306c31dfX0pKX0pKX0sdC5wcm90b3R5cGUuc2V0UlRDVXNlckluZm89ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgaSxyO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKHMpe3N3aXRjaChzLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuX2NoYW5uZWw/KGk9dGhpcy5fY2hhbm5lbC5jb2RlYy5lbmNvZGVTZXRSVENVc2VySW5mbyh0LG4pLHI9bmV3IE9yKGJyW2JyLnJ0Y1VQdXRdLGksZSksWzQsdGhpcy5fY2hhbm5lbC5zZW5kKHIpXSk6WzIsRWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRF07Y2FzZSAxOnJldHVyblsyLHMuc2VudCgpLmNvZGVdfX0pKX0pKX0sdC5wcm90b3R5cGUucmVtb3ZlUlRDVXNlckluZm89ZnVuY3Rpb24oZSx0KXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG4saTtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihyKXtzd2l0Y2goci5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9jaGFubmVsPyhuPXRoaXMuX2NoYW5uZWwuY29kZWMuZW5jb2RlUmVtb3ZlUlRDVXNlckluZm8odCksaT1uZXcgUnIoYnJbYnIucnRjVURlbF0sbixlKSxbNCx0aGlzLl9jaGFubmVsLnNlbmQoaSldKTpbMixFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEXTtjYXNlIDE6cmV0dXJuWzIsci5zZW50KCkuY29kZV19fSkpfSkpfSx0LnByb3RvdHlwZS5zZXRSVENEYXRhPWZ1bmN0aW9uKGUsdCxuLGkscixzKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG8sYTtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbih1KXtzd2l0Y2godS5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9jaGFubmVsPyhvPXRoaXMuX2NoYW5uZWwuY29kZWMuZW5jb2RlU2V0UlRDRGF0YSh0LG4saSxyLHMpLGE9bmV3IFJyKGJyW2JyLnJ0Y1NldERhdGFdLG8sZSksWzQsdGhpcy5fY2hhbm5lbC5zZW5kKGEpXSk6WzIsRWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRF07Y2FzZSAxOnJldHVyblsyLHUuc2VudCgpLmNvZGVdfX0pKX0pKX0sdC5wcm90b3R5cGUuc2V0UlRDVG90YWxSZXM9ZnVuY3Rpb24oZSx0LG4saSxyKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHMsbztyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihhKXtzd2l0Y2goYS5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9jaGFubmVsPyhzPXRoaXMuX2NoYW5uZWwuY29kZWMuZW5jb2RlVXNlclNldFJUQ0RhdGEodCxuLGksciksbz1uZXcgT3IoYnJbYnIudXNlclNldERhdGFdLHMsZSksWzQsdGhpcy5fY2hhbm5lbC5zZW5kKG8pXSk6WzIsRWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRF07Y2FzZSAxOnJldHVyblsyLGEuc2VudCgpLmNvZGVdfX0pKX0pKX0sdC5wcm90b3R5cGUuc2V0UlRDQ0ROVXJpcz1mdW5jdGlvbihlLHQsbil7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBpLHI7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24ocyl7c3dpdGNoKHMubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5fY2hhbm5lbD8oaT10aGlzLl9jaGFubmVsLmNvZGVjLmVuY29kZVVzZXJTZXRSVENDRE5VcmlzKHQsbikscj1uZXcgT3IoYnJbYnIudXNlclNldERhdGFdLGksZSksWzQsdGhpcy5fY2hhbm5lbC5zZW5kKHIpXSk6WzIsRWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRF07Y2FzZSAxOnJldHVyblsyLHMuc2VudCgpLmNvZGVdfX0pKX0pKX0sdC5wcm90b3R5cGUuZ2V0UlRDRGF0YT1mdW5jdGlvbihlLHQsbixpKXtpZighdGhpcy5fY2hhbm5lbClyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtjb2RlOkVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSUR9KTt2YXIgcj10aGlzLl9jaGFubmVsLmNvZGVjLmVuY29kZUdldFJUQ0RhdGEodCxuLGkpLHM9bmV3IE9yKGJyW2JyLnJ0Y1FyeURhdGFdLHIsZSk7cmV0dXJuIHRoaXMuX2NoYW5uZWwuc2VuZChzLGxuKX0sdC5wcm90b3R5cGUucmVtb3ZlUlRDRGF0YT1mdW5jdGlvbihlLHQsbixpLHIpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgcyxvO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGEpe3N3aXRjaChhLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuX2NoYW5uZWw/KHM9dGhpcy5fY2hhbm5lbC5jb2RlYy5lbmNvZGVSZW1vdmVSVENEYXRhKHQsbixpLHIpLG89bmV3IFJyKGJyW2JyLnJ0Y0RlbERhdGFdLHMsZSksWzQsdGhpcy5fY2hhbm5lbC5zZW5kKG8pXSk6WzIsRWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRF07Y2FzZSAxOnJldHVyblsyLGEuc2VudCgpLmNvZGVdfX0pKX0pKX0sdC5wcm90b3R5cGUuc2V0UlRDT3V0RGF0YT1mdW5jdGlvbihlLHQsbixpKXt0aHJvdyBuZXcgRXJyb3IoXCJKU0VuZ2luZSdzIG1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpfSx0LnByb3RvdHlwZS5nZXRSVENPdXREYXRhPWZ1bmN0aW9uKGUsdCl7dGhyb3cgbmV3IEVycm9yKFwiSlNFbmdpbmUncyBtZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKX0sdC5wcm90b3R5cGUuZ2V0UlRDVG9rZW49ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgaSxyO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKHMpe3JldHVybiB0aGlzLl9jaGFubmVsPyhpPXRoaXMuX2NoYW5uZWwuY29kZWMuZW5jb2RlSm9pblJUQ1Jvb20odCxuKSxyPW5ldyBPcihicltici5ydGNUb2tlbl0saSxlKSxbMix0aGlzLl9jaGFubmVsLnNlbmQocixobildKTpbMix7Y29kZTpFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEfV19KSl9KSl9LHQucHJvdG90eXBlLnNldFJUQ1N0YXRlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBuLGk7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24ocil7c3dpdGNoKHIubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5fY2hhbm5lbD8obj10aGlzLl9jaGFubmVsLmNvZGVjLmVuY29kZVNldFJUQ1N0YXRlKHQpLGk9bmV3IE9yKGJyW2JyLnJ0Y1VzZXJTdGF0ZV0sbixlKSxbNCx0aGlzLl9jaGFubmVsLnNlbmQoaSldKTpbMixFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEXTtjYXNlIDE6cmV0dXJuWzIsci5zZW50KCkuY29kZV19fSkpfSkpfSx0LnByb3RvdHlwZS5nZXRSVENVc2VySW5mbz1mdW5jdGlvbihlKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oZSl7dGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIil9KSl9KSl9LHQucHJvdG90eXBlLmdldFJUQ1VzZXJMaXN0PWZ1bmN0aW9uKGUpe2lmKCF0aGlzLl9jaGFubmVsKXJldHVybiBQcm9taXNlLnJlc29sdmUoe2NvZGU6RWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRH0pO3ZhciB0PXRoaXMuX2NoYW5uZWwuY29kZWMuZW5jb2RlR2V0UlRDUm9vbUluZm8oKSxuPW5ldyBPcihicltici5ydGNVTGlzdF0sdCxlKTtyZXR1cm4gdGhpcy5fY2hhbm5lbC5zZW5kKG4sbm4pfSx0LnByb3RvdHlwZS5qb2luTGl2aW5nUm9vbUFzQXVkaWVuY2U9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB2b2lkIDA9PT10JiYodD14ZS5MSVZFKSxNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgaSxyLHMsbyxhLHUsYyxoO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGwpe3N3aXRjaChsLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuX2NoYW5uZWw/KGk9dGhpcy5fY2hhbm5lbC5jb2RlYy5lbmNvZGVKb2luUlRDUm9vbSh0LG4pLHI9bmV3IE9yKGJyW2JyLnZpZXdlckpvaW5SXSxpLGUpLFs0LHRoaXMuX2NoYW5uZWwuc2VuZChyLG1pKV0pOlsyLHtjb2RlOkVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSUR9XTtjYXNlIDE6cmV0dXJuIHM9bC5zZW50KCksbz1zLmNvZGUsYT1zLmRhdGEsbyE9PUVlLlNVQ0NFU1M/WzIse2NvZGU6b31dOihjPSh1PWEpLnJ0Y1Rva2VuLGg9dS5lbnRyaWVzLFsyLHtjb2RlOm8sZGF0YTp7dG9rZW46YyxrdkVudHJpZXM6aH19XSl9fSkpfSkpfSx0LnByb3RvdHlwZS5xdWl0TGl2aW5nUm9vbUFzQXVkaWVuY2U9ZnVuY3Rpb24oZSl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciB0LG4saTtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihyKXtzd2l0Y2goci5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9jaGFubmVsPyh0PXRoaXMuX2NoYW5uZWwuY29kZWMuZW5jb2RlUXVpdFJUQ1Jvb20oKSxuPW5ldyBPcihicltici52aWV3ZXJFeGl0Ul0sdCxlKSxbNCx0aGlzLl9jaGFubmVsLnNlbmQobildKTpbMixFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEXTtjYXNlIDE6cmV0dXJuIGk9ci5zZW50KCkuY29kZSx0aGlzLl9ydGNLVk1hbmFnZXIucmVzZXQoKSxbMixpXX19KSl9KSl9LHQucHJvdG90eXBlLnJ0Y0lkZW50aXR5Q2hhbmdlPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIGkscixzLG8sYTtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbih1KXtzd2l0Y2godS5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9jaGFubmVsPyhpPXRoaXMuX2NoYW5uZWwuY29kZWMuZW5jb2RlSWRlbnRpdHlDaGFuZ2VJbmZvKHQsbikscj1uZXcgT3IoYnJbYnIucnRjSWRlbnRpdHlDaGFuZ2VdLGksZSksWzQsdGhpcy5fY2hhbm5lbC5zZW5kKHIsbm4pXSk6WzIse2NvZGU6RWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRH1dO2Nhc2UgMTpyZXR1cm4gcz11LnNlbnQoKSxvPXMuY29kZSxhPXMuZGF0YSxvIT09RWUuU1VDQ0VTUz9bMix7Y29kZTpvfV06WzIse2NvZGU6byxkYXRhOmF9XX19KSl9KSl9LHQucHJvdG90eXBlLnB1bGxSVENSb29tRW50cnk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHQsbixpLHIscyxvLGEsdSxjO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGgpe3N3aXRjaChoLmxhYmVsKXtjYXNlIDA6cmV0dXJuIG49KHQ9dGhpcykuX2NoYW5uZWwsaT10LmN1cnJlbnRVc2VySWQsbj8oZ2UuaW5mbyhcImF1ZGllbmNlIGluIHJvb20gc3RhcnQgcHVsbCBLVlwiKSxyPW4uY29kZWMuZW5jb2RlUHVsbFJUQ1Jvb21LVihlLDApLHM9bmV3IE9yKGJyW2JyLnJ0Y1B1bGxLdl0scixpKSxbNCxuLnNlbmQocyxnaSldKTpbMix7Y29kZTpFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEfV07Y2FzZSAxOnJldHVybiBvPWguc2VudCgpLGE9by5jb2RlLHU9by5kYXRhLGdlLmluZm8oXCJhdWRpZW5jZSBpbiByb29tIGVuZCBwdWxsIEtWLCBjb2RlOiBcIithK1wiLCBkYXRhOiBcIitKU09OLnN0cmluZ2lmeSh1fHx7fSkpLGE9PT1FZS5TVUNDRVNTPyhjPXUua3ZFbnRyaWVzLHRoaXMuX3dhdGNoZXIub25SVENEYXRhQ2hhbmdlKGMsZSksWzIse2NvZGU6YSxkYXRhOnV9XSk6WzIse2NvZGU6YX1dfX0pKX0pKX0sdC5wcm90b3R5cGUuZ2V0UlRDSm9pbmVkVXNlckluZm89ZnVuY3Rpb24oZSl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciB0LG4saSxyLHMsbyxhLHU7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oYyl7c3dpdGNoKGMubGFiZWwpe2Nhc2UgMDpyZXR1cm4gbj0odD10aGlzKS5fY2hhbm5lbCxpPXQuY3VycmVudFVzZXJJZCxuPyhyPW4uY29kZWMuZW5jb2RlUXVlcnlVc2VySm9pbmVkSW5mbyhlKSxzPW5ldyBPcihicltici5ydGNRdWVyeUpvaW5lZF0scixpKSxbNCxuLnNlbmQocyx5aSldKTpbMix7Y29kZTpFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEfV07Y2FzZSAxOnJldHVybiBvPWMuc2VudCgpLGE9by5jb2RlLHU9by5kYXRhLGE9PT1FZS5TVUNDRVNTP1syLHtjb2RlOmEsZGF0YTp1fV06WzIse2NvZGU6YX1dfX0pKX0pKX0sdC5wcm90b3R5cGUuZ2V0RGV2aWNlSWQ9ZnVuY3Rpb24oKXtyZXR1cm4gZHModGhpcy5ydW50aW1lKX0sdC5wcm90b3R5cGUucmVxdWVzdFJvb21QSz1mdW5jdGlvbihlKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHQsbixpO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKHIpe3N3aXRjaChyLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuX2NoYW5uZWw/KHQ9dGhpcy5fY2hhbm5lbC5jb2RlYy5lbmNvZGVSZXF1ZXN0Um9vbVBLKGUpLG49bmV3IE9yKGJyW2JyLnJ0Y0ludml0ZV0sdCxlLnJvb21JZCksWzQsdGhpcy5fY2hhbm5lbC5zZW5kKG4pXSk6WzIsRWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRF07Y2FzZSAxOnJldHVybiBpPXIuc2VudCgpLmNvZGUsdGhpcy5fcnRjS1ZNYW5hZ2VyLnJlc2V0KCksWzIsaV19fSkpfSkpfSx0LnByb3RvdHlwZS5jYW5jZWxSb29tUEs9ZnVuY3Rpb24oZSl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciB0LG4saTtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihyKXtzd2l0Y2goci5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9jaGFubmVsPyh0PXRoaXMuX2NoYW5uZWwuY29kZWMuZW5jb2RlQ2FuY2VsUm9vbVBLKGUpLG49bmV3IE9yKGJyW2JyLnJ0Y0NhbmNlbEludml0ZV0sdCxlLnJvb21JZCksWzQsdGhpcy5fY2hhbm5lbC5zZW5kKG4pXSk6WzIsRWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRF07Y2FzZSAxOnJldHVybiBpPXIuc2VudCgpLmNvZGUsdGhpcy5fcnRjS1ZNYW5hZ2VyLnJlc2V0KCksWzIsaV19fSkpfSkpfSx0LnByb3RvdHlwZS5yZXNwb25zZVJvb21QSz1mdW5jdGlvbihlKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHQsbixpO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKHIpe3N3aXRjaChyLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuX2NoYW5uZWw/KHQ9dGhpcy5fY2hhbm5lbC5jb2RlYy5lbmNvZGVSZXNwb25zZVJvb21QSyhlKSxuPW5ldyBPcihicltici5ydGNJbnZpdGVBbnN3ZXJdLHQsZS5yb29tSWQpLFs0LHRoaXMuX2NoYW5uZWwuc2VuZChuKV0pOlsyLEVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSURdO2Nhc2UgMTpyZXR1cm4gaT1yLnNlbnQoKS5jb2RlLHRoaXMuX3J0Y0tWTWFuYWdlci5yZXNldCgpLFsyLGldfX0pKX0pKX0sdC5wcm90b3R5cGUuZW5kUm9vbVBLPWZ1bmN0aW9uKGUpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgdCxuLGk7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24ocil7c3dpdGNoKHIubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5fY2hhbm5lbD8odD10aGlzLl9jaGFubmVsLmNvZGVjLmVuY29kZUVuZFJvb21QSyhlKSxuPW5ldyBPcihicltici5ydGNFbmRJbnZpdGVdLHQsZS5yb29tSWQpLFs0LHRoaXMuX2NoYW5uZWwuc2VuZChuKV0pOlsyLEVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSURdO2Nhc2UgMTpyZXR1cm4gaT1yLnNlbnQoKS5jb2RlLHRoaXMuX3J0Y0tWTWFuYWdlci5yZXNldCgpLFsyLGldfX0pKX0pKX0sdC5wcm90b3R5cGUuYmluZFJUQ1Jvb21Gb3JDaGF0cm9vbT1mdW5jdGlvbihlKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHQsbixpLHI7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24ocyl7c3dpdGNoKHMubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5fY2hhbm5lbD8odD1lLmNoYXRSb29tSWQsbj10aGlzLl9jaGFubmVsLmNvZGVjLmVuY29kZWJpbmRSVENSb29tRm9yQ2hhdHJvb20oZSksaT1uZXcgT3IoYnJbYnIuc2V0UnRjUm9vbUlkXSxuLHQpLFs0LHRoaXMuX2NoYW5uZWwuc2VuZChpKV0pOlsyLEVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSURdO2Nhc2UgMTpyZXR1cm4gcj1zLnNlbnQoKSxbMixyLmNvZGVdfX0pKX0pKX0sdC5wcm90b3R5cGUuY2FsbEV4dHJhPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxuPTE7bjxhcmd1bWVudHMubGVuZ3RoO24rKyl0W24tMV09YXJndW1lbnRzW25dO3JldHVybiBQcm9taXNlLnJlc29sdmUoe2NvZGU6RWUuRVhUUkFfTUVUSE9EX1VOREVGSU5FRH0pfSx0LnByb3RvdHlwZS5nZXRDb252ZXJzYXRpb25MaXN0V2l0aEFsbENoYW5uZWw9ZnVuY3Rpb24oKXt0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKX0sdC5wcm90b3R5cGUuZ2V0Q29udmVyc2F0aW9uTGlzdFdpdGhBbGxDaGFubmVsQnlQYWdlPWZ1bmN0aW9uKGUsdCl7dGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIil9LHQucHJvdG90eXBlLmNsZWFyQ29udmVyc2F0aW9ucz1mdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpfSx0LnByb3RvdHlwZS5zZXRVc2VyU3RhdHVzTGlzdGVuZXI9ZnVuY3Rpb24oZSx0KXt0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKX0sdC5wcm90b3R5cGUuc2V0VXNlclN0YXR1cz1mdW5jdGlvbihlKXt0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKX0sdC5wcm90b3R5cGUuc3Vic2NyaWJlVXNlclN0YXR1cz1mdW5jdGlvbihlKXt0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKX0sdC5wcm90b3R5cGUuZ2V0VXNlclN0YXR1cz1mdW5jdGlvbihlKXt0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKX0sdC5wcm90b3R5cGUuYWRkVG9CbGFja2xpc3Q9ZnVuY3Rpb24oZSl7dGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIil9LHQucHJvdG90eXBlLnJlbW92ZUZyb21CbGFja2xpc3Q9ZnVuY3Rpb24oZSl7dGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIil9LHQucHJvdG90eXBlLmdldEJsYWNrbGlzdD1mdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpfSx0LnByb3RvdHlwZS5nZXRCbGFja2xpc3RTdGF0dXM9ZnVuY3Rpb24oZSl7dGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIil9LHQucHJvdG90eXBlLmluc2VydE1lc3NhZ2U9ZnVuY3Rpb24oZSx0LG4pe3Rocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpfSx0LnByb3RvdHlwZS5kZWxldGVNZXNzYWdlcz1mdW5jdGlvbihlKXt0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKX0sdC5wcm90b3R5cGUuZGVsZXRlTWVzc2FnZXNCeVRpbWVzdGFtcD1mdW5jdGlvbihlLHQsbixpLHIpe3Rocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpfSx0LnByb3RvdHlwZS5jbGVhck1lc3NhZ2VzPWZ1bmN0aW9uKGUsdCxuKXt0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKX0sdC5wcm90b3R5cGUuZ2V0TWVzc2FnZT1mdW5jdGlvbihlKXt0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKX0sdC5wcm90b3R5cGUuc2V0TWVzc2FnZUNvbnRlbnQ9ZnVuY3Rpb24oZSx0LG4pe3Rocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpfSx0LnByb3RvdHlwZS5zZXRNZXNzYWdlU2VhcmNoRmllbGQ9ZnVuY3Rpb24oZSx0LG4pe3Rocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpfSx0LnByb3RvdHlwZS5zZWFyY2hDb252ZXJzYXRpb25CeUNvbnRlbnQ9ZnVuY3Rpb24oZSx0LG4saSl7dGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIil9LHQucHJvdG90eXBlLnNlYXJjaE1lc3NhZ2VCeUNvbnRlbnQ9ZnVuY3Rpb24oZSx0LG4saSxyLHMpe3Rocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpfSx0LnByb3RvdHlwZS5nZXRVbnJlYWRNZW50aW9uZWRNZXNzYWdlcz1mdW5jdGlvbihlLHQpe3Rocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpfSx0LnByb3RvdHlwZS5zZXRNZXNzYWdlU2VudFN0YXR1cz1mdW5jdGlvbihlLHQpe3Rocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpfSx0LnByb3RvdHlwZS5zZXRNZXNzYWdlUmVjZWl2ZWRTdGF0dXM9ZnVuY3Rpb24oZSx0KXt0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKX0sdC5wcm90b3R5cGUuY2xlYXJVbnJlYWRDb3VudEJ5VGltZXN0YW1wPWZ1bmN0aW9uKGUsdCxuLGkpe3Rocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpfSx0LnByb3RvdHlwZS5nZXRDb252ZXJzYXRpb25Ob3RpZmljYXRpb25TdGF0dXM9ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXMuX2NvbnZlcnNhdGlvbk1hbmFnZXIuZ2V0KGUsdCxuKTtyZXR1cm4gaT9Qcm9taXNlLnJlc29sdmUoe2NvZGU6RWUuU1VDQ0VTUyxkYXRhOmkubm90aWZpY2F0aW9uU3RhdHVzfSk6UHJvbWlzZS5yZXNvbHZlKHtjb2RlOkVlLkNPTlZFUl9HRVRfRVJST1J9KX0sdC5wcm90b3R5cGUuZ2V0UmVtb3RlSGlzdG9yeU1lc3NhZ2VzPWZ1bmN0aW9uKGUsdCxuLGkscixzKXtyZXR1cm4gdGhpcy5nZXRIaXN0b3J5TWVzc2FnZShlLHQsbixpLHIscyl9LHR9KEdyKSx5cz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5fY29udGV4dD1lfXJldHVybiBlLnByb3RvdHlwZS5fX2dldENvbnRleHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29udGV4dH0sZS5wcm90b3R5cGUuZ2V0TmF2aUluZm89ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29udGV4dC5nZXRJbmZvRnJvbUNhY2hlKCl9LGUucHJvdG90eXBlLmdldENvcmVWZXJzaW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbnRleHQuY29yZVZlcnNpb259LGUucHJvdG90eXBlLmdldEFQSVZlcnNpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29udGV4dC5hcGlWZXJzaW9ufSxlLnByb3RvdHlwZS5nZXRBcHBrZXk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29udGV4dC5hcHBrZXl9LGUucHJvdG90eXBlLmdldEN1cnJlbnRJZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb250ZXh0LmdldEN1cnJlbnRVc2VySWQoKX0sZS5wcm90b3R5cGUuZ2V0Q29ubmVjdGlvblN0YXR1cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb250ZXh0LmdldENvbm5lY3Rpb25TdGF0dXMoKX0sZS5wcm90b3R5cGUuZ2V0RGV2aWNlSWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29udGV4dC5nZXREZXZpY2VJZCgpfSxlLnByb3RvdHlwZS5zZW5kTWVzc2FnZT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHRoaXMuX2NvbnRleHQuc2VuZE1lc3NhZ2UoZSx0LG4pfSxlLnByb3RvdHlwZS5yZWdpc3Rlck1lc3NhZ2VUeXBlPWZ1bmN0aW9uKGUsdCxuLGkpe3ZvaWQgMD09PWkmJihpPVtdKSx0aGlzLl9jb250ZXh0LnJlZ2lzdGVyTWVzc2FnZVR5cGUoZSx0LG4saSl9LGUucHJvdG90eXBlLmdldFNlcnZlclRpbWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29udGV4dC5nZXRTZXJ2ZXJUaW1lKCl9LGUucHJvdG90eXBlLmdldFJUQ0pvaW5lZFVzZXJJbmZvPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9jb250ZXh0LmdldFJUQ0pvaW5lZFVzZXJJbmZvKGUpfSxlfSgpLG1zPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXtyZXR1cm4gbnVsbCE9PWUmJmUuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiBOKHQsZSksdC5wcm90b3R5cGUuZ2V0TmF2aUluZm89ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29udGV4dC5nZXRJbmZvRnJvbUNhY2hlKCl9LHQucHJvdG90eXBlLmpvaW5SVENSb29tPWZ1bmN0aW9uKGUsdCxuLGkscixzKXtyZXR1cm4gdGhpcy5fY29udGV4dC5qb2luUlRDUm9vbShlLHQsbixpLHIscyl9LHQucHJvdG90eXBlLnF1aXRSVENSb29tPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9jb250ZXh0LnF1aXRSVENSb29tKGUpfSx0LnByb3RvdHlwZS5ydGNQaW5nPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdGhpcy5fY29udGV4dC5ydGNQaW5nKGUsdCxuKX0sdC5wcm90b3R5cGUuZ2V0UlRDUm9vbUluZm89ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2NvbnRleHQuZ2V0UlRDUm9vbUluZm8oZSl9LHQucHJvdG90eXBlLmdldFJUQ1VzZXJJbmZvTGlzdD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fY29udGV4dC5nZXRSVENVc2VySW5mb0xpc3QoZSl9LHQucHJvdG90eXBlLmdldFJUQ1VzZXJJbmZvPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9jb250ZXh0LmdldFJUQ1VzZXJJbmZvKGUpfSx0LnByb3RvdHlwZS5zZXRSVENVc2VySW5mbz1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHRoaXMuX2NvbnRleHQuc2V0UlRDVXNlckluZm8oZSx0LG4pfSx0LnByb3RvdHlwZS5yZW1vdmVSVENVc2VySW5mbz1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLl9jb250ZXh0LnJlbW92ZVJUQ1VzZXJJbmZvKGUsdCl9LHQucHJvdG90eXBlLnNldFJUQ0RhdGE9ZnVuY3Rpb24oZSx0LG4saSxyLHMpe3JldHVybiB0aGlzLl9jb250ZXh0LnNldFJUQ0RhdGEoZSx0LG4saSxyLHMpfSx0LnByb3RvdHlwZS5zZXRSVENUb3RhbFJlcz1mdW5jdGlvbihlLHQsbixpLHIpe3JldHVybiB0aGlzLl9jb250ZXh0LnNldFJUQ1RvdGFsUmVzKGUsdCxuLGkscil9LHQucHJvdG90eXBlLnNldFJUQ0NETlVyaXM9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB0aGlzLl9jb250ZXh0LnNldFJUQ0NETlVyaXMoZSx0LG4pfSx0LnByb3RvdHlwZS5nZXRSVENEYXRhPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiB0aGlzLl9jb250ZXh0LmdldFJUQ0RhdGEoZSx0LG4saSl9LHQucHJvdG90eXBlLnJlbW92ZVJUQ0RhdGE9ZnVuY3Rpb24oZSx0LG4saSxyKXtyZXR1cm4gdGhpcy5fY29udGV4dC5yZW1vdmVSVENEYXRhKGUsdCxuLGkscil9LHQucHJvdG90eXBlLnNldFJUQ091dERhdGE9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIHRoaXMuX2NvbnRleHQuc2V0UlRDT3V0RGF0YShlLHQsbixpKX0sdC5wcm90b3R5cGUuZ2V0UlRDT3V0RGF0YT1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLl9jb250ZXh0LmdldFJUQ091dERhdGEoZSx0KX0sdC5wcm90b3R5cGUuZ2V0UlRDVG9rZW49ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB0aGlzLl9jb250ZXh0LmdldFJUQ1Rva2VuKGUsdCxuKX0sdC5wcm90b3R5cGUuc2V0UlRDU3RhdGU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5fY29udGV4dC5zZXRSVENTdGF0ZShlLHQpfSx0LnByb3RvdHlwZS5nZXRSVENVc2VyTGlzdD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fY29udGV4dC5nZXRSVENVc2VyTGlzdChlKX0sdC5wcm90b3R5cGUuam9pbkxpdmluZ1Jvb21Bc0F1ZGllbmNlPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdGhpcy5fY29udGV4dC5qb2luTGl2aW5nUm9vbUFzQXVkaWVuY2UoZSx0LG4pfSx0LnByb3RvdHlwZS5xdWl0TGl2aW5nUm9vbUFzQXVkaWVuY2U9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2NvbnRleHQucXVpdExpdmluZ1Jvb21Bc0F1ZGllbmNlKGUpfSx0LnByb3RvdHlwZS5ydGNJZGVudGl0eUNoYW5nZT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHRoaXMuX2NvbnRleHQucnRjSWRlbnRpdHlDaGFuZ2UoZSx0LG4pfSx0LnByb3RvdHlwZS5yZXF1ZXN0Um9vbVBLPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9jb250ZXh0LnJlcXVlc3RSb29tUEsoZSl9LHQucHJvdG90eXBlLmNhbmNlbFJvb21QSz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fY29udGV4dC5jYW5jZWxSb29tUEsoZSl9LHQucHJvdG90eXBlLnJlc3BvbnNlUm9vbVBLPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9jb250ZXh0LnJlc3BvbnNlUm9vbVBLKGUpfSx0LnByb3RvdHlwZS5lbmRSb29tUEs9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2NvbnRleHQuZW5kUm9vbVBLKGUpfSx0fSh5cyksdnM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBlLmNvbXByZXNzPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD10aGlzLG49e30saT0wO2k8ZS5sZW5ndGgtMTtpKyspe3ZhciByPWUuY2hhckF0KGkpK2UuY2hhckF0KGkrMSk7bi5oYXNPd25Qcm9wZXJ0eShyKT9uW3JdLnB1c2goaSk6bltyXT1baV19Zm9yKHZhciBzPVtdLG89W10sYT1mdW5jdGlvbigpe2lmKG8ubGVuZ3RoPjApe3ZhciBlPW8uam9pbihcIlwiKTtpZihvPVtdLGUubGVuZ3RoPjI2KXt2YXIgbj10Lm51bWJlckVuY29kZShlLmxlbmd0aCksaT1TdHJpbmcuZnJvbUNoYXJDb2RlKHQuZGF0YVR5cGUuTm9ybWFsRXh0fG4ubGVuZ3RoKTtzLnB1c2goaStuKX1lbHNle3ZhciByPVN0cmluZy5mcm9tQ2hhckNvZGUodC5kYXRhVHlwZS5Ob3JtYWx8ZS5sZW5ndGgpO3MucHVzaChyKX1zLnB1c2goZSl9fSx1PTA7dTxlLmxlbmd0aDspe3ZhciBjPXQuaW5kZXhPZihuLGUsdSk7aWYoYy5sZW5ndGg8MilvLnB1c2goZS5jaGFyQXQodSsrKSk7ZWxzZSBpZihjLmxlbmd0aDw0KW8ucHVzaChlLnN1YnN0cih1LGMubGVuZ3RoKSksdSs9Yy5sZW5ndGg7ZWxzZXt2YXIgaD10Lm51bWJlckVuY29kZSh1LWMub2Zmc2V0KSxsPXQubnVtYmVyRW5jb2RlKGMubGVuZ3RoKTtpZihoLmxlbmd0aCtsLmxlbmd0aD49Yy5sZW5ndGgpby5wdXNoKGUuc3Vic3RyKHUsYy5sZW5ndGgpKSx1Kz1jLmxlbmd0aDtlbHNle2EoKTt2YXIgZD1TdHJpbmcuZnJvbUNoYXJDb2RlKHQuZGF0YVR5cGUuQ29tcHJlc3NlZHxoLmxlbmd0aDw8MnxsLmxlbmd0aCk7cy5wdXNoKGQraCtsKSx1Kz1jLmxlbmd0aH19fWEoKTt2YXIgZj10Lm51bWJlckVuY29kZShlLmxlbmd0aCkscD1TdHJpbmcuZnJvbUNoYXJDb2RlKHQuZGF0YVR5cGUuVGFpbHxmLmxlbmd0aCk7cmV0dXJuIHMucHVzaChwK2YpLHMuam9pbihcIlwiKX0sZS51bmNvbXByZXNzPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj0wLGk9XCJcIjtlOmRve3ZhciByPWUuY2hhckNvZGVBdChuKyspLHM9ciZ0LmRhdGFUeXBlLk1hcmssbz0xNSZyLGE9dm9pZCAwO3N3aXRjaChzKXtjYXNlIHQuZGF0YVR5cGUuQ29tcHJlc3NlZDp2YXIgdT1vPj4yLGM9MyZvO2lmKDA9PT11fHwwPT09Yyl0aHJvdyBuZXcgRXJyb3IoXCJEYXRhIHBhcnNpbmcgZXJyb3IsYXQgXCIrbik7dmFyIGg9dC5udW1iZXJEZWNvZGUoZS5zdWJzdHIobix1KSksbD10Lm51bWJlckRlY29kZShlLnN1YnN0cihuKz11LGMpKTtpZigoaD1pLmxlbmd0aC1oKStsPmkubGVuZ3RoKXRocm93IG5ldyBFcnJvcihcIkRhdGEgcGFyc2luZyBlcnJvcixhdCBcIituKTtuKz1jLGkrPWkuc3Vic3RyKGgsbCk7YnJlYWs7Y2FzZSB0LmRhdGFUeXBlLlRhaWw6aWYoKGE9dC5udW1iZXJEZWNvZGUoZS5zdWJzdHIobixvKSkpIT09aS5sZW5ndGgpdGhyb3cgY29uc29sZS5sb2coaS5sZW5ndGgpLGNvbnNvbGUubG9nKGEpLG5ldyBFcnJvcihcIkRhdGEgcGFyc2luZyBlcnJvcixhdCBcIituKTtuKz1vO2JyZWFrIGU7Y2FzZSB0LmRhdGFUeXBlLk5vcm1hbEV4dDphPXQubnVtYmVyRGVjb2RlKGUuc3Vic3RyKG4sbykpLGkrPWUuc3Vic3RyKG4rPW8sYSksbis9YTticmVhaztjYXNlIHQuZGF0YVR5cGUuTm9ybWFsOmkrPWUuc3Vic3RyKG4sbyksbis9bzticmVhaztjYXNlIHQuZGF0YVR5cGUuTWFyazppZihvPjEwKXRocm93IG5ldyBFcnJvcihcIkRhdGEgcGFyc2luZyBlcnJvcixhdCBcIituKTtpKz1lLnN1YnN0cihuLDE2K28pLG4rPTE2K287YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoXCJEYXRhIHBhcnNpbmcgZXJyb3IsYXQgXCIrbitcIiBoZWFkZXI6XCIrcyl9fXdoaWxlKG48ZS5sZW5ndGgpO3JldHVybiBpfSxlLmluZGV4T2Y9ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXtsZW5ndGg6MCxvZmZzZXQ6LTF9O2lmKHQubGVuZ3RoLG4+PXQubGVuZ3RoLTEpcmV0dXJuIGk7dmFyIHI9ZVt0LmNoYXJBdChuKSt0LmNoYXJBdChuKzEpXTtpZihyWzBdPT09bilyZXR1cm4gaTtmb3IodmFyIHM9dC5sZW5ndGgtbixvPTAsYT1yLmxlbmd0aDtvPGE7bysrKXt2YXIgdT1yW29dLGM9bi11O2lmKCEoYz50aGlzLm1heCkpe3ZhciBoPU1hdGgubWluKHMsYyk7aWYoaDw9aS5sZW5ndGgpYnJlYWs7aWYoIShpLmxlbmd0aD4yJiZ0LmNoYXJBdCh1K2kubGVuZ3RoLTEpIT09dC5jaGFyQXQobitpLmxlbmd0aC0xKSkpe2Zvcih2YXIgbD0yLGQ9bDtkPGgmJnQuY2hhckF0KHUrZCk9PT10LmNoYXJBdChuK2QpO2QrKylsKys7bD49aS5sZW5ndGgmJihpLmxlbmd0aD1sLGkub2Zmc2V0PXUpfX19cmV0dXJuIGl9LGUubnVtYmVyRW5jb2RlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1bXSxpPTA7ZG97aT1lJXQuc2NhbGUsbi5wdXNoKHQuY2hhcnMuY2hhckF0KGkpKSxlPShlLWkpL3Quc2NhbGV9d2hpbGUoZT4wKTtyZXR1cm4gbi5qb2luKFwiXCIpfSxlLm51bWJlckRlY29kZT1mdW5jdGlvbihlKXtmb3IodmFyIHQ9MCxuPTAsaT1lLmxlbmd0aC0xO2k+PTA7aS0tKXtpZigtMT09PShuPXRoaXMuY2hhcnMuaW5kZXhPZihlLmNoYXJBdChpKSkpKXRocm93IG5ldyBFcnJvcignZGVjb2RlIG51bWJlciBlcnJvciwgZGF0YSBpcyBcIicrZSsnXCInKTt0PXQqdGhpcy5zY2FsZStufXJldHVybiB0fSxlLmRhdGFUeXBlPXtUYWlsOjQ4LENvbXByZXNzZWQ6NjQsTm9ybWFsRXh0OjgwLE5vcm1hbDo5NixNYXJrOjExMn0sZS5jaGFycz1cIjAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6XCIsZS5zY2FsZT1lLmNoYXJzLmxlbmd0aCxlLm1heD0yMzgzMjcsZX0oKSxFcz0xLFRzPSExLElzPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBsb2NhdGlvbiYmXCJodHRwczovL1wiPT09bG9jYXRpb24ucHJvdG9jb2w/XCJodHRwczovL1wiOlwiaHR0cDovL1wiLENzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLmluZm89ZSx0aGlzLmxvZ1VybD1cImxvZ2NvbGxlY3Rpb24ucm9uZ2h1Yi5jb21cIix0aGlzLmxldmVsPTEsdGhpcy5pdHY9MzAsdGhpcy50aW1lcz01LHRoaXMuZGV2aWNlSWQ9XCJcIix0aGlzLmRldmljZUluZm89XCJcIix0aGlzLmxvZ1N3aXRjaD0wLHRoaXMubG9nVXJsPWUubG9nUG9saWN5LnVybHx8dGhpcy5sb2dVcmwsdGhpcy5sZXZlbD1lLmxvZ1BvbGljeS5sZXZlbHx8dGhpcy5sZXZlbCx0aGlzLml0dj1lLmxvZ1BvbGljeS5pdHZ8fHRoaXMuaXR2LHRoaXMudGltZXM9ZS5sb2dQb2xpY3kudGltZXN8fHRoaXMudGltZXMsdGhpcy5kZXZpY2VJZD1kcyhlLnJ1bnRpbWUpLHRoaXMubG9nU3dpdGNoPWUubG9nU3dpdGNoO3ZhciB0PXZ0KGUucnVudGltZSk7dGhpcy5kZXZpY2VJbmZvPXQudHlwZStcInxcIit0LnZlcnNpb24rXCJ8XCIrcGUuc2Vzc2lvbklkLHRoaXMuc3RhcnRSZXBvcnQoKX1yZXR1cm4gZS5pbml0PWZ1bmN0aW9uKHQpe3JldHVybiBUcz0hMCxlLl9pbnN0YW5jZXx8KGUuX2luc3RhbmNlPW5ldyBlKHQpKSxlLl9pbnN0YW5jZX0sZS5nZXRJbnN0YW5jZT1mdW5jdGlvbigpe3JldHVybiBlLl9pbnN0YW5jZX0sZS5wcm90b3R5cGUuc3RhcnRSZXBvcnQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2lmKHRoaXMubG9nU3dpdGNoJiZUcyl7dmFyIHQ9dGhpcy5pdHYqTWF0aC5wb3coMixFcy0xKTtFczx0aGlzLnRpbWVzJiZFcysrLHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7ZS5yZXBvcnRSZWFsdGltZUxvZygpfSksMWUzKnQpfX0sZS5wcm90b3R5cGUucmVwb3J0UmVhbHRpbWVMb2c9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9cGUucmVhbFRpbWVMb2dMaXN0LmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuIHQubGV2ZWw8PWUubGV2ZWx9KSk7aWYoMCE9PXQubGVuZ3RoKXt2YXIgbj12cy5jb21wcmVzcyh0Lm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUuY29udGVudH0pKS5qb2luKFwiXCIpKSxpPVwiXCIrSXMrdGhpcy5sb2dVcmwrXCI/dmVyc2lvbj1cIit0aGlzLmluZm8udmVyc2lvbitcIiZhcHBrZXk9XCIrdGhpcy5pbmZvLmFwcGtleStcIiZ1c2VySWQ9XCIrdGhpcy5pbmZvLnVzZXJJZCtcIiZkZXZpY2VJZD1cIit0aGlzLmRldmljZUlkK1wiJmRldmljZUluZm89XCIrdGhpcy5kZXZpY2VJbmZvK1wiJnBsYXRmb3JtPVdlYlwiO3RoaXMuaW5mby5ydW50aW1lLmh0dHBSZXEoe21ldGhvZDpcIlBPU1RcIix1cmw6aSxib2R5Om59KS50aGVuKChmdW5jdGlvbih0KXtnZS5fX2NsZWFyUmVhbFRpbWVMb2coKSxnZS5kZWJ1ZyhcInJlcG9ydCByZWFsLXRpbWUgbG9nIHN1Y2Nlc3NcIik7dmFyIG49dC5kYXRhO24mJihuPUpTT04ucGFyc2UobiksZS5pdHY9bi5uZXh0VGltZSxlLmxldmVsPW4ubGV2ZWwsZS5sb2dTd2l0Y2g9bi5sb2dTd2l0Y2gsRXM9MSksZS5zdGFydFJlcG9ydCgpfSkpLmNhdGNoKChmdW5jdGlvbih0KXtnZS5kZWJ1ZyhcInJlcG9ydCByZWFsLXRpbWUgbG9nIGVycm9yIC0+IFwiK3QpLGUuc3RhcnRSZXBvcnQoKX0pKX1lbHNlIHRoaXMuc3RhcnRSZXBvcnQoKX0sZS5wcm90b3R5cGUucmVwb3J0RnVsbExvZz1mdW5jdGlvbihlKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHQsbixpLHIscyxvLGEsdSxjLGgsbD10aGlzO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGQpe3N3aXRjaChkLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHQ9ZS5zdGFydFRpbWUsbj1lLmVuZFRpbWUsaT1lLnBsYXRmb3JtLHI9ZS5sb2dJZCxzPWUudXJpLG89cS5nZXRJbnN0YW5jZSgpLGdlLmRlYnVnKFwicmVjZWl2ZWQgcmVwb3J0IGxvZyBtc2csIFwiK2kudG9Mb3dlckNhc2UoKSxvKSxcIndlYlwiPT09aS50b0xvd2VyQ2FzZSgpJiZvP3Q+bj8oZ2Uud2FybihcInJlcG9ydCBlcnJvcjogVGhlIHN0YXJ0IHRpbWUoXCIrdCtcIikgY2Fubm90IGJlIGdyZWF0ZXIgdGhhbiB0aGUgZW5kIHRpbWUoXCIrdCtcIilcIiksWzJdKTpbNCxnZS5fX2luc2VydExvZ0ludG9EYXRhYmFzZSgpXTpbMl07Y2FzZSAxOnJldHVybiBkLnNlbnQoKSxbNCxvLmdldFJhbmdlRGF0YShCLFwidGltZVwiLHQsbildO2Nhc2UgMjpyZXR1cm4gYT0oYT1kLnNlbnQoKSkuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4hZS51c2VySWR8fGUudXNlcklkPT09bC5pbmZvLnVzZXJJZH0pKSx1PXZzLmNvbXByZXNzKGEubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gZS5jb250ZW50fSkpLmpvaW4oXCJcIil8fFwibm8gZGF0YVwiKSw1ZTMsYz0xLChoPWZ1bmN0aW9uKCl7aWYoIShjPjMpJiZUcyl7dmFyIGU9c3x8bC5sb2dVcmwsdD1cIlwiK0lzK2UrXCI/dmVyc2lvbj1cIitsLmluZm8udmVyc2lvbitcIiZhcHBrZXk9XCIrbC5pbmZvLmFwcGtleStcIiZ1c2VySWQ9XCIrbC5pbmZvLnVzZXJJZCtcIiZsb2dJZD1cIityK1wiJmRldmljZUlkPVwiK2wuZGV2aWNlSWQrXCImZGV2aWNlSW5mbz1cIitsLmRldmljZUluZm8rXCImcGxhdGZvcm09V2ViXCIsbj01ZTMqKGMtMSk7YysrLHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7VHMmJmwuaW5mby5ydW50aW1lLmh0dHBSZXEoe3VybDp0LG1ldGhvZDpcIlBPU1RcIixib2R5OnV9KS50aGVuKChmdW5jdGlvbigpe2dlLmRlYnVnKFwicmVwb3J0IGZ1bGwgbG9nIHN1Y2Nlc3MhXCIpfSkpLmNhdGNoKChmdW5jdGlvbihlKXtoKCksZ2Uud2FybihcInJlcG9ydCBmdWxsIGxvZyBlcnJvciAtPiBcIitlKX0pKX0pLG4pfX0pKCksWzJdfX0pKX0pKX0sZS5wcm90b3R5cGUuZGlzdHJveT1mdW5jdGlvbigpe0VzPTEsVHM9ITF9LGV9KCk7ZnVuY3Rpb24gUnMoZSl7cmV0dXJuIE9iamVjdC5hc3NpZ24oe30sZSl9dmFyIFNzLE5zPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3ZhciBuO3RoaXMuX3J1bnRpbWU9ZSx0aGlzLl90b2tlbj1cIlwiLHRoaXMuX3BsdWdpbkNvbnRleHRRdWV1ZT1bXSx0aGlzLl9wbHVnaW5JbnN0YW5zZU1hcD17fSx0aGlzLmNvcmVWZXJzaW9uPVwiNS4yLjFcIix0aGlzLl92ZXJzaW9uSW5mbz17fSx0aGlzLl90eXBpbmdJbmZvPXt9LHRoaXMuX2lzSW50ZXJuYWxDb25uZWN0ZWQ9ITEsdGhpcy5fY29ubmVjdGlvblN0YXR1cz1JZS5ESVNDT05ORUNURUQsdGhpcy5fY2FuUmVkaXJlY3RDb25uZWN0PSExLHRoaXMuX3dhdGNoZXI9e21lc3NhZ2U6dm9pZCAwLGJhdGNoTWVzc2FnZTp2b2lkIDAsY29udmVyc2F0aW9uU3RhdGU6dm9pZCAwLGNoYXRyb29tU3RhdGU6dm9pZCAwLGNvbm5lY3Rpb25TdGF0ZTp2b2lkIDAscnRjSW5uZXJXYXRjaGVyOnZvaWQgMCxleHBhbnNpb246dm9pZCAwLHRhZzp2b2lkIDAsY29udmVyc2F0aW9uVGFnQ2hhbmdlZDp2b2lkIDAscHVsbEZpbmlzaGVkOnZvaWQgMCxvbkNvbm5lY3Rpbmc6dm9pZCAwLG9uQ29ubmVjdGVkOnZvaWQgMCxvbkRpc2Nvbm5lY3Q6dm9pZCAwLG9uU3VzcGVuZDp2b2lkIDAscmVhZFJlY2VpcHRSZWNlaXZlZDp2b2lkIDAsbWVzc2FnZVJlY2VpcHRSZXF1ZXN0OnZvaWQgMCxtZXNzYWdlUmVjZWlwdFJlc3BvbnNlOnZvaWQgMCx0eXBpbmdTdGF0ZTp2b2lkIDAsbWVzc2FnZUJsb2NrZWQ6dm9pZCAwLHVsdHJhR3JvdXBFbmFibGU6dm9pZCAwLG9wZXJhdGVTdGF0dXM6dm9pZCAwLHVsdHJhR3JvdXBNZXNzYWdlRXhwYW5zaW9uVXBkYXRlZDp2b2lkIDAsdWx0cmFHcm91cE1lc3NhZ2VNb2RpZmllZDp2b2lkIDAsdWx0cmFHcm91cE1lc3NhZ2VSZWNhbGxlZDp2b2lkIDB9LHRoaXMuX3R5cGluZ0ludGVybmFsVGltZXI9LTEsdGhpcy5fdHlwaW5nRXhwaXJlVGltZT0yZTMsdGhpcy5fdHlwaW5nQ2hhbmdlZExpc3Q9W10sdGhpcy5nZXRDaGF0Um9vbUhpc3RvcnlNZXNzYWdlcz10aGlzLmdldENoYXRyb29tSGlzdG9yeU1lc3NhZ2VzLHRoaXMuX29wdGlvbnM9T2JqZWN0LmFzc2lnbih7fSx0KSx0aGlzLmFwcGtleT10aGlzLl9vcHRpb25zLmFwcGtleSx0aGlzLmFwaVZlcnNpb249dGhpcy5fb3B0aW9ucy5hcGlWZXJzaW9uLHRoaXMuX29wdGlvbnMudHlwaW5nRXhwaXJlVGltZSYmKHRoaXMuX29wdGlvbnMudHlwaW5nRXhwaXJlVGltZTwyZTM/dGhpcy5fdHlwaW5nRXhwaXJlVGltZT0yZTM6dGhpcy5fb3B0aW9ucy50eXBpbmdFeHBpcmVUaW1lPjZlMz90aGlzLl90eXBpbmdFeHBpcmVUaW1lPTZlMzp0aGlzLl90eXBpbmdFeHBpcmVUaW1lPXRoaXMuX29wdGlvbnMudHlwaW5nRXhwaXJlVGltZSksdGhpcy5fb3B0aW9ucy5uYXZpZ2F0b3JzPXRoaXMuX29wdGlvbnMubmF2aWdhdG9ycy5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybi9eaHR0cHM/OlxcL1xcLy8udGVzdChlKX0pKSx0aGlzLl9vcHRpb25zLm5hdmlnYXRvcnM9dGhpcy5fb3B0aW9ucy5uYXZpZ2F0b3JzLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZSgvXFwvJC9nLFwiXCIpfSkpLDA9PT10aGlzLl9vcHRpb25zLm5hdmlnYXRvcnMubGVuZ3RoJiYobj10aGlzLl9vcHRpb25zLm5hdmlnYXRvcnMpLnB1c2guYXBwbHkobix1KTt2YXIgaT17c3RhdHVzOnRoaXMuX2Nvbm5lY3Rpb25TdGF0dXNMaXN0ZW5lci5iaW5kKHRoaXMpLGJhdGNoTWVzc2FnZTp0aGlzLl9iYXRjaE1lc3NhZ2VSZWNlaXZlci5iaW5kKHRoaXMpLGNoYXRyb29tOnRoaXMuX2NoYXRyb29tSW5mb0xpc3RlbmVyLmJpbmQodGhpcyksY29udmVyc2F0aW9uOnRoaXMuX2NvbnZlcnNhdGlvbkluZm9MaXN0ZW5lci5iaW5kKHRoaXMpLGV4cGFuc2lvbjp0aGlzLl9leHBhbnNpb25JbmZvTGlzdGVuZXIuYmluZCh0aGlzKSx0YWc6dGhpcy5fdGFnTGlzdGVuZXIuYmluZCh0aGlzKSxjb252ZXJzYXRpb25UYWc6dGhpcy5fY29udmVyc2F0aW9uVGFnTGlzdGVuZXIuYmluZCh0aGlzKSxvblJUQ0RhdGFDaGFuZ2U6dGhpcy5fcnRjRGF0YUNoYW5nZS5iaW5kKHRoaXMpLHB1bGxGaW5pc2hlZDp0aGlzLl9wdWxsRmluaXNoZWRMaXN0ZW5lci5iaW5kKHRoaXMpLHVsdHJhR3JvdXBFbmFibGU6dGhpcy5fdWx0cmFHcm91cEVuYWJsZUxpc3RlbmVyLmJpbmQodGhpcyksb3BlcmF0ZVN0YXR1czp0aGlzLl9vcGVyYXRlU3RhdHVzTGlzdGVuZXIuYmluZCh0aGlzKSx1bHRyYUdyb3VwTWVzc2FnZUV4cGFuc2lvblVwZGF0ZWQ6dGhpcy5fdWx0cmFHcm91cE1lc3NhZ2VFeHBhbnNpb25VcGRhdGVkTGlzdGVuZXIuYmluZCh0aGlzKSx1bHRyYUdyb3VwTWVzc2FnZU1vZGlmaWVkOnRoaXMuX3VsdHJhR3JvdXBNZXNzYWdlTW9kaWZpZWRMaXN0ZW5lci5iaW5kKHRoaXMpLHVsdHJhR3JvdXBNZXNzYWdlUmVjYWxsZWQ6dGhpcy5fdWx0cmFHcm91cE1lc3NhZ2VSZWNhbGxlZExpc3RlbmVyLmJpbmQodGhpcyl9O3RoaXMuX2VuZ2luZT1tdCgpP25ldyBSQ0NwcEVuZ2luZShlLGksdGhpcy5fb3B0aW9ucyk6bmV3IF9zKGUsaSx0aGlzLl9vcHRpb25zKX1yZXR1cm4gZS5pbml0PWZ1bmN0aW9uKHQsbil7cmV0dXJuIGdlLnNldExvZ0xldmVsKG4ubG9nTGV2ZWwpLGdlLnNldExvZ1N0ZG91dChuLmxvZ1N0ZG91dCksKG4uaW5kZXhEQlN3aXRjaHx8cmUobi5pbmRleERCU3dpdGNoKSkmJnEuaW5pdCgpLGdlLmRlYnVnKFwiQVBJQ29udGV4dC5pbml0ID0+XCIsbi5hcHBrZXksbi5uYXZpZ2F0b3JzKSx0aGlzLl9jb250ZXh0PyhnZS5lcnJvcihcIlJlcGVhdCBpbml0aWFsaXplIVwiKSx0aGlzLl9jb250ZXh0KTooZ2Uud2FybihcIlJDRW5naW5lIENvbW1pdDpcIixcIjVhZjRjMjBmZmIxNjE0NjEzMTk1MzJmNzAwZTc2MDNjOWNkOTg5M2NcIiksdGhpcy5fY29udGV4dD1uZXcgZSh0LG4pLGdlLl9faW5zZXJ0TG9nSW50b0RhdGFiYXNlKCksdGhpcy5fY29udGV4dCl9LGUuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMuX2NvbnRleHQmJih0aGlzLl9jb250ZXh0Ll9kZXN0cm95KCksdGhpcy5fY29udGV4dD12b2lkIDApfSxlLnByb3RvdHlwZS5pbnN0YWxsPWZ1bmN0aW9uKGUsdCl7aWYodGhpcy5fcGx1Z2luSW5zdGFuc2VNYXBbZS50YWddKXJldHVybiBnZS53YXJuKFwiUmVwZWF0IGluc3RhbGwgcGx1Z2luOiBcIitlLnRhZyksdGhpcy5fcGx1Z2luSW5zdGFuc2VNYXBbZS50YWddO3ZhciBuPVwiUkNSVENcIj09PWUudGFnP25ldyBtcyh0aGlzKTpuZXcgeXModGhpcyksaT1udWxsO3RyeXtpZighZS52ZXJpZnkodGhpcy5fcnVudGltZSkpcmV0dXJuIG51bGw7aT1lLnNldHVwKG4sdGhpcy5fcnVudGltZSx0KX1jYXRjaChlKXtnZS5lcnJvcihcImluc3RhbGwgcGx1Z2luIGVycm9yIVxcblwiLGUpfXJldHVybltcIlJDUlRDXCIsXCJSQ0NhbGxcIl0uaW5jbHVkZXMoZS50YWcpJiZlLnZlcnNpb24mJmUubmFtZSYmKHRoaXMuX3ZlcnNpb25JbmZvW2UubmFtZV09ZS52ZXJzaW9uKSxpJiZ0aGlzLl9wbHVnaW5Db250ZXh0UXVldWUucHVzaChuKSxpJiYodGhpcy5fcGx1Z2luSW5zdGFuc2VNYXBbZS50YWddPWkpLGl9LGUucHJvdG90eXBlLl9oYW5kbGVSZWRpcmVjdD1mdW5jdGlvbigpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXM7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24obil7c3dpdGNoKG4ubGFiZWwpe2Nhc2UgMDpyZXR1cm4gZ2UuZGVidWcoXCJfaGFuZGxlUmVkaXJjdFwiLHRoaXMuX3Rva2VuKSxbNCx0aGlzLmNvbm5lY3QodGhpcy5fdG9rZW4sITApXTtjYXNlIDE6cmV0dXJuKGU9bi5zZW50KCkuY29kZSkhPT1FZS5TVUNDRVNTJiZ0aGlzLl9jYW5SZWRpcmVjdENvbm5lY3QmJih0aGlzLl9oYW5kbGVTdXNwZW5kKGUpLHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7dC5faGFuZGxlUmVkaXJlY3QoKX0pLDVlMykpLFsyXX19KSl9KSl9LGUucHJvdG90eXBlLl9jb25uZWN0aW9uU3RhdHVzTGlzdGVuZXI9ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKG4pe3JldHVybiBlPT09SWUuUkVESVJFQ1Q/KHRoaXMuX2NhblJlZGlyZWN0Q29ubmVjdD0hMCx0aGlzLl9oYW5kbGVTdXNwZW5kKGUpLHRoaXMuX2hhbmRsZVJlZGlyZWN0KCkpOmU9PT1JZS5CTE9DS0VEfHxlPT09SWUuS0lDS0VEX09GRkxJTkVfQllfT1RIRVJfQ0xJRU5UfHxlPT09SWUuRElTQ09OTkVDVF9CWV9TRVJWRVI/KHRoaXMuX2NhblJlZGlyZWN0Q29ubmVjdD0hMSx0aGlzLl9oYW5kbGVEaXNjb25uZWN0KGUpKTplPT09SWUuQ09OTkVDVElORz90aGlzLl9oYW5kbGVDb25uZWN0aW5nKCk6ZT09PUllLkNPTk5FQ1RFRD90aGlzLl9oYW5kbGVDb25uZWN0ZWQoKTplPT09SWUuRElTQ09OTkVDVEVEP3RoaXMuX2hhbmRsZURpc2Nvbm5lY3QoZSk6ZT09PUllLk5FVFdPUktfVU5BVkFJTEFCTEUmJnRoaXMuX2hhbmRsZVN1c3BlbmQoZSksdGhpcy5fY29ubmVjdGlvblN0YXR1cz1lLChudWxsPT09KHQ9dGhpcy5fd2F0Y2hlci5ydGNJbm5lcldhdGNoZXIpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LnN0YXR1cykmJnRoaXMuX3dhdGNoZXIucnRjSW5uZXJXYXRjaGVyLnN0YXR1cyhlKSx0aGlzLl9wbHVnaW5Db250ZXh0UXVldWUuZm9yRWFjaCgoZnVuY3Rpb24odCl7dC5vbmNvbm5lY3Rpb25zdGF0ZWNoYW5nZSYmdC5vbmNvbm5lY3Rpb25zdGF0ZWNoYW5nZShlKX0pKSx0aGlzLl93YXRjaGVyLmNvbm5lY3Rpb25TdGF0ZSYmdGhpcy5fd2F0Y2hlci5jb25uZWN0aW9uU3RhdGUoZSksWzJdfSkpfSkpfSxlLnByb3RvdHlwZS5faGFuZGxlQ29ubmVjdGluZz1mdW5jdGlvbigpe3RoaXMuX3dhdGNoZXIub25Db25uZWN0aW5nJiZ0aGlzLl93YXRjaGVyLm9uQ29ubmVjdGluZygpfSxlLnByb3RvdHlwZS5faGFuZGxlQ29ubmVjdGVkPWZ1bmN0aW9uKCl7dGhpcy5fd2F0Y2hlci5vbkNvbm5lY3RlZCYmdGhpcy5fd2F0Y2hlci5vbkNvbm5lY3RlZCgpfSxlLnByb3RvdHlwZS5faGFuZGxlRGlzY29ubmVjdD1mdW5jdGlvbihlKXt0aGlzLl93YXRjaGVyLm9uRGlzY29ubmVjdCYmdGhpcy5fd2F0Y2hlci5vbkRpc2Nvbm5lY3QoZSl9LGUucHJvdG90eXBlLl9oYW5kbGVTdXNwZW5kPWZ1bmN0aW9uKGUpe3RoaXMuX3dhdGNoZXIub25TdXNwZW5kJiZ0aGlzLl93YXRjaGVyLm9uU3VzcGVuZChlKX0sZS5wcm90b3R5cGUuX21lc3NhZ2VSZWNlaXZlcj1mdW5jdGlvbihlLHQsbil7dmFyIGkscixzO2lmKChlLmNvbnZlcnNhdGlvblR5cGU9PT1qLlJUQ19ST09NfHxPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoWWUsZS5tZXNzYWdlVHlwZSkpJiZ0aGlzLl93YXRjaGVyLnJ0Y0lubmVyV2F0Y2hlciYmdGhpcy5fd2F0Y2hlci5ydGNJbm5lcldhdGNoZXIubWVzc2FnZSl0aGlzLl93YXRjaGVyLnJ0Y0lubmVyV2F0Y2hlci5tZXNzYWdlKFJzKGUpKTtlbHNlIGlmKC0xPT09W1wiUkM6Q2hybUpvaW5OdGZcIixcIlJDOkNocm1RdWl0TnRmXCJdLmluZGV4T2YoZS5tZXNzYWdlVHlwZSl8fFwiZnVuY3Rpb25cIiE9dHlwZW9mIHRoaXMuX3dhdGNoZXIuY2hhdHJvb21TdGF0ZSl7aWYoXCJSQzpDaHJtTWVtQ2hhbmdlXCIhPT1lLm1lc3NhZ2VUeXBlKXtpZihlLm1lc3NhZ2VUeXBlIT09U2UuVFlQSU5HX1NUQVRVU3x8KHRoaXMuX2FkZFR5cGluZ0luZm8oUnMoZSkpLCF0aGlzLl93YXRjaGVyLnR5cGluZ1N0YXRlKSlpZihlLm1lc3NhZ2VUeXBlIT09U2UuTE9HX0NPTU1BTkR8fFwicm9uZ2Nsb3Vkc3lzdGVtXCIhPT1lLnNlbmRlclVzZXJJZClpZihlLm1lc3NhZ2VUeXBlIT09U2UuSU5URVJDRVBUKXtpZighdGhpcy5fcGx1Z2luQ29udGV4dFF1ZXVlLnNvbWUoKGZ1bmN0aW9uKHQpe2lmKCF0Lm9ubWVzc2FnZSlyZXR1cm4hMTt0cnl7cmV0dXJuIHQub25tZXNzYWdlKFJzKGUpKX1jYXRjaChlKXtyZXR1cm4gZ2UuZXJyb3IoXCJwbHVnaW4gZXJyb3IgPT5cIixlKSwhMX19KSkpaWYodGhpcy5fd2F0Y2hlci5tZXNzYWdlJiZ0aGlzLl93YXRjaGVyLm1lc3NhZ2UoUnMoZSksdCxuKSxcIlJDOlJlYWROdGZcIiE9PWUubWVzc2FnZVR5cGUpaWYoXCJSQzpSUlJlcU1zZ1wiIT09ZS5tZXNzYWdlVHlwZSl7aWYoXCJSQzpSUlJzcE1zZ1wiIT09ZS5tZXNzYWdlVHlwZSlyZXR1cm4gZTt2YXIgbz1udWxsPT09KHM9ZS5jb250ZW50KXx8dm9pZCAwPT09cz92b2lkIDA6cy5yZWNlaXB0TWVzc2FnZURpYztvJiZBcnJheS5pc0FycmF5KG9bdGhpcy5fZW5naW5lLmN1cnJlbnRVc2VySWRdKSYmXCJmdW5jdGlvblwiPT10eXBlb2YgdGhpcy5fd2F0Y2hlci5tZXNzYWdlUmVjZWlwdFJlc3BvbnNlJiZ0aGlzLl93YXRjaGVyLm1lc3NhZ2VSZWNlaXB0UmVzcG9uc2Uoe2NvbnZlcnNhdGlvblR5cGU6ZS5jb252ZXJzYXRpb25UeXBlLHRhcmdldElkOmUudGFyZ2V0SWQsY2hhbm5lbElkOmUuY2hhbm5lbElkfSxlLnNlbmRlclVzZXJJZCxvW3RoaXMuX2VuZ2luZS5jdXJyZW50VXNlcklkXSl9ZWxzZVwiZnVuY3Rpb25cIj09dHlwZW9mIHRoaXMuX3dhdGNoZXIubWVzc2FnZVJlY2VpcHRSZXF1ZXN0JiZ0aGlzLl93YXRjaGVyLm1lc3NhZ2VSZWNlaXB0UmVxdWVzdCh7Y29udmVyc2F0aW9uVHlwZTplLmNvbnZlcnNhdGlvblR5cGUsdGFyZ2V0SWQ6ZS50YXJnZXRJZCxjaGFubmVsSWQ6ZS5jaGFubmVsSWR9LGUuY29udGVudC5tZXNzYWdlVUlkLGUuc2VuZGVyVXNlcklkKTtlbHNlXCJmdW5jdGlvblwiPT10eXBlb2YgdGhpcy5fd2F0Y2hlci5yZWFkUmVjZWlwdFJlY2VpdmVkJiZ0aGlzLl93YXRjaGVyLnJlYWRSZWNlaXB0UmVjZWl2ZWQoe2NvbnZlcnNhdGlvblR5cGU6ZS5jb252ZXJzYXRpb25UeXBlLHRhcmdldElkOmUudGFyZ2V0SWQsY2hhbm5lbElkOmUuY2hhbm5lbElkfSxlLmNvbnRlbnQubWVzc2FnZVVJZCxlLmNvbnRlbnQubGFzdE1lc3NhZ2VTZW5kVGltZSl9ZWxzZSB0aGlzLl9NZXNzYWdlQmxvY2tlZExpc3RlbmVyKHtjb252ZXJzYXRpb25UeXBlOmUuY29udmVyc2F0aW9uVHlwZSx0YXJnZXRJZDplLnRhcmdldElkLGNoYW5uZWxJZDplLmNoYW5uZWxJZHx8XCJcIixibG9ja1R5cGU6ZS5jb250ZW50LmludGVyY2VwdFR5cGUsYmxvY2tlZE1lc3NhZ2VVSWQ6ZS5jb250ZW50Lm1zZ1VJZH0pO2Vsc2V7dmFyIGE9ZS5jb250ZW50LHU9YS5zdGFydFRpbWUsYz1hLmVuZFRpbWUsaD1hLnBsYXRmb3JtLGw9YS5sb2dJZCxkPWEudXJpLGY9YS5wYWNrYWdlTmFtZSxwPXtzdGFydFRpbWU6cGFyc2VJbnQodSksZW5kVGltZTpwYXJzZUludChjKSxwbGF0Zm9ybTpoLGxvZ0lkOmwsdXJpOmQscGFja2FnZU5hbWU6Zn07bnVsbD09PShyPUNzLmdldEluc3RhbmNlKCkpfHx2b2lkIDA9PT1yfHxyLnJlcG9ydEZ1bGxMb2cocCl9fWVsc2UgaWYoXCJmdW5jdGlvblwiPT10eXBlb2YgdGhpcy5fd2F0Y2hlci5jaGF0cm9vbVN0YXRlKXt2YXIgZz17fTtBcnJheS5pc0FycmF5KGUuY29udGVudC51c2VyTGlzdCkmJmUuY29udGVudC51c2VyTGlzdC5mb3JFYWNoKChmdW5jdGlvbihlKXtnW2UudXNlcklkXT1lLnN0YXR1c30pKSx0aGlzLl93YXRjaGVyLmNoYXRyb29tU3RhdGUoe3VzZXJDaGFuZ2U6e3VzZXJzOmcsY2hhdHJvb21JZDplLnRhcmdldElkfX0pfX1lbHNlIHRoaXMuX3dhdGNoZXIuY2hhdHJvb21TdGF0ZSh7dXNlckNoYW5nZTp7dXNlcnM6KGk9e30saVtlLnNlbmRlclVzZXJJZF09XCJSQzpDaHJtUXVpdE50ZlwiPT09ZS5tZXNzYWdlVHlwZT9EZS5RVUlUOkRlLkpPSU4saSksY2hhdHJvb21JZDplLnRhcmdldElkfX0pfSxlLnByb3RvdHlwZS5fYmF0Y2hNZXNzYWdlUmVjZWl2ZXI9ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXMscj1bXTtlLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBzPWkuX21lc3NhZ2VSZWNlaXZlcihlLHQsbik7cyYmci5wdXNoKHMpfSkpLHIubGVuZ3RoJiZ0aGlzLl93YXRjaGVyLmJhdGNoTWVzc2FnZSYmdGhpcy5fd2F0Y2hlci5iYXRjaE1lc3NhZ2Uocil9LGUucHJvdG90eXBlLl9jaGF0cm9vbUluZm9MaXN0ZW5lcj1mdW5jdGlvbihlKXt0aGlzLl93YXRjaGVyLmNoYXRyb29tU3RhdGUmJnRoaXMuX3dhdGNoZXIuY2hhdHJvb21TdGF0ZShlKX0sZS5wcm90b3R5cGUuX2NvbnZlcnNhdGlvbkluZm9MaXN0ZW5lcj1mdW5jdGlvbihlKXt0aGlzLl93YXRjaGVyLmNvbnZlcnNhdGlvblN0YXRlJiZ0aGlzLl93YXRjaGVyLmNvbnZlcnNhdGlvblN0YXRlKGUpfSxlLnByb3RvdHlwZS5fZXhwYW5zaW9uSW5mb0xpc3RlbmVyPWZ1bmN0aW9uKGUpe3RoaXMuX3dhdGNoZXIuZXhwYW5zaW9uJiZ0aGlzLl93YXRjaGVyLmV4cGFuc2lvbihlKX0sZS5wcm90b3R5cGUuX3RhZ0xpc3RlbmVyPWZ1bmN0aW9uKCl7dGhpcy5fd2F0Y2hlci50YWcmJnRoaXMuX3dhdGNoZXIudGFnKCl9LGUucHJvdG90eXBlLl9jb252ZXJzYXRpb25UYWdMaXN0ZW5lcj1mdW5jdGlvbigpe3RoaXMuX3dhdGNoZXIuY29udmVyc2F0aW9uVGFnQ2hhbmdlZCYmdGhpcy5fd2F0Y2hlci5jb252ZXJzYXRpb25UYWdDaGFuZ2VkKCl9LGUucHJvdG90eXBlLl90eXBpbmdTdGF0dXNMaXN0ZW5lcj1mdW5jdGlvbihlKXt0aGlzLl93YXRjaGVyLnR5cGluZ1N0YXRlJiZ0aGlzLl93YXRjaGVyLnR5cGluZ1N0YXRlKGUpfSxlLnByb3RvdHlwZS5fcHVsbEZpbmlzaGVkTGlzdGVuZXI9ZnVuY3Rpb24oKXt0aGlzLl93YXRjaGVyLnB1bGxGaW5pc2hlZCYmdGhpcy5fd2F0Y2hlci5wdWxsRmluaXNoZWQoKX0sZS5wcm90b3R5cGUuX01lc3NhZ2VCbG9ja2VkTGlzdGVuZXI9ZnVuY3Rpb24oZSl7dGhpcy5fd2F0Y2hlci5tZXNzYWdlQmxvY2tlZCYmdGhpcy5fd2F0Y2hlci5tZXNzYWdlQmxvY2tlZChlKX0sZS5wcm90b3R5cGUuX3VsdHJhR3JvdXBFbmFibGVMaXN0ZW5lcj1mdW5jdGlvbihlKXt0aGlzLl93YXRjaGVyLnVsdHJhR3JvdXBFbmFibGUmJnRoaXMuX3dhdGNoZXIudWx0cmFHcm91cEVuYWJsZShlKX0sZS5wcm90b3R5cGUuX29wZXJhdGVTdGF0dXNMaXN0ZW5lcj1mdW5jdGlvbihlKXt0aGlzLl93YXRjaGVyLm9wZXJhdGVTdGF0dXMmJnRoaXMuX3dhdGNoZXIub3BlcmF0ZVN0YXR1cyhlKX0sZS5wcm90b3R5cGUuX3VsdHJhR3JvdXBNZXNzYWdlRXhwYW5zaW9uVXBkYXRlZExpc3RlbmVyPWZ1bmN0aW9uKGUpe3RoaXMuX3dhdGNoZXIudWx0cmFHcm91cE1lc3NhZ2VFeHBhbnNpb25VcGRhdGVkJiZ0aGlzLl93YXRjaGVyLnVsdHJhR3JvdXBNZXNzYWdlRXhwYW5zaW9uVXBkYXRlZChlKX0sZS5wcm90b3R5cGUuX3VsdHJhR3JvdXBNZXNzYWdlTW9kaWZpZWRMaXN0ZW5lcj1mdW5jdGlvbihlKXt0aGlzLl93YXRjaGVyLnVsdHJhR3JvdXBNZXNzYWdlTW9kaWZpZWQmJnRoaXMuX3dhdGNoZXIudWx0cmFHcm91cE1lc3NhZ2VNb2RpZmllZChlKX0sZS5wcm90b3R5cGUuX3VsdHJhR3JvdXBNZXNzYWdlUmVjYWxsZWRMaXN0ZW5lcj1mdW5jdGlvbihlKXt0aGlzLl93YXRjaGVyLnVsdHJhR3JvdXBNZXNzYWdlUmVjYWxsZWQmJnRoaXMuX3dhdGNoZXIudWx0cmFHcm91cE1lc3NhZ2VSZWNhbGxlZChlKX0sZS5wcm90b3R5cGUuX3J0Y0RhdGFDaGFuZ2U9ZnVuY3Rpb24oZSx0KXt0aGlzLl9wbHVnaW5Db250ZXh0UXVldWUuZm9yRWFjaCgoZnVuY3Rpb24obil7bi5vbnJ0Y2RhdGFjaGFuZ2UmJm4ub25ydGNkYXRhY2hhbmdlKGUsdCl9KSl9LGUucHJvdG90eXBlLmFzc2lnbldhdGNoZXI9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztPYmplY3Qua2V5cyh0aGlzLl93YXRjaGVyKS5mb3JFYWNoKChmdW5jdGlvbihuKXtpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxuKSl7dmFyIGk9ZVtuXTt0Ll93YXRjaGVyW25dPWllKGkpfHxuZShpKT9pOnZvaWQgMH19KSl9LGUucHJvdG90eXBlLnJlc2V0V2F0Y2hlcj1mdW5jdGlvbigpe3ZhciBlPXRoaXM7T2JqZWN0LmtleXModGhpcy5fd2F0Y2hlcikuZm9yRWFjaCgoZnVuY3Rpb24odCl7ZS5fd2F0Y2hlclt0XT12b2lkIDB9KSl9LGUucHJvdG90eXBlLl9hZGRUeXBpbmdJbmZvPWZ1bmN0aW9uKGUpe3ZhciB0PWUuc2VuZGVyVXNlcklkLG49ZS5jb252ZXJzYXRpb25UeXBlLGk9ZS50YXJnZXRJZCxyPWUuY29udGVudCxzPWUuY2hhbm5lbElkLG89ci50eXBpbmdDb250ZW50VHlwZSxhPW4rXCIjXCIraStcIiNcIisoc3x8XCJcIik7dGhpcy5fdHlwaW5nSW5mb1thXXx8KHRoaXMuX3R5cGluZ0luZm9bYV09W10pO3ZhciB1PXRoaXMuX3R5cGluZ0luZm9bYV0uZmluZEluZGV4KChmdW5jdGlvbihlKXtyZXR1cm4gZS51c2VySWQ9PT10fSkpO3U+PTAmJnRoaXMuX3R5cGluZ0luZm9bYV1bdV0ubWVzc2FnZVR5cGU9PT1vP3RoaXMuX3R5cGluZ0luZm9bYV1bdV0udGltZXN0YW1wPURhdGUubm93KCk6KHU+PTAmJnRoaXMuX3R5cGluZ0luZm9bYV0uc3BsaWNlKHUsMSksdGhpcy5fdHlwaW5nSW5mb1thXS5wdXNoKHt1c2VySWQ6dCxtZXNzYWdlVHlwZTpvLHRpbWVzdGFtcDpEYXRlLm5vdygpfSksdGhpcy5fdHlwaW5nQ2hhbmdlZExpc3QuaW5jbHVkZXMoYSl8fHRoaXMuX3R5cGluZ0NoYW5nZWRMaXN0LnB1c2goYSksdGhpcy5fc3RhcnRDaGVja1R5cGluZ0luZm8oKSl9LGUucHJvdG90eXBlLl9zdGFydENoZWNrVHlwaW5nSW5mbz1mdW5jdGlvbigpe3ZhciBlPXRoaXM7LTE9PT10aGlzLl90eXBpbmdJbnRlcm5hbFRpbWVyJiYwIT09T2JqZWN0LmtleXModGhpcy5fdHlwaW5nSW5mbykubGVuZ3RoJiYodGhpcy5fdHlwaW5nSW50ZXJuYWxUaW1lcj1zZXRJbnRlcnZhbCgoZnVuY3Rpb24oKXtmb3IodmFyIHQgaW4gZS5fdHlwaW5nSW5mbyl7dmFyIG49ZS5fdHlwaW5nSW5mb1t0XS5sZW5ndGg7ZS5fdHlwaW5nSW5mb1t0XT1lLl90eXBpbmdJbmZvW3RdLmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuIERhdGUubm93KCktdC50aW1lc3RhbXA8ZS5fdHlwaW5nRXhwaXJlVGltZX0pKSxlLl90eXBpbmdJbmZvW3RdLmxlbmd0aD09PW58fGUuX3R5cGluZ0NoYW5nZWRMaXN0LmluY2x1ZGVzKHQpfHxlLl90eXBpbmdDaGFuZ2VkTGlzdC5wdXNoKHQpLDA9PT1lLl90eXBpbmdJbmZvW3RdLmxlbmd0aCYmZGVsZXRlIGUuX3R5cGluZ0luZm9bdF19aWYoZS5fdHlwaW5nQ2hhbmdlZExpc3QubGVuZ3RoPjApe3ZhciBpPWUuX3R5cGluZ0NoYW5nZWRMaXN0Lm1hcCgoZnVuY3Rpb24odCl7cmV0dXJue2NvbnZlcnNhdGlvblR5cGU6TnVtYmVyKHQuc3BsaXQoXCIjXCIpWzBdKSx0YXJnZXRJZDp0LnNwbGl0KFwiI1wiKVsxXSxjaGFubmVsSWQ6dC5zcGxpdChcIiNcIilbMl0sbGlzdDplLl90eXBpbmdJbmZvW3RdfHxbXX19KSk7ZS5fdHlwaW5nU3RhdHVzTGlzdGVuZXIoaSksZS5fdHlwaW5nQ2hhbmdlZExpc3Q9W119MD09PU9iamVjdC5rZXlzKGUuX3R5cGluZ0luZm8pLmxlbmd0aCYmKGNsZWFySW50ZXJ2YWwoZS5fdHlwaW5nSW50ZXJuYWxUaW1lciksZS5fdHlwaW5nSW50ZXJuYWxUaW1lcj0tMSl9KSw1MDApKX0sZS5wcm90b3R5cGUuZ2V0Q29ubmVjdGVkVGltZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9lbmdpbmUuZ2V0Q29ubmVjdGVkVGltZSgpfSxlLnByb3RvdHlwZS5nZXRTZXJ2ZXJUaW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VuZ2luZS5nZXRTZXJ2ZXJUaW1lKCl9LGUucHJvdG90eXBlLmdldERldmljZUlkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VuZ2luZS5nZXREZXZpY2VJZCgpfSxlLnByb3RvdHlwZS5nZXRDdXJyZW50VXNlcklkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VuZ2luZS5jdXJyZW50VXNlcklkfSxlLnByb3RvdHlwZS5nZXRDb25uZWN0aW9uU3RhdHVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Nvbm5lY3Rpb25TdGF0dXN9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInRva2VuXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90b2tlbn0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5jb25uZWN0PWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9ITEpLE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBpLHIscyxvLGEsdTtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihjKXtzd2l0Y2goYy5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9jb25uZWN0aW9uU3RhdHVzPT09SWUuQ09OTkVDVEVEP1syLHtjb2RlOkVlLlNVQ0NFU1MsdXNlcklkOnRoaXMuX2VuZ2luZS5jdXJyZW50VXNlcklkfV06dGhpcy5fY29ubmVjdGlvblN0YXR1cz09PUllLkNPTk5FQ1RJTkc/WzIse2NvZGU6RWUuQklaX0VSUk9SX0NPTk5FQ1RJTkd9XTpcInN0cmluZ1wiIT10eXBlb2YgZXx8MD09PWUubGVuZ3RoP1syLHtjb2RlOkVlLlJDX0NPTk5fVVNFUl9PUl9QQVNTV0RfRVJST1J9XToodGhpcy5fdG9rZW49ZSxpPWUuc3BsaXQoXCJAXCIpLHI9aVsxXSxzPXI/ci5zcGxpdChcIjtcIikubWFwKChmdW5jdGlvbihlKXtyZXR1cm4vXmh0dHBzPzovLnRlc3QoZSk/ZTpcImh0dHBzOi8vXCIrZX0pKTpbXSxbNCx0aGlzLl9lbmdpbmUubmF2aS5nZXRJbmZvKHRoaXMuX2dldFRva2VuV2l0aG91dE5hdmkoKSxzLHQsdGhpcy5fb3B0aW9ucy5jaGVja0NBKV0pO2Nhc2UgMTpyZXR1cm4obz1jLnNlbnQoKSk/MT09PShudWxsPT1vP3ZvaWQgMDpvLnR5cGUpP1syLHtjb2RlOkVlLlBBQ0tBR0VfRU5WSVJPTk1FTlRfRVJST1J9XTooYT1KZS5nZXRJbmZvKCksWzQsdGhpcy5fZW5naW5lLmNvbm5lY3QodGhpcy5fZ2V0VG9rZW5XaXRob3V0TmF2aSgpLG8sbildKTpbMix7Y29kZTpFZS5SQ19OQVZJX1JFU09VUkNFX0VSUk9SfV07Y2FzZSAyOnJldHVybiB1PWMuc2VudCgpLGdlLl9faW5zZXJ0TG9nSW50b0RhdGFiYXNlKCksdSE9PUNlLlJFRElSRUNUP1szLDRdOih0aGlzLl9jb25uZWN0aW9uU3RhdHVzPUllLlJFRElSRUNULFs0LHRoaXMuY29ubmVjdChlLCEwKV0pO2Nhc2UgMzpyZXR1cm5bMixjLnNlbnQoKV07Y2FzZSA0OnJldHVybiB1PT09RWUuU1VDQ0VTUyYmKGdlLmluZm8oXCJjb25uZWN0IHN1Y2Nlc3MsIHVzZXJJZDogXCIrdGhpcy5fZW5naW5lLmN1cnJlbnRVc2VySWQpLDEhPT0obnVsbD09bz92b2lkIDA6by50eXBlKSYmdGhpcy5fZW5naW5lLnJlcG9ydFNES0luZm8mJnRoaXMuX2VuZ2luZS5yZXBvcnRTREtJbmZvKGEpLENzLmluaXQoe3J1bnRpbWU6dGhpcy5fcnVudGltZSxsb2dTd2l0Y2g6KG51bGw9PW8/dm9pZCAwOm8ubG9nU3dpdGNoKXx8MCxsb2dQb2xpY3k6SlNPTi5wYXJzZSgobnVsbD09bz92b2lkIDA6by5sb2dQb2xpY3kpfHxcInt9XCIpLGFwcGtleTp0aGlzLmFwcGtleSx2ZXJzaW9uOnRoaXMuYXBpVmVyc2lvbix1c2VySWQ6dGhpcy5fZW5naW5lLmN1cnJlbnRVc2VySWR9KSxwZS5pbml0KHRoaXMuX2VuZ2luZS5jdXJyZW50VXNlcklkKSx0aGlzLl9pc0ludGVybmFsQ29ubmVjdGVkPSEwKSx1IT09RWUuU1VDQ0VTU3x8bXQoKXx8MT09PW8ub3BlblVTJiZ0aGlzLl9wdWxsVXNlclNldHRpbmdzKCksdSE9PUVlLlNVQ0NFU1MmJih0aGlzLl9jb25uZWN0aW9uU3RhdHVzPUllLkNPTk5FQ1RJT05fQ0xPU0VEKSxbMix7Y29kZTp1LHVzZXJJZDp0aGlzLl9lbmdpbmUuY3VycmVudFVzZXJJZH1dfX0pKX0pKX0sZS5wcm90b3R5cGUuX3B1bGxVc2VyU2V0dGluZ3M9ZnVuY3Rpb24oKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oZSl7cmV0dXJuWzJdfSkpfSkpfSxlLnByb3RvdHlwZS5kaXNjb25uZWN0PWZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuIHRoaXMuX2lzSW50ZXJuYWxDb25uZWN0ZWQ9ITEsY2xlYXJJbnRlcnZhbCh0aGlzLl90eXBpbmdJbnRlcm5hbFRpbWVyKSx0aGlzLl90eXBpbmdJbnRlcm5hbFRpbWVyPS0xLHRoaXMuX3R5cGluZ0luZm89e30sbnVsbD09PShlPUNzLmdldEluc3RhbmNlKCkpfHx2b2lkIDA9PT1lfHxlLmRpc3Ryb3koKSxnZS5fX2luc2VydExvZ0ludG9EYXRhYmFzZSgpLHBlLnJlc2V0KCksdGhpcy5fZW5naW5lLmRpc2Nvbm5lY3QoKSx0aGlzLl9wbHVnaW5Db250ZXh0UXVldWUuZm9yRWFjaCgoZnVuY3Rpb24oZSl7aWYoZS5vbmRpc2Nvbm5lY3QpdHJ5e2Uub25kaXNjb25uZWN0KCl9Y2F0Y2goZSl7Z2UuZXJyb3IoXCJwbHVnaW4gZXJyb3IgPT5cIixlKX19KSksUHJvbWlzZS5yZXNvbHZlKCl9LGUucHJvdG90eXBlLnJlY29ubmVjdD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5faXNJbnRlcm5hbENvbm5lY3RlZD9Qcm9taXNlLnJlc29sdmUoe2NvZGU6RWUuQ0FOX05PVF9SRUNPTk5FQ1R9KTp0aGlzLmNvbm5lY3QodGhpcy5fZ2V0VG9rZW5XaXRob3V0TmF2aSgpLCExLGUpfSxlLnByb3RvdHlwZS5fZ2V0VG9rZW5XaXRob3V0TmF2aT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl90b2tlbi5yZXBsYWNlKC9ALiskLyxcIkBcIil9LGUucHJvdG90eXBlLmdldEluZm9Gcm9tQ2FjaGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZW5naW5lLm5hdmkuZ2V0SW5mb0Zyb21DYWNoZSh0aGlzLl9nZXRUb2tlbldpdGhvdXROYXZpKCkpfSxlLnByb3RvdHlwZS5yZWdpc3Rlck1lc3NhZ2VUeXBlPWZ1bmN0aW9uKGUsdCxuLGkscil7dm9pZCAwPT09aSYmKGk9W10pLHZvaWQgMD09PXImJihyPSExKSx0aGlzLl9lbmdpbmUucmVnaXN0ZXJNZXNzYWdlVHlwZShlLHQsbixpLHIpfSxlLnByb3RvdHlwZS5zZW5kTWVzc2FnZT1mdW5jdGlvbihlLHQsbixpKXtpZihlIT09ai5VTFRSQV9HUk9VUCl7dmFyIHI9dGhpcy5nZXRJbmZvRnJvbUNhY2hlKCk7aWYoMT09PSgobnVsbD09cj92b2lkIDA6ci5ncnBSUlZlcil8fDApJiZuLm1lc3NhZ2VUeXBlPT09U2UuUkVBRF9SRUNFSVBUX1JFU1BPTlNFKXJldHVybiBQcm9taXNlLnJlc29sdmUoe2NvZGU6RWUuUkVBRF9SRUNFSVBUX0VSUk9SfSl9dmFyIHM9bi5jYW5JbmNsdWRlRXhwYW5zaW9uLG89dm9pZCAwIT09cyYmcyxhPW4uZXhwYW5zaW9uO2lmKG8mJmhlKGEpKXJldHVybiBQcm9taXNlLnJlc29sdmUoe2NvZGU6RWUuQklaX0VSUk9SX0lOVkFMSURfUEFSQU1FVEVSfSk7dmFyIHU9SlNPTi5zdHJpbmdpZnkobi5jb250ZW50KTtyZXR1cm4gVih1KT4xMzEwNzI/UHJvbWlzZS5yZXNvbHZlKHtjb2RlOkVlLlJDX01TR19DT05URU5UX0VYQ0VFRF9MSU1JVH0pOmU9PT1qLlVMVFJBX0dST1VQP3RoaXMuX2VuZ2luZS5zZW5kVWx0cmFNZXNzYWdlKHQsbik6dGhpcy5fZW5naW5lLnNlbmRNZXNzYWdlKGUsdCxuLGkpfSxlLnByb3RvdHlwZS5zZW5kRXhwYW5zaW9uTWVzc2FnZT1mdW5jdGlvbihlKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHQsbixpLHIscyxvLGEsdSxjLGgsbCxkLGYscDtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihnKXtzd2l0Y2goZy5sYWJlbCl7Y2FzZSAwOmlmKHQ9ZS5jaGFubmVsSWQsbj1lLmNvbnZlcnNhdGlvblR5cGUsaT1lLnRhcmdldElkLHI9ZS5tZXNzYWdlVUlkLHM9ZS5rZXlzLG89ZS5leHBhbnNpb24sYT1lLnJlbW92ZUFsbCwhZS5jYW5JbmNsdWRlRXhwYW5zaW9uKXJldHVyblsyLHtjb2RlOkVlLk1FU1NBR0VfS1ZfTk9UX1NVUFBPUlR9XTtpZih1PSExLGM9aGUobyksaD0hMSxuZShvKSlmb3IoZCBpbiBsPU9iamVjdC5rZXlzKG8pLmxlbmd0aCx1PWw+MjAsbylpZihmPW9bZF0sKGg9ZC5sZW5ndGg+MzJ8fGYubGVuZ3RoPjQwOTYpfHxjKWJyZWFrO3JldHVybiB1fHxoP1syLHtjb2RlOkVlLkVYUEFOU0lPTl9MSU1JVF9FWENFRVR9XTpjP1syLHtjb2RlOkVlLkJJWl9FUlJPUl9JTlZBTElEX1BBUkFNRVRFUn1dOihwPXttaWQ6cn0sbyYmKHAucHV0PW8pLHMmJihwLmRlbD1zKSxhJiYocC5yZW1vdmVBbGw9MSksWzQsdGhpcy5fZW5naW5lLnNlbmRNZXNzYWdlKG4saSx7Y29udGVudDpwLG1lc3NhZ2VUeXBlOlNlLkVYUEFOU0lPTl9OT1RJRlksY2hhbm5lbElkOnR9KV0pO2Nhc2UgMTpyZXR1cm5bMix7Y29kZTpnLnNlbnQoKS5jb2RlfV19fSkpfSkpfSxlLnByb3RvdHlwZS5zZW5kUmVhZFJlY2VpcHRNZXNzYWdlPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIGk7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24ocil7cmV0dXJuIGk9dGhpcy5nZXRJbmZvRnJvbUNhY2hlKCksMD09PSgobnVsbD09aT92b2lkIDA6aS5ncnBSUlZlcil8fDApP1syLHtjb2RlOkVlLlJFQURfUkVDRUlQVF9FUlJPUixkYXRhOlwiVGhlIHJlYWQgcmVjZWlwdCBzd2l0Y2ggaXMgbm90IG9uLCBwbGVhc2UgY2FsbCB0aGUgc2VuZE1lc3NhZ2UgbWV0aG9kIVwifV06WzIsdGhpcy5fZW5naW5lLnNlbmRSZWFkUmVjZWlwdE1lc3NhZ2UoZSx0LG4pXX0pKX0pKX0sZS5wcm90b3R5cGUuZ2V0TWVzc2FnZVJlYWRlcj1mdW5jdGlvbihlLHQsbil7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBpO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKHIpe3JldHVybiBpPXRoaXMuZ2V0SW5mb0Zyb21DYWNoZSgpLDA9PT0oKG51bGw9PWk/dm9pZCAwOmkuZ3JwUlJWZXIpfHwwKT9bMix7Y29kZTpFZS5SRUFEX1JFQ0VJUFRfRVJST1J9XTpbMix0aGlzLl9lbmdpbmUuZ2V0TWVzc2FnZVJlYWRlcihlLHQsbildfSkpfSkpfSxlLnByb3RvdHlwZS5fZGVzdHJveT1mdW5jdGlvbigpe3ZhciBlO3RoaXMuX2lzSW50ZXJuYWxDb25uZWN0ZWQ9ITEsdGhpcy5fd2F0Y2hlcj17YmF0Y2hNZXNzYWdlOnZvaWQgMCxtZXNzYWdlOnZvaWQgMCxjb252ZXJzYXRpb25TdGF0ZTp2b2lkIDAsY2hhdHJvb21TdGF0ZTp2b2lkIDAsY29ubmVjdGlvblN0YXRlOnZvaWQgMCxydGNJbm5lcldhdGNoZXI6dm9pZCAwLGV4cGFuc2lvbjp2b2lkIDAsdGFnOnZvaWQgMCxjb252ZXJzYXRpb25UYWdDaGFuZ2VkOnZvaWQgMCx0eXBpbmdTdGF0ZTp2b2lkIDAscHVsbEZpbmlzaGVkOnZvaWQgMCxvbkNvbm5lY3Rpbmc6dm9pZCAwLG9uQ29ubmVjdGVkOnZvaWQgMCxvbkRpc2Nvbm5lY3Q6dm9pZCAwLG9uU3VzcGVuZDp2b2lkIDB9LHRoaXMuX2VuZ2luZS5kaXNjb25uZWN0KCksdGhpcy5fcGx1Z2luQ29udGV4dFF1ZXVlLmZvckVhY2goKGZ1bmN0aW9uKGUpe2lmKGUub25kZXN0cm95KXRyeXtlLm9uZGVzdHJveSgpfWNhdGNoKGUpe2dlLmVycm9yKFwicGx1Z2luIGVycm9yID0+XCIsZSl9fSkpLHRoaXMuX3BsdWdpbkNvbnRleHRRdWV1ZS5sZW5ndGg9MCx0aGlzLl9wbHVnaW5JbnN0YW5zZU1hcD17fSxudWxsPT09KGU9Q3MuZ2V0SW5zdGFuY2UoKSl8fHZvaWQgMD09PWV8fGUuZGlzdHJveSgpLHBlLnJlc2V0KCl9LGUucHJvdG90eXBlLmdldEhpc3RvcnlNZXNzYWdlPWZ1bmN0aW9uKGUsdCxuLGkscixzLG8pe2lmKHZvaWQgMD09PW4mJihuPTApLHZvaWQgMD09PWkmJihpPTIwKSx2b2lkIDA9PT1yJiYocj0wKSx2b2lkIDA9PT1zJiYocz1cIlwiKSx2b2lkIDA9PT1vJiYobz1cIlwiKSxlPT09ai5VTFRSQV9HUk9VUCl7dmFyIGE9e3RpbWVzdGFtcDpuLGNvdW50Omksb3JkZXI6cixjaGFubmVsSWQ6c307cmV0dXJuIHRoaXMuX2VuZ2luZS5nZXRVbHRyYUhpc3RvcnlNc2codCxhKX1yZXR1cm4gdGhpcy5fZW5naW5lLmdldEhpc3RvcnlNZXNzYWdlKGUsdCxuLGkscixzLG98fFwiXCIpfSxlLnByb3RvdHlwZS5nZXRDb252ZXJzYXRpb25MaXN0PWZ1bmN0aW9uKGUsdCxuLGkscil7aWYodm9pZCAwPT09ZSYmKGU9MzAwKSx2b2lkIDA9PT1yJiYocj1cIlwiKSx0PT09ai5VTFRSQV9HUk9VUCl7dmFyIHM9RWUuTUVUSE9EX05PVF9TVVBQT1JUO3JldHVybiBQcm9taXNlLnJlc29sdmUoe2NvZGU6cyxtc2c6RWVbc119KX1yZXR1cm4gdGhpcy5fZW5naW5lLmdldENvbnZlcnNhdGlvbkxpc3QoZSx0LG4saSxyKX0sZS5wcm90b3R5cGUuZ2V0Q29udmVyc2F0aW9uPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdGhpcy5fZW5naW5lLmdldENvbnZlcnNhdGlvbihlLHQsbil9LGUucHJvdG90eXBlLnJlbW92ZUNvbnZlcnNhdGlvbj1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHZvaWQgMD09PW4mJihuPVwiXCIpLGU9PT1qLlVMVFJBX0dST1VQP1Byb21pc2UucmVzb2x2ZShFZS5NRVRIT0RfTk9UX1NVUFBPUlQpOnRoaXMuX2VuZ2luZS5yZW1vdmVDb252ZXJzYXRpb24oZSx0LG4pfSxlLnByb3RvdHlwZS5nZXRVbHRyYUdyb3VwTGlzdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9lbmdpbmUuZ2V0VWx0cmFHcm91cExpc3QoKX0sZS5wcm90b3R5cGUuZ2V0QmxvY2tVbHRyYUdyb3VwTGlzdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9lbmdpbmUuZ2V0QmxvY2tVbHRyYUdyb3VwTGlzdCgpfSxlLnByb3RvdHlwZS5nZXRUb3BVbHRyYUdyb3VwTGlzdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9lbmdpbmUuZ2V0VG9wVWx0cmFHcm91cExpc3QoKX0sZS5wcm90b3R5cGUuY2xlYXJVbnJlYWRDb3VudD1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHZvaWQgMD09PW4mJihuPVwiXCIpLGU9PT1qLlVMVFJBX0dST1VQP3RoaXMuX2VuZ2luZS5jbGVhclVsdHJhVW5yZWFkY291bnQodCxuKTp0aGlzLl9lbmdpbmUuY2xlYXJDb252ZXJzYXRpb25VbnJlYWRDb3VudChlLHQsbil9LGUucHJvdG90eXBlLmNsZWFyQWxsVW5yZWFkQ291bnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZW5naW5lLmNsZWFyQWxsVW5yZWFkQ291bnQoKX0sZS5wcm90b3R5cGUuZ2V0VW5yZWFkQ291bnQ9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB2b2lkIDA9PT1uJiYobj1cIlwiKSx0aGlzLl9lbmdpbmUuZ2V0Q29udmVyc2F0aW9uVW5yZWFkQ291bnQoZSx0LG4pfSxlLnByb3RvdHlwZS5nZXRUb3RhbFVucmVhZENvdW50PWZ1bmN0aW9uKGUsdCxuKXtpZih0JiZ0LmluY2x1ZGVzKGouVUxUUkFfR1JPVVApKXt2YXIgaT1FZS5NRVRIT0RfTk9UX1NVUFBPUlQ7cmV0dXJuIFByb21pc2UucmVzb2x2ZSh7Y29kZTppLG1zZzpFZVtpXX0pfXJldHVybiB0aGlzLl9lbmdpbmUuZ2V0QWxsQ29udmVyc2F0aW9uVW5yZWFkQ291bnQoZSx0JiZ0Lmxlbmd0aD4wP3Q6W2ouUFJJVkFURSxqLkdST1VQLGouU1lTVEVNLGouUFVCTElDX1NFUlZJQ0VdLCEhbil9LGUucHJvdG90eXBlLmdldEZpcnN0VW5yZWFkTWVzc2FnZT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHZvaWQgMD09PW4mJihuPVwiXCIpLHRoaXMuX2VuZ2luZS5nZXRGaXJzdFVucmVhZE1lc3NhZ2UoZSx0LG4pfSxlLnByb3RvdHlwZS5zZXRDb252ZXJzYXRpb25TdGF0dXM9ZnVuY3Rpb24oZSx0LG4saSxyKXtpZih2b2lkIDA9PT1yJiYocj1cIlwiKSxlPT09ai5VTFRSQV9HUk9VUCYmdm9pZCAwIT09bilyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKEVlLk1FVEhPRF9OT1RfU1VQUE9SVCk7dmFyIHM9W3tjb252ZXJzYXRpb25UeXBlOmUsdGFyZ2V0SWQ6dCxpc1RvcDpuLG5vdGlmaWNhdGlvblN0YXR1czppLGNoYW5uZWxJZDpyfV07cmV0dXJuIHRoaXMuX2VuZ2luZS5iYXRjaFNldENvbnZlcnNhdGlvblN0YXR1cyhzKX0sZS5wcm90b3R5cGUuc2F2ZUNvbnZlcnNhdGlvbk1lc3NhZ2VEcmFmdD1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gdm9pZCAwPT09aSYmKGk9XCJcIiksdGhpcy5fZW5naW5lLnNhdmVDb252ZXJzYXRpb25NZXNzYWdlRHJhZnQoZSx0LG4saSl9LGUucHJvdG90eXBlLmdldENvbnZlcnNhdGlvbk1lc3NhZ2VEcmFmdD1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHZvaWQgMD09PW4mJihuPVwiXCIpLHRoaXMuX2VuZ2luZS5nZXRDb252ZXJzYXRpb25NZXNzYWdlRHJhZnQoZSx0LG4pfSxlLnByb3RvdHlwZS5jbGVhckNvbnZlcnNhdGlvbk1lc3NhZ2VEcmFmdD1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHZvaWQgMD09PW4mJihuPVwiXCIpLHRoaXMuX2VuZ2luZS5jbGVhckNvbnZlcnNhdGlvbk1lc3NhZ2VEcmFmdChlLHQsbil9LGUucHJvdG90eXBlLnJlY2FsbE1lc3NhZ2U9ZnVuY3Rpb24oZSx0LG4saSxyKXtyZXR1cm4gdGhpcy5fZW5naW5lLnJlY2FsbE1zZyhlLHQsbixpLHIpfSxlLnByb3RvdHlwZS5kZWxldGVSZW1vdGVNZXNzYWdlPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiB2b2lkIDA9PT1pJiYoaT1cIlwiKSxlPT09ai5VTFRSQV9HUk9VUD9Qcm9taXNlLnJlc29sdmUoRWUuTUVUSE9EX05PVF9TVVBQT1JUKTp0aGlzLl9lbmdpbmUuZGVsZXRlUmVtb3RlTWVzc2FnZShlLHQsbixpKX0sZS5wcm90b3R5cGUuZGVsZXRlUmVtb3RlTWVzc2FnZUJ5VGltZXN0YW1wPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiB2b2lkIDA9PT1pJiYoaT1cIlwiKSx0aGlzLl9lbmdpbmUuZGVsZXRlUmVtb3RlTWVzc2FnZUJ5VGltZXN0YW1wKGUsdCxuLGkpfSxlLnByb3RvdHlwZS5qb2luQ2hhdHJvb209ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9MTApLHRoaXMuX2VuZ2luZS5qb2luQ2hhdHJvb20oZSx0KX0sZS5wcm90b3R5cGUuam9pbkV4aXN0Q2hhdHJvb209ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9MTApLHRoaXMuX2VuZ2luZS5qb2luRXhpc3RDaGF0cm9vbShlLHQpfSxlLnByb3RvdHlwZS5xdWl0Q2hhdHJvb209ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2VuZ2luZS5xdWl0Q2hhdHJvb20oZSl9LGUucHJvdG90eXBlLmdldENoYXRyb29tSW5mbz1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHZvaWQgMD09PXQmJih0PTApLHZvaWQgMD09PW4mJihuPTApLHRoaXMuX2VuZ2luZS5nZXRDaGF0cm9vbUluZm8oZSx0LG4pfSxlLnByb3RvdHlwZS5zZXRDaGF0cm9vbUVudHJ5PWZ1bmN0aW9uKGUsdCl7dmFyIG49dC5rZXksaT10LnZhbHVlO3JldHVybiBodChuKSYmbHQoaSk/dGhpcy5fZW5naW5lLnNldENoYXRyb29tRW50cnkoZSx0KTpQcm9taXNlLnJlc29sdmUoRWUuQklaX0VSUk9SX0lOVkFMSURfUEFSQU1FVEVSKX0sZS5wcm90b3R5cGUuc2V0Q2hhdHJvb21FbnRyaWVzPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPTA7bjx0LmVudHJpZXMubGVuZ3RoO24rKyl7dmFyIGk9dC5lbnRyaWVzW25dLHI9aS5rZXkscz1pLnZhbHVlO2lmKCFodChyKXx8IWx0KHMpKXJldHVybiBQcm9taXNlLnJlc29sdmUoe2NvZGU6RWUuQklaX0VSUk9SX0lOVkFMSURfUEFSQU1FVEVSfSl9cmV0dXJuIHRoaXMuX2VuZ2luZS5zZXRDaGF0cm9vbUVudHJpZXMoZSx0KX0sZS5wcm90b3R5cGUuZm9yY2VTZXRDaGF0cm9vbUVudHJ5PWZ1bmN0aW9uKGUsdCl7dmFyIG49dC5rZXksaT10LnZhbHVlO3JldHVybiBodChuKSYmbHQoaSk/dGhpcy5fZW5naW5lLmZvcmNlU2V0Q2hhdHJvb21FbnRyeShlLHQpOlByb21pc2UucmVzb2x2ZShFZS5CSVpfRVJST1JfSU5WQUxJRF9QQVJBTUVURVIpfSxlLnByb3RvdHlwZS5yZW1vdmVDaGF0cm9vbUVudHJ5PWZ1bmN0aW9uKGUsdCl7dmFyIG49dC5rZXk7cmV0dXJuIGh0KG4pP3RoaXMuX2VuZ2luZS5yZW1vdmVDaGF0cm9vbUVudHJ5KGUsdCk6UHJvbWlzZS5yZXNvbHZlKEVlLkJJWl9FUlJPUl9JTlZBTElEX1BBUkFNRVRFUil9LGUucHJvdG90eXBlLnJlbW92ZUNoYXRyb29tRW50cmllcz1mdW5jdGlvbihlLHQpe2Zvcih2YXIgbj0wO248dC5lbnRyaWVzLmxlbmd0aDtuKyspe3ZhciBpPXQuZW50cmllc1tuXS5rZXk7aWYoIWh0KGkpKXJldHVybiBQcm9taXNlLnJlc29sdmUoe2NvZGU6RWUuQklaX0VSUk9SX0lOVkFMSURfUEFSQU1FVEVSfSl9cmV0dXJuIHRoaXMuX2VuZ2luZS5yZW1vdmVDaGF0cm9vbUVudHJpZXMoZSx0KX0sZS5wcm90b3R5cGUuZm9yY2VSZW1vdmVDaGF0cm9vbUVudHJ5PWZ1bmN0aW9uKGUsdCl7dmFyIG49dC5rZXk7cmV0dXJuIGh0KG4pP3RoaXMuX2VuZ2luZS5mb3JjZVJlbW92ZUNoYXRyb29tRW50cnkoZSx0KTpQcm9taXNlLnJlc29sdmUoRWUuQklaX0VSUk9SX0lOVkFMSURfUEFSQU1FVEVSKX0sZS5wcm90b3R5cGUuZ2V0Q2hhdHJvb21FbnRyeT1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLl9lbmdpbmUuZ2V0Q2hhdHJvb21FbnRyeShlLHQpfSxlLnByb3RvdHlwZS5nZXRBbGxDaGF0cm9vbUVudHJpZXM9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2VuZ2luZS5nZXRBbGxDaGF0cm9vbUVudHJ5KGUpfSxlLnByb3RvdHlwZS5nZXRDaGF0cm9vbUhpc3RvcnlNZXNzYWdlcz1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9MjApLHZvaWQgMD09PW4mJihuPTApLHZvaWQgMD09PWkmJihpPTApLHRoaXMuX2VuZ2luZS5nZXRDaGF0cm9vbUhpc3RvcnlNZXNzYWdlcyhlLGksdCxuKX0sZS5wcm90b3R5cGUuZ2V0RmlsZVRva2VuPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgcixzLG8sYSx1LGMsaDtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihsKXtzd2l0Y2gobC5sYWJlbCl7Y2FzZSAwOnJldHVybiByPXRoaXMuZ2V0SW5mb0Zyb21DYWNoZSgpLHM9KG51bGw9PXI/dm9pZCAwOnIuYm9zQWRkcil8fFwiXCIsbz0obnVsbD09cj92b2lkIDA6ci51cGxvYWRTZXJ2ZXIpfHxcIlwiLGE9KG51bGw9PXI/dm9pZCAwOnIub3NzQ29uZmlnKXx8XCJcIixbNCx0aGlzLl9lbmdpbmUuZ2V0RmlsZVRva2VuKGUsdCxuLGkpXTtjYXNlIDE6cmV0dXJuIHU9bC5zZW50KCksYz11LmNvZGUsaD11LmRhdGEsYz09PUVlLlNVQ0NFU1M/WzIsUHJvbWlzZS5yZXNvbHZlKE9iamVjdC5hc3NpZ24oaCx7Ym9zOnMscWluaXU6byxvc3NDb25maWc6YX0pKV06WzIsUHJvbWlzZS5yZWplY3QoYyldfX0pKX0pKX0sZS5wcm90b3R5cGUuZ2V0RmlsZVVybD1mdW5jdGlvbihlLHQsbixpLHIpe3JldHVybiB2b2lkIDA9PT1yJiYocj1VZS5RSU5JVSksTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHMsbyxhO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKHUpe3N3aXRjaCh1LmxhYmVsKXtjYXNlIDA6cmV0dXJuKG51bGw9PWk/dm9pZCAwOmkuaXNCb3NSZXMpP1syLFByb21pc2UucmVzb2x2ZShpKV06WzQsdGhpcy5fZW5naW5lLmdldEZpbGVVcmwoZSxyLHQsbildO2Nhc2UgMTpyZXR1cm4gcz11LnNlbnQoKSxvPXMuY29kZSxhPXMuZGF0YSxvPT09RWUuU1VDQ0VTUz9bMixQcm9taXNlLnJlc29sdmUoYSldOlsyLFByb21pc2UucmVqZWN0KG8pXX19KSl9KSl9LGUucHJvdG90eXBlLmNyZWF0ZVRhZz1mdW5jdGlvbihlKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24odCl7cmV0dXJuWzIsdGhpcy5fZW5naW5lLmNyZWF0ZVRhZyhlKV19KSl9KSl9LGUucHJvdG90eXBlLnJlbW92ZVRhZz1mdW5jdGlvbihlKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24odCl7cmV0dXJuWzIsdGhpcy5fZW5naW5lLnJlbW92ZVRhZyhlKV19KSl9KSl9LGUucHJvdG90eXBlLnVwZGF0ZVRhZz1mdW5jdGlvbihlKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24odCl7cmV0dXJuWzIsdGhpcy5fZW5naW5lLnVwZGF0ZVRhZyhlKV19KSl9KSl9LGUucHJvdG90eXBlLmdldFRhZ0xpc3Q9ZnVuY3Rpb24oKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oZSl7cmV0dXJuWzIsdGhpcy5fZW5naW5lLmdldFRhZ0xpc3QoKV19KSl9KSl9LGUucHJvdG90eXBlLmFkZFRhZ0ZvckNvbnZlcnNhdGlvbnM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24obil7cmV0dXJuIHQubGVuZ3RoPjFlMz9bMixQcm9taXNlLnJlamVjdChFZS5DT05WRVJfT1VUX0xJTUlUX0VSUk9SKV06WzIsdGhpcy5fZW5naW5lLmFkZFRhZ0ZvckNvbnZlcnNhdGlvbnMoZSx0KV19KSl9KSl9LGUucHJvdG90eXBlLnJlbW92ZVRhZ0ZvckNvbnZlcnNhdGlvbnM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24obil7cmV0dXJuWzIsdGhpcy5fZW5naW5lLnJlbW92ZVRhZ0ZvckNvbnZlcnNhdGlvbnMoZSx0KV19KSl9KSl9LGUucHJvdG90eXBlLnJlbW92ZVRhZ3NGb3JDb252ZXJzYXRpb249ZnVuY3Rpb24oZSx0KXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24obil7cmV0dXJuWzIsdGhpcy5fZW5naW5lLnJlbW92ZVRhZ3NGb3JDb252ZXJzYXRpb24oZSx0KV19KSl9KSl9LGUucHJvdG90eXBlLmdldENvbnZlcnNhdGlvbkxpc3RCeVRhZz1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24ocil7cmV0dXJuWzIsdGhpcy5fZW5naW5lLmdldENvbnZlcnNhdGlvbkxpc3RCeVRhZyhlLHQsbixpKV19KSl9KSl9LGUucHJvdG90eXBlLmdldFVucmVhZENvdW50QnlUYWc9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24obil7cmV0dXJuWzIsdGhpcy5fZW5naW5lLmdldFVucmVhZENvdW50QnlUYWcoZSx0KV19KSl9KSl9LGUucHJvdG90eXBlLnNldENvbnZlcnNhdGlvblN0YXR1c0luVGFnPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oaSl7cmV0dXJuWzIsdGhpcy5fZW5naW5lLnNldENvbnZlcnNhdGlvblN0YXR1c0luVGFnKGUsdCxuKV19KSl9KSl9LGUucHJvdG90eXBlLmdldFRhZ3NGb3JDb252ZXJzYXRpb249ZnVuY3Rpb24oZSl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKHQpe3JldHVyblsyLHRoaXMuX2VuZ2luZS5nZXRUYWdzRm9yQ29udmVyc2F0aW9uKGUpXX0pKX0pKX0sZS5wcm90b3R5cGUuZ2V0QmxvY2tDb252ZXJzYXRpb25MaXN0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VuZ2luZS5nZXRCbG9ja0NvbnZlcnNhdGlvbkxpc3QoKX0sZS5wcm90b3R5cGUuZ2V0VG9wQ29udmVyc2F0aW9uTGlzdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9lbmdpbmUuZ2V0VG9wQ29udmVyc2F0aW9uTGlzdCgpfSxlLnByb3RvdHlwZS5nZXRVbnJlYWRNZW50aW9uZWRDb3VudD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZW5naW5lLmdldFVucmVhZE1lbnRpb25lZENvdW50KGUpfSxlLnByb3RvdHlwZS5nZXRBbGxVbnJlYWRNZW50aW9uZWRDb3VudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9lbmdpbmUuZ2V0QWxsVW5yZWFkTWVudGlvbmVkQ291bnQoKX0sZS5wcm90b3R5cGUuc2VuZFVsdHJhR3JvdXBUeXBpbmdTdGF0dXM9ZnVuY3Rpb24oZSl7aWYoZS5jb252ZXJzYXRpb25UeXBlIT09ai5VTFRSQV9HUk9VUCl7dmFyIHQ9RWUuTUVUSE9EX09OTFlfU1VQUE9SVF9VTFRSQV9HUk9VUDtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtjb2RlOnQsbXNnOkVlW3RdfSl9cmV0dXJuIHRoaXMuX2VuZ2luZS5zZW5kVWx0cmFHcm91cFR5cGluZ1N0YXR1cyhlKX0sZS5wcm90b3R5cGUuZ2V0VWx0cmFHcm91cE1lc3NhZ2VMaXN0QnlNZXNzYWdlVUlkPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9lbmdpbmUuZ2V0VWx0cmFHcm91cE1lc3NhZ2VMaXN0QnlNZXNzYWdlVUlkKGUpfSxlLnByb3RvdHlwZS5leHBhbmRVbHRyYU1lc3NhZ2U9ZnVuY3Rpb24oZSl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciB0LG4saSxyLHMsbyxhLHUsYyxoO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGwpe3N3aXRjaChsLmxhYmVsKXtjYXNlIDA6aWYoZS5jaGFubmVsSWQsdD1lLmNvbnZlcnNhdGlvblR5cGUsZS50YXJnZXRJZCxlLm1lc3NhZ2VVSWQsZS5rZXlzLG49ZS5leHBhbnNpb24sZS5yZW1vdmVBbGwsaT1lLmNhbkluY2x1ZGVFeHBhbnNpb24sdCE9PWouVUxUUkFfR1JPVVApcmV0dXJuWzIse2NvZGU6cj1FZS5NRVRIT0RfT05MWV9TVVBQT1JUX1VMVFJBX0dST1VQLG1zZzpFZVtyXX1dO2lmKCFpKXJldHVyblsyLHtjb2RlOkVlLk1FU1NBR0VfS1ZfTk9UX1NVUFBPUlR9XTtpZihzPSExLG89aGUobiksYT0hMSxuZShuKSlmb3IoYyBpbiB1PU9iamVjdC5rZXlzKG4pLmxlbmd0aCxzPXU+MjAsbilpZihoPW5bY10sYT1jLmxlbmd0aD4zMnx8aC5sZW5ndGg+NjQpYnJlYWs7cmV0dXJuIHN8fGE/WzIse2NvZGU6RWUuRVhQQU5TSU9OX0xJTUlUX0VYQ0VFVH1dOm8/WzIse2NvZGU6RWUuQklaX0VSUk9SX0lOVkFMSURfUEFSQU1FVEVSfV06WzQsdGhpcy5fZW5naW5lLmV4cGFuZFVsdHJhTWVzc2FnZShlKV07Y2FzZSAxOnJldHVyblsyLHtjb2RlOmwuc2VudCgpLmNvZGV9XX19KSl9KSl9LGUucHJvdG90eXBlLm1vZGlmeU1lc3NhZ2U9ZnVuY3Rpb24oZSl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciB0O3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKG4pe3N3aXRjaChuLmxhYmVsKXtjYXNlIDA6cmV0dXJuIGUuY29udmVyc2F0aW9uVHlwZSE9PWouVUxUUkFfR1JPVVA/WzIse2NvZGU6dD1FZS5NRVRIT0RfT05MWV9TVVBQT1JUX1VMVFJBX0dST1VQLG1zZzpFZVt0XX1dOls0LHRoaXMuX2VuZ2luZS5tb2RpZnlNZXNzYWdlKGUpXTtjYXNlIDE6cmV0dXJuWzIse2NvZGU6bi5zZW50KCkuY29kZX1dfX0pKX0pKX0sZS5wcm90b3R5cGUuZ2V0VWx0cmFHcm91cFVucmVhZE1lbnRpb25lZENvdW50QnlUYXJnZXRJZD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZW5naW5lLmdldFVsdHJhR3JvdXBVbnJlYWRNZW50aW9uZWRDb3VudEJ5VGFyZ2V0SWQoZSl9LGUucHJvdG90eXBlLmdldEFsbENvbnZlcnNhdGlvblN0YXRlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VuZ2luZS5nZXRBbGxDb252ZXJzYXRpb25TdGF0ZSgpfSxlLnByb3RvdHlwZS5jYWxsRXh0cmE9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG49W10saT0xO2k8YXJndW1lbnRzLmxlbmd0aDtpKyspbltpLTFdPWFyZ3VtZW50c1tpXTtyZXR1cm4odD10aGlzLl9lbmdpbmUpLmNhbGxFeHRyYS5hcHBseSh0LEEoW2VdLG4pKX0sZS5wcm90b3R5cGUuY2xlYXJDb252ZXJzYXRpb25zPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKG4pe3N3aXRjaChuLmxhYmVsKXtjYXNlIDA6cmV0dXJuWzQsdGhpcy5fZW5naW5lLmNsZWFyQ29udmVyc2F0aW9ucyhlLHQpXTtjYXNlIDE6cmV0dXJuWzIsbi5zZW50KCldfX0pKX0pKX0sZS5wcm90b3R5cGUuc2V0VXNlclN0YXR1c0xpc3RlbmVyPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX2VuZ2luZS5zZXRVc2VyU3RhdHVzTGlzdGVuZXIoZSwoZnVuY3Rpb24oZSl7dHJ5e3QoZSl9Y2F0Y2goZSl7Z2UuZXJyb3IoZSl9fSkpfSxlLnByb3RvdHlwZS5hZGRUb0JsYWNrbGlzdD1mdW5jdGlvbihlKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24odCl7cmV0dXJuWzIsdGhpcy5fZW5naW5lLmFkZFRvQmxhY2tsaXN0KGUpXX0pKX0pKX0sZS5wcm90b3R5cGUucmVtb3ZlRnJvbUJsYWNrbGlzdD1mdW5jdGlvbihlKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24odCl7cmV0dXJuWzIsdGhpcy5fZW5naW5lLnJlbW92ZUZyb21CbGFja2xpc3QoZSldfSkpfSkpfSxlLnByb3RvdHlwZS5nZXRCbGFja2xpc3Q9ZnVuY3Rpb24oKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oZSl7cmV0dXJuWzIsdGhpcy5fZW5naW5lLmdldEJsYWNrbGlzdCgpXX0pKX0pKX0sZS5wcm90b3R5cGUuZ2V0QmxhY2tsaXN0U3RhdHVzPWZ1bmN0aW9uKGUpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbih0KXtyZXR1cm5bMix0aGlzLl9lbmdpbmUuZ2V0QmxhY2tsaXN0U3RhdHVzKGUpXX0pKX0pKX0sZS5wcm90b3R5cGUuaW5zZXJ0TWVzc2FnZT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGkpe3JldHVyblsyLHRoaXMuX2VuZ2luZS5pbnNlcnRNZXNzYWdlKGUsdCxuKV19KSl9KSl9LGUucHJvdG90eXBlLmRlbGV0ZU1lc3NhZ2VzPWZ1bmN0aW9uKGUpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbih0KXtyZXR1cm5bMix0aGlzLl9lbmdpbmUuZGVsZXRlTWVzc2FnZXMoZSldfSkpfSkpfSxlLnByb3RvdHlwZS5kZWxldGVNZXNzYWdlc0J5VGltZXN0YW1wPWZ1bmN0aW9uKGUsdCxuLGkscil7cmV0dXJuIHZvaWQgMD09PXImJihyPVwiXCIpLE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKHMpe3JldHVyblsyLHRoaXMuX2VuZ2luZS5kZWxldGVNZXNzYWdlc0J5VGltZXN0YW1wKGUsdCxuLGkscildfSkpfSkpfSxlLnByb3RvdHlwZS5jbGVhck1lc3NhZ2VzPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdm9pZCAwPT09biYmKG49XCJcIiksTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oaSl7cmV0dXJuWzIsdGhpcy5fZW5naW5lLmNsZWFyTWVzc2FnZXMoZSx0LG4pXX0pKX0pKX0sZS5wcm90b3R5cGUuZ2V0TWVzc2FnZT1mdW5jdGlvbihlKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24odCl7cmV0dXJuWzIsdGhpcy5fZW5naW5lLmdldE1lc3NhZ2UoZSldfSkpfSkpfSxlLnByb3RvdHlwZS5zZXRNZXNzYWdlQ29udGVudD1mdW5jdGlvbihlLHQsbil7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGkpe3JldHVyblsyLHRoaXMuX2VuZ2luZS5zZXRNZXNzYWdlQ29udGVudChlLHQsbildfSkpfSkpfSxlLnByb3RvdHlwZS5zZXRNZXNzYWdlU2VhcmNoRmllbGQ9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihpKXtyZXR1cm5bMix0aGlzLl9lbmdpbmUuc2V0TWVzc2FnZVNlYXJjaEZpZWxkKGUsdCxuKV19KSl9KSl9LGUucHJvdG90eXBlLnNldE1lc3NhZ2VTZW50U3RhdHVzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKG4pe3JldHVyblsyLHRoaXMuX2VuZ2luZS5zZXRNZXNzYWdlU2VudFN0YXR1cyhlLHQpXX0pKX0pKX0sZS5wcm90b3R5cGUuc2V0TWVzc2FnZVJlY2VpdmVkU3RhdHVzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKG4pe3JldHVyblsyLHRoaXMuX2VuZ2luZS5zZXRNZXNzYWdlUmVjZWl2ZWRTdGF0dXMoZSx0KV19KSl9KSl9LGUucHJvdG90eXBlLnNldFVzZXJTdGF0dXM9ZnVuY3Rpb24oZSl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKHQpe3JldHVyblsyLHRoaXMuX2VuZ2luZS5zZXRVc2VyU3RhdHVzKGUpXX0pKX0pKX0sZS5wcm90b3R5cGUuc3Vic2NyaWJlVXNlclN0YXR1cz1mdW5jdGlvbihlKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24odCl7cmV0dXJuWzIsdGhpcy5fZW5naW5lLnN1YnNjcmliZVVzZXJTdGF0dXMoZSldfSkpfSkpfSxlLnByb3RvdHlwZS5nZXRVc2VyU3RhdHVzPWZ1bmN0aW9uKGUpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbih0KXtyZXR1cm5bMix0aGlzLl9lbmdpbmUuZ2V0VXNlclN0YXR1cyhlKV19KSl9KSl9LGUucHJvdG90eXBlLnNlYXJjaENvbnZlcnNhdGlvbkJ5Q29udGVudD1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9W10pLHZvaWQgMD09PW4mJihuPVwiXCIpLE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKHIpe3JldHVyblsyLHRoaXMuX2VuZ2luZS5zZWFyY2hDb252ZXJzYXRpb25CeUNvbnRlbnQoZSx0LG4saSldfSkpfSkpfSxlLnByb3RvdHlwZS5zZWFyY2hNZXNzYWdlQnlDb250ZW50PWZ1bmN0aW9uKGUsdCxuLGkscixzLG8pe3JldHVybiB2b2lkIDA9PT1vJiYobz1cIlwiKSxNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihhKXtyZXR1cm5bMix0aGlzLl9lbmdpbmUuc2VhcmNoTWVzc2FnZUJ5Q29udGVudChlLHQsbixpLHIscyxvKV19KSl9KSl9LGUucHJvdG90eXBlLmdldFVucmVhZE1lbnRpb25lZE1lc3NhZ2VzPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdm9pZCAwPT09biYmKG49XCJcIiksdGhpcy5fZW5naW5lLmdldFVucmVhZE1lbnRpb25lZE1lc3NhZ2VzKGUsdCxuKX0sZS5wcm90b3R5cGUuY2xlYXJVbnJlYWRDb3VudEJ5VGltZXN0YW1wPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiB2b2lkIDA9PT1pJiYoaT1cIlwiKSx0aGlzLl9lbmdpbmUuY2xlYXJVbnJlYWRDb3VudEJ5VGltZXN0YW1wKGUsdCxuLGkpfSxlLnByb3RvdHlwZS5nZXRDb252ZXJzYXRpb25Ob3RpZmljYXRpb25TdGF0dXM9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB2b2lkIDA9PT1uJiYobj1cIlwiKSx0aGlzLl9lbmdpbmUuZ2V0Q29udmVyc2F0aW9uTm90aWZpY2F0aW9uU3RhdHVzKGUsdCxuKX0sZS5wcm90b3R5cGUuZ2V0UmVtb3RlSGlzdG9yeU1lc3NhZ2VzPWZ1bmN0aW9uKGUsdCxuLGkscixzKXtyZXR1cm4gdGhpcy5fZW5naW5lLmdldFJlbW90ZUhpc3RvcnlNZXNzYWdlcyhlLHQsbixpLHIscyl9LGUucHJvdG90eXBlLmdldENvbnZlcnNhdGlvbkxpc3RXaXRoQWxsQ2hhbm5lbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9lbmdpbmUuZ2V0Q29udmVyc2F0aW9uTGlzdFdpdGhBbGxDaGFubmVsKCl9LGUucHJvdG90eXBlLmdldENvbnZlcnNhdGlvbkxpc3RXaXRoQWxsQ2hhbm5lbEJ5UGFnZT1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLl9lbmdpbmUuZ2V0Q29udmVyc2F0aW9uTGlzdFdpdGhBbGxDaGFubmVsQnlQYWdlKGUsdCl9LGUucHJvdG90eXBlLmpvaW5SVENSb29tPWZ1bmN0aW9uKGUsdCxuLGkscixzKXtyZXR1cm4gdGhpcy5fZW5naW5lLmpvaW5SVENSb29tKGUsdCxuLGkscixzKX0sZS5wcm90b3R5cGUucXVpdFJUQ1Jvb209ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2VuZ2luZS5xdWl0UlRDUm9vbShlKX0sZS5wcm90b3R5cGUucnRjUGluZz1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHRoaXMuX2VuZ2luZS5ydGNQaW5nKGUsdCxuKX0sZS5wcm90b3R5cGUuZ2V0UlRDUm9vbUluZm89ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2VuZ2luZS5nZXRSVENSb29tSW5mbyhlKX0sZS5wcm90b3R5cGUuZ2V0UlRDVXNlckluZm9MaXN0PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9lbmdpbmUuZ2V0UlRDVXNlckluZm9MaXN0KGUpfSxlLnByb3RvdHlwZS5nZXRSVENVc2VySW5mbz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZW5naW5lLmdldFJUQ1VzZXJJbmZvKGUpfSxlLnByb3RvdHlwZS5zZXRSVENVc2VySW5mbz1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHRoaXMuX2VuZ2luZS5zZXRSVENVc2VySW5mbyhlLHQsbil9LGUucHJvdG90eXBlLnJlbW92ZVJUQ1VzZXJJbmZvPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX2VuZ2luZS5yZW1vdmVSVENVc2VySW5mbyhlLHQpfSxlLnByb3RvdHlwZS5zZXRSVENEYXRhPWZ1bmN0aW9uKGUsdCxuLGkscixzKXtyZXR1cm4gdGhpcy5fZW5naW5lLnNldFJUQ0RhdGEoZSx0LG4saSxyLHMpfSxlLnByb3RvdHlwZS5zZXRSVENUb3RhbFJlcz1mdW5jdGlvbihlLHQsbixpLHIpe3JldHVybiB2b2lkIDA9PT1yJiYocj1cIlwiKSx0aGlzLl9lbmdpbmUuc2V0UlRDVG90YWxSZXMoZSx0LG4saSxyKX0sZS5wcm90b3R5cGUuc2V0UlRDQ0ROVXJpcz1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHRoaXMuX2VuZ2luZS5zZXRSVENDRE5VcmlzKGUsdCxuKX0sZS5wcm90b3R5cGUuZ2V0UlRDRGF0YT1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gdGhpcy5fZW5naW5lLmdldFJUQ0RhdGEoZSx0LG4saSl9LGUucHJvdG90eXBlLnJlbW92ZVJUQ0RhdGE9ZnVuY3Rpb24oZSx0LG4saSxyKXtyZXR1cm4gdGhpcy5fZW5naW5lLnJlbW92ZVJUQ0RhdGEoZSx0LG4saSxyKX0sZS5wcm90b3R5cGUuc2V0UlRDT3V0RGF0YT1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gdGhpcy5fZW5naW5lLnNldFJUQ091dERhdGEoZSx0LG4saSl9LGUucHJvdG90eXBlLmdldFJUQ091dERhdGE9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5fZW5naW5lLmdldFJUQ091dERhdGEoZSx0KX0sZS5wcm90b3R5cGUuZ2V0UlRDVG9rZW49ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB0aGlzLl9lbmdpbmUuZ2V0UlRDVG9rZW4oZSx0LG4pfSxlLnByb3RvdHlwZS5zZXRSVENTdGF0ZT1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLl9lbmdpbmUuc2V0UlRDU3RhdGUoZSx0KX0sZS5wcm90b3R5cGUuZ2V0UlRDVXNlckxpc3Q9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2VuZ2luZS5nZXRSVENVc2VyTGlzdChlKX0sZS5wcm90b3R5cGUuam9pbkxpdmluZ1Jvb21Bc0F1ZGllbmNlPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdGhpcy5fZW5naW5lLmpvaW5MaXZpbmdSb29tQXNBdWRpZW5jZShlLHQsbil9LGUucHJvdG90eXBlLnF1aXRMaXZpbmdSb29tQXNBdWRpZW5jZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZW5naW5lLnF1aXRMaXZpbmdSb29tQXNBdWRpZW5jZShlKX0sZS5wcm90b3R5cGUucnRjSWRlbnRpdHlDaGFuZ2U9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB0aGlzLl9lbmdpbmUucnRjSWRlbnRpdHlDaGFuZ2UoZSx0LG4pfSxlLnByb3RvdHlwZS5nZXRSVENKb2luZWRVc2VySW5mbz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZW5naW5lLmdldFJUQ0pvaW5lZFVzZXJJbmZvKGUpfSxlLnByb3RvdHlwZS5yZXF1ZXN0Um9vbVBLPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9lbmdpbmUucmVxdWVzdFJvb21QSyhlKX0sZS5wcm90b3R5cGUuY2FuY2VsUm9vbVBLPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9lbmdpbmUuY2FuY2VsUm9vbVBLKGUpfSxlLnByb3RvdHlwZS5yZXNwb25zZVJvb21QSz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZW5naW5lLnJlc3BvbnNlUm9vbVBLKGUpfSxlLnByb3RvdHlwZS5lbmRSb29tUEs9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2VuZ2luZS5lbmRSb29tUEsoZSl9LGUucHJvdG90eXBlLmJpbmRSVENSb29tRm9yQ2hhdHJvb209ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2VuZ2luZS5iaW5kUlRDUm9vbUZvckNoYXRyb29tKGUpfSxlfSgpOyFmdW5jdGlvbihlKXtlW2UuYWRkPTFdPVwiYWRkXCIsZVtlLnVwZGF0ZT0yXT1cInVwZGF0ZVwiLGVbZS5kZWxldGU9M109XCJkZWxldGVcIn0oU3N8fChTcz17fSkpO3ZhciBPcz1cIjUuMi4xXCI7XG5cblxuLy8jIHNvdXJjZVVSTD13ZWJwYWNrOi8vQHJvbmdjbG91ZC9yY2xpdmVyb29tbGliLy4vbm9kZV9tb2R1bGVzL0Byb25nY2xvdWQvZW5naW5lL2Rpc3QvaW5kZXguZXNtLmpzPyIpOy8qKiovfSwvKioqLyIuL25vZGVfbW9kdWxlcy9Acm9uZ2Nsb3VkL2ltbGliLW5leHQvZGlzdC9pbmRleC5lc20uanMiOi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcCiAgISoqKiAuL25vZGVfbW9kdWxlcy9Acm9uZ2Nsb3VkL2ltbGliLW5leHQvZGlzdC9pbmRleC5lc20uanMgKioqIQogIFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8gLyoqKi9mdW5jdGlvbiBub2RlX21vZHVsZXNSb25nY2xvdWRJbWxpYk5leHREaXN0SW5kZXhFc21KcyhfX3VudXNlZF93ZWJwYWNrX21vZHVsZSxfX3dlYnBhY2tfZXhwb3J0c19fLF9fd2VicGFja19yZXF1aXJlX18pe2V2YWwoIl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0ICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCB7XG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiQ29ubmVjdGlvblN0YXR1c1wiOiAoKSA9PiAoLyogcmVleHBvcnQgc2FmZSAqLyBfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkNvbm5lY3Rpb25TdGF0dXMpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIkNvbnZlcnNhdGlvblR5cGVcIjogKCkgPT4gKC8qIHJlZXhwb3J0IHNhZmUgKi8gX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Db252ZXJzYXRpb25UeXBlKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJFcnJvckNvZGVcIjogKCkgPT4gKC8qIHJlZXhwb3J0IHNhZmUgKi8gX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIkxvZ0xldmVsXCI6ICgpID0+ICgvKiByZWV4cG9ydCBzYWZlICovIF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uTG9nTGV2ZWwpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIk1lbnRpb25lZFR5cGVcIjogKCkgPT4gKC8qIHJlZXhwb3J0IHNhZmUgKi8gX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5NZW50aW9uZWRUeXBlKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJNZXNzYWdlQmxvY2tUeXBlXCI6ICgpID0+ICgvKiByZWV4cG9ydCBzYWZlICovIF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uTWVzc2FnZUJsb2NrVHlwZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiTWVzc2FnZURpcmVjdGlvblwiOiAoKSA9PiAoLyogcmVleHBvcnQgc2FmZSAqLyBfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLk1lc3NhZ2VEaXJlY3Rpb24pLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIk5vdGlmaWNhdGlvblN0YXR1c1wiOiAoKSA9PiAoLyogcmVleHBvcnQgc2FmZSAqLyBfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLk5vdGlmaWNhdGlvblN0YXR1cyksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiUmVjZWl2ZWRTdGF0dXNcIjogKCkgPT4gKC8qIHJlZXhwb3J0IHNhZmUgKi8gX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5SZWNlaXZlZFN0YXR1cyksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiVXBsb2FkTWV0aG9kXCI6ICgpID0+ICgvKiByZWV4cG9ydCBzYWZlICovIF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uVXBsb2FkTWV0aG9kKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJCYXNlTWVzc2FnZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyB1dCksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiQ29tYmluZU1lc3NhZ2VcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gSXQpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIkNvbm5lY3RUeXBlXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIFZuKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJFdmVudHNcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gdyksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiRmlsZU1lc3NhZ2VcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gU3QpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIkdJRk1lc3NhZ2VcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gQ3QpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIkhRVm9pY2VNZXNzYWdlXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHB0KSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJJbWFnZU1lc3NhZ2VcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gbXQpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIkxvY2F0aW9uTWVzc2FnZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBFdCksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiTWVzc2FnZVR5cGVcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gem4pLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIlJlZmVyZW5jZU1lc3NhZ2VcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8geXQpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIlJpY2hDb250ZW50TWVzc2FnZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBSdCksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiU2lnaHRNZXNzYWdlXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIGh0KSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJUZXh0TWVzc2FnZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyB2dCksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiVm9pY2VNZXNzYWdlXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIFR0KSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJfX2FkZFNES1ZlcnNpb25cIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gQ2UpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImFkZENvbnZlcnNhdGlvbnNUb1RhZ1wiOiAoKSA9PiAoLyogYmluZGluZyAqLyBHbiksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiYWRkRXZlbnRMaXN0ZW5lclwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBwZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiYWRkVGFnXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIEFuKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJiaW5kUlRDUm9vbUZvckNoYXRyb29tXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIGR0KSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJjbGVhckFsbE1lc3NhZ2VzVW5yZWFkU3RhdHVzXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIF9lKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJjbGVhckV2ZW50TGlzdGVuZXJzXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIFNlKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJjbGVhckhpc3RvcnlNZXNzYWdlc1wiOiAoKSA9PiAoLyogYmluZGluZyAqLyBwbiksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiY2xlYXJNZXNzYWdlc1wiOiAoKSA9PiAoLyogYmluZGluZyAqLyBPbiksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiY2xlYXJNZXNzYWdlc1VucmVhZFN0YXR1c1wiOiAoKSA9PiAoLyogYmluZGluZyAqLyBNZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiY2xlYXJUZXh0TWVzc2FnZURyYWZ0XCI6ICgpID0+ICgvKiBiaW5kaW5nICovIE5lKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJjbGVhclVucmVhZENvdW50QnlUaW1lc3RhbXBcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gX24pLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImNvbm5lY3RcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gdWUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImRlbGV0ZUxvY2FsTWVzc2FnZXNCeVRpbWVzdGFtcFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBVbiksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZGVsZXRlTWVzc2FnZXNcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gbW4pLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImRpc2Nvbm5lY3RcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gbGUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImZvcmNlUmVtb3ZlQ2hhdFJvb21FbnRyeVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBydCksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZm9yY2VTZXRDaGF0Um9vbUVudHJ5XCI6ICgpID0+ICgvKiBiaW5kaW5nICovIG50KSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJnZXRBbGxDaGF0Um9vbUVudHJpZXNcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gaXQpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImdldEFsbENvbnZlcnNhdGlvblN0YXRlXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIERlKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJnZXRBbGxVbnJlYWRNZW50aW9uZWRDb3VudFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBHZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZ2V0QmxvY2tVbHRyYUdyb3VwTGlzdFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBIZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZ2V0QmxvY2tlZENvbnZlcnNhdGlvbkxpc3RcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8geGUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImdldENoYXRSb29tRW50cnlcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gc3QpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImdldENoYXRSb29tSW5mb1wiOiAoKSA9PiAoLyogYmluZGluZyAqLyAkZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZ2V0Q2hhdHJvb21IaXN0b3J5TWVzc2FnZXNcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gY3QpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImdldENvbm5lY3Rpb25TdGF0dXNcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gZ2UpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImdldENvbnZlcnNhdGlvbkxpc3RcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gVGUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImdldENvbnZlcnNhdGlvbk5vdGlmaWNhdGlvblN0YXR1c1wiOiAoKSA9PiAoLyogYmluZGluZyAqLyBBZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZ2V0Q29udmVyc2F0aW9uc0Zyb21UYWdCeVBhZ2VcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gQm4pLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImdldEN1cnJlbnRVc2VySWRcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gbWUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImdldEZpbGVUb2tlblwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBZdCksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZ2V0RmlsZVVybFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBRdCksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZ2V0Rmlyc3RVbnJlYWRNZXNzYWdlXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIFRuKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJnZXRIaXN0b3J5TWVzc2FnZXNcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gcm4pLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImdldE1lc3NhZ2VcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8geW4pLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImdldE1lc3NhZ2VSZWFkZXJcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gU24pLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImdldFJlbW90ZUhpc3RvcnlNZXNzYWdlc1wiOiAoKSA9PiAoLyogYmluZGluZyAqLyBzbiksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZ2V0U2VydmVyVGltZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBmZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZ2V0VGFnc1wiOiAoKSA9PiAoLyogYmluZGluZyAqLyBQbiksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZ2V0VGFnc0Zyb21Db252ZXJzYXRpb25cIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gTG4pLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImdldFRleHRNZXNzYWdlRHJhZnRcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8geWUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImdldFRvcENvbnZlcnNhdGlvbkxpc3RcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gUGUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImdldFRvdGFsVW5yZWFkQ291bnRcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gVWUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImdldFVsdHJhR3JvdXBMaXN0XCI6ICgpID0+ICgvKiBiaW5kaW5nICovIGtlKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJnZXRVbHRyYUdyb3VwTWVzc2FnZUxpc3RCeU1lc3NhZ2VVSWRcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gRmUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImdldFVsdHJhR3JvdXBVbnJlYWRNZW50aW9uZWRDb3VudEJ5VGFyZ2V0SWRcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gWGUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImdldFVucmVhZENvdW50XCI6ICgpID0+ICgvKiBiaW5kaW5nICovIE9lKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJnZXRVbnJlYWRDb3VudEJ5VGFnXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIEZuKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJnZXRVbnJlYWRNZW50aW9uZWRDb3VudFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBMZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZ2V0VW5yZWFkTWVudGlvbmVkTWVzc2FnZXNcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gUm4pLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImluaXRcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gY2UpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImluc2VydE1lc3NhZ2VcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gRW4pLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImluc3RhbGxQbHVnaW5cIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gZGUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImpvaW5DaGF0Um9vbVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBXZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiam9pbkV4aXN0Q2hhdFJvb21cIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gWWUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIm1vZGlmeU1lc3NhZ2VcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gS2UpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIm9uY2VFdmVudExpc3RlbmVyXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIGhlKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJxdWl0Q2hhdFJvb21cIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gUWUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcInJlY2FsbE1lc3NhZ2VcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gZm4pLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcInJlZ2lzdGVyTWVzc2FnZVR5cGVcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gQ24pLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcInJlbW92ZUFsbEV4cGFuc2lvbkZvclVsdHJhR3JvdXBNZXNzYWdlXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHplKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJyZW1vdmVDaGF0Um9vbUVudHJpZXNcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gYXQpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcInJlbW92ZUNoYXRSb29tRW50cnlcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gb3QpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcInJlbW92ZUNvbnZlcnNhdGlvblwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBFZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwicmVtb3ZlQ29udmVyc2F0aW9uc0Zyb21UYWdcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gRG4pLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcInJlbW92ZUV2ZW50TGlzdGVuZXJcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gdmUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcInJlbW92ZUV2ZW50TGlzdGVuZXJzXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIEllKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJyZW1vdmVFeHBhbnNpb25Gb3JVbHRyYUdyb3VwTWVzc2FnZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBWZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwicmVtb3ZlTWVzc2FnZUV4cGFuc2lvbkZvcktleVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyB2biksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwicmVtb3ZlVGFnXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHhuKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJyZW1vdmVUYWdGcm9tQ29udmVyc2F0aW9uc1wiOiAoKSA9PiAoLyogYmluZGluZyAqLyBIbiksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwicmVtb3ZlVGFnc0Zyb21Db252ZXJzYXRpb25cIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8ga24pLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcInNhdmVUZXh0TWVzc2FnZURyYWZ0XCI6ICgpID0+ICgvKiBiaW5kaW5nICovIFJlKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJzZWFyY2hDb252ZXJzYXRpb25CeUNvbnRlbnRcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gTW4pLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcInNlYXJjaE1lc3NhZ2VzXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIE5uKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJzZW5kRmlsZU1lc3NhZ2VcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gdG4pLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcInNlbmRIUVZvaWNlTWVzc2FnZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBvbiksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwic2VuZEltYWdlTWVzc2FnZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBubiksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwic2VuZE1lc3NhZ2VcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gJHQpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcInNlbmRSZWFkUmVjZWlwdE1lc3NhZ2VcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gY24pLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcInNlbmRSZWFkUmVjZWlwdFJlcXVlc3RcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gZG4pLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcInNlbmRSZWFkUmVjZWlwdFJlc3BvbnNlXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHVuKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJzZW5kUmVhZFJlY2VpcHRSZXNwb25zZVYyXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIGxuKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJzZW5kU2lnaHRNZXNzYWdlXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIGFuKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJzZW5kU3luY1JlYWRTdGF0dXNNZXNzYWdlXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIGduKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJzZW5kVGV4dE1lc3NhZ2VcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gWnQpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcInNlbmRUeXBpbmdTdGF0dXNNZXNzYWdlXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIEluKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJzZW5kVWx0cmFHcm91cFR5cGluZ1N0YXR1c1wiOiAoKSA9PiAoLyogYmluZGluZyAqLyBCZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwic2V0Q2hhdFJvb21FbnRyaWVzXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIGV0KSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJzZXRDaGF0Um9vbUVudHJ5XCI6ICgpID0+ICgvKiBiaW5kaW5nICovIFplKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJzZXRDb252ZXJzYXRpb25Ob3RpZmljYXRpb25TdGF0dXNcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gd2UpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcInNldENvbnZlcnNhdGlvblRvVG9wXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIGJlKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJzZXRDb252ZXJzYXRpb25Ub1RvcEluVGFnXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHFuKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJzZXRNZXNzYWdlUmVjZWl2ZWRTdGF0dXNcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gd24pLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcInVwZGF0ZUV4cGFuc2lvbkZvclVsdHJhR3JvdXBNZXNzYWdlXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHFlKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJ1cGRhdGVNZXNzYWdlRXhwYW5zaW9uXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIGhuKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJ1cGRhdGVUYWdcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gYm4pXG4vKiBoYXJtb255IGV4cG9ydCAqLyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgQHJvbmdjbG91ZC9lbmdpbmUgKi8gXCIuL25vZGVfbW9kdWxlcy9Acm9uZ2Nsb3VkL2ltbGliLW5leHQvbm9kZV9tb2R1bGVzL0Byb25nY2xvdWQvZW5naW5lL2Rpc3QvaW5kZXguZXNtLmpzXCIpO1xuXG4vKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxuXG5QZXJtaXNzaW9uIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBhbmQvb3IgZGlzdHJpYnV0ZSB0aGlzIHNvZnR3YXJlIGZvciBhbnlcbnB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC5cblxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiBBTkQgVEhFIEFVVEhPUiBESVNDTEFJTVMgQUxMIFdBUlJBTlRJRVMgV0lUSFxuUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZXG5BTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsXG5JTkRJUkVDVCwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIE9SIEFOWSBEQU1BR0VTIFdIQVRTT0VWRVIgUkVTVUxUSU5HIEZST01cbkxPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SXG5PVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SXG5QRVJGT1JNQU5DRSBPRiBUSElTIFNPRlRXQVJFLlxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi92YXIgeT1mdW5jdGlvbihlLHQpe3JldHVybiB5PU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgbiBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LG4pJiYoZVtuXT10W25dKX0seShlLHQpfTt2YXIgUj1mdW5jdGlvbigpe3JldHVybiBSPU9iamVjdC5hc3NpZ258fGZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuPTEsbz1hcmd1bWVudHMubGVuZ3RoO248bztuKyspZm9yKHZhciBhIGluIHQ9YXJndW1lbnRzW25dKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LGEpJiYoZVthXT10W2FdKTtyZXR1cm4gZX0sUi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O2Z1bmN0aW9uIE4oZSx0LG4sbyl7cmV0dXJuIG5ldyhufHwobj1Qcm9taXNlKSkoKGZ1bmN0aW9uKGEscil7ZnVuY3Rpb24gcyhlKXt0cnl7YyhvLm5leHQoZSkpfWNhdGNoKGUpe3IoZSl9fWZ1bmN0aW9uIGkoZSl7dHJ5e2Moby50aHJvdyhlKSl9Y2F0Y2goZSl7cihlKX19ZnVuY3Rpb24gYyhlKXt2YXIgdDtlLmRvbmU/YShlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiBuP3Q6bmV3IG4oKGZ1bmN0aW9uKGUpe2UodCl9KSkpLnRoZW4ocyxpKX1jKChvPW8uYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KSl9ZnVuY3Rpb24gVShlLHQpe3ZhciBuLG8sYSxyLHM9e2xhYmVsOjAsc2VudDpmdW5jdGlvbigpe2lmKDEmYVswXSl0aHJvdyBhWzFdO3JldHVybiBhWzFdfSx0cnlzOltdLG9wczpbXX07cmV0dXJuIHI9e25leHQ6aSgwKSx0aHJvdzppKDEpLHJldHVybjppKDIpfSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJihyW1N5bWJvbC5pdGVyYXRvcl09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pLHI7ZnVuY3Rpb24gaShyKXtyZXR1cm4gZnVuY3Rpb24oaSl7cmV0dXJuIGZ1bmN0aW9uKHIpe2lmKG4pdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7Zm9yKDtzOyl0cnl7aWYobj0xLG8mJihhPTImclswXT9vLnJldHVybjpyWzBdP28udGhyb3d8fCgoYT1vLnJldHVybikmJmEuY2FsbChvKSwwKTpvLm5leHQpJiYhKGE9YS5jYWxsKG8sclsxXSkpLmRvbmUpcmV0dXJuIGE7c3dpdGNoKG89MCxhJiYocj1bMiZyWzBdLGEudmFsdWVdKSxyWzBdKXtjYXNlIDA6Y2FzZSAxOmE9cjticmVhaztjYXNlIDQ6cmV0dXJuIHMubGFiZWwrKyx7dmFsdWU6clsxXSxkb25lOiExfTtjYXNlIDU6cy5sYWJlbCsrLG89clsxXSxyPVswXTtjb250aW51ZTtjYXNlIDc6cj1zLm9wcy5wb3AoKSxzLnRyeXMucG9wKCk7Y29udGludWU7ZGVmYXVsdDppZighKGE9cy50cnlzLChhPWEubGVuZ3RoPjAmJmFbYS5sZW5ndGgtMV0pfHw2IT09clswXSYmMiE9PXJbMF0pKXtzPTA7Y29udGludWV9aWYoMz09PXJbMF0mJighYXx8clsxXT5hWzBdJiZyWzFdPGFbM10pKXtzLmxhYmVsPXJbMV07YnJlYWt9aWYoNj09PXJbMF0mJnMubGFiZWw8YVsxXSl7cy5sYWJlbD1hWzFdLGE9cjticmVha31pZihhJiZzLmxhYmVsPGFbMl0pe3MubGFiZWw9YVsyXSxzLm9wcy5wdXNoKHIpO2JyZWFrfWFbMl0mJnMub3BzLnBvcCgpLHMudHJ5cy5wb3AoKTtjb250aW51ZX1yPXQuY2FsbChlLHMpfWNhdGNoKGUpe3I9WzYsZV0sbz0wfWZpbmFsbHl7bj1hPTB9aWYoNSZyWzBdKXRocm93IHJbMV07cmV0dXJue3ZhbHVlOnJbMF0/clsxXTp2b2lkIDAsZG9uZTohMH19KFtyLGldKX19fXZhciBPPW5ldyBfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkxvZ2dlcihcIlJDSU1cIiksTT1mdW5jdGlvbigpe3JldHVybiEoXCJ1bmRlZmluZWRcIj09dHlwZW9mIHVuaXx8IWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXCJjYW5JVXNlXCIsXCJnZXRTeXN0ZW1JbmZvXCJdLG49MCxvPXQubGVuZ3RoO248bztuKyspaWYoIWVbdFtuXV0pcmV0dXJuITE7cmV0dXJuITB9KHVuaSkpfSxfPU0oKTt2YXIgdyxBPXt0YWc6XCJicm93c2VyXCIsaHR0cFJlcTpmdW5jdGlvbihlKXt2YXIgdD1lLm1ldGhvZHx8X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5IdHRwTWV0aG9kLkdFVCxuPWUudGltZW91dHx8NmU0LHI9ZS5oZWFkZXJzLHM9ZS5xdWVyeSxpPWUuYm9keSxjPSgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXBwZW5kVXJsKShlLnVybCxzKTtyZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKGUpe3ZhciBvLGE9KG89XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFhNTEh0dHBSZXF1ZXN0JiZcIndpdGhDcmVkZW50aWFsc1wiaW4gbmV3IFhNTEh0dHBSZXF1ZXN0LFwidW5kZWZpbmVkXCIhPXR5cGVvZiBYTUxIdHRwUmVxdWVzdCYmbz9uZXcgWE1MSHR0cFJlcXVlc3Q6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFhEb21haW5SZXF1ZXN0P25ldyBYRG9tYWluUmVxdWVzdDpuZXcgQWN0aXZlWE9iamVjdChcIk1pY3Jvc29mdC5YTUxIVFRQXCIpKSxzPVwiW29iamVjdCBYRG9tYWluUmVxdWVzdF1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhKTtpZihhLm9wZW4odCxjKSxyJiZhLnNldFJlcXVlc3RIZWFkZXIpZm9yKHZhciBkIGluIHIpYS5zZXRSZXF1ZXN0SGVhZGVyKGQscltkXSk7aWYocyl7YS50aW1lb3V0PW4sYS5vbmxvYWQ9ZnVuY3Rpb24oKXtlKHtkYXRhOmEucmVzcG9uc2VUZXh0LHN0YXR1czphLnN0YXR1c3x8MjAwfSl9LGEub25lcnJvcj1mdW5jdGlvbigpe2Uoe3N0YXR1czphLnN0YXR1c3x8MH0pfSxhLm9udGltZW91dD1mdW5jdGlvbigpe2Uoe3N0YXR1czphLnN0YXR1c3x8MH0pfTt2YXIgdT1cIm9iamVjdFwiPT10eXBlb2YgaT9KU09OLnN0cmluZ2lmeShpKTppO2Euc2VuZCh1KX1lbHNlIGEub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7ND09PWEucmVhZHlTdGF0ZSYmZSh7ZGF0YTphLnJlc3BvbnNlVGV4dCxzdGF0dXM6YS5zdGF0dXN9KX0sYS5vbmVycm9yPWZ1bmN0aW9uKCl7ZSh7c3RhdHVzOmEuc3RhdHVzfHwwfSl9LHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7cmV0dXJuIGUoe3N0YXR1czphLnN0YXR1c3x8MH0pfSksbiksYS5zZW5kKGkpfSkpfSxsb2NhbFN0b3JhZ2U6bnVsbD09PXdpbmRvd3x8dm9pZCAwPT09d2luZG93P3ZvaWQgMDp3aW5kb3cubG9jYWxTdG9yYWdlLHNlc3Npb25TdG9yYWdlOm51bGw9PT13aW5kb3d8fHZvaWQgMD09PXdpbmRvdz92b2lkIDA6d2luZG93LnNlc3Npb25TdG9yYWdlLGlzU3VwcG9ydFNvY2tldDpmdW5jdGlvbigpe3ZhciBlPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBXZWJTb2NrZXQ7cmV0dXJuIGV8fE8ud2FybihcIndlYnNvY2tldCBub3Qgc3VwcG9ydFwiKSxlfSx1c2VOYXZpOiEwLGNvbm5lY3RQbGF0Zm9ybTpcIlwiLGlzRnJvbVVuaWFwcDpfLGNyZWF0ZVdlYlNvY2tldDpmdW5jdGlvbihlLHQpe3ZhciBuPW5ldyBXZWJTb2NrZXQoZSx0KTtyZXR1cm4gbi5iaW5hcnlUeXBlPVwiYXJyYXlidWZmZXJcIix7b25DbG9zZTpmdW5jdGlvbihlKXtuLm9uY2xvc2U9ZnVuY3Rpb24odCl7dmFyIG49dC5jb2RlLG89dC5yZWFzb247ZShuLG8pfX0sb25FcnJvcjpmdW5jdGlvbihlKXtuLm9uZXJyb3I9ZX0sb25NZXNzYWdlOmZ1bmN0aW9uKGUpe24ub25tZXNzYWdlPWZ1bmN0aW9uKHQpe2UodC5kYXRhKX19LG9uT3BlbjpmdW5jdGlvbihlKXtuLm9ub3Blbj1lfSxzZW5kOmZ1bmN0aW9uKGUpe24uc2VuZChlKX0sY2xvc2U6ZnVuY3Rpb24oZSx0KXtuLmNsb3NlKGUsdCl9fX0sY3JlYXRlRGF0YUNoYW5uZWw6ZnVuY3Rpb24oZSxvKXtyZXR1cm4gdGhpcy5pc1N1cHBvcnRTb2NrZXQoKSYmXCJ3ZWJzb2NrZXRcIj09PW8/bmV3IF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uV2ViU29ja2V0Q2hhbm5lbCh0aGlzLGUpOm5ldyBfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkNvbWV0Q2hhbm5lbCh0aGlzLGUpfX0seD1NKCksYj1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sbj0wO248YXJndW1lbnRzLmxlbmd0aDtuKyspdFtuXT1hcmd1bWVudHNbbl07dHJ5e3JldHVybiB3eFtlXS5hcHBseSh3eCx0KX1jYXRjaChlKXtPLmVycm9yKGUpfX19LFA9e3NldEl0ZW06YihcInNldFN0b3JhZ2VTeW5jXCIpLGdldEl0ZW06YihcImdldFN0b3JhZ2VTeW5jXCIpLHJlbW92ZUl0ZW06YihcInJlbW92ZVN0b3JhZ2VTeW5jXCIpLGNsZWFyOmIoXCJjbGVhclN0b3JhZ2VTeW5jXCIpfSxMPXt0YWc6XCJ3ZWNoYXRcIixodHRwUmVxOmZ1bmN0aW9uKGUpe3ZhciB0PWUubWV0aG9kfHxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkh0dHBNZXRob2QuR0VULG49ZS50aW1lb3V0fHw2ZTQscz1lLmhlYWRlcnMsaT1lLnF1ZXJ5LGM9ZS5ib2R5LGQ9KDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hcHBlbmRVcmwpKGUudXJsLGkpO3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24oZSl7d3gucmVxdWVzdCh7dXJsOmQsbWV0aG9kOnQsaGVhZGVyczpzLHRpbWVvdXQ6bixkYXRhOmMsc3VjY2VzczpmdW5jdGlvbih0KXtlKHtkYXRhOnQuZGF0YSxzdGF0dXM6dC5zdGF0dXNDb2RlfSl9LGZhaWw6ZnVuY3Rpb24oKXtlKHtzdGF0dXM6X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuUkNfSFRUUF9SRVFfVElNRU9VVH0pfX0pfSkpfSxsb2NhbFN0b3JhZ2U6UCxzZXNzaW9uU3RvcmFnZTpQLGlzU3VwcG9ydFNvY2tldDpmdW5jdGlvbigpe3JldHVybiEwfSx1c2VOYXZpOiExLGNvbm5lY3RQbGF0Zm9ybTpcIk1pbmlQcm9ncmFtXCIsaXNGcm9tVW5pYXBwOngsY3JlYXRlV2ViU29ja2V0OmZ1bmN0aW9uKGUsdCl7dmFyIG49d3guY29ubmVjdFNvY2tldCh7dXJsOmUscHJvdG9jb2xzOnR9KTtyZXR1cm57b25DbG9zZTpmdW5jdGlvbihlKXtuLm9uQ2xvc2UoKGZ1bmN0aW9uKHQpe2UodC5jb2RlLHQucmVhc29uKX0pKX0sb25FcnJvcjpmdW5jdGlvbihlKXtuLm9uRXJyb3IoKGZ1bmN0aW9uKHQpe2UodC5lcnJNc2cpfSkpfSxvbk1lc3NhZ2U6ZnVuY3Rpb24oZSl7bi5vbk1lc3NhZ2UoKGZ1bmN0aW9uKHQpe2UodC5kYXRhKX0pKX0sb25PcGVuOmZ1bmN0aW9uKGUpe24ub25PcGVuKGUpfSxzZW5kOmZ1bmN0aW9uKGUpe24uc2VuZCh7ZGF0YTplfSl9LGNsb3NlOmZ1bmN0aW9uKGUsdCl7bi5jbG9zZSh7Y29kZTplLHJlYXNvbjp0fSl9fX0sY3JlYXRlRGF0YUNoYW5uZWw6ZnVuY3Rpb24oZSxvKXtyZXR1cm5cIndlYnNvY2tldFwiPT09bz9uZXcgX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5XZWJTb2NrZXRDaGFubmVsKHRoaXMsZSk6bmV3IF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQ29tZXRDaGFubmVsKHRoaXMsZSl9fSxHPU0oKSxEPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxuPTA7bjxhcmd1bWVudHMubGVuZ3RoO24rKyl0W25dPWFyZ3VtZW50c1tuXTt0cnl7cmV0dXJuIG15W2VdLmFwcGx5KG15LHQpfWNhdGNoKGUpe08uZXJyb3IoZSl9fX0saz17c2V0SXRlbTpEKFwic2V0U3RvcmFnZVN5bmNcIiksZ2V0SXRlbTpEKFwiZ2V0U3RvcmFnZVN5bmNcIikscmVtb3ZlSXRlbTpEKFwicmVtb3ZlU3RvcmFnZVN5bmNcIiksY2xlYXI6RChcImNsZWFyU3RvcmFnZVN5bmNcIil9LEg9e3RhZzpcImFsaXBheVwiLGh0dHBSZXE6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5tZXRob2R8fF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uSHR0cE1ldGhvZC5HRVQsbj1lLnRpbWVvdXR8fDZlNCxzPWUuaGVhZGVycyxpPWUucXVlcnksYz1lLmJvZHksZD0oMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFwcGVuZFVybCkoZS51cmwsaSksdT1lLmRhdGFUeXBlfHxcImpzb25cIjtyZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKGUpe215LnJlcXVlc3Qoe3VybDpkLG1ldGhvZDp0LGhlYWRlcnM6cyx0aW1lb3V0Om4sZGF0YTpjLGRhdGFUeXBlOnUsc3VjY2VzczpmdW5jdGlvbih0KXtlKHtkYXRhOnQuZGF0YSxzdGF0dXM6dC5zdGF0dXN9KX0sZmFpbDpmdW5jdGlvbigpe2Uoe3N0YXR1czpfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5SQ19IVFRQX1JFUV9USU1FT1VUfSl9fSl9KSl9LGxvY2FsU3RvcmFnZTprLHNlc3Npb25TdG9yYWdlOmssaXNTdXBwb3J0U29ja2V0OmZ1bmN0aW9uKCl7cmV0dXJuITF9LHVzZU5hdmk6ITEsY29ubmVjdFBsYXRmb3JtOlwiTWluaVByb2dyYW1cIixpc0Zyb21VbmlhcHA6RyxjcmVhdGVEYXRhQ2hhbm5lbDpmdW5jdGlvbihlLG8pe3JldHVyblwid2Vic29ja2V0XCI9PT1vP25ldyBfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLldlYlNvY2tldENoYW5uZWwodGhpcyxlKTpuZXcgX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Db21ldENoYW5uZWwodGhpcyxlKX19LEI9TSgpLEY9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLG49MDtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKXRbbl09YXJndW1lbnRzW25dO3RyeXtyZXR1cm4gY29uc29sZS5sb2coXCJ0dFwiLHR0KSx0dFtlXS5hcHBseSh0dCx0KX1jYXRjaChlKXtPLmVycm9yKGUpfX19LHE9e3NldEl0ZW06RihcInNldFN0b3JhZ2VTeW5jXCIpLGdldEl0ZW06RihcImdldFN0b3JhZ2VTeW5jXCIpLHJlbW92ZUl0ZW06RihcInJlbW92ZVN0b3JhZ2VTeW5jXCIpLGNsZWFyOkYoXCJjbGVhclN0b3JhZ2VTeW5jXCIpfSxWPXt0YWc6XCJ0b3V0aWFvXCIsaXNTdXBwb3J0U29ja2V0OmZ1bmN0aW9uKCl7cmV0dXJuITB9LHVzZU5hdmk6ITEsY29ubmVjdFBsYXRmb3JtOlwiTWluaVByb2dyYW1cIixpc0Zyb21VbmlhcHA6Qixsb2NhbFN0b3JhZ2U6cSxzZXNzaW9uU3RvcmFnZTpxLGh0dHBSZXE6ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbih0LG4pe3R0LnJlcXVlc3Qoe3VybDplLnVybCxkYXRhOmUuYm9keSxoZWFkZXI6ZS5oZWFkZXJzLG1ldGhvZDplLm1ldGhvZCxzdWNjZXNzOmZ1bmN0aW9uKGUpe2NvbnNvbGUubG9nKFwi6LCD55So5oiQ5YqfXCIsZS5kYXRhKTt2YXIgbj0obnVsbD09ZT92b2lkIDA6ZS5kYXRhKXx8e30sbz17ZGF0YTpKU09OLnN0cmluZ2lmeShuKSxzdGF0dXM6ZS5zdGF0dXNDb2RlfTt0KG8pfSxmYWlsOmZ1bmN0aW9uKGUpe2NvbnNvbGUubG9nKFwi6LCD55So5aSx6LSlXCIsZS5lcnJNc2cpLG4oe2RhdGE6ZS5lcnJNc2d9KX19KX0pKX0sY3JlYXRlV2ViU29ja2V0OmZ1bmN0aW9uKGUsdCl7dmFyIG49dHQuY29ubmVjdFNvY2tldCh7dXJsOmUscHJvdG9jb2xzOnR9KTtyZXR1cm57b25PcGVuOmZ1bmN0aW9uKGUpe24ub25PcGVuKGUpfSxvbkNsb3NlOmZ1bmN0aW9uKGUpe24ub25DbG9zZSgoZnVuY3Rpb24odCl7cmV0dXJuIGUodC5jb2RlLHQucmVhc29uKX0pKX0sb25FcnJvcjpmdW5jdGlvbihlKXtuLm9uRXJyb3IoKGZ1bmN0aW9uKHQpe3JldHVybiBlKHQuZXJyTXNnKX0pKX0sb25NZXNzYWdlOmZ1bmN0aW9uKGUpe24ub25NZXNzYWdlKChmdW5jdGlvbih0KXtyZXR1cm4gZSh0LmRhdGEpfSkpfSxzZW5kOmZ1bmN0aW9uKGUpe24uc2VuZCh7ZGF0YTplfSl9LGNsb3NlOmZ1bmN0aW9uKGUsdCl7bi5jbG9zZSh7Y29kZTplLHJlYXNvbjp0fSl9fX0sY3JlYXRlRGF0YUNoYW5uZWw6ZnVuY3Rpb24oZSxvKXtyZXR1cm5cIndlYnNvY2tldFwiPT09bz9uZXcgX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5XZWJTb2NrZXRDaGFubmVsKHRoaXMsZSk6bmV3IF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQ29tZXRDaGFubmVsKHRoaXMsZSl9fSx6PU0oKSxLPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxuPTA7bjxhcmd1bWVudHMubGVuZ3RoO24rKyl0W25dPWFyZ3VtZW50c1tuXTt0cnl7cmV0dXJuIGNvbnNvbGUubG9nKFwic3dhblwiLHN3YW4pLHN3YW5bZV0uYXBwbHkoc3dhbix0KX1jYXRjaChlKXtPLmVycm9yKGUpfX19LFg9e3NldEl0ZW06SyhcInNldFN0b3JhZ2VTeW5jXCIpLGdldEl0ZW06SyhcImdldFN0b3JhZ2VTeW5jXCIpLHJlbW92ZUl0ZW06SyhcInJlbW92ZVN0b3JhZ2VTeW5jXCIpLGNsZWFyOksoXCJjbGVhclN0b3JhZ2VTeW5jXCIpfSxqPXt0YWc6XCJiYWlkdVwiLGlzU3VwcG9ydFNvY2tldDpmdW5jdGlvbigpe3JldHVybiEwfSx1c2VOYXZpOiExLGNvbm5lY3RQbGF0Zm9ybTpcIk1pbmlQcm9ncmFtXCIsaXNGcm9tVW5pYXBwOnosbG9jYWxTdG9yYWdlOlgsc2Vzc2lvblN0b3JhZ2U6WCxodHRwUmVxOmZ1bmN0aW9uKGUpe3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24odCxuKXtzd2FuLnJlcXVlc3Qoe3VybDplLnVybCxkYXRhOmUuYm9keSxoZWFkZXI6ZS5oZWFkZXJzLG1ldGhvZDplLm1ldGhvZCxzdWNjZXNzOmZ1bmN0aW9uKGUpe2NvbnNvbGUubG9nKFwi6LCD55So5oiQ5YqfXCIsZS5kYXRhKTt2YXIgbj0obnVsbD09ZT92b2lkIDA6ZS5kYXRhKXx8e30sbz17ZGF0YTpKU09OLnN0cmluZ2lmeShuKSxzdGF0dXM6ZS5zdGF0dXNDb2RlfTt0KG8pfSxmYWlsOmZ1bmN0aW9uKGUpe2NvbnNvbGUubG9nKFwi6LCD55So5aSx6LSlXCIsZS5lcnJvckNvZGUpLG4oe2RhdGE6ZS5lcnJvckNvZGV9KX19KX0pKX0sY3JlYXRlV2ViU29ja2V0OmZ1bmN0aW9uKGUsdCl7dmFyIG49c3dhbi5jb25uZWN0U29ja2V0KHt1cmw6ZSxwcm90b2NvbHM6dH0pO3JldHVybntvbk9wZW46ZnVuY3Rpb24oZSl7bi5vbk9wZW4oZSl9LG9uQ2xvc2U6ZnVuY3Rpb24oZSl7bi5vbkNsb3NlKChmdW5jdGlvbih0KXtyZXR1cm4gZSh0LmNvZGUsdC5yZWFzb24pfSkpfSxvbkVycm9yOmZ1bmN0aW9uKGUpe24ub25FcnJvcigoZnVuY3Rpb24odCl7cmV0dXJuIGUodC5lcnJNc2cpfSkpfSxvbk1lc3NhZ2U6ZnVuY3Rpb24oZSl7bi5vbk1lc3NhZ2UoKGZ1bmN0aW9uKHQpe3JldHVybiBlKHQuZGF0YSl9KSl9LHNlbmQ6ZnVuY3Rpb24oZSl7bi5zZW5kKHtkYXRhOmV9KX0sY2xvc2U6ZnVuY3Rpb24oZSx0KXtuLmNsb3NlKHtjb2RlOmUscmVhc29uOnR9KX19fSxjcmVhdGVEYXRhQ2hhbm5lbDpmdW5jdGlvbihlLG8pe3JldHVyblwid2Vic29ja2V0XCI9PT1vP25ldyBfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLldlYlNvY2tldENoYW5uZWwodGhpcyxlKTpuZXcgX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Db21ldENoYW5uZWwodGhpcyxlKX19LEo9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLG49MDtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKXRbbl09YXJndW1lbnRzW25dO3RyeXtyZXR1cm4gdW5pW2VdLmFwcGx5KHVuaSx0KX1jYXRjaChlKXtPLmVycm9yKGUpfX19LFc9e3NldEl0ZW06SihcInNldFN0b3JhZ2VTeW5jXCIpLGdldEl0ZW06SihcImdldFN0b3JhZ2VTeW5jXCIpLHJlbW92ZUl0ZW06SihcInJlbW92ZVN0b3JhZ2VTeW5jXCIpLGNsZWFyOkooXCJjbGVhclN0b3JhZ2VTeW5jXCIpfSxZPXt0YWc6XCJ1bmlhcHBcIixodHRwUmVxOmZ1bmN0aW9uKGUpe3ZhciB0PWUubWV0aG9kfHxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkh0dHBNZXRob2QuR0VULG49ZS50aW1lb3V0fHw2ZTQscz1lLmhlYWRlcnMsaT1lLnF1ZXJ5LGM9ZS5ib2R5LGQ9KDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hcHBlbmRVcmwpKGUudXJsLGkpO3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24oZSl7dW5pLnJlcXVlc3Qoe3VybDpkLG1ldGhvZDp0LGhlYWRlcnM6cyx0aW1lb3V0Om4sZGF0YTpjLHN1Y2Nlc3M6ZnVuY3Rpb24odCl7ZSh7ZGF0YTp0LmRhdGEsc3RhdHVzOnQuc3RhdHVzQ29kZX0pfSxmYWlsOmZ1bmN0aW9uKCl7ZSh7c3RhdHVzOl9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlJDX0hUVFBfUkVRX1RJTUVPVVR9KX19KX0pKX0sbG9jYWxTdG9yYWdlOlcsc2Vzc2lvblN0b3JhZ2U6Vyxpc1N1cHBvcnRTb2NrZXQ6ZnVuY3Rpb24oKXtyZXR1cm4hMH0sdXNlTmF2aTohMCxjb25uZWN0UGxhdGZvcm06XCJcIixpc0Zyb21VbmlhcHA6ITAsY3JlYXRlV2ViU29ja2V0OmZ1bmN0aW9uKGUsdCl7dmFyIG49e2NvbXBsZXRlOmZ1bmN0aW9uKCl7fSx1cmw6ZSxwcm90b2NvbHM6dH0sbz11bmkuY29ubmVjdFNvY2tldChuKTtyZXR1cm57b25DbG9zZTpmdW5jdGlvbihlKXtvLm9uQ2xvc2UoKGZ1bmN0aW9uKHQpe2UodC5jb2RlLHQucmVhc29uKX0pKX0sb25FcnJvcjpmdW5jdGlvbihlKXtvLm9uRXJyb3IoKGZ1bmN0aW9uKHQpe2UodC5lcnJNc2cpfSkpfSxvbk1lc3NhZ2U6ZnVuY3Rpb24oZSl7by5vbk1lc3NhZ2UoKGZ1bmN0aW9uKHQpe2UodC5kYXRhKX0pKX0sb25PcGVuOmZ1bmN0aW9uKGUpe28ub25PcGVuKGUpfSxzZW5kOmZ1bmN0aW9uKGUpe28uc2VuZCh7ZGF0YTplfSl9LGNsb3NlOmZ1bmN0aW9uKGUsdCl7by5jbG9zZSh7Y29kZTplLHJlYXNvbjp0fSl9fX0sY3JlYXRlRGF0YUNoYW5uZWw6ZnVuY3Rpb24oZSxvKXtyZXR1cm5cIndlYnNvY2tldFwiPT09bz9uZXcgX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5XZWJTb2NrZXRDaGFubmVsKHRoaXMsZSk6bmV3IF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQ29tZXRDaGFubmVsKHRoaXMsZSl9fSxRPWZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLmNhbklVc2UmJmUuZ2V0U3lzdGVtSW5mb30sJD1cInVuZGVmaW5lZFwiIT10eXBlb2YgdW5pJiZRKHVuaSk/ZnVuY3Rpb24oKXtzd2l0Y2gocHJvY2Vzcy5lbnYuVlVFX0FQUF9QTEFURk9STSl7Y2FzZVwiYXBwLXBsdXNcIjpyZXR1cm4gWTtjYXNlXCJtcC1iYWlkdVwiOnJldHVybiBqO2Nhc2VcIm1wLXRvdXRpYW9cIjpyZXR1cm4gVjtjYXNlXCJtcC1hbGlwYXlcIjpyZXR1cm4gSDtjYXNlXCJtcC13ZWl4aW5cIjpyZXR1cm4gTDtkZWZhdWx0OnJldHVybiBBfX0oKTpcInVuZGVmaW5lZFwiIT10eXBlb2Ygd3gmJlEod3gpP0w6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIG15JiZRKG15KT9IOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB0dCYmUSh0dCk/VjpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc3dhbiYmUShzd2FuKT9qOkE7ZnVuY3Rpb24gWihlKXt2YXIgdD1lLmNvbnZlcnNhdGlvblR5cGUsbj1lLmNoYW5uZWxJZCxvPWUubWVzc2FnZVR5cGUsYT1lLmNvbnRlbnQscj1lLnNlbmRlclVzZXJJZCxjPWUudGFyZ2V0SWQsZD1lLnNlbnRUaW1lLHU9ZS5yZWNlaXZlZFRpbWUsbD1lLm1lc3NhZ2VVSWQsZz1lLm1lc3NhZ2VEaXJlY3Rpb24sZj1lLmlzUGVyc2l0ZWQsbT1lLmlzQ291bnRlZCxwPWUuaXNPZmZMaW5lTWVzc2FnZSxoPWUuY2FuSW5jbHVkZUV4cGFuc2lvbix2PWUuZXhwYW5zaW9uLEk9ZS5yZWNlaXZlZFN0YXR1cyxTPWUuZGlzYWJsZU5vdGlmaWNhdGlvbixDPWUuaXNNZW50aW9uZWQsVD1lLmlzU3RhdHVzTWVzc2FnZSxFPWUucmVhZFJlY2VpcHRJbmZvLHk9ZS5wdXNoQ29uZmlnLFI9ZS5tZXNzYWdlSWQsTj1lLmlzSW50ZXJydXB0LFU9ZS5pc01vZGlmeU1lc3NhZ2U7SXx8KEk9X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5SZWNlaXZlZFN0YXR1cy5VTlJFQUQpO3ZhciBPPXttZXNzYWdlVHlwZTpvLGNoYW5uZWxJZDpufHxcIlwiLGNvbnRlbnQ6YSxzZW5kZXJVc2VySWQ6cix0YXJnZXRJZDpjLGNvbnZlcnNhdGlvblR5cGU6dCxzZW50VGltZTpkLHJlY2VpdmVkVGltZTp1LG1lc3NhZ2VVSWQ6bCxtZXNzYWdlRGlyZWN0aW9uOmcsaXNQZXJzaXRlZDpmLGlzQ291bnRlZDptLGlzTWVudGlvbmVkOkMsZGlzYWJsZU5vdGlmaWNhdGlvbjpTLGlzU3RhdHVzTWVzc2FnZTpULGNhbkluY2x1ZGVFeHBhbnNpb246aCxleHBhbnNpb246dixyZWNlaXZlZFN0YXR1czpJLHJlYWRSZWNlaXB0SW5mbzpFLHB1c2hDb25maWc6eSxtZXNzYWdlSWQ6Uixpc0ludGVycnVwdDpOLGlzTW9kaWZ5TWVzc2FnZTpVfTtyZXR1cm4gdCE9PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQ29udmVyc2F0aW9uVHlwZS5VTFRSQV9HUk9VUCYmKE8uaXNPZmZMaW5lTWVzc2FnZT1wKSxPfSFmdW5jdGlvbihlKXtlLkNPTk5FQ1RJTkc9XCJDT05ORUNUSU5HXCIsZS5DT05ORUNURUQ9XCJDT05ORUNURURcIixlLkRJU0NPTk5FQ1Q9XCJESVNDT05ORUNUXCIsZS5TVVNQRU5EPVwiU1VTUEVORFwiLGUuTUVTU0FHRVM9XCJNRVNTQUdFU1wiLGUuUkVBRF9SRUNFSVBUX1JFQ0VJVkVEPVwiUkVBRF9SRUNFSVBUX1JFQ0VJVkVEXCIsZS5NRVNTQUdFX1JFQ0VJUFRfUkVRVUVTVD1cIk1FU1NBR0VfUkVDRUlQVF9SRVFVRVNUXCIsZS5NRVNTQUdFX1JFQ0VJUFRfUkVTUE9OU0U9XCJNRVNTQUdFX1JFQ0VJUFRfUkVTUE9OU0VcIixlLkNPTlZFUlNBVElPTj1cIkNPTlZFUlNBVElPTlwiLGUuQ0hBVFJPT009XCJDSEFUUk9PTVwiLGUuRVhQQU5TSU9OPVwiRVhQQU5TSU9OXCIsZS5QVUxMX09GRkxJTkVfTUVTU0FHRV9GSU5JU0hFRD1cIlBVTExfT0ZGTElORV9NRVNTQUdFX0ZJTklTSEVEXCIsZS5UQUc9XCJUQUdcIixlLkNPTlZFUlNBVElPTl9UQUc9XCJDT05WRVJTQVRJT05fVEFHXCIsZS5UWVBJTkdfU1RBVFVTPVwiVFlQSU5HX1NUQVRVU1wiLGUuTUVTU0FHRV9CTE9DS0VEPVwiTUVTU0FHRV9CTE9DS0VEXCIsZS5VTFRSQV9HUk9VUF9FTkFCTEU9XCJVTFRSQV9HUk9VUF9FTkFCTEVcIixlLk9QRVJBVEVfU1RBVFVTPVwiT1BFUkFURV9TVEFUVVNcIixlLlVMVFJBX0dST1VQX01FU1NBR0VfRVhQQU5TSU9OX1VQREFURUQ9XCJVTFRSQV9HUk9VUF9NRVNTQUdFX0VYUEFOU0lPTl9VUERBVEVEXCIsZS5VTFRSQV9HUk9VUF9NRVNTQUdFX01PRElGSUVEPVwiVUxUUkFfR1JPVVBfTUVTU0FHRV9NT0RJRklFRFwiLGUuVUxUUkFfR1JPVVBfTUVTU0FHRV9SRUNBTExFRD1cIlVMVFJBX0dST1VQX01FU1NBR0VfUkVDQUxMRURcIn0od3x8KHc9e30pKTt2YXIgZWUsdGU9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChuKXt2YXIgbz1lLmNhbGwodGhpcyl8fHRoaXM7aWYodC5pbUNsaWVudClyZXR1cm4gTy5lcnJvcihcIlBsZWFzZSBkbyBub3QgcmVwZWF0ZWRseSBwZXJmb3JtIHRoZSBpbml0IG1ldGhvZFwiKSx0LmltQ2xpZW50OygwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm9wdGlvbnMubmF2aWdhdG9yc1wiLG4ubmF2aWdhdG9ycywoZnVuY3Rpb24oZSl7cmV0dXJuICgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uaXNBcnJheSkoZSkmJigwPT09ZS5sZW5ndGh8fGUuZXZlcnkoX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5pc0h0dHBVcmwpKX0pKTt2YXIgYT1udWxsPT1uP3ZvaWQgMDpuLmNvbm5lY3RUeXBlO3JldHVybiBhP19yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQ09OTkVDVElPTl9UWVBFLldFQlNPQ0tFVCE9PWEmJl9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQ09OTkVDVElPTl9UWVBFLkNPTUVUIT09YSYmKE8ud2FybihcIlJvbmdJTUxpYiBjb25uZWN0aW9uVHlwZSBtdXN0IGJlIFwiK19yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQ09OTkVDVElPTl9UWVBFLldFQlNPQ0tFVCtcIiBvciBcIitfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkNPTk5FQ1RJT05fVFlQRS5DT01FVCksYT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkNPTk5FQ1RJT05fVFlQRS5XRUJTT0NLRVQpOmE9X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5DT05ORUNUSU9OX1RZUEUuV0VCU09DS0VULG8uX2NvbnRleHQ9X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5BUElDb250ZXh0LmluaXQoJCx7YXBwa2V5Om4uYXBwa2V5LGFwaVZlcnNpb246XCI1LjIuMVwiLG5hdmlnYXRvcnM6bi5uYXZpZ2F0b3JzfHxbXSxtaW5pQ01QUHJveHk6bi5jdXN0b21DTVB8fFtdLGNvbm5lY3Rpb25UeXBlOmEsbG9nTGV2ZWw6bi5sb2dMZXZlbCxsb2dTdGRvdXQ6bi5sb2dTdGRvdXQsaW5kZXhEQlN3aXRjaDpuLmluZGV4REJTd2l0Y2gsY2hlY2tDQTpuLmNoZWNrQ0F9KSxvLndhdGNoKCksdC5pbUNsaWVudD1vLG99cmV0dXJuIGZ1bmN0aW9uKGUsdCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIrU3RyaW5nKHQpK1wiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9ZX15KGUsdCksZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KToobi5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IG4pfSh0LGUpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcImNvbnRleHRcIix7Z2V0OmZ1bmN0aW9uKCl7aWYoIXRoaXMuX2NvbnRleHQpdGhyb3cgbmV3IEVycm9yKFwiUGxlYXNlIHBlcmZvcm0gdGhlIGluaXQgbWV0aG9kIVwiKTtyZXR1cm4gdGhpcy5fY29udGV4dH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSx0LnByb3RvdHlwZS53YXRjaD1mdW5jdGlvbigpe3ZhciBlPXRoaXMsdD17b25Db25uZWN0aW5nOmZ1bmN0aW9uKCl7ZS5lbWl0KHcuQ09OTkVDVElORyl9LG9uQ29ubmVjdGVkOmZ1bmN0aW9uKCl7ZS5lbWl0KHcuQ09OTkVDVEVEKX0sb25EaXNjb25uZWN0OmZ1bmN0aW9uKHQpe2UuZW1pdCh3LkRJU0NPTk5FQ1QsdCl9LG9uU3VzcGVuZDpmdW5jdGlvbih0KXtlLmVtaXQody5TVVNQRU5ELHQpfSxiYXRjaE1lc3NhZ2U6ZnVuY3Rpb24odCl7ZS5lbWl0KHcuTUVTU0FHRVMse21lc3NhZ2VzOnQubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gWihlKX0pKX0pfSx0eXBpbmdTdGF0ZTpmdW5jdGlvbih0KXtlLmVtaXQody5UWVBJTkdfU1RBVFVTLHtzdGF0dXM6dH0pfSxyZWFkUmVjZWlwdFJlY2VpdmVkOmZ1bmN0aW9uKHQsbixvKXtlLmVtaXQody5SRUFEX1JFQ0VJUFRfUkVDRUlWRUQse2NvbnZlcnNhdGlvbjp0LG1lc3NhZ2VVSWQ6bixzZW50VGltZTpvfSl9LG1lc3NhZ2VSZWNlaXB0UmVxdWVzdDpmdW5jdGlvbih0LG4sbyl7ZS5lbWl0KHcuTUVTU0FHRV9SRUNFSVBUX1JFUVVFU1Qse2NvbnZlcnNhdGlvbjp0LG1lc3NhZ2VVSWQ6bixzZW5kZXJVc2VySWQ6b30pfSxtZXNzYWdlUmVjZWlwdFJlc3BvbnNlOmZ1bmN0aW9uKHQsbixvKXtlLmVtaXQody5NRVNTQUdFX1JFQ0VJUFRfUkVTUE9OU0Use2NvbnZlcnNhdGlvbjp0LHJlY2VpdmVkVXNlcklkOm4sbWVzc2FnZVVJZExpc3Q6b30pfSxjb252ZXJzYXRpb25TdGF0ZTpmdW5jdGlvbih0KXt2YXIgbj10Lm1hcCgoZnVuY3Rpb24oZSl7dmFyIHQ9ZS5jb252ZXJzYXRpb25UeXBlO3JldHVybiB0PT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Db252ZXJzYXRpb25UeXBlLlVMVFJBX0dST1VQP3tjb252ZXJzYXRpb246e2NvbnZlcnNhdGlvblR5cGU6dCxsYXRlc3RNZXNzYWdlOmUubGF0ZXN0TWVzc2FnZT9aKGUubGF0ZXN0TWVzc2FnZSk6bnVsbCx0YXJnZXRJZDplLnRhcmdldElkLHVucmVhZE1lc3NhZ2VDb3VudDplLnVucmVhZE1lc3NhZ2VDb3VudCx1bnJlYWRNZW50aW9uZWRDb3VudDplLnVucmVhZE1lbnRpb25lZENvdW50LHZlcnNpb25UaW1lOmUudmVyc2lvblRpbWUsbm90aWZpY2F0aW9uU3RhdHVzOmUubm90aWZpY2F0aW9uU3RhdHVzLGxhc3RVbnJlYWRUaW1lOmUubGFzdFVucmVhZFRpbWUsY2hhbm5lbElkOmUuY2hhbm5lbElkfX06e2NvbnZlcnNhdGlvbjp7Y29udmVyc2F0aW9uVHlwZTp0LGxhdGVzdE1lc3NhZ2U6ZS5sYXRlc3RNZXNzYWdlP1ooZS5sYXRlc3RNZXNzYWdlKTpudWxsLHRhcmdldElkOmUudGFyZ2V0SWQsdW5yZWFkTWVzc2FnZUNvdW50OmUudW5yZWFkTWVzc2FnZUNvdW50LGhhc01lbnRpb25lZDplLmhhc01lbnRpb25lZCxtZW50aW9uZWRJbmZvOmUubWVudGlvbmVkSW5mbyxsYXN0VW5yZWFkVGltZTplLmxhc3RVbnJlYWRUaW1lLG5vdGlmaWNhdGlvblN0YXR1czplLm5vdGlmaWNhdGlvblN0YXR1cyxpc1RvcDplLmlzVG9wLGNoYW5uZWxJZDplLmNoYW5uZWxJZCx1bnJlYWRNZW50aW9uZWRDb3VudDplLnVucmVhZE1lbnRpb25lZENvdW50fSx1cGRhdGVkSXRlbXM6ZS51cGRhdGVkSXRlbXN9fSkpO2UuZW1pdCh3LkNPTlZFUlNBVElPTix7Y29udmVyc2F0aW9uTGlzdDpufSl9LGNoYXRyb29tU3RhdGU6ZnVuY3Rpb24odCl7ZS5lbWl0KHcuQ0hBVFJPT00sdCl9LGV4cGFuc2lvbjpmdW5jdGlvbih0KXtlLmVtaXQody5FWFBBTlNJT04sdCl9LHB1bGxGaW5pc2hlZDpmdW5jdGlvbigpe2UuZW1pdCh3LlBVTExfT0ZGTElORV9NRVNTQUdFX0ZJTklTSEVEKX0sdGFnOmZ1bmN0aW9uKCl7ZS5lbWl0KHcuVEFHKX0sY29udmVyc2F0aW9uVGFnQ2hhbmdlZDpmdW5jdGlvbigpe2UuZW1pdCh3LkNPTlZFUlNBVElPTl9UQUcpfSxtZXNzYWdlQmxvY2tlZDpmdW5jdGlvbih0KXtlLmVtaXQody5NRVNTQUdFX0JMT0NLRUQsdCl9LHVsdHJhR3JvdXBFbmFibGU6ZnVuY3Rpb24odCl7ZS5lbWl0KHcuVUxUUkFfR1JPVVBfRU5BQkxFLHQpfSxvcGVyYXRlU3RhdHVzOmZ1bmN0aW9uKHQpe2UuZW1pdCh3Lk9QRVJBVEVfU1RBVFVTLHQpfSx1bHRyYUdyb3VwTWVzc2FnZUV4cGFuc2lvblVwZGF0ZWQ6ZnVuY3Rpb24odCl7ZS5lbWl0KHcuVUxUUkFfR1JPVVBfTUVTU0FHRV9FWFBBTlNJT05fVVBEQVRFRCx0KX0sdWx0cmFHcm91cE1lc3NhZ2VNb2RpZmllZDpmdW5jdGlvbih0KXtlLmVtaXQody5VTFRSQV9HUk9VUF9NRVNTQUdFX01PRElGSUVELHQpfSx1bHRyYUdyb3VwTWVzc2FnZVJlY2FsbGVkOmZ1bmN0aW9uKHQpe2UuZW1pdCh3LlVMVFJBX0dST1VQX01FU1NBR0VfUkVDQUxMRUQsdCl9fTt0aGlzLmNvbnRleHQuYXNzaWduV2F0Y2hlcih0KX0sdH0oX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FdmVudEVtaXR0ZXIpLG5lPXtUSU1FT1VUOntjb2RlOi0xLG1zZzpcIk5ldHdvcmsgdGltZW91dFwifSxTREtfSU5URVJOQUxfRVJST1I6e2NvZGU6LTIsbXNnOlwiU0RLIGludGVybmFsIGVycm9yXCJ9LFBBUkFNRVRFUl9FUlJPUjp7Y29kZTotMyxtc2c6XCJQbGVhc2UgY2hlY2sgdGhlIHBhcmFtZXRlcnMsIHRoZSB7cGFyYW19IGV4cGVjdGVkIGEgdmFsdWUgb2Yge2V4cGVjdH0gYnV0IHJlY2VpdmVkIHtjdXJyZW50fVwifSxSRUpFQ1RFRF9CWV9CTEFDS0xJU1Q6e2NvZGU6NDA1LG1zZzpcIkJsYWNrbGlzdGVkIGJ5IHRoZSBvdGhlciBwYXJ0eVwifSxTRU5EX1RPT19GQVNUOntjb2RlOjIwNjA0LG1zZzpcIlNlbmRpbmcgbWVzc2FnZXMgdG9vIHF1aWNrbHlcIn0sTk9UX0lOX0dST1VQOntjb2RlOjIyNDA2LG1zZzpcIk5vdCBpbiBncm91cFwifSxGT1JCSURERU5fSU5fR1JPVVA6e2NvZGU6MjI0MDgsbXNnOlwiRm9yYmJpZGVuIGZyb20gc3BlYWtpbmcgaW4gdGhlIGdyb3VwXCJ9LE5PVF9JTl9DSEFUUk9PTTp7Y29kZToyMzQwNixtc2c6XCJOb3QgaW4gY2hhdFJvb21cIn0sRk9SQklEREVOX0lOX0NIQVRST09NOntjb2RlOjIzNDA4LG1zZzpcIkZvcmJiaWRlbiBmcm9tIHNwZWFraW5nIGluIHRoZSBjaGF0Um9vbVwifSxLSUNLRURfRlJPTV9DSEFUUk9PTTp7Y29kZToyMzQwOSxtc2c6XCJLaWNrZWQgb3V0IGFuZCBmb3JiYmlkZW4gZnJvbSBqb2luaW5nIHRoZSBjaGF0Um9vbVwifSxDSEFUUk9PTV9OT1RfRVhJU1Q6e2NvZGU6MjM0MTAsbXNnOlwiQ2hhdFJvb20gZG9lcyBub3QgZXhpc3RcIn0sQ0hBVFJPT01fSVNfRlVMTDp7Y29kZToyMzQxMSxtc2c6XCJDaGF0Um9vbSBtZW1iZXJzIGV4Y2VlZGVkXCJ9LFBBUkFNRVRFUl9JTlZBTElEX0NIQVRST09NOntjb2RlOjIzNDEyLG1zZzpcIkludmFsaWQgY2hhdFJvb20gcGFyYW1ldGVyc1wifSxST0FNSU5HX1NFUlZJQ0VfVU5BVkFJTEFCTEVfQ0hBVFJPT006e2NvZGU6MjM0MTQsbXNnOlwiQ2hhdFJvb20gbWVzc2FnZSByb2FtaW5nIHNlcnZpY2UgaXMgbm90IG9wZW4sIFBsZWFzZSBnbyB0byB0aGUgZGV2ZWxvcGVyIHRvIG9wZW4gdGhpcyBzZXJ2aWNlXCJ9LFJFQ0FMTE1FU1NBR0VfUEFSQU1FVEVSX0lOVkFMSUQ6e2NvZGU6MjUxMDEsbXNnOlwiSW52YWxpZCByZWNhbGwgbWVzc2FnZSBwYXJhbWV0ZXJcIn0sUk9BTUlOR19TRVJWSUNFX1VOQVZBSUxBQkxFX01FU1NBR0U6e2NvZGU6MjUxMDIsbXNnOlwiU2luZ2xlIGdyb3VwIGNoYXQgcm9hbWluZyBzZXJ2aWNlIGlzIG5vdCBvcGVuLCBQbGVhc2UgZ28gdG8gdGhlIGRldmVsb3BlciB0byBvcGVuIHRoaXMgc2VydmljZVwifSxQVVNIU0VUVElOR19QQVJBTUVURVJfSU5WQUxJRDp7Y29kZToyNjAwMSxtc2c6XCJJbnZhbGlkIHB1c2ggcGFyYW1ldGVyXCJ9LE9QRVJBVElPTl9CTE9DS0VEOntjb2RlOjIwNjA1LG1zZzpcIk9wZXJhdGlvbiBpcyBibG9ja2VkXCJ9LE9QRVJBVElPTl9OT1RfU1VQUE9SVDp7Y29kZToyMDYwNixtc2c6XCJPcGVyYXRpb24gaXMgbm90IHN1cHBvcnRlZFwifSxNU0dfQkxPQ0tFRF9TRU5TSVRJVkVfV09SRDp7Y29kZToyMTUwMSxtc2c6XCJUaGUgc2VudCBtZXNzYWdlIGNvbnRhaW5zIHNlbnNpdGl2ZSB3b3Jkc1wifSxSRVBMQUNFRF9TRU5TSVRJVkVfV09SRDp7Y29kZToyMTUwMixtc2c6XCJTZW5zaXRpdmUgd29yZHMgaW4gdGhlIG1lc3NhZ2UgaGF2ZSBiZWVuIHJlcGxhY2VkXCJ9LE5PVF9DT05ORUNURUQ6e2NvZGU6MzAwMDEsbXNnOlwiUGxlYXNlIGNvbm5lY3Qgc3VjY2Vzc2Z1bGx5IGZpcnN0XCJ9LE5BVklfUkVRVUVTVF9FUlJPUjp7Y29kZTozMDAwNyxtc2c6XCJOYXZpZ2F0aW9uIGh0dHAgcmVxdWVzdCBmYWlsZWRcIn0sQ01QX1JFUVVFU1RfRVJST1I6e2NvZGU6MzAwMTAsbXNnOlwiQ01QIHNuaWZmIGh0dHAgcmVxdWVzdCBmYWlsZWRcIn0sQ09OTl9BUFBLRVlfRkFLRTp7Y29kZTozMTAwMixtc2c6XCJZb3VyIGFwcGtleSBpcyBmYWtlXCJ9LENPTk5fTUlOSV9TRVJWSUNFX05PVF9PUEVOOntjb2RlOjMxMDAzLG1zZzpcIk1pbmkgcHJvZ3JhbSBzZXJ2aWNlIGlzIG5vdCBvcGVuLCBQbGVhc2UgZ28gdG8gdGhlIGRldmVsb3BlciB0byBvcGVuIHRoaXMgc2VydmljZVwifSxDT05OX0FDS19USU1FT1VUOntjb2RlOjMxZTMsbXNnOlwiQ29ubmVjdGlvbiBBQ0sgdGltZW91dFwifSxDT05OX1RPS0VOX0lOQ09SUkVDVDp7Y29kZTozMTAwNCxtc2c6XCJZb3VyIHRva2VuIGlzIG5vdCB2YWxpZCBvciBleHBpcmVkXCJ9LENPTk5fTk9UX0FVVEhST1JJWkVEOntjb2RlOjMxMDA1LG1zZzpcIkFwcEtleSBhbmQgVG9rZW4gZG8gbm90IG1hdGNoXCJ9LENPTk5fUkVESVJFQ1RFRDp7Y29kZTozMTAwNixtc2c6XCJDb25uZWN0aW9uIHJlZGlyZWN0aW9uXCJ9LENPTk5fQVBQX0JMT0NLRURfT1JfREVMRVRFRDp7Y29kZTozMTAwOCxtc2c6XCJBcHBLZXkgaXMgYmFubmVkIG9yIGRlbGV0ZWRcIn0sQ09OTl9VU0VSX0JMT0NLRUQ6e2NvZGU6MzEwMDksbXNnOlwiVXNlciBibG9ja2VkXCJ9LENPTk5fRE9NQUlOX0lOQ09SUkVDVDp7Y29kZTozMTAxMixtc2c6XCJDb25uZWN0IGRvbWFpbiBlcnJvciwgUGxlYXNlIGNoZWNrIHRoZSBzZXQgc2VjdXJpdHkgZG9tYWluXCJ9LFJPQU1JTkdfU0VSVklDRV9VTkFWQUlMQUJMRTp7Y29kZTozMzAwNyxtc2c6XCJSb2FtaW5nIHNlcnZpY2UgY2xvdWQgaXMgbm90IG9wZW4sIFBsZWFzZSBnbyB0byB0aGUgZGV2ZWxvcGVyIHRvIG9wZW4gdGhpcyBzZXJ2aWNlXCJ9LFJDX0NPTk5FQ1RJT05fRVhJU1Q6e2NvZGU6MzQwMDEsbXNnOlwiQ29ubmVjdGlvbiBhbHJlYWR5IGV4aXN0c1wifSxDSEFUUk9PTV9LVl9FWENFRUQ6e2NvZGU6MjM0MjMsbXNnOlwiQ2hhdFJvb20gS1Ygc2V0dGluZyBleGNlZWRzIG1heGltdW1cIn0sQ0hBVFJPT01fS1ZfT1ZFUldSSVRFX0lOVkFMSUQ6e2NvZGU6MjM0MjQsbXNnOlwiQ2hhdFJvb20gS1YgYWxyZWFkeSBleGlzdHNcIn0sQ0hBVFJPT01fS1ZfU1RPUkVfTk9UX09QRU46e2NvZGU6MjM0MjYsbXNnOlwiQ2hhdFJvb20gS1Ygc3RvcmFnZSBzZXJ2aWNlIGlzIG5vdCBvcGVuLCBQbGVhc2UgZ28gdG8gdGhlIGRldmVsb3BlciB0byBvcGVuIHRoaXMgc2VydmljZVwifSxDSEFUUk9PTV9LRVlfTk9UX0VYSVNUOntjb2RlOjIzNDI3LG1zZzpcIkNoYXRSb29tIGtleSBkb2VzIG5vdCBleGlzdFwifSxNU0dfS1ZfTk9UX1NVUFBPUlQ6e2NvZGU6MzQwMDgsbXNnOlwiVGhlIG1lc3NhZ2UgY2Fubm90IGJlIGV4dGVuZGVkXCJ9LFNFTkRfTUVTU0FHRV9LVl9GQUlMOntjb2RlOjM0MDA5LG1zZzpcIlNlbmRpbmcgUkMgZXhwYW5zaW9uIG1lc3NhZ2UgZmFpbFwifSxFWFBBTlNJT05fTElNSVRfRVhDRUVUOntjb2RlOjM0MDEwLG1zZzpcIlRoZSBtZXNzYWdlIGV4cGFuc2lvbiBzaXplIGlzIGJleW9uZCB0aGUgbGltaXRcIn0sSUxMR0FMX1BBUkFNUzp7Y29kZTozMzAwMyxtc2c6XCJJbmNvcnJlY3QgcGFyYW1ldGVycyBwYXNzZWQgaW4gd2hpbGUgY2FsbGluZyB0aGUgaW50ZXJmYWNlXCJ9LFVQTE9BRF9GSUxFX0ZBSUxFRDp7Y29kZTozNTAyMCxtc2c6XCJGaWxlIHVwbG9hZCBmYWlsZWRcIn0sQ0hBVFJPT01fS1ZfU1RPUkVfTk9UX0FMTF9TVUNDRVNTOntjb2RlOjIzNDI4LG1zZzpcIkNoYXRyb29tIGt2IHN0b3JlIG5vdCBhbGwgc3VjY2Vzc1wifSxDSEFUUk9PTV9LVl9TVE9SRV9PVVRfTElNSVQ6e2NvZGU6MjM0MjksbXNnOlwiQ2hhdHJvb20ga3YncyBsZW5ndGggaXMgb3V0IG9mIGxpbWl0XCJ9LFRBR19FWElTVFM6e2NvZGU6MzMxMDEsbXNnOlwiVGhlIHRhZyBhbHJlYWR5IGV4aXN0c1wifSxUQUdfTk9UX0VYSVNUOntjb2RlOjMzMTAwLG1zZzpcIlRoZSB0YWcgZG9lcyBub3QgZXhpc3RcIn0sTk9UX1NVUFBPUlQ6e2NvZGU6X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuTk9UX1NVUFBPUlQsbXNnOlwiVGhlIG1ldGhvZCBpcyBub3Qgc3VwcG9ydGVkIGluIGEgYnJvd3NlciFcIn19LG9lPXt9LGFlPXt9O2Zvcih2YXIgcmUgaW4gbmUpe3ZhciBzZT1uZVtyZV0saWU9c2UuY29kZTtvZVtpZV09cmUsYWVbaWVdPXNlfW5lLlJPQU1JTkdfU0VSVklDRV9VTkFWQUlMQUJMRS5jb2RlO3ZhciBjZT1mdW5jdGlvbihlKXtlZT1lZXx8bmV3IHRlKGUpfTtmdW5jdGlvbiBkZShlLHQpe3JldHVybiBudWxsPT1lZT92b2lkIDA6ZWUuY29udGV4dC5pbnN0YWxsKGUsdCl9ZnVuY3Rpb24gdWUoZSx0KXtyZXR1cm4gTih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG47cmV0dXJuIFUodGhpcywoZnVuY3Rpb24obyl7c3dpdGNoKG8ubGFiZWwpe2Nhc2UgMDpyZXR1cm4gKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwidG9rZW5cIixlLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuU1RSSU5HLCEwKSxPLndhcm4oXCJSb25nSU1MaWIgVmVyc2lvbjogNS4yLjEsIENvbW1pdDogNWYzZDdiNWFmMWU2ZTMxZDQ1NDVlZjA5NzNiOTkwODM3MDYwNjE3YlwiKSxbNCxlZS5jb250ZXh0LmNvbm5lY3QoZSwhMSx0KV07Y2FzZSAxOnJldHVybihuPW8uc2VudCgpKS5jb2RlPT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUz9bMix7Y29kZTpuLmNvZGUsZGF0YTp7dXNlcklkOm4udXNlcklkfX1dOlsyLHtjb2RlOm4uY29kZSxtc2c6b2Vbbi5jb2RlXX1dfX0pKX0pKX1mdW5jdGlvbiBsZSgpe3JldHVybiBlZS5jb250ZXh0LmRpc2Nvbm5lY3QoKX1mdW5jdGlvbiBnZSgpe3JldHVybiBlZS5jb250ZXh0LmdldENvbm5lY3Rpb25TdGF0dXMoKX1mdW5jdGlvbiBmZSgpe3JldHVybiBlZS5jb250ZXh0LmdldFNlcnZlclRpbWUoKX1mdW5jdGlvbiBtZSgpe3JldHVybiBlZS5jb250ZXh0LmdldEN1cnJlbnRVc2VySWQoKX1mdW5jdGlvbiBwZShlLHQsbil7ZWUub24oZSx0LG4pfWZ1bmN0aW9uIGhlKGUsdCxuKXtlZS5vbmNlKGUsdCxuKX1mdW5jdGlvbiB2ZShlLHQsbil7ZWUub2ZmKGUsdCxuKX1mdW5jdGlvbiBJZShlKXtlZS5yZW1vdmVBbGwoZSl9ZnVuY3Rpb24gU2UoKXtlZS5jbGVhcigpfWZ1bmN0aW9uIENlKGUsdCl7X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5WZXJzaW9uTWFuYWdlLmFkZChlLHQpfWZ1bmN0aW9uIFRlKGUsdCl7cmV0dXJuIE4odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBuLG8sYSxzO3JldHVybiBVKHRoaXMsKGZ1bmN0aW9uKGkpe3N3aXRjaChpLmxhYmVsKXtjYXNlIDA6cmV0dXJuIE8uZGVidWcoXCJnZXQgY29udmVyc2F0aW9uIGxpc3QgLT5cIiksWzQsdGUuaW1DbGllbnQuY29udGV4dC5nZXRDb252ZXJzYXRpb25MaXN0KG51bGw9PWU/dm9pZCAwOmUuY291bnQsdm9pZCAwLG51bGw9PWU/dm9pZCAwOmUuc3RhcnRUaW1lLG51bGw9PWU/dm9pZCAwOmUub3JkZXIsdCldO2Nhc2UgMTpyZXR1cm4gbj1pLnNlbnQoKSxvPW4uY29kZSxhPW4uZGF0YSxvPT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUyYmYT8ocz1hLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciB0PWUuY29udmVyc2F0aW9uVHlwZSxuPWUudGFyZ2V0SWQsbz1lLmxhdGVzdE1lc3NhZ2UsYT1lLnVucmVhZE1lc3NhZ2VDb3VudCxyPWUuaGFzTWVudGlvbmVkLHM9ZS5tZW50aW9uZWRJbmZvLGk9ZS5sYXN0VW5yZWFkVGltZSxjPWUubm90aWZpY2F0aW9uU3RhdHVzLGQ9ZS5pc1RvcCx1PWUuY2hhbm5lbElkLGw9ZS51bnJlYWRNZW50aW9uZWRDb3VudDtyZXR1cm57Y29udmVyc2F0aW9uVHlwZTp0LHRhcmdldElkOm4sbGF0ZXN0TWVzc2FnZTpvJiZaKG8pLHVucmVhZE1lc3NhZ2VDb3VudDphLGhhc01lbnRpb25lZDpyLG1lbnRpb25lZEluZm86cj97dHlwZTpudWxsPT1zP3ZvaWQgMDpzLnR5cGUsdXNlcklkTGlzdDpudWxsPT1zP3ZvaWQgMDpzLnVzZXJJZExpc3R9OnZvaWQgMCxsYXN0VW5yZWFkVGltZTppLG5vdGlmaWNhdGlvblN0YXR1czpjLGlzVG9wOmQsY2hhbm5lbElkOnUsdW5yZWFkTWVudGlvbmVkQ291bnQ6bH19KGUpfSkpLFsyLHtjb2RlOjAsZGF0YTpzfV0pOihPLndhcm4oXCJnZXQgY29udmVyc2F0aW9uIGxpc3QgZmFpbCAtPlwiK28rXCI6XCIrb2Vbb10pLFsyLHtjb2RlOm8sbXNnOm9lW29dfV0pfX0pKX0pKX1mdW5jdGlvbiBFZShlKXtyZXR1cm4gTih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHQsbjtyZXR1cm4gVSh0aGlzLChmdW5jdGlvbihvKXtzd2l0Y2goby5sYWJlbCl7Y2FzZSAwOnJldHVybiAoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJvcHRpb25zLmNvbnZlcnNhdGlvblR5cGVcIixlLmNvbnZlcnNhdGlvblR5cGUsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5pc1ZhbGlkQ29udmVyc2F0aW9uVHlwZSwhMCksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwib3B0aW9ucy50YXJnZXRJZFwiLGUudGFyZ2V0SWQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5TVFJJTkcsITApLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm9wdGlvbnMuY2hhbm5lbElkXCIsZS5jaGFubmVsSWQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5DSEFOTkVMX0lEKSxbNCx0ZS5pbUNsaWVudC5jb250ZXh0LnJlbW92ZUNvbnZlcnNhdGlvbihlLmNvbnZlcnNhdGlvblR5cGUsZS50YXJnZXRJZCxlLmNoYW5uZWxJZCldO2Nhc2UgMTpyZXR1cm4gdD1vLnNlbnQoKSxuPVwiY29udmVyc2F0aW9uVHlwZTpcIitlLmNvbnZlcnNhdGlvblR5cGUrXCIsdGFyZ2V0SWQ6XCIrZS50YXJnZXRJZCxPLmRlYnVnKFwiZGVzdHJveSBjb252ZXJzYXRpb24gLT5cIituKSx0IT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUz8oTy53YXJuKFwiZGVzdHJveSBjb252ZXJzYXRpb24gZmFpbCAtPlwiK3QrXCI6XCIrb2VbdF0rXCIsXCIrbiksWzIse2NvZGU6dCxtc2c6b2VbdF19XSk6WzIse2NvZGU6dH1dfX0pKX0pKX1mdW5jdGlvbiB5ZShlKXtyZXR1cm4gTih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHQsbixvLGE7cmV0dXJuIFUodGhpcywoZnVuY3Rpb24ocyl7c3dpdGNoKHMubGFiZWwpe2Nhc2UgMDpyZXR1cm4gKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwib3B0aW9ucy5jb252ZXJzYXRpb25UeXBlXCIsZS5jb252ZXJzYXRpb25UeXBlLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uaXNWYWxpZENvbnZlcnNhdGlvblR5cGUsITApLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm9wdGlvbnMudGFyZ2V0SWRcIixlLnRhcmdldElkLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuU1RSSU5HLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJvcHRpb25zLmNoYW5uZWxJZFwiLGUuY2hhbm5lbElkLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuQ0hBTk5FTF9JRCksWzQsdGUuaW1DbGllbnQuY29udGV4dC5nZXRDb252ZXJzYXRpb25NZXNzYWdlRHJhZnQoZS5jb252ZXJzYXRpb25UeXBlLGUudGFyZ2V0SWQsZS5jaGFubmVsSWQpXTtjYXNlIDE6cmV0dXJuIHQ9cy5zZW50KCksbj10LmNvZGUsbz10LmRhdGEsYT1cImNvbnZlcnNhdGlvblR5cGU6XCIrZS5jb252ZXJzYXRpb25UeXBlK1wiLHRhcmdldElkOlwiK2UudGFyZ2V0SWQsTy5kZWJ1ZyhcImdldCBkcmFmdCAtPlwiK2EpLG49PT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTP1syLHtjb2RlOm4sZGF0YTpvfHxcIlwifV06KE8ud2FybihcImdldCBkcmFmdCBmYWlsIC0+XCIrbitcIjpcIitvZVtuXStcIixcIithKSxbMix7Y29kZTpuLG1zZzpvZVtuXX1dKX19KSl9KSl9ZnVuY3Rpb24gUmUoZSx0KXtyZXR1cm4gTih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG4sbztyZXR1cm4gVSh0aGlzLChmdW5jdGlvbihhKXtzd2l0Y2goYS5sYWJlbCl7Y2FzZSAwOnJldHVybiAoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJvcHRpb25zLmNvbnZlcnNhdGlvblR5cGVcIixlLmNvbnZlcnNhdGlvblR5cGUsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5pc1ZhbGlkQ29udmVyc2F0aW9uVHlwZSwhMCksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwib3B0aW9ucy50YXJnZXRJZFwiLGUudGFyZ2V0SWQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5TVFJJTkcsITApLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm9wdGlvbnMuY2hhbm5lbElkXCIsZS5jaGFubmVsSWQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5DSEFOTkVMX0lEKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJkcmFmdFwiLHQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5TVFJJTkcsITApLG49XCJjb252ZXJzYXRpb25UeXBlOlwiK2UuY29udmVyc2F0aW9uVHlwZStcIix0YXJnZXRJZDpcIitlLnRhcmdldElkLE8uZGVidWcoXCJzZXQgZHJhZnQgLT5cIituKSxbNCx0ZS5pbUNsaWVudC5jb250ZXh0LnNhdmVDb252ZXJzYXRpb25NZXNzYWdlRHJhZnQoZS5jb252ZXJzYXRpb25UeXBlLGUudGFyZ2V0SWQsdCxlLmNoYW5uZWxJZCldO2Nhc2UgMTpyZXR1cm4obz1hLnNlbnQoKSk9PT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTP1syLHtjb2RlOm99XTooTy53YXJuKFwic2V0IGRyYWZ0IGZhaWwgLT5cIitvK1wiOlwiK29lW29dK1wiLFwiK24pLFsyLHtjb2RlOm8sbXNnOm9lW29dfV0pfX0pKX0pKX1mdW5jdGlvbiBOZShlKXtyZXR1cm4gTih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHQsbjtyZXR1cm4gVSh0aGlzLChmdW5jdGlvbihvKXtzd2l0Y2goby5sYWJlbCl7Y2FzZSAwOnJldHVybiAoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJvcHRpb25zLmNvbnZlcnNhdGlvblR5cGVcIixlLmNvbnZlcnNhdGlvblR5cGUsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5pc1ZhbGlkQ29udmVyc2F0aW9uVHlwZSwhMCksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwib3B0aW9ucy50YXJnZXRJZFwiLGUudGFyZ2V0SWQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5TVFJJTkcsITApLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm9wdGlvbnMuY2hhbm5lbElkXCIsZS5jaGFubmVsSWQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5DSEFOTkVMX0lEKSx0PVwiY29udmVyc2F0aW9uVHlwZTpcIitlLmNvbnZlcnNhdGlvblR5cGUrXCIsdGFyZ2V0SWQ6XCIrZS50YXJnZXRJZCxPLmRlYnVnKFwiZGVsZXRlIGRyYWZ0ICAtPlwiK3QpLFs0LHRlLmltQ2xpZW50LmNvbnRleHQuY2xlYXJDb252ZXJzYXRpb25NZXNzYWdlRHJhZnQoZS5jb252ZXJzYXRpb25UeXBlLGUudGFyZ2V0SWQsZS5jaGFubmVsSWQpXTtjYXNlIDE6cmV0dXJuKG49by5zZW50KCkpPT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUz9bMix7Y29kZTpufV06KE8ud2FybihcImRlbGV0ZSBkcmFmdCBmYWlsIC0+XCIrbitcIjpcIitvZVtuXStcIixcIit0KSxbMix7Y29kZTpuLG1zZzpvZVtuXX1dKX19KSl9KSl9ZnVuY3Rpb24gVWUoZSx0KXtyZXR1cm4gTih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG4sbyxhLHMsaSxkO3JldHVybiBVKHRoaXMsKGZ1bmN0aW9uKHUpe3N3aXRjaCh1LmxhYmVsKXtjYXNlIDA6aWYoTy5kZWJ1ZyhcImdldCB0b3RhbCB1bnJlYWQgY291bnQgLT4gQ29udmVyc2F0aW9uVHlwZTpcIitKU09OLnN0cmluZ2lmeSh0KStcIiBpbmNsdWRlTXV0ZWQ6XCIrZSksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwiaW5jbHVkZU11dGVkXCIsZSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLkJPT0xFQU4sITEpLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcImNvbnZlcnNhdGlvblR5cGVzXCIsdCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLkFSUkFZLCExKSx0KWZvcihuPTAsbz10O248by5sZW5ndGg7bisrKWE9b1tuXSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJjb252ZXJzYXRpb25UeXBlXCIsYSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmlzVmFsaWRDb252ZXJzYXRpb25UeXBlKTtyZXR1cm5bNCx0ZS5pbUNsaWVudC5jb250ZXh0LmdldFRvdGFsVW5yZWFkQ291bnQoXCJcIix0LGUpXTtjYXNlIDE6cmV0dXJuIHM9dS5zZW50KCksaT1zLmNvZGUsZD1zLmRhdGEsaT09PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1M/WzIse2NvZGU6aSxkYXRhOmR9XTooTy53YXJuKFwiZ2V0VG90YWxVbnJlYWRDb3VudCBmYWlsIC0+XCIraStcIjpcIitvZVtpXSksWzIse2NvZGU6aSxtc2c6b2VbaV19XSl9fSkpfSkpfWZ1bmN0aW9uIE9lKGUpe3JldHVybiBOKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgdCxuLG8sYTtyZXR1cm4gVSh0aGlzLChmdW5jdGlvbihzKXtzd2l0Y2gocy5sYWJlbCl7Y2FzZSAwOnJldHVybiAoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJvcHRpb25zLmNvbnZlcnNhdGlvblR5cGVcIixlLmNvbnZlcnNhdGlvblR5cGUsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5pc1ZhbGlkQ29udmVyc2F0aW9uVHlwZSwhMCksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwib3B0aW9ucy50YXJnZXRJZFwiLGUudGFyZ2V0SWQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5TVFJJTkcsITApLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm9wdGlvbnMuY2hhbm5lbElkXCIsZS5jaGFubmVsSWQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5DSEFOTkVMX0lEKSxbNCx0ZS5pbUNsaWVudC5jb250ZXh0LmdldFVucmVhZENvdW50KGUuY29udmVyc2F0aW9uVHlwZSxlLnRhcmdldElkLGUuY2hhbm5lbElkKV07Y2FzZSAxOnJldHVybiB0PXMuc2VudCgpLG49dC5jb2RlLG89dC5kYXRhLGE9XCJjb252ZXJzYXRpb25UeXBlOlwiK2UuY29udmVyc2F0aW9uVHlwZStcIix0YXJnZXRJZDpcIitlLnRhcmdldElkLE8uZGVidWcoXCJnZXQgdW5yZWFkQ291bnQgLT5cIithKSxuPT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUz9bMix7Y29kZTpuLGRhdGE6b31dOihPLndhcm4oXCJnZXQgdW5yZWFkQ291bnQgZmFpbCAtPlwiK24rXCI6XCIrb2Vbbl0rXCIsXCIrYSksWzIse2NvZGU6bixtc2c6b2Vbbl19XSl9fSkpfSkpfWZ1bmN0aW9uIE1lKGUpe3JldHVybiBOKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgdCxuO3JldHVybiBVKHRoaXMsKGZ1bmN0aW9uKG8pe3N3aXRjaChvLmxhYmVsKXtjYXNlIDA6cmV0dXJuICgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm9wdGlvbnMuY29udmVyc2F0aW9uVHlwZVwiLGUuY29udmVyc2F0aW9uVHlwZSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmlzVmFsaWRDb252ZXJzYXRpb25UeXBlLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJvcHRpb25zLnRhcmdldElkXCIsZS50YXJnZXRJZCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLlNUUklORywhMCksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwib3B0aW9ucy5jaGFubmVsSWRcIixlLmNoYW5uZWxJZCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLkNIQU5ORUxfSUQpLFs0LHRlLmltQ2xpZW50LmNvbnRleHQuY2xlYXJVbnJlYWRDb3VudChlLmNvbnZlcnNhdGlvblR5cGUsZS50YXJnZXRJZCxlLmNoYW5uZWxJZCldO2Nhc2UgMTpyZXR1cm4gdD1vLnNlbnQoKSxuPVwiY29udmVyc2F0aW9uVHlwZTpcIitlLmNvbnZlcnNhdGlvblR5cGUrXCIsdGFyZ2V0SWQ6XCIrZS50YXJnZXRJZCxPLmRlYnVnKFwiY2xlYXIgdW5yZWFkTXNnTnVtIC0+XCIrbiksdCE9PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1M/KE8ud2FybihcImNsZWFyIHVucmVhZE1zZ051bSBmYWlsIC0+XCIrdCtcIjpcIitvZVt0XStcIixcIituKSxbMix7Y29kZTp0LG1zZzpvZVt0XX1dKTpbMix7Y29kZTp0fV19fSkpfSkpfWZ1bmN0aW9uIF9lKCl7cmV0dXJuIE4odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiBVKHRoaXMsKGZ1bmN0aW9uKGUpe3N3aXRjaChlLmxhYmVsKXtjYXNlIDA6cmV0dXJuWzQsdGUuaW1DbGllbnQuY29udGV4dC5jbGVhckFsbFVucmVhZENvdW50KCldO2Nhc2UgMTpyZXR1cm5bMix7Y29kZTplLnNlbnQoKX1dfX0pKX0pKX1mdW5jdGlvbiB3ZShlLHQpe3JldHVybiBOKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbixvO3JldHVybiBVKHRoaXMsKGZ1bmN0aW9uKGEpe3N3aXRjaChhLmxhYmVsKXtjYXNlIDA6cmV0dXJuICgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm9wdGlvbnMuY29udmVyc2F0aW9uVHlwZVwiLGUuY29udmVyc2F0aW9uVHlwZSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmlzVmFsaWRDb252ZXJzYXRpb25UeXBlLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJvcHRpb25zLnRhcmdldElkXCIsZS50YXJnZXRJZCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLlNUUklORywhMCksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwib3B0aW9ucy5jaGFubmVsSWRcIixlLmNoYW5uZWxJZCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLkNIQU5ORUxfSUQpLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm5vdGlmaWNhdGlvblN0YXR1c1wiLHQsKGZ1bmN0aW9uKGUpe3JldHVybiAxPT09ZXx8Mj09PWV9KSwhMCksbj1cImNvbnZlcnNhdGlvblR5cGU6XCIrZS5jb252ZXJzYXRpb25UeXBlK1wiLHRhcmdldElkOlwiK2UudGFyZ2V0SWQsTy5kZWJ1ZyhcInNldCBjb252ZXJzYXRpb24gc3RhdHVzIC0+XCIrbiksWzQsdGUuaW1DbGllbnQuY29udGV4dC5zZXRDb252ZXJzYXRpb25TdGF0dXMoZS5jb252ZXJzYXRpb25UeXBlLGUudGFyZ2V0SWQsdm9pZCAwLHQsZS5jaGFubmVsSWQpXTtjYXNlIDE6cmV0dXJuKG89YS5zZW50KCkpIT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUz8oTy53YXJuKFwic2V0IGNvbnZlcnNhdGlvbiBzdGF0dXMgZmFpbCAtPlwiK28rXCI6XCIrb2Vbb10rXCIsXCIrbiksWzIse2NvZGU6byxtc2c6b2Vbb119XSk6WzIse2NvZGU6b31dfX0pKX0pKX1mdW5jdGlvbiBBZShlKXtyZXR1cm4gTih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHQsbixvO3JldHVybiBVKHRoaXMsKGZ1bmN0aW9uKGEpe3N3aXRjaChhLmxhYmVsKXtjYXNlIDA6cmV0dXJuICgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm9wdGlvbnMuY29udmVyc2F0aW9uVHlwZVwiLGUuY29udmVyc2F0aW9uVHlwZSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmlzVmFsaWRDb252ZXJzYXRpb25UeXBlLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJvcHRpb25zLnRhcmdldElkXCIsZS50YXJnZXRJZCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLlNUUklORywhMCksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwib3B0aW9ucy5jaGFubmVsSWRcIixlLmNoYW5uZWxJZCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLkNIQU5ORUxfSUQpLE8uaW5mbyhcImdldENvbnZlcnNhdGlvbk5vdGlmaWNhdGlvblN0YXR1cyAtPnRhcmdldElkOlwiK2UudGFyZ2V0SWQrXCIsY29udmVyc2F0aW9uVHlwZTpcIitlLmNvbnZlcnNhdGlvblR5cGUpLFs0LHRlLmltQ2xpZW50LmNvbnRleHQuZ2V0Q29udmVyc2F0aW9uTm90aWZpY2F0aW9uU3RhdHVzKGUuY29udmVyc2F0aW9uVHlwZSxlLnRhcmdldElkLGUuY2hhbm5lbElkKV07Y2FzZSAxOnJldHVybiB0PWEuc2VudCgpLG49dC5jb2RlLG89dC5kYXRhLG49PT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTP1syLHtjb2RlOm4sZGF0YTpvfV06KE8ud2FybihcImdldENvbnZlcnNhdGlvbk5vdGlmaWNhdGlvblN0YXR1cyAtPmNvZGU6XCIrbitcIix0YXJnZXRJZDpcIitlLnRhcmdldElkKSxbMix7Y29kZTpuLG1zZzpvZVtuXX1dKX19KSl9KSl9ZnVuY3Rpb24geGUoKXtyZXR1cm4gTih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIGUsdCxuO3JldHVybiBVKHRoaXMsKGZ1bmN0aW9uKG8pe3N3aXRjaChvLmxhYmVsKXtjYXNlIDA6cmV0dXJuWzQsdGUuaW1DbGllbnQuY29udGV4dC5nZXRCbG9ja0NvbnZlcnNhdGlvbkxpc3QoKV07Y2FzZSAxOnJldHVybiBlPW8uc2VudCgpLHQ9ZS5jb2RlLG49ZS5kYXRhLFsyLHtjb2RlOnQsZGF0YTpufV19fSkpfSkpfWZ1bmN0aW9uIGJlKGUsdCl7cmV0dXJuIHZvaWQgMD09PXQmJih0PSEwKSxOKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbixvO3JldHVybiBVKHRoaXMsKGZ1bmN0aW9uKGEpe3N3aXRjaChhLmxhYmVsKXtjYXNlIDA6cmV0dXJuICgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm9wdGlvbnMudHlwZVwiLGUuY29udmVyc2F0aW9uVHlwZSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmlzVmFsaWRDb252ZXJzYXRpb25UeXBlLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJvcHRpb25zLnRhcmdldElkXCIsZS50YXJnZXRJZCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLlNUUklORywhMCksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwib3B0aW9ucy5jaGFubmVsSWRcIixlLmNoYW5uZWxJZCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLkNIQU5ORUxfSUQpLG49XCJjb252ZXJzYXRpb25UeXBlOlwiK2UuY29udmVyc2F0aW9uVHlwZStcIix0YXJnZXRJZDpcIitlLnRhcmdldElkLE8uZGVidWcoXCJzZXQgY29udmVyc2F0aW9uIHN0YXR1cyAtPlwiK24pLFs0LHRlLmltQ2xpZW50LmNvbnRleHQuc2V0Q29udmVyc2F0aW9uU3RhdHVzKGUuY29udmVyc2F0aW9uVHlwZSxlLnRhcmdldElkLHQsdm9pZCAwLGUuY2hhbm5lbElkKV07Y2FzZSAxOnJldHVybihvPWEuc2VudCgpKSE9PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1M/KE8ud2FybihcInNldCBjb252ZXJzYXRpb24gc3RhdHVzIGZhaWwgLT5cIitvK1wiOlwiK29lW29dK1wiLFwiK24pLFsyLHtjb2RlOm8sbXNnOm9lW29dfV0pOlsyLHtjb2RlOm99XX19KSl9KSl9ZnVuY3Rpb24gUGUoKXtyZXR1cm4gTih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIGUsdCxuO3JldHVybiBVKHRoaXMsKGZ1bmN0aW9uKG8pe3N3aXRjaChvLmxhYmVsKXtjYXNlIDA6cmV0dXJuWzQsdGUuaW1DbGllbnQuY29udGV4dC5nZXRUb3BDb252ZXJzYXRpb25MaXN0KCldO2Nhc2UgMTpyZXR1cm4gZT1vLnNlbnQoKSx0PWUuY29kZSxuPWUuZGF0YSxbMix7Y29kZTp0LGRhdGE6bn1dfX0pKX0pKX1mdW5jdGlvbiBMZShlKXtyZXR1cm4gTih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIFUodGhpcywoZnVuY3Rpb24odCl7cmV0dXJuICgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm9wdGlvbnMudGFyZ2V0SWRcIixlLnRhcmdldElkLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuU1RSSU5HLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJvcHRpb25zLmNoYW5uZWxJZFwiLGUuY2hhbm5lbElkLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuQ0hBTk5FTF9JRCksTy5kZWJ1ZyhcImdldFVucmVhZE1lbnRpb25lZENvdW50XCIrZS50YXJnZXRJZCtcIixjaGFubmVsSWQ6XCIrZS5jaGFubmVsSWQpLFsyLHRlLmltQ2xpZW50LmNvbnRleHQuZ2V0VW5yZWFkTWVudGlvbmVkQ291bnQoZSldfSkpfSkpfWZ1bmN0aW9uIEdlKCl7cmV0dXJuIE4odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiBVKHRoaXMsKGZ1bmN0aW9uKGUpe3JldHVybiBPLmRlYnVnKFwiZ2V0QWxsVW5yZWFkTWVudGlvbmVkQ291bnRcIiksWzIsdGUuaW1DbGllbnQuY29udGV4dC5nZXRBbGxVbnJlYWRNZW50aW9uZWRDb3VudCgpXX0pKX0pKX1mdW5jdGlvbiBEZSgpe3JldHVybiBOKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXtyZXR1cm4gVSh0aGlzLChmdW5jdGlvbihlKXtyZXR1cm5bMix0ZS5pbUNsaWVudC5jb250ZXh0LmdldEFsbENvbnZlcnNhdGlvblN0YXRlKCldfSkpfSkpfWZ1bmN0aW9uIGtlKCl7cmV0dXJuIE4odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBlLHQsbjtyZXR1cm4gVSh0aGlzLChmdW5jdGlvbihvKXtzd2l0Y2goby5sYWJlbCl7Y2FzZSAwOnJldHVybls0LHRlLmltQ2xpZW50LmNvbnRleHQuZ2V0VWx0cmFHcm91cExpc3QoKV07Y2FzZSAxOnJldHVybiBlPW8uc2VudCgpLHQ9ZS5jb2RlLG49ZS5kYXRhLHQ9PT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTP1syLHtjb2RlOl9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1MsZGF0YTpufV06KE8ud2FybihcImdldCB1bHRyYWdyb3VwICAtPlwiK3QrXCI6XCIrb2VbdF0pLFsyLHtjb2RlOnQsbXNnOm9lW3RdfV0pfX0pKX0pKX1mdW5jdGlvbiBIZSgpe3JldHVybiBOKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgZSx0LG47cmV0dXJuIFUodGhpcywoZnVuY3Rpb24obyl7c3dpdGNoKG8ubGFiZWwpe2Nhc2UgMDpyZXR1cm5bNCx0ZS5pbUNsaWVudC5jb250ZXh0LmdldEJsb2NrVWx0cmFHcm91cExpc3QoKV07Y2FzZSAxOnJldHVybiBlPW8uc2VudCgpLHQ9ZS5jb2RlLG49ZS5kYXRhLHQ9PT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTP1syLHtjb2RlOl9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1MsZGF0YTpufV06KE8ud2FybihcImdldCBibG9jayB1bHRyYWdyb3VwICAtPlwiK3QrXCI6XCIrb2VbdF0pLFsyLHtjb2RlOnQsbXNnOm9lW3RdfV0pfX0pKX0pKX1mdW5jdGlvbiBCZShlKXtyZXR1cm4gTih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHQ7cmV0dXJuIFUodGhpcywoZnVuY3Rpb24obil7c3dpdGNoKG4ubGFiZWwpe2Nhc2UgMDpyZXR1cm4gKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwib3B0aW9ucy50YXJnZXRJZFwiLGUudGFyZ2V0SWQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5TVFJJTkcsITApLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm9wdGlvbnMuY2hhbm5lbElkXCIsZS5jaGFubmVsSWQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5DSEFOTkVMX0lEKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJvcHRpb25zLmNvbnZlcnNhdGlvblR5cGVcIixlLmNvbnZlcnNhdGlvblR5cGUsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5pc1ZhbGlkQ29udmVyc2F0aW9uVHlwZSwhMCksWzQsdGUuaW1DbGllbnQuY29udGV4dC5zZW5kVWx0cmFHcm91cFR5cGluZ1N0YXR1cyhlKV07Y2FzZSAxOnJldHVybih0PW4uc2VudCgpLmNvZGUpPT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUz9bMix7Y29kZTpfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTfV06KE8ud2FybihcInNlbmQgdWx0cmFHcm91cCBPcGVyYXRlU3RhdHVzICAgLT5cIit0K1wiOlwiK29lW3RdKSxbMix7Y29kZTp0LG1zZzpvZVt0XX1dKX19KSl9KSl9ZnVuY3Rpb24gRmUoZSx0KXtyZXR1cm4gTih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG4sbyxhLHMsaSxkLHUsbDtyZXR1cm4gVSh0aGlzLChmdW5jdGlvbihnKXtzd2l0Y2goZy5sYWJlbCl7Y2FzZSAwOnJldHVybiAoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJvcHRpb25zLnRhcmdldElkXCIsZS50YXJnZXRJZCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLlNUUklORywhMCksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwib3B0aW9ucy5jaGFubmVsSWRcIixlLmNoYW5uZWxJZCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLkNIQU5ORUxfSUQpLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm9wdGlvbnMuY29udmVyc2F0aW9uVHlwZVwiLGUuY29udmVyc2F0aW9uVHlwZSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmlzVmFsaWRDb252ZXJzYXRpb25UeXBlLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJtc2dzXCIsdCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLkFSUkFZLCEwKSxuPWUudGFyZ2V0SWQsbz1lLmNvbnZlcnNhdGlvblR5cGUsYT1lLmNoYW5uZWxJZCxzPVtdLHQuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zZW5kVGltZSxuPWUubWVzc2FnZVVJZDtzLnB1c2goe3NlbmRUaW1lOnQsbWVzc2FnZVVJZDpuLGNoYW5uZWxJZDphfSl9KSksaT17dGFyZ2V0SWQ6bixjb252ZXJzYXRpb25UeXBlOm8sbWVzc2FnZXM6c30sWzQsdGUuaW1DbGllbnQuY29udGV4dC5nZXRVbHRyYUdyb3VwTWVzc2FnZUxpc3RCeU1lc3NhZ2VVSWQoaSldO2Nhc2UgMTpyZXR1cm4gZD1nLnNlbnQoKSx1PWQuY29kZSxsPWQuZGF0YSx1PT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUz9bMix7Y29kZTpfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTLGRhdGE6bH1dOihPLndhcm4oXCJnZXQgVWx0cmFHcm91cCBNZXNzYWdlTGlzdCBieSBtZXNzYWdlVUlkICAgLT5cIit1K1wiOlwiK29lW3VdKSxbMix7Y29kZTp1LG1zZzpvZVt1XX1dKX19KSl9KSl9ZnVuY3Rpb24gcWUoZSx0KXtyZXR1cm4gTih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG4sbyxhLHMsaSxkLHUsbCxnO3JldHVybiBVKHRoaXMsKGZ1bmN0aW9uKGYpe3N3aXRjaChmLmxhYmVsKXtjYXNlIDA6cmV0dXJuICgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcImV4cGFuc2lvblwiLGUsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5PQkpFQ1QsITApLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm1lc3NhZ2VcIix0LF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuT0JKRUNULCEwKSxuPXQuY29udmVyc2F0aW9uVHlwZSxvPXQudGFyZ2V0SWQsYT10Lm1lc3NhZ2VVSWQscz10LnNlbnRUaW1lLGk9dC5jYW5JbmNsdWRlRXhwYW5zaW9uLGQ9dC5jaGFubmVsSWQsdT1cImNvbnZlcnNhdGlvblR5cGU6XCIrbitcIix0YXJnZXRJZDpcIitvK1wiLGNoYW5uZWxJZDpcIitkK1wiLG1lc3NhZ2VVSWQ6XCIrYSxPLmRlYnVnKFwidXBkYXRlIGV4cGFuc2lvbiBmb3IgdWx0cmFncm91cCBtZXNzYWdlICAtPlwiK3UpLGw9e3RhcmdldElkOm8sY2hhbm5lbElkOmQsY29udmVyc2F0aW9uVHlwZTpuLHNlbmRUaW1lOnMsY2FuSW5jbHVkZUV4cGFuc2lvbjppLG1lc3NhZ2VVSWQ6YSxleHBhbnNpb246ZX0sWzQsdGUuaW1DbGllbnQuY29udGV4dC5leHBhbmRVbHRyYU1lc3NhZ2UobCldO2Nhc2UgMTpyZXR1cm4oZz1mLnNlbnQoKS5jb2RlKT09PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1M/WzIse2NvZGU6X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTU31dOihPLndhcm4oXCJ1cGRhdGUgZXhwYW5zaW9uIGZvciB1bHRyYWdyb3VwIG1lc3NhZ2UgICAtPlwiK2crXCI6XCIrb2VbZ10pLFsyLHtjb2RlOmcsbXNnOm9lW2ddfV0pfX0pKX0pKX1mdW5jdGlvbiBWZShlLHQpe3JldHVybiBOKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbixvLGEscyxpLGQsdSxsLGc7cmV0dXJuIFUodGhpcywoZnVuY3Rpb24oZil7c3dpdGNoKGYubGFiZWwpe2Nhc2UgMDpyZXR1cm4gKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwiZXhwYW5zaW9uXCIsZSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLkFSUkFZLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJtZXNzYWdlXCIsdCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLk9CSkVDVCwhMCksbj10LmNvbnZlcnNhdGlvblR5cGUsbz10LnRhcmdldElkLGE9dC5tZXNzYWdlVUlkLHM9dC5zZW50VGltZSxpPXQuY2FuSW5jbHVkZUV4cGFuc2lvbixkPXQuY2hhbm5lbElkLHU9XCJjb252ZXJzYXRpb25UeXBlOlwiK24rXCIsdGFyZ2V0SWQ6XCIrbytcIixjaGFubmVsSWQ6XCIrZCtcIixtZXNzYWdlVUlkOlwiK2EsTy5kZWJ1ZyhcInJlbW92ZSBleHBhbnNpb24gZm9yIHVsdHJhZ3JvdXAgbWVzc2FnZSAgLT5cIit1KSxsPXt0YXJnZXRJZDpvLGNoYW5uZWxJZDpkLGNvbnZlcnNhdGlvblR5cGU6bixzZW5kVGltZTpzLGNhbkluY2x1ZGVFeHBhbnNpb246aSxtZXNzYWdlVUlkOmEsa2V5czplfSxbNCx0ZS5pbUNsaWVudC5jb250ZXh0LmV4cGFuZFVsdHJhTWVzc2FnZShsKV07Y2FzZSAxOnJldHVybihnPWYuc2VudCgpLmNvZGUpPT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUz9bMix7Y29kZTpfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTfV06KE8ud2FybihcInJlbW92ZSBleHBhbnNpb24gZm9yIHVsdHJhR3JvdXAgbWVzc2FnZSAgIC0+XCIrZytcIjpcIitvZVtnXSksWzIse2NvZGU6Zyxtc2c6b2VbZ119XSl9fSkpfSkpfWZ1bmN0aW9uIHplKGUpe3JldHVybiBOKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgdCxuLG8sYSxzLGksZCx1LGw7cmV0dXJuIFUodGhpcywoZnVuY3Rpb24oZyl7c3dpdGNoKGcubGFiZWwpe2Nhc2UgMDpyZXR1cm4gKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwibWVzc2FnZVwiLGUsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5PQkpFQ1QsITApLHQ9ZS5jb252ZXJzYXRpb25UeXBlLG49ZS50YXJnZXRJZCxvPWUubWVzc2FnZVVJZCxhPWUuc2VudFRpbWUscz1lLmNhbkluY2x1ZGVFeHBhbnNpb24saT1lLmNoYW5uZWxJZCxkPVwiY29udmVyc2F0aW9uVHlwZTpcIit0K1wiLHRhcmdldElkOlwiK24rXCIsY2hhbm5lbElkOlwiK2krXCIsbWVzc2FnZVVJZDpcIitvLE8uZGVidWcoXCJyZW1vdmUgYWxsIGV4cGFuc2lvbiBmb3IgdWx0cmFHcm91cCBtZXNzYWdlIC0+XCIrZCksdT17dGFyZ2V0SWQ6bixjaGFubmVsSWQ6aSxjb252ZXJzYXRpb25UeXBlOnQsc2VuZFRpbWU6YSxjYW5JbmNsdWRlRXhwYW5zaW9uOnMsbWVzc2FnZVVJZDpvLHJlbW92ZUFsbDohMH0sWzQsdGUuaW1DbGllbnQuY29udGV4dC5leHBhbmRVbHRyYU1lc3NhZ2UodSldO2Nhc2UgMTpyZXR1cm4obD1nLnNlbnQoKS5jb2RlKT09PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1M/WzIse2NvZGU6X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTU31dOihPLndhcm4oXCJyZW1vdmUgYWxsIGV4cGFuc2lvbiBmb3IgdWx0cmFHcm91cCBtZXNzYWdlICAgLT5cIitsK1wiOlwiK29lW2xdKSxbMix7Y29kZTpsLG1zZzpvZVtsXX1dKX19KSl9KSl9ZnVuY3Rpb24gS2UoZSx0KXtyZXR1cm4gTih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG4sbyxhLHMsaSxkLHUsbCxnLGY7cmV0dXJuIFUodGhpcywoZnVuY3Rpb24obSl7c3dpdGNoKG0ubGFiZWwpe2Nhc2UgMDpyZXR1cm4gKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwiY29udGVudFwiLGUsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5PQkpFQ1QsITApLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm1lc3NhZ2VcIix0LF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuT0JKRUNULCEwKSxuPXQuY29udmVyc2F0aW9uVHlwZSxvPXQudGFyZ2V0SWQsYT10Lm1lc3NhZ2VVSWQscz10LnNlbmRlclVzZXJJZCxpPXQuc2VudFRpbWUsZD10LmNhbkluY2x1ZGVFeHBhbnNpb24sdT10LmNoYW5uZWxJZCxsPVwiY29udmVyc2F0aW9uVHlwZTpcIituK1wiLHRhcmdldElkOlwiK28rXCIsY2hhbm5lbElkOlwiK3UrXCIsbWVzc2FnZVVJZDpcIithLE8uZGVidWcoXCJ1cGRhdGUgdWx0cmFncm91cCBtZXNzYWdlIGV4cGFuc2lvbiAtPlwiK2wpLGc9e3RhcmdldElkOm8sY2hhbm5lbElkOnUsY29udmVyc2F0aW9uVHlwZTpuLGZyb21Vc2VySWQ6cyxzZW5kVGltZTppLGNhbkluY2x1ZGVFeHBhbnNpb246ZCxtZXNzYWdlVUlkOmEsY29udGVudDplfSxbNCx0ZS5pbUNsaWVudC5jb250ZXh0Lm1vZGlmeU1lc3NhZ2UoZyldO2Nhc2UgMTpyZXR1cm4oZj1tLnNlbnQoKS5jb2RlKT09PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1M/WzIse2NvZGU6X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTU31dOihPLndhcm4oXCJtb2RpZnkgdWx0cmFHcm91cCBtZXNzYWdlICAgLT5cIitmK1wiOlwiK29lW2ZdKSxbMix7Y29kZTpmLG1zZzpvZVtmXX1dKX19KSl9KSl9ZnVuY3Rpb24gWGUoZSl7cmV0dXJuIE4odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciB0LG4sbztyZXR1cm4gVSh0aGlzLChmdW5jdGlvbihhKXtzd2l0Y2goYS5sYWJlbCl7Y2FzZSAwOnJldHVybiAoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJjb3RhcmdldElkbnRlbnRcIixlLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuU1RSSU5HLCEwKSxPLmRlYnVnKFwiZ2V0IFVsdHJhR3JvdXAgdW5yZWFkTWVudGlvbmVkQ291bnQgYnkgdGFyZ2V0SWQ6XCIrZSksWzQsdGUuaW1DbGllbnQuY29udGV4dC5nZXRVbHRyYUdyb3VwVW5yZWFkTWVudGlvbmVkQ291bnRCeVRhcmdldElkKGUpXTtjYXNlIDE6cmV0dXJuIHQ9YS5zZW50KCksbj10LmNvZGUsbz10LmRhdGEsbj09PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1M/WzIse2NvZGU6X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUyxkYXRhOm99XTooTy53YXJuKFwiZ2V0IFVsdHJhR3JvdXAgdW5yZWFkTWVudGlvbmVkQ291bnQgYnkgdGFyZ2V0SWQgZXJyb3IgLT5cIituK1wiOlwiK29lW25dKSxbMix7Y29kZTpuLG1zZzpvZVtuXX1dKX19KSl9KSl9dmFyIGplPWZ1bmN0aW9uKGUpeygwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm9wdGlvbnMua2V5XCIsZS5rZXksX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5TVFJJTkcsITApLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm9wdGlvbnMudmFsdWVcIixlLnZhbHVlLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuU1RSSU5HLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJvcHRpb25zLmlzQXV0b0RlbGV0ZVwiLGUuaXNBdXRvRGVsZXRlLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuQk9PTEVBTiksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwib3B0aW9ucy5pc1NlbmROb3RpZmljYXRpb25cIixlLmlzU2VuZE5vdGlmaWNhdGlvbixfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLkJPT0xFQU4pLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm9wdGlvbnMubm90aWZpY2F0aW9uRXh0cmFcIixlLm5vdGlmaWNhdGlvbkV4dHJhLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuU1RSSU5HKX0sSmU9ZnVuY3Rpb24oZSl7KDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwib3B0aW9ucy5rZXlcIixlLmtleSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLlNUUklORywhMCksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwib3B0aW9ucy5pc1NlbmROb3RpZmljYXRpb25cIixlLmlzU2VuZE5vdGlmaWNhdGlvbixfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLkJPT0xFQU4pLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm9wdGlvbnMubm90aWZpY2F0aW9uRXh0cmFcIixlLm5vdGlmaWNhdGlvbkV4dHJhLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuU1RSSU5HKX07ZnVuY3Rpb24gV2UoZSx0KXtyZXR1cm4gTih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG4sbztyZXR1cm4gVSh0aGlzLChmdW5jdGlvbihhKXtzd2l0Y2goYS5sYWJlbCl7Y2FzZSAwOnJldHVybiAoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJvcHRpb25zLmNvdW50XCIsdC5jb3VudCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLk5VTUJFUiwhMCksbj1cImlkOlwiK2UsTy5kZWJ1ZyhcImpvaW4gY2hhdHJvb20gLT5cIituKSxbNCx0ZS5pbUNsaWVudC5jb250ZXh0LmpvaW5DaGF0cm9vbShlLHQuY291bnQpXTtjYXNlIDE6cmV0dXJuKG89YS5zZW50KCkpIT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUz8oTy53YXJuKFwiam9pbiBjaGF0cm9vbSBmYWlsIC0+Y29kZSs6XCIrb2Vbb10rXCIsXCIrbiksWzIse2NvZGU6byxtc2c6b2Vbb119XSk6WzIse2NvZGU6b31dfX0pKX0pKX1mdW5jdGlvbiBZZShlLHQpe3JldHVybiBOKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbixvO3JldHVybiBVKHRoaXMsKGZ1bmN0aW9uKGEpe3N3aXRjaChhLmxhYmVsKXtjYXNlIDA6cmV0dXJuICgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm9wdGlvbnMuY291bnRcIix0LmNvdW50LF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuTlVNQkVSLCEwKSxuPVwiaWQ6XCIrZSxPLmRlYnVnKFwiam9pbiBleGlzdCBjaGF0cm9vbSAtPlwiK24pLFs0LHRlLmltQ2xpZW50LmNvbnRleHQuam9pbkV4aXN0Q2hhdHJvb20oZSx0LmNvdW50KV07Y2FzZSAxOnJldHVybihvPWEuc2VudCgpKSE9PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1M/KE8ud2FybihcImpvaW4gZXhpc3QgY2hhdHJvb20gZmFpbCAtPmNvZGU6XCIrb2Vbb10rXCIsXCIrbiksWzIse2NvZGU6byxtc2c6b2Vbb119XSk6WzIse2NvZGU6b31dfX0pKX0pKX1mdW5jdGlvbiBRZShlKXtyZXR1cm4gTih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHQsbjtyZXR1cm4gVSh0aGlzLChmdW5jdGlvbihvKXtzd2l0Y2goby5sYWJlbCl7Y2FzZSAwOnJldHVybiB0PVwiaWQ6XCIrZSxPLmRlYnVnKFwicXVpdCBjaGF0cm9vbSAtPlwiK3QpLFs0LHRlLmltQ2xpZW50LmNvbnRleHQucXVpdENoYXRyb29tKGUpXTtjYXNlIDE6cmV0dXJuKG49by5zZW50KCkpIT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUz8oTy53YXJuKFwicXVpdCBjaGF0cm9vbSBmYWlsIC0+Y29kZSs6XCIrb2Vbbl0rXCIsXCIrdCksWzIse2NvZGU6bixtc2c6b2Vbbl19XSk6WzIse2NvZGU6bn1dfX0pKX0pKX1mdW5jdGlvbiAkZShlLHQpe3JldHVybiBOKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbixvLGEscztyZXR1cm4gVSh0aGlzLChmdW5jdGlvbihpKXtzd2l0Y2goaS5sYWJlbCl7Y2FzZSAwOnJldHVybiAoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJvcHRpb25zLmNvdW50XCIsdC5jb3VudCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLk5VTUJFUiksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwib3B0aW9ucy5vcmRlclwiLHQub3JkZXIsKGZ1bmN0aW9uKGUpe3JldHVyblswLDEsMl0uaW5jbHVkZXMoZSl9KSksbj1cImlkOlwiK2UsTy5kZWJ1ZyhcImdldCBjaGF0cm9vbSBpbmZvIC0+XCIrbiksWzQsdGUuaW1DbGllbnQuY29udGV4dC5nZXRDaGF0cm9vbUluZm8oZSx0LmNvdW50LHQub3JkZXIpXTtjYXNlIDE6cmV0dXJuIG89aS5zZW50KCksYT1vLmNvZGUscz1vLmRhdGEsYT09PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1MmJnM/WzIse2NvZGU6YSxkYXRhOnN9XTooTy53YXJuKFwiZ2V0IGNoYXRyb29tIGluZm8gZmFpbCAtPmNvZGUrOlwiK29lW2FdK1wiLFwiK24pLFsyLHtjb2RlOmEsbXNnOm9lW2FdfV0pfX0pKX0pKX1mdW5jdGlvbiBaZShlLHQpe3JldHVybiBOKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbixvO3JldHVybiBVKHRoaXMsKGZ1bmN0aW9uKGEpe3N3aXRjaChhLmxhYmVsKXtjYXNlIDA6cmV0dXJuICgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcInRhcmdldElkXCIsZSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLlNUUklORywhMCksamUodCksbj1cImlkOlwiK2UsTy5kZWJ1ZyhcInNldCBjaGF0cm9vbSBlbnRyeS0+XCIrbiksWzQsdGUuaW1DbGllbnQuY29udGV4dC5zZXRDaGF0cm9vbUVudHJ5KGUsdCldO2Nhc2UgMTpyZXR1cm4obz1hLnNlbnQoKSkhPT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTPyhPLndhcm4oXCJzZXQgY2hhdHJvb20gZW50cnkgZmFpbCAtPmNvZGUrOlwiK29lW29dK1wiLFwiK24pLFsyLHtjb2RlOm8sbXNnOm9lW29dfV0pOlsyLHtjb2RlOm99XX19KSl9KSl9ZnVuY3Rpb24gZXQoZSx0KXtyZXR1cm4gTih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG4sbyxhLHM7cmV0dXJuIFUodGhpcywoZnVuY3Rpb24oaSl7c3dpdGNoKGkubGFiZWwpe2Nhc2UgMDpyZXR1cm4gKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwidGFyZ2V0SWRcIixlLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuU1RSSU5HLCEwKSxmdW5jdGlvbihlKXtlLmVudHJpZXMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7KDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwiZW50cnkua2V5XCIsZS5rZXksX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5TVFJJTkcsITApLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcImVudHJ5LnZhbHVlXCIsZS52YWx1ZSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLlNUUklORywhMCl9KSksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwib3B0aW9ucy5pc0F1dG9EZWxldGVcIixlLmlzQXV0b0RlbGV0ZSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLkJPT0xFQU4pLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm9wdGlvbnMubm90aWZpY2F0aW9uRXh0cmFcIixlLm5vdGlmaWNhdGlvbkV4dHJhLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuU1RSSU5HKX0odCksdC5lbnRyaWVzLmxlbmd0aD4xMD9bMixuZS5DSEFUUk9PTV9LVl9TVE9SRV9PVVRfTElNSVRdOihuPVwiaWQ6XCIrZSxPLmRlYnVnKFwic2V0IGNoYXRyb29tIGVudHJ5LT5cIituKSxbNCx0ZS5pbUNsaWVudC5jb250ZXh0LnNldENoYXRyb29tRW50cmllcyhlLHQpXSk7Y2FzZSAxOnJldHVybiBvPWkuc2VudCgpLGE9by5jb2RlLHM9by5kYXRhLGEhPT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTPyhPLndhcm4oXCJzZXQgY2hhdHJvb20gZW50cnkgZmFpbCAtPmNvZGUrOlwiK29lW2FdK1wiLFwiK24pLFsyLHtjb2RlOmEsbXNnOm9lW2FdLGRhdGE6c31dKTpbMix7Y29kZTphfV19fSkpfSkpfWZ1bmN0aW9uIG50KGUsdCl7cmV0dXJuIE4odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBuLG87cmV0dXJuIFUodGhpcywoZnVuY3Rpb24oYSl7c3dpdGNoKGEubGFiZWwpe2Nhc2UgMDpyZXR1cm4gKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwidGFyZ2V0SWRcIixlLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuU1RSSU5HLCEwKSxqZSh0KSxuPVwiaWQ6XCIrZSxPLmRlYnVnKFwiZm9yY2Ugc2V0IGNoYXRyb29tIGVudHJ5IC0+XCIrbiksWzQsdGUuaW1DbGllbnQuY29udGV4dC5mb3JjZVNldENoYXRyb29tRW50cnkoZSx0KV07Y2FzZSAxOnJldHVybihvPWEuc2VudCgpKSE9PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1M/KE8ud2FybihcImZvcmNlIHNldCBjaGF0cm9vbSBlbnRyeSBmYWlsIC0+Y29kZSs6XCIrb2Vbb10rXCIsXCIrbiksWzIse2NvZGU6byxtc2c6b2Vbb119XSk6WzIse2NvZGU6b31dfX0pKX0pKX1mdW5jdGlvbiBvdChlLHQpe3JldHVybiBOKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbixvO3JldHVybiBVKHRoaXMsKGZ1bmN0aW9uKGEpe3N3aXRjaChhLmxhYmVsKXtjYXNlIDA6cmV0dXJuICgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcInRhcmdldElkXCIsZSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLlNUUklORywhMCksSmUodCksbj1cImlkOlwiK2UsTy5kZWJ1ZyhcInJlbW92ZSBjaGF0cm9vbSBlbnRyeS0+XCIrbiksWzQsdGUuaW1DbGllbnQuY29udGV4dC5yZW1vdmVDaGF0cm9vbUVudHJ5KGUsdCldO2Nhc2UgMTpyZXR1cm4obz1hLnNlbnQoKSkhPT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTPyhPLndhcm4oXCJyZW1vdmUgY2hhdHJvb20gZW50cnkgZmFpbCAtPmNvZGUrOlwiK29lW29dK1wiLFwiK24pLFsyLHtjb2RlOm8sbXNnOm9lW29dfV0pOlsyLHtjb2RlOm99XX19KSl9KSl9ZnVuY3Rpb24gYXQoZSx0KXtyZXR1cm4gTih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG4sbyxhLHMsaTtyZXR1cm4gVSh0aGlzLChmdW5jdGlvbihkKXtzd2l0Y2goZC5sYWJlbCl7Y2FzZSAwOnJldHVybiAoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJ0YXJnZXRJZFwiLGUsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5TVFJJTkcsITApLGZ1bmN0aW9uKGUpe2UuZW50cmllcy5mb3JFYWNoKChmdW5jdGlvbihlKXsoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJrZXlcIixlLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuU1RSSU5HLCEwKX0pKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJvcHRpb25zLm5vdGlmaWNhdGlvbkV4dHJhXCIsZS5ub3RpZmljYXRpb25FeHRyYSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLlNUUklORyl9KHQpLG49XCJpZDpcIitlLE8uZGVidWcoXCJyZW1vdmUgY2hhdHJvb20gZW50cnktPlwiK24pLChvPU9iamVjdC5hc3NpZ24oe30sdCkpLmVudHJpZXM9dC5lbnRyaWVzLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJue2tleTplfX0pKSxbNCx0ZS5pbUNsaWVudC5jb250ZXh0LnJlbW92ZUNoYXRyb29tRW50cmllcyhlLG8pXTtjYXNlIDE6cmV0dXJuIGE9ZC5zZW50KCkscz1hLmNvZGUsaT1hLmRhdGEscyE9PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1M/KE8ud2FybihcInJlbW92ZSBjaGF0cm9vbSBlbnRyeSBmYWlsIC0+Y29kZSs6XCIrb2Vbc10rXCIsXCIrbiksWzIse2NvZGU6cyxtc2c6b2Vbc10sZGF0YTppfV0pOlsyLHtjb2RlOnN9XX19KSl9KSl9ZnVuY3Rpb24gcnQoZSx0KXtyZXR1cm4gTih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG4sbztyZXR1cm4gVSh0aGlzLChmdW5jdGlvbihhKXtzd2l0Y2goYS5sYWJlbCl7Y2FzZSAwOnJldHVybiAoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJ0YXJnZXRJZFwiLGUsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5TVFJJTkcsITApLEplKHQpLG49XCJpZDpcIitlLE8uZGVidWcoXCJmb3JjZSByZW1vdmUgY2hhdHJvb20gZW50cnkgLT5cIituKSxbNCx0ZS5pbUNsaWVudC5jb250ZXh0LmZvcmNlUmVtb3ZlQ2hhdHJvb21FbnRyeShlLHQpXTtjYXNlIDE6cmV0dXJuKG89YS5zZW50KCkpIT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUz8oTy53YXJuKFwiZm9yY2UgcmVtb3ZlIGNoYXRyb29tIGVudHJ5IGZhaWwgLT5jb2RlKzpcIitvZVtvXStcIixcIituKSxbMix7Y29kZTpvLG1zZzpvZVtvXX1dKTpbMix7Y29kZTpvfV19fSkpfSkpfWZ1bmN0aW9uIHN0KGUsdCl7cmV0dXJuIE4odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBuLG8sYSxzO3JldHVybiBVKHRoaXMsKGZ1bmN0aW9uKGkpe3N3aXRjaChpLmxhYmVsKXtjYXNlIDA6cmV0dXJuICgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcImtleVwiLHQsKGZ1bmN0aW9uKGUpe3JldHVybiAoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmlzU3RyaW5nKShlKSYmL1tcXHcrPS1dKy8udGVzdChlKSYmZS5sZW5ndGg8PTEyOH0pLCEwKSxuPVwiaWQ6XCIrZSxPLmRlYnVnKFwiZ2V0IGNoYXRyb29tIGVudHJ5LT5cIituKSxbNCx0ZS5pbUNsaWVudC5jb250ZXh0LmdldENoYXRyb29tRW50cnkoZSx0KV07Y2FzZSAxOnJldHVybiBvPWkuc2VudCgpLGE9by5jb2RlLHM9by5kYXRhLGE9PT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTJiZzP1syLHtjb2RlOmEsZGF0YTpzfV06KE8ud2FybihcImdldCBjaGF0cm9vbSBlbnRyeSBmYWlsIC0+Y29kZSs6XCIrb2VbYV0rXCIsXCIrbiksWzIse2NvZGU6YSxtc2c6b2VbYV19XSl9fSkpfSkpfWZ1bmN0aW9uIGl0KGUpe3JldHVybiBOKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgdCxuLG8sYTtyZXR1cm4gVSh0aGlzLChmdW5jdGlvbihzKXtzd2l0Y2gocy5sYWJlbCl7Y2FzZSAwOnJldHVybiB0PVwiaWQ6XCIrZSxPLmRlYnVnKFwiZ2V0IGFsbCBjaGF0cm9vbSBlbnRyaWVzLT5cIit0KSxbNCx0ZS5pbUNsaWVudC5jb250ZXh0LmdldEFsbENoYXRyb29tRW50cmllcyhlKV07Y2FzZSAxOnJldHVybiBuPXMuc2VudCgpLG89bi5jb2RlLGE9bi5kYXRhLG89PT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTJiZhP1syLHtjb2RlOm8sZGF0YTphfV06KE8ud2FybihcImdldCBhbGwgY2hhdHJvb20gZW50cmllcyBmYWlsIC0+Y29kZSs6XCIrb2Vbb10rXCIsXCIrdCksWzIse2NvZGU6byxtc2c6b2Vbb119XSl9fSkpfSkpfWZ1bmN0aW9uIGN0KGUsdCl7cmV0dXJuIE4odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBuLG8sYSxzLGk7cmV0dXJuIFUodGhpcywoZnVuY3Rpb24oZCl7c3dpdGNoKGQubGFiZWwpe2Nhc2UgMDpyZXR1cm4gKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwib3B0aW9ucy50aW1lc3RhbXBcIix0LnRpbWVzdGFtcCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLk5VTUJFUiksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwib3B0aW9ucy5jb3VudFwiLHQuY291bnQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5OVU1CRVIpLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm9wdGlvbnMub3JkZXJcIix0Lm9yZGVyLChmdW5jdGlvbihlKXtyZXR1cm4gMD09PWV8fDE9PT1lfSkpLG49XCJpZDpcIitlLE8uZGVidWcoXCJnZXQgY2hhdHJvb20gaGlzdG9yeSBtZXNzYWdlLT5cIituKSxbNCx0ZS5pbUNsaWVudC5jb250ZXh0LmdldENoYXRSb29tSGlzdG9yeU1lc3NhZ2VzKGUsdC5jb3VudCx0Lm9yZGVyLHQudGltZXN0YW1wKV07Y2FzZSAxOnJldHVybiBvPWQuc2VudCgpLGE9by5jb2RlLHM9by5kYXRhLGE9PT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTJiZzPyhpPXMubGlzdC5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBaKGUpfSkpLFsyLHtjb2RlOmEsZGF0YTp7bGlzdDppLGhhc01vcmU6ISFzLmhhc01vcmV9fV0pOihPLndhcm4oXCJnZXQgY2hhdHJvb20gaGlzdG9yeSBtZXNzYWdlIGZhaWwgLT5jb2RlKzpcIitvZVthXStcIixcIituKSxbMix7Y29kZTphLG1zZzpvZVthXX1dKX19KSl9KSl9ZnVuY3Rpb24gZHQoZSl7cmV0dXJuIE4odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciB0O3JldHVybiBVKHRoaXMsKGZ1bmN0aW9uKG4pe3N3aXRjaChuLmxhYmVsKXtjYXNlIDA6cmV0dXJuWzQsdGUuaW1DbGllbnQuY29udGV4dC5iaW5kUlRDUm9vbUZvckNoYXRyb29tKGUpXTtjYXNlIDE6cmV0dXJuWzIse2NvZGU6dD1uLnNlbnQoKSxtc2c6b2VbdF19XX19KSl9KSl9dmFyIHV0PWZ1bmN0aW9uKGUsdCxuLG8pe3ZvaWQgMD09PW4mJihuPSEwKSx2b2lkIDA9PT1vJiYobz0hMCksdGhpcy5tZXNzYWdlVHlwZT1lLHRoaXMuY29udGVudD10LHRoaXMuaXNQZXJzaXRlZD1uLHRoaXMuaXNDb3VudGVkPW99O2Z1bmN0aW9uIGx0KGUsdCxuKXt2b2lkIDA9PT10JiYodD0hMCksdm9pZCAwPT09biYmKG49ITApO3JldHVybiBmdW5jdGlvbihvKXtyZXR1cm4gbmV3IHV0KGUsbyx0LG4pfX12YXIgZ3QsZnQsbXQ9bHQoXCJSQzpJbWdNc2dcIikscHQ9bHQoXCJSQzpIUVZDTXNnXCIpLGh0PWx0KFwiUkM6U2lnaHRNc2dcIiksdnQ9bHQoXCJSQzpUeHRNc2dcIiksSXQ9bHQoXCJSQzpDb21iaW5lTXNnXCIpLFN0PWx0KFwiUkM6RmlsZU1zZ1wiKSxDdD1sdChcIlJDOkdJRk1zZ1wiKSxUdD1sdChcIlJDOlZjTXNnXCIpLEV0PWx0KFwiUkM6TEJTTXNnXCIpLHl0PWx0KFwiUkM6UmVmZXJlbmNlTXNnXCIpLFJ0PWx0KFwiUkM6SW1nVGV4dE1zZ1wiKSxOdD17cWluaXU6ZnVuY3Rpb24oZSx0LG4sbyl7dmFyIGEscj1cImh0dHBzOi8vXCIrdC51cGxvYWRIb3N0LnFpbml1O2E9X3QoKStVdFswXVsxXXx8cixVdC5zaGlmdCgpO3ZhciBzPW5ldyBYTUxIdHRwUmVxdWVzdDtzLnVwbG9hZCYmdC5zdXBwb3J0X29wdGlvbnMmJihzLnVwbG9hZC5vbnByb2dyZXNzPWZ1bmN0aW9uKGUpe24ub25Qcm9ncmVzcyhlLmxvYWRlZCxlLnRvdGFsKX0pO3Mub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7aWYoND09PXMucmVhZHlTdGF0ZSl7dmFyIGE9cy5yZXNwb25zZVRleHR8fFwie31cIjsoYT1KU09OLnBhcnNlKGEpKS5maWxlbmFtZT10LnVuaXF1ZVZhbHVlLGEudXBsb2FkTWV0aG9kPV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uVXBsb2FkTWV0aG9kP19yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uVXBsb2FkTWV0aG9kLlFJTklVOlwiXCIsMjAwPT09cy5zdGF0dXM/bi5vbkNvbXBsZXRlZChhKTpVdC5sZW5ndGg/TnRbVXRbMF1bMF1dKGUsdCxuLG8pOm4ub25FcnJvcihcInVwbG9hZCBmYWlsXCIpfX0sdC5pc0NodW5rJiYoYT1mdW5jdGlvbihlLHQpe3ZhciBuPVwiXCI7TXQodCwoZnVuY3Rpb24oZSx0KXtcInRva2VuXCIhPT1lJiYobis9KG4/XCImXCI6XCJcIikrZW5jb2RlVVJJQ29tcG9uZW50KGUpK1wiPVwiK2VuY29kZVVSSUNvbXBvbmVudCh0KSl9KSksbiYmKGUrPShlLmluZGV4T2YoXCI/XCIpPjA/XCImXCI6XCI/XCIpK24pO3JldHVybiBlfShhKz1cIi9ta2Jsay9cIitlLnNpemUsdC5tdWx0aV9wYXJtYXMpKTtzLm9wZW4odC5tZXRob2QsYSwhMCksbi5vbk9wZW4ocyksdC5zdHJlYW0mJnMuc2V0UmVxdWVzdEhlYWRlcihcImF1dGhvcml6YXRpb25cIixcIlVwVG9rZW4gXCIrdC5tdWx0aV9wYXJtYXMudG9rZW4pO010KHQuaGVhZGVycywoZnVuY3Rpb24oZSx0KXtzLnNldFJlcXVlc3RIZWFkZXIoZSx0KX0pKSxzLnNlbmQoZSl9LGJhaWR1OmZ1bmN0aW9uKGUsdCxuLG8pe2lmKGNvbnNvbGUubG9nKG8sdCksby5zaXplPk90KXRocm93IG5ldyBFcnJvcihcInRoZSBmaWxlIHNpemUgaXMgb3ZlciA1R0IhXCIpO3ZhciBhPXR8fHt9O3Q9dHx8ZnQ7dmFyIHI9bmV3IFhNTEh0dHBSZXF1ZXN0LHM9X3QoKTtpZighYS51cGxvYWRIb3N0LmJvcyYmIWEuYm9zVXBsb2FkUGF0aClyZXR1cm47dmFyIGk9cytVdFswXVsxXSthLmJvc1VwbG9hZFBhdGg7VXQuc2hpZnQoKTt2YXIgYz1hLmJvc0hlYWRlcnx8e30sZD17ZmlsZW5hbWU6dC51bmlxdWVWYWx1ZXx8by51bmlxdWVOYW1lLG5hbWU6by5uYW1lLGRvd25sb2FkVXJsOmksaXNCb3NSZXM6ITB9O3IudXBsb2FkJiZ0LnN1cHBvcnRfb3B0aW9ucyYmKHIudXBsb2FkLm9ucHJvZ3Jlc3M9ZnVuY3Rpb24oZSl7bi5vblByb2dyZXNzKGUubG9hZGVkLGUudG90YWwsITApfSk7ci5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXtpZig0PT09ci5yZWFkeVN0YXRlKXt2YXIgYT1yLnJlc3BvbnNlVGV4dHx8XCJ7fVwiO2lmKChhPUpTT04ucGFyc2UoYSkpLmZpbGVuYW1lPXQudW5pcXVlVmFsdWUsMjAwPT09ci5zdGF0dXMpe24ub25Db21wbGV0ZWQoZCwhMCl9ZWxzZSBVdC5sZW5ndGg/TnRbVXRbMF1bMF1dKGUsdCxuLG8pOm4ub25FcnJvcihcInVwbG9hZCBmYWlsXCIpfX0sci5vcGVuKHQubWV0aG9kLGksITApLHIuc2V0UmVxdWVzdEhlYWRlcihcImF1dGhvcml6YXRpb25cIixjLmJvc1Rva2VuKSxyLnNldFJlcXVlc3RIZWFkZXIoXCJ4LWJjZS1kYXRlXCIsYy5ib3NEYXRlKSxyLnNlbmQobyl9LGFsaXl1bjpmdW5jdGlvbihlLHQsbixvKXtpZihvLnNpemU+T3QpdGhyb3cgbmV3IEVycm9yKFwidGhlIGZpbGUgc2l6ZSBpcyBvdmVyIDVHQiFcIik7Y29uc3QgYT1uZXcgRm9ybURhdGE7YS5zZXQoXCJmaWxlXCIsZS5nZXQoXCJmaWxlXCIpKSxhLnNldChcImtleVwiLGUuZ2V0KFwia2V5XCIpKSxhLnNldChcInRva2VuXCIsZS5nZXQoXCJ0b2tlblwiKSk7Y29uc3Qgcj1VdFswXVsxXTtVdC5zaGlmdCgpLGU9ZXx8Z3QsdD0odD10fHx7fSl8fGZ0O3ZhciBzPW5ldyBYTUxIdHRwUmVxdWVzdCxpPV90KCkrdC5vc3NCdWNrZXROYW1lK1wiLlwiK3I7cy51cGxvYWQmJnQuc3VwcG9ydF9vcHRpb25zJiYocy51cGxvYWQub25wcm9ncmVzcz1mdW5jdGlvbihlKXtuLm9uUHJvZ3Jlc3MoZS5sb2FkZWQsZS50b3RhbCl9KTtzLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe2lmKDQ9PT1zLnJlYWR5U3RhdGUpe3ZhciBlPXMucmVzcG9uc2VUZXh0fHxcInt9XCI7KGU9SlNPTi5wYXJzZShlKSkubmFtZT10LnVuaXF1ZVZhbHVlLGUuZmlsZW5hbWU9dC51cGxvYWRGaWxlTmFtZSxlLnVwbG9hZE1ldGhvZD1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLlVwbG9hZE1ldGhvZD9fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLlVwbG9hZE1ldGhvZC5BTEk6XCJcIiwyMDA9PT1zLnN0YXR1cz9uLm9uQ29tcGxldGVkKGUpOlV0Lmxlbmd0aD9OdFtVdFswXVswXV0oYSx0LG4sbyk6bi5vbkVycm9yKFwidXBsb2FkIGZhaWxcIil9fSxzLm9wZW4odC5tZXRob2QsaSwhMCksY29uc29sZS5sb2coXCJhbGk6dXJsXCIsaSk7dmFyIGM9dC5hbGlIZWFkZXJ8fHt9O2Uuc2V0KFwiT1NTQWNjZXNzS2V5SWRcIixjLm9zc2tleUlkKSxlLnNldChcInBvbGljeVwiLGMub3NzUG9saWN5KSxlLnNldChcIlNpZ25hdHVyZVwiLGMub3NzU2lnbiksZS5zZXQoXCJzdWNjZXNzX2FjdGlvbl9zdGF0dXNcIiwyMDApLGUuZGVsZXRlKFwia2V5XCIpLGUuYXBwZW5kKFwia2V5XCIsdC51cGxvYWRGaWxlTmFtZSksZS5kZWxldGUoXCJmaWxlXCIpLGUuYXBwZW5kKFwiZmlsZVwiLG8pLHMuc2VuZChlKX0sczM6ZnVuY3Rpb24oZSx0LG4sbyl7dmFyIGE9bmV3IEZvcm1EYXRhLHI9bmV3IFhNTEh0dHBSZXF1ZXN0LHM9X3QoKTtjb25zdCBpPVV0WzBdWzFdO3ZhciBjPXMrdC5zM0J1Y2tldE5hbWUrXCIuXCIraTtjb25zb2xlLmxvZyhcInVwbG9hZFMzOnVybFwiLGMpLFV0LnNoaWZ0KCksci51cGxvYWQmJnQuc3VwcG9ydF9vcHRpb25zJiYoci51cGxvYWQub25wcm9ncmVzcz1mdW5jdGlvbihlKXtuLm9uUHJvZ3Jlc3MoZS5sb2FkZWQsZS50b3RhbCl9KTtyLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe2lmKDQ9PT1yLnJlYWR5U3RhdGUpe3ZhciBhPXIucmVzcG9uc2VUZXh0fHxcInt9XCI7aWYoKGE9SlNPTi5wYXJzZShhKSkubmFtZT10LnVuaXF1ZVZhbHVlLGEuZmlsZW5hbWU9dC51cGxvYWRGaWxlTmFtZSxhLnVwbG9hZE1ldGhvZD1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLlVwbG9hZE1ldGhvZC5BV1MsY29uc29sZS5sb2coXCJVcGxvYWRNZXRob2Q6XCIsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5VcGxvYWRNZXRob2QpLDIwMD09PXIuc3RhdHVzfHwyMDQ9PT1yLnN0YXR1cyluLm9uQ29tcGxldGVkKGEpO2Vsc2UgaWYoVXQubGVuZ3RoKXtjb25zdCBhPW5ldyBGb3JtRGF0YTthLnNldChcImZpbGVcIixlLmdldChcImZpbGVcIikpLGEuc2V0KFwia2V5XCIsZS5nZXQoXCJrZXlcIikpLGEuc2V0KFwidG9rZW5cIixlLmdldChcInRva2VuXCIpKSxOdFtVdFswXVswXV0oYSx0LG4sbyl9ZWxzZSBuLm9uRXJyb3IoXCJ1cGxvYWQgZmFpbFwiKX19LHIub3Blbih0Lm1ldGhvZCxjLCEwKTt2YXIgZD10P3QuczNIZWFkZXI6e30sdT1vJiZvLnR5cGU7XCJ0ZXh0L2h0bWxcIj09PXU/YS5zZXQoXCJDb250ZW50LURpc3Bvc2l0aW9uXCIsXCJpbmxpbmU7XCIpOmEuc2V0KFwiQ29udGVudC1EaXNwb3NpdGlvblwiLFwiYXR0YWNobWVudDtcIik7YS5zZXQoXCJDb250ZW50LVR5cGVcIix1KSxhLnNldChcIngtYW16LWNyZWRlbnRpYWxcIixkLnMzQ3JlZGVudGlhbCksYS5zZXQoXCJ4LWFtei1hbGdvcml0aG1cIixkLnMzQWxnb3JpdGhtKSxhLnNldChcIngtYW16LWRhdGVcIixkLnMzRGF0ZSksYS5zZXQoXCJwb2xpY3lcIixkLnMzUG9saWN5KSxhLnNldChcIngtYW16LXNpZ25hdHVyZVwiLGQuczNTaWduYXR1cmUpLGEuc2V0KFwia2V5XCIsdC51cGxvYWRGaWxlTmFtZSksYS5zZXQoXCJmaWxlXCIsbyksci5zZW5kKGEpfSxzdGM6ZnVuY3Rpb24oZSx0LG4sbyl7bmV3IEZvcm1EYXRhO3ZhciBhPW5ldyBYTUxIdHRwUmVxdWVzdDtfdCgpO3ZhciByPVwiaHR0cHM6Ly9cIitVdFswXVsxXStcIi9cIit0LnN0Y0J1Y2tldE5hbWUrXCIvXCIrdC51cGxvYWRGaWxlTmFtZTtVdC5zaGlmdCgpLGEudXBsb2FkJiZ0LnN1cHBvcnRfb3B0aW9ucyYmKGEudXBsb2FkLm9ucHJvZ3Jlc3M9ZnVuY3Rpb24oZSl7bi5vblByb2dyZXNzKGUubG9hZGVkLGUudG90YWwpfSk7YS5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXtpZig0PT09YS5yZWFkeVN0YXRlKXt2YXIgcj1hLnJlc3BvbnNlVGV4dHx8XCJ7fVwiO2lmKChyPUpTT04ucGFyc2UocikpLm5hbWU9dC51bmlxdWVWYWx1ZSxyLmZpbGVuYW1lPXQudXBsb2FkRmlsZU5hbWUsci51cGxvYWRNZXRob2Q9X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5VcGxvYWRNZXRob2Q/X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5VcGxvYWRNZXRob2QuU1RDOlwiXCIsMjAwPT09YS5zdGF0dXN8fDIwND09PWEuc3RhdHVzKW4ub25Db21wbGV0ZWQocik7ZWxzZSBpZihVdC5sZW5ndGgpe2NvbnN0IGE9bmV3IEZvcm1EYXRhO2Euc2V0KFwiZmlsZVwiLGUuZ2V0KFwiZmlsZVwiKSksYS5zZXQoXCJrZXlcIixlLmdldChcImtleVwiKSksYS5zZXQoXCJ0b2tlblwiLGUuZ2V0KFwidG9rZW5cIikpLE50W1V0WzBdWzBdXShhLHQsbixvKX1lbHNlIG4ub25FcnJvcihcInVwbG9hZCBmYWlsXCIpfX0sYS5vcGVuKFwiUFVUXCIsciwhMCk7dmFyIHM9dD90LnN0Y0hlYWRlcjp7fTthLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LVR5cGVcIixvLnR5cGUpLFwidGV4dC9odG1sXCI9PT1vLnR5cGU/YS5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC1EaXNwb3NpdGlvblwiLFwiaW5saW5lO1wiKTphLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LURpc3Bvc2l0aW9uXCIsXCJhdHRhY2htZW50O1wiKTthLnNldFJlcXVlc3RIZWFkZXIoXCJBdXRob3JpemF0aW9uXCIscy5zdGNBdXRob3JpemF0aW9uKSxhLnNldFJlcXVlc3RIZWFkZXIoXCJ4LWFtei1jb250ZW50LXNoYTI1NlwiLHMuc3RjQ29udGVudFNoYTI1NiksYS5zZXRSZXF1ZXN0SGVhZGVyKFwieC1hbXotZGF0ZVwiLHMuc3RjRGF0ZSksYS5zZW5kKG8pfX0sVXQ9W10sT3Q9NTM2ODcwOTEyMDtmdW5jdGlvbiBNdChlLHQpe2Zvcih2YXIgbiBpbiBlKXQobixlW25dKX1mdW5jdGlvbiBfdCgpe3ZhciBlPVwiaHR0cHM6Ly9cIjtyZXR1cm5cImh0dHA6XCIhPT1sb2NhdGlvbi5wcm90b2NvbCYmXCJmaWxlOlwiIT09bG9jYXRpb24ucHJvdG9jb2x8fChlPVwiaHR0cDovL1wiKSxlfWZ1bmN0aW9uIHd0KGUsdCxuKXt2YXIgbyxhLHI9ZSYmZS50eXBlfHxcInRleHQvcGxhaW5cIixzPXIuaW5kZXhPZihcImltYWdlXCIpPi0xPzE6NCxpPU1hdGguY2VpbChlLnNpemUvdC5zdGNfY2h1bmtfc2l6ZSksYz10JiZKU09OLnBhcnNlKHQub3NzQ29uZmlnP3Qub3NzQ29uZmlnOlwiXCIpO0FycmF5LmlzQXJyYXkoYyl8fChjPVtdKTt2YXIgZD1jLmZpbmQoKGU9Pk9iamVjdC5rZXlzKGUpLmluY2x1ZGVzKFwic3RjXCIpKSksdT1cInVwbG9hZHNcIjt0ZS5pbUNsaWVudC5nZXRGaWxlVG9rZW4ocyxvLFwiUE9TVFwiLHUpLnRoZW4oKGZ1bmN0aW9uKGUpe289ZS5maWxlTmFtZSxhPVwiaHR0cHM6Ly9cIitkLnN0YytcIi9cIit0LnN0Y0J1Y2tldE5hbWUrXCIvXCIrbyxjb25zb2xlLmxvZyhcInVwbG9hZFN0Y011bHRpcGFydDp1cmxcIixhKTt2YXIgcz1uZXcgWE1MSHR0cFJlcXVlc3Q7cy5vcGVuKFwiUE9TVFwiLGErXCI/XCIrdSwhMCksXCJ0ZXh0L2h0bWxcIj09PXI/cy5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC1EaXNwb3NpdGlvblwiLFwiaW5saW5lO1wiKTpzLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LURpc3Bvc2l0aW9uXCIsXCJhdHRhY3NobWVudDtcIikscy5zZXRSZXF1ZXN0SGVhZGVyKFwiQXV0aG9yaXphdGlvblwiLGUmJmUuc3RjQXV0aG9yaXphdGlvbikscy5zZXRSZXF1ZXN0SGVhZGVyKFwieC1hbXotY29udGVudC1zaGEyNTZcIixlJiZlLnN0Y0NvbnRlbnRTaGEyNTYpLHMuc2V0UmVxdWVzdEhlYWRlcihcIngtYW16LWRhdGVcIixlJiZlLnN0Y0RhdGUpLHMuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLHIpLHMuc2VuZCgpLHMub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKGUpe2lmKDQ9PT1zLnJlYWR5U3RhdGUpe3ZhciB0PXMucmVzcG9uc2UubWF0Y2goLyg/OjxVcGxvYWRJZD4pKFxcUyo/KSg/OjxcXC9VcGxvYWRJZD4pLyk7Y29uc29sZS5sb2coXCJ1cGxvYWRJZFwiLHQpLDIwMD09PXMuc3RhdHVzfHwyMDQ9PT1zLnN0YXR1cz9mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10sbj0xO248PWk7bisrKXQucHVzaChtKGUsbikpO2YoZSx0KX0oQXJyYXkuaXNBcnJheSh0KSYmdFsxXSk6bi5vbkVycm9yKFwidXBsb2FkU3RjTXVsdGlwYXJ0OmRpZCBub3QgZ2V0IHVwbG9hZElkXCIpfX19KSwoZnVuY3Rpb24oZSl7bi5vbkVycm9yKFwidXBsb2FkU3RjTXVsdGlwYXJ0OlwiK2UpfSkpO3ZhciBsPVtdLGc9bmV3IE1hcDtmdW5jdGlvbiBmKGMsZCl7ZCYmQXJyYXkuaXNBcnJheShkKSYmMCE9PWQubGVuZ3RoJiZQcm9taXNlLmFsbChkKS50aGVuKCgoKT0+e3ZhciBkPVwidXBsb2FkSWQ9XCIrYztpZihnLnNpemU9PT1pKXRlLmltQ2xpZW50LmNvbnRleHQuZ2V0RmlsZVRva2VuKHMsbyxcIlBPU1RcIixkKS50aGVuKChmdW5jdGlvbihvKXtjb25zb2xlLmxvZyhcIm9uU3VjY2Vzc1wiLG8pLGNvbnNvbGUubG9nKFwib25TdWNjZXNzOnVwbG9hZElkXCIsYyk7dmFyIHM9bmV3IFhNTEh0dHBSZXF1ZXN0O3Mub3BlbihcIlBPU1RcIixhK1wiP1wiK2QsITApLHMuc2V0UmVxdWVzdEhlYWRlcihcIkF1dGhvcml6YXRpb25cIixvJiZvLnN0Y0F1dGhvcml6YXRpb24pLHMuc2V0UmVxdWVzdEhlYWRlcihcIngtYW16LWNvbnRlbnQtc2hhMjU2XCIsbyYmby5zdGNDb250ZW50U2hhMjU2KSxzLnNldFJlcXVlc3RIZWFkZXIoXCJ4LWFtei1kYXRlXCIsbyYmby5zdGNEYXRlKSxzLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LVR5cGVcIixyKTt2YXIgaT1cIjxDb21wbGV0ZU11bHRpcGFydFVwbG9hZCB4bWxucz0naHR0cDovL3MzLmFtYXpvbmF3cy5jb20vZG9jLzIwMDYtMDMtMDEvJz5cIix1PUFycmF5LmZyb20oZy5rZXlzKCl8fFtdKS5zb3J0KCgoZSx0KT0+ZS10KSk7Y29uc29sZS5sb2coXCJrZXlzXCIsdSksdS5tYXAoKGU9PntpKz1gPFBhcnQ+PEVUYWc+JHtnLmdldChlKX08L0VUYWc+PFBhcnROdW1iZXI+JHtlfTwvUGFydE51bWJlcj48L1BhcnQ+YH0pKSxpKz1cIjwvQ29tcGxldGVNdWx0aXBhcnRVcGxvYWQ+XCIscy5zZW5kKGkpLGNvbnNvbGUubG9nKFwieG1sXCIsaSkscy5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXtpZig0PT09cy5yZWFkeVN0YXRlKWlmKDIwMD09PXMuc3RhdHVzfHwyMDQ9PT1zLnN0YXR1cyl7dmFyIG89e307by5uYW1lPWUubmFtZSxvLmZpbGVuYW1lPXQudXBsb2FkRmlsZU5hbWUsby51cGxvYWRNZXRob2Q9X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5VcGxvYWRNZXRob2QuU1RDLG4ub25Db21wbGV0ZWQobyl9ZWxzZSBuLm9uRXJyb3IoXCJ1cGxvYWRTdGNNdWx0aXBhcnQ6dXBsb2FkIGRvZXMgbm90IGVuZFwiKX19KSwoZnVuY3Rpb24oZSl7bi5vbkVycm9yKFwidXBsb2FkU3RjTXVsdGlwYXJ0OlwiK2UpfSkpO2Vsc2V7dmFyIHU9W107Zm9yKHZhciBwIG9mIGwpdS5wdXNoKG0oYyxwKSk7ZihjLHUpfX0pLChlPT57Y29uc29sZS5lcnJvcihlKSxuLm9uRXJyb3IoXCJ1cGxvYWRTdGNNdWx0aXBhcnQ6IGNodW5rRmlsZXMgdXBsb2FkIGZhaWxlZCBhbmQgdGhvc2Ugd2lsbCByZXVwbG9hZFwiKTt2YXIgdD1bXTtmb3IodmFyIG8gb2YgbCl0LnB1c2gobShjLG8pKTtmKGMsdCl9KSl9ZnVuY3Rpb24gbShuLGkpe3JldHVybiBuZXcgUHJvbWlzZSgoKGMsZCk9Pnt2YXIgdT1cInBhcnROdW1iZXI9XCIraStcIiZ1cGxvYWRJZD1cIituO3RlLmltQ2xpZW50LmNvbnRleHQuZ2V0RmlsZVRva2VuKHMsbyxcIlBVVFwiLHUpLnRoZW4oKGZ1bmN0aW9uKG4pe2NvbnNvbGUubG9nKFwic2lnbmF0dXJlIFwiK2krXCIgb25TdWNjZXNzXCIsbik7dmFyIG89ZSYmZS5zbGljZSgoaS0xKSp0LnN0Y19jaHVua19zaXplLGkqdC5zdGNfY2h1bmtfc2l6ZSk7Y29uc29sZS5sb2coXCJmaWxlQ2h1bms6c2l6ZVwiLG8uc2l6ZSk7dmFyIHM9bmV3IFhNTEh0dHBSZXF1ZXN0O3Mub3BlbihcIlBVVFwiLGErXCI/XCIrdSwhMCkscy5zZXRSZXF1ZXN0SGVhZGVyKFwiQXV0aG9yaXphdGlvblwiLG4mJm4uc3RjQXV0aG9yaXphdGlvbikscy5zZXRSZXF1ZXN0SGVhZGVyKFwieC1hbXotY29udGVudC1zaGEyNTZcIixuJiZuLnN0Y0NvbnRlbnRTaGEyNTYpLHMuc2V0UmVxdWVzdEhlYWRlcihcIngtYW16LWRhdGVcIixuJiZuLnN0Y0RhdGUpLHMuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLHIpLHMuc2VuZChvKSxzLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe2lmKDQ9PT1zLnJlYWR5U3RhdGUpaWYoMjAwPT09cy5zdGF0dXN8fDIwND09PXMuc3RhdHVzKXt2YXIgZT1zLmdldFJlc3BvbnNlSGVhZGVyKFwiZXRhZ1wiKTtjb25zb2xlLmxvZyhcImV0YWc6XCIraSxlKSxnLnNldChpLGUpLGMoZSl9ZWxzZSBsLmluY2x1ZGVzKGkpfHxsLnB1c2goaSksZChpKX19KSwoZnVuY3Rpb24oZSl7Y29uc29sZS5sb2coXCJnZXRFVGFnczrnrb7lkI3pqozor4HlpLHotKVcIiksbC5pbmNsdWRlcyhpKXx8bC5wdXNoKGkpLGQoaSl9KSl9KSl9fXZhciBBdD17Zm9ybTpmdW5jdGlvbihlLHQpe3ZhciBuPW5ldyBGb3JtRGF0YTtpZih0LnVuaXF1ZV9rZXkpe3ZhciBvPWUubmFtZS5zdWJzdHIoZS5uYW1lLmxhc3RJbmRleE9mKFwiLlwiKSksYT14dCgpK287bi5hcHBlbmQodC51bmlxdWVfa2V5LGEpLHQudW5pcXVlVmFsdWU9YX1yZXR1cm4gbi5hcHBlbmQodC5maWxlX2RhdGFfbmFtZSxlKSxidCh0Lm11bHRpX3Bhcm1hcywoZnVuY3Rpb24oZSx0KXtuLmFwcGVuZChlLHQpfSkpLG59LGpzb246ZnVuY3Rpb24oZSx0KXt2YXIgbj17fTtpZih0LnVuaXF1ZV9rZXkpe3ZhciBvPWUubmFtZS5zdWJzdHIoZS5uYW1lLmxhc3RJbmRleE9mKFwiLlwiKSksYT14dCgpK287blt0LnVuaXF1ZV9rZXldPWEsdC51bmlxdWVWYWx1ZT1hfXJldHVybiBuW3QuZmlsZV9kYXRhX25hbWVdPWUsYnQodC5tdWx0aV9wYXJtYXMsKGZ1bmN0aW9uKGUsdCl7bltlXT10fSkpLEpTT04uc3RyaW5naWZ5KG4pfSxkYXRhOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGV9fTtmdW5jdGlvbiB4dCgpe3ZhciBlPShuZXcgRGF0ZSkuZ2V0VGltZSgpO3JldHVyblwieHh4eHh4NHh4eHl4eHh4eHh4XCIucmVwbGFjZSgvW3h5XS9nLChmdW5jdGlvbih0KXt2YXIgbj0oZSsxNipNYXRoLnJhbmRvbSgpKSUxNnwwO3JldHVybiBlPU1hdGguZmxvb3IoZS8xNiksKFwieFwiPT09dD9uOjMmbnw4KS50b1N0cmluZygxNil9KSl9ZnVuY3Rpb24gYnQoZSx0KXtmb3IodmFyIG4gaW4gZSl0KG4sZVtuXSl9dmFyIFB0LEx0PTA7ZnVuY3Rpb24gR3QoZSl7dGhpcy5vcHRpb25zPWZ1bmN0aW9uKGUpe3ZhciB0PXtkb21haW46XCJcIixtZXRob2Q6XCJQT1NUXCIsZmlsZV9kYXRhX25hbWU6XCJmaWxlXCIsdW5pcXVlX2tleTpcImtleVwiLGJhc2U2NF9zaXplOjQxOTQzMDQsY2h1bmtfc2l6ZTo0MTk0MzA0LGJvc19jaHVua19zaXplOjQyOTQ5NjcyOTYsc3RjX2NodW5rX3NpemU6MTA0ODU3NjAsaGVhZGVyczp7fSxtdWx0aV9wYXJtYXM6e30scXVlcnk6e30sc3VwcG9ydF9vcHRpb25zOiEwLGRhdGE6QXQuZm9ybSxnZW5VSWQ6eHR9O2lmKCFlfHwhZS5kb21haW4pdGhyb3cgbmV3IEVycm9yKFwiZG9tYWluIGlzIG51bGxcIik7Zm9yKHZhciBuIGluIGUpdFtuXT1lW25dO3JldHVybiB0fShlKSx0aGlzLnNldE9wdGlvbnM9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztidChlLChmdW5jdGlvbihlLG4pe3Qub3B0aW9uc1tlXT1ufSkpfSxjb25zb2xlLmxvZyhcIm9wdGlvbnNcIixlKSx0aGlzLnVwbG9hZD1mdW5jdGlvbihlLHQpe2lmKGUpe3ZhciBuPXRoaXM7IWZ1bmN0aW9uKGUsdCxuKXtpZihndD1lLGZ0PXQsVXQ9W10sdC5vc3NDb25maWcpe2NvbnN0IGU9SlNPTi5wYXJzZSh0Lm9zc0NvbmZpZyk7bGV0IG4sbyxhPVwiXCI7Y29uc3Qgcj1bXTtlLmZvckVhY2goKGU9Pntjb25zdCB0PU51bWJlcihlLnApLTE7Zm9yKGNvbnN0IHMgaW4gZSlcImFsaXl1blwiPT09cyYmKGE9ZVtzXSksXCJzM1wiPT09cyYmKG49ZVtzXSksXCJzdGNcIj09PXMmJihvPWVbc10pLFwicFwiIT09cyYmKHJbdF09W3MsZVtzXV0pfSkpLHIuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZSYmVXQucHVzaChlKX0pKSxlLmxlbmd0aCE9PVV0Lmxlbmd0aCYmKFV0PVtbXCJxaW5pdVwiLHQuZG9tYWluXSxbXCJiYWlkdVwiLHQudXBsb2FkSG9zdC5ib3NdLFtcImFsaXl1blwiLGFdLFtcInMzXCIsbl0sW1wic3RjXCIsb11dKX1lbHNlIFV0PVtbXCJxaW5pdVwiLHQuZG9tYWluXSxbXCJiYWlkdVwiLHQudXBsb2FkSG9zdC5ib3NdXTt2YXIgbztpZih0Lm9zc0NvbmZpZyl7dmFyIGE9dCYmSlNPTi5wYXJzZSh0Lm9zc0NvbmZpZyk7QXJyYXkuaXNBcnJheShhKXx8KGE9W10pLG89YS5maW5kKChlPT5PYmplY3Qua2V5cyhlKS5pbmNsdWRlcyhcInN0Y1wiKSkpfWlmKG8mJjE9PT1wYXJzZUludChvLnApJiZlLnNpemU+PTQxOTQzMDQpd3QoZSx0LG4pO2Vsc2V7dmFyIHI9dC5kYXRhKGUsdCk7TnRbVXRbMF1bMF1dKHIsdCxuLGUpfX0oZSx0aGlzLm9wdGlvbnMse29uUHJvZ3Jlc3M6ZnVuY3Rpb24oZSxuLG8pe2lmKFB0PWUsbyl7UHQ9THQrZS9uKihuLUx0KX1lbHNlIEx0PVB0O3Qub25Qcm9ncmVzcyhQdCxuKX0sb25Db21wbGV0ZWQ6ZnVuY3Rpb24oZSl7dC5vbkNvbXBsZXRlZChlKX0sb25FcnJvcjpmdW5jdGlvbihlKXt0Lm9uRXJyb3IoZSl9LG9uT3BlbjpmdW5jdGlvbihlKXtuLnhocj1lfX0pfWVsc2UgdC5vbkVycm9yKFwidXBsb2FkIGZpbGUgaXMgbnVsbC5cIil9LHRoaXMuY2FuY2VsPWZ1bmN0aW9uKCl7dGhpcy54aHImJnRoaXMueGhyLmFib3J0KCl9fXZhciBEdD17aW5pdDpmdW5jdGlvbihlKXtyZXR1cm4gbmV3IEd0KGUpfSxkYXRhVHlwZTpBdCxyZXNpemU6ZnVuY3Rpb24oZSx0LG4pe2UudHlwZTt2YXIgbz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLGE9bmV3IEZpbGVSZWFkZXI7YS5yZWFkQXNEYXRhVVJMKGUpLGEub25sb2FkPWZ1bmN0aW9uKGUpe3ZhciBhPWUudGFyZ2V0LnJlc3VsdCxyPW5ldyBJbWFnZTtyLnNyYz1hO3ZhciBzPXIud2lkdGgsaT1yLmhlaWdodCxjPWZ1bmN0aW9uKGUsdCl7dmFyIG49MSxvPWUud2lkdGgsYT10Lm1heFdpZHRofHwwO2E+MCYmbz5hJiYobj1hL28pO3ZhciByPWUuaGVpZ2h0LHM9dC5tYXhIZWlnaHR8fDA7aWYocz4wJiZyPnMpe3ZhciBpPXMvcjtuPU1hdGgubWluKG4saSl9dmFyIGM9dC5tYXhTaXplfHwwLGQ9TWF0aC5jZWlsKGUuc2l6ZS8xZTMpO2lmKGQ+Yyl7dmFyIHU9Yy9kO249TWF0aC5taW4obix1KX1yZXR1cm4gbn0oe3dpZHRoOnMsaGVpZ2h0Omksc2l6ZTplLnRvdGFsfSx0KSxkPWE7YzwxJiYoZD1mdW5jdGlvbihlLHQsbil7by53aWR0aD10LG8uaGVpZ2h0PW4sby5nZXRDb250ZXh0KFwiMmRcIikuZHJhd0ltYWdlKGUsMCwwLHQsbik7dmFyIGE9XCJpbWFnZS9qcGdcIjtyZXR1cm4gby50b0RhdGFVUkwoYSl9KHIscypjLGkqYykpLG4oZCl9fX07Y29uc3Qga3Q9ZnVuY3Rpb24oZSx0LG4pe3ZhciBvPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiksYT1vLmdldENvbnRleHQoXCIyZFwiKSxyPW5ldyBJbWFnZTtyLm9ubG9hZD1mdW5jdGlvbigpe3ZhciBzPWZ1bmN0aW9uKGUsdCxuKXt2YXIgbyxhLHIscz1lPHQsaT0wLGM9MDtyZXR1cm4ocz90L2U6ZS90KT5uLnNjYWxlPyhzPyhhPTEwMCxjPSgocj10LyhvPWUvMTAwKSktbi5tYXhIZWlnaHQpLzIpOihyPTEwMCxpPSgoYT1lLyhvPXQvMTAwKSktbi5tYXhXaWR0aCkvMikse3c6YSxoOnIseDotaSx5Oi1jfSk6KHM/KG89dC9uLm1heEhlaWdodCxyPW4ubWF4SGVpZ2h0LGE9ZS9vKToobz1lL24ubWF4V2lkdGgsYT1uLm1heFdpZHRoLHI9dC9vKSx7dzphLGg6cix4Oi1pLHk6LWN9KX0oci53aWR0aCxyLmhlaWdodCx0KTtvLndpZHRoPXMudz50Lm1heFdpZHRoP3QubWF4V2lkdGg6cy53LG8uaGVpZ2h0PXMuaD50Lm1heEhlaWdodD90Lm1heEhlaWdodDpzLmgsYS5kcmF3SW1hZ2UocixzLngscy55LHMudyxzLmgpO3RyeXt2YXIgaT1vLnRvRGF0YVVSTChlLnR5cGUsdC5xdWFsaXR5KSxjPW5ldyBSZWdFeHAoXCJeZGF0YTppbWFnZS9bXjtdKztiYXNlNjQsXCIpO2k9aS5yZXBsYWNlKGMsXCJcIiksbihpKX1jYXRjaChlKXt0aHJvdyBuZXcgRXJyb3IoZSl9fSxyLnNyYz1cInN0cmluZ1wiPT10eXBlb2YgZT9cImRhdGE6aW1hZ2UvanBnO2Jhc2U2NCxcIitlOmZ1bmN0aW9uKGUpe3ZhciB0PXdpbmRvdy5VUkx8fHdpbmRvdy53ZWJraXRVUkw7cmV0dXJuIHQ/dC5jcmVhdGVPYmplY3RVUkwoZSk6XCJcIn0oZSl9LEh0PWZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5maWxlLG89ZS5jb21wcmVzcztrdChuLG8sdCl9LEJ0PWZ1bmN0aW9uKGUsdCl7aWYoZS5nZXRUb2tlbillLmdldFRva2VuKChmdW5jdGlvbihuLG8pe289b3x8e30sZS5tdWx0aV9wYXJtYXN8fChlLm11bHRpX3Bhcm1hcz17fSksZS5tdWx0aV9wYXJtYXMudG9rZW49bixlLnVwbG9hZEhvc3R8fChlLnVwbG9hZEhvc3Q9e30pLGUudXBsb2FkSG9zdC5ib3M9by5ib3MsZS5vc3NDb25maWc9by5vc3NDb25maWcsZS5ib3NIZWFkZXJ8fChlLmJvc0hlYWRlcj17fSksZS5ib3NIZWFkZXIuYm9zRGF0ZT1vLmJvc0RhdGUsZS5ib3NIZWFkZXIuYm9zVG9rZW49by5ib3NUb2tlbixlLmJvc1VwbG9hZFBhdGg9by5wYXRoLGUuYWxpSGVhZGVyPXt9LGUuYWxpSGVhZGVyLm9zc2tleUlkPW8ub3Nza2V5SWQsZS5hbGlIZWFkZXIub3NzUG9saWN5PW8ub3NzUG9saWN5LGUuYWxpSGVhZGVyLm9zc1NpZ249by5vc3NTaWduLGUub3NzQnVja2V0TmFtZT1vLm9zc0J1Y2tldE5hbWUsZS51cGxvYWRGaWxlTmFtZT1vLmZpbGVOYW1lLGUuczNIZWFkZXI9e30sZS5zM0hlYWRlci5zM0NyZWRlbnRpYWw9by5zM0NyZWRlbnRpYWwsZS5zM0hlYWRlci5zM0FsZ29yaXRobT1vLnMzQWxnb3JpdGhtLGUuczNIZWFkZXIuczNEYXRlPW8uczNEYXRlLGUuczNIZWFkZXIuczNQb2xpY3k9by5zM1BvbGljeSxlLnMzSGVhZGVyLnMzU2lnbmF0dXJlPW8uczNTaWduYXR1cmUsZS5zM0J1Y2tldE5hbWU9by5zM0J1Y2tldE5hbWUsZS5zdGNIZWFkZXI9e30sZS5zdGNIZWFkZXIuc3RjQXV0aG9yaXphdGlvbj1vLnN0Y0F1dGhvcml6YXRpb24sZS5zdGNIZWFkZXIuc3RjQ29udGVudFNoYTI1Nj1vLnN0Y0NvbnRlbnRTaGEyNTYsZS5zdGNIZWFkZXIuc3RjRGF0ZT1vLnN0Y0RhdGUsZS5zdGNCdWNrZXROYW1lPW8uc3RjQnVja2V0TmFtZSxlLmhlYWRlcnN8fChlLmhlYWRlcnM9e30pLGUuYmFzZTY0JiYoZS5oZWFkZXJzW1wiQ29udGVudC10eXBlXCJdPVwiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtXCIsZS5oZWFkZXJzLkF1dGhvcml6YXRpb249XCJVcFRva2VuIFwiK24pLGNvbnNvbGUubG9nKFwiZGF0YVwiLG8pO3ZhciBhPUR0LmluaXQoZSk7dChhKX0pKTtlbHNle2UuaGVhZGVyc3x8KGUuaGVhZGVycz17fSksZS5iYXNlNjQmJihlLmhlYWRlcnNbXCJDb250ZW50LXR5cGVcIl09XCJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW1cIik7dmFyIG49RHQuaW5pdChlKTt0KG4pfX07dmFyIEZ0LHF0LFZ0PWZ1bmN0aW9uKGUsdCxuKXt0LnVwbG9hZChlLmZpbGUse29uRXJyb3I6ZnVuY3Rpb24oZSl7bi5vbkVycm9yKGUpfSxvblByb2dyZXNzOmZ1bmN0aW9uKGUsdCl7bi5vblByb2dyZXNzKGUsdCl9LG9uQ29tcGxldGVkOmZ1bmN0aW9uKHQpe3QuZmlsZW5hbWV8fCh0LmZpbGVuYW1lPXQuaGFzaCk7dmFyIG89ZS5jb21wcmVzc1RodW1ibmFpbHx8SHQ7ZS5jb21wcmVzcz9vKGUsKGZ1bmN0aW9uKGUpe3QudGh1bWJuYWlsPWUsbi5vbkNvbXBsZXRlZCh0KX0pKTpuLm9uQ29tcGxldGVkKHQpfX0pfSx6dD1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3RoaXMuaW5zdGFuY2U9ZSx0aGlzLnVwbG9hZD1mdW5jdGlvbihlLG4pe1Z0KHtmaWxlOmV9LHQuaW5zdGFuY2Usbil9LHRoaXMuY2FuY2VsPWZ1bmN0aW9uKCl7dC5pbnN0YW5jZS5jYW5jZWwoKX19LEt0PWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpczt0aGlzLmNmZz10LHRoaXMuaW5zdGFuY2U9ZSx0aGlzLnVwbG9hZD1mdW5jdGlvbihlLHQpe3ZhciBvPXtmaWxlOmUsY29tcHJlc3M6bi5jZmd9O1Z0KG8sbi5pbnN0YW5jZSx0KX0sdGhpcy5jYW5jZWw9ZnVuY3Rpb24oKXtuLmluc3RhbmNlLmNhbmNlbCgpfX0sWHQ9ZnVuY3Rpb24oZSx0KXtCdChlLChmdW5jdGlvbihuKXt2YXIgbz17bWF4SGVpZ2h0OmUubWF4SGVpZ2h0fHwxNjAsbWF4V2lkdGg6ZS5tYXhXaWR0aHx8MTYwLHF1YWxpdHk6ZS5xdWFsaXR5fHwuNSxzY2FsZTplLnNjYWxlfHwyLjR9LGE9bmV3IEt0KG4sbyk7dChhKX0pKX0sanQ9ZnVuY3Rpb24oZSx0KXtCdChlLChmdW5jdGlvbihlKXt2YXIgbj1uZXcgenQoZSk7dChuKX0pKX0sSnQ9WHQ7RHQuZGF0YVR5cGU7ZnVuY3Rpb24gV3QoZSl7cmV0dXJuIEZ0PUZ0fHxuZXcgQXVkaW9Db250ZXh0LG5ldyBQcm9taXNlKChmdW5jdGlvbih0LG4pe0Z0LmRlY29kZUF1ZGlvRGF0YShlLChmdW5jdGlvbihlKXt0KHtkdXJhdGlvbjplLmR1cmF0aW9uLGxlbmd0aDplLmxlbmd0aH0pfSksbil9KSl9ZnVuY3Rpb24gWXQoZSx0LG4sbyl7cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbihhKXt0ZS5pbUNsaWVudC5jb250ZXh0LmdldEZpbGVUb2tlbihlLHQsbixvKS50aGVuKChmdW5jdGlvbihlKXthKHtjb2RlOl9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1MsZGF0YTplfSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe2Eoe2NvZGU6ZSxtc2c6b2VbZV19KX0pKX0pKX1mdW5jdGlvbiBRdChlLHQsbixvLGEpe3JldHVybiAoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJmaWxlVHlwZVwiLGUsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5pc1ZhbGlkRmlsZVR5cGUsITApLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcImZpbGVuYW1lXCIsdCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLlNUUklORyksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwic2F2ZU5hbWVcIixuLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuU1RSSU5HKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJzZXJ2ZXJUeXBlXCIsYSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLk5VTUJFUiksbmV3IFByb21pc2UoKGZ1bmN0aW9uKHMpe3RlLmltQ2xpZW50LmNvbnRleHQuZ2V0RmlsZVVybChlLHQsbixvLGEpLnRoZW4oKGZ1bmN0aW9uKGUpe3Moe2NvZGU6X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUyxkYXRhOmV9KX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7cyh7Y29kZTplfSl9KSl9KSl9ZnVuY3Rpb24gJHQoZSx0LG4pe3JldHVybiBOKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbyxhLGQsdSxsLGcsZixtLGgsdjtyZXR1cm4gVSh0aGlzLChmdW5jdGlvbihJKXtzd2l0Y2goSS5sYWJlbCl7Y2FzZSAwOnJldHVybiBuPW58fHt9LHQgaW5zdGFuY2VvZiB1dD09ITE/KE8ud2FybihcInNlbmQgbWVzc2FnZSBmYWlsIC0+IG1lc3NhZ2UgcGFyYW1ldGVyIGlzIG5vdCBhbiBpbnN0YW5jZSBvZiBCYXNlTWVzc2FnZVwiKSxbMixuZS5JTExHQUxfUEFSQU1TXSk6KCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcImNvbnZlcnNhdGlvbi5jaGFubmVsSWRcIixudWxsPT1lP3ZvaWQgMDplLmNoYW5uZWxJZCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLkNIQU5ORUxfSUQpLG89ZS5jb252ZXJzYXRpb25UeXBlLGE9ZS50YXJnZXRJZCxkPWUuY2hhbm5lbElkLHU9XCJjb252ZXJzYXRpb25UeXBlOlwiK28rXCIsdGFyZ2V0SWQ6XCIrYSxPLmRlYnVnKFwic2VuZCBtZXNzYWdlICAtPlwiK3UpLChsPU9iamVjdC5hc3NpZ24obix0KSkuY2hhbm5lbElkPWR8fFwiXCIsWzQsdGUuaW1DbGllbnQuY29udGV4dC5zZW5kTWVzc2FnZShvLGEsbCldKTtjYXNlIDE6cmV0dXJuIGc9SS5zZW50KCksZj1nLmNvZGUsbT1nLmRhdGEsZj09PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1M/KGg9WihtKSxbMix7Y29kZTpmLGRhdGE6aH1dKTooTy53YXJuKFwic2VuZCBtZXNzYWdlIGZhaWwgLT5cIitmK1wiOlwiK29lW2ZdK1wiLFwiK3UpLHY9e2lzTWVudGlvbmVkOiEhbi5pc01lbnRpb25lZCxjb250ZW50OnQuY29udGVudCxtZXNzYWdlVHlwZTp0Lm1lc3NhZ2VUeXBlLGlzUGVyc2l0ZWQ6dC5pc1BlcnNpdGVkfHwhMSxpc0NvdW50ZWQ6dC5pc0NvdW50ZWR8fCExLGRpc2FibGVOb3RpZmljYXRpb246ISEobnVsbD09bj92b2lkIDA6bi5kaXNhYmxlTm90aWZpY2F0aW9uKSxjYW5JbmNsdWRlRXhwYW5zaW9uOiEhKG51bGw9PW4/dm9pZCAwOm4uY2FuSW5jbHVkZUV4cGFuc2lvbiksZXhwYW5zaW9uOihudWxsPT1uP3ZvaWQgMDpuLmV4cGFuc2lvbil8fG51bGwsY29udmVyc2F0aW9uVHlwZTplLmNvbnZlcnNhdGlvblR5cGUsdGFyZ2V0SWQ6ZS50YXJnZXRJZCxjaGFubmVsSWQ6ZS5jaGFubmVsSWQsc2VuZGVyVXNlcklkOnRlLmltQ2xpZW50LmNvbnRleHQuZ2V0Q3VycmVudFVzZXJJZCgpLG1lc3NhZ2VVSWQ6XCJcIixtZXNzYWdlRGlyZWN0aW9uOl9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uTWVzc2FnZURpcmVjdGlvbi5TRU5ELHNlbnRUaW1lOihudWxsPT1tP3ZvaWQgMDptLnNlbnRUaW1lKXx8MCxyZWNlaXZlZFRpbWU6MCxpc1N0YXR1c01lc3NhZ2U6bi5pc1N0YXR1c01lc3NhZ2V8fCExLHJlY2VpdmVkU3RhdHVzOl9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uUmVjZWl2ZWRTdGF0dXMuVU5SRUFELGlzT2ZmTGluZU1lc3NhZ2U6ITF9LG8hPT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkNvbnZlcnNhdGlvblR5cGUuVUxUUkFfR1JPVVAmJih2LmlzT2ZmTGluZU1lc3NhZ2U9ITEpLFsyLHtjb2RlOmYsbXNnOm9lW2ZdLGRhdGE6Wih2KX1dKX19KSl9KSl9ZnVuY3Rpb24gWnQoZSx0LG4pe3JldHVybiAkdChlLG5ldyB2dCh0KSxuKX1mdW5jdGlvbiBlbihlLHQpe3JldHVybiBmdW5jdGlvbihuLG8sYSxzKXtyZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKGkpe3ZhciBjOyFmdW5jdGlvbihlLHQsbixvKXt2YXIgYSxyPXRoaXM7aWYodm9pZCAwPT09dCYmKHQ9X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5GaWxlVHlwZS5GSUxFKSxhPXQ9PT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkZpbGVUeXBlLklNQUdFP19yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRmlsZVR5cGUuSU1BR0U6X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5GaWxlVHlwZS5GSUxFLCFxdCl7cXQ9XCJ1cGxvYWQucWluaXVwLmNvbVwiO3ZhciBzPXRlLmltQ2xpZW50LmNvbnRleHQuZ2V0SW5mb0Zyb21DYWNoZSgpO2lmKHMmJnMub3NzQ29uZmlnKXRyeXt2YXIgaT1KU09OLnBhcnNlKHMub3NzQ29uZmlnKS5maW5kKChmdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwIT09ZS5xaW5pdX0pKTtpJiYocXQ9aS5xaW5pdSl9Y2F0Y2goZSl7fX12YXIgYz1SKHtkb21haW46cXQsZ2V0VG9rZW46ZnVuY3Rpb24oZSl7dGUuaW1DbGllbnQuY29udGV4dC5nZXRGaWxlVG9rZW4oYSkudGhlbigoZnVuY3Rpb24odCl7ZSh0LnRva2VuLHQpfSkpLmNhdGNoKChmdW5jdGlvbihlKXtuLm9uRmFpbChlKX0pKX19LG8pOyhhPT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5GaWxlVHlwZS5JTUFHRT9KdDpqdCkoYywoZnVuY3Rpb24obyl7by51cGxvYWQoZSx7b25Qcm9ncmVzczpmdW5jdGlvbihlLHQpe3ZhciBvLGE9TWF0aC5mbG9vcihlL3QqMTAwKTtudWxsPT09KG89bi5vblByb2dyZXNzKXx8dm9pZCAwPT09b3x8by5jYWxsKG4sYSl9LG9uQ29tcGxldGVkOmZ1bmN0aW9uKG8pe3JldHVybiBOKHIsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgcj10aGlzO3JldHVybiBVKHRoaXMsKGZ1bmN0aW9uKHMpe3JldHVybiBRdChhLG8uZmlsZW5hbWUsby5uYW1lLG8sby51cGxvYWRNZXRob2QpLnRoZW4oKGZ1bmN0aW9uKHMpe3JldHVybiBOKHIsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgcixpO3JldHVybiBVKHRoaXMsKGZ1bmN0aW9uKGMpe3JldHVybiAwIT09cy5jb2RlPyhuLm9uRmFpbChzKSxbMl0pOigocj1zLmRhdGEpLnR5cGU9ZS50eXBlLHIubmFtZT1vLm5hbWV8fG8uZmlsZW5hbWUsdD09PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRmlsZVR5cGUuQVVESU8/KFwiZnVuY3Rpb25cIj09dHlwZW9mIGUuYXJyYXlCdWZmZXI/ZS5hcnJheUJ1ZmZlcigpLnRoZW4oV3QpLnRoZW4oKGZ1bmN0aW9uKGUpe09iamVjdC5hc3NpZ24ocixlKSxuLm9uU3VjY2VzcyhyKX0pLChmdW5jdGlvbigpe24ub25TdWNjZXNzKHIpfSkpOigoaT1uZXcgRmlsZVJlYWRlcikub25sb2FkPWZ1bmN0aW9uKCl7aS5yZXN1bHQ/V3QoaS5yZXN1bHQpLnRoZW4oKGZ1bmN0aW9uKGUpe09iamVjdC5hc3NpZ24ocixlKSxuLm9uU3VjY2VzcyhyKX0pLChmdW5jdGlvbigpe24ub25TdWNjZXNzKHIpfSkpOm4ub25TdWNjZXNzKHIpfSxpLm9uZXJyb3I9ZnVuY3Rpb24oKXtyLmR1cmF0aW9uPTAsbi5vblN1Y2Nlc3Mocil9LGkucmVhZEFzQXJyYXlCdWZmZXIoZSkpLFsyXSk6KGE9PT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkZpbGVUeXBlLklNQUdFJiYoci50aHVtYm5haWw9by50aHVtYm5haWwpLG4ub25TdWNjZXNzKHIpLFsyXSkpfSkpfSkpfSkpLmNhdGNoKChmdW5jdGlvbihlKXtuLm9uRmFpbChlKX0pKSxbMl19KSl9KSl9LG9uRXJyb3I6ZnVuY3Rpb24oZSl7bi5vbkZhaWwoZSl9fSl9KSl9KG8uZmlsZSxlLHtvblByb2dyZXNzOm51bGw9PWE/dm9pZCAwOmEub25Qcm9ncmVzcyxvblN1Y2Nlc3M6ZnVuY3Rpb24oZSl7dmFyIHIsYz0obnVsbD09PShyPW51bGw9PWE/dm9pZCAwOmEub25Db21wbGV0ZSl8fHZvaWQgMD09PXI/dm9pZCAwOnIuY2FsbChhLHt1cmw6ZS5kb3dubG9hZFVybH0pKXx8dChlLG8pOyR0KG4sYyxzKS50aGVuKGkpfSxvbkZhaWw6ZnVuY3Rpb24oZSl7aSh7Y29kZTpfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5VUExPQURfRklMRV9GQUlMRUQsbXNnOmV8fF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlW19yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlVQTE9BRF9GSUxFX0ZBSUxFRF19KX19LChudWxsPT09KGM9cyl8fHZvaWQgMD09PWM/dm9pZCAwOmMudGh1bWJuYWlsQ29uZmlnKXx8e30pfSkpfX12YXIgdG49ZW4oX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5GaWxlVHlwZS5GSUxFLChmdW5jdGlvbihlLHQpe3JldHVybiBuZXcgU3Qoe25hbWU6ZS5uYW1lLHNpemU6dC5maWxlLnNpemUsdHlwZTp0LmZpbGUudHlwZSxmaWxlVXJsOmUuZG93bmxvYWRVcmwsdXNlcjp0LnVzZXIsZXh0cmE6dC5leHRyYX0pfSkpLG5uPWVuKF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRmlsZVR5cGUuSU1BR0UsKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyBtdCh7Y29udGVudDplLnRodW1ibmFpbCxpbWFnZVVyaTplLmRvd25sb2FkVXJsLHVzZXI6dC51c2VyLGV4dHJhOnQuZXh0cmF9KX0pKSxvbj1lbihfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkZpbGVUeXBlLkFVRElPLChmdW5jdGlvbihlLHQpe3JldHVybiBuZXcgcHQoe3JlbW90ZVVybDplLmRvd25sb2FkVXJsLGR1cmF0aW9uOmUuZHVyYXRpb24sdHlwZTplLnR5cGUsdXNlcjp0LnVzZXIsZXh0cmE6dC5leHRyYX0pfSkpLGFuPWVuKF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRmlsZVR5cGUuU0lHSFQsKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyBodCh7c2lnaHRVcmw6ZS5kb3dubG9hZFVybCxjb250ZW50OnQudGh1bWJuYWlsLGR1cmF0aW9uOnQuZHVyYXRpb24sc2l6ZTp0LmZpbGUuc2l6ZXx8ZS5zaXplLG5hbWU6dC5uYW1lfHxlLm5hbWUsdXNlcjp0LnVzZXIsZXh0cmE6dC5leHRyYX0pfSkpO2Z1bmN0aW9uIHJuKGUsdCl7cmV0dXJuIE4odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBuLG8sYSxzLGk7cmV0dXJuIFUodGhpcywoZnVuY3Rpb24oZCl7c3dpdGNoKGQubGFiZWwpe2Nhc2UgMDpyZXR1cm4gKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwib3B0aW9ucy50aW1lc3RhbXBcIixudWxsPT10P3ZvaWQgMDp0LnRpbWVzdGFtcCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLk5VTUJFUiksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwib3B0aW9ucy5jb3VudFwiLG51bGw9PXQ/dm9pZCAwOnQuY291bnQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5OVU1CRVIpLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm9wdGlvbnMub3JkZXJcIixudWxsPT10P3ZvaWQgMDp0Lm9yZGVyLChmdW5jdGlvbihlKXtyZXR1cm4gMD09PWV8fDE9PT1lfSkpLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcImNvbnZlcnNhdGlvbi5jaGFubmVsSWRcIixudWxsPT1lP3ZvaWQgMDplLmNoYW5uZWxJZCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLkNIQU5ORUxfSUQpLG49XCJjb252ZXJzYXRpb25UeXBlOlwiK2UuY29udmVyc2F0aW9uVHlwZStcIix0YXJnZXRJZDpcIitlLnRhcmdldElkLE8uZGVidWcoXCJnZXQgaGlzdG9yeSBtZXNzYWdlIC0+XCIrbiksWzQsdGUuaW1DbGllbnQuY29udGV4dC5nZXRIaXN0b3J5TWVzc2FnZShlLmNvbnZlcnNhdGlvblR5cGUsZS50YXJnZXRJZCxudWxsPT10P3ZvaWQgMDp0LnRpbWVzdGFtcCxudWxsPT10P3ZvaWQgMDp0LmNvdW50LG51bGw9PXQ/dm9pZCAwOnQub3JkZXIsbnVsbD09ZT92b2lkIDA6ZS5jaGFubmVsSWQpXTtjYXNlIDE6cmV0dXJuIG89ZC5zZW50KCksYT1vLmNvZGUscz1vLmRhdGEsYT09PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1MmJnM/KGk9cy5saXN0Lm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIFooZSl9KSksWzIse2NvZGU6YSxkYXRhOntsaXN0OmksaGFzTW9yZTpzLmhhc01vcmV9fV0pOihPLndhcm4oXCJnZXQgaGlzdG9yeSBtZXNzYWdlIGZhaWwgLT5cIithK1wiOlwiK29lW2FdK1wiLFwiK24pLFsyLHtjb2RlOmEsbXNnOm9lW2FdfV0pfX0pKX0pKX1mdW5jdGlvbiBzbihlLHQpe3JldHVybiBOKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbixvLGEscyxpO3JldHVybiBVKHRoaXMsKGZ1bmN0aW9uKGQpe3N3aXRjaChkLmxhYmVsKXtjYXNlIDA6cmV0dXJuICgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm9wdGlvbnMudGltZXN0YW1wXCIsbnVsbD09dD92b2lkIDA6dC50aW1lc3RhbXAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5OVU1CRVIpLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm9wdGlvbnMuY291bnRcIixudWxsPT10P3ZvaWQgMDp0LmNvdW50LF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuTlVNQkVSKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJvcHRpb25zLm9yZGVyXCIsbnVsbD09dD92b2lkIDA6dC5vcmRlciwoZnVuY3Rpb24oZSl7cmV0dXJuIDA9PT1lfHwxPT09ZX0pKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJjb252ZXJzYXRpb24uY2hhbm5lbElkXCIsbnVsbD09ZT92b2lkIDA6ZS5jaGFubmVsSWQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5DSEFOTkVMX0lEKSxuPVwiY29udmVyc2F0aW9uVHlwZTpcIitlLmNvbnZlcnNhdGlvblR5cGUrXCIsdGFyZ2V0SWQ6XCIrZS50YXJnZXRJZCxPLmRlYnVnKFwiZ2V0IGhpc3RvcnkgbWVzc2FnZSAtPlwiK24pLFs0LHRlLmltQ2xpZW50LmNvbnRleHQuZ2V0UmVtb3RlSGlzdG9yeU1lc3NhZ2VzKGUuY29udmVyc2F0aW9uVHlwZSxlLnRhcmdldElkLChudWxsPT10P3ZvaWQgMDp0LnRpbWVzdGFtcCl8fDAsKG51bGw9PXQ/dm9pZCAwOnQuY291bnQpfHwyMCwobnVsbD09dD92b2lkIDA6dC5vcmRlcil8fDAsZS5jaGFubmVsSWR8fFwiXCIpXTtjYXNlIDE6cmV0dXJuIG89ZC5zZW50KCksYT1vLmNvZGUscz1vLmRhdGEsYT09PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1MmJnM/KGk9cy5saXN0Lm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIFooZSl9KSksWzIse2NvZGU6YSxkYXRhOntsaXN0OmksaGFzTW9yZTpzLmhhc01vcmV9fV0pOihPLndhcm4oXCJnZXQgaGlzdG9yeSBtZXNzYWdlIGZhaWwgLT5cIithK1wiOlwiK29lW2FdK1wiLFwiK24pLFsyLHtjb2RlOmEsbXNnOm9lW2FdfV0pfX0pKX0pKX1mdW5jdGlvbiBjbihlLHQsbixvKXtyZXR1cm4gTih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIGEscixpLGMsZDtyZXR1cm4gVSh0aGlzLChmdW5jdGlvbih1KXtzd2l0Y2godS5sYWJlbCl7Y2FzZSAwOnJldHVybiBhPXt0YXJnZXRJZDplLGNvbnZlcnNhdGlvblR5cGU6X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Db252ZXJzYXRpb25UeXBlLlBSSVZBVEUsY2hhbm5lbElkOm99LHI9bmV3IHV0KFwiUkM6UmVhZE50ZlwiLHttZXNzYWdlVUlkOnQsbGFzdE1lc3NhZ2VTZW5kVGltZTpuLHR5cGU6MX0pLFs0LCR0KGEscildO2Nhc2UgMTpyZXR1cm4gaT11LnNlbnQoKSxjPWkuY29kZSxkPWkubXNnLDA9PT1jP1syLHtjb2RlOmN9XTpbMix7Y29kZTpjLG1zZzpkfV19fSkpfSkpfWZ1bmN0aW9uIGRuKGUsdCxuKXtyZXR1cm4gTih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG8sYSxyLGksZDtyZXR1cm4gVSh0aGlzLChmdW5jdGlvbih1KXtzd2l0Y2godS5sYWJlbCl7Y2FzZSAwOnJldHVybiAoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJtZXNzYWdlVUlkXCIsdCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLlNUUklORywhMCksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwiY2hhbm5lbElkXCIsbixfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLkNIQU5ORUxfSUQpLG89XCJtZXNzYWdlVUlkOlwiK3QrXCIsdGFyZ2V0SWQ6XCIrZSxPLmRlYnVnKFwic2VuZCByZWFkIHJlY2VpcHQgbWVzc2FnZSAtPlwiK28pLGE9bmV3IHV0KFwiUkM6UlJSZXFNc2dcIix7bWVzc2FnZVVJZDp0fSksWzQsJHQoe3RhcmdldElkOmUsY29udmVyc2F0aW9uVHlwZTpfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkNvbnZlcnNhdGlvblR5cGUuR1JPVVAsY2hhbm5lbElkOm59LGEpXTtjYXNlIDE6cmV0dXJuIHI9dS5zZW50KCksaT1yLmNvZGUsZD1yLm1zZywwPT09aT9bMix7Y29kZTppfV06WzIse2NvZGU6aSxtc2c6ZH1dfX0pKX0pKX1mdW5jdGlvbiB1bihlLHQsbil7cmV0dXJuIE4odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiBVKHRoaXMsKGZ1bmN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcihcIlRoaXMgbWV0aG9kIGlzIGRlcHJlY2F0ZWQsIHBsZWFzZSB1c2UgbWV0aG9kIHNlbmRSZWFkUmVjZWlwdFJlc3BvbnNlVjIuXCIpfSkpfSkpfWZ1bmN0aW9uIGxuKGUsdCxuKXtyZXR1cm4gTih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG8sYSxpLGQsdSxsLGc7cmV0dXJuIFUodGhpcywoZnVuY3Rpb24oZil7c3dpdGNoKGYubGFiZWwpe2Nhc2UgMDpyZXR1cm4gKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwidGFyZ2V0SWRcIixlLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuU1RSSU5HLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJtZXNzYWdlTGlzdFwiLHQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5PQkpFQ1QsITApLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcImNoYW5uZWxJZFwiLG4sX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5DSEFOTkVMX0lEKSxPYmplY3Qua2V5cyh0KS5mb3JFYWNoKChmdW5jdGlvbihlKXsoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoZSx0W2VdLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuQVJSQVkpfSkpLG89e3RhcmdldElkOmUsY29udmVyc2F0aW9uVHlwZTpfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkNvbnZlcnNhdGlvblR5cGUuR1JPVVAsY2hhbm5lbElkOm59LGk9dGUuaW1DbGllbnQuY29udGV4dC5nZXRJbmZvRnJvbUNhY2hlKCksMCE9PShkPShudWxsPT1pP3ZvaWQgMDppLmdycFJSVmVyKXx8MCk/WzMsMl06KHU9bmV3IHV0KFwiUkM6UlJSc3BNc2dcIix7cmVjZWlwdE1lc3NhZ2VEaWM6dH0pLFs0LCR0KG8sdSldKTtjYXNlIDE6cmV0dXJuIGE9Zi5zZW50KCksWzMsNF07Y2FzZSAyOnJldHVybiAxIT09ZD9bMyw0XToobD1bXSxPYmplY3Qua2V5cyh0KS5mb3JFYWNoKChmdW5jdGlvbihlKXt0W2VdLmZvckVhY2goKGZ1bmN0aW9uKGUpey0xPT09bC5pbmRleE9mKGUpJiZsLnB1c2goZSl9KSl9KSksbC5sZW5ndGg/WzQsdGUuaW1DbGllbnQuY29udGV4dC5zZW5kUmVhZFJlY2VpcHRNZXNzYWdlKGUsbCxuKV06KE8ud2FybihcIkVycm9yIGluIHBhcmFtZXRlciBtZXNzYWdlTGlzdC5cIiksWzIse2NvZGU6X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuUEFSQU1FVEVSX0VSUk9SfV0pKTtjYXNlIDM6YT1mLnNlbnQoKSxmLmxhYmVsPTQ7Y2FzZSA0OnJldHVybihnPWEuY29kZSk9PT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTP1syLHtjb2RlOmd9XTooTy53YXJuKFwic2VuZCByZWFkIHJlY2VpcHQgbWVzc2FnZSBmYWlsIC0+XCIrZytcIjpcIitvZVtnXSksWzIse2NvZGU6Zyxtc2c6b2VbZ119XSl9fSkpfSkpfWZ1bmN0aW9uIGduKGUsdCl7cmV0dXJuIE4odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBuLG8sYSxyO3JldHVybiBVKHRoaXMsKGZ1bmN0aW9uKHMpe3N3aXRjaChzLmxhYmVsKXtjYXNlIDA6cmV0dXJuICgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcImNvbnZlcnNhdGlvbi50eXBlXCIsZS5jb252ZXJzYXRpb25UeXBlLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuTlVNQkVSLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJjb252ZXJzYXRpb24udGFyZ2V0SWRcIixlLnRhcmdldElkLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuU1RSSU5HLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJsYXN0TWVzc2FnZVNlbmRUaW1lXCIsdCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLk5VTUJFUiwhMCksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwiY29udmVyc2F0aW9uLmNoYW5uZWxJZFwiLG51bGw9PWU/dm9pZCAwOmUuY2hhbm5lbElkLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuQ0hBTk5FTF9JRCksbj1uZXcgdXQoXCJSQzpTUlNNc2dcIix7bGFzdE1lc3NhZ2VTZW5kVGltZTp0fSksWzQsJHQoZSxuKV07Y2FzZSAxOnJldHVybiBvPXMuc2VudCgpLGE9by5jb2RlLHI9by5tc2csMD09PWE/WzIse2NvZGU6YX1dOlsyLHtjb2RlOmEsbXNnOnJ9XX19KSl9KSl9ZnVuY3Rpb24gZm4oZSx0KXtyZXR1cm4gTih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG4sbyxhLHMsaTtyZXR1cm4gVSh0aGlzLChmdW5jdGlvbihkKXtzd2l0Y2goZC5sYWJlbCl7Y2FzZSAwOnJldHVybiAoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJvcHRpb25zLm1lc3NhZ2VVSWRcIix0Lm1lc3NhZ2VVSWQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5TVFJJTkcsITApLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm9wdGlvbnMuc2VudFRpbWVcIix0LnNlbnRUaW1lLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuTlVNQkVSLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJvcHRpb25zLmRpc2FibGVOb3RpZmljYXRpb25cIixudWxsPT10P3ZvaWQgMDp0LmRpc2FibGVOb3RpZmljYXRpb24sX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5CT09MRUFOKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJvcHRpb25zLnB1c2hDb25maWdcIixudWxsPT10P3ZvaWQgMDp0LnB1c2hDb25maWcsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5PQkpFQ1QpLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcImNvbnZlcnNhdGlvbi5jaGFubmVsSWRcIixudWxsPT1lP3ZvaWQgMDplLmNoYW5uZWxJZCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLkNIQU5ORUxfSUQpLG49e3VzZXI6dC51c2VyLGNoYW5uZWxJZDplLmNoYW5uZWxJZHx8XCJcIixkaXNhYmxlTm90aWZpY2F0aW9uOm51bGw9PXQ/dm9pZCAwOnQuZGlzYWJsZU5vdGlmaWNhdGlvbixwdXNoQ29uZmlnOm51bGw9PXQ/dm9pZCAwOnQucHVzaENvbmZpZ30sbz1cImNvbnZlcnNhdGlvblR5cGU6XCIrZS5jb252ZXJzYXRpb25UeXBlK1wiLHRhcmdldElkOlwiK2UudGFyZ2V0SWQrXCIsbWVzc2FnZVVJZDpcIit0Lm1lc3NhZ2VVSWQsTy5kZWJ1ZyhcInJlY2FsbCBtZXNzYWdlIC0+XCIrbyksWzQsdGUuaW1DbGllbnQuY29udGV4dC5yZWNhbGxNZXNzYWdlKGUuY29udmVyc2F0aW9uVHlwZSxlLnRhcmdldElkLHQubWVzc2FnZVVJZCx0LnNlbnRUaW1lLG4pXTtjYXNlIDE6cmV0dXJuIGE9ZC5zZW50KCkscz1hLmNvZGUsaT1hLmRhdGEscz09PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1MmJmk/WzIse2NvZGU6cyxkYXRhOlooaSl9XTpzPT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUz9bMix7Y29kZTpzfV06KE8ud2FybihcInJlY2FsbCBtZXNzYWdlIGZhaWwgLT5cIitzK1wiOlwiK29lW3NdK1wiLFwiK28pLFsyLHtjb2RlOnMsbXNnOm9lW3NdfV0pfX0pKX0pKX1mdW5jdGlvbiBtbihlLHQpe3JldHVybiBOKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbixvO3JldHVybiBVKHRoaXMsKGZ1bmN0aW9uKGEpe3N3aXRjaChhLmxhYmVsKXtjYXNlIDA6cmV0dXJuICgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm9wdGlvbnNcIix0LChmdW5jdGlvbihlKXtyZXR1cm4gKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5pc0FycmF5KShlKSYmZS5sZW5ndGh9KSwhMCksdC5mb3JFYWNoKChmdW5jdGlvbihlKXsoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJvcHRpb25zLm1lc3NhZ2VVSWRcIixlLm1lc3NhZ2VVSWQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5TVFJJTkcsITApLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm9wdGlvbnMuc2VudFRpbWVcIixlLnNlbnRUaW1lLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuTlVNQkVSLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJvcHRpb25zLm1lc3NhZ2VEaXJlY3Rpb25cIixlLm1lc3NhZ2VEaXJlY3Rpb24sKGZ1bmN0aW9uKGUpe3JldHVybiAxPT09ZXx8Mj09PWV9KSwhMCl9KSksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwiY29udmVyc2F0aW9uLmNoYW5uZWxJZFwiLG51bGw9PWU/dm9pZCAwOmUuY2hhbm5lbElkLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuQ0hBTk5FTF9JRCksbj1cImNvbnZlcnNhdGlvblR5cGU6XCIrZS5jb252ZXJzYXRpb25UeXBlK1wiLHRhcmdldElkOlwiK2UudGFyZ2V0SWQsTy5kZWJ1ZyhcImRlbGV0ZSBtZXNzYWdlcyAtPlwiK24pLFs0LHRlLmltQ2xpZW50LmNvbnRleHQuZGVsZXRlUmVtb3RlTWVzc2FnZShlLmNvbnZlcnNhdGlvblR5cGUsZS50YXJnZXRJZCx0LGUuY2hhbm5lbElkKV07Y2FzZSAxOnJldHVybihvPWEuc2VudCgpKSE9PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1M/KE8ud2FybihcImRlbGV0ZSBtZXNzYWdlIGZhaWwgLT5cIitvK1wiOlwiK29lW29dK1wiLFwiK24pLFsyLHtjb2RlOm8sbXNnOm9lW29dfV0pOlsyLHtjb2RlOl9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1N9XX19KSl9KSl9ZnVuY3Rpb24gcG4oZSx0KXtyZXR1cm4gTih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG4sbztyZXR1cm4gVSh0aGlzLChmdW5jdGlvbihhKXtzd2l0Y2goYS5sYWJlbCl7Y2FzZSAwOnJldHVybiAoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJvcHRpb25zLnRpbWVzdGFtcFwiLHQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5OVU1CRVIsITApLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcImNvbnZlcnNhdGlvbi5jaGFubmVsSWRcIixudWxsPT1lP3ZvaWQgMDplLmNoYW5uZWxJZCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLkNIQU5ORUxfSUQpLG49XCJjb252ZXJzYXRpb25UeXBlOlwiK2UuY29udmVyc2F0aW9uVHlwZStcIix0YXJnZXRJZDpcIitlLnRhcmdldElkLE8uZGVidWcoXCJjbGVhciBtZXNzYWdlIC0+XCIrbiksWzQsdGUuaW1DbGllbnQuY29udGV4dC5kZWxldGVSZW1vdGVNZXNzYWdlQnlUaW1lc3RhbXAoZS5jb252ZXJzYXRpb25UeXBlLGUudGFyZ2V0SWQsdCxlLmNoYW5uZWxJZCldO2Nhc2UgMTpyZXR1cm4obz1hLnNlbnQoKSkhPT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTPyhPLndhcm4oXCJjbGVhciBtZXNzYWdlIC0+XCIrbytcIjpcIitvZVtvXStcIixcIituKSxbMix7Y29kZTpvLG1zZzpvZVtvXX1dKTpbMix7Y29kZTpfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTfV19fSkpfSkpfWZ1bmN0aW9uIGhuKGUsdCl7cmV0dXJuIE4odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBuLG8sYSxzLGksZCx1LGw7cmV0dXJuIFUodGhpcywoZnVuY3Rpb24oZyl7c3dpdGNoKGcubGFiZWwpe2Nhc2UgMDpyZXR1cm4gKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwiZXhwYW5zaW9uXCIsZSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLk9CSkVDVCwhMCksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwibWVzc2FnZVwiLHQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5PQkpFQ1QsITApLG49dC5jb252ZXJzYXRpb25UeXBlLG89dC50YXJnZXRJZCxhPXQubWVzc2FnZVVJZCxzPXQuY2FuSW5jbHVkZUV4cGFuc2lvbixpPXQuZXhwYW5zaW9uLGQ9dC5jaGFubmVsSWQsdT1cImNvbnZlcnNhdGlvblR5cGU6XCIrbitcIix0YXJnZXRJZDpcIitvK1wiLG1lc3NhZ2VVSWQ6XCIrYSxPLmRlYnVnKFwidXBkYXRlIG1lc3NhZ2UgZXhwYW5zaW9uIC0+XCIrdSksWzQsdGUuaW1DbGllbnQuY29udGV4dC5zZW5kRXhwYW5zaW9uTWVzc2FnZSh7Y29udmVyc2F0aW9uVHlwZTpuLHRhcmdldElkOm8sbWVzc2FnZVVJZDphLGV4cGFuc2lvbjplLGNhbkluY2x1ZGVFeHBhbnNpb246cyxvcmlnaW5FeHBhbnNpb246aSxjaGFubmVsSWQ6ZH0pXTtjYXNlIDE6cmV0dXJuKGw9Zy5zZW50KCkuY29kZSkhPT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTPyhPLndhcm4oXCJ1cGRhdGUgbWVzc2FnZSBleHBhbnNpb24gZmFpbCAtPlwiK2wrXCI6XCIrb2VbbF0rXCIsXCIrdSksWzIse2NvZGU6bCxtc2c6b2VbbF19XSk6WzIse2NvZGU6bH1dfX0pKX0pKX1mdW5jdGlvbiB2bihlLHQpe3JldHVybiBOKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbixvLGEscyxpLGQsdTtyZXR1cm4gVSh0aGlzLChmdW5jdGlvbihsKXtzd2l0Y2gobC5sYWJlbCl7Y2FzZSAwOnJldHVybiAoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJrZXlzXCIsZSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLkFSUkFZLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJtZXNzYWdlXCIsdCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLk9CSkVDVCwhMCksbj10LmNvbnZlcnNhdGlvblR5cGUsbz10LnRhcmdldElkLGE9dC5tZXNzYWdlVUlkLHM9dC5jYW5JbmNsdWRlRXhwYW5zaW9uLGk9dC5jaGFubmVsSWQsZD1cImNvbnZlcnNhdGlvblR5cGU6XCIrbitcIix0YXJnZXRJZDpcIitvK1wiLG1lc3NhZ2VVSWQ6XCIrYSxPLmRlYnVnKFwicmVtb3ZlIG1lc3NhZ2UgZXhwYW5zaW9uIC0+XCIrZCksWzQsdGUuaW1DbGllbnQuY29udGV4dC5zZW5kRXhwYW5zaW9uTWVzc2FnZSh7Y29udmVyc2F0aW9uVHlwZTpuLHRhcmdldElkOm8sbWVzc2FnZVVJZDphLGNhbkluY2x1ZGVFeHBhbnNpb246cyxrZXlzOmUsY2hhbm5lbElkOml9KV07Y2FzZSAxOnJldHVybih1PWwuc2VudCgpLmNvZGUpIT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUz8oTy53YXJuKFwicmVtb3ZlIG1lc3NhZ2UgZXhwYW5zaW9uIGZhaWwgLT5cIit1K1wiOlwiK29lW3VdK1wiLFwiK2QpLFsyLHtjb2RlOnUsbXNnOm9lW3VdfV0pOlsyLHtjb2RlOnV9XX19KSl9KSl9ZnVuY3Rpb24gSW4oZSx0KXtyZXR1cm4gTih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG4sbyxhLHMsaTtyZXR1cm4gVSh0aGlzLChmdW5jdGlvbihkKXtzd2l0Y2goZC5sYWJlbCl7Y2FzZSAwOnJldHVybiAoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJ0eXBpbmdDb250ZW50VHlwZVwiLHQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5TVFJJTkcsITApLG49XCJjb252ZXJzYXRpb25UeXBlOlwiK2UuY29udmVyc2F0aW9uVHlwZStcIix0YXJnZXRJZDpcIitlLnRhcmdldElkLE8uZGVidWcoXCJzZW5kIHR5cGluZyBzdGF0dXMgbWVzc2FnZSAtPlwiK24pLG89e21lc3NhZ2VUeXBlOlwiUkM6VHlwU3RzXCIsY29udGVudDp7dHlwaW5nQ29udGVudFR5cGU6dH0saXNTdGF0dXNNZXNzYWdlOiEwLGNoYW5uZWxJZDplLmNoYW5uZWxJZH0sWzQsdGUuaW1DbGllbnQuY29udGV4dC5zZW5kTWVzc2FnZShlLmNvbnZlcnNhdGlvblR5cGUsZS50YXJnZXRJZCxvKV07Y2FzZSAxOnJldHVybiBhPWQuc2VudCgpLHM9YS5jb2RlLGk9YS5kYXRhLHM9PT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTP1syLHtjb2RlOnMsZGF0YTpaKGkpfV06KE8ud2FybihcInNlbmQgdHlwaW5nIHN0YXR1cyBtZXNzYWdlIGZhaWwgLT5cIitzK1wiOlwiK29lW3NdK1wiLFwiK24pLFsyLHtjb2RlOnMsbXNnOm9lW3NdfV0pfX0pKX0pKX1mdW5jdGlvbiBTbihlLHQsbil7cmV0dXJuIE4odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBvLGEscyxpO3JldHVybiBVKHRoaXMsKGZ1bmN0aW9uKGQpe3N3aXRjaChkLmxhYmVsKXtjYXNlIDA6cmV0dXJuICgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm1lc3NhZ2VVSWRcIix0LF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuU1RSSU5HLCEwKSxvPVwibWVzc2FnZVVJZDpcIit0K1wiLHRhcmdldElkOlwiK2UsTy5kZWJ1ZyhcImdldCBtZXNzYWdlIHJlYWRlciAtPlwiK28pLFs0LHRlLmltQ2xpZW50LmNvbnRleHQuZ2V0TWVzc2FnZVJlYWRlcihlLHQsbildO2Nhc2UgMTpyZXR1cm4gYT1kLnNlbnQoKSxzPWEuY29kZSxpPWEuZGF0YSxzPT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUz9bMix7Y29kZTpzLGRhdGE6aX1dOihPLndhcm4oXCJnZXQgbWVzc2FnZSByZWFkZXIgZmFpbCAtPlwiK3MrXCI6XCIrb2Vbc10rXCIsXCIrbyksWzIse2NvZGU6cyxtc2c6b2Vbc119XSl9fSkpfSkpfWZ1bmN0aW9uIENuKGUsdCxuLG8sYSl7cmV0dXJuICgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm1lc3NhZ2VUeXBlXCIsZSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLlNUUklORywhMCksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwiaXNQZXJzaXRlZFwiLHQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5CT09MRUFOLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJpc0NvdW50ZWRcIixuLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuQk9PTEVBTiwhMCksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwiaXNTdGF0dXNNZXNzYWdlXCIsYSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLkJPT0xFQU4sITEpLHRlLmltQ2xpZW50LmNvbnRleHQucmVnaXN0ZXJNZXNzYWdlVHlwZShlLHQsbixvLGEpLGx0KGUsdCxuKX1mdW5jdGlvbiBUbihlKXtyZXR1cm4gTih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHQsbixvO3JldHVybiBVKHRoaXMsKGZ1bmN0aW9uKGEpe3N3aXRjaChhLmxhYmVsKXtjYXNlIDA6cmV0dXJuICgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18udXNpbmdDcHBFbmdpbmUpKCk/KCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcImNvbnZlcnNhdGlvbi5jb252ZXJzYXRpb25UeXBlXCIsZS5jb252ZXJzYXRpb25UeXBlLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuTlVNQkVSLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJjb252ZXJzYXRpb24udGFyZ2V0SWRcIixlLnRhcmdldElkLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuU1RSSU5HLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJjb252ZXJzYXRpb24uY2hhbm5lbElkXCIsbnVsbD09ZT92b2lkIDA6ZS5jaGFubmVsSWQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5DSEFOTkVMX0lEKSxbNCx0ZS5pbUNsaWVudC5jb250ZXh0LmdldEZpcnN0VW5yZWFkTWVzc2FnZShlLmNvbnZlcnNhdGlvblR5cGUsZS50YXJnZXRJZCxlLmNoYW5uZWxJZCldKTpbMix7Y29kZTpfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5OT1RfU1VQUE9SVCxtc2c6b2VbX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuTk9UX1NVUFBPUlRdfV07Y2FzZSAxOnJldHVybiB0PWEuc2VudCgpLG49dC5jb2RlLG89dC5kYXRhLG49PT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTP1syLHtjb2RlOm4sZGF0YTpvfV06KE8ud2FybihcImluc2VydE1lc3NhZ2UgLT5jb2RlOlwiK24rXCIsdGFyZ2V0SWQ6XCIrZS50YXJnZXRJZCksWzIse2NvZGU6bixtc2c6b2Vbbl19XSl9fSkpfSkpfWZ1bmN0aW9uIEVuKGUsdCxuKXtyZXR1cm4gdm9pZCAwPT09biYmKG49e30pLE4odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBvLGEscyxpLGMsZCx1LGwsZyxmLG0scCxoLHYsSSxTO3JldHVybiBVKHRoaXMsKGZ1bmN0aW9uKEMpe3N3aXRjaChDLmxhYmVsKXtjYXNlIDA6cmV0dXJuICgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18udXNpbmdDcHBFbmdpbmUpKCk/KG89dC5zZW5kZXJVc2VySWQsYT10Lm1lc3NhZ2VUeXBlLHM9dC5jb250ZW50LGk9dC5tZXNzYWdlRGlyZWN0aW9uLGM9dC5tZXNzYWdlVUlkLGQ9dC5jYW5JbmNsdWRlRXhwYW5zaW9uLHU9dC5leHBhbnNpb24sbD10LmRpc2FibGVOb3RpZmljYXRpb24sZz10LnNlbnRUaW1lLGY9dC5zZW50U3RhdHVzLE8uaW5mbyhcImluc2VydE1lc3NhZ2UgLT50YXJnZXRJZDpcIitlLnRhcmdldElkK1wiLGNvbnZlcnNhdGlvblR5cGU6XCIrZS5jb252ZXJzYXRpb25UeXBlKSxtPW4uaXNVbnJlYWQscD1uLnNlYXJjaENvbnRlbnQsaD17c2VuZGVyVXNlcklkOm8sbWVzc2FnZVR5cGU6YSxjb250ZW50OnMsbWVzc2FnZURpcmVjdGlvbjppLHNlbnRUaW1lOmcsc2VudFN0YXR1czpmLHNlYXJjaENvbnRlbnQ6cCxpc1VucmVhZDptLG1lc3NhZ2VVSWQ6YyxkaXNhYmxlTm90aWZpY2F0aW9uOmwsY2FuSW5jbHVkZUV4cGFuc2lvbjpkLGV4cGFuc2lvbk1zZzpKU09OLnN0cmluZ2lmeSh1KSxjaGFubmVsSWQ6ZS5jaGFubmVsSWR8fFwiXCJ9LFs0LHRlLmltQ2xpZW50LmNvbnRleHQuaW5zZXJ0TWVzc2FnZShlLmNvbnZlcnNhdGlvblR5cGUsZS50YXJnZXRJZCxoKV0pOlsyLHtjb2RlOl9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLk5PVF9TVVBQT1JULG1zZzpvZVtfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5OT1RfU1VQUE9SVF19XTtjYXNlIDE6cmV0dXJuIHY9Qy5zZW50KCksST12LmNvZGUsUz12LmRhdGEsST09PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1M/WzIse2NvZGU6SSxkYXRhOlooUyl9XTooTy53YXJuKFwiaW5zZXJ0TWVzc2FnZSAtPmNvZGU6XCIrSStcIix0YXJnZXRJZDpcIitlLnRhcmdldElkKSxbMix7Y29kZTpJLG1zZzpvZVtJXX1dKX19KSl9KSl9ZnVuY3Rpb24geW4oZSl7cmV0dXJuIE4odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciB0LG4sbztyZXR1cm4gVSh0aGlzLChmdW5jdGlvbihhKXtzd2l0Y2goYS5sYWJlbCl7Y2FzZSAwOnJldHVybiAoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLnVzaW5nQ3BwRW5naW5lKSgpP1s0LHRlLmltQ2xpZW50LmNvbnRleHQuZ2V0TWVzc2FnZShlKV06WzIse2NvZGU6X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuTk9UX1NVUFBPUlQsbXNnOm9lW19yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLk5PVF9TVVBQT1JUXX1dO2Nhc2UgMTpyZXR1cm4gdD1hLnNlbnQoKSxuPXQuY29kZSxvPXQuZGF0YSxuPT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUz9bMix7Y29kZTpuLGRhdGE6WihvKX1dOihPLndhcm4oXCJnZXRNZXNzYWdlIC0+Y29kZTpcIituK1wiLG1lc3NhZ2VJZDpcIitlKSxbMix7Y29kZTpuLG1zZzpvZVtuXX1dKX19KSl9KSl9ZnVuY3Rpb24gUm4oZSl7aWYoISgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18udXNpbmdDcHBFbmdpbmUpKCkpcmV0dXJue2NvZGU6X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuTk9UX1NVUFBPUlQsbXNnOm9lW19yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLk5PVF9TVVBQT1JUXX07KDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwiY29udmVyc2F0aW9uVHlwZVwiLGUuY29udmVyc2F0aW9uVHlwZSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLk5VTUJFUiwhMCksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwidGFyZ2V0SWRcIixlLnRhcmdldElkLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuU1RSSU5HLCEwKTt2YXIgdD10ZS5pbUNsaWVudC5jb250ZXh0LmdldFVucmVhZE1lbnRpb25lZE1lc3NhZ2VzKGUuY29udmVyc2F0aW9uVHlwZSxlLnRhcmdldElkKSxuPVtdO3JldHVybiB0JiZ0Lmxlbmd0aCYmdC5mb3JFYWNoKChmdW5jdGlvbihlKXtyZXR1cm4gbi5wdXNoKFooZSkpfSkpLHtjb2RlOl9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1MsZGF0YTpufX1mdW5jdGlvbiBObihlLHQsbixvKXtyZXR1cm4gTih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIGEscyxpLGQ7cmV0dXJuIFUodGhpcywoZnVuY3Rpb24odSl7c3dpdGNoKHUubGFiZWwpe2Nhc2UgMDpyZXR1cm4gKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy51c2luZ0NwcEVuZ2luZSkoKT8oKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwiY29udmVyc2F0aW9uVHlwZVwiLGUuY29udmVyc2F0aW9uVHlwZSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLk5VTUJFUiwhMCksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwidGFyZ2V0SWRcIixlLnRhcmdldElkLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuU1RSSU5HLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJrZXl3b3JkXCIsdCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLlNUUklORywhMCksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwidGltZXN0YW1wXCIsbixfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLk5VTUJFUiksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwiY291bnRcIixvLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuTlVNQkVSKSwxLFs0LHRlLmltQ2xpZW50LmNvbnRleHQuc2VhcmNoTWVzc2FnZUJ5Q29udGVudChlLmNvbnZlcnNhdGlvblR5cGUsZS50YXJnZXRJZCx0LG4sbywxLGUuY2hhbm5lbElkKV0pOlsyLHtjb2RlOl9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLk5PVF9TVVBQT1JULG1zZzpvZVtfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5OT1RfU1VQUE9SVF19XTtjYXNlIDE6cmV0dXJuIGE9dS5zZW50KCkscz1hLmNvZGUsaT1hLmRhdGEscz09PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1M/KGQ9W10sKG51bGw9PWk/dm9pZCAwOmkubWVzc2FnZXMpJiZpLm1lc3NhZ2VzLmxlbmd0aCYmaS5tZXNzYWdlcy5mb3JFYWNoKChmdW5jdGlvbihlKXtyZXR1cm4gZC5wdXNoKFooZSkpfSkpLFsyLHtjb2RlOnMsZGF0YTp7bWVzc2FnZXM6ZCxjb3VudDpudWxsPT1pP3ZvaWQgMDppLmNvdW50fX1dKTooTy53YXJuKFwic2VhcmNoTWVzc2FnZXMgLT5jb2RlOlwiK3MrXCIsdGFyZ2V0SWQ6XCIrZS50YXJnZXRJZCksWzIse2NvZGU6cyxtc2c6b2Vbc119XSl9fSkpfSkpfWZ1bmN0aW9uIFVuKGUsdCxuKXtyZXR1cm4gTih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG87cmV0dXJuIFUodGhpcywoZnVuY3Rpb24oYSl7c3dpdGNoKGEubGFiZWwpe2Nhc2UgMDpyZXR1cm4gKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy51c2luZ0NwcEVuZ2luZSkoKT8oKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwiY29udmVyc2F0aW9uVHlwZVwiLGUuY29udmVyc2F0aW9uVHlwZSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLk5VTUJFUiwhMCksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwidGFyZ2V0SWRcIixlLnRhcmdldElkLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuU1RSSU5HLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJ0aW1lc3RhbXBcIix0LF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuTlVNQkVSLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJjbGVhblNwYWNlXCIsbixfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLkJPT0xFQU4pLFs0LHRlLmltQ2xpZW50LmNvbnRleHQuZGVsZXRlTWVzc2FnZXNCeVRpbWVzdGFtcChlLmNvbnZlcnNhdGlvblR5cGUsZS50YXJnZXRJZCx0LG4sZS5jaGFubmVsSWQpXSk6WzIse2NvZGU6X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuTk9UX1NVUFBPUlQsbXNnOm9lW19yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLk5PVF9TVVBQT1JUXX1dO2Nhc2UgMTpyZXR1cm4obz1hLnNlbnQoKSk9PT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTP1syLHtjb2RlOm99XTooTy53YXJuKFwiZGVsZXRlTG9jYWxNZXNzYWdlc0J5VGltZXN0YW1wIC0+Y29kZTpcIitvK1wiLHRhcmdldElkOlwiK2UudGFyZ2V0SWQpLFsyLHtjb2RlOm8sbXNnOm9lW29dfV0pfX0pKX0pKX1mdW5jdGlvbiBPbihlKXtyZXR1cm4gTih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHQ7cmV0dXJuIFUodGhpcywoZnVuY3Rpb24obil7c3dpdGNoKG4ubGFiZWwpe2Nhc2UgMDpyZXR1cm4gKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy51c2luZ0NwcEVuZ2luZSkoKT8oTy5pbmZvKFwiY2xlYXJNZXNzYWdlcyAtPnRhcmdldElkOlwiK2UudGFyZ2V0SWQrXCIsY29udmVyc2F0aW9uVHlwZTpcIitlLmNvbnZlcnNhdGlvblR5cGUpLFs0LHRlLmltQ2xpZW50LmNvbnRleHQuY2xlYXJNZXNzYWdlcyhlLmNvbnZlcnNhdGlvblR5cGUsZS50YXJnZXRJZCxlLmNoYW5uZWxJZCldKTpbMix7Y29kZTpfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5OT1RfU1VQUE9SVCxtc2c6b2VbX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuTk9UX1NVUFBPUlRdfV07Y2FzZSAxOnJldHVybih0PW4uc2VudCgpKT09PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1M/WzIse2NvZGU6dH1dOihPLndhcm4oXCJjbGVhck1lc3NhZ2VzIC0+Y29kZTpcIit0K1wiLHRhcmdldElkOlwiK2UudGFyZ2V0SWQpLFsyLHtjb2RlOnQsbXNnOm9lW3RdfV0pfX0pKX0pKX1mdW5jdGlvbiBNbihlLHQsbixvKXtyZXR1cm4gTih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIGEscyxpO3JldHVybiBVKHRoaXMsKGZ1bmN0aW9uKGMpe3N3aXRjaChjLmxhYmVsKXtjYXNlIDA6cmV0dXJuICgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18udXNpbmdDcHBFbmdpbmUpKCk/KE8uaW5mbyhcInNlYXJjaENvbnZlcnNhdGlvbkJ5Q29udGVudCAtPmtleXdvcmQ6XCIrZSksWzQsdGUuaW1DbGllbnQuY29udGV4dC5zZWFyY2hDb252ZXJzYXRpb25CeUNvbnRlbnQoZSxuLG8sdCldKTpbMix7Y29kZTpfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5OT1RfU1VQUE9SVCxtc2c6b2VbX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuTk9UX1NVUFBPUlRdfV07Y2FzZSAxOnJldHVybiBhPWMuc2VudCgpLHM9YS5jb2RlLGk9YS5kYXRhLHM9PT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTP1syLHtjb2RlOnMsZGF0YTppfV06KE8ud2FybihcInNlYXJjaENvbnZlcnNhdGlvbkJ5Q29udGVudCAtPmNvZGU6XCIrcytcIixrZXl3b3JkOlwiK2UpLFsyLHtjb2RlOnMsbXNnOm9lW3NdfV0pfX0pKX0pKX1mdW5jdGlvbiBfbihlLHQpe3JldHVybiBOKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbjtyZXR1cm4gVSh0aGlzLChmdW5jdGlvbihvKXtzd2l0Y2goby5sYWJlbCl7Y2FzZSAwOnJldHVybiAoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLnVzaW5nQ3BwRW5naW5lKSgpPyhPLmluZm8oXCJjbGVhclVucmVhZENvdW50QnlUaW1lc3RhbXAgLT50YXJnZXRJZDpcIitlLnRhcmdldElkK1wiLGNvbnZlcnNhdGlvblR5cGU6XCIrZS5jb252ZXJzYXRpb25UeXBlKSxbNCx0ZS5pbUNsaWVudC5jb250ZXh0LmNsZWFyVW5yZWFkQ291bnRCeVRpbWVzdGFtcChlLmNvbnZlcnNhdGlvblR5cGUsZS50YXJnZXRJZCx0LGUuY2hhbm5lbElkKV0pOlsyLHtjb2RlOl9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLk5PVF9TVVBQT1JULG1zZzpvZVtfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5OT1RfU1VQUE9SVF19XTtjYXNlIDE6cmV0dXJuKG49by5zZW50KCkpPT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUz9bMix7Y29kZTpufV06KE8ud2FybihcImNsZWFyVW5yZWFkQ291bnRCeVRpbWVzdGFtcCAtPmNvZGU6XCIrbitcIix0YXJnZXRJZDpcIitlLnRhcmdldElkKSxbMix7Y29kZTpuLG1zZzpvZVtuXX1dKX19KSl9KSl9ZnVuY3Rpb24gd24oZSx0KXtyZXR1cm4gTih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG47cmV0dXJuIFUodGhpcywoZnVuY3Rpb24obyl7c3dpdGNoKG8ubGFiZWwpe2Nhc2UgMDpyZXR1cm4gKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy51c2luZ0NwcEVuZ2luZSkoKT8oKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwibWVzc2FnZUlkXCIsZSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLk5VTUJFUiwhMCksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwicmVjZWl2ZWRTdGF0dXNcIix0LF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuTlVNQkVSLCEwKSxPLmluZm8oXCJzZXRNZXNzYWdlUmVjZWl2ZWRTdGF0dXMgLT5tZXNzYWdlSWQ6XCIrZStcIixyZWNlaXZlZFN0YXR1czpcIit0KSxbNCx0ZS5pbUNsaWVudC5jb250ZXh0LnNldE1lc3NhZ2VSZWNlaXZlZFN0YXR1cyhlLHQpXSk6WzIse2NvZGU6X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuTk9UX1NVUFBPUlQsbXNnOm9lW19yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLk5PVF9TVVBQT1JUXX1dO2Nhc2UgMTpyZXR1cm4obj1vLnNlbnQoKSk9PT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTP1syLHtjb2RlOm59XTooTy53YXJuKFwic2V0TWVzc2FnZVJlY2VpdmVkU3RhdHVzIC0+Y29kZTpcIituK1wiLG1lc3NhZ2VJZDpcIitlKSxbMix7Y29kZTpuLG1zZzpvZVtuXX1dKX19KSl9KSl9ZnVuY3Rpb24gQW4oZSl7cmV0dXJuIE4odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciB0O3JldHVybiBVKHRoaXMsKGZ1bmN0aW9uKG4pe3N3aXRjaChuLmxhYmVsKXtjYXNlIDA6cmV0dXJuICgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcInRhZy50YWdJZFwiLGUudGFnSWQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5TVFJJTkcsITApLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcInRhZy50YWdJZFwiLGUudGFnSWQsKGZ1bmN0aW9uKGUpe3JldHVybiBlLmxlbmd0aDw9MTB9KSksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwidGFnLnRhZ05hbWVcIixlLnRhZ05hbWUsKGZ1bmN0aW9uKGUpe3JldHVybiBlLmxlbmd0aDw9MTV9KSksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwidGFnLnRhZ05hbWVcIixlLnRhZ05hbWUsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5TVFJJTkcsITApLE8uaW5mbyhcImNyZWF0ZVRhZyAtPnRhZ0lkOlwiK2UudGFnSWQrXCIsdGFnTmFtZTpcIitlLnRhZ05hbWUpLFs0LHRlLmltQ2xpZW50LmNvbnRleHQuY3JlYXRlVGFnKGUpXTtjYXNlIDE6cmV0dXJuKHQ9bi5zZW50KCkuY29kZSk9PT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTP1syLHtjb2RlOnR9XTooTy53YXJuKFwiY3JlYXRlVGFnIC0+Y29kZTpcIit0K1wiLHRhZ0lkOlwiK2UudGFnSWQpLFsyLHtjb2RlOnQsbXNnOm9lW3RdfV0pfX0pKX0pKX1mdW5jdGlvbiB4bihlKXtyZXR1cm4gTih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHQ7cmV0dXJuIFUodGhpcywoZnVuY3Rpb24obil7c3dpdGNoKG4ubGFiZWwpe2Nhc2UgMDpyZXR1cm4gKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwidGFnSWRcIixlLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuU1RSSU5HLCEwKSxPLmluZm8oXCJyZW1vdmVUYWcgLT50YWdJZDpcIitlKSxbNCx0ZS5pbUNsaWVudC5jb250ZXh0LnJlbW92ZVRhZyhlKV07Y2FzZSAxOnJldHVybih0PW4uc2VudCgpLmNvZGUpPT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUz9bMix7Y29kZTp0fV06KE8ud2FybihcInJlbW92ZVRhZyAtPmNvZGU6XCIrdCtcIix0YWdJZDpcIitlKSxbMix7Y29kZTp0LG1zZzpvZVt0XX1dKX19KSl9KSl9ZnVuY3Rpb24gYm4oZSl7cmV0dXJuIE4odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciB0O3JldHVybiBVKHRoaXMsKGZ1bmN0aW9uKG4pe3N3aXRjaChuLmxhYmVsKXtjYXNlIDA6cmV0dXJuICgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcInRhZy50YWdJZFwiLGUudGFnSWQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5TVFJJTkcsITApLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcInRhZy50YWdOYW1lXCIsZS50YWdOYW1lLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuU1RSSU5HLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJ0YWcudGFnTmFtZVwiLGUudGFnTmFtZSwoZnVuY3Rpb24oZSl7cmV0dXJuIGUubGVuZ3RoPD0xNX0pKSxPLmluZm8oXCJ1cGRhdGVUYWcgLT50YWdJZDpcIitlLnRhZ0lkK1wiLHRhZ05hbWU6XCIrZS50YWdOYW1lKSxbNCx0ZS5pbUNsaWVudC5jb250ZXh0LnVwZGF0ZVRhZyhlKV07Y2FzZSAxOnJldHVybih0PW4uc2VudCgpLmNvZGUpPT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUz9bMix7Y29kZTp0fV06KE8ud2FybihcInVwZGF0ZVRhZyAtPmNvZGU6XCIrdCtcIix0YWdJZDpcIitlLnRhZ0lkKSxbMix7Y29kZTp0LG1zZzpvZVt0XX1dKX19KSl9KSl9ZnVuY3Rpb24gUG4oKXtyZXR1cm4gTih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIGUsdCxuO3JldHVybiBVKHRoaXMsKGZ1bmN0aW9uKG8pe3N3aXRjaChvLmxhYmVsKXtjYXNlIDA6cmV0dXJuWzQsdGUuaW1DbGllbnQuY29udGV4dC5nZXRUYWdMaXN0KCldO2Nhc2UgMTpyZXR1cm4gZT1vLnNlbnQoKSx0PWUuY29kZSxuPWUuZGF0YSx0PT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUz9bMix7Y29kZTpfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTLGRhdGE6bn1dOihPLndhcm4oXCJnZXRUYWdMaXN0IC0+Y29kZTpcIit0KSxbMix7Y29kZTp0LG1zZzpvZVt0XX1dKX19KSl9KSl9ZnVuY3Rpb24gTG4oZSl7cmV0dXJuIE4odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciB0LG4sbztyZXR1cm4gVSh0aGlzLChmdW5jdGlvbihhKXtzd2l0Y2goYS5sYWJlbCl7Y2FzZSAwOnJldHVybiAoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJjb252ZXJzYXRpb25UeXBlXCIsZS5jb252ZXJzYXRpb25UeXBlLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuTlVNQkVSKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJ0YXJnZXRJZFwiLGUudGFyZ2V0SWQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5TVFJJTkcpLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcImNoYW5uZWxJZFwiLGUuY2hhbm5lbElkLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuQ0hBTk5FTF9JRCksTy5pbmZvKFwiZ2V0VGFnc0ZvckNvbnZlcnNhdGlvbiAtPnRhcmdldElkOlwiK2UudGFyZ2V0SWQrXCIsY29udmVyc2F0aW9uVHlwZTpcIitlLmNvbnZlcnNhdGlvblR5cGUpLFs0LHRlLmltQ2xpZW50LmNvbnRleHQuZ2V0VGFnc0ZvckNvbnZlcnNhdGlvbihlKV07Y2FzZSAxOnJldHVybiB0PWEuc2VudCgpLG49dC5jb2RlLG89dC5kYXRhLG49PT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTP1syLHtjb2RlOm4sZGF0YTpvfV06WzIse2NvZGU6bixtc2c6b2Vbbl19XX19KSl9KSl9ZnVuY3Rpb24gR24oZSx0KXtyZXR1cm4gTih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG47cmV0dXJuIFUodGhpcywoZnVuY3Rpb24obyl7c3dpdGNoKG8ubGFiZWwpe2Nhc2UgMDpyZXR1cm4gKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwidGFnSWRcIixlLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuU1RSSU5HLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJjb252ZXJzYXRpb25zXCIsdCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLkFSUkFZLCEwKSx0LmZvckVhY2goKGZ1bmN0aW9uKGUpeygwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcImNvbnZlcnNhdGlvbi5jb252ZXJzYXRpb25UeXBlXCIsZS5jb252ZXJzYXRpb25UeXBlLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuTlVNQkVSLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJjb252ZXJzYXRpb24udGFyZ2V0SWRcIixlLnRhcmdldElkLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuU1RSSU5HLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJjb252ZXJzYXRpb24uY2hhbm5lbElkXCIsZS5jaGFubmVsSWQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5DSEFOTkVMX0lEKX0pKSxPLmluZm8oXCJhZGRUYWdGb3JDb252ZXJzYXRpb25zIC0+dGFnSWQ6XCIrZSksWzQsdGUuaW1DbGllbnQuY29udGV4dC5hZGRUYWdGb3JDb252ZXJzYXRpb25zKGUsdCldO2Nhc2UgMTpyZXR1cm4obj1vLnNlbnQoKS5jb2RlKT09PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1M/WzIse2NvZGU6bn1dOihPLndhcm4oXCJhZGRUYWdGb3JDb252ZXJzYXRpb25zIC0+Y29kZTpcIituK1wiLHRhZ0lkOlwiK2UpLFsyLHtjb2RlOm4sbXNnOm9lW25dfV0pfX0pKX0pKX1mdW5jdGlvbiBEbihlLHQpe3JldHVybiBOKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbjtyZXR1cm4gVSh0aGlzLChmdW5jdGlvbihvKXtzd2l0Y2goby5sYWJlbCl7Y2FzZSAwOnJldHVybiAoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJ0YWdJZFwiLGUsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5TVFJJTkcsITApLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcImNvbnZlcnNhdGlvbnNcIix0LF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuQVJSQVksITApLHQuZm9yRWFjaCgoZnVuY3Rpb24oZSl7KDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwiY29udmVyc2F0aW9uLmNvbnZlcnNhdGlvblR5cGVcIixlLmNvbnZlcnNhdGlvblR5cGUsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5OVU1CRVIsITApLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcImNvbnZlcnNhdGlvbi50YXJnZXRJZFwiLGUudGFyZ2V0SWQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5TVFJJTkcsITApLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcImNvbnZlcnNhdGlvbi5jaGFubmVsSWRcIixlLmNoYW5uZWxJZCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLkNIQU5ORUxfSUQpfSkpLE8uaW5mbyhcInJlbW92ZVRhZ0ZvckNvbnZlcnNhdGlvbnMgLT50YWdJZDpcIitlKSxbNCx0ZS5pbUNsaWVudC5jb250ZXh0LnJlbW92ZVRhZ0ZvckNvbnZlcnNhdGlvbnMoZSx0KV07Y2FzZSAxOnJldHVybihuPW8uc2VudCgpLmNvZGUpPT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUz9bMix7Y29kZTpufV06KE8ud2FybihcInJlbW92ZVRhZ0ZvckNvbnZlcnNhdGlvbnMgLT5jb2RlOlwiK24rXCIsdGFnSWQ6XCIrZSksWzIse2NvZGU6bixtc2c6b2Vbbl19XSl9fSkpfSkpfWZ1bmN0aW9uIGtuKGUsdCl7cmV0dXJuIE4odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBuO3JldHVybiBVKHRoaXMsKGZ1bmN0aW9uKG8pe3N3aXRjaChvLmxhYmVsKXtjYXNlIDA6cmV0dXJuICgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcImNvbnZlcnNhdGlvbi5jb252ZXJzYXRpb25UeXBlXCIsZS5jb252ZXJzYXRpb25UeXBlLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuTlVNQkVSLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJjb252ZXJzYXRpb24udGFyZ2V0SWRcIixlLnRhcmdldElkLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuU1RSSU5HLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJjb252ZXJzYXRpb24uY2hhbm5lbElkXCIsZS5jaGFubmVsSWQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5DSEFOTkVMX0lEKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJ0YWdJZHNcIix0LF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuQVJSQVksITApLHQuZm9yRWFjaCgoZnVuY3Rpb24oZSl7KDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwidGFnSWRcIixlLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuU1RSSU5HLCEwKX0pKSxPLmluZm8oXCJyZW1vdmVUYWdzRm9yQ29udmVyc2F0aW9uIC0+dGFnSWRzOlwiK3QrXCIsdGFyZ2V0SWQ6XCIrZS50YXJnZXRJZCtcIixjb252ZXJzYXRpb25UeXBlOlwiK2UuY29udmVyc2F0aW9uVHlwZSksWzQsdGUuaW1DbGllbnQuY29udGV4dC5yZW1vdmVUYWdzRm9yQ29udmVyc2F0aW9uKGUsdCldO2Nhc2UgMTpyZXR1cm4obj1vLnNlbnQoKS5jb2RlKT09PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1M/WzIse2NvZGU6bn1dOihPLndhcm4oXCJyZW1vdmVUYWdzRm9yQ29udmVyc2F0aW9uIC0+Y29kZTpcIituK1wiLHRhZ0lkczpcIit0KSxbMix7Y29kZTpuLG1zZzpvZVtuXX1dKX19KSl9KSl9ZnVuY3Rpb24gSG4oZSx0KXtyZXR1cm4gTih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG47cmV0dXJuIFUodGhpcywoZnVuY3Rpb24obyl7c3dpdGNoKG8ubGFiZWwpe2Nhc2UgMDpyZXR1cm4gKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwidGFnSWRcIixlLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuU1RSSU5HLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJjb252ZXJzYXRpb25zXCIsdCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLkFSUkFZLCEwKSx0LmZvckVhY2goKGZ1bmN0aW9uKGUpeygwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcImNvbnZlcnNhdGlvbi5jb252ZXJzYXRpb25UeXBlXCIsZS5jb252ZXJzYXRpb25UeXBlLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuTlVNQkVSLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJjb252ZXJzYXRpb24udGFyZ2V0SWRcIixlLnRhcmdldElkLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuU1RSSU5HLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJjb252ZXJzYXRpb24uY2hhbm5lbElkXCIsZS5jaGFubmVsSWQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5DSEFOTkVMX0lEKX0pKSxPLmluZm8oXCJyZW1vdmVUYWdGb3JDb252ZXJzYXRpb25zIC0+dGFnSWQ6XCIrZSksWzQsdGUuaW1DbGllbnQuY29udGV4dC5yZW1vdmVUYWdGb3JDb252ZXJzYXRpb25zKGUsdCldO2Nhc2UgMTpyZXR1cm4obj1vLnNlbnQoKS5jb2RlKT09PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1M/WzIse2NvZGU6bn1dOihPLndhcm4oXCJyZW1vdmVUYWdGb3JDb252ZXJzYXRpb25zIC0+Y29kZTpcIituK1wiLHRhZ0lkOlwiK2UpLFsyLHtjb2RlOm4sbXNnOm9lW25dfV0pfX0pKX0pKX1mdW5jdGlvbiBCbihlLHQsbil7cmV0dXJuIE4odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBvLGEscztyZXR1cm4gVSh0aGlzLChmdW5jdGlvbihpKXtzd2l0Y2goaS5sYWJlbCl7Y2FzZSAwOnJldHVybiAoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJ0YWdJZFwiLGUsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5TVFJJTkcsITApLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcImNvdW50XCIsdCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLk5VTUJFUiwhMCksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwic3RhcnRUaW1lXCIsbixfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLk5VTUJFUiwhMCksTy5pbmZvKFwiZ2V0Q29udmVyc2F0aW9uTGlzdEJ5VGFnIC0+dGFnSWQ6XCIrZSksWzQsdGUuaW1DbGllbnQuY29udGV4dC5nZXRDb252ZXJzYXRpb25MaXN0QnlUYWcoZSxuLHQpXTtjYXNlIDE6cmV0dXJuIG89aS5zZW50KCksYT1vLmNvZGUscz1vLmRhdGEsYT09PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1M/WzIse2NvZGU6YSxkYXRhOnN9XTooTy53YXJuKFwiZ2V0Q29udmVyc2F0aW9uTGlzdEJ5VGFnIC0+Y29kZTpcIithK1wiLHRhZ0lkOlwiK2UpLFsyLHtjb2RlOmEsbXNnOm9lW2FdfV0pfX0pKX0pKX1mdW5jdGlvbiBGbihlLHQpe3JldHVybiBOKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbixvLGE7cmV0dXJuIFUodGhpcywoZnVuY3Rpb24ocyl7c3dpdGNoKHMubGFiZWwpe2Nhc2UgMDpyZXR1cm4gKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwidGFnSWRcIixlLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuU1RSSU5HLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJjb250YWluTXV0ZWRcIix0LF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuQk9PTEVBTiwhMCksTy5pbmZvKFwiZ2V0VW5yZWFkQ291bnRCeVRhZyAtPnRhZ0lkOlwiK2UpLFs0LHRlLmltQ2xpZW50LmNvbnRleHQuZ2V0VW5yZWFkQ291bnRCeVRhZyhlLHQpXTtjYXNlIDE6cmV0dXJuIG49cy5zZW50KCksbz1uLmNvZGUsYT1uLmRhdGEsTy5pbmZvKG8sYSksbz09PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1M/WzIse2NvZGU6byxkYXRhOmF9XTooTy53YXJuKFwiZ2V0VW5yZWFkQ291bnRCeVRhZyAtPmNvZGU6XCIrbytcIix0YWdJZDpcIitlKSxbMix7Y29kZTpvLG1zZzpvZVtvXX1dKX19KSl9KSl9ZnVuY3Rpb24gcW4oZSx0LG4pe3JldHVybiBOKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbyxhO3JldHVybiBVKHRoaXMsKGZ1bmN0aW9uKHMpe3N3aXRjaChzLmxhYmVsKXtjYXNlIDA6cmV0dXJuICgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcInRhZ0lkXCIsZSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLlNUUklORywhMCksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwiY29udmVyc2F0aW9uLnRhcmdldElkXCIsdC50YXJnZXRJZCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLlNUUklORywhMCksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwiY29udmVyc2F0aW9uLmNvbnZlcnNhdGlvblR5cGVcIix0LmNvbnZlcnNhdGlvblR5cGUsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5OVU1CRVIsITApLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcImNvbnZlcnNhdGlvbi5jaGFubmVsSWRcIix0LmNoYW5uZWxJZCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLkNIQU5ORUxfSUQpLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcInN0YXR1cy5pc1RvcFwiLG4sX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5CT09MRUFOLCEwKSxPLmluZm8oXCJzZXRDb252ZXJzYXRpb25TdGF0dXNJblRhZyAtPnRhZ0lkOlwiK2UrXCIsdGFyZ2V0SWQ6XCIrdC50YXJnZXRJZCtcIixjb252ZXJzYXRpb25UeXBlXCIrdC5jb252ZXJzYXRpb25UeXBlKSxbNCx0ZS5pbUNsaWVudC5jb250ZXh0LnNldENvbnZlcnNhdGlvblN0YXR1c0luVGFnKGUsdCx7aXNUb3A6bn0pXTtjYXNlIDE6cmV0dXJuIG89cy5zZW50KCksKGE9by5jb2RlKT09PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1M/WzIse2NvZGU6YX1dOihPLndhcm4oXCJzZXRDb252ZXJzYXRpb25TdGF0dXNJblRhZyAtPmNvZGU6XCIrYStcIix0YWdJZDpcIitlKSxbMix7Y29kZTphLG1zZzpvZVthXX1dKX19KSl9KSl9ZW4oX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5GaWxlVHlwZS5DT01CSU5FX0hUTUwsKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyBJdCh7cmVtb3RlVXJsOmUuZG93bmxvYWRVcmwsbmFtZUxpc3Q6dC5uYW1lTGlzdCxzdW1tYXJ5TGlzdDp0LnN1bW1hcnlMaXN0LGNvbnZlcnNhdGlvblR5cGU6dC5jb252ZXJzYXRpb25UeXBlLHVzZXI6dC51c2VyLGV4dHJhOnQuZXh0cmF9KX0pKTt2YXIgVm49e0NPTUVUOlwiY29tZXRcIixXRUJTT0NLRVQ6XCJ3ZWJzb2NrZXRcIn0sem49e1RFWFQ6XCJSQzpUeHRNc2dcIixWT0lDRTpcIlJDOlZjTXNnXCIsSFFfVk9JQ0U6XCJSQzpIUVZDTXNnXCIsSU1BR0U6XCJSQzpJbWdNc2dcIixHSUY6XCJSQzpHSUZNc2dcIixSSUNIX0NPTlRFTlQ6XCJSQzpJbWdUZXh0TXNnXCIsTE9DQVRJT046XCJSQzpMQlNNc2dcIixGSUxFOlwiUkM6RmlsZU1zZ1wiLFNJR0hUOlwiUkM6U2lnaHRNc2dcIixDT01CSU5FOlwiUkM6Q29tYmluZU1zZ1wiLENIUk1fS1ZfTk9USUZZOlwiUkM6Y2hybUtWTm90aU1zZ1wiLExPR19DT01NQU5EOlwiUkM6TG9nQ21kTXNnXCIsRVhQQU5TSU9OX05PVElGWTpcIlJDOk1zZ0V4TXNnXCIsUkVGRVJFTkNFOlwiUkM6UmVmZXJlbmNlTXNnXCIsUkVDQUxMX01FU1NBR0VfVFlQRTpcIlJDOlJjQ21kXCJ9O19yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uVmVyc2lvbk1hbmFnZS5hZGQoXCJpbWxpYlwiLFwiNS4yLjFcIiksX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5WZXJzaW9uTWFuYWdlLnZhbGlkRW5naW5lKFwiNS4yLjFcIil8fE8uZXJyb3IoXCJUaGUgY3VycmVudCBlbmdpbmUgdmVyc2lvbiAnXCIrX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5WZXJzaW9uTWFuYWdlLmdldEluZm8oKS5lbmdpbmUrXCInIGVycm9y77yMaW1saWIgcmVxdWlyZWQgZW5naW5lIHZlcnNpb24gYXQgbGVhc3QgJzUuMi4xJy5cIik7XG5cblxuLy8jIHNvdXJjZVVSTD13ZWJwYWNrOi8vQHJvbmdjbG91ZC9yY2xpdmVyb29tbGliLy4vbm9kZV9tb2R1bGVzL0Byb25nY2xvdWQvaW1saWItbmV4dC9kaXN0L2luZGV4LmVzbS5qcz8iKTsvKioqL30sLyoqKi8iLi9ub2RlX21vZHVsZXMvQHJvbmdjbG91ZC9pbWxpYi1uZXh0L25vZGVfbW9kdWxlcy9Acm9uZ2Nsb3VkL2VuZ2luZS9kaXN0L2luZGV4LmVzbS5qcyI6LyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcCiAgISoqKiAuL25vZGVfbW9kdWxlcy9Acm9uZ2Nsb3VkL2ltbGliLW5leHQvbm9kZV9tb2R1bGVzL0Byb25nY2xvdWQvZW5naW5lL2Rpc3QvaW5kZXguZXNtLmpzICoqKiEKICBcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLyAvKioqL2Z1bmN0aW9uIG5vZGVfbW9kdWxlc1JvbmdjbG91ZEltbGliTmV4dE5vZGVfbW9kdWxlc1JvbmdjbG91ZEVuZ2luZURpc3RJbmRleEVzbUpzKF9fdW51c2VkX3dlYnBhY2tfbW9kdWxlLF9fd2VicGFja19leHBvcnRzX18sX193ZWJwYWNrX3JlcXVpcmVfXyl7ZXZhbCgiX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIHtcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJBRW5naW5lXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIEdyKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJBTmF2aVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBxciksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiQVBJQ29udGV4dFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBOcyksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiQXBwU3RvcmFnZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBSKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJBc3NlcnRSdWxlc1wiOiAoKSA9PiAoLyogYmluZGluZyAqLyBXZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiQ09OTkVDVElPTl9UWVBFXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHQpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIkNQUF9QUk9UT0NBTF9NU0dUWVBFX09QVElPTlwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBFKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJDYWxsTGliTXNnVHlwZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBZZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiQ2hhdHJvb21FbnRyeVR5cGVcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gTGUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIkNoYXRyb29tTWVtYmVyQ2hhbmdlVHlwZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBEZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiQ29tZXRDaGFubmVsXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIEJyKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJDb25uZWN0UmVzdWx0Q29kZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBDZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiQ29ubmVjdGlvblN0YXR1c1wiOiAoKSA9PiAoLyogYmluZGluZyAqLyBJZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiQ29udmVyc2F0aW9uVHlwZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBqKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJEZWxheVRpbWVyXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIFJ0KSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJFcnJvckNvZGVcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gRWUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIkV2ZW50RW1pdHRlclwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBfZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiRmlsZVR5cGVcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gVyksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiSHR0cE1ldGhvZFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBWciksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiSU1fQ09NRVRfUFVMTE1TR19USU1FT1VUXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHkpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIklNX1BJTkdfSU5URVJWQUxfVElNRVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBkKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJJTV9QSU5HX01JTl9USU1FT1VUXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHApLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIklNX1BJTkdfVElNRU9VVFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBmKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJJTV9TSUdOQUxfVElNRU9VVFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBsKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJMaXZlUm9sZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBHZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiTGl2ZVR5cGVcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gQmUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIkxvZ0xldmVsXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIFUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIkxvZ1R5cGVcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gYiksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiTG9nZ2VyXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHBlKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJNQVhfTUVTU0FHRV9DT05URU5UX0JZVEVTXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIF8pLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIk1JTklfQ09NRVRfQ09OTkVDVF9VUklTXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIGgpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIk1JTklfU09DS0VUX0NPTk5FQ1RfVVJJU1wiOiAoKSA9PiAoLyogYmluZGluZyAqLyBjKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJNZW50aW9uZWRUeXBlXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHdlKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJNZXNzYWdlQmxvY2tUeXBlXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIGtlKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJNZXNzYWdlRGlyZWN0aW9uXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIG1lKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJNZXNzYWdlVHlwZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBTZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiTkFWSV9DQUNIRV9EVVJBVElPTlwiOiAoKSA9PiAoLyogYmluZGluZyAqLyByKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJOQVZJX1JFUV9USU1FT1VUXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHMpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIk5vdGlmaWNhdGlvblN0YXR1c1wiOiAoKSA9PiAoLyogYmluZGluZyAqLyBPZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiT3BlcmF0ZVN0YXR1c1wiOiAoKSA9PiAoLyogYmluZGluZyAqLyBGZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiUElOR19SRVFfVElNRU9VVFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBvKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJQVUJMSUNfQ0xPVURfTkFWSV9VUklTXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIlBsdWdpbkNvbnRleHRcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8geXMpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIlJDQXNzZXJ0RXJyb3JcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gbnQpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIlJUQ0FwaVR5cGVcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gcWUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIlJUQ0lkZW50aXR5Q2hhbmdlVHlwZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBLZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiUlRDSm9pblR5cGVcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gSGUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIlJUQ01vZGVcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8geGUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIlJUQ1BsdWdpbkNvbnRleHRcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gbXMpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIlJlY2VpdmVkU3RhdHVzXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIGkpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIlNFTkRfTUVTU0FHRV9UWVBFX09QVElPTlwiOiAoKSA9PiAoLyogYmluZGluZyAqLyB2KSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJTVEFUVVNfTUVTU0FHRVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBUKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJTVE9SQUdFX1JPT1RfS0VZXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIG0pLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIlRhZ0NoYW5nZVR5cGVcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gU3MpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIlVwbG9hZE1ldGhvZFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBVZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiVmVyc2lvbk1hbmFnZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBKZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiV0VCX1NPQ0tFVF9USU1FT1VUXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIGEpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIldlYlNvY2tldENoYW5uZWxcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8geHIpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImFwcGVuZFVybFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBrKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJhc3NlcnRcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gaXQpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImNsb25lXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIEl0KSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJjbG9uZUJ5SlNPTlwiOiAoKSA9PiAoLyogYmluZGluZyAqLyB5dCksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZm9yRWFjaFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBkdCksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZm9ybWF0Q29ubmVjdFJlc3BvbnNlQ29kZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBFdCksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZ2V0QnJvd3NlclwiOiAoKSA9PiAoLyogYmluZGluZyAqLyB2dCksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZ2V0TWltZUtleVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBhdCksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZ2V0VXBsb2FkRmlsZU5hbWVcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gb3QpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImluZGV4T2ZcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gcHQpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImlzQXJyYXlcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gWCksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiaXNBcnJheUJ1ZmZlclwiOiAoKSA9PiAoLyogYmluZGluZyAqLyAkKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJpc0Jvb2xlYW5cIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8geiksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiaXNGdW5jdGlvblwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBpZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiaXNIdHRwVXJsXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIG9lKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJpc0luT2JqZWN0XCI6ICgpID0+ICgvKiBiaW5kaW5nICovIF90KSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJpc0luY2x1ZGVcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gZ3QpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImlzTnVsbFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBzZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiaXNOdW1iZXJcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gWiksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiaXNPYmplY3RcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gbmUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImlzU3RyaW5nXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIEopLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImlzVW5kZWZpbmVkXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHJlKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJpc1ZhbGlkQ2hybUVudHJ5S2V5XCI6ICgpID0+ICgvKiBiaW5kaW5nICovIGh0KSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJpc1ZhbGlkQ2hybUVudHJ5VmFsdWVcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gbHQpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImlzVmFsaWRDb252ZXJzYXRpb25UeXBlXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHVlKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJpc1ZhbGlkRXhwYW5zaW9uXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIGhlKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJpc1ZhbGlkRmlsZVR5cGVcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gY2UpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIm1hcFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBmdCksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwibm90RW1wdHlBcnJheVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyB0ZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwibm90RW1wdHlPYmplY3RcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gYWUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIm5vdEVtcHR5U3RyaW5nXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIGVlKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJwdXNoQ29uZmlnc1RvSlNPTlwiOiAoKSA9PiAoLyogYmluZGluZyAqLyB1dCksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwicHVzaEpTT05Ub0NvbmZpZ3NcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gY3QpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcInRvZG9cIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gUCksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwidXNpbmdDcHBFbmdpbmVcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gbXQpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcInZhbGlkYXRlXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHJ0KSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJ2ZXJzaW9uXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIE9zKVxuLyogaGFybW9ueSBleHBvcnQgKi8gfSk7XG52YXIgZTshZnVuY3Rpb24oZSl7ZVtlLlJFQUQ9MV09XCJSRUFEXCIsZVtlLkxJU1RFTkVEPTJdPVwiTElTVEVORURcIixlW2UuRE9XTkxPQURFRD00XT1cIkRPV05MT0FERURcIixlW2UuUkVUUklFVkVEPThdPVwiUkVUUklFVkVEXCIsZVtlLlVOUkVBRD0wXT1cIlVOUkVBRFwifShlfHwoZT17fSkpO3ZhciB0LG4saT1lLHI9NzJlNSxzPTFlNCxvPTVlMyxhPTVlMyx1PVtcImh0dHBzOi8vbmF2LmNuLnJvbmdodWIuY29tXCIsXCJodHRwczovL25hdjItY24ucm9uZ2h1Yi5jb21cIl0sYz1bXCJ3c3Byb3h5LmNuLnJvbmdodWIuY29tXCIsXCJ3c2FwLWNuLnJvbmdodWIuY29tXCJdLGg9W1wiY29tZXRwcm94eS1jbi5yb25naHViLmNvbVwiLFwibWluaS1jbi5yb25naHViLmNvbVwiXSxsPTNlNCxkPTE1ZTMsZj0xNWUzLHA9MmUzLF89MTMxMDcyLHk9NDVlMyxtPVwiUkNWNC1cIix2PXtcIlJDOlR4dE1zZ1wiOntpc0NvdW50ZWQ6ITAsaXNQZXJzaXRlZDohMH0sXCJSQzpJbWdNc2dcIjp7aXNDb3VudGVkOiEwLGlzUGVyc2l0ZWQ6ITB9LFwiUkM6VmNNc2dcIjp7aXNDb3VudGVkOiEwLGlzUGVyc2l0ZWQ6ITB9LFwiUkM6SW1nVGV4dE1zZ1wiOntpc0NvdW50ZWQ6ITAsaXNQZXJzaXRlZDohMH0sXCJSQzpGaWxlTXNnXCI6e2lzQ291bnRlZDohMCxpc1BlcnNpdGVkOiEwfSxcIlJDOkhRVkNNc2dcIjp7aXNDb3VudGVkOiEwLGlzUGVyc2l0ZWQ6ITB9LFwiUkM6TEJTTXNnXCI6e2lzQ291bnRlZDohMCxpc1BlcnNpdGVkOiEwfSxcIlJDOlBTSW1nVHh0TXNnXCI6e2lzQ291bnRlZDohMCxpc1BlcnNpdGVkOiEwfSxcIlJDOlBTTXVsdGlJbWdUeHRNc2dcIjp7aXNDb3VudGVkOiEwLGlzUGVyc2l0ZWQ6ITB9LFwiUkNKcm1mOlJwTXNnXCI6e2lzQ291bnRlZDohMCxpc1BlcnNpdGVkOiEwfSxcIlJDSnJtZjpScE9wZW5kTXNnXCI6e2lzQ291bnRlZDohMCxpc1BlcnNpdGVkOiEwfSxcIlJDOkNvbWJpbmVNc2dcIjp7aXNDb3VudGVkOiEwLGlzUGVyc2l0ZWQ6ITB9LFwiUkM6UmVmZXJlbmNlTXNnXCI6e2lzQ291bnRlZDohMCxpc1BlcnNpdGVkOiEwfSxcIlJDOlNpZ2h0TXNnXCI6e2lzQ291bnRlZDohMCxpc1BlcnNpdGVkOiEwfSxcIlJDOkdJRk1zZ1wiOntpc0NvdW50ZWQ6ITAsaXNQZXJzaXRlZDohMH0sXCJSQzpJbmZvTnRmXCI6e2lzQ291bnRlZDohMSxpc1BlcnNpdGVkOiEwfSxcIlJDOkNvbnRhY3ROdGZcIjp7aXNDb3VudGVkOiExLGlzUGVyc2l0ZWQ6ITB9LFwiUkM6UHJvZmlsZU50ZlwiOntpc0NvdW50ZWQ6ITEsaXNQZXJzaXRlZDohMH0sXCJSQzpDbWROdGZcIjp7aXNDb3VudGVkOiExLGlzUGVyc2l0ZWQ6ITB9LFwiUkM6R3JwTnRmXCI6e2lzQ291bnRlZDohMSxpc1BlcnNpdGVkOiEwfSxcIlJDOlJjQ21kXCI6e2lzQ291bnRlZDohMSxpc1BlcnNpdGVkOiEwfSxcIlJDOkNtZE1zZ1wiOntpc0NvdW50ZWQ6ITEsaXNQZXJzaXRlZDohMX0sXCJSQzpUeXBTdHNcIjp7aXNDb3VudGVkOiExLGlzUGVyc2l0ZWQ6ITF9LFwiUkM6UFNDbWRcIjp7aXNDb3VudGVkOiExLGlzUGVyc2l0ZWQ6ITF9LFwiUkM6U1JTTXNnXCI6e2lzQ291bnRlZDohMSxpc1BlcnNpdGVkOiExfSxcIlJDOlJSUmVxTXNnXCI6e2lzQ291bnRlZDohMSxpc1BlcnNpdGVkOiExfSxcIlJDOlJSUnNwTXNnXCI6e2lzQ291bnRlZDohMSxpc1BlcnNpdGVkOiExfSxcIlJDOkNzQ2hhUlwiOntpc0NvdW50ZWQ6ITEsaXNQZXJzaXRlZDohMX0sXCJSQzpDU0NoYVwiOntpc0NvdW50ZWQ6ITEsaXNQZXJzaXRlZDohMX0sXCJSQzpDc0V2YVwiOntpc0NvdW50ZWQ6ITEsaXNQZXJzaXRlZDohMX0sXCJSQzpDc0NvbnRhY3RcIjp7aXNDb3VudGVkOiExLGlzUGVyc2l0ZWQ6ITF9LFwiUkM6Q3NIc1wiOntpc0NvdW50ZWQ6ITEsaXNQZXJzaXRlZDohMX0sXCJSQzpDc0hzUlwiOntpc0NvdW50ZWQ6ITEsaXNQZXJzaXRlZDohMX0sXCJSQzpDc1NwXCI6e2lzQ291bnRlZDohMSxpc1BlcnNpdGVkOiExfSxcIlJDOkNzRW5kXCI6e2lzQ291bnRlZDohMSxpc1BlcnNpdGVkOiExfSxcIlJDOkNzVXBkYXRlXCI6e2lzQ291bnRlZDohMSxpc1BlcnNpdGVkOiExfSxcIlJDOlJlYWROdGZcIjp7aXNDb3VudGVkOiExLGlzUGVyc2l0ZWQ6ITF9LFwiUkM6Y2hybUtWTm90aU1zZ1wiOntpc0NvdW50ZWQ6ITEsaXNQZXJzaXRlZDohMX0sXCJSQzpWQ0FjY2VwdFwiOntpc0NvdW50ZWQ6ITEsaXNQZXJzaXRlZDohMX0sXCJSQzpWQ1JpbmdpbmdcIjp7aXNDb3VudGVkOiExLGlzUGVyc2l0ZWQ6ITF9LFwiUkM6VkNTdW1tYXJ5XCI6e2lzQ291bnRlZDohMSxpc1BlcnNpdGVkOiExfSxcIlJDOlZDSGFuZ3VwXCI6e2lzQ291bnRlZDohMSxpc1BlcnNpdGVkOiExfSxcIlJDOlZDSW52aXRlXCI6e2lzQ291bnRlZDohMSxpc1BlcnNpdGVkOiExfSxcIlJDOlZDTW9kaWZ5TWVkaWFcIjp7aXNDb3VudGVkOiExLGlzUGVyc2l0ZWQ6ITF9LFwiUkM6VkNNb2RpZnlNZW1cIjp7aXNDb3VudGVkOiExLGlzUGVyc2l0ZWQ6ITF9LFwiUkM6TXNnRXhNc2dcIjp7aXNDb3VudGVkOiExLGlzUGVyc2l0ZWQ6ITF9LFwiUkM6UlJNc2dcIjp7aXNDb3VudGVkOiExLGlzUGVyc2l0ZWQ6ITF9LFwiUkM6TG9nQ21kTXNnXCI6e2lzQ291bnRlZDohMSxpc1BlcnNpdGVkOiExfSxcIlJDOkludGVyY2VwdE1zZ1wiOntpc0NvdW50ZWQ6ITEsaXNQZXJzaXRlZDohMX19LEU9e1wiUkM6RGl6TnRmXCI6e2lzQ291bnRlZDohMSxpc1BlcnNpdGVkOiExfX0sVD1bXCJSQzpUeXBTdHNcIixcIlJDOkludGVyY2VwdE1zZ1wiXTshZnVuY3Rpb24oZSl7ZS5XRUJTT0NLRVQ9XCJ3ZWJzb2NrZXRcIixlLkNPTUVUPVwiY29tZXRcIn0odHx8KHQ9e30pKTt2YXIgST1mdW5jdGlvbihlKXtyZXR1cm4gbnx8KG49e3NldDpmdW5jdGlvbih0LG4pe2UubG9jYWxTdG9yYWdlLnNldEl0ZW0odCxKU09OLnN0cmluZ2lmeShuKSl9LGdldDpmdW5jdGlvbih0KXt2YXIgbjt0cnl7bj1KU09OLnBhcnNlKGUubG9jYWxTdG9yYWdlLmdldEl0ZW0odCkpfWNhdGNoKGUpe249bnVsbH1yZXR1cm4gbn0scmVtb3ZlOmZ1bmN0aW9uKHQpe3JldHVybiBlLmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKHQpfSxnZXRLZXlzOmZ1bmN0aW9uKCl7dmFyIHQ9W107Zm9yKHZhciBuIGluIGUubG9jYWxTdG9yYWdlKXQucHVzaChuKTtyZXR1cm4gdH19KSxufSxDPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLl9jYWNoZXM9e30sZSYmKHRoaXMuX2NhY2hlcz1lKX1yZXR1cm4gZS5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKGUsdCl7dGhpcy5fY2FjaGVzW2VdPXR9LGUucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmdldChlKTtyZXR1cm4gZGVsZXRlIHRoaXMuX2NhY2hlc1tlXSx0fSxlLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2NhY2hlc1tlXX0sZS5wcm90b3R5cGUuZ2V0S2V5cz1mdW5jdGlvbigpe3ZhciBlPVtdO2Zvcih2YXIgdCBpbiB0aGlzLl9jYWNoZXMpZS5wdXNoKHQpO3JldHVybiBlfSxlfSgpLFI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dmFyIG4saT10P1wiUkNWNC1cIit0OlwiUkNWNC1cIjt0aGlzLl9yb290U3RvcmFnZT1JKGUpO3ZhciByPXRoaXMuX3Jvb3RTdG9yYWdlLmdldChpKXx8e307dGhpcy5fY2FjaGU9bmV3IEMoKChuPXt9KVtpXT1yLG4pKSx0aGlzLl9zdG9yYWdlS2V5PWl9cmV0dXJuIGUucHJvdG90eXBlLl9nZXQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9zdG9yYWdlS2V5O3JldHVybiB0aGlzLl9jYWNoZS5nZXQoZSl8fHt9fSxlLnByb3RvdHlwZS5fc2V0PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX3N0b3JhZ2VLZXk7ZT1lfHx7fSx0aGlzLl9jYWNoZS5zZXQodCxlKSx0aGlzLl9yb290U3RvcmFnZS5zZXQodCxlKX0sZS5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5fZ2V0KCk7bltlXT10LHRoaXMuX3NldChuKX0sZS5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2dldCgpO2RlbGV0ZSB0W2VdLHRoaXMuX3NldCh0KX0sZS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9zdG9yYWdlS2V5O3RoaXMuX3Jvb3RTdG9yYWdlLnJlbW92ZShlKSx0aGlzLl9jYWNoZS5yZW1vdmUoZSl9LGUucHJvdG90eXBlLmdldD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZ2V0KClbZV19LGUucHJvdG90eXBlLmdldEtleXM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9nZXQoKSx0PVtdO2Zvcih2YXIgbiBpbiBlKXQucHVzaChuKTtyZXR1cm4gdH0sZS5wcm90b3R5cGUuZ2V0VmFsdWVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dldCgpfHx7fX0sZX0oKSxTPWZ1bmN0aW9uKGUsdCl7cmV0dXJuKFM9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsbikmJihlW25dPXRbbl0pfSkoZSx0KX07ZnVuY3Rpb24gTihlLHQpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiK1N0cmluZyh0KStcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO2Z1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPWV9UyhlLHQpLGUucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KG4ucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyBuKX12YXIgTz1mdW5jdGlvbigpe3JldHVybihPPU9iamVjdC5hc3NpZ258fGZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuPTEsaT1hcmd1bWVudHMubGVuZ3RoO248aTtuKyspZm9yKHZhciByIGluIHQ9YXJndW1lbnRzW25dKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiYoZVtyXT10W3JdKTtyZXR1cm4gZX0pLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07ZnVuY3Rpb24gTShlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKSgoZnVuY3Rpb24ocixzKXtmdW5jdGlvbiBvKGUpe3RyeXt1KGkubmV4dChlKSl9Y2F0Y2goZSl7cyhlKX19ZnVuY3Rpb24gYShlKXt0cnl7dShpLnRocm93KGUpKX1jYXRjaChlKXtzKGUpfX1mdW5jdGlvbiB1KGUpe3ZhciB0O2UuZG9uZT9yKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIG4/dDpuZXcgbigoZnVuY3Rpb24oZSl7ZSh0KX0pKSkudGhlbihvLGEpfXUoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pKX1mdW5jdGlvbiB3KGUsdCl7dmFyIG4saSxyLHMsbz17bGFiZWw6MCxzZW50OmZ1bmN0aW9uKCl7aWYoMSZyWzBdKXRocm93IHJbMV07cmV0dXJuIHJbMV19LHRyeXM6W10sb3BzOltdfTtyZXR1cm4gcz17bmV4dDphKDApLHRocm93OmEoMSkscmV0dXJuOmEoMil9LFwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmKHNbU3ltYm9sLml0ZXJhdG9yXT1mdW5jdGlvbigpe3JldHVybiB0aGlzfSkscztmdW5jdGlvbiBhKHMpe3JldHVybiBmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24ocyl7aWYobil0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtmb3IoO287KXRyeXtpZihuPTEsaSYmKHI9MiZzWzBdP2kucmV0dXJuOnNbMF0/aS50aHJvd3x8KChyPWkucmV0dXJuKSYmci5jYWxsKGkpLDApOmkubmV4dCkmJiEocj1yLmNhbGwoaSxzWzFdKSkuZG9uZSlyZXR1cm4gcjtzd2l0Y2goaT0wLHImJihzPVsyJnNbMF0sci52YWx1ZV0pLHNbMF0pe2Nhc2UgMDpjYXNlIDE6cj1zO2JyZWFrO2Nhc2UgNDpyZXR1cm4gby5sYWJlbCsrLHt2YWx1ZTpzWzFdLGRvbmU6ITF9O2Nhc2UgNTpvLmxhYmVsKyssaT1zWzFdLHM9WzBdO2NvbnRpbnVlO2Nhc2UgNzpzPW8ub3BzLnBvcCgpLG8udHJ5cy5wb3AoKTtjb250aW51ZTtkZWZhdWx0OmlmKCEocj1vLnRyeXMsKHI9ci5sZW5ndGg+MCYmcltyLmxlbmd0aC0xXSl8fDYhPT1zWzBdJiYyIT09c1swXSkpe289MDtjb250aW51ZX1pZigzPT09c1swXSYmKCFyfHxzWzFdPnJbMF0mJnNbMV08clszXSkpe28ubGFiZWw9c1sxXTticmVha31pZig2PT09c1swXSYmby5sYWJlbDxyWzFdKXtvLmxhYmVsPXJbMV0scj1zO2JyZWFrfWlmKHImJm8ubGFiZWw8clsyXSl7by5sYWJlbD1yWzJdLG8ub3BzLnB1c2gocyk7YnJlYWt9clsyXSYmby5vcHMucG9wKCksby50cnlzLnBvcCgpO2NvbnRpbnVlfXM9dC5jYWxsKGUsbyl9Y2F0Y2goZSl7cz1bNixlXSxpPTB9ZmluYWxseXtuPXI9MH1pZig1JnNbMF0pdGhyb3cgc1sxXTtyZXR1cm57dmFsdWU6c1swXT9zWzFdOnZvaWQgMCxkb25lOiEwfX0oW3MsYV0pfX19ZnVuY3Rpb24gQShlLHQpe2Zvcih2YXIgbj0wLGk9dC5sZW5ndGgscj1lLmxlbmd0aDtuPGk7bisrLHIrKyllW3JdPXRbbl07cmV0dXJuIGV9dmFyIFUsYixMPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCl7cmV0dXJuIGUuY2FsbCh0aGlzLFwiVE9ETyA9PiBcIit0KXx8dGhpc31yZXR1cm4gTih0LGUpLHR9KEVycm9yKSxQPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgTChlKX0sRD1mdW5jdGlvbihlLHQsbil7aWYodm9pZCAwPT09dHx8dm9pZCAwPT09bilyZXR1cm4gZS50b1VwcGVyQ2FzZSgpO3ZhciBpPWUuc2xpY2UodCxuKTtyZXR1cm4gZT1lLnJlcGxhY2UoaSwoZnVuY3Rpb24oZSl7cmV0dXJuIGUudG9VcHBlckNhc2UoKX0pKX0sVj1mdW5jdGlvbihlLHQpe3ZvaWQgMD09PXQmJih0PVwidXRmLThcIik7dmFyIG4saT0wO2lmKFwidXRmLTE2XCI9PT10KWZvcih2YXIgcj0wLHM9ZS5sZW5ndGg7cjxzO3IrKylpKz0obj1lLmNoYXJDb2RlQXQocikpPD02NTUzNT8yOjQ7ZWxzZSBmb3Iocj0wLHM9ZS5sZW5ndGg7cjxzO3IrKylpKz0obj1lLmNoYXJDb2RlQXQocikpPDEyNz8xOm48PTIwNDc/MjpuPD02NTUzNT8zOjQ7cmV0dXJuIGl9LGs9ZnVuY3Rpb24oZSx0KXtpZihlPWUucmVwbGFjZSgvXFw/JC8sXCJcIiksIXQpcmV0dXJuIGU7dmFyIG49T2JqZWN0LmtleXModCkubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gZStcIj1cIit0W2VdfSkpLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuISFlfSkpO3JldHVybiBuLmxlbmd0aD9bZSxuLmpvaW4oXCImXCIpXS5qb2luKFwiP1wiKTplfSx4PWZ1bmN0aW9uKGUpe3JldHVybiBlLm1hdGNoKC9cXGQrKFxcLlxcZCspezJ9LylbMF19OyFmdW5jdGlvbihlKXtlW2UuTE9HPTBdPVwiTE9HXCIsZVtlLkRFQlVHPTBdPVwiREVCVUdcIixlW2UuSU5GTz0xXT1cIklORk9cIixlW2UuV0FSTj0yXT1cIldBUk5cIixlW2UuRVJST1I9M109XCJFUlJPUlwiLGVbZS5GQVRBTD00XT1cIkZBVEFMXCIsZVtlLk5PTkU9MWUzXT1cIk5PTkVcIn0oVXx8KFU9e30pKSxmdW5jdGlvbihlKXtlLklNPVwiSU1cIixlLlJUQz1cIlJUQ1wifShifHwoYj17fSkpO3ZhciBCPVwiUkNfTG9nc1wiO2Z1bmN0aW9uIEcoZSl7dmFyIHQ9ZS50YXJnZXQucmVzdWx0OzE9PT1lLm9sZFZlcnNpb24mJnQuZGVsZXRlT2JqZWN0U3RvcmUoQiksZnVuY3Rpb24oZSx0LG4pe3ZhciBpO2lmKCFlLm9iamVjdFN0b3JlTmFtZXMuY29udGFpbnModCkpe3ZhciByPU8oe30sbi5vYmplY3RTdG9yZVBhcmFtcyk7aT1lLmNyZWF0ZU9iamVjdFN0b3JlKHQsciksbi5pbmRleHMmJm4uaW5kZXhzLmxlbmd0aD4wJiZuLmluZGV4cy5mb3JFYWNoKChmdW5jdGlvbihlKXtpLmNyZWF0ZUluZGV4KGUuaW5kZXhOYW1lLGUua2V5LHt1bmlxdWU6ZS51bmlxdWV9KX0pKX19KHQsQix7aW5kZXhzOlt7aW5kZXhOYW1lOlwidGltZVwiLGtleTpcInRpbWVcIix1bmlxdWU6ITF9XSxvYmplY3RTdG9yZVBhcmFtczp7YXV0b0luY3JlbWVudDohMH19KX12YXIgRixxPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe31yZXR1cm4gZS5pbml0PWZ1bmN0aW9uKCl7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdyYmd2luZG93JiZ3aW5kb3cuaW5kZXhlZERCKXt2YXIgdD13aW5kb3cuaW5kZXhlZERCLm9wZW4oXCJSQ19FTkdJTkVfREJcIiwyKTt0Lm9uZXJyb3I9ZnVuY3Rpb24oZSl7Y29uc29sZS53YXJuKFwib3BlbiBpbmRleERCIHJlcXVlc3QgZmFpbGVkIFwiK2UudGFyZ2V0LmVycm9yKX0sdC5vbnN1Y2Nlc3M9ZnVuY3Rpb24odCl7ZS5fZGI9dC50YXJnZXQucmVzdWx0LGUuX2RiJiYoZS5fZGIub25jbG9zZT1mdW5jdGlvbih0KXt2YXIgbjtjb25zb2xlLndhcm4oXCJUaGUgZGF0YWJhc2UgXCIrKG51bGw9PT0obj1lLl9kYil8fHZvaWQgMD09PW4/dm9pZCAwOm4ubmFtZSkrXCIgaGFzIHVuZXhwZWN0ZWRseSBjbG9zZWQuXCIsdCksZS5fZGI9bnVsbCx3aW5kb3cuX19SQ0luZGV4REJJbnN0YW5jZT1udWxsfSxlLl9kYi5vbmVycm9yPWZ1bmN0aW9uKHQpe3ZhciBuO2NvbnNvbGUud2FybihcIlRoZSBkYXRhYmFzZSBcIisobnVsbD09PShuPWUuX2RiKXx8dm9pZCAwPT09bj92b2lkIDA6bi5uYW1lKStcIiBoYXMgb3BlbmluZyBlcnJvci5cIix0KSxlLl9kYj1udWxsLHdpbmRvdy5fX1JDSW5kZXhEQkluc3RhbmNlPW51bGx9LGUuX2RiLm9uYWJvcnQ9ZnVuY3Rpb24odCl7dmFyIG47Y29uc29sZS53YXJuKFwiVGhlIGRhdGFiYXNlIFwiKyhudWxsPT09KG49ZS5fZGIpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLm5hbWUpK1wiIGhhcyBvcGVuaW5nIGFib3J0ZWQuXCIsdCksZS5fZGI9bnVsbCx3aW5kb3cuX19SQ0luZGV4REJJbnN0YW5jZT1udWxsfSksd2luZG93Ll9fUkNJbmRleERCSW5zdGFuY2U9bmV3IGV9LHQub251cGdyYWRlbmVlZGVkPWZ1bmN0aW9uKHQpe2UuX2RiPXQudGFyZ2V0LnJlc3VsdCxHKHQpfX1lbHNlIGNvbnNvbGUuZGVidWcoXCJJbmRleERCIGlzIG5vdCBjdXJyZW50bHkgc3VwcG9ydGVkIGluIHRoZSBlbnZpcm9ubWVudCFcIil9LGUuZ2V0SW5zdGFuY2U9ZnVuY3Rpb24oKXtyZXR1cm4gd2luZG93JiZ3aW5kb3cuX19SQ0luZGV4REJJbnN0YW5jZT93aW5kb3cuX19SQ0luZGV4REJJbnN0YW5jZTpudWxsfSxlLnByb3RvdHlwZS5hZGRMaXN0PWZ1bmN0aW9uKHQsbil7cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbihpKXtpZihlLl9kYil7dmFyIHI9ZS5fZGIudHJhbnNhY3Rpb24oW3RdLFwicmVhZHdyaXRlXCIpLHM9ci5vYmplY3RTdG9yZSh0KTtuLmZvckVhY2goKGZ1bmN0aW9uKGUpe251bGw9PXN8fHMuYWRkKGUpfSkpLHIub25jb21wbGV0ZT1mdW5jdGlvbihlKXtpKCEwKX0sci5vbmVycm9yPWZ1bmN0aW9uKGUpe2koITEpfX1lbHNlIGkoITEpfSkpfSxlLnByb3RvdHlwZS5nZXRSYW5nZURhdGE9ZnVuY3Rpb24odCxuLGkscil7cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbihzKXtpZihlLl9kYil7dmFyIG89ZS5fZGIudHJhbnNhY3Rpb24oW3RdLFwicmVhZHdyaXRlXCIpLm9iamVjdFN0b3JlKHQpLGE9SURCS2V5UmFuZ2UuYm91bmQoaSxyKSx1PW8uaW5kZXgobiksYz1bXSxoPXUub3BlbkN1cnNvcihhKTtoLm9uc3VjY2Vzcz1mdW5jdGlvbihlKXt2YXIgdD1lLnRhcmdldC5yZXN1bHQ7dD8oYy5wdXNoKHQudmFsdWUpLHQuY29udGludWUoKSk6cyhjKX0saC5vbmVycm9yPWZ1bmN0aW9uKGUpe2NvbnNvbGUuZXJyb3IoZSkscyhbXSl9fWVsc2UgcyhbXSl9KSl9LGUucHJvdG90eXBlLmdldENvdW50PWZ1bmN0aW9uKHQsbil7cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbihuKXtpZihlLl9kYil7dmFyIGk9ZS5fZGIudHJhbnNhY3Rpb24oW3RdLFwicmVhZG9ubHlcIikub2JqZWN0U3RvcmUodCkuY291bnQoKTtpLm9uc3VjY2Vzcz1mdW5jdGlvbigpe24oaS5yZXN1bHQpfSxpLm9uZXJyb3I9ZnVuY3Rpb24oZSl7Y29uc29sZS5lcnJvcihlKSxuKDApfX1lbHNlIG4oMCl9KSl9LGUucHJvdG90eXBlLnJlbW92ZUZpcnN0RGF0YT1mdW5jdGlvbih0LG4saSl7cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbihuKXtpZihlLl9kYil7dmFyIHI9ZS5fZGIudHJhbnNhY3Rpb24oW3RdLFwicmVhZHdyaXRlXCIpLm9iamVjdFN0b3JlKHQpLHM9ci5nZXRBbGxLZXlzKElEQktleVJhbmdlLmxvd2VyQm91bmQoMCksaSk7cy5vbnN1Y2Nlc3M9ZnVuY3Rpb24oKXt2YXIgZT1zLnJlc3VsdDtlLmxlbmd0aD4wJiYoci5kZWxldGUoSURCS2V5UmFuZ2UuYm91bmQoZVswXSxlW2UubGVuZ3RoLTFdKSkub25zdWNjZXNzPWZ1bmN0aW9uKCl7bighMCl9KX19ZWxzZSBuKCExKX0pKX0sZS5fZGI9bnVsbCxlfSgpLEs9ZnVuY3Rpb24oKXtyZXR1cm5cInh4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eFwiLnJlcGxhY2UoL1t4eV0vZywoZnVuY3Rpb24oZSl7dmFyIHQ9MTYqTWF0aC5yYW5kb20oKXwwO3JldHVybihcInhcIj09PWU/dDozJnR8OCkudG9TdHJpbmcoMTYpfSkpfSxIPWZ1bmN0aW9uKCl7dmFyIGU9SygpO2lmKGU9ZS5yZXBsYWNlKC8tL2csXCJcIikrXCJhXCIsKGU9ZnVuY3Rpb24oZSl7dmFyIHQ9XCIwMTIzNDU2Nzg5YWJjZGVmZ2hpZ2tsbW5vcHFyc3R1dnd4eXpBQkNERUZHSElHS0xNTk9QUVJTVFVWV1hZWmEwXCIuc3BsaXQoXCJcIiksbj10Lmxlbmd0aCsxLGk9K2Uscj1bXTtkb3t2YXIgcz1pJW47aT0oaS1zKS9uLHIudW5zaGlmdCh0W3NdKX13aGlsZShpKTtyZXR1cm4gci5qb2luKFwiXCIpfShlPXBhcnNlSW50KGUsMTYpKSkubGVuZ3RoPjIyJiYoZT1lLnNsaWNlKDAsMjIpKSxlLmxlbmd0aDwyMilmb3IodmFyIHQ9MjItZS5sZW5ndGgsbj0wO248dDtuKyspZSs9XCIwXCI7cmV0dXJuIGV9OyFmdW5jdGlvbihlKXtlW2UuTk9ORT0wXT1cIk5PTkVcIixlW2UuUFJJVkFURT0xXT1cIlBSSVZBVEVcIixlW2UuRElTQ1VTU0lPTj0yXT1cIkRJU0NVU1NJT05cIixlW2UuR1JPVVA9M109XCJHUk9VUFwiLGVbZS5DSEFUUk9PTT00XT1cIkNIQVRST09NXCIsZVtlLkNVU1RPTUVSX1NFUlZJQ0U9NV09XCJDVVNUT01FUl9TRVJWSUNFXCIsZVtlLlNZU1RFTT02XT1cIlNZU1RFTVwiLGVbZS5BUFBfUFVCTElDX1NFUlZJQ0U9N109XCJBUFBfUFVCTElDX1NFUlZJQ0VcIixlW2UuUFVCTElDX1NFUlZJQ0U9OF09XCJQVUJMSUNfU0VSVklDRVwiLGVbZS5VTFRSQV9HUk9VUD0xMF09XCJVTFRSQV9HUk9VUFwiLGVbZS5SVENfUk9PTT0xMl09XCJSVENfUk9PTVwifShGfHwoRj17fSkpO3ZhciBZLGo9RjshZnVuY3Rpb24oZSl7ZVtlLklNQUdFPTFdPVwiSU1BR0VcIixlW2UuQVVESU89Ml09XCJBVURJT1wiLGVbZS5WSURFTz0zXT1cIlZJREVPXCIsZVtlLkZJTEU9NF09XCJGSUxFXCIsZVtlLlNJR0hUPTVdPVwiU0lHSFRcIixlW2UuQ09NQklORV9IVE1MPTZdPVwiQ09NQklORV9IVE1MXCJ9KFl8fChZPXt9KSk7dmFyIFEsVz1ZLEo9ZnVuY3Rpb24oZSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGV9LHo9ZnVuY3Rpb24oZSl7cmV0dXJuXCJib29sZWFuXCI9PXR5cGVvZiBlfSxaPWZ1bmN0aW9uKGUpe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiBlJiYhaXNOYU4oZSl9LFg9ZnVuY3Rpb24oZSl7cmV0dXJuLTEhPT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSkuaW5kZXhPZihcIkFycmF5XCIpfSwkPWZ1bmN0aW9uKGUpe3JldHVyblwiW29iamVjdCBBcnJheUJ1ZmZlcl1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKX0sZWU9ZnVuY3Rpb24oZSl7cmV0dXJuIEooZSkmJmUubGVuZ3RoPjB9LHRlPWZ1bmN0aW9uKGUpe3JldHVybiBYKGUpJiZlLmxlbmd0aD4wfSxuZT1mdW5jdGlvbihlKXtyZXR1cm5cIltvYmplY3QgT2JqZWN0XVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpfSxpZT1mdW5jdGlvbihlKXtyZXR1cm5cIltvYmplY3QgRnVuY3Rpb25dXCI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSl9LHJlPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lfHxcIltvYmplY3QgVW5kZWZpbmVkXVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpfSxzZT1mdW5jdGlvbihlKXtyZXR1cm5cIltvYmplY3QgTnVsbF1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKX0sb2U9ZnVuY3Rpb24oZSl7cmV0dXJuIEooZSkmJi9odHRwcz86XFwvXFwvLy50ZXN0KGUpfSxhZT1mdW5jdGlvbihlKXtmb3IodmFyIHQgaW4gZSlyZXR1cm4hMDtyZXR1cm4hMX0sdWU9ZnVuY3Rpb24oZSl7cmV0dXJuIFooZSkmJk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChqLGUpfSxjZT1mdW5jdGlvbihlKXtyZXR1cm4gWihlKSYmT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKFcsZSl9LGhlPWZ1bmN0aW9uKGUpe3ZhciB0PSExO2lmKG5lKGUpKWZvcih2YXIgbiBpbiBlKWlmKHQ9SihuKSYmIS9eW0EtWmEtejAtOV89Ky1dKyQvLnRlc3QobikpYnJlYWs7cmV0dXJuIHR9LGxlPXt9O2NvbnNvbGUmJigoUT17fSlbVS5ERUJVR109Y29uc29sZS5kZWJ1Zy5iaW5kKGNvbnNvbGUpLFFbVS5JTkZPXT1jb25zb2xlLmluZm8uYmluZChjb25zb2xlKSxRW1UuV0FSTl09Y29uc29sZS53YXJuLmJpbmQoY29uc29sZSksUVtVLkVSUk9SXT1jb25zb2xlLmVycm9yLmJpbmQoY29uc29sZSksUVtVLkZBVEFMXT1jb25zb2xlLmxvZy5iaW5kKGNvbnNvbGUpLGxlPVEpO3ZhciBkZSxmZT1mdW5jdGlvbihlKXtyZXR1cm4gSihlKXx8WihlKXx8cmUoZSl8fHooZSk/ZTplIGluc3RhbmNlb2YgRXJyb3I/SlNPTi5zdHJpbmdpZnkoe25hbWU6ZS5uYW1lLG1lc3NhZ2U6ZS5tZXNzYWdlLHN0YWNrOmUuc3RhY2t9KTpKU09OLnN0cmluZ2lmeShlKX0scGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxuKXt0aGlzLnRhZz1lLHRoaXMudHlwZT10LHRoaXMuaW5pdGlhdG9yPW4sdGhpcy5fb3V0TGV2ZWw9VS5XQVJOLHRoaXMuZGVidWc9dGhpcy5sb2cuYmluZCh0aGlzLFUuREVCVUcpLHRoaXMuaW5mbz10aGlzLmxvZy5iaW5kKHRoaXMsVS5JTkZPKSx0aGlzLndhcm49dGhpcy5sb2cuYmluZCh0aGlzLFUuV0FSTiksdGhpcy5lcnJvcj10aGlzLmxvZy5iaW5kKHRoaXMsVS5FUlJPUiksdGhpcy5mYXRhbD10aGlzLmxvZy5iaW5kKHRoaXMsVS5GQVRBTCl9cmV0dXJuIGUuaW5pdD1mdW5jdGlvbih0KXtlLnVzZXJJZD10fSxlLnJlc2V0PWZ1bmN0aW9uKCl7ZS51c2VySWQ9XCJcIn0sZS5wcm90b3R5cGUuX2RlZmF1bHRTdGRvdXQ9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49W10saT0yO2k8YXJndW1lbnRzLmxlbmd0aDtpKyspbltpLTJdPWFyZ3VtZW50c1tpXTtsZVtlXSYmbGVbZV0uYXBwbHkobGUsQShbdCtcIjpcIl0sbikpfSxlLnByb3RvdHlwZS5fX3B1c2hMb2NhbExvZz1mdW5jdGlvbih0LG4saSl7dmFyIHI7cj10aGlzLnR5cGU/dGhpcy50eXBlOltcIlJDUlRDTG9nXCIsXCJSQ0NhbGxcIixcIlJDUlRDXCIsXCJSVEMtQVwiXS5pbmNsdWRlcyh0aGlzLnRhZyk/Yi5SVEM6Yi5JTTt2YXIgcz1EYXRlLm5vdygpO1Yobik+PTFlMyYmKG49ZnVuY3Rpb24oZSx0LG4pe2lmKHZvaWQgMD09PW4mJihuPVwidXRmLThcIiksIWV8fCF0KXJldHVyblwiXCI7dmFyIGk9XCJ1dGYtOFwiPT09bj8zOjIscj0wLHM9MCxvPVwiXCI7Zm9yKHM9MDtzPGUubGVuZ3RoO3MrKyl7aWYoZS5jaGFyQ29kZUF0KHMpPjI1NT9yKz1pOnIrKyxyPnQpcmV0dXJuIG87bys9ZS5jaGFyQXQocyl9cmV0dXJuIGV9KG4sMWUzKSk7dmFyIG89SlNPTi5zdHJpbmdpZnkoe21lc3NhZ2U6bix1c2VySWQ6ZS51c2VySWR9KS5yZXBsYWNlKC9cIi9nLCdcIlwiJyksYT0vXltcXHddKy1bXFx3XSstW1xcd10rPy8udGVzdChpKT9pOih0aGlzLmluaXRpYXRvcnx8XCJMXCIpK1wiLVwiK2krXCItT1wiLHU9e3Nlc3Npb25JZDplLnNlc3Npb25JZCx0aW1lOnMsbGV2ZWw6NC10LGNvbnRlbnQ6ZS5zZXNzaW9uSWQrXCIsXCIrRGF0ZS5ub3coKStcIixcIityK1wiLFwiKyg0LXQpK1wiLFwiK2ErJyxcIicrbysnXCJcXG4nLHVzZXJJZDplLnVzZXJJZH07ZS5kYXRhYmFzZUxvZ0xpc3QucHVzaCh1KSwoZS5kYXRhYmFzZUxvZ0xpc3QubGVuZ3RoPj0xMDB8fHQ9PT1VLkZBVEFMKSYmdGhpcy5fX2luc2VydExvZ0ludG9EYXRhYmFzZSgpfSxlLnByb3RvdHlwZS5fX2luc2VydExvZ0ludG9EYXRhYmFzZT1mdW5jdGlvbigpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgdCxuLGk7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24ocil7c3dpdGNoKHIubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdD1BKFtdLGUuZGF0YWJhc2VMb2dMaXN0KSxlLmRhdGFiYXNlTG9nTGlzdD1bXSwobj1xLmdldEluc3RhbmNlKCkpP1s0LG4uYWRkTGlzdChCLHQpXTpbMywzXTtjYXNlIDE6cmV0dXJuIGk9ci5zZW50KCksWzQsbi5nZXRDb3VudChCLFwidGltZVwiKV07Y2FzZSAyOnJldHVybiByLnNlbnQoKT4xZTUmJm4ucmVtb3ZlRmlyc3REYXRhKEIsXCJ0aW1lXCIsMmUzKSxbMixpXTtjYXNlIDM6cmV0dXJuWzIsITFdfX0pKX0pKX0sZS5wcm90b3R5cGUuc2V0TG9nTGV2ZWw9ZnVuY3Rpb24oZSl7dGhpcy5fb3V0TGV2ZWw9XCJudW1iZXJcIiE9dHlwZW9mIGU/VS5XQVJOOmV9LGUucHJvdG90eXBlLnNldExvZ1N0ZG91dD1mdW5jdGlvbihlKXt0aGlzLl9sb2dTdGRvdXQ9ZX0sZS5wcm90b3R5cGUubG9nPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxuPTE7bjxhcmd1bWVudHMubGVuZ3RoO24rKyl0W24tMV09YXJndW1lbnRzW25dO2lmKGU+VS5ERUJVRyYmdGhpcy5fX3B1c2hMb2NhbExvZyhlLHQubWFwKGZlKS5qb2luKFwiIFwiKSx0aGlzLnRhZyksIShlPHRoaXMuX291dExldmVsKSl7dmFyIGk9KG5ldyBEYXRlKS50b0lTT1N0cmluZygpK1wiW1wiK3RoaXMudGFnK1wiXVtcIitVW2VdK1wiXVwiLHI9aStcIiAtIFwiK3QubWFwKGZlKS5qb2luKFwiIFwiKTt0aGlzLl9sb2dTdGRvdXQ/dGhpcy5fbG9nU3Rkb3V0KGUscik6dGhpcy5fc3Rkb3V0P3RoaXMuX3N0ZG91dChlLHIpOnRoaXMuX2RlZmF1bHRTdGRvdXQuYXBwbHkodGhpcyxBKFtlLGldLHQpKX19LGUucHJvdG90eXBlLnJlcG9ydExvZz1mdW5jdGlvbih0LG4saSl7dGhpcy5fX3B1c2hMb2NhbExvZyg0LXQsaSxuKTt2YXIgcj1KU09OLnN0cmluZ2lmeSh7bWVzc2FnZTppfSkucmVwbGFjZSgvXCIvZywnXCJcIicpO3I9J1wiJytyKydcIic7dmFyIHM9e2xldmVsOnQsY29udGVudDpbZS5zZXNzaW9uSWQsRGF0ZS5ub3coKSx0aGlzLnR5cGUsdCxuLHJdLmpvaW4oKStcIlxcblwifTtlLnJlYWxUaW1lTG9nTGlzdC5wdXNoKHMpLGUucmVhbFRpbWVMb2dMaXN0Lmxlbmd0aD49NjAwJiYoZS5yZWFsVGltZUxvZ0xpc3Q9ZS5yZWFsVGltZUxvZ0xpc3Quc2xpY2UoLTUwMCkpfSxlLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24oZSx0KXt0aGlzLndhcm4oXCJsb2dnZXIuc2V0IGhhcyBiZWluZyBkZXByZWNhdGVkIVwiKX0sZS5wcm90b3R5cGUuc2V0U3Rkb3V0PWZ1bmN0aW9uKGUpe3RoaXMuX3N0ZG91dD1lfSxlLnByb3RvdHlwZS5fX2NsZWFyUmVhbFRpbWVMb2c9ZnVuY3Rpb24oKXtlLnJlYWxUaW1lTG9nTGlzdD1bXX0sZS5kYXRhYmFzZUxvZ0xpc3Q9W10sZS5yZWFsVGltZUxvZ0xpc3Q9W10sZS5zZXNzaW9uSWQ9SCgpLGUudXNlcklkPVwiXCIsZX0oKSxnZT1uZXcgcGUoXCJSQ0xvZ1wiKSxfZT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLl9tYXA9e319cmV0dXJuIGUucHJvdG90eXBlLm9uPWZ1bmN0aW9uKGUsdCxuKXt2YXIgaT10aGlzLl9tYXBbZV18fCh0aGlzLl9tYXBbZV09W10pO2kuc29tZSgoZnVuY3Rpb24oZSl7cmV0dXJuIGUubGlzdGVuZXI9PT10JiZlLnRhcmdldD09PW59KSl8fGkucHVzaCh7bGlzdGVuZXI6dCx0YXJnZXQ6bn0pfSxlLnByb3RvdHlwZS5vbmNlPWZ1bmN0aW9uKGUsdCxuKXt2YXIgaT10aGlzLl9tYXBbZV18fCh0aGlzLl9tYXBbZV09W10pO2kuc29tZSgoZnVuY3Rpb24oZSl7cmV0dXJuIGUubGlzdGVuZXI9PT10JiZlLnRhcmdldD09PW59KSl8fGkucHVzaCh7bGlzdGVuZXI6dCx0YXJnZXQ6bixvbmNlOiEwfSl9LGUucHJvdG90eXBlLm9mZj1mdW5jdGlvbihlLHQsbil7dmFyIGk9dGhpcy5fbWFwW2VdO2kmJigoaT1pLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIGUubGlzdGVuZXIhPT10fHxlLnRhcmdldCE9PW59KSkpLmxlbmd0aD90aGlzLl9tYXBbZV09aTpkZWxldGUgdGhpcy5fbWFwW2VdKX0sZS5wcm90b3R5cGUuZW1pdD1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10sbj0xO248YXJndW1lbnRzLmxlbmd0aDtuKyspdFtuLTFdPWFyZ3VtZW50c1tuXTt2YXIgaT10aGlzLl9tYXBbZV07aWYoaSlmb3IodmFyIHI9aS5sZW5ndGgtMTtyPj0wO3ItPTEpe3ZhciBzPWlbcl0sbz1zLnRhcmdldCxhPXMub25jZSx1PXMubGlzdGVuZXI7YSYmaS5zcGxpY2UociwxKTt0cnl7dS5jYWxsLmFwcGx5KHUsQShbb10sdCkpfWNhdGNoKGUpe2dlLmVycm9yKGUpfX19LGUucHJvdG90eXBlLnJlbW92ZUFsbD1mdW5jdGlvbihlKXtkZWxldGUgdGhpcy5fbWFwW2VdfSxlLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe09iamVjdC5rZXlzKHRoaXMuX21hcCkuZm9yRWFjaCh0aGlzLnJlbW92ZUFsbCx0aGlzKX0sZX0oKTshZnVuY3Rpb24oZSl7ZVtlLlNFTkQ9MV09XCJTRU5EXCIsZVtlLlJFQ0VJVkU9Ml09XCJSRUNFSVZFXCJ9KGRlfHwoZGU9e30pKTt2YXIgeWUsbWU9ZGU7IWZ1bmN0aW9uKGUpe2VbZS5USU1FT1VUPS0xXT1cIlRJTUVPVVRcIixlW2UuVU5LTk9XTj0tMl09XCJVTktOT1dOXCIsZVtlLlBBUkFNRVRFUl9FUlJPUj0tM109XCJQQVJBTUVURVJfRVJST1JcIixlW2UuRVhUUkFfTUVUSE9EX1VOREVGSU5FRD0tNF09XCJFWFRSQV9NRVRIT0RfVU5ERUZJTkVEXCIsZVtlLk1BSU5fUFJPQ0VTU19FUlJPUj0tNV09XCJNQUlOX1BST0NFU1NfRVJST1JcIixlW2UuUEFSQU1FVEVSX0NIQU5HRUQ9LTZdPVwiUEFSQU1FVEVSX0NIQU5HRURcIixlW2UuU1VDQ0VTUz0wXT1cIlNVQ0NFU1NcIixlW2UuUkNfTVNHX1VOQVVUSE9SSVpFRD0yMDQwNl09XCJSQ19NU0dfVU5BVVRIT1JJWkVEXCIsZVtlLlJDX0RJU0NVU1NJT05fR1JPVVBfSURfSU5WQUxJRD0yMDQwN109XCJSQ19ESVNDVVNTSU9OX0dST1VQX0lEX0lOVkFMSURcIixlW2UuU0VORF9GUkVRVUVOQ1lfVE9PX0ZBU1Q9MjA2MDRdPVwiU0VORF9GUkVRVUVOQ1lfVE9PX0ZBU1RcIixlW2UuTk9UX0lOX0RJU0NVU1NJT049MjE0MDZdPVwiTk9UX0lOX0RJU0NVU1NJT05cIixlW2UuRk9SQklEREVOX0lOX0dST1VQPTIyNDA4XT1cIkZPUkJJRERFTl9JTl9HUk9VUFwiLGVbZS5SRUNBTExfTUVTU0FHRT0yNTEwMV09XCJSRUNBTExfTUVTU0FHRVwiLGVbZS5OT1RfSU5fR1JPVVA9MjI0MDZdPVwiTk9UX0lOX0dST1VQXCIsZVtlLk5PVF9JTl9DSEFUUk9PTT0yMzQwNl09XCJOT1RfSU5fQ0hBVFJPT01cIixlW2UuRk9SQklEREVOX0lOX0NIQVRST09NPTIzNDA4XT1cIkZPUkJJRERFTl9JTl9DSEFUUk9PTVwiLGVbZS5SQ19DSEFUUk9PTV9VU0VSX0tJQ0tFRD0yMzQwOV09XCJSQ19DSEFUUk9PTV9VU0VSX0tJQ0tFRFwiLGVbZS5SQ19DSEFUUk9PTV9OT1RfRVhJU1Q9MjM0MTBdPVwiUkNfQ0hBVFJPT01fTk9UX0VYSVNUXCIsZVtlLlJDX0NIQVRST09NX0lTX0ZVTEw9MjM0MTFdPVwiUkNfQ0hBVFJPT01fSVNfRlVMTFwiLGVbZS5SQ19DSEFUUk9PTV9QQVRBTUVURVJfSU5WQUxJRD0yMzQxMl09XCJSQ19DSEFUUk9PTV9QQVRBTUVURVJfSU5WQUxJRFwiLGVbZS5DSEFUUk9PTV9HRVRfSElTVE9SWU1TR19FUlJPUj0yMzQxM109XCJDSEFUUk9PTV9HRVRfSElTVE9SWU1TR19FUlJPUlwiLGVbZS5DSEFUUk9PTV9OT1RfT1BFTl9ISVNUT1JZTVNHX1NUT1JFPTIzNDE0XT1cIkNIQVRST09NX05PVF9PUEVOX0hJU1RPUllNU0dfU1RPUkVcIixlW2UuQ0hBVFJPT01fS1ZfRVhDRUVEPTIzNDIzXT1cIkNIQVRST09NX0tWX0VYQ0VFRFwiLGVbZS5DSEFUUk9PTV9LVl9PVkVSV1JJVEVfSU5WQUxJRD0yMzQyNF09XCJDSEFUUk9PTV9LVl9PVkVSV1JJVEVfSU5WQUxJRFwiLGVbZS5DSEFUUk9PTV9LVl9TVE9SRV9OT1RfT1BFTj0yMzQyNl09XCJDSEFUUk9PTV9LVl9TVE9SRV9OT1RfT1BFTlwiLGVbZS5DSEFUUk9PTV9LRVlfTk9UX0VYSVNUPTIzNDI3XT1cIkNIQVRST09NX0tFWV9OT1RfRVhJU1RcIixcbi8qIVxuICAgICDogYrlpKnlrqTorr7nva4gS1Yg5aSx6LSl77yM5Ye6546w5Zyo5Lik5Lq65oiW6ICF5aSa56uv5ZCM5pe25pON5L2c5LiA5LiqIGt244CCXG4gICAgIOWmguaenOWHuueOsOivpemUmeivr++8jOS4uumBv+WFjeWSjOWFtuS7luerr+WQjOaXtuaTjeS9nO+8jOivt+W7tuaXtuS4gOWumuaXtumXtOWGjeivlVxuICAgICovXG5lW2UuQ0hBVFJPT01fS1ZfU0VUX0VSUk9SPTIzNDMxXT1cIkNIQVRST09NX0tWX1NFVF9FUlJPUlwiLGVbZS5TRU5TSVRJVkVfU0hJRUxEPTIxNTAxXT1cIlNFTlNJVElWRV9TSElFTERcIixlW2UuU0VOU0lUSVZFX1JFUExBQ0U9MjE1MDJdPVwiU0VOU0lUSVZFX1JFUExBQ0VcIixlW2UuSk9JTl9JTl9ESVNDVVNTSU9OPTIxNDA3XT1cIkpPSU5fSU5fRElTQ1VTU0lPTlwiLGVbZS5DUkVBVEVfRElTQ1VTU0lPTj0yMTQwOF09XCJDUkVBVEVfRElTQ1VTU0lPTlwiLGVbZS5JTlZJVEVfRElDVVNTSU9OPTIxNDA5XT1cIklOVklURV9ESUNVU1NJT05cIixlW2UuR0VUX1VTRVJJTkZPX0VSUk9SPTIzNDA3XT1cIkdFVF9VU0VSSU5GT19FUlJPUlwiLGVbZS5SRUpFQ1RFRF9CWV9CTEFDS0xJU1Q9NDA1XT1cIlJFSkVDVEVEX0JZX0JMQUNLTElTVFwiLGVbZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEPTMwMDAxXT1cIlJDX05FVF9DSEFOTkVMX0lOVkFMSURcIixlW2UuUkNfTkVUX1VOQVZBSUxBQkxFPTMwMDAyXT1cIlJDX05FVF9VTkFWQUlMQUJMRVwiLGVbZS5SQ19NU0dfUkVTUF9USU1FT1VUPTMwMDAzXT1cIlJDX01TR19SRVNQX1RJTUVPVVRcIixlW2UuUkNfSFRUUF9TRU5EX0ZBSUw9MzAwMDRdPVwiUkNfSFRUUF9TRU5EX0ZBSUxcIixlW2UuUkNfSFRUUF9SRVFfVElNRU9VVD0zMDAwNV09XCJSQ19IVFRQX1JFUV9USU1FT1VUXCIsZVtlLlJDX0hUVFBfUkVDVl9GQUlMPTMwMDA2XT1cIlJDX0hUVFBfUkVDVl9GQUlMXCIsZVtlLlJDX05BVklfUkVTT1VSQ0VfRVJST1I9MzAwMDddPVwiUkNfTkFWSV9SRVNPVVJDRV9FUlJPUlwiLGVbZS5SQ19OT0RFX05PVF9GT1VORD0zMDAwOF09XCJSQ19OT0RFX05PVF9GT1VORFwiLGVbZS5SQ19ET01BSU5fTk9UX1JFU09MVkU9MzAwMDldPVwiUkNfRE9NQUlOX05PVF9SRVNPTFZFXCIsZVtlLlJDX1NPQ0tFVF9OT1RfQ1JFQVRFRD0zMDAxMF09XCJSQ19TT0NLRVRfTk9UX0NSRUFURURcIixlW2UuUkNfU09DS0VUX0RJU0NPTk5FQ1RFRD0zMDAxMV09XCJSQ19TT0NLRVRfRElTQ09OTkVDVEVEXCIsZVtlLlJDX1BJTkdfU0VORF9GQUlMPTMwMDEyXT1cIlJDX1BJTkdfU0VORF9GQUlMXCIsZVtlLlJDX1BPTkdfUkVDVl9GQUlMPTMwMDEzXT1cIlJDX1BPTkdfUkVDVl9GQUlMXCIsZVtlLlJDX01TR19TRU5EX0ZBSUw9MzAwMTRdPVwiUkNfTVNHX1NFTkRfRkFJTFwiLGVbZS5SQ19NU0dfQ09OVEVOVF9FWENFRURfTElNSVQ9MzAwMTZdPVwiUkNfTVNHX0NPTlRFTlRfRVhDRUVEX0xJTUlUXCIsZVtlLlJDX0NPTk5fQUNLX1RJTUVPVVQ9MzFlM109XCJSQ19DT05OX0FDS19USU1FT1VUXCIsZVtlLlJDX0NPTk5fUFJPVE9fVkVSU0lPTl9FUlJPUj0zMTAwMV09XCJSQ19DT05OX1BST1RPX1ZFUlNJT05fRVJST1JcIixlW2UuUkNfQ09OTl9JRF9SRUpFQ1Q9MzEwMDJdPVwiUkNfQ09OTl9JRF9SRUpFQ1RcIixlW2UuUkNfQ09OTl9TRVJWRVJfVU5BVkFJTEFCTEU9MzEwMDNdPVwiUkNfQ09OTl9TRVJWRVJfVU5BVkFJTEFCTEVcIixlW2UuUkNfQ09OTl9VU0VSX09SX1BBU1NXRF9FUlJPUj0zMTAwNF09XCJSQ19DT05OX1VTRVJfT1JfUEFTU1dEX0VSUk9SXCIsZVtlLlJDX0NPTk5fTk9UX0FVVEhST1JJWkVEPTMxMDA1XT1cIlJDX0NPTk5fTk9UX0FVVEhST1JJWkVEXCIsZVtlLlJDX0NPTk5fUkVESVJFQ1RFRD0zMTAwNl09XCJSQ19DT05OX1JFRElSRUNURURcIixlW2UuUkNfQ09OTl9QQUNLQUdFX05BTUVfSU5WQUxJRD0zMTAwN109XCJSQ19DT05OX1BBQ0tBR0VfTkFNRV9JTlZBTElEXCIsZVtlLlJDX0NPTk5fQVBQX0JMT0NLRURfT1JfREVMRVRFRD0zMTAwOF09XCJSQ19DT05OX0FQUF9CTE9DS0VEX09SX0RFTEVURURcIixlW2UuUkNfQ09OTl9VU0VSX0JMT0NLRUQ9MzEwMDldPVwiUkNfQ09OTl9VU0VSX0JMT0NLRURcIixlW2UuUkNfRElTQ09OTl9LSUNLPTMxMDEwXT1cIlJDX0RJU0NPTk5fS0lDS1wiLGVbZS5SQ19ESVNDT05OX0VYQ0VQVElPTj0zMTAxMV09XCJSQ19ESVNDT05OX0VYQ0VQVElPTlwiLGVbZS5SQ19BUFBfQVVUSF9OT1RfUEFTUz0zMTAyNl09XCJSQ19BUFBfQVVUSF9OT1RfUEFTU1wiLGVbZS5SQ19PVFBfVVNFRD0zMTAyN109XCJSQ19PVFBfVVNFRFwiLGVbZS5SQ19QTEFURk9STV9FUlJPUj0zMTAyOF09XCJSQ19QTEFURk9STV9FUlJPUlwiLGVbZS5SQ19RVUVSWV9BQ0tfTk9fREFUQT0zMjAwMV09XCJSQ19RVUVSWV9BQ0tfTk9fREFUQVwiLGVbZS5SQ19NU0dfREFUQV9JTkNPTVBMRVRFPTMyMDAyXT1cIlJDX01TR19EQVRBX0lOQ09NUExFVEVcIixlW2UuQklaX0VSUk9SX0NMSUVOVF9OT1RfSU5JVD0zMzAwMV09XCJCSVpfRVJST1JfQ0xJRU5UX05PVF9JTklUXCIsZVtlLkJJWl9FUlJPUl9EQVRBQkFTRV9FUlJPUj0zMzAwMl09XCJCSVpfRVJST1JfREFUQUJBU0VfRVJST1JcIixlW2UuQklaX0VSUk9SX0lOVkFMSURfUEFSQU1FVEVSPTMzMDAzXT1cIkJJWl9FUlJPUl9JTlZBTElEX1BBUkFNRVRFUlwiLGVbZS5CSVpfRVJST1JfTk9fQ0hBTk5FTD0zMzAwNF09XCJCSVpfRVJST1JfTk9fQ0hBTk5FTFwiLGVbZS5CSVpfRVJST1JfUkVDT05ORUNUX1NVQ0NFU1M9MzMwMDVdPVwiQklaX0VSUk9SX1JFQ09OTkVDVF9TVUNDRVNTXCIsZVtlLkJJWl9FUlJPUl9DT05ORUNUSU5HPTMzMDA2XT1cIkJJWl9FUlJPUl9DT05ORUNUSU5HXCIsZVtlLk1TR19ST0FNSU5HX1NFUlZJQ0VfVU5BVkFJTEFCTEU9MzMwMDddPVwiTVNHX1JPQU1JTkdfU0VSVklDRV9VTkFWQUlMQUJMRVwiLGVbZS5NU0dfSU5TRVJUX0VSUk9SPTMzMDA4XT1cIk1TR19JTlNFUlRfRVJST1JcIixlW2UuTVNHX0RFTF9FUlJPUj0zMzAwOV09XCJNU0dfREVMX0VSUk9SXCIsZVtlLlRBR19FWElTVFM9MzMxMDFdPVwiVEFHX0VYSVNUU1wiLGVbZS5UQUdfTk9UX0VYSVNUPTMzMTAwXT1cIlRBR19OT1RfRVhJU1RcIixlW2UuTk9fVEFHX0lOX0NPTlZFUj0zMzEwMl09XCJOT19UQUdfSU5fQ09OVkVSXCIsZVtlLkNPTlZFUl9SRU1PVkVfRVJST1I9MzQwMDFdPVwiQ09OVkVSX1JFTU9WRV9FUlJPUlwiLGVbZS5DT05WRVJfR0VUTElTVF9FUlJPUj0zNDAwMl09XCJDT05WRVJfR0VUTElTVF9FUlJPUlwiLGVbZS5DT05WRVJfU0VUT1BfRVJST1I9MzQwMDNdPVwiQ09OVkVSX1NFVE9QX0VSUk9SXCIsZVtlLkNPTlZFUl9UT1RBTF9VTlJFQURfRVJST1I9MzQwMDRdPVwiQ09OVkVSX1RPVEFMX1VOUkVBRF9FUlJPUlwiLGVbZS5DT05WRVJfVFlQRV9VTlJFQURfRVJST1I9MzQwMDVdPVwiQ09OVkVSX1RZUEVfVU5SRUFEX0VSUk9SXCIsZVtlLkNPTlZFUl9JRF9UWVBFX1VOUkVBRF9FUlJPUj0zNDAwNl09XCJDT05WRVJfSURfVFlQRV9VTlJFQURfRVJST1JcIixlW2UuQ09OVkVSX0NMRUFSX0VSUk9SPTM0MDA3XT1cIkNPTlZFUl9DTEVBUl9FUlJPUlwiLGVbZS5FWFBBTlNJT05fTElNSVRfRVhDRUVUPTM0MDEwXT1cIkVYUEFOU0lPTl9MSU1JVF9FWENFRVRcIixlW2UuTUVTU0FHRV9LVl9OT1RfU1VQUE9SVD0zNDAwOF09XCJNRVNTQUdFX0tWX05PVF9TVVBQT1JUXCIsZVtlLkNMRUFSX0hJU19USU1FX0VSUk9SPTM0MDExXT1cIkNMRUFSX0hJU19USU1FX0VSUk9SXCIsZVtlLkNPTlZFUl9PVVRfTElNSVRfRVJST1I9MzQwMTNdPVwiQ09OVkVSX09VVF9MSU1JVF9FUlJPUlwiLGVbZS5DT05WRVJfR0VUX0VSUk9SPTM1MDIxXT1cIkNPTlZFUl9HRVRfRVJST1JcIixlW2UuR1JPVVBfU1lOQ19FUlJPUj0zNTAwMV09XCJHUk9VUF9TWU5DX0VSUk9SXCIsZVtlLkdST1VQX01BVENIX0VSUk9SPTM1MDAyXT1cIkdST1VQX01BVENIX0VSUk9SXCIsZVtlLlJFQURfUkVDRUlQVF9FUlJPUj0zNTAwM109XCJSRUFEX1JFQ0VJUFRfRVJST1JcIixlW2UuUEFDS0FHRV9FTlZJUk9OTUVOVF9FUlJPUj0zNTAwNl09XCJQQUNLQUdFX0VOVklST05NRU5UX0VSUk9SXCIsZVtlLkNBTl9OT1RfUkVDT05ORUNUPTM1MDA3XT1cIkNBTl9OT1RfUkVDT05ORUNUXCIsZVtlLlNFUlZFUl9VTkFWQUlMQUJMRT0zNTAwOF09XCJTRVJWRVJfVU5BVkFJTEFCTEVcIixlW2UuSE9TVE5BTUVfRVJST1I9MzUwMDldPVwiSE9TVE5BTUVfRVJST1JcIixlW2UuSEFTX09IVEVSX1NBTUVfQ0xJRU5UX09OX0xJTkU9MzUwMTBdPVwiSEFTX09IVEVSX1NBTUVfQ0xJRU5UX09OX0xJTkVcIixlW2UuTUVUSE9EX05PVF9BVkFJTEFCTEU9MzUwMTFdPVwiTUVUSE9EX05PVF9BVkFJTEFCTEVcIixlW2UuTUVUSE9EX05PVF9TVVBQT1JUPTM1MDEyXT1cIk1FVEhPRF9OT1RfU1VQUE9SVFwiLGVbZS5NU0dfTElNSVRfRVJST1I9MzUwMTNdPVwiTVNHX0xJTUlUX0VSUk9SXCIsZVtlLk1FVEhPRF9PTkxZX1NVUFBPUlRfVUxUUkFfR1JPVVA9MzUwMTRdPVwiTUVUSE9EX09OTFlfU1VQUE9SVF9VTFRSQV9HUk9VUFwiLGVbZS5VUExPQURfRklMRV9GQUlMRUQ9MzUwMjBdPVwiVVBMT0FEX0ZJTEVfRkFJTEVEXCIsZVtlLkNIQVRST09NX0lEX0lTTlVMTD0zNjAwMV09XCJDSEFUUk9PTV9JRF9JU05VTExcIixlW2UuQ0hBUlRPT01fSk9JTl9FUlJPUj0zNjAwMl09XCJDSEFSVE9PTV9KT0lOX0VSUk9SXCIsZVtlLkNIQVRST09NX0hJU01FU1NBR0VfRVJST1I9MzYwMDNdPVwiQ0hBVFJPT01fSElTTUVTU0FHRV9FUlJPUlwiLGVbZS5DSEFUUk9PTV9LVl9OT1RfRk9VTkQ9MzYwMDRdPVwiQ0hBVFJPT01fS1ZfTk9UX0ZPVU5EXCIsZVtlLkJMQUNLX0FERF9FUlJPUj0zNzAwMV09XCJCTEFDS19BRERfRVJST1JcIixlW2UuQkxBQ0tfR0VUU1RBVFVTX0VSUk9SPTM3MDAyXT1cIkJMQUNLX0dFVFNUQVRVU19FUlJPUlwiLGVbZS5CTEFDS19SRU1PVkVfRVJST1I9MzcwMDNdPVwiQkxBQ0tfUkVNT1ZFX0VSUk9SXCIsZVtlLkRSQUZfR0VUX0VSUk9SPTM4MDAxXT1cIkRSQUZfR0VUX0VSUk9SXCIsZVtlLkRSQUZfU0FWRV9FUlJPUj0zODAwMl09XCJEUkFGX1NBVkVfRVJST1JcIixlW2UuRFJBRl9SRU1PVkVfRVJST1I9MzgwMDNdPVwiRFJBRl9SRU1PVkVfRVJST1JcIixlW2UuU1VCU0NSSUJFX0VSUk9SPTM5MDAxXT1cIlNVQlNDUklCRV9FUlJPUlwiLGVbZS5OT1RfU1VQUE9SVD0zOTAwMl09XCJOT1RfU1VQUE9SVFwiLGVbZS5RTlRLTl9GSUxFVFlQRV9FUlJPUj00MTAwMV09XCJRTlRLTl9GSUxFVFlQRV9FUlJPUlwiLGVbZS5RTlRLTl9HRVRfRVJST1I9NDEwMDJdPVwiUU5US05fR0VUX0VSUk9SXCIsZVtlLkNPT0tJRV9FTkFCTEU9NTEwMDFdPVwiQ09PS0lFX0VOQUJMRVwiLGVbZS5HRVRfTUVTU0FHRV9CWV9JRF9FUlJPUj02MTAwMV09XCJHRVRfTUVTU0FHRV9CWV9JRF9FUlJPUlwiLGVbZS5IQVZOT0RFVklDRUlEPTI0MDAxXT1cIkhBVk5PREVWSUNFSURcIixlW2UuREVWSUNFSURJU0hBVkU9MjQwMDJdPVwiREVWSUNFSURJU0hBVkVcIixlW2UuRkVJTEQ9MjQwMDldPVwiRkVJTERcIixlW2UuVk9JUElTTlVMTD0yNDAxM109XCJWT0lQSVNOVUxMXCIsZVtlLk5PRU5HSU5FVFlQRT0yNDAxMF09XCJOT0VOR0lORVRZUEVcIixlW2UuTlVMTENIQU5ORUxOQU1FPTI0MDExXT1cIk5VTExDSEFOTkVMTkFNRVwiLGVbZS5WT0lQRFlBTk1JQ0VSUk9SPTI0MDEyXT1cIlZPSVBEWUFOTUlDRVJST1JcIixlW2UuTk9WT0lQPTI0MDE0XT1cIk5PVk9JUFwiLGVbZS5JTlRFUk5BTEVSUlJPUj0yNDAxNV09XCJJTlRFUk5BTEVSUlJPUlwiLGVbZS5WT0lQQ0xPU0U9MjQwMTZdPVwiVk9JUENMT1NFXCIsZVtlLkNMT1NFX0JFRk9SRV9PUEVOPTUxMDAxXT1cIkNMT1NFX0JFRk9SRV9PUEVOXCIsZVtlLkFMUkVBRFlfSU5fVVNFPTUxMDAyXT1cIkFMUkVBRFlfSU5fVVNFXCIsZVtlLklOVkFMSURfQ0hBTk5FTF9OQU1FPTUxMDAzXT1cIklOVkFMSURfQ0hBTk5FTF9OQU1FXCIsZVtlLlZJREVPX0NPTlRBSU5FUl9JU19OVUxMPTUxMDA0XT1cIlZJREVPX0NPTlRBSU5FUl9JU19OVUxMXCIsZVtlLkRFTEVURV9NRVNTQUdFX0lEX0lTX05VTEw9NjEwMDFdPVwiREVMRVRFX01FU1NBR0VfSURfSVNfTlVMTFwiLGVbZS5DQU5DRUw9MV09XCJDQU5DRUxcIixlW2UuUkVKRUNUPTJdPVwiUkVKRUNUXCIsZVtlLkhBTkdVUD0zXT1cIkhBTkdVUFwiLGVbZS5CVVNZTElORT00XT1cIkJVU1lMSU5FXCIsZVtlLk5PX1JFU1BPTlNFPTVdPVwiTk9fUkVTUE9OU0VcIixlW2UuRU5HSU5FX1VOX1NVUFBPUlRFRD02XT1cIkVOR0lORV9VTl9TVVBQT1JURURcIixlW2UuTkVUV09SS19FUlJPUj03XT1cIk5FVFdPUktfRVJST1JcIixlW2UuUkVNT1RFX0NBTkNFTD0xMV09XCJSRU1PVEVfQ0FOQ0VMXCIsZVtlLlJFTU9URV9SRUpFQ1Q9MTJdPVwiUkVNT1RFX1JFSkVDVFwiLGVbZS5SRU1PVEVfSEFOR1VQPTEzXT1cIlJFTU9URV9IQU5HVVBcIixlW2UuUkVNT1RFX0JVU1lMSU5FPTE0XT1cIlJFTU9URV9CVVNZTElORVwiLGVbZS5SRU1PVEVfTk9fUkVTUE9OU0U9MTVdPVwiUkVNT1RFX05PX1JFU1BPTlNFXCIsZVtlLlJFTU9URV9FTkdJTkVfVU5fU1VQUE9SVEVEPTE2XT1cIlJFTU9URV9FTkdJTkVfVU5fU1VQUE9SVEVEXCIsZVtlLlJFTU9URV9ORVRXT1JLX0VSUk9SPTE3XT1cIlJFTU9URV9ORVRXT1JLX0VSUk9SXCIsZVtlLlZPSVBfTk9UX0FWQUxJQUJMRT0xOF09XCJWT0lQX05PVF9BVkFMSUFCTEVcIixlW2UuQ0hBVFJPT01fS1ZfU1RPUkVfTk9UX0FMTF9TVUNDRVNTPTIzNDI4XT1cIkNIQVRST09NX0tWX1NUT1JFX05PVF9BTExfU1VDQ0VTU1wiLGVbZS5DSEFUUk9PTV9LVl9TVE9SRV9PVVRfTElNSVQ9MjM0MjldPVwiQ0hBVFJPT01fS1ZfU1RPUkVfT1VUX0xJTUlUXCJ9KHllfHwoeWU9e30pKTt2YXIgdmUsRWU9eWU7IWZ1bmN0aW9uKGUpe2VbZS5DT05ORUNURUQ9MF09XCJDT05ORUNURURcIixlW2UuQ09OTkVDVElORz0xXT1cIkNPTk5FQ1RJTkdcIixlW2UuRElTQ09OTkVDVEVEPTJdPVwiRElTQ09OTkVDVEVEXCIsZVtlLk5FVFdPUktfVU5BVkFJTEFCTEU9M109XCJORVRXT1JLX1VOQVZBSUxBQkxFXCIsZVtlLkNPTk5FQ1RJT05fQ0xPU0VEPTRdPVwiQ09OTkVDVElPTl9DTE9TRURcIixlW2UuS0lDS0VEX09GRkxJTkVfQllfT1RIRVJfQ0xJRU5UPTZdPVwiS0lDS0VEX09GRkxJTkVfQllfT1RIRVJfQ0xJRU5UXCIsZVtlLldFQlNPQ0tFVF9VTkFWQUlMQUJMRT03XT1cIldFQlNPQ0tFVF9VTkFWQUlMQUJMRVwiLGVbZS5XRUJTT0NLRVRfRVJST1I9OF09XCJXRUJTT0NLRVRfRVJST1JcIixlW2UuQkxPQ0tFRD05XT1cIkJMT0NLRURcIixlW2UuRE9NQUlOX0lOQ09SUkVDVD0xMl09XCJET01BSU5fSU5DT1JSRUNUXCIsZVtlLkRJU0NPTk5FQ1RfQllfU0VSVkVSPTEzXT1cIkRJU0NPTk5FQ1RfQllfU0VSVkVSXCIsZVtlLlJFRElSRUNUPTE0XT1cIlJFRElSRUNUXCIsZVtlLkFQUEtFWV9JU19GQUtFPTIwXT1cIkFQUEtFWV9JU19GQUtFXCIsZVtlLlVMVFJBTElNSVQ9MTEwMV09XCJVTFRSQUxJTUlUXCIsZVtlLlJFUVVFU1RfTkFWST0yMDFdPVwiUkVRVUVTVF9OQVZJXCIsZVtlLlJFU1BPTlNFX05BVkk9MjAyXT1cIlJFU1BPTlNFX05BVklcIixlW2UuUkVTUE9OU0VfTkFWSV9FUlJPUj0yMDNdPVwiUkVTUE9OU0VfTkFWSV9FUlJPUlwiLGVbZS5SRVNQT05TRV9OQVZJX1RJTUVPVVQ9MjA0XT1cIlJFU1BPTlNFX05BVklfVElNRU9VVFwifSh2ZXx8KHZlPXt9KSk7dmFyIFRlLEllPXZlLENlPXtBQ0NFUFRFRDowLFVOQUNDRVBUQUJMRV9QUk9UT0NPTF9WRVJTSU9OOjEsSURFTlRJRklFUl9SRUpFQ1RFRDoyLFNFUlZFUl9VTkFWQUlMQUJMRTozLFRPS0VOX0lOQ09SUkVDVDo0LE5PVF9BVVRIT1JJWkVEOjUsUkVESVJFQ1Q6NixQQUNLQUdFX0VSUk9SOjcsQVBQX0JMT0NLX09SX0RFTEVURTo4LEJMT0NLOjksVE9LRU5fRVhQSVJFOjEwLERFVklDRV9FUlJPUjoxMSxIT1NUTkFNRV9FUlJPUjoxMixIQVNPSFRFUlNBTUVDTElFTlRPTkxJTkU6MTMsSU5fT1RIRVJfQ0xVU1RFUjoxNSxBUFBfQVVUSF9OT1RfUEFTUzoxNixPVFBfVVNFRDoxNyxQTEFURk9STV9FUlJPUjoxOH07IWZ1bmN0aW9uKGUpe2UuVGV4dE1lc3NhZ2U9XCJSQzpUeHRNc2dcIixlLlZPSUNFPVwiUkM6VmNNc2dcIixlLkhRX1ZPSUNFPVwiUkM6SFFWQ01zZ1wiLGUuSU1BR0U9XCJSQzpJbWdNc2dcIixlLkdJRj1cIlJDOkdJRk1zZ1wiLGUuUklDSF9DT05URU5UPVwiUkM6SW1nVGV4dE1zZ1wiLGUuTE9DQVRJT049XCJSQzpMQlNNc2dcIixlLkZJTEU9XCJSQzpGaWxlTXNnXCIsZS5TSUdIVD1cIlJDOlNpZ2h0TXNnXCIsZS5DT01CSU5FPVwiUkM6Q29tYmluZU1zZ1wiLGUuQ0hSTV9LVl9OT1RJRlk9XCJSQzpjaHJtS1ZOb3RpTXNnXCIsZS5MT0dfQ09NTUFORD1cIlJDOkxvZ0NtZE1zZ1wiLGUuRVhQQU5TSU9OX05PVElGWT1cIlJDOk1zZ0V4TXNnXCIsZS5SRUZFUkVOQ0U9XCJSQzpSZWZlcmVuY2VNc2dcIixlLlJFQ0FMTD1cIlJDOlJjQ21kXCIsZS5SRUFEX1JFQ0VJUFQ9XCJSQzpSZWFkTnRmXCIsZS5SRUFEX1JFQ0VJUFRfUkVRVUVTVD1cIlJDOlJSUmVxTXNnXCIsZS5SRUFEX1JFQ0VJUFRfUkVTUE9OU0U9XCJSQzpSUlJzcE1zZ1wiLGUuU1lOQ19SRUFEX1NUQVRVUz1cIlJDOlNSU01zZ1wiLGUuR1JPVVBfUkVBRF9SRUNFSVBUX1JFUVVFU1Q9XCJSQzpSUk1zZ1wiLGUuQ0hBVFJPT01fSk9JTj1cIlJDOkNocm1Kb2luTnRmXCIsZS5DSEFUUk9PTV9MRUZUPVwiUkM6Q2hybVF1aXROdGZcIixlLkNIQVRST09NX01FUkdFX0NIQU5HRT1cIlJDOkNocm1NZW1DaGFuZ2VcIixlLlRZUElOR19TVEFUVVM9XCJSQzpUeXBTdHNcIixlLklOVEVSQ0VQVD1cIlJDOkludGVyY2VwdE1zZ1wifShUZXx8KFRlPXt9KSk7dmFyIFJlLFNlPVRlOyFmdW5jdGlvbihlKXtlW2UuT1BFTj0xXT1cIk9QRU5cIixlW2UuQ0xPU0U9Ml09XCJDTE9TRVwifShSZXx8KFJlPXt9KSk7dmFyIE5lLE9lPVJlOyFmdW5jdGlvbihlKXtlW2UuQUxMPTFdPVwiQUxMXCIsZVtlLlNJTkdBTD0yXT1cIlNJTkdBTFwifShOZXx8KE5lPXt9KSk7dmFyIE1lLHdlPU5lOyFmdW5jdGlvbihlKXtlW2UuUUlOSVU9MV09XCJRSU5JVVwiLGVbZS5BTEk9Ml09XCJBTElcIixlW2UuQVdTPTNdPVwiQVdTXCIsZVtlLlNUQz00XT1cIlNUQ1wifShNZXx8KE1lPXt9KSk7dmFyIEFlLFVlPU1lOyFmdW5jdGlvbihlKXtlW2UuVVBEQVRFPTFdPVwiVVBEQVRFXCIsZVtlLkRFTEVURT0yXT1cIkRFTEVURVwifShBZXx8KEFlPXt9KSk7dmFyIGJlLExlPUFlOyFmdW5jdGlvbihlKXtlW2UuUVVJVD0wXT1cIlFVSVRcIixlW2UuSk9JTj0xXT1cIkpPSU5cIn0oYmV8fChiZT17fSkpO3ZhciBQZSxEZT1iZTshZnVuY3Rpb24oZSl7XG4vKiFcbiAgICDlhajlsYDmlY/mhJ/or43vvJrlkb3kuK3kuobono3kupHlhoXnva7nmoTlhajlsYDmlY/mhJ/or41cbiAgICovXG5lW2UuR0xPQkFMPTFdPVwiR0xPQkFMXCIsXG4vKiFcbiAgICAg6Ieq5a6a5LmJ5pWP5oSf6K+N5oum5oiq77ya5ZG95Lit5LqG5a6i5oi35Zyo6J6N5LqR6Ieq5a6a5LmJ55qE5pWP5oSf6K+NXG4gICAgKi9cbmVbZS5DVVNUT009Ml09XCJDVVNUT01cIixcbi8qIVxuICAgICDnrKzkuInmlrnlrqHmoLjmi6bmiKrvvJrlkb3kuK3kuobnrKzkuInmlrnvvIjmlbDnvo7vvInmiJbmqKHmnb/ot6/nlLHlhrPlrprkuI3kuIvlj5HnmoTnirbmgIFcbiAgICAqL1xuZVtlLlRISVJEX1BBUlRZPTNdPVwiVEhJUkRfUEFSVFlcIn0oUGV8fChQZT17fSkpO3ZhciBWZSxrZT1QZTshZnVuY3Rpb24oZSl7ZVtlLnR5cGluZz0wXT1cInR5cGluZ1wifShWZXx8KFZlPXt9KSk7dmFyIHhlLEJlLEdlLEZlPVZlOyFmdW5jdGlvbihlKXtlW2UuUlRDPTBdPVwiUlRDXCIsZVtlLkxJVkU9Ml09XCJMSVZFXCJ9KHhlfHwoeGU9e30pKSxmdW5jdGlvbihlKXtlW2UuQVVESU9fQU5EX1ZJREVPPTBdPVwiQVVESU9fQU5EX1ZJREVPXCIsZVtlLkFVRElPPTFdPVwiQVVESU9cIn0oQmV8fChCZT17fSkpLGZ1bmN0aW9uKGUpe2VbZS5BTkNIT1I9MV09XCJBTkNIT1JcIixlW2UuQVVESUVOQ0U9Ml09XCJBVURJRU5DRVwifShHZXx8KEdlPXt9KSk7dmFyIHFlLEtlLEhlLFllPXtcIlJDOlZDQWNjZXB0XCI6XCJSQzpWQ0FjY2VwdFwiLFwiUkM6VkNSaW5naW5nXCI6XCJSQzpWQ1JpbmdpbmdcIixcIlJDOlZDU3VtbWFyeVwiOlwiUkM6VkNTdW1tYXJ5XCIsXCJSQzpWQ0hhbmd1cFwiOlwiUkM6VkNIYW5ndXBcIixcIlJDOlZDSW52aXRlXCI6XCJSQzpWQ0ludml0ZVwiLFwiUkM6VkNNb2RpZnlNZWRpYVwiOlwiUkM6VkNNb2RpZnlNZWRpYVwiLFwiUkM6VkNNb2RpZnlNZW1cIjpcIlJDOlZDTW9kaWZ5TWVtXCJ9OyFmdW5jdGlvbihlKXtlW2UuUk9PTT0xXT1cIlJPT01cIixlW2UuUEVSU09OPTJdPVwiUEVSU09OXCJ9KHFlfHwocWU9e30pKSxmdW5jdGlvbihlKXtlW2UuQW5jaG9yVG9WaWV3ZXI9MV09XCJBbmNob3JUb1ZpZXdlclwiLGVbZS5WaWV3ZXJUb0FuY2hvcj0yXT1cIlZpZXdlclRvQW5jaG9yXCJ9KEtlfHwoS2U9e30pKSxmdW5jdGlvbihlKXtlW2UuS0lDSz0wXT1cIktJQ0tcIixlW2UuUkVGVVNFPTFdPVwiUkVGVVNFXCIsZVtlLkNPRVhJU1Q9Ml09XCJDT0VYSVNUXCJ9KEhlfHwoSGU9e30pKTt2YXIgamU9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdyYmd2luZG93Pyh3aW5kb3cuX19SQ1ZlcnNpb25JbmZvfHwod2luZG93Ll9fUkNWZXJzaW9uSW5mbz17fSksd2luZG93Ll9fUkNWZXJzaW9uSW5mbyk6e307amUuZW5naW5lPVwiNS4yLjFcIjt2YXIgUWUsV2UsSmU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBlLmFkZD1mdW5jdGlvbihlLHQpe2plW2VdPXR9LGUudmFsaWRFbmdpbmU9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5tYXRjaCgvXFxkK1xcLlxcZCtcXC5cXGQrLyk7aWYoIXQpcmV0dXJuIGdlLndhcm4oXCJUaGUgdmFsaWRhdGlvbiBlbmdpbmUgdmVyc2lvbiAnXCIrZStcIicgaXMgaW52YWxpZCFcIiksITE7dmFyIG49dFswXS5zcGxpdChcIi5cIikubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gZS5wYWRTdGFydCgzLFwiMFwiKX0pKS5qb2luKFwiXCIpO3JldHVybiBqZS5lbmdpbmUubWF0Y2goL1xcZCtcXC5cXGQrXFwuXFxkKy8pWzBdLnNwbGl0KFwiLlwiKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlLnBhZFN0YXJ0KDMsXCIwXCIpfSkpLmpvaW4oXCJcIik+PW59LGUuZ2V0SW5mbz1mdW5jdGlvbigpe3JldHVybiBqZX0sZX0oKTshZnVuY3Rpb24oZSl7ZVtlLlNUUklORz0wXT1cIlNUUklOR1wiLGVbZS5PTkxZX1NUUklORz0xXT1cIk9OTFlfU1RSSU5HXCIsZVtlLk5VTUJFUj0yXT1cIk5VTUJFUlwiLGVbZS5CT09MRUFOPTNdPVwiQk9PTEVBTlwiLGVbZS5PQkpFQ1Q9NF09XCJPQkpFQ1RcIixlW2UuQVJSQVk9NV09XCJBUlJBWVwiLGVbZS5DQUxMQkFDSz02XT1cIkNBTExCQUNLXCIsZVtlLkNIQU5ORUxfSUQ9N109XCJDSEFOTkVMX0lEXCJ9KFdlfHwoV2U9e30pKTt2YXIgemUsWmUsWGUsJGUsZXQsdHQ9KChRZT17fSlbV2UuU1RSSU5HXT1lZSxRZVtXZS5PTkxZX1NUUklOR109SixRZVtXZS5OVU1CRVJdPVosUWVbV2UuQk9PTEVBTl09ZnVuY3Rpb24oZSl7cmV0dXJuXCJib29sZWFuXCI9PXR5cGVvZiBlfSxRZVtXZS5PQkpFQ1RdPW5lLFFlW1dlLkFSUkFZXT1YLFFlW1dlLkNBTExCQUNLXT1mdW5jdGlvbihlKXt2YXIgdD0hMDtyZXR1cm4gbmUoZSl8fCh0PSExKSwoZT1lfHx7fSkub25TdWNjZXNzJiYhaWUoZS5vblN1Y2Nlc3MpJiYodD0hMSksZS5vbkVycm9yJiYhaWUoZS5vbkVycm9yKSYmKHQ9ITEpLHR9LFFlW1dlLkNIQU5ORUxfSURdPWZ1bmN0aW9uKGUpe3ZhciB0PSExO3JldHVybiBKKGUpJiYhL18vZy50ZXN0KGUpJiZlLmxlbmd0aDw9MjAmJih0PSEwKSx0fSxRZSksbnQ9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0KXt2YXIgbj1lLmNhbGwodGhpcyx0KXx8dGhpcztyZXR1cm4gbi5uYW1lPVwiUkNBc3NlcnRFcnJvclwiLG59cmV0dXJuIE4odCxlKSx0fShFcnJvciksaXQ9ZnVuY3Rpb24oZSx0LG4saSl7aWYodm9pZCAwPT09aSYmKGk9ITEpLCFydChlLHQsbixpKSl0aHJvdyBuZXcgbnQoXCInXCIrZStcIicgaXMgaW52YWxpZDogXCIrSlNPTi5zdHJpbmdpZnkodCkpfSxydD1mdW5jdGlvbihlLHQsbixpKXt2b2lkIDA9PT1pJiYoaT0hMSksbj10dFtuXXx8bjt2YXIgcj1pJiYhbih0KXx8IWkmJiEocmUodCl8fG51bGw9PT10fHxuKHQpKTtyZXR1cm4gciYmZ2UuZXJyb3IoXCInXCIrZStcIicgaXMgaW52YWxpZDogXCIrSlNPTi5zdHJpbmdpZnkodCkpLCFyfSxzdD1mdW5jdGlvbihlKXtpZighbmUoZSl8fHZvaWQgMD09PWUubG93fHx2b2lkIDA9PT1lLmhpZ2gpcmV0dXJuIGU7dmFyIHQ9ZS5sb3c7cmV0dXJuIHQ8MCYmKHQrPTQyOTQ5NjcyOTYpLHQ9dC50b1N0cmluZygxNikscGFyc2VJbnQoZS5oaWdoLnRvU3RyaW5nKDE2KStcIjAwMDAwMDAwXCIucmVwbGFjZShuZXcgUmVnRXhwKFwiMHtcIit0Lmxlbmd0aCtcIn0kXCIpLHQpLDE2KX0sb3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbj1NYXRoLmZsb29yKDFlMypNYXRoLnJhbmRvbSgpJTFlNCksaT1LKCkscj1mdW5jdGlvbihlKXtlPWV8fFwiLVwiO3ZhciB0PW5ldyBEYXRlO3JldHVyblwiXCIrdC5nZXRGdWxsWWVhcigpK2UrKHQuZ2V0TW9udGgoKSsxKStlK3QuZ2V0RGF0ZSgpfSgpLHM9KG5ldyBEYXRlKS5nZXRUaW1lKCksbz1cIlwiO2lmKHQpe3ZhciBhPXQuc3BsaXQoXCIuXCIpO289XCIuXCIrYVthLmxlbmd0aC0xXX1yZXR1cm4gZStcIl9fUkMtXCIrcitcIl9cIituK1wiX1wiK3MraStvfSxhdD1mdW5jdGlvbihlKXt2YXIgdD1cImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbVwiO3N3aXRjaChlKXtjYXNlIFcuSU1BR0U6dD1cImltYWdlL2pwZWdcIjticmVhaztjYXNlIFcuQVVESU86dD1cImF1ZGlvL2FtclwiO2JyZWFrO2Nhc2UgVy5WSURFTzp0PVwidmlkZW8vM2dwcFwiO2JyZWFrO2Nhc2UgVy5TSUdIVDp0PVwidmlkZW8vbXBlZzRcIjticmVhaztjYXNlIFcuQ09NQklORV9IVE1MOnQ9XCJ0ZXh0L2h0bWxcIn1yZXR1cm4gdH0sdXQ9ZnVuY3Rpb24oZSx0KXt2b2lkIDA9PT1lJiYoZT17fSksdm9pZCAwPT09dCYmKHQ9e30pO3ZhciBuPWUudGhyZWFkSWQsaT1lLmFwbnNDb2xsYXBzZUlkLHI9ZS5jYXRlZ29yeSxzPWUucmljaE1lZGlhVXJpLG89dC5jaGFubmVsSWRNaSxhPXQuY2hhbm5lbElkSFcsdT10LmNoYW5uZWxJZE9QUE8sYz10LnR5cGVWaXZvLGg9dC5nb29nbGVDb25maWcsbD17fTtsW1widGhyZWFkLWlkXCJdPW58fFwiXCIsbFtcImFwbnMtY29sbGFwc2UtaWRcIl09aXx8XCJcIixsLmNhdGVnb3J5PXJ8fFwiXCIsbC5yaWNoTWVkaWFVcmk9c3x8XCJcIjt2YXIgZD17fTtkLmNvbGxhcHNlX2tleT1udWxsPT1oP3ZvaWQgMDpoLmNvbGxhcHNlS2V5LGQuaW1hZ2VVcmw9bnVsbD09aD92b2lkIDA6aC5pbWFnZVVybDt2YXIgZj1udWxsPT1oP3ZvaWQgMDpoLnByaW9yaXR5O2YmJiFbXCJoaWdoXCIsXCJub3JtYWxcIl0uaW5jbHVkZXMoZikmJihmPVwibm9ybWFsXCIpLGQucHJpb3JpdHk9Zjt2YXIgcD1be0hXOntjaGFubmVsSWQ6YXx8XCJcIn19LHtNSTp7Y2hhbm5lbElkOm98fFwiXCJ9fSx7T1BQTzp7Y2hhbm5lbElkOnV8fFwiXCJ9fSx7VklWTzp7Y2xhc3NpZmljYXRpb246Y3x8XCJcIn19LHtBUE5TOmx9LHtGQ006ZH1dO3JldHVybiBKU09OLnN0cmluZ2lmeShwKX0sY3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbj17fSxpPXtub3RpZmljYXRpb25JZDp0fHxcIlwifTtpZighZSlyZXR1cm57aU9TQ29uZmlnOm4sYW5kcm9pZENvbmZpZzppfTt0cnl7dmFyIHI9SlNPTi5wYXJzZShlKTtudWxsPT1yfHxyLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0LHIscyxvLGE9T2JqZWN0LmtleXMoZSk7aWYoMCE9PWEubGVuZ3RoKXt2YXIgdT1hWzBdO3N3aXRjaCh1KXtjYXNlXCJIV1wiOnJldHVybiB2b2lkKGkuY2hhbm5lbElkSFc9bnVsbD09PSh0PWVbdV0pfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmNoYW5uZWxJZCk7Y2FzZVwiTUlcIjpyZXR1cm4gdm9pZChpLmNoYW5uZWxJZE1pPW51bGw9PT0ocj1lW3VdKXx8dm9pZCAwPT09cj92b2lkIDA6ci5jaGFubmVsSWQpO2Nhc2VcIk9QUE9cIjpyZXR1cm4gdm9pZChpLmNoYW5uZWxJZE9QUE89bnVsbD09PShzPWVbdV0pfHx2b2lkIDA9PT1zP3ZvaWQgMDpzLmNoYW5uZWxJZCk7Y2FzZVwiVklWT1wiOnJldHVybiB2b2lkKGkudHlwZVZpdm89bnVsbD09PShvPWVbdV0pfHx2b2lkIDA9PT1vP3ZvaWQgMDpvLmNsYXNzaWZpY2F0aW9uKTtjYXNlXCJBUE5TXCI6cmV0dXJuIG4udGhyZWFkSWQ9ZVt1XVtcInRocmVhZC1pZFwiXSxuLmFwbnNDb2xsYXBzZUlkPWVbdV1bXCJhcG5zLWNvbGxhcHNlLWlkXCJdLG4uY2F0ZWdvcnk9ZVt1XS5jYXRlZ29yeSx2b2lkKG4ucmljaE1lZGlhVXJpPWVbdV0ucmljaE1lZGlhVXJpKTtjYXNlXCJGQ01cIjppLmdvb2dsZUNvbmZpZz17Y29sbGFwc2VLZXk6ZVt1XS5jb2xsYXBzZV9rZXl8fFwiXCIsaW1hZ2VVcmw6ZVt1XS5pbWFnZVVybHx8XCJcIixwcmlvcml0eTplW3VdLnByaW9yaXR5fHxcIlwifX19fSkpfWNhdGNoKHQpe2dlLmVycm9yKFwiV3JvbmcgZm9ybWF0IGZvciBwdXNoQ29uZmlncyBmaWVsZCEgY29udGVudDogXCIrZSl9cmV0dXJue2lPU0NvbmZpZzpuLGFuZHJvaWRDb25maWc6aX19LGh0PWZ1bmN0aW9uKGUpe3ZhciB0PS9eW0EtWmEtejAtOV89Ky1dKyQvLnRlc3QoZSksbj1lLmxlbmd0aDtyZXR1cm4gdCYmKG48PTEyOCYmbj49MSl9LGx0PWZ1bmN0aW9uKGUpe3ZhciB0PWUubGVuZ3RoO3JldHVybiB0PD00MDk2JiZ0Pj0xfSxkdD1mdW5jdGlvbihlLHQsbil7dD10fHxmdW5jdGlvbigpe307dmFyIGk9KG49bnx8e30pLmlzUmV2ZXJzZTtuZShlKSYmZnVuY3Rpb24oKXtmb3IodmFyIG4gaW4gZSl0KGVbbl0sbixlKX0oKSwoWChlKXx8SihlKSkmJmZ1bmN0aW9uKCl7aWYoaSlmb3IodmFyIG49ZS5sZW5ndGgtMTtuPj0wO24tLSl0KGVbbl0sbik7ZWxzZSBmb3IodmFyIHI9MCxzPWUubGVuZ3RoO3I8cztyKyspdChlW3JdLHIpfSgpfSxmdD1mdW5jdGlvbihlLHQpe3JldHVybiBkdChlLChmdW5jdGlvbihuLGkpe2VbaV09dChuLGkpfSkpLGV9LHB0PWZ1bmN0aW9uKGUsdCl7aWYoZS5pbmRleE9mKXJldHVybiBlLmluZGV4T2YodCk7dmFyIG49LTE7cmV0dXJuIGR0KGUsKGZ1bmN0aW9uKGUsaSl7dD09PWUmJihuPWkpfSkpLG59LGd0PWZ1bmN0aW9uKGUsdCl7cmV0dXJuLTEhPT1wdChlLHQpfSxfdD1mdW5jdGlvbihlLHQpe3ZhciBuPVtdO3JldHVybiBkdChlLChmdW5jdGlvbihlKXtuLnB1c2goZSl9KSksLTEhPT1wdChuLHQpfSx5dD1mdW5jdGlvbihlKXtyZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlKSl9LG10PWZ1bmN0aW9uKCl7cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIFJDQ3BwRW5naW5lfSx2dD1mdW5jdGlvbihlKXtpZihcImJyb3dzZXJcIiE9PWUudGFnKXJldHVybnt0eXBlOmUudGFnLHZlcnNpb246XCJVbktvbndcIn07dmFyIHQsbixpPW5hdmlnYXRvci51c2VyQWdlbnQscj17SUU6L3J2OihbXFxkLl0rKVxcKSBsaWtlIEdlY2tvfE1TSUUgKFtcXGQuXSspLyxFZGdlOi9FZGdlXFwvKFtcXGQuXSspLyxGaXJlZm94Oi9GaXJlZm94XFwvKFtcXGQuXSspLyxPcGVyYTovKD86T1BFUkF8T1BSKS4oW1xcZC5dKykvLFdlQ2hhdDovTWljcm9NZXNzZW5nZXJcXC8oW1xcZC5dKykvLFFRQnJvd3NlcjovUVFCcm93c2VyXFwvKFtcXGQuXSspLyxDaHJvbWU6L0Nocm9tZVxcLyhbXFxkLl0rKS8sU2FmYXJpOi9WZXJzaW9uXFwvKFtcXGQuXSspLipTYWZhcmkvLGlPU0Nocm9tZTovTW9iaWxlXFwvKFtcXGQuXSspLipTYWZhcmkvfTtmb3IodmFyIHMgaW4gcilpZihyLmhhc093blByb3BlcnR5KHMpKXt2YXIgbz1pLm1hdGNoKHJbc10pO2lmKG8pe249cyx0PW9bMV18fG9bMl07YnJlYWt9fXJldHVybnt0eXBlOm58fFwiVW5Lb253XCIsdmVyc2lvbjp0fHxcIlVuS29ud1wifX0sRXQ9ZnVuY3Rpb24oZSl7c3dpdGNoKGUpe2Nhc2UgQ2UuU0VSVkVSX1VOQVZBSUxBQkxFOnJldHVybiBFZS5TRVJWRVJfVU5BVkFJTEFCTEU7Y2FzZSBDZS5UT0tFTl9JTkNPUlJFQ1Q6cmV0dXJuIEVlLlJDX0NPTk5fVVNFUl9PUl9QQVNTV0RfRVJST1I7Y2FzZSBDZS5SRURJUkVDVDpyZXR1cm4gRWUuUkNfQ09OTl9SRURJUkVDVEVEO2Nhc2UgQ2UuQVBQX0JMT0NLX09SX0RFTEVURTpyZXR1cm4gRWUuUkNfQ09OTl9BUFBfQkxPQ0tFRF9PUl9ERUxFVEVEO2Nhc2UgQ2UuQkxPQ0s6cmV0dXJuIEVlLlJDX0NPTk5fVVNFUl9CTE9DS0VEO2Nhc2UgQ2UuVE9LRU5fRVhQSVJFOnJldHVybiBFZS5SQ19DT05OX1VTRVJfT1JfUEFTU1dEX0VSUk9SO2Nhc2UgQ2UuSE9TVE5BTUVfRVJST1I6cmV0dXJuIEVlLkhPU1ROQU1FX0VSUk9SO2Nhc2UgQ2UuSEFTT0hURVJTQU1FQ0xJRU5UT05MSU5FOnJldHVybiBFZS5IQVNfT0hURVJfU0FNRV9DTElFTlRfT05fTElORTtjYXNlIENlLkFQUF9BVVRIX05PVF9QQVNTOnJldHVybiBFZS5SQ19BUFBfQVVUSF9OT1RfUEFTUztjYXNlIENlLk9UUF9VU0VEOnJldHVybiBFZS5SQ19PVFBfVVNFRDtjYXNlIENlLlBMQVRGT1JNX0VSUk9SOnJldHVybiBFZS5SQ19QTEFURk9STV9FUlJPUjtkZWZhdWx0OnJldHVybiBFZS5SQ19ORVRfVU5BVkFJTEFCTEV9fSxUdD1mdW5jdGlvbihlKXt2YXIgdDtpZihcIm9iamVjdFwiPT10eXBlb2YgZSlpZihBcnJheS5pc0FycmF5KGUpKWZvcih2YXIgbiBpbiB0PVtdLGUpdC5wdXNoKFR0KGVbbl0pKTtlbHNlIGZvcih2YXIgbiBpbiB0PXt9LGUpdFtuXT1UdChlW25dKTtlbHNlIHQ9ZTtyZXR1cm4gdH0sSXQ9ZnVuY3Rpb24oZSl7dmFyIHQ7dHJ5e3Q9VHQoZSl9Y2F0Y2gobil7Z2UuZXJyb3IoXCJjbG9uZSBlcnI6XCIsbiksdD1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGUpKX1yZXR1cm4gdH0sQ3Q9ZnVuY3Rpb24oZSl7dmFyIHQ9e30sbj1KU09OLnBhcnNlKGUpO3JldHVybiBkdChuLChmdW5jdGlvbihlLG4pe3Rbbl09ZS52fSkpLHR9LFJ0PXtfZGVsYXlUaW1lOjAsc2V0VGltZTpmdW5jdGlvbihlKXt2YXIgdD0obmV3IERhdGUpLmdldFRpbWUoKTtSdC5fZGVsYXlUaW1lPXQtZX0sZ2V0VGltZTpmdW5jdGlvbigpe3ZhciBlPVJ0Ll9kZWxheVRpbWU7cmV0dXJuKG5ldyBEYXRlKS5nZXRUaW1lKCktZX19LFN0PWZ1bmN0aW9uKGUsdCl7dmFyIG49MDtyZXR1cm4gZS5pc0F1dG9EZWxldGUmJihufD0xKSxlLmlzT3ZlcndyaXRlJiYobnw9MiksMj09PXQmJihufD00KSxufTshZnVuY3Rpb24oZSl7ZVtlLkFUX01PU1RfT05DRT0wXT1cIkFUX01PU1RfT05DRVwiLGVbZS5BVF9MRUFTVF9PTkNFPTFdPVwiQVRfTEVBU1RfT05DRVwiLGVbZS5FWEFDVExZX09OQ0U9Ml09XCJFWEFDVExZX09OQ0VcIixlW2UuREVGQVVMVD0zXT1cIkRFRkFVTFRcIn0oemV8fCh6ZT17fSkpLGZ1bmN0aW9uKGUpe2VbZS5TWU1NRVRSSUM9MF09XCJTWU1NRVRSSUNcIixlW2UuQ09OTkVDVD0xXT1cIkNPTk5FQ1RcIixlW2UuQ09OTl9BQ0s9Ml09XCJDT05OX0FDS1wiLGVbZS5QVUJMSVNIPTNdPVwiUFVCTElTSFwiLGVbZS5QVUJfQUNLPTRdPVwiUFVCX0FDS1wiLGVbZS5RVUVSWT01XT1cIlFVRVJZXCIsZVtlLlFVRVJZX0FDSz02XT1cIlFVRVJZX0FDS1wiLGVbZS5RVUVSWV9DT05GSVJNPTddPVwiUVVFUllfQ09ORklSTVwiLGVbZS5TVUJTQ1JJQkU9OF09XCJTVUJTQ1JJQkVcIixlW2UuU1VCX0FDSz05XT1cIlNVQl9BQ0tcIixlW2UuVU5TVUJTQ1JJQkU9MTBdPVwiVU5TVUJTQ1JJQkVcIixlW2UuVU5TVUJfQUNLPTExXT1cIlVOU1VCX0FDS1wiLGVbZS5QSU5HX1JFUT0xMl09XCJQSU5HX1JFUVwiLGVbZS5QSU5HX1JFU1A9MTNdPVwiUElOR19SRVNQXCIsZVtlLkRJU0NPTk5FQ1Q9MTRdPVwiRElTQ09OTkVDVFwiLGVbZS5SRVNFUlZFUjI9MTVdPVwiUkVTRVJWRVIyXCJ9KFplfHwoWmU9e30pKSxmdW5jdGlvbihlKXtlLkNPTk5fQUNLPVwiQ29ubkFja01lc3NhZ2VcIixlLkRJU0NPTk5FQ1Q9XCJEaXNjb25uZWN0TWVzc2FnZVwiLGUuUElOR19SRVE9XCJQaW5nUmVxTWVzc2FnZVwiLGUuUElOR19SRVNQPVwiUGluZ1Jlc3BNZXNzYWdlXCIsZS5QVUJMSVNIPVwiUHVibGlzaE1lc3NhZ2VcIixlLlBVQl9BQ0s9XCJQdWJBY2tNZXNzYWdlXCIsZS5RVUVSWT1cIlF1ZXJ5TWVzc2FnZVwiLGUuUVVFUllfQ09OPVwiUXVlcnlDb25NZXNzYWdlXCIsZS5RVUVSWV9BQ0s9XCJRdWVyeUFja01lc3NhZ2VcIn0oWGV8fChYZT17fSkpLGZ1bmN0aW9uKGUpe2UuUFVCPVwicHViXCIsZS5RVUVSWT1cInFyeVwifSgkZXx8KCRlPXt9KSksZnVuY3Rpb24oZSl7ZVtlLlY0PTRdPVwiVjRcIixlW2UuVjM9M109XCJWM1wifShldHx8KGV0PXt9KSk7dmFyIE50LE90PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQsbixpKXt2b2lkIDA9PT10JiYodD0hMSksdm9pZCAwPT09biYmKG49emUuQVRfTEVBU1RfT05DRSksdm9pZCAwPT09aSYmKGk9ITEpLHRoaXMuX3JldGFpbj0hMSx0aGlzLnFvcz16ZS5BVF9MRUFTVF9PTkNFLHRoaXMuX2R1cD0hMSx0aGlzLnN5bmNNc2c9ITE7dmFyIHI9ZT4wO2UmJnImJjE9PT1hcmd1bWVudHMubGVuZ3RoPyh0aGlzLl9yZXRhaW49KDEmZSk+MCx0aGlzLnFvcz0oNiZlKT4+MSx0aGlzLl9kdXA9KDgmZSk+MCx0aGlzLnR5cGU9ZT4+NCYxNSx0aGlzLnN5bmNNc2c9OD09KDgmZSkpOih0aGlzLnR5cGU9ZSx0aGlzLl9yZXRhaW49dCx0aGlzLnFvcz1uLHRoaXMuX2R1cD1pKX1yZXR1cm4gZS5wcm90b3R5cGUuZW5jb2RlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy50eXBlPDw0O3JldHVybiBlfD10aGlzLl9yZXRhaW4/MTowLGV8PXRoaXMucW9zPDwxLGV8PXRoaXMuX2R1cD84OjB9LGV9KCksTXQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBlLndyaXRlVVRGPWZ1bmN0aW9uKGUsdCl7dmFyIG49W10saT0wO2lmKEooZSkpZm9yKHZhciByPTAscz1lLmxlbmd0aDtyPHM7cisrKXt2YXIgbz1lLmNoYXJDb2RlQXQocik7bz49MCYmbzw9MTI3PyhpKz0xLG4ucHVzaChvKSk6bz49MTI4JiZvPD0yMDQ3PyhpKz0yLG4ucHVzaCgxOTJ8MzEmbz4+Niksbi5wdXNoKDEyOHw2MyZvKSk6bz49MjA0OCYmbzw9NjU1MzUmJihpKz0zLG4ucHVzaCgyMjR8MTUmbz4+MTIpLG4ucHVzaCgxMjh8NjMmbz4+Niksbi5wdXNoKDEyOHw2MyZvKSl9Zm9yKHI9MCxzPW4ubGVuZ3RoO3I8cztyKyspbltyXT4yNTUmJihuW3JdJj0yNTUpO3JldHVybiB0P246aTw9MjU1P1swLGldLmNvbmNhdChuKTpbaT4+OCwyNTUmaV0uY29uY2F0KG4pfSxlLnJlYWRVVEY9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG4saT1bXSxyPS0xLHM9ZSxvPVwiXCI7KytyPHMubGVuZ3RoOyl7dmFyIGE9TnVtYmVyKHNbcl0pO2lmKGE9PT0oMTI3JmEpfHwoMjQwPT0oMjQwJmEpP2E9KGE9KGE9KGFePTI0MCk8PDZ8MTI4XnNbKytyXSk8PDZ8MTI4XnNbKytyXSk8PDZ8MTI4XnNbKytyXToyMjQ9PSgyMjQmYSk/YT0oYT0oYV49MjI0KTw8NnwxMjhec1srK3JdKTw8NnwxMjhec1srK3JdOjE5Mj09KDE5MiZhKSYmKGE9KGFePTE5Mik8PDZ8MTI4XnNbKytyXSkpLCFpc0Zpbml0ZShhKXx8YTwwfHxhPjExMTQxMTF8fE1hdGguZmxvb3IoYSkhPT1hKXRocm93IFJhbmdlRXJyb3IoXCJJbnZhbGlkIGNvZGUgcG9pbnQ6IFwiK2EpO2E8PTY1NTM1P2kucHVzaChhKToodD0oYS09NjU1MzYpPj4xMHw1NTI5NixuPWElMTAyNHw1NjMyMCxpLnB1c2godCxuKSksKHIrMT09PXMubGVuZ3RofHxpLmxlbmd0aD4xNjM4NCkmJihvKz1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsaSksaS5sZW5ndGg9MCl9cmV0dXJuIG99LGV9KCksd3Q9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuX3Bvc2l0aW9uPTAsdGhpcy5fcG9vbExlbj0wLHRoaXMuX3Bvb2w9ZSx0aGlzLl9wb29sTGVuPWUubGVuZ3RofXJldHVybiBlLnByb3RvdHlwZS5jaGVjaz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9wb3NpdGlvbj49dGhpcy5fcG9vbC5sZW5ndGh9LGUucHJvdG90eXBlLnJlYWQyQnl0ZT1mdW5jdGlvbigpe3ZhciBlPXRoaXM7aWYoZS5jaGVjaygpKXJldHVybi0xO2Zvcih2YXIgdD1cIlwiLG49MDtuPDI7bisrKXt2YXIgaT1lLl9wb29sW2UuX3Bvc2l0aW9uKytdLnRvU3RyaW5nKDE2KTsxPT09aS5sZW5ndGgmJihpPVwiMFwiK2kpLHQrPWkudG9TdHJpbmcoKX1yZXR1cm4gcGFyc2VJbnQodCwxNil9LGUucHJvdG90eXBlLnJlYWRJbnQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2lmKGUuY2hlY2soKSlyZXR1cm4tMTtmb3IodmFyIHQ9XCJcIixuPTA7bjw0O24rKyl7dmFyIGk9ZS5fcG9vbFtlLl9wb3NpdGlvbisrXS50b1N0cmluZygxNik7MT09PWkubGVuZ3RoJiYoaT1cIjBcIitpKSx0Kz1pLnRvU3RyaW5nKCl9cmV0dXJuIHBhcnNlSW50KHQsMTYpfSxlLnByb3RvdHlwZS5yZWFkTG9uZz1mdW5jdGlvbigpe3ZhciBlPXRoaXM7aWYoZS5jaGVjaygpKXJldHVybi0xO2Zvcih2YXIgdD1cIlwiLG49MDtuPDg7bisrKXt2YXIgaT1lLl9wb29sW2UuX3Bvc2l0aW9uKytdLnRvU3RyaW5nKDE2KTsxPT09aS5sZW5ndGgmJihpPVwiMFwiK2kpLHQrPWl9cmV0dXJuIHBhcnNlSW50KHQsMTYpfSxlLnByb3RvdHlwZS5yZWFkQnl0ZT1mdW5jdGlvbigpe2lmKHRoaXMuY2hlY2soKSlyZXR1cm4tMTt2YXIgZT10aGlzLl9wb29sW3RoaXMuX3Bvc2l0aW9uKytdO3JldHVybiBlPjI1NSYmKGUmPTI1NSksZX0sZS5wcm90b3R5cGUucmVhZFVURj1mdW5jdGlvbigpe2lmKHRoaXMuY2hlY2soKSlyZXR1cm5cIlwiO3ZhciBlPXRoaXMucmVhZEJ5dGUoKTw8OHx0aGlzLnJlYWRCeXRlKCksdD10aGlzLl9wb29sLnN1YmFycmF5KHRoaXMuX3Bvc2l0aW9uLHRoaXMuX3Bvc2l0aW9uKz1lKTtyZXR1cm4gTXQucmVhZFVURih0KX0sZS5wcm90b3R5cGUucmVhZEFsbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9wb29sLnN1YmFycmF5KHRoaXMuX3Bvc2l0aW9uLHRoaXMuX3Bvb2xMZW4pfSxlfSgpLEF0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuX3Bvb2w9W10sdGhpcy5fcG9zaXRpb249MCx0aGlzLl93cml0ZW49MH1yZXR1cm4gZS5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oZSl7cmV0dXJuLTEhPT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSkuaW5kZXhPZihcIkFycmF5XCIpP3RoaXMuX3Bvb2w9dGhpcy5fcG9vbC5jb25jYXQoZSk6ZT49MCYmKGU+MjU1JiYoZSY9MjU1KSx0aGlzLl9wb29sLnB1c2goZSksdGhpcy5fd3JpdGVuKyspLGV9LGUucHJvdG90eXBlLndyaXRlQXJyPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9wb29sPXRoaXMuX3Bvb2wuY29uY2F0KGUpLGV9LGUucHJvdG90eXBlLndyaXRlVVRGPWZ1bmN0aW9uKGUpe3ZhciB0PU10LndyaXRlVVRGKGUpO3RoaXMuX3Bvb2w9dGhpcy5fcG9vbC5jb25jYXQodCksdGhpcy5fd3JpdGVuKz10Lmxlbmd0aH0sZS5wcm90b3R5cGUuZ2V0Qnl0ZXNBcnJheT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9wb29sfSxlfSgpLFV0PVwiVXBTdHJlYW1NZXNzYWdlXCIsYnQ9XCJQdXNoRXh0cmFcIixMdD1cIkRvd25TdHJlYW1NZXNzYWdlXCIsUHQ9XCJEb3duU3RyZWFtTWVzc2FnZXNcIixEdD1cIlNlc3Npb25zQXR0UXJ5SW5wdXRcIixWdD1cIlNlc3Npb25zQXR0T3V0cHV0XCIsa3Q9XCJTeW5jUmVxdWVzdE1zZ1wiLHh0PVwiQ2hybVB1bGxNc2dcIixCdD1cIk5vdGlmeU1zZ1wiLEd0PVwiSGlzdG9yeU1zZ0lucHV0XCIsRnQ9XCJIaXN0b3J5TXNnT3VwdXRcIixxdD1cIlJlbGF0aW9uUXJ5SW5wdXRcIixLdD1cIlJlbGF0aW9uc091dHB1dFwiLEh0PVwiRGVsZXRlU2Vzc2lvbnNJbnB1dFwiLFl0PVwiU2Vzc2lvbkluZm9cIixqdD1cIkRlbGV0ZVNlc3Npb25zT3V0cHV0XCIsUXQ9XCJSZWxhdGlvbnNJbnB1dFwiLFd0PVwiRGVsZXRlTXNnSW5wdXRcIixKdD1cIkNsZWFuSGlzTXNnSW5wdXRcIix6dD1cIlNlc3Npb25Nc2dSZWFkSW5wdXRcIixadD1cIkNocm1JbnB1dFwiLFh0PVwiQ2hybU91dHB1dFwiLCR0PVwiUXVlcnlDaGF0Um9vbUluZm9JbnB1dFwiLGVuPVwiUXVlcnlDaGF0Um9vbUluZm9PdXRwdXRcIix0bj1cIlJ0Y0lucHV0XCIsbm49XCJSdGNVc2VyTGlzdE91dHB1dFwiLHJuPVwiU2V0VXNlclN0YXR1c0lucHV0XCIsc249XCJSdGNTZXREYXRhSW5wdXRcIixvbj1cIlJ0Y1VzZXJTZXREYXRhSW5wdXRcIixhbj1cIlJ0Y0RhdGFJbnB1dFwiLHVuPVwiUnRjU2V0T3V0RGF0YUlucHV0XCIsY249XCJNQ0ZvbGxvd0lucHV0XCIsaG49XCJSdGNUb2tlbk91dHB1dFwiLGxuPVwiUnRjUXJ5T3V0cHV0XCIsZG49XCJSdGNRcnlVc2VyT3V0RGF0YUlucHV0XCIsZm49XCJSdGNVc2VyT3V0RGF0YU91dHB1dFwiLHBuPVwiUnRjUXVlcnlMaXN0SW5wdXRcIixnbj1cIlJ0Y1Jvb21JbmZvT3V0cHV0XCIsX249XCJSdGNWYWx1ZUluZm9cIix5bj1cIlJ0Y0tleURlbGV0ZUlucHV0XCIsbW49XCJHZXRRTnVwVG9rZW5JbnB1dFwiLHZuPVwiR2V0UU51cFRva2VuT3V0cHV0XCIsRW49XCJHZXRRTmRvd25sb2FkVXJsSW5wdXRcIixUbj1cIkdldERvd25sb2FkVXJsSW5wdXRcIixJbj1cIkdldFFOZG93bmxvYWRVcmxPdXRwdXRcIixDbj1cIkdldERvd25sb2FkVXJsT3V0cHV0XCIsUm49XCJDaHJtS1ZFbnRpdHlcIixTbj1cIlNldENocm1LVlwiLE5uPVwiU2V0Q2hybUtWU1wiLE9uPVwiRGVsZXRlQ2hybUtWU1wiLE1uPVwiQ2hybUtWT3V0cHV0XCIsd249XCJDaHJtS1ZTT3V0cHV0XCIsQW49XCJDaHJtS1ZTVmVyc2lvbkVudGl0eVwiLFVuPVwiQ2hybUtWU091dHB1dEVudGl0eVwiLGJuPVwiUXVlcnlDaHJtS1ZcIixMbj1cIlNldFVzZXJTZXR0aW5nSW5wdXRcIixQbj1cIlNldFVzZXJTZXR0aW5nT3V0cHV0XCIsRG49XCJQdWxsVXNlclNldHRpbmdJbnB1dFwiLFZuPVwiUHVsbFVzZXJTZXR0aW5nT3V0cHV0XCIsa249XCJVc2VyU2V0dGluZ05vdGlmaWNhdGlvblwiLHhuPVwiU2Vzc2lvblJlcVwiLEJuPVwiU2Vzc2lvblN0YXRlc1wiLEduPVwiU2Vzc2lvblN0YXRlXCIsRm49XCJTZXNzaW9uU3RhdGVJdGVtXCIscW49XCJTZXNzaW9uU3RhdGVNb2RpZnlSZXFcIixLbj1cIlNlc3Npb25TdGF0ZU1vZGlmeVJlc3BcIixIbj1cIkdycFJlYWRSZWNlaXB0TXNnXCIsWW49XCJHcnBSZWFkUmVjZWlwdFFyeVJlcVwiLGpuPVwiR3JwUmVhZFJlY2VpcHRRcnlSZXNwXCIsUW49XCJHcnBNc2dSZWFkVXNlclwiLFduPVwiU2Vzc2lvblRhZ0FkZElucHV0XCIsSm49XCJTZXNzaW9uVGFnSXRlbVwiLHpuPVwiU2Vzc2lvblRhZ0RlbElucHV0XCIsWm49XCJTZXNzaW9uRGlzVGFnUmVxXCIsWG49XCJSZXBvcnRTREtJbnB1dFwiLCRuPVwiUmVwb3J0U0RLT3V0cHV0XCIsZWk9XCJVbHRyYUdycFB1bGxTZXNcIix0aT1cIlVsdHJhR3JwUHVsbE1zZ1wiLG5pPVwiTXNnQ2hhbmdlUmVxXCIsaWk9XCJRdWVyeU1zZ0NoYW5nZVwiLHJpPVwiTXNnQ2hhbmdlXCIsc2k9XCJNc2dDaGFuZ2VMaXN0XCIsb2k9XCJNc2dRdWVyeVwiLGFpPVwiTWVzc2FnZVF1ZXJ5SW5mb1wiLHVpPVwiTXNnUXVlcnlBY2tcIixjaT1cIk9wZXJhdGVTdGF0dXNcIixoaT1cIk9wZXJhdGVTdGF0dXNOb3RpZnlcIixsaT1cIk9wZXJhdGVJbmZvXCIsZGk9XCJPcGVyYXRlU3VtbWFyeVwiLGZpPVwiUnRjTm90aWZ5TXNnXCIscGk9XCJSdGNQdWxsS1ZcIixnaT1cIlJ0Y0tWT3V0cHV0XCIsX2k9XCJSdGNRdWVyeVVzZXJKb2luZWRJbnB1dFwiLHlpPVwiUnRjUXVlcnlVc2VySm9pbmVkT3V0cHV0XCIsbWk9XCJSdGNWaWV3ZXJKb2luZWRPdXRwdXRcIix2aT1cIlJ0Y0ludml0ZUlucHV0XCIsRWk9XCJSdGNDYW5jZWxJbnZpdGVJbnB1dFwiLFRpPVwiUnRjSW52aXRlQW5zd2VySW5wdXRcIixJaT1cIlJ0Y0VuZEludml0ZUlucHV0XCIsQ2k9XCJTZXRSdGNSb29tSWRJbnB1dFwiLFJpPVwiU2V0UnRjUm9vbUlkT3V0cHV0XCIsU2k9KChOdD17fSlbVXRdPVtcInNlc3Npb25JZFwiLFwiY2xhc3NuYW1lXCIsXCJjb250ZW50XCIsXCJwdXNoVGV4dFwiLFwidXNlcklkXCIsXCJjb25maWdGbGFnXCIsXCJhcHBEYXRhXCIsXCJleHRyYUNvbnRlbnRcIixcInB1c2hFeHRcIixcImJ1c0NoYW5uZWxcIl0sTnRbUHRdPVtcImxpc3RcIixcInN5bmNUaW1lXCIsXCJmaW5pc2hlZFwiXSxOdFtMdF09W1wiZnJvbVVzZXJJZFwiLFwidHlwZVwiLFwiZ3JvdXBJZFwiLFwiY2xhc3NuYW1lXCIsXCJjb250ZW50XCIsXCJkYXRhVGltZVwiLFwic3RhdHVzXCIsXCJtc2dJZFwiLFwiZXh0cmFDb250ZW50XCIsXCJwdXNoQ29udGVudFwiLFwiY29uZmlnRmxhZ1wiLFwicHVzaEV4dFwiLFwiYnVzQ2hhbm5lbFwiXSxOdFtidF09W1widGl0bGVcIixcInRlbXBsYXRlSWROb1VzZVwiLFwicHVzaElkXCIsXCJwdXNoQ29uZmlnc1wiLFwidGVtcGxhdGVJZFwiXSxOdFtEdF09W1wibm90aGluZ1wiXSxOdFtWdF09W1wiaW5ib3hUaW1lXCIsXCJzZW5kYm94VGltZVwiLFwidG90YWxVbnJlYWRDb3VudFwiXSxOdFtrdF09W1wic3luY1RpbWVcIixcImlzcG9sbGluZ1wiLFwiaXN3ZWJcIixcImlzUHVsbFNlbmRcIixcImlzS2VlcGluZ1wiLFwic2VuZEJveFN5bmNUaW1lXCJdLE50W3h0XT1bXCJzeW5jVGltZVwiLFwiY291bnRcIl0sTnRbQnRdPVtcInR5cGVcIixcInRpbWVcIixcImNocm1JZFwiXSxOdFtHdF09W1widGFyZ2V0SWRcIixcInRpbWVcIixcImNvdW50XCIsXCJvcmRlclwiLFwiYnVzQ2hhbm5lbFwiXSxOdFtGdF09W1wibGlzdFwiLFwic3luY1RpbWVcIixcImhhc01zZ1wiXSxOdFtxdF09W1widHlwZVwiLFwiY291bnRcIixcInN0YXJ0VGltZVwiLFwib3JkZXJcIl0sTnRbS3RdPVtcImluZm9cIixcImlzRmluaXNoZWRcIl0sTnRbSHRdPVtcInNlc3Npb25zXCJdLE50W1l0XT1bXCJ0eXBlXCIsXCJjaGFubmVsSWRcIixcImJ1c0NoYW5uZWxcIl0sTnRbanRdPVtcIm5vdGhpbmdcIl0sTnRbUXRdPVtcInR5cGVcIixcIm1zZ1wiLFwiY291bnRcIixcImJ1c0NoYW5uZWxcIixcInN0YXJ0VGltZVwiLFwiZW5kVGltZVwiXSxOdFtXdF09W1widHlwZVwiLFwiY29udmVyc2F0aW9uSWRcIixcIm1zZ3NcIixcImJ1c0NoYW5uZWxcIl0sTnRbSnRdPVtcInRhcmdldElkXCIsXCJkYXRhVGltZVwiLFwiY29udmVyc2F0aW9uVHlwZVwiLFwiYnVzQ2hhbm5lbFwiXSxOdFt6dF09W1widHlwZVwiLFwibXNnVGltZVwiLFwiY2hhbm5lbElkXCIsXCJidXNDaGFubmVsXCJdLE50W1p0XT1bXCJub3RoaW5nXCJdLE50W1h0XT1bXCJub3RoaW5nXCIsXCJzZXNzaW9uSWRcIixcImpvaW5UaW1lXCJdLE50WyR0XT1bXCJjb3VudFwiLFwib3JkZXJcIl0sTnRbZW5dPVtcInVzZXJUb3RhbE51bXNcIixcInVzZXJJbmZvc1wiXSxOdFttbl09W1widHlwZVwiLFwia2V5XCIsXCJodHRwTWV0aG9kXCIsXCJxdWVyeVN0cmluZ1wiXSxOdFtFbl09W1widHlwZVwiLFwia2V5XCIsXCJmaWxlTmFtZVwiXSxOdFtUbl09W1widHlwZVwiLFwia2V5XCIsXCJmaWxlTmFtZVwiXSxOdFt2bl09W1wiZGVhZGxpbmVcIixcInRva2VuXCIsXCJib3NUb2tlblwiLFwiYm9zRGF0ZVwiLFwicGF0aFwiLFwib3Nza2V5SWRcIixcIm9zc1BvbGljeVwiLFwib3NzU2lnblwiLFwib3NzQnVja2V0TmFtZVwiXSxOdFtJbl09W1wiZG93bmxvYWRVcmxcIl0sTnRbQ25dPVtcImRvd25sb2FkVXJsXCJdLE50W1JuXT1bXCJrZXlcIixcInZhbHVlXCIsXCJzdGF0dXNcIixcInRpbWVzdGFtcFwiLFwidWlkXCIsXCJ2ZXJzaW9uXCJdLE50W1NuXT1bXCJlbnRyeVwiLFwiYk5vdGlmeVwiLFwibm90aWZpY2F0aW9uXCIsXCJ0eXBlXCJdLE50W05uXT1bXCJlbnRyeVwiLFwiYk5vdGlmeVwiLFwibm90aWZpY2F0aW9uXCIsXCJ0eXBlXCJdLE50W09uXT1bXCJlbnRyeVwiLFwiYk5vdGlmeVwiLFwibm90aWZpY2F0aW9uXCIsXCJ0eXBlXCJdLE50W01uXT1bXCJlbnRyaWVzXCIsXCJiRnVsbFVwZGF0ZVwiLFwic3luY1RpbWVcIl0sTnRbd25dPVtcInRpbWVzdGFtcFwiLFwiZXJyb3JLZXlzXCIsXCJrZXlzVmVyc2lvblwiXSxOdFtBbl09W1widmVyc2lvblwiLFwia2V5XCJdLE50W1VuXT1bXCJrZXlcIixcImVycm9yQ29kZVwiXSxOdFtibl09W1widGltZXN0YW1wXCJdLE50W0xuXT1bXCJ2ZXJzaW9uXCIsXCJ2YWx1ZVwiXSxOdFtQbl09W1widmVyc2lvblwiLFwicmVzZXJ2ZVwiXSxOdFtEbl09W1widmVyc2lvblwiLFwicmVzZXJ2ZVwiXSxOdFtWbl09W1wiaXRlbXNcIixcInZlcnNpb25cIl0sTnQuVXNlclNldHRpbmdJdGVtPVtcInRhcmdldElkXCIsXCJ0eXBlXCIsXCJrZXlcIixcInZhbHVlXCIsXCJ2ZXJzaW9uXCIsXCJzdGF0dXNcIixcInRhZ3NcIl0sTnRbeG5dPVtcInRpbWVcIl0sTnRbQm5dPVtcInZlcnNpb25cIixcInN0YXRlXCJdLE50W0duXT1bXCJ0eXBlXCIsXCJjaGFubmVsSWRcIixcInRpbWVcIixcInN0YXRlSXRlbVwiLFwiYnVzQ2hhbm5lbFwiXSxOdFtGbl09W1wic2Vzc2lvblN0YXRlVHlwZVwiLFwidmFsdWVcIixcInRhZ3NcIl0sTnRbcW5dPVtcInZlcnNpb25cIixcInN0YXRlXCJdLE50W0tuXT1bXCJ2ZXJzaW9uXCJdLE50W0huXT1bXCJtc2dJZFwiLFwiYnVzQ2hhbm5lbFwiXSxOdFtZbl09W1wibXNnSWRcIixcImJ1c0NoYW5uZWxcIl0sTnRbam5dPVtcInRvdGFsTWVtYmVyTnVtXCIsXCJsaXN0XCJdLE50W1FuXT1bXCJyZWFkVGltZVwiLFwidXNlcklkXCJdLE50W1duXT1bXCJ2ZXJzaW9uXCIsXCJ0YWdzXCJdLE50W0puXT1bXCJ0YWdJZFwiLFwibmFtZVwiLFwiY3JlYXRlZFRpbWVcIixcImlzVG9wXCJdLE50W3puXT1bXCJ2ZXJzaW9uXCIsXCJ0YWdzXCJdLE50W1puXT1bXCJ0YWdJZFwiXSxOdFtrbl09W1widmVyc2lvblwiLFwicmVzZXJ2ZVwiXSxOdFtYbl09W1wic2RrSW5mb1wiXSxOdFskbl09W1wibm90aGluZ1wiXSxOdFtlaV09W1wic3luY1RpbWVcIixcImlzRXJhc2VNc2dDb250ZW50XCJdLE50W3RpXT1bXCJzeW5jVGltZVwiXSxOdFtuaV09W1wiZnJvbVVzZXJJZFwiLFwidGFyZ2V0SWRcIixcInR5cGVcIixcImJ1c0NoYW5uZWxcIixcIm1zZ1VJRFwiLFwibXNnVGltZVwiLFwiY29udGVudFwiXSxOdFtpaV09W1wic3luY1RpbWVcIl0sTnRbc2ldPVtcImxpc3RcIixcInN5bmNUaW1lXCIsXCJoYXNOZXh0XCJdLE50W3JpXT1bXCJ0YXJnZXRJZFwiLFwidHlwZVwiLFwidGltZVwiLFwiY2hhbmdlVHlwZVwiLFwibXNnVUlEXCIsXCJtc2dUaW1lXCIsXCJidXNDaGFubmVsXCIsXCJpc0FkbWluXCIsXCJpc0RlbFwiLFwib3BlcmF0b3JJZFwiXSxOdFtvaV09W1widGFyZ2V0SWRcIixcInR5cGVcIixcInF1ZXJ5XCJdLE50W2FpXT1bXCJtc2dUaW1lXCIsXCJtc2dVSURcIixcImJ1c0NoYW5uZWxcIl0sTnRbdWldPVtcImxpc3RcIl0sTnRbY2ldPVtcInRhcmdldElkXCIsXCJ0eXBlXCIsXCJvcFR5cGVcIixcImJ1c0NoYW5uZWxcIl0sTnRbaGldPVtcInR5cGVcIixcIm5vdGlmeVR5cGVcIixcImluZm9cIixcInN1bW1hcnlcIl0sTnRbbGldPVtcInRhcmdldElkXCIsXCJidXNDaGFubmVsXCIsXCJ1c2VySWRcIixcIm9wVHlwZVwiLFwib3B0aW1lXCJdLE50W2RpXT1bXCJ0YXJnZXRJZFwiLFwiYnVzQ2hhbm5lbFwiLFwiY291bnRcIixcIm9wVHlwZVwiXSxOdFt0bl09W1wicm9vbVR5cGVcIixcImJyb2FkY2FzdFR5cGVcIixcImV4dHJhSW5uZXJEYXRhXCIsXCJuZWVkU3lzQ2hhdHJvb21cIixcImlkZW50aXR5Q2hhbmdlVHlwZVwiLFwiam9pblR5cGVcIl0sTnRbbm5dPVtcInVzZXJzXCIsXCJ0b2tlblwiLFwic2Vzc2lvbklkXCIsXCJyb29tSW5mb1wiXSxOdFtybl09W1wic3RhdHVzXCJdLE50W3NuXT1bXCJpbnRlcmlvclwiLFwidGFyZ2V0XCIsXCJrZXlcIixcInZhbHVlXCIsXCJvYmplY3ROYW1lXCIsXCJjb250ZW50XCJdLE50W29uXT1bXCJ2YWx1ZUluZm9cIixcIm9iamVjdE5hbWVcIixcImNvbnRlbnRcIl0sTnRbYW5dPVtcImludGVyaW9yXCIsXCJ0YXJnZXRcIixcImtleVwiLFwib2JqZWN0TmFtZVwiLFwiY29udGVudFwiXSxOdFt1bl09W1widGFyZ2V0XCIsXCJ2YWx1ZUluZm9cIixcIm9iamVjdE5hbWVcIixcImNvbnRlbnRcIl0sTnRbY25dPVtcInN0YXRlXCJdLE50W2huXT1bXCJydGNUb2tlblwiXSxOdFtsbl09W1wib3V0SW5mb1wiXSxOdFtkbl09W1widXNlcklkXCJdLE50W2ZuXT1bXCJ1c2VyXCJdLE50W3BuXT1bXCJvcmRlclwiXSxOdFtnbl09W1wicm9vbUlkXCIsXCJyb29tRGF0YVwiLFwidXNlckNvdW50XCIsXCJsaXN0XCJdLE50W19uXT1bXCJrZXlcIixcInZhbHVlXCJdLE50W3luXT1bXCJrZXlcIl0sTnRbZmldPVtcInR5cGVcIixcInRpbWVcIixcInJvb21JZFwiXSxOdFtwaV09W1widGltZXN0YW1wXCIsXCJyb29tSWRcIl0sTnRbZ2ldPVtcImVudHJpZXNcIixcImJGdWxsVXBkYXRlXCIsXCJzeW5jVGltZVwiXSxOdFtfaV09W1widXNlcklkXCJdLE50W3lpXT1bXCJpbmZvXCJdLE50W3ZpXT1bXCJpbnZpdGVkVXNlcklkXCIsXCJ0aW1lb3V0VGltZVwiLFwiaW52aXRlZFJvb21JZFwiLFwiaW52aXRlSW5mb1wiLFwiaW52aXRlU2Vzc2lvbklkXCJdLE50W0VpXT1bXCJpbnZpdGVkVXNlcklkXCIsXCJpbnZpdGVkUm9vbUlkXCIsXCJpbnZpdGVJbmZvXCIsXCJpbnZpdGVTZXNzaW9uSWRcIl0sTnRbVGldPVtcImludml0ZVVzZXJJRFwiLFwiYW5zd2VyQ29kZVwiLFwiaW52aXRlUm9vbUlkXCIsXCJpbnZpdGVTZXNzaW9uSWRcIixcImNvbnRlbnRcIixcImtleVwiLFwidmFsdWVcIl0sTnRbSWldPVtcImludml0ZVJvb21JZFwiLFwiaW52aXRlU2Vzc2lvbklkXCIsXCJpbnZpdGVDb250ZW50XCIsXCJpbnZpdGVSb29tS2V5c1wiXSxOdFtDaV09W1wicnRjUm9vbUlkXCJdLE50W1JpXT1bXCJub3RoaW5nXCJdLE50KSxOaT17fSxPaT1mdW5jdGlvbihlKXt2YXIgdD1TaVtlXTtOaVtlXT1mdW5jdGlvbigpe2Zvcih2YXIgZT17fSxuPXtnZXRBcnJheURhdGE6ZnVuY3Rpb24oKXtyZXR1cm4gZX19LGk9ZnVuY3Rpb24oaSl7dmFyIHI9dFtpXSxzPVwic2V0XCIrRChyLDAsMSk7bltzXT1mdW5jdGlvbih0KXtlW3JdPXR9fSxyPTA7cjx0Lmxlbmd0aDtyKyspaShyKTtyZXR1cm4gbn0sTmlbZV0uZGVjb2RlPWZ1bmN0aW9uKGUpe3ZhciB0PXt9O0ooZSkmJihlPUpTT04ucGFyc2UoZSkpO3ZhciBuPWZ1bmN0aW9uKG4pe3ZhciBpPVwiZ2V0XCIrRChuLDAsMSk7dFtuXT1lW25dLHRbaV09ZnVuY3Rpb24oKXtyZXR1cm4gZVtuXX19O2Zvcih2YXIgaSBpbiBlKW4oaSk7cmV0dXJuIHR9fTtmb3IodmFyIE1pIGluIFNpKU9pKE1pKTtOaS5nZXRNb2R1bGU9ZnVuY3Rpb24oZSl7cmV0dXJuIE5pW2VdKCl9O3ZhciB3aT1cIlxcbnBhY2thZ2UgTW9kdWxlcztcXG5tZXNzYWdlIHByb2J1ZiB7XFxuICBtZXNzYWdlIFwiK3JuK1wiXFxuICB7XFxuICAgIG9wdGlvbmFsIGludDMyIHN0YXR1cz0xO1xcbiAgfVxcblxcbiAgbWVzc2FnZSBTZXRVc2VyU3RhdHVzT3V0cHV0XFxuICB7XFxuICAgIG9wdGlvbmFsIGludDMyIG5vdGhpbmc9MTtcXG4gIH1cXG5cXG4gIG1lc3NhZ2UgR2V0VXNlclN0YXR1c0lucHV0XFxuICB7XFxuICAgIG9wdGlvbmFsIGludDMyIG5vdGhpbmc9MTtcXG4gIH1cXG5cXG4gIG1lc3NhZ2UgR2V0VXNlclN0YXR1c091dHB1dFxcbiAge1xcbiAgICBvcHRpb25hbCBzdHJpbmcgc3RhdHVzPTE7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBzdWJVc2VySWQ9MjtcXG4gIH1cXG5cXG4gIG1lc3NhZ2UgU3ViVXNlclN0YXR1c0lucHV0XFxuICB7XFxuICAgIHJlcGVhdGVkIHN0cmluZyB1c2VyaWQgPTE7XFxuICB9XFxuXFxuICBtZXNzYWdlIFN1YlVzZXJTdGF0dXNPdXRwdXRcXG4gIHtcXG4gICAgb3B0aW9uYWwgaW50MzIgbm90aGluZz0xO1xcbiAgfVxcbiAgbWVzc2FnZSBWb2lwRHluYW1pY0lucHV0XFxuICB7XFxuICAgIHJlcXVpcmVkIGludDMyICBlbmdpbmVUeXBlID0gMTtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIGNoYW5uZWxOYW1lID0gMjtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIGNoYW5uZWxFeHRyYSA9IDM7XFxuICB9XFxuXFxuICBtZXNzYWdlIFZvaXBEeW5hbWljT3V0cHV0XFxuICB7XFxuICAgICAgcmVxdWlyZWQgc3RyaW5nIGR5bmFtaWNLZXk9MTtcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrQnQrXCIge1xcbiAgICByZXF1aXJlZCBpbnQzMiB0eXBlID0gMTtcXG4gICAgb3B0aW9uYWwgaW50NjQgdGltZSA9IDI7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBjaHJtSWQ9MztcXG4gIH1cXG4gIG1lc3NhZ2UgXCIra3QrXCIge1xcbiAgICByZXF1aXJlZCBpbnQ2NCBzeW5jVGltZSA9IDE7XFxuICAgIHJlcXVpcmVkIGJvb2wgaXNwb2xsaW5nID0gMjtcXG4gICAgb3B0aW9uYWwgYm9vbCBpc3dlYj0zO1xcbiAgICBvcHRpb25hbCBib29sIGlzUHVsbFNlbmQ9NDtcXG4gICAgb3B0aW9uYWwgYm9vbCBpc0tlZXBpbmc9NTtcXG4gICAgb3B0aW9uYWwgaW50NjQgc2VuZEJveFN5bmNUaW1lPTY7XFxuICB9XFxuICBtZXNzYWdlIFwiK1V0K1wiIHtcXG4gICAgcmVxdWlyZWQgaW50MzIgc2Vzc2lvbklkID0gMTtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIGNsYXNzbmFtZSA9IDI7XFxuICAgIHJlcXVpcmVkIGJ5dGVzIGNvbnRlbnQgPSAzO1xcbiAgICBvcHRpb25hbCBzdHJpbmcgcHVzaFRleHQgPSA0O1xcbiAgICBvcHRpb25hbCBzdHJpbmcgYXBwRGF0YSA9IDU7XFxuICAgIHJlcGVhdGVkIHN0cmluZyB1c2VySWQgPSA2O1xcbiAgICBvcHRpb25hbCBpbnQ2NCBkZWxNc2dUaW1lID0gNztcXG4gICAgb3B0aW9uYWwgc3RyaW5nIGRlbE1zZ0lkID0gODtcXG4gICAgb3B0aW9uYWwgaW50MzIgY29uZmlnRmxhZyA9IDk7XFxuICAgIG9wdGlvbmFsIGludDY0IGNsaWVudFVuaXF1ZUlkID0gMTA7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBleHRyYUNvbnRlbnQgPSAxMTtcXG4gICAgb3B0aW9uYWwgUHVzaEV4dHJhIHB1c2hFeHQgPSAxMjtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIGJ1c0NoYW5uZWwgPSAxMzsgLy8g6K+l5raI5oGv5omA5bGe5Lya6K+d55qE5Lia5Yqh5qCH6K+GXFxuICB9XFxuICBtZXNzYWdlIFwiK2J0K1wiIHtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIHRpdGxlID0gMTtcXG4gICAgb3B0aW9uYWwgaW50MzIgIHRlbXBsYXRlSWROb1VzZT0gMjtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIHB1c2hJZCA9IDM7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBwdXNoQ29uZmlncyA9IDQ7XFxuICAgIG9wdGlvbmFsIHN0cmluZyB0ZW1wbGF0ZUlkID0gNTtcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrUHQrXCIge1xcbiAgICByZXBlYXRlZCBEb3duU3RyZWFtTWVzc2FnZSBsaXN0ID0gMTtcXG4gICAgcmVxdWlyZWQgaW50NjQgc3luY1RpbWUgPSAyO1xcbiAgICBvcHRpb25hbCBib29sIGZpbmlzaGVkID0gMztcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrTHQrXCIge1xcbiAgICByZXF1aXJlZCBzdHJpbmcgZnJvbVVzZXJJZCA9IDE7XFxuICAgIHJlcXVpcmVkIENoYW5uZWxUeXBlIHR5cGUgPSAyO1xcbiAgICBvcHRpb25hbCBzdHJpbmcgZ3JvdXBJZCA9IDM7XFxuICAgIHJlcXVpcmVkIHN0cmluZyBjbGFzc25hbWUgPSA0O1xcbiAgICByZXF1aXJlZCBieXRlcyBjb250ZW50ID0gNTtcXG4gICAgcmVxdWlyZWQgaW50NjQgZGF0YVRpbWUgPSA2O1xcbiAgICByZXF1aXJlZCBpbnQ2NCBzdGF0dXMgPSA3O1xcbiAgICBvcHRpb25hbCBpbnQ2NCBleHRyYSA9IDg7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBtc2dJZCA9IDk7XFxuICAgIG9wdGlvbmFsIGludDMyIGRpcmVjdGlvbiA9IDEwO1xcbiAgICBvcHRpb25hbCBpbnQzMiBwbGFudGZvcm0gPTExO1xcbiAgICBvcHRpb25hbCBpbnQzMiBpc1JlbW92ZWQgPSAxMjtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIHNvdXJjZSA9IDEzO1xcbiAgICBvcHRpb25hbCBpbnQ2NCBjbGllbnRVbmlxdWVJZCA9IDE0O1xcbiAgICBvcHRpb25hbCBzdHJpbmcgZXh0cmFDb250ZW50ID0gMTU7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBwdXNoQ29udGVudCA9IDE2O1xcbiAgICBvcHRpb25hbCBpbnQzMiBjb25maWdGbGFnID0gMTc7XFxuICAgIG9wdGlvbmFsIFB1c2hFeHRyYSBwdXNoRXh0ID0gMTg7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBidXNDaGFubmVsID0gMTk7IC8vIOivpea2iOaBr+aJgOWxnuS8muivneeahOS4muWKoeagh+ivhu+8jOmZkOWItjIw5a2X56ym5Lul5YaFXFxuICAgIG9wdGlvbmFsIGludDY0IGV4dFN0YXR1cyA9IDIwOyAvLyDmtojmga/nmoTmianlsZXmoIforrAg56ysMOS9jSzooajnpLrpgIHovr7nirbmgIE6IDB4MDEg6KGo56S65bey6YCB6L6+O+aWreahozogMHgwMiDooajnpLrmmK/lkKbpnIDopoHmiafooYzmlq3moaPnrZbnlaU7IOa2iOaBr+S/ruaUuTogMHgwNCDmi4nlj5bljoblj7Lmtojmga/ml7booajnpLror6Xmtojmga/mmK/lkKbkv67mlLnov4dcXG4gIH1cXG4gIGVudW0gQ2hhbm5lbFR5cGUge1xcbiAgICBQRVJTT04gPSAxO1xcbiAgICBQRVJTT05TID0gMjtcXG4gICAgR1JPVVAgPSAzO1xcbiAgICBURU1QR1JPVVAgPSA0O1xcbiAgICBDVVNUT01FUlNFUlZJQ0UgPSA1O1xcbiAgICBOT1RJRlkgPSA2O1xcbiAgICBNQz03O1xcbiAgICBNUD04O1xcbiAgICBVTFRSQUdST1VQID0gMTA7XFxuICB9XFxuICBtZXNzYWdlIENyZWF0ZURpc2N1c3Npb25JbnB1dCB7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBuYW1lID0gMTtcXG4gIH1cXG4gIG1lc3NhZ2UgQ3JlYXRlRGlzY3Vzc2lvbk91dHB1dCB7XFxuICAgIHJlcXVpcmVkIHN0cmluZyBpZCA9IDE7XFxuICB9XFxuICBtZXNzYWdlIENoYW5uZWxJbnZpdGF0aW9uSW5wdXQge1xcbiAgICByZXBlYXRlZCBzdHJpbmcgdXNlcnMgPSAxO1xcbiAgfVxcbiAgbWVzc2FnZSBMZWF2ZUNoYW5uZWxJbnB1dCB7XFxuICAgIHJlcXVpcmVkIGludDMyIG5vdGhpbmcgPSAxO1xcbiAgfVxcbiAgbWVzc2FnZSBDaGFubmVsRXZpY3Rpb25JbnB1dCB7XFxuICAgIHJlcXVpcmVkIHN0cmluZyB1c2VyID0gMTtcXG4gIH1cXG4gIG1lc3NhZ2UgUmVuYW1lQ2hhbm5lbElucHV0IHtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIG5hbWUgPSAxO1xcbiAgfVxcbiAgbWVzc2FnZSBDaGFubmVsSW5mb0lucHV0IHtcXG4gICAgcmVxdWlyZWQgaW50MzIgbm90aGluZyA9IDE7XFxuICB9XFxuICBtZXNzYWdlIENoYW5uZWxJbmZvT3V0cHV0IHtcXG4gICAgcmVxdWlyZWQgQ2hhbm5lbFR5cGUgdHlwZSA9IDE7XFxuICAgIHJlcXVpcmVkIHN0cmluZyBjaGFubmVsSWQgPSAyO1xcbiAgICByZXF1aXJlZCBzdHJpbmcgY2hhbm5lbE5hbWUgPSAzO1xcbiAgICByZXF1aXJlZCBzdHJpbmcgYWRtaW5Vc2VySWQgPSA0O1xcbiAgICByZXBlYXRlZCBzdHJpbmcgZmlyc3RUZW5Vc2VySWRzID0gNTtcXG4gICAgcmVxdWlyZWQgaW50MzIgb3BlblN0YXR1cyA9IDY7XFxuICB9XFxuICBtZXNzYWdlIENoYW5uZWxJbmZvc0lucHV0IHtcXG4gICAgcmVxdWlyZWQgaW50MzIgcGFnZSA9IDE7XFxuICAgIG9wdGlvbmFsIGludDMyIG51bWJlciA9IDI7XFxuICB9XFxuICBtZXNzYWdlIENoYW5uZWxJbmZvc091dHB1dCB7XFxuICAgIHJlcGVhdGVkIENoYW5uZWxJbmZvT3V0cHV0IGNoYW5uZWxzID0gMTtcXG4gICAgcmVxdWlyZWQgaW50MzIgdG90YWwgPSAyO1xcbiAgfVxcbiAgbWVzc2FnZSBNZW1iZXJJbmZvIHtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIHVzZXJJZCA9IDE7XFxuICAgIHJlcXVpcmVkIHN0cmluZyB1c2VyTmFtZSA9IDI7XFxuICAgIHJlcXVpcmVkIHN0cmluZyB1c2VyUG9ydHJhaXQgPSAzO1xcbiAgICByZXF1aXJlZCBzdHJpbmcgZXh0ZW5zaW9uID0gNDtcXG4gIH1cXG4gIG1lc3NhZ2UgR3JvdXBNZW1iZXJzSW5wdXQge1xcbiAgICByZXF1aXJlZCBpbnQzMiBwYWdlID0gMTtcXG4gICAgb3B0aW9uYWwgaW50MzIgbnVtYmVyID0gMjtcXG4gIH1cXG4gIG1lc3NhZ2UgR3JvdXBNZW1iZXJzT3V0cHV0IHtcXG4gICAgcmVwZWF0ZWQgTWVtYmVySW5mbyBtZW1iZXJzID0gMTtcXG4gICAgcmVxdWlyZWQgaW50MzIgdG90YWwgPSAyO1xcbiAgfVxcbiAgbWVzc2FnZSBHZXRVc2VySW5mb0lucHV0IHtcXG4gICAgcmVxdWlyZWQgaW50MzIgbm90aGluZyA9IDE7XFxuICB9XFxuICBtZXNzYWdlIEdldFVzZXJJbmZvT3V0cHV0IHtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIHVzZXJJZCA9IDE7XFxuICAgIHJlcXVpcmVkIHN0cmluZyB1c2VyTmFtZSA9IDI7XFxuICAgIHJlcXVpcmVkIHN0cmluZyB1c2VyUG9ydHJhaXQgPSAzO1xcbiAgfVxcbiAgbWVzc2FnZSBHZXRTZXNzaW9uSWRJbnB1dCB7XFxuICAgIHJlcXVpcmVkIGludDMyIG5vdGhpbmcgPSAxO1xcbiAgfVxcbiAgbWVzc2FnZSBHZXRTZXNzaW9uSWRPdXRwdXQge1xcbiAgICByZXF1aXJlZCBpbnQzMiBzZXNzaW9uSWQgPSAxO1xcbiAgfVxcbiAgZW51bSBGaWxlVHlwZSB7XFxuICAgIGltYWdlID0gXCIrVy5JTUFHRStcIjtcXG4gICAgYXVkaW8gPSBcIitXLkFVRElPK1wiO1xcbiAgICB2aWRlbyA9IFwiK1cuVklERU8rXCI7XFxuICAgIGZpbGUgPSBcIitXLkZJTEUrXCI7XFxuICB9XFxuICBtZXNzYWdlIFwiK21uK1wiIHtcXG4gICAgcmVxdWlyZWQgRmlsZVR5cGUgdHlwZSA9IDE7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBrZXkgPSAyO1xcbiAgICBvcHRpb25hbCBzdHJpbmcgaHR0cE1ldGhvZCA9IDM7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBxdWVyeVN0cmluZyA9IDQ7XFxuICB9XFxuICBtZXNzYWdlIFwiK0VuK1wiIHtcXG4gICAgcmVxdWlyZWQgRmlsZVR5cGUgdHlwZSA9IDE7XFxuICAgIHJlcXVpcmVkIHN0cmluZyBrZXkgPSAyO1xcbiAgICBvcHRpb25hbCBzdHJpbmcgIGZpbGVOYW1lID0gMztcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrVG4rXCIge1xcbiAgICByZXF1aXJlZCBGaWxlVHlwZSB0eXBlID0gMTtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIGtleSA9IDI7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBmaWxlTmFtZSA9IDM7XFxuICAgfVxcbiAgbWVzc2FnZSBcIit2bitcIiB7XFxuICAgIHJlcXVpcmVkIGludDY0IGRlYWRsaW5lID0gMTtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIHRva2VuID0gMjtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIGJvc1Rva2VuID0gMztcXG4gICAgb3B0aW9uYWwgc3RyaW5nIGJvc0RhdGUgPSA0O1xcbiAgICBvcHRpb25hbCBzdHJpbmcgcGF0aCA9IDU7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBvc3NrZXlJZCA9IDY7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBvc3NQb2xpY3kgPSA3O1xcbiAgICBvcHRpb25hbCBzdHJpbmcgb3NzU2lnbiA9IDg7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBvc3NCdWNrZXROYW1lID0gOTtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIHMzQ3JlZGVudGlhbCA9IDEwO1xcbiAgICBvcHRpb25hbCBzdHJpbmcgczNBbGdvcml0aG0gPSAxMTtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIHMzRGF0ZSA9IDEyO1xcbiAgICBvcHRpb25hbCBzdHJpbmcgczNQb2xpY3kgPSAxMztcXG4gICAgb3B0aW9uYWwgc3RyaW5nIHMzU2lnbmF0dXJlID0gMTQ7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBzM0J1Y2tldE5hbWUgPSAxNTtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIHN0Y0F1dGhvcml6YXRpb24gPSAxNjtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIHN0Y0NvbnRlbnRTaGEyNTYgPSAxNztcXG4gICAgb3B0aW9uYWwgc3RyaW5nIHN0Y0RhdGUgPSAxODtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIHN0Y0J1Y2tldE5hbWUgPSAxOTtcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrSW4rXCIge1xcbiAgICByZXF1aXJlZCBzdHJpbmcgZG93bmxvYWRVcmwgPSAxO1xcbiAgfVxcbiAgbWVzc2FnZSBcIitDbitcIiB7XFxuICAgIHJlcXVpcmVkIHN0cmluZyBkb3dubG9hZFVybCA9IDE7XFxuICB9XFxuICBtZXNzYWdlIEFkZDJCbGFja0xpc3RJbnB1dCB7XFxuICAgIHJlcXVpcmVkIHN0cmluZyB1c2VySWQgPSAxO1xcbiAgfVxcbiAgbWVzc2FnZSBSZW1vdmVGcm9tQmxhY2tMaXN0SW5wdXQge1xcbiAgICByZXF1aXJlZCBzdHJpbmcgdXNlcklkID0gMTtcXG4gIH1cXG4gIG1lc3NhZ2UgUXVlcnlCbGFja0xpc3RJbnB1dCB7XFxuICAgIHJlcXVpcmVkIGludDMyIG5vdGhpbmcgPSAxO1xcbiAgfVxcbiAgbWVzc2FnZSBRdWVyeUJsYWNrTGlzdE91dHB1dCB7XFxuICAgIHJlcGVhdGVkIHN0cmluZyB1c2VySWRzID0gMTtcXG4gIH1cXG4gIG1lc3NhZ2UgQmxhY2tMaXN0U3RhdHVzSW5wdXQge1xcbiAgICByZXF1aXJlZCBzdHJpbmcgdXNlcklkID0gMTtcXG4gIH1cXG4gIG1lc3NhZ2UgQmxvY2tQdXNoSW5wdXQge1xcbiAgICByZXF1aXJlZCBzdHJpbmcgYmxvY2tlZUlkID0gMTtcXG4gIH1cXG4gIG1lc3NhZ2UgTW9kaWZ5UGVybWlzc2lvbklucHV0IHtcXG4gICAgcmVxdWlyZWQgaW50MzIgb3BlblN0YXR1cyA9IDE7XFxuICB9XFxuICBtZXNzYWdlIEdyb3VwSW5wdXQge1xcbiAgICByZXBlYXRlZCBHcm91cEluZm8gZ3JvdXBJbmZvID0gMTtcXG4gIH1cXG4gIG1lc3NhZ2UgR3JvdXBPdXRwdXQge1xcbiAgICByZXF1aXJlZCBpbnQzMiBub3RoaW5nID0gMTtcXG4gIH1cXG4gIG1lc3NhZ2UgR3JvdXBJbmZvIHtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIGlkID0gMTtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIG5hbWUgPSAyO1xcbiAgfVxcbiAgbWVzc2FnZSBHcm91cEhhc2hJbnB1dCB7XFxuICAgIHJlcXVpcmVkIHN0cmluZyB1c2VySWQgPSAxO1xcbiAgICByZXF1aXJlZCBzdHJpbmcgZ3JvdXBIYXNoQ29kZSA9IDI7XFxuICB9XFxuICBtZXNzYWdlIEdyb3VwSGFzaE91dHB1dCB7XFxuICAgIHJlcXVpcmVkIEdyb3VwSGFzaFR5cGUgcmVzdWx0ID0gMTtcXG4gIH1cXG4gIGVudW0gR3JvdXBIYXNoVHlwZSB7XFxuICAgIGdyb3VwX3N1Y2Nlc3MgPSAweDAwO1xcbiAgICBncm91cF9mYWlsdXJlID0gMHgwMTtcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrWnQrXCIge1xcbiAgICByZXF1aXJlZCBpbnQzMiBub3RoaW5nID0gMTtcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrWHQrXCIge1xcbiAgICByZXF1aXJlZCBpbnQzMiBub3RoaW5nID0gMTtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIHNlc3Npb25JZCA9IDI7XFxuICAgIG9wdGlvbmFsIGludDY0IGpvaW5UaW1lID0gMztcXG4gIH1cXG4gIG1lc3NhZ2UgXCIreHQrXCIge1xcbiAgICByZXF1aXJlZCBpbnQ2NCBzeW5jVGltZSA9IDE7XFxuICAgIHJlcXVpcmVkIGludDMyIGNvdW50ID0gMjtcXG4gIH1cXG5cXG4gIG1lc3NhZ2UgQ2hybVB1bGxNc2dOZXdcXG4gIHtcXG4gICAgcmVxdWlyZWQgaW50MzIgY291bnQgPSAxO1xcbiAgICByZXF1aXJlZCBpbnQ2NCBzeW5jVGltZSA9IDI7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBjaHJtSWQ9MztcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrcXQrXCJcXG4gIHtcXG4gICAgb3B0aW9uYWwgQ2hhbm5lbFR5cGUgdHlwZSA9IDE7XFxuICAgIG9wdGlvbmFsIGludDMyIGNvdW50ID0gMjtcXG4gICAgb3B0aW9uYWwgaW50NjQgc3RhcnRUaW1lID0gMztcXG4gICAgb3B0aW9uYWwgaW50MzIgb3JkZXIgPSA0O1xcbiAgfVxcbiAgbWVzc2FnZSBcIitRdCtcIlxcbiAge1xcbiAgICByZXF1aXJlZCBDaGFubmVsVHlwZSB0eXBlID0gMTtcXG4gICAgb3B0aW9uYWwgRG93blN0cmVhbU1lc3NhZ2UgbXNnID0yO1xcbiAgICBvcHRpb25hbCBpbnQzMiBjb3VudCA9IDM7XFxuICAgIHJlcGVhdGVkIHN0cmluZyBidXNDaGFubmVsID0gNDtcXG4gICAgb3B0aW9uYWwgaW50NjQgc3RhcnRUaW1lID0gNTtcXG4gICAgb3B0aW9uYWwgaW50NjQgZW5kVGltZSA9IDY7XFxuICB9XFxuICBtZXNzYWdlIFwiK0t0K1wiXFxuICB7XFxuICAgIHJlcGVhdGVkIFJlbGF0aW9uSW5mbyBpbmZvID0gMTtcXG4gICAgb3B0aW9uYWwgYm9vbCBpc0ZpbmlzaGVkID0gMjsvL+aYr+WQpue7k+adn1xcbiAgfVxcbiAgbWVzc2FnZSBSZWxhdGlvbkluZm9cXG4gIHtcXG4gICAgcmVxdWlyZWQgQ2hhbm5lbFR5cGUgdHlwZSA9IDE7XFxuICAgIHJlcXVpcmVkIHN0cmluZyB1c2VySWQgPSAyO1xcbiAgICBvcHRpb25hbCBEb3duU3RyZWFtTWVzc2FnZSBtc2cgPTM7XFxuICAgIG9wdGlvbmFsIGludDY0IHJlYWRNc2dUaW1lPSA0O1xcbiAgICBvcHRpb25hbCBpbnQ2NCB1bnJlYWRDb3VudD0gNTtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIGJ1c0NoYW5uZWwgPSA2Oy8v6K+l5raI5oGv5omA5bGe5Lya6K+d55qE5Lia5Yqh5qCH6K+GXFxuICAgIG9wdGlvbmFsIGludDY0IHZlcnNpb25UaW1lID0gNzsvL+S8muivnemhueWPmOabtOaXtumXtOaIs++8jOazqOaEjzrpnZ7mjpLluo/ml7bpl7TmiLNcXG4gICAgb3B0aW9uYWwgaW50NjQgcmVtaW5kQ291bnQgPSA4Oy8v6KKrQOeahOacquivu+aVsFxcbiAgfVxcbiAgbWVzc2FnZSBSZWxhdGlvbkluZm9SZWFkVGltZVxcbiAge1xcbiAgICByZXF1aXJlZCBDaGFubmVsVHlwZSB0eXBlID0gMTtcXG4gICAgcmVxdWlyZWQgaW50NjQgcmVhZE1zZ1RpbWU9IDI7XFxuICAgIHJlcXVpcmVkIHN0cmluZyB0YXJnZXRJZCA9IDM7XFxuICB9XFxuICBtZXNzYWdlIFwiK0p0K1wiXFxuICB7XFxuICAgICAgcmVxdWlyZWQgc3RyaW5nIHRhcmdldElkID0gMTtcXG4gICAgICByZXF1aXJlZCBpbnQ2NCBkYXRhVGltZSA9IDI7XFxuICAgICAgb3B0aW9uYWwgaW50MzIgY29udmVyc2F0aW9uVHlwZT0gMztcXG4gICAgICBvcHRpb25hbCBzdHJpbmcgYnVzQ2hhbm5lbCA9IDQ7IC8v6K+l5raI5oGv5omA5bGe5Lya6K+d55qE5Lia5Yqh5qCH6K+G77yM6ZmQ5Yi2MjDlrZfnrKbku6XlhoVcXG4gIH1cXG4gIG1lc3NhZ2UgSGlzdG9yeU1lc3NhZ2VJbnB1dFxcbiAge1xcbiAgICByZXF1aXJlZCBzdHJpbmcgdGFyZ2V0SWQgPSAxO1xcbiAgICByZXF1aXJlZCBpbnQ2NCBkYXRhVGltZSA9MjtcXG4gICAgcmVxdWlyZWQgaW50MzIgc2l6ZSAgPSAzO1xcbiAgfVxcblxcbiAgbWVzc2FnZSBIaXN0b3J5TWVzc2FnZXNPdXB1dFxcbiAge1xcbiAgICByZXBlYXRlZCBEb3duU3RyZWFtTWVzc2FnZSBsaXN0ID0gMTtcXG4gICAgcmVxdWlyZWQgaW50NjQgc3luY1RpbWUgPSAyO1xcbiAgICByZXF1aXJlZCBpbnQzMiBoYXNNc2cgPSAzO1xcbiAgfVxcbiAgbWVzc2FnZSBcIiskdCtcIlxcbiAge1xcbiAgICByZXF1aXJlZCBpbnQzMiBjb3VudD0gMTtcXG4gICAgb3B0aW9uYWwgaW50MzIgb3JkZXI9IDI7XFxuICB9XFxuXFxuICBtZXNzYWdlIFwiK2VuK1wiXFxuICB7XFxuICAgIG9wdGlvbmFsIGludDMyIHVzZXJUb3RhbE51bXMgPSAxO1xcbiAgICByZXBlYXRlZCBDaHJtTWVtYmVyIHVzZXJJbmZvcyA9IDI7XFxuICB9XFxuICBtZXNzYWdlIENocm1NZW1iZXJcXG4gIHtcXG4gICAgcmVxdWlyZWQgaW50NjQgdGltZSA9IDE7XFxuICAgIHJlcXVpcmVkIHN0cmluZyBpZCA9IDI7XFxuICB9XFxuICBtZXNzYWdlIE1QRm9sbG93SW5wdXRcXG4gIHtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIGlkID0gMTtcXG4gIH1cXG5cXG4gIG1lc3NhZ2UgTVBGb2xsb3dPdXRwdXRcXG4gIHtcXG4gICAgcmVxdWlyZWQgaW50MzIgbm90aGluZyA9IDE7XFxuICAgIG9wdGlvbmFsIE1wSW5mbyBpbmZvID0yO1xcbiAgfVxcblxcbiAgbWVzc2FnZSBcIitjbitcIlxcbiAge1xcbiAgICByZXF1aXJlZCBzdHJpbmcgc3RhdGUgPSAxO1xcbiAgfVxcblxcbiAgbWVzc2FnZSBNQ0ZvbGxvd091dHB1dFxcbiAge1xcbiAgICByZXF1aXJlZCBpbnQzMiBub3RoaW5nID0gMTtcXG4gICAgb3B0aW9uYWwgTXBJbmZvIGluZm8gPTI7XFxuICB9XFxuXFxuICBtZXNzYWdlIE1wSW5mb1xcbiAge1xcbiAgICByZXF1aXJlZCBzdHJpbmcgbXBpZD0xO1xcbiAgICByZXF1aXJlZCBzdHJpbmcgbmFtZSA9IDI7XFxuICAgIHJlcXVpcmVkIHN0cmluZyB0eXBlID0gMztcXG4gICAgcmVxdWlyZWQgaW50NjQgdGltZT00O1xcbiAgICBvcHRpb25hbCBzdHJpbmcgcG9ydHJhaXRVcmw9NTtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIGV4dHJhID02O1xcbiAgfVxcblxcbiAgbWVzc2FnZSBTZWFyY2hNcElucHV0XFxuICB7XFxuICAgIHJlcXVpcmVkIGludDMyIHR5cGU9MTtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIGlkPTI7XFxuICB9XFxuXFxuICBtZXNzYWdlIFNlYXJjaE1wT3V0cHV0XFxuICB7XFxuICAgIHJlcXVpcmVkIGludDMyIG5vdGhpbmc9MTtcXG4gICAgcmVwZWF0ZWQgTXBJbmZvIGluZm8gPSAyO1xcbiAgfVxcblxcbiAgbWVzc2FnZSBQdWxsTXBJbnB1dFxcbiAge1xcbiAgICByZXF1aXJlZCBpbnQ2NCB0aW1lPTE7XFxuICAgIHJlcXVpcmVkIHN0cmluZyBtcGlkPTI7XFxuICB9XFxuXFxuICBtZXNzYWdlIFB1bGxNcE91dHB1dFxcbiAge1xcbiAgICByZXF1aXJlZCBpbnQzMiBzdGF0dXM9MTtcXG4gICAgcmVwZWF0ZWQgTXBJbmZvIGluZm8gPSAyO1xcbiAgfVxcbiAgbWVzc2FnZSBcIitHdCtcIlxcbiAge1xcbiAgICBvcHRpb25hbCBzdHJpbmcgdGFyZ2V0SWQgPSAxO1xcbiAgICBvcHRpb25hbCBpbnQ2NCB0aW1lID0gMjtcXG4gICAgb3B0aW9uYWwgaW50MzIgY291bnQgID0gMztcXG4gICAgb3B0aW9uYWwgaW50MzIgb3JkZXIgPSA0O1xcbiAgICBvcHRpb25hbCBzdHJpbmcgYnVzQ2hhbm5lbCA9IDU7IC8v6K+l5raI5oGv5omA5bGe5Lya6K+d55qE5Lia5Yqh5qCH6K+G77yM6ZmQ5Yi2MjDlrZfnrKbku6XlhoVcXG4gIH1cXG5cXG4gIG1lc3NhZ2UgXCIrRnQrXCJcXG4gIHtcXG4gICAgcmVwZWF0ZWQgRG93blN0cmVhbU1lc3NhZ2UgbGlzdD0xO1xcbiAgICByZXF1aXJlZCBpbnQ2NCBzeW5jVGltZT0yO1xcbiAgICByZXF1aXJlZCBpbnQzMiBoYXNNc2c9MztcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrcG4rXCJ7XFxuICAgIG9wdGlvbmFsIGludDMyIG9yZGVyPTE7XFxuICB9XFxuXFxuICBtZXNzYWdlIFwiK3luK1wie1xcbiAgICByZXBlYXRlZCBzdHJpbmcga2V5PTE7XFxuICB9XFxuXFxuICBtZXNzYWdlIFwiK19uK1wie1xcbiAgICByZXF1aXJlZCBzdHJpbmcga2V5PTE7XFxuICAgIHJlcXVpcmVkIHN0cmluZyB2YWx1ZT0yO1xcbiAgfVxcblxcbiAgbWVzc2FnZSBSdGNVc2VySW5mb3tcXG4gICAgcmVxdWlyZWQgc3RyaW5nIHVzZXJJZD0xO1xcbiAgICByZXBlYXRlZCBcIitfbitcIiB1c2VyRGF0YT0yOyAvL+eUqOaIt+i1hOa6kOS/oeaBr1xcbiAgfVxcblxcbiAgbWVzc2FnZSBcIitubitcIntcXG4gICAgcmVwZWF0ZWQgUnRjVXNlckluZm8gdXNlcnM9MTtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIHRva2VuPTI7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBzZXNzaW9uSWQ9MztcXG4gICAgcmVwZWF0ZWQgUnRjVmFsdWVJbmZvIHJvb21JbmZvID0gNDsgLy/miL/pl7RrZXkgdmFsdWVcXG4gICAgcmVwZWF0ZWQgUnRjS1ZFbnRpdHkgZW50cmllcyA9IDU7Ly/nm7Tmkq1LVuWxnuaAp+WvueixoembhuWQiFxcbiAgICBvcHRpb25hbCBpbnQ2NCBzeW5jVGltZSA9IDY7Ly/miYDmnInlsZ7mgKfnmoTmnIDlpKfml7bpl7TmiLPvvIjkuIvmrKHmi4nlj5ZLVuaXtueUqO+8ieOAglxcbiAgICBvcHRpb25hbCBpbnQzMiBvZmZsaW5lS2lja1RpbWUgPSA3Oy8vc2VydmVy6LaF5pe26Lii5Lq65pe26Ze077yM6buY6K6kNjBzXFxuICB9XFxuICBtZXNzYWdlIFJ0Y1Jvb21JbmZvT3V0cHV0e1xcbiAgICBvcHRpb25hbCBzdHJpbmcgcm9vbUlkID0gMTtcXG4gICAgcmVwZWF0ZWQgXCIrX24rXCIgcm9vbURhdGEgPSAyO1xcbiAgICBvcHRpb25hbCBpbnQzMiB1c2VyQ291bnQgPSAzO1xcbiAgICByZXBlYXRlZCBSdGNVc2VySW5mbyBsaXN0PTQ7XFxuICB9XFxuICBtZXNzYWdlIFwiK3RuK1wie1xcbiAgICByZXF1aXJlZCBpbnQzMiByb29tVHlwZT0xO1xcbiAgICBvcHRpb25hbCBpbnQzMiBicm9hZGNhc3RUeXBlPTI7XFxuICAgIG9wdGlvbmFsIFJ0Y1ZhbHVlSW5mbyBleHRyYUlubmVyRGF0YSA9IDM7XFxuICAgIG9wdGlvbmFsIGJvb2wgbmVlZFN5c0NoYXRyb29tID0gNDsgLy/mmK/lkKbpnIDopoHlkIzmraXogYrlpKnlrqRcXG4gICAgb3B0aW9uYWwgSWRlbnRpdHlDaGFuZ2VUeXBlIGlkZW50aXR5Q2hhbmdlVHlwZSA9IDU7IC8v6Lqr5Lu95Y+Y5pu057G75Z6LXFxuICAgIG9wdGlvbmFsIEpvaW5UeXBlIGpvaW5UeXBlID0gNjsgLy8g5Yqg5YWl5oi/6Ze057G75Z6LXFxuICAgIHJlcGVhdGVkIFwiK19uK1wiIGlubmVyRGF0YXMgPSA3OyAvL+eUqOaIt+WGhemDqGlubmVy5pWw5o2u77yM6KeS6Imy5oiW6ICF6L+e6bqm5L+h5oGv562JXFxuICAgIHJlcGVhdGVkIFwiK19uK1wiIG91dGVyRGF0YXMgPSA4OyAvL+eUqOaIt+WGhemDqG91dGVy5pWw5o2u77yM6Ieq5a6a5LmJ5pWw5o2u57uT5p6EUnRjSW5wdXTjgIJcXG4gIH1cXG4gIGVudW0gSm9pblR5cGUge1xcbiAgICBLSUNLID0gMDsgLy/ouKLliY3kuIDkuKrorr7lpIdcXG4gICAgUkVGVVNFID0gMTsgLy/lvZPliY3liqDlhaXmi5Lnu51cXG4gICAgQ09FWElTVCA9IDI7IC8v5Lik5Liq6K6+5aSH5YWx5a2YXFxuICB9XFxuICBtZXNzYWdlIFJ0Y1FyeUlucHV0e1xcbiAgICByZXF1aXJlZCBib29sIGlzSW50ZXJpb3I9MTtcXG4gICAgcmVxdWlyZWQgdGFyZ2V0VHlwZSB0YXJnZXQ9MjtcXG4gICAgcmVwZWF0ZWQgc3RyaW5nIGtleT0zO1xcbiAgfVxcbiAgbWVzc2FnZSBcIitsbitcIntcXG4gICAgcmVwZWF0ZWQgXCIrX24rXCIgb3V0SW5mbz0xO1xcbiAgfVxcbiAgbWVzc2FnZSBSdGNEZWxEYXRhSW5wdXR7XFxuICAgIHJlcGVhdGVkIHN0cmluZyBrZXk9MTtcXG4gICAgcmVxdWlyZWQgYm9vbCBpc0ludGVyaW9yPTI7XFxuICAgIHJlcXVpcmVkIHRhcmdldFR5cGUgdGFyZ2V0PTM7XFxuICB9XFxuICBtZXNzYWdlIFwiK2FuK1wie1xcbiAgICByZXF1aXJlZCBib29sIGludGVyaW9yPTE7XFxuICAgIHJlcXVpcmVkIHRhcmdldFR5cGUgdGFyZ2V0PTI7XFxuICAgIHJlcGVhdGVkIHN0cmluZyBrZXk9MztcXG4gICAgb3B0aW9uYWwgc3RyaW5nIG9iamVjdE5hbWU9NDtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIGNvbnRlbnQ9NTtcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrc24rXCJ7XFxuICAgIHJlcXVpcmVkIGJvb2wgaW50ZXJpb3I9MTtcXG4gICAgcmVxdWlyZWQgdGFyZ2V0VHlwZSB0YXJnZXQ9MjtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIGtleT0zO1xcbiAgICByZXF1aXJlZCBzdHJpbmcgdmFsdWU9NDtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIG9iamVjdE5hbWU9NTtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIGNvbnRlbnQ9NjtcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrb24rXCIge1xcbiAgICByZXBlYXRlZCBcIitfbitcIiB2YWx1ZUluZm8gPSAxO1xcbiAgICByZXF1aXJlZCBzdHJpbmcgb2JqZWN0TmFtZSA9IDI7XFxuICAgIHJlcGVhdGVkIFwiK19uK1wiIGNvbnRlbnQgPSAzO1xcbiAgfVxcbiAgbWVzc2FnZSBSdGNPdXRwdXRcXG4gIHtcXG4gICAgb3B0aW9uYWwgaW50MzIgbm90aGluZz0xO1xcbiAgfVxcbiAgbWVzc2FnZSBcIitobitcIntcXG4gICAgcmVxdWlyZWQgc3RyaW5nIHJ0Y1Rva2VuPTE7XFxuICB9XFxuICBlbnVtIHRhcmdldFR5cGUge1xcbiAgICBST09NID0xIDtcXG4gICAgUEVSU09OID0gMjtcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrdW4rXCJ7XFxuICAgIHJlcXVpcmVkIHRhcmdldFR5cGUgdGFyZ2V0PTE7XFxuICAgIHJlcGVhdGVkIFwiK19uK1wiIHZhbHVlSW5mbz0yO1xcbiAgICBvcHRpb25hbCBzdHJpbmcgb2JqZWN0TmFtZT0zO1xcbiAgICBvcHRpb25hbCBzdHJpbmcgY29udGVudD00O1xcbiAgfVxcbiAgbWVzc2FnZSBcIitkbitcIntcXG4gICAgcmVwZWF0ZWQgc3RyaW5nIHVzZXJJZCA9IDE7XFxuICB9XFxuICBtZXNzYWdlIFwiK2ZuK1wie1xcbiAgICByZXBlYXRlZCBSdGNVc2VySW5mbyB1c2VyID0gMTtcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrRHQrXCJ7XFxuICAgIHJlcXVpcmVkIGludDMyIG5vdGhpbmcgPSAxO1xcbiAgfVxcbiAgbWVzc2FnZSBcIitWdCtcIntcXG4gICAgcmVxdWlyZWQgaW50NjQgaW5ib3hUaW1lID0gMTtcXG4gICAgcmVxdWlyZWQgaW50NjQgc2VuZGJveFRpbWUgPSAyO1xcbiAgICByZXF1aXJlZCBpbnQ2NCB0b3RhbFVucmVhZENvdW50ID0gMztcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrenQrXCJcXG4gIHtcXG4gICAgcmVxdWlyZWQgQ2hhbm5lbFR5cGUgdHlwZSA9IDE7XFxuICAgIHJlcXVpcmVkIGludDY0IG1zZ1RpbWUgPSAyO1xcbiAgICByZXF1aXJlZCBzdHJpbmcgY2hhbm5lbElkID0gMztcXG4gICAgb3B0aW9uYWwgc3RyaW5nIGJ1c0NoYW5uZWwgPSA0Oy8v6K+l5raI5oGv5omA5bGe5Lya6K+d55qE5Lia5Yqh5qCH6K+GXFxuICB9XFxuICBtZXNzYWdlIFNlc3Npb25Nc2dSZWFkT3V0cHV0XFxuICB7XFxuICAgIG9wdGlvbmFsIGludDMyIG5vdGhpbmc9MTtcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrSHQrXCJcXG4gIHtcXG4gICAgcmVwZWF0ZWQgU2Vzc2lvbkluZm8gc2Vzc2lvbnMgPSAxO1xcbiAgfVxcbiAgbWVzc2FnZSBcIitZdCtcIlxcbiAge1xcbiAgICByZXF1aXJlZCBDaGFubmVsVHlwZSB0eXBlID0gMTtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIGNoYW5uZWxJZCA9IDI7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBidXNDaGFubmVsID0gMzsvL+aJgOWxnuS8muivneS4muWKoeagh+ivhlxcbiAgfVxcbiAgbWVzc2FnZSBcIitqdCtcIlxcbiAge1xcbiAgICBvcHRpb25hbCBpbnQzMiBub3RoaW5nPTE7XFxuICB9XFxuICBtZXNzYWdlIFwiK1d0K1wiXFxuICB7XFxuICAgIG9wdGlvbmFsIENoYW5uZWxUeXBlIHR5cGUgPSAxO1xcbiAgICBvcHRpb25hbCBzdHJpbmcgY29udmVyc2F0aW9uSWQgPSAyO1xcbiAgICByZXBlYXRlZCBEZWxldGVNc2cgbXNncyA9IDM7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBidXNDaGFubmVsID0gNDsgLy/or6Xmtojmga/miYDlsZ7kvJror53nmoTkuJrliqHmoIfor4bvvIzpmZDliLYyMOWtl+espuS7peWGhVxcbiAgfVxcbiAgbWVzc2FnZSBEZWxldGVNc2dcXG4gIHtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIG1zZ0lkID0gMTtcXG4gICAgb3B0aW9uYWwgaW50NjQgbXNnRGF0YVRpbWUgPSAyO1xcbiAgICBvcHRpb25hbCBpbnQzMiBkaXJlY3QgPSAzO1xcbiAgfVxcbiAgbWVzc2FnZSBDaHJtS1ZFbnRpdHkge1xcbiAgICByZXF1aXJlZCBzdHJpbmcga2V5ID0gMTtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIHZhbHVlID0gMjtcXG4gICAgb3B0aW9uYWwgaW50MzIgc3RhdHVzID0gMztcXG4gICAgb3B0aW9uYWwgaW50NjQgdGltZXN0YW1wID0gNDtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIHVpZCA9IDU7XFxuICAgIG9wdGlvbmFsIGludDY0IHZlcnNpb24gPSA2O1xcbiAgfVxcbiAgbWVzc2FnZSBcIitTbitcIiB7XFxuICAgIHJlcXVpcmVkIENocm1LVkVudGl0eSBlbnRyeSA9IDE7XFxuICAgIG9wdGlvbmFsIGJvb2wgYk5vdGlmeSA9IDI7XFxuICAgIG9wdGlvbmFsIFVwU3RyZWFtTWVzc2FnZSBub3RpZmljYXRpb24gPSAzO1xcbiAgICBvcHRpb25hbCBDaGFubmVsVHlwZSB0eXBlID0gNDtcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrTm4rXCIge1xcbiAgICByZXBlYXRlZCBDaHJtS1ZFbnRpdHkgZW50cnkgPSAxO1xcbiAgICBvcHRpb25hbCBib29sIGJOb3RpZnkgPSAyO1xcbiAgICBvcHRpb25hbCBVcFN0cmVhbU1lc3NhZ2Ugbm90aWZpY2F0aW9uID0gMztcXG4gICAgb3B0aW9uYWwgQ2hhbm5lbFR5cGUgdHlwZSA9IDQ7XFxuICB9XFxuICBtZXNzYWdlIFwiK09uK1wiIHtcXG4gICAgcmVwZWF0ZWQgQ2hybUtWRW50aXR5IGVudHJ5ID0gMTtcXG4gICAgb3B0aW9uYWwgYm9vbCBiTm90aWZ5ID0gMjtcXG4gICAgb3B0aW9uYWwgVXBTdHJlYW1NZXNzYWdlIG5vdGlmaWNhdGlvbiA9IDM7XFxuICAgIG9wdGlvbmFsIENoYW5uZWxUeXBlIHR5cGUgPSA0O1xcbiAgfVxcbiAgbWVzc2FnZSBcIitNbitcIiB7XFxuICAgIHJlcGVhdGVkIENocm1LVkVudGl0eSBlbnRyaWVzID0gMTtcXG4gICAgb3B0aW9uYWwgYm9vbCBiRnVsbFVwZGF0ZSA9IDI7XFxuICAgIG9wdGlvbmFsIGludDY0IHN5bmNUaW1lID0gMztcXG4gIH1cXG4gIG1lc3NhZ2UgQ2hybUtWU1ZlcnNpb25FbnRpdHkge1xcbiAgICBvcHRpb25hbCBpbnQ2NCB2ZXJzaW9uID0gMTtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIGtleSA9IDI7XFxuICB9XFxuXFxuICBtZXNzYWdlIFwiK3duK1wiIHtcXG4gICAgcmVwZWF0ZWQgQ2hybUtWU091dHB1dEVudGl0eSBlcnJvcktleXMgPSAxO1xcbiAgICByZXBlYXRlZCBDaHJtS1ZTVmVyc2lvbkVudGl0eSBrZXlzVmVyc2lvbiA9IDI7XFxuICB9XFxuICBtZXNzYWdlIFwiK1VuK1wiXFxuICB7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBrZXkgPSAxO1xcbiAgICBvcHRpb25hbCBpbnQzMiBlcnJvckNvZGUgPSAyO1xcbiAgfVxcbiAgbWVzc2FnZSBcIitibitcIiB7XFxuICAgIHJlcXVpcmVkIGludDY0IHRpbWVzdGFtcCA9IDE7XFxuICB9XFxuICBtZXNzYWdlIFwiK0xuK1wiIHtcXG4gICAgcmVxdWlyZWQgaW50NjQgdmVyc2lvbj0xO1xcbiAgICByZXF1aXJlZCBzdHJpbmcgdmFsdWU9MjtcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrUG4rXCIge1xcbiAgICByZXF1aXJlZCBpbnQ2NCB2ZXJzaW9uPTE7XFxuICAgIHJlcXVpcmVkIGJvb2wgcmVzZXJ2ZT0yO1xcbiAgfVxcbiAgbWVzc2FnZSBcIitEbitcIiB7XFxuICAgIHJlcXVpcmVkIGludDY0IHZlcnNpb249MTtcXG4gICAgb3B0aW9uYWwgYm9vbCByZXNlcnZlPTI7XFxuICB9XFxuICBtZXNzYWdlIFwiK1ZuK1wiIHtcXG4gICAgcmVwZWF0ZWQgVXNlclNldHRpbmdJdGVtIGl0ZW1zID0gMTtcXG4gICAgcmVxdWlyZWQgaW50NjQgdmVyc2lvbj0yO1xcbiAgfVxcbiAgbWVzc2FnZSBVc2VyU2V0dGluZ0l0ZW0ge1xcbiAgICByZXF1aXJlZCBzdHJpbmcgdGFyZ2V0SWQ9IDE7XFxuICAgIHJlcXVpcmVkIENoYW5uZWxUeXBlIHR5cGUgPSAyO1xcbiAgICByZXF1aXJlZCBzdHJpbmcga2V5ID0gNDtcXG4gICAgcmVxdWlyZWQgYnl0ZXMgdmFsdWUgPSA1O1xcbiAgICByZXF1aXJlZCBpbnQ2NCB2ZXJzaW9uPTY7XFxuICAgIHJlcXVpcmVkIGludDMyIHN0YXR1cz03O1xcbiAgICByZXBlYXRlZCBTZXNzaW9uVGFnSXRlbSB0YWdzPSA4O1xcbiAgfVxcbiAgbWVzc2FnZSBcIit4bitcIiB7XFxuICAgIHJlcXVpcmVkIGludDY0IHRpbWUgPSAxO1xcbiAgfVxcbiAgbWVzc2FnZSBcIitCbitcIiB7XFxuICAgIHJlcXVpcmVkIGludDY0IHZlcnNpb249MTtcXG4gICAgcmVwZWF0ZWQgU2Vzc2lvblN0YXRlIHN0YXRlPSAyO1xcbiAgfVxcbiAgbWVzc2FnZSBcIitHbitcIiB7XFxuICAgIHJlcXVpcmVkIENoYW5uZWxUeXBlIHR5cGUgPSAxO1xcbiAgICByZXF1aXJlZCBzdHJpbmcgY2hhbm5lbElkID0gMjtcXG4gICAgb3B0aW9uYWwgaW50NjQgdGltZSA9IDM7XFxuICAgIHJlcGVhdGVkIFNlc3Npb25TdGF0ZUl0ZW0gc3RhdGVJdGVtID0gNDtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIGJ1c0NoYW5uZWwgPSA1Oy8v6K+l5raI5oGv5omA5bGe5Lya6K+d55qE5Lia5Yqh5qCH6K+GXFxuICB9XFxuICBtZXNzYWdlIFwiK0ZuK1wiIHtcXG4gICAgcmVxdWlyZWQgU2Vzc2lvblN0YXRlVHlwZSBzZXNzaW9uU3RhdGVUeXBlID0gMTtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIHZhbHVlID0gMjtcXG4gICAgcmVwZWF0ZWQgU2Vzc2lvblRhZ0l0ZW0gdGFncyA9IDM7XFxuICB9XFxuICBlbnVtIFNlc3Npb25TdGF0ZVR5cGUge1xcbiAgICBJc1NpbGVudCA9IDE7XFxuICAgIElzVG9wID0gMjtcXG4gICAgVGFncyA9IDM7XFxuICB9XFxuICBtZXNzYWdlIFwiK3FuK1wiIHtcXG4gICAgcmVxdWlyZWQgaW50NjQgdmVyc2lvbj0xO1xcbiAgICByZXBlYXRlZCBTZXNzaW9uU3RhdGUgc3RhdGU9IDI7XFxuICB9XFxuICBtZXNzYWdlIFwiK0tuK1wiIHtcXG4gICAgcmVxdWlyZWQgaW50NjQgdmVyc2lvbj0xO1xcbiAgfVxcbiAgbWVzc2FnZSBcIitIbitcIiB7XFxuICAgIHJlcGVhdGVkIHN0cmluZyBtc2dJZD0xOyAvL+W3suivu+a2iOaBr0lEXFxuICAgIG9wdGlvbmFsIHN0cmluZyBjaGFubmVsSWQgPSAyOyAvLyDor6Xmtojmga/miYDlsZ7kvJror53nmoTkuJrliqHmoIfor4ZcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrWW4rXCIge1xcbiAgICByZXBlYXRlZCBzdHJpbmcgbXNnSWQ9MTsgLy/lt7Lor7vmtojmga9JRFxcbiAgICBvcHRpb25hbCBzdHJpbmcgY2hhbm5lbElkID0gMjsgLy8g6K+l5raI5oGv5omA5bGe5Lya6K+d55qE5Lia5Yqh5qCH6K+GXFxuICB9XFxuICBtZXNzYWdlIFwiK2puK1wiIHtcXG4gICAgcmVxdWlyZWQgaW50MzIgdG90YWxNZW1iZXJOdW0gPSAxOy8v576k5YaF5oC75Lq65pWwXFxuICAgIHJlcGVhdGVkIEdycE1zZ1JlYWRVc2VyIGxpc3QgPSAyOy8v5bey6K+755So5oi35YiX6KGo77yIbGlzdOWkjeexu+Wei++8iVxcbiAgfVxcbiAgbWVzc2FnZSBcIitRbitcIiB7XFxuICAgIHJlcXVpcmVkIGludDY0IHJlYWRUaW1lID0gMTsvL+W3suivu+aXtumXtFxcbiAgICByZXF1aXJlZCBzdHJpbmcgdXNlcklkID0gMjsvL+W3suivu+eUqOaIt2lkXFxuICB9XFxuICBtZXNzYWdlIFwiK1duK1wiIHtcXG4gICAgcmVxdWlyZWQgaW50NjQgdmVyc2lvbj0xO1xcbiAgICByZXBlYXRlZCBTZXNzaW9uVGFnSXRlbSB0YWdzPTI7XFxuICB9XFxuICBtZXNzYWdlIFwiK0puK1wiIHtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIHRhZ0lkPTE7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBuYW1lPTI7XFxuICAgIG9wdGlvbmFsIGludDY0IGNyZWF0ZWRUaW1lPTM7XFxuICAgIG9wdGlvbmFsIGJvb2wgaXNUb3A9NDtcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrem4rXCIge1xcbiAgICByZXF1aXJlZCBpbnQ2NCB2ZXJzaW9uPTE7XFxuICAgIHJlcGVhdGVkIFNlc3Npb25UYWdJdGVtIHRhZ3M9MjtcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrWm4rXCIge1xcbiAgICByZXBlYXRlZCBzdHJpbmcgdGFnSWQ9MTtcXG4gIH1cXG4gIG1lc3NhZ2UgXCIra24rXCIge1xcbiAgICByZXF1aXJlZCBpbnQ2NCB2ZXJzaW9uPTE7XFxuICAgIHJlcXVpcmVkIGJvb2wgcmVzZXJ2ZT0yO1xcbiAgfVxcbiAgbWVzc2FnZSBcIitYbisnIHtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIHNka0luZm89MTsgLy8g55So5oi36ZuG5oiQ55qEIHNkayDkv6Hmga8sanNvbiDmoLzlvI8ge1wid2ViLXJ0Y1wiOiBcIjQuMC4zLjdcIn1cXG4gIH1cXG4gIG1lc3NhZ2UgJyskbitcIlxcbiAge1xcbiAgICBvcHRpb25hbCBpbnQzMiBub3RoaW5nPTE7IC8v5Y2g5L2NXFxuICB9XFxuICBtZXNzYWdlIFwiK2ZpK1wiIFxcbiAge1xcbiAgICByZXF1aXJlZCBpbnQzMiB0eXBlPSAxOyAgIC8vKOmAmuefpeexu+WeiyAxOnJ0Y+aIv+mXtOeKtuaAgUtW5Y+Y5pu06YCa55+lKVxcbiAgICBvcHRpb25hbCBpbnQ2NCB0aW1lPSAyOyAgIC8v5raI5oGv5Lqn55Sf5pe26Ze0XFxuICAgIG9wdGlvbmFsIHN0cmluZyByb29tSWQ9MzsgLy/kuLvmkq3miL/pl7RpZFxcbiAgfVxcbiAgbWVzc2FnZSBcIitwaStcIlxcbiAge1xcbiAgICByZXF1aXJlZCBpbnQ2NCB0aW1lc3RhbXAgPSAxO1xcbiAgICByZXF1aXJlZCBzdHJpbmcgcm9vbUlkID0gMjtcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrZ2krXCJcXG4gIHtcXG4gICAgcmVwZWF0ZWQgUnRjS1ZFbnRpdHkgZW50cmllcyA9IDE7XFxuICAgIG9wdGlvbmFsIGJvb2wgYkZ1bGxVcGRhdGUgPSAyO1xcbiAgICBvcHRpb25hbCBpbnQ2NCBzeW5jVGltZSA9IDM7IFxcbiAgfVxcbiAgbWVzc2FnZSBSdGNLVkVudGl0eSBcXG4gIHtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIGtleSA9IDE7XFxuICAgIHJlcXVpcmVkIHN0cmluZyB2YWx1ZSA9IDI7XFxuICAgIG9wdGlvbmFsIGludDMyIHN0YXR1cyA9IDM7XFxuICAgIG9wdGlvbmFsIGludDY0IHRpbWVzdGFtcCA9IDQ7XFxuICAgIG9wdGlvbmFsIHN0cmluZyB1aWQgPSA1O1xcbiAgfVxcbiAgZW51bSBJZGVudGl0eUNoYW5nZVR5cGUgXFxuICB7XFxuICAgIEFuY2hvclRvVmlld2VyID0gMTsgLy8x5Li65Li75pKt5Y+Y6KeC5LyXXFxuICAgIFZpZXdlclRvQW5jaG9yID0gMjsgLy8y5Li66KeC5LyX5Y+Y5Li75pKtXFxuICB9XFxuICBtZXNzYWdlIFwiK19pK1wiXFxuICB7XFxuICAgIHJlcXVpcmVkIHN0cmluZyB1c2VySWQgPSAxO1xcbiAgfVxcbiAgbWVzc2FnZSBcIit5aStcIlxcbiAge1xcbiAgICByZXBlYXRlZCBSdGNKb2luZWRJbmZvIGluZm8gPSAxO1xcbiAgfVxcbiAgbWVzc2FnZSBSdGNKb2luZWRJbmZvXFxuICB7XFxuICAgIHJlcXVpcmVkIHN0cmluZyBkZXZpY2VJZCA9IDE7IC8v6K6+5aSHSURcXG4gICAgcmVxdWlyZWQgc3RyaW5nIHJvb21JZCA9IDI7ICAgLy/liqDlhaXnmoTmiL/pl7RJRFxcbiAgICBvcHRpb25hbCBpbnQ2NCBqb2luVGltZSA9IDM7ICAvL+WKoOWFpeeahOaXtumXtFxcbiAgfVxcbiAgbWVzc2FnZSBcIittaStcIlxcbiAge1xcbiAgICByZXF1aXJlZCBzdHJpbmcgcnRjVG9rZW49MTtcXG4gICAgcmVwZWF0ZWQgUnRjS1ZFbnRpdHkgZW50cmllcyA9IDI7Ly9LVuWxnuaAp+WvueixoembhuWQiFxcbiAgICBvcHRpb25hbCBpbnQ2NCBzeW5jVGltZSA9IDM7Ly/miYDmnInlsZ7mgKfnmoTmnIDlpKfml7bpl7TmiLPvvIjkuIvmrKHmi4nlj5ZLVuaXtueUqO+8ieOAglxcbiAgfVxcbiAgbWVzc2FnZSBcIit2aStcIlxcbiAge1xcbiAgICByZXF1aXJlZCBzdHJpbmcgaW52aXRlZFVzZXJJZD0xOyAgICAvL+iiq+mCgOivt+eahOS6uueahHVpZFxcbiAgICBvcHRpb25hbCBpbnQzMiAgdGltZW91dFRpbWU9MjsgICAgICAgLy/pgoDor7fotoXml7bml7bpl7Qo56eSKSzpu5jorqTkuInljYHnp5JcXG4gICAgcmVxdWlyZWQgc3RyaW5nIGludml0ZWRSb29tSWQ9MzsgICAgLy/ooqvpgoDor7fnmoTmiL/pl7RcXG4gICAgcmVxdWlyZWQgc3RyaW5nIGludml0ZUluZm89NDsgICAgICAgLy/pgoDor7fnmoTkv6Hmga8o5YyF5ZCr6YKA6K+35Lq6LOiiq+mCgOivt+S6uizlkIToh6p1c2VyaWQp5a6i5oi356uv5a6a5LmJ5aW9LuWNj+iuruagiOWSjHNlcnZlcumAj+S8oFxcbiAgICByZXF1aXJlZCBzdHJpbmcgaW52aXRlU2Vzc2lvbklkPSA1OyAvL+WuouaIt+err+S/neivgeWUr+S4gOaApyjlu7rorq5yb29taWRfdXNlcmlkX+aXtumXtOaIs1/pmo/mnLrmlbApXFxuICB9XFxuICBtZXNzYWdlIFwiK0VpK1wiXFxuICB7XFxuICAgIHJlcXVpcmVkIHN0cmluZyBpbnZpdGVkVXNlcklkPTE7ICAgLy/ooqvpgoDor7fnmoTkurrnmoR1aWRcXG4gICAgcmVxdWlyZWQgc3RyaW5nIGludml0ZWRSb29tSWQ9MjsgICAvL+iiq+mCgOivt+eahOaIv+mXtFxcbiAgICByZXF1aXJlZCBzdHJpbmcgaW52aXRlSW5mbz0zOyAgICAgIC8v5Y+W5raI6YKA6K+355qE5L+h5oGvKOWMheWQq+mCgOivt+S6uizooqvpgoDor7fkuros5ZCE6IeqdXNlcmlkKeWuouaIt+err+WumuS5ieWlvS7ljY/orq7moIjlkoxzZXJ2ZXLpgI/kvKBcXG4gICAgcmVxdWlyZWQgc3RyaW5nIGludml0ZVNlc3Npb25JZD00OyAvL+mCgOivt+eahHNlc3Npb25JZCzlrqLmiLfnq6/lj5HotbfpgoDor7fml7bkuqfnlJ9cXG4gIH1cXG4gIG1lc3NhZ2UgXCIrVGkrXCJcXG4gIHtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIGludml0ZVVzZXJJZD0xOyAgICAvL+mCgOivt+eahOS6uueahHVpZFxcbiAgICByZXF1aXJlZCBpbnQzMiAgYW5zd2VyQ29kZT0yOyAgICAgIC8v5piv5ZCm5o6l5Y+X6L+e6bqm6YKA6K+3LjDkuLrmi5Lnu50sMeS4uuaOpeWPl1xcbiAgICByZXF1aXJlZCBzdHJpbmcgaW52aXRlUm9vbUlkPTM7ICAgIC8v6YKA6K+355qE5oi/6Ze0XFxuICAgIHJlcXVpcmVkIHN0cmluZyBpbnZpdGVTZXNzaW9uSWQ9NDsgLy/pgoDor7fnmoRzZXNzaW9uSWRcXG4gICAgcmVxdWlyZWQgc3RyaW5nIGNvbnRlbnQ9NTsgICAgICAgICAvL+mcgOimgei9rOWPkeeahGNvbnRlbnRcXG4gICAgb3B0aW9uYWwgc3RyaW5nIGtleT02OyAgICAgICAgICAgICAvL+WmguaenOaOpeWPl+eahOivnSzpnIDopoHliqDov5nkuKrlrZfmrrUs5pS+5Zyocm9vbee6p+WIq+eahGvlkox2LOaWsOWKoOWFpeaIv+mXtOeahOiDveaLieWPluWIsFxcbiAgICBvcHRpb25hbCBzdHJpbmcgdmFsdWU9NzsgICAgICAgICAgIC8v5aaC5p6c5o6l5Y+X55qE6K+dLOmcgOimgeWKoOi/meS4quWtl+autSzmlL7lnKhyb29t57qn5Yir55qEa+WSjHYs5paw5Yqg5YWl5oi/6Ze055qE6IO95ouJ5Y+W5YiwXFxuICB9XFxuICBtZXNzYWdlIFwiK0lpK1wiXFxuICB7XFxuICAgIHJlcXVpcmVkIHN0cmluZyBpbnZpdGVSb29tSWQ9MTsgICAgLy/pgoDor7fnmoTmiL/pl7RcXG4gICAgcmVxdWlyZWQgc3RyaW5nIGludml0ZVNlc3Npb25JZD0yOyAvL+mCgOivt+eahHNlc3Npb25JZFxcbiAgICByZXF1aXJlZCBzdHJpbmcgaW52aXRlQ29udGVudD0zOyAgIC8v57uT5p2f6L+e6bqm55qE5L+h5oGvKOmcgOimgemAj+S8oOe7meaIv+mXtOWGheWFtuS7luS6uilcXG4gICAgcmVwZWF0ZWQgc3RyaW5nIGludml0ZVJvb21LZXlzPTQ7ICAvL+mcgOimgeWIoOmZpOi/num6pueahOS/oeaBr+eahGtleVxcbiAgfVxcbiAgbWVzc2FnZSBcIitlaStcIlxcbiAge1xcbiAgICAgIHJlcXVpcmVkIGludDY0IHN5bmNUaW1lID0gMTsvL+WQjOatpeaXtumXtOaIs1xcbiAgICAgIG9wdGlvbmFsIGJvb2wgaXNFcmFzZU1zZ0NvbnRlbnQgPSAyOy8v5ouJ5Y+W5Lya6K+d5pe277yM5piv5ZCm5bGP6JS95o6J5raI5oGv5YaF5a65XFxuICB9XFxuICBtZXNzYWdlIFwiK3RpK1wiXFxuICB7XFxuICAgIHJlcXVpcmVkIGludDY0IHN5bmNUaW1lID0gMTsvL+WQjOatpeaXtumXtOaIs1xcbiAgfVxcbiAgbWVzc2FnZSAgXCIrbmkrXCJcXG4gIHtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIGZyb21Vc2VySWQgPSAxOy8v77yI6LCB5Y+R55qE77yJXFxuICAgIHJlcXVpcmVkIHN0cmluZyB0YXJnZXRJZCA9IDI7Ly8g55uu5qCHSWQo6LaF57qn576kSWQpXFxuICAgIHJlcXVpcmVkIENoYW5uZWxUeXBlIHR5cGUgPSAzOy8v5Y+R6YCB57G75Z6L5aaC77ya77yIUDJQLEdST1VQLFVMVFJBR1JPVVDvvIlcXG4gICAgcmVxdWlyZWQgc3RyaW5nIG1zZ1VJRCA9IDQ7IC8vIOaJqeWxlea2iOaBr+eahOWGheWuueS9k1xcbiAgICByZXF1aXJlZCBpbnQ2NCBtc2dUaW1lID0gNTsgLy/ljp/lp4vmtojmga/ml7bpl7RcXG4gICAgb3B0aW9uYWwgc3RyaW5nIGJ1c0NoYW5uZWwgPSA2OyAvLyDor6Xmtojmga/miYDlsZ7kvJror53nmoTkuJrliqHmoIfor4bvvIzpmZDliLYyMOWtl+espuS7peWGhVxcbiAgICBvcHRpb25hbCBzdHJpbmcgY29udGVudCA9IDc7IC8vIOWNs2V4dHJhQ29udGVudOa2iOaBr+aJqeWxleWGheWuuSzkuIvooajmoLzor7TmmI5cXG4gIH1cXG4gIG1lc3NhZ2UgXCIraWkrXCIgIC8v5p+l6K+i5YWl5Y+CXFxuICB7XFxuICAgIHJlcXVpcmVkIGludDY0IHN5bmNUaW1lID0gMTsvL+WQjOatpeaXtumXtOaIs1xcbiAgfVxcbiAgbWVzc2FnZSBcIitzaStcIiAgLy/lupTnrZTnu5PmnpxcXG4gIHtcXG4gICAgcmVwZWF0ZWQgTXNnQ2hhbmdlIGxpc3QgPSAxOyAvL+WPmOabtFxcbiAgICByZXF1aXJlZCBpbnQ2NCBzeW5jVGltZSA9IDI7IC8v5ZCM5q2l5pe26Ze0KOeUqOS6juS4i+asoeWQjOatpeWFpeWPgilcXG4gICAgb3B0aW9uYWwgYm9vbCAgaGFzTmV4dCA9IDMgO1xcbiAgfVxcbiAgbWVzc2FnZSBNc2dDaGFuZ2UgIC8v5Y+Y5pu06K+m5oOFXFxuICB7XFxuICAgIHJlcXVpcmVkIHN0cmluZyB0YXJnZXRJZCA9IDE7IC8vICDnm67moIdJZCjotoXnuqfnvqRJZClcXG4gICAgcmVxdWlyZWQgQ2hhbm5lbFR5cGUgdHlwZSA9IDI7IC8vICDkvJror53nsbvlnotcXG4gICAgcmVxdWlyZWQgaW50NjQgdGltZSA9IDM7ICAvLyDlj5jmm7Tml7bpl7RcXG4gICAgcmVxdWlyZWQgaW50MzIgY2hhbmdlVHlwZSA9IDQ7ICAvLyDmtojmga/lj5jmm7TnsbvlnovvvIgxOuaJqeWxlSwyOuS/ruaUuSwzOuaSpOWbnilcXG4gICAgcmVxdWlyZWQgc3RyaW5nIG1zZ1VJRCAgPSA1OyAgLy8g5raI5oGvSURcXG4gICAgcmVxdWlyZWQgaW50NjQgbXNnVGltZSA9IDY7ICAvLyAg5raI5oGv5pe26Ze0XFxuICAgIG9wdGlvbmFsIHN0cmluZyBidXNDaGFubmVsID0gNzsgLy8g6aKR6YGTSURcXG4gICAgb3B0aW9uYWwgYm9vbCBpc0FkbWluID0gODsgLy/mmK/lkKbkuLrnrqHnkIblkZjvvIzpu5jorqTkuLogMO+8jOiuvuS4uiAxIOaXtu+8jElNS2l0IOaUtuWIsOatpOadoea2iOaBr+WQju+8jOWwj+eBsOadoem7mOiupOaYvuekuuS4uuKAnOeuoeeQhuWRmCDmkqTlm57kuobkuIDmnaHmtojmga/igJ3jgIJcXG4gICAgb3B0aW9uYWwgYm9vbCBpc0RlbCA9IDk7IC8v6buY6K6k5Li6IDAg5pKk5Zue6K+l5p2h5raI5oGv5ZCM5pe277yM55So5oi356uv5bCG6K+l5p2h5raI5oGv5Yig6Zmk5bm25pu/5o2i5Li65LiA5p2h5bCP54Gw5p2h5pKk5Zue5o+Q56S65raI5oGv77yb5Li6IDEg5pe277yM6K+l5p2h5raI5oGv5Yig6Zmk5ZCO77yM5LiN5pu/5o2i5Li65bCP54Gw5p2h5o+Q56S65raI5oGv44CCXFxuICAgIG9wdGlvbmFsIHN0cmluZyBvcGVyYXRvcklkID0gMTA7IC8vIOaWsOWKoCAtIOa2iOaBr+WPmOabtOeahOaTjeS9nOS6uklkXFxuICB9XFxuICBtZXNzYWdlIFwiK29pK1wiICAvL+ivt+axglxcbiAge1xcbiAgICByZXF1aXJlZCBzdHJpbmcgdGFyZ2V0SWQgPSAxOyAvLyAg55uu5qCHSWQo6LaF57qn576kSWQpXFxuICAgIHJlcXVpcmVkIENoYW5uZWxUeXBlIHR5cGUgPSAyOyAvLyAg5Lya6K+d57G75Z6LXFxuICAgIHJlcGVhdGVkIE1lc3NhZ2VRdWVyeUluZm8gcXVlcnkgPSAzOyAvL1xcbiAgfVxcbiAgbWVzc2FnZSBNZXNzYWdlUXVlcnlJbmZvXFxuICB7XFxuICAgIHJlcXVpcmVkIGludDY0IG1zZ1RpbWUgPSAxOyAgLy8g5raI5oGv5pe26Ze0XFxuICAgIHJlcXVpcmVkIHN0cmluZyBtc2dVSUQgID0gMjsgIC8vIOa2iOaBr0lEXFxuICAgIG9wdGlvbmFsIHN0cmluZyBidXNDaGFubmVsID0gMzsgLy8g6aKR6YGTSURcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrdWkrXCIgIC8v5bqU562UXFxuICB7XFxuICAgIHJlcGVhdGVkIERvd25TdHJlYW1NZXNzYWdlIGxpc3QgPSAxOy8v5raI5oGvXFxuICB9XFxuICBtZXNzYWdlIFwiK2NpK1wiICAvL+WuouaIt+err+WPkemAgVxcbiAge1xcbiAgICBvcHRpb25hbCBzdHJpbmcgdGFyZ2V0SWQgPSAgMTsvLyB0YXJnZXRJZFxcbiAgICBvcHRpb25hbCBDaGFubmVsVHlwZSB0eXBlID0gMjsvL+WPkemAgeS8muivneexu+Wei+Wmgu+8mu+8iFAyUCxHUk9VUO+8iSBcXG4gICAgb3B0aW9uYWwgaW50MzIgb3BUeXBlID0gMzsgIC8vMCAsIOato+WcqOi+k+WFpSwgMSDmraPlnKhYWFggIFxcbiAgICBvcHRpb25hbCBzdHJpbmcgYnVzQ2hhbm5lbCA9IDQ7IC8vIOmikemBkyhjaGFubmVsSWQs5Y+v5Lul5Li656m6KVxcbiAgfVxcbiAgbWVzc2FnZSBcIitoaStcIiAgLy/mnI3liqHnq6/lj5HpgIFcXG4gIHtcXG4gICAgICBvcHRpb25hbCBDaGFubmVsVHlwZSB0eXBlID0gMTsvL+WPkemAgeS8muivneexu+Wei+Wmgu+8iFAyUCxHUk9VUO+8iSBcXG4gICAgICBvcHRpb25hbCBpbnQ2NCBub3RpZnlUeXBlID0gMjsgLy8weDEg6KGo56S65piO57uGLCAweDIg6KGo56S65rGH5oC7IDB4MyDooajnpLrmmI7nu4Yr5rGH5oC7XFxuICAgICAgcmVwZWF0ZWQgT3BlcmF0ZUluZm8gaW5mbyA9IDMgOyAvL+aYjue7huWIl+ihqCDlvZNub3RpZnlUeXBlIOS4uiAx5ZKMM+aXtizmnInmlYhcXG4gICAgICByZXBlYXRlZCBPcGVyYXRlU3VtbWFyeSBzdW1tYXJ5ID0gNCA7IC8v5rGH5oC75YiX6KGoLCDlvZNub3RpZnlUeXBlIOS4ujLlkowzIOaXtizmnInmlYhcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrbGkrXCIge1xcbiAgICAvLyBYWCDmraPlnKjlgZrku4DkuYhcXG4gICAgb3B0aW9uYWwgc3RyaW5nIHRhcmdldElkID0gMTsgLy8g6LaF57qn576kSWQgIOS8muivnWlkXFxuICAgIG9wdGlvbmFsIHN0cmluZyBidXNDaGFubmVsID0gMjsgLy8g6aKR6YGTKGNoYW5uZWxJZCzlj6/ku6XkuLrnqbopXFxuICAgIG9wdGlvbmFsIHN0cmluZyB1c2VySWQgPSAzOyAvLyB1c2VySWRcXG4gICAgb3B0aW9uYWwgaW50MzIgb3BUeXBlID0gNDsgIC8vMCAsIOato+WcqOi+k+WFpSwgMSDmraPlnKhYWCBcXG4gICAgb3B0aW9uYWwgaW50NjQgb3B0aW1lID0gNTsgIC8v5pyN5Yqh56uv5pS25Yiw55So5oi35pON5L2c55qE5LiK6KGM5pe26Ze0LiBcXG4gIH1cXG4gICAgICBcXG4gIG1lc3NhZ2UgXCIrZGkrXCIge1xcbiAgICAvLyDlh6DkuKrkurog5q2j5Zyo5bmy5LuA5LmIXFxuICAgIG9wdGlvbmFsIHN0cmluZyB0YXJnZXRJZCA9IDE7IC8vIOi2hee6p+e+pElkICDkvJror51pZFxcbiAgICBvcHRpb25hbCBzdHJpbmcgYnVzQ2hhbm5lbCA9IDI7IC8vIOmikemBkyhjaGFubmVsSWQs5Y+v5Lul5Li656m6KVxcbiAgICBvcHRpb25hbCBpbnQzMiBjb3VudCAgPSAzOyAvLyDmk43kvZzkurrmlbBcXG4gICAgb3B0aW9uYWwgaW50MzIgb3BUeXBlID0gNDsgLy8wLCDmraPlnKjovpPlhaUsIDEg5q2j5ZyoWFggXFxuICB9XFxuICBtZXNzYWdlIFwiK0NpK1wiXFxuICB7XFxuICAgIHJlcXVpcmVkIHN0cmluZyAgcnRjUm9vbUlkPSAxOyAgLy9ydGPmiL/pl7RJRDtcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrUmkrXCJcXG4gIHtcXG4gICAgcmVxdWlyZWQgaW50MzIgbm90aGluZyA9IDE7ICAgLy/nlKjkuo7ljaDkvY1cXG4gIH1cXG59XFxuXCI7dmFyIEFpLFVpLGJpLExpLFBpLERpPShBaT13aSxmdW5jdGlvbihlLHQpe3ZhciBuLGkscj17fTtyZXR1cm4gci5CeXRlQnVmZmVyPWUsci5jPWUsbj1lLHIuTG9uZz10fHxudWxsLHIuVkVSU0lPTj1cIjUuMC4xXCIsci5XSVJFX1RZUEVTPXt9LHIuV0lSRV9UWVBFUy5WQVJJTlQ9MCxyLldJUkVfVFlQRVMuQklUUzY0PTEsci5XSVJFX1RZUEVTLkxERUxJTT0yLHIuV0lSRV9UWVBFUy5TVEFSVEdST1VQPTMsci5XSVJFX1RZUEVTLkVOREdST1VQPTQsci5XSVJFX1RZUEVTLkJJVFMzMj01LHIuUEFDS0FCTEVfV0lSRV9UWVBFUz1bci5XSVJFX1RZUEVTLlZBUklOVCxyLldJUkVfVFlQRVMuQklUUzY0LHIuV0lSRV9UWVBFUy5CSVRTMzJdLHIuVFlQRVM9e2ludDMyOntuYW1lOlwiaW50MzJcIix3aXJlVHlwZTpyLldJUkVfVFlQRVMuVkFSSU5ULGRlZmF1bHRWYWx1ZTowfSx1aW50MzI6e25hbWU6XCJ1aW50MzJcIix3aXJlVHlwZTpyLldJUkVfVFlQRVMuVkFSSU5ULGRlZmF1bHRWYWx1ZTowfSxzaW50MzI6e25hbWU6XCJzaW50MzJcIix3aXJlVHlwZTpyLldJUkVfVFlQRVMuVkFSSU5ULGRlZmF1bHRWYWx1ZTowfSxpbnQ2NDp7bmFtZTpcImludDY0XCIsd2lyZVR5cGU6ci5XSVJFX1RZUEVTLlZBUklOVCxkZWZhdWx0VmFsdWU6ci5Mb25nP3IuTG9uZy5aRVJPOnZvaWQgMH0sdWludDY0OntuYW1lOlwidWludDY0XCIsd2lyZVR5cGU6ci5XSVJFX1RZUEVTLlZBUklOVCxkZWZhdWx0VmFsdWU6ci5Mb25nP3IuTG9uZy5VWkVSTzp2b2lkIDB9LHNpbnQ2NDp7bmFtZTpcInNpbnQ2NFwiLHdpcmVUeXBlOnIuV0lSRV9UWVBFUy5WQVJJTlQsZGVmYXVsdFZhbHVlOnIuTG9uZz9yLkxvbmcuWkVSTzp2b2lkIDB9LGJvb2w6e25hbWU6XCJib29sXCIsd2lyZVR5cGU6ci5XSVJFX1RZUEVTLlZBUklOVCxkZWZhdWx0VmFsdWU6ITF9LGRvdWJsZTp7bmFtZTpcImRvdWJsZVwiLHdpcmVUeXBlOnIuV0lSRV9UWVBFUy5CSVRTNjQsZGVmYXVsdFZhbHVlOjB9LHN0cmluZzp7bmFtZTpcInN0cmluZ1wiLHdpcmVUeXBlOnIuV0lSRV9UWVBFUy5MREVMSU0sZGVmYXVsdFZhbHVlOlwiXCJ9LGJ5dGVzOntuYW1lOlwiYnl0ZXNcIix3aXJlVHlwZTpyLldJUkVfVFlQRVMuTERFTElNLGRlZmF1bHRWYWx1ZTpudWxsfSxmaXhlZDMyOntuYW1lOlwiZml4ZWQzMlwiLHdpcmVUeXBlOnIuV0lSRV9UWVBFUy5CSVRTMzIsZGVmYXVsdFZhbHVlOjB9LHNmaXhlZDMyOntuYW1lOlwic2ZpeGVkMzJcIix3aXJlVHlwZTpyLldJUkVfVFlQRVMuQklUUzMyLGRlZmF1bHRWYWx1ZTowfSxmaXhlZDY0OntuYW1lOlwiZml4ZWQ2NFwiLHdpcmVUeXBlOnIuV0lSRV9UWVBFUy5CSVRTNjQsZGVmYXVsdFZhbHVlOnIuTG9uZz9yLkxvbmcuVVpFUk86dm9pZCAwfSxzZml4ZWQ2NDp7bmFtZTpcInNmaXhlZDY0XCIsd2lyZVR5cGU6ci5XSVJFX1RZUEVTLkJJVFM2NCxkZWZhdWx0VmFsdWU6ci5Mb25nP3IuTG9uZy5aRVJPOnZvaWQgMH0sZmxvYXQ6e25hbWU6XCJmbG9hdFwiLHdpcmVUeXBlOnIuV0lSRV9UWVBFUy5CSVRTMzIsZGVmYXVsdFZhbHVlOjB9LGVudW06e25hbWU6XCJlbnVtXCIsd2lyZVR5cGU6ci5XSVJFX1RZUEVTLlZBUklOVCxkZWZhdWx0VmFsdWU6MH0sbWVzc2FnZTp7bmFtZTpcIm1lc3NhZ2VcIix3aXJlVHlwZTpyLldJUkVfVFlQRVMuTERFTElNLGRlZmF1bHRWYWx1ZTpudWxsfSxncm91cDp7bmFtZTpcImdyb3VwXCIsd2lyZVR5cGU6ci5XSVJFX1RZUEVTLlNUQVJUR1JPVVAsZGVmYXVsdFZhbHVlOm51bGx9fSxyLk1BUF9LRVlfVFlQRVM9W3IuVFlQRVMuaW50MzIsci5UWVBFUy5zaW50MzIsci5UWVBFUy5zZml4ZWQzMixyLlRZUEVTLnVpbnQzMixyLlRZUEVTLmZpeGVkMzIsci5UWVBFUy5pbnQ2NCxyLlRZUEVTLnNpbnQ2NCxyLlRZUEVTLnNmaXhlZDY0LHIuVFlQRVMudWludDY0LHIuVFlQRVMuZml4ZWQ2NCxyLlRZUEVTLmJvb2wsci5UWVBFUy5zdHJpbmcsci5UWVBFUy5ieXRlc10sci5JRF9NSU49MSxyLklEX01BWD01MzY4NzA5MTEsci5jb252ZXJ0RmllbGRzVG9DYW1lbENhc2U9ITEsci5wb3B1bGF0ZUFjY2Vzc29ycz0hMCxyLnBvcHVsYXRlRGVmYXVsdHM9ITAsci5VdGlsPWZ1bmN0aW9uKCl7dmFyIGU9e307cmV0dXJuIGUuSVNfTk9ERT0hKFwib2JqZWN0XCIhPXR5cGVvZiBwcm9jZXNzfHxwcm9jZXNzK1wiXCIhPVwiW29iamVjdCBwcm9jZXNzXVwifHxwcm9jZXNzLmJyb3dzZXIpLGUuWEhSPWZ1bmN0aW9uKCl7dmFyIGUsdD1bZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFhNTEh0dHBSZXF1ZXN0fSxmdW5jdGlvbigpe3JldHVybiBuZXcgQWN0aXZlWE9iamVjdChcIk1zeG1sMi5YTUxIVFRQXCIpfSxmdW5jdGlvbigpe3JldHVybiBuZXcgQWN0aXZlWE9iamVjdChcIk1zeG1sMy5YTUxIVFRQXCIpfSxmdW5jdGlvbigpe3JldHVybiBuZXcgQWN0aXZlWE9iamVjdChcIk1pY3Jvc29mdC5YTUxIVFRQXCIpfV0sbj1udWxsO2ZvcihlPTA7ZTx0Lmxlbmd0aDtlKyspe3RyeXtuPXRbZV0oKX1jYXRjaChlKXtjb250aW51ZX1icmVha31pZighbil0aHJvdyBFcnJvcihcIlhNTEh0dHBSZXF1ZXN0IGlzIG5vdCBzdXBwb3J0ZWRcIik7cmV0dXJuIG59LGUuZmV0Y2g9ZnVuY3Rpb24odCxuKXtpZihuJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBuJiYobj1udWxsKSxlLklTX05PREUpaWYobilnLnJlYWRGaWxlKHQsKGZ1bmN0aW9uKGUsdCl7bihlP251bGw6XCJcIit0KX0pKTtlbHNlIHRyeXtyZXR1cm4gZy5yZWFkRmlsZVN5bmModCl9Y2F0Y2goZSl7cmV0dXJuIG51bGx9ZWxzZXt2YXIgaT1lLlhIUigpO2lmKGkub3BlbihcIkdFVFwiLHQsISFuKSxpLnNldFJlcXVlc3RIZWFkZXIoXCJBY2NlcHRcIixcInRleHQvcGxhaW5cIiksXCJmdW5jdGlvblwiPT10eXBlb2YgaS5vdmVycmlkZU1pbWVUeXBlJiZpLm92ZXJyaWRlTWltZVR5cGUoXCJ0ZXh0L3BsYWluXCIpLCFuKXJldHVybiBpLnNlbmQobnVsbCksMjAwPT1pLnN0YXR1c3x8MD09aS5zdGF0dXMmJlwic3RyaW5nXCI9PXR5cGVvZiBpLnJlc3BvbnNlVGV4dD9pLnJlc3BvbnNlVGV4dDpudWxsO2lmKGkub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7ND09aS5yZWFkeVN0YXRlJiYoMjAwPT1pLnN0YXR1c3x8MD09aS5zdGF0dXMmJlwic3RyaW5nXCI9PXR5cGVvZiBpLnJlc3BvbnNlVGV4dD9uKGkucmVzcG9uc2VUZXh0KTpuKG51bGwpKX0sND09aS5yZWFkeVN0YXRlKXJldHVybjtpLnNlbmQobnVsbCl9fSxlLnRvQ2FtZWxDYXNlPWZ1bmN0aW9uKGUpe3JldHVybiBlLnJlcGxhY2UoL18oW2EtekEtWl0pL2csKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQudG9VcHBlckNhc2UoKX0pKX0sZX0oKSxyLkxhbmc9e0RFTElNOi9bXFxzXFx7XFx9PTs6XFxbXFxdLCdcIlxcKFxcKTw+XS9nLFJVTEU6L14oPzpyZXF1aXJlZHxvcHRpb25hbHxyZXBlYXRlZHxtYXApJC8sVFlQRTovXig/OmRvdWJsZXxmbG9hdHxpbnQzMnx1aW50MzJ8c2ludDMyfGludDY0fHVpbnQ2NHxzaW50NjR8Zml4ZWQzMnxzZml4ZWQzMnxmaXhlZDY0fHNmaXhlZDY0fGJvb2x8c3RyaW5nfGJ5dGVzKSQvLE5BTUU6L15bYS16QS1aX11bYS16QS1aXzAtOV0qJC8sVFlQRURFRjovXlthLXpBLVpdW2EtekEtWl8wLTldKiQvLFRZUEVSRUY6L14oPzpcXC4/W2EtekEtWl9dW2EtekEtWl8wLTldKikrJC8sRlFUWVBFUkVGOi9eKD86XFwuW2EtekEtWl1bYS16QS1aXzAtOV0qKSskLyxOVU1CRVI6L14tPyg/OlsxLTldWzAtOV0qfDB8MFt4WF1bMC05YS1mQS1GXSt8MFswLTddK3woWzAtOV0qKFxcLlswLTldKik/KFtFZV1bKy1dP1swLTldKyk/KXxpbmZ8bmFuKSQvLE5VTUJFUl9ERUM6L14oPzpbMS05XVswLTldKnwwKSQvLE5VTUJFUl9IRVg6L14wW3hYXVswLTlhLWZBLUZdKyQvLE5VTUJFUl9PQ1Q6L14wWzAtN10rJC8sTlVNQkVSX0ZMVDovXihbMC05XSooXFwuWzAtOV0qKT8oW0VlXVsrLV0/WzAtOV0rKT98aW5mfG5hbikkLyxCT09MOi9eKD86dHJ1ZXxmYWxzZSkkL2ksSUQ6L14oPzpbMS05XVswLTldKnwwfDBbeFhdWzAtOWEtZkEtRl0rfDBbMC03XSspJC8sTkVHSUQ6L15cXC0/KD86WzEtOV1bMC05XSp8MHwwW3hYXVswLTlhLWZBLUZdK3wwWzAtN10rKSQvLFdISVRFU1BBQ0U6L1xccy8sU1RSSU5HOi8oPzpcIihbXlwiXFxcXF0qKD86XFxcXC5bXlwiXFxcXF0qKSopXCIpfCg/OicoW14nXFxcXF0qKD86XFxcXC5bXidcXFxcXSopKiknKS9nLFNUUklOR19EUTovKD86XCIoW15cIlxcXFxdKig/OlxcXFwuW15cIlxcXFxdKikqKVwiKS9nLFNUUklOR19TUTovKD86JyhbXidcXFxcXSooPzpcXFxcLlteJ1xcXFxdKikqKScpL2d9LHIuRG90UHJvdG89ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKGUsbil7dmFyIGk9LTEscj0xO2lmKFwiLVwiPT1lLmNoYXJBdCgwKSYmKHI9LTEsZT1lLnN1YnN0cmluZygxKSksdC5OVU1CRVJfREVDLnRlc3QoZSkpaT1wYXJzZUludChlKTtlbHNlIGlmKHQuTlVNQkVSX0hFWC50ZXN0KGUpKWk9cGFyc2VJbnQoZS5zdWJzdHJpbmcoMiksMTYpO2Vsc2V7aWYoIXQuTlVNQkVSX09DVC50ZXN0KGUpKXRocm93IEVycm9yKFwiaWxsZWdhbCBpZCB2YWx1ZTogXCIrKHI8MD9cIi1cIjpcIlwiKStlKTtpPXBhcnNlSW50KGUuc3Vic3RyaW5nKDEpLDgpfWlmKGk9MHxyKmksIW4mJmk8MCl0aHJvdyBFcnJvcihcImlsbGVnYWwgaWQgdmFsdWU6IFwiKyhyPDA/XCItXCI6XCJcIikrZSk7cmV0dXJuIGl9ZnVuY3Rpb24gaShlKXt2YXIgbj0xO2lmKFwiLVwiPT1lLmNoYXJBdCgwKSYmKG49LTEsZT1lLnN1YnN0cmluZygxKSksdC5OVU1CRVJfREVDLnRlc3QoZSkpcmV0dXJuIG4qcGFyc2VJbnQoZSwxMCk7aWYodC5OVU1CRVJfSEVYLnRlc3QoZSkpcmV0dXJuIG4qcGFyc2VJbnQoZS5zdWJzdHJpbmcoMiksMTYpO2lmKHQuTlVNQkVSX09DVC50ZXN0KGUpKXJldHVybiBuKnBhcnNlSW50KGUuc3Vic3RyaW5nKDEpLDgpO2lmKFwiaW5mXCI9PT1lKXJldHVybiAxLzAqbjtpZihcIm5hblwiPT09ZSlyZXR1cm4gTmFOO2lmKHQuTlVNQkVSX0ZMVC50ZXN0KGUpKXJldHVybiBuKnBhcnNlRmxvYXQoZSk7dGhyb3cgRXJyb3IoXCJpbGxlZ2FsIG51bWJlciB2YWx1ZTogXCIrKG48MD9cIi1cIjpcIlwiKStlKX1mdW5jdGlvbiByKGUsdCxuKXt2b2lkIDA9PT1lW3RdP2VbdF09bjooQXJyYXkuaXNBcnJheShlW3RdKXx8KGVbdF09W2VbdF1dKSxlW3RdLnB1c2gobikpfXZhciBzLG8sYT17fSx1PWZ1bmN0aW9uKGUpe3RoaXMuc291cmNlPWUrXCJcIix0aGlzLmluZGV4PTAsdGhpcy5saW5lPTEsdGhpcy5zdGFjaz1bXSx0aGlzLl9zdHJpbmdPcGVuPW51bGx9LGM9dS5wcm90b3R5cGU7cmV0dXJuIGMuX3JlYWRTdHJpbmc9ZnVuY3Rpb24oKXt2YXIgZSxuPSdcIic9PT10aGlzLl9zdHJpbmdPcGVuP3QuU1RSSU5HX0RROnQuU1RSSU5HX1NRO2lmKG4ubGFzdEluZGV4PXRoaXMuaW5kZXgtMSwhKGU9bi5leGVjKHRoaXMuc291cmNlKSkpdGhyb3cgRXJyb3IoXCJ1bnRlcm1pbmF0ZWQgc3RyaW5nXCIpO3JldHVybiB0aGlzLmluZGV4PW4ubGFzdEluZGV4LHRoaXMuc3RhY2sucHVzaCh0aGlzLl9zdHJpbmdPcGVuKSx0aGlzLl9zdHJpbmdPcGVuPW51bGwsZVsxXX0sYy5uZXh0PWZ1bmN0aW9uKCl7dmFyIGUsbixpLHIscztpZih0aGlzLnN0YWNrLmxlbmd0aD4wKXJldHVybiB0aGlzLnN0YWNrLnNoaWZ0KCk7aWYodGhpcy5pbmRleD49dGhpcy5zb3VyY2UubGVuZ3RoKXJldHVybiBudWxsO2lmKG51bGwhPT10aGlzLl9zdHJpbmdPcGVuKXJldHVybiB0aGlzLl9yZWFkU3RyaW5nKCk7ZG97Zm9yKGU9ITE7dC5XSElURVNQQUNFLnRlc3QoaT10aGlzLnNvdXJjZS5jaGFyQXQodGhpcy5pbmRleCkpOylpZihcIlxcblwiPT09aSYmKyt0aGlzLmxpbmUsKyt0aGlzLmluZGV4PT09dGhpcy5zb3VyY2UubGVuZ3RoKXJldHVybiBudWxsO2lmKFwiL1wiPT09dGhpcy5zb3VyY2UuY2hhckF0KHRoaXMuaW5kZXgpKWlmKCsrdGhpcy5pbmRleCxcIi9cIj09PXRoaXMuc291cmNlLmNoYXJBdCh0aGlzLmluZGV4KSl7Zm9yKDtcIlxcblwiIT09dGhpcy5zb3VyY2UuY2hhckF0KCsrdGhpcy5pbmRleCk7KWlmKHRoaXMuaW5kZXg9PXRoaXMuc291cmNlLmxlbmd0aClyZXR1cm4gbnVsbDsrK3RoaXMuaW5kZXgsKyt0aGlzLmxpbmUsZT0hMH1lbHNle2lmKFwiKlwiIT09KGk9dGhpcy5zb3VyY2UuY2hhckF0KHRoaXMuaW5kZXgpKSlyZXR1cm5cIi9cIjtkb3tpZihcIlxcblwiPT09aSYmKyt0aGlzLmxpbmUsKyt0aGlzLmluZGV4PT09dGhpcy5zb3VyY2UubGVuZ3RoKXJldHVybiBudWxsO249aSxpPXRoaXMuc291cmNlLmNoYXJBdCh0aGlzLmluZGV4KX13aGlsZShcIipcIiE9PW58fFwiL1wiIT09aSk7Kyt0aGlzLmluZGV4LGU9ITB9fXdoaWxlKGUpO2lmKHRoaXMuaW5kZXg9PT10aGlzLnNvdXJjZS5sZW5ndGgpcmV0dXJuIG51bGw7aWYocj10aGlzLmluZGV4LHQuREVMSU0ubGFzdEluZGV4PTAsIXQuREVMSU0udGVzdCh0aGlzLnNvdXJjZS5jaGFyQXQocisrKSkpZm9yKDtyPHRoaXMuc291cmNlLmxlbmd0aCYmIXQuREVMSU0udGVzdCh0aGlzLnNvdXJjZS5jaGFyQXQocikpOykrK3I7cmV0dXJuKCdcIic9PT0ocz10aGlzLnNvdXJjZS5zdWJzdHJpbmcodGhpcy5pbmRleCx0aGlzLmluZGV4PXIpKXx8XCInXCI9PT1zKSYmKHRoaXMuX3N0cmluZ09wZW49cyksc30sYy5wZWVrPWZ1bmN0aW9uKCl7aWYoMD09PXRoaXMuc3RhY2subGVuZ3RoKXt2YXIgZT10aGlzLm5leHQoKTtpZihudWxsPT09ZSlyZXR1cm4gbnVsbDt0aGlzLnN0YWNrLnB1c2goZSl9cmV0dXJuIHRoaXMuc3RhY2tbMF19LGMuc2tpcD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLm5leHQoKTtpZih0IT09ZSl0aHJvdyBFcnJvcihcImlsbGVnYWwgJ1wiK3QrXCInLCAnXCIrZStcIicgZXhwZWN0ZWRcIil9LGMub21pdD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wZWVrKCk9PT1lJiYodGhpcy5uZXh0KCksITApfSxjLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuXCJUb2tlbml6ZXIgKFwiK3RoaXMuaW5kZXgrXCIvXCIrdGhpcy5zb3VyY2UubGVuZ3RoK1wiIGF0IGxpbmUgXCIrdGhpcy5saW5lK1wiKVwifSxhLlRva2VuaXplcj11LChvPShzPWZ1bmN0aW9uKGUpe3RoaXMudG49bmV3IHUoZSksdGhpcy5wcm90bzM9ITF9KS5wcm90b3R5cGUpLnBhcnNlPWZ1bmN0aW9uKCl7dmFyIGUsbj17bmFtZTpcIltST09UXVwiLHBhY2thZ2U6bnVsbCxtZXNzYWdlczpbXSxlbnVtczpbXSxpbXBvcnRzOltdLG9wdGlvbnM6e30sc2VydmljZXM6W119LGk9ITA7dHJ5e2Zvcig7ZT10aGlzLnRuLm5leHQoKTspc3dpdGNoKGUpe2Nhc2VcInBhY2thZ2VcIjppZighaXx8bnVsbCE9PW4ucGFja2FnZSl0aHJvdyBFcnJvcihcInVuZXhwZWN0ZWQgJ3BhY2thZ2UnXCIpO2lmKGU9dGhpcy50bi5uZXh0KCksIXQuVFlQRVJFRi50ZXN0KGUpKXRocm93IEVycm9yKFwiaWxsZWdhbCBwYWNrYWdlIG5hbWU6IFwiK2UpO3RoaXMudG4uc2tpcChcIjtcIiksbi5wYWNrYWdlPWU7YnJlYWs7Y2FzZVwiaW1wb3J0XCI6aWYoIWkpdGhyb3cgRXJyb3IoXCJ1bmV4cGVjdGVkICdpbXBvcnQnXCIpO1wicHVibGljXCI9PT0oZT10aGlzLnRuLnBlZWsoKSkmJnRoaXMudG4ubmV4dCgpLGU9dGhpcy5fcmVhZFN0cmluZygpLHRoaXMudG4uc2tpcChcIjtcIiksbi5pbXBvcnRzLnB1c2goZSk7YnJlYWs7Y2FzZVwic3ludGF4XCI6aWYoIWkpdGhyb3cgRXJyb3IoXCJ1bmV4cGVjdGVkICdzeW50YXgnXCIpO3RoaXMudG4uc2tpcChcIj1cIiksXCJwcm90bzNcIj09PShuLnN5bnRheD10aGlzLl9yZWFkU3RyaW5nKCkpJiYodGhpcy5wcm90bzM9ITApLHRoaXMudG4uc2tpcChcIjtcIik7YnJlYWs7Y2FzZVwibWVzc2FnZVwiOnRoaXMuX3BhcnNlTWVzc2FnZShuLG51bGwpLGk9ITE7YnJlYWs7Y2FzZVwiZW51bVwiOnRoaXMuX3BhcnNlRW51bShuKSxpPSExO2JyZWFrO2Nhc2VcIm9wdGlvblwiOnRoaXMuX3BhcnNlT3B0aW9uKG4pO2JyZWFrO2Nhc2VcInNlcnZpY2VcIjp0aGlzLl9wYXJzZVNlcnZpY2Uobik7YnJlYWs7Y2FzZVwiZXh0ZW5kXCI6dGhpcy5fcGFyc2VFeHRlbmQobik7YnJlYWs7ZGVmYXVsdDp0aHJvdyBFcnJvcihcInVuZXhwZWN0ZWQgJ1wiK2UrXCInXCIpfX1jYXRjaChlKXt0aHJvdyBlLm1lc3NhZ2U9XCJQYXJzZSBlcnJvciBhdCBsaW5lIFwiK3RoaXMudG4ubGluZStcIjogXCIrZS5tZXNzYWdlLGV9cmV0dXJuIGRlbGV0ZSBuLm5hbWUsbn0scy5wYXJzZT1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IHMoZSkucGFyc2UoKX0sby5fcmVhZFN0cmluZz1mdW5jdGlvbigpe3ZhciBlLHQsbj1cIlwiO2Rve2lmKFwiJ1wiIT09KHQ9dGhpcy50bi5uZXh0KCkpJiYnXCInIT09dCl0aHJvdyBFcnJvcihcImlsbGVnYWwgc3RyaW5nIGRlbGltaXRlcjogXCIrdCk7bis9dGhpcy50bi5uZXh0KCksdGhpcy50bi5za2lwKHQpLGU9dGhpcy50bi5wZWVrKCl9d2hpbGUoJ1wiJz09PWV8fCdcIic9PT1lKTtyZXR1cm4gbn0sby5fcmVhZFZhbHVlPWZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMudG4ucGVlaygpO2lmKCdcIic9PT1ufHxcIidcIj09PW4pcmV0dXJuIHRoaXMuX3JlYWRTdHJpbmcoKTtpZih0aGlzLnRuLm5leHQoKSx0Lk5VTUJFUi50ZXN0KG4pKXJldHVybiBpKG4pO2lmKHQuQk9PTC50ZXN0KG4pKXJldHVyblwidHJ1ZVwiPT09bi50b0xvd2VyQ2FzZSgpO2lmKGUmJnQuVFlQRVJFRi50ZXN0KG4pKXJldHVybiBuO3Rocm93IEVycm9yKFwiaWxsZWdhbCB2YWx1ZTogXCIrbil9LG8uX3BhcnNlT3B0aW9uPWZ1bmN0aW9uKGUsbil7dmFyIGkscj10aGlzLnRuLm5leHQoKSxzPSExO2lmKFwiKFwiPT09ciYmKHM9ITAscj10aGlzLnRuLm5leHQoKSksIXQuVFlQRVJFRi50ZXN0KHIpKXRocm93IEVycm9yKFwiaWxsZWdhbCBvcHRpb24gbmFtZTogXCIrcik7aT1yLHMmJih0aGlzLnRuLnNraXAoXCIpXCIpLGk9XCIoXCIraStcIilcIixyPXRoaXMudG4ucGVlaygpLHQuRlFUWVBFUkVGLnRlc3QocikmJihpKz1yLHRoaXMudG4ubmV4dCgpKSksdGhpcy50bi5za2lwKFwiPVwiKSx0aGlzLl9wYXJzZU9wdGlvblZhbHVlKGUsaSksbnx8dGhpcy50bi5za2lwKFwiO1wiKX0sby5fcGFyc2VPcHRpb25WYWx1ZT1mdW5jdGlvbihlLG4pe3ZhciBpPXRoaXMudG4ucGVlaygpO2lmKFwie1wiIT09aSlyKGUub3B0aW9ucyxuLHRoaXMuX3JlYWRWYWx1ZSghMCkpO2Vsc2UgZm9yKHRoaXMudG4uc2tpcChcIntcIik7XCJ9XCIhPT0oaT10aGlzLnRuLm5leHQoKSk7KXtpZighdC5OQU1FLnRlc3QoaSkpdGhyb3cgRXJyb3IoXCJpbGxlZ2FsIG9wdGlvbiBuYW1lOiBcIituK1wiLlwiK2kpO3RoaXMudG4ub21pdChcIjpcIik/cihlLm9wdGlvbnMsbitcIi5cIitpLHRoaXMuX3JlYWRWYWx1ZSghMCkpOnRoaXMuX3BhcnNlT3B0aW9uVmFsdWUoZSxuK1wiLlwiK2kpfX0sby5fcGFyc2VTZXJ2aWNlPWZ1bmN0aW9uKGUpe3ZhciBuLGk9dGhpcy50bi5uZXh0KCk7aWYoIXQuTkFNRS50ZXN0KGkpKXRocm93IEVycm9yKFwiaWxsZWdhbCBzZXJ2aWNlIG5hbWUgYXQgbGluZSBcIit0aGlzLnRuLmxpbmUrXCI6IFwiK2kpO2ZvcihuPXtuYW1lOmkscnBjOnt9LG9wdGlvbnM6e319LHRoaXMudG4uc2tpcChcIntcIik7XCJ9XCIhPT0oaT10aGlzLnRuLm5leHQoKSk7KWlmKFwib3B0aW9uXCI9PT1pKXRoaXMuX3BhcnNlT3B0aW9uKG4pO2Vsc2V7aWYoXCJycGNcIiE9PWkpdGhyb3cgRXJyb3IoXCJpbGxlZ2FsIHNlcnZpY2UgdG9rZW46IFwiK2kpO3RoaXMuX3BhcnNlU2VydmljZVJQQyhuKX10aGlzLnRuLm9taXQoXCI7XCIpLGUuc2VydmljZXMucHVzaChuKX0sby5fcGFyc2VTZXJ2aWNlUlBDPWZ1bmN0aW9uKGUpe3ZhciBuLGkscj1cInJwY1wiLHM9dGhpcy50bi5uZXh0KCk7aWYoIXQuTkFNRS50ZXN0KHMpKXRocm93IEVycm9yKFwiaWxsZWdhbCBycGMgc2VydmljZSBtZXRob2QgbmFtZTogXCIrcyk7aWYobj1zLGk9e3JlcXVlc3Q6bnVsbCxyZXNwb25zZTpudWxsLHJlcXVlc3Rfc3RyZWFtOiExLHJlc3BvbnNlX3N0cmVhbTohMSxvcHRpb25zOnt9fSx0aGlzLnRuLnNraXAoXCIoXCIpLFwic3RyZWFtXCI9PT0ocz10aGlzLnRuLm5leHQoKSkudG9Mb3dlckNhc2UoKSYmKGkucmVxdWVzdF9zdHJlYW09ITAscz10aGlzLnRuLm5leHQoKSksIXQuVFlQRVJFRi50ZXN0KHMpKXRocm93IEVycm9yKFwiaWxsZWdhbCBycGMgc2VydmljZSByZXF1ZXN0IHR5cGU6IFwiK3MpO2lmKGkucmVxdWVzdD1zLHRoaXMudG4uc2tpcChcIilcIiksXCJyZXR1cm5zXCIhPT0ocz10aGlzLnRuLm5leHQoKSkudG9Mb3dlckNhc2UoKSl0aHJvdyBFcnJvcihcImlsbGVnYWwgcnBjIHNlcnZpY2UgcmVxdWVzdCB0eXBlIGRlbGltaXRlcjogXCIrcyk7aWYodGhpcy50bi5za2lwKFwiKFwiKSxcInN0cmVhbVwiPT09KHM9dGhpcy50bi5uZXh0KCkpLnRvTG93ZXJDYXNlKCkmJihpLnJlc3BvbnNlX3N0cmVhbT0hMCxzPXRoaXMudG4ubmV4dCgpKSxpLnJlc3BvbnNlPXMsdGhpcy50bi5za2lwKFwiKVwiKSxcIntcIj09PShzPXRoaXMudG4ucGVlaygpKSl7Zm9yKHRoaXMudG4ubmV4dCgpO1wifVwiIT09KHM9dGhpcy50bi5uZXh0KCkpOyl7aWYoXCJvcHRpb25cIiE9PXMpdGhyb3cgRXJyb3IoXCJpbGxlZ2FsIHJwYyBzZXJ2aWNlIHRva2VuOiBcIitzKTt0aGlzLl9wYXJzZU9wdGlvbihpKX10aGlzLnRuLm9taXQoXCI7XCIpfWVsc2UgdGhpcy50bi5za2lwKFwiO1wiKTt2b2lkIDA9PT1lW3JdJiYoZVtyXT17fSksZVtyXVtuXT1pfSxvLl9wYXJzZU1lc3NhZ2U9ZnVuY3Rpb24oZSxpKXt2YXIgcj0hIWkscz10aGlzLnRuLm5leHQoKSxvPXtuYW1lOlwiXCIsZmllbGRzOltdLGVudW1zOltdLG1lc3NhZ2VzOltdLG9wdGlvbnM6e30sc2VydmljZXM6W10sb25lb2ZzOnt9fTtpZighdC5OQU1FLnRlc3QocykpdGhyb3cgRXJyb3IoXCJpbGxlZ2FsIFwiKyhyP1wiZ3JvdXBcIjpcIm1lc3NhZ2VcIikrXCIgbmFtZTogXCIrcyk7Zm9yKG8ubmFtZT1zLHImJih0aGlzLnRuLnNraXAoXCI9XCIpLGkuaWQ9bih0aGlzLnRuLm5leHQoKSksby5pc0dyb3VwPSEwKSxcIltcIj09PShzPXRoaXMudG4ucGVlaygpKSYmaSYmdGhpcy5fcGFyc2VGaWVsZE9wdGlvbnMoaSksdGhpcy50bi5za2lwKFwie1wiKTtcIn1cIiE9PShzPXRoaXMudG4ubmV4dCgpKTspaWYodC5SVUxFLnRlc3QocykpdGhpcy5fcGFyc2VNZXNzYWdlRmllbGQobyxzKTtlbHNlIGlmKFwib25lb2ZcIj09PXMpdGhpcy5fcGFyc2VNZXNzYWdlT25lT2Yobyk7ZWxzZSBpZihcImVudW1cIj09PXMpdGhpcy5fcGFyc2VFbnVtKG8pO2Vsc2UgaWYoXCJtZXNzYWdlXCI9PT1zKXRoaXMuX3BhcnNlTWVzc2FnZShvKTtlbHNlIGlmKFwib3B0aW9uXCI9PT1zKXRoaXMuX3BhcnNlT3B0aW9uKG8pO2Vsc2UgaWYoXCJzZXJ2aWNlXCI9PT1zKXRoaXMuX3BhcnNlU2VydmljZShvKTtlbHNlIGlmKFwiZXh0ZW5zaW9uc1wiPT09cylvLmV4dGVuc2lvbnM9dGhpcy5fcGFyc2VFeHRlbnNpb25SYW5nZXMoKTtlbHNlIGlmKFwicmVzZXJ2ZWRcIj09PXMpdGhpcy5fcGFyc2VJZ25vcmVkKCk7ZWxzZSBpZihcImV4dGVuZFwiPT09cyl0aGlzLl9wYXJzZUV4dGVuZChvKTtlbHNle2lmKCF0LlRZUEVSRUYudGVzdChzKSl0aHJvdyBFcnJvcihcImlsbGVnYWwgbWVzc2FnZSB0b2tlbjogXCIrcyk7aWYoIXRoaXMucHJvdG8zKXRocm93IEVycm9yKFwiaWxsZWdhbCBmaWVsZCBydWxlOiBcIitzKTt0aGlzLl9wYXJzZU1lc3NhZ2VGaWVsZChvLFwib3B0aW9uYWxcIixzKX1yZXR1cm4gdGhpcy50bi5vbWl0KFwiO1wiKSxlLm1lc3NhZ2VzLnB1c2gobyksb30sby5fcGFyc2VJZ25vcmVkPWZ1bmN0aW9uKCl7Zm9yKDtcIjtcIiE9PXRoaXMudG4ucGVlaygpOyl0aGlzLnRuLm5leHQoKTt0aGlzLnRuLnNraXAoXCI7XCIpfSxvLl9wYXJzZU1lc3NhZ2VGaWVsZD1mdW5jdGlvbihlLGkscil7dmFyIHMsbyxhO2lmKCF0LlJVTEUudGVzdChpKSl0aHJvdyBFcnJvcihcImlsbGVnYWwgbWVzc2FnZSBmaWVsZCBydWxlOiBcIitpKTtpZihzPXtydWxlOmksdHlwZTpcIlwiLG5hbWU6XCJcIixvcHRpb25zOnt9LGlkOjB9LFwibWFwXCI9PT1pKXtpZihyKXRocm93IEVycm9yKFwiaWxsZWdhbCB0eXBlOiBcIityKTtpZih0aGlzLnRuLnNraXAoXCI8XCIpLG89dGhpcy50bi5uZXh0KCksIXQuVFlQRS50ZXN0KG8pJiYhdC5UWVBFUkVGLnRlc3QobykpdGhyb3cgRXJyb3IoXCJpbGxlZ2FsIG1lc3NhZ2UgZmllbGQgdHlwZTogXCIrbyk7aWYocy5rZXl0eXBlPW8sdGhpcy50bi5za2lwKFwiLFwiKSxvPXRoaXMudG4ubmV4dCgpLCF0LlRZUEUudGVzdChvKSYmIXQuVFlQRVJFRi50ZXN0KG8pKXRocm93IEVycm9yKFwiaWxsZWdhbCBtZXNzYWdlIGZpZWxkOiBcIitvKTtpZihzLnR5cGU9byx0aGlzLnRuLnNraXAoXCI+XCIpLG89dGhpcy50bi5uZXh0KCksIXQuTkFNRS50ZXN0KG8pKXRocm93IEVycm9yKFwiaWxsZWdhbCBtZXNzYWdlIGZpZWxkIG5hbWU6IFwiK28pO3MubmFtZT1vLHRoaXMudG4uc2tpcChcIj1cIikscy5pZD1uKHRoaXMudG4ubmV4dCgpKSxcIltcIj09PShvPXRoaXMudG4ucGVlaygpKSYmdGhpcy5fcGFyc2VGaWVsZE9wdGlvbnMocyksdGhpcy50bi5za2lwKFwiO1wiKX1lbHNlIGlmKFwiZ3JvdXBcIj09PShyPXZvaWQgMCE9PXI/cjp0aGlzLnRuLm5leHQoKSkpe2lmKGE9dGhpcy5fcGFyc2VNZXNzYWdlKGUscyksIS9eW0EtWl0vLnRlc3QoYS5uYW1lKSl0aHJvdyBFcnJvcihcImlsbGVnYWwgZ3JvdXAgbmFtZTogXCIrYS5uYW1lKTtzLnR5cGU9YS5uYW1lLHMubmFtZT1hLm5hbWUudG9Mb3dlckNhc2UoKSx0aGlzLnRuLm9taXQoXCI7XCIpfWVsc2V7aWYoIXQuVFlQRS50ZXN0KHIpJiYhdC5UWVBFUkVGLnRlc3QocikpdGhyb3cgRXJyb3IoXCJpbGxlZ2FsIG1lc3NhZ2UgZmllbGQgdHlwZTogXCIrcik7aWYocy50eXBlPXIsbz10aGlzLnRuLm5leHQoKSwhdC5OQU1FLnRlc3QobykpdGhyb3cgRXJyb3IoXCJpbGxlZ2FsIG1lc3NhZ2UgZmllbGQgbmFtZTogXCIrbyk7cy5uYW1lPW8sdGhpcy50bi5za2lwKFwiPVwiKSxzLmlkPW4odGhpcy50bi5uZXh0KCkpLFwiW1wiPT09KG89dGhpcy50bi5wZWVrKCkpJiZ0aGlzLl9wYXJzZUZpZWxkT3B0aW9ucyhzKSx0aGlzLnRuLnNraXAoXCI7XCIpfXJldHVybiBlLmZpZWxkcy5wdXNoKHMpLHN9LG8uX3BhcnNlTWVzc2FnZU9uZU9mPWZ1bmN0aW9uKGUpe3ZhciBuLGkscixzPXRoaXMudG4ubmV4dCgpO2lmKCF0Lk5BTUUudGVzdChzKSl0aHJvdyBFcnJvcihcImlsbGVnYWwgb25lb2YgbmFtZTogXCIrcyk7Zm9yKGk9cyxyPVtdLHRoaXMudG4uc2tpcChcIntcIik7XCJ9XCIhPT0ocz10aGlzLnRuLm5leHQoKSk7KShuPXRoaXMuX3BhcnNlTWVzc2FnZUZpZWxkKGUsXCJvcHRpb25hbFwiLHMpKS5vbmVvZj1pLHIucHVzaChuLmlkKTt0aGlzLnRuLm9taXQoXCI7XCIpLGUub25lb2ZzW2ldPXJ9LG8uX3BhcnNlRmllbGRPcHRpb25zPWZ1bmN0aW9uKGUpe3RoaXMudG4uc2tpcChcIltcIik7Zm9yKHZhciB0PSEwO1wiXVwiIT09dGhpcy50bi5wZWVrKCk7KXR8fHRoaXMudG4uc2tpcChcIixcIiksdGhpcy5fcGFyc2VPcHRpb24oZSwhMCksdD0hMTt0aGlzLnRuLm5leHQoKX0sby5fcGFyc2VFbnVtPWZ1bmN0aW9uKGUpe3ZhciBpLHI9e25hbWU6XCJcIix2YWx1ZXM6W10sb3B0aW9uczp7fX0scz10aGlzLnRuLm5leHQoKTtpZighdC5OQU1FLnRlc3QocykpdGhyb3cgRXJyb3IoXCJpbGxlZ2FsIG5hbWU6IFwiK3MpO2ZvcihyLm5hbWU9cyx0aGlzLnRuLnNraXAoXCJ7XCIpO1wifVwiIT09KHM9dGhpcy50bi5uZXh0KCkpOylpZihcIm9wdGlvblwiPT09cyl0aGlzLl9wYXJzZU9wdGlvbihyKTtlbHNle2lmKCF0Lk5BTUUudGVzdChzKSl0aHJvdyBFcnJvcihcImlsbGVnYWwgbmFtZTogXCIrcyk7dGhpcy50bi5za2lwKFwiPVwiKSxpPXtuYW1lOnMsaWQ6bih0aGlzLnRuLm5leHQoKSwhMCl9LFwiW1wiPT09KHM9dGhpcy50bi5wZWVrKCkpJiZ0aGlzLl9wYXJzZUZpZWxkT3B0aW9ucyh7b3B0aW9uczp7fX0pLHRoaXMudG4uc2tpcChcIjtcIiksci52YWx1ZXMucHVzaChpKX10aGlzLnRuLm9taXQoXCI7XCIpLGUuZW51bXMucHVzaChyKX0sby5fcGFyc2VFeHRlbnNpb25SYW5nZXM9ZnVuY3Rpb24oKXt2YXIgdCxuLHIscz1bXTtkb3tmb3Iobj1bXTs7KXtzd2l0Y2godD10aGlzLnRuLm5leHQoKSl7Y2FzZVwibWluXCI6cj1lLklEX01JTjticmVhaztjYXNlXCJtYXhcIjpyPWUuSURfTUFYO2JyZWFrO2RlZmF1bHQ6cj1pKHQpfWlmKG4ucHVzaChyKSwyPT09bi5sZW5ndGgpYnJlYWs7aWYoXCJ0b1wiIT09dGhpcy50bi5wZWVrKCkpe24ucHVzaChyKTticmVha310aGlzLnRuLm5leHQoKX1zLnB1c2gobil9d2hpbGUodGhpcy50bi5vbWl0KFwiLFwiKSk7cmV0dXJuIHRoaXMudG4uc2tpcChcIjtcIiksc30sby5fcGFyc2VFeHRlbmQ9ZnVuY3Rpb24oZSl7dmFyIG4saT10aGlzLnRuLm5leHQoKTtpZighdC5UWVBFUkVGLnRlc3QoaSkpdGhyb3cgRXJyb3IoXCJpbGxlZ2FsIGV4dGVuZCByZWZlcmVuY2U6IFwiK2kpO2ZvcihuPXtyZWY6aSxmaWVsZHM6W119LHRoaXMudG4uc2tpcChcIntcIik7XCJ9XCIhPT0oaT10aGlzLnRuLm5leHQoKSk7KWlmKHQuUlVMRS50ZXN0KGkpKXRoaXMuX3BhcnNlTWVzc2FnZUZpZWxkKG4saSk7ZWxzZXtpZighdC5UWVBFUkVGLnRlc3QoaSkpdGhyb3cgRXJyb3IoXCJpbGxlZ2FsIGV4dGVuZCB0b2tlbjogXCIraSk7aWYoIXRoaXMucHJvdG8zKXRocm93IEVycm9yKFwiaWxsZWdhbCBmaWVsZCBydWxlOiBcIitpKTt0aGlzLl9wYXJzZU1lc3NhZ2VGaWVsZChuLFwib3B0aW9uYWxcIixpKX1yZXR1cm4gdGhpcy50bi5vbWl0KFwiO1wiKSxlLm1lc3NhZ2VzLnB1c2gobiksbn0sby50b1N0cmluZz1mdW5jdGlvbigpe3JldHVyblwiUGFyc2VyIGF0IGxpbmUgXCIrdGhpcy50bi5saW5lfSxhLlBhcnNlcj1zLGF9KHIsci5MYW5nKSxyLlJlZmxlY3Q9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gaShlLG4pe2lmKGUmJlwibnVtYmVyXCI9PXR5cGVvZiBlLmxvdyYmXCJudW1iZXJcIj09dHlwZW9mIGUuaGlnaCYmXCJib29sZWFuXCI9PXR5cGVvZiBlLnVuc2lnbmVkJiZlLmxvdz09ZS5sb3cmJmUuaGlnaD09ZS5oaWdoKXJldHVybiBuZXcgdC5Mb25nKGUubG93LGUuaGlnaCx2b2lkIDA9PT1uP2UudW5zaWduZWQ6bik7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGUpcmV0dXJuIHQuTG9uZy5mcm9tU3RyaW5nKGUsbnx8ITEsMTApO2lmKFwibnVtYmVyXCI9PXR5cGVvZiBlKXJldHVybiB0LkxvbmcuZnJvbU51bWJlcihlLG58fCExKTt0aHJvdyBFcnJvcihcIm5vdCBjb252ZXJ0aWJsZSB0byBMb25nXCIpfWZ1bmN0aW9uIHIoZSxuKXt2YXIgaT1uLnJlYWRWYXJpbnQzMigpLHM9NyZpLG89aT4+PjM7c3dpdGNoKHMpe2Nhc2UgdC5XSVJFX1RZUEVTLlZBUklOVDpkb3tpPW4ucmVhZFVpbnQ4KCl9d2hpbGUoMTI4PT0oMTI4JmkpKTticmVhaztjYXNlIHQuV0lSRV9UWVBFUy5CSVRTNjQ6bi5vZmZzZXQrPTg7YnJlYWs7Y2FzZSB0LldJUkVfVFlQRVMuTERFTElNOmk9bi5yZWFkVmFyaW50MzIoKSxuLm9mZnNldCs9aTticmVhaztjYXNlIHQuV0lSRV9UWVBFUy5TVEFSVEdST1VQOnIobyxuKTticmVhaztjYXNlIHQuV0lSRV9UWVBFUy5FTkRHUk9VUDppZihvPT09ZSlyZXR1cm4hMTt0aHJvdyBFcnJvcihcIklsbGVnYWwgR1JPVVBFTkQgYWZ0ZXIgdW5rbm93biBncm91cDogXCIrbytcIiAoXCIrZStcIiBleHBlY3RlZClcIik7Y2FzZSB0LldJUkVfVFlQRVMuQklUUzMyOm4ub2Zmc2V0Kz00O2JyZWFrO2RlZmF1bHQ6dGhyb3cgRXJyb3IoXCJJbGxlZ2FsIHdpcmUgdHlwZSBpbiB1bmtub3duIGdyb3VwIFwiK2UrXCI6IFwiK3MpfXJldHVybiEwfXZhciBzLG8sYSx1LGMsaCxsLGQsZixwLGcsXyx5LG0sdixFLFQ9e30sST1mdW5jdGlvbihlLHQsbil7dGhpcy5idWlsZGVyPWUsdGhpcy5wYXJlbnQ9dCx0aGlzLm5hbWU9bix0aGlzLmNsYXNzTmFtZX0sQz1JLnByb3RvdHlwZTtyZXR1cm4gQy5mcW49ZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcy5uYW1lLHQ9dGhpcztudWxsIT0odD10LnBhcmVudCk7KWU9dC5uYW1lK1wiLlwiK2U7cmV0dXJuIGV9LEMudG9TdHJpbmc9ZnVuY3Rpb24oZSl7cmV0dXJuKGU/dGhpcy5jbGFzc05hbWUrXCIgXCI6XCJcIikrdGhpcy5mcW4oKX0sQy5idWlsZD1mdW5jdGlvbigpe3Rocm93IEVycm9yKHRoaXMudG9TdHJpbmcoITApK1wiIGNhbm5vdCBiZSBidWlsdCBkaXJlY3RseVwiKX0sVC5UPUksKG89KHM9ZnVuY3Rpb24oZSx0LG4saSxyKXtJLmNhbGwodGhpcyxlLHQsbiksdGhpcy5jbGFzc05hbWU9XCJOYW1lc3BhY2VcIix0aGlzLmNoaWxkcmVuPVtdLHRoaXMub3B0aW9ucz1pfHx7fSx0aGlzLnN5bnRheD1yfHxcInByb3RvMlwifSkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoSS5wcm90b3R5cGUpKS5nZXRDaGlsZHJlbj1mdW5jdGlvbihlKXt2YXIgdCxuLGk7aWYobnVsbD09KGU9ZXx8bnVsbCkpcmV0dXJuIHRoaXMuY2hpbGRyZW4uc2xpY2UoKTtmb3IodD1bXSxuPTAsaT10aGlzLmNoaWxkcmVuLmxlbmd0aDtpPm47KytuKXRoaXMuY2hpbGRyZW5bbl1pbnN0YW5jZW9mIGUmJnQucHVzaCh0aGlzLmNoaWxkcmVuW25dKTtyZXR1cm4gdH0sby5hZGRDaGlsZD1mdW5jdGlvbihlKXt2YXIgdDtpZih0PXRoaXMuZ2V0Q2hpbGQoZS5uYW1lKSlpZih0IGluc3RhbmNlb2YgYy5GaWVsZCYmdC5uYW1lIT09dC5vcmlnaW5hbE5hbWUmJm51bGw9PT10aGlzLmdldENoaWxkKHQub3JpZ2luYWxOYW1lKSl0Lm5hbWU9dC5vcmlnaW5hbE5hbWU7ZWxzZXtpZighKGUgaW5zdGFuY2VvZiBjLkZpZWxkJiZlLm5hbWUhPT1lLm9yaWdpbmFsTmFtZSYmbnVsbD09PXRoaXMuZ2V0Q2hpbGQoZS5vcmlnaW5hbE5hbWUpKSl0aHJvdyBFcnJvcihcIkR1cGxpY2F0ZSBuYW1lIGluIG5hbWVzcGFjZSBcIit0aGlzLnRvU3RyaW5nKCEwKStcIjogXCIrZS5uYW1lKTtlLm5hbWU9ZS5vcmlnaW5hbE5hbWV9dGhpcy5jaGlsZHJlbi5wdXNoKGUpfSxvLmdldENoaWxkPWZ1bmN0aW9uKGUpe3ZhciB0LG4saT1cIm51bWJlclwiPT10eXBlb2YgZT9cImlkXCI6XCJuYW1lXCI7Zm9yKHQ9MCxuPXRoaXMuY2hpbGRyZW4ubGVuZ3RoO24+dDsrK3QpaWYodGhpcy5jaGlsZHJlblt0XVtpXT09PWUpcmV0dXJuIHRoaXMuY2hpbGRyZW5bdF07cmV0dXJuIG51bGx9LG8ucmVzb2x2ZT1mdW5jdGlvbihlLHQpe3ZhciBuLGk9XCJzdHJpbmdcIj09dHlwZW9mIGU/ZS5zcGxpdChcIi5cIik6ZSxyPXRoaXMscz0wO2lmKFwiXCI9PT1pW3NdKXtmb3IoO251bGwhPT1yLnBhcmVudDspcj1yLnBhcmVudDtzKyt9ZG97ZG97aWYoIShyIGluc3RhbmNlb2YgVC5OYW1lc3BhY2UpKXtyPW51bGw7YnJlYWt9aWYoISgobj1yLmdldENoaWxkKGlbc10pKSYmbiBpbnN0YW5jZW9mIFQuVCYmKCF0fHxuIGluc3RhbmNlb2YgVC5OYW1lc3BhY2UpKSl7cj1udWxsO2JyZWFrfXI9bixzKyt9d2hpbGUoczxpLmxlbmd0aCk7aWYobnVsbCE9cilicmVhaztpZihudWxsIT09dGhpcy5wYXJlbnQpcmV0dXJuIHRoaXMucGFyZW50LnJlc29sdmUoZSx0KX13aGlsZShudWxsIT1yKTtyZXR1cm4gcn0sby5xbj1mdW5jdGlvbihlKXt2YXIgdCxuLGk9W10scj1lO2Rve2kudW5zaGlmdChyLm5hbWUpLHI9ci5wYXJlbnR9d2hpbGUobnVsbCE9PXIpO2Zvcih0PTE7dDw9aS5sZW5ndGg7dCsrKWlmKG49aS5zbGljZShpLmxlbmd0aC10KSxlPT09dGhpcy5yZXNvbHZlKG4sZSBpbnN0YW5jZW9mIFQuTmFtZXNwYWNlKSlyZXR1cm4gbi5qb2luKFwiLlwiKTtyZXR1cm4gZS5mcW4oKX0sby5idWlsZD1mdW5jdGlvbigpe3ZhciBlLHQsbixpPXt9LHI9dGhpcy5jaGlsZHJlbjtmb3IodD0wLG49ci5sZW5ndGg7bj50OysrdCkoZT1yW3RdKWluc3RhbmNlb2YgcyYmKGlbZS5uYW1lXT1lLmJ1aWxkKCkpO3JldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLFwiJG9wdGlvbnNcIix7dmFsdWU6dGhpcy5idWlsZE9wdCgpfSksaX0sby5idWlsZE9wdD1mdW5jdGlvbigpe3ZhciBlLHQsbixpLHI9e30scz1PYmplY3Qua2V5cyh0aGlzLm9wdGlvbnMpO2ZvcihlPTAsdD1zLmxlbmd0aDt0PmU7KytlKW49c1tlXSxpPXRoaXMub3B0aW9uc1tzW2VdXSxyW25dPWk7cmV0dXJuIHJ9LG8uZ2V0T3B0aW9uPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lP3RoaXMub3B0aW9uczp2b2lkIDAhPT10aGlzLm9wdGlvbnNbZV0/dGhpcy5vcHRpb25zW2VdOm51bGx9LFQuTmFtZXNwYWNlPXMsdT0oYT1mdW5jdGlvbihlLG4saSxyKXtpZih0aGlzLnR5cGU9ZSx0aGlzLnJlc29sdmVkVHlwZT1uLHRoaXMuaXNNYXBLZXk9aSx0aGlzLnN5bnRheD1yLGkmJnQuTUFQX0tFWV9UWVBFUy5pbmRleE9mKGUpPDApdGhyb3cgRXJyb3IoXCJJbnZhbGlkIG1hcCBrZXkgdHlwZTogXCIrZS5uYW1lKX0pLnByb3RvdHlwZSxhLmRlZmF1bHRGaWVsZFZhbHVlPWZ1bmN0aW9uKGUpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlJiYoZT10LlRZUEVTW2VdKSx2b2lkIDA9PT1lLmRlZmF1bHRWYWx1ZSl0aHJvdyBFcnJvcihcImRlZmF1bHQgdmFsdWUgZm9yIHR5cGUgXCIrZS5uYW1lK1wiIGlzIG5vdCBzdXBwb3J0ZWRcIik7cmV0dXJuIGU9PXQuVFlQRVMuYnl0ZXM/bmV3IG4oMCk6ZS5kZWZhdWx0VmFsdWV9LHUudmVyaWZ5VmFsdWU9ZnVuY3Rpb24obil7dmFyIHIscyxvLGE9ZnVuY3Rpb24oZSx0KXt0aHJvdyBFcnJvcihcIklsbGVnYWwgdmFsdWUgZm9yIFwiK3RoaXMudG9TdHJpbmcoITApK1wiIG9mIHR5cGUgXCIrdGhpcy50eXBlLm5hbWUrXCI6IFwiK2UrXCIgKFwiK3QrXCIpXCIpfS5iaW5kKHRoaXMpO3N3aXRjaCh0aGlzLnR5cGUpe2Nhc2UgdC5UWVBFUy5pbnQzMjpjYXNlIHQuVFlQRVMuc2ludDMyOmNhc2UgdC5UWVBFUy5zZml4ZWQzMjpyZXR1cm4oXCJudW1iZXJcIiE9dHlwZW9mIG58fG49PW4mJm4lMSE9MCkmJmEodHlwZW9mIG4sXCJub3QgYW4gaW50ZWdlclwiKSxuPjQyOTQ5NjcyOTU/MHxuOm47Y2FzZSB0LlRZUEVTLnVpbnQzMjpjYXNlIHQuVFlQRVMuZml4ZWQzMjpyZXR1cm4oXCJudW1iZXJcIiE9dHlwZW9mIG58fG49PW4mJm4lMSE9MCkmJmEodHlwZW9mIG4sXCJub3QgYW4gaW50ZWdlclwiKSxuPDA/bj4+PjA6bjtjYXNlIHQuVFlQRVMuaW50NjQ6Y2FzZSB0LlRZUEVTLnNpbnQ2NDpjYXNlIHQuVFlQRVMuc2ZpeGVkNjQ6aWYodC5Mb25nKXRyeXtyZXR1cm4gaShuLCExKX1jYXRjaChlKXthKHR5cGVvZiBuLGUubWVzc2FnZSl9ZWxzZSBhKHR5cGVvZiBuLFwicmVxdWlyZXMgTG9uZy5qc1wiKTtjYXNlIHQuVFlQRVMudWludDY0OmNhc2UgdC5UWVBFUy5maXhlZDY0OmlmKHQuTG9uZyl0cnl7cmV0dXJuIGkobiwhMCl9Y2F0Y2goZSl7YSh0eXBlb2YgbixlLm1lc3NhZ2UpfWVsc2UgYSh0eXBlb2YgbixcInJlcXVpcmVzIExvbmcuanNcIik7Y2FzZSB0LlRZUEVTLmJvb2w6cmV0dXJuXCJib29sZWFuXCIhPXR5cGVvZiBuJiZhKHR5cGVvZiBuLFwibm90IGEgYm9vbGVhblwiKSxuO2Nhc2UgdC5UWVBFUy5mbG9hdDpjYXNlIHQuVFlQRVMuZG91YmxlOnJldHVyblwibnVtYmVyXCIhPXR5cGVvZiBuJiZhKHR5cGVvZiBuLFwibm90IGEgbnVtYmVyXCIpLG47Y2FzZSB0LlRZUEVTLnN0cmluZzpyZXR1cm5cInN0cmluZ1wiPT10eXBlb2Ygbnx8biYmbiBpbnN0YW5jZW9mIFN0cmluZ3x8YSh0eXBlb2YgbixcIm5vdCBhIHN0cmluZ1wiKSxcIlwiK247Y2FzZSB0LlRZUEVTLmJ5dGVzOnJldHVybiBlLmlzQnl0ZUJ1ZmZlcihuKT9uOmUud3JhcChuKTtjYXNlIHQuVFlQRVMuZW51bTpmb3Iocj10aGlzLnJlc29sdmVkVHlwZS5nZXRDaGlsZHJlbih0LlJlZmxlY3QuRW51bS5WYWx1ZSksbz0wO288ci5sZW5ndGg7bysrKXtpZihyW29dLm5hbWU9PW4pcmV0dXJuIHJbb10uaWQ7aWYocltvXS5pZD09bilyZXR1cm4gcltvXS5pZH1pZihcInByb3RvM1wiPT09dGhpcy5zeW50YXgpcmV0dXJuKFwibnVtYmVyXCIhPXR5cGVvZiBufHxuPT1uJiZuJTEhPTApJiZhKHR5cGVvZiBuLFwibm90IGFuIGludGVnZXJcIiksKG4+NDI5NDk2NzI5NXx8bjwwKSYmYSh0eXBlb2YgbixcIm5vdCBpbiByYW5nZSBmb3IgdWludDMyXCIpLG47YShuLFwibm90IGEgdmFsaWQgZW51bSB2YWx1ZVwiKTtjYXNlIHQuVFlQRVMuZ3JvdXA6Y2FzZSB0LlRZUEVTLm1lc3NhZ2U6aWYobiYmXCJvYmplY3RcIj09dHlwZW9mIG58fGEodHlwZW9mIG4sXCJvYmplY3QgZXhwZWN0ZWRcIiksbiBpbnN0YW5jZW9mIHRoaXMucmVzb2x2ZWRUeXBlLmNsYXp6KXJldHVybiBuO2lmKG4gaW5zdGFuY2VvZiB0LkJ1aWxkZXIuTWVzc2FnZSl7Zm9yKG8gaW4gcz17fSxuKW4uaGFzT3duUHJvcGVydHkobykmJihzW29dPW5bb10pO249c31yZXR1cm4gbmV3IHRoaXMucmVzb2x2ZWRUeXBlLmNsYXp6KG4pfXRocm93IEVycm9yKFwiW0lOVEVSTkFMXSBJbGxlZ2FsIHZhbHVlIGZvciBcIit0aGlzLnRvU3RyaW5nKCEwKStcIjogXCIrbitcIiAodW5kZWZpbmVkIHR5cGUgXCIrdGhpcy50eXBlK1wiKVwiKX0sdS5jYWxjdWxhdGVMZW5ndGg9ZnVuY3Rpb24oZSxpKXtpZihudWxsPT09aSlyZXR1cm4gMDt2YXIgcjtzd2l0Y2godGhpcy50eXBlKXtjYXNlIHQuVFlQRVMuaW50MzI6cmV0dXJuIGk8MD9uLmNhbGN1bGF0ZVZhcmludDY0KGkpOm4uY2FsY3VsYXRlVmFyaW50MzIoaSk7Y2FzZSB0LlRZUEVTLnVpbnQzMjpyZXR1cm4gbi5jYWxjdWxhdGVWYXJpbnQzMihpKTtjYXNlIHQuVFlQRVMuc2ludDMyOnJldHVybiBuLmNhbGN1bGF0ZVZhcmludDMyKG4uemlnWmFnRW5jb2RlMzIoaSkpO2Nhc2UgdC5UWVBFUy5maXhlZDMyOmNhc2UgdC5UWVBFUy5zZml4ZWQzMjpjYXNlIHQuVFlQRVMuZmxvYXQ6cmV0dXJuIDQ7Y2FzZSB0LlRZUEVTLmludDY0OmNhc2UgdC5UWVBFUy51aW50NjQ6cmV0dXJuIG4uY2FsY3VsYXRlVmFyaW50NjQoaSk7Y2FzZSB0LlRZUEVTLnNpbnQ2NDpyZXR1cm4gbi5jYWxjdWxhdGVWYXJpbnQ2NChuLnppZ1phZ0VuY29kZTY0KGkpKTtjYXNlIHQuVFlQRVMuZml4ZWQ2NDpjYXNlIHQuVFlQRVMuc2ZpeGVkNjQ6cmV0dXJuIDg7Y2FzZSB0LlRZUEVTLmJvb2w6cmV0dXJuIDE7Y2FzZSB0LlRZUEVTLmVudW06cmV0dXJuIG4uY2FsY3VsYXRlVmFyaW50MzIoaSk7Y2FzZSB0LlRZUEVTLmRvdWJsZTpyZXR1cm4gODtjYXNlIHQuVFlQRVMuc3RyaW5nOnJldHVybiByPW4uY2FsY3VsYXRlVVRGOEJ5dGVzKGkpLG4uY2FsY3VsYXRlVmFyaW50MzIocikrcjtjYXNlIHQuVFlQRVMuYnl0ZXM6aWYoaS5yZW1haW5pbmcoKTwwKXRocm93IEVycm9yKFwiSWxsZWdhbCB2YWx1ZSBmb3IgXCIrdGhpcy50b1N0cmluZyghMCkrXCI6IFwiK2kucmVtYWluaW5nKCkrXCIgYnl0ZXMgcmVtYWluaW5nXCIpO3JldHVybiBuLmNhbGN1bGF0ZVZhcmludDMyKGkucmVtYWluaW5nKCkpK2kucmVtYWluaW5nKCk7Y2FzZSB0LlRZUEVTLm1lc3NhZ2U6cmV0dXJuIHI9dGhpcy5yZXNvbHZlZFR5cGUuY2FsY3VsYXRlKGkpLG4uY2FsY3VsYXRlVmFyaW50MzIocikrcjtjYXNlIHQuVFlQRVMuZ3JvdXA6cmV0dXJuKHI9dGhpcy5yZXNvbHZlZFR5cGUuY2FsY3VsYXRlKGkpKStuLmNhbGN1bGF0ZVZhcmludDMyKGU8PDN8dC5XSVJFX1RZUEVTLkVOREdST1VQKX10aHJvdyBFcnJvcihcIltJTlRFUk5BTF0gSWxsZWdhbCB2YWx1ZSB0byBlbmNvZGUgaW4gXCIrdGhpcy50b1N0cmluZyghMCkrXCI6IFwiK2krXCIgKHVua25vd24gdHlwZSlcIil9LHUuZW5jb2RlVmFsdWU9ZnVuY3Rpb24oZSxpLHIpe3ZhciBzLG87aWYobnVsbD09PWkpcmV0dXJuIHI7c3dpdGNoKHRoaXMudHlwZSl7Y2FzZSB0LlRZUEVTLmludDMyOmk8MD9yLndyaXRlVmFyaW50NjQoaSk6ci53cml0ZVZhcmludDMyKGkpO2JyZWFrO2Nhc2UgdC5UWVBFUy51aW50MzI6ci53cml0ZVZhcmludDMyKGkpO2JyZWFrO2Nhc2UgdC5UWVBFUy5zaW50MzI6ci53cml0ZVZhcmludDMyWmlnWmFnKGkpO2JyZWFrO2Nhc2UgdC5UWVBFUy5maXhlZDMyOnIud3JpdGVVaW50MzIoaSk7YnJlYWs7Y2FzZSB0LlRZUEVTLnNmaXhlZDMyOnIud3JpdGVJbnQzMihpKTticmVhaztjYXNlIHQuVFlQRVMuaW50NjQ6Y2FzZSB0LlRZUEVTLnVpbnQ2NDpyLndyaXRlVmFyaW50NjQoaSk7YnJlYWs7Y2FzZSB0LlRZUEVTLnNpbnQ2NDpyLndyaXRlVmFyaW50NjRaaWdaYWcoaSk7YnJlYWs7Y2FzZSB0LlRZUEVTLmZpeGVkNjQ6ci53cml0ZVVpbnQ2NChpKTticmVhaztjYXNlIHQuVFlQRVMuc2ZpeGVkNjQ6ci53cml0ZUludDY0KGkpO2JyZWFrO2Nhc2UgdC5UWVBFUy5ib29sOlwic3RyaW5nXCI9PXR5cGVvZiBpP3Iud3JpdGVWYXJpbnQzMihcImZhbHNlXCI9PT1pLnRvTG93ZXJDYXNlKCk/MDohIWkpOnIud3JpdGVWYXJpbnQzMihpPzE6MCk7YnJlYWs7Y2FzZSB0LlRZUEVTLmVudW06ci53cml0ZVZhcmludDMyKGkpO2JyZWFrO2Nhc2UgdC5UWVBFUy5mbG9hdDpyLndyaXRlRmxvYXQzMihpKTticmVhaztjYXNlIHQuVFlQRVMuZG91YmxlOnIud3JpdGVGbG9hdDY0KGkpO2JyZWFrO2Nhc2UgdC5UWVBFUy5zdHJpbmc6ci53cml0ZVZTdHJpbmcoaSk7YnJlYWs7Y2FzZSB0LlRZUEVTLmJ5dGVzOmlmKGkucmVtYWluaW5nKCk8MCl0aHJvdyBFcnJvcihcIklsbGVnYWwgdmFsdWUgZm9yIFwiK3RoaXMudG9TdHJpbmcoITApK1wiOiBcIitpLnJlbWFpbmluZygpK1wiIGJ5dGVzIHJlbWFpbmluZ1wiKTtzPWkub2Zmc2V0LHIud3JpdGVWYXJpbnQzMihpLnJlbWFpbmluZygpKSxyLmFwcGVuZChpKSxpLm9mZnNldD1zO2JyZWFrO2Nhc2UgdC5UWVBFUy5tZXNzYWdlOm89KG5ldyBuKS5MRSgpLHRoaXMucmVzb2x2ZWRUeXBlLmVuY29kZShpLG8pLHIud3JpdGVWYXJpbnQzMihvLm9mZnNldCksci5hcHBlbmQoby5mbGlwKCkpO2JyZWFrO2Nhc2UgdC5UWVBFUy5ncm91cDp0aGlzLnJlc29sdmVkVHlwZS5lbmNvZGUoaSxyKSxyLndyaXRlVmFyaW50MzIoZTw8M3x0LldJUkVfVFlQRVMuRU5ER1JPVVApO2JyZWFrO2RlZmF1bHQ6dGhyb3cgRXJyb3IoXCJbSU5URVJOQUxdIElsbGVnYWwgdmFsdWUgdG8gZW5jb2RlIGluIFwiK3RoaXMudG9TdHJpbmcoITApK1wiOiBcIitpK1wiICh1bmtub3duIHR5cGUpXCIpfXJldHVybiByfSx1LmRlY29kZT1mdW5jdGlvbihlLG4saSl7aWYobiE9dGhpcy50eXBlLndpcmVUeXBlKXRocm93IEVycm9yKFwiVW5leHBlY3RlZCB3aXJlIHR5cGUgZm9yIGVsZW1lbnRcIik7dmFyIHIscztzd2l0Y2godGhpcy50eXBlKXtjYXNlIHQuVFlQRVMuaW50MzI6cmV0dXJuIDB8ZS5yZWFkVmFyaW50MzIoKTtjYXNlIHQuVFlQRVMudWludDMyOnJldHVybiBlLnJlYWRWYXJpbnQzMigpPj4+MDtjYXNlIHQuVFlQRVMuc2ludDMyOnJldHVybiAwfGUucmVhZFZhcmludDMyWmlnWmFnKCk7Y2FzZSB0LlRZUEVTLmZpeGVkMzI6cmV0dXJuIGUucmVhZFVpbnQzMigpPj4+MDtjYXNlIHQuVFlQRVMuc2ZpeGVkMzI6cmV0dXJuIDB8ZS5yZWFkSW50MzIoKTtjYXNlIHQuVFlQRVMuaW50NjQ6cmV0dXJuIGUucmVhZFZhcmludDY0KCk7Y2FzZSB0LlRZUEVTLnVpbnQ2NDpyZXR1cm4gZS5yZWFkVmFyaW50NjQoKS50b1Vuc2lnbmVkKCk7Y2FzZSB0LlRZUEVTLnNpbnQ2NDpyZXR1cm4gZS5yZWFkVmFyaW50NjRaaWdaYWcoKTtjYXNlIHQuVFlQRVMuZml4ZWQ2NDpyZXR1cm4gZS5yZWFkVWludDY0KCk7Y2FzZSB0LlRZUEVTLnNmaXhlZDY0OnJldHVybiBlLnJlYWRJbnQ2NCgpO2Nhc2UgdC5UWVBFUy5ib29sOnJldHVybiEhZS5yZWFkVmFyaW50MzIoKTtjYXNlIHQuVFlQRVMuZW51bTpyZXR1cm4gZS5yZWFkVmFyaW50MzIoKTtjYXNlIHQuVFlQRVMuZmxvYXQ6cmV0dXJuIGUucmVhZEZsb2F0KCk7Y2FzZSB0LlRZUEVTLmRvdWJsZTpyZXR1cm4gZS5yZWFkRG91YmxlKCk7Y2FzZSB0LlRZUEVTLnN0cmluZzpyZXR1cm4gZS5yZWFkVlN0cmluZygpO2Nhc2UgdC5UWVBFUy5ieXRlczppZihzPWUucmVhZFZhcmludDMyKCksZS5yZW1haW5pbmcoKTxzKXRocm93IEVycm9yKFwiSWxsZWdhbCBudW1iZXIgb2YgYnl0ZXMgZm9yIFwiK3RoaXMudG9TdHJpbmcoITApK1wiOiBcIitzK1wiIHJlcXVpcmVkIGJ1dCBnb3Qgb25seSBcIitlLnJlbWFpbmluZygpKTtyZXR1cm4ocj1lLmNsb25lKCkpLmxpbWl0PXIub2Zmc2V0K3MsZS5vZmZzZXQrPXMscjtjYXNlIHQuVFlQRVMubWVzc2FnZTpyZXR1cm4gcz1lLnJlYWRWYXJpbnQzMigpLHRoaXMucmVzb2x2ZWRUeXBlLmRlY29kZShlLHMpO2Nhc2UgdC5UWVBFUy5ncm91cDpyZXR1cm4gdGhpcy5yZXNvbHZlZFR5cGUuZGVjb2RlKGUsLTEsaSl9dGhyb3cgRXJyb3IoXCJbSU5URVJOQUxdIElsbGVnYWwgZGVjb2RlIHR5cGVcIil9LHUudmFsdWVGcm9tU3RyaW5nPWZ1bmN0aW9uKGUpe2lmKCF0aGlzLmlzTWFwS2V5KXRocm93IEVycm9yKFwidmFsdWVGcm9tU3RyaW5nKCkgY2FsbGVkIG9uIG5vbi1tYXAta2V5IGVsZW1lbnRcIik7c3dpdGNoKHRoaXMudHlwZSl7Y2FzZSB0LlRZUEVTLmludDMyOmNhc2UgdC5UWVBFUy5zaW50MzI6Y2FzZSB0LlRZUEVTLnNmaXhlZDMyOmNhc2UgdC5UWVBFUy51aW50MzI6Y2FzZSB0LlRZUEVTLmZpeGVkMzI6cmV0dXJuIHRoaXMudmVyaWZ5VmFsdWUocGFyc2VJbnQoZSkpO2Nhc2UgdC5UWVBFUy5pbnQ2NDpjYXNlIHQuVFlQRVMuc2ludDY0OmNhc2UgdC5UWVBFUy5zZml4ZWQ2NDpjYXNlIHQuVFlQRVMudWludDY0OmNhc2UgdC5UWVBFUy5maXhlZDY0OnJldHVybiB0aGlzLnZlcmlmeVZhbHVlKGUpO2Nhc2UgdC5UWVBFUy5ib29sOnJldHVyblwidHJ1ZVwiPT09ZTtjYXNlIHQuVFlQRVMuc3RyaW5nOnJldHVybiB0aGlzLnZlcmlmeVZhbHVlKGUpO2Nhc2UgdC5UWVBFUy5ieXRlczpyZXR1cm4gbi5mcm9tQmluYXJ5KGUpfX0sdS52YWx1ZVRvU3RyaW5nPWZ1bmN0aW9uKGUpe2lmKCF0aGlzLmlzTWFwS2V5KXRocm93IEVycm9yKFwidmFsdWVUb1N0cmluZygpIGNhbGxlZCBvbiBub24tbWFwLWtleSBlbGVtZW50XCIpO3JldHVybiB0aGlzLnR5cGU9PT10LlRZUEVTLmJ5dGVzP2UudG9TdHJpbmcoXCJiaW5hcnlcIik6ZS50b1N0cmluZygpfSxULkVsZW1lbnQ9YSwoaD0oYz1mdW5jdGlvbihlLHQsbixpLHIsbyl7cy5jYWxsKHRoaXMsZSx0LG4saSxvKSx0aGlzLmNsYXNzTmFtZT1cIk1lc3NhZ2VcIix0aGlzLmV4dGVuc2lvbnM9dm9pZCAwLHRoaXMuY2xheno9bnVsbCx0aGlzLmlzR3JvdXA9ISFyLHRoaXMuX2ZpZWxkcz1udWxsLHRoaXMuX2ZpZWxkc0J5SWQ9bnVsbCx0aGlzLl9maWVsZHNCeU5hbWU9bnVsbH0pLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHMucHJvdG90eXBlKSkuYnVpbGQ9ZnVuY3Rpb24oaSl7dmFyIHIscyxvLGE7aWYodGhpcy5jbGF6eiYmIWkpcmV0dXJuIHRoaXMuY2xheno7Zm9yKHI9ZnVuY3Rpb24odCxpKXtmdW5jdGlvbiByKGUsaSxzLG8pe3ZhciBhLHUsYyxoLGwsZCxmO2lmKG51bGw9PT1lfHxcIm9iamVjdFwiIT10eXBlb2YgZSlyZXR1cm4gbyYmbyBpbnN0YW5jZW9mIHQuUmVmbGVjdC5FbnVtJiZudWxsIT09KGE9dC5SZWZsZWN0LkVudW0uZ2V0TmFtZShvLm9iamVjdCxlKSk/YTplO2lmKG4uaXNCeXRlQnVmZmVyKGUpKXJldHVybiBpP2UudG9CYXNlNjQoKTplLnRvQnVmZmVyKCk7aWYodC5Mb25nLmlzTG9uZyhlKSlyZXR1cm4gcz9lLnRvU3RyaW5nKCk6dC5Mb25nLmZyb21WYWx1ZShlKTtpZihBcnJheS5pc0FycmF5KGUpKXJldHVybiB1PVtdLGUuZm9yRWFjaCgoZnVuY3Rpb24oZSx0KXt1W3RdPXIoZSxpLHMsbyl9KSksdTtpZih1PXt9LGUgaW5zdGFuY2VvZiB0Lk1hcCl7Zm9yKGg9KGM9ZS5lbnRyaWVzKCkpLm5leHQoKTshaC5kb25lO2g9Yy5uZXh0KCkpdVtlLmtleUVsZW0udmFsdWVUb1N0cmluZyhoLnZhbHVlWzBdKV09cihoLnZhbHVlWzFdLGkscyxlLnZhbHVlRWxlbS5yZXNvbHZlZFR5cGUpO3JldHVybiB1fWZvcihmIGluIGw9ZS4kdHlwZSxkPXZvaWQgMCxlKWUuaGFzT3duUHJvcGVydHkoZikmJih1W2ZdPWwmJihkPWwuZ2V0Q2hpbGQoZikpP3IoZVtmXSxpLHMsZC5yZXNvbHZlZFR5cGUpOnIoZVtmXSxpLHMpKTtyZXR1cm4gdX12YXIgcyxvLGE9aS5nZXRDaGlsZHJlbih0LlJlZmxlY3QuTWVzc2FnZS5GaWVsZCksdT1pLmdldENoaWxkcmVuKHQuUmVmbGVjdC5NZXNzYWdlLk9uZU9mKSxjPWZ1bmN0aW9uKGUpe3ZhciByLHMsbyxoO2Zvcih0LkJ1aWxkZXIuTWVzc2FnZS5jYWxsKHRoaXMpLHI9MCxzPXUubGVuZ3RoO3M+cjsrK3IpdGhpc1t1W3JdLm5hbWVdPW51bGw7Zm9yKHI9MCxzPWEubGVuZ3RoO3M+cjsrK3IpdGhpc1sobz1hW3JdKS5uYW1lXT1vLnJlcGVhdGVkP1tdOm8ubWFwP25ldyB0Lk1hcChvKTpudWxsLCFvLnJlcXVpcmVkJiZcInByb3RvM1wiIT09aS5zeW50YXh8fG51bGw9PT1vLmRlZmF1bHRWYWx1ZXx8KHRoaXNbby5uYW1lXT1vLmRlZmF1bHRWYWx1ZSk7aWYoYXJndW1lbnRzLmxlbmd0aD4wKWlmKDEhPT1hcmd1bWVudHMubGVuZ3RofHxudWxsPT09ZXx8XCJvYmplY3RcIiE9dHlwZW9mIGV8fCEoXCJmdW5jdGlvblwiIT10eXBlb2YgZS5lbmNvZGV8fGUgaW5zdGFuY2VvZiBjKXx8QXJyYXkuaXNBcnJheShlKXx8ZSBpbnN0YW5jZW9mIHQuTWFwfHxuLmlzQnl0ZUJ1ZmZlcihlKXx8ZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyfHx0LkxvbmcmJmUgaW5zdGFuY2VvZiB0LkxvbmcpZm9yKHI9MCxzPWFyZ3VtZW50cy5sZW5ndGg7cz5yOysrcil2b2lkIDAhPT0oaD1hcmd1bWVudHNbcl0pJiZ0aGlzLiRzZXQoYVtyXS5uYW1lLGgpO2Vsc2UgdGhpcy4kc2V0KGUpfSxoPWMucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodC5CdWlsZGVyLk1lc3NhZ2UucHJvdG90eXBlKTtmb3IoaC5hZGQ9ZnVuY3Rpb24oZSxuLHIpe3ZhciBzPWkuX2ZpZWxkc0J5TmFtZVtlXTtpZighcil7aWYoIXMpdGhyb3cgRXJyb3IodGhpcytcIiNcIitlK1wiIGlzIHVuZGVmaW5lZFwiKTtpZighKHMgaW5zdGFuY2VvZiB0LlJlZmxlY3QuTWVzc2FnZS5GaWVsZCkpdGhyb3cgRXJyb3IodGhpcytcIiNcIitlK1wiIGlzIG5vdCBhIGZpZWxkOiBcIitzLnRvU3RyaW5nKCEwKSk7aWYoIXMucmVwZWF0ZWQpdGhyb3cgRXJyb3IodGhpcytcIiNcIitlK1wiIGlzIG5vdCBhIHJlcGVhdGVkIGZpZWxkXCIpO249cy52ZXJpZnlWYWx1ZShuLCEwKX1yZXR1cm4gbnVsbD09PXRoaXNbZV0mJih0aGlzW2VdPVtdKSx0aGlzW2VdLnB1c2gobiksdGhpc30saC4kYWRkPWguYWRkLGguc2V0PWZ1bmN0aW9uKGUsbixyKXt2YXIgcyxvLGE7aWYoZSYmXCJvYmplY3RcIj09dHlwZW9mIGUpe2ZvcihzIGluIHI9bixlKWUuaGFzT3duUHJvcGVydHkocykmJnZvaWQgMCE9PShuPWVbc10pJiZ0aGlzLiRzZXQocyxuLHIpO3JldHVybiB0aGlzfWlmKG89aS5fZmllbGRzQnlOYW1lW2VdLHIpdGhpc1tlXT1uO2Vsc2V7aWYoIW8pdGhyb3cgRXJyb3IodGhpcytcIiNcIitlK1wiIGlzIG5vdCBhIGZpZWxkOiB1bmRlZmluZWRcIik7aWYoIShvIGluc3RhbmNlb2YgdC5SZWZsZWN0Lk1lc3NhZ2UuRmllbGQpKXRocm93IEVycm9yKHRoaXMrXCIjXCIrZStcIiBpcyBub3QgYSBmaWVsZDogXCIrby50b1N0cmluZyghMCkpO3RoaXNbby5uYW1lXT1uPW8udmVyaWZ5VmFsdWUobil9cmV0dXJuIG8mJm8ub25lb2YmJihhPXRoaXNbby5vbmVvZi5uYW1lXSxudWxsIT09bj8obnVsbCE9PWEmJmEhPT1vLm5hbWUmJih0aGlzW2FdPW51bGwpLHRoaXNbby5vbmVvZi5uYW1lXT1vLm5hbWUpOmE9PT1lJiYodGhpc1tvLm9uZW9mLm5hbWVdPW51bGwpKSx0aGlzfSxoLiRzZXQ9aC5zZXQsaC5nZXQ9ZnVuY3Rpb24oZSxuKXtpZihuKXJldHVybiB0aGlzW2VdO3ZhciByPWkuX2ZpZWxkc0J5TmFtZVtlXTtpZighKHImJnIgaW5zdGFuY2VvZiB0LlJlZmxlY3QuTWVzc2FnZS5GaWVsZCkpdGhyb3cgRXJyb3IodGhpcytcIiNcIitlK1wiIGlzIG5vdCBhIGZpZWxkOiB1bmRlZmluZWRcIik7aWYoIShyIGluc3RhbmNlb2YgdC5SZWZsZWN0Lk1lc3NhZ2UuRmllbGQpKXRocm93IEVycm9yKHRoaXMrXCIjXCIrZStcIiBpcyBub3QgYSBmaWVsZDogXCIrci50b1N0cmluZyghMCkpO3JldHVybiB0aGlzW3IubmFtZV19LGguJGdldD1oLmdldCxzPTA7czxhLmxlbmd0aDtzKyspKG89YVtzXSlpbnN0YW5jZW9mIHQuUmVmbGVjdC5NZXNzYWdlLkV4dGVuc2lvbkZpZWxkfHxpLmJ1aWxkZXIub3B0aW9ucy5wb3B1bGF0ZUFjY2Vzc29ycyYmZnVuY3Rpb24oZSl7dmFyIHQsbixyLHM9ZS5vcmlnaW5hbE5hbWUucmVwbGFjZSgvKF9bYS16QS1aXSkvZywoZnVuY3Rpb24oZSl7cmV0dXJuIGUudG9VcHBlckNhc2UoKS5yZXBsYWNlKFwiX1wiLFwiXCIpfSkpO3M9cy5zdWJzdHJpbmcoMCwxKS50b1VwcGVyQ2FzZSgpK3Muc3Vic3RyaW5nKDEpLHQ9ZS5vcmlnaW5hbE5hbWUucmVwbGFjZSgvKFtBLVpdKS9nLChmdW5jdGlvbihlKXtyZXR1cm5cIl9cIitlfSkpLG49ZnVuY3Rpb24odCxuKXtyZXR1cm4gdGhpc1tlLm5hbWVdPW4/dDplLnZlcmlmeVZhbHVlKHQpLHRoaXN9LHI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1tlLm5hbWVdfSxudWxsPT09aS5nZXRDaGlsZChcInNldFwiK3MpJiYoaFtcInNldFwiK3NdPW4pLG51bGw9PT1pLmdldENoaWxkKFwic2V0X1wiK3QpJiYoaFtcInNldF9cIit0XT1uKSxudWxsPT09aS5nZXRDaGlsZChcImdldFwiK3MpJiYoaFtcImdldFwiK3NdPXIpLG51bGw9PT1pLmdldENoaWxkKFwiZ2V0X1wiK3QpJiYoaFtcImdldF9cIit0XT1yKX0obyk7cmV0dXJuIGguZW5jb2RlPWZ1bmN0aW9uKHQsbil7dmFyIHIscztcImJvb2xlYW5cIj09dHlwZW9mIHQmJihuPXQsdD12b2lkIDApLHI9ITEsdHx8KHQ9bmV3IGUscj0hMCkscz10LmxpdHRsZUVuZGlhbjt0cnl7cmV0dXJuIGkuZW5jb2RlKHRoaXMsdC5MRSgpLG4pLChyP3QuZmxpcCgpOnQpLkxFKHMpfWNhdGNoKGUpe3Rocm93IHQuTEUocyksZX19LGMuZW5jb2RlPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gbmV3IGMoZSkuZW5jb2RlKHQsbil9LGguY2FsY3VsYXRlPWZ1bmN0aW9uKCl7cmV0dXJuIGkuY2FsY3VsYXRlKHRoaXMpfSxoLmVuY29kZURlbGltaXRlZD1mdW5jdGlvbihlKXt2YXIgdCxyPSExO3JldHVybiBlfHwoZT1uZXcgbixyPSEwKSx0PShuZXcgbikuTEUoKSxpLmVuY29kZSh0aGlzLHQpLmZsaXAoKSxlLndyaXRlVmFyaW50MzIodC5yZW1haW5pbmcoKSksZS5hcHBlbmQodCkscj9lLmZsaXAoKTplfSxoLmVuY29kZUFCPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiB0aGlzLmVuY29kZSgpLnRvQXJyYXlCdWZmZXIoKX1jYXRjaChlKXt0aHJvdyBlLmVuY29kZWQmJihlLmVuY29kZWQ9ZS5lbmNvZGVkLnRvQXJyYXlCdWZmZXIoKSksZX19LGgudG9BcnJheUJ1ZmZlcj1oLmVuY29kZUFCLGguZW5jb2RlTkI9ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIHRoaXMuZW5jb2RlKCkudG9CdWZmZXIoKX1jYXRjaChlKXt0aHJvdyBlLmVuY29kZWQmJihlLmVuY29kZWQ9ZS5lbmNvZGVkLnRvQnVmZmVyKCkpLGV9fSxoLnRvQnVmZmVyPWguZW5jb2RlTkIsaC5lbmNvZGU2ND1mdW5jdGlvbigpe3RyeXtyZXR1cm4gdGhpcy5lbmNvZGUoKS50b0Jhc2U2NCgpfWNhdGNoKGUpe3Rocm93IGUuZW5jb2RlZCYmKGUuZW5jb2RlZD1lLmVuY29kZWQudG9CYXNlNjQoKSksZX19LGgudG9CYXNlNjQ9aC5lbmNvZGU2NCxoLmVuY29kZUhleD1mdW5jdGlvbigpe3RyeXtyZXR1cm4gdGhpcy5lbmNvZGUoKS50b0hleCgpfWNhdGNoKGUpe3Rocm93IGUuZW5jb2RlZCYmKGUuZW5jb2RlZD1lLmVuY29kZWQudG9IZXgoKSksZX19LGgudG9IZXg9aC5lbmNvZGVIZXgsaC50b1Jhdz1mdW5jdGlvbihlLHQpe3JldHVybiByKHRoaXMsISFlLCEhdCx0aGlzLiR0eXBlKX0saC5lbmNvZGVKU09OPWZ1bmN0aW9uKCl7cmV0dXJuIEpTT04uc3RyaW5naWZ5KHIodGhpcywhMCwhMCx0aGlzLiR0eXBlKSl9LGMuZGVjb2RlPWZ1bmN0aW9uKGUsdCl7dmFyIHIscztcInN0cmluZ1wiPT10eXBlb2YgZSYmKGU9bi53cmFwKGUsdHx8XCJiYXNlNjRcIikpLHI9KGU9bi5pc0J5dGVCdWZmZXIoZSk/ZTpuLndyYXAoZSkpLmxpdHRsZUVuZGlhbjt0cnl7cmV0dXJuIHM9aS5kZWNvZGUoZS5MRSgpKSxlLkxFKHIpLHN9Y2F0Y2godCl7dGhyb3cgZS5MRShyKSx0fX0sYy5kZWNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSx0KXt2YXIgcixzLG87aWYoXCJzdHJpbmdcIj09dHlwZW9mIGUmJihlPW4ud3JhcChlLHR8fFwiYmFzZTY0XCIpKSwoZT1uLmlzQnl0ZUJ1ZmZlcihlKT9lOm4ud3JhcChlKSkucmVtYWluaW5nKCk8MSlyZXR1cm4gbnVsbDtpZihyPWUub2Zmc2V0LHM9ZS5yZWFkVmFyaW50MzIoKSxlLnJlbWFpbmluZygpPHMpcmV0dXJuIGUub2Zmc2V0PXIsbnVsbDt0cnl7cmV0dXJuIG89aS5kZWNvZGUoZS5zbGljZShlLm9mZnNldCxlLm9mZnNldCtzKS5MRSgpKSxlLm9mZnNldCs9cyxvfWNhdGNoKHQpe3Rocm93IGUub2Zmc2V0Kz1zLHR9fSxjLmRlY29kZTY0PWZ1bmN0aW9uKGUpe3JldHVybiBjLmRlY29kZShlLFwiYmFzZTY0XCIpfSxjLmRlY29kZUhleD1mdW5jdGlvbihlKXtyZXR1cm4gYy5kZWNvZGUoZSxcImhleFwiKX0sYy5kZWNvZGVKU09OPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgYyhKU09OLnBhcnNlKGUpKX0saC50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiBpLnRvU3RyaW5nKCl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSYmKE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjLFwiJG9wdGlvbnNcIix7dmFsdWU6aS5idWlsZE9wdCgpfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGgsXCIkb3B0aW9uc1wiLHt2YWx1ZTpjLiRvcHRpb25zfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGMsXCIkdHlwZVwiLHt2YWx1ZTppfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGgsXCIkdHlwZVwiLHt2YWx1ZTppfSkpLGN9KHQsdGhpcyksdGhpcy5fZmllbGRzPVtdLHRoaXMuX2ZpZWxkc0J5SWQ9e30sdGhpcy5fZmllbGRzQnlOYW1lPXt9LG89MCxhPXRoaXMuY2hpbGRyZW4ubGVuZ3RoO2E+bztvKyspaWYoKHM9dGhpcy5jaGlsZHJlbltvXSlpbnN0YW5jZW9mIGd8fHMgaW5zdGFuY2VvZiBjfHxzIGluc3RhbmNlb2YgbSl7aWYoci5oYXNPd25Qcm9wZXJ0eShzLm5hbWUpKXRocm93IEVycm9yKFwiSWxsZWdhbCByZWZsZWN0IGNoaWxkIG9mIFwiK3RoaXMudG9TdHJpbmcoITApK1wiOiBcIitzLnRvU3RyaW5nKCEwKStcIiBjYW5ub3Qgb3ZlcnJpZGUgc3RhdGljIHByb3BlcnR5ICdcIitzLm5hbWUrXCInXCIpO3Jbcy5uYW1lXT1zLmJ1aWxkKCl9ZWxzZSBpZihzIGluc3RhbmNlb2YgYy5GaWVsZClzLmJ1aWxkKCksdGhpcy5fZmllbGRzLnB1c2gocyksdGhpcy5fZmllbGRzQnlJZFtzLmlkXT1zLHRoaXMuX2ZpZWxkc0J5TmFtZVtzLm5hbWVdPXM7ZWxzZSBpZighKHMgaW5zdGFuY2VvZiBjLk9uZU9mfHxzIGluc3RhbmNlb2YgeSkpdGhyb3cgRXJyb3IoXCJJbGxlZ2FsIHJlZmxlY3QgY2hpbGQgb2YgXCIrdGhpcy50b1N0cmluZyghMCkrXCI6IFwiK3RoaXMuY2hpbGRyZW5bb10udG9TdHJpbmcoITApKTtyZXR1cm4gdGhpcy5jbGF6ej1yfSxoLmVuY29kZT1mdW5jdGlvbihlLHQsbil7dmFyIGkscixzLG8sYSx1PW51bGw7Zm9yKHM9MCxvPXRoaXMuX2ZpZWxkcy5sZW5ndGg7bz5zOysrcylyPWVbKGk9dGhpcy5fZmllbGRzW3NdKS5uYW1lXSxpLnJlcXVpcmVkJiZudWxsPT09cj9udWxsPT09dSYmKHU9aSk6aS5lbmNvZGUobj9yOmkudmVyaWZ5VmFsdWUociksdCxlKTtpZihudWxsIT09dSl0aHJvdyhhPUVycm9yKFwiTWlzc2luZyBhdCBsZWFzdCBvbmUgcmVxdWlyZWQgZmllbGQgZm9yIFwiK3RoaXMudG9TdHJpbmcoITApK1wiOiBcIit1KSkuZW5jb2RlZD10LGE7cmV0dXJuIHR9LGguY2FsY3VsYXRlPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuLGk9MCxyPTAscz10aGlzLl9maWVsZHMubGVuZ3RoO3M+cjsrK3Ipe2lmKG49ZVsodD10aGlzLl9maWVsZHNbcl0pLm5hbWVdLHQucmVxdWlyZWQmJm51bGw9PT1uKXRocm93IEVycm9yKFwiTWlzc2luZyBhdCBsZWFzdCBvbmUgcmVxdWlyZWQgZmllbGQgZm9yIFwiK3RoaXMudG9TdHJpbmcoITApK1wiOiBcIit0KTtpKz10LmNhbGN1bGF0ZShuLGUpfXJldHVybiBpfSxoLmRlY29kZT1mdW5jdGlvbihlLG4saSl7dmFyIHMsbyxhLHUsYyxoLGwsZCxmLHAsZyxfO2ZvcihuPVwibnVtYmVyXCI9PXR5cGVvZiBuP246LTEsYz1lLm9mZnNldCxoPW5ldyB0aGlzLmNsYXp6O2Uub2Zmc2V0PGMrbnx8LTE9PT1uJiZlLnJlbWFpbmluZygpPjA7KXtpZihhPShzPWUucmVhZFZhcmludDMyKCkpPj4+Mywobz03JnMpPT09dC5XSVJFX1RZUEVTLkVOREdST1VQKXtpZihhIT09aSl0aHJvdyBFcnJvcihcIklsbGVnYWwgZ3JvdXAgZW5kIGluZGljYXRvciBmb3IgXCIrdGhpcy50b1N0cmluZyghMCkrXCI6IFwiK2ErXCIgKFwiKyhpP2krXCIgZXhwZWN0ZWRcIjpcIm5vdCBhIGdyb3VwXCIpK1wiKVwiKTticmVha31pZih1PXRoaXMuX2ZpZWxkc0J5SWRbYV0pdS5yZXBlYXRlZCYmIXUub3B0aW9ucy5wYWNrZWQ/aFt1Lm5hbWVdLnB1c2godS5kZWNvZGUobyxlKSk6dS5tYXA/KGQ9dS5kZWNvZGUobyxlKSxoW3UubmFtZV0uc2V0KGRbMF0sZFsxXSkpOihoW3UubmFtZV09dS5kZWNvZGUobyxlKSx1Lm9uZW9mJiYobnVsbCE9PShmPWhbdS5vbmVvZi5uYW1lXSkmJmYhPT11Lm5hbWUmJihoW2ZdPW51bGwpLGhbdS5vbmVvZi5uYW1lXT11Lm5hbWUpKTtlbHNlIHN3aXRjaChvKXtjYXNlIHQuV0lSRV9UWVBFUy5WQVJJTlQ6ZS5yZWFkVmFyaW50MzIoKTticmVhaztjYXNlIHQuV0lSRV9UWVBFUy5CSVRTMzI6ZS5vZmZzZXQrPTQ7YnJlYWs7Y2FzZSB0LldJUkVfVFlQRVMuQklUUzY0OmUub2Zmc2V0Kz04O2JyZWFrO2Nhc2UgdC5XSVJFX1RZUEVTLkxERUxJTTpsPWUucmVhZFZhcmludDMyKCksZS5vZmZzZXQrPWw7YnJlYWs7Y2FzZSB0LldJUkVfVFlQRVMuU1RBUlRHUk9VUDpmb3IoO3IoYSxlKTspO2JyZWFrO2RlZmF1bHQ6dGhyb3cgRXJyb3IoXCJJbGxlZ2FsIHdpcmUgdHlwZSBmb3IgdW5rbm93biBmaWVsZCBcIithK1wiIGluIFwiK3RoaXMudG9TdHJpbmcoITApK1wiI2RlY29kZTogXCIrbyl9fWZvcihwPTAsZz10aGlzLl9maWVsZHMubGVuZ3RoO2c+cDsrK3ApaWYobnVsbD09PWhbKHU9dGhpcy5fZmllbGRzW3BdKS5uYW1lXSlpZihcInByb3RvM1wiPT09dGhpcy5zeW50YXgpaFt1Lm5hbWVdPXUuZGVmYXVsdFZhbHVlO2Vsc2V7aWYodS5yZXF1aXJlZCl0aHJvdyhfPUVycm9yKFwiTWlzc2luZyBhdCBsZWFzdCBvbmUgcmVxdWlyZWQgZmllbGQgZm9yIFwiK3RoaXMudG9TdHJpbmcoITApK1wiOiBcIit1Lm5hbWUpKS5kZWNvZGVkPWgsXzt0LnBvcHVsYXRlRGVmYXVsdHMmJm51bGwhPT11LmRlZmF1bHRWYWx1ZSYmKGhbdS5uYW1lXT11LmRlZmF1bHRWYWx1ZSl9cmV0dXJuIGh9LFQuTWVzc2FnZT1jLChkPShsPWZ1bmN0aW9uKGUsbixpLHIscyxvLGEsdSxoLGwpe0kuY2FsbCh0aGlzLGUsbixvKSx0aGlzLmNsYXNzTmFtZT1cIk1lc3NhZ2UuRmllbGRcIix0aGlzLnJlcXVpcmVkPVwicmVxdWlyZWRcIj09PWksdGhpcy5yZXBlYXRlZD1cInJlcGVhdGVkXCI9PT1pLHRoaXMubWFwPVwibWFwXCI9PT1pLHRoaXMua2V5VHlwZT1yfHxudWxsLHRoaXMudHlwZT1zLHRoaXMucmVzb2x2ZWRUeXBlPW51bGwsdGhpcy5pZD1hLHRoaXMub3B0aW9ucz11fHx7fSx0aGlzLmRlZmF1bHRWYWx1ZT1udWxsLHRoaXMub25lb2Y9aHx8bnVsbCx0aGlzLnN5bnRheD1sfHxcInByb3RvMlwiLHRoaXMub3JpZ2luYWxOYW1lPXRoaXMubmFtZSx0aGlzLmVsZW1lbnQ9bnVsbCx0aGlzLmtleUVsZW1lbnQ9bnVsbCwhdGhpcy5idWlsZGVyLm9wdGlvbnMuY29udmVydEZpZWxkc1RvQ2FtZWxDYXNlfHx0aGlzIGluc3RhbmNlb2YgYy5FeHRlbnNpb25GaWVsZHx8KHRoaXMubmFtZT10LlV0aWwudG9DYW1lbENhc2UodGhpcy5uYW1lKSl9KS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShJLnByb3RvdHlwZSkpLmJ1aWxkPWZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50PW5ldyBhKHRoaXMudHlwZSx0aGlzLnJlc29sdmVkVHlwZSwhMSx0aGlzLnN5bnRheCksdGhpcy5tYXAmJih0aGlzLmtleUVsZW1lbnQ9bmV3IGEodGhpcy5rZXlUeXBlLHZvaWQgMCwhMCx0aGlzLnN5bnRheCkpLFwicHJvdG8zXCIhPT10aGlzLnN5bnRheHx8dGhpcy5yZXBlYXRlZHx8dGhpcy5tYXA/dm9pZCAwIT09dGhpcy5vcHRpb25zLmRlZmF1bHQmJih0aGlzLmRlZmF1bHRWYWx1ZT10aGlzLnZlcmlmeVZhbHVlKHRoaXMub3B0aW9ucy5kZWZhdWx0KSk6dGhpcy5kZWZhdWx0VmFsdWU9YS5kZWZhdWx0RmllbGRWYWx1ZSh0aGlzLnR5cGUpfSxkLnZlcmlmeVZhbHVlPWZ1bmN0aW9uKGUsbil7dmFyIGkscixzO2lmKG49bnx8ITEsaT1mdW5jdGlvbihlLHQpe3Rocm93IEVycm9yKFwiSWxsZWdhbCB2YWx1ZSBmb3IgXCIrdGhpcy50b1N0cmluZyghMCkrXCIgb2YgdHlwZSBcIit0aGlzLnR5cGUubmFtZStcIjogXCIrZStcIiAoXCIrdCtcIilcIil9LmJpbmQodGhpcyksbnVsbD09PWUpcmV0dXJuIHRoaXMucmVxdWlyZWQmJmkodHlwZW9mIGUsXCJyZXF1aXJlZFwiKSxcInByb3RvM1wiPT09dGhpcy5zeW50YXgmJnRoaXMudHlwZSE9PXQuVFlQRVMubWVzc2FnZSYmaSh0eXBlb2YgZSxcInByb3RvMyBmaWVsZCB3aXRob3V0IGZpZWxkIHByZXNlbmNlIGNhbm5vdCBiZSBudWxsXCIpLG51bGw7aWYodGhpcy5yZXBlYXRlZCYmIW4pe2ZvcihBcnJheS5pc0FycmF5KGUpfHwoZT1bZV0pLHM9W10scj0wO3I8ZS5sZW5ndGg7cisrKXMucHVzaCh0aGlzLmVsZW1lbnQudmVyaWZ5VmFsdWUoZVtyXSkpO3JldHVybiBzfXJldHVybiB0aGlzLm1hcCYmIW4/ZSBpbnN0YW5jZW9mIHQuTWFwP2U6KGUgaW5zdGFuY2VvZiBPYmplY3R8fGkodHlwZW9mIGUsXCJleHBlY3RlZCBQcm90b0J1Zi5NYXAgb3IgcmF3IG9iamVjdCBmb3IgbWFwIGZpZWxkXCIpLG5ldyB0Lk1hcCh0aGlzLGUpKTooIXRoaXMucmVwZWF0ZWQmJkFycmF5LmlzQXJyYXkoZSkmJmkodHlwZW9mIGUsXCJubyBhcnJheSBleHBlY3RlZFwiKSx0aGlzLmVsZW1lbnQudmVyaWZ5VmFsdWUoZSkpfSxkLmhhc1dpcmVQcmVzZW5jZT1mdW5jdGlvbihlLG4pe2lmKFwicHJvdG8zXCIhPT10aGlzLnN5bnRheClyZXR1cm4gbnVsbCE9PWU7aWYodGhpcy5vbmVvZiYmblt0aGlzLm9uZW9mLm5hbWVdPT09dGhpcy5uYW1lKXJldHVybiEwO3N3aXRjaCh0aGlzLnR5cGUpe2Nhc2UgdC5UWVBFUy5pbnQzMjpjYXNlIHQuVFlQRVMuc2ludDMyOmNhc2UgdC5UWVBFUy5zZml4ZWQzMjpjYXNlIHQuVFlQRVMudWludDMyOmNhc2UgdC5UWVBFUy5maXhlZDMyOnJldHVybiAwIT09ZTtjYXNlIHQuVFlQRVMuaW50NjQ6Y2FzZSB0LlRZUEVTLnNpbnQ2NDpjYXNlIHQuVFlQRVMuc2ZpeGVkNjQ6Y2FzZSB0LlRZUEVTLnVpbnQ2NDpjYXNlIHQuVFlQRVMuZml4ZWQ2NDpyZXR1cm4gMCE9PWUubG93fHwwIT09ZS5oaWdoO2Nhc2UgdC5UWVBFUy5ib29sOnJldHVybiBlO2Nhc2UgdC5UWVBFUy5mbG9hdDpjYXNlIHQuVFlQRVMuZG91YmxlOnJldHVybiAwIT09ZTtjYXNlIHQuVFlQRVMuc3RyaW5nOnJldHVybiBlLmxlbmd0aD4wO2Nhc2UgdC5UWVBFUy5ieXRlczpyZXR1cm4gZS5yZW1haW5pbmcoKT4wO2Nhc2UgdC5UWVBFUy5lbnVtOnJldHVybiAwIT09ZTtjYXNlIHQuVFlQRVMubWVzc2FnZTpyZXR1cm4gbnVsbCE9PWU7ZGVmYXVsdDpyZXR1cm4hMH19LGQuZW5jb2RlPWZ1bmN0aW9uKGUsaSxyKXt2YXIgcyxvLGEsdSxjO2lmKG51bGw9PT10aGlzLnR5cGV8fFwib2JqZWN0XCIhPXR5cGVvZiB0aGlzLnR5cGUpdGhyb3cgRXJyb3IoXCJbSU5URVJOQUxdIFVucmVzb2x2ZWQgdHlwZSBpbiBcIit0aGlzLnRvU3RyaW5nKCEwKStcIjogXCIrdGhpcy50eXBlKTtpZihudWxsPT09ZXx8dGhpcy5yZXBlYXRlZCYmMD09ZS5sZW5ndGgpcmV0dXJuIGk7dHJ5e2lmKHRoaXMucmVwZWF0ZWQpaWYodGhpcy5vcHRpb25zLnBhY2tlZCYmdC5QQUNLQUJMRV9XSVJFX1RZUEVTLmluZGV4T2YodGhpcy50eXBlLndpcmVUeXBlKT49MCl7Zm9yKGkud3JpdGVWYXJpbnQzMih0aGlzLmlkPDwzfHQuV0lSRV9UWVBFUy5MREVMSU0pLGkuZW5zdXJlQ2FwYWNpdHkoaS5vZmZzZXQrPTEpLG89aS5vZmZzZXQscz0wO3M8ZS5sZW5ndGg7cysrKXRoaXMuZWxlbWVudC5lbmNvZGVWYWx1ZSh0aGlzLmlkLGVbc10saSk7YT1pLm9mZnNldC1vLCh1PW4uY2FsY3VsYXRlVmFyaW50MzIoYSkpPjEmJihjPWkuc2xpY2UobyxpLm9mZnNldCksbys9dS0xLGkub2Zmc2V0PW8saS5hcHBlbmQoYykpLGkud3JpdGVWYXJpbnQzMihhLG8tdSl9ZWxzZSBmb3Iocz0wO3M8ZS5sZW5ndGg7cysrKWkud3JpdGVWYXJpbnQzMih0aGlzLmlkPDwzfHRoaXMudHlwZS53aXJlVHlwZSksdGhpcy5lbGVtZW50LmVuY29kZVZhbHVlKHRoaXMuaWQsZVtzXSxpKTtlbHNlIHRoaXMubWFwP2UuZm9yRWFjaCgoZnVuY3Rpb24oZSxyKXt2YXIgcz1uLmNhbGN1bGF0ZVZhcmludDMyKDh8dGhpcy5rZXlUeXBlLndpcmVUeXBlKSt0aGlzLmtleUVsZW1lbnQuY2FsY3VsYXRlTGVuZ3RoKDEscikrbi5jYWxjdWxhdGVWYXJpbnQzMigxNnx0aGlzLnR5cGUud2lyZVR5cGUpK3RoaXMuZWxlbWVudC5jYWxjdWxhdGVMZW5ndGgoMixlKTtpLndyaXRlVmFyaW50MzIodGhpcy5pZDw8M3x0LldJUkVfVFlQRVMuTERFTElNKSxpLndyaXRlVmFyaW50MzIocyksaS53cml0ZVZhcmludDMyKDh8dGhpcy5rZXlUeXBlLndpcmVUeXBlKSx0aGlzLmtleUVsZW1lbnQuZW5jb2RlVmFsdWUoMSxyLGkpLGkud3JpdGVWYXJpbnQzMigxNnx0aGlzLnR5cGUud2lyZVR5cGUpLHRoaXMuZWxlbWVudC5lbmNvZGVWYWx1ZSgyLGUsaSl9KSx0aGlzKTp0aGlzLmhhc1dpcmVQcmVzZW5jZShlLHIpJiYoaS53cml0ZVZhcmludDMyKHRoaXMuaWQ8PDN8dGhpcy50eXBlLndpcmVUeXBlKSx0aGlzLmVsZW1lbnQuZW5jb2RlVmFsdWUodGhpcy5pZCxlLGkpKX1jYXRjaCh0KXt0aHJvdyBFcnJvcihcIklsbGVnYWwgdmFsdWUgZm9yIFwiK3RoaXMudG9TdHJpbmcoITApK1wiOiBcIitlK1wiIChcIit0K1wiKVwiKX1yZXR1cm4gaX0sZC5jYWxjdWxhdGU9ZnVuY3Rpb24oZSxpKXt2YXIgcixzLG87aWYoZT10aGlzLnZlcmlmeVZhbHVlKGUpLG51bGw9PT10aGlzLnR5cGV8fFwib2JqZWN0XCIhPXR5cGVvZiB0aGlzLnR5cGUpdGhyb3cgRXJyb3IoXCJbSU5URVJOQUxdIFVucmVzb2x2ZWQgdHlwZSBpbiBcIit0aGlzLnRvU3RyaW5nKCEwKStcIjogXCIrdGhpcy50eXBlKTtpZihudWxsPT09ZXx8dGhpcy5yZXBlYXRlZCYmMD09ZS5sZW5ndGgpcmV0dXJuIDA7cj0wO3RyeXtpZih0aGlzLnJlcGVhdGVkKWlmKHRoaXMub3B0aW9ucy5wYWNrZWQmJnQuUEFDS0FCTEVfV0lSRV9UWVBFUy5pbmRleE9mKHRoaXMudHlwZS53aXJlVHlwZSk+PTApe2ZvcihyKz1uLmNhbGN1bGF0ZVZhcmludDMyKHRoaXMuaWQ8PDN8dC5XSVJFX1RZUEVTLkxERUxJTSksbz0wLHM9MDtzPGUubGVuZ3RoO3MrKylvKz10aGlzLmVsZW1lbnQuY2FsY3VsYXRlTGVuZ3RoKHRoaXMuaWQsZVtzXSk7cis9bi5jYWxjdWxhdGVWYXJpbnQzMihvKSxyKz1vfWVsc2UgZm9yKHM9MDtzPGUubGVuZ3RoO3MrKylyKz1uLmNhbGN1bGF0ZVZhcmludDMyKHRoaXMuaWQ8PDN8dGhpcy50eXBlLndpcmVUeXBlKSxyKz10aGlzLmVsZW1lbnQuY2FsY3VsYXRlTGVuZ3RoKHRoaXMuaWQsZVtzXSk7ZWxzZSB0aGlzLm1hcD9lLmZvckVhY2goKGZ1bmN0aW9uKGUsaSl7dmFyIHM9bi5jYWxjdWxhdGVWYXJpbnQzMig4fHRoaXMua2V5VHlwZS53aXJlVHlwZSkrdGhpcy5rZXlFbGVtZW50LmNhbGN1bGF0ZUxlbmd0aCgxLGkpK24uY2FsY3VsYXRlVmFyaW50MzIoMTZ8dGhpcy50eXBlLndpcmVUeXBlKSt0aGlzLmVsZW1lbnQuY2FsY3VsYXRlTGVuZ3RoKDIsZSk7cis9bi5jYWxjdWxhdGVWYXJpbnQzMih0aGlzLmlkPDwzfHQuV0lSRV9UWVBFUy5MREVMSU0pLHIrPW4uY2FsY3VsYXRlVmFyaW50MzIocykscis9c30pLHRoaXMpOnRoaXMuaGFzV2lyZVByZXNlbmNlKGUsaSkmJihyKz1uLmNhbGN1bGF0ZVZhcmludDMyKHRoaXMuaWQ8PDN8dGhpcy50eXBlLndpcmVUeXBlKSxyKz10aGlzLmVsZW1lbnQuY2FsY3VsYXRlTGVuZ3RoKHRoaXMuaWQsZSkpfWNhdGNoKHQpe3Rocm93IEVycm9yKFwiSWxsZWdhbCB2YWx1ZSBmb3IgXCIrdGhpcy50b1N0cmluZyghMCkrXCI6IFwiK2UrXCIgKFwiK3QrXCIpXCIpfXJldHVybiByfSxkLmRlY29kZT1mdW5jdGlvbihlLG4saSl7dmFyIHIscyxvLHUsYyxoLGw7aWYoISghdGhpcy5tYXAmJmU9PXRoaXMudHlwZS53aXJlVHlwZXx8IWkmJnRoaXMucmVwZWF0ZWQmJnRoaXMub3B0aW9ucy5wYWNrZWQmJmU9PXQuV0lSRV9UWVBFUy5MREVMSU18fHRoaXMubWFwJiZlPT10LldJUkVfVFlQRVMuTERFTElNKSl0aHJvdyBFcnJvcihcIklsbGVnYWwgd2lyZSB0eXBlIGZvciBmaWVsZCBcIit0aGlzLnRvU3RyaW5nKCEwKStcIjogXCIrZStcIiAoXCIrdGhpcy50eXBlLndpcmVUeXBlK1wiIGV4cGVjdGVkKVwiKTtpZihlPT10LldJUkVfVFlQRVMuTERFTElNJiZ0aGlzLnJlcGVhdGVkJiZ0aGlzLm9wdGlvbnMucGFja2VkJiZ0LlBBQ0tBQkxFX1dJUkVfVFlQRVMuaW5kZXhPZih0aGlzLnR5cGUud2lyZVR5cGUpPj0wJiYhaSl7Zm9yKHM9bi5yZWFkVmFyaW50MzIoKSxzPW4ub2Zmc2V0K3Msbz1bXTtuLm9mZnNldDxzOylvLnB1c2godGhpcy5kZWNvZGUodGhpcy50eXBlLndpcmVUeXBlLG4sITApKTtyZXR1cm4gb31pZih0aGlzLm1hcCl7aWYodT1hLmRlZmF1bHRGaWVsZFZhbHVlKHRoaXMua2V5VHlwZSkscj1hLmRlZmF1bHRGaWVsZFZhbHVlKHRoaXMudHlwZSkscz1uLnJlYWRWYXJpbnQzMigpLG4ucmVtYWluaW5nKCk8cyl0aHJvdyBFcnJvcihcIklsbGVnYWwgbnVtYmVyIG9mIGJ5dGVzIGZvciBcIit0aGlzLnRvU3RyaW5nKCEwKStcIjogXCIrcytcIiByZXF1aXJlZCBidXQgZ290IG9ubHkgXCIrbi5yZW1haW5pbmcoKSk7Zm9yKChjPW4uY2xvbmUoKSkubGltaXQ9Yy5vZmZzZXQrcyxuLm9mZnNldCs9cztjLnJlbWFpbmluZygpPjA7KWlmKGU9NyYoaD1jLnJlYWRWYXJpbnQzMigpKSwxPT0obD1oPj4+MykpdT10aGlzLmtleUVsZW1lbnQuZGVjb2RlKGMsZSxsKTtlbHNle2lmKDIhPT1sKXRocm93IEVycm9yKFwiVW5leHBlY3RlZCB0YWcgaW4gbWFwIGZpZWxkIGtleS92YWx1ZSBzdWJtZXNzYWdlXCIpO3I9dGhpcy5lbGVtZW50LmRlY29kZShjLGUsbCl9cmV0dXJuW3Uscl19cmV0dXJuIHRoaXMuZWxlbWVudC5kZWNvZGUobixlLHRoaXMuaWQpfSxULk1lc3NhZ2UuRmllbGQ9bCwoZj1mdW5jdGlvbihlLHQsbixpLHIscyxvKXtsLmNhbGwodGhpcyxlLHQsbixudWxsLGkscixzLG8pLHRoaXMuZXh0ZW5zaW9ufSkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobC5wcm90b3R5cGUpLFQuTWVzc2FnZS5FeHRlbnNpb25GaWVsZD1mLHA9ZnVuY3Rpb24oZSx0LG4pe0kuY2FsbCh0aGlzLGUsdCxuKSx0aGlzLmZpZWxkcz1bXX0sVC5NZXNzYWdlLk9uZU9mPXAsKGc9ZnVuY3Rpb24oZSx0LG4saSxyKXtzLmNhbGwodGhpcyxlLHQsbixpLHIpLHRoaXMuY2xhc3NOYW1lPVwiRW51bVwiLHRoaXMub2JqZWN0PW51bGx9KS5nZXROYW1lPWZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyPU9iamVjdC5rZXlzKGUpO2ZvcihpPTA7aTxyLmxlbmd0aDsrK2kpaWYoZVtuPXJbaV1dPT09dClyZXR1cm4gbjtyZXR1cm4gbnVsbH0sKGcucHJvdG90eXBlPU9iamVjdC5jcmVhdGUocy5wcm90b3R5cGUpKS5idWlsZD1mdW5jdGlvbihlKXt2YXIgbixpLHIscztpZih0aGlzLm9iamVjdCYmIWUpcmV0dXJuIHRoaXMub2JqZWN0O2ZvcihuPW5ldyB0LkJ1aWxkZXIuRW51bSxyPTAscz0oaT10aGlzLmdldENoaWxkcmVuKGcuVmFsdWUpKS5sZW5ndGg7cz5yOysrciluW2lbcl0ubmFtZV09aVtyXS5pZDtyZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5JiZPYmplY3QuZGVmaW5lUHJvcGVydHkobixcIiRvcHRpb25zXCIse3ZhbHVlOnRoaXMuYnVpbGRPcHQoKSxlbnVtZXJhYmxlOiExfSksdGhpcy5vYmplY3Q9bn0sVC5FbnVtPWcsKF89ZnVuY3Rpb24oZSx0LG4saSl7SS5jYWxsKHRoaXMsZSx0LG4pLHRoaXMuY2xhc3NOYW1lPVwiRW51bS5WYWx1ZVwiLHRoaXMuaWQ9aX0pLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKEkucHJvdG90eXBlKSxULkVudW0uVmFsdWU9XywoeT1mdW5jdGlvbihlLHQsbixpKXtJLmNhbGwodGhpcyxlLHQsbiksdGhpcy5maWVsZD1pfSkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoSS5wcm90b3R5cGUpLFQuRXh0ZW5zaW9uPXksKChtPWZ1bmN0aW9uKGUsdCxuLGkpe3MuY2FsbCh0aGlzLGUsdCxuLGkpLHRoaXMuY2xhc3NOYW1lPVwiU2VydmljZVwiLHRoaXMuY2xheno9bnVsbH0pLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHMucHJvdG90eXBlKSkuYnVpbGQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuY2xhenomJiFlP3RoaXMuY2xheno6dGhpcy5jbGF6ej1mdW5jdGlvbihlLHQpe3ZhciBpLHI9ZnVuY3Rpb24odCl7ZS5CdWlsZGVyLlNlcnZpY2UuY2FsbCh0aGlzKSx0aGlzLnJwY0ltcGw9dHx8ZnVuY3Rpb24oZSx0LG4pe3NldFRpbWVvdXQobi5iaW5kKHRoaXMsRXJyb3IoXCJOb3QgaW1wbGVtZW50ZWQsIHNlZTogaHR0cHM6Ly9naXRodWIuY29tL2Rjb2RlSU8vUHJvdG9CdWYuanMvd2lraS9TZXJ2aWNlc1wiKSksMCl9fSxzPXIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZS5CdWlsZGVyLlNlcnZpY2UucHJvdG90eXBlKSxvPXQuZ2V0Q2hpbGRyZW4oZS5SZWZsZWN0LlNlcnZpY2UuUlBDTWV0aG9kKTtmb3IoaT0wO2k8by5sZW5ndGg7aSsrKSFmdW5jdGlvbihlKXtzW2UubmFtZV09ZnVuY3Rpb24oaSxyKXt0cnl7dHJ5e2k9ZS5yZXNvbHZlZFJlcXVlc3RUeXBlLmNsYXp6LmRlY29kZShuLndyYXAoaSkpfWNhdGNoKGUpe2lmKCEoZSBpbnN0YW5jZW9mIFR5cGVFcnJvcikpdGhyb3cgZX1pZihudWxsPT09aXx8XCJvYmplY3RcIiE9dHlwZW9mIGkpdGhyb3cgRXJyb3IoXCJJbGxlZ2FsIGFyZ3VtZW50c1wiKTtpIGluc3RhbmNlb2YgZS5yZXNvbHZlZFJlcXVlc3RUeXBlLmNsYXp6fHwoaT1uZXcgZS5yZXNvbHZlZFJlcXVlc3RUeXBlLmNsYXp6KGkpKSx0aGlzLnJwY0ltcGwoZS5mcW4oKSxpLChmdW5jdGlvbihuLGkpe2lmKCFuKXt0cnl7aT1lLnJlc29sdmVkUmVzcG9uc2VUeXBlLmNsYXp6LmRlY29kZShpKX1jYXRjaChlKXt9cmV0dXJuIGkmJmkgaW5zdGFuY2VvZiBlLnJlc29sdmVkUmVzcG9uc2VUeXBlLmNsYXp6P3ZvaWQgcihudWxsLGkpOnZvaWQgcihFcnJvcihcIklsbGVnYWwgcmVzcG9uc2UgdHlwZSByZWNlaXZlZCBpbiBzZXJ2aWNlIG1ldGhvZCBcIit0Lm5hbWUrXCIjXCIrZS5uYW1lKSl9cihuKX0pKX1jYXRjaChlKXtzZXRUaW1lb3V0KHIuYmluZCh0aGlzLGUpLDApfX0scltlLm5hbWVdPWZ1bmN0aW9uKHQsbixpKXtuZXcgcih0KVtlLm5hbWVdKG4saSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSYmKE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyW2UubmFtZV0sXCIkb3B0aW9uc1wiLHt2YWx1ZTplLmJ1aWxkT3B0KCl9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoc1tlLm5hbWVdLFwiJG9wdGlvbnNcIix7dmFsdWU6cltlLm5hbWVdLiRvcHRpb25zfSkpfShvW2ldKTtyZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5JiYoT2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCIkb3B0aW9uc1wiLHt2YWx1ZTp0LmJ1aWxkT3B0KCl9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocyxcIiRvcHRpb25zXCIse3ZhbHVlOnIuJG9wdGlvbnN9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIiR0eXBlXCIse3ZhbHVlOnR9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocyxcIiR0eXBlXCIse3ZhbHVlOnR9KSkscn0odCx0aGlzKX0sVC5TZXJ2aWNlPW0sKCh2PWZ1bmN0aW9uKGUsdCxuLGkpe0kuY2FsbCh0aGlzLGUsdCxuKSx0aGlzLmNsYXNzTmFtZT1cIlNlcnZpY2UuTWV0aG9kXCIsdGhpcy5vcHRpb25zPWl8fHt9fSkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoSS5wcm90b3R5cGUpKS5idWlsZE9wdD1vLmJ1aWxkT3B0LFQuU2VydmljZS5NZXRob2Q9diwoRT1mdW5jdGlvbihlLHQsbixpLHIscyxvLGEpe3YuY2FsbCh0aGlzLGUsdCxuLGEpLHRoaXMuY2xhc3NOYW1lPVwiU2VydmljZS5SUENNZXRob2RcIix0aGlzLnJlcXVlc3ROYW1lPWksdGhpcy5yZXNwb25zZU5hbWU9cix0aGlzLnJlcXVlc3RTdHJlYW09cyx0aGlzLnJlc3BvbnNlU3RyZWFtPW8sdGhpcy5yZXNvbHZlZFJlcXVlc3RUeXBlPW51bGwsdGhpcy5yZXNvbHZlZFJlc3BvbnNlVHlwZT1udWxsfSkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodi5wcm90b3R5cGUpLFQuU2VydmljZS5SUENNZXRob2Q9RSxUfShyKSxyLkJ1aWxkZXI9ZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIGkoZSl7ZS5tZXNzYWdlcyYmZS5tZXNzYWdlcy5mb3JFYWNoKChmdW5jdGlvbih0KXt0LnN5bnRheD1lLnN5bnRheCxpKHQpfSkpLGUuZW51bXMmJmUuZW51bXMuZm9yRWFjaCgoZnVuY3Rpb24odCl7dC5zeW50YXg9ZS5zeW50YXh9KSl9dmFyIHI9ZnVuY3Rpb24oZSl7dGhpcy5ucz1uZXcgbi5OYW1lc3BhY2UodGhpcyxudWxsLFwiXCIpLHRoaXMucHRyPXRoaXMubnMsdGhpcy5yZXNvbHZlZD0hMSx0aGlzLnJlc3VsdD1udWxsLHRoaXMuZmlsZXM9e30sdGhpcy5pbXBvcnRSb290PW51bGwsdGhpcy5vcHRpb25zPWV8fHt9fSxzPXIucHJvdG90eXBlO3JldHVybiByLmlzTWVzc2FnZT1mdW5jdGlvbihlKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgZS5uYW1lJiZ2b2lkIDA9PT1lLnZhbHVlcyYmdm9pZCAwPT09ZS5ycGN9LHIuaXNNZXNzYWdlRmllbGQ9ZnVuY3Rpb24oZSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGUucnVsZSYmXCJzdHJpbmdcIj09dHlwZW9mIGUubmFtZSYmXCJzdHJpbmdcIj09dHlwZW9mIGUudHlwZSYmdm9pZCAwIT09ZS5pZH0sci5pc0VudW09ZnVuY3Rpb24oZSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGUubmFtZSYmISh2b2lkIDA9PT1lLnZhbHVlc3x8IUFycmF5LmlzQXJyYXkoZS52YWx1ZXMpfHwwPT09ZS52YWx1ZXMubGVuZ3RoKX0sci5pc1NlcnZpY2U9ZnVuY3Rpb24oZSl7cmV0dXJuIShcInN0cmluZ1wiIT10eXBlb2YgZS5uYW1lfHxcIm9iamVjdFwiIT10eXBlb2YgZS5ycGN8fCFlLnJwYyl9LHIuaXNFeHRlbmQ9ZnVuY3Rpb24oZSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGUucmVmfSxzLnJlc2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHRyPXRoaXMubnMsdGhpc30scy5kZWZpbmU9ZnVuY3Rpb24oZSl7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGV8fCF0LlRZUEVSRUYudGVzdChlKSl0aHJvdyBFcnJvcihcImlsbGVnYWwgbmFtZXNwYWNlOiBcIitlKTtyZXR1cm4gZS5zcGxpdChcIi5cIikuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5wdHIuZ2V0Q2hpbGQoZSk7bnVsbD09PXQmJnRoaXMucHRyLmFkZENoaWxkKHQ9bmV3IG4uTmFtZXNwYWNlKHRoaXMsdGhpcy5wdHIsZSkpLHRoaXMucHRyPXR9KSx0aGlzKSx0aGlzfSxzLmNyZWF0ZT1mdW5jdGlvbih0KXt2YXIgaSxzLG8sYSx1O2lmKCF0KXJldHVybiB0aGlzO2lmKEFycmF5LmlzQXJyYXkodCkpe2lmKDA9PT10Lmxlbmd0aClyZXR1cm4gdGhpczt0PXQuc2xpY2UoKX1lbHNlIHQ9W3RdO2ZvcihpPVt0XTtpLmxlbmd0aD4wOyl7aWYodD1pLnBvcCgpLCFBcnJheS5pc0FycmF5KHQpKXRocm93IEVycm9yKFwibm90IGEgdmFsaWQgbmFtZXNwYWNlOiBcIitKU09OLnN0cmluZ2lmeSh0KSk7Zm9yKDt0Lmxlbmd0aD4wOyl7aWYocz10LnNoaWZ0KCksci5pc01lc3NhZ2Uocykpe2lmKG89bmV3IG4uTWVzc2FnZSh0aGlzLHRoaXMucHRyLHMubmFtZSxzLm9wdGlvbnMscy5pc0dyb3VwLHMuc3ludGF4KSxhPXt9LHMub25lb2ZzJiZPYmplY3Qua2V5cyhzLm9uZW9mcykuZm9yRWFjaCgoZnVuY3Rpb24oZSl7by5hZGRDaGlsZChhW2VdPW5ldyBuLk1lc3NhZ2UuT25lT2YodGhpcyxvLGUpKX0pLHRoaXMpLHMuZmllbGRzJiZzLmZpZWxkcy5mb3JFYWNoKChmdW5jdGlvbihlKXtpZihudWxsIT09by5nZXRDaGlsZCgwfGUuaWQpKXRocm93IEVycm9yKFwiZHVwbGljYXRlIG9yIGludmFsaWQgZmllbGQgaWQgaW4gXCIrby5uYW1lK1wiOiBcIitlLmlkKTtpZihlLm9wdGlvbnMmJlwib2JqZWN0XCIhPXR5cGVvZiBlLm9wdGlvbnMpdGhyb3cgRXJyb3IoXCJpbGxlZ2FsIGZpZWxkIG9wdGlvbnMgaW4gXCIrby5uYW1lK1wiI1wiK2UubmFtZSk7dmFyIHQ9bnVsbDtpZihcInN0cmluZ1wiPT10eXBlb2YgZS5vbmVvZiYmISh0PWFbZS5vbmVvZl0pKXRocm93IEVycm9yKFwiaWxsZWdhbCBvbmVvZiBpbiBcIitvLm5hbWUrXCIjXCIrZS5uYW1lK1wiOiBcIitlLm9uZW9mKTtlPW5ldyBuLk1lc3NhZ2UuRmllbGQodGhpcyxvLGUucnVsZSxlLmtleXR5cGUsZS50eXBlLGUubmFtZSxlLmlkLGUub3B0aW9ucyx0LHMuc3ludGF4KSx0JiZ0LmZpZWxkcy5wdXNoKGUpLG8uYWRkQ2hpbGQoZSl9KSx0aGlzKSx1PVtdLHMuZW51bXMmJnMuZW51bXMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dS5wdXNoKGUpfSkpLHMubWVzc2FnZXMmJnMubWVzc2FnZXMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dS5wdXNoKGUpfSkpLHMuc2VydmljZXMmJnMuc2VydmljZXMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dS5wdXNoKGUpfSkpLHMuZXh0ZW5zaW9ucyYmKG8uZXh0ZW5zaW9ucz1cIm51bWJlclwiPT10eXBlb2Ygcy5leHRlbnNpb25zWzBdP1tzLmV4dGVuc2lvbnNdOnMuZXh0ZW5zaW9ucyksdGhpcy5wdHIuYWRkQ2hpbGQobyksdS5sZW5ndGg+MCl7aS5wdXNoKHQpLHQ9dSx1PW51bGwsdGhpcy5wdHI9byxvPW51bGw7Y29udGludWV9dT1udWxsfWVsc2UgaWYoci5pc0VudW0ocykpbz1uZXcgbi5FbnVtKHRoaXMsdGhpcy5wdHIscy5uYW1lLHMub3B0aW9ucyxzLnN5bnRheCkscy52YWx1ZXMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7by5hZGRDaGlsZChuZXcgbi5FbnVtLlZhbHVlKHRoaXMsbyxlLm5hbWUsZS5pZCkpfSksdGhpcyksdGhpcy5wdHIuYWRkQ2hpbGQobyk7ZWxzZSBpZihyLmlzU2VydmljZShzKSlvPW5ldyBuLlNlcnZpY2UodGhpcyx0aGlzLnB0cixzLm5hbWUscy5vcHRpb25zKSxPYmplY3Qua2V5cyhzLnJwYykuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHQ9cy5ycGNbZV07by5hZGRDaGlsZChuZXcgbi5TZXJ2aWNlLlJQQ01ldGhvZCh0aGlzLG8sZSx0LnJlcXVlc3QsdC5yZXNwb25zZSwhIXQucmVxdWVzdF9zdHJlYW0sISF0LnJlc3BvbnNlX3N0cmVhbSx0Lm9wdGlvbnMpKX0pLHRoaXMpLHRoaXMucHRyLmFkZENoaWxkKG8pO2Vsc2V7aWYoIXIuaXNFeHRlbmQocykpdGhyb3cgRXJyb3IoXCJub3QgYSB2YWxpZCBkZWZpbml0aW9uOiBcIitKU09OLnN0cmluZ2lmeShzKSk7aWYobz10aGlzLnB0ci5yZXNvbHZlKHMucmVmLCEwKSlzLmZpZWxkcy5mb3JFYWNoKChmdW5jdGlvbih0KXt2YXIgaSxyLHMsYTtpZihudWxsIT09by5nZXRDaGlsZCgwfHQuaWQpKXRocm93IEVycm9yKFwiZHVwbGljYXRlIGV4dGVuZGVkIGZpZWxkIGlkIGluIFwiK28ubmFtZStcIjogXCIrdC5pZCk7aWYoby5leHRlbnNpb25zJiYoaT0hMSxvLmV4dGVuc2lvbnMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dC5pZD49ZVswXSYmdC5pZDw9ZVsxXSYmKGk9ITApfSkpLCFpKSl0aHJvdyBFcnJvcihcImlsbGVnYWwgZXh0ZW5kZWQgZmllbGQgaWQgaW4gXCIrby5uYW1lK1wiOiBcIit0LmlkK1wiIChub3Qgd2l0aGluIHZhbGlkIHJhbmdlcylcIik7cj10Lm5hbWUsdGhpcy5vcHRpb25zLmNvbnZlcnRGaWVsZHNUb0NhbWVsQ2FzZSYmKHI9ZS5VdGlsLnRvQ2FtZWxDYXNlKHIpKSxzPW5ldyBuLk1lc3NhZ2UuRXh0ZW5zaW9uRmllbGQodGhpcyxvLHQucnVsZSx0LnR5cGUsdGhpcy5wdHIuZnFuKCkrXCIuXCIrcix0LmlkLHQub3B0aW9ucyksYT1uZXcgbi5FeHRlbnNpb24odGhpcyx0aGlzLnB0cix0Lm5hbWUscykscy5leHRlbnNpb249YSx0aGlzLnB0ci5hZGRDaGlsZChhKSxvLmFkZENoaWxkKHMpfSksdGhpcyk7ZWxzZSBpZighL1xcLj9nb29nbGVcXC5wcm90b2J1ZlxcLi8udGVzdChzLnJlZikpdGhyb3cgRXJyb3IoXCJleHRlbmRlZCBtZXNzYWdlIFwiK3MucmVmK1wiIGlzIG5vdCBkZWZpbmVkXCIpfXM9bnVsbCxvPW51bGx9dD1udWxsLHRoaXMucHRyPXRoaXMucHRyLnBhcmVudH1yZXR1cm4gdGhpcy5yZXNvbHZlZD0hMSx0aGlzLnJlc3VsdD1udWxsLHRoaXN9LHMuaW1wb3J0PWZ1bmN0aW9uKHQsbil7dmFyIHIscyxvLGEsdSxjLGgsbCxkPVwiL1wiO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBuKXtpZihlLlV0aWwuSVNfTk9ERSwhMD09PXRoaXMuZmlsZXNbbl0pcmV0dXJuIHRoaXMucmVzZXQoKTt0aGlzLmZpbGVzW25dPSEwfWVsc2UgaWYoXCJvYmplY3RcIj09dHlwZW9mIG4pe2lmKHI9bi5yb290LGUuVXRpbC5JU19OT0RFLChyLmluZGV4T2YoXCJcXFxcXCIpPj0wfHxuLmZpbGUuaW5kZXhPZihcIlxcXFxcIik+PTApJiYoZD1cIlxcXFxcIikscz1yK2Qrbi5maWxlLCEwPT09dGhpcy5maWxlc1tzXSlyZXR1cm4gdGhpcy5yZXNldCgpO3RoaXMuZmlsZXNbc109ITB9aWYodC5pbXBvcnRzJiZ0LmltcG9ydHMubGVuZ3RoPjApe2ZvcihhPSExLFwib2JqZWN0XCI9PXR5cGVvZiBuPyh0aGlzLmltcG9ydFJvb3Q9bi5yb290LGE9ITAsbz10aGlzLmltcG9ydFJvb3Qsbj1uLmZpbGUsKG8uaW5kZXhPZihcIlxcXFxcIik+PTB8fG4uaW5kZXhPZihcIlxcXFxcIik+PTApJiYoZD1cIlxcXFxcIikpOlwic3RyaW5nXCI9PXR5cGVvZiBuP3RoaXMuaW1wb3J0Um9vdD9vPXRoaXMuaW1wb3J0Um9vdDpuLmluZGV4T2YoXCIvXCIpPj0wP1wiXCI9PT0obz1uLnJlcGxhY2UoL1xcL1teXFwvXSokLyxcIlwiKSkmJihvPVwiL1wiKTpuLmluZGV4T2YoXCJcXFxcXCIpPj0wPyhvPW4ucmVwbGFjZSgvXFxcXFteXFxcXF0qJC8sXCJcIiksZD1cIlxcXFxcIik6bz1cIi5cIjpvPW51bGwsdT0wO3U8dC5pbXBvcnRzLmxlbmd0aDt1KyspaWYoXCJzdHJpbmdcIj09dHlwZW9mIHQuaW1wb3J0c1t1XSl7aWYoIW8pdGhyb3cgRXJyb3IoXCJjYW5ub3QgZGV0ZXJtaW5lIGltcG9ydCByb290XCIpO2lmKFwiZ29vZ2xlL3Byb3RvYnVmL2Rlc2NyaXB0b3IucHJvdG9cIj09PShjPXQuaW1wb3J0c1t1XSkpY29udGludWU7aWYoYz1vK2QrYywhMD09PXRoaXMuZmlsZXNbY10pY29udGludWU7aWYoL1xcLnByb3RvJC9pLnRlc3QoYykmJiFlLkRvdFByb3RvJiYoYz1jLnJlcGxhY2UoL1xcLnByb3RvJC8sXCIuanNvblwiKSksbnVsbD09PShoPWUuVXRpbC5mZXRjaChjKSkpdGhyb3cgRXJyb3IoXCJmYWlsZWQgdG8gaW1wb3J0ICdcIitjK1wiJyBpbiAnXCIrbitcIic6IGZpbGUgbm90IGZvdW5kXCIpOy9cXC5qc29uJC9pLnRlc3QoYyk/dGhpcy5pbXBvcnQoSlNPTi5wYXJzZShoK1wiXCIpLGMpOnRoaXMuaW1wb3J0KGUuRG90UHJvdG8uUGFyc2VyLnBhcnNlKGgpLGMpfWVsc2Ugbj8vXFwuKFxcdyspJC8udGVzdChuKT90aGlzLmltcG9ydCh0LmltcG9ydHNbdV0sbi5yZXBsYWNlKC9eKC4rKVxcLihcXHcrKSQvLChmdW5jdGlvbihlLHQsbil7cmV0dXJuIHQrXCJfaW1wb3J0XCIrdStcIi5cIitufSkpKTp0aGlzLmltcG9ydCh0LmltcG9ydHNbdV0sbitcIl9pbXBvcnRcIit1KTp0aGlzLmltcG9ydCh0LmltcG9ydHNbdV0pO2EmJih0aGlzLmltcG9ydFJvb3Q9bnVsbCl9cmV0dXJuIHQucGFja2FnZSYmdGhpcy5kZWZpbmUodC5wYWNrYWdlKSx0LnN5bnRheCYmaSh0KSxsPXRoaXMucHRyLHQub3B0aW9ucyYmT2JqZWN0LmtleXModC5vcHRpb25zKS5mb3JFYWNoKChmdW5jdGlvbihlKXtsLm9wdGlvbnNbZV09dC5vcHRpb25zW2VdfSkpLHQubWVzc2FnZXMmJih0aGlzLmNyZWF0ZSh0Lm1lc3NhZ2VzKSx0aGlzLnB0cj1sKSx0LmVudW1zJiYodGhpcy5jcmVhdGUodC5lbnVtcyksdGhpcy5wdHI9bCksdC5zZXJ2aWNlcyYmKHRoaXMuY3JlYXRlKHQuc2VydmljZXMpLHRoaXMucHRyPWwpLHQuZXh0ZW5kcyYmdGhpcy5jcmVhdGUodC5leHRlbmRzKSx0aGlzLnJlc2V0KCl9LHMucmVzb2x2ZUFsbD1mdW5jdGlvbigpe3ZhciBpO2lmKG51bGw9PXRoaXMucHRyfHxcIm9iamVjdFwiPT10eXBlb2YgdGhpcy5wdHIudHlwZSlyZXR1cm4gdGhpcztpZih0aGlzLnB0ciBpbnN0YW5jZW9mIG4uTmFtZXNwYWNlKXRoaXMucHRyLmNoaWxkcmVuLmZvckVhY2goKGZ1bmN0aW9uKGUpe3RoaXMucHRyPWUsdGhpcy5yZXNvbHZlQWxsKCl9KSx0aGlzKTtlbHNlIGlmKHRoaXMucHRyIGluc3RhbmNlb2Ygbi5NZXNzYWdlLkZpZWxkKXtpZih0LlRZUEUudGVzdCh0aGlzLnB0ci50eXBlKSl0aGlzLnB0ci50eXBlPWUuVFlQRVNbdGhpcy5wdHIudHlwZV07ZWxzZXtpZighdC5UWVBFUkVGLnRlc3QodGhpcy5wdHIudHlwZSkpdGhyb3cgRXJyb3IoXCJpbGxlZ2FsIHR5cGUgcmVmZXJlbmNlIGluIFwiK3RoaXMucHRyLnRvU3RyaW5nKCEwKStcIjogXCIrdGhpcy5wdHIudHlwZSk7aWYoIShpPSh0aGlzLnB0ciBpbnN0YW5jZW9mIG4uTWVzc2FnZS5FeHRlbnNpb25GaWVsZD90aGlzLnB0ci5leHRlbnNpb24ucGFyZW50OnRoaXMucHRyLnBhcmVudCkucmVzb2x2ZSh0aGlzLnB0ci50eXBlLCEwKSkpdGhyb3cgRXJyb3IoXCJ1bnJlc29sdmFibGUgdHlwZSByZWZlcmVuY2UgaW4gXCIrdGhpcy5wdHIudG9TdHJpbmcoITApK1wiOiBcIit0aGlzLnB0ci50eXBlKTtpZih0aGlzLnB0ci5yZXNvbHZlZFR5cGU9aSxpIGluc3RhbmNlb2Ygbi5FbnVtKXtpZih0aGlzLnB0ci50eXBlPWUuVFlQRVMuZW51bSxcInByb3RvM1wiPT09dGhpcy5wdHIuc3ludGF4JiZcInByb3RvM1wiIT09aS5zeW50YXgpdGhyb3cgRXJyb3IoXCJwcm90bzMgbWVzc2FnZSBjYW5ub3QgcmVmZXJlbmNlIHByb3RvMiBlbnVtXCIpfWVsc2V7aWYoIShpIGluc3RhbmNlb2Ygbi5NZXNzYWdlKSl0aHJvdyBFcnJvcihcImlsbGVnYWwgdHlwZSByZWZlcmVuY2UgaW4gXCIrdGhpcy5wdHIudG9TdHJpbmcoITApK1wiOiBcIit0aGlzLnB0ci50eXBlKTt0aGlzLnB0ci50eXBlPWkuaXNHcm91cD9lLlRZUEVTLmdyb3VwOmUuVFlQRVMubWVzc2FnZX19aWYodGhpcy5wdHIubWFwKXtpZighdC5UWVBFLnRlc3QodGhpcy5wdHIua2V5VHlwZSkpdGhyb3cgRXJyb3IoXCJpbGxlZ2FsIGtleSB0eXBlIGZvciBtYXAgZmllbGQgaW4gXCIrdGhpcy5wdHIudG9TdHJpbmcoITApK1wiOiBcIit0aGlzLnB0ci5rZXlUeXBlKTt0aGlzLnB0ci5rZXlUeXBlPWUuVFlQRVNbdGhpcy5wdHIua2V5VHlwZV19fWVsc2UgaWYodGhpcy5wdHIgaW5zdGFuY2VvZiBlLlJlZmxlY3QuU2VydmljZS5NZXRob2Qpe2lmKCEodGhpcy5wdHIgaW5zdGFuY2VvZiBlLlJlZmxlY3QuU2VydmljZS5SUENNZXRob2QpKXRocm93IEVycm9yKFwiaWxsZWdhbCBzZXJ2aWNlIHR5cGUgaW4gXCIrdGhpcy5wdHIudG9TdHJpbmcoITApKTtpZighKChpPXRoaXMucHRyLnBhcmVudC5yZXNvbHZlKHRoaXMucHRyLnJlcXVlc3ROYW1lLCEwKSkmJmkgaW5zdGFuY2VvZiBlLlJlZmxlY3QuTWVzc2FnZSkpdGhyb3cgRXJyb3IoXCJJbGxlZ2FsIHR5cGUgcmVmZXJlbmNlIGluIFwiK3RoaXMucHRyLnRvU3RyaW5nKCEwKStcIjogXCIrdGhpcy5wdHIucmVxdWVzdE5hbWUpO2lmKHRoaXMucHRyLnJlc29sdmVkUmVxdWVzdFR5cGU9aSwhKChpPXRoaXMucHRyLnBhcmVudC5yZXNvbHZlKHRoaXMucHRyLnJlc3BvbnNlTmFtZSwhMCkpJiZpIGluc3RhbmNlb2YgZS5SZWZsZWN0Lk1lc3NhZ2UpKXRocm93IEVycm9yKFwiSWxsZWdhbCB0eXBlIHJlZmVyZW5jZSBpbiBcIit0aGlzLnB0ci50b1N0cmluZyghMCkrXCI6IFwiK3RoaXMucHRyLnJlc3BvbnNlTmFtZSk7dGhpcy5wdHIucmVzb2x2ZWRSZXNwb25zZVR5cGU9aX1lbHNlIGlmKCEodGhpcy5wdHIgaW5zdGFuY2VvZiBlLlJlZmxlY3QuTWVzc2FnZS5PbmVPZnx8dGhpcy5wdHIgaW5zdGFuY2VvZiBlLlJlZmxlY3QuRXh0ZW5zaW9ufHx0aGlzLnB0ciBpbnN0YW5jZW9mIGUuUmVmbGVjdC5FbnVtLlZhbHVlKSl0aHJvdyBFcnJvcihcImlsbGVnYWwgb2JqZWN0IGluIG5hbWVzcGFjZTogXCIrdHlwZW9mIHRoaXMucHRyK1wiOiBcIit0aGlzLnB0cik7cmV0dXJuIHRoaXMucmVzZXQoKX0scy5idWlsZD1mdW5jdGlvbihlKXt2YXIgdCxuLGk7aWYodGhpcy5yZXNldCgpLHRoaXMucmVzb2x2ZWR8fCh0aGlzLnJlc29sdmVBbGwoKSx0aGlzLnJlc29sdmVkPSEwLHRoaXMucmVzdWx0PW51bGwpLG51bGw9PT10aGlzLnJlc3VsdCYmKHRoaXMucmVzdWx0PXRoaXMubnMuYnVpbGQoKSksIWUpcmV0dXJuIHRoaXMucmVzdWx0O2Zvcih0PVwic3RyaW5nXCI9PXR5cGVvZiBlP2Uuc3BsaXQoXCIuXCIpOmUsbj10aGlzLnJlc3VsdCxpPTA7aTx0Lmxlbmd0aDtpKyspe2lmKCFuW3RbaV1dKXtuPW51bGw7YnJlYWt9bj1uW3RbaV1dfXJldHVybiBufSxzLmxvb2t1cD1mdW5jdGlvbihlLHQpe3JldHVybiBlP3RoaXMubnMucmVzb2x2ZShlLHQpOnRoaXMubnN9LHMudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm5cIkJ1aWxkZXJcIn0sci5NZXNzYWdlPWZ1bmN0aW9uKCl7fSxyLkVudW09ZnVuY3Rpb24oKXt9LHIuU2VydmljZT1mdW5jdGlvbigpe30scn0ocixyLkxhbmcsci5SZWZsZWN0KSxyLk1hcD1mdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oZSl7dmFyIHQ9MDtyZXR1cm57bmV4dDpmdW5jdGlvbigpe3JldHVybiB0PGUubGVuZ3RoP3tkb25lOiExLHZhbHVlOmVbdCsrXX06e2RvbmU6ITB9fX19dmFyIGk9ZnVuY3Rpb24oZSxuKXt2YXIgaSxyLHMsbztpZighZS5tYXApdGhyb3cgRXJyb3IoXCJmaWVsZCBpcyBub3QgYSBtYXBcIik7aWYodGhpcy5maWVsZD1lLHRoaXMua2V5RWxlbT1uZXcgdC5FbGVtZW50KGUua2V5VHlwZSxudWxsLCEwLGUuc3ludGF4KSx0aGlzLnZhbHVlRWxlbT1uZXcgdC5FbGVtZW50KGUudHlwZSxlLnJlc29sdmVkVHlwZSwhMSxlLnN5bnRheCksdGhpcy5tYXA9e30sT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJzaXplXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBPYmplY3Qua2V5cyh0aGlzLm1hcCkubGVuZ3RofX0pLG4pZm9yKGk9T2JqZWN0LmtleXMobikscj0wO3I8aS5sZW5ndGg7cisrKXM9dGhpcy5rZXlFbGVtLnZhbHVlRnJvbVN0cmluZyhpW3JdKSxvPXRoaXMudmFsdWVFbGVtLnZlcmlmeVZhbHVlKG5baVtyXV0pLHRoaXMubWFwW3RoaXMua2V5RWxlbS52YWx1ZVRvU3RyaW5nKHMpXT17a2V5OnMsdmFsdWU6b319LHI9aS5wcm90b3R5cGU7cmV0dXJuIHIuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLm1hcD17fX0sci5kZWxldGU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5rZXlFbGVtLnZhbHVlVG9TdHJpbmcodGhpcy5rZXlFbGVtLnZlcmlmeVZhbHVlKGUpKSxuPXQgaW4gdGhpcy5tYXA7cmV0dXJuIGRlbGV0ZSB0aGlzLm1hcFt0XSxufSxyLmVudHJpZXM9ZnVuY3Rpb24oKXt2YXIgZSx0LGk9W10scj1PYmplY3Qua2V5cyh0aGlzLm1hcCk7Zm9yKHQ9MDt0PHIubGVuZ3RoO3QrKylpLnB1c2goWyhlPXRoaXMubWFwW3JbdF1dKS5rZXksZS52YWx1ZV0pO3JldHVybiBuKGkpfSxyLmtleXM9ZnVuY3Rpb24oKXt2YXIgZSx0PVtdLGk9T2JqZWN0LmtleXModGhpcy5tYXApO2ZvcihlPTA7ZTxpLmxlbmd0aDtlKyspdC5wdXNoKHRoaXMubWFwW2lbZV1dLmtleSk7cmV0dXJuIG4odCl9LHIudmFsdWVzPWZ1bmN0aW9uKCl7dmFyIGUsdD1bXSxpPU9iamVjdC5rZXlzKHRoaXMubWFwKTtmb3IoZT0wO2U8aS5sZW5ndGg7ZSsrKXQucHVzaCh0aGlzLm1hcFtpW2VdXS52YWx1ZSk7cmV0dXJuIG4odCl9LHIuZm9yRWFjaD1mdW5jdGlvbihlLHQpe3ZhciBuLGkscj1PYmplY3Qua2V5cyh0aGlzLm1hcCk7Zm9yKGk9MDtpPHIubGVuZ3RoO2krKyllLmNhbGwodCwobj10aGlzLm1hcFtyW2ldXSkudmFsdWUsbi5rZXksdGhpcyl9LHIuc2V0PWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5rZXlFbGVtLnZlcmlmeVZhbHVlKGUpLGk9dGhpcy52YWx1ZUVsZW0udmVyaWZ5VmFsdWUodCk7cmV0dXJuIHRoaXMubWFwW3RoaXMua2V5RWxlbS52YWx1ZVRvU3RyaW5nKG4pXT17a2V5Om4sdmFsdWU6aX0sdGhpc30sci5nZXQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5rZXlFbGVtLnZhbHVlVG9TdHJpbmcodGhpcy5rZXlFbGVtLnZlcmlmeVZhbHVlKGUpKTtyZXR1cm4gdCBpbiB0aGlzLm1hcD90aGlzLm1hcFt0XS52YWx1ZTp2b2lkIDB9LHIuaGFzPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmtleUVsZW0udmFsdWVUb1N0cmluZyh0aGlzLmtleUVsZW0udmVyaWZ5VmFsdWUoZSkpaW4gdGhpcy5tYXB9LGl9KDAsci5SZWZsZWN0KSxyLmxvYWRQcm90bz1mdW5jdGlvbihlLHQsbil7cmV0dXJuKFwic3RyaW5nXCI9PXR5cGVvZiB0fHx0JiZcInN0cmluZ1wiPT10eXBlb2YgdC5maWxlJiZcInN0cmluZ1wiPT10eXBlb2YgdC5yb290KSYmKG49dCx0PXZvaWQgMCksci5sb2FkSnNvbihyLkRvdFByb3RvLlBhcnNlci5wYXJzZShlKSx0LG4pfSxyLnByb3RvRnJvbVN0cmluZz1yLmxvYWRQcm90byxyLmxvYWRQcm90b0ZpbGU9ZnVuY3Rpb24oZSx0LG4pe2lmKHQmJlwib2JqZWN0XCI9PXR5cGVvZiB0PyhuPXQsdD1udWxsKTp0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0fHwodD1udWxsKSx0KXJldHVybiByLlV0aWwuZmV0Y2goXCJzdHJpbmdcIj09dHlwZW9mIGU/ZTplLnJvb3QrXCIvXCIrZS5maWxlLChmdW5jdGlvbihpKXtpZihudWxsIT09aSl0cnl7dChudWxsLHIubG9hZFByb3RvKGksbixlKSl9Y2F0Y2goZSl7dChlKX1lbHNlIHQoRXJyb3IoXCJGYWlsZWQgdG8gZmV0Y2ggZmlsZVwiKSl9KSk7dmFyIGk9ci5VdGlsLmZldGNoKFwib2JqZWN0XCI9PXR5cGVvZiBlP2Uucm9vdCtcIi9cIitlLmZpbGU6ZSk7cmV0dXJuIG51bGw9PT1pP251bGw6ci5sb2FkUHJvdG8oaSxuLGUpfSxyLnByb3RvRnJvbUZpbGU9ci5sb2FkUHJvdG9GaWxlLHIubmV3QnVpbGRlcj1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwPT09KGU9ZXx8e30pLmNvbnZlcnRGaWVsZHNUb0NhbWVsQ2FzZSYmKGUuY29udmVydEZpZWxkc1RvQ2FtZWxDYXNlPXIuY29udmVydEZpZWxkc1RvQ2FtZWxDYXNlKSx2b2lkIDA9PT1lLnBvcHVsYXRlQWNjZXNzb3JzJiYoZS5wb3B1bGF0ZUFjY2Vzc29ycz1yLnBvcHVsYXRlQWNjZXNzb3JzKSxuZXcgci5CdWlsZGVyKGUpfSxyLmxvYWRKc29uPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4oXCJzdHJpbmdcIj09dHlwZW9mIHR8fHQmJlwic3RyaW5nXCI9PXR5cGVvZiB0LmZpbGUmJlwic3RyaW5nXCI9PXR5cGVvZiB0LnJvb3QpJiYobj10LHQ9bnVsbCksdCYmXCJvYmplY3RcIj09dHlwZW9mIHR8fCh0PXIubmV3QnVpbGRlcigpKSxcInN0cmluZ1wiPT10eXBlb2YgZSYmKGU9SlNPTi5wYXJzZShlKSksdC5pbXBvcnQoZSxuKSx0LnJlc29sdmVBbGwoKSx0fSxyLmxvYWRKc29uRmlsZT1mdW5jdGlvbihlLHQsbil7aWYodCYmXCJvYmplY3RcIj09dHlwZW9mIHQ/KG49dCx0PW51bGwpOnQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHR8fCh0PW51bGwpLHQpcmV0dXJuIHIuVXRpbC5mZXRjaChcInN0cmluZ1wiPT10eXBlb2YgZT9lOmUucm9vdCtcIi9cIitlLmZpbGUsKGZ1bmN0aW9uKGkpe2lmKG51bGwhPT1pKXRyeXt0KG51bGwsci5sb2FkSnNvbihKU09OLnBhcnNlKGkpLG4sZSkpfWNhdGNoKGUpe3QoZSl9ZWxzZSB0KEVycm9yKFwiRmFpbGVkIHRvIGZldGNoIGZpbGVcIikpfSkpO3ZhciBpPXIuVXRpbC5mZXRjaChcIm9iamVjdFwiPT10eXBlb2YgZT9lLnJvb3QrXCIvXCIrZS5maWxlOmUpO3JldHVybiBudWxsPT09aT9udWxsOnIubG9hZEpzb24oSlNPTi5wYXJzZShpKSxuLGUpfSxpPUFpLHIubG9hZFByb3RvKGksdm9pZCAwLFwiXCIpLmJ1aWxkKFwiTW9kdWxlc1wiKS5wcm9idWZ9KGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7dmFyIHQ9MDtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdDxlLmxlbmd0aD9lLmNoYXJDb2RlQXQodCsrKTpudWxsfX1mdW5jdGlvbiBuKCl7dmFyIGU9W10sdD1bXTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gMD09PWFyZ3VtZW50cy5sZW5ndGg/dC5qb2luKFwiXCIpK2EuYXBwbHkoU3RyaW5nLGUpOihlLmxlbmd0aCthcmd1bWVudHMubGVuZ3RoPjEwMjQmJih0LnB1c2goYS5hcHBseShTdHJpbmcsZSkpLGUubGVuZ3RoPTApLHZvaWQgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoZSxhcmd1bWVudHMpKX19ZnVuY3Rpb24gaShlLHQsbixpLHIpe3ZhciBzLG8sYT04KnItaS0xLHU9KDE8PGEpLTEsYz11Pj4xLGg9LTcsbD1uP3ItMTowLGQ9bj8tMToxLGY9ZVt0K2xdO2ZvcihsKz1kLHM9ZiYoMTw8LWgpLTEsZj4+PS1oLGgrPWE7aD4wO3M9MjU2KnMrZVt0K2xdLGwrPWQsaC09OCk7Zm9yKG89cyYoMTw8LWgpLTEscz4+PS1oLGgrPWk7aD4wO289MjU2Km8rZVt0K2xdLGwrPWQsaC09OCk7aWYoMD09PXMpcz0xLWM7ZWxzZXtpZihzPT09dSlyZXR1cm4gbz9OYU46MS8wKihmPy0xOjEpO28rPU1hdGgucG93KDIsaSkscy09Y31yZXR1cm4oZj8tMToxKSpvKk1hdGgucG93KDIscy1pKX1mdW5jdGlvbiByKGUsdCxuLGkscixzKXt2YXIgbyxhLHUsYz04KnMtci0xLGg9KDE8PGMpLTEsbD1oPj4xLGQ9MjM9PT1yP01hdGgucG93KDIsLTI0KS1NYXRoLnBvdygyLC03Nyk6MCxmPWk/MDpzLTEscD1pPzE6LTEsZz10PDB8fDA9PT10JiYxL3Q8MD8xOjA7Zm9yKHQ9TWF0aC5hYnModCksaXNOYU4odCl8fDEvMD09PXQ/KGE9aXNOYU4odCk/MTowLG89aCk6KG89TWF0aC5mbG9vcihNYXRoLmxvZyh0KS9NYXRoLkxOMiksdCoodT1NYXRoLnBvdygyLC1vKSk8MSYmKG8tLSx1Kj0yKSwodCs9bytsPj0xP2QvdTpkKk1hdGgucG93KDIsMS1sKSkqdT49MiYmKG8rKyx1Lz0yKSxvK2w+PWg/KGE9MCxvPWgpOm8rbD49MT8oYT0odCp1LTEpKk1hdGgucG93KDIsciksbys9bCk6KGE9dCpNYXRoLnBvdygyLGwtMSkqTWF0aC5wb3coMixyKSxvPTApKTtyPj04O2VbbitmXT0yNTUmYSxmKz1wLGEvPTI1NixyLT04KTtmb3Iobz1vPDxyfGEsYys9cjtjPjA7ZVtuK2ZdPTI1NSZvLGYrPXAsby89MjU2LGMtPTgpO2VbbitmLXBdfD0xMjgqZ312YXIgcyxvLGEsdSxjLGg9ZnVuY3Rpb24oZSx0LG4pe2lmKHZvaWQgMD09PWUmJihlPWguREVGQVVMVF9DQVBBQ0lUWSksdm9pZCAwPT09dCYmKHQ9aC5ERUZBVUxUX0VORElBTiksdm9pZCAwPT09biYmKG49aC5ERUZBVUxUX05PQVNTRVJUKSwhbil7aWYoKGV8PTApPDApdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgY2FwYWNpdHlcIik7dD0hIXQsbj0hIW59dGhpcy5idWZmZXI9MD09PWU/bzpuZXcgQXJyYXlCdWZmZXIoZSksdGhpcy52aWV3PTA9PT1lP251bGw6bmV3IFVpbnQ4QXJyYXkodGhpcy5idWZmZXIpLHRoaXMub2Zmc2V0PTAsdGhpcy5tYXJrZWRPZmZzZXQ9LTEsdGhpcy5saW1pdD1lLHRoaXMubGl0dGxlRW5kaWFuPXQsdGhpcy5ub0Fzc2VydD1ufTtyZXR1cm4gaC5WRVJTSU9OPVwiNS4wLjFcIixoLkxJVFRMRV9FTkRJQU49ITAsaC5CSUdfRU5ESUFOPSExLGguREVGQVVMVF9DQVBBQ0lUWT0xNixoLkRFRkFVTFRfRU5ESUFOPWguQklHX0VORElBTixoLkRFRkFVTFRfTk9BU1NFUlQ9ITEsaC5Mb25nPWV8fG51bGwsKHM9aC5wcm90b3R5cGUpLl9faXNCeXRlQnVmZmVyX18sT2JqZWN0LmRlZmluZVByb3BlcnR5KHMsXCJfX2lzQnl0ZUJ1ZmZlcl9fXCIse3ZhbHVlOiEwLGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiExfSksbz1uZXcgQXJyYXlCdWZmZXIoMCksYT1TdHJpbmcuZnJvbUNoYXJDb2RlLGguYWNjZXNzb3I9ZnVuY3Rpb24oKXtyZXR1cm4gVWludDhBcnJheX0saC5hbGxvY2F0ZT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIG5ldyBoKGUsdCxuKX0saC5jb25jYXQ9ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHIscyxvLGEsdSxjO2ZvcigoXCJib29sZWFuXCI9PXR5cGVvZiB0fHxcInN0cmluZ1wiIT10eXBlb2YgdCkmJihpPW4sbj10LHQ9dm9pZCAwKSxyPTAsbz0wLGE9ZS5sZW5ndGg7YT5vOysrbyloLmlzQnl0ZUJ1ZmZlcihlW29dKXx8KGVbb109aC53cmFwKGVbb10sdCkpLChzPWVbb10ubGltaXQtZVtvXS5vZmZzZXQpPjAmJihyKz1zKTtpZigwPT09cilyZXR1cm4gbmV3IGgoMCxuLGkpO2ZvcihjPW5ldyBoKHIsbixpKSxvPTA7YT5vOykocz0odT1lW28rK10pLmxpbWl0LXUub2Zmc2V0KTw9MHx8KGMudmlldy5zZXQodS52aWV3LnN1YmFycmF5KHUub2Zmc2V0LHUubGltaXQpLGMub2Zmc2V0KSxjLm9mZnNldCs9cyk7cmV0dXJuIGMubGltaXQ9Yy5vZmZzZXQsYy5vZmZzZXQ9MCxjfSxoLmlzQnl0ZUJ1ZmZlcj1mdW5jdGlvbihlKXtyZXR1cm4hMD09PShlJiZlLl9faXNCeXRlQnVmZmVyX18pfSxoLnR5cGU9ZnVuY3Rpb24oKXtyZXR1cm4gQXJyYXlCdWZmZXJ9LGgud3JhcD1mdW5jdGlvbihlLHQsbixpKXt2YXIgcixvO2lmKFwic3RyaW5nXCIhPXR5cGVvZiB0JiYoaT1uLG49dCx0PXZvaWQgMCksXCJzdHJpbmdcIj09dHlwZW9mIGUpc3dpdGNoKHZvaWQgMD09PXQmJih0PVwidXRmOFwiKSx0KXtjYXNlXCJiYXNlNjRcIjpyZXR1cm4gaC5mcm9tQmFzZTY0KGUsbik7Y2FzZVwiaGV4XCI6cmV0dXJuIGguZnJvbUhleChlLG4pO2Nhc2VcImJpbmFyeVwiOnJldHVybiBoLmZyb21CaW5hcnkoZSxuKTtjYXNlXCJ1dGY4XCI6cmV0dXJuIGguZnJvbVVURjgoZSxuKTtjYXNlXCJkZWJ1Z1wiOnJldHVybiBoLmZyb21EZWJ1ZyhlLG4pO2RlZmF1bHQ6dGhyb3cgRXJyb3IoXCJVbnN1cHBvcnRlZCBlbmNvZGluZzogXCIrdCl9aWYobnVsbD09PWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgYnVmZmVyXCIpO2lmKGguaXNCeXRlQnVmZmVyKGUpKXJldHVybihyPXMuY2xvbmUuY2FsbChlKSkubWFya2VkT2Zmc2V0PS0xLHI7aWYoZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpcj1uZXcgaCgwLG4saSksZS5sZW5ndGg+MCYmKHIuYnVmZmVyPWUuYnVmZmVyLHIub2Zmc2V0PWUuYnl0ZU9mZnNldCxyLmxpbWl0PWUuYnl0ZU9mZnNldCtlLmJ5dGVMZW5ndGgsci52aWV3PW5ldyBVaW50OEFycmF5KGUuYnVmZmVyKSk7ZWxzZSBpZihlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpcj1uZXcgaCgwLG4saSksZS5ieXRlTGVuZ3RoPjAmJihyLmJ1ZmZlcj1lLHIub2Zmc2V0PTAsci5saW1pdD1lLmJ5dGVMZW5ndGgsci52aWV3PWUuYnl0ZUxlbmd0aD4wP25ldyBVaW50OEFycmF5KGUpOm51bGwpO2Vsc2V7aWYoXCJbb2JqZWN0IEFycmF5XVwiIT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgYnVmZmVyXCIpO2Zvcigocj1uZXcgaChlLmxlbmd0aCxuLGkpKS5saW1pdD1lLmxlbmd0aCxvPTA7bzxlLmxlbmd0aDsrK28pci52aWV3W29dPWVbb119cmV0dXJuIHJ9LHMud3JpdGVCaXRTZXQ9ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHIscyxvLGEsdT12b2lkIDA9PT10O2lmKHUmJih0PXRoaXMub2Zmc2V0KSwhdGhpcy5ub0Fzc2VydCl7aWYoIShlIGluc3RhbmNlb2YgQXJyYXkpKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgQml0U2V0OiBOb3QgYW4gYXJyYXlcIik7aWYoXCJudW1iZXJcIiE9dHlwZW9mIHR8fHQlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrdCtcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKCh0Pj4+PTApPDB8fHQrMD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIit0K1wiICgrMCkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9Zm9yKGk9dCxzPShyPWUubGVuZ3RoKT4+MyxvPTAsdCs9dGhpcy53cml0ZVZhcmludDMyKHIsdCk7cy0tOyluPTEmISFlW28rK118KDEmISFlW28rK10pPDwxfCgxJiEhZVtvKytdKTw8MnwoMSYhIWVbbysrXSk8PDN8KDEmISFlW28rK10pPDw0fCgxJiEhZVtvKytdKTw8NXwoMSYhIWVbbysrXSk8PDZ8KDEmISFlW28rK10pPDw3LHRoaXMud3JpdGVCeXRlKG4sdCsrKTtpZihyPm8pe2ZvcihhPTAsbj0wO3I+bzspbnw9KDEmISFlW28rK10pPDxhKys7dGhpcy53cml0ZUJ5dGUobix0KyspfXJldHVybiB1Pyh0aGlzLm9mZnNldD10LHRoaXMpOnQtaX0scy5yZWFkQml0U2V0PWZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyLHMsbyxhLHU9dm9pZCAwPT09ZTtmb3IodSYmKGU9dGhpcy5vZmZzZXQpLHI9KGk9KG49dGhpcy5yZWFkVmFyaW50MzIoZSkpLnZhbHVlKT4+MyxzPTAsbz1bXSxlKz1uLmxlbmd0aDtyLS07KXQ9dGhpcy5yZWFkQnl0ZShlKyspLG9bcysrXT0hISgxJnQpLG9bcysrXT0hISgyJnQpLG9bcysrXT0hISg0JnQpLG9bcysrXT0hISg4JnQpLG9bcysrXT0hISgxNiZ0KSxvW3MrK109ISEoMzImdCksb1tzKytdPSEhKDY0JnQpLG9bcysrXT0hISgxMjgmdCk7aWYoaT5zKWZvcihhPTAsdD10aGlzLnJlYWRCeXRlKGUrKyk7aT5zOylvW3MrK109ISEoMSZ0Pj5hKyspO3JldHVybiB1JiYodGhpcy5vZmZzZXQ9ZSksb30scy5yZWFkQnl0ZXM9ZnVuY3Rpb24oZSx0KXt2YXIgbixpPXZvaWQgMD09PXQ7aWYoaSYmKHQ9dGhpcy5vZmZzZXQpLCF0aGlzLm5vQXNzZXJ0KXtpZihcIm51bWJlclwiIT10eXBlb2YgdHx8dCUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiBcIit0K1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoKHQ+Pj49MCk8MHx8dCtlPnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiAwIDw9IFwiK3QrXCIgKCtcIitlK1wiKSA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX1yZXR1cm4gbj10aGlzLnNsaWNlKHQsdCtlKSxpJiYodGhpcy5vZmZzZXQrPWUpLG59LHMud3JpdGVCeXRlcz1zLmFwcGVuZCxzLndyaXRlSW50OD1mdW5jdGlvbihlLHQpe3ZhciBuLGk9dm9pZCAwPT09dDtpZihpJiYodD10aGlzLm9mZnNldCksIXRoaXMubm9Bc3NlcnQpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlfHxlJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCB2YWx1ZTogXCIrZStcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKGV8PTAsXCJudW1iZXJcIiE9dHlwZW9mIHR8fHQlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrdCtcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKCh0Pj4+PTApPDB8fHQrMD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIit0K1wiICgrMCkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9cmV0dXJuKHQrPTEpPihuPXRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpJiZ0aGlzLnJlc2l6ZSgobio9Mik+dD9uOnQpLHQtPTEsdGhpcy52aWV3W3RdPWUsaSYmKHRoaXMub2Zmc2V0Kz0xKSx0aGlzfSxzLndyaXRlQnl0ZT1zLndyaXRlSW50OCxzLnJlYWRJbnQ4PWZ1bmN0aW9uKGUpe3ZhciB0LG49dm9pZCAwPT09ZTtpZihuJiYoZT10aGlzLm9mZnNldCksIXRoaXMubm9Bc3NlcnQpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlfHxlJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK2UrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigoZT4+Pj0wKTwwfHxlKzE+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrZStcIiAoKzEpIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXJldHVybiAxMjg9PSgxMjgmKHQ9dGhpcy52aWV3W2VdKSkmJih0PS0oMjU1LXQrMSkpLG4mJih0aGlzLm9mZnNldCs9MSksdH0scy5yZWFkQnl0ZT1zLnJlYWRJbnQ4LHMud3JpdGVVaW50OD1mdW5jdGlvbihlLHQpe3ZhciBuLGk9dm9pZCAwPT09dDtpZihpJiYodD10aGlzLm9mZnNldCksIXRoaXMubm9Bc3NlcnQpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlfHxlJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCB2YWx1ZTogXCIrZStcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKGU+Pj49MCxcIm51bWJlclwiIT10eXBlb2YgdHx8dCUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiBcIit0K1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoKHQ+Pj49MCk8MHx8dCswPnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiAwIDw9IFwiK3QrXCIgKCswKSA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX1yZXR1cm4odCs9MSk+KG49dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCkmJnRoaXMucmVzaXplKChuKj0yKT50P246dCksdC09MSx0aGlzLnZpZXdbdF09ZSxpJiYodGhpcy5vZmZzZXQrPTEpLHRoaXN9LHMud3JpdGVVSW50OD1zLndyaXRlVWludDgscy5yZWFkVWludDg9ZnVuY3Rpb24oZSl7dmFyIHQsbj12b2lkIDA9PT1lO2lmKG4mJihlPXRoaXMub2Zmc2V0KSwhdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrZStcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKChlPj4+PTApPDB8fGUrMT50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIitlK1wiICgrMSkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9cmV0dXJuIHQ9dGhpcy52aWV3W2VdLG4mJih0aGlzLm9mZnNldCs9MSksdH0scy5yZWFkVUludDg9cy5yZWFkVWludDgscy53cml0ZUludDE2PWZ1bmN0aW9uKGUsdCl7dmFyIG4saT12b2lkIDA9PT10O2lmKGkmJih0PXRoaXMub2Zmc2V0KSwhdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIHZhbHVlOiBcIitlK1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoZXw9MCxcIm51bWJlclwiIT10eXBlb2YgdHx8dCUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiBcIit0K1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoKHQ+Pj49MCk8MHx8dCswPnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiAwIDw9IFwiK3QrXCIgKCswKSA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX1yZXR1cm4odCs9Mik+KG49dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCkmJnRoaXMucmVzaXplKChuKj0yKT50P246dCksdC09Mix0aGlzLmxpdHRsZUVuZGlhbj8odGhpcy52aWV3W3QrMV09KDY1MjgwJmUpPj4+OCx0aGlzLnZpZXdbdF09MjU1JmUpOih0aGlzLnZpZXdbdF09KDY1MjgwJmUpPj4+OCx0aGlzLnZpZXdbdCsxXT0yNTUmZSksaSYmKHRoaXMub2Zmc2V0Kz0yKSx0aGlzfSxzLndyaXRlU2hvcnQ9cy53cml0ZUludDE2LHMucmVhZEludDE2PWZ1bmN0aW9uKGUpe3ZhciB0LG49dm9pZCAwPT09ZTtpZihuJiYoZT10aGlzLm9mZnNldCksIXRoaXMubm9Bc3NlcnQpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlfHxlJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK2UrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigoZT4+Pj0wKTwwfHxlKzI+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrZStcIiAoKzIpIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXJldHVybiB0PTAsdGhpcy5saXR0bGVFbmRpYW4/KHQ9dGhpcy52aWV3W2VdLHR8PXRoaXMudmlld1tlKzFdPDw4KToodD10aGlzLnZpZXdbZV08PDgsdHw9dGhpcy52aWV3W2UrMV0pLDMyNzY4PT0oMzI3NjgmdCkmJih0PS0oNjU1MzUtdCsxKSksbiYmKHRoaXMub2Zmc2V0Kz0yKSx0fSxzLnJlYWRTaG9ydD1zLnJlYWRJbnQxNixzLndyaXRlVWludDE2PWZ1bmN0aW9uKGUsdCl7dmFyIG4saT12b2lkIDA9PT10O2lmKGkmJih0PXRoaXMub2Zmc2V0KSwhdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIHZhbHVlOiBcIitlK1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoZT4+Pj0wLFwibnVtYmVyXCIhPXR5cGVvZiB0fHx0JTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK3QrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigodD4+Pj0wKTwwfHx0KzA+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrdCtcIiAoKzApIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXJldHVybih0Kz0yKT4obj10aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKSYmdGhpcy5yZXNpemUoKG4qPTIpPnQ/bjp0KSx0LT0yLHRoaXMubGl0dGxlRW5kaWFuPyh0aGlzLnZpZXdbdCsxXT0oNjUyODAmZSk+Pj44LHRoaXMudmlld1t0XT0yNTUmZSk6KHRoaXMudmlld1t0XT0oNjUyODAmZSk+Pj44LHRoaXMudmlld1t0KzFdPTI1NSZlKSxpJiYodGhpcy5vZmZzZXQrPTIpLHRoaXN9LHMud3JpdGVVSW50MTY9cy53cml0ZVVpbnQxNixzLnJlYWRVaW50MTY9ZnVuY3Rpb24oZSl7dmFyIHQsbj12b2lkIDA9PT1lO2lmKG4mJihlPXRoaXMub2Zmc2V0KSwhdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrZStcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKChlPj4+PTApPDB8fGUrMj50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIitlK1wiICgrMikgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9cmV0dXJuIHQ9MCx0aGlzLmxpdHRsZUVuZGlhbj8odD10aGlzLnZpZXdbZV0sdHw9dGhpcy52aWV3W2UrMV08PDgpOih0PXRoaXMudmlld1tlXTw8OCx0fD10aGlzLnZpZXdbZSsxXSksbiYmKHRoaXMub2Zmc2V0Kz0yKSx0fSxzLnJlYWRVSW50MTY9cy5yZWFkVWludDE2LHMud3JpdGVJbnQzMj1mdW5jdGlvbihlLHQpe3ZhciBuLGk9dm9pZCAwPT09dDtpZihpJiYodD10aGlzLm9mZnNldCksIXRoaXMubm9Bc3NlcnQpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlfHxlJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCB2YWx1ZTogXCIrZStcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKGV8PTAsXCJudW1iZXJcIiE9dHlwZW9mIHR8fHQlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrdCtcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKCh0Pj4+PTApPDB8fHQrMD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIit0K1wiICgrMCkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9cmV0dXJuKHQrPTQpPihuPXRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpJiZ0aGlzLnJlc2l6ZSgobio9Mik+dD9uOnQpLHQtPTQsdGhpcy5saXR0bGVFbmRpYW4/KHRoaXMudmlld1t0KzNdPTI1NSZlPj4+MjQsdGhpcy52aWV3W3QrMl09MjU1JmU+Pj4xNix0aGlzLnZpZXdbdCsxXT0yNTUmZT4+PjgsdGhpcy52aWV3W3RdPTI1NSZlKToodGhpcy52aWV3W3RdPTI1NSZlPj4+MjQsdGhpcy52aWV3W3QrMV09MjU1JmU+Pj4xNix0aGlzLnZpZXdbdCsyXT0yNTUmZT4+PjgsdGhpcy52aWV3W3QrM109MjU1JmUpLGkmJih0aGlzLm9mZnNldCs9NCksdGhpc30scy53cml0ZUludD1zLndyaXRlSW50MzIscy5yZWFkSW50MzI9ZnVuY3Rpb24oZSl7dmFyIHQsbj12b2lkIDA9PT1lO2lmKG4mJihlPXRoaXMub2Zmc2V0KSwhdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrZStcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKChlPj4+PTApPDB8fGUrND50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIitlK1wiICgrNCkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9cmV0dXJuIHQ9MCx0aGlzLmxpdHRsZUVuZGlhbj8odD10aGlzLnZpZXdbZSsyXTw8MTYsdHw9dGhpcy52aWV3W2UrMV08PDgsdHw9dGhpcy52aWV3W2VdLHQrPXRoaXMudmlld1tlKzNdPDwyND4+PjApOih0PXRoaXMudmlld1tlKzFdPDwxNix0fD10aGlzLnZpZXdbZSsyXTw8OCx0fD10aGlzLnZpZXdbZSszXSx0Kz10aGlzLnZpZXdbZV08PDI0Pj4+MCksdHw9MCxuJiYodGhpcy5vZmZzZXQrPTQpLHR9LHMucmVhZEludD1zLnJlYWRJbnQzMixzLndyaXRlVWludDMyPWZ1bmN0aW9uKGUsdCl7dmFyIG4saT12b2lkIDA9PT10O2lmKGkmJih0PXRoaXMub2Zmc2V0KSwhdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIHZhbHVlOiBcIitlK1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoZT4+Pj0wLFwibnVtYmVyXCIhPXR5cGVvZiB0fHx0JTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK3QrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigodD4+Pj0wKTwwfHx0KzA+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrdCtcIiAoKzApIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXJldHVybih0Kz00KT4obj10aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKSYmdGhpcy5yZXNpemUoKG4qPTIpPnQ/bjp0KSx0LT00LHRoaXMubGl0dGxlRW5kaWFuPyh0aGlzLnZpZXdbdCszXT0yNTUmZT4+PjI0LHRoaXMudmlld1t0KzJdPTI1NSZlPj4+MTYsdGhpcy52aWV3W3QrMV09MjU1JmU+Pj44LHRoaXMudmlld1t0XT0yNTUmZSk6KHRoaXMudmlld1t0XT0yNTUmZT4+PjI0LHRoaXMudmlld1t0KzFdPTI1NSZlPj4+MTYsdGhpcy52aWV3W3QrMl09MjU1JmU+Pj44LHRoaXMudmlld1t0KzNdPTI1NSZlKSxpJiYodGhpcy5vZmZzZXQrPTQpLHRoaXN9LHMud3JpdGVVSW50MzI9cy53cml0ZVVpbnQzMixzLnJlYWRVaW50MzI9ZnVuY3Rpb24oZSl7dmFyIHQsbj12b2lkIDA9PT1lO2lmKG4mJihlPXRoaXMub2Zmc2V0KSwhdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrZStcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKChlPj4+PTApPDB8fGUrND50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIitlK1wiICgrNCkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9cmV0dXJuIHQ9MCx0aGlzLmxpdHRsZUVuZGlhbj8odD10aGlzLnZpZXdbZSsyXTw8MTYsdHw9dGhpcy52aWV3W2UrMV08PDgsdHw9dGhpcy52aWV3W2VdLHQrPXRoaXMudmlld1tlKzNdPDwyND4+PjApOih0PXRoaXMudmlld1tlKzFdPDwxNix0fD10aGlzLnZpZXdbZSsyXTw8OCx0fD10aGlzLnZpZXdbZSszXSx0Kz10aGlzLnZpZXdbZV08PDI0Pj4+MCksbiYmKHRoaXMub2Zmc2V0Kz00KSx0fSxzLnJlYWRVSW50MzI9cy5yZWFkVWludDMyLGUmJihzLndyaXRlSW50NjQ9ZnVuY3Rpb24odCxuKXt2YXIgaSxyLHMsbz12b2lkIDA9PT1uO2lmKG8mJihuPXRoaXMub2Zmc2V0KSwhdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIj09dHlwZW9mIHQpdD1lLmZyb21OdW1iZXIodCk7ZWxzZSBpZihcInN0cmluZ1wiPT10eXBlb2YgdCl0PWUuZnJvbVN0cmluZyh0KTtlbHNlIGlmKCEodCYmdCBpbnN0YW5jZW9mIGUpKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgdmFsdWU6IFwiK3QrXCIgKG5vdCBhbiBpbnRlZ2VyIG9yIExvbmcpXCIpO2lmKFwibnVtYmVyXCIhPXR5cGVvZiBufHxuJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK24rXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigobj4+Pj0wKTwwfHxuKzA+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrbitcIiAoKzApIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXJldHVyblwibnVtYmVyXCI9PXR5cGVvZiB0P3Q9ZS5mcm9tTnVtYmVyKHQpOlwic3RyaW5nXCI9PXR5cGVvZiB0JiYodD1lLmZyb21TdHJpbmcodCkpLChuKz04KT4oaT10aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKSYmdGhpcy5yZXNpemUoKGkqPTIpPm4/aTpuKSxuLT04LHI9dC5sb3cscz10LmhpZ2gsdGhpcy5saXR0bGVFbmRpYW4/KHRoaXMudmlld1tuKzNdPTI1NSZyPj4+MjQsdGhpcy52aWV3W24rMl09MjU1JnI+Pj4xNix0aGlzLnZpZXdbbisxXT0yNTUmcj4+PjgsdGhpcy52aWV3W25dPTI1NSZyLG4rPTQsdGhpcy52aWV3W24rM109MjU1JnM+Pj4yNCx0aGlzLnZpZXdbbisyXT0yNTUmcz4+PjE2LHRoaXMudmlld1tuKzFdPTI1NSZzPj4+OCx0aGlzLnZpZXdbbl09MjU1JnMpOih0aGlzLnZpZXdbbl09MjU1JnM+Pj4yNCx0aGlzLnZpZXdbbisxXT0yNTUmcz4+PjE2LHRoaXMudmlld1tuKzJdPTI1NSZzPj4+OCx0aGlzLnZpZXdbbiszXT0yNTUmcyxuKz00LHRoaXMudmlld1tuXT0yNTUmcj4+PjI0LHRoaXMudmlld1tuKzFdPTI1NSZyPj4+MTYsdGhpcy52aWV3W24rMl09MjU1JnI+Pj44LHRoaXMudmlld1tuKzNdPTI1NSZyKSxvJiYodGhpcy5vZmZzZXQrPTgpLHRoaXN9LHMud3JpdGVMb25nPXMud3JpdGVJbnQ2NCxzLnJlYWRJbnQ2ND1mdW5jdGlvbih0KXt2YXIgbixpLHIscz12b2lkIDA9PT10O2lmKHMmJih0PXRoaXMub2Zmc2V0KSwhdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIHR8fHQlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrdCtcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKCh0Pj4+PTApPDB8fHQrOD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIit0K1wiICgrOCkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9cmV0dXJuIG49MCxpPTAsdGhpcy5saXR0bGVFbmRpYW4/KG49dGhpcy52aWV3W3QrMl08PDE2LG58PXRoaXMudmlld1t0KzFdPDw4LG58PXRoaXMudmlld1t0XSxuKz10aGlzLnZpZXdbdCszXTw8MjQ+Pj4wLHQrPTQsaT10aGlzLnZpZXdbdCsyXTw8MTYsaXw9dGhpcy52aWV3W3QrMV08PDgsaXw9dGhpcy52aWV3W3RdLGkrPXRoaXMudmlld1t0KzNdPDwyND4+PjApOihpPXRoaXMudmlld1t0KzFdPDwxNixpfD10aGlzLnZpZXdbdCsyXTw8OCxpfD10aGlzLnZpZXdbdCszXSxpKz10aGlzLnZpZXdbdF08PDI0Pj4+MCx0Kz00LG49dGhpcy52aWV3W3QrMV08PDE2LG58PXRoaXMudmlld1t0KzJdPDw4LG58PXRoaXMudmlld1t0KzNdLG4rPXRoaXMudmlld1t0XTw8MjQ+Pj4wKSxyPW5ldyBlKG4saSwhMSkscyYmKHRoaXMub2Zmc2V0Kz04KSxyfSxzLnJlYWRMb25nPXMucmVhZEludDY0LHMud3JpdGVVaW50NjQ9ZnVuY3Rpb24odCxuKXt2YXIgaSxyLHMsbz12b2lkIDA9PT1uO2lmKG8mJihuPXRoaXMub2Zmc2V0KSwhdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIj09dHlwZW9mIHQpdD1lLmZyb21OdW1iZXIodCk7ZWxzZSBpZihcInN0cmluZ1wiPT10eXBlb2YgdCl0PWUuZnJvbVN0cmluZyh0KTtlbHNlIGlmKCEodCYmdCBpbnN0YW5jZW9mIGUpKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgdmFsdWU6IFwiK3QrXCIgKG5vdCBhbiBpbnRlZ2VyIG9yIExvbmcpXCIpO2lmKFwibnVtYmVyXCIhPXR5cGVvZiBufHxuJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK24rXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigobj4+Pj0wKTwwfHxuKzA+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrbitcIiAoKzApIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXJldHVyblwibnVtYmVyXCI9PXR5cGVvZiB0P3Q9ZS5mcm9tTnVtYmVyKHQpOlwic3RyaW5nXCI9PXR5cGVvZiB0JiYodD1lLmZyb21TdHJpbmcodCkpLChuKz04KT4oaT10aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKSYmdGhpcy5yZXNpemUoKGkqPTIpPm4/aTpuKSxuLT04LHI9dC5sb3cscz10LmhpZ2gsdGhpcy5saXR0bGVFbmRpYW4/KHRoaXMudmlld1tuKzNdPTI1NSZyPj4+MjQsdGhpcy52aWV3W24rMl09MjU1JnI+Pj4xNix0aGlzLnZpZXdbbisxXT0yNTUmcj4+PjgsdGhpcy52aWV3W25dPTI1NSZyLG4rPTQsdGhpcy52aWV3W24rM109MjU1JnM+Pj4yNCx0aGlzLnZpZXdbbisyXT0yNTUmcz4+PjE2LHRoaXMudmlld1tuKzFdPTI1NSZzPj4+OCx0aGlzLnZpZXdbbl09MjU1JnMpOih0aGlzLnZpZXdbbl09MjU1JnM+Pj4yNCx0aGlzLnZpZXdbbisxXT0yNTUmcz4+PjE2LHRoaXMudmlld1tuKzJdPTI1NSZzPj4+OCx0aGlzLnZpZXdbbiszXT0yNTUmcyxuKz00LHRoaXMudmlld1tuXT0yNTUmcj4+PjI0LHRoaXMudmlld1tuKzFdPTI1NSZyPj4+MTYsdGhpcy52aWV3W24rMl09MjU1JnI+Pj44LHRoaXMudmlld1tuKzNdPTI1NSZyKSxvJiYodGhpcy5vZmZzZXQrPTgpLHRoaXN9LHMud3JpdGVVSW50NjQ9cy53cml0ZVVpbnQ2NCxzLnJlYWRVaW50NjQ9ZnVuY3Rpb24odCl7dmFyIG4saSxyLHM9dm9pZCAwPT09dDtpZihzJiYodD10aGlzLm9mZnNldCksIXRoaXMubm9Bc3NlcnQpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiB0fHx0JTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK3QrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigodD4+Pj0wKTwwfHx0Kzg+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrdCtcIiAoKzgpIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXJldHVybiBuPTAsaT0wLHRoaXMubGl0dGxlRW5kaWFuPyhuPXRoaXMudmlld1t0KzJdPDwxNixufD10aGlzLnZpZXdbdCsxXTw8OCxufD10aGlzLnZpZXdbdF0sbis9dGhpcy52aWV3W3QrM108PDI0Pj4+MCx0Kz00LGk9dGhpcy52aWV3W3QrMl08PDE2LGl8PXRoaXMudmlld1t0KzFdPDw4LGl8PXRoaXMudmlld1t0XSxpKz10aGlzLnZpZXdbdCszXTw8MjQ+Pj4wKTooaT10aGlzLnZpZXdbdCsxXTw8MTYsaXw9dGhpcy52aWV3W3QrMl08PDgsaXw9dGhpcy52aWV3W3QrM10saSs9dGhpcy52aWV3W3RdPDwyND4+PjAsdCs9NCxuPXRoaXMudmlld1t0KzFdPDwxNixufD10aGlzLnZpZXdbdCsyXTw8OCxufD10aGlzLnZpZXdbdCszXSxuKz10aGlzLnZpZXdbdF08PDI0Pj4+MCkscj1uZXcgZShuLGksITApLHMmJih0aGlzLm9mZnNldCs9OCkscn0scy5yZWFkVUludDY0PXMucmVhZFVpbnQ2NCkscy53cml0ZUZsb2F0MzI9ZnVuY3Rpb24oZSx0KXt2YXIgbixpPXZvaWQgMD09PXQ7aWYoaSYmKHQ9dGhpcy5vZmZzZXQpLCF0aGlzLm5vQXNzZXJ0KXtpZihcIm51bWJlclwiIT10eXBlb2YgZSl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIHZhbHVlOiBcIitlK1wiIChub3QgYSBudW1iZXIpXCIpO2lmKFwibnVtYmVyXCIhPXR5cGVvZiB0fHx0JTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK3QrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigodD4+Pj0wKTwwfHx0KzA+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrdCtcIiAoKzApIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXJldHVybih0Kz00KT4obj10aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKSYmdGhpcy5yZXNpemUoKG4qPTIpPnQ/bjp0KSx0LT00LHIodGhpcy52aWV3LGUsdCx0aGlzLmxpdHRsZUVuZGlhbiwyMyw0KSxpJiYodGhpcy5vZmZzZXQrPTQpLHRoaXN9LHMud3JpdGVGbG9hdD1zLndyaXRlRmxvYXQzMixzLnJlYWRGbG9hdDMyPWZ1bmN0aW9uKGUpe3ZhciB0LG49dm9pZCAwPT09ZTtpZihuJiYoZT10aGlzLm9mZnNldCksIXRoaXMubm9Bc3NlcnQpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlfHxlJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK2UrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigoZT4+Pj0wKTwwfHxlKzQ+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrZStcIiAoKzQpIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXJldHVybiB0PWkodGhpcy52aWV3LGUsdGhpcy5saXR0bGVFbmRpYW4sMjMsNCksbiYmKHRoaXMub2Zmc2V0Kz00KSx0fSxzLnJlYWRGbG9hdD1zLnJlYWRGbG9hdDMyLHMud3JpdGVGbG9hdDY0PWZ1bmN0aW9uKGUsdCl7dmFyIG4saT12b2lkIDA9PT10O2lmKGkmJih0PXRoaXMub2Zmc2V0KSwhdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGUpdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCB2YWx1ZTogXCIrZStcIiAobm90IGEgbnVtYmVyKVwiKTtpZihcIm51bWJlclwiIT10eXBlb2YgdHx8dCUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiBcIit0K1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoKHQ+Pj49MCk8MHx8dCswPnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiAwIDw9IFwiK3QrXCIgKCswKSA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX1yZXR1cm4odCs9OCk+KG49dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCkmJnRoaXMucmVzaXplKChuKj0yKT50P246dCksdC09OCxyKHRoaXMudmlldyxlLHQsdGhpcy5saXR0bGVFbmRpYW4sNTIsOCksaSYmKHRoaXMub2Zmc2V0Kz04KSx0aGlzfSxzLndyaXRlRG91YmxlPXMud3JpdGVGbG9hdDY0LHMucmVhZEZsb2F0NjQ9ZnVuY3Rpb24oZSl7dmFyIHQsbj12b2lkIDA9PT1lO2lmKG4mJihlPXRoaXMub2Zmc2V0KSwhdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrZStcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKChlPj4+PTApPDB8fGUrOD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIitlK1wiICgrOCkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9cmV0dXJuIHQ9aSh0aGlzLnZpZXcsZSx0aGlzLmxpdHRsZUVuZGlhbiw1Miw4KSxuJiYodGhpcy5vZmZzZXQrPTgpLHR9LHMucmVhZERvdWJsZT1zLnJlYWRGbG9hdDY0LGguTUFYX1ZBUklOVDMyX0JZVEVTPTUsaC5jYWxjdWxhdGVWYXJpbnQzMj1mdW5jdGlvbihlKXtyZXR1cm4oZT4+Pj0wKTwxMjg/MTplPDE2Mzg0PzI6MTw8MjE+ZT8zOjE8PDI4PmU/NDo1fSxoLnppZ1phZ0VuY29kZTMyPWZ1bmN0aW9uKGUpe3JldHVybigoZXw9MCk8PDFeZT4+MzEpPj4+MH0saC56aWdaYWdEZWNvZGUzMj1mdW5jdGlvbihlKXtyZXR1cm4gMHxlPj4+MV4tKDEmZSl9LHMud3JpdGVWYXJpbnQzMj1mdW5jdGlvbihlLHQpe3ZhciBuLGkscixzPXZvaWQgMD09PXQ7aWYocyYmKHQ9dGhpcy5vZmZzZXQpLCF0aGlzLm5vQXNzZXJ0KXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZSUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgdmFsdWU6IFwiK2UrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZihlfD0wLFwibnVtYmVyXCIhPXR5cGVvZiB0fHx0JTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK3QrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigodD4+Pj0wKTwwfHx0KzA+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrdCtcIiAoKzApIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfWZvcigodCs9aT1oLmNhbGN1bGF0ZVZhcmludDMyKGUpKT4ocj10aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKSYmdGhpcy5yZXNpemUoKHIqPTIpPnQ/cjp0KSx0LT1pLGU+Pj49MDtlPj0xMjg7KW49MTI4fDEyNyZlLHRoaXMudmlld1t0KytdPW4sZT4+Pj03O3JldHVybiB0aGlzLnZpZXdbdCsrXT1lLHM/KHRoaXMub2Zmc2V0PXQsdGhpcyk6aX0scy53cml0ZVZhcmludDMyWmlnWmFnPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMud3JpdGVWYXJpbnQzMihoLnppZ1phZ0VuY29kZTMyKGUpLHQpfSxzLnJlYWRWYXJpbnQzMj1mdW5jdGlvbihlKXt2YXIgdCxuLGkscixzPXZvaWQgMD09PWU7aWYocyYmKGU9dGhpcy5vZmZzZXQpLCF0aGlzLm5vQXNzZXJ0KXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZSUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiBcIitlK1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoKGU+Pj49MCk8MHx8ZSsxPnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiAwIDw9IFwiK2UrXCIgKCsxKSA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX1uPTAsaT0wO2Rve2lmKCF0aGlzLm5vQXNzZXJ0JiZlPnRoaXMubGltaXQpdGhyb3cocj1FcnJvcihcIlRydW5jYXRlZFwiKSkudHJ1bmNhdGVkPSEwLHI7dD10aGlzLnZpZXdbZSsrXSxuPDUmJihpfD0oMTI3JnQpPDw3Km4pLCsrbn13aGlsZSgwIT0oMTI4JnQpKTtyZXR1cm4gaXw9MCxzPyh0aGlzLm9mZnNldD1lLGkpOnt2YWx1ZTppLGxlbmd0aDpufX0scy5yZWFkVmFyaW50MzJaaWdaYWc9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5yZWFkVmFyaW50MzIoZSk7cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIHQ/dC52YWx1ZT1oLnppZ1phZ0RlY29kZTMyKHQudmFsdWUpOnQ9aC56aWdaYWdEZWNvZGUzMih0KSx0fSxlJiYoaC5NQVhfVkFSSU5UNjRfQllURVM9MTAsaC5jYWxjdWxhdGVWYXJpbnQ2ND1mdW5jdGlvbih0KXtcIm51bWJlclwiPT10eXBlb2YgdD90PWUuZnJvbU51bWJlcih0KTpcInN0cmluZ1wiPT10eXBlb2YgdCYmKHQ9ZS5mcm9tU3RyaW5nKHQpKTt2YXIgbj10LnRvSW50KCk+Pj4wLGk9dC5zaGlmdFJpZ2h0VW5zaWduZWQoMjgpLnRvSW50KCk+Pj4wLHI9dC5zaGlmdFJpZ2h0VW5zaWduZWQoNTYpLnRvSW50KCk+Pj4wO3JldHVybiAwPT1yPzA9PWk/bjwxNjM4ND9uPDEyOD8xOjI6MTw8MjE+bj8zOjQ6aTwxNjM4ND9pPDEyOD81OjY6MTw8MjE+aT83Ojg6cjwxMjg/OToxMH0saC56aWdaYWdFbmNvZGU2ND1mdW5jdGlvbih0KXtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgdD90PWUuZnJvbU51bWJlcih0LCExKTpcInN0cmluZ1wiPT10eXBlb2YgdD90PWUuZnJvbVN0cmluZyh0LCExKTohMSE9PXQudW5zaWduZWQmJih0PXQudG9TaWduZWQoKSksdC5zaGlmdExlZnQoMSkueG9yKHQuc2hpZnRSaWdodCg2MykpLnRvVW5zaWduZWQoKX0saC56aWdaYWdEZWNvZGU2ND1mdW5jdGlvbih0KXtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgdD90PWUuZnJvbU51bWJlcih0LCExKTpcInN0cmluZ1wiPT10eXBlb2YgdD90PWUuZnJvbVN0cmluZyh0LCExKTohMSE9PXQudW5zaWduZWQmJih0PXQudG9TaWduZWQoKSksdC5zaGlmdFJpZ2h0VW5zaWduZWQoMSkueG9yKHQuYW5kKGUuT05FKS50b1NpZ25lZCgpLm5lZ2F0ZSgpKS50b1NpZ25lZCgpfSxzLndyaXRlVmFyaW50NjQ9ZnVuY3Rpb24odCxuKXt2YXIgaSxyLHMsbyxhLHU9dm9pZCAwPT09bjtpZih1JiYobj10aGlzLm9mZnNldCksIXRoaXMubm9Bc3NlcnQpe2lmKFwibnVtYmVyXCI9PXR5cGVvZiB0KXQ9ZS5mcm9tTnVtYmVyKHQpO2Vsc2UgaWYoXCJzdHJpbmdcIj09dHlwZW9mIHQpdD1lLmZyb21TdHJpbmcodCk7ZWxzZSBpZighKHQmJnQgaW5zdGFuY2VvZiBlKSl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIHZhbHVlOiBcIit0K1wiIChub3QgYW4gaW50ZWdlciBvciBMb25nKVwiKTtpZihcIm51bWJlclwiIT10eXBlb2Ygbnx8biUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiBcIituK1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoKG4+Pj49MCk8MHx8biswPnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiAwIDw9IFwiK24rXCIgKCswKSA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX1zd2l0Y2goXCJudW1iZXJcIj09dHlwZW9mIHQ/dD1lLmZyb21OdW1iZXIodCwhMSk6XCJzdHJpbmdcIj09dHlwZW9mIHQ/dD1lLmZyb21TdHJpbmcodCwhMSk6ITEhPT10LnVuc2lnbmVkJiYodD10LnRvU2lnbmVkKCkpLGk9aC5jYWxjdWxhdGVWYXJpbnQ2NCh0KSxyPXQudG9JbnQoKT4+PjAscz10LnNoaWZ0UmlnaHRVbnNpZ25lZCgyOCkudG9JbnQoKT4+PjAsbz10LnNoaWZ0UmlnaHRVbnNpZ25lZCg1NikudG9JbnQoKT4+PjAsKG4rPWkpPihhPXRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpJiZ0aGlzLnJlc2l6ZSgoYSo9Mik+bj9hOm4pLG4tPWksaSl7Y2FzZSAxMDp0aGlzLnZpZXdbbis5XT0xJm8+Pj43O2Nhc2UgOTp0aGlzLnZpZXdbbis4XT05IT09aT8xMjh8bzoxMjcmbztjYXNlIDg6dGhpcy52aWV3W24rN109OCE9PWk/MTI4fHM+Pj4yMToxMjcmcz4+PjIxO2Nhc2UgNzp0aGlzLnZpZXdbbis2XT03IT09aT8xMjh8cz4+PjE0OjEyNyZzPj4+MTQ7Y2FzZSA2OnRoaXMudmlld1tuKzVdPTYhPT1pPzEyOHxzPj4+NzoxMjcmcz4+Pjc7Y2FzZSA1OnRoaXMudmlld1tuKzRdPTUhPT1pPzEyOHxzOjEyNyZzO2Nhc2UgNDp0aGlzLnZpZXdbbiszXT00IT09aT8xMjh8cj4+PjIxOjEyNyZyPj4+MjE7Y2FzZSAzOnRoaXMudmlld1tuKzJdPTMhPT1pPzEyOHxyPj4+MTQ6MTI3JnI+Pj4xNDtjYXNlIDI6dGhpcy52aWV3W24rMV09MiE9PWk/MTI4fHI+Pj43OjEyNyZyPj4+NztjYXNlIDE6dGhpcy52aWV3W25dPTEhPT1pPzEyOHxyOjEyNyZyfXJldHVybiB1Pyh0aGlzLm9mZnNldCs9aSx0aGlzKTppfSxzLndyaXRlVmFyaW50NjRaaWdaYWc9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy53cml0ZVZhcmludDY0KGguemlnWmFnRW5jb2RlNjQoZSksdCl9LHMucmVhZFZhcmludDY0PWZ1bmN0aW9uKHQpe3ZhciBuLGkscixzLG8sYSx1PXZvaWQgMD09PXQ7aWYodSYmKHQ9dGhpcy5vZmZzZXQpLCF0aGlzLm5vQXNzZXJ0KXtpZihcIm51bWJlclwiIT10eXBlb2YgdHx8dCUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiBcIit0K1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoKHQ+Pj49MCk8MHx8dCsxPnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiAwIDw9IFwiK3QrXCIgKCsxKSA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX1pZihuPXQsaT0wLHI9MCxzPTAsbz0wLGk9MTI3JihvPXRoaXMudmlld1t0KytdKSwxMjgmbyYmKGl8PSgxMjcmKG89dGhpcy52aWV3W3QrK10pKTw8NywoMTI4Jm98fHRoaXMubm9Bc3NlcnQmJnZvaWQgMD09PW8pJiYoaXw9KDEyNyYobz10aGlzLnZpZXdbdCsrXSkpPDwxNCwoMTI4Jm98fHRoaXMubm9Bc3NlcnQmJnZvaWQgMD09PW8pJiYoaXw9KDEyNyYobz10aGlzLnZpZXdbdCsrXSkpPDwyMSwoMTI4Jm98fHRoaXMubm9Bc3NlcnQmJnZvaWQgMD09PW8pJiYocj0xMjcmKG89dGhpcy52aWV3W3QrK10pLCgxMjgmb3x8dGhpcy5ub0Fzc2VydCYmdm9pZCAwPT09bykmJihyfD0oMTI3JihvPXRoaXMudmlld1t0KytdKSk8PDcsKDEyOCZvfHx0aGlzLm5vQXNzZXJ0JiZ2b2lkIDA9PT1vKSYmKHJ8PSgxMjcmKG89dGhpcy52aWV3W3QrK10pKTw8MTQsKDEyOCZvfHx0aGlzLm5vQXNzZXJ0JiZ2b2lkIDA9PT1vKSYmKHJ8PSgxMjcmKG89dGhpcy52aWV3W3QrK10pKTw8MjEsKDEyOCZvfHx0aGlzLm5vQXNzZXJ0JiZ2b2lkIDA9PT1vKSYmKHM9MTI3JihvPXRoaXMudmlld1t0KytdKSwoMTI4Jm98fHRoaXMubm9Bc3NlcnQmJnZvaWQgMD09PW8pJiYoc3w9KDEyNyYobz10aGlzLnZpZXdbdCsrXSkpPDw3LDEyOCZvfHx0aGlzLm5vQXNzZXJ0JiZ2b2lkIDA9PT1vKSkpKSkpKSkpKXRocm93IEVycm9yKFwiQnVmZmVyIG92ZXJydW5cIik7cmV0dXJuIGE9ZS5mcm9tQml0cyhpfHI8PDI4LHI+Pj40fHM8PDI0LCExKSx1Pyh0aGlzLm9mZnNldD10LGEpOnt2YWx1ZTphLGxlbmd0aDp0LW59fSxzLnJlYWRWYXJpbnQ2NFppZ1phZz1mdW5jdGlvbih0KXt2YXIgbj10aGlzLnJlYWRWYXJpbnQ2NCh0KTtyZXR1cm4gbiYmbi52YWx1ZSBpbnN0YW5jZW9mIGU/bi52YWx1ZT1oLnppZ1phZ0RlY29kZTY0KG4udmFsdWUpOm49aC56aWdaYWdEZWNvZGU2NChuKSxufSkscy53cml0ZUNTdHJpbmc9ZnVuY3Rpb24oZSxuKXt2YXIgaSxyLHMsbz12b2lkIDA9PT1uO2lmKG8mJihuPXRoaXMub2Zmc2V0KSxyPWUubGVuZ3RoLCF0aGlzLm5vQXNzZXJ0KXtpZihcInN0cmluZ1wiIT10eXBlb2YgZSl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIHN0cjogTm90IGEgc3RyaW5nXCIpO2ZvcihpPTA7cj5pOysraSlpZigwPT09ZS5jaGFyQ29kZUF0KGkpKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIHN0cjogQ29udGFpbnMgTlVMTC1jaGFyYWN0ZXJzXCIpO2lmKFwibnVtYmVyXCIhPXR5cGVvZiBufHxuJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK24rXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigobj4+Pj0wKTwwfHxuKzA+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrbitcIiAoKzApIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXJldHVybiByPWMuY2FsY3VsYXRlVVRGMTZhc1VURjgodChlKSlbMV0sbis9cisxLHM9dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCxuPnMmJnRoaXMucmVzaXplKChzKj0yKT5uP3M6biksbi09cisxLGMuZW5jb2RlVVRGMTZ0b1VURjgodChlKSxmdW5jdGlvbihlKXt0aGlzLnZpZXdbbisrXT1lfS5iaW5kKHRoaXMpKSx0aGlzLnZpZXdbbisrXT0wLG8/KHRoaXMub2Zmc2V0PW4sdGhpcyk6cn0scy5yZWFkQ1N0cmluZz1mdW5jdGlvbihlKXt2YXIgdCxpLHIscz12b2lkIDA9PT1lO2lmKHMmJihlPXRoaXMub2Zmc2V0KSwhdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrZStcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKChlPj4+PTApPDB8fGUrMT50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIitlK1wiICgrMSkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9cmV0dXJuIHQ9ZSxyPS0xLGMuZGVjb2RlVVRGOHRvVVRGMTYoZnVuY3Rpb24oKXtpZigwPT09cilyZXR1cm4gbnVsbDtpZihlPj10aGlzLmxpbWl0KXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIHJhbmdlOiBUcnVuY2F0ZWQgZGF0YSwgXCIrZStcIiA8IFwiK3RoaXMubGltaXQpO3JldHVybiAwPT09KHI9dGhpcy52aWV3W2UrK10pP251bGw6cn0uYmluZCh0aGlzKSxpPW4oKSwhMCkscz8odGhpcy5vZmZzZXQ9ZSxpKCkpOntzdHJpbmc6aSgpLGxlbmd0aDplLXR9fSxzLndyaXRlSVN0cmluZz1mdW5jdGlvbihlLG4pe3ZhciBpLHIscyxvPXZvaWQgMD09PW47aWYobyYmKG49dGhpcy5vZmZzZXQpLCF0aGlzLm5vQXNzZXJ0KXtpZihcInN0cmluZ1wiIT10eXBlb2YgZSl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIHN0cjogTm90IGEgc3RyaW5nXCIpO2lmKFwibnVtYmVyXCIhPXR5cGVvZiBufHxuJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK24rXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigobj4+Pj0wKTwwfHxuKzA+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrbitcIiAoKzApIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfWlmKHI9bixpPWMuY2FsY3VsYXRlVVRGMTZhc1VURjgodChlKSx0aGlzLm5vQXNzZXJ0KVsxXSxuKz00K2kscz10aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoLG4+cyYmdGhpcy5yZXNpemUoKHMqPTIpPm4/czpuKSxuLT00K2ksdGhpcy5saXR0bGVFbmRpYW4/KHRoaXMudmlld1tuKzNdPTI1NSZpPj4+MjQsdGhpcy52aWV3W24rMl09MjU1Jmk+Pj4xNix0aGlzLnZpZXdbbisxXT0yNTUmaT4+PjgsdGhpcy52aWV3W25dPTI1NSZpKToodGhpcy52aWV3W25dPTI1NSZpPj4+MjQsdGhpcy52aWV3W24rMV09MjU1Jmk+Pj4xNix0aGlzLnZpZXdbbisyXT0yNTUmaT4+PjgsdGhpcy52aWV3W24rM109MjU1JmkpLG4rPTQsYy5lbmNvZGVVVEYxNnRvVVRGOCh0KGUpLGZ1bmN0aW9uKGUpe3RoaXMudmlld1tuKytdPWV9LmJpbmQodGhpcykpLG4hPT1yKzQraSl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCByYW5nZTogVHJ1bmNhdGVkIGRhdGEsIFwiK24rXCIgPT0gXCIrKG4rNCtpKSk7cmV0dXJuIG8/KHRoaXMub2Zmc2V0PW4sdGhpcyk6bi1yfSxzLnJlYWRJU3RyaW5nPWZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyPXZvaWQgMD09PWU7aWYociYmKGU9dGhpcy5vZmZzZXQpLCF0aGlzLm5vQXNzZXJ0KXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZSUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiBcIitlK1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoKGU+Pj49MCk8MHx8ZSs0PnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiAwIDw9IFwiK2UrXCIgKCs0KSA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX1yZXR1cm4gdD1lLG49dGhpcy5yZWFkVWludDMyKGUpLGk9dGhpcy5yZWFkVVRGOFN0cmluZyhuLGguTUVUUklDU19CWVRFUyxlKz00KSxlKz1pLmxlbmd0aCxyPyh0aGlzLm9mZnNldD1lLGkuc3RyaW5nKTp7c3RyaW5nOmkuc3RyaW5nLGxlbmd0aDplLXR9fSxoLk1FVFJJQ1NfQ0hBUlM9XCJjXCIsaC5NRVRSSUNTX0JZVEVTPVwiYlwiLHMud3JpdGVVVEY4U3RyaW5nPWZ1bmN0aW9uKGUsbil7dmFyIGkscixzLG89dm9pZCAwPT09bjtpZihvJiYobj10aGlzLm9mZnNldCksIXRoaXMubm9Bc3NlcnQpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBufHxuJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK24rXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigobj4+Pj0wKTwwfHxuKzA+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrbitcIiAoKzApIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXJldHVybiByPW4saT1jLmNhbGN1bGF0ZVVURjE2YXNVVEY4KHQoZSkpWzFdLG4rPWkscz10aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoLG4+cyYmdGhpcy5yZXNpemUoKHMqPTIpPm4/czpuKSxuLT1pLGMuZW5jb2RlVVRGMTZ0b1VURjgodChlKSxmdW5jdGlvbihlKXt0aGlzLnZpZXdbbisrXT1lfS5iaW5kKHRoaXMpKSxvPyh0aGlzLm9mZnNldD1uLHRoaXMpOm4tcn0scy53cml0ZVN0cmluZz1zLndyaXRlVVRGOFN0cmluZyxoLmNhbGN1bGF0ZVVURjhDaGFycz1mdW5jdGlvbihlKXtyZXR1cm4gYy5jYWxjdWxhdGVVVEYxNmFzVVRGOCh0KGUpKVswXX0saC5jYWxjdWxhdGVVVEY4Qnl0ZXM9ZnVuY3Rpb24oZSl7cmV0dXJuIGMuY2FsY3VsYXRlVVRGMTZhc1VURjgodChlKSlbMV19LGguY2FsY3VsYXRlU3RyaW5nPWguY2FsY3VsYXRlVVRGOEJ5dGVzLHMucmVhZFVURjhTdHJpbmc9ZnVuY3Rpb24oZSx0LGkpe3ZhciByLHMsbyxhLHU7aWYoXCJudW1iZXJcIj09dHlwZW9mIHQmJihpPXQsdD12b2lkIDApLChyPXZvaWQgMD09PWkpJiYoaT10aGlzLm9mZnNldCksdm9pZCAwPT09dCYmKHQ9aC5NRVRSSUNTX0NIQVJTKSwhdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGxlbmd0aDogXCIrZStcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKGV8PTAsXCJudW1iZXJcIiE9dHlwZW9mIGl8fGklMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIraStcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKChpPj4+PTApPDB8fGkrMD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIitpK1wiICgrMCkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9aWYobz0wLGE9aSx0PT09aC5NRVRSSUNTX0NIQVJTKXtpZihzPW4oKSxjLmRlY29kZVVURjgoZnVuY3Rpb24oKXtyZXR1cm4gZT5vJiZpPHRoaXMubGltaXQ/dGhpcy52aWV3W2krK106bnVsbH0uYmluZCh0aGlzKSwoZnVuY3Rpb24oZSl7KytvLGMuVVRGOHRvVVRGMTYoZSxzKX0pKSxvIT09ZSl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCByYW5nZTogVHJ1bmNhdGVkIGRhdGEsIFwiK28rXCIgPT0gXCIrZSk7cmV0dXJuIHI/KHRoaXMub2Zmc2V0PWkscygpKTp7c3RyaW5nOnMoKSxsZW5ndGg6aS1hfX1pZih0PT09aC5NRVRSSUNTX0JZVEVTKXtpZighdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGl8fGklMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIraStcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKChpPj4+PTApPDB8fGkrZT50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIitpK1wiICgrXCIrZStcIikgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9aWYodT1pK2UsYy5kZWNvZGVVVEY4dG9VVEYxNihmdW5jdGlvbigpe3JldHVybiB1Pmk/dGhpcy52aWV3W2krK106bnVsbH0uYmluZCh0aGlzKSxzPW4oKSx0aGlzLm5vQXNzZXJ0KSxpIT09dSl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCByYW5nZTogVHJ1bmNhdGVkIGRhdGEsIFwiK2krXCIgPT0gXCIrdSk7cmV0dXJuIHI/KHRoaXMub2Zmc2V0PWkscygpKTp7c3RyaW5nOnMoKSxsZW5ndGg6aS1hfX10aHJvdyBUeXBlRXJyb3IoXCJVbnN1cHBvcnRlZCBtZXRyaWNzOiBcIit0KX0scy5yZWFkU3RyaW5nPXMucmVhZFVURjhTdHJpbmcscy53cml0ZVZTdHJpbmc9ZnVuY3Rpb24oZSxuKXt2YXIgaSxyLHMsbyxhPXZvaWQgMD09PW47aWYoYSYmKG49dGhpcy5vZmZzZXQpLCF0aGlzLm5vQXNzZXJ0KXtpZihcInN0cmluZ1wiIT10eXBlb2YgZSl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIHN0cjogTm90IGEgc3RyaW5nXCIpO2lmKFwibnVtYmVyXCIhPXR5cGVvZiBufHxuJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK24rXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigobj4+Pj0wKTwwfHxuKzA+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrbitcIiAoKzApIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfWlmKHM9bixpPWMuY2FsY3VsYXRlVVRGMTZhc1VURjgodChlKSx0aGlzLm5vQXNzZXJ0KVsxXSxyPWguY2FsY3VsYXRlVmFyaW50MzIoaSksbis9citpLG89dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCxuPm8mJnRoaXMucmVzaXplKChvKj0yKT5uP286biksbi09citpLG4rPXRoaXMud3JpdGVWYXJpbnQzMihpLG4pLGMuZW5jb2RlVVRGMTZ0b1VURjgodChlKSxmdW5jdGlvbihlKXt0aGlzLnZpZXdbbisrXT1lfS5iaW5kKHRoaXMpKSxuIT09cytpK3IpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgcmFuZ2U6IFRydW5jYXRlZCBkYXRhLCBcIituK1wiID09IFwiKyhuK2krcikpO3JldHVybiBhPyh0aGlzLm9mZnNldD1uLHRoaXMpOm4tc30scy5yZWFkVlN0cmluZz1mdW5jdGlvbihlKXt2YXIgdCxuLGkscj12b2lkIDA9PT1lO2lmKHImJihlPXRoaXMub2Zmc2V0KSwhdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrZStcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKChlPj4+PTApPDB8fGUrMT50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIitlK1wiICgrMSkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9cmV0dXJuIHQ9ZSxuPXRoaXMucmVhZFZhcmludDMyKGUpLGk9dGhpcy5yZWFkVVRGOFN0cmluZyhuLnZhbHVlLGguTUVUUklDU19CWVRFUyxlKz1uLmxlbmd0aCksZSs9aS5sZW5ndGgscj8odGhpcy5vZmZzZXQ9ZSxpLnN0cmluZyk6e3N0cmluZzppLnN0cmluZyxsZW5ndGg6ZS10fX0scy5hcHBlbmQ9ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIscztpZigoXCJudW1iZXJcIj09dHlwZW9mIHR8fFwic3RyaW5nXCIhPXR5cGVvZiB0KSYmKG49dCx0PXZvaWQgMCksKGk9dm9pZCAwPT09bikmJihuPXRoaXMub2Zmc2V0KSwhdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIG58fG4lMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrbitcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKChuPj4+PTApPDB8fG4rMD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIituK1wiICgrMCkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9cmV0dXJuIGUgaW5zdGFuY2VvZiBofHwoZT1oLndyYXAoZSx0KSksKHI9ZS5saW1pdC1lLm9mZnNldCk8PTB8fCgobis9cik+KHM9dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCkmJnRoaXMucmVzaXplKChzKj0yKT5uP3M6biksbi09cix0aGlzLnZpZXcuc2V0KGUudmlldy5zdWJhcnJheShlLm9mZnNldCxlLmxpbWl0KSxuKSxlLm9mZnNldCs9cixpJiYodGhpcy5vZmZzZXQrPXIpKSx0aGlzfSxzLmFwcGVuZFRvPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuYXBwZW5kKHRoaXMsdCksdGhpc30scy5hc3NlcnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMubm9Bc3NlcnQ9IWUsdGhpc30scy5jYXBhY2l0eT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RofSxzLmNsZWFyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub2Zmc2V0PTAsdGhpcy5saW1pdD10aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoLHRoaXMubWFya2VkT2Zmc2V0PS0xLHRoaXN9LHMuY2xvbmU9ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IGgoMCx0aGlzLmxpdHRsZUVuZGlhbix0aGlzLm5vQXNzZXJ0KTtyZXR1cm4gZT8odC5idWZmZXI9bmV3IEFycmF5QnVmZmVyKHRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpLHQudmlldz1uZXcgVWludDhBcnJheSh0LmJ1ZmZlcikpOih0LmJ1ZmZlcj10aGlzLmJ1ZmZlcix0LnZpZXc9dGhpcy52aWV3KSx0Lm9mZnNldD10aGlzLm9mZnNldCx0Lm1hcmtlZE9mZnNldD10aGlzLm1hcmtlZE9mZnNldCx0LmxpbWl0PXRoaXMubGltaXQsdH0scy5jb21wYWN0PWZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyO2lmKHZvaWQgMD09PWUmJihlPXRoaXMub2Zmc2V0KSx2b2lkIDA9PT10JiYodD10aGlzLmxpbWl0KSwhdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGJlZ2luOiBOb3QgYW4gaW50ZWdlclwiKTtpZihlPj4+PTAsXCJudW1iZXJcIiE9dHlwZW9mIHR8fHQlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGVuZDogTm90IGFuIGludGVnZXJcIik7aWYodD4+Pj0wLGU8MHx8ZT50fHx0PnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgcmFuZ2U6IDAgPD0gXCIrZStcIiA8PSBcIit0K1wiIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXJldHVybiAwPT09ZSYmdD09PXRoaXMuYnVmZmVyLmJ5dGVMZW5ndGg/dGhpczowPT0obj10LWUpPyh0aGlzLmJ1ZmZlcj1vLHRoaXMudmlldz1udWxsLHRoaXMubWFya2VkT2Zmc2V0Pj0wJiYodGhpcy5tYXJrZWRPZmZzZXQtPWUpLHRoaXMub2Zmc2V0PTAsdGhpcy5saW1pdD0wLHRoaXMpOihpPW5ldyBBcnJheUJ1ZmZlcihuKSwocj1uZXcgVWludDhBcnJheShpKSkuc2V0KHRoaXMudmlldy5zdWJhcnJheShlLHQpKSx0aGlzLmJ1ZmZlcj1pLHRoaXMudmlldz1yLHRoaXMubWFya2VkT2Zmc2V0Pj0wJiYodGhpcy5tYXJrZWRPZmZzZXQtPWUpLHRoaXMub2Zmc2V0PTAsdGhpcy5saW1pdD1uLHRoaXMpfSxzLmNvcHk9ZnVuY3Rpb24oZSx0KXtpZih2b2lkIDA9PT1lJiYoZT10aGlzLm9mZnNldCksdm9pZCAwPT09dCYmKHQ9dGhpcy5saW1pdCksIXRoaXMubm9Bc3NlcnQpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlfHxlJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBiZWdpbjogTm90IGFuIGludGVnZXJcIik7aWYoZT4+Pj0wLFwibnVtYmVyXCIhPXR5cGVvZiB0fHx0JTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBlbmQ6IE5vdCBhbiBpbnRlZ2VyXCIpO2lmKHQ+Pj49MCxlPDB8fGU+dHx8dD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIHJhbmdlOiAwIDw9IFwiK2UrXCIgPD0gXCIrdCtcIiA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX1pZihlPT09dClyZXR1cm4gbmV3IGgoMCx0aGlzLmxpdHRsZUVuZGlhbix0aGlzLm5vQXNzZXJ0KTt2YXIgbj10LWUsaT1uZXcgaChuLHRoaXMubGl0dGxlRW5kaWFuLHRoaXMubm9Bc3NlcnQpO3JldHVybiBpLm9mZnNldD0wLGkubGltaXQ9bixpLm1hcmtlZE9mZnNldD49MCYmKGkubWFya2VkT2Zmc2V0LT1lKSx0aGlzLmNvcHlUbyhpLDAsZSx0KSxpfSxzLmNvcHlUbz1mdW5jdGlvbihlLHQsbixpKXt2YXIgcixzLG87aWYoIXRoaXMubm9Bc3NlcnQmJiFoLmlzQnl0ZUJ1ZmZlcihlKSl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIHRhcmdldDogTm90IGEgQnl0ZUJ1ZmZlclwiKTtpZih0PShzPXZvaWQgMD09PXQpP2Uub2Zmc2V0OjB8dCxuPShyPXZvaWQgMD09PW4pP3RoaXMub2Zmc2V0OjB8bixpPXZvaWQgMD09PWk/dGhpcy5saW1pdDowfGksdDwwfHx0PmUuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgdGFyZ2V0IHJhbmdlOiAwIDw9IFwiK3QrXCIgPD0gXCIrZS5idWZmZXIuYnl0ZUxlbmd0aCk7aWYobjwwfHxpPnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgc291cmNlIHJhbmdlOiAwIDw9IFwiK24rXCIgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCk7cmV0dXJuIDA9PShvPWktbik/ZTooZS5lbnN1cmVDYXBhY2l0eSh0K28pLGUudmlldy5zZXQodGhpcy52aWV3LnN1YmFycmF5KG4saSksdCksciYmKHRoaXMub2Zmc2V0Kz1vKSxzJiYoZS5vZmZzZXQrPW8pLHRoaXMpfSxzLmVuc3VyZUNhcGFjaXR5PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuYnVmZmVyLmJ5dGVMZW5ndGg7cmV0dXJuIGU+dD90aGlzLnJlc2l6ZSgodCo9Mik+ZT90OmUpOnRoaXN9LHMuZmlsbD1mdW5jdGlvbihlLHQsbil7dmFyIGk9dm9pZCAwPT09dDtpZihpJiYodD10aGlzLm9mZnNldCksXCJzdHJpbmdcIj09dHlwZW9mIGUmJmUubGVuZ3RoPjAmJihlPWUuY2hhckNvZGVBdCgwKSksdm9pZCAwPT09dCYmKHQ9dGhpcy5vZmZzZXQpLHZvaWQgMD09PW4mJihuPXRoaXMubGltaXQpLCF0aGlzLm5vQXNzZXJ0KXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZSUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgdmFsdWU6IFwiK2UrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZihlfD0wLFwibnVtYmVyXCIhPXR5cGVvZiB0fHx0JTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBiZWdpbjogTm90IGFuIGludGVnZXJcIik7aWYodD4+Pj0wLFwibnVtYmVyXCIhPXR5cGVvZiBufHxuJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBlbmQ6IE5vdCBhbiBpbnRlZ2VyXCIpO2lmKG4+Pj49MCx0PDB8fHQ+bnx8bj50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIHJhbmdlOiAwIDw9IFwiK3QrXCIgPD0gXCIrbitcIiA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX1pZih0Pj1uKXJldHVybiB0aGlzO2Zvcig7bj50Oyl0aGlzLnZpZXdbdCsrXT1lO3JldHVybiBpJiYodGhpcy5vZmZzZXQ9dCksdGhpc30scy5mbGlwPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGltaXQ9dGhpcy5vZmZzZXQsdGhpcy5vZmZzZXQ9MCx0aGlzfSxzLm1hcms9ZnVuY3Rpb24oZSl7aWYoZT12b2lkIDA9PT1lP3RoaXMub2Zmc2V0OmUsIXRoaXMubm9Bc3NlcnQpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlfHxlJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK2UrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigoZT4+Pj0wKTwwfHxlKzA+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrZStcIiAoKzApIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXJldHVybiB0aGlzLm1hcmtlZE9mZnNldD1lLHRoaXN9LHMub3JkZXI9ZnVuY3Rpb24oZSl7aWYoIXRoaXMubm9Bc3NlcnQmJlwiYm9vbGVhblwiIT10eXBlb2YgZSl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGxpdHRsZUVuZGlhbjogTm90IGEgYm9vbGVhblwiKTtyZXR1cm4gdGhpcy5saXR0bGVFbmRpYW49ISFlLHRoaXN9LHMuTEU9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMubGl0dGxlRW5kaWFuPXZvaWQgMD09PWV8fCEhZSx0aGlzfSxzLkJFPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmxpdHRsZUVuZGlhbj12b2lkIDAhPT1lJiYhZSx0aGlzfSxzLnByZXBlbmQ9ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIscyxvLGE7aWYoKFwibnVtYmVyXCI9PXR5cGVvZiB0fHxcInN0cmluZ1wiIT10eXBlb2YgdCkmJihuPXQsdD12b2lkIDApLChpPXZvaWQgMD09PW4pJiYobj10aGlzLm9mZnNldCksIXRoaXMubm9Bc3NlcnQpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBufHxuJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK24rXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigobj4+Pj0wKTwwfHxuKzA+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrbitcIiAoKzApIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXJldHVybiBlIGluc3RhbmNlb2YgaHx8KGU9aC53cmFwKGUsdCkpLChyPWUubGltaXQtZS5vZmZzZXQpPD0wfHwoKHM9ci1uKT4wPyhvPW5ldyBBcnJheUJ1ZmZlcih0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoK3MpLChhPW5ldyBVaW50OEFycmF5KG8pKS5zZXQodGhpcy52aWV3LnN1YmFycmF5KG4sdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCksciksdGhpcy5idWZmZXI9byx0aGlzLnZpZXc9YSx0aGlzLm9mZnNldCs9cyx0aGlzLm1hcmtlZE9mZnNldD49MCYmKHRoaXMubWFya2VkT2Zmc2V0Kz1zKSx0aGlzLmxpbWl0Kz1zLG4rPXMpOm5ldyBVaW50OEFycmF5KHRoaXMuYnVmZmVyKSx0aGlzLnZpZXcuc2V0KGUudmlldy5zdWJhcnJheShlLm9mZnNldCxlLmxpbWl0KSxuLXIpLGUub2Zmc2V0PWUubGltaXQsaSYmKHRoaXMub2Zmc2V0LT1yKSksdGhpc30scy5wcmVwZW5kVG89ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5wcmVwZW5kKHRoaXMsdCksdGhpc30scy5wcmludERlYnVnPWZ1bmN0aW9uKGUpe1wiZnVuY3Rpb25cIiE9dHlwZW9mIGUmJihlPWNvbnNvbGUubG9nLmJpbmQoY29uc29sZSkpLGUodGhpcy50b1N0cmluZygpK1wiXFxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxcblwiK3RoaXMudG9EZWJ1ZyghMCkpfSxzLnJlbWFpbmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxpbWl0LXRoaXMub2Zmc2V0fSxzLnJlc2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFya2VkT2Zmc2V0Pj0wPyh0aGlzLm9mZnNldD10aGlzLm1hcmtlZE9mZnNldCx0aGlzLm1hcmtlZE9mZnNldD0tMSk6dGhpcy5vZmZzZXQ9MCx0aGlzfSxzLnJlc2l6ZT1mdW5jdGlvbihlKXt2YXIgdCxuO2lmKCF0aGlzLm5vQXNzZXJ0KXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZSUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgY2FwYWNpdHk6IFwiK2UrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigoZXw9MCk8MCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBjYXBhY2l0eTogMCA8PSBcIitlKX1yZXR1cm4gdGhpcy5idWZmZXIuYnl0ZUxlbmd0aDxlJiYodD1uZXcgQXJyYXlCdWZmZXIoZSksKG49bmV3IFVpbnQ4QXJyYXkodCkpLnNldCh0aGlzLnZpZXcpLHRoaXMuYnVmZmVyPXQsdGhpcy52aWV3PW4pLHRoaXN9LHMucmV2ZXJzZT1mdW5jdGlvbihlLHQpe2lmKHZvaWQgMD09PWUmJihlPXRoaXMub2Zmc2V0KSx2b2lkIDA9PT10JiYodD10aGlzLmxpbWl0KSwhdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGJlZ2luOiBOb3QgYW4gaW50ZWdlclwiKTtpZihlPj4+PTAsXCJudW1iZXJcIiE9dHlwZW9mIHR8fHQlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGVuZDogTm90IGFuIGludGVnZXJcIik7aWYodD4+Pj0wLGU8MHx8ZT50fHx0PnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgcmFuZ2U6IDAgPD0gXCIrZStcIiA8PSBcIit0K1wiIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXJldHVybiBlPT09dHx8QXJyYXkucHJvdG90eXBlLnJldmVyc2UuY2FsbCh0aGlzLnZpZXcuc3ViYXJyYXkoZSx0KSksdGhpc30scy5za2lwPWZ1bmN0aW9uKGUpe2lmKCF0aGlzLm5vQXNzZXJ0KXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZSUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgbGVuZ3RoOiBcIitlK1wiIChub3QgYW4gaW50ZWdlcilcIik7ZXw9MH12YXIgdD10aGlzLm9mZnNldCtlO2lmKCF0aGlzLm5vQXNzZXJ0JiYodDwwfHx0PnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIGxlbmd0aDogMCA8PSBcIit0aGlzLm9mZnNldCtcIiArIFwiK2UrXCIgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCk7cmV0dXJuIHRoaXMub2Zmc2V0PXQsdGhpc30scy5zbGljZT1mdW5jdGlvbihlLHQpe2lmKHZvaWQgMD09PWUmJihlPXRoaXMub2Zmc2V0KSx2b2lkIDA9PT10JiYodD10aGlzLmxpbWl0KSwhdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGJlZ2luOiBOb3QgYW4gaW50ZWdlclwiKTtpZihlPj4+PTAsXCJudW1iZXJcIiE9dHlwZW9mIHR8fHQlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGVuZDogTm90IGFuIGludGVnZXJcIik7aWYodD4+Pj0wLGU8MHx8ZT50fHx0PnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgcmFuZ2U6IDAgPD0gXCIrZStcIiA8PSBcIit0K1wiIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXZhciBuPXRoaXMuY2xvbmUoKTtyZXR1cm4gbi5vZmZzZXQ9ZSxuLmxpbWl0PXQsbn0scy50b0J1ZmZlcj1mdW5jdGlvbihlKXt2YXIgdCxuPXRoaXMub2Zmc2V0LGk9dGhpcy5saW1pdDtpZighdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIG58fG4lMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogTm90IGFuIGludGVnZXJcIik7aWYobj4+Pj0wLFwibnVtYmVyXCIhPXR5cGVvZiBpfHxpJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBsaW1pdDogTm90IGFuIGludGVnZXJcIik7aWYoaT4+Pj0wLG48MHx8bj5pfHxpPnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgcmFuZ2U6IDAgPD0gXCIrbitcIiA8PSBcIitpK1wiIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXJldHVybiBlfHwwIT09bnx8aSE9PXRoaXMuYnVmZmVyLmJ5dGVMZW5ndGg/bj09PWk/bzoodD1uZXcgQXJyYXlCdWZmZXIoaS1uKSxuZXcgVWludDhBcnJheSh0KS5zZXQobmV3IFVpbnQ4QXJyYXkodGhpcy5idWZmZXIpLnN1YmFycmF5KG4saSksMCksdCk6dGhpcy5idWZmZXJ9LHMudG9BcnJheUJ1ZmZlcj1zLnRvQnVmZmVyLHMudG9TdHJpbmc9ZnVuY3Rpb24oZSx0LG4pe2lmKHZvaWQgMD09PWUpcmV0dXJuXCJCeXRlQnVmZmVyQUIob2Zmc2V0PVwiK3RoaXMub2Zmc2V0K1wiLG1hcmtlZE9mZnNldD1cIit0aGlzLm1hcmtlZE9mZnNldCtcIixsaW1pdD1cIit0aGlzLmxpbWl0K1wiLGNhcGFjaXR5PVwiK3RoaXMuY2FwYWNpdHkoKStcIilcIjtzd2l0Y2goXCJudW1iZXJcIj09dHlwZW9mIGUmJihuPXQ9ZT1cInV0ZjhcIiksZSl7Y2FzZVwidXRmOFwiOnJldHVybiB0aGlzLnRvVVRGOCh0LG4pO2Nhc2VcImJhc2U2NFwiOnJldHVybiB0aGlzLnRvQmFzZTY0KHQsbik7Y2FzZVwiaGV4XCI6cmV0dXJuIHRoaXMudG9IZXgodCxuKTtjYXNlXCJiaW5hcnlcIjpyZXR1cm4gdGhpcy50b0JpbmFyeSh0LG4pO2Nhc2VcImRlYnVnXCI6cmV0dXJuIHRoaXMudG9EZWJ1ZygpO2Nhc2VcImNvbHVtbnNcIjpyZXR1cm4gdGhpcy50b0NvbHVtbnMoKTtkZWZhdWx0OnRocm93IEVycm9yKFwiVW5zdXBwb3J0ZWQgZW5jb2Rpbmc6IFwiK2UpfX0sdT1mdW5jdGlvbigpe3ZhciBlLHQsbj17fSxpPVs2NSw2Niw2Nyw2OCw2OSw3MCw3MSw3Miw3Myw3NCw3NSw3Niw3Nyw3OCw3OSw4MCw4MSw4Miw4Myw4NCw4NSw4Niw4Nyw4OCw4OSw5MCw5Nyw5OCw5OSwxMDAsMTAxLDEwMiwxMDMsMTA0LDEwNSwxMDYsMTA3LDEwOCwxMDksMTEwLDExMSwxMTIsMTEzLDExNCwxMTUsMTE2LDExNywxMTgsMTE5LDEyMCwxMjEsMTIyLDQ4LDQ5LDUwLDUxLDUyLDUzLDU0LDU1LDU2LDU3LDQzLDQ3XSxyPVtdO2ZvcihlPTAsdD1pLmxlbmd0aDt0PmU7KytlKXJbaVtlXV09ZTtyZXR1cm4gbi5lbmNvZGU9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG4scjtudWxsIT09KG49ZSgpKTspdChpWzYzJm4+PjJdKSxyPSgzJm4pPDw0LG51bGwhPT0obj1lKCkpPyh0KGlbNjMmKChyfD0xNSZuPj40KXwxNSZuPj40KV0pLHI9KDE1Jm4pPDwyLG51bGwhPT0obj1lKCkpPyh0KGlbNjMmKHJ8MyZuPj42KV0pLHQoaVs2MyZuXSkpOih0KGlbNjMmcl0pLHQoNjEpKSk6KHQoaVs2MyZyXSksdCg2MSksdCg2MSkpfSxuLmRlY29kZT1mdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oZSl7dGhyb3cgRXJyb3IoXCJJbGxlZ2FsIGNoYXJhY3RlciBjb2RlOiBcIitlKX1mb3IodmFyIGkscyxvO251bGwhPT0oaT1lKCkpOylpZih2b2lkIDA9PT0ocz1yW2ldKSYmbihpKSxudWxsIT09KGk9ZSgpKSYmKHZvaWQgMD09PShvPXJbaV0pJiZuKGkpLHQoczw8Mj4+PjB8KDQ4Jm8pPj40KSxudWxsIT09KGk9ZSgpKSkpe2lmKHZvaWQgMD09PShzPXJbaV0pKXtpZig2MT09PWkpYnJlYWs7bihpKX1pZih0KCgxNSZvKTw8ND4+PjB8KDYwJnMpPj4yKSxudWxsIT09KGk9ZSgpKSl7aWYodm9pZCAwPT09KG89cltpXSkpe2lmKDYxPT09aSlicmVhaztuKGkpfXQoKDMmcyk8PDY+Pj4wfG8pfX19LG4udGVzdD1mdW5jdGlvbihlKXtyZXR1cm4vXig/OltBLVphLXowLTkrXFwvXXs0fSkqKD86W0EtWmEtejAtOStcXC9dezJ9PT18W0EtWmEtejAtOStcXC9dezN9PSk/JC8udGVzdChlKX0sbn0oKSxzLnRvQmFzZTY0PWZ1bmN0aW9uKGUsdCl7aWYodm9pZCAwPT09ZSYmKGU9dGhpcy5vZmZzZXQpLHZvaWQgMD09PXQmJih0PXRoaXMubGltaXQpLHR8PTAsKGV8PTApPDB8fHQ+dGhpcy5jYXBhY2l0eXx8ZT50KXRocm93IFJhbmdlRXJyb3IoXCJiZWdpbiwgZW5kXCIpO3ZhciBpO3JldHVybiB1LmVuY29kZShmdW5jdGlvbigpe3JldHVybiB0PmU/dGhpcy52aWV3W2UrK106bnVsbH0uYmluZCh0aGlzKSxpPW4oKSksaSgpfSxoLmZyb21CYXNlNjQ9ZnVuY3Rpb24oZSxuKXtpZihcInN0cmluZ1wiIT10eXBlb2YgZSl0aHJvdyBUeXBlRXJyb3IoXCJzdHJcIik7dmFyIGk9bmV3IGgoZS5sZW5ndGgvNCozLG4pLHI9MDtyZXR1cm4gdS5kZWNvZGUodChlKSwoZnVuY3Rpb24oZSl7aS52aWV3W3IrK109ZX0pKSxpLmxpbWl0PXIsaX0saC5idG9hPWZ1bmN0aW9uKGUpe3JldHVybiBoLmZyb21CaW5hcnkoZSkudG9CYXNlNjQoKX0saC5hdG9iPWZ1bmN0aW9uKGUpe3JldHVybiBoLmZyb21CYXNlNjQoZSkudG9CaW5hcnkoKX0scy50b0JpbmFyeT1mdW5jdGlvbihlLHQpe2lmKHZvaWQgMD09PWUmJihlPXRoaXMub2Zmc2V0KSx2b2lkIDA9PT10JiYodD10aGlzLmxpbWl0KSx0fD0wLChlfD0wKTwwfHx0PnRoaXMuY2FwYWNpdHkoKXx8ZT50KXRocm93IFJhbmdlRXJyb3IoXCJiZWdpbiwgZW5kXCIpO2lmKGU9PT10KXJldHVyblwiXCI7Zm9yKHZhciBuPVtdLGk9W107dD5lOyluLnB1c2godGhpcy52aWV3W2UrK10pLG4ubGVuZ3RoPj0xMDI0JiYoaS5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLG4pKSxuPVtdKTtyZXR1cm4gaS5qb2luKFwiXCIpK1N0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLG4pfSxoLmZyb21CaW5hcnk9ZnVuY3Rpb24oZSx0KXtpZihcInN0cmluZ1wiIT10eXBlb2YgZSl0aHJvdyBUeXBlRXJyb3IoXCJzdHJcIik7Zm9yKHZhciBuLGk9MCxyPWUubGVuZ3RoLHM9bmV3IGgocix0KTtyPmk7KXtpZigobj1lLmNoYXJDb2RlQXQoaSkpPjI1NSl0aHJvdyBSYW5nZUVycm9yKFwiaWxsZWdhbCBjaGFyIGNvZGU6IFwiK24pO3Mudmlld1tpKytdPW59cmV0dXJuIHMubGltaXQ9cixzfSxzLnRvRGVidWc9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG49LTEsaT10aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoLHI9XCJcIixzPVwiXCIsbz1cIlwiO2k+bjspe2lmKC0xIT09biYmKHIrPSh0PXRoaXMudmlld1tuXSk8MTY/XCIwXCIrdC50b1N0cmluZygxNikudG9VcHBlckNhc2UoKTp0LnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpLGUmJihzKz10PjMyJiZ0PDEyNz9TdHJpbmcuZnJvbUNoYXJDb2RlKHQpOlwiLlwiKSksKytuLGUmJm4+MCYmbiUxNj09MCYmbiE9PWkpe2Zvcig7ci5sZW5ndGg8NTE7KXIrPVwiIFwiO28rPXIrcytcIlxcblwiLHI9cz1cIlwifXIrPW49PT10aGlzLm9mZnNldCYmbj09PXRoaXMubGltaXQ/bj09PXRoaXMubWFya2VkT2Zmc2V0P1wiIVwiOlwifFwiOm49PT10aGlzLm9mZnNldD9uPT09dGhpcy5tYXJrZWRPZmZzZXQ/XCJbXCI6XCI8XCI6bj09PXRoaXMubGltaXQ/bj09PXRoaXMubWFya2VkT2Zmc2V0P1wiXVwiOlwiPlwiOm49PT10aGlzLm1hcmtlZE9mZnNldD9cIidcIjplfHwwIT09biYmbiE9PWk/XCIgXCI6XCJcIn1pZihlJiZcIiBcIiE9PXIpe2Zvcig7ci5sZW5ndGg8NTE7KXIrPVwiIFwiO28rPXIrcytcIlxcblwifXJldHVybiBlP286cn0saC5mcm9tRGVidWc9ZnVuY3Rpb24oZSx0LG4pe2Zvcih2YXIgaSxyLHM9ZS5sZW5ndGgsbz1uZXcgaCgwfChzKzEpLzMsdCxuKSxhPTAsdT0wLGM9ITEsbD0hMSxkPSExLGY9ITEscD0hMTtzPmE7KXtzd2l0Y2goaT1lLmNoYXJBdChhKyspKXtjYXNlXCIhXCI6aWYoIW4pe2lmKGx8fGR8fGYpe3A9ITA7YnJlYWt9bD1kPWY9ITB9by5vZmZzZXQ9by5tYXJrZWRPZmZzZXQ9by5saW1pdD11LGM9ITE7YnJlYWs7Y2FzZVwifFwiOmlmKCFuKXtpZihsfHxmKXtwPSEwO2JyZWFrfWw9Zj0hMH1vLm9mZnNldD1vLmxpbWl0PXUsYz0hMTticmVhaztjYXNlXCJbXCI6aWYoIW4pe2lmKGx8fGQpe3A9ITA7YnJlYWt9bD1kPSEwfW8ub2Zmc2V0PW8ubWFya2VkT2Zmc2V0PXUsYz0hMTticmVhaztjYXNlXCI8XCI6aWYoIW4pe2lmKGwpe3A9ITA7YnJlYWt9bD0hMH1vLm9mZnNldD11LGM9ITE7YnJlYWs7Y2FzZVwiXVwiOmlmKCFuKXtpZihmfHxkKXtwPSEwO2JyZWFrfWY9ZD0hMH1vLmxpbWl0PW8ubWFya2VkT2Zmc2V0PXUsYz0hMTticmVhaztjYXNlXCI+XCI6aWYoIW4pe2lmKGYpe3A9ITA7YnJlYWt9Zj0hMH1vLmxpbWl0PXUsYz0hMTticmVhaztjYXNlXCInXCI6aWYoIW4pe2lmKGQpe3A9ITA7YnJlYWt9ZD0hMH1vLm1hcmtlZE9mZnNldD11LGM9ITE7YnJlYWs7Y2FzZVwiIFwiOmM9ITE7YnJlYWs7ZGVmYXVsdDppZighbiYmYyl7cD0hMDticmVha31pZihyPXBhcnNlSW50KGkrZS5jaGFyQXQoYSsrKSwxNiksIW4mJihpc05hTihyKXx8cjwwfHxyPjI1NSkpdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBzdHI6IE5vdCBhIGRlYnVnIGVuY29kZWQgc3RyaW5nXCIpO28udmlld1t1KytdPXIsYz0hMH1pZihwKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgc3RyOiBJbnZhbGlkIHN5bWJvbCBhdCBcIithKX1pZighbil7aWYoIWx8fCFmKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgc3RyOiBNaXNzaW5nIG9mZnNldCBvciBsaW1pdFwiKTtpZih1PG8uYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBzdHI6IE5vdCBhIGRlYnVnIGVuY29kZWQgc3RyaW5nIChpcyBpdCBoZXg/KSBcIit1K1wiIDwgXCIrcyl9cmV0dXJuIG99LHMudG9IZXg9ZnVuY3Rpb24oZSx0KXtpZihlPXZvaWQgMD09PWU/dGhpcy5vZmZzZXQ6ZSx0PXZvaWQgMD09PXQ/dGhpcy5saW1pdDp0LCF0aGlzLm5vQXNzZXJ0KXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZSUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgYmVnaW46IE5vdCBhbiBpbnRlZ2VyXCIpO2lmKGU+Pj49MCxcIm51bWJlclwiIT10eXBlb2YgdHx8dCUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgZW5kOiBOb3QgYW4gaW50ZWdlclwiKTtpZih0Pj4+PTAsZTwwfHxlPnR8fHQ+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCByYW5nZTogMCA8PSBcIitlK1wiIDw9IFwiK3QrXCIgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9Zm9yKHZhciBuLGk9bmV3IEFycmF5KHQtZSk7dD5lOykobj10aGlzLnZpZXdbZSsrXSk8MTY/aS5wdXNoKFwiMFwiLG4udG9TdHJpbmcoMTYpKTppLnB1c2gobi50b1N0cmluZygxNikpO3JldHVybiBpLmpvaW4oXCJcIil9LGguZnJvbUhleD1mdW5jdGlvbihlLHQsbil7dmFyIGkscixzLG8sYTtpZighbil7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGUpdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBzdHI6IE5vdCBhIHN0cmluZ1wiKTtpZihlLmxlbmd0aCUyIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgc3RyOiBMZW5ndGggbm90IGEgbXVsdGlwbGUgb2YgMlwiKX1mb3Iocj1lLmxlbmd0aCxzPW5ldyBoKDB8ci8yLHQpLG89MCxhPTA7cj5vO28rPTIpe2lmKGk9cGFyc2VJbnQoZS5zdWJzdHJpbmcobyxvKzIpLDE2KSwhbiYmKCFpc0Zpbml0ZShpKXx8aTwwfHxpPjI1NSkpdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBzdHI6IENvbnRhaW5zIG5vbi1oZXggY2hhcmFjdGVyc1wiKTtzLnZpZXdbYSsrXT1pfXJldHVybiBzLmxpbWl0PWEsc30sYz1mdW5jdGlvbigpe3ZhciBlPXtNQVhfQ09ERVBPSU5UOjExMTQxMTEsZW5jb2RlVVRGODpmdW5jdGlvbihlLHQpe3ZhciBuPW51bGw7Zm9yKFwibnVtYmVyXCI9PXR5cGVvZiBlJiYobj1lLGU9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0pO251bGwhPT1ufHxudWxsIT09KG49ZSgpKTspbjwxMjg/dCgxMjcmbik6bjwyMDQ4Pyh0KDE5MnwzMSZuPj42KSx0KDEyOHw2MyZuKSk6bjw2NTUzNj8odCgyMjR8MTUmbj4+MTIpLHQoMTI4fDYzJm4+PjYpLHQoMTI4fDYzJm4pKToodCgyNDB8NyZuPj4xOCksdCgxMjh8NjMmbj4+MTIpLHQoMTI4fDYzJm4+PjYpLHQoMTI4fDYzJm4pKSxuPW51bGx9LGRlY29kZVVURjg6ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG4saSxyLHMsbz1mdW5jdGlvbihlKXtlPWUuc2xpY2UoMCxlLmluZGV4T2YobnVsbCkpO3ZhciB0PUVycm9yKGUudG9TdHJpbmcoKSk7dGhyb3cgdC5uYW1lPVwiVHJ1bmNhdGVkRXJyb3JcIix0LmJ5dGVzPWUsdH07bnVsbCE9PShuPWUoKSk7KWlmKDA9PSgxMjgmbikpdChuKTtlbHNlIGlmKDE5Mj09KDIyNCZuKSludWxsPT09KGk9ZSgpKSYmbyhbbixpXSksdCgoMzEmbik8PDZ8NjMmaSk7ZWxzZSBpZigyMjQ9PSgyNDAmbikpKG51bGw9PT0oaT1lKCkpfHxudWxsPT09KHI9ZSgpKSkmJm8oW24saSxyXSksdCgoMTUmbik8PDEyfCg2MyZpKTw8Nnw2MyZyKTtlbHNle2lmKDI0MCE9KDI0OCZuKSl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBzdGFydGluZyBieXRlOiBcIituKTsobnVsbD09PShpPWUoKSl8fG51bGw9PT0ocj1lKCkpfHxudWxsPT09KHM9ZSgpKSkmJm8oW24saSxyLHNdKSx0KCg3Jm4pPDwxOHwoNjMmaSk8PDEyfCg2MyZyKTw8Nnw2MyZzKX19LFVURjE2dG9VVEY4OmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuLGk9bnVsbDtudWxsIT09KG49bnVsbCE9PWk/aTplKCkpOyluPj01NTI5NiYmbjw9NTczNDMmJm51bGwhPT0oaT1lKCkpJiZpPj01NjMyMCYmaTw9NTczNDM/KHQoMTAyNCoobi01NTI5NikraS01NjMyMCs2NTUzNiksaT1udWxsKTp0KG4pO251bGwhPT1pJiZ0KGkpfSxVVEY4dG9VVEYxNjpmdW5jdGlvbihlLHQpe3ZhciBuPW51bGw7Zm9yKFwibnVtYmVyXCI9PXR5cGVvZiBlJiYobj1lLGU9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0pO251bGwhPT1ufHxudWxsIT09KG49ZSgpKTspbjw9NjU1MzU/dChuKToodCg1NTI5NisoKG4tPTY1NTM2KT4+MTApKSx0KG4lMTAyNCs1NjMyMCkpLG49bnVsbH0sZW5jb2RlVVRGMTZ0b1VURjg6ZnVuY3Rpb24odCxuKXtlLlVURjE2dG9VVEY4KHQsKGZ1bmN0aW9uKHQpe2UuZW5jb2RlVVRGOCh0LG4pfSkpfSxkZWNvZGVVVEY4dG9VVEYxNjpmdW5jdGlvbih0LG4pe2UuZGVjb2RlVVRGOCh0LChmdW5jdGlvbih0KXtlLlVURjh0b1VURjE2KHQsbil9KSl9LGNhbGN1bGF0ZUNvZGVQb2ludDpmdW5jdGlvbihlKXtyZXR1cm4gZTwxMjg/MTplPDIwNDg/MjplPDY1NTM2PzM6NH0sY2FsY3VsYXRlVVRGODpmdW5jdGlvbihlKXtmb3IodmFyIHQsbj0wO251bGwhPT0odD1lKCkpOyluKz10PDEyOD8xOnQ8MjA0OD8yOnQ8NjU1MzY/Mzo0O3JldHVybiBufSxjYWxjdWxhdGVVVEYxNmFzVVRGODpmdW5jdGlvbih0KXt2YXIgbj0wLGk9MDtyZXR1cm4gZS5VVEYxNnRvVVRGOCh0LChmdW5jdGlvbihlKXsrK24saSs9ZTwxMjg/MTplPDIwNDg/MjplPDY1NTM2PzM6NH0pKSxbbixpXX19O3JldHVybiBlfSgpLHMudG9VVEY4PWZ1bmN0aW9uKGUsdCl7aWYodm9pZCAwPT09ZSYmKGU9dGhpcy5vZmZzZXQpLHZvaWQgMD09PXQmJih0PXRoaXMubGltaXQpLCF0aGlzLm5vQXNzZXJ0KXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZSUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgYmVnaW46IE5vdCBhbiBpbnRlZ2VyXCIpO2lmKGU+Pj49MCxcIm51bWJlclwiIT10eXBlb2YgdHx8dCUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgZW5kOiBOb3QgYW4gaW50ZWdlclwiKTtpZih0Pj4+PTAsZTwwfHxlPnR8fHQ+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCByYW5nZTogMCA8PSBcIitlK1wiIDw9IFwiK3QrXCIgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9dmFyIGk7dHJ5e2MuZGVjb2RlVVRGOHRvVVRGMTYoZnVuY3Rpb24oKXtyZXR1cm4gdD5lP3RoaXMudmlld1tlKytdOm51bGx9LmJpbmQodGhpcyksaT1uKCkpfWNhdGNoKG4pe2lmKGUhPT10KXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIHJhbmdlOiBUcnVuY2F0ZWQgZGF0YSwgXCIrZStcIiAhPSBcIit0KX1yZXR1cm4gaSgpfSxoLmZyb21VVEY4PWZ1bmN0aW9uKGUsbixpKXtpZighaSYmXCJzdHJpbmdcIiE9dHlwZW9mIGUpdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBzdHI6IE5vdCBhIHN0cmluZ1wiKTt2YXIgcj1uZXcgaChjLmNhbGN1bGF0ZVVURjE2YXNVVEY4KHQoZSksITApWzFdLG4saSkscz0wO3JldHVybiBjLmVuY29kZVVURjE2dG9VVEY4KHQoZSksKGZ1bmN0aW9uKGUpe3Iudmlld1tzKytdPWV9KSksci5saW1pdD1zLHJ9LGh9KFVpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQsbil7dGhpcy5sb3c9MHxlLHRoaXMuaGlnaD0wfHQsdGhpcy51bnNpZ25lZD0hIW59ZnVuY3Rpb24gdChlKXtyZXR1cm4hMD09PShlJiZlLl9faXNMb25nX18pfWZ1bmN0aW9uIG4oZSx0KXt2YXIgbixpLHM7cmV0dXJuIHQ/KHM9KGU+Pj49MCk+PTAmJmU8MjU2KSYmKGk9dVtlXSk/aToobj1yKGUsKDB8ZSk8MD8tMTowLCEwKSxzJiYodVtlXT1uKSxuKToocz0oZXw9MCk+PS0xMjgmJmU8MTI4KSYmKGk9YVtlXSk/aToobj1yKGUsZTwwPy0xOjAsITEpLHMmJihhW2VdPW4pLG4pfWZ1bmN0aW9uIGkoZSx0KXtpZihpc05hTihlKXx8IWlzRmluaXRlKGUpKXJldHVybiB0P2c6cDtpZih0KXtpZihlPDApcmV0dXJuIGc7aWYoZT49bClyZXR1cm4gRX1lbHNle2lmKC1kPj1lKXJldHVybiBUO2lmKGUrMT49ZClyZXR1cm4gdn1yZXR1cm4gZTwwP2koLWUsdCkubmVnKCk6cigwfGUlaCwwfGUvaCx0KX1mdW5jdGlvbiByKHQsbixpKXtyZXR1cm4gbmV3IGUodCxuLGkpfWZ1bmN0aW9uIHMoZSx0LG4pe3ZhciByLG8sYSx1LGgsbCxkO2lmKDA9PT1lLmxlbmd0aCl0aHJvdyBFcnJvcihcImVtcHR5IHN0cmluZ1wiKTtpZihcIk5hTlwiPT09ZXx8XCJJbmZpbml0eVwiPT09ZXx8XCIrSW5maW5pdHlcIj09PWV8fFwiLUluZmluaXR5XCI9PT1lKXJldHVybiBwO2lmKFwibnVtYmVyXCI9PXR5cGVvZiB0PyhuPXQsdD0hMSk6dD0hIXQsKG49bnx8MTApPDJ8fG4+MzYpdGhyb3cgUmFuZ2VFcnJvcihcInJhZGl4XCIpO2lmKChyPWUuaW5kZXhPZihcIi1cIikpPjApdGhyb3cgRXJyb3IoXCJpbnRlcmlvciBoeXBoZW5cIik7aWYoMD09PXIpcmV0dXJuIHMoZS5zdWJzdHJpbmcoMSksdCxuKS5uZWcoKTtmb3Iobz1pKGMobiw4KSksYT1wLHU9MDt1PGUubGVuZ3RoO3UrPTgpaD1NYXRoLm1pbig4LGUubGVuZ3RoLXUpLGw9cGFyc2VJbnQoZS5zdWJzdHJpbmcodSx1K2gpLG4pLGg8OD8oZD1pKGMobixoKSksYT1hLm11bChkKS5hZGQoaShsKSkpOmE9KGE9YS5tdWwobykpLmFkZChpKGwpKTtyZXR1cm4gYS51bnNpZ25lZD10LGF9ZnVuY3Rpb24gbyh0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIGU/dDpcIm51bWJlclwiPT10eXBlb2YgdD9pKHQpOlwic3RyaW5nXCI9PXR5cGVvZiB0P3ModCk6cih0Lmxvdyx0LmhpZ2gsdC51bnNpZ25lZCl9dmFyIGEsdSxjLGgsbCxkLGYscCxnLF8seSxtLHYsRSxULEk7cmV0dXJuIGUucHJvdG90eXBlLl9faXNMb25nX18sT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiX19pc0xvbmdfX1wiLHt2YWx1ZTohMCxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMX0pLGUuaXNMb25nPXQsYT17fSx1PXt9LGUuZnJvbUludD1uLGUuZnJvbU51bWJlcj1pLGUuZnJvbUJpdHM9cixjPU1hdGgucG93LGUuZnJvbVN0cmluZz1zLGUuZnJvbVZhbHVlPW8sZD0obD0oaD00Mjk0OTY3Mjk2KSpoKS8yLGY9bigxNjc3NzIxNikscD1uKDApLGUuWkVSTz1wLGc9bigwLCEwKSxlLlVaRVJPPWcsXz1uKDEpLGUuT05FPV8seT1uKDEsITApLGUuVU9ORT15LG09bigtMSksZS5ORUdfT05FPW0sdj1yKC0xLDIxNDc0ODM2NDcsITEpLGUuTUFYX1ZBTFVFPXYsRT1yKC0xLC0xLCEwKSxlLk1BWF9VTlNJR05FRF9WQUxVRT1FLFQ9cigwLC0yMTQ3NDgzNjQ4LCExKSxlLk1JTl9WQUxVRT1ULChJPWUucHJvdG90eXBlKS50b0ludD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnVuc2lnbmVkP3RoaXMubG93Pj4+MDp0aGlzLmxvd30sSS50b051bWJlcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnVuc2lnbmVkPyh0aGlzLmhpZ2g+Pj4wKSpoKyh0aGlzLmxvdz4+PjApOnRoaXMuaGlnaCpoKyh0aGlzLmxvdz4+PjApfSxJLnRvU3RyaW5nPWZ1bmN0aW9uKGUpe3ZhciB0LG4scixzLG8sYSx1LGg7aWYoKGU9ZXx8MTApPDJ8fGU+MzYpdGhyb3cgUmFuZ2VFcnJvcihcInJhZGl4XCIpO2lmKHRoaXMuaXNaZXJvKCkpcmV0dXJuXCIwXCI7aWYodGhpcy5pc05lZ2F0aXZlKCkpcmV0dXJuIHRoaXMuZXEoVCk/KHQ9aShlKSxyPShuPXRoaXMuZGl2KHQpKS5tdWwodCkuc3ViKHRoaXMpLG4udG9TdHJpbmcoZSkrci50b0ludCgpLnRvU3RyaW5nKGUpKTpcIi1cIit0aGlzLm5lZygpLnRvU3RyaW5nKGUpO2ZvcihzPWkoYyhlLDYpLHRoaXMudW5zaWduZWQpLG89dGhpcyxhPVwiXCI7Oyl7aWYodT1vLmRpdihzKSxoPShvLnN1Yih1Lm11bChzKSkudG9JbnQoKT4+PjApLnRvU3RyaW5nKGUpLChvPXUpLmlzWmVybygpKXJldHVybiBoK2E7Zm9yKDtoLmxlbmd0aDw2OyloPVwiMFwiK2g7YT1cIlwiK2grYX19LEkuZ2V0SGlnaEJpdHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oaWdofSxJLmdldEhpZ2hCaXRzVW5zaWduZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oaWdoPj4+MH0sSS5nZXRMb3dCaXRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubG93fSxJLmdldExvd0JpdHNVbnNpZ25lZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxvdz4+PjB9LEkuZ2V0TnVtQml0c0Ficz1mdW5jdGlvbigpe3ZhciBlLHQ7aWYodGhpcy5pc05lZ2F0aXZlKCkpcmV0dXJuIHRoaXMuZXEoVCk/NjQ6dGhpcy5uZWcoKS5nZXROdW1CaXRzQWJzKCk7Zm9yKGU9MCE9dGhpcy5oaWdoP3RoaXMuaGlnaDp0aGlzLmxvdyx0PTMxO3Q+MCYmMD09KGUmMTw8dCk7dC0tKTtyZXR1cm4gMCE9dGhpcy5oaWdoP3QrMzM6dCsxfSxJLmlzWmVybz1mdW5jdGlvbigpe3JldHVybiAwPT09dGhpcy5oaWdoJiYwPT09dGhpcy5sb3d9LEkuaXNOZWdhdGl2ZT1mdW5jdGlvbigpe3JldHVybiF0aGlzLnVuc2lnbmVkJiZ0aGlzLmhpZ2g8MH0sSS5pc1Bvc2l0aXZlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudW5zaWduZWR8fHRoaXMuaGlnaD49MH0sSS5pc09kZD1mdW5jdGlvbigpe3JldHVybiAxPT0oMSZ0aGlzLmxvdyl9LEkuaXNFdmVuPWZ1bmN0aW9uKCl7cmV0dXJuIDA9PSgxJnRoaXMubG93KX0sSS5lcXVhbHM9ZnVuY3Rpb24oZSl7cmV0dXJuIHQoZSl8fChlPW8oZSkpLCh0aGlzLnVuc2lnbmVkPT09ZS51bnNpZ25lZHx8dGhpcy5oaWdoPj4+MzEhPTF8fGUuaGlnaD4+PjMxIT0xKSYmdGhpcy5oaWdoPT09ZS5oaWdoJiZ0aGlzLmxvdz09PWUubG93fSxJLmVxPUkuZXF1YWxzLEkubm90RXF1YWxzPWZ1bmN0aW9uKGUpe3JldHVybiF0aGlzLmVxKGUpfSxJLm5lcT1JLm5vdEVxdWFscyxJLmxlc3NUaGFuPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmNvbXAoZSk8MH0sSS5sdD1JLmxlc3NUaGFuLEkubGVzc1RoYW5PckVxdWFsPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmNvbXAoZSk8PTB9LEkubHRlPUkubGVzc1RoYW5PckVxdWFsLEkuZ3JlYXRlclRoYW49ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuY29tcChlKT4wfSxJLmd0PUkuZ3JlYXRlclRoYW4sSS5ncmVhdGVyVGhhbk9yRXF1YWw9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuY29tcChlKT49MH0sSS5ndGU9SS5ncmVhdGVyVGhhbk9yRXF1YWwsSS5jb21wYXJlPWZ1bmN0aW9uKGUpe2lmKHQoZSl8fChlPW8oZSkpLHRoaXMuZXEoZSkpcmV0dXJuIDA7dmFyIG49dGhpcy5pc05lZ2F0aXZlKCksaT1lLmlzTmVnYXRpdmUoKTtyZXR1cm4gbiYmIWk/LTE6IW4mJmk/MTp0aGlzLnVuc2lnbmVkP2UuaGlnaD4+PjA+dGhpcy5oaWdoPj4+MHx8ZS5oaWdoPT09dGhpcy5oaWdoJiZlLmxvdz4+PjA+dGhpcy5sb3c+Pj4wPy0xOjE6dGhpcy5zdWIoZSkuaXNOZWdhdGl2ZSgpPy0xOjF9LEkuY29tcD1JLmNvbXBhcmUsSS5uZWdhdGU9ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy51bnNpZ25lZCYmdGhpcy5lcShUKT9UOnRoaXMubm90KCkuYWRkKF8pfSxJLm5lZz1JLm5lZ2F0ZSxJLmFkZD1mdW5jdGlvbihlKXt2YXIgbixpLHMsYSx1LGMsaCxsLGQsZixwO3JldHVybiB0KGUpfHwoZT1vKGUpKSxuPXRoaXMuaGlnaD4+PjE2LGk9NjU1MzUmdGhpcy5oaWdoLHM9dGhpcy5sb3c+Pj4xNixhPTY1NTM1JnRoaXMubG93LHU9ZS5oaWdoPj4+MTYsYz02NTUzNSZlLmhpZ2gsaD1lLmxvdz4+PjE2LGw9MCxkPTAsZj0wLHA9MCxmKz0ocCs9YSsoNjU1MzUmZS5sb3cpKT4+PjE2LGQrPShmKz1zK2gpPj4+MTYsbCs9KGQrPWkrYyk+Pj4xNixsKz1uK3UscigoZiY9NjU1MzUpPDwxNnwocCY9NjU1MzUpLChsJj02NTUzNSk8PDE2fChkJj02NTUzNSksdGhpcy51bnNpZ25lZCl9LEkuc3VidHJhY3Q9ZnVuY3Rpb24oZSl7cmV0dXJuIHQoZSl8fChlPW8oZSkpLHRoaXMuYWRkKGUubmVnKCkpfSxJLnN1Yj1JLnN1YnRyYWN0LEkubXVsdGlwbHk9ZnVuY3Rpb24oZSl7dmFyIG4scyxhLHUsYyxoLGwsZCxnLF8seSxtO3JldHVybiB0aGlzLmlzWmVybygpP3A6KHQoZSl8fChlPW8oZSkpLGUuaXNaZXJvKCk/cDp0aGlzLmVxKFQpP2UuaXNPZGQoKT9UOnA6ZS5lcShUKT90aGlzLmlzT2RkKCk/VDpwOnRoaXMuaXNOZWdhdGl2ZSgpP2UuaXNOZWdhdGl2ZSgpP3RoaXMubmVnKCkubXVsKGUubmVnKCkpOnRoaXMubmVnKCkubXVsKGUpLm5lZygpOmUuaXNOZWdhdGl2ZSgpP3RoaXMubXVsKGUubmVnKCkpLm5lZygpOnRoaXMubHQoZikmJmUubHQoZik/aSh0aGlzLnRvTnVtYmVyKCkqZS50b051bWJlcigpLHRoaXMudW5zaWduZWQpOihuPXRoaXMuaGlnaD4+PjE2LHM9NjU1MzUmdGhpcy5oaWdoLGE9dGhpcy5sb3c+Pj4xNix1PTY1NTM1JnRoaXMubG93LGM9ZS5oaWdoPj4+MTYsaD02NTUzNSZlLmhpZ2gsbD1lLmxvdz4+PjE2LGc9MCxfPTAseT0wLG09MCx5Kz0obSs9dSooZD02NTUzNSZlLmxvdykpPj4+MTYsXys9KHkrPWEqZCk+Pj4xNix5Jj02NTUzNSxfKz0oeSs9dSpsKT4+PjE2LGcrPShfKz1zKmQpPj4+MTYsXyY9NjU1MzUsZys9KF8rPWEqbCk+Pj4xNixfJj02NTUzNSxnKz0oXys9dSpoKT4+PjE2LGcrPW4qZCtzKmwrYSpoK3UqYyxyKCh5Jj02NTUzNSk8PDE2fChtJj02NTUzNSksKGcmPTY1NTM1KTw8MTZ8KF8mPTY1NTM1KSx0aGlzLnVuc2lnbmVkKSkpfSxJLm11bD1JLm11bHRpcGx5LEkuZGl2aWRlPWZ1bmN0aW9uKGUpe3ZhciBuLHIscyxhLHUsaCxsO2lmKHQoZSl8fChlPW8oZSkpLGUuaXNaZXJvKCkpdGhyb3cgRXJyb3IoXCJkaXZpc2lvbiBieSB6ZXJvXCIpO2lmKHRoaXMuaXNaZXJvKCkpcmV0dXJuIHRoaXMudW5zaWduZWQ/ZzpwO2lmKHRoaXMudW5zaWduZWQpe2lmKGUudW5zaWduZWR8fChlPWUudG9VbnNpZ25lZCgpKSxlLmd0KHRoaXMpKXJldHVybiBnO2lmKGUuZ3QodGhpcy5zaHJ1KDEpKSlyZXR1cm4geTtzPWd9ZWxzZXtpZih0aGlzLmVxKFQpKXJldHVybiBlLmVxKF8pfHxlLmVxKG0pP1Q6ZS5lcShUKT9fOihuPXRoaXMuc2hyKDEpLmRpdihlKS5zaGwoMSkpLmVxKHApP2UuaXNOZWdhdGl2ZSgpP186bToocj10aGlzLnN1YihlLm11bChuKSkscz1uLmFkZChyLmRpdihlKSkpO2lmKGUuZXEoVCkpcmV0dXJuIHRoaXMudW5zaWduZWQ/ZzpwO2lmKHRoaXMuaXNOZWdhdGl2ZSgpKXJldHVybiBlLmlzTmVnYXRpdmUoKT90aGlzLm5lZygpLmRpdihlLm5lZygpKTp0aGlzLm5lZygpLmRpdihlKS5uZWcoKTtpZihlLmlzTmVnYXRpdmUoKSlyZXR1cm4gdGhpcy5kaXYoZS5uZWcoKSkubmVnKCk7cz1wfWZvcihyPXRoaXM7ci5ndGUoZSk7KXtmb3Iobj1NYXRoLm1heCgxLE1hdGguZmxvb3Ioci50b051bWJlcigpL2UudG9OdW1iZXIoKSkpLHU9KGE9TWF0aC5jZWlsKE1hdGgubG9nKG4pL01hdGguTE4yKSk8PTQ4PzE6YygyLGEtNDgpLGw9KGg9aShuKSkubXVsKGUpO2wuaXNOZWdhdGl2ZSgpfHxsLmd0KHIpOylsPShoPWkobi09dSx0aGlzLnVuc2lnbmVkKSkubXVsKGUpO2guaXNaZXJvKCkmJihoPV8pLHM9cy5hZGQoaCkscj1yLnN1YihsKX1yZXR1cm4gc30sSS5kaXY9SS5kaXZpZGUsSS5tb2R1bG89ZnVuY3Rpb24oZSl7cmV0dXJuIHQoZSl8fChlPW8oZSkpLHRoaXMuc3ViKHRoaXMuZGl2KGUpLm11bChlKSl9LEkubW9kPUkubW9kdWxvLEkubm90PWZ1bmN0aW9uKCl7cmV0dXJuIHIofnRoaXMubG93LH50aGlzLmhpZ2gsdGhpcy51bnNpZ25lZCl9LEkuYW5kPWZ1bmN0aW9uKGUpe3JldHVybiB0KGUpfHwoZT1vKGUpKSxyKHRoaXMubG93JmUubG93LHRoaXMuaGlnaCZlLmhpZ2gsdGhpcy51bnNpZ25lZCl9LEkub3I9ZnVuY3Rpb24oZSl7cmV0dXJuIHQoZSl8fChlPW8oZSkpLHIodGhpcy5sb3d8ZS5sb3csdGhpcy5oaWdofGUuaGlnaCx0aGlzLnVuc2lnbmVkKX0sSS54b3I9ZnVuY3Rpb24oZSl7cmV0dXJuIHQoZSl8fChlPW8oZSkpLHIodGhpcy5sb3deZS5sb3csdGhpcy5oaWdoXmUuaGlnaCx0aGlzLnVuc2lnbmVkKX0sSS5zaGlmdExlZnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHQoZSkmJihlPWUudG9JbnQoKSksMD09KGUmPTYzKT90aGlzOmU8MzI/cih0aGlzLmxvdzw8ZSx0aGlzLmhpZ2g8PGV8dGhpcy5sb3c+Pj4zMi1lLHRoaXMudW5zaWduZWQpOnIoMCx0aGlzLmxvdzw8ZS0zMix0aGlzLnVuc2lnbmVkKX0sSS5zaGw9SS5zaGlmdExlZnQsSS5zaGlmdFJpZ2h0PWZ1bmN0aW9uKGUpe3JldHVybiB0KGUpJiYoZT1lLnRvSW50KCkpLDA9PShlJj02Myk/dGhpczplPDMyP3IodGhpcy5sb3c+Pj5lfHRoaXMuaGlnaDw8MzItZSx0aGlzLmhpZ2g+PmUsdGhpcy51bnNpZ25lZCk6cih0aGlzLmhpZ2g+PmUtMzIsdGhpcy5oaWdoPj0wPzA6LTEsdGhpcy51bnNpZ25lZCl9LEkuc2hyPUkuc2hpZnRSaWdodCxJLnNoaWZ0UmlnaHRVbnNpZ25lZD1mdW5jdGlvbihlKXt2YXIgbjtyZXR1cm4gdChlKSYmKGU9ZS50b0ludCgpKSwwPT0oZSY9NjMpP3RoaXM6KG49dGhpcy5oaWdoLGU8MzI/cih0aGlzLmxvdz4+PmV8bjw8MzItZSxuPj4+ZSx0aGlzLnVuc2lnbmVkKTpyKDMyPT09ZT9uOm4+Pj5lLTMyLDAsdGhpcy51bnNpZ25lZCkpfSxJLnNocnU9SS5zaGlmdFJpZ2h0VW5zaWduZWQsSS50b1NpZ25lZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnVuc2lnbmVkP3IodGhpcy5sb3csdGhpcy5oaWdoLCExKTp0aGlzfSxJLnRvVW5zaWduZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy51bnNpZ25lZD90aGlzOnIodGhpcy5sb3csdGhpcy5oaWdoLCEwKX0sSS50b0J5dGVzPWZ1bmN0aW9uKGUpe3JldHVybiBlP3RoaXMudG9CeXRlc0xFKCk6dGhpcy50b0J5dGVzQkUoKX0sSS50b0J5dGVzTEU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmhpZ2gsdD10aGlzLmxvdztyZXR1cm5bMjU1JnQsMjU1JnQ+Pj44LDI1NSZ0Pj4+MTYsMjU1JnQ+Pj4yNCwyNTUmZSwyNTUmZT4+PjgsMjU1JmU+Pj4xNiwyNTUmZT4+PjI0XX0sSS50b0J5dGVzQkU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmhpZ2gsdD10aGlzLmxvdztyZXR1cm5bMjU1JmU+Pj4yNCwyNTUmZT4+PjE2LDI1NSZlPj4+OCwyNTUmZSwyNTUmdD4+PjI0LDI1NSZ0Pj4+MTYsMjU1JnQ+Pj44LDI1NSZ0XX0sZX0oKSksVWkpKTtEaS5nZXRNb2R1bGU9ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IERpW2VdO3JldHVybiB0LmdldEFycmF5RGF0YT1mdW5jdGlvbigpe3ZhciBlPXQudG9BcnJheUJ1ZmZlcigpO3JldHVybiBlPSQoZSk/W10uc2xpY2UuY2FsbChuZXcgSW50OEFycmF5KGUpKTplfSx0fTt2YXIgVmksa2k9XCJwZ01zZ1BcIix4aT1cImNoYXRNc2dcIixCaT1cInBjTXNnUFwiLEdpPXtQUklWQVRFOlwicHBNc2dTXCIsR1JPVVA6XCJwZ01zZ1NcIixDSEFUUk9PTTpcImNoYXRNc2dTXCJ9LEZpPVwiZGVsTXNnXCIscWk9XCJqb2luQ2hybVwiLEtpPVwiam9pbkNocm1SXCIsSGk9XCJleGl0Q2hybVwiLFlpPVwic2V0S1ZcIixqaT1cImRlbEtWXCIsUWk9XCJzZXRLVlNcIixXaT1cImRlbEtWU1wiLEppPVwicXJ5UmVsYXRpb25SXCIsemk9XCJkZWxSZWxhdGlvblwiLFppPVwic2V0U2VBdHRcIixYaT17UFJJVkFURTpcImNsZWFuUE1zZ1wiLEdST1VQOlwiY2xlYW5HTXNnXCIsVUxUUkFfR1JPVVA6XCJjbGVhbkdNc2dcIixDVVNUT01FUl9TRVJWSUNFOlwiY2xlYW5DTXNnXCIsU1lTVEVNOlwiY2xlYW5TTXNnXCJ9LCRpPVwicXJ5UE1zZ1wiLGVyPVwicXJ5R01zZ1wiLHRyPVwicXJ5Q0hNc2dcIixucj1cInFyeUNNc2dcIixpcj1cInFyeVNNc2dcIixycj0oKGJpPXt9KVtcInBwTXNnUFwiXT1qLlBSSVZBVEUsYmlba2ldPWouR1JPVVAsYmlbeGldPWouQ0hBVFJPT00sYmlbQmldPWouQ1VTVE9NRVJfU0VSVklDRSxiaSksc3I9KChMaT17fSlbai5QUklWQVRFXT0kaSxMaVtqLkdST1VQXT1lcixMaVtqLkNIQVRST09NXT10cixMaVtqLkNVU1RPTUVSX1NFUlZJQ0VdPW5yLExpW2ouU1lTVEVNXT1pcixMaSksb3I9KChQaT17fSlbai5QUklWQVRFXT1YaS5QUklWQVRFLFBpW2ouR1JPVVBdPVhpLkdST1VQLFBpW2ouVUxUUkFfR1JPVVBdPVhpLlVMVFJBX0dST1VQLFBpW2ouQ1VTVE9NRVJfU0VSVklDRV09WGkuQ1VTVE9NRVJfU0VSVklDRSxQaVtqLlNZU1RFTV09WGkuU1lTVEVNLFBpKSxhcj1cIjFcIix1cj1cIjBcIixjcj0xLGhyPTIsbHI9Myxkcj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5fY29kZWM9XCJ3ZWJzb2NrZXRcIj09PWU/RGk6TmksdGhpcy5fY29ubmVjdFR5cGU9ZX1yZXR1cm4gZS5wcm90b3R5cGUuZGVjb2RlQnlQQk5hbWU9ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHI9dGhpcyxzPWUsbz0oKGk9e30pW1B0XT1yLl9mb3JtYXRTeW5jTWVzc2FnZXMsaVtMdF09ci5fZm9ybWF0UmVjZWl2ZWRNZXNzYWdlLGlbVXRdPXIuX2Zvcm1hdFNlbnRNZXNzYWdlLGlbRnRdPXIuX2Zvcm1hdEhpc3RvcnlNZXNzYWdlcyxpW0t0XT1yLl9mb3JtYXRDb252ZXJzYXRpb25MaXN0LGlbZW5dPXIuX2Zvcm1hdENoYXRSb29tSW5mb3MsaVtubl09ci5fZm9ybWF0UlRDVXNlckxpc3QsaVtsbl09ci5fZm9ybWF0UlRDRGF0YSxpW01uXT1yLl9mb3JtYXRDaGF0Um9vbUtWTGlzdCxpW1ZuXT1yLl9mb3JtYXRVc2VyU2V0dGluZyxpW0JuXT1yLl9mb3JtYXRDb252ZXJzYXRpb25TdGF0dXMsaVtqbl09ci5fZm9ybWF0R3JwUmVhZFJlY2VpcHRRcnlSZXNwLGlbUG5dPXIuX2Zvcm1hdFNldFVzZXJTZXR0aW5nT3V0cHV0LGlba25dPXIuX2Zvcm1hdFVzZXJTZXR0aW5nTm90aWZpY2F0aW9uLGlbc2ldPXIuX2Zvcm1hdFVsdHJhTXNnQ2hhbmdlTGlzdCxpW2hpXT1yLl9mb3JtYXRVbHRyYU9wZXJhdGVTdGF0dXNOb3RpZnlMaXN0LGlbdWldPXIuX2Zvcm1hdFVsdHJhTXNnTGlzdCxpW1h0XT1yLl9mb3JtYXRDaHJtS1ZWZXJzaW9uLGlbZ2ldPXIuX2Zvcm1hdFJUQ1Jvb21LVkxpc3QsaVtobl09ci5fZm9ybWF0UlRDQXVpZGVuY2VKb2luUm9vbURhdGEsaVt5aV09ci5fZm9ybWF0UlRDSm9pbmVkVXNlckluZm8saSlbdF07dHJ5e3M9ZS5sZW5ndGg+MCYmci5fY29kZWNbdF0uZGVjb2RlKGUpLG5lKHMpJiYocz1mdW5jdGlvbihlKXtmb3IodmFyIHQgaW4gZSluZShlW3RdKSYmKGVbdF09c3QoZVt0XSkpO3JldHVybiBlfShzKSksaWUobykmJihzPW8uY2FsbCh0aGlzLHMsbikpfWNhdGNoKG4pe2dlLmVycm9yKFwiUEIgcGFyc2UgZXJyb3JcXG5cIixuLGUsdCl9cmV0dXJuIHN9LGUucHJvdG90eXBlLl9yZWFkQnl0ZXM9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5vZmZzZXQsbj1lLmJ1ZmZlcixpPWUubGltaXQ7aWYodCl0cnl7dmFyIHI9JChuKT9uZXcgVWludDhBcnJheShuKTpuO3JldHVybiBNdC5yZWFkVVRGKHIuc3ViYXJyYXkodCxpKSl9Y2F0Y2goZSl7Z2UuaW5mbyhcInJlYWRCeXRlcyBlcnJvclxcblwiLGUpfXJldHVybiBlfSxlLnByb3RvdHlwZS5fZm9ybWF0Qnl0ZXM9ZnVuY3Rpb24oZSl7aWYoIWUpcmV0dXJuIGU7dmFyIHQ9dGhpcy5fcmVhZEJ5dGVzKGUpO3RyeXt0PUpTT04ucGFyc2UodCl9Y2F0Y2goZSl7Z2UuaW5mbyhcImZvcm1hdEJ5dGVzIGVycm9yXFxuXCIsZSl9cmV0dXJuIHR8fGV9LGUucHJvdG90eXBlLl9mb3JtYXRTeW5jTWVzc2FnZXM9ZnVuY3Rpb24oZSx0KXt0PXR8fHt9O3ZhciBuPXRoaXMsaT1lLmxpc3Qscj1lLnN5bmNUaW1lLHM9ZS5maW5pc2hlZDtyZXR1cm4ocmUocyl8fG51bGw9PT1zKSYmKGUuZmluaXNoZWQ9ITApLGUuc3luY1RpbWU9c3QociksZS5saXN0PWZ0KGksKGZ1bmN0aW9uKGUpe3JldHVybiBuLl9mb3JtYXRSZWNlaXZlZE1lc3NhZ2UoZSx0KX0pKSxlfSxlLnByb3RvdHlwZS5fZm9ybWF0UmVjZWl2ZWRNZXNzYWdlPWZ1bmN0aW9uKGUsdCl7aWYoIWUpcmV0dXJuIGU7dmFyIG49KHQ9dHx8e30pLmN1cnJlbnRVc2VySWQscj10LmNvbm5lY3RlZFRpbWUscz1lLmNvbnRlbnQsbz1lLmZyb21Vc2VySWQsYT1lLnR5cGUsdT1lLmdyb3VwSWQsYz1lLnN0YXR1cyxoPWUuZGF0YVRpbWUsbD1lLmNsYXNzbmFtZSxkPWUubXNnSWQsZj1lLmV4dHJhQ29udGVudCxwPWUucHVzaENvbnRlbnQsZz1lLnB1c2hFeHQsXz1lLmNvbmZpZ0ZsYWcseT1lLmV4dFN0YXR1cyxtPShlLmRpcmVjdGlvbnx8bWUuUkVDRUlWRSk9PT1tZS5TRU5ELHY9ZnVuY3Rpb24oZSl7dmFyIHQ9aS5SRUFEO3JldHVybntpc1BlcnNpdGVkOiEhKDE2JmUpLGlzQ291bnRlZDohISgzMiZlKSxpc01lbnRpb25lZDohISg2NCZlKSxkaXNhYmxlTm90aWZpY2F0aW9uOiEhKDUxMiZlKSxyZWNlaXZlZFN0YXR1czp0PTImZT9pLlJFVFJJRVZFRDp0LGNhbkluY2x1ZGVFeHBhbnNpb246ISEoMTAyNCZlKX19KGMpLEU9di5pc1BlcnNpdGVkLFQ9di5pc0NvdW50ZWQsST12LmlzTWVudGlvbmVkLEM9di5kaXNhYmxlTm90aWZpY2F0aW9uLFI9di5yZWNlaXZlZFN0YXR1cyxTPXYuY2FuSW5jbHVkZUV4cGFuc2lvbixOPSEhKDImKHl8fDApKSxNPSEhKDQmKHl8fDApKSx3PVtqLkdST1VQLGouQ0hBVFJPT00sai5SVENfUk9PTSxqLlVMVFJBX0dST1VQXS5pbmRleE9mKGEpPi0xP3U6byxBPW0/bjpvLFU9c3QoaCksYj1VPHIsTD1hPT09ai5DSEFUUk9PTSxQPXRoaXMuX2Zvcm1hdEJ5dGVzKHMpLEQ9e307aWYoZyYmKEQ9Y3QoZy5wdXNoQ29uZmlncyxnLnB1c2hJZCkpLFAudXNlcil7dmFyIFY9UC51c2VyLGs9Vi5wb3J0cmFpdCx4PVYucG9ydHJhaXRVcmksQj1rfHx4O0ImJihQLnVzZXIucG9ydHJhaXQ9UC51c2VyLnBvcnRyYWl0VXJpPUIpfXZhciBHLEY9TyhPKHt9LEQpLHtwdXNoVGl0bGU6bnVsbD09Zz92b2lkIDA6Zy50aXRsZSxwdXNoQ29udGVudDpwLHB1c2hEYXRhOnAsZGlzYWJsZVB1c2hUaXRsZTohIV8mJkJvb2xlYW4oNCZfKSxmb3JjZVNob3dEZXRhaWxDb250ZW50OiEhXyYmQm9vbGVhbig4Jl8pLHRlbXBsYXRlSWQ6bnVsbD09Zz92b2lkIDA6Zy50ZW1wbGF0ZUlkfSkscT1tP21lLlNFTkQ6bWUuUkVDRUlWRTtMJiZvPT09biYmKHE9bWUuU0VORCksZiYmKEc9e30sRz1DdChmKSk7dmFyIEs9e2NvbnZlcnNhdGlvblR5cGU6YSx0YXJnZXRJZDp3LHNlbmRlclVzZXJJZDpBLG1lc3NhZ2VUeXBlOmwsbWVzc2FnZVVJZDpkLGlzUGVyc2l0ZWQ6RSxpc0NvdW50ZWQ6VCxpc01lbnRpb25lZDpJLHNlbnRUaW1lOlUsbWVzc2FnZURpcmVjdGlvbjpxLHJlY2VpdmVkVGltZTpSdC5nZXRUaW1lKCksZGlzYWJsZU5vdGlmaWNhdGlvbjpDLHJlY2VpdmVkU3RhdHVzOlIsY2FuSW5jbHVkZUV4cGFuc2lvbjpTLGNvbnRlbnQ6UCxleHBhbnNpb246Ryxjb25maWdGbGFnOl8scHVzaENvbmZpZzpGLGNoYW5uZWxJZDplLmJ1c0NoYW5uZWx8fFwiXCIsaXNJbnRlcnJ1cHQ6Tixpc01vZGlmeU1lc3NhZ2U6TX07cmV0dXJuIGEhPT1qLlVMVFJBX0dST1VQJiYoSy5pc09mZkxpbmVNZXNzYWdlPWIpLEt9LGUucHJvdG90eXBlLl9mb3JtYXRTZW50TWVzc2FnZT1mdW5jdGlvbihlLHQpe3ZhciBuLGk9ZS5jb250ZW50LHI9ZS5jbGFzc25hbWUscz1lLnNlc3Npb25JZCxvPWUubXNnSWQsYT1lLmV4dHJhQ29udGVudCx1PWUucHVzaEV4dCxjPWUucHVzaENvbnRlbnQsaD1lLmNvbmZpZ0ZsYWcsbD1lLmV4dFN0YXR1cyxkPXQuc2lnbmFsLGY9dC5jdXJyZW50VXNlcklkLHA9ZC5kYXRlLGc9ZC50b3BpYyxfPWQudGFyZ2V0SWQseT0hISgyJihsfHwwKSksbT1mdW5jdGlvbihlKXtyZXR1cm57aXNQZXJzaXRlZDohISgxJmUpLGlzQ291bnRlZDohISgyJmUpLGRpc2FibGVOb3RpZmljYXRpb246ISEoMzImZSksY2FuSW5jbHVkZUV4cGFuc2lvbjohISg2NCZlKX19KHMpLHY9bS5pc1BlcnNpdGVkLEU9bS5pc0NvdW50ZWQsVD1tLmRpc2FibGVOb3RpZmljYXRpb24sST1tLmNhbkluY2x1ZGVFeHBhbnNpb24sQz1ycltnXXx8ai5QUklWQVRFLFI9X3QoR2ksZyksUz10aGlzLl9mb3JtYXRCeXRlcyhpKSxOPV87cj09PVNlLlJFQ0FMTCYmKEM9Uy5jb252ZXJzYXRpb25UeXBlfHxDLE49Uy50YXJnZXRJZHx8XyksYSYmKG49e30sbj1DdChhKSk7dmFyIE09e307dSYmKE09Y3QodS5wdXNoQ29uZmlncyx1LnB1c2hJZCkpO3ZhciB3PU8oTyh7fSxNKSx7cHVzaFRpdGxlOm51bGw9PXU/dm9pZCAwOnUudGl0bGUscHVzaENvbnRlbnQ6YyxwdXNoRGF0YTpjLGRpc2FibGVQdXNoVGl0bGU6ISFoJiZCb29sZWFuKDQmaCksZm9yY2VTaG93RGV0YWlsQ29udGVudDohIWgmJkJvb2xlYW4oOCZoKSx0ZW1wbGF0ZUlkOm51bGw9PXU/dm9pZCAwOnUudGVtcGxhdGVJZH0pO3JldHVybntjb252ZXJzYXRpb25UeXBlOkMsdGFyZ2V0SWQ6TixtZXNzYWdlVHlwZTpyLG1lc3NhZ2VVSWQ6byxpc1BlcnNpdGVkOnYsaXNDb3VudGVkOkUsaXNTdGF0dXNNZXNzYWdlOlIsc2VuZGVyVXNlcklkOmYsY29udGVudDp0aGlzLl9mb3JtYXRCeXRlcyhpKSxzZW50VGltZToxZTMqcCxyZWNlaXZlZFRpbWU6UnQuZ2V0VGltZSgpLG1lc3NhZ2VEaXJlY3Rpb246bWUuU0VORCxpc09mZkxpbmVNZXNzYWdlOiExLGRpc2FibGVOb3RpZmljYXRpb246VCxjYW5JbmNsdWRlRXhwYW5zaW9uOkksZXhwYW5zaW9uOm4scHVzaENvbmZpZzp3LGNoYW5uZWxJZDplLmJ1c0NoYW5uZWx8fFwiXCIsaXNJbnRlcnJ1cHQ6eX19LGUucHJvdG90eXBlLl9mb3JtYXRIaXN0b3J5TWVzc2FnZXM9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLGk9dC5jb252ZXJzYXRpb258fHt9LHI9ZS5saXN0LHM9ZS5oYXNNc2csbz1pLnRhcmdldElkLGE9c3QoZS5zeW5jVGltZSksdT1bXTtyZXR1cm4gZHQociwoZnVuY3Rpb24oZSl7dmFyIHI9bi5fZm9ybWF0UmVjZWl2ZWRNZXNzYWdlKGUsdCk7aS5jb252ZXJzYXRpb25UeXBlPT09ai5VTFRSQV9HUk9VUD9yLnRhcmdldElkPWUuZ3JvdXBJZHx8aS50YXJnZXRJZDpyLnRhcmdldElkPW8sdS5wdXNoKHIpfSkse2lzUmV2ZXJzZTohMH0pLHtzeW5jVGltZTphLGxpc3Q6dSxoYXNNb3JlOiEhc319LGUucHJvdG90eXBlLl9mb3JtYXRVbHRyYU1zZ0NoYW5nZUxpc3Q9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5saXN0LG49ZS5zeW5jVGltZSxpPWUuaGFzTmV4dDtyZXR1cm57c3luY1RpbWU6bixsaXN0OnQmJnQubWFwKChmdW5jdGlvbihlKXt2YXIgdD1lLnRhcmdldElkLG49ZS50eXBlLGk9ZS50aW1lLHI9ZS5jaGFuZ2VUeXBlLHM9ZS5tc2dVSUQsbz1lLm1zZ1RpbWUsYT1lLmJ1c0NoYW5uZWwsdT1lLmlzQWRtaW4sYz1lLmlzRGVsLGg9ZS5vcGVyYXRvcklkO3JldHVybnt0YXJnZXRJZDp0LGNvbnZlcnNhdGlvblR5cGU6bixjaGFuZ2VUeXBlOnIsbWVzc2FnZVVJZDpzLGNoYW5nZVRpbWU6c3QoaSksc2VuZFRpbWU6c3QobyksY2hhbm5lbElkOmEsaXNBZG1pbjp1LGlzRGVsOmMsb3BlcmF0b3JJZDpofX0pKSxoYXNOZXh0Oml9fSxlLnByb3RvdHlwZS5fZm9ybWF0VWx0cmFPcGVyYXRlU3RhdHVzTm90aWZ5TGlzdD1mdW5jdGlvbihlKXt2YXIgdD1lLnR5cGUsbj1lLm5vdGlmeVR5cGUsaT1lLmluZm8scj1lLnN1bW1hcnkscz1bXSxvPVtdLGE9Mj09KDImbiksdT0xPT0oMSZuKTtyZXR1cm4gdSYmQXJyYXkuaXNBcnJheShpKSYmaS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgdD1lLnRhcmdldElkLG49ZS5idXNDaGFubmVsLGk9ZS51c2VySWQscj1lLm9wVHlwZSxvPWUub3B0aW1lLGE9c3Qobyk7cy5wdXNoKHt0YXJnZXRJZDp0LGNoYW5uZWxJZDpuLHVzZXJJZDppLG9wZXJhdGlvblR5cGU6cixvcGVyYXRpb25UaW1lOmF9KX0pKSxhJiZBcnJheS5pc0FycmF5KHIpJiZyLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0PWUudGFyZ2V0SWQsbj1lLmJ1c0NoYW5uZWwsaT1lLmNvdW50LHI9ZS5vcFR5cGU7by5wdXNoKHt0YXJnZXRJZDp0LGNoYW5uZWxJZDpuLGNvdW50Omksb3BlcmF0aW9uVHlwZTpyfSl9KSkse2NvbnZlcnNhdGlvblR5cGU6dCxpbmZvOnMsc3VtbWFyeTpvLGhhc0luZm86dSxoYXNTdW1tYXJ5OmF9fSxlLnByb3RvdHlwZS5fZm9ybWF0VWx0cmFNc2dMaXN0PWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcyxpPWUubGlzdDtyZXR1cm57bGlzdDppJiZpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIG4uX2Zvcm1hdFJlY2VpdmVkTWVzc2FnZShlLHQpfSkpfX0sZS5wcm90b3R5cGUuX2Zvcm1hdENvbnZlcnNhdGlvbkxpc3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLGk9ZS5pbmZvLHI9dC5hZnRlckRlY29kZXx8ZnVuY3Rpb24oKXt9LHM9e2xpc3Q6aT1mdChpLChmdW5jdGlvbihlKXt2YXIgaT1lLm1zZyxzPWUudXNlcklkLG89ZS50eXBlLGE9ZS51bnJlYWRDb3VudCx1PWUuYnVzQ2hhbm5lbCxjPWUudmVyc2lvblRpbWUsaD1lLnJlbWluZENvdW50LGw9bnVsbDtpJiYoKGw9bi5fZm9ybWF0UmVjZWl2ZWRNZXNzYWdlKGksdCkpLnRhcmdldElkPXMpO3ZhciBkPXt0YXJnZXRJZDpzLGNvbnZlcnNhdGlvblR5cGU6byx1bnJlYWRNZXNzYWdlQ291bnQ6c3QoYSl8fDAsbGF0ZXN0TWVzc2FnZTpsfHx7fSxjaGFubmVsSWQ6dXx8XCJcIn07cmV0dXJuIG89PT1qLlVMVFJBX0dST1VQJiYoZC52ZXJzaW9uVGltZT1zdChjKXx8MCxkLnVucmVhZE1lbnRpb25lZENvdW50PXN0KGgpfHwwKSxyKGQpfHxkfSkpfTtyZXR1cm4oKG51bGw9PXQ/dm9pZCAwOnQuY29udmVyc2F0aW9uVHlwZSl8fGouTk9ORSk9PT1qLlVMVFJBX0dST1VQJiYocy5pc0ZpbmlzaGVkPWUuaXNGaW5pc2hlZCksc30sZS5wcm90b3R5cGUuX2Zvcm1hdFNldFVzZXJTZXR0aW5nT3V0cHV0PWZ1bmN0aW9uKGUpe3JldHVybiBlfSxlLnByb3RvdHlwZS5fZm9ybWF0Q2hhdFJvb21JbmZvcz1mdW5jdGlvbihlKXt2YXIgdD1lLnVzZXJUb3RhbE51bXMsbj1lLnVzZXJJbmZvcztyZXR1cm57dXNlckNvdW50OnQsdXNlckluZm9zOmZ0KG4sKGZ1bmN0aW9uKGUpe3ZhciB0PWUuaWQsbj1lLnRpbWU7cmV0dXJue2lkOnQsdGltZTpzdChuKX19KSl9fSxlLnByb3RvdHlwZS5fZm9ybWF0Q2hhdFJvb21LVkxpc3Q9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5lbnRyaWVzLG49ZS5iRnVsbFVwZGF0ZSxpPWUuc3luY1RpbWU7cmV0dXJue2t2RW50cmllczp0PWZ0KHQ9dHx8W10sKGZ1bmN0aW9uKGUpe3ZhciB0PWUua2V5LG49ZS52YWx1ZSxpPWUuc3RhdHVzLHI9ZS50aW1lc3RhbXAscz1lLnVpZCxvPWUudmVyc2lvbixhPWZ1bmN0aW9uKGUpe3JldHVybntpc0F1dG9EZWxldGU6ISEoMSZlKSxpc092ZXJ3cml0ZTohISgyJmUpLHR5cGU6NCZlP0xlLkRFTEVURTpMZS5VUERBVEV9fShpKTtyZXR1cm57a2V5OnQsdmFsdWU6bixpc0F1dG9EZWxldGU6YS5pc0F1dG9EZWxldGUsaXNPdmVyd3JpdGU6YS5pc092ZXJ3cml0ZSx0eXBlOmEudHlwZSx1c2VySWQ6cyx0aW1lc3RhbXA6c3QociksdmVyc2lvbjpzdChvKX19KSksaXNGdWxsVXBkYXRlOm4sc3luY1RpbWU6aX19LGUucHJvdG90eXBlLl9mb3JtYXRVc2VyU2V0dGluZz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5pdGVtcyxpPWUudmVyc2lvbixyPXt9O3JldHVybiBkdChufHxbXSwoZnVuY3Rpb24oZSl7dmFyIG49ZS5rZXksaT1lLnZlcnNpb24scz1lLnZhbHVlO2UudmVyc2lvbj1zdChpKSxlLnZhbHVlPXQuX3JlYWRCeXRlcyhzKSxcIlRhZ1wiPT09biYmZS50YWdzLmZvckVhY2goKGZ1bmN0aW9uKGUpe2UuY3JlYXRlZFRpbWU9c3QoZS5jcmVhdGVkVGltZSksZS50YWdOYW1lPWUubmFtZX0pKSxyW25dPWV9KSkse3NldHRpbmdzOnIsdmVyc2lvbjppfX0sZS5wcm90b3R5cGUuX2Zvcm1hdENvbnZlcnNhdGlvblN0YXR1cz1mdW5jdGlvbihlKXt2YXIgdD1lLnN0YXRlLG49W107cmV0dXJuIGR0KHQsKGZ1bmN0aW9uKGUpe3ZhciB0PWUudHlwZSxpPWUuY2hhbm5lbElkLHI9ZS50aW1lLHM9ZS5zdGF0ZUl0ZW0sbz1lLmJ1c0NoYW5uZWwsYT1PZS5DTE9TRSx1PSExLGM9W107ZHQocywoZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zZXNzaW9uU3RhdGVUeXBlLG49ZS52YWx1ZSxpPWUudGFncztzd2l0Y2godCl7Y2FzZSBjcjphPW49PT1hcj9PZS5PUEVOOk9lLkNMT1NFO2JyZWFrO2Nhc2UgaHI6dT1uPT09YXI7YnJlYWs7Y2FzZSBscjpjPWl9fSkpLG4ucHVzaCh7Y29udmVyc2F0aW9uVHlwZTp0LHR5cGU6dCx0YXJnZXRJZDppLG5vdGlmaWNhdGlvblN0YXR1czphLGlzVG9wOnUsdXBkYXRlZFRpbWU6c3QociksdGFnczpjLGNoYW5uZWxJZDpvfHxcIlwifSl9KSksbn0sZS5wcm90b3R5cGUuX2Zvcm1hdFJUQ1VzZXJMaXN0PWZ1bmN0aW9uKGUpe3ZhciB0PWUudXNlcnMsbj1lLnRva2VuLGk9ZS5zZXNzaW9uSWQscj1lLnJvb21JbmZvLHM9ZS5lbnRyaWVzLG89e307cmV0dXJuIGR0KHQsKGZ1bmN0aW9uKGUpe3ZhciB0PWUudXNlcklkLG49ZS51c2VyRGF0YSxpPXt9O2R0KG4sKGZ1bmN0aW9uKGUpe3ZhciB0PWUua2V5LG49ZS52YWx1ZTtpW3RdPW59KSksb1t0XT1pfSkpLHt1c2VyczpvLHRva2VuOm4sc2Vzc2lvbklkOmkscm9vbUluZm86cixrdkVudHJpZXM6c319LGUucHJvdG90eXBlLl9mb3JtYXRSVENEYXRhPWZ1bmN0aW9uKGUpe3ZhciB0PWUub3V0SW5mbyxuPXt9O3JldHVybiBkdCh0LChmdW5jdGlvbihlKXtuW2Uua2V5XT1lLnZhbHVlfSkpLG59LGUucHJvdG90eXBlLl9mb3JtYXRSVENSb29tSW5mbz1mdW5jdGlvbihlKXt2YXIgdD1lLnJvb21JZCxuPWUudXNlckNvdW50LGk9ZS5yb29tRGF0YSxyPXtpZDp0LHRvdGFsOm59O3JldHVybiBkdChpLChmdW5jdGlvbihlKXtyW2Uua2V5XT1lLnZhbHVlfSkpLHJ9LGUucHJvdG90eXBlLl9mb3JtYXRHcnBSZWFkUmVjZWlwdFFyeVJlc3A9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS50b3RhbE1lbWJlck51bSxuPWUubGlzdDtyZXR1cm4gbi5mb3JFYWNoKChmdW5jdGlvbihlKXtlLnJlYWRUaW1lPXN0KGUucmVhZFRpbWUpfSkpLHt0b3RhbE1lbWJlckNvdW50OnQsbGlzdDpufX0sZS5wcm90b3R5cGUuX2Zvcm1hdFVzZXJTZXR0aW5nTm90aWZpY2F0aW9uPWZ1bmN0aW9uKGUpe3JldHVybiBlfSxlLnByb3RvdHlwZS5fZm9ybWF0UlRDUm9vbUtWTGlzdD1mdW5jdGlvbihlKXt2YXIgdD1lLmVudHJpZXMsbj1lLmJGdWxsVXBkYXRlLGk9ZS5zeW5jVGltZTtyZXR1cm57a3ZFbnRyaWVzOnQ9KHQ9dHx8W10pLm1hcCgoZnVuY3Rpb24oZSl7dmFyIHQ9ZS50aW1lc3RhbXA7cmV0dXJuIE9iamVjdC5hc3NpZ24oZSx7dGltZXN0YW1wOnN0KHQpfSl9KSksaXNGdWxsVXBkYXRlOm4sc3luY1RpbWU6aX19LGUucHJvdG90eXBlLl9mb3JtYXRDaHJtS1ZWZXJzaW9uPWZ1bmN0aW9uKGUpe3JldHVybiBlfSxlLnByb3RvdHlwZS5fZm9ybWF0UlRDQXVpZGVuY2VKb2luUm9vbURhdGE9ZnVuY3Rpb24oZSl7cmV0dXJuIGV9LGUucHJvdG90eXBlLl9mb3JtYXRSVENKb2luZWRVc2VySW5mbz1mdW5jdGlvbihlKXtyZXR1cm4oZS5pbmZvfHxbXSkubWFwKChmdW5jdGlvbihlKXtyZXR1cm57ZGV2aWNlSWQ6ZS5kZXZpY2VJZCxyb29tSWQ6ZS5yb29tSWQsam9pblRpbWU6c3QoZS5qb2luVGltZSl9fSkpfSxlLnByb3RvdHlwZS5lbmNvZGVTZXJ2ZXJDb25mUGFyYW1zPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fY29kZWMuZ2V0TW9kdWxlKER0KTtyZXR1cm4gZS5zZXROb3RoaW5nKDEpLGUuZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLl9nZXRVcE1zZ01vZHVsZT1mdW5jdGlvbihlLHQpe3ZhciBuLGkscixzPVwiY29tZXRcIj09PXRoaXMuX2Nvbm5lY3RUeXBlLG89ZS5jb252ZXJzYXRpb25UeXBlLGE9dC5tZXNzYWdlVHlwZSx1PXQuaXNNZW50aW9uZWQsYz10Lm1lbnRpb25lZFR5cGUsaD10Lm1lbnRpb25lZFVzZXJJZExpc3QsbD10LmNvbnRlbnQsZD10LnB1c2hDb250ZW50LGY9dC5wdXNoRGF0YSxwPXQuZGlyZWN0aW9uYWxVc2VySWRMaXN0LGc9dC5pc0ZpbGVyV2hpdGVCbGFja2xpc3QsXz10LmlzVm9pcFB1c2gseT10LmNhbkluY2x1ZGVFeHBhbnNpb24sbT10LmV4cGFuc2lvbix2PXQucHVzaENvbmZpZyxFPXQuY2hhbm5lbElkO1tqLkdST1VQLGouVUxUUkFfR1JPVVBdLmluY2x1ZGVzKG8pO3ZhciBUPXRoaXMuX2NvZGVjLmdldE1vZHVsZShVdCksST1mdW5jdGlvbihlKXt2YXIgdD1lLmlzU3RhdHVzTWVzc2FnZSxuPWUuaXNQZXJzaXRlZCxpPWUuaXNDb3VudGVkO3QmJihuPWk9ITEpO3ZhciByPTA7cmV0dXJuIG4mJihyfD0xKSxpJiYocnw9MiksZS5pc01lbnRpb25lZCYmKHJ8PTQpLGUuZGlzYWJsZU5vdGlmaWNhdGlvbiYmKHJ8PTMyKSxlLmNhbkluY2x1ZGVFeHBhbnNpb24mJihyfD02NCkscn0odCksQz12fHx7fSxSPUMucHVzaFRpdGxlLFM9Qy5wdXNoQ29udGVudCxOPUMucHVzaERhdGEsTz1DLmlPU0NvbmZpZyxNPUMuYW5kcm9pZENvbmZpZyx3PUMudGVtcGxhdGVJZCxBPUMuZGlzYWJsZVB1c2hUaXRsZSxVPUMuZm9yY2VTaG93RGV0YWlsQ29udGVudCxiPTA7VC5zZXRTZXNzaW9uSWQoSSksdSYmbCYmKGwubWVudGlvbmVkSW5mbz17dXNlcklkTGlzdDoobnVsbD09PShuPWwubWVudGlvbmVkSW5mbyl8fHZvaWQgMD09PW4/dm9pZCAwOm4udXNlcklkTGlzdCl8fGh8fFtdLHR5cGU6KG51bGw9PT0oaT1sLm1lbnRpb25lZEluZm8pfHx2b2lkIDA9PT1pP3ZvaWQgMDppLnR5cGUpfHxjfHx3ZS5BTEwsbWVudGlvbmVkQ29udGVudDoobnVsbD09PShyPWwubWVudGlvbmVkSW5mbyl8fHZvaWQgMD09PXI/dm9pZCAwOnIubWVudGlvbmVkQ29udGVudCl8fFwiXCJ9KTt2YXIgTD1TfHxkfHxcIlwiLFA9Tnx8Znx8XCJcIjtpZihMJiZULnNldFB1c2hUZXh0KEwpLFAmJlQuc2V0QXBwRGF0YShQKSxwJiZULnNldFVzZXJJZChwKSxifD1fPzE6MCxifD1nPzI6MCxifD1BPzQ6MCxifD1VPzg6MCxULnNldENvbmZpZ0ZsYWcoYiksVC5zZXRDbGFzc25hbWUoYSksbC51c2VyJiZsLnVzZXIucG9ydHJhaXRVcmkmJihsLnVzZXIucG9ydHJhaXQ9bC51c2VyLnBvcnRyYWl0VXJpKSxULnNldENvbnRlbnQoSlNPTi5zdHJpbmdpZnkobCkpLHkmJm0pe3ZhciBEPXt9O2R0KG0sKGZ1bmN0aW9uKGUsdCl7RFt0XT17djplfX0pKSxULnNldEV4dHJhQ29udGVudChKU09OLnN0cmluZ2lmeShEKSl9aWYodil7dmFyIFY9dGhpcy5fY29kZWMuZ2V0TW9kdWxlKGJ0KTtpZihSJiZWLnNldFRpdGxlKFIpLE8mJk0pe3ZhciBrPXV0KE8sTSk7Vi5zZXRQdXNoQ29uZmlncyhrKX0obnVsbD09TT92b2lkIDA6TS5ub3RpZmljYXRpb25JZCkmJlYuc2V0UHVzaElkKG51bGw9PU0/dm9pZCAwOk0ubm90aWZpY2F0aW9uSWQpLFYuc2V0VGVtcGxhdGVJZCh3fHxcIlwiKSxULnNldFB1c2hFeHQocz9WLmdldEFycmF5RGF0YSgpOlYpfXJldHVybiByZShFKXx8VC5zZXRCdXNDaGFubmVsKEUpLFR9LGUucHJvdG90eXBlLmVuY29kZVVwTXNnPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX2dldFVwTXNnTW9kdWxlKGUsdCkuZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLmVuY29kZVN5bmNNc2c9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zZW5kYm94VGltZSxuPWUuaW5ib3hUaW1lLGk9dGhpcy5fY29kZWMuZ2V0TW9kdWxlKGt0KTtyZXR1cm4gaS5zZXRJc3BvbGxpbmcoITEpLGkuc2V0SXNQdWxsU2VuZCghMCksaS5zZXRTZW5kQm94U3luY1RpbWUodCksaS5zZXRTeW5jVGltZShuKSxpLmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVDaHJtU3luY01zZz1mdW5jdGlvbihlLHQpe2U9ZXx8MCx0PXR8fDA7dmFyIG49dGhpcy5fY29kZWMuZ2V0TW9kdWxlKHh0KTtyZXR1cm4gbi5zZXRDb3VudCh0KSxuLnNldFN5bmNUaW1lKGUpLG4uZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLmVuY29kZUdldEhpc3RvcnlNc2c9ZnVuY3Rpb24oZSx0KXt2YXIgbj10LmNvdW50LGk9dC5vcmRlcixyPXQudGltZXN0YW1wLHM9dC5jaGFubmVsSWQsbz10aGlzLl9jb2RlYy5nZXRNb2R1bGUoR3QpO3JldHVybiBvLnNldFRhcmdldElkKGUpLG8uc2V0VGltZShyKSxvLnNldENvdW50KG4pLG8uc2V0T3JkZXIoaSksby5zZXRCdXNDaGFubmVsKHN8fFwiXCIpLG8uZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLmVuY29kZVN1cGVyU3luY01zZz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9jb2RlYy5nZXRNb2R1bGUodGkpO3JldHVybiB0LnNldFN5bmNUaW1lKGUpLHQuZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLmVuY29kZUdldENvbnZlcnNhdGlvbkxpc3Q9ZnVuY3Rpb24oZSl7dmFyIHQ9KGU9ZXx8e30pLmNvdW50LG49ZS5zdGFydFRpbWUsaT10aGlzLl9jb2RlYy5nZXRNb2R1bGUocXQpO3JldHVybiBpLnNldFR5cGUoMSksaS5zZXRDb3VudCh0KSxpLnNldFN0YXJ0VGltZShuKSxpLmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVPbGRDb252ZXJzYXRpb25MaXN0PWZ1bmN0aW9uKGUpe3ZhciB0PShlPWV8fHt9KS5jb3VudCxuPWUudHlwZSxpPWUuc3RhcnRUaW1lLHI9ZS5vcmRlcjt0PXR8fDAsaT1pfHwwLHI9cnx8MDt2YXIgcz10aGlzLl9jb2RlYy5nZXRNb2R1bGUocXQpO3JldHVybiBzLnNldFR5cGUobikscy5zZXRDb3VudCh0KSxzLnNldFN0YXJ0VGltZShpKSxzLnNldE9yZGVyKHIpLHMuZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLmVuY29kZVJlbW92ZU9sZENvbnZlcnNhdGlvbkxpc3Q9ZnVuY3Rpb24oZSl7dmFyIHQ9KGU9ZXx8e30pLmNvbnZlcnNhdGlvblR5cGUsbj1lLmNoYW5uZWxJZCxpPXRoaXMuX2NvZGVjLmdldE1vZHVsZShRdCk7cmV0dXJuIGkuc2V0VHlwZSh0KSxuJiZpLnNldEJ1c0NoYW5uZWwoW25dKSxpLmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVSZW1vdmVDb252ZXJzYXRpb25MaXN0PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj10aGlzLl9jb2RlYy5nZXRNb2R1bGUoSHQpLGk9W107cmV0dXJuIGR0KGUsKGZ1bmN0aW9uKGUpe3ZhciBuPWUuY29udmVyc2F0aW9uVHlwZSxyPWUudGFyZ2V0SWQscz10Ll9jb2RlYy5nZXRNb2R1bGUoWXQpO3Muc2V0VHlwZShuKSxzLnNldENoYW5uZWxJZChyKSxpLnB1c2gocyl9KSksbi5zZXRTZXNzaW9ucyhpKSxuLmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVEZWxldGVNZXNzYWdlcz1mdW5jdGlvbihlLHQsbixpKXt2YXIgcj10aGlzLl9jb2RlYy5nZXRNb2R1bGUoV3QpLHM9W107cmV0dXJuIGR0KG4sKGZ1bmN0aW9uKGUpe3MucHVzaCh7bXNnSWQ6ZS5tZXNzYWdlVUlkLG1zZ0RhdGFUaW1lOmUuc2VudFRpbWUsZGlyZWN0OmUubWVzc2FnZURpcmVjdGlvbn0pfSkpLHIuc2V0VHlwZShlKSxyLnNldENvbnZlcnNhdGlvbklkKHQpLHIuc2V0TXNncyhzKSxyLnNldEJ1c0NoYW5uZWwoaSksci5nZXRBcnJheURhdGEoKX0sZS5wcm90b3R5cGUuZW5jb2RlQ2xlYXJNZXNzYWdlcz1mdW5jdGlvbihlLHQsbixpKXt2YXIgcj10aGlzLl9jb2RlYy5nZXRNb2R1bGUoSnQpO3JldHVybiB0PXR8fChuZXcgRGF0ZSkuZ2V0VGltZSgpLHIuc2V0RGF0YVRpbWUodCksci5zZXRUYXJnZXRJZChlKSxyLnNldEJ1c0NoYW5uZWwobiksci5zZXRDb252ZXJzYXRpb25UeXBlKGkpLHIuZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLmVuY29kZUNsZWFyVW5yZWFkQ291bnQ9ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLmNvbnZlcnNhdGlvblR5cGUsaT1lLnRhcmdldElkLHI9ZS5jaGFubmVsSWQscz10LnRpbWVzdGFtcCxvPXRoaXMuX2NvZGVjLmdldE1vZHVsZSh6dCk7cmV0dXJuIHM9c3x8K25ldyBEYXRlLG8uc2V0VHlwZShuKSxvLnNldENoYW5uZWxJZChpKSxvLnNldE1zZ1RpbWUocyksby5zZXRCdXNDaGFubmVsKHIpLG8uZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLmVuY29kZUV4cGFuZFVsdHJhTWVzc2FnZT1mdW5jdGlvbihlLHQpe3ZhciBuPWUudGFyZ2V0SWQsaT1lLmNvbnZlcnNhdGlvblR5cGUscj1lLmNoYW5uZWxJZCxzPWUubWVzc2FnZVVJZCxvPWUuc2VuZFRpbWUsYT1lLmtleXMsdT17bWlkOnMscHV0OmUuZXhwYW5zaW9uLGRlbDphLGNsZWFyOmUucmVtb3ZlQWxsPzE6MH0sYz10aGlzLl9jb2RlYy5nZXRNb2R1bGUobmkpO3JldHVybiBjLnNldEZyb21Vc2VySWQodCksYy5zZXRUYXJnZXRJZChuKSxjLnNldFR5cGUoaSksYy5zZXRCdXNDaGFubmVsKHJ8fFwiXCIpLGMuc2V0TXNnVUlEKHMpLGMuc2V0TXNnVGltZShvKSxjLnNldENvbnRlbnQoSlNPTi5zdHJpbmdpZnkodSkpLGMuZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLmVuY29kZW1vZGlmeU1lc3NhZ2U9ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLnRhcmdldElkLGk9ZS5jb252ZXJzYXRpb25UeXBlLHI9ZS5jaGFubmVsSWQscz1lLm1lc3NhZ2VVSWQsbz1lLnNlbmRUaW1lLGE9ZS5jb250ZW50LHU9dGhpcy5fY29kZWMuZ2V0TW9kdWxlKG5pKTtyZXR1cm4gdS5zZXRGcm9tVXNlcklkKHQpLHUuc2V0VGFyZ2V0SWQobiksdS5zZXRUeXBlKGkpLHUuc2V0QnVzQ2hhbm5lbChyfHxcIlwiKSx1LnNldE1zZ1VJRChzKSx1LnNldE1zZ1RpbWUobyksdS5zZXRDb250ZW50KEpTT04uc3RyaW5naWZ5KGEpKSx1LmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVRdWVyeU1zZ0NoYW5nZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9jb2RlYy5nZXRNb2R1bGUoaWkpO3JldHVybiB0LnNldFN5bmNUaW1lKGUpLHQuZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLmVuY29kZU1zZ1F1ZXJ5PWZ1bmN0aW9uKGUpe3ZhciB0PWUudGFyZ2V0SWQsbj1lLmNvbnZlcnNhdGlvblR5cGUsaT1lLm1lc3NhZ2VzLHI9dGhpcy5fY29kZWMuZ2V0TW9kdWxlKG9pKSxzPWkubWFwKChmdW5jdGlvbihlKXtyZXR1cm57bXNnVGltZTplLnNlbmRUaW1lLG1zZ1VJRDplLm1lc3NhZ2VVSWQsYnVzQ2hhbm5lbDplLmNoYW5uZWxJZH19KSk7cmV0dXJuIHIuc2V0VGFyZ2V0SWQodCksci5zZXRUeXBlKG4pLHIuc2V0UXVlcnkocyksci5nZXRBcnJheURhdGEoKX0sZS5wcm90b3R5cGUuZW5jb2RlT3BlcmF0ZVN0YXR1cz1mdW5jdGlvbihlLHQsbixpKXt2YXIgcj10aGlzLl9jb2RlYy5nZXRNb2R1bGUoY2kpO3JldHVybiByLnNldFRhcmdldElkKGUpLHIuc2V0VHlwZSh0KSxyLnNldEJ1c0NoYW5uZWwobiksci5zZXRPcFR5cGUoaSksci5nZXRBcnJheURhdGEoKX0sZS5wcm90b3R5cGUuZW5jb2RlSm9pbk9yUXVpdENoYXRSb29tPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fY29kZWMuZ2V0TW9kdWxlKFp0KTtyZXR1cm4gZS5zZXROb3RoaW5nKDEpLGUuZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLmVuY29kZUdldENoYXRSb29tSW5mbz1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuX2NvZGVjLmdldE1vZHVsZSgkdCk7cmV0dXJuIG4uc2V0Q291bnQoZSksbi5zZXRPcmRlcih0KSxuLmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVHZXRGaWxlVG9rZW49ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHI9dGhpcy5fY29kZWMuZ2V0TW9kdWxlKG1uKTtyZXR1cm4gci5zZXRUeXBlKGUpLHIuc2V0S2V5KHQpLHIuc2V0SHR0cE1ldGhvZChuKSxyLnNldFF1ZXJ5U3RyaW5nKGkpLHIuZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLmVuY29kZUdldEZpbGVVcmw9ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHI9dGhpcy5fY29kZWMuZ2V0TW9kdWxlKGUpO3JldHVybiByLnNldFR5cGUodCksci5zZXRLZXkobiksaSYmci5zZXRGaWxlTmFtZShpKSxyLmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVNb2RpZnlDaGF0Um9vbUtWPWZ1bmN0aW9uKGUsdCxuKXt2YXIgaT1cImNvbWV0XCI9PT10aGlzLl9jb25uZWN0VHlwZSxyPXRoaXMuX2NvZGVjLmdldE1vZHVsZShTbikscz10LmtleSxvPXQudmFsdWUsYT10Lm5vdGlmaWNhdGlvbkV4dHJhLHU9dC5pc1NlbmROb3RpZmljYXRpb24sYz10LnR5cGUsaD10LnRpbWVzdGFtcCxsPWN8fExlLlVQREFURSxkPVN0KHQsbCksZj17a2V5OnMsdmFsdWU6b3x8XCJcIix1aWQ6bix2ZXJzaW9uOmh9O2lmKHJlKGQpfHwoZi5zdGF0dXM9ZCksci5zZXRFbnRyeShmKSx1KXt2YXIgcD17Y29udmVyc2F0aW9uVHlwZTpqLkNIQVRST09NLHRhcmdldElkOmV9LGc9e2tleTpzLHZhbHVlOm8sZXh0cmE6YSx0eXBlOmx9LF89dGhpcy5fZ2V0VXBNc2dNb2R1bGUocCx7bWVzc2FnZVR5cGU6U2UuQ0hSTV9LVl9OT1RJRlksY29udGVudDpnLGlzUGVyc2l0ZWQ6ITEsaXNDb3VudGVkOiExfSk7aT9yLnNldE5vdGlmaWNhdGlvbihfLmdldEFycmF5RGF0YSgpKTpyLnNldE5vdGlmaWNhdGlvbihfKSxyLnNldEJOb3RpZnkoITApLHIuc2V0VHlwZShqLkNIQVRST09NKX1yZXR1cm4gci5nZXRBcnJheURhdGEoKX0sZS5wcm90b3R5cGUuZW5jb2RlTW9kaWZ5Q2hhdFJvb21LVlM9ZnVuY3Rpb24oZSx0LG4pe3RoaXMuX2Nvbm5lY3RUeXBlO3ZhciBpPXRoaXMuX2NvZGVjLmdldE1vZHVsZShObikscj10LmVudHJpZXMscz10LnR5cGV8fExlLlVQREFURSxvPVN0KHQscyksYT1bXTtyZXR1cm4gci5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgdD17a2V5OmUua2V5LHZhbHVlOmUudmFsdWV8fFwiXCIsdWlkOm4sdmVyc2lvbjplLnRpbWVzdGFtcH07cmUobyl8fCh0LnN0YXR1cz1vKSxhLnB1c2godCl9KSksaS5zZXRFbnRyeShhKSxpLmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVQdWxsQ2hhdFJvb21LVj1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9jb2RlYy5nZXRNb2R1bGUoYm4pO3JldHVybiB0LnNldFRpbWVzdGFtcChlKSx0LmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVQdWxsVXNlclNldHRpbmc9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fY29kZWMuZ2V0TW9kdWxlKERuKTtyZXR1cm4gdC5zZXRWZXJzaW9uKGUpLHQuZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLmVuY29kZUdldENvbnZlcnNhdGlvblN0YXR1cz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9jb2RlYy5nZXRNb2R1bGUoeG4pO3JldHVybiB0LnNldFRpbWUoZSksdC5nZXRBcnJheURhdGEoKX0sZS5wcm90b3R5cGUuZW5jb2RlU2V0Q29udmVyc2F0aW9uU3RhdHVzPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cImNvbWV0XCI9PT10aGlzLl9jb25uZWN0VHlwZSxpPXRoaXMuX2NvZGVjLmdldE1vZHVsZShxbikscj1SdC5nZXRUaW1lKCkscz1bXTtyZXR1cm4gZHQoZSwoZnVuY3Rpb24oZSl7dmFyIGk9dC5fY29kZWMuZ2V0TW9kdWxlKEduKSxvPWUuY29udmVyc2F0aW9uVHlwZSxhPWUudGFyZ2V0SWQsdT1lLm5vdGlmaWNhdGlvblN0YXR1cyxjPWUuaXNUb3AsaD1lLmNoYW5uZWxJZCxsPVtdO2kuc2V0VHlwZShvKSxpLnNldENoYW5uZWxJZChhKSxpLnNldFRpbWUociksaS5zZXRCdXNDaGFubmVsKGgpO3ZhciBkPXU9PT1PZS5PUEVOLGY9e307cmUodSl8fChmW2NyXT1kKSxyZShjKXx8KGZbaHJdPWMpLGR0KGYsKGZ1bmN0aW9uKGUsaSl7aWYoIXJlKGUpKXt2YXIgcj10Ll9jb2RlYy5nZXRNb2R1bGUoRm4pO2U9ZT9hcjp1cixyLnNldFNlc3Npb25TdGF0ZVR5cGUoTnVtYmVyKGkpKSxyLnNldFZhbHVlKGUpO3ZhciBzPW4/ci5nZXRBcnJheURhdGEoKTpyO2wucHVzaChzKX19KSksaS5zZXRTdGF0ZUl0ZW0obCk7dmFyIHA9bj9pLmdldEFycmF5RGF0YSgpOmk7cy5wdXNoKHApfSkpLGkuc2V0VmVyc2lvbihyKSxpLnNldFN0YXRlKHMpLGkuZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLmVuY29kZVJlYWRSZWNlaXB0PWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5fY29kZWMuZ2V0TW9kdWxlKEhuKTtyZXR1cm4gbi5zZXRNc2dJZChlKSx0JiZuLnNldENoYW5uZWxJZCh0KSxuLmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVDcmVhdGVUYWc9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLGk9XCJjb21ldFwiPT09dGhpcy5fY29ubmVjdFR5cGUscj10aGlzLl9jb2RlYy5nZXRNb2R1bGUoV24pLHM9W107cmV0dXJuIGUuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHQ9bi5fY29kZWMuZ2V0TW9kdWxlKEpuKTt0LnNldFRhZ0lkKGUudGFnSWQpLHQuc2V0TmFtZShlLnRhZ05hbWUpLHMucHVzaChpP3QuZ2V0QXJyYXlEYXRhKCk6dCl9KSksci5zZXRUYWdzKHMpLHIuc2V0VmVyc2lvbih0KSxyLmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVNZXNzYWdlUmVhZGVyPWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5fY29kZWMuZ2V0TW9kdWxlKEhuKTtyZXR1cm4gbi5zZXRNc2dJZChlKSx0JiZuLnNldENoYW5uZWxJZCh0KSxuLmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVSZW1vdmVUYWc9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLGk9XCJjb21ldFwiPT09dGhpcy5fY29ubmVjdFR5cGUscj10aGlzLl9jb2RlYy5nZXRNb2R1bGUoem4pLHM9W107cmV0dXJuIGUuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHQ9bi5fY29kZWMuZ2V0TW9kdWxlKEpuKTt0LnNldFRhZ0lkKGUpLHMucHVzaChpP3QuZ2V0QXJyYXlEYXRhKCk6dCl9KSksci5zZXRUYWdzKHMpLHIuc2V0VmVyc2lvbih0KSxyLmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVEaXNDb252ZXJzYXRpb25UYWc9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fY29kZWMuZ2V0TW9kdWxlKFpuKTtyZXR1cm4gdC5zZXRUYWdJZChlKSx0LmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVVcGRhdGVDb252ZXJzYXRpb25UYWc9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLGk9XCJjb21ldFwiPT09dGhpcy5fY29ubmVjdFR5cGUscj10aGlzLl9jb2RlYy5nZXRNb2R1bGUocW4pLHM9W107cmV0dXJuIHQuZm9yRWFjaCgoZnVuY3Rpb24odCl7dmFyIHI9bi5fY29kZWMuZ2V0TW9kdWxlKEduKSxvPW4uX2NvZGVjLmdldE1vZHVsZShGbiksYT1bXTtlLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0PW4uX2NvZGVjLmdldE1vZHVsZShKbik7dC5zZXRUYWdJZChlLnRhZ0lkKSxyZShlLmlzVG9wKXx8dC5zZXRJc1RvcChlLmlzVG9wKSxhLnB1c2goaT90LmdldEFycmF5RGF0YSgpOnQpfSkpLG8uc2V0U2Vzc2lvblN0YXRlVHlwZShsciksby5zZXRWYWx1ZShKU09OLnN0cmluZ2lmeShhKSksby5zZXRUYWdzKGEpLHIuc2V0VHlwZSh0LmNvbnZlcnNhdGlvblR5cGUpLHIuc2V0Q2hhbm5lbElkKHQudGFyZ2V0SWQpLHIuc2V0VGltZShEYXRlLm5vdygpKSxyLnNldFN0YXRlSXRlbShbaT9vLmdldEFycmF5RGF0YSgpOm9dKSxzLnB1c2goaT9yLmdldEFycmF5RGF0YSgpOnIpfSkpLHIuc2V0U3RhdGUocyksci5zZXRWZXJzaW9uKFJ0LmdldFRpbWUoKSksci5nZXRBcnJheURhdGEoKX0sZS5wcm90b3R5cGUuZW5jb2RlUmVwb3J0U0RLSW5mbz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9jb2RlYy5nZXRNb2R1bGUoWG4pO3JldHVybiB0LnNldFNka0luZm8oZSksdC5nZXRBcnJheURhdGEoKX0sZS5wcm90b3R5cGUuZW5jb2RlVWx0cmFHcm91cD1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuX2NvZGVjLmdldE1vZHVsZShlaSk7cmV0dXJuIG4uc2V0U3luY1RpbWUoZSksbi5zZXRJc0VyYXNlTXNnQ29udGVudCh0KSxuLmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVKb2luUlRDUm9vbT1mdW5jdGlvbihlLHQsbixpLHIpe3ZhciBzPXRoaXMsbz1cImNvbWV0XCI9PT10aGlzLl9jb25uZWN0VHlwZSxhPXRoaXMuX2NvZGVjLmdldE1vZHVsZSh0bik7aWYoZT1lfHwwLGEuc2V0Um9vbVR5cGUoZSkscmUodCl8fGEuc2V0QnJvYWRjYXN0VHlwZSh0KSxyZShuKXx8YS5zZXRKb2luVHlwZShuKSxpKXt2YXIgdT1bXSxjPXRoaXMuX2NvZGVjLmdldE1vZHVsZShfbik7Zm9yKHZhciBoIGluIGkpYy5zZXRLZXkoaCksYy5zZXRWYWx1ZShpW2hdKSxvP3UucHVzaChjLmdldEFycmF5RGF0YSgpKTp1LnB1c2goYyk7YS5zZXRJbm5lckRhdGFzKHUpfWlmKHIpe3ZhciBsPVtdO09iamVjdC5rZXlzKHIpLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0PXMuX2NvZGVjLmdldE1vZHVsZShfbik7dC5zZXRLZXkoZSksdC5zZXRWYWx1ZShyW2VdKSxvP2wucHVzaCh0LmdldEFycmF5RGF0YSgpKTpsLnB1c2godCl9KSksYS5zZXRPdXRlckRhdGFzKGwpfXJldHVybiBhLmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVRdWl0UlRDUm9vbT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb2RlYy5nZXRNb2R1bGUocm4pLmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVTZXRSVENEYXRhPWZ1bmN0aW9uKGUsdCxuLGkscil7dmFyIHM9dGhpcy5fY29kZWMuZ2V0TW9kdWxlKHNuKTtpZihzLnNldEludGVyaW9yKG4pLHMuc2V0VGFyZ2V0KGkpLHMuc2V0S2V5KGUpLHMuc2V0VmFsdWUodCkscil7ci5uYW1lJiZzLnNldE9iamVjdE5hbWUoci5uYW1lKTt2YXIgbz1yLmNvbnRlbnQ7byYmKG5lKG8pJiYobz1KU09OLnN0cmluZ2lmeShvKSkscy5zZXRDb250ZW50KG8pKX1yZXR1cm4gcy5nZXRBcnJheURhdGEoKX0sZS5wcm90b3R5cGUuZW5jb2RlVXNlclNldFJUQ0RhdGE9ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHI9dGhpcyxzPVwiY29tZXRcIj09PXRoaXMuX2Nvbm5lY3RUeXBlLG89dGhpcy5fY29kZWMuZ2V0TW9kdWxlKG9uKTtvLnNldE9iamVjdE5hbWUobik7dmFyIGE9dGhpcy5fY29kZWMuZ2V0TW9kdWxlKF9uKTthLnNldEtleShlLm5hbWUpLGEuc2V0VmFsdWUoZS5jb250ZW50KSxzP28uc2V0Q29udGVudChhLmdldEFycmF5RGF0YSgpKTpvLnNldENvbnRlbnQoYSk7dmFyIHU9W107cmV0dXJuW1widXJpc1wiLFwibWN1X3VyaXNcIl0uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIG49ci5fY29kZWMuZ2V0TW9kdWxlKF9uKTtuLnNldEtleShlKTt2YXIgbz1cInVyaXNcIj09PWU/dDppO24uc2V0VmFsdWUobykscz91LnB1c2gobi5nZXRBcnJheURhdGEoKSk6dS5wdXNoKG4pfSkpLG8uc2V0VmFsdWVJbmZvKHUpLG8uZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLmVuY29kZVVzZXJTZXRSVENDRE5VcmlzPWZ1bmN0aW9uKGUsdCl7dGhpcy5fY29ubmVjdFR5cGU7dmFyIG49dGhpcy5fY29kZWMuZ2V0TW9kdWxlKG9uKTtuLnNldE9iamVjdE5hbWUoZSk7dmFyIGk9dGhpcy5fY29kZWMuZ2V0TW9kdWxlKF9uKTtyZXR1cm4gaS5zZXRLZXkoXCJjZG5fdXJpc1wiKSxpLnNldFZhbHVlKHQpLG4uc2V0VmFsdWVJbmZvKGkpLG4uZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLmVuY29kZUdldFJUQ0RhdGE9ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXMuX2NvZGVjLmdldE1vZHVsZShhbik7cmV0dXJuIGkuc2V0SW50ZXJpb3IodCksaS5zZXRUYXJnZXQobiksaS5zZXRLZXkoZSksaS5nZXRBcnJheURhdGEoKX0sZS5wcm90b3R5cGUuZW5jb2RlUmVtb3ZlUlRDRGF0YT1mdW5jdGlvbihlLHQsbixpKXt2YXIgcj10aGlzLl9jb2RlYy5nZXRNb2R1bGUoYW4pO3Iuc2V0SW50ZXJpb3IodCksci5zZXRUYXJnZXQobiksci5zZXRLZXkoZSk7dmFyIHM9KGk9aXx8e30pLm5hbWUsbz1pLmNvbnRlbnQ7cmV0dXJuIXJlKHMpJiZyLnNldE9iamVjdE5hbWUocykscmUobyl8fChuZShvKSYmKG89SlNPTi5zdHJpbmdpZnkobykpLHIuc2V0Q29udGVudChvKSksci5nZXRBcnJheURhdGEoKX0sZS5wcm90b3R5cGUuZW5jb2RlU2V0UlRDT3V0RGF0YT1mdW5jdGlvbihlLHQsbil7dmFyIGk9dGhpcy5fY29kZWMuZ2V0TW9kdWxlKHVuKTtpLnNldFRhcmdldCh0KSxYKGUpfHwoZT1bZV0pLGR0KGUsKGZ1bmN0aW9uKHQsbil7dC5rZXk9dC5rZXk/dC5rZXkudG9TdHJpbmcoKTp0LmtleSx0LnZhbHVlPXQudmFsdWU/dC52YWx1ZS50b1N0cmluZygpOnQudmFsdWUsZVtuXT10fSkpLGkuc2V0VmFsdWVJbmZvKGUpO3ZhciByPShuPW58fHt9KS5uYW1lLHM9bi5jb250ZW50O3JldHVybiFyZShyKSYmaS5zZXRPYmplY3ROYW1lKHIpLHJlKHMpfHwobmUocykmJihzPUpTT04uc3RyaW5naWZ5KHMpKSxpLnNldENvbnRlbnQocykpLGkuZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLmVjbm9kZUdldFJUQ091dERhdGE9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fY29kZWMuZ2V0TW9kdWxlKGRuKTtyZXR1cm4gdC5zZXRVc2VySWQoZSksdC5nZXRBcnJheURhdGEoKX0sZS5wcm90b3R5cGUuZW5jb2RlU2V0UlRDU3RhdGU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fY29kZWMuZ2V0TW9kdWxlKGNuKTtyZXR1cm4gdC5zZXRTdGF0ZShlKSx0LmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVHZXRSVENSb29tSW5mbz1mdW5jdGlvbigpe3ZhciBlPXRoaXMuX2NvZGVjLmdldE1vZHVsZShwbik7cmV0dXJuIGUuc2V0T3JkZXIoMiksZS5nZXRBcnJheURhdGEoKX0sZS5wcm90b3R5cGUuZW5jb2RlU2V0UlRDVXNlckluZm89ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLl9jb2RlYy5nZXRNb2R1bGUoX24pO3JldHVybiBuLnNldEtleShlKSxuLnNldFZhbHVlKHQpLG4uZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLmVuY29kZVJlbW92ZVJUQ1VzZXJJbmZvPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2NvZGVjLmdldE1vZHVsZSh5bik7cmV0dXJuIHQuc2V0S2V5KGUpLHQuZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLmVuY29kZUlkZW50aXR5Q2hhbmdlSW5mbz1mdW5jdGlvbihlLHQsbil7dm9pZCAwPT09biYmKG49ITEpO3ZhciBpPXRoaXMuX2NvZGVjLmdldE1vZHVsZSh0bik7cmV0dXJuIGkuc2V0Um9vbVR5cGUoeGUuTElWRSksdCYmaS5zZXRCcm9hZGNhc3RUeXBlKHQpLGkuc2V0SWRlbnRpdHlDaGFuZ2VUeXBlKGUpLGkuc2V0TmVlZFN5c0NoYXRyb29tKG4pLGkuZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLmVuY29kZVB1bGxSVENSb29tS1Y9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLl9jb2RlYy5nZXRNb2R1bGUocGkpO3JldHVybiBuLnNldFRpbWVzdGFtcCh0KSxuLnNldFJvb21JZChlKSxuLmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVRdWVyeVVzZXJKb2luZWRJbmZvPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2NvZGVjLmdldE1vZHVsZShfaSk7cmV0dXJuIHQuc2V0VXNlcklkKGUpLHQuZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLmVuY29kZVJlcXVlc3RSb29tUEs9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5pbnZpdGVkUm9vbUlkLG49ZS5pbnZpdGVkVXNlcklkLGk9ZS5pbnZpdGVTZXNzaW9uSWQscj1lLmludml0ZVRpbWVvdXQscz1lLmludml0ZUluZm8sbz10aGlzLl9jb2RlYy5nZXRNb2R1bGUodmkpO3JldHVybiBvLnNldEludml0ZWRSb29tSWQodCksby5zZXRJbnZpdGVkVXNlcklkKG4pLG8uc2V0SW52aXRlU2Vzc2lvbklkKGkpLG8uc2V0VGltZW91dFRpbWUociksby5zZXRJbnZpdGVJbmZvKHMpLG8uZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLmVuY29kZUNhbmNlbFJvb21QSz1mdW5jdGlvbihlKXt2YXIgdD1lLmludml0ZWRSb29tSWQsbj1lLmludml0ZWRVc2VySWQsaT1lLmludml0ZVNlc3Npb25JZCxyPWUuaW52aXRlSW5mbyxzPXRoaXMuX2NvZGVjLmdldE1vZHVsZShFaSk7cmV0dXJuIHMuc2V0SW52aXRlZFJvb21JZCh0KSxzLnNldEludml0ZWRVc2VySWQobikscy5zZXRJbnZpdGVTZXNzaW9uSWQoaSkscy5zZXRJbnZpdGVJbmZvKHIpLHMuZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLmVuY29kZVJlc3BvbnNlUm9vbVBLPWZ1bmN0aW9uKGUpe3ZhciB0PWUuaW52aXRlVXNlcklkLG49ZS5pbnZpdGVSb29tSWQsaT1lLmludml0ZVNlc3Npb25JZCxyPWUuY29udGVudCxzPWUua2V5LG89ZS52YWx1ZSxhPWUuYWdyZWU/MTowLHU9dGhpcy5fY29kZWMuZ2V0TW9kdWxlKFRpKTtyZXR1cm4gdS5zZXRJbnZpdGVVc2VySWQodCksdS5zZXRJbnZpdGVSb29tSWQobiksdS5zZXRJbnZpdGVTZXNzaW9uSWQoaSksdS5zZXRDb250ZW50KHIpLHUuc2V0S2V5KHMpLHUuc2V0VmFsdWUobyksdS5zZXRBbnN3ZXJDb2RlKGEpLHUuZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLmVuY29kZUVuZFJvb21QSz1mdW5jdGlvbihlKXt2YXIgdD1lLmVuZFJvb21JZCxuPWUuc2Vzc2lvbklkLGk9ZS5jb250ZW50LHI9ZS5rZXlzLHM9dGhpcy5fY29kZWMuZ2V0TW9kdWxlKElpKTtyZXR1cm4gcy5zZXRJbnZpdGVSb29tSWQodCkscy5zZXRJbnZpdGVTZXNzaW9uSWQobikscy5zZXRJbnZpdGVDb250ZW50KGkpLHMuc2V0SW52aXRlUm9vbUtleXMocikscy5nZXRBcnJheURhdGEoKX0sZS5wcm90b3R5cGUuZW5jb2RlYmluZFJUQ1Jvb21Gb3JDaGF0cm9vbT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9jb2RlYy5nZXRNb2R1bGUoQ2kpO3JldHVybiB0LnNldFJ0Y1Jvb21JZChlLnJ0Y1Jvb21JZCksdC5nZXRBcnJheURhdGEoKX0sZX0oKSxmcj1mdW5jdGlvbihlLHQpe3RoaXMuX3dhdGNoZXI9dCx0aGlzLmNvZGVjPW5ldyBkcihlKX0scHI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZSYmdD90K1wiX1wiK2U6ZXx8RGF0ZS5ub3coKX0sZ3I9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuaGVhZGVyPWUsdGhpcy5fbmFtZT1udWxsLHRoaXMubGVuZ3RoU2l6ZT0wLHRoaXMubWVzc2FnZUlkPTAsdGhpcy50aW1lc3RhbXA9MCx0aGlzLnN5bmNNc2c9ITEsdGhpcy5pZGVudGlmaWVyPVwiXCJ9cmV0dXJuIGUucHJvdG90eXBlLmdldElkZW50aWZpZXI9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm1lc3NhZ2VJZCx0PXRoaXMuaWRlbnRpZmllcjtyZXR1cm4gcHIoZSx0KX0sZS5wcm90b3R5cGUucmVhZD1mdW5jdGlvbihlLHQsbil7dGhpcy5yZWFkTWVzc2FnZShlLHQsbil9LGUucHJvdG90eXBlLnJlYWRNZXNzYWdlPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm57c3RyZWFtOmUsbGVuZ3RoOnR9fSxlfSgpLF9yPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLmxlbmd0aFNpemU9MCx0aGlzLm1lc3NhZ2VJZD0wLHRoaXMudG9waWM9XCJcIix0aGlzLnRhcmdldElkPVwiXCIsdGhpcy5pZGVudGlmaWVyPVwiXCIsdGhpcy5faGVhZGVyPW5ldyBPdChlLCExLHplLkFUX01PU1RfT05DRSwhMSl9cmV0dXJuIGUucHJvdG90eXBlLmdldElkZW50aWZpZXI9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm1lc3NhZ2VJZCx0PXRoaXMuaWRlbnRpZmllcjtyZXR1cm4gcHIoZSx0KX0sZS5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5nZXRIZWFkZXJGbGFnKCk7ZS53cml0ZSh0KSx0aGlzLndyaXRlTWVzc2FnZShlKX0sZS5wcm90b3R5cGUuc2V0SGVhZGVyUW9zPWZ1bmN0aW9uKGUpe3RoaXMuX2hlYWRlci5xb3M9ZX0sZS5wcm90b3R5cGUuZ2V0SGVhZGVyRmxhZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9oZWFkZXIuZW5jb2RlKCl9LGUucHJvdG90eXBlLmdldExlbmd0aFNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sZW5ndGhTaXplfSxlLnByb3RvdHlwZS5nZXRCdWZmZXJEYXRhPWZ1bmN0aW9uKCl7dmFyIGU9bmV3IEF0O3RoaXMud3JpdGUoZSk7dmFyIHQ9ZS5nZXRCeXRlc0FycmF5KCk7cmV0dXJuIG5ldyBJbnQ4QXJyYXkodCl9LGUucHJvdG90eXBlLmdldENvbWV0RGF0YT1mdW5jdGlvbigpe3ZhciBlPXRoaXMuZGF0YXx8e307cmV0dXJuIEpTT04uc3RyaW5naWZ5KGUpfSxlfSgpLHlyPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXt2YXIgdD1udWxsIT09ZSYmZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXM7cmV0dXJuIHQuX25hbWU9WGUuQ09OTl9BQ0ssdC5zdGF0dXM9bnVsbCx0LnVzZXJJZD1udWxsLHQudGltZXN0YW1wPTAsdH1yZXR1cm4gTih0LGUpLHQucHJvdG90eXBlLnJlYWRNZXNzYWdlPWZ1bmN0aW9uKGUsbixpKXtpZihlLnJlYWRCeXRlKCksdGhpcy5zdGF0dXM9K2UucmVhZEJ5dGUoKSxuPD10Lk1FU1NBR0VfTEVOR1RIKXJldHVybntzdHJlYW06ZSxsZW5ndGg6bn07aWYoaT09PWV0LlY0KXt2YXIgcj1lLnJlYWRCeXRlKCk7MSZyJiYodGhpcy51c2VySWQ9ZS5yZWFkVVRGKCkpLDImciYmZS5yZWFkVVRGKCksNCZyJiYodGhpcy50aW1lc3RhbXA9ZS5yZWFkTG9uZygpKSw4JnImJih0aGlzLm1lc3NhZ2VJZD1lLnJlYWQyQnl0ZSgpKX1lbHNle3RoaXMudXNlcklkPWUucmVhZFVURigpO3ZhciBzPWUucmVhZFVURigpO2dlLmRlYnVnKFwic2VydmVyIHNlc3Npb25JZCAtPiBcIitzKSx0aGlzLnRpbWVzdGFtcD1lLnJlYWRMb25nKCl9cmV0dXJue3N0cmVhbTplLGxlbmd0aDpufX0sdC5NRVNTQUdFX0xFTkdUSD0yLHR9KGdyKSxtcj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7dmFyIHQ9bnVsbCE9PWUmJmUuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzO3JldHVybiB0Ll9uYW1lPVhlLkRJU0NPTk5FQ1QsdC5zdGF0dXM9MCx0fXJldHVybiBOKHQsZSksdC5wcm90b3R5cGUucmVhZE1lc3NhZ2U9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5yZWFkQnl0ZSgpLHRoaXMuc3RhdHVzPStlLnJlYWRCeXRlKCkse3N0cmVhbTplLGxlbmd0aDp0fX0sdC5NRVNTQUdFX0xFTkdUSD0yLHR9KGdyKSx2cj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7dmFyIHQ9ZS5jYWxsKHRoaXMsWmUuUElOR19SRVEpfHx0aGlzO3JldHVybiB0Ll9uYW1lPVhlLlBJTkdfUkVRLHR9cmV0dXJuIE4odCxlKSx0LnByb3RvdHlwZS53cml0ZU1lc3NhZ2U9ZnVuY3Rpb24oZSl7fSx0fShfciksRXI9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0KXt2YXIgbj1lLmNhbGwodGhpcyx0KXx8dGhpcztyZXR1cm4gbi5fbmFtZT1YZS5QSU5HX1JFU1Asbn1yZXR1cm4gTih0LGUpLHR9KGdyKSxUcj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7dmFyIHQ9bnVsbCE9PWUmJmUuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzO3JldHVybiB0Lm1lc3NhZ2VJZD0wLHR9cmV0dXJuIE4odCxlKSx0LnByb3RvdHlwZS5yZWFkTWVzc2FnZT1mdW5jdGlvbihlLHQpe3ZhciBuPTI1NiplLnJlYWRCeXRlKCkrZS5yZWFkQnl0ZSgpO3JldHVybiB0aGlzLm1lc3NhZ2VJZD1wYXJzZUludChuLnRvU3RyaW5nKCksMTApLHtzdHJlYW06ZSxsZW5ndGg6dH19LHR9KGdyKSxJcj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7dmFyIHQ9bnVsbCE9PWUmJmUuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzO3JldHVybiB0Lm1lc3NhZ2VJZD0wLHR9cmV0dXJuIE4odCxlKSx0LnByb3RvdHlwZS53cml0ZU1lc3NhZ2U9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5tZXNzYWdlSWQsbj0yNTUmdCxpPSg2NTI4MCZ0KT4+ODtlLndyaXRlKGkpLGUud3JpdGUobil9LHR9KF9yKSxDcj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7dmFyIHQ9bnVsbCE9PWUmJmUuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzO3JldHVybiB0Ll9uYW1lPVhlLlBVQkxJU0gsdC50b3BpYz1cIlwiLHQudGFyZ2V0SWQ9XCJcIix0LnN5bmNNc2c9ITEsdC5pZGVudGlmaWVyPSRlLlBVQix0fXJldHVybiBOKHQsZSksdC5wcm90b3R5cGUucmVhZE1lc3NhZ2U9ZnVuY3Rpb24odCxuKXtyZXR1cm4gdGhpcy5kYXRlPXQucmVhZEludCgpLHRoaXMudG9waWM9dC5yZWFkVVRGKCksdGhpcy50YXJnZXRJZD10LnJlYWRVVEYoKSxlLnByb3RvdHlwZS5yZWFkTWVzc2FnZS5jYWxsKHRoaXMsdCxuKSx0aGlzLmRhdGE9dC5yZWFkQWxsKCkse3N0cmVhbTp0LGxlbmd0aDpufX0sdH0oVHIpLFJyPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxuLGkpe3ZhciByPWUuY2FsbCh0aGlzLFplLlBVQkxJU0gpfHx0aGlzO3JldHVybiByLl9uYW1lPVhlLlBVQkxJU0gsci5zeW5jTXNnPSExLHIuaWRlbnRpZmllcj0kZS5QVUIsci50b3BpYz10LHIuZGF0YT1KKG4pP010LndyaXRlVVRGKG4pOm4sci50YXJnZXRJZD1pLHJ9cmV0dXJuIE4odCxlKSx0LnByb3RvdHlwZS53cml0ZU1lc3NhZ2U9ZnVuY3Rpb24odCl7dC53cml0ZVVURih0aGlzLnRvcGljKSx0LndyaXRlVVRGKHRoaXMudGFyZ2V0SWQpLGUucHJvdG90eXBlLndyaXRlTWVzc2FnZS5jYWxsKHRoaXMsdCksdC53cml0ZSh0aGlzLmRhdGEpfSx0fShJciksU3I9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3ZhciB0PW51bGwhPT1lJiZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpcztyZXR1cm4gdC5fbmFtZT1YZS5QVUJfQUNLLHQuc3RhdHVzPTAsdC5kYXRlPTAsdC5taWxsaXNlY29uZD0wLHQubWVzc2FnZVVJZD1cIlwiLHQudGltZXN0YW1wPTAsdC5pZGVudGlmaWVyPSRlLlBVQix0LnRvcGljPVwiXCIsdC50YXJnZXRJZD1cIlwiLHR9cmV0dXJuIE4odCxlKSx0LnByb3RvdHlwZS5yZWFkTWVzc2FnZT1mdW5jdGlvbih0LG4pe3JldHVybiBlLnByb3RvdHlwZS5yZWFkTWVzc2FnZS5jYWxsKHRoaXMsdCxuKSx0aGlzLmRhdGU9dC5yZWFkSW50KCksdGhpcy5zdGF0dXM9MjU2KnQucmVhZEJ5dGUoKSt0LnJlYWRCeXRlKCksdGhpcy5taWxsaXNlY29uZD0yNTYqdC5yZWFkQnl0ZSgpK3QucmVhZEJ5dGUoKSx0aGlzLnRpbWVzdGFtcD0xZTMqdGhpcy5kYXRlK3RoaXMubWlsbGlzZWNvbmQsdGhpcy5tZXNzYWdlVUlkPXQucmVhZFVURigpLHtzdHJlYW06dCxsZW5ndGg6bn19LHR9KFRyKSxOcj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQpe3ZhciBuPWUuY2FsbCh0aGlzLFplLlBVQl9BQ0spfHx0aGlzO3JldHVybiBuLl9uYW1lPVhlLlBVQl9BQ0ssbi5zdGF0dXM9MCxuLmRhdGU9MCxuLm1pbGxpc2Vjb25kPTAsbi5tZXNzYWdlVUlkPVwiXCIsbi50aW1lc3RhbXA9MCxuLm1lc3NhZ2VJZD10LG59cmV0dXJuIE4odCxlKSx0LnByb3RvdHlwZS53cml0ZU1lc3NhZ2U9ZnVuY3Rpb24odCl7ZS5wcm90b3R5cGUud3JpdGVNZXNzYWdlLmNhbGwodGhpcyx0KX0sdH0oSXIpLE9yPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxuLGkpe3ZhciByPWUuY2FsbCh0aGlzLFplLlFVRVJZKXx8dGhpcztyZXR1cm4gci5uYW1lPVhlLlFVRVJZLHIuaWRlbnRpZmllcj0kZS5RVUVSWSxyLnRvcGljPXQsci5kYXRhPUoobik/TXQud3JpdGVVVEYobik6bixyLnRhcmdldElkPWkscn1yZXR1cm4gTih0LGUpLHQucHJvdG90eXBlLndyaXRlTWVzc2FnZT1mdW5jdGlvbih0KXt0LndyaXRlVVRGKHRoaXMudG9waWMpLHQud3JpdGVVVEYodGhpcy50YXJnZXRJZCksZS5wcm90b3R5cGUud3JpdGVNZXNzYWdlLmNhbGwodGhpcyx0KSx0LndyaXRlKHRoaXMuZGF0YSl9LHR9KElyKSxNcj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQpe3ZhciBuPWUuY2FsbCh0aGlzLFplLlFVRVJZX0NPTkZJUk0pfHx0aGlzO3JldHVybiBuLl9uYW1lPVhlLlFVRVJZX0NPTixuLm1lc3NhZ2VJZD10LG59cmV0dXJuIE4odCxlKSx0fShJciksd3I9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3ZhciB0PW51bGwhPT1lJiZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpcztyZXR1cm4gdC5fbmFtZT1YZS5RVUVSWV9BQ0ssdC5zdGF0dXM9MCx0LmlkZW50aWZpZXI9JGUuUVVFUlksdC50b3BpYz1cIlwiLHQudGFyZ2V0SWQ9XCJcIix0fXJldHVybiBOKHQsZSksdC5wcm90b3R5cGUucmVhZE1lc3NhZ2U9ZnVuY3Rpb24odCxuKXtyZXR1cm4gZS5wcm90b3R5cGUucmVhZE1lc3NhZ2UuY2FsbCh0aGlzLHQsbiksdGhpcy5kYXRlPXQucmVhZEludCgpLHRoaXMuc3RhdHVzPTI1Nip0LnJlYWRCeXRlKCkrdC5yZWFkQnl0ZSgpLHRoaXMuZGF0YT10LnJlYWRBbGwoKSx7c3RyZWFtOnQsbGVuZ3RoOm59fSx0fShUciksQXI9ZnVuY3Rpb24oZSl7dmFyIHQsbj1lLnR5cGU7c3dpdGNoKG4pe2Nhc2UgWmUuQ09OTl9BQ0s6dD1uZXcgeXIoZSk7YnJlYWs7Y2FzZSBaZS5QVUJMSVNIOih0PW5ldyBDcihlKSkuc3luY01zZz1lLnN5bmNNc2c7YnJlYWs7Y2FzZSBaZS5QVUJfQUNLOnQ9bmV3IFNyKGUpO2JyZWFrO2Nhc2UgWmUuUVVFUllfQUNLOnQ9bmV3IHdyKGUpO2JyZWFrO2Nhc2UgWmUuU1VCX0FDSzpjYXNlIFplLlVOU1VCX0FDSzpjYXNlIFplLlBJTkdfUkVTUDp0PW5ldyBFcihlKTticmVhaztjYXNlIFplLkRJU0NPTk5FQ1Q6dD1uZXcgbXIoZSk7YnJlYWs7ZGVmYXVsdDp0PW5ldyBncihlKSxnZS5lcnJvcihcIk5vIHN1cHBvcnQgZm9yIGRlc2VyaWFsaXppbmcgXCIrbitcIiBtZXNzYWdlc1wiKX1yZXR1cm4gdH07IWZ1bmN0aW9uKGUpe2VbZS5wcE1zZ1A9MV09XCJwcE1zZ1BcIixlW2UucHBNc2dOPTJdPVwicHBNc2dOXCIsZVtlLnBwTXNnUz0zXT1cInBwTXNnU1wiLGVbZS5wZ01zZ1A9NF09XCJwZ01zZ1BcIixlW2UuY2hhdE1zZz01XT1cImNoYXRNc2dcIixlW2UucGNNc2dQPTZdPVwicGNNc2dQXCIsZVtlLnFyeVBNc2c9N109XCJxcnlQTXNnXCIsZVtlLnFyeUdNc2c9OF09XCJxcnlHTXNnXCIsZVtlLnFyeUNITXNnPTldPVwicXJ5Q0hNc2dcIixlW2UucXJ5Q01zZz0xMF09XCJxcnlDTXNnXCIsZVtlLnFyeVNNc2c9MTFdPVwicXJ5U01zZ1wiLGVbZS5yZWNhbGxNc2c9MTJdPVwicmVjYWxsTXNnXCIsZVtlLnByTXNnUz0xM109XCJwck1zZ1NcIixlW2UucnJNc2c9MTRdPVwicnJNc2dcIixlW2UucnJMaXN0PTE1XT1cInJyTGlzdFwiLGVbZS5zX250Zj0xNl09XCJzX250ZlwiLGVbZS5zX21zZz0xN109XCJzX21zZ1wiLGVbZS5zX3N0YXQ9MThdPVwic19zdGF0XCIsZVtlLnNfY21kPTE5XT1cInNfY21kXCIsZVtlLnNfdXM9MjBdPVwic191c1wiLGVbZS5wdWxsVVM9MjFdPVwicHVsbFVTXCIsZVtlLnBnTXNnUz0yMl09XCJwZ01zZ1NcIixlW2UuY2hhdE1zZ1M9MjNdPVwiY2hhdE1zZ1NcIixlW2UucXJ5U2Vzc2lvbnNBdHQ9MjRdPVwicXJ5U2Vzc2lvbnNBdHRcIixlW2UucHVsbE1zZz0yNV09XCJwdWxsTXNnXCIsZVtlLnFyeVNlc3Npb25zPTI2XT1cInFyeVNlc3Npb25zXCIsZVtlLmRlbFNlc3Npb25zPTI3XT1cImRlbFNlc3Npb25zXCIsZVtlLmRlbE1zZz0yOF09XCJkZWxNc2dcIixlW2UudXBkUlJUaW1lPTI5XT1cInVwZFJSVGltZVwiLGVbZS5jaHJtUHVsbD0zMF09XCJjaHJtUHVsbFwiLGVbZS5qb2luQ2hybT0zMV09XCJqb2luQ2hybVwiLGVbZS5qb2luQ2hybVI9MzJdPVwiam9pbkNocm1SXCIsZVtlLmV4aXRDaHJtPTMzXT1cImV4aXRDaHJtXCIsZVtlLnF1ZXJ5Q2hybUk9MzRdPVwicXVlcnlDaHJtSVwiLGVbZS5zZXRLVj0zNV09XCJzZXRLVlwiLGVbZS5kZWxLVj0zNl09XCJkZWxLVlwiLGVbZS5wdWxsS1Y9MzddPVwicHVsbEtWXCIsZVtlLnFyeVJlbGF0aW9uPTM4XT1cInFyeVJlbGF0aW9uXCIsZVtlLmRlbFJlbGF0aW9uPTM5XT1cImRlbFJlbGF0aW9uXCIsZVtlLnB1bGxTZUF0dHM9NDBdPVwicHVsbFNlQXR0c1wiLGVbZS5zZXRTZUF0dD00MV09XCJzZXRTZUF0dFwiLGVbZS5xblRrbj00Ml09XCJxblRrblwiLGVbZS5xblVybD00M109XCJxblVybFwiLGVbZS5hbGlVcmw9NDRdPVwiYWxpVXJsXCIsZVtlLnMzVXJsPTQ1XT1cInMzVXJsXCIsZVtlLnN0Y1VybD00Nl09XCJzdGNVcmxcIixlW2UuY2xlYW5QTXNnPTQ3XT1cImNsZWFuUE1zZ1wiLGVbZS5jbGVhbkdNc2c9NDhdPVwiY2xlYW5HTXNnXCIsZVtlLmNsZWFuQ01zZz00OV09XCJjbGVhbkNNc2dcIixlW2UuY2xlYW5TTXNnPTUwXT1cImNsZWFuU01zZ1wiLGVbZS5ydGNSSm9pbl9kYXRhPTUxXT1cInJ0Y1JKb2luX2RhdGFcIixlW2UucnRjUkV4aXQ9NTJdPVwicnRjUkV4aXRcIixlW2UucnRjUGluZz01M109XCJydGNQaW5nXCIsZVtlLnJ0Y1NldERhdGE9NTRdPVwicnRjU2V0RGF0YVwiLGVbZS5ydGNfbnRmPTU1XT1cInJ0Y19udGZcIixlW2Uudmlld2VySm9pblI9NTZdPVwidmlld2VySm9pblJcIixlW2Uudmlld2VyRXhpdFI9NTddPVwidmlld2VyRXhpdFJcIixlW2UucnRjUHVsbEt2PTU4XT1cInJ0Y1B1bGxLdlwiLGVbZS5ydGNJZGVudGl0eUNoYW5nZT01OV09XCJydGNJZGVudGl0eUNoYW5nZVwiLGVbZS51c2VyU2V0RGF0YT02MF09XCJ1c2VyU2V0RGF0YVwiLGVbZS5ydGNRcnlEYXRhPTYxXT1cInJ0Y1FyeURhdGFcIixlW2UucnRjRGVsRGF0YT02Ml09XCJydGNEZWxEYXRhXCIsZVtlLnJ0Y1NldE91dERhdGE9NjNdPVwicnRjU2V0T3V0RGF0YVwiLGVbZS5ydGNRcnlVc2VyT3V0RGF0YT02NF09XCJydGNRcnlVc2VyT3V0RGF0YVwiLGVbZS5ydGNUb2tlbj02NV09XCJydGNUb2tlblwiLGVbZS5ydGNVc2VyU3RhdGU9NjZdPVwicnRjVXNlclN0YXRlXCIsZVtlLnJ0Y1JJbmZvPTY3XT1cInJ0Y1JJbmZvXCIsZVtlLnJ0Y1VEYXRhPTY4XT1cInJ0Y1VEYXRhXCIsZVtlLnJ0Y1VQdXQ9NjldPVwicnRjVVB1dFwiLGVbZS5ydGNVRGVsPTcwXT1cInJ0Y1VEZWxcIixlW2UucnRjVUxpc3Q9NzFdPVwicnRjVUxpc3RcIixlW2UucnRjUXVlcnlKb2luZWQ9NzJdPVwicnRjUXVlcnlKb2luZWRcIixlW2UucnRjSW52aXRlPTczXT1cInJ0Y0ludml0ZVwiLGVbZS5ydGNDYW5jZWxJbnZpdGU9NzRdPVwicnRjQ2FuY2VsSW52aXRlXCIsZVtlLnJ0Y0ludml0ZUFuc3dlcj03NV09XCJydGNJbnZpdGVBbnN3ZXJcIixlW2UucnRjRW5kSW52aXRlPTc2XT1cInJ0Y0VuZEludml0ZVwiLGVbZS5hZGRTZVRhZz03N109XCJhZGRTZVRhZ1wiLGVbZS5kZWxTZVRhZz03OF09XCJkZWxTZVRhZ1wiLGVbZS5hZGRUYWc9NzldPVwiYWRkVGFnXCIsZVtlLmRlbFRhZz04MF09XCJkZWxUYWdcIixlW2UuZGlzVGFnPTgxXT1cImRpc1RhZ1wiLGVbZS5yZXBvcnRzZGs9ODJdPVwicmVwb3J0c2RrXCIsZVtlLnB1bGxVZ1Nlcz04M109XCJwdWxsVWdTZXNcIixlW2UucHVsbFVnTXNnPTg0XT1cInB1bGxVZ01zZ1wiLGVbZS51Z01zZz04NV09XCJ1Z01zZ1wiLGVbZS5xcnlVZ01zZz04Nl09XCJxcnlVZ01zZ1wiLGVbZS51cGRVZ1JUaW1lPTg3XT1cInVwZFVnUlRpbWVcIixlW2UudXBNc2dFeD04OF09XCJ1cE1zZ0V4XCIsZVtlLm1vZGlmeU1zZz04OV09XCJtb2RpZnlNc2dcIixlW2UucXJ5TXNnQ2hhbmdlPTkwXT1cInFyeU1zZ0NoYW5nZVwiLGVbZS5xcnlNc2c9OTFdPVwicXJ5TXNnXCIsZVtlLm9wZXJhdGU9OTJdPVwib3BlcmF0ZVwiLGVbZS5zX29wTnRmPTkzXT1cInNfb3BOdGZcIixlW2Uuc2V0UnRjUm9vbUlkPTk0XT1cInNldFJ0Y1Jvb21JZFwifShWaXx8KFZpPXt9KSk7dmFyIFVyLGJyPVZpLExyPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBNKHZvaWQgMCx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciByO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKHMpe3JldHVybiByPTAsZS5mb3JFYWNoKChmdW5jdGlvbihzKXtyZXR1cm4gTSh2b2lkIDAsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbyxhLHU7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oYyl7c3dpdGNoKGMubGFiZWwpe2Nhc2UgMDpvPXQrXCI6Ly9cIitzK1wiL3Bpbmc/cj1cIisobD05OTk5LChoPTFlMykrTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKihsLWgpKSksZ2UuZGVidWcoXCJzdGFydCBwaW5nXCIsbykscisrLGMubGFiZWw9MTtjYXNlIDE6cmV0dXJuIGMudHJ5cy5wdXNoKFsxLDMsLDRdKSxbNCxuLmh0dHBSZXEoe3VybDpvLHRpbWVvdXQ6NWUzfSldO2Nhc2UgMjpyZXR1cm4gYT1jLnNlbnQoKSxbMyw0XTtjYXNlIDM6cmV0dXJuIHU9Yy5zZW50KCksZ2UuZXJyb3IoXCJwaW5nIGVycm9yOiBcIix1KSxpKHtmaW5pc2hlZDpyPT09ZS5sZW5ndGgsY29kZTotMixob3N0OnN9KSxbMl07Y2FzZSA0OnJldHVybiBnZS5kZWJ1ZyhcImVuZCBwaW5nXCIscixvLG51bGw9PWE/dm9pZCAwOmEuc3RhdHVzKSxpKHtmaW5pc2hlZDpyPT09ZS5sZW5ndGgsY29kZTphLnN0YXR1cyxob3N0OnN9KSxbMl19dmFyIGgsbH0pKX0pKX0pKSxbMl19KSl9KSl9LFByPWZ1bmN0aW9uKGUsdCxuLGkscixzLG8sYSl7cmV0dXJuIGUrXCI6Ly9cIit0K1wiL3dlYnNvY2tldD9hcHBJZD1cIituK1wiJnRva2VuPVwiK2VuY29kZVVSSUNvbXBvbmVudChpKStcIiZzZGtWZXI9XCIrcytcIiZwaWQ9XCIrbytcIiZhcGlWZXI9XCIrKHIuaXNGcm9tVW5pYXBwP1widW5pYXBwXCI6XCJub3JtYWxcIikrKHIuY29ubmVjdFBsYXRmb3JtP1wiJnBsYXRmb3JtPVwiK3IuY29ubmVjdFBsYXRmb3JtOlwiXCIpKyhhP1wiJnByb3RvY29sVmVyPVwiK2E6XCJcIil9LERyPWZ1bmN0aW9uKGUpe3JldHVybltici5wcE1zZ1MsYnIucGdNc2dTLGJyLmNoYXRNc2dTXS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBicltlXX0pKS5pbmRleE9mKGUpPj0wfTshZnVuY3Rpb24oZSl7ZVtlLlJFRElSRUNUPTBdPVwiUkVESVJFQ1RcIixlW2UuT1RIRVJfREVWSUNFX0xPR0lOPTFdPVwiT1RIRVJfREVWSUNFX0xPR0lOXCIsZVtlLkJMT0NLPTJdPVwiQkxPQ0tcIixlW2UuUkVNT1RFX0NMT1NFPTNdPVwiUkVNT1RFX0NMT1NFXCIsZVtlLkxPR09VVD00XT1cIkxPR09VVFwiLGVbZS5CTE9DS19ORVc9NV09XCJCTE9DS19ORVdcIixlW2UuUkVESVJFQ1RfTkVXPTZdPVwiUkVESVJFQ1RfTkVXXCJ9KFVyfHwoVXI9e30pKTt2YXIgVnIsa3I9ZnVuY3Rpb24oZSx0KXtnZS5pbmZvKFwid2Vic29ja2V0IHNlbmQgLT4gbWVzc2FnZUlkOiBcIitlLm1lc3NhZ2VJZCtcIiB0b3BpYzogXCIrZS50b3BpYyk7dmFyIG49ZS5nZXRCdWZmZXJEYXRhKCk7dC5zZW5kKG4uYnVmZmVyKX0seHI9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LG4pe3ZhciBpPWUuY2FsbCh0aGlzLFwid2Vic29ja2V0XCIsbil8fHRoaXM7cmV0dXJuIGkuX3J1bnRpbWU9dCxpLl9zb2NrZXQ9bnVsbCxpLl9tZXNzYWdlSWRzPXt9LGkuX3N5bmNNZXNzYWdlSWRzPXt9LGkuX2ZhaWxlZENvdW50PTAsaS5BTExPV19GQUlMRURfVElNRVM9MixpLl90aW1lcj1udWxsLGkuX2lkQ291bnQ9MCxpLl9nZW5lcmF0ZU1lc3NhZ2VJZD1mdW5jdGlvbigpe3JldHVybiBpLl9pZENvdW50Pj02NTUzNSYmKGkuX2lkQ291bnQ9MCksKytpLl9pZENvdW50fSxpfXJldHVybiBOKHQsZSksdC5wcm90b3R5cGUuY29ubmVjdD1mdW5jdGlvbihlLHQsbixpLHIscyl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBvPXRoaXM7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oYSl7cmV0dXJuWzIsbmV3IFByb21pc2UoKGZ1bmN0aW9uKGEpe3ZhciB1PVtdLGM9MCxoPSExLGw9ITEsZD1mdW5jdGlvbigpe3JldHVybiBNKG8sdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbjtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihvKXtzd2l0Y2goby5sYWJlbCl7Y2FzZSAwOnJldHVybiAwPT09dS5sZW5ndGh8fGg/WzJdOihoPSEwLFs0LHRoaXMuX2Nvbm5lY3QoZSx0LHUuc2hpZnQoKSxpLHIscyldKTtjYXNlIDE6aWYoKG49by5zZW50KCkpPT09RWUuU1VDQ0VTUyl0aGlzLl9jaGVja0FsaXZlKCksYShuKTtlbHNlIGlmKG49PT1DZS5SRURJUkVDVClhKG4pO2Vsc2V7aWYobCYmMD09PXUubGVuZ3RoKXJldHVybiBhKEV0KG4pKSxbMl07aD0hMSxkKCl9cmV0dXJuWzJdfX0pKX0pKX07cj14KHIpLG8uX3dhdGNoZXIuc3RhdHVzKEllLkNPTk5FQ1RJTkcpLExyKG4saSxvLl9ydW50aW1lLChmdW5jdGlvbihlKXt2YXIgdD1lLmNvZGUsbj1lLmZpbmlzaGVkLGk9ZS5ob3N0O2w9biwyMDA9PT10JiYodS5wdXNoKGkpLGMrKyxkKCkpLG4mJjA9PT1jJiYoZ2UuZXJyb3IoXCJObyB2YWxpZCB3ZWJzb2NrZXQgc2VydmVyIGhvc3RzIVwiKSxhKEVlLlJDX1NPQ0tFVF9OT1RfQ1JFQVRFRCkpfSkpfSkpXX0pKX0pKX0sdC5wcm90b3R5cGUuX2Nvbm5lY3Q9ZnVuY3Rpb24oZSx0LG4saSxyLHMpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbyxhLHUsYyxoLGw9dGhpcztyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihkKXtzd2l0Y2goZC5sYWJlbCl7Y2FzZSAwOnJldHVybiBvPWkucmVwbGFjZShcImh0dHBcIixcIndzXCIpLGE9UHIobyxuLGUsdCx0aGlzLl9ydW50aW1lLHIsXCJcIixzKSxnZS5kZWJ1ZyhcImNvbmVuY3Qgc3RhcnQgLT4gXCIrYSksdGhpcy5zZW5kQ29ubmVjdFRpbWU9RGF0ZS5ub3coKSx1PXRoaXMuX3J1bnRpbWUuY3JlYXRlV2ViU29ja2V0KGEpLGM9ZnVuY3Rpb24oZSl7bC5fdGltZXImJihjbGVhclRpbWVvdXQobC5fdGltZXIpLGwuX3RpbWVyPW51bGwpLGwuX3NvY2tldD09PXUmJihsLl9zb2NrZXQ9bnVsbCxsLl93YXRjaGVyLnN0YXR1cyhlKSl9LFs0LG5ldyBQcm9taXNlKChmdW5jdGlvbihlKXt1Lm9uTWVzc2FnZSgoZnVuY3Rpb24odCl7aWYoXCJbb2JqZWN0IEFycmF5QnVmZmVyXVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHQpKXt2YXIgbj1mdW5jdGlvbihlLHQpe3ZhciBuPW5ldyBVaW50OEFycmF5KGUpLGk9bmV3IHd0KG4pLHI9aS5yZWFkQnl0ZSgpLHM9bmV3IE90KHIpLG89QXIocyk7cmV0dXJuIG8ucmVhZChpLG4ubGVuZ3RoLTEsdCksb30odCxzKTtpZihuIGluc3RhbmNlb2YgRXImJmwuX3BpbmdSZXNvbHZlKXJldHVybiBsLl9waW5nUmVzb2x2ZShFZS5TVUNDRVNTKSx2b2lkKGwuX3BpbmdSZXNvbHZlPXZvaWQgMCk7aWYobiBpbnN0YW5jZW9mIHlyKXJldHVybiBnZS5kZWJ1ZyhcInJlY3YgY29ubmVjdCBhY2sgLT4gXCIrbi5zdGF0dXMpLG4uc3RhdHVzIT09Q2UuQUNDRVBURUQ/KGdlLndhcm4oXCJjb25uZWN0IGZhaWxlZDogXCIrbi5zdGF0dXMpLHZvaWQgZShuLnN0YXR1cykpOihnZS5pbmZvKFwiY29ubmVjdCBzdWNjZXNzIC0+IFwiK2EpLGwuY29ubmVjdGVkVGltZT1uLnRpbWVzdGFtcCxsLnVzZXJJZD1uLnVzZXJJZHx8XCJcIixsLl9pZENvdW50PW4ubWVzc2FnZUlkLHZvaWQgZShFZS5TVUNDRVNTKSk7aWYobiBpbnN0YW5jZW9mIG1yKXt2YXIgaT1uLnN0YXR1cztzd2l0Y2goZ2Uud2FybihcInJlY3YgZGlzY29ubmVjdCBzaWduYWwgLT4gc3RhdHVzOiBcIitpKSxpKXtjYXNlIFVyLkJMT0NLX05FVzpjYXNlIFVyLkJMT0NLOmwuX3dhdGNoZXIuc3RhdHVzKEllLkJMT0NLRUQpO2JyZWFrO2Nhc2UgVXIuT1RIRVJfREVWSUNFX0xPR0lOOmwuX3dhdGNoZXIuc3RhdHVzKEllLktJQ0tFRF9PRkZMSU5FX0JZX09USEVSX0NMSUVOVCk7YnJlYWs7Y2FzZSBVci5SRURJUkVDVF9ORVc6Y2FzZSBVci5SRURJUkVDVDpsLl93YXRjaGVyLnN0YXR1cyhJZS5SRURJUkVDVCk7YnJlYWs7ZGVmYXVsdDpsLl93YXRjaGVyLnN0YXR1cyhJZS5ESVNDT05ORUNUX0JZX1NFUlZFUil9fWVsc2UgbC5fb25SZWNlaXZlU2lnbmFsKG4pfWVsc2UgZ2UuZXJyb3IoXCJTb2NrZXQgcmVjZWl2ZWQgaW52YWxpZCBkYXRhOlwiLHQpfSkpLHUub25DbG9zZSgoZnVuY3Rpb24odCxuKXtmb3IodmFyIGkgaW4gZ2Uud2FybihcIndlYnNvY2tldCBjbG9zZWQhIGNvZGU6XCIsdCxcInJlYXNvbjpcIixuKSxjKEllLkNPTk5FQ1RJT05fQ0xPU0VEKSxsLl9tZXNzYWdlSWRzKXt2YXIgcj1sLl9tZXNzYWdlSWRzW2ldO2RlbGV0ZSBsLl9tZXNzYWdlSWRzW2ldLHIoRWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRCl9ZSh0KX0pKSx1Lm9uRXJyb3IoKGZ1bmN0aW9uKHQpe3ZhciBuO2Zvcih2YXIgaSBpbiBnZS5lcnJvcihcIndlYnNvY2tldCBlcnJvciFcIixudWxsPT09KG49dCl8fHZvaWQgMD09PW4/dm9pZCAwOm4uc3RhY2spLGMoSWUuV0VCU09DS0VUX0VSUk9SKSxsLl9tZXNzYWdlSWRzKXt2YXIgcj1sLl9tZXNzYWdlSWRzW2ldO2RlbGV0ZSBsLl9tZXNzYWdlSWRzW2ldLHIoRWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRCl9ZShFZS5ORVRXT1JLX0VSUk9SKX0pKSx1Lm9uT3BlbigoZnVuY3Rpb24oKXtyZXR1cm4gZ2UuZGVidWcoXCJ3ZWJzb2NrZXQgb3BlbiA9PlwiLGEpfSkpLHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7ZShFZS5USU1FT1VUKX0pLDVlMyl9KSldO2Nhc2UgMTpyZXR1cm4oaD1kLnNlbnQoKSk9PT1FZS5TVUNDRVNTP3RoaXMuX3NvY2tldD11OihnZS53YXJuKFwiY29ubmVjdCByZXN1bHQgLT4gY29kZTogXCIraCtcIiwgdXJsOiBcIithKSx1LmNsb3NlKCkpLFsyLGhdfX0pKX0pKX0sdC5wcm90b3R5cGUuX2NoZWNrQWxpdmU9ZnVuY3Rpb24oKXt2YXIgZTtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHQsbj10aGlzO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGkpe3N3aXRjaChpLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuX3NvY2tldD8oZ2UuZGVidWcoXCJzZW5kIHBpbmcgLT5cIiksdGhpcy5zZW5kT25seShuZXcgdnIpLFs0LG5ldyBQcm9taXNlKChmdW5jdGlvbihlKXtuLl9waW5nUmVzb2x2ZT1lLG4uX3RpbWVyJiZjbGVhclRpbWVvdXQobi5fdGltZXIpLG4uX3RpbWVyPXNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7bi5fcGluZ1Jlc29sdmU9dm9pZCAwLGUoRWUuVElNRU9VVCl9KSwxNWUzKX0pKV0pOlsyXTtjYXNlIDE6cmV0dXJuKHQ9aS5zZW50KCkpIT09RWUuU1VDQ0VTUz8odGhpcy5fZmFpbGVkQ291bnQrPTEsZ2Uud2FybihcInBpbmcgZmFpbGVkIGNvdW50OiBcIit0aGlzLl9mYWlsZWRDb3VudCtcIiwgY29kZTogXCIrdCksdGhpcy5fZmFpbGVkQ291bnQ+PXRoaXMuQUxMT1dfRkFJTEVEX1RJTUVTPyh0aGlzLl9mYWlsZWRDb3VudD0wLGdlLndhcm4oXCJwaW5nIHRpbWVvdXQsIGNsb3NlIGN1cnJlbnQgd2Vic29ja2V0IHRvIHJlY29ubmVjdCFcIiksbnVsbD09PShlPXRoaXMuX3NvY2tldCl8fHZvaWQgMD09PWV8fGUuY2xvc2UoKSx0aGlzLl93YXRjaGVyLnN0YXR1cyhJZS5ORVRXT1JLX1VOQVZBSUxBQkxFKSk6dGhpcy5fY2hlY2tBbGl2ZSgpLFsyXSk6KGdlLmRlYnVnKFwicmVjdiBwb25nIDwtXCIpLHRoaXMuX2ZhaWxlZENvdW50PTAsc2V0VGltZW91dCgoZnVuY3Rpb24oKXtyZXR1cm4gbi5fY2hlY2tBbGl2ZSgpfSksMTVlMyksWzJdKX19KSl9KSl9LHQucHJvdG90eXBlLl9vblJlY2VpdmVTaWduYWw9ZnVuY3Rpb24oZSl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciB0LG4saSxyLHMsbyxhPXRoaXM7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24odSl7c3dpdGNoKHUubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdD1lLm1lc3NhZ2VJZCxlLmhlYWRlciYmZS5oZWFkZXIucW9zIT09emUuQVRfTU9TVF9PTkNFJiYoZSBpbnN0YW5jZW9mIENyJiYhZS5zeW5jTXNnJiYoZ2UuaW5mbyhcInNlbmQgcHViQWNrIC0+IFwiK3QrXCIgXCIrZS50b3BpYyksdGhpcy5zZW5kT25seShuZXcgTnIodCkpKSxlIGluc3RhbmNlb2Ygd3ImJihnZS5pbmZvKFwic2VuZCBxdWVyeUNvbiAtPiBcIit0K1wiIFwiK2UudG9waWMpLHRoaXMuc2VuZE9ubHkobmV3IE1yKHQpKSkpLHQ+MCYmKGUgaW5zdGFuY2VvZiBTcnx8ZSBpbnN0YW5jZW9mIHdyKSYmKGdlLmluZm8oXCJyZWN2IGFjayAtPiBtZXNzYWdlSWQ6IFwiK3QrXCIgXCIrZS50b3BpYyksKG49dGhpcy5fbWVzc2FnZUlkc1t0XSkmJihuKGUpLGRlbGV0ZSB0aGlzLl9tZXNzYWdlSWRzW3RdKSwoaT10aGlzLl9zeW5jTWVzc2FnZUlkc1t0XSkmJihkZWxldGUgdGhpcy5fc3luY01lc3NhZ2VJZHNbdF0saShlKSkpLGUgaW5zdGFuY2VvZiBDcj8ocj1lLnN5bmNNc2cscz1lLnRvcGljLGdlLmluZm8oXCJyZWN2IFB1Ymxpc2hSZWFkZXIgLT4gbWVzc2FnZUlkOiBcIit0K1wiIFwiK3MpLHM9PT1icltici51c2VyU2V0RGF0YV0/WzJdOiFyfHxEcihzKT8odGhpcy5fd2F0Y2hlci5zaWduYWwoZSksWzJdKTpbNCxuZXcgUHJvbWlzZSgoZnVuY3Rpb24oZSl7YS5fc3luY01lc3NhZ2VJZHNbdF09ZX0pKV0pOlszLDJdO2Nhc2UgMTpvPXUuc2VudCgpLGRlbGV0ZSB0aGlzLl9zeW5jTWVzc2FnZUlkc1t0XSx0aGlzLl93YXRjaGVyLnNpZ25hbChlLG8pLHUubGFiZWw9MjtjYXNlIDI6cmV0dXJuWzJdfX0pKX0pKX0sdC5wcm90b3R5cGUuc2VuZE9ubHk9ZnVuY3Rpb24oZSl7dGhpcy5fc29ja2V0JiYoKGUgaW5zdGFuY2VvZiBScnx8ZSBpbnN0YW5jZW9mIE9yKSYmKGUubWVzc2FnZUlkPXRoaXMuX2dlbmVyYXRlTWVzc2FnZUlkKCkpLGtyKGUsdGhpcy5fc29ja2V0KSl9LHQucHJvdG90eXBlLnNlbmQ9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIHZvaWQgMD09PWkmJihpPTNlNCksTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHIscyxvLGE9dGhpcztyZXR1cm4gdyh0aGlzLChmdW5jdGlvbih1KXtzd2l0Y2godS5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9zb2NrZXQ/KHI9dGhpcy5fZ2VuZXJhdGVNZXNzYWdlSWQoKSxlLm1lc3NhZ2VJZD1yLGtyKGUsdGhpcy5fc29ja2V0KSxbNCxuZXcgUHJvbWlzZSgoZnVuY3Rpb24oZSl7YS5fbWVzc2FnZUlkc1tyXT1lLHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7YS5fbWVzc2FnZUlkc1tyXSYmZGVsZXRlIGEuX21lc3NhZ2VJZHNbcl0sZSgpfSksaSl9KSldKTpbMywyXTtjYXNlIDE6cmV0dXJuKHM9dS5zZW50KCkpP3MgaW5zdGFuY2VvZiB3cnx8cyBpbnN0YW5jZW9mIFNyPyhvPXQmJnMuZGF0YT90aGlzLmNvZGVjLmRlY29kZUJ5UEJOYW1lKHMuZGF0YSx0LG4pOnMsMCE9PXMuc3RhdHVzPyhnZS53YXJuKFwic2VuZCBmYWlsZWQgLT4gbWVzc2FnZTogXCIrcitcIiwgcmVzcFBCTmFtZTogXCIrdCtcIiwgc3RhdHVzOiBcIitzLnN0YXR1cyksWzIse2NvZGU6cy5zdGF0dXMsZGF0YTp0JiZzLmRhdGE/bzpudWxsfV0pOlsyLHtjb2RlOkVlLlNVQ0NFU1MsZGF0YTpvfV0pOlsyLHtjb2RlOnN9XTooZ2Uud2FybihcInNlbmQgdGltZW91dCAtPiBtZXNzYWdlOiBcIityK1wiLCByZXNwUEJOYW1lOiBcIit0K1wiLCB0aW1lb3V0OiBcIitpKSxbMix7Y29kZTpFZS5USU1FT1VUfV0pO2Nhc2UgMjpyZXR1cm5bMix7Y29kZTpFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEfV19fSkpfSkpfSx0LnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbigpe3RoaXMuX3NvY2tldCYmKHRoaXMuX3NvY2tldC5jbG9zZSgpLHRoaXMuX3NvY2tldD1udWxsLHRoaXMuX3dhdGNoZXIuc3RhdHVzKEllLkRJU0NPTk5FQ1RFRCkpfSx0fShmcik7IWZ1bmN0aW9uKGUpe2UuR0VUPVwiR0VUXCIsZS5QT1NUPVwiUE9TVFwifShWcnx8KFZyPXt9KSk7dmFyIEJyPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxuKXt2YXIgaT1lLmNhbGwodGhpcyxcImNvbWV0XCIsbil8fHRoaXM7cmV0dXJuIGkuX3J1bnRpbWU9dCxpLl9tZXNzYWdlSWRzPXt9LGkuX3N5bmNNZXNzYWdlSWRzPXt9LGkuX2lkQ291bnQ9MCxpLl9nZW5lcmF0ZU1lc3NhZ2VJZD1mdW5jdGlvbigpe3JldHVybisraS5faWRDb3VudH0saS5fcGlkPWVuY29kZVVSSUNvbXBvbmVudCgobmV3IERhdGUpLmdldFRpbWUoKStNYXRoLnJhbmRvbSgpK1wiXCIpLGl9cmV0dXJuIE4odCxlKSx0LnByb3RvdHlwZS5oYW5kbGVDb21ldFJlcz1mdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKDIwMCE9PWUuc3RhdHVzJiYyMDIhPT1lLnN0YXR1cylyZXR1cm4hMTt2YXIgbj1KKGUuZGF0YSk/SlNPTi5wYXJzZShlLmRhdGEpOmUuZGF0YTtyZXR1cm4gbj8hWChuKXx8KGR0KG4sKGZ1bmN0aW9uKGUpe3JldHVybiBNKHQsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgdCxuLGkscixzLG8sYSx1LGMsaCxsLGQ9dGhpcztyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihmKXtzd2l0Y2goZi5sYWJlbCl7Y2FzZSAwOmlmKCh0PWUuc2Vzc2lvbmlkKSYmKHRoaXMuX3Nlc3Npb25pZD10KSxuPWZ1bmN0aW9uKGUpe3ZhciB0PWUuaGVhZGVyQ29kZSxuPW5ldyBPdCh0KSxpPUFyKG4pO2Zvcih2YXIgciBpbiBlKWlbcl09ZVtyXTtyZXR1cm4gaX0oZSksaT1uLm1lc3NhZ2VJZCxyPW4uX2hlYWRlcixzPW4uc3RhdHVzLG4uaWRlbnRpZmllcixvPXImJnIucW9zIT09emUuQVRfTU9TVF9PTkNFLGkmJm4uZ2V0SWRlbnRpZmllciYmKChhPXRoaXMuX21lc3NhZ2VJZHNbaV0pJiZhKG4pLHRoaXMuX3N5bmNNZXNzYWdlSWRzW2ldJiZ0aGlzLl9zeW5jTWVzc2FnZUlkc1tpXShuKSksbyYmKG4gaW5zdGFuY2VvZiBDciYmIW4uc3luY01zZyYmKHU9bmV3IE5yKGkpLHRoaXMuc2VuZE9ubHkodSkpLG4gaW5zdGFuY2VvZiB3ciYmKHU9bmV3IE1yKGkpLHRoaXMuc2VuZE9ubHkodSkpKSxuIGluc3RhbmNlb2YgbXIpe3N3aXRjaChzKXtjYXNlIFVyLk9USEVSX0RFVklDRV9MT0dJTjp0aGlzLl93YXRjaGVyLnN0YXR1cyhJZS5LSUNLRURfT0ZGTElORV9CWV9PVEhFUl9DTElFTlQpO2JyZWFrO2Nhc2UgVXIuQkxPQ0s6Y2FzZSBVci5CTE9DS19ORVc6dGhpcy5fd2F0Y2hlci5zdGF0dXMoSWUuQkxPQ0tFRCk7YnJlYWs7Y2FzZSBVci5SRURJUkVDVF9ORVc6Y2FzZSBVci5SRURJUkVDVDp0aGlzLl93YXRjaGVyLnN0YXR1cyhJZS5SRURJUkVDVCk7YnJlYWs7ZGVmYXVsdDp0aGlzLl93YXRjaGVyLnN0YXR1cyhJZS5ESVNDT05ORUNUX0JZX1NFUlZFUil9cmV0dXJuWzJdfXJldHVybiBuIGluc3RhbmNlb2YgQ3I/KGM9bi5zeW5jTXNnLGg9bi50b3BpYywhY3x8RHIoaCk/KHRoaXMuX3dhdGNoZXIuc2lnbmFsKG4pLFsyLCExXSk6WzQsbmV3IFByb21pc2UoKGZ1bmN0aW9uKGUpe2QuX3N5bmNNZXNzYWdlSWRzW2ldPWV9KSldKTpbMywyXTtjYXNlIDE6bD1mLnNlbnQoKSxkZWxldGUgdGhpcy5fc3luY01lc3NhZ2VJZHNbaV0sdGhpcy5fd2F0Y2hlci5zaWduYWwobixsKSxmLmxhYmVsPTI7Y2FzZSAyOnJldHVyblsyXX19KSl9KSl9KSksITApOihnZS5lcnJvcihcInJlY2VpdmVkIGRhdGEgaXMgbm90IGEgdmFsaWRKc29uXCIsbiksITEpfSx0LnByb3RvdHlwZS5fc3RhcnRQdWxsU2lnbmFsPWZ1bmN0aW9uKGUpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgdCxuLGkscjtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihzKXtzd2l0Y2gocy5sYWJlbCl7Y2FzZSAwOnJldHVybiB0PShuZXcgRGF0ZSkuZ2V0VGltZSgpLG49ZStcIjovL1wiK3RoaXMuX2RvbWFpbitcIi9wdWxsbXNnLmpzP3Nlc3Npb25pZD1cIit0aGlzLl9zZXNzaW9uaWQrXCImdGltZXN0cmFwPVwiK3QrXCImcGlkPVwiK3RoaXMuX3BpZCxbNCx0aGlzLl9ydW50aW1lLmh0dHBSZXEoe3VybDpuLGJvZHk6e3BpZDp0aGlzLl9waWR9LHRpbWVvdXQ6NDVlM30pXTtjYXNlIDE6cmV0dXJuIGk9cy5zZW50KCkscj10aGlzLmhhbmRsZUNvbWV0UmVzKGkpLHRoaXMuX2lzRGlzY29ubmVjdGVkfHwocj90aGlzLl9zdGFydFB1bGxTaWduYWwoZSk6KHRoaXMuX2lzRGlzY29ubmVjdGVkPSEwLHRoaXMuX3dhdGNoZXIuc3RhdHVzKEllLk5FVFdPUktfVU5BVkFJTEFCTEUpKSksWzJdfX0pKX0pKX0sdC5wcm90b3R5cGUuY29ubmVjdD1mdW5jdGlvbihlLHQsbixpLHIscyl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBzLG8sYSx1LGM9dGhpcztyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihoKXtyZXR1cm4gcj14KHIpLHRoaXMuX3Byb3RvY29sPWksdGhpcy5faXNEaXNjb25uZWN0ZWQ9ITEsdGhpcy5fd2F0Y2hlci5zdGF0dXMoSWUuQ09OTkVDVElORykscz1bXSxvPTAsYT0hMSx1PSExLFsyLG5ldyBQcm9taXNlKChmdW5jdGlvbihoKXt2YXIgbD1mdW5jdGlvbigpe3JldHVybiBNKGMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbjtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihvKXtzd2l0Y2goby5sYWJlbCl7Y2FzZSAwOnJldHVybiAwPT09cy5sZW5ndGh8fGE/WzJdOihhPSEwLFs0LHRoaXMuX2Nvbm5lY3QoZSx0LHMuc2hpZnQoKSxpLHIpXSk7Y2FzZSAxOmlmKChuPW8uc2VudCgpKT09PUVlLlNVQ0NFU1MpdGhpcy5fc3RhcnRQdWxsU2lnbmFsKGkpLGgobik7ZWxzZSBpZihuPT09Q2UuUkVESVJFQ1QpaChuKTtlbHNle2lmKHUmJjA9PT1zLmxlbmd0aClyZXR1cm4gaChFdChuKSksWzJdO2E9ITEsbCgpfXJldHVyblsyXX19KSl9KSl9O2MuX3dhdGNoZXIuc3RhdHVzKEllLkNPTk5FQ1RJTkcpLExyKG4saSxjLl9ydW50aW1lLChmdW5jdGlvbihlKXt2YXIgdD1lLmNvZGUsbj1lLmZpbmlzaGVkLGk9ZS5ob3N0O3U9biwyMDA9PT10JiYocy5wdXNoKGkpLG8rKyxsKCkpLG4mJjA9PT1vJiYoZ2UuZXJyb3IoXCJObyB2YWxpZCB3ZWJzb2NrZXQgc2VydmVyIGhvc3RzIVwiKSxoKEVlLlJDX1NPQ0tFVF9OT1RfQ1JFQVRFRCkpfSkpfSkpXX0pKX0pKX0sdC5wcm90b3R5cGUuX2Nvbm5lY3Q9ZnVuY3Rpb24oZSx0LG4saSxyKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHMsbyxhLHU7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oYyl7c3dpdGNoKGMubGFiZWwpe2Nhc2UgMDpyZXR1cm4gcz1mdW5jdGlvbihlKXtyZXR1cm4gMjAwIT09ZS5zdGF0dXMmJjIwMiE9PWUuc3RhdHVzPyhnZS5lcnJvcihcImhhbmRsZSBjb21ldCByZXMgLT4gcmVzOiBcIitKU09OLnN0cmluZ2lmeShlfHx7fSkpLCExKTohIWUuZGF0YSYmKGZ1bmN0aW9uKGUpe2lmKG5lKGUpKXJldHVybiEwO3ZhciB0PSExO3RyeXt2YXIgbj1KU09OLnBhcnNlKGUpO3Q9SlNPTi5zdHJpbmdpZnkobik9PT1lfWNhdGNoKGUpe3Q9ITF9cmV0dXJuIHR9KGUuZGF0YSk/bmUoZS5kYXRhKT9lLmRhdGE6SlNPTi5wYXJzZShlLmRhdGEpOihnZS5lcnJvcihcInJlY2VpdmVkIGRhdGEgaXMgbm90IGEgdmFsaWRKc29uXCIsZS5kYXRhKSwhMSkpfSxvPVByKGksbixlLHQsdGhpcy5fcnVudGltZSxyLHRoaXMuX3BpZCksdGhpcy5zZW5kQ29ubmVjdFRpbWU9RGF0ZS5ub3coKSxnZS5kZWJ1ZyhcImNvbmVuY3Qgc3RhcnQgLT4gXCIrbyksWzQsdGhpcy5fcnVudGltZS5odHRwUmVxKHt1cmw6byxib2R5OntwaWQ6dGhpcy5fcGlkfSx0aW1lb3V0OjVlM30pXTtjYXNlIDE6cmV0dXJuIGE9Yy5zZW50KCksdT1zKGEpLHRoaXMuX2RvbWFpbj1uLHUmJjA9PT11LnN0YXR1cz8odGhpcy5fc2Vzc2lvbmlkPXUuc2Vzc2lvbmlkLHRoaXMudXNlcklkPXUudXNlcklkLHRoaXMuY29ubmVjdGVkVGltZT11LnRpbWVzdGFtcCk6Z2Uud2FybihcImNvbm5lY3QgcmVzdWx0IC0+IGNvZGU6IFwiKyhudWxsPT11P3ZvaWQgMDp1LnN0YXR1cykrXCIsIHVybDogXCIrbyksWzIsbnVsbD09dT92b2lkIDA6dS5zdGF0dXNdfX0pKX0pKX0sdC5wcm90b3R5cGUuc2VuZENvbWV0RGF0YT1mdW5jdGlvbihlLHQpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgdCxuLGkscixzLG8sYSx1LGMsaDtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihsKXtzd2l0Y2gobC5sYWJlbCl7Y2FzZSAwOnJldHVybiBuPSh0PXRoaXMpLl9kb21haW4saT10Ll9zZXNzaW9uaWQscj10Ll9waWQscz1lLm1lc3NhZ2VJZCxvPWUudG9waWMsYT1lLnRhcmdldElkLGUuaWRlbnRpZmllcix1PWUuZ2V0SGVhZGVyRmxhZygpLGM9bz90aGlzLl9wcm90b2NvbCtcIjovL1wiK24rXCIvd2Vic29ja2V0P21lc3NhZ2VpZD1cIitzK1wiJmhlYWRlcj1cIit1K1wiJnNlc3Npb25pZD1cIitpK1wiJnRvcGljPVwiK28rXCImdGFyZ2V0aWQ9XCIrYStcIiZwaWQ9XCIrcjp0aGlzLl9wcm90b2NvbCtcIjovL1wiK24rXCIvd2Vic29ja2V0P21lc3NhZ2VpZD1cIitzK1wiJmhlYWRlcj1cIit1K1wiJnNlc3Npb25pZD1cIitpK1wiJnBpZD1cIityLFs0LHRoaXMuX3J1bnRpbWUuaHR0cFJlcSh7dXJsOmMsbWV0aG9kOlZyLlBPU1QsYm9keTplLmdldENvbWV0RGF0YSgpfSldO2Nhc2UgMTpyZXR1cm4gaD1sLnNlbnQoKSx0aGlzLmhhbmRsZUNvbWV0UmVzKGgpLFsyXX19KSl9KSl9LHQucHJvdG90eXBlLnNlbmRPbmx5PWZ1bmN0aW9uKGUpe3RoaXMuc2VuZENvbWV0RGF0YShlKX0sdC5wcm90b3R5cGUuc2VuZD1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gdm9pZCAwPT09aSYmKGk9M2U0KSxNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgcixzLG8sYT10aGlzO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKHUpe3N3aXRjaCh1LmxhYmVsKXtjYXNlIDA6cmV0dXJuIHI9dGhpcy5fZ2VuZXJhdGVNZXNzYWdlSWQoKSxlLm1lc3NhZ2VJZD1yLHRoaXMuc2VuZENvbWV0RGF0YShlKSxbNCxuZXcgUHJvbWlzZSgoZnVuY3Rpb24oZSl7YS5fbWVzc2FnZUlkc1tyXT1lLHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7ZGVsZXRlIGEuX21lc3NhZ2VJZHNbcl0sZSgpfSksaSl9KSldO2Nhc2UgMTpyZXR1cm4ocz11LnNlbnQoKSk/KG89dCYmcy5kYXRhP3RoaXMuY29kZWMuZGVjb2RlQnlQQk5hbWUocy5kYXRhLHQsbik6cywwIT09cy5zdGF0dXM/WzIse2NvZGU6cy5zdGF0dXMsZGF0YTp0JiZzLmRhdGE/bzpudWxsfV06WzIse2NvZGU6RWUuU1VDQ0VTUyxkYXRhOm99XSk6WzIse2NvZGU6RWUuVElNRU9VVH1dfX0pKX0pKX0sdC5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oKXt0aGlzLl9pc0Rpc2Nvbm5lY3RlZD0hMCx0aGlzLl93YXRjaGVyLnN0YXR1cyhJZS5ESVNDT05ORUNURUQpfSx0fShmciksR3I9ZnVuY3Rpb24oZSx0LG4pe3RoaXMucnVudGltZT1lLHRoaXMuX3dhdGNoZXI9dCx0aGlzLl9vcHRpb25zPW4sdGhpcy5jdXJyZW50VXNlcklkPVwiXCIsdGhpcy5fYXBwa2V5PXRoaXMuX29wdGlvbnMuYXBwa2V5LHRoaXMuX2FwaVZlcj10aGlzLl9vcHRpb25zLmFwaVZlcnNpb24sdGhpcy5uYXZpPXRoaXMuX2NyZWF0ZU5hdmkoKX0sRnI9ZnVuY3Rpb24oZSl7cmV0dXJuW1wibmF2aVwiLGVdLmpvaW4oXCJfXCIpfSxxcj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt0aGlzLl9ydW50aW1lPWUsdGhpcy5fb3B0aW9ucz10LHRoaXMuX25hdmlJbmZvPW51bGwsdGhpcy5fYXBwa2V5PXRoaXMuX29wdGlvbnMuYXBwa2V5LHRoaXMuX2FwaVZlcnNpb249eCh0aGlzLl9vcHRpb25zLmFwaVZlcnNpb24pfXJldHVybiBlLnByb3RvdHlwZS5nZXRJbmZvPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgcixzO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKG8pe3N3aXRjaChvLmxhYmVsKXtjYXNlIDA6cmV0dXJuIG4mJnRoaXMuX2NsZWFyKGUpLChyPWZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLHM9RnIoZSk7dHJ5e3ZhciBvPW4uZ2V0SXRlbShzKTtyPW8/SlNPTi5wYXJzZShvKTpbXX1jYXRjaChlKXtyPVtdfXZhciBhPURhdGUubm93KCk7cmV0dXJuIHIubGVuZ3RoPjAmJihyPXIuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4gYS1lLnRpbWVzdGFtcDw3MmU1fSkpKSwwPT09ci5sZW5ndGg/bi5yZW1vdmVJdGVtKHMpOm4uc2V0SXRlbShzLEpTT04uc3RyaW5naWZ5KHIpKSwobnVsbD09PShpPXIuZmluZCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUudG9rZW49PT10fSkpKXx8dm9pZCAwPT09aT92b2lkIDA6aS5uYXZpSW5mbyl8fG51bGx9KHRoaXMuX2FwcGtleSxlLHRoaXMuX3J1bnRpbWUubG9jYWxTdG9yYWdlKSk/KHRoaXMuX25hdmlJbmZvPXIsWzIscl0pOihzPXRoaXMuX29wdGlvbnMubmF2aWdhdG9ycy5zbGljZSgpLHQubGVuZ3RoJiZ0LmZvckVhY2goKGZ1bmN0aW9uKGUpe3MuaW5kZXhPZihlKTwwJiZzLnVuc2hpZnQoZSl9KSksWzQsdGhpcy5fcmVxTmF2aShzLHRoaXMuX2FwcGtleSxlLGkpXSk7Y2FzZSAxOnJldHVybihyPW8uc2VudCgpKT8odGhpcy5fbmF2aUluZm89cix0aGlzLnNldE5hdmlJbmZvMkNhY2hlKGUsciksWzIscl0pOlsyLHJdfX0pKX0pKX0sZS5wcm90b3R5cGUuc2V0TmF2aUluZm8yQ2FjaGU9ZnVuY3Rpb24oZSx0KXt0aGlzLl9uYXZpSW5mbz10LGZ1bmN0aW9uKGUsdCxuLGkpe3ZhciByLHM9RnIoZSk7dHJ5e3ZhciBvPWkuZ2V0SXRlbShzKTtyPW8/SlNPTi5wYXJzZShvKTpbXX1jYXRjaChlKXtyPVtdfXZhciBhPURhdGUubm93KCk7ci5sZW5ndGg+MCYmKHI9ci5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiBhLWUudGltZXN0YW1wPDcyZTUmJnQhPT1lLnRva2VufSkpKSxyLnB1c2goe3RpbWVzdGFtcDphLG5hdmlJbmZvOm4sdG9rZW46dH0pLGkuc2V0SXRlbShzLEpTT04uc3RyaW5naWZ5KHIpKX0odGhpcy5fYXBwa2V5LGUsdCx0aGlzLl9ydW50aW1lLmxvY2FsU3RvcmFnZSl9LGUucHJvdG90eXBlLmdldEluZm9Gcm9tQ2FjaGU9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX25hdmlJbmZvfSxlLnByb3RvdHlwZS5fY2xlYXI9ZnVuY3Rpb24oZSl7IWZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyPUZyKGUpO3RyeXt2YXIgcz1uLmdldEl0ZW0ocik7aT1zP0pTT04ucGFyc2Uocyk6W119Y2F0Y2goZSl7aT1bXX12YXIgbz1EYXRlLm5vdygpO2kubGVuZ3RoPjAmJihpPWkuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4gby1lLnRpbWVzdGFtcDw3MmU1JiZ0IT09ZS50b2tlbn0pKSksMD09PWkubGVuZ3RoP24ucmVtb3ZlSXRlbShyKTpuLnNldEl0ZW0ocixKU09OLnN0cmluZ2lmeShpKSl9KHRoaXMuX2FwcGtleSxlLHRoaXMuX3J1bnRpbWUubG9jYWxTdG9yYWdlKX0sZX0oKSxLcj1mdW5jdGlvbihlLHQsbil7cmV0dXJuW2UsdCxuXS5qb2luKFwiX1wiKX0sSHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dGhpcy5fcnVudGltZT1lLHRoaXMuX2FwcGtleT10LHRoaXMuX3VzZXJzPXt9fXJldHVybiBlLnByb3RvdHlwZS5fZ2V0TWVtRGF0YT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fdXNlcnNbZV18fCh0aGlzLl91c2Vyc1tlXT17aW5ib3hUaW1lOjAsb3V0Ym94VGltZTowfSl9LGUucHJvdG90eXBlLnNldEluYm94VGltZT1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuX2dldE1lbURhdGEodCk7aWYoIShuLmluYm94VGltZT5lKSl7bi5pbmJveFRpbWU9ZTt2YXIgaT1LcihcImluYm94XCIsdGhpcy5fYXBwa2V5LHQpO3RoaXMuX3J1bnRpbWUubG9jYWxTdG9yYWdlLnNldEl0ZW0oaSxlLnRvU3RyaW5nKCkpfX0sZS5wcm90b3R5cGUuZ2V0SW5ib3hUaW1lPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2dldE1lbURhdGEoZSk7aWYoMD09PXQuaW5ib3hUaW1lKXt2YXIgbj1LcihcImluYm94XCIsdGhpcy5fYXBwa2V5LGUpO3QuaW5ib3hUaW1lPXBhcnNlSW50KHRoaXMuX3J1bnRpbWUubG9jYWxTdG9yYWdlLmdldEl0ZW0obikpfHwwfXJldHVybiB0LmluYm94VGltZX0sZS5wcm90b3R5cGUuc2V0T3V0Ym94VGltZT1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuX2dldE1lbURhdGEodCk7aWYoIShuLm91dGJveFRpbWU+PWUpKXtuLm91dGJveFRpbWU9ZTt2YXIgaT1LcihcIm91dGJveFwiLHRoaXMuX2FwcGtleSx0KTt0aGlzLl9ydW50aW1lLmxvY2FsU3RvcmFnZS5zZXRJdGVtKGksZS50b1N0cmluZygpKX19LGUucHJvdG90eXBlLmdldE91dGJveFRpbWU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fZ2V0TWVtRGF0YShlKTtpZigwPT09dC5vdXRib3hUaW1lKXt2YXIgbj1LcihcIm91dGJveFwiLHRoaXMuX2FwcGtleSxlKTt0Lm91dGJveFRpbWU9cGFyc2VJbnQodGhpcy5fcnVudGltZS5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShuKSl8fDB9cmV0dXJuIHQub3V0Ym94VGltZX0sZX0oKSxZcj17X2NhY2hlczp7fSxzZXQ6ZnVuY3Rpb24oZSx0KXt0aGlzLl9jYWNoZXNbZV09dH0sZ2V0OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9jYWNoZXNbZV18fDB9LGNsZWFyOmZ1bmN0aW9uKGUpe3RoaXMuX2NhY2hlc1tlXT0wfX0sanI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dGhpcy5fa3ZDYWNoZXM9e30sdGhpcy5fY2hhdHJvb21JZD1lLHRoaXMuX2N1cnJlbnRVc2VySWQ9dH1yZXR1cm4gZS5wcm90b3R5cGUuX2FkZD1mdW5jdGlvbihlKXt2YXIgdD1lLmtleTtlLmlzRGVsZXRlZD0hMSx0aGlzLl9rdkNhY2hlc1t0XT1lfSxlLnByb3RvdHlwZS5fcmVtb3ZlPWZ1bmN0aW9uKGUpe3ZhciB0PWUua2V5LG49dGhpcy5fa3ZDYWNoZXNbdF07biYmKG4uaXNEZWxldGVkPSEwLHRoaXMuX2t2Q2FjaGVzW3RdPW4pfSxlLnByb3RvdHlwZS5fc2V0RW50cnk9ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLmtleSxpPWUudHlwZSxyPWUuaXNPdmVyd3JpdGUscz1lLnVzZXJJZCxvPXRoaXMuX2dldFNldFVzZXJJZChuKSxhPWk9PT1MZS5ERUxFVEUsdT1vPT09cyxjPSF0aGlzLl9pc0V4aXN0ZWQobiksaD1hP3RoaXMuX3JlbW92ZTp0aGlzLl9hZGQ7KHR8fHJ8fHV8fGMpJiZoLmNhbGwodGhpcyxlKX0sZS5wcm90b3R5cGUuZ2V0VmFsdWU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fa3ZDYWNoZXNbZV18fHt9O3JldHVybiB0LmlzRGVsZXRlZD9udWxsOnQudmFsdWV9LGUucHJvdG90eXBlLmdldFZlcnNpb249ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fa3ZDYWNoZXNbZV18fHt9O3JldHVybiB0LmlzRGVsZXRlZD9udWxsOnQudmVyc2lvbn0sZS5wcm90b3R5cGUuZ2V0QWxsVmFsdWU9ZnVuY3Rpb24oKXt2YXIgZT17fTtmb3IodmFyIHQgaW4gdGhpcy5fa3ZDYWNoZXMpdGhpcy5fa3ZDYWNoZXNbdF0uaXNEZWxldGVkfHwoZVt0XT10aGlzLl9rdkNhY2hlc1t0XS52YWx1ZSk7cmV0dXJuIGV9LGUucHJvdG90eXBlLl9nZXRTZXRVc2VySWQ9ZnVuY3Rpb24oZSl7cmV0dXJuKHRoaXMuX2t2Q2FjaGVzW2VdfHx7fSkudXNlcklkfSxlLnByb3RvdHlwZS5faXNFeGlzdGVkPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2t2Q2FjaGVzW2VdfHx7fSxuPXQudmFsdWUsaT10LmlzRGVsZXRlZDtyZXR1cm4gbiYmIWl9LGUucHJvdG90eXBlLnNldEVudHJpZXM9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPWUua3ZFbnRyaWVzLGk9ZS5pc0Z1bGxVcGRhdGU7bj1ufHxbXSwoaT1pfHwhMSkmJnRoaXMuY2xlYXIoKSxuLmZvckVhY2goKGZ1bmN0aW9uKGUpe3QuX3NldEVudHJ5KGUsaSl9KSksZ2UuZGVidWcoXCJlbmQgc2V0RW50cmllc1wiKX0sZS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLl9rdkNhY2hlcz17fX0sZX0oKSxRcj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5fcHVsbFF1ZXVlPVtdLHRoaXMuX2lzUHVsbGluZz0hMSx0aGlzLl9zdG9yZUNhY2hlcz17fSx0aGlzLl9lbmdpbmU9ZX1yZXR1cm4gZS5wcm90b3R5cGUuX3N0YXJ0UHVsbD1mdW5jdGlvbigpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgZSx0LG4saSxyLHMsbztyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihhKXtzd2l0Y2goYS5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9pc1B1bGxpbmd8fDA9PT10aGlzLl9wdWxsUXVldWUubGVuZ3RoP1syXToodGhpcy5faXNQdWxsaW5nPSEwLGU9dGhpcy5fcHVsbFF1ZXVlLnNwbGljZSgwLDEpWzBdLHQ9ZS5jaHJtSWQsbj1lLnRpbWVzdGFtcCwoaT1Zci5nZXQodCkpPm4/KHRoaXMuX2lzUHVsbGluZz0hMSx0aGlzLl9zdGFydFB1bGwoKSxbMl0pOls0LHRoaXMuX2VuZ2luZS5wdWxsQ2hhdHJvb21FbnRyeSh0LGkpXSk7Y2FzZSAxOnJldHVybiByPWEuc2VudCgpLHM9ci5jb2RlLG89ci5kYXRhLHRoaXMuX2lzUHVsbGluZz0hMSxzPT09RWUuU1VDQ0VTUz8oWXIuc2V0KHQsby5zeW5jVGltZXx8MCksdGhpcy5fc3RhcnRQdWxsKCkpOnRoaXMuX3N0YXJ0UHVsbCgpLFsyXX19KSl9KSl9LGUucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKGUpe1lyLmNsZWFyKGUpO3ZhciB0PXRoaXMuX3N0b3JlQ2FjaGVzW2VdO3QmJnQuY2xlYXIoKX0sZS5wcm90b3R5cGUucHVsbEVudHJ5PWZ1bmN0aW9uKGUsdCl7dGhpcy5fcHVsbFF1ZXVlLnB1c2goe2Nocm1JZDplLHRpbWVzdGFtcDp0fSksdGhpcy5fc3RhcnRQdWxsKCl9LGUucHJvdG90eXBlLnNldExvY2FsPWZ1bmN0aW9uKGUsdCxuKXt2YXIgaT10aGlzLl9zdG9yZUNhY2hlc1tlXTthZShpKXx8KGk9bmV3IGpyKGUsbikpLGkuc2V0RW50cmllcyh0KSx0aGlzLl9zdG9yZUNhY2hlc1tlXT1pfSxlLnByb3RvdHlwZS5nZXRWYWx1ZT1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuX3N0b3JlQ2FjaGVzW2VdO3JldHVybiBuP24uZ2V0VmFsdWUodCk6bnVsbH0sZS5wcm90b3R5cGUuZ2V0VmVyc2lvbj1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuX3N0b3JlQ2FjaGVzW2VdO3JldHVybiBuP24uZ2V0VmVyc2lvbih0KTpudWxsfSxlLnByb3RvdHlwZS5nZXRBbGw9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fc3RvcmVDYWNoZXNbZV0sbj17fTtyZXR1cm4gdCYmKG49dC5nZXRBbGxWYWx1ZSgpKSxufSxlfSgpLFdyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQsbixpKXt0aGlzLl9ydW50aW1lPWUsdGhpcy5fYXBwa2V5PXQsdGhpcy5fdXNlcklkPW4sdGhpcy5fY2FuSm9pbk11bGlwbGVDaHJtPWksdGhpcy5fc2Vzc2lvbktleT1cIlwiLHRoaXMuX2pvaW5lZENocm1zSW5mbz17fSx0aGlzLl9zZXNzaW9uS2V5PVwic3luYy1jaHJtLVwiK3RoaXMuX2FwcGtleStcIi1cIit0aGlzLl91c2VySWR9cmV0dXJuIGUucHJvdG90eXBlLnNldD1mdW5jdGlvbihlLHQpe3ZvaWQgMD09PXQmJih0PTEwKSwhdGhpcy5fY2FuSm9pbk11bGlwbGVDaHJtJiYodGhpcy5fam9pbmVkQ2hybXNJbmZvPXt9KSx0aGlzLl9qb2luZWRDaHJtc0luZm9bZV09dCx0aGlzLl9ydW50aW1lLnNlc3Npb25TdG9yYWdlLnNldEl0ZW0odGhpcy5fc2Vzc2lvbktleSxKU09OLnN0cmluZ2lmeSh0aGlzLl9qb2luZWRDaHJtc0luZm8pKX0sZS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKCl7dmFyIGUsdDt0cnl7dD10aGlzLl9ydW50aW1lLnNlc3Npb25TdG9yYWdlLmdldEl0ZW0odGhpcy5fc2Vzc2lvbktleSksZT1KU09OLnBhcnNlKHR8fFwie31cIil9Y2F0Y2gobil7Z2UuZXJyb3IoXCJwYXJzZSByZWpvaW5lZCBjaHJtIGluZm9zIGVycm9yIC0+IFwiK3QpLGU9e319cmV0dXJuIGV9LGUucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbihlKXtkZWxldGUgdGhpcy5fam9pbmVkQ2hybXNJbmZvW2VdLGFlKHRoaXMuX2pvaW5lZENocm1zSW5mbyk/dGhpcy5fcnVudGltZS5zZXNzaW9uU3RvcmFnZS5zZXRJdGVtKHRoaXMuX3Nlc3Npb25LZXksSlNPTi5zdHJpbmdpZnkodGhpcy5fam9pbmVkQ2hybXNJbmZvKSk6dGhpcy5jbGVhcigpfSxlLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3RoaXMuX2pvaW5lZENocm1zSW5mbz17fSx0aGlzLl9ydW50aW1lLnNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0odGhpcy5fc2Vzc2lvbktleSl9LGV9KCksSnI9XCJjb252ZXJTdGF0dXNDaGFuZ2VkXCIsenI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxuKXt0aGlzLl9ldmVudEVtaXR0ZXI9bmV3IF9lLHRoaXMuX3B1bGxRdWV1ZT1bXSx0aGlzLl9pc1B1bGxpbmc9ITEsdGhpcy5fc3RvcmFnZT1JKGUucnVudGltZSksdGhpcy5fYXBwa2V5PXQsdGhpcy5fY3VycmVudFVzZXJJZD1uLHRoaXMuX2VuZ2luZT1lLHRoaXMuX3N0b3JhZ2VQdWxsVGltZUtleT1cImNvbi1zLVwiK3QrXCItXCIrbn1yZXR1cm4gZS5wcm90b3R5cGUuX3NldD1mdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKCFyZShlKSYmQXJyYXkuaXNBcnJheShlKSl7dmFyIG49dGhpcy5fc3RvcmFnZS5nZXQodGhpcy5fc3RvcmFnZVB1bGxUaW1lS2V5KXx8MCxpPWUubGVuZ3RoO2UuZm9yRWFjaCgoZnVuY3Rpb24oZSxyKXt2YXIgcz1lLnVwZGF0ZWRUaW1lfHwwO249cz5uP3M6bixlLmNvbnZlcnNhdGlvblR5cGU9ZS50eXBlLHQuX2V2ZW50RW1pdHRlci5lbWl0KEpyLHtzdGF0dXNJdGVtOmUsaXNMYXN0UHVsbDpyPT09aS0xfSl9KSksdGhpcy5fc3RvcmFnZS5zZXQodGhpcy5fc3RvcmFnZVB1bGxUaW1lS2V5LG4pfX0sZS5wcm90b3R5cGUuX3N0YXJ0UHVsbD1mdW5jdGlvbigpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgZSx0LG4saTtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihyKXtzd2l0Y2goci5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9pc1B1bGxpbmd8fDA9PT10aGlzLl9wdWxsUXVldWUubGVuZ3RoP1syXToodGhpcy5faXNQdWxsaW5nPSEwLGU9dGhpcy5fcHVsbFF1ZXVlLnNwbGljZSgwLDEpWzBdLFs0LHRoaXMuX2VuZ2luZS5wdWxsQ29udmVyc2F0aW9uU3RhdHVzKGUpXSk7Y2FzZSAxOnJldHVybiB0PXIuc2VudCgpLG49dC5jb2RlLGk9dC5kYXRhLG49PT1FZS5TVUNDRVNTPyh0aGlzLl9pc1B1bGxpbmc9ITEsdGhpcy5fc2V0KGkpLHRoaXMuX3N0YXJ0UHVsbCgpKTp0aGlzLl9zdGFydFB1bGwoKSxbMl19fSkpfSkpfSxlLnByb3RvdHlwZS5wdWxsPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX3N0b3JhZ2UuZ2V0KHRoaXMuX3N0b3JhZ2VQdWxsVGltZUtleSl8fDA7KGU+dHx8MD09PWUpJiYodGhpcy5fcHVsbFF1ZXVlLnB1c2godCksdGhpcy5fc3RhcnRQdWxsKCkpfSxlLnByb3RvdHlwZS53YXRjaD1mdW5jdGlvbihlKXt0aGlzLl9ldmVudEVtaXR0ZXIub24oSnIsKGZ1bmN0aW9uKHQpe2UodCl9KSl9LGUucHJvdG90eXBlLnVud2F0Y2g9ZnVuY3Rpb24oKXt0aGlzLl9ldmVudEVtaXR0ZXIub2ZmKEpyLChmdW5jdGlvbihlKXt9KSl9LGV9KCksWnI9e2M6e2tleU5hbWU6XCJ1bnJlYWRNZXNzYWdlQ291bnRcIixkZWZhdWx0VmFsOjB9LGhtOntrZXlOYW1lOlwiaGFzTWVudGlvbmVkXCIsZGVmYXVsdFZhbDohMX0sbTp7a2V5TmFtZTpcIm1lbnRpb25lZEluZm9cIixkZWZhdWx0VmFsOm51bGx9LHQ6e2tleU5hbWU6XCJsYXN0VW5yZWFkVGltZVwiLGRlZmF1bHRWYWw6MH0sbmM6e2tleU5hbWU6XCJub3RpZmljYXRpb25TdGF0dXNcIixkZWZhdWx0VmFsOjJ9LHRvOntrZXlOYW1lOlwiaXNUb3BcIixkZWZhdWx0VmFsOiExfSx0Zzp7a2V5TmFtZTpcInRhZ3NcIixkZWZhdWx0VmFsOnt9fSxtYzp7a2V5TmFtZTpcInVucmVhZE1lbnRpb25lZENvdW50XCIsZGVmYXVsdFZhbDowfX0sWHI9e307Zm9yKHZhciAkciBpbiBacil7dmFyIGVzPVpyWyRyXS5rZXlOYW1lO1hyW2VzXT0kcn12YXIgdHMsbnM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxuKXt0aGlzLl9hcHBrZXk9dCx0aGlzLl9jdXJyZW50VXNlcklkPW47dmFyIGk9XCJjb24tXCIrdCtcIi1cIituO3RoaXMuc3RvcmFnZT1uZXcgUihlLGkpLHRoaXMuX2xvY2FsU3RvcmU9bmV3IFIoZSxcIkNPTlZFUi1cIit0K1wiLVwiK24pfXJldHVybiBlLnByb3RvdHlwZS5fZ2V0U3RvcmVLZXk9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBuK1wiX1wiK2UrXCJfXCIrdH0sZS5wcm90b3R5cGUuX2dldENvbk9wdGlvbkJ5S2V5PWZ1bmN0aW9uKGUpe3ZhciB0PShlPWV8fFwiXCIpLnNwbGl0KFwiX1wiKTtpZih0Lmxlbmd0aD49Mil7dmFyIG49dC5zaGlmdCgpLGk9dC5zaGlmdCgpLHI9dC5qb2luKFwiX1wiKTtyZXR1cm57Y29udmVyc2F0aW9uVHlwZTpOdW1iZXIoaSksdGFyZ2V0SWQ6cixjaGFubmVsSWQ6bn19cmV0dXJue2NvbnZlcnNhdGlvblR5cGU6ai5QUklWQVRFLHRhcmdldElkOlwiXCIsY2hhbm5lbElkOlwiXCJ9fSxlLnByb3RvdHlwZS51cGRhdGVNZW50aW9uZWREYXRhPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLmNvbnZlcnNhdGlvblR5cGUsaT1lLnRhcmdldElkLHI9ZS5tZXNzYWdlVHlwZSxzPWUuaXNNZW50aW9uZWQsbz1lLmNvbnRlbnQsYT1lLnNlbmRlclVzZXJJZCx1PWUuY2hhbm5lbElkLGM9dGhpcy5fZ2V0U3RvcmVLZXkobixpLHUpLGg9dGhpcy5fbG9jYWxTdG9yZS5nZXQoYyl8fHt9LGw9WHIubWVudGlvbmVkSW5mbyxkPVhyLmhhc01lbnRpb25lZCxmPWhbbF18fHt9LHA9Zi51c2VySWRMaXN0fHxbXSxnPW8ubWVudGlvbmVkSW5mbztpZihnKXtpZihzJiZuPT09ai5HUk9VUCkoZy51c2VySWRMaXN0fHxbXSkuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZT09PXQuX2N1cnJlbnRVc2VySWQmJnAuaW5kZXhPZihhKTwwJiZwLnB1c2goYSl9KSksZy50eXBlPT09d2UuQUxMJiZwLmluZGV4T2YoYSk8MCYmcC5wdXNoKGEpO2lmKHI9PT1TZS5SRUNBTEwmJm49PT1qLkdST1VQKXt2YXIgXz1wLmluZGV4T2YoYSk7Xz49MCYmcC5zcGxpY2UoXywxKX1nPXt1c2VySWRMaXN0OnAsdHlwZToobnVsbD09Zz92b2lkIDA6Zy50eXBlKXx8Zi50eXBlfSwwIT09cC5sZW5ndGg/KGhbbF09ZyxoW2RdPSEwKTooZGVsZXRlIGhbbF0sZGVsZXRlIGhbZF0pLGFlKGgpP3RoaXMuX2xvY2FsU3RvcmUuc2V0KGMsaCk6dGhpcy5fbG9jYWxTdG9yZS5yZW1vdmUoYyl9fSxlLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHI9dGhpcy5fZ2V0U3RvcmVLZXkoZSx0LGkpLHM9dGhpcy5fbG9jYWxTdG9yZS5nZXQocil8fHt9O2Zvcih2YXIgbyBpbiBuKXt2YXIgYT1YcltvXSx1PW5bb107aWYoIXJlKGEpJiYhcmUodSkmJlwiaGFzTWVudGlvbmVkXCIhPT1vJiZcIk1lbnRpb25lZEluZm9cIiE9PW8pe2lmKHU9PT1aclthXS5kZWZhdWx0VmFsfHxcInRhZ3NcIj09PW8mJiFhZSh1KSlkZWxldGUgc1thXTtlbHNlIGlmKFwidGFnc1wiPT09byl7dmFyIGM9dTtmb3IodmFyIGggaW4gYyljW2hdLmlzVG9wfHxkZWxldGUgY1toXS5pc1RvcDtzW2FdPXV9ZWxzZSBzW2FdPXU7cy5jfHwoZGVsZXRlIHMudCxkZWxldGUgcy5obSxkZWxldGUgcy5tLGRlbGV0ZSBzLm1jKX19YWUocyk/dGhpcy5fbG9jYWxTdG9yZS5zZXQocixzKTp0aGlzLl9sb2NhbFN0b3JlLnJlbW92ZShyKX0sZS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGUsdCxuKXt2b2lkIDA9PT1uJiYobj1cIlwiKTt2YXIgaT10aGlzLl9nZXRTdG9yZUtleShlLHQsbikscj10aGlzLl9sb2NhbFN0b3JlLmdldChpKXx8e30scz17fTtmb3IodmFyIG8gaW4gWnIpe3ZhciBhPVpyW29dLHU9YS5rZXlOYW1lLGM9YS5kZWZhdWx0VmFsO3NbdV09cltvXXx8eXQoYyl9cmV0dXJuIHN9LGUucHJvdG90eXBlLmdldFZhbHVlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2xvY2FsU3RvcmUuZ2V0VmFsdWVzKCl8fHt9LG49W107Zm9yKHZhciBpIGluIHQpe3ZhciByPXRoaXMuX2dldENvbk9wdGlvbkJ5S2V5KGkpLHM9e2NvbnZlcnNhdGlvblR5cGU6ci5jb252ZXJzYXRpb25UeXBlLHRhcmdldElkOnIudGFyZ2V0SWQsY2hhbm5lbElkOnIuY2hhbm5lbElkfSxvPXRbaV07Zm9yKHZhciBhIGluIG8pe3ZhciB1PVpyW2FdLGM9dS5rZXlOYW1lLGg9dS5kZWZhdWx0VmFsO3NbY109b1thXXx8eXQoaCl9cz1lP2Uocyk6cyxuLnB1c2gocyl9cmV0dXJuIG59LGUucHJvdG90eXBlLmdldFZhbHVlRm9yVGFnPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fbG9jYWxTdG9yZS5nZXRWYWx1ZXMoKXx8e30sdD17fTtmb3IodmFyIG4gaW4gZSl7dmFyIGk9dGhpcy5fZ2V0Q29uT3B0aW9uQnlLZXkobikscj1pLmNvbnZlcnNhdGlvblR5cGUscz1pLnRhcmdldElkLG89e30sYT1lW25dO2Zvcih2YXIgdSBpbiBhKXt2YXIgYz1aclt1XSxoPWMua2V5TmFtZSxsPWMuZGVmYXVsdFZhbDtvW2hdPWFbdV18fHl0KGwpfWZvcih2YXIgZCBpbiBvLnRhZ3Mpe3JlKHRbZF0pJiYodFtkXT1bXSk7dmFyIGY9T2JqZWN0LmFzc2lnbih7fSxvLHtjb252ZXJzYXRpb25UeXBlOnIsdGFyZ2V0SWQ6c30pO2RlbGV0ZSBmLnRhZ3MsdFtkXS5wdXNoKGYpfX1yZXR1cm4gdH0sZS5wcm90b3R5cGUuYWRhcHRPbGRTdG9yZT1mdW5jdGlvbigpe3RyeXt2YXIgZT10aGlzLnN0b3JhZ2UuZ2V0VmFsdWVzKCk7aWYoMD09PU9iamVjdC5rZXlzKGUpLmxlbmd0aClyZXR1cm47Zm9yKHZhciB0IGluIGUpe3ZhciBuPVwiX1wiK3Q7dGhpcy5fbG9jYWxTdG9yZS5zZXQobixlW3RdKX19Y2F0Y2goZSl7Z2UuZXJyb3IoXCJhZGFwdE9sZFN0b3JlIGVycm9yOiBcIitlLm1lc3NhZ2UpfX0sZX0oKSxpcz1bai5QUklWQVRFLGouR1JPVVAsai5TWVNURU0sai5QVUJMSUNfU0VSVklDRSxqLkFQUF9QVUJMSUNfU0VSVklDRV0scnM9XCJjb252ZXJzYXRpb25DaGFuZ2VkXCIsc3M9XCJjb25UYWdTdGF0dXNDaGFuZ2VkXCIsb3M9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxuLGkscil7dmFyIHM9dGhpczt0aGlzLl91cGRhdGVkQ29udmVyc2F0aW9ucz17fSx0aGlzLl9jb25UYWdTdGF0dXNDaGFuZ2VkPSExLHRoaXMuX2V2ZW50RW1pdHRlcj1uZXcgX2UsdGhpcy5fZHJhZnRNYXA9e30sdGhpcy5fYXBwa2V5PXQsdGhpcy5fbG9naW5Vc2VySWQ9bix0aGlzLl9zdG9yZT1uZXcgbnMoZS5ydW50aW1lLHQsbiksdGhpcy5fc3RhdHVzTWFuYWdlcj1uZXcgenIoZSx0LG4pLHRoaXMuX3N0YXR1c01hbmFnZXIud2F0Y2goKGZ1bmN0aW9uKGUpe3ZhciB0PWUuc3RhdHVzSXRlbSxuPWUuaXNMYXN0UHVsbDtzLmFkZFN0YXR1cyh0LG4pfSkpLHRoaXMuX2V2ZW50RW1pdHRlci5vbihycywoZnVuY3Rpb24oZSl7aShlKX0pKSx0aGlzLl9ldmVudEVtaXR0ZXIub24oc3MsKGZ1bmN0aW9uKCl7cigpfSkpfXJldHVybiBlLnByb3RvdHlwZS5fY2FsY1VucmVhZENvdW50PWZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5jb250ZW50LGk9ZS5tZXNzYWdlVHlwZSxyPWUuc2VudFRpbWUscz1lLmlzQ291bnRlZCxvPWUubWVzc2FnZURpcmVjdGlvbixhPWUuc2VuZGVyVXNlcklkLHU9bz09PW1lLlNFTkQmJmE9PT10aGlzLl9sb2dpblVzZXJJZCxjPWk9PT1TZS5SRUNBTEwsaD1uZShuKSxsPSExLGQ9e30sZj10Lmxhc3RVbnJlYWRUaW1lfHwwLHA9dC51bnJlYWRNZXNzYWdlQ291bnR8fDA7aWYoZj5yfHx1KXJldHVybntoYXNDaGFuZ2VkOmwsbG9jYWxDb252ZXJzYXRpb246dCx1cGRhdGVJdGVtczpkfTsocyYmKHQudW5yZWFkTWVzc2FnZUNvdW50PXArMSx0Lmxhc3RVbnJlYWRUaW1lPXIsbD0hMCksYyYmaCkmJihmPj1uLnNlbnRUaW1lJiZwJiYodC51bnJlYWRNZXNzYWdlQ291bnQ9cC0xLGw9ITApKTtyZXR1cm4gbCYmKGQudW5yZWFkTWVzc2FnZUNvdW50PXt2YWw6dC51bnJlYWRNZXNzYWdlQ291bnQsdGltZTpyfSkse2hhc0NoYW5nZWQ6bCxsb2NhbENvbnZlcnNhdGlvbjp0LHVwZGF0ZUl0ZW1zOmR9fSxlLnByb3RvdHlwZS5fY2FsY01lbnRpb25lZEluZm89ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLmNvbnRlbnQsaT0oZS5tZXNzYWdlRGlyZWN0aW9uLGUuaXNNZW50aW9uZWQpLHI9ZS5zZW50VGltZTttZS5TRU5EO3ZhciBzPW5lKG4pLG89ITEsYT17fTtyZXR1cm4gaSYmcyYmbi5tZW50aW9uZWRJbmZvJiYodC5oYXNNZW50aW9uZWQ9ITAsbz0hMCxhLmhhc01lbnRpb25lZD17dmFsOiEwLHRpbWU6cn0sYS5tZW50aW9uZWRJbmZvPXt2YWw6bi5tZW50aW9uZWRJbmZvLHRpbWU6cn0pLHtoYXNDaGFuZ2VkOm8sbG9jYWxDb252ZXJzYXRpb246dCx1cGRhdGVJdGVtczphfX0sZS5wcm90b3R5cGUuX2NhbGNNZW50aW9uZWRDb3VudD1mdW5jdGlvbihlLHQpe3ZhciBuPWUuY29udGVudCxpPWUubWVzc2FnZURpcmVjdGlvbixyPSExO2lmKGUuaXNNZW50aW9uZWQmJmk9PT1tZS5SRUNFSVZFJiYobnVsbD09bj92b2lkIDA6bi5tZW50aW9uZWRJbmZvKSl7dmFyIHM9bi5tZW50aW9uZWRJbmZvLG89cy50eXBlLGE9cy51c2VySWRMaXN0O2lmKG89PT13ZS5BTEx8fChhfHxbXSkuaW5jbHVkZXModGhpcy5fbG9naW5Vc2VySWQpKXtyPSEwO3ZhciB1PXQudW5yZWFkTWVudGlvbmVkQ291bnR8fDA7dC51bnJlYWRNZW50aW9uZWRDb3VudD11KzF9fXJldHVybntoYXNDaGFuZ2VkOnIsbG9jYWxDb252ZXJzYXRpb246dH19LGUucHJvdG90eXBlLl9zZXRVcGRhdGVkQ29udmVyc2F0aW9uPWZ1bmN0aW9uKGUpe2lmKG5lKGUpKXt2YXIgdD1lLmNvbnZlcnNhdGlvblR5cGUsbj1lLnRhcmdldElkLGk9ZS5jaGFubmVsSWQscj10K1wiX1wiK24scz10aGlzLl9zdG9yZS5nZXQodCxuLGkpfHx7fTt0aGlzLl91cGRhdGVkQ29udmVyc2F0aW9uc1tyXT1PYmplY3QuYXNzaWduKHMsZSl9fSxlLnByb3RvdHlwZS5fc2V0Q29uVGFnU3RhdHVzQ2hhbmdlZD1mdW5jdGlvbihlLHQsbixpKXt2YXIgcj0odGhpcy5fc3RvcmUuZ2V0KGUsdCxpKXx8e30pLnRhZ3N8fHt9O2lmKE9iamVjdC5rZXlzKHIpLmxlbmd0aD09PU9iamVjdC5rZXlzKG4pLmxlbmd0aCl7Zm9yKHZhciBzIGluIHIpaWYoIW5bc118fHJbc10uaXNUb3AhPT1uW3NdLmlzVG9wKXJldHVybiB2b2lkKHRoaXMuX2NvblRhZ1N0YXR1c0NoYW5nZWQ9ITApfWVsc2UgdGhpcy5fY29uVGFnU3RhdHVzQ2hhbmdlZD0hMH0sZS5wcm90b3R5cGUuYWRkU3RhdHVzPWZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5jb252ZXJzYXRpb25UeXBlLGk9ZS50YXJnZXRJZCxyPWUudXBkYXRlZFRpbWUscz1lLm5vdGlmaWNhdGlvblN0YXR1cyxvPWUuaXNUb3AsYT1lLnRhZ3MsdT1lLmNoYW5uZWxJZCxjPXt9LGg9e307biE9PWouVUxUUkFfR1JPVVAmJihyZShzKXx8KGgubm90aWZpY2F0aW9uU3RhdHVzPXt0aW1lOnIsdmFsOnN9KSxyZShvKXx8KGguaXNUb3A9e3RpbWU6cix2YWw6b30pLHJlKGEpfHwoaC50YWdzPXt0aW1lOnIsdmFsOmF9LG51bGw9PWF8fGEuZm9yRWFjaCgoZnVuY3Rpb24oZSl7Y1tlLnRhZ0lkXT17aXNUb3A6ZS5pc1RvcH19KSkpLHRoaXMuX3NldENvblRhZ1N0YXR1c0NoYW5nZWQobixpLGMsdSksdGhpcy5fc3RvcmUuc2V0KG4saSx7bm90aWZpY2F0aW9uU3RhdHVzOnMsaXNUb3A6byx0YWdzOmN9LHUpLHRoaXMuX3NldFVwZGF0ZWRDb252ZXJzYXRpb24oe2NvbnZlcnNhdGlvblR5cGU6bix0YXJnZXRJZDppLHVwZGF0ZWRJdGVtczpoLGNoYW5uZWxJZDp1fSksdCYmdGhpcy5fbm90aWZ5Q29udmVyc2F0aW9uQ2hhbmdlZCgpKX0sZS5wcm90b3R5cGUuX25vdGlmeUNvbnZlcnNhdGlvbkNoYW5nZWQ9ZnVuY3Rpb24oKXt2YXIgZT1bXTtmb3IodmFyIHQgaW4gdGhpcy5fdXBkYXRlZENvbnZlcnNhdGlvbnMpZS5wdXNoKHRoaXMuX3VwZGF0ZWRDb252ZXJzYXRpb25zW3RdKTswIT09ZS5sZW5ndGgmJih0aGlzLl9ldmVudEVtaXR0ZXIuZW1pdChycyxlKSx0aGlzLl91cGRhdGVkQ29udmVyc2F0aW9ucz17fSx0aGlzLl9jb25UYWdTdGF0dXNDaGFuZ2VkJiYodGhpcy5fZXZlbnRFbWl0dGVyLmVtaXQoc3MpLHRoaXMuX2NvblRhZ1N0YXR1c0NoYW5nZWQ9ITEpKX0sZS5wcm90b3R5cGUuc2V0Q29udmVyc2F0aW9uQ2FjaGVCeU1lc3NhZ2U9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLGk9ZS5jb252ZXJzYXRpb25UeXBlLHI9ZS5pc1BlcnNpdGVkLHM9ZS50YXJnZXRJZCxvPWUuY2hhbm5lbElkO2lmKGlzLmluZGV4T2YoaSk+PTApe3ZhciBhPSExLHU9dGhpcy5fc3RvcmUuZ2V0KGkscyxvKSxjPXt9O2lmKFt0aGlzLl9jYWxjVW5yZWFkQ291bnQsdGhpcy5fY2FsY01lbnRpb25lZEluZm8sdGhpcy5fY2FsY01lbnRpb25lZENvdW50XS5mb3JFYWNoKChmdW5jdGlvbih0KXt2YXIgaT10LmNhbGwobixlLHUpLHI9aS5oYXNDaGFuZ2VkLHM9aS5sb2NhbENvbnZlcnNhdGlvbixvPWkudXBkYXRlSXRlbXM7YT1hfHxyLGM9TyhPKHt9LGMpLG8pLHU9eXQocyl9KSksYSYmdGhpcy5fc3RvcmUuc2V0KGkscyx1LG8pLHRoaXMuX3N0b3JlLnVwZGF0ZU1lbnRpb25lZERhdGEoZSkscil7dmFyIGg9dGhpcy5fc3RvcmUuZ2V0KGkscyxvKTtoLnVwZGF0ZWRJdGVtcz1PKHtsYXRlc3RNZXNzYWdlOnt0aW1lOmUuc2VudFRpbWUsdmFsOmV9fSxjKSxoLmxhdGVzdE1lc3NhZ2U9ZTt2YXIgbD1PYmplY3QuYXNzaWduKGgse2NvbnZlcnNhdGlvblR5cGU6aSx0YXJnZXRJZDpzLGNoYW5uZWxJZDpvfSk7dGhpcy5fc2V0VXBkYXRlZENvbnZlcnNhdGlvbihsKX0oYXx8cikmJnRoaXMuX25vdGlmeUNvbnZlcnNhdGlvbkNoYW5nZWQoKX19LGUucHJvdG90eXBlLmdldD1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHZvaWQgMD09PW4mJihuPVwiXCIpLHRoaXMuX3N0b3JlLmdldChlLHQsbil9LGUucHJvdG90eXBlLmdldEFsbFVucmVhZENvdW50PWZ1bmN0aW9uKGUsdCxuKXt2YXIgaT10aGlzLl9zdG9yZS5nZXRWYWx1ZSgpLHI9MDtyZXR1cm4gaS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgaT1lLnVucmVhZE1lc3NhZ2VDb3VudCxzPWUubm90aWZpY2F0aW9uU3RhdHVzLG89ZS5jb252ZXJzYXRpb25UeXBlO2k9aXx8MCwobnx8MSE9PXMpJiYodC5sZW5ndGg+MD90LmluY2x1ZGVzKE51bWJlcihvKSkmJihyKz1OdW1iZXIoaSkpOnIrPU51bWJlcihpKSl9KSkscn0sZS5wcm90b3R5cGUuZ2V0VW5yZWFkQ291bnRCeVRhZz1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuX3N0b3JlLmdldFZhbHVlRm9yVGFnKClbZV18fFtdLGk9MDtyZXR1cm4gbi5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbj1lLnVucmVhZE1lc3NhZ2VDb3VudCxyPWUubm90aWZpY2F0aW9uU3RhdHVzOyh0fHwxIT09cikmJihuPW58fDAsaSs9TnVtYmVyKG4pKX0pKSxpfSxlLnByb3RvdHlwZS5nZXRVbnJlYWRDb3VudD1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHRoaXMuX3N0b3JlLmdldChlLHQsbikudW5yZWFkTWVzc2FnZUNvdW50fHwwfSxlLnByb3RvdHlwZS5jbGVhclVucmVhZENvdW50PWZ1bmN0aW9uKGUsdCxuLGkpe3ZvaWQgMD09PWkmJihpPSEwKTt2YXIgcj10aGlzLl9zdG9yZS5nZXQoZSx0LG4pLHM9ci51bnJlYWRNZXNzYWdlQ291bnQsbz1yLmhhc01lbnRpb25lZCxhPXt9O2lmKHMmJihyLnVucmVhZE1lc3NhZ2VDb3VudD0wLGEudW5yZWFkTWVzc2FnZUNvdW50PXt2YWw6MCx0aW1lOkRhdGUubm93KCl9KSxvJiYoci5oYXNNZW50aW9uZWQ9ITEsci51bnJlYWRNZW50aW9uZWRDb3VudD0wLHIubWVudGlvbmVkSW5mbz12b2lkIDAsYS5oYXNNZW50aW9uZWQ9e3ZhbDohMSx0aW1lOkRhdGUubm93KCl9LGEubWVudGlvbmVkSW5mbz17dmFsOnZvaWQgMCx0aW1lOkRhdGUubm93KCl9KSx0aGlzLl9zdG9yZS5zZXQoZSx0LHIsbiksaSYmMCE9PU9iamVjdC5rZXlzKGEpLmxlbmd0aCl7dmFyIHU9T2JqZWN0LmFzc2lnbihyLHtjb252ZXJzYXRpb25UeXBlOmUsdGFyZ2V0SWQ6dCxjaGFubmVsSWQ6bix1cGRhdGVkSXRlbXM6YX0pO3RoaXMuX3NldFVwZGF0ZWRDb252ZXJzYXRpb24odSksdGhpcy5fbm90aWZ5Q29udmVyc2F0aW9uQ2hhbmdlZCgpfX0sZS5wcm90b3R5cGUuY2xlYXJBbGxVbnJlYWRDb3VudD1mdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5fc3RvcmUuZ2V0VmFsdWUoKS5mb3JFYWNoKChmdW5jdGlvbih0KXt0LnVucmVhZE1lc3NhZ2VDb3VudCYmKHQudW5yZWFkTWVzc2FnZUNvdW50PTAsZS5fc3RvcmUuc2V0KHQuY29udmVyc2F0aW9uVHlwZSx0LnRhcmdldElkLHQsdC5jaGFubmVsSWQpKX0pKX0sZS5wcm90b3R5cGUuc3RhcnRQdWxsQ29udmVyc2F0aW9uU3RhdHVzPWZ1bmN0aW9uKGUpe3RoaXMuX3N0YXR1c01hbmFnZXIucHVsbChlKX0sZS5wcm90b3R5cGUuc2V0RHJhZnQ9ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHI9ZStcIl9cIit0K1wiX1wiK2k7dGhpcy5fZHJhZnRNYXBbcl09bn0sZS5wcm90b3R5cGUuZ2V0RHJhZnQ9ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPWUrXCJfXCIrdCtcIl9cIituO3JldHVybiB0aGlzLl9kcmFmdE1hcFtpXX0sZS5wcm90b3R5cGUuY2xlYXJEcmFmdD1mdW5jdGlvbihlLHQsbil7dmFyIGk9ZStcIl9cIit0K1wiX1wiK247ZGVsZXRlIHRoaXMuX2RyYWZ0TWFwW2ldfSxlLnByb3RvdHlwZS5hZGRUYWdTdGF0dXM9ZnVuY3Rpb24oZSx0LG4saSl7dm9pZCAwPT09aSYmKGk9XCJcIik7dmFyIHI9dGhpcy5fc3RvcmUuZ2V0KGUsdCxpKS50YWdzO3I9T2JqZWN0LmFzc2lnbihyLG4pLHRoaXMuX3N0b3JlLnNldChlLHQse3RhZ3M6cn0saSl9LGUucHJvdG90eXBlLmRlbGV0ZVRhZ1N0YXR1cz1mdW5jdGlvbihlLHQsbixpKXt2b2lkIDA9PT1pJiYoaT1cIlwiKTt2YXIgcj10aGlzLl9zdG9yZS5nZXQoZSx0LGkpLnRhZ3M7bi5mb3JFYWNoKChmdW5jdGlvbihlKXtkZWxldGUgcltlXX0pKSx0aGlzLl9zdG9yZS5zZXQoZSx0LHt0YWdzOnJ9LGkpfSxlLnByb3RvdHlwZS5nZXRDb252ZXJzYXRpb25MaXN0Rm9yVGFnPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0b3JlLmdldFZhbHVlRm9yVGFnKCl9LGUucHJvdG90eXBlLmdldEJsb2NrQ29udmVyc2F0aW9uTGlzdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdG9yZS5nZXRWYWx1ZSgpLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIGUubm90aWZpY2F0aW9uU3RhdHVzPT09T2UuT1BFTn0pKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybntjb252ZXJzYXRpb25UeXBlOmUuY29udmVyc2F0aW9uVHlwZSx0YXJnZXRJZDplLnRhcmdldElkLGNoYW5uZWxJZDplLmNoYW5uZWxJZH19KSl9LGUucHJvdG90eXBlLmdldFRvcENvbnZlcnNhdGlvbkxpc3Q9ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5fc3RvcmUuZ2V0VmFsdWUoKXx8e30pLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIGUuaXNUb3B9KSkubWFwKChmdW5jdGlvbihlKXtyZXR1cm57Y29udmVyc2F0aW9uVHlwZTplLmNvbnZlcnNhdGlvblR5cGUsdGFyZ2V0SWQ6ZS50YXJnZXRJZCxjaGFubmVsSWQ6ZS5jaGFubmVsSWR9fSkpfSxlLnByb3RvdHlwZS5hZGFwdE9sZFN0b3JlPWZ1bmN0aW9uKCl7dGhpcy5fc3RvcmUuYWRhcHRPbGRTdG9yZSgpfSxlLnByb3RvdHlwZS5nZXRVbnJlYWRNZW50aW9uZWRDb3VudD1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHZvaWQgMD09PWUmJihlPVwiXCIpLHRoaXMuZ2V0KHQsbixlKS51bnJlYWRNZW50aW9uZWRDb3VudHx8MH0sZS5wcm90b3R5cGUuZ2V0QWxsVW5yZWFkTWVudGlvbmVkQ291bnQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9zdG9yZS5nZXRWYWx1ZSgpLHQ9MDtyZXR1cm4gZS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbj1lLnVucmVhZE1lbnRpb25lZENvdW50O249bnx8MCx0Kz1OdW1iZXIobil9KSksdH0sZS5wcm90b3R5cGUuZ2V0QWxsQ29udmVyc2F0aW9uU3RhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RvcmUuZ2V0VmFsdWUoKS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiBlLnVucmVhZE1lc3NhZ2VDb3VudHx8ZS51bnJlYWRNZW50aW9uZWRDb3VudH0pKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybntjb252ZXJzYXRpb25UeXBlOmUuY29udmVyc2F0aW9uVHlwZSx0YXJnZXRJZDplLnRhcmdldElkLGNoYW5uZWxJZDplLmNoYW5uZWxJZCx1bnJlYWRDb3VudDplLnVucmVhZE1lc3NhZ2VDb3VudHx8MCx1bnJlYWRNZW50aW9uZWRDb3VudDplLnVucmVhZE1lbnRpb25lZENvdW50fHwwfX0pKX0sZX0oKSxhcz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LG4saSl7dGhpcy5fcHVsbFF1ZXVlPVtdLHRoaXMuX2lzUHVsbGluZz0hMSx0aGlzLl9zdG9yYWdlVGFnS2V5PVwidGFnLVwiK3QrXCItXCIrbix0aGlzLl9zdG9yYWdlUHVsbFRpbWVLZXk9XCJ1cy1zLVwiK3QrXCItXCIrbix0aGlzLl9zdG9yYWdlPUkoZS5ydW50aW1lKSx0aGlzLl9lbmdpbmU9ZSx0aGlzLl90YWdXYXRjaGVyRnVuYz1pfXJldHVybiBlLnByb3RvdHlwZS5fdXBkYXRlVGFnPWZ1bmN0aW9uKGUpe3ZhciB0PWUudGFncyxuPXt9O3QuZm9yRWFjaCgoZnVuY3Rpb24oZSl7bltlLnRhZ0lkXT17dGFnTmFtZTplLnRhZ05hbWUsY3JlYXRlZFRpbWU6ZS5jcmVhdGVkVGltZX19KSksdGhpcy5fc3RvcmFnZS5zZXQodGhpcy5fc3RvcmFnZVRhZ0tleSxuKSx0aGlzLl90YWdXYXRjaGVyRnVuYygpfSxlLnByb3RvdHlwZS5hZGRUYWc9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLl9zdG9yYWdlLmdldCh0aGlzLl9zdG9yYWdlVGFnS2V5KXx8e307ZS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgdCxpPShudWxsPT09KHQ9bltlLnRhZ0lkXSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuY3JlYXRlZFRpbWUpfHxlLmNyZWF0ZWRUaW1lfHwwO25bZS50YWdJZF09e3RhZ05hbWU6ZS50YWdOYW1lLGNyZWF0ZWRUaW1lOml9fSkpLHRoaXMuX3N0b3JhZ2Uuc2V0KHRoaXMuX3N0b3JhZ2VUYWdLZXksbiksdGhpcy5fc3RvcmFnZS5zZXQodGhpcy5fc3RvcmFnZVB1bGxUaW1lS2V5LHQpfSxlLnByb3RvdHlwZS5kZWxldGVUYWc9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLl9zdG9yYWdlLmdldCh0aGlzLl9zdG9yYWdlVGFnS2V5KXx8e307ZS5mb3JFYWNoKChmdW5jdGlvbihlKXtkZWxldGUgbltlXX0pKSx0aGlzLl9zdG9yYWdlLnNldCh0aGlzLl9zdG9yYWdlVGFnS2V5LG4pLHRoaXMuX3N0b3JhZ2Uuc2V0KHRoaXMuX3N0b3JhZ2VQdWxsVGltZUtleSx0KX0sZS5wcm90b3R5cGUuZ2V0VGFnc0luZm89ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RvcmFnZS5nZXQodGhpcy5fc3RvcmFnZVRhZ0tleSl8fHt9fSxlLnByb3RvdHlwZS5nZXRUYWdzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fc3RvcmFnZS5nZXQodGhpcy5fc3RvcmFnZVRhZ0tleSl8fHt9LHQ9W107Zm9yKHZhciBuIGluIGUpdC5wdXNoKHt0YWdJZDpuLHRhZ05hbWU6ZVtuXS50YWdOYW1lLGNyZWF0ZWRUaW1lOmVbbl0uY3JlYXRlZFRpbWUsY29udmVyc2F0aW9uQ291bnQ6MH0pO3JldHVybiB0LnNvcnQoKGZ1bmN0aW9uKGUsdCl7cmV0dXJuKGUuY3JlYXRlZFRpbWV8fDApLSh0LmNyZWF0ZWRUaW1lfHwwKX0pKX0sZS5wcm90b3R5cGUuZ2V0VGFnQnlJZD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9zdG9yYWdlLmdldCh0aGlzLl9zdG9yYWdlVGFnS2V5KXx8e307cmV0dXJuIHRbZV0/e3RhZ0lkOmUsdGFnTmFtZTp0W2VdLnRhZ05hbWUsY3JlYXRlZFRpbWU6dFtlXS5jcmVhdGVkVGltZSxjb252ZXJzYXRpb25Db3VudDowfTpudWxsfSxlLnByb3RvdHlwZS5fc3RhcnRQdWxsPWZ1bmN0aW9uKCl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBlLHQsbixpLHIscyxvLGE7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24odSl7c3dpdGNoKHUubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5faXNQdWxsaW5nfHwwPT09dGhpcy5fcHVsbFF1ZXVlLmxlbmd0aD9bMl06KHRoaXMuX2lzUHVsbGluZz0hMCxlPXRoaXMuX3B1bGxRdWV1ZS5zcGxpY2UoMCwxKVswXSxbNCx0aGlzLl9lbmdpbmUucHVsbFVzZXJTZXR0aW5ncyhlKV0pO2Nhc2UgMTpyZXR1cm4gdD11LnNlbnQoKSxuPXQuY29kZSxpPXQuZGF0YSxuIT09RWUuU1VDQ0VTU3x8cmUoaSk/KHRoaXMuX2lzUHVsbGluZz0hMSx0aGlzLl9zdGFydFB1bGwoKSk6KHM9KHI9aSkuc2V0dGluZ3Msbz1yLnZlcnNpb24sYT1zLlRhZyxyZShhKXx8dGhpcy5fdXBkYXRlVGFnKGEpLHRoaXMuX3N0b3JhZ2Uuc2V0KHRoaXMuX3N0b3JhZ2VQdWxsVGltZUtleSxvKSx0aGlzLl9pc1B1bGxpbmc9ITEsdGhpcy5fc3RhcnRQdWxsKCkpLFsyXX19KSl9KSl9LGUucHJvdG90eXBlLnB1bGxVc2VyU2V0dGluZ3M9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fc3RvcmFnZS5nZXQodGhpcy5fc3RvcmFnZVB1bGxUaW1lS2V5KXx8MDsoZT50fHwwPT09ZSkmJih0aGlzLl9wdWxsUXVldWUucHVzaCh0KSx0aGlzLl9zdGFydFB1bGwoKSl9LGUucHJvdG90eXBlLmdldFZlcnNpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RvcmFnZS5nZXQodGhpcy5fc3RvcmFnZVB1bGxUaW1lS2V5KXx8MH0sZX0oKSx1cz1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQsbil7dmFyIGk9ZS5jYWxsKHRoaXMsdCxuKXx8dGhpcztyZXR1cm4gaS5fbWluaUNvbm5lY3RVcmw9XCJcIixpLl9jb25uZWN0VHlwZT1uLmNvbm5lY3Rpb25UeXBlLGl9cmV0dXJuIE4odCxlKSx0LnByb3RvdHlwZS5fZm9ybWF0SlNPTlBVcmw9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIGUrXCIvXCIrKHRoaXMuX3J1bnRpbWUuaXNTdXBwb3J0U29ja2V0KCkmJlwid2Vic29ja2V0XCI9PT10aGlzLl9jb25uZWN0VHlwZT9cIm5hdmlcIjpcImNvbWV0bmF2aVwiKStcIi5qcz9hcHBJZD1cIituK1wiJnRva2VuPVwiK2VuY29kZVVSSUNvbXBvbmVudCh0KStcIiZjYWxsQmFjaz1cIitpK1wiJnY9XCIrdGhpcy5fYXBpVmVyc2lvbitcIiZyPVwiK0RhdGUubm93KCl9LHQucHJvdG90eXBlLmdldEluZm89ZnVuY3Rpb24odCxuLGkpe3ZhciByO3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgcztyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihvKXtyZXR1cm4gdGhpcy5fcnVudGltZS51c2VOYXZpfHwocz12b2lkIDAscz10aGlzLl9ydW50aW1lLmlzU3VwcG9ydFNvY2tldCgpJiZcIndlYnNvY2tldFwiPT09dGhpcy5fY29ubmVjdFR5cGU/Yy5qb2luKFwiLFwiKTpoLmpvaW4oXCIsXCIpLHRoaXMuX21pbmlDb25uZWN0VXJsPShudWxsPT09KHI9dGhpcy5fb3B0aW9ucy5taW5pQ01QUHJveHkpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLmxlbmd0aCk/dGhpcy5fb3B0aW9ucy5taW5pQ01QUHJveHkuam9pbihcIixcIik6c3x8XCJcIixuPVtdKSxbMixlLnByb3RvdHlwZS5nZXRJbmZvLmNhbGwodGhpcyx0LG4saSldfSkpfSkpfSx0LnByb3RvdHlwZS5fcmVxTmF2aT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBpLHIscyxvLGEsdSxjLGgsbDtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihkKXtzd2l0Y2goZC5sYWJlbCl7Y2FzZSAwOmk9XCJnZXRTZXJ2ZXJFbmRwb2ludFwiLHI9MCxzPWUubGVuZ3RoLGQubGFiZWw9MTtjYXNlIDE6cmV0dXJuIHI8cz8obz10aGlzLl9mb3JtYXRKU09OUFVybChlW3JdLG4sdCxpKSxnZS5kZWJ1ZyhcInJlcSBuYXZpID0+IFwiK28pLFs0LHRoaXMuX3J1bnRpbWUuaHR0cFJlcSh7dXJsOm8sdGltZW91dDoxZTQsZGF0YVR5cGU6XCJ0ZXh0XCJ9KV0pOlszLDRdO2Nhc2UgMjppZigyMDAhPT0oYT1kLnNlbnQoKSkuc3RhdHVzKXJldHVybiA0MDM9PT1hLnN0YXR1cz9nZS5lcnJvcihcInJlcXVlc3QgbmF2aSBlcnJvcjogXCIrRWUuUkNfQ09OTl9VU0VSX09SX1BBU1NXRF9FUlJPUik6NDAxPT09YS5zdGF0dXMmJmdlLmVycm9yKFwicmVxdWVzdCBuYXZpIGVycm9yOiBcIitFZS5SQ19DT05OX0FQUF9CTE9DS0VEX09SX0RFTEVURUQpLFszLDNdO3RyeXtyZXR1cm4gdT1hLmRhdGEubWF0Y2goL3tbXFxkXFxEXSt9LyksMD09PShjPXUmJnVbMF0/dVswXTpcIlwiKS5pbmRleE9mKCd7XFxcXFwiY29kZVxcXFxcIjonKSYmKGM9SlNPTi5wYXJzZSgnXCInK2MrJ1wiJykpLGw9SlNPTi5wYXJzZShjKSxoPS9eaHR0cHMvLnRlc3Qobyk/XCJodHRwc1wiOlwiaHR0cFwiLGwucHJvdG9jb2w9aCx0aGlzLl9ydW50aW1lLnVzZU5hdml8fChsLnNlcnZlcj1cIlwiLGwuYmFja3VwU2VydmVyPXRoaXMuX21pbmlDb25uZWN0VXJsLGwubG9nU3dpdGNoPTApLFsyLGxdfWNhdGNoKGUpe2dlLmVycm9yKFwicGFyc2UgbmF2aSBlcnIgPT5cIixlKX1kLmxhYmVsPTM7Y2FzZSAzOnJldHVybiByKz0xLFszLDFdO2Nhc2UgNDpyZXR1cm4gdGhpcy5fcnVudGltZS51c2VOYXZpP1syLG51bGxdOlsyLGw9e2NvZGU6MjAwLHByb3RvY29sOlwiaHR0cHNcIixzZXJ2ZXI6XCJcIix2b2lwQ2FsbEluZm86XCJcIixrdlN0b3JhZ2U6MCxvcGVuSHR0cEROUzohMSxoaXN0b3J5TXNnOiExLGNoYXRyb29tTXNnOiExLHVwbG9hZFNlcnZlcjpcImh0dHBzOi8vdXBsb2FkLnFpbml1cC5jb21cIixib3NBZGRyOlwiaHR0cHM6Ly9nei5iY2Vib3MuY29tXCIsbG9jYXRpb246XCJcIixtb25pdG9yOjAsam9pbk1DaHJtOiExLG9wZW5NcDowLG9wZW5VUzowLGdycE1zZ0xpbWl0OjAsaXNGb3JtYXR0ZWQ6MCxnaWZTaXplOjIwNDgsbG9nU3dpdGNoOjAsbG9nUG9saWN5OlwiXCIsY29tcERheXM6MCxtc2dBY2s6XCJcIixhY3RpdmVTZXJ2ZXI6XCJcIixxbkFkZHI6XCJcIixleHRraXRTd2l0Y2g6MCxhbG9uZTohMSx2b2lwU2VydmVyOlwiXCIsb2ZmbGluZWxvZ3NlcnZlcjpcIlwiLGJhY2t1cFNlcnZlcjp0aGlzLl9taW5pQ29ubmVjdFVybH1dfX0pKX0pKX0sdH0ocXIpLGNzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLl9wdWxsUXVldWU9W10sdGhpcy5faXNQdWxsaW5nPSExLHRoaXMuX3B1bGxUaW1lPTAsdGhpcy5fZW5naW5lPWV9cmV0dXJuIGUucHJvdG90eXBlLl9zdGFydFB1bGw9ZnVuY3Rpb24oKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIGUsdCxuLGkscixzLG87cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oYSl7c3dpdGNoKGEubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5faXNQdWxsaW5nfHwwPT09dGhpcy5fcHVsbFF1ZXVlLmxlbmd0aD9bMl06KHRoaXMuX2lzUHVsbGluZz0hMCxlPXRoaXMuX3B1bGxRdWV1ZS5zcGxpY2UoMCwxKVswXSx0PWUucm9vbUlkLG49ZS50aW1lc3RhbXAsKGk9dGhpcy5fcHVsbFRpbWUpPm4/KHRoaXMuX2lzUHVsbGluZz0hMSx0aGlzLl9zdGFydFB1bGwoKSxbMl0pOls0LHRoaXMuX2VuZ2luZS5wdWxsUlRDUm9vbUVudHJ5KHQsaSldKTtjYXNlIDE6cmV0dXJuIHI9YS5zZW50KCkscz1yLmNvZGUsbz1yLmRhdGEscz09PUVlLlNVQ0NFU1M/KHRoaXMuX2lzUHVsbGluZz0hMSx0aGlzLl9wdWxsVGltZT1vLnN5bmNUaW1lfHwwLHRoaXMuX3N0YXJ0UHVsbCgpKTp0aGlzLl9zdGFydFB1bGwoKSxbMl19fSkpfSkpfSxlLnByb3RvdHlwZS5wdWxsRW50cnk9ZnVuY3Rpb24oZSx0KXt0aGlzLl9wdWxsUXVldWUucHVzaCh7cm9vbUlkOmUsdGltZXN0YW1wOnR9KSx0aGlzLl9zdGFydFB1bGwoKX0sZS5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLl9wdWxsVGltZT0wLHRoaXMuX2lzUHVsbGluZz0hMX0sZX0oKSxocz1mdW5jdGlvbihlLHQpe3JldHVybltcInNlbmRfbXNnXCIsZSx0XS5qb2luKFwiX1wiKX0sbHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dGhpcy5fcnVudGltZT1lLHRoaXMuX2FwcGtleT10LHRoaXMuX3NlbmRNZXNzYWdlTWFwPXt9LHRoaXMuX3VzZXJJZD1cIlwifXJldHVybiBlLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKGUpe3RoaXMuX3VzZXJJZD1lO3ZhciB0PWhzKHRoaXMuX2FwcGtleSxlKTt0aGlzLl9zZW5kTWVzc2FnZU1hcD10aGlzLl9nZXRMb2NhbEluZm8odCl9LGUucHJvdG90eXBlLl9nZXRMb2NhbEluZm89ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fcnVudGltZS5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShlKTt0cnl7cmV0dXJuIHQ/SlNPTi5wYXJzZSh0KTp7fX1jYXRjaChlKXtyZXR1cm57fX19LGUucHJvdG90eXBlLnNldE1lc3NhZ2U9ZnVuY3Rpb24oZSx0KXt0aGlzLl9zZW5kTWVzc2FnZU1hcFtlXT10O3ZhciBuPWhzKHRoaXMuX2FwcGtleSx0aGlzLl91c2VySWQpLGk9dGhpcy5fZ2V0TG9jYWxJbmZvKG4pO2lbZV09dCx0aGlzLl9ydW50aW1lLmxvY2FsU3RvcmFnZS5zZXRJdGVtKG4sSlNPTi5zdHJpbmdpZnkoaSkpfSxlLnByb3RvdHlwZS5nZXRTZW5kTWVzc2FnZU1hcD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zZW5kTWVzc2FnZU1hcH0sZS5wcm90b3R5cGUucmVtb3ZlQnlVSUQ9ZnVuY3Rpb24oZSl7ZGVsZXRlIHRoaXMuX3NlbmRNZXNzYWdlTWFwW2VdfSxlLnByb3RvdHlwZS5yZW1vdmVCeVRpbWVzdGFtcD1mdW5jdGlvbihlKXt2YXIgdD1ocyh0aGlzLl9hcHBrZXksdGhpcy5fdXNlcklkKSxuPXRoaXMuX2dldExvY2FsSW5mbyh0KTtPYmplY3Qua2V5cyhuKS5mb3JFYWNoKChmdW5jdGlvbih0KXtuW3RdPGUmJmRlbGV0ZSBuW3RdfSkpLHRoaXMuX3J1bnRpbWUubG9jYWxTdG9yYWdlLnNldEl0ZW0odCxKU09OLnN0cmluZ2lmeShuKSl9LGV9KCksZHM9ZnVuY3Rpb24oZSl7dmFyIHQ9XCJSQ0RldmljZUlkXCIsbj1JKGUpLGk9XCJcIixyPW4uZ2V0KHQpO3JldHVybiByP2k9cjooaT1IKCksbi5zZXQodCxpKSksaX07KHRzPXt9KVtqLlBSSVZBVEVdPWJyLnFyeVBNc2csdHNbai5HUk9VUF09YnIucXJ5R01zZyx0c1tqLkNIQVRST09NXT1ici5xcnlDSE1zZyx0c1tqLkNVU1RPTUVSX1NFUlZJQ0VdPWJyLnFyeUNNc2csdHNbai5TWVNURU1dPWJyLnFyeVNNc2c7dmFyIGZzPVticltici5yZWNhbGxNc2ddLGJyW2JyLnBwTXNnU10sYnJbYnIucGdNc2dTXSxicltici5wcE1zZ1BdLGJyW2JyLnBnTXNnUF0sYnJbYnIuY2hhdE1zZ10sYnJbYnIucGNNc2dQXSxicltici5wck1zZ1NdLGJyW2JyLnVwZFVnUlRpbWVdXSxwcz1mdW5jdGlvbihlLHQsbixyLHMsbyl7cmV0dXJue2NvbnZlcnNhdGlvblR5cGU6ZSx0YXJnZXRJZDp0LHNlbmRlclVzZXJJZDpvLG1lc3NhZ2VEaXJlY3Rpb246bWUuU0VORCxpc0NvdW50ZWQ6ISFuLmlzQ291bnRlZCxpc01lbnRpb25lZDohIW4uaXNNZW50aW9uZWQsY29udGVudDpuLmNvbnRlbnQsbWVzc2FnZVR5cGU6bi5tZXNzYWdlVHlwZSxpc09mZkxpbmVNZXNzYWdlOiExLGlzUGVyc2l0ZWQ6ISFuLmlzUGVyc2l0ZWQsbWVzc2FnZVVJZDpyLHNlbnRUaW1lOnMscmVjZWl2ZWRUaW1lOjAsZGlzYWJsZU5vdGlmaWNhdGlvbjohIW4uZGlzYWJsZU5vdGlmaWNhdGlvbixpc1N0YXR1c01lc3NhZ2U6ISFuLmlzU3RhdHVzTWVzc2FnZSxjYW5JbmNsdWRlRXhwYW5zaW9uOiEhbi5jYW5JbmNsdWRlRXhwYW5zaW9uLGV4cGFuc2lvbjpuLmNhbkluY2x1ZGVFeHBhbnNpb24/bi5leHBhbnNpb246bnVsbCxyZWNlaXZlZFN0YXR1czppLlVOUkVBRCxwdXNoQ29uZmlnOm4ucHVzaENvbmZpZyxjaGFubmVsSWQ6bi5jaGFubmVsSWQsaXNJbnRlcnJ1cHQ6bi5pc0ludGVycnVwdH19LGdzPWZ1bmN0aW9uKGUpe3JldHVybiBlLnNvcnQoKGZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyPShudWxsPT09KG49ZS5sYXRlc3RNZXNzYWdlKXx8dm9pZCAwPT09bj92b2lkIDA6bi5zZW50VGltZSl8fDA7cmV0dXJuKChudWxsPT09KGk9dC5sYXRlc3RNZXNzYWdlKXx8dm9pZCAwPT09aT92b2lkIDA6aS5zZW50VGltZSl8fDApLXJ9KSl9LF9zPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxuLGkpe3ZhciByPWUuY2FsbCh0aGlzLHQsbixpKXx8dGhpcztyZXR1cm4gci5fY3VzdG9tTWVzc2FnZVR5cGU9e30sci5fcmVjb25uZWN0VGltZXI9LTEsci5fcHVsbE9mZmxpbmVGaW5pc2hlZD0hMSxyLl9jb25uZWN0ZWRUaW1lPTAsci5fbG9jYWxDb25uZWN0ZWRUaW1lPTAsci5fc3RhdHVzPUllLkRJU0NPTk5FQ1RFRCxyLl9wdWxsaW5nTXNnPSExLHIuX3B1bGxRdWV1ZT1bXSxyLl9jaHJtc1F1ZXVlPXt9LHIuX2xhdGVzdFN5bmNUaW1lc3RhbXA9MCxyLl9pbnRlcnZhbFRpbWVyPS0xLHIuX3B1bGxDaGF0cm9vbUVudHJ5VGltZXN0YW1wPTAsci5fbGFzdFN5bmNVbHRyYU1zZ1RpbWVTdGFtcD0wLHIuX2xhc3RTeW5jVWx0cmFNc2dMb2NhbFRpbWVTdGFtcD0wLHIuX3VsdHJhR3JvdXBUaW1lcj0tMSxyLl9pc1VsdHJhUHVsbGluZz0hMSxyLl91bHRyYUdyb3VwVGltZVF1ZT1bXSxyLl9pc1VsdHJhR3JvdXBMaXN0RXhpc3Q9ITEsci5fdWx0cmFHcm91cE1hcD17fSxyLl9maXJzdFB1bGxVbHRyYUdyb3VwVGltZT0wLHIuX3VsdHJhTXNnTWFwPXt9LHIuX3B1bGxVbHRyYUNoYW5nZU1lc3NhZ2VRdWU9W10sci5faXNQdWxsaW5nVWx0cmFDaGFuZ2VNZXNzYWdlPSExLHIuX2xhc3RQdWxsaW5nVWx0cmFDaGFuZ2VNZXNzYWdlVGltZT0wLHIuX3VsdHJhTXNnQ2hhbmdlTWFwPXt9LHIuX2xldHRlcmJveD1uZXcgSHIodCxpLmFwcGtleSksci5fc2VuZE1lc3NhZ2VTdG9yZT1uZXcgbHModCxpLmFwcGtleSksci5fY2hybUVudHJ5SGFuZGxlcj1uZXcgUXIocikscn1yZXR1cm4gTih0LGUpLHQucHJvdG90eXBlLl9jcmVhdGVOYXZpPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB1cyh0aGlzLnJ1bnRpbWUsdGhpcy5fb3B0aW9ucyl9LHQucHJvdG90eXBlLmdldENvbm5lY3RlZFRpbWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29ubmVjdGVkVGltZX0sdC5wcm90b3R5cGUuY29ubmVjdD1mdW5jdGlvbihlLHQpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbixpLHIscyxvLGE9dGhpcztyZXR1cm4gdyh0aGlzLChmdW5jdGlvbih1KXtzd2l0Y2godS5sYWJlbCl7Y2FzZSAwOnJldHVybiBuPVtdLHRoaXMuX25hdmlJbmZvPXQsdC5zZXJ2ZXI/bi5wdXNoKHQuc2VydmVyKTpnZS53YXJuKFwibmF2aS5zZXJ2ZXIgaXMgaW52YWxpZFwiKSwoaT10LmJhY2t1cFNlcnZlcikmJmkuc3BsaXQoXCIsXCIpLmZvckVhY2goKGZ1bmN0aW9uKGUpe24uaW5kZXhPZihlKTwwJiZuLnB1c2goZSl9KSksMD09PW4ubGVuZ3RoPyhnZS5lcnJvcihcIm5hdmkgaW52YWlsZC5cIixuKSxbMixFZS5VTktOT1dOXSk6KHI9dGhpcy5ydW50aW1lLmNyZWF0ZURhdGFDaGFubmVsKHtzdGF0dXM6ZnVuY3Rpb24oaSl7YS5fY29ubmVjdGlvblN0YXR1c0hhbmRsZXIoaSxlLG4sdC5wcm90b2NvbCl9LHNpZ25hbDp0aGlzLl9zaWduYWxIYW5kbGVyLmJpbmQodGhpcyl9LHRoaXMuX29wdGlvbnMuY29ubmVjdGlvblR5cGUpLHM9ZXQuVjMsMT09PXQub3BlbkFudGkmJihzPWV0LlY0KSxbNCxyLmNvbm5lY3QodGhpcy5fYXBwa2V5LGUsbix0LnByb3RvY29sLHRoaXMuX2FwaVZlcixzKV0pO2Nhc2UgMTpyZXR1cm4obz11LnNlbnQoKSk9PT1FZS5TVUNDRVNTPyh0aGlzLl9jaGFubmVsPXIsdGhpcy5jdXJyZW50VXNlcklkPXIudXNlcklkLHRoaXMuX2Nvbm5lY3RlZFRpbWU9ci5jb25uZWN0ZWRUaW1lLHRoaXMuX2xvY2FsQ29ubmVjdGVkVGltZT1NYXRoLmZsb29yKChEYXRlLm5vdygpK3Iuc2VuZENvbm5lY3RUaW1lKS8yKSx0aGlzLl93YXRjaGVyLnN0YXR1cyhJZS5DT05ORUNURUQpLHRoaXMuX3N0YXR1cz1JZS5DT05ORUNURUQsdGhpcy5fcHVsbE9mZmxpbmVGaW5pc2hlZD0hMSx0aGlzLl9jb252ZXJzYXRpb25NYW5hZ2VyPW5ldyBvcyh0aGlzLHRoaXMuX2FwcGtleSx0aGlzLmN1cnJlbnRVc2VySWQsdGhpcy5fd2F0Y2hlci5jb252ZXJzYXRpb24sdGhpcy5fd2F0Y2hlci5jb252ZXJzYXRpb25UYWcpLHRoaXMuX2NvbnZlcnNhdGlvbk1hbmFnZXIuc3RhcnRQdWxsQ29udmVyc2F0aW9uU3RhdHVzKDApLHRoaXMuX3VzZXJTZXR0aW5nTWFuYWdlcj1uZXcgYXModGhpcyx0aGlzLl9hcHBrZXksdGhpcy5jdXJyZW50VXNlcklkLHRoaXMuX3dhdGNoZXIudGFnKSx0aGlzLl91c2VyU2V0dGluZ01hbmFnZXIucHVsbFVzZXJTZXR0aW5ncygwKSx0aGlzLl9zZW5kTWVzc2FnZVN0b3JlLmluaXQodGhpcy5jdXJyZW50VXNlcklkKSx0aGlzLl9jb252ZXJzYXRpb25NYW5hZ2VyLmFkYXB0T2xkU3RvcmUoKSx0aGlzLl9ydGNLVk1hbmFnZXI9bmV3IGNzKHRoaXMpLHRoaXMuX2pvaW5lZENocm1NYW5hZ2VyPW5ldyBXcih0aGlzLnJ1bnRpbWUsdGhpcy5fYXBwa2V5LHRoaXMuY3VycmVudFVzZXJJZCx0LmpvaW5NQ2hybSksdGhpcy5fc3RhcnRTeW5jSW50ZXJ2YWwoKSwxPT09dC51Z01zZyYmdGhpcy5fc3RhcnRVbHRyYVN5bmNJbnRlcnZhbCgpKTpyLmNsb3NlKCksWzIsb119fSkpfSkpfSx0LnByb3RvdHlwZS5fY29ubmVjdGlvblN0YXR1c0hhbmRsZXI9ZnVuY3Rpb24oZSx0LG4saSl7aWYoZ2Uud2FybihcImNvbm5lY3Rpb24gc3RhdHVzIGNoYW5nZWQ6XCIsZSksdGhpcy5fc3RhdHVzPWUsZSE9PUllLkNPTk5FQ1RJTkcpaWYoZSE9PUllLkNPTk5FQ1RFRCl7aWYodGhpcy5fY2hhbm5lbCYmZSE9PUllLkRJU0NPTk5FQ1RFRClyZXR1cm4gZT09PUllLkJMT0NLRUR8fGU9PT1JZS5LSUNLRURfT0ZGTElORV9CWV9PVEhFUl9DTElFTlR8fGU9PT1JZS5ESVNDT05ORUNUX0JZX1NFUlZFUj8odGhpcy5kaXNjb25uZWN0KCksdm9pZCB0aGlzLl93YXRjaGVyLnN0YXR1cyhlKSk6dm9pZChlIT09SWUuUkVESVJFQ1Q/KHRoaXMuX3dhdGNoZXIuc3RhdHVzKGUpLHRoaXMuX3RyeTJSZWNvbm5lY3QodCxuLGkpKTp0aGlzLl93YXRjaGVyLnN0YXR1cyhlKSk7dGhpcy5fd2F0Y2hlci5zdGF0dXMoZSl9ZWxzZSB0aGlzLl93YXRjaGVyLnN0YXR1cyhlKTtlbHNlIHRoaXMuX3dhdGNoZXIuc3RhdHVzKGUpfSx0LnByb3RvdHlwZS5fdHJ5MlJlY29ubmVjdD1mdW5jdGlvbihlLHQsbil7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBpLHI9dGhpcztyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihzKXtzd2l0Y2gocy5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9jaGFubmVsPyhpPWV0LlYzLDE9PT10aGlzLl9uYXZpSW5mby5vcGVuQW50aSYmKGk9ZXQuVjQpLFs0LHRoaXMuX2NoYW5uZWwuY29ubmVjdCh0aGlzLl9hcHBrZXksZSx0LG4sdGhpcy5fYXBpVmVyLGkpXSk6WzJdO2Nhc2UgMTpyZXR1cm4gcy5zZW50KCk9PT1FZS5TVUNDRVNTPyh0aGlzLl9wdWxsT2ZmbGluZUZpbmlzaGVkPSExLHRoaXMuX3N0YXJ0U3luY0ludGVydmFsKCksdGhpcy5fd2F0Y2hlci5zdGF0dXMoSWUuQ09OTkVDVEVEKSx0aGlzLl9zdGF0dXM9SWUuQ09OTkVDVEVELHRoaXMuX3N0YXJ0VWx0cmFTeW5jSW50ZXJ2YWwoKSx0aGlzLl9yZWpvaW5DaHJtKCksZ2UuX19pbnNlcnRMb2dJbnRvRGF0YWJhc2UoKSxbMl0pOih0aGlzLl93YXRjaGVyLnN0YXR1cyhJZS5XRUJTT0NLRVRfVU5BVkFJTEFCTEUpLHRoaXMuX3N0YXR1cz1JZS5XRUJTT0NLRVRfVU5BVkFJTEFCTEUsdGhpcy5fcmVjb25uZWN0VGltZXI9c2V0VGltZW91dCgoZnVuY3Rpb24oKXtyLl9yZWNvbm5lY3RUaW1lcj0tMSxyLl90cnkyUmVjb25uZWN0KGUsdCxuKX0pLDVlMyksWzJdKX19KSl9KSl9LHQucHJvdG90eXBlLl9zaWduYWxIYW5kbGVyPWZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5zeW5jTXNnLGk9ZS50b3BpYztpZihuKXRoaXMuX3JlY2VpdmVTeW5jTXNnKGUsdCk7ZWxzZXt2YXIgcj1icltpXTtpZihyKXN3aXRjaChyKXtjYXNlIGJyLnNfbnRmOmdlLmluZm8oXCJyZWN2IHNfbnRmIC0+IHNpZ25hbC5tZXNzYWdlSWQ6IFwiK2UubWVzc2FnZUlkKSx0aGlzLl9wdWxsTXNnKGUpO2JyZWFrO2Nhc2UgYnIuc19tc2c6dGhpcy5fcmVjZWl2ZU1zZyhlKTticmVhaztjYXNlIGJyLnNfY21kOnRoaXMuX3JlY2VpdmVTdGF0ZU5vdGlmeShlKTticmVhaztjYXNlIGJyLnNfdXM6dGhpcy5fcmVjZWl2ZVNldHRpbmdOb3RpZnkoZSk7YnJlYWs7Y2FzZSBici5ydGNfbnRmOnRoaXMuX3JlY2VpdmVSdGNLdihlKTticmVhaztjYXNlIGJyLnNfb3BOdGY6dGhpcy5fcHVsbE9wZXJhdGVTdGF0dXNOb3RpZnkoZSl9ZWxzZSBnZS5lcnJvcihcInVua25vd24gdG9waWM6XCIsaSl9fSx0LnByb3RvdHlwZS5fcmVjZWl2ZVN0YXRlTm90aWZ5PWZ1bmN0aW9uKGUpe3ZhciB0LG49bnVsbD09PSh0PXRoaXMuX2NoYW5uZWwpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmNvZGVjLmRlY29kZUJ5UEJOYW1lKGUuZGF0YSxCdCksaT1uLnRpbWUscj1uLnR5cGUscz1uLmNocm1JZDtzd2l0Y2gocil7Y2FzZSAyOnRoaXMuX2Nocm1FbnRyeUhhbmRsZXIucHVsbEVudHJ5KHMsaSk7YnJlYWs7Y2FzZSAzOnRoaXMuX2NvbnZlcnNhdGlvbk1hbmFnZXIuc3RhcnRQdWxsQ29udmVyc2F0aW9uU3RhdHVzKGkpO2JyZWFrO2Nhc2UgNDp0aGlzLl9jaHJtRW50cnlIYW5kbGVyLnJlc2V0KHMpLHRoaXMuX3dhdGNoZXIuY2hhdHJvb20oe2NoYXRyb29tRGVzdHJveWVkOmUudGFyZ2V0SWR9KTticmVhaztjYXNlIDY6dGhpcy5fdWx0cmFHcm91cFRpbWVRdWUucHVzaChpKSx0aGlzLl9zeW5jVWx0cmFNc2codGhpcy5fbGFzdFN5bmNVbHRyYU1zZ1RpbWVTdGFtcCk7YnJlYWs7Y2FzZSA3OnRoaXMuX3B1bGxVbHRyYUNoYW5nZU1lc3NhZ2VRdWUucHVzaChpKSx0aGlzLl9wdWxsVWx0cmFDaGFuZ2VNZXNzYWdlTGlzdCh0aGlzLl9sYXN0UHVsbGluZ1VsdHJhQ2hhbmdlTWVzc2FnZVRpbWUpfX0sdC5wcm90b3R5cGUuX3JlY2VpdmVTZXR0aW5nTm90aWZ5PWZ1bmN0aW9uKGUpe3ZhciB0LG49KG51bGw9PT0odD10aGlzLl9jaGFubmVsKXx8dm9pZCAwPT09dD92b2lkIDA6dC5jb2RlYy5kZWNvZGVCeVBCTmFtZShlLmRhdGEsa24pKS52ZXJzaW9uO3RoaXMuX3VzZXJTZXR0aW5nTWFuYWdlci5wdWxsVXNlclNldHRpbmdzKG4pfSx0LnByb3RvdHlwZS5fcmVjZWl2ZVJ0Y0t2PWZ1bmN0aW9uKGUpe3ZhciB0LG49bnVsbD09PSh0PXRoaXMuX2NoYW5uZWwpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmNvZGVjLmRlY29kZUJ5UEJOYW1lKGUuZGF0YSxmaSksaT1uLnRpbWUscj1uLnR5cGUscz1uLnJvb21JZDtzd2l0Y2gocil7Y2FzZSAxOnRoaXMuX3J0Y0tWTWFuYWdlci5wdWxsRW50cnkocyxpKX19LHQucHJvdG90eXBlLl9yZWNlaXZlTWVzc2FnZUV4cGFuc2lvbj1mdW5jdGlvbihlKXt2YXIgdD1lLmNvbnRlbnQsbj10LnB1dCxpPXQuZGVsLHI9dC5taWQ7biYmdGhpcy5fd2F0Y2hlci5leHBhbnNpb24oe3VwZGF0ZWRFeHBhbnNpb246e21lc3NhZ2VVSWQ6cixleHBhbnNpb246bn19KSxpJiZ0aGlzLl93YXRjaGVyLmV4cGFuc2lvbih7ZGVsZXRlZEV4cGFuc2lvbjp7bWVzc2FnZVVJZDpyLGRlbGV0ZWRLZXlzOml9fSl9LHQucHJvdG90eXBlLl9yZWNlaXZlU3luY01zZz1mdW5jdGlvbihlLHQpe3ZhciBuLGk7aWYoZnMuaW5jbHVkZXMoZS50b3BpYykpe2lmKGUudG9waWM9PT1icltici51cGRVZ1JUaW1lXSl7dmFyIHI9bnVsbD09PShuPXRoaXMuX2NoYW5uZWwpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLmNvZGVjLmRlY29kZUJ5UEJOYW1lKGUuZGF0YSx6dCkscz1yLmNoYW5uZWxJZCxvPXIuYnVzQ2hhbm5lbCxhPXRoaXMuX3VsdHJhR3JvdXBNYXBbbytcIl9cIitzXTtyZXR1cm4gYSYmKGEudW5yZWFkTWVzc2FnZUNvdW50PTAsYS51bnJlYWRNZW50aW9uZWRDb3VudD0wLGEubGFzdFJlYWRUaW1lPXQudGltZXN0YW1wLHRoaXMuX3dhdGNoZXIuY29udmVyc2F0aW9uKEl0KFthXSkpKSx2b2lkKHQmJih0aGlzLl91bHRyYU1zZ01hcFt0Lm1lc3NhZ2VVSWRdPXQudGltZXN0YW1wKSl9dmFyIHU9bnVsbD09PShpPXRoaXMuX2NoYW5uZWwpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLmNvZGVjLmRlY29kZUJ5UEJOYW1lKGUuZGF0YSxVdCx7Y3VycmVudFVzZXJJZDp0aGlzLmN1cnJlbnRVc2VySWQsc2lnbmFsOmV9KTt1PXRoaXMuX2hhbmRsZU1zZ1Byb3BlcnRpZXModSksdCYmKHUuc2VudFRpbWU9dC50aW1lc3RhbXAsdS5tZXNzYWdlVUlkPXQubWVzc2FnZVVJZCksdGhpcy5fcHVsbGluZ01zZz90aGlzLl9wdWxsUXVldWUucHVzaCgobnVsbD09dD92b2lkIDA6dC50aW1lc3RhbXApfHx1LnNlbnRUaW1lKToodCYmdGhpcy5fc2VuZE1lc3NhZ2VTdG9yZS5zZXRNZXNzYWdlKHQubWVzc2FnZVVJZCx0LnRpbWVzdGFtcCksdS5tZXNzYWdlVHlwZSE9PVNlLkVYUEFOU0lPTl9OT1RJRlk/KHUubWVzc2FnZVR5cGU9PT1TZS5TWU5DX1JFQURfU1RBVFVTJiZ0aGlzLl9jb252ZXJzYXRpb25NYW5hZ2VyLmNsZWFyVW5yZWFkQ291bnQodS5jb252ZXJzYXRpb25UeXBlLHUudGFyZ2V0SWQsdS5jaGFubmVsSWQpLHRoaXMuX2NvbnZlcnNhdGlvbk1hbmFnZXIuc2V0Q29udmVyc2F0aW9uQ2FjaGVCeU1lc3NhZ2UodSwhMCksdGhpcy5fd2F0Y2hlci5iYXRjaE1lc3NhZ2UoW3VdKSk6dGhpcy5fcmVjZWl2ZU1lc3NhZ2VFeHBhbnNpb24odSkpfX0sdC5wcm90b3R5cGUuX3B1bGxNc2c9ZnVuY3Rpb24oZSl7aWYodGhpcy5fY2hhbm5lbCl7dmFyIHQ9dGhpcy5fY2hhbm5lbC5jb2RlYy5kZWNvZGVCeVBCTmFtZShlLmRhdGEsQnQpLG49dC50eXBlLGk9dC5jaHJtSWQscj10LnRpbWU7aWYoZ2UuaW5mbyhcInNfbnRmIC0+IHR5cGU6IFwiK24rXCIsIGNocm1JZDogXCIraStcIiwgdGltZTogXCIrciksMj09PW4pe3ZhciBzPXRoaXMuX2Nocm1zUXVldWVbaV07aWYoIXMpcmV0dXJuO3MucXVldWUucHVzaChyKSx0aGlzLl9wdWxsQ2hybU1zZyhpKX1lbHNlIHRoaXMuX3B1bGxRdWV1ZS5wdXNoKHIpLHRoaXMuX3N5bmNNc2coKX19LHQucHJvdG90eXBlLl9zdGFydFN5bmNJbnRlcnZhbD1mdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5fc3RvcFN5bmNJbnRlcnZhbCgpO3RoaXMuX2ludGVydmFsVGltZXI9c2V0SW50ZXJ2YWwoKGZ1bmN0aW9uKCl7RGF0ZS5ub3coKS1lLl9sYXRlc3RTeW5jVGltZXN0YW1wPj0xOGU0JiZlLl9zeW5jTXNnKCl9KSwzZTQpLHRoaXMuX2xhdGVzdFN5bmNUaW1lc3RhbXA9RGF0ZS5ub3coKSx0aGlzLl9zeW5jTXNnKCl9LHQucHJvdG90eXBlLl9zdG9wU3luY0ludGVydmFsPWZ1bmN0aW9uKCl7LTEhPT10aGlzLl9pbnRlcnZhbFRpbWVyJiYoY2xlYXJJbnRlcnZhbCh0aGlzLl9pbnRlcnZhbFRpbWVyKSx0aGlzLl9pbnRlcnZhbFRpbWVyPS0xKX0sdC5wcm90b3R5cGUuX3N5bmNNc2c9ZnVuY3Rpb24oKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIGUsdCxuLGkscixzLG8sYSx1LGMsaCxsLGQsZixwPXRoaXM7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oZyl7c3dpdGNoKGcubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5fcHVsbGluZ01zZz9bMl06dGhpcy5fY2hhbm5lbD8odGhpcy5fcHVsbGluZ01zZz0hMCxlPXRoaXMuX2xldHRlcmJveC5nZXRPdXRib3hUaW1lKHRoaXMuY3VycmVudFVzZXJJZCksdD10aGlzLl9sZXR0ZXJib3guZ2V0SW5ib3hUaW1lKHRoaXMuY3VycmVudFVzZXJJZCksZ2UuaW5mbyhcInB1bGxNc2cgLT4gc2VuZGJveFRpbWU6IFwiK2UrXCIsIGluYm94VGltZTogXCIrdCksbj10aGlzLl9jaGFubmVsLmNvZGVjLmVuY29kZVN5bmNNc2coe3NlbmRib3hUaW1lOmUsaW5ib3hUaW1lOnR9KSxpPW5ldyBPcihicltici5wdWxsTXNnXSxuLHRoaXMuY3VycmVudFVzZXJJZCksWzQsdGhpcy5fY2hhbm5lbC5zZW5kKGksUHQse2Nvbm5lY3RlZFRpbWU6dGhpcy5fY2hhbm5lbC5jb25uZWN0ZWRUaW1lLGN1cnJlbnRVc2VySWQ6dGhpcy5jdXJyZW50VXNlcklkfSldKToodGhpcy5fcHVsbGluZ01zZz0hMSxbMl0pO2Nhc2UgMTpyZXR1cm4gcj1nLnNlbnQoKSxzPXIuY29kZSxvPXIuZGF0YSx0aGlzLl9sYXRlc3RTeW5jVGltZXN0YW1wPURhdGUubm93KCkscyE9PUVlLlNVQ0NFU1N8fCFvfHxyZShvLmZpbmlzaGVkKXx8cmUoby5saXN0KXx8cmUoby5zeW5jVGltZSk/KGdlLndhcm4oXCJwdWxsTXNnIGZhaWxlZCAtPiBjb2RlOlwiLHMsXCIsIGRhdGE6IFwiLG8pLHRoaXMuX3B1bGxpbmdNc2c9ITEsWzJdKTooYT1vLmxpc3QsdT1vLmZpbmlzaGVkLGM9by5zeW5jVGltZSxnZS5pbmZvKFwicHVsbE1zZyBzdWNjZXNzIC0+IHN5bmNUaW1lOiBcIitjK1wiLCBmaW5pc2hlZDogXCIrdSksaD0wLGw9W10sYS5mb3JFYWNoKChmdW5jdGlvbihlKXtpZihlLm1lc3NhZ2VEaXJlY3Rpb249PT1tZS5TRU5EJiYoaD1NYXRoLm1heChlLnNlbnRUaW1lLGgpLHAuX3NlbmRNZXNzYWdlU3RvcmUuZ2V0U2VuZE1lc3NhZ2VNYXAoKVtlLm1lc3NhZ2VVSWRdKSlyZXR1cm4gdm9pZCBwLl9zZW5kTWVzc2FnZVN0b3JlLnJlbW92ZUJ5VUlEKGUubWVzc2FnZVVJZCk7aWYoZS5tZXNzYWdlVHlwZSE9PVNlLkVYUEFOU0lPTl9OT1RJRlkpe2lmKGUubWVzc2FnZVR5cGU9PT1TZS5TWU5DX1JFQURfU1RBVFVTKXtpZihlLnNlbmRlclVzZXJJZCE9PXAuY3VycmVudFVzZXJJZClyZXR1cm47cC5fY29udmVyc2F0aW9uTWFuYWdlci5jbGVhclVucmVhZENvdW50KGUuY29udmVyc2F0aW9uVHlwZSxlLnRhcmdldElkLGUuY2hhbm5lbElkKX12YXIgdD1wLl9oYW5kbGVNc2dQcm9wZXJ0aWVzKGUpO3AuX2NvbnZlcnNhdGlvbk1hbmFnZXIuc2V0Q29udmVyc2F0aW9uQ2FjaGVCeU1lc3NhZ2UodCwhMCksbC5wdXNoKHQpfWVsc2UgcC5fcmVjZWl2ZU1lc3NhZ2VFeHBhbnNpb24oZSl9KSksdGhpcy5fd2F0Y2hlci5iYXRjaE1lc3NhZ2UobCksdGhpcy5fbGV0dGVyYm94LnNldEluYm94VGltZShjLHRoaXMuY3VycmVudFVzZXJJZCksdGhpcy5fbGV0dGVyYm94LnNldE91dGJveFRpbWUoaCx0aGlzLmN1cnJlbnRVc2VySWQpLHRoaXMuX3NlbmRNZXNzYWdlU3RvcmUucmVtb3ZlQnlUaW1lc3RhbXAoaCksdGhpcy5fcHVsbGluZ01zZz0hMSxkPXRoaXMuX3B1bGxRdWV1ZS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiBlPmN9KSksdGhpcy5fcHVsbFF1ZXVlLmxlbmd0aD0wLChmPXRoaXMuX3B1bGxRdWV1ZSkucHVzaC5hcHBseShmLGQpLHUmJiF0aGlzLl9wdWxsT2ZmbGluZUZpbmlzaGVkJiYodGhpcy5fcHVsbE9mZmxpbmVGaW5pc2hlZD0hMCx0aGlzLl93YXRjaGVyLnB1bGxGaW5pc2hlZCgpKSwoIXV8fGQubGVuZ3RoPjApJiZ0aGlzLl9zeW5jTXNnKCksWzJdKX19KSl9KSl9LHQucHJvdG90eXBlLl9yZWNlaXZlTXNnPWZ1bmN0aW9uKGUpe2lmKHRoaXMuX2NoYW5uZWwmJiF0aGlzLl9wdWxsaW5nTXNnKWlmKHRoaXMuX3B1bGxRdWV1ZS5sZW5ndGg+MCl0aGlzLl9zeW5jTXNnKCk7ZWxzZXt2YXIgdD10aGlzLl9jaGFubmVsLmNvZGVjLmRlY29kZUJ5UEJOYW1lKGUuZGF0YSxMdCx7Y3VycmVudFVzZXJJZDp0aGlzLmN1cnJlbnRVc2VySWQsY29ubmVjdGVkVGltZTp0aGlzLl9jaGFubmVsLmNvbm5lY3RlZFRpbWV9KTsodD10aGlzLl9oYW5kbGVNc2dQcm9wZXJ0aWVzKHQpKS5zZW5kZXJVc2VySWQ9PT10aGlzLmN1cnJlbnRVc2VySWQmJnRoaXMuX3NlbmRNZXNzYWdlU3RvcmUuc2V0TWVzc2FnZSh0Lm1lc3NhZ2VVSWQsdC5zZW50VGltZSksdC5pc1N0YXR1c01lc3NhZ2V8fHQuc2VuZGVyVXNlcklkPT09dGhpcy5jdXJyZW50VXNlcklkfHx0aGlzLl9sZXR0ZXJib3guc2V0SW5ib3hUaW1lKHQuc2VudFRpbWUsdGhpcy5jdXJyZW50VXNlcklkKSx0Lm1lc3NhZ2VUeXBlIT09U2UuRVhQQU5TSU9OX05PVElGWT90Lm1lc3NhZ2VUeXBlPT09U2UuU1lOQ19SRUFEX1NUQVRVUyYmdC5zZW5kZXJVc2VySWQhPT10aGlzLmN1cnJlbnRVc2VySWR8fCh0aGlzLl9jb252ZXJzYXRpb25NYW5hZ2VyLnNldENvbnZlcnNhdGlvbkNhY2hlQnlNZXNzYWdlKHQsITApLHRoaXMuX3dhdGNoZXIuYmF0Y2hNZXNzYWdlKFt0XSkpOnRoaXMuX3JlY2VpdmVNZXNzYWdlRXhwYW5zaW9uKHQpfX0sdC5wcm90b3R5cGUuX2hhbmRsZU1zZ1Byb3BlcnRpZXM9ZnVuY3Rpb24oZSx0KXt2b2lkIDA9PT10JiYodD0hMSk7dmFyIG4saT1lLm1lc3NhZ2VUeXBlLHI9ZS5pc0NvdW50ZWQscz1lLmlzUGVyc2l0ZWQsbz1lLmlzU3RhdHVzTWVzc2FnZSxhPWkgaW4gdix1PWkgaW4gdGhpcy5fY3VzdG9tTWVzc2FnZVR5cGU7aWYobj1hP08oTyh7fSx2W2ldKSx7aXNTdGF0dXNNZXNzYWdlOlQuaW5jbHVkZXMoaSl9KTp1P3RoaXMuX2N1c3RvbU1lc3NhZ2VUeXBlW2ldOntpc0NvdW50ZWQ6IXNlKHIpJiZyLGlzUGVyc2l0ZWQ6IXNlKHMpJiZzLGlzU3RhdHVzTWVzc2FnZTohMX0sT2JqZWN0LmFzc2lnbihlLG4pLHQmJiFyZShvKSYmKGUuaXNTdGF0dXNNZXNzYWdlPW8pLCF0KXt2YXIgYz1lLmNvbnRlbnQudXNlcjtpZihjKXt2YXIgaD1jLnBvcnRyYWl0LGw9Yy5wb3J0cmFpdFVyaSxkPWh8fGw7ZCYmKGMucG9ydHJhaXQ9Yy5wb3J0cmFpdFVyaT1kKX19cmV0dXJuIGV9LHQucHJvdG90eXBlLmdldEhpc3RvcnlNZXNzYWdlPWZ1bmN0aW9uKGUsdCxuLGkscixzKXtyZXR1cm4gdm9pZCAwPT09cyYmKHM9XCJcIiksTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG8sYSx1LGMsaCxsLGQsZixwO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGcpe3N3aXRjaChnLmxhYmVsKXtjYXNlIDA6cmV0dXJuIGE9KG89dGhpcykuY3VycmVudFVzZXJJZCx1PW8uX2NoYW5uZWwsYz1zcltlXXx8JGksaD0xPT09aSYmMD09PW4sdT8obD11LmNvZGVjLmVuY29kZUdldEhpc3RvcnlNc2codCx7dGltZXN0YW1wOm4sY291bnQ6aD8yOmksb3JkZXI6cixjaGFubmVsSWQ6c30pLFs0LHUuc2VuZChuZXcgT3IoYyxsLGEpLEZ0LHtjdXJyZW50VXNlcklkOmEsY29ubmVjdGVkVGltZTp1LmNvbm5lY3RlZFRpbWUsY29udmVyc2F0aW9uOnt0YXJnZXRJZDp0fX0pXSk6WzMsMl07Y2FzZSAxOnJldHVybiBkPWcuc2VudCgpLChmPWQuY29kZSkhPT1FZS5TVUNDRVNTP1syLHtjb2RlOmZ9XToocD1kLmRhdGEsaCYmMj09PXAubGlzdC5sZW5ndGgmJihwLmhhc01vcmU9ITAsMD09PXI/cC5saXN0LnNoaWZ0KCk6cC5saXN0LnBvcCgpKSxbMix7Y29kZTpmLGRhdGE6e2xpc3Q6cC5saXN0LGhhc01vcmU6cC5oYXNNb3JlfX1dKTtjYXNlIDI6cmV0dXJuWzIse2NvZGU6RWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRH1dfX0pKX0pKX0sdC5wcm90b3R5cGUucmVwb3J0U0RLSW5mbz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLmN1cnJlbnRVc2VySWQsbj10aGlzLl9jaGFubmVsO2lmKG4pe2dlLmluZm8oXCJyZXBvcnRTREtJbmZvIC0+XCIsZSk7dmFyIGk9bi5jb2RlYy5lbmNvZGVSZXBvcnRTREtJbmZvKEpTT04uc3RyaW5naWZ5KGUpKSxyPW5ldyBPcihicltici5yZXBvcnRzZGtdLGksdCk7bi5zZW5kKHIpLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciB0PWUuY29kZTt0IT09RWUuU1VDQ0VTUyYmZ2Uud2FybihcInJlcG9ydFNES0luZm8gZmFpbGVkIC0+IGNvZGU6IFwiK3QpfSkpfX0sdC5wcm90b3R5cGUuZGVsZXRlUmVtb3RlTWVzc2FnZT1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHIscyxvLGEsdSxjLGg7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24obCl7c3dpdGNoKGwubGFiZWwpe2Nhc2UgMDpyZXR1cm4gcz0ocj10aGlzKS5jdXJyZW50VXNlcklkLChvPXIuX2NoYW5uZWwpPyhhPW8uY29kZWMuZW5jb2RlRGVsZXRlTWVzc2FnZXMoZSx0LG4saSksdT1uZXcgT3IoRmksYSxzKSxbNCxvLnNlbmQodSldKTpbMywyXTtjYXNlIDE6cmV0dXJuIGM9bC5zZW50KCksaD1jLmNvZGUsRWUuU1VDQ0VTUyxbMixoXTtjYXNlIDI6cmV0dXJuWzIsRWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRF19fSkpfSkpfSx0LnByb3RvdHlwZS5kZWxldGVSZW1vdGVNZXNzYWdlQnlUaW1lc3RhbXA9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciByLHMsbyxhLHUsYyxoLGw7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oZCl7c3dpdGNoKGQubGFiZWwpe2Nhc2UgMDpyZXR1cm4gcz0ocj10aGlzKS5jdXJyZW50VXNlcklkLChvPXIuX2NoYW5uZWwpPyhhPW8uY29kZWMuZW5jb2RlQ2xlYXJNZXNzYWdlcyh0LG4saSxlKSx1PW9yW2VdLGM9bmV3IE9yKHUsYSxzKSxbNCxvLnNlbmQoYyldKTpbMywyXTtjYXNlIDE6cmV0dXJuIGg9ZC5zZW50KCksbD1oLmNvZGUsRWUuU1VDQ0VTUyxbMixsXTtjYXNlIDI6cmV0dXJuWzIsRWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRF19fSkpfSkpfSx0LnByb3RvdHlwZS5nZXRDb252ZXJzYXRpb25MaXN0PWZ1bmN0aW9uKGUsdCxuLGkscil7cmV0dXJuIHZvaWQgMD09PWUmJihlPTMwMCksTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHIscyxvLGEsdSxjLGgsbCxkPXRoaXM7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oZil7c3dpdGNoKGYubGFiZWwpe2Nhc2UgMDpyZXR1cm4gcz0ocj10aGlzKS5jdXJyZW50VXNlcklkLG89ci5fY2hhbm5lbCx0PXR8fGouUFJJVkFURSxvPyhhPW8uY29kZWMuZW5jb2RlT2xkQ29udmVyc2F0aW9uTGlzdCh7Y291bnQ6ZSx0eXBlOnQsc3RhcnRUaW1lOm4sb3JkZXI6aX0pLHU9bmV3IE9yKEppLGEscyksWzQsby5zZW5kKHUsS3Qse2N1cnJlbnRVc2VySWQ6cyxjb25uZWN0ZWRUaW1lOm8uY29ubmVjdGVkVGltZSxhZnRlckRlY29kZTpmdW5jdGlvbihlKXt2YXIgdD1lLmNvbnZlcnNhdGlvblR5cGUsbj1lLnRhcmdldElkLGk9ZS5jaGFubmVsSWQscj1kLl9jb252ZXJzYXRpb25NYW5hZ2VyLmdldCh0LG4saSk7cmV0dXJuIE9iamVjdC5hc3NpZ24oZSxyKSxlfX0pXSk6WzMsMl07Y2FzZSAxOnJldHVybiBjPWYuc2VudCgpLGg9Yy5jb2RlLGw9Yy5kYXRhLGghPT1FZS5TVUNDRVNTP1syLHtjb2RlOmh9XTpbMix7Y29kZTpoLGRhdGE6bnVsbD09bD92b2lkIDA6bC5saXN0fV07Y2FzZSAyOnJldHVyblsyLHtjb2RlOkVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSUR9XX19KSl9KSl9LHQucHJvdG90eXBlLnJlbW92ZUNvbnZlcnNhdGlvbj1mdW5jdGlvbihlLHQsbil7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBpLHIscyxvLGE7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24odSl7c3dpdGNoKHUubGFiZWwpe2Nhc2UgMDpyZXR1cm4oaT10aGlzLl9jaGFubmVsKT8ocj1pLmNvZGVjLmVuY29kZVJlbW92ZU9sZENvbnZlcnNhdGlvbkxpc3Qoe2NvbnZlcnNhdGlvblR5cGU6ZSxjaGFubmVsSWQ6bix0YXJnZXRJZDp0fSkscz1uZXcgT3Ioemkscix0KSxbNCxpLnNlbmQocyldKTpbMywyXTtjYXNlIDE6cmV0dXJuIG89dS5zZW50KCksZ2UuaW5mbyhcIlJlbW92ZUNvbnZlcnNhdGlvbiA9PlwiLG8pLGE9by5jb2RlLEVlLlNVQ0NFU1MsWzIsYV07Y2FzZSAyOnJldHVyblsyLEVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSURdfX0pKX0pKX0sdC5wcm90b3R5cGUuZ2V0Q29udmVyc2F0aW9uPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIGkscixzLG8sYSx1O3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGMpe3N3aXRjaChjLmxhYmVsKXtjYXNlIDA6cmV0dXJuIGUhPT1qLlVMVFJBX0dST1VQP1szLDFdOihpPXRoaXMuX3VsdHJhR3JvdXBNYXBbbitcIl9cIit0XSk/WzMsM106WzIse2NvZGU6RWUuQ09OVkVSX0dFVF9FUlJPUn1dO2Nhc2UgMTpyZXR1cm4ocj10aGlzLl9jb252ZXJzYXRpb25NYW5hZ2VyLmdldChlLHQsbikpP1s0LHRoaXMuZ2V0SGlzdG9yeU1lc3NhZ2UoZSx0LDAsMSwwKV06WzIse2NvZGU6RWUuQ09OVkVSX0dFVF9FUlJPUn1dO2Nhc2UgMjppZihzPWMuc2VudCgpLG89cy5jb2RlLGE9cy5kYXRhLG8hPT1FZS5TVUNDRVNTKXJldHVyblsyLHtjb2RlOkVlLkNPTlZFUl9HRVRfRVJST1J9XTt1PShudWxsPT1hP3ZvaWQgMDphLmxpc3RbMF0pfHxudWxsLGk9e2NvbnZlcnNhdGlvblR5cGU6ZSx0YXJnZXRJZDp0LGNoYW5uZWxJZDpuLHVucmVhZE1lc3NhZ2VDb3VudDpyLnVucmVhZE1lc3NhZ2VDb3VudHx8MCxsYXRlc3RNZXNzYWdlOnUsbm90aWZpY2F0aW9uU3RhdHVzOnIubm90aWZpY2F0aW9uU3RhdHVzfHxPZS5DTE9TRSxpc1RvcDpyLmlzVG9wfHwhMSxsYXN0VW5yZWFkVGltZTpyLmxhc3RVbnJlYWRUaW1lfHwwLHVucmVhZE1lbnRpb25lZENvdW50OnIudW5yZWFkTWVudGlvbmVkQ291bnR8fDB9LGMubGFiZWw9MztjYXNlIDM6cmV0dXJuWzIse2NvZGU6RWUuU1VDQ0VTUyxkYXRhOml9XX19KSl9KSl9LHQucHJvdG90eXBlLmdldEFsbENvbnZlcnNhdGlvblVucmVhZENvdW50PWZ1bmN0aW9uKGUsdCxuKXt2YXIgaT10aGlzLl9jb252ZXJzYXRpb25NYW5hZ2VyLmdldEFsbFVucmVhZENvdW50KGUsdCxuKTtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtjb2RlOkVlLlNVQ0NFU1MsZGF0YTppfSl9LHQucHJvdG90eXBlLmdldENvbnZlcnNhdGlvblVucmVhZENvdW50PWZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyO3JldHVybiByPWU9PT1qLlVMVFJBX0dST1VQPyhudWxsPT09KGk9dGhpcy5fdWx0cmFHcm91cE1hcFtuK1wiX1wiK3RdKXx8dm9pZCAwPT09aT92b2lkIDA6aS51bnJlYWRNZXNzYWdlQ291bnQpfHwwOnRoaXMuX2NvbnZlcnNhdGlvbk1hbmFnZXIuZ2V0VW5yZWFkQ291bnQoZSx0LG4pLFByb21pc2UucmVzb2x2ZSh7Y29kZTpFZS5TVUNDRVNTLGRhdGE6cn0pfSx0LnByb3RvdHlwZS5jbGVhckNvbnZlcnNhdGlvblVucmVhZENvdW50PWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdGhpcy5fY29udmVyc2F0aW9uTWFuYWdlci5jbGVhclVucmVhZENvdW50KGUsdCxuLCExKSxQcm9taXNlLnJlc29sdmUoRWUuU1VDQ0VTUyl9LHQucHJvdG90eXBlLmNsZWFyQWxsVW5yZWFkQ291bnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29udmVyc2F0aW9uTWFuYWdlci5jbGVhckFsbFVucmVhZENvdW50KCksUHJvbWlzZS5yZXNvbHZlKEVlLlNVQ0NFU1MpfSx0LnByb3RvdHlwZS5nZXRGaXJzdFVucmVhZE1lc3NhZ2U9ZnVuY3Rpb24oZSx0KXt0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKX0sdC5wcm90b3R5cGUuc2F2ZUNvbnZlcnNhdGlvbk1lc3NhZ2VEcmFmdD1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gdGhpcy5fY29udmVyc2F0aW9uTWFuYWdlci5zZXREcmFmdChlLHQsbixpKSxQcm9taXNlLnJlc29sdmUoRWUuU1VDQ0VTUyl9LHQucHJvdG90eXBlLmdldENvbnZlcnNhdGlvbk1lc3NhZ2VEcmFmdD1mdW5jdGlvbihlLHQsbil7dmFyIGk9dGhpcy5fY29udmVyc2F0aW9uTWFuYWdlci5nZXREcmFmdChlLHQsbik7cmV0dXJuIFByb21pc2UucmVzb2x2ZSh7Y29kZTpFZS5TVUNDRVNTLGRhdGE6aX0pfSx0LnByb3RvdHlwZS5jbGVhckNvbnZlcnNhdGlvbk1lc3NhZ2VEcmFmdD1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHRoaXMuX2NvbnZlcnNhdGlvbk1hbmFnZXIuY2xlYXJEcmFmdChlLHQsbiksUHJvbWlzZS5yZXNvbHZlKEVlLlNVQ0NFU1MpfSx0LnByb3RvdHlwZS5wdWxsQ29udmVyc2F0aW9uU3RhdHVzPWZ1bmN0aW9uKGUpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgdCxuLGkscixzLG8sYSx1LGMsaD10aGlzO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGwpe3N3aXRjaChsLmxhYmVsKXtjYXNlIDA6cmV0dXJuIG49KHQ9dGhpcykuX2NoYW5uZWwsaT10LmN1cnJlbnRVc2VySWQsbj8ocj1uLmNvZGVjLmVuY29kZUdldENvbnZlcnNhdGlvblN0YXR1cyhlKSxzPW5ldyBPcihicltici5wdWxsU2VBdHRzXSxyLGkpLFs0LG4uc2VuZChzLEJuKV0pOlszLDJdO2Nhc2UgMTpyZXR1cm4gbz1sLnNlbnQoKSxhPW8uY29kZSx1PW8uZGF0YSxhIT09RWUuU1VDQ0VTUz9bMix7Y29kZTphfV06KGM9W10sQXJyYXkuaXNBcnJheSh1KSYmdS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgdD1lLmNvbnZlcnNhdGlvblR5cGUsbj1lLnRhcmdldElkLGk9ZS5ub3RpZmljYXRpb25TdGF0dXMscj1lLmNoYW5uZWxJZCxzPWUuaXNUb3Asbz1oLl91bHRyYUdyb3VwTWFwW3IrXCJfXCIrbl07dD09PWouVUxUUkFfR1JPVVA/byYmKHZvaWQgMCE9PWkmJihvLm5vdGlmaWNhdGlvblN0YXR1cz1pKSxcImJvb2xlYW5cIj09dHlwZW9mIHMmJihvLmlzVG9wPXMpKTpjLnB1c2goZSl9KSksWzIse2NvZGU6YSxkYXRhOmN9XSk7Y2FzZSAyOnJldHVyblsyLHtjb2RlOkVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSUR9XX19KSl9KSl9LHQucHJvdG90eXBlLmJhdGNoU2V0Q29udmVyc2F0aW9uU3RhdHVzPWZ1bmN0aW9uKGUpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgdCxuLGkscixzLG8sYSx1LGMsaCxsLGQ9dGhpcztyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihmKXtzd2l0Y2goZi5sYWJlbCl7Y2FzZSAwOnJldHVybiBuPSh0PXRoaXMpLmN1cnJlbnRVc2VySWQsKGk9dC5fY2hhbm5lbCk/KHI9aS5jb2RlYy5lbmNvZGVTZXRDb252ZXJzYXRpb25TdGF0dXMoZSkscz1uZXcgT3IoWmkscixuKSxbNCxpLnNlbmQocyxLbildKTpbMywyXTtjYXNlIDE6cmV0dXJuIG89Zi5zZW50KCksYT1vLmNvZGUsdT1vLmRhdGEsYT09PUVlLlNVQ0NFU1M/KGM9dSxoPVtdLGUuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHQ9ZS5jb252ZXJzYXRpb25UeXBlLG49ZS50YXJnZXRJZCxpPWUubm90aWZpY2F0aW9uU3RhdHVzLHI9ZS5jaGFubmVsSWQscz1lLmlzVG9wO2lmKHQ9PT1qLlVMVFJBX0dST1VQKXt2YXIgbz1kLl91bHRyYUdyb3VwTWFwW3IrXCJfXCIrbl07byYmKHZvaWQgMCE9PWkmJihvLm5vdGlmaWNhdGlvblN0YXR1cz1pKSx2b2lkIDAhPT1zJiYoby5pc1RvcD1zKSxoLnB1c2gobykpfWVsc2UgZC5fY29udmVyc2F0aW9uTWFuYWdlci5hZGRTdGF0dXMoTyhPKHt9LGUpLHt1cGRhdGVkVGltZTpjLnZlcnNpb259KSwhMCl9KSksaC5sZW5ndGg+MCYmKGw9SXQoaCksbD1ncyhsKSx0aGlzLl93YXRjaGVyLmNvbnZlcnNhdGlvbihsKSksWzIsYV0pOlsyLGFdO2Nhc2UgMjpyZXR1cm5bMixFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEXX19KSl9KSl9LHQucHJvdG90eXBlLl9qb2luQ2hybT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBpLHIscyxvLGEsdSxjO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGgpe3N3aXRjaChoLmxhYmVsKXtjYXNlIDA6cmV0dXJuKGk9dGhpcy5fY2hhbm5lbCk/KHI9aS5jb2RlYy5lbmNvZGVKb2luT3JRdWl0Q2hhdFJvb20oKSxzPW5ldyBPcihuP0tpOnFpLHIsZSksWzQsaS5zZW5kKHMsWHQpXSk6WzIsRWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRF07Y2FzZSAxOnJldHVybiBvPWguc2VudCgpLGE9by5jb2RlLHU9by5kYXRhLGE9PT1FZS5TVUNDRVNTJiYoYz11LmpvaW5UaW1lLHRoaXMuX2Nocm1zUXVldWVbZV18fCh0aGlzLl9jaHJtc1F1ZXVlW2VdPXtwdWxsaW5nOiExLHF1ZXVlOltdLHRpbWVzdGFtcDowfSksdGhpcy5fcHVsbENocm1Nc2coZSx0LGMpLHRoaXMuX25hdmlJbmZvLmt2U3RvcmFnZSYmdGhpcy5fY2hybUVudHJ5SGFuZGxlci5wdWxsRW50cnkoZSwwKSx0aGlzLl9qb2luZWRDaHJtTWFuYWdlci5zZXQoZSx0KSksWzIsYV19fSkpfSkpfSx0LnByb3RvdHlwZS5fcmVqb2luQ2hybT1mdW5jdGlvbigpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgZSx0LG4saSxyLHM7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24obyl7c3dpdGNoKG8ubGFiZWwpe2Nhc2UgMDpmb3IobiBpbiBlPXRoaXMuX2pvaW5lZENocm1NYW5hZ2VyLmdldCgpLHQ9W10sZSl0LnB1c2gobik7aT0wLG8ubGFiZWw9MTtjYXNlIDE6cmV0dXJuIGk8dC5sZW5ndGg/KHI9dFtpXSxbNCx0aGlzLl9qb2luQ2hybShyLGVbcl18fDEwLCEwKV0pOlszLDRdO2Nhc2UgMjoocz1vLnNlbnQoKSk9PT1FZS5TVUNDRVNTP3RoaXMuX3dhdGNoZXIuY2hhdHJvb20oe3Jlam9pbmVkUm9vbTp7Y2hhdHJvb21JZDpyLGNvdW50OmVbcl19fSk6dGhpcy5fd2F0Y2hlci5jaGF0cm9vbSh7cmVqb2luZWRSb29tOntjaGF0cm9vbUlkOnIsZXJyb3JDb2RlOnN9fSksby5sYWJlbD0zO2Nhc2UgMzpyZXR1cm4gaSsrLFszLDFdO2Nhc2UgNDpyZXR1cm5bMl19fSkpfSkpfSx0LnByb3RvdHlwZS5fcHVsbENocm1Nc2c9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB2b2lkIDA9PT10JiYodD0xMCksdm9pZCAwPT09biYmKG49MCksTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIGkscixzLG8sYSx1LGMsaCxsLGQsZixwO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGcpe3N3aXRjaChnLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuX2NoYW5uZWw/KGk9dGhpcy5fY2hybXNRdWV1ZVtlXSxyPWkucHVsbGluZyxzPWkudGltZXN0YW1wLHI/WzJdOihpLnB1bGxpbmc9ITAsbz10aGlzLl9jaGFubmVsLmNvZGVjLmVuY29kZUNocm1TeW5jTXNnKHMsdCksYT1uZXcgT3IoYnJbYnIuY2hybVB1bGxdLG8sZSksWzQsdGhpcy5fY2hhbm5lbC5zZW5kKGEsUHQse2Nvbm5lY3RlZFRpbWU6dGhpcy5fY2hhbm5lbC5jb25uZWN0ZWRUaW1lLGN1cnJlbnRVc2VySWQ6dGhpcy5jdXJyZW50VXNlcklkfSldKSk6WzJdO2Nhc2UgMTpyZXR1cm4gdT1nLnNlbnQoKSxjPXUuY29kZSxoPXUuZGF0YSxpLnB1bGxpbmc9ITEsYz09PUVlLlNVQ0NFU1MmJmg/KGw9aC5saXN0LGQ9aC5zeW5jVGltZSxmPWguZmluaXNoZWQsaS50aW1lc3RhbXA9bj9NYXRoLm1heChkLG4pOmQsaS5xdWV1ZT1pLnF1ZXVlLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIGU+ZH0pKSxwPVtdLGwuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZS5zZW50VGltZTxzfHxwLnB1c2goZSl9KSksdGhpcy5fd2F0Y2hlci5iYXRjaE1lc3NhZ2UocCksKCFmfHxpLnF1ZXVlLmxlbmd0aD4wKSYmdGhpcy5fcHVsbENocm1Nc2coZSksWzJdKTooZ2Uud2FybihcInB1bGwgY2hhdHJvb20gbXNnIGZhaWxlZCwgY29kZTpcIixjLFwiLCBkYXRhOlwiLGgpLFsyXSl9fSkpfSkpfSx0LnByb3RvdHlwZS5qb2luQ2hhdHJvb209ZnVuY3Rpb24oZSx0KXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24obil7cmV0dXJuWzIsdGhpcy5fam9pbkNocm0oZSx0LCExKV19KSl9KSl9LHQucHJvdG90eXBlLmpvaW5FeGlzdENoYXRyb29tPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKG4pe3JldHVyblsyLHRoaXMuX2pvaW5DaHJtKGUsdCwhMCldfSkpfSkpfSx0LnByb3RvdHlwZS5xdWl0Q2hhdHJvb209ZnVuY3Rpb24oZSl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciB0LG4saSxyLHM7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24obyl7c3dpdGNoKG8ubGFiZWwpe2Nhc2UgMDpyZXR1cm4odD10aGlzLl9jaGFubmVsKT8obj10LmNvZGVjLmVuY29kZUpvaW5PclF1aXRDaGF0Um9vbSgpLGk9bmV3IE9yKEhpLG4sZSksWzQsdC5zZW5kKGkpXSk6WzIsRWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRF07Y2FzZSAxOnJldHVybiByPW8uc2VudCgpLChzPXIuY29kZSk9PT1FZS5TVUNDRVNTJiYoZGVsZXRlIHRoaXMuX2Nocm1zUXVldWVbZV0sdGhpcy5fY2hybUVudHJ5SGFuZGxlci5yZXNldChlKSx0aGlzLl9qb2luZWRDaHJtTWFuYWdlci5yZW1vdmUoZSkpLFsyLHNdfX0pKX0pKX0sdC5wcm90b3R5cGUuZ2V0Q2hhdHJvb21JbmZvPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIGkscixzLG8sYSx1O3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGMpe3N3aXRjaChjLmxhYmVsKXtjYXNlIDA6cmV0dXJuKGk9dGhpcy5fY2hhbm5lbCk/KHI9aS5jb2RlYy5lbmNvZGVHZXRDaGF0Um9vbUluZm8odCxuKSxzPW5ldyBPcihicltici5xdWVyeUNocm1JXSxyLGUpLFs0LGkuc2VuZChzLGVuKV0pOlsyLHtjb2RlOkVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSUR9XTtjYXNlIDE6cmV0dXJuIG89Yy5zZW50KCksYT1vLmNvZGUsdT1vLmRhdGEsYSE9PUVlLlNVQ0NFU1M/WzIse2NvZGU6YX1dOlsyLHtjb2RlOmEsZGF0YTp1fV19fSkpfSkpfSx0LnByb3RvdHlwZS5nZXRDaGF0cm9vbUhpc3RvcnlNZXNzYWdlcz1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHIscyxvLGEsdSxjO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGgpe3N3aXRjaChoLmxhYmVsKXtjYXNlIDA6cmV0dXJuKHI9dGhpcy5fY2hhbm5lbCk/KHM9ci5jb2RlYy5lbmNvZGVHZXRIaXN0b3J5TXNnKGUse3RpbWVzdGFtcDp0LGNvdW50Om4sb3JkZXI6aX0pLG89bmV3IE9yKHRyLHMsZSksWzQsci5zZW5kKG8sRnQse2NvbnZlcnNhdGlvbjp7dGFyZ2V0SWQ6ZX19KV0pOlsyLHtjb2RlOkVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSUR9XTtjYXNlIDE6cmV0dXJuIGE9aC5zZW50KCksdT1hLmNvZGUsYz1hLmRhdGEsdSE9PUVlLlNVQ0NFU1M/WzIse2NvZGU6dX1dOlsyLHtjb2RlOnUsZGF0YTp7bGlzdDpjLmxpc3QsaGFzTW9yZTpjLmhhc01vcmV9fV19fSkpfSkpfSx0LnByb3RvdHlwZS5fbW9kaWZ5Q2hhdHJvb21LVj1mdW5jdGlvbihlLHQpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbixpLHIscyxvLGEsdSxjLGg7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24obCl7c3dpdGNoKGwubGFiZWwpe2Nhc2UgMDpyZXR1cm4gaT0obj10aGlzKS5fY2hhbm5lbCxyPW4uY3VycmVudFVzZXJJZCxpPyhzPXRoaXMuX2Nocm1FbnRyeUhhbmRsZXIuZ2V0VmVyc2lvbihlLHQua2V5KSx0LnZlcnNpb249bnVsbD09cz90aGlzLmdldFNlcnZlclRpbWUoKTpzLG89aS5jb2RlYy5lbmNvZGVNb2RpZnlDaGF0Um9vbUtWKGUsdCxyKSxhPXQudHlwZT09PUxlLlVQREFURT9ZaTpqaSx1PW5ldyBPcihhLG8sZSksWzQsaS5zZW5kKHUsWHQpXSk6WzIsRWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRF07Y2FzZSAxOnJldHVybiBjPWwuc2VudCgpLChoPWMuY29kZSk9PT1FZS5TVUNDRVNTPyh0aGlzLl9jaHJtRW50cnlIYW5kbGVyLnNldExvY2FsKGUse2t2RW50cmllczpbdF0sc3luY1RpbWU6KG5ldyBEYXRlKS5nZXRUaW1lKCl9LHIpLFsyLGhdKTpbMixoXX19KSl9KSl9LHQucHJvdG90eXBlLl9tb2RpZnlDaGF0cm9vbUtWUz1mdW5jdGlvbihlLHQpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbixpLHIscyxvLGEsdSxjLGgsbCxkLGYscD10aGlzO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGcpe3N3aXRjaChnLmxhYmVsKXtjYXNlIDA6cmV0dXJuIGk9KG49dGhpcykuX2NoYW5uZWwscj1uLmN1cnJlbnRVc2VySWQsaT8odC5lbnRyaWVzLmZvckVhY2goKGZ1bmN0aW9uKHQpe3ZhciBuPXAuX2Nocm1FbnRyeUhhbmRsZXIuZ2V0VmVyc2lvbihlLHQua2V5KTt0LnZlcnNpb249bnVsbD09bj9wLmdldFNlcnZlclRpbWUoKTpufSkpLHM9aS5jb2RlYy5lbmNvZGVNb2RpZnlDaGF0Um9vbUtWUyhlLHQsciksbz10LnR5cGU9PT1MZS5VUERBVEU/UWk6V2ksYT1uZXcgT3IobyxzLGUpLFs0LGkuc2VuZChhLHduKV0pOlsyLHtjb2RlOkVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSUR9XTtjYXNlIDE6cmV0dXJuIHU9Zy5zZW50KCksYz11LmNvZGUsLTEhPT1bRWUuU1VDQ0VTUyxFZS5DSEFUUk9PTV9LVl9TVE9SRV9OT1RfQUxMX1NVQ0NFU1NdLmluZGV4T2YoYykmJihsPVtdLGRlbGV0ZShkPU9iamVjdC5hc3NpZ24oe30sdCkpLmVudHJpZXMsdC5lbnRyaWVzLmZvckVhY2goKGZ1bmN0aW9uKGUpe2wucHVzaChPYmplY3QuYXNzaWduKHt9LGUsZCkpfSkpLGM9PT1FZS5DSEFUUk9PTV9LVl9TVE9SRV9OT1RfQUxMX1NVQ0NFU1MmJihmPXUuZGF0YSxnZS53YXJuKFwi6K6+572u5aSx6LSl55qE5bGe5oCn77yaXCIsZi5lcnJvcktleXMpLGg9Zi5lcnJvcktleXMsZiYmQXJyYXkuaXNBcnJheShmLmVycm9yS2V5cykmJmYuZXJyb3JLZXlzLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0PWwuZmluZEluZGV4KChmdW5jdGlvbih0KXtyZXR1cm4gZS5rZXk9PT10LmtleX0pKTstMSE9PXQmJmwuc3BsaWNlKHQsMSl9KSkpLGdlLndhcm4oXCLorr7nva7miJDlip/nmoTlsZ7mgKfvvJpcIixsKSx0aGlzLl9jaHJtRW50cnlIYW5kbGVyLnNldExvY2FsKGUse2t2RW50cmllczpsLHN5bmNUaW1lOihuZXcgRGF0ZSkuZ2V0VGltZSgpfSxyKSksWzIse2NvZGU6YyxkYXRhOmh9XX19KSl9KSl9LHQucHJvdG90eXBlLnNldENoYXRyb29tRW50cnk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24obil7cmV0dXJuIHQudHlwZT1MZS5VUERBVEUsdC51c2VySWQ9dC51c2VySWR8fHRoaXMuY3VycmVudFVzZXJJZCxbMix0aGlzLl9tb2RpZnlDaGF0cm9vbUtWKGUsdCldfSkpfSkpfSx0LnByb3RvdHlwZS5zZXRDaGF0cm9vbUVudHJpZXM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24obil7cmV0dXJuIHQudHlwZT1MZS5VUERBVEUsdC51c2VySWQ9dC51c2VySWR8fHRoaXMuY3VycmVudFVzZXJJZCxbMix0aGlzLl9tb2RpZnlDaGF0cm9vbUtWUyhlLHQpXX0pKX0pKX0sdC5wcm90b3R5cGUuZm9yY2VTZXRDaGF0cm9vbUVudHJ5PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKG4pe3JldHVybiB0LnR5cGU9TGUuVVBEQVRFLHQuaXNPdmVyd3JpdGU9ITAsdC51c2VySWQ9dC51c2VySWR8fHRoaXMuY3VycmVudFVzZXJJZCxbMix0aGlzLl9tb2RpZnlDaGF0cm9vbUtWKGUsdCldfSkpfSkpfSx0LnByb3RvdHlwZS5yZW1vdmVDaGF0cm9vbUVudHJ5PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKG4pe3JldHVybiB0LnR5cGU9TGUuREVMRVRFLHQudXNlcklkPXQudXNlcklkfHx0aGlzLmN1cnJlbnRVc2VySWQsWzIsdGhpcy5fbW9kaWZ5Q2hhdHJvb21LVihlLHQpXX0pKX0pKX0sdC5wcm90b3R5cGUucmVtb3ZlQ2hhdHJvb21FbnRyaWVzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKG4pe3JldHVybiB0LnR5cGU9TGUuREVMRVRFLHQudXNlcklkPXQudXNlcklkfHx0aGlzLmN1cnJlbnRVc2VySWQsWzIsdGhpcy5fbW9kaWZ5Q2hhdHJvb21LVlMoZSx0KV19KSl9KSl9LHQucHJvdG90eXBlLmZvcmNlUmVtb3ZlQ2hhdHJvb21FbnRyeT1mdW5jdGlvbihlLHQpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihuKXtyZXR1cm4gdC50eXBlPUxlLkRFTEVURSx0LmlzT3ZlcndyaXRlPSEwLHQudXNlcklkPXQudXNlcklkfHx0aGlzLmN1cnJlbnRVc2VySWQsWzIsdGhpcy5fbW9kaWZ5Q2hhdHJvb21LVihlLHQpXX0pKX0pKX0sdC5wcm90b3R5cGUuZ2V0Q2hhdHJvb21FbnRyeT1mdW5jdGlvbihlLHQpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbixpLHIscyxvLGEsdTtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihjKXtzd2l0Y2goYy5sYWJlbCl7Y2FzZSAwOnJldHVybihuPXRoaXMuX2Nocm1FbnRyeUhhbmRsZXIuZ2V0VmFsdWUoZSx0KSk/WzIsUHJvbWlzZS5yZXNvbHZlKHtjb2RlOkVlLlNVQ0NFU1MsZGF0YTpufSldOlszLDFdO2Nhc2UgMTpyZXR1cm4oaT10aGlzLl9jaGFubmVsKT8ocj1pLmNvZGVjLmVuY29kZVB1bGxDaGF0Um9vbUtWKDApLHM9bmV3IE9yKGJyW2JyLnB1bGxLVl0scixlKSxbNCxpLnNlbmQocyxNbildKTpbMixQcm9taXNlLnJlamVjdCh7Y29kZTpFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEfSldO2Nhc2UgMjpyZXR1cm4gbz1jLnNlbnQoKSwoYT1vLmRhdGF8fHt9KSYmYS5rdkVudHJpZXMmJmEua3ZFbnRyaWVzLmxlbmd0aCYmdm9pZCAwIT09KHU9YS5rdkVudHJpZXMuZmluZCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5PT09dH0pKSk/WzIsUHJvbWlzZS5yZXNvbHZlKHtjb2RlOkVlLlNVQ0NFU1MsZGF0YTpudWxsPT11P3ZvaWQgMDp1LnZhbHVlfSldOlsyLFByb21pc2UucmVzb2x2ZSh7Y29kZTpFZS5DSEFUUk9PTV9LRVlfTk9UX0VYSVNUfSldfX0pKX0pKX0sdC5wcm90b3R5cGUuZ2V0QWxsQ2hhdHJvb21FbnRyeT1mdW5jdGlvbihlKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHQsbixpLHIscyxvLGE7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24odSl7c3dpdGNoKHUubGFiZWwpe2Nhc2UgMDpyZXR1cm4odD10aGlzLl9jaHJtRW50cnlIYW5kbGVyLmdldEFsbChlKSkmJk9iamVjdC5rZXlzKHQpLmxlbmd0aD9bMixQcm9taXNlLnJlc29sdmUoe2NvZGU6RWUuU1VDQ0VTUyxkYXRhOnR9KV06WzMsMV07Y2FzZSAxOnJldHVybihuPXRoaXMuX2NoYW5uZWwpPyhpPXt9LHI9bi5jb2RlYy5lbmNvZGVQdWxsQ2hhdFJvb21LVigwKSxzPW5ldyBPcihicltici5wdWxsS1ZdLHIsZSksWzQsbi5zZW5kKHMsTW4pXSk6WzIsUHJvbWlzZS5yZWplY3Qoe2NvZGU6RWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRH0pXTtjYXNlIDI6cmV0dXJuIG89dS5zZW50KCksKGE9by5kYXRhfHx7fSkmJmEua3ZFbnRyaWVzJiZhLmt2RW50cmllcy5sZW5ndGgmJmEua3ZFbnRyaWVzLmZvckVhY2goKGZ1bmN0aW9uKGUpe2Uua2V5JiYoaVtlLmtleV09ZS52YWx1ZXx8XCJcIil9KSksWzIsUHJvbWlzZS5yZXNvbHZlKHtjb2RlOkVlLlNVQ0NFU1MsZGF0YTppfSldfX0pKX0pKX0sdC5wcm90b3R5cGUucHVsbENoYXRyb29tRW50cnk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG4saSxyLHMsbyxhLHUsYyxoLGwsZCxmO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKHApe3N3aXRjaChwLmxhYmVsKXtjYXNlIDA6cmV0dXJuIGk9KG49dGhpcykuX2NoYW5uZWwscj1uLmN1cnJlbnRVc2VySWQsaT8odHx8KHQ9dGhpcy5fcHVsbENoYXRyb29tRW50cnlUaW1lc3RhbXApLHM9aS5jb2RlYy5lbmNvZGVQdWxsQ2hhdFJvb21LVih0KSxvPW5ldyBPcihicltici5wdWxsS1ZdLHMsZSksWzQsaS5zZW5kKG8sTW4pXSk6WzIse2NvZGU6RWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRH1dO2Nhc2UgMTpyZXR1cm4gYT1wLnNlbnQoKSx1PWEuY29kZSxjPWEuZGF0YSx1PT09RWUuU1VDQ0VTUz8oZ2UuaW5mbyhcIlB1bGwgc3VjY2VzcyBDaHJtS1YsIFwiK0pTT04uc3RyaW5naWZ5KGEpKSx0aGlzLl9jaHJtRW50cnlIYW5kbGVyLnNldExvY2FsKGUsYyxyKSxnZS5pbmZvKFwiU2F2ZSBpbnRvIGNhY2hlIHN1Y2Nlc3MhXCIpLGw9KGg9Yykua3ZFbnRyaWVzLGQ9aC5zeW5jVGltZSx0aGlzLl9wdWxsQ2hhdHJvb21FbnRyeVRpbWVzdGFtcD1kfHwwLGY9W10sbC5sZW5ndGg+MCYmKGwuZm9yRWFjaCgoZnVuY3Rpb24odCl7dmFyIG49dC5rZXksaT10LnZhbHVlLHI9dC50eXBlLHM9dC50aW1lc3RhbXA7Zi5wdXNoKHtrZXk6bix2YWx1ZTppLHR5cGU6cix0aW1lc3RhbXA6cyxjaGF0cm9vbUlkOmV9KX0pKSx0aGlzLl93YXRjaGVyLmNoYXRyb29tKHt1cGRhdGVkRW50cmllczpmfSkpLFsyLHtjb2RlOnUsZGF0YTpjfV0pOlsyLHtjb2RlOnV9XX19KSl9KSl9LHQucHJvdG90eXBlLnNlbmRNZXNzYWdlPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIGkscixzLG8sYSx1LGMsaCxsLGQ7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oZil7c3dpdGNoKGYubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5fY2hhbm5lbD8obj1mdW5jdGlvbihlLHQpe3JldHVyblwiUkM6U1JTTXNnXCI9PT1lLm1lc3NhZ2VUeXBlJiZPYmplY3QuYXNzaWduKGUse2RpcmVjdGlvbmFsVXNlcklkTGlzdDpbdF19KSxlfShuLHRoaXMuY3VycmVudFVzZXJJZCksbj10aGlzLl9oYW5kbGVNc2dQcm9wZXJ0aWVzKG4sITApLGk9ISFbai5QUklWQVRFLGouR1JPVVBdLmluY2x1ZGVzKGUpJiZuLmlzU3RhdHVzTWVzc2FnZSxyPWk/ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuKHQ9e30sdFtqLlBSSVZBVEVdPWJyLnBwTXNnUyx0W2ouR1JPVVBdPWJyLnBnTXNnUyx0KVtlXX0oZSk6ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuKHQ9e30sdFtqLlBSSVZBVEVdPWJyLnBwTXNnUCx0W2ouR1JPVVBdPWJyLnBnTXNnUCx0W2ouQ0hBVFJPT01dPWJyLmNoYXRNc2csdFtqLkNVU1RPTUVSX1NFUlZJQ0VdPWJyLnBjTXNnUCx0W2ouUlRDX1JPT01dPWJyLnByTXNnUyx0KVtlXX0oZSl8fGJyLnBwTXNnUCxpJiYobi5pc1BlcnNpdGVkPSExLG4uaXNDb3VudGVkPSExKSxzPXRoaXMuX2NoYW5uZWwuY29kZWMuZW5jb2RlVXBNc2coe2NvbnZlcnNhdGlvblR5cGU6ZSx0YXJnZXRJZDp0fSxuKSwobz1uZXcgUnIoYnJbcl0scyx0KSkuc2V0SGVhZGVyUW9zKHplLkFUX0xFQVNUX09OQ0UpLGk/KHRoaXMuX2NoYW5uZWwuc2VuZE9ubHkobyksWzIse2NvZGU6RWUuU1VDQ0VTUyxkYXRhOnBzKGUsdCxPKHt9LG4pLFwiXCIsMCx0aGlzLmN1cnJlbnRVc2VySWQpfV0pOihhPURhdGUubm93KCktdGhpcy5fbG9jYWxDb25uZWN0ZWRUaW1lK3RoaXMuX2Nvbm5lY3RlZFRpbWUsdT1wcyhlLHQsTyh7fSxuKSxcIlwiLGEsdGhpcy5jdXJyZW50VXNlcklkKSxbNCx0aGlzLl9jaGFubmVsLnNlbmQobyldKSk6WzIse2NvZGU6RWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRH1dO2Nhc2UgMTpyZXR1cm4gYz1mLnNlbnQoKSxoPWMuY29kZSxsPWMuZGF0YSxoIT09RWUuU1VDQ0VTUz9bMix7Y29kZTpoLGRhdGE6dX1dOihkPWwsdGhpcy5fc2VuZE1lc3NhZ2VTdG9yZS5zZXRNZXNzYWdlKGQubWVzc2FnZVVJZCxkLnRpbWVzdGFtcCksdS5zZW50VGltZT1kLnRpbWVzdGFtcCx1Lm1lc3NhZ2VVSWQ9ZC5tZXNzYWdlVUlkLHRoaXMuX2NvbnZlcnNhdGlvbk1hbmFnZXIuc2V0Q29udmVyc2F0aW9uQ2FjaGVCeU1lc3NhZ2UodSwhMCksWzIse2NvZGU6RWUuU1VDQ0VTUyxkYXRhOnV9XSl9fSkpfSkpfSx0LnByb3RvdHlwZS5yZWNhbGxNc2c9ZnVuY3Rpb24oZSx0LG4saSxyKXt2YXIgcztyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG8sYSx1LGMsaCxsLGQsZixwLGc7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oXyl7c3dpdGNoKF8ubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5fY2hhbm5lbD8obz1yLnVzZXIsYT17Y29udGVudDp7Y29udmVyc2F0aW9uVHlwZTplLHRhcmdldElkOnQsbWVzc2FnZVVJZDpuLHNlbnRUaW1lOmksdXNlcjpvfSxtZXNzYWdlVHlwZTpcIlJDOlJjQ21kXCIsZGlzYWJsZU5vdGlmaWNhdGlvbjpudWxsPT1yP3ZvaWQgMDpyLmRpc2FibGVOb3RpZmljYXRpb24scHVzaENvbmZpZzpudWxsPT1yP3ZvaWQgMDpyLnB1c2hDb25maWcscHVzaENvbnRlbnQ6KG51bGw9PT0ocz1yLnB1c2hDb25maWcpfHx2b2lkIDA9PT1zP3ZvaWQgMDpzLnB1c2hDb250ZW50KXx8ci5wdXNoQ29udGVudHx8XCJcIixjaGFubmVsSWQ6ci5jaGFubmVsSWR9LHU9YnJbYnIucmVjYWxsTXNnXSxjPXRoaXMuX2NoYW5uZWwuY29kZWMuZW5jb2RlVXBNc2coe2NvbnZlcnNhdGlvblR5cGU6ZSx0YXJnZXRJZDp0fSxhKSwoaD1uZXcgUnIodSxjLHRoaXMuY3VycmVudFVzZXJJZCkpLnNldEhlYWRlclFvcyh6ZS5BVF9MRUFTVF9PTkNFKSxbNCx0aGlzLl9jaGFubmVsLnNlbmQoaCldKTpbMix7Y29kZTpFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEfV07Y2FzZSAxOnJldHVybiBsPV8uc2VudCgpLGQ9bC5jb2RlLGY9bC5kYXRhLGQhPT1FZS5TVUNDRVNTP1syLHtjb2RlOmR9XToocD1mLGU9PT1qLlVMVFJBX0dST1VQPyh0aGlzLl91bHRyYU1zZ01hcFtwLm1lc3NhZ2VVSWRdPXAudGltZXN0YW1wLFsyLHtjb2RlOkVlLlNVQ0NFU1N9XSk6KHRoaXMuX3NlbmRNZXNzYWdlU3RvcmUuc2V0TWVzc2FnZShwLm1lc3NhZ2VVSWQscC50aW1lc3RhbXApLGc9cHMoZSx0LE8oTyh7fSxhKSx7aXNQZXJzaXRlZDohMH0pLHAubWVzc2FnZVVJZCxwLnRpbWVzdGFtcCx0aGlzLmN1cnJlbnRVc2VySWQpLHRoaXMuX2NvbnZlcnNhdGlvbk1hbmFnZXIuc2V0Q29udmVyc2F0aW9uQ2FjaGVCeU1lc3NhZ2UoZywhMCksWzIse2NvZGU6RWUuU1VDQ0VTUyxkYXRhOmd9XSkpfX0pKX0pKX0sdC5wcm90b3R5cGUuc2VuZFJlYWRSZWNlaXB0TWVzc2FnZT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBpLHI7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24ocyl7c3dpdGNoKHMubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5fY2hhbm5lbD8oaT10aGlzLl9jaGFubmVsLmNvZGVjLmVuY29kZVJlYWRSZWNlaXB0KHQsbikscj1uZXcgT3IoYnJbYnIucnJNc2ddLGksZSksWzQsdGhpcy5fY2hhbm5lbC5zZW5kKHIpXSk6WzIse2NvZGU6RWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRH1dO2Nhc2UgMTpyZXR1cm5bMixzLnNlbnQoKV19fSkpfSkpfSx0LnByb3RvdHlwZS5nZXRNZXNzYWdlUmVhZGVyPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIGkscjtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihzKXtzd2l0Y2gocy5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9jaGFubmVsPyhpPXRoaXMuX2NoYW5uZWwuY29kZWMuZW5jb2RlTWVzc2FnZVJlYWRlcih0LG4pLHI9bmV3IE9yKGJyW2JyLnJyTGlzdF0saSxlKSxbNCx0aGlzLl9jaGFubmVsLnNlbmQocixqbildKTpbMix7Y29kZTpFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEfV07Y2FzZSAxOnJldHVyblsyLHMuc2VudCgpXX19KSl9KSl9LHQucHJvdG90eXBlLnB1bGxVc2VyU2V0dGluZ3M9ZnVuY3Rpb24oZSl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciB0LG47cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oaSl7cmV0dXJuIHRoaXMuX2NoYW5uZWw/KHQ9dGhpcy5fY2hhbm5lbC5jb2RlYy5lbmNvZGVQdWxsVXNlclNldHRpbmcoZSksbj1uZXcgT3IoYnJbYnIucHVsbFVTXSx0LHRoaXMuY3VycmVudFVzZXJJZCksWzIsdGhpcy5fY2hhbm5lbC5zZW5kKG4sVm4pXSk6WzIse2NvZGU6RWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRH1dfSkpfSkpfSx0LnByb3RvdHlwZS5nZXRGaWxlVG9rZW49ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciByLHMsbyxhLHUsYztyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihoKXtzd2l0Y2goaC5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9jaGFubmVsPyhyPWkmJlwidXBsb2Fkc1wiIT09aT90fHxcIlwiOm90KGUsdCkscz10aGlzLl9jaGFubmVsLmNvZGVjLmVuY29kZUdldEZpbGVUb2tlbihlLHIsbnx8XCJcIixpfHxcIlwiKSxvPW5ldyBPcihicltici5xblRrbl0scyx0aGlzLmN1cnJlbnRVc2VySWQpLFs0LHRoaXMuX2NoYW5uZWwuc2VuZChvLHZuKV0pOlsyLHtjb2RlOkVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSUR9XTtjYXNlIDE6cmV0dXJuIGE9aC5zZW50KCksdT1hLmNvZGUsYz1hLmRhdGEsYz1PYmplY3QuYXNzaWduKGMse2ZpbGVOYW1lOnJ9KSx1PT09RWUuU1VDQ0VTUz9bMix7Y29kZTp1LGRhdGE6Y31dOlsyLHtjb2RlOnV9XX19KSl9KSl9LHQucHJvdG90eXBlLmdldEZpbGVVcmw9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciByLHMsbyxhLHUsYyxoLGwsZDtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihmKXtzd2l0Y2goZi5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9jaGFubmVsPyhyPVwiXCIscz1cIlwiLG89XCJcIix0PT09VWUuUUlOSVU/KHM9RW4sbz1Jbik6KHM9VG4sbz1Dbikscj10PT09VWUuUUlOSVU/YnJbYnIucW5VcmxdOnQ9PT1VZS5BV1M/YnJbYnIuczNVcmxdOnQ9PT1VZS5TVEM/YnJbYnIuc3RjVXJsXTpicltici5hbGlVcmxdLGE9dGhpcy5fY2hhbm5lbC5jb2RlYy5lbmNvZGVHZXRGaWxlVXJsKHMsZSxuLGkpLHU9bmV3IE9yKHIsYSx0aGlzLmN1cnJlbnRVc2VySWQpLFs0LHRoaXMuX2NoYW5uZWwuc2VuZCh1LG8pXSk6WzIse2NvZGU6RWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRH1dO2Nhc2UgMTpyZXR1cm4gYz1mLnNlbnQoKSxoPWMuY29kZSxsPWMuZGF0YSxkPWwsaD09PUVlLlNVQ0NFU1M/WzIse2NvZGU6aCxkYXRhOmR9XTpbMix7Y29kZTpofV19fSkpfSkpfSx0LnByb3RvdHlwZS5kaXNjb25uZWN0PWZ1bmN0aW9uKCl7LTEhPT10aGlzLl9yZWNvbm5lY3RUaW1lciYmKGNsZWFyVGltZW91dCh0aGlzLl9yZWNvbm5lY3RUaW1lciksdGhpcy5fcmVjb25uZWN0VGltZXI9LTEpLHRoaXMuX2NoYW5uZWwmJih0aGlzLl9jaGFubmVsLmNsb3NlKCksdGhpcy5fY2hhbm5lbD12b2lkIDApLHRoaXMuX3B1bGxRdWV1ZS5sZW5ndGg9MCx0aGlzLl9zdG9wU3luY0ludGVydmFsKCksdGhpcy5fc3RvcFVsdHJhU3luY0ludGVydmFsKCl9LHQucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aHJvdyBuZXcgRXJyb3IoXCJKU0VuZ2luZSdzIG1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpfSx0LnByb3RvdHlwZS5yZWdpc3Rlck1lc3NhZ2VUeXBlPWZ1bmN0aW9uKGUsdCxuLGkscil7dGhpcy5fY3VzdG9tTWVzc2FnZVR5cGVbZV09e2lzUGVyc2l0ZWQ6dCxpc0NvdW50ZWQ6bixpc1N0YXR1c01lc3NhZ2U6cn19LHQucHJvdG90eXBlLmdldFNlcnZlclRpbWU9ZnVuY3Rpb24oKXtyZXR1cm4gRGF0ZS5ub3coKS10aGlzLl9sb2NhbENvbm5lY3RlZFRpbWUrdGhpcy5fY29ubmVjdGVkVGltZX0sdC5wcm90b3R5cGUuZ2V0Q3VycmVudFVzZXJJZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmN1cnJlbnRVc2VySWR9LHQucHJvdG90eXBlLmNyZWF0ZVRhZz1mdW5jdGlvbihlKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHQsbixpLHIscyxvLGE7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24odSl7c3dpdGNoKHUubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5fY2hhbm5lbD8odD10aGlzLl91c2VyU2V0dGluZ01hbmFnZXIuZ2V0VmVyc2lvbigpLG49dGhpcy5fY2hhbm5lbC5jb2RlYy5lbmNvZGVDcmVhdGVUYWcoW2VdLHQpLGk9bmV3IE9yKGJyW2JyLmFkZFNlVGFnXSxuLHRoaXMuY3VycmVudFVzZXJJZCksWzQsdGhpcy5fY2hhbm5lbC5zZW5kKGksUG4pXSk6WzIse2NvZGU6RWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRH1dO2Nhc2UgMTpyZXR1cm4gcj11LnNlbnQoKSxzPXIuY29kZSxvPXIuZGF0YSxzIT09RWUuU1VDQ0VTUz9bMix7Y29kZTpzfV06KGE9by52ZXJzaW9uLHRoaXMuX3VzZXJTZXR0aW5nTWFuYWdlci5hZGRUYWcoW08oTyh7fSxlKSx7Y3JlYXRlZFRpbWU6YX0pXSxhKSxbMix7Y29kZTpFZS5TVUNDRVNTLGRhdGE6b31dKX19KSl9KSl9LHQucHJvdG90eXBlLnJlbW92ZVRhZz1mdW5jdGlvbihlKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHQsbixpLHIscyxvLGE7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24odSl7c3dpdGNoKHUubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5fY2hhbm5lbD8odD10aGlzLl91c2VyU2V0dGluZ01hbmFnZXIuZ2V0VmVyc2lvbigpLG49dGhpcy5fY2hhbm5lbC5jb2RlYy5lbmNvZGVSZW1vdmVUYWcoW2VdLHQpLGk9bmV3IE9yKGJyW2JyLmRlbFNlVGFnXSxuLHRoaXMuY3VycmVudFVzZXJJZCksWzQsdGhpcy5fY2hhbm5lbC5zZW5kKGksUG4pXSk6WzIse2NvZGU6RWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRH1dO2Nhc2UgMTpyZXR1cm4gcj11LnNlbnQoKSxzPXIuY29kZSxvPXIuZGF0YSxzIT09RWUuU1VDQ0VTUz9bMix7Y29kZTpzfV06KGE9by52ZXJzaW9uLHRoaXMuX3VzZXJTZXR0aW5nTWFuYWdlci5kZWxldGVUYWcoW2VdLGEpLFsyLHtjb2RlOkVlLlNVQ0NFU1N9XSl9fSkpfSkpfSx0LnByb3RvdHlwZS51cGRhdGVUYWc9ZnVuY3Rpb24oZSl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciB0LG4saSxyLHMsbyxhO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKHUpe3N3aXRjaCh1LmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuX2NoYW5uZWw/KHQ9dGhpcy5fdXNlclNldHRpbmdNYW5hZ2VyLmdldFZlcnNpb24oKSxuPXRoaXMuX2NoYW5uZWwuY29kZWMuZW5jb2RlQ3JlYXRlVGFnKFtlXSx0KSxpPW5ldyBPcihicltici5hZGRTZVRhZ10sbix0aGlzLmN1cnJlbnRVc2VySWQpLFs0LHRoaXMuX2NoYW5uZWwuc2VuZChpLFBuKV0pOlsyLHtjb2RlOkVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSUR9XTtjYXNlIDE6cmV0dXJuIHI9dS5zZW50KCkscz1yLmNvZGUsbz1yLmRhdGEscyE9PUVlLlNVQ0NFU1M/WzIse2NvZGU6c31dOihhPW8udmVyc2lvbix0aGlzLl91c2VyU2V0dGluZ01hbmFnZXIuYWRkVGFnKFtlXSxhKSxbMix7Y29kZTpFZS5TVUNDRVNTLGRhdGE6b31dKX19KSl9KSl9LHQucHJvdG90eXBlLmdldFRhZ0xpc3Q9ZnVuY3Rpb24oKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIGUsdDtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihuKXtyZXR1cm4gZT10aGlzLl91c2VyU2V0dGluZ01hbmFnZXIuZ2V0VGFncygpLHQ9dGhpcy5fY29udmVyc2F0aW9uTWFuYWdlci5nZXRDb252ZXJzYXRpb25MaXN0Rm9yVGFnKCksZS5mb3JFYWNoKChmdW5jdGlvbihlKXtlLmNvbnZlcnNhdGlvbkNvdW50PXRbZS50YWdJZF0/dFtlLnRhZ0lkXS5sZW5ndGg6MH0pKSxbMix7Y29kZTpFZS5TVUNDRVNTLGRhdGE6ZX1dfSkpfSkpfSx0LnByb3RvdHlwZS5hZGRUYWdGb3JDb252ZXJzYXRpb25zPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBuLGkscixzLG89dGhpcztyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihhKXtzd2l0Y2goYS5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9jaGFubmVsP3RoaXMuX3VzZXJTZXR0aW5nTWFuYWdlci5nZXRUYWdCeUlkKGUpPyhuPXRoaXMuX2NoYW5uZWwuY29kZWMuZW5jb2RlVXBkYXRlQ29udmVyc2F0aW9uVGFnKFt7dGFnSWQ6ZX1dLHQpLGk9bmV3IE9yKGJyW2JyLmFkZFRhZ10sbix0aGlzLmN1cnJlbnRVc2VySWQpLFs0LHRoaXMuX2NoYW5uZWwuc2VuZChpKV0pOlsyLHtjb2RlOkVlLlRBR19OT1RfRVhJU1R9XTpbMix7Y29kZTpFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEfV07Y2FzZSAxOnJldHVybihyPWEuc2VudCgpLmNvZGUpIT09RWUuU1VDQ0VTUz9bMix7Y29kZTpyfV06KChzPXt9KVtlXT17fSx0LmZvckVhY2goKGZ1bmN0aW9uKGUpe28uX2NvbnZlcnNhdGlvbk1hbmFnZXIuYWRkVGFnU3RhdHVzKGUuY29udmVyc2F0aW9uVHlwZSxlLnRhcmdldElkLHMsZS5jaGFubmVsSWQpfSkpLFsyLHtjb2RlOkVlLlNVQ0NFU1N9XSl9fSkpfSkpfSx0LnByb3RvdHlwZS5yZW1vdmVUYWdGb3JDb252ZXJzYXRpb25zPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBuLGkscixzPXRoaXM7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24obyl7c3dpdGNoKG8ubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5fY2hhbm5lbD8obj10aGlzLl9jaGFubmVsLmNvZGVjLmVuY29kZVVwZGF0ZUNvbnZlcnNhdGlvblRhZyhbe3RhZ0lkOmV9XSx0KSxpPW5ldyBPcihicltici5kZWxUYWddLG4sdGhpcy5jdXJyZW50VXNlcklkKSxbNCx0aGlzLl9jaGFubmVsLnNlbmQoaSldKTpbMix7Y29kZTpFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEfV07Y2FzZSAxOnJldHVybihyPW8uc2VudCgpLmNvZGUpIT09RWUuU1VDQ0VTUz9bMix7Y29kZTpyfV06KHQuZm9yRWFjaCgoZnVuY3Rpb24odCl7cy5fY29udmVyc2F0aW9uTWFuYWdlci5kZWxldGVUYWdTdGF0dXModC5jb252ZXJzYXRpb25UeXBlLHQudGFyZ2V0SWQsW2VdLHQuY2hhbm5lbElkKX0pKSxbMix7Y29kZTpFZS5TVUNDRVNTfV0pfX0pKX0pKX0sdC5wcm90b3R5cGUucmVtb3ZlVGFnc0ZvckNvbnZlcnNhdGlvbj1mdW5jdGlvbihlLHQpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbixpLHIscyxvLGEsdTtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihjKXtzd2l0Y2goYy5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9jaGFubmVsPyhuPWUuY29udmVyc2F0aW9uVHlwZSxpPWUudGFyZ2V0SWQscj1lLmNoYW5uZWxJZCxzPXQubWFwKChmdW5jdGlvbihlKXtyZXR1cm57dGFnSWQ6ZX19KSksbz10aGlzLl9jaGFubmVsLmNvZGVjLmVuY29kZVVwZGF0ZUNvbnZlcnNhdGlvblRhZyhzLFtlXSksYT1uZXcgT3IoYnJbYnIuZGVsVGFnXSxvLHRoaXMuY3VycmVudFVzZXJJZCksWzQsdGhpcy5fY2hhbm5lbC5zZW5kKGEpXSk6WzIse2NvZGU6RWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRH1dO2Nhc2UgMTpyZXR1cm4odT1jLnNlbnQoKS5jb2RlKSE9PUVlLlNVQ0NFU1M/WzIse2NvZGU6dX1dOih0aGlzLl9jb252ZXJzYXRpb25NYW5hZ2VyLmRlbGV0ZVRhZ1N0YXR1cyhuLGksdCxyKSxbMix7Y29kZTpFZS5TVUNDRVNTfV0pfX0pKX0pKX0sdC5wcm90b3R5cGUuZ2V0Q29udmVyc2F0aW9uTGlzdEJ5VGFnPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIGkscixzLG8sYSx1LGMsaCxsO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGQpe3N3aXRjaChkLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHI9KGk9dGhpcykuY3VycmVudFVzZXJJZCwocz1pLl9jaGFubmVsKT8obz1zLmNvZGVjLmVuY29kZU9sZENvbnZlcnNhdGlvbkxpc3Qoe2NvdW50Om4sdHlwZTpqLlBSSVZBVEUsc3RhcnRUaW1lOnR9KSxhPW5ldyBPcihKaSxvLHIpLFs0LHMuc2VuZChhLEt0LHtjdXJyZW50VXNlcklkOnIsY29ubmVjdGVkVGltZTpzLmNvbm5lY3RlZFRpbWV9KV0pOlsyLHtjb2RlOkVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSUR9XTtjYXNlIDE6cmV0dXJuIHU9ZC5zZW50KCksYz11LmNvZGUsaD11LmRhdGEsbD10aGlzLl9jb252ZXJzYXRpb25IYXNUYWdGaWx0ZXIoZSxudWxsPT1oP3ZvaWQgMDpoLmxpc3QpLGdlLmluZm8oXCJHZXRDb252ZXJzYXRpb25MaXN0QnlUYWdcIixsKSxjIT09RWUuU1VDQ0VTUz9bMix7Y29kZTpjfV06WzIse2NvZGU6YyxkYXRhOmx9XX19KSl9KSl9LHQucHJvdG90eXBlLl9jb252ZXJzYXRpb25IYXNUYWdGaWx0ZXI9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLGk9W10scj1bXTtmdW5jdGlvbiBzKGUsdCl7cmV0dXJuIGUubGF0ZXN0TWVzc2FnZSYmdC5sYXRlc3RNZXNzYWdlP2UubGF0ZXN0TWVzc2FnZS5zZW50VGltZS10LmxhdGVzdE1lc3NhZ2Uuc2VudFRpbWU6MH1yZXR1cm4gdC5mb3JFYWNoKChmdW5jdGlvbih0KXt2YXIgcz10LmNvbnZlcnNhdGlvblR5cGUsbz10LnRhcmdldElkLGE9dC5jaGFubmVsSWQsdT1uLl9jb252ZXJzYXRpb25NYW5hZ2VyLmdldChzLG8sYSksYz11Lmhhc01lbnRpb25lZCxoPXUubWVudGlvbmVkSW5mbyxsPXUubGFzdFVucmVhZFRpbWUsZD11Lm5vdGlmaWNhdGlvblN0YXR1cyxmPXUuaXNUb3AscD11LnRhZ3MsZz11LnVucmVhZE1lc3NhZ2VDb3VudCxfPXAmJnBbZV07aWYoXyl7dmFyIHk9TyhPKHt9LHQpLHtoYXNNZW50aW9uZWQ6YyxtZW50aW9uZWRJbmZvOmgsbGFzdFVucmVhZFRpbWU6bCxub3RpZmljYXRpb25TdGF0dXM6ZCxpc1RvcDpmLHVucmVhZE1lc3NhZ2VDb3VudDpnfSk7Xy5pc1RvcD9pLnB1c2goTyhPKHt9LHkpLHtpc1RvcEluVGFnOiEwfSkpOnIucHVzaChPKE8oe30seSkse2lzVG9wSW5UYWc6ITF9KSl9fSkpLEEoQShbXSxpLnNvcnQocykpLHIuc29ydChzKSl9LHQucHJvdG90eXBlLmdldFVucmVhZENvdW50QnlUYWc9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG47cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oaSl7cmV0dXJuIHRoaXMuX2NoYW5uZWw/KG49dGhpcy5fY29udmVyc2F0aW9uTWFuYWdlci5nZXRVbnJlYWRDb3VudEJ5VGFnKGUsdCksWzIse2NvZGU6RWUuU1VDQ0VTUyxkYXRhOm59XSk6WzIse2NvZGU6RWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRH1dfSkpfSkpfSx0LnByb3RvdHlwZS5zZXRDb252ZXJzYXRpb25TdGF0dXNJblRhZz1mdW5jdGlvbihlLHQsbil7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBpLHIscyxvLGEsdSxjLGgsbCxkO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGYpe3N3aXRjaChmLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuX2NoYW5uZWw/KGk9dC50YXJnZXRJZCxyPXQuY29udmVyc2F0aW9uVHlwZSxzPXQuY2hhbm5lbElkLG89bi5pc1RvcCxhPVt7dGFnSWQ6ZSxpc1RvcDpvfV0sKHU9dGhpcy5fY29udmVyc2F0aW9uTWFuYWdlci5nZXQocixpLHMpKS50YWdzJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbCh1LnRhZ3MsZSk/KGM9dGhpcy5fY2hhbm5lbC5jb2RlYy5lbmNvZGVVcGRhdGVDb252ZXJzYXRpb25UYWcoYSxbdF0pLGg9bmV3IE9yKGJyW2JyLmFkZFRhZ10sYyx0aGlzLmN1cnJlbnRVc2VySWQpLFs0LHRoaXMuX2NoYW5uZWwuc2VuZChoKV0pOlsyLHtjb2RlOkVlLk5PX1RBR19JTl9DT05WRVJ9XSk6WzIse2NvZGU6RWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRH1dO2Nhc2UgMTpyZXR1cm4obD1mLnNlbnQoKS5jb2RlKSE9PUVlLlNVQ0NFU1M/WzIse2NvZGU6bH1dOigoZD17fSlbZV09e30sbyYmKGRbZV0uaXNUb3A9ITApLHRoaXMuX2NvbnZlcnNhdGlvbk1hbmFnZXIuYWRkVGFnU3RhdHVzKHIsaSxkLHMpLFsyLHtjb2RlOkVlLlNVQ0NFU1N9XSl9fSkpfSkpfSx0LnByb3RvdHlwZS5nZXRUYWdzRm9yQ29udmVyc2F0aW9uPWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbixpLHIscztyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihvKXtpZighdGhpcy5fY2hhbm5lbClyZXR1cm5bMix7Y29kZTpFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEfV07aWYobj10aGlzLl9jb252ZXJzYXRpb25NYW5hZ2VyLmdldChlLmNvbnZlcnNhdGlvblR5cGUsZS50YXJnZXRJZCxlLmNoYW5uZWxJZCksaT10aGlzLl91c2VyU2V0dGluZ01hbmFnZXIuZ2V0VGFnc0luZm8oKSxyPVtdLG4udGFncylmb3IocyBpbiBuLnRhZ3Mpci5wdXNoKHt0YWdJZDpzLHRhZ05hbWU6bnVsbD09PSh0PWlbc10pfHx2b2lkIDA9PT10P3ZvaWQgMDp0LnRhZ05hbWV9KTtyZXR1cm5bMix7Y29kZTpFZS5TVUNDRVNTLGRhdGE6cn1dfSkpfSkpfSx0LnByb3RvdHlwZS5nZXRCbG9ja0NvbnZlcnNhdGlvbkxpc3Q9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9jb252ZXJzYXRpb25NYW5hZ2VyLmdldEJsb2NrQ29udmVyc2F0aW9uTGlzdCgpO3JldHVybiBQcm9taXNlLnJlc29sdmUoe2NvZGU6RWUuU1VDQ0VTUyxkYXRhOmV9KX0sdC5wcm90b3R5cGUuZ2V0VG9wQ29udmVyc2F0aW9uTGlzdD1mdW5jdGlvbigpe3ZhciBlPXRoaXMuX2NvbnZlcnNhdGlvbk1hbmFnZXIuZ2V0VG9wQ29udmVyc2F0aW9uTGlzdCgpO3JldHVybiBQcm9taXNlLnJlc29sdmUoe2NvZGU6RWUuU1VDQ0VTUyxkYXRhOmV9KX0sdC5wcm90b3R5cGUuZ2V0VW5yZWFkTWVudGlvbmVkQ291bnQ9ZnVuY3Rpb24oZSl7dmFyIHQsbjtyZXR1cm4gbj1lLmNvbnZlcnNhdGlvblR5cGU9PT1qLlVMVFJBX0dST1VQPyhudWxsPT09KHQ9dGhpcy5fdWx0cmFHcm91cE1hcFtlLmNoYW5uZWxJZCtcIl9cIitlLnRhcmdldElkXSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQudW5yZWFkTWVudGlvbmVkQ291bnQpfHwwOnRoaXMuX2NvbnZlcnNhdGlvbk1hbmFnZXIuZ2V0VW5yZWFkTWVudGlvbmVkQ291bnQoZS5jaGFubmVsSWQsZS5jb252ZXJzYXRpb25UeXBlLGUudGFyZ2V0SWQpLFByb21pc2UucmVzb2x2ZSh7Y29kZTpFZS5TVUNDRVNTLGRhdGE6bn0pfSx0LnByb3RvdHlwZS5nZXRBbGxVbnJlYWRNZW50aW9uZWRDb3VudD1mdW5jdGlvbigpe3ZhciBlPXRoaXMuX2NvbnZlcnNhdGlvbk1hbmFnZXIuZ2V0QWxsVW5yZWFkTWVudGlvbmVkQ291bnQoKTtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtjb2RlOkVlLlNVQ0NFU1MsZGF0YTplfSl9LHQucHJvdG90eXBlLmdldFVsdHJhR3JvdXBMaXN0PWZ1bmN0aW9uKCl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBlLHQ7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24obil7cmV0dXJuIHRoaXMuX2lzVWx0cmFHcm91cExpc3RFeGlzdD8oZT1PYmplY3QudmFsdWVzKHRoaXMuX3VsdHJhR3JvdXBNYXApLGU9Z3MoZSksdD1JdChlKSxbMix7Y29kZTpFZS5TVUNDRVNTLGRhdGE6dH1dKTpbMix7Y29kZTpFZS5NRVRIT0RfTk9UX0FWQUlMQUJMRX1dfSkpfSkpfSx0LnByb3RvdHlwZS5nZXRCbG9ja1VsdHJhR3JvdXBMaXN0PWZ1bmN0aW9uKCl7aWYoIXRoaXMuX2lzVWx0cmFHcm91cExpc3RFeGlzdClyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtjb2RlOkVlLk1FVEhPRF9OT1RfQVZBSUxBQkxFfSk7dmFyIGU9T2JqZWN0LnZhbHVlcyh0aGlzLl91bHRyYUdyb3VwTWFwKSx0PVtdO3JldHVybiBlLmZvckVhY2goKGZ1bmN0aW9uKGUpe2Uubm90aWZpY2F0aW9uU3RhdHVzPT09T2UuT1BFTiYmdC5wdXNoKHtjb252ZXJzYXRpb25UeXBlOmouVUxUUkFfR1JPVVAsdGFyZ2V0SWQ6ZS50YXJnZXRJZCxjaGFubmVsSWQ6ZS5jaGFubmVsSWR9KX0pKSxQcm9taXNlLnJlc29sdmUoe2NvZGU6RWUuU1VDQ0VTUyxkYXRhOnR9KX0sdC5wcm90b3R5cGUuZ2V0VG9wVWx0cmFHcm91cExpc3Q9ZnVuY3Rpb24oKXtpZighdGhpcy5faXNVbHRyYUdyb3VwTGlzdEV4aXN0KXJldHVybiBQcm9taXNlLnJlc29sdmUoe2NvZGU6RWUuTUVUSE9EX05PVF9BVkFJTEFCTEV9KTt2YXIgZT1PYmplY3QudmFsdWVzKHRoaXMuX3VsdHJhR3JvdXBNYXApLHQ9W107cmV0dXJuIGUuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ITA9PT1lLmlzVG9wJiZ0LnB1c2goe2NvbnZlcnNhdGlvblR5cGU6ai5VTFRSQV9HUk9VUCx0YXJnZXRJZDplLnRhcmdldElkLGNoYW5uZWxJZDplLmNoYW5uZWxJZH0pfSkpLFByb21pc2UucmVzb2x2ZSh7Y29kZTpFZS5TVUNDRVNTLGRhdGE6dH0pfSx0LnByb3RvdHlwZS5nZXRVbHRyYUdyb3VwVW5yZWFkTWVudGlvbmVkQ291bnRCeVRhcmdldElkPWZ1bmN0aW9uKGUpe2lmKCF0aGlzLl9pc1VsdHJhR3JvdXBMaXN0RXhpc3QpcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7Y29kZTpFZS5NRVRIT0RfTk9UX0FWQUlMQUJMRX0pO3ZhciB0PTA7Zm9yKHZhciBuIGluIHRoaXMuX3VsdHJhR3JvdXBNYXApe24ubWF0Y2goL18uKi9nKVswXS5zdWJzdHJpbmcoMSk9PT1lJiYodCs9dGhpcy5fdWx0cmFHcm91cE1hcFtuXS51bnJlYWRNZW50aW9uZWRDb3VudCl9cmV0dXJuIFByb21pc2UucmVzb2x2ZSh7Y29kZTpFZS5TVUNDRVNTLGRhdGE6dH0pfSx0LnByb3RvdHlwZS5jbGVhclVsdHJhVW5yZWFkY291bnQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9XCJcIiksTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG4saSxyLHMsbztyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihhKXtzd2l0Y2goYS5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9pc1VsdHJhR3JvdXBMaXN0RXhpc3Q/dGhpcy5fY2hhbm5lbD90aGlzLl9zdGF0dXMhPT1JZS5DT05ORUNURUQ/WzIsRWUuUkNfTkVUX1VOQVZBSUxBQkxFXToobj1EYXRlLm5vdygpLGk9dGhpcy5fY2hhbm5lbC5jb2RlYy5lbmNvZGVDbGVhclVucmVhZENvdW50KHtjb252ZXJzYXRpb25UeXBlOmouVUxUUkFfR1JPVVAsdGFyZ2V0SWQ6ZSxjaGFubmVsSWQ6dH0se3RpbWVzdGFtcDpufSksKHI9bmV3IFJyKGJyW2JyLnVwZFVnUlRpbWVdLGksdGhpcy5jdXJyZW50VXNlcklkKSkuc2V0SGVhZGVyUW9zKHplLkFUX0xFQVNUX09OQ0UpLFs0LHRoaXMuX2NoYW5uZWwuc2VuZChyKV0pOlsyLEVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSURdOlsyLFByb21pc2UucmVzb2x2ZShFZS5NRVRIT0RfTk9UX0FWQUlMQUJMRSldO2Nhc2UgMTpyZXR1cm4ocz1hLnNlbnQoKS5jb2RlKT09PUVlLlNVQ0NFU1MmJihvPXRoaXMuX3VsdHJhR3JvdXBNYXBbdCtcIl9cIitlXSkmJihvLnVucmVhZE1lc3NhZ2VDb3VudD0wLG8udW5yZWFkTWVudGlvbmVkQ291bnQ9MCxvLmxhc3RSZWFkVGltZT1uKSxbMixzXX19KSl9KSl9LHQucHJvdG90eXBlLl9nZXRVbHRyYUdyb3VwTGlzdD1mdW5jdGlvbihlKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHQsbixpLHIscyxvLGEsdSxjLGgsbCxkLGYscD10aGlzO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGcpe3N3aXRjaChnLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuX2NoYW5uZWwmJnRoaXMuX3N0YXR1cz09PUllLkNPTk5FQ1RFRD8oITEsdD10aGlzLl9jaGFubmVsLmNvZGVjLmVuY29kZVVsdHJhR3JvdXAoZSxmYWxzZSksbj1uZXcgT3IoYnJbYnIucHVsbFVnU2VzXSx0LHRoaXMuY3VycmVudFVzZXJJZCksWzQsdGhpcy5fY2hhbm5lbC5zZW5kKG4sS3Qse2N1cnJlbnRVc2VySWQ6dGhpcy5jdXJyZW50VXNlcklkLGNvbnZlcnNhdGlvblR5cGU6ai5VTFRSQV9HUk9VUH0pXSk6WzJdO2Nhc2UgMTpyZXR1cm4gaT1nLnNlbnQoKSxyPWkuY29kZSxzPWkuZGF0YSxyPT09RWUuU1VDQ0VTUyYmcz8oYT0obnVsbD09cz92b2lkIDA6cy5saXN0KXx8W10sdT1udWxsPT1zP3ZvaWQgMDpzLmlzRmluaXNoZWQsYS5mb3JFYWNoKChmdW5jdGlvbihlKXtlLm5vdGlmaWNhdGlvblN0YXR1cz1PZS5DTE9TRSxlLmlzVG9wPSExLHAuX3VsdHJhR3JvdXBNYXBbZS5jaGFubmVsSWQrXCJfXCIrZS50YXJnZXRJZF09ZX0pKSwhMSE9PXU/WzMsMl06KGM9YS5sZW5ndGg+MCYmYVthLmxlbmd0aC0xXS52ZXJzaW9uVGltZXx8MCx0aGlzLl9nZXRVbHRyYUdyb3VwTGlzdChjKSxbMyw0XSkpOihnZS53YXJuKFwicHVsbCBzdXBlciBjb252ZXJzYXRpb24gIGZhaWxlZCwgY29kZTpcIixyLFwiLCBkYXRhOlwiLHMsXCJyZXRyeWluZy4uLlwiKSxvPXNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7cC5fZmlyc3RQdWxsVWx0cmFHcm91cFRpbWU9ZSxwLl9nZXRVbHRyYUdyb3VwTGlzdChlKSxjbGVhclRpbWVvdXQobyl9KSwzZTMpLFsyXSk7Y2FzZSAyOnJldHVybls0LHRoaXMucHVsbENvbnZlcnNhdGlvblN0YXR1cyh0aGlzLl9maXJzdFB1bGxVbHRyYUdyb3VwVGltZSldO2Nhc2UgMzpoPWcuc2VudCgpLGw9aC5jb2RlLGQ9aC5kYXRhLGwhPT1FZS5TVUNDRVNTJiZnZS53YXJuKFwicHVsbENvbnZlcnNhdGlvblN0YXR1cyBmYWlsIGNvZGU6IFwiK2wrXCIsIGRhdGE6IFwiK2QpLGY9T2JqZWN0LnZhbHVlcyh0aGlzLl91bHRyYUdyb3VwTWFwKSxmPWdzKGYpLHRoaXMuX2lzVWx0cmFHcm91cExpc3RFeGlzdD0hMCx0aGlzLl93YXRjaGVyLnVsdHJhR3JvdXBFbmFibGUoSXQoZikpLDA9PT10aGlzLl9maXJzdFB1bGxVbHRyYUdyb3VwVGltZSYmdGhpcy5fc3luY1VsdHJhTXNnKHRoaXMuX2xhc3RTeW5jVWx0cmFNc2dUaW1lU3RhbXApLGcubGFiZWw9NDtjYXNlIDQ6cmV0dXJuWzJdfX0pKX0pKX0sdC5wcm90b3R5cGUuX3N0YXJ0VWx0cmFTeW5jSW50ZXJ2YWw9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZnVuY3Rpb24oKXtlLl91bHRyYUdyb3VwVGltZXI9c2V0VGltZW91dCgoZnVuY3Rpb24oKXtEYXRlLm5vdygpLWUuX2xhc3RTeW5jVWx0cmFNc2dMb2NhbFRpbWVTdGFtcD49MThlNCYmZS5fc3luY1VsdHJhTXNnKGUuX2xhc3RTeW5jVWx0cmFNc2dUaW1lU3RhbXApLGUuX3N0b3BVbHRyYVN5bmNJbnRlcnZhbCgpLHQoKX0pLDNlNCl9O3RoaXMuX2xhc3RTeW5jVWx0cmFNc2dMb2NhbFRpbWVTdGFtcD1EYXRlLm5vdygpLHRoaXMuX3N5bmNVbHRyYU1zZygwKSx0KCl9LHQucHJvdG90eXBlLl9zdG9wVWx0cmFTeW5jSW50ZXJ2YWw9ZnVuY3Rpb24oKXstMSE9PXRoaXMuX3VsdHJhR3JvdXBUaW1lciYmKGNsZWFyVGltZW91dCh0aGlzLl91bHRyYUdyb3VwVGltZXIpLHRoaXMuX3VsdHJhR3JvdXBUaW1lcj0tMSl9LHQucHJvdG90eXBlLl9zeW5jVWx0cmFNc2c9ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBuLGkscixzLG8sYSx1LGMsaCxsLGQsZixwPXRoaXM7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oZyl7c3dpdGNoKGcubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5fY2hhbm5lbCYmdGhpcy5fc3RhdHVzPT09SWUuQ09OTkVDVEVEP3RoaXMuX2lzVWx0cmFQdWxsaW5nP1syXTooZ2UuaW5mbyhcInN0YXJ0IHB1bGwgdWx0cmEgbXNnLCB0aW1lOiBcIitlKSx0aGlzLl9pc1VsdHJhUHVsbGluZz0hMCxuPXRoaXMuX2NoYW5uZWwuY29kZWMuZW5jb2RlU3VwZXJTeW5jTXNnKGUpLGk9bmV3IE9yKGJyW2JyLnB1bGxVZ01zZ10sbix0aGlzLmN1cnJlbnRVc2VySWQpLFs0LHRoaXMuX2NoYW5uZWwuc2VuZChpLFB0LHtjdXJyZW50VXNlcklkOnRoaXMuY3VycmVudFVzZXJJZCxjb252ZXJzYXRpb246e2NvbnZlcnNhdGlvblR5cGU6ai5VTFRSQV9HUk9VUH19KV0pOlsyXTtjYXNlIDE6aWYocj1nLnNlbnQoKSxzPXIuY29kZSxvPXIuZGF0YSxnZS5pbmZvKFwiZW5kIHB1bGwgdWx0cmEgbXNnLCBjb2RlOiBcIitzK1wiLCBzeW5jVGltZTogXCIrKG51bGw9PW8/dm9pZCAwOm8uc3luY1RpbWUpK1wiLCBjb3VudDogXCIrKG51bGw9PT0odD1udWxsPT1vP3ZvaWQgMDpvLmxpc3QpfHx2b2lkIDA9PT10P3ZvaWQgMDp0Lmxlbmd0aCkpLHRoaXMuX2xhc3RTeW5jVWx0cmFNc2dMb2NhbFRpbWVTdGFtcD1EYXRlLm5vdygpLHMhPT1FZS5TVUNDRVNTfHwhbylyZXR1cm4gZ2Uud2FybihcInN5bmMgc3VwZXIgIG1lc3NhZ2UgIGZhaWxlZCwgY29kZTpcIixzLFwiLCBkYXRhOlwiLG8pLHRoaXMuX2lzVWx0cmFQdWxsaW5nPSExLFsyXTtpZih0aGlzLl9pc1VsdHJhUHVsbGluZz0hMSxhPW8ubGlzdCx1PW8uc3luY1RpbWUsYz1vLmZpbmlzaGVkLCF0aGlzLl9pc1VsdHJhR3JvdXBMaXN0RXhpc3QpcmV0dXJuIGdlLmluZm8oXCJpbml0IGdldFVsdHJhR3JvdXBMaXN0XCIpLHRoaXMuX2ZpcnN0UHVsbFVsdHJhR3JvdXBUaW1lPTAsdGhpcy5fZ2V0VWx0cmFHcm91cExpc3QoMCksdGhpcy5fbGFzdFN5bmNVbHRyYU1zZ1RpbWVTdGFtcD11LFsyXTtmb3IoZiBpbiBoPXt9LGw9W10sYS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgdCxuLGkscj1lLnRhcmdldElkLHM9ZS5jb250ZW50LG89ZS5tZXNzYWdlVHlwZSxhPWUubWVzc2FnZVVJZCxjPWUuY2hhbm5lbElkLGQ9ZS5pc0NvdW50ZWQ7aWYocC5fdWx0cmFNc2dNYXBbYV0pZGVsZXRlIHAuX3VsdHJhTXNnTWFwW2FdO2Vsc2V7dmFyIGY9MDsoKG51bGw9PT0odD1udWxsPT1zP3ZvaWQgMDpzLm1lbnRpb25lZEluZm8pfHx2b2lkIDA9PT10P3ZvaWQgMDp0LnR5cGUpPT09d2UuQUxMfHwobnVsbD09PShpPW51bGw9PT0obj1udWxsPT1zP3ZvaWQgMDpzLm1lbnRpb25lZEluZm8pfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLnVzZXJJZExpc3QpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLmluY2x1ZGVzKHAuY3VycmVudFVzZXJJZCkpKSYmKGY9MSk7dmFyIGc9cC5fdWx0cmFHcm91cE1hcFtjK1wiX1wiK3JdO2lmKGcpZCYmKG89PT1TZS5SRUNBTEw/Zy51bnJlYWRNZXNzYWdlQ291bnQ+MCYmKGcudW5yZWFkTWVzc2FnZUNvdW50LT0xKTooZy51bnJlYWRNZXNzYWdlQ291bnQrPTEsZy51bnJlYWRNZW50aW9uZWRDb3VudCs9ZikpLGcudmVyc2lvblRpbWU9dSxnLmxhdGVzdE1lc3NhZ2U9ZSxoW2MrXCJfXCIrcl09ZztlbHNle3ZhciBfPXtjb252ZXJzYXRpb25UeXBlOmouVUxUUkFfR1JPVVAsdGFyZ2V0SWQ6cixjaGFubmVsSWQ6Yyx1bnJlYWRNZXNzYWdlQ291bnQ6MSx1bnJlYWRNZW50aW9uZWRDb3VudDpmLHZlcnNpb25UaW1lOnUsbGF0ZXN0TWVzc2FnZTplLG5vdGlmaWNhdGlvblN0YXR1czpPZS5DTE9TRSxpc1RvcDohMX07cC5fdWx0cmFHcm91cE1hcFtjK1wiX1wiK3JdPV8saFtjK1wiX1wiK3JdPV99bC5wdXNoKGUpfX0pKSxPYmplY3Qua2V5cyhoKS5sZW5ndGg+MCYmKGdlLmluZm8oXCJub3RpY2UgdWx0cmFncm91cHNcIiksZD1PYmplY3QudmFsdWVzKGgpLGQ9Z3MoZCksdGhpcy5fd2F0Y2hlci5jb252ZXJzYXRpb24oSXQoZCkpKSxnZS5pbmZvKFwibm90aWNlIHVsdHJhZ3JvdXAgbWVzc2FnZVwiKSx0aGlzLl93YXRjaGVyLmJhdGNoTWVzc2FnZShsKSx0aGlzLl91bHRyYUdyb3VwVGltZVF1ZT10aGlzLl91bHRyYUdyb3VwVGltZVF1ZS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiBlPnV9KSksdGhpcy5fdWx0cmFNc2dNYXApdGhpcy5fdWx0cmFNc2dNYXBbZl08dSYmZGVsZXRlIHRoaXMuX3VsdHJhTXNnTWFwW2ZdO3JldHVybiExPT09Yz90aGlzLl9zeW5jVWx0cmFNc2codSk6YSYmYS5sZW5ndGg+MCYmKHRoaXMuX2xhc3RTeW5jVWx0cmFNc2dUaW1lU3RhbXA9dSksdGhpcy5fdWx0cmFHcm91cFRpbWVRdWUubGVuZ3RoPjAmJnRoaXMuX3N5bmNVbHRyYU1zZyh0aGlzLl9sYXN0U3luY1VsdHJhTXNnVGltZVN0YW1wKSxbMl19fSkpfSkpfSx0LnByb3RvdHlwZS5zZW5kVWx0cmFNZXNzYWdlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBuLGkscixzLG8sYSx1LGMsaCxsO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGQpe3N3aXRjaChkLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuX2NoYW5uZWw/dGhpcy5fc3RhdHVzIT09SWUuQ09OTkVDVEVEP1syLHtjb2RlOkVlLlJDX05FVF9VTkFWQUlMQUJMRX1dOihcIlJDOlNSU01zZ1wiPT09dC5tZXNzYWdlVHlwZSYmZ2Uud2FybihcInVsdHJhIGdyb3VwIC0+IGRpcmVjdGlvbiBtZXNzYWdlIGNvbnZlcnQgdG8gbWVzc2FnZVwiKSx0PXRoaXMuX2hhbmRsZU1zZ1Byb3BlcnRpZXModCwhMCksbj10aGlzLl9jaGFubmVsLmNvZGVjLmVuY29kZVVwTXNnKHtjb252ZXJzYXRpb25UeXBlOmouVUxUUkFfR1JPVVAsdGFyZ2V0SWQ6ZX0sdCksKGk9bmV3IFJyKGJyW2JyLnVnTXNnXSxuLGUpKS5zZXRIZWFkZXJRb3MoemUuQVRfTEVBU1RfT05DRSkscj1EYXRlLm5vdygpLXRoaXMuX2xvY2FsQ29ubmVjdGVkVGltZSt0aGlzLl9jb25uZWN0ZWRUaW1lLHM9cHMoai5VTFRSQV9HUk9VUCxlLE8oe30sdCksXCJcIixyLHRoaXMuY3VycmVudFVzZXJJZCksWzQsdGhpcy5fY2hhbm5lbC5zZW5kKGkpXSk6WzIse2NvZGU6RWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRH1dO2Nhc2UgMTpyZXR1cm4gbz1kLnNlbnQoKSxhPW8uY29kZSx1PW8uZGF0YSxhIT09RWUuU1VDQ0VTUz9bMix7Y29kZTphLGRhdGE6c31dOihjPXUscy5zZW50VGltZT1jLnRpbWVzdGFtcCxzLm1lc3NhZ2VVSWQ9Yy5tZXNzYWdlVUlkLHRoaXMuX3VsdHJhTXNnTWFwW2MubWVzc2FnZVVJZF09Yy50aW1lc3RhbXAsaD10LmNoYW5uZWxJZHx8XCJcIiwobD10aGlzLl91bHRyYUdyb3VwTWFwW2grXCJfXCIrZV0pP2wubGF0ZXN0TWVzc2FnZT1zOihsPXtjb252ZXJzYXRpb25UeXBlOmouVUxUUkFfR1JPVVAsdGFyZ2V0SWQ6ZSxjaGFubmVsSWQ6aCx1bnJlYWRNZXNzYWdlQ291bnQ6MCx1bnJlYWRNZW50aW9uZWRDb3VudDowLHZlcnNpb25UaW1lOnMuc2VudFRpbWUsbGF0ZXN0TWVzc2FnZTpzLG5vdGlmaWNhdGlvblN0YXR1czpPZS5DTE9TRSxpc1RvcDohMX0sdGhpcy5fdWx0cmFHcm91cE1hcFtoK1wiX1wiK2VdPWwpLHRoaXMuX3dhdGNoZXIuY29udmVyc2F0aW9uKEl0KFtsXSkpLFsyLHtjb2RlOmEsZGF0YTpzfV0pfX0pKX0pKX0sdC5wcm90b3R5cGUuc2VuZFVsdHJhR3JvdXBUeXBpbmdTdGF0dXM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG4saSxyLHMsbyxhO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKHUpe3N3aXRjaCh1LmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuX2NoYW5uZWw/dGhpcy5fc3RhdHVzIT09SWUuQ09OTkVDVEVEP1syLHtjb2RlOkVlLlJDX05FVF9VTkFWQUlMQUJMRX1dOihuPWUuY29udmVyc2F0aW9uVHlwZSxpPWUuY2hhbm5lbElkLHI9ZS50YXJnZXRJZCxzPXRoaXMuX2NoYW5uZWwuY29kZWMuZW5jb2RlT3BlcmF0ZVN0YXR1cyhyLG4saXx8XCJcIix0fHwwKSwobz1uZXcgUnIoYnJbYnIub3BlcmF0ZV0scyxyKSkuc2V0SGVhZGVyUW9zKHplLkFUX0xFQVNUX09OQ0UpLFs0LHRoaXMuX2NoYW5uZWwuc2VuZChvKV0pOlsyLHtjb2RlOkVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSUR9XTtjYXNlIDE6cmV0dXJuKGE9dS5zZW50KCkuY29kZSkhPT1FZS5TVUNDRVNTP1syLHtjb2RlOmEsbXNnOkVlW2FdfV06WzIse2NvZGU6YX1dfX0pKX0pKX0sdC5wcm90b3R5cGUuZ2V0VWx0cmFHcm91cE1lc3NhZ2VMaXN0QnlNZXNzYWdlVUlkPWZ1bmN0aW9uKGUpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgdCxuLGkscixzLG8sYTtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbih1KXtzd2l0Y2godS5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9jaGFubmVsP3RoaXMuX3N0YXR1cyE9PUllLkNPTk5FQ1RFRD9bMix7Y29kZTpFZS5SQ19ORVRfVU5BVkFJTEFCTEV9XTplLm1lc3NhZ2VzJiZlLm1lc3NhZ2VzLmxlbmd0aDwxfHxlLm1lc3NhZ2VzJiZlLm1lc3NhZ2VzLmxlbmd0aD4yMD9bMix7Y29kZTpFZS5NU0dfTElNSVRfRVJST1J9XToodD17fSxlLm1lc3NhZ2VzLmZvckVhY2goKGZ1bmN0aW9uKGUpe3RbZS5tZXNzYWdlVUlkXT12b2lkIDB9KSksbj10aGlzLl9jaGFubmVsLmNvZGVjLmVuY29kZU1zZ1F1ZXJ5KGUpLChpPW5ldyBPcihicltici5xcnlNc2ddLG4sdGhpcy5jdXJyZW50VXNlcklkKSkuc2V0SGVhZGVyUW9zKHplLkFUX0xFQVNUX09OQ0UpLFs0LHRoaXMuX2NoYW5uZWwuc2VuZChpLHVpKV0pOlsyLHtjb2RlOkVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSUR9XTtjYXNlIDE6cmV0dXJuIHI9dS5zZW50KCkscz1yLmNvZGUsbz1yLmRhdGEscyE9PUVlLlNVQ0NFU1M/WzIse2NvZGU6cyxtc2c6RWVbc119XTooYT0ob3x8e30pLmxpc3QsQXJyYXkuaXNBcnJheShhKSYmYS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbj1lLm1lc3NhZ2VVSWQ7dFtuXT1lfSkpLFsyLHtjb2RlOjAsZGF0YTp0fV0pfX0pKX0pKX0sdC5wcm90b3R5cGUuX3B1bGxPcGVyYXRlU3RhdHVzTm90aWZ5PWZ1bmN0aW9uKGUpe2lmKHRoaXMuX2NoYW5uZWwpe3ZhciB0PXRoaXMuX2NoYW5uZWwuY29kZWMuZGVjb2RlQnlQQk5hbWUoZS5kYXRhLGhpKSxuPXQuY29udmVyc2F0aW9uVHlwZSxpPXQuaW5mbyxyPXQuc3VtbWFyeTtnZS5pbmZvKFwic19vcE50ZiAtPiB0eXBlOiBcIituK1wiLCBpbmZvOiBcIitpK1wiLCBzdW1tYXJ5OiBcIityKSx0aGlzLl93YXRjaGVyLm9wZXJhdGVTdGF0dXModCl9fSx0LnByb3RvdHlwZS5leHBhbmRVbHRyYU1lc3NhZ2U9ZnVuY3Rpb24oZSl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciB0LG4saSxyLHMsbztyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihhKXtzd2l0Y2goYS5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9jaGFubmVsP3RoaXMuX3N0YXR1cyE9PUllLkNPTk5FQ1RFRD9bMix7Y29kZTpFZS5SQ19ORVRfVU5BVkFJTEFCTEV9XToodD10aGlzLl9jaGFubmVsLmNvZGVjLmVuY29kZUV4cGFuZFVsdHJhTWVzc2FnZShlLHRoaXMuY3VycmVudFVzZXJJZCksKG49bmV3IFJyKGJyW2JyLnVwTXNnRXhdLHQsZS50YXJnZXRJZCkpLnNldEhlYWRlclFvcyh6ZS5BVF9MRUFTVF9PTkNFKSxbNCx0aGlzLl9jaGFubmVsLnNlbmQobildKTpbMix7Y29kZTpFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEfV07Y2FzZSAxOnJldHVybiBpPWEuc2VudCgpLHI9aS5jb2RlLHM9aS5kYXRhLHIhPT1FZS5TVUNDRVNTP1syLHtjb2RlOnIsbXNnOkVlW3JdfV06KG89cyx0aGlzLl91bHRyYU1zZ01hcFtvLm1lc3NhZ2VVSWRdPW8udGltZXN0YW1wLFsyLHtjb2RlOnJ9XSl9fSkpfSkpfSx0LnByb3RvdHlwZS5tb2RpZnlNZXNzYWdlPWZ1bmN0aW9uKGUpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgdCxuLGkscixzLG87cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oYSl7c3dpdGNoKGEubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5fY2hhbm5lbD90aGlzLl9zdGF0dXMhPT1JZS5DT05ORUNURUQ/WzIse2NvZGU6RWUuUkNfTkVUX1VOQVZBSUxBQkxFfV06KHQ9dGhpcy5fY2hhbm5lbC5jb2RlYy5lbmNvZGVtb2RpZnlNZXNzYWdlKGUsdGhpcy5jdXJyZW50VXNlcklkKSwobj1uZXcgUnIoYnJbYnIubW9kaWZ5TXNnXSx0LGUudGFyZ2V0SWQpKS5zZXRIZWFkZXJRb3MoemUuQVRfTEVBU1RfT05DRSksWzQsdGhpcy5fY2hhbm5lbC5zZW5kKG4pXSk6WzIse2NvZGU6RWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRH1dO2Nhc2UgMTpyZXR1cm4gaT1hLnNlbnQoKSxyPWkuY29kZSxzPWkuZGF0YSxyIT09RWUuU1VDQ0VTUz9bMix7Y29kZTpyLG1zZzpFZVtyXX1dOihvPXMsdGhpcy5fdWx0cmFNc2dNYXBbby5tZXNzYWdlVUlkXT1vLnRpbWVzdGFtcCxbMix7Y29kZTpyfV0pfX0pKX0pKX0sdC5wcm90b3R5cGUuX3B1bGxVbHRyYUNoYW5nZU1lc3NhZ2VMaXN0PWZ1bmN0aW9uKGUpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgdCxuLGkscixzLG8sYSx1LGMsaCxsLGQsZixwLGcsXyx5LG09dGhpcztyZXR1cm4gdyh0aGlzLChmdW5jdGlvbih2KXtzd2l0Y2godi5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9jaGFubmVsP3RoaXMuX3N0YXR1cyE9PUllLkNPTk5FQ1RFRHx8dGhpcy5faXNQdWxsaW5nVWx0cmFDaGFuZ2VNZXNzYWdlP1syXToodGhpcy5faXNQdWxsaW5nVWx0cmFDaGFuZ2VNZXNzYWdlPSEwLHQ9dGhpcy5fY2hhbm5lbC5jb2RlYy5lbmNvZGVRdWVyeU1zZ0NoYW5nZShlKSwobj1uZXcgUnIoYnJbYnIucXJ5TXNnQ2hhbmdlXSx0LHRoaXMuY3VycmVudFVzZXJJZCkpLnNldEhlYWRlclFvcyh6ZS5BVF9MRUFTVF9PTkNFKSxbNCx0aGlzLl9jaGFubmVsLnNlbmQobixzaSldKTpbMl07Y2FzZSAxOmlmKGk9di5zZW50KCkscj1pLmNvZGUscz1pLmRhdGEsdGhpcy5faXNQdWxsaW5nVWx0cmFDaGFuZ2VNZXNzYWdlPSExLHIhPT1FZS5TVUNDRVNTKXJldHVyblsyXTtmb3IocCBpbiBhPShvPXN8fHt9KS5oYXNOZXh0LHU9by5saXN0LGM9KG51bGw9PXM/dm9pZCAwOnMuc3luY1RpbWUpfHwwLGg9W10sbD17fSxBcnJheS5pc0FycmF5KHUpJiZ1LmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0PWUsbj10LnRhcmdldElkLGk9dC5jb252ZXJzYXRpb25UeXBlLHI9dC5zZW5kVGltZSxzPXQubWVzc2FnZVVJZCxvPXQuY2hhbmdlVHlwZSxhPXQub3BlcmF0b3JJZCx1PWUuY2hhbm5lbElkfHxcIlwiLGM9aStcIl9cIituLGQ9cytcIl9cIit1K1wiX1wiK3IsZj1sW2NdO2lmKGYpZi5hZGQoZCk7ZWxzZXt2YXIgcD1uZXcgU2V0KFtkXSk7bFtjXT1wfTMhPT1vP20uX3VsdHJhTXNnQ2hhbmdlTWFwW3NdPW86aC5wdXNoKHt0YXJnZXRJZDpuLGNvbnZlcnNhdGlvblR5cGU6aSxzZW5kVGltZTpyLG1lc3NhZ2VVSWQ6cyxzZW5kZXJVc2VySWQ6YSxjaGFubmVsSWQ6dX0pfSkpLEFycmF5LmlzQXJyYXkoaCkmJmgubGVuZ3RoPjAmJnRoaXMuX3dhdGNoZXIudWx0cmFHcm91cE1lc3NhZ2VSZWNhbGxlZChoKSxkPWZ1bmN0aW9uKGUpe3ZhciB0PWUuc3BsaXQoXCJfXCIpLG49dC5zaGlmdCgpLGk9dC5qb2luKFwiX1wiKSxyPWxbZV0scz1bXTtyLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0PWUuc3BsaXQoXCJfXCIpLG49dFswXSxpPXRbMV0scj10WzJdO3MucHVzaCh7c2VuZFRpbWU6TnVtYmVyKHIpLG1lc3NhZ2VVSWQ6bixjaGFubmVsSWQ6aX0pfSkpO3ZhciBvPXt0YXJnZXRJZDppLGNvbnZlcnNhdGlvblR5cGU6TnVtYmVyKG4pLG1lc3NhZ2VzOnN9O2YuX3B1bGxVbHRyYU1lc3NhZ2VMaXN0KG8pfSxmPXRoaXMsbClkKHApO2ZvcihfIGluIGc9dGhpcy5fcHVsbFVsdHJhQ2hhbmdlTWVzc2FnZVF1ZS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiBlPmN9KSksdGhpcy5fcHVsbFVsdHJhQ2hhbmdlTWVzc2FnZVF1ZS5sZW5ndGg9MCwoeT10aGlzLl9wdWxsVWx0cmFDaGFuZ2VNZXNzYWdlUXVlKS5wdXNoLmFwcGx5KHksZyksdGhpcy5fdWx0cmFNc2dNYXApdGhpcy5fdWx0cmFNc2dNYXBbX108YyYmZGVsZXRlIHRoaXMuX3VsdHJhTXNnTWFwW19dO3JldHVybiBhP3RoaXMuX3B1bGxVbHRyYUNoYW5nZU1lc3NhZ2VMaXN0KGMpOnRoaXMuX2xhc3RQdWxsaW5nVWx0cmFDaGFuZ2VNZXNzYWdlVGltZT1jLFsyXX19KSl9KSl9LHQucHJvdG90eXBlLl9wdWxsVWx0cmFNZXNzYWdlTGlzdD1mdW5jdGlvbihlKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHQsbixpLHIscyxvLGEsdSxjPXRoaXM7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oaCl7c3dpdGNoKGgubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5fY2hhbm5lbD90aGlzLl9zdGF0dXMhPT1JZS5DT05ORUNURUQ/WzIse2NvZGU6RWUuUkNfTkVUX1VOQVZBSUxBQkxFfV06KHQ9dGhpcy5fY2hhbm5lbC5jb2RlYy5lbmNvZGVNc2dRdWVyeShlKSwobj1uZXcgT3IoYnJbYnIucXJ5TXNnXSx0LHRoaXMuY3VycmVudFVzZXJJZCkpLnNldEhlYWRlclFvcyh6ZS5BVF9MRUFTVF9PTkNFKSxbNCx0aGlzLl9jaGFubmVsLnNlbmQobix1aSldKTpbMix7Y29kZTpFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEfV07Y2FzZSAxOnJldHVybiBpPWguc2VudCgpLHI9aS5jb2RlLHM9aS5kYXRhLHIhPT1FZS5TVUNDRVNTP1syLHtjb2RlOnIsbXNnOkVlW3JdfV06KG89KHN8fHt9KS5saXN0LGE9W10sdT1bXSxBcnJheS5pc0FycmF5KG8pJiZvLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0PWUudGFyZ2V0SWQsbj1lLmNoYW5uZWxJZCxpPWUubWVzc2FnZVVJZCxyPWMuX3VsdHJhR3JvdXBNYXBbbitcIl9cIit0XTtyJiZyLmxhdGVzdE1lc3NhZ2UubWVzc2FnZVVJZD09PWUubWVzc2FnZVVJZCYmKHIubGF0ZXN0TWVzc2FnZT1lKTt2YXIgcz1jLl91bHRyYU1zZ0NoYW5nZU1hcFtpK1wiXCJdOzE9PT1zP2EucHVzaChlKToyPT09cyYmdS5wdXNoKGUpfSkpLGEubGVuZ3RoPjAmJnRoaXMuX3dhdGNoZXIudWx0cmFHcm91cE1lc3NhZ2VFeHBhbnNpb25VcGRhdGVkKGF8fFtdKSx1Lmxlbmd0aD4wJiZ0aGlzLl93YXRjaGVyLnVsdHJhR3JvdXBNZXNzYWdlTW9kaWZpZWQodXx8W10pLFsyXSl9fSkpfSkpfSx0LnByb3RvdHlwZS5nZXRVbHRyYUhpc3RvcnlNc2c9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG4saSxyLHMsbztyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihhKXtzd2l0Y2goYS5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9jaGFubmVsP3RoaXMuX3N0YXR1cyE9PUllLkNPTk5FQ1RFRD9bMix7Y29kZTpFZS5SQ19ORVRfVU5BVkFJTEFCTEV9XToobj10aGlzLl9jaGFubmVsLmNvZGVjLmVuY29kZUdldEhpc3RvcnlNc2coZSx0KSxpPW5ldyBPcihicltici5xcnlVZ01zZ10sbix0aGlzLmN1cnJlbnRVc2VySWQpLFs0LHRoaXMuX2NoYW5uZWwuc2VuZChpLEZ0LHtjdXJyZW50VXNlcklkOnRoaXMuY3VycmVudFVzZXJJZCxjb252ZXJzYXRpb246e2NvbnZlcnNhdGlvblR5cGU6ai5VTFRSQV9HUk9VUCx0YXJnZXRJZDplfX0pXSk6WzIse2NvZGU6RWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRH1dO2Nhc2UgMTpyZXR1cm4gcj1hLnNlbnQoKSxzPXIuY29kZSxvPXIuZGF0YSxzPT09RWUuU1VDQ0VTUyYmbz9bMix7Y29kZTpzLGRhdGE6b31dOihnZS53YXJuKFwiZ2V0IHN1cGVyIGhpc3RvcnkgbWVzc2FnZSAgZmFpbGVkLCBjb2RlOlwiLHMsXCIsIGRhdGE6XCIsbyksWzIse2NvZGU6c31dKX19KSl9KSl9LHQucHJvdG90eXBlLnNlYXJjaFVsdHJhR3JvdXBNZXNzYWdlcz1mdW5jdGlvbihlKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2NoYW5uZWw/dGhpcy5fc3RhdHVzIT09SWUuQ09OTkVDVEVEP1syLHtjb2RlOkVlLlJDX05FVF9VTkFWQUlMQUJMRX1dOlsyLHtjb2RlOkVlLlNVQ0NFU1N9XTpbMix7Y29kZTpFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEfV19KSl9KSl9LHQucHJvdG90eXBlLmdldEFsbENvbnZlcnNhdGlvblN0YXRlPWZ1bmN0aW9uKCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZSh7Y29kZTpFZS5TVUNDRVNTLGRhdGE6dGhpcy5fY29udmVyc2F0aW9uTWFuYWdlci5nZXRBbGxDb252ZXJzYXRpb25TdGF0ZSgpfSl9LHQucHJvdG90eXBlLmpvaW5SVENSb29tPWZ1bmN0aW9uKGUsdCxuLGkscixzKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG8sYTtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbih1KXtyZXR1cm4gdGhpcy5fY2hhbm5lbD8obz10aGlzLl9jaGFubmVsLmNvZGVjLmVuY29kZUpvaW5SVENSb29tKHQsbixpLHIscyksYT1uZXcgT3IoYnJbYnIucnRjUkpvaW5fZGF0YV0sbyxlKSxbMix0aGlzLl9jaGFubmVsLnNlbmQoYSxubildKTpbMix7Y29kZTpFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEfV19KSl9KSl9LHQucHJvdG90eXBlLnF1aXRSVENSb29tPWZ1bmN0aW9uKGUpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgdCxuO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGkpe3N3aXRjaChpLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuX2NoYW5uZWw/KHQ9dGhpcy5fY2hhbm5lbC5jb2RlYy5lbmNvZGVRdWl0UlRDUm9vbSgpLG49bmV3IE9yKGJyW2JyLnJ0Y1JFeGl0XSx0LGUpLFs0LHRoaXMuX2NoYW5uZWwuc2VuZChuKV0pOlsyLEVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSURdO2Nhc2UgMTpyZXR1cm5bMixpLnNlbnQoKS5jb2RlXX19KSl9KSl9LHQucHJvdG90eXBlLnJ0Y1Bpbmc9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgaSxyO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKHMpe3N3aXRjaChzLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuX2NoYW5uZWw/KGk9dGhpcy5fY2hhbm5lbC5jb2RlYy5lbmNvZGVKb2luUlRDUm9vbSh0LG4pLHI9bmV3IE9yKGJyW2JyLnJ0Y1BpbmddLGksZSksWzQsdGhpcy5fY2hhbm5lbC5zZW5kKHIpXSk6WzIsRWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRF07Y2FzZSAxOnJldHVyblsyLHMuc2VudCgpLmNvZGVdfX0pKX0pKX0sdC5wcm90b3R5cGUuZ2V0UlRDUm9vbUluZm89ZnVuY3Rpb24oZSl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciB0LG47cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oaSl7cmV0dXJuIHRoaXMuX2NoYW5uZWw/KHQ9dGhpcy5fY2hhbm5lbC5jb2RlYy5lbmNvZGVHZXRSVENSb29tSW5mbygpLG49bmV3IE9yKGJyW2JyLnJ0Y1JJbmZvXSx0LGUpLFsyLHRoaXMuX2NoYW5uZWwuc2VuZChuLGduKV0pOlsyLHtjb2RlOkVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSUR9XX0pKX0pKX0sdC5wcm90b3R5cGUuZ2V0UlRDVXNlckluZm9MaXN0PWZ1bmN0aW9uKGUpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgdCxuLGkscixzO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKG8pe3N3aXRjaChvLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuX2NoYW5uZWw/KHQ9dGhpcy5fY2hhbm5lbC5jb2RlYy5lbmNvZGVHZXRSVENSb29tSW5mbygpLG49bmV3IE9yKGJyW2JyLnJ0Y1VEYXRhXSx0LGUpLFs0LHRoaXMuX2NoYW5uZWwuc2VuZChuLG5uKV0pOlsyLHtjb2RlOkVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSUR9XTtjYXNlIDE6cmV0dXJuIGk9by5zZW50KCkscj1pLmNvZGUscz1pLmRhdGEsWzIse2NvZGU6cixkYXRhOnM/e3VzZXJzOnMudXNlcnN9OnN9XX19KSl9KSl9LHQucHJvdG90eXBlLnNldFJUQ1VzZXJJbmZvPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIGkscjtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihzKXtzd2l0Y2gocy5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9jaGFubmVsPyhpPXRoaXMuX2NoYW5uZWwuY29kZWMuZW5jb2RlU2V0UlRDVXNlckluZm8odCxuKSxyPW5ldyBPcihicltici5ydGNVUHV0XSxpLGUpLFs0LHRoaXMuX2NoYW5uZWwuc2VuZChyKV0pOlsyLEVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSURdO2Nhc2UgMTpyZXR1cm5bMixzLnNlbnQoKS5jb2RlXX19KSl9KSl9LHQucHJvdG90eXBlLnJlbW92ZVJUQ1VzZXJJbmZvPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBuLGk7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24ocil7c3dpdGNoKHIubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5fY2hhbm5lbD8obj10aGlzLl9jaGFubmVsLmNvZGVjLmVuY29kZVJlbW92ZVJUQ1VzZXJJbmZvKHQpLGk9bmV3IFJyKGJyW2JyLnJ0Y1VEZWxdLG4sZSksWzQsdGhpcy5fY2hhbm5lbC5zZW5kKGkpXSk6WzIsRWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRF07Y2FzZSAxOnJldHVyblsyLHIuc2VudCgpLmNvZGVdfX0pKX0pKX0sdC5wcm90b3R5cGUuc2V0UlRDRGF0YT1mdW5jdGlvbihlLHQsbixpLHIscyl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBvLGE7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24odSl7c3dpdGNoKHUubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5fY2hhbm5lbD8obz10aGlzLl9jaGFubmVsLmNvZGVjLmVuY29kZVNldFJUQ0RhdGEodCxuLGkscixzKSxhPW5ldyBScihicltici5ydGNTZXREYXRhXSxvLGUpLFs0LHRoaXMuX2NoYW5uZWwuc2VuZChhKV0pOlsyLEVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSURdO2Nhc2UgMTpyZXR1cm5bMix1LnNlbnQoKS5jb2RlXX19KSl9KSl9LHQucHJvdG90eXBlLnNldFJUQ1RvdGFsUmVzPWZ1bmN0aW9uKGUsdCxuLGkscil7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBzLG87cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oYSl7c3dpdGNoKGEubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5fY2hhbm5lbD8ocz10aGlzLl9jaGFubmVsLmNvZGVjLmVuY29kZVVzZXJTZXRSVENEYXRhKHQsbixpLHIpLG89bmV3IE9yKGJyW2JyLnVzZXJTZXREYXRhXSxzLGUpLFs0LHRoaXMuX2NoYW5uZWwuc2VuZChvKV0pOlsyLEVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSURdO2Nhc2UgMTpyZXR1cm5bMixhLnNlbnQoKS5jb2RlXX19KSl9KSl9LHQucHJvdG90eXBlLnNldFJUQ0NETlVyaXM9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgaSxyO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKHMpe3N3aXRjaChzLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuX2NoYW5uZWw/KGk9dGhpcy5fY2hhbm5lbC5jb2RlYy5lbmNvZGVVc2VyU2V0UlRDQ0ROVXJpcyh0LG4pLHI9bmV3IE9yKGJyW2JyLnVzZXJTZXREYXRhXSxpLGUpLFs0LHRoaXMuX2NoYW5uZWwuc2VuZChyKV0pOlsyLEVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSURdO2Nhc2UgMTpyZXR1cm5bMixzLnNlbnQoKS5jb2RlXX19KSl9KSl9LHQucHJvdG90eXBlLmdldFJUQ0RhdGE9ZnVuY3Rpb24oZSx0LG4saSl7aWYoIXRoaXMuX2NoYW5uZWwpcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7Y29kZTpFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEfSk7dmFyIHI9dGhpcy5fY2hhbm5lbC5jb2RlYy5lbmNvZGVHZXRSVENEYXRhKHQsbixpKSxzPW5ldyBPcihicltici5ydGNRcnlEYXRhXSxyLGUpO3JldHVybiB0aGlzLl9jaGFubmVsLnNlbmQocyxsbil9LHQucHJvdG90eXBlLnJlbW92ZVJUQ0RhdGE9ZnVuY3Rpb24oZSx0LG4saSxyKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHMsbztyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihhKXtzd2l0Y2goYS5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9jaGFubmVsPyhzPXRoaXMuX2NoYW5uZWwuY29kZWMuZW5jb2RlUmVtb3ZlUlRDRGF0YSh0LG4saSxyKSxvPW5ldyBScihicltici5ydGNEZWxEYXRhXSxzLGUpLFs0LHRoaXMuX2NoYW5uZWwuc2VuZChvKV0pOlsyLEVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSURdO2Nhc2UgMTpyZXR1cm5bMixhLnNlbnQoKS5jb2RlXX19KSl9KSl9LHQucHJvdG90eXBlLnNldFJUQ091dERhdGE9ZnVuY3Rpb24oZSx0LG4saSl7dGhyb3cgbmV3IEVycm9yKFwiSlNFbmdpbmUncyBtZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKX0sdC5wcm90b3R5cGUuZ2V0UlRDT3V0RGF0YT1mdW5jdGlvbihlLHQpe3Rocm93IG5ldyBFcnJvcihcIkpTRW5naW5lJ3MgbWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIil9LHQucHJvdG90eXBlLmdldFJUQ1Rva2VuPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIGkscjtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihzKXtyZXR1cm4gdGhpcy5fY2hhbm5lbD8oaT10aGlzLl9jaGFubmVsLmNvZGVjLmVuY29kZUpvaW5SVENSb29tKHQsbikscj1uZXcgT3IoYnJbYnIucnRjVG9rZW5dLGksZSksWzIsdGhpcy5fY2hhbm5lbC5zZW5kKHIsaG4pXSk6WzIse2NvZGU6RWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRH1dfSkpfSkpfSx0LnByb3RvdHlwZS5zZXRSVENTdGF0ZT1mdW5jdGlvbihlLHQpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbixpO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKHIpe3N3aXRjaChyLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuX2NoYW5uZWw/KG49dGhpcy5fY2hhbm5lbC5jb2RlYy5lbmNvZGVTZXRSVENTdGF0ZSh0KSxpPW5ldyBPcihicltici5ydGNVc2VyU3RhdGVdLG4sZSksWzQsdGhpcy5fY2hhbm5lbC5zZW5kKGkpXSk6WzIsRWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRF07Y2FzZSAxOnJldHVyblsyLHIuc2VudCgpLmNvZGVdfX0pKX0pKX0sdC5wcm90b3R5cGUuZ2V0UlRDVXNlckluZm89ZnVuY3Rpb24oZSl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpfSkpfSkpfSx0LnByb3RvdHlwZS5nZXRSVENVc2VyTGlzdD1mdW5jdGlvbihlKXtpZighdGhpcy5fY2hhbm5lbClyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtjb2RlOkVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSUR9KTt2YXIgdD10aGlzLl9jaGFubmVsLmNvZGVjLmVuY29kZUdldFJUQ1Jvb21JbmZvKCksbj1uZXcgT3IoYnJbYnIucnRjVUxpc3RdLHQsZSk7cmV0dXJuIHRoaXMuX2NoYW5uZWwuc2VuZChuLG5uKX0sdC5wcm90b3R5cGUuam9pbkxpdmluZ1Jvb21Bc0F1ZGllbmNlPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9eGUuTElWRSksTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIGkscixzLG8sYSx1LGMsaDtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihsKXtzd2l0Y2gobC5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9jaGFubmVsPyhpPXRoaXMuX2NoYW5uZWwuY29kZWMuZW5jb2RlSm9pblJUQ1Jvb20odCxuKSxyPW5ldyBPcihicltici52aWV3ZXJKb2luUl0saSxlKSxbNCx0aGlzLl9jaGFubmVsLnNlbmQocixtaSldKTpbMix7Y29kZTpFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEfV07Y2FzZSAxOnJldHVybiBzPWwuc2VudCgpLG89cy5jb2RlLGE9cy5kYXRhLG8hPT1FZS5TVUNDRVNTP1syLHtjb2RlOm99XTooYz0odT1hKS5ydGNUb2tlbixoPXUuZW50cmllcyxbMix7Y29kZTpvLGRhdGE6e3Rva2VuOmMsa3ZFbnRyaWVzOmh9fV0pfX0pKX0pKX0sdC5wcm90b3R5cGUucXVpdExpdmluZ1Jvb21Bc0F1ZGllbmNlPWZ1bmN0aW9uKGUpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgdCxuLGk7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24ocil7c3dpdGNoKHIubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5fY2hhbm5lbD8odD10aGlzLl9jaGFubmVsLmNvZGVjLmVuY29kZVF1aXRSVENSb29tKCksbj1uZXcgT3IoYnJbYnIudmlld2VyRXhpdFJdLHQsZSksWzQsdGhpcy5fY2hhbm5lbC5zZW5kKG4pXSk6WzIsRWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRF07Y2FzZSAxOnJldHVybiBpPXIuc2VudCgpLmNvZGUsdGhpcy5fcnRjS1ZNYW5hZ2VyLnJlc2V0KCksWzIsaV19fSkpfSkpfSx0LnByb3RvdHlwZS5ydGNJZGVudGl0eUNoYW5nZT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBpLHIscyxvLGE7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24odSl7c3dpdGNoKHUubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5fY2hhbm5lbD8oaT10aGlzLl9jaGFubmVsLmNvZGVjLmVuY29kZUlkZW50aXR5Q2hhbmdlSW5mbyh0LG4pLHI9bmV3IE9yKGJyW2JyLnJ0Y0lkZW50aXR5Q2hhbmdlXSxpLGUpLFs0LHRoaXMuX2NoYW5uZWwuc2VuZChyLG5uKV0pOlsyLHtjb2RlOkVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSUR9XTtjYXNlIDE6cmV0dXJuIHM9dS5zZW50KCksbz1zLmNvZGUsYT1zLmRhdGEsbyE9PUVlLlNVQ0NFU1M/WzIse2NvZGU6b31dOlsyLHtjb2RlOm8sZGF0YTphfV19fSkpfSkpfSx0LnByb3RvdHlwZS5wdWxsUlRDUm9vbUVudHJ5PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciB0LG4saSxyLHMsbyxhLHUsYztyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihoKXtzd2l0Y2goaC5sYWJlbCl7Y2FzZSAwOnJldHVybiBuPSh0PXRoaXMpLl9jaGFubmVsLGk9dC5jdXJyZW50VXNlcklkLG4/KGdlLmluZm8oXCJhdWRpZW5jZSBpbiByb29tIHN0YXJ0IHB1bGwgS1ZcIikscj1uLmNvZGVjLmVuY29kZVB1bGxSVENSb29tS1YoZSwwKSxzPW5ldyBPcihicltici5ydGNQdWxsS3ZdLHIsaSksWzQsbi5zZW5kKHMsZ2kpXSk6WzIse2NvZGU6RWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRH1dO2Nhc2UgMTpyZXR1cm4gbz1oLnNlbnQoKSxhPW8uY29kZSx1PW8uZGF0YSxnZS5pbmZvKFwiYXVkaWVuY2UgaW4gcm9vbSBlbmQgcHVsbCBLViwgY29kZTogXCIrYStcIiwgZGF0YTogXCIrSlNPTi5zdHJpbmdpZnkodXx8e30pKSxhPT09RWUuU1VDQ0VTUz8oYz11Lmt2RW50cmllcyx0aGlzLl93YXRjaGVyLm9uUlRDRGF0YUNoYW5nZShjLGUpLFsyLHtjb2RlOmEsZGF0YTp1fV0pOlsyLHtjb2RlOmF9XX19KSl9KSl9LHQucHJvdG90eXBlLmdldFJUQ0pvaW5lZFVzZXJJbmZvPWZ1bmN0aW9uKGUpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgdCxuLGkscixzLG8sYSx1O3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGMpe3N3aXRjaChjLmxhYmVsKXtjYXNlIDA6cmV0dXJuIG49KHQ9dGhpcykuX2NoYW5uZWwsaT10LmN1cnJlbnRVc2VySWQsbj8ocj1uLmNvZGVjLmVuY29kZVF1ZXJ5VXNlckpvaW5lZEluZm8oZSkscz1uZXcgT3IoYnJbYnIucnRjUXVlcnlKb2luZWRdLHIsaSksWzQsbi5zZW5kKHMseWkpXSk6WzIse2NvZGU6RWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRH1dO2Nhc2UgMTpyZXR1cm4gbz1jLnNlbnQoKSxhPW8uY29kZSx1PW8uZGF0YSxhPT09RWUuU1VDQ0VTUz9bMix7Y29kZTphLGRhdGE6dX1dOlsyLHtjb2RlOmF9XX19KSl9KSl9LHQucHJvdG90eXBlLmdldERldmljZUlkPWZ1bmN0aW9uKCl7cmV0dXJuIGRzKHRoaXMucnVudGltZSl9LHQucHJvdG90eXBlLnJlcXVlc3RSb29tUEs9ZnVuY3Rpb24oZSl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciB0LG4saTtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihyKXtzd2l0Y2goci5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9jaGFubmVsPyh0PXRoaXMuX2NoYW5uZWwuY29kZWMuZW5jb2RlUmVxdWVzdFJvb21QSyhlKSxuPW5ldyBPcihicltici5ydGNJbnZpdGVdLHQsZS5yb29tSWQpLFs0LHRoaXMuX2NoYW5uZWwuc2VuZChuKV0pOlsyLEVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSURdO2Nhc2UgMTpyZXR1cm4gaT1yLnNlbnQoKS5jb2RlLHRoaXMuX3J0Y0tWTWFuYWdlci5yZXNldCgpLFsyLGldfX0pKX0pKX0sdC5wcm90b3R5cGUuY2FuY2VsUm9vbVBLPWZ1bmN0aW9uKGUpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgdCxuLGk7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24ocil7c3dpdGNoKHIubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5fY2hhbm5lbD8odD10aGlzLl9jaGFubmVsLmNvZGVjLmVuY29kZUNhbmNlbFJvb21QSyhlKSxuPW5ldyBPcihicltici5ydGNDYW5jZWxJbnZpdGVdLHQsZS5yb29tSWQpLFs0LHRoaXMuX2NoYW5uZWwuc2VuZChuKV0pOlsyLEVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSURdO2Nhc2UgMTpyZXR1cm4gaT1yLnNlbnQoKS5jb2RlLHRoaXMuX3J0Y0tWTWFuYWdlci5yZXNldCgpLFsyLGldfX0pKX0pKX0sdC5wcm90b3R5cGUucmVzcG9uc2VSb29tUEs9ZnVuY3Rpb24oZSl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciB0LG4saTtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihyKXtzd2l0Y2goci5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9jaGFubmVsPyh0PXRoaXMuX2NoYW5uZWwuY29kZWMuZW5jb2RlUmVzcG9uc2VSb29tUEsoZSksbj1uZXcgT3IoYnJbYnIucnRjSW52aXRlQW5zd2VyXSx0LGUucm9vbUlkKSxbNCx0aGlzLl9jaGFubmVsLnNlbmQobildKTpbMixFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEXTtjYXNlIDE6cmV0dXJuIGk9ci5zZW50KCkuY29kZSx0aGlzLl9ydGNLVk1hbmFnZXIucmVzZXQoKSxbMixpXX19KSl9KSl9LHQucHJvdG90eXBlLmVuZFJvb21QSz1mdW5jdGlvbihlKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHQsbixpO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKHIpe3N3aXRjaChyLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuX2NoYW5uZWw/KHQ9dGhpcy5fY2hhbm5lbC5jb2RlYy5lbmNvZGVFbmRSb29tUEsoZSksbj1uZXcgT3IoYnJbYnIucnRjRW5kSW52aXRlXSx0LGUucm9vbUlkKSxbNCx0aGlzLl9jaGFubmVsLnNlbmQobildKTpbMixFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEXTtjYXNlIDE6cmV0dXJuIGk9ci5zZW50KCkuY29kZSx0aGlzLl9ydGNLVk1hbmFnZXIucmVzZXQoKSxbMixpXX19KSl9KSl9LHQucHJvdG90eXBlLmJpbmRSVENSb29tRm9yQ2hhdHJvb209ZnVuY3Rpb24oZSl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciB0LG4saSxyO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKHMpe3N3aXRjaChzLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuX2NoYW5uZWw/KHQ9ZS5jaGF0Um9vbUlkLG49dGhpcy5fY2hhbm5lbC5jb2RlYy5lbmNvZGViaW5kUlRDUm9vbUZvckNoYXRyb29tKGUpLGk9bmV3IE9yKGJyW2JyLnNldFJ0Y1Jvb21JZF0sbix0KSxbNCx0aGlzLl9jaGFubmVsLnNlbmQoaSldKTpbMixFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEXTtjYXNlIDE6cmV0dXJuIHI9cy5zZW50KCksWzIsci5jb2RlXX19KSl9KSl9LHQucHJvdG90eXBlLmNhbGxFeHRyYT1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10sbj0xO248YXJndW1lbnRzLmxlbmd0aDtuKyspdFtuLTFdPWFyZ3VtZW50c1tuXTtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtjb2RlOkVlLkVYVFJBX01FVEhPRF9VTkRFRklORUR9KX0sdC5wcm90b3R5cGUuZ2V0Q29udmVyc2F0aW9uTGlzdFdpdGhBbGxDaGFubmVsPWZ1bmN0aW9uKCl7dGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIil9LHQucHJvdG90eXBlLmdldENvbnZlcnNhdGlvbkxpc3RXaXRoQWxsQ2hhbm5lbEJ5UGFnZT1mdW5jdGlvbihlLHQpe3Rocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpfSx0LnByb3RvdHlwZS5jbGVhckNvbnZlcnNhdGlvbnM9ZnVuY3Rpb24oKXt0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKX0sdC5wcm90b3R5cGUuc2V0VXNlclN0YXR1c0xpc3RlbmVyPWZ1bmN0aW9uKGUsdCl7dGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIil9LHQucHJvdG90eXBlLnNldFVzZXJTdGF0dXM9ZnVuY3Rpb24oZSl7dGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIil9LHQucHJvdG90eXBlLnN1YnNjcmliZVVzZXJTdGF0dXM9ZnVuY3Rpb24oZSl7dGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIil9LHQucHJvdG90eXBlLmdldFVzZXJTdGF0dXM9ZnVuY3Rpb24oZSl7dGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIil9LHQucHJvdG90eXBlLmFkZFRvQmxhY2tsaXN0PWZ1bmN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpfSx0LnByb3RvdHlwZS5yZW1vdmVGcm9tQmxhY2tsaXN0PWZ1bmN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpfSx0LnByb3RvdHlwZS5nZXRCbGFja2xpc3Q9ZnVuY3Rpb24oKXt0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKX0sdC5wcm90b3R5cGUuZ2V0QmxhY2tsaXN0U3RhdHVzPWZ1bmN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpfSx0LnByb3RvdHlwZS5pbnNlcnRNZXNzYWdlPWZ1bmN0aW9uKGUsdCxuKXt0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKX0sdC5wcm90b3R5cGUuZGVsZXRlTWVzc2FnZXM9ZnVuY3Rpb24oZSl7dGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIil9LHQucHJvdG90eXBlLmRlbGV0ZU1lc3NhZ2VzQnlUaW1lc3RhbXA9ZnVuY3Rpb24oZSx0LG4saSxyKXt0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKX0sdC5wcm90b3R5cGUuY2xlYXJNZXNzYWdlcz1mdW5jdGlvbihlLHQsbil7dGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIil9LHQucHJvdG90eXBlLmdldE1lc3NhZ2U9ZnVuY3Rpb24oZSl7dGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIil9LHQucHJvdG90eXBlLnNldE1lc3NhZ2VDb250ZW50PWZ1bmN0aW9uKGUsdCxuKXt0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKX0sdC5wcm90b3R5cGUuc2V0TWVzc2FnZVNlYXJjaEZpZWxkPWZ1bmN0aW9uKGUsdCxuKXt0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKX0sdC5wcm90b3R5cGUuc2VhcmNoQ29udmVyc2F0aW9uQnlDb250ZW50PWZ1bmN0aW9uKGUsdCxuLGkpe3Rocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpfSx0LnByb3RvdHlwZS5zZWFyY2hNZXNzYWdlQnlDb250ZW50PWZ1bmN0aW9uKGUsdCxuLGkscixzKXt0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKX0sdC5wcm90b3R5cGUuZ2V0VW5yZWFkTWVudGlvbmVkTWVzc2FnZXM9ZnVuY3Rpb24oZSx0KXt0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKX0sdC5wcm90b3R5cGUuc2V0TWVzc2FnZVNlbnRTdGF0dXM9ZnVuY3Rpb24oZSx0KXt0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKX0sdC5wcm90b3R5cGUuc2V0TWVzc2FnZVJlY2VpdmVkU3RhdHVzPWZ1bmN0aW9uKGUsdCl7dGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIil9LHQucHJvdG90eXBlLmNsZWFyVW5yZWFkQ291bnRCeVRpbWVzdGFtcD1mdW5jdGlvbihlLHQsbixpKXt0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKX0sdC5wcm90b3R5cGUuZ2V0Q29udmVyc2F0aW9uTm90aWZpY2F0aW9uU3RhdHVzPWZ1bmN0aW9uKGUsdCxuKXt2YXIgaT10aGlzLl9jb252ZXJzYXRpb25NYW5hZ2VyLmdldChlLHQsbik7cmV0dXJuIGk/UHJvbWlzZS5yZXNvbHZlKHtjb2RlOkVlLlNVQ0NFU1MsZGF0YTppLm5vdGlmaWNhdGlvblN0YXR1c30pOlByb21pc2UucmVzb2x2ZSh7Y29kZTpFZS5DT05WRVJfR0VUX0VSUk9SfSl9LHQucHJvdG90eXBlLmdldFJlbW90ZUhpc3RvcnlNZXNzYWdlcz1mdW5jdGlvbihlLHQsbixpLHIscyl7cmV0dXJuIHRoaXMuZ2V0SGlzdG9yeU1lc3NhZ2UoZSx0LG4saSxyLHMpfSx0fShHcikseXM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuX2NvbnRleHQ9ZX1yZXR1cm4gZS5wcm90b3R5cGUuX19nZXRDb250ZXh0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbnRleHR9LGUucHJvdG90eXBlLmdldE5hdmlJbmZvPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbnRleHQuZ2V0SW5mb0Zyb21DYWNoZSgpfSxlLnByb3RvdHlwZS5nZXRDb3JlVmVyc2lvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb250ZXh0LmNvcmVWZXJzaW9ufSxlLnByb3RvdHlwZS5nZXRBUElWZXJzaW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbnRleHQuYXBpVmVyc2lvbn0sZS5wcm90b3R5cGUuZ2V0QXBwa2V5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbnRleHQuYXBwa2V5fSxlLnByb3RvdHlwZS5nZXRDdXJyZW50SWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29udGV4dC5nZXRDdXJyZW50VXNlcklkKCl9LGUucHJvdG90eXBlLmdldENvbm5lY3Rpb25TdGF0dXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29udGV4dC5nZXRDb25uZWN0aW9uU3RhdHVzKCl9LGUucHJvdG90eXBlLmdldERldmljZUlkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbnRleHQuZ2V0RGV2aWNlSWQoKX0sZS5wcm90b3R5cGUuc2VuZE1lc3NhZ2U9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB0aGlzLl9jb250ZXh0LnNlbmRNZXNzYWdlKGUsdCxuKX0sZS5wcm90b3R5cGUucmVnaXN0ZXJNZXNzYWdlVHlwZT1mdW5jdGlvbihlLHQsbixpKXt2b2lkIDA9PT1pJiYoaT1bXSksdGhpcy5fY29udGV4dC5yZWdpc3Rlck1lc3NhZ2VUeXBlKGUsdCxuLGkpfSxlLnByb3RvdHlwZS5nZXRTZXJ2ZXJUaW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbnRleHQuZ2V0U2VydmVyVGltZSgpfSxlLnByb3RvdHlwZS5nZXRSVENKb2luZWRVc2VySW5mbz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fY29udGV4dC5nZXRSVENKb2luZWRVc2VySW5mbyhlKX0sZX0oKSxtcz1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7cmV0dXJuIG51bGwhPT1lJiZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gTih0LGUpLHQucHJvdG90eXBlLmdldE5hdmlJbmZvPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbnRleHQuZ2V0SW5mb0Zyb21DYWNoZSgpfSx0LnByb3RvdHlwZS5qb2luUlRDUm9vbT1mdW5jdGlvbihlLHQsbixpLHIscyl7cmV0dXJuIHRoaXMuX2NvbnRleHQuam9pblJUQ1Jvb20oZSx0LG4saSxyLHMpfSx0LnByb3RvdHlwZS5xdWl0UlRDUm9vbT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fY29udGV4dC5xdWl0UlRDUm9vbShlKX0sdC5wcm90b3R5cGUucnRjUGluZz1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHRoaXMuX2NvbnRleHQucnRjUGluZyhlLHQsbil9LHQucHJvdG90eXBlLmdldFJUQ1Jvb21JbmZvPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9jb250ZXh0LmdldFJUQ1Jvb21JbmZvKGUpfSx0LnByb3RvdHlwZS5nZXRSVENVc2VySW5mb0xpc3Q9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2NvbnRleHQuZ2V0UlRDVXNlckluZm9MaXN0KGUpfSx0LnByb3RvdHlwZS5nZXRSVENVc2VySW5mbz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fY29udGV4dC5nZXRSVENVc2VySW5mbyhlKX0sdC5wcm90b3R5cGUuc2V0UlRDVXNlckluZm89ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB0aGlzLl9jb250ZXh0LnNldFJUQ1VzZXJJbmZvKGUsdCxuKX0sdC5wcm90b3R5cGUucmVtb3ZlUlRDVXNlckluZm89ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5fY29udGV4dC5yZW1vdmVSVENVc2VySW5mbyhlLHQpfSx0LnByb3RvdHlwZS5zZXRSVENEYXRhPWZ1bmN0aW9uKGUsdCxuLGkscixzKXtyZXR1cm4gdGhpcy5fY29udGV4dC5zZXRSVENEYXRhKGUsdCxuLGkscixzKX0sdC5wcm90b3R5cGUuc2V0UlRDVG90YWxSZXM9ZnVuY3Rpb24oZSx0LG4saSxyKXtyZXR1cm4gdGhpcy5fY29udGV4dC5zZXRSVENUb3RhbFJlcyhlLHQsbixpLHIpfSx0LnByb3RvdHlwZS5zZXRSVENDRE5VcmlzPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdGhpcy5fY29udGV4dC5zZXRSVENDRE5VcmlzKGUsdCxuKX0sdC5wcm90b3R5cGUuZ2V0UlRDRGF0YT1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gdGhpcy5fY29udGV4dC5nZXRSVENEYXRhKGUsdCxuLGkpfSx0LnByb3RvdHlwZS5yZW1vdmVSVENEYXRhPWZ1bmN0aW9uKGUsdCxuLGkscil7cmV0dXJuIHRoaXMuX2NvbnRleHQucmVtb3ZlUlRDRGF0YShlLHQsbixpLHIpfSx0LnByb3RvdHlwZS5zZXRSVENPdXREYXRhPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiB0aGlzLl9jb250ZXh0LnNldFJUQ091dERhdGEoZSx0LG4saSl9LHQucHJvdG90eXBlLmdldFJUQ091dERhdGE9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5fY29udGV4dC5nZXRSVENPdXREYXRhKGUsdCl9LHQucHJvdG90eXBlLmdldFJUQ1Rva2VuPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdGhpcy5fY29udGV4dC5nZXRSVENUb2tlbihlLHQsbil9LHQucHJvdG90eXBlLnNldFJUQ1N0YXRlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX2NvbnRleHQuc2V0UlRDU3RhdGUoZSx0KX0sdC5wcm90b3R5cGUuZ2V0UlRDVXNlckxpc3Q9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2NvbnRleHQuZ2V0UlRDVXNlckxpc3QoZSl9LHQucHJvdG90eXBlLmpvaW5MaXZpbmdSb29tQXNBdWRpZW5jZT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHRoaXMuX2NvbnRleHQuam9pbkxpdmluZ1Jvb21Bc0F1ZGllbmNlKGUsdCxuKX0sdC5wcm90b3R5cGUucXVpdExpdmluZ1Jvb21Bc0F1ZGllbmNlPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9jb250ZXh0LnF1aXRMaXZpbmdSb29tQXNBdWRpZW5jZShlKX0sdC5wcm90b3R5cGUucnRjSWRlbnRpdHlDaGFuZ2U9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB0aGlzLl9jb250ZXh0LnJ0Y0lkZW50aXR5Q2hhbmdlKGUsdCxuKX0sdC5wcm90b3R5cGUucmVxdWVzdFJvb21QSz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fY29udGV4dC5yZXF1ZXN0Um9vbVBLKGUpfSx0LnByb3RvdHlwZS5jYW5jZWxSb29tUEs9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2NvbnRleHQuY2FuY2VsUm9vbVBLKGUpfSx0LnByb3RvdHlwZS5yZXNwb25zZVJvb21QSz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fY29udGV4dC5yZXNwb25zZVJvb21QSyhlKX0sdC5wcm90b3R5cGUuZW5kUm9vbVBLPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9jb250ZXh0LmVuZFJvb21QSyhlKX0sdH0oeXMpLHZzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe31yZXR1cm4gZS5jb21wcmVzcz1mdW5jdGlvbihlKXtmb3IodmFyIHQ9dGhpcyxuPXt9LGk9MDtpPGUubGVuZ3RoLTE7aSsrKXt2YXIgcj1lLmNoYXJBdChpKStlLmNoYXJBdChpKzEpO24uaGFzT3duUHJvcGVydHkocik/bltyXS5wdXNoKGkpOm5bcl09W2ldfWZvcih2YXIgcz1bXSxvPVtdLGE9ZnVuY3Rpb24oKXtpZihvLmxlbmd0aD4wKXt2YXIgZT1vLmpvaW4oXCJcIik7aWYobz1bXSxlLmxlbmd0aD4yNil7dmFyIG49dC5udW1iZXJFbmNvZGUoZS5sZW5ndGgpLGk9U3RyaW5nLmZyb21DaGFyQ29kZSh0LmRhdGFUeXBlLk5vcm1hbEV4dHxuLmxlbmd0aCk7cy5wdXNoKGkrbil9ZWxzZXt2YXIgcj1TdHJpbmcuZnJvbUNoYXJDb2RlKHQuZGF0YVR5cGUuTm9ybWFsfGUubGVuZ3RoKTtzLnB1c2gocil9cy5wdXNoKGUpfX0sdT0wO3U8ZS5sZW5ndGg7KXt2YXIgYz10LmluZGV4T2YobixlLHUpO2lmKGMubGVuZ3RoPDIpby5wdXNoKGUuY2hhckF0KHUrKykpO2Vsc2UgaWYoYy5sZW5ndGg8NClvLnB1c2goZS5zdWJzdHIodSxjLmxlbmd0aCkpLHUrPWMubGVuZ3RoO2Vsc2V7dmFyIGg9dC5udW1iZXJFbmNvZGUodS1jLm9mZnNldCksbD10Lm51bWJlckVuY29kZShjLmxlbmd0aCk7aWYoaC5sZW5ndGgrbC5sZW5ndGg+PWMubGVuZ3RoKW8ucHVzaChlLnN1YnN0cih1LGMubGVuZ3RoKSksdSs9Yy5sZW5ndGg7ZWxzZXthKCk7dmFyIGQ9U3RyaW5nLmZyb21DaGFyQ29kZSh0LmRhdGFUeXBlLkNvbXByZXNzZWR8aC5sZW5ndGg8PDJ8bC5sZW5ndGgpO3MucHVzaChkK2grbCksdSs9Yy5sZW5ndGh9fX1hKCk7dmFyIGY9dC5udW1iZXJFbmNvZGUoZS5sZW5ndGgpLHA9U3RyaW5nLmZyb21DaGFyQ29kZSh0LmRhdGFUeXBlLlRhaWx8Zi5sZW5ndGgpO3JldHVybiBzLnB1c2gocCtmKSxzLmpvaW4oXCJcIil9LGUudW5jb21wcmVzcz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLG49MCxpPVwiXCI7ZTpkb3t2YXIgcj1lLmNoYXJDb2RlQXQobisrKSxzPXImdC5kYXRhVHlwZS5NYXJrLG89MTUmcixhPXZvaWQgMDtzd2l0Y2gocyl7Y2FzZSB0LmRhdGFUeXBlLkNvbXByZXNzZWQ6dmFyIHU9bz4+MixjPTMmbztpZigwPT09dXx8MD09PWMpdGhyb3cgbmV3IEVycm9yKFwiRGF0YSBwYXJzaW5nIGVycm9yLGF0IFwiK24pO3ZhciBoPXQubnVtYmVyRGVjb2RlKGUuc3Vic3RyKG4sdSkpLGw9dC5udW1iZXJEZWNvZGUoZS5zdWJzdHIobis9dSxjKSk7aWYoKGg9aS5sZW5ndGgtaCkrbD5pLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoXCJEYXRhIHBhcnNpbmcgZXJyb3IsYXQgXCIrbik7bis9YyxpKz1pLnN1YnN0cihoLGwpO2JyZWFrO2Nhc2UgdC5kYXRhVHlwZS5UYWlsOmlmKChhPXQubnVtYmVyRGVjb2RlKGUuc3Vic3RyKG4sbykpKSE9PWkubGVuZ3RoKXRocm93IGNvbnNvbGUubG9nKGkubGVuZ3RoKSxjb25zb2xlLmxvZyhhKSxuZXcgRXJyb3IoXCJEYXRhIHBhcnNpbmcgZXJyb3IsYXQgXCIrbik7bis9bzticmVhayBlO2Nhc2UgdC5kYXRhVHlwZS5Ob3JtYWxFeHQ6YT10Lm51bWJlckRlY29kZShlLnN1YnN0cihuLG8pKSxpKz1lLnN1YnN0cihuKz1vLGEpLG4rPWE7YnJlYWs7Y2FzZSB0LmRhdGFUeXBlLk5vcm1hbDppKz1lLnN1YnN0cihuLG8pLG4rPW87YnJlYWs7Y2FzZSB0LmRhdGFUeXBlLk1hcms6aWYobz4xMCl0aHJvdyBuZXcgRXJyb3IoXCJEYXRhIHBhcnNpbmcgZXJyb3IsYXQgXCIrbik7aSs9ZS5zdWJzdHIobiwxNitvKSxuKz0xNitvO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKFwiRGF0YSBwYXJzaW5nIGVycm9yLGF0IFwiK24rXCIgaGVhZGVyOlwiK3MpfX13aGlsZShuPGUubGVuZ3RoKTtyZXR1cm4gaX0sZS5pbmRleE9mPWZ1bmN0aW9uKGUsdCxuKXt2YXIgaT17bGVuZ3RoOjAsb2Zmc2V0Oi0xfTtpZih0Lmxlbmd0aCxuPj10Lmxlbmd0aC0xKXJldHVybiBpO3ZhciByPWVbdC5jaGFyQXQobikrdC5jaGFyQXQobisxKV07aWYoclswXT09PW4pcmV0dXJuIGk7Zm9yKHZhciBzPXQubGVuZ3RoLW4sbz0wLGE9ci5sZW5ndGg7bzxhO28rKyl7dmFyIHU9cltvXSxjPW4tdTtpZighKGM+dGhpcy5tYXgpKXt2YXIgaD1NYXRoLm1pbihzLGMpO2lmKGg8PWkubGVuZ3RoKWJyZWFrO2lmKCEoaS5sZW5ndGg+MiYmdC5jaGFyQXQodStpLmxlbmd0aC0xKSE9PXQuY2hhckF0KG4raS5sZW5ndGgtMSkpKXtmb3IodmFyIGw9MixkPWw7ZDxoJiZ0LmNoYXJBdCh1K2QpPT09dC5jaGFyQXQobitkKTtkKyspbCsrO2w+PWkubGVuZ3RoJiYoaS5sZW5ndGg9bCxpLm9mZnNldD11KX19fXJldHVybiBpfSxlLm51bWJlckVuY29kZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLG49W10saT0wO2Rve2k9ZSV0LnNjYWxlLG4ucHVzaCh0LmNoYXJzLmNoYXJBdChpKSksZT0oZS1pKS90LnNjYWxlfXdoaWxlKGU+MCk7cmV0dXJuIG4uam9pbihcIlwiKX0sZS5udW1iZXJEZWNvZGU9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTAsbj0wLGk9ZS5sZW5ndGgtMTtpPj0wO2ktLSl7aWYoLTE9PT0obj10aGlzLmNoYXJzLmluZGV4T2YoZS5jaGFyQXQoaSkpKSl0aHJvdyBuZXcgRXJyb3IoJ2RlY29kZSBudW1iZXIgZXJyb3IsIGRhdGEgaXMgXCInK2UrJ1wiJyk7dD10KnRoaXMuc2NhbGUrbn1yZXR1cm4gdH0sZS5kYXRhVHlwZT17VGFpbDo0OCxDb21wcmVzc2VkOjY0LE5vcm1hbEV4dDo4MCxOb3JtYWw6OTYsTWFyazoxMTJ9LGUuY2hhcnM9XCIwMTIzNDU2Nzg5QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5elwiLGUuc2NhbGU9ZS5jaGFycy5sZW5ndGgsZS5tYXg9MjM4MzI3LGV9KCksRXM9MSxUcz0hMSxJcz1cInVuZGVmaW5lZFwiIT10eXBlb2YgbG9jYXRpb24mJlwiaHR0cHM6Ly9cIj09PWxvY2F0aW9uLnByb3RvY29sP1wiaHR0cHM6Ly9cIjpcImh0dHA6Ly9cIixDcz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5pbmZvPWUsdGhpcy5sb2dVcmw9XCJsb2djb2xsZWN0aW9uLnJvbmdodWIuY29tXCIsdGhpcy5sZXZlbD0xLHRoaXMuaXR2PTMwLHRoaXMudGltZXM9NSx0aGlzLmRldmljZUlkPVwiXCIsdGhpcy5kZXZpY2VJbmZvPVwiXCIsdGhpcy5sb2dTd2l0Y2g9MCx0aGlzLmxvZ1VybD1lLmxvZ1BvbGljeS51cmx8fHRoaXMubG9nVXJsLHRoaXMubGV2ZWw9ZS5sb2dQb2xpY3kubGV2ZWx8fHRoaXMubGV2ZWwsdGhpcy5pdHY9ZS5sb2dQb2xpY3kuaXR2fHx0aGlzLml0dix0aGlzLnRpbWVzPWUubG9nUG9saWN5LnRpbWVzfHx0aGlzLnRpbWVzLHRoaXMuZGV2aWNlSWQ9ZHMoZS5ydW50aW1lKSx0aGlzLmxvZ1N3aXRjaD1lLmxvZ1N3aXRjaDt2YXIgdD12dChlLnJ1bnRpbWUpO3RoaXMuZGV2aWNlSW5mbz10LnR5cGUrXCJ8XCIrdC52ZXJzaW9uK1wifFwiK3BlLnNlc3Npb25JZCx0aGlzLnN0YXJ0UmVwb3J0KCl9cmV0dXJuIGUuaW5pdD1mdW5jdGlvbih0KXtyZXR1cm4gVHM9ITAsZS5faW5zdGFuY2V8fChlLl9pbnN0YW5jZT1uZXcgZSh0KSksZS5faW5zdGFuY2V9LGUuZ2V0SW5zdGFuY2U9ZnVuY3Rpb24oKXtyZXR1cm4gZS5faW5zdGFuY2V9LGUucHJvdG90eXBlLnN0YXJ0UmVwb3J0PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztpZih0aGlzLmxvZ1N3aXRjaCYmVHMpe3ZhciB0PXRoaXMuaXR2Kk1hdGgucG93KDIsRXMtMSk7RXM8dGhpcy50aW1lcyYmRXMrKyxzZXRUaW1lb3V0KChmdW5jdGlvbigpe2UucmVwb3J0UmVhbHRpbWVMb2coKX0pLDFlMyp0KX19LGUucHJvdG90eXBlLnJlcG9ydFJlYWx0aW1lTG9nPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXBlLnJlYWxUaW1lTG9nTGlzdC5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiB0LmxldmVsPD1lLmxldmVsfSkpO2lmKDAhPT10Lmxlbmd0aCl7dmFyIG49dnMuY29tcHJlc3ModC5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlLmNvbnRlbnR9KSkuam9pbihcIlwiKSksaT1cIlwiK0lzK3RoaXMubG9nVXJsK1wiP3ZlcnNpb249XCIrdGhpcy5pbmZvLnZlcnNpb24rXCImYXBwa2V5PVwiK3RoaXMuaW5mby5hcHBrZXkrXCImdXNlcklkPVwiK3RoaXMuaW5mby51c2VySWQrXCImZGV2aWNlSWQ9XCIrdGhpcy5kZXZpY2VJZCtcIiZkZXZpY2VJbmZvPVwiK3RoaXMuZGV2aWNlSW5mbytcIiZwbGF0Zm9ybT1XZWJcIjt0aGlzLmluZm8ucnVudGltZS5odHRwUmVxKHttZXRob2Q6XCJQT1NUXCIsdXJsOmksYm9keTpufSkudGhlbigoZnVuY3Rpb24odCl7Z2UuX19jbGVhclJlYWxUaW1lTG9nKCksZ2UuZGVidWcoXCJyZXBvcnQgcmVhbC10aW1lIGxvZyBzdWNjZXNzXCIpO3ZhciBuPXQuZGF0YTtuJiYobj1KU09OLnBhcnNlKG4pLGUuaXR2PW4ubmV4dFRpbWUsZS5sZXZlbD1uLmxldmVsLGUubG9nU3dpdGNoPW4ubG9nU3dpdGNoLEVzPTEpLGUuc3RhcnRSZXBvcnQoKX0pKS5jYXRjaCgoZnVuY3Rpb24odCl7Z2UuZGVidWcoXCJyZXBvcnQgcmVhbC10aW1lIGxvZyBlcnJvciAtPiBcIit0KSxlLnN0YXJ0UmVwb3J0KCl9KSl9ZWxzZSB0aGlzLnN0YXJ0UmVwb3J0KCl9LGUucHJvdG90eXBlLnJlcG9ydEZ1bGxMb2c9ZnVuY3Rpb24oZSl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciB0LG4saSxyLHMsbyxhLHUsYyxoLGw9dGhpcztyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihkKXtzd2l0Y2goZC5sYWJlbCl7Y2FzZSAwOnJldHVybiB0PWUuc3RhcnRUaW1lLG49ZS5lbmRUaW1lLGk9ZS5wbGF0Zm9ybSxyPWUubG9nSWQscz1lLnVyaSxvPXEuZ2V0SW5zdGFuY2UoKSxnZS5kZWJ1ZyhcInJlY2VpdmVkIHJlcG9ydCBsb2cgbXNnLCBcIitpLnRvTG93ZXJDYXNlKCksbyksXCJ3ZWJcIj09PWkudG9Mb3dlckNhc2UoKSYmbz90Pm4/KGdlLndhcm4oXCJyZXBvcnQgZXJyb3I6IFRoZSBzdGFydCB0aW1lKFwiK3QrXCIpIGNhbm5vdCBiZSBncmVhdGVyIHRoYW4gdGhlIGVuZCB0aW1lKFwiK3QrXCIpXCIpLFsyXSk6WzQsZ2UuX19pbnNlcnRMb2dJbnRvRGF0YWJhc2UoKV06WzJdO2Nhc2UgMTpyZXR1cm4gZC5zZW50KCksWzQsby5nZXRSYW5nZURhdGEoQixcInRpbWVcIix0LG4pXTtjYXNlIDI6cmV0dXJuIGE9KGE9ZC5zZW50KCkpLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIWUudXNlcklkfHxlLnVzZXJJZD09PWwuaW5mby51c2VySWR9KSksdT12cy5jb21wcmVzcyhhLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUuY29udGVudH0pKS5qb2luKFwiXCIpfHxcIm5vIGRhdGFcIiksNWUzLGM9MSwoaD1mdW5jdGlvbigpe2lmKCEoYz4zKSYmVHMpe3ZhciBlPXN8fGwubG9nVXJsLHQ9XCJcIitJcytlK1wiP3ZlcnNpb249XCIrbC5pbmZvLnZlcnNpb24rXCImYXBwa2V5PVwiK2wuaW5mby5hcHBrZXkrXCImdXNlcklkPVwiK2wuaW5mby51c2VySWQrXCImbG9nSWQ9XCIrcitcIiZkZXZpY2VJZD1cIitsLmRldmljZUlkK1wiJmRldmljZUluZm89XCIrbC5kZXZpY2VJbmZvK1wiJnBsYXRmb3JtPVdlYlwiLG49NWUzKihjLTEpO2MrKyxzZXRUaW1lb3V0KChmdW5jdGlvbigpe1RzJiZsLmluZm8ucnVudGltZS5odHRwUmVxKHt1cmw6dCxtZXRob2Q6XCJQT1NUXCIsYm9keTp1fSkudGhlbigoZnVuY3Rpb24oKXtnZS5kZWJ1ZyhcInJlcG9ydCBmdWxsIGxvZyBzdWNjZXNzIVwiKX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7aCgpLGdlLndhcm4oXCJyZXBvcnQgZnVsbCBsb2cgZXJyb3IgLT4gXCIrZSl9KSl9KSxuKX19KSgpLFsyXX19KSl9KSl9LGUucHJvdG90eXBlLmRpc3Ryb3k9ZnVuY3Rpb24oKXtFcz0xLFRzPSExfSxlfSgpO2Z1bmN0aW9uIFJzKGUpe3JldHVybiBPYmplY3QuYXNzaWduKHt9LGUpfXZhciBTcyxOcz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt2YXIgbjt0aGlzLl9ydW50aW1lPWUsdGhpcy5fdG9rZW49XCJcIix0aGlzLl9wbHVnaW5Db250ZXh0UXVldWU9W10sdGhpcy5fcGx1Z2luSW5zdGFuc2VNYXA9e30sdGhpcy5jb3JlVmVyc2lvbj1cIjUuMi4xXCIsdGhpcy5fdmVyc2lvbkluZm89e30sdGhpcy5fdHlwaW5nSW5mbz17fSx0aGlzLl9pc0ludGVybmFsQ29ubmVjdGVkPSExLHRoaXMuX2Nvbm5lY3Rpb25TdGF0dXM9SWUuRElTQ09OTkVDVEVELHRoaXMuX2NhblJlZGlyZWN0Q29ubmVjdD0hMSx0aGlzLl93YXRjaGVyPXttZXNzYWdlOnZvaWQgMCxiYXRjaE1lc3NhZ2U6dm9pZCAwLGNvbnZlcnNhdGlvblN0YXRlOnZvaWQgMCxjaGF0cm9vbVN0YXRlOnZvaWQgMCxjb25uZWN0aW9uU3RhdGU6dm9pZCAwLHJ0Y0lubmVyV2F0Y2hlcjp2b2lkIDAsZXhwYW5zaW9uOnZvaWQgMCx0YWc6dm9pZCAwLGNvbnZlcnNhdGlvblRhZ0NoYW5nZWQ6dm9pZCAwLHB1bGxGaW5pc2hlZDp2b2lkIDAsb25Db25uZWN0aW5nOnZvaWQgMCxvbkNvbm5lY3RlZDp2b2lkIDAsb25EaXNjb25uZWN0OnZvaWQgMCxvblN1c3BlbmQ6dm9pZCAwLHJlYWRSZWNlaXB0UmVjZWl2ZWQ6dm9pZCAwLG1lc3NhZ2VSZWNlaXB0UmVxdWVzdDp2b2lkIDAsbWVzc2FnZVJlY2VpcHRSZXNwb25zZTp2b2lkIDAsdHlwaW5nU3RhdGU6dm9pZCAwLG1lc3NhZ2VCbG9ja2VkOnZvaWQgMCx1bHRyYUdyb3VwRW5hYmxlOnZvaWQgMCxvcGVyYXRlU3RhdHVzOnZvaWQgMCx1bHRyYUdyb3VwTWVzc2FnZUV4cGFuc2lvblVwZGF0ZWQ6dm9pZCAwLHVsdHJhR3JvdXBNZXNzYWdlTW9kaWZpZWQ6dm9pZCAwLHVsdHJhR3JvdXBNZXNzYWdlUmVjYWxsZWQ6dm9pZCAwfSx0aGlzLl90eXBpbmdJbnRlcm5hbFRpbWVyPS0xLHRoaXMuX3R5cGluZ0V4cGlyZVRpbWU9MmUzLHRoaXMuX3R5cGluZ0NoYW5nZWRMaXN0PVtdLHRoaXMuZ2V0Q2hhdFJvb21IaXN0b3J5TWVzc2FnZXM9dGhpcy5nZXRDaGF0cm9vbUhpc3RvcnlNZXNzYWdlcyx0aGlzLl9vcHRpb25zPU9iamVjdC5hc3NpZ24oe30sdCksdGhpcy5hcHBrZXk9dGhpcy5fb3B0aW9ucy5hcHBrZXksdGhpcy5hcGlWZXJzaW9uPXRoaXMuX29wdGlvbnMuYXBpVmVyc2lvbix0aGlzLl9vcHRpb25zLnR5cGluZ0V4cGlyZVRpbWUmJih0aGlzLl9vcHRpb25zLnR5cGluZ0V4cGlyZVRpbWU8MmUzP3RoaXMuX3R5cGluZ0V4cGlyZVRpbWU9MmUzOnRoaXMuX29wdGlvbnMudHlwaW5nRXhwaXJlVGltZT42ZTM/dGhpcy5fdHlwaW5nRXhwaXJlVGltZT02ZTM6dGhpcy5fdHlwaW5nRXhwaXJlVGltZT10aGlzLl9vcHRpb25zLnR5cGluZ0V4cGlyZVRpbWUpLHRoaXMuX29wdGlvbnMubmF2aWdhdG9ycz10aGlzLl9vcHRpb25zLm5hdmlnYXRvcnMuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4vXmh0dHBzPzpcXC9cXC8vLnRlc3QoZSl9KSksdGhpcy5fb3B0aW9ucy5uYXZpZ2F0b3JzPXRoaXMuX29wdGlvbnMubmF2aWdhdG9ycy5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlLnJlcGxhY2UoL1xcLyQvZyxcIlwiKX0pKSwwPT09dGhpcy5fb3B0aW9ucy5uYXZpZ2F0b3JzLmxlbmd0aCYmKG49dGhpcy5fb3B0aW9ucy5uYXZpZ2F0b3JzKS5wdXNoLmFwcGx5KG4sdSk7dmFyIGk9e3N0YXR1czp0aGlzLl9jb25uZWN0aW9uU3RhdHVzTGlzdGVuZXIuYmluZCh0aGlzKSxiYXRjaE1lc3NhZ2U6dGhpcy5fYmF0Y2hNZXNzYWdlUmVjZWl2ZXIuYmluZCh0aGlzKSxjaGF0cm9vbTp0aGlzLl9jaGF0cm9vbUluZm9MaXN0ZW5lci5iaW5kKHRoaXMpLGNvbnZlcnNhdGlvbjp0aGlzLl9jb252ZXJzYXRpb25JbmZvTGlzdGVuZXIuYmluZCh0aGlzKSxleHBhbnNpb246dGhpcy5fZXhwYW5zaW9uSW5mb0xpc3RlbmVyLmJpbmQodGhpcyksdGFnOnRoaXMuX3RhZ0xpc3RlbmVyLmJpbmQodGhpcyksY29udmVyc2F0aW9uVGFnOnRoaXMuX2NvbnZlcnNhdGlvblRhZ0xpc3RlbmVyLmJpbmQodGhpcyksb25SVENEYXRhQ2hhbmdlOnRoaXMuX3J0Y0RhdGFDaGFuZ2UuYmluZCh0aGlzKSxwdWxsRmluaXNoZWQ6dGhpcy5fcHVsbEZpbmlzaGVkTGlzdGVuZXIuYmluZCh0aGlzKSx1bHRyYUdyb3VwRW5hYmxlOnRoaXMuX3VsdHJhR3JvdXBFbmFibGVMaXN0ZW5lci5iaW5kKHRoaXMpLG9wZXJhdGVTdGF0dXM6dGhpcy5fb3BlcmF0ZVN0YXR1c0xpc3RlbmVyLmJpbmQodGhpcyksdWx0cmFHcm91cE1lc3NhZ2VFeHBhbnNpb25VcGRhdGVkOnRoaXMuX3VsdHJhR3JvdXBNZXNzYWdlRXhwYW5zaW9uVXBkYXRlZExpc3RlbmVyLmJpbmQodGhpcyksdWx0cmFHcm91cE1lc3NhZ2VNb2RpZmllZDp0aGlzLl91bHRyYUdyb3VwTWVzc2FnZU1vZGlmaWVkTGlzdGVuZXIuYmluZCh0aGlzKSx1bHRyYUdyb3VwTWVzc2FnZVJlY2FsbGVkOnRoaXMuX3VsdHJhR3JvdXBNZXNzYWdlUmVjYWxsZWRMaXN0ZW5lci5iaW5kKHRoaXMpfTt0aGlzLl9lbmdpbmU9bXQoKT9uZXcgUkNDcHBFbmdpbmUoZSxpLHRoaXMuX29wdGlvbnMpOm5ldyBfcyhlLGksdGhpcy5fb3B0aW9ucyl9cmV0dXJuIGUuaW5pdD1mdW5jdGlvbih0LG4pe3JldHVybiBnZS5zZXRMb2dMZXZlbChuLmxvZ0xldmVsKSxnZS5zZXRMb2dTdGRvdXQobi5sb2dTdGRvdXQpLChuLmluZGV4REJTd2l0Y2h8fHJlKG4uaW5kZXhEQlN3aXRjaCkpJiZxLmluaXQoKSxnZS5kZWJ1ZyhcIkFQSUNvbnRleHQuaW5pdCA9PlwiLG4uYXBwa2V5LG4ubmF2aWdhdG9ycyksdGhpcy5fY29udGV4dD8oZ2UuZXJyb3IoXCJSZXBlYXQgaW5pdGlhbGl6ZSFcIiksdGhpcy5fY29udGV4dCk6KGdlLndhcm4oXCJSQ0VuZ2luZSBDb21taXQ6XCIsXCI1YWY0YzIwZmZiMTYxNDYxMzE5NTMyZjcwMGU3NjAzYzljZDk4OTNjXCIpLHRoaXMuX2NvbnRleHQ9bmV3IGUodCxuKSxnZS5fX2luc2VydExvZ0ludG9EYXRhYmFzZSgpLHRoaXMuX2NvbnRleHQpfSxlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLl9jb250ZXh0JiYodGhpcy5fY29udGV4dC5fZGVzdHJveSgpLHRoaXMuX2NvbnRleHQ9dm9pZCAwKX0sZS5wcm90b3R5cGUuaW5zdGFsbD1mdW5jdGlvbihlLHQpe2lmKHRoaXMuX3BsdWdpbkluc3RhbnNlTWFwW2UudGFnXSlyZXR1cm4gZ2Uud2FybihcIlJlcGVhdCBpbnN0YWxsIHBsdWdpbjogXCIrZS50YWcpLHRoaXMuX3BsdWdpbkluc3RhbnNlTWFwW2UudGFnXTt2YXIgbj1cIlJDUlRDXCI9PT1lLnRhZz9uZXcgbXModGhpcyk6bmV3IHlzKHRoaXMpLGk9bnVsbDt0cnl7aWYoIWUudmVyaWZ5KHRoaXMuX3J1bnRpbWUpKXJldHVybiBudWxsO2k9ZS5zZXR1cChuLHRoaXMuX3J1bnRpbWUsdCl9Y2F0Y2goZSl7Z2UuZXJyb3IoXCJpbnN0YWxsIHBsdWdpbiBlcnJvciFcXG5cIixlKX1yZXR1cm5bXCJSQ1JUQ1wiLFwiUkNDYWxsXCJdLmluY2x1ZGVzKGUudGFnKSYmZS52ZXJzaW9uJiZlLm5hbWUmJih0aGlzLl92ZXJzaW9uSW5mb1tlLm5hbWVdPWUudmVyc2lvbiksaSYmdGhpcy5fcGx1Z2luQ29udGV4dFF1ZXVlLnB1c2gobiksaSYmKHRoaXMuX3BsdWdpbkluc3RhbnNlTWFwW2UudGFnXT1pKSxpfSxlLnByb3RvdHlwZS5faGFuZGxlUmVkaXJlY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKG4pe3N3aXRjaChuLmxhYmVsKXtjYXNlIDA6cmV0dXJuIGdlLmRlYnVnKFwiX2hhbmRsZVJlZGlyY3RcIix0aGlzLl90b2tlbiksWzQsdGhpcy5jb25uZWN0KHRoaXMuX3Rva2VuLCEwKV07Y2FzZSAxOnJldHVybihlPW4uc2VudCgpLmNvZGUpIT09RWUuU1VDQ0VTUyYmdGhpcy5fY2FuUmVkaXJlY3RDb25uZWN0JiYodGhpcy5faGFuZGxlU3VzcGVuZChlKSxzZXRUaW1lb3V0KChmdW5jdGlvbigpe3QuX2hhbmRsZVJlZGlyZWN0KCl9KSw1ZTMpKSxbMl19fSkpfSkpfSxlLnByb3RvdHlwZS5fY29ubmVjdGlvblN0YXR1c0xpc3RlbmVyPWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihuKXtyZXR1cm4gZT09PUllLlJFRElSRUNUPyh0aGlzLl9jYW5SZWRpcmVjdENvbm5lY3Q9ITAsdGhpcy5faGFuZGxlU3VzcGVuZChlKSx0aGlzLl9oYW5kbGVSZWRpcmVjdCgpKTplPT09SWUuQkxPQ0tFRHx8ZT09PUllLktJQ0tFRF9PRkZMSU5FX0JZX09USEVSX0NMSUVOVHx8ZT09PUllLkRJU0NPTk5FQ1RfQllfU0VSVkVSPyh0aGlzLl9jYW5SZWRpcmVjdENvbm5lY3Q9ITEsdGhpcy5faGFuZGxlRGlzY29ubmVjdChlKSk6ZT09PUllLkNPTk5FQ1RJTkc/dGhpcy5faGFuZGxlQ29ubmVjdGluZygpOmU9PT1JZS5DT05ORUNURUQ/dGhpcy5faGFuZGxlQ29ubmVjdGVkKCk6ZT09PUllLkRJU0NPTk5FQ1RFRD90aGlzLl9oYW5kbGVEaXNjb25uZWN0KGUpOmU9PT1JZS5ORVRXT1JLX1VOQVZBSUxBQkxFJiZ0aGlzLl9oYW5kbGVTdXNwZW5kKGUpLHRoaXMuX2Nvbm5lY3Rpb25TdGF0dXM9ZSwobnVsbD09PSh0PXRoaXMuX3dhdGNoZXIucnRjSW5uZXJXYXRjaGVyKXx8dm9pZCAwPT09dD92b2lkIDA6dC5zdGF0dXMpJiZ0aGlzLl93YXRjaGVyLnJ0Y0lubmVyV2F0Y2hlci5zdGF0dXMoZSksdGhpcy5fcGx1Z2luQ29udGV4dFF1ZXVlLmZvckVhY2goKGZ1bmN0aW9uKHQpe3Qub25jb25uZWN0aW9uc3RhdGVjaGFuZ2UmJnQub25jb25uZWN0aW9uc3RhdGVjaGFuZ2UoZSl9KSksdGhpcy5fd2F0Y2hlci5jb25uZWN0aW9uU3RhdGUmJnRoaXMuX3dhdGNoZXIuY29ubmVjdGlvblN0YXRlKGUpLFsyXX0pKX0pKX0sZS5wcm90b3R5cGUuX2hhbmRsZUNvbm5lY3Rpbmc9ZnVuY3Rpb24oKXt0aGlzLl93YXRjaGVyLm9uQ29ubmVjdGluZyYmdGhpcy5fd2F0Y2hlci5vbkNvbm5lY3RpbmcoKX0sZS5wcm90b3R5cGUuX2hhbmRsZUNvbm5lY3RlZD1mdW5jdGlvbigpe3RoaXMuX3dhdGNoZXIub25Db25uZWN0ZWQmJnRoaXMuX3dhdGNoZXIub25Db25uZWN0ZWQoKX0sZS5wcm90b3R5cGUuX2hhbmRsZURpc2Nvbm5lY3Q9ZnVuY3Rpb24oZSl7dGhpcy5fd2F0Y2hlci5vbkRpc2Nvbm5lY3QmJnRoaXMuX3dhdGNoZXIub25EaXNjb25uZWN0KGUpfSxlLnByb3RvdHlwZS5faGFuZGxlU3VzcGVuZD1mdW5jdGlvbihlKXt0aGlzLl93YXRjaGVyLm9uU3VzcGVuZCYmdGhpcy5fd2F0Y2hlci5vblN1c3BlbmQoZSl9LGUucHJvdG90eXBlLl9tZXNzYWdlUmVjZWl2ZXI9ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIscztpZigoZS5jb252ZXJzYXRpb25UeXBlPT09ai5SVENfUk9PTXx8T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKFllLGUubWVzc2FnZVR5cGUpKSYmdGhpcy5fd2F0Y2hlci5ydGNJbm5lcldhdGNoZXImJnRoaXMuX3dhdGNoZXIucnRjSW5uZXJXYXRjaGVyLm1lc3NhZ2UpdGhpcy5fd2F0Y2hlci5ydGNJbm5lcldhdGNoZXIubWVzc2FnZShScyhlKSk7ZWxzZSBpZigtMT09PVtcIlJDOkNocm1Kb2luTnRmXCIsXCJSQzpDaHJtUXVpdE50ZlwiXS5pbmRleE9mKGUubWVzc2FnZVR5cGUpfHxcImZ1bmN0aW9uXCIhPXR5cGVvZiB0aGlzLl93YXRjaGVyLmNoYXRyb29tU3RhdGUpe2lmKFwiUkM6Q2hybU1lbUNoYW5nZVwiIT09ZS5tZXNzYWdlVHlwZSl7aWYoZS5tZXNzYWdlVHlwZSE9PVNlLlRZUElOR19TVEFUVVN8fCh0aGlzLl9hZGRUeXBpbmdJbmZvKFJzKGUpKSwhdGhpcy5fd2F0Y2hlci50eXBpbmdTdGF0ZSkpaWYoZS5tZXNzYWdlVHlwZSE9PVNlLkxPR19DT01NQU5EfHxcInJvbmdjbG91ZHN5c3RlbVwiIT09ZS5zZW5kZXJVc2VySWQpaWYoZS5tZXNzYWdlVHlwZSE9PVNlLklOVEVSQ0VQVCl7aWYoIXRoaXMuX3BsdWdpbkNvbnRleHRRdWV1ZS5zb21lKChmdW5jdGlvbih0KXtpZighdC5vbm1lc3NhZ2UpcmV0dXJuITE7dHJ5e3JldHVybiB0Lm9ubWVzc2FnZShScyhlKSl9Y2F0Y2goZSl7cmV0dXJuIGdlLmVycm9yKFwicGx1Z2luIGVycm9yID0+XCIsZSksITF9fSkpKWlmKHRoaXMuX3dhdGNoZXIubWVzc2FnZSYmdGhpcy5fd2F0Y2hlci5tZXNzYWdlKFJzKGUpLHQsbiksXCJSQzpSZWFkTnRmXCIhPT1lLm1lc3NhZ2VUeXBlKWlmKFwiUkM6UlJSZXFNc2dcIiE9PWUubWVzc2FnZVR5cGUpe2lmKFwiUkM6UlJSc3BNc2dcIiE9PWUubWVzc2FnZVR5cGUpcmV0dXJuIGU7dmFyIG89bnVsbD09PShzPWUuY29udGVudCl8fHZvaWQgMD09PXM/dm9pZCAwOnMucmVjZWlwdE1lc3NhZ2VEaWM7byYmQXJyYXkuaXNBcnJheShvW3RoaXMuX2VuZ2luZS5jdXJyZW50VXNlcklkXSkmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHRoaXMuX3dhdGNoZXIubWVzc2FnZVJlY2VpcHRSZXNwb25zZSYmdGhpcy5fd2F0Y2hlci5tZXNzYWdlUmVjZWlwdFJlc3BvbnNlKHtjb252ZXJzYXRpb25UeXBlOmUuY29udmVyc2F0aW9uVHlwZSx0YXJnZXRJZDplLnRhcmdldElkLGNoYW5uZWxJZDplLmNoYW5uZWxJZH0sZS5zZW5kZXJVc2VySWQsb1t0aGlzLl9lbmdpbmUuY3VycmVudFVzZXJJZF0pfWVsc2VcImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzLl93YXRjaGVyLm1lc3NhZ2VSZWNlaXB0UmVxdWVzdCYmdGhpcy5fd2F0Y2hlci5tZXNzYWdlUmVjZWlwdFJlcXVlc3Qoe2NvbnZlcnNhdGlvblR5cGU6ZS5jb252ZXJzYXRpb25UeXBlLHRhcmdldElkOmUudGFyZ2V0SWQsY2hhbm5lbElkOmUuY2hhbm5lbElkfSxlLmNvbnRlbnQubWVzc2FnZVVJZCxlLnNlbmRlclVzZXJJZCk7ZWxzZVwiZnVuY3Rpb25cIj09dHlwZW9mIHRoaXMuX3dhdGNoZXIucmVhZFJlY2VpcHRSZWNlaXZlZCYmdGhpcy5fd2F0Y2hlci5yZWFkUmVjZWlwdFJlY2VpdmVkKHtjb252ZXJzYXRpb25UeXBlOmUuY29udmVyc2F0aW9uVHlwZSx0YXJnZXRJZDplLnRhcmdldElkLGNoYW5uZWxJZDplLmNoYW5uZWxJZH0sZS5jb250ZW50Lm1lc3NhZ2VVSWQsZS5jb250ZW50Lmxhc3RNZXNzYWdlU2VuZFRpbWUpfWVsc2UgdGhpcy5fTWVzc2FnZUJsb2NrZWRMaXN0ZW5lcih7Y29udmVyc2F0aW9uVHlwZTplLmNvbnZlcnNhdGlvblR5cGUsdGFyZ2V0SWQ6ZS50YXJnZXRJZCxjaGFubmVsSWQ6ZS5jaGFubmVsSWR8fFwiXCIsYmxvY2tUeXBlOmUuY29udGVudC5pbnRlcmNlcHRUeXBlLGJsb2NrZWRNZXNzYWdlVUlkOmUuY29udGVudC5tc2dVSWR9KTtlbHNle3ZhciBhPWUuY29udGVudCx1PWEuc3RhcnRUaW1lLGM9YS5lbmRUaW1lLGg9YS5wbGF0Zm9ybSxsPWEubG9nSWQsZD1hLnVyaSxmPWEucGFja2FnZU5hbWUscD17c3RhcnRUaW1lOnBhcnNlSW50KHUpLGVuZFRpbWU6cGFyc2VJbnQoYykscGxhdGZvcm06aCxsb2dJZDpsLHVyaTpkLHBhY2thZ2VOYW1lOmZ9O251bGw9PT0ocj1Dcy5nZXRJbnN0YW5jZSgpKXx8dm9pZCAwPT09cnx8ci5yZXBvcnRGdWxsTG9nKHApfX1lbHNlIGlmKFwiZnVuY3Rpb25cIj09dHlwZW9mIHRoaXMuX3dhdGNoZXIuY2hhdHJvb21TdGF0ZSl7dmFyIGc9e307QXJyYXkuaXNBcnJheShlLmNvbnRlbnQudXNlckxpc3QpJiZlLmNvbnRlbnQudXNlckxpc3QuZm9yRWFjaCgoZnVuY3Rpb24oZSl7Z1tlLnVzZXJJZF09ZS5zdGF0dXN9KSksdGhpcy5fd2F0Y2hlci5jaGF0cm9vbVN0YXRlKHt1c2VyQ2hhbmdlOnt1c2VyczpnLGNoYXRyb29tSWQ6ZS50YXJnZXRJZH19KX19ZWxzZSB0aGlzLl93YXRjaGVyLmNoYXRyb29tU3RhdGUoe3VzZXJDaGFuZ2U6e3VzZXJzOihpPXt9LGlbZS5zZW5kZXJVc2VySWRdPVwiUkM6Q2hybVF1aXROdGZcIj09PWUubWVzc2FnZVR5cGU/RGUuUVVJVDpEZS5KT0lOLGkpLGNoYXRyb29tSWQ6ZS50YXJnZXRJZH19KX0sZS5wcm90b3R5cGUuX2JhdGNoTWVzc2FnZVJlY2VpdmVyPWZ1bmN0aW9uKGUsdCxuKXt2YXIgaT10aGlzLHI9W107ZS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgcz1pLl9tZXNzYWdlUmVjZWl2ZXIoZSx0LG4pO3MmJnIucHVzaChzKX0pKSxyLmxlbmd0aCYmdGhpcy5fd2F0Y2hlci5iYXRjaE1lc3NhZ2UmJnRoaXMuX3dhdGNoZXIuYmF0Y2hNZXNzYWdlKHIpfSxlLnByb3RvdHlwZS5fY2hhdHJvb21JbmZvTGlzdGVuZXI9ZnVuY3Rpb24oZSl7dGhpcy5fd2F0Y2hlci5jaGF0cm9vbVN0YXRlJiZ0aGlzLl93YXRjaGVyLmNoYXRyb29tU3RhdGUoZSl9LGUucHJvdG90eXBlLl9jb252ZXJzYXRpb25JbmZvTGlzdGVuZXI9ZnVuY3Rpb24oZSl7dGhpcy5fd2F0Y2hlci5jb252ZXJzYXRpb25TdGF0ZSYmdGhpcy5fd2F0Y2hlci5jb252ZXJzYXRpb25TdGF0ZShlKX0sZS5wcm90b3R5cGUuX2V4cGFuc2lvbkluZm9MaXN0ZW5lcj1mdW5jdGlvbihlKXt0aGlzLl93YXRjaGVyLmV4cGFuc2lvbiYmdGhpcy5fd2F0Y2hlci5leHBhbnNpb24oZSl9LGUucHJvdG90eXBlLl90YWdMaXN0ZW5lcj1mdW5jdGlvbigpe3RoaXMuX3dhdGNoZXIudGFnJiZ0aGlzLl93YXRjaGVyLnRhZygpfSxlLnByb3RvdHlwZS5fY29udmVyc2F0aW9uVGFnTGlzdGVuZXI9ZnVuY3Rpb24oKXt0aGlzLl93YXRjaGVyLmNvbnZlcnNhdGlvblRhZ0NoYW5nZWQmJnRoaXMuX3dhdGNoZXIuY29udmVyc2F0aW9uVGFnQ2hhbmdlZCgpfSxlLnByb3RvdHlwZS5fdHlwaW5nU3RhdHVzTGlzdGVuZXI9ZnVuY3Rpb24oZSl7dGhpcy5fd2F0Y2hlci50eXBpbmdTdGF0ZSYmdGhpcy5fd2F0Y2hlci50eXBpbmdTdGF0ZShlKX0sZS5wcm90b3R5cGUuX3B1bGxGaW5pc2hlZExpc3RlbmVyPWZ1bmN0aW9uKCl7dGhpcy5fd2F0Y2hlci5wdWxsRmluaXNoZWQmJnRoaXMuX3dhdGNoZXIucHVsbEZpbmlzaGVkKCl9LGUucHJvdG90eXBlLl9NZXNzYWdlQmxvY2tlZExpc3RlbmVyPWZ1bmN0aW9uKGUpe3RoaXMuX3dhdGNoZXIubWVzc2FnZUJsb2NrZWQmJnRoaXMuX3dhdGNoZXIubWVzc2FnZUJsb2NrZWQoZSl9LGUucHJvdG90eXBlLl91bHRyYUdyb3VwRW5hYmxlTGlzdGVuZXI9ZnVuY3Rpb24oZSl7dGhpcy5fd2F0Y2hlci51bHRyYUdyb3VwRW5hYmxlJiZ0aGlzLl93YXRjaGVyLnVsdHJhR3JvdXBFbmFibGUoZSl9LGUucHJvdG90eXBlLl9vcGVyYXRlU3RhdHVzTGlzdGVuZXI9ZnVuY3Rpb24oZSl7dGhpcy5fd2F0Y2hlci5vcGVyYXRlU3RhdHVzJiZ0aGlzLl93YXRjaGVyLm9wZXJhdGVTdGF0dXMoZSl9LGUucHJvdG90eXBlLl91bHRyYUdyb3VwTWVzc2FnZUV4cGFuc2lvblVwZGF0ZWRMaXN0ZW5lcj1mdW5jdGlvbihlKXt0aGlzLl93YXRjaGVyLnVsdHJhR3JvdXBNZXNzYWdlRXhwYW5zaW9uVXBkYXRlZCYmdGhpcy5fd2F0Y2hlci51bHRyYUdyb3VwTWVzc2FnZUV4cGFuc2lvblVwZGF0ZWQoZSl9LGUucHJvdG90eXBlLl91bHRyYUdyb3VwTWVzc2FnZU1vZGlmaWVkTGlzdGVuZXI9ZnVuY3Rpb24oZSl7dGhpcy5fd2F0Y2hlci51bHRyYUdyb3VwTWVzc2FnZU1vZGlmaWVkJiZ0aGlzLl93YXRjaGVyLnVsdHJhR3JvdXBNZXNzYWdlTW9kaWZpZWQoZSl9LGUucHJvdG90eXBlLl91bHRyYUdyb3VwTWVzc2FnZVJlY2FsbGVkTGlzdGVuZXI9ZnVuY3Rpb24oZSl7dGhpcy5fd2F0Y2hlci51bHRyYUdyb3VwTWVzc2FnZVJlY2FsbGVkJiZ0aGlzLl93YXRjaGVyLnVsdHJhR3JvdXBNZXNzYWdlUmVjYWxsZWQoZSl9LGUucHJvdG90eXBlLl9ydGNEYXRhQ2hhbmdlPWZ1bmN0aW9uKGUsdCl7dGhpcy5fcGx1Z2luQ29udGV4dFF1ZXVlLmZvckVhY2goKGZ1bmN0aW9uKG4pe24ub25ydGNkYXRhY2hhbmdlJiZuLm9ucnRjZGF0YWNoYW5nZShlLHQpfSkpfSxlLnByb3RvdHlwZS5hc3NpZ25XYXRjaGVyPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7T2JqZWN0LmtleXModGhpcy5fd2F0Y2hlcikuZm9yRWFjaCgoZnVuY3Rpb24obil7aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsbikpe3ZhciBpPWVbbl07dC5fd2F0Y2hlcltuXT1pZShpKXx8bmUoaSk/aTp2b2lkIDB9fSkpfSxlLnByb3RvdHlwZS5yZXNldFdhdGNoZXI9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO09iamVjdC5rZXlzKHRoaXMuX3dhdGNoZXIpLmZvckVhY2goKGZ1bmN0aW9uKHQpe2UuX3dhdGNoZXJbdF09dm9pZCAwfSkpfSxlLnByb3RvdHlwZS5fYWRkVHlwaW5nSW5mbz1mdW5jdGlvbihlKXt2YXIgdD1lLnNlbmRlclVzZXJJZCxuPWUuY29udmVyc2F0aW9uVHlwZSxpPWUudGFyZ2V0SWQscj1lLmNvbnRlbnQscz1lLmNoYW5uZWxJZCxvPXIudHlwaW5nQ29udGVudFR5cGUsYT1uK1wiI1wiK2krXCIjXCIrKHN8fFwiXCIpO3RoaXMuX3R5cGluZ0luZm9bYV18fCh0aGlzLl90eXBpbmdJbmZvW2FdPVtdKTt2YXIgdT10aGlzLl90eXBpbmdJbmZvW2FdLmZpbmRJbmRleCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUudXNlcklkPT09dH0pKTt1Pj0wJiZ0aGlzLl90eXBpbmdJbmZvW2FdW3VdLm1lc3NhZ2VUeXBlPT09bz90aGlzLl90eXBpbmdJbmZvW2FdW3VdLnRpbWVzdGFtcD1EYXRlLm5vdygpOih1Pj0wJiZ0aGlzLl90eXBpbmdJbmZvW2FdLnNwbGljZSh1LDEpLHRoaXMuX3R5cGluZ0luZm9bYV0ucHVzaCh7dXNlcklkOnQsbWVzc2FnZVR5cGU6byx0aW1lc3RhbXA6RGF0ZS5ub3coKX0pLHRoaXMuX3R5cGluZ0NoYW5nZWRMaXN0LmluY2x1ZGVzKGEpfHx0aGlzLl90eXBpbmdDaGFuZ2VkTGlzdC5wdXNoKGEpLHRoaXMuX3N0YXJ0Q2hlY2tUeXBpbmdJbmZvKCkpfSxlLnByb3RvdHlwZS5fc3RhcnRDaGVja1R5cGluZ0luZm89ZnVuY3Rpb24oKXt2YXIgZT10aGlzOy0xPT09dGhpcy5fdHlwaW5nSW50ZXJuYWxUaW1lciYmMCE9PU9iamVjdC5rZXlzKHRoaXMuX3R5cGluZ0luZm8pLmxlbmd0aCYmKHRoaXMuX3R5cGluZ0ludGVybmFsVGltZXI9c2V0SW50ZXJ2YWwoKGZ1bmN0aW9uKCl7Zm9yKHZhciB0IGluIGUuX3R5cGluZ0luZm8pe3ZhciBuPWUuX3R5cGluZ0luZm9bdF0ubGVuZ3RoO2UuX3R5cGluZ0luZm9bdF09ZS5fdHlwaW5nSW5mb1t0XS5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiBEYXRlLm5vdygpLXQudGltZXN0YW1wPGUuX3R5cGluZ0V4cGlyZVRpbWV9KSksZS5fdHlwaW5nSW5mb1t0XS5sZW5ndGg9PT1ufHxlLl90eXBpbmdDaGFuZ2VkTGlzdC5pbmNsdWRlcyh0KXx8ZS5fdHlwaW5nQ2hhbmdlZExpc3QucHVzaCh0KSwwPT09ZS5fdHlwaW5nSW5mb1t0XS5sZW5ndGgmJmRlbGV0ZSBlLl90eXBpbmdJbmZvW3RdfWlmKGUuX3R5cGluZ0NoYW5nZWRMaXN0Lmxlbmd0aD4wKXt2YXIgaT1lLl90eXBpbmdDaGFuZ2VkTGlzdC5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybntjb252ZXJzYXRpb25UeXBlOk51bWJlcih0LnNwbGl0KFwiI1wiKVswXSksdGFyZ2V0SWQ6dC5zcGxpdChcIiNcIilbMV0sY2hhbm5lbElkOnQuc3BsaXQoXCIjXCIpWzJdLGxpc3Q6ZS5fdHlwaW5nSW5mb1t0XXx8W119fSkpO2UuX3R5cGluZ1N0YXR1c0xpc3RlbmVyKGkpLGUuX3R5cGluZ0NoYW5nZWRMaXN0PVtdfTA9PT1PYmplY3Qua2V5cyhlLl90eXBpbmdJbmZvKS5sZW5ndGgmJihjbGVhckludGVydmFsKGUuX3R5cGluZ0ludGVybmFsVGltZXIpLGUuX3R5cGluZ0ludGVybmFsVGltZXI9LTEpfSksNTAwKSl9LGUucHJvdG90eXBlLmdldENvbm5lY3RlZFRpbWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZW5naW5lLmdldENvbm5lY3RlZFRpbWUoKX0sZS5wcm90b3R5cGUuZ2V0U2VydmVyVGltZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9lbmdpbmUuZ2V0U2VydmVyVGltZSgpfSxlLnByb3RvdHlwZS5nZXREZXZpY2VJZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9lbmdpbmUuZ2V0RGV2aWNlSWQoKX0sZS5wcm90b3R5cGUuZ2V0Q3VycmVudFVzZXJJZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9lbmdpbmUuY3VycmVudFVzZXJJZH0sZS5wcm90b3R5cGUuZ2V0Q29ubmVjdGlvblN0YXR1cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb25uZWN0aW9uU3RhdHVzfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJ0b2tlblwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdG9rZW59LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuY29ubmVjdD1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHZvaWQgMD09PXQmJih0PSExKSxNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgaSxyLHMsbyxhLHU7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oYyl7c3dpdGNoKGMubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5fY29ubmVjdGlvblN0YXR1cz09PUllLkNPTk5FQ1RFRD9bMix7Y29kZTpFZS5TVUNDRVNTLHVzZXJJZDp0aGlzLl9lbmdpbmUuY3VycmVudFVzZXJJZH1dOnRoaXMuX2Nvbm5lY3Rpb25TdGF0dXM9PT1JZS5DT05ORUNUSU5HP1syLHtjb2RlOkVlLkJJWl9FUlJPUl9DT05ORUNUSU5HfV06XCJzdHJpbmdcIiE9dHlwZW9mIGV8fDA9PT1lLmxlbmd0aD9bMix7Y29kZTpFZS5SQ19DT05OX1VTRVJfT1JfUEFTU1dEX0VSUk9SfV06KHRoaXMuX3Rva2VuPWUsaT1lLnNwbGl0KFwiQFwiKSxyPWlbMV0scz1yP3Iuc3BsaXQoXCI7XCIpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuL15odHRwcz86Ly50ZXN0KGUpP2U6XCJodHRwczovL1wiK2V9KSk6W10sWzQsdGhpcy5fZW5naW5lLm5hdmkuZ2V0SW5mbyh0aGlzLl9nZXRUb2tlbldpdGhvdXROYXZpKCkscyx0LHRoaXMuX29wdGlvbnMuY2hlY2tDQSldKTtjYXNlIDE6cmV0dXJuKG89Yy5zZW50KCkpPzE9PT0obnVsbD09bz92b2lkIDA6by50eXBlKT9bMix7Y29kZTpFZS5QQUNLQUdFX0VOVklST05NRU5UX0VSUk9SfV06KGE9SmUuZ2V0SW5mbygpLFs0LHRoaXMuX2VuZ2luZS5jb25uZWN0KHRoaXMuX2dldFRva2VuV2l0aG91dE5hdmkoKSxvLG4pXSk6WzIse2NvZGU6RWUuUkNfTkFWSV9SRVNPVVJDRV9FUlJPUn1dO2Nhc2UgMjpyZXR1cm4gdT1jLnNlbnQoKSxnZS5fX2luc2VydExvZ0ludG9EYXRhYmFzZSgpLHUhPT1DZS5SRURJUkVDVD9bMyw0XToodGhpcy5fY29ubmVjdGlvblN0YXR1cz1JZS5SRURJUkVDVCxbNCx0aGlzLmNvbm5lY3QoZSwhMCldKTtjYXNlIDM6cmV0dXJuWzIsYy5zZW50KCldO2Nhc2UgNDpyZXR1cm4gdT09PUVlLlNVQ0NFU1MmJihnZS5pbmZvKFwiY29ubmVjdCBzdWNjZXNzLCB1c2VySWQ6IFwiK3RoaXMuX2VuZ2luZS5jdXJyZW50VXNlcklkKSwxIT09KG51bGw9PW8/dm9pZCAwOm8udHlwZSkmJnRoaXMuX2VuZ2luZS5yZXBvcnRTREtJbmZvJiZ0aGlzLl9lbmdpbmUucmVwb3J0U0RLSW5mbyhhKSxDcy5pbml0KHtydW50aW1lOnRoaXMuX3J1bnRpbWUsbG9nU3dpdGNoOihudWxsPT1vP3ZvaWQgMDpvLmxvZ1N3aXRjaCl8fDAsbG9nUG9saWN5OkpTT04ucGFyc2UoKG51bGw9PW8/dm9pZCAwOm8ubG9nUG9saWN5KXx8XCJ7fVwiKSxhcHBrZXk6dGhpcy5hcHBrZXksdmVyc2lvbjp0aGlzLmFwaVZlcnNpb24sdXNlcklkOnRoaXMuX2VuZ2luZS5jdXJyZW50VXNlcklkfSkscGUuaW5pdCh0aGlzLl9lbmdpbmUuY3VycmVudFVzZXJJZCksdGhpcy5faXNJbnRlcm5hbENvbm5lY3RlZD0hMCksdSE9PUVlLlNVQ0NFU1N8fG10KCl8fDE9PT1vLm9wZW5VUyYmdGhpcy5fcHVsbFVzZXJTZXR0aW5ncygpLHUhPT1FZS5TVUNDRVNTJiYodGhpcy5fY29ubmVjdGlvblN0YXR1cz1JZS5DT05ORUNUSU9OX0NMT1NFRCksWzIse2NvZGU6dSx1c2VySWQ6dGhpcy5fZW5naW5lLmN1cnJlbnRVc2VySWR9XX19KSl9KSl9LGUucHJvdG90eXBlLl9wdWxsVXNlclNldHRpbmdzPWZ1bmN0aW9uKCl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGUpe3JldHVyblsyXX0pKX0pKX0sZS5wcm90b3R5cGUuZGlzY29ubmVjdD1mdW5jdGlvbigpe3ZhciBlO3JldHVybiB0aGlzLl9pc0ludGVybmFsQ29ubmVjdGVkPSExLGNsZWFySW50ZXJ2YWwodGhpcy5fdHlwaW5nSW50ZXJuYWxUaW1lciksdGhpcy5fdHlwaW5nSW50ZXJuYWxUaW1lcj0tMSx0aGlzLl90eXBpbmdJbmZvPXt9LG51bGw9PT0oZT1Dcy5nZXRJbnN0YW5jZSgpKXx8dm9pZCAwPT09ZXx8ZS5kaXN0cm95KCksZ2UuX19pbnNlcnRMb2dJbnRvRGF0YWJhc2UoKSxwZS5yZXNldCgpLHRoaXMuX2VuZ2luZS5kaXNjb25uZWN0KCksdGhpcy5fcGx1Z2luQ29udGV4dFF1ZXVlLmZvckVhY2goKGZ1bmN0aW9uKGUpe2lmKGUub25kaXNjb25uZWN0KXRyeXtlLm9uZGlzY29ubmVjdCgpfWNhdGNoKGUpe2dlLmVycm9yKFwicGx1Z2luIGVycm9yID0+XCIsZSl9fSkpLFByb21pc2UucmVzb2x2ZSgpfSxlLnByb3RvdHlwZS5yZWNvbm5lY3Q9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2lzSW50ZXJuYWxDb25uZWN0ZWQ/UHJvbWlzZS5yZXNvbHZlKHtjb2RlOkVlLkNBTl9OT1RfUkVDT05ORUNUfSk6dGhpcy5jb25uZWN0KHRoaXMuX2dldFRva2VuV2l0aG91dE5hdmkoKSwhMSxlKX0sZS5wcm90b3R5cGUuX2dldFRva2VuV2l0aG91dE5hdmk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdG9rZW4ucmVwbGFjZSgvQC4rJC8sXCJAXCIpfSxlLnByb3RvdHlwZS5nZXRJbmZvRnJvbUNhY2hlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VuZ2luZS5uYXZpLmdldEluZm9Gcm9tQ2FjaGUodGhpcy5fZ2V0VG9rZW5XaXRob3V0TmF2aSgpKX0sZS5wcm90b3R5cGUucmVnaXN0ZXJNZXNzYWdlVHlwZT1mdW5jdGlvbihlLHQsbixpLHIpe3ZvaWQgMD09PWkmJihpPVtdKSx2b2lkIDA9PT1yJiYocj0hMSksdGhpcy5fZW5naW5lLnJlZ2lzdGVyTWVzc2FnZVR5cGUoZSx0LG4saSxyKX0sZS5wcm90b3R5cGUuc2VuZE1lc3NhZ2U9ZnVuY3Rpb24oZSx0LG4saSl7aWYoZSE9PWouVUxUUkFfR1JPVVApe3ZhciByPXRoaXMuZ2V0SW5mb0Zyb21DYWNoZSgpO2lmKDE9PT0oKG51bGw9PXI/dm9pZCAwOnIuZ3JwUlJWZXIpfHwwKSYmbi5tZXNzYWdlVHlwZT09PVNlLlJFQURfUkVDRUlQVF9SRVNQT05TRSlyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtjb2RlOkVlLlJFQURfUkVDRUlQVF9FUlJPUn0pfXZhciBzPW4uY2FuSW5jbHVkZUV4cGFuc2lvbixvPXZvaWQgMCE9PXMmJnMsYT1uLmV4cGFuc2lvbjtpZihvJiZoZShhKSlyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtjb2RlOkVlLkJJWl9FUlJPUl9JTlZBTElEX1BBUkFNRVRFUn0pO3ZhciB1PUpTT04uc3RyaW5naWZ5KG4uY29udGVudCk7cmV0dXJuIFYodSk+MTMxMDcyP1Byb21pc2UucmVzb2x2ZSh7Y29kZTpFZS5SQ19NU0dfQ09OVEVOVF9FWENFRURfTElNSVR9KTplPT09ai5VTFRSQV9HUk9VUD90aGlzLl9lbmdpbmUuc2VuZFVsdHJhTWVzc2FnZSh0LG4pOnRoaXMuX2VuZ2luZS5zZW5kTWVzc2FnZShlLHQsbixpKX0sZS5wcm90b3R5cGUuc2VuZEV4cGFuc2lvbk1lc3NhZ2U9ZnVuY3Rpb24oZSl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciB0LG4saSxyLHMsbyxhLHUsYyxoLGwsZCxmLHA7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oZyl7c3dpdGNoKGcubGFiZWwpe2Nhc2UgMDppZih0PWUuY2hhbm5lbElkLG49ZS5jb252ZXJzYXRpb25UeXBlLGk9ZS50YXJnZXRJZCxyPWUubWVzc2FnZVVJZCxzPWUua2V5cyxvPWUuZXhwYW5zaW9uLGE9ZS5yZW1vdmVBbGwsIWUuY2FuSW5jbHVkZUV4cGFuc2lvbilyZXR1cm5bMix7Y29kZTpFZS5NRVNTQUdFX0tWX05PVF9TVVBQT1JUfV07aWYodT0hMSxjPWhlKG8pLGg9ITEsbmUobykpZm9yKGQgaW4gbD1PYmplY3Qua2V5cyhvKS5sZW5ndGgsdT1sPjIwLG8paWYoZj1vW2RdLChoPWQubGVuZ3RoPjMyfHxmLmxlbmd0aD40MDk2KXx8YylicmVhaztyZXR1cm4gdXx8aD9bMix7Y29kZTpFZS5FWFBBTlNJT05fTElNSVRfRVhDRUVUfV06Yz9bMix7Y29kZTpFZS5CSVpfRVJST1JfSU5WQUxJRF9QQVJBTUVURVJ9XToocD17bWlkOnJ9LG8mJihwLnB1dD1vKSxzJiYocC5kZWw9cyksYSYmKHAucmVtb3ZlQWxsPTEpLFs0LHRoaXMuX2VuZ2luZS5zZW5kTWVzc2FnZShuLGkse2NvbnRlbnQ6cCxtZXNzYWdlVHlwZTpTZS5FWFBBTlNJT05fTk9USUZZLGNoYW5uZWxJZDp0fSldKTtjYXNlIDE6cmV0dXJuWzIse2NvZGU6Zy5zZW50KCkuY29kZX1dfX0pKX0pKX0sZS5wcm90b3R5cGUuc2VuZFJlYWRSZWNlaXB0TWVzc2FnZT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBpO3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKHIpe3JldHVybiBpPXRoaXMuZ2V0SW5mb0Zyb21DYWNoZSgpLDA9PT0oKG51bGw9PWk/dm9pZCAwOmkuZ3JwUlJWZXIpfHwwKT9bMix7Y29kZTpFZS5SRUFEX1JFQ0VJUFRfRVJST1IsZGF0YTpcIlRoZSByZWFkIHJlY2VpcHQgc3dpdGNoIGlzIG5vdCBvbiwgcGxlYXNlIGNhbGwgdGhlIHNlbmRNZXNzYWdlIG1ldGhvZCFcIn1dOlsyLHRoaXMuX2VuZ2luZS5zZW5kUmVhZFJlY2VpcHRNZXNzYWdlKGUsdCxuKV19KSl9KSl9LGUucHJvdG90eXBlLmdldE1lc3NhZ2VSZWFkZXI9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgaTtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihyKXtyZXR1cm4gaT10aGlzLmdldEluZm9Gcm9tQ2FjaGUoKSwwPT09KChudWxsPT1pP3ZvaWQgMDppLmdycFJSVmVyKXx8MCk/WzIse2NvZGU6RWUuUkVBRF9SRUNFSVBUX0VSUk9SfV06WzIsdGhpcy5fZW5naW5lLmdldE1lc3NhZ2VSZWFkZXIoZSx0LG4pXX0pKX0pKX0sZS5wcm90b3R5cGUuX2Rlc3Ryb3k9ZnVuY3Rpb24oKXt2YXIgZTt0aGlzLl9pc0ludGVybmFsQ29ubmVjdGVkPSExLHRoaXMuX3dhdGNoZXI9e2JhdGNoTWVzc2FnZTp2b2lkIDAsbWVzc2FnZTp2b2lkIDAsY29udmVyc2F0aW9uU3RhdGU6dm9pZCAwLGNoYXRyb29tU3RhdGU6dm9pZCAwLGNvbm5lY3Rpb25TdGF0ZTp2b2lkIDAscnRjSW5uZXJXYXRjaGVyOnZvaWQgMCxleHBhbnNpb246dm9pZCAwLHRhZzp2b2lkIDAsY29udmVyc2F0aW9uVGFnQ2hhbmdlZDp2b2lkIDAsdHlwaW5nU3RhdGU6dm9pZCAwLHB1bGxGaW5pc2hlZDp2b2lkIDAsb25Db25uZWN0aW5nOnZvaWQgMCxvbkNvbm5lY3RlZDp2b2lkIDAsb25EaXNjb25uZWN0OnZvaWQgMCxvblN1c3BlbmQ6dm9pZCAwfSx0aGlzLl9lbmdpbmUuZGlzY29ubmVjdCgpLHRoaXMuX3BsdWdpbkNvbnRleHRRdWV1ZS5mb3JFYWNoKChmdW5jdGlvbihlKXtpZihlLm9uZGVzdHJveSl0cnl7ZS5vbmRlc3Ryb3koKX1jYXRjaChlKXtnZS5lcnJvcihcInBsdWdpbiBlcnJvciA9PlwiLGUpfX0pKSx0aGlzLl9wbHVnaW5Db250ZXh0UXVldWUubGVuZ3RoPTAsdGhpcy5fcGx1Z2luSW5zdGFuc2VNYXA9e30sbnVsbD09PShlPUNzLmdldEluc3RhbmNlKCkpfHx2b2lkIDA9PT1lfHxlLmRpc3Ryb3koKSxwZS5yZXNldCgpfSxlLnByb3RvdHlwZS5nZXRIaXN0b3J5TWVzc2FnZT1mdW5jdGlvbihlLHQsbixpLHIscyxvKXtpZih2b2lkIDA9PT1uJiYobj0wKSx2b2lkIDA9PT1pJiYoaT0yMCksdm9pZCAwPT09ciYmKHI9MCksdm9pZCAwPT09cyYmKHM9XCJcIiksdm9pZCAwPT09byYmKG89XCJcIiksZT09PWouVUxUUkFfR1JPVVApe3ZhciBhPXt0aW1lc3RhbXA6bixjb3VudDppLG9yZGVyOnIsY2hhbm5lbElkOnN9O3JldHVybiB0aGlzLl9lbmdpbmUuZ2V0VWx0cmFIaXN0b3J5TXNnKHQsYSl9cmV0dXJuIHRoaXMuX2VuZ2luZS5nZXRIaXN0b3J5TWVzc2FnZShlLHQsbixpLHIscyxvfHxcIlwiKX0sZS5wcm90b3R5cGUuZ2V0Q29udmVyc2F0aW9uTGlzdD1mdW5jdGlvbihlLHQsbixpLHIpe2lmKHZvaWQgMD09PWUmJihlPTMwMCksdm9pZCAwPT09ciYmKHI9XCJcIiksdD09PWouVUxUUkFfR1JPVVApe3ZhciBzPUVlLk1FVEhPRF9OT1RfU1VQUE9SVDtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtjb2RlOnMsbXNnOkVlW3NdfSl9cmV0dXJuIHRoaXMuX2VuZ2luZS5nZXRDb252ZXJzYXRpb25MaXN0KGUsdCxuLGkscil9LGUucHJvdG90eXBlLmdldENvbnZlcnNhdGlvbj1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHRoaXMuX2VuZ2luZS5nZXRDb252ZXJzYXRpb24oZSx0LG4pfSxlLnByb3RvdHlwZS5yZW1vdmVDb252ZXJzYXRpb249ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB2b2lkIDA9PT1uJiYobj1cIlwiKSxlPT09ai5VTFRSQV9HUk9VUD9Qcm9taXNlLnJlc29sdmUoRWUuTUVUSE9EX05PVF9TVVBQT1JUKTp0aGlzLl9lbmdpbmUucmVtb3ZlQ29udmVyc2F0aW9uKGUsdCxuKX0sZS5wcm90b3R5cGUuZ2V0VWx0cmFHcm91cExpc3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZW5naW5lLmdldFVsdHJhR3JvdXBMaXN0KCl9LGUucHJvdG90eXBlLmdldEJsb2NrVWx0cmFHcm91cExpc3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZW5naW5lLmdldEJsb2NrVWx0cmFHcm91cExpc3QoKX0sZS5wcm90b3R5cGUuZ2V0VG9wVWx0cmFHcm91cExpc3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZW5naW5lLmdldFRvcFVsdHJhR3JvdXBMaXN0KCl9LGUucHJvdG90eXBlLmNsZWFyVW5yZWFkQ291bnQ9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB2b2lkIDA9PT1uJiYobj1cIlwiKSxlPT09ai5VTFRSQV9HUk9VUD90aGlzLl9lbmdpbmUuY2xlYXJVbHRyYVVucmVhZGNvdW50KHQsbik6dGhpcy5fZW5naW5lLmNsZWFyQ29udmVyc2F0aW9uVW5yZWFkQ291bnQoZSx0LG4pfSxlLnByb3RvdHlwZS5jbGVhckFsbFVucmVhZENvdW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VuZ2luZS5jbGVhckFsbFVucmVhZENvdW50KCl9LGUucHJvdG90eXBlLmdldFVucmVhZENvdW50PWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdm9pZCAwPT09biYmKG49XCJcIiksdGhpcy5fZW5naW5lLmdldENvbnZlcnNhdGlvblVucmVhZENvdW50KGUsdCxuKX0sZS5wcm90b3R5cGUuZ2V0VG90YWxVbnJlYWRDb3VudD1mdW5jdGlvbihlLHQsbil7aWYodCYmdC5pbmNsdWRlcyhqLlVMVFJBX0dST1VQKSl7dmFyIGk9RWUuTUVUSE9EX05PVF9TVVBQT1JUO3JldHVybiBQcm9taXNlLnJlc29sdmUoe2NvZGU6aSxtc2c6RWVbaV19KX1yZXR1cm4gdGhpcy5fZW5naW5lLmdldEFsbENvbnZlcnNhdGlvblVucmVhZENvdW50KGUsdCYmdC5sZW5ndGg+MD90OltqLlBSSVZBVEUsai5HUk9VUCxqLlNZU1RFTSxqLlBVQkxJQ19TRVJWSUNFXSwhIW4pfSxlLnByb3RvdHlwZS5nZXRGaXJzdFVucmVhZE1lc3NhZ2U9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB2b2lkIDA9PT1uJiYobj1cIlwiKSx0aGlzLl9lbmdpbmUuZ2V0Rmlyc3RVbnJlYWRNZXNzYWdlKGUsdCxuKX0sZS5wcm90b3R5cGUuc2V0Q29udmVyc2F0aW9uU3RhdHVzPWZ1bmN0aW9uKGUsdCxuLGkscil7aWYodm9pZCAwPT09ciYmKHI9XCJcIiksZT09PWouVUxUUkFfR1JPVVAmJnZvaWQgMCE9PW4pcmV0dXJuIFByb21pc2UucmVzb2x2ZShFZS5NRVRIT0RfTk9UX1NVUFBPUlQpO3ZhciBzPVt7Y29udmVyc2F0aW9uVHlwZTplLHRhcmdldElkOnQsaXNUb3A6bixub3RpZmljYXRpb25TdGF0dXM6aSxjaGFubmVsSWQ6cn1dO3JldHVybiB0aGlzLl9lbmdpbmUuYmF0Y2hTZXRDb252ZXJzYXRpb25TdGF0dXMocyl9LGUucHJvdG90eXBlLnNhdmVDb252ZXJzYXRpb25NZXNzYWdlRHJhZnQ9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIHZvaWQgMD09PWkmJihpPVwiXCIpLHRoaXMuX2VuZ2luZS5zYXZlQ29udmVyc2F0aW9uTWVzc2FnZURyYWZ0KGUsdCxuLGkpfSxlLnByb3RvdHlwZS5nZXRDb252ZXJzYXRpb25NZXNzYWdlRHJhZnQ9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB2b2lkIDA9PT1uJiYobj1cIlwiKSx0aGlzLl9lbmdpbmUuZ2V0Q29udmVyc2F0aW9uTWVzc2FnZURyYWZ0KGUsdCxuKX0sZS5wcm90b3R5cGUuY2xlYXJDb252ZXJzYXRpb25NZXNzYWdlRHJhZnQ9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB2b2lkIDA9PT1uJiYobj1cIlwiKSx0aGlzLl9lbmdpbmUuY2xlYXJDb252ZXJzYXRpb25NZXNzYWdlRHJhZnQoZSx0LG4pfSxlLnByb3RvdHlwZS5yZWNhbGxNZXNzYWdlPWZ1bmN0aW9uKGUsdCxuLGkscil7cmV0dXJuIHRoaXMuX2VuZ2luZS5yZWNhbGxNc2coZSx0LG4saSxyKX0sZS5wcm90b3R5cGUuZGVsZXRlUmVtb3RlTWVzc2FnZT1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gdm9pZCAwPT09aSYmKGk9XCJcIiksZT09PWouVUxUUkFfR1JPVVA/UHJvbWlzZS5yZXNvbHZlKEVlLk1FVEhPRF9OT1RfU1VQUE9SVCk6dGhpcy5fZW5naW5lLmRlbGV0ZVJlbW90ZU1lc3NhZ2UoZSx0LG4saSl9LGUucHJvdG90eXBlLmRlbGV0ZVJlbW90ZU1lc3NhZ2VCeVRpbWVzdGFtcD1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gdm9pZCAwPT09aSYmKGk9XCJcIiksdGhpcy5fZW5naW5lLmRlbGV0ZVJlbW90ZU1lc3NhZ2VCeVRpbWVzdGFtcChlLHQsbixpKX0sZS5wcm90b3R5cGUuam9pbkNoYXRyb29tPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHZvaWQgMD09PXQmJih0PTEwKSx0aGlzLl9lbmdpbmUuam9pbkNoYXRyb29tKGUsdCl9LGUucHJvdG90eXBlLmpvaW5FeGlzdENoYXRyb29tPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHZvaWQgMD09PXQmJih0PTEwKSx0aGlzLl9lbmdpbmUuam9pbkV4aXN0Q2hhdHJvb20oZSx0KX0sZS5wcm90b3R5cGUucXVpdENoYXRyb29tPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9lbmdpbmUucXVpdENoYXRyb29tKGUpfSxlLnByb3RvdHlwZS5nZXRDaGF0cm9vbUluZm89ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB2b2lkIDA9PT10JiYodD0wKSx2b2lkIDA9PT1uJiYobj0wKSx0aGlzLl9lbmdpbmUuZ2V0Q2hhdHJvb21JbmZvKGUsdCxuKX0sZS5wcm90b3R5cGUuc2V0Q2hhdHJvb21FbnRyeT1mdW5jdGlvbihlLHQpe3ZhciBuPXQua2V5LGk9dC52YWx1ZTtyZXR1cm4gaHQobikmJmx0KGkpP3RoaXMuX2VuZ2luZS5zZXRDaGF0cm9vbUVudHJ5KGUsdCk6UHJvbWlzZS5yZXNvbHZlKEVlLkJJWl9FUlJPUl9JTlZBTElEX1BBUkFNRVRFUil9LGUucHJvdG90eXBlLnNldENoYXRyb29tRW50cmllcz1mdW5jdGlvbihlLHQpe2Zvcih2YXIgbj0wO248dC5lbnRyaWVzLmxlbmd0aDtuKyspe3ZhciBpPXQuZW50cmllc1tuXSxyPWkua2V5LHM9aS52YWx1ZTtpZighaHQocil8fCFsdChzKSlyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtjb2RlOkVlLkJJWl9FUlJPUl9JTlZBTElEX1BBUkFNRVRFUn0pfXJldHVybiB0aGlzLl9lbmdpbmUuc2V0Q2hhdHJvb21FbnRyaWVzKGUsdCl9LGUucHJvdG90eXBlLmZvcmNlU2V0Q2hhdHJvb21FbnRyeT1mdW5jdGlvbihlLHQpe3ZhciBuPXQua2V5LGk9dC52YWx1ZTtyZXR1cm4gaHQobikmJmx0KGkpP3RoaXMuX2VuZ2luZS5mb3JjZVNldENoYXRyb29tRW50cnkoZSx0KTpQcm9taXNlLnJlc29sdmUoRWUuQklaX0VSUk9SX0lOVkFMSURfUEFSQU1FVEVSKX0sZS5wcm90b3R5cGUucmVtb3ZlQ2hhdHJvb21FbnRyeT1mdW5jdGlvbihlLHQpe3ZhciBuPXQua2V5O3JldHVybiBodChuKT90aGlzLl9lbmdpbmUucmVtb3ZlQ2hhdHJvb21FbnRyeShlLHQpOlByb21pc2UucmVzb2x2ZShFZS5CSVpfRVJST1JfSU5WQUxJRF9QQVJBTUVURVIpfSxlLnByb3RvdHlwZS5yZW1vdmVDaGF0cm9vbUVudHJpZXM9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49MDtuPHQuZW50cmllcy5sZW5ndGg7bisrKXt2YXIgaT10LmVudHJpZXNbbl0ua2V5O2lmKCFodChpKSlyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtjb2RlOkVlLkJJWl9FUlJPUl9JTlZBTElEX1BBUkFNRVRFUn0pfXJldHVybiB0aGlzLl9lbmdpbmUucmVtb3ZlQ2hhdHJvb21FbnRyaWVzKGUsdCl9LGUucHJvdG90eXBlLmZvcmNlUmVtb3ZlQ2hhdHJvb21FbnRyeT1mdW5jdGlvbihlLHQpe3ZhciBuPXQua2V5O3JldHVybiBodChuKT90aGlzLl9lbmdpbmUuZm9yY2VSZW1vdmVDaGF0cm9vbUVudHJ5KGUsdCk6UHJvbWlzZS5yZXNvbHZlKEVlLkJJWl9FUlJPUl9JTlZBTElEX1BBUkFNRVRFUil9LGUucHJvdG90eXBlLmdldENoYXRyb29tRW50cnk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5fZW5naW5lLmdldENoYXRyb29tRW50cnkoZSx0KX0sZS5wcm90b3R5cGUuZ2V0QWxsQ2hhdHJvb21FbnRyaWVzPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9lbmdpbmUuZ2V0QWxsQ2hhdHJvb21FbnRyeShlKX0sZS5wcm90b3R5cGUuZ2V0Q2hhdHJvb21IaXN0b3J5TWVzc2FnZXM9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIHZvaWQgMD09PXQmJih0PTIwKSx2b2lkIDA9PT1uJiYobj0wKSx2b2lkIDA9PT1pJiYoaT0wKSx0aGlzLl9lbmdpbmUuZ2V0Q2hhdHJvb21IaXN0b3J5TWVzc2FnZXMoZSxpLHQsbil9LGUucHJvdG90eXBlLmdldEZpbGVUb2tlbj1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHIscyxvLGEsdSxjLGg7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24obCl7c3dpdGNoKGwubGFiZWwpe2Nhc2UgMDpyZXR1cm4gcj10aGlzLmdldEluZm9Gcm9tQ2FjaGUoKSxzPShudWxsPT1yP3ZvaWQgMDpyLmJvc0FkZHIpfHxcIlwiLG89KG51bGw9PXI/dm9pZCAwOnIudXBsb2FkU2VydmVyKXx8XCJcIixhPShudWxsPT1yP3ZvaWQgMDpyLm9zc0NvbmZpZyl8fFwiXCIsWzQsdGhpcy5fZW5naW5lLmdldEZpbGVUb2tlbihlLHQsbixpKV07Y2FzZSAxOnJldHVybiB1PWwuc2VudCgpLGM9dS5jb2RlLGg9dS5kYXRhLGM9PT1FZS5TVUNDRVNTP1syLFByb21pc2UucmVzb2x2ZShPYmplY3QuYXNzaWduKGgse2JvczpzLHFpbml1Om8sb3NzQ29uZmlnOmF9KSldOlsyLFByb21pc2UucmVqZWN0KGMpXX19KSl9KSl9LGUucHJvdG90eXBlLmdldEZpbGVVcmw9ZnVuY3Rpb24oZSx0LG4saSxyKXtyZXR1cm4gdm9pZCAwPT09ciYmKHI9VWUuUUlOSVUpLE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBzLG8sYTtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbih1KXtzd2l0Y2godS5sYWJlbCl7Y2FzZSAwOnJldHVybihudWxsPT1pP3ZvaWQgMDppLmlzQm9zUmVzKT9bMixQcm9taXNlLnJlc29sdmUoaSldOls0LHRoaXMuX2VuZ2luZS5nZXRGaWxlVXJsKGUscix0LG4pXTtjYXNlIDE6cmV0dXJuIHM9dS5zZW50KCksbz1zLmNvZGUsYT1zLmRhdGEsbz09PUVlLlNVQ0NFU1M/WzIsUHJvbWlzZS5yZXNvbHZlKGEpXTpbMixQcm9taXNlLnJlamVjdChvKV19fSkpfSkpfSxlLnByb3RvdHlwZS5jcmVhdGVUYWc9ZnVuY3Rpb24oZSl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKHQpe3JldHVyblsyLHRoaXMuX2VuZ2luZS5jcmVhdGVUYWcoZSldfSkpfSkpfSxlLnByb3RvdHlwZS5yZW1vdmVUYWc9ZnVuY3Rpb24oZSl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKHQpe3JldHVyblsyLHRoaXMuX2VuZ2luZS5yZW1vdmVUYWcoZSldfSkpfSkpfSxlLnByb3RvdHlwZS51cGRhdGVUYWc9ZnVuY3Rpb24oZSl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKHQpe3JldHVyblsyLHRoaXMuX2VuZ2luZS51cGRhdGVUYWcoZSldfSkpfSkpfSxlLnByb3RvdHlwZS5nZXRUYWdMaXN0PWZ1bmN0aW9uKCl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGUpe3JldHVyblsyLHRoaXMuX2VuZ2luZS5nZXRUYWdMaXN0KCldfSkpfSkpfSxlLnByb3RvdHlwZS5hZGRUYWdGb3JDb252ZXJzYXRpb25zPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKG4pe3JldHVybiB0Lmxlbmd0aD4xZTM/WzIsUHJvbWlzZS5yZWplY3QoRWUuQ09OVkVSX09VVF9MSU1JVF9FUlJPUildOlsyLHRoaXMuX2VuZ2luZS5hZGRUYWdGb3JDb252ZXJzYXRpb25zKGUsdCldfSkpfSkpfSxlLnByb3RvdHlwZS5yZW1vdmVUYWdGb3JDb252ZXJzYXRpb25zPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKG4pe3JldHVyblsyLHRoaXMuX2VuZ2luZS5yZW1vdmVUYWdGb3JDb252ZXJzYXRpb25zKGUsdCldfSkpfSkpfSxlLnByb3RvdHlwZS5yZW1vdmVUYWdzRm9yQ29udmVyc2F0aW9uPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKG4pe3JldHVyblsyLHRoaXMuX2VuZ2luZS5yZW1vdmVUYWdzRm9yQ29udmVyc2F0aW9uKGUsdCldfSkpfSkpfSxlLnByb3RvdHlwZS5nZXRDb252ZXJzYXRpb25MaXN0QnlUYWc9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKHIpe3JldHVyblsyLHRoaXMuX2VuZ2luZS5nZXRDb252ZXJzYXRpb25MaXN0QnlUYWcoZSx0LG4saSldfSkpfSkpfSxlLnByb3RvdHlwZS5nZXRVbnJlYWRDb3VudEJ5VGFnPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKG4pe3JldHVyblsyLHRoaXMuX2VuZ2luZS5nZXRVbnJlYWRDb3VudEJ5VGFnKGUsdCldfSkpfSkpfSxlLnByb3RvdHlwZS5zZXRDb252ZXJzYXRpb25TdGF0dXNJblRhZz1mdW5jdGlvbihlLHQsbil7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGkpe3JldHVyblsyLHRoaXMuX2VuZ2luZS5zZXRDb252ZXJzYXRpb25TdGF0dXNJblRhZyhlLHQsbildfSkpfSkpfSxlLnByb3RvdHlwZS5nZXRUYWdzRm9yQ29udmVyc2F0aW9uPWZ1bmN0aW9uKGUpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbih0KXtyZXR1cm5bMix0aGlzLl9lbmdpbmUuZ2V0VGFnc0ZvckNvbnZlcnNhdGlvbihlKV19KSl9KSl9LGUucHJvdG90eXBlLmdldEJsb2NrQ29udmVyc2F0aW9uTGlzdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9lbmdpbmUuZ2V0QmxvY2tDb252ZXJzYXRpb25MaXN0KCl9LGUucHJvdG90eXBlLmdldFRvcENvbnZlcnNhdGlvbkxpc3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZW5naW5lLmdldFRvcENvbnZlcnNhdGlvbkxpc3QoKX0sZS5wcm90b3R5cGUuZ2V0VW5yZWFkTWVudGlvbmVkQ291bnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2VuZ2luZS5nZXRVbnJlYWRNZW50aW9uZWRDb3VudChlKX0sZS5wcm90b3R5cGUuZ2V0QWxsVW5yZWFkTWVudGlvbmVkQ291bnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZW5naW5lLmdldEFsbFVucmVhZE1lbnRpb25lZENvdW50KCl9LGUucHJvdG90eXBlLnNlbmRVbHRyYUdyb3VwVHlwaW5nU3RhdHVzPWZ1bmN0aW9uKGUpe2lmKGUuY29udmVyc2F0aW9uVHlwZSE9PWouVUxUUkFfR1JPVVApe3ZhciB0PUVlLk1FVEhPRF9PTkxZX1NVUFBPUlRfVUxUUkFfR1JPVVA7cmV0dXJuIFByb21pc2UucmVzb2x2ZSh7Y29kZTp0LG1zZzpFZVt0XX0pfXJldHVybiB0aGlzLl9lbmdpbmUuc2VuZFVsdHJhR3JvdXBUeXBpbmdTdGF0dXMoZSl9LGUucHJvdG90eXBlLmdldFVsdHJhR3JvdXBNZXNzYWdlTGlzdEJ5TWVzc2FnZVVJZD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZW5naW5lLmdldFVsdHJhR3JvdXBNZXNzYWdlTGlzdEJ5TWVzc2FnZVVJZChlKX0sZS5wcm90b3R5cGUuZXhwYW5kVWx0cmFNZXNzYWdlPWZ1bmN0aW9uKGUpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgdCxuLGkscixzLG8sYSx1LGMsaDtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihsKXtzd2l0Y2gobC5sYWJlbCl7Y2FzZSAwOmlmKGUuY2hhbm5lbElkLHQ9ZS5jb252ZXJzYXRpb25UeXBlLGUudGFyZ2V0SWQsZS5tZXNzYWdlVUlkLGUua2V5cyxuPWUuZXhwYW5zaW9uLGUucmVtb3ZlQWxsLGk9ZS5jYW5JbmNsdWRlRXhwYW5zaW9uLHQhPT1qLlVMVFJBX0dST1VQKXJldHVyblsyLHtjb2RlOnI9RWUuTUVUSE9EX09OTFlfU1VQUE9SVF9VTFRSQV9HUk9VUCxtc2c6RWVbcl19XTtpZighaSlyZXR1cm5bMix7Y29kZTpFZS5NRVNTQUdFX0tWX05PVF9TVVBQT1JUfV07aWYocz0hMSxvPWhlKG4pLGE9ITEsbmUobikpZm9yKGMgaW4gdT1PYmplY3Qua2V5cyhuKS5sZW5ndGgscz11PjIwLG4paWYoaD1uW2NdLGE9Yy5sZW5ndGg+MzJ8fGgubGVuZ3RoPjY0KWJyZWFrO3JldHVybiBzfHxhP1syLHtjb2RlOkVlLkVYUEFOU0lPTl9MSU1JVF9FWENFRVR9XTpvP1syLHtjb2RlOkVlLkJJWl9FUlJPUl9JTlZBTElEX1BBUkFNRVRFUn1dOls0LHRoaXMuX2VuZ2luZS5leHBhbmRVbHRyYU1lc3NhZ2UoZSldO2Nhc2UgMTpyZXR1cm5bMix7Y29kZTpsLnNlbnQoKS5jb2RlfV19fSkpfSkpfSxlLnByb3RvdHlwZS5tb2RpZnlNZXNzYWdlPWZ1bmN0aW9uKGUpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgdDtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihuKXtzd2l0Y2gobi5sYWJlbCl7Y2FzZSAwOnJldHVybiBlLmNvbnZlcnNhdGlvblR5cGUhPT1qLlVMVFJBX0dST1VQP1syLHtjb2RlOnQ9RWUuTUVUSE9EX09OTFlfU1VQUE9SVF9VTFRSQV9HUk9VUCxtc2c6RWVbdF19XTpbNCx0aGlzLl9lbmdpbmUubW9kaWZ5TWVzc2FnZShlKV07Y2FzZSAxOnJldHVyblsyLHtjb2RlOm4uc2VudCgpLmNvZGV9XX19KSl9KSl9LGUucHJvdG90eXBlLmdldFVsdHJhR3JvdXBVbnJlYWRNZW50aW9uZWRDb3VudEJ5VGFyZ2V0SWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2VuZ2luZS5nZXRVbHRyYUdyb3VwVW5yZWFkTWVudGlvbmVkQ291bnRCeVRhcmdldElkKGUpfSxlLnByb3RvdHlwZS5nZXRBbGxDb252ZXJzYXRpb25TdGF0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9lbmdpbmUuZ2V0QWxsQ29udmVyc2F0aW9uU3RhdGUoKX0sZS5wcm90b3R5cGUuY2FsbEV4dHJhPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuPVtdLGk9MTtpPGFyZ3VtZW50cy5sZW5ndGg7aSsrKW5baS0xXT1hcmd1bWVudHNbaV07cmV0dXJuKHQ9dGhpcy5fZW5naW5lKS5jYWxsRXh0cmEuYXBwbHkodCxBKFtlXSxuKSl9LGUucHJvdG90eXBlLmNsZWFyQ29udmVyc2F0aW9ucz1mdW5jdGlvbihlLHQpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihuKXtzd2l0Y2gobi5sYWJlbCl7Y2FzZSAwOnJldHVybls0LHRoaXMuX2VuZ2luZS5jbGVhckNvbnZlcnNhdGlvbnMoZSx0KV07Y2FzZSAxOnJldHVyblsyLG4uc2VudCgpXX19KSl9KSl9LGUucHJvdG90eXBlLnNldFVzZXJTdGF0dXNMaXN0ZW5lcj1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLl9lbmdpbmUuc2V0VXNlclN0YXR1c0xpc3RlbmVyKGUsKGZ1bmN0aW9uKGUpe3RyeXt0KGUpfWNhdGNoKGUpe2dlLmVycm9yKGUpfX0pKX0sZS5wcm90b3R5cGUuYWRkVG9CbGFja2xpc3Q9ZnVuY3Rpb24oZSl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKHQpe3JldHVyblsyLHRoaXMuX2VuZ2luZS5hZGRUb0JsYWNrbGlzdChlKV19KSl9KSl9LGUucHJvdG90eXBlLnJlbW92ZUZyb21CbGFja2xpc3Q9ZnVuY3Rpb24oZSl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKHQpe3JldHVyblsyLHRoaXMuX2VuZ2luZS5yZW1vdmVGcm9tQmxhY2tsaXN0KGUpXX0pKX0pKX0sZS5wcm90b3R5cGUuZ2V0QmxhY2tsaXN0PWZ1bmN0aW9uKCl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGUpe3JldHVyblsyLHRoaXMuX2VuZ2luZS5nZXRCbGFja2xpc3QoKV19KSl9KSl9LGUucHJvdG90eXBlLmdldEJsYWNrbGlzdFN0YXR1cz1mdW5jdGlvbihlKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24odCl7cmV0dXJuWzIsdGhpcy5fZW5naW5lLmdldEJsYWNrbGlzdFN0YXR1cyhlKV19KSl9KSl9LGUucHJvdG90eXBlLmluc2VydE1lc3NhZ2U9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihpKXtyZXR1cm5bMix0aGlzLl9lbmdpbmUuaW5zZXJ0TWVzc2FnZShlLHQsbildfSkpfSkpfSxlLnByb3RvdHlwZS5kZWxldGVNZXNzYWdlcz1mdW5jdGlvbihlKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24odCl7cmV0dXJuWzIsdGhpcy5fZW5naW5lLmRlbGV0ZU1lc3NhZ2VzKGUpXX0pKX0pKX0sZS5wcm90b3R5cGUuZGVsZXRlTWVzc2FnZXNCeVRpbWVzdGFtcD1mdW5jdGlvbihlLHQsbixpLHIpe3JldHVybiB2b2lkIDA9PT1yJiYocj1cIlwiKSxNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihzKXtyZXR1cm5bMix0aGlzLl9lbmdpbmUuZGVsZXRlTWVzc2FnZXNCeVRpbWVzdGFtcChlLHQsbixpLHIpXX0pKX0pKX0sZS5wcm90b3R5cGUuY2xlYXJNZXNzYWdlcz1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHZvaWQgMD09PW4mJihuPVwiXCIpLE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKGkpe3JldHVyblsyLHRoaXMuX2VuZ2luZS5jbGVhck1lc3NhZ2VzKGUsdCxuKV19KSl9KSl9LGUucHJvdG90eXBlLmdldE1lc3NhZ2U9ZnVuY3Rpb24oZSl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKHQpe3JldHVyblsyLHRoaXMuX2VuZ2luZS5nZXRNZXNzYWdlKGUpXX0pKX0pKX0sZS5wcm90b3R5cGUuc2V0TWVzc2FnZUNvbnRlbnQ9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihpKXtyZXR1cm5bMix0aGlzLl9lbmdpbmUuc2V0TWVzc2FnZUNvbnRlbnQoZSx0LG4pXX0pKX0pKX0sZS5wcm90b3R5cGUuc2V0TWVzc2FnZVNlYXJjaEZpZWxkPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oaSl7cmV0dXJuWzIsdGhpcy5fZW5naW5lLnNldE1lc3NhZ2VTZWFyY2hGaWVsZChlLHQsbildfSkpfSkpfSxlLnByb3RvdHlwZS5zZXRNZXNzYWdlU2VudFN0YXR1cz1mdW5jdGlvbihlLHQpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihuKXtyZXR1cm5bMix0aGlzLl9lbmdpbmUuc2V0TWVzc2FnZVNlbnRTdGF0dXMoZSx0KV19KSl9KSl9LGUucHJvdG90eXBlLnNldE1lc3NhZ2VSZWNlaXZlZFN0YXR1cz1mdW5jdGlvbihlLHQpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihuKXtyZXR1cm5bMix0aGlzLl9lbmdpbmUuc2V0TWVzc2FnZVJlY2VpdmVkU3RhdHVzKGUsdCldfSkpfSkpfSxlLnByb3RvdHlwZS5zZXRVc2VyU3RhdHVzPWZ1bmN0aW9uKGUpe3JldHVybiBNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbih0KXtyZXR1cm5bMix0aGlzLl9lbmdpbmUuc2V0VXNlclN0YXR1cyhlKV19KSl9KSl9LGUucHJvdG90eXBlLnN1YnNjcmliZVVzZXJTdGF0dXM9ZnVuY3Rpb24oZSl7cmV0dXJuIE0odGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiB3KHRoaXMsKGZ1bmN0aW9uKHQpe3JldHVyblsyLHRoaXMuX2VuZ2luZS5zdWJzY3JpYmVVc2VyU3RhdHVzKGUpXX0pKX0pKX0sZS5wcm90b3R5cGUuZ2V0VXNlclN0YXR1cz1mdW5jdGlvbihlKXtyZXR1cm4gTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24odCl7cmV0dXJuWzIsdGhpcy5fZW5naW5lLmdldFVzZXJTdGF0dXMoZSldfSkpfSkpfSxlLnByb3RvdHlwZS5zZWFyY2hDb252ZXJzYXRpb25CeUNvbnRlbnQ9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIHZvaWQgMD09PXQmJih0PVtdKSx2b2lkIDA9PT1uJiYobj1cIlwiKSxNKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXtyZXR1cm4gdyh0aGlzLChmdW5jdGlvbihyKXtyZXR1cm5bMix0aGlzLl9lbmdpbmUuc2VhcmNoQ29udmVyc2F0aW9uQnlDb250ZW50KGUsdCxuLGkpXX0pKX0pKX0sZS5wcm90b3R5cGUuc2VhcmNoTWVzc2FnZUJ5Q29udGVudD1mdW5jdGlvbihlLHQsbixpLHIscyxvKXtyZXR1cm4gdm9pZCAwPT09byYmKG89XCJcIiksTSh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIHcodGhpcywoZnVuY3Rpb24oYSl7cmV0dXJuWzIsdGhpcy5fZW5naW5lLnNlYXJjaE1lc3NhZ2VCeUNvbnRlbnQoZSx0LG4saSxyLHMsbyldfSkpfSkpfSxlLnByb3RvdHlwZS5nZXRVbnJlYWRNZW50aW9uZWRNZXNzYWdlcz1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHZvaWQgMD09PW4mJihuPVwiXCIpLHRoaXMuX2VuZ2luZS5nZXRVbnJlYWRNZW50aW9uZWRNZXNzYWdlcyhlLHQsbil9LGUucHJvdG90eXBlLmNsZWFyVW5yZWFkQ291bnRCeVRpbWVzdGFtcD1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gdm9pZCAwPT09aSYmKGk9XCJcIiksdGhpcy5fZW5naW5lLmNsZWFyVW5yZWFkQ291bnRCeVRpbWVzdGFtcChlLHQsbixpKX0sZS5wcm90b3R5cGUuZ2V0Q29udmVyc2F0aW9uTm90aWZpY2F0aW9uU3RhdHVzPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdm9pZCAwPT09biYmKG49XCJcIiksdGhpcy5fZW5naW5lLmdldENvbnZlcnNhdGlvbk5vdGlmaWNhdGlvblN0YXR1cyhlLHQsbil9LGUucHJvdG90eXBlLmdldFJlbW90ZUhpc3RvcnlNZXNzYWdlcz1mdW5jdGlvbihlLHQsbixpLHIscyl7cmV0dXJuIHRoaXMuX2VuZ2luZS5nZXRSZW1vdGVIaXN0b3J5TWVzc2FnZXMoZSx0LG4saSxyLHMpfSxlLnByb3RvdHlwZS5nZXRDb252ZXJzYXRpb25MaXN0V2l0aEFsbENoYW5uZWw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZW5naW5lLmdldENvbnZlcnNhdGlvbkxpc3RXaXRoQWxsQ2hhbm5lbCgpfSxlLnByb3RvdHlwZS5nZXRDb252ZXJzYXRpb25MaXN0V2l0aEFsbENoYW5uZWxCeVBhZ2U9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5fZW5naW5lLmdldENvbnZlcnNhdGlvbkxpc3RXaXRoQWxsQ2hhbm5lbEJ5UGFnZShlLHQpfSxlLnByb3RvdHlwZS5qb2luUlRDUm9vbT1mdW5jdGlvbihlLHQsbixpLHIscyl7cmV0dXJuIHRoaXMuX2VuZ2luZS5qb2luUlRDUm9vbShlLHQsbixpLHIscyl9LGUucHJvdG90eXBlLnF1aXRSVENSb29tPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9lbmdpbmUucXVpdFJUQ1Jvb20oZSl9LGUucHJvdG90eXBlLnJ0Y1Bpbmc9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB0aGlzLl9lbmdpbmUucnRjUGluZyhlLHQsbil9LGUucHJvdG90eXBlLmdldFJUQ1Jvb21JbmZvPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9lbmdpbmUuZ2V0UlRDUm9vbUluZm8oZSl9LGUucHJvdG90eXBlLmdldFJUQ1VzZXJJbmZvTGlzdD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZW5naW5lLmdldFJUQ1VzZXJJbmZvTGlzdChlKX0sZS5wcm90b3R5cGUuZ2V0UlRDVXNlckluZm89ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2VuZ2luZS5nZXRSVENVc2VySW5mbyhlKX0sZS5wcm90b3R5cGUuc2V0UlRDVXNlckluZm89ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB0aGlzLl9lbmdpbmUuc2V0UlRDVXNlckluZm8oZSx0LG4pfSxlLnByb3RvdHlwZS5yZW1vdmVSVENVc2VySW5mbz1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLl9lbmdpbmUucmVtb3ZlUlRDVXNlckluZm8oZSx0KX0sZS5wcm90b3R5cGUuc2V0UlRDRGF0YT1mdW5jdGlvbihlLHQsbixpLHIscyl7cmV0dXJuIHRoaXMuX2VuZ2luZS5zZXRSVENEYXRhKGUsdCxuLGkscixzKX0sZS5wcm90b3R5cGUuc2V0UlRDVG90YWxSZXM9ZnVuY3Rpb24oZSx0LG4saSxyKXtyZXR1cm4gdm9pZCAwPT09ciYmKHI9XCJcIiksdGhpcy5fZW5naW5lLnNldFJUQ1RvdGFsUmVzKGUsdCxuLGkscil9LGUucHJvdG90eXBlLnNldFJUQ0NETlVyaXM9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB0aGlzLl9lbmdpbmUuc2V0UlRDQ0ROVXJpcyhlLHQsbil9LGUucHJvdG90eXBlLmdldFJUQ0RhdGE9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIHRoaXMuX2VuZ2luZS5nZXRSVENEYXRhKGUsdCxuLGkpfSxlLnByb3RvdHlwZS5yZW1vdmVSVENEYXRhPWZ1bmN0aW9uKGUsdCxuLGkscil7cmV0dXJuIHRoaXMuX2VuZ2luZS5yZW1vdmVSVENEYXRhKGUsdCxuLGkscil9LGUucHJvdG90eXBlLnNldFJUQ091dERhdGE9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIHRoaXMuX2VuZ2luZS5zZXRSVENPdXREYXRhKGUsdCxuLGkpfSxlLnByb3RvdHlwZS5nZXRSVENPdXREYXRhPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX2VuZ2luZS5nZXRSVENPdXREYXRhKGUsdCl9LGUucHJvdG90eXBlLmdldFJUQ1Rva2VuPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdGhpcy5fZW5naW5lLmdldFJUQ1Rva2VuKGUsdCxuKX0sZS5wcm90b3R5cGUuc2V0UlRDU3RhdGU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5fZW5naW5lLnNldFJUQ1N0YXRlKGUsdCl9LGUucHJvdG90eXBlLmdldFJUQ1VzZXJMaXN0PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9lbmdpbmUuZ2V0UlRDVXNlckxpc3QoZSl9LGUucHJvdG90eXBlLmpvaW5MaXZpbmdSb29tQXNBdWRpZW5jZT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHRoaXMuX2VuZ2luZS5qb2luTGl2aW5nUm9vbUFzQXVkaWVuY2UoZSx0LG4pfSxlLnByb3RvdHlwZS5xdWl0TGl2aW5nUm9vbUFzQXVkaWVuY2U9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2VuZ2luZS5xdWl0TGl2aW5nUm9vbUFzQXVkaWVuY2UoZSl9LGUucHJvdG90eXBlLnJ0Y0lkZW50aXR5Q2hhbmdlPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdGhpcy5fZW5naW5lLnJ0Y0lkZW50aXR5Q2hhbmdlKGUsdCxuKX0sZS5wcm90b3R5cGUuZ2V0UlRDSm9pbmVkVXNlckluZm89ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2VuZ2luZS5nZXRSVENKb2luZWRVc2VySW5mbyhlKX0sZS5wcm90b3R5cGUucmVxdWVzdFJvb21QSz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZW5naW5lLnJlcXVlc3RSb29tUEsoZSl9LGUucHJvdG90eXBlLmNhbmNlbFJvb21QSz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZW5naW5lLmNhbmNlbFJvb21QSyhlKX0sZS5wcm90b3R5cGUucmVzcG9uc2VSb29tUEs9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2VuZ2luZS5yZXNwb25zZVJvb21QSyhlKX0sZS5wcm90b3R5cGUuZW5kUm9vbVBLPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9lbmdpbmUuZW5kUm9vbVBLKGUpfSxlLnByb3RvdHlwZS5iaW5kUlRDUm9vbUZvckNoYXRyb29tPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9lbmdpbmUuYmluZFJUQ1Jvb21Gb3JDaGF0cm9vbShlKX0sZX0oKTshZnVuY3Rpb24oZSl7ZVtlLmFkZD0xXT1cImFkZFwiLGVbZS51cGRhdGU9Ml09XCJ1cGRhdGVcIixlW2UuZGVsZXRlPTNdPVwiZGVsZXRlXCJ9KFNzfHwoU3M9e30pKTt2YXIgT3M9XCI1LjIuMVwiO1xuXG5cbi8vIyBzb3VyY2VVUkw9d2VicGFjazovL0Byb25nY2xvdWQvcmNsaXZlcm9vbWxpYi8uL25vZGVfbW9kdWxlcy9Acm9uZ2Nsb3VkL2ltbGliLW5leHQvbm9kZV9tb2R1bGVzL0Byb25nY2xvdWQvZW5naW5lL2Rpc3QvaW5kZXguZXNtLmpzPyIpOy8qKiovfSwvKioqLyIuL25vZGVfbW9kdWxlcy9Acm9uZ2Nsb3VkL3BsdWdpbi1ydGMvZGlzdC9pbmRleC5lc20uanMiOi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcCiAgISoqKiAuL25vZGVfbW9kdWxlcy9Acm9uZ2Nsb3VkL3BsdWdpbi1ydGMvZGlzdC9pbmRleC5lc20uanMgKioqIQogIFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8gLyoqKi9mdW5jdGlvbiBub2RlX21vZHVsZXNSb25nY2xvdWRQbHVnaW5SdGNEaXN0SW5kZXhFc21KcyhfX3VudXNlZF93ZWJwYWNrX21vZHVsZSxfX3dlYnBhY2tfZXhwb3J0c19fLF9fd2VicGFja19yZXF1aXJlX18pe2V2YWwoIl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0ICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCB7XG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiUlRDSm9pblR5cGVcIjogKCkgPT4gKC8qIHJlZXhwb3J0IHNhZmUgKi8gX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5SVENKb2luVHlwZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiQmFja2dyb3VuZFBpY3R1cmVGaWxsTW9kZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBpciksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiTWl4TGF5b3V0TW9kZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBuciksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiTWl4VmlkZW9SZW5kZXJNb2RlXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHNyKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJSQ0Fic3RyYWN0Um9vbVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyByciksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiUkNBdWRpZW5jZUNsaWVudFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBSciksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiUkNBdWRpZW5jZUxpdmluZ1Jvb21cIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gVHIpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIlJDQ2FtZXJhVmlkZW9UcmFja1wiOiAoKSA9PiAoLyogYmluZGluZyAqLyBpdCksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiUkNGcmFtZVJhdGVcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gQmUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIlJDSW5uZXJDRE5QdWxsSXNIdHRwc1wiOiAoKSA9PiAoLyogYmluZGluZyAqLyBTciksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiUkNJbm5lckNETlB1bGxLaW5kXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIGdyKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJSQ0tpY2tSZWFzb25cIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8geXIpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIlJDTGl2aW5nUm9vbVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBfciksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiUkNMaXZpbmdUeXBlXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIGxyKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJSQ0xvY2FsQXVkaW9UcmFja1wiOiAoKSA9PiAoLyogYmluZGluZyAqLyBRZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiUkNMb2NhbEZpbGVBdWRpb1RyYWNrXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHR0KSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJSQ0xvY2FsRmlsZVRyYWNrXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIFplKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJSQ0xvY2FsRmlsZVZpZGVvVHJhY2tcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gZXQpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIlJDTG9jYWxUcmFja1wiOiAoKSA9PiAoLyogYmluZGluZyAqLyB6ZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiUkNMb2NhbFZpZGVvVHJhY2tcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gWGUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIlJDTUNVQ29uZmlnQnVpbGRlclwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBhciksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiUkNNZWRpYVR5cGVcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gRmUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIlJDTWljcGhvbmVBdWRpb1RyYWNrXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHJ0KSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJSQ1JUQ0NsaWVudFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBFciksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiUkNSVENDb2RlXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIFQpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIlJDUlRDTGl2ZVJvbGVcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gWHQpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIlJDUlRDUGluZ1Jlc3VsdFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBEdCksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiUkNSVENSb29tXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIG1yKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJSQ1JlbW90ZUF1ZGlvVHJhY2tcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gb3QpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIlJDUmVtb3RlVHJhY2tcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gc3QpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIlJDUmVtb3RlVmlkZW9UcmFja1wiOiAoKSA9PiAoLyogYmluZGluZyAqLyBhdCksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiUkNSZXNvbHV0aW9uXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIEhlKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJSQ1NjcmVlblZpZGVvVHJhY2tcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gbnQpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIlJDVGFnXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIGJyKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJSQ1RyYWNrXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHFlKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJkZXZpY2VcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gWWUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImhlbHBlclwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBQciksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiaW5zdGFsbGVyXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIGtyKVxuLyogaGFybW9ueSBleHBvcnQgKi8gfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIEByb25nY2xvdWQvZW5naW5lICovIFwiLi9ub2RlX21vZHVsZXMvQHJvbmdjbG91ZC9lbmdpbmUvZGlzdC9pbmRleC5lc20uanNcIik7XG5cbi8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uXG5cblBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueVxucHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLlxuXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIXG5SRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFlcbkFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsIERJUkVDVCxcbklORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTVxuTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1Jcbk9USEVSIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBVU0UgT1JcblBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL2Z1bmN0aW9uIFMoZSx0LHIsaSl7cmV0dXJuIG5ldyhyfHwocj1Qcm9taXNlKSkoKGZ1bmN0aW9uKG4scyl7ZnVuY3Rpb24gbyhlKXt0cnl7YyhpLm5leHQoZSkpfWNhdGNoKGUpe3MoZSl9fWZ1bmN0aW9uIGEoZSl7dHJ5e2MoaS50aHJvdyhlKSl9Y2F0Y2goZSl7cyhlKX19ZnVuY3Rpb24gYyhlKXt2YXIgdDtlLmRvbmU/bihlLnZhbHVlKToodD1lLnZhbHVlLHQgaW5zdGFuY2VvZiByP3Q6bmV3IHIoKGZ1bmN0aW9uKGUpe2UodCl9KSkpLnRoZW4obyxhKX1jKChpPWkuYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KSl9Y29uc3QgQz1uZXcgX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Mb2dnZXIoXCJSQ1JUQ1wiKTt2YXIgVCxJOyFmdW5jdGlvbihlKXtlW2UuU1VDQ0VTUz0xZTRdPVwiU1VDQ0VTU1wiLGVbZS5TSUdOQUxfRElTQ09OTkVDVEVEPTVlNF09XCJTSUdOQUxfRElTQ09OTkVDVEVEXCIsZVtlLlBBUkFNU19FUlJPUj01MDAwMV09XCJQQVJBTVNfRVJST1JcIixlW2UuUkVQRVJUX0pPSU5fUk9PTT01MDAwMl09XCJSRVBFUlRfSk9JTl9ST09NXCIsZVtlLk5PVF9JTl9ST09NPTUwMDAzXT1cIk5PVF9JTl9ST09NXCIsZVtlLlNFUlZJQ0VfSU5WQUxJRD01MDAwNF09XCJTRVJWSUNFX0lOVkFMSURcIixlW2UuUlRDX1RPS0VOX0lOVkFMSUQ9NTAwMDZdPVwiUlRDX1RPS0VOX0lOVkFMSURcIixlW2UuU0lHTkFMX0VSUk9SPTUzMDAxXT1cIlNJR05BTF9FUlJPUlwiLGVbZS5DUkVBVEVfT0ZGRVJfRkFJTEVEPTUzMDAzXT1cIkNSRUFURV9PRkZFUl9GQUlMRURcIixlW2UuUkVRVUVTVF9GQUlMRUQ9NTMwMDRdPVwiUkVRVUVTVF9GQUlMRURcIixlW2UuTUNVX1NFUlZFUl9OT1RfRk9VTkQ9NTMwMDVdPVwiTUNVX1NFUlZFUl9OT1RfRk9VTkRcIixlW2UuQlJPQURDQVNUX1NVQl9MSVNUX05PVF9FTVBUWT01MzAwN109XCJCUk9BRENBU1RfU1VCX0xJU1RfTk9UX0VNUFRZXCIsZVtlLlJPT01fSEFTX0JFRU5fREVTVFJPWUVEPTUzMDA4XT1cIlJPT01fSEFTX0JFRU5fREVTVFJPWUVEXCIsZVtlLk5PVF9PUEVOX1ZJREVPX0FVRElPX1NFUlZFUj01MzAwOV09XCJOT1RfT1BFTl9WSURFT19BVURJT19TRVJWRVJcIixlW2UuR0VUX1VTRVJfTUVESUFfRkFJTEVEPTUzMDEwXT1cIkdFVF9VU0VSX01FRElBX0ZBSUxFRFwiLGVbZS5HRVRfRElTUExBWV9NRURJQV9GQUlMRUQ9NTMwMTFdPVwiR0VUX0RJU1BMQVlfTUVESUFfRkFJTEVEXCIsZVtlLlBFUk1JU1NJT05fREVOSUVEPTUzMDEyXT1cIlBFUk1JU1NJT05fREVOSUVEXCIsZVtlLkNSRUFURV9DVVNUT01fVFJBQ0tfRkFJTEVEPTUzMDEzXT1cIkNSRUFURV9DVVNUT01fVFJBQ0tfRkFJTEVEXCIsZVtlLklOVkFMSURfVEFHUz01MzAxNF09XCJJTlZBTElEX1RBR1NcIixlW2UuSU5WQUxJRF9VU0VSX0lEPTUzMDE1XT1cIklOVkFMSURfVVNFUl9JRFwiLGVbZS5DUkVBVEVfRklMRV9UUkFDS19GQUlMRUQ9NTMwMTZdPVwiQ1JFQVRFX0ZJTEVfVFJBQ0tfRkFJTEVEXCIsZVtlLklOVkFMSURfRklMRV9JTlNUQU5DRT01MzAxN109XCJJTlZBTElEX0ZJTEVfSU5TVEFOQ0VcIixlW2UuU0VUX1JFTU9URV9ERVNDUklQVElPTl9GQUlMRUQ9NTMwMThdPVwiU0VUX1JFTU9URV9ERVNDUklQVElPTl9GQUlMRURcIixlW2UuQlJPV1NFUl9OT1RfU1VQUE9SVD01MzAxOV09XCJCUk9XU0VSX05PVF9TVVBQT1JUXCIsZVtlLlRSQUNLX05PVF9SRUFEWT01MzAyMF09XCJUUkFDS19OT1RfUkVBRFlcIixlW2UuVklERU9fVFJBQ0tfTUlTU19NRURJQV9FTEVNRU5UPTUzMDIxXT1cIlZJREVPX1RSQUNLX01JU1NfTUVESUFfRUxFTUVOVFwiLGVbZS5UUkFDS19QTEFZX0VSUk9SPTUzMDIyXT1cIlRSQUNLX1BMQVlfRVJST1JcIixlW2UuU0lHTkFMX0FVRElFTkNFX0pPSU5fUk9PTV9GQUlMRUQ9NTMwMjNdPVwiU0lHTkFMX0FVRElFTkNFX0pPSU5fUk9PTV9GQUlMRURcIixlW2UuU0lHTkFMX1JPT01fQ0hBTkdFX0lERU5USVRZX0ZBSUxFRD01MzAyNF09XCJTSUdOQUxfUk9PTV9DSEFOR0VfSURFTlRJVFlfRkFJTEVEXCIsZVtlLlBBQ0tBR0VfRU5WSVJPTk1FTlRfRVJST1I9NTMwMjVdPVwiUEFDS0FHRV9FTlZJUk9OTUVOVF9FUlJPUlwiLGVbZS5QVUJMSVNIX1RSQUNLX0xJTUlUX0VYQ0VFREVEPTUzMDI2XT1cIlBVQkxJU0hfVFJBQ0tfTElNSVRfRVhDRUVERURcIixlW2UuQ0ROX1JFU09VUkNFX0lTX0VNUFRZPTUzMDI3XT1cIkNETl9SRVNPVVJDRV9JU19FTVBUWVwiLGVbZS5TSUdOQUxfSk9JTl9SVENfUk9PTV9SRUZVU0VEPTUzMDI4XT1cIlNJR05BTF9KT0lOX1JUQ19ST09NX1JFRlVTRURcIixlW2UuTk9fUEVSTUlTU0lPTl9UT19VU0VfUkVRVUVTVEVEX0RFVklDRT01MzAyOV09XCJOT19QRVJNSVNTSU9OX1RPX1VTRV9SRVFVRVNURURfREVWSUNFXCIsZVtlLlRIRV9GVU5DVElPTl9JU19ESVNBQkxFRF9JTl9QS1JPT009NTMwMzBdPVwiVEhFX0ZVTkNUSU9OX0lTX0RJU0FCTEVEX0lOX1BLUk9PTVwifShUfHwoVD17fSkpLGZ1bmN0aW9uKGUpe2VbZS5KT0lOX1JFRlVTRUQ9NDAwMzJdPVwiSk9JTl9SRUZVU0VEXCJ9KEl8fChJPXt9KSk7Y2xhc3MgRXtjb25zdHJ1Y3Rvcigpe3RoaXMucXVldWU9W10sdGhpcy5sb2NrZWQ9ITF9Y2hlY2tUb1N0YXJ0KCl7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtpZigwPT09dGhpcy5xdWV1ZS5sZW5ndGh8fHRoaXMubG9ja2VkKXJldHVybjt0aGlzLmxvY2tlZD0hMDtjb25zdHtyZXNvbHZlOmUsdGFzazp0LHJlamVjdDpyfT10aGlzLnF1ZXVlLnNoaWZ0KCk7bGV0IGk7dHJ5e2k9eWllbGQgdCgpLGUoaSl9Y2F0Y2goZSl7cihlKX10aGlzLmxvY2tlZD0hMSx0aGlzLmNoZWNrVG9TdGFydCgpfSkpfXB1c2goZSl7Y29uc3QgdD1uZXcgUHJvbWlzZSgoKHQscik9Pnt0aGlzLnF1ZXVlLnB1c2goe3Jlc29sdmU6dCx0YXNrOmUscmVqZWN0OnJ9KX0pKTtyZXR1cm4gdGhpcy5jaGVja1RvU3RhcnQoKSx0fX1jb25zdCB5PW5ldyBFLGs9ZT0+eS5wdXNoKGUpO2xldCBiPSEwLFA9ITA7ZnVuY3Rpb24gTyhlLHQscil7Y29uc3QgaT1lLm1hdGNoKHQpO3JldHVybiBpJiZpLmxlbmd0aD49ciYmcGFyc2VJbnQoaVtyXSwxMCl9ZnVuY3Rpb24gTChlLHQscil7aWYoIWUuUlRDUGVlckNvbm5lY3Rpb24pcmV0dXJuO2NvbnN0IGk9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUsbj1pLmFkZEV2ZW50TGlzdGVuZXI7aS5hZGRFdmVudExpc3RlbmVyPWZ1bmN0aW9uKGUsaSl7aWYoZSE9PXQpcmV0dXJuIG4uYXBwbHkodGhpcyxhcmd1bWVudHMpO2NvbnN0IHM9ZT0+e2NvbnN0IHQ9cihlKTt0JiYoaS5oYW5kbGVFdmVudD9pLmhhbmRsZUV2ZW50KHQpOmkodCkpfTtyZXR1cm4gdGhpcy5fZXZlbnRNYXA9dGhpcy5fZXZlbnRNYXB8fHt9LHRoaXMuX2V2ZW50TWFwW3RdfHwodGhpcy5fZXZlbnRNYXBbdF09bmV3IE1hcCksdGhpcy5fZXZlbnRNYXBbdF0uc2V0KGkscyksbi5hcHBseSh0aGlzLFtlLHNdKX07Y29uc3Qgcz1pLnJlbW92ZUV2ZW50TGlzdGVuZXI7aS5yZW1vdmVFdmVudExpc3RlbmVyPWZ1bmN0aW9uKGUscil7aWYoZSE9PXR8fCF0aGlzLl9ldmVudE1hcHx8IXRoaXMuX2V2ZW50TWFwW3RdKXJldHVybiBzLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZighdGhpcy5fZXZlbnRNYXBbdF0uaGFzKHIpKXJldHVybiBzLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtjb25zdCBpPXRoaXMuX2V2ZW50TWFwW3RdLmdldChyKTtyZXR1cm4gdGhpcy5fZXZlbnRNYXBbdF0uZGVsZXRlKHIpLDA9PT10aGlzLl9ldmVudE1hcFt0XS5zaXplJiZkZWxldGUgdGhpcy5fZXZlbnRNYXBbdF0sMD09PU9iamVjdC5rZXlzKHRoaXMuX2V2ZW50TWFwKS5sZW5ndGgmJmRlbGV0ZSB0aGlzLl9ldmVudE1hcCxzLmFwcGx5KHRoaXMsW2UsaV0pfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoaSxcIm9uXCIrdCx7Z2V0KCl7cmV0dXJuIHRoaXNbXCJfb25cIit0XX0sc2V0KGUpe3RoaXNbXCJfb25cIit0XSYmKHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcih0LHRoaXNbXCJfb25cIit0XSksZGVsZXRlIHRoaXNbXCJfb25cIit0XSksZSYmdGhpcy5hZGRFdmVudExpc3RlbmVyKHQsdGhpc1tcIl9vblwiK3RdPWUpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pfWZ1bmN0aW9uIE4oZSl7cmV0dXJuXCJib29sZWFuXCIhPXR5cGVvZiBlP25ldyBFcnJvcihcIkFyZ3VtZW50IHR5cGU6IFwiK3R5cGVvZiBlK1wiLiBQbGVhc2UgdXNlIGEgYm9vbGVhbi5cIik6KGI9ZSxlP1wiYWRhcHRlci5qcyBsb2dnaW5nIGRpc2FibGVkXCI6XCJhZGFwdGVyLmpzIGxvZ2dpbmcgZW5hYmxlZFwiKX1mdW5jdGlvbiBEKGUpe3JldHVyblwiYm9vbGVhblwiIT10eXBlb2YgZT9uZXcgRXJyb3IoXCJBcmd1bWVudCB0eXBlOiBcIit0eXBlb2YgZStcIi4gUGxlYXNlIHVzZSBhIGJvb2xlYW4uXCIpOihQPSFlLFwiYWRhcHRlci5qcyBkZXByZWNhdGlvbiB3YXJuaW5ncyBcIisoZT9cImRpc2FibGVkXCI6XCJlbmFibGVkXCIpKX1mdW5jdGlvbiBBKCl7aWYoXCJvYmplY3RcIj09dHlwZW9mIHdpbmRvdyl7aWYoYilyZXR1cm47XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGNvbnNvbGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGNvbnNvbGUubG9nJiZjb25zb2xlLmxvZy5hcHBseShjb25zb2xlLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIE0oZSx0KXtQJiZjb25zb2xlLndhcm4oZStcIiBpcyBkZXByZWNhdGVkLCBwbGVhc2UgdXNlIFwiK3QrXCIgaW5zdGVhZC5cIil9ZnVuY3Rpb24geChlKXtyZXR1cm5cIltvYmplY3QgT2JqZWN0XVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpfWZ1bmN0aW9uIFUoZSl7cmV0dXJuIHgoZSk/T2JqZWN0LmtleXMoZSkucmVkdWNlKChmdW5jdGlvbih0LHIpe2NvbnN0IGk9eChlW3JdKSxuPWk/VShlW3JdKTplW3JdLHM9aSYmIU9iamVjdC5rZXlzKG4pLmxlbmd0aDtyZXR1cm4gdm9pZCAwPT09bnx8cz90Ok9iamVjdC5hc3NpZ24odCx7W3JdOm59KX0pLHt9KTplfWZ1bmN0aW9uIHcoZSx0LHIpe3QmJiFyLmhhcyh0LmlkKSYmKHIuc2V0KHQuaWQsdCksT2JqZWN0LmtleXModCkuZm9yRWFjaCgoaT0+e2kuZW5kc1dpdGgoXCJJZFwiKT93KGUsZS5nZXQodFtpXSkscik6aS5lbmRzV2l0aChcIklkc1wiKSYmdFtpXS5mb3JFYWNoKCh0PT57dyhlLGUuZ2V0KHQpLHIpfSkpfSkpKX1mdW5jdGlvbiAkKGUsdCxyKXtjb25zdCBpPXI/XCJvdXRib3VuZC1ydHBcIjpcImluYm91bmQtcnRwXCIsbj1uZXcgTWFwO2lmKG51bGw9PT10KXJldHVybiBuO2NvbnN0IHM9W107cmV0dXJuIGUuZm9yRWFjaCgoZT0+e1widHJhY2tcIj09PWUudHlwZSYmZS50cmFja0lkZW50aWZpZXI9PT10LmlkJiZzLnB1c2goZSl9KSkscy5mb3JFYWNoKCh0PT57ZS5mb3JFYWNoKChyPT57ci50eXBlPT09aSYmci50cmFja0lkPT09dC5pZCYmdyhlLHIsbil9KSl9KSksbn1jb25zdCBqPUE7ZnVuY3Rpb24gVihlLHQpe2NvbnN0IHI9ZSYmZS5uYXZpZ2F0b3I7aWYoIXIubWVkaWFEZXZpY2VzKXJldHVybjtjb25zdCBpPWZ1bmN0aW9uKGUpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlfHxlLm1hbmRhdG9yeXx8ZS5vcHRpb25hbClyZXR1cm4gZTtjb25zdCB0PXt9O3JldHVybiBPYmplY3Qua2V5cyhlKS5mb3JFYWNoKChyPT57aWYoXCJyZXF1aXJlXCI9PT1yfHxcImFkdmFuY2VkXCI9PT1yfHxcIm1lZGlhU291cmNlXCI9PT1yKXJldHVybjtjb25zdCBpPVwib2JqZWN0XCI9PXR5cGVvZiBlW3JdP2Vbcl06e2lkZWFsOmVbcl19O3ZvaWQgMCE9PWkuZXhhY3QmJlwibnVtYmVyXCI9PXR5cGVvZiBpLmV4YWN0JiYoaS5taW49aS5tYXg9aS5leGFjdCk7Y29uc3Qgbj1mdW5jdGlvbihlLHQpe3JldHVybiBlP2UrdC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSt0LnNsaWNlKDEpOlwiZGV2aWNlSWRcIj09PXQ/XCJzb3VyY2VJZFwiOnR9O2lmKHZvaWQgMCE9PWkuaWRlYWwpe3Qub3B0aW9uYWw9dC5vcHRpb25hbHx8W107bGV0IGU9e307XCJudW1iZXJcIj09dHlwZW9mIGkuaWRlYWw/KGVbbihcIm1pblwiLHIpXT1pLmlkZWFsLHQub3B0aW9uYWwucHVzaChlKSxlPXt9LGVbbihcIm1heFwiLHIpXT1pLmlkZWFsLHQub3B0aW9uYWwucHVzaChlKSk6KGVbbihcIlwiLHIpXT1pLmlkZWFsLHQub3B0aW9uYWwucHVzaChlKSl9dm9pZCAwIT09aS5leGFjdCYmXCJudW1iZXJcIiE9dHlwZW9mIGkuZXhhY3Q/KHQubWFuZGF0b3J5PXQubWFuZGF0b3J5fHx7fSx0Lm1hbmRhdG9yeVtuKFwiXCIscildPWkuZXhhY3QpOltcIm1pblwiLFwibWF4XCJdLmZvckVhY2goKGU9Pnt2b2lkIDAhPT1pW2VdJiYodC5tYW5kYXRvcnk9dC5tYW5kYXRvcnl8fHt9LHQubWFuZGF0b3J5W24oZSxyKV09aVtlXSl9KSl9KSksZS5hZHZhbmNlZCYmKHQub3B0aW9uYWw9KHQub3B0aW9uYWx8fFtdKS5jb25jYXQoZS5hZHZhbmNlZCkpLHR9LG49ZnVuY3Rpb24oZSxuKXtpZih0LnZlcnNpb24+PTYxKXJldHVybiBuKGUpO2lmKChlPUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZSkpKSYmXCJvYmplY3RcIj09dHlwZW9mIGUuYXVkaW8pe2NvbnN0IHQ9ZnVuY3Rpb24oZSx0LHIpe3QgaW4gZSYmIShyIGluIGUpJiYoZVtyXT1lW3RdLGRlbGV0ZSBlW3RdKX07dCgoZT1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGUpKSkuYXVkaW8sXCJhdXRvR2FpbkNvbnRyb2xcIixcImdvb2dBdXRvR2FpbkNvbnRyb2xcIiksdChlLmF1ZGlvLFwibm9pc2VTdXBwcmVzc2lvblwiLFwiZ29vZ05vaXNlU3VwcHJlc3Npb25cIiksZS5hdWRpbz1pKGUuYXVkaW8pfWlmKGUmJlwib2JqZWN0XCI9PXR5cGVvZiBlLnZpZGVvKXtsZXQgcz1lLnZpZGVvLmZhY2luZ01vZGU7cz1zJiYoXCJvYmplY3RcIj09dHlwZW9mIHM/czp7aWRlYWw6c30pO2NvbnN0IG89dC52ZXJzaW9uPDY2O2lmKHMmJihcInVzZXJcIj09PXMuZXhhY3R8fFwiZW52aXJvbm1lbnRcIj09PXMuZXhhY3R8fFwidXNlclwiPT09cy5pZGVhbHx8XCJlbnZpcm9ubWVudFwiPT09cy5pZGVhbCkmJighci5tZWRpYURldmljZXMuZ2V0U3VwcG9ydGVkQ29uc3RyYWludHN8fCFyLm1lZGlhRGV2aWNlcy5nZXRTdXBwb3J0ZWRDb25zdHJhaW50cygpLmZhY2luZ01vZGV8fG8pKXtsZXQgdDtpZihkZWxldGUgZS52aWRlby5mYWNpbmdNb2RlLFwiZW52aXJvbm1lbnRcIj09PXMuZXhhY3R8fFwiZW52aXJvbm1lbnRcIj09PXMuaWRlYWw/dD1bXCJiYWNrXCIsXCJyZWFyXCJdOlwidXNlclwiIT09cy5leGFjdCYmXCJ1c2VyXCIhPT1zLmlkZWFsfHwodD1bXCJmcm9udFwiXSksdClyZXR1cm4gci5tZWRpYURldmljZXMuZW51bWVyYXRlRGV2aWNlcygpLnRoZW4oKHI9PntsZXQgbz0ocj1yLmZpbHRlcigoZT0+XCJ2aWRlb2lucHV0XCI9PT1lLmtpbmQpKSkuZmluZCgoZT0+dC5zb21lKCh0PT5lLmxhYmVsLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXModCkpKSkpO3JldHVybiFvJiZyLmxlbmd0aCYmdC5pbmNsdWRlcyhcImJhY2tcIikmJihvPXJbci5sZW5ndGgtMV0pLG8mJihlLnZpZGVvLmRldmljZUlkPXMuZXhhY3Q/e2V4YWN0Om8uZGV2aWNlSWR9OntpZGVhbDpvLmRldmljZUlkfSksZS52aWRlbz1pKGUudmlkZW8pLGooXCJjaHJvbWU6IFwiK0pTT04uc3RyaW5naWZ5KGUpKSxuKGUpfSkpfWUudmlkZW89aShlLnZpZGVvKX1yZXR1cm4gaihcImNocm9tZTogXCIrSlNPTi5zdHJpbmdpZnkoZSkpLG4oZSl9LHM9ZnVuY3Rpb24oZSl7cmV0dXJuIHQudmVyc2lvbj49NjQ/ZTp7bmFtZTp7UGVybWlzc2lvbkRlbmllZEVycm9yOlwiTm90QWxsb3dlZEVycm9yXCIsUGVybWlzc2lvbkRpc21pc3NlZEVycm9yOlwiTm90QWxsb3dlZEVycm9yXCIsSW52YWxpZFN0YXRlRXJyb3I6XCJOb3RBbGxvd2VkRXJyb3JcIixEZXZpY2VzTm90Rm91bmRFcnJvcjpcIk5vdEZvdW5kRXJyb3JcIixDb25zdHJhaW50Tm90U2F0aXNmaWVkRXJyb3I6XCJPdmVyY29uc3RyYWluZWRFcnJvclwiLFRyYWNrU3RhcnRFcnJvcjpcIk5vdFJlYWRhYmxlRXJyb3JcIixNZWRpYURldmljZUZhaWxlZER1ZVRvU2h1dGRvd246XCJOb3RBbGxvd2VkRXJyb3JcIixNZWRpYURldmljZUtpbGxTd2l0Y2hPbjpcIk5vdEFsbG93ZWRFcnJvclwiLFRhYkNhcHR1cmVFcnJvcjpcIkFib3J0RXJyb3JcIixTY3JlZW5DYXB0dXJlRXJyb3I6XCJBYm9ydEVycm9yXCIsRGV2aWNlQ2FwdHVyZUVycm9yOlwiQWJvcnRFcnJvclwifVtlLm5hbWVdfHxlLm5hbWUsbWVzc2FnZTplLm1lc3NhZ2UsY29uc3RyYWludDplLmNvbnN0cmFpbnR8fGUuY29uc3RyYWludE5hbWUsdG9TdHJpbmcoKXtyZXR1cm4gdGhpcy5uYW1lKyh0aGlzLm1lc3NhZ2UmJlwiOiBcIikrdGhpcy5tZXNzYWdlfX19O2lmKHIuZ2V0VXNlck1lZGlhPWZ1bmN0aW9uKGUsdCxpKXtuKGUsKGU9PntyLndlYmtpdEdldFVzZXJNZWRpYShlLHQsKGU9PntpJiZpKHMoZSkpfSkpfSkpfS5iaW5kKHIpLHIubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSl7Y29uc3QgZT1yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEuYmluZChyLm1lZGlhRGV2aWNlcyk7ci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhPWZ1bmN0aW9uKHQpe3JldHVybiBuKHQsKHQ9PmUodCkudGhlbigoZT0+e2lmKHQuYXVkaW8mJiFlLmdldEF1ZGlvVHJhY2tzKCkubGVuZ3RofHx0LnZpZGVvJiYhZS5nZXRWaWRlb1RyYWNrcygpLmxlbmd0aCl0aHJvdyBlLmdldFRyYWNrcygpLmZvckVhY2goKGU9PntlLnN0b3AoKX0pKSxuZXcgRE9NRXhjZXB0aW9uKFwiXCIsXCJOb3RGb3VuZEVycm9yXCIpO3JldHVybiBlfSksKGU9PlByb21pc2UucmVqZWN0KHMoZSkpKSkpKX19fWZ1bmN0aW9uIEIoZSl7ZS5NZWRpYVN0cmVhbT1lLk1lZGlhU3RyZWFtfHxlLndlYmtpdE1lZGlhU3RyZWFtfWZ1bmN0aW9uIEgoZSl7aWYoXCJvYmplY3RcIj09dHlwZW9mIGUmJmUuUlRDUGVlckNvbm5lY3Rpb24mJiEoXCJvbnRyYWNrXCJpbiBlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSkpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSxcIm9udHJhY2tcIix7Z2V0KCl7cmV0dXJuIHRoaXMuX29udHJhY2t9LHNldChlKXt0aGlzLl9vbnRyYWNrJiZ0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0cmFja1wiLHRoaXMuX29udHJhY2spLHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcInRyYWNrXCIsdGhpcy5fb250cmFjaz1lKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KTtjb25zdCB0PWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnNldFJlbW90ZURlc2NyaXB0aW9uO2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnNldFJlbW90ZURlc2NyaXB0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29udHJhY2twb2x5fHwodGhpcy5fb250cmFja3BvbHk9dD0+e3Quc3RyZWFtLmFkZEV2ZW50TGlzdGVuZXIoXCJhZGR0cmFja1wiLChyPT57bGV0IGk7aT1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRSZWNlaXZlcnM/dGhpcy5nZXRSZWNlaXZlcnMoKS5maW5kKChlPT5lLnRyYWNrJiZlLnRyYWNrLmlkPT09ci50cmFjay5pZCkpOnt0cmFjazpyLnRyYWNrfTtjb25zdCBuPW5ldyBFdmVudChcInRyYWNrXCIpO24udHJhY2s9ci50cmFjayxuLnJlY2VpdmVyPWksbi50cmFuc2NlaXZlcj17cmVjZWl2ZXI6aX0sbi5zdHJlYW1zPVt0LnN0cmVhbV0sdGhpcy5kaXNwYXRjaEV2ZW50KG4pfSkpLHQuc3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2goKHI9PntsZXQgaTtpPWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFJlY2VpdmVycz90aGlzLmdldFJlY2VpdmVycygpLmZpbmQoKGU9PmUudHJhY2smJmUudHJhY2suaWQ9PT1yLmlkKSk6e3RyYWNrOnJ9O2NvbnN0IG49bmV3IEV2ZW50KFwidHJhY2tcIik7bi50cmFjaz1yLG4ucmVjZWl2ZXI9aSxuLnRyYW5zY2VpdmVyPXtyZWNlaXZlcjppfSxuLnN0cmVhbXM9W3Quc3RyZWFtXSx0aGlzLmRpc3BhdGNoRXZlbnQobil9KSl9LHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImFkZHN0cmVhbVwiLHRoaXMuX29udHJhY2twb2x5KSksdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fWVsc2UgTChlLFwidHJhY2tcIiwoZT0+KGUudHJhbnNjZWl2ZXJ8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwidHJhbnNjZWl2ZXJcIix7dmFsdWU6e3JlY2VpdmVyOmUucmVjZWl2ZXJ9fSksZSkpKX1mdW5jdGlvbiBGKGUpe2lmKFwib2JqZWN0XCI9PXR5cGVvZiBlJiZlLlJUQ1BlZXJDb25uZWN0aW9uJiYhKFwiZ2V0U2VuZGVyc1wiaW4gZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpJiZcImNyZWF0ZURUTUZTZW5kZXJcImluIGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKXtjb25zdCB0PWZ1bmN0aW9uKGUsdCl7cmV0dXJue3RyYWNrOnQsZ2V0IGR0bWYoKXtyZXR1cm4gdm9pZCAwPT09dGhpcy5fZHRtZiYmKFwiYXVkaW9cIj09PXQua2luZD90aGlzLl9kdG1mPWUuY3JlYXRlRFRNRlNlbmRlcih0KTp0aGlzLl9kdG1mPW51bGwpLHRoaXMuX2R0bWZ9LF9wYzplfX07aWYoIWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFNlbmRlcnMpe2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFNlbmRlcnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2VuZGVycz10aGlzLl9zZW5kZXJzfHxbXSx0aGlzLl9zZW5kZXJzLnNsaWNlKCl9O2NvbnN0IHI9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2s7ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2s9ZnVuY3Rpb24oZSxpKXtsZXQgbj1yLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gbnx8KG49dCh0aGlzLGUpLHRoaXMuX3NlbmRlcnMucHVzaChuKSksbn07Y29uc3QgaT1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVUcmFjaztlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVUcmFjaz1mdW5jdGlvbihlKXtpLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtjb25zdCB0PXRoaXMuX3NlbmRlcnMuaW5kZXhPZihlKTstMSE9PXQmJnRoaXMuX3NlbmRlcnMuc3BsaWNlKHQsMSl9fWNvbnN0IHI9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkU3RyZWFtO2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFN0cmVhbT1mdW5jdGlvbihlKXt0aGlzLl9zZW5kZXJzPXRoaXMuX3NlbmRlcnN8fFtdLHIuYXBwbHkodGhpcyxbZV0pLGUuZ2V0VHJhY2tzKCkuZm9yRWFjaCgoZT0+e3RoaXMuX3NlbmRlcnMucHVzaCh0KHRoaXMsZSkpfSkpfTtjb25zdCBpPWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVN0cmVhbTtlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVTdHJlYW09ZnVuY3Rpb24oZSl7dGhpcy5fc2VuZGVycz10aGlzLl9zZW5kZXJzfHxbXSxpLmFwcGx5KHRoaXMsW2VdKSxlLmdldFRyYWNrcygpLmZvckVhY2goKGU9Pntjb25zdCB0PXRoaXMuX3NlbmRlcnMuZmluZCgodD0+dC50cmFjaz09PWUpKTt0JiZ0aGlzLl9zZW5kZXJzLnNwbGljZSh0aGlzLl9zZW5kZXJzLmluZGV4T2YodCksMSl9KSl9fWVsc2UgaWYoXCJvYmplY3RcIj09dHlwZW9mIGUmJmUuUlRDUGVlckNvbm5lY3Rpb24mJlwiZ2V0U2VuZGVyc1wiaW4gZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUmJlwiY3JlYXRlRFRNRlNlbmRlclwiaW4gZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUmJmUuUlRDUnRwU2VuZGVyJiYhKFwiZHRtZlwiaW4gZS5SVENSdHBTZW5kZXIucHJvdG90eXBlKSl7Y29uc3QgdD1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTZW5kZXJzO2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFNlbmRlcnM9ZnVuY3Rpb24oKXtjb25zdCBlPXQuYXBwbHkodGhpcyxbXSk7cmV0dXJuIGUuZm9yRWFjaCgoZT0+ZS5fcGM9dGhpcykpLGV9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLlJUQ1J0cFNlbmRlci5wcm90b3R5cGUsXCJkdG1mXCIse2dldCgpe3JldHVybiB2b2lkIDA9PT10aGlzLl9kdG1mJiYoXCJhdWRpb1wiPT09dGhpcy50cmFjay5raW5kP3RoaXMuX2R0bWY9dGhpcy5fcGMuY3JlYXRlRFRNRlNlbmRlcih0aGlzLnRyYWNrKTp0aGlzLl9kdG1mPW51bGwpLHRoaXMuX2R0bWZ9fSl9fWZ1bmN0aW9uIEsoZSl7aWYoIWUuUlRDUGVlckNvbm5lY3Rpb24pcmV0dXJuO2NvbnN0IHQ9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U3RhdHM7ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U3RhdHM9ZnVuY3Rpb24oKXtjb25zdFtlLHIsaV09YXJndW1lbnRzO2lmKGFyZ3VtZW50cy5sZW5ndGg+MCYmXCJmdW5jdGlvblwiPT10eXBlb2YgZSlyZXR1cm4gdC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYoMD09PXQubGVuZ3RoJiYoMD09PWFyZ3VtZW50cy5sZW5ndGh8fFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUpKXJldHVybiB0LmFwcGx5KHRoaXMsW10pO2NvbnN0IG49ZnVuY3Rpb24oZSl7Y29uc3QgdD17fTtyZXR1cm4gZS5yZXN1bHQoKS5mb3JFYWNoKChlPT57Y29uc3Qgcj17aWQ6ZS5pZCx0aW1lc3RhbXA6ZS50aW1lc3RhbXAsdHlwZTp7bG9jYWxjYW5kaWRhdGU6XCJsb2NhbC1jYW5kaWRhdGVcIixyZW1vdGVjYW5kaWRhdGU6XCJyZW1vdGUtY2FuZGlkYXRlXCJ9W2UudHlwZV18fGUudHlwZX07ZS5uYW1lcygpLmZvckVhY2goKHQ9PntyW3RdPWUuc3RhdCh0KX0pKSx0W3IuaWRdPXJ9KSksdH0scz1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IE1hcChPYmplY3Qua2V5cyhlKS5tYXAoKHQ9Plt0LGVbdF1dKSkpfTtpZihhcmd1bWVudHMubGVuZ3RoPj0yKXtjb25zdCBpPWZ1bmN0aW9uKGUpe3IocyhuKGUpKSl9O3JldHVybiB0LmFwcGx5KHRoaXMsW2ksZV0pfXJldHVybiBuZXcgUHJvbWlzZSgoKGUscik9Pnt0LmFwcGx5KHRoaXMsW2Z1bmN0aW9uKHQpe2UocyhuKHQpKSl9LHJdKX0pKS50aGVuKHIsaSl9fWZ1bmN0aW9uIEcoZSl7aWYoIShcIm9iamVjdFwiPT10eXBlb2YgZSYmZS5SVENQZWVyQ29ubmVjdGlvbiYmZS5SVENSdHBTZW5kZXImJmUuUlRDUnRwUmVjZWl2ZXIpKXJldHVybjtpZighKFwiZ2V0U3RhdHNcImluIGUuUlRDUnRwU2VuZGVyLnByb3RvdHlwZSkpe2NvbnN0IHQ9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U2VuZGVyczt0JiYoZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U2VuZGVycz1mdW5jdGlvbigpe2NvbnN0IGU9dC5hcHBseSh0aGlzLFtdKTtyZXR1cm4gZS5mb3JFYWNoKChlPT5lLl9wYz10aGlzKSksZX0pO2NvbnN0IHI9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2s7ciYmKGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrPWZ1bmN0aW9uKCl7Y29uc3QgZT1yLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gZS5fcGM9dGhpcyxlfSksZS5SVENSdHBTZW5kZXIucHJvdG90eXBlLmdldFN0YXRzPWZ1bmN0aW9uKCl7Y29uc3QgZT10aGlzO3JldHVybiB0aGlzLl9wYy5nZXRTdGF0cygpLnRoZW4oKHQ9PiQodCxlLnRyYWNrLCEwKSkpfX1pZighKFwiZ2V0U3RhdHNcImluIGUuUlRDUnRwUmVjZWl2ZXIucHJvdG90eXBlKSl7Y29uc3QgdD1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRSZWNlaXZlcnM7dCYmKGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFJlY2VpdmVycz1mdW5jdGlvbigpe2NvbnN0IGU9dC5hcHBseSh0aGlzLFtdKTtyZXR1cm4gZS5mb3JFYWNoKChlPT5lLl9wYz10aGlzKSksZX0pLEwoZSxcInRyYWNrXCIsKGU9PihlLnJlY2VpdmVyLl9wYz1lLnNyY0VsZW1lbnQsZSkpKSxlLlJUQ1J0cFJlY2VpdmVyLnByb3RvdHlwZS5nZXRTdGF0cz1mdW5jdGlvbigpe2NvbnN0IGU9dGhpcztyZXR1cm4gdGhpcy5fcGMuZ2V0U3RhdHMoKS50aGVuKCh0PT4kKHQsZS50cmFjaywhMSkpKX19aWYoIShcImdldFN0YXRzXCJpbiBlLlJUQ1J0cFNlbmRlci5wcm90b3R5cGUpfHwhKFwiZ2V0U3RhdHNcImluIGUuUlRDUnRwUmVjZWl2ZXIucHJvdG90eXBlKSlyZXR1cm47Y29uc3QgdD1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTdGF0cztlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTdGF0cz1mdW5jdGlvbigpe2lmKGFyZ3VtZW50cy5sZW5ndGg+MCYmYXJndW1lbnRzWzBdaW5zdGFuY2VvZiBlLk1lZGlhU3RyZWFtVHJhY2spe2NvbnN0IGU9YXJndW1lbnRzWzBdO2xldCB0LHIsaTtyZXR1cm4gdGhpcy5nZXRTZW5kZXJzKCkuZm9yRWFjaCgocj0+e3IudHJhY2s9PT1lJiYodD9pPSEwOnQ9cil9KSksdGhpcy5nZXRSZWNlaXZlcnMoKS5mb3JFYWNoKCh0PT4odC50cmFjaz09PWUmJihyP2k9ITA6cj10KSx0LnRyYWNrPT09ZSkpKSxpfHx0JiZyP1Byb21pc2UucmVqZWN0KG5ldyBET01FeGNlcHRpb24oXCJUaGVyZSBhcmUgbW9yZSB0aGFuIG9uZSBzZW5kZXIgb3IgcmVjZWl2ZXIgZm9yIHRoZSB0cmFjay5cIixcIkludmFsaWRBY2Nlc3NFcnJvclwiKSk6dD90LmdldFN0YXRzKCk6cj9yLmdldFN0YXRzKCk6UHJvbWlzZS5yZWplY3QobmV3IERPTUV4Y2VwdGlvbihcIlRoZXJlIGlzIG5vIHNlbmRlciBvciByZWNlaXZlciBmb3IgdGhlIHRyYWNrLlwiLFwiSW52YWxpZEFjY2Vzc0Vycm9yXCIpKX1yZXR1cm4gdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIEooZSl7ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0TG9jYWxTdHJlYW1zPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXM9dGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtc3x8e30sT2JqZWN0LmtleXModGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtcykubWFwKChlPT50aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zW2VdWzBdKSl9O2NvbnN0IHQ9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2s7ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2s9ZnVuY3Rpb24oZSxyKXtpZighcilyZXR1cm4gdC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtcz10aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zfHx7fTtjb25zdCBpPXQuYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiB0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zW3IuaWRdPy0xPT09dGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtc1tyLmlkXS5pbmRleE9mKGkpJiZ0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zW3IuaWRdLnB1c2goaSk6dGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtc1tyLmlkXT1bcixpXSxpfTtjb25zdCByPWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFN0cmVhbTtlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRTdHJlYW09ZnVuY3Rpb24oZSl7dGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtcz10aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zfHx7fSxlLmdldFRyYWNrcygpLmZvckVhY2goKGU9PntpZih0aGlzLmdldFNlbmRlcnMoKS5maW5kKCh0PT50LnRyYWNrPT09ZSkpKXRocm93IG5ldyBET01FeGNlcHRpb24oXCJUcmFjayBhbHJlYWR5IGV4aXN0cy5cIixcIkludmFsaWRBY2Nlc3NFcnJvclwiKX0pKTtjb25zdCB0PXRoaXMuZ2V0U2VuZGVycygpO3IuYXBwbHkodGhpcyxhcmd1bWVudHMpO2NvbnN0IGk9dGhpcy5nZXRTZW5kZXJzKCkuZmlsdGVyKChlPT4tMT09PXQuaW5kZXhPZihlKSkpO3RoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXNbZS5pZF09W2VdLmNvbmNhdChpKX07Y29uc3QgaT1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVTdHJlYW07ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlU3RyZWFtPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zPXRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXN8fHt9LGRlbGV0ZSB0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zW2UuaWRdLGkuYXBwbHkodGhpcyxhcmd1bWVudHMpfTtjb25zdCBuPWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVRyYWNrO2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVRyYWNrPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zPXRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXN8fHt9LGUmJk9iamVjdC5rZXlzKHRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXMpLmZvckVhY2goKHQ9Pntjb25zdCByPXRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXNbdF0uaW5kZXhPZihlKTstMSE9PXImJnRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXNbdF0uc3BsaWNlKHIsMSksMT09PXRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXNbdF0ubGVuZ3RoJiZkZWxldGUgdGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtc1t0XX0pKSxuLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19ZnVuY3Rpb24gVyhlLHQpe2lmKCFlLlJUQ1BlZXJDb25uZWN0aW9uKXJldHVybjtpZihlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRUcmFjayYmdC52ZXJzaW9uPj02NSlyZXR1cm4gSihlKTtjb25zdCByPWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldExvY2FsU3RyZWFtcztlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRMb2NhbFN0cmVhbXM9ZnVuY3Rpb24oKXtjb25zdCBlPXIuYXBwbHkodGhpcyk7cmV0dXJuIHRoaXMuX3JldmVyc2VTdHJlYW1zPXRoaXMuX3JldmVyc2VTdHJlYW1zfHx7fSxlLm1hcCgoZT0+dGhpcy5fcmV2ZXJzZVN0cmVhbXNbZS5pZF0pKX07Y29uc3QgaT1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRTdHJlYW07ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkU3RyZWFtPWZ1bmN0aW9uKHQpe2lmKHRoaXMuX3N0cmVhbXM9dGhpcy5fc3RyZWFtc3x8e30sdGhpcy5fcmV2ZXJzZVN0cmVhbXM9dGhpcy5fcmV2ZXJzZVN0cmVhbXN8fHt9LHQuZ2V0VHJhY2tzKCkuZm9yRWFjaCgoZT0+e2lmKHRoaXMuZ2V0U2VuZGVycygpLmZpbmQoKHQ9PnQudHJhY2s9PT1lKSkpdGhyb3cgbmV3IERPTUV4Y2VwdGlvbihcIlRyYWNrIGFscmVhZHkgZXhpc3RzLlwiLFwiSW52YWxpZEFjY2Vzc0Vycm9yXCIpfSkpLCF0aGlzLl9yZXZlcnNlU3RyZWFtc1t0LmlkXSl7Y29uc3Qgcj1uZXcgZS5NZWRpYVN0cmVhbSh0LmdldFRyYWNrcygpKTt0aGlzLl9zdHJlYW1zW3QuaWRdPXIsdGhpcy5fcmV2ZXJzZVN0cmVhbXNbci5pZF09dCx0PXJ9aS5hcHBseSh0aGlzLFt0XSl9O2NvbnN0IG49ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlU3RyZWFtO2Z1bmN0aW9uIHMoZSx0KXtsZXQgcj10LnNkcDtyZXR1cm4gT2JqZWN0LmtleXMoZS5fcmV2ZXJzZVN0cmVhbXN8fFtdKS5mb3JFYWNoKCh0PT57Y29uc3QgaT1lLl9yZXZlcnNlU3RyZWFtc1t0XSxuPWUuX3N0cmVhbXNbaS5pZF07cj1yLnJlcGxhY2UobmV3IFJlZ0V4cChuLmlkLFwiZ1wiKSxpLmlkKX0pKSxuZXcgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKHt0eXBlOnQudHlwZSxzZHA6cn0pfWZ1bmN0aW9uIG8oZSx0KXtsZXQgcj10LnNkcDtyZXR1cm4gT2JqZWN0LmtleXMoZS5fcmV2ZXJzZVN0cmVhbXN8fFtdKS5mb3JFYWNoKCh0PT57Y29uc3QgaT1lLl9yZXZlcnNlU3RyZWFtc1t0XSxuPWUuX3N0cmVhbXNbaS5pZF07cj1yLnJlcGxhY2UobmV3IFJlZ0V4cChpLmlkLFwiZ1wiKSxuLmlkKX0pKSxuZXcgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKHt0eXBlOnQudHlwZSxzZHA6cn0pfWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVN0cmVhbT1mdW5jdGlvbihlKXt0aGlzLl9zdHJlYW1zPXRoaXMuX3N0cmVhbXN8fHt9LHRoaXMuX3JldmVyc2VTdHJlYW1zPXRoaXMuX3JldmVyc2VTdHJlYW1zfHx7fSxuLmFwcGx5KHRoaXMsW3RoaXMuX3N0cmVhbXNbZS5pZF18fGVdKSxkZWxldGUgdGhpcy5fcmV2ZXJzZVN0cmVhbXNbdGhpcy5fc3RyZWFtc1tlLmlkXT90aGlzLl9zdHJlYW1zW2UuaWRdLmlkOmUuaWRdLGRlbGV0ZSB0aGlzLl9zdHJlYW1zW2UuaWRdfSxlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRUcmFjaz1mdW5jdGlvbih0LHIpe2lmKFwiY2xvc2VkXCI9PT10aGlzLnNpZ25hbGluZ1N0YXRlKXRocm93IG5ldyBET01FeGNlcHRpb24oXCJUaGUgUlRDUGVlckNvbm5lY3Rpb24ncyBzaWduYWxpbmdTdGF0ZSBpcyAnY2xvc2VkJy5cIixcIkludmFsaWRTdGF0ZUVycm9yXCIpO2NvbnN0IGk9W10uc2xpY2UuY2FsbChhcmd1bWVudHMsMSk7aWYoMSE9PWkubGVuZ3RofHwhaVswXS5nZXRUcmFja3MoKS5maW5kKChlPT5lPT09dCkpKXRocm93IG5ldyBET01FeGNlcHRpb24oXCJUaGUgYWRhcHRlci5qcyBhZGRUcmFjayBwb2x5ZmlsbCBvbmx5IHN1cHBvcnRzIGEgc2luZ2xlICBzdHJlYW0gd2hpY2ggaXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBzcGVjaWZpZWQgdHJhY2suXCIsXCJOb3RTdXBwb3J0ZWRFcnJvclwiKTtjb25zdCBuPXRoaXMuZ2V0U2VuZGVycygpLmZpbmQoKGU9PmUudHJhY2s9PT10KSk7aWYobil0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKFwiVHJhY2sgYWxyZWFkeSBleGlzdHMuXCIsXCJJbnZhbGlkQWNjZXNzRXJyb3JcIik7dGhpcy5fc3RyZWFtcz10aGlzLl9zdHJlYW1zfHx7fSx0aGlzLl9yZXZlcnNlU3RyZWFtcz10aGlzLl9yZXZlcnNlU3RyZWFtc3x8e307Y29uc3Qgcz10aGlzLl9zdHJlYW1zW3IuaWRdO2lmKHMpcy5hZGRUcmFjayh0KSxQcm9taXNlLnJlc29sdmUoKS50aGVuKCgoKT0+e3RoaXMuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJuZWdvdGlhdGlvbm5lZWRlZFwiKSl9KSk7ZWxzZXtjb25zdCBpPW5ldyBlLk1lZGlhU3RyZWFtKFt0XSk7dGhpcy5fc3RyZWFtc1tyLmlkXT1pLHRoaXMuX3JldmVyc2VTdHJlYW1zW2kuaWRdPXIsdGhpcy5hZGRTdHJlYW0oaSl9cmV0dXJuIHRoaXMuZ2V0U2VuZGVycygpLmZpbmQoKGU9PmUudHJhY2s9PT10KSl9LFtcImNyZWF0ZU9mZmVyXCIsXCJjcmVhdGVBbnN3ZXJcIl0uZm9yRWFjaCgoZnVuY3Rpb24odCl7Y29uc3Qgcj1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVt0XSxpPXtbdF0oKXtjb25zdCBlPWFyZ3VtZW50cztyZXR1cm4gYXJndW1lbnRzLmxlbmd0aCYmXCJmdW5jdGlvblwiPT10eXBlb2YgYXJndW1lbnRzWzBdP3IuYXBwbHkodGhpcyxbdD0+e2NvbnN0IHI9cyh0aGlzLHQpO2VbMF0uYXBwbHkobnVsbCxbcl0pfSx0PT57ZVsxXSYmZVsxXS5hcHBseShudWxsLHQpfSxhcmd1bWVudHNbMl1dKTpyLmFwcGx5KHRoaXMsYXJndW1lbnRzKS50aGVuKChlPT5zKHRoaXMsZSkpKX19O2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlW3RdPWlbdF19KSk7Y29uc3QgYT1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRMb2NhbERlc2NyaXB0aW9uO2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnNldExvY2FsRGVzY3JpcHRpb249ZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aCYmYXJndW1lbnRzWzBdLnR5cGU/KGFyZ3VtZW50c1swXT1vKHRoaXMsYXJndW1lbnRzWzBdKSxhLmFwcGx5KHRoaXMsYXJndW1lbnRzKSk6YS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O2NvbnN0IGM9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSxcImxvY2FsRGVzY3JpcHRpb25cIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLFwibG9jYWxEZXNjcmlwdGlvblwiLHtnZXQoKXtjb25zdCBlPWMuZ2V0LmFwcGx5KHRoaXMpO3JldHVyblwiXCI9PT1lLnR5cGU/ZTpzKHRoaXMsZSl9fSksZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlVHJhY2s9ZnVuY3Rpb24oZSl7aWYoXCJjbG9zZWRcIj09PXRoaXMuc2lnbmFsaW5nU3RhdGUpdGhyb3cgbmV3IERPTUV4Y2VwdGlvbihcIlRoZSBSVENQZWVyQ29ubmVjdGlvbidzIHNpZ25hbGluZ1N0YXRlIGlzICdjbG9zZWQnLlwiLFwiSW52YWxpZFN0YXRlRXJyb3JcIik7aWYoIWUuX3BjKXRocm93IG5ldyBET01FeGNlcHRpb24oXCJBcmd1bWVudCAxIG9mIFJUQ1BlZXJDb25uZWN0aW9uLnJlbW92ZVRyYWNrIGRvZXMgbm90IGltcGxlbWVudCBpbnRlcmZhY2UgUlRDUnRwU2VuZGVyLlwiLFwiVHlwZUVycm9yXCIpO2lmKCEoZS5fcGM9PT10aGlzKSl0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKFwiU2VuZGVyIHdhcyBub3QgY3JlYXRlZCBieSB0aGlzIGNvbm5lY3Rpb24uXCIsXCJJbnZhbGlkQWNjZXNzRXJyb3JcIik7bGV0IHQ7dGhpcy5fc3RyZWFtcz10aGlzLl9zdHJlYW1zfHx7fSxPYmplY3Qua2V5cyh0aGlzLl9zdHJlYW1zKS5mb3JFYWNoKChyPT57dGhpcy5fc3RyZWFtc1tyXS5nZXRUcmFja3MoKS5maW5kKCh0PT5lLnRyYWNrPT09dCkpJiYodD10aGlzLl9zdHJlYW1zW3JdKX0pKSx0JiYoMT09PXQuZ2V0VHJhY2tzKCkubGVuZ3RoP3RoaXMucmVtb3ZlU3RyZWFtKHRoaXMuX3JldmVyc2VTdHJlYW1zW3QuaWRdKTp0LnJlbW92ZVRyYWNrKGUudHJhY2spLHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJuZWdvdGlhdGlvbm5lZWRlZFwiKSkpfX1mdW5jdGlvbiBZKGUsdCl7IWUuUlRDUGVlckNvbm5lY3Rpb24mJmUud2Via2l0UlRDUGVlckNvbm5lY3Rpb24mJihlLlJUQ1BlZXJDb25uZWN0aW9uPWUud2Via2l0UlRDUGVlckNvbm5lY3Rpb24pLGUuUlRDUGVlckNvbm5lY3Rpb24mJnQudmVyc2lvbjw1MyYmW1wic2V0TG9jYWxEZXNjcmlwdGlvblwiLFwic2V0UmVtb3RlRGVzY3JpcHRpb25cIixcImFkZEljZUNhbmRpZGF0ZVwiXS5mb3JFYWNoKChmdW5jdGlvbih0KXtjb25zdCByPWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlW3RdLGk9e1t0XSgpe3JldHVybiBhcmd1bWVudHNbMF09bmV3KFwiYWRkSWNlQ2FuZGlkYXRlXCI9PT10P2UuUlRDSWNlQ2FuZGlkYXRlOmUuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKShhcmd1bWVudHNbMF0pLHIuYXBwbHkodGhpcyxhcmd1bWVudHMpfX07ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbdF09aVt0XX0pKX1mdW5jdGlvbiBxKGUsdCl7TChlLFwibmVnb3RpYXRpb25uZWVkZWRcIiwoZT0+e2NvbnN0IHI9ZS50YXJnZXQ7aWYoISh0LnZlcnNpb248NzJ8fHIuZ2V0Q29uZmlndXJhdGlvbiYmXCJwbGFuLWJcIj09PXIuZ2V0Q29uZmlndXJhdGlvbigpLnNkcFNlbWFudGljcyl8fFwic3RhYmxlXCI9PT1yLnNpZ25hbGluZ1N0YXRlKXJldHVybiBlfSkpfXZhciB6PU9iamVjdC5mcmVlemUoe19fcHJvdG9fXzpudWxsLHNoaW1NZWRpYVN0cmVhbTpCLHNoaW1PblRyYWNrOkgsc2hpbUdldFNlbmRlcnNXaXRoRHRtZjpGLHNoaW1HZXRTdGF0czpLLHNoaW1TZW5kZXJSZWNlaXZlckdldFN0YXRzOkcsc2hpbUFkZFRyYWNrUmVtb3ZlVHJhY2tXaXRoTmF0aXZlOkosc2hpbUFkZFRyYWNrUmVtb3ZlVHJhY2s6VyxzaGltUGVlckNvbm5lY3Rpb246WSxmaXhOZWdvdGlhdGlvbk5lZWRlZDpxLHNoaW1HZXRVc2VyTWVkaWE6VixzaGltR2V0RGlzcGxheU1lZGlhOmZ1bmN0aW9uKGUsdCl7ZS5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzJiZcImdldERpc3BsYXlNZWRpYVwiaW4gZS5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzfHxlLm5hdmlnYXRvci5tZWRpYURldmljZXMmJihcImZ1bmN0aW9uXCI9PXR5cGVvZiB0P2UubmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXREaXNwbGF5TWVkaWE9ZnVuY3Rpb24ocil7cmV0dXJuIHQocikudGhlbigodD0+e2NvbnN0IGk9ci52aWRlbyYmci52aWRlby53aWR0aCxuPXIudmlkZW8mJnIudmlkZW8uaGVpZ2h0LHM9ci52aWRlbyYmci52aWRlby5mcmFtZVJhdGU7cmV0dXJuIHIudmlkZW89e21hbmRhdG9yeTp7Y2hyb21lTWVkaWFTb3VyY2U6XCJkZXNrdG9wXCIsY2hyb21lTWVkaWFTb3VyY2VJZDp0LG1heEZyYW1lUmF0ZTpzfHwzfX0saSYmKHIudmlkZW8ubWFuZGF0b3J5Lm1heFdpZHRoPWkpLG4mJihyLnZpZGVvLm1hbmRhdG9yeS5tYXhIZWlnaHQ9biksZS5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYShyKX0pKX06Y29uc29sZS5lcnJvcihcInNoaW1HZXREaXNwbGF5TWVkaWE6IGdldFNvdXJjZUlkIGFyZ3VtZW50IGlzIG5vdCBhIGZ1bmN0aW9uXCIpKX19KTt2YXIgUSxYLFo9KFE9ZnVuY3Rpb24oZSl7dmFyIHQ9e2dlbmVyYXRlSWRlbnRpZmllcjpmdW5jdGlvbigpe3JldHVybiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwxMCl9fTt0LmxvY2FsQ05hbWU9dC5nZW5lcmF0ZUlkZW50aWZpZXIoKSx0LnNwbGl0TGluZXM9ZnVuY3Rpb24oZSl7cmV0dXJuIGUudHJpbSgpLnNwbGl0KFwiXFxuXCIpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUudHJpbSgpfSkpfSx0LnNwbGl0U2VjdGlvbnM9ZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3BsaXQoXCJcXG5tPVwiKS5tYXAoKGZ1bmN0aW9uKGUsdCl7cmV0dXJuKHQ+MD9cIm09XCIrZTplKS50cmltKCkrXCJcXHJcXG5cIn0pKX0sdC5nZXREZXNjcmlwdGlvbj1mdW5jdGlvbihlKXt2YXIgcj10LnNwbGl0U2VjdGlvbnMoZSk7cmV0dXJuIHImJnJbMF19LHQuZ2V0TWVkaWFTZWN0aW9ucz1mdW5jdGlvbihlKXt2YXIgcj10LnNwbGl0U2VjdGlvbnMoZSk7cmV0dXJuIHIuc2hpZnQoKSxyfSx0Lm1hdGNoUHJlZml4PWZ1bmN0aW9uKGUscil7cmV0dXJuIHQuc3BsaXRMaW5lcyhlKS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiAwPT09ZS5pbmRleE9mKHIpfSkpfSx0LnBhcnNlQ2FuZGlkYXRlPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxyPXtmb3VuZGF0aW9uOih0PTA9PT1lLmluZGV4T2YoXCJhPWNhbmRpZGF0ZTpcIik/ZS5zdWJzdHJpbmcoMTIpLnNwbGl0KFwiIFwiKTplLnN1YnN0cmluZygxMCkuc3BsaXQoXCIgXCIpKVswXSxjb21wb25lbnQ6cGFyc2VJbnQodFsxXSwxMCkscHJvdG9jb2w6dFsyXS50b0xvd2VyQ2FzZSgpLHByaW9yaXR5OnBhcnNlSW50KHRbM10sMTApLGlwOnRbNF0sYWRkcmVzczp0WzRdLHBvcnQ6cGFyc2VJbnQodFs1XSwxMCksdHlwZTp0WzddfSxpPTg7aTx0Lmxlbmd0aDtpKz0yKXN3aXRjaCh0W2ldKXtjYXNlXCJyYWRkclwiOnIucmVsYXRlZEFkZHJlc3M9dFtpKzFdO2JyZWFrO2Nhc2VcInJwb3J0XCI6ci5yZWxhdGVkUG9ydD1wYXJzZUludCh0W2krMV0sMTApO2JyZWFrO2Nhc2VcInRjcHR5cGVcIjpyLnRjcFR5cGU9dFtpKzFdO2JyZWFrO2Nhc2VcInVmcmFnXCI6ci51ZnJhZz10W2krMV0sci51c2VybmFtZUZyYWdtZW50PXRbaSsxXTticmVhaztkZWZhdWx0OnJbdFtpXV09dFtpKzFdfXJldHVybiByfSx0LndyaXRlQ2FuZGlkYXRlPWZ1bmN0aW9uKGUpe3ZhciB0PVtdO3QucHVzaChlLmZvdW5kYXRpb24pLHQucHVzaChlLmNvbXBvbmVudCksdC5wdXNoKGUucHJvdG9jb2wudG9VcHBlckNhc2UoKSksdC5wdXNoKGUucHJpb3JpdHkpLHQucHVzaChlLmFkZHJlc3N8fGUuaXApLHQucHVzaChlLnBvcnQpO3ZhciByPWUudHlwZTtyZXR1cm4gdC5wdXNoKFwidHlwXCIpLHQucHVzaChyKSxcImhvc3RcIiE9PXImJmUucmVsYXRlZEFkZHJlc3MmJmUucmVsYXRlZFBvcnQmJih0LnB1c2goXCJyYWRkclwiKSx0LnB1c2goZS5yZWxhdGVkQWRkcmVzcyksdC5wdXNoKFwicnBvcnRcIiksdC5wdXNoKGUucmVsYXRlZFBvcnQpKSxlLnRjcFR5cGUmJlwidGNwXCI9PT1lLnByb3RvY29sLnRvTG93ZXJDYXNlKCkmJih0LnB1c2goXCJ0Y3B0eXBlXCIpLHQucHVzaChlLnRjcFR5cGUpKSwoZS51c2VybmFtZUZyYWdtZW50fHxlLnVmcmFnKSYmKHQucHVzaChcInVmcmFnXCIpLHQucHVzaChlLnVzZXJuYW1lRnJhZ21lbnR8fGUudWZyYWcpKSxcImNhbmRpZGF0ZTpcIit0LmpvaW4oXCIgXCIpfSx0LnBhcnNlSWNlT3B0aW9ucz1mdW5jdGlvbihlKXtyZXR1cm4gZS5zdWJzdHIoMTQpLnNwbGl0KFwiIFwiKX0sdC5wYXJzZVJ0cE1hcD1mdW5jdGlvbihlKXt2YXIgdD1lLnN1YnN0cig5KS5zcGxpdChcIiBcIikscj17cGF5bG9hZFR5cGU6cGFyc2VJbnQodC5zaGlmdCgpLDEwKX07cmV0dXJuIHQ9dFswXS5zcGxpdChcIi9cIiksci5uYW1lPXRbMF0sci5jbG9ja1JhdGU9cGFyc2VJbnQodFsxXSwxMCksci5jaGFubmVscz0zPT09dC5sZW5ndGg/cGFyc2VJbnQodFsyXSwxMCk6MSxyLm51bUNoYW5uZWxzPXIuY2hhbm5lbHMscn0sdC53cml0ZVJ0cE1hcD1mdW5jdGlvbihlKXt2YXIgdD1lLnBheWxvYWRUeXBlO3ZvaWQgMCE9PWUucHJlZmVycmVkUGF5bG9hZFR5cGUmJih0PWUucHJlZmVycmVkUGF5bG9hZFR5cGUpO3ZhciByPWUuY2hhbm5lbHN8fGUubnVtQ2hhbm5lbHN8fDE7cmV0dXJuXCJhPXJ0cG1hcDpcIit0K1wiIFwiK2UubmFtZStcIi9cIitlLmNsb2NrUmF0ZSsoMSE9PXI/XCIvXCIrcjpcIlwiKStcIlxcclxcblwifSx0LnBhcnNlRXh0bWFwPWZ1bmN0aW9uKGUpe3ZhciB0PWUuc3Vic3RyKDkpLnNwbGl0KFwiIFwiKTtyZXR1cm57aWQ6cGFyc2VJbnQodFswXSwxMCksZGlyZWN0aW9uOnRbMF0uaW5kZXhPZihcIi9cIik+MD90WzBdLnNwbGl0KFwiL1wiKVsxXTpcInNlbmRyZWN2XCIsdXJpOnRbMV19fSx0LndyaXRlRXh0bWFwPWZ1bmN0aW9uKGUpe3JldHVyblwiYT1leHRtYXA6XCIrKGUuaWR8fGUucHJlZmVycmVkSWQpKyhlLmRpcmVjdGlvbiYmXCJzZW5kcmVjdlwiIT09ZS5kaXJlY3Rpb24/XCIvXCIrZS5kaXJlY3Rpb246XCJcIikrXCIgXCIrZS51cmkrXCJcXHJcXG5cIn0sdC5wYXJzZUZtdHA9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LHI9e30saT1lLnN1YnN0cihlLmluZGV4T2YoXCIgXCIpKzEpLnNwbGl0KFwiO1wiKSxuPTA7bjxpLmxlbmd0aDtuKyspclsodD1pW25dLnRyaW0oKS5zcGxpdChcIj1cIikpWzBdLnRyaW0oKV09dFsxXTtyZXR1cm4gcn0sdC53cml0ZUZtdHA9ZnVuY3Rpb24oZSl7dmFyIHQ9XCJcIixyPWUucGF5bG9hZFR5cGU7aWYodm9pZCAwIT09ZS5wcmVmZXJyZWRQYXlsb2FkVHlwZSYmKHI9ZS5wcmVmZXJyZWRQYXlsb2FkVHlwZSksZS5wYXJhbWV0ZXJzJiZPYmplY3Qua2V5cyhlLnBhcmFtZXRlcnMpLmxlbmd0aCl7dmFyIGk9W107T2JqZWN0LmtleXMoZS5wYXJhbWV0ZXJzKS5mb3JFYWNoKChmdW5jdGlvbih0KXtlLnBhcmFtZXRlcnNbdF0/aS5wdXNoKHQrXCI9XCIrZS5wYXJhbWV0ZXJzW3RdKTppLnB1c2godCl9KSksdCs9XCJhPWZtdHA6XCIrcitcIiBcIitpLmpvaW4oXCI7XCIpK1wiXFxyXFxuXCJ9cmV0dXJuIHR9LHQucGFyc2VSdGNwRmI9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zdWJzdHIoZS5pbmRleE9mKFwiIFwiKSsxKS5zcGxpdChcIiBcIik7cmV0dXJue3R5cGU6dC5zaGlmdCgpLHBhcmFtZXRlcjp0LmpvaW4oXCIgXCIpfX0sdC53cml0ZVJ0Y3BGYj1mdW5jdGlvbihlKXt2YXIgdD1cIlwiLHI9ZS5wYXlsb2FkVHlwZTtyZXR1cm4gdm9pZCAwIT09ZS5wcmVmZXJyZWRQYXlsb2FkVHlwZSYmKHI9ZS5wcmVmZXJyZWRQYXlsb2FkVHlwZSksZS5ydGNwRmVlZGJhY2smJmUucnRjcEZlZWRiYWNrLmxlbmd0aCYmZS5ydGNwRmVlZGJhY2suZm9yRWFjaCgoZnVuY3Rpb24oZSl7dCs9XCJhPXJ0Y3AtZmI6XCIrcitcIiBcIitlLnR5cGUrKGUucGFyYW1ldGVyJiZlLnBhcmFtZXRlci5sZW5ndGg/XCIgXCIrZS5wYXJhbWV0ZXI6XCJcIikrXCJcXHJcXG5cIn0pKSx0fSx0LnBhcnNlU3NyY01lZGlhPWZ1bmN0aW9uKGUpe3ZhciB0PWUuaW5kZXhPZihcIiBcIikscj17c3NyYzpwYXJzZUludChlLnN1YnN0cig3LHQtNyksMTApfSxpPWUuaW5kZXhPZihcIjpcIix0KTtyZXR1cm4gaT4tMT8oci5hdHRyaWJ1dGU9ZS5zdWJzdHIodCsxLGktdC0xKSxyLnZhbHVlPWUuc3Vic3RyKGkrMSkpOnIuYXR0cmlidXRlPWUuc3Vic3RyKHQrMSkscn0sdC5wYXJzZVNzcmNHcm91cD1mdW5jdGlvbihlKXt2YXIgdD1lLnN1YnN0cigxMykuc3BsaXQoXCIgXCIpO3JldHVybntzZW1hbnRpY3M6dC5zaGlmdCgpLHNzcmNzOnQubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gcGFyc2VJbnQoZSwxMCl9KSl9fSx0LmdldE1pZD1mdW5jdGlvbihlKXt2YXIgcj10Lm1hdGNoUHJlZml4KGUsXCJhPW1pZDpcIilbMF07aWYocilyZXR1cm4gci5zdWJzdHIoNil9LHQucGFyc2VGaW5nZXJwcmludD1mdW5jdGlvbihlKXt2YXIgdD1lLnN1YnN0cigxNCkuc3BsaXQoXCIgXCIpO3JldHVybnthbGdvcml0aG06dFswXS50b0xvd2VyQ2FzZSgpLHZhbHVlOnRbMV19fSx0LmdldER0bHNQYXJhbWV0ZXJzPWZ1bmN0aW9uKGUscil7cmV0dXJue3JvbGU6XCJhdXRvXCIsZmluZ2VycHJpbnRzOnQubWF0Y2hQcmVmaXgoZStyLFwiYT1maW5nZXJwcmludDpcIikubWFwKHQucGFyc2VGaW5nZXJwcmludCl9fSx0LndyaXRlRHRsc1BhcmFtZXRlcnM9ZnVuY3Rpb24oZSx0KXt2YXIgcj1cImE9c2V0dXA6XCIrdCtcIlxcclxcblwiO3JldHVybiBlLmZpbmdlcnByaW50cy5mb3JFYWNoKChmdW5jdGlvbihlKXtyKz1cImE9ZmluZ2VycHJpbnQ6XCIrZS5hbGdvcml0aG0rXCIgXCIrZS52YWx1ZStcIlxcclxcblwifSkpLHJ9LHQucGFyc2VDcnlwdG9MaW5lPWZ1bmN0aW9uKGUpe3ZhciB0PWUuc3Vic3RyKDkpLnNwbGl0KFwiIFwiKTtyZXR1cm57dGFnOnBhcnNlSW50KHRbMF0sMTApLGNyeXB0b1N1aXRlOnRbMV0sa2V5UGFyYW1zOnRbMl0sc2Vzc2lvblBhcmFtczp0LnNsaWNlKDMpfX0sdC53cml0ZUNyeXB0b0xpbmU9ZnVuY3Rpb24oZSl7cmV0dXJuXCJhPWNyeXB0bzpcIitlLnRhZytcIiBcIitlLmNyeXB0b1N1aXRlK1wiIFwiKyhcIm9iamVjdFwiPT10eXBlb2YgZS5rZXlQYXJhbXM/dC53cml0ZUNyeXB0b0tleVBhcmFtcyhlLmtleVBhcmFtcyk6ZS5rZXlQYXJhbXMpKyhlLnNlc3Npb25QYXJhbXM/XCIgXCIrZS5zZXNzaW9uUGFyYW1zLmpvaW4oXCIgXCIpOlwiXCIpK1wiXFxyXFxuXCJ9LHQucGFyc2VDcnlwdG9LZXlQYXJhbXM9ZnVuY3Rpb24oZSl7aWYoMCE9PWUuaW5kZXhPZihcImlubGluZTpcIikpcmV0dXJuIG51bGw7dmFyIHQ9ZS5zdWJzdHIoNykuc3BsaXQoXCJ8XCIpO3JldHVybntrZXlNZXRob2Q6XCJpbmxpbmVcIixrZXlTYWx0OnRbMF0sbGlmZVRpbWU6dFsxXSxta2lWYWx1ZTp0WzJdP3RbMl0uc3BsaXQoXCI6XCIpWzBdOnZvaWQgMCxta2lMZW5ndGg6dFsyXT90WzJdLnNwbGl0KFwiOlwiKVsxXTp2b2lkIDB9fSx0LndyaXRlQ3J5cHRvS2V5UGFyYW1zPWZ1bmN0aW9uKGUpe3JldHVybiBlLmtleU1ldGhvZCtcIjpcIitlLmtleVNhbHQrKGUubGlmZVRpbWU/XCJ8XCIrZS5saWZlVGltZTpcIlwiKSsoZS5ta2lWYWx1ZSYmZS5ta2lMZW5ndGg/XCJ8XCIrZS5ta2lWYWx1ZStcIjpcIitlLm1raUxlbmd0aDpcIlwiKX0sdC5nZXRDcnlwdG9QYXJhbWV0ZXJzPWZ1bmN0aW9uKGUscil7cmV0dXJuIHQubWF0Y2hQcmVmaXgoZStyLFwiYT1jcnlwdG86XCIpLm1hcCh0LnBhcnNlQ3J5cHRvTGluZSl9LHQuZ2V0SWNlUGFyYW1ldGVycz1mdW5jdGlvbihlLHIpe3ZhciBpPXQubWF0Y2hQcmVmaXgoZStyLFwiYT1pY2UtdWZyYWc6XCIpWzBdLG49dC5tYXRjaFByZWZpeChlK3IsXCJhPWljZS1wd2Q6XCIpWzBdO3JldHVybiBpJiZuP3t1c2VybmFtZUZyYWdtZW50Omkuc3Vic3RyKDEyKSxwYXNzd29yZDpuLnN1YnN0cigxMCl9Om51bGx9LHQud3JpdGVJY2VQYXJhbWV0ZXJzPWZ1bmN0aW9uKGUpe3JldHVyblwiYT1pY2UtdWZyYWc6XCIrZS51c2VybmFtZUZyYWdtZW50K1wiXFxyXFxuYT1pY2UtcHdkOlwiK2UucGFzc3dvcmQrXCJcXHJcXG5cIn0sdC5wYXJzZVJ0cFBhcmFtZXRlcnM9ZnVuY3Rpb24oZSl7Zm9yKHZhciByPXtjb2RlY3M6W10saGVhZGVyRXh0ZW5zaW9uczpbXSxmZWNNZWNoYW5pc21zOltdLHJ0Y3A6W119LGk9dC5zcGxpdExpbmVzKGUpWzBdLnNwbGl0KFwiIFwiKSxuPTM7bjxpLmxlbmd0aDtuKyspe3ZhciBzPWlbbl0sbz10Lm1hdGNoUHJlZml4KGUsXCJhPXJ0cG1hcDpcIitzK1wiIFwiKVswXTtpZihvKXt2YXIgYT10LnBhcnNlUnRwTWFwKG8pLGM9dC5tYXRjaFByZWZpeChlLFwiYT1mbXRwOlwiK3MrXCIgXCIpO3N3aXRjaChhLnBhcmFtZXRlcnM9Yy5sZW5ndGg/dC5wYXJzZUZtdHAoY1swXSk6e30sYS5ydGNwRmVlZGJhY2s9dC5tYXRjaFByZWZpeChlLFwiYT1ydGNwLWZiOlwiK3MrXCIgXCIpLm1hcCh0LnBhcnNlUnRjcEZiKSxyLmNvZGVjcy5wdXNoKGEpLGEubmFtZS50b1VwcGVyQ2FzZSgpKXtjYXNlXCJSRURcIjpjYXNlXCJVTFBGRUNcIjpyLmZlY01lY2hhbmlzbXMucHVzaChhLm5hbWUudG9VcHBlckNhc2UoKSl9fX1yZXR1cm4gdC5tYXRjaFByZWZpeChlLFwiYT1leHRtYXA6XCIpLmZvckVhY2goKGZ1bmN0aW9uKGUpe3IuaGVhZGVyRXh0ZW5zaW9ucy5wdXNoKHQucGFyc2VFeHRtYXAoZSkpfSkpLHJ9LHQud3JpdGVSdHBEZXNjcmlwdGlvbj1mdW5jdGlvbihlLHIpe3ZhciBpPVwiXCI7aSs9XCJtPVwiK2UrXCIgXCIsaSs9ci5jb2RlY3MubGVuZ3RoPjA/XCI5XCI6XCIwXCIsaSs9XCIgVURQL1RMUy9SVFAvU0FWUEYgXCIsaSs9ci5jb2RlY3MubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwIT09ZS5wcmVmZXJyZWRQYXlsb2FkVHlwZT9lLnByZWZlcnJlZFBheWxvYWRUeXBlOmUucGF5bG9hZFR5cGV9KSkuam9pbihcIiBcIikrXCJcXHJcXG5cIixpKz1cImM9SU4gSVA0IDAuMC4wLjBcXHJcXG5cIixpKz1cImE9cnRjcDo5IElOIElQNCAwLjAuMC4wXFxyXFxuXCIsci5jb2RlY3MuZm9yRWFjaCgoZnVuY3Rpb24oZSl7aSs9dC53cml0ZVJ0cE1hcChlKSxpKz10LndyaXRlRm10cChlKSxpKz10LndyaXRlUnRjcEZiKGUpfSkpO3ZhciBuPTA7cmV0dXJuIHIuY29kZWNzLmZvckVhY2goKGZ1bmN0aW9uKGUpe2UubWF4cHRpbWU+biYmKG49ZS5tYXhwdGltZSl9KSksbj4wJiYoaSs9XCJhPW1heHB0aW1lOlwiK24rXCJcXHJcXG5cIiksaSs9XCJhPXJ0Y3AtbXV4XFxyXFxuXCIsci5oZWFkZXJFeHRlbnNpb25zJiZyLmhlYWRlckV4dGVuc2lvbnMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7aSs9dC53cml0ZUV4dG1hcChlKX0pKSxpfSx0LnBhcnNlUnRwRW5jb2RpbmdQYXJhbWV0ZXJzPWZ1bmN0aW9uKGUpe3ZhciByLGk9W10sbj10LnBhcnNlUnRwUGFyYW1ldGVycyhlKSxzPS0xIT09bi5mZWNNZWNoYW5pc21zLmluZGV4T2YoXCJSRURcIiksbz0tMSE9PW4uZmVjTWVjaGFuaXNtcy5pbmRleE9mKFwiVUxQRkVDXCIpLGE9dC5tYXRjaFByZWZpeChlLFwiYT1zc3JjOlwiKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiB0LnBhcnNlU3NyY01lZGlhKGUpfSkpLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuXCJjbmFtZVwiPT09ZS5hdHRyaWJ1dGV9KSksYz1hLmxlbmd0aD4wJiZhWzBdLnNzcmMsZD10Lm1hdGNoUHJlZml4KGUsXCJhPXNzcmMtZ3JvdXA6RklEXCIpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3Vic3RyKDE3KS5zcGxpdChcIiBcIikubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gcGFyc2VJbnQoZSwxMCl9KSl9KSk7ZC5sZW5ndGg+MCYmZFswXS5sZW5ndGg+MSYmZFswXVswXT09PWMmJihyPWRbMF1bMV0pLG4uY29kZWNzLmZvckVhY2goKGZ1bmN0aW9uKGUpe2lmKFwiUlRYXCI9PT1lLm5hbWUudG9VcHBlckNhc2UoKSYmZS5wYXJhbWV0ZXJzLmFwdCl7dmFyIHQ9e3NzcmM6Yyxjb2RlY1BheWxvYWRUeXBlOnBhcnNlSW50KGUucGFyYW1ldGVycy5hcHQsMTApfTtjJiZyJiYodC5ydHg9e3NzcmM6cn0pLGkucHVzaCh0KSxzJiYoKHQ9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0KSkpLmZlYz17c3NyYzpjLG1lY2hhbmlzbTpvP1wicmVkK3VscGZlY1wiOlwicmVkXCJ9LGkucHVzaCh0KSl9fSkpLDA9PT1pLmxlbmd0aCYmYyYmaS5wdXNoKHtzc3JjOmN9KTt2YXIgdT10Lm1hdGNoUHJlZml4KGUsXCJiPVwiKTtyZXR1cm4gdS5sZW5ndGgmJih1PTA9PT11WzBdLmluZGV4T2YoXCJiPVRJQVM6XCIpP3BhcnNlSW50KHVbMF0uc3Vic3RyKDcpLDEwKTowPT09dVswXS5pbmRleE9mKFwiYj1BUzpcIik/MWUzKnBhcnNlSW50KHVbMF0uc3Vic3RyKDUpLDEwKSouOTUtMTZlMzp2b2lkIDAsaS5mb3JFYWNoKChmdW5jdGlvbihlKXtlLm1heEJpdHJhdGU9dX0pKSksaX0sdC5wYXJzZVJ0Y3BQYXJhbWV0ZXJzPWZ1bmN0aW9uKGUpe3ZhciByPXt9LGk9dC5tYXRjaFByZWZpeChlLFwiYT1zc3JjOlwiKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiB0LnBhcnNlU3NyY01lZGlhKGUpfSkpLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuXCJjbmFtZVwiPT09ZS5hdHRyaWJ1dGV9KSlbMF07aSYmKHIuY25hbWU9aS52YWx1ZSxyLnNzcmM9aS5zc3JjKTt2YXIgbj10Lm1hdGNoUHJlZml4KGUsXCJhPXJ0Y3AtcnNpemVcIik7ci5yZWR1Y2VkU2l6ZT1uLmxlbmd0aD4wLHIuY29tcG91bmQ9MD09PW4ubGVuZ3RoO3ZhciBzPXQubWF0Y2hQcmVmaXgoZSxcImE9cnRjcC1tdXhcIik7cmV0dXJuIHIubXV4PXMubGVuZ3RoPjAscn0sdC5wYXJzZU1zaWQ9ZnVuY3Rpb24oZSl7dmFyIHIsaT10Lm1hdGNoUHJlZml4KGUsXCJhPW1zaWQ6XCIpO2lmKDE9PT1pLmxlbmd0aClyZXR1cm57c3RyZWFtOihyPWlbMF0uc3Vic3RyKDcpLnNwbGl0KFwiIFwiKSlbMF0sdHJhY2s6clsxXX07dmFyIG49dC5tYXRjaFByZWZpeChlLFwiYT1zc3JjOlwiKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiB0LnBhcnNlU3NyY01lZGlhKGUpfSkpLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuXCJtc2lkXCI9PT1lLmF0dHJpYnV0ZX0pKTtyZXR1cm4gbi5sZW5ndGg+MD97c3RyZWFtOihyPW5bMF0udmFsdWUuc3BsaXQoXCIgXCIpKVswXSx0cmFjazpyWzFdfTp2b2lkIDB9LHQucGFyc2VTY3RwRGVzY3JpcHRpb249ZnVuY3Rpb24oZSl7dmFyIHIsaT10LnBhcnNlTUxpbmUoZSksbj10Lm1hdGNoUHJlZml4KGUsXCJhPW1heC1tZXNzYWdlLXNpemU6XCIpO24ubGVuZ3RoPjAmJihyPXBhcnNlSW50KG5bMF0uc3Vic3RyKDE5KSwxMCkpLGlzTmFOKHIpJiYocj02NTUzNik7dmFyIHM9dC5tYXRjaFByZWZpeChlLFwiYT1zY3RwLXBvcnQ6XCIpO2lmKHMubGVuZ3RoPjApcmV0dXJue3BvcnQ6cGFyc2VJbnQoc1swXS5zdWJzdHIoMTIpLDEwKSxwcm90b2NvbDppLmZtdCxtYXhNZXNzYWdlU2l6ZTpyfTtpZih0Lm1hdGNoUHJlZml4KGUsXCJhPXNjdHBtYXA6XCIpLmxlbmd0aD4wKXt2YXIgbz10Lm1hdGNoUHJlZml4KGUsXCJhPXNjdHBtYXA6XCIpWzBdLnN1YnN0cigxMCkuc3BsaXQoXCIgXCIpO3JldHVybntwb3J0OnBhcnNlSW50KG9bMF0sMTApLHByb3RvY29sOm9bMV0sbWF4TWVzc2FnZVNpemU6cn19fSx0LndyaXRlU2N0cERlc2NyaXB0aW9uPWZ1bmN0aW9uKGUsdCl7dmFyIHI9W107cmV0dXJuIHI9XCJEVExTL1NDVFBcIiE9PWUucHJvdG9jb2w/W1wibT1cIitlLmtpbmQrXCIgOSBcIitlLnByb3RvY29sK1wiIFwiK3QucHJvdG9jb2wrXCJcXHJcXG5cIixcImM9SU4gSVA0IDAuMC4wLjBcXHJcXG5cIixcImE9c2N0cC1wb3J0OlwiK3QucG9ydCtcIlxcclxcblwiXTpbXCJtPVwiK2Uua2luZCtcIiA5IFwiK2UucHJvdG9jb2wrXCIgXCIrdC5wb3J0K1wiXFxyXFxuXCIsXCJjPUlOIElQNCAwLjAuMC4wXFxyXFxuXCIsXCJhPXNjdHBtYXA6XCIrdC5wb3J0K1wiIFwiK3QucHJvdG9jb2wrXCIgNjU1MzVcXHJcXG5cIl0sdm9pZCAwIT09dC5tYXhNZXNzYWdlU2l6ZSYmci5wdXNoKFwiYT1tYXgtbWVzc2FnZS1zaXplOlwiK3QubWF4TWVzc2FnZVNpemUrXCJcXHJcXG5cIiksci5qb2luKFwiXCIpfSx0LmdlbmVyYXRlU2Vzc2lvbklkPWZ1bmN0aW9uKCl7cmV0dXJuIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoKS5zdWJzdHIoMiwyMSl9LHQud3JpdGVTZXNzaW9uQm9pbGVycGxhdGU9ZnVuY3Rpb24oZSxyLGkpe3ZhciBuPXZvaWQgMCE9PXI/cjoyO3JldHVyblwidj0wXFxyXFxubz1cIisoaXx8XCJ0aGlzaXNhZGFwdGVyb3J0Y1wiKStcIiBcIisoZXx8dC5nZW5lcmF0ZVNlc3Npb25JZCgpKStcIiBcIituK1wiIElOIElQNCAxMjcuMC4wLjFcXHJcXG5zPS1cXHJcXG50PTAgMFxcclxcblwifSx0LndyaXRlTWVkaWFTZWN0aW9uPWZ1bmN0aW9uKGUscixpLG4pe3ZhciBzPXQud3JpdGVSdHBEZXNjcmlwdGlvbihlLmtpbmQscik7aWYocys9dC53cml0ZUljZVBhcmFtZXRlcnMoZS5pY2VHYXRoZXJlci5nZXRMb2NhbFBhcmFtZXRlcnMoKSkscys9dC53cml0ZUR0bHNQYXJhbWV0ZXJzKGUuZHRsc1RyYW5zcG9ydC5nZXRMb2NhbFBhcmFtZXRlcnMoKSxcIm9mZmVyXCI9PT1pP1wiYWN0cGFzc1wiOlwiYWN0aXZlXCIpLHMrPVwiYT1taWQ6XCIrZS5taWQrXCJcXHJcXG5cIixlLmRpcmVjdGlvbj9zKz1cImE9XCIrZS5kaXJlY3Rpb24rXCJcXHJcXG5cIjplLnJ0cFNlbmRlciYmZS5ydHBSZWNlaXZlcj9zKz1cImE9c2VuZHJlY3ZcXHJcXG5cIjplLnJ0cFNlbmRlcj9zKz1cImE9c2VuZG9ubHlcXHJcXG5cIjplLnJ0cFJlY2VpdmVyP3MrPVwiYT1yZWN2b25seVxcclxcblwiOnMrPVwiYT1pbmFjdGl2ZVxcclxcblwiLGUucnRwU2VuZGVyKXt2YXIgbz1cIm1zaWQ6XCIrbi5pZCtcIiBcIitlLnJ0cFNlbmRlci50cmFjay5pZCtcIlxcclxcblwiO3MrPVwiYT1cIitvLHMrPVwiYT1zc3JjOlwiK2Uuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5zc3JjK1wiIFwiK28sZS5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eCYmKHMrPVwiYT1zc3JjOlwiK2Uuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHguc3NyYytcIiBcIitvLHMrPVwiYT1zc3JjLWdyb3VwOkZJRCBcIitlLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0uc3NyYytcIiBcIitlLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4LnNzcmMrXCJcXHJcXG5cIil9cmV0dXJuIHMrPVwiYT1zc3JjOlwiK2Uuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5zc3JjK1wiIGNuYW1lOlwiK3QubG9jYWxDTmFtZStcIlxcclxcblwiLGUucnRwU2VuZGVyJiZlLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4JiYocys9XCJhPXNzcmM6XCIrZS5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eC5zc3JjK1wiIGNuYW1lOlwiK3QubG9jYWxDTmFtZStcIlxcclxcblwiKSxzfSx0LmdldERpcmVjdGlvbj1mdW5jdGlvbihlLHIpe2Zvcih2YXIgaT10LnNwbGl0TGluZXMoZSksbj0wO248aS5sZW5ndGg7bisrKXN3aXRjaChpW25dKXtjYXNlXCJhPXNlbmRyZWN2XCI6Y2FzZVwiYT1zZW5kb25seVwiOmNhc2VcImE9cmVjdm9ubHlcIjpjYXNlXCJhPWluYWN0aXZlXCI6cmV0dXJuIGlbbl0uc3Vic3RyKDIpfXJldHVybiByP3QuZ2V0RGlyZWN0aW9uKHIpOlwic2VuZHJlY3ZcIn0sdC5nZXRLaW5kPWZ1bmN0aW9uKGUpe3JldHVybiB0LnNwbGl0TGluZXMoZSlbMF0uc3BsaXQoXCIgXCIpWzBdLnN1YnN0cigyKX0sdC5pc1JlamVjdGVkPWZ1bmN0aW9uKGUpe3JldHVyblwiMFwiPT09ZS5zcGxpdChcIiBcIiwyKVsxXX0sdC5wYXJzZU1MaW5lPWZ1bmN0aW9uKGUpe3ZhciByPXQuc3BsaXRMaW5lcyhlKVswXS5zdWJzdHIoMikuc3BsaXQoXCIgXCIpO3JldHVybntraW5kOnJbMF0scG9ydDpwYXJzZUludChyWzFdLDEwKSxwcm90b2NvbDpyWzJdLGZtdDpyLnNsaWNlKDMpLmpvaW4oXCIgXCIpfX0sdC5wYXJzZU9MaW5lPWZ1bmN0aW9uKGUpe3ZhciByPXQubWF0Y2hQcmVmaXgoZSxcIm89XCIpWzBdLnN1YnN0cigyKS5zcGxpdChcIiBcIik7cmV0dXJue3VzZXJuYW1lOnJbMF0sc2Vzc2lvbklkOnJbMV0sc2Vzc2lvblZlcnNpb246cGFyc2VJbnQoclsyXSwxMCksbmV0VHlwZTpyWzNdLGFkZHJlc3NUeXBlOnJbNF0sYWRkcmVzczpyWzVdfX0sdC5pc1ZhbGlkU0RQPWZ1bmN0aW9uKGUpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiBlfHwwPT09ZS5sZW5ndGgpcmV0dXJuITE7Zm9yKHZhciByPXQuc3BsaXRMaW5lcyhlKSxpPTA7aTxyLmxlbmd0aDtpKyspaWYocltpXS5sZW5ndGg8Mnx8XCI9XCIhPT1yW2ldLmNoYXJBdCgxKSlyZXR1cm4hMTtyZXR1cm4hMH0sZS5leHBvcnRzPXR9LFEoWD17ZXhwb3J0czp7fX0sWC5leHBvcnRzKSxYLmV4cG9ydHMpO2Z1bmN0aW9uIGVlKGUsdCxyLGksbil7dmFyIHM9Wi53cml0ZVJ0cERlc2NyaXB0aW9uKGUua2luZCx0KTtpZihzKz1aLndyaXRlSWNlUGFyYW1ldGVycyhlLmljZUdhdGhlcmVyLmdldExvY2FsUGFyYW1ldGVycygpKSxzKz1aLndyaXRlRHRsc1BhcmFtZXRlcnMoZS5kdGxzVHJhbnNwb3J0LmdldExvY2FsUGFyYW1ldGVycygpLFwib2ZmZXJcIj09PXI/XCJhY3RwYXNzXCI6bnx8XCJhY3RpdmVcIikscys9XCJhPW1pZDpcIitlLm1pZCtcIlxcclxcblwiLGUucnRwU2VuZGVyJiZlLnJ0cFJlY2VpdmVyP3MrPVwiYT1zZW5kcmVjdlxcclxcblwiOmUucnRwU2VuZGVyP3MrPVwiYT1zZW5kb25seVxcclxcblwiOmUucnRwUmVjZWl2ZXI/cys9XCJhPXJlY3Zvbmx5XFxyXFxuXCI6cys9XCJhPWluYWN0aXZlXFxyXFxuXCIsZS5ydHBTZW5kZXIpe3ZhciBvPWUucnRwU2VuZGVyLl9pbml0aWFsVHJhY2tJZHx8ZS5ydHBTZW5kZXIudHJhY2suaWQ7ZS5ydHBTZW5kZXIuX2luaXRpYWxUcmFja0lkPW87dmFyIGE9XCJtc2lkOlwiKyhpP2kuaWQ6XCItXCIpK1wiIFwiK28rXCJcXHJcXG5cIjtzKz1cImE9XCIrYSxzKz1cImE9c3NyYzpcIitlLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0uc3NyYytcIiBcIithLGUuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHgmJihzKz1cImE9c3NyYzpcIitlLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4LnNzcmMrXCIgXCIrYSxzKz1cImE9c3NyYy1ncm91cDpGSUQgXCIrZS5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnNzcmMrXCIgXCIrZS5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eC5zc3JjK1wiXFxyXFxuXCIpfXJldHVybiBzKz1cImE9c3NyYzpcIitlLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0uc3NyYytcIiBjbmFtZTpcIitaLmxvY2FsQ05hbWUrXCJcXHJcXG5cIixlLnJ0cFNlbmRlciYmZS5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eCYmKHMrPVwiYT1zc3JjOlwiK2Uuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHguc3NyYytcIiBjbmFtZTpcIitaLmxvY2FsQ05hbWUrXCJcXHJcXG5cIiksc31mdW5jdGlvbiB0ZShlLHQpe3ZhciByPXtjb2RlY3M6W10saGVhZGVyRXh0ZW5zaW9uczpbXSxmZWNNZWNoYW5pc21zOltdfSxpPWZ1bmN0aW9uKGUsdCl7ZT1wYXJzZUludChlLDEwKTtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKylpZih0W3JdLnBheWxvYWRUeXBlPT09ZXx8dFtyXS5wcmVmZXJyZWRQYXlsb2FkVHlwZT09PWUpcmV0dXJuIHRbcl19LG49ZnVuY3Rpb24oZSx0LHIsbil7dmFyIHM9aShlLnBhcmFtZXRlcnMuYXB0LHIpLG89aSh0LnBhcmFtZXRlcnMuYXB0LG4pO3JldHVybiBzJiZvJiZzLm5hbWUudG9Mb3dlckNhc2UoKT09PW8ubmFtZS50b0xvd2VyQ2FzZSgpfTtyZXR1cm4gZS5jb2RlY3MuZm9yRWFjaCgoZnVuY3Rpb24oaSl7Zm9yKHZhciBzPTA7czx0LmNvZGVjcy5sZW5ndGg7cysrKXt2YXIgbz10LmNvZGVjc1tzXTtpZihpLm5hbWUudG9Mb3dlckNhc2UoKT09PW8ubmFtZS50b0xvd2VyQ2FzZSgpJiZpLmNsb2NrUmF0ZT09PW8uY2xvY2tSYXRlKXtpZihcInJ0eFwiPT09aS5uYW1lLnRvTG93ZXJDYXNlKCkmJmkucGFyYW1ldGVycyYmby5wYXJhbWV0ZXJzLmFwdCYmIW4oaSxvLGUuY29kZWNzLHQuY29kZWNzKSljb250aW51ZTsobz1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG8pKSkubnVtQ2hhbm5lbHM9TWF0aC5taW4oaS5udW1DaGFubmVscyxvLm51bUNoYW5uZWxzKSxyLmNvZGVjcy5wdXNoKG8pLG8ucnRjcEZlZWRiYWNrPW8ucnRjcEZlZWRiYWNrLmZpbHRlcigoZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTA7dDxpLnJ0Y3BGZWVkYmFjay5sZW5ndGg7dCsrKWlmKGkucnRjcEZlZWRiYWNrW3RdLnR5cGU9PT1lLnR5cGUmJmkucnRjcEZlZWRiYWNrW3RdLnBhcmFtZXRlcj09PWUucGFyYW1ldGVyKXJldHVybiEwO3JldHVybiExfSkpO2JyZWFrfX19KSksZS5oZWFkZXJFeHRlbnNpb25zLmZvckVhY2goKGZ1bmN0aW9uKGUpe2Zvcih2YXIgaT0wO2k8dC5oZWFkZXJFeHRlbnNpb25zLmxlbmd0aDtpKyspe3ZhciBuPXQuaGVhZGVyRXh0ZW5zaW9uc1tpXTtpZihlLnVyaT09PW4udXJpKXtyLmhlYWRlckV4dGVuc2lvbnMucHVzaChuKTticmVha319fSkpLHJ9ZnVuY3Rpb24gcmUoZSx0LHIpe3JldHVybi0xIT09e29mZmVyOntzZXRMb2NhbERlc2NyaXB0aW9uOltcInN0YWJsZVwiLFwiaGF2ZS1sb2NhbC1vZmZlclwiXSxzZXRSZW1vdGVEZXNjcmlwdGlvbjpbXCJzdGFibGVcIixcImhhdmUtcmVtb3RlLW9mZmVyXCJdfSxhbnN3ZXI6e3NldExvY2FsRGVzY3JpcHRpb246W1wiaGF2ZS1yZW1vdGUtb2ZmZXJcIixcImhhdmUtbG9jYWwtcHJhbnN3ZXJcIl0sc2V0UmVtb3RlRGVzY3JpcHRpb246W1wiaGF2ZS1sb2NhbC1vZmZlclwiLFwiaGF2ZS1yZW1vdGUtcHJhbnN3ZXJcIl19fVt0XVtlXS5pbmRleE9mKHIpfWZ1bmN0aW9uIGllKGUsdCl7dmFyIHI9ZS5nZXRSZW1vdGVDYW5kaWRhdGVzKCkuZmluZCgoZnVuY3Rpb24oZSl7cmV0dXJuIHQuZm91bmRhdGlvbj09PWUuZm91bmRhdGlvbiYmdC5pcD09PWUuaXAmJnQucG9ydD09PWUucG9ydCYmdC5wcmlvcml0eT09PWUucHJpb3JpdHkmJnQucHJvdG9jb2w9PT1lLnByb3RvY29sJiZ0LnR5cGU9PT1lLnR5cGV9KSk7cmV0dXJuIHJ8fGUuYWRkUmVtb3RlQ2FuZGlkYXRlKHQpLCFyfWZ1bmN0aW9uIG5lKGUsdCl7dmFyIHI9bmV3IEVycm9yKHQpO3JldHVybiByLm5hbWU9ZSxyLmNvZGU9e05vdFN1cHBvcnRlZEVycm9yOjksSW52YWxpZFN0YXRlRXJyb3I6MTEsSW52YWxpZEFjY2Vzc0Vycm9yOjE1LFR5cGVFcnJvcjp2b2lkIDAsT3BlcmF0aW9uRXJyb3I6dm9pZCAwfVtlXSxyfXZhciBzZT1mdW5jdGlvbihlLHQpe2Z1bmN0aW9uIHIodCxyKXtyLmFkZFRyYWNrKHQpLHIuZGlzcGF0Y2hFdmVudChuZXcgZS5NZWRpYVN0cmVhbVRyYWNrRXZlbnQoXCJhZGR0cmFja1wiLHt0cmFjazp0fSkpfWZ1bmN0aW9uIGkodCxyLGksbil7dmFyIHM9bmV3IEV2ZW50KFwidHJhY2tcIik7cy50cmFjaz1yLHMucmVjZWl2ZXI9aSxzLnRyYW5zY2VpdmVyPXtyZWNlaXZlcjppfSxzLnN0cmVhbXM9bixlLnNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7dC5fZGlzcGF0Y2hFdmVudChcInRyYWNrXCIscyl9KSl9dmFyIG49ZnVuY3Rpb24ocil7dmFyIGk9dGhpcyxuPWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtpZihbXCJhZGRFdmVudExpc3RlbmVyXCIsXCJyZW1vdmVFdmVudExpc3RlbmVyXCIsXCJkaXNwYXRjaEV2ZW50XCJdLmZvckVhY2goKGZ1bmN0aW9uKGUpe2lbZV09bltlXS5iaW5kKG4pfSkpLHRoaXMuY2FuVHJpY2tsZUljZUNhbmRpZGF0ZXM9bnVsbCx0aGlzLm5lZWROZWdvdGlhdGlvbj0hMSx0aGlzLmxvY2FsU3RyZWFtcz1bXSx0aGlzLnJlbW90ZVN0cmVhbXM9W10sdGhpcy5fbG9jYWxEZXNjcmlwdGlvbj1udWxsLHRoaXMuX3JlbW90ZURlc2NyaXB0aW9uPW51bGwsdGhpcy5zaWduYWxpbmdTdGF0ZT1cInN0YWJsZVwiLHRoaXMuaWNlQ29ubmVjdGlvblN0YXRlPVwibmV3XCIsdGhpcy5jb25uZWN0aW9uU3RhdGU9XCJuZXdcIix0aGlzLmljZUdhdGhlcmluZ1N0YXRlPVwibmV3XCIscj1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHJ8fHt9KSksdGhpcy51c2luZ0J1bmRsZT1cIm1heC1idW5kbGVcIj09PXIuYnVuZGxlUG9saWN5LFwibmVnb3RpYXRlXCI9PT1yLnJ0Y3BNdXhQb2xpY3kpdGhyb3cgbmUoXCJOb3RTdXBwb3J0ZWRFcnJvclwiLFwicnRjcE11eFBvbGljeSAnbmVnb3RpYXRlJyBpcyBub3Qgc3VwcG9ydGVkXCIpO3N3aXRjaChyLnJ0Y3BNdXhQb2xpY3l8fChyLnJ0Y3BNdXhQb2xpY3k9XCJyZXF1aXJlXCIpLHIuaWNlVHJhbnNwb3J0UG9saWN5KXtjYXNlXCJhbGxcIjpjYXNlXCJyZWxheVwiOmJyZWFrO2RlZmF1bHQ6ci5pY2VUcmFuc3BvcnRQb2xpY3k9XCJhbGxcIn1zd2l0Y2goci5idW5kbGVQb2xpY3kpe2Nhc2VcImJhbGFuY2VkXCI6Y2FzZVwibWF4LWNvbXBhdFwiOmNhc2VcIm1heC1idW5kbGVcIjpicmVhaztkZWZhdWx0OnIuYnVuZGxlUG9saWN5PVwiYmFsYW5jZWRcIn1pZihyLmljZVNlcnZlcnM9ZnVuY3Rpb24oZSx0KXt2YXIgcj0hMTtyZXR1cm4oZT1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGUpKSkuZmlsdGVyKChmdW5jdGlvbihlKXtpZihlJiYoZS51cmxzfHxlLnVybCkpe3ZhciBpPWUudXJsc3x8ZS51cmw7ZS51cmwmJiFlLnVybHMmJmNvbnNvbGUud2FybihcIlJUQ0ljZVNlcnZlci51cmwgaXMgZGVwcmVjYXRlZCEgVXNlIHVybHMgaW5zdGVhZC5cIik7dmFyIG49XCJzdHJpbmdcIj09dHlwZW9mIGk7cmV0dXJuIG4mJihpPVtpXSksaT1pLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIDAhPT1lLmluZGV4T2YoXCJ0dXJuOlwiKXx8LTE9PT1lLmluZGV4T2YoXCJ0cmFuc3BvcnQ9dWRwXCIpfHwtMSE9PWUuaW5kZXhPZihcInR1cm46W1wiKXx8cj8wPT09ZS5pbmRleE9mKFwic3R1bjpcIikmJnQ+PTE0MzkzJiYtMT09PWUuaW5kZXhPZihcIj90cmFuc3BvcnQ9dWRwXCIpOihyPSEwLCEwKX0pKSxkZWxldGUgZS51cmwsZS51cmxzPW4/aVswXTppLCEhaS5sZW5ndGh9fSkpfShyLmljZVNlcnZlcnN8fFtdLHQpLHRoaXMuX2ljZUdhdGhlcmVycz1bXSxyLmljZUNhbmRpZGF0ZVBvb2xTaXplKWZvcih2YXIgcz1yLmljZUNhbmRpZGF0ZVBvb2xTaXplO3M+MDtzLS0pdGhpcy5faWNlR2F0aGVyZXJzLnB1c2gobmV3IGUuUlRDSWNlR2F0aGVyZXIoe2ljZVNlcnZlcnM6ci5pY2VTZXJ2ZXJzLGdhdGhlclBvbGljeTpyLmljZVRyYW5zcG9ydFBvbGljeX0pKTtlbHNlIHIuaWNlQ2FuZGlkYXRlUG9vbFNpemU9MDt0aGlzLl9jb25maWc9cix0aGlzLnRyYW5zY2VpdmVycz1bXSx0aGlzLl9zZHBTZXNzaW9uSWQ9Wi5nZW5lcmF0ZVNlc3Npb25JZCgpLHRoaXMuX3NkcFNlc3Npb25WZXJzaW9uPTAsdGhpcy5fZHRsc1JvbGU9dm9pZCAwLHRoaXMuX2lzQ2xvc2VkPSExfTtPYmplY3QuZGVmaW5lUHJvcGVydHkobi5wcm90b3R5cGUsXCJsb2NhbERlc2NyaXB0aW9uXCIse2NvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbG9jYWxEZXNjcmlwdGlvbn19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkobi5wcm90b3R5cGUsXCJyZW1vdGVEZXNjcmlwdGlvblwiLHtjb25maWd1cmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlbW90ZURlc2NyaXB0aW9ufX0pLG4ucHJvdG90eXBlLm9uaWNlY2FuZGlkYXRlPW51bGwsbi5wcm90b3R5cGUub25hZGRzdHJlYW09bnVsbCxuLnByb3RvdHlwZS5vbnRyYWNrPW51bGwsbi5wcm90b3R5cGUub25yZW1vdmVzdHJlYW09bnVsbCxuLnByb3RvdHlwZS5vbnNpZ25hbGluZ3N0YXRlY2hhbmdlPW51bGwsbi5wcm90b3R5cGUub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2U9bnVsbCxuLnByb3RvdHlwZS5vbmNvbm5lY3Rpb25zdGF0ZWNoYW5nZT1udWxsLG4ucHJvdG90eXBlLm9uaWNlZ2F0aGVyaW5nc3RhdGVjaGFuZ2U9bnVsbCxuLnByb3RvdHlwZS5vbm5lZ290aWF0aW9ubmVlZGVkPW51bGwsbi5wcm90b3R5cGUub25kYXRhY2hhbm5lbD1udWxsLG4ucHJvdG90eXBlLl9kaXNwYXRjaEV2ZW50PWZ1bmN0aW9uKGUsdCl7dGhpcy5faXNDbG9zZWR8fCh0aGlzLmRpc3BhdGNoRXZlbnQodCksXCJmdW5jdGlvblwiPT10eXBlb2YgdGhpc1tcIm9uXCIrZV0mJnRoaXNbXCJvblwiK2VdKHQpKX0sbi5wcm90b3R5cGUuX2VtaXRHYXRoZXJpbmdTdGF0ZUNoYW5nZT1mdW5jdGlvbigpe3ZhciBlPW5ldyBFdmVudChcImljZWdhdGhlcmluZ3N0YXRlY2hhbmdlXCIpO3RoaXMuX2Rpc3BhdGNoRXZlbnQoXCJpY2VnYXRoZXJpbmdzdGF0ZWNoYW5nZVwiLGUpfSxuLnByb3RvdHlwZS5nZXRDb25maWd1cmF0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbmZpZ30sbi5wcm90b3R5cGUuZ2V0TG9jYWxTdHJlYW1zPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubG9jYWxTdHJlYW1zfSxuLnByb3RvdHlwZS5nZXRSZW1vdGVTdHJlYW1zPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVtb3RlU3RyZWFtc30sbi5wcm90b3R5cGUuX2NyZWF0ZVRyYW5zY2VpdmVyPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy50cmFuc2NlaXZlcnMubGVuZ3RoPjAsaT17dHJhY2s6bnVsbCxpY2VHYXRoZXJlcjpudWxsLGljZVRyYW5zcG9ydDpudWxsLGR0bHNUcmFuc3BvcnQ6bnVsbCxsb2NhbENhcGFiaWxpdGllczpudWxsLHJlbW90ZUNhcGFiaWxpdGllczpudWxsLHJ0cFNlbmRlcjpudWxsLHJ0cFJlY2VpdmVyOm51bGwsa2luZDplLG1pZDpudWxsLHNlbmRFbmNvZGluZ1BhcmFtZXRlcnM6bnVsbCxyZWN2RW5jb2RpbmdQYXJhbWV0ZXJzOm51bGwsc3RyZWFtOm51bGwsYXNzb2NpYXRlZFJlbW90ZU1lZGlhU3RyZWFtczpbXSx3YW50UmVjZWl2ZTohMH07aWYodGhpcy51c2luZ0J1bmRsZSYmcilpLmljZVRyYW5zcG9ydD10aGlzLnRyYW5zY2VpdmVyc1swXS5pY2VUcmFuc3BvcnQsaS5kdGxzVHJhbnNwb3J0PXRoaXMudHJhbnNjZWl2ZXJzWzBdLmR0bHNUcmFuc3BvcnQ7ZWxzZXt2YXIgbj10aGlzLl9jcmVhdGVJY2VBbmREdGxzVHJhbnNwb3J0cygpO2kuaWNlVHJhbnNwb3J0PW4uaWNlVHJhbnNwb3J0LGkuZHRsc1RyYW5zcG9ydD1uLmR0bHNUcmFuc3BvcnR9cmV0dXJuIHR8fHRoaXMudHJhbnNjZWl2ZXJzLnB1c2goaSksaX0sbi5wcm90b3R5cGUuYWRkVHJhY2s9ZnVuY3Rpb24odCxyKXtpZih0aGlzLl9pc0Nsb3NlZCl0aHJvdyBuZShcIkludmFsaWRTdGF0ZUVycm9yXCIsXCJBdHRlbXB0ZWQgdG8gY2FsbCBhZGRUcmFjayBvbiBhIGNsb3NlZCBwZWVyY29ubmVjdGlvbi5cIik7dmFyIGk7aWYodGhpcy50cmFuc2NlaXZlcnMuZmluZCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUudHJhY2s9PT10fSkpKXRocm93IG5lKFwiSW52YWxpZEFjY2Vzc0Vycm9yXCIsXCJUcmFjayBhbHJlYWR5IGV4aXN0cy5cIik7Zm9yKHZhciBuPTA7bjx0aGlzLnRyYW5zY2VpdmVycy5sZW5ndGg7bisrKXRoaXMudHJhbnNjZWl2ZXJzW25dLnRyYWNrfHx0aGlzLnRyYW5zY2VpdmVyc1tuXS5raW5kIT09dC5raW5kfHwoaT10aGlzLnRyYW5zY2VpdmVyc1tuXSk7cmV0dXJuIGl8fChpPXRoaXMuX2NyZWF0ZVRyYW5zY2VpdmVyKHQua2luZCkpLHRoaXMuX21heWJlRmlyZU5lZ290aWF0aW9uTmVlZGVkKCksLTE9PT10aGlzLmxvY2FsU3RyZWFtcy5pbmRleE9mKHIpJiZ0aGlzLmxvY2FsU3RyZWFtcy5wdXNoKHIpLGkudHJhY2s9dCxpLnN0cmVhbT1yLGkucnRwU2VuZGVyPW5ldyBlLlJUQ1J0cFNlbmRlcih0LGkuZHRsc1RyYW5zcG9ydCksaS5ydHBTZW5kZXJ9LG4ucHJvdG90eXBlLmFkZFN0cmVhbT1mdW5jdGlvbihlKXt2YXIgcj10aGlzO2lmKHQ+PTE1MDI1KWUuZ2V0VHJhY2tzKCkuZm9yRWFjaCgoZnVuY3Rpb24odCl7ci5hZGRUcmFjayh0LGUpfSkpO2Vsc2V7dmFyIGk9ZS5jbG9uZSgpO2UuZ2V0VHJhY2tzKCkuZm9yRWFjaCgoZnVuY3Rpb24oZSx0KXt2YXIgcj1pLmdldFRyYWNrcygpW3RdO2UuYWRkRXZlbnRMaXN0ZW5lcihcImVuYWJsZWRcIiwoZnVuY3Rpb24oZSl7ci5lbmFibGVkPWUuZW5hYmxlZH0pKX0pKSxpLmdldFRyYWNrcygpLmZvckVhY2goKGZ1bmN0aW9uKGUpe3IuYWRkVHJhY2soZSxpKX0pKX19LG4ucHJvdG90eXBlLnJlbW92ZVRyYWNrPWZ1bmN0aW9uKHQpe2lmKHRoaXMuX2lzQ2xvc2VkKXRocm93IG5lKFwiSW52YWxpZFN0YXRlRXJyb3JcIixcIkF0dGVtcHRlZCB0byBjYWxsIHJlbW92ZVRyYWNrIG9uIGEgY2xvc2VkIHBlZXJjb25uZWN0aW9uLlwiKTtpZighKHQgaW5zdGFuY2VvZiBlLlJUQ1J0cFNlbmRlcikpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkFyZ3VtZW50IDEgb2YgUlRDUGVlckNvbm5lY3Rpb24ucmVtb3ZlVHJhY2sgZG9lcyBub3QgaW1wbGVtZW50IGludGVyZmFjZSBSVENSdHBTZW5kZXIuXCIpO3ZhciByPXRoaXMudHJhbnNjZWl2ZXJzLmZpbmQoKGZ1bmN0aW9uKGUpe3JldHVybiBlLnJ0cFNlbmRlcj09PXR9KSk7aWYoIXIpdGhyb3cgbmUoXCJJbnZhbGlkQWNjZXNzRXJyb3JcIixcIlNlbmRlciB3YXMgbm90IGNyZWF0ZWQgYnkgdGhpcyBjb25uZWN0aW9uLlwiKTt2YXIgaT1yLnN0cmVhbTtyLnJ0cFNlbmRlci5zdG9wKCksci5ydHBTZW5kZXI9bnVsbCxyLnRyYWNrPW51bGwsci5zdHJlYW09bnVsbCwtMT09PXRoaXMudHJhbnNjZWl2ZXJzLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3RyZWFtfSkpLmluZGV4T2YoaSkmJnRoaXMubG9jYWxTdHJlYW1zLmluZGV4T2YoaSk+LTEmJnRoaXMubG9jYWxTdHJlYW1zLnNwbGljZSh0aGlzLmxvY2FsU3RyZWFtcy5pbmRleE9mKGkpLDEpLHRoaXMuX21heWJlRmlyZU5lZ290aWF0aW9uTmVlZGVkKCl9LG4ucHJvdG90eXBlLnJlbW92ZVN0cmVhbT1mdW5jdGlvbihlKXt2YXIgdD10aGlzO2UuZ2V0VHJhY2tzKCkuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHI9dC5nZXRTZW5kZXJzKCkuZmluZCgoZnVuY3Rpb24odCl7cmV0dXJuIHQudHJhY2s9PT1lfSkpO3ImJnQucmVtb3ZlVHJhY2socil9KSl9LG4ucHJvdG90eXBlLmdldFNlbmRlcnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50cmFuc2NlaXZlcnMuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4hIWUucnRwU2VuZGVyfSkpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUucnRwU2VuZGVyfSkpfSxuLnByb3RvdHlwZS5nZXRSZWNlaXZlcnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50cmFuc2NlaXZlcnMuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4hIWUucnRwUmVjZWl2ZXJ9KSkubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gZS5ydHBSZWNlaXZlcn0pKX0sbi5wcm90b3R5cGUuX2NyZWF0ZUljZUdhdGhlcmVyPWZ1bmN0aW9uKHQscil7dmFyIGk9dGhpcztpZihyJiZ0PjApcmV0dXJuIHRoaXMudHJhbnNjZWl2ZXJzWzBdLmljZUdhdGhlcmVyO2lmKHRoaXMuX2ljZUdhdGhlcmVycy5sZW5ndGgpcmV0dXJuIHRoaXMuX2ljZUdhdGhlcmVycy5zaGlmdCgpO3ZhciBuPW5ldyBlLlJUQ0ljZUdhdGhlcmVyKHtpY2VTZXJ2ZXJzOnRoaXMuX2NvbmZpZy5pY2VTZXJ2ZXJzLGdhdGhlclBvbGljeTp0aGlzLl9jb25maWcuaWNlVHJhbnNwb3J0UG9saWN5fSk7cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLFwic3RhdGVcIix7dmFsdWU6XCJuZXdcIix3cml0YWJsZTohMH0pLHRoaXMudHJhbnNjZWl2ZXJzW3RdLmJ1ZmZlcmVkQ2FuZGlkYXRlRXZlbnRzPVtdLHRoaXMudHJhbnNjZWl2ZXJzW3RdLmJ1ZmZlckNhbmRpZGF0ZXM9ZnVuY3Rpb24oZSl7dmFyIHI9IWUuY2FuZGlkYXRlfHwwPT09T2JqZWN0LmtleXMoZS5jYW5kaWRhdGUpLmxlbmd0aDtuLnN0YXRlPXI/XCJjb21wbGV0ZWRcIjpcImdhdGhlcmluZ1wiLG51bGwhPT1pLnRyYW5zY2VpdmVyc1t0XS5idWZmZXJlZENhbmRpZGF0ZUV2ZW50cyYmaS50cmFuc2NlaXZlcnNbdF0uYnVmZmVyZWRDYW5kaWRhdGVFdmVudHMucHVzaChlKX0sbi5hZGRFdmVudExpc3RlbmVyKFwibG9jYWxjYW5kaWRhdGVcIix0aGlzLnRyYW5zY2VpdmVyc1t0XS5idWZmZXJDYW5kaWRhdGVzKSxufSxuLnByb3RvdHlwZS5fZ2F0aGVyPWZ1bmN0aW9uKHQscil7dmFyIGk9dGhpcyxuPXRoaXMudHJhbnNjZWl2ZXJzW3JdLmljZUdhdGhlcmVyO2lmKCFuLm9ubG9jYWxjYW5kaWRhdGUpe3ZhciBzPXRoaXMudHJhbnNjZWl2ZXJzW3JdLmJ1ZmZlcmVkQ2FuZGlkYXRlRXZlbnRzO3RoaXMudHJhbnNjZWl2ZXJzW3JdLmJ1ZmZlcmVkQ2FuZGlkYXRlRXZlbnRzPW51bGwsbi5yZW1vdmVFdmVudExpc3RlbmVyKFwibG9jYWxjYW5kaWRhdGVcIix0aGlzLnRyYW5zY2VpdmVyc1tyXS5idWZmZXJDYW5kaWRhdGVzKSxuLm9ubG9jYWxjYW5kaWRhdGU9ZnVuY3Rpb24oZSl7aWYoIShpLnVzaW5nQnVuZGxlJiZyPjApKXt2YXIgcz1uZXcgRXZlbnQoXCJpY2VjYW5kaWRhdGVcIik7cy5jYW5kaWRhdGU9e3NkcE1pZDp0LHNkcE1MaW5lSW5kZXg6cn07dmFyIG89ZS5jYW5kaWRhdGUsYT0hb3x8MD09PU9iamVjdC5rZXlzKG8pLmxlbmd0aDtpZihhKVwibmV3XCIhPT1uLnN0YXRlJiZcImdhdGhlcmluZ1wiIT09bi5zdGF0ZXx8KG4uc3RhdGU9XCJjb21wbGV0ZWRcIik7ZWxzZXtcIm5ld1wiPT09bi5zdGF0ZSYmKG4uc3RhdGU9XCJnYXRoZXJpbmdcIiksby5jb21wb25lbnQ9MSxvLnVmcmFnPW4uZ2V0TG9jYWxQYXJhbWV0ZXJzKCkudXNlcm5hbWVGcmFnbWVudDt2YXIgYz1aLndyaXRlQ2FuZGlkYXRlKG8pO3MuY2FuZGlkYXRlPU9iamVjdC5hc3NpZ24ocy5jYW5kaWRhdGUsWi5wYXJzZUNhbmRpZGF0ZShjKSkscy5jYW5kaWRhdGUuY2FuZGlkYXRlPWMscy5jYW5kaWRhdGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJue2NhbmRpZGF0ZTpzLmNhbmRpZGF0ZS5jYW5kaWRhdGUsc2RwTWlkOnMuY2FuZGlkYXRlLnNkcE1pZCxzZHBNTGluZUluZGV4OnMuY2FuZGlkYXRlLnNkcE1MaW5lSW5kZXgsdXNlcm5hbWVGcmFnbWVudDpzLmNhbmRpZGF0ZS51c2VybmFtZUZyYWdtZW50fX19dmFyIGQ9Wi5nZXRNZWRpYVNlY3Rpb25zKGkuX2xvY2FsRGVzY3JpcHRpb24uc2RwKTtkW3MuY2FuZGlkYXRlLnNkcE1MaW5lSW5kZXhdKz1hP1wiYT1lbmQtb2YtY2FuZGlkYXRlc1xcclxcblwiOlwiYT1cIitzLmNhbmRpZGF0ZS5jYW5kaWRhdGUrXCJcXHJcXG5cIixpLl9sb2NhbERlc2NyaXB0aW9uLnNkcD1aLmdldERlc2NyaXB0aW9uKGkuX2xvY2FsRGVzY3JpcHRpb24uc2RwKStkLmpvaW4oXCJcIik7dmFyIHU9aS50cmFuc2NlaXZlcnMuZXZlcnkoKGZ1bmN0aW9uKGUpe3JldHVybiBlLmljZUdhdGhlcmVyJiZcImNvbXBsZXRlZFwiPT09ZS5pY2VHYXRoZXJlci5zdGF0ZX0pKTtcImdhdGhlcmluZ1wiIT09aS5pY2VHYXRoZXJpbmdTdGF0ZSYmKGkuaWNlR2F0aGVyaW5nU3RhdGU9XCJnYXRoZXJpbmdcIixpLl9lbWl0R2F0aGVyaW5nU3RhdGVDaGFuZ2UoKSksYXx8aS5fZGlzcGF0Y2hFdmVudChcImljZWNhbmRpZGF0ZVwiLHMpLHUmJihpLl9kaXNwYXRjaEV2ZW50KFwiaWNlY2FuZGlkYXRlXCIsbmV3IEV2ZW50KFwiaWNlY2FuZGlkYXRlXCIpKSxpLmljZUdhdGhlcmluZ1N0YXRlPVwiY29tcGxldGVcIixpLl9lbWl0R2F0aGVyaW5nU3RhdGVDaGFuZ2UoKSl9fSxlLnNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7cy5mb3JFYWNoKChmdW5jdGlvbihlKXtuLm9ubG9jYWxjYW5kaWRhdGUoZSl9KSl9KSwwKX19LG4ucHJvdG90eXBlLl9jcmVhdGVJY2VBbmREdGxzVHJhbnNwb3J0cz1mdW5jdGlvbigpe3ZhciB0PXRoaXMscj1uZXcgZS5SVENJY2VUcmFuc3BvcnQobnVsbCk7ci5vbmljZXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7dC5fdXBkYXRlSWNlQ29ubmVjdGlvblN0YXRlKCksdC5fdXBkYXRlQ29ubmVjdGlvblN0YXRlKCl9O3ZhciBpPW5ldyBlLlJUQ0R0bHNUcmFuc3BvcnQocik7cmV0dXJuIGkub25kdGxzc3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXt0Ll91cGRhdGVDb25uZWN0aW9uU3RhdGUoKX0saS5vbmVycm9yPWZ1bmN0aW9uKCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGksXCJzdGF0ZVwiLHt2YWx1ZTpcImZhaWxlZFwiLHdyaXRhYmxlOiEwfSksdC5fdXBkYXRlQ29ubmVjdGlvblN0YXRlKCl9LHtpY2VUcmFuc3BvcnQ6cixkdGxzVHJhbnNwb3J0Oml9fSxuLnByb3RvdHlwZS5fZGlzcG9zZUljZUFuZER0bHNUcmFuc3BvcnRzPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMudHJhbnNjZWl2ZXJzW2VdLmljZUdhdGhlcmVyO3QmJihkZWxldGUgdC5vbmxvY2FsY2FuZGlkYXRlLGRlbGV0ZSB0aGlzLnRyYW5zY2VpdmVyc1tlXS5pY2VHYXRoZXJlcik7dmFyIHI9dGhpcy50cmFuc2NlaXZlcnNbZV0uaWNlVHJhbnNwb3J0O3ImJihkZWxldGUgci5vbmljZXN0YXRlY2hhbmdlLGRlbGV0ZSB0aGlzLnRyYW5zY2VpdmVyc1tlXS5pY2VUcmFuc3BvcnQpO3ZhciBpPXRoaXMudHJhbnNjZWl2ZXJzW2VdLmR0bHNUcmFuc3BvcnQ7aSYmKGRlbGV0ZSBpLm9uZHRsc3N0YXRlY2hhbmdlLGRlbGV0ZSBpLm9uZXJyb3IsZGVsZXRlIHRoaXMudHJhbnNjZWl2ZXJzW2VdLmR0bHNUcmFuc3BvcnQpfSxuLnByb3RvdHlwZS5fdHJhbnNjZWl2ZT1mdW5jdGlvbihlLHIsaSl7dmFyIG49dGUoZS5sb2NhbENhcGFiaWxpdGllcyxlLnJlbW90ZUNhcGFiaWxpdGllcyk7ciYmZS5ydHBTZW5kZXImJihuLmVuY29kaW5ncz1lLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnMsbi5ydGNwPXtjbmFtZTpaLmxvY2FsQ05hbWUsY29tcG91bmQ6ZS5ydGNwUGFyYW1ldGVycy5jb21wb3VuZH0sZS5yZWN2RW5jb2RpbmdQYXJhbWV0ZXJzLmxlbmd0aCYmKG4ucnRjcC5zc3JjPWUucmVjdkVuY29kaW5nUGFyYW1ldGVyc1swXS5zc3JjKSxlLnJ0cFNlbmRlci5zZW5kKG4pKSxpJiZlLnJ0cFJlY2VpdmVyJiZuLmNvZGVjcy5sZW5ndGg+MCYmKFwidmlkZW9cIj09PWUua2luZCYmZS5yZWN2RW5jb2RpbmdQYXJhbWV0ZXJzJiZ0PDE1MDE5JiZlLnJlY3ZFbmNvZGluZ1BhcmFtZXRlcnMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZGVsZXRlIGUucnR4fSkpLGUucmVjdkVuY29kaW5nUGFyYW1ldGVycy5sZW5ndGg/bi5lbmNvZGluZ3M9ZS5yZWN2RW5jb2RpbmdQYXJhbWV0ZXJzOm4uZW5jb2RpbmdzPVt7fV0sbi5ydGNwPXtjb21wb3VuZDplLnJ0Y3BQYXJhbWV0ZXJzLmNvbXBvdW5kfSxlLnJ0Y3BQYXJhbWV0ZXJzLmNuYW1lJiYobi5ydGNwLmNuYW1lPWUucnRjcFBhcmFtZXRlcnMuY25hbWUpLGUuc2VuZEVuY29kaW5nUGFyYW1ldGVycy5sZW5ndGgmJihuLnJ0Y3Auc3NyYz1lLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0uc3NyYyksZS5ydHBSZWNlaXZlci5yZWNlaXZlKG4pKX0sbi5wcm90b3R5cGUuc2V0TG9jYWxEZXNjcmlwdGlvbj1mdW5jdGlvbihlKXt2YXIgdCxyLGk9dGhpcztpZigtMT09PVtcIm9mZmVyXCIsXCJhbnN3ZXJcIl0uaW5kZXhPZihlLnR5cGUpKXJldHVybiBQcm9taXNlLnJlamVjdChuZShcIlR5cGVFcnJvclwiLCdVbnN1cHBvcnRlZCB0eXBlIFwiJytlLnR5cGUrJ1wiJykpO2lmKCFyZShcInNldExvY2FsRGVzY3JpcHRpb25cIixlLnR5cGUsaS5zaWduYWxpbmdTdGF0ZSl8fGkuX2lzQ2xvc2VkKXJldHVybiBQcm9taXNlLnJlamVjdChuZShcIkludmFsaWRTdGF0ZUVycm9yXCIsXCJDYW4gbm90IHNldCBsb2NhbCBcIitlLnR5cGUrXCIgaW4gc3RhdGUgXCIraS5zaWduYWxpbmdTdGF0ZSkpO2lmKFwib2ZmZXJcIj09PWUudHlwZSl0PVouc3BsaXRTZWN0aW9ucyhlLnNkcCkscj10LnNoaWZ0KCksdC5mb3JFYWNoKChmdW5jdGlvbihlLHQpe3ZhciByPVoucGFyc2VSdHBQYXJhbWV0ZXJzKGUpO2kudHJhbnNjZWl2ZXJzW3RdLmxvY2FsQ2FwYWJpbGl0aWVzPXJ9KSksaS50cmFuc2NlaXZlcnMuZm9yRWFjaCgoZnVuY3Rpb24oZSx0KXtpLl9nYXRoZXIoZS5taWQsdCl9KSk7ZWxzZSBpZihcImFuc3dlclwiPT09ZS50eXBlKXt0PVouc3BsaXRTZWN0aW9ucyhpLl9yZW1vdGVEZXNjcmlwdGlvbi5zZHApLHI9dC5zaGlmdCgpO3ZhciBuPVoubWF0Y2hQcmVmaXgocixcImE9aWNlLWxpdGVcIikubGVuZ3RoPjA7dC5mb3JFYWNoKChmdW5jdGlvbihlLHQpe3ZhciBzPWkudHJhbnNjZWl2ZXJzW3RdLG89cy5pY2VHYXRoZXJlcixhPXMuaWNlVHJhbnNwb3J0LGM9cy5kdGxzVHJhbnNwb3J0LGQ9cy5sb2NhbENhcGFiaWxpdGllcyx1PXMucmVtb3RlQ2FwYWJpbGl0aWVzO2lmKCEoWi5pc1JlamVjdGVkKGUpJiYwPT09Wi5tYXRjaFByZWZpeChlLFwiYT1idW5kbGUtb25seVwiKS5sZW5ndGgpJiYhcy5yZWplY3RlZCl7dmFyIGw9Wi5nZXRJY2VQYXJhbWV0ZXJzKGUsciksaD1aLmdldER0bHNQYXJhbWV0ZXJzKGUscik7biYmKGgucm9sZT1cInNlcnZlclwiKSxpLnVzaW5nQnVuZGxlJiYwIT09dHx8KGkuX2dhdGhlcihzLm1pZCx0KSxcIm5ld1wiPT09YS5zdGF0ZSYmYS5zdGFydChvLGwsbj9cImNvbnRyb2xsaW5nXCI6XCJjb250cm9sbGVkXCIpLFwibmV3XCI9PT1jLnN0YXRlJiZjLnN0YXJ0KGgpKTt2YXIgcD10ZShkLHUpO2kuX3RyYW5zY2VpdmUocyxwLmNvZGVjcy5sZW5ndGg+MCwhMSl9fSkpfXJldHVybiBpLl9sb2NhbERlc2NyaXB0aW9uPXt0eXBlOmUudHlwZSxzZHA6ZS5zZHB9LFwib2ZmZXJcIj09PWUudHlwZT9pLl91cGRhdGVTaWduYWxpbmdTdGF0ZShcImhhdmUtbG9jYWwtb2ZmZXJcIik6aS5fdXBkYXRlU2lnbmFsaW5nU3RhdGUoXCJzdGFibGVcIiksUHJvbWlzZS5yZXNvbHZlKCl9LG4ucHJvdG90eXBlLnNldFJlbW90ZURlc2NyaXB0aW9uPWZ1bmN0aW9uKG4pe3ZhciBzPXRoaXM7aWYoLTE9PT1bXCJvZmZlclwiLFwiYW5zd2VyXCJdLmluZGV4T2Yobi50eXBlKSlyZXR1cm4gUHJvbWlzZS5yZWplY3QobmUoXCJUeXBlRXJyb3JcIiwnVW5zdXBwb3J0ZWQgdHlwZSBcIicrbi50eXBlKydcIicpKTtpZighcmUoXCJzZXRSZW1vdGVEZXNjcmlwdGlvblwiLG4udHlwZSxzLnNpZ25hbGluZ1N0YXRlKXx8cy5faXNDbG9zZWQpcmV0dXJuIFByb21pc2UucmVqZWN0KG5lKFwiSW52YWxpZFN0YXRlRXJyb3JcIixcIkNhbiBub3Qgc2V0IHJlbW90ZSBcIituLnR5cGUrXCIgaW4gc3RhdGUgXCIrcy5zaWduYWxpbmdTdGF0ZSkpO3ZhciBvPXt9O3MucmVtb3RlU3RyZWFtcy5mb3JFYWNoKChmdW5jdGlvbihlKXtvW2UuaWRdPWV9KSk7dmFyIGE9W10sYz1aLnNwbGl0U2VjdGlvbnMobi5zZHApLGQ9Yy5zaGlmdCgpLHU9Wi5tYXRjaFByZWZpeChkLFwiYT1pY2UtbGl0ZVwiKS5sZW5ndGg+MCxsPVoubWF0Y2hQcmVmaXgoZCxcImE9Z3JvdXA6QlVORExFIFwiKS5sZW5ndGg+MDtzLnVzaW5nQnVuZGxlPWw7dmFyIGg9Wi5tYXRjaFByZWZpeChkLFwiYT1pY2Utb3B0aW9uczpcIilbMF07cmV0dXJuIHMuY2FuVHJpY2tsZUljZUNhbmRpZGF0ZXM9ISFoJiZoLnN1YnN0cigxNCkuc3BsaXQoXCIgXCIpLmluZGV4T2YoXCJ0cmlja2xlXCIpPj0wLGMuZm9yRWFjaCgoZnVuY3Rpb24oaSxjKXt2YXIgaD1aLnNwbGl0TGluZXMoaSkscD1aLmdldEtpbmQoaSksXz1aLmlzUmVqZWN0ZWQoaSkmJjA9PT1aLm1hdGNoUHJlZml4KGksXCJhPWJ1bmRsZS1vbmx5XCIpLmxlbmd0aCxtPWhbMF0uc3Vic3RyKDIpLnNwbGl0KFwiIFwiKVsyXSxmPVouZ2V0RGlyZWN0aW9uKGksZCksdj1aLnBhcnNlTXNpZChpKSxSPVouZ2V0TWlkKGkpfHxaLmdlbmVyYXRlSWRlbnRpZmllcigpO2lmKF98fFwiYXBwbGljYXRpb25cIj09PXAmJihcIkRUTFMvU0NUUFwiPT09bXx8XCJVRFAvRFRMUy9TQ1RQXCI9PT1tKSlzLnRyYW5zY2VpdmVyc1tjXT17bWlkOlIsa2luZDpwLHByb3RvY29sOm0scmVqZWN0ZWQ6ITB9O2Vsc2V7dmFyIGcsUyxDLFQsSSxFLHksayxiOyFfJiZzLnRyYW5zY2VpdmVyc1tjXSYmcy50cmFuc2NlaXZlcnNbY10ucmVqZWN0ZWQmJihzLnRyYW5zY2VpdmVyc1tjXT1zLl9jcmVhdGVUcmFuc2NlaXZlcihwLCEwKSk7dmFyIFAsTyxMPVoucGFyc2VSdHBQYXJhbWV0ZXJzKGkpO198fChQPVouZ2V0SWNlUGFyYW1ldGVycyhpLGQpLChPPVouZ2V0RHRsc1BhcmFtZXRlcnMoaSxkKSkucm9sZT1cImNsaWVudFwiKSx5PVoucGFyc2VSdHBFbmNvZGluZ1BhcmFtZXRlcnMoaSk7dmFyIE49Wi5wYXJzZVJ0Y3BQYXJhbWV0ZXJzKGkpLEQ9Wi5tYXRjaFByZWZpeChpLFwiYT1lbmQtb2YtY2FuZGlkYXRlc1wiLGQpLmxlbmd0aD4wLEE9Wi5tYXRjaFByZWZpeChpLFwiYT1jYW5kaWRhdGU6XCIpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIFoucGFyc2VDYW5kaWRhdGUoZSl9KSkuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4gMT09PWUuY29tcG9uZW50fSkpO2lmKChcIm9mZmVyXCI9PT1uLnR5cGV8fFwiYW5zd2VyXCI9PT1uLnR5cGUpJiYhXyYmbCYmYz4wJiZzLnRyYW5zY2VpdmVyc1tjXSYmKHMuX2Rpc3Bvc2VJY2VBbmREdGxzVHJhbnNwb3J0cyhjKSxzLnRyYW5zY2VpdmVyc1tjXS5pY2VHYXRoZXJlcj1zLnRyYW5zY2VpdmVyc1swXS5pY2VHYXRoZXJlcixzLnRyYW5zY2VpdmVyc1tjXS5pY2VUcmFuc3BvcnQ9cy50cmFuc2NlaXZlcnNbMF0uaWNlVHJhbnNwb3J0LHMudHJhbnNjZWl2ZXJzW2NdLmR0bHNUcmFuc3BvcnQ9cy50cmFuc2NlaXZlcnNbMF0uZHRsc1RyYW5zcG9ydCxzLnRyYW5zY2VpdmVyc1tjXS5ydHBTZW5kZXImJnMudHJhbnNjZWl2ZXJzW2NdLnJ0cFNlbmRlci5zZXRUcmFuc3BvcnQocy50cmFuc2NlaXZlcnNbMF0uZHRsc1RyYW5zcG9ydCkscy50cmFuc2NlaXZlcnNbY10ucnRwUmVjZWl2ZXImJnMudHJhbnNjZWl2ZXJzW2NdLnJ0cFJlY2VpdmVyLnNldFRyYW5zcG9ydChzLnRyYW5zY2VpdmVyc1swXS5kdGxzVHJhbnNwb3J0KSksXCJvZmZlclwiIT09bi50eXBlfHxfKXtpZihcImFuc3dlclwiPT09bi50eXBlJiYhXyl7Uz0oZz1zLnRyYW5zY2VpdmVyc1tjXSkuaWNlR2F0aGVyZXIsQz1nLmljZVRyYW5zcG9ydCxUPWcuZHRsc1RyYW5zcG9ydCxJPWcucnRwUmVjZWl2ZXIsRT1nLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnMsaz1nLmxvY2FsQ2FwYWJpbGl0aWVzLHMudHJhbnNjZWl2ZXJzW2NdLnJlY3ZFbmNvZGluZ1BhcmFtZXRlcnM9eSxzLnRyYW5zY2VpdmVyc1tjXS5yZW1vdGVDYXBhYmlsaXRpZXM9TCxzLnRyYW5zY2VpdmVyc1tjXS5ydGNwUGFyYW1ldGVycz1OLEEubGVuZ3RoJiZcIm5ld1wiPT09Qy5zdGF0ZSYmKCF1JiYhRHx8bCYmMCE9PWM/QS5mb3JFYWNoKChmdW5jdGlvbihlKXtpZShnLmljZVRyYW5zcG9ydCxlKX0pKTpDLnNldFJlbW90ZUNhbmRpZGF0ZXMoQSkpLGwmJjAhPT1jfHwoXCJuZXdcIj09PUMuc3RhdGUmJkMuc3RhcnQoUyxQLFwiY29udHJvbGxpbmdcIiksXCJuZXdcIj09PVQuc3RhdGUmJlQuc3RhcnQoTykpLCF0ZShnLmxvY2FsQ2FwYWJpbGl0aWVzLGcucmVtb3RlQ2FwYWJpbGl0aWVzKS5jb2RlY3MuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm5cInJ0eFwiPT09ZS5uYW1lLnRvTG93ZXJDYXNlKCl9KSkubGVuZ3RoJiZnLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4JiZkZWxldGUgZy5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eCxzLl90cmFuc2NlaXZlKGcsXCJzZW5kcmVjdlwiPT09Znx8XCJyZWN2b25seVwiPT09ZixcInNlbmRyZWN2XCI9PT1mfHxcInNlbmRvbmx5XCI9PT1mKSwhSXx8XCJzZW5kcmVjdlwiIT09ZiYmXCJzZW5kb25seVwiIT09Zj9kZWxldGUgZy5ydHBSZWNlaXZlcjooYj1JLnRyYWNrLHY/KG9bdi5zdHJlYW1dfHwob1t2LnN0cmVhbV09bmV3IGUuTWVkaWFTdHJlYW0pLHIoYixvW3Yuc3RyZWFtXSksYS5wdXNoKFtiLEksb1t2LnN0cmVhbV1dKSk6KG8uZGVmYXVsdHx8KG8uZGVmYXVsdD1uZXcgZS5NZWRpYVN0cmVhbSkscihiLG8uZGVmYXVsdCksYS5wdXNoKFtiLEksby5kZWZhdWx0XSkpKX19ZWxzZXsoZz1zLnRyYW5zY2VpdmVyc1tjXXx8cy5fY3JlYXRlVHJhbnNjZWl2ZXIocCkpLm1pZD1SLGcuaWNlR2F0aGVyZXJ8fChnLmljZUdhdGhlcmVyPXMuX2NyZWF0ZUljZUdhdGhlcmVyKGMsbCkpLEEubGVuZ3RoJiZcIm5ld1wiPT09Zy5pY2VUcmFuc3BvcnQuc3RhdGUmJighRHx8bCYmMCE9PWM/QS5mb3JFYWNoKChmdW5jdGlvbihlKXtpZShnLmljZVRyYW5zcG9ydCxlKX0pKTpnLmljZVRyYW5zcG9ydC5zZXRSZW1vdGVDYW5kaWRhdGVzKEEpKSxrPWUuUlRDUnRwUmVjZWl2ZXIuZ2V0Q2FwYWJpbGl0aWVzKHApLHQ8MTUwMTkmJihrLmNvZGVjcz1rLmNvZGVjcy5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVyblwicnR4XCIhPT1lLm5hbWV9KSkpLEU9Zy5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzfHxbe3NzcmM6MTAwMSooMipjKzIpfV07dmFyIE0seD0hMTtpZihcInNlbmRyZWN2XCI9PT1mfHxcInNlbmRvbmx5XCI9PT1mKXtpZih4PSFnLnJ0cFJlY2VpdmVyLEk9Zy5ydHBSZWNlaXZlcnx8bmV3IGUuUlRDUnRwUmVjZWl2ZXIoZy5kdGxzVHJhbnNwb3J0LHApLHgpYj1JLnRyYWNrLHYmJlwiLVwiPT09di5zdHJlYW18fCh2PyhvW3Yuc3RyZWFtXXx8KG9bdi5zdHJlYW1dPW5ldyBlLk1lZGlhU3RyZWFtLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvW3Yuc3RyZWFtXSxcImlkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB2LnN0cmVhbX19KSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGIsXCJpZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdi50cmFja319KSxNPW9bdi5zdHJlYW1dKTooby5kZWZhdWx0fHwoby5kZWZhdWx0PW5ldyBlLk1lZGlhU3RyZWFtKSxNPW8uZGVmYXVsdCkpLE0mJihyKGIsTSksZy5hc3NvY2lhdGVkUmVtb3RlTWVkaWFTdHJlYW1zLnB1c2goTSkpLGEucHVzaChbYixJLE1dKX1lbHNlIGcucnRwUmVjZWl2ZXImJmcucnRwUmVjZWl2ZXIudHJhY2smJihnLmFzc29jaWF0ZWRSZW1vdGVNZWRpYVN0cmVhbXMuZm9yRWFjaCgoZnVuY3Rpb24odCl7dmFyIHI9dC5nZXRUcmFja3MoKS5maW5kKChmdW5jdGlvbihlKXtyZXR1cm4gZS5pZD09PWcucnRwUmVjZWl2ZXIudHJhY2suaWR9KSk7ciYmZnVuY3Rpb24odCxyKXtyLnJlbW92ZVRyYWNrKHQpLHIuZGlzcGF0Y2hFdmVudChuZXcgZS5NZWRpYVN0cmVhbVRyYWNrRXZlbnQoXCJyZW1vdmV0cmFja1wiLHt0cmFjazp0fSkpfShyLHQpfSkpLGcuYXNzb2NpYXRlZFJlbW90ZU1lZGlhU3RyZWFtcz1bXSk7Zy5sb2NhbENhcGFiaWxpdGllcz1rLGcucmVtb3RlQ2FwYWJpbGl0aWVzPUwsZy5ydHBSZWNlaXZlcj1JLGcucnRjcFBhcmFtZXRlcnM9TixnLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnM9RSxnLnJlY3ZFbmNvZGluZ1BhcmFtZXRlcnM9eSxzLl90cmFuc2NlaXZlKHMudHJhbnNjZWl2ZXJzW2NdLCExLHgpfX19KSksdm9pZCAwPT09cy5fZHRsc1JvbGUmJihzLl9kdGxzUm9sZT1cIm9mZmVyXCI9PT1uLnR5cGU/XCJhY3RpdmVcIjpcInBhc3NpdmVcIikscy5fcmVtb3RlRGVzY3JpcHRpb249e3R5cGU6bi50eXBlLHNkcDpuLnNkcH0sXCJvZmZlclwiPT09bi50eXBlP3MuX3VwZGF0ZVNpZ25hbGluZ1N0YXRlKFwiaGF2ZS1yZW1vdGUtb2ZmZXJcIik6cy5fdXBkYXRlU2lnbmFsaW5nU3RhdGUoXCJzdGFibGVcIiksT2JqZWN0LmtleXMobykuZm9yRWFjaCgoZnVuY3Rpb24odCl7dmFyIHI9b1t0XTtpZihyLmdldFRyYWNrcygpLmxlbmd0aCl7aWYoLTE9PT1zLnJlbW90ZVN0cmVhbXMuaW5kZXhPZihyKSl7cy5yZW1vdGVTdHJlYW1zLnB1c2gocik7dmFyIG49bmV3IEV2ZW50KFwiYWRkc3RyZWFtXCIpO24uc3RyZWFtPXIsZS5zZXRUaW1lb3V0KChmdW5jdGlvbigpe3MuX2Rpc3BhdGNoRXZlbnQoXCJhZGRzdHJlYW1cIixuKX0pKX1hLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0PWVbMF0sbj1lWzFdO3IuaWQ9PT1lWzJdLmlkJiZpKHMsdCxuLFtyXSl9KSl9fSkpLGEuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZVsyXXx8aShzLGVbMF0sZVsxXSxbXSl9KSksZS5zZXRUaW1lb3V0KChmdW5jdGlvbigpe3MmJnMudHJhbnNjZWl2ZXJzJiZzLnRyYW5zY2VpdmVycy5mb3JFYWNoKChmdW5jdGlvbihlKXtlLmljZVRyYW5zcG9ydCYmXCJuZXdcIj09PWUuaWNlVHJhbnNwb3J0LnN0YXRlJiZlLmljZVRyYW5zcG9ydC5nZXRSZW1vdGVDYW5kaWRhdGVzKCkubGVuZ3RoPjAmJihjb25zb2xlLndhcm4oXCJUaW1lb3V0IGZvciBhZGRSZW1vdGVDYW5kaWRhdGUuIENvbnNpZGVyIHNlbmRpbmcgYW4gZW5kLW9mLWNhbmRpZGF0ZXMgbm90aWZpY2F0aW9uXCIpLGUuaWNlVHJhbnNwb3J0LmFkZFJlbW90ZUNhbmRpZGF0ZSh7fSkpfSkpfSksNGUzKSxQcm9taXNlLnJlc29sdmUoKX0sbi5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oKXt0aGlzLnRyYW5zY2VpdmVycy5mb3JFYWNoKChmdW5jdGlvbihlKXtlLmljZVRyYW5zcG9ydCYmZS5pY2VUcmFuc3BvcnQuc3RvcCgpLGUuZHRsc1RyYW5zcG9ydCYmZS5kdGxzVHJhbnNwb3J0LnN0b3AoKSxlLnJ0cFNlbmRlciYmZS5ydHBTZW5kZXIuc3RvcCgpLGUucnRwUmVjZWl2ZXImJmUucnRwUmVjZWl2ZXIuc3RvcCgpfSkpLHRoaXMuX2lzQ2xvc2VkPSEwLHRoaXMuX3VwZGF0ZVNpZ25hbGluZ1N0YXRlKFwiY2xvc2VkXCIpfSxuLnByb3RvdHlwZS5fdXBkYXRlU2lnbmFsaW5nU3RhdGU9ZnVuY3Rpb24oZSl7dGhpcy5zaWduYWxpbmdTdGF0ZT1lO3ZhciB0PW5ldyBFdmVudChcInNpZ25hbGluZ3N0YXRlY2hhbmdlXCIpO3RoaXMuX2Rpc3BhdGNoRXZlbnQoXCJzaWduYWxpbmdzdGF0ZWNoYW5nZVwiLHQpfSxuLnByb3RvdHlwZS5fbWF5YmVGaXJlTmVnb3RpYXRpb25OZWVkZWQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzO1wic3RhYmxlXCI9PT10aGlzLnNpZ25hbGluZ1N0YXRlJiYhMCE9PXRoaXMubmVlZE5lZ290aWF0aW9uJiYodGhpcy5uZWVkTmVnb3RpYXRpb249ITAsZS5zZXRUaW1lb3V0KChmdW5jdGlvbigpe2lmKHQubmVlZE5lZ290aWF0aW9uKXt0Lm5lZWROZWdvdGlhdGlvbj0hMTt2YXIgZT1uZXcgRXZlbnQoXCJuZWdvdGlhdGlvbm5lZWRlZFwiKTt0Ll9kaXNwYXRjaEV2ZW50KFwibmVnb3RpYXRpb25uZWVkZWRcIixlKX19KSwwKSl9LG4ucHJvdG90eXBlLl91cGRhdGVJY2VDb25uZWN0aW9uU3RhdGU9ZnVuY3Rpb24oKXt2YXIgZSx0PXtuZXc6MCxjbG9zZWQ6MCxjaGVja2luZzowLGNvbm5lY3RlZDowLGNvbXBsZXRlZDowLGRpc2Nvbm5lY3RlZDowLGZhaWxlZDowfTtpZih0aGlzLnRyYW5zY2VpdmVycy5mb3JFYWNoKChmdW5jdGlvbihlKXtlLmljZVRyYW5zcG9ydCYmIWUucmVqZWN0ZWQmJnRbZS5pY2VUcmFuc3BvcnQuc3RhdGVdKyt9KSksZT1cIm5ld1wiLHQuZmFpbGVkPjA/ZT1cImZhaWxlZFwiOnQuY2hlY2tpbmc+MD9lPVwiY2hlY2tpbmdcIjp0LmRpc2Nvbm5lY3RlZD4wP2U9XCJkaXNjb25uZWN0ZWRcIjp0Lm5ldz4wP2U9XCJuZXdcIjp0LmNvbm5lY3RlZD4wP2U9XCJjb25uZWN0ZWRcIjp0LmNvbXBsZXRlZD4wJiYoZT1cImNvbXBsZXRlZFwiKSxlIT09dGhpcy5pY2VDb25uZWN0aW9uU3RhdGUpe3RoaXMuaWNlQ29ubmVjdGlvblN0YXRlPWU7dmFyIHI9bmV3IEV2ZW50KFwiaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlXCIpO3RoaXMuX2Rpc3BhdGNoRXZlbnQoXCJpY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2VcIixyKX19LG4ucHJvdG90eXBlLl91cGRhdGVDb25uZWN0aW9uU3RhdGU9ZnVuY3Rpb24oKXt2YXIgZSx0PXtuZXc6MCxjbG9zZWQ6MCxjb25uZWN0aW5nOjAsY29ubmVjdGVkOjAsY29tcGxldGVkOjAsZGlzY29ubmVjdGVkOjAsZmFpbGVkOjB9O2lmKHRoaXMudHJhbnNjZWl2ZXJzLmZvckVhY2goKGZ1bmN0aW9uKGUpe2UuaWNlVHJhbnNwb3J0JiZlLmR0bHNUcmFuc3BvcnQmJiFlLnJlamVjdGVkJiYodFtlLmljZVRyYW5zcG9ydC5zdGF0ZV0rKyx0W2UuZHRsc1RyYW5zcG9ydC5zdGF0ZV0rKyl9KSksdC5jb25uZWN0ZWQrPXQuY29tcGxldGVkLGU9XCJuZXdcIix0LmZhaWxlZD4wP2U9XCJmYWlsZWRcIjp0LmNvbm5lY3Rpbmc+MD9lPVwiY29ubmVjdGluZ1wiOnQuZGlzY29ubmVjdGVkPjA/ZT1cImRpc2Nvbm5lY3RlZFwiOnQubmV3PjA/ZT1cIm5ld1wiOnQuY29ubmVjdGVkPjAmJihlPVwiY29ubmVjdGVkXCIpLGUhPT10aGlzLmNvbm5lY3Rpb25TdGF0ZSl7dGhpcy5jb25uZWN0aW9uU3RhdGU9ZTt2YXIgcj1uZXcgRXZlbnQoXCJjb25uZWN0aW9uc3RhdGVjaGFuZ2VcIik7dGhpcy5fZGlzcGF0Y2hFdmVudChcImNvbm5lY3Rpb25zdGF0ZWNoYW5nZVwiLHIpfX0sbi5wcm90b3R5cGUuY3JlYXRlT2ZmZXI9ZnVuY3Rpb24oKXt2YXIgcj10aGlzO2lmKHIuX2lzQ2xvc2VkKXJldHVybiBQcm9taXNlLnJlamVjdChuZShcIkludmFsaWRTdGF0ZUVycm9yXCIsXCJDYW4gbm90IGNhbGwgY3JlYXRlT2ZmZXIgYWZ0ZXIgY2xvc2VcIikpO3ZhciBpPXIudHJhbnNjZWl2ZXJzLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuXCJhdWRpb1wiPT09ZS5raW5kfSkpLmxlbmd0aCxuPXIudHJhbnNjZWl2ZXJzLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuXCJ2aWRlb1wiPT09ZS5raW5kfSkpLmxlbmd0aCxzPWFyZ3VtZW50c1swXTtpZihzKXtpZihzLm1hbmRhdG9yeXx8cy5vcHRpb25hbCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiTGVnYWN5IG1hbmRhdG9yeS9vcHRpb25hbCBjb25zdHJhaW50cyBub3Qgc3VwcG9ydGVkLlwiKTt2b2lkIDAhPT1zLm9mZmVyVG9SZWNlaXZlQXVkaW8mJihpPSEwPT09cy5vZmZlclRvUmVjZWl2ZUF1ZGlvPzE6ITE9PT1zLm9mZmVyVG9SZWNlaXZlQXVkaW8/MDpzLm9mZmVyVG9SZWNlaXZlQXVkaW8pLHZvaWQgMCE9PXMub2ZmZXJUb1JlY2VpdmVWaWRlbyYmKG49ITA9PT1zLm9mZmVyVG9SZWNlaXZlVmlkZW8/MTohMT09PXMub2ZmZXJUb1JlY2VpdmVWaWRlbz8wOnMub2ZmZXJUb1JlY2VpdmVWaWRlbyl9Zm9yKHIudHJhbnNjZWl2ZXJzLmZvckVhY2goKGZ1bmN0aW9uKGUpe1wiYXVkaW9cIj09PWUua2luZD8tLWk8MCYmKGUud2FudFJlY2VpdmU9ITEpOlwidmlkZW9cIj09PWUua2luZCYmLS1uPDAmJihlLndhbnRSZWNlaXZlPSExKX0pKTtpPjB8fG4+MDspaT4wJiYoci5fY3JlYXRlVHJhbnNjZWl2ZXIoXCJhdWRpb1wiKSxpLS0pLG4+MCYmKHIuX2NyZWF0ZVRyYW5zY2VpdmVyKFwidmlkZW9cIiksbi0tKTt2YXIgbz1aLndyaXRlU2Vzc2lvbkJvaWxlcnBsYXRlKHIuX3NkcFNlc3Npb25JZCxyLl9zZHBTZXNzaW9uVmVyc2lvbisrKTtyLnRyYW5zY2VpdmVycy5mb3JFYWNoKChmdW5jdGlvbihpLG4pe3ZhciBzPWkudHJhY2ssbz1pLmtpbmQsYT1pLm1pZHx8Wi5nZW5lcmF0ZUlkZW50aWZpZXIoKTtpLm1pZD1hLGkuaWNlR2F0aGVyZXJ8fChpLmljZUdhdGhlcmVyPXIuX2NyZWF0ZUljZUdhdGhlcmVyKG4sci51c2luZ0J1bmRsZSkpO3ZhciBjPWUuUlRDUnRwU2VuZGVyLmdldENhcGFiaWxpdGllcyhvKTt0PDE1MDE5JiYoYy5jb2RlY3M9Yy5jb2RlY3MuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm5cInJ0eFwiIT09ZS5uYW1lfSkpKSxjLmNvZGVjcy5mb3JFYWNoKChmdW5jdGlvbihlKXtcIkgyNjRcIj09PWUubmFtZSYmdm9pZCAwPT09ZS5wYXJhbWV0ZXJzW1wibGV2ZWwtYXN5bW1ldHJ5LWFsbG93ZWRcIl0mJihlLnBhcmFtZXRlcnNbXCJsZXZlbC1hc3ltbWV0cnktYWxsb3dlZFwiXT1cIjFcIiksaS5yZW1vdGVDYXBhYmlsaXRpZXMmJmkucmVtb3RlQ2FwYWJpbGl0aWVzLmNvZGVjcyYmaS5yZW1vdGVDYXBhYmlsaXRpZXMuY29kZWNzLmZvckVhY2goKGZ1bmN0aW9uKHQpe2UubmFtZS50b0xvd2VyQ2FzZSgpPT09dC5uYW1lLnRvTG93ZXJDYXNlKCkmJmUuY2xvY2tSYXRlPT09dC5jbG9ja1JhdGUmJihlLnByZWZlcnJlZFBheWxvYWRUeXBlPXQucGF5bG9hZFR5cGUpfSkpfSkpLGMuaGVhZGVyRXh0ZW5zaW9ucy5mb3JFYWNoKChmdW5jdGlvbihlKXsoaS5yZW1vdGVDYXBhYmlsaXRpZXMmJmkucmVtb3RlQ2FwYWJpbGl0aWVzLmhlYWRlckV4dGVuc2lvbnN8fFtdKS5mb3JFYWNoKChmdW5jdGlvbih0KXtlLnVyaT09PXQudXJpJiYoZS5pZD10LmlkKX0pKX0pKTt2YXIgZD1pLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnN8fFt7c3NyYzoxMDAxKigyKm4rMSl9XTtzJiZ0Pj0xNTAxOSYmXCJ2aWRlb1wiPT09byYmIWRbMF0ucnR4JiYoZFswXS5ydHg9e3NzcmM6ZFswXS5zc3JjKzF9KSxpLndhbnRSZWNlaXZlJiYoaS5ydHBSZWNlaXZlcj1uZXcgZS5SVENSdHBSZWNlaXZlcihpLmR0bHNUcmFuc3BvcnQsbykpLGkubG9jYWxDYXBhYmlsaXRpZXM9YyxpLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnM9ZH0pKSxcIm1heC1jb21wYXRcIiE9PXIuX2NvbmZpZy5idW5kbGVQb2xpY3kmJihvKz1cImE9Z3JvdXA6QlVORExFIFwiK3IudHJhbnNjZWl2ZXJzLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUubWlkfSkpLmpvaW4oXCIgXCIpK1wiXFxyXFxuXCIpLG8rPVwiYT1pY2Utb3B0aW9uczp0cmlja2xlXFxyXFxuXCIsci50cmFuc2NlaXZlcnMuZm9yRWFjaCgoZnVuY3Rpb24oZSx0KXtvKz1lZShlLGUubG9jYWxDYXBhYmlsaXRpZXMsXCJvZmZlclwiLGUuc3RyZWFtLHIuX2R0bHNSb2xlKSxvKz1cImE9cnRjcC1yc2l6ZVxcclxcblwiLCFlLmljZUdhdGhlcmVyfHxcIm5ld1wiPT09ci5pY2VHYXRoZXJpbmdTdGF0ZXx8MCE9PXQmJnIudXNpbmdCdW5kbGV8fChlLmljZUdhdGhlcmVyLmdldExvY2FsQ2FuZGlkYXRlcygpLmZvckVhY2goKGZ1bmN0aW9uKGUpe2UuY29tcG9uZW50PTEsbys9XCJhPVwiK1oud3JpdGVDYW5kaWRhdGUoZSkrXCJcXHJcXG5cIn0pKSxcImNvbXBsZXRlZFwiPT09ZS5pY2VHYXRoZXJlci5zdGF0ZSYmKG8rPVwiYT1lbmQtb2YtY2FuZGlkYXRlc1xcclxcblwiKSl9KSk7dmFyIGE9bmV3IGUuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKHt0eXBlOlwib2ZmZXJcIixzZHA6b30pO3JldHVybiBQcm9taXNlLnJlc29sdmUoYSl9LG4ucHJvdG90eXBlLmNyZWF0ZUFuc3dlcj1mdW5jdGlvbigpe3ZhciByPXRoaXM7aWYoci5faXNDbG9zZWQpcmV0dXJuIFByb21pc2UucmVqZWN0KG5lKFwiSW52YWxpZFN0YXRlRXJyb3JcIixcIkNhbiBub3QgY2FsbCBjcmVhdGVBbnN3ZXIgYWZ0ZXIgY2xvc2VcIikpO2lmKFwiaGF2ZS1yZW1vdGUtb2ZmZXJcIiE9PXIuc2lnbmFsaW5nU3RhdGUmJlwiaGF2ZS1sb2NhbC1wcmFuc3dlclwiIT09ci5zaWduYWxpbmdTdGF0ZSlyZXR1cm4gUHJvbWlzZS5yZWplY3QobmUoXCJJbnZhbGlkU3RhdGVFcnJvclwiLFwiQ2FuIG5vdCBjYWxsIGNyZWF0ZUFuc3dlciBpbiBzaWduYWxpbmdTdGF0ZSBcIityLnNpZ25hbGluZ1N0YXRlKSk7dmFyIGk9Wi53cml0ZVNlc3Npb25Cb2lsZXJwbGF0ZShyLl9zZHBTZXNzaW9uSWQsci5fc2RwU2Vzc2lvblZlcnNpb24rKyk7ci51c2luZ0J1bmRsZSYmKGkrPVwiYT1ncm91cDpCVU5ETEUgXCIrci50cmFuc2NlaXZlcnMubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gZS5taWR9KSkuam9pbihcIiBcIikrXCJcXHJcXG5cIiksaSs9XCJhPWljZS1vcHRpb25zOnRyaWNrbGVcXHJcXG5cIjt2YXIgbj1aLmdldE1lZGlhU2VjdGlvbnMoci5fcmVtb3RlRGVzY3JpcHRpb24uc2RwKS5sZW5ndGg7ci50cmFuc2NlaXZlcnMuZm9yRWFjaCgoZnVuY3Rpb24oZSxzKXtpZighKHMrMT5uKSl7aWYoZS5yZWplY3RlZClyZXR1cm5cImFwcGxpY2F0aW9uXCI9PT1lLmtpbmQ/XCJEVExTL1NDVFBcIj09PWUucHJvdG9jb2w/aSs9XCJtPWFwcGxpY2F0aW9uIDAgRFRMUy9TQ1RQIDUwMDBcXHJcXG5cIjppKz1cIm09YXBwbGljYXRpb24gMCBcIitlLnByb3RvY29sK1wiIHdlYnJ0Yy1kYXRhY2hhbm5lbFxcclxcblwiOlwiYXVkaW9cIj09PWUua2luZD9pKz1cIm09YXVkaW8gMCBVRFAvVExTL1JUUC9TQVZQRiAwXFxyXFxuYT1ydHBtYXA6MCBQQ01VLzgwMDBcXHJcXG5cIjpcInZpZGVvXCI9PT1lLmtpbmQmJihpKz1cIm09dmlkZW8gMCBVRFAvVExTL1JUUC9TQVZQRiAxMjBcXHJcXG5hPXJ0cG1hcDoxMjAgVlA4LzkwMDAwXFxyXFxuXCIpLHZvaWQoaSs9XCJjPUlOIElQNCAwLjAuMC4wXFxyXFxuYT1pbmFjdGl2ZVxcclxcbmE9bWlkOlwiK2UubWlkK1wiXFxyXFxuXCIpO3ZhciBvO2lmKGUuc3RyZWFtKVwiYXVkaW9cIj09PWUua2luZD9vPWUuc3RyZWFtLmdldEF1ZGlvVHJhY2tzKClbMF06XCJ2aWRlb1wiPT09ZS5raW5kJiYobz1lLnN0cmVhbS5nZXRWaWRlb1RyYWNrcygpWzBdKSxvJiZ0Pj0xNTAxOSYmXCJ2aWRlb1wiPT09ZS5raW5kJiYhZS5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eCYmKGUuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHg9e3NzcmM6ZS5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnNzcmMrMX0pO3ZhciBhPXRlKGUubG9jYWxDYXBhYmlsaXRpZXMsZS5yZW1vdGVDYXBhYmlsaXRpZXMpOyFhLmNvZGVjcy5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVyblwicnR4XCI9PT1lLm5hbWUudG9Mb3dlckNhc2UoKX0pKS5sZW5ndGgmJmUuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHgmJmRlbGV0ZSBlLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4LGkrPWVlKGUsYSxcImFuc3dlclwiLGUuc3RyZWFtLHIuX2R0bHNSb2xlKSxlLnJ0Y3BQYXJhbWV0ZXJzJiZlLnJ0Y3BQYXJhbWV0ZXJzLnJlZHVjZWRTaXplJiYoaSs9XCJhPXJ0Y3AtcnNpemVcXHJcXG5cIil9fSkpO3ZhciBzPW5ldyBlLlJUQ1Nlc3Npb25EZXNjcmlwdGlvbih7dHlwZTpcImFuc3dlclwiLHNkcDppfSk7cmV0dXJuIFByb21pc2UucmVzb2x2ZShzKX0sbi5wcm90b3R5cGUuYWRkSWNlQ2FuZGlkYXRlPWZ1bmN0aW9uKGUpe3ZhciB0LHI9dGhpcztyZXR1cm4gZSYmdm9pZCAwPT09ZS5zZHBNTGluZUluZGV4JiYhZS5zZHBNaWQ/UHJvbWlzZS5yZWplY3QobmV3IFR5cGVFcnJvcihcInNkcE1MaW5lSW5kZXggb3Igc2RwTWlkIHJlcXVpcmVkXCIpKTpuZXcgUHJvbWlzZSgoZnVuY3Rpb24oaSxuKXtpZighci5fcmVtb3RlRGVzY3JpcHRpb24pcmV0dXJuIG4obmUoXCJJbnZhbGlkU3RhdGVFcnJvclwiLFwiQ2FuIG5vdCBhZGQgSUNFIGNhbmRpZGF0ZSB3aXRob3V0IGEgcmVtb3RlIGRlc2NyaXB0aW9uXCIpKTtpZihlJiZcIlwiIT09ZS5jYW5kaWRhdGUpe3ZhciBzPWUuc2RwTUxpbmVJbmRleDtpZihlLnNkcE1pZClmb3IodmFyIG89MDtvPHIudHJhbnNjZWl2ZXJzLmxlbmd0aDtvKyspaWYoci50cmFuc2NlaXZlcnNbb10ubWlkPT09ZS5zZHBNaWQpe3M9bzticmVha312YXIgYT1yLnRyYW5zY2VpdmVyc1tzXTtpZighYSlyZXR1cm4gbihuZShcIk9wZXJhdGlvbkVycm9yXCIsXCJDYW4gbm90IGFkZCBJQ0UgY2FuZGlkYXRlXCIpKTtpZihhLnJlamVjdGVkKXJldHVybiBpKCk7dmFyIGM9T2JqZWN0LmtleXMoZS5jYW5kaWRhdGUpLmxlbmd0aD4wP1oucGFyc2VDYW5kaWRhdGUoZS5jYW5kaWRhdGUpOnt9O2lmKFwidGNwXCI9PT1jLnByb3RvY29sJiYoMD09PWMucG9ydHx8OT09PWMucG9ydCkpcmV0dXJuIGkoKTtpZihjLmNvbXBvbmVudCYmMSE9PWMuY29tcG9uZW50KXJldHVybiBpKCk7aWYoKDA9PT1zfHxzPjAmJmEuaWNlVHJhbnNwb3J0IT09ci50cmFuc2NlaXZlcnNbMF0uaWNlVHJhbnNwb3J0KSYmIWllKGEuaWNlVHJhbnNwb3J0LGMpKXJldHVybiBuKG5lKFwiT3BlcmF0aW9uRXJyb3JcIixcIkNhbiBub3QgYWRkIElDRSBjYW5kaWRhdGVcIikpO3ZhciBkPWUuY2FuZGlkYXRlLnRyaW0oKTswPT09ZC5pbmRleE9mKFwiYT1cIikmJihkPWQuc3Vic3RyKDIpKSwodD1aLmdldE1lZGlhU2VjdGlvbnMoci5fcmVtb3RlRGVzY3JpcHRpb24uc2RwKSlbc10rPVwiYT1cIisoYy50eXBlP2Q6XCJlbmQtb2YtY2FuZGlkYXRlc1wiKStcIlxcclxcblwiLHIuX3JlbW90ZURlc2NyaXB0aW9uLnNkcD1aLmdldERlc2NyaXB0aW9uKHIuX3JlbW90ZURlc2NyaXB0aW9uLnNkcCkrdC5qb2luKFwiXCIpfWVsc2UgZm9yKHZhciB1PTA7dTxyLnRyYW5zY2VpdmVycy5sZW5ndGgmJihyLnRyYW5zY2VpdmVyc1t1XS5yZWplY3RlZHx8KHIudHJhbnNjZWl2ZXJzW3VdLmljZVRyYW5zcG9ydC5hZGRSZW1vdGVDYW5kaWRhdGUoe30pLCh0PVouZ2V0TWVkaWFTZWN0aW9ucyhyLl9yZW1vdGVEZXNjcmlwdGlvbi5zZHApKVt1XSs9XCJhPWVuZC1vZi1jYW5kaWRhdGVzXFxyXFxuXCIsci5fcmVtb3RlRGVzY3JpcHRpb24uc2RwPVouZ2V0RGVzY3JpcHRpb24oci5fcmVtb3RlRGVzY3JpcHRpb24uc2RwKSt0LmpvaW4oXCJcIiksIXIudXNpbmdCdW5kbGUpKTt1KyspO2koKX0pKX0sbi5wcm90b3R5cGUuZ2V0U3RhdHM9ZnVuY3Rpb24odCl7aWYodCYmdCBpbnN0YW5jZW9mIGUuTWVkaWFTdHJlYW1UcmFjayl7dmFyIHI9bnVsbDtpZih0aGlzLnRyYW5zY2VpdmVycy5mb3JFYWNoKChmdW5jdGlvbihlKXtlLnJ0cFNlbmRlciYmZS5ydHBTZW5kZXIudHJhY2s9PT10P3I9ZS5ydHBTZW5kZXI6ZS5ydHBSZWNlaXZlciYmZS5ydHBSZWNlaXZlci50cmFjaz09PXQmJihyPWUucnRwUmVjZWl2ZXIpfSkpLCFyKXRocm93IG5lKFwiSW52YWxpZEFjY2Vzc0Vycm9yXCIsXCJJbnZhbGlkIHNlbGVjdG9yLlwiKTtyZXR1cm4gci5nZXRTdGF0cygpfXZhciBpPVtdO3JldHVybiB0aGlzLnRyYW5zY2VpdmVycy5mb3JFYWNoKChmdW5jdGlvbihlKXtbXCJydHBTZW5kZXJcIixcInJ0cFJlY2VpdmVyXCIsXCJpY2VHYXRoZXJlclwiLFwiaWNlVHJhbnNwb3J0XCIsXCJkdGxzVHJhbnNwb3J0XCJdLmZvckVhY2goKGZ1bmN0aW9uKHQpe2VbdF0mJmkucHVzaChlW3RdLmdldFN0YXRzKCkpfSkpfSkpLFByb21pc2UuYWxsKGkpLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBNYXA7cmV0dXJuIGUuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZS5mb3JFYWNoKChmdW5jdGlvbihlKXt0LnNldChlLmlkLGUpfSkpfSkpLHR9KSl9O1tcIlJUQ1J0cFNlbmRlclwiLFwiUlRDUnRwUmVjZWl2ZXJcIixcIlJUQ0ljZUdhdGhlcmVyXCIsXCJSVENJY2VUcmFuc3BvcnRcIixcIlJUQ0R0bHNUcmFuc3BvcnRcIl0uZm9yRWFjaCgoZnVuY3Rpb24odCl7dmFyIHI9ZVt0XTtpZihyJiZyLnByb3RvdHlwZSYmci5wcm90b3R5cGUuZ2V0U3RhdHMpe3ZhciBpPXIucHJvdG90eXBlLmdldFN0YXRzO3IucHJvdG90eXBlLmdldFN0YXRzPWZ1bmN0aW9uKCl7cmV0dXJuIGkuYXBwbHkodGhpcykudGhlbigoZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IE1hcDtyZXR1cm4gT2JqZWN0LmtleXMoZSkuZm9yRWFjaCgoZnVuY3Rpb24ocil7dmFyIGk7ZVtyXS50eXBlPXtpbmJvdW5kcnRwOlwiaW5ib3VuZC1ydHBcIixvdXRib3VuZHJ0cDpcIm91dGJvdW5kLXJ0cFwiLGNhbmRpZGF0ZXBhaXI6XCJjYW5kaWRhdGUtcGFpclwiLGxvY2FsY2FuZGlkYXRlOlwibG9jYWwtY2FuZGlkYXRlXCIscmVtb3RlY2FuZGlkYXRlOlwicmVtb3RlLWNhbmRpZGF0ZVwifVsoaT1lW3JdKS50eXBlXXx8aS50eXBlLHQuc2V0KHIsZVtyXSl9KSksdH0pKX19fSkpO3ZhciBzPVtcImNyZWF0ZU9mZmVyXCIsXCJjcmVhdGVBbnN3ZXJcIl07cmV0dXJuIHMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHQ9bi5wcm90b3R5cGVbZV07bi5wcm90b3R5cGVbZV09ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHM7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgZVswXXx8XCJmdW5jdGlvblwiPT10eXBlb2YgZVsxXT90LmFwcGx5KHRoaXMsW2FyZ3VtZW50c1syXV0pLnRoZW4oKGZ1bmN0aW9uKHQpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGVbMF0mJmVbMF0uYXBwbHkobnVsbCxbdF0pfSksKGZ1bmN0aW9uKHQpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGVbMV0mJmVbMV0uYXBwbHkobnVsbCxbdF0pfSkpOnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0pKSwocz1bXCJzZXRMb2NhbERlc2NyaXB0aW9uXCIsXCJzZXRSZW1vdGVEZXNjcmlwdGlvblwiLFwiYWRkSWNlQ2FuZGlkYXRlXCJdKS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgdD1uLnByb3RvdHlwZVtlXTtuLnByb3RvdHlwZVtlXT1mdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cztyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBlWzFdfHxcImZ1bmN0aW9uXCI9PXR5cGVvZiBlWzJdP3QuYXBwbHkodGhpcyxhcmd1bWVudHMpLnRoZW4oKGZ1bmN0aW9uKCl7XCJmdW5jdGlvblwiPT10eXBlb2YgZVsxXSYmZVsxXS5hcHBseShudWxsKX0pLChmdW5jdGlvbih0KXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBlWzJdJiZlWzJdLmFwcGx5KG51bGwsW3RdKX0pKTp0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KSksW1wiZ2V0U3RhdHNcIl0uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHQ9bi5wcm90b3R5cGVbZV07bi5wcm90b3R5cGVbZV09ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHM7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgZVsxXT90LmFwcGx5KHRoaXMsYXJndW1lbnRzKS50aGVuKChmdW5jdGlvbigpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGVbMV0mJmVbMV0uYXBwbHkobnVsbCl9KSk6dC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSkpLG59O2Z1bmN0aW9uIG9lKGUpe2NvbnN0IHQ9ZSYmZS5uYXZpZ2F0b3Iscj10Lm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEuYmluZCh0Lm1lZGlhRGV2aWNlcyk7dC5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhPWZ1bmN0aW9uKGUpe3JldHVybiByKGUpLmNhdGNoKChlPT5Qcm9taXNlLnJlamVjdChmdW5jdGlvbihlKXtyZXR1cm57bmFtZTp7UGVybWlzc2lvbkRlbmllZEVycm9yOlwiTm90QWxsb3dlZEVycm9yXCJ9W2UubmFtZV18fGUubmFtZSxtZXNzYWdlOmUubWVzc2FnZSxjb25zdHJhaW50OmUuY29uc3RyYWludCx0b1N0cmluZygpe3JldHVybiB0aGlzLm5hbWV9fX0oZSkpKSl9fWZ1bmN0aW9uIGFlKGUpe1wiZ2V0RGlzcGxheU1lZGlhXCJpbiBlLm5hdmlnYXRvciYmZS5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzJiYoZS5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzJiZcImdldERpc3BsYXlNZWRpYVwiaW4gZS5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzfHwoZS5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldERpc3BsYXlNZWRpYT1lLm5hdmlnYXRvci5nZXREaXNwbGF5TWVkaWEuYmluZChlLm5hdmlnYXRvcikpKX1mdW5jdGlvbiBjZShlLHQpe2lmKGUuUlRDSWNlR2F0aGVyZXImJihlLlJUQ0ljZUNhbmRpZGF0ZXx8KGUuUlRDSWNlQ2FuZGlkYXRlPWZ1bmN0aW9uKGUpe3JldHVybiBlfSksZS5SVENTZXNzaW9uRGVzY3JpcHRpb258fChlLlJUQ1Nlc3Npb25EZXNjcmlwdGlvbj1mdW5jdGlvbihlKXtyZXR1cm4gZX0pLHQudmVyc2lvbjwxNTAyNSkpe2NvbnN0IHQ9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLk1lZGlhU3RyZWFtVHJhY2sucHJvdG90eXBlLFwiZW5hYmxlZFwiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5NZWRpYVN0cmVhbVRyYWNrLnByb3RvdHlwZSxcImVuYWJsZWRcIix7c2V0KGUpe3Quc2V0LmNhbGwodGhpcyxlKTtjb25zdCByPW5ldyBFdmVudChcImVuYWJsZWRcIik7ci5lbmFibGVkPWUsdGhpcy5kaXNwYXRjaEV2ZW50KHIpfX0pfWUuUlRDUnRwU2VuZGVyJiYhKFwiZHRtZlwiaW4gZS5SVENSdHBTZW5kZXIucHJvdG90eXBlKSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUuUlRDUnRwU2VuZGVyLnByb3RvdHlwZSxcImR0bWZcIix7Z2V0KCl7cmV0dXJuIHZvaWQgMD09PXRoaXMuX2R0bWYmJihcImF1ZGlvXCI9PT10aGlzLnRyYWNrLmtpbmQ/dGhpcy5fZHRtZj1uZXcgZS5SVENEdG1mU2VuZGVyKHRoaXMpOlwidmlkZW9cIj09PXRoaXMudHJhY2sua2luZCYmKHRoaXMuX2R0bWY9bnVsbCkpLHRoaXMuX2R0bWZ9fSksZS5SVENEdG1mU2VuZGVyJiYhZS5SVENEVE1GU2VuZGVyJiYoZS5SVENEVE1GU2VuZGVyPWUuUlRDRHRtZlNlbmRlcik7Y29uc3Qgcj1zZShlLHQudmVyc2lvbik7ZS5SVENQZWVyQ29ubmVjdGlvbj1mdW5jdGlvbihlKXtyZXR1cm4gZSYmZS5pY2VTZXJ2ZXJzJiYoZS5pY2VTZXJ2ZXJzPWZ1bmN0aW9uKGUsdCl7bGV0IHI9ITE7cmV0dXJuKGU9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlKSkpLmZpbHRlcigoZT0+e2lmKGUmJihlLnVybHN8fGUudXJsKSl7bGV0IHQ9ZS51cmxzfHxlLnVybDtlLnVybCYmIWUudXJscyYmTShcIlJUQ0ljZVNlcnZlci51cmxcIixcIlJUQ0ljZVNlcnZlci51cmxzXCIpO2NvbnN0IGk9XCJzdHJpbmdcIj09dHlwZW9mIHQ7cmV0dXJuIGkmJih0PVt0XSksdD10LmZpbHRlcigoZT0+e2lmKDA9PT1lLmluZGV4T2YoXCJzdHVuOlwiKSlyZXR1cm4hMTtjb25zdCB0PWUuc3RhcnRzV2l0aChcInR1cm5cIikmJiFlLnN0YXJ0c1dpdGgoXCJ0dXJuOltcIikmJmUuaW5jbHVkZXMoXCJ0cmFuc3BvcnQ9dWRwXCIpO3JldHVybiB0JiYhcj8ocj0hMCwhMCk6dCYmIXJ9KSksZGVsZXRlIGUudXJsLGUudXJscz1pP3RbMF06dCwhIXQubGVuZ3RofX0pKX0oZS5pY2VTZXJ2ZXJzLHQudmVyc2lvbiksQShcIklDRSBzZXJ2ZXJzIGFmdGVyIGZpbHRlcmluZzpcIixlLmljZVNlcnZlcnMpKSxuZXcgcihlKX0sZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGU9ci5wcm90b3R5cGV9ZnVuY3Rpb24gZGUoZSl7ZS5SVENSdHBTZW5kZXImJiEoXCJyZXBsYWNlVHJhY2tcImluIGUuUlRDUnRwU2VuZGVyLnByb3RvdHlwZSkmJihlLlJUQ1J0cFNlbmRlci5wcm90b3R5cGUucmVwbGFjZVRyYWNrPWUuUlRDUnRwU2VuZGVyLnByb3RvdHlwZS5zZXRUcmFjayl9dmFyIHVlPU9iamVjdC5mcmVlemUoe19fcHJvdG9fXzpudWxsLHNoaW1QZWVyQ29ubmVjdGlvbjpjZSxzaGltUmVwbGFjZVRyYWNrOmRlLHNoaW1HZXRVc2VyTWVkaWE6b2Usc2hpbUdldERpc3BsYXlNZWRpYTphZX0pO2Z1bmN0aW9uIGxlKGUsdCl7Y29uc3Qgcj1lJiZlLm5hdmlnYXRvcixpPWUmJmUuTWVkaWFTdHJlYW1UcmFjaztpZihyLmdldFVzZXJNZWRpYT1mdW5jdGlvbihlLHQsaSl7TShcIm5hdmlnYXRvci5nZXRVc2VyTWVkaWFcIixcIm5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhXCIpLHIubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYShlKS50aGVuKHQsaSl9LCEodC52ZXJzaW9uPjU1JiZcImF1dG9HYWluQ29udHJvbFwiaW4gci5tZWRpYURldmljZXMuZ2V0U3VwcG9ydGVkQ29uc3RyYWludHMoKSkpe2NvbnN0IGU9ZnVuY3Rpb24oZSx0LHIpe3QgaW4gZSYmIShyIGluIGUpJiYoZVtyXT1lW3RdLGRlbGV0ZSBlW3RdKX0sdD1yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEuYmluZChyLm1lZGlhRGV2aWNlcyk7aWYoci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhPWZ1bmN0aW9uKHIpe3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiByJiZcIm9iamVjdFwiPT10eXBlb2Ygci5hdWRpbyYmKHI9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyKSksZShyLmF1ZGlvLFwiYXV0b0dhaW5Db250cm9sXCIsXCJtb3pBdXRvR2FpbkNvbnRyb2xcIiksZShyLmF1ZGlvLFwibm9pc2VTdXBwcmVzc2lvblwiLFwibW96Tm9pc2VTdXBwcmVzc2lvblwiKSksdChyKX0saSYmaS5wcm90b3R5cGUuZ2V0U2V0dGluZ3Mpe2NvbnN0IHQ9aS5wcm90b3R5cGUuZ2V0U2V0dGluZ3M7aS5wcm90b3R5cGUuZ2V0U2V0dGluZ3M9ZnVuY3Rpb24oKXtjb25zdCByPXQuYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiBlKHIsXCJtb3pBdXRvR2FpbkNvbnRyb2xcIixcImF1dG9HYWluQ29udHJvbFwiKSxlKHIsXCJtb3pOb2lzZVN1cHByZXNzaW9uXCIsXCJub2lzZVN1cHByZXNzaW9uXCIpLHJ9fWlmKGkmJmkucHJvdG90eXBlLmFwcGx5Q29uc3RyYWludHMpe2NvbnN0IHQ9aS5wcm90b3R5cGUuYXBwbHlDb25zdHJhaW50cztpLnByb3RvdHlwZS5hcHBseUNvbnN0cmFpbnRzPWZ1bmN0aW9uKHIpe3JldHVyblwiYXVkaW9cIj09PXRoaXMua2luZCYmXCJvYmplY3RcIj09dHlwZW9mIHImJihyPUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocikpLGUocixcImF1dG9HYWluQ29udHJvbFwiLFwibW96QXV0b0dhaW5Db250cm9sXCIpLGUocixcIm5vaXNlU3VwcHJlc3Npb25cIixcIm1vek5vaXNlU3VwcHJlc3Npb25cIikpLHQuYXBwbHkodGhpcyxbcl0pfX19fWZ1bmN0aW9uIGhlKGUpe1wib2JqZWN0XCI9PXR5cGVvZiBlJiZlLlJUQ1RyYWNrRXZlbnQmJlwicmVjZWl2ZXJcImluIGUuUlRDVHJhY2tFdmVudC5wcm90b3R5cGUmJiEoXCJ0cmFuc2NlaXZlclwiaW4gZS5SVENUcmFja0V2ZW50LnByb3RvdHlwZSkmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLlJUQ1RyYWNrRXZlbnQucHJvdG90eXBlLFwidHJhbnNjZWl2ZXJcIix7Z2V0KCl7cmV0dXJue3JlY2VpdmVyOnRoaXMucmVjZWl2ZXJ9fX0pfWZ1bmN0aW9uIHBlKGUsdCl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGV8fCFlLlJUQ1BlZXJDb25uZWN0aW9uJiYhZS5tb3pSVENQZWVyQ29ubmVjdGlvbilyZXR1cm47IWUuUlRDUGVlckNvbm5lY3Rpb24mJmUubW96UlRDUGVlckNvbm5lY3Rpb24mJihlLlJUQ1BlZXJDb25uZWN0aW9uPWUubW96UlRDUGVlckNvbm5lY3Rpb24pLHQudmVyc2lvbjw1MyYmW1wic2V0TG9jYWxEZXNjcmlwdGlvblwiLFwic2V0UmVtb3RlRGVzY3JpcHRpb25cIixcImFkZEljZUNhbmRpZGF0ZVwiXS5mb3JFYWNoKChmdW5jdGlvbih0KXtjb25zdCByPWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlW3RdLGk9e1t0XSgpe3JldHVybiBhcmd1bWVudHNbMF09bmV3KFwiYWRkSWNlQ2FuZGlkYXRlXCI9PT10P2UuUlRDSWNlQ2FuZGlkYXRlOmUuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKShhcmd1bWVudHNbMF0pLHIuYXBwbHkodGhpcyxhcmd1bWVudHMpfX07ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbdF09aVt0XX0pKTtjb25zdCByPXtpbmJvdW5kcnRwOlwiaW5ib3VuZC1ydHBcIixvdXRib3VuZHJ0cDpcIm91dGJvdW5kLXJ0cFwiLGNhbmRpZGF0ZXBhaXI6XCJjYW5kaWRhdGUtcGFpclwiLGxvY2FsY2FuZGlkYXRlOlwibG9jYWwtY2FuZGlkYXRlXCIscmVtb3RlY2FuZGlkYXRlOlwicmVtb3RlLWNhbmRpZGF0ZVwifSxpPWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFN0YXRzO2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFN0YXRzPWZ1bmN0aW9uKCl7Y29uc3RbZSxuLHNdPWFyZ3VtZW50cztyZXR1cm4gaS5hcHBseSh0aGlzLFtlfHxudWxsXSkudGhlbigoZT0+e2lmKHQudmVyc2lvbjw1MyYmIW4pdHJ5e2UuZm9yRWFjaCgoZT0+e2UudHlwZT1yW2UudHlwZV18fGUudHlwZX0pKX1jYXRjaCh0KXtpZihcIlR5cGVFcnJvclwiIT09dC5uYW1lKXRocm93IHQ7ZS5mb3JFYWNoKCgodCxpKT0+e2Uuc2V0KGksT2JqZWN0LmFzc2lnbih7fSx0LHt0eXBlOnJbdC50eXBlXXx8dC50eXBlfSkpfSkpfXJldHVybiBlfSkpLnRoZW4obixzKX19ZnVuY3Rpb24gX2UoZSl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGV8fCFlLlJUQ1BlZXJDb25uZWN0aW9ufHwhZS5SVENSdHBTZW5kZXIpcmV0dXJuO2lmKGUuUlRDUnRwU2VuZGVyJiZcImdldFN0YXRzXCJpbiBlLlJUQ1J0cFNlbmRlci5wcm90b3R5cGUpcmV0dXJuO2NvbnN0IHQ9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U2VuZGVyczt0JiYoZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U2VuZGVycz1mdW5jdGlvbigpe2NvbnN0IGU9dC5hcHBseSh0aGlzLFtdKTtyZXR1cm4gZS5mb3JFYWNoKChlPT5lLl9wYz10aGlzKSksZX0pO2NvbnN0IHI9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2s7ciYmKGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrPWZ1bmN0aW9uKCl7Y29uc3QgZT1yLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gZS5fcGM9dGhpcyxlfSksZS5SVENSdHBTZW5kZXIucHJvdG90eXBlLmdldFN0YXRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHJhY2s/dGhpcy5fcGMuZ2V0U3RhdHModGhpcy50cmFjayk6UHJvbWlzZS5yZXNvbHZlKG5ldyBNYXApfX1mdW5jdGlvbiBtZShlKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZXx8IWUuUlRDUGVlckNvbm5lY3Rpb258fCFlLlJUQ1J0cFNlbmRlcilyZXR1cm47aWYoZS5SVENSdHBTZW5kZXImJlwiZ2V0U3RhdHNcImluIGUuUlRDUnRwUmVjZWl2ZXIucHJvdG90eXBlKXJldHVybjtjb25zdCB0PWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFJlY2VpdmVyczt0JiYoZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0UmVjZWl2ZXJzPWZ1bmN0aW9uKCl7Y29uc3QgZT10LmFwcGx5KHRoaXMsW10pO3JldHVybiBlLmZvckVhY2goKGU9PmUuX3BjPXRoaXMpKSxlfSksTChlLFwidHJhY2tcIiwoZT0+KGUucmVjZWl2ZXIuX3BjPWUuc3JjRWxlbWVudCxlKSkpLGUuUlRDUnRwUmVjZWl2ZXIucHJvdG90eXBlLmdldFN0YXRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BjLmdldFN0YXRzKHRoaXMudHJhY2spfX1mdW5jdGlvbiBmZShlKXtlLlJUQ1BlZXJDb25uZWN0aW9uJiYhKFwicmVtb3ZlU3RyZWFtXCJpbiBlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSkmJihlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVTdHJlYW09ZnVuY3Rpb24oZSl7TShcInJlbW92ZVN0cmVhbVwiLFwicmVtb3ZlVHJhY2tcIiksdGhpcy5nZXRTZW5kZXJzKCkuZm9yRWFjaCgodD0+e3QudHJhY2smJmUuZ2V0VHJhY2tzKCkuaW5jbHVkZXModC50cmFjaykmJnRoaXMucmVtb3ZlVHJhY2sodCl9KSl9KX1mdW5jdGlvbiB2ZShlKXtlLkRhdGFDaGFubmVsJiYhZS5SVENEYXRhQ2hhbm5lbCYmKGUuUlRDRGF0YUNoYW5uZWw9ZS5EYXRhQ2hhbm5lbCl9ZnVuY3Rpb24gUmUoZSl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGV8fCFlLlJUQ1BlZXJDb25uZWN0aW9uKXJldHVybjtjb25zdCB0PWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYW5zY2VpdmVyO3QmJihlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRUcmFuc2NlaXZlcj1mdW5jdGlvbigpe3RoaXMuc2V0UGFyYW1ldGVyc1Byb21pc2VzPVtdO2NvbnN0IGU9YXJndW1lbnRzWzFdLHI9ZSYmXCJzZW5kRW5jb2RpbmdzXCJpbiBlO3ImJmUuc2VuZEVuY29kaW5ncy5mb3JFYWNoKChlPT57aWYoXCJyaWRcImluIGUpe2lmKCEvXlthLXowLTldezAsMTZ9JC9pLnRlc3QoZS5yaWQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIFJJRCB2YWx1ZSBwcm92aWRlZC5cIil9aWYoXCJzY2FsZVJlc29sdXRpb25Eb3duQnlcImluIGUmJiEocGFyc2VGbG9hdChlLnNjYWxlUmVzb2x1dGlvbkRvd25CeSk+PTEpKXRocm93IG5ldyBSYW5nZUVycm9yKFwic2NhbGVfcmVzb2x1dGlvbl9kb3duX2J5IG11c3QgYmUgPj0gMS4wXCIpO2lmKFwibWF4RnJhbWVyYXRlXCJpbiBlJiYhKHBhcnNlRmxvYXQoZS5tYXhGcmFtZXJhdGUpPj0wKSl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIm1heF9mcmFtZXJhdGUgbXVzdCBiZSA+PSAwLjBcIil9KSk7Y29uc3QgaT10LmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZihyKXtjb25zdHtzZW5kZXI6dH09aSxyPXQuZ2V0UGFyYW1ldGVycygpOyghKFwiZW5jb2RpbmdzXCJpbiByKXx8MT09PXIuZW5jb2RpbmdzLmxlbmd0aCYmMD09PU9iamVjdC5rZXlzKHIuZW5jb2RpbmdzWzBdKS5sZW5ndGgpJiYoci5lbmNvZGluZ3M9ZS5zZW5kRW5jb2RpbmdzLHQuc2VuZEVuY29kaW5ncz1lLnNlbmRFbmNvZGluZ3MsdGhpcy5zZXRQYXJhbWV0ZXJzUHJvbWlzZXMucHVzaCh0LnNldFBhcmFtZXRlcnMocikudGhlbigoKCk9PntkZWxldGUgdC5zZW5kRW5jb2RpbmdzfSkpLmNhdGNoKCgoKT0+e2RlbGV0ZSB0LnNlbmRFbmNvZGluZ3N9KSkpKX1yZXR1cm4gaX0pfWZ1bmN0aW9uIGdlKGUpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlfHwhZS5SVENSdHBTZW5kZXIpcmV0dXJuO2NvbnN0IHQ9ZS5SVENSdHBTZW5kZXIucHJvdG90eXBlLmdldFBhcmFtZXRlcnM7dCYmKGUuUlRDUnRwU2VuZGVyLnByb3RvdHlwZS5nZXRQYXJhbWV0ZXJzPWZ1bmN0aW9uKCl7Y29uc3QgZT10LmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm5cImVuY29kaW5nc1wiaW4gZXx8KGUuZW5jb2RpbmdzPVtdLmNvbmNhdCh0aGlzLnNlbmRFbmNvZGluZ3N8fFt7fV0pKSxlfSl9ZnVuY3Rpb24gU2UoZSl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGV8fCFlLlJUQ1BlZXJDb25uZWN0aW9uKXJldHVybjtjb25zdCB0PWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmNyZWF0ZU9mZmVyO2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmNyZWF0ZU9mZmVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2V0UGFyYW1ldGVyc1Byb21pc2VzJiZ0aGlzLnNldFBhcmFtZXRlcnNQcm9taXNlcy5sZW5ndGg/UHJvbWlzZS5hbGwodGhpcy5zZXRQYXJhbWV0ZXJzUHJvbWlzZXMpLnRoZW4oKCgpPT50LmFwcGx5KHRoaXMsYXJndW1lbnRzKSkpLmZpbmFsbHkoKCgpPT57dGhpcy5zZXRQYXJhbWV0ZXJzUHJvbWlzZXM9W119KSk6dC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIENlKGUpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlfHwhZS5SVENQZWVyQ29ubmVjdGlvbilyZXR1cm47Y29uc3QgdD1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5jcmVhdGVBbnN3ZXI7ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuY3JlYXRlQW5zd2VyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2V0UGFyYW1ldGVyc1Byb21pc2VzJiZ0aGlzLnNldFBhcmFtZXRlcnNQcm9taXNlcy5sZW5ndGg/UHJvbWlzZS5hbGwodGhpcy5zZXRQYXJhbWV0ZXJzUHJvbWlzZXMpLnRoZW4oKCgpPT50LmFwcGx5KHRoaXMsYXJndW1lbnRzKSkpLmZpbmFsbHkoKCgpPT57dGhpcy5zZXRQYXJhbWV0ZXJzUHJvbWlzZXM9W119KSk6dC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fXZhciBUZT1PYmplY3QuZnJlZXplKHtfX3Byb3RvX186bnVsbCxzaGltT25UcmFjazpoZSxzaGltUGVlckNvbm5lY3Rpb246cGUsc2hpbVNlbmRlckdldFN0YXRzOl9lLHNoaW1SZWNlaXZlckdldFN0YXRzOm1lLHNoaW1SZW1vdmVTdHJlYW06ZmUsc2hpbVJUQ0RhdGFDaGFubmVsOnZlLHNoaW1BZGRUcmFuc2NlaXZlcjpSZSxzaGltR2V0UGFyYW1ldGVyczpnZSxzaGltQ3JlYXRlT2ZmZXI6U2Usc2hpbUNyZWF0ZUFuc3dlcjpDZSxzaGltR2V0VXNlck1lZGlhOmxlLHNoaW1HZXREaXNwbGF5TWVkaWE6ZnVuY3Rpb24oZSx0KXtlLm5hdmlnYXRvci5tZWRpYURldmljZXMmJlwiZ2V0RGlzcGxheU1lZGlhXCJpbiBlLm5hdmlnYXRvci5tZWRpYURldmljZXN8fGUubmF2aWdhdG9yLm1lZGlhRGV2aWNlcyYmKGUubmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXREaXNwbGF5TWVkaWE9ZnVuY3Rpb24ocil7aWYoIXJ8fCFyLnZpZGVvKXtjb25zdCBlPW5ldyBET01FeGNlcHRpb24oXCJnZXREaXNwbGF5TWVkaWEgd2l0aG91dCB2aWRlbyBjb25zdHJhaW50cyBpcyB1bmRlZmluZWRcIik7cmV0dXJuIGUubmFtZT1cIk5vdEZvdW5kRXJyb3JcIixlLmNvZGU9OCxQcm9taXNlLnJlamVjdChlKX1yZXR1cm4hMD09PXIudmlkZW8/ci52aWRlbz17bWVkaWFTb3VyY2U6dH06ci52aWRlby5tZWRpYVNvdXJjZT10LGUubmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEocil9KX19KTtmdW5jdGlvbiBJZShlKXtpZihcIm9iamVjdFwiPT10eXBlb2YgZSYmZS5SVENQZWVyQ29ubmVjdGlvbil7aWYoXCJnZXRMb2NhbFN0cmVhbXNcImluIGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlfHwoZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0TG9jYWxTdHJlYW1zPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xvY2FsU3RyZWFtc3x8KHRoaXMuX2xvY2FsU3RyZWFtcz1bXSksdGhpcy5fbG9jYWxTdHJlYW1zfSksIShcImFkZFN0cmVhbVwiaW4gZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpKXtjb25zdCB0PWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrO2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFN0cmVhbT1mdW5jdGlvbihlKXt0aGlzLl9sb2NhbFN0cmVhbXN8fCh0aGlzLl9sb2NhbFN0cmVhbXM9W10pLHRoaXMuX2xvY2FsU3RyZWFtcy5pbmNsdWRlcyhlKXx8dGhpcy5fbG9jYWxTdHJlYW1zLnB1c2goZSksZS5nZXRBdWRpb1RyYWNrcygpLmZvckVhY2goKHI9PnQuY2FsbCh0aGlzLHIsZSkpKSxlLmdldFZpZGVvVHJhY2tzKCkuZm9yRWFjaCgocj0+dC5jYWxsKHRoaXMscixlKSkpfSxlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRUcmFjaz1mdW5jdGlvbihlLC4uLnIpe3JldHVybiByJiZyLmZvckVhY2goKGU9Pnt0aGlzLl9sb2NhbFN0cmVhbXM/dGhpcy5fbG9jYWxTdHJlYW1zLmluY2x1ZGVzKGUpfHx0aGlzLl9sb2NhbFN0cmVhbXMucHVzaChlKTp0aGlzLl9sb2NhbFN0cmVhbXM9W2VdfSkpLHQuYXBwbHkodGhpcyxhcmd1bWVudHMpfX1cInJlbW92ZVN0cmVhbVwiaW4gZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGV8fChlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVTdHJlYW09ZnVuY3Rpb24oZSl7dGhpcy5fbG9jYWxTdHJlYW1zfHwodGhpcy5fbG9jYWxTdHJlYW1zPVtdKTtjb25zdCB0PXRoaXMuX2xvY2FsU3RyZWFtcy5pbmRleE9mKGUpO2lmKC0xPT09dClyZXR1cm47dGhpcy5fbG9jYWxTdHJlYW1zLnNwbGljZSh0LDEpO2NvbnN0IHI9ZS5nZXRUcmFja3MoKTt0aGlzLmdldFNlbmRlcnMoKS5mb3JFYWNoKChlPT57ci5pbmNsdWRlcyhlLnRyYWNrKSYmdGhpcy5yZW1vdmVUcmFjayhlKX0pKX0pfX1mdW5jdGlvbiBFZShlKXtpZihcIm9iamVjdFwiPT10eXBlb2YgZSYmZS5SVENQZWVyQ29ubmVjdGlvbiYmKFwiZ2V0UmVtb3RlU3RyZWFtc1wiaW4gZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGV8fChlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRSZW1vdGVTdHJlYW1zPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlbW90ZVN0cmVhbXM/dGhpcy5fcmVtb3RlU3RyZWFtczpbXX0pLCEoXCJvbmFkZHN0cmVhbVwiaW4gZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpKSl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLFwib25hZGRzdHJlYW1cIix7Z2V0KCl7cmV0dXJuIHRoaXMuX29uYWRkc3RyZWFtfSxzZXQoZSl7dGhpcy5fb25hZGRzdHJlYW0mJih0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJhZGRzdHJlYW1cIix0aGlzLl9vbmFkZHN0cmVhbSksdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKFwidHJhY2tcIix0aGlzLl9vbmFkZHN0cmVhbXBvbHkpKSx0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJhZGRzdHJlYW1cIix0aGlzLl9vbmFkZHN0cmVhbT1lKSx0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJ0cmFja1wiLHRoaXMuX29uYWRkc3RyZWFtcG9seT1lPT57ZS5zdHJlYW1zLmZvckVhY2goKGU9PntpZih0aGlzLl9yZW1vdGVTdHJlYW1zfHwodGhpcy5fcmVtb3RlU3RyZWFtcz1bXSksdGhpcy5fcmVtb3RlU3RyZWFtcy5pbmNsdWRlcyhlKSlyZXR1cm47dGhpcy5fcmVtb3RlU3RyZWFtcy5wdXNoKGUpO2NvbnN0IHQ9bmV3IEV2ZW50KFwiYWRkc3RyZWFtXCIpO3Quc3RyZWFtPWUsdGhpcy5kaXNwYXRjaEV2ZW50KHQpfSkpfSl9fSk7Y29uc3QgdD1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRSZW1vdGVEZXNjcmlwdGlvbjtlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRSZW1vdGVEZXNjcmlwdGlvbj1mdW5jdGlvbigpe2NvbnN0IGU9dGhpcztyZXR1cm4gdGhpcy5fb25hZGRzdHJlYW1wb2x5fHx0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJ0cmFja1wiLHRoaXMuX29uYWRkc3RyZWFtcG9seT1mdW5jdGlvbih0KXt0LnN0cmVhbXMuZm9yRWFjaCgodD0+e2lmKGUuX3JlbW90ZVN0cmVhbXN8fChlLl9yZW1vdGVTdHJlYW1zPVtdKSxlLl9yZW1vdGVTdHJlYW1zLmluZGV4T2YodCk+PTApcmV0dXJuO2UuX3JlbW90ZVN0cmVhbXMucHVzaCh0KTtjb25zdCByPW5ldyBFdmVudChcImFkZHN0cmVhbVwiKTtyLnN0cmVhbT10LGUuZGlzcGF0Y2hFdmVudChyKX0pKX0pLHQuYXBwbHkoZSxhcmd1bWVudHMpfX19ZnVuY3Rpb24geWUoZSl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGV8fCFlLlJUQ1BlZXJDb25uZWN0aW9uKXJldHVybjtjb25zdCB0PWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLHI9dC5jcmVhdGVPZmZlcixpPXQuY3JlYXRlQW5zd2VyLG49dC5zZXRMb2NhbERlc2NyaXB0aW9uLHM9dC5zZXRSZW1vdGVEZXNjcmlwdGlvbixvPXQuYWRkSWNlQ2FuZGlkYXRlO3QuY3JlYXRlT2ZmZXI9ZnVuY3Rpb24oZSx0KXtjb25zdCBpPWFyZ3VtZW50cy5sZW5ndGg+PTI/YXJndW1lbnRzWzJdOmFyZ3VtZW50c1swXSxuPXIuYXBwbHkodGhpcyxbaV0pO3JldHVybiB0PyhuLnRoZW4oZSx0KSxQcm9taXNlLnJlc29sdmUoKSk6bn0sdC5jcmVhdGVBbnN3ZXI9ZnVuY3Rpb24oZSx0KXtjb25zdCByPWFyZ3VtZW50cy5sZW5ndGg+PTI/YXJndW1lbnRzWzJdOmFyZ3VtZW50c1swXSxuPWkuYXBwbHkodGhpcyxbcl0pO3JldHVybiB0PyhuLnRoZW4oZSx0KSxQcm9taXNlLnJlc29sdmUoKSk6bn07bGV0IGE9ZnVuY3Rpb24oZSx0LHIpe2NvbnN0IGk9bi5hcHBseSh0aGlzLFtlXSk7cmV0dXJuIHI/KGkudGhlbih0LHIpLFByb21pc2UucmVzb2x2ZSgpKTppfTt0LnNldExvY2FsRGVzY3JpcHRpb249YSxhPWZ1bmN0aW9uKGUsdCxyKXtjb25zdCBpPXMuYXBwbHkodGhpcyxbZV0pO3JldHVybiByPyhpLnRoZW4odCxyKSxQcm9taXNlLnJlc29sdmUoKSk6aX0sdC5zZXRSZW1vdGVEZXNjcmlwdGlvbj1hLGE9ZnVuY3Rpb24oZSx0LHIpe2NvbnN0IGk9by5hcHBseSh0aGlzLFtlXSk7cmV0dXJuIHI/KGkudGhlbih0LHIpLFByb21pc2UucmVzb2x2ZSgpKTppfSx0LmFkZEljZUNhbmRpZGF0ZT1hfWZ1bmN0aW9uIGtlKGUpe2NvbnN0IHQ9ZSYmZS5uYXZpZ2F0b3I7aWYodC5tZWRpYURldmljZXMmJnQubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSl7Y29uc3QgZT10Lm1lZGlhRGV2aWNlcyxyPWUuZ2V0VXNlck1lZGlhLmJpbmQoZSk7dC5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhPWU9PnIoYmUoZSkpfSF0LmdldFVzZXJNZWRpYSYmdC5tZWRpYURldmljZXMmJnQubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSYmKHQuZ2V0VXNlck1lZGlhPWZ1bmN0aW9uKGUscixpKXt0Lm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoZSkudGhlbihyLGkpfS5iaW5kKHQpKX1mdW5jdGlvbiBiZShlKXtyZXR1cm4gZSYmdm9pZCAwIT09ZS52aWRlbz9PYmplY3QuYXNzaWduKHt9LGUse3ZpZGVvOlUoZS52aWRlbyl9KTplfWZ1bmN0aW9uIFBlKGUpe2lmKCFlLlJUQ1BlZXJDb25uZWN0aW9uKXJldHVybjtjb25zdCB0PWUuUlRDUGVlckNvbm5lY3Rpb247ZS5SVENQZWVyQ29ubmVjdGlvbj1mdW5jdGlvbihlLHIpe2lmKGUmJmUuaWNlU2VydmVycyl7Y29uc3QgdD1bXTtmb3IobGV0IHI9MDtyPGUuaWNlU2VydmVycy5sZW5ndGg7cisrKXtsZXQgaT1lLmljZVNlcnZlcnNbcl07IWkuaGFzT3duUHJvcGVydHkoXCJ1cmxzXCIpJiZpLmhhc093blByb3BlcnR5KFwidXJsXCIpPyhNKFwiUlRDSWNlU2VydmVyLnVybFwiLFwiUlRDSWNlU2VydmVyLnVybHNcIiksaT1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGkpKSxpLnVybHM9aS51cmwsZGVsZXRlIGkudXJsLHQucHVzaChpKSk6dC5wdXNoKGUuaWNlU2VydmVyc1tyXSl9ZS5pY2VTZXJ2ZXJzPXR9cmV0dXJuIG5ldyB0KGUscil9LGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlPXQucHJvdG90eXBlLFwiZ2VuZXJhdGVDZXJ0aWZpY2F0ZVwiaW4gdCYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUuUlRDUGVlckNvbm5lY3Rpb24sXCJnZW5lcmF0ZUNlcnRpZmljYXRlXCIse2dldDooKT0+dC5nZW5lcmF0ZUNlcnRpZmljYXRlfSl9ZnVuY3Rpb24gT2UoZSl7XCJvYmplY3RcIj09dHlwZW9mIGUmJmUuUlRDVHJhY2tFdmVudCYmXCJyZWNlaXZlclwiaW4gZS5SVENUcmFja0V2ZW50LnByb3RvdHlwZSYmIShcInRyYW5zY2VpdmVyXCJpbiBlLlJUQ1RyYWNrRXZlbnQucHJvdG90eXBlKSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUuUlRDVHJhY2tFdmVudC5wcm90b3R5cGUsXCJ0cmFuc2NlaXZlclwiLHtnZXQoKXtyZXR1cm57cmVjZWl2ZXI6dGhpcy5yZWNlaXZlcn19fSl9ZnVuY3Rpb24gTGUoZSl7Y29uc3QgdD1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5jcmVhdGVPZmZlcjtlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5jcmVhdGVPZmZlcj1mdW5jdGlvbihlKXtpZihlKXt2b2lkIDAhPT1lLm9mZmVyVG9SZWNlaXZlQXVkaW8mJihlLm9mZmVyVG9SZWNlaXZlQXVkaW89ISFlLm9mZmVyVG9SZWNlaXZlQXVkaW8pO2NvbnN0IHQ9dGhpcy5nZXRUcmFuc2NlaXZlcnMoKS5maW5kKChlPT5cImF1ZGlvXCI9PT1lLnJlY2VpdmVyLnRyYWNrLmtpbmQpKTshMT09PWUub2ZmZXJUb1JlY2VpdmVBdWRpbyYmdD9cInNlbmRyZWN2XCI9PT10LmRpcmVjdGlvbj90LnNldERpcmVjdGlvbj90LnNldERpcmVjdGlvbihcInNlbmRvbmx5XCIpOnQuZGlyZWN0aW9uPVwic2VuZG9ubHlcIjpcInJlY3Zvbmx5XCI9PT10LmRpcmVjdGlvbiYmKHQuc2V0RGlyZWN0aW9uP3Quc2V0RGlyZWN0aW9uKFwiaW5hY3RpdmVcIik6dC5kaXJlY3Rpb249XCJpbmFjdGl2ZVwiKTohMCE9PWUub2ZmZXJUb1JlY2VpdmVBdWRpb3x8dHx8dGhpcy5hZGRUcmFuc2NlaXZlcihcImF1ZGlvXCIpLHZvaWQgMCE9PWUub2ZmZXJUb1JlY2VpdmVWaWRlbyYmKGUub2ZmZXJUb1JlY2VpdmVWaWRlbz0hIWUub2ZmZXJUb1JlY2VpdmVWaWRlbyk7Y29uc3Qgcj10aGlzLmdldFRyYW5zY2VpdmVycygpLmZpbmQoKGU9PlwidmlkZW9cIj09PWUucmVjZWl2ZXIudHJhY2sua2luZCkpOyExPT09ZS5vZmZlclRvUmVjZWl2ZVZpZGVvJiZyP1wic2VuZHJlY3ZcIj09PXIuZGlyZWN0aW9uP3Iuc2V0RGlyZWN0aW9uP3Iuc2V0RGlyZWN0aW9uKFwic2VuZG9ubHlcIik6ci5kaXJlY3Rpb249XCJzZW5kb25seVwiOlwicmVjdm9ubHlcIj09PXIuZGlyZWN0aW9uJiYoci5zZXREaXJlY3Rpb24/ci5zZXREaXJlY3Rpb24oXCJpbmFjdGl2ZVwiKTpyLmRpcmVjdGlvbj1cImluYWN0aXZlXCIpOiEwIT09ZS5vZmZlclRvUmVjZWl2ZVZpZGVvfHxyfHx0aGlzLmFkZFRyYW5zY2VpdmVyKFwidmlkZW9cIil9cmV0dXJuIHQuYXBwbHkodGhpcyxhcmd1bWVudHMpfX1mdW5jdGlvbiBOZShlKXtcIm9iamVjdFwiIT10eXBlb2YgZXx8ZS5BdWRpb0NvbnRleHR8fChlLkF1ZGlvQ29udGV4dD1lLndlYmtpdEF1ZGlvQ29udGV4dCl9dmFyIERlPU9iamVjdC5mcmVlemUoe19fcHJvdG9fXzpudWxsLHNoaW1Mb2NhbFN0cmVhbXNBUEk6SWUsc2hpbVJlbW90ZVN0cmVhbXNBUEk6RWUsc2hpbUNhbGxiYWNrc0FQSTp5ZSxzaGltR2V0VXNlck1lZGlhOmtlLHNoaW1Db25zdHJhaW50czpiZSxzaGltUlRDSWNlU2VydmVyVXJsczpQZSxzaGltVHJhY2tFdmVudFRyYW5zY2VpdmVyOk9lLHNoaW1DcmVhdGVPZmZlckxlZ2FjeTpMZSxzaGltQXVkaW9Db250ZXh0Ok5lfSk7ZnVuY3Rpb24gQWUoZSl7aWYoIWUuUlRDSWNlQ2FuZGlkYXRlfHxlLlJUQ0ljZUNhbmRpZGF0ZSYmXCJmb3VuZGF0aW9uXCJpbiBlLlJUQ0ljZUNhbmRpZGF0ZS5wcm90b3R5cGUpcmV0dXJuO2NvbnN0IHQ9ZS5SVENJY2VDYW5kaWRhdGU7ZS5SVENJY2VDYW5kaWRhdGU9ZnVuY3Rpb24oZSl7aWYoXCJvYmplY3RcIj09dHlwZW9mIGUmJmUuY2FuZGlkYXRlJiYwPT09ZS5jYW5kaWRhdGUuaW5kZXhPZihcImE9XCIpJiYoKGU9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlKSkpLmNhbmRpZGF0ZT1lLmNhbmRpZGF0ZS5zdWJzdHIoMikpLGUuY2FuZGlkYXRlJiZlLmNhbmRpZGF0ZS5sZW5ndGgpe2NvbnN0IHI9bmV3IHQoZSksaT1aLnBhcnNlQ2FuZGlkYXRlKGUuY2FuZGlkYXRlKSxuPU9iamVjdC5hc3NpZ24ocixpKTtyZXR1cm4gbi50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm57Y2FuZGlkYXRlOm4uY2FuZGlkYXRlLHNkcE1pZDpuLnNkcE1pZCxzZHBNTGluZUluZGV4Om4uc2RwTUxpbmVJbmRleCx1c2VybmFtZUZyYWdtZW50Om4udXNlcm5hbWVGcmFnbWVudH19LG59cmV0dXJuIG5ldyB0KGUpfSxlLlJUQ0ljZUNhbmRpZGF0ZS5wcm90b3R5cGU9dC5wcm90b3R5cGUsTChlLFwiaWNlY2FuZGlkYXRlXCIsKHQ9Pih0LmNhbmRpZGF0ZSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJjYW5kaWRhdGVcIix7dmFsdWU6bmV3IGUuUlRDSWNlQ2FuZGlkYXRlKHQuY2FuZGlkYXRlKSx3cml0YWJsZTpcImZhbHNlXCJ9KSx0KSkpfWZ1bmN0aW9uIE1lKGUsdCl7aWYoIWUuUlRDUGVlckNvbm5lY3Rpb24pcmV0dXJuO1wic2N0cFwiaW4gZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGV8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSxcInNjdHBcIix7Z2V0KCl7cmV0dXJuIHZvaWQgMD09PXRoaXMuX3NjdHA/bnVsbDp0aGlzLl9zY3RwfX0pO2NvbnN0IHI9ZnVuY3Rpb24oZSl7aWYoIWV8fCFlLnNkcClyZXR1cm4hMTtjb25zdCB0PVouc3BsaXRTZWN0aW9ucyhlLnNkcCk7cmV0dXJuIHQuc2hpZnQoKSx0LnNvbWUoKGU9Pntjb25zdCB0PVoucGFyc2VNTGluZShlKTtyZXR1cm4gdCYmXCJhcHBsaWNhdGlvblwiPT09dC5raW5kJiYtMSE9PXQucHJvdG9jb2wuaW5kZXhPZihcIlNDVFBcIil9KSl9LGk9ZnVuY3Rpb24oZSl7Y29uc3QgdD1lLnNkcC5tYXRjaCgvbW96aWxsYS4uLlRISVNfSVNfU0RQQVJUQS0oXFxkKykvKTtpZihudWxsPT09dHx8dC5sZW5ndGg8MilyZXR1cm4tMTtjb25zdCByPXBhcnNlSW50KHRbMV0sMTApO3JldHVybiByIT1yPy0xOnJ9LG49ZnVuY3Rpb24oZSl7bGV0IHI9NjU1MzY7cmV0dXJuXCJmaXJlZm94XCI9PT10LmJyb3dzZXImJihyPXQudmVyc2lvbjw1Nz8tMT09PWU/MTYzODQ6MjE0NzQ4MzYzNzp0LnZlcnNpb248NjA/NTc9PT10LnZlcnNpb24/NjU1MzU6NjU1MzY6MjE0NzQ4MzYzNykscn0scz1mdW5jdGlvbihlLHIpe2xldCBpPTY1NTM2O1wiZmlyZWZveFwiPT09dC5icm93c2VyJiY1Nz09PXQudmVyc2lvbiYmKGk9NjU1MzUpO2NvbnN0IG49Wi5tYXRjaFByZWZpeChlLnNkcCxcImE9bWF4LW1lc3NhZ2Utc2l6ZTpcIik7cmV0dXJuIG4ubGVuZ3RoPjA/aT1wYXJzZUludChuWzBdLnN1YnN0cigxOSksMTApOlwiZmlyZWZveFwiPT09dC5icm93c2VyJiYtMSE9PXImJihpPTIxNDc0ODM2MzcpLGl9LG89ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0UmVtb3RlRGVzY3JpcHRpb247ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0UmVtb3RlRGVzY3JpcHRpb249ZnVuY3Rpb24oKXtpZih0aGlzLl9zY3RwPW51bGwsXCJjaHJvbWVcIj09PXQuYnJvd3NlciYmdC52ZXJzaW9uPj03Nil7Y29uc3R7c2RwU2VtYW50aWNzOmV9PXRoaXMuZ2V0Q29uZmlndXJhdGlvbigpO1wicGxhbi1iXCI9PT1lJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcInNjdHBcIix7Z2V0KCl7cmV0dXJuIHZvaWQgMD09PXRoaXMuX3NjdHA/bnVsbDp0aGlzLl9zY3RwfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pfWlmKHIoYXJndW1lbnRzWzBdKSl7Y29uc3QgZT1pKGFyZ3VtZW50c1swXSksdD1uKGUpLHI9cyhhcmd1bWVudHNbMF0sZSk7bGV0IG87bz0wPT09dCYmMD09PXI/TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZOjA9PT10fHwwPT09cj9NYXRoLm1heCh0LHIpOk1hdGgubWluKHQscik7Y29uc3QgYT17fTtPYmplY3QuZGVmaW5lUHJvcGVydHkoYSxcIm1heE1lc3NhZ2VTaXplXCIse2dldDooKT0+b30pLHRoaXMuX3NjdHA9YX1yZXR1cm4gby5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIHhlKGUpe2lmKCFlLlJUQ1BlZXJDb25uZWN0aW9ufHwhKFwiY3JlYXRlRGF0YUNoYW5uZWxcImluIGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKSlyZXR1cm47ZnVuY3Rpb24gdChlLHQpe2NvbnN0IHI9ZS5zZW5kO2Uuc2VuZD1mdW5jdGlvbigpe2NvbnN0IGk9YXJndW1lbnRzWzBdLG49aS5sZW5ndGh8fGkuc2l6ZXx8aS5ieXRlTGVuZ3RoO2lmKFwib3BlblwiPT09ZS5yZWFkeVN0YXRlJiZ0LnNjdHAmJm4+dC5zY3RwLm1heE1lc3NhZ2VTaXplKXRocm93IG5ldyBUeXBlRXJyb3IoXCJNZXNzYWdlIHRvbyBsYXJnZSAoY2FuIHNlbmQgYSBtYXhpbXVtIG9mIFwiK3Quc2N0cC5tYXhNZXNzYWdlU2l6ZStcIiBieXRlcylcIik7cmV0dXJuIHIuYXBwbHkoZSxhcmd1bWVudHMpfX1jb25zdCByPWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmNyZWF0ZURhdGFDaGFubmVsO2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmNyZWF0ZURhdGFDaGFubmVsPWZ1bmN0aW9uKCl7Y29uc3QgZT1yLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gdChlLHRoaXMpLGV9LEwoZSxcImRhdGFjaGFubmVsXCIsKGU9Pih0KGUuY2hhbm5lbCxlLnRhcmdldCksZSkpKX1mdW5jdGlvbiBVZShlKXtpZighZS5SVENQZWVyQ29ubmVjdGlvbnx8XCJjb25uZWN0aW9uU3RhdGVcImluIGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKXJldHVybjtjb25zdCB0PWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiY29ubmVjdGlvblN0YXRlXCIse2dldCgpe3JldHVybntjb21wbGV0ZWQ6XCJjb25uZWN0ZWRcIixjaGVja2luZzpcImNvbm5lY3RpbmdcIn1bdGhpcy5pY2VDb25uZWN0aW9uU3RhdGVdfHx0aGlzLmljZUNvbm5lY3Rpb25TdGF0ZX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIm9uY29ubmVjdGlvbnN0YXRlY2hhbmdlXCIse2dldCgpe3JldHVybiB0aGlzLl9vbmNvbm5lY3Rpb25zdGF0ZWNoYW5nZXx8bnVsbH0sc2V0KGUpe3RoaXMuX29uY29ubmVjdGlvbnN0YXRlY2hhbmdlJiYodGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKFwiY29ubmVjdGlvbnN0YXRlY2hhbmdlXCIsdGhpcy5fb25jb25uZWN0aW9uc3RhdGVjaGFuZ2UpLGRlbGV0ZSB0aGlzLl9vbmNvbm5lY3Rpb25zdGF0ZWNoYW5nZSksZSYmdGhpcy5hZGRFdmVudExpc3RlbmVyKFwiY29ubmVjdGlvbnN0YXRlY2hhbmdlXCIsdGhpcy5fb25jb25uZWN0aW9uc3RhdGVjaGFuZ2U9ZSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksW1wic2V0TG9jYWxEZXNjcmlwdGlvblwiLFwic2V0UmVtb3RlRGVzY3JpcHRpb25cIl0uZm9yRWFjaCgoZT0+e2NvbnN0IHI9dFtlXTt0W2VdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Nvbm5lY3Rpb25zdGF0ZWNoYW5nZXBvbHl8fCh0aGlzLl9jb25uZWN0aW9uc3RhdGVjaGFuZ2Vwb2x5PWU9Pntjb25zdCB0PWUudGFyZ2V0O2lmKHQuX2xhc3RDb25uZWN0aW9uU3RhdGUhPT10LmNvbm5lY3Rpb25TdGF0ZSl7dC5fbGFzdENvbm5lY3Rpb25TdGF0ZT10LmNvbm5lY3Rpb25TdGF0ZTtjb25zdCByPW5ldyBFdmVudChcImNvbm5lY3Rpb25zdGF0ZWNoYW5nZVwiLGUpO3QuZGlzcGF0Y2hFdmVudChyKX1yZXR1cm4gZX0sdGhpcy5hZGRFdmVudExpc3RlbmVyKFwiaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlXCIsdGhpcy5fY29ubmVjdGlvbnN0YXRlY2hhbmdlcG9seSkpLHIuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0pKX1mdW5jdGlvbiB3ZShlLHQpe2lmKCFlLlJUQ1BlZXJDb25uZWN0aW9uKXJldHVybjtpZihcImNocm9tZVwiPT09dC5icm93c2VyJiZ0LnZlcnNpb24+PTcxKXJldHVybjtpZihcInNhZmFyaVwiPT09dC5icm93c2VyJiZ0LnZlcnNpb24+PTYwNSlyZXR1cm47Y29uc3Qgcj1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRSZW1vdGVEZXNjcmlwdGlvbjtlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRSZW1vdGVEZXNjcmlwdGlvbj1mdW5jdGlvbih0KXtpZih0JiZ0LnNkcCYmLTEhPT10LnNkcC5pbmRleE9mKFwiXFxuYT1leHRtYXAtYWxsb3ctbWl4ZWRcIikpe2NvbnN0IHI9dC5zZHAuc3BsaXQoXCJcXG5cIikuZmlsdGVyKChlPT5cImE9ZXh0bWFwLWFsbG93LW1peGVkXCIhPT1lLnRyaW0oKSkpLmpvaW4oXCJcXG5cIik7ZS5SVENTZXNzaW9uRGVzY3JpcHRpb24mJnQgaW5zdGFuY2VvZiBlLlJUQ1Nlc3Npb25EZXNjcmlwdGlvbj9hcmd1bWVudHNbMF09bmV3IGUuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKHt0eXBlOnQudHlwZSxzZHA6cn0pOnQuc2RwPXJ9cmV0dXJuIHIuYXBwbHkodGhpcyxhcmd1bWVudHMpfX1mdW5jdGlvbiAkZShlLHQpe2lmKCFlLlJUQ1BlZXJDb25uZWN0aW9ufHwhZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpcmV0dXJuO2NvbnN0IHI9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkSWNlQ2FuZGlkYXRlO3ImJjAhPT1yLmxlbmd0aCYmKGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZEljZUNhbmRpZGF0ZT1mdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHNbMF0/KFwiY2hyb21lXCI9PT10LmJyb3dzZXImJnQudmVyc2lvbjw3OHx8XCJmaXJlZm94XCI9PT10LmJyb3dzZXImJnQudmVyc2lvbjw2OHx8XCJzYWZhcmlcIj09PXQuYnJvd3NlcikmJmFyZ3VtZW50c1swXSYmXCJcIj09PWFyZ3VtZW50c1swXS5jYW5kaWRhdGU/UHJvbWlzZS5yZXNvbHZlKCk6ci5hcHBseSh0aGlzLGFyZ3VtZW50cyk6KGFyZ3VtZW50c1sxXSYmYXJndW1lbnRzWzFdLmFwcGx5KG51bGwpLFByb21pc2UucmVzb2x2ZSgpKX0pfXZhciBqZT1PYmplY3QuZnJlZXplKHtfX3Byb3RvX186bnVsbCxzaGltUlRDSWNlQ2FuZGlkYXRlOkFlLHNoaW1NYXhNZXNzYWdlU2l6ZTpNZSxzaGltU2VuZFRocm93VHlwZUVycm9yOnhlLHNoaW1Db25uZWN0aW9uU3RhdGU6VWUscmVtb3ZlRXh0bWFwQWxsb3dNaXhlZDp3ZSxzaGltQWRkSWNlQ2FuZGlkYXRlTnVsbE9yRW1wdHk6JGV9KTtjb25zdCBWZT1mdW5jdGlvbih7d2luZG93OmV9PXt9LHQ9e3NoaW1DaHJvbWU6ITAsc2hpbUZpcmVmb3g6ITAsc2hpbUVkZ2U6ITAsc2hpbVNhZmFyaTohMH0pe2NvbnN0IHI9QSxpPWZ1bmN0aW9uKGUpe2NvbnN0IHQ9e2Jyb3dzZXI6bnVsbCx2ZXJzaW9uOm51bGx9O2lmKHZvaWQgMD09PWV8fCFlLm5hdmlnYXRvcilyZXR1cm4gdC5icm93c2VyPVwiTm90IGEgYnJvd3Nlci5cIix0O2NvbnN0e25hdmlnYXRvcjpyfT1lO2lmKHIubW96R2V0VXNlck1lZGlhKXQuYnJvd3Nlcj1cImZpcmVmb3hcIix0LnZlcnNpb249TyhyLnVzZXJBZ2VudCwvRmlyZWZveFxcLyhcXGQrKVxcLi8sMSk7ZWxzZSBpZihyLndlYmtpdEdldFVzZXJNZWRpYXx8ITE9PT1lLmlzU2VjdXJlQ29udGV4dCYmZS53ZWJraXRSVENQZWVyQ29ubmVjdGlvbiYmIWUuUlRDSWNlR2F0aGVyZXIpdC5icm93c2VyPVwiY2hyb21lXCIsdC52ZXJzaW9uPU8oci51c2VyQWdlbnQsL0Nocm9tKGV8aXVtKVxcLyhcXGQrKVxcLi8sMik7ZWxzZSBpZihyLm1lZGlhRGV2aWNlcyYmci51c2VyQWdlbnQubWF0Y2goL0VkZ2VcXC8oXFxkKykuKFxcZCspJC8pKXQuYnJvd3Nlcj1cImVkZ2VcIix0LnZlcnNpb249TyhyLnVzZXJBZ2VudCwvRWRnZVxcLyhcXGQrKS4oXFxkKykkLywyKTtlbHNle2lmKCFlLlJUQ1BlZXJDb25uZWN0aW9ufHwhci51c2VyQWdlbnQubWF0Y2goL0FwcGxlV2ViS2l0XFwvKFxcZCspXFwuLykpcmV0dXJuIHQuYnJvd3Nlcj1cIk5vdCBhIHN1cHBvcnRlZCBicm93c2VyLlwiLHQ7dC5icm93c2VyPVwic2FmYXJpXCIsdC52ZXJzaW9uPU8oci51c2VyQWdlbnQsL0FwcGxlV2ViS2l0XFwvKFxcZCspXFwuLywxKSx0LnN1cHBvcnRzVW5pZmllZFBsYW49ZS5SVENSdHBUcmFuc2NlaXZlciYmXCJjdXJyZW50RGlyZWN0aW9uXCJpbiBlLlJUQ1J0cFRyYW5zY2VpdmVyLnByb3RvdHlwZX1yZXR1cm4gdH0oZSksbj17YnJvd3NlckRldGFpbHM6aSxjb21tb25TaGltOmplLGV4dHJhY3RWZXJzaW9uOk8sZGlzYWJsZUxvZzpOLGRpc2FibGVXYXJuaW5nczpEfTtzd2l0Y2goaS5icm93c2VyKXtjYXNlXCJjaHJvbWVcIjppZighenx8IVl8fCF0LnNoaW1DaHJvbWUpcmV0dXJuIHIoXCJDaHJvbWUgc2hpbSBpcyBub3QgaW5jbHVkZWQgaW4gdGhpcyBhZGFwdGVyIHJlbGVhc2UuXCIpLG47aWYobnVsbD09PWkudmVyc2lvbilyZXR1cm4gcihcIkNocm9tZSBzaGltIGNhbiBub3QgZGV0ZXJtaW5lIHZlcnNpb24sIG5vdCBzaGltbWluZy5cIiksbjtyKFwiYWRhcHRlci5qcyBzaGltbWluZyBjaHJvbWUuXCIpLG4uYnJvd3NlclNoaW09eiwkZShlLGkpLFYoZSxpKSxCKGUpLFkoZSxpKSxIKGUpLFcoZSxpKSxGKGUpLEsoZSksRyhlKSxxKGUsaSksQWUoZSksVWUoZSksTWUoZSxpKSx4ZShlKSx3ZShlLGkpO2JyZWFrO2Nhc2VcImZpcmVmb3hcIjppZighVGV8fCFwZXx8IXQuc2hpbUZpcmVmb3gpcmV0dXJuIHIoXCJGaXJlZm94IHNoaW0gaXMgbm90IGluY2x1ZGVkIGluIHRoaXMgYWRhcHRlciByZWxlYXNlLlwiKSxuO3IoXCJhZGFwdGVyLmpzIHNoaW1taW5nIGZpcmVmb3guXCIpLG4uYnJvd3NlclNoaW09VGUsJGUoZSxpKSxsZShlLGkpLHBlKGUsaSksaGUoZSksZmUoZSksX2UoZSksbWUoZSksdmUoZSksUmUoZSksZ2UoZSksU2UoZSksQ2UoZSksQWUoZSksVWUoZSksTWUoZSxpKSx4ZShlKTticmVhaztjYXNlXCJlZGdlXCI6aWYoIXVlfHwhY2V8fCF0LnNoaW1FZGdlKXJldHVybiByKFwiTVMgZWRnZSBzaGltIGlzIG5vdCBpbmNsdWRlZCBpbiB0aGlzIGFkYXB0ZXIgcmVsZWFzZS5cIiksbjtyKFwiYWRhcHRlci5qcyBzaGltbWluZyBlZGdlLlwiKSxuLmJyb3dzZXJTaGltPXVlLG9lKGUpLGFlKGUpLGNlKGUsaSksZGUoZSksTWUoZSxpKSx4ZShlKTticmVhaztjYXNlXCJzYWZhcmlcIjppZighRGV8fCF0LnNoaW1TYWZhcmkpcmV0dXJuIHIoXCJTYWZhcmkgc2hpbSBpcyBub3QgaW5jbHVkZWQgaW4gdGhpcyBhZGFwdGVyIHJlbGVhc2UuXCIpLG47cihcImFkYXB0ZXIuanMgc2hpbW1pbmcgc2FmYXJpLlwiKSxuLmJyb3dzZXJTaGltPURlLCRlKGUsaSksUGUoZSksTGUoZSkseWUoZSksSWUoZSksRWUoZSksT2UoZSksa2UoZSksTmUoZSksQWUoZSksTWUoZSxpKSx4ZShlKSx3ZShlLGkpO2JyZWFrO2RlZmF1bHQ6cihcIlVuc3VwcG9ydGVkIGJyb3dzZXIhXCIpfXJldHVybiBufSh7d2luZG93OlwidW5kZWZpbmVkXCI9PXR5cGVvZiB3aW5kb3c/dm9pZCAwOndpbmRvd30pO3ZhciBCZSxIZSxGZTshZnVuY3Rpb24oZSl7ZS5GUFNfMTA9XCJGUFNfMTBcIixlLkZQU18xNT1cIkZQU18xNVwiLGUuRlBTXzI0PVwiRlBTXzI0XCIsZS5GUFNfMzA9XCJGUFNfMzBcIn0oQmV8fChCZT17fSkpLGZ1bmN0aW9uKGUpe2UuVzE3Nl9IMTMyPVwiVzE3Nl9IMTMyXCIsZS5XMTc2X0gxNDQ9XCJXMTc2X0gxNDRcIixlLlcyNTZfSDE0ND1cIlcyNTZfSDE0NFwiLGUuVzMyMF9IMTgwPVwiVzMyMF9IMTgwXCIsZS5XMjQwX0gyNDA9XCJXMjQwX0gyNDBcIixlLlczMjBfSDI0MD1cIlczMjBfSDI0MFwiLGUuVzQ4MF9IMzYwPVwiVzQ4MF9IMzYwXCIsZS5XNjQwX0gzNjA9XCJXNjQwX0gzNjBcIixlLlc0ODBfSDQ4MD1cIlc0ODBfSDQ4MFwiLGUuVzY0MF9INDgwPVwiVzY0MF9INDgwXCIsZS5XNzIwX0g0ODA9XCJXNzIwX0g0ODBcIixlLlcxMjgwX0g3MjA9XCJXMTI4MF9INzIwXCIsZS5XMTkyMF9IMTA4MD1cIlcxOTIwX0gxMDgwXCJ9KEhlfHwoSGU9e30pKSxmdW5jdGlvbihlKXtlW2UuQVVESU9fT05MWT0wXT1cIkFVRElPX09OTFlcIixlW2UuVklERU9fT05MWT0xXT1cIlZJREVPX09OTFlcIixlW2UuQVVESU9fVklERU89Ml09XCJBVURJT19WSURFT1wifShGZXx8KEZlPXt9KSk7Y29uc3QgS2U9e1tIZS5XMTc2X0gxMzJdOnt3aWR0aDoxNzYsaGVpZ2h0OjEzMixtYXhCaXRyYXRlOjE1MCxtaW5CaXRyYXRlOjgwfSxbSGUuVzE3Nl9IMTQ0XTp7d2lkdGg6MTc2LGhlaWdodDoxNDQsbWF4Qml0cmF0ZToxNjAsbWluQml0cmF0ZTo4MH0sW0hlLlcyNTZfSDE0NF06e3dpZHRoOjI1NixoZWlnaHQ6MTQ0LG1heEJpdHJhdGU6MjQwLG1pbkJpdHJhdGU6MTIwfSxbSGUuVzMyMF9IMTgwXTp7d2lkdGg6MzIwLGhlaWdodDoxODAsbWF4Qml0cmF0ZToyODAsbWluQml0cmF0ZToxMjB9LFtIZS5XMjQwX0gyNDBdOnt3aWR0aDoyNDAsaGVpZ2h0OjI0MCxtYXhCaXRyYXRlOjI4MCxtaW5CaXRyYXRlOjEyMH0sW0hlLlczMjBfSDI0MF06e3dpZHRoOjMyMCxoZWlnaHQ6MjQwLG1heEJpdHJhdGU6NDAwLG1pbkJpdHJhdGU6MTIwfSxbSGUuVzQ4MF9IMzYwXTp7d2lkdGg6NDgwLGhlaWdodDozNjAsbWF4Qml0cmF0ZTo2NTAsbWluQml0cmF0ZToxNTB9LFtIZS5XNjQwX0gzNjBdOnt3aWR0aDo2NDAsaGVpZ2h0OjM2MCxtYXhCaXRyYXRlOjgwMCxtaW5CaXRyYXRlOjE4MH0sW0hlLlc0ODBfSDQ4MF06e3dpZHRoOjQ4MCxoZWlnaHQ6NDgwLG1heEJpdHJhdGU6ODAwLG1pbkJpdHJhdGU6MTgwfSxbSGUuVzY0MF9INDgwXTp7d2lkdGg6NjQwLGhlaWdodDo0ODAsbWF4Qml0cmF0ZTo5MDAsbWluQml0cmF0ZToyMDB9LFtIZS5XNzIwX0g0ODBdOnt3aWR0aDo3MjAsaGVpZ2h0OjQ4MCxtYXhCaXRyYXRlOjFlMyxtaW5CaXRyYXRlOjIwMH0sW0hlLlcxMjgwX0g3MjBdOnt3aWR0aDoxMjgwLGhlaWdodDo3MjAsbWF4Qml0cmF0ZToyMjAwLG1pbkJpdHJhdGU6MjUwfSxbSGUuVzE5MjBfSDEwODBdOnt3aWR0aDoxOTIwLGhlaWdodDoxMDgwLG1heEJpdHJhdGU6NGUzLG1pbkJpdHJhdGU6NDAwfX0sR2U9KGUsdCk9Pntjb25zdCByPWUqdDtsZXQgaT1OdW1iZXIuTUFYX1ZBTFVFLG49bnVsbDtmb3IoY29uc3QgZSBpbiBLZSl7Y29uc3QgdD1LZVtlXSxzPU1hdGguYWJzKHQud2lkdGgqdC5oZWlnaHQtcik7czxpJiYobj10LGk9cyl9cmV0dXJuIG59LEplPXsxMDoxLDE1OjEsMjQ6MS41LDMwOjEuNX0sV2U9ZT0+e2xldCB0PU51bWJlci5NQVhfVkFMVUUscj0xO2Zvcihjb25zdCBpIGluIEplKXtjb25zdCBuPU1hdGguYWJzKGUtcGFyc2VJbnQoaSkpO248dCYmKHQ9bixyPUplW2ldKX1yZXR1cm4gcn0sWWU9e2dldENhbWVyYXM6KCk9PlModm9pZCAwLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybih5aWVsZCBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmVudW1lcmF0ZURldmljZXMoKSkuZmlsdGVyKChlPT5cInZpZGVvaW5wdXRcIj09PWUua2luZCkpfSkpLGdldE1pY3JvcGhvbmVzOigpPT5TKHZvaWQgMCx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4oeWllbGQgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5lbnVtZXJhdGVEZXZpY2VzKCkpLmZpbHRlcigoZT0+XCJhdWRpb2lucHV0XCI9PT1lLmtpbmQpKX0pKSxnZXRTcGVha2VyczooKT0+Uyh2b2lkIDAsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuKHlpZWxkIG5hdmlnYXRvci5tZWRpYURldmljZXMuZW51bWVyYXRlRGV2aWNlcygpKS5maWx0ZXIoKGU9PlwiYXVkaW9vdXRwdXRcIj09PWUua2luZCkpfSkpfTtjbGFzcyBxZSBleHRlbmRzIF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXZlbnRFbWl0dGVye2NvbnN0cnVjdG9yKGUsdCxyLGksbil7c3VwZXIoKSx0aGlzLl90YWc9ZSx0aGlzLl91c2VySWQ9dCx0aGlzLl9raW5kPXIsdGhpcy5faXNMb2NhbFRyYWNrPWksdGhpcy5fcm9vbUlkPW4sdGhpcy5fbG9jYWxNdXRlZD0hMSx0aGlzLl9yZW1vdGVNdXRlZD0hMSx0aGlzLl9zdHJlYW1JZD1bdGhpcy5fdXNlcklkfHx0aGlzLl9yb29tSWQsdGhpcy5fdGFnXS5qb2luKFwiX1wiKSx0aGlzLl9pZD1bdGhpcy5fc3RyZWFtSWQsdGhpcy5pc0F1ZGlvVHJhY2soKT8wOjFdLmpvaW4oXCJfXCIpfWdldFN0cmVhbUlkKCl7cmV0dXJuIHRoaXMuX3N0cmVhbUlkfWdldFRyYWNrSWQoKXtyZXR1cm4gdGhpcy5faWR9Z2V0VXNlcklkKCl7cmV0dXJuIHRoaXMuX3VzZXJJZH1fX2lubmVyR2V0TWVkaWFTdHJlYW1UcmFjaygpe3JldHVybiB0aGlzLl9tc1RyYWNrfWdldFRhZygpe3JldHVybiB0aGlzLl90YWd9aXNMb2NhbFRyYWNrKCl7cmV0dXJuIHRoaXMuX2lzTG9jYWxUcmFja31pc1ZpZGVvVHJhY2soKXtyZXR1cm5cInZpZGVvXCI9PT10aGlzLl9raW5kfWlzQXVkaW9UcmFjaygpe3JldHVyblwiYXVkaW9cIj09PXRoaXMuX2tpbmR9aXNSZWFkeSgpe3ZhciBlO3JldHVyblwibGl2ZVwiPT09KG51bGw9PT0oZT10aGlzLl9tc1RyYWNrKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5yZWFkeVN0YXRlKX1fX2lubmVyU2V0TWVkaWFTdHJlYW1UcmFjayhlKXt0aGlzLl9tc1RyYWNrPWUsdGhpcy5fc2V0TG9jYWxNdXRlZCh0aGlzLl9sb2NhbE11dGVkKTtjb25zdCB0PXRoaXMuX21zU3RyZWFtPXRoaXMuX21zU3RyZWFtfHxuZXcgTWVkaWFTdHJlYW0scj10LmdldFRyYWNrcygpWzBdO3ImJnQucmVtb3ZlVHJhY2sociksZT90LmFkZFRyYWNrKGUpOnRoaXMuX2VsZW1lbnQmJih0aGlzLl9lbGVtZW50LnBhdXNlKCksdGhpcy5fZWxlbWVudC5zcmNPYmplY3Q9bnVsbCl9X3NldExvY2FsTXV0ZWQoZSl7dGhpcy5fbXNUcmFjayYmKHRoaXMuX21zVHJhY2suZW5hYmxlZD0hZSksdGhpcy5fbG9jYWxNdXRlZD1lfW11dGUoKXtDLmluZm8oYHNldCAke3RoaXMuX2lkfSBlbmFibGVkOiBmYWxzZWApLHRoaXMuX3NldExvY2FsTXV0ZWQoITApfXVubXV0ZSgpe0MuaW5mbyhgc2V0ICR7dGhpcy5faWR9IGVuYWJsZWQ6IHRydWVgKSx0aGlzLl9zZXRMb2NhbE11dGVkKCExKX1pc0xvY2FsTXV0ZWQoKXtyZXR1cm4gdGhpcy5fbG9jYWxNdXRlZH1pc01DVVRyYWNrKCl7cmV0dXJuIEJvb2xlYW4odGhpcy5fcm9vbUlkKX1pc093bmVyTXV0ZWQoKXtyZXR1cm4gdGhpcy5fcmVtb3RlTXV0ZWR9cGxheShlLHQpe3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7aWYoIXRoaXMuX21zVHJhY2spcmV0dXJuIEMud2FybihgdGhlIHRyYWNrIGlzIG5vdCByZWFkeSB0byBwbGF5IC0+IGlkOiAke3RoaXMuX2lkfWApLHtjb2RlOlQuVFJBQ0tfTk9UX1JFQURZfTtpZihcImVuZGVkXCI9PT10aGlzLl9tc1RyYWNrLnJlYWR5U3RhdGUmJkMud2FybihgdGhlIHRyYWNrJ3MgcmVhZHlTdGF0ZSBpcyAnZW5kZWQnIC0+IGlkOiAke3RoaXMuX2lkfWApLG51bGw9PXQ/dm9pZCAwOnQudm9sdW1lKXtpZighKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5pc051bWJlcikobnVsbD09dD92b2lkIDA6dC52b2x1bWUpKXJldHVybiBDLmVycm9yKGAke251bGw9PXQ/dm9pZCAwOnQudm9sdW1lfSBpcyBub3QgYSBudW1iZXIsIHRoZSB2YWxpZCByYW5nZSBvZiBvcHRpb25zLnZvbHVtZSBpcyAwLTEwMGApLHtjb2RlOlQuUEFSQU1TX0VSUk9SfTsobnVsbD09dD92b2lkIDA6dC52b2x1bWUpPDAmJih0LnZvbHVtZT0wLEMud2FybihcInRoZSB2YWxpZCByYW5nZSBvZiBvcHRpb25zLnZvbHVtZSBpcyAwLTEwMCwgdGhlIHZhbHVlIG9mIHZvbHVtZSBoYXMgYmVlbiBzZXQgMFwiKSksKG51bGw9PXQ/dm9pZCAwOnQudm9sdW1lKT4xMDAmJih0LnZvbHVtZT0xMDAsQy53YXJuKFwidGhlIHZhbGlkIHJhbmdlIG9mIG9wdGlvbnMudm9sdW1lIGlzIDAtMTAwLCB0aGUgdmFsdWUgb2Ygdm9sdW1lIGhhcyBiZWVuIHNldCAxMDBcIikpfWlmKG51bGw9PXQ/dm9pZCAwOnQuYXVkaW9EZXZpY2VJZCl7aWYoISh5aWVsZCBZZS5nZXRTcGVha2VycygpKS5tYXAoKGU9PmUuZGV2aWNlSWQpKS5pbmNsdWRlcyh0LmF1ZGlvRGV2aWNlSWQpKXJldHVybiBDLmVycm9yKGB0aGUgb3B0aW9ucy5hdWRpb0RldmljZUlkIGlzIGludmFsaWQgLS1cXHgzZSAke3QuYXVkaW9EZXZpY2VJZH1gKSx7Y29kZTpULlBBUkFNU19FUlJPUn19Y29uc3QgaT10aGlzLmlzVmlkZW9UcmFjaygpO2lmKGkmJighZXx8IShlIGluc3RhbmNlb2YgSFRNTFZpZGVvRWxlbWVudCkpKXJldHVybiBDLmVycm9yKGB0aGUgdmlkZW8gdHJhY2sgbmVlZCBhbiA8dmlkZW8+IHRvIHBsYXkgLT4gaWQ6ICR7dGhpcy5faWR9YCkse2NvZGU6VC5WSURFT19UUkFDS19NSVNTX01FRElBX0VMRU1FTlR9O3RoaXMuX2VsZW1lbnQ9aT9lOnRoaXMuX2VsZW1lbnR8fG5ldyBBdWRpbyx0aGlzLl9sb2NhbE11dGVkJiZ0aGlzLl9zZXRMb2NhbE11dGVkKCExKSx0aGlzLl9lbGVtZW50LnNyY09iamVjdCYmdGhpcy5fZWxlbWVudC5zcmNPYmplY3Q9PT10aGlzLl9tc1N0cmVhbXx8dGhpcy5fZWxlbWVudC5wYXVzZSgpLHRoaXMuX2VsZW1lbnQub25sb2Fkc3RhcnQ9ZT0+e3ZhciB0O0MuZGVidWcoYEhUTUxNZWRpYUVsZW1lbnQgb25sb2Fkc3RhcnQgLT4gaWQ6ICR7bnVsbD09PSh0PWUudGFyZ2V0KXx8dm9pZCAwPT09dD92b2lkIDA6dC5pZH0sIHRyYWNrSWQ6ICR7dGhpcy5faWR9YCl9LHRoaXMuX2VsZW1lbnQub25kdXJhdGlvbmNoYW5nZT1lPT57dmFyIHQ7Qy5kZWJ1ZyhgSFRNTE1lZGlhRWxlbWVudCBvbmR1cmF0aW9uY2hhbmdlIC0+IGlkOiAke251bGw9PT0odD1lLnRhcmdldCl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuaWR9LCB0cmFja0lkOiAke3RoaXMuX2lkfWApfSx0aGlzLl9lbGVtZW50Lm9ubG9hZGVkbWV0YWRhdGE9ZT0+e3ZhciB0O0MuZGVidWcoYEhUTUxNZWRpYUVsZW1lbnQgb25sb2FkZWRtZXRhZGF0YSAtPiBpZDogJHtudWxsPT09KHQ9ZS50YXJnZXQpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmlkfSwgdHJhY2tJZDogJHt0aGlzLl9pZH1gKX0sdGhpcy5fZWxlbWVudC5vbmxvYWRlZGRhdGE9ZT0+e3ZhciB0O0MuZGVidWcoYEhUTUxNZWRpYUVsZW1lbnQgb25sb2FkZWRkYXRhIC0+IGlkOiAke251bGw9PT0odD1lLnRhcmdldCl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuaWR9LCB0cmFja0lkOiAke3RoaXMuX2lkfWApfSx0aGlzLl9lbGVtZW50Lm9uYWJvcnQ9ZT0+e3ZhciB0O0MuaW5mbyhgSFRNTE1lZGlhRWxlbWVudCBvbmFib3J0IC0+IGlkOiAke251bGw9PT0odD1lLnRhcmdldCl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuaWR9LCB0cmFja0lkOiAke3RoaXMuX2lkfWApfSx0aGlzLl9lbGVtZW50Lm9uY2FucGxheT1lPT57dmFyIHQ7Qy5pbmZvKGBIVE1MTWVkaWFFbGVtZW50IG9uY2FucGxheSAtPiBpZDogJHtudWxsPT09KHQ9ZS50YXJnZXQpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmlkfSwgdHJhY2tJZDogJHt0aGlzLl9pZH1gKX0sdGhpcy5fZWxlbWVudC5vbnZvbHVtZWNoYW5nZT1lPT57dmFyIHQ7Y29uc3Qgcj1NYXRoLmZsb29yKDEwMCoobnVsbD09PSh0PWUudGFyZ2V0KXx8dm9pZCAwPT09dD92b2lkIDA6dC52b2x1bWUpKTtDLmluZm8oYEhUTUxNZWRpYUVsZW1lbnQgb252b2x1bWVjaGFuZ2UgLT4gdm9sdW1lOiAke3J9LCB0cmFja0lkOiAke3RoaXMuX2lkfWApfSx0aGlzLl9lbGVtZW50LnNyY09iamVjdD10aGlzLl9tc1N0cmVhbSx0aGlzLl9lbGVtZW50LmF1dG9wbGF5PSEwLGkmJih0aGlzLl9lbGVtZW50LnBsYXlzSW5saW5lPSEwLHRoaXMuX2VsZW1lbnQueDVQbGF5c0lubGluZT0hMCx0aGlzLl9lbGVtZW50LndlYmtpdFBsYXlzSW5saW5lPSEwKSxpfHwhKG51bGw9PXQ/dm9pZCAwOnQudm9sdW1lKSYmMCE9PShudWxsPT10P3ZvaWQgMDp0LnZvbHVtZSl8fCh0aGlzLl9lbGVtZW50LnZvbHVtZT0obnVsbD09dD92b2lkIDA6dC52b2x1bWUpLzEwMCk7dHJ5eyhudWxsPT10P3ZvaWQgMDp0LmF1ZGlvRGV2aWNlSWQpJiYhaT95aWVsZCB0aGlzLl9lbGVtZW50LnNldFNpbmtJZCh0LmF1ZGlvRGV2aWNlSWQpOnRoaXMuX2VsZW1lbnQucGxheSgpfWNhdGNoKGUpe3JldHVyblwiTm8gcGVybWlzc2lvbiB0byB1c2UgcmVxdWVzdGVkIGRldmljZVwiPT09ZS5tZXNzYWdlPyhDLmVycm9yKGBzZXRTaW5rSWQgZmFpbGVkIC0+ICR7ZS5tZXNzYWdlfWApLHtjb2RlOlQuTk9fUEVSTUlTU0lPTl9UT19VU0VfUkVRVUVTVEVEX0RFVklDRX0pOihDLmVycm9yKGUpLHtjb2RlOlQuVFJBQ0tfUExBWV9FUlJPUn0pfXJldHVybntjb2RlOlQuU1VDQ0VTU319KSl9X19pbm5lckRlc3Ryb3koKXt0aGlzLl9faW5uZXJTZXRNZWRpYVN0cmVhbVRyYWNrKHZvaWQgMCl9X19yZWxlYXNlTWVkaWFFbGVtZW50KCl7dGhpcy5fZWxlbWVudCYmKHRoaXMuX2VsZW1lbnQucmVtb3ZlKCksdGhpcy5fZWxlbWVudC5zcmNPYmplY3Q9bnVsbCl9fWNsYXNzIHplIGV4dGVuZHMgcWV7Y29uc3RydWN0b3IoZSx0LHIsaSl7c3VwZXIoZSx0LHIsITApLHRoaXMuX2lzUHVibGlzaGVkPSExLHRoaXMuX19pbm5lclNldE1lZGlhU3RyZWFtVHJhY2soaSksaS5vbmVuZGVkPSgpPT57aS5vbmVuZGVkPW51bGwsdGhpcy5lbWl0KHplLkVWRU5UX0xPQ0FMX1RSQUNLX0VORCx0aGlzKSx0aGlzLnJlbW92ZUFsbCh6ZS5FVkVOVF9MT0NBTF9UUkFDS19FTkQpfX1fc2V0TG9jYWxNdXRlZChlKXtjb25zdCB0PXRoaXMuX2xvY2FsTXV0ZWQhPT1lO3N1cGVyLl9zZXRMb2NhbE11dGVkKGUpLHRoaXMuX3JlbW90ZU11dGVkPXRoaXMuX2xvY2FsTXV0ZWQsdCYmdGhpcy5lbWl0KHplLl9fSU5ORVJfRVZFTlRfTVVURURfQ0hBTkdFX18sdGhpcyl9X19pbm5lclNldFB1Ymxpc2hlZChlKXt0aGlzLl9pc1B1Ymxpc2hlZD1lfWlzUHVibGlzaGVkKCl7cmV0dXJuIHRoaXMuX2lzUHVibGlzaGVkfWRlc3Ryb3koKXt2YXIgZTtDLmluZm8oYHRyYWNrIGlzIGRlc3Ryb3llZCAtPiB0cmFja0lkOiAke3RoaXMuZ2V0VHJhY2tJZCgpfWApLG51bGw9PT0oZT10aGlzLl9tc1RyYWNrKXx8dm9pZCAwPT09ZXx8ZS5zdG9wKCksc3VwZXIuX19pbm5lckRlc3Ryb3koKSx0aGlzLmlzQXVkaW9UcmFjaygpJiZzdXBlci5fX3JlbGVhc2VNZWRpYUVsZW1lbnQoKSx0aGlzLmVtaXQoemUuX19JTk5FUl9FVkVOVF9ERVNUUk9ZX18sdGhpcyl9c2V0Qml0cmF0ZShlPTAsdD0wLGk9MCl7ISgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uaXNOdW1iZXIpKGUpfHwhKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5pc051bWJlcikodCl8fCEoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmlzTnVtYmVyKShpKXx8ZTw9MHx8dDw9MHx8ZTx0P0MuZXJyb3IoXCJzZXRCaXRyYXRlIHBhcmFtcyBlcnJvciAtPlwiKTp0aGlzLl9iaXRyYXRlSW5mbz17bWF4OmUsbWluOnQsc3RhcnQ6aX19Z2V0Qml0cmF0ZSgpe3ZhciBlLHQ7Y29uc3R7bWluOnIsbWF4Oml9PXRoaXMuX21zVHJhY2s/X3QodGhpcy5fbXNUcmFjayk6e21pbjowLG1heDowfTtyZXR1cm57bWluOihudWxsPT09KGU9dGhpcy5fYml0cmF0ZUluZm8pfHx2b2lkIDA9PT1lP3ZvaWQgMDplLm1pbil8fHIsbWF4OihudWxsPT09KHQ9dGhpcy5fYml0cmF0ZUluZm8pfHx2b2lkIDA9PT10P3ZvaWQgMDp0Lm1heCl8fGl9fX16ZS5FVkVOVF9MT0NBTF9UUkFDS19FTkQ9XCJsb2NhbC10cmFjay1lbmRcIix6ZS5fX0lOTkVSX0VWRU5UX01VVEVEX0NIQU5HRV9fPVwiaW5uZXItbXV0ZWQtY2hhbmdlXCIsemUuX19JTk5FUl9FVkVOVF9ERVNUUk9ZX189XCJpbm5lci1kZXN0cm95XCI7Y2xhc3MgUWUgZXh0ZW5kcyB6ZXtjb25zdHJ1Y3RvcihlLHQscil7c3VwZXIoZSx0LFwiYXVkaW9cIixyKX1zZXRCaXRyYXRlKGUsdCxyKXtDLndhcm4oXCJgc2V0Qml0cmF0ZWAgaW52YWxpZCBmb3IgYXVkaW8gdHJhY2tcIil9Z2V0Qml0cmF0ZSgpe3JldHVybntzdGFydDozMixtYXg6MzIsbWluOjMyfX19Y2xhc3MgWGUgZXh0ZW5kcyB6ZXtjb25zdHJ1Y3RvcihlLHQscixpPSExKXtzdXBlcihlLHQsXCJ2aWRlb1wiLHIpLHRoaXMuX2lzVGlueT1pfV9faXNUaW55KCl7cmV0dXJuIHRoaXMuX2lzVGlueX1nZXRTdHJlYW1JZCgpe2NvbnN0IGU9c3VwZXIuZ2V0U3RyZWFtSWQoKTtyZXR1cm4gdGhpcy5faXNUaW55P2Ake2V9X3RpbnlgOmV9Z2V0VHJhY2tJZCgpe2NvbnN0IGU9c3VwZXIuZ2V0VHJhY2tJZCgpO3JldHVybiB0aGlzLl9pc1Rpbnk/YCR7ZX1fdGlueWA6ZX19Y2xhc3MgWmUgZXh0ZW5kcyB6ZXtjb25zdHJ1Y3RvcihlLHQscixpLG4pe3N1cGVyKGUsdCxyLGkpLHRoaXMuX3Jlc291cmNlPW4sWmUuX19pbm5lclNldE1hcHBpbmcodGhpcy5nZXRUcmFja0lkKCksbil9c3RhdGljIF9faW5uZXJTZXRNYXBwaW5nKGUsdCl7Y29uc3Qgcj10aGlzLl9tYXBwaW5nLmdldCh0KXx8W107ci5wdXNoKGUpLHRoaXMuX21hcHBpbmcuc2V0KHQscil9c3RhdGljIF9faW5uZXJSZW1vdmVNYXBwaW5nKGUsdCl7dmFyIHIsaTtjb25zdCBuPW51bGw9PT0ocj10aGlzLl9tYXBwaW5nLmdldCh0KSl8fHZvaWQgMD09PXI/dm9pZCAwOnIuZmlsdGVyKCh0PT50IT09ZSkpO24mJm4ubGVuZ3RoPjA/dGhpcy5fbWFwcGluZy5zZXQodCxuKToodGhpcy5fbWFwcGluZy5kZWxldGUodCksdC5wYXVzZSgpLHQuc3JjPVwiXCIsbnVsbD09PShpPXQucGFyZW50Tm9kZSl8fHZvaWQgMD09PWl8fGkucmVtb3ZlQ2hpbGQodCkpfWRlc3Ryb3koKXt0aGlzLmlzQXVkaW9UcmFjaygpJiZ0aGlzLm11dGUoKSxaZS5fX2lubmVyUmVtb3ZlTWFwcGluZyh0aGlzLmdldFRyYWNrSWQoKSx0aGlzLl9yZXNvdXJjZSksc3VwZXIuZGVzdHJveSgpfX1aZS5fbWFwcGluZz1uZXcgTWFwO2NsYXNzIGV0IGV4dGVuZHMgWmV7Y29uc3RydWN0b3IoZSx0LHIsaSl7c3VwZXIoZSx0LFwidmlkZW9cIixyLGkpfX1jbGFzcyB0dCBleHRlbmRzIFple2NvbnN0cnVjdG9yKGUsdCxyLGkpe3N1cGVyKGUsdCxcImF1ZGlvXCIscixpKX1fc2V0TG9jYWxNdXRlZChlKXt0aGlzLl9yZXNvdXJjZSYmKHRoaXMuX3Jlc291cmNlLm11dGVkPWUpLHN1cGVyLl9zZXRMb2NhbE11dGVkKGUpfXBsYXkoKXtyZXR1cm4gdGhpcy5fc2V0TG9jYWxNdXRlZCghMSksUHJvbWlzZS5yZXNvbHZlKHtjb2RlOlQuU1VDQ0VTU30pfX1jbGFzcyBydCBleHRlbmRzIFFle31jbGFzcyBpdCBleHRlbmRzIFhle31jbGFzcyBudCBleHRlbmRzIFhle31jbGFzcyBzdCBleHRlbmRzIHFle2NvbnN0cnVjdG9yKGUsdCxyLGkpe3N1cGVyKGUsdCxyLCExLGkpLHRoaXMuX2lzU3Vic2NyaWJlZD0hMX1fX2lubmVyU2V0UmVtb3RlTXV0ZWQoZSl7dGhpcy5fcmVtb3RlTXV0ZWQ9ZX1fX2lubmVyU2V0U3Vic2NyaWJlZChlKXt0aGlzLl9pc1N1YnNjcmliZWQ9ZX1pc1N1YnNjcmliZWQoKXtyZXR1cm4gdGhpcy5faXNTdWJzY3JpYmVkfX1jbGFzcyBvdCBleHRlbmRzIHN0e2NvbnN0cnVjdG9yKGUsdCxyKXtzdXBlcihlLHQsXCJhdWRpb1wiLHIpfX1jbGFzcyBhdCBleHRlbmRzIHN0e2NvbnN0cnVjdG9yKGUsdCxyKXtzdXBlcihlLHQsXCJ2aWRlb1wiLHIpfX1jb25zdCBjdD0oZSx0KT0+KHtuYW1lOmUsY29udGVudDpKU09OLnN0cmluZ2lmeSh7dXJpczp0LGlnbm9yZTohMH0pfSksZHQ9ZT0+SlNPTi5zdHJpbmdpZnkoZSksdXQ9ZT0+L15bYS16QS1aXFxkLT1dKyQvZy50ZXN0KGUpLGx0PVwiaHR0cDpcIiE9PWxvY2F0aW9uLnByb3RvY29sfHxbXCJsb2NhbGhvc3RcIixcIjEyNy4wLjAuMVwiXS5pbmNsdWRlcyhsb2NhdGlvbi5ob3N0bmFtZSksaHQ9ZT0+e2lmKHZvaWQgMD09PWUpcmV0dXJuIDA7aWYoKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5pc051bWJlcikoZSkpcmV0dXJuIGU7Y29uc3QgdD1lO3JldHVybiB0LmV4YWN0fHx0LmlkZWFsfHx0Lm1heHx8MH0scHQ9ZT0+e2NvbnN0IHQ9ZS5nZXRDb25zdHJhaW50cygpO3JldHVybnt3aWR0aDpodCh0LndpZHRoKSxoZWlnaHQ6aHQodC5oZWlnaHQpLGZyYW1lUmF0ZTpodCh0LmZyYW1lUmF0ZSl9fSxfdD1lPT57Y29uc3R7d2lkdGg6dCxoZWlnaHQ6cixmcmFtZVJhdGU6aX09cHQoZSksbj1HZSh0LHIpLHM9V2UoaSk7cmV0dXJue21pbjpuLm1pbkJpdHJhdGUqcyxtYXg6bi5tYXhCaXRyYXRlKnN9fSxtdD1lPT5bZS5tc2lkLGUubWVkaWFUeXBlXS5qb2luKFwiX1wiKSxmdD1lPT57Y29uc3QgdD1lLnNwbGl0KFwiX1wiKTtyZXR1cm57bWVkaWFUeXBlOnBhcnNlSW50KHQucG9wKCkpLHRhZzp0LnBvcCgpLHVzZXJJZDp0LmpvaW4oXCJfXCIpfX0sdnQ9KGUsdCk9PltlLHRdLmpvaW4oXCJfXCIpLFJ0PWU9PmUubWFwKChlPT5PYmplY3QuYXNzaWduKHt9LGUpKSksZ3Q9KGUsdCxyPSExKT0+e2U9ZS5zbGljZSgpO2NvbnN0IGk9W10sbj1bXSxzPVtdO3JldHVybiB0LmZvckVhY2goKHQ9Pntjb25zdCBuPW10KHQpO2xldCBvPWUuZmluZEluZGV4KChlPT5tdChlKT09PW4pKTtpZihyJiYobz1lLmZpbmRJbmRleCgoZT0+ZS51cmk9PT10LnVyaSkpKSwtMT09PW8pcmV0dXJuIHZvaWQgaS5wdXNoKHQpO2NvbnN0IGE9ZVtvXTthLnVyaSE9PXQudXJpP2kucHVzaCh0KTphLnN0YXRlIT09dC5zdGF0ZSYmcy5wdXNoKHQpLGUuc3BsaWNlKG8sMSl9KSksbi5wdXNoKC4uLmUpLHtwdWJsaXNoZWRMaXN0OmksdW5wdWJsaXNoZWRMaXN0Om4sbW9kaWZpZWRMaXN0OnN9fSxTdD0oKT0+e2xldCBlPVwieHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4XCIucmVwbGFjZSgvW3h5XS9nLChmdW5jdGlvbihlKXtjb25zdCB0PTE2Kk1hdGgucmFuZG9tKCl8MDtyZXR1cm4oXCJ4XCI9PT1lP3Q6MyZ0fDgpLnRvU3RyaW5nKDE2KX0pKTtyZXR1cm4gZT1lLnJlcGxhY2UoLy0vZyxcIlwiKStcIjBcIixlPXBhcnNlSW50KGUsMTYpLGU9KGU9Pntjb25zdCB0PVwiMDEyMzQ1Njc4OWFiY2RlZmdoaWdrbG1ub3BxcnN0dXZ3eHl6QUJDREVGR0hJR0tMTU5PUFFSU1RVVldYWVorL1wiLnNwbGl0KFwiXCIpLHI9dC5sZW5ndGgrMTtsZXQgaT0rZTtjb25zdCBuPVtdO2Rve2NvbnN0IGU9aSVyO2k9KGktZSkvcixuLnVuc2hpZnQodFtlXSl9d2hpbGUoaSk7cmV0dXJuIG4uam9pbihcIlwiKX0pKGUpLGUubGVuZ3RoPjIyJiYoZT1lLnNsaWNlKDAsMjIpKSxlfSxDdD1lPT57Y29uc3RbdCxyXT1lLnNwbGl0KFwiX1wiKS5tYXAoKGU9PnBhcnNlSW50KGUucmVwbGFjZSgvW15cXGRdL2csXCJcIikpKSk7cmV0dXJue3dpZHRoOnQsaGVpZ2h0OnJ9fSxUdD1lPT4hIUhlW2VdLEl0PWU9PiEhQmVbZV0sRXQ9ZT0+cGFyc2VJbnQoZS5yZXBsYWNlKFwiRlBTX1wiLFwiXCIpKSx5dD0oKCk9Pntjb25zdHticm93c2VyOmUsdmVyc2lvbjp0LHN1cHBvcnRzVW5pZmllZFBsYW46cn09VmUuYnJvd3NlckRldGFpbHM7cmV0dXJue2Jyb3dzZXI6ZSx2ZXJzaW9uOnQsc3VwcG9ydHNVbmlmaWVkUGxhbjohMSE9PXJ9fSkoKTtmdW5jdGlvbiBrdCgpe3JldHVyblwiY2FwdHVyZVN0cmVhbVwiaW4gSFRNTE1lZGlhRWxlbWVudC5wcm90b3R5cGV8fFwibW96Q2FwdHVyZVN0cmVhbVwiaW4gSFRNTE1lZGlhRWxlbWVudC5wcm90b3R5cGV9ZnVuY3Rpb24gYnQoKXtyZXR1cm5cIm1lZGlhRGV2aWNlc1wiaW4gbmF2aWdhdG9yJiZcImdldERpc3BsYXlNZWRpYVwiaW4gbmF2aWdhdG9yLm1lZGlhRGV2aWNlc31jb25zdCBQdD1lPT5cIltvYmplY3QgTnVsbF1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKSxPdD1lPT4xPT09ZS50eXBlLEx0PWU9Pntjb25zdCB0PXt9LHI9T2JqZWN0LmtleXMoZS51c2Vycyk7cmV0dXJuIHIubGVuZ3RoJiZyLmZvckVhY2goKHI9Pntjb25zdCBpPVtdLG49ZS51c2Vyc1tyXTtpZihuLnVyaXMpdHJ5e2kucHVzaCguLi5KU09OLnBhcnNlKG4udXJpcykpfWNhdGNoKGUpe0Mud2FybihgaW52YWxpZCB1c2VyIGRhdGEgLT4gdXNlcklkOiAke3J9LCB1c2VyRGF0YTogJHtufWApfXRbcl09aX0pKSx0fTt2YXIgTnQsRHQ7IWZ1bmN0aW9uKGUpe2UuUFVCTElTSD1cIlJDUlRDOlB1Ymxpc2hSZXNvdXJjZVwiLGUuVU5QVUJMSVNIPVwiUkNSVEM6VW5wdWJsaXNoUmVzb3VyY2VcIixlLk1PRElGWT1cIlJDUlRDOk1vZGlmeVJlc291cmNlXCIsZS5UT1RBTF9DT05URU5UX1JFU09VUkNFPVwiUkNSVEM6VG90YWxDb250ZW50UmVzb3VyY2VzXCIsZS5TVEFURT1cIlJDUlRDOnN0YXRlXCIsZS5ST09NX05PVElGWT1cIlJDUlRDOlJvb21OdGZcIixlLlVTRVJfTk9USUZZPVwiUkNSVEM6VXNlck50ZlwiLGUuS0lDSz1cIlJDUlRDOmtpY2tcIixlLlBLX0lOVklURT1cIlJDUlRDOmludml0ZVwiLGUuUEtfSU5WSVRFX1RJTUVPVVQ9XCJSQ1JUQzppbnZpdGVUaW1lb3V0XCIsZS5QS19DQU5DRUxfSU5WSVRFPVwiUkNSVEM6Y2FuY2VsSW52aXRlXCIsZS5QS19JTlZJVEVfQU5TV0VSPVwiUkNSVEM6YW5zd2VySW52aXRlXCIsZS5QS19FTkQ9XCJSQ1JUQzplbmRJbnZpdGVcIixlLk9USEVSX1JPT01fT0ZGTElORT1cIlJDUlRDOm90aGVyUm9vbU9mZmxpbmVcIn0oTnR8fChOdD17fSkpLGZ1bmN0aW9uKGUpe2UuU1VDQ0VTUz1cIlN1Y2Nlc3NcIixlLkZBSUw9XCJGYWlsXCJ9KER0fHwoRHQ9e30pKTtjbGFzcyBBdHtjb25zdHJ1Y3RvcihlLHQscixpPTFlNCl7dGhpcy5fcm9vbUlkPWUsdGhpcy5fcm9vbU1vZGU9dCx0aGlzLl9jb250ZXh0PXIsdGhpcy5fZ2FwPWksdGhpcy5fbGF0ZXN0VGltZXN0YW1wPURhdGUubm93KCksdGhpcy5fdGltZXI9bnVsbH1zdGFydCgpe3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7dGhpcy5fdGltZXJ8fCh0aGlzLl90aW1lcj1zZXRJbnRlcnZhbCh0aGlzLl9sb29wLmJpbmQodGhpcyksdGhpcy5fZ2FwKSl9KSl9X2xvb3AoKXt2YXIgZSx0LHI7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCBuPXlpZWxkIG5ldyBQcm9taXNlKChlPT57dGhpcy5fY29udGV4dC5ydGNQaW5nKHRoaXMuX3Jvb21JZCx0aGlzLl9yb29tTW9kZSkudGhlbihlKS5jYXRjaCgodD0+e0MuZXJyb3IoYHJ0Y3BpbmcgcmVjZWl2ZSB1bmtub3duIGVycm9yIC0+ICR7dH1gKSxlKF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlVOS05PV04pfSkpLHNldFRpbWVvdXQoZSwxZTQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuVElNRU9VVCl9KSkscz1EYXRlLm5vdygpO2lmKG49PT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTKXJldHVybiB0aGlzLl9sYXRlc3RUaW1lc3RhbXA9cyx2b2lkKG51bGw9PT0oZT10aGlzLm9uUGluZ1Jlc3VsdCl8fHZvaWQgMD09PWV8fGUuY2FsbCh0aGlzLER0LlNVQ0NFU1MpKTtudWxsPT09KHQ9dGhpcy5vblBpbmdSZXN1bHQpfHx2b2lkIDA9PT10fHx0LmNhbGwodGhpcyxEdC5GQUlMKSxDLndhcm4oYHJ0Y3BpbmcgZmFpbGVkIC0+IGNvZGU6ICR7bn1gKSwoNDAwMDM9PT1ufHxzLXRoaXMuX2xhdGVzdFRpbWVzdGFtcD42ZTQpJiYodGhpcy5zdG9wKCksbnVsbD09PShyPXRoaXMub25GYWlsZWQpfHx2b2lkIDA9PT1yfHxyLmNhbGwodGhpcyw0MDAwMz09PW4pKX0pKX1zdG9wKCl7dGhpcy5fdGltZXImJihjbGVhckludGVydmFsKHRoaXMuX3RpbWVyKSx0aGlzLl90aW1lcj1udWxsKX19dmFyIE10OyFmdW5jdGlvbihlKXtlW2UuTk9STUFMPTFdPVwiTk9STUFMXCIsZVtlLlRJTlk9Ml09XCJUSU5ZXCJ9KE10fHwoTXQ9e30pKTtjb25zdCB4dD0oZSx0KT0+TWF0aC5yb3VuZCg4KnQvZSksVXQ9KGUsdD0yKT0+e2NvbnN0IHI9MTAqKnQ7cmV0dXJuIE1hdGgucm91bmQoZSpyKS9yfSx3dD0oZSx0PTIpPT57ZT4xJiYoZS89MzI3NjcpO2NvbnN0IHI9MTAqKnQ7cmV0dXJuIE1hdGguY2VpbChlKnIpfSwkdD0oZSx0LHIsaSk9PntpZigwPT09dClyZXR1cm4gMDtpZighcnx8IWkpcmV0dXJuIFV0KGUvdCwzKTtjb25zdCBuPXQtaTtpZigwPT09bilyZXR1cm4gMDtjb25zdCBzPWUtcjtyZXR1cm4gczwwfHxuPDA/MDpVdChzL24sMyl9LGp0PWU9Pntjb25zdHtqaXR0ZXI6dCxydHQ6cixwYWNrZXRzTG9zdFJhdGU6aX09ZTtyZXR1cm4hUHQodCl8fCFQdChyKXx8MCE9PWl9O2NsYXNzIFZ0e2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5fcnRjUGVlckNvbm49ZSx0aGlzLl9zZHBTZW1hbnRpY3M9dCx0aGlzLl9sYXRlc3RQYWNrZXRzU2VudD17fSx0aGlzLl9sYXRlc3RCeXRlc1NlbnQ9e30sdGhpcy5fbGF0ZXN0Qnl0ZXNSZWN2PXt9LHRoaXMuX2xhdGVzdFBhY2tldHNSZWN2PXt9fXVwZGF0ZUJ5dGVzU2VudChlLHQscil7bGV0IGksbjtpZih0aGlzLl9sYXRlc3RCeXRlc1NlbnRbZV0mJnQ8dGhpcy5fbGF0ZXN0Qnl0ZXNTZW50W2VdLmJ5dGVzU2VudCYmdGhpcy5jbGVhckxhdGVzdHBhY2tldHNTZW50KFtlXSksdGhpcy5fbGF0ZXN0Qnl0ZXNTZW50W2VdKXtjb25zdHtieXRlc1NlbnQ6cyx0aW1lc3RhbXA6b309dGhpcy5fbGF0ZXN0Qnl0ZXNTZW50W2VdO2k9dC1zLG49ci1vLHRoaXMuX2xhdGVzdEJ5dGVzU2VudFtlXT17Ynl0ZXNTZW50OnQsdGltZXN0YW1wOnJ9fWVsc2UgaT10LG49MWUzLHRoaXMuX2xhdGVzdEJ5dGVzU2VudFtlXT17Ynl0ZXNTZW50OnQsdGltZXN0YW1wOnJ9O3JldHVybiB4dChuLGkpfXVwZGF0ZUJ5dGVzUmVjdihlLHQscil7bGV0IGksbjtpZih0aGlzLl9sYXRlc3RCeXRlc1JlY3ZbZV0mJnQ8dGhpcy5fbGF0ZXN0Qnl0ZXNSZWN2W2VdLmJ5dGVzUmVjdiYmdGhpcy5jbGVhckxhdGVzdFBhY2tldHNSZWN2KFtlXSksdGhpcy5fbGF0ZXN0Qnl0ZXNSZWN2W2VdKXtjb25zdHtieXRlc1JlY3Y6cyx0aW1lc3RhbXA6b309dGhpcy5fbGF0ZXN0Qnl0ZXNSZWN2W2VdO2k9dC1zLG49ci1vLHRoaXMuX2xhdGVzdEJ5dGVzUmVjdltlXT17Ynl0ZXNSZWN2OnQsdGltZXN0YW1wOnJ9fWVsc2UgaT10LG49MWUzLHRoaXMuX2xhdGVzdEJ5dGVzUmVjdltlXT17Ynl0ZXNSZWN2OnQsdGltZXN0YW1wOnJ9O3JldHVybiB4dChuLGkpfXVwZGF0ZVNlbmRlclBhY2tldHNMb3N0KGUsdCxyKXtsZXQgaTtpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodGhpcy5fbGF0ZXN0UGFja2V0c1NlbnRbZV0sXCJwYWNrZXRzU2VudFwiKSl7Y29uc3R7cGFja2V0c0xvc3Q6bixwYWNrZXRzU2VudDpzfT10aGlzLl9sYXRlc3RQYWNrZXRzU2VudFtlXTtpPSR0KHQscixuLHMpLHRoaXMuX2xhdGVzdFBhY2tldHNTZW50W2VdLnBhY2tldHNMb3N0PXQsdGhpcy5fbGF0ZXN0UGFja2V0c1NlbnRbZV0ucGFja2V0c1NlbnQ9bj09PXQ/czpyfWVsc2UgaT0kdCh0LHIpLHRoaXMuX2xhdGVzdFBhY2tldHNTZW50W2VdLnBhY2tldHNMb3N0PXQsdGhpcy5fbGF0ZXN0UGFja2V0c1NlbnRbZV0ucGFja2V0c1NlbnQ9cjtyZXR1cm4gaX11cGRhdGVSZWNlaXZlclBhY2tldHNMb3N0KGUsdCxyKXtsZXQgaTtpZih0aGlzLl9sYXRlc3RQYWNrZXRzUmVjdltlXSl7Y29uc3R7cGFja2V0c0xvc3Q6bixwYWNrZXRzUmVjdjpzfT10aGlzLl9sYXRlc3RQYWNrZXRzUmVjdltlXTtpPSR0KHQscit0LG4scytuKX1lbHNlIGk9JHQodCxyKTtyZXR1cm4gdGhpcy5fbGF0ZXN0UGFja2V0c1JlY3ZbZV09e3BhY2tldHNMb3N0OnQscGFja2V0c1JlY3Y6cn0saX1jbGVhckxhdGVzdHBhY2tldHNTZW50KGUpe2UuZm9yRWFjaCgoZT0+e2lmKHBhcnNlSW50KGUuc3BsaXQoXCJfXCIpLnBvcCgpKT09PUZlLlZJREVPX09OTFkpe2NvbnN0IHQ9YCR7ZX1fdGlueWA7ZGVsZXRlIHRoaXMuX2xhdGVzdFBhY2tldHNTZW50W3RdLGRlbGV0ZSB0aGlzLl9sYXRlc3RCeXRlc1NlbnRbdF19ZGVsZXRlIHRoaXMuX2xhdGVzdFBhY2tldHNTZW50W2VdLGRlbGV0ZSB0aGlzLl9sYXRlc3RCeXRlc1NlbnRbZV19KSl9Y2xlYXJMYXRlc3RQYWNrZXRzUmVjdihlKXtlLmZvckVhY2goKGU9PntkZWxldGUgdGhpcy5fbGF0ZXN0UGFja2V0c1JlY3ZbZV0sZGVsZXRlIHRoaXMuX2xhdGVzdEJ5dGVzUmVjdltlXX0pKX1wYXJzZVJUQ1N0YXRzUmVwb3J0KGUpe2NvbnN0IHQ9ZS5rZXlzKCkscj17fTtsZXQgaT10Lm5leHQoKTtmb3IoOyFpLmRvbmU7KXtjb25zdCBuPWkudmFsdWUscz1lLmdldChuKTsvXlJUQ0NvZGVjXy8udGVzdChuKXx8KHJbbl09cyksaT10Lm5leHQoKX1yZXR1cm4gcn1mb3JtYXRSQ1JUQ1N0YXRlUmVwb3J0KGUpe3JldHVybntzZW5kZXJzOltdLHJlY2VpdmVyczpbXX19Z2V0QXVkaW9MZXZlbExpc3QoZSl7cmV0dXJuW119Z2V0UmVzb3VyY2VJZEJ5UGFyc2VTZHAoZSl7dmFyIHQscjtjb25zdCBpPWUuc3NyYyxuPWUua2luZHx8ZS5tZWRpYVR5cGUscz1udWxsPT09KHQ9dGhpcy5fcnRjUGVlckNvbm4uY3VycmVudExvY2FsRGVzY3JpcHRpb24pfHx2b2lkIDA9PT10P3ZvaWQgMDp0LnNkcCxvPW51bGw9PT0ocj10aGlzLl9ydGNQZWVyQ29ubi5jdXJyZW50UmVtb3RlRGVzY3JpcHRpb24pfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLnNkcDtsZXQgYTthPVwidW5pZmllZC1wbGFuXCI9PT10aGlzLl9zZHBTZW1hbnRpY3M/bmV3IFJlZ0V4cChcImE9bXNpZDooLio/KSBcIik6bmV3IFJlZ0V4cChgYT1zc3JjOiR7aX0gbXNpZDooLio/KSBgKTtjb25zdCBjPW51bGw9PXM/dm9pZCAwOnMuc3BsaXQoXCJcXHJcXG5tPVwiKSxkPW51bGw9PWM/dm9pZCAwOmMuZmlsdGVyKChlPT5lLmluY2x1ZGVzKGBhPXNzcmM6JHtpfWApKSlbMF0sdT1udWxsPT1kP3ZvaWQgMDpkLm1hdGNoKGEpO2xldCBsPXU/dVsxXTpcIlwiO2lmKGwpcmV0dXJuYCR7bH1fJHtcInZpZGVvXCI9PT1uPzE6MH1gO2NvbnN0IGg9bnVsbD09bz92b2lkIDA6by5zcGxpdChcIlxcclxcbm09XCIpLHA9bnVsbD09aD92b2lkIDA6aC5maWx0ZXIoKGU9PmUuaW5jbHVkZXMoYGE9c3NyYzoke2l9YCkpKVswXSxfPW51bGw9PXA/dm9pZCAwOnAubWF0Y2goYSk7cmV0dXJuIGw9Xz9fWzFdOlwiXCIsYCR7bH1fJHtcInZpZGVvXCI9PT1uPzE6MH1gfWlzVmFsaWRTZW5kZXIoZSl7dmFyIHQ7Y29uc3Qgcj1udWxsPT09KHQ9dGhpcy5fcnRjUGVlckNvbm4uY3VycmVudExvY2FsRGVzY3JpcHRpb24pfHx2b2lkIDA9PT10P3ZvaWQgMDp0LnNkcCx7c3NyYzppfT1lO3JldHVybiEobnVsbD09cj92b2lkIDA6ci5zcGxpdChcIlxcclxcbm09XCIpLnNvbWUoKGU9PmUuaW5jbHVkZXMoaSkmJmUuaW5jbHVkZXMoXCJhPWluYWN0aXZlXCIpKSkpfWlzVmFsaWRSZWNlaXZlcihlKXt2YXIgdDtjb25zdCByPW51bGw9PT0odD10aGlzLl9ydGNQZWVyQ29ubi5jdXJyZW50UmVtb3RlRGVzY3JpcHRpb24pfHx2b2lkIDA9PT10P3ZvaWQgMDp0LnNkcCx7c3NyYzppfT1lO3JldHVybiEobnVsbD09cj92b2lkIDA6ci5zcGxpdChcIlxcclxcbm09XCIpLnNvbWUoKGU9PmUuaW5jbHVkZXMoaSkmJmUuaW5jbHVkZXMoXCJhPWluYWN0aXZlXCIpKSkpfX1jbGFzcyBCdCBleHRlbmRzIFZ0e2Zvcm1hdFJDUlRDU3RhdGVSZXBvcnQoZSl7Y29uc3QgdD17c2VuZGVyczpbXSxyZWNlaXZlcnM6W119LHI9TWF0aC5mbG9vcihlLlJUQ1BlZXJDb25uZWN0aW9uLnRpbWVzdGFtcCk7dC50aW1lc3RhbXA9cjtjb25zdCBpPU9iamVjdC5rZXlzKGUpO2xldCBuPTAscz0wO2kuZmlsdGVyKChlPT4vXlJUQ091dGJvdW5kUlRQKFZpZGVvfEF1ZGlvKVN0cmVhbV8vLnRlc3QoZSkpKS5mb3JFYWNoKChpPT57Y29uc3Qgbz1lW2ldO2lmKFwidW5pZmllZC1wbGFuXCI9PT10aGlzLl9zZHBTZW1hbnRpY3MmJiF0aGlzLmlzVmFsaWRTZW5kZXIobykpcmV0dXJuO2NvbnN0e2lkOmEsa2luZDpjLHRyYW5zcG9ydElkOmQsbWVkaWFTb3VyY2VJZDp1LHJlbW90ZUlkOmwscGFja2V0c1NlbnQ6aCxieXRlc1NlbnQ6cCx0cmFja0lkOl8sZW5jb2RlckltcGxlbWVudGF0aW9uOm0scGxpQ291bnQ6ZixuYWNrQ291bnQ6dixmaXJDb3VudDpSfT1vO2lmKCFfKXJldHVybjtsZXR7ZnJhbWVzUGVyU2Vjb25kOmcsZnJhbWVXaWR0aDpTLGZyYW1lSGVpZ2h0OkN9PW87XCJ2aWRlb1wiIT09Y3x8U3x8Q3x8Z3x8KFM9ZVtfXS5mcmFtZVdpZHRoLEM9ZVtfXS5mcmFtZUhlaWdodCxnPXU/ZVt1XS5mcmFtZXNQZXJTZWNvbmQ6bnVsbCk7Y29uc3QgVD1lW2xdO2xldCBJPW51bGwsRT1udWxsLHk9MDtUJiYoST1ULmppdHRlcixFPVQucm91bmRUcmlwVGltZSx5PVQucGFja2V0c0xvc3QpLG4rPXk7Y29uc3Qgaz10aGlzLmdldFJlc291cmNlSWRCeVBhcnNlU2RwKG8pLGI9dT9lW3VdLmF1ZGlvTGV2ZWw6ZVtfXS5hdWRpb0xldmVsO2xldCBQPW51bGw7IXRoaXMuX2xhdGVzdFBhY2tldHNTZW50W2tdJiYodGhpcy5fbGF0ZXN0UGFja2V0c1NlbnRba109e30pLFQ/UD10aGlzLnVwZGF0ZVNlbmRlclBhY2tldHNMb3N0KGsseSxoKTp0aGlzLl9sYXRlc3RQYWNrZXRzU2VudFtrXS5jcnRQYWNrZXRzU2VudD1oO2xldCBPPXRoaXMudXBkYXRlQnl0ZXNTZW50KGsscCxyKTtPPDAmJihPPTApLHMrPU8sdC5zZW5kZXJzLnB1c2goe2lkOmEsdHJhY2tJZDprLGtpbmQ6YyxwYWNrZXRzTG9zdFJhdGU6UCxyZW1vdGVSZXNvdXJjZTohMSxhdWRpb0xldmVsOmJ8fDA9PT1iP3d0KGIpOm51bGwsZnJhbWVXaWR0aDpTLGZyYW1lSGVpZ2h0OkMsZnJhbWVSYXRlOmcsYml0cmF0ZTpPLGppdHRlcjpJP01hdGgucm91bmQoMWUzKkkpOkkscnR0OkUsZW5jb2RlckltcGxlbWVudGF0aW9uOm0scGxpQ291bnQ6ZixuYWNrQ291bnQ6dixnb29nRmlyc1NlbnQ6LTEsc2FtcGxpbmdSYXRlOi0xLGdvb2dSZW5kZXJEZWxheU1zOi0xLHRyYWNrU3RhdGU6LTF9KX0pKTtpLmZpbHRlcigoZT0+L1JUQ1JlbW90ZUluYm91bmRSdHAoVmlkZW98QXVkaW8pU3RyZWFtXy8udGVzdChlKSkpLmZvckVhY2goKHI9Pntjb25zdHtsb2NhbElkOmksaml0dGVyOm4scm91bmRUcmlwVGltZTpzLHBhY2tldHNMb3N0Om99PWVbcl0sYT10LnNlbmRlcnMuZmlsdGVyKChlPT5lLmlkPT09aSkpWzBdO2lmKGEmJiFqdChhKSl7Y29uc3QgdD10aGlzLmdldFJlc291cmNlSWRCeVBhcnNlU2RwKGVbYS5pZF0pO2Euaml0dGVyPU1hdGgucm91bmQoMWUzKm4pLGEucnR0PXM7Y29uc3Qgcj10aGlzLl9sYXRlc3RQYWNrZXRzU2VudFt0XS5jcnRQYWNrZXRzU2VudDthLnBhY2tldHNMb3N0UmF0ZT10aGlzLnVwZGF0ZVNlbmRlclBhY2tldHNMb3N0KHQsbyxyKX19KSk7bGV0IG89MDtpLmZpbHRlcigoZT0+L15SVENJbmJvdW5kUlRQKFZpZGVvfEF1ZGlvKVN0cmVhbV8vLnRlc3QoZSkpKS5mb3JFYWNoKChpPT57Y29uc3Qgcz1lW2ldO2lmKFwidW5pZmllZC1wbGFuXCI9PT10aGlzLl9zZHBTZW1hbnRpY3MmJiF0aGlzLmlzVmFsaWRSZWNlaXZlcihzKSlyZXR1cm47Y29uc3R7dHJhY2tJZDphLHBhY2tldHNMb3N0OmMscGFja2V0c1JlY2VpdmVkOmQsaml0dGVyOnUsYnl0ZXNSZWNlaXZlZDpsLGZyYW1lc1BlclNlY29uZDpoLGtpbmQ6cCxjb2RlY0ltcGxlbWVudGF0aW9uTmFtZTpfLG5hY2tDb3VudDptLHBsaUNvdW50OmZ9PXM7aWYoIWEpcmV0dXJuO2xldHtmcmFtZVdpZHRoOnYsZnJhbWVIZWlnaHQ6UixhdWRpb0xldmVsOmd9PXM7XCJ2aWRlb1wiPT09cD92fHxSfHwodj1lW2FdLmZyYW1lV2lkdGgsUj1lW2FdLmZyYW1lSGVpZ2h0KTpnfHwoZz1lW2FdLmF1ZGlvTGV2ZWwpLG4rPWM7Y29uc3QgUz10aGlzLmdldFJlc291cmNlSWRCeVBhcnNlU2RwKHMpLEM9dGhpcy51cGRhdGVSZWNlaXZlclBhY2tldHNMb3N0KFMsYyxkKTtsZXQgVD10aGlzLnVwZGF0ZUJ5dGVzUmVjdihTLGwscik7VDwwJiYoVD0wKSxvKz1ULHQucmVjZWl2ZXJzLnB1c2goe3RyYWNrSWQ6UyxraW5kOnAscGFja2V0c0xvc3RSYXRlOkMscmVtb3RlUmVzb3VyY2U6ITAsYXVkaW9MZXZlbDpnfHwwPT09Zz93dChnKTpudWxsLGZyYW1lV2lkdGg6dixmcmFtZUhlaWdodDpSLGZyYW1lUmF0ZTpoLGJpdHJhdGU6VCxqaXR0ZXI6dT9NYXRoLnJvdW5kKDFlMyp1KTowLGNvZGVjSW1wbGVtZW50YXRpb25OYW1lOl8sbmFja0NvdW50Om0scGxpQ291bnQ6ZixydHQ6bnVsbCxzYW1wbGluZ1JhdGU6LTEsZ29vZ0ZpcnNSZWNlaXZlZDotMSxnb29nUmVuZGVyRGVsYXlNczotMSx0cmFja1N0YXRlOi0xfSl9KSk7Y29uc3QgYT1pLmZpbHRlcigoZT0+L15SVENUcmFuc3BvcnRfLy50ZXN0KGUpKSlbMF07aWYoYSl7Y29uc3Qgcj1lW2FdLHtzZWxlY3RlZENhbmRpZGF0ZVBhaXJJZDppfT1yO2lmKGkpe2NvbnN0IHI9ZVtpXSx7YXZhaWxhYmxlT3V0Z29pbmdCaXRyYXRlOmEsYXZhaWxhYmxlSW5jb21pbmdCaXRyYXRlOmMsY3VycmVudFJvdW5kVHJpcFRpbWU6ZCxsb2NhbENhbmRpZGF0ZUlkOnUscmVtb3RlQ2FuZGlkYXRlSWQ6bH09cixoPWVbdV0se2lwOnAscG9ydDpfLG5ldHdvcmtUeXBlOm19PWgsZj1lW2xdLHtpcDp2LHBvcnQ6Uixwcm90b2NvbDpnfT1mO3QuaWNlQ2FuZGlkYXRlUGFpcj17SVA6cCxwb3J0Ol8sbmV0d29ya1R5cGU6bSxyZW1vdGVJUDp2LHJlbW90ZVBvcnQ6Uixwcm90b2NvbDpnLGJpdHJhdGVSZWN2Om8sYml0cmF0ZVNlbmQ6cyxydHQ6MWUzKmQsYXZhaWxhYmxlT3V0Z29pbmdCaXRyYXRlOmEsYXZhaWxhYmxlSW5jb21pbmdCaXRyYXRlOmMsdG90YWxQYWNrZXRzTG9zdDpufSx0LnJlY2VpdmVycy5mb3JFYWNoKChlPT57ZS5ydHQ9ZH0pKX19cmV0dXJuIHR9Z2V0QXVkaW9MZXZlbExpc3QoZSl7Y29uc3QgdD1bXSxyPU9iamVjdC5rZXlzKGUpO3IuZmlsdGVyKChlPT4vXlJUQ091dGJvdW5kUlRQQXVkaW9TdHJlYW1fLy50ZXN0KGUpKSkuZm9yRWFjaCgocj0+e3ZhciBpO2NvbnN0IG49ZVtyXTtpZihcInVuaWZpZWQtcGxhblwiPT09dGhpcy5fc2RwU2VtYW50aWNzJiYhdGhpcy5pc1ZhbGlkU2VuZGVyKG4pKXJldHVybjtjb25zdHttZWRpYVNvdXJjZUlkOnMsdHJhY2tJZDpvfT1uLGE9dGhpcy5nZXRSZXNvdXJjZUlkQnlQYXJzZVNkcChuKSxjPXMmJmVbc10/ZVtzXS5hdWRpb0xldmVsOihudWxsPT09KGk9ZVtvXSl8fHZvaWQgMD09PWk/dm9pZCAwOmkuYXVkaW9MZXZlbCl8fG51bGw7dC5wdXNoKHt0cmFja0lkOmEsYXVkaW9MZXZlbDpjfHwwPT09Yz93dChjKTpudWxsfSl9KSk7cmV0dXJuIHIuZmlsdGVyKChlPT4vXlJUQ0luYm91bmRSVFBBdWRpb1N0cmVhbV8vLnRlc3QoZSkpKS5mb3JFYWNoKChyPT57Y29uc3QgaT1lW3JdO2lmKFwidW5pZmllZC1wbGFuXCI9PT10aGlzLl9zZHBTZW1hbnRpY3MmJiF0aGlzLmlzVmFsaWRSZWNlaXZlcihpKSlyZXR1cm47Y29uc3R7dHJhY2tJZDpufT1pLHM9aS5hdWRpb0xldmVsfHxlW25dLmF1ZGlvTGV2ZWwsbz10aGlzLmdldFJlc291cmNlSWRCeVBhcnNlU2RwKGkpO3QucHVzaCh7dHJhY2tJZDpvLGF1ZGlvTGV2ZWw6c3x8MD09PXM/d3Qocyk6bnVsbH0pfSkpLHR9fWNsYXNzIEh0IGV4dGVuZHMgVnR7Zm9ybWF0UkNSVENTdGF0ZVJlcG9ydChlKXtjb25zdCB0PStuZXcgRGF0ZSxyPXtzZW5kZXJzOltdLHJlY2VpdmVyczpbXSx0aW1lc3RhbXA6dH07bGV0IGk9MCxuPTAscz0wO2Zvcihjb25zdCBvIGluIGUpe2NvbnN0IGE9ZVtvXSxjPWEudHlwZTtpZihcIm91dGJvdW5kLXJ0cFwiPT09Yyl7aWYoXCJ1bmlmaWVkLXBsYW5cIj09PXRoaXMuX3NkcFNlbWFudGljcyYmIXRoaXMuaXNWYWxpZFNlbmRlcihhKSljb250aW51ZTtjb25zdHtpZDpzLGtpbmQ6byxieXRlc1NlbnQ6YyxwYWNrZXRzU2VudDpkLGJpdHJhdGVNZWFuOnUsZnJhbWVyYXRlTWVhbjpsLG5hY2tDb3VudDpoLHBsaUNvdW50OnAscmVtb3RlSWQ6X309YSx7aml0dGVyOm0scm91bmRUcmlwVGltZTpmLHBhY2tldHNMb3N0OnZ9PV8/ZVtfXTp7aml0dGVyOm51bGwscm91bmRUcmlwVGltZTpudWxsLHBhY2tldHNMb3N0OjB9LFI9dGhpcy5nZXRSZXNvdXJjZUlkQnlQYXJzZVNkcChhKTtpKz12O2xldCBnPW51bGw7IXRoaXMuX2xhdGVzdFBhY2tldHNTZW50W1JdJiYodGhpcy5fbGF0ZXN0UGFja2V0c1NlbnRbUl09e30pLF8/Zz10aGlzLnVwZGF0ZVNlbmRlclBhY2tldHNMb3N0KFIsdixkKTp0aGlzLl9sYXRlc3RQYWNrZXRzU2VudFtSXS5jcnRQYWNrZXRzU2VudD1kO2xldCBTPTA7XCJ2aWRlb1wiPT09bz91JiYoUz1NYXRoLmZsb29yKHUvMWUzKSk6Uz10aGlzLnVwZGF0ZUJ5dGVzU2VudChSLGMsdCksUzwwJiYoUz0wKSxuKz1TLHIuc2VuZGVycy5wdXNoKHt0cmFja0lkOlIsa2luZDpvLHBhY2tldHNMb3N0UmF0ZTpnLHJlbW90ZVJlc291cmNlOiExLGF1ZGlvTGV2ZWw6bnVsbCxmcmFtZVdpZHRoOm51bGwsZnJhbWVIZWlnaHQ6bnVsbCxmcmFtZVJhdGU6TWF0aC5mbG9vcihsKSxiaXRyYXRlOlMsaml0dGVyOm0/TWF0aC5yb3VuZCgxZTMqbSk6bnVsbCxydHQ6ZixlbmNvZGVySW1wbGVtZW50YXRpb246bnVsbCxwbGlDb3VudDpwLG5hY2tDb3VudDpoLGdvb2dGaXJzU2VudDotMSxzYW1wbGluZ1JhdGU6LTEsZ29vZ1JlbmRlckRlbGF5TXM6LTEsdHJhY2tTdGF0ZTotMX0pfWlmKFwicmVtb3RlLWluYm91bmQtcnRwXCI9PT1jKXtjb25zdHtsb2NhbElkOnR9PWEsaT10aGlzLmdldFJlc291cmNlSWRCeVBhcnNlU2RwKGVbdF0pLG49ci5zZW5kZXJzLmZpbHRlcigoZT0+ZS50cmFja0lkPT09aSkpWzBdO24mJmp0KG4pJiYobi5qaXR0ZXI9TWF0aC5yb3VuZCgxZTMqYS5qaXR0ZXIpLG4ucnR0PWEucnR0LG4ucGFja2V0c0xvc3RSYXRlPXRoaXMudXBkYXRlU2VuZGVyUGFja2V0c0xvc3QoaSxhLnBhY2tldHNMb3N0LHRoaXMuX2xhdGVzdFBhY2tldHNTZW50W2ldLmNydFBhY2tldHNTZW50KSl9aWYoXCJpbmJvdW5kLXJ0cFwiPT09Yyl7aWYoXCJ1bmlmaWVkLXBsYW5cIj09PXRoaXMuX3NkcFNlbWFudGljcyYmIXRoaXMuaXNWYWxpZFJlY2VpdmVyKGEpKWNvbnRpbnVlO2NvbnN0e2lkOmUscGFja2V0c0xvc3Q6bixieXRlc1JlY2VpdmVkOm8scGFja2V0c1JlY2VpdmVkOmMsaml0dGVyOmQsZnJhbWVyYXRlTWVhbjp1LGtpbmQ6bCxiaXRyYXRlTWVhbjpoLG5hY2tDb3VudDpwLHBsaUNvdW50Ol99PWEsbT10aGlzLmdldFJlc291cmNlSWRCeVBhcnNlU2RwKGEpO2krPW47Y29uc3QgZj10aGlzLnVwZGF0ZVJlY2VpdmVyUGFja2V0c0xvc3QobSxuLGMpO2xldCB2PTA7XCJ2aWRlb1wiPT09bD9oJiYodj1NYXRoLmZsb29yKGgvMWUzKSk6dj10aGlzLnVwZGF0ZUJ5dGVzUmVjdihtLG8sdCksdjwwJiYodj0wKSxzKz12LHIucmVjZWl2ZXJzLnB1c2goe3RyYWNrSWQ6bSxraW5kOmwscGFja2V0c0xvc3RSYXRlOmYscmVtb3RlUmVzb3VyY2U6ITAsYXVkaW9MZXZlbDpudWxsLGZyYW1lV2lkdGg6bnVsbCxmcmFtZUhlaWdodDpudWxsLGZyYW1lUmF0ZTpNYXRoLmZsb29yKHUpLGJpdHJhdGU6dixqaXR0ZXI6ZD9NYXRoLnJvdW5kKDFlMypkKTpudWxsLGNvZGVjSW1wbGVtZW50YXRpb25OYW1lOm51bGwsbmFja0NvdW50OnAscGxpQ291bnQ6XyxydHQ6bnVsbCxzYW1wbGluZ1JhdGU6LTEsZ29vZ0ZpcnNSZWNlaXZlZDotMSxnb29nUmVuZGVyRGVsYXlNczotMSx0cmFja1N0YXRlOi0xfSl9aWYoXCJjYW5kaWRhdGUtcGFpclwiPT09YyYmXCJzdWNjZWVkZWRcIj09PWEuc3RhdGUpe2NvbnN0IHQ9ZVthLmxvY2FsQ2FuZGlkYXRlSWRdLHthZGRyZXNzOm8scG9ydDpjfT10LGQ9ZVthLnJlbW90ZUNhbmRpZGF0ZUlkXSx7YWRkcmVzczp1LHBvcnQ6bCxwcm90b2NvbDpofT1kO3IuaWNlQ2FuZGlkYXRlUGFpcj17SVA6byxwb3J0OmMsbmV0d29ya1R5cGU6bnVsbCxyZW1vdGVJUDp1LHJlbW90ZVBvcnQ6bCxwcm90b2NvbDpoLGJpdHJhdGVSZWN2OnMsYml0cmF0ZVNlbmQ6bixydHQ6bnVsbCxhdmFpbGFibGVPdXRnb2luZ0JpdHJhdGU6bnVsbCxhdmFpbGFibGVJbmNvbWluZ0JpdHJhdGU6bnVsbCx0b3RhbFBhY2tldHNMb3N0Oml9fX1yZXR1cm4gci5pY2VDYW5kaWRhdGVQYWlyJiYoci5pY2VDYW5kaWRhdGVQYWlyLmJpdHJhdGVTZW5kPW4pLHIuaWNlQ2FuZGlkYXRlUGFpciYmKHIuaWNlQ2FuZGlkYXRlUGFpci5iaXRyYXRlUmVjdj1zKSxyfWdldEF1ZGlvTGV2ZWxMaXN0KGUpe2NvbnN0IHQ9W107Zm9yKGNvbnN0IHIgaW4gZSl7Y29uc3QgaT1lW3JdLG49aS50eXBlO2lmKFwib3V0Ym91bmQtcnRwXCI9PT1uKXtpZihcInVuaWZpZWQtcGxhblwiPT09dGhpcy5fc2RwU2VtYW50aWNzJiYhdGhpcy5pc1ZhbGlkU2VuZGVyKGkpKWNvbnRpbnVlO2NvbnN0e2tpbmQ6ZX09aTtpZihcInZpZGVvXCI9PT1lKWNvbnRpbnVlO2NvbnN0IHI9dGhpcy5nZXRSZXNvdXJjZUlkQnlQYXJzZVNkcChpKTt0LnB1c2goe3RyYWNrSWQ6cixhdWRpb0xldmVsOm51bGx9KX1pZihcImluYm91bmQtcnRwXCI9PT1uKXtpZihcInVuaWZpZWQtcGxhblwiPT09dGhpcy5fc2RwU2VtYW50aWNzJiYhdGhpcy5pc1ZhbGlkUmVjZWl2ZXIoaSkpY29udGludWU7Y29uc3R7a2luZDplfT1pO2lmKFwidmlkZW9cIj09PWUpY29udGludWU7Y29uc3Qgcj10aGlzLmdldFJlc291cmNlSWRCeVBhcnNlU2RwKGkpO3QucHVzaCh7dHJhY2tJZDpyLGF1ZGlvTGV2ZWw6bnVsbH0pfX1yZXR1cm4gdH19Y2xhc3MgRnQgZXh0ZW5kcyBWdHtmb3JtYXRSQ1JUQ1N0YXRlUmVwb3J0KGUpe2NvbnN0IHQ9e3NlbmRlcnM6W10scmVjZWl2ZXJzOltdfSxyPU1hdGguZmxvb3IoZS5SVENQZWVyQ29ubmVjdGlvbi50aW1lc3RhbXApO3QudGltZXN0YW1wPXI7Y29uc3QgaT1PYmplY3Qua2V5cyhlKTtsZXQgbj0wLHM9MDtpLmZpbHRlcigoZT0+L15SVENPdXRib3VuZFJUUChWaWRlb3xBdWRpbylTdHJlYW1fLy50ZXN0KGUpKSkuZm9yRWFjaCgoaT0+e2NvbnN0IG49ZVtpXTtpZihcInVuaWZpZWQtcGxhblwiPT09dGhpcy5fc2RwU2VtYW50aWNzJiYhdGhpcy5pc1ZhbGlkU2VuZGVyKG4pKXJldHVybjtjb25zdCBvPXRoaXMuZ2V0UmVzb3VyY2VJZEJ5UGFyc2VTZHAobikse21lZGlhVHlwZTphLHRyYW5zcG9ydElkOmMscmVtb3RlSWQ6ZCxwYWNrZXRzU2VudDp1LGJ5dGVzU2VudDpsLHRyYWNrSWQ6aCxlbmNvZGVySW1wbGVtZW50YXRpb246cCxwbGlDb3VudDpfLG5hY2tDb3VudDptLGZpckNvdW50OmZ9PW47aWYoIWgpcmV0dXJuO2NvbnN0e2F1ZGlvTGV2ZWw6dixmcmFtZUhlaWdodDpSLGZyYW1lV2lkdGg6Z309ZVtoXTtsZXQgUz10aGlzLnVwZGF0ZUJ5dGVzU2VudChvLGwscik7UzwwJiYoUz0wKSxzKz1TLHQuc2VuZGVycy5wdXNoKHt0cmFja0lkOm8sa2luZDphLHBhY2tldHNMb3N0UmF0ZTpudWxsLHJlbW90ZVJlc291cmNlOiExLGF1ZGlvTGV2ZWw6dnx8MD09PXY/d3Qodik6bnVsbCxmcmFtZVdpZHRoOmcsZnJhbWVIZWlnaHQ6UixmcmFtZVJhdGU6bnVsbCxiaXRyYXRlOlMsaml0dGVyOm51bGwscnR0Om51bGwsZW5jb2RlckltcGxlbWVudGF0aW9uOnAscGxpQ291bnQ6XyxuYWNrQ291bnQ6bSxnb29nRmlyc1NlbnQ6LTEsc2FtcGxpbmdSYXRlOi0xLGdvb2dSZW5kZXJEZWxheU1zOi0xLHRyYWNrU3RhdGU6LTF9KX0pKTtsZXQgbz0wO2kuZmlsdGVyKChlPT4vXlJUQ0luYm91bmRSVFAoVmlkZW98QXVkaW8pU3RyZWFtXy8udGVzdChlKSkpLmZvckVhY2goKGk9Pntjb25zdCBzPWVbaV07aWYoXCJ1bmlmaWVkLXBsYW5cIj09PXRoaXMuX3NkcFNlbWFudGljcyYmIXRoaXMuaXNWYWxpZFJlY2VpdmVyKHMpKXJldHVybjtjb25zdHt0cmFja0lkOmEscGFja2V0c0xvc3Q6YyxwYWNrZXRzUmVjZWl2ZWQ6ZCxqaXR0ZXI6dSxieXRlc1JlY2VpdmVkOmwsbWVkaWFUeXBlOmgsbmFja0NvdW50OnAscGxpQ291bnQ6X309cyxtPXRoaXMuZ2V0UmVzb3VyY2VJZEJ5UGFyc2VTZHAocyk7aWYoIWEpcmV0dXJuO2NvbnN0e2ZyYW1lSGVpZ2h0OmYsZnJhbWVXaWR0aDp2LGF1ZGlvTGV2ZWw6Un09ZVthXTtuKz1jO2NvbnN0IGc9dGhpcy51cGRhdGVSZWNlaXZlclBhY2tldHNMb3N0KG0sYyxkKTtsZXQgUz10aGlzLnVwZGF0ZUJ5dGVzUmVjdihtLGwscik7UzwwJiYoUz0wKSxvKz1TLHQucmVjZWl2ZXJzLnB1c2goe3RyYWNrSWQ6bSxraW5kOmgscGFja2V0c0xvc3RSYXRlOmcscmVtb3RlUmVzb3VyY2U6ITAsYXVkaW9MZXZlbDpSfHwwPT09Uj93dChSKTpudWxsLGZyYW1lV2lkdGg6dixmcmFtZUhlaWdodDpmLGZyYW1lUmF0ZTpudWxsLGJpdHJhdGU6UyxqaXR0ZXI6dSxjb2RlY0ltcGxlbWVudGF0aW9uTmFtZTpudWxsLG5hY2tDb3VudDpwLHBsaUNvdW50Ol8scnR0Om51bGwsc2FtcGxpbmdSYXRlOi0xLGdvb2dGaXJzUmVjZWl2ZWQ6LTEsZ29vZ1JlbmRlckRlbGF5TXM6LTEsdHJhY2tTdGF0ZTotMX0pfSkpO2NvbnN0IGE9aS5maWx0ZXIoKGU9Pi9eUlRDVHJhbnNwb3J0Xy8udGVzdChlKSkpWzBdO2lmKGEpe2NvbnN0IHI9ZVthXSx7c2VsZWN0ZWRDYW5kaWRhdGVQYWlySWQ6aX09cjtpZihpKXtjb25zdCByPWVbaV0se2F2YWlsYWJsZU91dGdvaW5nQml0cmF0ZTphLGF2YWlsYWJsZUluY29taW5nQml0cmF0ZTpjLGN1cnJlbnRSb3VuZFRyaXBUaW1lOmQsbG9jYWxDYW5kaWRhdGVJZDp1LHJlbW90ZUNhbmRpZGF0ZUlkOmx9PXIsaD1lW3VdLHthZGRyZXNzOnAscG9ydDpffT1oLG09ZVtsXSx7YWRkcmVzczpmLHBvcnQ6dixwcm90b2NvbDpSfT1tO3QuaWNlQ2FuZGlkYXRlUGFpcj17SVA6cHx8bnVsbCxwb3J0Ol8sbmV0d29ya1R5cGU6bnVsbCxyZW1vdGVJUDpmLHJlbW90ZVBvcnQ6dixwcm90b2NvbDpSLGJpdHJhdGVSZWN2Om8sYml0cmF0ZVNlbmQ6cyxydHQ6MWUzKmQsYXZhaWxhYmxlT3V0Z29pbmdCaXRyYXRlOmEsYXZhaWxhYmxlSW5jb21pbmdCaXRyYXRlOmMsdG90YWxQYWNrZXRzTG9zdDpufSx0LnJlY2VpdmVycy5mb3JFYWNoKChlPT57ZS5ydHQ9ZH0pKX19cmV0dXJuIHR9Z2V0QXVkaW9MZXZlbExpc3QoZSl7Y29uc3QgdD1bXSxyPU9iamVjdC5rZXlzKGUpO3IuZmlsdGVyKChlPT4vXlJUQ091dGJvdW5kUlRQKFZpZGVvfEF1ZGlvKVN0cmVhbV8vLnRlc3QoZSkpKS5mb3JFYWNoKChyPT57Y29uc3QgaT1lW3JdO2lmKFwidW5pZmllZC1wbGFuXCI9PT10aGlzLl9zZHBTZW1hbnRpY3MmJiF0aGlzLmlzVmFsaWRTZW5kZXIoaSkpcmV0dXJuO2NvbnN0e3RyYWNrSWQ6bixtZWRpYVR5cGU6c309aTtpZihcInZpZGVvXCI9PT1zKXJldHVybjtjb25zdCBvPXRoaXMuZ2V0UmVzb3VyY2VJZEJ5UGFyc2VTZHAoaSksYT1lW25dO3QucHVzaCh7dHJhY2tJZDpvLGF1ZGlvTGV2ZWw6YXx8MD09PWE/d3QoYSk6bnVsbH0pfSkpO3JldHVybiByLmZpbHRlcigoZT0+L15SVENJbmJvdW5kUlRQKFZpZGVvfEF1ZGlvKVN0cmVhbV8vLnRlc3QoZSkpKS5mb3JFYWNoKChyPT57Y29uc3QgaT1lW3JdO2lmKFwidW5pZmllZC1wbGFuXCI9PT10aGlzLl9zZHBTZW1hbnRpY3MmJiF0aGlzLmlzVmFsaWRSZWNlaXZlcihpKSlyZXR1cm47Y29uc3R7dHJhY2tJZDpuLG1lZGlhVHlwZTpzfT1pO2lmKCFufHxcInZpZGVvXCI9PT1zKXJldHVybjtjb25zdHthdWRpb0xldmVsOm99PWVbbl0sYT10aGlzLmdldFJlc291cmNlSWRCeVBhcnNlU2RwKGkpO3QucHVzaCh7dHJhY2tJZDphLGF1ZGlvTGV2ZWw6b3x8MD09PW8/d3Qobyk6bnVsbH0pfSkpLHR9fWNsYXNzIEt0e2NvbnN0cnVjdG9yKGUpe3RoaXMuX3BlZXI9ZSx0aGlzLl9vdXRib3VuZFN0cmVhbXM9e319c3RhdGljIHNldFNkcFNlbWFudGljcyhlKXtjb25zdHticm93c2VyOnQsdmVyc2lvbjpyLHN1cHBvcnRzVW5pZmllZFBsYW46aX09eXQ7aT8vY2hyb21lL2kudGVzdCh0KT90aGlzLl9zZHBTZW1hbnRpY3M9cj45Mj9cInVuaWZpZWQtcGxhblwiOnI8NzI/XCJwbGFuLWJcIjplOi9maXJlZm94L2kudGVzdCh0KT90aGlzLl9zZHBTZW1hbnRpY3M9XCJ1bmlmaWVkLXBsYW5cIjovc2FmYXJpL2kudGVzdCh0KT90aGlzLl9zZHBTZW1hbnRpY3M9cjwxMj9cInBsYW4tYlwiOlwidW5pZmllZC1wbGFuXCI6dGhpcy5fc2RwU2VtYW50aWNzPVwidW5pZmllZC1wbGFuXCI6dGhpcy5fc2RwU2VtYW50aWNzPVwicGxhbi1iXCJ9c3RhdGljIGdldFNkcFNlbWFudGljcygpe3JldHVybiBLdC5fc2RwU2VtYW50aWNzfWdldE91dGJvdW5kVmlkZW9JbmZvKCl7Y29uc3QgZT1bXTtmb3IoY29uc3QgdCBpbiB0aGlzLl9vdXRib3VuZFN0cmVhbXMpe2NvbnN0IHI9dGhpcy5fb3V0Ym91bmRTdHJlYW1zW3RdLmdldFZpZGVvVHJhY2tzKClbMF07aWYoIXIpY29udGludWU7Y29uc3QgaT0vX3RpbnkkLy50ZXN0KHQpLHt3aWR0aDpuLGhlaWdodDpzfT1wdChyKTtlLnB1c2goe3RyYWNrSWQ6ci5pZCxzaW11bGNhc3Q6aT9NdC5USU5ZOk10Lk5PUk1BTCxyZXNvbHV0aW9uOmAke259eCR7c31gfSl9cmV0dXJuIGV9c2V0UmVtb3RlQW5zd2VyKGUpe3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7ZT1lLnJlcGxhY2UoL1xccytcXHJcXG4vZyxcIlxcclxcblwiKTt0cnl7eWllbGQgdGhpcy5fcGVlci5zZXRSZW1vdGVEZXNjcmlwdGlvbih7dHlwZTpcImFuc3dlclwiLHNkcDplfSl9Y2F0Y2goZSl7cmV0dXJuIEMuZXJyb3IoZSksVC5TRVRfUkVNT1RFX0RFU0NSSVBUSU9OX0ZBSUxFRH1yZXR1cm4gVC5TVUNDRVNTfSkpfWdldFN0YXRQYXJzcihlLHQpe3JldHVybi9jaHJvbWUvaS50ZXN0KHl0LmJyb3dzZXIpP25ldyBCdChlLHQpOi9GaXJlZm94L2kudGVzdCh5dC5icm93c2VyKT9uZXcgSHQoZSx0KTovU2FmYXJpL2kudGVzdCh5dC5icm93c2VyKT9uZXcgRnQoZSx0KTpudWxsfX1jbGFzcyBHdCBleHRlbmRzIEt0e2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLnNlbmRlcnM9e30sdGhpcy5fbG9jYWxUcmFja3M9W119YWRkTG9jYWxUcmFjayhlKXt0aGlzLl9sb2NhbFRyYWNrcy5pbmNsdWRlcyhlKXx8dGhpcy5fbG9jYWxUcmFja3MucHVzaChlKTtjb25zdCB0PWUuZ2V0U3RyZWFtSWQoKSxyPWUuX19pbm5lckdldE1lZGlhU3RyZWFtVHJhY2soKSxpPXRoaXMuX291dGJvdW5kU3RyZWFtc1t0XXx8KHRoaXMuX291dGJvdW5kU3RyZWFtc1t0XT1uZXcgTWVkaWFTdHJlYW0pO2kuZ2V0VHJhY2tzKCkuZm9yRWFjaCgoZT0+e2Uua2luZD09PXIua2luZCYmaS5yZW1vdmVUcmFjayhlKX0pKSxpLmFkZFRyYWNrKHIpO2NvbnN0IG49ZS5nZXRUcmFja0lkKCkscz10aGlzLnNlbmRlcnNbbl07cz9zLnJlcGxhY2VUcmFjayhyKTp0aGlzLnNlbmRlcnNbbl09dGhpcy5fcGVlci5hZGRUcmFjayhyLGkpfXJlbW92ZUxvY2FsVHJhY2soZSl7Y29uc3QgdD10aGlzLl9sb2NhbFRyYWNrcy5maW5kSW5kZXgoKHQ9PnQ9PT1lKSk7dD49MCYmdGhpcy5fbG9jYWxUcmFja3Muc3BsaWNlKHQsMSk7Y29uc3Qgcj1lLmdldFRyYWNrSWQoKSxpPXRoaXMuc2VuZGVyc1tyXTtpJiYoaS5yZXBsYWNlVHJhY2sobnVsbCksdGhpcy5fcGVlci5yZW1vdmVUcmFjayhpKSxkZWxldGUgdGhpcy5zZW5kZXJzW3JdKX11cGRhdGVTdWJSZW1vdGVUcmFja3MoZSl7fXVwZGF0ZVJlY3ZUcmFuc2NlaXZlck1hcChlLHQpe31zZXRCaXRyYXRlKGUsdCxyKXt0aGlzLl9tYXhCaXRyYXRlPWUsdGhpcy5fbWluQml0cmF0ZT10LHRoaXMuX3N0YXJ0Qml0cmF0ZT1yfHwuNyplfWNyZWF0ZU9mZmVyKGUpe3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3QgdD15aWVsZCB0aGlzLl9wZWVyLmNyZWF0ZU9mZmVyKHtpY2VSZXN0YXJ0OmUsb2ZmZXJUb1JlY2VpdmVBdWRpbzohMCxvZmZlclRvUmVjZWl2ZVZpZGVvOiEwfSk7Zm9yKGNvbnN0IGUgaW4gdGhpcy5fb3V0Ym91bmRTdHJlYW1zKXtjb25zdCByPXRoaXMuX291dGJvdW5kU3RyZWFtc1tlXS5pZDt0LnNkcD10LnNkcC5yZXBsYWNlKG5ldyBSZWdFeHAocixcImdcIiksZSl9cmV0dXJuIHlpZWxkIHRoaXMuX3BlZXIuc2V0TG9jYWxEZXNjcmlwdGlvbih0KSx7dHlwZTpcIm9mZmVyXCIsc2VtYW50aWNzOlwicGxhbi1iXCIsc2RwOnQuc2RwfX0pKX1zZXRSZW1vdGVBbnN3ZXIoZSl7bGV0IHQ9MCxyPTA7dGhpcy5fbG9jYWxUcmFja3MuZm9yRWFjaCgoZT0+e2NvbnN0e21pbjppLG1heDpufT1lLmdldEJpdHJhdGUoKTtyKz1pLHQrPW59KSksdD10aGlzLl9tYXhCaXRyYXRlJiZ0aGlzLl9tYXhCaXRyYXRlPjA/TWF0aC5taW4odCx0aGlzLl9tYXhCaXRyYXRlKTp0LHI9dGhpcy5fbWluQml0cmF0ZSYmdGhpcy5fbWluQml0cmF0ZT4wP01hdGgubWF4KHIsdGhpcy5fbWluQml0cmF0ZSk6cjtjb25zdCBpPXRoaXMuX3N0YXJ0Qml0cmF0ZXx8TWF0aC5yb3VuZCguNyp0KSxuPWBiPUFTOiR7dH1gO2U9ZS5yZXBsYWNlKC9bXFxyXFxuXSttPXZpZGVvW15cXHJcXG5dKy8sKGU9PmAke2V9XFxyXFxuJHtufWApKTtjb25zdCBzPVtgO3gtZ29vZ2xlLW1pbi1iaXRyYXRlPSR7cn1gLGA7eC1nb29nbGUtbWF4LWJpdHJhdGU9JHt0fWAsYDt4LWdvb2dsZS1zdGFydC1iaXRyYXRlPSR7aX1gXS5qb2luKFwiXCIpO3JldHVybiBlPWUucmVwbGFjZSgvW1xcclxcbl0rW15cXHJcXG5dK3Byb2ZpbGUtbGV2ZWwtaWRbXlxcclxcbl0rL2csKGU9PmUrcykpLHN1cGVyLnNldFJlbW90ZUFuc3dlcihlKX19Y2xhc3MgSnQgZXh0ZW5kcyBLdHtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5fc2VuZFRyYW5zY2VpdmVyPXt9LHRoaXMuX2xvY2FsVHJhY2tzPXt9LHRoaXMuX3JlY3ZBdWRpbz1bXSx0aGlzLl9yZWN2VmlkZW89W10sdGhpcy5fcmVjdlRyYW5zY2VpdmVyPXt9LHRoaXMuX3N1YmVkVHJhY2tzPVtdfXNldEJpdHJhdGUoZSx0LHIpe0Mud2FybihcInRoZSBpbnRlcmZhY2UgbmFtZWQgYHNldEJpdHJhdGVgIGlzIGludmFsaWQgd2hpbGUgc2RwU2VtYW50aWNzIHZhbHVlIGlzIGB1bmlmaWVkLXBsYW5gXCIpfWFkZExvY2FsVHJhY2soZSl7Y29uc3QgdD1lLmdldFRyYWNrSWQoKSxyPWUuZ2V0U3RyZWFtSWQoKSxpPWUuX19pbm5lckdldE1lZGlhU3RyZWFtVHJhY2soKTt0aGlzLl9sb2NhbFRyYWNrc1t0XT1lO2NvbnN0IG49dGhpcy5fb3V0Ym91bmRTdHJlYW1zW3JdfHwodGhpcy5fb3V0Ym91bmRTdHJlYW1zW3JdPW5ldyBNZWRpYVN0cmVhbSk7bi5nZXRUcmFja3MoKS5mb3JFYWNoKChlPT57ZS5raW5kPT09aS5raW5kJiZuLnJlbW92ZVRyYWNrKGUpfSkpLG4uYWRkVHJhY2soaSk7Y29uc3Qgcz10aGlzLl9zZW5kVHJhbnNjZWl2ZXJbdF07cz8ocy5zZW5kZXIucmVwbGFjZVRyYWNrKGkpLHMuZGlyZWN0aW9uPVwic2VuZG9ubHlcIik6dGhpcy5fc2VuZFRyYW5zY2VpdmVyW3RdPXRoaXMuX3BlZXIuYWRkVHJhbnNjZWl2ZXIoaSx7ZGlyZWN0aW9uOlwic2VuZG9ubHlcIixzdHJlYW1zOltuXX0pfXJlbW92ZUxvY2FsVHJhY2soZSl7Y29uc3QgdD1lLmdldFRyYWNrSWQoKSxyPWUuZ2V0U3RyZWFtSWQoKTtlLl9faW5uZXJHZXRNZWRpYVN0cmVhbVRyYWNrKCksZGVsZXRlIHRoaXMuX2xvY2FsVHJhY2tzW3RdO2NvbnN0IGk9dGhpcy5fc2VuZFRyYW5zY2VpdmVyW3RdO2lmKCFpKXJldHVybjtpLmRpcmVjdGlvbj1cImluYWN0aXZlXCIsdGhpcy5fcGVlci5yZW1vdmVUcmFjayhpLnNlbmRlciksaS5zZW5kZXIucmVwbGFjZVRyYWNrKG51bGwpO2NvbnN0IG49dGhpcy5fb3V0Ym91bmRTdHJlYW1zW3JdOyhlLmlzQXVkaW9UcmFjaygpP24uZ2V0QXVkaW9UcmFja3MoKTpuLmdldFZpZGVvVHJhY2tzKCkpLmZvckVhY2goKGU9Pm4ucmVtb3ZlVHJhY2soZSkpKTtjb25zdCBzPXRoaXMuX3NlbmRUcmFuc2NlaXZlcltgJHt0fV90aW55YF07aWYoIXN8fFwiaW5hY3RpdmVcIj09PXMuZGlyZWN0aW9uKXJldHVybjtzLmRpcmVjdGlvbj1cImluYWN0aXZlXCI7Y29uc3Qgbz1zLnNlbmRlcixhPW8udHJhY2s7dGhpcy5fcGVlci5yZW1vdmVUcmFjayhvKSxvLnJlcGxhY2VUcmFjayhudWxsKTt0aGlzLl9vdXRib3VuZFN0cmVhbXNbYCR7cn1fdGlueWBdLnJlbW92ZVRyYWNrKGEpLGEuc3RvcCgpfXVwZGF0ZVJlY3ZUcmFuc2NlaXZlck1hcChlLHQpe2NvbnN0e21lZGlhVHlwZTpyfT1mdChlKTt0aGlzLl9yZWN2VHJhbnNjZWl2ZXJbZV09dDtjb25zdCBpPXI9PT1GZS5BVURJT19PTkxZP3RoaXMuX3JlY3ZBdWRpbzp0aGlzLl9yZWN2VmlkZW8sbj1pLmZpbmRJbmRleCgoZT0+ZT09PXQpKTtuPj0wJiZpLnNwbGljZShuLDEpfXVwZGF0ZVN1YlJlbW90ZVRyYWNrcyhlKXtjb25zdCB0PWUuc2xpY2UoKSxyPXRoaXMuX3N1YmVkVHJhY2tzLnNsaWNlKCk7dGhpcy5fc3ViZWRUcmFja3M9ZS5zbGljZSgpO2ZvcihsZXQgZT10Lmxlbmd0aC0xO2U+PTA7ZS09MSl7Y29uc3QgaT10W2VdLG49ci5maW5kSW5kZXgoKGU9PmU9PT1pKSk7bj49MCYmKHQuc3BsaWNlKGUsMSksci5zcGxpY2UobiwxKSl9ci5sZW5ndGgmJnIuZm9yRWFjaCgoZT0+e2NvbnN0IHQ9ZS5nZXRUcmFja0lkKCk7ZS5fX2lubmVyU2V0TWVkaWFTdHJlYW1UcmFjayh2b2lkIDApO2NvbnN0IHI9dGhpcy5fcmVjdlRyYW5zY2VpdmVyW3RdO3ImJihyLmRpcmVjdGlvbj1cImluYWN0aXZlXCIpfSkpO2NvbnN0IGk9e2F1ZGlvOjAsdmlkZW86MH07dC5sZW5ndGgmJnQuZm9yRWFjaCgoZT0+e2NvbnN0IHQ9ZS5pc0F1ZGlvVHJhY2soKT9cImF1ZGlvXCI6XCJ2aWRlb1wiLHI9dGhpcy5fcmVjdlRyYW5zY2VpdmVyW2UuZ2V0VHJhY2tJZCgpXTtyP3IuZGlyZWN0aW9uPVwicmVjdm9ubHlcIjppW3RdKz0xfSkpO2ZvcihsZXQgZT10aGlzLl9yZWN2QXVkaW8ubGVuZ3RoO2U8aS5hdWRpbztlKz0xKXRoaXMuX3JlY3ZBdWRpby5wdXNoKHRoaXMuX3BlZXIuYWRkVHJhbnNjZWl2ZXIoXCJhdWRpb1wiLHtkaXJlY3Rpb246XCJyZWN2b25seVwifSkpO2ZvcihsZXQgZT10aGlzLl9yZWN2VmlkZW8ubGVuZ3RoO2U8aS52aWRlbztlKz0xKXRoaXMuX3JlY3ZWaWRlby5wdXNoKHRoaXMuX3BlZXIuYWRkVHJhbnNjZWl2ZXIoXCJ2aWRlb1wiLHtkaXJlY3Rpb246XCJyZWN2b25seVwifSkpfWNyZWF0ZU9mZmVyKGUpe3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3QgdD15aWVsZCB0aGlzLl9wZWVyLmNyZWF0ZU9mZmVyKHtpY2VSZXN0YXJ0OmV9KTtsZXQgcj10LnNkcDtmb3IoY29uc3QgZSBpbiB0aGlzLl9vdXRib3VuZFN0cmVhbXMpe2NvbnN0IHQ9dGhpcy5fb3V0Ym91bmRTdHJlYW1zW2VdLmlkO3I9ci5yZXBsYWNlKG5ldyBSZWdFeHAodCxcImdcIiksZSl9cmV0dXJuIHI9KGU9PmUuc3BsaXQoL1xcclxcbig/PW09KS8pLm1hcCgoZT0+KGU9Pi9hPShyZWN2b25seXxpbmFjdGl2ZSkvLnRlc3QoZSk/ZS5yZXBsYWNlKC9cXHJcXG5hPShzc3JjfG1zaWQpW15cXHJcXG5dKy9nLFwiXCIpOmUpKGUpKSkuam9pbihcIlxcclxcblwiKSkocikscj1yLnJlcGxhY2UoL2E9aWNlLW9wdGlvbnM6dHJpY2tsZS9nLFwiYT1pY2Utb3B0aW9uczp0cmlja2xlXFxyXFxuYT1pY2Utb3B0aW9uczpyZW5vbWluYXRpb25cIiksdC5zZHA9cix5aWVsZCB0aGlzLl9wZWVyLnNldExvY2FsRGVzY3JpcHRpb24odCkse3R5cGU6XCJvZmZlclwiLHNlbWFudGljczpcInVuaWZpZWQtcGxhblwiLHNkcDpyfX0pKX1zZXRSZW1vdGVBbnN3ZXIoZSl7ZT1lLnNwbGl0KC9cXHJcXG4oPz1tPSkvKS5tYXAoKGU9Pnt2YXIgdDtjb25zdCByPWUubWF0Y2goL2E9bWlkOlteXFxzXSsvKTtpZighcilyZXR1cm4gZTtjb25zdCBpPXJbMF0ucmVwbGFjZShcImE9bWlkOlwiLFwiXCIpO2xldCBuPVwiXCI7Zm9yKGNvbnN0IGUgaW4gdGhpcy5fc2VuZFRyYW5zY2VpdmVyKXtpZih0aGlzLl9zZW5kVHJhbnNjZWl2ZXJbZV0ubWlkPT09aSl7bj1lO2JyZWFrfX1pZighbilyZXR1cm4gZTtjb25zdCBzPW51bGw9PT0odD10aGlzLl9sb2NhbFRyYWNrc1tuXSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuZ2V0Qml0cmF0ZSgpO2lmKCFzKXJldHVybiBlO2NvbnN0e21heDpvLG1pbjphfT1zLGM9byYmbz4wP3Muc3RhcnR8fC43Km86MCxkPVtdO2lmKG8mJm8+MCYmZC5wdXNoKGA7eC1nb29nbGUtbWF4LWJpdHJhdGU9JHtvfWApLGEmJmE+MCYmZC5wdXNoKGA7eC1nb29nbGUtbWluLWJpdHJhdGU9JHthfWApLGM+MCYmZC5wdXNoKGA7eC1nb29nbGUtc3RhcnQtYml0cmF0ZT0ke2N9YCksMD09PWQubGVuZ3RoKXJldHVybiBlO2NvbnN0IHU9ZC5qb2luKFwiXCIpO3JldHVybiBlLnJlcGxhY2UoL1tcXHJcXG5dK1teXFxyXFxuXStwcm9maWxlLWxldmVsLWlkW15cXHJcXG5dKy9nLChlPT5lK3UpKX0pKS5qb2luKFwiXFxyXFxuXCIpO2NvbnN0IHQ9L1tcXHJcXG5dK1xcclxcbltcXHJcXG5dKy9nO3JldHVybiB0LnRlc3QoZSkmJihDLndhcm4oYGFuc3dlciBzZHAgaW52YWxpZCAtPiAke0pTT04uc3RyaW5naWZ5KGUpfWApLGU9ZS5yZXBsYWNlKHQsXCJcXHJcXG5cIikpLHN1cGVyLnNldFJlbW90ZUFuc3dlcihlKX19Y2xhc3MgV3QgZXh0ZW5kcyBfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkV2ZW50RW1pdHRlcntjb25zdHJ1Y3RvcihlLHQpe3N1cGVyKCksdGhpcy5fcmVUcnlFeGNoYW5nZT1lLHRoaXMuX3BvbGFyaXNSZXBvcnQ9dCx0aGlzLnB1YkxvY2FsVHJhY2tzPXt9LHRoaXMuX3JlVHJ5RXhjaGFuZ2VUaW1lcj1udWxsLHRoaXMuX3JlcG9ydFN0YXRzVGltZXI9bnVsbCx0aGlzLl9yZXBvcnRMaXN0ZW5lcj1udWxsO2NvbnN0IHI9S3QuZ2V0U2RwU2VtYW50aWNzKCksaT10aGlzLl9ydGNQZWVyQ29ubj1uZXcgUlRDUGVlckNvbm5lY3Rpb24oe3NkcFNlbWFudGljczpyfSk7dGhpcy5fc2RwU3RyYXRlZ3k9XCJwbGFuLWJcIj09PXI/bmV3IEd0KGkpOm5ldyBKdChpKSx0aGlzLl9ydGNQZWVyQ29ubi5vbmljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZT10aGlzLl9vbklDRUNvbm5lY3Rpb25TdGF0ZUNoYW5nZS5iaW5kKHRoaXMpLHRoaXMuX3J0Y1BlZXJDb25uLm9uY29ubmVjdGlvbnN0YXRlY2hhbmdlPXRoaXMuX29uQ29ubmVjdGlvblN0YXRlQ2hhbmdlLmJpbmQodGhpcyksdGhpcy5fcnRjUGVlckNvbm4ub250cmFjaz10aGlzLl9vblRyYWNrUmVhZHkuYmluZCh0aGlzKSx0aGlzLnJlcG9ydFBhcnNlcj10aGlzLl9zZHBTdHJhdGVneS5nZXRTdGF0UGFyc3IodGhpcy5fcnRjUGVlckNvbm4scil9Z2V0TG9jYWxUcmFja3MoKXtyZXR1cm4gT2JqZWN0LnZhbHVlcyh0aGlzLnB1YkxvY2FsVHJhY2tzKX1fb25Db25uZWN0aW9uU3RhdGVDaGFuZ2UoKXtDLmluZm8oYG9uY29ubmVjdGlvbnN0YXRlY2hhbmdlIC0+ICR7dGhpcy5fcnRjUGVlckNvbm4uY29ubmVjdGlvblN0YXRlfWApfV9vbklDRUNvbm5lY3Rpb25TdGF0ZUNoYW5nZSgpe3ZhciBlLHQ7Qy5pbmZvKGBvbmljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZSAtPiAke3RoaXMuX3J0Y1BlZXJDb25uLmljZUNvbm5lY3Rpb25TdGF0ZX1gKSxcImNvbm5lY3RlZFwiPT09dGhpcy5fcnRjUGVlckNvbm4uaWNlQ29ubmVjdGlvblN0YXRlJiYodGhpcy5fcmVwb3J0U3RhdHNUaW1lciYmY2xlYXJJbnRlcnZhbCh0aGlzLl9yZXBvcnRTdGF0c1RpbWVyKSx0aGlzLl9yZXBvcnRTdGF0c1RpbWVyPXNldEludGVydmFsKHRoaXMuX3JlcG9ydEhhbmRsZS5iaW5kKHRoaXMpLDFlMykpLFwiZmFpbGVkXCIhPT10aGlzLl9ydGNQZWVyQ29ubi5pY2VDb25uZWN0aW9uU3RhdGUmJlwiZGlzY29ubmVjdGVkXCIhPT10aGlzLl9ydGNQZWVyQ29ubi5pY2VDb25uZWN0aW9uU3RhdGV8fChDLndhcm4oXCJpY2Vjb25lbmN0aW9uIHN0YXRlIGlzIGBmYWlsZWRgLCBleGNoYW5nZSBTRFAgdG8gdHJ5IGFnYWluLlwiKSx0aGlzLl9yZVRyeUV4Y2hhbmdlKCksdGhpcy5fcmVUcnlFeGNoYW5nZVRpbWVyPXNldEludGVydmFsKHRoaXMuX3JlVHJ5RXhjaGFuZ2UsMTVlMykpO3RyeXtudWxsPT09KHQ9bnVsbD09PShlPXRoaXMuX3JlcG9ydExpc3RlbmVyKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5vbklDRUNvbm5lY3Rpb25TdGF0ZUNoYW5nZSl8fHZvaWQgMD09PXR8fHQuY2FsbChlLHRoaXMuX3J0Y1BlZXJDb25uLmljZUNvbm5lY3Rpb25TdGF0ZSl9Y2F0Y2goZSl7Qy5lcnJvcihcIm9uSUNFQ29ubmVjdGlvblN0YXRlQ2hhbmdlIGVycm9yXCIsZSl9fV9vblRyYWNrUmVhZHkoZSl7aWYoIWUuc3RyZWFtcy5sZW5ndGgpcmV0dXJuO2NvbnN0IHQ9W2Uuc3RyZWFtc1swXS5pZCxcImF1ZGlvXCI9PT1lLnJlY2VpdmVyLnRyYWNrLmtpbmQ/RmUuQVVESU9fT05MWTpGZS5WSURFT19PTkxZXS5qb2luKFwiX1wiKTt0aGlzLl91cGRhdGVSZWN2VHJhbnNjZWl2ZXJNYXAodCxlLnRyYW5zY2VpdmVyKSx0aGlzLmVtaXQoV3QuX19JTk5FUl9FVkVOVF9UUkFDS19SRUFEWV9fLGUpfXNldEJpdHJhdGUoZSx0LHIpe3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7dGhpcy5fc2RwU3RyYXRlZ3kuc2V0Qml0cmF0ZShlLHQscil9KSl9Y3JlYXRlT2ZmZXIoZSl7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCB0PXlpZWxkIHRoaXMuX3NkcFN0cmF0ZWd5LmNyZWF0ZU9mZmVyKGUpO3JldHVybiBDLmRlYnVnKGBvZmZlciAtPiAke0pTT04uc3RyaW5naWZ5KHQuc2RwKX1gKSx0fSkpfXNldFJlbW90ZUFuc3dlcihlKXtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiBDLmRlYnVnKGBhbnN3ZXIgLT4gJHtKU09OLnN0cmluZ2lmeShlKX1gKSx0aGlzLl9zZHBTdHJhdGVneS5zZXRSZW1vdGVBbnN3ZXIoZSl9KSl9Z2V0TG9jYWxUcmFjayhlKXtyZXR1cm4gdGhpcy5wdWJMb2NhbFRyYWNrc1tlXXx8bnVsbH1hZGRMb2NhbFRyYWNrKGUpe3RoaXMucHViTG9jYWxUcmFja3NbZS5nZXRUcmFja0lkKCldPWUsdGhpcy5fc2RwU3RyYXRlZ3kuYWRkTG9jYWxUcmFjayhlKSxlLm9mZih6ZS5fX0lOTkVSX0VWRU5UX01VVEVEX0NIQU5HRV9fLHRoaXMuX29uTG9jYWxUcmFja011dGVkLHRoaXMpLGUub2ZmKHplLl9fSU5ORVJfRVZFTlRfREVTVFJPWV9fLHRoaXMuX29uTG9jYWxUcmFja0Rlc3Ryb2llZCx0aGlzKSxlLm9uKHplLl9fSU5ORVJfRVZFTlRfTVVURURfQ0hBTkdFX18sdGhpcy5fb25Mb2NhbFRyYWNrTXV0ZWQsdGhpcyksZS5vbih6ZS5fX0lOTkVSX0VWRU5UX0RFU1RST1lfXyx0aGlzLl9vbkxvY2FsVHJhY2tEZXN0cm9pZWQsdGhpcyl9cmVtb3ZlTG9jYWxUcmFja0J5SWQoZSl7Y29uc3QgdD10aGlzLmdldExvY2FsVHJhY2soZSk7dCYmdGhpcy5yZW1vdmVMb2NhbFRyYWNrKHQpfXJlbW92ZUFsbExvY2FsVHJhY2soKXtPYmplY3Qua2V5cyh0aGlzLnB1YkxvY2FsVHJhY2tzKS5mb3JFYWNoKChlPT57L190aW55JC8udGVzdChlKXx8dGhpcy5yZW1vdmVMb2NhbFRyYWNrQnlJZChlKX0pKX1yZW1vdmVMb2NhbFRyYWNrKGUpe2NvbnN0IHQ9ZS5nZXRUcmFja0lkKCk7ZGVsZXRlIHRoaXMucHViTG9jYWxUcmFja3NbdF0sdGhpcy5fc2RwU3RyYXRlZ3kucmVtb3ZlTG9jYWxUcmFjayhlKSxlLl9faW5uZXJTZXRQdWJsaXNoZWQoITEpLGUub2ZmKHplLl9fSU5ORVJfRVZFTlRfTVVURURfQ0hBTkdFX18sdGhpcy5fb25Mb2NhbFRyYWNrTXV0ZWQsdGhpcyksZS5vZmYoemUuX19JTk5FUl9FVkVOVF9ERVNUUk9ZX18sdGhpcy5fb25Mb2NhbFRyYWNrRGVzdHJvaWVkLHRoaXMpO2NvbnN0IHI9YCR7dH1fdGlueWAsaT10aGlzLmdldExvY2FsVHJhY2socik7aSYmKHRoaXMuX3NkcFN0cmF0ZWd5LnJlbW92ZUxvY2FsVHJhY2soaSksZGVsZXRlIHRoaXMucHViTG9jYWxUcmFja3Nbcl0saS5kZXN0cm95KCkpfV91cGRhdGVSZWN2VHJhbnNjZWl2ZXJNYXAoZSx0KXt0aGlzLl9zZHBTdHJhdGVneS51cGRhdGVSZWN2VHJhbnNjZWl2ZXJNYXAoZSx0KX11cGRhdGVTdWJSZW1vdGVUcmFja3MoZSl7dGhpcy5fc2RwU3RyYXRlZ3kudXBkYXRlU3ViUmVtb3RlVHJhY2tzKGUpfWdldE91dGJvdW5kVmlkZW9JbmZvKCl7cmV0dXJuIHRoaXMuX3NkcFN0cmF0ZWd5LmdldE91dGJvdW5kVmlkZW9JbmZvKCl9X29uTG9jYWxUcmFja011dGVkKGUpe2NvbnN0IHQ9dGhpcy5nZXRMb2NhbFRyYWNrKGAke2UuZ2V0VHJhY2tJZCgpfV90aW55YCk7dCYmKHQuX19pbm5lckdldE1lZGlhU3RyZWFtVHJhY2soKS5lbmFibGVkPSFlLmlzTG9jYWxNdXRlZCgpKSx0aGlzLmVtaXQoemUuX19JTk5FUl9FVkVOVF9NVVRFRF9DSEFOR0VfXyxlKX1fb25Mb2NhbFRyYWNrRGVzdHJvaWVkKGUpe3RoaXMuZW1pdCh6ZS5fX0lOTkVSX0VWRU5UX0RFU1RST1lfXyxlKX1yZWdpc3RlclJlcG9ydExpc3RlbmVyKGUpe3RoaXMuX3JlcG9ydExpc3RlbmVyPWV9X2NyZWF0ZVJDUlRDU3RhdGVSZXBvcnQoZSl7Y29uc3R7dGltZXN0YW1wOnQsaWNlQ2FuZGlkYXRlUGFpcjpyLHNlbmRlcnM6aSxyZWNlaXZlcnM6bn09SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlKSk7bnVsbD09cnx8ZGVsZXRlIHIudG90YWxQYWNrZXRzTG9zdDtmb3IoY29uc3QgZSBpbiByKVB0KHJbZV0pJiZkZWxldGUgcltlXTtyZXR1cm57dGltZXN0YW1wOnQsaWNlQ2FuZGlkYXRlUGFpcjpyLHNlbmRlcnM6aS5tYXAoKGU9Pntjb25zdCB0PXt9O3JldHVybiBlLnRyYWNrSWQmJih0LnRyYWNrSWQ9ZS50cmFja0lkKSxlLmtpbmQmJih0LmtpbmQ9ZS5raW5kKSwoZS5wYWNrZXRzTG9zdFJhdGV8fDA9PT1lLnBhY2tldHNMb3N0UmF0ZSkmJih0LnBhY2tldHNMb3N0UmF0ZT1lLnBhY2tldHNMb3N0UmF0ZSksdC5yZW1vdGVSZXNvdXJjZT1lLnJlbW90ZVJlc291cmNlLChlLmF1ZGlvTGV2ZWx8fDA9PT1lLmF1ZGlvTGV2ZWwpJiYodC5hdWRpb0xldmVsPWUuYXVkaW9MZXZlbCksZS5mcmFtZVdpZHRoJiYodC5mcmFtZVdpZHRoPWUuZnJhbWVXaWR0aCksZS5mcmFtZUhlaWdodCYmKHQuZnJhbWVIZWlnaHQ9ZS5mcmFtZUhlaWdodCksZS5mcmFtZVJhdGUmJih0LmZyYW1lUmF0ZT1lLmZyYW1lUmF0ZSksKGUuYml0cmF0ZXx8MD09PWUuYml0cmF0ZSkmJih0LmJpdHJhdGU9ZS5iaXRyYXRlKSxlLmppdHRlciYmKHQuaml0dGVyPWUuaml0dGVyKSx0fSkpLHJlY2VpdmVyczpuLm1hcCgoZT0+e2NvbnN0IHQ9e307cmV0dXJuIGUudHJhY2tJZCYmKHQudHJhY2tJZD1lLnRyYWNrSWQpLGUua2luZCYmKHQua2luZD1lLmtpbmQpLChlLnBhY2tldHNMb3N0UmF0ZXx8MD09PWUucGFja2V0c0xvc3RSYXRlKSYmKHQucGFja2V0c0xvc3RSYXRlPWUucGFja2V0c0xvc3RSYXRlKSx0LnJlbW90ZVJlc291cmNlPWUucmVtb3RlUmVzb3VyY2UsKGUuYXVkaW9MZXZlbHx8MD09PWUuYXVkaW9MZXZlbCkmJih0LmF1ZGlvTGV2ZWw9ZS5hdWRpb0xldmVsKSxlLmZyYW1lV2lkdGgmJih0LmZyYW1lV2lkdGg9ZS5mcmFtZVdpZHRoKSxlLmZyYW1lSGVpZ2h0JiYodC5mcmFtZUhlaWdodD1lLmZyYW1lSGVpZ2h0KSxlLmZyYW1lUmF0ZSYmKHQuZnJhbWVSYXRlPWUuZnJhbWVSYXRlKSwoZS5iaXRyYXRlfHwwPT09ZS5iaXRyYXRlKSYmKHQuYml0cmF0ZT1lLmJpdHJhdGUpLGUuaml0dGVyJiYodC5qaXR0ZXI9ZS5qaXR0ZXIpLHR9KSl9fV9nZXRTdGF0c0RhdGEoKXt2YXIgZSx0O3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3Qgcj15aWVsZCB0aGlzLl9ydGNQZWVyQ29ubi5nZXRTdGF0cygpLGk9bnVsbD09PShlPXRoaXMucmVwb3J0UGFyc2VyKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5wYXJzZVJUQ1N0YXRzUmVwb3J0KHIpO3JldHVybiBudWxsPT09KHQ9dGhpcy5yZXBvcnRQYXJzZXIpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmZvcm1hdFJDUlRDU3RhdGVSZXBvcnQoaSl9KSl9Z2V0QXVkaW9MZXZlbFJlcG9ydERhdGEoKXt2YXIgZSx0O3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3Qgcj15aWVsZCB0aGlzLl9ydGNQZWVyQ29ubi5nZXRTdGF0cygpLGk9bnVsbD09PShlPXRoaXMucmVwb3J0UGFyc2VyKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5wYXJzZVJUQ1N0YXRzUmVwb3J0KHIpO2lmKCFpKXJldHVybltdO3JldHVybiBudWxsPT09KHQ9dGhpcy5yZXBvcnRQYXJzZXIpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmdldEF1ZGlvTGV2ZWxMaXN0KGkpfSkpfV9yZXBvcnRIYW5kbGUoKXt2YXIgZSx0LHI7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCBpPXlpZWxkIHRoaXMuX2dldFN0YXRzRGF0YSgpO2lmKCFpKXJldHVybjsoaS5zZW5kZXJzLmxlbmd0aHx8aS5yZWNlaXZlcnMubGVuZ3RoKSYmKG51bGw9PT0oZT10aGlzLl9wb2xhcmlzUmVwb3J0KXx8dm9pZCAwPT09ZXx8ZS5zZW5kUjNSNERhdGEoaSkpO2NvbnN0IG49dGhpcy5fY3JlYXRlUkNSVENTdGF0ZVJlcG9ydChpKTtudWxsPT09KHI9bnVsbD09PSh0PXRoaXMuX3JlcG9ydExpc3RlbmVyKXx8dm9pZCAwPT09dD92b2lkIDA6dC5vblN0YXRlUmVwb3J0KXx8dm9pZCAwPT09cnx8ci5jYWxsKHQsbil9KSl9Z2V0UlRDUGVlckNvbm4oKXtyZXR1cm4gdGhpcy5fcnRjUGVlckNvbm59ZGVzdHJveSgpe3RoaXMuY2xlYXIoKSx0aGlzLmNsZWFyUmVUcnlFeGNoYW5nZVRpbWVyKCksdGhpcy5fcmVwb3J0U3RhdHNUaW1lciYmKGNsZWFySW50ZXJ2YWwodGhpcy5fcmVwb3J0U3RhdHNUaW1lciksdGhpcy5fcmVwb3J0U3RhdHNUaW1lcj1udWxsKSx0aGlzLnJlZ2lzdGVyUmVwb3J0TGlzdGVuZXIobnVsbCksdGhpcy5fcnRjUGVlckNvbm4uY2xvc2UoKSx0aGlzLnJlcG9ydFBhcnNlcj1udWxsfWNsZWFyUmVUcnlFeGNoYW5nZVRpbWVyKCl7Y2xlYXJJbnRlcnZhbCh0aGlzLl9yZVRyeUV4Y2hhbmdlVGltZXIpLHRoaXMuX3JlVHJ5RXhjaGFuZ2VUaW1lcj1udWxsfX12YXIgWXQscXQsenQsUXQsWHQ7V3QuX19JTk5FUl9FVkVOVF9UUkFDS19SRUFEWV9fPVwiaW5uZXItdHJhY2stcmVhZHlcIixmdW5jdGlvbihlKXtlW2UuRElTQUJMRT0wXT1cIkRJU0FCTEVcIixlW2UuRU5BQkxFPTFdPVwiRU5BQkxFXCJ9KFl0fHwoWXQ9e30pKSxmdW5jdGlvbihlKXtlW2UuTWVldGluZ09yQW5jaG9yPTFdPVwiTWVldGluZ09yQW5jaG9yXCIsZVtlLkF1ZGllbmNlPTJdPVwiQXVkaWVuY2VcIn0ocXR8fChxdD17fSkpO2NsYXNzIFp0e2NvbnN0cnVjdG9yKGUsdCxyLGksbj1xdC5NZWV0aW5nT3JBbmNob3Ipe3RoaXMuX2NvbnRleHQ9ZSx0aGlzLl9ydW50aW1lPXQsdGhpcy5fcm9vbUlkPXIsdGhpcy5fY3J0UlRDUm9vbT1pLHRoaXMuX3VzZXJSb2xlPW59X3NlbmQoZSl7dGhpcy5fY29udGV4dC5nZXRDb25uZWN0aW9uU3RhdHVzKCk9PT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkNvbm5lY3Rpb25TdGF0dXMuQ09OTkVDVEVEJiZ0aGlzLl9jb250ZXh0LnNldFJUQ1N0YXRlKHRoaXMuX3Jvb21JZCxlKX1fZ2V0Q2xpZW50SUQoKXtjb25zdCBlPVwidXVpZFwiO2xldCB0PXRoaXMuX3J1bnRpbWUubG9jYWxTdG9yYWdlLmdldEl0ZW0oZSk7cmV0dXJuIHR8fCh0PVN0KCksdGhpcy5fcnVudGltZS5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShlLHQpKSx0fV9nZXRSZWFsUmVzb3VyY2VJZChlKXtsZXQgdD1lO2NvbnN0IHI9ZS5pbmRleE9mKFwiX3RpbnlcIik7cmV0dXJuIHI+LTEmJih0PWUuc2xpY2UoMCxyKSksdH1fZ2V0UG9sYXJpc1RyYWNrSWQoZSl7bGV0IHQ9XCJcIjtjb25zdCByPWUuc3BsaXQoXCJfXCIpO2lmKGUuaW5jbHVkZXMoXCJfdGlueVwiKSl7Y29uc3QgZT1yLnBvcCgpLGk9cGFyc2VJbnQoci5wb3AoKSk9PT1GZS5BVURJT19PTkxZP1wiYXVkaW9cIjpcInZpZGVvXCIsbj1yLnBvcCgpO3Q9W3Iuam9pbihcIl9cIiksbixlLGldLmpvaW4oXCJfXCIpfWVsc2V7Y29uc3QgZT1wYXJzZUludChyLnBvcCgpKT09PUZlLkFVRElPX09OTFk/XCJhdWRpb1wiOlwidmlkZW9cIixpPXIucG9wKCk7dD1bci5qb2luKFwiX1wiKSxpLGVdLmpvaW4oXCJfXCIpfXJldHVybiB0fXNlbmRSM1I0RGF0YShlKXtjb25zdHtpY2VDYW5kaWRhdGVQYWlyOnQsc2VuZGVyczpyLHJlY2VpdmVyczppfT1lLG49KG51bGw9PXQ/dm9pZCAwOnQuYml0cmF0ZVNlbmQpfHwtMSxzPShudWxsPT10P3ZvaWQgMDp0LmJpdHJhdGVSZWN2KXx8LTEsbz0obnVsbD09dD92b2lkIDA6dC5uZXR3b3JrVHlwZSl8fFwidW5rbm93blwiLGE9KG51bGw9PXQ/dm9pZCAwOnQucnR0KXx8LTEsYz1gJHsobnVsbD09dD92b2lkIDA6dC5JUCl8fC0xfToke251bGw9PXQ/dm9pZCAwOnQucG9ydH1gLGQ9KG51bGw9PXR8fHQucmVtb3RlSVAsbnVsbD09dHx8dC5yZW1vdGVQb3J0LChudWxsPT10P3ZvaWQgMDp0LmF2YWlsYWJsZUluY29taW5nQml0cmF0ZSl8fC0xKSx1PShudWxsPT10P3ZvaWQgMDp0LmF2YWlsYWJsZU91dGdvaW5nQml0cmF0ZSl8fC0xLGw9KG51bGw9PXQ/dm9pZCAwOnQudG90YWxQYWNrZXRzTG9zdCl8fC0xLGg9dGhpcy5fY29udGV4dC5nZXRDdXJyZW50SWQoKTtsZXQgcD1gUjNcXHQke259XFx0LTFcXHQtMVxcdC0xXFx0JHtvfVxcdCR7YX1cXHQke2N9XFx0JHtkfVxcdCR7dX1cXHQke2x9XFx0JHtofVxccmAsXz1gUjRcXHQke3N9XFx0LTFcXHQtMVxcdC0xXFx0JHtvfVxcdCR7YX1cXHQke2N9XFx0JHtkfVxcdCR7dX1cXHQke2x9XFx0JHtofVxccmA7Y29uc3QgbT1yLm1hcCgoZT0+e3ZhciB0O2NvbnN0e3RyYWNrSWQ6cixhdWRpb0xldmVsOmksc2FtcGxpbmdSYXRlOm4sYml0cmF0ZTpzLHBhY2tldHNMb3N0UmF0ZTpvLGZyYW1lUmF0ZTphLGZyYW1lV2lkdGg6YyxmcmFtZUhlaWdodDpkLGdvb2dSZW5kZXJEZWxheU1zOnUsaml0dGVyOmwsbmFja0NvdW50OmgscGxpQ291bnQ6cCxydHQ6Xyxnb29nRmlyc1NlbnQ6bSxlbmNvZGVySW1wbGVtZW50YXRpb246Zn09ZSx2PXRoaXMuX2dldFBvbGFyaXNUcmFja0lkKHIpLFI9dGhpcy5fZ2V0UmVhbFJlc291cmNlSWQocik7cmV0dXJue3RyYWNrSWQ6dixnb29nQ29kZWNOYW1lOmZ8fFN0cmluZygtMSksYXVkaW9MZXZlbDppfHwwPT09aT9pOi0xLGJpdHJhdGU6c3x8MD09PXM/czotMSxwYWNrZXRzTG9zdFJhdGU6b3x8MD09PW8/bzotMSxmcmFtZVJhdGU6YXx8LTEscmVzb2x1dGlvbjpjJiZkP2Ake2N9ICogJHtkfWA6XCItMVwiLGppdHRlcjpsfHwtMSxuYWNrQ291bnQ6aHx8MD09PWg/aDotMSxwbGlDb3VudDpwfHwwPT09cD9wOi0xLHJ0dDpffHwtMSxnb29nRmlyc1NlbnQ6bSxzYW1wbGluZ1JhdGU6bixnb29nUmVuZGVyRGVsYXlNczp1LGVuY29kZXJJbXBsZW1lbnRhdGlvbjpmfHxTdHJpbmcoLTEpLHRyYWNrU3RhdGU6KG51bGw9PT0odD10aGlzLl9jcnRSVENSb29tLmdldExvY2FsVHJhY2soUikpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmlzTG9jYWxNdXRlZCgpKT9ZdC5ESVNBQkxFOll0LkVOQUJMRX19KSksZj1pLmZpbHRlcigoZT0+ISFlLnRyYWNrSWQpKS5tYXAoKGU9Pnt2YXIgdDtjb25zdHt0cmFja0lkOnIsYXVkaW9MZXZlbDppLHNhbXBsaW5nUmF0ZTpuLGJpdHJhdGU6cyxwYWNrZXRzTG9zdFJhdGU6byxmcmFtZVJhdGU6YSxmcmFtZVdpZHRoOmMsZnJhbWVIZWlnaHQ6ZCxnb29nUmVuZGVyRGVsYXlNczp1LGppdHRlcjpsLG5hY2tDb3VudDpoLHBsaUNvdW50OnAscnR0Ol8sZ29vZ0ZpcnNSZWNlaXZlZDptLGNvZGVjSW1wbGVtZW50YXRpb25OYW1lOmZ9PWUsdj10aGlzLl9nZXRQb2xhcmlzVHJhY2tJZChyKSxSPXRoaXMuX2dldFJlYWxSZXNvdXJjZUlkKHIpO3JldHVybnt0cmFja0lkOnYsZ29vZ0NvZGVjTmFtZTpmfHxTdHJpbmcoLTEpLGF1ZGlvTGV2ZWw6aXx8MD09PWk/aTotMSxiaXRyYXRlOnN8fDA9PT1zP3M6LTEscGFja2V0c0xvc3RSYXRlOm98fDA9PT1vP286LTEsZnJhbWVSYXRlOmF8fC0xLHJlc29sdXRpb246YyYmZD9gJHtjfSAqICR7ZH1gOlwiLTFcIixqaXR0ZXI6bHx8LTEsbmFja0NvdW50Omh8fDA9PT1oP2g6LTEscGxpQ291bnQ6cHx8MD09PXA/cDotMSxydHQ6X3x8LTEsZ29vZ0ZpcnNSZWNlaXZlZDptLHNhbXBsaW5nUmF0ZTpuLGdvb2dSZW5kZXJEZWxheU1zOnUsY29kZWNJbXBsZW1lbnRhdGlvbk5hbWU6Znx8U3RyaW5nKC0xKSx0cmFja1N0YXRlOihudWxsPT09KHQ9dGhpcy5fY3J0UlRDUm9vbS5nZXRSZW1vdGVUcmFjayhSKSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuaXNMb2NhbE11dGVkKCkpP1l0LkRJU0FCTEU6WXQuRU5BQkxFfX0pKTtwKz1tLm1hcCgoZT0+YCR7ZS50cmFja0lkfVxcdCR7ZS5nb29nQ29kZWNOYW1lfVxcdCR7ZS5hdWRpb0xldmVsfVxcdCR7ZS5zYW1wbGluZ1JhdGV9XFx0JHtlLmJpdHJhdGV9XFx0JHtlLnBhY2tldHNMb3N0UmF0ZX1cXHQke2UuZnJhbWVSYXRlfVxcdCR7ZS5yZXNvbHV0aW9ufVxcdCR7ZS5nb29nUmVuZGVyRGVsYXlNc31cXHQke2Uuaml0dGVyfVxcdCR7ZS5uYWNrQ291bnR9XFx0JHtlLnBsaUNvdW50fVxcdCR7ZS5ydHR9XFx0JHtlLmdvb2dGaXJzU2VudH1cXHQke2UuZW5jb2RlckltcGxlbWVudGF0aW9ufVxcdCR7ZS50cmFja1N0YXRlfWApKS5qb2luKFwiXFxuXCIpLGUuc2VuZGVycy5sZW5ndGgmJnRoaXMuX3NlbmQocCtgXFxyJHt0aGlzLl91c2VyUm9sZX1gKSxfKz1mLm1hcCgoZT0+YCR7ZS50cmFja0lkfVxcdCR7ZS5nb29nQ29kZWNOYW1lfVxcdCR7ZS5hdWRpb0xldmVsfVxcdCR7ZS5zYW1wbGluZ1JhdGV9XFx0JHtlLmJpdHJhdGV9XFx0JHtlLnBhY2tldHNMb3N0UmF0ZX1cXHQke2UuZnJhbWVSYXRlfVxcdCR7ZS5yZXNvbHV0aW9ufVxcdCR7ZS5nb29nUmVuZGVyRGVsYXlNc31cXHQke2Uuaml0dGVyfVxcdCR7ZS5uYWNrQ291bnR9XFx0JHtlLnBsaUNvdW50fVxcdCR7ZS5ydHR9XFx0JHtlLmdvb2dGaXJzUmVjZWl2ZWR9XFx0JHtlLmNvZGVjSW1wbGVtZW50YXRpb25OYW1lfVxcdCR7ZS50cmFja1N0YXRlfWApKS5qb2luKFwiXFxuXCIpLGUucmVjZWl2ZXJzLmxlbmd0aCYmdGhpcy5fc2VuZChfK2BcXHIke3RoaXMuX3VzZXJSb2xlfWApfXNlbmRSMSgpe2NvbnN0IGU9YFIxXFx0NS4zLjFcXHQke3RoaXMuX2NvbnRleHQuZ2V0Q29yZVZlcnNpb24oKX1cXHR3ZWJcXHQke25hdmlnYXRvci5wbGF0Zm9ybX1cXHQtMVxcdCR7eXQuYnJvd3Nlcn1cXHQke3l0LnZlcnNpb259XFx0JHt0aGlzLl9nZXRDbGllbnRJRCgpfVxcdCR7dGhpcy5fdXNlclJvbGV9YDt0aGlzLl9zZW5kKGUpfXNlbmRSMihlLHQscil7Y29uc3QgaT1gUjJcXHQke2V9XFx0JHt0fVxcdCR7dGhpcy5fZ2V0Q2xpZW50SUQoKX1cXHIke3Iuam9pbihcIlxcdFwiKX1cXHIke3RoaXMuX3VzZXJSb2xlfWA7dGhpcy5fc2VuZChpKX19IWZ1bmN0aW9uKGUpe2UuUFVCTElTSD1cInB1Ymxpc2hcIixlLlNVQlNDUklCRT1cInN1YnNjcmliZVwifSh6dHx8KHp0PXt9KSksZnVuY3Rpb24oZSl7ZS5CRUdJTj1cImJlZ2luXCIsZS5FTkQ9XCJlbmRcIn0oUXR8fChRdD17fSkpO2NsYXNzIGVye2NvbnN0cnVjdG9yKGUpe3RoaXMuX3Jvb209ZSx0aGlzLl9hdWRpb0xldmVsQ2hhbmdlSGFuZGxlcj1udWxsLHRoaXMuX3RpbWVyPW51bGwsdGhpcy5fcGM9dGhpcy5fcm9vbS5fX2dldFBDKCl9X2F1ZGlvTGV2ZWxSZXBvcnQoKXtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2lmKFwibmV3XCI9PT10aGlzLl9wYy5nZXRSVENQZWVyQ29ubigpLmljZUNvbm5lY3Rpb25TdGF0ZXx8IXRoaXMuX2F1ZGlvTGV2ZWxDaGFuZ2VIYW5kbGVyKXJldHVybjtjb25zdCBlPSh5aWVsZCB0aGlzLl9wYy5nZXRBdWRpb0xldmVsUmVwb3J0RGF0YSgpKS5tYXAoKGU9Pntjb25zdHt1c2VySWQ6dH09UHIucGFyc2VUcmFja0lkKGUudHJhY2tJZCk7cmV0dXJue3RyYWNrOnRoaXMuX3Jvb20uZ2V0Q3J0VXNlcklkKCk9PT10P3RoaXMuX3Jvb20uZ2V0TG9jYWxUcmFjayhlLnRyYWNrSWQpOnRoaXMuX3Jvb20uZ2V0UmVtb3RlVHJhY2soZS50cmFja0lkKSxhdWRpb0xldmVsOmUuYXVkaW9MZXZlbHx8MH19KSkuZmlsdGVyKChlPT5lLnRyYWNrKSk7dGhpcy5fYXVkaW9MZXZlbENoYW5nZUhhbmRsZXIoZSl9KSl9b25BdWRpb0xldmVsQ2hhbmdlKGUsdCl7dDwzMDB8fHQ+MWUzP0MuZXJyb3IoJ3RoZSB2YWxpZCByYW5nZSBvZiBvbkF1ZGlvTGV2ZWxDaGFuZ2UgcGFyYW1zIFwiZ2FwXCIgaXM6ID4gMzAwICYmIDwgMTAwMCcpOmU/KHRoaXMuX2F1ZGlvTGV2ZWxDaGFuZ2VIYW5kbGVyPWUsdGhpcy5fdGltZXI9c2V0SW50ZXJ2YWwodGhpcy5fYXVkaW9MZXZlbFJlcG9ydC5iaW5kKHRoaXMpLHQpKTp0aGlzLl9hdWRpb0xldmVsQ2hhbmdlSGFuZGxlcj1udWxsfWNsZWFyQXVkaW9MZXZlbFJlcG9ydFRpbWVyKCl7dGhpcy5fdGltZXImJihjbGVhckludGVydmFsKHRoaXMuX3RpbWVyKSx0aGlzLl90aW1lcj1udWxsKX19IWZ1bmN0aW9uKGUpe2VbZS5BTkNIT1I9MV09XCJBTkNIT1JcIixlW2UuQVVESUVOQ0U9Ml09XCJBVURJRU5DRVwifShYdHx8KFh0PXt9KSk7Y29uc3QgdHI9ZT0+ZSBpbnN0YW5jZW9mIHFlP2UuZ2V0VHJhY2tJZCgpOmUudHJhY2suZ2V0VHJhY2tJZCgpO2NsYXNzIHJye2NvbnN0cnVjdG9yKGUsdCxyLGksbixzLG8sYSxjLGQpe3RoaXMuX2NvbnRleHQ9ZSx0aGlzLl9ydW50aW1lPXQsdGhpcy5fcm9vbUlkPXIsdGhpcy5fcm9vbU1vZGU9bix0aGlzLl9zZXJ2aWNlPXMsdGhpcy5faW5pdE9wdGlvbnM9byx0aGlzLl9udGZDbGVhclJvb21JdGVtPWEsdGhpcy5faXNNYWluUm9vbT1kLHRoaXMuX3JlbW90ZVRyYWNrcz17fSx0aGlzLl9zdWJzY3JpYmVkTGlzdD1bXSx0aGlzLl9kZXN0cm95ZWQ9ITEsdGhpcy5tc2dUYXNrUXVldWU9bmV3IEUsdGhpcy5fYXBwTGlzdGVuZXI9bnVsbCx0aGlzLl9vblJlY3ZQS01zZz1udWxsLHRoaXMuX3Rva2VuPWkudG9rZW4sdGhpcy5fc2Vzc2lvbklkPWkuc2Vzc2lvbklkLHRoaXMuX3Jvb21SZXNvdXJjZXM9Yz97fTpMdChpKSx0aGlzLl9pbml0UmVtb3RlVHJhY2tzKCk7Y29uc3QgdT10aGlzLl9jb250ZXh0LmdldEN1cnJlbnRJZCgpLGw9dGhpcy5fcm9vbVJlc291cmNlc1t1XT10aGlzLl9yb29tUmVzb3VyY2VzW3VdfHxbXTtDLmRlYnVnKGByb29tIGRhdGEgLT4gJHtKU09OLnN0cmluZ2lmeSh0aGlzLl9yb29tUmVzb3VyY2VzKX1gKSxsLmxlbmd0aD4wJiZrKCgoKT0+dGhpcy5fdW5wdWJsaXNoUHJldihsKSkpLGMmJnRoaXMuX2FmdGVyQ2hhbmdlZFJvbGUoaSksdGhpcy5fcGluZ2VyPW5ldyBBdChyLHRoaXMuX3Jvb21Nb2RlLGUsdGhpcy5faW5pdE9wdGlvbnMucGluZ0dhcCksdGhpcy5fcGluZ2VyLm9uRmFpbGVkPXRoaXMuX2tpY2tvZmYuYmluZCh0aGlzKSx0aGlzLl9waW5nZXIub25QaW5nUmVzdWx0PXRoaXMuX2hhbmRsZVBpbmdSZXN1bHQuYmluZCh0aGlzKSx0aGlzLl9waW5nZXIuc3RhcnQoKSx0aGlzLl9wb2xhcmlzUmVwb3J0PW5ldyBadCh0aGlzLl9jb250ZXh0LHRoaXMuX3J1bnRpbWUsdGhpcy5fcm9vbUlkLHRoaXMpLHRoaXMuX3BvbGFyaXNSZXBvcnQuc2VuZFIxKCksdGhpcy5fcGM9bmV3IFd0KHRoaXMuX3JlVHJ5RXhjaGFuZ2UuYmluZCh0aGlzKSx0aGlzLl9wb2xhcmlzUmVwb3J0KSx0aGlzLl9wYy5vbihXdC5fX0lOTkVSX0VWRU5UX1RSQUNLX1JFQURZX18sdGhpcy5fb25UcmFja1JlYWR5LHRoaXMpLHRoaXMuX3BjLm9uKHplLl9fSU5ORVJfRVZFTlRfTVVURURfQ0hBTkdFX18sdGhpcy5fb25Mb2NhbFRyYWNrTXV0ZWQsdGhpcyksdGhpcy5fcGMub24oemUuX19JTk5FUl9FVkVOVF9ERVNUUk9ZX18sdGhpcy5fb25Mb2NhbFRyYWNrRGVzdHJvaWVkLHRoaXMpfV9pbml0UmVtb3RlVHJhY2tzKCl7Y29uc3QgZT10aGlzLl9jb250ZXh0LmdldEN1cnJlbnRJZCgpO2Zvcihjb25zdCB0IGluIHRoaXMuX3Jvb21SZXNvdXJjZXMpe2NvbnN0IHI9dGhpcy5fcm9vbVJlc291cmNlc1t0XTt0IT09ZSYmMCE9PXIubGVuZ3RoJiZyLmZvckVhY2goKGU9Pntjb25zdCB0PW10KGUpLHt0YWc6cix1c2VySWQ6aSxtZWRpYVR5cGU6bn09ZnQodCkscz1uPT09RmUuQVVESU9fT05MWT9uZXcgb3QocixpKTpuZXcgYXQocixpKTtzLl9faW5uZXJTZXRSZW1vdGVNdXRlZCgwPT09ZS5zdGF0ZSksdGhpcy5fcmVtb3RlVHJhY2tzW3RdPXN9KSl9fV9oYW5kbGVQaW5nUmVzdWx0KGUpe3RoaXMuX2NhbGxBcHBMaXN0ZW5lcihcIm9uUGluZ1wiLGUpfXNldEJpdHJhdGUoZSx0LGkpe0Mud2FybihcImBSQ0Fic3RyYWN0Um9vbS5zZXRCaXRyYXRlYCB3aWxsIGJlIGRlcHJlY2F0ZWQsIHVzZSBgUkNMb2NhbFRyYWNrLnNldEJpdHJhdGVgIGluc3RlYWQuXCIpLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm1heFwiLGUsKGU9PigwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uaXNOdW1iZXIpKGUpJiZlPk1hdGgubWF4KHR8fDEsMjAwKSksITApLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm1pblwiLHQsKHQ9PigwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uaXNOdW1iZXIpKHQpJiZ0Pj0xJiYoISgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uaXNOdW1iZXIpKGUpfHx0PGUpKSwhMCksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwic3RhcnRcIixpLChpPT4oMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmlzTnVtYmVyKShpKSYmaT50JiZpPD1lKSksdGhpcy5fcGMuc2V0Qml0cmF0ZShlLHQsaSl9X29uVHJhY2tSZWFkeShlKXtjb25zdCB0PWUuc3RyZWFtc1swXS5pZCxyPWUucmVjZWl2ZXIudHJhY2ssaT1bdCxcImF1ZGlvXCI9PT1yLmtpbmQ/RmUuQVVESU9fT05MWTpGZS5WSURFT19PTkxZXS5qb2luKFwiX1wiKSxuPXRoaXMuX3JlbW90ZVRyYWNrc1tpXTtuPyhuLl9faW5uZXJTZXRNZWRpYVN0cmVhbVRyYWNrKHIpLHRoaXMuX2NhbGxBcHBMaXN0ZW5lcihcIm9uVHJhY2tSZWFkeVwiLG4pKTpDLndhcm4oYGNhbm5vdCBmb3VuZCByZW1vdGUgdHJhY2sgJHtyLmlkfWApfV9jYWxsQXBwTGlzdGVuZXIoZSwuLi50KXt2YXIgcjtjb25zdCBpPW51bGw9PT0ocj10aGlzLl9hcHBMaXN0ZW5lcil8fHZvaWQgMD09PXI/dm9pZCAwOnJbZV07aWYoaSl0cnl7aSguLi50KX1jYXRjaChlKXtDLmVycm9yKGUpfX1fb25Vc2VyVW5wdWJsaXNoKGUpe3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7eWllbGQgdGhpcy51bnN1YnNjcmliZShlKSxlLmZvckVhY2goKGU9PntlLl9faW5uZXJEZXN0cm95KCksZGVsZXRlIHRoaXMuX3JlbW90ZVRyYWNrc1tlLmdldFRyYWNrSWQoKV19KSksdGhpcy5fb25UcmFja1VucHVibGlzaChlKX0pKX1fb25UcmFja1VucHVibGlzaChlKXt0aGlzLl9jYWxsQXBwTGlzdGVuZXIoXCJvblRyYWNrVW5wdWJsaXNoXCIsZSl9X3VucHVibGlzaFByZXYoZSl7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCB0PWUuc2xpY2UoKTtlLmxlbmd0aD0wLEMuaW5mbyhgdW5wdWJsaXNoIHVyaXMgcHJldiBsb2dpbjogJHtKU09OLnN0cmluZ2lmeSh0KX1gKTtjb25zdCByPXlpZWxkIHRoaXMuX2NvbnRleHQuc2V0UlRDVG90YWxSZXModGhpcy5fcm9vbUlkLGN0KE50LlVOUFVCTElTSCx0KSxkdChbXSksTnQuVE9UQUxfQ09OVEVOVF9SRVNPVVJDRSxkdChbXSkpO3IhPT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTP0MuZXJyb3IoYHVucHVibGlzaCBwcmV2IHVyaXMgZmFpbGVkIC0+IGNvZGU6ICR7cn1gKTpDLmRlYnVnKFwidW5wdWJsaXNoIHVyaXMgcHJldiBsb2dpbiBzdWNjZWVkXCIpfSkpfV9fcGFyc2VJbm5lck1lc3NhZ2UoZSl7Y29uc3R7dGFyZ2V0SWQ6dCxjb252ZXJzYXRpb25UeXBlOnJ9PWU7aWYociE9PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQ29udmVyc2F0aW9uVHlwZS5SVENfUk9PTSlyZXR1cm4hMTtpZih0IT09dGhpcy5fcm9vbUlkKXJldHVybiEwO0MuaW5mbyhgcmVjdiBpbm5lciBtc2cgLT4gbWVzc2FnZTogJHtKU09OLnN0cmluZ2lmeShlKX0gfCByb29taWQ6ICR7dGhpcy5fcm9vbUlkfWApO2NvbnN0IGk9ZS5jb250ZW50O3N3aXRjaChlLm1lc3NhZ2VUeXBlKXtjYXNlIE50LktJQ0s6dGhpcy5fa2lja29mZighMCxpKTticmVhaztjYXNlIE50LlNUQVRFOnRoaXMubXNnVGFza1F1ZXVlLnB1c2goKCgpPT50aGlzLl9zdGF0ZUhhbmRsZShpKSkpO2JyZWFrO2Nhc2UgTnQuTU9ESUZZOmNhc2UgTnQuUFVCTElTSDpjYXNlIE50LlVOUFVCTElTSDpjYXNlIE50LlRPVEFMX0NPTlRFTlRfUkVTT1VSQ0U6dGhpcy5tc2dUYXNrUXVldWUucHVzaCgoKCk9PnRoaXMuX3Jlc291cmNlSGFuZGxlKGksZS5tZXNzYWdlVHlwZSxlLnNlbmRlclVzZXJJZCkpKTticmVhaztjYXNlIE50LlJPT01fTk9USUZZOnRoaXMuX2NhbGxBcHBMaXN0ZW5lcihcIm9uUm9vbUF0dHJpYnV0ZUNoYW5nZVwiLGUubWVzc2FnZVR5cGUsZS5jb250ZW50KTticmVhaztjYXNlIE50LlVTRVJfTk9USUZZOkMud2FybihgVE9ETzogJHtOdC5VU0VSX05PVElGWX1gKTticmVhaztjYXNlIE50LlBLX0lOVklURTpjYXNlIE50LlBLX0NBTkNFTF9JTlZJVEU6Y2FzZSBOdC5QS19JTlZJVEVfVElNRU9VVDpjYXNlIE50LlBLX0lOVklURV9BTlNXRVI6Y2FzZSBOdC5QS19FTkQ6dGhpcy5fb25SZWN2UEtNc2cmJnRoaXMuX29uUmVjdlBLTXNnKGUpO2JyZWFrO2Nhc2UgTnQuT1RIRVJfUk9PTV9PRkZMSU5FOmJyZWFrO2RlZmF1bHQ6dGhpcy5fY2FsbEFwcExpc3RlbmVyKFwib25NZXNzYWdlUmVjZWl2ZVwiLGUubWVzc2FnZVR5cGUsZS5jb250ZW50LGUuc2VuZGVyVXNlcklkLGUubWVzc2FnZVVJZCl9cmV0dXJuITB9X2tpY2tvZmYoZSx0KXtsZXQgcjtDLndhcm4oYG9uS2lja09mZiAtPiBieVNlcnZlcjogJHtlfWApLHRoaXMuX250ZkNsZWFyUm9vbUl0ZW0oKSx0aGlzLl9sZWF2ZUhhbmRsZSghZSksZSYmKChudWxsPT10P3ZvaWQgMDp0LnVzZXJzKXx8W10pLmZvckVhY2goKGU9PntlLnVzZXJJZD09PXRoaXMuX2NvbnRleHQuZ2V0Q3VycmVudElkKCkmJihyPWUudHlwZSl9KSksdGhpcy5fY2FsbEFwcExpc3RlbmVyKFwib25LaWNrT2ZmXCIsZSxyKX1fcnRjcGVlckNsb3NlZCgpe3RoaXMuX250ZkNsZWFyUm9vbUl0ZW0oKSx0aGlzLl9sZWF2ZUhhbmRsZSghMCksdGhpcy5fY2FsbEFwcExpc3RlbmVyKFwib25SVENQZWVyQ29ubmVjdGlvbkNsb3NlQnlFeGNlcHRpb25cIil9X3Jlc291cmNlSGFuZGxlKGUsdCxyKXtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2lmKHRoaXMuX2Fzc2VydFJvb21EZXN0cm95ZWQoKSlyZXR1cm4gdm9pZCBDLndhcm4oYHJvb20gaGFzIGJlZW4gZGVzdHJveWVkLiAtPiByb29tSWQ6ICR7dGhpcy5fcm9vbUlkfWApO2NvbnN0e3VyaXM6aSxpZ25vcmU6bn09ZTtpZihufHwhaSlyZXR1cm47Y29uc3Qgcz1bXSxvPVtdLGE9W107bGV0IGM7Y29uc3QgZD10aGlzLl9yb29tUmVzb3VyY2VzW3JdfHwodGhpcy5fcm9vbVJlc291cmNlc1tyXT1bXSk7c3dpdGNoKHQpe2Nhc2UgTnQuTU9ESUZZOmEucHVzaCguLi5pKTticmVhaztjYXNlIE50LlBVQkxJU0g6cy5wdXNoKC4uLmkpO2JyZWFrO2Nhc2UgTnQuVU5QVUJMSVNIOm8ucHVzaCguLi5pKTticmVhaztjYXNlIE50LlRPVEFMX0NPTlRFTlRfUkVTT1VSQ0U6Yz1ndChkLGkpLHMucHVzaCguLi5jLnB1Ymxpc2hlZExpc3QpLG8ucHVzaCguLi5jLnVucHVibGlzaGVkTGlzdCksYS5wdXNoKC4uLmMubW9kaWZpZWRMaXN0KX1pZihzLmxlbmd0aD4wKXtjb25zdCBlPWQubWFwKG10KSx0PVtdLHI9W107aWYocy5mb3JFYWNoKChpPT57Y29uc3Qgbj1tdChpKSxzPWUuaW5kZXhPZihuKSx7dXNlcklkOm8sdGFnOmEsbWVkaWFUeXBlOmN9PWZ0KG4pO3M+LTE/ZFtzXT1pOmQucHVzaChpKTtsZXQgdT10aGlzLl9yZW1vdGVUcmFja3Nbbl07dT91LmlzU3Vic2NyaWJlZCgpJiZ0LnB1c2godSk6KHU9Yz09PUZlLkFVRElPX09OTFk/bmV3IG90KGEsbyk6bmV3IGF0KGEsbyksdGhpcy5fcmVtb3RlVHJhY2tzW25dPXUsci5wdXNoKHUpKSx1Ll9faW5uZXJTZXRSZW1vdGVNdXRlZCgwPT09aS5zdGF0ZSl9KSksdC5sZW5ndGgpe2NvbnN0IGU9dC5tYXAoKGU9PmUuZ2V0VHJhY2tJZCgpKSk7Qy5kZWJ1ZyhgcmVzdWIgdHJhY2tzIC0+ICR7SlNPTi5zdHJpbmdpZnkoZSl9YCk7Y29uc3R7Y29kZTpyfT15aWVsZCBrKCgoKT0+dGhpcy5fX3N1YnNjcmliZSh0LCEwKSkpO3IhPT1ULlNVQ0NFU1MmJkMuZXJyb3IoYHJlc3ViIHRyYWNrcyBmYWlsZWQgLT4gY29kZTogJHtyfSwgaWRzOiAke0pTT04uc3RyaW5naWZ5KGUpfWApfXRoaXMuX29uVHJhY2tQdWJsaXNoKHIpfWlmKG8ubGVuZ3RoPjApe2NvbnN0IGU9by5tYXAobXQpO2ZvcihsZXQgdD1kLmxlbmd0aC0xO3Q+PTA7dC09MSl7Y29uc3Qgcj1kW3RdO2UuaW5jbHVkZXMobXQocikpJiZkLnNwbGljZSh0LDEpfWNvbnN0IHQ9by5tYXAoKGU9Pntjb25zdCB0PW10KGUpO3JldHVybiB0aGlzLl9yZW1vdGVUcmFja3NbdF19KSk7eWllbGQgdGhpcy5fb25Vc2VyVW5wdWJsaXNoKHQpfWlmKGEubGVuZ3RoPjApe2NvbnN0IGU9ZC5tYXAobXQpO2ZvcihsZXQgdD0wO3Q8YS5sZW5ndGg7dCs9MSl7Y29uc3Qgcj1hW3RdLGk9bXQociksbj1lLmluZGV4T2YoaSk7ZFtuXS5zdGF0ZT1yLnN0YXRlO2NvbnN0IHM9dGhpcy5fcmVtb3RlVHJhY2tzW2ldO3MuX19pbm5lclNldFJlbW90ZU11dGVkKDA9PT1yLnN0YXRlKSxzLmlzQXVkaW9UcmFjaygpP3RoaXMuX29uQXVkaW9NdXRlQ2hhbmdlKHMpOnRoaXMuX29uVmlkZW9NdXRlQ2hhbmdlKHMpfX19KSl9X29uVHJhY2tQdWJsaXNoKGUpe3RoaXMuX2NhbGxBcHBMaXN0ZW5lcihcIm9uVHJhY2tQdWJsaXNoXCIsZSl9X3N0YXRlSGFuZGxlKGUpe3ZhciB0O3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3R7dXNlcnM6cn09ZTtpZigwPT09ci5sZW5ndGgpcmV0dXJuO2NvbnN0IGk9W10sbj1bXSxzPVtdLG89W107ci5mb3JFYWNoKChlPT57MD09K2Uuc3RhdGU/KEMuZGVidWcoYHVzZXIgam9pbmVkIC0+ICR7ZS51c2VySWR9YCksdGhpcy5fcm9vbVJlc291cmNlc1tlLnVzZXJJZF18fChlLnN3aXRjaFJvbGVUeXBlP3MucHVzaChlLnVzZXJJZCk6aS5wdXNoKGUudXNlcklkKSksdGhpcy5fcm9vbVJlc291cmNlc1tlLnVzZXJJZF09dGhpcy5fcm9vbVJlc291cmNlc1tlLnVzZXJJZF18fFtdKTooQy5kZWJ1ZyhgdXNlciBsZWZ0IC0+ICR7ZS51c2VySWR9YCksZS5zd2l0Y2hSb2xlVHlwZT9vLnB1c2goZS51c2VySWQpOm4ucHVzaChlLnVzZXJJZCkpfSkpO2NvbnN0IGE9Wy4uLmksLi4uc10sYz1bLi4ubiwuLi5vXTtpZihjLmxlbmd0aCl7Y29uc3QgZT1bXSx0PVtdO2MuZm9yRWFjaCgocj0+e2UucHVzaCguLi50aGlzLmdldFJlbW90ZVRyYWNrc0J5VXNlcklkKHIpKSx0LnB1c2gocil9KSksZS5sZW5ndGgmJih5aWVsZCB0aGlzLnVuc3Vic2NyaWJlKGUpLGUuZm9yRWFjaCgoZT0+ZGVsZXRlIHRoaXMuX3JlbW90ZVRyYWNrc1tlLmdldFRyYWNrSWQoKV0pKSksdC5sZW5ndGgmJnQuZm9yRWFjaCgoZT0+ZGVsZXRlIHRoaXMuX3Jvb21SZXNvdXJjZXNbZV0pKX1pZihudWxsPT09KHQ9dGhpcy5fYXBwTGlzdGVuZXIpfHx2b2lkIDA9PT10P3ZvaWQgMDp0Lm9uU3dpdGNoUm9sZSlyZXR1cm4gcy5sZW5ndGgmJnMuZm9yRWFjaCgoZT0+dGhpcy5fY2FsbEFwcExpc3RlbmVyKFwib25Td2l0Y2hSb2xlXCIsZSxYdC5BTkNIT1IpKSksby5sZW5ndGgmJm8uZm9yRWFjaCgoZT0+dGhpcy5fY2FsbEFwcExpc3RlbmVyKFwib25Td2l0Y2hSb2xlXCIsZSxYdC5BVURJRU5DRSkpKSxpLmxlbmd0aCYmdGhpcy5fY2FsbEFwcExpc3RlbmVyKFwib25Vc2VySm9pblwiLGkpLHZvaWQobi5sZW5ndGgmJnRoaXMuX2NhbGxBcHBMaXN0ZW5lcihcIm9uVXNlckxlYXZlXCIsbikpO2EubGVuZ3RoJiZ0aGlzLl9jYWxsQXBwTGlzdGVuZXIoXCJvblVzZXJKb2luXCIsYSksYy5sZW5ndGgmJnRoaXMuX2NhbGxBcHBMaXN0ZW5lcihcIm9uVXNlckxlYXZlXCIsYyl9KSl9Z2V0Um9vbUlkKCl7cmV0dXJuIHRoaXMuX3Jvb21JZH1nZXRDcnRVc2VySWQoKXtyZXR1cm4gdGhpcy5fY29udGV4dC5nZXRDdXJyZW50SWQoKX1fX2dldFBDKCl7cmV0dXJuIHRoaXMuX3BjfWdldFJlbW90ZVVzZXJJZHMoKXtjb25zdCBlPXRoaXMuX2NvbnRleHQuZ2V0Q3VycmVudElkKCk7cmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuX3Jvb21SZXNvdXJjZXMpLmZpbHRlcigodD0+dCE9PWUpKX1nZXRSZW1vdGVUcmFja3MoKXtjb25zdCBlPVtdO3JldHVybiB0aGlzLmdldFJlbW90ZVVzZXJJZHMoKS5mb3JFYWNoKCh0PT57ZS5wdXNoKC4uLnRoaXMuZ2V0UmVtb3RlVHJhY2tzQnlVc2VySWQodCkpfSkpLGV9Z2V0UmVtb3RlVHJhY2tzQnlVc2VySWQoZSl7Y29uc3QgdD1bXTtmb3IoY29uc3QgciBpbiB0aGlzLl9yZW1vdGVUcmFja3Mpe2NvbnN0IGk9dGhpcy5fcmVtb3RlVHJhY2tzW3JdO2kuZ2V0VXNlcklkKCk9PT1lJiZ0LnB1c2goaSl9cmV0dXJuIHR9Z2V0U2Vzc2lvbklkKCl7cmV0dXJuIHRoaXMuX3Nlc3Npb25JZH1zZW5kTWVzc2FnZShlLHQpe3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3R7Y29kZTpyfT15aWVsZCB0aGlzLl9jb250ZXh0LnNlbmRNZXNzYWdlKF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQ29udmVyc2F0aW9uVHlwZS5SVENfUk9PTSx0aGlzLl9yb29tSWQse21lc3NhZ2VUeXBlOmUsY29udGVudDp0LGlzU3RhdHVzTWVzc2FnZTohMH0pO3JldHVybiByIT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUz8oQy5lcnJvcihgc2VuZCBtZXNzYWdlIGZhaWxlZCAtPiBjb2RlOiAke3J9YCkse2NvZGU6VC5TSUdOQUxfRVJST1J9KTp7Y29kZTpULlNVQ0NFU1N9fSkpfXNldFJvb21BdHRyaWJ1dGUoZSx0LHIsbj0hMSl7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCBzPXlpZWxkIHRoaXMuX2NvbnRleHQuc2V0UlRDRGF0YSh0aGlzLl9yb29tSWQsZSx0LG4sX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5SVENBcGlUeXBlLlJPT00scik7cmV0dXJuIHMhPT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTPyhDLmVycm9yKGBTZXRSb29tQXR0cmlidXRlVmFsdWUgRmFpbGVkOiAke3N9YCkse2NvZGU6VC5TSUdOQUxfRVJST1J9KTp7Y29kZTpULlNVQ0NFU1N9fSkpfWRlbGV0ZVJvb21BdHRyaWJ1dGVzKGUsdCxyPSExKXtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0IG49eWllbGQgdGhpcy5fY29udGV4dC5yZW1vdmVSVENEYXRhKHRoaXMuX3Jvb21JZCxlLHIsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5SVENBcGlUeXBlLlJPT00sdCk7cmV0dXJuIG4hPT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTPyhDLmVycm9yKGBEZWxldGVSb29tQXR0cmlidXRlIEZhaWxlZDogJHtufWApLHtjb2RlOlQuU0lHTkFMX0VSUk9SfSk6e2NvZGU6VC5TVUNDRVNTfX0pKX1nZXRSb29tQXR0cmlidXRlcyhlPVtdLHQ9ITEpe3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3R7Y29kZTpyLGRhdGE6bn09eWllbGQgdGhpcy5fY29udGV4dC5nZXRSVENEYXRhKHRoaXMuX3Jvb21JZCxlLHQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5SVENBcGlUeXBlLlJPT00pO3JldHVybiByIT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUz8oQy5lcnJvcihgR2V0Um9vbUF0dHJpYnV0ZXMgRmFpbGVkOiAke3J9YCkse2NvZGU6VC5TSUdOQUxfRVJST1J9KTp7Y29kZTpULlNVQ0NFU1MsZGF0YTpufX0pKX1fc2V0VXNlckF0dHJpYnV0ZVZhbHVlKGUsdCxyKXtyZXR1cm4gdGhpcy5fY29udGV4dC5zZXRSVENEYXRhKHRoaXMuX3Jvb21JZCxlLHQsITEsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5SVENBcGlUeXBlLlBFUlNPTixyKX1fZGVsZXRlVXNlckF0dHJpYnV0ZXMoZSx0KXtyZXR1cm4gdGhpcy5fY29udGV4dC5yZW1vdmVSVENEYXRhKHRoaXMuX3Jvb21JZCxlLCExLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uUlRDQXBpVHlwZS5QRVJTT04sdCl9X2dldFVzZXJBdHRyaWJ1dGVzKGUpe3JldHVybiB0aGlzLl9jb250ZXh0LmdldFJUQ0RhdGEodGhpcy5fcm9vbUlkLGUsITEsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5SVENBcGlUeXBlLlBFUlNPTil9aXNEZXN0cm95ZWQoKXtyZXR1cm4gdGhpcy5fZGVzdHJveWVkfV9fZGVzdHJveShlKXtyZXR1cm4gdGhpcy5fbGVhdmVIYW5kbGUoZSl9X2xlYXZlSGFuZGxlKGUpe3ZhciB0O3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7dGhpcy5fZGVzdHJveWVkfHwodGhpcy5fZGVzdHJveWVkPSEwLG51bGw9PT0odD10aGlzLl9hdWRpb0xldmVsUmVwb3J0KXx8dm9pZCAwPT09dHx8dC5jbGVhckF1ZGlvTGV2ZWxSZXBvcnRUaW1lcigpLGUmJih5aWVsZCB0aGlzLl9jb250ZXh0LnF1aXRSVENSb29tKHRoaXMuX3Jvb21JZCkpLHRoaXMuX2lzTWFpblJvb20mJnRoaXMuX3F1aXRBbGxQS1Jvb20oKSx0aGlzLl9wYy5yZW1vdmVBbGxMb2NhbFRyYWNrKCksdGhpcy5fcGluZ2VyLnN0b3AoKSx0aGlzLl9pc01haW5Sb29tJiYoeWllbGQgdGhpcy5fc2VydmljZS5leGl0KHRoaXMuX2dldFJUQ1JlcWVzdEhlYWRlcnMoKSkpLHRoaXMuX3BjLmRlc3Ryb3koKSx0aGlzLl9wb2xhcmlzUmVwb3J0PW51bGwsdGhpcy5fcmVtb3ZlUmVtb3RlVHJhY2tzKCkpfSkpfV9vbkxvY2FsVHJhY2tEZXN0cm9pZWQoZSl7ZSBpbnN0YW5jZW9mIFhlJiZlLl9faXNUaW55KCl8fHRoaXMudW5wdWJsaXNoKFtlXSl9X29uTG9jYWxUcmFja011dGVkKGUpe3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3QgdD1lLmdldFRyYWNrSWQoKSxyPXRoaXMuX2NvbnRleHQuZ2V0Q3VycmVudElkKCksbj1be3Jlc291cmNlSWQ6dCxlbmFibGVkOiFlLmlzTG9jYWxNdXRlZCgpfV0scz10aGlzLl9yb29tUmVzb3VyY2VzW3JdfHxbXSxvPVtdO2ZvcihsZXQgZT0wO2U8cy5sZW5ndGg7ZSs9MSl7Y29uc3QgdD1zW2VdLHI9bXQodCksaT1uLmZpbmRJbmRleCgoZT0+ZS5yZXNvdXJjZUlkPT09cikpO2lmKGk+PTApe2NvbnN0e2VuYWJsZWQ6ZX09bltpXTt0LnN0YXRlPWU/MTowLG8ucHVzaCh0KTticmVha319Y29uc3QgYT15aWVsZCBrKCgoKT0+dGhpcy5fY29udGV4dC5zZXRSVENUb3RhbFJlcyh0aGlzLl9yb29tSWQsY3QoTnQuTU9ESUZZLG8pLGR0KHMpLE50LlRPVEFMX0NPTlRFTlRfUkVTT1VSQ0UpKSk7YSE9PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1MmJkMuZXJyb3IoXCJub3RpY2UgYHRyYWNrLmVuYWJsZWRgIGNoYW5nZSBmYWlsZWQgLT4gY29kZTogXCIrYSl9KSl9X3JlbW92ZVB1YkZhaWxlZFRyYWNrcyhlKXtlLmZvckVhY2goKGU9Pntjb25zdCB0PWUgaW5zdGFuY2VvZiB6ZT9lOmUudHJhY2s7Qy5kZWJ1ZyhgcmVtb3ZlIHB1YiBmYWlsZWQgdHJhY2sgZnJvbSBwZWVyY29ubmVjdGlvbiAtPiB0cmFja0lkOiAke3QuZ2V0VHJhY2tJZCgpfWApLHRoaXMuX3BjLnJlbW92ZUxvY2FsVHJhY2tCeUlkKHQuZ2V0VHJhY2tJZCgpKX0pKX1wdWJsaXNoKGUpe3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIGsoKCgpPT50aGlzLl9fcHVibGlzaChlKSkpfSkpfV9fcHVibGlzaChlKXtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2lmKCF0aGlzLl9pc01haW5Sb29tJiZ0aGlzIGluc3RhbmNlb2YgX3IpcmV0dXJuIEMuZXJyb3IoXCJ0aGUgYHB1Ymxpc2hgIGlzIGRpc2FibGVkIGluIFBLIHJvb20gXCIpLHtjb2RlOlQuVEhFX0ZVTkNUSU9OX0lTX0RJU0FCTEVEX0lOX1BLUk9PTX07aWYodGhpcy5fYXNzZXJ0Um9vbURlc3Ryb3llZCgpKXJldHVybiBDLmVycm9yKGBwdWJsaXNoIGZhaWxlZCwgcm9vbSBoYXMgYmVlbiBkZXN0cm95ZWQuIC0+IHJvb21JZDogJHt0aGlzLl9yb29tSWR9YCkse2NvZGU6VC5ST09NX0hBU19CRUVOX0RFU1RST1lFRH07aWYoISgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18udmFsaWRhdGUpKFwidHJhY2tzXCIsZSwoKCk9PigwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uaXNBcnJheSkoZSkmJmUubGVuZ3RoPjAmJmUuZXZlcnkoKGU9PmUgaW5zdGFuY2VvZiB6ZXx8ZS50cmFjayBpbnN0YW5jZW9mIHplKSkpLCEwKSlyZXR1cm4gQy5lcnJvcihgcHVibGlzaCBmYWlsZWQsIHRyYWNrcyBpcyBpbnZhbGlkIC0+IHJvb21JZDogJHt0aGlzLl9yb29tSWR9YCkse2NvZGU6VC5QQVJBTVNfRVJST1J9O2NvbnN0IHQ9dGhpcy5fY29udGV4dC5nZXRDdXJyZW50SWQoKTtpZih0aGlzLl9wYy5nZXRMb2NhbFRyYWNrcygpLmxlbmd0aCsoZT0+e2xldCB0PTA7cmV0dXJuIGUuZm9yRWFjaCgoZT0+e2UgaW5zdGFuY2VvZiB6ZT90Kys6ZS5wdWJUaW55JiZlLnRyYWNrLmlzVmlkZW9UcmFjaygpP3QrPTI6dCsrfSkpLHR9KShlKT4xMClyZXR1cm4gQy5lcnJvcihgcHVibGlzaCBmYWlsZWQsIHRyYWNrcyBsaW1pdCBleGNlZWRlZCAtPiByb29tSWQ6ICR7dGhpcy5fcm9vbUlkfWApLHtjb2RlOlQuUFVCTElTSF9UUkFDS19MSU1JVF9FWENFRURFRH07Qy5kZWJ1ZyhgcHVibGlzaCB0cmFja3MgLT4gcm9vbUlkOiAke3RoaXMuX3Jvb21JZH0sIHRyYWNrczogJHtlLm1hcCh0cil9YCksZS5mb3JFYWNoKChlPT57Y29uc3R7dHJhY2s6dCxwdWJUaW55OnJ9PWUgaW5zdGFuY2VvZiB6ZT97cHViVGlueTohMSx0cmFjazplfTplO2lmKHRoaXMuX3BjLmFkZExvY2FsVHJhY2sodCksdC5pc1ZpZGVvVHJhY2soKSYmcil7bGV0IGU7dHJ5e2U9dC5fX2lubmVyR2V0TWVkaWFTdHJlYW1UcmFjaygpLmNsb25lKCk7Y29uc3QgaT1yLmZyYW1lUmF0ZXx8QmUuRlBTXzE1LG49ci5yZXNvbHV0aW9ufHxIZS5XMTc2X0gxNDQse3dpZHRoOnMsaGVpZ2h0Om99PUN0KG4pLGE9RXQoaSk7ZS5hcHBseUNvbnN0cmFpbnRzKHt3aWR0aDpzLGhlaWdodDpvLGZyYW1lUmF0ZTphfSl9Y2F0Y2gocil7cmV0dXJuIG51bGw9PWV8fGUuc3RvcCgpLHZvaWQgQy53YXJuKGBwdWJUaW55IGZhaWxlZCAtPiBpZDogJHt0LmdldFRyYWNrSWQoKX0sIG1zZzogJHtyLm1lc3NhZ2V9YCl9dGhpcy5fcGMuYWRkTG9jYWxUcmFjayhuZXcgWGUodC5nZXRUYWcoKSx0LmdldFVzZXJJZCgpLGUsITApKX19KSksdGhpcy5fcGMuY2xlYXJSZVRyeUV4Y2hhbmdlVGltZXIoKTtjb25zdCByPXlpZWxkIHRoaXMuX2NyZWF0ZUV4Y2hhbmdlUGFyYW1zKHRoaXMuX3N1YnNjcmliZWRMaXN0LCExKSxuPXRoaXMuX2dldFB1c2hPdGhlclJvb21zUGFyYW1zKCk7biYmKHIucHVzaE90aGVyUm9vbXM9bik7Y29uc3Qgcz15aWVsZCB0aGlzLl9leGNoYW5nZUhhbmRsZShyKTtpZihzLmNvZGUhPT1ULlNVQ0NFU1MpcmV0dXJuIEMuZXJyb3IoYHB1Ymxpc2ggZmFpbGVkIC0+IHJvb21JZDogJHt0aGlzLl9yb29tSWR9LCBjb2RlOiAke3MuY29kZX1gKSx0aGlzLl9yZW1vdmVQdWJGYWlsZWRUcmFja3MoZSkse2NvZGU6cy5jb2RlfTtjb25zdHtwdWJsaXNoTGlzdDpvLHNkcDphLHJlc3VsdENvZGU6bCxtZXNzYWdlOmgsdXJsczpwLG1jdVB1Ymxpc2hMaXN0Ol99PXMuZGF0YTtpZihsIT09VC5TVUNDRVNTKXJldHVybiBDLmVycm9yKGBwdWJsaXNoIGZhaWxlZCAtPiByb29tSWQ6ICR7dGhpcy5fcm9vbUlkfSwgY29kZTogJHtsfSwgbXNnOiAke2h9YCksdGhpcy5fcmVtb3ZlUHViRmFpbGVkVHJhY2tzKGUpLHtjb2RlOmx9O2NvbnN0IG09eWllbGQgdGhpcy5fcGMuc2V0UmVtb3RlQW5zd2VyKGEuc2RwKTtpZihtIT09VC5TVUNDRVNTKXJldHVybntjb2RlOm19O2NvbnN0IGY9dGhpcy5fcm9vbVJlc291cmNlc1t0XSx2PW8ubWFwKChlPT5PYmplY3QuYXNzaWduKHt0YWc6ZS5tc2lkLnNwbGl0KFwiX1wiKS5wb3AoKSxzdGF0ZTp0aGlzLl9nZXRSZXNvdXJjZVN0YXRlKG10KGUpKX0sZSkpKSx7cHVibGlzaGVkTGlzdDpSfT1ndChmLHYpLGc9KG51bGw9PV8/dm9pZCAwOl8ubWFwKChlPT5PYmplY3QuYXNzaWduKHt0YWc6ZS5tc2lkLnNwbGl0KFwiX1wiKS5wb3AoKSxzdGF0ZToxfSxlKSkpKXx8W10sUz15aWVsZCB0aGlzLl9jb250ZXh0LnNldFJUQ1RvdGFsUmVzKHRoaXMuX3Jvb21JZCxjdChOdC5QVUJMSVNILFIpLGR0KHYpLE50LlRPVEFMX0NPTlRFTlRfUkVTT1VSQ0UsZHQoZykpO2lmKFMhPT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTKXJldHVybiBDLmVycm9yKGBzZW5kIHB1Ymxpc2ggc3RyZWFtcyBub3RpZmljYXRpb24gZmFpbGVkOiAke1N9YCkse2NvZGU6VC5TSUdOQUxfRVJST1J9O3RoaXMuX3Jvb21SZXNvdXJjZXNbdF09djtjb25zdCBJPVIubWFwKChlPT5tdChlKSkpO3JldHVybiB0aGlzLl9wb2xhcmlzUmVwb3J0JiZ0aGlzLl9wb2xhcmlzUmVwb3J0LnNlbmRSMih6dC5QVUJMSVNILFF0LkJFR0lOLEkpLGUuZm9yRWFjaCgoZT0+e2NvbnN0e3RyYWNrOnR9PWUgaW5zdGFuY2VvZiB6ZT97dHJhY2s6ZX06ZTt0Ll9faW5uZXJTZXRQdWJsaXNoZWQoITApfSkpLEMuZGVidWcoYHB1Ymxpc2ggc3VjY2VzczogJHtJLmpvaW4oXCIsXCIpfWApLHRoaXMuX3Jvb21Nb2RlPT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5SVENNb2RlLkxJVkU/e2NvZGU6VC5TVUNDRVNTLGxpdmVVcmw6bnVsbD09cD92b2lkIDA6cC5saXZlVXJsfTp7Y29kZTpULlNVQ0NFU1N9fSkpfV9nZXRQdXNoT3RoZXJSb29tc1BhcmFtcygpe2lmKHRoaXMgaW5zdGFuY2VvZiBfcil7Y29uc3R7Y29kZTplLHJvb21QS0hhbmRsZXI6dH09dGhpcy5nZXRSb29tUEtIYW5kbGVyKCkscj1bXTtpZihlPT09VC5TVUNDRVNTJiZ0KXtjb25zdCBlPXQuZ2V0Sm9pbmVkUEtSb29tcygpO2Zvcihjb25zdCBpIGluIGUpe2NvbnN0IG49ZVtpXS5nZXRTZXNzaW9uSWQoKSxzPXQuZ2V0UEtJbmZvKGkpO2lmKCFzKXJldHVybjtjb25zdHtpbnZpdGVyVXNlckF1dG9NaXg6byxpbnZpdGVlVXNlckF1dG9NaXg6YSxpbnZpdGVyVXNlcklkOmN9PXMsZD10aGlzLl9jb250ZXh0LmdldEN1cnJlbnRJZCgpPT09YztyLnB1c2goe3Jvb21JZDppLHNlc3Npb25JZDpuLGF1dG9NaXg6ZD8hIW86ISFhfSl9fXJldHVybiByfX1fcmVUcnlFeGNoYW5nZSgpe3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7aygoKCk9PlModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCBlPXlpZWxkIHRoaXMuX2NyZWF0ZUV4Y2hhbmdlUGFyYW1zKHRoaXMuX3N1YnNjcmliZWRMaXN0LCEwKSx0PXRoaXMuX2dldFB1c2hPdGhlclJvb21zUGFyYW1zKCk7dCYmKGUucHVzaE90aGVyUm9vbXM9dCk7Y29uc3Qgcj15aWVsZCB0aGlzLl9leGNoYW5nZUhhbmRsZShlKTtpZihyLmNvZGUhPT1ULlNVQ0NFU1MpcmV0dXJuIEMuZXJyb3IoYHJlVHJ5RXhjaGFuZ2UgZmFpbGVkOiAke3IuY29kZX1gKSx7Y29kZTpyLmNvZGV9O2NvbnN0e3NkcDppLHJlc3VsdENvZGU6bn09ci5kYXRhO2lmKG4hPT1ULlNVQ0NFU1MpcmV0dXJuIEMuZXJyb3IoYHJlVHJ5RXhjaGFuZ2UgZmFpbGVkOiAke259YCkse2NvZGU6bn07dGhpcy5fcGMuY2xlYXJSZVRyeUV4Y2hhbmdlVGltZXIoKTtjb25zdCBzPXlpZWxkIHRoaXMuX3BjLnNldFJlbW90ZUFuc3dlcihpLnNkcCk7cmV0dXJuIHMhPT1ULlNVQ0NFU1M/e2NvZGU6c306dm9pZCAwfSkpKSl9KSl9X2V4Y2hhbmdlSGFuZGxlKGUpe3JldHVybiB0aGlzLl9zZXJ2aWNlLmV4Y2hhbmdlKHRoaXMuX2dldFJUQ1JlcWVzdEhlYWRlcnMoKSxlKX1fZ2V0UlRDUmVxZXN0SGVhZGVycygpe3JldHVybntcIkFwcC1LZXlcIjp0aGlzLl9jb250ZXh0LmdldEFwcGtleSgpLFJvb21JZDp0aGlzLl9yb29tSWQsVG9rZW46dGhpcy5fdG9rZW4sUm9vbVR5cGU6dGhpcy5fcm9vbU1vZGUsVXNlcklkOnRoaXMuX2NvbnRleHQuZ2V0Q3VycmVudElkKCl9fV9jcmVhdGVFeGNoYW5nZVBhcmFtcyhlLHQpe3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJue3NkcDp5aWVsZCB0aGlzLl9wYy5jcmVhdGVPZmZlcih0KSxleHRlbmQ6SlNPTi5zdHJpbmdpZnkoe3Jlc29sdXRpb25JbmZvOnRoaXMuX3BjLmdldE91dGJvdW5kVmlkZW9JbmZvKCl9KSxzdWJzY3JpYmVMaXN0OmUuZmlsdGVyKChlPT57Y29uc3QgdD1lLnRyYWNrLmdldFRyYWNrSWQoKSx7dXNlcklkOnJ9PWZ0KHQpO2lmKCF0aGlzLl9yb29tUmVzb3VyY2VzW3JdKXJldHVybiExO2NvbnN0IGk9dGhpcy5fcm9vbVJlc291cmNlc1tyXS5maWx0ZXIoKGU9PnQ9PT1gJHtlLm1zaWR9XyR7ZS5tZWRpYVR5cGV9YCkpLmxlbmd0aDtyZXR1cm4gaX0pKS5tYXAoKGU9Pih7c2ltdWxjYXN0OmUuc3ViVGlueT9NdC5USU5ZOk10Lk5PUk1BTCxyZXNvbHV0aW9uOlwiXCIsdXJpOnRoaXMuX2dldFJlc291cmNlQnlJZChlLnRyYWNrLmdldFRyYWNrSWQoKSkudXJpfSkpKSxzd2l0Y2hzdHJlYW06ITF9fSkpfV9nZXRSZXNvdXJjZVN0YXRlKGUpe3ZhciB0O3JldHVybihudWxsPT09KHQ9dGhpcy5nZXRMb2NhbFRyYWNrKGUpKXx8dm9pZCAwPT09dD92b2lkIDA6dC5pc0xvY2FsTXV0ZWQoKSk/MDoxfXVucHVibGlzaChlKXtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiBrKCgoKT0+dGhpcy5fX3VucHVibGlzaChlKSkpfSkpfV9fdW5wdWJsaXNoKGUpe3ZhciB0O3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7aWYoIXRoaXMuX2lzTWFpblJvb20mJnRoaXMgaW5zdGFuY2VvZiBfcilyZXR1cm4gQy5lcnJvcihcInRoZSBgdW5wdWJsaXNoYCBpcyBkaXNhYmxlZCBpbiBQSyByb29tIFwiKSx7Y29kZTpULlRIRV9GVU5DVElPTl9JU19ESVNBQkxFRF9JTl9QS1JPT019O2lmKHRoaXMuX2Fzc2VydFJvb21EZXN0cm95ZWQoKSlyZXR1cm4gQy53YXJuKGByb29tIGhhcyBiZWVuIGRlc3Ryb3llZCwgbm8gbmVlZCB0byB1bnB1Ymxpc2ggdHJhY2tzIC0+IHJvb21JZDogJHt0aGlzLl9yb29tSWR9YCkse2NvZGU6VC5TVUNDRVNTfTtjb25zdCByPXRoaXMuX2NvbnRleHQuZ2V0Q3VycmVudElkKCk7aWYoISgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18udmFsaWRhdGUpKFwidHJhY2tzXCIsZSwoKCk9PmUuZXZlcnkoKGU9PmUuZ2V0VXNlcklkKCk9PT1yJiZlIGluc3RhbmNlb2YgemUpKSksITApKXJldHVybiBDLndhcm4oYHVucHVibGlzaCBmYWlsZWQsIHRyYWNrcyBpcyBpbnZhbGlkIC0+IHJvb21JZDogJHt0aGlzLl9yb29tSWR9LCB0cmFja3M6ICR7ZS5tYXAodHIpfWApLHtjb2RlOlQuUEFSQU1TX0VSUk9SfTtjb25zdCBuPWUubWFwKChlPT5lLmdldFRyYWNrSWQoKSkpLHM9bi5tYXAodGhpcy5fZ2V0UmVzb3VyY2VCeUlkLmJpbmQodGhpcykpLmZpbHRlcigoZT0+ISFlKSk7aWYoMD09PXMubGVuZ3RoKXJldHVybntjb2RlOlQuU1VDQ0VTU307Y29uc3Qgbz10aGlzLl9yb29tUmVzb3VyY2VzW3JdLmZpbHRlcigoZT0+IXMuaW5jbHVkZXMoZSkpKTtuLmZvckVhY2goKGU9PnRoaXMuX3BjLnJlbW92ZUxvY2FsVHJhY2tCeUlkKGUpKSksbnVsbD09PSh0PXRoaXMuX3BvbGFyaXNSZXBvcnQpfHx2b2lkIDA9PT10fHx0LnNlbmRSMih6dC5QVUJMSVNILFF0LkVORCxuKSx0aGlzLl9wYy5jbGVhclJlVHJ5RXhjaGFuZ2VUaW1lcigpO2NvbnN0IGE9eWllbGQgdGhpcy5fY3JlYXRlRXhjaGFuZ2VQYXJhbXModGhpcy5fc3Vic2NyaWJlZExpc3QsITEpLGQ9dGhpcy5fZ2V0UHVzaE90aGVyUm9vbXNQYXJhbXMoKTtkJiYoYS5wdXNoT3RoZXJSb29tcz1kKTtjb25zdCB1PXlpZWxkIHRoaXMuX2V4Y2hhbmdlSGFuZGxlKGEpO2lmKHUuY29kZSE9PVQuU1VDQ0VTUylyZXR1cm4gQy5lcnJvcihgZXhjaGFuZ2UgZmFpbGVkIC0+IGNvZGU6ICR7dS5jb2RlfWApLHtjb2RlOnUuY29kZX07Y29uc3R7cHVibGlzaExpc3Q6bCxzZHA6aCxyZXN1bHRDb2RlOnAsbWVzc2FnZTpfLG1jdVB1Ymxpc2hMaXN0Om19PXUuZGF0YTtwIT09VC5TVUNDRVNTJiZDLmVycm9yKGB1bnB1Ymxpc2ggc3RyZWFtcyBmYWlsZWQgLT4gY29kZTogJHtwfSwgbXNnOiAke199YCk7Y29uc3QgZj1tP20ubWFwKChlPT5PYmplY3QuYXNzaWduKHt0YWc6ZS5tc2lkLnNwbGl0KFwiX1wiKS5wb3AoKSxzdGF0ZToxfSxlKSkpOltdLHY9eWllbGQgdGhpcy5fY29udGV4dC5zZXRSVENUb3RhbFJlcyh0aGlzLl9yb29tSWQsY3QoTnQuVU5QVUJMSVNILHMpLGR0KG8pLE50LlRPVEFMX0NPTlRFTlRfUkVTT1VSQ0UsZHQoZikpO2lmKHYhPT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTKXJldHVybiBDLmVycm9yKFwic2VuZCB1bnB1Ymxpc2ggbm90aWZpY2F0aW9uIGZhaWxlZDpcIix2KSx7Y29kZTpULlNJR05BTF9FUlJPUn07Qy5kZWJ1ZyhgdW5wdWJsaXNoIHN1Y2Nlc3MgLT4gdHJhY2tzOiAke24uam9pbihcIixcIil9YCk7Y29uc3QgUj15aWVsZCB0aGlzLl9wYy5zZXRSZW1vdGVBbnN3ZXIoaC5zZHApO2lmKFIhPT1ULlNVQ0NFU1MpcmV0dXJue2NvZGU6Un07Y29uc3QgZz1sLm1hcCgoZT0+T2JqZWN0LmFzc2lnbih7dGFnOmUubXNpZC5zcGxpdChcIl9cIikucG9wKCksc3RhdGU6dGhpcy5fZ2V0UmVzb3VyY2VTdGF0ZShtdChlKSl9LGUpKSk7cmV0dXJuIHRoaXMuX3Jvb21SZXNvdXJjZXNbcl09Zyx7Y29kZTpULlNVQ0NFU1N9fSkpfV9nZXRSZXNvdXJjZUJ5SWQoZSl7Y29uc3R7dXNlcklkOnR9PWZ0KGUpO3JldHVybiB0aGlzLl9yb29tUmVzb3VyY2VzW3RdLmZpbmQoKHQ9Pm10KHQpPT09ZSkpfV9pc1ZhbGlkUmVzb3VyY2VJZChlKXt2YXIgdDtjb25zdHt1c2VySWQ6cn09ZnQoZSk7cmV0dXJuISEobnVsbD09PSh0PXRoaXMuX3Jvb21SZXNvdXJjZXNbcl0pfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmZpbmQoKHQ9Pm10KHQpPT09ZSkpKX1zdWJzY3JpYmUoZSl7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4gaygoKCk9PnRoaXMuX19zdWJzY3JpYmUoZSwhMSkpKX0pKX1fX3N1YnNjcmliZShlLHQ9ITEpe3ZhciByO3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7aWYodGhpcy5fYXNzZXJ0Um9vbURlc3Ryb3llZCgpKXJldHVybiBDLmVycm9yKGBzdWJzY3JpYmUgZmFpbGVkLCByb29tIGhhcyBiZWVuIGRlc3Ryb3llZCAtPiByb29tSWQ6ICR7dGhpcy5fcm9vbUlkfWApLHtjb2RlOlQuUk9PTV9IQVNfQkVFTl9ERVNUUk9ZRUR9O2lmKCEoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLnZhbGlkYXRlKShcInRyYWNrc1wiLGUsKCgpPT4oMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmlzQXJyYXkpKGUpJiZlLmxlbmd0aD4wJiZlLmV2ZXJ5KChlPT5lIGluc3RhbmNlb2Ygc3R8fGUudHJhY2sgaW5zdGFuY2VvZiBzdCkpKSwhMCkpcmV0dXJuIEMuZXJyb3IoYHN1YnNjcmliZSBmYWlsZWQsIHRyYWNrcyBpcyBpbnZhbGlkIC0+IHJvb21JZDogJHt0aGlzLl9yb29tSWR9YCkse2NvZGU6VC5QQVJBTVNfRVJST1J9O0MuaW5mbyhgc3Vic2NyaWJlIC0+IHJvb21JZDogJHt0aGlzLl9yb29tSWR9LCB0cmFja3M6ICR7ZS5tYXAodHIpfWApO2NvbnN0IGk9dGhpcy5fc3Vic2NyaWJlZExpc3QubWFwKChlPT5PYmplY3QuYXNzaWduKHt9LGUpKSksbj1lLm1hcCgoZT0+ZSBpbnN0YW5jZW9mIHN0P3t0cmFjazplfTplKSk7bGV0IHM9ITE7Y29uc3Qgbz1bXTtyZXR1cm4gbi5mb3JFYWNoKChlPT57Y29uc3QgdD1lLnRyYWNrLmdldFRyYWNrSWQoKTtvLnB1c2godCk7Y29uc3Qgcj1pLmZpbmQoKGU9PmUudHJhY2suZ2V0VHJhY2tJZCgpPT09dCkpO3ImJnIuc3ViVGlueT09PWUuc3ViVGlueXx8KHI/ci5zdWJUaW55PWUuc3ViVGlueTppLnB1c2goZSkscz0hMCl9KSksc3x8dD8obnVsbD09PShyPXRoaXMuX3BvbGFyaXNSZXBvcnQpfHx2b2lkIDA9PT1yfHxyLnNlbmRSMih6dC5TVUJTQ1JJQkUsUXQuQkVHSU4sbyksdGhpcy5fdXBkYXRlU3ViTGlzdEhhbmRsZShpLCEwKSk6e2NvZGU6VC5TVUNDRVNTfX0pKX11bnN1YnNjcmliZShlKXtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiBrKCgoKT0+dGhpcy5fX3Vuc3Vic2NyaWJlKGUpKSl9KSl9X191bnN1YnNjcmliZShlKXt2YXIgdDtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2lmKHRoaXMuX2Fzc2VydFJvb21EZXN0cm95ZWQoKSlyZXR1cm4gQy53YXJuKGByb29tIGhhcyBiZWVkIGRlc3Ryb3llZCwgbm8gbmVlZCB0byB1bnN1YnNjcmliZSB0cmFja3MgLT4gcm9vbUlkOiAke3RoaXMuX3Jvb21JZH1gKSx7Y29kZTpULlNVQ0NFU1N9O2lmKCEoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLnZhbGlkYXRlKShcInRyYWNrc1wiLGUsKCgpPT4oMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmlzQXJyYXkpKGUpJiZlLmxlbmd0aD4wJiZlLmV2ZXJ5KChlPT5lIGluc3RhbmNlb2Ygc3QpKSksITApKXJldHVybiBDLmVycm9yKGB1bnN1YnNjcmliZSBmYWlsZWQsIHRyYWNrcyBpcyBpbnZhbGlkIC0+IHJvb21JZDogJHt0aGlzLl9yb29tSWR9YCkse2NvZGU6VC5QQVJBTVNfRVJST1J9O0MuaW5mbyhgdW5zdWJzY3JpYmUgLT4gcm9vbUlkOiAke3RoaXMuX3Jvb21JZH0sIHRyYWNrczogJHtlLm1hcCh0cil9YCk7Y29uc3Qgcj10aGlzLl9zdWJzY3JpYmVkTGlzdC5tYXAoKGU9Pk9iamVjdC5hc3NpZ24oe30sZSkpKS5maWx0ZXIoKHQ9PiFlLmluY2x1ZGVzKHQudHJhY2spKSk7cmV0dXJuIG51bGw9PT0odD10aGlzLl9wb2xhcmlzUmVwb3J0KXx8dm9pZCAwPT09dHx8dC5zZW5kUjIoenQuU1VCU0NSSUJFLFF0LkVORCxlLm1hcCgoZT0+ZS5nZXRUcmFja0lkKCkpKSksdGhpcy5fdXBkYXRlU3ViTGlzdEhhbmRsZShyLCExKX0pKX1fYXNzZXJ0Um9vbURlc3Ryb3llZCgpe2lmKHRoaXMuX2Rlc3Ryb3llZCl7Y29uc3QgZT1cIlRoaXMgcm9vbSBoYXMgYmVlbiBkZXN0cm95ZWQuIFBsZWFzZSB1c2UgYFJDUlRDQ2xpZW50LmpvaW5SVENSb29tYCBvciBgUkNSVENDbGllbnQuam9pbkxpdmluZ1Jvb21gIHRvIGNhdGNoIGFub3RoZXIgaW5zdGFuY2UuXCI7cmV0dXJuIEMud2FybihlKSxULlJPT01fSEFTX0JFRU5fREVTVFJPWUVEfX1nZXRMb2NhbFRyYWNrKGUpe3JldHVybiB0aGlzLl9wYy5nZXRMb2NhbFRyYWNrKGUpfWdldExvY2FsVHJhY2tzKCl7cmV0dXJuIHRoaXMuX3BjLmdldExvY2FsVHJhY2tzKCl9Z2V0UmVtb3RlVHJhY2soZSl7cmV0dXJuIHRoaXMuX3JlbW90ZVRyYWNrc1tlXXx8bnVsbH11cGRhdGVTdWJMaXN0KGUpe3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIGsoKCgpPT50aGlzLl91cGRhdGVTdWJMaXN0SGFuZGxlKGUsITEpKSl9KSl9X3VwZGF0ZVN1Ykxpc3RIYW5kbGUoZSx0PSExKXtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2lmKHRoaXMuX2Fzc2VydFJvb21EZXN0cm95ZWQoKSlyZXR1cm57Y29kZTpULlJPT01fSEFTX0JFRU5fREVTVFJPWUVEfTtpZighKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy52YWxpZGF0ZSkoXCJyZXNvdXJjZXNcIixlLCgoKT0+KDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5pc0FycmF5KShlKSYmZS5ldmVyeSgoZT0+ZSBpbnN0YW5jZW9mIHN0fHxlLnRyYWNrIGluc3RhbmNlb2Ygc3QpKSksITApKXJldHVybiBDLmVycm9yKGB1cGRhdGUgc3VibGlzdCBmYWlsZWQsIHRyYWNrcyBpcyBpbnZhbGlkIC0+IHJvb21JZDogJHt0aGlzLl9yb29tSWR9YCkse2NvZGU6VC5QQVJBTVNfRVJST1J9O0MuaW5mbyhgdXBkYXRlIHN1YnNjcmliZSBsaXN0IC0+IHJvb21JZDogJHt0aGlzLl9yb29tSWR9LCBmb3JjZVJlcTogJHt0fSwgdHJhY2tzOiAke2UubWFwKHRyKX1gKTtsZXQgcj1lLm1hcCgoZT0+ZSBpbnN0YW5jZW9mIHN0P3t0cmFjazplfTpPYmplY3QuYXNzaWduKHt9LGUpKSk7Y29uc3QgaT17fTtyPXIuZmlsdGVyKChlPT57Y29uc3QgdD1lLnRyYWNrLmdldFRyYWNrSWQoKTtyZXR1cm4gdGhpcy5fcmVtb3RlVHJhY2tzW3RdPyFpW3RdJiYoaVt0XT0hMCk6KEMud2FybihgdHJhY2sgY2Fubm90IGZvdW5kIGluIHJvb20gLT4gdHJhY2tJZDogJHt0fWApLCExKX0pKS5tYXAoKGU9Pk9iamVjdC5hc3NpZ24oe30sZSkpKTtjb25zdCBuPXRoaXMuX3N1YnNjcmliZWRMaXN0Lm1hcCgoZT0+T2JqZWN0LmFzc2lnbih7fSxlKSkpO2lmKCF0KXtsZXQgZT0hMTtpZihyLmZvckVhY2goKHQ9Pntjb25zdCByPW4uZmluZEluZGV4KChlPT5lLnRyYWNrPT09dC50cmFjaykpO2lmKC0xPT09cilyZXR1cm4gdm9pZChlPSEwKTtuLnNwbGljZShyLDEpWzBdLnN1YlRpbnkhPT10LnN1YlRpbnkmJihlPSEwKX0pKSxuLmxlbmd0aCYmKGU9ITApLCFlKXJldHVybntjb2RlOlQuU1VDQ0VTU319dGhpcy5fcGMuY2xlYXJSZVRyeUV4Y2hhbmdlVGltZXIoKSx0aGlzLl9wYy51cGRhdGVTdWJSZW1vdGVUcmFja3Moci5tYXAoKGU9PmUudHJhY2spKSk7Y29uc3Qgcz15aWVsZCB0aGlzLl9jcmVhdGVFeGNoYW5nZVBhcmFtcyhyLCExKSxvPXRoaXMuX2dldFB1c2hPdGhlclJvb21zUGFyYW1zKCk7byYmKHMucHVzaE90aGVyUm9vbXM9byk7Y29uc3QgYT15aWVsZCB0aGlzLl9leGNoYW5nZUhhbmRsZShzKSx1PXIubWFwKChlPT5lLnRyYWNrLmdldFRyYWNrSWQoKSkpO2lmKGEuY29kZSE9PVQuU1VDQ0VTUylyZXR1cm57Y29kZTphLmNvZGV9O2NvbnN0e3NkcDpsLHJlc3VsdENvZGU6aCxtZXNzYWdlOnAsc3Vic2NyaWJlZExpc3Q6X309YS5kYXRhO2lmKGghPT1ULlNVQ0NFU1MpcmV0dXJuIEMuZXJyb3IoYGNoYW5nZSBzdWJzY3JpYmUgbGlzdCBmYWlsZWQ6ICR7aH1gKSx7Y29kZTpofTtDLmRlYnVnKGBzdWJzY3JpYmUgc3VjY2VzczogJHt1LmpvaW4oXCIsXCIpfWApO2NvbnN0IG09eWllbGQgdGhpcy5fcGMuc2V0UmVtb3RlQW5zd2VyKGwuc2RwKTtpZihtIT09VC5TVUNDRVNTKXJldHVybntjb2RlOm19O2NvbnN0IGY9bnVsbD09Xz92b2lkIDA6Xy5tYXAoKGU9PmAke2UubXNpZH1fJHtlLm1lZGlhVHlwZX1gKSksdj1yLmZpbHRlcigoZT0+bnVsbD09Zj92b2lkIDA6Zi5pbmNsdWRlcyhlLnRyYWNrLmdldFRyYWNrSWQoKSkpKSxSPXIuZmlsdGVyKChlPT4hKG51bGw9PWY/dm9pZCAwOmYuaW5jbHVkZXMoZS50cmFjay5nZXRUcmFja0lkKCkpKSkpO2Zvcihjb25zdCBlIGluIHRoaXMuX3JlbW90ZVRyYWNrcyl7Y29uc3QgdD12LnNvbWUoKHQ9PnQudHJhY2suZ2V0VHJhY2tJZCgpPT09ZSkpO3RoaXMuX3JlbW90ZVRyYWNrc1tlXS5fX2lubmVyU2V0U3Vic2NyaWJlZCh0KX1yZXR1cm4gdGhpcy5fc3Vic2NyaWJlZExpc3Quc3BsaWNlKDAsdGhpcy5fc3Vic2NyaWJlZExpc3QubGVuZ3RoLC4uLnYpLFIubGVuZ3RoP3tjb2RlOlQuU1VDQ0VTUyxmYWlsZWRMaXN0OlJ9Ontjb2RlOlQuU1VDQ0VTU319KSl9cmVnaXN0ZXJSb29tRXZlbnRMaXN0ZW5lcihlKXt0aGlzLl9hcHBMaXN0ZW5lcj1lfXJlZ2lzdGVyUmVwb3J0TGlzdGVuZXIoZSl7dGhpcy5fcGMucmVnaXN0ZXJSZXBvcnRMaXN0ZW5lcihlKX1vbkF1ZGlvTGV2ZWxDaGFuZ2UoZSx0KXt2YXIgcjtudWxsPT09KHI9dGhpcy5fYXVkaW9MZXZlbFJlcG9ydCl8fHZvaWQgMD09PXJ8fHIuY2xlYXJBdWRpb0xldmVsUmVwb3J0VGltZXIoKSx0aGlzLl9hdWRpb0xldmVsUmVwb3J0PW5ldyBlcih0aGlzKSx0aGlzLl9hdWRpb0xldmVsUmVwb3J0Lm9uQXVkaW9MZXZlbENoYW5nZShlLHR8fDFlMyl9X19vblJlY29ubmVjdGVkKGUpe3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7aWYoXCJjbG9zZWRcIj09PXRoaXMuX3BjLmdldFJUQ1BlZXJDb25uKCkuY29ubmVjdGlvblN0YXRlKXJldHVybiBDLndhcm4oXCJSVENQZWVyQ29ubmVjdGlvbiBjbG9zZWQuIFBsZWFzZSByZWpvaW4gcm9vbSB0byByZXN0b3JlIHNlcnZpY2VzLlwiKSx2b2lkIHRoaXMuX3J0Y3BlZXJDbG9zZWQoKTtjb25zdHtjb2RlOnQsZGF0YTpyfT15aWVsZCB0aGlzLl9jb250ZXh0LmpvaW5SVENSb29tKHRoaXMuX3Jvb21JZCx0aGlzLl9yb29tTW9kZSxlKTtpZih0IT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUylyZXR1cm4gdm9pZCBDLmVycm9yKGBSVEMgX19vblJlY29ubmVjdGVkIGdldFJUQ1Jvb21JbmZvIGZhaWxlZDogJHt0fWApO0MuZGVidWcoYFJUQyBfX29uUmVjb25uZWN0ZWQgZ2V0UlRDUm9vbUluZm8gc3VjY2VzczogJHtKU09OLnN0cmluZ2lmeShyKX1gKTtjb25zdCBuPVtdLHM9e30sbz17fSxhPXt9LGM9THQociksZD1PYmplY3Qua2V5cyhjKSx1PU9iamVjdC5rZXlzKHRoaXMuX3Jvb21SZXNvdXJjZXMpO2ZvcihsZXQgZT1kLmxlbmd0aC0xO2U+PTA7ZS09MSl7Y29uc3QgdD1kW2VdLHI9dS5pbmRleE9mKHQpO2lmKC0xPT09cil7bi5wdXNoKHQpLHNbdF09UnQoY1t0XSk7Y29udGludWV9Y29uc3QgaT10aGlzLl9yb29tUmVzb3VyY2VzW3RdLGw9Y1t0XSx7cHVibGlzaGVkTGlzdDpoLG1vZGlmaWVkTGlzdDpwLHVucHVibGlzaGVkTGlzdDpffT1ndChpLGwsITApO3NbdF09UnQoaCksb1t0XT1SdChfKSxhW3RdPVJ0KHApLHUuc3BsaWNlKHIsMSl9dS5sZW5ndGgmJnUuZm9yRWFjaCgoZT0+e2RlbGV0ZSB0aGlzLl9yb29tUmVzb3VyY2VzW2VdfSkpLE9iamVjdC5hc3NpZ24odGhpcy5fcm9vbVJlc291cmNlcyxjKSx1Lmxlbmd0aCYmdGhpcy5fY2FsbEFwcExpc3RlbmVyKFwib25Vc2VyTGVhdmVcIix1KSxuLmxlbmd0aCYmdGhpcy5fY2FsbEFwcExpc3RlbmVyKFwib25Vc2VySm9pblwiLG4pO2Zvcihjb25zdCBlIGluIG8pe2NvbnN0IHQ9b1tlXTtpZih0Lmxlbmd0aCl7Y29uc3QgZT10Lm1hcCgoZT0+dGhpcy5fcmVtb3RlVHJhY2tzW210KGUpXSkpO3lpZWxkIHRoaXMuX29uVXNlclVucHVibGlzaChlKX19cmV0dXJuIE9iamVjdC5rZXlzKHMpLmZvckVhY2goKGU9Pntjb25zdCB0PXNbZV07aWYoMD09PXQubGVuZ3RoKXJldHVybjtjb25zdCByPXQubWFwKChlPT57Y29uc3QgdD1tdChlKSx7dXNlcklkOnIsdGFnOmksbWVkaWFUeXBlOm59PWZ0KHQpLHM9dGhpcy5fcmVtb3RlVHJhY2tzW3RdPW49PT1GZS5BVURJT19PTkxZP25ldyBvdChpLHIpOm5ldyBhdChpLHIpO3JldHVybiBzLl9faW5uZXJTZXRSZW1vdGVNdXRlZCgwPT09ZS5zdGF0ZSksc30pKTt0aGlzLl9vblRyYWNrUHVibGlzaChyKX0pKSxPYmplY3Qua2V5cyhhKS5mb3JFYWNoKChlPT57YVtlXS5mb3JFYWNoKChlPT57Y29uc3QgdD1tdChlKSxyPXRoaXMuX3JlbW90ZVRyYWNrc1t0XTtyLl9faW5uZXJTZXRSZW1vdGVNdXRlZCgwPT09ZS5zdGF0ZSksci5pc0F1ZGlvVHJhY2soKT90aGlzLl9vbkF1ZGlvTXV0ZUNoYW5nZShyKTp0aGlzLl9vblZpZGVvTXV0ZUNoYW5nZShyKX0pKX0pKSx7ZGF0YTpyfX0pKX1fb25BdWRpb011dGVDaGFuZ2UoZSl7dGhpcy5fY2FsbEFwcExpc3RlbmVyKFwib25BdWRpb011dGVDaGFuZ2VcIixlKX1fb25WaWRlb011dGVDaGFuZ2UoZSl7dGhpcy5fY2FsbEFwcExpc3RlbmVyKFwib25WaWRlb011dGVDaGFuZ2VcIixlKX1fYWZ0ZXJDaGFuZ2VkUm9sZShlKXt9X3JlbW92ZVJlbW90ZVRyYWNrcygpe2NvbnN0IGU9T2JqZWN0LnZhbHVlcyh0aGlzLl9yZW1vdGVUcmFja3MpO2UubGVuZ3RoJiYoZS5mb3JFYWNoKChlPT57ZS5pc0F1ZGlvVHJhY2soKSYmZS5fX3JlbGVhc2VNZWRpYUVsZW1lbnQoKX0pKSx0aGlzLl9yZW1vdGVUcmFja3M9e30pfV9yZWdpc3RlclBLTXNnTGlzdGVuZXIoZSl7dGhpcy5fb25SZWN2UEtNc2c9ZX1fcXVpdEFsbFBLUm9vbSgpe319dmFyIGlyLG5yLHNyOyFmdW5jdGlvbihlKXtlW2UuQ1JPUD0xXT1cIkNST1BcIixlW2UuV0hPTEU9Ml09XCJXSE9MRVwifShpcnx8KGlyPXt9KSksZnVuY3Rpb24oZSl7ZVtlLkNVU1RPTUlaRT0xXT1cIkNVU1RPTUlaRVwiLGVbZS5TVVNQRU5TSU9OPTJdPVwiU1VTUEVOU0lPTlwiLGVbZS5BREFQVEFUSU9OPTNdPVwiQURBUFRBVElPTlwifShucnx8KG5yPXt9KSksZnVuY3Rpb24oZSl7ZVtlLkNST1A9MV09XCJDUk9QXCIsZVtlLldIT0xFPTJdPVwiV0hPTEVcIn0oc3J8fChzcj17fSkpO2NvbnN0IG9yPSgpPT4oe3ZlcnNpb246MSxtb2RlOm5yLlNVU1BFTlNJT059KTtjbGFzcyBhcntjb25zdHJ1Y3RvcihlLHQscil7dGhpcy5fb25GbHVzaD1lLHRoaXMuX2lzVmFsaWRUcmFja0lkPXQsdGhpcy5fc2VuZENETkluZm9TaWduYWw9cix0aGlzLl92YWx1ZXM9b3IoKX1zZXRIb3N0VmlkZW9UcmFjayhlKXtpZighdGhpcy5faXNWYWxpZFRyYWNrSWQoZSkpcmV0dXJuIEMuZXJyb3IoYHNldEhvc3RWaWRlb1RyYWNrIGZhaWxlZDogdmlkZW9UcmFja0lkIGlzIGludmFsaWQgLT4gJHtlfWApLHRoaXM7Y29uc3R7bWVkaWFUeXBlOnQsdGFnOnIsdXNlcklkOml9PWZ0KGUpO3JldHVybiB0IT09RmUuVklERU9fT05MWT8oQy5lcnJvcihgc2V0SG9zdFZpZGVvVHJhY2sgZmFpbGVkOiBraW5kIG9mIHJlc291cmNlIGlzIG5vdCAndmlkZW8nIC0+ICR7ZX1gKSx0aGlzKToodGhpcy5fdmFsdWVzLmhvc3Rfc3RyZWFtX2lkPXZ0KGksciksdGhpcyl9c2V0TWl4TGF5b3V0TW9kZShlKXtyZXR1cm5bbnIuQ1VTVE9NSVpFLG5yLlNVU1BFTlNJT04sbnIuQURBUFRBVElPTl0uaW5jbHVkZXMoZSk/KHRoaXMuX3ZhbHVlcy5tb2RlPWUsdGhpcyk6KEMuZXJyb3IoYGxheW91dCBtb2RlIGlzIGludmFsaWQ6ICR7ZX1gKSx0aGlzKX1fYWRkT3V0cHV0VmFsdWUoZSx0LHI9XCJub3JtYWxcIil7Y29uc3QgaT10aGlzLl92YWx1ZXMub3V0cHV0fHwodGhpcy5fdmFsdWVzLm91dHB1dD17dmlkZW86e25vcm1hbDp7d2lkdGg6NjQwLGhlaWdodDo0ODB9fX0pO2lmKFwiY2RuXCI9PT1lKXJldHVybiB2b2lkKGkuY2RuPXQpO2lmKFwiYXVkaW9cIj09PWUpcmV0dXJuIHZvaWQoaS5hdWRpbz17Yml0cmF0ZTp0fSk7Y29uc3Qgbj1pLnZpZGVvO2lmKFwibm9ybWFsXCIhPT1yJiZcInRpbnlcIiE9PXIpaWYoXCJiYWNrZ3JvdW5kQ29sb3JcIiE9PXIpaWYoXCJleHBhcmFtc1wiIT09cil7aWYoXCJiYWNrZ3JvdW5kUGljdHVyZVwiPT09cil7Y29uc3QgZT1uLmJhY2tncm91bmRQaWN0dXJlfHwobi5iYWNrZ3JvdW5kUGljdHVyZT17ZmlsbE1vZGU6aXIuQ1JPUCxwaWN0dXJlOltdfSk7T2JqZWN0LmFzc2lnbihlLHQpfX1lbHNlIG4uZXhwYXJhbXM9e3JlbmRlck1vZGU6dH07ZWxzZSBuLmJhY2tncm91bmRDb2xvcj10O2Vsc2V7Y29uc3QgZT1uW3JdfHwobltyXT17fSk7T2JqZWN0LmFzc2lnbihlLHQpfX1zZXRPdXRwdXRWaWRlb1Jlc29sdXRpb24oZSl7aWYoIVR0KGUpKXJldHVybiBDLndhcm4oXCJzZXRPdXRwdXRWaWRlb1Jlc29sdXRpb24gZmFpbGVkOiBgcmVzb2x1dGlvbmAgaXMgaW52YWxpZFwiKSx0aGlzO2NvbnN0e3dpZHRoOnQsaGVpZ2h0OnJ9PUN0KGUpO3JldHVybiB0aGlzLl9hZGRPdXRwdXRWYWx1ZShcInZpZGVvXCIse3dpZHRoOnQsaGVpZ2h0OnJ9LFwibm9ybWFsXCIpLHRoaXN9c2V0T3V0cHV0VmlkZW9GUFMoZSl7aWYoIUl0KGUpKXJldHVybiBDLndhcm4oXCJzZXRPdXRwdXRWaWRlb0ZQUyBmYWlsZWQ6IGBmcHNgIGlzIGludmFsaWRcIiksdGhpcztjb25zdCB0PUV0KGUpO3JldHVybiB0aGlzLl9hZGRPdXRwdXRWYWx1ZShcInZpZGVvXCIse2Zwczp0fSxcIm5vcm1hbFwiKSx0aGlzfXNldE91dHB1dFZpZGVvQml0cmF0ZShlKXtyZXR1cm4hKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5pc051bWJlcikoZSl8fGU8PTA/Qy5lcnJvcihgYml0cmF0ZSBpcyBpbnZhbGlkOiAke2V9YCk6dGhpcy5fYWRkT3V0cHV0VmFsdWUoXCJ2aWRlb1wiLHtiaXRyYXRlOmV9LFwibm9ybWFsXCIpLHRoaXN9c2V0T3V0cHV0VGlueVZpZGVvUmVzb2x1dGlvbihlKXtpZighVHQoZSkpcmV0dXJuIEMud2FybihcInNldE91dHB1dFRpbnlWaWRlb1Jlc29sdXRpb24gZmFpbGVkOiBgcmVzb2x1dGlvbmAgaXMgaW52YWxpZFwiKSx0aGlzO2NvbnN0e3dpZHRoOnQsaGVpZ2h0OnJ9PUN0KGUpO3JldHVybiB0aGlzLl9hZGRPdXRwdXRWYWx1ZShcInZpZGVvXCIse3dpZHRoOnQsaGVpZ2h0OnJ9LFwidGlueVwiKSx0aGlzfXNldE91dHB1dFRpbnlWaWRlb0ZQUyhlKXtpZighSXQoZSkpcmV0dXJuIEMud2FybihcInNldE91dHB1dFRpbnlWaWRlb0ZQUyBmYWlsZWQ6IGBmcHNgIGlzIGludmFsaWRcIiksdGhpcztjb25zdCB0PUV0KGUpO3JldHVybiB0aGlzLl9hZGRPdXRwdXRWYWx1ZShcInZpZGVvXCIse2Zwczp0fSxcInRpbnlcIiksdGhpc31zZXRPdXRwdXRUaW55VmlkZW9CaXRyYXRlKGUpe3JldHVybiEoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmlzTnVtYmVyKShlKXx8ZTw9MD9DLmVycm9yKGBiaXRyYXRlIGlzIGludmFsaWQ6ICR7ZX1gKTp0aGlzLl9hZGRPdXRwdXRWYWx1ZShcInZpZGVvXCIse2JpdHJhdGU6ZX0sXCJ0aW55XCIpLHRoaXN9c2V0T3V0cHV0VmlkZW9SZW5kZXJNb2RlKGUpe3JldHVybltzci5DUk9QLHNyLldIT0xFXS5pbmNsdWRlcyhlKT90aGlzLl9hZGRPdXRwdXRWYWx1ZShcInZpZGVvXCIsZSxcImV4cGFyYW1zXCIpOkMuZXJyb3IoYHJlbmRlck1vZGUgaXMgaW52YWxpZDogJHtlfWApLHRoaXN9c2V0T3V0cHV0QXVkaW9CaXRyYXRlKGUpe3JldHVybiAoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmlzTnVtYmVyKShlKSYmZT4wP3RoaXMuX2FkZE91dHB1dFZhbHVlKFwiYXVkaW9cIixlKTpDLmVycm9yKGBiaXRyYXRlIGlzIGludmFsaWQ6ICR7ZX1gKSx0aGlzfXNldE91dHB1dEJhY2tncm91bmRDb2xvcihlKXtyZXR1cm4vXjB4W2EtZkEtRjAtOV17Nn0kLy50ZXN0KGUpP3RoaXMuX2FkZE91dHB1dFZhbHVlKFwidmlkZW9cIixlLFwiYmFja2dyb3VuZENvbG9yXCIpOkMuZXJyb3IoYGNvbG9yIGlzIGludmFsaWQ6ICR7ZX1gKSx0aGlzfWFkZE91dHB1dEJhY2tncm91bmRQaWN0dXJlKGUsdCxpLG4scyl7dmFyIG8sYSxjO2lmKCEoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmlzSHR0cFVybCkoZSkpcmV0dXJuIEMuZXJyb3IoYHVyaSBpcyBpbnZhbGlkOiAke2V9YCksdGhpcztpZihbdCxpLG4sc10uc29tZSgoZT0+ISgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uaXNOdW1iZXIpKGUpfHxlPDB8fGU+MSkpKXJldHVybiBDLmVycm9yKGBzb21lIGF0dHJzIG9mICh4LCB5LCB3LCBoKSBpcyBpbnZhbGlkOiAke3R9LCAke2l9LCAke259LCAke3N9YCksdGhpcztjb25zdCBkPShudWxsPT09KGM9bnVsbD09PShhPW51bGw9PT0obz10aGlzLl92YWx1ZXMub3V0cHV0KXx8dm9pZCAwPT09bz92b2lkIDA6by52aWRlbyl8fHZvaWQgMD09PWE/dm9pZCAwOmEuYmFja2dyb3VuZFBpY3R1cmUpfHx2b2lkIDA9PT1jP3ZvaWQgMDpjLnBpY3R1cmUpfHxbXTtyZXR1cm4gZC5wdXNoKHt1cmk6ZSx3Om4saDpzLHg6dCx5Oml9KSx0aGlzLl9hZGRPdXRwdXRWYWx1ZShcInZpZGVvXCIse3BpY3R1cmU6ZH0sXCJiYWNrZ3JvdW5kUGljdHVyZVwiKSx0aGlzfXJlbW92ZU91dHB1dEJhY2tncm91bmRQaWN0dXJlKGUpe3ZhciB0LHIsaTtpZighKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5pc0h0dHBVcmwpKGUpKXJldHVybiBDLmVycm9yKGB1cmkgaXMgaW52YWxpZDogJHtlfWApLHRoaXM7bGV0IG49bnVsbD09PShpPW51bGw9PT0ocj1udWxsPT09KHQ9dGhpcy5fdmFsdWVzLm91dHB1dCl8fHZvaWQgMD09PXQ/dm9pZCAwOnQudmlkZW8pfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLmJhY2tncm91bmRQaWN0dXJlKXx8dm9pZCAwPT09aT92b2lkIDA6aS5waWN0dXJlO3JldHVybiBuJiYobj1uLmZpbHRlcigodD0+dC51cmkhPT1lKSksdGhpcy5fYWRkT3V0cHV0VmFsdWUoXCJ2aWRlb1wiLHtwaWN0dXJlczpufSxcImJhY2tncm91bmRQaWN0dXJlXCIpKSx0aGlzfWNsZWFyT3V0cHV0QmFja2dyb3VuZFBpY3R1cmUoKXtyZXR1cm4gdGhpcy5fYWRkT3V0cHV0VmFsdWUoXCJ2aWRlb1wiLHtwaWN0dXJlczpbXX0sXCJiYWNrZ3JvdW5kUGljdHVyZVwiKSx0aGlzfXNldE91dHB1dEJhY2tncm91bmRQaWN0dXJlRmlsbE1vZGUoZSl7cmV0dXJuW2lyLkNST1AsaXIuV0hPTEVdLmluY2x1ZGVzKGUpP3RoaXMuX2FkZE91dHB1dFZhbHVlKFwidmlkZW9cIix7ZmlsbE1vZGU6ZX0sXCJiYWNrZ3JvdW5kUGljdHVyZVwiKTpDLmVycm9yKGBmaWxsTW9kZSBpcyBpbnZhbGlkOiAke2V9YCksdGhpc31hZGRQdWJsaXNoU3RyZWFtVXJscyhlKXt2YXIgdCxyO2NvbnN0IGk9L15ydG1wOlxcL1xcLy4rLztpZighKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5pc0FycmF5KShlKXx8MD09PWUubGVuZ3RofHxlLnNvbWUoKGU9PiFpLnRlc3QoZSkpKSlyZXR1cm4gQy5lcnJvcihgdXJscyBpcyBpbnZhbGlkOiAke2V9YCksdGhpcztjb25zdCBuPShudWxsPT09KHI9bnVsbD09PSh0PXRoaXMuX3ZhbHVlcy5vdXRwdXQpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmNkbil8fHZvaWQgMD09PXI/dm9pZCAwOnIuY29uY2F0KCkpfHxbXTtsZXQgcz0hMTtyZXR1cm4gZS5mb3JFYWNoKChlPT57bi5zb21lKCh0PT50LnB1c2h1cmw9PT1lKSl8fChzPSEwLG4ucHVzaCh7cHVzaHVybDplfSkpfSkpLG4ubGVuZ3RoPjU/KEMuZXJyb3IoXCJwdWJsaXNoIHN0cmVhbSB1cmwgbm8gbW9yZSB0aGFuIDVcIiksdGhpcyk6KHMmJnRoaXMuX2FkZE91dHB1dFZhbHVlKFwiY2RuXCIsbiksdGhpcyl9cmVtb3ZlUHVibGlzaFN0cmVhbVVybHMoZSl7dmFyIHQscjtjb25zdCBpPS9ecnRtcDpcXC9cXC8uKy87aWYoISgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uaXNBcnJheSkoZSl8fDA9PT1lLmxlbmd0aHx8ZS5zb21lKChlPT4haS50ZXN0KGUpKSkpcmV0dXJuIEMuZXJyb3IoYHVybHMgaXMgaW52YWxpZDogJHtlfWApLHRoaXM7Y29uc3Qgbj0obnVsbD09PShyPW51bGw9PT0odD10aGlzLl92YWx1ZXMub3V0cHV0KXx8dm9pZCAwPT09dD92b2lkIDA6dC5jZG4pfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLmNvbmNhdCgpKXx8W107Zm9yKGxldCB0PW4ubGVuZ3RoLTE7dD49MDt0LT0xKXtjb25zdHtwdXNodXJsOnJ9PW5bdF0saT1lLmluZGV4T2Yocik7aT49MCYmKGUuc3BsaWNlKGksMSksbi5zcGxpY2UodCwxKSl9cmV0dXJuIHRoaXMuX2FkZE91dHB1dFZhbHVlKFwiY2RuXCIsbiksdGhpc31jbGVhclB1Ymxpc2hTdHJlYW1VcmxzKCl7cmV0dXJuIHRoaXMuX2FkZE91dHB1dFZhbHVlKFwiY2RuXCIsW10pLHRoaXN9YWRkQ3VzdG9taXplTGF5b3V0VmlkZW8oZSx0LGksbixzKXtpZighdGhpcy5faXNWYWxpZFRyYWNrSWQoZSkpcmV0dXJuIEMuZXJyb3IoYHRyYWNrSWQgaXMgaW52YWxpZDogJHtlfWApLHRoaXM7aWYoISgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uaXNOdW1iZXIpKHQpfHwhKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5pc051bWJlcikoaSkpcmV0dXJuIEMuZXJyb3IoYHNvbWUgYXR0cnMgb2YgKHgsIHkpIGlzIGludmFsaWQ6ICR7dH0sICR7aX1gKSx0aGlzO2lmKFtuLHNdLnNvbWUoKGU9PiEoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmlzTnVtYmVyKShlKXx8ZTwwKSkpcmV0dXJuIEMuZXJyb3IoYHNvbWUgYXR0cnMgb2YgKHdpZHRoLCBoZWlnaHQpIGlzIGludmFsaWQ6ICR7bn0sICR7c31gKSx0aGlzO2NvbnN0e3VzZXJJZDpvLHRhZzphLG1lZGlhVHlwZTpjfT1mdChlKTtpZihjIT09RmUuVklERU9fT05MWSlyZXR1cm4gQy5lcnJvcihga2luZCBvZiByZXNvdXJjZSBpcyBub3QgJ3ZpZGVvJzogJHtlfWApLHRoaXM7Y29uc3QgZD12dChvLGEpO3JldHVybih0aGlzLl92YWx1ZXMuaW5wdXR8fCh0aGlzLl92YWx1ZXMuaW5wdXQ9e3ZpZGVvOltdfSkpLnZpZGVvLnB1c2goe3VzZXJfaWQ6byxzdHJlYW1faWQ6ZCx4OnQseTppLHdpZHRoOm4saGVpZ2h0OnN9KSx0aGlzfXJlbW92ZUN1c3RvbWl6ZUxheW91dFZpZGVvKGUpe2lmKCF0aGlzLl9pc1ZhbGlkVHJhY2tJZChlKSlyZXR1cm4gQy5lcnJvcihgdHJhY2tJZCBpcyBpbnZhbGlkOiAke2V9YCksdGhpcztjb25zdHt1c2VySWQ6dCx0YWc6cixtZWRpYVR5cGU6aX09ZnQoZSk7aWYoaSE9PUZlLlZJREVPX09OTFkpcmV0dXJuIEMuZXJyb3IoYGtpbmQgb2YgcmVzb3VyY2UgaXMgbm90ICd2aWRlbyc6ICR7ZX1gKSx0aGlzO2NvbnN0IG49dnQodCxyKSxzPXRoaXMuX3ZhbHVlcy5pbnB1dHx8KHRoaXMuX3ZhbHVlcy5pbnB1dD17dmlkZW86W119KTtyZXR1cm4gcy52aWRlbz1zLnZpZGVvLmZpbHRlcigoZT0+ZS5zdHJlYW1faWQ9PT1uKSksdGhpc31jbGVhckN1c3RvbWl6ZUxheW91dFZpZGVvKCl7cmV0dXJuKHRoaXMuX3ZhbHVlcy5pbnB1dHx8KHRoaXMuX3ZhbHVlcy5pbnB1dD17dmlkZW86W119KSkudmlkZW89W10sdGhpc31mbHVzaCgpe3ZhciBlLHQscixpO3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3Qgbj1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuX3ZhbHVlcykpLHtjb2RlOnN9PXlpZWxkIHRoaXMuX29uRmx1c2gobik7cmV0dXJuIHM9PT1ULlNVQ0NFU1MmJigobnVsbD09PSh0PW51bGw9PT0oZT10aGlzLl92YWx1ZXMub3V0cHV0KXx8dm9pZCAwPT09ZT92b2lkIDA6ZS52aWRlby5ub3JtYWwpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LndpZHRoKXx8KG51bGw9PT0oaT1udWxsPT09KHI9dGhpcy5fdmFsdWVzLm91dHB1dCl8fHZvaWQgMD09PXI/dm9pZCAwOnIudmlkZW8ubm9ybWFsKXx8dm9pZCAwPT09aT92b2lkIDA6aS5mcHMpKSYmdGhpcy5fc2VuZENETkluZm9TaWduYWwoKSx0aGlzLl92YWx1ZXM9b3IoKSx7Y29kZTpzfX0pKX19dmFyIGNyLGRyLHVyLGxyOyFmdW5jdGlvbihlKXtlW2UuT1BFTj0xXT1cIk9QRU5cIixlW2UuU1RPUD0yXT1cIlNUT1BcIn0oY3J8fChjcj17fSkpLGZ1bmN0aW9uKGUpe2VbZS5TUFJFQUQ9MF09XCJTUFJFQURcIixlW2UuTk9fU1BSRUFEPS0xXT1cIk5PX1NQUkVBRFwifShkcnx8KGRyPXt9KSksZnVuY3Rpb24oZSl7ZVtlLkFVVE9NQVRJQz0wXT1cIkFVVE9NQVRJQ1wiLGVbZS5NQU5VQUw9MV09XCJNQU5VQUxcIn0odXJ8fCh1cj17fSkpLGZ1bmN0aW9uKGUpe2VbZS5WSURFTz0wXT1cIlZJREVPXCIsZVtlLkFVRElPPTFdPVwiQVVESU9cIn0obHJ8fChscj17fSkpO2NvbnN0IGhyPSgpPT5cInh4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eFwiLnJlcGxhY2UoL1t4eV0vZywoZnVuY3Rpb24oZSl7Y29uc3QgdD0xNipNYXRoLnJhbmRvbSgpfDA7cmV0dXJuKFwieFwiPT09ZT90OjMmdHw4KS50b1N0cmluZygxNil9KSk7Y2xhc3MgcHJ7Y29uc3RydWN0b3IoZSx0LHIsaSxuLHMsbyxhKXt0aGlzLl9jb250ZXh0PWUsdGhpcy5fcnVudGltZT10LHRoaXMuX3NlcnZpY2U9cix0aGlzLl9pbml0T3B0aW9ucz1pLHRoaXMuX21haW5MaXZpbmdSb29tPW4sdGhpcy5fcmVnaXN0ZXJQS01zZ0xpc3RlbmVyPXMsdGhpcy5fb25Kb2luZWRQS1Jvb209byx0aGlzLl9vbkxlYXZlUEtSb29tPWEsdGhpcy5faW52aXRlVGltZW91dD0zMCx0aGlzLl9QS0luZm89e30sdGhpcy5fYXBwTGlzdGVuZXI9bnVsbCx0aGlzLl9qb2luZWRQS1Jvb21zPXt9LHRoaXMuX3JlZ2lzdGVyUEtNc2dMaXN0ZW5lcih0aGlzLl9vblJlY3ZQS01zZy5iaW5kKHRoaXMpKSx0aGlzLl9tYWluUm9vbUlkPXRoaXMuX21haW5MaXZpbmdSb29tLmdldFJvb21JZCgpfV9jYWxsQXBwTGlzdGVuZXIoZSwuLi50KXt2YXIgcjtjb25zdCBpPW51bGw9PT0ocj10aGlzLl9hcHBMaXN0ZW5lcil8fHZvaWQgMD09PXI/dm9pZCAwOnJbZV07aWYoaSl0cnl7aSguLi50KX1jYXRjaChlKXtDLmVycm9yKGUpfX1fb25JbnZpdGUoZSl7Y29uc3QgdD1lLmludml0ZUluZm98fHt9LHtpbnZpdGVyUm9vbUlkOnIsaW52aXRlclVzZXJJZDppLGV4dHJhOm59PXQscz17aW52aXRlclJvb21JZDpyLGludml0ZXJVc2VySWQ6aX07biYmT2JqZWN0LmFzc2lnbihzLHtleHRyYTpufSksdGhpcy5fUEtJbmZvW3JdPXQsdGhpcy5fY2FsbEFwcExpc3RlbmVyKFwib25SZXF1ZXN0Sm9pbk90aGVyUm9vbVwiLHMpfV9vbkNhbmNlbEludml0ZShlKXtjb25zdHtpbnZpdGVyUm9vbUlkOnQsaW52aXRlclVzZXJJZDpyLGV4dHJhOml9PWUuaW52aXRlSW5mb3x8e30sbj17aW52aXRlclJvb21JZDp0LGludml0ZXJVc2VySWQ6cn07aSYmT2JqZWN0LmFzc2lnbihuLHtleHRyYTppfSksZGVsZXRlIHRoaXMuX1BLSW5mb1t0XSx0aGlzLl9jYWxsQXBwTGlzdGVuZXIoXCJvbkNhbmNlbFJlcXVlc3RPdGhlclJvb21cIixuKX1fb25JbnZpdGVUaW1lb3V0KGUpe31fb25JbnZpdGVBbnN3ZXIoZSl7Y29uc3R7YW5zd2VyQ29kZTp0LGludml0ZUNvbnRlbnQ6cixpbnZpdGVlVXNlckF1dG9NaXg6aX09ZSx7aW52aXRlclVzZXJJZDpuLGludml0ZXJSb29tSWQ6cyxpbnZpdGVlVXNlcklkOm8saW52aXRlZVJvb21JZDphLGV4dHJhOmN9PXIsZD17YWdyZWU6MT09PXQsaW52aXRlclJvb21JZDpzLGludml0ZXJVc2VySWQ6bixpbnZpdGVlUm9vbUlkOmEsaW52aXRlZVVzZXJJZDpvfTt0aGlzLl9QS0luZm9bYV0uaW52aXRlZVVzZXJBdXRvTWl4PWksdGhpcy5fY2FsbEFwcExpc3RlbmVyKFwib25SZXNwb25zZUpvaW5PdGhlclJvb21cIixkKX1fb25QS0VuZChlKXtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0e2ludml0ZWVSb29tSWQ6dCxpbnZpdGVyUm9vbUlkOnIsdXNlcklkOml9PWUuaW52aXRlSW5mbyxuPXI9PT10aGlzLl9tYWluUm9vbUlkP3Q6cixzPXtlbmRSb29tSWQ6bixlbmRVc2VySWQ6aX07eWllbGQgdGhpcy5sZWF2ZU90aGVyUm9vbSh0aGlzLl9qb2luZWRQS1Jvb21zW25dKSxkZWxldGUgdGhpcy5fUEtJbmZvW25dLHRoaXMuX2NhbGxBcHBMaXN0ZW5lcihcIm9uRmluaXNoT3RoZXJSb29tXCIscyl9KSl9X29uUmVjdlBLTXNnKGUpe2NvbnN0e3RhcmdldElkOnQsY29udGVudDpyLG1lc3NhZ2VUeXBlOml9PWU7c3dpdGNoKGkpe2Nhc2UgTnQuUEtfSU5WSVRFOnRoaXMuX29uSW52aXRlKHIpO2JyZWFrO2Nhc2UgTnQuUEtfQ0FOQ0VMX0lOVklURTp0aGlzLl9vbkNhbmNlbEludml0ZShyKTticmVhaztjYXNlIE50LlBLX0lOVklURV9USU1FT1VUOnRoaXMuX29uSW52aXRlVGltZW91dChyKTticmVhaztjYXNlIE50LlBLX0lOVklURV9BTlNXRVI6dGhpcy5fb25JbnZpdGVBbnN3ZXIocik7YnJlYWs7Y2FzZSBOdC5QS19FTkQ6dGhpcy5fb25QS0VuZChyKX19cmVnaXN0ZXJSb29tUEtFdmVudExpc3RlbmVyKGUpe3RoaXMuX2FwcExpc3RlbmVyPWV9cmVxdWVzdEpvaW5PdGhlclJvb20oZSx0LHIpe3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7aWYoISgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18udmFsaWRhdGUpKFwiaW52aXRlZVJvb21JZFwiLGUsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5ub3RFbXB0eVN0cmluZywhMCl8fCEoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLnZhbGlkYXRlKShcImludml0ZWVVc2VySWRcIix0LF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18ubm90RW1wdHlTdHJpbmcsITApKXJldHVybntjb2RlOlQuUEFSQU1TX0VSUk9SfTtDLmRlYnVnKGByZXF1ZXN0Um9vbVBLIC0+IGludml0ZWVSb29tSWQ6ICR7ZX07IGludml0ZWVVc2VySWQ6ICR7dH07IG9wdGlvbnM6ICR7SlNPTi5zdHJpbmdpZnkocnx8e30pfWApO2NvbnN0IG49aHIoKSxzPSEoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmlzQm9vbGVhbikobnVsbD09cj92b2lkIDA6ci5hdXRvTWl4KXx8KG51bGw9PXI/dm9pZCAwOnIuYXV0b01peCksbz17aW52aXRlU2Vzc2lvbklkOm4saW52aXRlclJvb21JZDp0aGlzLl9tYWluUm9vbUlkLGludml0ZXJVc2VySWQ6dGhpcy5fY29udGV4dC5nZXRDdXJyZW50SWQoKSxpbnZpdGVyVXNlckF1dG9NaXg6cyxpbnZpdGVlUm9vbUlkOmUsaW52aXRlZVVzZXJJZDp0LGludml0ZWVUaW1lb3V0VGltZTp0aGlzLl9pbnZpdGVUaW1lb3V0LGV4dHJhOihudWxsPT1yP3ZvaWQgMDpyLmV4dHJhKXx8XCJcIn0sYT17cm9vbUlkOnRoaXMuX21haW5Sb29tSWQsaW52aXRlZFJvb21JZDplLGludml0ZWRVc2VySWQ6dCxpbnZpdGVUaW1lb3V0OnRoaXMuX2ludml0ZVRpbWVvdXQsaW52aXRlSW5mbzpKU09OLnN0cmluZ2lmeShvKSxpbnZpdGVTZXNzaW9uSWQ6bn07Qy5kZWJ1ZyhgcmVxdWVzdFJvb21QSyAtPiBwYXJhbXM6ICR7SlNPTi5zdHJpbmdpZnkoYSl9YCk7Y29uc3QgZD15aWVsZCB0aGlzLl9jb250ZXh0LnJlcXVlc3RSb29tUEsoYSk7cmV0dXJuIGQhPT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTPyhDLmVycm9yKGByZXF1ZXN0Um9vbVBLIGZhaWxlZDogJHtkfWApLHtjb2RlOmR9KTooQy5kZWJ1ZyhcInJlcXVlc3RSb29tUEsgc3VjY2Vzc1wiKSx0aGlzLl9QS0luZm9bZV09e2ludml0ZVNlc3Npb25JZDpuLGludml0ZXJSb29tSWQ6dGhpcy5fbWFpblJvb21JZCxpbnZpdGVyVXNlcklkOnRoaXMuX2NvbnRleHQuZ2V0Q3VycmVudElkKCksaW52aXRlclVzZXJBdXRvTWl4OnMsaW52aXRlZVJvb21JZDplfSx7Y29kZTpULlNVQ0NFU1N9KX0pKX1jYW5jZWxSZXF1ZXN0Sm9pbk90aGVyUm9vbShlLHQscil7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtpZighKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy52YWxpZGF0ZSkoXCJpbnZpdGVlUm9vbUlkXCIsZSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLm5vdEVtcHR5U3RyaW5nLCEwKXx8ISgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18udmFsaWRhdGUpKFwiaW52aXRlZVVzZXJJZFwiLHQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5ub3RFbXB0eVN0cmluZywhMCkpcmV0dXJue2NvZGU6VC5QQVJBTVNfRVJST1J9O2lmKCF0aGlzLl9QS0luZm9bZV0pcmV0dXJuIEMuZXJyb3IoYOacquWPkei1t+i/h+S4jiAke2V9IOaIv+mXtOWGhSAke3R9IOi/num6pueahOivt+axgmApLHtjb2RlOlQuUEFSQU1TX0VSUk9SfTtDLmRlYnVnKGBjYW5jZVJlcXVlc3RKb2luUEsgLT4gaW52aXRlZVJvb21JZDogJHtlfTsgaW52aXRlZVVzZXJJZDogJHt0fTsgZXh0cmE6ICR7cn1gKTtjb25zdCBuPXtpbnZpdGVyUm9vbUlkOnRoaXMuX21haW5Sb29tSWQsaW52aXRlclVzZXJJZDp0aGlzLl9jb250ZXh0LmdldEN1cnJlbnRJZCgpLGludml0ZWVSb29tSWQ6ZSxpbnZpdGVlVXNlcklkOnQsZXh0cmE6cnx8XCJcIn0scz17cm9vbUlkOnRoaXMuX21haW5Sb29tSWQsaW52aXRlZFJvb21JZDplLGludml0ZWRVc2VySWQ6dCxpbnZpdGVTZXNzaW9uSWQ6dGhpcy5fUEtJbmZvW2VdLmludml0ZVNlc3Npb25JZCxpbnZpdGVJbmZvOkpTT04uc3RyaW5naWZ5KG4pfTtDLmRlYnVnKGBjYW5jZVJlcXVlc3RKb2luUEsgLT4gcGFyYW1zOiAke0pTT04uc3RyaW5naWZ5KHMpfWApO2NvbnN0IG89eWllbGQgdGhpcy5fY29udGV4dC5jYW5jZWxSb29tUEsocyk7cmV0dXJuIG8hPT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTPyhDLmVycm9yKGBjYW5jZVJlcXVlc3RKb2luUEsgZmFpbGVkOiAke299YCkse2NvZGU6b30pOihDLmRlYnVnKFwiY2FuY2VSZXF1ZXN0Sm9pblBLIHN1Y2Nlc3NcIiksZGVsZXRlIHRoaXMuX1BLSW5mb1tlXSx7Y29kZTpULlNVQ0NFU1N9KX0pKX1yZXNwb25zZUpvaW5PdGhlclJvb20oZSx0LHIsbil7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtpZighKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy52YWxpZGF0ZSkoXCJpbnZpdGVyUm9vbUlkXCIsZSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLm5vdEVtcHR5U3RyaW5nLCEwKXx8ISgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18udmFsaWRhdGUpKFwiaW52aXRlclVzZXJJZFwiLHQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5ub3RFbXB0eVN0cmluZywhMCkpcmV0dXJue2NvZGU6VC5QQVJBTVNfRVJST1J9O2lmKCF0aGlzLl9QS0luZm9bZV0pcmV0dXJuIEMuZXJyb3IoYCR7ZX0g5oi/6Ze05YaF55qEICR7dH0g5pyq5Y+R6LW36L+H6L+e6bqm6K+35rGCYCkse2NvZGU6VC5QQVJBTVNfRVJST1J9O0MuZGVidWcoYHJlc3BvbnNlUm9vbVBLIC0+IGludml0ZXJSb29tSWQ6ICR7ZX07IGludml0ZXJVc2VySWQ6ICR7dH07IGFncmVlOiAke3J9OyBvcHRpb25zOiAke0pTT04uc3RyaW5naWZ5KG58fHt9KX1gKTtjb25zdHtpbnZpdGVTZXNzaW9uSWQ6cyxpbnZpdGVyVXNlckF1dG9NaXg6b309dGhpcy5fUEtJbmZvW2VdLGE9ISgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uaXNCb29sZWFuKShudWxsPT1uP3ZvaWQgMDpuLmF1dG9NaXgpfHwobnVsbD09bj92b2lkIDA6bi5hdXRvTWl4KSxkPXtpbnZpdGVTZXNzaW9uSWQ6cyxpbnZpdGVyUm9vbUlkOmUsaW52aXRlclVzZXJJZDp0LGludml0ZWVSb29tSWQ6dGhpcy5fbWFpblJvb21JZCxpbnZpdGVlVXNlcklkOnRoaXMuX2NvbnRleHQuZ2V0Q3VycmVudElkKCksaW52aXRlZVVzZXJBdXRvTWl4OmF9LHU9T2JqZWN0LmFzc2lnbihkLHtpbnZpdGVyVXNlckF1dG9NaXg6b30pLGw9cj9PYmplY3QuYXNzaWduKGQse011bHRpUm9vbUtleTpgJHtlfXwke3RoaXMuX21haW5Sb29tSWR9YCxNdWx0aVJvb21WYWx1ZTpKU09OLnN0cmluZ2lmeSh1KX0pOmQ7ISgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uaXNVbmRlZmluZWQpKG51bGw9PW4/dm9pZCAwOm4uZXh0cmEpJiZPYmplY3QuYXNzaWduKGwse2V4dHJhOm4uZXh0cmF9KTtjb25zdCBtPXthZ3JlZTpyLHJvb21JZDp0aGlzLl9tYWluUm9vbUlkLGludml0ZVNlc3Npb25JZDpzLGludml0ZVJvb21JZDplLGludml0ZVVzZXJJZDp0LGNvbnRlbnQ6SlNPTi5zdHJpbmdpZnkobCksa2V5OmAke2V9fCR7dH1gLHZhbHVlOkpTT04uc3RyaW5naWZ5KGQpfTtDLmRlYnVnKGByZXNwb25zZVJvb21QSyAtPiBwYXJhbXM6ICR7SlNPTi5zdHJpbmdpZnkobSl9YCk7Y29uc3QgZj15aWVsZCB0aGlzLl9jb250ZXh0LnJlc3BvbnNlUm9vbVBLKG0pO3JldHVybiBmIT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUz8oQy5lcnJvcihgcmVzcG9uc2VSb29tUEsgZmFpbGVkOiAke2Z9YCkse2NvZGU6Zn0pOihDLmRlYnVnKFwicmVzcG9uc2VSb29tUEsgc3VjY2Vzc1wiKSx0aGlzLl9QS0luZm9bZV0uaW52aXRlZVVzZXJBdXRvTWl4PWEse2NvZGU6VC5TVUNDRVNTfSl9KSl9X3F1aXRSb29tUEsoZSl7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdHtpbnZpdGVyUm9vbUlkOnQsaW52aXRlZVJvb21JZDpyLGludml0ZXJVc2VySWQ6bn09dGhpcy5fUEtJbmZvW2VdLHM9e2ludml0ZWVSb29tSWQ6cixpbnZpdGVyUm9vbUlkOnQsdXNlcklkOnRoaXMuX2NvbnRleHQuZ2V0Q3VycmVudElkKCl9LG89e3Jvb21JZDp0aGlzLl9tYWluUm9vbUlkLGVuZFJvb21JZDplLHNlc3Npb25JZDp0aGlzLl9QS0luZm9bZV0uaW52aXRlU2Vzc2lvbklkLGNvbnRlbnQ6SlNPTi5zdHJpbmdpZnkocyksa2V5czpbYCR7dH18JHtufWBdfTtDLmRlYnVnKGBxdWl0Um9vbVBLIC0+IHBhcmFtczogJHtKU09OLnN0cmluZ2lmeShvKX1gKTtjb25zdCBhPXlpZWxkIHRoaXMuX2NvbnRleHQuZW5kUm9vbVBLKG8pO3JldHVybiBhIT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUz8oQy5lcnJvcihgcXVpdFJvb21QSyBmYWlsZWQ6ICR7YX1gKSx7Y29kZTpULlNJR05BTF9FUlJPUn0pOihDLmRlYnVnKFwicXVpdFJvb21QSyBzdWNjZXNzXCIpLGRlbGV0ZSB0aGlzLl9QS0luZm9bZV0se2NvZGU6VC5TVUNDRVNTfSl9KSl9X3JlbGFzZUNydFJvb20oKXt9am9pbk90aGVyUm9vbShlKXtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2lmKCEoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLnZhbGlkYXRlKShcInJvb21JZFwiLGUsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5ub3RFbXB0eVN0cmluZywhMCkpcmV0dXJue2NvZGU6VC5QQVJBTVNfRVJST1J9O2lmKHRoaXMuX2NvbnRleHQuZ2V0Q29ubmVjdGlvblN0YXR1cygpIT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Db25uZWN0aW9uU3RhdHVzLkNPTk5FQ1RFRClyZXR1cm57Y29kZTpULlNJR05BTF9ESVNDT05ORUNURUR9O2lmKEMuZGVidWcoYGpvaW5QS1Jvb20sIHJvb21JZDogJHtlfWApLHRoaXMuX2pvaW5lZFBLUm9vbXNbZV0pcmV0dXJue2NvZGU6VC5SRVBFUlRfSk9JTl9ST09NfTtjb25zdCB0PWxyLlZJREVPLHtjb2RlOnIsZGF0YTpzfT15aWVsZCB0aGlzLl9jb250ZXh0LmpvaW5SVENSb29tKGUsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5SVENNb2RlLkxJVkUsdCk7aWYociE9PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1MpcmV0dXJuIEMuZXJyb3IoYGpvaW5Sb29tIGZhaWxlZCAtPiBjb2RlOiAke3J9YCkse2NvZGU6cn07Qy5kZWJ1ZyhgSm9pblBLUm9vbSBzdWNjZXNzIC0+IHVzZXJJZDogJHt0aGlzLl9jb250ZXh0LmdldEN1cnJlbnRJZCgpfSwgcm9vbUlkOiAke2V9LCBkYXRhOiAke0pTT04uc3RyaW5naWZ5KHMpfWApO2NvbnN0IG89bmV3IF9yKHRoaXMuX2NvbnRleHQsdGhpcy5fcnVudGltZSxlLHMsdGhpcy5fc2VydmljZSx0aGlzLl9pbml0T3B0aW9ucyx0aGlzLl9yZWxhc2VDcnRSb29tLmJpbmQodGhpcyksdCwhMSwhMSk7cmV0dXJuIHRoaXMuX2pvaW5lZFBLUm9vbXNbZV09byx0aGlzLl9vbkpvaW5lZFBLUm9vbShlLG8pLHtyb29tOm8sY29kZTpULlNVQ0NFU1MsdXNlcklkczpvLmdldFJlbW90ZVVzZXJJZHMoKSx0cmFja3M6by5nZXRSZW1vdGVUcmFja3MoKX19KSl9bGVhdmVPdGhlclJvb20oZSx0KXtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiBrKCgoKT0+Uyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0IHI9ZS5nZXRSb29tSWQoKTtyZXR1cm4gQy5kZWJ1ZyhgbGVhdmVQS1Jvb20gLT4gdXNlcklkOiAke3RoaXMuX2NvbnRleHQuZ2V0Q3VycmVudElkKCl9ICwgcm9vbUlkOiAke3J9YCkseWllbGQgZS5fX2Rlc3Ryb3koITApLGRlbGV0ZSB0aGlzLl9qb2luZWRQS1Jvb21zW3JdLHRoaXMuX29uTGVhdmVQS1Jvb20ociksdGhpcy5fUEtJbmZvW3JdPyh0JiZ0aGlzLl9xdWl0Um9vbVBLKHIpLHtjb2RlOlQuU1VDQ0VTU30pOntjb2RlOlQuU1VDQ0VTU319KSkpKX0pKX1nZXRQS0luZm8oZSl7cmV0dXJuIHRoaXMuX1BLSW5mb1tlXX1nZXRKb2luZWRQS1Jvb21zKCl7cmV0dXJuIHRoaXMuX2pvaW5lZFBLUm9vbXN9fWNsYXNzIF9yIGV4dGVuZHMgcnJ7Y29uc3RydWN0b3IoZSx0LHIsaSxuLHMsbyxhLGM9ITEsZCl7dmFyIGw7c3VwZXIoZSx0LHIsaSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLlJUQ01vZGUuTElWRSxuLHMsbyxjLGQpLHRoaXMuX2xpdmluZ1R5cGU9YSx0aGlzLl9pc01haW5Sb29tPWQsdGhpcy5fQ0ROVXJpcz1udWxsLHRoaXMuX0NETkVuYWJsZT0hMSx0aGlzLl9tY3VDb25maWdCdWlsZGVyPW5ldyBhcih0aGlzLl9vbk1DVUNvbmZpZ0ZsdXNoLmJpbmQodGhpcyksdGhpcy5faXNWYWxpZFJlc291cmNlSWQuYmluZCh0aGlzKSx0aGlzLl9zZW5kQ0ROSW5mb1NpZ25hbC5iaW5kKHRoaXMpKSx0aGlzLl9pc01haW5Sb29tJiYodGhpcy5fcm9vbVBLSGFuZGxlcj1uZXcgcHIoZSx0LG4scyx0aGlzLHN1cGVyLl9yZWdpc3RlclBLTXNnTGlzdGVuZXIuYmluZCh0aGlzKSx0aGlzLl9vbkpvaW5lZFBLUm9vbS5iaW5kKHRoaXMpLHRoaXMuX29uTGVhdmVQS1Jvb20uYmluZCh0aGlzKSkpO2NvbnN0IGg9bnVsbD09PShsPWkucm9vbUluZm8uZmlsdGVyKChlPT5cImNkbl91cmlzXCI9PT1lLmtleSkpWzBdKXx8dm9pZCAwPT09bD92b2lkIDA6bC52YWx1ZTtoJiYodGhpcy5fQ0ROVXJpcz1KU09OLnBhcnNlKGgpWzBdKX1faXNWYWxpZFJlc291cmNlSWQoZSl7dmFyIHQ7Y29uc3R7dXNlcklkOnJ9PWZ0KGUpLGk9ISEobnVsbD09PSh0PXRoaXMuX3Jvb21SZXNvdXJjZXNbcl0pfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmZpbmQoKHQ9Pm10KHQpPT09ZSkpKTtsZXQgbj0hMTtjb25zdHtjb2RlOnMscm9vbVBLSGFuZGxlcjpvfT10aGlzLmdldFJvb21QS0hhbmRsZXIoKTtpZihzIT09VC5TVUNDRVNTfHwhbylyZXR1cm4gaTtjb25zdCBhPW8uZ2V0Sm9pbmVkUEtSb29tcygpLGM9W107cmV0dXJuIE9iamVjdC52YWx1ZXMoYSkubWFwKChlPT57Yy5wdXNoKC4uLmUuZ2V0UmVtb3RlVHJhY2tzKCkpfSkpLG49Yy5zb21lKCh0PT5lPT09dC5nZXRUcmFja0lkKCkpKSxpfHxufWdldExpdmluZ1R5cGUoKXtyZXR1cm4gdGhpcy5fbGl2aW5nVHlwZX1nZXRNQ1VDb25maWdCdWlsZGVyKCl7cmV0dXJuIHRoaXMuX2lzTWFpblJvb20/dGhpcy5fbWN1Q29uZmlnQnVpbGRlcjooQy5lcnJvcihcInRoZSBgZ2V0TUNVQ29uZmlnQnVpbGRlcmAgaXMgZGlzYWJsZWQgaW4gUEsgcm9vbSBcIikse2NvZGU6VC5USEVfRlVOQ1RJT05fSVNfRElTQUJMRURfSU5fUEtST09NfSl9X29uTUNVQ29uZmlnRmx1c2goZSl7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCB0PXtcIkFwcC1LZXlcIjp0aGlzLl9jb250ZXh0LmdldEFwcGtleSgpLFRva2VuOnRoaXMuX3Rva2VuLFJvb21JZDp0aGlzLmdldFJvb21JZCgpLFVzZXJJZDp0aGlzLl9jb250ZXh0LmdldEN1cnJlbnRJZCgpLFNlc3Npb25JZDp0aGlzLmdldFNlc3Npb25JZCgpfSx7Y29kZTpyLHJlczppfT15aWVsZCB0aGlzLl9zZXJ2aWNlLnNldE1jdUNvbmZpZyh0LGUpO3JldHVybiByIT09VC5TVUNDRVNTPyhDLmVycm9yKGBzZXQgTUNVIGNvbmZpZyBmYWlsZWQ6ICR7cn1gKSx7Y29kZTpyfSk6KEMuaW5mbyhcInNldCBNQ1UgY29uZmlnIHN1Y2Nlc3NcIiksaS5wdWxsX3VybCYmKHRoaXMuX0NETlVyaXM9SlNPTi5wYXJzZShpLnB1bGxfdXJsKSkse2NvZGU6cixyZXM6aX0pfSkpfV9fb25SZWNvbm5lY3RlZCgpe2NvbnN0IGU9T2JqZWN0LmNyZWF0ZShudWxsLHtfX29uUmVjb25uZWN0ZWQ6e2dldDooKT0+c3VwZXIuX19vblJlY29ubmVjdGVkfX0pO3ZhciB0LHI7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCBpPXlpZWxkIGUuX19vblJlY29ubmVjdGVkLmNhbGwodGhpcyx0aGlzLl9saXZpbmdUeXBlKTtpZighaXx8IWkuZGF0YSlyZXR1cm47Y29uc3Qgbj1pLmRhdGEucm9vbUluZm8scz1udWxsPT09KHQ9bi5maWx0ZXIoKGU9PlwiY2RuX3VyaXNcIj09PWUua2V5KSlbMF0pfHx2b2lkIDA9PT10P3ZvaWQgMDp0LnZhbHVlO2lmKCFzKXJldHVybjtjb25zdCBvPUpTT04ucGFyc2Uocyk7KG51bGw9PT0ocj10aGlzLl9DRE5VcmlzKXx8dm9pZCAwPT09cj92b2lkIDA6ci5lbmFibGVJbm5lckNETikhPT1vLmVuYWJsZUlubmVyQ0ROJiZ0aGlzLl9jYWxsQXBwTGlzdGVuZXIoXCJvbkNETkVuYWJsZUNoYW5nZVwiLG8uZW5hYmxlSW5uZXJDRE4pLHRoaXMuX0NETlVyaXM9b30pKX1lbmFibGVJbm5lckNETihlKXtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2lmKCF0aGlzLl9pc01haW5Sb29tKXJldHVybiBDLmVycm9yKFwidGhlIGBlbmFibGVJbm5lckNETmAgaXMgZGlzYWJsZWQgaW4gUEsgcm9vbSBcIikse2NvZGU6VC5USEVfRlVOQ1RJT05fSVNfRElTQUJMRURfSU5fUEtST09NfTtpZighKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5pc0Jvb2xlYW4pKGUpKXJldHVybiBDLmVycm9yKFwiYGVuYWJsZWAgaXMgaW52YWxpZFwiKSx7Y29kZTpULlBBUkFNU19FUlJPUn07dGhpcy5fQ0RORW5hYmxlPWU7Y29uc3QgdD17dmVyc2lvbjoyLG91dHB1dDp7aW5DRE5Nb2RlbDplP2NyLk9QRU46Y3IuU1RPUH19LHtjb2RlOnJ9PXlpZWxkIHRoaXMuX29uTUNVQ29uZmlnRmx1c2godCk7aWYociE9PVQuU1VDQ0VTUylyZXR1cm4gQy5lcnJvcihgZW5hYmxlSW5uZXJDRE4gZmFpbGVkIC0+IGNvZGU6ICR7cn1gKSx7Y29kZTpULlNJR05BTF9FUlJPUn07aWYodGhpcy5fQ0ROVXJpcyYmdGhpcy5fQ0ROVXJpcy5icm9hZGNhc3QhPT1kci5TUFJFQUQpcmV0dXJuIEMuaW5mbyhcImVuYWJsZUlubmVyQ0ROIHN1Y2NlZWRcIikse2NvZGU6VC5TVUNDRVNTfTtjb25zdHtjb2RlOml9PXlpZWxkIGsoKCgpPT5TKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMuX3NlbmRDRE5JbmZvU2lnbmFsKCl9KSkpKTtyZXR1cm4gaT09PVQuU1VDQ0VTUz8oQy5pbmZvKFwiZW5hYmxlSW5uZXJDRE4gc3VjY2VlZFwiKSx7Y29kZTpULlNVQ0NFU1N9KTooQy5lcnJvcihgZW5hYmxlSW5uZXJDRE4gZmFpbGVkIC0+IGNvZGU6ICR7aX1gKSx7Y29kZTppfSl9KSl9X3NlbmRDRE5JbmZvU2lnbmFsKCl7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXt0aGlzLl9DRE5VcmlzPU9iamVjdC5hc3NpZ24oe30sdGhpcy5fQ0ROVXJpcyx7ZW5hYmxlSW5uZXJDRE46dGhpcy5fQ0RORW5hYmxlfSk7cmV0dXJuKHlpZWxkIFByb21pc2UuYWxsKFt0aGlzLl9zcHJlYWRDRE5JbmZvKHRoaXMuX0NETlVyaXMpLHRoaXMuX3NldFJvb21DRE5JbmZvKHRoaXMuX0NETlVyaXMpXSkpLmV2ZXJ5KChlPT5lLmNvZGU9PT1ULlNVQ0NFU1MpKT97Y29kZTpULlNVQ0NFU1N9Ontjb2RlOlQuU0lHTkFMX0VSUk9SfX0pKX1fc3ByZWFkQ0ROSW5mbyhlKXtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0IHQ9eWllbGQgdGhpcy5fY29udGV4dC5zZXRSVENDRE5VcmlzKHRoaXMuX3Jvb21JZCxOdC5UT1RBTF9DT05URU5UX1JFU09VUkNFLEpTT04uc3RyaW5naWZ5KFtlXSkpO3JldHVybiB0IT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUz8oQy5lcnJvcihgc3ByZWFkQ0ROSW5mbyBmYWlsZWQgLT4gY29kZTogJHt0fWApLHtjb2RlOlQuU0lHTkFMX0VSUk9SfSk6KEMuaW5mbyhcInNwcmVhZENETkluZm8gc3VjY2VlZFwiKSx7Y29kZTpULlNVQ0NFU1N9KX0pKX1fc2V0Um9vbUNETkluZm8oZSl7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCB0PXlpZWxkIHRoaXMuX2NvbnRleHQuc2V0UlRDRGF0YSh0aGlzLl9yb29tSWQsXCJjZG5fdXJpc1wiLEpTT04uc3RyaW5naWZ5KFtlXSksITAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5SVENBcGlUeXBlLlJPT00pO3JldHVybiB0IT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUz8oQy5lcnJvcihgc2V0Um9vbUNETkluZm8gZmFpbGVkIC0+IGNvZGU6ICR7dH1gKSx7Y29kZTpULlNJR05BTF9FUlJPUn0pOihDLmluZm8oXCJzZXRSb29tQ0ROSW5mbyBzdWNjZWVkXCIpLHtjb2RlOlQuU1VDQ0VTU30pfSkpfV9yZXNvdXJjZUhhbmRsZShlLHQscil7Y29uc3QgaT1PYmplY3QuY3JlYXRlKG51bGwse19yZXNvdXJjZUhhbmRsZTp7Z2V0OigpPT5zdXBlci5fcmVzb3VyY2VIYW5kbGV9fSk7dmFyIG47cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtpLl9yZXNvdXJjZUhhbmRsZS5jYWxsKHRoaXMsZSx0LHIpLGUuY2RuX3VyaXMmJigobnVsbD09PShuPXRoaXMuX0NETlVyaXMpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLmVuYWJsZUlubmVyQ0ROKSE9PWUuY2RuX3VyaXNbMF0uZW5hYmxlSW5uZXJDRE4mJnRoaXMuX2NhbGxBcHBMaXN0ZW5lcihcIm9uQ0RORW5hYmxlQ2hhbmdlXCIsIXRoaXMuX19nZXRDRE5FbmFibGUoKSksdGhpcy5fQ0ROVXJpcz1lLmNkbl91cmlzWzBdKX0pKX1fZXhjaGFuZ2VIYW5kbGUoZSl7dmFyIHQscixpO3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3Qgbj15aWVsZCB0aGlzLl9zZXJ2aWNlLmV4Y2hhbmdlKHRoaXMuX2dldFJUQ1JlcWVzdEhlYWRlcnMoKSxlKSxzPW51bGw9PT0ocj1udWxsPT09KHQ9bi5kYXRhKXx8dm9pZCAwPT09dD92b2lkIDA6dC51cmxzKXx8dm9pZCAwPT09cj92b2lkIDA6ci5wdWxsX3VybDtyZXR1cm4gbi5jb2RlPT09VC5TVUNDRVNTJiZzPyh0aGlzLl9DRE5VcmlzPUpTT04ucGFyc2UocyksKG51bGw9PT0oaT10aGlzLl9DRE5VcmlzKXx8dm9pZCAwPT09aT92b2lkIDA6aS5icm9hZGNhc3QpPT09ZHIuU1BSRUFEJiYodGhpcy5fQ0RORW5hYmxlPSEwLHRoaXMuX3NlbmRDRE5JbmZvU2lnbmFsKCkpLG4pOm59KSl9X2FmdGVyQ2hhbmdlZFJvbGUoZSl7Y29uc3QgdD1MdChlKSxyPXRoaXMuX2NvbnRleHQuZ2V0Q3VycmVudElkKCksaT1PYmplY3Qua2V5cyh0KTtzZXRUaW1lb3V0KCgoKT0+e3ZhciBuLHMsbztjb25zdCBhPWkuZmlsdGVyKChlPT5lIT09cikpO2EubGVuZ3RoPjAmJnRoaXMuX2NhbGxBcHBMaXN0ZW5lcihcIm9uVXNlckpvaW5cIixhKTtmb3IoY29uc3QgZSBpbiB0KWUhPT1yJiZ0aGlzLl9yZXNvdXJjZUhhbmRsZSh7dXJpczp0W2VdfSxOdC5UT1RBTF9DT05URU5UX1JFU09VUkNFLGUpOyhudWxsPT09KG49ZS5yb29tSW5mby5maWx0ZXIoKGU9PlwiY2RuX3VyaXNcIj09PWUua2V5KSlbMF0pfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLnZhbHVlKSYmKG51bGw9PT0ocz10aGlzLl9DRE5VcmlzKXx8dm9pZCAwPT09cz92b2lkIDA6cy5wdXNoX21vZGUpPT09dXIuTUFOVUFMJiZ0aGlzLl9jYWxsQXBwTGlzdGVuZXIoXCJvbkNETkVuYWJsZUNoYW5nZVwiLG51bGw9PT0obz10aGlzLl9DRE5VcmlzKXx8dm9pZCAwPT09bz92b2lkIDA6by5lbmFibGVJbm5lckNETil9KSl9X19nZXRDRE5FbmFibGUoKXt2YXIgZTtyZXR1cm4gbnVsbD09PShlPXRoaXMuX0NETlVyaXMpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLmVuYWJsZUlubmVyQ0ROfV9fZ2V0Q0ROUHVzaE1vZGUoKXt2YXIgZTtyZXR1cm4gbnVsbD09PShlPXRoaXMuX0NETlVyaXMpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLnB1c2hfbW9kZX1fb25Kb2luZWRQS1Jvb20oZSx0KXtjb25zdHtjb2RlOnIscm9vbVBLSGFuZGxlcjppfT10aGlzLmdldFJvb21QS0hhbmRsZXIoKTtpZihyPT09VC5TVUNDRVNTJiZpKXtpZighaS5nZXRQS0luZm8oZSkpcmV0dXJuO3RoaXMuX2V4Y2hhbmdlV2l0aFB1c2hPdGhlclJvb20oKX19X29uTGVhdmVQS1Jvb20oZSl7Y29uc3R7Y29kZTp0LHJvb21QS0hhbmRsZXI6cn09dGhpcy5nZXRSb29tUEtIYW5kbGVyKCk7aWYodD09PVQuU1VDQ0VTUyYmcil7aWYoIXIuZ2V0UEtJbmZvKGUpKXJldHVybjt0aGlzLl9leGNoYW5nZVdpdGhQdXNoT3RoZXJSb29tKCl9fV9leGNoYW5nZVdpdGhQdXNoT3RoZXJSb29tKCl7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtpZighdGhpcy5nZXRMb2NhbFRyYWNrcygpLmxlbmd0aClyZXR1cm47Y29uc3QgZT15aWVsZCB0aGlzLl9jcmVhdGVFeGNoYW5nZVBhcmFtcyh0aGlzLl9zdWJzY3JpYmVkTGlzdCwhMSksdD10aGlzLl9nZXRQdXNoT3RoZXJSb29tc1BhcmFtcygpO3QmJihlLnB1c2hPdGhlclJvb21zPXQpO2NvbnN0IHI9eWllbGQgdGhpcy5fZXhjaGFuZ2VIYW5kbGUoZSk7aWYoci5jb2RlIT09VC5TVUNDRVNTKXJldHVybiBDLmVycm9yKGByZVRyeUV4Y2hhbmdlIGZhaWxlZDogJHtyLmNvZGV9YCkse2NvZGU6ci5jb2RlfTtjb25zdHtzZHA6aSxyZXN1bHRDb2RlOm59PXIuZGF0YTtpZihuIT09VC5TVUNDRVNTKXJldHVybiBDLmVycm9yKGBleGNoYW5nZSB3aXRoIHB1c2hPdGhlclJvb20gZmFpbGVkOiAke259YCkse2NvZGU6bn07Y29uc3Qgcz15aWVsZCB0aGlzLl9wYy5zZXRSZW1vdGVBbnN3ZXIoaS5zZHApO3JldHVybiBzIT09VC5TVUNDRVNTP3tjb2RlOnN9OnZvaWQgMH0pKX1nZXRSb29tUEtIYW5kbGVyKCl7cmV0dXJuIHRoaXMuX2lzTWFpblJvb20/e2NvZGU6VC5TVUNDRVNTLHJvb21QS0hhbmRsZXI6dGhpcy5fcm9vbVBLSGFuZGxlcn06KEMuZXJyb3IoXCJ0aGUgYGdldFJvb21QS0hhbmRsZXJgIGlzIGRpc2FibGVkIGluIFBLIHJvb20gXCIpLHtjb2RlOlQuVEhFX0ZVTkNUSU9OX0lTX0RJU0FCTEVEX0lOX1BLUk9PTX0pfV9xdWl0QWxsUEtSb29tKCl7Y29uc3QgZT10aGlzLl9yb29tUEtIYW5kbGVyLmdldEpvaW5lZFBLUm9vbXMoKTtmb3IoY29uc3QgdCBpbiBlKXtjb25zdCByPWVbdF07dGhpcy5fcm9vbVBLSGFuZGxlci5sZWF2ZU90aGVyUm9vbShyKX19fWNsYXNzIG1yIGV4dGVuZHMgcnJ7Y29uc3RydWN0b3IoZSx0LHIsaSxuLHMsbyl7c3VwZXIoZSx0LHIsaSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLlJUQ01vZGUuUlRDLG4scyxvLCExKX19Y29uc3QgZnI9KCk9Pih7XCJDb250ZW50LVR5cGVcIjpcImFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD1VVEYtOFwiLFwiQ2FjaGUtQ29udHJvbFwiOlwibm8tY2FjaGVcIixDbGllbnRUeXBlOmB3ZWJ8JHt5dC5icm93c2VyfXwke3l0LnZlcnNpb259YCxDbGllbnRWZXJzaW9uOlwiNS4zLjFcIixcIkNsaWVudC1TZXNzaW9uLUlkXCI6aHIoKSxcIlJlcXVlc3QtSWRcIjpEYXRlLm5vdygpLnRvU3RyaW5nKCl9KTtjbGFzcyB2cntjb25zdHJ1Y3RvcihlLHQscixpPTVlMyl7dGhpcy5fcnVudGltZT1lLHRoaXMuX2NvbnRleHQ9dCx0aGlzLl9tc1VybD1yLHRoaXMuX3RpbWVvdXQ9aSx0aGlzLl9tc0luTmF2aT1bXSx0aGlzLl9mYWlsZWRNcz1bXSx0aGlzLl9ydGNGaW5nZXI9dm9pZCAwLHRoaXMuX2NsdXN0ZXJJZD1cIlwiLHRoaXMuX2NvbmZpZ1VybD1cIlwifWdldE5hdmlNUygpe3JldHVybiB0aGlzLl9tc1VybD9bdGhpcy5fbXNVcmxdOnRoaXMuX2NsdXN0ZXJJZD9bYGh0dHBzOi8vJHt0aGlzLl9jbHVzdGVySWR9YF06KDA9PT10aGlzLl9tc0luTmF2aS5sZW5ndGgmJigwPT09dGhpcy5fZmFpbGVkTXMubGVuZ3RoP3RoaXMuX21zSW5OYXZpLnB1c2goLi4uKGU9Pnt2YXIgdDtpZighZSlyZXR1cm5bXTtsZXQgcjt0cnl7cj1KU09OLnBhcnNlKGUudm9pcENhbGxJbmZvfHwneyBcInN0cmF0ZWd5XCI6IDAgfScpfWNhdGNoKHQpe3JldHVybiBDLndhcm4oXCJwYXJzZSBgdm9pcENhbGxJbmZvYCBvZiBuYXZpIGZhaWxlZDogXCIrZS52b2lwQ2FsbEluZm8pLFtdfWlmKDA9PT1yLnN0cmF0ZWd5KXJldHVybltdO2NvbnN0IGk9bnVsbD09PSh0PXIuY2FsbEVuZ2luZSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuZmlsdGVyKChlPT40PT09ZS5lbmdpbmVUeXBlKSk7aWYoIWl8fDA9PT1pLmxlbmd0aClyZXR1cm5bXTtjb25zdCBuPWlbMF0scz1bXTtyZXR1cm4gbi5tZWRpYVNlcnZlciYmcy5wdXNoKG4ubWVkaWFTZXJ2ZXIucmVwbGFjZSgvXihodHRwcz86XFwvXFwvKT8vLFwiaHR0cHM6Ly9cIikpLG4uYmFja3VwTWVkaWFTZXJ2ZXImJm4uYmFja3VwTWVkaWFTZXJ2ZXIuZm9yRWFjaCgoZT0+e3MucHVzaChlLnJlcGxhY2UoL14oaHR0cHM/OlxcL1xcLyk/LyxcImh0dHBzOi8vXCIpKX0pKSxzfSkodGhpcy5fY29udGV4dC5nZXROYXZpSW5mbygpKSk6KHRoaXMuX21zSW5OYXZpLnB1c2goLi4udGhpcy5fZmFpbGVkTXMpLHRoaXMuX2ZhaWxlZE1zLmxlbmd0aD0wKSksdGhpcy5fbXNJbk5hdmkubWFwKChlPT5lLnRyaW0oKSkpKX1fcmVxdWVzdChlLHQscil7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCBpPXRoaXMuZ2V0TmF2aU1TKCk7aWYoMD09PWkubGVuZ3RoKXJldHVybntjb2RlOlQuTk9UX09QRU5fVklERU9fQVVESU9fU0VSVkVSfTt0aGlzLl9ydGNGaW5nZXImJihyLnJ0Y0Zpbmdlcj10aGlzLl9ydGNGaW5nZXIpO2ZvcihsZXQgbj0wO248aS5sZW5ndGg7bis9MSl7Y29uc3Qgcz1gJHtpW25dfSR7ZX1gLG89ZnIoKTtDLmRlYnVnKGByZXF1ZXN0IC0+IFJlcXVlc3QtSWQ6ICR7b1tcIlJlcXVlc3QtSWRcIl19LCB1cmw6ICR7c31gKTtjb25zdHtzdGF0dXM6YSxkYXRhOmN9PXlpZWxkIHRoaXMuX3J1bnRpbWUuaHR0cFJlcSh7dXJsOnMsYm9keTpKU09OLnN0cmluZ2lmeShyKSxoZWFkZXJzOk9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxvKSx0KSxtZXRob2Q6X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5IdHRwTWV0aG9kLlBPU1QsdGltZW91dDp0aGlzLl90aW1lb3V0fSk7aWYoMjAwPT09YSl7Y29uc3QgZT1KU09OLnBhcnNlKGMpO3JldHVybiBlLnJ0Y0ZpbmdlciYmKHRoaXMuX3J0Y0Zpbmdlcj1lLnJ0Y0ZpbmdlciksZS5jbHVzdGVySWQmJih0aGlzLl9jbHVzdGVySWQ9ZS5jbHVzdGVySWQpLEMuZGVidWcoYHJlcXVlc3Qgc3VjY2VzcyAtPiBSZXF1ZXN0LUlkOiAke29bXCJSZXF1ZXN0LUlkXCJdfWApLHtjb2RlOlQuU1VDQ0VTUyxkYXRhOmV9fUMud2FybihgcmVxdWVzdCBmYWlsZWQgLT4gUmVxdWVzdC1JZDogJHtvW1wiUmVxdWVzdC1JZFwiXX0sIHN0YXR1czogJHthfSwgdXJsOiAke3N9YCksdGhpcy5fZmFpbGVkTXMucHVzaCguLi50aGlzLl9tc0luTmF2aS5zcGxpY2UobiwxKSl9cmV0dXJue2NvZGU6VC5SRVFVRVNUX0ZBSUxFRH19KSl9ZXhjaGFuZ2UoZSx0KXt2YXIgcjtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0IGk9eWllbGQgdGhpcy5fcmVxdWVzdChcIi9leGNoYW5nZVwiLGUsdCk7aWYoaS5jb2RlPT09VC5TVUNDRVNTJiYobnVsbD09PShyPWkuZGF0YSl8fHZvaWQgMD09PXI/dm9pZCAwOnIucmVzdWx0Q29kZSk9PT1ULlNVQ0NFU1Mpe2NvbnN0IGU9aS5kYXRhLnVybHM7ZSYmKHRoaXMuX2NvbmZpZ1VybD1lLmNvbmZpZ1VybCl9cmV0dXJuIGl9KSl9ZXhpdChlKXtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0e2NvZGU6dH09eWllbGQgdGhpcy5fcmVxdWVzdChcIi9leGl0XCIsZSx7fSk7cmV0dXJuIHR9KSl9YnJvYWRjYXN0U3Vic2NyaWJlKGUsdCl7cmV0dXJuIHRoaXMuX3JlcXVlc3QoXCIvYnJvYWRjYXN0L3N1YnNjcmliZVwiLGUsdCl9YnJvYWRjYXN0RXhpdChlKXtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0e2NvZGU6dH09eWllbGQgdGhpcy5fcmVxdWVzdChcIi9icm9hZGNhc3QvZXhpdFwiLGUse30pO3JldHVybntjb2RlOnR9fSkpfXNldE1jdUNvbmZpZyhlLHQpe3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7aWYoIXRoaXMuX2NvbmZpZ1VybClyZXR1cm57Y29kZTpULk1DVV9TRVJWRVJfTk9UX0ZPVU5EfTtjb25zdCByPWAke3RoaXMuX2NvbmZpZ1VybC5yZXBsYWNlKC9eKGh0dHBzPzpcXC9cXC8pPy8sXCJodHRwczovL1wiKX0vc2VydmVyL21jdS9jb25maWdgLGk9ZnIoKTtDLmRlYnVnKGByZXF1ZXN0IC0+IFJlcXVlc3QtSWQ6ICR7aVtcIlJlcXVlc3QtSWRcIl19LCB1cmw6ICR7cn1gKTtjb25zdHtzdGF0dXM6bixkYXRhOnN9PXlpZWxkIHRoaXMuX3J1bnRpbWUuaHR0cFJlcSh7dXJsOnIsaGVhZGVyczpPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30saSksZSksYm9keTpKU09OLnN0cmluZ2lmeSh0KSxtZXRob2Q6X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5IdHRwTWV0aG9kLlBPU1R9KTtpZigyMDA9PT1uKXtDLmRlYnVnKGByZXF1ZXN0IHN1Y2Nlc3MgLT4gUmVxdWVzdC1JZDogJHtpW1wiUmVxdWVzdC1JZFwiXX1gKTtjb25zdCBlPUpTT04ucGFyc2Uocyk7cmV0dXJue2NvZGU6ZS5yZXN1bHRDb2RlLHJlczplfX1yZXR1cm57Y29kZTpULlJFUVVFU1RfRkFJTEVEfX0pKX1nZXRDRE5SZXNvdXJjZUluZm8oZSx0KXtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0IHI9ZnIoKSx7c3RhdHVzOmksZGF0YTpufT15aWVsZCB0aGlzLl9ydW50aW1lLmh0dHBSZXEoe3VybDp0LGhlYWRlcnM6T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LHIpLGUpLG1ldGhvZDpfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkh0dHBNZXRob2QuR0VUfSk7aWYoMjAwPT09aSl7Y29uc3QgZT1KU09OLnBhcnNlKG4pO3JldHVybntjb2RlOmUucmVzdWx0Q29kZSxyZXM6ZX19cmV0dXJuIEMud2FybihgcmVxdWVzdCBmYWlsZWQgLT4gUmVxdWVzdC1JZDogJHtyW1wiUmVxdWVzdC1JZFwiXX0sIHN0YXR1czogJHtpfSwgdXJsOiAke3R9YCkse2NvZGU6VC5SRVFVRVNUX0ZBSUxFRH19KSl9fWNsYXNzIFJye2NvbnN0cnVjdG9yKGUsdCxyKXt0aGlzLl9jb250ZXh0PWUsdGhpcy5fcnRjVG9rZW49XCJcIix0aGlzLl9saXZlVXJsPVwiXCIsdGhpcy5fc3ViVHJhY2tzPVtdLHRoaXMuX2xpdmluZ1R5cGU9bnVsbCx0aGlzLl9tZWRpYVR5cGU9bnVsbCx0aGlzLl9zdWJUaW55PSExLHRoaXMuX2Zyb21SZXRyeT0hMSx0aGlzLl9hcHBMaXN0ZW5lcj1udWxsLHRoaXMuX3NlcnZpY2U9bmV3IHZyKHQsZSxyLm1lZGlhU2VydmVyKX1fZ2V0UmVxSGVhZGVycyhlKXtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0IHQ9dGhpcy5fY29udGV4dC5nZXRDdXJyZW50SWQoKSxyPXQ7aWYoIXRoaXMuX3J0Y1Rva2VuKXtjb25zdHtjb2RlOnQsZGF0YTpufT15aWVsZCB0aGlzLl9jb250ZXh0LmdldFJUQ1Rva2VuKHIsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5SVENNb2RlLkxJVkUsZSk7aWYodCE9PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1MpcmV0dXJuIEMuZXJyb3IoYGdldFJUQ1Rva2VuIGZhaWxlZDogJHt0fWApLHtjb2RlOlQuU0lHTkFMX0VSUk9SfTt0aGlzLl9ydGNUb2tlbj1uLnJ0Y1Rva2VufXJldHVybntjb2RlOlQuU1VDQ0VTUyxoZWFkZXJzOntcIkFwcC1LZXlcIjp0aGlzLl9jb250ZXh0LmdldEFwcGtleSgpLFVzZXJJZDp0LFJvb21JZDpyLFJvb21UeXBlOl9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uUlRDTW9kZS5MSVZFLFRva2VuOnRoaXMuX3J0Y1Rva2VufX19KSl9X2NsZWFyU3Vic2NyaWJlSW5mbygpe3ZhciBlO3RoaXMuX2xpdmVVcmw9XCJcIix0aGlzLl9saXZpbmdUeXBlPW51bGwsdGhpcy5fbWVkaWFUeXBlPW51bGwsdGhpcy5fc3ViVGlueT0hMSx0aGlzLl9zdWJUcmFja3MubGVuZ3RoPTAsbnVsbD09PShlPXRoaXMuX3BjKXx8dm9pZCAwPT09ZXx8ZS5kZXN0cm95KCksdGhpcy5fcGM9bnVsbH1fcmVUcnlFeGNoYW5nZSgpe3ZhciBlO3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7dGhpcy5fZnJvbVJldHJ5PSEwO2NvbnN0e2NvZGU6dH09eWllbGQgdGhpcy5zdWJzY3JpYmUodGhpcy5fbGl2ZVVybCx0aGlzLl9saXZpbmdUeXBlLHRoaXMuX21lZGlhVHlwZSx0aGlzLl9zdWJUaW55KTt0PT09VC5TVUNDRVNTJiYobnVsbD09PShlPXRoaXMuX3BjKXx8dm9pZCAwPT09ZXx8ZS5jbGVhclJlVHJ5RXhjaGFuZ2VUaW1lcigpKX0pKX1zdWJzY3JpYmUoZSx0LHIsaT0hMSl7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4gaygoKCk9PnRoaXMuX19zdWJzY3JpYmUoZSx0LHIsaSkpKX0pKX1fX3N1YnNjcmliZShlLHQscixpPSExKXt2YXIgbjtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0IHM9W107aWYoT3QodGhpcy5fY29udGV4dC5nZXROYXZpSW5mbygpKSlyZXR1cm57Y29kZTpULlBBQ0tBR0VfRU5WSVJPTk1FTlRfRVJST1IsdHJhY2tzOnN9O2lmKCF0aGlzLl9mcm9tUmV0cnkmJihudWxsPT09KG49dGhpcy5fcGMpfHx2b2lkIDA9PT1ufHxuLmNsZWFyUmVUcnlFeGNoYW5nZVRpbWVyKCkpLHRoaXMuX2Zyb21SZXRyeT0hMSwhKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5pc1N0cmluZykoZSkpcmV0dXJuIEMuZXJyb3IoYGxpdmVVcmwgaXMgaW52YWxpZDogJHtlfWApLHtjb2RlOlQuUEFSQU1TX0VSUk9SLHRyYWNrczpzfTtpZighW2xyLkFVRElPLGxyLlZJREVPXS5pbmNsdWRlcyh0KSlyZXR1cm4gQy5lcnJvcihgbGl2aW5nVHlwZSBpcyBpbnZhbGlkOiAke3R9YCkse2NvZGU6VC5QQVJBTVNfRVJST1IsdHJhY2tzOnN9O2lmKCFbRmUuQVVESU9fT05MWSxGZS5WSURFT19PTkxZLEZlLkFVRElPX1ZJREVPXS5pbmNsdWRlcyhyKSlyZXR1cm4gQy5lcnJvcihgbWVkaWFUeXBlIGlzIGludmFsaWQ6ICR7cn1gKSx7Y29kZTpULlBBUkFNU19FUlJPUix0cmFja3M6c307aWYodGhpcy5fbGl2ZVVybCYmdGhpcy5fbGl2ZVVybCE9PWUpcmV0dXJue2NvZGU6VC5CUk9BRENBU1RfU1VCX0xJU1RfTk9UX0VNUFRZLHRyYWNrczpzfTt0aGlzLl9wY3x8KHRoaXMuX3BjPW5ldyBXdCh0aGlzLl9yZVRyeUV4Y2hhbmdlLmJpbmQodGhpcykpLHRoaXMuX3BjLm9uKFd0Ll9fSU5ORVJfRVZFTlRfVFJBQ0tfUkVBRFlfXyx0aGlzLl9vblRyYWNrUmVhZHksdGhpcyksdGhpcy5yZWdpc3RlclJlcG9ydExpc3RlbmVyKHRoaXMuX3JlcG9ydExpc3RlbmVyKSksdGhpcy5fbGl2ZVVybD1lO2NvbnN0e2NvZGU6byxoZWFkZXJzOmF9PXlpZWxkIHRoaXMuX2dldFJlcUhlYWRlcnModCk7aWYobyE9PVQuU1VDQ0VTUylyZXR1cm57Y29kZTpvLHRyYWNrczpzfTtjb25zdCBjPWByY19tY3VfJHtEYXRlLm5vdygpfWAsZD1cIlJvbmdDbG91ZFJUQ1wiOzA9PT10aGlzLl9zdWJUcmFja3MubGVuZ3RoJiYodGhpcy5fc3ViVHJhY2tzLnB1c2gobmV3IG90KGQsYyksbmV3IGF0KGQsYykpLHRoaXMuX3BjLnVwZGF0ZVN1YlJlbW90ZVRyYWNrcyh0aGlzLl9zdWJUcmFja3Muc2xpY2UoKSkpO2NvbnN0IHU9e3NkcDp5aWVsZCB0aGlzLl9wYy5jcmVhdGVPZmZlcighMCksbGl2ZVVybDplLG1lZGlhVHlwZTpyLHNpbXVsY2FzdDppP010LlRJTlk6TXQuTk9STUFMLHN3aXRjaHN0cmVhbTohMX0sbD15aWVsZCB0aGlzLl9zZXJ2aWNlLmJyb2FkY2FzdFN1YnNjcmliZShhLHUpO2lmKGwuY29kZSE9PVQuU1VDQ0VTUylyZXR1cm4gQy5lcnJvcihgYW5kaWVuY2Ugc3Vic2NyaWJlIGZhaWxlZDogJHtsLmNvZGV9YCkse2NvZGU6bC5jb2RlLHRyYWNrczpzfTtjb25zdCBoPWwuZGF0YTtpZihoLnJlc3VsdENvZGUhPT1ULlNVQ0NFU1MpcmV0dXJuIEMuZXJyb3IoYGFuZGllbmNlIHN1YnNjcmliZSBmYWlsZWQhIGNvZGU6ICR7aC5yZXN1bHRDb2RlfTsgbWVzc2FnZTogJHtoLm1lc3NhZ2V9YCkse2NvZGU6aC5yZXN1bHRDb2RlLHRyYWNrczpzfTtDLmRlYnVnKGBhbmRpZW5jZSBzdWJzY3JpYmUgc3VjY2VzczogJHtlfWApLHRoaXMuX2xpdmluZ1R5cGU9dCx0aGlzLl9tZWRpYVR5cGU9cix0aGlzLl9zdWJUaW55PWk7Y29uc3R7c2RwOnAsc3Vic2NyaWJlZExpc3Q6X309aCxtPVtdO3JldHVybiBfLmZvckVhY2goKGU9Pntjb25zdHttZWRpYVR5cGU6dH09ZSxyPXRoaXMuX3N1YlRyYWNrc1t0XTttLnB1c2gociksci5fX2lubmVyU2V0UmVtb3RlTXV0ZWQoITApfSkpLHRoaXMuX3BjLnNldFJlbW90ZUFuc3dlcihwLnNkcCkse2NvZGU6VC5TVUNDRVNTLHRyYWNrczptfX0pKX11bnN1YnNjcmliZSgpe3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIGsoKCgpPT50aGlzLl9fdW5zdWJzY3JpYmUoKSkpfSkpfV9fdW5zdWJzY3JpYmUoKXt2YXIgZTtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2lmKG51bGw9PT0oZT10aGlzLl9wYyl8fHZvaWQgMD09PWV8fGUuY2xlYXJSZVRyeUV4Y2hhbmdlVGltZXIoKSwhdGhpcy5fcnRjVG9rZW58fCF0aGlzLl9saXZlVXJsKXJldHVybntjb2RlOlQuU1VDQ0VTU307Y29uc3R7aGVhZGVyczp0fT15aWVsZCB0aGlzLl9nZXRSZXFIZWFkZXJzKCkse2NvZGU6cn09eWllbGQgdGhpcy5fc2VydmljZS5icm9hZGNhc3RFeGl0KHQpO3JldHVybiByIT09VC5TVUNDRVNTP0MuZXJyb3IoYGJyb2FkY2FzdCB1bnN1YnNjcmliZSBmYWlsZWQ6ICR7cn1gKTpDLmRlYnVnKFwiYnJvYWRjYXN0IHVuc3Vic2NyaWJlIHN1Y2Nlc3NcIiksdGhpcy5fY2xlYXJTdWJzY3JpYmVJbmZvKCkse2NvZGU6cn19KSl9cmVnaXN0ZXJSZXBvcnRMaXN0ZW5lcihlKXt2YXIgdDt0aGlzLl9yZXBvcnRMaXN0ZW5lcj1lLG51bGw9PT0odD10aGlzLl9wYyl8fHZvaWQgMD09PXR8fHQucmVnaXN0ZXJSZXBvcnRMaXN0ZW5lcihlKX1yZWdpc3RlclRyYWNrRXZlbnRMaXN0ZW5lcihlKXt0aGlzLl9hcHBMaXN0ZW5lcj1lfV9vblRyYWNrUmVhZHkoZSl7dmFyIHQscjtjb25zdCBpPWUucmVjZWl2ZXIudHJhY2ssbj1cImF1ZGlvXCI9PT1pLmtpbmQ/RmUuQVVESU9fT05MWTpGZS5WSURFT19PTkxZLHM9dGhpcy5fc3ViVHJhY2tzW25dO3MuX19pbm5lclNldE1lZGlhU3RyZWFtVHJhY2soaSk7dHJ5e251bGw9PT0ocj1udWxsPT09KHQ9dGhpcy5fYXBwTGlzdGVuZXIpfHx2b2lkIDA9PT10P3ZvaWQgMDp0Lm9uVHJhY2tSZWFkeSl8fHZvaWQgMD09PXJ8fHIuY2FsbCh0LHMpfWNhdGNoKGUpe0MuZXJyb3IoZSl9fX12YXIgZ3IsU3I7IWZ1bmN0aW9uKGUpe2UuUlRNUD1cInJ0bXBcIixlLkZMVj1cImZsdlwiLGUuSExTPVwiaGxzXCJ9KGdyfHwoZ3I9e30pKSxmdW5jdGlvbihlKXtlW2UuTk9UX0hUVFBTPTBdPVwiTk9UX0hUVFBTXCIsZVtlLkhUVFBTPTFdPVwiSFRUUFNcIn0oU3J8fChTcj17fSkpO2NvbnN0IENyPU9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxDdChIZS5XMTc2X0gxNDQpKSx7ZnJhbWVSYXRlOkV0KEJlLkZQU18xNSl9KTtjbGFzcyBUcntjb25zdHJ1Y3RvcihlLHQscixpLG4scyl7dGhpcy5fY29udGV4dD1lLHRoaXMuX3J1bnRpbWU9dCx0aGlzLl9pbml0T3B0aW9ucz1yLHRoaXMuX3Jvb21JZD1pLHRoaXMuX2pvaW5SZXNEYXRhPW4sdGhpcy5fbGl2aW5nVHlwZT1zLHRoaXMuX3Jvb21BbmNob3JMaXN0PVtdLHRoaXMuX3Jvb21SZXM9e30sdGhpcy5fcm9vbUFuY2hvclJlcz17fSx0aGlzLl9yZW1vdGVUcmFja3M9e30sdGhpcy5fYXBwTGlzdGVuZXI9bnVsbCx0aGlzLl9zdWJzY3JpYmVkTGlzdD1bXSx0aGlzLl9zZXNzaW9uSWQ9XCJcIix0aGlzLl9kZXN0cm95ZWQ9ITEsdGhpcy5fc2V0SW5pdERhdGEoKSx0aGlzLl9zZXJ2aWNlPW5ldyB2cih0aGlzLl9ydW50aW1lLHRoaXMuX2NvbnRleHQsdGhpcy5faW5pdE9wdGlvbnMubWVkaWFTZXJ2ZXIsdGhpcy5faW5pdE9wdGlvbnMudGltZW91dCksdGhpcy5fcG9sYXJpc1JlcG9ydD1uZXcgWnQodGhpcy5fY29udGV4dCx0aGlzLl9ydW50aW1lLHRoaXMuX3Jvb21JZCx0aGlzLHF0LkF1ZGllbmNlKSx0aGlzLl9wb2xhcmlzUmVwb3J0LnNlbmRSMSgpLHRoaXMuX3BjPW5ldyBXdCh0aGlzLl9yZVRyeUV4Y2hhbmdlLmJpbmQodGhpcyksdGhpcy5fcG9sYXJpc1JlcG9ydCksdGhpcy5fcGMub24oV3QuX19JTk5FUl9FVkVOVF9UUkFDS19SRUFEWV9fLChlPT57Y29uc3QgdD1lLnN0cmVhbXNbMF0uaWQscj1lLnJlY2VpdmVyLnRyYWNrLGk9W3QsXCJhdWRpb1wiPT09ci5raW5kP0ZlLkFVRElPX09OTFk6RmUuVklERU9fT05MWV0uam9pbihcIl9cIiksbj10aGlzLl9yZW1vdGVUcmFja3NbaV07bj8obi5fX2lubmVyU2V0TWVkaWFTdHJlYW1UcmFjayhyKSx0aGlzLl9jYWxsQXBwTGlzdGVuZXIoXCJvblRyYWNrUmVhZHlcIixuKSk6Qy53YXJuKFwiY2Fubm90IGZvdW5kIFJDUmVtb3RlVHJhY2s6XCIsci5pZCl9KSksdGhpcy5fY29udGV4dC5vbnJ0Y2RhdGFjaGFuZ2U9dGhpcy5zaW5nYWxEYXRhQ2hhbmdlLmJpbmQodGhpcyl9X3NldEluaXREYXRhKCl7Y29uc3R7c2Vzc2lvbklkOmUscmVtb3RlVXNlcklkczp0LHJlbW90ZVJUQ1VyaXM6cixyZW1vdGVNVUNVcmlzOmkscmVtb3RlVHJhY2tzOm4sQ0ROVXJpczpzfT0oKGUsdCk9Pntjb25zdCByPXQuZmlsdGVyKChlPT5cIlJDX1JUQ19TRVNTSU9OSURcIj09PWUua2V5KSlbMF0saT1yP3IudmFsdWU6XCJcIixuPXQuZmlsdGVyKChlPT5cIlJDX0FOQ0hPUl9MSVNUXCI9PT1lLmtleSkpLm1hcCgoZT0+SlNPTi5wYXJzZShlLnZhbHVlfHxcIltdXCIpKSlbMF0scz10LmZpbHRlcigoZT0+ZS5rZXkuaW5jbHVkZXMoXCJSQ19SRVNfXCIpKSkubWFwKChlPT5KU09OLnBhcnNlKGUudmFsdWV8fFwie31cIikpKSxvPXMubGVuZ3RoP0pTT04ucGFyc2Uoc1swXS5tY3VfdXJpc3x8XCJbXVwiKTpbXSxhPVtdO28uZm9yRWFjaCgodD0+e2NvbnN0e21lZGlhVHlwZTpyLHRhZzppfT10LG49cj09PUZlLkFVRElPX09OTFk/bmV3IG90KGksXCJcIixlKTpuZXcgYXQoaSxcIlwiLGUpO2EucHVzaChuKX0pKTtjb25zdCBjPVtdLGQ9W107cy5mb3JFYWNoKChlPT57Y29uc3QgdD1KU09OLnBhcnNlKGUudXJpc3x8XCJbXVwiKTtjLnB1c2goLi4udCksdC5mb3JFYWNoKChlPT57Y29uc3R7bWVkaWFUeXBlOnQsdGFnOnIsbXNpZDppfT1lLG49aS5zcGxpdChcIl9cIilbMF0scz10PT09RmUuQVVESU9fT05MWT9uZXcgb3QocixuKTpuZXcgYXQocixuKTtkLnB1c2gocyl9KSl9KSk7Y29uc3QgdT10LmZpbHRlcigoZT0+XCJSQ19DRE5cIj09PWUua2V5KSkubWFwKChlPT57Y29uc3QgdD1KU09OLnBhcnNlKGUudmFsdWV8fFwiW11cIik7cmV0dXJuIEpTT04ucGFyc2UodC5jZG5fdXJpcylbMF19KSlbMF07cmV0dXJue3Nlc3Npb25JZDppLHJlbW90ZVVzZXJJZHM6bnx8W10scmVtb3RlUlRDVXJpczpjLHJlbW90ZU1VQ1VyaXM6byxyZW1vdGVSVENUcmFja3M6ZCxyZW1vdGVNQ1VUcmFja3M6YSxyZW1vdGVUcmFja3M6Wy4uLmQsLi4uYV0sQ0ROVXJpczp1fHx7fX19KSh0aGlzLl9yb29tSWQsdGhpcy5fam9pblJlc0RhdGEua3ZFbnRyaWVzKTt0aGlzLl9zZXNzaW9uSWQ9ZSx0aGlzLl9yb29tQW5jaG9yTGlzdD10LG4uZm9yRWFjaCgoZT0+e3RoaXMuX3JlbW90ZVRyYWNrc1tlLmdldFRyYWNrSWQoKV09ZX0pKSx0aGlzLl9DRE5VcmlzPXMsci5mb3JFYWNoKChlPT57Y29uc3QgdD1lLm1zaWQuc3BsaXQoXCJfXCIpWzBdO3RoaXMuX3Jvb21BbmNob3JSZXNbdF0/dGhpcy5fcm9vbUFuY2hvclJlc1t0XS5wdXNoKGUpOnRoaXMuX3Jvb21BbmNob3JSZXNbdF09W2VdfSkpLGkuZm9yRWFjaCgoZT0+e2NvbnN0e21lZGlhVHlwZTp0LHRhZzpyfT1lLGk9W3RoaXMuX3Jvb21JZCxyLHRdLmpvaW4oXCJfXCIpO3RoaXMuX3Jvb21SZXNbaV09ZX0pKSxyLmZvckVhY2goKGU9Pntjb25zdCB0PW10KGUpO3RoaXMuX3Jvb21SZXNbdF09ZX0pKX1fYXNzZXJ0Um9vbURlc3Ryb3llZCgpe2lmKHRoaXMuX2Rlc3Ryb3llZCl7Y29uc3QgZT1cIlRoaXMgcm9vbSBoYXMgYmVlbiBkZXN0cm95ZWQuIFBsZWFzZSB1c2UgYFJDUlRDQ2xpZW50LmpvaW5MaXZpbmdSb29tQXNBdWRpZW5jZWAgdG8gY2F0Y2ggYW5vdGhlciBpbnN0YW5jZS5cIjtyZXR1cm4gQy53YXJuKGUpLFQuUk9PTV9IQVNfQkVFTl9ERVNUUk9ZRUR9fXNpbmdhbERhdGFDaGFuZ2UoZSx0KXt2YXIgcjtpZih0IT09dGhpcy5fcm9vbUlkKXJldHVybiB2b2lkIEMud2Fybihgc2luZ2FsRGF0YUNoYW5nZSAtPiBub3QgdGhlIGN1cnJlbnQgcm9vbSBkYXRhOiBkYXRhIHJvb21JZDogJHt0fSwgY3VycmVudCByb29tSWQ6ICR7dGhpcy5fcm9vbUlkfWApO0MuZGVidWcoXCJzaW5nYWxEYXRhQ2hhbmdlIC0+IHNpbmdhbERhdGE6XCIsSlNPTi5zdHJpbmdpZnkoZXx8e30pKTtjb25zdCBpPVtdLG49bnVsbD09PShyPWUuZmlsdGVyKChlPT5cIlJDX0NETlwiPT09ZS5rZXkpKVswXSl8fHZvaWQgMD09PXI/dm9pZCAwOnIudmFsdWU7biYmdGhpcy5fZGlmZkNETlVyaXMoSlNPTi5wYXJzZShKU09OLnBhcnNlKG4pLmNkbl91cmlzKVswXSksZS5mb3JFYWNoKChlPT57Y29uc3R7a2V5OnQsdmFsdWU6cix0aW1lc3RhbXA6bix1aWQ6c309ZTtpZigtMSE9PXQuaW5kZXhPZihcIlJDX1JFU19cIikpe2NvbnN0IGU9SlNPTi5wYXJzZShyfHxcInt9XCIpLHQ9SlNPTi5wYXJzZShlLm1jdV91cmlzfHxcIltdXCIpLG49SlNPTi5wYXJzZShlLnVyaXN8fFwiW11cIik7cmV0dXJuIGkucHVzaCguLi50KSx2b2lkIHRoaXMuX2RpZmZBbmNob3JSZXNvdXJjZShuLHMpfWlmKFwiUkNfQU5DSE9SX0xJU1RcIj09PXQpe2NvbnN0IGU9SlNPTi5wYXJzZShyfHxcIltdXCIpLHtqb2luVXNlcklkczp0LGxlZnRVc2VySWRzOml9PXRoaXMuX2RpZmZBbmNob3JMaXN0KGUpO3QubGVuZ3RoPjAmJnRoaXMuX2hhbmRsZU5ld0pvaW5lZEFuY2hvcih0KSxpLmxlbmd0aD4wJiZ0aGlzLl9oYW5kbGVMZWZ0ZWRBbmNob3IoaSl9fSkpLHRoaXMuX2RpZmZSb29tUmVzb3VyY2UoaSl9X2RpZmZBbmNob3JMaXN0KGUpe2NvbnN0IHQ9ZS5maWx0ZXIoKGU9PnRoaXMuX3Jvb21BbmNob3JMaXN0LmluZGV4T2YoZSk8MCkpO3JldHVybntsZWZ0VXNlcklkczp0aGlzLl9yb29tQW5jaG9yTGlzdC5maWx0ZXIoKHQ9PmUuaW5kZXhPZih0KTwwKSksam9pblVzZXJJZHM6dH19X2hhbmRsZU5ld0pvaW5lZEFuY2hvcihlKXt0aGlzLl9yb29tQW5jaG9yTGlzdC5wdXNoKC4uLmUpLHRoaXMuX2NhbGxBcHBMaXN0ZW5lcihcIm9uQW5jaG9ySm9pblwiLGUpfV9oYW5kbGVMZWZ0ZWRBbmNob3IoZSl7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXt0aGlzLl9yb29tQW5jaG9yTGlzdD10aGlzLl9yb29tQW5jaG9yTGlzdC5maWx0ZXIoKHQ9PiEoZS5pbmRleE9mKHQpPi0xKSkpO2NvbnN0IHQ9W107ZS5mb3JFYWNoKChlPT57dC5wdXNoKC4uLnRoaXMuZ2V0UmVtb3RlVHJhY2tzQnlVc2VySWQoZSkpLGRlbGV0ZSB0aGlzLl9yb29tQW5jaG9yUmVzW2VdfSkpLHQubGVuZ3RoJiYoeWllbGQgdGhpcy51bnN1YnNjcmliZSh0KSx0LmZvckVhY2goKGU9PmRlbGV0ZSB0aGlzLl9yZW1vdGVUcmFja3NbZS5nZXRUcmFja0lkKCldKSkpLHRoaXMuX2NhbGxBcHBMaXN0ZW5lcihcIm9uQW5jaG9yTGVhdmVcIixlKX0pKX1fZGlmZlJvb21SZXNvdXJjZShlKXtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0IHQ9W10scj1bXSxpPVtdO2UuZm9yRWFjaCgoZT0+e2NvbnN0IHI9bXQoZSkse3VzZXJJZDpuLHRhZzpzLG1lZGlhVHlwZTpvfT1mdChyKSxhPVt0aGlzLl9yb29tSWQscyxvXS5qb2luKFwiX1wiKTtpZighdGhpcy5fcmVtb3RlVHJhY2tzW2FdKXtjb25zdCByPW89PT1GZS5BVURJT19PTkxZP25ldyBvdChzLFwiXCIsdGhpcy5fcm9vbUlkKTpuZXcgYXQocyxcIlwiLHRoaXMuX3Jvb21JZCk7dC5wdXNoKHIpLHRoaXMuX3JlbW90ZVRyYWNrc1thXT1yLHRoaXMuX3Jvb21SZXNbci5nZXRUcmFja0lkKCldPWV9aS5wdXNoKGEpfSkpLE9iamVjdC5rZXlzKHRoaXMuX3JlbW90ZVRyYWNrcykuZm9yRWFjaCgoZT0+e2kuaW5kZXhPZihlKTwwJiZ0aGlzLl9yZW1vdGVUcmFja3NbZV0uaXNNQ1VUcmFjaygpJiZyLnB1c2godGhpcy5fcmVtb3RlVHJhY2tzW2VdKX0pKSx0Lmxlbmd0aD4wJiZ0aGlzLl9jYWxsQXBwTGlzdGVuZXIoXCJvblRyYWNrUHVibGlzaFwiLHQpLHIubGVuZ3RoPjAmJnRoaXMuX29uVXNlclVucHVibGlzaChyLFwib25UcmFja1VucHVibGlzaFwiKX0pKX1fZGlmZkFuY2hvclJlc291cmNlKGUsdCl7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCByPXRoaXMuX3Jvb21BbmNob3JSZXNbdF18fCh0aGlzLl9yb29tQW5jaG9yUmVzW3RdPVtdKSx7cHVibGlzaGVkTGlzdDppLHVucHVibGlzaGVkTGlzdDpuLG1vZGlmaWVkTGlzdDpzfT1ndChyLGUpO2lmKGkubGVuZ3RoKXtjb25zdCBlPXIubWFwKG10KSx0PVtdLG49W107aWYoaS5mb3JFYWNoKChpPT57Y29uc3Qgcz1tdChpKSxvPWUuaW5kZXhPZihzKSx7dXNlcklkOmEsdGFnOmMsbWVkaWFUeXBlOmR9PWZ0KHMpO28+LTE/cltvXT1pOnIucHVzaChpKTtsZXQgdT10aGlzLl9yZW1vdGVUcmFja3Nbc107dGhpcy5fcm9vbVJlc1tzXT1pLHU/dS5pc1N1YnNjcmliZWQoKSYmdC5wdXNoKHUpOih1PWQ9PT1GZS5BVURJT19PTkxZP25ldyBvdChjLGEpOm5ldyBhdChjLGEpLHRoaXMuX3JlbW90ZVRyYWNrc1tzXT11LG4ucHVzaCh1KSksdS5fX2lubmVyU2V0UmVtb3RlTXV0ZWQoMD09PWkuc3RhdGUpfSkpLHQubGVuZ3RoKXtjb25zdCBlPXQubWFwKChlPT5lLmdldFRyYWNrSWQoKSkpO0MuZGVidWcoYHJlc3ViIHRyYWNrcyAtPiAke0pTT04uc3RyaW5naWZ5KGUpfWApO2NvbnN0e2NvZGU6cn09eWllbGQgaygoKCk9PnRoaXMuX3N1YnNjcmliZUhhbmRsZSh0LCEwKSkpO3IhPT1ULlNVQ0NFU1MmJkMuZXJyb3IoYHJlc3ViIHRyYWNrcyBmYWlsZWQgLT4gY29kZTogJHtyfSwgaWRzOiAke0pTT04uc3RyaW5naWZ5KGUpfWApfXRoaXMuX2NhbGxBcHBMaXN0ZW5lcihcIm9uQW5jaG9yVHJhY2tQdWJsaXNoXCIsbil9aWYobi5sZW5ndGgpe2NvbnN0IGU9bi5tYXAobXQpO2ZvcihsZXQgdD1yLmxlbmd0aC0xO3Q+PTA7dC09MSl7Y29uc3QgaT1yW3RdO2UuaW5jbHVkZXMobXQoaSkpJiZyLnNwbGljZSh0LDEpfWNvbnN0IHQ9bi5tYXAoKGU9Pntjb25zdCB0PW10KGUpO3JldHVybiB0aGlzLl9yZW1vdGVUcmFja3NbdF19KSk7eWllbGQgdGhpcy5fb25Vc2VyVW5wdWJsaXNoKHQsXCJvbkFuY2hvclRyYWNrVW5wdWJsaXNoXCIpfWlmKHMubGVuZ3RoKXtjb25zdCBlPXIubWFwKG10KTtmb3IobGV0IHQ9MDt0PHMubGVuZ3RoO3QrKyl7Y29uc3QgaT1zW3RdLG49bXQoaSksbz1lLmluZGV4T2Yobik7cltvXS5zdGF0ZT1pLnN0YXRlO2NvbnN0IGE9dGhpcy5fcmVtb3RlVHJhY2tzW25dO2EuX19pbm5lclNldFJlbW90ZU11dGVkKDA9PT1pLnN0YXRlKSxhLmlzQXVkaW9UcmFjaygpP3RoaXMuX2NhbGxBcHBMaXN0ZW5lcihcIm9uQXVkaW9NdXRlQ2hhbmdlXCIsYSk6dGhpcy5fY2FsbEFwcExpc3RlbmVyKFwib25WaWRlb011dGVDaGFuZ2VcIixhKX19fSkpfV9vblVzZXJVbnB1Ymxpc2goZSx0KXtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMudW5zdWJzY3JpYmUoZSksZS5mb3JFYWNoKChlPT57dGhpcy5fc3Vic2NyaWJlZExpc3Q9dGhpcy5fc3Vic2NyaWJlZExpc3QuZmlsdGVyKCh0PT50LnRyYWNrLmdldFRyYWNrSWQoKSE9PWUuZ2V0VHJhY2tJZCgpKSksZGVsZXRlIHRoaXMuX3Jvb21SZXNbZS5nZXRUcmFja0lkKCldLGUuX19pbm5lckRlc3Ryb3koKSxkZWxldGUgdGhpcy5fcmVtb3RlVHJhY2tzW2UuZ2V0VHJhY2tJZCgpXX0pKSx0aGlzLl9jYWxsQXBwTGlzdGVuZXIodCxlKX0pKX1fY2FsbEFwcExpc3RlbmVyKGUsLi4udCl7dmFyIHI7Y29uc3QgaT1udWxsPT09KHI9dGhpcy5fYXBwTGlzdGVuZXIpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyW2VdO2lmKGkpdHJ5e2koLi4udCl9Y2F0Y2goZSl7Qy5lcnJvcihlKX19X3JlVHJ5RXhjaGFuZ2UoKXtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2soKCgpPT5TKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7dmFyIGU7Y29uc3R7cmVxQm9keTp0fT15aWVsZCB0aGlzLl9jcmVhdGVTdWJzY3JpYmVQYXJhbXModGhpcy5fc3Vic2NyaWJlZExpc3Qse30sITApLHI9eWllbGQgdGhpcy5fZXhjaGFuZ2VIYW5kbGUodCk7aWYoci5jb2RlIT09VC5TVUNDRVNTKXJldHVybiBDLmVycm9yKGByZVRyeUV4Y2hhbmdlIGZhaWxlZDogJHtyLmNvZGV9YCkse2NvZGU6ci5jb2RlfTtjb25zdHtzZHA6aSxyZXN1bHRDb2RlOm59PXIuZGF0YTtpZihuIT09VC5TVUNDRVNTKXJldHVybiBDLmVycm9yKGByZVRyeUV4Y2hhbmdlIGZhaWxlZDogJHtufWApLHtjb2RlOm59O3RoaXMuX3BjLmNsZWFyUmVUcnlFeGNoYW5nZVRpbWVyKCk7Y29uc3Qgcz10aGlzLl9zdWJzY3JpYmVkTGlzdC5maWx0ZXIoKGU9PmUudHJhY2suaXNNQ1VUcmFjaygpKSk7aWYocy5sZW5ndGg+MCl7Y29uc3QgdD1zWzBdLnRyYWNrLmdldFRyYWNrSWQoKSxyPW51bGw9PT0oZT10aGlzLl9yb29tUmVzW3RdKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5tc2lkLG49W3RoaXMuX3Jvb21JZCxcIlJvbmdDbG91ZFJUQ1wiXS5qb2luKFwiX1wiKTtpLnNkcD1pLnNkcC5yZXBsYWNlKG5ldyBSZWdFeHAocixcImdcIiksbil9Y29uc3Qgbz15aWVsZCB0aGlzLl9wYy5zZXRSZW1vdGVBbnN3ZXIoaS5zZHApO3JldHVybiBvIT09VC5TVUNDRVNTP3tjb2RlOm99OnZvaWQgMH0pKSkpfSkpfV9jcmVhdGVTdWJzY3JpYmVQYXJhbXMoZSx0LHIpe3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3QgaT15aWVsZCB0aGlzLl9wYy5jcmVhdGVPZmZlcihyKSxuPXtyZXNvbHV0aW9uSW5mbzpbXX0scz17bWluOjAsbWF4OjB9O09iamVjdC5rZXlzKHQpLmZvckVhY2goKGU9Pntjb25zdHttZWRpYVN0cmVhbTpyLHRpbnlTdHJlYW06b309dFtlXTtbcixvXS5mb3JFYWNoKCgodCxyKT0+e3ZhciBvO2NvbnN0IGE9MT09PXI/W2UsXCJ0aW55XCJdLmpvaW4oXCJfXCIpOmU7aS5zZHA9bnVsbD09PShvPWkuc2RwKXx8dm9pZCAwPT09bz92b2lkIDA6by5yZXBsYWNlKG5ldyBSZWdFeHAodC5pZCxcImdcIiksYSk7Y29uc3QgYz10LmdldFZpZGVvVHJhY2tzKClbMF07aWYoIWMpcmV0dXJuO2NvbnN0IGQ9MD09PXIse3dpZHRoOnUsaGVpZ2h0OmwsZnJhbWVSYXRlOmh9PWQ/cHQoYyk6Q3I7bi5yZXNvbHV0aW9uSW5mby5wdXNoKHt0cmFja0lkOmMuaWQsc2ltdWxjYXN0OmQ/TXQuTk9STUFMOk10LlRJTlkscmVzb2x1dGlvbjpgJHt1fXgke2x9YH0pO2NvbnN0IHA9R2UodSxsKSxfPVdlKGgpO3MubWluKz1wLm1pbkJpdHJhdGUqXyxzLm1heCs9cC5tYXhCaXRyYXRlKl99KSl9KSk7cmV0dXJue3JlcUJvZHk6e3NkcDppLHN3aXRjaHN0cmVhbTohMSxuZXdWZXJzaW9uRmxhZzohMCxzdWJzY3JpYmVMaXN0OmUubWFwKChlPT4oe3NpbXVsY2FzdDplLnN1YlRpbnk/TXQuVElOWTpNdC5OT1JNQUwscmVzb2x1dGlvbjpcIlwiLHVyaTp0aGlzLl9yb29tUmVzW2UudHJhY2suZ2V0VHJhY2tJZCgpXS51cml9KSkpfSxkeW5hbWljQml0cmF0ZTpzLG9mZmVyOml9fSkpfV9zdWJzY3JpYmVIYW5kbGUoZSx0PSExKXt2YXIgcjtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2lmKHRoaXMuX2Fzc2VydFJvb21EZXN0cm95ZWQoKSlyZXR1cm57Y29kZTpULlJPT01fSEFTX0JFRU5fREVTVFJPWUVEfTtpZighKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy52YWxpZGF0ZSkoXCJ0cmFja3NcIixlLCgoKT0+KDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5pc0FycmF5KShlKSYmZS5sZW5ndGg+MCYmZS5ldmVyeSgoZT0+ZSBpbnN0YW5jZW9mIHN0fHxlLnRyYWNrIGluc3RhbmNlb2Ygc3QpKSksITApKXJldHVybntjb2RlOlQuUEFSQU1TX0VSUk9SfTtjb25zdCBpPXRoaXMuX3N1YnNjcmliZWRMaXN0Lm1hcCgoZT0+T2JqZWN0LmFzc2lnbih7fSxlKSkpLG49ZS5tYXAoKGU9PmUgaW5zdGFuY2VvZiBzdD97dHJhY2s6ZX06ZSkpO2xldCBzPSExO2NvbnN0IG89W107cmV0dXJuIG4uZm9yRWFjaCgoZT0+e2NvbnN0IHQ9ZS50cmFjay5nZXRUcmFja0lkKCk7by5wdXNoKHQpO2NvbnN0IHI9aS5maW5kKChlPT5lLnRyYWNrLmdldFRyYWNrSWQoKT09PXQpKTtyJiZyLnN1YlRpbnk9PT1lLnN1YlRpbnl8fChyP3Iuc3ViVGlueT1lLnN1YlRpbnk6aS5wdXNoKGUpLHM9ITApfSkpLHN8fHQ/KG51bGw9PT0ocj10aGlzLl9wb2xhcmlzUmVwb3J0KXx8dm9pZCAwPT09cnx8ci5zZW5kUjIoenQuU1VCU0NSSUJFLFF0LkJFR0lOLG8pLHRoaXMuX3VwZGF0ZVN1Ykxpc3RIYW5kbGUoaSwhMCkpOntjb2RlOlQuU1VDQ0VTU319KSl9X2dldFJlcUhlYWRlcnMoKXtjb25zdCBlPXRoaXMuX2NvbnRleHQuZ2V0Q3VycmVudElkKCk7cmV0dXJue1wiQXBwLUtleVwiOnRoaXMuX2NvbnRleHQuZ2V0QXBwa2V5KCksUm9vbUlkOmUsVG9rZW46dGhpcy5fam9pblJlc0RhdGEudG9rZW4sUm9vbVR5cGU6X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5SVENNb2RlLkxJVkUsVXNlcklkOmUsXCJTZXNzaW9uLUlkXCI6dGhpcy5fc2Vzc2lvbklkfX1fZXhjaGFuZ2VIYW5kbGUoZSl7cmV0dXJuIHRoaXMuX3NlcnZpY2UuYnJvYWRjYXN0U3Vic2NyaWJlKHRoaXMuX2dldFJlcUhlYWRlcnMoKSxlKX1fdXBkYXRlU3ViTGlzdEhhbmRsZShlLHQ9ITEpe3ZhciByO3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7aWYodGhpcy5fYXNzZXJ0Um9vbURlc3Ryb3llZCgpKXJldHVybntjb2RlOlQuUk9PTV9IQVNfQkVFTl9ERVNUUk9ZRUR9O2lmKCEoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLnZhbGlkYXRlKShcInJlc291cmNlc1wiLGUsKCgpPT4oMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmlzQXJyYXkpKGUpJiZlLmV2ZXJ5KChlPT5lIGluc3RhbmNlb2Ygc3R8fGUudHJhY2sgaW5zdGFuY2VvZiBzdCkpKSwhMCkpcmV0dXJue2NvZGU6VC5QQVJBTVNfRVJST1J9O2xldCBpPWUubWFwKChlPT5lIGluc3RhbmNlb2Ygc3Q/e3RyYWNrOmV9Ok9iamVjdC5hc3NpZ24oe30sZSkpKTtjb25zdCBuPXt9O2k9aS5maWx0ZXIoKGU9Pntjb25zdCB0PWUudHJhY2suZ2V0VHJhY2tJZCgpO3JldHVybiFuW3RdJiYoblt0XT0hMCl9KSkubWFwKChlPT5PYmplY3QuYXNzaWduKHt9LGUpKSk7Y29uc3Qgcz10aGlzLl9zdWJzY3JpYmVkTGlzdC5tYXAoKGU9Pk9iamVjdC5hc3NpZ24oe30sZSkpKTtpZighdCl7bGV0IGU9ITE7aWYoaS5mb3JFYWNoKCh0PT57Y29uc3Qgcj1zLmZpbmRJbmRleCgoZT0+ZS50cmFjaz09PXQudHJhY2spKTtpZigtMT09PXIpcmV0dXJuIHZvaWQoZT0hMCk7cy5zcGxpY2UociwxKVswXS5zdWJUaW55IT09dC5zdWJUaW55JiYoZT0hMCl9KSkscy5sZW5ndGgmJihlPSEwKSwhZSlyZXR1cm57Y29kZTpULlNVQ0NFU1N9fXRoaXMuX3BjLmNsZWFyUmVUcnlFeGNoYW5nZVRpbWVyKCksdGhpcy5fcGMudXBkYXRlU3ViUmVtb3RlVHJhY2tzKGkubWFwKChlPT5lLnRyYWNrKSkpO2NvbnN0e3JlcUJvZHk6b309eWllbGQgdGhpcy5fY3JlYXRlU3Vic2NyaWJlUGFyYW1zKGkse30sITEpLGE9eWllbGQgdGhpcy5fZXhjaGFuZ2VIYW5kbGUobyk7aWYocy5sZW5ndGgpe2NvbnN0IGU9W107cy5mb3JFYWNoKCh0PT57ZS5wdXNoKHQudHJhY2suZ2V0VHJhY2tJZCgpKX0pKSxudWxsPT09KHI9dGhpcy5fcGMucmVwb3J0UGFyc2VyKXx8dm9pZCAwPT09cnx8ci5jbGVhckxhdGVzdFBhY2tldHNSZWN2KGUpfWlmKGEuY29kZSE9PVQuU1VDQ0VTUylyZXR1cm57Y29kZTphLmNvZGV9O2NvbnN0e3NkcDp1LHJlc3VsdENvZGU6bCxtZXNzYWdlOmgsc3Vic2NyaWJlZExpc3Q6cH09YS5kYXRhO2lmKGwhPT1ULlNVQ0NFU1MpcmV0dXJuIEMuZXJyb3IoXCJjaGFuZ2Ugc3Vic2NyaWJlIGxpc3QgZmFpbGVkOlwiLGgsbCkse2NvZGU6bH07aS5mb3JFYWNoKChlPT57Y29uc3R7dHJhY2s6dH09ZTtpZih0LmlzTUNVVHJhY2soKSl7Y29uc3QgZT10aGlzLl9yb29tUmVzW3QuZ2V0VHJhY2tJZCgpXS5tc2lkLHt0YWc6cix1c2VySWQ6aX09ZnQodC5nZXRUcmFja0lkKCkpLG49W2kscl0uam9pbihcIl9cIik7dS5zZHA9dS5zZHAucmVwbGFjZShuZXcgUmVnRXhwKGUsXCJnXCIpLG4pfX0pKTtjb25zdCBfPXlpZWxkIHRoaXMuX3BjLnNldFJlbW90ZUFuc3dlcih1LnNkcCk7aWYoXyE9PVQuU1VDQ0VTUylyZXR1cm57Y29kZTpffTtjb25zdCBtPW51bGw9PXA/dm9pZCAwOnAubWFwKChlPT5gJHtlLm1zaWR9XyR7ZS5tZWRpYVR5cGV9YCkpLGY9aS5maWx0ZXIoKGU9PntpZihlLnRyYWNrLmlzTUNVVHJhY2soKSl7Y29uc3QgdD10aGlzLl9yb29tUmVzW2UudHJhY2suZ2V0VHJhY2tJZCgpXSxyPWAke3QubXNpZH1fJHt0Lm1lZGlhVHlwZX1gO3JldHVybiBtLmluY2x1ZGVzKHIpfXJldHVybiBudWxsPT1tP3ZvaWQgMDptLmluY2x1ZGVzKGUudHJhY2suZ2V0VHJhY2tJZCgpKX0pKSx2PW51bGw9PWY/dm9pZCAwOmYubWFwKChlPT5gJHtlLnRyYWNrLmdldFRyYWNrSWQoKX1gKSksUj1pLmZpbHRlcigoZT0+IShudWxsPT12P3ZvaWQgMDp2LmluY2x1ZGVzKGUudHJhY2suZ2V0VHJhY2tJZCgpKSkpKTtmb3IoY29uc3QgZSBpbiB0aGlzLl9yZW1vdGVUcmFja3Mpe2NvbnN0IHQ9Zi5zb21lKCh0PT50LnRyYWNrLmdldFRyYWNrSWQoKT09PWUpKTt0aGlzLl9yZW1vdGVUcmFja3NbZV0uX19pbm5lclNldFN1YnNjcmliZWQodCl9cmV0dXJuIHRoaXMuX3N1YnNjcmliZWRMaXN0LnNwbGljZSgwLHRoaXMuX3N1YnNjcmliZWRMaXN0Lmxlbmd0aCwuLi5mKSxSLmxlbmd0aD97Y29kZTpULlNVQ0NFU1MsZmFpbGVkTGlzdDpSfTp7Y29kZTpULlNVQ0NFU1N9fSkpfV9kaWZmQ0ROVXJpcyhlKXtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2lmKHRoaXMuX0NETlVyaXMudXJsJiYhZS51cmwpcmV0dXJuIHRoaXMuX2NhbGxBcHBMaXN0ZW5lcihcIm9uQ0ROSW5mb0Rpc2FibGVcIiksdm9pZCh0aGlzLl9DRE5VcmlzPWUpOyghdGhpcy5fQ0ROVXJpc3x8IXRoaXMuX0NETlVyaXMudXJsJiZlLnVybCkmJnRoaXMuX2NhbGxBcHBMaXN0ZW5lcihcIm9uQ0ROSW5mb0VuYWJsZVwiLHtyZXNvbHV0aW9uOmBXJHtlLnd9X0gke2UuaH1gLGZwczpgRlBTXyR7ZS5mcHN9YH0pO2NvbnN0IHQ9dGhpcy5fQ0ROVXJpcy53JiZlLncmJnRoaXMuX0NETlVyaXMudyE9PWUudyxyPXRoaXMuX0NETlVyaXMuaCYmZS5oJiZ0aGlzLl9DRE5VcmlzLmghPT1lLmgsaT10aGlzLl9DRE5VcmlzLmZwcyYmZS5mcHMmJnRoaXMuX0NETlVyaXMuZnBzIT09ZS5mcHM7KHR8fHJ8fGkpJiZ0aGlzLl9jYWxsQXBwTGlzdGVuZXIoXCJvbkNETkluZm9DaGFuZ2VcIix7cmVzb2x1dGlvbjpgVyR7ZS53fV9IJHtlLmh9YCxmcHM6YEZQU18ke2UuZnBzfWB9KSx0aGlzLl9DRE5VcmlzPWV9KSl9X2dldENETlBsYXlVcmwoZSl7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdHt3OnQsaDpyLGZwczppfT1lLG49dGhpcy5faW5pdE9wdGlvbnMucHVsbElubmVyQ0ROUHJvdG9jb2x8fGdyLkZMVixzPXRoaXMuX2luaXRPcHRpb25zLnB1bGxJbm5lckNETlVzZUh0dHBzPT09U3IuTk9UX0hUVFBTP1NyLk5PVF9IVFRQUzpTci5IVFRQUztpZighdGhpcy5fQ0ROVXJpcy51cmwpcmV0dXJuIEMuZXJyb3IoYGNkbl91cmlzIHVybCBpcyBlbXB0eSwgdGhlIGFuY2hvciBuZWVkIHRvIG9wZW4gb3IgcHVzaCBDRE4sIGNvZGU6ICR7VC5DRE5fUkVTT1VSQ0VfSVNfRU1QVFl9YCkse2NvZGU6VC5DRE5fUkVTT1VSQ0VfSVNfRU1QVFl9O2NvbnN0IG89e1wiQXBwLUtleVwiOnRoaXMuX2NvbnRleHQuZ2V0QXBwa2V5KCksVG9rZW46dGhpcy5fam9pblJlc0RhdGEudG9rZW4sUm9vbUlkOnRoaXMuZ2V0Um9vbUlkKCksVXNlcklkOnRoaXMuX2NvbnRleHQuZ2V0Q3VycmVudElkKCksU2Vzc2lvbklkOnRoaXMuZ2V0U2Vzc2lvbklkKCl9LGE9W107dCYmYS5wdXNoKGB3PSR7dH1gKSxyJiZhLnB1c2goYGg9JHtyfWApLGkmJmEucHVzaChgZnBzPSR7aX1gKSxhLnB1c2goYGtpbmQ9JHtufWApLGEucHVzaChgaXNfaHR0cHM9JHtzfWApO2NvbnN0IGM9YS5qb2luKFwiJlwiKTtsZXQgZD1gJHt0aGlzLl9DRE5VcmlzLnVybH0/YDtjJiYoZCs9Yyk7Y29uc3R7Y29kZTp1LHJlczpsfT15aWVsZCB0aGlzLl9zZXJ2aWNlLmdldENETlJlc291cmNlSW5mbyhvLGQpO3JldHVybiB1IT09VC5TVUNDRVNTPyhDLmVycm9yKGBnZXRDRE5QbGF5VXJsIGZhaWxlZDogJHt1fWApLHtjb2RlOnV9KTooQy5pbmZvKGBnZXRDRE5QbGF5VXJsIHN1Y2Nlc3M6ICR7bnVsbD09bD92b2lkIDA6bC5kYXRhLnB1bGxfdXJsfWApLHtjb2RlOnUsQ0ROUGxheVVybDpudWxsPT1sP3ZvaWQgMDpsLmRhdGEucHVsbF91cmx9KX0pKX1nZXRDRE5QbGF5VXJsKGUsdCl7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtpZihlJiYhVHQoZSkpcmV0dXJuIEMuZXJyb3IoXCJgcmVzb2x1dGlvbmAgaXMgaW52YWxpZFwiKSx7Y29kZTpULlBBUkFNU19FUlJPUn07aWYodCYmIUl0KHQpKXJldHVybiBDLmVycm9yKFwiYGZwc2AgaXMgaW52YWxpZFwiKSx7Y29kZTpULlBBUkFNU19FUlJPUn07Y29uc3R7d2lkdGg6cixoZWlnaHQ6aX09ZT9DdChlKTp7d2lkdGg6bnVsbCxoZWlnaHQ6bnVsbH0sbj10P0V0KHQpOm51bGwscz17fTtyZXR1cm4gciYmKHMudz1yKSxpJiYocy5oPWkpLG4mJihzLmZwcz1uKSx0aGlzLl9nZXRDRE5QbGF5VXJsKHMpfSkpfXN1YnNjcmliZShlKXtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiBrKCgoKT0+dGhpcy5fc3Vic2NyaWJlSGFuZGxlKGUsITEpKSl9KSl9X191bnN1YnNjcmliZShlKXt2YXIgdDtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2lmKCEoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLnZhbGlkYXRlKShcInRyYWNrc1wiLGUsKCgpPT4oMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmlzQXJyYXkpKGUpJiZlLmxlbmd0aD4wJiZlLmV2ZXJ5KChlPT5lIGluc3RhbmNlb2Ygc3QpKSksITApKXJldHVybiBDLmVycm9yKGB1bnN1YnNjcmliZSBmYWlsZWQsIHRyYWNrcyBpcyBpbnZhbGlkIC0+IHJvb21JZDogJHt0aGlzLl9yb29tSWR9YCkse2NvZGU6VC5QQVJBTVNfRVJST1J9O2NvbnN0IHI9dGhpcy5fc3Vic2NyaWJlZExpc3QubWFwKChlPT5PYmplY3QuYXNzaWduKHt9LGUpKSkuZmlsdGVyKCh0PT4hZS5pbmNsdWRlcyh0LnRyYWNrKSkpO3JldHVybiBudWxsPT09KHQ9dGhpcy5fcG9sYXJpc1JlcG9ydCl8fHZvaWQgMD09PXR8fHQuc2VuZFIyKHp0LlNVQlNDUklCRSxRdC5FTkQsZS5tYXAoKGU9PmUuZ2V0VHJhY2tJZCgpKSkpLHRoaXMuX3VwZGF0ZVN1Ykxpc3RIYW5kbGUociwhMSl9KSl9dW5zdWJzY3JpYmUoZSl7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4gaygoKCk9PnRoaXMuX191bnN1YnNjcmliZShlKSkpfSkpfV9fZGVzdHJveShlKXt2YXIgdDtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3RoaXMuX2Rlc3Ryb3llZHx8KHRoaXMuX2Rlc3Ryb3llZD0hMCxudWxsPT09KHQ9dGhpcy5fYXVkaW9MZXZlbFJlcG9ydCl8fHZvaWQgMD09PXR8fHQuY2xlYXJBdWRpb0xldmVsUmVwb3J0VGltZXIoKSxlJiYoeWllbGQgdGhpcy5fY29udGV4dC5xdWl0TGl2aW5nUm9vbUFzQXVkaWVuY2UodGhpcy5fcm9vbUlkKSkseWllbGQgdGhpcy5fc2VydmljZS5icm9hZGNhc3RFeGl0KHRoaXMuX2dldFJlcUhlYWRlcnMoKSksdGhpcy5fcGMuZGVzdHJveSgpLHRoaXMuX3BvbGFyaXNSZXBvcnQ9bnVsbCx0aGlzLl9jb250ZXh0Lm9ucnRjZGF0YWNoYW5nZT0oKT0+e30pfSkpfWdldFJlbW90ZVRyYWNrKGUpe3JldHVybiB0aGlzLl9yZW1vdGVUcmFja3NbZV19X19nZXRQQygpe3JldHVybiB0aGlzLl9wY31nZXRMb2NhbFRyYWNrKGUpe3JldHVybnt9fV9fb25SZWNvbm5lY3RlZCgpe3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3R7Y29kZTplfT15aWVsZCB0aGlzLl9jb250ZXh0LmpvaW5MaXZpbmdSb29tQXNBdWRpZW5jZSh0aGlzLl9yb29tSWQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5SVENNb2RlLkxJVkUpO2UhPT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTJiZDLmVycm9yKFwiam9pbiBsaXZpbmcgcm9vbSBlcnJvciB3aGVuIG9uIHJlY29ubmVjdGVkXCIpfSkpfXJlZ2lzdGVyUm9vbUV2ZW50TGlzdGVuZXIoZSl7dGhpcy5fYXBwTGlzdGVuZXI9ZX1vbkF1ZGlvTGV2ZWxDaGFuZ2UoZSx0KXt2YXIgcjtudWxsPT09KHI9dGhpcy5fYXVkaW9MZXZlbFJlcG9ydCl8fHZvaWQgMD09PXJ8fHIuY2xlYXJBdWRpb0xldmVsUmVwb3J0VGltZXIoKSx0aGlzLl9hdWRpb0xldmVsUmVwb3J0PW5ldyBlcih0aGlzKSx0aGlzLl9hdWRpb0xldmVsUmVwb3J0Lm9uQXVkaW9MZXZlbENoYW5nZShlLHR8fDFlMyl9cmVnaXN0ZXJSZXBvcnRMaXN0ZW5lcihlKXt2YXIgdDtudWxsPT09KHQ9dGhpcy5fcGMpfHx2b2lkIDA9PT10fHx0LnJlZ2lzdGVyUmVwb3J0TGlzdGVuZXIoZSl9Z2V0Um9vbUlkKCl7cmV0dXJuIHRoaXMuX3Jvb21JZH1nZXRDcnRVc2VySWQoKXtyZXR1cm4gdGhpcy5fY29udGV4dC5nZXRDdXJyZW50SWQoKX1nZXRTZXNzaW9uSWQoKXtyZXR1cm4gdGhpcy5fc2Vzc2lvbklkfWdldFJlbW90ZVVzZXJJZHMoKXtyZXR1cm4gdGhpcy5fcm9vbUFuY2hvckxpc3R9Z2V0UmVtb3RlVHJhY2tzQnlVc2VySWQoZSl7Y29uc3QgdD1bXTtmb3IoY29uc3QgciBpbiB0aGlzLl9yZW1vdGVUcmFja3Mpe2NvbnN0IGk9dGhpcy5fcmVtb3RlVHJhY2tzW3JdO2kuZ2V0VXNlcklkKCk9PT1lJiZ0LnB1c2goaSl9cmV0dXJuIHR9Z2V0UmVtb3RlVHJhY2tzKCl7Y29uc3QgZT1bXSx0PVtdO2Zvcihjb25zdCBlIGluIHRoaXMuX3JlbW90ZVRyYWNrcyl7aWYoMj09PXQubGVuZ3RoKWJyZWFrO2NvbnN0IHI9dGhpcy5fcmVtb3RlVHJhY2tzW2VdO3IuaXNNQ1VUcmFjaygpJiZ0LnB1c2gocil9cmV0dXJuIHRoaXMuX3Jvb21BbmNob3JMaXN0LmZvckVhY2goKHQ9PntlLnB1c2goLi4udGhpcy5nZXRSZW1vdGVUcmFja3NCeVVzZXJJZCh0KSl9KSksWy4uLnQsLi4uZV19Z2V0UmVtb3RlUlRDVHJhY2tzKCl7Y29uc3QgZT1bXTtmb3IoY29uc3QgdCBpbiB0aGlzLl9yZW1vdGVUcmFja3Mpe2NvbnN0IHI9dGhpcy5fcmVtb3RlVHJhY2tzW3RdO3IuaXNNQ1VUcmFjaygpfHxlLnB1c2gocil9cmV0dXJuIGV9Z2V0UmVtb3RlTUNVVHJhY2tzKCl7Y29uc3QgZT1bXTtmb3IoY29uc3QgdCBpbiB0aGlzLl9yZW1vdGVUcmFja3Mpe2NvbnN0IHI9dGhpcy5fcmVtb3RlVHJhY2tzW3RdO3IuaXNNQ1VUcmFjaygpJiZlLnB1c2gocil9cmV0dXJuIGV9Z2V0Q0ROSW5mbygpe3JldHVybiB0aGlzLl9DRE5VcmlzLnc/e3Jlc29sdXRpb246YFcke3RoaXMuX0NETlVyaXMud31fSCR7dGhpcy5fQ0ROVXJpcy5ofWAsZnBzOmBGUFNfJHt0aGlzLl9DRE5VcmlzLmZwc31gLENETkVuYWJsZTp0aGlzLl9DRE5VcmlzLmVuYWJsZUlubmVyQ0ROfTp7Q0RORW5hYmxlOiExfX19Y29uc3QgSXI9KGUsdCk9Pntjb25zdCByPVtdO3JldHVybiByWzBdPShudWxsPT10P3ZvaWQgMDp0LndpdGhvdXRBdWRpbyk/dm9pZCAwOmUuZ2V0QXVkaW9UcmFja3MoKVswXSxyWzFdPShudWxsPT10P3ZvaWQgMDp0LndpdGhvdXRWaWRlbyk/dm9pZCAwOmUuZ2V0VmlkZW9UcmFja3MoKVswXSxyfTtjbGFzcyBFcntjb25zdHJ1Y3RvcihlLHQscil7dGhpcy5fY29udGV4dD1lLHRoaXMuX3J1bnRpbWU9dCx0aGlzLl9vcHRpb25zPXIsdGhpcy5fY3J0Um9vbT1udWxsLHRoaXMuX2F1ZGllbmNlPW51bGwsdGhpcy5fY3J0QXVkaWVuY2VMaXZpbmdSb29tPW51bGwsS3Quc2V0U2RwU2VtYW50aWNzKHIuc2RwU2VtYW50aWNzfHxcInBsYW4tYlwiKSx0aGlzLl9zZXJ2aWNlPW5ldyB2cih0aGlzLl9ydW50aW1lLHRoaXMuX2NvbnRleHQsdGhpcy5fb3B0aW9ucy5tZWRpYVNlcnZlcix0aGlzLl9vcHRpb25zLnRpbWVvdXQpLHRoaXMuX2NvbnRleHQub25jb25uZWN0aW9uc3RhdGVjaGFuZ2U9dGhpcy5fb25JTVN0YXR1c0NoYW5nZS5iaW5kKHRoaXMpLHRoaXMuX2NvbnRleHQub25kaXNjb25uZWN0PXRoaXMuX29uSU1EaXNjb25uZWN0LmJpbmQodGhpcyksdGhpcy5fY29udGV4dC5vbmRlc3Ryb3k9dGhpcy5fb25JTVVuaW5pdC5iaW5kKHRoaXMpLHRoaXMuX2NvbnRleHQub25tZXNzYWdlPXRoaXMuX2hhbmRsZU1lc3NhZ2UuYmluZCh0aGlzKX1faGFuZGxlTWVzc2FnZShlKXt2YXIgdDtpZihlLmNvbnZlcnNhdGlvblR5cGUhPT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkNvbnZlcnNhdGlvblR5cGUuUlRDX1JPT00pcmV0dXJuITE7aWYodGhpcy5fY3J0Um9vbSBpbnN0YW5jZW9mIF9yKXt0aGlzLl9nZXRKb2luZWRQS1Jvb21MaXN0KCkuZm9yRWFjaCgodD0+e3QuX19wYXJzZUlubmVyTWVzc2FnZShlKX0pKX1yZXR1cm4gbnVsbD09PSh0PXRoaXMuX2NydFJvb20pfHx2b2lkIDA9PT10fHx0Ll9fcGFyc2VJbm5lck1lc3NhZ2UoZSksITB9X2dldEpvaW5lZFBLUm9vbUxpc3QoKXtjb25zdHtjb2RlOmUscm9vbVBLSGFuZGxlcjp0fT10aGlzLl9jcnRSb29tLmdldFJvb21QS0hhbmRsZXIoKTtpZihlPT09VC5TVUNDRVNTJiZ0KXtjb25zdCBlPXQuZ2V0Sm9pbmVkUEtSb29tcygpfHx7fTtyZXR1cm4gT2JqZWN0LnZhbHVlcyhlKX1yZXR1cm5bXX1nZXRDdXJyZW50SWQoKXtyZXR1cm4gdGhpcy5fY29udGV4dC5nZXRDdXJyZW50SWQoKX1qb2luUlRDUm9vbShlLHQpe3JldHVybiBrKCgoKT0+dGhpcy5fam9pblJUQ1Jvb20oZSx0KSkpfV9qb2luUlRDUm9vbShlLHQpe3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7aWYoT3QodGhpcy5fY29udGV4dC5nZXROYXZpSW5mbygpKSlyZXR1cm57Y29kZTpULlBBQ0tBR0VfRU5WSVJPTk1FTlRfRVJST1J9O2lmKCEoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLnZhbGlkYXRlKShcInJvb21JZFwiLGUsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5ub3RFbXB0eVN0cmluZywhMCkpcmV0dXJue2NvZGU6VC5QQVJBTVNfRVJST1J9O2lmKHRoaXMuX2NydFJvb20pcmV0dXJue2NvZGU6VC5SRVBFUlRfSk9JTl9ST09NfTtpZih0aGlzLl9jb250ZXh0LmdldENvbm5lY3Rpb25TdGF0dXMoKSE9PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQ29ubmVjdGlvblN0YXR1cy5DT05ORUNURUQpcmV0dXJue2NvZGU6VC5TSUdOQUxfRElTQ09OTkVDVEVEfTtpZighdGhpcy5fc2VydmljZS5nZXROYXZpTVMoKS5sZW5ndGgpcmV0dXJue2NvZGU6VC5OT1RfT1BFTl9WSURFT19BVURJT19TRVJWRVJ9O0MuZGVidWcoYGpvaW5Sb29tIC0+IHJvb21JZDogJHtlfTsgam9pblR5cGU6ICR7dHx8X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5SVENKb2luVHlwZS5LSUNLfWApO2NvbnN0e2NvZGU6cixkYXRhOnN9PXlpZWxkIHRoaXMuX2NvbnRleHQuam9pblJUQ1Jvb20oZSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLlJUQ01vZGUuUlRDLHZvaWQgMCx0KTtpZihyIT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUyl7Qy5lcnJvcihgam9pblJvb20gZmFpbGVkIC0+IGNvZGU6ICR7cn1gKTtyZXR1cm57Y29kZTpyPT09SS5KT0lOX1JFRlVTRUQ/VC5TSUdOQUxfSk9JTl9SVENfUk9PTV9SRUZVU0VEOnJ9fUMuZGVidWcoYGpvaW5Sb29tIHN1Y2Nlc3MgLT4gdXNlcklkOiAke3RoaXMuX2NvbnRleHQuZ2V0Q3VycmVudElkKCl9LCByb29tSWQ6ICR7ZX0sIGRhdGE6ICR7SlNPTi5zdHJpbmdpZnkocyl9YCk7Y29uc3Qgbz1uZXcgbXIodGhpcy5fY29udGV4dCx0aGlzLl9ydW50aW1lLGUscyx0aGlzLl9zZXJ2aWNlLHRoaXMuX29wdGlvbnMsdGhpcy5fcmVsZWFzZUNydFJvb21PYmouYmluZCh0aGlzKSk7cmV0dXJuIHRoaXMuX2NydFJvb209byx7cm9vbTpvLGNvZGU6VC5TVUNDRVNTLHVzZXJJZHM6by5nZXRSZW1vdGVVc2VySWRzKCksdHJhY2tzOm8uZ2V0UmVtb3RlVHJhY2tzKCl9fSkpfWpvaW5MaXZpbmdSb29tKGUsdCl7cmV0dXJuIGsoKCgpPT50aGlzLl9qb2luTGl2aW5nUm9vbShlLHQpKSl9X2pvaW5MaXZpbmdSb29tKGUsdCl7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtpZihPdCh0aGlzLl9jb250ZXh0LmdldE5hdmlJbmZvKCkpKXJldHVybntjb2RlOlQuUEFDS0FHRV9FTlZJUk9OTUVOVF9FUlJPUn07aWYoISgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18udmFsaWRhdGUpKFwicm9vbUlkXCIsZSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLm5vdEVtcHR5U3RyaW5nLCEwKXx8ISgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18udmFsaWRhdGUpKFwibGl2aW5nVHlwZVwiLHQsKGU9PmU9PT1sci5BVURJT3x8ZT09PWxyLlZJREVPKSkpcmV0dXJue2NvZGU6VC5QQVJBTVNfRVJST1J9O2lmKHRoaXMuX2NydFJvb20pcmV0dXJue2NvZGU6VC5SRVBFUlRfSk9JTl9ST09NfTtpZih0aGlzLl9jb250ZXh0LmdldENvbm5lY3Rpb25TdGF0dXMoKSE9PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQ29ubmVjdGlvblN0YXR1cy5DT05ORUNURUQpcmV0dXJue2NvZGU6VC5TSUdOQUxfRElTQ09OTkVDVEVEfTtpZighdGhpcy5fc2VydmljZS5nZXROYXZpTVMoKS5sZW5ndGgpcmV0dXJue2NvZGU6VC5OT1RfT1BFTl9WSURFT19BVURJT19TRVJWRVJ9O0MuZGVidWcoYGpvaW5Sb29tLCByb29tSWQ6ICR7ZX1gKTtjb25zdHtjb2RlOnIsZGF0YTpzfT15aWVsZCB0aGlzLl9jb250ZXh0LmpvaW5SVENSb29tKGUsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5SVENNb2RlLkxJVkUsdCk7aWYociE9PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1MpcmV0dXJuIEMuZXJyb3IoYGpvaW5Sb29tIGZhaWxlZCAtPiBjb2RlOiAke3J9YCkse2NvZGU6cn07Qy5kZWJ1ZyhgSm9pblJvb20gc3VjY2VzcyAtPiB1c2VySWQ6ICR7dGhpcy5fY29udGV4dC5nZXRDdXJyZW50SWQoKX0sIHJvb21JZDogJHtlfSwgZGF0YTogJHtKU09OLnN0cmluZ2lmeShzKX1gKTtjb25zdCBvPW5ldyBfcih0aGlzLl9jb250ZXh0LHRoaXMuX3J1bnRpbWUsZSxzLHRoaXMuX3NlcnZpY2UsdGhpcy5fb3B0aW9ucyx0aGlzLl9yZWxlYXNlQ3J0Um9vbU9iai5iaW5kKHRoaXMpLHQsITEsITApO3RoaXMuX2NydFJvb209bztjb25zdCBhPXtyb29tOm8sY29kZTpULlNVQ0NFU1MsdXNlcklkczpvLmdldFJlbW90ZVVzZXJJZHMoKSx0cmFja3M6by5nZXRSZW1vdGVUcmFja3MoKX07cmV0dXJuIG8uX19nZXRDRE5QdXNoTW9kZSgpPT09dXIuTUFOVUFMJiZPYmplY3QuYXNzaWduKGEse0NETkVuYWJsZTpvLl9fZ2V0Q0RORW5hYmxlKCl9KSxhfSkpfWdldEF1ZGllbmNlQ2xpZW50KCl7cmV0dXJuIHRoaXMuX2F1ZGllbmNlfHwodGhpcy5fYXVkaWVuY2U9bmV3IFJyKHRoaXMuX2NvbnRleHQsdGhpcy5fcnVudGltZSx0aGlzLl9vcHRpb25zKSksdGhpcy5fYXVkaWVuY2V9X29uSU1TdGF0dXNDaGFuZ2UoZSl7aWYoQy5kZWJ1Zyhgc2lnbmFsIHNlcnZlciBjb25uZWN0aW9uIHN0YXRlIGNoYW5nZTogJHtlfWApLGU9PT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkNvbm5lY3Rpb25TdGF0dXMuQ09OTkVDVEVEKXtpZih0aGlzLl9jcnRSb29tIGluc3RhbmNlb2YgX3Ipe3RoaXMuX2dldEpvaW5lZFBLUm9vbUxpc3QoKS5mb3JFYWNoKChlPT57ZS5fX29uUmVjb25uZWN0ZWQoKX0pKX10aGlzLl9jcnRSb29tJiZ0aGlzLl9jcnRSb29tLl9fb25SZWNvbm5lY3RlZCgpfX1fb25JTURpc2Nvbm5lY3QoKXtDLmRlYnVnKFwiVE9ETyAtPiBvbiBJTSBkaXNjb25uZWN0XCIpfV9vbklNVW5pbml0KCl7Qy5kZWJ1ZyhcIlRPRE8gLT4gb24gSU0gY2xpZW50IG9uZGVzdHJveVwiKX1sZWF2ZVJvb20oZSl7cmV0dXJuIGsoKCgpPT50aGlzLl9sZWF2ZVJvb20oZSkpKX1fbGVhdmVSb29tKGUpe3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMuX2NydFJvb20/KHlpZWxkIHRoaXMuX2NydFJvb20uX19kZXN0cm95KCEwKSxDLmRlYnVnKGBxdWl0UlRDUm9vbSAtPiB1c2VySWQ6ICR7dGhpcy5fY29udGV4dC5nZXRDdXJyZW50SWQoKX0gLCByb29tSWQ6ICR7dGhpcy5fY3J0Um9vbS5nZXRSb29tSWQoKX1gKSx0aGlzLl9jcnRSb29tPW51bGwse2NvZGU6VC5TVUNDRVNTfSk6e2NvZGU6VC5TVUNDRVNTfX0pKX1fcmVsZWFzZUNydFJvb21PYmooKXt0aGlzLl9jcnRSb29tPW51bGx9X2dldE1lZGlhU3RyZWFtKGUsdD1cImdldFVzZXJNZWRpYVwiKXtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3RyeXtjb25zdCByPXlpZWxkIG5hdmlnYXRvci5tZWRpYURldmljZXNbdF0oZSk7cmV0dXJue2NvZGU6VC5TVUNDRVNTLHN0cmVhbTpyfX1jYXRjaChlKXtpZihcIlBlcm1pc3Npb24gZGVuaWVkXCI9PT1lLm1lc3NhZ2UpcmV0dXJue2NvZGU6VC5QRVJNSVNTSU9OX0RFTklFRH07Qy5lcnJvcihgZ2V0IHVzZXIgbWVkaWEgZmFpbGVkIC0+ICR7ZS5tZXNzYWdlfWApfXJldHVybntjb2RlOlwiZ2V0VXNlck1lZGlhXCI9PT10P1QuR0VUX1VTRVJfTUVESUFfRkFJTEVEOlQuR0VUX0RJU1BMQVlfTUVESUFfRkFJTEVEfX0pKX1jcmVhdGVNaWNyb3Bob25lQXVkaW9UcmFjayhlPVwiUm9uZ0Nsb3VkUlRDXCIsdCl7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtpZighdXQoZSkpcmV0dXJue2NvZGU6VC5JTlZBTElEX1RBR1N9O2NvbnN0IHI9dGhpcy5fY29udGV4dC5nZXRDdXJyZW50SWQoKTtpZighcilyZXR1cm57Y29kZTpULklOVkFMSURfVVNFUl9JRH07Y29uc3R7c3RyZWFtOmksY29kZTpufT15aWVsZCB0aGlzLl9nZXRNZWRpYVN0cmVhbSh7YXVkaW86e2RldmljZUlkOm51bGw9PXQ/dm9pZCAwOnQubWljcGhvbmVJZCxzYW1wbGVSYXRlOm51bGw9PXQ/dm9pZCAwOnQuc2FtcGxlUmF0ZX19KTtpZihuIT09VC5TVUNDRVNTKXJldHVybntjb2RlOm59O2NvbnN0IHM9aS5nZXRBdWRpb1RyYWNrcygpWzBdO3JldHVybntjb2RlOm4sdHJhY2s6bmV3IHJ0KGUscixzKX19KSl9Y3JlYXRlQ2FtZXJhVmlkZW9UcmFjayhlPVwiUm9uZ0Nsb3VkUlRDXCIsdCl7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtpZighdXQoZSkpcmV0dXJue2NvZGU6VC5JTlZBTElEX1RBR1N9O2NvbnN0IHI9dGhpcy5fY29udGV4dC5nZXRDdXJyZW50SWQoKTtpZighcilyZXR1cm57Y29kZTpULklOVkFMSURfVVNFUl9JRH07Y29uc3QgaT1UdChudWxsPT10P3ZvaWQgMDp0LnJlc29sdXRpb24pP3QucmVzb2x1dGlvbjpIZS5XNjQwX0g0ODAse3dpZHRoOm4saGVpZ2h0OnN9PUN0KGkpLHtzdHJlYW06byxjb2RlOmF9PXlpZWxkIHRoaXMuX2dldE1lZGlhU3RyZWFtKHt2aWRlbzp7ZGV2aWNlSWQ6bnVsbD09dD92b2lkIDA6dC5jYW1lcmFJZCxmcmFtZVJhdGU6RXQoKG51bGw9PXQ/dm9pZCAwOnQuZnJhbWVSYXRlKXx8QmUuRlBTXzE1KSx3aWR0aDpuLGhlaWdodDpzLGZhY2luZ01vZGU6bnVsbD09dD92b2lkIDA6dC5mYWNlTW9kZX19KTtpZihhIT09VC5TVUNDRVNTKXJldHVybntjb2RlOmF9O2NvbnN0IGM9by5nZXRWaWRlb1RyYWNrcygpWzBdO3JldHVybntjb2RlOmEsdHJhY2s6bmV3IGl0KGUscixjKX19KSl9Y3JlYXRlTWljcm9waG9uZUFuZENhbWVyYVRyYWNrcyhlPVwiUm9uZ0Nsb3VkUlRDXCIsdCl7dmFyIHIsaSxuLHMsbyxhO3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3QgYz1bXTtpZighdXQoZSkpcmV0dXJue2NvZGU6VC5JTlZBTElEX1RBR1MsdHJhY2tzOmN9O2NvbnN0IGQ9dGhpcy5fY29udGV4dC5nZXRDdXJyZW50SWQoKTtpZighZClyZXR1cm57Y29kZTpULklOVkFMSURfVVNFUl9JRCx0cmFja3M6Y307Y29uc3QgdT1UdChudWxsPT09KHI9bnVsbD09dD92b2lkIDA6dC52aWRlbyl8fHZvaWQgMD09PXI/dm9pZCAwOnIucmVzb2x1dGlvbik/dC52aWRlby5yZXNvbHV0aW9uOkhlLlc2NDBfSDQ4MCx7d2lkdGg6bCxoZWlnaHQ6aH09Q3QodSkse3N0cmVhbTpwLGNvZGU6X309eWllbGQgdGhpcy5fZ2V0TWVkaWFTdHJlYW0oe3ZpZGVvOntkZXZpY2VJZDpudWxsPT09KGk9bnVsbD09dD92b2lkIDA6dC52aWRlbyl8fHZvaWQgMD09PWk/dm9pZCAwOmkuY2FtZXJhSWQsZnJhbWVSYXRlOkV0KChudWxsPT09KG49bnVsbD09dD92b2lkIDA6dC52aWRlbyl8fHZvaWQgMD09PW4/dm9pZCAwOm4uZnJhbWVSYXRlKXx8QmUuRlBTXzE1KSx3aWR0aDpsLGhlaWdodDpoLGZhY2luZ01vZGU6bnVsbD09PShzPW51bGw9PXQ/dm9pZCAwOnQudmlkZW8pfHx2b2lkIDA9PT1zP3ZvaWQgMDpzLmZhY2VNb2RlfSxhdWRpbzp7ZGV2aWNlSWQ6bnVsbD09PShvPW51bGw9PXQ/dm9pZCAwOnQuYXVkaW8pfHx2b2lkIDA9PT1vP3ZvaWQgMDpvLm1pY3Bob25lSWQsc2FtcGxlUmF0ZTpudWxsPT09KGE9bnVsbD09dD92b2lkIDA6dC5hdWRpbyl8fHZvaWQgMD09PWE/dm9pZCAwOmEuc2FtcGxlUmF0ZX19KTtyZXR1cm4gXyE9PVQuU1VDQ0VTU3x8cC5nZXRUcmFja3MoKS5mb3JFYWNoKCh0PT57XCJ2aWRlb1wiPT09dC5raW5kP2MucHVzaChuZXcgaXQoZSxkLHQpKTpjLnVuc2hpZnQobmV3IHJ0KGUsZCx0KSl9KSkse2NvZGU6Xyx0cmFja3M6Y319KSl9Y3JlYXRlU2NyZWVuVmlkZW9UcmFjayhlPVwic2NyZWVuc2hhcmVcIix0KXtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2lmKCF1dChlKSlyZXR1cm57Y29kZTpULklOVkFMSURfVEFHU307Y29uc3Qgcj10aGlzLl9jb250ZXh0LmdldEN1cnJlbnRJZCgpO2lmKCFyKXJldHVybntjb2RlOlQuSU5WQUxJRF9VU0VSX0lEfTtpZighYnQoKSlyZXR1cm57Y29kZTpULkJST1dTRVJfTk9UX1NVUFBPUlR9O2NvbnN0IGk9L0VsZWN0cm9uLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO2lmKGkmJiEobnVsbD09dD92b2lkIDA6dC5jaHJvbWVNZWRpYVNvdXJjZUlkKSlyZXR1cm57Y29kZTpULlBBUkFNU19FUlJPUn07Y29uc3Qgbj1UdChudWxsPT10P3ZvaWQgMDp0LnJlc29sdXRpb24pP3QucmVzb2x1dGlvbjpIZS5XMTI4MF9INzIwLHt3aWR0aDpzLGhlaWdodDpvfT1DdChuKSxhPWk/e21hbmRhdG9yeTp7Y2hyb21lTWVkaWFTb3VyY2VJZDp0LmNocm9tZU1lZGlhU291cmNlSWQsY2hyb21lTWVkaWFTb3VyY2U6XCJkZXNrdG9wXCIsbWluV2lkdGg6cyxtYXhXaWR0aDpzLG1pbkhlaWdodDpvLG1heEhlaWdodDpvfX06e2ZyYW1lUmF0ZTpFdCgobnVsbD09dD92b2lkIDA6dC5mcmFtZVJhdGUpfHxCZS5GUFNfMTUpLHdpZHRoOnMsaGVpZ2h0Om99LHtzdHJlYW06Yyxjb2RlOmR9PXlpZWxkIHRoaXMuX2dldE1lZGlhU3RyZWFtKHt2aWRlbzphLGF1ZGlvOiExfSxpP1wiZ2V0VXNlck1lZGlhXCI6XCJnZXREaXNwbGF5TWVkaWFcIik7aWYoZCE9PVQuU1VDQ0VTUylyZXR1cm57Y29kZTpkfTtjb25zdCB1PWMuZ2V0VmlkZW9UcmFja3MoKVswXTtyZXR1cm57Y29kZTpkLHRyYWNrOm5ldyBudChlLHIsdSl9fSkpfWNyZWF0ZUxvY2FsQXVkaW9UcmFjayhlLHQpe3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7aWYoIXV0KGUpKXJldHVybntjb2RlOlQuSU5WQUxJRF9UQUdTfTtpZighdHx8XCJbb2JqZWN0IE1lZGlhU3RyZWFtVHJhY2tdXCIhPT10LnRvU3RyaW5nKCl8fFwiYXVkaW9cIiE9PXQua2luZClyZXR1cm57Y29kZTpULkNSRUFURV9DVVNUT01fVFJBQ0tfRkFJTEVEfTtjb25zdCByPXRoaXMuX2NvbnRleHQuZ2V0Q3VycmVudElkKCk7cmV0dXJuIHI/e2NvZGU6VC5TVUNDRVNTLHRyYWNrOm5ldyBRZShlLHIsdCl9Ontjb2RlOlQuSU5WQUxJRF9VU0VSX0lEfX0pKX1jcmVhdGVMb2NhbFZpZGVvVHJhY2soZSx0KXtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2lmKCF1dChlKSlyZXR1cm57Y29kZTpULklOVkFMSURfVEFHU307aWYoIXR8fFwiW29iamVjdCBNZWRpYVN0cmVhbVRyYWNrXVwiIT09dC50b1N0cmluZygpfHxcInZpZGVvXCIhPT10LmtpbmQpcmV0dXJue2NvZGU6VC5DUkVBVEVfQ1VTVE9NX1RSQUNLX0ZBSUxFRH07Y29uc3Qgcj10aGlzLl9jb250ZXh0LmdldEN1cnJlbnRJZCgpO3JldHVybiByP3tjb2RlOlQuU1VDQ0VTUyx0cmFjazpuZXcgWGUoZSxyLHQpfTp7Y29kZTpULklOVkFMSURfVVNFUl9JRH19KSl9Y3JlYXRlTG9jYWxGaWxlVHJhY2tzKGUsdCxyKXtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2lmKCF1dChlKSlyZXR1cm57Y29kZTpULklOVkFMSURfVEFHUyx0cmFja3M6W119O2lmKCFrdCgpKXJldHVybntjb2RlOlQuQlJPV1NFUl9OT1RfU1VQUE9SVCx0cmFja3M6W119O2NvbnN0IGk9dCBpbnN0YW5jZW9mIEZpbGU/VVJMLmNyZWF0ZU9iamVjdFVSTCh0KTp0O2lmKCEoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmlzSHR0cFVybCkoaSkmJiEvXmJsb2I6Ly50ZXN0KGkpKXJldHVybiBDLndhcm4oYGNyZWF0ZUxvY2FsRmlsZVRyYWNrcyBmYWlsZWQ6IHBhcmFtcyBlcnJvciAtPiB1cmw6ICR7aX1gKSx7Y29kZTpULlBBUkFNU19FUlJPUix0cmFja3M6W119O2NvbnN0IG49dGhpcy5fY29udGV4dC5nZXRDdXJyZW50SWQoKTtyZXR1cm4gbj9uZXcgUHJvbWlzZSgodD0+e2NvbnN0IHM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInZpZGVvXCIpOyhudWxsPT1yP3ZvaWQgMDpyLndpdGhvdXRBdWRpbykmJihzLm11dGVkPSEwKSxzLm9ubG9hZGVkbWV0YWRhdGE9KCk9Pntjb25zdCBvPVtdO2xldCBhO3RyeXtjb25zdCBlPXMubW96Q2FwdHVyZVN0cmVhbT9cIm1vekNhcHR1cmVTdHJlYW1cIjpcImNhcHR1cmVTdHJlYW1cIjthPXNbZV0oKX1jYXRjaChlKXtDLmVycm9yKGBjcmVhdGUgUkNMb2NhbEZpbGVUcmFjayBmYWlsZWQsIGNhcHR1cmVTdGVhbSBlcnJvci4gLT4gdXJsOiAke2l9YCksQy5lcnJvcihlKSx0KHtjb2RlOlQuQ1JFQVRFX0ZJTEVfVFJBQ0tfRkFJTEVELHRyYWNrczpvfSl9Y29uc3RbYyxkXT1JcihhLHIpO2MmJm8ucHVzaChuZXcgdHQoZSxuLGMscykpLGQmJm8ucHVzaChuZXcgZXQoZSxuLGQscykpLDA9PT1vLmxlbmd0aCYmKHMucGF1c2UoKSxzLnNyYz1cIlwiKSxzLm9uZXJyb3I9bnVsbCx0KHtjb2RlOlQuU1VDQ0VTUyx0cmFja3M6b30pfSxzLm9uZXJyb3I9KCk9PntDLmVycm9yKGBjcmVhdGUgUkNMb2NhbEZpbGVUcmFjayBmYWlsZWQgLT4gdXJsOiAke2l9YCksdCh7Y29kZTpULkNSRUFURV9GSUxFX1RSQUNLX0ZBSUxFRCx0cmFja3M6W119KX0scy5zcmM9aSxzLmxvb3A9ITAscy5wbGF5KCl9KSk6e2NvZGU6VC5JTlZBTElEX1VTRVJfSUQsdHJhY2tzOltdfX0pKX1jcmVhdGVMb2NhbFRyYWNrcyhlLHQscil7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCBpPVtdO2lmKCF1dChlKSlyZXR1cm57Y29kZTpULklOVkFMSURfVEFHUyx0cmFja3M6aX07aWYoISh0IGluc3RhbmNlb2YgTWVkaWFTdHJlYW0pKXJldHVybntjb2RlOlQuUEFSQU1TX0VSUk9SLHRyYWNrczppfTtjb25zdCBuPXRoaXMuX2NvbnRleHQuZ2V0Q3VycmVudElkKCk7aWYoIW4pcmV0dXJue2NvZGU6VC5JTlZBTElEX1VTRVJfSUQsdHJhY2tzOml9O2NvbnN0W3Msb109SXIodCxyKTtyZXR1cm4gcyYmaS5wdXNoKG5ldyBRZShlLG4scykpLG8mJmkucHVzaChuZXcgWGUoZSxuLG8pKSx7Y29kZTpULlNVQ0NFU1MsdHJhY2tzOml9fSkpfWpvaW5MaXZpbmdSb29tQXNBdWRpZW5jZShlLHQpe3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7aWYoT3QodGhpcy5fY29udGV4dC5nZXROYXZpSW5mbygpKSlyZXR1cm57Y29kZTpULlBBQ0tBR0VfRU5WSVJPTk1FTlRfRVJST1J9O2lmKCEoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLnZhbGlkYXRlKShcInJvb21JZFwiLGUsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5ub3RFbXB0eVN0cmluZywhMCl8fCEoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLnZhbGlkYXRlKShcImxpdmluZ1R5cGVcIix0LChlPT5lPT09bHIuQVVESU98fGU9PT1sci5WSURFTykpKXJldHVybntjb2RlOlQuUEFSQU1TX0VSUk9SfTtpZih0aGlzLl9jcnRBdWRpZW5jZUxpdmluZ1Jvb20pcmV0dXJue2NvZGU6VC5SRVBFUlRfSk9JTl9ST09NfTtpZighdGhpcy5fc2VydmljZS5nZXROYXZpTVMoKS5sZW5ndGgpcmV0dXJue2NvZGU6VC5OT1RfT1BFTl9WSURFT19BVURJT19TRVJWRVJ9O2NvbnN0e2NvZGU6cixkYXRhOm59PXlpZWxkIHRoaXMuX2NvbnRleHQuam9pbkxpdmluZ1Jvb21Bc0F1ZGllbmNlKGUsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5SVENNb2RlLkxJVkUsdCk7aWYociE9PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1MpcmV0dXJuIEMuZXJyb3IoXCJhdWRpZW5jZUpvaW5MaXZpbmdSb29tRXJyb3I6XCIscikse2NvZGU6VC5TSUdOQUxfQVVESUVOQ0VfSk9JTl9ST09NX0ZBSUxFRH07Qy5pbmZvKGBqb2luTGl2aW5nUm9vbUFzQXVkaWVuY2Ugc3VjY2Vzcywgcm9vbSBkYXRhOiAke0pTT04uc3RyaW5naWZ5KG4pfWApO2NvbnN0IHM9bmV3IFRyKHRoaXMuX2NvbnRleHQsdGhpcy5fcnVudGltZSx0aGlzLl9vcHRpb25zLGUsbix0KTtyZXR1cm4gdGhpcy5fY3J0QXVkaWVuY2VMaXZpbmdSb29tPXMse3Jvb206cyxjb2RlOlQuU1VDQ0VTUyx1c2VySWRzOnMuZ2V0UmVtb3RlVXNlcklkcygpLFJUQ1RyYWNrczpzLmdldFJlbW90ZVJUQ1RyYWNrcygpLE1DVVRyYWNrczpzLmdldFJlbW90ZU1DVVRyYWNrcygpLENETlVyaXM6cy5nZXRDRE5JbmZvKCl9fSkpfWxlYXZlTGl2aW5nUm9vbUFzQXVkaWVuY2UoZSl7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4gdGhpcy5fY3J0QXVkaWVuY2VMaXZpbmdSb29tP3RoaXMuX2NydEF1ZGllbmNlTGl2aW5nUm9vbSE9PWU/e2NvZGU6VC5QQVJBTVNfRVJST1J9Oih5aWVsZCB0aGlzLl9jcnRBdWRpZW5jZUxpdmluZ1Jvb20uX19kZXN0cm95KCEwKSx0aGlzLl9jcnRBdWRpZW5jZUxpdmluZ1Jvb209bnVsbCx7Y29kZTpULlNVQ0NFU1N9KTp7Y29kZTpULlNVQ0NFU1N9fSkpfXVwZ3JhZGVUb0FuY2hvclJvb20oZSl7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtpZighKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy52YWxpZGF0ZSkoXCJyb29tLl9yb29tSWRcIixlLl9yb29tSWQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5ub3RFbXB0eVN0cmluZywhMCkpcmV0dXJue2NvZGU6VC5QQVJBTVNfRVJST1J9O2lmKHRoaXMuX2NydFJvb20pcmV0dXJue2NvZGU6VC5SRVBFUlRfSk9JTl9ST09NfTtjb25zdHtjb2RlOnQsZGF0YTpyfT15aWVsZCB0aGlzLl9jb250ZXh0LnJ0Y0lkZW50aXR5Q2hhbmdlKGUuX3Jvb21JZCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLlJUQ0lkZW50aXR5Q2hhbmdlVHlwZS5WaWV3ZXJUb0FuY2hvcixlLl9saXZpbmdUeXBlKTtpZih0IT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUylyZXR1cm4gQy5lcnJvcihcImNoYW5nZSByb29tIGlkZW50aXR5IGVycm9yXCIsdCkse2NvZGU6VC5TSUdOQUxfUk9PTV9DSEFOR0VfSURFTlRJVFlfRkFJTEVEfTt5aWVsZCB0aGlzLl9jcnRBdWRpZW5jZUxpdmluZ1Jvb20uX19kZXN0cm95KCExKTtjb25zdCBuPW5ldyBfcih0aGlzLl9jb250ZXh0LHRoaXMuX3J1bnRpbWUsZS5fcm9vbUlkLHIsdGhpcy5fc2VydmljZSx0aGlzLl9vcHRpb25zLHRoaXMuX3JlbGVhc2VDcnRSb29tT2JqLmJpbmQodGhpcyksZS5fbGl2aW5nVHlwZSwhMCwhMCk7cmV0dXJuIHRoaXMuX2NydFJvb209bix0aGlzLl9jcnRBdWRpZW5jZUxpdmluZ1Jvb209bnVsbCx7cm9vbTpuLGNvZGU6VC5TVUNDRVNTLHVzZXJJZHM6ZS5nZXRSZW1vdGVVc2VySWRzKCksdHJhY2tzOm4uZ2V0UmVtb3RlVHJhY2tzKCl9fSkpfWRvd25ncmFkZVRvQXVkaWVuY2VSb29tKGUpe3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7aWYoISgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18udmFsaWRhdGUpKFwicm9vbS5fcm9vbUlkXCIsZS5fcm9vbUlkLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18ubm90RW1wdHlTdHJpbmcsITApKXJldHVybntjb2RlOlQuUEFSQU1TX0VSUk9SfTtpZih0aGlzLl9jcnRBdWRpZW5jZUxpdmluZ1Jvb20pcmV0dXJue2NvZGU6VC5SRVBFUlRfSk9JTl9ST09NfTtjb25zdHtjb2RlOnQsZGF0YTpyfT15aWVsZCB0aGlzLl9jb250ZXh0LnJ0Y0lkZW50aXR5Q2hhbmdlKGUuX3Jvb21JZCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLlJUQ0lkZW50aXR5Q2hhbmdlVHlwZS5BbmNob3JUb1ZpZXdlcixlLmdldExpdmluZ1R5cGUoKSk7aWYodCE9PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1MpcmV0dXJuIEMuZXJyb3IoXCJjaGFuZ2Ugcm9vbSBpZGVudGl0eSBlcnJvclwiLHQpLHtjb2RlOlQuU0lHTkFMX1JPT01fQ0hBTkdFX0lERU5USVRZX0ZBSUxFRH07Qy5pbmZvKGBkb3duZ3JhZGVUb0F1ZGllbmNlUm9vbSBzdWNjZXNzLCByb29tIGRhdGE6ICR7SlNPTi5zdHJpbmdpZnkocil9YCk7Y29uc3Qgbj1uZXcgVHIodGhpcy5fY29udGV4dCx0aGlzLl9ydW50aW1lLHRoaXMuX29wdGlvbnMsZS5fcm9vbUlkLHIsZS5nZXRMaXZpbmdUeXBlKCkpO3JldHVybiB0aGlzLl9jcnRBdWRpZW5jZUxpdmluZ1Jvb209bix0aGlzLl9jcnRSb29tLl9fZGVzdHJveSghMSksdGhpcy5fY3J0Um9vbT1udWxsLHtyb29tOm4sY29kZTpULlNVQ0NFU1MsdXNlcklkczpuLmdldFJlbW90ZVVzZXJJZHMoKSxSVENUcmFja3M6bi5nZXRSZW1vdGVSVENUcmFja3MoKSxNQ1VUcmFja3M6bi5nZXRSZW1vdGVNQ1VUcmFja3MoKSxDRE5VcmlzOm4uZ2V0Q0ROSW5mbygpfX0pKX1nZXRKb2luZWRSb29tSW5mbygpe3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3R7Y29kZTplLGRhdGE6dH09eWllbGQgdGhpcy5fY29udGV4dC5nZXRSVENKb2luZWRVc2VySW5mbyh0aGlzLl9jb250ZXh0LmdldEN1cnJlbnRJZCgpKTtyZXR1cm4gZSE9PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1M/KEMuZXJyb3IoXCJnZXRKb2luZWRVc2VySW5mbyBlcnJvclwiLGUpLHtjb2RlOlQuU0lHTkFMX1JPT01fQ0hBTkdFX0lERU5USVRZX0ZBSUxFRH0pOntjb2RlOlQuU1VDQ0VTUyxkYXRhOnR9fSkpfX12YXIgeXI7IWZ1bmN0aW9uKGUpe2VbZS5TRVJWRVJfS0lDSz0xXT1cIlNFUlZFUl9LSUNLXCIsZVtlLk9USEVSX0tJQ0s9Ml09XCJPVEhFUl9LSUNLXCJ9KHlyfHwoeXI9e30pKTtjb25zdCBrcj17dGFnOlwiUkNSVENcIix2ZXJpZnk6ZT0+XCJicm93c2VyXCIhPT1lLnRhZz8oQy5lcnJvcihgUkNSVEMgUGx1Z2luIGlzIG5vdCBzdXBwb3J0IHRoZSBydW50aW1lICcke2UudGFnfSdgKSwhMSk6bHQ/KF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uVmVyc2lvbk1hbmFnZS5hZGQoXCJwbHVnaW4tcnRjXCIsXCI1LjMuMVwiKSwhIV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uVmVyc2lvbk1hbmFnZS52YWxpZEVuZ2luZShcIjUuMS4wXCIpfHwoQy5lcnJvcihgVGhlIGN1cnJlbnQgZW5naW5lIHZlcnNpb24gJyR7X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5WZXJzaW9uTWFuYWdlLmdldEluZm8oKS5lbmdpbmV9JyBlcnJvciwgcGx1Z2luLXJ0YyByZXF1aXJlZCBlbmdpbmUgdmVyc2lvbiBhdCBsZWFzdCAnNS4xLjAnLmApLCExKSk6KEMuZXJyb3IoXCJQbGVhc2UgdXNlIHRoZSBodHRwcyBwcm90b2NvbCBvciB1c2UgYGh0dHA6Ly9sb2NhbGhvc3RgIHRvIG9wZW4gdGhlIHBhZ2UhXCIpLCExKSxzZXR1cDooZSx0LGk9e30pPT4oQy5zZXRMb2dMZXZlbChpLmxvZ0xldmVsKSxDLnNldExvZ1N0ZG91dChpLmxvZ1N0ZG91dCksQy53YXJuKFwiUkNSVEMgVmVyc2lvbjogNS4zLjEsIENvbW1pdDogZTFhZjBmNWNjYjA2YTAwODRjOTRlMTIxOWQ4YWY1NGM5NzkzYzA2YlwiKSxDLndhcm4oYGJyb3dzZXJJbmZvLmJyb3dzZXIgLT4gJHt5dC5icm93c2VyfWApLEMud2FybihgYnJvd3NlckluZm8uc3VwcG9ydHNVbmlmaWVkUGxhbiAtPiAke3l0LnN1cHBvcnRzVW5pZmllZFBsYW59YCksQy53YXJuKGBicm93c2VySW5mby52ZXJzaW9uIC0+ICR7eXQudmVyc2lvbn1gKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJvcHRpb25zLm1lZGlhU2VydmVyXCIsaS5tZWRpYVNlcnZlciwoZT0+ISghKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5pc0h0dHBVcmwpKGUpfHxcImh0dHBzOlwiPT09bG9jYXRpb24ucHJvdG9jb2wmJiEvXmh0dHBzLy50ZXN0KGUpKSkpLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm9wdGlvbnMudGltZW91dFwiLGkudGltZW91dCwoZT0+KDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5pc051bWJlcikoZSkmJmU+PTVlMyYmZTw9M2U0KSksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwib3B0aW9ucy5waW5nR2FwXCIsaS5waW5nR2FwLChlPT4oMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmlzTnVtYmVyKShlKSYmZT49M2UzJiZlPD0xZTQpKSxuZXcgRXIoZSx0LGkpKX0sYnI9e0RFRkFVTFQ6XCJSb25nQ2xvdWRSVENcIn0sUHI9e3RyYW5zUmVzb2x1dGlvbjpDdCx0cmFuc0ZyYW1lUmF0ZTpFdCxwYXJzZVRyYWNrSWQ6ZnQsaWZTdXBwb3J0TG9jYWxGaWxlVHJhY2s6a3QsaWZTdXBwb3J0U2NyZWVuU2hhcmU6YnR9O1xuXG5cbi8vIyBzb3VyY2VVUkw9d2VicGFjazovL0Byb25nY2xvdWQvcmNsaXZlcm9vbWxpYi8uL25vZGVfbW9kdWxlcy9Acm9uZ2Nsb3VkL3BsdWdpbi1ydGMvZGlzdC9pbmRleC5lc20uanM/Iik7LyoqKi99LC8qKiovIi4vbm9kZV9tb2R1bGVzL2V2ZW50cy9ldmVudHMuanMiOi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXAogICEqKiogLi9ub2RlX21vZHVsZXMvZXZlbnRzL2V2ZW50cy5qcyAqKiohCiAgXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8gLyoqKi9mdW5jdGlvbiBub2RlX21vZHVsZXNFdmVudHNFdmVudHNKcyhtb2R1bGUpe2V2YWwoIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG5cblxudmFyIFIgPSB0eXBlb2YgUmVmbGVjdCA9PT0gJ29iamVjdCcgPyBSZWZsZWN0IDogbnVsbFxudmFyIFJlZmxlY3RBcHBseSA9IFIgJiYgdHlwZW9mIFIuYXBwbHkgPT09ICdmdW5jdGlvbidcbiAgPyBSLmFwcGx5XG4gIDogZnVuY3Rpb24gUmVmbGVjdEFwcGx5KHRhcmdldCwgcmVjZWl2ZXIsIGFyZ3MpIHtcbiAgICByZXR1cm4gRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5LmNhbGwodGFyZ2V0LCByZWNlaXZlciwgYXJncyk7XG4gIH1cblxudmFyIFJlZmxlY3RPd25LZXlzXG5pZiAoUiAmJiB0eXBlb2YgUi5vd25LZXlzID09PSAnZnVuY3Rpb24nKSB7XG4gIFJlZmxlY3RPd25LZXlzID0gUi5vd25LZXlzXG59IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHtcbiAgUmVmbGVjdE93bktleXMgPSBmdW5jdGlvbiBSZWZsZWN0T3duS2V5cyh0YXJnZXQpIHtcbiAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGFyZ2V0KVxuICAgICAgLmNvbmNhdChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHRhcmdldCkpO1xuICB9O1xufSBlbHNlIHtcbiAgUmVmbGVjdE93bktleXMgPSBmdW5jdGlvbiBSZWZsZWN0T3duS2V5cyh0YXJnZXQpIHtcbiAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGFyZ2V0KTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gUHJvY2Vzc0VtaXRXYXJuaW5nKHdhcm5pbmcpIHtcbiAgaWYgKGNvbnNvbGUgJiYgY29uc29sZS53YXJuKSBjb25zb2xlLndhcm4od2FybmluZyk7XG59XG5cbnZhciBOdW1iZXJJc05hTiA9IE51bWJlci5pc05hTiB8fCBmdW5jdGlvbiBOdW1iZXJJc05hTih2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgIT09IHZhbHVlO1xufVxuXG5mdW5jdGlvbiBFdmVudEVtaXR0ZXIoKSB7XG4gIEV2ZW50RW1pdHRlci5pbml0LmNhbGwodGhpcyk7XG59XG5tb2R1bGUuZXhwb3J0cyA9IEV2ZW50RW1pdHRlcjtcbm1vZHVsZS5leHBvcnRzLm9uY2UgPSBvbmNlO1xuXG4vLyBCYWNrd2FyZHMtY29tcGF0IHdpdGggbm9kZSAwLjEwLnhcbkV2ZW50RW1pdHRlci5FdmVudEVtaXR0ZXIgPSBFdmVudEVtaXR0ZXI7XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX2V2ZW50cyA9IHVuZGVmaW5lZDtcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX2V2ZW50c0NvdW50ID0gMDtcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX21heExpc3RlbmVycyA9IHVuZGVmaW5lZDtcblxuLy8gQnkgZGVmYXVsdCBFdmVudEVtaXR0ZXJzIHdpbGwgcHJpbnQgYSB3YXJuaW5nIGlmIG1vcmUgdGhhbiAxMCBsaXN0ZW5lcnMgYXJlXG4vLyBhZGRlZCB0byBpdC4gVGhpcyBpcyBhIHVzZWZ1bCBkZWZhdWx0IHdoaWNoIGhlbHBzIGZpbmRpbmcgbWVtb3J5IGxlYWtzLlxudmFyIGRlZmF1bHRNYXhMaXN0ZW5lcnMgPSAxMDtcblxuZnVuY3Rpb24gY2hlY2tMaXN0ZW5lcihsaXN0ZW5lcikge1xuICBpZiAodHlwZW9mIGxpc3RlbmVyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIFwibGlzdGVuZXJcIiBhcmd1bWVudCBtdXN0IGJlIG9mIHR5cGUgRnVuY3Rpb24uIFJlY2VpdmVkIHR5cGUgJyArIHR5cGVvZiBsaXN0ZW5lcik7XG4gIH1cbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KEV2ZW50RW1pdHRlciwgJ2RlZmF1bHRNYXhMaXN0ZW5lcnMnLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGRlZmF1bHRNYXhMaXN0ZW5lcnM7XG4gIH0sXG4gIHNldDogZnVuY3Rpb24oYXJnKSB7XG4gICAgaWYgKHR5cGVvZiBhcmcgIT09ICdudW1iZXInIHx8IGFyZyA8IDAgfHwgTnVtYmVySXNOYU4oYXJnKSkge1xuICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RoZSB2YWx1ZSBvZiBcImRlZmF1bHRNYXhMaXN0ZW5lcnNcIiBpcyBvdXQgb2YgcmFuZ2UuIEl0IG11c3QgYmUgYSBub24tbmVnYXRpdmUgbnVtYmVyLiBSZWNlaXZlZCAnICsgYXJnICsgJy4nKTtcbiAgICB9XG4gICAgZGVmYXVsdE1heExpc3RlbmVycyA9IGFyZztcbiAgfVxufSk7XG5cbkV2ZW50RW1pdHRlci5pbml0ID0gZnVuY3Rpb24oKSB7XG5cbiAgaWYgKHRoaXMuX2V2ZW50cyA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICB0aGlzLl9ldmVudHMgPT09IE9iamVjdC5nZXRQcm90b3R5cGVPZih0aGlzKS5fZXZlbnRzKSB7XG4gICAgdGhpcy5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB0aGlzLl9ldmVudHNDb3VudCA9IDA7XG4gIH1cblxuICB0aGlzLl9tYXhMaXN0ZW5lcnMgPSB0aGlzLl9tYXhMaXN0ZW5lcnMgfHwgdW5kZWZpbmVkO1xufTtcblxuLy8gT2J2aW91c2x5IG5vdCBhbGwgRW1pdHRlcnMgc2hvdWxkIGJlIGxpbWl0ZWQgdG8gMTAuIFRoaXMgZnVuY3Rpb24gYWxsb3dzXG4vLyB0aGF0IHRvIGJlIGluY3JlYXNlZC4gU2V0IHRvIHplcm8gZm9yIHVubGltaXRlZC5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuc2V0TWF4TGlzdGVuZXJzID0gZnVuY3Rpb24gc2V0TWF4TGlzdGVuZXJzKG4pIHtcbiAgaWYgKHR5cGVvZiBuICE9PSAnbnVtYmVyJyB8fCBuIDwgMCB8fCBOdW1iZXJJc05hTihuKSkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdUaGUgdmFsdWUgb2YgXCJuXCIgaXMgb3V0IG9mIHJhbmdlLiBJdCBtdXN0IGJlIGEgbm9uLW5lZ2F0aXZlIG51bWJlci4gUmVjZWl2ZWQgJyArIG4gKyAnLicpO1xuICB9XG4gIHRoaXMuX21heExpc3RlbmVycyA9IG47XG4gIHJldHVybiB0aGlzO1xufTtcblxuZnVuY3Rpb24gX2dldE1heExpc3RlbmVycyh0aGF0KSB7XG4gIGlmICh0aGF0Ll9tYXhMaXN0ZW5lcnMgPT09IHVuZGVmaW5lZClcbiAgICByZXR1cm4gRXZlbnRFbWl0dGVyLmRlZmF1bHRNYXhMaXN0ZW5lcnM7XG4gIHJldHVybiB0aGF0Ll9tYXhMaXN0ZW5lcnM7XG59XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuZ2V0TWF4TGlzdGVuZXJzID0gZnVuY3Rpb24gZ2V0TWF4TGlzdGVuZXJzKCkge1xuICByZXR1cm4gX2dldE1heExpc3RlbmVycyh0aGlzKTtcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uIGVtaXQodHlwZSkge1xuICB2YXIgYXJncyA9IFtdO1xuICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgYXJncy5wdXNoKGFyZ3VtZW50c1tpXSk7XG4gIHZhciBkb0Vycm9yID0gKHR5cGUgPT09ICdlcnJvcicpO1xuXG4gIHZhciBldmVudHMgPSB0aGlzLl9ldmVudHM7XG4gIGlmIChldmVudHMgIT09IHVuZGVmaW5lZClcbiAgICBkb0Vycm9yID0gKGRvRXJyb3IgJiYgZXZlbnRzLmVycm9yID09PSB1bmRlZmluZWQpO1xuICBlbHNlIGlmICghZG9FcnJvcilcbiAgICByZXR1cm4gZmFsc2U7XG5cbiAgLy8gSWYgdGhlcmUgaXMgbm8gJ2Vycm9yJyBldmVudCBsaXN0ZW5lciB0aGVuIHRocm93LlxuICBpZiAoZG9FcnJvcikge1xuICAgIHZhciBlcjtcbiAgICBpZiAoYXJncy5sZW5ndGggPiAwKVxuICAgICAgZXIgPSBhcmdzWzBdO1xuICAgIGlmIChlciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAvLyBOb3RlOiBUaGUgY29tbWVudHMgb24gdGhlIGB0aHJvd2AgbGluZXMgYXJlIGludGVudGlvbmFsLCB0aGV5IHNob3dcbiAgICAgIC8vIHVwIGluIE5vZGUncyBvdXRwdXQgaWYgdGhpcyByZXN1bHRzIGluIGFuIHVuaGFuZGxlZCBleGNlcHRpb24uXG4gICAgICB0aHJvdyBlcjsgLy8gVW5oYW5kbGVkICdlcnJvcicgZXZlbnRcbiAgICB9XG4gICAgLy8gQXQgbGVhc3QgZ2l2ZSBzb21lIGtpbmQgb2YgY29udGV4dCB0byB0aGUgdXNlclxuICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoJ1VuaGFuZGxlZCBlcnJvci4nICsgKGVyID8gJyAoJyArIGVyLm1lc3NhZ2UgKyAnKScgOiAnJykpO1xuICAgIGVyci5jb250ZXh0ID0gZXI7XG4gICAgdGhyb3cgZXJyOyAvLyBVbmhhbmRsZWQgJ2Vycm9yJyBldmVudFxuICB9XG5cbiAgdmFyIGhhbmRsZXIgPSBldmVudHNbdHlwZV07XG5cbiAgaWYgKGhhbmRsZXIgPT09IHVuZGVmaW5lZClcbiAgICByZXR1cm4gZmFsc2U7XG5cbiAgaWYgKHR5cGVvZiBoYW5kbGVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgUmVmbGVjdEFwcGx5KGhhbmRsZXIsIHRoaXMsIGFyZ3MpO1xuICB9IGVsc2Uge1xuICAgIHZhciBsZW4gPSBoYW5kbGVyLmxlbmd0aDtcbiAgICB2YXIgbGlzdGVuZXJzID0gYXJyYXlDbG9uZShoYW5kbGVyLCBsZW4pO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpXG4gICAgICBSZWZsZWN0QXBwbHkobGlzdGVuZXJzW2ldLCB0aGlzLCBhcmdzKTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufTtcblxuZnVuY3Rpb24gX2FkZExpc3RlbmVyKHRhcmdldCwgdHlwZSwgbGlzdGVuZXIsIHByZXBlbmQpIHtcbiAgdmFyIG07XG4gIHZhciBldmVudHM7XG4gIHZhciBleGlzdGluZztcblxuICBjaGVja0xpc3RlbmVyKGxpc3RlbmVyKTtcblxuICBldmVudHMgPSB0YXJnZXQuX2V2ZW50cztcbiAgaWYgKGV2ZW50cyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgZXZlbnRzID0gdGFyZ2V0Ll9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHRhcmdldC5fZXZlbnRzQ291bnQgPSAwO1xuICB9IGVsc2Uge1xuICAgIC8vIFRvIGF2b2lkIHJlY3Vyc2lvbiBpbiB0aGUgY2FzZSB0aGF0IHR5cGUgPT09IFwibmV3TGlzdGVuZXJcIiEgQmVmb3JlXG4gICAgLy8gYWRkaW5nIGl0IHRvIHRoZSBsaXN0ZW5lcnMsIGZpcnN0IGVtaXQgXCJuZXdMaXN0ZW5lclwiLlxuICAgIGlmIChldmVudHMubmV3TGlzdGVuZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGFyZ2V0LmVtaXQoJ25ld0xpc3RlbmVyJywgdHlwZSxcbiAgICAgICAgICAgICAgICAgIGxpc3RlbmVyLmxpc3RlbmVyID8gbGlzdGVuZXIubGlzdGVuZXIgOiBsaXN0ZW5lcik7XG5cbiAgICAgIC8vIFJlLWFzc2lnbiBgZXZlbnRzYCBiZWNhdXNlIGEgbmV3TGlzdGVuZXIgaGFuZGxlciBjb3VsZCBoYXZlIGNhdXNlZCB0aGVcbiAgICAgIC8vIHRoaXMuX2V2ZW50cyB0byBiZSBhc3NpZ25lZCB0byBhIG5ldyBvYmplY3RcbiAgICAgIGV2ZW50cyA9IHRhcmdldC5fZXZlbnRzO1xuICAgIH1cbiAgICBleGlzdGluZyA9IGV2ZW50c1t0eXBlXTtcbiAgfVxuXG4gIGlmIChleGlzdGluZyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgLy8gT3B0aW1pemUgdGhlIGNhc2Ugb2Ygb25lIGxpc3RlbmVyLiBEb24ndCBuZWVkIHRoZSBleHRyYSBhcnJheSBvYmplY3QuXG4gICAgZXhpc3RpbmcgPSBldmVudHNbdHlwZV0gPSBsaXN0ZW5lcjtcbiAgICArK3RhcmdldC5fZXZlbnRzQ291bnQ7XG4gIH0gZWxzZSB7XG4gICAgaWYgKHR5cGVvZiBleGlzdGluZyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgLy8gQWRkaW5nIHRoZSBzZWNvbmQgZWxlbWVudCwgbmVlZCB0byBjaGFuZ2UgdG8gYXJyYXkuXG4gICAgICBleGlzdGluZyA9IGV2ZW50c1t0eXBlXSA9XG4gICAgICAgIHByZXBlbmQgPyBbbGlzdGVuZXIsIGV4aXN0aW5nXSA6IFtleGlzdGluZywgbGlzdGVuZXJdO1xuICAgICAgLy8gSWYgd2UndmUgYWxyZWFkeSBnb3QgYW4gYXJyYXksIGp1c3QgYXBwZW5kLlxuICAgIH0gZWxzZSBpZiAocHJlcGVuZCkge1xuICAgICAgZXhpc3RpbmcudW5zaGlmdChsaXN0ZW5lcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGV4aXN0aW5nLnB1c2gobGlzdGVuZXIpO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGZvciBsaXN0ZW5lciBsZWFrXG4gICAgbSA9IF9nZXRNYXhMaXN0ZW5lcnModGFyZ2V0KTtcbiAgICBpZiAobSA+IDAgJiYgZXhpc3RpbmcubGVuZ3RoID4gbSAmJiAhZXhpc3Rpbmcud2FybmVkKSB7XG4gICAgICBleGlzdGluZy53YXJuZWQgPSB0cnVlO1xuICAgICAgLy8gTm8gZXJyb3IgY29kZSBmb3IgdGhpcyBzaW5jZSBpdCBpcyBhIFdhcm5pbmdcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICAgICAgdmFyIHcgPSBuZXcgRXJyb3IoJ1Bvc3NpYmxlIEV2ZW50RW1pdHRlciBtZW1vcnkgbGVhayBkZXRlY3RlZC4gJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nLmxlbmd0aCArICcgJyArIFN0cmluZyh0eXBlKSArICcgbGlzdGVuZXJzICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAnYWRkZWQuIFVzZSBlbWl0dGVyLnNldE1heExpc3RlbmVycygpIHRvICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAnaW5jcmVhc2UgbGltaXQnKTtcbiAgICAgIHcubmFtZSA9ICdNYXhMaXN0ZW5lcnNFeGNlZWRlZFdhcm5pbmcnO1xuICAgICAgdy5lbWl0dGVyID0gdGFyZ2V0O1xuICAgICAgdy50eXBlID0gdHlwZTtcbiAgICAgIHcuY291bnQgPSBleGlzdGluZy5sZW5ndGg7XG4gICAgICBQcm9jZXNzRW1pdFdhcm5pbmcodyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRhcmdldDtcbn1cblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IGZ1bmN0aW9uIGFkZExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7XG4gIHJldHVybiBfYWRkTGlzdGVuZXIodGhpcywgdHlwZSwgbGlzdGVuZXIsIGZhbHNlKTtcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub24gPSBFdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyO1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnByZXBlbmRMaXN0ZW5lciA9XG4gICAgZnVuY3Rpb24gcHJlcGVuZExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICByZXR1cm4gX2FkZExpc3RlbmVyKHRoaXMsIHR5cGUsIGxpc3RlbmVyLCB0cnVlKTtcbiAgICB9O1xuXG5mdW5jdGlvbiBvbmNlV3JhcHBlcigpIHtcbiAgaWYgKCF0aGlzLmZpcmVkKSB7XG4gICAgdGhpcy50YXJnZXQucmVtb3ZlTGlzdGVuZXIodGhpcy50eXBlLCB0aGlzLndyYXBGbik7XG4gICAgdGhpcy5maXJlZCA9IHRydWU7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApXG4gICAgICByZXR1cm4gdGhpcy5saXN0ZW5lci5jYWxsKHRoaXMudGFyZ2V0KTtcbiAgICByZXR1cm4gdGhpcy5saXN0ZW5lci5hcHBseSh0aGlzLnRhcmdldCwgYXJndW1lbnRzKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBfb25jZVdyYXAodGFyZ2V0LCB0eXBlLCBsaXN0ZW5lcikge1xuICB2YXIgc3RhdGUgPSB7IGZpcmVkOiBmYWxzZSwgd3JhcEZuOiB1bmRlZmluZWQsIHRhcmdldDogdGFyZ2V0LCB0eXBlOiB0eXBlLCBsaXN0ZW5lcjogbGlzdGVuZXIgfTtcbiAgdmFyIHdyYXBwZWQgPSBvbmNlV3JhcHBlci5iaW5kKHN0YXRlKTtcbiAgd3JhcHBlZC5saXN0ZW5lciA9IGxpc3RlbmVyO1xuICBzdGF0ZS53cmFwRm4gPSB3cmFwcGVkO1xuICByZXR1cm4gd3JhcHBlZDtcbn1cblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbmNlID0gZnVuY3Rpb24gb25jZSh0eXBlLCBsaXN0ZW5lcikge1xuICBjaGVja0xpc3RlbmVyKGxpc3RlbmVyKTtcbiAgdGhpcy5vbih0eXBlLCBfb25jZVdyYXAodGhpcywgdHlwZSwgbGlzdGVuZXIpKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnByZXBlbmRPbmNlTGlzdGVuZXIgPVxuICAgIGZ1bmN0aW9uIHByZXBlbmRPbmNlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgIGNoZWNrTGlzdGVuZXIobGlzdGVuZXIpO1xuICAgICAgdGhpcy5wcmVwZW5kTGlzdGVuZXIodHlwZSwgX29uY2VXcmFwKHRoaXMsIHR5cGUsIGxpc3RlbmVyKSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4vLyBFbWl0cyBhICdyZW1vdmVMaXN0ZW5lcicgZXZlbnQgaWYgYW5kIG9ubHkgaWYgdGhlIGxpc3RlbmVyIHdhcyByZW1vdmVkLlxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lciA9XG4gICAgZnVuY3Rpb24gcmVtb3ZlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgIHZhciBsaXN0LCBldmVudHMsIHBvc2l0aW9uLCBpLCBvcmlnaW5hbExpc3RlbmVyO1xuXG4gICAgICBjaGVja0xpc3RlbmVyKGxpc3RlbmVyKTtcblxuICAgICAgZXZlbnRzID0gdGhpcy5fZXZlbnRzO1xuICAgICAgaWYgKGV2ZW50cyA9PT0gdW5kZWZpbmVkKVxuICAgICAgICByZXR1cm4gdGhpcztcblxuICAgICAgbGlzdCA9IGV2ZW50c1t0eXBlXTtcbiAgICAgIGlmIChsaXN0ID09PSB1bmRlZmluZWQpXG4gICAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgICBpZiAobGlzdCA9PT0gbGlzdGVuZXIgfHwgbGlzdC5saXN0ZW5lciA9PT0gbGlzdGVuZXIpIHtcbiAgICAgICAgaWYgKC0tdGhpcy5fZXZlbnRzQ291bnQgPT09IDApXG4gICAgICAgICAgdGhpcy5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgZGVsZXRlIGV2ZW50c1t0eXBlXTtcbiAgICAgICAgICBpZiAoZXZlbnRzLnJlbW92ZUxpc3RlbmVyKVxuICAgICAgICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIGxpc3QubGlzdGVuZXIgfHwgbGlzdGVuZXIpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBsaXN0ICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHBvc2l0aW9uID0gLTE7XG5cbiAgICAgICAgZm9yIChpID0gbGlzdC5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgIGlmIChsaXN0W2ldID09PSBsaXN0ZW5lciB8fCBsaXN0W2ldLmxpc3RlbmVyID09PSBsaXN0ZW5lcikge1xuICAgICAgICAgICAgb3JpZ2luYWxMaXN0ZW5lciA9IGxpc3RbaV0ubGlzdGVuZXI7XG4gICAgICAgICAgICBwb3NpdGlvbiA9IGk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocG9zaXRpb24gPCAwKVxuICAgICAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgICAgIGlmIChwb3NpdGlvbiA9PT0gMClcbiAgICAgICAgICBsaXN0LnNoaWZ0KCk7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIHNwbGljZU9uZShsaXN0LCBwb3NpdGlvbik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobGlzdC5sZW5ndGggPT09IDEpXG4gICAgICAgICAgZXZlbnRzW3R5cGVdID0gbGlzdFswXTtcblxuICAgICAgICBpZiAoZXZlbnRzLnJlbW92ZUxpc3RlbmVyICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIG9yaWdpbmFsTGlzdGVuZXIgfHwgbGlzdGVuZXIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9mZiA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXI7XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzID1cbiAgICBmdW5jdGlvbiByZW1vdmVBbGxMaXN0ZW5lcnModHlwZSkge1xuICAgICAgdmFyIGxpc3RlbmVycywgZXZlbnRzLCBpO1xuXG4gICAgICBldmVudHMgPSB0aGlzLl9ldmVudHM7XG4gICAgICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpXG4gICAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgICAvLyBub3QgbGlzdGVuaW5nIGZvciByZW1vdmVMaXN0ZW5lciwgbm8gbmVlZCB0byBlbWl0XG4gICAgICBpZiAoZXZlbnRzLnJlbW92ZUxpc3RlbmVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICB0aGlzLl9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICAgIHRoaXMuX2V2ZW50c0NvdW50ID0gMDtcbiAgICAgICAgfSBlbHNlIGlmIChldmVudHNbdHlwZV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGlmICgtLXRoaXMuX2V2ZW50c0NvdW50ID09PSAwKVxuICAgICAgICAgICAgdGhpcy5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgICBlbHNlXG4gICAgICAgICAgICBkZWxldGUgZXZlbnRzW3R5cGVdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuXG4gICAgICAvLyBlbWl0IHJlbW92ZUxpc3RlbmVyIGZvciBhbGwgbGlzdGVuZXJzIG9uIGFsbCBldmVudHNcbiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoZXZlbnRzKTtcbiAgICAgICAgdmFyIGtleTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICBrZXkgPSBrZXlzW2ldO1xuICAgICAgICAgIGlmIChrZXkgPT09ICdyZW1vdmVMaXN0ZW5lcicpIGNvbnRpbnVlO1xuICAgICAgICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoJ3JlbW92ZUxpc3RlbmVyJyk7XG4gICAgICAgIHRoaXMuX2V2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgIHRoaXMuX2V2ZW50c0NvdW50ID0gMDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG5cbiAgICAgIGxpc3RlbmVycyA9IGV2ZW50c1t0eXBlXTtcblxuICAgICAgaWYgKHR5cGVvZiBsaXN0ZW5lcnMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnMpO1xuICAgICAgfSBlbHNlIGlmIChsaXN0ZW5lcnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAvLyBMSUZPIG9yZGVyXG4gICAgICAgIGZvciAoaSA9IGxpc3RlbmVycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXJzW2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG5mdW5jdGlvbiBfbGlzdGVuZXJzKHRhcmdldCwgdHlwZSwgdW53cmFwKSB7XG4gIHZhciBldmVudHMgPSB0YXJnZXQuX2V2ZW50cztcblxuICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpXG4gICAgcmV0dXJuIFtdO1xuXG4gIHZhciBldmxpc3RlbmVyID0gZXZlbnRzW3R5cGVdO1xuICBpZiAoZXZsaXN0ZW5lciA9PT0gdW5kZWZpbmVkKVxuICAgIHJldHVybiBbXTtcblxuICBpZiAodHlwZW9mIGV2bGlzdGVuZXIgPT09ICdmdW5jdGlvbicpXG4gICAgcmV0dXJuIHVud3JhcCA/IFtldmxpc3RlbmVyLmxpc3RlbmVyIHx8IGV2bGlzdGVuZXJdIDogW2V2bGlzdGVuZXJdO1xuXG4gIHJldHVybiB1bndyYXAgP1xuICAgIHVud3JhcExpc3RlbmVycyhldmxpc3RlbmVyKSA6IGFycmF5Q2xvbmUoZXZsaXN0ZW5lciwgZXZsaXN0ZW5lci5sZW5ndGgpO1xufVxuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVycyA9IGZ1bmN0aW9uIGxpc3RlbmVycyh0eXBlKSB7XG4gIHJldHVybiBfbGlzdGVuZXJzKHRoaXMsIHR5cGUsIHRydWUpO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yYXdMaXN0ZW5lcnMgPSBmdW5jdGlvbiByYXdMaXN0ZW5lcnModHlwZSkge1xuICByZXR1cm4gX2xpc3RlbmVycyh0aGlzLCB0eXBlLCBmYWxzZSk7XG59O1xuXG5FdmVudEVtaXR0ZXIubGlzdGVuZXJDb3VudCA9IGZ1bmN0aW9uKGVtaXR0ZXIsIHR5cGUpIHtcbiAgaWYgKHR5cGVvZiBlbWl0dGVyLmxpc3RlbmVyQ291bnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gZW1pdHRlci5saXN0ZW5lckNvdW50KHR5cGUpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBsaXN0ZW5lckNvdW50LmNhbGwoZW1pdHRlciwgdHlwZSk7XG4gIH1cbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJDb3VudCA9IGxpc3RlbmVyQ291bnQ7XG5mdW5jdGlvbiBsaXN0ZW5lckNvdW50KHR5cGUpIHtcbiAgdmFyIGV2ZW50cyA9IHRoaXMuX2V2ZW50cztcblxuICBpZiAoZXZlbnRzICE9PSB1bmRlZmluZWQpIHtcbiAgICB2YXIgZXZsaXN0ZW5lciA9IGV2ZW50c1t0eXBlXTtcblxuICAgIGlmICh0eXBlb2YgZXZsaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIDE7XG4gICAgfSBlbHNlIGlmIChldmxpc3RlbmVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBldmxpc3RlbmVyLmxlbmd0aDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gMDtcbn1cblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5ldmVudE5hbWVzID0gZnVuY3Rpb24gZXZlbnROYW1lcygpIHtcbiAgcmV0dXJuIHRoaXMuX2V2ZW50c0NvdW50ID4gMCA/IFJlZmxlY3RPd25LZXlzKHRoaXMuX2V2ZW50cykgOiBbXTtcbn07XG5cbmZ1bmN0aW9uIGFycmF5Q2xvbmUoYXJyLCBuKSB7XG4gIHZhciBjb3B5ID0gbmV3IEFycmF5KG4pO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IG47ICsraSlcbiAgICBjb3B5W2ldID0gYXJyW2ldO1xuICByZXR1cm4gY29weTtcbn1cblxuZnVuY3Rpb24gc3BsaWNlT25lKGxpc3QsIGluZGV4KSB7XG4gIGZvciAoOyBpbmRleCArIDEgPCBsaXN0Lmxlbmd0aDsgaW5kZXgrKylcbiAgICBsaXN0W2luZGV4XSA9IGxpc3RbaW5kZXggKyAxXTtcbiAgbGlzdC5wb3AoKTtcbn1cblxuZnVuY3Rpb24gdW53cmFwTGlzdGVuZXJzKGFycikge1xuICB2YXIgcmV0ID0gbmV3IEFycmF5KGFyci5sZW5ndGgpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHJldC5sZW5ndGg7ICsraSkge1xuICAgIHJldFtpXSA9IGFycltpXS5saXN0ZW5lciB8fCBhcnJbaV07XG4gIH1cbiAgcmV0dXJuIHJldDtcbn1cblxuZnVuY3Rpb24gb25jZShlbWl0dGVyLCBuYW1lKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgZnVuY3Rpb24gZXJyb3JMaXN0ZW5lcihlcnIpIHtcbiAgICAgIGVtaXR0ZXIucmVtb3ZlTGlzdGVuZXIobmFtZSwgcmVzb2x2ZXIpO1xuICAgICAgcmVqZWN0KGVycik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVzb2x2ZXIoKSB7XG4gICAgICBpZiAodHlwZW9mIGVtaXR0ZXIucmVtb3ZlTGlzdGVuZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgZW1pdHRlci5yZW1vdmVMaXN0ZW5lcignZXJyb3InLCBlcnJvckxpc3RlbmVyKTtcbiAgICAgIH1cbiAgICAgIHJlc29sdmUoW10uc2xpY2UuY2FsbChhcmd1bWVudHMpKTtcbiAgICB9O1xuXG4gICAgZXZlbnRUYXJnZXRBZ25vc3RpY0FkZExpc3RlbmVyKGVtaXR0ZXIsIG5hbWUsIHJlc29sdmVyLCB7IG9uY2U6IHRydWUgfSk7XG4gICAgaWYgKG5hbWUgIT09ICdlcnJvcicpIHtcbiAgICAgIGFkZEVycm9ySGFuZGxlcklmRXZlbnRFbWl0dGVyKGVtaXR0ZXIsIGVycm9yTGlzdGVuZXIsIHsgb25jZTogdHJ1ZSB9KTtcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBhZGRFcnJvckhhbmRsZXJJZkV2ZW50RW1pdHRlcihlbWl0dGVyLCBoYW5kbGVyLCBmbGFncykge1xuICBpZiAodHlwZW9mIGVtaXR0ZXIub24gPT09ICdmdW5jdGlvbicpIHtcbiAgICBldmVudFRhcmdldEFnbm9zdGljQWRkTGlzdGVuZXIoZW1pdHRlciwgJ2Vycm9yJywgaGFuZGxlciwgZmxhZ3MpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGV2ZW50VGFyZ2V0QWdub3N0aWNBZGRMaXN0ZW5lcihlbWl0dGVyLCBuYW1lLCBsaXN0ZW5lciwgZmxhZ3MpIHtcbiAgaWYgKHR5cGVvZiBlbWl0dGVyLm9uID09PSAnZnVuY3Rpb24nKSB7XG4gICAgaWYgKGZsYWdzLm9uY2UpIHtcbiAgICAgIGVtaXR0ZXIub25jZShuYW1lLCBsaXN0ZW5lcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVtaXR0ZXIub24obmFtZSwgbGlzdGVuZXIpO1xuICAgIH1cbiAgfSBlbHNlIGlmICh0eXBlb2YgZW1pdHRlci5hZGRFdmVudExpc3RlbmVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgLy8gRXZlbnRUYXJnZXQgZG9lcyBub3QgaGF2ZSBgZXJyb3JgIGV2ZW50IHNlbWFudGljcyBsaWtlIE5vZGVcbiAgICAvLyBFdmVudEVtaXR0ZXJzLCB3ZSBkbyBub3QgbGlzdGVuIGZvciBgZXJyb3JgIGV2ZW50cyBoZXJlLlxuICAgIGVtaXR0ZXIuYWRkRXZlbnRMaXN0ZW5lcihuYW1lLCBmdW5jdGlvbiB3cmFwTGlzdGVuZXIoYXJnKSB7XG4gICAgICAvLyBJRSBkb2VzIG5vdCBoYXZlIGJ1aWx0aW4gYHsgb25jZTogdHJ1ZSB9YCBzdXBwb3J0IHNvIHdlXG4gICAgICAvLyBoYXZlIHRvIGRvIGl0IG1hbnVhbGx5LlxuICAgICAgaWYgKGZsYWdzLm9uY2UpIHtcbiAgICAgICAgZW1pdHRlci5yZW1vdmVFdmVudExpc3RlbmVyKG5hbWUsIHdyYXBMaXN0ZW5lcik7XG4gICAgICB9XG4gICAgICBsaXN0ZW5lcihhcmcpO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSBcImVtaXR0ZXJcIiBhcmd1bWVudCBtdXN0IGJlIG9mIHR5cGUgRXZlbnRFbWl0dGVyLiBSZWNlaXZlZCB0eXBlICcgKyB0eXBlb2YgZW1pdHRlcik7XG4gIH1cbn1cblxuXG4vLyMgc291cmNlVVJMPXdlYnBhY2s6Ly9Acm9uZ2Nsb3VkL3JjbGl2ZXJvb21saWIvLi9ub2RlX21vZHVsZXMvZXZlbnRzL2V2ZW50cy5qcz8iKTsvKioqL30sLyoqKi8iLi9zcmMvY29uZmlnLnRzIjovKiEqKioqKioqKioqKioqKioqKioqKioqKiEqXAogICEqKiogLi9zcmMvY29uZmlnLnRzICoqKiEKICBcKioqKioqKioqKioqKioqKioqKioqKiovIC8qKiovZnVuY3Rpb24gc3JjQ29uZmlnVHMoX191bnVzZWRfd2VicGFja19tb2R1bGUsX193ZWJwYWNrX2V4cG9ydHNfXyxfX3dlYnBhY2tfcmVxdWlyZV9fKXtldmFsKCJfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywge1xuLyogaGFybW9ueSBleHBvcnQgKi8gICBcInNka1N0YXR1c1wiOiAoKSA9PiAoLyogYmluZGluZyAqLyBzZGtTdGF0dXMpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImRlYnVnXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIGRlYnVnKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJSQ1NlYXRTdGF0dXNcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gUkNTZWF0U3RhdHVzKVxuLyogaGFybW9ueSBleHBvcnQgKi8gfSk7XG4vL3Nka+iHqui6q+eKtuaAgVxudmFyIHNka1N0YXR1cztcbihmdW5jdGlvbiAoc2RrU3RhdHVzKSB7XG4gICAgc2RrU3RhdHVzW3Nka1N0YXR1c1tcImluaXRpbmdcIl0gPSAwXSA9IFwiaW5pdGluZ1wiO1xuICAgIHNka1N0YXR1c1tzZGtTdGF0dXNbXCJyZWFkeVwiXSA9IDFdID0gXCJyZWFkeVwiOyAvL+WIneWni+WMluWujOaIkFxufSkoc2RrU3RhdHVzIHx8IChzZGtTdGF0dXMgPSB7fSkpO1xudmFyIGRlYnVnID0gdHJ1ZTtcbnZhciBSQ1NlYXRTdGF0dXMgPSB7XG4gICAgLy8g56m66bqm5L2NXG4gICAgUkNTZWF0U3RhdHVzRW1wdHk6IDAsXG4gICAgLy8g6bqm5L2N6KKr5L2/55So77yMdXNlcklk5LiN5Li6bnVsbFxuICAgIFJDU2VhdFN0YXR1c1VzaW5nOiAxLFxuICAgIC8vIOm6puS9jeiiq+mUgeWumlxuICAgIFJDU2VhdFN0YXR1c0xvY2tpbmc6IDJcbn07XG5cblxuXG4vLyMgc291cmNlVVJMPXdlYnBhY2s6Ly9Acm9uZ2Nsb3VkL3JjbGl2ZXJvb21saWIvLi9zcmMvY29uZmlnLnRzPyIpOy8qKiovfSwvKioqLyIuL3NyYy9pbmRleC50cyI6LyohKioqKioqKioqKioqKioqKioqKioqKiEqXAogICEqKiogLi9zcmMvaW5kZXgudHMgKioqIQogIFwqKioqKioqKioqKioqKioqKioqKioqLyAvKioqL2Z1bmN0aW9uIHNyY0luZGV4VHMoX191bnVzZWRfd2VicGFja19tb2R1bGUsX193ZWJwYWNrX2V4cG9ydHNfXyxfX3dlYnBhY2tfcmVxdWlyZV9fKXtldmFsKCJfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywge1xuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIlJDVm9pY2VSb29tTGliQ2xhc3NcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gUkNWb2ljZVJvb21MaWJDbGFzcyksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZGVmYXVsdFwiOiAoKSA9PiAoX19XRUJQQUNLX0RFRkFVTFRfRVhQT1JUX18pXG4vKiBoYXJtb255IGV4cG9ydCAqLyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBldmVudHNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIGV2ZW50cyAqLyBcIi4vbm9kZV9tb2R1bGVzL2V2ZW50cy9ldmVudHMuanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgZXZlbnRzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm4oZXZlbnRzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9tb2R1bGVzX2ltX2luZGV4X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL21vZHVsZXMvaW0vaW5kZXggKi8gXCIuL3NyYy9tb2R1bGVzL2ltL2luZGV4LnRzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9tb2R1bGVzX3J0Y19pbmRleF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9tb2R1bGVzL3J0Yy9pbmRleCAqLyBcIi4vc3JjL21vZHVsZXMvcnRjL2luZGV4LnRzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9jb25maWdfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vY29uZmlnICovIFwiLi9zcmMvY29uZmlnLnRzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9sb2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9sb2dlciAqLyBcIi4vc3JjL2xvZ2VyLnRzXCIpO1xudmFyIF9fZXh0ZW5kcyA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX19hc3NpZ24gPSAodW5kZWZpbmVkICYmIHVuZGVmaW5lZC5fX2Fzc2lnbikgfHwgZnVuY3Rpb24gKCkge1xuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbih0KSB7XG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSlcbiAgICAgICAgICAgICAgICB0W3BdID0gc1twXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdDtcbiAgICB9O1xuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufTtcbnZhciBfX2F3YWl0ZXIgPSAodW5kZWZpbmVkICYmIHVuZGVmaW5lZC5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbnZhciBfX2dlbmVyYXRvciA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fZ2VuZXJhdG9yKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgYm9keSkge1xuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XG4gICAgfVxufTtcblxuXG5cblxuXG5cbnZhciBSQ1ZvaWNlUm9vbUxpYkNsYXNzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhSQ1ZvaWNlUm9vbUxpYkNsYXNzLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFJDVm9pY2VSb29tTGliQ2xhc3MoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLl9yb29taWRjbGkgPSBcIlwiO1xuICAgICAgICBfdGhpcy5pc0FuY2hvciA9IGZhbHNlOyAvLyDpu5jorqTop4LkvJdcbiAgICAgICAgX3RoaXMuc2VhdEluZm9MaXN0ID0gW107IC8v5oi/6Ze05L+h5oGvXG4gICAgICAgIF90aGlzLlJDU2VhdEluZm9TZWF0UGFydFByZWZpeEtleSA9IFwiUkNTZWF0SW5mb1NlYXRQYXJ0UHJlZml4S2V5X1wiO1xuICAgICAgICBfdGhpcy5sZWF2ZVJvb21Db250cm9sID0gdHJ1ZTtcbiAgICAgICAgX3RoaXMuc2VhdEluZm8gPSB7XG4gICAgICAgICAgICBzdGF0dXM6IDAsXG4gICAgICAgICAgICBtdXRlOiBmYWxzZSxcbiAgICAgICAgICAgIHNwZWFraW5nOiBmYWxzZSxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICAvLyBsZXQgaW5pdHBybzogUHJvbWlzZTxGdW5jdGlvbj4gPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIC8vICAgICB0aGlzLmluaXQob3B0aW9ucyk7XG4gICAgICAgIC8vIH0pXG4gICAgICAgIC8vIGluaXRwcm8uY2F0Y2goKGUpID0+IHtcbiAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKGUsIFwi5Yid5aeL5YyW6ZSZ6K+vXCIpXG4gICAgICAgIC8vIH0pXG4gICAgfVxuICAgIC8qKlxuICAgICog5Yid5aeL5YyWIFNES1xuICAgICpcbiAgICAqIEBwYXJhbSBhcHBrZXkg6J6N5LqR5bqU55So6Lqr5Lu95qCH6K+GXG4gICAgKi9cbiAgICBSQ1ZvaWNlUm9vbUxpYkNsYXNzLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKGFwcGtleSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgKiDlvIDlp4vliJ3lp4vljJYgaW1saWIg5ZKMIHJ0Y+WuouaIt+err1xuICAgICAgICAqL1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhcIuWIneWni+WMluWPguaVsOS4uu+8mlwiLCBhcHBrZXkpO1xuICAgICAgICB2YXIgaW0gPSBuZXcgX21vZHVsZXNfaW1faW5kZXhfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXy5kZWZhdWx0KGFwcGtleSk7XG4gICAgICAgIHZhciBydGMgPSBuZXcgX21vZHVsZXNfcnRjX2luZGV4X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18uZGVmYXVsdChpbS5ib2R5KTtcbiAgICAgICAgdGhpcy5pbSA9IGltO1xuICAgICAgICB0aGlzLnJ0YyA9IHJ0YztcbiAgICAgICAgaW0ub24oXCJyZWFkeVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy5pbXJlYWR5ID0gdHJ1ZTtcbiAgICAgICAgICAgIF9sb2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fLmRlZmF1bHQubG9nKCdpbeWIneWni+WMluWujOaIkCDlvIDlp4vliJ3lp4vljJZydGMnKTtcbiAgICAgICAgICAgIF90aGlzLnJlYWR5Q2hlY2soKTtcbiAgICAgICAgICAgIF90aGlzLnJ0Yy5vbihcInJlYWR5XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfbG9nZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXy5kZWZhdWx0LmxvZygncnRj5Yid5aeL5YyW5a6M5oiQJyk7XG4gICAgICAgICAgICAgICAgX3RoaXMucnRjcmVhZHkgPSB0cnVlO1xuICAgICAgICAgICAgICAgIF90aGlzLnJlYWR5Q2hlY2soKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgX3RoaXMucnRjLm9uKFwiUnRjUnR0XCIsIGZ1bmN0aW9uIChSdGNSdHQpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5lbWl0KFwiUnRjUnR0XCIsIFJ0Y1J0dCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIF90aGlzLnJ0Yy5vbihcInJlbW90ZVZpZGVvVHJhY2tcIiwgZnVuY3Rpb24gKHRyYWNrKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuZW1pdChcInJlbW90ZVZpZGVvVHJhY2tcIiwgdHJhY2spO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBfdGhpcy5ydGMuaW5pdChpbS5ib2R5KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGltLm9uKFwiam9pblJvb21cIiwgZnVuY3Rpb24gKHJvb21pZCkge1xuICAgICAgICAgICAgaWYgKF90aGlzLnJ0Yy5pc0FuY2hvciAmJiBfdGhpcy5pbS5zZWF0SW5mb0xpc3RbMF0gJiYgX3RoaXMuaW0uc2VhdEluZm9MaXN0WzBdLnN0YXR1cyAhPSBfY29uZmlnX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18uUkNTZWF0U3RhdHVzLlJDU2VhdFN0YXR1c0VtcHR5KSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwi6LCD55So5Yqg5YWl5bey57uP5a2Y5Zyo55qE5oi/6Ze05LiN6IO95L2/55SoIGNyZWF0YW5kSm9pbnJvb23mlrnms5VcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBfdGhpcy5ydGMuam9pblJvb20ocm9vbWlkKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGltLm9uKFwic2V0TmV3Um9vbVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy5zZWF0SW5mb0xpc3QgPSBfdGhpcy5pbS5zZWF0SW5mb0xpc3Q7XG4gICAgICAgICAgICBpZiAoX3RoaXMucnRjLmlzQW5jaG9yKSB7XG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIuaYr+S4u+aSreW9k+WJjeimgeS4ilwiLCB0aGlzLnJ0Yy5jdXJyZW50U2VhdCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJjazpcIik7XG4gICAgICAgICAgICAgICAgX3RoaXMuZW50ZXJTZWF0KF90aGlzLnJ0Yy5jdXJyZW50U2VhdCk7XG4gICAgICAgICAgICAgICAgX3RoaXMucnRjLnVubXV0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gaW0ub24oXCJnb3RSb29tSW5mb1wiLCAoaW5mbykgPT4ge1xuICAgICAgICAvLyAgICAgY29uc29sZS5sb2coXCJnb3QgSW5mbzogXCIsIGluZm8pXG4gICAgICAgIC8vICAgICBjb25zdCByZWcgPSBuZXcgUmVnRXhwKFwiXlswLTldKiRcIik7XG4gICAgICAgIC8vICAgICBmb3IgKHZhciBpIGluIGluZm8pIHtcbiAgICAgICAgLy8gICAgICAgICAvL3RoaXMucm9vbUluZm9baV09SlNPTi5wYXJzZShpbmZvW2ldKVxuICAgICAgICAvLyAgICAgICAgIGlmIChpID09IFwiUkNSb29tSW5mb0tleVwiKSB7XG4gICAgICAgIC8vICAgICAgICAgICAgIHRoaXMucm9vbUluZm8gPSBKU09OLnBhcnNlKGluZm9baV0pXG4gICAgICAgIC8vICAgICAgICAgICAgIHRoaXMuZW1pdChcInJvb21JbmZvRGlkVXBkYXRlXCIsIHRoaXMucm9vbUluZm8pXG4gICAgICAgIC8vICAgICAgICAgfSBlbHNlIGlmIChpLnN1YnN0cmluZygwLCAyOCkgPT0gJ1JDU2VhdEluZm9Vc2VyUGFydFByZWZpeEtleV8nICYmIHJlZy50ZXN0KGkuc3BsaXQoJ18nKVsxXSkpIHtcbiAgICAgICAgLy8gICAgICAgICAgICAgdGhpcy5zZWF0SW5mb0xpc3RbaS5zdWJzdHJpbmcoMjgpXSA9IEpTT04ucGFyc2UoaW5mb1tpXSlcbiAgICAgICAgLy8gICAgICAgICAgICAgY29uc29sZS5sb2coJ+iuvue9rnJvb20gaW5mbyBsaXN0OicsIEpTT04ucGFyc2UoaW5mb1tpXSkpXG4gICAgICAgIC8vICAgICAgICAgICAgIHRoaXMuZW1pdChcInNlYXRJbmZvRGlkVXBkYXRlXCIsIHRoaXMuc2VhdEluZm9MaXN0KVxuICAgICAgICAvLyAgICAgICAgIH1cbiAgICAgICAgLy8gICAgIH1cbiAgICAgICAgLy8gfSlcbiAgICAgICAgaW0ub24oXCJyb29tSW5mb0RpZFVwZGF0ZVwiLCBmdW5jdGlvbiAocGFybSkge1xuICAgICAgICAgICAgX3RoaXMucm9vbUluZm8gPSBwYXJtLnJvb21JbmZvO1xuICAgICAgICAgICAgX3RoaXMuZW1pdChcInJvb21JbmZvRGlkVXBkYXRlXCIsIF90aGlzLnJvb21JbmZvKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGltLm9uKFwic2VhdEluZm9EaWRVcGRhdGVcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMuc2VhdEluZm9MaXN0ID0gaW0uc2VhdEluZm9MaXN0O1xuICAgICAgICAgICAgX3RoaXMuZW1pdChcInNlYXRJbmZvRGlkVXBkYXRlXCIsIF90aGlzLnNlYXRJbmZvTGlzdCk7XG4gICAgICAgIH0pO1xuICAgICAgICBpbS5vbihcIm9uQXVkaWVuY2VFbnRlclwiLCBmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICBfdGhpcy5lbWl0KFwiY2hhbmdlVXNlckNvdW50XCIsIHJlcyk7XG4gICAgICAgIH0pO1xuICAgICAgICBpbS5vbihcIm9uQXVkaWVuY2VFeGl0XCIsIGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIF90aGlzLmVtaXQoXCJjaGFuZ2VVc2VyQ291bnRcIiwgcmVzKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGltLm9uKFwidXNlckVudGVyXCIsIGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIF90aGlzLmVtaXQoXCJ1c2VyRW50ZXJcIiwgcmVzKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGltLm9uKFwidXNlckV4aXRcIiwgZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgX3RoaXMuZW1pdChcInVzZXJFeGl0IFwiLCByZXMpO1xuICAgICAgICB9KTtcbiAgICAgICAgaW0ub24oXCJvbk1lc3NhZ2VSZWNlaXZlZFwiLCBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgLy/pu5jorqTmtojmga9cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UpO1xuICAgICAgICAgICAgX3RoaXMuZW1pdChcIm9uTWVzc2FnZVJlY2VpdmVkXCIsIG1lc3NhZ2UpO1xuICAgICAgICB9KTtcbiAgICAgICAgaW0ub24oXCJzcGVha2luZ1N0YXR1c0NoZW5nZVwiLCBmdW5jdGlvbiAocGFybSkge1xuICAgICAgICAgICAgLy/pn7Pph4/nirbmgIHlj5jmm7RcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwicGFybTpcIiwgcGFybSk7XG4gICAgICAgICAgICBfdGhpcy5lbWl0KFwic3BlYWtpbmdTdGF0dXNDaGVuZ2VcIiwgcGFybSk7XG4gICAgICAgICAgICBpZiAoX3RoaXMuc2VhdEluZm9MaXN0W051bWJlcihwYXJtLmluZGV4KV0pIHtcbiAgICAgICAgICAgICAgICAvLyB0aGlzLnNlYXRJbmZvTGlzdFtOdW1iZXIocGFybS5pbmRleCldLnNwZWFraW5nID0gcGFybS5zcGVha2luZztcbiAgICAgICAgICAgICAgICBfdGhpcy5zZWF0SW5mb0xpc3RbTnVtYmVyKHBhcm0uaW5kZXgpXVsnc3BlYWtpbmcnXSA9IHBhcm0uc3BlYWtpbmc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpbS5vbihcIm11dGVcIiwgZnVuY3Rpb24gKGlzbXV0ZSkge1xuICAgICAgICAgICAgLy/mmK/lkKbpnZnpn7Pmk43kvZxcbiAgICAgICAgICAgIGlmIChpc211dGUpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5ydGMubXV0ZSgpO1xuICAgICAgICAgICAgICAgIF90aGlzLmVtaXQoXCJTZWF0TXV0ZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIF90aGlzLnJ0Yy51bm11dGUoKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5lbWl0KFwiU2VhdFVuTXV0ZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGltLm9uKFwibGVhdmVTZWF0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzLmxlYXZlU2VhdCh0cnVlKTtcbiAgICAgICAgICAgIF90aGlzLmVtaXQoXCJsZWF2ZVNlYXRcIik7XG4gICAgICAgICAgICBfdGhpcy5lbWl0KFwiS2lja1NlYXRSZWNlaXZlZFwiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGltLm9uKFwiZW50ZXJTZWF0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8v5Li75Yqo5LiK6bqmIOWPquacieebtOaSreeUqCDpu5jorqTkuIox5aW96bqm5L2N77ybXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIuS4ium6puaTjeS9nFwiKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuZW50ZXJTZWF0KDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgX2xvZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18uZGVmYXVsdC5fZXJyb3IoJ+WKoOWFpeinhumikei/num6puWksei0pTo3MDAwOScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgaW0ub24oXCJSQ1BpY2tlclVzZXJTZWF0Q29udGVudFwiLCBmdW5jdGlvbiAocGFybSkge1xuICAgICAgICAgICAgX3RoaXMuZW1pdChcIm9uUkNQaWNrZXJVc2VyU2VhdENvbnRlbnRcIiwgcGFybSk7XG4gICAgICAgIH0pO1xuICAgICAgICBpbS5vbihcIlZvaWNlUm9vbUFncmVlTWFuYWdlUGlja1wiLCBmdW5jdGlvbiAocGFybSkge1xuICAgICAgICAgICAgX3RoaXMuZW1pdChcIm9uVm9pY2VSb29tQWdyZWVNYW5hZ2VQaWNrXCIsIHBhcm0pO1xuICAgICAgICB9KTtcbiAgICAgICAgaW0ub24oXCJWb2ljZVJvb21SZWplY3RNYW5hZ2VQaWNrXCIsIGZ1bmN0aW9uIChwYXJtKSB7XG4gICAgICAgICAgICBfdGhpcy5lbWl0KFwib25Wb2ljZVJvb21SZWplY3RNYW5hZ2VQaWNrXCIsIHBhcm0pO1xuICAgICAgICB9KTtcbiAgICAgICAgaW0ub24oXCJSQ0tpY2tVc2VyT3V0Um9vbUNvbnRlbnRcIiwgZnVuY3Rpb24gKHBhcm0pIHtcbiAgICAgICAgICAgIF90aGlzLmVtaXQoXCJSQ0tpY2tVc2VyT3V0Um9vbUNvbnRlbnRcIiwgcGFybSk7XG4gICAgICAgICAgICBpZiAocGFybS50YXJnZXRJZCA9PSBfdGhpcy5pbS51c2VySWQpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndGhpcy5fcm9vbWlkY2xpJywgX3RoaXMuX3Jvb21pZGNsaSk7XG4gICAgICAgICAgICAgICAgX3RoaXMubGVhdmVSb29tKF90aGlzLl9yb29taWRjbGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgaW0ub24oXCJSZXF1ZXN0U2VhdEFjY2VwdGVkXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSBcIlJDUmVxdWVzdFNlYXRQcmVmaXhLZXlfXCI7XG4gICAgICAgICAgICBpZiAoX3RoaXMucnRjLnJvb21UeXBlID09ICdsaXZlJykge1xuICAgICAgICAgICAgICAgIGtleSA9IFwiTElWRV9WSURFT19SRVFVRVNUX1BSRV9cIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF90aGlzLmVtaXQoXCJSZXF1ZXN0U2VhdEFjY2VwdGVkXCIpO1xuICAgICAgICAgICAgX3RoaXMuaW0uc2VhdEluZm9SZW1vdmUoa2V5ICsgX3RoaXMuaW0udXNlcklkKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBfbG9nZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXy5kZWZhdWx0LmxvZygn5pON5L2c5oiQ5YqfOjcwMDAwJyk7XG4gICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgX2xvZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18uZGVmYXVsdC5fZXJyb3IoJ+WQjOaEj+aOkum6puivt+axguWPkemAgeWksei0pTo3MDAxNycsIGVycik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGltLm9uKFwiUmVxdWVzdFNlYXRSZWplY3RlZFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIga2V5ID0gXCJSQ1JlcXVlc3RTZWF0UHJlZml4S2V5X1wiO1xuICAgICAgICAgICAgaWYgKF90aGlzLnJ0Yy5yb29tVHlwZSA9PSAnbGl2ZScpIHtcbiAgICAgICAgICAgICAgICBrZXkgPSBcIkxJVkVfVklERU9fUkVRVUVTVF9QUkVfXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBfdGhpcy5lbWl0KFwiUmVxdWVzdFNlYXRSZWplY3RlZFwiKTtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdpc3JlaicsIGtleSwgdGhpcy5pbS51c2VySWQpO1xuICAgICAgICAgICAgLy8gdGhpcy5pbS5zZWF0SW5mb1JlbW92ZShrZXkgKyB0aGlzLmltLnVzZXJJZCkudGhlbigocmVzdWx0OiBhbnkpID0+IHtcbiAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhcIuWIoOmZpOi/iOWogeaIkOWKn1wiKTtcbiAgICAgICAgICAgIC8vICAgICBsb2dlci5sb2coJ+aTjeS9nOaIkOWKnzo3MDAwMCcpXG4gICAgICAgICAgICAvLyB9KS5jYXRjaCgoZXJyOiBhbnkpID0+IHtcbiAgICAgICAgICAgIC8vICAgICBsb2dlci5fZXJyb3IoJ+aLkue7neaOkum6puivt+axguWPkemAgeWksei0pTo3MDAxOCcpXG4gICAgICAgICAgICAvLyB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGltLm9uKFwiUmVxdWVzdFNlYXRMaXN0Q2hhbmdlZFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy5lbWl0KFwiUmVxdWVzdFNlYXRMaXN0Q2hhbmdlZFwiKTtcbiAgICAgICAgICAgIF9sb2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fLmRlZmF1bHQubG9nKCfmk43kvZzmiJDlip86NzAwMDAnKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGltLm9uKFwib25Sb29tTm90aWZpY2F0aW9uUmVjZWl2ZWRcIiwgZnVuY3Rpb24gKGluZm8pIHtcbiAgICAgICAgICAgIF90aGlzLmVtaXQoXCJvblJvb21Ob3RpZmljYXRpb25SZWNlaXZlZFwiLCBpbmZvKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGltLm9uKFwiVm9pY2VSb29tQ2xvc2VkXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzLmVtaXQoXCJvblZvaWNlUm9vbUNsb3NlZFwiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGltLm9uKFwiY2hhdHJvb21EZXN0cm95ZWRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMuZW1pdChcImNoYXRyb29tRGVzdHJveWVkXCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgaW0ub24oXCJWb2ljZVJvb21CYWNrZ3JvdW5kQ2hhbmdlZFwiLCBmdW5jdGlvbiAoaW1nKSB7XG4gICAgICAgICAgICBfdGhpcy5lbWl0KFwib25Wb2ljZVJvb21CYWNrZ3JvdW5kQ2hhbmdlZFwiLCBpbWcpO1xuICAgICAgICB9KTtcbiAgICAgICAgaW0ub24oXCJvbkludml0YXRpb25cIiwgZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgICAgIC8v5pS25Yiw6YKA6K+35raI5oGvXG4gICAgICAgICAgICBfdGhpcy5lbWl0KFwib25JbnZpdGF0aW9uXCIsIG8pO1xuICAgICAgICB9KTtcbiAgICAgICAgaW0ub24oXCJvbkludml0YXRpb25DYW5jZWxcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMuZW1pdChcIm9uSW52aXRhdGlvbkNhbmNlbFwiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGltLm9uKFwiaW52aXRhdGlvblJlamVjdGVkXCIsIGZ1bmN0aW9uICh1c2VySWQpIHtcbiAgICAgICAgICAgIF90aGlzLmVtaXQoXCJpbnZpdGF0aW9uUmVqZWN0ZWRcIiwgdXNlcklkKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGltLm9uKFwiaW52aXRhdGlvbkFjY2VwdGVkXCIsIGZ1bmN0aW9uICh1c2VySWQpIHtcbiAgICAgICAgICAgIF90aGlzLmVtaXQoXCJpbnZpdGF0aW9uQWNjZXB0ZWRcIiwgdXNlcklkKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGltLm9uKFwia2V5VmFsdWVEaWRVcGRhdGVcIiwgZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgICAgIF90aGlzLmVtaXQoXCJrZXlWYWx1ZURpZFVwZGF0ZVwiLCBvKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucnRjLm9uKFwiam9pblJvb21cIiwgZnVuY3Rpb24gKCkgeyByZXR1cm4gX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmdldFJvb21JbmZvKHRoaXMuX3Jvb21pZGNsaSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWF0SW5mb0xpc3QubGVuZ3RoICYmIHRoaXMuc2VhdEluZm9MaXN0W3RoaXMuaW0uc2VhdEluZGV4XSAmJiB0aGlzLnNlYXRJbmZvTGlzdFt0aGlzLmltLnNlYXRJbmRleF0ubXV0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwi5LiK5LqG6Z2Z6Z+z5Lmw5L2NXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucnRjLm11dGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7IH0pO1xuICAgICAgICB0aGlzLnJ0Yy5vbihcInVucHVibGlzaFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy5lbWl0KFwib25VbnB1Ymxpc2hcIik7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnJ0Yy5vbihcIm9uZGV2aWNlY2hhbmdlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzLmVtaXQoXCJvbmRldmljZWNoYW5nZVwiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucnRjLm9uKCdhdWRpb0NoZW5nZScsIGZ1bmN0aW9uIChsZXZlbCkge1xuICAgICAgICAgICAgaWYgKF90aGlzLnJ0Yy5yb29tVHlwZSA9PSAnbGl2ZScpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobGV2ZWwudHJhY2suX3VzZXJJZCAmJiBsZXZlbC50cmFjay5fdXNlcklkID09IF90aGlzLmltLnVzZXJJZCkge1xuICAgICAgICAgICAgICAgIHZhciBjb250ZW50ID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIHZhciBzcGVhayA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICBpZiAobGV2ZWwuYXVkaW9MZXZlbCkge1xuICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJSQ1VzZXJPblNlYXRTcGVha2luZ0tleV9cIiArIF90aGlzLnJ0Yy5jdXJyZW50U2VhdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcxJ1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBzcGVhayA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiBfdGhpcy5ydGMuY3VycmVudFNlYXQgKyAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwZWFraW5nOiAnMSdcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIlJDVXNlck9uU2VhdFNwZWFraW5nS2V5X1wiICsgX3RoaXMucnRjLmN1cnJlbnRTZWF0LFxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJzAnXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHNwZWFrID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IF90aGlzLnJ0Yy5jdXJyZW50U2VhdCArICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3BlYWtpbmc6ICcwJ1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnUkNVc2VyT25TZWF0U3BlYWtpbmdLZXlfJywgdGhpcy5ydGMuY3VycmVudFNlYXQpO1xuICAgICAgICAgICAgICAgIF90aGlzLmltLm1lc3NhZ2VVcGRhdGUoXCJSQzpWUkxSZWZyZXNoTXNnXCIsIGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIF90aGlzLmVtaXQoXCJzcGVha2luZ1N0YXR1c0NoZW5nZVwiLCBzcGVhayk7XG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLnNlYXRJbmZvTGlzdFtOdW1iZXIoc3BlYWsuaW5kZXgpXSkge1xuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLnNlYXRJbmZvTGlzdFtOdW1iZXIocGFybS5pbmRleCldLnNwZWFraW5nID0gcGFybS5zcGVha2luZztcbiAgICAgICAgICAgICAgICAgICAgaWYgKE51bWJlcihzcGVhay5zcGVha2luZykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNlYXRJbmZvTGlzdFtOdW1iZXIoc3BlYWsuaW5kZXgpXVsnc3BlYWtpbmcnXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zZWF0SW5mb0xpc3RbTnVtYmVyKHNwZWFrLmluZGV4KV1bJ3NwZWFraW5nJ10gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBSQ1ZvaWNlUm9vbUxpYkNsYXNzLnByb3RvdHlwZS5jb25uZWN0ID0gZnVuY3Rpb24gKHRva2VuKSB7XG4gICAgICAgIHRoaXMuaW0uY29ubmVjdCh0b2tlbik7XG4gICAgfTtcbiAgICBSQ1ZvaWNlUm9vbUxpYkNsYXNzLnByb3RvdHlwZS5yZWFkeUNoZWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT0gX2NvbmZpZ19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fLnNka1N0YXR1cy5yZWFkeSkge1xuICAgICAgICAgICAgX2xvZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18uZGVmYXVsdC5sb2coXCLlt7Lnu4/lsLHnu6pcIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pbXJlYWR5ICYmIHRoaXMucnRjcmVhZHkpIHsgLy/kuKTmqKHlnZflsLHnu6rmiqXkuIrlsYJyZWFkeVxuICAgICAgICAgICAgICAgIHRoaXMuZW1pdChcInJlYWR5XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBSQ1ZvaWNlUm9vbUxpYkNsYXNzLnByb3RvdHlwZS5jcmVhdGVBbmRKb2luUm9vbSA9IGZ1bmN0aW9uIChvcCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIuS4u+aSreWIm+W7uuW5tuWKoOWFpeaIv+mXtFwiLCBvcC5yb29tSWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ydGMuaXNBbmNob3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wLnJvb21UeXBlID09ICdsaXZlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucnRjLnJvb21UeXBlID0gJ2xpdmUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW0ucm9vbVR5cGUgPSAnbGl2ZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ydGMudmlkZW9Ob2RlID0gb3AudmlkZW9Ob2RlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucnRjLm1pbmlOb2RlID0gb3AubWluaU5vZGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5SQ1NlYXRJbmZvU2VhdFBhcnRQcmVmaXhLZXkgPSBcIkxJVkVfVklERU9fU0VBVF9JTkZPX1BSRV9cIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucnRjLmN1cnJlbnRTZWF0ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3Jvb21pZGNsaSA9IG9wLnJvb21JZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW0uam9pblJvb20oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvb21JZDogb3Aucm9vbUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvb21OYW1lOiBvcC5yb29tTmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYSA9IHRoaXM7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmdldExhdGVzdFNlYXRJbmZvKCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZWF0SW5mb0xpc3QgPSBfYi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgUkNWb2ljZVJvb21MaWJDbGFzcy5wcm90b3R5cGUuam9pblJvb20gPSBmdW5jdGlvbiAob3ApIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLliqDlhaXmiL/pl7Q6XCIsIG9wLnJvb21JZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhvcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3Aucm9vbVR5cGUgPT0gJ2xpdmUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ydGMucm9vbVR5cGUgPSAnbGl2ZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbS5yb29tVHlwZSA9ICdsaXZlJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJ0Yy52aWRlb05vZGUgPSBvcC52aWRlb05vZGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ydGMubWluaU5vZGUgPSBvcC5taW5pTm9kZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLlJDU2VhdEluZm9TZWF0UGFydFByZWZpeEtleSA9IFwiTElWRV9WSURFT19TRUFUX0lORk9fUFJFX1wiO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy/ljLrliIbmiL/pl7TnsbvlnotcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucnRjLmlzQW5jaG9yID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISh0eXBlb2Ygb3AgPT0gJ3N0cmluZycpKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuaW0uam9pblJvb20oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb29tSWQ6IG9wXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA0XTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmltLmpvaW5Sb29tKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb29tSWQ6IG9wLnJvb21JZFxuICAgICAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9sb2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fLmRlZmF1bHQuX2Vycm9yKCfliqDlhaXmiL/pl7TlpLHotKU6NzAwMDEnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Iuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2IubGFiZWwgPSA0O1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxlYXZlUm9vbUNvbnRyb2wgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLliqDlhaXmiJDlip9cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmltLmVudGVyUm9vbU1lc3NhZ2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3Jvb21pZGNsaSA9IG9wLnJvb21JZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hID0gdGhpcztcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZ2V0TGF0ZXN0U2VhdEluZm8oKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlYXRJbmZvTGlzdCA9IF9iLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBSQ1ZvaWNlUm9vbUxpYkNsYXNzLnByb3RvdHlwZS5sZWF2ZVJvb20gPSBmdW5jdGlvbiAocm9vbWlkKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpbmRleDtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubGVhdmVSb29tQ29udHJvbCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImxpdlwiKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sZWF2ZVJvb21Db250cm9sID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMubGVhdmVSb29tQ29udHJvbCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH0sIDEwMDApO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImxlYXZlcm9vbVwiLCByb29taWQpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLnNlYXRJbmZvTGlzdC5sZW5ndGg7IGluZGV4ICs9IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlYXRJbmZvTGlzdFtpbmRleF1bJ3VzZXJJZCddICYmIHRoaXMuc2VhdEluZm9MaXN0W2luZGV4XVsndXNlcklkJ10gPT0gdGhpcy5pbS51c2VySWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxlYXZlU2VhdChmYWxzZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbS5sZXZlUm9vbU1lc3NhZ2UoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJtc2dcIik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucnRjLmxlYXZlUm9vbShyb29taWQpO1xuICAgICAgICAgICAgICAgICAgICAvLyAuY2F0Y2goKGVycjogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vICAgICBsb2dlci5fZXJyb3IoJ+emu+W8gFJUQ+aIv+mXtOWksei0pTo3MDAxMCcpXG4gICAgICAgICAgICAgICAgICAgIC8vIH0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmltLmxlYXZlUm9vbShyb29taWQpO1xuICAgICAgICAgICAgICAgICAgICAvLyAuY2F0Y2goKGVycjogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vICAgICBsb2dlci5fZXJyb3IoJ+emu+W8gOaIv+mXtOWksei0pTo3MDAwMycpXG4gICAgICAgICAgICAgICAgICAgIC8vIH0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9yb29taWRjbGkgPSAnJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgUkNWb2ljZVJvb21MaWJDbGFzcy5wcm90b3R5cGUuZ2V0Um9vbUluZm8gPSBmdW5jdGlvbiAocm9vbWlkKSB7XG4gICAgICAgIHRoaXMuaW0uZ2V0Um9vbUluZm8ocm9vbWlkKTtcbiAgICB9O1xuICAgIFJDVm9pY2VSb29tTGliQ2xhc3MucHJvdG90eXBlLmZpbmRTZWF0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc2VhdEluZm9MaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoTnVtYmVyKHRoaXMuc2VhdEluZm9MaXN0W2ldLnN0YXR1cykgPT0gX2NvbmZpZ19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fLlJDU2VhdFN0YXR1cy5SQ1NlYXRTdGF0dXNFbXB0eSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiDmm7TmlrDmnKzlnLDkv6Hmga/lubbosIPnlKjmnKzlnLDmlrnms5VcbiAgICAgKi9cbiAgICAvLyB1cGRhdGVMb2NhbEluZm8oaW5mbyl7XG4gICAgLy8gICAgIGZvciAodmFyIGtleSBpbiBpbmZvKSB7XG4gICAgLy8gICAgIHN3aXRjaCAoa2V5KSB7XG4gICAgLy8gICAgICAgICBjYXNlIFwibXV0ZVwiOlxuICAgIC8vICAgICAgICAgICAgIGlmIChpbmZvLm11dGUpIHtcbiAgICAvLyAgICAgICAgICAgICAgICB0aGlzLnJ0Yy5tdXRlKClcbiAgICAvLyAgICAgICAgICAgICB9ZWxzZXtcbiAgICAvLyAgICAgICAgICAgICAgICAgdGhpcy5ydGMudW5tdXRlKCk7XG4gICAgLy8gICAgICAgICAgICAgfVxuICAgIC8vICAgICAgICAgICAgIGJyZWFrO1xuICAgIC8vICAgICAgICAgZGVmYXVsdDpcbiAgICAvLyAgICAgICAgICAgICBicmVhaztcbiAgICAvLyAgICAgfVxuICAgIC8vICB9XG4gICAgLy8gfVxuICAgIC8qKlxuICAgICog55So5oi35LiK6bqmXG4gICAgKlxuICAgICogQHBhcmFtIHNlYXRJbmRleCDpuqbkvY3luo/lj7dcbiAgICAqL1xuICAgIFJDVm9pY2VSb29tTGliQ2xhc3MucHJvdG90eXBlLmVudGVyU2VhdCA9IGZ1bmN0aW9uIChzZWF0SW5kZXgpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCLkuIrpuqbmk43kvZxcIiwgc2VhdEluZGV4KTtcbiAgICAgICAgY29uc29sZS5sb2coXCLlvZPliY3puqbkvY3kv6Hmga9cIiwgdGhpcy5zZWF0SW5mb0xpc3QpO1xuICAgICAgICB2YXIgdGFyZ2V0U2VhdEluZm87IC8v55uu5qCH6bqm5L2N5L+h5oGvXG4gICAgICAgIGlmICh0aGlzLnNlYXRJbmZvTGlzdC5sZW5ndGggPT0gc2VhdEluZGV4KSB7IC8v5pys5Zyw6bqm5L2N5pyq5pu05paw5pe255Sf5oiQ5LiA5Liq6buY6K6k6bqm5L2NXG4gICAgICAgICAgICB0YXJnZXRTZWF0SW5mbyA9IHRoaXMuc2VhdEluZm87XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0YXJnZXRTZWF0SW5mbyA9IHRoaXMuc2VhdEluZm9MaXN0W3NlYXRJbmRleF07XG4gICAgICAgICAgICBpZiAodGFyZ2V0U2VhdEluZm8uc3RhdHVzID09IF9jb25maWdfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXy5SQ1NlYXRTdGF0dXMuUkNTZWF0U3RhdHVzTG9ja2luZykgeyAvL+W9k+WJjem6puS9jeWtmOWcqOS4lOW3sumUgeWumlxuICAgICAgICAgICAgICAgIF9sb2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fLmRlZmF1bHQuX2Vycm9yKFwi6bqm5L2N5bey6ZSB5a6a5peg5rOV5LiK6bqmXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0YXJnZXRTZWF0SW5mby5zdGF0dXMgPT0gX2NvbmZpZ19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fLlJDU2VhdFN0YXR1cy5SQ1NlYXRTdGF0dXNVc2luZykgeyAvL+W9k+WJjem6puS9jeWtmOWcqOS4lOW3sumUgeWumlxuICAgICAgICAgICAgICAgIF9sb2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fLmRlZmF1bHQuX2Vycm9yKFwi6bqm5L2N5LiK5bey57uP5pyJ5Lq65LqG5peg5rOV5LiK6bqmXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnJvb21JbmZvICYmIHRoaXMucm9vbUluZm8uc2VhdENvdW50ICYmIChzZWF0SW5kZXggPj0gdGhpcy5yb29tSW5mby5zZWF0Q291bnQpKSB7XG4gICAgICAgICAgICAgICAgX2xvZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18uZGVmYXVsdC5fZXJyb3IoJ+m6puS9jeS4jeWtmOWcqCDnm67moIfpuqbkvY3lpKfkuo7mnIDlpKfpuqbkvY0nKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc2VhdEluZm9MaXN0Lmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VhdEluZm9MaXN0W2ldWyd1c2VySWQnXSAmJiB0aGlzLnNlYXRJbmZvTGlzdFtpXVsndXNlcklkJ10gPT0gdGhpcy5pbS51c2VySWQpIHtcbiAgICAgICAgICAgICAgICAgICAgX2xvZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18uZGVmYXVsdC5sb2coJ+eUqOaIt+W3sue7j+WcqOm6puS9jeS4ijo3MDAwMycpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUubG9nKFwi5LiK6bqmXCIpO1xuICAgICAgICB0YXJnZXRTZWF0SW5mby51c2VySWQgPSB0aGlzLmltLnVzZXJJZDtcbiAgICAgICAgdGFyZ2V0U2VhdEluZm8uc3RhdHVzID0gX2NvbmZpZ19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fLlJDU2VhdFN0YXR1cy5SQ1NlYXRTdGF0dXNVc2luZztcbiAgICAgICAgdGFyZ2V0U2VhdEluZm8uaW5kZXggPSBzZWF0SW5kZXg7XG4gICAgICAgIGNvbnNvbGUubG9nKFwi5b2T5YmN5pu05pawXCIsIHRoaXMuUkNTZWF0SW5mb1NlYXRQYXJ0UHJlZml4S2V5ICsgc2VhdEluZGV4KTtcbiAgICAgICAgdGhpcy5pbS5zZWF0SW5mb1VwZGF0ZSh0aGlzLlJDU2VhdEluZm9TZWF0UGFydFByZWZpeEtleSArIHNlYXRJbmRleCwgdGFyZ2V0U2VhdEluZm8pO1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhcIuabtOaWsOm6puS9jeS/oeaBr1wiLCB0YXJnZXRTZWF0SW5mbyk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLnNlYXRJbmZvTGlzdFtzZWF0SW5kZXhdWyd1c2VySWQnXSA9IHRoaXMuaW0udXNlcklkO1xuICAgICAgICAgICAgdGhpcy5zZWF0SW5mb0xpc3Rbc2VhdEluZGV4XVsnc3RhdHVzJ10gPSBOdW1iZXIoX2NvbmZpZ19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fLlJDU2VhdFN0YXR1cy5SQ1NlYXRTdGF0dXNVc2luZyk7XG4gICAgICAgICAgICB0aGlzLmltLnNlYXRJbmRleCA9IHNlYXRJbmRleDtcbiAgICAgICAgICAgIHRoaXMucnRjLmN1cnJlbnRTZWF0ID0gc2VhdEluZGV4O1xuICAgICAgICAgICAgdGhpcy5ydGMuZW50ZXJTZWF0KHNlYXRJbmRleCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCLmmK/lkKbpnZnpn7Pmo4DmtYtcIiwgdGFyZ2V0U2VhdEluZm8ubXV0ZSlcbiAgICAgICAgICAgICAgICAvLyBpZiAodGFyZ2V0U2VhdEluZm8ubXV0ZSkge1xuICAgICAgICAgICAgICAgIC8vICAgICB0aGlzLnJ0Yy5tdXRlKCk7XG4gICAgICAgICAgICAgICAgLy8gfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyAgICAgdGhpcy5ydGMudW5tdXRlKCk7XG4gICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgX2xvZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18uZGVmYXVsdC5fZXJyb3IoJ+acquefpemUmeivrzotMScsIGVycik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICog55So5oi35LiL6bqmXG4gICAgKiDms6jmhI/vvJrlkowgZW50ZXJTZWF0KCnmiJDlr7nosIPnlKhcbiAgICAqXG4gICAgKi9cbiAgICBSQ1ZvaWNlUm9vbUxpYkNsYXNzLnByb3RvdHlwZS5sZWF2ZVNlYXQgPSBmdW5jdGlvbiAoaXNwYXNzaXZlLCBpc0xlYXZlUm9vbSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhcIuS4i+m6puaTjeS9nFwiKTtcbiAgICAgICAgaWYgKGlzTGVhdmVSb29tKSB7XG4gICAgICAgICAgICB0aGlzLnJ0Yy5sZWF2ZVNlYXQodHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJ0Yy5sZWF2ZVNlYXQoZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc3Bhc3NpdmUpIHsgLy/ooqvliqjkuIvpuqbkuI3mk43kvZzov5znqIvmlbDmja5cbiAgICAgICAgICAgIF9sb2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fLmRlZmF1bHQubG9nKFwi6KKr5Yqo5LiL6bqmXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBpbmRleCA9IG51bGw7XG4gICAgICAgIHZhciBoYXZlID0gZmFsc2U7XG4gICAgICAgIHZhciBzdGF0dXMgPSBOdW1iZXIoX2NvbmZpZ19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fLlJDU2VhdFN0YXR1cy5SQ1NlYXRTdGF0dXNFbXB0eSk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zZWF0SW5mb0xpc3QubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnNlYXRJbmZvTGlzdFtpXS51c2VySWQgPT0gdGhpcy5pbS51c2VySWQpIHtcbiAgICAgICAgICAgICAgICBpbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgaGF2ZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFoYXZlKSB7XG4gICAgICAgICAgICBfbG9nZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXy5kZWZhdWx0Ll9lcnJvcign55So5oi35LiN5Zyo6bqm5L2N5LiKOjcwMDA0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSB7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiBzdGF0dXMsXG4gICAgICAgICAgICAgICAgbXV0ZTogdGhpcy5zZWF0SW5mb0xpc3RbaW5kZXhdLm11dGUsXG4gICAgICAgICAgICAgICAgc3BlYWtpbmc6IHRoaXMuc2VhdEluZm9MaXN0W2luZGV4XS5zcGVha2luZyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLlJDU2VhdEluZm9TZWF0UGFydFByZWZpeEtleSArIGluZGV4LCAn5LiL6bqm5pON5L2c77yaJywgdmFsdWUpO1xuICAgICAgICAgICAgaWYgKHRoaXMucnRjLnJvb21UeXBlID09ICdsaXZlJykge1xuICAgICAgICAgICAgICAgIHZhbHVlID0ge1xuICAgICAgICAgICAgICAgICAgICBcInVzZXJJZFwiOiBcIlwiLFxuICAgICAgICAgICAgICAgICAgICBcIm11dGVcIjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIFwidXNlckVuYWJsZVZpZGVvXCI6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIFwiZnJhbWVcIjogXCJ7ezAuNjgzMzAwMDAwMDAwMDAwMDIsIDAuNjkwNTk5OTk5OTk5OTk5OTl9LCB7MC4yOTk5OTk5OTk5OTk5OTk5OSwgMC4xNjg4MDAwMDAwMDAwMDAwMX19XCIsXG4gICAgICAgICAgICAgICAgICAgIFwibG9ja1wiOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgXCJ1c2VyRW5hYmxlQXVkaW9cIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgXCJpbmRleFwiOiAxXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaW0uc2VhdEluZm9VcGRhdGUodGhpcy5SQ1NlYXRJbmZvU2VhdFBhcnRQcmVmaXhLZXkgKyBpbmRleCwgdmFsdWUpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIF90aGlzLnNlYXRJbmZvTGlzdFtpbmRleF1bJ3N0YXR1cyddID0gc3RhdHVzO1xuICAgICAgICAgICAgICAgIF90aGlzLnNlYXRJbmZvTGlzdFtpbmRleF1bJ211dGUnXSA9IF90aGlzLnNlYXRJbmZvTGlzdFtpbmRleF0ubXV0ZTtcbiAgICAgICAgICAgICAgICBfdGhpcy5zZWF0SW5mb0xpc3RbaW5kZXhdWydzcGVha2luZyddID0gX3RoaXMuc2VhdEluZm9MaXN0W2luZGV4XS5zcGVha2luZztcbiAgICAgICAgICAgICAgICAvL2RlbGV0ZSB0aGlzLnNlYXRJbmZvTGlzdFtpbmRleF1bJ3VzZXJJZCddXG4gICAgICAgICAgICAgICAgX3RoaXMuc2VhdEluZm9MaXN0W2luZGV4XVsndXNlcklkJ10gPSAnJztcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCd0aGlzLnNlYXRJbmZvTGlzdCcsIHRoaXMuc2VhdEluZm9MaXN0KTtcbiAgICAgICAgICAgICAgICBfbG9nZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXy5kZWZhdWx0LmxvZygn5pON5L2c5oiQ5YqfOjcwMDAwJyk7XG4gICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX2xvZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18uZGVmYXVsdC5fZXJyb3IoJ+acquefpemUmeivrzotMScpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICog5bCG5oyH5a6a6bqm5L2N5LiL6bqmXG4gICAgKlxuICAgICogQHBhcmFtIHVzZXJJZCAgIOeUqOaItyBJZFxuICAgICovXG4gICAgUkNWb2ljZVJvb21MaWJDbGFzcy5wcm90b3R5cGUua2lja1VzZXJGcm9tU2VhdCA9IGZ1bmN0aW9uICh1c2VySWQpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGluZGV4ID0gbnVsbDtcbiAgICAgICAgdmFyIGhhdmUgPSBmYWxzZTtcbiAgICAgICAgdmFyIGFyciA9IFtdO1xuICAgICAgICBpZiAodXNlcklkID09IHRoaXMuaW0udXNlcklkKSB7XG4gICAgICAgICAgICBfbG9nZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXy5kZWZhdWx0Ll9lcnJvcign5LiN6IO96Lii6Ieq5bex5LiL6bqmOjcwMDA5XHQnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc2VhdEluZm9MaXN0Lmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiaWQ6XCIsdGhpcy5zZWF0SW5mb0xpc3RbaV0udXNlcklkKTtcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJpZGNoZWNrZDpcIix1c2VySWQpO1xuICAgICAgICAgICAgaWYgKHRoaXMuc2VhdEluZm9MaXN0W2ldLnVzZXJJZCA9PSB1c2VySWQpIHtcbiAgICAgICAgICAgICAgICBpbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgaGF2ZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFoYXZlKSB7XG4gICAgICAgICAgICBfbG9nZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXy5kZWZhdWx0Ll9lcnJvcign55So5oi35LiN5Zyo6bqm5LiKOi0xJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHZhbHVlID0ge1xuICAgICAgICAgICAgc3RhdHVzOiAwLFxuICAgICAgICAgICAgbXV0ZTogdGhpcy5zZWF0SW5mb0xpc3RbaW5kZXhdLm11dGUsXG4gICAgICAgICAgICBzcGVha2luZzogdGhpcy5zZWF0SW5mb0xpc3RbaW5kZXhdLnNwZWFraW5nLFxuICAgICAgICB9O1xuICAgICAgICBhcnIucHVzaCh0aGlzLmltLnNlYXRJbmZvVXBkYXRlKHRoaXMuUkNTZWF0SW5mb1NlYXRQYXJ0UHJlZml4S2V5ICsgaW5kZXgsIHZhbHVlKSk7XG4gICAgICAgIFByb21pc2UuYWxsKGFycikudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAvLyB0aGlzLnNlYXRJbmZvTGlzdFtpbmRleF0gPSB7XG4gICAgICAgICAgICAvLyAgICAgc3RhdHVzOiAwLFxuICAgICAgICAgICAgLy8gICAgIG11dGU6IHRoaXMuc2VhdEluZm9MaXN0W2luZGV4XS5tdXRlLFxuICAgICAgICAgICAgLy8gICAgIHNwZWFraW5nOiB0aGlzLnNlYXRJbmZvTGlzdFtpbmRleF0uc3BlYWtpbmcsXG4gICAgICAgICAgICAvLyB9O1xuICAgICAgICAgICAgX3RoaXMuc2VhdEluZm9MaXN0W2luZGV4XVsnc3RhdHVzJ10gPSAwO1xuICAgICAgICAgICAgX3RoaXMuc2VhdEluZm9MaXN0W2luZGV4XVsnbXV0ZSddID0gX3RoaXMuc2VhdEluZm9MaXN0W2luZGV4XS5tdXRlO1xuICAgICAgICAgICAgX3RoaXMuc2VhdEluZm9MaXN0W2luZGV4XVsnc3BlYWtpbmcnXSA9IF90aGlzLnNlYXRJbmZvTGlzdFtpbmRleF0uc3BlYWtpbmc7XG4gICAgICAgICAgICBkZWxldGUgX3RoaXMuc2VhdEluZm9MaXN0W2luZGV4XVsndXNlcklkJ107XG4gICAgICAgICAgICAvLyB0aGlzLnNlYXRJbmZvTGlzdFtpbmRleF1bJ3VzZXJJZCddID0gJyc7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygndGhpcy5zZWF0SW5mb0xpc3QnLCB0aGlzLnNlYXRJbmZvTGlzdCk7XG4gICAgICAgICAgICBfbG9nZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXy5kZWZhdWx0LmxvZygn5pON5L2c5oiQ5YqfOjcwMDAwJyk7XG4gICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF9sb2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fLmRlZmF1bHQuX2Vycm9yKCfmnKrnn6XplJnor686LTEnKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAqIOeUqOaIt+i3s+m6plxuICAgICog5rOo5oSP77ya5Zyo55So5oi35bey57uP5Zyo6bqm5L2N5oOz5YiH5o2i6bqm5L2N5pe26LCD55SoXG4gICAgKlxuICAgICogQHBhcmFtIHNlYXRJbmRleCDpnIDopoHot7PovaznmoTpuqbkvY3luo/lj7dcbiAgICAqIEBwYXJhbSBjYWxsYmFjayAg57uT5p6c5Zue6LCDXG4gICAgKi9cbiAgICBSQ1ZvaWNlUm9vbUxpYkNsYXNzLnByb3RvdHlwZS5zd2l0Y2hTZWF0VG8gPSBmdW5jdGlvbiAoc2VhdEluZGV4KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCd0aGlzLnNlYXRJbmZvTGlzdFtzZWF0SW5kZXhdJywgdGhpcy5zZWF0SW5mb0xpc3QpO1xuICAgICAgICB2YXIgYXJyID0gW107XG4gICAgICAgIGlmICghdGhpcy5zZWF0SW5mb0xpc3Rbc2VhdEluZGV4XSkge1xuICAgICAgICAgICAgX2xvZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18uZGVmYXVsdC5fZXJyb3IoJ+m6puS9jeS4jeWtmOWcqCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChOdW1iZXIodGhpcy5zZWF0SW5mb0xpc3Rbc2VhdEluZGV4XS5zdGF0dXMpID09IF9jb25maWdfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXy5SQ1NlYXRTdGF0dXMuUkNTZWF0U3RhdHVzTG9ja2luZykge1xuICAgICAgICAgICAgX2xvZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18uZGVmYXVsdC5fZXJyb3IoXCLpuqbkvY3ooqvplIHlrprkuI3og73ot7PpuqZcIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGluZGV4ID0gbnVsbDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnNlYXRJbmZvTGlzdC5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc2VhdEluZm9MaXN0W2ldLnVzZXJJZCA9PT0gdGhpcy5pbS51c2VySWQpIHtcbiAgICAgICAgICAgICAgICBpbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluZGV4ID09PSBudWxsKSB7XG4gICAgICAgICAgICBfbG9nZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXy5kZWZhdWx0Ll9lcnJvcign55So5oi35LiN5Zyo6bqm5L2N5LiKOjcwMDA0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuc2VhdEluZm9MaXN0W3NlYXRJbmRleF1bJ3VzZXJJZCddKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlT2xkID0ge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IDAsXG4gICAgICAgICAgICAgICAgICAgIG11dGU6IHRoaXMuc2VhdEluZm9MaXN0W2luZGV4XS5tdXRlLFxuICAgICAgICAgICAgICAgICAgICBzcGVha2luZzogdGhpcy5zZWF0SW5mb0xpc3RbaW5kZXhdLnNwZWFraW5nLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgLy8gY29uc3QgdmFsdWVOZXcgPSB7XG4gICAgICAgICAgICAgICAgLy8gICAgIC4uLnRoaXMuc2VhdEluZm9MaXN0W3NlYXRJbmRleF0sXG4gICAgICAgICAgICAgICAgLy8gICAgIHN0YXR1czogMSxcbiAgICAgICAgICAgICAgICAvLyAgICAgdXNlcklkOiB0aGlzLmltLnVzZXJJZFxuICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgICAgICAvLyBhcnIucHVzaChcbiAgICAgICAgICAgICAgICAvLyAgICAgdGhpcy5pbS5zZWF0SW5mb1VwZGF0ZSh0aGlzLlJDU2VhdEluZm9TZWF0UGFydFByZWZpeEtleSArIGluZGV4LCB2YWx1ZU9sZCksXG4gICAgICAgICAgICAgICAgLy8gICAgIHRoaXMuaW0uc2VhdEluZm9VcGRhdGUodGhpcy5SQ1NlYXRJbmZvU2VhdFBhcnRQcmVmaXhLZXkgKyBzZWF0SW5kZXgsIHZhbHVlTmV3KVxuICAgICAgICAgICAgICAgIC8vIClcbiAgICAgICAgICAgICAgICAvLyBQcm9taXNlLmFsbChhcnIpLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vICAgICB0aGlzLnNlYXRJbmZvTGlzdFtpbmRleF0gPSB2YWx1ZU9sZFxuICAgICAgICAgICAgICAgIC8vICAgICB0aGlzLnNlYXRJbmZvTGlzdFtzZWF0SW5kZXhdID0gdmFsdWVOZXdcbiAgICAgICAgICAgICAgICAvLyAgICAgbG9nZXIubG9nKCfmk43kvZzmiJDlip86NzAwMDAnKVxuICAgICAgICAgICAgICAgIC8vIH0pLmNhdGNoKCgpID0+IHtcbiAgICAgICAgICAgICAgICAvLyAgICAgbG9nZXIubG9nKCfmnKrnn6XplJnor686LTEnKVxuICAgICAgICAgICAgICAgIC8vIH0pXG4gICAgICAgICAgICAgICAgdGhpcy5pbS5zZWF0SW5mb1VwZGF0ZSh0aGlzLlJDU2VhdEluZm9TZWF0UGFydFByZWZpeEtleSArIGluZGV4LCB2YWx1ZU9sZCkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuc2VhdEluZm9MaXN0W2luZGV4XSA9IHZhbHVlT2xkXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnNlYXRJbmZvTGlzdFtpbmRleF1bJ3N0YXR1cyddID0gMDtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2VhdEluZm9MaXN0W2luZGV4XVsnbXV0ZSddID0gX3RoaXMuc2VhdEluZm9MaXN0W2luZGV4XS5tdXRlO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5zZWF0SW5mb0xpc3RbaW5kZXhdWydzcGVha2luZyddID0gX3RoaXMuc2VhdEluZm9MaXN0W2luZGV4XS5zcGVha2luZztcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIF90aGlzLnNlYXRJbmZvTGlzdFtpbmRleF1bJ3VzZXJJZCddO1xuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLnNlYXRJbmZvTGlzdFtpbmRleF1bJ3VzZXJJZCddID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIF9sb2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fLmRlZmF1bHQubG9nKCfmk43kvZzmiJDlip86NzAwMDAnKTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZW50ZXJTZWF0KHNlYXRJbmRleCk7XG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBfbG9nZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXy5kZWZhdWx0Ll9lcnJvcign5pyq55+l6ZSZ6K+vOi0xJyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWF0SW5mb0xpc3Rbc2VhdEluZGV4XS51c2VySWQgPT0gdGhpcy5pbS51c2VySWQpIHtcbiAgICAgICAgICAgICAgICAgICAgX2xvZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18uZGVmYXVsdC5fZXJyb3IoJ+eUqOaIt+i3s+m6pueahOm6puS9jeWSjOS5i+WJjeeahOS4gOagtzo3MDAwNScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgX2xvZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18uZGVmYXVsdC5fZXJyb3IoJ+m6puS9jeS4jeaYr+epuue9rueKtuaAgTo3MDAwNicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAqIOaKseeUqOaIt+S4ium6plxuICAgKlxuICAgKiBAcGFyYW0gdXNlcklkICAg55So5oi3IElkXG4gICAqL1xuICAgIFJDVm9pY2VSb29tTGliQ2xhc3MucHJvdG90eXBlLnBpY2tVc2VyVG9TZWF0ID0gZnVuY3Rpb24gKHVzZXJJZCkge1xuICAgICAgICB2YXIgdmFsdWUgPSB7XG4gICAgICAgICAgICAvLyDloavlhpnlvIDlj5HogIXlrprkuYnnmoTmtojmga/lhoXlrrlcbiAgICAgICAgICAgIGNvbnRlbnQ6IFwiUkNQaWNrZXJVc2VyU2VhdENvbnRlbnRcIixcbiAgICAgICAgICAgIGludml0YXRpb25JZDogXCJmOWU2NzY1Yi0zMDRkLTQ1MWEtYmU5MS0yYmI5MzYxNzU4ODhcIixcbiAgICAgICAgICAgIHNlbmRVc2VySWQ6IHRoaXMuaW0udXNlcklkLFxuICAgICAgICAgICAgdGFyZ2V0SWQ6IHVzZXJJZCxcbiAgICAgICAgICAgIHR5cGU6IDAsXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLmltLnJvb21UeXBlID0gJ2xpdmUnKSB7XG4gICAgICAgICAgICBpZiAodXNlcklkID09IHRoaXMuaW0udXNlcklkKSB7XG4gICAgICAgICAgICAgICAgX2xvZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18uZGVmYXVsdC5fZXJyb3IoJ+S4jeiDveaKseiHquW3seS4ium6pjo3MDAwNycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIHBtc2cgPSBuZXcgdGhpcy5pbS5yZWdNc2coe1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIlJPT01fQ09NTUFORF9JTlZJVEFUSU9OXCIsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IFwiTElWRV9WSURFT19JTlZJVEFUSU9OX05PUk1BTFwiICsgdGhpcy5pbS51c2VySWQgKyBcIl9fUkNMVl9fMVwiLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuaW0uY2hhdFJvb20uc2VuZE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICBjb252ZXJzYXRpb25UeXBlOiB0aGlzLmltLmNoYXRSb29tLkNvbnZlcnNhdGlvblR5cGUuUFJJVkFURSxcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0SWQ6IHVzZXJJZFxuICAgICAgICAgICAgICAgIH0sIHBtc2cpLnRoZW4oZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+WPkemAgemCgOivt+S4ium6pua2iOaBr+aIkOWKnycsIG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgX2xvZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18uZGVmYXVsdC5fZXJyb3IoJ+WPkemAgeaKsem6puivt+axguWksei0pTo3MDAwOCcpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICAvLyB0aGlzLmltLm1lc3NhZ2VVcGRhdGUoXCJSQzpDbWRNc2dcIiwgdmFsdWUpLnRoZW4oKG1hc3NhZ2U6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgIC8vICAgICBsb2dlci5sb2coJ+aTjeS9nOaIkOWKnzo3MDAwMCcpO1xuICAgICAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhcIuWPkemAgemCgOivt+aIkOWKn1wiLCBtYXNzYWdlKTtcbiAgICAgICAgICAgICAgICAvLyB9KS5jYXRjaCgoZXJyOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAvLyAgICAgbG9nZXIuX2Vycm9yKCflj5HpgIHmirHpuqbor7fmsYLlpLHotKU6NzAwMDgnKTtcbiAgICAgICAgICAgICAgICAvLyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICh1c2VySWQgPT0gdGhpcy5pbS51c2VySWQpIHtcbiAgICAgICAgICAgICAgICBfbG9nZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXy5kZWZhdWx0Ll9lcnJvcign5LiN6IO95oqx6Ieq5bex5LiK6bqmOjcwMDA3Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmltLm1lc3NhZ2VVcGRhdGUoXCJSQzpWUkxJbnZpdGVNc2dcIiwgdmFsdWUpLnRoZW4oZnVuY3Rpb24gKG1hc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgX2xvZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18uZGVmYXVsdC5sb2coJ+aTjeS9nOaIkOWKnzo3MDAwMCcpO1xuICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgX2xvZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18uZGVmYXVsdC5fZXJyb3IoJ+WPkemAgeaKsem6puivt+axguWksei0pTo3MDAwOCcpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAqIOWwhueUqOaIt+i4ouWHuuaIv+mXtFxuICAgICpcbiAgICAqIEBwYXJhbSB1c2VySWQgICDnlKjmiLcgSWRcbiAgICAqL1xuICAgIFJDVm9pY2VSb29tTGliQ2xhc3MucHJvdG90eXBlLmtpY2tVc2VyRnJvbVJvb20gPSBmdW5jdGlvbiAodXNlcklkKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IHtcbiAgICAgICAgICAgIC8vIOWhq+WGmeW8gOWPkeiAheWumuS5ieeahOa2iOaBr+WGheWuuVxuICAgICAgICAgICAgY29udGVudDogXCJSQ0tpY2tVc2VyT3V0Um9vbUNvbnRlbnRcIixcbiAgICAgICAgICAgIGludml0YXRpb25JZDogXCJ5b3VyUmFuZG9tU3RyaW5nXCIgKyBNYXRoLnJhbmRvbSgpLFxuICAgICAgICAgICAgc2VuZFVzZXJJZDogdGhpcy5pbS51c2VySWQsXG4gICAgICAgICAgICB0YXJnZXRJZDogdXNlcklkLFxuICAgICAgICAgICAgdHlwZTogMCxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHVzZXJJZCA9PSB0aGlzLmltLnVzZXJJZCkge1xuICAgICAgICAgICAgX2xvZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18uZGVmYXVsdC5fZXJyb3IoJ+acquefpemUmeivrzotMScpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5pbS5tZXNzYWdlVXBkYXRlKFwiUkM6VlJMSW52aXRlTXNnXCIsIHZhbHVlKS50aGVuKGZ1bmN0aW9uIChtYXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgX2xvZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18uZGVmYXVsdC5sb2coJ+aTjeS9nOaIkOWKnzo3MDAwMCcpO1xuICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgIF9sb2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fLmRlZmF1bHQuX2Vycm9yKCflj5HpgIHkv6Hmga/lpLHotKU6NzAwMjMnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAqIOWwhuafkOS4qum6puS9jemdmemfs1xuICAgICpcbiAgICAqIEBwYXJhbSBzZWF0SW5kZXgg6bqm5L2N5bqP5Y+3XG4gICAgKiBAcGFyYW0gaXNNdXRlICAgIOaYr+WQpumdmemfs1xuICAgICovXG4gICAgUkNWb2ljZVJvb21MaWJDbGFzcy5wcm90b3R5cGUubXV0ZVNlYXQgPSBmdW5jdGlvbiAoc2VhdEluZGV4LCBpc211dGUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGFyciA9IFtdO1xuICAgICAgICB2YXIgdmFsdWUgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgdGhpcy5zZWF0SW5mb0xpc3Rbc2VhdEluZGV4XSksIHsgbXV0ZTogaXNtdXRlIH0pO1xuICAgICAgICBhcnIucHVzaCh0aGlzLmltLnNlYXRJbmZvVXBkYXRlKHRoaXMuUkNTZWF0SW5mb1NlYXRQYXJ0UHJlZml4S2V5ICsgc2VhdEluZGV4LCB2YWx1ZSkpO1xuICAgICAgICBQcm9taXNlLmFsbChhcnIpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgX2xvZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18uZGVmYXVsdC5sb2coJ+aTjeS9nOaIkOWKnzo3MDAwMCcpO1xuICAgICAgICAgICAgaWYgKGlzbXV0ZSkge1xuICAgICAgICAgICAgICAgIF90aGlzLnJ0Yy5tdXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5ydGMudW5tdXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zb2xlLmxvZygndGhpcy5zZWF0SW5mb0xpc3Rbc2VhdEluZGV4XScsIF90aGlzLnNlYXRJbmZvTGlzdFtzZWF0SW5kZXhdKTtcbiAgICAgICAgICAgIC8vIHRoaXMuc2VhdEluZm9MaXN0W3NlYXRJbmRleF0gPSB2YWx1ZVxuICAgICAgICAgICAgX3RoaXMuc2VhdEluZm9MaXN0W3NlYXRJbmRleF1bJ211dGUnXSA9IGlzbXV0ZTtcbiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX2xvZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18uZGVmYXVsdC5fZXJyb3IoJ+acquefpemUmeivrzotMScpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICog5bCG5p+Q5Liq6bqm5L2N6ZSB5a6aXG4gICAgKlxuICAgICogQHBhcmFtIHNlYXRJbmRleCDpuqbkvY3luo/lj7dcbiAgICAqIEBwYXJhbSBpc0xvY2tlZCAg5piv5ZCm6ZSB6bqm5L2NXG4gICAgKi9cbiAgICBSQ1ZvaWNlUm9vbUxpYkNsYXNzLnByb3RvdHlwZS5sb2NrU2VhdCA9IGZ1bmN0aW9uIChzZWF0SW5kZXgsIGlzTG9ja2VkKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICghdGhpcy5zZWF0SW5mb0xpc3Rbc2VhdEluZGV4XSkge1xuICAgICAgICAgICAgX2xvZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18uZGVmYXVsdC5fZXJyb3IoJ+m6puS9jeS4jeWtmOWcqCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBhcnIgPSBbXTtcbiAgICAgICAgdmFyIGlzTG9jayA9IGlzTG9ja2VkID8gMiA6IDA7XG4gICAgICAgIC8vIGxldCB2YWx1ZSA9IG51bGxcbiAgICAgICAgLy8gaWYgKGlzTG9ja2VkKSB7XG4gICAgICAgIC8vIGlmICh0aGlzLnNlYXRJbmZvTGlzdFtzZWF0SW5kZXhdWyd1c2VySWQnXSkge1xuICAgICAgICB2YXIgdmFsdWUgPSB7XG4gICAgICAgICAgICBtdXRlOiB0aGlzLnNlYXRJbmZvTGlzdFtzZWF0SW5kZXhdLm11dGUsXG4gICAgICAgICAgICBzcGVha2luZzogdGhpcy5zZWF0SW5mb0xpc3Rbc2VhdEluZGV4XS5zcGVha2luZyxcbiAgICAgICAgICAgIHN0YXR1czogaXNMb2NrLFxuICAgICAgICAgICAgdXNlcklkOiAnJ1xuICAgICAgICB9O1xuICAgICAgICAvLyB9IGVsc2Uge1xuICAgICAgICAvLyAgICAgdmFsdWUgPSB7XG4gICAgICAgIC8vICAgICAgICAgLi4udGhpcy5zZWF0SW5mb0xpc3Rbc2VhdEluZGV4XSxcbiAgICAgICAgLy8gICAgICAgICBzdGF0dXM6IGlzTG9jayxcbiAgICAgICAgLy8gICAgIH07XG4gICAgICAgIC8vIH1cbiAgICAgICAgLy8gfSBlbHNlIHtcbiAgICAgICAgLy8gICAgIHZhbHVlID0ge1xuICAgICAgICAvLyAgICAgICAgIG11dGU6IHRoaXMuc2VhdEluZm9MaXN0W3NlYXRJbmRleF0ubXV0ZSxcbiAgICAgICAgLy8gICAgICAgICBzcGVha2luZzogdGhpcy5zZWF0SW5mb0xpc3Rbc2VhdEluZGV4XS5zcGVha2luZyxcbiAgICAgICAgLy8gICAgICAgICBzdGF0dXM6IGlzTG9jayxcbiAgICAgICAgLy8gICAgICAgICB1c2VySWQ6ICcnXG4gICAgICAgIC8vICAgICB9O1xuICAgICAgICAvLyB9XG4gICAgICAgIGFyci5wdXNoKHRoaXMuaW0uc2VhdEluZm9VcGRhdGUodGhpcy5SQ1NlYXRJbmZvU2VhdFBhcnRQcmVmaXhLZXkgKyBzZWF0SW5kZXgsIHZhbHVlKSk7XG4gICAgICAgIFByb21pc2UuYWxsKGFycikudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICBfdGhpcy5zZWF0SW5mb0xpc3Rbc2VhdEluZGV4XVsnc3RhdHVzJ10gPSBpc0xvY2s7XG4gICAgICAgICAgICBfdGhpcy5zZWF0SW5mb0xpc3Rbc2VhdEluZGV4XVsnbXV0ZSddID0gX3RoaXMuc2VhdEluZm9MaXN0W3NlYXRJbmRleF0ubXV0ZTtcbiAgICAgICAgICAgIF90aGlzLnNlYXRJbmZvTGlzdFtzZWF0SW5kZXhdWydzcGVha2luZyddID0gX3RoaXMuc2VhdEluZm9MaXN0W3NlYXRJbmRleF0uc3BlYWtpbmc7XG4gICAgICAgICAgICBkZWxldGUgX3RoaXMuc2VhdEluZm9MaXN0W3NlYXRJbmRleF1bJ3VzZXJJZCddO1xuICAgICAgICAgICAgLy8gdGhpcy5zZWF0SW5mb0xpc3Rbc2VhdEluZGV4XVsndXNlcklkJ10gPSAnJztcbiAgICAgICAgICAgIF9sb2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fLmRlZmF1bHQubG9nKCfmk43kvZzmiJDlip86NzAwMDAnKTtcbiAgICAgICAgICAgIC8vIHRoaXMuc2VhdEluZm9MaXN0W3NlYXRJbmRleF0gPSB2YWx1ZTtcbiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX2xvZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18uZGVmYXVsdC5fZXJyb3IoJ+acquefpemUmeivrzotMScpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgKiDorr7nva7miL/pl7Tkv6Hmga/vvIzmiL/pl7TnmoRpZOW/hemhu+S4juW9k+WJjeaIv+mXtGlk5LiA6Ie0XG4gICAqXG4gICAqIEBwYXJhbSByb29tSW5mbyDkv67mlLnnmoTmiL/pl7Tkv6Hmga9cbiAgICovXG4gICAgUkNWb2ljZVJvb21MaWJDbGFzcy5wcm90b3R5cGUuc2V0Um9vbUluZm8gPSBmdW5jdGlvbiAocm9vbUluZm8pIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coXCJyb29taW5mb1wiLCByb29tSW5mbywgdGhpcy5yb29tSW5mbyk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwidGhpcy5yb29tSW5mb1wiLCB0aGlzLnJvb21JbmZvKTtcbiAgICAgICAgLy8gc2VhdENvdW50XG4gICAgICAgIGlmIChOdW1iZXIocm9vbUluZm8uc2VhdENvdW50KSAhPSBOdW1iZXIodGhpcy5yb29tSW5mby5zZWF0Q291bnQpKSB7IC8v5bqn5L2N5pWw5Y+R55Sf5LqG5Y+Y5pu0XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIuW6p+S9jeWPmOabtFwiKTtcbiAgICAgICAgICAgIHRoaXMuaW0uc2V0TmV3Um9vbShyb29tSW5mbyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJvb21JbmZvLmlzTXV0ZUFsbCAhPSB0aGlzLnJvb21JbmZvLmlzTXV0ZUFsbCkgeyAvL+WwhuaJgOaciem6puS9jemdmemfs+aJk+W8gOaIluiAheWFs+mXrVxuICAgICAgICAgICAgY29uc29sZS5sb2coXCLlhajpuqbpnZnpn7Plj5jmm7RcIik7XG4gICAgICAgICAgICB0aGlzLm11dGVPdGhlclNlYXRzKHJvb21JbmZvLmlzTXV0ZUFsbCk7XG4gICAgICAgICAgICAvLyB0aGlzLmltLnNlYXRJbmZvVXBkYXRlKFwiUkNSb29tSW5mb0tleVwiLCByb29tSW5mbylcbiAgICAgICAgfVxuICAgICAgICBpZiAocm9vbUluZm8uaXNMb2NrQWxsICE9IHRoaXMucm9vbUluZm8uaXNMb2NrQWxsKSB7IC8v5bCG5omA5pyJ6bqm5L2N5omA5Y2W5oiW6ICF6Kej6Zmk6ZSB6bqmXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIuWFqOm6pumUgem6puWPmOabtFwiKTtcbiAgICAgICAgICAgIC8vIHRoaXMuaW0uc2VhdEluZm9VcGRhdGUoXCJSQ1Jvb21JbmZvS2V5XCIsIHJvb21JbmZvKVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuaW0uc2VhdEluZm9VcGRhdGUoXCJSQ1Jvb21JbmZvS2V5XCIsIHJvb21JbmZvKTtcbiAgICAgICAgdGhpcy5yb29tSW5mbyA9IF9fYXNzaWduKHt9LCByb29tSW5mbyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAqIOWwhuaJgOaciem6puS9jemdmemfs+aJk+W8gOaIluiAheWFs+mXrVxuICAgICpcbiAgICAqIEBwYXJhbSBpc011dGUg5piv5ZCm6Z2Z6Z+zXG4gICAgKi9cbiAgICBSQ1ZvaWNlUm9vbUxpYkNsYXNzLnByb3RvdHlwZS5tdXRlT3RoZXJTZWF0cyA9IGZ1bmN0aW9uIChpc011dGUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGFyciA9IFtdO1xuICAgICAgICB2YXIgcm9vbURhdGEgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgdGhpcy5yb29tSW5mbyksIHsgaXNNdXRlQWxsOiBpc011dGUgfSk7XG4gICAgICAgIC8vIGNvbnN0IHVuTXV0ZSA9ICFpc011dGVcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnNlYXRJbmZvTGlzdC5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgLy8gaWYgKHRoaXMuc2VhdEluZm9MaXN0W2ldWyd1c2VySWQnXSA9PSB0aGlzLmltLnVzZXJJZCl7Ly/lvZPliY3puqbkvY3mnKzlnLDmk43kvZxcbiAgICAgICAgICAgIC8vICAgICB0aGlzLnVwZGF0ZUxvY2FsSW5mbyh0aGlzLnNlYXRJbmZvTGlzdFtpXSlcbiAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnNlYXRJbmZvTGlzdFtpXVsndXNlcklkJ10gIT0gdGhpcy5pbS51c2VySWQgJiYgdGhpcy5zZWF0SW5mb0xpc3RbaV1bJ211dGUnXSAhPSBpc011dGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgdGhpcy5zZWF0SW5mb0xpc3RbaV0pLCB7IG11dGU6IGlzTXV0ZSB9KTtcbiAgICAgICAgICAgICAgICBhcnIucHVzaCh0aGlzLmltLnNlYXRJbmZvVXBkYXRlKHRoaXMuUkNTZWF0SW5mb1NlYXRQYXJ0UHJlZml4S2V5ICsgaSwgdmFsdWUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBhcnIucHVzaCh0aGlzLmltLnNlYXRJbmZvVXBkYXRlKFwiUkNSb29tSW5mb0tleVwiLCByb29tRGF0YSkpXG4gICAgICAgIFByb21pc2UuYWxsKGFycikudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICBfbG9nZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXy5kZWZhdWx0LmxvZygn5pON5L2c5oiQ5YqfOjcwMDAwJyk7XG4gICAgICAgICAgICBfdGhpcy5yb29tSW5mbyA9IHJvb21EYXRhO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBfdGhpcy5zZWF0SW5mb0xpc3QubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMuc2VhdEluZm9MaXN0W2ldWyd1c2VySWQnXSAhPSBfdGhpcy5pbS51c2VySWQgJiYgX3RoaXMuc2VhdEluZm9MaXN0W2ldWydtdXRlJ10gIT0gaXNNdXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGxldCB2YWx1ZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIC4uLnRoaXMuc2VhdEluZm9MaXN0W2ldLFxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgbXV0ZTogaXNNdXRlXG4gICAgICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5zZWF0SW5mb0xpc3RbaV0gPSB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5zZWF0SW5mb0xpc3RbaV1bJ211dGUnXSA9IGlzTXV0ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF9sb2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fLmRlZmF1bHQuX2Vycm9yKCfmnKrnn6XplJnor686LTEnKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAqIOWPkemAgea2iOaBr1xuICAgICpcbiAgICAqIEBwYXJhbSBtZXNzYWdlICDono3kupHmtojmga/lrp7kvZNcbiAgICAqL1xuICAgIFJDVm9pY2VSb29tTGliQ2xhc3MucHJvdG90eXBlLnNlbmRNZXNzYWdlID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICAgICAgdGhpcy5pbS5jaGF0Um9vbS5zZW5kKG1lc3NhZ2UpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX2xvZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18uZGVmYXVsdC5sb2coJ+aTjeS9nOaIkOWKnzo3MDAwMCcpO1xuICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICBfbG9nZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXy5kZWZhdWx0Ll9lcnJvcign5Y+R6YCB5L+h5oGv5aSx6LSlOjcwMDIzJywgZXJyKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAqIOmAmuefpeaIv+mXtOaJgOacieeUqOaIt+aJp+ihjOafkOS4quWIt+aWsOaTjeS9nFxuICAgICpcbiAgICAqIEBwYXJhbSBuYW1lICAgIOWIt+aWsOaTjeS9nOeahOWQjeensFxuICAgICogQHBhcmFtIGNvbnRlbnQg5Yi35paw5pON5L2c55qE5YaF5a65XG4gICAgKi9cbiAgICBSQ1ZvaWNlUm9vbUxpYkNsYXNzLnByb3RvdHlwZS5ub3RpZnlWb2ljZVJvb20gPSBmdW5jdGlvbiAobmFtZSwgY29udGVudCkge1xuICAgICAgICB2YXIgdmFsdWUgPSB7XG4gICAgICAgICAgICBjb250ZW50OiBjb250ZW50LFxuICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5pbS5tZXNzYWdlVXBkYXRlKFwiUkM6VlJMUmVmcmVzaE1zZ1wiLCB2YWx1ZSkudGhlbihmdW5jdGlvbiAobWFzc2FnZSkge1xuICAgICAgICAgICAgX2xvZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18uZGVmYXVsdC5sb2coJ+aTjeS9nOaIkOWKnzo3MDAwMCcpO1xuICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICBfbG9nZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXy5kZWZhdWx0Ll9lcnJvcign5Y+R6YCB5L+h5oGv5aSx6LSlOjcwMDIzJyk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICog5pat5byA6L+e5o6l77yM55So5oi36YCA5Ye65pe26LCD55SoXG4gICovXG4gICAgLy8gZGlzQ29ubmVjdCgpIHtcbiAgICAvLyAgICAgdGhpcy5kaXNDb25uZWN0KClcbiAgICAvLyB9XG4gICAgLyoqXG4gICAgKiDojrflj5bmnIDmlrDlnKjpuqbkvY3kuIrnlKjmiLfnmoTmoIfor4bpm4blkIhcbiAgICAqXG4gICAgKi9cbiAgICBSQ1ZvaWNlUm9vbUxpYkNsYXNzLnByb3RvdHlwZS5nZXRSZXF1ZXN0U2VhdFVzZXJJZHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBhcnIsIGVycm9yXzE7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBhcnIgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFsxLCAzLCAsIDRdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuaW0uY2hhdFJvb20uZ2V0QWxsQ2hhdFJvb21FbnRyaWVzKHRoaXMuaW0ucm9vbUlkKS50aGVuKGZ1bmN0aW9uIChlbnRyaWVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZW50cmllc1wiLCBlbnRyaWVzLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhlbnRyaWVzLmRhdGEpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGtleS5zcGxpdChcIl9cIilbMF0gPT0gXCJSQ1JlcXVlc3RTZWF0UHJlZml4S2V5XCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnRyaWVzLmRhdGFba2V5XSA9PSBcIlJDUmVxdWVzdFNlYXRDb250ZW50UmVxdWVzdFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJyLnB1c2goa2V5LnNwbGl0KFwiX1wiKVsxXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoa2V5LnN1YnN0cigwLCAyMykgPT0gXCJMSVZFX1ZJREVPX1JFUVVFU1RfUFJFX1wiICYmIGVudHJpZXMuZGF0YVtrZXldLnNwbGl0KFwiLVwiKVswXSA9PSBcIkxJVkVfVklERU9fUkVRVUVTVF9OT1JNQUxcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyci5wdXNoKGtleS5zdWJzdHIoMjMpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi5o6S6bqm6Zif5YiXXCIsIGFycik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9sb2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fLmRlZmF1bHQubG9nKCflkIzmraXmjpLpuqbnm7jlhbPkv6Hmga86NzAwMjEnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9sb2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fLmRlZmF1bHQubG9nKCfojrflj5bmjpLpuqbor7fmsYLliJfooajlpLHotKU6NzAwMjInKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcl8xID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2xvZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18uZGVmYXVsdC5sb2coJ+iOt+WPluaOkum6puivt+axguWIl+ihqOWksei0pTo3MDAyMicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGFycl07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgKiDojrflj5bmnIDmlrDpuqbkvY3kv6Hmga9cbiAgICAqXG4gICAgKiBAcGFyYW0gcmVzdWx0Q2FsbGJhY2tcbiAgICAqL1xuICAgIFJDVm9pY2VSb29tTGliQ2xhc3MucHJvdG90eXBlLmdldExhdGVzdFNlYXRJbmZvID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYXJyLCBlcnJvcl8yO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXJyID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDE7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMSwgMywgLCA0XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmltLmNoYXRSb29tLmdldEFsbENoYXRSb29tRW50cmllcyh0aGlzLmltLnJvb21JZCkudGhlbihmdW5jdGlvbiAoZW50cmllcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZW50cmllczonLCBlbnRyaWVzLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICBcIkxJVkVfVklERU9fU0VBVF9JTkZPX1BSRV8wXCI6IFwie1xcXCJ1c2VySWRcXFwiOlxcXCJjMDU2NWE4MS02NjQyLTQ1ZjYtODNhYi00MGZkOGM5YzY5MjlcXFwiLFxcXCJtdXRlXFxcIjpmYWxzZSxcXFwidXNlckVuYWJsZVZpZGVvXFxcIjp0cnVlLFxcXCJmcmFtZVxcXCI6XFxcInt7MCwgMH0sIHswLjMzMzMzMzMzMzMzMzMzMzMxLCAwLjMzMzMzMzMzMzMzMzMzMzMxfX1cXFwiLFxcXCJsb2NrXFxcIjpmYWxzZSxcXFwidXNlckVuYWJsZUF1ZGlvXFxcIjp0cnVlLFxcXCJpbmRleFxcXCI6MH1cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIFwiTElWRV9WSURFT19TRUFUX0lORk9fUFJFXzFcIjogXCJ7XFxcInVzZXJJZFxcXCI6XFxcIlxcXCIsXFxcIm11dGVcXFwiOmZhbHNlLFxcXCJ1c2VyRW5hYmxlVmlkZW9cXFwiOnRydWUsXFxcImZyYW1lXFxcIjpcXFwie3swLCAwLjMzMzMzMzMzMzMzMzMzMzMxfSwgezAuMzMzMzMzMzMzMzMzMzMzMzEsIDAuMzMzMzMzMzMzMzMzMzMzMzF9fVxcXCIsXFxcImxvY2tcXFwiOmZhbHNlLFxcXCJ1c2VyRW5hYmxlQXVkaW9cXFwiOnRydWUsXFxcImluZGV4XFxcIjoxfVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgXCJMSVZFX1ZJREVPX1NFQVRfSU5GT19QUkVfNlwiOiBcIntcXFwidXNlcklkXFxcIjpcXFwiXFxcIixcXFwibXV0ZVxcXCI6ZmFsc2UsXFxcInVzZXJFbmFibGVWaWRlb1xcXCI6dHJ1ZSxcXFwiZnJhbWVcXFwiOlxcXCJ7ezAuNjY2NjY2NjY2NjY2NjY2NjMsIDAuNjY2NjY2NjY2NjY2NjY2NjN9LCB7MC4zMzMzMzMzMzMzMzMzMzMzMSwgMC4zMzMzMzMzMzMzMzMzMzMzMX19XFxcIixcXFwibG9ja1xcXCI6ZmFsc2UsXFxcInVzZXJFbmFibGVBdWRpb1xcXCI6dHJ1ZSxcXFwiaW5kZXhcXFwiOjZ9XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICBcIkxJVkVfVklERU9fUk9PTV9NSVhfVFlQRVwiOiBcIjZcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIFwiTElWRV9WSURFT19TRUFUX0lORk9fUFJFXzJcIjogXCJ7XFxcInVzZXJJZFxcXCI6XFxcIlxcXCIsXFxcIm11dGVcXFwiOmZhbHNlLFxcXCJ1c2VyRW5hYmxlVmlkZW9cXFwiOnRydWUsXFxcImZyYW1lXFxcIjpcXFwie3swLjMzMzMzMzMzMzMzMzMzMzMxLCAwLjMzMzMzMzMzMzMzMzMzMzMxfSwgezAuMzMzMzMzMzMzMzMzMzMzMzEsIDAuMzMzMzMzMzMzMzMzMzMzMzF9fVxcXCIsXFxcImxvY2tcXFwiOmZhbHNlLFxcXCJ1c2VyRW5hYmxlQXVkaW9cXFwiOnRydWUsXFxcImluZGV4XFxcIjoyfVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgXCJMSVZFX1ZJREVPX1NFQVRfSU5GT19QUkVfM1wiOiBcIntcXFwidXNlcklkXFxcIjpcXFwiXFxcIixcXFwibXV0ZVxcXCI6ZmFsc2UsXFxcInVzZXJFbmFibGVWaWRlb1xcXCI6dHJ1ZSxcXFwiZnJhbWVcXFwiOlxcXCJ7ezAuNjY2NjY2NjY2NjY2NjY2NjMsIDAuMzMzMzMzMzMzMzMzMzMzMzF9LCB7MC4zMzMzMzMzMzMzMzMzMzMzMSwgMC4zMzMzMzMzMzMzMzMzMzMzMX19XFxcIixcXFwibG9ja1xcXCI6ZmFsc2UsXFxcInVzZXJFbmFibGVBdWRpb1xcXCI6dHJ1ZSxcXFwiaW5kZXhcXFwiOjN9XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICBcIkxJVkVfVklERU9fUk9PTV9VU0VSX0lEXCI6IFwiYzA1NjVhODEtNjY0Mi00NWY2LTgzYWItNDBmZDhjOWM2OTI5XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICBcIkxJVkVfVklERU9fU0VBVF9JTkZPX1BSRV80XCI6IFwie1xcXCJ1c2VySWRcXFwiOlxcXCJcXFwiLFxcXCJtdXRlXFxcIjpmYWxzZSxcXFwidXNlckVuYWJsZVZpZGVvXFxcIjp0cnVlLFxcXCJmcmFtZVxcXCI6XFxcInt7MCwgMC42NjY2NjY2NjY2NjY2NjY2M30sIHswLjMzMzMzMzMzMzMzMzMzMzMxLCAwLjMzMzMzMzMzMzMzMzMzMzMxfX1cXFwiLFxcXCJsb2NrXFxcIjpmYWxzZSxcXFwidXNlckVuYWJsZUF1ZGlvXFxcIjp0cnVlLFxcXCJpbmRleFxcXCI6NH1cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIFwiTElWRV9WSURFT19TRUFUX0lORk9fUFJFXzVcIjogXCJ7XFxcInVzZXJJZFxcXCI6XFxcIlxcXCIsXFxcIm11dGVcXFwiOmZhbHNlLFxcXCJ1c2VyRW5hYmxlVmlkZW9cXFwiOnRydWUsXFxcImZyYW1lXFxcIjpcXFwie3swLjMzMzMzMzMzMzMzMzMzMzMxLCAwLjY2NjY2NjY2NjY2NjY2NjYzfSwgezAuMzMzMzMzMzMzMzMzMzMzMzEsIDAuMzMzMzMzMzMzMzMzMzMzMzF9fVxcXCIsXFxcImxvY2tcXFwiOmZhbHNlLFxcXCJ1c2VyRW5hYmxlQXVkaW9cXFwiOnRydWUsXFxcImluZGV4XFxcIjo1fVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoZW50cmllcy5kYXRhKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbnRyaWVzQXJyID0ga2V5LnNwbGl0KFwiX1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbnRyaWVzQXJyWzBdID09IFwiUkNTZWF0SW5mb1NlYXRQYXJ0UHJlZml4S2V5XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcnJbTnVtYmVyKGVudHJpZXNBcnJbMV0pXSA9IEpTT04ucGFyc2UoZW50cmllcy5kYXRhW2tleV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGtleS5zdWJzdHIoMCwgMjUpID09IFwiTElWRV9WSURFT19TRUFUX0lORk9fUFJFX1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJyW2tleS5zdWJzdHIoMjUsIDEpXSA9IEpTT04ucGFyc2UoZW50cmllcy5kYXRhW2tleV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdOdW1iZXItLS0tLS0tLScsIGtleS5zdWJzdHIoMjUsIDEpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZW50cmllc1trZXldJywgZW50cmllcy5kYXRhW2tleV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2xvZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18uZGVmYXVsdC5sb2coJ+aTjeS9nOaIkOWKnzo3MDAwMCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2xvZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18uZGVmYXVsdC5sb2coJ+WQjOatpem6puS9jeS/oeaBr+Wksei0pTo3MDAxOScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGFycl07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXzIgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfbG9nZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXy5kZWZhdWx0LmxvZygn5ZCM5q2l5oi/6Ze05L+h5oGv5aSx6LSlOjcwMDIwJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgYXJyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lnKjplJnor6/lj5HnlJ/ml7bmgI7kuYjlpITnkIZcbiAgICAgICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIOabtOaWsOaMh+Wumum6puS9jeS/oeaBr+S4reeahGV4dHJh5a2X5q61XG4gICAgICpcbiAgICAgKiBAcGFyYW0gaW5kZXhcbiAgICAgKiBAcGFyYW0gZXh0cmFcbiAgICAgKi9cbiAgICBSQ1ZvaWNlUm9vbUxpYkNsYXNzLnByb3RvdHlwZS51cGRhdGVTZWF0SW5mbyA9IGZ1bmN0aW9uIChpbmRleCwgZXh0cmEpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGFyciA9IFtdO1xuICAgICAgICB2YXIgdmFsdWUgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgdGhpcy5zZWF0SW5mb0xpc3RbaW5kZXhdKSwgeyBleHRyYTogZXh0cmEgfSk7XG4gICAgICAgIGFyci5wdXNoKHRoaXMuaW0uc2VhdEluZm9VcGRhdGUodGhpcy5SQ1NlYXRJbmZvU2VhdFBhcnRQcmVmaXhLZXkgKyBpbmRleCwgdmFsdWUpKTtcbiAgICAgICAgUHJvbWlzZS5hbGwoYXJyKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgIF9sb2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fLmRlZmF1bHQubG9nKCfmk43kvZzmiJDlip86NzAwMDAnKTtcbiAgICAgICAgICAgIC8vIHRoaXMuc2VhdEluZm9MaXN0W2luZGV4XSA9IHZhbHVlXG4gICAgICAgICAgICBfdGhpcy5zZWF0SW5mb0xpc3RbaW5kZXhdWydleHRyYSddID0gZXh0cmE7XG4gICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF9sb2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fLmRlZmF1bHQuX2Vycm9yKCfmnKrnn6XplJnor686LTEnKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAqIOivt+axguaOkum6plxuICAgICovXG4gICAgUkNWb2ljZVJvb21MaWJDbGFzcy5wcm90b3R5cGUucmVxdWVzdFNlYXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBsZW4sIGJvciwgaSwgYXJyLCBrZXksIHZhbHVlLCBlcnJvcl8zO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmltLl9GcmVlRW50ZXJTZWF0KSByZXR1cm4gWzMgLypicmVhayovLCAxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuaW0uc2VhdEluZm9MaXN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmltLnNlYXRJbmZvTGlzdFsxXSAmJiB0aGlzLmltLnNlYXRJbmZvTGlzdFsxXS51c2VySWQgJiYgdGhpcy5pbS5zZWF0SW5mb0xpc3RbMV0udXNlcklkICE9ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLpuqbkvY3kuIrmnInkurpcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVudGVyU2VhdCgxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzEsIDMsICwgNF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5nZXRSZXF1ZXN0U2VhdFVzZXJJZHMoKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlbiA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGxlbik7XG4gICAgICAgICAgICAgICAgICAgICAgICBib3IgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW4ubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobGVuW2ldID09IHRoaXMuaW0udXNlcklkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYXJyID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXkgPSBcIlJDUmVxdWVzdFNlYXRQcmVmaXhLZXlfXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IFwiUkNSZXF1ZXN0U2VhdENvbnRlbnRSZXF1ZXN0XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5ydGMucm9vbVR5cGUgPT0gJ2xpdmUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5ID0gXCJMSVZFX1ZJREVPX1JFUVVFU1RfUFJFX1wiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gXCJMSVZFX1ZJREVPX1JFUVVFU1RfTk9STUFMXCIgKyBcIi0xXCI7IC8vMS4w6buY6K6k5Y+q55Sz6K+3MeWPt+m6puS9jSBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsZW4ubGVuZ3RoID4gMjApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbG9nZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXy5kZWZhdWx0Ll9lcnJvcign5o6S6bqm5Lq65pWw5aSq5aSaOjcwMDE0Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChib3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbG9nZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXy5kZWZhdWx0Ll9lcnJvcign5bey57uP5Zyo5o6S6bqm5YiX6KGo5Lit5LqGOjcwMDEzJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcnIucHVzaCh0aGlzLmltLlJlcXVlc3RzZWF0SW5mb1VwZGF0ZShrZXkgKyB0aGlzLmltLnVzZXJJZCwgdmFsdWUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBQcm9taXNlLmFsbChhcnIpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbG9nZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXy5kZWZhdWx0LmxvZygn5pON5L2c5oiQ5YqfOjcwMDAwJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbG9nZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXy5kZWZhdWx0Ll9lcnJvcign5o6S6bqm6K+35rGC5Y+R6YCB5aSx6LSlOjcwMDE1Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA0XTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JfMyA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9sb2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fLmRlZmF1bHQuX2Vycm9yKCfojrflj5bpuqbkvY3kv6Hmga/lpLHotKU6NzAwMTUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICog5Y+W5raI5o6S6bqm6K+35rGCXG4gICAqXG4gICAqL1xuICAgIFJDVm9pY2VSb29tTGliQ2xhc3MucHJvdG90eXBlLmNhbmNlbFJlcXVlc3RTZWF0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBjb25zb2xlLmxvZygndGhpcy5pbS51c2VySWQnLCB0aGlzLmltLnVzZXJJZCk7XG4gICAgICAgIHZhciBrZXkgPSBcIlJDUmVxdWVzdFNlYXRQcmVmaXhLZXlfXCI7XG4gICAgICAgIGlmICh0aGlzLnJ0Yy5yb29tVHlwZSA9PSAnbGl2ZScpIHtcbiAgICAgICAgICAgIGtleSA9IFwiTElWRV9WSURFT19SRVFVRVNUX1BSRV9cIjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmltLnNlYXRJbmZvUmVtb3ZlKGtleSArIHRoaXMuaW0udXNlcklkKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF9sb2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fLmRlZmF1bHQubG9nKCfmk43kvZzmiJDlip86NzAwMDAnKTtcbiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgX2xvZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18uZGVmYXVsdC5fZXJyb3IoJ+WPlua2iOaOkum6puivt+axguWPkemAgeWksei0pTo3MDAxNicpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICog5ZCM5oSP55So5oi35o6S6bqm6K+35rGCXG4gICAgKlxuICAgICogQHBhcmFtIHVzZXJJZCAgIOivt+axguaOkum6pueahOeUqOaItyBJZFxuICAgICovXG4gICAgUkNWb2ljZVJvb21MaWJDbGFzcy5wcm90b3R5cGUuYWNjZXB0UmVxdWVzdFNlYXQgPSBmdW5jdGlvbiAodXNlcklkKSB7XG4gICAgICAgIHZhciBhcnIgPSBbXTtcbiAgICAgICAgdmFyIGtleSA9IFwiUkNSZXF1ZXN0U2VhdFByZWZpeEtleV9cIjtcbiAgICAgICAgaWYgKHRoaXMuaW0ucm9vbVR5cGUgPSAnbGl2ZScpIHtcbiAgICAgICAgICAgIGtleSA9IFwiTElWRV9WSURFT19SRVFVRVNUX1BSRV9cIjtcbiAgICAgICAgICAgIC8v55u05o6l5pu05paw6bqm5L2N5L+h5oGvICAgIFxuICAgICAgICAgICAgY29uc29sZS5sb2coXCLlvZPliY0x5Y+36bqm5L2N77yaIFwiLCB0aGlzLmltLnNlYXRJbmZvTGlzdFsxXSk7XG4gICAgICAgICAgICB0aGlzLmltLnNlYXRJbmZvTGlzdFsxXS51c2VySWQgPSB1c2VySWQ7XG4gICAgICAgICAgICB0aGlzLmltLnNlYXRJbmZvTGlzdFsxXS5zdGF0dXMgPSAxO1xuICAgICAgICAgICAgdGhpcy5pbS5zZWF0SW5mb0xpc3RbMV0uaW5kZXggPSAxO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCLmm7TmlrBrZXnvvJpcIiwgdGhpcy5SQ1NlYXRJbmZvU2VhdFBhcnRQcmVmaXhLZXkgKyBcIjFcIiwgXCJ2XCIsIHRoaXMuaW0uc2VhdEluZm9MaXN0WzFdKTtcbiAgICAgICAgICAgIHRoaXMuaW0uc2VhdEluZm9VcGRhdGUodGhpcy5SQ1NlYXRJbmZvU2VhdFBhcnRQcmVmaXhLZXkgKyBcIjFcIiwgdGhpcy5pbS5zZWF0SW5mb0xpc3RbMV0pO1xuICAgICAgICB9XG4gICAgICAgIGFyci5wdXNoKHRoaXMuaW0uUmVxdWVzdHNlYXRJbmZvVXBkYXRlKGtleSArIHVzZXJJZCwgXCJSQ1JlcXVlc3RTZWF0Q29udGVudEFjY2VwdFwiKSk7XG4gICAgICAgIFByb21pc2UuYWxsKGFycikudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICBfbG9nZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXy5kZWZhdWx0LmxvZygn5pON5L2c5oiQ5YqfOjcwMDAwJyk7XG4gICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF9sb2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fLmRlZmF1bHQuX2Vycm9yKCflkIzmhI/mjpLpuqbor7fmsYLlj5HpgIHlpLHotKU6NzAwMTcnKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAqIOaLkue7neeUqOaIt+aOkum6puivt+axglxuICAgICpcbiAgICAqIEBwYXJhbSB1c2VySWRcbiAgICAqL1xuICAgIFJDVm9pY2VSb29tTGliQ2xhc3MucHJvdG90eXBlLnJlamVjdFJlcXVlc3RTZWF0ID0gZnVuY3Rpb24gKHVzZXJJZCkge1xuICAgICAgICB2YXIgYXJyID0gW107XG4gICAgICAgIGlmICh0aGlzLmltLnJvb21UeXBlID0gJ2xpdmUnKSB7XG4gICAgICAgICAgICB2YXIgcG1zZyA9IG5ldyB0aGlzLmltLnJlZ01zZyh7XG4gICAgICAgICAgICAgICAgbmFtZTogXCJST09NX0NPTU1BTkRfUkVRVUVTVFwiLFxuICAgICAgICAgICAgICAgIGRhdGE6IFwiTElWRV9WSURFT19SRVFVRVNUX1JFSkVDVFwiLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBhcnIucHVzaCh0aGlzLmltLmNoYXRSb29tLnNlbmRNZXNzYWdlKHtcbiAgICAgICAgICAgICAgICBjb252ZXJzYXRpb25UeXBlOiB0aGlzLmltLmNoYXRSb29tLkNvbnZlcnNhdGlvblR5cGUuUFJJVkFURSxcbiAgICAgICAgICAgICAgICB0YXJnZXRJZDogdXNlcklkXG4gICAgICAgICAgICB9LCBwbXNnKSk7XG4gICAgICAgICAgICB0aGlzLmltLnNlYXRJbmZvUmVtb3ZlKFwiTElWRV9WSURFT19SRVFVRVNUX1BSRV9cIiArIHVzZXJJZCkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJyZXNcIiwgcmVzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYXJyLnB1c2godGhpcy5pbS5SZXF1ZXN0c2VhdEluZm9VcGRhdGUoXCJSQ1JlcXVlc3RTZWF0UHJlZml4S2V5X1wiICsgdXNlcklkLCBcIlJDUmVxdWVzdFNlYXRDb250ZW50RGVueVwiKSk7XG4gICAgICAgIH1cbiAgICAgICAgUHJvbWlzZS5hbGwoYXJyKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi5oiQ5YqfXCIsIHJlc3VsdCk7XG4gICAgICAgICAgICBfbG9nZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXy5kZWZhdWx0LmxvZygn5pON5L2c5oiQ5YqfOjcwMDAwJyk7XG4gICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF9sb2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fLmRlZmF1bHQuX2Vycm9yKCfmi5Lnu53mjpLpuqbor7fmsYLlj5HpgIHlpLHotKU6NzAwMTgnKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAqIOebtOaSreaOpeWPl+mCgOivt1xuICAgICpcbiAgICAqIEBwYXJhbSB1c2VySWRcbiAgICAqL1xuICAgIFJDVm9pY2VSb29tTGliQ2xhc3MucHJvdG90eXBlLmFjY2VwdEludml0YXRpb24gPSBmdW5jdGlvbiAodXNlcklkKSB7XG4gICAgICAgIHZhciBwbXNnID0gbmV3IHRoaXMuaW0ucmVnTXNnKHtcbiAgICAgICAgICAgIG5hbWU6IFwiUk9PTV9DT01NQU5EX0lOVklUQVRJT05cIixcbiAgICAgICAgICAgIGRhdGE6IFwiTElWRV9WSURFT19JTlZJVEFUSU9OX0FDQ1BUXCIgKyB0aGlzLmltLnVzZXJJZCxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuaW0uY2hhdFJvb20uc2VuZE1lc3NhZ2Uoe1xuICAgICAgICAgICAgY29udmVyc2F0aW9uVHlwZTogdGhpcy5pbS5jaGF0Um9vbS5Db252ZXJzYXRpb25UeXBlLlBSSVZBVEUsXG4gICAgICAgICAgICB0YXJnZXRJZDogdXNlcklkXG4gICAgICAgIH0sIHBtc2cpLnRoZW4oZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfmjqXlj5fpgoDor7fmtojmga/miJDlip8nLCBtZXNzYWdlKTtcbiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgX2xvZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18uZGVmYXVsdC5fZXJyb3IoJ+aOpeWPl+mCgOivt+a2iOaBr+Wksei0pScpO1xuICAgICAgICB9KTtcbiAgICAgICAgO1xuICAgIH07XG4gICAgLyoqXG4gICAgKiDnm7Tmkq3mi5Lnu53pgoDor7dcbiAgICAqXG4gICAgKiBAcGFyYW0gdXNlcklkXG4gICAgKi9cbiAgICBSQ1ZvaWNlUm9vbUxpYkNsYXNzLnByb3RvdHlwZS5yZWplY3RJbnZpdGF0aW9uID0gZnVuY3Rpb24gKHVzZXJJZCkge1xuICAgICAgICB2YXIgcG1zZyA9IG5ldyB0aGlzLmltLnJlZ01zZyh7XG4gICAgICAgICAgICBuYW1lOiBcIlJPT01fQ09NTUFORF9JTlZJVEFUSU9OXCIsXG4gICAgICAgICAgICBkYXRhOiBcIkxJVkVfVklERU9fSU5WSVRBVElPTl9SRUpFQ1RcIiArIHVzZXJJZCxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuaW0uY2hhdFJvb20uc2VuZE1lc3NhZ2Uoe1xuICAgICAgICAgICAgY29udmVyc2F0aW9uVHlwZTogdGhpcy5pbS5jaGF0Um9vbS5Db252ZXJzYXRpb25UeXBlLlBSSVZBVEUsXG4gICAgICAgICAgICB0YXJnZXRJZDogdXNlcklkXG4gICAgICAgIH0sIHBtc2cpLnRoZW4oZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCflj5HpgIHmi5Lnu53pgoDor7fmtojmga/miJDlip8nLCBtZXNzYWdlKTtcbiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgX2xvZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18uZGVmYXVsdC5fZXJyb3IoJ+WPkemAgeaLkue7nemCgOivt+Wksei0pScpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICog5Y+W5raI55u05pKt6YKA6K+3XG4gICAgKlxuICAgICogQHBhcmFtIHVzZXJJZFxuICAgICovXG4gICAgUkNWb2ljZVJvb21MaWJDbGFzcy5wcm90b3R5cGUuY2FuY2VsSW52aXRhdGlvbiA9IGZ1bmN0aW9uICh1c2VySWQpIHtcbiAgICAgICAgdmFyIHBtc2cgPSBuZXcgdGhpcy5pbS5yZWdNc2coe1xuICAgICAgICAgICAgbmFtZTogXCJST09NX0NPTU1BTkRfSU5WSVRBVElPTlwiLFxuICAgICAgICAgICAgZGF0YTogXCJMSVZFX1ZJREVPX0lOVklUQVRJT05fQ0FOQ0VMXCIsXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmltLmNoYXRSb29tLnNlbmRNZXNzYWdlKHtcbiAgICAgICAgICAgIGNvbnZlcnNhdGlvblR5cGU6IHRoaXMuaW0uY2hhdFJvb20uQ29udmVyc2F0aW9uVHlwZS5QUklWQVRFLFxuICAgICAgICAgICAgdGFyZ2V0SWQ6IHVzZXJJZFxuICAgICAgICB9LCBwbXNnKS50aGVuKGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygn5Y+W5raI6YKA6K+35raI5oGv5Y+R6YCB5oiQ5YqfJyk7XG4gICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgIF9sb2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fLmRlZmF1bHQuX2Vycm9yKCflj5bmtojpgoDor7fmtojmga/lj5HpgIHlpLHotKUnKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAqIOebtOaSremihOiniFxuICAgICpcbiAgICAqIEBwYXJhbSB2aWRlb05vZGVcbiAgICAqL1xuICAgIFJDVm9pY2VSb29tTGliQ2xhc3MucHJvdG90eXBlLnByZXZpZXcgPSBmdW5jdGlvbiAobykge1xuICAgICAgICB0aGlzLnJ0Yy5wcmV2aWV3KG8udmlkZW9Ob2RlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICog6I635Y+W5bey5pyJ55qE5pys5Zyw5rWBXG4gICAgKlxuICAgICogQHBhcmFtIHZpZGVvTm9kZVxuICAgICovXG4gICAgUkNWb2ljZVJvb21MaWJDbGFzcy5wcm90b3R5cGUuZ2V0RXhpc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucnRjLmdldEV4aXN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAqIOiOt+WPluW3suacieeahOacrOWcsOa1gVxuICAgICpcbiAgICAqIEBwYXJhbSBvcHRpb257XG4gICAgKiAgICAga2V5OiBzdHJpbmdcbiAgICAqICAgICB2YWx1ZTogb2JqZWN0XG4gICAgKiB9XG4gICAgKi9cbiAgICBSQ1ZvaWNlUm9vbUxpYkNsYXNzLnByb3RvdHlwZS51cGRhdGVLZXlWYWx1ZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IG8udmFsdWU7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT0gXCJzdHJpbmdcIikge1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFsdWUgPSBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pbS5zZWF0SW5mb1VwZGF0ZShvLmtleSwgdmFsdWUpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX2xvZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18uZGVmYXVsdC5sb2coXCJrduabtOaWsOaIkOWKn1wiLCB0eXBlb2YgdmFsdWUpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJrZXk6XCIsIG8ua2V5KTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwidmFsdWU6XCIsIHZhbHVlKTtcbiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgX2xvZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18uZGVmYXVsdC5fZXJyb3IoJ+abtOaWsOaIv+mXtOS/oeaBr+Wksei0pTo3MDAwOCcpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBSQ1ZvaWNlUm9vbUxpYkNsYXNzO1xufShldmVudHNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FdmVudEVtaXR0ZXIpKTtcbnZhciBSQ1ZvaWNlUm9vbUxpYiA9IG5ldyBSQ1ZvaWNlUm9vbUxpYkNsYXNzKCk7XG5cbi8qIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi8gY29uc3QgX19XRUJQQUNLX0RFRkFVTFRfRVhQT1JUX18gPSAoUkNWb2ljZVJvb21MaWIpO1xuXG5cbi8vIyBzb3VyY2VVUkw9d2VicGFjazovL0Byb25nY2xvdWQvcmNsaXZlcm9vbWxpYi8uL3NyYy9pbmRleC50cz8iKTsvKioqL30sLyoqKi8iLi9zcmMvbG9nZXIudHMiOi8qISoqKioqKioqKioqKioqKioqKioqKiohKlwKICAhKioqIC4vc3JjL2xvZ2VyLnRzICoqKiEKICBcKioqKioqKioqKioqKioqKioqKioqKi8gLyoqKi9mdW5jdGlvbiBzcmNMb2dlclRzKF9fdW51c2VkX3dlYnBhY2tfbW9kdWxlLF9fd2VicGFja19leHBvcnRzX18sX193ZWJwYWNrX3JlcXVpcmVfXyl7ZXZhbCgiX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIHtcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJkZWZhdWx0XCI6ICgpID0+IChfX1dFQlBBQ0tfREVGQVVMVF9FWFBPUlRfXylcbi8qIGhhcm1vbnkgZXhwb3J0ICovIH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9jb25maWdfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vY29uZmlnICovIFwiLi9zcmMvY29uZmlnLnRzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIGV2ZW50c19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgZXZlbnRzICovIFwiLi9ub2RlX21vZHVsZXMvZXZlbnRzL2V2ZW50cy5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBldmVudHNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19fd2VicGFja19yZXF1aXJlX18ubihldmVudHNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyk7XG5cblxudmFyIExvZ2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIExvZ2VyKCkge1xuICAgICAgICB0aGlzLkhpc3RvcnkgPSBbXTtcbiAgICB9XG4gICAgTG9nZXIucHJvdG90eXBlLmxvZyA9IGZ1bmN0aW9uICh0YXJnZXQsIHQpIHtcbiAgICAgICAgaWYgKHQgPT09IHZvaWQgMCkgeyB0ID0gXCJcIjsgfVxuICAgICAgICBpZiAoIV9jb25maWdfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5kZWJ1ZylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgc3dpdGNoICh0eXBlb2YgKHRhcmdldCkpIHtcbiAgICAgICAgICAgIGNhc2UgXCJudW1iZXJcIjpcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIml0cyBhIG51bWJlciA9PT0+XCIsIHRhcmdldCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwic3RyaW5nXCI6XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codGFyZ2V0LCB0KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJvYmplY3RcIjpcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIml0cyBhIG9iamVjdCA9PT0+XCIsIHRhcmdldCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiZnVuY3Rpb25cIjpcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIml0cyBhIGZ1bmN0aW9uID09PT5cIiwgdGFyZ2V0KTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGFyZ2V0KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH07XG4gICAgTG9nZXIucHJvdG90eXBlLl9sb2cgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICAgIHZhciBsID0ge1xuICAgICAgICAgICAgbWFpblN0YXR1czogMCxcbiAgICAgICAgICAgIG1vZHVsZU51bTogMCxcbiAgICAgICAgICAgIHJlYWR5TnVtOiAwLFxuICAgICAgICAgICAgbG9hZGluZ0xpc3Q6IFtdLFxuICAgICAgICAgICAgcmVhZHlMaXN0OiBbXSxcbiAgICAgICAgICAgIHJ1bm5pbmdMaXN0OiBbXSxcbiAgICAgICAgICAgIGJyb2tlbkxpc3Q6IFtdLFxuICAgICAgICAgICAgdW5Lbm93U3RhdGVzTGlzdDogW11cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodGFyZ2V0KSkgeyAvL2FycmF557G75Z6LLlxuICAgICAgICAgICAgdGFyZ2V0LmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoKGVsZW1lbnQgaW5zdGFuY2VvZiBldmVudHNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXy5FdmVudEVtaXR0ZXIpICYmIChlbGVtZW50Lm5hbWUpKSB7IC8v6Zif5YiX5YaF5a655piv5qih5Z2X5pWw5o2u5qOA5p+lXG4gICAgICAgICAgICAgICAgICAgIGwubW9kdWxlTnVtKys7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoZWxlbWVudC5zdGF0ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsLmxvYWRpbmdMaXN0LnB1c2goZWxlbWVudC5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsLnJlYWR5TGlzdC5wdXNoKGVsZW1lbnQubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbC5yZWFkeU51bSsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwucnVubmluZ0xpc3QucHVzaChlbGVtZW50Lm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwuYnJva2VuTGlzdC5wdXNoKGVsZW1lbnQubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwudW5Lbm93U3RhdGVzTGlzdC5wdXNoKGVsZW1lbnQubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIuaVsOaNrumdnuazlVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuSGlzdG9yeS5wdXNoKGwpO1xuICAgICAgICAgICAgaWYgKHRoaXMuSGlzdG9yeS5sZW5ndGggPiA5OSkge1xuICAgICAgICAgICAgICAgIHRoaXMuSGlzdG9yeS5zaGlmdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgeyAvL+aZrumAmuWvueixoeexu+Wei1xuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiX2xvZyDmlrnms5XlrZjlnKjlvILluLjosIPnlKhcIiwgdGFyZ2V0KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTG9nZXIucHJvdG90eXBlLmhpc3RvcnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMuSGlzdG9yeSk7XG4gICAgfTtcbiAgICBMb2dlci5wcm90b3R5cGUud2FybiA9IGZ1bmN0aW9uICh0YXJnZXQsIGUpIHtcbiAgICAgICAgaWYgKGUgPT09IHZvaWQgMCkgeyBlID0gbnVsbDsgfVxuICAgICAgICBjb25zb2xlLndhcm4odGFyZ2V0LCBlKTtcbiAgICB9O1xuICAgIC8v6ZSZ6K+v5LiK5oqlOiDlj4LmlbAgZTrljp/lp4vplJnor6/kv6Hmga8gIGVycnR5cGU66ZSZ6K+v57G75Z6LIG1vZDrplJnor6/lj5HnlJ/mqKHlnZcgZXJybnVtOumUmeivr+e8luWPtztlcnJtZXNzYWdlOumUmeivr+a2iOaBr1xuICAgIExvZ2VyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlLCBlcnJ0eXBlLCBtb2QsIGVycm51bSwgZXJybWVzc2FnZSkge1xuICAgICAgICBpZiAoZXJydHlwZSA9PT0gdm9pZCAwKSB7IGVycnR5cGUgPSBcIjBcIjsgfVxuICAgICAgICBpZiAobW9kID09PSB2b2lkIDApIHsgbW9kID0gbnVsbDsgfVxuICAgICAgICBpZiAoZXJybnVtID09PSB2b2lkIDApIHsgZXJybnVtID0gXCIwMFwiOyB9XG4gICAgICAgIGlmIChlcnJtZXNzYWdlID09PSB2b2lkIDApIHsgZXJybWVzc2FnZSA9IFwidW5rbm93IGVyclwiOyB9XG4gICAgICAgIHZhciBlcnJNb2ROdW0gPSBcIjBcIjtcbiAgICAgICAgLy/pgYfliLDplJnor6/ml7blsJ3or5Xph43lkK/or6XmqKHlnZcuXG4gICAgICAgIG1vZC5yZWJvb3QoKTtcbiAgICB9O1xuICAgIExvZ2VyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAodGFyZ2V0LCBlKSB7XG4gICAgICAgIGlmIChlID09PSB2b2lkIDApIHsgZSA9IG51bGw7IH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKHRhcmdldCk7XG4gICAgfTtcbiAgICByZXR1cm4gTG9nZXI7XG59KCkpO1xudmFyIGxvZ2VyID0gbmV3IExvZ2VyKCk7XG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIGNvbnN0IF9fV0VCUEFDS19ERUZBVUxUX0VYUE9SVF9fID0gKGxvZ2VyKTtcbi8v5omn6KGM56CBIFxuLypcbuWNg+S9jSDmiafooYznsbvliKsgIDHmlbDmja7plJnor68gMue9kee7nOmUmeivryAz56Gs5Lu2IDTlpJbpg6jova/ku7bnjq/looPljp/lm6AgNeiHqui6q+mUmeivr1xu55m+5L2NIOaooeWdl+WPtyAx5Li75qih5Z2XIDLpgJrkv6EgM+W9lemfsyA05qGl5o6lIDVwY20gMOacquaJvuWIsOWFt+S9k+aooeWdl1xu5Y2B5L2N5Liq5L2NIOWFt+S9k+WRveS7pFxuICAgIDAwIOacquefpemUmeivrztcbiAgICAwMSDliJ3lp4vljJbplJnor687XG4gICAgMDIg5Y+C5pWw6ZSZ6K+vO1xuICAgIDAzIHdz5o6l5pS25pWw5o2u6ZSZ6K+vO1xuICAgIDA0IOmfs+mikW5hdmlnYXRvcuiOt+WPluWksei0pTtcbiAgICAwNSDmqKHlnZfoh6rouqvmjZ/lnY9cbiAgICAwNiBuYXRpdmUg55u45YWz6ZSZ6K+vXG4gICAgKi8gXG5cblxuLy8jIHNvdXJjZVVSTD13ZWJwYWNrOi8vQHJvbmdjbG91ZC9yY2xpdmVyb29tbGliLy4vc3JjL2xvZ2VyLnRzPyIpOy8qKiovfSwvKioqLyIuL3NyYy9tb2R1bGVzL2ltL2luZGV4LnRzIjovKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlwKICAhKioqIC4vc3JjL21vZHVsZXMvaW0vaW5kZXgudHMgKioqIQogIFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovIC8qKiovZnVuY3Rpb24gc3JjTW9kdWxlc0ltSW5kZXhUcyhfX3VudXNlZF93ZWJwYWNrX21vZHVsZSxfX3dlYnBhY2tfZXhwb3J0c19fLF9fd2VicGFja19yZXF1aXJlX18pe2V2YWwoIl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0ICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCB7XG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZGVmYXVsdFwiOiAoKSA9PiAoX19XRUJQQUNLX0RFRkFVTFRfRVhQT1JUX18pXG4vKiBoYXJtb255IGV4cG9ydCAqLyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfc3RydWN0dXJlX21vZHVsZXNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uLy4uL3N0cnVjdHVyZS9tb2R1bGVzICovIFwiLi9zcmMvc3RydWN0dXJlL21vZHVsZXMudHNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JvbmdjbG91ZF9pbWxpYl9uZXh0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISBAcm9uZ2Nsb3VkL2ltbGliLW5leHQgKi8gXCIuL25vZGVfbW9kdWxlcy9Acm9uZ2Nsb3VkL2ltbGliLW5leHQvZGlzdC9pbmRleC5lc20uanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2NvbmZpZ19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vLi4vY29uZmlnICovIFwiLi9zcmMvY29uZmlnLnRzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9sb2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vLi4vbG9nZXIgKi8gXCIuL3NyYy9sb2dlci50c1wiKTtcbnZhciBfX2V4dGVuZHMgPSAodW5kZWZpbmVkICYmIHVuZGVmaW5lZC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xudmFyIF9fYXNzaWduID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19hc3NpZ24pIHx8IGZ1bmN0aW9uICgpIHtcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24odCkge1xuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpXG4gICAgICAgICAgICAgICAgdFtwXSA9IHNbcF07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfTtcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn07XG52YXIgX19hd2FpdGVyID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG52YXIgX19nZW5lcmF0b3IgPSAodW5kZWZpbmVkICYmIHVuZGVmaW5lZC5fX2dlbmVyYXRvcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIGJvZHkpIHtcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xuICAgICAgICB3aGlsZSAoXykgdHJ5IHtcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xuICAgIH1cbn07XG5cblxuXG5cbnZhciBJTSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoSU0sIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gSU0oYXBwa2V5KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnN0YXRlcyA9IDA7IC8vMOWIneWni+WMluacquWujOaIkCAx5bCx57uqIDLmraPlnKjliJ3lp4vljJYgIDnmtY/op4jlmajkuI3mlK/mjIFcbiAgICAgICAgX3RoaXMudXNlcklkID0gJyc7XG4gICAgICAgIF90aGlzLnJvb21JZCA9ICcnO1xuICAgICAgICBfdGhpcy5zZWF0SW5mb0xpc3QgPSBbXTtcbiAgICAgICAgX3RoaXMuaW5pdChhcHBrZXkpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIElNLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKGFwcGtleSkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaW0sIEV2ZW50cywgdGhhdDtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGltID0gX3JvbmdjbG91ZF9pbWxpYl9uZXh0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX187XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBpbS5fX2FkZFNES1ZlcnNpb24oJ3JjbGl2ZXJvb21saWInLCAnMi4wLjAnKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGltLmluaXQoeyBhcHBrZXk6IGFwcGtleSB9KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIEV2ZW50cyA9IGltLkV2ZW50cztcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhdFJvb20gPSBpbTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYm9keSA9IGltO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWdNc2cgPSBpbS5yZWdpc3Rlck1lc3NhZ2VUeXBlKCdSQzpDbWRNc2cnLCB0cnVlLCB0cnVlLCBbXSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbS5hZGRFdmVudExpc3RlbmVyKEV2ZW50cy5NRVNTQUdFUywgZnVuY3Rpb24gKG0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IG0ubWVzc2FnZXNbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cobSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cobWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UuaXNPZmZMaW5lTWVzc2FnZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAobWVzc2FnZS5tZXNzYWdlVHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiUkM6VlJMUmVmcmVzaE1zZ1wiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5lbWl0KFwib25Sb29tTm90aWZpY2F0aW9uUmVjZWl2ZWRcIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IG1lc3NhZ2UuY29udGVudC5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IG1lc3NhZ2UuY29udGVudC5jb250ZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1lc3NhZ2UuY29udGVudC5uYW1lLnNwbGl0KFwiX1wiKVswXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJSQ0F1ZGllbmNlSm9pblJvb21cIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5jaGF0Um9vbS5nZXRDaGF0Um9vbUluZm8odGhhdC5yb29tSWQsIHsgY291bnQ6IDAsIG9yZGVyOiAwIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5lbWl0KFwib25BdWRpZW5jZUVudGVyXCIsIHJlc3VsdC51c2VyQ291bnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhhdC5lbWl0KFwib25BdWRpZW5jZUVudGVyXCIsIHsgdXNlcklkOiBtZXNzYWdlLmNvbnRlbnQuY29udGVudCB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cobWVzc2FnZS5jb250ZW50LmNvbnRlbnQsIFwi6L+b5p2l5LqGXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiUkNBdWRpZW5jZUxlYXZlUm9vbVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmNoYXRSb29tLmdldENoYXRSb29tSW5mbyh0aGF0LnJvb21JZCwgeyBjb3VudDogMCwgb3JkZXI6IDAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmVtaXQoXCJvbkF1ZGllbmNlRXhpdFwiLCByZXN1bHQudXNlckNvdW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKG1lc3NhZ2UuY29udGVudC5jb250ZW50LCBcIuWHuuWOu+S6hlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlJDVXNlck9uU2VhdFNwZWFraW5nS2V5XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJvcmlnaW5rZXk6XCIsIG1lc3NhZ2UuY29udGVudC5uYW1lKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmVtaXQoXCJzcGVha2luZ1N0YXR1c0NoZW5nZVwiLCB7IGluZGV4OiBtZXNzYWdlLmNvbnRlbnQubmFtZS5zcGxpdChcIl9cIilbMV0sIHNwZWFraW5nOiBtZXNzYWdlLmNvbnRlbnQuY29udGVudCB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlZvaWNlUm9vbUNsb3NlZFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwib3JpZ2lua2V5OlwiLCBtZXNzYWdlLmNvbnRlbnQubmFtZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5lbWl0KFwiVm9pY2VSb29tQ2xvc2VkXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiVm9pY2VSb29tQmFja2dyb3VuZENoYW5nZWRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIm9yaWdpbmtleTpcIiwgbWVzc2FnZS5jb250ZW50Lm5hbWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuZW1pdChcIlZvaWNlUm9vbUJhY2tncm91bmRDaGFuZ2VkXCIsIG1lc3NhZ2UuY29udGVudC5jb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlZvaWNlUm9vbUFncmVlTWFuYWdlUGlja1wiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwib3JpZ2lua2V5OlwiLCBtZXNzYWdlLmNvbnRlbnQubmFtZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5lbWl0KFwiVm9pY2VSb29tQWdyZWVNYW5hZ2VQaWNrXCIsIG1lc3NhZ2UuY29udGVudC5jb250ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlZvaWNlUm9vbVJlamVjdE1hbmFnZVBpY2tcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIm9yaWdpbmtleTpcIiwgbWVzc2FnZS5jb250ZW50Lm5hbWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuZW1pdChcIlZvaWNlUm9vbVJlamVjdE1hbmFnZVBpY2tcIiwgbWVzc2FnZS5jb250ZW50LmNvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiUkM6Q21kTXNnXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1lc3NhZ2UuY29udGVudC5uYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlJPT01fQ09NTUFORF9VU0VSX0VOVEVSXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi5pyJ5Lq66L+b5p2l5LqGOjpcIiwgbWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuZW1pdChcInVzZXJFbnRlclwiLCBtZXNzYWdlLnNlbmRlclVzZXJJZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuY2hhdFJvb20uZ2V0Q2hhdFJvb21JbmZvKHRoYXQucm9vbUlkLCB7IGNvdW50OiAwLCBvcmRlcjogMCB9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuZW1pdChcIm9uQXVkaWVuY2VFbnRlclwiLCByZXN1bHQudXNlckNvdW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJST09NX0NPTU1BTkRfVVNFUl9FWElUXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuZW1pdChcInVzZXJFeGl0XCIsIG1lc3NhZ2Uuc2VuZGVyVXNlcklkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5jaGF0Um9vbS5nZXRDaGF0Um9vbUluZm8odGhhdC5yb29tSWQsIHsgY291bnQ6IDAsIG9yZGVyOiAwIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5lbWl0KFwib25BdWRpZW5jZUV4aXRcIiwgcmVzdWx0LnVzZXJDb3VudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiUk9PTV9DT01NQU5EX0lOVklUQVRJT05cIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJoZXJyZSA6XCIsIG1lc3NhZ2UuY29udGVudC5kYXRhLnN1YnN0cigwLCAyOCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+mCgOivt+S4ium6pua2iOaBr1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3RvZG8gIHplbmdqaWEgbGUgTElWRV9WSURFT19JTlZJVEFUSU9OX1JFSkVDVGU1YjM3YmZhLTkzMzMtNGE3Ni05YzE1LTJjMWFlNTc1Y2QyNVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5jb250ZW50LmRhdGEgPT0gXCJMSVZFX1ZJREVPX0lOVklUQVRJT05fQ0FOQ0VMXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuZW1pdChcIm9uSW52aXRhdGlvbkNhbmNlbFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChtZXNzYWdlLmNvbnRlbnQuZGF0YS5zdWJzdHIoMCwgMjgpID09IFwiTElWRV9WSURFT19JTlZJVEFUSU9OX1JFSkVDVFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmVtaXQoXCJpbnZpdGF0aW9uUmVqZWN0ZWRcIiwgbWVzc2FnZS5jb250ZW50LmRhdGEucmVwbGFjZShcIkxJVkVfVklERU9fSU5WSVRBVElPTl9SRUpFQ1RcIiwgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChtZXNzYWdlLmNvbnRlbnQuZGF0YS5zdWJzdHIoMCwgMjgpID09IFwiTElWRV9WSURFT19JTlZJVEFUSU9OX0FDQ0VQVFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmVtaXQoXCJpbnZpdGF0aW9uQWNjZXB0ZWRcIiwgbWVzc2FnZS5jb250ZW50LmRhdGEucmVwbGFjZShcIkxJVkVfVklERU9fSU5WSVRBVElPTl9BQ0NFUFRcIiwgJycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhcnIgPSBtZXNzYWdlLmNvbnRlbnQuZGF0YS5yZXBsYWNlKFwiTElWRV9WSURFT19JTlZJVEFUSU9OX05PUk1BTFwiLCAnJykuc3BsaXQoXCJfX1JDTFZfX1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v6KKr6YKA6K+355qEaWQgYXJy44CQMOOAkSDpgoDor7fkuIogYXJy44CQMeOAkeWPt+m6puS9jVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5lbWl0KFwib25JbnZpdGF0aW9uXCIsIHsgaWQ6IGFyclswXSwgc2VhdEluZGV4OiBhcnJbMV0gfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlJPT01fQ09NTUFORF9SRVFVRVNUXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi6YKA6K+355u45YWz5raI5oGvXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5jb250ZW50LmRhdGEuc3Vic3RyKDAsIDI1KSA9PSBcIkxJVkVfVklERU9fUkVRVUVTVF9SRUpFQ1RcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5lbWl0KFwiUmVxdWVzdFNlYXRSZWplY3RlZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuZW1pdChcIlJlcXVlc3RTZWF0QWNjZXB0ZWRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlJPT01fQ09NTUFORF9VU0VSX0tJQ0tfT1VUX1JPT01cIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJ0aVwiLCBtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5lbWl0KFwiUkNLaWNrVXNlck91dFJvb21Db250ZW50XCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldElkOiBtZXNzYWdlLmNvbnRlbnQuZGF0YS5zcGxpdCgnX19SQ0xWX18nKVswXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZDogbWVzc2FnZS5jb250ZW50LmRhdGEuc3BsaXQoJ19fUkNMVl9fJylbMV0sIC8v6Lii5Lq66ICFXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiUkM6VlJMSW52aXRlTXNnXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1lc3NhZ2UuY29udGVudC5jb250ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlJDS2lja1VzZXJPdXRSb29tQ29udGVudFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmVtaXQoXCJSQ0tpY2tVc2VyT3V0Um9vbUNvbnRlbnRcIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0SWQ6IG1lc3NhZ2UuY29udGVudC50YXJnZXRJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZDogbWVzc2FnZS5jb250ZW50LnNlbmRVc2VySWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwi6KKr6Lii5LqGXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiUkNQaWNrZXJVc2VyU2VhdENvbnRlbnRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5lbWl0KFwiUkNQaWNrZXJVc2VyU2VhdENvbnRlbnRcIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0SWQ6IG1lc3NhZ2UuY29udGVudC50YXJnZXRJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRVc2VySWQ6IG1lc3NhZ2UuY29udGVudC5zZW5kVXNlcklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIuiiq+aKseS4ium6plwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJSQ01pYzpsb2dpbkRldmljZU1zZ1wiOiAvL+Wkmuerr+eZu+W9lVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5lbWl0KFwibW9cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuZW1pdChcIm9uTWVzc2FnZVJlY2VpdmVkXCIsIG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICog5q2j5Zyo6ZO+5o6l55qE5LqL5Lu254q25oCBXG4gICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgaW0uYWRkRXZlbnRMaXN0ZW5lcihFdmVudHMuQ09OTkVDVElORywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCfmraPlnKjpk77mjqUuLi4nKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIOmTvuaOpeWIsOacjeWKoeWZqOS8muinpuWPkei/meS4quS6i+S7tlxuICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICBpbS5hZGRFdmVudExpc3RlbmVyKEV2ZW50cy5DT05ORUNURUQsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn6L+e5o6l5oiQ5YqfJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5lbWl0KFwicmVhZHlcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICog5omL5Yqo6LCD55SoIGRpc2Nvbm5lY3Qg5pa55rOV5oiW6ICF55So5oi36KKr6Lii5LiL57q/IOS8muinpuWPkei/meS4quS6i+S7tlxuICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICBpbS5hZGRFdmVudExpc3RlbmVyKEV2ZW50cy5ESVNDT05ORUNULCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5lbWl0KFwiY29ubmVjdGlvQnJlYWtPZmZcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICog6ZO+5o6l5Ye66Zeu6aKY5pe277yM5YaF6YOo6L+b6KGM6YeN5paw6ZO+5o6l77yM5Lya5Ye65Y+R6L+Z5Liq5LqL5Lu2XG4gICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIGltLmFkZEV2ZW50TGlzdGVuZXIoRXZlbnRzLlNVU1BFTkQsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygn6ZO+5o6l5Lit5patLFNESyDkvJrlsJ3or5Xph43ov54s5Lia5Yqh5bGC5peg6ZyA5YWz5b+DJylcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy/ogYrlpKnlrqRLVuabtOaWsFxuICAgICAgICAgICAgICAgICAgICAgICAgaW0uYWRkRXZlbnRMaXN0ZW5lcihFdmVudHMuQ0hBVFJPT00sIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudFsnY2hhdHJvb21EZXN0cm95ZWQnXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmVtaXQoXCJjaGF0cm9vbURlc3Ryb3llZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOebkeWQrOS8muivneWIl+ihqOWPmOabtOS6i+S7tlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb252ZXJzYXRpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKFwiY29udmVyc2F0aW9uXCIsIGV2ZW50KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiDogYrlpKnlrqQgS1Yg5a2Y5YKo5pWw5o2u5pu05pawICBeWzAtOV0qJFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXBkYXRlZEVudHJpZXMgPSBldmVudC51cGRhdGVkRW50cmllcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJrdnVwPT09PT09PT09PT09PT09PT09XCIsIGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmNoYXRyb29tRGVzdHJveWVkKSB7IC8v5oi/6Ze06KKr5pGn5q+BXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmVtaXQoXCJjaGF0cm9vbURlc3Ryb3llZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXVwZGF0ZWRFbnRyaWVzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOyAvL+aXoOaViOm6puS9jeS4jeWkhOeQhumBv+WFjeaKpemUmVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkRW50cmllcy5mb3JFYWNoKGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAob2JqLmtleS5zcGxpdChcIl9cIilbMF0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiUkNSb29tSW5mb0tleVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm9vbUluZm8gPSBKU09OLnBhcnNlKG9iai52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuZW1pdChcInJvb21JbmZvRGlkVXBkYXRlXCIsIHsgcm9vbUluZm86IHJvb21JbmZvIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhhdC5zZWF0SW5kZXggPiByb29tSW5mby5zZWF0Q291bnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9sb2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fLmRlZmF1bHQubG9nKFwi5o6l5Y+X5Yiw5raI5oGv5LiL6bqmXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5lbWl0KFwibGVhdmVTZWF0XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGF0LnNlYXRJbmZvTGlzdC5sZW5ndGggPiByb29tSW5mby5zZWF0Q291bnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuc2VhdEluZm9MaXN0Lmxlbmd0aCA9IHJvb21JbmZvLnNlYXRDb3VudDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiUkNTZWF0SW5mb1NlYXRQYXJ0UHJlZml4S2V5XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v6bqm5L2N5pON5L2cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v562b5p+l6KKr5pu05pS555qE6bqm5L2NXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCd0aGF0LnNlYXRJbmZvTGlzdCcsIG9iai52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyb29tSW5mbyAmJiAob2JqLmtleS5zcGxpdChcIl9cIilbMV0gPj0gcm9vbUluZm8uc2VhdENvdW50KSkgeyAvL+Wkp+S6juW9k+WJjXNlYXRDb3VudOeahOWxnuaAp+S4jeWkhOeQhlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50U2VhdEluZm8gPSB0aGF0LnNlYXRJbmZvTGlzdFtOdW1iZXIob2JqLmtleS5zcGxpdChcIl9cIilbMV0pXTsgLy/lvZPliY3puqbkvY3kv6Hmga9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFvYmoudmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47IC8vIOm6puS9jeS/oeaBr+S4jeWujOaVtOebtOaOpei/lOWbniBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld1NlYXRJbmZvID0gSlNPTi5wYXJzZShvYmoudmFsdWUpOyAvL+S8oOWFpeeahOm6puS9jeS/oeaBr1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhhdC5zZWF0SW5kZXggPT0gTnVtYmVyKG9iai5rZXkuc3BsaXQoXCJfXCIpWzFdKSkgeyAvL+W9k+WJjeWcqOiiq+aTjeS9nOeahOm6puS9jeS4ilxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCLlvZPliY3puqbkvY1cIiwgdGhhdC5zZWF0SW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJvbGRcIixKU09OLnN0cmluZ2lmeShjdXJyZW50U2VhdEluZm8pKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJuZXdcIiwgSlNPTi5zdHJpbmdpZnkobmV3U2VhdEluZm8pKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIGN1cnJlbnRTZWF0SW5mbykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoa2V5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ1c2VySWRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50U2VhdEluZm8udXNlcklkICE9IG5ld1NlYXRJbmZvLnVzZXJJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuZW1pdChcImxlYXZlU2VhdFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwibXV0ZVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTZWF0SW5mby5tdXRlICE9IG5ld1NlYXRJbmZvLm11dGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmVtaXQoXCJtdXRlXCIsIG5ld1NlYXRJbmZvLm11dGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJzdGF0dXNcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoTnVtYmVyKG5ld1NlYXRJbmZvLnN0YXR1cykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIF9jb25maWdfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXy5SQ1NlYXRTdGF0dXMuUkNTZWF0U3RhdHVzRW1wdHk6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9sb2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fLmRlZmF1bHQubG9nKFwi5o6l5Y+X5Yiw5raI5oGv5LiL6bqmXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmVtaXQoXCJsZWF2ZVNlYXRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgX2NvbmZpZ19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fLlJDU2VhdFN0YXR1cy5SQ1NlYXRTdGF0dXNMb2NraW5nOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbG9nZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXy5kZWZhdWx0LmxvZyhcIumUgem6puS9jeS4i+m6plwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5lbWl0KFwibGVhdmVTZWF0XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LnNlYXRJbmZvTGlzdFtvYmoua2V5LnNwbGl0KFwiX1wiKVsxXV0gPSBKU09OLnBhcnNlKG9iai52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuZW1pdChcInNlYXRJbmZvRGlkVXBkYXRlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiUkNSZXF1ZXN0U2VhdFByZWZpeEtleVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhhdC51c2VySWQgJiYgb2JqLmtleS5zcGxpdChcIl9cIilbMV0gPT0gdGhhdC51c2VySWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmoudmFsdWUgPT0gXCJSQ1JlcXVlc3RTZWF0Q29udGVudEFjY2VwdFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5lbWl0KFwiUmVxdWVzdFNlYXRBY2NlcHRlZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG9iai52YWx1ZSA9PSBcIlJDUmVxdWVzdFNlYXRDb250ZW50RGVueVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5lbWl0KFwiUmVxdWVzdFNlYXRSZWplY3RlZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmVtaXQoXCJSZXF1ZXN0U2VhdExpc3RDaGFuZ2VkXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmoua2V5LnN1YnN0cigwLCAyMykgPT0gXCJMSVZFX1ZJREVPX1JFUVVFU1RfUFJFX1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cob2JqKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhhdC51c2VySWQgJiYgb2JqLmtleS5zdWJzdHIoMjMpID09IHRoYXQudXNlcklkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmoudmFsdWUuc3BsaXQoXCItXCIpWzBdID09IFwiTElWRV9WSURFT19SRVFVRVNUX05PUk1BTFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmVtaXQoXCJSZXF1ZXN0U2VhdEFjY2VwdGVkXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuZW1pdChcIlJlcXVlc3RTZWF0TGlzdENoYW5nZWRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqLmtleS5zdWJzdHIoMCwgMTQpID09IFwiUk9PTV9JTkZPX1BSRV9cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAob2JqLmtleS5zdWJzdHIoMTQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJuYW1lXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9iai52YWx1ZSA9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuX3Jvb21OYW1lID0gb2JqLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5fcm9vbU5hbWUgPSBKU09OLnBhcnNlKG9iai52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInNoaWVsZHNcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuX3Jvb21TaGllbGRzID0gSlNPTi5wYXJzZShvYmoudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJub3RpY2VcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqLnZhbHVlID09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5fcm9vbU5vdGljZSA9IG9iai52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuX3Jvb21Ob3RpY2UgPSBKU09OLnBhcnNlKG9iai52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIkZyZWVFbnRlclNlYXRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYmoudmFsdWUgPT0gXCIxXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0Ll9GcmVlRW50ZXJTZWF0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuX0ZyZWVFbnRlclNlYXQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5rZXkuc3Vic3RyKDAsIDI1KSA9PSBcIkxJVkVfVklERU9fU0VBVF9JTkZPX1BSRV9cIikgeyAvL+ebtOaSreabtOaWsOm6puS9jemAu+i+kVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi55u05pKt6bqm5L2N5L+h5oGv5pu05pawXCIsIG9iai5rZXkuc3Vic3RyKDI1LCAxKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRTZWF0SW5mbyA9IHRoYXQuc2VhdEluZm9MaXN0W051bWJlcihvYmoua2V5LnN1YnN0cigyNSwgMSkpXTsgLy/lvZPliY3puqbkvY3kv6Hmga9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImN1cnJlbnRTZWF0SW5mb1wiLCBjdXJyZW50U2VhdEluZm8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghb2JqLnZhbHVlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47IC8vIOm6puS9jeS/oeaBr+S4jeWujOaVtOebtOaOpei/lOWbniBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV3U2VhdEluZm8gPSBKU09OLnBhcnNlKG9iai52YWx1ZSk7IC8v5Lyg5YWl55qE6bqm5L2N5L+h5oGvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoYXQuc2VhdEluZGV4ID09IE51bWJlcihvYmoua2V5LnN1YnN0cigyNSwgMSkpKSB7IC8v5b2T5YmN5Zyo6KKr5pON5L2c55qE6bqm5L2N5LiKXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi5b2T5YmN6bqm5L2NXCIsIHRoYXQuc2VhdEluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIGN1cnJlbnRTZWF0SW5mbykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwidXNlcklkXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50U2VhdEluZm8udXNlcklkICE9IG5ld1NlYXRJbmZvLnVzZXJJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5lbWl0KFwibGVhdmVTZWF0XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJtdXRlXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50U2VhdEluZm8ubXV0ZSAhPSBuZXdTZWF0SW5mby5tdXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmVtaXQoXCJtdXRlXCIsIG5ld1NlYXRJbmZvLm11dGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJzdGF0dXNcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1NlYXRJbmZvLnN0YXR1cyAmJiBuZXdTZWF0SW5mby5zdGF0dXMgIT0gY3VycmVudFNlYXRJbmZvLnN0YXR1cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChOdW1iZXIobmV3U2VhdEluZm8uc3RhdHVzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgX2NvbmZpZ19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fLlJDU2VhdFN0YXR1cy5SQ1NlYXRTdGF0dXNVc2luZzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2xvZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18uZGVmYXVsdC5sb2coXCLmjqXlj5fliLDmtojmga/kuIrpuqZcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuZW1pdChcImVudGVyU2VhdFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBfY29uZmlnX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18uUkNTZWF0U3RhdHVzLlJDU2VhdFN0YXR1c0VtcHR5OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbG9nZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXy5kZWZhdWx0LmxvZyhcIuaOpeWPl+WIsOa2iOaBr+S4i+m6plwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5lbWl0KFwibGVhdmVTZWF0XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIF9jb25maWdfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXy5SQ1NlYXRTdGF0dXMuUkNTZWF0U3RhdHVzTG9ja2luZzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2xvZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18uZGVmYXVsdC5sb2coXCLplIHpuqbkvY3kuIvpuqZcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuZW1pdChcImxlYXZlU2VhdFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIuabtOaWsOm6puS9jVwiLCBOdW1iZXIob2JqLmtleS5zdWJzdHIoMjUsIDEpKSwgdGhhdC5zZWF0SW5mb0xpc3RbTnVtYmVyKG9iai5rZXkuc3Vic3RyKDI1LCAxKSldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKE51bWJlcihvYmoua2V5LnN1YnN0cigyNSwgMSkpID09IDEpICYmIChuZXdTZWF0SW5mby51c2VySWQgPT0gdGhhdC51c2VySWQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9sb2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fLmRlZmF1bHQubG9nKFwi55u05pKt56uv5o6l5Y+X5Yiw6bqm5L2N5raI5oGv6Ieq5Yqo5a+56b2Q6YC76L6RXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmVtaXQoXCJlbnRlclNlYXRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v56e76Zmk5ouN6bqm5bqP5Y+3XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuc2VhdEluZm9SZW1vdmUoXCJMSVZFX1ZJREVPX1JFUVVFU1RfUFJFX1wiICsgdGhhdC51c2VySWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmVtaXQoXCJSZXF1ZXN0U2VhdExpc3RDaGFuZ2VkXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LnNlYXRJbmZvTGlzdFtOdW1iZXIob2JqLmtleS5zdWJzdHIoMjUsIDEpKV0gPSBKU09OLnBhcnNlKG9iai52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5lbWl0KFwic2VhdEluZm9EaWRVcGRhdGVcIiwgb2JqKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuZW1pdChcImtleVZhbHVlRGlkVXBkYXRlXCIsIG9iaik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIElNLnByb3RvdHlwZS5jb25uZWN0ID0gZnVuY3Rpb24gKHRva2VuKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuY2hhdFJvb20uY29ubmVjdCh0b2tlbikudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmNvZGUgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5lbWl0KFwiY29ubmVjdFJlYWR5XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS51c2VySWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudXNlcklkID0gcmVzLmRhdGEudXNlcklkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ+aTjeS9nOaIkOWKnzo3MDAwMCc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ+W9k+WJjeeUqOaItyBJZCDkuLrnqbo6NzAwMjknO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy51c2VySWQgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAn6L+e5o6l5pyN5Yqh5Zmo5aSx6LSlOjcwMDAxJztcbiAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgSU0ucHJvdG90eXBlLmpvaW5Sb29tID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRoYXQ7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJqb2lucm9vbVwiLCBvKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJvb21JZCA9IG8ucm9vbUlkO1xuICAgICAgICAgICAgICAgIGlmIChvLnJvb21OYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3Jvb21OYW1lID0gby5yb29tTmFtZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5jaGF0Um9vbS5qb2luQ2hhdFJvb20oby5yb29tSWQsIHtcbiAgICAgICAgICAgICAgICAgICAgY291bnQ6IC0xIC8vIOi/m+WFpeWQjiwg6Ieq5Yqo5ouJ5Y+WIDIwIOadoeiBiuWkqeWupOacgOaWsOa2iOaBr1xuICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBfbG9nZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXy5kZWZhdWx0LmxvZygn5Yqg5YWl6IGK5aSp5a6k5oiQ5YqfJyk7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuZW1pdChcImpvaW5Sb29tXCIsIG8ucm9vbUlkKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBJTS5wcm90b3R5cGUuZ2V0Um9vbUluZm8gPSBmdW5jdGlvbiAocm9vbUlkKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBkYXRhO1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5jaGF0Um9vbS5nZXRBbGxDaGF0Um9vbUVudHJpZXMocm9vbUlkKS50aGVuKGZ1bmN0aW9uIChlbnRyaWVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+iOt+WPluaJgOacieiBiuWkqeWupOWxnuaAp+S/oeaBryBpbiBmdW4nLCBlbnRyaWVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gZW50cmllcy5kYXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChKU09OLnN0cmluZ2lmeShkYXRhKSA9PSAne30nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v56m65oi/6Ze0IOWIneWni+WMlnJvb21pbmZvIHRvZG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2V0TmV3Um9vbSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIuWIneWni+WMluaWsOaIv+mXtC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdGhpcy5yb29tSW5mb1tpXT1KU09OLnBhcnNlKGluZm9baV0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwia2V5OlwiLCBrZXksIFwiZW50cmllczpcIiwgZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrZXkgPT0gXCJSQ1Jvb21JbmZvS2V5XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnJvb21JbmZvID0gSlNPTi5wYXJzZShkYXRhW2tleV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZW1pdChcInJvb21JbmZvRGlkVXBkYXRlXCIsIHsgcm9vbUluZm86IF90aGlzLnJvb21JbmZvIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGtleS5zcGxpdChcIl9cIilbMF0gPT0gJ1JDU2VhdEluZm9Vc2VyUGFydFByZWZpeEtleScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNlYXRJbmZvTGlzdFtrZXkuc3BsaXQoXCJfXCIpWzFdXSA9IEpTT04ucGFyc2UoZGF0YVtrZXldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmVtaXQoXCJzZWF0SW5mb0RpZFVwZGF0ZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChrZXkuc3Vic3RyKDAsIDI1KSA9PSBcIkxJVkVfVklERU9fU0VBVF9JTkZPX1BSRV9cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2VhdEluZm9MaXN0W2tleS5zdWJzdHIoMjUsIDEpXSA9IEpTT04ucGFyc2UoZGF0YVtrZXldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmVtaXQoXCJzZWF0SW5mb0RpZFVwZGF0ZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbG9nZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXy5kZWZhdWx0Ll9lcnJvcign6I635Y+W5oi/6Ze05L+h5oGv5aSx6LSlOjcwMDA3Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBJTS5wcm90b3R5cGUuc2V0TmV3Um9vbSA9IGZ1bmN0aW9uIChwYXJtKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBzZWF0Q291bnQsIGt2SW5mbzAsIGt2T2JqLCBpdGVtLCBrZXksIGRlZmF1bHRSb29tSW5mb18xLCB2YWx1ZSwgZGVmYXVsdFNlYXRJbmZvLCBhcnIsIHN0YXJ0LCBpLCBzZWF0Q291bnQsIG9sZFNlYWRDb3VudF8xLCBrZXksIGRlZmF1bHRSb29tSW5mb18yLCB2YWx1ZSwgZGVmYXVsdFNlYXRJbmZvLCBhcnIsIHN0YXJ0LCBpLCBzZWF0TmFtZTtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIuaWsOaIv+mXtFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHRoaXMucm9vbVR5cGUgJiYgdGhpcy5yb29tVHlwZSA9PSBcImxpdmVcIikpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VhdENvdW50ID0gMjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGt2SW5mbzAgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcklkOiB0aGlzLnVzZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtdXRlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyRW5hYmxlVmlkZW86IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJhbWU6IFwie3swLDB9LHsxLDF9fVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2s6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJFbmFibGVBdWRpbzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogMFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGt2T2JqID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiTElWRV9WSURFT19TRUFUX0lORk9fUFJFXzBcIjoga3ZJbmZvMFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGt2T2JqW1wiTElWRV9WSURFT19ST09NX01JWF9UWVBFXCJdID0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGt2T2JqW1wiTElWRV9WSURFT19ST09NX1VTRVJfSURcIl0gPSB0aGlzLnVzZXJJZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaXRlbSBpbiBrdk9iaikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhdFJvb20uZm9yY2VTZXRDaGF0Um9vbUVudHJ5KHRoaXMucm9vbUlkLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogaXRlbSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IEpTT04uc3RyaW5naWZ5KGt2T2JqW2l0ZW1dKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNBdXRvRGVsZXRlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNTZW5kTm90aWZpY2F0aW9uOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb25FeHRyYTogJ0NoYW5nZSBDb3VudCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLorr7nva7lsZ7mgKfmiJDlip9cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXkgPSAnUkNSb29tSW5mb0tleSc7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0Um9vbUluZm9fMSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0ZyZWVFbnRlclNlYXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTG9ja0FsbDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNNdXRlQWxsOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb29tTmFtZTogdGhpcy5fcm9vbU5hbWUgKyBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlYXRDb3VudDogMiAvL+m6puS9jeaVsOmHj1xuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gSlNPTi5zdHJpbmdpZnkoZGVmYXVsdFJvb21JbmZvXzEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGF0Um9vbS5mb3JjZVNldENoYXRSb29tRW50cnkodGhpcy5yb29tSWQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk6IGtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNBdXRvRGVsZXRlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1NlbmROb3RpZmljYXRpb246IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uRXh0cmE6ICdDaGFuZ2UgQ291bnQnXG4gICAgICAgICAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucm9vbUluZm8gPSBkZWZhdWx0Um9vbUluZm9fMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5lbWl0KFwicm9vbUluZm9EaWRVcGRhdGVcIiwgeyByb29tSW5mbzogX3RoaXMucm9vbUluZm8gfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gIHRoaXMuZW1pdCgnc2V0TmV3Um9vbScpXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRTZWF0SW5mbyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG11dGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJFbmFibGVWaWRlbzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcmFtZTogXCJ7ezAsMH0sezEsMX19XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jazogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlckVuYWJsZUF1ZGlvOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiAwXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJyID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5yb29tSW5mbyAmJiB0aGlzLnJvb21JbmZvLnNlYXRDb3VudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlYXRDb3VudCA9IHRoaXMucm9vbUluZm8uc2VhdENvdW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VhdEluZm9MaXN0Lmxlbmd0aCkgeyAvL+W3sue7j+WtmOWcqOeahOaIv+mXtOmHjeaWsOiuvue9ruW6p+S9jeaVsFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0ID0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcnIucHVzaCh0aGlzLnNlYXRJbmZvTGlzdFswXSk7IC8v5Y6f5pys55qEMOWPt+m6puS9jeS4jeWKqFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IDEwOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcnIucHVzaChfX2Fzc2lnbih7fSwgZGVmYXVsdFNlYXRJbmZvKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJyW2ldLmluZGV4ID0gaTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIFByb21pc2UuYWxsKGFyci5tYXAoZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7IHJldHVybiBfX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpdGVtVmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1WYWx1ZSA9IGl0ZW07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggPCBkZWZhdWx0Um9vbUluZm9fMS5zZWF0Q291bnQpIHsgLy/mnInmlYjpuqbkvY1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYXRSb29tLmZvcmNlU2V0Q2hhdFJvb21FbnRyeSh0aGlzLnJvb21JZCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk6IFwiTElWRV9WSURFT19TRUFUX0lORk9fUFJFX1wiICsgaW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBKU09OLnN0cmluZ2lmeShpdGVtVmFsdWUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0F1dG9EZWxldGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1NlbmROb3RpZmljYXRpb246IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvbkV4dHJhOiAnQ2hhbmdlIENvdW50J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIuiuvue9ruWxnuaAp+aIkOWKn1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7IH0pKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyci5sZW5ndGggPSBkZWZhdWx0Um9vbUluZm9fMS5zZWF0Q291bnQ7IC8v5Yig6Zmk5pys5Zyw5peg5pWI6bqm5L2NXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlYXRJbmZvTGlzdCA9IGFycjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIuWIneWni+WMlnNldGxpc3RcIiwgdGhpcy5zZWF0SW5mb0xpc3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdzZXROZXdSb29tJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA0XTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgc2VhdENvdW50ID0gOTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnJvb21JbmZvICYmIHRoaXMucm9vbUluZm8uc2VhdENvdW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VhdENvdW50ID0gdGhpcy5yb29tSW5mby5zZWF0Q291bnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xkU2VhZENvdW50XzEgPSB0aGlzLnJvb21JbmZvLnNlYXRDb3VudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJtICYmIHBhcm0uc2VhdENvdW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VhdENvdW50ID0gcGFybS5zZWF0Q291bnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXkgPSAnUkNSb29tSW5mb0tleSc7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0Um9vbUluZm9fMiA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0ZyZWVFbnRlclNlYXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTG9ja0FsbDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNNdXRlQWxsOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb29tTmFtZTogdGhpcy5fcm9vbU5hbWUgKyBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlYXRDb3VudDogc2VhdENvdW50IC8v6bqm5L2N5pWw6YePXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBKU09OLnN0cmluZ2lmeShkZWZhdWx0Um9vbUluZm9fMik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYXRSb29tLmZvcmNlU2V0Q2hhdFJvb21FbnRyeSh0aGlzLnJvb21JZCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleToga2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0F1dG9EZWxldGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzU2VuZE5vdGlmaWNhdGlvbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb25FeHRyYTogJ0NoYW5nZSBDb3VudCdcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5yb29tSW5mbyA9IGRlZmF1bHRSb29tSW5mb18yO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmVtaXQoXCJyb29tSW5mb0RpZFVwZGF0ZVwiLCB7IHJvb21JbmZvOiBfdGhpcy5yb29tSW5mbyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgdGhpcy5lbWl0KCdzZXROZXdSb29tJylcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFNlYXRJbmZvID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtdXRlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGVha2luZzogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJyID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWF0SW5mb0xpc3QubGVuZ3RoKSB7IC8v5bey57uP5a2Y5Zyo55qE5oi/6Ze06YeN5paw6K6+572u5bqn5L2N5pWwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnQgPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyci5wdXNoKHRoaXMuc2VhdEluZm9MaXN0WzBdKTsgLy/ljp/mnKznmoQw5Y+36bqm5L2N5LiN5YqoXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgMTA7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlYXROYW1lID0gXCJSQ1NlYXRJbmZvU2VhdFBhcnRQcmVmaXhLZXlfXCIgKyBpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwic2VhdDpcIiwgaSwgc2VhdE5hbWUsIEpTT04uc3RyaW5naWZ5KGRlZmF1bHRTZWF0SW5mbykpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXJyLnB1c2goSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShkZWZhdWx0U2VhdEluZm8pKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcnIucHVzaChfX2Fzc2lnbih7fSwgZGVmYXVsdFNlYXRJbmZvKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBQcm9taXNlLmFsbChhcnIubWFwKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkgeyByZXR1cm4gX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbVZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtVmFsdWUgPSBpdGVtO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4IDwgZGVmYXVsdFJvb21JbmZvXzIuc2VhdENvdW50KSB7IC8v5pyJ5pWI6bqm5L2NXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGF0Um9vbS5mb3JjZVNldENoYXRSb29tRW50cnkodGhpcy5yb29tSWQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBcIlJDU2VhdEluZm9TZWF0UGFydFByZWZpeEtleV9cIiArIGluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogSlNPTi5zdHJpbmdpZnkoaXRlbVZhbHVlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNBdXRvRGVsZXRlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNTZW5kTm90aWZpY2F0aW9uOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb25FeHRyYTogJ0NoYW5nZSBDb3VudCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLorr7nva7lsZ7mgKfmiJDlip9cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsgLy/ml6DmlYjpuqbkvY3liKDpmaRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggPCBvbGRTZWFkQ291bnRfMSkgeyAvL+WOn+aciem6puS9jei2heWHuumDqOWIhuWIoOmZpFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiZGVsZWluZ1wiLCBcIlJDU2VhdEluZm9TZWF0UGFydFByZWZpeEtleV9cIiArIGluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5jaGF0Um9vbS5mb3JjZVJlbW92ZUNoYXRSb29tRW50cnkoX3RoaXMucm9vbUlkLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBcIlJDU2VhdEluZm9TZWF0UGFydFByZWZpeEtleV9cIiArIGluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzU2VuZE5vdGlmaWNhdGlvbjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uRXh0cmE6ICdDaGFuZ2Ugcm9sZSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ+WIoOmZpOiBiuWkqeWupOWxnuaAp+aIkOWKnycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIChvbGRTZWFkQ291bnRfMSAtIGluZGV4KSAqIDMwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsgfSkpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJyLmxlbmd0aCA9IGRlZmF1bHRSb29tSW5mb18yLnNlYXRDb3VudDsgLy/liKDpmaTmnKzlnLDml6DmlYjpuqbkvY1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VhdEluZm9MaXN0ID0gYXJyO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdzZXROZXdSb29tJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDQ7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8v5pu05paw5raI5oGvXG4gICAgSU0ucHJvdG90eXBlLm1lc3NhZ2VVcGRhdGUgPSBmdW5jdGlvbiAobWVzc2FnZVR5cGUsIGNvbnRlbnQpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCLmraPlnKjlj5HpgIHnmoTmtojmga/kvZNcIiwgY29udGVudCk7XG4gICAgICAgIHZhciBQZXJzb25NZXNzYWdlID0gdGhpcy5jaGF0Um9vbS5yZWdpc3Rlck1lc3NhZ2VUeXBlKG1lc3NhZ2VUeXBlLCBmYWxzZSwgZmFsc2UsIFtdKTtcbiAgICAgICAgdmFyIG1lc3NhZ2UgPSBuZXcgUGVyc29uTWVzc2FnZShjb250ZW50KTtcbiAgICAgICAgdmFyIGFyciA9IFtcbiAgICAgICAgICAgIHRoaXMuY2hhdFJvb21cbiAgICAgICAgICAgICAgICAuc2VuZE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgIGNvbnZlcnNhdGlvblR5cGU6IHRoaXMuY2hhdFJvb20uQ29udmVyc2F0aW9uVHlwZS5DSEFUUk9PTSxcbiAgICAgICAgICAgICAgICB0YXJnZXRJZDogdGhpcy5yb29tSWRcbiAgICAgICAgICAgIH0sIG1lc3NhZ2UpLFxuICAgICAgICBdO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoYXJyKTtcbiAgICB9O1xuICAgIElNLnByb3RvdHlwZS5sZWF2ZVJvb20gPSBmdW5jdGlvbiAocm9vbWlkKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMubGV2ZVJvb21NZXNzYWdlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmNoYXRSb29tICYmIF90aGlzLmNoYXRSb29tLnF1aXRDaGF0Um9vbShyb29taWQpLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v6YCA5Ye65pe25riF55CG5oi/6Ze05pWw5o2uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucm9vbUluZm8gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNlYXRJbmZvTGlzdC5sZW5ndGggPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9sb2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fLmRlZmF1bHQubG9nKCfpgIDlh7rogYrlpKnlrqTmiJDlip8nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5tZXNzYWdlVXBkYXRlKFwiUkM6VlJMUmVmcmVzaE1zZ1wiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiUkNBdWRpZW5jZUxlYXZlUm9vbVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBfdGhpcy51c2VySWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgSU0ucHJvdG90eXBlLmVudGVyUm9vbU1lc3NhZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBtZXNzYWdlID0ge1xuICAgICAgICAgICAgbWVzc2FnZVR5cGU6IFwiUkM6VlJMUmVmcmVzaE1zZ1wiLFxuICAgICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwiUkNBdWRpZW5jZUpvaW5Sb29tXCIsXG4gICAgICAgICAgICAgICAgY29udGVudDogdGhpcy51c2VySWRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgY29uc29sZS5sb2coXCLlvIDlp4vlj5HpgIHov5vmiL/pl7Tmtojmga9cIiwgdGhpcy5jaGF0Um9vbSwgdGhpcy5yb29tVHlwZSk7XG4gICAgICAgIGlmICh0aGlzLnJvb21UeXBlID09IFwibGl2ZVwiKSB7XG4gICAgICAgICAgICB0aGlzLmNoYXRSb29tLmdldENoYXRSb29tSW5mbyh0aGlzLnJvb21JZCwgeyBjb3VudDogMCwgb3JkZXI6IDAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgdmFyIHBtc2cgPSBuZXcgX3RoaXMucmVnTXNnKHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJST09NX0NPTU1BTkRfVVNFUl9FTlRFUlwiLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiBfdGhpcy51c2VySWQgKyBcIl9fUkNMVl9fXCIgKyByZXN1bHQuZGF0YS51c2VyQ291bnRcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBfdGhpcy5jaGF0Um9vbS5zZW5kTWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgICAgIGNvbnZlcnNhdGlvblR5cGU6IF90aGlzLmNoYXRSb29tLkNvbnZlcnNhdGlvblR5cGUuQ0hBVFJPT00sXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldElkOiBfdGhpcy5yb29tSWRcbiAgICAgICAgICAgICAgICB9LCBwbXNnKS50aGVuKGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCflj5HpgIHov5vmiL/pl7Tmtojmga/miJDlip8nLCBtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIF9sb2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fLmRlZmF1bHQuX2Vycm9yKCflj5HpgIHov5vmiL/pl7Tmtojmga/lpLHotKUnKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jaGF0Um9vbS5zZW5kTWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgY29udmVyc2F0aW9uVHlwZTogdGhpcy5jaGF0Um9vbS5Db252ZXJzYXRpb25UeXBlLkNIQVRST09NLFxuICAgICAgICAgICAgICAgIHRhcmdldElkOiB0aGlzLnJvb21JZFxuICAgICAgICAgICAgfSwgbWVzc2FnZSkudGhlbihmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCflj5HpgIHov5vmiL/pl7Tmtojmga/miJDlip8nLCBtZXNzYWdlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBJTS5wcm90b3R5cGUubGV2ZVJvb21NZXNzYWdlID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBtZXNzYWdlID0ge1xuICAgICAgICAgICAgbWVzc2FnZVR5cGU6IFwiUkM6VlJMUmVmcmVzaE1zZ1wiLFxuICAgICAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwiUkNBdWRpZW5jZUxlYXZlUm9vbVwiLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHRoaXMudXNlcklkXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLnJvb21UeXBlID09IFwibGl2ZVwiKSB7XG4gICAgICAgICAgICBtZXNzYWdlLm1lc3NhZ2VUeXBlID0gXCJSQzpDbWRNc2dcIjtcbiAgICAgICAgICAgIG1lc3NhZ2UuY29udGVudC5uYW1lID0gXCJST09NX0NPTU1BTkRfVVNFUl9FWElUXCI7XG4gICAgICAgICAgICB0aGlzLmNoYXRSb29tLmdldENoYXRSb29tSW5mbyh0aGlzLnJvb21JZCwgeyBjb3VudDogMCwgb3JkZXI6IDAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgdmFyIHBtc2cgPSBuZXcgX3RoaXMucmVnTXNnKHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJST09NX0NPTU1BTkRfVVNFUl9FTlRFUlwiLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiBcIlJPT01fQ09NTUFORF9VU0VSX0VYSVRfX1JDTFZfX1wiICsgTnVtYmVyKE51bWJlcihyZXN1bHQuZGF0YS51c2VyQ291bnQpIC0gMSlcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBfdGhpcy5jaGF0Um9vbS5zZW5kTWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgICAgIGNvbnZlcnNhdGlvblR5cGU6IF90aGlzLmNoYXRSb29tLkNvbnZlcnNhdGlvblR5cGUuQ0hBVFJPT00sXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldElkOiBfdGhpcy5yb29tSWRcbiAgICAgICAgICAgICAgICB9LCBwbXNnKS50aGVuKGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCflj5HpgIHpgIDmiL/pl7Tmtojmga/miJDlip8nLCBtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIF9sb2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fLmRlZmF1bHQuX2Vycm9yKCflj5HpgIHpgIDmiL/pl7Tmtojmga/lpLHotKUnKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jaGF0Um9vbSAmJiB0aGlzLmNoYXRSb29tLnNlbmRNZXNzYWdlKHtcbiAgICAgICAgICAgICAgICBjb252ZXJzYXRpb25UeXBlOiB0aGlzLmNoYXRSb29tLkNvbnZlcnNhdGlvblR5cGUuQ0hBVFJPT00sXG4gICAgICAgICAgICAgICAgdGFyZ2V0SWQ6IHRoaXMucm9vbUlkXG4gICAgICAgICAgICB9LCBtZXNzYWdlKS50aGVuKGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+WPkemAgemAgOaIv+mXtOa2iOaBr+aIkOWKnycsIG1lc3NhZ2UpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8v6K6+572u6bqm5L2N5L+h5oGvXG4gICAgSU0ucHJvdG90eXBlLnNlYXRJbmZvVXBkYXRlID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwia2V5XCIsIGtleSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJ2YWx1ZVwiLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpIHx8IHR5cGVvZiB2YWx1ZSA9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi5LiN6L2s5o2i77yaXCIsIHR5cGVvZiB2YWx1ZSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLmNoYXRSb29tLmZvcmNlU2V0Q2hhdFJvb21FbnRyeSh0aGlzLnJvb21JZCwge1xuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBrZXksXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0F1dG9EZWxldGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNTZW5kTm90aWZpY2F0aW9uOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ+iuvue9ruiBiuWkqeWupOWxnuaAp+aIkOWKnyEnO1xuICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ+iuvue9ruiBiuWkqeWupOWxnuaAp+Wksei0pTonICsgZXJyO1xuICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvL+aOkum6pua2iOaBr+iuvue9rlxuICAgIElNLnByb3RvdHlwZS5SZXF1ZXN0c2VhdEluZm9VcGRhdGUgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgICAgICBjb25zb2xlLmxvZyhcIuaOkum6puabtOaWsFwiLCBrZXksIHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hhdFJvb20uZm9yY2VTZXRDaGF0Um9vbUVudHJ5KHRoaXMucm9vbUlkLCB7XG4gICAgICAgICAgICBrZXk6IGtleSxcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIGlzQXV0b0RlbGV0ZTogZmFsc2UsXG4gICAgICAgICAgICB0eXBlOiAxLFxuICAgICAgICAgICAgaXNTZW5kTm90aWZpY2F0aW9uOiBmYWxzZSxcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gJ+aOkum6puaTjeS9nOaIkOWKnyEnO1xuICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICByZXR1cm4gJ+aOkum6puaTjeS9nOWksei0pTonICsgZXJyO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8v5pat5byA6ZO+5o6lXG4gICAgLy8gZGlzQ29ubmVjdCgpIHtcbiAgICAvLyAgICAgdGhpcy5ib2R5LmRpc2Nvbm5lY3QoKS50aGVuKCgpID0+IGNvbnNvbGUubG9nKFwi5pat5byA6ZO+5o6l5oiQ5YqfXCIpKTtcbiAgICAvLyB9XG4gICAgLy/liKDpmaTpuqbkvY3kv6Hmga9cbiAgICBJTS5wcm90b3R5cGUuc2VhdEluZm9SZW1vdmUgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwi5Yig6ZmkXCIsIHRoaXMpO1xuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgIHJldHVybiB0aGF0LmNoYXRSb29tLmZvcmNlUmVtb3ZlQ2hhdFJvb21FbnRyeSh0aGlzLnJvb21JZCwge1xuICAgICAgICAgICAga2V5OiBrZXksXG4gICAgICAgICAgICBpc1NlbmROb3RpZmljYXRpb246IHRydWUsXG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgcmV0dXJuIElNO1xufShfc3RydWN0dXJlX21vZHVsZXNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5kZWZhdWx0KSk7XG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIGNvbnN0IF9fV0VCUEFDS19ERUZBVUxUX0VYUE9SVF9fID0gKElNKTtcblxuXG4vLyMgc291cmNlVVJMPXdlYnBhY2s6Ly9Acm9uZ2Nsb3VkL3JjbGl2ZXJvb21saWIvLi9zcmMvbW9kdWxlcy9pbS9pbmRleC50cz8iKTsvKioqL30sLyoqKi8iLi9zcmMvbW9kdWxlcy9ydGMvaW5kZXgudHMiOi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlwKICAhKioqIC4vc3JjL21vZHVsZXMvcnRjL2luZGV4LnRzICoqKiEKICBcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8gLyoqKi9mdW5jdGlvbiBzcmNNb2R1bGVzUnRjSW5kZXhUcyhfX3VudXNlZF93ZWJwYWNrX21vZHVsZSxfX3dlYnBhY2tfZXhwb3J0c19fLF9fd2VicGFja19yZXF1aXJlX18pe2V2YWwoIl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0ICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCB7XG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZGVmYXVsdFwiOiAoKSA9PiAoX19XRUJQQUNLX0RFRkFVTFRfRVhQT1JUX18pXG4vKiBoYXJtb255IGV4cG9ydCAqLyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfc3RydWN0dXJlX21vZHVsZXNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uLy4uL3N0cnVjdHVyZS9tb2R1bGVzICovIFwiLi9zcmMvc3RydWN0dXJlL21vZHVsZXMudHNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2xvZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi8uLi9sb2dlciAqLyBcIi4vc3JjL2xvZ2VyLnRzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yb25nY2xvdWRfcGx1Z2luX3J0Y19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgQHJvbmdjbG91ZC9wbHVnaW4tcnRjICovIFwiLi9ub2RlX21vZHVsZXMvQHJvbmdjbG91ZC9wbHVnaW4tcnRjL2Rpc3QvaW5kZXguZXNtLmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISBAcm9uZ2Nsb3VkL2VuZ2luZSAqLyBcIi4vbm9kZV9tb2R1bGVzL0Byb25nY2xvdWQvZW5naW5lL2Rpc3QvaW5kZXguZXNtLmpzXCIpO1xudmFyIF9fZXh0ZW5kcyA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX19hd2FpdGVyID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG52YXIgX19nZW5lcmF0b3IgPSAodW5kZWZpbmVkICYmIHVuZGVmaW5lZC5fX2dlbmVyYXRvcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIGJvZHkpIHtcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xuICAgICAgICB3aGlsZSAoXykgdHJ5IHtcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xuICAgIH1cbn07XG5cblxuXG5cblxudmFyIFJUQyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUlRDLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFJUQyhpbSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5zdGF0ZXMgPSAwOyAvLzDliJ3lp4vljJbmnKrlrozmiJAgMeWwsee7qiAy5q2j5Zyo5Yid5aeL5YyWICA55rWP6KeI5Zmo5LiN5pSv5oyBXG4gICAgICAgIF90aGlzLmlzQW5jaG9yID0gZmFsc2U7IC8v6Lqr5Lu95qCH6K+GIOaYr+WQpuS4u+aSrVxuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIC8vIHRoaXMuaW5pdChpbSk7XG4gICAgfVxuICAgIFJUQy5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uIChpbSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBjb25zb2xlLmxvZygn5YaF6YOo5ZCEU0RL54mI5pysJywgX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXy5WZXJzaW9uTWFuYWdlLmdldEluZm8oKSk7XG4gICAgICAgIHRoaXMuUlRDTGliID0gX3JvbmdjbG91ZF9wbHVnaW5fcnRjX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX187XG4gICAgICAgIHZhciBydGNDbGllbnQgPSBpbS5pbnN0YWxsUGx1Z2luKHRoaXMuUlRDTGliLmluc3RhbGxlciwge30pO1xuICAgICAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLm9uZGV2aWNlY2hhbmdlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIuacieinhumikeiuvuWkh+aUueWKqFwiLCBldmVudCk7XG4gICAgICAgICAgICBfdGhpcy5lbWl0KFwib25kZXZpY2VjaGFuZ2VcIik7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnNvbGUubG9nKFwi5Yid5aeL5YyW5ZCO55qEcnRjXCIsIHJ0Y0NsaWVudCk7XG4gICAgICAgIHRoaXMuYm9keSA9IHJ0Y0NsaWVudDtcbiAgICAgICAgdGhpcy5lbWl0KFwicmVhZHlcIik7XG4gICAgfTtcbiAgICBSVEMucHJvdG90eXBlLmpvaW5Sb29tID0gZnVuY3Rpb24gKHJvb21pZCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaWQ7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIGlkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucm9vbSAmJiB0aGlzLnJvb20uZ2V0Um9vbUlkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWQgPSB0aGlzLnJvb20uZ2V0Um9vbUlkKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpZCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIuacieWtmOWcqOeahHJ0Y+aIv+mXtCDmiafooYzlhYjpgIDlh7rpgLvovpFcIiwgaWQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxlYXZlUm9vbShpZCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIuemu+W8gOaIv+mXtOaIkOWKn1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwi5Yqg5YWlcnRjcm9vbVwiLCByb29taWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLmiJHmmK/kuI3mmK/kuLvmkq1cIiwgX3RoaXMuaXNBbmNob3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJ0eXBlOlwiLCBSQ0xpdmluZ1R5cGUuQVVESU8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmlzQW5jaG9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuam9pbkxpdmluZ1Jvb21Bc0FuY2hvcihyb29taWQpLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2xvZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18uZGVmYXVsdC5fZXJyb3IoJ+WKoOWFpVJUQ+aIv+mXtOWksei0pTo3MDAwMicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuam9pbkxpdmluZ1Jvb21Bc0F1ZGllbmNlKHJvb21pZCkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbG9nZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXy5kZWZhdWx0Ll9lcnJvcign5Yqg5YWlUlRD5oi/6Ze05aSx6LSlOjcwMDAyJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLmiJHmmK/kuI3mmK/kuLvmkq1cIiwgdGhpcy5pc0FuY2hvciwgXCLmsqHmnInph43lpI3nm7TmjqXliqDlhaVcIik7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwidHlwZTpcIiwgUkNMaXZpbmdUeXBlLkFVRElPKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNBbmNob3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuam9pbkxpdmluZ1Jvb21Bc0FuY2hvcihyb29taWQpLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbG9nZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXy5kZWZhdWx0Ll9lcnJvcign5Yqg5YWlUlRD5oi/6Ze05aSx6LSlOjcwMDAyJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuam9pbkxpdmluZ1Jvb21Bc0F1ZGllbmNlKHJvb21pZCkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9sb2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fLmRlZmF1bHQuX2Vycm9yKCfliqDlhaVSVEPmiL/pl7TlpLHotKU6NzAwMDInKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFJUQy5wcm90b3R5cGUuam9pbkxpdmluZ1Jvb21Bc0FuY2hvciA9IGZ1bmN0aW9uIChyb29taWQpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRMaXZpbmdUeXBlLCBfYSwgcm9vbSwgUlRDVHJhY2tzLCBNQ1VUcmFja3MsIENETlVyaXMsIHVzZXJJZHMsIGNvZGUsIHRoYXQsIGdldFRyYWNrLCBpLCBwdWJsaXNoVHJhY2ssIGhhbmRsZXIsIHJlbW90ZVRyYWNrc09iaiwgb2JqO1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9iLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi5Li75pKt5Yqg5YWlcnRjcm9vbVwiLCByb29taWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJ0aGlzLmJvZHlcIiwgdGhpcy5ib2R5LmpvaW5MaXZpbmdSb29tKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRMaXZpbmdUeXBlID0gX3JvbmdjbG91ZF9wbHVnaW5fcnRjX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18uUkNMaXZpbmdUeXBlLkFVRElPO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucm9vbVR5cGUgPT0gJ2xpdmUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudExpdmluZ1R5cGUgPSBfcm9uZ2Nsb3VkX3BsdWdpbl9ydGNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXy5SQ0xpdmluZ1R5cGUuVklERU87XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmJvZHkuam9pbkxpdmluZ1Jvb20ocm9vbWlkLCBjdXJyZW50TGl2aW5nVHlwZSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYSA9IF9iLnNlbnQoKSwgcm9vbSA9IF9hLnJvb20sIFJUQ1RyYWNrcyA9IF9hLlJUQ1RyYWNrcywgTUNVVHJhY2tzID0gX2EuTUNVVHJhY2tzLCBDRE5VcmlzID0gX2EuQ0ROVXJpcywgdXNlcklkcyA9IF9hLnVzZXJJZHMsIGNvZGUgPSBfYS5jb2RlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5SVENMaWIuUkNSVENDb2RlLlNVQ0NFU1MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJSVENUcmFja3NcIiwgUlRDVHJhY2tzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTUNVVHJhY2tzXCIsIE1DVVRyYWNrcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29kZSAhPT0gdGhpcy5SVENMaWIuUkNSVENDb2RlLlNVQ0NFU1MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn5Yqg5YWlcnRj5oi/6Ze05aSx6LSlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g6K6+572u5ZCI5rWB5biD5bGAXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJ1aWxkZXIgPSByb29tLmdldE1DVUNvbmZpZ0J1aWxkZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwidGhpcy5idWlsZGVyOlwiLCB0aGlzLmJ1aWxkZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8g6K6+572u5ZCI5rWB5ZCO55qE6KeG6aKR5rWB5riy5p+T5pa55byP77yM6buY6K6k5YC85Li6IGBNaXhWaWRlb1JlbmRlck1vZGUuQ1JPUGBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGBNaXhWaWRlb1JlbmRlck1vZGUuQ1JPUGA6IOW9k+eUu+W4g+WwuuWvuOS4juinhumikeWIhui+qOeOh+avlOS+i+S4jeWQjOaXtu+8jOijgeWJquinhumikeWGheWuuVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYE1peFZpZGVvUmVuZGVyTW9kZS5XSE9MRWA6IOW9k+eUu+W4g+WwuuWvuOS4juinhumikeWIhui+qOeOh+S4jeWQjOaXtu+8jOWOi+e8qeinhumikeWwuuWvuOS7peWhq+WFheeUu+W4g1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5idWlsZGVyLnNldE91dHB1dFZpZGVvUmVuZGVyTW9kZShfcm9uZ2Nsb3VkX3BsdWdpbl9ydGNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXy5NaXhWaWRlb1JlbmRlck1vZGUuV0hPTEUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8g6K6+572u6KeG6aKR5YiG6L6o546HXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJ1aWxkZXIuc2V0T3V0cHV0VmlkZW9SZXNvbHV0aW9uKF9yb25nY2xvdWRfcGx1Z2luX3J0Y19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fLlJDUmVzb2x1dGlvbi5XMTc2X0gxMzIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8g6K6+572u6KeG6aKR5bin546HXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJ1aWxkZXIuc2V0T3V0cHV0VmlkZW9GUFMoX3JvbmdjbG91ZF9wbHVnaW5fcnRjX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18uUkNGcmFtZVJhdGUuRlBTXzE1KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiIHJvb21pZO+8mlwiLCByb29tLmdldFJvb21JZCgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiIHVzZXJJZHNcIiwgdXNlcklkcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDoi6XliqDlhaXlpLHotKXvvIzliJkgcm9vbeOAgXVzZXJJZHPjgIF0cmFja3Mg5YC85Li6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvZGUgIT09IF9yb25nY2xvdWRfcGx1Z2luX3J0Y19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fLlJDUlRDQ29kZS5TVUNDRVNTKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2pvaW4gcm9vbSBmYWlsZWQ6JywgY29kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJjb2RlIG9mOlwiLCBjb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucm9vbSA9IHJvb207XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdqb2luTGl2aW5nUm9vbUFzQW5jaG9yJywgcm9vbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDms6jlhozmiL/pl7Tkuovku7bnm5HlkKzlmajvvIzph43lpI3ms6jlhozml7bvvIzku4XmnIDlkI7kuIDmrKHms6jlhozmnInmlYhcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvb20ucmVnaXN0ZXJSb29tRXZlbnRMaXN0ZW5lcih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICog5b2T5pys56uv6KKr5YmU5Ye65oi/6Ze0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQGRlc2NyaXB0aW9uIOiiq+i4ouWHuuaIv+mXtOWPr+iDveaYr+eUseS6juacjeWKoeerr+i2heWHuuS4gOWumuaXtumXtOacquiDveaUtuWIsCBydGNQaW5nIOa2iOaBr++8jOaJgOS7peiupOS4uuW3seaWueemu+e6v+OAglxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIOWPpuS4gOenjeWPr+iDveaYr+W3seaWuSBydGNQaW5nIOWksei0peasoeaVsOi2heWHuuS4iumZkO+8jOaVheiAjOS4u+WKqOaWree6v1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSBieVNlcnZlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIOW9k+WAvOS4uiBmYWxzZSDml7bvvIzor7TmmI7mnKznq68gcnRjUGluZyDotoXml7ZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiDlvZPlgLzkuLogdHJ1ZSDml7bvvIzor7TmmI7mnKznq6/mlLbliLDooqvouKLlh7rmiL/pl7TpgJrnn6VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbktpY2tPZmY6IGZ1bmN0aW9uIChieVNlcnZlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiZWVlZWVldmVudDog5Li75pKt5oi/6Ze06Lii5Lq6XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICog5o6l5pS25Yiw5oi/6Ze05L+h5Luk5pe25Zue6LCD77yM55So5oi35Y+v6YCa6L+H5oi/6Ze05a6e5L6L55qEIGBtZXNzYWdlVXBkYXRlKG5hbWUsIGNvbnRlbnQpYCDmjqXlj6Plj5HpgIHkv6Hku6RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0gbmFtZSDkv6Hku6TlkI1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0gY29udGVudCDkv6Hku6TlhoXlrrlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0gc2VuZGVyVXNlcklkIOWPkemAgeiAhSBJZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSBtZXNzYWdlVUlkIOa2iOaBr+WUr+S4gOagh+ivhlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uTWVzc2FnZVJlY2VpdmU6IGZ1bmN0aW9uIChuYW1lLCBjb250ZW50LCBzZW5kZXJVc2VySWQsIG1lc3NhZ2VVSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJlZWVlZWV2ZW50OiDkuLvmkq3miL/pl7TmlLbliLDmtojmga9cIiwgbmFtZSwgY29udGVudCwgc2VuZGVyVXNlcklkLCBtZXNzYWdlVUlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIOebkeWQrOaIv+mXtOWxnuaAp+WPmOabtOmAmuefpVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSBuYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIGNvbnRlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblJvb21BdHRyaWJ1dGVDaGFuZ2U6IGZ1bmN0aW9uIChuYW1lLCBjb250ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJlZWVlZWV2ZW50OiDkuLvmkq3miL/pl7TlsZ7mgKflj5jmm7RcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiDmiL/pl7TnlKjmiLfnpoHnlKgv5ZCv55So6Z+z6aKRXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIGF1ZGlvVHJhY2sgUkNSZW1vdGVBdWRpb1RyYWNrIOexu+WunuS+i1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQXVkaW9NdXRlQ2hhbmdlOiBmdW5jdGlvbiAoYXVkaW9UcmFjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiZWVlZWVldmVudDog5Li75pKt5oi/6Ze0IOmfs+mikSDpnZnpn7NcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiDmiL/pl7TnlKjmiLfnpoHnlKgv5ZCv55So6KeG6aKRXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHZpZGVvVHJhY2sgUkNSZW1vdGVWaWRlb1RyYWNrIOexu+WunuS+i+WvueixoVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uVmlkZW9NdXRlQ2hhbmdlOiBmdW5jdGlvbiAodmlkZW9UcmFjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiZWVlZWVldmVudDog5Li75pKt5oi/6Ze0IOinhumikSDpnZnpn7NcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiDmiL/pl7TlhoXnlKjmiLflj5HluIPotYTmupBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0gdHJhY2tzIOaWsOWPkeW4g+eahOmfs+i9qOS4juinhui9qOaVsOaNruWIl+ihqO+8jOWMheWQq+aWsOWPkeW4g+eahCBSQ1JlbW90ZUF1ZGlvVHJhY2sg5LiOIFJDUmVtb3RlVmlkZW9UcmFjayDlrp7kvotcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblRyYWNrUHVibGlzaDogZnVuY3Rpb24gKHRyYWNrcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2JqO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOaMieS4muWKoemcgOaxgumAieaLqemcgOimgeiuoumYhei1hOa6kO+8jOmAmui/hyByb29tLnN1YnNjcmliZSDmjqXlj6Pov5vooYzorqLpmIVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIuWPkeW4g+S6hueahOa1gS3kuLvmkq3nq69cIiwgdHJhY2tzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmogPSByb29tLnN1YnNjcmliZSh0cmFja3MpLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2xvZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18uZGVmYXVsdC5fZXJyb3IoJ+iuoumYhea1geWksei0pTo3MDAwNicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIOaIv+mXtOeUqOaIt+WPlua2iOWPkeW4g+i1hOa6kFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB0cmFja3Mg6KKr5Y+W5raI5Y+R5biD55qE6Z+z6L2o5LiO6KeG6L2o5pWw5o2u5YiX6KGoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQGRlc2NyaXB0aW9uIOW9k+i1hOa6kOiiq+WPlua2iOWPkeW4g+aXtu+8jFNESyDlhoXpg6jkvJrlj5bmtojlr7nnm7jlhbPotYTmupDnmoTorqLpmIXvvIzkuJrliqHlsYLku4XpnIDlpITnkIYgVUkg5Lia5YqhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25UcmFja1VucHVibGlzaDogZnVuY3Rpb24gKHRyYWNrcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIui1hOa6kOWPlua2iOWPkeW4g+S6hlwiLCB0cmFja3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiZWVlZWVldmVudDog5Li75pKt5oi/6Ze05Y+W5raI5Y+R5biDXCIsIHRyYWNrcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiDorqLpmIXnmoTpn7Pop4bpopHmtYHpgJrpgZPlt7Llu7rnq4ssIHRyYWNrIOW3suWPr+S7pei/m+ihjOaSreaUvlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB0cmFjayBSQ1JlbW90ZVRyYWNrIOexu+WunuS+i1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uVHJhY2tSZWFkeTogZnVuY3Rpb24gKHRyYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZWVlZWVldmVudDrkuLvmkq1vbnRyYWNrcmVhZHlcIiwgdHJhY2spO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHJhY2suaXNBdWRpb1RyYWNrKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOmfs+i9qOS4jemcgOimgeS8oOmAkuaSreaUvuaOp+S7tlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2sucGxheSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/kuIrmiqXliLDpobnnm67lhoXpg6jljrvmkq3mlL7mlrnkvr/oh6rlrprkuYlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuZW1pdChcInJlbW90ZVZpZGVvVHJhY2tcIiwgdHJhY2spO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiDkurrlkZjliqDlhaVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0gdXNlcklkcyDliqDlhaXnmoTkurrlkZggaWQg5YiX6KGoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25Vc2VySm9pbjogZnVuY3Rpb24gKHVzZXJJZHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcImVlZWVlZXZlbnQ6IOS4u+aSreaIv+mXtCDnlKjmiLfliqDlhaVcIiwgdXNlcklkcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiDkurrlkZjpgIDlh7pcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0gdXNlcklkc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uVXNlckxlYXZlOiBmdW5jdGlvbiAodXNlcklkcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiZWVlZWVldmVudDog5Li75pKt5oi/6Ze0IOeUqOaIt+emu+W8gFwiLCB1c2VySWRzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvb20ucmVnaXN0ZXJSZXBvcnRMaXN0ZW5lcih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICog55So5LqO5o6l5pS254q25oCB5pWw5o2u5oql5ZGKXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHJlcG9ydFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uU3RhdGVSZXBvcnQ6IGZ1bmN0aW9uIChyZXBvcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcG9ydCAmJiByZXBvcnQuaWNlQ2FuZGlkYXRlUGFpcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5lbWl0KFwiUnRjUnR0XCIsIHJlcG9ydC5pY2VDYW5kaWRhdGVQYWlyLnJ0dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCLmiqXlkYrlvILluLhcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHRoaXMucm9vbVR5cGUgPT0gXCJsaXZlXCIpKSByZXR1cm4gWzMgLypicmVhayovLCAzXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuYm9keS5jcmVhdGVNaWNyb3Bob25lQW5kQ2FtZXJhVHJhY2tzKCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBnZXRUcmFjayA9IF9iLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi5pys5Zyw5rWB77yaXCIsIGdldFRyYWNrKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHJhY2tzID0gZ2V0VHJhY2sudHJhY2tzO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzogcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5ib2R5LmNyZWF0ZU1pY3JvcGhvbmVBdWRpb1RyYWNrKCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBnZXRUcmFjayA9IF9iLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHJhY2tzID0gW2dldFRyYWNrLnRyYWNrXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLmxhYmVsID0gNTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdldFRyYWNrLmNvZGUgIT0gX3JvbmdjbG91ZF9wbHVnaW5fcnRjX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18uUkNSVENDb2RlLlNVQ0NFU1MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwi6I635Y+W5pys5Zyw5rWB6ZSZ6K+vXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpIGluIHRoaXMudHJhY2tzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRyYWNrc1tpXS5fa2luZCA9PSBcInZpZGVvXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuZW1pdChcInJlbW90ZVZpZGVvVHJhY2tcIiwgdGhpcy50cmFja3NbaV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy90aGlzLnRyYWNrc1tpXS5wbGF5KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByb29tLnB1Ymxpc2godGhpcy50cmFja3MpLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2xvZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18uZGVmYXVsdC5fZXJyb3IoJ+WPkeW4g+a1geWksei0pTo3MDAwNScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICAgICAgcHVibGlzaFRyYWNrID0gX2Iuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8g6Iul6LWE5rqQ5Y+R5biD5aSx6LSlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHVibGlzaFRyYWNrLmNvZGUgIT09IF9yb25nY2xvdWRfcGx1Z2luX3J0Y19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fLlJDUlRDQ29kZS5TVUNDRVNTKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+i1hOa6kOWPkeW4g+Wksei0pTonLCBwdWJsaXNoVHJhY2suY29kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIui1hOa6kCDlj5HluIPmiJDlip9cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlciA9IGZ1bmN0aW9uIChhdWRpb0xldmVsUmVwb3J0TGlzdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBsZXQgbGV2ZWw6IG51bWJlciA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgaW4gYXVkaW9MZXZlbFJlcG9ydExpc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxldmVsID0gYXVkaW9MZXZlbFJlcG9ydExpc3RbaV0uYXVkaW9MZXZlbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZW1pdChcImF1ZGlvQ2hlbmdlXCIsIGF1ZGlvTGV2ZWxSZXBvcnRMaXN0W2ldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiYXVkaW9yZXBvcnQrKysrKysrKysrKysrKysrOlwiLCBhdWRpb0xldmVsUmVwb3J0TGlzdFtpXSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9vbS5vbkF1ZGlvTGV2ZWxDaGFuZ2UoaGFuZGxlciwgMTAwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLotYTmupAg5Y+R5biDIOaIkOWKn1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHJvb20uZ2V0UmVtb3RlVHJhY2tzKCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgICAgICAgICByZW1vdGVUcmFja3NPYmogPSBfYi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVtb3RlVHJhY2tzT2JqLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iaiA9IHJvb20uc3Vic2NyaWJlKHJlbW90ZVRyYWNrc09iaikuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbG9nZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXy5kZWZhdWx0Ll9lcnJvcign6K6i6ZiF5rWB5aSx6LSlOjcwMDA2Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KHJlbW90ZVRyYWNrcykpXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoXCJqb2luUm9vbVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBSVEMucHJvdG90eXBlLmpvaW5MaXZpbmdSb29tQXNBdWRpZW5jZSA9IGZ1bmN0aW9uIChyb29taWQpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRMaXZpbmdUeXBlLCBfYSwgcm9vbSwgUlRDVHJhY2tzLCBNQ1VUcmFja3MsIENETlVyaXMsIHVzZXJJZHMsIGNvZGUsIHRoYXQ7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIuinguS8l+WKoOWFpXJ0Y3Jvb21cIiwgcm9vbWlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRMaXZpbmdUeXBlID0gX3JvbmdjbG91ZF9wbHVnaW5fcnRjX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18uUkNMaXZpbmdUeXBlLkFVRElPO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucm9vbVR5cGUgPT0gJ2xpdmUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudExpdmluZ1R5cGUgPSBfcm9uZ2Nsb3VkX3BsdWdpbl9ydGNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXy5SQ0xpdmluZ1R5cGUuVklERU87XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmJvZHkuam9pbkxpdmluZ1Jvb21Bc0F1ZGllbmNlKHJvb21pZCwgY3VycmVudExpdmluZ1R5cGUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g6Iul5Yqg5YWl5aSx6LSl77yM5YiZIHJvb20g5YC85Li6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2EgPSBfYi5zZW50KCksIHJvb20gPSBfYS5yb29tLCBSVENUcmFja3MgPSBfYS5SVENUcmFja3MsIE1DVVRyYWNrcyA9IF9hLk1DVVRyYWNrcywgQ0ROVXJpcyA9IF9hLkNETlVyaXMsIHVzZXJJZHMgPSBfYS51c2VySWRzLCBjb2RlID0gX2EuY29kZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOiLpeWKoOWFpeWksei0pe+8jOWImSByb29tIOWAvOS4uiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb2RlICE9PSBfcm9uZ2Nsb3VkX3BsdWdpbl9ydGNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXy5SQ1JUQ0NvZGUuU1VDQ0VTUykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdqb2luIHJvb20gYXMgYXVkaWVuY2UgZmFpbGVkOicsIGNvZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcInJvb21cIiwgcm9vbSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucm9vbSA9IHJvb207XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHJhY2tzID0gTUNVVHJhY2tzO1xuICAgICAgICAgICAgICAgICAgICAgICAgcm9vbS5zdWJzY3JpYmUoTUNVVHJhY2tzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdqb2luTGl2aW5nUm9vbUFzQXVkaWVuY2UnLCBNQ1VUcmFja3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXVkaWVuY2VSb29tIOS4uuinguS8l+WKoOWFpeaIv+mXtOi/lOWbnueahCByb29tXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDms6jlhozmiL/pl7Tkuovku7bnm5HlkKzlmajvvIzph43lpI3ms6jlhozml7bvvIzku4XmnIDlkI7kuIDmrKHmnInmlYhcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvb20ucmVnaXN0ZXJSb29tRXZlbnRMaXN0ZW5lcih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICog5Li75pKt5Yqg5YWlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHVzZXJJZHMg5Yqg5YWl55qE5Li75pKtIGlkIOWIl+ihqFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQW5jaG9ySm9pbjogZnVuY3Rpb24gKHVzZXJJZHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIuinguS8l+aIv+mXtOebkeWQrFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIuS4u+aSreWKoOWFpVwiLCB1c2VySWRzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICog5Li75pKt56a75byAXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHVzZXJJZHMg56a75byA55qE5Li75pKtIGlkIOWIl+ihqFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQW5jaG9yTGVhdmU6IGZ1bmN0aW9uICh1c2VySWRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCLop4LkvJfmiL/pl7Tnm5HlkKxcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCLkuLvmkq3nprvlvIBcIiwgdXNlcklkcylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICog5oi/6Ze05YaF55u05pKt5ZCI5rWB6LWE5rqQ5Y+R5biDXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHRyYWNrIFJDUmVtb3RlVHJhY2sg57G75a6e5L6LXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICogKiDmiL/pl7Tnsbvlnovku6XnrKzkuIDkuKrliqDlhaXmiL/pl7TnlKjmiLforr7nva7nmoTnm7Tmkq3nsbvlnovkuLrlh4ZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiAqIOaIv+mXtOebtOaSreexu+Wei+S4uiBSQ0xpdmluZ1R5cGUuQVVESU9fVklERU8g77yMdHJhY2tzIOWMheWQqyBSQ1JlbW90ZUF1ZGlvVHJhY2sg5LiOIFJDUmVtb3RlVmlkZW9UcmFjayDlrp7kvotcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiAqIOebtOaSreexu+Wei+S4uiBSQ0xpdmluZ1R5cGUuQVVESU8g77yMIHRyYWNrcyDku4XljIXlkKsgUkNSZW1vdGVBdWRpb1RyYWNrIOWunuS+i1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uVHJhY2tQdWJsaXNoOiBmdW5jdGlvbiAodHJhY2tzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi6KeC5LyX5oi/6Ze055uR5ZCsIOaciea1geWPkeW4gyAtLVwiLCB0cmFja3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcInB1Ymxpc2hcIiwgdHJhY2tzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29kZSA9IHJvb20uc3Vic2NyaWJlKHRyYWNrcykuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9sb2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fLmRlZmF1bHQuX2Vycm9yKCforqLpmIXmtYHlpLHotKU6NzAwMDYnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmNvZGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnb25UcmFja1B1Ymxpc2g6JywgY29kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+iuoumYheaYr+W8guatpSDmmoLml7bkuI3lpITnkIblm57osIMg6buY6K6k6K6k5Li65Y+v5Lul5oiQ5YqfXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZvciAodmFyIGkgaW4gdHJhY2tzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICBpZiAodHJhY2tzW2ldLmlzQXVkaW9UcmFjaygpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgLy8g6Z+z6aKR5pKt5pS+5peg6ZyA5Lyg6YCS57uE5Lu2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgdHJhY2tzW2ldLnBsYXkoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAvL+inhumikea1geWkhOeQhlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKFwidGhhdC52aWRlb05vZGVcIiwgdGhhdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgdHJhY2tzW2ldLnBsYXkodGhhdC5ib2R5LnZpZGVvTm9kZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiDmiL/pl7TlhoXnm7Tmkq3lkIjmtYHotYTmupDlj5bmtojlj5HluINcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0gdHJhY2sgUkNSZW1vdGVUcmFjayDnsbvlrp7kvotcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiAqIOinpuWPkeaXtuacujog5YWo6YOo5Li75pKt6YCA5Ye65oi/6Ze077yI5Zug6LWE5rqQ5Li65aSa5Liq5Li75pKt5Y+R5biD55qE5ZCI5rWB6LWE5rqQ77yM5Y2V5Liq5Li75pKt5Y+W5raI5Y+R5biD5LiN5Lya6Kem5Y+R77yJXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25UcmFja1VucHVibGlzaDogZnVuY3Rpb24gKHRyYWNrcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwi6KeC5LyX5oi/6Ze055uR5ZCsXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInVucHVibGlzaFwiLCB0cmFja3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmVtaXQoXCJ1bnB1Ymxpc2hcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblB1Ymxpc2hDRE5TdHJlYW06IGZ1bmN0aW9uIChzdHJlYW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJjZG7mtYEtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJjZG46XCIsIHN0cmVhbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblRyYWNrUmVhZHk6IGZ1bmN0aW9uICh0cmFjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ2V0VHJhY2s7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g6K6i6ZiF55qE6Z+z6KeG6aKR6L2o6YGT5bey6L+e5o6l77yM5Y+v5Lul5qC55o2u5Lia5Yqh6ZyA5rGC6YCJ5oup5oCn5pKt5pS+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLop4LkvJfmiL/pl7Tnm5HlkKxcIiwgdGhhdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3RyYWNrJywgdHJhY2spO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0cmFjay5pc0F1ZGlvVHJhY2soKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDpn7PpopHmkq3mlL7ml6DpnIDkvKDpgJLnu4Tku7ZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2sucGxheSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0VHJhY2sgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGF0LmJvZHkudmlkZW9Ob2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+inhumikVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5LuF5b2TIGBjb2RlID09PSBSQ1JUQ0NvZGUuU1VDQ0VTU2Ag5pe2IHZpZGVvVHJhY2sg5pyJ5YC8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIuaSreaUvuinhumikea1gVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwidGhhdC5ib2R5LnZpZGVvTm9kZVwiLCB0aGF0LmJvZHkudmlkZW9Ob2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwidHJhY2tcIiwgdHJhY2spO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2sucGxheSh0aGF0LmJvZHkudmlkZW9Ob2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvblN0YXRlUmVwb3J0KHJlcG9ydCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICog5oql5ZGK55Sf5oiQ5pe26Ze0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICBjb25zdCB0aW1lc3RhbXA6IG51bWJlciA9IHJlcG9ydC50aW1lc3RhbXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAqIOWvueetiei/nuaOpeeKtuaAgeaVsOaNru+8jOWFtuS4reWMheWQq+WPjeW6lOW9k+WJjeS4juWqkuS9k+acjeWKoeWZqOS5i+mXtOeahCBVRFAg6YCa6YGT6LSo6YeP55qE5L+h5oGvIDogSUljZVBhaXJJbmZvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICBjb25zdCBpY2VDYW5kaWRhdGVQYWlyID0gcmVwb3J0LmljZUNhbmRpZGF0ZVBhaXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAqIOaJgOacieeahOS4iuihjOa1geeahOeKtuaAgeaVsOaNriA6IElUcmFja1N0YXRlW11cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIGNvbnN0IHNlbmRlcnMgPSByZXBvcnQuc2VuZGVyc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICog6K6i6ZiF55qE5LiL6KGM5rWB54q25oCB5pWw5o2uIDogSVRyYWNrU3RhdGVbXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgY29uc3QgcmVjZWl2ZXJzID0gcmVwb3J0LnJlY2VpdmVyc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZygndGltZXN0YW1wJywgdGltZXN0YW1wKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgY29uc29sZS5sb2coJ2ljZUNhbmRpZGF0ZVBhaXInLCBpY2VDYW5kaWRhdGVQYWlyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgY29uc29sZS5sb2coJ3NlbmRlcnMnLCBzZW5kZXJzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgY29uc29sZS5sb2coJ3JlY2VpdmVycycsIHJlY2VpdmVycyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByb29tLnJlZ2lzdGVyUmVwb3J0TGlzdGVuZXIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIOeUqOS6juaOpeaUtueKtuaAgeaVsOaNruaKpeWRilxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSByZXBvcnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblN0YXRlUmVwb3J0OiBmdW5jdGlvbiAocmVwb3J0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuZW1pdChcIlJ0Y1J0dFwiLCByZXBvcnQuaWNlQ2FuZGlkYXRlUGFpci5ydHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc3QgaGFuZGxlciA9IChhdWRpb0xldmVsUmVwb3J0TGlzdDogeyB0cmFjaywgYXVkaW9MZXZlbDogbnVtYmVyIH1bXSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIGZvciAodmFyIGkgaW4gYXVkaW9MZXZlbFJlcG9ydExpc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgLy8gbGV2ZWwgPSBhdWRpb0xldmVsUmVwb3J0TGlzdFtpXS5hdWRpb0xldmVsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIGlmIChhdWRpb0xldmVsUmVwb3J0TGlzdFtpXS5hdWRpb0xldmVsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImF1ZGlvcmVwb3J0KysrKysrKysrKysrKysrKzpcIiwgYXVkaW9MZXZlbFJlcG9ydExpc3RbaV0pXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBsZXQgbGV2ZWw6IG51bWJlciA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBmb3IgKHZhciBpIGluIGF1ZGlvTGV2ZWxSZXBvcnRMaXN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgbGV2ZWwgPSBhdWRpb0xldmVsUmVwb3J0TGlzdFtpXS5hdWRpb0xldmVsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLmVtaXQoXCJhdWRpb0NoZW5nZVwiLCBsZXZlbClcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJvb20ub25BdWRpb0xldmVsQ2hhbmdlKGhhbmRsZXIsIDEwMDApXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIuWKoOWFpeaIv+mXtCDmiJDlip89PT09PT09PT09PT09PT09PT1cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoXCJqb2luUm9vbVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBSVEMucHJvdG90eXBlLmxlYXZlUm9vbSA9IGZ1bmN0aW9uIChyb29taWQpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNvZGUsIGksIG8sIG9sO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCItLS0tLS0tLS0tbGVhdmVpbmctLS0tLS0tLS0tLS0tXCIsIHJvb21pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5sb2NhbFRyYWNrKSB7IC8v56a75byA5pe25aaC5p6c5pyJ5pys5Zyw5rWBIOmHiuaUvuaOieacrOWcsOiuvuWkh1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi5bCd6K+V6YeK5pS+5pys5Zyw5rWBXCIsIHRoaXMubG9jYWxUcmFjayk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2NhbFRyYWNrLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHJvb21pZCAmJiByb29taWQgIT0gJycpKSByZXR1cm4gWzMgLypicmVhayovLCA1XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGUgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNBbmNob3IpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJz09PT09PT09PT09PT09PeaOqOaIv+mXtOaXtnRoaXMudHJhY2tzOicsIHRoaXMudHJhY2tzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRyYWNrcyAmJiB0aGlzLnRyYWNrcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy50cmFja3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+WkhOeQhu+8mycsIHRoaXMudHJhY2tzW2ldLl9tc1RyYWNrLCB0aGlzLnRyYWNrc1tpXS5fbXNUcmFjay5zdG9wKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFja3NbaV0uX21zVHJhY2suc3RvcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3RoaXMudHJhY2tzW2ldLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmJvZHkubGVhdmVSb29tKHRoaXMucm9vbSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBvID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZSA9IG8uY29kZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuYm9keS5sZWF2ZUxpdmluZ1Jvb21Bc0F1ZGllbmNlKHRoaXMucm9vbSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnN0IG8gPSBhd2FpdCB0aGlzLnJvb20udW5zdWJzY3JpYmUodGhpcy50cmFja3MpXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zdCBvID0gYXdhaXQgdGhpcy5ib2R5LmxlYXZlUm9vbSh0aGlzLnJvb20pXG4gICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIG9sID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc3QgbyA9IGF3YWl0IHRoaXMucm9vbS51bnN1YnNjcmliZSh0aGlzLnRyYWNrcylcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnN0IG8gPSBhd2FpdCB0aGlzLmJvZHkubGVhdmVSb29tKHRoaXMucm9vbSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGUgPSBvbC5jb2RlO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSA0O1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29kZSAhPT0gX3JvbmdjbG91ZF9wbHVnaW5fcnRjX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18uUkNSVENDb2RlLlNVQ0NFU1MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnbGVhdmUgcm9vbSAgZmFpbGVkOicsIGNvZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vby5jb2RlXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDU7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFJUQy5wcm90b3R5cGUubXV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNvZGU7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMudHJhY2tzIHx8IHRoaXMudHJhY2tzLmxlbmd0aCA9PSAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi6Zet6bqm5b2T5YmN5rWB77yaXCIsIHRoaXMudHJhY2tzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi5b2T5YmN5oi/6Ze0XCIsIHRoaXMucm9vbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnJvb20udW5wdWJsaXNoKHRoaXMudHJhY2tzKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGUgPSAoX2Euc2VudCgpKS5jb2RlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+WPlua2iOWPkeW4gycsIGNvZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFJUQy5wcm90b3R5cGUudW5tdXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY29kZTtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy50cmFja3MgfHwgdGhpcy50cmFja3MubGVuZ3RoID09IDApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJ0aGlzXCIsIHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJyb29tXCIsIHRoaXMucm9vbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnJvb20ucHVibGlzaCh0aGlzLnRyYWNrcykuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbG9nZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXy5kZWZhdWx0Ll9lcnJvcign5Y+R5biD5rWB5aSx6LSlOjcwMDA1Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlID0gKF9hLnNlbnQoKSkuY29kZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIC8vIOiLpei1hOa6kOWPkeW4g+Wksei0pVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvZGUgIT09IF9yb25nY2xvdWRfcGx1Z2luX3J0Y19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fLlJDUlRDQ29kZS5TVUNDRVNTKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+i1hOa6kOWPkeW4g+Wksei0pTonLCBjb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi6LWE5rqQ5Y+R5biD5oiQ5YqfXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFJUQy5wcm90b3R5cGUuZW50ZXJTZWF0ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpZCwgdGhhdDtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRTZWF0ID0gaW5kZXg7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNBbmNob3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLnlKjmiLflt7Lnu4/lnKjpuqbkvY3kuIo6NzAwMDNcIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+eUqOaIt+S4ium6puWIsCcsIGluZGV4KTtcbiAgICAgICAgICAgICAgICBpZCA9IHRoaXMucm9vbS5nZXRSb29tSWQoKTtcbiAgICAgICAgICAgICAgICB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZW50ZXJTZWF0LOW9k+WJjeaIv+mXtCcsIHRoaXMucm9vbSk7XG4gICAgICAgICAgICAgICAgdGhpcy5sZWF2ZVJvb20oaWQpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB0aGF0LmlzQW5jaG9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLnprvlvIDmiL/pl7TmiJDlip9cIik7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuam9pbkxpdmluZ1Jvb21Bc0FuY2hvcihpZCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgUlRDLnByb3RvdHlwZS5sZWF2ZVNlYXQgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY29kZSwgTG9jYWxUcmFja3MsIGosIGksIGlkLCB0aGF0O1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIuato+WcqOS4i+m6plwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc0FuY2hvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi5bey57uP5piv6KeC5LyX5peg5rOV5LiL6bqmXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHRoaXMudHJhY2tzICYmIHRoaXMudHJhY2tzLmxlbmd0aCAhPSAwKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMl07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnJvb20udW5wdWJsaXNoKHRoaXMudHJhY2tzKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGUgPSAoX2Euc2VudCgpKS5jb2RlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvZGUgIT09IF9yb25nY2xvdWRfcGx1Z2luX3J0Y19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fLlJDUlRDQ29kZS5TVUNDRVNTKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+WPlua2iOWPkeW4g+Wksei0pTonLCBjb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi5Y+W5raI5Y+R5biD5oiQ5YqfXCIsIGNvZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd0aGlzLnRyYWNrcycsIHRoaXMudHJhY2tzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBMb2NhbFRyYWNrcyA9IHRoaXMucm9vbS5nZXRMb2NhbFRyYWNrcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTG9jYWxUcmFja3NcIiwgTG9jYWxUcmFja3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v6YeK5pS+5pys5Zyw6LWE5rqQXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IExvY2FsVHJhY2tzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIExvY2FsVHJhY2tzW2pdLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTG9jYWxUcmFja3Nbal0uX21zU3RyZWFtLnN0b3AoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2NhbFRyYWNrICYmIHRoaXMubG9jYWxUcmFjay5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpIGluIHRoaXMudHJhY2tzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi5Y+W5raI5Y+R5biDdHJrc1wiLCB0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy90aGlzLnRyYWNrc1tpXS5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHJhY2tzW2ldLl9tc1N0cmVhbS5zdG9wKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAyO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZCA9IHRoaXMucm9vbS5nZXRSb29tSWQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sZWF2ZVJvb20oaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sZWF2ZVJvb20oaWQpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi56a75byA5oi/6Ze05oiQ5YqfXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuaXNBbmNob3IgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmpvaW5MaXZpbmdSb29tQXNBdWRpZW5jZShpZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gfSwgNTApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgUlRDLnByb3RvdHlwZS5wcmV2aWV3ID0gZnVuY3Rpb24gKHZpZGVvTm9kZSkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgbztcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5ib2R5LmNyZWF0ZUNhbWVyYVZpZGVvVHJhY2soJ1JvbmdDbG91ZFJUQycpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgbyA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG8udHJhY2sucGxheSh2aWRlb05vZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2NhbFRyYWNrID0gby50cmFjaztcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBSVEMucHJvdG90eXBlLmdldEV4aXN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcmVtb3RlVHJhY2tzT2JqLCBSb25nQ2xvdWRNQ1VMaXZlLCBpO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnJvb20uZ2V0UmVtb3RlVHJhY2tzKCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICByZW1vdGVUcmFja3NPYmogPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIuW3sue7j+acieWtmOWcqOeahOa1gVwiLCByZW1vdGVUcmFja3NPYmopO1xuICAgICAgICAgICAgICAgICAgICAgICAgUm9uZ0Nsb3VkTUNVTGl2ZSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHJlbW90ZVRyYWNrc09iai5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZW1vdGVUcmFja3NPYmpbaV0uZ2V0VGFnKCkgPT0gXCJSb25nQ2xvdWRNQ1VMaXZlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUm9uZ0Nsb3VkTUNVTGl2ZS5wdXNoKHJlbW90ZVRyYWNrc09ialtpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZW1vdGVUcmFja3NPYmpbaV0uaXNBdWRpb1RyYWNrKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW90ZVRyYWNrc09ialtpXS5wbGF5KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIuWHhuWkh+aSreaUvu+8mlwiLCByZW1vdGVUcmFja3NPYmpbaV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLlrrnlmajvvJpcIiwgdGhpcy5ib2R5LnZpZGVvTm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdGVUcmFja3NPYmpbaV0ucGxheSh0aGlzLmJvZHkudmlkZW9Ob2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChSb25nQ2xvdWRNQ1VMaXZlLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFJvbmdDbG91ZE1DVUxpdmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucm9vbS5zdWJzY3JpYmUoUm9uZ0Nsb3VkTUNVTGl2ZSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbG9nZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXy5kZWZhdWx0Ll9lcnJvcign6K6i6ZiF5rWB5aSx6LSlOjcwMDA2Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBSVEM7XG59KF9zdHJ1Y3R1cmVfbW9kdWxlc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmRlZmF1bHQpKTtcbi8qIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi8gY29uc3QgX19XRUJQQUNLX0RFRkFVTFRfRVhQT1JUX18gPSAoUlRDKTtcblxuXG4vLyMgc291cmNlVVJMPXdlYnBhY2s6Ly9Acm9uZ2Nsb3VkL3JjbGl2ZXJvb21saWIvLi9zcmMvbW9kdWxlcy9ydGMvaW5kZXgudHM/Iik7LyoqKi99LC8qKiovIi4vc3JjL3N0cnVjdHVyZS9tb2R1bGVzLnRzIjovKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcCiAgISoqKiAuL3NyYy9zdHJ1Y3R1cmUvbW9kdWxlcy50cyAqKiohCiAgXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovIC8qKiovZnVuY3Rpb24gc3JjU3RydWN0dXJlTW9kdWxlc1RzKF9fdW51c2VkX3dlYnBhY2tfbW9kdWxlLF9fd2VicGFja19leHBvcnRzX18sX193ZWJwYWNrX3JlcXVpcmVfXyl7ZXZhbCgiX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIHtcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJkZWZhdWx0XCI6ICgpID0+IChfX1dFQlBBQ0tfREVGQVVMVF9FWFBPUlRfXylcbi8qIGhhcm1vbnkgZXhwb3J0ICovIH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIGV2ZW50c19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgZXZlbnRzICovIFwiLi9ub2RlX21vZHVsZXMvZXZlbnRzL2V2ZW50cy5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBldmVudHNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19fd2VicGFja19yZXF1aXJlX18ubihldmVudHNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2xvZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9sb2dlciAqLyBcIi4vc3JjL2xvZ2VyLnRzXCIpO1xudmFyIF9fZXh0ZW5kcyA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5cblxudmFyIE1vZHVsZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTW9kdWxlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE1vZHVsZSgpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgIH1cbiAgICBNb2R1bGUucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoZCkge1xuICAgICAgICBpZiAoZCA9PT0gdm9pZCAwKSB7IGQgPSBudWxsOyB9XG4gICAgICAgIF9sb2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fLmRlZmF1bHQubG9nKFwiZGVmYXVsdCBpbml0OiBcIiArIHRoaXMubmFtZSArIFwiOlwiICsgdGhpcy5uYW1lLCBkKTtcbiAgICB9O1xuICAgIE1vZHVsZS5wcm90b3R5cGUuaW5wdXQgPSBmdW5jdGlvbiAoZCkge1xuICAgICAgICBfbG9nZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXy5kZWZhdWx0LmxvZyhcImRlZmF1bHQgaW5wdXQ6IFwiICsgdGhpcy5uYW1lICsgXCI6XCIgKyB0aGlzLm5hbWUsIGQpO1xuICAgIH07XG4gICAgTW9kdWxlLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX2xvZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18uZGVmYXVsdC5sb2coXCJkZWZhdWx0IHN0YXJ0OiBcIiArIHRoaXMubmFtZSk7XG4gICAgfTtcbiAgICBNb2R1bGUucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF9sb2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fLmRlZmF1bHQubG9nKFwiZGVmYXVsdCBzdG9wOiBcIiArIHRoaXMubmFtZSk7XG4gICAgfTtcbiAgICBNb2R1bGUucHJvdG90eXBlLmNhbmNlbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX2xvZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18uZGVmYXVsdC5sb2coXCJkZWZhdWx0IGNhbmNlbFwiICsgdGhpcy5uYW1lKTtcbiAgICB9O1xuICAgIE1vZHVsZS5wcm90b3R5cGUucmVib290ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBzd2l0Y2ggKHRoaXMuc3RhdGVzKSB7XG4gICAgICAgICAgICBjYXNlIDE6IC8v5bCx57uqLlxuICAgICAgICAgICAgICAgIF9sb2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fLmRlZmF1bHQubG9nKFwibm8gRXJyIHBsZWFzZSBjaGVjayBjb2RlLlwiKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMjogLy/ljaDnlKjkuK0uXG4gICAgICAgICAgICAgICAgX2xvZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18uZGVmYXVsdC5sb2codGhpcy5uYW1lICsgJyBpcyBvbiB1c2luZy4gdHJ5IHJlYm9vdC4nKTtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuY2FuY2VsKCk7XG4gICAgICAgICAgICAgICAgfSwgMCk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIF9sb2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fLmRlZmF1bHQubG9nKFwidW5rbm93U3RhdGVzIGF0IHJlYm9vdGluZy5cIiArIHRoaXMubmFtZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE1vZHVsZS5wcm90b3R5cGUucmVpbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBjb25zb2xlLmxvZyhcInJlaW5pdGluZ1wiKTtcbiAgICAgICAgdmFyIGluaXRwcm8gPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICBfdGhpcy5pbml0KDEpO1xuICAgICAgICB9KTtcbiAgICAgICAgaW5pdHByby50aGVuKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgICAgICB2YXIgbyA9IHtcbiAgICAgICAgICAgICAgICBmcm9tOiBfdGhpcy5uYW1lLFxuICAgICAgICAgICAgICAgIHRvOiBcIm1haW5cIixcbiAgICAgICAgICAgICAgICBkYXRhOiBcInJlYm9vdFwiLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIF90aGlzLmVtaXQoXCJvdXRwdXRcIiwgbyk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIumHjeWQr+aIkOWKnyFcIik7XG4gICAgICAgIH0pO1xuICAgICAgICBpbml0cHJvLmNhdGNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBfbG9nZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXy5kZWZhdWx0LmVycm9yKGUsIFwiNVwiLCBfdGhpcywgXCIwMVwiLCBcIumHjeWQr+Wksei0peaUvuW8g+WQp+WwkeW5tFwiKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gTW9kdWxlO1xufShldmVudHNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FdmVudEVtaXR0ZXIpKTtcbi8qIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi8gY29uc3QgX19XRUJQQUNLX0RFRkFVTFRfRVhQT1JUX18gPSAoTW9kdWxlKTtcblxuXG4vLyMgc291cmNlVVJMPXdlYnBhY2s6Ly9Acm9uZ2Nsb3VkL3JjbGl2ZXJvb21saWIvLi9zcmMvc3RydWN0dXJlL21vZHVsZXMudHM/Iik7LyoqKi99LyoqKioqKi99Oy8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovIC8qKioqKiovIC8vIFRoZSBtb2R1bGUgY2FjaGUKLyoqKioqKi92YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fPXt9Oy8qKioqKiovIC8qKioqKiovIC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uCi8qKioqKiovZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCl7LyoqKioqKi8gLy8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlCi8qKioqKiovdmFyIGNhY2hlZE1vZHVsZT1fX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdOy8qKioqKiovaWYoY2FjaGVkTW9kdWxlIT09dW5kZWZpbmVkKXsvKioqKioqL3JldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0czsvKioqKioqL30vKioqKioqLyAvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKQovKioqKioqL3ZhciBtb2R1bGU9X193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXT17LyoqKioqKi8gLy8gbm8gbW9kdWxlLmlkIG5lZWRlZAovKioqKioqLyAvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZAovKioqKioqL2V4cG9ydHM6e30vKioqKioqL307LyoqKioqKi8gLyoqKioqKi8gLy8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uCi8qKioqKiovX193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLG1vZHVsZS5leHBvcnRzLF9fd2VicGFja19yZXF1aXJlX18pOy8qKioqKiovIC8qKioqKiovIC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlCi8qKioqKiovcmV0dXJuIG1vZHVsZS5leHBvcnRzOy8qKioqKiovfS8qKioqKiovIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovIC8qKioqKiovIC8qIHdlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0ICovIC8qKioqKiovKGZ1bmN0aW9uKCl7LyoqKioqKi8gLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXMKLyoqKioqKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm49ZnVuY3Rpb24obW9kdWxlKXsvKioqKioqL3ZhciBnZXR0ZXI9bW9kdWxlJiZtb2R1bGUuX19lc01vZHVsZT8vKioqKioqL2Z1bmN0aW9uKCl7cmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddO306LyoqKioqKi9mdW5jdGlvbigpe3JldHVybiBtb2R1bGU7fTsvKioqKioqL19fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIse2E6Z2V0dGVyfSk7LyoqKioqKi9yZXR1cm4gZ2V0dGVyOy8qKioqKiovfTsvKioqKioqL30pKCk7LyoqKioqKi8gLyoqKioqKi8gLyogd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzICovIC8qKioqKiovKGZ1bmN0aW9uKCl7LyoqKioqKi8gLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0cwovKioqKioqL19fd2VicGFja19yZXF1aXJlX18uZD1mdW5jdGlvbihleHBvcnRzLGRlZmluaXRpb24pey8qKioqKiovZm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbil7LyoqKioqKi9pZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbixrZXkpJiYhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsa2V5KSl7LyoqKioqKi9PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxrZXkse2VudW1lcmFibGU6dHJ1ZSxnZXQ6ZGVmaW5pdGlvbltrZXldfSk7LyoqKioqKi99LyoqKioqKi99LyoqKioqKi99Oy8qKioqKiovfSkoKTsvKioqKioqLyAvKioqKioqLyAvKiB3ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kICovIC8qKioqKiovKGZ1bmN0aW9uKCl7LyoqKioqKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm89ZnVuY3Rpb24ob2JqLHByb3Ape3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLHByb3ApO307LyoqKioqKi99KSgpOy8qKioqKiovIC8qKioqKiovIC8qIHdlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QgKi8gLyoqKioqKi8oZnVuY3Rpb24oKXsvKioqKioqLyAvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzCi8qKioqKiovX193ZWJwYWNrX3JlcXVpcmVfXy5yPWZ1bmN0aW9uKGV4cG9ydHMpey8qKioqKiovaWYodHlwZW9mIFN5bWJvbCE9PSd1bmRlZmluZWQnJiZTeW1ib2wudG9TdHJpbmdUYWcpey8qKioqKiovT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsU3ltYm9sLnRvU3RyaW5nVGFnLHt2YWx1ZTonTW9kdWxlJ30pOy8qKioqKiovfS8qKioqKiovT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsJ19fZXNNb2R1bGUnLHt2YWx1ZTp0cnVlfSk7LyoqKioqKi99Oy8qKioqKiovfSkoKTsvKioqKioqLyAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLyAvKioqKioqLyAvKioqKioqLyAvLyBzdGFydHVwCi8qKioqKiovIC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0cwovKioqKioqLyAvLyBUaGlzIGVudHJ5IG1vZHVsZSBjYW4ndCBiZSBpbmxpbmVkIGJlY2F1c2UgdGhlIGV2YWwgZGV2dG9vbCBpcyB1c2VkLgovKioqKioqL3ZhciBfX3dlYnBhY2tfZXhwb3J0c19fPV9fd2VicGFja19yZXF1aXJlX18oIi4vc3JjL2luZGV4LnRzIik7LyoqKioqKi8gLyoqKioqKi9yZXR1cm4gX193ZWJwYWNrX2V4cG9ydHNfXzsvKioqKioqL30oKSk7fSk7"},{"version":3,"sources":["/Users/cuifengbo/work/RCVoiceRoomLib-Web/dist/main.js"],"names":["webpackUniversalModuleDefinition","root","factory","exports","module","define","amd","a","i","self","__webpack_modules__","__unused_webpack_module","__webpack_exports__","__webpack_require__","eval","__webpack_module_cache__","moduleId","cachedModule","undefined","n","getter","__esModule","d","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value"],"mappings":"gaAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GACA,CAAC,QAASA,CAAAA,gCAAT,CAA0CC,IAA1C,CAAgDC,OAAhD,CAAyD,CACzD,GAAG,OAAOC,CAAAA,OAAP,mCAAOA,OAAP,KAAmB,QAAnB,EAA+B,OAAOC,CAAAA,MAAP,mCAAOA,MAAP,KAAkB,QAApD,CACCA,MAAM,CAACD,OAAP,CAAiBD,OAAO,EAAxB,CADD,IAEK,IAAG,MAAOG,CAAAA,MAAP,GAAkB,UAAlB,EAAgCA,MAAM,CAACC,GAA1C,CACJD,MAAM,CAAC,EAAD,CAAKH,OAAL,CAAN,CADI,IAEA,CACJ,GAAIK,CAAAA,CAAC,CAAGL,OAAO,EAAf,CACA,IAAI,GAAIM,CAAAA,CAAR,GAAaD,CAAAA,CAAb,EAAgB,CAAC,OAAOJ,CAAAA,OAAP,mCAAOA,OAAP,KAAmB,QAAnB,CAA8BA,OAA9B,CAAwCF,IAAzC,EAA+CO,CAA/C,EAAoDD,CAAC,CAACC,CAAD,CAArD,CAAhB,CACA,CACD,CATD,EASGC,IATH,CASS,UAAW,CACpB,MAAO,SAAU,UAAM,CAAE;AACzB,QAAU,aACV,QAAU,GAAIC,CAAAA,mBAAmB,CAAI,CAErC,KAAM,qDACN;AACA;AACA,8DAHM,CAIN,KAAO,mDAACC,uBAAD,CAA0BC,mBAA1B,CAA+CC,mBAA/C,CAAuE,CAE9EC,IAAI,CAAC,ogjWAAD,CAAJ,CAEA,KAAO,CAV8B,CAYrC,KAAM,yDACN;AACA;AACA,kEAHM,CAIN,KAAO,sDAACH,uBAAD,CAA0BC,mBAA1B,CAA+CC,mBAA/C,CAAuE,CAE9EC,IAAI,CAAC,+wyHAAD,CAAJ,CAEA,KAAO,CApB8B,CAsBrC,KAAM,wFACN;AACA;AACA,iGAHM,CAIN,KAAO,iFAACH,uBAAD,CAA0BC,mBAA1B,CAA+CC,mBAA/C,CAAuE,CAE9EC,IAAI,CAAC,uijWAAD,CAAJ,CAEA,KAAO,CA9B8B,CAgCrC,KAAM,yDACN;AACA;AACA,kEAHM,CAIN,KAAO,sDAACH,uBAAD,CAA0BC,mBAA1B,CAA+CC,mBAA/C,CAAuE,CAE9EC,IAAI,CAAC,s/4NAAD,CAAJ,CAEA,KAAO,CAxC8B,CA0CrC,KAAM,kCACN;AACA;AACA,2CAHM,CAIN,KAAO,oCAACV,MAAD,CAAY,CAEnBU,IAAI,CAAC,qneAAD,CAAJ,CAEA,KAAO,CAlD8B,CAoDrC,KAAM,kBACN;AACA;AACA,2BAHM,CAIN,KAAO,qBAACH,uBAAD,CAA0BC,mBAA1B,CAA+CC,mBAA/C,CAAuE,CAE9EC,IAAI,CAAC,4yBAAD,CAAJ,CAEA,KAAO,CA5D8B,CA8DrC,KAAM,iBACN;AACA;AACA,0BAHM,CAIN,KAAO,oBAACH,uBAAD,CAA0BC,mBAA1B,CAA+CC,mBAA/C,CAAuE,CAE9EC,IAAI,CAAC,852DAAD,CAAJ,CAEA,KAAO,CAtE8B,CAwErC,KAAM,iBACN;AACA;AACA,0BAHM,CAIN,KAAO,oBAACH,uBAAD,CAA0BC,mBAA1B,CAA+CC,mBAA/C,CAAuE,CAE9EC,IAAI,CAAC,m0IAAD,CAAJ,CAEA,KAAO,CAhF8B,CAkFrC,KAAM,4BACN;AACA;AACA,qCAHM,CAIN,KAAO,6BAACH,uBAAD,CAA0BC,mBAA1B,CAA+CC,mBAA/C,CAAuE,CAE9EC,IAAI,CAAC,g0oDAAD,CAAJ,CAEA,KAAO,CA1F8B,CA4FrC,KAAM,6BACN;AACA;AACA,sCAHM,CAIN,KAAO,8BAACH,uBAAD,CAA0BC,mBAA1B,CAA+CC,mBAA/C,CAAuE,CAE9EC,IAAI,CAAC,svvCAAD,CAAJ,CAEA,KAAO,CApG8B,CAsGrC,KAAM,6BACN;AACA;AACA,sCAHM,CAIN,KAAO,+BAACH,uBAAD,CAA0BC,mBAA1B,CAA+CC,mBAA/C,CAAuE,CAE9EC,IAAI,CAAC,w2HAAD,CAAJ,CAEA,KAAO,CAEP,QAhHqC,CAA3B,CAiHV,0EAnHuB,CAoHvB,QApHuB,CAoHb;AACV,QAAU,GAAIC,CAAAA,wBAAwB,CAAG,EAA/B,CACV,QAtHuB,CAuHvB,QAvHuB,CAuHb;AACV,QAAU,QAASF,CAAAA,mBAAT,CAA6BG,QAA7B,CAAuC,CACjD,QADiD,CACtC;AACX,QAAW,GAAIC,CAAAA,YAAY,CAAGF,wBAAwB,CAACC,QAAD,CAA3C,CACX,QAAW,GAAIC,YAAY,GAAKC,SAArB,CAAgC,CAC3C,QAAY,MAAOD,CAAAA,YAAY,CAACd,OAApB,CACZ,QAAY,CACZ,QANiD,CAMtC;AACX,QAAW,GAAIC,CAAAA,MAAM,CAAGW,wBAAwB,CAACC,QAAD,CAAxB,CAAqC,CAC7D,QAD6D,CACjD;AACZ,QAF6D,CAEjD;AACZ,QAAYb,OAAO,CAAE,EACrB,QAJ6D,CAAlD,CAKX,QAZiD,CAajD,QAbiD,CAatC;AACX,QAAWO,mBAAmB,CAACM,QAAD,CAAnB,CAA8BZ,MAA9B,CAAsCA,MAAM,CAACD,OAA7C,CAAsDU,mBAAtD,EACX,QAfiD,CAgBjD,QAhBiD,CAgBtC;AACX,QAAW,MAAOT,CAAAA,MAAM,CAACD,OAAd,CACX,QAAW,CACX,QA3IuB,CA4IvB,0EA5IuB,CA6IvB,QA7IuB,CA6Ib,+CA7Ia,CA8IvB,QAAU,CAAC,UAAM,CACjB,QADiB,CACN;AACX,QAAWU,mBAAmB,CAACM,CAApB,CAAwB,SAACf,MAAD,CAAY,CAC/C,QAAY,GAAIgB,CAAAA,MAAM,CAAGhB,MAAM,EAAIA,MAAM,CAACiB,UAAjB,CACzB,QAAa,iBAAOjB,CAAAA,MAAM,CAAC,SAAD,CAAb,EADY,CAEzB,QAAa,iBAAOA,CAAAA,MAAP,EAFD,CAGZ,QAAYS,mBAAmB,CAACS,CAApB,CAAsBF,MAAtB,CAA8B,CAAEb,CAAC,CAAEa,MAAL,CAA9B,EACZ,QAAY,MAAOA,CAAAA,MAAP,CACZ,QAAY,CAND,CAOX,QAAW,CATD,IAUV,QAxJuB,CAyJvB,QAzJuB,CAyJb,6CAzJa,CA0JvB,QAAU,CAAC,UAAM,CACjB,QADiB,CACN;AACX,QAAWP,mBAAmB,CAACS,CAApB,CAAwB,SAACnB,OAAD,CAAUoB,UAAV,CAAyB,CAC5D,QAAY,IAAI,GAAIC,CAAAA,GAAR,GAAeD,CAAAA,UAAf,CAA2B,CACvC,QAAa,GAAGV,mBAAmB,CAACY,CAApB,CAAsBF,UAAtB,CAAkCC,GAAlC,GAA0C,CAACX,mBAAmB,CAACY,CAApB,CAAsBtB,OAAtB,CAA+BqB,GAA/B,CAA9C,CAAmF,CAChG,QAAcE,MAAM,CAACC,cAAP,CAAsBxB,OAAtB,CAA+BqB,GAA/B,CAAoC,CAAEI,UAAU,CAAE,IAAd,CAAoBC,GAAG,CAAEN,UAAU,CAACC,GAAD,CAAnC,CAApC,EACd,QAAc,CACd,QAAa,CACb,QAAY,CAND,CAOX,QAAW,CATD,IAUV,QApKuB,CAqKvB,QArKuB,CAqKb,8CArKa,CAsKvB,QAAU,CAAC,UAAM,CACjB,QAAWX,mBAAmB,CAACY,CAApB,CAAwB,SAACK,GAAD,CAAMC,IAAN,QAAgBL,CAAAA,MAAM,CAACM,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCJ,GAArC,CAA0CC,IAA1C,CAAhB,EAAxB,CACX,QAAW,CAFD,IAGV,QAzKuB,CA0KvB,QA1KuB,CA0Kb,2CA1Ka,CA2KvB,QAAU,CAAC,UAAM,CACjB,QADiB,CACN;AACX,QAAWlB,mBAAmB,CAACsB,CAApB,CAAwB,SAAChC,OAAD,CAAa,CAChD,QAAY,GAAG,MAAOiC,CAAAA,MAAP,GAAkB,WAAlB,EAAiCA,MAAM,CAACC,WAA3C,CAAwD,CACpE,QAAaX,MAAM,CAACC,cAAP,CAAsBxB,OAAtB,CAA+BiC,MAAM,CAACC,WAAtC,CAAmD,CAAEC,KAAK,CAAE,QAAT,CAAnD,EACb,QAAa,CACb,QAAYZ,MAAM,CAACC,cAAP,CAAsBxB,OAAtB,CAA+B,YAA/B,CAA6C,CAAEmC,KAAK,CAAE,IAAT,CAA7C,EACZ,QAAY,CALD,CAMX,QAAW,CARD,IASV,QApLuB,CAqLvB,0EArLuB,CAsLvB,QAtLuB,CAuLvB,QAvLuB,CAuLb;AACV,QAxLuB,CAwLb;AACV,QAzLuB,CAyLb;AACV,QAAU,GAAI1B,CAAAA,mBAAmB,CAAGC,mBAAmB,CAAC,gBAAD,CAA7C,CACV,QA3LuB,CA4LvB,QAAU,MAAOD,CAAAA,mBAAP,CACV,QAAU,CA7LM,EAAhB,EA+LC,CAzMD","sourcesContent":["/*\n * ATTENTION: The \"eval\" devtool has been used (maybe by default in mode: \"development\").\n * This devtool is neither made for production nor for readable output files.\n * It uses \"eval()\" calls to create a separate source file in the browser devtools.\n * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)\n * or disable the default devtool with \"devtool: false\".\n * If you are looking for production-ready output files, see mode: \"production\" (https://webpack.js.org/configuration/mode/).\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(self, function() {\nreturn /******/ (() => { // webpackBootstrap\n/******/ \t\"use strict\";\n/******/ \tvar __webpack_modules__ = ({\n\n/***/ \"./node_modules/@rongcloud/engine/dist/index.esm.js\":\n/*!**********************************************************!*\\\n  !*** ./node_modules/@rongcloud/engine/dist/index.esm.js ***!\n  \\**********************************************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\neval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   \\\"AEngine\\\": () => (/* binding */ Gr),\\n/* harmony export */   \\\"ANavi\\\": () => (/* binding */ qr),\\n/* harmony export */   \\\"APIContext\\\": () => (/* binding */ Ns),\\n/* harmony export */   \\\"AppStorage\\\": () => (/* binding */ R),\\n/* harmony export */   \\\"AssertRules\\\": () => (/* binding */ We),\\n/* harmony export */   \\\"CONNECTION_TYPE\\\": () => (/* binding */ t),\\n/* harmony export */   \\\"CPP_PROTOCAL_MSGTYPE_OPTION\\\": () => (/* binding */ E),\\n/* harmony export */   \\\"CallLibMsgType\\\": () => (/* binding */ Ye),\\n/* harmony export */   \\\"ChatroomEntryType\\\": () => (/* binding */ Le),\\n/* harmony export */   \\\"ChatroomMemberChangeType\\\": () => (/* binding */ De),\\n/* harmony export */   \\\"CometChannel\\\": () => (/* binding */ Br),\\n/* harmony export */   \\\"ConnectResultCode\\\": () => (/* binding */ Ce),\\n/* harmony export */   \\\"ConnectionStatus\\\": () => (/* binding */ Ie),\\n/* harmony export */   \\\"ConversationType\\\": () => (/* binding */ j),\\n/* harmony export */   \\\"DelayTimer\\\": () => (/* binding */ Rt),\\n/* harmony export */   \\\"ErrorCode\\\": () => (/* binding */ Ee),\\n/* harmony export */   \\\"EventEmitter\\\": () => (/* binding */ _e),\\n/* harmony export */   \\\"FileType\\\": () => (/* binding */ W),\\n/* harmony export */   \\\"HttpMethod\\\": () => (/* binding */ Vr),\\n/* harmony export */   \\\"IM_COMET_PULLMSG_TIMEOUT\\\": () => (/* binding */ y),\\n/* harmony export */   \\\"IM_PING_INTERVAL_TIME\\\": () => (/* binding */ d),\\n/* harmony export */   \\\"IM_PING_MIN_TIMEOUT\\\": () => (/* binding */ p),\\n/* harmony export */   \\\"IM_PING_TIMEOUT\\\": () => (/* binding */ f),\\n/* harmony export */   \\\"IM_SIGNAL_TIMEOUT\\\": () => (/* binding */ l),\\n/* harmony export */   \\\"LiveRole\\\": () => (/* binding */ Ge),\\n/* harmony export */   \\\"LiveType\\\": () => (/* binding */ Be),\\n/* harmony export */   \\\"LogLevel\\\": () => (/* binding */ U),\\n/* harmony export */   \\\"LogType\\\": () => (/* binding */ b),\\n/* harmony export */   \\\"Logger\\\": () => (/* binding */ pe),\\n/* harmony export */   \\\"MAX_MESSAGE_CONTENT_BYTES\\\": () => (/* binding */ _),\\n/* harmony export */   \\\"MINI_COMET_CONNECT_URIS\\\": () => (/* binding */ h),\\n/* harmony export */   \\\"MINI_SOCKET_CONNECT_URIS\\\": () => (/* binding */ c),\\n/* harmony export */   \\\"MentionedType\\\": () => (/* binding */ we),\\n/* harmony export */   \\\"MessageBlockType\\\": () => (/* binding */ ke),\\n/* harmony export */   \\\"MessageDirection\\\": () => (/* binding */ me),\\n/* harmony export */   \\\"MessageType\\\": () => (/* binding */ Se),\\n/* harmony export */   \\\"NAVI_CACHE_DURATION\\\": () => (/* binding */ r),\\n/* harmony export */   \\\"NAVI_REQ_TIMEOUT\\\": () => (/* binding */ s),\\n/* harmony export */   \\\"NotificationStatus\\\": () => (/* binding */ Oe),\\n/* harmony export */   \\\"OperateStatus\\\": () => (/* binding */ Fe),\\n/* harmony export */   \\\"PING_REQ_TIMEOUT\\\": () => (/* binding */ o),\\n/* harmony export */   \\\"PUBLIC_CLOUD_NAVI_URIS\\\": () => (/* binding */ u),\\n/* harmony export */   \\\"PluginContext\\\": () => (/* binding */ ys),\\n/* harmony export */   \\\"RCAssertError\\\": () => (/* binding */ nt),\\n/* harmony export */   \\\"RTCApiType\\\": () => (/* binding */ qe),\\n/* harmony export */   \\\"RTCIdentityChangeType\\\": () => (/* binding */ Ke),\\n/* harmony export */   \\\"RTCJoinType\\\": () => (/* binding */ He),\\n/* harmony export */   \\\"RTCMode\\\": () => (/* binding */ xe),\\n/* harmony export */   \\\"RTCPluginContext\\\": () => (/* binding */ ms),\\n/* harmony export */   \\\"ReceivedStatus\\\": () => (/* binding */ i),\\n/* harmony export */   \\\"SEND_MESSAGE_TYPE_OPTION\\\": () => (/* binding */ v),\\n/* harmony export */   \\\"STATUS_MESSAGE\\\": () => (/* binding */ T),\\n/* harmony export */   \\\"STORAGE_ROOT_KEY\\\": () => (/* binding */ m),\\n/* harmony export */   \\\"TagChangeType\\\": () => (/* binding */ Ss),\\n/* harmony export */   \\\"UploadMethod\\\": () => (/* binding */ Ue),\\n/* harmony export */   \\\"VersionManage\\\": () => (/* binding */ Je),\\n/* harmony export */   \\\"WEB_SOCKET_TIMEOUT\\\": () => (/* binding */ a),\\n/* harmony export */   \\\"WebSocketChannel\\\": () => (/* binding */ xr),\\n/* harmony export */   \\\"appendUrl\\\": () => (/* binding */ k),\\n/* harmony export */   \\\"assert\\\": () => (/* binding */ it),\\n/* harmony export */   \\\"clone\\\": () => (/* binding */ It),\\n/* harmony export */   \\\"cloneByJSON\\\": () => (/* binding */ yt),\\n/* harmony export */   \\\"forEach\\\": () => (/* binding */ dt),\\n/* harmony export */   \\\"formatConnectResponseCode\\\": () => (/* binding */ Et),\\n/* harmony export */   \\\"getBrowser\\\": () => (/* binding */ vt),\\n/* harmony export */   \\\"getMimeKey\\\": () => (/* binding */ at),\\n/* harmony export */   \\\"getUploadFileName\\\": () => (/* binding */ ot),\\n/* harmony export */   \\\"indexOf\\\": () => (/* binding */ pt),\\n/* harmony export */   \\\"isArray\\\": () => (/* binding */ X),\\n/* harmony export */   \\\"isArrayBuffer\\\": () => (/* binding */ $),\\n/* harmony export */   \\\"isBoolean\\\": () => (/* binding */ z),\\n/* harmony export */   \\\"isFunction\\\": () => (/* binding */ ie),\\n/* harmony export */   \\\"isHttpUrl\\\": () => (/* binding */ oe),\\n/* harmony export */   \\\"isInObject\\\": () => (/* binding */ _t),\\n/* harmony export */   \\\"isInclude\\\": () => (/* binding */ gt),\\n/* harmony export */   \\\"isNull\\\": () => (/* binding */ se),\\n/* harmony export */   \\\"isNumber\\\": () => (/* binding */ Z),\\n/* harmony export */   \\\"isObject\\\": () => (/* binding */ ne),\\n/* harmony export */   \\\"isString\\\": () => (/* binding */ J),\\n/* harmony export */   \\\"isUndefined\\\": () => (/* binding */ re),\\n/* harmony export */   \\\"isValidChrmEntryKey\\\": () => (/* binding */ ht),\\n/* harmony export */   \\\"isValidChrmEntryValue\\\": () => (/* binding */ lt),\\n/* harmony export */   \\\"isValidConversationType\\\": () => (/* binding */ ue),\\n/* harmony export */   \\\"isValidExpansion\\\": () => (/* binding */ he),\\n/* harmony export */   \\\"isValidFileType\\\": () => (/* binding */ ce),\\n/* harmony export */   \\\"map\\\": () => (/* binding */ ft),\\n/* harmony export */   \\\"notEmptyArray\\\": () => (/* binding */ te),\\n/* harmony export */   \\\"notEmptyObject\\\": () => (/* binding */ ae),\\n/* harmony export */   \\\"notEmptyString\\\": () => (/* binding */ ee),\\n/* harmony export */   \\\"pushConfigsToJSON\\\": () => (/* binding */ ut),\\n/* harmony export */   \\\"pushJSONToConfigs\\\": () => (/* binding */ ct),\\n/* harmony export */   \\\"todo\\\": () => (/* binding */ P),\\n/* harmony export */   \\\"usingCppEngine\\\": () => (/* binding */ mt),\\n/* harmony export */   \\\"validate\\\": () => (/* binding */ rt),\\n/* harmony export */   \\\"version\\\": () => (/* binding */ Os)\\n/* harmony export */ });\\nvar e;!function(e){e[e.READ=1]=\\\"READ\\\",e[e.LISTENED=2]=\\\"LISTENED\\\",e[e.DOWNLOADED=4]=\\\"DOWNLOADED\\\",e[e.RETRIEVED=8]=\\\"RETRIEVED\\\",e[e.UNREAD=0]=\\\"UNREAD\\\"}(e||(e={}));var t,n,i=e,r=72e5,s=1e4,o=5e3,a=5e3,u=[\\\"https://nav.cn.ronghub.com\\\",\\\"https://nav2-cn.ronghub.com\\\"],c=[\\\"wsproxy.cn.ronghub.com\\\",\\\"wsap-cn.ronghub.com\\\"],h=[\\\"cometproxy-cn.ronghub.com\\\",\\\"mini-cn.ronghub.com\\\"],l=3e4,d=15e3,f=15e3,p=2e3,_=131072,y=45e3,m=\\\"RCV4-\\\",v={\\\"RC:TxtMsg\\\":{isCounted:!0,isPersited:!0},\\\"RC:ImgMsg\\\":{isCounted:!0,isPersited:!0},\\\"RC:VcMsg\\\":{isCounted:!0,isPersited:!0},\\\"RC:ImgTextMsg\\\":{isCounted:!0,isPersited:!0},\\\"RC:FileMsg\\\":{isCounted:!0,isPersited:!0},\\\"RC:HQVCMsg\\\":{isCounted:!0,isPersited:!0},\\\"RC:LBSMsg\\\":{isCounted:!0,isPersited:!0},\\\"RC:PSImgTxtMsg\\\":{isCounted:!0,isPersited:!0},\\\"RC:PSMultiImgTxtMsg\\\":{isCounted:!0,isPersited:!0},\\\"RCJrmf:RpMsg\\\":{isCounted:!0,isPersited:!0},\\\"RCJrmf:RpOpendMsg\\\":{isCounted:!0,isPersited:!0},\\\"RC:CombineMsg\\\":{isCounted:!0,isPersited:!0},\\\"RC:ReferenceMsg\\\":{isCounted:!0,isPersited:!0},\\\"RC:SightMsg\\\":{isCounted:!0,isPersited:!0},\\\"RC:GIFMsg\\\":{isCounted:!0,isPersited:!0},\\\"RC:InfoNtf\\\":{isCounted:!1,isPersited:!0},\\\"RC:ContactNtf\\\":{isCounted:!1,isPersited:!0},\\\"RC:ProfileNtf\\\":{isCounted:!1,isPersited:!0},\\\"RC:CmdNtf\\\":{isCounted:!1,isPersited:!0},\\\"RC:GrpNtf\\\":{isCounted:!1,isPersited:!0},\\\"RC:RcCmd\\\":{isCounted:!1,isPersited:!0},\\\"RC:CmdMsg\\\":{isCounted:!1,isPersited:!1},\\\"RC:TypSts\\\":{isCounted:!1,isPersited:!1},\\\"RC:PSCmd\\\":{isCounted:!1,isPersited:!1},\\\"RC:SRSMsg\\\":{isCounted:!1,isPersited:!1},\\\"RC:RRReqMsg\\\":{isCounted:!1,isPersited:!1},\\\"RC:RRRspMsg\\\":{isCounted:!1,isPersited:!1},\\\"RC:CsChaR\\\":{isCounted:!1,isPersited:!1},\\\"RC:CSCha\\\":{isCounted:!1,isPersited:!1},\\\"RC:CsEva\\\":{isCounted:!1,isPersited:!1},\\\"RC:CsContact\\\":{isCounted:!1,isPersited:!1},\\\"RC:CsHs\\\":{isCounted:!1,isPersited:!1},\\\"RC:CsHsR\\\":{isCounted:!1,isPersited:!1},\\\"RC:CsSp\\\":{isCounted:!1,isPersited:!1},\\\"RC:CsEnd\\\":{isCounted:!1,isPersited:!1},\\\"RC:CsUpdate\\\":{isCounted:!1,isPersited:!1},\\\"RC:ReadNtf\\\":{isCounted:!1,isPersited:!1},\\\"RC:chrmKVNotiMsg\\\":{isCounted:!1,isPersited:!1},\\\"RC:VCAccept\\\":{isCounted:!1,isPersited:!1},\\\"RC:VCRinging\\\":{isCounted:!1,isPersited:!1},\\\"RC:VCSummary\\\":{isCounted:!1,isPersited:!1},\\\"RC:VCHangup\\\":{isCounted:!1,isPersited:!1},\\\"RC:VCInvite\\\":{isCounted:!1,isPersited:!1},\\\"RC:VCModifyMedia\\\":{isCounted:!1,isPersited:!1},\\\"RC:VCModifyMem\\\":{isCounted:!1,isPersited:!1},\\\"RC:MsgExMsg\\\":{isCounted:!1,isPersited:!1},\\\"RC:RRMsg\\\":{isCounted:!1,isPersited:!1},\\\"RC:LogCmdMsg\\\":{isCounted:!1,isPersited:!1},\\\"RC:InterceptMsg\\\":{isCounted:!1,isPersited:!1}},E={\\\"RC:DizNtf\\\":{isCounted:!1,isPersited:!1}},T=[\\\"RC:TypSts\\\",\\\"RC:InterceptMsg\\\"];!function(e){e.WEBSOCKET=\\\"websocket\\\",e.COMET=\\\"comet\\\"}(t||(t={}));var I=function(e){return n||(n={set:function(t,n){e.localStorage.setItem(t,JSON.stringify(n))},get:function(t){var n;try{n=JSON.parse(e.localStorage.getItem(t))}catch(e){n=null}return n},remove:function(t){return e.localStorage.removeItem(t)},getKeys:function(){var t=[];for(var n in e.localStorage)t.push(n);return t}}),n},C=function(){function e(e){this._caches={},e&&(this._caches=e)}return e.prototype.set=function(e,t){this._caches[e]=t},e.prototype.remove=function(e){var t=this.get(e);return delete this._caches[e],t},e.prototype.get=function(e){return this._caches[e]},e.prototype.getKeys=function(){var e=[];for(var t in this._caches)e.push(t);return e},e}(),R=function(){function e(e,t){var n,i=t?\\\"RCV4-\\\"+t:\\\"RCV4-\\\";this._rootStorage=I(e);var r=this._rootStorage.get(i)||{};this._cache=new C(((n={})[i]=r,n)),this._storageKey=i}return e.prototype._get=function(){var e=this._storageKey;return this._cache.get(e)||{}},e.prototype._set=function(e){var t=this._storageKey;e=e||{},this._cache.set(t,e),this._rootStorage.set(t,e)},e.prototype.set=function(e,t){var n=this._get();n[e]=t,this._set(n)},e.prototype.remove=function(e){var t=this._get();delete t[e],this._set(t)},e.prototype.clear=function(){var e=this._storageKey;this._rootStorage.remove(e),this._cache.remove(e)},e.prototype.get=function(e){return this._get()[e]},e.prototype.getKeys=function(){var e=this._get(),t=[];for(var n in e)t.push(n);return t},e.prototype.getValues=function(){return this._get()||{}},e}(),S=function(e,t){return(S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function N(e,t){if(\\\"function\\\"!=typeof t&&null!==t)throw new TypeError(\\\"Class extends value \\\"+String(t)+\\\" is not a constructor or null\\\");function n(){this.constructor=e}S(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var O=function(){return(O=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function M(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{u(i.next(e))}catch(e){s(e)}}function a(e){try{u(i.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}u((i=i.apply(e,t||[])).next())}))}function w(e,t){var n,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},\\\"function\\\"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError(\\\"Generator is already executing.\\\");for(;o;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function A(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e}var U,b,L=function(e){function t(t){return e.call(this,\\\"TODO => \\\"+t)||this}return N(t,e),t}(Error),P=function(e){return new L(e)},D=function(e,t,n){if(void 0===t||void 0===n)return e.toUpperCase();var i=e.slice(t,n);return e=e.replace(i,(function(e){return e.toUpperCase()}))},V=function(e,t){void 0===t&&(t=\\\"utf-8\\\");var n,i=0;if(\\\"utf-16\\\"===t)for(var r=0,s=e.length;r<s;r++)i+=(n=e.charCodeAt(r))<=65535?2:4;else for(r=0,s=e.length;r<s;r++)i+=(n=e.charCodeAt(r))<127?1:n<=2047?2:n<=65535?3:4;return i},k=function(e,t){if(e=e.replace(/\\\\?$/,\\\"\\\"),!t)return e;var n=Object.keys(t).map((function(e){return e+\\\"=\\\"+t[e]})).filter((function(e){return!!e}));return n.length?[e,n.join(\\\"&\\\")].join(\\\"?\\\"):e},x=function(e){return e.match(/\\\\d+(\\\\.\\\\d+){2}/)[0]};!function(e){e[e.LOG=0]=\\\"LOG\\\",e[e.DEBUG=0]=\\\"DEBUG\\\",e[e.INFO=1]=\\\"INFO\\\",e[e.WARN=2]=\\\"WARN\\\",e[e.ERROR=3]=\\\"ERROR\\\",e[e.FATAL=4]=\\\"FATAL\\\",e[e.NONE=1e3]=\\\"NONE\\\"}(U||(U={})),function(e){e.IM=\\\"IM\\\",e.RTC=\\\"RTC\\\"}(b||(b={}));var B=\\\"RC_Logs\\\";function G(e){var t=e.target.result;1===e.oldVersion&&t.deleteObjectStore(B),function(e,t,n){var i;if(!e.objectStoreNames.contains(t)){var r=O({},n.objectStoreParams);i=e.createObjectStore(t,r),n.indexs&&n.indexs.length>0&&n.indexs.forEach((function(e){i.createIndex(e.indexName,e.key,{unique:e.unique})}))}}(t,B,{indexs:[{indexName:\\\"time\\\",key:\\\"time\\\",unique:!1}],objectStoreParams:{autoIncrement:!0}})}var F,q=function(){function e(){}return e.init=function(){if(\\\"undefined\\\"!=typeof window&&window&&window.indexedDB){var t=window.indexedDB.open(\\\"RC_ENGINE_DB\\\",2);t.onerror=function(e){console.warn(\\\"open indexDB request failed \\\"+e.target.error)},t.onsuccess=function(t){e._db=t.target.result,e._db&&(e._db.onclose=function(t){var n;console.warn(\\\"The database \\\"+(null===(n=e._db)||void 0===n?void 0:n.name)+\\\" has unexpectedly closed.\\\",t),e._db=null,window.__RCIndexDBInstance=null},e._db.onerror=function(t){var n;console.warn(\\\"The database \\\"+(null===(n=e._db)||void 0===n?void 0:n.name)+\\\" has opening error.\\\",t),e._db=null,window.__RCIndexDBInstance=null},e._db.onabort=function(t){var n;console.warn(\\\"The database \\\"+(null===(n=e._db)||void 0===n?void 0:n.name)+\\\" has opening aborted.\\\",t),e._db=null,window.__RCIndexDBInstance=null}),window.__RCIndexDBInstance=new e},t.onupgradeneeded=function(t){e._db=t.target.result,G(t)}}else console.debug(\\\"IndexDB is not currently supported in the environment!\\\")},e.getInstance=function(){return window&&window.__RCIndexDBInstance?window.__RCIndexDBInstance:null},e.prototype.addList=function(t,n){return new Promise((function(i){if(e._db){var r=e._db.transaction([t],\\\"readwrite\\\"),s=r.objectStore(t);n.forEach((function(e){null==s||s.add(e)})),r.oncomplete=function(e){i(!0)},r.onerror=function(e){i(!1)}}else i(!1)}))},e.prototype.getRangeData=function(t,n,i,r){return new Promise((function(s){if(e._db){var o=e._db.transaction([t],\\\"readwrite\\\").objectStore(t),a=IDBKeyRange.bound(i,r),u=o.index(n),c=[],h=u.openCursor(a);h.onsuccess=function(e){var t=e.target.result;t?(c.push(t.value),t.continue()):s(c)},h.onerror=function(e){console.error(e),s([])}}else s([])}))},e.prototype.getCount=function(t,n){return new Promise((function(n){if(e._db){var i=e._db.transaction([t],\\\"readonly\\\").objectStore(t).count();i.onsuccess=function(){n(i.result)},i.onerror=function(e){console.error(e),n(0)}}else n(0)}))},e.prototype.removeFirstData=function(t,n,i){return new Promise((function(n){if(e._db){var r=e._db.transaction([t],\\\"readwrite\\\").objectStore(t),s=r.getAllKeys(IDBKeyRange.lowerBound(0),i);s.onsuccess=function(){var e=s.result;e.length>0&&(r.delete(IDBKeyRange.bound(e[0],e[e.length-1])).onsuccess=function(){n(!0)})}}else n(!1)}))},e._db=null,e}(),K=function(){return\\\"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\\\".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return(\\\"x\\\"===e?t:3&t|8).toString(16)}))},H=function(){var e=K();if(e=e.replace(/-/g,\\\"\\\")+\\\"a\\\",(e=function(e){var t=\\\"0123456789abcdefghigklmnopqrstuvwxyzABCDEFGHIGKLMNOPQRSTUVWXYZa0\\\".split(\\\"\\\"),n=t.length+1,i=+e,r=[];do{var s=i%n;i=(i-s)/n,r.unshift(t[s])}while(i);return r.join(\\\"\\\")}(e=parseInt(e,16))).length>22&&(e=e.slice(0,22)),e.length<22)for(var t=22-e.length,n=0;n<t;n++)e+=\\\"0\\\";return e};!function(e){e[e.NONE=0]=\\\"NONE\\\",e[e.PRIVATE=1]=\\\"PRIVATE\\\",e[e.DISCUSSION=2]=\\\"DISCUSSION\\\",e[e.GROUP=3]=\\\"GROUP\\\",e[e.CHATROOM=4]=\\\"CHATROOM\\\",e[e.CUSTOMER_SERVICE=5]=\\\"CUSTOMER_SERVICE\\\",e[e.SYSTEM=6]=\\\"SYSTEM\\\",e[e.APP_PUBLIC_SERVICE=7]=\\\"APP_PUBLIC_SERVICE\\\",e[e.PUBLIC_SERVICE=8]=\\\"PUBLIC_SERVICE\\\",e[e.ULTRA_GROUP=10]=\\\"ULTRA_GROUP\\\",e[e.RTC_ROOM=12]=\\\"RTC_ROOM\\\"}(F||(F={}));var Y,j=F;!function(e){e[e.IMAGE=1]=\\\"IMAGE\\\",e[e.AUDIO=2]=\\\"AUDIO\\\",e[e.VIDEO=3]=\\\"VIDEO\\\",e[e.FILE=4]=\\\"FILE\\\",e[e.SIGHT=5]=\\\"SIGHT\\\",e[e.COMBINE_HTML=6]=\\\"COMBINE_HTML\\\"}(Y||(Y={}));var Q,W=Y,J=function(e){return\\\"string\\\"==typeof e},z=function(e){return\\\"boolean\\\"==typeof e},Z=function(e){return\\\"number\\\"==typeof e&&!isNaN(e)},X=function(e){return-1!==Object.prototype.toString.call(e).indexOf(\\\"Array\\\")},$=function(e){return\\\"[object ArrayBuffer]\\\"===Object.prototype.toString.call(e)},ee=function(e){return J(e)&&e.length>0},te=function(e){return X(e)&&e.length>0},ne=function(e){return\\\"[object Object]\\\"===Object.prototype.toString.call(e)},ie=function(e){return\\\"[object Function]\\\"===Object.prototype.toString.call(e)},re=function(e){return void 0===e||\\\"[object Undefined]\\\"===Object.prototype.toString.call(e)},se=function(e){return\\\"[object Null]\\\"===Object.prototype.toString.call(e)},oe=function(e){return J(e)&&/https?:\\\\/\\\\//.test(e)},ae=function(e){for(var t in e)return!0;return!1},ue=function(e){return Z(e)&&Object.prototype.hasOwnProperty.call(j,e)},ce=function(e){return Z(e)&&Object.prototype.hasOwnProperty.call(W,e)},he=function(e){var t=!1;if(ne(e))for(var n in e)if(t=J(n)&&!/^[A-Za-z0-9_=+-]+$/.test(n))break;return t},le={};console&&((Q={})[U.DEBUG]=console.debug.bind(console),Q[U.INFO]=console.info.bind(console),Q[U.WARN]=console.warn.bind(console),Q[U.ERROR]=console.error.bind(console),Q[U.FATAL]=console.log.bind(console),le=Q);var de,fe=function(e){return J(e)||Z(e)||re(e)||z(e)?e:e instanceof Error?JSON.stringify({name:e.name,message:e.message,stack:e.stack}):JSON.stringify(e)},pe=function(){function e(e,t,n){this.tag=e,this.type=t,this.initiator=n,this._outLevel=U.WARN,this.debug=this.log.bind(this,U.DEBUG),this.info=this.log.bind(this,U.INFO),this.warn=this.log.bind(this,U.WARN),this.error=this.log.bind(this,U.ERROR),this.fatal=this.log.bind(this,U.FATAL)}return e.init=function(t){e.userId=t},e.reset=function(){e.userId=\\\"\\\"},e.prototype._defaultStdout=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];le[e]&&le[e].apply(le,A([t+\\\":\\\"],n))},e.prototype.__pushLocalLog=function(t,n,i){var r;r=this.type?this.type:[\\\"RCRTCLog\\\",\\\"RCCall\\\",\\\"RCRTC\\\",\\\"RTC-A\\\"].includes(this.tag)?b.RTC:b.IM;var s=Date.now();V(n)>=1e3&&(n=function(e,t,n){if(void 0===n&&(n=\\\"utf-8\\\"),!e||!t)return\\\"\\\";var i=\\\"utf-8\\\"===n?3:2,r=0,s=0,o=\\\"\\\";for(s=0;s<e.length;s++){if(e.charCodeAt(s)>255?r+=i:r++,r>t)return o;o+=e.charAt(s)}return e}(n,1e3));var o=JSON.stringify({message:n,userId:e.userId}).replace(/\\\"/g,'\\\"\\\"'),a=/^[\\\\w]+-[\\\\w]+-[\\\\w]+?/.test(i)?i:(this.initiator||\\\"L\\\")+\\\"-\\\"+i+\\\"-O\\\",u={sessionId:e.sessionId,time:s,level:4-t,content:e.sessionId+\\\",\\\"+Date.now()+\\\",\\\"+r+\\\",\\\"+(4-t)+\\\",\\\"+a+',\\\"'+o+'\\\"\\\\n',userId:e.userId};e.databaseLogList.push(u),(e.databaseLogList.length>=100||t===U.FATAL)&&this.__insertLogIntoDatabase()},e.prototype.__insertLogIntoDatabase=function(){return M(this,void 0,void 0,(function(){var t,n,i;return w(this,(function(r){switch(r.label){case 0:return t=A([],e.databaseLogList),e.databaseLogList=[],(n=q.getInstance())?[4,n.addList(B,t)]:[3,3];case 1:return i=r.sent(),[4,n.getCount(B,\\\"time\\\")];case 2:return r.sent()>1e5&&n.removeFirstData(B,\\\"time\\\",2e3),[2,i];case 3:return[2,!1]}}))}))},e.prototype.setLogLevel=function(e){this._outLevel=\\\"number\\\"!=typeof e?U.WARN:e},e.prototype.setLogStdout=function(e){this._logStdout=e},e.prototype.log=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(e>U.DEBUG&&this.__pushLocalLog(e,t.map(fe).join(\\\" \\\"),this.tag),!(e<this._outLevel)){var i=(new Date).toISOString()+\\\"[\\\"+this.tag+\\\"][\\\"+U[e]+\\\"]\\\",r=i+\\\" - \\\"+t.map(fe).join(\\\" \\\");this._logStdout?this._logStdout(e,r):this._stdout?this._stdout(e,r):this._defaultStdout.apply(this,A([e,i],t))}},e.prototype.reportLog=function(t,n,i){this.__pushLocalLog(4-t,i,n);var r=JSON.stringify({message:i}).replace(/\\\"/g,'\\\"\\\"');r='\\\"'+r+'\\\"';var s={level:t,content:[e.sessionId,Date.now(),this.type,t,n,r].join()+\\\"\\\\n\\\"};e.realTimeLogList.push(s),e.realTimeLogList.length>=600&&(e.realTimeLogList=e.realTimeLogList.slice(-500))},e.prototype.set=function(e,t){this.warn(\\\"logger.set has being deprecated!\\\")},e.prototype.setStdout=function(e){this._stdout=e},e.prototype.__clearRealTimeLog=function(){e.realTimeLogList=[]},e.databaseLogList=[],e.realTimeLogList=[],e.sessionId=H(),e.userId=\\\"\\\",e}(),ge=new pe(\\\"RCLog\\\"),_e=function(){function e(){this._map={}}return e.prototype.on=function(e,t,n){var i=this._map[e]||(this._map[e]=[]);i.some((function(e){return e.listener===t&&e.target===n}))||i.push({listener:t,target:n})},e.prototype.once=function(e,t,n){var i=this._map[e]||(this._map[e]=[]);i.some((function(e){return e.listener===t&&e.target===n}))||i.push({listener:t,target:n,once:!0})},e.prototype.off=function(e,t,n){var i=this._map[e];i&&((i=i.filter((function(e){return e.listener!==t||e.target!==n}))).length?this._map[e]=i:delete this._map[e])},e.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=this._map[e];if(i)for(var r=i.length-1;r>=0;r-=1){var s=i[r],o=s.target,a=s.once,u=s.listener;a&&i.splice(r,1);try{u.call.apply(u,A([o],t))}catch(e){ge.error(e)}}},e.prototype.removeAll=function(e){delete this._map[e]},e.prototype.clear=function(){Object.keys(this._map).forEach(this.removeAll,this)},e}();!function(e){e[e.SEND=1]=\\\"SEND\\\",e[e.RECEIVE=2]=\\\"RECEIVE\\\"}(de||(de={}));var ye,me=de;!function(e){e[e.TIMEOUT=-1]=\\\"TIMEOUT\\\",e[e.UNKNOWN=-2]=\\\"UNKNOWN\\\",e[e.PARAMETER_ERROR=-3]=\\\"PARAMETER_ERROR\\\",e[e.EXTRA_METHOD_UNDEFINED=-4]=\\\"EXTRA_METHOD_UNDEFINED\\\",e[e.MAIN_PROCESS_ERROR=-5]=\\\"MAIN_PROCESS_ERROR\\\",e[e.PARAMETER_CHANGED=-6]=\\\"PARAMETER_CHANGED\\\",e[e.SUCCESS=0]=\\\"SUCCESS\\\",e[e.RC_MSG_UNAUTHORIZED=20406]=\\\"RC_MSG_UNAUTHORIZED\\\",e[e.RC_DISCUSSION_GROUP_ID_INVALID=20407]=\\\"RC_DISCUSSION_GROUP_ID_INVALID\\\",e[e.SEND_FREQUENCY_TOO_FAST=20604]=\\\"SEND_FREQUENCY_TOO_FAST\\\",e[e.NOT_IN_DISCUSSION=21406]=\\\"NOT_IN_DISCUSSION\\\",e[e.FORBIDDEN_IN_GROUP=22408]=\\\"FORBIDDEN_IN_GROUP\\\",e[e.RECALL_MESSAGE=25101]=\\\"RECALL_MESSAGE\\\",e[e.NOT_IN_GROUP=22406]=\\\"NOT_IN_GROUP\\\",e[e.NOT_IN_CHATROOM=23406]=\\\"NOT_IN_CHATROOM\\\",e[e.FORBIDDEN_IN_CHATROOM=23408]=\\\"FORBIDDEN_IN_CHATROOM\\\",e[e.RC_CHATROOM_USER_KICKED=23409]=\\\"RC_CHATROOM_USER_KICKED\\\",e[e.RC_CHATROOM_NOT_EXIST=23410]=\\\"RC_CHATROOM_NOT_EXIST\\\",e[e.RC_CHATROOM_IS_FULL=23411]=\\\"RC_CHATROOM_IS_FULL\\\",e[e.RC_CHATROOM_PATAMETER_INVALID=23412]=\\\"RC_CHATROOM_PATAMETER_INVALID\\\",e[e.CHATROOM_GET_HISTORYMSG_ERROR=23413]=\\\"CHATROOM_GET_HISTORYMSG_ERROR\\\",e[e.CHATROOM_NOT_OPEN_HISTORYMSG_STORE=23414]=\\\"CHATROOM_NOT_OPEN_HISTORYMSG_STORE\\\",e[e.CHATROOM_KV_EXCEED=23423]=\\\"CHATROOM_KV_EXCEED\\\",e[e.CHATROOM_KV_OVERWRITE_INVALID=23424]=\\\"CHATROOM_KV_OVERWRITE_INVALID\\\",e[e.CHATROOM_KV_STORE_NOT_OPEN=23426]=\\\"CHATROOM_KV_STORE_NOT_OPEN\\\",e[e.CHATROOM_KEY_NOT_EXIST=23427]=\\\"CHATROOM_KEY_NOT_EXIST\\\",\\n/*!\\n     聊天室设置 KV 失败，出现在两人或者多端同时操作一个 kv。\\n     如果出现该错误，为避免和其他端同时操作，请延时一定时间再试\\n    */\\ne[e.CHATROOM_KV_SET_ERROR=23431]=\\\"CHATROOM_KV_SET_ERROR\\\",e[e.SENSITIVE_SHIELD=21501]=\\\"SENSITIVE_SHIELD\\\",e[e.SENSITIVE_REPLACE=21502]=\\\"SENSITIVE_REPLACE\\\",e[e.JOIN_IN_DISCUSSION=21407]=\\\"JOIN_IN_DISCUSSION\\\",e[e.CREATE_DISCUSSION=21408]=\\\"CREATE_DISCUSSION\\\",e[e.INVITE_DICUSSION=21409]=\\\"INVITE_DICUSSION\\\",e[e.GET_USERINFO_ERROR=23407]=\\\"GET_USERINFO_ERROR\\\",e[e.REJECTED_BY_BLACKLIST=405]=\\\"REJECTED_BY_BLACKLIST\\\",e[e.RC_NET_CHANNEL_INVALID=30001]=\\\"RC_NET_CHANNEL_INVALID\\\",e[e.RC_NET_UNAVAILABLE=30002]=\\\"RC_NET_UNAVAILABLE\\\",e[e.RC_MSG_RESP_TIMEOUT=30003]=\\\"RC_MSG_RESP_TIMEOUT\\\",e[e.RC_HTTP_SEND_FAIL=30004]=\\\"RC_HTTP_SEND_FAIL\\\",e[e.RC_HTTP_REQ_TIMEOUT=30005]=\\\"RC_HTTP_REQ_TIMEOUT\\\",e[e.RC_HTTP_RECV_FAIL=30006]=\\\"RC_HTTP_RECV_FAIL\\\",e[e.RC_NAVI_RESOURCE_ERROR=30007]=\\\"RC_NAVI_RESOURCE_ERROR\\\",e[e.RC_NODE_NOT_FOUND=30008]=\\\"RC_NODE_NOT_FOUND\\\",e[e.RC_DOMAIN_NOT_RESOLVE=30009]=\\\"RC_DOMAIN_NOT_RESOLVE\\\",e[e.RC_SOCKET_NOT_CREATED=30010]=\\\"RC_SOCKET_NOT_CREATED\\\",e[e.RC_SOCKET_DISCONNECTED=30011]=\\\"RC_SOCKET_DISCONNECTED\\\",e[e.RC_PING_SEND_FAIL=30012]=\\\"RC_PING_SEND_FAIL\\\",e[e.RC_PONG_RECV_FAIL=30013]=\\\"RC_PONG_RECV_FAIL\\\",e[e.RC_MSG_SEND_FAIL=30014]=\\\"RC_MSG_SEND_FAIL\\\",e[e.RC_MSG_CONTENT_EXCEED_LIMIT=30016]=\\\"RC_MSG_CONTENT_EXCEED_LIMIT\\\",e[e.RC_CONN_ACK_TIMEOUT=31e3]=\\\"RC_CONN_ACK_TIMEOUT\\\",e[e.RC_CONN_PROTO_VERSION_ERROR=31001]=\\\"RC_CONN_PROTO_VERSION_ERROR\\\",e[e.RC_CONN_ID_REJECT=31002]=\\\"RC_CONN_ID_REJECT\\\",e[e.RC_CONN_SERVER_UNAVAILABLE=31003]=\\\"RC_CONN_SERVER_UNAVAILABLE\\\",e[e.RC_CONN_USER_OR_PASSWD_ERROR=31004]=\\\"RC_CONN_USER_OR_PASSWD_ERROR\\\",e[e.RC_CONN_NOT_AUTHRORIZED=31005]=\\\"RC_CONN_NOT_AUTHRORIZED\\\",e[e.RC_CONN_REDIRECTED=31006]=\\\"RC_CONN_REDIRECTED\\\",e[e.RC_CONN_PACKAGE_NAME_INVALID=31007]=\\\"RC_CONN_PACKAGE_NAME_INVALID\\\",e[e.RC_CONN_APP_BLOCKED_OR_DELETED=31008]=\\\"RC_CONN_APP_BLOCKED_OR_DELETED\\\",e[e.RC_CONN_USER_BLOCKED=31009]=\\\"RC_CONN_USER_BLOCKED\\\",e[e.RC_DISCONN_KICK=31010]=\\\"RC_DISCONN_KICK\\\",e[e.RC_DISCONN_EXCEPTION=31011]=\\\"RC_DISCONN_EXCEPTION\\\",e[e.RC_APP_AUTH_NOT_PASS=31026]=\\\"RC_APP_AUTH_NOT_PASS\\\",e[e.RC_OTP_USED=31027]=\\\"RC_OTP_USED\\\",e[e.RC_PLATFORM_ERROR=31028]=\\\"RC_PLATFORM_ERROR\\\",e[e.RC_QUERY_ACK_NO_DATA=32001]=\\\"RC_QUERY_ACK_NO_DATA\\\",e[e.RC_MSG_DATA_INCOMPLETE=32002]=\\\"RC_MSG_DATA_INCOMPLETE\\\",e[e.BIZ_ERROR_CLIENT_NOT_INIT=33001]=\\\"BIZ_ERROR_CLIENT_NOT_INIT\\\",e[e.BIZ_ERROR_DATABASE_ERROR=33002]=\\\"BIZ_ERROR_DATABASE_ERROR\\\",e[e.BIZ_ERROR_INVALID_PARAMETER=33003]=\\\"BIZ_ERROR_INVALID_PARAMETER\\\",e[e.BIZ_ERROR_NO_CHANNEL=33004]=\\\"BIZ_ERROR_NO_CHANNEL\\\",e[e.BIZ_ERROR_RECONNECT_SUCCESS=33005]=\\\"BIZ_ERROR_RECONNECT_SUCCESS\\\",e[e.BIZ_ERROR_CONNECTING=33006]=\\\"BIZ_ERROR_CONNECTING\\\",e[e.MSG_ROAMING_SERVICE_UNAVAILABLE=33007]=\\\"MSG_ROAMING_SERVICE_UNAVAILABLE\\\",e[e.MSG_INSERT_ERROR=33008]=\\\"MSG_INSERT_ERROR\\\",e[e.MSG_DEL_ERROR=33009]=\\\"MSG_DEL_ERROR\\\",e[e.TAG_EXISTS=33101]=\\\"TAG_EXISTS\\\",e[e.TAG_NOT_EXIST=33100]=\\\"TAG_NOT_EXIST\\\",e[e.NO_TAG_IN_CONVER=33102]=\\\"NO_TAG_IN_CONVER\\\",e[e.CONVER_REMOVE_ERROR=34001]=\\\"CONVER_REMOVE_ERROR\\\",e[e.CONVER_GETLIST_ERROR=34002]=\\\"CONVER_GETLIST_ERROR\\\",e[e.CONVER_SETOP_ERROR=34003]=\\\"CONVER_SETOP_ERROR\\\",e[e.CONVER_TOTAL_UNREAD_ERROR=34004]=\\\"CONVER_TOTAL_UNREAD_ERROR\\\",e[e.CONVER_TYPE_UNREAD_ERROR=34005]=\\\"CONVER_TYPE_UNREAD_ERROR\\\",e[e.CONVER_ID_TYPE_UNREAD_ERROR=34006]=\\\"CONVER_ID_TYPE_UNREAD_ERROR\\\",e[e.CONVER_CLEAR_ERROR=34007]=\\\"CONVER_CLEAR_ERROR\\\",e[e.EXPANSION_LIMIT_EXCEET=34010]=\\\"EXPANSION_LIMIT_EXCEET\\\",e[e.MESSAGE_KV_NOT_SUPPORT=34008]=\\\"MESSAGE_KV_NOT_SUPPORT\\\",e[e.CLEAR_HIS_TIME_ERROR=34011]=\\\"CLEAR_HIS_TIME_ERROR\\\",e[e.CONVER_OUT_LIMIT_ERROR=34013]=\\\"CONVER_OUT_LIMIT_ERROR\\\",e[e.CONVER_GET_ERROR=35021]=\\\"CONVER_GET_ERROR\\\",e[e.GROUP_SYNC_ERROR=35001]=\\\"GROUP_SYNC_ERROR\\\",e[e.GROUP_MATCH_ERROR=35002]=\\\"GROUP_MATCH_ERROR\\\",e[e.READ_RECEIPT_ERROR=35003]=\\\"READ_RECEIPT_ERROR\\\",e[e.PACKAGE_ENVIRONMENT_ERROR=35006]=\\\"PACKAGE_ENVIRONMENT_ERROR\\\",e[e.CAN_NOT_RECONNECT=35007]=\\\"CAN_NOT_RECONNECT\\\",e[e.SERVER_UNAVAILABLE=35008]=\\\"SERVER_UNAVAILABLE\\\",e[e.HOSTNAME_ERROR=35009]=\\\"HOSTNAME_ERROR\\\",e[e.HAS_OHTER_SAME_CLIENT_ON_LINE=35010]=\\\"HAS_OHTER_SAME_CLIENT_ON_LINE\\\",e[e.METHOD_NOT_AVAILABLE=35011]=\\\"METHOD_NOT_AVAILABLE\\\",e[e.METHOD_NOT_SUPPORT=35012]=\\\"METHOD_NOT_SUPPORT\\\",e[e.MSG_LIMIT_ERROR=35013]=\\\"MSG_LIMIT_ERROR\\\",e[e.METHOD_ONLY_SUPPORT_ULTRA_GROUP=35014]=\\\"METHOD_ONLY_SUPPORT_ULTRA_GROUP\\\",e[e.UPLOAD_FILE_FAILED=35020]=\\\"UPLOAD_FILE_FAILED\\\",e[e.CHATROOM_ID_ISNULL=36001]=\\\"CHATROOM_ID_ISNULL\\\",e[e.CHARTOOM_JOIN_ERROR=36002]=\\\"CHARTOOM_JOIN_ERROR\\\",e[e.CHATROOM_HISMESSAGE_ERROR=36003]=\\\"CHATROOM_HISMESSAGE_ERROR\\\",e[e.CHATROOM_KV_NOT_FOUND=36004]=\\\"CHATROOM_KV_NOT_FOUND\\\",e[e.BLACK_ADD_ERROR=37001]=\\\"BLACK_ADD_ERROR\\\",e[e.BLACK_GETSTATUS_ERROR=37002]=\\\"BLACK_GETSTATUS_ERROR\\\",e[e.BLACK_REMOVE_ERROR=37003]=\\\"BLACK_REMOVE_ERROR\\\",e[e.DRAF_GET_ERROR=38001]=\\\"DRAF_GET_ERROR\\\",e[e.DRAF_SAVE_ERROR=38002]=\\\"DRAF_SAVE_ERROR\\\",e[e.DRAF_REMOVE_ERROR=38003]=\\\"DRAF_REMOVE_ERROR\\\",e[e.SUBSCRIBE_ERROR=39001]=\\\"SUBSCRIBE_ERROR\\\",e[e.NOT_SUPPORT=39002]=\\\"NOT_SUPPORT\\\",e[e.QNTKN_FILETYPE_ERROR=41001]=\\\"QNTKN_FILETYPE_ERROR\\\",e[e.QNTKN_GET_ERROR=41002]=\\\"QNTKN_GET_ERROR\\\",e[e.COOKIE_ENABLE=51001]=\\\"COOKIE_ENABLE\\\",e[e.GET_MESSAGE_BY_ID_ERROR=61001]=\\\"GET_MESSAGE_BY_ID_ERROR\\\",e[e.HAVNODEVICEID=24001]=\\\"HAVNODEVICEID\\\",e[e.DEVICEIDISHAVE=24002]=\\\"DEVICEIDISHAVE\\\",e[e.FEILD=24009]=\\\"FEILD\\\",e[e.VOIPISNULL=24013]=\\\"VOIPISNULL\\\",e[e.NOENGINETYPE=24010]=\\\"NOENGINETYPE\\\",e[e.NULLCHANNELNAME=24011]=\\\"NULLCHANNELNAME\\\",e[e.VOIPDYANMICERROR=24012]=\\\"VOIPDYANMICERROR\\\",e[e.NOVOIP=24014]=\\\"NOVOIP\\\",e[e.INTERNALERRROR=24015]=\\\"INTERNALERRROR\\\",e[e.VOIPCLOSE=24016]=\\\"VOIPCLOSE\\\",e[e.CLOSE_BEFORE_OPEN=51001]=\\\"CLOSE_BEFORE_OPEN\\\",e[e.ALREADY_IN_USE=51002]=\\\"ALREADY_IN_USE\\\",e[e.INVALID_CHANNEL_NAME=51003]=\\\"INVALID_CHANNEL_NAME\\\",e[e.VIDEO_CONTAINER_IS_NULL=51004]=\\\"VIDEO_CONTAINER_IS_NULL\\\",e[e.DELETE_MESSAGE_ID_IS_NULL=61001]=\\\"DELETE_MESSAGE_ID_IS_NULL\\\",e[e.CANCEL=1]=\\\"CANCEL\\\",e[e.REJECT=2]=\\\"REJECT\\\",e[e.HANGUP=3]=\\\"HANGUP\\\",e[e.BUSYLINE=4]=\\\"BUSYLINE\\\",e[e.NO_RESPONSE=5]=\\\"NO_RESPONSE\\\",e[e.ENGINE_UN_SUPPORTED=6]=\\\"ENGINE_UN_SUPPORTED\\\",e[e.NETWORK_ERROR=7]=\\\"NETWORK_ERROR\\\",e[e.REMOTE_CANCEL=11]=\\\"REMOTE_CANCEL\\\",e[e.REMOTE_REJECT=12]=\\\"REMOTE_REJECT\\\",e[e.REMOTE_HANGUP=13]=\\\"REMOTE_HANGUP\\\",e[e.REMOTE_BUSYLINE=14]=\\\"REMOTE_BUSYLINE\\\",e[e.REMOTE_NO_RESPONSE=15]=\\\"REMOTE_NO_RESPONSE\\\",e[e.REMOTE_ENGINE_UN_SUPPORTED=16]=\\\"REMOTE_ENGINE_UN_SUPPORTED\\\",e[e.REMOTE_NETWORK_ERROR=17]=\\\"REMOTE_NETWORK_ERROR\\\",e[e.VOIP_NOT_AVALIABLE=18]=\\\"VOIP_NOT_AVALIABLE\\\",e[e.CHATROOM_KV_STORE_NOT_ALL_SUCCESS=23428]=\\\"CHATROOM_KV_STORE_NOT_ALL_SUCCESS\\\",e[e.CHATROOM_KV_STORE_OUT_LIMIT=23429]=\\\"CHATROOM_KV_STORE_OUT_LIMIT\\\"}(ye||(ye={}));var ve,Ee=ye;!function(e){e[e.CONNECTED=0]=\\\"CONNECTED\\\",e[e.CONNECTING=1]=\\\"CONNECTING\\\",e[e.DISCONNECTED=2]=\\\"DISCONNECTED\\\",e[e.NETWORK_UNAVAILABLE=3]=\\\"NETWORK_UNAVAILABLE\\\",e[e.CONNECTION_CLOSED=4]=\\\"CONNECTION_CLOSED\\\",e[e.KICKED_OFFLINE_BY_OTHER_CLIENT=6]=\\\"KICKED_OFFLINE_BY_OTHER_CLIENT\\\",e[e.WEBSOCKET_UNAVAILABLE=7]=\\\"WEBSOCKET_UNAVAILABLE\\\",e[e.WEBSOCKET_ERROR=8]=\\\"WEBSOCKET_ERROR\\\",e[e.BLOCKED=9]=\\\"BLOCKED\\\",e[e.DOMAIN_INCORRECT=12]=\\\"DOMAIN_INCORRECT\\\",e[e.DISCONNECT_BY_SERVER=13]=\\\"DISCONNECT_BY_SERVER\\\",e[e.REDIRECT=14]=\\\"REDIRECT\\\",e[e.APPKEY_IS_FAKE=20]=\\\"APPKEY_IS_FAKE\\\",e[e.ULTRALIMIT=1101]=\\\"ULTRALIMIT\\\",e[e.REQUEST_NAVI=201]=\\\"REQUEST_NAVI\\\",e[e.RESPONSE_NAVI=202]=\\\"RESPONSE_NAVI\\\",e[e.RESPONSE_NAVI_ERROR=203]=\\\"RESPONSE_NAVI_ERROR\\\",e[e.RESPONSE_NAVI_TIMEOUT=204]=\\\"RESPONSE_NAVI_TIMEOUT\\\"}(ve||(ve={}));var Te,Ie=ve,Ce={ACCEPTED:0,UNACCEPTABLE_PROTOCOL_VERSION:1,IDENTIFIER_REJECTED:2,SERVER_UNAVAILABLE:3,TOKEN_INCORRECT:4,NOT_AUTHORIZED:5,REDIRECT:6,PACKAGE_ERROR:7,APP_BLOCK_OR_DELETE:8,BLOCK:9,TOKEN_EXPIRE:10,DEVICE_ERROR:11,HOSTNAME_ERROR:12,HASOHTERSAMECLIENTONLINE:13,IN_OTHER_CLUSTER:15,APP_AUTH_NOT_PASS:16,OTP_USED:17,PLATFORM_ERROR:18};!function(e){e.TextMessage=\\\"RC:TxtMsg\\\",e.VOICE=\\\"RC:VcMsg\\\",e.HQ_VOICE=\\\"RC:HQVCMsg\\\",e.IMAGE=\\\"RC:ImgMsg\\\",e.GIF=\\\"RC:GIFMsg\\\",e.RICH_CONTENT=\\\"RC:ImgTextMsg\\\",e.LOCATION=\\\"RC:LBSMsg\\\",e.FILE=\\\"RC:FileMsg\\\",e.SIGHT=\\\"RC:SightMsg\\\",e.COMBINE=\\\"RC:CombineMsg\\\",e.CHRM_KV_NOTIFY=\\\"RC:chrmKVNotiMsg\\\",e.LOG_COMMAND=\\\"RC:LogCmdMsg\\\",e.EXPANSION_NOTIFY=\\\"RC:MsgExMsg\\\",e.REFERENCE=\\\"RC:ReferenceMsg\\\",e.RECALL=\\\"RC:RcCmd\\\",e.READ_RECEIPT=\\\"RC:ReadNtf\\\",e.READ_RECEIPT_REQUEST=\\\"RC:RRReqMsg\\\",e.READ_RECEIPT_RESPONSE=\\\"RC:RRRspMsg\\\",e.SYNC_READ_STATUS=\\\"RC:SRSMsg\\\",e.GROUP_READ_RECEIPT_REQUEST=\\\"RC:RRMsg\\\",e.CHATROOM_JOIN=\\\"RC:ChrmJoinNtf\\\",e.CHATROOM_LEFT=\\\"RC:ChrmQuitNtf\\\",e.CHATROOM_MERGE_CHANGE=\\\"RC:ChrmMemChange\\\",e.TYPING_STATUS=\\\"RC:TypSts\\\",e.INTERCEPT=\\\"RC:InterceptMsg\\\"}(Te||(Te={}));var Re,Se=Te;!function(e){e[e.OPEN=1]=\\\"OPEN\\\",e[e.CLOSE=2]=\\\"CLOSE\\\"}(Re||(Re={}));var Ne,Oe=Re;!function(e){e[e.ALL=1]=\\\"ALL\\\",e[e.SINGAL=2]=\\\"SINGAL\\\"}(Ne||(Ne={}));var Me,we=Ne;!function(e){e[e.QINIU=1]=\\\"QINIU\\\",e[e.ALI=2]=\\\"ALI\\\",e[e.AWS=3]=\\\"AWS\\\",e[e.STC=4]=\\\"STC\\\"}(Me||(Me={}));var Ae,Ue=Me;!function(e){e[e.UPDATE=1]=\\\"UPDATE\\\",e[e.DELETE=2]=\\\"DELETE\\\"}(Ae||(Ae={}));var be,Le=Ae;!function(e){e[e.QUIT=0]=\\\"QUIT\\\",e[e.JOIN=1]=\\\"JOIN\\\"}(be||(be={}));var Pe,De=be;!function(e){\\n/*!\\n    全局敏感词：命中了融云内置的全局敏感词\\n   */\\ne[e.GLOBAL=1]=\\\"GLOBAL\\\",\\n/*!\\n     自定义敏感词拦截：命中了客户在融云自定义的敏感词\\n    */\\ne[e.CUSTOM=2]=\\\"CUSTOM\\\",\\n/*!\\n     第三方审核拦截：命中了第三方（数美）或模板路由决定不下发的状态\\n    */\\ne[e.THIRD_PARTY=3]=\\\"THIRD_PARTY\\\"}(Pe||(Pe={}));var Ve,ke=Pe;!function(e){e[e.typing=0]=\\\"typing\\\"}(Ve||(Ve={}));var xe,Be,Ge,Fe=Ve;!function(e){e[e.RTC=0]=\\\"RTC\\\",e[e.LIVE=2]=\\\"LIVE\\\"}(xe||(xe={})),function(e){e[e.AUDIO_AND_VIDEO=0]=\\\"AUDIO_AND_VIDEO\\\",e[e.AUDIO=1]=\\\"AUDIO\\\"}(Be||(Be={})),function(e){e[e.ANCHOR=1]=\\\"ANCHOR\\\",e[e.AUDIENCE=2]=\\\"AUDIENCE\\\"}(Ge||(Ge={}));var qe,Ke,He,Ye={\\\"RC:VCAccept\\\":\\\"RC:VCAccept\\\",\\\"RC:VCRinging\\\":\\\"RC:VCRinging\\\",\\\"RC:VCSummary\\\":\\\"RC:VCSummary\\\",\\\"RC:VCHangup\\\":\\\"RC:VCHangup\\\",\\\"RC:VCInvite\\\":\\\"RC:VCInvite\\\",\\\"RC:VCModifyMedia\\\":\\\"RC:VCModifyMedia\\\",\\\"RC:VCModifyMem\\\":\\\"RC:VCModifyMem\\\"};!function(e){e[e.ROOM=1]=\\\"ROOM\\\",e[e.PERSON=2]=\\\"PERSON\\\"}(qe||(qe={})),function(e){e[e.AnchorToViewer=1]=\\\"AnchorToViewer\\\",e[e.ViewerToAnchor=2]=\\\"ViewerToAnchor\\\"}(Ke||(Ke={})),function(e){e[e.KICK=0]=\\\"KICK\\\",e[e.REFUSE=1]=\\\"REFUSE\\\",e[e.COEXIST=2]=\\\"COEXIST\\\"}(He||(He={}));var je=\\\"undefined\\\"!=typeof window&&window?(window.__RCVersionInfo||(window.__RCVersionInfo={}),window.__RCVersionInfo):{};je.engine=\\\"5.2.1\\\";var Qe,We,Je=function(){function e(){}return e.add=function(e,t){je[e]=t},e.validEngine=function(e){var t=e.match(/\\\\d+\\\\.\\\\d+\\\\.\\\\d+/);if(!t)return ge.warn(\\\"The validation engine version '\\\"+e+\\\"' is invalid!\\\"),!1;var n=t[0].split(\\\".\\\").map((function(e){return e.padStart(3,\\\"0\\\")})).join(\\\"\\\");return je.engine.match(/\\\\d+\\\\.\\\\d+\\\\.\\\\d+/)[0].split(\\\".\\\").map((function(e){return e.padStart(3,\\\"0\\\")})).join(\\\"\\\")>=n},e.getInfo=function(){return je},e}();!function(e){e[e.STRING=0]=\\\"STRING\\\",e[e.ONLY_STRING=1]=\\\"ONLY_STRING\\\",e[e.NUMBER=2]=\\\"NUMBER\\\",e[e.BOOLEAN=3]=\\\"BOOLEAN\\\",e[e.OBJECT=4]=\\\"OBJECT\\\",e[e.ARRAY=5]=\\\"ARRAY\\\",e[e.CALLBACK=6]=\\\"CALLBACK\\\",e[e.CHANNEL_ID=7]=\\\"CHANNEL_ID\\\"}(We||(We={}));var ze,Ze,Xe,$e,et,tt=((Qe={})[We.STRING]=ee,Qe[We.ONLY_STRING]=J,Qe[We.NUMBER]=Z,Qe[We.BOOLEAN]=function(e){return\\\"boolean\\\"==typeof e},Qe[We.OBJECT]=ne,Qe[We.ARRAY]=X,Qe[We.CALLBACK]=function(e){var t=!0;return ne(e)||(t=!1),(e=e||{}).onSuccess&&!ie(e.onSuccess)&&(t=!1),e.onError&&!ie(e.onError)&&(t=!1),t},Qe[We.CHANNEL_ID]=function(e){var t=!1;return J(e)&&!/_/g.test(e)&&e.length<=20&&(t=!0),t},Qe),nt=function(e){function t(t){var n=e.call(this,t)||this;return n.name=\\\"RCAssertError\\\",n}return N(t,e),t}(Error),it=function(e,t,n,i){if(void 0===i&&(i=!1),!rt(e,t,n,i))throw new nt(\\\"'\\\"+e+\\\"' is invalid: \\\"+JSON.stringify(t))},rt=function(e,t,n,i){void 0===i&&(i=!1),n=tt[n]||n;var r=i&&!n(t)||!i&&!(re(t)||null===t||n(t));return r&&ge.error(\\\"'\\\"+e+\\\"' is invalid: \\\"+JSON.stringify(t)),!r},st=function(e){if(!ne(e)||void 0===e.low||void 0===e.high)return e;var t=e.low;return t<0&&(t+=4294967296),t=t.toString(16),parseInt(e.high.toString(16)+\\\"00000000\\\".replace(new RegExp(\\\"0{\\\"+t.length+\\\"}$\\\"),t),16)},ot=function(e,t){var n=Math.floor(1e3*Math.random()%1e4),i=K(),r=function(e){e=e||\\\"-\\\";var t=new Date;return\\\"\\\"+t.getFullYear()+e+(t.getMonth()+1)+e+t.getDate()}(),s=(new Date).getTime(),o=\\\"\\\";if(t){var a=t.split(\\\".\\\");o=\\\".\\\"+a[a.length-1]}return e+\\\"__RC-\\\"+r+\\\"_\\\"+n+\\\"_\\\"+s+i+o},at=function(e){var t=\\\"application/octet-stream\\\";switch(e){case W.IMAGE:t=\\\"image/jpeg\\\";break;case W.AUDIO:t=\\\"audio/amr\\\";break;case W.VIDEO:t=\\\"video/3gpp\\\";break;case W.SIGHT:t=\\\"video/mpeg4\\\";break;case W.COMBINE_HTML:t=\\\"text/html\\\"}return t},ut=function(e,t){void 0===e&&(e={}),void 0===t&&(t={});var n=e.threadId,i=e.apnsCollapseId,r=e.category,s=e.richMediaUri,o=t.channelIdMi,a=t.channelIdHW,u=t.channelIdOPPO,c=t.typeVivo,h=t.googleConfig,l={};l[\\\"thread-id\\\"]=n||\\\"\\\",l[\\\"apns-collapse-id\\\"]=i||\\\"\\\",l.category=r||\\\"\\\",l.richMediaUri=s||\\\"\\\";var d={};d.collapse_key=null==h?void 0:h.collapseKey,d.imageUrl=null==h?void 0:h.imageUrl;var f=null==h?void 0:h.priority;f&&![\\\"high\\\",\\\"normal\\\"].includes(f)&&(f=\\\"normal\\\"),d.priority=f;var p=[{HW:{channelId:a||\\\"\\\"}},{MI:{channelId:o||\\\"\\\"}},{OPPO:{channelId:u||\\\"\\\"}},{VIVO:{classification:c||\\\"\\\"}},{APNS:l},{FCM:d}];return JSON.stringify(p)},ct=function(e,t){var n={},i={notificationId:t||\\\"\\\"};if(!e)return{iOSConfig:n,androidConfig:i};try{var r=JSON.parse(e);null==r||r.forEach((function(e){var t,r,s,o,a=Object.keys(e);if(0!==a.length){var u=a[0];switch(u){case\\\"HW\\\":return void(i.channelIdHW=null===(t=e[u])||void 0===t?void 0:t.channelId);case\\\"MI\\\":return void(i.channelIdMi=null===(r=e[u])||void 0===r?void 0:r.channelId);case\\\"OPPO\\\":return void(i.channelIdOPPO=null===(s=e[u])||void 0===s?void 0:s.channelId);case\\\"VIVO\\\":return void(i.typeVivo=null===(o=e[u])||void 0===o?void 0:o.classification);case\\\"APNS\\\":return n.threadId=e[u][\\\"thread-id\\\"],n.apnsCollapseId=e[u][\\\"apns-collapse-id\\\"],n.category=e[u].category,void(n.richMediaUri=e[u].richMediaUri);case\\\"FCM\\\":i.googleConfig={collapseKey:e[u].collapse_key||\\\"\\\",imageUrl:e[u].imageUrl||\\\"\\\",priority:e[u].priority||\\\"\\\"}}}}))}catch(t){ge.error(\\\"Wrong format for pushConfigs field! content: \\\"+e)}return{iOSConfig:n,androidConfig:i}},ht=function(e){var t=/^[A-Za-z0-9_=+-]+$/.test(e),n=e.length;return t&&(n<=128&&n>=1)},lt=function(e){var t=e.length;return t<=4096&&t>=1},dt=function(e,t,n){t=t||function(){};var i=(n=n||{}).isReverse;ne(e)&&function(){for(var n in e)t(e[n],n,e)}(),(X(e)||J(e))&&function(){if(i)for(var n=e.length-1;n>=0;n--)t(e[n],n);else for(var r=0,s=e.length;r<s;r++)t(e[r],r)}()},ft=function(e,t){return dt(e,(function(n,i){e[i]=t(n,i)})),e},pt=function(e,t){if(e.indexOf)return e.indexOf(t);var n=-1;return dt(e,(function(e,i){t===e&&(n=i)})),n},gt=function(e,t){return-1!==pt(e,t)},_t=function(e,t){var n=[];return dt(e,(function(e){n.push(e)})),-1!==pt(n,t)},yt=function(e){return JSON.parse(JSON.stringify(e))},mt=function(){return\\\"undefined\\\"!=typeof RCCppEngine},vt=function(e){if(\\\"browser\\\"!==e.tag)return{type:e.tag,version:\\\"UnKonw\\\"};var t,n,i=navigator.userAgent,r={IE:/rv:([\\\\d.]+)\\\\) like Gecko|MSIE ([\\\\d.]+)/,Edge:/Edge\\\\/([\\\\d.]+)/,Firefox:/Firefox\\\\/([\\\\d.]+)/,Opera:/(?:OPERA|OPR).([\\\\d.]+)/,WeChat:/MicroMessenger\\\\/([\\\\d.]+)/,QQBrowser:/QQBrowser\\\\/([\\\\d.]+)/,Chrome:/Chrome\\\\/([\\\\d.]+)/,Safari:/Version\\\\/([\\\\d.]+).*Safari/,iOSChrome:/Mobile\\\\/([\\\\d.]+).*Safari/};for(var s in r)if(r.hasOwnProperty(s)){var o=i.match(r[s]);if(o){n=s,t=o[1]||o[2];break}}return{type:n||\\\"UnKonw\\\",version:t||\\\"UnKonw\\\"}},Et=function(e){switch(e){case Ce.SERVER_UNAVAILABLE:return Ee.SERVER_UNAVAILABLE;case Ce.TOKEN_INCORRECT:return Ee.RC_CONN_USER_OR_PASSWD_ERROR;case Ce.REDIRECT:return Ee.RC_CONN_REDIRECTED;case Ce.APP_BLOCK_OR_DELETE:return Ee.RC_CONN_APP_BLOCKED_OR_DELETED;case Ce.BLOCK:return Ee.RC_CONN_USER_BLOCKED;case Ce.TOKEN_EXPIRE:return Ee.RC_CONN_USER_OR_PASSWD_ERROR;case Ce.HOSTNAME_ERROR:return Ee.HOSTNAME_ERROR;case Ce.HASOHTERSAMECLIENTONLINE:return Ee.HAS_OHTER_SAME_CLIENT_ON_LINE;case Ce.APP_AUTH_NOT_PASS:return Ee.RC_APP_AUTH_NOT_PASS;case Ce.OTP_USED:return Ee.RC_OTP_USED;case Ce.PLATFORM_ERROR:return Ee.RC_PLATFORM_ERROR;default:return Ee.RC_NET_UNAVAILABLE}},Tt=function(e){var t;if(\\\"object\\\"==typeof e)if(Array.isArray(e))for(var n in t=[],e)t.push(Tt(e[n]));else for(var n in t={},e)t[n]=Tt(e[n]);else t=e;return t},It=function(e){var t;try{t=Tt(e)}catch(n){ge.error(\\\"clone err:\\\",n),t=JSON.parse(JSON.stringify(e))}return t},Ct=function(e){var t={},n=JSON.parse(e);return dt(n,(function(e,n){t[n]=e.v})),t},Rt={_delayTime:0,setTime:function(e){var t=(new Date).getTime();Rt._delayTime=t-e},getTime:function(){var e=Rt._delayTime;return(new Date).getTime()-e}},St=function(e,t){var n=0;return e.isAutoDelete&&(n|=1),e.isOverwrite&&(n|=2),2===t&&(n|=4),n};!function(e){e[e.AT_MOST_ONCE=0]=\\\"AT_MOST_ONCE\\\",e[e.AT_LEAST_ONCE=1]=\\\"AT_LEAST_ONCE\\\",e[e.EXACTLY_ONCE=2]=\\\"EXACTLY_ONCE\\\",e[e.DEFAULT=3]=\\\"DEFAULT\\\"}(ze||(ze={})),function(e){e[e.SYMMETRIC=0]=\\\"SYMMETRIC\\\",e[e.CONNECT=1]=\\\"CONNECT\\\",e[e.CONN_ACK=2]=\\\"CONN_ACK\\\",e[e.PUBLISH=3]=\\\"PUBLISH\\\",e[e.PUB_ACK=4]=\\\"PUB_ACK\\\",e[e.QUERY=5]=\\\"QUERY\\\",e[e.QUERY_ACK=6]=\\\"QUERY_ACK\\\",e[e.QUERY_CONFIRM=7]=\\\"QUERY_CONFIRM\\\",e[e.SUBSCRIBE=8]=\\\"SUBSCRIBE\\\",e[e.SUB_ACK=9]=\\\"SUB_ACK\\\",e[e.UNSUBSCRIBE=10]=\\\"UNSUBSCRIBE\\\",e[e.UNSUB_ACK=11]=\\\"UNSUB_ACK\\\",e[e.PING_REQ=12]=\\\"PING_REQ\\\",e[e.PING_RESP=13]=\\\"PING_RESP\\\",e[e.DISCONNECT=14]=\\\"DISCONNECT\\\",e[e.RESERVER2=15]=\\\"RESERVER2\\\"}(Ze||(Ze={})),function(e){e.CONN_ACK=\\\"ConnAckMessage\\\",e.DISCONNECT=\\\"DisconnectMessage\\\",e.PING_REQ=\\\"PingReqMessage\\\",e.PING_RESP=\\\"PingRespMessage\\\",e.PUBLISH=\\\"PublishMessage\\\",e.PUB_ACK=\\\"PubAckMessage\\\",e.QUERY=\\\"QueryMessage\\\",e.QUERY_CON=\\\"QueryConMessage\\\",e.QUERY_ACK=\\\"QueryAckMessage\\\"}(Xe||(Xe={})),function(e){e.PUB=\\\"pub\\\",e.QUERY=\\\"qry\\\"}($e||($e={})),function(e){e[e.V4=4]=\\\"V4\\\",e[e.V3=3]=\\\"V3\\\"}(et||(et={}));var Nt,Ot=function(){function e(e,t,n,i){void 0===t&&(t=!1),void 0===n&&(n=ze.AT_LEAST_ONCE),void 0===i&&(i=!1),this._retain=!1,this.qos=ze.AT_LEAST_ONCE,this._dup=!1,this.syncMsg=!1;var r=e>0;e&&r&&1===arguments.length?(this._retain=(1&e)>0,this.qos=(6&e)>>1,this._dup=(8&e)>0,this.type=e>>4&15,this.syncMsg=8==(8&e)):(this.type=e,this._retain=t,this.qos=n,this._dup=i)}return e.prototype.encode=function(){var e=this.type<<4;return e|=this._retain?1:0,e|=this.qos<<1,e|=this._dup?8:0},e}(),Mt=function(){function e(){}return e.writeUTF=function(e,t){var n=[],i=0;if(J(e))for(var r=0,s=e.length;r<s;r++){var o=e.charCodeAt(r);o>=0&&o<=127?(i+=1,n.push(o)):o>=128&&o<=2047?(i+=2,n.push(192|31&o>>6),n.push(128|63&o)):o>=2048&&o<=65535&&(i+=3,n.push(224|15&o>>12),n.push(128|63&o>>6),n.push(128|63&o))}for(r=0,s=n.length;r<s;r++)n[r]>255&&(n[r]&=255);return t?n:i<=255?[0,i].concat(n):[i>>8,255&i].concat(n)},e.readUTF=function(e){for(var t,n,i=[],r=-1,s=e,o=\\\"\\\";++r<s.length;){var a=Number(s[r]);if(a===(127&a)||(240==(240&a)?a=(a=(a=(a^=240)<<6|128^s[++r])<<6|128^s[++r])<<6|128^s[++r]:224==(224&a)?a=(a=(a^=224)<<6|128^s[++r])<<6|128^s[++r]:192==(192&a)&&(a=(a^=192)<<6|128^s[++r])),!isFinite(a)||a<0||a>1114111||Math.floor(a)!==a)throw RangeError(\\\"Invalid code point: \\\"+a);a<=65535?i.push(a):(t=(a-=65536)>>10|55296,n=a%1024|56320,i.push(t,n)),(r+1===s.length||i.length>16384)&&(o+=String.fromCharCode.apply(null,i),i.length=0)}return o},e}(),wt=function(){function e(e){this._position=0,this._poolLen=0,this._pool=e,this._poolLen=e.length}return e.prototype.check=function(){return this._position>=this._pool.length},e.prototype.read2Byte=function(){var e=this;if(e.check())return-1;for(var t=\\\"\\\",n=0;n<2;n++){var i=e._pool[e._position++].toString(16);1===i.length&&(i=\\\"0\\\"+i),t+=i.toString()}return parseInt(t,16)},e.prototype.readInt=function(){var e=this;if(e.check())return-1;for(var t=\\\"\\\",n=0;n<4;n++){var i=e._pool[e._position++].toString(16);1===i.length&&(i=\\\"0\\\"+i),t+=i.toString()}return parseInt(t,16)},e.prototype.readLong=function(){var e=this;if(e.check())return-1;for(var t=\\\"\\\",n=0;n<8;n++){var i=e._pool[e._position++].toString(16);1===i.length&&(i=\\\"0\\\"+i),t+=i}return parseInt(t,16)},e.prototype.readByte=function(){if(this.check())return-1;var e=this._pool[this._position++];return e>255&&(e&=255),e},e.prototype.readUTF=function(){if(this.check())return\\\"\\\";var e=this.readByte()<<8|this.readByte(),t=this._pool.subarray(this._position,this._position+=e);return Mt.readUTF(t)},e.prototype.readAll=function(){return this._pool.subarray(this._position,this._poolLen)},e}(),At=function(){function e(){this._pool=[],this._position=0,this._writen=0}return e.prototype.write=function(e){return-1!==Object.prototype.toString.call(e).indexOf(\\\"Array\\\")?this._pool=this._pool.concat(e):e>=0&&(e>255&&(e&=255),this._pool.push(e),this._writen++),e},e.prototype.writeArr=function(e){return this._pool=this._pool.concat(e),e},e.prototype.writeUTF=function(e){var t=Mt.writeUTF(e);this._pool=this._pool.concat(t),this._writen+=t.length},e.prototype.getBytesArray=function(){return this._pool},e}(),Ut=\\\"UpStreamMessage\\\",bt=\\\"PushExtra\\\",Lt=\\\"DownStreamMessage\\\",Pt=\\\"DownStreamMessages\\\",Dt=\\\"SessionsAttQryInput\\\",Vt=\\\"SessionsAttOutput\\\",kt=\\\"SyncRequestMsg\\\",xt=\\\"ChrmPullMsg\\\",Bt=\\\"NotifyMsg\\\",Gt=\\\"HistoryMsgInput\\\",Ft=\\\"HistoryMsgOuput\\\",qt=\\\"RelationQryInput\\\",Kt=\\\"RelationsOutput\\\",Ht=\\\"DeleteSessionsInput\\\",Yt=\\\"SessionInfo\\\",jt=\\\"DeleteSessionsOutput\\\",Qt=\\\"RelationsInput\\\",Wt=\\\"DeleteMsgInput\\\",Jt=\\\"CleanHisMsgInput\\\",zt=\\\"SessionMsgReadInput\\\",Zt=\\\"ChrmInput\\\",Xt=\\\"ChrmOutput\\\",$t=\\\"QueryChatRoomInfoInput\\\",en=\\\"QueryChatRoomInfoOutput\\\",tn=\\\"RtcInput\\\",nn=\\\"RtcUserListOutput\\\",rn=\\\"SetUserStatusInput\\\",sn=\\\"RtcSetDataInput\\\",on=\\\"RtcUserSetDataInput\\\",an=\\\"RtcDataInput\\\",un=\\\"RtcSetOutDataInput\\\",cn=\\\"MCFollowInput\\\",hn=\\\"RtcTokenOutput\\\",ln=\\\"RtcQryOutput\\\",dn=\\\"RtcQryUserOutDataInput\\\",fn=\\\"RtcUserOutDataOutput\\\",pn=\\\"RtcQueryListInput\\\",gn=\\\"RtcRoomInfoOutput\\\",_n=\\\"RtcValueInfo\\\",yn=\\\"RtcKeyDeleteInput\\\",mn=\\\"GetQNupTokenInput\\\",vn=\\\"GetQNupTokenOutput\\\",En=\\\"GetQNdownloadUrlInput\\\",Tn=\\\"GetDownloadUrlInput\\\",In=\\\"GetQNdownloadUrlOutput\\\",Cn=\\\"GetDownloadUrlOutput\\\",Rn=\\\"ChrmKVEntity\\\",Sn=\\\"SetChrmKV\\\",Nn=\\\"SetChrmKVS\\\",On=\\\"DeleteChrmKVS\\\",Mn=\\\"ChrmKVOutput\\\",wn=\\\"ChrmKVSOutput\\\",An=\\\"ChrmKVSVersionEntity\\\",Un=\\\"ChrmKVSOutputEntity\\\",bn=\\\"QueryChrmKV\\\",Ln=\\\"SetUserSettingInput\\\",Pn=\\\"SetUserSettingOutput\\\",Dn=\\\"PullUserSettingInput\\\",Vn=\\\"PullUserSettingOutput\\\",kn=\\\"UserSettingNotification\\\",xn=\\\"SessionReq\\\",Bn=\\\"SessionStates\\\",Gn=\\\"SessionState\\\",Fn=\\\"SessionStateItem\\\",qn=\\\"SessionStateModifyReq\\\",Kn=\\\"SessionStateModifyResp\\\",Hn=\\\"GrpReadReceiptMsg\\\",Yn=\\\"GrpReadReceiptQryReq\\\",jn=\\\"GrpReadReceiptQryResp\\\",Qn=\\\"GrpMsgReadUser\\\",Wn=\\\"SessionTagAddInput\\\",Jn=\\\"SessionTagItem\\\",zn=\\\"SessionTagDelInput\\\",Zn=\\\"SessionDisTagReq\\\",Xn=\\\"ReportSDKInput\\\",$n=\\\"ReportSDKOutput\\\",ei=\\\"UltraGrpPullSes\\\",ti=\\\"UltraGrpPullMsg\\\",ni=\\\"MsgChangeReq\\\",ii=\\\"QueryMsgChange\\\",ri=\\\"MsgChange\\\",si=\\\"MsgChangeList\\\",oi=\\\"MsgQuery\\\",ai=\\\"MessageQueryInfo\\\",ui=\\\"MsgQueryAck\\\",ci=\\\"OperateStatus\\\",hi=\\\"OperateStatusNotify\\\",li=\\\"OperateInfo\\\",di=\\\"OperateSummary\\\",fi=\\\"RtcNotifyMsg\\\",pi=\\\"RtcPullKV\\\",gi=\\\"RtcKVOutput\\\",_i=\\\"RtcQueryUserJoinedInput\\\",yi=\\\"RtcQueryUserJoinedOutput\\\",mi=\\\"RtcViewerJoinedOutput\\\",vi=\\\"RtcInviteInput\\\",Ei=\\\"RtcCancelInviteInput\\\",Ti=\\\"RtcInviteAnswerInput\\\",Ii=\\\"RtcEndInviteInput\\\",Ci=\\\"SetRtcRoomIdInput\\\",Ri=\\\"SetRtcRoomIdOutput\\\",Si=((Nt={})[Ut]=[\\\"sessionId\\\",\\\"classname\\\",\\\"content\\\",\\\"pushText\\\",\\\"userId\\\",\\\"configFlag\\\",\\\"appData\\\",\\\"extraContent\\\",\\\"pushExt\\\",\\\"busChannel\\\"],Nt[Pt]=[\\\"list\\\",\\\"syncTime\\\",\\\"finished\\\"],Nt[Lt]=[\\\"fromUserId\\\",\\\"type\\\",\\\"groupId\\\",\\\"classname\\\",\\\"content\\\",\\\"dataTime\\\",\\\"status\\\",\\\"msgId\\\",\\\"extraContent\\\",\\\"pushContent\\\",\\\"configFlag\\\",\\\"pushExt\\\",\\\"busChannel\\\"],Nt[bt]=[\\\"title\\\",\\\"templateIdNoUse\\\",\\\"pushId\\\",\\\"pushConfigs\\\",\\\"templateId\\\"],Nt[Dt]=[\\\"nothing\\\"],Nt[Vt]=[\\\"inboxTime\\\",\\\"sendboxTime\\\",\\\"totalUnreadCount\\\"],Nt[kt]=[\\\"syncTime\\\",\\\"ispolling\\\",\\\"isweb\\\",\\\"isPullSend\\\",\\\"isKeeping\\\",\\\"sendBoxSyncTime\\\"],Nt[xt]=[\\\"syncTime\\\",\\\"count\\\"],Nt[Bt]=[\\\"type\\\",\\\"time\\\",\\\"chrmId\\\"],Nt[Gt]=[\\\"targetId\\\",\\\"time\\\",\\\"count\\\",\\\"order\\\",\\\"busChannel\\\"],Nt[Ft]=[\\\"list\\\",\\\"syncTime\\\",\\\"hasMsg\\\"],Nt[qt]=[\\\"type\\\",\\\"count\\\",\\\"startTime\\\",\\\"order\\\"],Nt[Kt]=[\\\"info\\\",\\\"isFinished\\\"],Nt[Ht]=[\\\"sessions\\\"],Nt[Yt]=[\\\"type\\\",\\\"channelId\\\",\\\"busChannel\\\"],Nt[jt]=[\\\"nothing\\\"],Nt[Qt]=[\\\"type\\\",\\\"msg\\\",\\\"count\\\",\\\"busChannel\\\",\\\"startTime\\\",\\\"endTime\\\"],Nt[Wt]=[\\\"type\\\",\\\"conversationId\\\",\\\"msgs\\\",\\\"busChannel\\\"],Nt[Jt]=[\\\"targetId\\\",\\\"dataTime\\\",\\\"conversationType\\\",\\\"busChannel\\\"],Nt[zt]=[\\\"type\\\",\\\"msgTime\\\",\\\"channelId\\\",\\\"busChannel\\\"],Nt[Zt]=[\\\"nothing\\\"],Nt[Xt]=[\\\"nothing\\\",\\\"sessionId\\\",\\\"joinTime\\\"],Nt[$t]=[\\\"count\\\",\\\"order\\\"],Nt[en]=[\\\"userTotalNums\\\",\\\"userInfos\\\"],Nt[mn]=[\\\"type\\\",\\\"key\\\",\\\"httpMethod\\\",\\\"queryString\\\"],Nt[En]=[\\\"type\\\",\\\"key\\\",\\\"fileName\\\"],Nt[Tn]=[\\\"type\\\",\\\"key\\\",\\\"fileName\\\"],Nt[vn]=[\\\"deadline\\\",\\\"token\\\",\\\"bosToken\\\",\\\"bosDate\\\",\\\"path\\\",\\\"osskeyId\\\",\\\"ossPolicy\\\",\\\"ossSign\\\",\\\"ossBucketName\\\"],Nt[In]=[\\\"downloadUrl\\\"],Nt[Cn]=[\\\"downloadUrl\\\"],Nt[Rn]=[\\\"key\\\",\\\"value\\\",\\\"status\\\",\\\"timestamp\\\",\\\"uid\\\",\\\"version\\\"],Nt[Sn]=[\\\"entry\\\",\\\"bNotify\\\",\\\"notification\\\",\\\"type\\\"],Nt[Nn]=[\\\"entry\\\",\\\"bNotify\\\",\\\"notification\\\",\\\"type\\\"],Nt[On]=[\\\"entry\\\",\\\"bNotify\\\",\\\"notification\\\",\\\"type\\\"],Nt[Mn]=[\\\"entries\\\",\\\"bFullUpdate\\\",\\\"syncTime\\\"],Nt[wn]=[\\\"timestamp\\\",\\\"errorKeys\\\",\\\"keysVersion\\\"],Nt[An]=[\\\"version\\\",\\\"key\\\"],Nt[Un]=[\\\"key\\\",\\\"errorCode\\\"],Nt[bn]=[\\\"timestamp\\\"],Nt[Ln]=[\\\"version\\\",\\\"value\\\"],Nt[Pn]=[\\\"version\\\",\\\"reserve\\\"],Nt[Dn]=[\\\"version\\\",\\\"reserve\\\"],Nt[Vn]=[\\\"items\\\",\\\"version\\\"],Nt.UserSettingItem=[\\\"targetId\\\",\\\"type\\\",\\\"key\\\",\\\"value\\\",\\\"version\\\",\\\"status\\\",\\\"tags\\\"],Nt[xn]=[\\\"time\\\"],Nt[Bn]=[\\\"version\\\",\\\"state\\\"],Nt[Gn]=[\\\"type\\\",\\\"channelId\\\",\\\"time\\\",\\\"stateItem\\\",\\\"busChannel\\\"],Nt[Fn]=[\\\"sessionStateType\\\",\\\"value\\\",\\\"tags\\\"],Nt[qn]=[\\\"version\\\",\\\"state\\\"],Nt[Kn]=[\\\"version\\\"],Nt[Hn]=[\\\"msgId\\\",\\\"busChannel\\\"],Nt[Yn]=[\\\"msgId\\\",\\\"busChannel\\\"],Nt[jn]=[\\\"totalMemberNum\\\",\\\"list\\\"],Nt[Qn]=[\\\"readTime\\\",\\\"userId\\\"],Nt[Wn]=[\\\"version\\\",\\\"tags\\\"],Nt[Jn]=[\\\"tagId\\\",\\\"name\\\",\\\"createdTime\\\",\\\"isTop\\\"],Nt[zn]=[\\\"version\\\",\\\"tags\\\"],Nt[Zn]=[\\\"tagId\\\"],Nt[kn]=[\\\"version\\\",\\\"reserve\\\"],Nt[Xn]=[\\\"sdkInfo\\\"],Nt[$n]=[\\\"nothing\\\"],Nt[ei]=[\\\"syncTime\\\",\\\"isEraseMsgContent\\\"],Nt[ti]=[\\\"syncTime\\\"],Nt[ni]=[\\\"fromUserId\\\",\\\"targetId\\\",\\\"type\\\",\\\"busChannel\\\",\\\"msgUID\\\",\\\"msgTime\\\",\\\"content\\\"],Nt[ii]=[\\\"syncTime\\\"],Nt[si]=[\\\"list\\\",\\\"syncTime\\\",\\\"hasNext\\\"],Nt[ri]=[\\\"targetId\\\",\\\"type\\\",\\\"time\\\",\\\"changeType\\\",\\\"msgUID\\\",\\\"msgTime\\\",\\\"busChannel\\\",\\\"isAdmin\\\",\\\"isDel\\\",\\\"operatorId\\\"],Nt[oi]=[\\\"targetId\\\",\\\"type\\\",\\\"query\\\"],Nt[ai]=[\\\"msgTime\\\",\\\"msgUID\\\",\\\"busChannel\\\"],Nt[ui]=[\\\"list\\\"],Nt[ci]=[\\\"targetId\\\",\\\"type\\\",\\\"opType\\\",\\\"busChannel\\\"],Nt[hi]=[\\\"type\\\",\\\"notifyType\\\",\\\"info\\\",\\\"summary\\\"],Nt[li]=[\\\"targetId\\\",\\\"busChannel\\\",\\\"userId\\\",\\\"opType\\\",\\\"optime\\\"],Nt[di]=[\\\"targetId\\\",\\\"busChannel\\\",\\\"count\\\",\\\"opType\\\"],Nt[tn]=[\\\"roomType\\\",\\\"broadcastType\\\",\\\"extraInnerData\\\",\\\"needSysChatroom\\\",\\\"identityChangeType\\\",\\\"joinType\\\"],Nt[nn]=[\\\"users\\\",\\\"token\\\",\\\"sessionId\\\",\\\"roomInfo\\\"],Nt[rn]=[\\\"status\\\"],Nt[sn]=[\\\"interior\\\",\\\"target\\\",\\\"key\\\",\\\"value\\\",\\\"objectName\\\",\\\"content\\\"],Nt[on]=[\\\"valueInfo\\\",\\\"objectName\\\",\\\"content\\\"],Nt[an]=[\\\"interior\\\",\\\"target\\\",\\\"key\\\",\\\"objectName\\\",\\\"content\\\"],Nt[un]=[\\\"target\\\",\\\"valueInfo\\\",\\\"objectName\\\",\\\"content\\\"],Nt[cn]=[\\\"state\\\"],Nt[hn]=[\\\"rtcToken\\\"],Nt[ln]=[\\\"outInfo\\\"],Nt[dn]=[\\\"userId\\\"],Nt[fn]=[\\\"user\\\"],Nt[pn]=[\\\"order\\\"],Nt[gn]=[\\\"roomId\\\",\\\"roomData\\\",\\\"userCount\\\",\\\"list\\\"],Nt[_n]=[\\\"key\\\",\\\"value\\\"],Nt[yn]=[\\\"key\\\"],Nt[fi]=[\\\"type\\\",\\\"time\\\",\\\"roomId\\\"],Nt[pi]=[\\\"timestamp\\\",\\\"roomId\\\"],Nt[gi]=[\\\"entries\\\",\\\"bFullUpdate\\\",\\\"syncTime\\\"],Nt[_i]=[\\\"userId\\\"],Nt[yi]=[\\\"info\\\"],Nt[vi]=[\\\"invitedUserId\\\",\\\"timeoutTime\\\",\\\"invitedRoomId\\\",\\\"inviteInfo\\\",\\\"inviteSessionId\\\"],Nt[Ei]=[\\\"invitedUserId\\\",\\\"invitedRoomId\\\",\\\"inviteInfo\\\",\\\"inviteSessionId\\\"],Nt[Ti]=[\\\"inviteUserID\\\",\\\"answerCode\\\",\\\"inviteRoomId\\\",\\\"inviteSessionId\\\",\\\"content\\\",\\\"key\\\",\\\"value\\\"],Nt[Ii]=[\\\"inviteRoomId\\\",\\\"inviteSessionId\\\",\\\"inviteContent\\\",\\\"inviteRoomKeys\\\"],Nt[Ci]=[\\\"rtcRoomId\\\"],Nt[Ri]=[\\\"nothing\\\"],Nt),Ni={},Oi=function(e){var t=Si[e];Ni[e]=function(){for(var e={},n={getArrayData:function(){return e}},i=function(i){var r=t[i],s=\\\"set\\\"+D(r,0,1);n[s]=function(t){e[r]=t}},r=0;r<t.length;r++)i(r);return n},Ni[e].decode=function(e){var t={};J(e)&&(e=JSON.parse(e));var n=function(n){var i=\\\"get\\\"+D(n,0,1);t[n]=e[n],t[i]=function(){return e[n]}};for(var i in e)n(i);return t}};for(var Mi in Si)Oi(Mi);Ni.getModule=function(e){return Ni[e]()};var wi=\\\"\\\\npackage Modules;\\\\nmessage probuf {\\\\n  message \\\"+rn+\\\"\\\\n  {\\\\n    optional int32 status=1;\\\\n  }\\\\n\\\\n  message SetUserStatusOutput\\\\n  {\\\\n    optional int32 nothing=1;\\\\n  }\\\\n\\\\n  message GetUserStatusInput\\\\n  {\\\\n    optional int32 nothing=1;\\\\n  }\\\\n\\\\n  message GetUserStatusOutput\\\\n  {\\\\n    optional string status=1;\\\\n    optional string subUserId=2;\\\\n  }\\\\n\\\\n  message SubUserStatusInput\\\\n  {\\\\n    repeated string userid =1;\\\\n  }\\\\n\\\\n  message SubUserStatusOutput\\\\n  {\\\\n    optional int32 nothing=1;\\\\n  }\\\\n  message VoipDynamicInput\\\\n  {\\\\n    required int32  engineType = 1;\\\\n    required string channelName = 2;\\\\n    optional string channelExtra = 3;\\\\n  }\\\\n\\\\n  message VoipDynamicOutput\\\\n  {\\\\n      required string dynamicKey=1;\\\\n  }\\\\n  message \\\"+Bt+\\\" {\\\\n    required int32 type = 1;\\\\n    optional int64 time = 2;\\\\n    optional string chrmId=3;\\\\n  }\\\\n  message \\\"+kt+\\\" {\\\\n    required int64 syncTime = 1;\\\\n    required bool ispolling = 2;\\\\n    optional bool isweb=3;\\\\n    optional bool isPullSend=4;\\\\n    optional bool isKeeping=5;\\\\n    optional int64 sendBoxSyncTime=6;\\\\n  }\\\\n  message \\\"+Ut+\\\" {\\\\n    required int32 sessionId = 1;\\\\n    required string classname = 2;\\\\n    required bytes content = 3;\\\\n    optional string pushText = 4;\\\\n    optional string appData = 5;\\\\n    repeated string userId = 6;\\\\n    optional int64 delMsgTime = 7;\\\\n    optional string delMsgId = 8;\\\\n    optional int32 configFlag = 9;\\\\n    optional int64 clientUniqueId = 10;\\\\n    optional string extraContent = 11;\\\\n    optional PushExtra pushExt = 12;\\\\n    optional string busChannel = 13; // 该消息所属会话的业务标识\\\\n  }\\\\n  message \\\"+bt+\\\" {\\\\n    optional string title = 1;\\\\n    optional int32  templateIdNoUse= 2;\\\\n    optional string pushId = 3;\\\\n    optional string pushConfigs = 4;\\\\n    optional string templateId = 5;\\\\n  }\\\\n  message \\\"+Pt+\\\" {\\\\n    repeated DownStreamMessage list = 1;\\\\n    required int64 syncTime = 2;\\\\n    optional bool finished = 3;\\\\n  }\\\\n  message \\\"+Lt+\\\" {\\\\n    required string fromUserId = 1;\\\\n    required ChannelType type = 2;\\\\n    optional string groupId = 3;\\\\n    required string classname = 4;\\\\n    required bytes content = 5;\\\\n    required int64 dataTime = 6;\\\\n    required int64 status = 7;\\\\n    optional int64 extra = 8;\\\\n    optional string msgId = 9;\\\\n    optional int32 direction = 10;\\\\n    optional int32 plantform =11;\\\\n    optional int32 isRemoved = 12;\\\\n    optional string source = 13;\\\\n    optional int64 clientUniqueId = 14;\\\\n    optional string extraContent = 15;\\\\n    optional string pushContent = 16;\\\\n    optional int32 configFlag = 17;\\\\n    optional PushExtra pushExt = 18;\\\\n    optional string busChannel = 19; // 该消息所属会话的业务标识，限制20字符以内\\\\n    optional int64 extStatus = 20; // 消息的扩展标记 第0位,表示送达状态: 0x01 表示已送达;断档: 0x02 表示是否需要执行断档策略; 消息修改: 0x04 拉取历史消息时表示该消息是否修改过\\\\n  }\\\\n  enum ChannelType {\\\\n    PERSON = 1;\\\\n    PERSONS = 2;\\\\n    GROUP = 3;\\\\n    TEMPGROUP = 4;\\\\n    CUSTOMERSERVICE = 5;\\\\n    NOTIFY = 6;\\\\n    MC=7;\\\\n    MP=8;\\\\n    ULTRAGROUP = 10;\\\\n  }\\\\n  message CreateDiscussionInput {\\\\n    optional string name = 1;\\\\n  }\\\\n  message CreateDiscussionOutput {\\\\n    required string id = 1;\\\\n  }\\\\n  message ChannelInvitationInput {\\\\n    repeated string users = 1;\\\\n  }\\\\n  message LeaveChannelInput {\\\\n    required int32 nothing = 1;\\\\n  }\\\\n  message ChannelEvictionInput {\\\\n    required string user = 1;\\\\n  }\\\\n  message RenameChannelInput {\\\\n    required string name = 1;\\\\n  }\\\\n  message ChannelInfoInput {\\\\n    required int32 nothing = 1;\\\\n  }\\\\n  message ChannelInfoOutput {\\\\n    required ChannelType type = 1;\\\\n    required string channelId = 2;\\\\n    required string channelName = 3;\\\\n    required string adminUserId = 4;\\\\n    repeated string firstTenUserIds = 5;\\\\n    required int32 openStatus = 6;\\\\n  }\\\\n  message ChannelInfosInput {\\\\n    required int32 page = 1;\\\\n    optional int32 number = 2;\\\\n  }\\\\n  message ChannelInfosOutput {\\\\n    repeated ChannelInfoOutput channels = 1;\\\\n    required int32 total = 2;\\\\n  }\\\\n  message MemberInfo {\\\\n    required string userId = 1;\\\\n    required string userName = 2;\\\\n    required string userPortrait = 3;\\\\n    required string extension = 4;\\\\n  }\\\\n  message GroupMembersInput {\\\\n    required int32 page = 1;\\\\n    optional int32 number = 2;\\\\n  }\\\\n  message GroupMembersOutput {\\\\n    repeated MemberInfo members = 1;\\\\n    required int32 total = 2;\\\\n  }\\\\n  message GetUserInfoInput {\\\\n    required int32 nothing = 1;\\\\n  }\\\\n  message GetUserInfoOutput {\\\\n    required string userId = 1;\\\\n    required string userName = 2;\\\\n    required string userPortrait = 3;\\\\n  }\\\\n  message GetSessionIdInput {\\\\n    required int32 nothing = 1;\\\\n  }\\\\n  message GetSessionIdOutput {\\\\n    required int32 sessionId = 1;\\\\n  }\\\\n  enum FileType {\\\\n    image = \\\"+W.IMAGE+\\\";\\\\n    audio = \\\"+W.AUDIO+\\\";\\\\n    video = \\\"+W.VIDEO+\\\";\\\\n    file = \\\"+W.FILE+\\\";\\\\n  }\\\\n  message \\\"+mn+\\\" {\\\\n    required FileType type = 1;\\\\n    optional string key = 2;\\\\n    optional string httpMethod = 3;\\\\n    optional string queryString = 4;\\\\n  }\\\\n  message \\\"+En+\\\" {\\\\n    required FileType type = 1;\\\\n    required string key = 2;\\\\n    optional string  fileName = 3;\\\\n  }\\\\n  message \\\"+Tn+\\\" {\\\\n    required FileType type = 1;\\\\n    required string key = 2;\\\\n    optional string fileName = 3;\\\\n   }\\\\n  message \\\"+vn+\\\" {\\\\n    required int64 deadline = 1;\\\\n    required string token = 2;\\\\n    optional string bosToken = 3;\\\\n    optional string bosDate = 4;\\\\n    optional string path = 5;\\\\n    optional string osskeyId = 6;\\\\n    optional string ossPolicy = 7;\\\\n    optional string ossSign = 8;\\\\n    optional string ossBucketName = 9;\\\\n    optional string s3Credential = 10;\\\\n    optional string s3Algorithm = 11;\\\\n    optional string s3Date = 12;\\\\n    optional string s3Policy = 13;\\\\n    optional string s3Signature = 14;\\\\n    optional string s3BucketName = 15;\\\\n    optional string stcAuthorization = 16;\\\\n    optional string stcContentSha256 = 17;\\\\n    optional string stcDate = 18;\\\\n    optional string stcBucketName = 19;\\\\n  }\\\\n  message \\\"+In+\\\" {\\\\n    required string downloadUrl = 1;\\\\n  }\\\\n  message \\\"+Cn+\\\" {\\\\n    required string downloadUrl = 1;\\\\n  }\\\\n  message Add2BlackListInput {\\\\n    required string userId = 1;\\\\n  }\\\\n  message RemoveFromBlackListInput {\\\\n    required string userId = 1;\\\\n  }\\\\n  message QueryBlackListInput {\\\\n    required int32 nothing = 1;\\\\n  }\\\\n  message QueryBlackListOutput {\\\\n    repeated string userIds = 1;\\\\n  }\\\\n  message BlackListStatusInput {\\\\n    required string userId = 1;\\\\n  }\\\\n  message BlockPushInput {\\\\n    required string blockeeId = 1;\\\\n  }\\\\n  message ModifyPermissionInput {\\\\n    required int32 openStatus = 1;\\\\n  }\\\\n  message GroupInput {\\\\n    repeated GroupInfo groupInfo = 1;\\\\n  }\\\\n  message GroupOutput {\\\\n    required int32 nothing = 1;\\\\n  }\\\\n  message GroupInfo {\\\\n    required string id = 1;\\\\n    required string name = 2;\\\\n  }\\\\n  message GroupHashInput {\\\\n    required string userId = 1;\\\\n    required string groupHashCode = 2;\\\\n  }\\\\n  message GroupHashOutput {\\\\n    required GroupHashType result = 1;\\\\n  }\\\\n  enum GroupHashType {\\\\n    group_success = 0x00;\\\\n    group_failure = 0x01;\\\\n  }\\\\n  message \\\"+Zt+\\\" {\\\\n    required int32 nothing = 1;\\\\n  }\\\\n  message \\\"+Xt+\\\" {\\\\n    required int32 nothing = 1;\\\\n    optional string sessionId = 2;\\\\n    optional int64 joinTime = 3;\\\\n  }\\\\n  message \\\"+xt+\\\" {\\\\n    required int64 syncTime = 1;\\\\n    required int32 count = 2;\\\\n  }\\\\n\\\\n  message ChrmPullMsgNew\\\\n  {\\\\n    required int32 count = 1;\\\\n    required int64 syncTime = 2;\\\\n    optional string chrmId=3;\\\\n  }\\\\n  message \\\"+qt+\\\"\\\\n  {\\\\n    optional ChannelType type = 1;\\\\n    optional int32 count = 2;\\\\n    optional int64 startTime = 3;\\\\n    optional int32 order = 4;\\\\n  }\\\\n  message \\\"+Qt+\\\"\\\\n  {\\\\n    required ChannelType type = 1;\\\\n    optional DownStreamMessage msg =2;\\\\n    optional int32 count = 3;\\\\n    repeated string busChannel = 4;\\\\n    optional int64 startTime = 5;\\\\n    optional int64 endTime = 6;\\\\n  }\\\\n  message \\\"+Kt+\\\"\\\\n  {\\\\n    repeated RelationInfo info = 1;\\\\n    optional bool isFinished = 2;//是否结束\\\\n  }\\\\n  message RelationInfo\\\\n  {\\\\n    required ChannelType type = 1;\\\\n    required string userId = 2;\\\\n    optional DownStreamMessage msg =3;\\\\n    optional int64 readMsgTime= 4;\\\\n    optional int64 unreadCount= 5;\\\\n    optional string busChannel = 6;//该消息所属会话的业务标识\\\\n    optional int64 versionTime = 7;//会话项变更时间戳，注意:非排序时间戳\\\\n    optional int64 remindCount = 8;//被@的未读数\\\\n  }\\\\n  message RelationInfoReadTime\\\\n  {\\\\n    required ChannelType type = 1;\\\\n    required int64 readMsgTime= 2;\\\\n    required string targetId = 3;\\\\n  }\\\\n  message \\\"+Jt+\\\"\\\\n  {\\\\n      required string targetId = 1;\\\\n      required int64 dataTime = 2;\\\\n      optional int32 conversationType= 3;\\\\n      optional string busChannel = 4; //该消息所属会话的业务标识，限制20字符以内\\\\n  }\\\\n  message HistoryMessageInput\\\\n  {\\\\n    required string targetId = 1;\\\\n    required int64 dataTime =2;\\\\n    required int32 size  = 3;\\\\n  }\\\\n\\\\n  message HistoryMessagesOuput\\\\n  {\\\\n    repeated DownStreamMessage list = 1;\\\\n    required int64 syncTime = 2;\\\\n    required int32 hasMsg = 3;\\\\n  }\\\\n  message \\\"+$t+\\\"\\\\n  {\\\\n    required int32 count= 1;\\\\n    optional int32 order= 2;\\\\n  }\\\\n\\\\n  message \\\"+en+\\\"\\\\n  {\\\\n    optional int32 userTotalNums = 1;\\\\n    repeated ChrmMember userInfos = 2;\\\\n  }\\\\n  message ChrmMember\\\\n  {\\\\n    required int64 time = 1;\\\\n    required string id = 2;\\\\n  }\\\\n  message MPFollowInput\\\\n  {\\\\n    required string id = 1;\\\\n  }\\\\n\\\\n  message MPFollowOutput\\\\n  {\\\\n    required int32 nothing = 1;\\\\n    optional MpInfo info =2;\\\\n  }\\\\n\\\\n  message \\\"+cn+\\\"\\\\n  {\\\\n    required string state = 1;\\\\n  }\\\\n\\\\n  message MCFollowOutput\\\\n  {\\\\n    required int32 nothing = 1;\\\\n    optional MpInfo info =2;\\\\n  }\\\\n\\\\n  message MpInfo\\\\n  {\\\\n    required string mpid=1;\\\\n    required string name = 2;\\\\n    required string type = 3;\\\\n    required int64 time=4;\\\\n    optional string portraitUrl=5;\\\\n    optional string extra =6;\\\\n  }\\\\n\\\\n  message SearchMpInput\\\\n  {\\\\n    required int32 type=1;\\\\n    required string id=2;\\\\n  }\\\\n\\\\n  message SearchMpOutput\\\\n  {\\\\n    required int32 nothing=1;\\\\n    repeated MpInfo info = 2;\\\\n  }\\\\n\\\\n  message PullMpInput\\\\n  {\\\\n    required int64 time=1;\\\\n    required string mpid=2;\\\\n  }\\\\n\\\\n  message PullMpOutput\\\\n  {\\\\n    required int32 status=1;\\\\n    repeated MpInfo info = 2;\\\\n  }\\\\n  message \\\"+Gt+\\\"\\\\n  {\\\\n    optional string targetId = 1;\\\\n    optional int64 time = 2;\\\\n    optional int32 count  = 3;\\\\n    optional int32 order = 4;\\\\n    optional string busChannel = 5; //该消息所属会话的业务标识，限制20字符以内\\\\n  }\\\\n\\\\n  message \\\"+Ft+\\\"\\\\n  {\\\\n    repeated DownStreamMessage list=1;\\\\n    required int64 syncTime=2;\\\\n    required int32 hasMsg=3;\\\\n  }\\\\n  message \\\"+pn+\\\"{\\\\n    optional int32 order=1;\\\\n  }\\\\n\\\\n  message \\\"+yn+\\\"{\\\\n    repeated string key=1;\\\\n  }\\\\n\\\\n  message \\\"+_n+\\\"{\\\\n    required string key=1;\\\\n    required string value=2;\\\\n  }\\\\n\\\\n  message RtcUserInfo{\\\\n    required string userId=1;\\\\n    repeated \\\"+_n+\\\" userData=2; //用户资源信息\\\\n  }\\\\n\\\\n  message \\\"+nn+\\\"{\\\\n    repeated RtcUserInfo users=1;\\\\n    optional string token=2;\\\\n    optional string sessionId=3;\\\\n    repeated RtcValueInfo roomInfo = 4; //房间key value\\\\n    repeated RtcKVEntity entries = 5;//直播KV属性对象集合\\\\n    optional int64 syncTime = 6;//所有属性的最大时间戳（下次拉取KV时用）。\\\\n    optional int32 offlineKickTime = 7;//server超时踢人时间，默认60s\\\\n  }\\\\n  message RtcRoomInfoOutput{\\\\n    optional string roomId = 1;\\\\n    repeated \\\"+_n+\\\" roomData = 2;\\\\n    optional int32 userCount = 3;\\\\n    repeated RtcUserInfo list=4;\\\\n  }\\\\n  message \\\"+tn+\\\"{\\\\n    required int32 roomType=1;\\\\n    optional int32 broadcastType=2;\\\\n    optional RtcValueInfo extraInnerData = 3;\\\\n    optional bool needSysChatroom = 4; //是否需要同步聊天室\\\\n    optional IdentityChangeType identityChangeType = 5; //身份变更类型\\\\n    optional JoinType joinType = 6; // 加入房间类型\\\\n    repeated \\\"+_n+\\\" innerDatas = 7; //用户内部inner数据，角色或者连麦信息等\\\\n    repeated \\\"+_n+\\\" outerDatas = 8; //用户内部outer数据，自定义数据结构RtcInput。\\\\n  }\\\\n  enum JoinType {\\\\n    KICK = 0; //踢前一个设备\\\\n    REFUSE = 1; //当前加入拒绝\\\\n    COEXIST = 2; //两个设备共存\\\\n  }\\\\n  message RtcQryInput{\\\\n    required bool isInterior=1;\\\\n    required targetType target=2;\\\\n    repeated string key=3;\\\\n  }\\\\n  message \\\"+ln+\\\"{\\\\n    repeated \\\"+_n+\\\" outInfo=1;\\\\n  }\\\\n  message RtcDelDataInput{\\\\n    repeated string key=1;\\\\n    required bool isInterior=2;\\\\n    required targetType target=3;\\\\n  }\\\\n  message \\\"+an+\\\"{\\\\n    required bool interior=1;\\\\n    required targetType target=2;\\\\n    repeated string key=3;\\\\n    optional string objectName=4;\\\\n    optional string content=5;\\\\n  }\\\\n  message \\\"+sn+\\\"{\\\\n    required bool interior=1;\\\\n    required targetType target=2;\\\\n    required string key=3;\\\\n    required string value=4;\\\\n    optional string objectName=5;\\\\n    optional string content=6;\\\\n  }\\\\n  message \\\"+on+\\\" {\\\\n    repeated \\\"+_n+\\\" valueInfo = 1;\\\\n    required string objectName = 2;\\\\n    repeated \\\"+_n+\\\" content = 3;\\\\n  }\\\\n  message RtcOutput\\\\n  {\\\\n    optional int32 nothing=1;\\\\n  }\\\\n  message \\\"+hn+\\\"{\\\\n    required string rtcToken=1;\\\\n  }\\\\n  enum targetType {\\\\n    ROOM =1 ;\\\\n    PERSON = 2;\\\\n  }\\\\n  message \\\"+un+\\\"{\\\\n    required targetType target=1;\\\\n    repeated \\\"+_n+\\\" valueInfo=2;\\\\n    optional string objectName=3;\\\\n    optional string content=4;\\\\n  }\\\\n  message \\\"+dn+\\\"{\\\\n    repeated string userId = 1;\\\\n  }\\\\n  message \\\"+fn+\\\"{\\\\n    repeated RtcUserInfo user = 1;\\\\n  }\\\\n  message \\\"+Dt+\\\"{\\\\n    required int32 nothing = 1;\\\\n  }\\\\n  message \\\"+Vt+\\\"{\\\\n    required int64 inboxTime = 1;\\\\n    required int64 sendboxTime = 2;\\\\n    required int64 totalUnreadCount = 3;\\\\n  }\\\\n  message \\\"+zt+\\\"\\\\n  {\\\\n    required ChannelType type = 1;\\\\n    required int64 msgTime = 2;\\\\n    required string channelId = 3;\\\\n    optional string busChannel = 4;//该消息所属会话的业务标识\\\\n  }\\\\n  message SessionMsgReadOutput\\\\n  {\\\\n    optional int32 nothing=1;\\\\n  }\\\\n  message \\\"+Ht+\\\"\\\\n  {\\\\n    repeated SessionInfo sessions = 1;\\\\n  }\\\\n  message \\\"+Yt+\\\"\\\\n  {\\\\n    required ChannelType type = 1;\\\\n    required string channelId = 2;\\\\n    optional string busChannel = 3;//所属会话业务标识\\\\n  }\\\\n  message \\\"+jt+\\\"\\\\n  {\\\\n    optional int32 nothing=1;\\\\n  }\\\\n  message \\\"+Wt+\\\"\\\\n  {\\\\n    optional ChannelType type = 1;\\\\n    optional string conversationId = 2;\\\\n    repeated DeleteMsg msgs = 3;\\\\n    optional string busChannel = 4; //该消息所属会话的业务标识，限制20字符以内\\\\n  }\\\\n  message DeleteMsg\\\\n  {\\\\n    optional string msgId = 1;\\\\n    optional int64 msgDataTime = 2;\\\\n    optional int32 direct = 3;\\\\n  }\\\\n  message ChrmKVEntity {\\\\n    required string key = 1;\\\\n    required string value = 2;\\\\n    optional int32 status = 3;\\\\n    optional int64 timestamp = 4;\\\\n    optional string uid = 5;\\\\n    optional int64 version = 6;\\\\n  }\\\\n  message \\\"+Sn+\\\" {\\\\n    required ChrmKVEntity entry = 1;\\\\n    optional bool bNotify = 2;\\\\n    optional UpStreamMessage notification = 3;\\\\n    optional ChannelType type = 4;\\\\n  }\\\\n  message \\\"+Nn+\\\" {\\\\n    repeated ChrmKVEntity entry = 1;\\\\n    optional bool bNotify = 2;\\\\n    optional UpStreamMessage notification = 3;\\\\n    optional ChannelType type = 4;\\\\n  }\\\\n  message \\\"+On+\\\" {\\\\n    repeated ChrmKVEntity entry = 1;\\\\n    optional bool bNotify = 2;\\\\n    optional UpStreamMessage notification = 3;\\\\n    optional ChannelType type = 4;\\\\n  }\\\\n  message \\\"+Mn+\\\" {\\\\n    repeated ChrmKVEntity entries = 1;\\\\n    optional bool bFullUpdate = 2;\\\\n    optional int64 syncTime = 3;\\\\n  }\\\\n  message ChrmKVSVersionEntity {\\\\n    optional int64 version = 1;\\\\n    optional string key = 2;\\\\n  }\\\\n\\\\n  message \\\"+wn+\\\" {\\\\n    repeated ChrmKVSOutputEntity errorKeys = 1;\\\\n    repeated ChrmKVSVersionEntity keysVersion = 2;\\\\n  }\\\\n  message \\\"+Un+\\\"\\\\n  {\\\\n    optional string key = 1;\\\\n    optional int32 errorCode = 2;\\\\n  }\\\\n  message \\\"+bn+\\\" {\\\\n    required int64 timestamp = 1;\\\\n  }\\\\n  message \\\"+Ln+\\\" {\\\\n    required int64 version=1;\\\\n    required string value=2;\\\\n  }\\\\n  message \\\"+Pn+\\\" {\\\\n    required int64 version=1;\\\\n    required bool reserve=2;\\\\n  }\\\\n  message \\\"+Dn+\\\" {\\\\n    required int64 version=1;\\\\n    optional bool reserve=2;\\\\n  }\\\\n  message \\\"+Vn+\\\" {\\\\n    repeated UserSettingItem items = 1;\\\\n    required int64 version=2;\\\\n  }\\\\n  message UserSettingItem {\\\\n    required string targetId= 1;\\\\n    required ChannelType type = 2;\\\\n    required string key = 4;\\\\n    required bytes value = 5;\\\\n    required int64 version=6;\\\\n    required int32 status=7;\\\\n    repeated SessionTagItem tags= 8;\\\\n  }\\\\n  message \\\"+xn+\\\" {\\\\n    required int64 time = 1;\\\\n  }\\\\n  message \\\"+Bn+\\\" {\\\\n    required int64 version=1;\\\\n    repeated SessionState state= 2;\\\\n  }\\\\n  message \\\"+Gn+\\\" {\\\\n    required ChannelType type = 1;\\\\n    required string channelId = 2;\\\\n    optional int64 time = 3;\\\\n    repeated SessionStateItem stateItem = 4;\\\\n    optional string busChannel = 5;//该消息所属会话的业务标识\\\\n  }\\\\n  message \\\"+Fn+\\\" {\\\\n    required SessionStateType sessionStateType = 1;\\\\n    required string value = 2;\\\\n    repeated SessionTagItem tags = 3;\\\\n  }\\\\n  enum SessionStateType {\\\\n    IsSilent = 1;\\\\n    IsTop = 2;\\\\n    Tags = 3;\\\\n  }\\\\n  message \\\"+qn+\\\" {\\\\n    required int64 version=1;\\\\n    repeated SessionState state= 2;\\\\n  }\\\\n  message \\\"+Kn+\\\" {\\\\n    required int64 version=1;\\\\n  }\\\\n  message \\\"+Hn+\\\" {\\\\n    repeated string msgId=1; //已读消息ID\\\\n    optional string channelId = 2; // 该消息所属会话的业务标识\\\\n  }\\\\n  message \\\"+Yn+\\\" {\\\\n    repeated string msgId=1; //已读消息ID\\\\n    optional string channelId = 2; // 该消息所属会话的业务标识\\\\n  }\\\\n  message \\\"+jn+\\\" {\\\\n    required int32 totalMemberNum = 1;//群内总人数\\\\n    repeated GrpMsgReadUser list = 2;//已读用户列表（list复类型）\\\\n  }\\\\n  message \\\"+Qn+\\\" {\\\\n    required int64 readTime = 1;//已读时间\\\\n    required string userId = 2;//已读用户id\\\\n  }\\\\n  message \\\"+Wn+\\\" {\\\\n    required int64 version=1;\\\\n    repeated SessionTagItem tags=2;\\\\n  }\\\\n  message \\\"+Jn+\\\" {\\\\n    required string tagId=1;\\\\n    optional string name=2;\\\\n    optional int64 createdTime=3;\\\\n    optional bool isTop=4;\\\\n  }\\\\n  message \\\"+zn+\\\" {\\\\n    required int64 version=1;\\\\n    repeated SessionTagItem tags=2;\\\\n  }\\\\n  message \\\"+Zn+\\\" {\\\\n    repeated string tagId=1;\\\\n  }\\\\n  message \\\"+kn+\\\" {\\\\n    required int64 version=1;\\\\n    required bool reserve=2;\\\\n  }\\\\n  message \\\"+Xn+' {\\\\n    required string sdkInfo=1; // 用户集成的 sdk 信息,json 格式 {\\\"web-rtc\\\": \\\"4.0.3.7\\\"}\\\\n  }\\\\n  message '+$n+\\\"\\\\n  {\\\\n    optional int32 nothing=1; //占位\\\\n  }\\\\n  message \\\"+fi+\\\" \\\\n  {\\\\n    required int32 type= 1;   //(通知类型 1:rtc房间状态KV变更通知)\\\\n    optional int64 time= 2;   //消息产生时间\\\\n    optional string roomId=3; //主播房间id\\\\n  }\\\\n  message \\\"+pi+\\\"\\\\n  {\\\\n    required int64 timestamp = 1;\\\\n    required string roomId = 2;\\\\n  }\\\\n  message \\\"+gi+\\\"\\\\n  {\\\\n    repeated RtcKVEntity entries = 1;\\\\n    optional bool bFullUpdate = 2;\\\\n    optional int64 syncTime = 3; \\\\n  }\\\\n  message RtcKVEntity \\\\n  {\\\\n    required string key = 1;\\\\n    required string value = 2;\\\\n    optional int32 status = 3;\\\\n    optional int64 timestamp = 4;\\\\n    optional string uid = 5;\\\\n  }\\\\n  enum IdentityChangeType \\\\n  {\\\\n    AnchorToViewer = 1; //1为主播变观众\\\\n    ViewerToAnchor = 2; //2为观众变主播\\\\n  }\\\\n  message \\\"+_i+\\\"\\\\n  {\\\\n    required string userId = 1;\\\\n  }\\\\n  message \\\"+yi+\\\"\\\\n  {\\\\n    repeated RtcJoinedInfo info = 1;\\\\n  }\\\\n  message RtcJoinedInfo\\\\n  {\\\\n    required string deviceId = 1; //设备ID\\\\n    required string roomId = 2;   //加入的房间ID\\\\n    optional int64 joinTime = 3;  //加入的时间\\\\n  }\\\\n  message \\\"+mi+\\\"\\\\n  {\\\\n    required string rtcToken=1;\\\\n    repeated RtcKVEntity entries = 2;//KV属性对象集合\\\\n    optional int64 syncTime = 3;//所有属性的最大时间戳（下次拉取KV时用）。\\\\n  }\\\\n  message \\\"+vi+\\\"\\\\n  {\\\\n    required string invitedUserId=1;    //被邀请的人的uid\\\\n    optional int32  timeoutTime=2;       //邀请超时时间(秒),默认三十秒\\\\n    required string invitedRoomId=3;    //被邀请的房间\\\\n    required string inviteInfo=4;       //邀请的信息(包含邀请人,被邀请人,各自userid)客户端定义好.协议栈和server透传\\\\n    required string inviteSessionId= 5; //客户端保证唯一性(建议roomid_userid_时间戳_随机数)\\\\n  }\\\\n  message \\\"+Ei+\\\"\\\\n  {\\\\n    required string invitedUserId=1;   //被邀请的人的uid\\\\n    required string invitedRoomId=2;   //被邀请的房间\\\\n    required string inviteInfo=3;      //取消邀请的信息(包含邀请人,被邀请人,各自userid)客户端定义好.协议栈和server透传\\\\n    required string inviteSessionId=4; //邀请的sessionId,客户端发起邀请时产生\\\\n  }\\\\n  message \\\"+Ti+\\\"\\\\n  {\\\\n    required string inviteUserId=1;    //邀请的人的uid\\\\n    required int32  answerCode=2;      //是否接受连麦邀请.0为拒绝,1为接受\\\\n    required string inviteRoomId=3;    //邀请的房间\\\\n    required string inviteSessionId=4; //邀请的sessionId\\\\n    required string content=5;         //需要转发的content\\\\n    optional string key=6;             //如果接受的话,需要加这个字段,放在room级别的k和v,新加入房间的能拉取到\\\\n    optional string value=7;           //如果接受的话,需要加这个字段,放在room级别的k和v,新加入房间的能拉取到\\\\n  }\\\\n  message \\\"+Ii+\\\"\\\\n  {\\\\n    required string inviteRoomId=1;    //邀请的房间\\\\n    required string inviteSessionId=2; //邀请的sessionId\\\\n    required string inviteContent=3;   //结束连麦的信息(需要透传给房间内其他人)\\\\n    repeated string inviteRoomKeys=4;  //需要删除连麦的信息的key\\\\n  }\\\\n  message \\\"+ei+\\\"\\\\n  {\\\\n      required int64 syncTime = 1;//同步时间戳\\\\n      optional bool isEraseMsgContent = 2;//拉取会话时，是否屏蔽掉消息内容\\\\n  }\\\\n  message \\\"+ti+\\\"\\\\n  {\\\\n    required int64 syncTime = 1;//同步时间戳\\\\n  }\\\\n  message  \\\"+ni+\\\"\\\\n  {\\\\n    required string fromUserId = 1;//（谁发的）\\\\n    required string targetId = 2;// 目标Id(超级群Id)\\\\n    required ChannelType type = 3;//发送类型如：（P2P,GROUP,ULTRAGROUP）\\\\n    required string msgUID = 4; // 扩展消息的内容体\\\\n    required int64 msgTime = 5; //原始消息时间\\\\n    optional string busChannel = 6; // 该消息所属会话的业务标识，限制20字符以内\\\\n    optional string content = 7; // 即extraContent消息扩展内容,下表格说明\\\\n  }\\\\n  message \\\"+ii+\\\"  //查询入参\\\\n  {\\\\n    required int64 syncTime = 1;//同步时间戳\\\\n  }\\\\n  message \\\"+si+\\\"  //应答结果\\\\n  {\\\\n    repeated MsgChange list = 1; //变更\\\\n    required int64 syncTime = 2; //同步时间(用于下次同步入参)\\\\n    optional bool  hasNext = 3 ;\\\\n  }\\\\n  message MsgChange  //变更详情\\\\n  {\\\\n    required string targetId = 1; //  目标Id(超级群Id)\\\\n    required ChannelType type = 2; //  会话类型\\\\n    required int64 time = 3;  // 变更时间\\\\n    required int32 changeType = 4;  // 消息变更类型（1:扩展,2:修改,3:撤回)\\\\n    required string msgUID  = 5;  // 消息ID\\\\n    required int64 msgTime = 6;  //  消息时间\\\\n    optional string busChannel = 7; // 频道ID\\\\n    optional bool isAdmin = 8; //是否为管理员，默认为 0，设为 1 时，IMKit 收到此条消息后，小灰条默认显示为“管理员 撤回了一条消息”。\\\\n    optional bool isDel = 9; //默认为 0 撤回该条消息同时，用户端将该条消息删除并替换为一条小灰条撤回提示消息；为 1 时，该条消息删除后，不替换为小灰条提示消息。\\\\n    optional string operatorId = 10; // 新加 - 消息变更的操作人Id\\\\n  }\\\\n  message \\\"+oi+\\\"  //请求\\\\n  {\\\\n    required string targetId = 1; //  目标Id(超级群Id)\\\\n    required ChannelType type = 2; //  会话类型\\\\n    repeated MessageQueryInfo query = 3; //\\\\n  }\\\\n  message MessageQueryInfo\\\\n  {\\\\n    required int64 msgTime = 1;  // 消息时间\\\\n    required string msgUID  = 2;  // 消息ID\\\\n    optional string busChannel = 3; // 频道ID\\\\n  }\\\\n  message \\\"+ui+\\\"  //应答\\\\n  {\\\\n    repeated DownStreamMessage list = 1;//消息\\\\n  }\\\\n  message \\\"+ci+\\\"  //客户端发送\\\\n  {\\\\n    optional string targetId =  1;// targetId\\\\n    optional ChannelType type = 2;//发送会话类型如：（P2P,GROUP） \\\\n    optional int32 opType = 3;  //0 , 正在输入, 1 正在XXX  \\\\n    optional string busChannel = 4; // 频道(channelId,可以为空)\\\\n  }\\\\n  message \\\"+hi+\\\"  //服务端发送\\\\n  {\\\\n      optional ChannelType type = 1;//发送会话类型如（P2P,GROUP） \\\\n      optional int64 notifyType = 2; //0x1 表示明细, 0x2 表示汇总 0x3 表示明细+汇总\\\\n      repeated OperateInfo info = 3 ; //明细列表 当notifyType 为 1和3时,有效\\\\n      repeated OperateSummary summary = 4 ; //汇总列表, 当notifyType 为2和3 时,有效\\\\n  }\\\\n  message \\\"+li+\\\" {\\\\n    // XX 正在做什么\\\\n    optional string targetId = 1; // 超级群Id  会话id\\\\n    optional string busChannel = 2; // 频道(channelId,可以为空)\\\\n    optional string userId = 3; // userId\\\\n    optional int32 opType = 4;  //0 , 正在输入, 1 正在XX \\\\n    optional int64 optime = 5;  //服务端收到用户操作的上行时间. \\\\n  }\\\\n      \\\\n  message \\\"+di+\\\" {\\\\n    // 几个人 正在干什么\\\\n    optional string targetId = 1; // 超级群Id  会话id\\\\n    optional string busChannel = 2; // 频道(channelId,可以为空)\\\\n    optional int32 count  = 3; // 操作人数\\\\n    optional int32 opType = 4; //0, 正在输入, 1 正在XX \\\\n  }\\\\n  message \\\"+Ci+\\\"\\\\n  {\\\\n    required string  rtcRoomId= 1;  //rtc房间ID;\\\\n  }\\\\n  message \\\"+Ri+\\\"\\\\n  {\\\\n    required int32 nothing = 1;   //用于占位\\\\n  }\\\\n}\\\\n\\\";var Ai,Ui,bi,Li,Pi,Di=(Ai=wi,function(e,t){var n,i,r={};return r.ByteBuffer=e,r.c=e,n=e,r.Long=t||null,r.VERSION=\\\"5.0.1\\\",r.WIRE_TYPES={},r.WIRE_TYPES.VARINT=0,r.WIRE_TYPES.BITS64=1,r.WIRE_TYPES.LDELIM=2,r.WIRE_TYPES.STARTGROUP=3,r.WIRE_TYPES.ENDGROUP=4,r.WIRE_TYPES.BITS32=5,r.PACKABLE_WIRE_TYPES=[r.WIRE_TYPES.VARINT,r.WIRE_TYPES.BITS64,r.WIRE_TYPES.BITS32],r.TYPES={int32:{name:\\\"int32\\\",wireType:r.WIRE_TYPES.VARINT,defaultValue:0},uint32:{name:\\\"uint32\\\",wireType:r.WIRE_TYPES.VARINT,defaultValue:0},sint32:{name:\\\"sint32\\\",wireType:r.WIRE_TYPES.VARINT,defaultValue:0},int64:{name:\\\"int64\\\",wireType:r.WIRE_TYPES.VARINT,defaultValue:r.Long?r.Long.ZERO:void 0},uint64:{name:\\\"uint64\\\",wireType:r.WIRE_TYPES.VARINT,defaultValue:r.Long?r.Long.UZERO:void 0},sint64:{name:\\\"sint64\\\",wireType:r.WIRE_TYPES.VARINT,defaultValue:r.Long?r.Long.ZERO:void 0},bool:{name:\\\"bool\\\",wireType:r.WIRE_TYPES.VARINT,defaultValue:!1},double:{name:\\\"double\\\",wireType:r.WIRE_TYPES.BITS64,defaultValue:0},string:{name:\\\"string\\\",wireType:r.WIRE_TYPES.LDELIM,defaultValue:\\\"\\\"},bytes:{name:\\\"bytes\\\",wireType:r.WIRE_TYPES.LDELIM,defaultValue:null},fixed32:{name:\\\"fixed32\\\",wireType:r.WIRE_TYPES.BITS32,defaultValue:0},sfixed32:{name:\\\"sfixed32\\\",wireType:r.WIRE_TYPES.BITS32,defaultValue:0},fixed64:{name:\\\"fixed64\\\",wireType:r.WIRE_TYPES.BITS64,defaultValue:r.Long?r.Long.UZERO:void 0},sfixed64:{name:\\\"sfixed64\\\",wireType:r.WIRE_TYPES.BITS64,defaultValue:r.Long?r.Long.ZERO:void 0},float:{name:\\\"float\\\",wireType:r.WIRE_TYPES.BITS32,defaultValue:0},enum:{name:\\\"enum\\\",wireType:r.WIRE_TYPES.VARINT,defaultValue:0},message:{name:\\\"message\\\",wireType:r.WIRE_TYPES.LDELIM,defaultValue:null},group:{name:\\\"group\\\",wireType:r.WIRE_TYPES.STARTGROUP,defaultValue:null}},r.MAP_KEY_TYPES=[r.TYPES.int32,r.TYPES.sint32,r.TYPES.sfixed32,r.TYPES.uint32,r.TYPES.fixed32,r.TYPES.int64,r.TYPES.sint64,r.TYPES.sfixed64,r.TYPES.uint64,r.TYPES.fixed64,r.TYPES.bool,r.TYPES.string,r.TYPES.bytes],r.ID_MIN=1,r.ID_MAX=536870911,r.convertFieldsToCamelCase=!1,r.populateAccessors=!0,r.populateDefaults=!0,r.Util=function(){var e={};return e.IS_NODE=!(\\\"object\\\"!=typeof process||process+\\\"\\\"!=\\\"[object process]\\\"||process.browser),e.XHR=function(){var e,t=[function(){return new XMLHttpRequest},function(){return new ActiveXObject(\\\"Msxml2.XMLHTTP\\\")},function(){return new ActiveXObject(\\\"Msxml3.XMLHTTP\\\")},function(){return new ActiveXObject(\\\"Microsoft.XMLHTTP\\\")}],n=null;for(e=0;e<t.length;e++){try{n=t[e]()}catch(e){continue}break}if(!n)throw Error(\\\"XMLHttpRequest is not supported\\\");return n},e.fetch=function(t,n){if(n&&\\\"function\\\"!=typeof n&&(n=null),e.IS_NODE)if(n)g.readFile(t,(function(e,t){n(e?null:\\\"\\\"+t)}));else try{return g.readFileSync(t)}catch(e){return null}else{var i=e.XHR();if(i.open(\\\"GET\\\",t,!!n),i.setRequestHeader(\\\"Accept\\\",\\\"text/plain\\\"),\\\"function\\\"==typeof i.overrideMimeType&&i.overrideMimeType(\\\"text/plain\\\"),!n)return i.send(null),200==i.status||0==i.status&&\\\"string\\\"==typeof i.responseText?i.responseText:null;if(i.onreadystatechange=function(){4==i.readyState&&(200==i.status||0==i.status&&\\\"string\\\"==typeof i.responseText?n(i.responseText):n(null))},4==i.readyState)return;i.send(null)}},e.toCamelCase=function(e){return e.replace(/_([a-zA-Z])/g,(function(e,t){return t.toUpperCase()}))},e}(),r.Lang={DELIM:/[\\\\s\\\\{\\\\}=;:\\\\[\\\\],'\\\"\\\\(\\\\)<>]/g,RULE:/^(?:required|optional|repeated|map)$/,TYPE:/^(?:double|float|int32|uint32|sint32|int64|uint64|sint64|fixed32|sfixed32|fixed64|sfixed64|bool|string|bytes)$/,NAME:/^[a-zA-Z_][a-zA-Z_0-9]*$/,TYPEDEF:/^[a-zA-Z][a-zA-Z_0-9]*$/,TYPEREF:/^(?:\\\\.?[a-zA-Z_][a-zA-Z_0-9]*)+$/,FQTYPEREF:/^(?:\\\\.[a-zA-Z][a-zA-Z_0-9]*)+$/,NUMBER:/^-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+|([0-9]*(\\\\.[0-9]*)?([Ee][+-]?[0-9]+)?)|inf|nan)$/,NUMBER_DEC:/^(?:[1-9][0-9]*|0)$/,NUMBER_HEX:/^0[xX][0-9a-fA-F]+$/,NUMBER_OCT:/^0[0-7]+$/,NUMBER_FLT:/^([0-9]*(\\\\.[0-9]*)?([Ee][+-]?[0-9]+)?|inf|nan)$/,BOOL:/^(?:true|false)$/i,ID:/^(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/,NEGID:/^\\\\-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/,WHITESPACE:/\\\\s/,STRING:/(?:\\\"([^\\\"\\\\\\\\]*(?:\\\\\\\\.[^\\\"\\\\\\\\]*)*)\\\")|(?:'([^'\\\\\\\\]*(?:\\\\\\\\.[^'\\\\\\\\]*)*)')/g,STRING_DQ:/(?:\\\"([^\\\"\\\\\\\\]*(?:\\\\\\\\.[^\\\"\\\\\\\\]*)*)\\\")/g,STRING_SQ:/(?:'([^'\\\\\\\\]*(?:\\\\\\\\.[^'\\\\\\\\]*)*)')/g},r.DotProto=function(e,t){function n(e,n){var i=-1,r=1;if(\\\"-\\\"==e.charAt(0)&&(r=-1,e=e.substring(1)),t.NUMBER_DEC.test(e))i=parseInt(e);else if(t.NUMBER_HEX.test(e))i=parseInt(e.substring(2),16);else{if(!t.NUMBER_OCT.test(e))throw Error(\\\"illegal id value: \\\"+(r<0?\\\"-\\\":\\\"\\\")+e);i=parseInt(e.substring(1),8)}if(i=0|r*i,!n&&i<0)throw Error(\\\"illegal id value: \\\"+(r<0?\\\"-\\\":\\\"\\\")+e);return i}function i(e){var n=1;if(\\\"-\\\"==e.charAt(0)&&(n=-1,e=e.substring(1)),t.NUMBER_DEC.test(e))return n*parseInt(e,10);if(t.NUMBER_HEX.test(e))return n*parseInt(e.substring(2),16);if(t.NUMBER_OCT.test(e))return n*parseInt(e.substring(1),8);if(\\\"inf\\\"===e)return 1/0*n;if(\\\"nan\\\"===e)return NaN;if(t.NUMBER_FLT.test(e))return n*parseFloat(e);throw Error(\\\"illegal number value: \\\"+(n<0?\\\"-\\\":\\\"\\\")+e)}function r(e,t,n){void 0===e[t]?e[t]=n:(Array.isArray(e[t])||(e[t]=[e[t]]),e[t].push(n))}var s,o,a={},u=function(e){this.source=e+\\\"\\\",this.index=0,this.line=1,this.stack=[],this._stringOpen=null},c=u.prototype;return c._readString=function(){var e,n='\\\"'===this._stringOpen?t.STRING_DQ:t.STRING_SQ;if(n.lastIndex=this.index-1,!(e=n.exec(this.source)))throw Error(\\\"unterminated string\\\");return this.index=n.lastIndex,this.stack.push(this._stringOpen),this._stringOpen=null,e[1]},c.next=function(){var e,n,i,r,s;if(this.stack.length>0)return this.stack.shift();if(this.index>=this.source.length)return null;if(null!==this._stringOpen)return this._readString();do{for(e=!1;t.WHITESPACE.test(i=this.source.charAt(this.index));)if(\\\"\\\\n\\\"===i&&++this.line,++this.index===this.source.length)return null;if(\\\"/\\\"===this.source.charAt(this.index))if(++this.index,\\\"/\\\"===this.source.charAt(this.index)){for(;\\\"\\\\n\\\"!==this.source.charAt(++this.index);)if(this.index==this.source.length)return null;++this.index,++this.line,e=!0}else{if(\\\"*\\\"!==(i=this.source.charAt(this.index)))return\\\"/\\\";do{if(\\\"\\\\n\\\"===i&&++this.line,++this.index===this.source.length)return null;n=i,i=this.source.charAt(this.index)}while(\\\"*\\\"!==n||\\\"/\\\"!==i);++this.index,e=!0}}while(e);if(this.index===this.source.length)return null;if(r=this.index,t.DELIM.lastIndex=0,!t.DELIM.test(this.source.charAt(r++)))for(;r<this.source.length&&!t.DELIM.test(this.source.charAt(r));)++r;return('\\\"'===(s=this.source.substring(this.index,this.index=r))||\\\"'\\\"===s)&&(this._stringOpen=s),s},c.peek=function(){if(0===this.stack.length){var e=this.next();if(null===e)return null;this.stack.push(e)}return this.stack[0]},c.skip=function(e){var t=this.next();if(t!==e)throw Error(\\\"illegal '\\\"+t+\\\"', '\\\"+e+\\\"' expected\\\")},c.omit=function(e){return this.peek()===e&&(this.next(),!0)},c.toString=function(){return\\\"Tokenizer (\\\"+this.index+\\\"/\\\"+this.source.length+\\\" at line \\\"+this.line+\\\")\\\"},a.Tokenizer=u,(o=(s=function(e){this.tn=new u(e),this.proto3=!1}).prototype).parse=function(){var e,n={name:\\\"[ROOT]\\\",package:null,messages:[],enums:[],imports:[],options:{},services:[]},i=!0;try{for(;e=this.tn.next();)switch(e){case\\\"package\\\":if(!i||null!==n.package)throw Error(\\\"unexpected 'package'\\\");if(e=this.tn.next(),!t.TYPEREF.test(e))throw Error(\\\"illegal package name: \\\"+e);this.tn.skip(\\\";\\\"),n.package=e;break;case\\\"import\\\":if(!i)throw Error(\\\"unexpected 'import'\\\");\\\"public\\\"===(e=this.tn.peek())&&this.tn.next(),e=this._readString(),this.tn.skip(\\\";\\\"),n.imports.push(e);break;case\\\"syntax\\\":if(!i)throw Error(\\\"unexpected 'syntax'\\\");this.tn.skip(\\\"=\\\"),\\\"proto3\\\"===(n.syntax=this._readString())&&(this.proto3=!0),this.tn.skip(\\\";\\\");break;case\\\"message\\\":this._parseMessage(n,null),i=!1;break;case\\\"enum\\\":this._parseEnum(n),i=!1;break;case\\\"option\\\":this._parseOption(n);break;case\\\"service\\\":this._parseService(n);break;case\\\"extend\\\":this._parseExtend(n);break;default:throw Error(\\\"unexpected '\\\"+e+\\\"'\\\")}}catch(e){throw e.message=\\\"Parse error at line \\\"+this.tn.line+\\\": \\\"+e.message,e}return delete n.name,n},s.parse=function(e){return new s(e).parse()},o._readString=function(){var e,t,n=\\\"\\\";do{if(\\\"'\\\"!==(t=this.tn.next())&&'\\\"'!==t)throw Error(\\\"illegal string delimiter: \\\"+t);n+=this.tn.next(),this.tn.skip(t),e=this.tn.peek()}while('\\\"'===e||'\\\"'===e);return n},o._readValue=function(e){var n=this.tn.peek();if('\\\"'===n||\\\"'\\\"===n)return this._readString();if(this.tn.next(),t.NUMBER.test(n))return i(n);if(t.BOOL.test(n))return\\\"true\\\"===n.toLowerCase();if(e&&t.TYPEREF.test(n))return n;throw Error(\\\"illegal value: \\\"+n)},o._parseOption=function(e,n){var i,r=this.tn.next(),s=!1;if(\\\"(\\\"===r&&(s=!0,r=this.tn.next()),!t.TYPEREF.test(r))throw Error(\\\"illegal option name: \\\"+r);i=r,s&&(this.tn.skip(\\\")\\\"),i=\\\"(\\\"+i+\\\")\\\",r=this.tn.peek(),t.FQTYPEREF.test(r)&&(i+=r,this.tn.next())),this.tn.skip(\\\"=\\\"),this._parseOptionValue(e,i),n||this.tn.skip(\\\";\\\")},o._parseOptionValue=function(e,n){var i=this.tn.peek();if(\\\"{\\\"!==i)r(e.options,n,this._readValue(!0));else for(this.tn.skip(\\\"{\\\");\\\"}\\\"!==(i=this.tn.next());){if(!t.NAME.test(i))throw Error(\\\"illegal option name: \\\"+n+\\\".\\\"+i);this.tn.omit(\\\":\\\")?r(e.options,n+\\\".\\\"+i,this._readValue(!0)):this._parseOptionValue(e,n+\\\".\\\"+i)}},o._parseService=function(e){var n,i=this.tn.next();if(!t.NAME.test(i))throw Error(\\\"illegal service name at line \\\"+this.tn.line+\\\": \\\"+i);for(n={name:i,rpc:{},options:{}},this.tn.skip(\\\"{\\\");\\\"}\\\"!==(i=this.tn.next());)if(\\\"option\\\"===i)this._parseOption(n);else{if(\\\"rpc\\\"!==i)throw Error(\\\"illegal service token: \\\"+i);this._parseServiceRPC(n)}this.tn.omit(\\\";\\\"),e.services.push(n)},o._parseServiceRPC=function(e){var n,i,r=\\\"rpc\\\",s=this.tn.next();if(!t.NAME.test(s))throw Error(\\\"illegal rpc service method name: \\\"+s);if(n=s,i={request:null,response:null,request_stream:!1,response_stream:!1,options:{}},this.tn.skip(\\\"(\\\"),\\\"stream\\\"===(s=this.tn.next()).toLowerCase()&&(i.request_stream=!0,s=this.tn.next()),!t.TYPEREF.test(s))throw Error(\\\"illegal rpc service request type: \\\"+s);if(i.request=s,this.tn.skip(\\\")\\\"),\\\"returns\\\"!==(s=this.tn.next()).toLowerCase())throw Error(\\\"illegal rpc service request type delimiter: \\\"+s);if(this.tn.skip(\\\"(\\\"),\\\"stream\\\"===(s=this.tn.next()).toLowerCase()&&(i.response_stream=!0,s=this.tn.next()),i.response=s,this.tn.skip(\\\")\\\"),\\\"{\\\"===(s=this.tn.peek())){for(this.tn.next();\\\"}\\\"!==(s=this.tn.next());){if(\\\"option\\\"!==s)throw Error(\\\"illegal rpc service token: \\\"+s);this._parseOption(i)}this.tn.omit(\\\";\\\")}else this.tn.skip(\\\";\\\");void 0===e[r]&&(e[r]={}),e[r][n]=i},o._parseMessage=function(e,i){var r=!!i,s=this.tn.next(),o={name:\\\"\\\",fields:[],enums:[],messages:[],options:{},services:[],oneofs:{}};if(!t.NAME.test(s))throw Error(\\\"illegal \\\"+(r?\\\"group\\\":\\\"message\\\")+\\\" name: \\\"+s);for(o.name=s,r&&(this.tn.skip(\\\"=\\\"),i.id=n(this.tn.next()),o.isGroup=!0),\\\"[\\\"===(s=this.tn.peek())&&i&&this._parseFieldOptions(i),this.tn.skip(\\\"{\\\");\\\"}\\\"!==(s=this.tn.next());)if(t.RULE.test(s))this._parseMessageField(o,s);else if(\\\"oneof\\\"===s)this._parseMessageOneOf(o);else if(\\\"enum\\\"===s)this._parseEnum(o);else if(\\\"message\\\"===s)this._parseMessage(o);else if(\\\"option\\\"===s)this._parseOption(o);else if(\\\"service\\\"===s)this._parseService(o);else if(\\\"extensions\\\"===s)o.extensions=this._parseExtensionRanges();else if(\\\"reserved\\\"===s)this._parseIgnored();else if(\\\"extend\\\"===s)this._parseExtend(o);else{if(!t.TYPEREF.test(s))throw Error(\\\"illegal message token: \\\"+s);if(!this.proto3)throw Error(\\\"illegal field rule: \\\"+s);this._parseMessageField(o,\\\"optional\\\",s)}return this.tn.omit(\\\";\\\"),e.messages.push(o),o},o._parseIgnored=function(){for(;\\\";\\\"!==this.tn.peek();)this.tn.next();this.tn.skip(\\\";\\\")},o._parseMessageField=function(e,i,r){var s,o,a;if(!t.RULE.test(i))throw Error(\\\"illegal message field rule: \\\"+i);if(s={rule:i,type:\\\"\\\",name:\\\"\\\",options:{},id:0},\\\"map\\\"===i){if(r)throw Error(\\\"illegal type: \\\"+r);if(this.tn.skip(\\\"<\\\"),o=this.tn.next(),!t.TYPE.test(o)&&!t.TYPEREF.test(o))throw Error(\\\"illegal message field type: \\\"+o);if(s.keytype=o,this.tn.skip(\\\",\\\"),o=this.tn.next(),!t.TYPE.test(o)&&!t.TYPEREF.test(o))throw Error(\\\"illegal message field: \\\"+o);if(s.type=o,this.tn.skip(\\\">\\\"),o=this.tn.next(),!t.NAME.test(o))throw Error(\\\"illegal message field name: \\\"+o);s.name=o,this.tn.skip(\\\"=\\\"),s.id=n(this.tn.next()),\\\"[\\\"===(o=this.tn.peek())&&this._parseFieldOptions(s),this.tn.skip(\\\";\\\")}else if(\\\"group\\\"===(r=void 0!==r?r:this.tn.next())){if(a=this._parseMessage(e,s),!/^[A-Z]/.test(a.name))throw Error(\\\"illegal group name: \\\"+a.name);s.type=a.name,s.name=a.name.toLowerCase(),this.tn.omit(\\\";\\\")}else{if(!t.TYPE.test(r)&&!t.TYPEREF.test(r))throw Error(\\\"illegal message field type: \\\"+r);if(s.type=r,o=this.tn.next(),!t.NAME.test(o))throw Error(\\\"illegal message field name: \\\"+o);s.name=o,this.tn.skip(\\\"=\\\"),s.id=n(this.tn.next()),\\\"[\\\"===(o=this.tn.peek())&&this._parseFieldOptions(s),this.tn.skip(\\\";\\\")}return e.fields.push(s),s},o._parseMessageOneOf=function(e){var n,i,r,s=this.tn.next();if(!t.NAME.test(s))throw Error(\\\"illegal oneof name: \\\"+s);for(i=s,r=[],this.tn.skip(\\\"{\\\");\\\"}\\\"!==(s=this.tn.next());)(n=this._parseMessageField(e,\\\"optional\\\",s)).oneof=i,r.push(n.id);this.tn.omit(\\\";\\\"),e.oneofs[i]=r},o._parseFieldOptions=function(e){this.tn.skip(\\\"[\\\");for(var t=!0;\\\"]\\\"!==this.tn.peek();)t||this.tn.skip(\\\",\\\"),this._parseOption(e,!0),t=!1;this.tn.next()},o._parseEnum=function(e){var i,r={name:\\\"\\\",values:[],options:{}},s=this.tn.next();if(!t.NAME.test(s))throw Error(\\\"illegal name: \\\"+s);for(r.name=s,this.tn.skip(\\\"{\\\");\\\"}\\\"!==(s=this.tn.next());)if(\\\"option\\\"===s)this._parseOption(r);else{if(!t.NAME.test(s))throw Error(\\\"illegal name: \\\"+s);this.tn.skip(\\\"=\\\"),i={name:s,id:n(this.tn.next(),!0)},\\\"[\\\"===(s=this.tn.peek())&&this._parseFieldOptions({options:{}}),this.tn.skip(\\\";\\\"),r.values.push(i)}this.tn.omit(\\\";\\\"),e.enums.push(r)},o._parseExtensionRanges=function(){var t,n,r,s=[];do{for(n=[];;){switch(t=this.tn.next()){case\\\"min\\\":r=e.ID_MIN;break;case\\\"max\\\":r=e.ID_MAX;break;default:r=i(t)}if(n.push(r),2===n.length)break;if(\\\"to\\\"!==this.tn.peek()){n.push(r);break}this.tn.next()}s.push(n)}while(this.tn.omit(\\\",\\\"));return this.tn.skip(\\\";\\\"),s},o._parseExtend=function(e){var n,i=this.tn.next();if(!t.TYPEREF.test(i))throw Error(\\\"illegal extend reference: \\\"+i);for(n={ref:i,fields:[]},this.tn.skip(\\\"{\\\");\\\"}\\\"!==(i=this.tn.next());)if(t.RULE.test(i))this._parseMessageField(n,i);else{if(!t.TYPEREF.test(i))throw Error(\\\"illegal extend token: \\\"+i);if(!this.proto3)throw Error(\\\"illegal field rule: \\\"+i);this._parseMessageField(n,\\\"optional\\\",i)}return this.tn.omit(\\\";\\\"),e.messages.push(n),n},o.toString=function(){return\\\"Parser at line \\\"+this.tn.line},a.Parser=s,a}(r,r.Lang),r.Reflect=function(t){function i(e,n){if(e&&\\\"number\\\"==typeof e.low&&\\\"number\\\"==typeof e.high&&\\\"boolean\\\"==typeof e.unsigned&&e.low==e.low&&e.high==e.high)return new t.Long(e.low,e.high,void 0===n?e.unsigned:n);if(\\\"string\\\"==typeof e)return t.Long.fromString(e,n||!1,10);if(\\\"number\\\"==typeof e)return t.Long.fromNumber(e,n||!1);throw Error(\\\"not convertible to Long\\\")}function r(e,n){var i=n.readVarint32(),s=7&i,o=i>>>3;switch(s){case t.WIRE_TYPES.VARINT:do{i=n.readUint8()}while(128==(128&i));break;case t.WIRE_TYPES.BITS64:n.offset+=8;break;case t.WIRE_TYPES.LDELIM:i=n.readVarint32(),n.offset+=i;break;case t.WIRE_TYPES.STARTGROUP:r(o,n);break;case t.WIRE_TYPES.ENDGROUP:if(o===e)return!1;throw Error(\\\"Illegal GROUPEND after unknown group: \\\"+o+\\\" (\\\"+e+\\\" expected)\\\");case t.WIRE_TYPES.BITS32:n.offset+=4;break;default:throw Error(\\\"Illegal wire type in unknown group \\\"+e+\\\": \\\"+s)}return!0}var s,o,a,u,c,h,l,d,f,p,g,_,y,m,v,E,T={},I=function(e,t,n){this.builder=e,this.parent=t,this.name=n,this.className},C=I.prototype;return C.fqn=function(){for(var e=this.name,t=this;null!=(t=t.parent);)e=t.name+\\\".\\\"+e;return e},C.toString=function(e){return(e?this.className+\\\" \\\":\\\"\\\")+this.fqn()},C.build=function(){throw Error(this.toString(!0)+\\\" cannot be built directly\\\")},T.T=I,(o=(s=function(e,t,n,i,r){I.call(this,e,t,n),this.className=\\\"Namespace\\\",this.children=[],this.options=i||{},this.syntax=r||\\\"proto2\\\"}).prototype=Object.create(I.prototype)).getChildren=function(e){var t,n,i;if(null==(e=e||null))return this.children.slice();for(t=[],n=0,i=this.children.length;i>n;++n)this.children[n]instanceof e&&t.push(this.children[n]);return t},o.addChild=function(e){var t;if(t=this.getChild(e.name))if(t instanceof c.Field&&t.name!==t.originalName&&null===this.getChild(t.originalName))t.name=t.originalName;else{if(!(e instanceof c.Field&&e.name!==e.originalName&&null===this.getChild(e.originalName)))throw Error(\\\"Duplicate name in namespace \\\"+this.toString(!0)+\\\": \\\"+e.name);e.name=e.originalName}this.children.push(e)},o.getChild=function(e){var t,n,i=\\\"number\\\"==typeof e?\\\"id\\\":\\\"name\\\";for(t=0,n=this.children.length;n>t;++t)if(this.children[t][i]===e)return this.children[t];return null},o.resolve=function(e,t){var n,i=\\\"string\\\"==typeof e?e.split(\\\".\\\"):e,r=this,s=0;if(\\\"\\\"===i[s]){for(;null!==r.parent;)r=r.parent;s++}do{do{if(!(r instanceof T.Namespace)){r=null;break}if(!((n=r.getChild(i[s]))&&n instanceof T.T&&(!t||n instanceof T.Namespace))){r=null;break}r=n,s++}while(s<i.length);if(null!=r)break;if(null!==this.parent)return this.parent.resolve(e,t)}while(null!=r);return r},o.qn=function(e){var t,n,i=[],r=e;do{i.unshift(r.name),r=r.parent}while(null!==r);for(t=1;t<=i.length;t++)if(n=i.slice(i.length-t),e===this.resolve(n,e instanceof T.Namespace))return n.join(\\\".\\\");return e.fqn()},o.build=function(){var e,t,n,i={},r=this.children;for(t=0,n=r.length;n>t;++t)(e=r[t])instanceof s&&(i[e.name]=e.build());return Object.defineProperty&&Object.defineProperty(i,\\\"$options\\\",{value:this.buildOpt()}),i},o.buildOpt=function(){var e,t,n,i,r={},s=Object.keys(this.options);for(e=0,t=s.length;t>e;++e)n=s[e],i=this.options[s[e]],r[n]=i;return r},o.getOption=function(e){return void 0===e?this.options:void 0!==this.options[e]?this.options[e]:null},T.Namespace=s,u=(a=function(e,n,i,r){if(this.type=e,this.resolvedType=n,this.isMapKey=i,this.syntax=r,i&&t.MAP_KEY_TYPES.indexOf(e)<0)throw Error(\\\"Invalid map key type: \\\"+e.name)}).prototype,a.defaultFieldValue=function(e){if(\\\"string\\\"==typeof e&&(e=t.TYPES[e]),void 0===e.defaultValue)throw Error(\\\"default value for type \\\"+e.name+\\\" is not supported\\\");return e==t.TYPES.bytes?new n(0):e.defaultValue},u.verifyValue=function(n){var r,s,o,a=function(e,t){throw Error(\\\"Illegal value for \\\"+this.toString(!0)+\\\" of type \\\"+this.type.name+\\\": \\\"+e+\\\" (\\\"+t+\\\")\\\")}.bind(this);switch(this.type){case t.TYPES.int32:case t.TYPES.sint32:case t.TYPES.sfixed32:return(\\\"number\\\"!=typeof n||n==n&&n%1!=0)&&a(typeof n,\\\"not an integer\\\"),n>4294967295?0|n:n;case t.TYPES.uint32:case t.TYPES.fixed32:return(\\\"number\\\"!=typeof n||n==n&&n%1!=0)&&a(typeof n,\\\"not an integer\\\"),n<0?n>>>0:n;case t.TYPES.int64:case t.TYPES.sint64:case t.TYPES.sfixed64:if(t.Long)try{return i(n,!1)}catch(e){a(typeof n,e.message)}else a(typeof n,\\\"requires Long.js\\\");case t.TYPES.uint64:case t.TYPES.fixed64:if(t.Long)try{return i(n,!0)}catch(e){a(typeof n,e.message)}else a(typeof n,\\\"requires Long.js\\\");case t.TYPES.bool:return\\\"boolean\\\"!=typeof n&&a(typeof n,\\\"not a boolean\\\"),n;case t.TYPES.float:case t.TYPES.double:return\\\"number\\\"!=typeof n&&a(typeof n,\\\"not a number\\\"),n;case t.TYPES.string:return\\\"string\\\"==typeof n||n&&n instanceof String||a(typeof n,\\\"not a string\\\"),\\\"\\\"+n;case t.TYPES.bytes:return e.isByteBuffer(n)?n:e.wrap(n);case t.TYPES.enum:for(r=this.resolvedType.getChildren(t.Reflect.Enum.Value),o=0;o<r.length;o++){if(r[o].name==n)return r[o].id;if(r[o].id==n)return r[o].id}if(\\\"proto3\\\"===this.syntax)return(\\\"number\\\"!=typeof n||n==n&&n%1!=0)&&a(typeof n,\\\"not an integer\\\"),(n>4294967295||n<0)&&a(typeof n,\\\"not in range for uint32\\\"),n;a(n,\\\"not a valid enum value\\\");case t.TYPES.group:case t.TYPES.message:if(n&&\\\"object\\\"==typeof n||a(typeof n,\\\"object expected\\\"),n instanceof this.resolvedType.clazz)return n;if(n instanceof t.Builder.Message){for(o in s={},n)n.hasOwnProperty(o)&&(s[o]=n[o]);n=s}return new this.resolvedType.clazz(n)}throw Error(\\\"[INTERNAL] Illegal value for \\\"+this.toString(!0)+\\\": \\\"+n+\\\" (undefined type \\\"+this.type+\\\")\\\")},u.calculateLength=function(e,i){if(null===i)return 0;var r;switch(this.type){case t.TYPES.int32:return i<0?n.calculateVarint64(i):n.calculateVarint32(i);case t.TYPES.uint32:return n.calculateVarint32(i);case t.TYPES.sint32:return n.calculateVarint32(n.zigZagEncode32(i));case t.TYPES.fixed32:case t.TYPES.sfixed32:case t.TYPES.float:return 4;case t.TYPES.int64:case t.TYPES.uint64:return n.calculateVarint64(i);case t.TYPES.sint64:return n.calculateVarint64(n.zigZagEncode64(i));case t.TYPES.fixed64:case t.TYPES.sfixed64:return 8;case t.TYPES.bool:return 1;case t.TYPES.enum:return n.calculateVarint32(i);case t.TYPES.double:return 8;case t.TYPES.string:return r=n.calculateUTF8Bytes(i),n.calculateVarint32(r)+r;case t.TYPES.bytes:if(i.remaining()<0)throw Error(\\\"Illegal value for \\\"+this.toString(!0)+\\\": \\\"+i.remaining()+\\\" bytes remaining\\\");return n.calculateVarint32(i.remaining())+i.remaining();case t.TYPES.message:return r=this.resolvedType.calculate(i),n.calculateVarint32(r)+r;case t.TYPES.group:return(r=this.resolvedType.calculate(i))+n.calculateVarint32(e<<3|t.WIRE_TYPES.ENDGROUP)}throw Error(\\\"[INTERNAL] Illegal value to encode in \\\"+this.toString(!0)+\\\": \\\"+i+\\\" (unknown type)\\\")},u.encodeValue=function(e,i,r){var s,o;if(null===i)return r;switch(this.type){case t.TYPES.int32:i<0?r.writeVarint64(i):r.writeVarint32(i);break;case t.TYPES.uint32:r.writeVarint32(i);break;case t.TYPES.sint32:r.writeVarint32ZigZag(i);break;case t.TYPES.fixed32:r.writeUint32(i);break;case t.TYPES.sfixed32:r.writeInt32(i);break;case t.TYPES.int64:case t.TYPES.uint64:r.writeVarint64(i);break;case t.TYPES.sint64:r.writeVarint64ZigZag(i);break;case t.TYPES.fixed64:r.writeUint64(i);break;case t.TYPES.sfixed64:r.writeInt64(i);break;case t.TYPES.bool:\\\"string\\\"==typeof i?r.writeVarint32(\\\"false\\\"===i.toLowerCase()?0:!!i):r.writeVarint32(i?1:0);break;case t.TYPES.enum:r.writeVarint32(i);break;case t.TYPES.float:r.writeFloat32(i);break;case t.TYPES.double:r.writeFloat64(i);break;case t.TYPES.string:r.writeVString(i);break;case t.TYPES.bytes:if(i.remaining()<0)throw Error(\\\"Illegal value for \\\"+this.toString(!0)+\\\": \\\"+i.remaining()+\\\" bytes remaining\\\");s=i.offset,r.writeVarint32(i.remaining()),r.append(i),i.offset=s;break;case t.TYPES.message:o=(new n).LE(),this.resolvedType.encode(i,o),r.writeVarint32(o.offset),r.append(o.flip());break;case t.TYPES.group:this.resolvedType.encode(i,r),r.writeVarint32(e<<3|t.WIRE_TYPES.ENDGROUP);break;default:throw Error(\\\"[INTERNAL] Illegal value to encode in \\\"+this.toString(!0)+\\\": \\\"+i+\\\" (unknown type)\\\")}return r},u.decode=function(e,n,i){if(n!=this.type.wireType)throw Error(\\\"Unexpected wire type for element\\\");var r,s;switch(this.type){case t.TYPES.int32:return 0|e.readVarint32();case t.TYPES.uint32:return e.readVarint32()>>>0;case t.TYPES.sint32:return 0|e.readVarint32ZigZag();case t.TYPES.fixed32:return e.readUint32()>>>0;case t.TYPES.sfixed32:return 0|e.readInt32();case t.TYPES.int64:return e.readVarint64();case t.TYPES.uint64:return e.readVarint64().toUnsigned();case t.TYPES.sint64:return e.readVarint64ZigZag();case t.TYPES.fixed64:return e.readUint64();case t.TYPES.sfixed64:return e.readInt64();case t.TYPES.bool:return!!e.readVarint32();case t.TYPES.enum:return e.readVarint32();case t.TYPES.float:return e.readFloat();case t.TYPES.double:return e.readDouble();case t.TYPES.string:return e.readVString();case t.TYPES.bytes:if(s=e.readVarint32(),e.remaining()<s)throw Error(\\\"Illegal number of bytes for \\\"+this.toString(!0)+\\\": \\\"+s+\\\" required but got only \\\"+e.remaining());return(r=e.clone()).limit=r.offset+s,e.offset+=s,r;case t.TYPES.message:return s=e.readVarint32(),this.resolvedType.decode(e,s);case t.TYPES.group:return this.resolvedType.decode(e,-1,i)}throw Error(\\\"[INTERNAL] Illegal decode type\\\")},u.valueFromString=function(e){if(!this.isMapKey)throw Error(\\\"valueFromString() called on non-map-key element\\\");switch(this.type){case t.TYPES.int32:case t.TYPES.sint32:case t.TYPES.sfixed32:case t.TYPES.uint32:case t.TYPES.fixed32:return this.verifyValue(parseInt(e));case t.TYPES.int64:case t.TYPES.sint64:case t.TYPES.sfixed64:case t.TYPES.uint64:case t.TYPES.fixed64:return this.verifyValue(e);case t.TYPES.bool:return\\\"true\\\"===e;case t.TYPES.string:return this.verifyValue(e);case t.TYPES.bytes:return n.fromBinary(e)}},u.valueToString=function(e){if(!this.isMapKey)throw Error(\\\"valueToString() called on non-map-key element\\\");return this.type===t.TYPES.bytes?e.toString(\\\"binary\\\"):e.toString()},T.Element=a,(h=(c=function(e,t,n,i,r,o){s.call(this,e,t,n,i,o),this.className=\\\"Message\\\",this.extensions=void 0,this.clazz=null,this.isGroup=!!r,this._fields=null,this._fieldsById=null,this._fieldsByName=null}).prototype=Object.create(s.prototype)).build=function(i){var r,s,o,a;if(this.clazz&&!i)return this.clazz;for(r=function(t,i){function r(e,i,s,o){var a,u,c,h,l,d,f;if(null===e||\\\"object\\\"!=typeof e)return o&&o instanceof t.Reflect.Enum&&null!==(a=t.Reflect.Enum.getName(o.object,e))?a:e;if(n.isByteBuffer(e))return i?e.toBase64():e.toBuffer();if(t.Long.isLong(e))return s?e.toString():t.Long.fromValue(e);if(Array.isArray(e))return u=[],e.forEach((function(e,t){u[t]=r(e,i,s,o)})),u;if(u={},e instanceof t.Map){for(h=(c=e.entries()).next();!h.done;h=c.next())u[e.keyElem.valueToString(h.value[0])]=r(h.value[1],i,s,e.valueElem.resolvedType);return u}for(f in l=e.$type,d=void 0,e)e.hasOwnProperty(f)&&(u[f]=l&&(d=l.getChild(f))?r(e[f],i,s,d.resolvedType):r(e[f],i,s));return u}var s,o,a=i.getChildren(t.Reflect.Message.Field),u=i.getChildren(t.Reflect.Message.OneOf),c=function(e){var r,s,o,h;for(t.Builder.Message.call(this),r=0,s=u.length;s>r;++r)this[u[r].name]=null;for(r=0,s=a.length;s>r;++r)this[(o=a[r]).name]=o.repeated?[]:o.map?new t.Map(o):null,!o.required&&\\\"proto3\\\"!==i.syntax||null===o.defaultValue||(this[o.name]=o.defaultValue);if(arguments.length>0)if(1!==arguments.length||null===e||\\\"object\\\"!=typeof e||!(\\\"function\\\"!=typeof e.encode||e instanceof c)||Array.isArray(e)||e instanceof t.Map||n.isByteBuffer(e)||e instanceof ArrayBuffer||t.Long&&e instanceof t.Long)for(r=0,s=arguments.length;s>r;++r)void 0!==(h=arguments[r])&&this.$set(a[r].name,h);else this.$set(e)},h=c.prototype=Object.create(t.Builder.Message.prototype);for(h.add=function(e,n,r){var s=i._fieldsByName[e];if(!r){if(!s)throw Error(this+\\\"#\\\"+e+\\\" is undefined\\\");if(!(s instanceof t.Reflect.Message.Field))throw Error(this+\\\"#\\\"+e+\\\" is not a field: \\\"+s.toString(!0));if(!s.repeated)throw Error(this+\\\"#\\\"+e+\\\" is not a repeated field\\\");n=s.verifyValue(n,!0)}return null===this[e]&&(this[e]=[]),this[e].push(n),this},h.$add=h.add,h.set=function(e,n,r){var s,o,a;if(e&&\\\"object\\\"==typeof e){for(s in r=n,e)e.hasOwnProperty(s)&&void 0!==(n=e[s])&&this.$set(s,n,r);return this}if(o=i._fieldsByName[e],r)this[e]=n;else{if(!o)throw Error(this+\\\"#\\\"+e+\\\" is not a field: undefined\\\");if(!(o instanceof t.Reflect.Message.Field))throw Error(this+\\\"#\\\"+e+\\\" is not a field: \\\"+o.toString(!0));this[o.name]=n=o.verifyValue(n)}return o&&o.oneof&&(a=this[o.oneof.name],null!==n?(null!==a&&a!==o.name&&(this[a]=null),this[o.oneof.name]=o.name):a===e&&(this[o.oneof.name]=null)),this},h.$set=h.set,h.get=function(e,n){if(n)return this[e];var r=i._fieldsByName[e];if(!(r&&r instanceof t.Reflect.Message.Field))throw Error(this+\\\"#\\\"+e+\\\" is not a field: undefined\\\");if(!(r instanceof t.Reflect.Message.Field))throw Error(this+\\\"#\\\"+e+\\\" is not a field: \\\"+r.toString(!0));return this[r.name]},h.$get=h.get,s=0;s<a.length;s++)(o=a[s])instanceof t.Reflect.Message.ExtensionField||i.builder.options.populateAccessors&&function(e){var t,n,r,s=e.originalName.replace(/(_[a-zA-Z])/g,(function(e){return e.toUpperCase().replace(\\\"_\\\",\\\"\\\")}));s=s.substring(0,1).toUpperCase()+s.substring(1),t=e.originalName.replace(/([A-Z])/g,(function(e){return\\\"_\\\"+e})),n=function(t,n){return this[e.name]=n?t:e.verifyValue(t),this},r=function(){return this[e.name]},null===i.getChild(\\\"set\\\"+s)&&(h[\\\"set\\\"+s]=n),null===i.getChild(\\\"set_\\\"+t)&&(h[\\\"set_\\\"+t]=n),null===i.getChild(\\\"get\\\"+s)&&(h[\\\"get\\\"+s]=r),null===i.getChild(\\\"get_\\\"+t)&&(h[\\\"get_\\\"+t]=r)}(o);return h.encode=function(t,n){var r,s;\\\"boolean\\\"==typeof t&&(n=t,t=void 0),r=!1,t||(t=new e,r=!0),s=t.littleEndian;try{return i.encode(this,t.LE(),n),(r?t.flip():t).LE(s)}catch(e){throw t.LE(s),e}},c.encode=function(e,t,n){return new c(e).encode(t,n)},h.calculate=function(){return i.calculate(this)},h.encodeDelimited=function(e){var t,r=!1;return e||(e=new n,r=!0),t=(new n).LE(),i.encode(this,t).flip(),e.writeVarint32(t.remaining()),e.append(t),r?e.flip():e},h.encodeAB=function(){try{return this.encode().toArrayBuffer()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toArrayBuffer()),e}},h.toArrayBuffer=h.encodeAB,h.encodeNB=function(){try{return this.encode().toBuffer()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toBuffer()),e}},h.toBuffer=h.encodeNB,h.encode64=function(){try{return this.encode().toBase64()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toBase64()),e}},h.toBase64=h.encode64,h.encodeHex=function(){try{return this.encode().toHex()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toHex()),e}},h.toHex=h.encodeHex,h.toRaw=function(e,t){return r(this,!!e,!!t,this.$type)},h.encodeJSON=function(){return JSON.stringify(r(this,!0,!0,this.$type))},c.decode=function(e,t){var r,s;\\\"string\\\"==typeof e&&(e=n.wrap(e,t||\\\"base64\\\")),r=(e=n.isByteBuffer(e)?e:n.wrap(e)).littleEndian;try{return s=i.decode(e.LE()),e.LE(r),s}catch(t){throw e.LE(r),t}},c.decodeDelimited=function(e,t){var r,s,o;if(\\\"string\\\"==typeof e&&(e=n.wrap(e,t||\\\"base64\\\")),(e=n.isByteBuffer(e)?e:n.wrap(e)).remaining()<1)return null;if(r=e.offset,s=e.readVarint32(),e.remaining()<s)return e.offset=r,null;try{return o=i.decode(e.slice(e.offset,e.offset+s).LE()),e.offset+=s,o}catch(t){throw e.offset+=s,t}},c.decode64=function(e){return c.decode(e,\\\"base64\\\")},c.decodeHex=function(e){return c.decode(e,\\\"hex\\\")},c.decodeJSON=function(e){return new c(JSON.parse(e))},h.toString=function(){return i.toString()},Object.defineProperty&&(Object.defineProperty(c,\\\"$options\\\",{value:i.buildOpt()}),Object.defineProperty(h,\\\"$options\\\",{value:c.$options}),Object.defineProperty(c,\\\"$type\\\",{value:i}),Object.defineProperty(h,\\\"$type\\\",{value:i})),c}(t,this),this._fields=[],this._fieldsById={},this._fieldsByName={},o=0,a=this.children.length;a>o;o++)if((s=this.children[o])instanceof g||s instanceof c||s instanceof m){if(r.hasOwnProperty(s.name))throw Error(\\\"Illegal reflect child of \\\"+this.toString(!0)+\\\": \\\"+s.toString(!0)+\\\" cannot override static property '\\\"+s.name+\\\"'\\\");r[s.name]=s.build()}else if(s instanceof c.Field)s.build(),this._fields.push(s),this._fieldsById[s.id]=s,this._fieldsByName[s.name]=s;else if(!(s instanceof c.OneOf||s instanceof y))throw Error(\\\"Illegal reflect child of \\\"+this.toString(!0)+\\\": \\\"+this.children[o].toString(!0));return this.clazz=r},h.encode=function(e,t,n){var i,r,s,o,a,u=null;for(s=0,o=this._fields.length;o>s;++s)r=e[(i=this._fields[s]).name],i.required&&null===r?null===u&&(u=i):i.encode(n?r:i.verifyValue(r),t,e);if(null!==u)throw(a=Error(\\\"Missing at least one required field for \\\"+this.toString(!0)+\\\": \\\"+u)).encoded=t,a;return t},h.calculate=function(e){for(var t,n,i=0,r=0,s=this._fields.length;s>r;++r){if(n=e[(t=this._fields[r]).name],t.required&&null===n)throw Error(\\\"Missing at least one required field for \\\"+this.toString(!0)+\\\": \\\"+t);i+=t.calculate(n,e)}return i},h.decode=function(e,n,i){var s,o,a,u,c,h,l,d,f,p,g,_;for(n=\\\"number\\\"==typeof n?n:-1,c=e.offset,h=new this.clazz;e.offset<c+n||-1===n&&e.remaining()>0;){if(a=(s=e.readVarint32())>>>3,(o=7&s)===t.WIRE_TYPES.ENDGROUP){if(a!==i)throw Error(\\\"Illegal group end indicator for \\\"+this.toString(!0)+\\\": \\\"+a+\\\" (\\\"+(i?i+\\\" expected\\\":\\\"not a group\\\")+\\\")\\\");break}if(u=this._fieldsById[a])u.repeated&&!u.options.packed?h[u.name].push(u.decode(o,e)):u.map?(d=u.decode(o,e),h[u.name].set(d[0],d[1])):(h[u.name]=u.decode(o,e),u.oneof&&(null!==(f=h[u.oneof.name])&&f!==u.name&&(h[f]=null),h[u.oneof.name]=u.name));else switch(o){case t.WIRE_TYPES.VARINT:e.readVarint32();break;case t.WIRE_TYPES.BITS32:e.offset+=4;break;case t.WIRE_TYPES.BITS64:e.offset+=8;break;case t.WIRE_TYPES.LDELIM:l=e.readVarint32(),e.offset+=l;break;case t.WIRE_TYPES.STARTGROUP:for(;r(a,e););break;default:throw Error(\\\"Illegal wire type for unknown field \\\"+a+\\\" in \\\"+this.toString(!0)+\\\"#decode: \\\"+o)}}for(p=0,g=this._fields.length;g>p;++p)if(null===h[(u=this._fields[p]).name])if(\\\"proto3\\\"===this.syntax)h[u.name]=u.defaultValue;else{if(u.required)throw(_=Error(\\\"Missing at least one required field for \\\"+this.toString(!0)+\\\": \\\"+u.name)).decoded=h,_;t.populateDefaults&&null!==u.defaultValue&&(h[u.name]=u.defaultValue)}return h},T.Message=c,(d=(l=function(e,n,i,r,s,o,a,u,h,l){I.call(this,e,n,o),this.className=\\\"Message.Field\\\",this.required=\\\"required\\\"===i,this.repeated=\\\"repeated\\\"===i,this.map=\\\"map\\\"===i,this.keyType=r||null,this.type=s,this.resolvedType=null,this.id=a,this.options=u||{},this.defaultValue=null,this.oneof=h||null,this.syntax=l||\\\"proto2\\\",this.originalName=this.name,this.element=null,this.keyElement=null,!this.builder.options.convertFieldsToCamelCase||this instanceof c.ExtensionField||(this.name=t.Util.toCamelCase(this.name))}).prototype=Object.create(I.prototype)).build=function(){this.element=new a(this.type,this.resolvedType,!1,this.syntax),this.map&&(this.keyElement=new a(this.keyType,void 0,!0,this.syntax)),\\\"proto3\\\"!==this.syntax||this.repeated||this.map?void 0!==this.options.default&&(this.defaultValue=this.verifyValue(this.options.default)):this.defaultValue=a.defaultFieldValue(this.type)},d.verifyValue=function(e,n){var i,r,s;if(n=n||!1,i=function(e,t){throw Error(\\\"Illegal value for \\\"+this.toString(!0)+\\\" of type \\\"+this.type.name+\\\": \\\"+e+\\\" (\\\"+t+\\\")\\\")}.bind(this),null===e)return this.required&&i(typeof e,\\\"required\\\"),\\\"proto3\\\"===this.syntax&&this.type!==t.TYPES.message&&i(typeof e,\\\"proto3 field without field presence cannot be null\\\"),null;if(this.repeated&&!n){for(Array.isArray(e)||(e=[e]),s=[],r=0;r<e.length;r++)s.push(this.element.verifyValue(e[r]));return s}return this.map&&!n?e instanceof t.Map?e:(e instanceof Object||i(typeof e,\\\"expected ProtoBuf.Map or raw object for map field\\\"),new t.Map(this,e)):(!this.repeated&&Array.isArray(e)&&i(typeof e,\\\"no array expected\\\"),this.element.verifyValue(e))},d.hasWirePresence=function(e,n){if(\\\"proto3\\\"!==this.syntax)return null!==e;if(this.oneof&&n[this.oneof.name]===this.name)return!0;switch(this.type){case t.TYPES.int32:case t.TYPES.sint32:case t.TYPES.sfixed32:case t.TYPES.uint32:case t.TYPES.fixed32:return 0!==e;case t.TYPES.int64:case t.TYPES.sint64:case t.TYPES.sfixed64:case t.TYPES.uint64:case t.TYPES.fixed64:return 0!==e.low||0!==e.high;case t.TYPES.bool:return e;case t.TYPES.float:case t.TYPES.double:return 0!==e;case t.TYPES.string:return e.length>0;case t.TYPES.bytes:return e.remaining()>0;case t.TYPES.enum:return 0!==e;case t.TYPES.message:return null!==e;default:return!0}},d.encode=function(e,i,r){var s,o,a,u,c;if(null===this.type||\\\"object\\\"!=typeof this.type)throw Error(\\\"[INTERNAL] Unresolved type in \\\"+this.toString(!0)+\\\": \\\"+this.type);if(null===e||this.repeated&&0==e.length)return i;try{if(this.repeated)if(this.options.packed&&t.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0){for(i.writeVarint32(this.id<<3|t.WIRE_TYPES.LDELIM),i.ensureCapacity(i.offset+=1),o=i.offset,s=0;s<e.length;s++)this.element.encodeValue(this.id,e[s],i);a=i.offset-o,(u=n.calculateVarint32(a))>1&&(c=i.slice(o,i.offset),o+=u-1,i.offset=o,i.append(c)),i.writeVarint32(a,o-u)}else for(s=0;s<e.length;s++)i.writeVarint32(this.id<<3|this.type.wireType),this.element.encodeValue(this.id,e[s],i);else this.map?e.forEach((function(e,r){var s=n.calculateVarint32(8|this.keyType.wireType)+this.keyElement.calculateLength(1,r)+n.calculateVarint32(16|this.type.wireType)+this.element.calculateLength(2,e);i.writeVarint32(this.id<<3|t.WIRE_TYPES.LDELIM),i.writeVarint32(s),i.writeVarint32(8|this.keyType.wireType),this.keyElement.encodeValue(1,r,i),i.writeVarint32(16|this.type.wireType),this.element.encodeValue(2,e,i)}),this):this.hasWirePresence(e,r)&&(i.writeVarint32(this.id<<3|this.type.wireType),this.element.encodeValue(this.id,e,i))}catch(t){throw Error(\\\"Illegal value for \\\"+this.toString(!0)+\\\": \\\"+e+\\\" (\\\"+t+\\\")\\\")}return i},d.calculate=function(e,i){var r,s,o;if(e=this.verifyValue(e),null===this.type||\\\"object\\\"!=typeof this.type)throw Error(\\\"[INTERNAL] Unresolved type in \\\"+this.toString(!0)+\\\": \\\"+this.type);if(null===e||this.repeated&&0==e.length)return 0;r=0;try{if(this.repeated)if(this.options.packed&&t.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0){for(r+=n.calculateVarint32(this.id<<3|t.WIRE_TYPES.LDELIM),o=0,s=0;s<e.length;s++)o+=this.element.calculateLength(this.id,e[s]);r+=n.calculateVarint32(o),r+=o}else for(s=0;s<e.length;s++)r+=n.calculateVarint32(this.id<<3|this.type.wireType),r+=this.element.calculateLength(this.id,e[s]);else this.map?e.forEach((function(e,i){var s=n.calculateVarint32(8|this.keyType.wireType)+this.keyElement.calculateLength(1,i)+n.calculateVarint32(16|this.type.wireType)+this.element.calculateLength(2,e);r+=n.calculateVarint32(this.id<<3|t.WIRE_TYPES.LDELIM),r+=n.calculateVarint32(s),r+=s}),this):this.hasWirePresence(e,i)&&(r+=n.calculateVarint32(this.id<<3|this.type.wireType),r+=this.element.calculateLength(this.id,e))}catch(t){throw Error(\\\"Illegal value for \\\"+this.toString(!0)+\\\": \\\"+e+\\\" (\\\"+t+\\\")\\\")}return r},d.decode=function(e,n,i){var r,s,o,u,c,h,l;if(!(!this.map&&e==this.type.wireType||!i&&this.repeated&&this.options.packed&&e==t.WIRE_TYPES.LDELIM||this.map&&e==t.WIRE_TYPES.LDELIM))throw Error(\\\"Illegal wire type for field \\\"+this.toString(!0)+\\\": \\\"+e+\\\" (\\\"+this.type.wireType+\\\" expected)\\\");if(e==t.WIRE_TYPES.LDELIM&&this.repeated&&this.options.packed&&t.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0&&!i){for(s=n.readVarint32(),s=n.offset+s,o=[];n.offset<s;)o.push(this.decode(this.type.wireType,n,!0));return o}if(this.map){if(u=a.defaultFieldValue(this.keyType),r=a.defaultFieldValue(this.type),s=n.readVarint32(),n.remaining()<s)throw Error(\\\"Illegal number of bytes for \\\"+this.toString(!0)+\\\": \\\"+s+\\\" required but got only \\\"+n.remaining());for((c=n.clone()).limit=c.offset+s,n.offset+=s;c.remaining()>0;)if(e=7&(h=c.readVarint32()),1==(l=h>>>3))u=this.keyElement.decode(c,e,l);else{if(2!==l)throw Error(\\\"Unexpected tag in map field key/value submessage\\\");r=this.element.decode(c,e,l)}return[u,r]}return this.element.decode(n,e,this.id)},T.Message.Field=l,(f=function(e,t,n,i,r,s,o){l.call(this,e,t,n,null,i,r,s,o),this.extension}).prototype=Object.create(l.prototype),T.Message.ExtensionField=f,p=function(e,t,n){I.call(this,e,t,n),this.fields=[]},T.Message.OneOf=p,(g=function(e,t,n,i,r){s.call(this,e,t,n,i,r),this.className=\\\"Enum\\\",this.object=null}).getName=function(e,t){var n,i,r=Object.keys(e);for(i=0;i<r.length;++i)if(e[n=r[i]]===t)return n;return null},(g.prototype=Object.create(s.prototype)).build=function(e){var n,i,r,s;if(this.object&&!e)return this.object;for(n=new t.Builder.Enum,r=0,s=(i=this.getChildren(g.Value)).length;s>r;++r)n[i[r].name]=i[r].id;return Object.defineProperty&&Object.defineProperty(n,\\\"$options\\\",{value:this.buildOpt(),enumerable:!1}),this.object=n},T.Enum=g,(_=function(e,t,n,i){I.call(this,e,t,n),this.className=\\\"Enum.Value\\\",this.id=i}).prototype=Object.create(I.prototype),T.Enum.Value=_,(y=function(e,t,n,i){I.call(this,e,t,n),this.field=i}).prototype=Object.create(I.prototype),T.Extension=y,((m=function(e,t,n,i){s.call(this,e,t,n,i),this.className=\\\"Service\\\",this.clazz=null}).prototype=Object.create(s.prototype)).build=function(e){return this.clazz&&!e?this.clazz:this.clazz=function(e,t){var i,r=function(t){e.Builder.Service.call(this),this.rpcImpl=t||function(e,t,n){setTimeout(n.bind(this,Error(\\\"Not implemented, see: https://github.com/dcodeIO/ProtoBuf.js/wiki/Services\\\")),0)}},s=r.prototype=Object.create(e.Builder.Service.prototype),o=t.getChildren(e.Reflect.Service.RPCMethod);for(i=0;i<o.length;i++)!function(e){s[e.name]=function(i,r){try{try{i=e.resolvedRequestType.clazz.decode(n.wrap(i))}catch(e){if(!(e instanceof TypeError))throw e}if(null===i||\\\"object\\\"!=typeof i)throw Error(\\\"Illegal arguments\\\");i instanceof e.resolvedRequestType.clazz||(i=new e.resolvedRequestType.clazz(i)),this.rpcImpl(e.fqn(),i,(function(n,i){if(!n){try{i=e.resolvedResponseType.clazz.decode(i)}catch(e){}return i&&i instanceof e.resolvedResponseType.clazz?void r(null,i):void r(Error(\\\"Illegal response type received in service method \\\"+t.name+\\\"#\\\"+e.name))}r(n)}))}catch(e){setTimeout(r.bind(this,e),0)}},r[e.name]=function(t,n,i){new r(t)[e.name](n,i)},Object.defineProperty&&(Object.defineProperty(r[e.name],\\\"$options\\\",{value:e.buildOpt()}),Object.defineProperty(s[e.name],\\\"$options\\\",{value:r[e.name].$options}))}(o[i]);return Object.defineProperty&&(Object.defineProperty(r,\\\"$options\\\",{value:t.buildOpt()}),Object.defineProperty(s,\\\"$options\\\",{value:r.$options}),Object.defineProperty(r,\\\"$type\\\",{value:t}),Object.defineProperty(s,\\\"$type\\\",{value:t})),r}(t,this)},T.Service=m,((v=function(e,t,n,i){I.call(this,e,t,n),this.className=\\\"Service.Method\\\",this.options=i||{}}).prototype=Object.create(I.prototype)).buildOpt=o.buildOpt,T.Service.Method=v,(E=function(e,t,n,i,r,s,o,a){v.call(this,e,t,n,a),this.className=\\\"Service.RPCMethod\\\",this.requestName=i,this.responseName=r,this.requestStream=s,this.responseStream=o,this.resolvedRequestType=null,this.resolvedResponseType=null}).prototype=Object.create(v.prototype),T.Service.RPCMethod=E,T}(r),r.Builder=function(e,t,n){function i(e){e.messages&&e.messages.forEach((function(t){t.syntax=e.syntax,i(t)})),e.enums&&e.enums.forEach((function(t){t.syntax=e.syntax}))}var r=function(e){this.ns=new n.Namespace(this,null,\\\"\\\"),this.ptr=this.ns,this.resolved=!1,this.result=null,this.files={},this.importRoot=null,this.options=e||{}},s=r.prototype;return r.isMessage=function(e){return\\\"string\\\"==typeof e.name&&void 0===e.values&&void 0===e.rpc},r.isMessageField=function(e){return\\\"string\\\"==typeof e.rule&&\\\"string\\\"==typeof e.name&&\\\"string\\\"==typeof e.type&&void 0!==e.id},r.isEnum=function(e){return\\\"string\\\"==typeof e.name&&!(void 0===e.values||!Array.isArray(e.values)||0===e.values.length)},r.isService=function(e){return!(\\\"string\\\"!=typeof e.name||\\\"object\\\"!=typeof e.rpc||!e.rpc)},r.isExtend=function(e){return\\\"string\\\"==typeof e.ref},s.reset=function(){return this.ptr=this.ns,this},s.define=function(e){if(\\\"string\\\"!=typeof e||!t.TYPEREF.test(e))throw Error(\\\"illegal namespace: \\\"+e);return e.split(\\\".\\\").forEach((function(e){var t=this.ptr.getChild(e);null===t&&this.ptr.addChild(t=new n.Namespace(this,this.ptr,e)),this.ptr=t}),this),this},s.create=function(t){var i,s,o,a,u;if(!t)return this;if(Array.isArray(t)){if(0===t.length)return this;t=t.slice()}else t=[t];for(i=[t];i.length>0;){if(t=i.pop(),!Array.isArray(t))throw Error(\\\"not a valid namespace: \\\"+JSON.stringify(t));for(;t.length>0;){if(s=t.shift(),r.isMessage(s)){if(o=new n.Message(this,this.ptr,s.name,s.options,s.isGroup,s.syntax),a={},s.oneofs&&Object.keys(s.oneofs).forEach((function(e){o.addChild(a[e]=new n.Message.OneOf(this,o,e))}),this),s.fields&&s.fields.forEach((function(e){if(null!==o.getChild(0|e.id))throw Error(\\\"duplicate or invalid field id in \\\"+o.name+\\\": \\\"+e.id);if(e.options&&\\\"object\\\"!=typeof e.options)throw Error(\\\"illegal field options in \\\"+o.name+\\\"#\\\"+e.name);var t=null;if(\\\"string\\\"==typeof e.oneof&&!(t=a[e.oneof]))throw Error(\\\"illegal oneof in \\\"+o.name+\\\"#\\\"+e.name+\\\": \\\"+e.oneof);e=new n.Message.Field(this,o,e.rule,e.keytype,e.type,e.name,e.id,e.options,t,s.syntax),t&&t.fields.push(e),o.addChild(e)}),this),u=[],s.enums&&s.enums.forEach((function(e){u.push(e)})),s.messages&&s.messages.forEach((function(e){u.push(e)})),s.services&&s.services.forEach((function(e){u.push(e)})),s.extensions&&(o.extensions=\\\"number\\\"==typeof s.extensions[0]?[s.extensions]:s.extensions),this.ptr.addChild(o),u.length>0){i.push(t),t=u,u=null,this.ptr=o,o=null;continue}u=null}else if(r.isEnum(s))o=new n.Enum(this,this.ptr,s.name,s.options,s.syntax),s.values.forEach((function(e){o.addChild(new n.Enum.Value(this,o,e.name,e.id))}),this),this.ptr.addChild(o);else if(r.isService(s))o=new n.Service(this,this.ptr,s.name,s.options),Object.keys(s.rpc).forEach((function(e){var t=s.rpc[e];o.addChild(new n.Service.RPCMethod(this,o,e,t.request,t.response,!!t.request_stream,!!t.response_stream,t.options))}),this),this.ptr.addChild(o);else{if(!r.isExtend(s))throw Error(\\\"not a valid definition: \\\"+JSON.stringify(s));if(o=this.ptr.resolve(s.ref,!0))s.fields.forEach((function(t){var i,r,s,a;if(null!==o.getChild(0|t.id))throw Error(\\\"duplicate extended field id in \\\"+o.name+\\\": \\\"+t.id);if(o.extensions&&(i=!1,o.extensions.forEach((function(e){t.id>=e[0]&&t.id<=e[1]&&(i=!0)})),!i))throw Error(\\\"illegal extended field id in \\\"+o.name+\\\": \\\"+t.id+\\\" (not within valid ranges)\\\");r=t.name,this.options.convertFieldsToCamelCase&&(r=e.Util.toCamelCase(r)),s=new n.Message.ExtensionField(this,o,t.rule,t.type,this.ptr.fqn()+\\\".\\\"+r,t.id,t.options),a=new n.Extension(this,this.ptr,t.name,s),s.extension=a,this.ptr.addChild(a),o.addChild(s)}),this);else if(!/\\\\.?google\\\\.protobuf\\\\./.test(s.ref))throw Error(\\\"extended message \\\"+s.ref+\\\" is not defined\\\")}s=null,o=null}t=null,this.ptr=this.ptr.parent}return this.resolved=!1,this.result=null,this},s.import=function(t,n){var r,s,o,a,u,c,h,l,d=\\\"/\\\";if(\\\"string\\\"==typeof n){if(e.Util.IS_NODE,!0===this.files[n])return this.reset();this.files[n]=!0}else if(\\\"object\\\"==typeof n){if(r=n.root,e.Util.IS_NODE,(r.indexOf(\\\"\\\\\\\\\\\")>=0||n.file.indexOf(\\\"\\\\\\\\\\\")>=0)&&(d=\\\"\\\\\\\\\\\"),s=r+d+n.file,!0===this.files[s])return this.reset();this.files[s]=!0}if(t.imports&&t.imports.length>0){for(a=!1,\\\"object\\\"==typeof n?(this.importRoot=n.root,a=!0,o=this.importRoot,n=n.file,(o.indexOf(\\\"\\\\\\\\\\\")>=0||n.indexOf(\\\"\\\\\\\\\\\")>=0)&&(d=\\\"\\\\\\\\\\\")):\\\"string\\\"==typeof n?this.importRoot?o=this.importRoot:n.indexOf(\\\"/\\\")>=0?\\\"\\\"===(o=n.replace(/\\\\/[^\\\\/]*$/,\\\"\\\"))&&(o=\\\"/\\\"):n.indexOf(\\\"\\\\\\\\\\\")>=0?(o=n.replace(/\\\\\\\\[^\\\\\\\\]*$/,\\\"\\\"),d=\\\"\\\\\\\\\\\"):o=\\\".\\\":o=null,u=0;u<t.imports.length;u++)if(\\\"string\\\"==typeof t.imports[u]){if(!o)throw Error(\\\"cannot determine import root\\\");if(\\\"google/protobuf/descriptor.proto\\\"===(c=t.imports[u]))continue;if(c=o+d+c,!0===this.files[c])continue;if(/\\\\.proto$/i.test(c)&&!e.DotProto&&(c=c.replace(/\\\\.proto$/,\\\".json\\\")),null===(h=e.Util.fetch(c)))throw Error(\\\"failed to import '\\\"+c+\\\"' in '\\\"+n+\\\"': file not found\\\");/\\\\.json$/i.test(c)?this.import(JSON.parse(h+\\\"\\\"),c):this.import(e.DotProto.Parser.parse(h),c)}else n?/\\\\.(\\\\w+)$/.test(n)?this.import(t.imports[u],n.replace(/^(.+)\\\\.(\\\\w+)$/,(function(e,t,n){return t+\\\"_import\\\"+u+\\\".\\\"+n}))):this.import(t.imports[u],n+\\\"_import\\\"+u):this.import(t.imports[u]);a&&(this.importRoot=null)}return t.package&&this.define(t.package),t.syntax&&i(t),l=this.ptr,t.options&&Object.keys(t.options).forEach((function(e){l.options[e]=t.options[e]})),t.messages&&(this.create(t.messages),this.ptr=l),t.enums&&(this.create(t.enums),this.ptr=l),t.services&&(this.create(t.services),this.ptr=l),t.extends&&this.create(t.extends),this.reset()},s.resolveAll=function(){var i;if(null==this.ptr||\\\"object\\\"==typeof this.ptr.type)return this;if(this.ptr instanceof n.Namespace)this.ptr.children.forEach((function(e){this.ptr=e,this.resolveAll()}),this);else if(this.ptr instanceof n.Message.Field){if(t.TYPE.test(this.ptr.type))this.ptr.type=e.TYPES[this.ptr.type];else{if(!t.TYPEREF.test(this.ptr.type))throw Error(\\\"illegal type reference in \\\"+this.ptr.toString(!0)+\\\": \\\"+this.ptr.type);if(!(i=(this.ptr instanceof n.Message.ExtensionField?this.ptr.extension.parent:this.ptr.parent).resolve(this.ptr.type,!0)))throw Error(\\\"unresolvable type reference in \\\"+this.ptr.toString(!0)+\\\": \\\"+this.ptr.type);if(this.ptr.resolvedType=i,i instanceof n.Enum){if(this.ptr.type=e.TYPES.enum,\\\"proto3\\\"===this.ptr.syntax&&\\\"proto3\\\"!==i.syntax)throw Error(\\\"proto3 message cannot reference proto2 enum\\\")}else{if(!(i instanceof n.Message))throw Error(\\\"illegal type reference in \\\"+this.ptr.toString(!0)+\\\": \\\"+this.ptr.type);this.ptr.type=i.isGroup?e.TYPES.group:e.TYPES.message}}if(this.ptr.map){if(!t.TYPE.test(this.ptr.keyType))throw Error(\\\"illegal key type for map field in \\\"+this.ptr.toString(!0)+\\\": \\\"+this.ptr.keyType);this.ptr.keyType=e.TYPES[this.ptr.keyType]}}else if(this.ptr instanceof e.Reflect.Service.Method){if(!(this.ptr instanceof e.Reflect.Service.RPCMethod))throw Error(\\\"illegal service type in \\\"+this.ptr.toString(!0));if(!((i=this.ptr.parent.resolve(this.ptr.requestName,!0))&&i instanceof e.Reflect.Message))throw Error(\\\"Illegal type reference in \\\"+this.ptr.toString(!0)+\\\": \\\"+this.ptr.requestName);if(this.ptr.resolvedRequestType=i,!((i=this.ptr.parent.resolve(this.ptr.responseName,!0))&&i instanceof e.Reflect.Message))throw Error(\\\"Illegal type reference in \\\"+this.ptr.toString(!0)+\\\": \\\"+this.ptr.responseName);this.ptr.resolvedResponseType=i}else if(!(this.ptr instanceof e.Reflect.Message.OneOf||this.ptr instanceof e.Reflect.Extension||this.ptr instanceof e.Reflect.Enum.Value))throw Error(\\\"illegal object in namespace: \\\"+typeof this.ptr+\\\": \\\"+this.ptr);return this.reset()},s.build=function(e){var t,n,i;if(this.reset(),this.resolved||(this.resolveAll(),this.resolved=!0,this.result=null),null===this.result&&(this.result=this.ns.build()),!e)return this.result;for(t=\\\"string\\\"==typeof e?e.split(\\\".\\\"):e,n=this.result,i=0;i<t.length;i++){if(!n[t[i]]){n=null;break}n=n[t[i]]}return n},s.lookup=function(e,t){return e?this.ns.resolve(e,t):this.ns},s.toString=function(){return\\\"Builder\\\"},r.Message=function(){},r.Enum=function(){},r.Service=function(){},r}(r,r.Lang,r.Reflect),r.Map=function(e,t){function n(e){var t=0;return{next:function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}}var i=function(e,n){var i,r,s,o;if(!e.map)throw Error(\\\"field is not a map\\\");if(this.field=e,this.keyElem=new t.Element(e.keyType,null,!0,e.syntax),this.valueElem=new t.Element(e.type,e.resolvedType,!1,e.syntax),this.map={},Object.defineProperty(this,\\\"size\\\",{get:function(){return Object.keys(this.map).length}}),n)for(i=Object.keys(n),r=0;r<i.length;r++)s=this.keyElem.valueFromString(i[r]),o=this.valueElem.verifyValue(n[i[r]]),this.map[this.keyElem.valueToString(s)]={key:s,value:o}},r=i.prototype;return r.clear=function(){this.map={}},r.delete=function(e){var t=this.keyElem.valueToString(this.keyElem.verifyValue(e)),n=t in this.map;return delete this.map[t],n},r.entries=function(){var e,t,i=[],r=Object.keys(this.map);for(t=0;t<r.length;t++)i.push([(e=this.map[r[t]]).key,e.value]);return n(i)},r.keys=function(){var e,t=[],i=Object.keys(this.map);for(e=0;e<i.length;e++)t.push(this.map[i[e]].key);return n(t)},r.values=function(){var e,t=[],i=Object.keys(this.map);for(e=0;e<i.length;e++)t.push(this.map[i[e]].value);return n(t)},r.forEach=function(e,t){var n,i,r=Object.keys(this.map);for(i=0;i<r.length;i++)e.call(t,(n=this.map[r[i]]).value,n.key,this)},r.set=function(e,t){var n=this.keyElem.verifyValue(e),i=this.valueElem.verifyValue(t);return this.map[this.keyElem.valueToString(n)]={key:n,value:i},this},r.get=function(e){var t=this.keyElem.valueToString(this.keyElem.verifyValue(e));return t in this.map?this.map[t].value:void 0},r.has=function(e){return this.keyElem.valueToString(this.keyElem.verifyValue(e))in this.map},i}(0,r.Reflect),r.loadProto=function(e,t,n){return(\\\"string\\\"==typeof t||t&&\\\"string\\\"==typeof t.file&&\\\"string\\\"==typeof t.root)&&(n=t,t=void 0),r.loadJson(r.DotProto.Parser.parse(e),t,n)},r.protoFromString=r.loadProto,r.loadProtoFile=function(e,t,n){if(t&&\\\"object\\\"==typeof t?(n=t,t=null):t&&\\\"function\\\"==typeof t||(t=null),t)return r.Util.fetch(\\\"string\\\"==typeof e?e:e.root+\\\"/\\\"+e.file,(function(i){if(null!==i)try{t(null,r.loadProto(i,n,e))}catch(e){t(e)}else t(Error(\\\"Failed to fetch file\\\"))}));var i=r.Util.fetch(\\\"object\\\"==typeof e?e.root+\\\"/\\\"+e.file:e);return null===i?null:r.loadProto(i,n,e)},r.protoFromFile=r.loadProtoFile,r.newBuilder=function(e){return void 0===(e=e||{}).convertFieldsToCamelCase&&(e.convertFieldsToCamelCase=r.convertFieldsToCamelCase),void 0===e.populateAccessors&&(e.populateAccessors=r.populateAccessors),new r.Builder(e)},r.loadJson=function(e,t,n){return(\\\"string\\\"==typeof t||t&&\\\"string\\\"==typeof t.file&&\\\"string\\\"==typeof t.root)&&(n=t,t=null),t&&\\\"object\\\"==typeof t||(t=r.newBuilder()),\\\"string\\\"==typeof e&&(e=JSON.parse(e)),t.import(e,n),t.resolveAll(),t},r.loadJsonFile=function(e,t,n){if(t&&\\\"object\\\"==typeof t?(n=t,t=null):t&&\\\"function\\\"==typeof t||(t=null),t)return r.Util.fetch(\\\"string\\\"==typeof e?e:e.root+\\\"/\\\"+e.file,(function(i){if(null!==i)try{t(null,r.loadJson(JSON.parse(i),n,e))}catch(e){t(e)}else t(Error(\\\"Failed to fetch file\\\"))}));var i=r.Util.fetch(\\\"object\\\"==typeof e?e.root+\\\"/\\\"+e.file:e);return null===i?null:r.loadJson(JSON.parse(i),n,e)},i=Ai,r.loadProto(i,void 0,\\\"\\\").build(\\\"Modules\\\").probuf}(function(e){function t(e){var t=0;return function(){return t<e.length?e.charCodeAt(t++):null}}function n(){var e=[],t=[];return function(){return 0===arguments.length?t.join(\\\"\\\")+a.apply(String,e):(e.length+arguments.length>1024&&(t.push(a.apply(String,e)),e.length=0),void Array.prototype.push.apply(e,arguments))}}function i(e,t,n,i,r){var s,o,a=8*r-i-1,u=(1<<a)-1,c=u>>1,h=-7,l=n?r-1:0,d=n?-1:1,f=e[t+l];for(l+=d,s=f&(1<<-h)-1,f>>=-h,h+=a;h>0;s=256*s+e[t+l],l+=d,h-=8);for(o=s&(1<<-h)-1,s>>=-h,h+=i;h>0;o=256*o+e[t+l],l+=d,h-=8);if(0===s)s=1-c;else{if(s===u)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,i),s-=c}return(f?-1:1)*o*Math.pow(2,s-i)}function r(e,t,n,i,r,s){var o,a,u,c=8*s-r-1,h=(1<<c)-1,l=h>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:s-1,p=i?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||1/0===t?(a=isNaN(t)?1:0,o=h):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),(t+=o+l>=1?d/u:d*Math.pow(2,1-l))*u>=2&&(o++,u/=2),o+l>=h?(a=0,o=h):o+l>=1?(a=(t*u-1)*Math.pow(2,r),o+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,r),o=0));r>=8;e[n+f]=255&a,f+=p,a/=256,r-=8);for(o=o<<r|a,c+=r;c>0;e[n+f]=255&o,f+=p,o/=256,c-=8);e[n+f-p]|=128*g}var s,o,a,u,c,h=function(e,t,n){if(void 0===e&&(e=h.DEFAULT_CAPACITY),void 0===t&&(t=h.DEFAULT_ENDIAN),void 0===n&&(n=h.DEFAULT_NOASSERT),!n){if((e|=0)<0)throw RangeError(\\\"Illegal capacity\\\");t=!!t,n=!!n}this.buffer=0===e?o:new ArrayBuffer(e),this.view=0===e?null:new Uint8Array(this.buffer),this.offset=0,this.markedOffset=-1,this.limit=e,this.littleEndian=t,this.noAssert=n};return h.VERSION=\\\"5.0.1\\\",h.LITTLE_ENDIAN=!0,h.BIG_ENDIAN=!1,h.DEFAULT_CAPACITY=16,h.DEFAULT_ENDIAN=h.BIG_ENDIAN,h.DEFAULT_NOASSERT=!1,h.Long=e||null,(s=h.prototype).__isByteBuffer__,Object.defineProperty(s,\\\"__isByteBuffer__\\\",{value:!0,enumerable:!1,configurable:!1}),o=new ArrayBuffer(0),a=String.fromCharCode,h.accessor=function(){return Uint8Array},h.allocate=function(e,t,n){return new h(e,t,n)},h.concat=function(e,t,n,i){var r,s,o,a,u,c;for((\\\"boolean\\\"==typeof t||\\\"string\\\"!=typeof t)&&(i=n,n=t,t=void 0),r=0,o=0,a=e.length;a>o;++o)h.isByteBuffer(e[o])||(e[o]=h.wrap(e[o],t)),(s=e[o].limit-e[o].offset)>0&&(r+=s);if(0===r)return new h(0,n,i);for(c=new h(r,n,i),o=0;a>o;)(s=(u=e[o++]).limit-u.offset)<=0||(c.view.set(u.view.subarray(u.offset,u.limit),c.offset),c.offset+=s);return c.limit=c.offset,c.offset=0,c},h.isByteBuffer=function(e){return!0===(e&&e.__isByteBuffer__)},h.type=function(){return ArrayBuffer},h.wrap=function(e,t,n,i){var r,o;if(\\\"string\\\"!=typeof t&&(i=n,n=t,t=void 0),\\\"string\\\"==typeof e)switch(void 0===t&&(t=\\\"utf8\\\"),t){case\\\"base64\\\":return h.fromBase64(e,n);case\\\"hex\\\":return h.fromHex(e,n);case\\\"binary\\\":return h.fromBinary(e,n);case\\\"utf8\\\":return h.fromUTF8(e,n);case\\\"debug\\\":return h.fromDebug(e,n);default:throw Error(\\\"Unsupported encoding: \\\"+t)}if(null===e||\\\"object\\\"!=typeof e)throw TypeError(\\\"Illegal buffer\\\");if(h.isByteBuffer(e))return(r=s.clone.call(e)).markedOffset=-1,r;if(e instanceof Uint8Array)r=new h(0,n,i),e.length>0&&(r.buffer=e.buffer,r.offset=e.byteOffset,r.limit=e.byteOffset+e.byteLength,r.view=new Uint8Array(e.buffer));else if(e instanceof ArrayBuffer)r=new h(0,n,i),e.byteLength>0&&(r.buffer=e,r.offset=0,r.limit=e.byteLength,r.view=e.byteLength>0?new Uint8Array(e):null);else{if(\\\"[object Array]\\\"!==Object.prototype.toString.call(e))throw TypeError(\\\"Illegal buffer\\\");for((r=new h(e.length,n,i)).limit=e.length,o=0;o<e.length;++o)r.view[o]=e[o]}return r},s.writeBitSet=function(e,t){var n,i,r,s,o,a,u=void 0===t;if(u&&(t=this.offset),!this.noAssert){if(!(e instanceof Array))throw TypeError(\\\"Illegal BitSet: Not an array\\\");if(\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal offset: \\\"+t+\\\" (not an integer)\\\");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+t+\\\" (+0) <= \\\"+this.buffer.byteLength)}for(i=t,s=(r=e.length)>>3,o=0,t+=this.writeVarint32(r,t);s--;)n=1&!!e[o++]|(1&!!e[o++])<<1|(1&!!e[o++])<<2|(1&!!e[o++])<<3|(1&!!e[o++])<<4|(1&!!e[o++])<<5|(1&!!e[o++])<<6|(1&!!e[o++])<<7,this.writeByte(n,t++);if(r>o){for(a=0,n=0;r>o;)n|=(1&!!e[o++])<<a++;this.writeByte(n,t++)}return u?(this.offset=t,this):t-i},s.readBitSet=function(e){var t,n,i,r,s,o,a,u=void 0===e;for(u&&(e=this.offset),r=(i=(n=this.readVarint32(e)).value)>>3,s=0,o=[],e+=n.length;r--;)t=this.readByte(e++),o[s++]=!!(1&t),o[s++]=!!(2&t),o[s++]=!!(4&t),o[s++]=!!(8&t),o[s++]=!!(16&t),o[s++]=!!(32&t),o[s++]=!!(64&t),o[s++]=!!(128&t);if(i>s)for(a=0,t=this.readByte(e++);i>s;)o[s++]=!!(1&t>>a++);return u&&(this.offset=e),o},s.readBytes=function(e,t){var n,i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal offset: \\\"+t+\\\" (not an integer)\\\");if((t>>>=0)<0||t+e>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+t+\\\" (+\\\"+e+\\\") <= \\\"+this.buffer.byteLength)}return n=this.slice(t,t+e),i&&(this.offset+=e),n},s.writeBytes=s.append,s.writeInt8=function(e,t){var n,i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal value: \\\"+e+\\\" (not an integer)\\\");if(e|=0,\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal offset: \\\"+t+\\\" (not an integer)\\\");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+t+\\\" (+0) <= \\\"+this.buffer.byteLength)}return(t+=1)>(n=this.buffer.byteLength)&&this.resize((n*=2)>t?n:t),t-=1,this.view[t]=e,i&&(this.offset+=1),this},s.writeByte=s.writeInt8,s.readInt8=function(e){var t,n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal offset: \\\"+e+\\\" (not an integer)\\\");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+e+\\\" (+1) <= \\\"+this.buffer.byteLength)}return 128==(128&(t=this.view[e]))&&(t=-(255-t+1)),n&&(this.offset+=1),t},s.readByte=s.readInt8,s.writeUint8=function(e,t){var n,i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal value: \\\"+e+\\\" (not an integer)\\\");if(e>>>=0,\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal offset: \\\"+t+\\\" (not an integer)\\\");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+t+\\\" (+0) <= \\\"+this.buffer.byteLength)}return(t+=1)>(n=this.buffer.byteLength)&&this.resize((n*=2)>t?n:t),t-=1,this.view[t]=e,i&&(this.offset+=1),this},s.writeUInt8=s.writeUint8,s.readUint8=function(e){var t,n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal offset: \\\"+e+\\\" (not an integer)\\\");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+e+\\\" (+1) <= \\\"+this.buffer.byteLength)}return t=this.view[e],n&&(this.offset+=1),t},s.readUInt8=s.readUint8,s.writeInt16=function(e,t){var n,i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal value: \\\"+e+\\\" (not an integer)\\\");if(e|=0,\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal offset: \\\"+t+\\\" (not an integer)\\\");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+t+\\\" (+0) <= \\\"+this.buffer.byteLength)}return(t+=2)>(n=this.buffer.byteLength)&&this.resize((n*=2)>t?n:t),t-=2,this.littleEndian?(this.view[t+1]=(65280&e)>>>8,this.view[t]=255&e):(this.view[t]=(65280&e)>>>8,this.view[t+1]=255&e),i&&(this.offset+=2),this},s.writeShort=s.writeInt16,s.readInt16=function(e){var t,n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal offset: \\\"+e+\\\" (not an integer)\\\");if((e>>>=0)<0||e+2>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+e+\\\" (+2) <= \\\"+this.buffer.byteLength)}return t=0,this.littleEndian?(t=this.view[e],t|=this.view[e+1]<<8):(t=this.view[e]<<8,t|=this.view[e+1]),32768==(32768&t)&&(t=-(65535-t+1)),n&&(this.offset+=2),t},s.readShort=s.readInt16,s.writeUint16=function(e,t){var n,i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal value: \\\"+e+\\\" (not an integer)\\\");if(e>>>=0,\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal offset: \\\"+t+\\\" (not an integer)\\\");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+t+\\\" (+0) <= \\\"+this.buffer.byteLength)}return(t+=2)>(n=this.buffer.byteLength)&&this.resize((n*=2)>t?n:t),t-=2,this.littleEndian?(this.view[t+1]=(65280&e)>>>8,this.view[t]=255&e):(this.view[t]=(65280&e)>>>8,this.view[t+1]=255&e),i&&(this.offset+=2),this},s.writeUInt16=s.writeUint16,s.readUint16=function(e){var t,n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal offset: \\\"+e+\\\" (not an integer)\\\");if((e>>>=0)<0||e+2>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+e+\\\" (+2) <= \\\"+this.buffer.byteLength)}return t=0,this.littleEndian?(t=this.view[e],t|=this.view[e+1]<<8):(t=this.view[e]<<8,t|=this.view[e+1]),n&&(this.offset+=2),t},s.readUInt16=s.readUint16,s.writeInt32=function(e,t){var n,i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal value: \\\"+e+\\\" (not an integer)\\\");if(e|=0,\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal offset: \\\"+t+\\\" (not an integer)\\\");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+t+\\\" (+0) <= \\\"+this.buffer.byteLength)}return(t+=4)>(n=this.buffer.byteLength)&&this.resize((n*=2)>t?n:t),t-=4,this.littleEndian?(this.view[t+3]=255&e>>>24,this.view[t+2]=255&e>>>16,this.view[t+1]=255&e>>>8,this.view[t]=255&e):(this.view[t]=255&e>>>24,this.view[t+1]=255&e>>>16,this.view[t+2]=255&e>>>8,this.view[t+3]=255&e),i&&(this.offset+=4),this},s.writeInt=s.writeInt32,s.readInt32=function(e){var t,n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal offset: \\\"+e+\\\" (not an integer)\\\");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+e+\\\" (+4) <= \\\"+this.buffer.byteLength)}return t=0,this.littleEndian?(t=this.view[e+2]<<16,t|=this.view[e+1]<<8,t|=this.view[e],t+=this.view[e+3]<<24>>>0):(t=this.view[e+1]<<16,t|=this.view[e+2]<<8,t|=this.view[e+3],t+=this.view[e]<<24>>>0),t|=0,n&&(this.offset+=4),t},s.readInt=s.readInt32,s.writeUint32=function(e,t){var n,i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal value: \\\"+e+\\\" (not an integer)\\\");if(e>>>=0,\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal offset: \\\"+t+\\\" (not an integer)\\\");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+t+\\\" (+0) <= \\\"+this.buffer.byteLength)}return(t+=4)>(n=this.buffer.byteLength)&&this.resize((n*=2)>t?n:t),t-=4,this.littleEndian?(this.view[t+3]=255&e>>>24,this.view[t+2]=255&e>>>16,this.view[t+1]=255&e>>>8,this.view[t]=255&e):(this.view[t]=255&e>>>24,this.view[t+1]=255&e>>>16,this.view[t+2]=255&e>>>8,this.view[t+3]=255&e),i&&(this.offset+=4),this},s.writeUInt32=s.writeUint32,s.readUint32=function(e){var t,n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal offset: \\\"+e+\\\" (not an integer)\\\");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+e+\\\" (+4) <= \\\"+this.buffer.byteLength)}return t=0,this.littleEndian?(t=this.view[e+2]<<16,t|=this.view[e+1]<<8,t|=this.view[e],t+=this.view[e+3]<<24>>>0):(t=this.view[e+1]<<16,t|=this.view[e+2]<<8,t|=this.view[e+3],t+=this.view[e]<<24>>>0),n&&(this.offset+=4),t},s.readUInt32=s.readUint32,e&&(s.writeInt64=function(t,n){var i,r,s,o=void 0===n;if(o&&(n=this.offset),!this.noAssert){if(\\\"number\\\"==typeof t)t=e.fromNumber(t);else if(\\\"string\\\"==typeof t)t=e.fromString(t);else if(!(t&&t instanceof e))throw TypeError(\\\"Illegal value: \\\"+t+\\\" (not an integer or Long)\\\");if(\\\"number\\\"!=typeof n||n%1!=0)throw TypeError(\\\"Illegal offset: \\\"+n+\\\" (not an integer)\\\");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+n+\\\" (+0) <= \\\"+this.buffer.byteLength)}return\\\"number\\\"==typeof t?t=e.fromNumber(t):\\\"string\\\"==typeof t&&(t=e.fromString(t)),(n+=8)>(i=this.buffer.byteLength)&&this.resize((i*=2)>n?i:n),n-=8,r=t.low,s=t.high,this.littleEndian?(this.view[n+3]=255&r>>>24,this.view[n+2]=255&r>>>16,this.view[n+1]=255&r>>>8,this.view[n]=255&r,n+=4,this.view[n+3]=255&s>>>24,this.view[n+2]=255&s>>>16,this.view[n+1]=255&s>>>8,this.view[n]=255&s):(this.view[n]=255&s>>>24,this.view[n+1]=255&s>>>16,this.view[n+2]=255&s>>>8,this.view[n+3]=255&s,n+=4,this.view[n]=255&r>>>24,this.view[n+1]=255&r>>>16,this.view[n+2]=255&r>>>8,this.view[n+3]=255&r),o&&(this.offset+=8),this},s.writeLong=s.writeInt64,s.readInt64=function(t){var n,i,r,s=void 0===t;if(s&&(t=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal offset: \\\"+t+\\\" (not an integer)\\\");if((t>>>=0)<0||t+8>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+t+\\\" (+8) <= \\\"+this.buffer.byteLength)}return n=0,i=0,this.littleEndian?(n=this.view[t+2]<<16,n|=this.view[t+1]<<8,n|=this.view[t],n+=this.view[t+3]<<24>>>0,t+=4,i=this.view[t+2]<<16,i|=this.view[t+1]<<8,i|=this.view[t],i+=this.view[t+3]<<24>>>0):(i=this.view[t+1]<<16,i|=this.view[t+2]<<8,i|=this.view[t+3],i+=this.view[t]<<24>>>0,t+=4,n=this.view[t+1]<<16,n|=this.view[t+2]<<8,n|=this.view[t+3],n+=this.view[t]<<24>>>0),r=new e(n,i,!1),s&&(this.offset+=8),r},s.readLong=s.readInt64,s.writeUint64=function(t,n){var i,r,s,o=void 0===n;if(o&&(n=this.offset),!this.noAssert){if(\\\"number\\\"==typeof t)t=e.fromNumber(t);else if(\\\"string\\\"==typeof t)t=e.fromString(t);else if(!(t&&t instanceof e))throw TypeError(\\\"Illegal value: \\\"+t+\\\" (not an integer or Long)\\\");if(\\\"number\\\"!=typeof n||n%1!=0)throw TypeError(\\\"Illegal offset: \\\"+n+\\\" (not an integer)\\\");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+n+\\\" (+0) <= \\\"+this.buffer.byteLength)}return\\\"number\\\"==typeof t?t=e.fromNumber(t):\\\"string\\\"==typeof t&&(t=e.fromString(t)),(n+=8)>(i=this.buffer.byteLength)&&this.resize((i*=2)>n?i:n),n-=8,r=t.low,s=t.high,this.littleEndian?(this.view[n+3]=255&r>>>24,this.view[n+2]=255&r>>>16,this.view[n+1]=255&r>>>8,this.view[n]=255&r,n+=4,this.view[n+3]=255&s>>>24,this.view[n+2]=255&s>>>16,this.view[n+1]=255&s>>>8,this.view[n]=255&s):(this.view[n]=255&s>>>24,this.view[n+1]=255&s>>>16,this.view[n+2]=255&s>>>8,this.view[n+3]=255&s,n+=4,this.view[n]=255&r>>>24,this.view[n+1]=255&r>>>16,this.view[n+2]=255&r>>>8,this.view[n+3]=255&r),o&&(this.offset+=8),this},s.writeUInt64=s.writeUint64,s.readUint64=function(t){var n,i,r,s=void 0===t;if(s&&(t=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal offset: \\\"+t+\\\" (not an integer)\\\");if((t>>>=0)<0||t+8>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+t+\\\" (+8) <= \\\"+this.buffer.byteLength)}return n=0,i=0,this.littleEndian?(n=this.view[t+2]<<16,n|=this.view[t+1]<<8,n|=this.view[t],n+=this.view[t+3]<<24>>>0,t+=4,i=this.view[t+2]<<16,i|=this.view[t+1]<<8,i|=this.view[t],i+=this.view[t+3]<<24>>>0):(i=this.view[t+1]<<16,i|=this.view[t+2]<<8,i|=this.view[t+3],i+=this.view[t]<<24>>>0,t+=4,n=this.view[t+1]<<16,n|=this.view[t+2]<<8,n|=this.view[t+3],n+=this.view[t]<<24>>>0),r=new e(n,i,!0),s&&(this.offset+=8),r},s.readUInt64=s.readUint64),s.writeFloat32=function(e,t){var n,i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e)throw TypeError(\\\"Illegal value: \\\"+e+\\\" (not a number)\\\");if(\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal offset: \\\"+t+\\\" (not an integer)\\\");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+t+\\\" (+0) <= \\\"+this.buffer.byteLength)}return(t+=4)>(n=this.buffer.byteLength)&&this.resize((n*=2)>t?n:t),t-=4,r(this.view,e,t,this.littleEndian,23,4),i&&(this.offset+=4),this},s.writeFloat=s.writeFloat32,s.readFloat32=function(e){var t,n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal offset: \\\"+e+\\\" (not an integer)\\\");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+e+\\\" (+4) <= \\\"+this.buffer.byteLength)}return t=i(this.view,e,this.littleEndian,23,4),n&&(this.offset+=4),t},s.readFloat=s.readFloat32,s.writeFloat64=function(e,t){var n,i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e)throw TypeError(\\\"Illegal value: \\\"+e+\\\" (not a number)\\\");if(\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal offset: \\\"+t+\\\" (not an integer)\\\");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+t+\\\" (+0) <= \\\"+this.buffer.byteLength)}return(t+=8)>(n=this.buffer.byteLength)&&this.resize((n*=2)>t?n:t),t-=8,r(this.view,e,t,this.littleEndian,52,8),i&&(this.offset+=8),this},s.writeDouble=s.writeFloat64,s.readFloat64=function(e){var t,n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal offset: \\\"+e+\\\" (not an integer)\\\");if((e>>>=0)<0||e+8>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+e+\\\" (+8) <= \\\"+this.buffer.byteLength)}return t=i(this.view,e,this.littleEndian,52,8),n&&(this.offset+=8),t},s.readDouble=s.readFloat64,h.MAX_VARINT32_BYTES=5,h.calculateVarint32=function(e){return(e>>>=0)<128?1:e<16384?2:1<<21>e?3:1<<28>e?4:5},h.zigZagEncode32=function(e){return((e|=0)<<1^e>>31)>>>0},h.zigZagDecode32=function(e){return 0|e>>>1^-(1&e)},s.writeVarint32=function(e,t){var n,i,r,s=void 0===t;if(s&&(t=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal value: \\\"+e+\\\" (not an integer)\\\");if(e|=0,\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal offset: \\\"+t+\\\" (not an integer)\\\");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+t+\\\" (+0) <= \\\"+this.buffer.byteLength)}for((t+=i=h.calculateVarint32(e))>(r=this.buffer.byteLength)&&this.resize((r*=2)>t?r:t),t-=i,e>>>=0;e>=128;)n=128|127&e,this.view[t++]=n,e>>>=7;return this.view[t++]=e,s?(this.offset=t,this):i},s.writeVarint32ZigZag=function(e,t){return this.writeVarint32(h.zigZagEncode32(e),t)},s.readVarint32=function(e){var t,n,i,r,s=void 0===e;if(s&&(e=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal offset: \\\"+e+\\\" (not an integer)\\\");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+e+\\\" (+1) <= \\\"+this.buffer.byteLength)}n=0,i=0;do{if(!this.noAssert&&e>this.limit)throw(r=Error(\\\"Truncated\\\")).truncated=!0,r;t=this.view[e++],n<5&&(i|=(127&t)<<7*n),++n}while(0!=(128&t));return i|=0,s?(this.offset=e,i):{value:i,length:n}},s.readVarint32ZigZag=function(e){var t=this.readVarint32(e);return\\\"object\\\"==typeof t?t.value=h.zigZagDecode32(t.value):t=h.zigZagDecode32(t),t},e&&(h.MAX_VARINT64_BYTES=10,h.calculateVarint64=function(t){\\\"number\\\"==typeof t?t=e.fromNumber(t):\\\"string\\\"==typeof t&&(t=e.fromString(t));var n=t.toInt()>>>0,i=t.shiftRightUnsigned(28).toInt()>>>0,r=t.shiftRightUnsigned(56).toInt()>>>0;return 0==r?0==i?n<16384?n<128?1:2:1<<21>n?3:4:i<16384?i<128?5:6:1<<21>i?7:8:r<128?9:10},h.zigZagEncode64=function(t){return\\\"number\\\"==typeof t?t=e.fromNumber(t,!1):\\\"string\\\"==typeof t?t=e.fromString(t,!1):!1!==t.unsigned&&(t=t.toSigned()),t.shiftLeft(1).xor(t.shiftRight(63)).toUnsigned()},h.zigZagDecode64=function(t){return\\\"number\\\"==typeof t?t=e.fromNumber(t,!1):\\\"string\\\"==typeof t?t=e.fromString(t,!1):!1!==t.unsigned&&(t=t.toSigned()),t.shiftRightUnsigned(1).xor(t.and(e.ONE).toSigned().negate()).toSigned()},s.writeVarint64=function(t,n){var i,r,s,o,a,u=void 0===n;if(u&&(n=this.offset),!this.noAssert){if(\\\"number\\\"==typeof t)t=e.fromNumber(t);else if(\\\"string\\\"==typeof t)t=e.fromString(t);else if(!(t&&t instanceof e))throw TypeError(\\\"Illegal value: \\\"+t+\\\" (not an integer or Long)\\\");if(\\\"number\\\"!=typeof n||n%1!=0)throw TypeError(\\\"Illegal offset: \\\"+n+\\\" (not an integer)\\\");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+n+\\\" (+0) <= \\\"+this.buffer.byteLength)}switch(\\\"number\\\"==typeof t?t=e.fromNumber(t,!1):\\\"string\\\"==typeof t?t=e.fromString(t,!1):!1!==t.unsigned&&(t=t.toSigned()),i=h.calculateVarint64(t),r=t.toInt()>>>0,s=t.shiftRightUnsigned(28).toInt()>>>0,o=t.shiftRightUnsigned(56).toInt()>>>0,(n+=i)>(a=this.buffer.byteLength)&&this.resize((a*=2)>n?a:n),n-=i,i){case 10:this.view[n+9]=1&o>>>7;case 9:this.view[n+8]=9!==i?128|o:127&o;case 8:this.view[n+7]=8!==i?128|s>>>21:127&s>>>21;case 7:this.view[n+6]=7!==i?128|s>>>14:127&s>>>14;case 6:this.view[n+5]=6!==i?128|s>>>7:127&s>>>7;case 5:this.view[n+4]=5!==i?128|s:127&s;case 4:this.view[n+3]=4!==i?128|r>>>21:127&r>>>21;case 3:this.view[n+2]=3!==i?128|r>>>14:127&r>>>14;case 2:this.view[n+1]=2!==i?128|r>>>7:127&r>>>7;case 1:this.view[n]=1!==i?128|r:127&r}return u?(this.offset+=i,this):i},s.writeVarint64ZigZag=function(e,t){return this.writeVarint64(h.zigZagEncode64(e),t)},s.readVarint64=function(t){var n,i,r,s,o,a,u=void 0===t;if(u&&(t=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal offset: \\\"+t+\\\" (not an integer)\\\");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+t+\\\" (+1) <= \\\"+this.buffer.byteLength)}if(n=t,i=0,r=0,s=0,o=0,i=127&(o=this.view[t++]),128&o&&(i|=(127&(o=this.view[t++]))<<7,(128&o||this.noAssert&&void 0===o)&&(i|=(127&(o=this.view[t++]))<<14,(128&o||this.noAssert&&void 0===o)&&(i|=(127&(o=this.view[t++]))<<21,(128&o||this.noAssert&&void 0===o)&&(r=127&(o=this.view[t++]),(128&o||this.noAssert&&void 0===o)&&(r|=(127&(o=this.view[t++]))<<7,(128&o||this.noAssert&&void 0===o)&&(r|=(127&(o=this.view[t++]))<<14,(128&o||this.noAssert&&void 0===o)&&(r|=(127&(o=this.view[t++]))<<21,(128&o||this.noAssert&&void 0===o)&&(s=127&(o=this.view[t++]),(128&o||this.noAssert&&void 0===o)&&(s|=(127&(o=this.view[t++]))<<7,128&o||this.noAssert&&void 0===o))))))))))throw Error(\\\"Buffer overrun\\\");return a=e.fromBits(i|r<<28,r>>>4|s<<24,!1),u?(this.offset=t,a):{value:a,length:t-n}},s.readVarint64ZigZag=function(t){var n=this.readVarint64(t);return n&&n.value instanceof e?n.value=h.zigZagDecode64(n.value):n=h.zigZagDecode64(n),n}),s.writeCString=function(e,n){var i,r,s,o=void 0===n;if(o&&(n=this.offset),r=e.length,!this.noAssert){if(\\\"string\\\"!=typeof e)throw TypeError(\\\"Illegal str: Not a string\\\");for(i=0;r>i;++i)if(0===e.charCodeAt(i))throw RangeError(\\\"Illegal str: Contains NULL-characters\\\");if(\\\"number\\\"!=typeof n||n%1!=0)throw TypeError(\\\"Illegal offset: \\\"+n+\\\" (not an integer)\\\");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+n+\\\" (+0) <= \\\"+this.buffer.byteLength)}return r=c.calculateUTF16asUTF8(t(e))[1],n+=r+1,s=this.buffer.byteLength,n>s&&this.resize((s*=2)>n?s:n),n-=r+1,c.encodeUTF16toUTF8(t(e),function(e){this.view[n++]=e}.bind(this)),this.view[n++]=0,o?(this.offset=n,this):r},s.readCString=function(e){var t,i,r,s=void 0===e;if(s&&(e=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal offset: \\\"+e+\\\" (not an integer)\\\");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+e+\\\" (+1) <= \\\"+this.buffer.byteLength)}return t=e,r=-1,c.decodeUTF8toUTF16(function(){if(0===r)return null;if(e>=this.limit)throw RangeError(\\\"Illegal range: Truncated data, \\\"+e+\\\" < \\\"+this.limit);return 0===(r=this.view[e++])?null:r}.bind(this),i=n(),!0),s?(this.offset=e,i()):{string:i(),length:e-t}},s.writeIString=function(e,n){var i,r,s,o=void 0===n;if(o&&(n=this.offset),!this.noAssert){if(\\\"string\\\"!=typeof e)throw TypeError(\\\"Illegal str: Not a string\\\");if(\\\"number\\\"!=typeof n||n%1!=0)throw TypeError(\\\"Illegal offset: \\\"+n+\\\" (not an integer)\\\");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+n+\\\" (+0) <= \\\"+this.buffer.byteLength)}if(r=n,i=c.calculateUTF16asUTF8(t(e),this.noAssert)[1],n+=4+i,s=this.buffer.byteLength,n>s&&this.resize((s*=2)>n?s:n),n-=4+i,this.littleEndian?(this.view[n+3]=255&i>>>24,this.view[n+2]=255&i>>>16,this.view[n+1]=255&i>>>8,this.view[n]=255&i):(this.view[n]=255&i>>>24,this.view[n+1]=255&i>>>16,this.view[n+2]=255&i>>>8,this.view[n+3]=255&i),n+=4,c.encodeUTF16toUTF8(t(e),function(e){this.view[n++]=e}.bind(this)),n!==r+4+i)throw RangeError(\\\"Illegal range: Truncated data, \\\"+n+\\\" == \\\"+(n+4+i));return o?(this.offset=n,this):n-r},s.readIString=function(e){var t,n,i,r=void 0===e;if(r&&(e=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal offset: \\\"+e+\\\" (not an integer)\\\");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+e+\\\" (+4) <= \\\"+this.buffer.byteLength)}return t=e,n=this.readUint32(e),i=this.readUTF8String(n,h.METRICS_BYTES,e+=4),e+=i.length,r?(this.offset=e,i.string):{string:i.string,length:e-t}},h.METRICS_CHARS=\\\"c\\\",h.METRICS_BYTES=\\\"b\\\",s.writeUTF8String=function(e,n){var i,r,s,o=void 0===n;if(o&&(n=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof n||n%1!=0)throw TypeError(\\\"Illegal offset: \\\"+n+\\\" (not an integer)\\\");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+n+\\\" (+0) <= \\\"+this.buffer.byteLength)}return r=n,i=c.calculateUTF16asUTF8(t(e))[1],n+=i,s=this.buffer.byteLength,n>s&&this.resize((s*=2)>n?s:n),n-=i,c.encodeUTF16toUTF8(t(e),function(e){this.view[n++]=e}.bind(this)),o?(this.offset=n,this):n-r},s.writeString=s.writeUTF8String,h.calculateUTF8Chars=function(e){return c.calculateUTF16asUTF8(t(e))[0]},h.calculateUTF8Bytes=function(e){return c.calculateUTF16asUTF8(t(e))[1]},h.calculateString=h.calculateUTF8Bytes,s.readUTF8String=function(e,t,i){var r,s,o,a,u;if(\\\"number\\\"==typeof t&&(i=t,t=void 0),(r=void 0===i)&&(i=this.offset),void 0===t&&(t=h.METRICS_CHARS),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal length: \\\"+e+\\\" (not an integer)\\\");if(e|=0,\\\"number\\\"!=typeof i||i%1!=0)throw TypeError(\\\"Illegal offset: \\\"+i+\\\" (not an integer)\\\");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+i+\\\" (+0) <= \\\"+this.buffer.byteLength)}if(o=0,a=i,t===h.METRICS_CHARS){if(s=n(),c.decodeUTF8(function(){return e>o&&i<this.limit?this.view[i++]:null}.bind(this),(function(e){++o,c.UTF8toUTF16(e,s)})),o!==e)throw RangeError(\\\"Illegal range: Truncated data, \\\"+o+\\\" == \\\"+e);return r?(this.offset=i,s()):{string:s(),length:i-a}}if(t===h.METRICS_BYTES){if(!this.noAssert){if(\\\"number\\\"!=typeof i||i%1!=0)throw TypeError(\\\"Illegal offset: \\\"+i+\\\" (not an integer)\\\");if((i>>>=0)<0||i+e>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+i+\\\" (+\\\"+e+\\\") <= \\\"+this.buffer.byteLength)}if(u=i+e,c.decodeUTF8toUTF16(function(){return u>i?this.view[i++]:null}.bind(this),s=n(),this.noAssert),i!==u)throw RangeError(\\\"Illegal range: Truncated data, \\\"+i+\\\" == \\\"+u);return r?(this.offset=i,s()):{string:s(),length:i-a}}throw TypeError(\\\"Unsupported metrics: \\\"+t)},s.readString=s.readUTF8String,s.writeVString=function(e,n){var i,r,s,o,a=void 0===n;if(a&&(n=this.offset),!this.noAssert){if(\\\"string\\\"!=typeof e)throw TypeError(\\\"Illegal str: Not a string\\\");if(\\\"number\\\"!=typeof n||n%1!=0)throw TypeError(\\\"Illegal offset: \\\"+n+\\\" (not an integer)\\\");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+n+\\\" (+0) <= \\\"+this.buffer.byteLength)}if(s=n,i=c.calculateUTF16asUTF8(t(e),this.noAssert)[1],r=h.calculateVarint32(i),n+=r+i,o=this.buffer.byteLength,n>o&&this.resize((o*=2)>n?o:n),n-=r+i,n+=this.writeVarint32(i,n),c.encodeUTF16toUTF8(t(e),function(e){this.view[n++]=e}.bind(this)),n!==s+i+r)throw RangeError(\\\"Illegal range: Truncated data, \\\"+n+\\\" == \\\"+(n+i+r));return a?(this.offset=n,this):n-s},s.readVString=function(e){var t,n,i,r=void 0===e;if(r&&(e=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal offset: \\\"+e+\\\" (not an integer)\\\");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+e+\\\" (+1) <= \\\"+this.buffer.byteLength)}return t=e,n=this.readVarint32(e),i=this.readUTF8String(n.value,h.METRICS_BYTES,e+=n.length),e+=i.length,r?(this.offset=e,i.string):{string:i.string,length:e-t}},s.append=function(e,t,n){var i,r,s;if((\\\"number\\\"==typeof t||\\\"string\\\"!=typeof t)&&(n=t,t=void 0),(i=void 0===n)&&(n=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof n||n%1!=0)throw TypeError(\\\"Illegal offset: \\\"+n+\\\" (not an integer)\\\");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+n+\\\" (+0) <= \\\"+this.buffer.byteLength)}return e instanceof h||(e=h.wrap(e,t)),(r=e.limit-e.offset)<=0||((n+=r)>(s=this.buffer.byteLength)&&this.resize((s*=2)>n?s:n),n-=r,this.view.set(e.view.subarray(e.offset,e.limit),n),e.offset+=r,i&&(this.offset+=r)),this},s.appendTo=function(e,t){return e.append(this,t),this},s.assert=function(e){return this.noAssert=!e,this},s.capacity=function(){return this.buffer.byteLength},s.clear=function(){return this.offset=0,this.limit=this.buffer.byteLength,this.markedOffset=-1,this},s.clone=function(e){var t=new h(0,this.littleEndian,this.noAssert);return e?(t.buffer=new ArrayBuffer(this.buffer.byteLength),t.view=new Uint8Array(t.buffer)):(t.buffer=this.buffer,t.view=this.view),t.offset=this.offset,t.markedOffset=this.markedOffset,t.limit=this.limit,t},s.compact=function(e,t){var n,i,r;if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal begin: Not an integer\\\");if(e>>>=0,\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal end: Not an integer\\\");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError(\\\"Illegal range: 0 <= \\\"+e+\\\" <= \\\"+t+\\\" <= \\\"+this.buffer.byteLength)}return 0===e&&t===this.buffer.byteLength?this:0==(n=t-e)?(this.buffer=o,this.view=null,this.markedOffset>=0&&(this.markedOffset-=e),this.offset=0,this.limit=0,this):(i=new ArrayBuffer(n),(r=new Uint8Array(i)).set(this.view.subarray(e,t)),this.buffer=i,this.view=r,this.markedOffset>=0&&(this.markedOffset-=e),this.offset=0,this.limit=n,this)},s.copy=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal begin: Not an integer\\\");if(e>>>=0,\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal end: Not an integer\\\");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError(\\\"Illegal range: 0 <= \\\"+e+\\\" <= \\\"+t+\\\" <= \\\"+this.buffer.byteLength)}if(e===t)return new h(0,this.littleEndian,this.noAssert);var n=t-e,i=new h(n,this.littleEndian,this.noAssert);return i.offset=0,i.limit=n,i.markedOffset>=0&&(i.markedOffset-=e),this.copyTo(i,0,e,t),i},s.copyTo=function(e,t,n,i){var r,s,o;if(!this.noAssert&&!h.isByteBuffer(e))throw TypeError(\\\"Illegal target: Not a ByteBuffer\\\");if(t=(s=void 0===t)?e.offset:0|t,n=(r=void 0===n)?this.offset:0|n,i=void 0===i?this.limit:0|i,t<0||t>e.buffer.byteLength)throw RangeError(\\\"Illegal target range: 0 <= \\\"+t+\\\" <= \\\"+e.buffer.byteLength);if(n<0||i>this.buffer.byteLength)throw RangeError(\\\"Illegal source range: 0 <= \\\"+n+\\\" <= \\\"+this.buffer.byteLength);return 0==(o=i-n)?e:(e.ensureCapacity(t+o),e.view.set(this.view.subarray(n,i),t),r&&(this.offset+=o),s&&(e.offset+=o),this)},s.ensureCapacity=function(e){var t=this.buffer.byteLength;return e>t?this.resize((t*=2)>e?t:e):this},s.fill=function(e,t,n){var i=void 0===t;if(i&&(t=this.offset),\\\"string\\\"==typeof e&&e.length>0&&(e=e.charCodeAt(0)),void 0===t&&(t=this.offset),void 0===n&&(n=this.limit),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal value: \\\"+e+\\\" (not an integer)\\\");if(e|=0,\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal begin: Not an integer\\\");if(t>>>=0,\\\"number\\\"!=typeof n||n%1!=0)throw TypeError(\\\"Illegal end: Not an integer\\\");if(n>>>=0,t<0||t>n||n>this.buffer.byteLength)throw RangeError(\\\"Illegal range: 0 <= \\\"+t+\\\" <= \\\"+n+\\\" <= \\\"+this.buffer.byteLength)}if(t>=n)return this;for(;n>t;)this.view[t++]=e;return i&&(this.offset=t),this},s.flip=function(){return this.limit=this.offset,this.offset=0,this},s.mark=function(e){if(e=void 0===e?this.offset:e,!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal offset: \\\"+e+\\\" (not an integer)\\\");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+e+\\\" (+0) <= \\\"+this.buffer.byteLength)}return this.markedOffset=e,this},s.order=function(e){if(!this.noAssert&&\\\"boolean\\\"!=typeof e)throw TypeError(\\\"Illegal littleEndian: Not a boolean\\\");return this.littleEndian=!!e,this},s.LE=function(e){return this.littleEndian=void 0===e||!!e,this},s.BE=function(e){return this.littleEndian=void 0!==e&&!e,this},s.prepend=function(e,t,n){var i,r,s,o,a;if((\\\"number\\\"==typeof t||\\\"string\\\"!=typeof t)&&(n=t,t=void 0),(i=void 0===n)&&(n=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof n||n%1!=0)throw TypeError(\\\"Illegal offset: \\\"+n+\\\" (not an integer)\\\");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+n+\\\" (+0) <= \\\"+this.buffer.byteLength)}return e instanceof h||(e=h.wrap(e,t)),(r=e.limit-e.offset)<=0||((s=r-n)>0?(o=new ArrayBuffer(this.buffer.byteLength+s),(a=new Uint8Array(o)).set(this.view.subarray(n,this.buffer.byteLength),r),this.buffer=o,this.view=a,this.offset+=s,this.markedOffset>=0&&(this.markedOffset+=s),this.limit+=s,n+=s):new Uint8Array(this.buffer),this.view.set(e.view.subarray(e.offset,e.limit),n-r),e.offset=e.limit,i&&(this.offset-=r)),this},s.prependTo=function(e,t){return e.prepend(this,t),this},s.printDebug=function(e){\\\"function\\\"!=typeof e&&(e=console.log.bind(console)),e(this.toString()+\\\"\\\\n-------------------------------------------------------------------\\\\n\\\"+this.toDebug(!0))},s.remaining=function(){return this.limit-this.offset},s.reset=function(){return this.markedOffset>=0?(this.offset=this.markedOffset,this.markedOffset=-1):this.offset=0,this},s.resize=function(e){var t,n;if(!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal capacity: \\\"+e+\\\" (not an integer)\\\");if((e|=0)<0)throw RangeError(\\\"Illegal capacity: 0 <= \\\"+e)}return this.buffer.byteLength<e&&(t=new ArrayBuffer(e),(n=new Uint8Array(t)).set(this.view),this.buffer=t,this.view=n),this},s.reverse=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal begin: Not an integer\\\");if(e>>>=0,\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal end: Not an integer\\\");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError(\\\"Illegal range: 0 <= \\\"+e+\\\" <= \\\"+t+\\\" <= \\\"+this.buffer.byteLength)}return e===t||Array.prototype.reverse.call(this.view.subarray(e,t)),this},s.skip=function(e){if(!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal length: \\\"+e+\\\" (not an integer)\\\");e|=0}var t=this.offset+e;if(!this.noAssert&&(t<0||t>this.buffer.byteLength))throw RangeError(\\\"Illegal length: 0 <= \\\"+this.offset+\\\" + \\\"+e+\\\" <= \\\"+this.buffer.byteLength);return this.offset=t,this},s.slice=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal begin: Not an integer\\\");if(e>>>=0,\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal end: Not an integer\\\");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError(\\\"Illegal range: 0 <= \\\"+e+\\\" <= \\\"+t+\\\" <= \\\"+this.buffer.byteLength)}var n=this.clone();return n.offset=e,n.limit=t,n},s.toBuffer=function(e){var t,n=this.offset,i=this.limit;if(!this.noAssert){if(\\\"number\\\"!=typeof n||n%1!=0)throw TypeError(\\\"Illegal offset: Not an integer\\\");if(n>>>=0,\\\"number\\\"!=typeof i||i%1!=0)throw TypeError(\\\"Illegal limit: Not an integer\\\");if(i>>>=0,n<0||n>i||i>this.buffer.byteLength)throw RangeError(\\\"Illegal range: 0 <= \\\"+n+\\\" <= \\\"+i+\\\" <= \\\"+this.buffer.byteLength)}return e||0!==n||i!==this.buffer.byteLength?n===i?o:(t=new ArrayBuffer(i-n),new Uint8Array(t).set(new Uint8Array(this.buffer).subarray(n,i),0),t):this.buffer},s.toArrayBuffer=s.toBuffer,s.toString=function(e,t,n){if(void 0===e)return\\\"ByteBufferAB(offset=\\\"+this.offset+\\\",markedOffset=\\\"+this.markedOffset+\\\",limit=\\\"+this.limit+\\\",capacity=\\\"+this.capacity()+\\\")\\\";switch(\\\"number\\\"==typeof e&&(n=t=e=\\\"utf8\\\"),e){case\\\"utf8\\\":return this.toUTF8(t,n);case\\\"base64\\\":return this.toBase64(t,n);case\\\"hex\\\":return this.toHex(t,n);case\\\"binary\\\":return this.toBinary(t,n);case\\\"debug\\\":return this.toDebug();case\\\"columns\\\":return this.toColumns();default:throw Error(\\\"Unsupported encoding: \\\"+e)}},u=function(){var e,t,n={},i=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47],r=[];for(e=0,t=i.length;t>e;++e)r[i[e]]=e;return n.encode=function(e,t){for(var n,r;null!==(n=e());)t(i[63&n>>2]),r=(3&n)<<4,null!==(n=e())?(t(i[63&((r|=15&n>>4)|15&n>>4)]),r=(15&n)<<2,null!==(n=e())?(t(i[63&(r|3&n>>6)]),t(i[63&n])):(t(i[63&r]),t(61))):(t(i[63&r]),t(61),t(61))},n.decode=function(e,t){function n(e){throw Error(\\\"Illegal character code: \\\"+e)}for(var i,s,o;null!==(i=e());)if(void 0===(s=r[i])&&n(i),null!==(i=e())&&(void 0===(o=r[i])&&n(i),t(s<<2>>>0|(48&o)>>4),null!==(i=e()))){if(void 0===(s=r[i])){if(61===i)break;n(i)}if(t((15&o)<<4>>>0|(60&s)>>2),null!==(i=e())){if(void 0===(o=r[i])){if(61===i)break;n(i)}t((3&s)<<6>>>0|o)}}},n.test=function(e){return/^(?:[A-Za-z0-9+\\\\/]{4})*(?:[A-Za-z0-9+\\\\/]{2}==|[A-Za-z0-9+\\\\/]{3}=)?$/.test(e)},n}(),s.toBase64=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),t|=0,(e|=0)<0||t>this.capacity||e>t)throw RangeError(\\\"begin, end\\\");var i;return u.encode(function(){return t>e?this.view[e++]:null}.bind(this),i=n()),i()},h.fromBase64=function(e,n){if(\\\"string\\\"!=typeof e)throw TypeError(\\\"str\\\");var i=new h(e.length/4*3,n),r=0;return u.decode(t(e),(function(e){i.view[r++]=e})),i.limit=r,i},h.btoa=function(e){return h.fromBinary(e).toBase64()},h.atob=function(e){return h.fromBase64(e).toBinary()},s.toBinary=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),t|=0,(e|=0)<0||t>this.capacity()||e>t)throw RangeError(\\\"begin, end\\\");if(e===t)return\\\"\\\";for(var n=[],i=[];t>e;)n.push(this.view[e++]),n.length>=1024&&(i.push(String.fromCharCode.apply(String,n)),n=[]);return i.join(\\\"\\\")+String.fromCharCode.apply(String,n)},h.fromBinary=function(e,t){if(\\\"string\\\"!=typeof e)throw TypeError(\\\"str\\\");for(var n,i=0,r=e.length,s=new h(r,t);r>i;){if((n=e.charCodeAt(i))>255)throw RangeError(\\\"illegal char code: \\\"+n);s.view[i++]=n}return s.limit=r,s},s.toDebug=function(e){for(var t,n=-1,i=this.buffer.byteLength,r=\\\"\\\",s=\\\"\\\",o=\\\"\\\";i>n;){if(-1!==n&&(r+=(t=this.view[n])<16?\\\"0\\\"+t.toString(16).toUpperCase():t.toString(16).toUpperCase(),e&&(s+=t>32&&t<127?String.fromCharCode(t):\\\".\\\")),++n,e&&n>0&&n%16==0&&n!==i){for(;r.length<51;)r+=\\\" \\\";o+=r+s+\\\"\\\\n\\\",r=s=\\\"\\\"}r+=n===this.offset&&n===this.limit?n===this.markedOffset?\\\"!\\\":\\\"|\\\":n===this.offset?n===this.markedOffset?\\\"[\\\":\\\"<\\\":n===this.limit?n===this.markedOffset?\\\"]\\\":\\\">\\\":n===this.markedOffset?\\\"'\\\":e||0!==n&&n!==i?\\\" \\\":\\\"\\\"}if(e&&\\\" \\\"!==r){for(;r.length<51;)r+=\\\" \\\";o+=r+s+\\\"\\\\n\\\"}return e?o:r},h.fromDebug=function(e,t,n){for(var i,r,s=e.length,o=new h(0|(s+1)/3,t,n),a=0,u=0,c=!1,l=!1,d=!1,f=!1,p=!1;s>a;){switch(i=e.charAt(a++)){case\\\"!\\\":if(!n){if(l||d||f){p=!0;break}l=d=f=!0}o.offset=o.markedOffset=o.limit=u,c=!1;break;case\\\"|\\\":if(!n){if(l||f){p=!0;break}l=f=!0}o.offset=o.limit=u,c=!1;break;case\\\"[\\\":if(!n){if(l||d){p=!0;break}l=d=!0}o.offset=o.markedOffset=u,c=!1;break;case\\\"<\\\":if(!n){if(l){p=!0;break}l=!0}o.offset=u,c=!1;break;case\\\"]\\\":if(!n){if(f||d){p=!0;break}f=d=!0}o.limit=o.markedOffset=u,c=!1;break;case\\\">\\\":if(!n){if(f){p=!0;break}f=!0}o.limit=u,c=!1;break;case\\\"'\\\":if(!n){if(d){p=!0;break}d=!0}o.markedOffset=u,c=!1;break;case\\\" \\\":c=!1;break;default:if(!n&&c){p=!0;break}if(r=parseInt(i+e.charAt(a++),16),!n&&(isNaN(r)||r<0||r>255))throw TypeError(\\\"Illegal str: Not a debug encoded string\\\");o.view[u++]=r,c=!0}if(p)throw TypeError(\\\"Illegal str: Invalid symbol at \\\"+a)}if(!n){if(!l||!f)throw TypeError(\\\"Illegal str: Missing offset or limit\\\");if(u<o.buffer.byteLength)throw TypeError(\\\"Illegal str: Not a debug encoded string (is it hex?) \\\"+u+\\\" < \\\"+s)}return o},s.toHex=function(e,t){if(e=void 0===e?this.offset:e,t=void 0===t?this.limit:t,!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal begin: Not an integer\\\");if(e>>>=0,\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal end: Not an integer\\\");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError(\\\"Illegal range: 0 <= \\\"+e+\\\" <= \\\"+t+\\\" <= \\\"+this.buffer.byteLength)}for(var n,i=new Array(t-e);t>e;)(n=this.view[e++])<16?i.push(\\\"0\\\",n.toString(16)):i.push(n.toString(16));return i.join(\\\"\\\")},h.fromHex=function(e,t,n){var i,r,s,o,a;if(!n){if(\\\"string\\\"!=typeof e)throw TypeError(\\\"Illegal str: Not a string\\\");if(e.length%2!=0)throw TypeError(\\\"Illegal str: Length not a multiple of 2\\\")}for(r=e.length,s=new h(0|r/2,t),o=0,a=0;r>o;o+=2){if(i=parseInt(e.substring(o,o+2),16),!n&&(!isFinite(i)||i<0||i>255))throw TypeError(\\\"Illegal str: Contains non-hex characters\\\");s.view[a++]=i}return s.limit=a,s},c=function(){var e={MAX_CODEPOINT:1114111,encodeUTF8:function(e,t){var n=null;for(\\\"number\\\"==typeof e&&(n=e,e=function(){return null});null!==n||null!==(n=e());)n<128?t(127&n):n<2048?(t(192|31&n>>6),t(128|63&n)):n<65536?(t(224|15&n>>12),t(128|63&n>>6),t(128|63&n)):(t(240|7&n>>18),t(128|63&n>>12),t(128|63&n>>6),t(128|63&n)),n=null},decodeUTF8:function(e,t){for(var n,i,r,s,o=function(e){e=e.slice(0,e.indexOf(null));var t=Error(e.toString());throw t.name=\\\"TruncatedError\\\",t.bytes=e,t};null!==(n=e());)if(0==(128&n))t(n);else if(192==(224&n))null===(i=e())&&o([n,i]),t((31&n)<<6|63&i);else if(224==(240&n))(null===(i=e())||null===(r=e()))&&o([n,i,r]),t((15&n)<<12|(63&i)<<6|63&r);else{if(240!=(248&n))throw RangeError(\\\"Illegal starting byte: \\\"+n);(null===(i=e())||null===(r=e())||null===(s=e()))&&o([n,i,r,s]),t((7&n)<<18|(63&i)<<12|(63&r)<<6|63&s)}},UTF16toUTF8:function(e,t){for(var n,i=null;null!==(n=null!==i?i:e());)n>=55296&&n<=57343&&null!==(i=e())&&i>=56320&&i<=57343?(t(1024*(n-55296)+i-56320+65536),i=null):t(n);null!==i&&t(i)},UTF8toUTF16:function(e,t){var n=null;for(\\\"number\\\"==typeof e&&(n=e,e=function(){return null});null!==n||null!==(n=e());)n<=65535?t(n):(t(55296+((n-=65536)>>10)),t(n%1024+56320)),n=null},encodeUTF16toUTF8:function(t,n){e.UTF16toUTF8(t,(function(t){e.encodeUTF8(t,n)}))},decodeUTF8toUTF16:function(t,n){e.decodeUTF8(t,(function(t){e.UTF8toUTF16(t,n)}))},calculateCodePoint:function(e){return e<128?1:e<2048?2:e<65536?3:4},calculateUTF8:function(e){for(var t,n=0;null!==(t=e());)n+=t<128?1:t<2048?2:t<65536?3:4;return n},calculateUTF16asUTF8:function(t){var n=0,i=0;return e.UTF16toUTF8(t,(function(e){++n,i+=e<128?1:e<2048?2:e<65536?3:4})),[n,i]}};return e}(),s.toUTF8=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal begin: Not an integer\\\");if(e>>>=0,\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal end: Not an integer\\\");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError(\\\"Illegal range: 0 <= \\\"+e+\\\" <= \\\"+t+\\\" <= \\\"+this.buffer.byteLength)}var i;try{c.decodeUTF8toUTF16(function(){return t>e?this.view[e++]:null}.bind(this),i=n())}catch(n){if(e!==t)throw RangeError(\\\"Illegal range: Truncated data, \\\"+e+\\\" != \\\"+t)}return i()},h.fromUTF8=function(e,n,i){if(!i&&\\\"string\\\"!=typeof e)throw TypeError(\\\"Illegal str: Not a string\\\");var r=new h(c.calculateUTF16asUTF8(t(e),!0)[1],n,i),s=0;return c.encodeUTF16toUTF8(t(e),(function(e){r.view[s++]=e})),r.limit=s,r},h}(Ui=function(){function e(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function t(e){return!0===(e&&e.__isLong__)}function n(e,t){var n,i,s;return t?(s=(e>>>=0)>=0&&e<256)&&(i=u[e])?i:(n=r(e,(0|e)<0?-1:0,!0),s&&(u[e]=n),n):(s=(e|=0)>=-128&&e<128)&&(i=a[e])?i:(n=r(e,e<0?-1:0,!1),s&&(a[e]=n),n)}function i(e,t){if(isNaN(e)||!isFinite(e))return t?g:p;if(t){if(e<0)return g;if(e>=l)return E}else{if(-d>=e)return T;if(e+1>=d)return v}return e<0?i(-e,t).neg():r(0|e%h,0|e/h,t)}function r(t,n,i){return new e(t,n,i)}function s(e,t,n){var r,o,a,u,h,l,d;if(0===e.length)throw Error(\\\"empty string\\\");if(\\\"NaN\\\"===e||\\\"Infinity\\\"===e||\\\"+Infinity\\\"===e||\\\"-Infinity\\\"===e)return p;if(\\\"number\\\"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||n>36)throw RangeError(\\\"radix\\\");if((r=e.indexOf(\\\"-\\\"))>0)throw Error(\\\"interior hyphen\\\");if(0===r)return s(e.substring(1),t,n).neg();for(o=i(c(n,8)),a=p,u=0;u<e.length;u+=8)h=Math.min(8,e.length-u),l=parseInt(e.substring(u,u+h),n),h<8?(d=i(c(n,h)),a=a.mul(d).add(i(l))):a=(a=a.mul(o)).add(i(l));return a.unsigned=t,a}function o(t){return t instanceof e?t:\\\"number\\\"==typeof t?i(t):\\\"string\\\"==typeof t?s(t):r(t.low,t.high,t.unsigned)}var a,u,c,h,l,d,f,p,g,_,y,m,v,E,T,I;return e.prototype.__isLong__,Object.defineProperty(e.prototype,\\\"__isLong__\\\",{value:!0,enumerable:!1,configurable:!1}),e.isLong=t,a={},u={},e.fromInt=n,e.fromNumber=i,e.fromBits=r,c=Math.pow,e.fromString=s,e.fromValue=o,d=(l=(h=4294967296)*h)/2,f=n(16777216),p=n(0),e.ZERO=p,g=n(0,!0),e.UZERO=g,_=n(1),e.ONE=_,y=n(1,!0),e.UONE=y,m=n(-1),e.NEG_ONE=m,v=r(-1,2147483647,!1),e.MAX_VALUE=v,E=r(-1,-1,!0),e.MAX_UNSIGNED_VALUE=E,T=r(0,-2147483648,!1),e.MIN_VALUE=T,(I=e.prototype).toInt=function(){return this.unsigned?this.low>>>0:this.low},I.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},I.toString=function(e){var t,n,r,s,o,a,u,h;if((e=e||10)<2||e>36)throw RangeError(\\\"radix\\\");if(this.isZero())return\\\"0\\\";if(this.isNegative())return this.eq(T)?(t=i(e),r=(n=this.div(t)).mul(t).sub(this),n.toString(e)+r.toInt().toString(e)):\\\"-\\\"+this.neg().toString(e);for(s=i(c(e,6),this.unsigned),o=this,a=\\\"\\\";;){if(u=o.div(s),h=(o.sub(u.mul(s)).toInt()>>>0).toString(e),(o=u).isZero())return h+a;for(;h.length<6;)h=\\\"0\\\"+h;a=\\\"\\\"+h+a}},I.getHighBits=function(){return this.high},I.getHighBitsUnsigned=function(){return this.high>>>0},I.getLowBits=function(){return this.low},I.getLowBitsUnsigned=function(){return this.low>>>0},I.getNumBitsAbs=function(){var e,t;if(this.isNegative())return this.eq(T)?64:this.neg().getNumBitsAbs();for(e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},I.isZero=function(){return 0===this.high&&0===this.low},I.isNegative=function(){return!this.unsigned&&this.high<0},I.isPositive=function(){return this.unsigned||this.high>=0},I.isOdd=function(){return 1==(1&this.low)},I.isEven=function(){return 0==(1&this.low)},I.equals=function(e){return t(e)||(e=o(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},I.eq=I.equals,I.notEquals=function(e){return!this.eq(e)},I.neq=I.notEquals,I.lessThan=function(e){return this.comp(e)<0},I.lt=I.lessThan,I.lessThanOrEqual=function(e){return this.comp(e)<=0},I.lte=I.lessThanOrEqual,I.greaterThan=function(e){return this.comp(e)>0},I.gt=I.greaterThan,I.greaterThanOrEqual=function(e){return this.comp(e)>=0},I.gte=I.greaterThanOrEqual,I.compare=function(e){if(t(e)||(e=o(e)),this.eq(e))return 0;var n=this.isNegative(),i=e.isNegative();return n&&!i?-1:!n&&i?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},I.comp=I.compare,I.negate=function(){return!this.unsigned&&this.eq(T)?T:this.not().add(_)},I.neg=I.negate,I.add=function(e){var n,i,s,a,u,c,h,l,d,f,p;return t(e)||(e=o(e)),n=this.high>>>16,i=65535&this.high,s=this.low>>>16,a=65535&this.low,u=e.high>>>16,c=65535&e.high,h=e.low>>>16,l=0,d=0,f=0,p=0,f+=(p+=a+(65535&e.low))>>>16,d+=(f+=s+h)>>>16,l+=(d+=i+c)>>>16,l+=n+u,r((f&=65535)<<16|(p&=65535),(l&=65535)<<16|(d&=65535),this.unsigned)},I.subtract=function(e){return t(e)||(e=o(e)),this.add(e.neg())},I.sub=I.subtract,I.multiply=function(e){var n,s,a,u,c,h,l,d,g,_,y,m;return this.isZero()?p:(t(e)||(e=o(e)),e.isZero()?p:this.eq(T)?e.isOdd()?T:p:e.eq(T)?this.isOdd()?T:p:this.isNegative()?e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg():e.isNegative()?this.mul(e.neg()).neg():this.lt(f)&&e.lt(f)?i(this.toNumber()*e.toNumber(),this.unsigned):(n=this.high>>>16,s=65535&this.high,a=this.low>>>16,u=65535&this.low,c=e.high>>>16,h=65535&e.high,l=e.low>>>16,g=0,_=0,y=0,m=0,y+=(m+=u*(d=65535&e.low))>>>16,_+=(y+=a*d)>>>16,y&=65535,_+=(y+=u*l)>>>16,g+=(_+=s*d)>>>16,_&=65535,g+=(_+=a*l)>>>16,_&=65535,g+=(_+=u*h)>>>16,g+=n*d+s*l+a*h+u*c,r((y&=65535)<<16|(m&=65535),(g&=65535)<<16|(_&=65535),this.unsigned)))},I.mul=I.multiply,I.divide=function(e){var n,r,s,a,u,h,l;if(t(e)||(e=o(e)),e.isZero())throw Error(\\\"division by zero\\\");if(this.isZero())return this.unsigned?g:p;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return g;if(e.gt(this.shru(1)))return y;s=g}else{if(this.eq(T))return e.eq(_)||e.eq(m)?T:e.eq(T)?_:(n=this.shr(1).div(e).shl(1)).eq(p)?e.isNegative()?_:m:(r=this.sub(e.mul(n)),s=n.add(r.div(e)));if(e.eq(T))return this.unsigned?g:p;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=p}for(r=this;r.gte(e);){for(n=Math.max(1,Math.floor(r.toNumber()/e.toNumber())),u=(a=Math.ceil(Math.log(n)/Math.LN2))<=48?1:c(2,a-48),l=(h=i(n)).mul(e);l.isNegative()||l.gt(r);)l=(h=i(n-=u,this.unsigned)).mul(e);h.isZero()&&(h=_),s=s.add(h),r=r.sub(l)}return s},I.div=I.divide,I.modulo=function(e){return t(e)||(e=o(e)),this.sub(this.div(e).mul(e))},I.mod=I.modulo,I.not=function(){return r(~this.low,~this.high,this.unsigned)},I.and=function(e){return t(e)||(e=o(e)),r(this.low&e.low,this.high&e.high,this.unsigned)},I.or=function(e){return t(e)||(e=o(e)),r(this.low|e.low,this.high|e.high,this.unsigned)},I.xor=function(e){return t(e)||(e=o(e)),r(this.low^e.low,this.high^e.high,this.unsigned)},I.shiftLeft=function(e){return t(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?r(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):r(0,this.low<<e-32,this.unsigned)},I.shl=I.shiftLeft,I.shiftRight=function(e){return t(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?r(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):r(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},I.shr=I.shiftRight,I.shiftRightUnsigned=function(e){var n;return t(e)&&(e=e.toInt()),0==(e&=63)?this:(n=this.high,e<32?r(this.low>>>e|n<<32-e,n>>>e,this.unsigned):r(32===e?n:n>>>e-32,0,this.unsigned))},I.shru=I.shiftRightUnsigned,I.toSigned=function(){return this.unsigned?r(this.low,this.high,!1):this},I.toUnsigned=function(){return this.unsigned?this:r(this.low,this.high,!0)},I.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},I.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,255&t>>>8,255&t>>>16,255&t>>>24,255&e,255&e>>>8,255&e>>>16,255&e>>>24]},I.toBytesBE=function(){var e=this.high,t=this.low;return[255&e>>>24,255&e>>>16,255&e>>>8,255&e,255&t>>>24,255&t>>>16,255&t>>>8,255&t]},e}()),Ui));Di.getModule=function(e){var t=new Di[e];return t.getArrayData=function(){var e=t.toArrayBuffer();return e=$(e)?[].slice.call(new Int8Array(e)):e},t};var Vi,ki=\\\"pgMsgP\\\",xi=\\\"chatMsg\\\",Bi=\\\"pcMsgP\\\",Gi={PRIVATE:\\\"ppMsgS\\\",GROUP:\\\"pgMsgS\\\",CHATROOM:\\\"chatMsgS\\\"},Fi=\\\"delMsg\\\",qi=\\\"joinChrm\\\",Ki=\\\"joinChrmR\\\",Hi=\\\"exitChrm\\\",Yi=\\\"setKV\\\",ji=\\\"delKV\\\",Qi=\\\"setKVS\\\",Wi=\\\"delKVS\\\",Ji=\\\"qryRelationR\\\",zi=\\\"delRelation\\\",Zi=\\\"setSeAtt\\\",Xi={PRIVATE:\\\"cleanPMsg\\\",GROUP:\\\"cleanGMsg\\\",ULTRA_GROUP:\\\"cleanGMsg\\\",CUSTOMER_SERVICE:\\\"cleanCMsg\\\",SYSTEM:\\\"cleanSMsg\\\"},$i=\\\"qryPMsg\\\",er=\\\"qryGMsg\\\",tr=\\\"qryCHMsg\\\",nr=\\\"qryCMsg\\\",ir=\\\"qrySMsg\\\",rr=((bi={})[\\\"ppMsgP\\\"]=j.PRIVATE,bi[ki]=j.GROUP,bi[xi]=j.CHATROOM,bi[Bi]=j.CUSTOMER_SERVICE,bi),sr=((Li={})[j.PRIVATE]=$i,Li[j.GROUP]=er,Li[j.CHATROOM]=tr,Li[j.CUSTOMER_SERVICE]=nr,Li[j.SYSTEM]=ir,Li),or=((Pi={})[j.PRIVATE]=Xi.PRIVATE,Pi[j.GROUP]=Xi.GROUP,Pi[j.ULTRA_GROUP]=Xi.ULTRA_GROUP,Pi[j.CUSTOMER_SERVICE]=Xi.CUSTOMER_SERVICE,Pi[j.SYSTEM]=Xi.SYSTEM,Pi),ar=\\\"1\\\",ur=\\\"0\\\",cr=1,hr=2,lr=3,dr=function(){function e(e){this._codec=\\\"websocket\\\"===e?Di:Ni,this._connectType=e}return e.prototype.decodeByPBName=function(e,t,n){var i,r=this,s=e,o=((i={})[Pt]=r._formatSyncMessages,i[Lt]=r._formatReceivedMessage,i[Ut]=r._formatSentMessage,i[Ft]=r._formatHistoryMessages,i[Kt]=r._formatConversationList,i[en]=r._formatChatRoomInfos,i[nn]=r._formatRTCUserList,i[ln]=r._formatRTCData,i[Mn]=r._formatChatRoomKVList,i[Vn]=r._formatUserSetting,i[Bn]=r._formatConversationStatus,i[jn]=r._formatGrpReadReceiptQryResp,i[Pn]=r._formatSetUserSettingOutput,i[kn]=r._formatUserSettingNotification,i[si]=r._formatUltraMsgChangeList,i[hi]=r._formatUltraOperateStatusNotifyList,i[ui]=r._formatUltraMsgList,i[Xt]=r._formatChrmKVVersion,i[gi]=r._formatRTCRoomKVList,i[hn]=r._formatRTCAuidenceJoinRoomData,i[yi]=r._formatRTCJoinedUserInfo,i)[t];try{s=e.length>0&&r._codec[t].decode(e),ne(s)&&(s=function(e){for(var t in e)ne(e[t])&&(e[t]=st(e[t]));return e}(s)),ie(o)&&(s=o.call(this,s,n))}catch(n){ge.error(\\\"PB parse error\\\\n\\\",n,e,t)}return s},e.prototype._readBytes=function(e){var t=e.offset,n=e.buffer,i=e.limit;if(t)try{var r=$(n)?new Uint8Array(n):n;return Mt.readUTF(r.subarray(t,i))}catch(e){ge.info(\\\"readBytes error\\\\n\\\",e)}return e},e.prototype._formatBytes=function(e){if(!e)return e;var t=this._readBytes(e);try{t=JSON.parse(t)}catch(e){ge.info(\\\"formatBytes error\\\\n\\\",e)}return t||e},e.prototype._formatSyncMessages=function(e,t){t=t||{};var n=this,i=e.list,r=e.syncTime,s=e.finished;return(re(s)||null===s)&&(e.finished=!0),e.syncTime=st(r),e.list=ft(i,(function(e){return n._formatReceivedMessage(e,t)})),e},e.prototype._formatReceivedMessage=function(e,t){if(!e)return e;var n=(t=t||{}).currentUserId,r=t.connectedTime,s=e.content,o=e.fromUserId,a=e.type,u=e.groupId,c=e.status,h=e.dataTime,l=e.classname,d=e.msgId,f=e.extraContent,p=e.pushContent,g=e.pushExt,_=e.configFlag,y=e.extStatus,m=(e.direction||me.RECEIVE)===me.SEND,v=function(e){var t=i.READ;return{isPersited:!!(16&e),isCounted:!!(32&e),isMentioned:!!(64&e),disableNotification:!!(512&e),receivedStatus:t=2&e?i.RETRIEVED:t,canIncludeExpansion:!!(1024&e)}}(c),E=v.isPersited,T=v.isCounted,I=v.isMentioned,C=v.disableNotification,R=v.receivedStatus,S=v.canIncludeExpansion,N=!!(2&(y||0)),M=!!(4&(y||0)),w=[j.GROUP,j.CHATROOM,j.RTC_ROOM,j.ULTRA_GROUP].indexOf(a)>-1?u:o,A=m?n:o,U=st(h),b=U<r,L=a===j.CHATROOM,P=this._formatBytes(s),D={};if(g&&(D=ct(g.pushConfigs,g.pushId)),P.user){var V=P.user,k=V.portrait,x=V.portraitUri,B=k||x;B&&(P.user.portrait=P.user.portraitUri=B)}var G,F=O(O({},D),{pushTitle:null==g?void 0:g.title,pushContent:p,pushData:p,disablePushTitle:!!_&&Boolean(4&_),forceShowDetailContent:!!_&&Boolean(8&_),templateId:null==g?void 0:g.templateId}),q=m?me.SEND:me.RECEIVE;L&&o===n&&(q=me.SEND),f&&(G={},G=Ct(f));var K={conversationType:a,targetId:w,senderUserId:A,messageType:l,messageUId:d,isPersited:E,isCounted:T,isMentioned:I,sentTime:U,messageDirection:q,receivedTime:Rt.getTime(),disableNotification:C,receivedStatus:R,canIncludeExpansion:S,content:P,expansion:G,configFlag:_,pushConfig:F,channelId:e.busChannel||\\\"\\\",isInterrupt:N,isModifyMessage:M};return a!==j.ULTRA_GROUP&&(K.isOffLineMessage=b),K},e.prototype._formatSentMessage=function(e,t){var n,i=e.content,r=e.classname,s=e.sessionId,o=e.msgId,a=e.extraContent,u=e.pushExt,c=e.pushContent,h=e.configFlag,l=e.extStatus,d=t.signal,f=t.currentUserId,p=d.date,g=d.topic,_=d.targetId,y=!!(2&(l||0)),m=function(e){return{isPersited:!!(1&e),isCounted:!!(2&e),disableNotification:!!(32&e),canIncludeExpansion:!!(64&e)}}(s),v=m.isPersited,E=m.isCounted,T=m.disableNotification,I=m.canIncludeExpansion,C=rr[g]||j.PRIVATE,R=_t(Gi,g),S=this._formatBytes(i),N=_;r===Se.RECALL&&(C=S.conversationType||C,N=S.targetId||_),a&&(n={},n=Ct(a));var M={};u&&(M=ct(u.pushConfigs,u.pushId));var w=O(O({},M),{pushTitle:null==u?void 0:u.title,pushContent:c,pushData:c,disablePushTitle:!!h&&Boolean(4&h),forceShowDetailContent:!!h&&Boolean(8&h),templateId:null==u?void 0:u.templateId});return{conversationType:C,targetId:N,messageType:r,messageUId:o,isPersited:v,isCounted:E,isStatusMessage:R,senderUserId:f,content:this._formatBytes(i),sentTime:1e3*p,receivedTime:Rt.getTime(),messageDirection:me.SEND,isOffLineMessage:!1,disableNotification:T,canIncludeExpansion:I,expansion:n,pushConfig:w,channelId:e.busChannel||\\\"\\\",isInterrupt:y}},e.prototype._formatHistoryMessages=function(e,t){var n=this,i=t.conversation||{},r=e.list,s=e.hasMsg,o=i.targetId,a=st(e.syncTime),u=[];return dt(r,(function(e){var r=n._formatReceivedMessage(e,t);i.conversationType===j.ULTRA_GROUP?r.targetId=e.groupId||i.targetId:r.targetId=o,u.push(r)}),{isReverse:!0}),{syncTime:a,list:u,hasMore:!!s}},e.prototype._formatUltraMsgChangeList=function(e){var t=e.list,n=e.syncTime,i=e.hasNext;return{syncTime:n,list:t&&t.map((function(e){var t=e.targetId,n=e.type,i=e.time,r=e.changeType,s=e.msgUID,o=e.msgTime,a=e.busChannel,u=e.isAdmin,c=e.isDel,h=e.operatorId;return{targetId:t,conversationType:n,changeType:r,messageUId:s,changeTime:st(i),sendTime:st(o),channelId:a,isAdmin:u,isDel:c,operatorId:h}})),hasNext:i}},e.prototype._formatUltraOperateStatusNotifyList=function(e){var t=e.type,n=e.notifyType,i=e.info,r=e.summary,s=[],o=[],a=2==(2&n),u=1==(1&n);return u&&Array.isArray(i)&&i.forEach((function(e){var t=e.targetId,n=e.busChannel,i=e.userId,r=e.opType,o=e.optime,a=st(o);s.push({targetId:t,channelId:n,userId:i,operationType:r,operationTime:a})})),a&&Array.isArray(r)&&r.forEach((function(e){var t=e.targetId,n=e.busChannel,i=e.count,r=e.opType;o.push({targetId:t,channelId:n,count:i,operationType:r})})),{conversationType:t,info:s,summary:o,hasInfo:u,hasSummary:a}},e.prototype._formatUltraMsgList=function(e,t){var n=this,i=e.list;return{list:i&&i.map((function(e){return n._formatReceivedMessage(e,t)}))}},e.prototype._formatConversationList=function(e,t){var n=this,i=e.info,r=t.afterDecode||function(){},s={list:i=ft(i,(function(e){var i=e.msg,s=e.userId,o=e.type,a=e.unreadCount,u=e.busChannel,c=e.versionTime,h=e.remindCount,l=null;i&&((l=n._formatReceivedMessage(i,t)).targetId=s);var d={targetId:s,conversationType:o,unreadMessageCount:st(a)||0,latestMessage:l||{},channelId:u||\\\"\\\"};return o===j.ULTRA_GROUP&&(d.versionTime=st(c)||0,d.unreadMentionedCount=st(h)||0),r(d)||d}))};return((null==t?void 0:t.conversationType)||j.NONE)===j.ULTRA_GROUP&&(s.isFinished=e.isFinished),s},e.prototype._formatSetUserSettingOutput=function(e){return e},e.prototype._formatChatRoomInfos=function(e){var t=e.userTotalNums,n=e.userInfos;return{userCount:t,userInfos:ft(n,(function(e){var t=e.id,n=e.time;return{id:t,time:st(n)}}))}},e.prototype._formatChatRoomKVList=function(e){var t=e.entries,n=e.bFullUpdate,i=e.syncTime;return{kvEntries:t=ft(t=t||[],(function(e){var t=e.key,n=e.value,i=e.status,r=e.timestamp,s=e.uid,o=e.version,a=function(e){return{isAutoDelete:!!(1&e),isOverwrite:!!(2&e),type:4&e?Le.DELETE:Le.UPDATE}}(i);return{key:t,value:n,isAutoDelete:a.isAutoDelete,isOverwrite:a.isOverwrite,type:a.type,userId:s,timestamp:st(r),version:st(o)}})),isFullUpdate:n,syncTime:i}},e.prototype._formatUserSetting=function(e){var t=this,n=e.items,i=e.version,r={};return dt(n||[],(function(e){var n=e.key,i=e.version,s=e.value;e.version=st(i),e.value=t._readBytes(s),\\\"Tag\\\"===n&&e.tags.forEach((function(e){e.createdTime=st(e.createdTime),e.tagName=e.name})),r[n]=e})),{settings:r,version:i}},e.prototype._formatConversationStatus=function(e){var t=e.state,n=[];return dt(t,(function(e){var t=e.type,i=e.channelId,r=e.time,s=e.stateItem,o=e.busChannel,a=Oe.CLOSE,u=!1,c=[];dt(s,(function(e){var t=e.sessionStateType,n=e.value,i=e.tags;switch(t){case cr:a=n===ar?Oe.OPEN:Oe.CLOSE;break;case hr:u=n===ar;break;case lr:c=i}})),n.push({conversationType:t,type:t,targetId:i,notificationStatus:a,isTop:u,updatedTime:st(r),tags:c,channelId:o||\\\"\\\"})})),n},e.prototype._formatRTCUserList=function(e){var t=e.users,n=e.token,i=e.sessionId,r=e.roomInfo,s=e.entries,o={};return dt(t,(function(e){var t=e.userId,n=e.userData,i={};dt(n,(function(e){var t=e.key,n=e.value;i[t]=n})),o[t]=i})),{users:o,token:n,sessionId:i,roomInfo:r,kvEntries:s}},e.prototype._formatRTCData=function(e){var t=e.outInfo,n={};return dt(t,(function(e){n[e.key]=e.value})),n},e.prototype._formatRTCRoomInfo=function(e){var t=e.roomId,n=e.userCount,i=e.roomData,r={id:t,total:n};return dt(i,(function(e){r[e.key]=e.value})),r},e.prototype._formatGrpReadReceiptQryResp=function(e){var t=e.totalMemberNum,n=e.list;return n.forEach((function(e){e.readTime=st(e.readTime)})),{totalMemberCount:t,list:n}},e.prototype._formatUserSettingNotification=function(e){return e},e.prototype._formatRTCRoomKVList=function(e){var t=e.entries,n=e.bFullUpdate,i=e.syncTime;return{kvEntries:t=(t=t||[]).map((function(e){var t=e.timestamp;return Object.assign(e,{timestamp:st(t)})})),isFullUpdate:n,syncTime:i}},e.prototype._formatChrmKVVersion=function(e){return e},e.prototype._formatRTCAuidenceJoinRoomData=function(e){return e},e.prototype._formatRTCJoinedUserInfo=function(e){return(e.info||[]).map((function(e){return{deviceId:e.deviceId,roomId:e.roomId,joinTime:st(e.joinTime)}}))},e.prototype.encodeServerConfParams=function(){var e=this._codec.getModule(Dt);return e.setNothing(1),e.getArrayData()},e.prototype._getUpMsgModule=function(e,t){var n,i,r,s=\\\"comet\\\"===this._connectType,o=e.conversationType,a=t.messageType,u=t.isMentioned,c=t.mentionedType,h=t.mentionedUserIdList,l=t.content,d=t.pushContent,f=t.pushData,p=t.directionalUserIdList,g=t.isFilerWhiteBlacklist,_=t.isVoipPush,y=t.canIncludeExpansion,m=t.expansion,v=t.pushConfig,E=t.channelId;[j.GROUP,j.ULTRA_GROUP].includes(o);var T=this._codec.getModule(Ut),I=function(e){var t=e.isStatusMessage,n=e.isPersited,i=e.isCounted;t&&(n=i=!1);var r=0;return n&&(r|=1),i&&(r|=2),e.isMentioned&&(r|=4),e.disableNotification&&(r|=32),e.canIncludeExpansion&&(r|=64),r}(t),C=v||{},R=C.pushTitle,S=C.pushContent,N=C.pushData,O=C.iOSConfig,M=C.androidConfig,w=C.templateId,A=C.disablePushTitle,U=C.forceShowDetailContent,b=0;T.setSessionId(I),u&&l&&(l.mentionedInfo={userIdList:(null===(n=l.mentionedInfo)||void 0===n?void 0:n.userIdList)||h||[],type:(null===(i=l.mentionedInfo)||void 0===i?void 0:i.type)||c||we.ALL,mentionedContent:(null===(r=l.mentionedInfo)||void 0===r?void 0:r.mentionedContent)||\\\"\\\"});var L=S||d||\\\"\\\",P=N||f||\\\"\\\";if(L&&T.setPushText(L),P&&T.setAppData(P),p&&T.setUserId(p),b|=_?1:0,b|=g?2:0,b|=A?4:0,b|=U?8:0,T.setConfigFlag(b),T.setClassname(a),l.user&&l.user.portraitUri&&(l.user.portrait=l.user.portraitUri),T.setContent(JSON.stringify(l)),y&&m){var D={};dt(m,(function(e,t){D[t]={v:e}})),T.setExtraContent(JSON.stringify(D))}if(v){var V=this._codec.getModule(bt);if(R&&V.setTitle(R),O&&M){var k=ut(O,M);V.setPushConfigs(k)}(null==M?void 0:M.notificationId)&&V.setPushId(null==M?void 0:M.notificationId),V.setTemplateId(w||\\\"\\\"),T.setPushExt(s?V.getArrayData():V)}return re(E)||T.setBusChannel(E),T},e.prototype.encodeUpMsg=function(e,t){return this._getUpMsgModule(e,t).getArrayData()},e.prototype.encodeSyncMsg=function(e){var t=e.sendboxTime,n=e.inboxTime,i=this._codec.getModule(kt);return i.setIspolling(!1),i.setIsPullSend(!0),i.setSendBoxSyncTime(t),i.setSyncTime(n),i.getArrayData()},e.prototype.encodeChrmSyncMsg=function(e,t){e=e||0,t=t||0;var n=this._codec.getModule(xt);return n.setCount(t),n.setSyncTime(e),n.getArrayData()},e.prototype.encodeGetHistoryMsg=function(e,t){var n=t.count,i=t.order,r=t.timestamp,s=t.channelId,o=this._codec.getModule(Gt);return o.setTargetId(e),o.setTime(r),o.setCount(n),o.setOrder(i),o.setBusChannel(s||\\\"\\\"),o.getArrayData()},e.prototype.encodeSuperSyncMsg=function(e){var t=this._codec.getModule(ti);return t.setSyncTime(e),t.getArrayData()},e.prototype.encodeGetConversationList=function(e){var t=(e=e||{}).count,n=e.startTime,i=this._codec.getModule(qt);return i.setType(1),i.setCount(t),i.setStartTime(n),i.getArrayData()},e.prototype.encodeOldConversationList=function(e){var t=(e=e||{}).count,n=e.type,i=e.startTime,r=e.order;t=t||0,i=i||0,r=r||0;var s=this._codec.getModule(qt);return s.setType(n),s.setCount(t),s.setStartTime(i),s.setOrder(r),s.getArrayData()},e.prototype.encodeRemoveOldConversationList=function(e){var t=(e=e||{}).conversationType,n=e.channelId,i=this._codec.getModule(Qt);return i.setType(t),n&&i.setBusChannel([n]),i.getArrayData()},e.prototype.encodeRemoveConversationList=function(e){var t=this,n=this._codec.getModule(Ht),i=[];return dt(e,(function(e){var n=e.conversationType,r=e.targetId,s=t._codec.getModule(Yt);s.setType(n),s.setChannelId(r),i.push(s)})),n.setSessions(i),n.getArrayData()},e.prototype.encodeDeleteMessages=function(e,t,n,i){var r=this._codec.getModule(Wt),s=[];return dt(n,(function(e){s.push({msgId:e.messageUId,msgDataTime:e.sentTime,direct:e.messageDirection})})),r.setType(e),r.setConversationId(t),r.setMsgs(s),r.setBusChannel(i),r.getArrayData()},e.prototype.encodeClearMessages=function(e,t,n,i){var r=this._codec.getModule(Jt);return t=t||(new Date).getTime(),r.setDataTime(t),r.setTargetId(e),r.setBusChannel(n),r.setConversationType(i),r.getArrayData()},e.prototype.encodeClearUnreadCount=function(e,t){var n=e.conversationType,i=e.targetId,r=e.channelId,s=t.timestamp,o=this._codec.getModule(zt);return s=s||+new Date,o.setType(n),o.setChannelId(i),o.setMsgTime(s),o.setBusChannel(r),o.getArrayData()},e.prototype.encodeExpandUltraMessage=function(e,t){var n=e.targetId,i=e.conversationType,r=e.channelId,s=e.messageUId,o=e.sendTime,a=e.keys,u={mid:s,put:e.expansion,del:a,clear:e.removeAll?1:0},c=this._codec.getModule(ni);return c.setFromUserId(t),c.setTargetId(n),c.setType(i),c.setBusChannel(r||\\\"\\\"),c.setMsgUID(s),c.setMsgTime(o),c.setContent(JSON.stringify(u)),c.getArrayData()},e.prototype.encodemodifyMessage=function(e,t){var n=e.targetId,i=e.conversationType,r=e.channelId,s=e.messageUId,o=e.sendTime,a=e.content,u=this._codec.getModule(ni);return u.setFromUserId(t),u.setTargetId(n),u.setType(i),u.setBusChannel(r||\\\"\\\"),u.setMsgUID(s),u.setMsgTime(o),u.setContent(JSON.stringify(a)),u.getArrayData()},e.prototype.encodeQueryMsgChange=function(e){var t=this._codec.getModule(ii);return t.setSyncTime(e),t.getArrayData()},e.prototype.encodeMsgQuery=function(e){var t=e.targetId,n=e.conversationType,i=e.messages,r=this._codec.getModule(oi),s=i.map((function(e){return{msgTime:e.sendTime,msgUID:e.messageUId,busChannel:e.channelId}}));return r.setTargetId(t),r.setType(n),r.setQuery(s),r.getArrayData()},e.prototype.encodeOperateStatus=function(e,t,n,i){var r=this._codec.getModule(ci);return r.setTargetId(e),r.setType(t),r.setBusChannel(n),r.setOpType(i),r.getArrayData()},e.prototype.encodeJoinOrQuitChatRoom=function(){var e=this._codec.getModule(Zt);return e.setNothing(1),e.getArrayData()},e.prototype.encodeGetChatRoomInfo=function(e,t){var n=this._codec.getModule($t);return n.setCount(e),n.setOrder(t),n.getArrayData()},e.prototype.encodeGetFileToken=function(e,t,n,i){var r=this._codec.getModule(mn);return r.setType(e),r.setKey(t),r.setHttpMethod(n),r.setQueryString(i),r.getArrayData()},e.prototype.encodeGetFileUrl=function(e,t,n,i){var r=this._codec.getModule(e);return r.setType(t),r.setKey(n),i&&r.setFileName(i),r.getArrayData()},e.prototype.encodeModifyChatRoomKV=function(e,t,n){var i=\\\"comet\\\"===this._connectType,r=this._codec.getModule(Sn),s=t.key,o=t.value,a=t.notificationExtra,u=t.isSendNotification,c=t.type,h=t.timestamp,l=c||Le.UPDATE,d=St(t,l),f={key:s,value:o||\\\"\\\",uid:n,version:h};if(re(d)||(f.status=d),r.setEntry(f),u){var p={conversationType:j.CHATROOM,targetId:e},g={key:s,value:o,extra:a,type:l},_=this._getUpMsgModule(p,{messageType:Se.CHRM_KV_NOTIFY,content:g,isPersited:!1,isCounted:!1});i?r.setNotification(_.getArrayData()):r.setNotification(_),r.setBNotify(!0),r.setType(j.CHATROOM)}return r.getArrayData()},e.prototype.encodeModifyChatRoomKVS=function(e,t,n){this._connectType;var i=this._codec.getModule(Nn),r=t.entries,s=t.type||Le.UPDATE,o=St(t,s),a=[];return r.forEach((function(e){var t={key:e.key,value:e.value||\\\"\\\",uid:n,version:e.timestamp};re(o)||(t.status=o),a.push(t)})),i.setEntry(a),i.getArrayData()},e.prototype.encodePullChatRoomKV=function(e){var t=this._codec.getModule(bn);return t.setTimestamp(e),t.getArrayData()},e.prototype.encodePullUserSetting=function(e){var t=this._codec.getModule(Dn);return t.setVersion(e),t.getArrayData()},e.prototype.encodeGetConversationStatus=function(e){var t=this._codec.getModule(xn);return t.setTime(e),t.getArrayData()},e.prototype.encodeSetConversationStatus=function(e){var t=this,n=\\\"comet\\\"===this._connectType,i=this._codec.getModule(qn),r=Rt.getTime(),s=[];return dt(e,(function(e){var i=t._codec.getModule(Gn),o=e.conversationType,a=e.targetId,u=e.notificationStatus,c=e.isTop,h=e.channelId,l=[];i.setType(o),i.setChannelId(a),i.setTime(r),i.setBusChannel(h);var d=u===Oe.OPEN,f={};re(u)||(f[cr]=d),re(c)||(f[hr]=c),dt(f,(function(e,i){if(!re(e)){var r=t._codec.getModule(Fn);e=e?ar:ur,r.setSessionStateType(Number(i)),r.setValue(e);var s=n?r.getArrayData():r;l.push(s)}})),i.setStateItem(l);var p=n?i.getArrayData():i;s.push(p)})),i.setVersion(r),i.setState(s),i.getArrayData()},e.prototype.encodeReadReceipt=function(e,t){var n=this._codec.getModule(Hn);return n.setMsgId(e),t&&n.setChannelId(t),n.getArrayData()},e.prototype.encodeCreateTag=function(e,t){var n=this,i=\\\"comet\\\"===this._connectType,r=this._codec.getModule(Wn),s=[];return e.forEach((function(e){var t=n._codec.getModule(Jn);t.setTagId(e.tagId),t.setName(e.tagName),s.push(i?t.getArrayData():t)})),r.setTags(s),r.setVersion(t),r.getArrayData()},e.prototype.encodeMessageReader=function(e,t){var n=this._codec.getModule(Hn);return n.setMsgId(e),t&&n.setChannelId(t),n.getArrayData()},e.prototype.encodeRemoveTag=function(e,t){var n=this,i=\\\"comet\\\"===this._connectType,r=this._codec.getModule(zn),s=[];return e.forEach((function(e){var t=n._codec.getModule(Jn);t.setTagId(e),s.push(i?t.getArrayData():t)})),r.setTags(s),r.setVersion(t),r.getArrayData()},e.prototype.encodeDisConversationTag=function(e){var t=this._codec.getModule(Zn);return t.setTagId(e),t.getArrayData()},e.prototype.encodeUpdateConversationTag=function(e,t){var n=this,i=\\\"comet\\\"===this._connectType,r=this._codec.getModule(qn),s=[];return t.forEach((function(t){var r=n._codec.getModule(Gn),o=n._codec.getModule(Fn),a=[];e.forEach((function(e){var t=n._codec.getModule(Jn);t.setTagId(e.tagId),re(e.isTop)||t.setIsTop(e.isTop),a.push(i?t.getArrayData():t)})),o.setSessionStateType(lr),o.setValue(JSON.stringify(a)),o.setTags(a),r.setType(t.conversationType),r.setChannelId(t.targetId),r.setTime(Date.now()),r.setStateItem([i?o.getArrayData():o]),s.push(i?r.getArrayData():r)})),r.setState(s),r.setVersion(Rt.getTime()),r.getArrayData()},e.prototype.encodeReportSDKInfo=function(e){var t=this._codec.getModule(Xn);return t.setSdkInfo(e),t.getArrayData()},e.prototype.encodeUltraGroup=function(e,t){var n=this._codec.getModule(ei);return n.setSyncTime(e),n.setIsEraseMsgContent(t),n.getArrayData()},e.prototype.encodeJoinRTCRoom=function(e,t,n,i,r){var s=this,o=\\\"comet\\\"===this._connectType,a=this._codec.getModule(tn);if(e=e||0,a.setRoomType(e),re(t)||a.setBroadcastType(t),re(n)||a.setJoinType(n),i){var u=[],c=this._codec.getModule(_n);for(var h in i)c.setKey(h),c.setValue(i[h]),o?u.push(c.getArrayData()):u.push(c);a.setInnerDatas(u)}if(r){var l=[];Object.keys(r).forEach((function(e){var t=s._codec.getModule(_n);t.setKey(e),t.setValue(r[e]),o?l.push(t.getArrayData()):l.push(t)})),a.setOuterDatas(l)}return a.getArrayData()},e.prototype.encodeQuitRTCRoom=function(){return this._codec.getModule(rn).getArrayData()},e.prototype.encodeSetRTCData=function(e,t,n,i,r){var s=this._codec.getModule(sn);if(s.setInterior(n),s.setTarget(i),s.setKey(e),s.setValue(t),r){r.name&&s.setObjectName(r.name);var o=r.content;o&&(ne(o)&&(o=JSON.stringify(o)),s.setContent(o))}return s.getArrayData()},e.prototype.encodeUserSetRTCData=function(e,t,n,i){var r=this,s=\\\"comet\\\"===this._connectType,o=this._codec.getModule(on);o.setObjectName(n);var a=this._codec.getModule(_n);a.setKey(e.name),a.setValue(e.content),s?o.setContent(a.getArrayData()):o.setContent(a);var u=[];return[\\\"uris\\\",\\\"mcu_uris\\\"].forEach((function(e){var n=r._codec.getModule(_n);n.setKey(e);var o=\\\"uris\\\"===e?t:i;n.setValue(o),s?u.push(n.getArrayData()):u.push(n)})),o.setValueInfo(u),o.getArrayData()},e.prototype.encodeUserSetRTCCDNUris=function(e,t){this._connectType;var n=this._codec.getModule(on);n.setObjectName(e);var i=this._codec.getModule(_n);return i.setKey(\\\"cdn_uris\\\"),i.setValue(t),n.setValueInfo(i),n.getArrayData()},e.prototype.encodeGetRTCData=function(e,t,n){var i=this._codec.getModule(an);return i.setInterior(t),i.setTarget(n),i.setKey(e),i.getArrayData()},e.prototype.encodeRemoveRTCData=function(e,t,n,i){var r=this._codec.getModule(an);r.setInterior(t),r.setTarget(n),r.setKey(e);var s=(i=i||{}).name,o=i.content;return!re(s)&&r.setObjectName(s),re(o)||(ne(o)&&(o=JSON.stringify(o)),r.setContent(o)),r.getArrayData()},e.prototype.encodeSetRTCOutData=function(e,t,n){var i=this._codec.getModule(un);i.setTarget(t),X(e)||(e=[e]),dt(e,(function(t,n){t.key=t.key?t.key.toString():t.key,t.value=t.value?t.value.toString():t.value,e[n]=t})),i.setValueInfo(e);var r=(n=n||{}).name,s=n.content;return!re(r)&&i.setObjectName(r),re(s)||(ne(s)&&(s=JSON.stringify(s)),i.setContent(s)),i.getArrayData()},e.prototype.ecnodeGetRTCOutData=function(e){var t=this._codec.getModule(dn);return t.setUserId(e),t.getArrayData()},e.prototype.encodeSetRTCState=function(e){var t=this._codec.getModule(cn);return t.setState(e),t.getArrayData()},e.prototype.encodeGetRTCRoomInfo=function(){var e=this._codec.getModule(pn);return e.setOrder(2),e.getArrayData()},e.prototype.encodeSetRTCUserInfo=function(e,t){var n=this._codec.getModule(_n);return n.setKey(e),n.setValue(t),n.getArrayData()},e.prototype.encodeRemoveRTCUserInfo=function(e){var t=this._codec.getModule(yn);return t.setKey(e),t.getArrayData()},e.prototype.encodeIdentityChangeInfo=function(e,t,n){void 0===n&&(n=!1);var i=this._codec.getModule(tn);return i.setRoomType(xe.LIVE),t&&i.setBroadcastType(t),i.setIdentityChangeType(e),i.setNeedSysChatroom(n),i.getArrayData()},e.prototype.encodePullRTCRoomKV=function(e,t){var n=this._codec.getModule(pi);return n.setTimestamp(t),n.setRoomId(e),n.getArrayData()},e.prototype.encodeQueryUserJoinedInfo=function(e){var t=this._codec.getModule(_i);return t.setUserId(e),t.getArrayData()},e.prototype.encodeRequestRoomPK=function(e){var t=e.invitedRoomId,n=e.invitedUserId,i=e.inviteSessionId,r=e.inviteTimeout,s=e.inviteInfo,o=this._codec.getModule(vi);return o.setInvitedRoomId(t),o.setInvitedUserId(n),o.setInviteSessionId(i),o.setTimeoutTime(r),o.setInviteInfo(s),o.getArrayData()},e.prototype.encodeCancelRoomPK=function(e){var t=e.invitedRoomId,n=e.invitedUserId,i=e.inviteSessionId,r=e.inviteInfo,s=this._codec.getModule(Ei);return s.setInvitedRoomId(t),s.setInvitedUserId(n),s.setInviteSessionId(i),s.setInviteInfo(r),s.getArrayData()},e.prototype.encodeResponseRoomPK=function(e){var t=e.inviteUserId,n=e.inviteRoomId,i=e.inviteSessionId,r=e.content,s=e.key,o=e.value,a=e.agree?1:0,u=this._codec.getModule(Ti);return u.setInviteUserId(t),u.setInviteRoomId(n),u.setInviteSessionId(i),u.setContent(r),u.setKey(s),u.setValue(o),u.setAnswerCode(a),u.getArrayData()},e.prototype.encodeEndRoomPK=function(e){var t=e.endRoomId,n=e.sessionId,i=e.content,r=e.keys,s=this._codec.getModule(Ii);return s.setInviteRoomId(t),s.setInviteSessionId(n),s.setInviteContent(i),s.setInviteRoomKeys(r),s.getArrayData()},e.prototype.encodebindRTCRoomForChatroom=function(e){var t=this._codec.getModule(Ci);return t.setRtcRoomId(e.rtcRoomId),t.getArrayData()},e}(),fr=function(e,t){this._watcher=t,this.codec=new dr(e)},pr=function(e,t){return e&&t?t+\\\"_\\\"+e:e||Date.now()},gr=function(){function e(e){this.header=e,this._name=null,this.lengthSize=0,this.messageId=0,this.timestamp=0,this.syncMsg=!1,this.identifier=\\\"\\\"}return e.prototype.getIdentifier=function(){var e=this.messageId,t=this.identifier;return pr(e,t)},e.prototype.read=function(e,t,n){this.readMessage(e,t,n)},e.prototype.readMessage=function(e,t,n){return{stream:e,length:t}},e}(),_r=function(){function e(e){this.lengthSize=0,this.messageId=0,this.topic=\\\"\\\",this.targetId=\\\"\\\",this.identifier=\\\"\\\",this._header=new Ot(e,!1,ze.AT_MOST_ONCE,!1)}return e.prototype.getIdentifier=function(){var e=this.messageId,t=this.identifier;return pr(e,t)},e.prototype.write=function(e){var t=this.getHeaderFlag();e.write(t),this.writeMessage(e)},e.prototype.setHeaderQos=function(e){this._header.qos=e},e.prototype.getHeaderFlag=function(){return this._header.encode()},e.prototype.getLengthSize=function(){return this.lengthSize},e.prototype.getBufferData=function(){var e=new At;this.write(e);var t=e.getBytesArray();return new Int8Array(t)},e.prototype.getCometData=function(){var e=this.data||{};return JSON.stringify(e)},e}(),yr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._name=Xe.CONN_ACK,t.status=null,t.userId=null,t.timestamp=0,t}return N(t,e),t.prototype.readMessage=function(e,n,i){if(e.readByte(),this.status=+e.readByte(),n<=t.MESSAGE_LENGTH)return{stream:e,length:n};if(i===et.V4){var r=e.readByte();1&r&&(this.userId=e.readUTF()),2&r&&e.readUTF(),4&r&&(this.timestamp=e.readLong()),8&r&&(this.messageId=e.read2Byte())}else{this.userId=e.readUTF();var s=e.readUTF();ge.debug(\\\"server sessionId -> \\\"+s),this.timestamp=e.readLong()}return{stream:e,length:n}},t.MESSAGE_LENGTH=2,t}(gr),mr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._name=Xe.DISCONNECT,t.status=0,t}return N(t,e),t.prototype.readMessage=function(e,t){return e.readByte(),this.status=+e.readByte(),{stream:e,length:t}},t.MESSAGE_LENGTH=2,t}(gr),vr=function(e){function t(){var t=e.call(this,Ze.PING_REQ)||this;return t._name=Xe.PING_REQ,t}return N(t,e),t.prototype.writeMessage=function(e){},t}(_r),Er=function(e){function t(t){var n=e.call(this,t)||this;return n._name=Xe.PING_RESP,n}return N(t,e),t}(gr),Tr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.messageId=0,t}return N(t,e),t.prototype.readMessage=function(e,t){var n=256*e.readByte()+e.readByte();return this.messageId=parseInt(n.toString(),10),{stream:e,length:t}},t}(gr),Ir=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.messageId=0,t}return N(t,e),t.prototype.writeMessage=function(e){var t=this.messageId,n=255&t,i=(65280&t)>>8;e.write(i),e.write(n)},t}(_r),Cr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._name=Xe.PUBLISH,t.topic=\\\"\\\",t.targetId=\\\"\\\",t.syncMsg=!1,t.identifier=$e.PUB,t}return N(t,e),t.prototype.readMessage=function(t,n){return this.date=t.readInt(),this.topic=t.readUTF(),this.targetId=t.readUTF(),e.prototype.readMessage.call(this,t,n),this.data=t.readAll(),{stream:t,length:n}},t}(Tr),Rr=function(e){function t(t,n,i){var r=e.call(this,Ze.PUBLISH)||this;return r._name=Xe.PUBLISH,r.syncMsg=!1,r.identifier=$e.PUB,r.topic=t,r.data=J(n)?Mt.writeUTF(n):n,r.targetId=i,r}return N(t,e),t.prototype.writeMessage=function(t){t.writeUTF(this.topic),t.writeUTF(this.targetId),e.prototype.writeMessage.call(this,t),t.write(this.data)},t}(Ir),Sr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._name=Xe.PUB_ACK,t.status=0,t.date=0,t.millisecond=0,t.messageUId=\\\"\\\",t.timestamp=0,t.identifier=$e.PUB,t.topic=\\\"\\\",t.targetId=\\\"\\\",t}return N(t,e),t.prototype.readMessage=function(t,n){return e.prototype.readMessage.call(this,t,n),this.date=t.readInt(),this.status=256*t.readByte()+t.readByte(),this.millisecond=256*t.readByte()+t.readByte(),this.timestamp=1e3*this.date+this.millisecond,this.messageUId=t.readUTF(),{stream:t,length:n}},t}(Tr),Nr=function(e){function t(t){var n=e.call(this,Ze.PUB_ACK)||this;return n._name=Xe.PUB_ACK,n.status=0,n.date=0,n.millisecond=0,n.messageUId=\\\"\\\",n.timestamp=0,n.messageId=t,n}return N(t,e),t.prototype.writeMessage=function(t){e.prototype.writeMessage.call(this,t)},t}(Ir),Or=function(e){function t(t,n,i){var r=e.call(this,Ze.QUERY)||this;return r.name=Xe.QUERY,r.identifier=$e.QUERY,r.topic=t,r.data=J(n)?Mt.writeUTF(n):n,r.targetId=i,r}return N(t,e),t.prototype.writeMessage=function(t){t.writeUTF(this.topic),t.writeUTF(this.targetId),e.prototype.writeMessage.call(this,t),t.write(this.data)},t}(Ir),Mr=function(e){function t(t){var n=e.call(this,Ze.QUERY_CONFIRM)||this;return n._name=Xe.QUERY_CON,n.messageId=t,n}return N(t,e),t}(Ir),wr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._name=Xe.QUERY_ACK,t.status=0,t.identifier=$e.QUERY,t.topic=\\\"\\\",t.targetId=\\\"\\\",t}return N(t,e),t.prototype.readMessage=function(t,n){return e.prototype.readMessage.call(this,t,n),this.date=t.readInt(),this.status=256*t.readByte()+t.readByte(),this.data=t.readAll(),{stream:t,length:n}},t}(Tr),Ar=function(e){var t,n=e.type;switch(n){case Ze.CONN_ACK:t=new yr(e);break;case Ze.PUBLISH:(t=new Cr(e)).syncMsg=e.syncMsg;break;case Ze.PUB_ACK:t=new Sr(e);break;case Ze.QUERY_ACK:t=new wr(e);break;case Ze.SUB_ACK:case Ze.UNSUB_ACK:case Ze.PING_RESP:t=new Er(e);break;case Ze.DISCONNECT:t=new mr(e);break;default:t=new gr(e),ge.error(\\\"No support for deserializing \\\"+n+\\\" messages\\\")}return t};!function(e){e[e.ppMsgP=1]=\\\"ppMsgP\\\",e[e.ppMsgN=2]=\\\"ppMsgN\\\",e[e.ppMsgS=3]=\\\"ppMsgS\\\",e[e.pgMsgP=4]=\\\"pgMsgP\\\",e[e.chatMsg=5]=\\\"chatMsg\\\",e[e.pcMsgP=6]=\\\"pcMsgP\\\",e[e.qryPMsg=7]=\\\"qryPMsg\\\",e[e.qryGMsg=8]=\\\"qryGMsg\\\",e[e.qryCHMsg=9]=\\\"qryCHMsg\\\",e[e.qryCMsg=10]=\\\"qryCMsg\\\",e[e.qrySMsg=11]=\\\"qrySMsg\\\",e[e.recallMsg=12]=\\\"recallMsg\\\",e[e.prMsgS=13]=\\\"prMsgS\\\",e[e.rrMsg=14]=\\\"rrMsg\\\",e[e.rrList=15]=\\\"rrList\\\",e[e.s_ntf=16]=\\\"s_ntf\\\",e[e.s_msg=17]=\\\"s_msg\\\",e[e.s_stat=18]=\\\"s_stat\\\",e[e.s_cmd=19]=\\\"s_cmd\\\",e[e.s_us=20]=\\\"s_us\\\",e[e.pullUS=21]=\\\"pullUS\\\",e[e.pgMsgS=22]=\\\"pgMsgS\\\",e[e.chatMsgS=23]=\\\"chatMsgS\\\",e[e.qrySessionsAtt=24]=\\\"qrySessionsAtt\\\",e[e.pullMsg=25]=\\\"pullMsg\\\",e[e.qrySessions=26]=\\\"qrySessions\\\",e[e.delSessions=27]=\\\"delSessions\\\",e[e.delMsg=28]=\\\"delMsg\\\",e[e.updRRTime=29]=\\\"updRRTime\\\",e[e.chrmPull=30]=\\\"chrmPull\\\",e[e.joinChrm=31]=\\\"joinChrm\\\",e[e.joinChrmR=32]=\\\"joinChrmR\\\",e[e.exitChrm=33]=\\\"exitChrm\\\",e[e.queryChrmI=34]=\\\"queryChrmI\\\",e[e.setKV=35]=\\\"setKV\\\",e[e.delKV=36]=\\\"delKV\\\",e[e.pullKV=37]=\\\"pullKV\\\",e[e.qryRelation=38]=\\\"qryRelation\\\",e[e.delRelation=39]=\\\"delRelation\\\",e[e.pullSeAtts=40]=\\\"pullSeAtts\\\",e[e.setSeAtt=41]=\\\"setSeAtt\\\",e[e.qnTkn=42]=\\\"qnTkn\\\",e[e.qnUrl=43]=\\\"qnUrl\\\",e[e.aliUrl=44]=\\\"aliUrl\\\",e[e.s3Url=45]=\\\"s3Url\\\",e[e.stcUrl=46]=\\\"stcUrl\\\",e[e.cleanPMsg=47]=\\\"cleanPMsg\\\",e[e.cleanGMsg=48]=\\\"cleanGMsg\\\",e[e.cleanCMsg=49]=\\\"cleanCMsg\\\",e[e.cleanSMsg=50]=\\\"cleanSMsg\\\",e[e.rtcRJoin_data=51]=\\\"rtcRJoin_data\\\",e[e.rtcRExit=52]=\\\"rtcRExit\\\",e[e.rtcPing=53]=\\\"rtcPing\\\",e[e.rtcSetData=54]=\\\"rtcSetData\\\",e[e.rtc_ntf=55]=\\\"rtc_ntf\\\",e[e.viewerJoinR=56]=\\\"viewerJoinR\\\",e[e.viewerExitR=57]=\\\"viewerExitR\\\",e[e.rtcPullKv=58]=\\\"rtcPullKv\\\",e[e.rtcIdentityChange=59]=\\\"rtcIdentityChange\\\",e[e.userSetData=60]=\\\"userSetData\\\",e[e.rtcQryData=61]=\\\"rtcQryData\\\",e[e.rtcDelData=62]=\\\"rtcDelData\\\",e[e.rtcSetOutData=63]=\\\"rtcSetOutData\\\",e[e.rtcQryUserOutData=64]=\\\"rtcQryUserOutData\\\",e[e.rtcToken=65]=\\\"rtcToken\\\",e[e.rtcUserState=66]=\\\"rtcUserState\\\",e[e.rtcRInfo=67]=\\\"rtcRInfo\\\",e[e.rtcUData=68]=\\\"rtcUData\\\",e[e.rtcUPut=69]=\\\"rtcUPut\\\",e[e.rtcUDel=70]=\\\"rtcUDel\\\",e[e.rtcUList=71]=\\\"rtcUList\\\",e[e.rtcQueryJoined=72]=\\\"rtcQueryJoined\\\",e[e.rtcInvite=73]=\\\"rtcInvite\\\",e[e.rtcCancelInvite=74]=\\\"rtcCancelInvite\\\",e[e.rtcInviteAnswer=75]=\\\"rtcInviteAnswer\\\",e[e.rtcEndInvite=76]=\\\"rtcEndInvite\\\",e[e.addSeTag=77]=\\\"addSeTag\\\",e[e.delSeTag=78]=\\\"delSeTag\\\",e[e.addTag=79]=\\\"addTag\\\",e[e.delTag=80]=\\\"delTag\\\",e[e.disTag=81]=\\\"disTag\\\",e[e.reportsdk=82]=\\\"reportsdk\\\",e[e.pullUgSes=83]=\\\"pullUgSes\\\",e[e.pullUgMsg=84]=\\\"pullUgMsg\\\",e[e.ugMsg=85]=\\\"ugMsg\\\",e[e.qryUgMsg=86]=\\\"qryUgMsg\\\",e[e.updUgRTime=87]=\\\"updUgRTime\\\",e[e.upMsgEx=88]=\\\"upMsgEx\\\",e[e.modifyMsg=89]=\\\"modifyMsg\\\",e[e.qryMsgChange=90]=\\\"qryMsgChange\\\",e[e.qryMsg=91]=\\\"qryMsg\\\",e[e.operate=92]=\\\"operate\\\",e[e.s_opNtf=93]=\\\"s_opNtf\\\",e[e.setRtcRoomId=94]=\\\"setRtcRoomId\\\"}(Vi||(Vi={}));var Ur,br=Vi,Lr=function(e,t,n,i){return M(void 0,void 0,void 0,(function(){var r;return w(this,(function(s){return r=0,e.forEach((function(s){return M(void 0,void 0,void 0,(function(){var o,a,u;return w(this,(function(c){switch(c.label){case 0:o=t+\\\"://\\\"+s+\\\"/ping?r=\\\"+(l=9999,(h=1e3)+Math.floor(Math.random()*(l-h))),ge.debug(\\\"start ping\\\",o),r++,c.label=1;case 1:return c.trys.push([1,3,,4]),[4,n.httpReq({url:o,timeout:5e3})];case 2:return a=c.sent(),[3,4];case 3:return u=c.sent(),ge.error(\\\"ping error: \\\",u),i({finished:r===e.length,code:-2,host:s}),[2];case 4:return ge.debug(\\\"end ping\\\",r,o,null==a?void 0:a.status),i({finished:r===e.length,code:a.status,host:s}),[2]}var h,l}))}))})),[2]}))}))},Pr=function(e,t,n,i,r,s,o,a){return e+\\\"://\\\"+t+\\\"/websocket?appId=\\\"+n+\\\"&token=\\\"+encodeURIComponent(i)+\\\"&sdkVer=\\\"+s+\\\"&pid=\\\"+o+\\\"&apiVer=\\\"+(r.isFromUniapp?\\\"uniapp\\\":\\\"normal\\\")+(r.connectPlatform?\\\"&platform=\\\"+r.connectPlatform:\\\"\\\")+(a?\\\"&protocolVer=\\\"+a:\\\"\\\")},Dr=function(e){return[br.ppMsgS,br.pgMsgS,br.chatMsgS].map((function(e){return br[e]})).indexOf(e)>=0};!function(e){e[e.REDIRECT=0]=\\\"REDIRECT\\\",e[e.OTHER_DEVICE_LOGIN=1]=\\\"OTHER_DEVICE_LOGIN\\\",e[e.BLOCK=2]=\\\"BLOCK\\\",e[e.REMOTE_CLOSE=3]=\\\"REMOTE_CLOSE\\\",e[e.LOGOUT=4]=\\\"LOGOUT\\\",e[e.BLOCK_NEW=5]=\\\"BLOCK_NEW\\\",e[e.REDIRECT_NEW=6]=\\\"REDIRECT_NEW\\\"}(Ur||(Ur={}));var Vr,kr=function(e,t){ge.info(\\\"websocket send -> messageId: \\\"+e.messageId+\\\" topic: \\\"+e.topic);var n=e.getBufferData();t.send(n.buffer)},xr=function(e){function t(t,n){var i=e.call(this,\\\"websocket\\\",n)||this;return i._runtime=t,i._socket=null,i._messageIds={},i._syncMessageIds={},i._failedCount=0,i.ALLOW_FAILED_TIMES=2,i._timer=null,i._idCount=0,i._generateMessageId=function(){return i._idCount>=65535&&(i._idCount=0),++i._idCount},i}return N(t,e),t.prototype.connect=function(e,t,n,i,r,s){return M(this,void 0,void 0,(function(){var o=this;return w(this,(function(a){return[2,new Promise((function(a){var u=[],c=0,h=!1,l=!1,d=function(){return M(o,void 0,void 0,(function(){var n;return w(this,(function(o){switch(o.label){case 0:return 0===u.length||h?[2]:(h=!0,[4,this._connect(e,t,u.shift(),i,r,s)]);case 1:if((n=o.sent())===Ee.SUCCESS)this._checkAlive(),a(n);else if(n===Ce.REDIRECT)a(n);else{if(l&&0===u.length)return a(Et(n)),[2];h=!1,d()}return[2]}}))}))};r=x(r),o._watcher.status(Ie.CONNECTING),Lr(n,i,o._runtime,(function(e){var t=e.code,n=e.finished,i=e.host;l=n,200===t&&(u.push(i),c++,d()),n&&0===c&&(ge.error(\\\"No valid websocket server hosts!\\\"),a(Ee.RC_SOCKET_NOT_CREATED))}))}))]}))}))},t.prototype._connect=function(e,t,n,i,r,s){return M(this,void 0,void 0,(function(){var o,a,u,c,h,l=this;return w(this,(function(d){switch(d.label){case 0:return o=i.replace(\\\"http\\\",\\\"ws\\\"),a=Pr(o,n,e,t,this._runtime,r,\\\"\\\",s),ge.debug(\\\"conenct start -> \\\"+a),this.sendConnectTime=Date.now(),u=this._runtime.createWebSocket(a),c=function(e){l._timer&&(clearTimeout(l._timer),l._timer=null),l._socket===u&&(l._socket=null,l._watcher.status(e))},[4,new Promise((function(e){u.onMessage((function(t){if(\\\"[object ArrayBuffer]\\\"===Object.prototype.toString.call(t)){var n=function(e,t){var n=new Uint8Array(e),i=new wt(n),r=i.readByte(),s=new Ot(r),o=Ar(s);return o.read(i,n.length-1,t),o}(t,s);if(n instanceof Er&&l._pingResolve)return l._pingResolve(Ee.SUCCESS),void(l._pingResolve=void 0);if(n instanceof yr)return ge.debug(\\\"recv connect ack -> \\\"+n.status),n.status!==Ce.ACCEPTED?(ge.warn(\\\"connect failed: \\\"+n.status),void e(n.status)):(ge.info(\\\"connect success -> \\\"+a),l.connectedTime=n.timestamp,l.userId=n.userId||\\\"\\\",l._idCount=n.messageId,void e(Ee.SUCCESS));if(n instanceof mr){var i=n.status;switch(ge.warn(\\\"recv disconnect signal -> status: \\\"+i),i){case Ur.BLOCK_NEW:case Ur.BLOCK:l._watcher.status(Ie.BLOCKED);break;case Ur.OTHER_DEVICE_LOGIN:l._watcher.status(Ie.KICKED_OFFLINE_BY_OTHER_CLIENT);break;case Ur.REDIRECT_NEW:case Ur.REDIRECT:l._watcher.status(Ie.REDIRECT);break;default:l._watcher.status(Ie.DISCONNECT_BY_SERVER)}}else l._onReceiveSignal(n)}else ge.error(\\\"Socket received invalid data:\\\",t)})),u.onClose((function(t,n){for(var i in ge.warn(\\\"websocket closed! code:\\\",t,\\\"reason:\\\",n),c(Ie.CONNECTION_CLOSED),l._messageIds){var r=l._messageIds[i];delete l._messageIds[i],r(Ee.RC_NET_CHANNEL_INVALID)}e(t)})),u.onError((function(t){var n;for(var i in ge.error(\\\"websocket error!\\\",null===(n=t)||void 0===n?void 0:n.stack),c(Ie.WEBSOCKET_ERROR),l._messageIds){var r=l._messageIds[i];delete l._messageIds[i],r(Ee.RC_NET_CHANNEL_INVALID)}e(Ee.NETWORK_ERROR)})),u.onOpen((function(){return ge.debug(\\\"websocket open =>\\\",a)})),setTimeout((function(){e(Ee.TIMEOUT)}),5e3)}))];case 1:return(h=d.sent())===Ee.SUCCESS?this._socket=u:(ge.warn(\\\"connect result -> code: \\\"+h+\\\", url: \\\"+a),u.close()),[2,h]}}))}))},t.prototype._checkAlive=function(){var e;return M(this,void 0,void 0,(function(){var t,n=this;return w(this,(function(i){switch(i.label){case 0:return this._socket?(ge.debug(\\\"send ping ->\\\"),this.sendOnly(new vr),[4,new Promise((function(e){n._pingResolve=e,n._timer&&clearTimeout(n._timer),n._timer=setTimeout((function(){n._pingResolve=void 0,e(Ee.TIMEOUT)}),15e3)}))]):[2];case 1:return(t=i.sent())!==Ee.SUCCESS?(this._failedCount+=1,ge.warn(\\\"ping failed count: \\\"+this._failedCount+\\\", code: \\\"+t),this._failedCount>=this.ALLOW_FAILED_TIMES?(this._failedCount=0,ge.warn(\\\"ping timeout, close current websocket to reconnect!\\\"),null===(e=this._socket)||void 0===e||e.close(),this._watcher.status(Ie.NETWORK_UNAVAILABLE)):this._checkAlive(),[2]):(ge.debug(\\\"recv pong <-\\\"),this._failedCount=0,setTimeout((function(){return n._checkAlive()}),15e3),[2])}}))}))},t.prototype._onReceiveSignal=function(e){return M(this,void 0,void 0,(function(){var t,n,i,r,s,o,a=this;return w(this,(function(u){switch(u.label){case 0:return t=e.messageId,e.header&&e.header.qos!==ze.AT_MOST_ONCE&&(e instanceof Cr&&!e.syncMsg&&(ge.info(\\\"send pubAck -> \\\"+t+\\\" \\\"+e.topic),this.sendOnly(new Nr(t))),e instanceof wr&&(ge.info(\\\"send queryCon -> \\\"+t+\\\" \\\"+e.topic),this.sendOnly(new Mr(t)))),t>0&&(e instanceof Sr||e instanceof wr)&&(ge.info(\\\"recv ack -> messageId: \\\"+t+\\\" \\\"+e.topic),(n=this._messageIds[t])&&(n(e),delete this._messageIds[t]),(i=this._syncMessageIds[t])&&(delete this._syncMessageIds[t],i(e))),e instanceof Cr?(r=e.syncMsg,s=e.topic,ge.info(\\\"recv PublishReader -> messageId: \\\"+t+\\\" \\\"+s),s===br[br.userSetData]?[2]:!r||Dr(s)?(this._watcher.signal(e),[2]):[4,new Promise((function(e){a._syncMessageIds[t]=e}))]):[3,2];case 1:o=u.sent(),delete this._syncMessageIds[t],this._watcher.signal(e,o),u.label=2;case 2:return[2]}}))}))},t.prototype.sendOnly=function(e){this._socket&&((e instanceof Rr||e instanceof Or)&&(e.messageId=this._generateMessageId()),kr(e,this._socket))},t.prototype.send=function(e,t,n,i){return void 0===i&&(i=3e4),M(this,void 0,void 0,(function(){var r,s,o,a=this;return w(this,(function(u){switch(u.label){case 0:return this._socket?(r=this._generateMessageId(),e.messageId=r,kr(e,this._socket),[4,new Promise((function(e){a._messageIds[r]=e,setTimeout((function(){a._messageIds[r]&&delete a._messageIds[r],e()}),i)}))]):[3,2];case 1:return(s=u.sent())?s instanceof wr||s instanceof Sr?(o=t&&s.data?this.codec.decodeByPBName(s.data,t,n):s,0!==s.status?(ge.warn(\\\"send failed -> message: \\\"+r+\\\", respPBName: \\\"+t+\\\", status: \\\"+s.status),[2,{code:s.status,data:t&&s.data?o:null}]):[2,{code:Ee.SUCCESS,data:o}]):[2,{code:s}]:(ge.warn(\\\"send timeout -> message: \\\"+r+\\\", respPBName: \\\"+t+\\\", timeout: \\\"+i),[2,{code:Ee.TIMEOUT}]);case 2:return[2,{code:Ee.RC_NET_CHANNEL_INVALID}]}}))}))},t.prototype.close=function(){this._socket&&(this._socket.close(),this._socket=null,this._watcher.status(Ie.DISCONNECTED))},t}(fr);!function(e){e.GET=\\\"GET\\\",e.POST=\\\"POST\\\"}(Vr||(Vr={}));var Br=function(e){function t(t,n){var i=e.call(this,\\\"comet\\\",n)||this;return i._runtime=t,i._messageIds={},i._syncMessageIds={},i._idCount=0,i._generateMessageId=function(){return++i._idCount},i._pid=encodeURIComponent((new Date).getTime()+Math.random()+\\\"\\\"),i}return N(t,e),t.prototype.handleCometRes=function(e){var t=this;if(200!==e.status&&202!==e.status)return!1;var n=J(e.data)?JSON.parse(e.data):e.data;return n?!X(n)||(dt(n,(function(e){return M(t,void 0,void 0,(function(){var t,n,i,r,s,o,a,u,c,h,l,d=this;return w(this,(function(f){switch(f.label){case 0:if((t=e.sessionid)&&(this._sessionid=t),n=function(e){var t=e.headerCode,n=new Ot(t),i=Ar(n);for(var r in e)i[r]=e[r];return i}(e),i=n.messageId,r=n._header,s=n.status,n.identifier,o=r&&r.qos!==ze.AT_MOST_ONCE,i&&n.getIdentifier&&((a=this._messageIds[i])&&a(n),this._syncMessageIds[i]&&this._syncMessageIds[i](n)),o&&(n instanceof Cr&&!n.syncMsg&&(u=new Nr(i),this.sendOnly(u)),n instanceof wr&&(u=new Mr(i),this.sendOnly(u))),n instanceof mr){switch(s){case Ur.OTHER_DEVICE_LOGIN:this._watcher.status(Ie.KICKED_OFFLINE_BY_OTHER_CLIENT);break;case Ur.BLOCK:case Ur.BLOCK_NEW:this._watcher.status(Ie.BLOCKED);break;case Ur.REDIRECT_NEW:case Ur.REDIRECT:this._watcher.status(Ie.REDIRECT);break;default:this._watcher.status(Ie.DISCONNECT_BY_SERVER)}return[2]}return n instanceof Cr?(c=n.syncMsg,h=n.topic,!c||Dr(h)?(this._watcher.signal(n),[2,!1]):[4,new Promise((function(e){d._syncMessageIds[i]=e}))]):[3,2];case 1:l=f.sent(),delete this._syncMessageIds[i],this._watcher.signal(n,l),f.label=2;case 2:return[2]}}))}))})),!0):(ge.error(\\\"received data is not a validJson\\\",n),!1)},t.prototype._startPullSignal=function(e){return M(this,void 0,void 0,(function(){var t,n,i,r;return w(this,(function(s){switch(s.label){case 0:return t=(new Date).getTime(),n=e+\\\"://\\\"+this._domain+\\\"/pullmsg.js?sessionid=\\\"+this._sessionid+\\\"&timestrap=\\\"+t+\\\"&pid=\\\"+this._pid,[4,this._runtime.httpReq({url:n,body:{pid:this._pid},timeout:45e3})];case 1:return i=s.sent(),r=this.handleCometRes(i),this._isDisconnected||(r?this._startPullSignal(e):(this._isDisconnected=!0,this._watcher.status(Ie.NETWORK_UNAVAILABLE))),[2]}}))}))},t.prototype.connect=function(e,t,n,i,r,s){return M(this,void 0,void 0,(function(){var s,o,a,u,c=this;return w(this,(function(h){return r=x(r),this._protocol=i,this._isDisconnected=!1,this._watcher.status(Ie.CONNECTING),s=[],o=0,a=!1,u=!1,[2,new Promise((function(h){var l=function(){return M(c,void 0,void 0,(function(){var n;return w(this,(function(o){switch(o.label){case 0:return 0===s.length||a?[2]:(a=!0,[4,this._connect(e,t,s.shift(),i,r)]);case 1:if((n=o.sent())===Ee.SUCCESS)this._startPullSignal(i),h(n);else if(n===Ce.REDIRECT)h(n);else{if(u&&0===s.length)return h(Et(n)),[2];a=!1,l()}return[2]}}))}))};c._watcher.status(Ie.CONNECTING),Lr(n,i,c._runtime,(function(e){var t=e.code,n=e.finished,i=e.host;u=n,200===t&&(s.push(i),o++,l()),n&&0===o&&(ge.error(\\\"No valid websocket server hosts!\\\"),h(Ee.RC_SOCKET_NOT_CREATED))}))}))]}))}))},t.prototype._connect=function(e,t,n,i,r){return M(this,void 0,void 0,(function(){var s,o,a,u;return w(this,(function(c){switch(c.label){case 0:return s=function(e){return 200!==e.status&&202!==e.status?(ge.error(\\\"handle comet res -> res: \\\"+JSON.stringify(e||{})),!1):!!e.data&&(function(e){if(ne(e))return!0;var t=!1;try{var n=JSON.parse(e);t=JSON.stringify(n)===e}catch(e){t=!1}return t}(e.data)?ne(e.data)?e.data:JSON.parse(e.data):(ge.error(\\\"received data is not a validJson\\\",e.data),!1))},o=Pr(i,n,e,t,this._runtime,r,this._pid),this.sendConnectTime=Date.now(),ge.debug(\\\"conenct start -> \\\"+o),[4,this._runtime.httpReq({url:o,body:{pid:this._pid},timeout:5e3})];case 1:return a=c.sent(),u=s(a),this._domain=n,u&&0===u.status?(this._sessionid=u.sessionid,this.userId=u.userId,this.connectedTime=u.timestamp):ge.warn(\\\"connect result -> code: \\\"+(null==u?void 0:u.status)+\\\", url: \\\"+o),[2,null==u?void 0:u.status]}}))}))},t.prototype.sendCometData=function(e,t){return M(this,void 0,void 0,(function(){var t,n,i,r,s,o,a,u,c,h;return w(this,(function(l){switch(l.label){case 0:return n=(t=this)._domain,i=t._sessionid,r=t._pid,s=e.messageId,o=e.topic,a=e.targetId,e.identifier,u=e.getHeaderFlag(),c=o?this._protocol+\\\"://\\\"+n+\\\"/websocket?messageid=\\\"+s+\\\"&header=\\\"+u+\\\"&sessionid=\\\"+i+\\\"&topic=\\\"+o+\\\"&targetid=\\\"+a+\\\"&pid=\\\"+r:this._protocol+\\\"://\\\"+n+\\\"/websocket?messageid=\\\"+s+\\\"&header=\\\"+u+\\\"&sessionid=\\\"+i+\\\"&pid=\\\"+r,[4,this._runtime.httpReq({url:c,method:Vr.POST,body:e.getCometData()})];case 1:return h=l.sent(),this.handleCometRes(h),[2]}}))}))},t.prototype.sendOnly=function(e){this.sendCometData(e)},t.prototype.send=function(e,t,n,i){return void 0===i&&(i=3e4),M(this,void 0,void 0,(function(){var r,s,o,a=this;return w(this,(function(u){switch(u.label){case 0:return r=this._generateMessageId(),e.messageId=r,this.sendCometData(e),[4,new Promise((function(e){a._messageIds[r]=e,setTimeout((function(){delete a._messageIds[r],e()}),i)}))];case 1:return(s=u.sent())?(o=t&&s.data?this.codec.decodeByPBName(s.data,t,n):s,0!==s.status?[2,{code:s.status,data:t&&s.data?o:null}]:[2,{code:Ee.SUCCESS,data:o}]):[2,{code:Ee.TIMEOUT}]}}))}))},t.prototype.close=function(){this._isDisconnected=!0,this._watcher.status(Ie.DISCONNECTED)},t}(fr),Gr=function(e,t,n){this.runtime=e,this._watcher=t,this._options=n,this.currentUserId=\\\"\\\",this._appkey=this._options.appkey,this._apiVer=this._options.apiVersion,this.navi=this._createNavi()},Fr=function(e){return[\\\"navi\\\",e].join(\\\"_\\\")},qr=function(){function e(e,t){this._runtime=e,this._options=t,this._naviInfo=null,this._appkey=this._options.appkey,this._apiVersion=x(this._options.apiVersion)}return e.prototype.getInfo=function(e,t,n,i){return M(this,void 0,void 0,(function(){var r,s;return w(this,(function(o){switch(o.label){case 0:return n&&this._clear(e),(r=function(e,t,n){var i,r,s=Fr(e);try{var o=n.getItem(s);r=o?JSON.parse(o):[]}catch(e){r=[]}var a=Date.now();return r.length>0&&(r=r.filter((function(e){return a-e.timestamp<72e5}))),0===r.length?n.removeItem(s):n.setItem(s,JSON.stringify(r)),(null===(i=r.find((function(e){return e.token===t})))||void 0===i?void 0:i.naviInfo)||null}(this._appkey,e,this._runtime.localStorage))?(this._naviInfo=r,[2,r]):(s=this._options.navigators.slice(),t.length&&t.forEach((function(e){s.indexOf(e)<0&&s.unshift(e)})),[4,this._reqNavi(s,this._appkey,e,i)]);case 1:return(r=o.sent())?(this._naviInfo=r,this.setNaviInfo2Cache(e,r),[2,r]):[2,r]}}))}))},e.prototype.setNaviInfo2Cache=function(e,t){this._naviInfo=t,function(e,t,n,i){var r,s=Fr(e);try{var o=i.getItem(s);r=o?JSON.parse(o):[]}catch(e){r=[]}var a=Date.now();r.length>0&&(r=r.filter((function(e){return a-e.timestamp<72e5&&t!==e.token}))),r.push({timestamp:a,naviInfo:n,token:t}),i.setItem(s,JSON.stringify(r))}(this._appkey,e,t,this._runtime.localStorage)},e.prototype.getInfoFromCache=function(e){return this._naviInfo},e.prototype._clear=function(e){!function(e,t,n){var i,r=Fr(e);try{var s=n.getItem(r);i=s?JSON.parse(s):[]}catch(e){i=[]}var o=Date.now();i.length>0&&(i=i.filter((function(e){return o-e.timestamp<72e5&&t!==e.token}))),0===i.length?n.removeItem(r):n.setItem(r,JSON.stringify(i))}(this._appkey,e,this._runtime.localStorage)},e}(),Kr=function(e,t,n){return[e,t,n].join(\\\"_\\\")},Hr=function(){function e(e,t){this._runtime=e,this._appkey=t,this._users={}}return e.prototype._getMemData=function(e){return this._users[e]||(this._users[e]={inboxTime:0,outboxTime:0})},e.prototype.setInboxTime=function(e,t){var n=this._getMemData(t);if(!(n.inboxTime>e)){n.inboxTime=e;var i=Kr(\\\"inbox\\\",this._appkey,t);this._runtime.localStorage.setItem(i,e.toString())}},e.prototype.getInboxTime=function(e){var t=this._getMemData(e);if(0===t.inboxTime){var n=Kr(\\\"inbox\\\",this._appkey,e);t.inboxTime=parseInt(this._runtime.localStorage.getItem(n))||0}return t.inboxTime},e.prototype.setOutboxTime=function(e,t){var n=this._getMemData(t);if(!(n.outboxTime>=e)){n.outboxTime=e;var i=Kr(\\\"outbox\\\",this._appkey,t);this._runtime.localStorage.setItem(i,e.toString())}},e.prototype.getOutboxTime=function(e){var t=this._getMemData(e);if(0===t.outboxTime){var n=Kr(\\\"outbox\\\",this._appkey,e);t.outboxTime=parseInt(this._runtime.localStorage.getItem(n))||0}return t.outboxTime},e}(),Yr={_caches:{},set:function(e,t){this._caches[e]=t},get:function(e){return this._caches[e]||0},clear:function(e){this._caches[e]=0}},jr=function(){function e(e,t){this._kvCaches={},this._chatroomId=e,this._currentUserId=t}return e.prototype._add=function(e){var t=e.key;e.isDeleted=!1,this._kvCaches[t]=e},e.prototype._remove=function(e){var t=e.key,n=this._kvCaches[t];n&&(n.isDeleted=!0,this._kvCaches[t]=n)},e.prototype._setEntry=function(e,t){var n=e.key,i=e.type,r=e.isOverwrite,s=e.userId,o=this._getSetUserId(n),a=i===Le.DELETE,u=o===s,c=!this._isExisted(n),h=a?this._remove:this._add;(t||r||u||c)&&h.call(this,e)},e.prototype.getValue=function(e){var t=this._kvCaches[e]||{};return t.isDeleted?null:t.value},e.prototype.getVersion=function(e){var t=this._kvCaches[e]||{};return t.isDeleted?null:t.version},e.prototype.getAllValue=function(){var e={};for(var t in this._kvCaches)this._kvCaches[t].isDeleted||(e[t]=this._kvCaches[t].value);return e},e.prototype._getSetUserId=function(e){return(this._kvCaches[e]||{}).userId},e.prototype._isExisted=function(e){var t=this._kvCaches[e]||{},n=t.value,i=t.isDeleted;return n&&!i},e.prototype.setEntries=function(e){var t=this,n=e.kvEntries,i=e.isFullUpdate;n=n||[],(i=i||!1)&&this.clear(),n.forEach((function(e){t._setEntry(e,i)})),ge.debug(\\\"end setEntries\\\")},e.prototype.clear=function(){this._kvCaches={}},e}(),Qr=function(){function e(e){this._pullQueue=[],this._isPulling=!1,this._storeCaches={},this._engine=e}return e.prototype._startPull=function(){return M(this,void 0,void 0,(function(){var e,t,n,i,r,s,o;return w(this,(function(a){switch(a.label){case 0:return this._isPulling||0===this._pullQueue.length?[2]:(this._isPulling=!0,e=this._pullQueue.splice(0,1)[0],t=e.chrmId,n=e.timestamp,(i=Yr.get(t))>n?(this._isPulling=!1,this._startPull(),[2]):[4,this._engine.pullChatroomEntry(t,i)]);case 1:return r=a.sent(),s=r.code,o=r.data,this._isPulling=!1,s===Ee.SUCCESS?(Yr.set(t,o.syncTime||0),this._startPull()):this._startPull(),[2]}}))}))},e.prototype.reset=function(e){Yr.clear(e);var t=this._storeCaches[e];t&&t.clear()},e.prototype.pullEntry=function(e,t){this._pullQueue.push({chrmId:e,timestamp:t}),this._startPull()},e.prototype.setLocal=function(e,t,n){var i=this._storeCaches[e];ae(i)||(i=new jr(e,n)),i.setEntries(t),this._storeCaches[e]=i},e.prototype.getValue=function(e,t){var n=this._storeCaches[e];return n?n.getValue(t):null},e.prototype.getVersion=function(e,t){var n=this._storeCaches[e];return n?n.getVersion(t):null},e.prototype.getAll=function(e){var t=this._storeCaches[e],n={};return t&&(n=t.getAllValue()),n},e}(),Wr=function(){function e(e,t,n,i){this._runtime=e,this._appkey=t,this._userId=n,this._canJoinMulipleChrm=i,this._sessionKey=\\\"\\\",this._joinedChrmsInfo={},this._sessionKey=\\\"sync-chrm-\\\"+this._appkey+\\\"-\\\"+this._userId}return e.prototype.set=function(e,t){void 0===t&&(t=10),!this._canJoinMulipleChrm&&(this._joinedChrmsInfo={}),this._joinedChrmsInfo[e]=t,this._runtime.sessionStorage.setItem(this._sessionKey,JSON.stringify(this._joinedChrmsInfo))},e.prototype.get=function(){var e,t;try{t=this._runtime.sessionStorage.getItem(this._sessionKey),e=JSON.parse(t||\\\"{}\\\")}catch(n){ge.error(\\\"parse rejoined chrm infos error -> \\\"+t),e={}}return e},e.prototype.remove=function(e){delete this._joinedChrmsInfo[e],ae(this._joinedChrmsInfo)?this._runtime.sessionStorage.setItem(this._sessionKey,JSON.stringify(this._joinedChrmsInfo)):this.clear()},e.prototype.clear=function(){this._joinedChrmsInfo={},this._runtime.sessionStorage.removeItem(this._sessionKey)},e}(),Jr=\\\"converStatusChanged\\\",zr=function(){function e(e,t,n){this._eventEmitter=new _e,this._pullQueue=[],this._isPulling=!1,this._storage=I(e.runtime),this._appkey=t,this._currentUserId=n,this._engine=e,this._storagePullTimeKey=\\\"con-s-\\\"+t+\\\"-\\\"+n}return e.prototype._set=function(e){var t=this;if(!re(e)&&Array.isArray(e)){var n=this._storage.get(this._storagePullTimeKey)||0,i=e.length;e.forEach((function(e,r){var s=e.updatedTime||0;n=s>n?s:n,e.conversationType=e.type,t._eventEmitter.emit(Jr,{statusItem:e,isLastPull:r===i-1})})),this._storage.set(this._storagePullTimeKey,n)}},e.prototype._startPull=function(){return M(this,void 0,void 0,(function(){var e,t,n,i;return w(this,(function(r){switch(r.label){case 0:return this._isPulling||0===this._pullQueue.length?[2]:(this._isPulling=!0,e=this._pullQueue.splice(0,1)[0],[4,this._engine.pullConversationStatus(e)]);case 1:return t=r.sent(),n=t.code,i=t.data,n===Ee.SUCCESS?(this._isPulling=!1,this._set(i),this._startPull()):this._startPull(),[2]}}))}))},e.prototype.pull=function(e){var t=this._storage.get(this._storagePullTimeKey)||0;(e>t||0===e)&&(this._pullQueue.push(t),this._startPull())},e.prototype.watch=function(e){this._eventEmitter.on(Jr,(function(t){e(t)}))},e.prototype.unwatch=function(){this._eventEmitter.off(Jr,(function(e){}))},e}(),Zr={c:{keyName:\\\"unreadMessageCount\\\",defaultVal:0},hm:{keyName:\\\"hasMentioned\\\",defaultVal:!1},m:{keyName:\\\"mentionedInfo\\\",defaultVal:null},t:{keyName:\\\"lastUnreadTime\\\",defaultVal:0},nc:{keyName:\\\"notificationStatus\\\",defaultVal:2},to:{keyName:\\\"isTop\\\",defaultVal:!1},tg:{keyName:\\\"tags\\\",defaultVal:{}},mc:{keyName:\\\"unreadMentionedCount\\\",defaultVal:0}},Xr={};for(var $r in Zr){var es=Zr[$r].keyName;Xr[es]=$r}var ts,ns=function(){function e(e,t,n){this._appkey=t,this._currentUserId=n;var i=\\\"con-\\\"+t+\\\"-\\\"+n;this.storage=new R(e,i),this._localStore=new R(e,\\\"CONVER-\\\"+t+\\\"-\\\"+n)}return e.prototype._getStoreKey=function(e,t,n){return n+\\\"_\\\"+e+\\\"_\\\"+t},e.prototype._getConOptionByKey=function(e){var t=(e=e||\\\"\\\").split(\\\"_\\\");if(t.length>=2){var n=t.shift(),i=t.shift(),r=t.join(\\\"_\\\");return{conversationType:Number(i),targetId:r,channelId:n}}return{conversationType:j.PRIVATE,targetId:\\\"\\\",channelId:\\\"\\\"}},e.prototype.updateMentionedData=function(e){var t=this,n=e.conversationType,i=e.targetId,r=e.messageType,s=e.isMentioned,o=e.content,a=e.senderUserId,u=e.channelId,c=this._getStoreKey(n,i,u),h=this._localStore.get(c)||{},l=Xr.mentionedInfo,d=Xr.hasMentioned,f=h[l]||{},p=f.userIdList||[],g=o.mentionedInfo;if(g){if(s&&n===j.GROUP)(g.userIdList||[]).forEach((function(e){e===t._currentUserId&&p.indexOf(a)<0&&p.push(a)})),g.type===we.ALL&&p.indexOf(a)<0&&p.push(a);if(r===Se.RECALL&&n===j.GROUP){var _=p.indexOf(a);_>=0&&p.splice(_,1)}g={userIdList:p,type:(null==g?void 0:g.type)||f.type},0!==p.length?(h[l]=g,h[d]=!0):(delete h[l],delete h[d]),ae(h)?this._localStore.set(c,h):this._localStore.remove(c)}},e.prototype.set=function(e,t,n,i){var r=this._getStoreKey(e,t,i),s=this._localStore.get(r)||{};for(var o in n){var a=Xr[o],u=n[o];if(!re(a)&&!re(u)&&\\\"hasMentioned\\\"!==o&&\\\"MentionedInfo\\\"!==o){if(u===Zr[a].defaultVal||\\\"tags\\\"===o&&!ae(u))delete s[a];else if(\\\"tags\\\"===o){var c=u;for(var h in c)c[h].isTop||delete c[h].isTop;s[a]=u}else s[a]=u;s.c||(delete s.t,delete s.hm,delete s.m,delete s.mc)}}ae(s)?this._localStore.set(r,s):this._localStore.remove(r)},e.prototype.get=function(e,t,n){void 0===n&&(n=\\\"\\\");var i=this._getStoreKey(e,t,n),r=this._localStore.get(i)||{},s={};for(var o in Zr){var a=Zr[o],u=a.keyName,c=a.defaultVal;s[u]=r[o]||yt(c)}return s},e.prototype.getValue=function(e){var t=this._localStore.getValues()||{},n=[];for(var i in t){var r=this._getConOptionByKey(i),s={conversationType:r.conversationType,targetId:r.targetId,channelId:r.channelId},o=t[i];for(var a in o){var u=Zr[a],c=u.keyName,h=u.defaultVal;s[c]=o[a]||yt(h)}s=e?e(s):s,n.push(s)}return n},e.prototype.getValueForTag=function(){var e=this._localStore.getValues()||{},t={};for(var n in e){var i=this._getConOptionByKey(n),r=i.conversationType,s=i.targetId,o={},a=e[n];for(var u in a){var c=Zr[u],h=c.keyName,l=c.defaultVal;o[h]=a[u]||yt(l)}for(var d in o.tags){re(t[d])&&(t[d]=[]);var f=Object.assign({},o,{conversationType:r,targetId:s});delete f.tags,t[d].push(f)}}return t},e.prototype.adaptOldStore=function(){try{var e=this.storage.getValues();if(0===Object.keys(e).length)return;for(var t in e){var n=\\\"_\\\"+t;this._localStore.set(n,e[t])}}catch(e){ge.error(\\\"adaptOldStore error: \\\"+e.message)}},e}(),is=[j.PRIVATE,j.GROUP,j.SYSTEM,j.PUBLIC_SERVICE,j.APP_PUBLIC_SERVICE],rs=\\\"conversationChanged\\\",ss=\\\"conTagStatusChanged\\\",os=function(){function e(e,t,n,i,r){var s=this;this._updatedConversations={},this._conTagStatusChanged=!1,this._eventEmitter=new _e,this._draftMap={},this._appkey=t,this._loginUserId=n,this._store=new ns(e.runtime,t,n),this._statusManager=new zr(e,t,n),this._statusManager.watch((function(e){var t=e.statusItem,n=e.isLastPull;s.addStatus(t,n)})),this._eventEmitter.on(rs,(function(e){i(e)})),this._eventEmitter.on(ss,(function(){r()}))}return e.prototype._calcUnreadCount=function(e,t){var n=e.content,i=e.messageType,r=e.sentTime,s=e.isCounted,o=e.messageDirection,a=e.senderUserId,u=o===me.SEND&&a===this._loginUserId,c=i===Se.RECALL,h=ne(n),l=!1,d={},f=t.lastUnreadTime||0,p=t.unreadMessageCount||0;if(f>r||u)return{hasChanged:l,localConversation:t,updateItems:d};(s&&(t.unreadMessageCount=p+1,t.lastUnreadTime=r,l=!0),c&&h)&&(f>=n.sentTime&&p&&(t.unreadMessageCount=p-1,l=!0));return l&&(d.unreadMessageCount={val:t.unreadMessageCount,time:r}),{hasChanged:l,localConversation:t,updateItems:d}},e.prototype._calcMentionedInfo=function(e,t){var n=e.content,i=(e.messageDirection,e.isMentioned),r=e.sentTime;me.SEND;var s=ne(n),o=!1,a={};return i&&s&&n.mentionedInfo&&(t.hasMentioned=!0,o=!0,a.hasMentioned={val:!0,time:r},a.mentionedInfo={val:n.mentionedInfo,time:r}),{hasChanged:o,localConversation:t,updateItems:a}},e.prototype._calcMentionedCount=function(e,t){var n=e.content,i=e.messageDirection,r=!1;if(e.isMentioned&&i===me.RECEIVE&&(null==n?void 0:n.mentionedInfo)){var s=n.mentionedInfo,o=s.type,a=s.userIdList;if(o===we.ALL||(a||[]).includes(this._loginUserId)){r=!0;var u=t.unreadMentionedCount||0;t.unreadMentionedCount=u+1}}return{hasChanged:r,localConversation:t}},e.prototype._setUpdatedConversation=function(e){if(ne(e)){var t=e.conversationType,n=e.targetId,i=e.channelId,r=t+\\\"_\\\"+n,s=this._store.get(t,n,i)||{};this._updatedConversations[r]=Object.assign(s,e)}},e.prototype._setConTagStatusChanged=function(e,t,n,i){var r=(this._store.get(e,t,i)||{}).tags||{};if(Object.keys(r).length===Object.keys(n).length){for(var s in r)if(!n[s]||r[s].isTop!==n[s].isTop)return void(this._conTagStatusChanged=!0)}else this._conTagStatusChanged=!0},e.prototype.addStatus=function(e,t){var n=e.conversationType,i=e.targetId,r=e.updatedTime,s=e.notificationStatus,o=e.isTop,a=e.tags,u=e.channelId,c={},h={};n!==j.ULTRA_GROUP&&(re(s)||(h.notificationStatus={time:r,val:s}),re(o)||(h.isTop={time:r,val:o}),re(a)||(h.tags={time:r,val:a},null==a||a.forEach((function(e){c[e.tagId]={isTop:e.isTop}}))),this._setConTagStatusChanged(n,i,c,u),this._store.set(n,i,{notificationStatus:s,isTop:o,tags:c},u),this._setUpdatedConversation({conversationType:n,targetId:i,updatedItems:h,channelId:u}),t&&this._notifyConversationChanged())},e.prototype._notifyConversationChanged=function(){var e=[];for(var t in this._updatedConversations)e.push(this._updatedConversations[t]);0!==e.length&&(this._eventEmitter.emit(rs,e),this._updatedConversations={},this._conTagStatusChanged&&(this._eventEmitter.emit(ss),this._conTagStatusChanged=!1))},e.prototype.setConversationCacheByMessage=function(e,t){var n=this,i=e.conversationType,r=e.isPersited,s=e.targetId,o=e.channelId;if(is.indexOf(i)>=0){var a=!1,u=this._store.get(i,s,o),c={};if([this._calcUnreadCount,this._calcMentionedInfo,this._calcMentionedCount].forEach((function(t){var i=t.call(n,e,u),r=i.hasChanged,s=i.localConversation,o=i.updateItems;a=a||r,c=O(O({},c),o),u=yt(s)})),a&&this._store.set(i,s,u,o),this._store.updateMentionedData(e),r){var h=this._store.get(i,s,o);h.updatedItems=O({latestMessage:{time:e.sentTime,val:e}},c),h.latestMessage=e;var l=Object.assign(h,{conversationType:i,targetId:s,channelId:o});this._setUpdatedConversation(l)}(a||r)&&this._notifyConversationChanged()}},e.prototype.get=function(e,t,n){return void 0===n&&(n=\\\"\\\"),this._store.get(e,t,n)},e.prototype.getAllUnreadCount=function(e,t,n){var i=this._store.getValue(),r=0;return i.forEach((function(e){var i=e.unreadMessageCount,s=e.notificationStatus,o=e.conversationType;i=i||0,(n||1!==s)&&(t.length>0?t.includes(Number(o))&&(r+=Number(i)):r+=Number(i))})),r},e.prototype.getUnreadCountByTag=function(e,t){var n=this._store.getValueForTag()[e]||[],i=0;return n.forEach((function(e){var n=e.unreadMessageCount,r=e.notificationStatus;(t||1!==r)&&(n=n||0,i+=Number(n))})),i},e.prototype.getUnreadCount=function(e,t,n){return this._store.get(e,t,n).unreadMessageCount||0},e.prototype.clearUnreadCount=function(e,t,n,i){void 0===i&&(i=!0);var r=this._store.get(e,t,n),s=r.unreadMessageCount,o=r.hasMentioned,a={};if(s&&(r.unreadMessageCount=0,a.unreadMessageCount={val:0,time:Date.now()}),o&&(r.hasMentioned=!1,r.unreadMentionedCount=0,r.mentionedInfo=void 0,a.hasMentioned={val:!1,time:Date.now()},a.mentionedInfo={val:void 0,time:Date.now()}),this._store.set(e,t,r,n),i&&0!==Object.keys(a).length){var u=Object.assign(r,{conversationType:e,targetId:t,channelId:n,updatedItems:a});this._setUpdatedConversation(u),this._notifyConversationChanged()}},e.prototype.clearAllUnreadCount=function(){var e=this;this._store.getValue().forEach((function(t){t.unreadMessageCount&&(t.unreadMessageCount=0,e._store.set(t.conversationType,t.targetId,t,t.channelId))}))},e.prototype.startPullConversationStatus=function(e){this._statusManager.pull(e)},e.prototype.setDraft=function(e,t,n,i){var r=e+\\\"_\\\"+t+\\\"_\\\"+i;this._draftMap[r]=n},e.prototype.getDraft=function(e,t,n){var i=e+\\\"_\\\"+t+\\\"_\\\"+n;return this._draftMap[i]},e.prototype.clearDraft=function(e,t,n){var i=e+\\\"_\\\"+t+\\\"_\\\"+n;delete this._draftMap[i]},e.prototype.addTagStatus=function(e,t,n,i){void 0===i&&(i=\\\"\\\");var r=this._store.get(e,t,i).tags;r=Object.assign(r,n),this._store.set(e,t,{tags:r},i)},e.prototype.deleteTagStatus=function(e,t,n,i){void 0===i&&(i=\\\"\\\");var r=this._store.get(e,t,i).tags;n.forEach((function(e){delete r[e]})),this._store.set(e,t,{tags:r},i)},e.prototype.getConversationListForTag=function(){return this._store.getValueForTag()},e.prototype.getBlockConversationList=function(){return this._store.getValue().filter((function(e){return e.notificationStatus===Oe.OPEN})).map((function(e){return{conversationType:e.conversationType,targetId:e.targetId,channelId:e.channelId}}))},e.prototype.getTopConversationList=function(){return(this._store.getValue()||{}).filter((function(e){return e.isTop})).map((function(e){return{conversationType:e.conversationType,targetId:e.targetId,channelId:e.channelId}}))},e.prototype.adaptOldStore=function(){this._store.adaptOldStore()},e.prototype.getUnreadMentionedCount=function(e,t,n){return void 0===e&&(e=\\\"\\\"),this.get(t,n,e).unreadMentionedCount||0},e.prototype.getAllUnreadMentionedCount=function(){var e=this._store.getValue(),t=0;return e.forEach((function(e){var n=e.unreadMentionedCount;n=n||0,t+=Number(n)})),t},e.prototype.getAllConversationState=function(){return this._store.getValue().filter((function(e){return e.unreadMessageCount||e.unreadMentionedCount})).map((function(e){return{conversationType:e.conversationType,targetId:e.targetId,channelId:e.channelId,unreadCount:e.unreadMessageCount||0,unreadMentionedCount:e.unreadMentionedCount||0}}))},e}(),as=function(){function e(e,t,n,i){this._pullQueue=[],this._isPulling=!1,this._storageTagKey=\\\"tag-\\\"+t+\\\"-\\\"+n,this._storagePullTimeKey=\\\"us-s-\\\"+t+\\\"-\\\"+n,this._storage=I(e.runtime),this._engine=e,this._tagWatcherFunc=i}return e.prototype._updateTag=function(e){var t=e.tags,n={};t.forEach((function(e){n[e.tagId]={tagName:e.tagName,createdTime:e.createdTime}})),this._storage.set(this._storageTagKey,n),this._tagWatcherFunc()},e.prototype.addTag=function(e,t){var n=this._storage.get(this._storageTagKey)||{};e.forEach((function(e){var t,i=(null===(t=n[e.tagId])||void 0===t?void 0:t.createdTime)||e.createdTime||0;n[e.tagId]={tagName:e.tagName,createdTime:i}})),this._storage.set(this._storageTagKey,n),this._storage.set(this._storagePullTimeKey,t)},e.prototype.deleteTag=function(e,t){var n=this._storage.get(this._storageTagKey)||{};e.forEach((function(e){delete n[e]})),this._storage.set(this._storageTagKey,n),this._storage.set(this._storagePullTimeKey,t)},e.prototype.getTagsInfo=function(){return this._storage.get(this._storageTagKey)||{}},e.prototype.getTags=function(){var e=this._storage.get(this._storageTagKey)||{},t=[];for(var n in e)t.push({tagId:n,tagName:e[n].tagName,createdTime:e[n].createdTime,conversationCount:0});return t.sort((function(e,t){return(e.createdTime||0)-(t.createdTime||0)}))},e.prototype.getTagById=function(e){var t=this._storage.get(this._storageTagKey)||{};return t[e]?{tagId:e,tagName:t[e].tagName,createdTime:t[e].createdTime,conversationCount:0}:null},e.prototype._startPull=function(){return M(this,void 0,void 0,(function(){var e,t,n,i,r,s,o,a;return w(this,(function(u){switch(u.label){case 0:return this._isPulling||0===this._pullQueue.length?[2]:(this._isPulling=!0,e=this._pullQueue.splice(0,1)[0],[4,this._engine.pullUserSettings(e)]);case 1:return t=u.sent(),n=t.code,i=t.data,n!==Ee.SUCCESS||re(i)?(this._isPulling=!1,this._startPull()):(s=(r=i).settings,o=r.version,a=s.Tag,re(a)||this._updateTag(a),this._storage.set(this._storagePullTimeKey,o),this._isPulling=!1,this._startPull()),[2]}}))}))},e.prototype.pullUserSettings=function(e){var t=this._storage.get(this._storagePullTimeKey)||0;(e>t||0===e)&&(this._pullQueue.push(t),this._startPull())},e.prototype.getVersion=function(){return this._storage.get(this._storagePullTimeKey)||0},e}(),us=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i._miniConnectUrl=\\\"\\\",i._connectType=n.connectionType,i}return N(t,e),t.prototype._formatJSONPUrl=function(e,t,n,i){return e+\\\"/\\\"+(this._runtime.isSupportSocket()&&\\\"websocket\\\"===this._connectType?\\\"navi\\\":\\\"cometnavi\\\")+\\\".js?appId=\\\"+n+\\\"&token=\\\"+encodeURIComponent(t)+\\\"&callBack=\\\"+i+\\\"&v=\\\"+this._apiVersion+\\\"&r=\\\"+Date.now()},t.prototype.getInfo=function(t,n,i){var r;return M(this,void 0,void 0,(function(){var s;return w(this,(function(o){return this._runtime.useNavi||(s=void 0,s=this._runtime.isSupportSocket()&&\\\"websocket\\\"===this._connectType?c.join(\\\",\\\"):h.join(\\\",\\\"),this._miniConnectUrl=(null===(r=this._options.miniCMPProxy)||void 0===r?void 0:r.length)?this._options.miniCMPProxy.join(\\\",\\\"):s||\\\"\\\",n=[]),[2,e.prototype.getInfo.call(this,t,n,i)]}))}))},t.prototype._reqNavi=function(e,t,n){return M(this,void 0,void 0,(function(){var i,r,s,o,a,u,c,h,l;return w(this,(function(d){switch(d.label){case 0:i=\\\"getServerEndpoint\\\",r=0,s=e.length,d.label=1;case 1:return r<s?(o=this._formatJSONPUrl(e[r],n,t,i),ge.debug(\\\"req navi => \\\"+o),[4,this._runtime.httpReq({url:o,timeout:1e4,dataType:\\\"text\\\"})]):[3,4];case 2:if(200!==(a=d.sent()).status)return 403===a.status?ge.error(\\\"request navi error: \\\"+Ee.RC_CONN_USER_OR_PASSWD_ERROR):401===a.status&&ge.error(\\\"request navi error: \\\"+Ee.RC_CONN_APP_BLOCKED_OR_DELETED),[3,3];try{return u=a.data.match(/{[\\\\d\\\\D]+}/),0===(c=u&&u[0]?u[0]:\\\"\\\").indexOf('{\\\\\\\\\\\"code\\\\\\\\\\\":')&&(c=JSON.parse('\\\"'+c+'\\\"')),l=JSON.parse(c),h=/^https/.test(o)?\\\"https\\\":\\\"http\\\",l.protocol=h,this._runtime.useNavi||(l.server=\\\"\\\",l.backupServer=this._miniConnectUrl,l.logSwitch=0),[2,l]}catch(e){ge.error(\\\"parse navi err =>\\\",e)}d.label=3;case 3:return r+=1,[3,1];case 4:return this._runtime.useNavi?[2,null]:[2,l={code:200,protocol:\\\"https\\\",server:\\\"\\\",voipCallInfo:\\\"\\\",kvStorage:0,openHttpDNS:!1,historyMsg:!1,chatroomMsg:!1,uploadServer:\\\"https://upload.qiniup.com\\\",bosAddr:\\\"https://gz.bcebos.com\\\",location:\\\"\\\",monitor:0,joinMChrm:!1,openMp:0,openUS:0,grpMsgLimit:0,isFormatted:0,gifSize:2048,logSwitch:0,logPolicy:\\\"\\\",compDays:0,msgAck:\\\"\\\",activeServer:\\\"\\\",qnAddr:\\\"\\\",extkitSwitch:0,alone:!1,voipServer:\\\"\\\",offlinelogserver:\\\"\\\",backupServer:this._miniConnectUrl}]}}))}))},t}(qr),cs=function(){function e(e){this._pullQueue=[],this._isPulling=!1,this._pullTime=0,this._engine=e}return e.prototype._startPull=function(){return M(this,void 0,void 0,(function(){var e,t,n,i,r,s,o;return w(this,(function(a){switch(a.label){case 0:return this._isPulling||0===this._pullQueue.length?[2]:(this._isPulling=!0,e=this._pullQueue.splice(0,1)[0],t=e.roomId,n=e.timestamp,(i=this._pullTime)>n?(this._isPulling=!1,this._startPull(),[2]):[4,this._engine.pullRTCRoomEntry(t,i)]);case 1:return r=a.sent(),s=r.code,o=r.data,s===Ee.SUCCESS?(this._isPulling=!1,this._pullTime=o.syncTime||0,this._startPull()):this._startPull(),[2]}}))}))},e.prototype.pullEntry=function(e,t){this._pullQueue.push({roomId:e,timestamp:t}),this._startPull()},e.prototype.reset=function(){this._pullTime=0,this._isPulling=!1},e}(),hs=function(e,t){return[\\\"send_msg\\\",e,t].join(\\\"_\\\")},ls=function(){function e(e,t){this._runtime=e,this._appkey=t,this._sendMessageMap={},this._userId=\\\"\\\"}return e.prototype.init=function(e){this._userId=e;var t=hs(this._appkey,e);this._sendMessageMap=this._getLocalInfo(t)},e.prototype._getLocalInfo=function(e){var t=this._runtime.localStorage.getItem(e);try{return t?JSON.parse(t):{}}catch(e){return{}}},e.prototype.setMessage=function(e,t){this._sendMessageMap[e]=t;var n=hs(this._appkey,this._userId),i=this._getLocalInfo(n);i[e]=t,this._runtime.localStorage.setItem(n,JSON.stringify(i))},e.prototype.getSendMessageMap=function(){return this._sendMessageMap},e.prototype.removeByUID=function(e){delete this._sendMessageMap[e]},e.prototype.removeByTimestamp=function(e){var t=hs(this._appkey,this._userId),n=this._getLocalInfo(t);Object.keys(n).forEach((function(t){n[t]<e&&delete n[t]})),this._runtime.localStorage.setItem(t,JSON.stringify(n))},e}(),ds=function(e){var t=\\\"RCDeviceId\\\",n=I(e),i=\\\"\\\",r=n.get(t);return r?i=r:(i=H(),n.set(t,i)),i};(ts={})[j.PRIVATE]=br.qryPMsg,ts[j.GROUP]=br.qryGMsg,ts[j.CHATROOM]=br.qryCHMsg,ts[j.CUSTOMER_SERVICE]=br.qryCMsg,ts[j.SYSTEM]=br.qrySMsg;var fs=[br[br.recallMsg],br[br.ppMsgS],br[br.pgMsgS],br[br.ppMsgP],br[br.pgMsgP],br[br.chatMsg],br[br.pcMsgP],br[br.prMsgS],br[br.updUgRTime]],ps=function(e,t,n,r,s,o){return{conversationType:e,targetId:t,senderUserId:o,messageDirection:me.SEND,isCounted:!!n.isCounted,isMentioned:!!n.isMentioned,content:n.content,messageType:n.messageType,isOffLineMessage:!1,isPersited:!!n.isPersited,messageUId:r,sentTime:s,receivedTime:0,disableNotification:!!n.disableNotification,isStatusMessage:!!n.isStatusMessage,canIncludeExpansion:!!n.canIncludeExpansion,expansion:n.canIncludeExpansion?n.expansion:null,receivedStatus:i.UNREAD,pushConfig:n.pushConfig,channelId:n.channelId,isInterrupt:n.isInterrupt}},gs=function(e){return e.sort((function(e,t){var n,i,r=(null===(n=e.latestMessage)||void 0===n?void 0:n.sentTime)||0;return((null===(i=t.latestMessage)||void 0===i?void 0:i.sentTime)||0)-r}))},_s=function(e){function t(t,n,i){var r=e.call(this,t,n,i)||this;return r._customMessageType={},r._reconnectTimer=-1,r._pullOfflineFinished=!1,r._connectedTime=0,r._localConnectedTime=0,r._status=Ie.DISCONNECTED,r._pullingMsg=!1,r._pullQueue=[],r._chrmsQueue={},r._latestSyncTimestamp=0,r._intervalTimer=-1,r._pullChatroomEntryTimestamp=0,r._lastSyncUltraMsgTimeStamp=0,r._lastSyncUltraMsgLocalTimeStamp=0,r._ultraGroupTimer=-1,r._isUltraPulling=!1,r._ultraGroupTimeQue=[],r._isUltraGroupListExist=!1,r._ultraGroupMap={},r._firstPullUltraGroupTime=0,r._ultraMsgMap={},r._pullUltraChangeMessageQue=[],r._isPullingUltraChangeMessage=!1,r._lastPullingUltraChangeMessageTime=0,r._ultraMsgChangeMap={},r._letterbox=new Hr(t,i.appkey),r._sendMessageStore=new ls(t,i.appkey),r._chrmEntryHandler=new Qr(r),r}return N(t,e),t.prototype._createNavi=function(){return new us(this.runtime,this._options)},t.prototype.getConnectedTime=function(){return this._connectedTime},t.prototype.connect=function(e,t){return M(this,void 0,void 0,(function(){var n,i,r,s,o,a=this;return w(this,(function(u){switch(u.label){case 0:return n=[],this._naviInfo=t,t.server?n.push(t.server):ge.warn(\\\"navi.server is invalid\\\"),(i=t.backupServer)&&i.split(\\\",\\\").forEach((function(e){n.indexOf(e)<0&&n.push(e)})),0===n.length?(ge.error(\\\"navi invaild.\\\",n),[2,Ee.UNKNOWN]):(r=this.runtime.createDataChannel({status:function(i){a._connectionStatusHandler(i,e,n,t.protocol)},signal:this._signalHandler.bind(this)},this._options.connectionType),s=et.V3,1===t.openAnti&&(s=et.V4),[4,r.connect(this._appkey,e,n,t.protocol,this._apiVer,s)]);case 1:return(o=u.sent())===Ee.SUCCESS?(this._channel=r,this.currentUserId=r.userId,this._connectedTime=r.connectedTime,this._localConnectedTime=Math.floor((Date.now()+r.sendConnectTime)/2),this._watcher.status(Ie.CONNECTED),this._status=Ie.CONNECTED,this._pullOfflineFinished=!1,this._conversationManager=new os(this,this._appkey,this.currentUserId,this._watcher.conversation,this._watcher.conversationTag),this._conversationManager.startPullConversationStatus(0),this._userSettingManager=new as(this,this._appkey,this.currentUserId,this._watcher.tag),this._userSettingManager.pullUserSettings(0),this._sendMessageStore.init(this.currentUserId),this._conversationManager.adaptOldStore(),this._rtcKVManager=new cs(this),this._joinedChrmManager=new Wr(this.runtime,this._appkey,this.currentUserId,t.joinMChrm),this._startSyncInterval(),1===t.ugMsg&&this._startUltraSyncInterval()):r.close(),[2,o]}}))}))},t.prototype._connectionStatusHandler=function(e,t,n,i){if(ge.warn(\\\"connection status changed:\\\",e),this._status=e,e!==Ie.CONNECTING)if(e!==Ie.CONNECTED){if(this._channel&&e!==Ie.DISCONNECTED)return e===Ie.BLOCKED||e===Ie.KICKED_OFFLINE_BY_OTHER_CLIENT||e===Ie.DISCONNECT_BY_SERVER?(this.disconnect(),void this._watcher.status(e)):void(e!==Ie.REDIRECT?(this._watcher.status(e),this._try2Reconnect(t,n,i)):this._watcher.status(e));this._watcher.status(e)}else this._watcher.status(e);else this._watcher.status(e)},t.prototype._try2Reconnect=function(e,t,n){return M(this,void 0,void 0,(function(){var i,r=this;return w(this,(function(s){switch(s.label){case 0:return this._channel?(i=et.V3,1===this._naviInfo.openAnti&&(i=et.V4),[4,this._channel.connect(this._appkey,e,t,n,this._apiVer,i)]):[2];case 1:return s.sent()===Ee.SUCCESS?(this._pullOfflineFinished=!1,this._startSyncInterval(),this._watcher.status(Ie.CONNECTED),this._status=Ie.CONNECTED,this._startUltraSyncInterval(),this._rejoinChrm(),ge.__insertLogIntoDatabase(),[2]):(this._watcher.status(Ie.WEBSOCKET_UNAVAILABLE),this._status=Ie.WEBSOCKET_UNAVAILABLE,this._reconnectTimer=setTimeout((function(){r._reconnectTimer=-1,r._try2Reconnect(e,t,n)}),5e3),[2])}}))}))},t.prototype._signalHandler=function(e,t){var n=e.syncMsg,i=e.topic;if(n)this._receiveSyncMsg(e,t);else{var r=br[i];if(r)switch(r){case br.s_ntf:ge.info(\\\"recv s_ntf -> signal.messageId: \\\"+e.messageId),this._pullMsg(e);break;case br.s_msg:this._receiveMsg(e);break;case br.s_cmd:this._receiveStateNotify(e);break;case br.s_us:this._receiveSettingNotify(e);break;case br.rtc_ntf:this._receiveRtcKv(e);break;case br.s_opNtf:this._pullOperateStatusNotify(e)}else ge.error(\\\"unknown topic:\\\",i)}},t.prototype._receiveStateNotify=function(e){var t,n=null===(t=this._channel)||void 0===t?void 0:t.codec.decodeByPBName(e.data,Bt),i=n.time,r=n.type,s=n.chrmId;switch(r){case 2:this._chrmEntryHandler.pullEntry(s,i);break;case 3:this._conversationManager.startPullConversationStatus(i);break;case 4:this._chrmEntryHandler.reset(s),this._watcher.chatroom({chatroomDestroyed:e.targetId});break;case 6:this._ultraGroupTimeQue.push(i),this._syncUltraMsg(this._lastSyncUltraMsgTimeStamp);break;case 7:this._pullUltraChangeMessageQue.push(i),this._pullUltraChangeMessageList(this._lastPullingUltraChangeMessageTime)}},t.prototype._receiveSettingNotify=function(e){var t,n=(null===(t=this._channel)||void 0===t?void 0:t.codec.decodeByPBName(e.data,kn)).version;this._userSettingManager.pullUserSettings(n)},t.prototype._receiveRtcKv=function(e){var t,n=null===(t=this._channel)||void 0===t?void 0:t.codec.decodeByPBName(e.data,fi),i=n.time,r=n.type,s=n.roomId;switch(r){case 1:this._rtcKVManager.pullEntry(s,i)}},t.prototype._receiveMessageExpansion=function(e){var t=e.content,n=t.put,i=t.del,r=t.mid;n&&this._watcher.expansion({updatedExpansion:{messageUId:r,expansion:n}}),i&&this._watcher.expansion({deletedExpansion:{messageUId:r,deletedKeys:i}})},t.prototype._receiveSyncMsg=function(e,t){var n,i;if(fs.includes(e.topic)){if(e.topic===br[br.updUgRTime]){var r=null===(n=this._channel)||void 0===n?void 0:n.codec.decodeByPBName(e.data,zt),s=r.channelId,o=r.busChannel,a=this._ultraGroupMap[o+\\\"_\\\"+s];return a&&(a.unreadMessageCount=0,a.unreadMentionedCount=0,a.lastReadTime=t.timestamp,this._watcher.conversation(It([a]))),void(t&&(this._ultraMsgMap[t.messageUId]=t.timestamp))}var u=null===(i=this._channel)||void 0===i?void 0:i.codec.decodeByPBName(e.data,Ut,{currentUserId:this.currentUserId,signal:e});u=this._handleMsgProperties(u),t&&(u.sentTime=t.timestamp,u.messageUId=t.messageUId),this._pullingMsg?this._pullQueue.push((null==t?void 0:t.timestamp)||u.sentTime):(t&&this._sendMessageStore.setMessage(t.messageUId,t.timestamp),u.messageType!==Se.EXPANSION_NOTIFY?(u.messageType===Se.SYNC_READ_STATUS&&this._conversationManager.clearUnreadCount(u.conversationType,u.targetId,u.channelId),this._conversationManager.setConversationCacheByMessage(u,!0),this._watcher.batchMessage([u])):this._receiveMessageExpansion(u))}},t.prototype._pullMsg=function(e){if(this._channel){var t=this._channel.codec.decodeByPBName(e.data,Bt),n=t.type,i=t.chrmId,r=t.time;if(ge.info(\\\"s_ntf -> type: \\\"+n+\\\", chrmId: \\\"+i+\\\", time: \\\"+r),2===n){var s=this._chrmsQueue[i];if(!s)return;s.queue.push(r),this._pullChrmMsg(i)}else this._pullQueue.push(r),this._syncMsg()}},t.prototype._startSyncInterval=function(){var e=this;this._stopSyncInterval();this._intervalTimer=setInterval((function(){Date.now()-e._latestSyncTimestamp>=18e4&&e._syncMsg()}),3e4),this._latestSyncTimestamp=Date.now(),this._syncMsg()},t.prototype._stopSyncInterval=function(){-1!==this._intervalTimer&&(clearInterval(this._intervalTimer),this._intervalTimer=-1)},t.prototype._syncMsg=function(){return M(this,void 0,void 0,(function(){var e,t,n,i,r,s,o,a,u,c,h,l,d,f,p=this;return w(this,(function(g){switch(g.label){case 0:return this._pullingMsg?[2]:this._channel?(this._pullingMsg=!0,e=this._letterbox.getOutboxTime(this.currentUserId),t=this._letterbox.getInboxTime(this.currentUserId),ge.info(\\\"pullMsg -> sendboxTime: \\\"+e+\\\", inboxTime: \\\"+t),n=this._channel.codec.encodeSyncMsg({sendboxTime:e,inboxTime:t}),i=new Or(br[br.pullMsg],n,this.currentUserId),[4,this._channel.send(i,Pt,{connectedTime:this._channel.connectedTime,currentUserId:this.currentUserId})]):(this._pullingMsg=!1,[2]);case 1:return r=g.sent(),s=r.code,o=r.data,this._latestSyncTimestamp=Date.now(),s!==Ee.SUCCESS||!o||re(o.finished)||re(o.list)||re(o.syncTime)?(ge.warn(\\\"pullMsg failed -> code:\\\",s,\\\", data: \\\",o),this._pullingMsg=!1,[2]):(a=o.list,u=o.finished,c=o.syncTime,ge.info(\\\"pullMsg success -> syncTime: \\\"+c+\\\", finished: \\\"+u),h=0,l=[],a.forEach((function(e){if(e.messageDirection===me.SEND&&(h=Math.max(e.sentTime,h),p._sendMessageStore.getSendMessageMap()[e.messageUId]))return void p._sendMessageStore.removeByUID(e.messageUId);if(e.messageType!==Se.EXPANSION_NOTIFY){if(e.messageType===Se.SYNC_READ_STATUS){if(e.senderUserId!==p.currentUserId)return;p._conversationManager.clearUnreadCount(e.conversationType,e.targetId,e.channelId)}var t=p._handleMsgProperties(e);p._conversationManager.setConversationCacheByMessage(t,!0),l.push(t)}else p._receiveMessageExpansion(e)})),this._watcher.batchMessage(l),this._letterbox.setInboxTime(c,this.currentUserId),this._letterbox.setOutboxTime(h,this.currentUserId),this._sendMessageStore.removeByTimestamp(h),this._pullingMsg=!1,d=this._pullQueue.filter((function(e){return e>c})),this._pullQueue.length=0,(f=this._pullQueue).push.apply(f,d),u&&!this._pullOfflineFinished&&(this._pullOfflineFinished=!0,this._watcher.pullFinished()),(!u||d.length>0)&&this._syncMsg(),[2])}}))}))},t.prototype._receiveMsg=function(e){if(this._channel&&!this._pullingMsg)if(this._pullQueue.length>0)this._syncMsg();else{var t=this._channel.codec.decodeByPBName(e.data,Lt,{currentUserId:this.currentUserId,connectedTime:this._channel.connectedTime});(t=this._handleMsgProperties(t)).senderUserId===this.currentUserId&&this._sendMessageStore.setMessage(t.messageUId,t.sentTime),t.isStatusMessage||t.senderUserId===this.currentUserId||this._letterbox.setInboxTime(t.sentTime,this.currentUserId),t.messageType!==Se.EXPANSION_NOTIFY?t.messageType===Se.SYNC_READ_STATUS&&t.senderUserId!==this.currentUserId||(this._conversationManager.setConversationCacheByMessage(t,!0),this._watcher.batchMessage([t])):this._receiveMessageExpansion(t)}},t.prototype._handleMsgProperties=function(e,t){void 0===t&&(t=!1);var n,i=e.messageType,r=e.isCounted,s=e.isPersited,o=e.isStatusMessage,a=i in v,u=i in this._customMessageType;if(n=a?O(O({},v[i]),{isStatusMessage:T.includes(i)}):u?this._customMessageType[i]:{isCounted:!se(r)&&r,isPersited:!se(s)&&s,isStatusMessage:!1},Object.assign(e,n),t&&!re(o)&&(e.isStatusMessage=o),!t){var c=e.content.user;if(c){var h=c.portrait,l=c.portraitUri,d=h||l;d&&(c.portrait=c.portraitUri=d)}}return e},t.prototype.getHistoryMessage=function(e,t,n,i,r,s){return void 0===s&&(s=\\\"\\\"),M(this,void 0,void 0,(function(){var o,a,u,c,h,l,d,f,p;return w(this,(function(g){switch(g.label){case 0:return a=(o=this).currentUserId,u=o._channel,c=sr[e]||$i,h=1===i&&0===n,u?(l=u.codec.encodeGetHistoryMsg(t,{timestamp:n,count:h?2:i,order:r,channelId:s}),[4,u.send(new Or(c,l,a),Ft,{currentUserId:a,connectedTime:u.connectedTime,conversation:{targetId:t}})]):[3,2];case 1:return d=g.sent(),(f=d.code)!==Ee.SUCCESS?[2,{code:f}]:(p=d.data,h&&2===p.list.length&&(p.hasMore=!0,0===r?p.list.shift():p.list.pop()),[2,{code:f,data:{list:p.list,hasMore:p.hasMore}}]);case 2:return[2,{code:Ee.RC_NET_CHANNEL_INVALID}]}}))}))},t.prototype.reportSDKInfo=function(e){var t=this.currentUserId,n=this._channel;if(n){ge.info(\\\"reportSDKInfo ->\\\",e);var i=n.codec.encodeReportSDKInfo(JSON.stringify(e)),r=new Or(br[br.reportsdk],i,t);n.send(r).then((function(e){var t=e.code;t!==Ee.SUCCESS&&ge.warn(\\\"reportSDKInfo failed -> code: \\\"+t)}))}},t.prototype.deleteRemoteMessage=function(e,t,n,i){return M(this,void 0,void 0,(function(){var r,s,o,a,u,c,h;return w(this,(function(l){switch(l.label){case 0:return s=(r=this).currentUserId,(o=r._channel)?(a=o.codec.encodeDeleteMessages(e,t,n,i),u=new Or(Fi,a,s),[4,o.send(u)]):[3,2];case 1:return c=l.sent(),h=c.code,Ee.SUCCESS,[2,h];case 2:return[2,Ee.RC_NET_CHANNEL_INVALID]}}))}))},t.prototype.deleteRemoteMessageByTimestamp=function(e,t,n,i){return M(this,void 0,void 0,(function(){var r,s,o,a,u,c,h,l;return w(this,(function(d){switch(d.label){case 0:return s=(r=this).currentUserId,(o=r._channel)?(a=o.codec.encodeClearMessages(t,n,i,e),u=or[e],c=new Or(u,a,s),[4,o.send(c)]):[3,2];case 1:return h=d.sent(),l=h.code,Ee.SUCCESS,[2,l];case 2:return[2,Ee.RC_NET_CHANNEL_INVALID]}}))}))},t.prototype.getConversationList=function(e,t,n,i,r){return void 0===e&&(e=300),M(this,void 0,void 0,(function(){var r,s,o,a,u,c,h,l,d=this;return w(this,(function(f){switch(f.label){case 0:return s=(r=this).currentUserId,o=r._channel,t=t||j.PRIVATE,o?(a=o.codec.encodeOldConversationList({count:e,type:t,startTime:n,order:i}),u=new Or(Ji,a,s),[4,o.send(u,Kt,{currentUserId:s,connectedTime:o.connectedTime,afterDecode:function(e){var t=e.conversationType,n=e.targetId,i=e.channelId,r=d._conversationManager.get(t,n,i);return Object.assign(e,r),e}})]):[3,2];case 1:return c=f.sent(),h=c.code,l=c.data,h!==Ee.SUCCESS?[2,{code:h}]:[2,{code:h,data:null==l?void 0:l.list}];case 2:return[2,{code:Ee.RC_NET_CHANNEL_INVALID}]}}))}))},t.prototype.removeConversation=function(e,t,n){return M(this,void 0,void 0,(function(){var i,r,s,o,a;return w(this,(function(u){switch(u.label){case 0:return(i=this._channel)?(r=i.codec.encodeRemoveOldConversationList({conversationType:e,channelId:n,targetId:t}),s=new Or(zi,r,t),[4,i.send(s)]):[3,2];case 1:return o=u.sent(),ge.info(\\\"RemoveConversation =>\\\",o),a=o.code,Ee.SUCCESS,[2,a];case 2:return[2,Ee.RC_NET_CHANNEL_INVALID]}}))}))},t.prototype.getConversation=function(e,t,n){return M(this,void 0,void 0,(function(){var i,r,s,o,a,u;return w(this,(function(c){switch(c.label){case 0:return e!==j.ULTRA_GROUP?[3,1]:(i=this._ultraGroupMap[n+\\\"_\\\"+t])?[3,3]:[2,{code:Ee.CONVER_GET_ERROR}];case 1:return(r=this._conversationManager.get(e,t,n))?[4,this.getHistoryMessage(e,t,0,1,0)]:[2,{code:Ee.CONVER_GET_ERROR}];case 2:if(s=c.sent(),o=s.code,a=s.data,o!==Ee.SUCCESS)return[2,{code:Ee.CONVER_GET_ERROR}];u=(null==a?void 0:a.list[0])||null,i={conversationType:e,targetId:t,channelId:n,unreadMessageCount:r.unreadMessageCount||0,latestMessage:u,notificationStatus:r.notificationStatus||Oe.CLOSE,isTop:r.isTop||!1,lastUnreadTime:r.lastUnreadTime||0,unreadMentionedCount:r.unreadMentionedCount||0},c.label=3;case 3:return[2,{code:Ee.SUCCESS,data:i}]}}))}))},t.prototype.getAllConversationUnreadCount=function(e,t,n){var i=this._conversationManager.getAllUnreadCount(e,t,n);return Promise.resolve({code:Ee.SUCCESS,data:i})},t.prototype.getConversationUnreadCount=function(e,t,n){var i,r;return r=e===j.ULTRA_GROUP?(null===(i=this._ultraGroupMap[n+\\\"_\\\"+t])||void 0===i?void 0:i.unreadMessageCount)||0:this._conversationManager.getUnreadCount(e,t,n),Promise.resolve({code:Ee.SUCCESS,data:r})},t.prototype.clearConversationUnreadCount=function(e,t,n){return this._conversationManager.clearUnreadCount(e,t,n,!1),Promise.resolve(Ee.SUCCESS)},t.prototype.clearAllUnreadCount=function(){return this._conversationManager.clearAllUnreadCount(),Promise.resolve(Ee.SUCCESS)},t.prototype.getFirstUnreadMessage=function(e,t){throw new Error(\\\"Method not implemented.\\\")},t.prototype.saveConversationMessageDraft=function(e,t,n,i){return this._conversationManager.setDraft(e,t,n,i),Promise.resolve(Ee.SUCCESS)},t.prototype.getConversationMessageDraft=function(e,t,n){var i=this._conversationManager.getDraft(e,t,n);return Promise.resolve({code:Ee.SUCCESS,data:i})},t.prototype.clearConversationMessageDraft=function(e,t,n){return this._conversationManager.clearDraft(e,t,n),Promise.resolve(Ee.SUCCESS)},t.prototype.pullConversationStatus=function(e){return M(this,void 0,void 0,(function(){var t,n,i,r,s,o,a,u,c,h=this;return w(this,(function(l){switch(l.label){case 0:return n=(t=this)._channel,i=t.currentUserId,n?(r=n.codec.encodeGetConversationStatus(e),s=new Or(br[br.pullSeAtts],r,i),[4,n.send(s,Bn)]):[3,2];case 1:return o=l.sent(),a=o.code,u=o.data,a!==Ee.SUCCESS?[2,{code:a}]:(c=[],Array.isArray(u)&&u.forEach((function(e){var t=e.conversationType,n=e.targetId,i=e.notificationStatus,r=e.channelId,s=e.isTop,o=h._ultraGroupMap[r+\\\"_\\\"+n];t===j.ULTRA_GROUP?o&&(void 0!==i&&(o.notificationStatus=i),\\\"boolean\\\"==typeof s&&(o.isTop=s)):c.push(e)})),[2,{code:a,data:c}]);case 2:return[2,{code:Ee.RC_NET_CHANNEL_INVALID}]}}))}))},t.prototype.batchSetConversationStatus=function(e){return M(this,void 0,void 0,(function(){var t,n,i,r,s,o,a,u,c,h,l,d=this;return w(this,(function(f){switch(f.label){case 0:return n=(t=this).currentUserId,(i=t._channel)?(r=i.codec.encodeSetConversationStatus(e),s=new Or(Zi,r,n),[4,i.send(s,Kn)]):[3,2];case 1:return o=f.sent(),a=o.code,u=o.data,a===Ee.SUCCESS?(c=u,h=[],e.forEach((function(e){var t=e.conversationType,n=e.targetId,i=e.notificationStatus,r=e.channelId,s=e.isTop;if(t===j.ULTRA_GROUP){var o=d._ultraGroupMap[r+\\\"_\\\"+n];o&&(void 0!==i&&(o.notificationStatus=i),void 0!==s&&(o.isTop=s),h.push(o))}else d._conversationManager.addStatus(O(O({},e),{updatedTime:c.version}),!0)})),h.length>0&&(l=It(h),l=gs(l),this._watcher.conversation(l)),[2,a]):[2,a];case 2:return[2,Ee.RC_NET_CHANNEL_INVALID]}}))}))},t.prototype._joinChrm=function(e,t,n){return M(this,void 0,void 0,(function(){var i,r,s,o,a,u,c;return w(this,(function(h){switch(h.label){case 0:return(i=this._channel)?(r=i.codec.encodeJoinOrQuitChatRoom(),s=new Or(n?Ki:qi,r,e),[4,i.send(s,Xt)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return o=h.sent(),a=o.code,u=o.data,a===Ee.SUCCESS&&(c=u.joinTime,this._chrmsQueue[e]||(this._chrmsQueue[e]={pulling:!1,queue:[],timestamp:0}),this._pullChrmMsg(e,t,c),this._naviInfo.kvStorage&&this._chrmEntryHandler.pullEntry(e,0),this._joinedChrmManager.set(e,t)),[2,a]}}))}))},t.prototype._rejoinChrm=function(){return M(this,void 0,void 0,(function(){var e,t,n,i,r,s;return w(this,(function(o){switch(o.label){case 0:for(n in e=this._joinedChrmManager.get(),t=[],e)t.push(n);i=0,o.label=1;case 1:return i<t.length?(r=t[i],[4,this._joinChrm(r,e[r]||10,!0)]):[3,4];case 2:(s=o.sent())===Ee.SUCCESS?this._watcher.chatroom({rejoinedRoom:{chatroomId:r,count:e[r]}}):this._watcher.chatroom({rejoinedRoom:{chatroomId:r,errorCode:s}}),o.label=3;case 3:return i++,[3,1];case 4:return[2]}}))}))},t.prototype._pullChrmMsg=function(e,t,n){return void 0===t&&(t=10),void 0===n&&(n=0),M(this,void 0,void 0,(function(){var i,r,s,o,a,u,c,h,l,d,f,p;return w(this,(function(g){switch(g.label){case 0:return this._channel?(i=this._chrmsQueue[e],r=i.pulling,s=i.timestamp,r?[2]:(i.pulling=!0,o=this._channel.codec.encodeChrmSyncMsg(s,t),a=new Or(br[br.chrmPull],o,e),[4,this._channel.send(a,Pt,{connectedTime:this._channel.connectedTime,currentUserId:this.currentUserId})])):[2];case 1:return u=g.sent(),c=u.code,h=u.data,i.pulling=!1,c===Ee.SUCCESS&&h?(l=h.list,d=h.syncTime,f=h.finished,i.timestamp=n?Math.max(d,n):d,i.queue=i.queue.filter((function(e){return e>d})),p=[],l.forEach((function(e){e.sentTime<s||p.push(e)})),this._watcher.batchMessage(p),(!f||i.queue.length>0)&&this._pullChrmMsg(e),[2]):(ge.warn(\\\"pull chatroom msg failed, code:\\\",c,\\\", data:\\\",h),[2])}}))}))},t.prototype.joinChatroom=function(e,t){return M(this,void 0,void 0,(function(){return w(this,(function(n){return[2,this._joinChrm(e,t,!1)]}))}))},t.prototype.joinExistChatroom=function(e,t){return M(this,void 0,void 0,(function(){return w(this,(function(n){return[2,this._joinChrm(e,t,!0)]}))}))},t.prototype.quitChatroom=function(e){return M(this,void 0,void 0,(function(){var t,n,i,r,s;return w(this,(function(o){switch(o.label){case 0:return(t=this._channel)?(n=t.codec.encodeJoinOrQuitChatRoom(),i=new Or(Hi,n,e),[4,t.send(i)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return r=o.sent(),(s=r.code)===Ee.SUCCESS&&(delete this._chrmsQueue[e],this._chrmEntryHandler.reset(e),this._joinedChrmManager.remove(e)),[2,s]}}))}))},t.prototype.getChatroomInfo=function(e,t,n){return M(this,void 0,void 0,(function(){var i,r,s,o,a,u;return w(this,(function(c){switch(c.label){case 0:return(i=this._channel)?(r=i.codec.encodeGetChatRoomInfo(t,n),s=new Or(br[br.queryChrmI],r,e),[4,i.send(s,en)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return o=c.sent(),a=o.code,u=o.data,a!==Ee.SUCCESS?[2,{code:a}]:[2,{code:a,data:u}]}}))}))},t.prototype.getChatroomHistoryMessages=function(e,t,n,i){return M(this,void 0,void 0,(function(){var r,s,o,a,u,c;return w(this,(function(h){switch(h.label){case 0:return(r=this._channel)?(s=r.codec.encodeGetHistoryMsg(e,{timestamp:t,count:n,order:i}),o=new Or(tr,s,e),[4,r.send(o,Ft,{conversation:{targetId:e}})]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return a=h.sent(),u=a.code,c=a.data,u!==Ee.SUCCESS?[2,{code:u}]:[2,{code:u,data:{list:c.list,hasMore:c.hasMore}}]}}))}))},t.prototype._modifyChatroomKV=function(e,t){return M(this,void 0,void 0,(function(){var n,i,r,s,o,a,u,c,h;return w(this,(function(l){switch(l.label){case 0:return i=(n=this)._channel,r=n.currentUserId,i?(s=this._chrmEntryHandler.getVersion(e,t.key),t.version=null==s?this.getServerTime():s,o=i.codec.encodeModifyChatRoomKV(e,t,r),a=t.type===Le.UPDATE?Yi:ji,u=new Or(a,o,e),[4,i.send(u,Xt)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return c=l.sent(),(h=c.code)===Ee.SUCCESS?(this._chrmEntryHandler.setLocal(e,{kvEntries:[t],syncTime:(new Date).getTime()},r),[2,h]):[2,h]}}))}))},t.prototype._modifyChatroomKVS=function(e,t){return M(this,void 0,void 0,(function(){var n,i,r,s,o,a,u,c,h,l,d,f,p=this;return w(this,(function(g){switch(g.label){case 0:return i=(n=this)._channel,r=n.currentUserId,i?(t.entries.forEach((function(t){var n=p._chrmEntryHandler.getVersion(e,t.key);t.version=null==n?p.getServerTime():n})),s=i.codec.encodeModifyChatRoomKVS(e,t,r),o=t.type===Le.UPDATE?Qi:Wi,a=new Or(o,s,e),[4,i.send(a,wn)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return u=g.sent(),c=u.code,-1!==[Ee.SUCCESS,Ee.CHATROOM_KV_STORE_NOT_ALL_SUCCESS].indexOf(c)&&(l=[],delete(d=Object.assign({},t)).entries,t.entries.forEach((function(e){l.push(Object.assign({},e,d))})),c===Ee.CHATROOM_KV_STORE_NOT_ALL_SUCCESS&&(f=u.data,ge.warn(\\\"设置失败的属性：\\\",f.errorKeys),h=f.errorKeys,f&&Array.isArray(f.errorKeys)&&f.errorKeys.forEach((function(e){var t=l.findIndex((function(t){return e.key===t.key}));-1!==t&&l.splice(t,1)}))),ge.warn(\\\"设置成功的属性：\\\",l),this._chrmEntryHandler.setLocal(e,{kvEntries:l,syncTime:(new Date).getTime()},r)),[2,{code:c,data:h}]}}))}))},t.prototype.setChatroomEntry=function(e,t){return M(this,void 0,void 0,(function(){return w(this,(function(n){return t.type=Le.UPDATE,t.userId=t.userId||this.currentUserId,[2,this._modifyChatroomKV(e,t)]}))}))},t.prototype.setChatroomEntries=function(e,t){return M(this,void 0,void 0,(function(){return w(this,(function(n){return t.type=Le.UPDATE,t.userId=t.userId||this.currentUserId,[2,this._modifyChatroomKVS(e,t)]}))}))},t.prototype.forceSetChatroomEntry=function(e,t){return M(this,void 0,void 0,(function(){return w(this,(function(n){return t.type=Le.UPDATE,t.isOverwrite=!0,t.userId=t.userId||this.currentUserId,[2,this._modifyChatroomKV(e,t)]}))}))},t.prototype.removeChatroomEntry=function(e,t){return M(this,void 0,void 0,(function(){return w(this,(function(n){return t.type=Le.DELETE,t.userId=t.userId||this.currentUserId,[2,this._modifyChatroomKV(e,t)]}))}))},t.prototype.removeChatroomEntries=function(e,t){return M(this,void 0,void 0,(function(){return w(this,(function(n){return t.type=Le.DELETE,t.userId=t.userId||this.currentUserId,[2,this._modifyChatroomKVS(e,t)]}))}))},t.prototype.forceRemoveChatroomEntry=function(e,t){return M(this,void 0,void 0,(function(){return w(this,(function(n){return t.type=Le.DELETE,t.isOverwrite=!0,t.userId=t.userId||this.currentUserId,[2,this._modifyChatroomKV(e,t)]}))}))},t.prototype.getChatroomEntry=function(e,t){return M(this,void 0,void 0,(function(){var n,i,r,s,o,a,u;return w(this,(function(c){switch(c.label){case 0:return(n=this._chrmEntryHandler.getValue(e,t))?[2,Promise.resolve({code:Ee.SUCCESS,data:n})]:[3,1];case 1:return(i=this._channel)?(r=i.codec.encodePullChatRoomKV(0),s=new Or(br[br.pullKV],r,e),[4,i.send(s,Mn)]):[2,Promise.reject({code:Ee.RC_NET_CHANNEL_INVALID})];case 2:return o=c.sent(),(a=o.data||{})&&a.kvEntries&&a.kvEntries.length&&void 0!==(u=a.kvEntries.find((function(e){return e.key===t})))?[2,Promise.resolve({code:Ee.SUCCESS,data:null==u?void 0:u.value})]:[2,Promise.resolve({code:Ee.CHATROOM_KEY_NOT_EXIST})]}}))}))},t.prototype.getAllChatroomEntry=function(e){return M(this,void 0,void 0,(function(){var t,n,i,r,s,o,a;return w(this,(function(u){switch(u.label){case 0:return(t=this._chrmEntryHandler.getAll(e))&&Object.keys(t).length?[2,Promise.resolve({code:Ee.SUCCESS,data:t})]:[3,1];case 1:return(n=this._channel)?(i={},r=n.codec.encodePullChatRoomKV(0),s=new Or(br[br.pullKV],r,e),[4,n.send(s,Mn)]):[2,Promise.reject({code:Ee.RC_NET_CHANNEL_INVALID})];case 2:return o=u.sent(),(a=o.data||{})&&a.kvEntries&&a.kvEntries.length&&a.kvEntries.forEach((function(e){e.key&&(i[e.key]=e.value||\\\"\\\")})),[2,Promise.resolve({code:Ee.SUCCESS,data:i})]}}))}))},t.prototype.pullChatroomEntry=function(e,t){return M(this,void 0,void 0,(function(){var n,i,r,s,o,a,u,c,h,l,d,f;return w(this,(function(p){switch(p.label){case 0:return i=(n=this)._channel,r=n.currentUserId,i?(t||(t=this._pullChatroomEntryTimestamp),s=i.codec.encodePullChatRoomKV(t),o=new Or(br[br.pullKV],s,e),[4,i.send(o,Mn)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return a=p.sent(),u=a.code,c=a.data,u===Ee.SUCCESS?(ge.info(\\\"Pull success ChrmKV, \\\"+JSON.stringify(a)),this._chrmEntryHandler.setLocal(e,c,r),ge.info(\\\"Save into cache success!\\\"),l=(h=c).kvEntries,d=h.syncTime,this._pullChatroomEntryTimestamp=d||0,f=[],l.length>0&&(l.forEach((function(t){var n=t.key,i=t.value,r=t.type,s=t.timestamp;f.push({key:n,value:i,type:r,timestamp:s,chatroomId:e})})),this._watcher.chatroom({updatedEntries:f})),[2,{code:u,data:c}]):[2,{code:u}]}}))}))},t.prototype.sendMessage=function(e,t,n){return M(this,void 0,void 0,(function(){var i,r,s,o,a,u,c,h,l,d;return w(this,(function(f){switch(f.label){case 0:return this._channel?(n=function(e,t){return\\\"RC:SRSMsg\\\"===e.messageType&&Object.assign(e,{directionalUserIdList:[t]}),e}(n,this.currentUserId),n=this._handleMsgProperties(n,!0),i=!![j.PRIVATE,j.GROUP].includes(e)&&n.isStatusMessage,r=i?function(e){var t;return(t={},t[j.PRIVATE]=br.ppMsgS,t[j.GROUP]=br.pgMsgS,t)[e]}(e):function(e){var t;return(t={},t[j.PRIVATE]=br.ppMsgP,t[j.GROUP]=br.pgMsgP,t[j.CHATROOM]=br.chatMsg,t[j.CUSTOMER_SERVICE]=br.pcMsgP,t[j.RTC_ROOM]=br.prMsgS,t)[e]}(e)||br.ppMsgP,i&&(n.isPersited=!1,n.isCounted=!1),s=this._channel.codec.encodeUpMsg({conversationType:e,targetId:t},n),(o=new Rr(br[r],s,t)).setHeaderQos(ze.AT_LEAST_ONCE),i?(this._channel.sendOnly(o),[2,{code:Ee.SUCCESS,data:ps(e,t,O({},n),\\\"\\\",0,this.currentUserId)}]):(a=Date.now()-this._localConnectedTime+this._connectedTime,u=ps(e,t,O({},n),\\\"\\\",a,this.currentUserId),[4,this._channel.send(o)])):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return c=f.sent(),h=c.code,l=c.data,h!==Ee.SUCCESS?[2,{code:h,data:u}]:(d=l,this._sendMessageStore.setMessage(d.messageUId,d.timestamp),u.sentTime=d.timestamp,u.messageUId=d.messageUId,this._conversationManager.setConversationCacheByMessage(u,!0),[2,{code:Ee.SUCCESS,data:u}])}}))}))},t.prototype.recallMsg=function(e,t,n,i,r){var s;return M(this,void 0,void 0,(function(){var o,a,u,c,h,l,d,f,p,g;return w(this,(function(_){switch(_.label){case 0:return this._channel?(o=r.user,a={content:{conversationType:e,targetId:t,messageUId:n,sentTime:i,user:o},messageType:\\\"RC:RcCmd\\\",disableNotification:null==r?void 0:r.disableNotification,pushConfig:null==r?void 0:r.pushConfig,pushContent:(null===(s=r.pushConfig)||void 0===s?void 0:s.pushContent)||r.pushContent||\\\"\\\",channelId:r.channelId},u=br[br.recallMsg],c=this._channel.codec.encodeUpMsg({conversationType:e,targetId:t},a),(h=new Rr(u,c,this.currentUserId)).setHeaderQos(ze.AT_LEAST_ONCE),[4,this._channel.send(h)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return l=_.sent(),d=l.code,f=l.data,d!==Ee.SUCCESS?[2,{code:d}]:(p=f,e===j.ULTRA_GROUP?(this._ultraMsgMap[p.messageUId]=p.timestamp,[2,{code:Ee.SUCCESS}]):(this._sendMessageStore.setMessage(p.messageUId,p.timestamp),g=ps(e,t,O(O({},a),{isPersited:!0}),p.messageUId,p.timestamp,this.currentUserId),this._conversationManager.setConversationCacheByMessage(g,!0),[2,{code:Ee.SUCCESS,data:g}]))}}))}))},t.prototype.sendReadReceiptMessage=function(e,t,n){return M(this,void 0,void 0,(function(){var i,r;return w(this,(function(s){switch(s.label){case 0:return this._channel?(i=this._channel.codec.encodeReadReceipt(t,n),r=new Or(br[br.rrMsg],i,e),[4,this._channel.send(r)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return[2,s.sent()]}}))}))},t.prototype.getMessageReader=function(e,t,n){return M(this,void 0,void 0,(function(){var i,r;return w(this,(function(s){switch(s.label){case 0:return this._channel?(i=this._channel.codec.encodeMessageReader(t,n),r=new Or(br[br.rrList],i,e),[4,this._channel.send(r,jn)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return[2,s.sent()]}}))}))},t.prototype.pullUserSettings=function(e){return M(this,void 0,void 0,(function(){var t,n;return w(this,(function(i){return this._channel?(t=this._channel.codec.encodePullUserSetting(e),n=new Or(br[br.pullUS],t,this.currentUserId),[2,this._channel.send(n,Vn)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}]}))}))},t.prototype.getFileToken=function(e,t,n,i){return M(this,void 0,void 0,(function(){var r,s,o,a,u,c;return w(this,(function(h){switch(h.label){case 0:return this._channel?(r=i&&\\\"uploads\\\"!==i?t||\\\"\\\":ot(e,t),s=this._channel.codec.encodeGetFileToken(e,r,n||\\\"\\\",i||\\\"\\\"),o=new Or(br[br.qnTkn],s,this.currentUserId),[4,this._channel.send(o,vn)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return a=h.sent(),u=a.code,c=a.data,c=Object.assign(c,{fileName:r}),u===Ee.SUCCESS?[2,{code:u,data:c}]:[2,{code:u}]}}))}))},t.prototype.getFileUrl=function(e,t,n,i){return M(this,void 0,void 0,(function(){var r,s,o,a,u,c,h,l,d;return w(this,(function(f){switch(f.label){case 0:return this._channel?(r=\\\"\\\",s=\\\"\\\",o=\\\"\\\",t===Ue.QINIU?(s=En,o=In):(s=Tn,o=Cn),r=t===Ue.QINIU?br[br.qnUrl]:t===Ue.AWS?br[br.s3Url]:t===Ue.STC?br[br.stcUrl]:br[br.aliUrl],a=this._channel.codec.encodeGetFileUrl(s,e,n,i),u=new Or(r,a,this.currentUserId),[4,this._channel.send(u,o)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return c=f.sent(),h=c.code,l=c.data,d=l,h===Ee.SUCCESS?[2,{code:h,data:d}]:[2,{code:h}]}}))}))},t.prototype.disconnect=function(){-1!==this._reconnectTimer&&(clearTimeout(this._reconnectTimer),this._reconnectTimer=-1),this._channel&&(this._channel.close(),this._channel=void 0),this._pullQueue.length=0,this._stopSyncInterval(),this._stopUltraSyncInterval()},t.prototype.destroy=function(){throw new Error(\\\"JSEngine's method not implemented.\\\")},t.prototype.registerMessageType=function(e,t,n,i,r){this._customMessageType[e]={isPersited:t,isCounted:n,isStatusMessage:r}},t.prototype.getServerTime=function(){return Date.now()-this._localConnectedTime+this._connectedTime},t.prototype.getCurrentUserId=function(){return this.currentUserId},t.prototype.createTag=function(e){return M(this,void 0,void 0,(function(){var t,n,i,r,s,o,a;return w(this,(function(u){switch(u.label){case 0:return this._channel?(t=this._userSettingManager.getVersion(),n=this._channel.codec.encodeCreateTag([e],t),i=new Or(br[br.addSeTag],n,this.currentUserId),[4,this._channel.send(i,Pn)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return r=u.sent(),s=r.code,o=r.data,s!==Ee.SUCCESS?[2,{code:s}]:(a=o.version,this._userSettingManager.addTag([O(O({},e),{createdTime:a})],a),[2,{code:Ee.SUCCESS,data:o}])}}))}))},t.prototype.removeTag=function(e){return M(this,void 0,void 0,(function(){var t,n,i,r,s,o,a;return w(this,(function(u){switch(u.label){case 0:return this._channel?(t=this._userSettingManager.getVersion(),n=this._channel.codec.encodeRemoveTag([e],t),i=new Or(br[br.delSeTag],n,this.currentUserId),[4,this._channel.send(i,Pn)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return r=u.sent(),s=r.code,o=r.data,s!==Ee.SUCCESS?[2,{code:s}]:(a=o.version,this._userSettingManager.deleteTag([e],a),[2,{code:Ee.SUCCESS}])}}))}))},t.prototype.updateTag=function(e){return M(this,void 0,void 0,(function(){var t,n,i,r,s,o,a;return w(this,(function(u){switch(u.label){case 0:return this._channel?(t=this._userSettingManager.getVersion(),n=this._channel.codec.encodeCreateTag([e],t),i=new Or(br[br.addSeTag],n,this.currentUserId),[4,this._channel.send(i,Pn)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return r=u.sent(),s=r.code,o=r.data,s!==Ee.SUCCESS?[2,{code:s}]:(a=o.version,this._userSettingManager.addTag([e],a),[2,{code:Ee.SUCCESS,data:o}])}}))}))},t.prototype.getTagList=function(){return M(this,void 0,void 0,(function(){var e,t;return w(this,(function(n){return e=this._userSettingManager.getTags(),t=this._conversationManager.getConversationListForTag(),e.forEach((function(e){e.conversationCount=t[e.tagId]?t[e.tagId].length:0})),[2,{code:Ee.SUCCESS,data:e}]}))}))},t.prototype.addTagForConversations=function(e,t){return M(this,void 0,void 0,(function(){var n,i,r,s,o=this;return w(this,(function(a){switch(a.label){case 0:return this._channel?this._userSettingManager.getTagById(e)?(n=this._channel.codec.encodeUpdateConversationTag([{tagId:e}],t),i=new Or(br[br.addTag],n,this.currentUserId),[4,this._channel.send(i)]):[2,{code:Ee.TAG_NOT_EXIST}]:[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return(r=a.sent().code)!==Ee.SUCCESS?[2,{code:r}]:((s={})[e]={},t.forEach((function(e){o._conversationManager.addTagStatus(e.conversationType,e.targetId,s,e.channelId)})),[2,{code:Ee.SUCCESS}])}}))}))},t.prototype.removeTagForConversations=function(e,t){return M(this,void 0,void 0,(function(){var n,i,r,s=this;return w(this,(function(o){switch(o.label){case 0:return this._channel?(n=this._channel.codec.encodeUpdateConversationTag([{tagId:e}],t),i=new Or(br[br.delTag],n,this.currentUserId),[4,this._channel.send(i)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return(r=o.sent().code)!==Ee.SUCCESS?[2,{code:r}]:(t.forEach((function(t){s._conversationManager.deleteTagStatus(t.conversationType,t.targetId,[e],t.channelId)})),[2,{code:Ee.SUCCESS}])}}))}))},t.prototype.removeTagsForConversation=function(e,t){return M(this,void 0,void 0,(function(){var n,i,r,s,o,a,u;return w(this,(function(c){switch(c.label){case 0:return this._channel?(n=e.conversationType,i=e.targetId,r=e.channelId,s=t.map((function(e){return{tagId:e}})),o=this._channel.codec.encodeUpdateConversationTag(s,[e]),a=new Or(br[br.delTag],o,this.currentUserId),[4,this._channel.send(a)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return(u=c.sent().code)!==Ee.SUCCESS?[2,{code:u}]:(this._conversationManager.deleteTagStatus(n,i,t,r),[2,{code:Ee.SUCCESS}])}}))}))},t.prototype.getConversationListByTag=function(e,t,n){return M(this,void 0,void 0,(function(){var i,r,s,o,a,u,c,h,l;return w(this,(function(d){switch(d.label){case 0:return r=(i=this).currentUserId,(s=i._channel)?(o=s.codec.encodeOldConversationList({count:n,type:j.PRIVATE,startTime:t}),a=new Or(Ji,o,r),[4,s.send(a,Kt,{currentUserId:r,connectedTime:s.connectedTime})]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return u=d.sent(),c=u.code,h=u.data,l=this._conversationHasTagFilter(e,null==h?void 0:h.list),ge.info(\\\"GetConversationListByTag\\\",l),c!==Ee.SUCCESS?[2,{code:c}]:[2,{code:c,data:l}]}}))}))},t.prototype._conversationHasTagFilter=function(e,t){var n=this,i=[],r=[];function s(e,t){return e.latestMessage&&t.latestMessage?e.latestMessage.sentTime-t.latestMessage.sentTime:0}return t.forEach((function(t){var s=t.conversationType,o=t.targetId,a=t.channelId,u=n._conversationManager.get(s,o,a),c=u.hasMentioned,h=u.mentionedInfo,l=u.lastUnreadTime,d=u.notificationStatus,f=u.isTop,p=u.tags,g=u.unreadMessageCount,_=p&&p[e];if(_){var y=O(O({},t),{hasMentioned:c,mentionedInfo:h,lastUnreadTime:l,notificationStatus:d,isTop:f,unreadMessageCount:g});_.isTop?i.push(O(O({},y),{isTopInTag:!0})):r.push(O(O({},y),{isTopInTag:!1}))}})),A(A([],i.sort(s)),r.sort(s))},t.prototype.getUnreadCountByTag=function(e,t){return M(this,void 0,void 0,(function(){var n;return w(this,(function(i){return this._channel?(n=this._conversationManager.getUnreadCountByTag(e,t),[2,{code:Ee.SUCCESS,data:n}]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}]}))}))},t.prototype.setConversationStatusInTag=function(e,t,n){return M(this,void 0,void 0,(function(){var i,r,s,o,a,u,c,h,l,d;return w(this,(function(f){switch(f.label){case 0:return this._channel?(i=t.targetId,r=t.conversationType,s=t.channelId,o=n.isTop,a=[{tagId:e,isTop:o}],(u=this._conversationManager.get(r,i,s)).tags&&Object.hasOwnProperty.call(u.tags,e)?(c=this._channel.codec.encodeUpdateConversationTag(a,[t]),h=new Or(br[br.addTag],c,this.currentUserId),[4,this._channel.send(h)]):[2,{code:Ee.NO_TAG_IN_CONVER}]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return(l=f.sent().code)!==Ee.SUCCESS?[2,{code:l}]:((d={})[e]={},o&&(d[e].isTop=!0),this._conversationManager.addTagStatus(r,i,d,s),[2,{code:Ee.SUCCESS}])}}))}))},t.prototype.getTagsForConversation=function(e){var t;return M(this,void 0,void 0,(function(){var n,i,r,s;return w(this,(function(o){if(!this._channel)return[2,{code:Ee.RC_NET_CHANNEL_INVALID}];if(n=this._conversationManager.get(e.conversationType,e.targetId,e.channelId),i=this._userSettingManager.getTagsInfo(),r=[],n.tags)for(s in n.tags)r.push({tagId:s,tagName:null===(t=i[s])||void 0===t?void 0:t.tagName});return[2,{code:Ee.SUCCESS,data:r}]}))}))},t.prototype.getBlockConversationList=function(){var e=this._conversationManager.getBlockConversationList();return Promise.resolve({code:Ee.SUCCESS,data:e})},t.prototype.getTopConversationList=function(){var e=this._conversationManager.getTopConversationList();return Promise.resolve({code:Ee.SUCCESS,data:e})},t.prototype.getUnreadMentionedCount=function(e){var t,n;return n=e.conversationType===j.ULTRA_GROUP?(null===(t=this._ultraGroupMap[e.channelId+\\\"_\\\"+e.targetId])||void 0===t?void 0:t.unreadMentionedCount)||0:this._conversationManager.getUnreadMentionedCount(e.channelId,e.conversationType,e.targetId),Promise.resolve({code:Ee.SUCCESS,data:n})},t.prototype.getAllUnreadMentionedCount=function(){var e=this._conversationManager.getAllUnreadMentionedCount();return Promise.resolve({code:Ee.SUCCESS,data:e})},t.prototype.getUltraGroupList=function(){return M(this,void 0,void 0,(function(){var e,t;return w(this,(function(n){return this._isUltraGroupListExist?(e=Object.values(this._ultraGroupMap),e=gs(e),t=It(e),[2,{code:Ee.SUCCESS,data:t}]):[2,{code:Ee.METHOD_NOT_AVAILABLE}]}))}))},t.prototype.getBlockUltraGroupList=function(){if(!this._isUltraGroupListExist)return Promise.resolve({code:Ee.METHOD_NOT_AVAILABLE});var e=Object.values(this._ultraGroupMap),t=[];return e.forEach((function(e){e.notificationStatus===Oe.OPEN&&t.push({conversationType:j.ULTRA_GROUP,targetId:e.targetId,channelId:e.channelId})})),Promise.resolve({code:Ee.SUCCESS,data:t})},t.prototype.getTopUltraGroupList=function(){if(!this._isUltraGroupListExist)return Promise.resolve({code:Ee.METHOD_NOT_AVAILABLE});var e=Object.values(this._ultraGroupMap),t=[];return e.forEach((function(e){!0===e.isTop&&t.push({conversationType:j.ULTRA_GROUP,targetId:e.targetId,channelId:e.channelId})})),Promise.resolve({code:Ee.SUCCESS,data:t})},t.prototype.getUltraGroupUnreadMentionedCountByTargetId=function(e){if(!this._isUltraGroupListExist)return Promise.resolve({code:Ee.METHOD_NOT_AVAILABLE});var t=0;for(var n in this._ultraGroupMap){n.match(/_.*/g)[0].substring(1)===e&&(t+=this._ultraGroupMap[n].unreadMentionedCount)}return Promise.resolve({code:Ee.SUCCESS,data:t})},t.prototype.clearUltraUnreadcount=function(e,t){return void 0===t&&(t=\\\"\\\"),M(this,void 0,void 0,(function(){var n,i,r,s,o;return w(this,(function(a){switch(a.label){case 0:return this._isUltraGroupListExist?this._channel?this._status!==Ie.CONNECTED?[2,Ee.RC_NET_UNAVAILABLE]:(n=Date.now(),i=this._channel.codec.encodeClearUnreadCount({conversationType:j.ULTRA_GROUP,targetId:e,channelId:t},{timestamp:n}),(r=new Rr(br[br.updUgRTime],i,this.currentUserId)).setHeaderQos(ze.AT_LEAST_ONCE),[4,this._channel.send(r)]):[2,Ee.RC_NET_CHANNEL_INVALID]:[2,Promise.resolve(Ee.METHOD_NOT_AVAILABLE)];case 1:return(s=a.sent().code)===Ee.SUCCESS&&(o=this._ultraGroupMap[t+\\\"_\\\"+e])&&(o.unreadMessageCount=0,o.unreadMentionedCount=0,o.lastReadTime=n),[2,s]}}))}))},t.prototype._getUltraGroupList=function(e){return M(this,void 0,void 0,(function(){var t,n,i,r,s,o,a,u,c,h,l,d,f,p=this;return w(this,(function(g){switch(g.label){case 0:return this._channel&&this._status===Ie.CONNECTED?(!1,t=this._channel.codec.encodeUltraGroup(e,false),n=new Or(br[br.pullUgSes],t,this.currentUserId),[4,this._channel.send(n,Kt,{currentUserId:this.currentUserId,conversationType:j.ULTRA_GROUP})]):[2];case 1:return i=g.sent(),r=i.code,s=i.data,r===Ee.SUCCESS&&s?(a=(null==s?void 0:s.list)||[],u=null==s?void 0:s.isFinished,a.forEach((function(e){e.notificationStatus=Oe.CLOSE,e.isTop=!1,p._ultraGroupMap[e.channelId+\\\"_\\\"+e.targetId]=e})),!1!==u?[3,2]:(c=a.length>0&&a[a.length-1].versionTime||0,this._getUltraGroupList(c),[3,4])):(ge.warn(\\\"pull super conversation  failed, code:\\\",r,\\\", data:\\\",s,\\\"retrying...\\\"),o=setTimeout((function(){p._firstPullUltraGroupTime=e,p._getUltraGroupList(e),clearTimeout(o)}),3e3),[2]);case 2:return[4,this.pullConversationStatus(this._firstPullUltraGroupTime)];case 3:h=g.sent(),l=h.code,d=h.data,l!==Ee.SUCCESS&&ge.warn(\\\"pullConversationStatus fail code: \\\"+l+\\\", data: \\\"+d),f=Object.values(this._ultraGroupMap),f=gs(f),this._isUltraGroupListExist=!0,this._watcher.ultraGroupEnable(It(f)),0===this._firstPullUltraGroupTime&&this._syncUltraMsg(this._lastSyncUltraMsgTimeStamp),g.label=4;case 4:return[2]}}))}))},t.prototype._startUltraSyncInterval=function(){var e=this,t=function(){e._ultraGroupTimer=setTimeout((function(){Date.now()-e._lastSyncUltraMsgLocalTimeStamp>=18e4&&e._syncUltraMsg(e._lastSyncUltraMsgTimeStamp),e._stopUltraSyncInterval(),t()}),3e4)};this._lastSyncUltraMsgLocalTimeStamp=Date.now(),this._syncUltraMsg(0),t()},t.prototype._stopUltraSyncInterval=function(){-1!==this._ultraGroupTimer&&(clearTimeout(this._ultraGroupTimer),this._ultraGroupTimer=-1)},t.prototype._syncUltraMsg=function(e){var t;return M(this,void 0,void 0,(function(){var n,i,r,s,o,a,u,c,h,l,d,f,p=this;return w(this,(function(g){switch(g.label){case 0:return this._channel&&this._status===Ie.CONNECTED?this._isUltraPulling?[2]:(ge.info(\\\"start pull ultra msg, time: \\\"+e),this._isUltraPulling=!0,n=this._channel.codec.encodeSuperSyncMsg(e),i=new Or(br[br.pullUgMsg],n,this.currentUserId),[4,this._channel.send(i,Pt,{currentUserId:this.currentUserId,conversation:{conversationType:j.ULTRA_GROUP}})]):[2];case 1:if(r=g.sent(),s=r.code,o=r.data,ge.info(\\\"end pull ultra msg, code: \\\"+s+\\\", syncTime: \\\"+(null==o?void 0:o.syncTime)+\\\", count: \\\"+(null===(t=null==o?void 0:o.list)||void 0===t?void 0:t.length)),this._lastSyncUltraMsgLocalTimeStamp=Date.now(),s!==Ee.SUCCESS||!o)return ge.warn(\\\"sync super  message  failed, code:\\\",s,\\\", data:\\\",o),this._isUltraPulling=!1,[2];if(this._isUltraPulling=!1,a=o.list,u=o.syncTime,c=o.finished,!this._isUltraGroupListExist)return ge.info(\\\"init getUltraGroupList\\\"),this._firstPullUltraGroupTime=0,this._getUltraGroupList(0),this._lastSyncUltraMsgTimeStamp=u,[2];for(f in h={},l=[],a.forEach((function(e){var t,n,i,r=e.targetId,s=e.content,o=e.messageType,a=e.messageUId,c=e.channelId,d=e.isCounted;if(p._ultraMsgMap[a])delete p._ultraMsgMap[a];else{var f=0;((null===(t=null==s?void 0:s.mentionedInfo)||void 0===t?void 0:t.type)===we.ALL||(null===(i=null===(n=null==s?void 0:s.mentionedInfo)||void 0===n?void 0:n.userIdList)||void 0===i?void 0:i.includes(p.currentUserId)))&&(f=1);var g=p._ultraGroupMap[c+\\\"_\\\"+r];if(g)d&&(o===Se.RECALL?g.unreadMessageCount>0&&(g.unreadMessageCount-=1):(g.unreadMessageCount+=1,g.unreadMentionedCount+=f)),g.versionTime=u,g.latestMessage=e,h[c+\\\"_\\\"+r]=g;else{var _={conversationType:j.ULTRA_GROUP,targetId:r,channelId:c,unreadMessageCount:1,unreadMentionedCount:f,versionTime:u,latestMessage:e,notificationStatus:Oe.CLOSE,isTop:!1};p._ultraGroupMap[c+\\\"_\\\"+r]=_,h[c+\\\"_\\\"+r]=_}l.push(e)}})),Object.keys(h).length>0&&(ge.info(\\\"notice ultragroups\\\"),d=Object.values(h),d=gs(d),this._watcher.conversation(It(d))),ge.info(\\\"notice ultragroup message\\\"),this._watcher.batchMessage(l),this._ultraGroupTimeQue=this._ultraGroupTimeQue.filter((function(e){return e>u})),this._ultraMsgMap)this._ultraMsgMap[f]<u&&delete this._ultraMsgMap[f];return!1===c?this._syncUltraMsg(u):a&&a.length>0&&(this._lastSyncUltraMsgTimeStamp=u),this._ultraGroupTimeQue.length>0&&this._syncUltraMsg(this._lastSyncUltraMsgTimeStamp),[2]}}))}))},t.prototype.sendUltraMessage=function(e,t){return M(this,void 0,void 0,(function(){var n,i,r,s,o,a,u,c,h,l;return w(this,(function(d){switch(d.label){case 0:return this._channel?this._status!==Ie.CONNECTED?[2,{code:Ee.RC_NET_UNAVAILABLE}]:(\\\"RC:SRSMsg\\\"===t.messageType&&ge.warn(\\\"ultra group -> direction message convert to message\\\"),t=this._handleMsgProperties(t,!0),n=this._channel.codec.encodeUpMsg({conversationType:j.ULTRA_GROUP,targetId:e},t),(i=new Rr(br[br.ugMsg],n,e)).setHeaderQos(ze.AT_LEAST_ONCE),r=Date.now()-this._localConnectedTime+this._connectedTime,s=ps(j.ULTRA_GROUP,e,O({},t),\\\"\\\",r,this.currentUserId),[4,this._channel.send(i)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return o=d.sent(),a=o.code,u=o.data,a!==Ee.SUCCESS?[2,{code:a,data:s}]:(c=u,s.sentTime=c.timestamp,s.messageUId=c.messageUId,this._ultraMsgMap[c.messageUId]=c.timestamp,h=t.channelId||\\\"\\\",(l=this._ultraGroupMap[h+\\\"_\\\"+e])?l.latestMessage=s:(l={conversationType:j.ULTRA_GROUP,targetId:e,channelId:h,unreadMessageCount:0,unreadMentionedCount:0,versionTime:s.sentTime,latestMessage:s,notificationStatus:Oe.CLOSE,isTop:!1},this._ultraGroupMap[h+\\\"_\\\"+e]=l),this._watcher.conversation(It([l])),[2,{code:a,data:s}])}}))}))},t.prototype.sendUltraGroupTypingStatus=function(e,t){return M(this,void 0,void 0,(function(){var n,i,r,s,o,a;return w(this,(function(u){switch(u.label){case 0:return this._channel?this._status!==Ie.CONNECTED?[2,{code:Ee.RC_NET_UNAVAILABLE}]:(n=e.conversationType,i=e.channelId,r=e.targetId,s=this._channel.codec.encodeOperateStatus(r,n,i||\\\"\\\",t||0),(o=new Rr(br[br.operate],s,r)).setHeaderQos(ze.AT_LEAST_ONCE),[4,this._channel.send(o)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return(a=u.sent().code)!==Ee.SUCCESS?[2,{code:a,msg:Ee[a]}]:[2,{code:a}]}}))}))},t.prototype.getUltraGroupMessageListByMessageUId=function(e){return M(this,void 0,void 0,(function(){var t,n,i,r,s,o,a;return w(this,(function(u){switch(u.label){case 0:return this._channel?this._status!==Ie.CONNECTED?[2,{code:Ee.RC_NET_UNAVAILABLE}]:e.messages&&e.messages.length<1||e.messages&&e.messages.length>20?[2,{code:Ee.MSG_LIMIT_ERROR}]:(t={},e.messages.forEach((function(e){t[e.messageUId]=void 0})),n=this._channel.codec.encodeMsgQuery(e),(i=new Or(br[br.qryMsg],n,this.currentUserId)).setHeaderQos(ze.AT_LEAST_ONCE),[4,this._channel.send(i,ui)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return r=u.sent(),s=r.code,o=r.data,s!==Ee.SUCCESS?[2,{code:s,msg:Ee[s]}]:(a=(o||{}).list,Array.isArray(a)&&a.forEach((function(e){var n=e.messageUId;t[n]=e})),[2,{code:0,data:t}])}}))}))},t.prototype._pullOperateStatusNotify=function(e){if(this._channel){var t=this._channel.codec.decodeByPBName(e.data,hi),n=t.conversationType,i=t.info,r=t.summary;ge.info(\\\"s_opNtf -> type: \\\"+n+\\\", info: \\\"+i+\\\", summary: \\\"+r),this._watcher.operateStatus(t)}},t.prototype.expandUltraMessage=function(e){return M(this,void 0,void 0,(function(){var t,n,i,r,s,o;return w(this,(function(a){switch(a.label){case 0:return this._channel?this._status!==Ie.CONNECTED?[2,{code:Ee.RC_NET_UNAVAILABLE}]:(t=this._channel.codec.encodeExpandUltraMessage(e,this.currentUserId),(n=new Rr(br[br.upMsgEx],t,e.targetId)).setHeaderQos(ze.AT_LEAST_ONCE),[4,this._channel.send(n)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return i=a.sent(),r=i.code,s=i.data,r!==Ee.SUCCESS?[2,{code:r,msg:Ee[r]}]:(o=s,this._ultraMsgMap[o.messageUId]=o.timestamp,[2,{code:r}])}}))}))},t.prototype.modifyMessage=function(e){return M(this,void 0,void 0,(function(){var t,n,i,r,s,o;return w(this,(function(a){switch(a.label){case 0:return this._channel?this._status!==Ie.CONNECTED?[2,{code:Ee.RC_NET_UNAVAILABLE}]:(t=this._channel.codec.encodemodifyMessage(e,this.currentUserId),(n=new Rr(br[br.modifyMsg],t,e.targetId)).setHeaderQos(ze.AT_LEAST_ONCE),[4,this._channel.send(n)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return i=a.sent(),r=i.code,s=i.data,r!==Ee.SUCCESS?[2,{code:r,msg:Ee[r]}]:(o=s,this._ultraMsgMap[o.messageUId]=o.timestamp,[2,{code:r}])}}))}))},t.prototype._pullUltraChangeMessageList=function(e){return M(this,void 0,void 0,(function(){var t,n,i,r,s,o,a,u,c,h,l,d,f,p,g,_,y,m=this;return w(this,(function(v){switch(v.label){case 0:return this._channel?this._status!==Ie.CONNECTED||this._isPullingUltraChangeMessage?[2]:(this._isPullingUltraChangeMessage=!0,t=this._channel.codec.encodeQueryMsgChange(e),(n=new Rr(br[br.qryMsgChange],t,this.currentUserId)).setHeaderQos(ze.AT_LEAST_ONCE),[4,this._channel.send(n,si)]):[2];case 1:if(i=v.sent(),r=i.code,s=i.data,this._isPullingUltraChangeMessage=!1,r!==Ee.SUCCESS)return[2];for(p in a=(o=s||{}).hasNext,u=o.list,c=(null==s?void 0:s.syncTime)||0,h=[],l={},Array.isArray(u)&&u.forEach((function(e){var t=e,n=t.targetId,i=t.conversationType,r=t.sendTime,s=t.messageUId,o=t.changeType,a=t.operatorId,u=e.channelId||\\\"\\\",c=i+\\\"_\\\"+n,d=s+\\\"_\\\"+u+\\\"_\\\"+r,f=l[c];if(f)f.add(d);else{var p=new Set([d]);l[c]=p}3!==o?m._ultraMsgChangeMap[s]=o:h.push({targetId:n,conversationType:i,sendTime:r,messageUId:s,senderUserId:a,channelId:u})})),Array.isArray(h)&&h.length>0&&this._watcher.ultraGroupMessageRecalled(h),d=function(e){var t=e.split(\\\"_\\\"),n=t.shift(),i=t.join(\\\"_\\\"),r=l[e],s=[];r.forEach((function(e){var t=e.split(\\\"_\\\"),n=t[0],i=t[1],r=t[2];s.push({sendTime:Number(r),messageUId:n,channelId:i})}));var o={targetId:i,conversationType:Number(n),messages:s};f._pullUltraMessageList(o)},f=this,l)d(p);for(_ in g=this._pullUltraChangeMessageQue.filter((function(e){return e>c})),this._pullUltraChangeMessageQue.length=0,(y=this._pullUltraChangeMessageQue).push.apply(y,g),this._ultraMsgMap)this._ultraMsgMap[_]<c&&delete this._ultraMsgMap[_];return a?this._pullUltraChangeMessageList(c):this._lastPullingUltraChangeMessageTime=c,[2]}}))}))},t.prototype._pullUltraMessageList=function(e){return M(this,void 0,void 0,(function(){var t,n,i,r,s,o,a,u,c=this;return w(this,(function(h){switch(h.label){case 0:return this._channel?this._status!==Ie.CONNECTED?[2,{code:Ee.RC_NET_UNAVAILABLE}]:(t=this._channel.codec.encodeMsgQuery(e),(n=new Or(br[br.qryMsg],t,this.currentUserId)).setHeaderQos(ze.AT_LEAST_ONCE),[4,this._channel.send(n,ui)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return i=h.sent(),r=i.code,s=i.data,r!==Ee.SUCCESS?[2,{code:r,msg:Ee[r]}]:(o=(s||{}).list,a=[],u=[],Array.isArray(o)&&o.forEach((function(e){var t=e.targetId,n=e.channelId,i=e.messageUId,r=c._ultraGroupMap[n+\\\"_\\\"+t];r&&r.latestMessage.messageUId===e.messageUId&&(r.latestMessage=e);var s=c._ultraMsgChangeMap[i+\\\"\\\"];1===s?a.push(e):2===s&&u.push(e)})),a.length>0&&this._watcher.ultraGroupMessageExpansionUpdated(a||[]),u.length>0&&this._watcher.ultraGroupMessageModified(u||[]),[2])}}))}))},t.prototype.getUltraHistoryMsg=function(e,t){return M(this,void 0,void 0,(function(){var n,i,r,s,o;return w(this,(function(a){switch(a.label){case 0:return this._channel?this._status!==Ie.CONNECTED?[2,{code:Ee.RC_NET_UNAVAILABLE}]:(n=this._channel.codec.encodeGetHistoryMsg(e,t),i=new Or(br[br.qryUgMsg],n,this.currentUserId),[4,this._channel.send(i,Ft,{currentUserId:this.currentUserId,conversation:{conversationType:j.ULTRA_GROUP,targetId:e}})]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return r=a.sent(),s=r.code,o=r.data,s===Ee.SUCCESS&&o?[2,{code:s,data:o}]:(ge.warn(\\\"get super history message  failed, code:\\\",s,\\\", data:\\\",o),[2,{code:s}])}}))}))},t.prototype.searchUltraGroupMessages=function(e){return M(this,void 0,void 0,(function(){return w(this,(function(e){return this._channel?this._status!==Ie.CONNECTED?[2,{code:Ee.RC_NET_UNAVAILABLE}]:[2,{code:Ee.SUCCESS}]:[2,{code:Ee.RC_NET_CHANNEL_INVALID}]}))}))},t.prototype.getAllConversationState=function(){return Promise.resolve({code:Ee.SUCCESS,data:this._conversationManager.getAllConversationState()})},t.prototype.joinRTCRoom=function(e,t,n,i,r,s){return M(this,void 0,void 0,(function(){var o,a;return w(this,(function(u){return this._channel?(o=this._channel.codec.encodeJoinRTCRoom(t,n,i,r,s),a=new Or(br[br.rtcRJoin_data],o,e),[2,this._channel.send(a,nn)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}]}))}))},t.prototype.quitRTCRoom=function(e){return M(this,void 0,void 0,(function(){var t,n;return w(this,(function(i){switch(i.label){case 0:return this._channel?(t=this._channel.codec.encodeQuitRTCRoom(),n=new Or(br[br.rtcRExit],t,e),[4,this._channel.send(n)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return[2,i.sent().code]}}))}))},t.prototype.rtcPing=function(e,t,n){return M(this,void 0,void 0,(function(){var i,r;return w(this,(function(s){switch(s.label){case 0:return this._channel?(i=this._channel.codec.encodeJoinRTCRoom(t,n),r=new Or(br[br.rtcPing],i,e),[4,this._channel.send(r)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return[2,s.sent().code]}}))}))},t.prototype.getRTCRoomInfo=function(e){return M(this,void 0,void 0,(function(){var t,n;return w(this,(function(i){return this._channel?(t=this._channel.codec.encodeGetRTCRoomInfo(),n=new Or(br[br.rtcRInfo],t,e),[2,this._channel.send(n,gn)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}]}))}))},t.prototype.getRTCUserInfoList=function(e){return M(this,void 0,void 0,(function(){var t,n,i,r,s;return w(this,(function(o){switch(o.label){case 0:return this._channel?(t=this._channel.codec.encodeGetRTCRoomInfo(),n=new Or(br[br.rtcUData],t,e),[4,this._channel.send(n,nn)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return i=o.sent(),r=i.code,s=i.data,[2,{code:r,data:s?{users:s.users}:s}]}}))}))},t.prototype.setRTCUserInfo=function(e,t,n){return M(this,void 0,void 0,(function(){var i,r;return w(this,(function(s){switch(s.label){case 0:return this._channel?(i=this._channel.codec.encodeSetRTCUserInfo(t,n),r=new Or(br[br.rtcUPut],i,e),[4,this._channel.send(r)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return[2,s.sent().code]}}))}))},t.prototype.removeRTCUserInfo=function(e,t){return M(this,void 0,void 0,(function(){var n,i;return w(this,(function(r){switch(r.label){case 0:return this._channel?(n=this._channel.codec.encodeRemoveRTCUserInfo(t),i=new Rr(br[br.rtcUDel],n,e),[4,this._channel.send(i)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return[2,r.sent().code]}}))}))},t.prototype.setRTCData=function(e,t,n,i,r,s){return M(this,void 0,void 0,(function(){var o,a;return w(this,(function(u){switch(u.label){case 0:return this._channel?(o=this._channel.codec.encodeSetRTCData(t,n,i,r,s),a=new Rr(br[br.rtcSetData],o,e),[4,this._channel.send(a)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return[2,u.sent().code]}}))}))},t.prototype.setRTCTotalRes=function(e,t,n,i,r){return M(this,void 0,void 0,(function(){var s,o;return w(this,(function(a){switch(a.label){case 0:return this._channel?(s=this._channel.codec.encodeUserSetRTCData(t,n,i,r),o=new Or(br[br.userSetData],s,e),[4,this._channel.send(o)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return[2,a.sent().code]}}))}))},t.prototype.setRTCCDNUris=function(e,t,n){return M(this,void 0,void 0,(function(){var i,r;return w(this,(function(s){switch(s.label){case 0:return this._channel?(i=this._channel.codec.encodeUserSetRTCCDNUris(t,n),r=new Or(br[br.userSetData],i,e),[4,this._channel.send(r)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return[2,s.sent().code]}}))}))},t.prototype.getRTCData=function(e,t,n,i){if(!this._channel)return Promise.resolve({code:Ee.RC_NET_CHANNEL_INVALID});var r=this._channel.codec.encodeGetRTCData(t,n,i),s=new Or(br[br.rtcQryData],r,e);return this._channel.send(s,ln)},t.prototype.removeRTCData=function(e,t,n,i,r){return M(this,void 0,void 0,(function(){var s,o;return w(this,(function(a){switch(a.label){case 0:return this._channel?(s=this._channel.codec.encodeRemoveRTCData(t,n,i,r),o=new Rr(br[br.rtcDelData],s,e),[4,this._channel.send(o)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return[2,a.sent().code]}}))}))},t.prototype.setRTCOutData=function(e,t,n,i){throw new Error(\\\"JSEngine's method not implemented.\\\")},t.prototype.getRTCOutData=function(e,t){throw new Error(\\\"JSEngine's method not implemented.\\\")},t.prototype.getRTCToken=function(e,t,n){return M(this,void 0,void 0,(function(){var i,r;return w(this,(function(s){return this._channel?(i=this._channel.codec.encodeJoinRTCRoom(t,n),r=new Or(br[br.rtcToken],i,e),[2,this._channel.send(r,hn)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}]}))}))},t.prototype.setRTCState=function(e,t){return M(this,void 0,void 0,(function(){var n,i;return w(this,(function(r){switch(r.label){case 0:return this._channel?(n=this._channel.codec.encodeSetRTCState(t),i=new Or(br[br.rtcUserState],n,e),[4,this._channel.send(i)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return[2,r.sent().code]}}))}))},t.prototype.getRTCUserInfo=function(e){return M(this,void 0,void 0,(function(){return w(this,(function(e){throw new Error(\\\"Method not implemented.\\\")}))}))},t.prototype.getRTCUserList=function(e){if(!this._channel)return Promise.resolve({code:Ee.RC_NET_CHANNEL_INVALID});var t=this._channel.codec.encodeGetRTCRoomInfo(),n=new Or(br[br.rtcUList],t,e);return this._channel.send(n,nn)},t.prototype.joinLivingRoomAsAudience=function(e,t,n){return void 0===t&&(t=xe.LIVE),M(this,void 0,void 0,(function(){var i,r,s,o,a,u,c,h;return w(this,(function(l){switch(l.label){case 0:return this._channel?(i=this._channel.codec.encodeJoinRTCRoom(t,n),r=new Or(br[br.viewerJoinR],i,e),[4,this._channel.send(r,mi)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return s=l.sent(),o=s.code,a=s.data,o!==Ee.SUCCESS?[2,{code:o}]:(c=(u=a).rtcToken,h=u.entries,[2,{code:o,data:{token:c,kvEntries:h}}])}}))}))},t.prototype.quitLivingRoomAsAudience=function(e){return M(this,void 0,void 0,(function(){var t,n,i;return w(this,(function(r){switch(r.label){case 0:return this._channel?(t=this._channel.codec.encodeQuitRTCRoom(),n=new Or(br[br.viewerExitR],t,e),[4,this._channel.send(n)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return i=r.sent().code,this._rtcKVManager.reset(),[2,i]}}))}))},t.prototype.rtcIdentityChange=function(e,t,n){return M(this,void 0,void 0,(function(){var i,r,s,o,a;return w(this,(function(u){switch(u.label){case 0:return this._channel?(i=this._channel.codec.encodeIdentityChangeInfo(t,n),r=new Or(br[br.rtcIdentityChange],i,e),[4,this._channel.send(r,nn)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return s=u.sent(),o=s.code,a=s.data,o!==Ee.SUCCESS?[2,{code:o}]:[2,{code:o,data:a}]}}))}))},t.prototype.pullRTCRoomEntry=function(e,t){return M(this,void 0,void 0,(function(){var t,n,i,r,s,o,a,u,c;return w(this,(function(h){switch(h.label){case 0:return n=(t=this)._channel,i=t.currentUserId,n?(ge.info(\\\"audience in room start pull KV\\\"),r=n.codec.encodePullRTCRoomKV(e,0),s=new Or(br[br.rtcPullKv],r,i),[4,n.send(s,gi)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return o=h.sent(),a=o.code,u=o.data,ge.info(\\\"audience in room end pull KV, code: \\\"+a+\\\", data: \\\"+JSON.stringify(u||{})),a===Ee.SUCCESS?(c=u.kvEntries,this._watcher.onRTCDataChange(c,e),[2,{code:a,data:u}]):[2,{code:a}]}}))}))},t.prototype.getRTCJoinedUserInfo=function(e){return M(this,void 0,void 0,(function(){var t,n,i,r,s,o,a,u;return w(this,(function(c){switch(c.label){case 0:return n=(t=this)._channel,i=t.currentUserId,n?(r=n.codec.encodeQueryUserJoinedInfo(e),s=new Or(br[br.rtcQueryJoined],r,i),[4,n.send(s,yi)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return o=c.sent(),a=o.code,u=o.data,a===Ee.SUCCESS?[2,{code:a,data:u}]:[2,{code:a}]}}))}))},t.prototype.getDeviceId=function(){return ds(this.runtime)},t.prototype.requestRoomPK=function(e){return M(this,void 0,void 0,(function(){var t,n,i;return w(this,(function(r){switch(r.label){case 0:return this._channel?(t=this._channel.codec.encodeRequestRoomPK(e),n=new Or(br[br.rtcInvite],t,e.roomId),[4,this._channel.send(n)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return i=r.sent().code,this._rtcKVManager.reset(),[2,i]}}))}))},t.prototype.cancelRoomPK=function(e){return M(this,void 0,void 0,(function(){var t,n,i;return w(this,(function(r){switch(r.label){case 0:return this._channel?(t=this._channel.codec.encodeCancelRoomPK(e),n=new Or(br[br.rtcCancelInvite],t,e.roomId),[4,this._channel.send(n)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return i=r.sent().code,this._rtcKVManager.reset(),[2,i]}}))}))},t.prototype.responseRoomPK=function(e){return M(this,void 0,void 0,(function(){var t,n,i;return w(this,(function(r){switch(r.label){case 0:return this._channel?(t=this._channel.codec.encodeResponseRoomPK(e),n=new Or(br[br.rtcInviteAnswer],t,e.roomId),[4,this._channel.send(n)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return i=r.sent().code,this._rtcKVManager.reset(),[2,i]}}))}))},t.prototype.endRoomPK=function(e){return M(this,void 0,void 0,(function(){var t,n,i;return w(this,(function(r){switch(r.label){case 0:return this._channel?(t=this._channel.codec.encodeEndRoomPK(e),n=new Or(br[br.rtcEndInvite],t,e.roomId),[4,this._channel.send(n)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return i=r.sent().code,this._rtcKVManager.reset(),[2,i]}}))}))},t.prototype.bindRTCRoomForChatroom=function(e){return M(this,void 0,void 0,(function(){var t,n,i,r;return w(this,(function(s){switch(s.label){case 0:return this._channel?(t=e.chatRoomId,n=this._channel.codec.encodebindRTCRoomForChatroom(e),i=new Or(br[br.setRtcRoomId],n,t),[4,this._channel.send(i)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return r=s.sent(),[2,r.code]}}))}))},t.prototype.callExtra=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return Promise.resolve({code:Ee.EXTRA_METHOD_UNDEFINED})},t.prototype.getConversationListWithAllChannel=function(){throw new Error(\\\"Method not implemented.\\\")},t.prototype.getConversationListWithAllChannelByPage=function(e,t){throw new Error(\\\"Method not implemented.\\\")},t.prototype.clearConversations=function(){throw new Error(\\\"Method not implemented.\\\")},t.prototype.setUserStatusListener=function(e,t){throw new Error(\\\"Method not implemented.\\\")},t.prototype.setUserStatus=function(e){throw new Error(\\\"Method not implemented.\\\")},t.prototype.subscribeUserStatus=function(e){throw new Error(\\\"Method not implemented.\\\")},t.prototype.getUserStatus=function(e){throw new Error(\\\"Method not implemented.\\\")},t.prototype.addToBlacklist=function(e){throw new Error(\\\"Method not implemented.\\\")},t.prototype.removeFromBlacklist=function(e){throw new Error(\\\"Method not implemented.\\\")},t.prototype.getBlacklist=function(){throw new Error(\\\"Method not implemented.\\\")},t.prototype.getBlacklistStatus=function(e){throw new Error(\\\"Method not implemented.\\\")},t.prototype.insertMessage=function(e,t,n){throw new Error(\\\"Method not implemented.\\\")},t.prototype.deleteMessages=function(e){throw new Error(\\\"Method not implemented.\\\")},t.prototype.deleteMessagesByTimestamp=function(e,t,n,i,r){throw new Error(\\\"Method not implemented.\\\")},t.prototype.clearMessages=function(e,t,n){throw new Error(\\\"Method not implemented.\\\")},t.prototype.getMessage=function(e){throw new Error(\\\"Method not implemented.\\\")},t.prototype.setMessageContent=function(e,t,n){throw new Error(\\\"Method not implemented.\\\")},t.prototype.setMessageSearchField=function(e,t,n){throw new Error(\\\"Method not implemented.\\\")},t.prototype.searchConversationByContent=function(e,t,n,i){throw new Error(\\\"Method not implemented.\\\")},t.prototype.searchMessageByContent=function(e,t,n,i,r,s){throw new Error(\\\"Method not implemented.\\\")},t.prototype.getUnreadMentionedMessages=function(e,t){throw new Error(\\\"Method not implemented.\\\")},t.prototype.setMessageSentStatus=function(e,t){throw new Error(\\\"Method not implemented.\\\")},t.prototype.setMessageReceivedStatus=function(e,t){throw new Error(\\\"Method not implemented.\\\")},t.prototype.clearUnreadCountByTimestamp=function(e,t,n,i){throw new Error(\\\"Method not implemented.\\\")},t.prototype.getConversationNotificationStatus=function(e,t,n){var i=this._conversationManager.get(e,t,n);return i?Promise.resolve({code:Ee.SUCCESS,data:i.notificationStatus}):Promise.resolve({code:Ee.CONVER_GET_ERROR})},t.prototype.getRemoteHistoryMessages=function(e,t,n,i,r,s){return this.getHistoryMessage(e,t,n,i,r,s)},t}(Gr),ys=function(){function e(e){this._context=e}return e.prototype.__getContext=function(){return this._context},e.prototype.getNaviInfo=function(){return this._context.getInfoFromCache()},e.prototype.getCoreVersion=function(){return this._context.coreVersion},e.prototype.getAPIVersion=function(){return this._context.apiVersion},e.prototype.getAppkey=function(){return this._context.appkey},e.prototype.getCurrentId=function(){return this._context.getCurrentUserId()},e.prototype.getConnectionStatus=function(){return this._context.getConnectionStatus()},e.prototype.getDeviceId=function(){return this._context.getDeviceId()},e.prototype.sendMessage=function(e,t,n){return this._context.sendMessage(e,t,n)},e.prototype.registerMessageType=function(e,t,n,i){void 0===i&&(i=[]),this._context.registerMessageType(e,t,n,i)},e.prototype.getServerTime=function(){return this._context.getServerTime()},e.prototype.getRTCJoinedUserInfo=function(e){return this._context.getRTCJoinedUserInfo(e)},e}(),ms=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return N(t,e),t.prototype.getNaviInfo=function(){return this._context.getInfoFromCache()},t.prototype.joinRTCRoom=function(e,t,n,i,r,s){return this._context.joinRTCRoom(e,t,n,i,r,s)},t.prototype.quitRTCRoom=function(e){return this._context.quitRTCRoom(e)},t.prototype.rtcPing=function(e,t,n){return this._context.rtcPing(e,t,n)},t.prototype.getRTCRoomInfo=function(e){return this._context.getRTCRoomInfo(e)},t.prototype.getRTCUserInfoList=function(e){return this._context.getRTCUserInfoList(e)},t.prototype.getRTCUserInfo=function(e){return this._context.getRTCUserInfo(e)},t.prototype.setRTCUserInfo=function(e,t,n){return this._context.setRTCUserInfo(e,t,n)},t.prototype.removeRTCUserInfo=function(e,t){return this._context.removeRTCUserInfo(e,t)},t.prototype.setRTCData=function(e,t,n,i,r,s){return this._context.setRTCData(e,t,n,i,r,s)},t.prototype.setRTCTotalRes=function(e,t,n,i,r){return this._context.setRTCTotalRes(e,t,n,i,r)},t.prototype.setRTCCDNUris=function(e,t,n){return this._context.setRTCCDNUris(e,t,n)},t.prototype.getRTCData=function(e,t,n,i){return this._context.getRTCData(e,t,n,i)},t.prototype.removeRTCData=function(e,t,n,i,r){return this._context.removeRTCData(e,t,n,i,r)},t.prototype.setRTCOutData=function(e,t,n,i){return this._context.setRTCOutData(e,t,n,i)},t.prototype.getRTCOutData=function(e,t){return this._context.getRTCOutData(e,t)},t.prototype.getRTCToken=function(e,t,n){return this._context.getRTCToken(e,t,n)},t.prototype.setRTCState=function(e,t){return this._context.setRTCState(e,t)},t.prototype.getRTCUserList=function(e){return this._context.getRTCUserList(e)},t.prototype.joinLivingRoomAsAudience=function(e,t,n){return this._context.joinLivingRoomAsAudience(e,t,n)},t.prototype.quitLivingRoomAsAudience=function(e){return this._context.quitLivingRoomAsAudience(e)},t.prototype.rtcIdentityChange=function(e,t,n){return this._context.rtcIdentityChange(e,t,n)},t.prototype.requestRoomPK=function(e){return this._context.requestRoomPK(e)},t.prototype.cancelRoomPK=function(e){return this._context.cancelRoomPK(e)},t.prototype.responseRoomPK=function(e){return this._context.responseRoomPK(e)},t.prototype.endRoomPK=function(e){return this._context.endRoomPK(e)},t}(ys),vs=function(){function e(){}return e.compress=function(e){for(var t=this,n={},i=0;i<e.length-1;i++){var r=e.charAt(i)+e.charAt(i+1);n.hasOwnProperty(r)?n[r].push(i):n[r]=[i]}for(var s=[],o=[],a=function(){if(o.length>0){var e=o.join(\\\"\\\");if(o=[],e.length>26){var n=t.numberEncode(e.length),i=String.fromCharCode(t.dataType.NormalExt|n.length);s.push(i+n)}else{var r=String.fromCharCode(t.dataType.Normal|e.length);s.push(r)}s.push(e)}},u=0;u<e.length;){var c=t.indexOf(n,e,u);if(c.length<2)o.push(e.charAt(u++));else if(c.length<4)o.push(e.substr(u,c.length)),u+=c.length;else{var h=t.numberEncode(u-c.offset),l=t.numberEncode(c.length);if(h.length+l.length>=c.length)o.push(e.substr(u,c.length)),u+=c.length;else{a();var d=String.fromCharCode(t.dataType.Compressed|h.length<<2|l.length);s.push(d+h+l),u+=c.length}}}a();var f=t.numberEncode(e.length),p=String.fromCharCode(t.dataType.Tail|f.length);return s.push(p+f),s.join(\\\"\\\")},e.uncompress=function(e){var t=this,n=0,i=\\\"\\\";e:do{var r=e.charCodeAt(n++),s=r&t.dataType.Mark,o=15&r,a=void 0;switch(s){case t.dataType.Compressed:var u=o>>2,c=3&o;if(0===u||0===c)throw new Error(\\\"Data parsing error,at \\\"+n);var h=t.numberDecode(e.substr(n,u)),l=t.numberDecode(e.substr(n+=u,c));if((h=i.length-h)+l>i.length)throw new Error(\\\"Data parsing error,at \\\"+n);n+=c,i+=i.substr(h,l);break;case t.dataType.Tail:if((a=t.numberDecode(e.substr(n,o)))!==i.length)throw console.log(i.length),console.log(a),new Error(\\\"Data parsing error,at \\\"+n);n+=o;break e;case t.dataType.NormalExt:a=t.numberDecode(e.substr(n,o)),i+=e.substr(n+=o,a),n+=a;break;case t.dataType.Normal:i+=e.substr(n,o),n+=o;break;case t.dataType.Mark:if(o>10)throw new Error(\\\"Data parsing error,at \\\"+n);i+=e.substr(n,16+o),n+=16+o;break;default:throw new Error(\\\"Data parsing error,at \\\"+n+\\\" header:\\\"+s)}}while(n<e.length);return i},e.indexOf=function(e,t,n){var i={length:0,offset:-1};if(t.length,n>=t.length-1)return i;var r=e[t.charAt(n)+t.charAt(n+1)];if(r[0]===n)return i;for(var s=t.length-n,o=0,a=r.length;o<a;o++){var u=r[o],c=n-u;if(!(c>this.max)){var h=Math.min(s,c);if(h<=i.length)break;if(!(i.length>2&&t.charAt(u+i.length-1)!==t.charAt(n+i.length-1))){for(var l=2,d=l;d<h&&t.charAt(u+d)===t.charAt(n+d);d++)l++;l>=i.length&&(i.length=l,i.offset=u)}}}return i},e.numberEncode=function(e){var t=this,n=[],i=0;do{i=e%t.scale,n.push(t.chars.charAt(i)),e=(e-i)/t.scale}while(e>0);return n.join(\\\"\\\")},e.numberDecode=function(e){for(var t=0,n=0,i=e.length-1;i>=0;i--){if(-1===(n=this.chars.indexOf(e.charAt(i))))throw new Error('decode number error, data is \\\"'+e+'\\\"');t=t*this.scale+n}return t},e.dataType={Tail:48,Compressed:64,NormalExt:80,Normal:96,Mark:112},e.chars=\\\"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\\\",e.scale=e.chars.length,e.max=238327,e}(),Es=1,Ts=!1,Is=\\\"undefined\\\"!=typeof location&&\\\"https://\\\"===location.protocol?\\\"https://\\\":\\\"http://\\\",Cs=function(){function e(e){this.info=e,this.logUrl=\\\"logcollection.ronghub.com\\\",this.level=1,this.itv=30,this.times=5,this.deviceId=\\\"\\\",this.deviceInfo=\\\"\\\",this.logSwitch=0,this.logUrl=e.logPolicy.url||this.logUrl,this.level=e.logPolicy.level||this.level,this.itv=e.logPolicy.itv||this.itv,this.times=e.logPolicy.times||this.times,this.deviceId=ds(e.runtime),this.logSwitch=e.logSwitch;var t=vt(e.runtime);this.deviceInfo=t.type+\\\"|\\\"+t.version+\\\"|\\\"+pe.sessionId,this.startReport()}return e.init=function(t){return Ts=!0,e._instance||(e._instance=new e(t)),e._instance},e.getInstance=function(){return e._instance},e.prototype.startReport=function(){var e=this;if(this.logSwitch&&Ts){var t=this.itv*Math.pow(2,Es-1);Es<this.times&&Es++,setTimeout((function(){e.reportRealtimeLog()}),1e3*t)}},e.prototype.reportRealtimeLog=function(){var e=this,t=pe.realTimeLogList.filter((function(t){return t.level<=e.level}));if(0!==t.length){var n=vs.compress(t.map((function(e){return e.content})).join(\\\"\\\")),i=\\\"\\\"+Is+this.logUrl+\\\"?version=\\\"+this.info.version+\\\"&appkey=\\\"+this.info.appkey+\\\"&userId=\\\"+this.info.userId+\\\"&deviceId=\\\"+this.deviceId+\\\"&deviceInfo=\\\"+this.deviceInfo+\\\"&platform=Web\\\";this.info.runtime.httpReq({method:\\\"POST\\\",url:i,body:n}).then((function(t){ge.__clearRealTimeLog(),ge.debug(\\\"report real-time log success\\\");var n=t.data;n&&(n=JSON.parse(n),e.itv=n.nextTime,e.level=n.level,e.logSwitch=n.logSwitch,Es=1),e.startReport()})).catch((function(t){ge.debug(\\\"report real-time log error -> \\\"+t),e.startReport()}))}else this.startReport()},e.prototype.reportFullLog=function(e){return M(this,void 0,void 0,(function(){var t,n,i,r,s,o,a,u,c,h,l=this;return w(this,(function(d){switch(d.label){case 0:return t=e.startTime,n=e.endTime,i=e.platform,r=e.logId,s=e.uri,o=q.getInstance(),ge.debug(\\\"received report log msg, \\\"+i.toLowerCase(),o),\\\"web\\\"===i.toLowerCase()&&o?t>n?(ge.warn(\\\"report error: The start time(\\\"+t+\\\") cannot be greater than the end time(\\\"+t+\\\")\\\"),[2]):[4,ge.__insertLogIntoDatabase()]:[2];case 1:return d.sent(),[4,o.getRangeData(B,\\\"time\\\",t,n)];case 2:return a=(a=d.sent()).filter((function(e){return!e.userId||e.userId===l.info.userId})),u=vs.compress(a.map((function(e){return e.content})).join(\\\"\\\")||\\\"no data\\\"),5e3,c=1,(h=function(){if(!(c>3)&&Ts){var e=s||l.logUrl,t=\\\"\\\"+Is+e+\\\"?version=\\\"+l.info.version+\\\"&appkey=\\\"+l.info.appkey+\\\"&userId=\\\"+l.info.userId+\\\"&logId=\\\"+r+\\\"&deviceId=\\\"+l.deviceId+\\\"&deviceInfo=\\\"+l.deviceInfo+\\\"&platform=Web\\\",n=5e3*(c-1);c++,setTimeout((function(){Ts&&l.info.runtime.httpReq({url:t,method:\\\"POST\\\",body:u}).then((function(){ge.debug(\\\"report full log success!\\\")})).catch((function(e){h(),ge.warn(\\\"report full log error -> \\\"+e)}))}),n)}})(),[2]}}))}))},e.prototype.distroy=function(){Es=1,Ts=!1},e}();function Rs(e){return Object.assign({},e)}var Ss,Ns=function(){function e(e,t){var n;this._runtime=e,this._token=\\\"\\\",this._pluginContextQueue=[],this._pluginInstanseMap={},this.coreVersion=\\\"5.2.1\\\",this._versionInfo={},this._typingInfo={},this._isInternalConnected=!1,this._connectionStatus=Ie.DISCONNECTED,this._canRedirectConnect=!1,this._watcher={message:void 0,batchMessage:void 0,conversationState:void 0,chatroomState:void 0,connectionState:void 0,rtcInnerWatcher:void 0,expansion:void 0,tag:void 0,conversationTagChanged:void 0,pullFinished:void 0,onConnecting:void 0,onConnected:void 0,onDisconnect:void 0,onSuspend:void 0,readReceiptReceived:void 0,messageReceiptRequest:void 0,messageReceiptResponse:void 0,typingState:void 0,messageBlocked:void 0,ultraGroupEnable:void 0,operateStatus:void 0,ultraGroupMessageExpansionUpdated:void 0,ultraGroupMessageModified:void 0,ultraGroupMessageRecalled:void 0},this._typingInternalTimer=-1,this._typingExpireTime=2e3,this._typingChangedList=[],this.getChatRoomHistoryMessages=this.getChatroomHistoryMessages,this._options=Object.assign({},t),this.appkey=this._options.appkey,this.apiVersion=this._options.apiVersion,this._options.typingExpireTime&&(this._options.typingExpireTime<2e3?this._typingExpireTime=2e3:this._options.typingExpireTime>6e3?this._typingExpireTime=6e3:this._typingExpireTime=this._options.typingExpireTime),this._options.navigators=this._options.navigators.filter((function(e){return/^https?:\\\\/\\\\//.test(e)})),this._options.navigators=this._options.navigators.map((function(e){return e.replace(/\\\\/$/g,\\\"\\\")})),0===this._options.navigators.length&&(n=this._options.navigators).push.apply(n,u);var i={status:this._connectionStatusListener.bind(this),batchMessage:this._batchMessageReceiver.bind(this),chatroom:this._chatroomInfoListener.bind(this),conversation:this._conversationInfoListener.bind(this),expansion:this._expansionInfoListener.bind(this),tag:this._tagListener.bind(this),conversationTag:this._conversationTagListener.bind(this),onRTCDataChange:this._rtcDataChange.bind(this),pullFinished:this._pullFinishedListener.bind(this),ultraGroupEnable:this._ultraGroupEnableListener.bind(this),operateStatus:this._operateStatusListener.bind(this),ultraGroupMessageExpansionUpdated:this._ultraGroupMessageExpansionUpdatedListener.bind(this),ultraGroupMessageModified:this._ultraGroupMessageModifiedListener.bind(this),ultraGroupMessageRecalled:this._ultraGroupMessageRecalledListener.bind(this)};this._engine=mt()?new RCCppEngine(e,i,this._options):new _s(e,i,this._options)}return e.init=function(t,n){return ge.setLogLevel(n.logLevel),ge.setLogStdout(n.logStdout),(n.indexDBSwitch||re(n.indexDBSwitch))&&q.init(),ge.debug(\\\"APIContext.init =>\\\",n.appkey,n.navigators),this._context?(ge.error(\\\"Repeat initialize!\\\"),this._context):(ge.warn(\\\"RCEngine Commit:\\\",\\\"5af4c20ffb161461319532f700e7603c9cd9893c\\\"),this._context=new e(t,n),ge.__insertLogIntoDatabase(),this._context)},e.destroy=function(){this._context&&(this._context._destroy(),this._context=void 0)},e.prototype.install=function(e,t){if(this._pluginInstanseMap[e.tag])return ge.warn(\\\"Repeat install plugin: \\\"+e.tag),this._pluginInstanseMap[e.tag];var n=\\\"RCRTC\\\"===e.tag?new ms(this):new ys(this),i=null;try{if(!e.verify(this._runtime))return null;i=e.setup(n,this._runtime,t)}catch(e){ge.error(\\\"install plugin error!\\\\n\\\",e)}return[\\\"RCRTC\\\",\\\"RCCall\\\"].includes(e.tag)&&e.version&&e.name&&(this._versionInfo[e.name]=e.version),i&&this._pluginContextQueue.push(n),i&&(this._pluginInstanseMap[e.tag]=i),i},e.prototype._handleRedirect=function(){return M(this,void 0,void 0,(function(){var e,t=this;return w(this,(function(n){switch(n.label){case 0:return ge.debug(\\\"_handleRedirct\\\",this._token),[4,this.connect(this._token,!0)];case 1:return(e=n.sent().code)!==Ee.SUCCESS&&this._canRedirectConnect&&(this._handleSuspend(e),setTimeout((function(){t._handleRedirect()}),5e3)),[2]}}))}))},e.prototype._connectionStatusListener=function(e){var t;return M(this,void 0,void 0,(function(){return w(this,(function(n){return e===Ie.REDIRECT?(this._canRedirectConnect=!0,this._handleSuspend(e),this._handleRedirect()):e===Ie.BLOCKED||e===Ie.KICKED_OFFLINE_BY_OTHER_CLIENT||e===Ie.DISCONNECT_BY_SERVER?(this._canRedirectConnect=!1,this._handleDisconnect(e)):e===Ie.CONNECTING?this._handleConnecting():e===Ie.CONNECTED?this._handleConnected():e===Ie.DISCONNECTED?this._handleDisconnect(e):e===Ie.NETWORK_UNAVAILABLE&&this._handleSuspend(e),this._connectionStatus=e,(null===(t=this._watcher.rtcInnerWatcher)||void 0===t?void 0:t.status)&&this._watcher.rtcInnerWatcher.status(e),this._pluginContextQueue.forEach((function(t){t.onconnectionstatechange&&t.onconnectionstatechange(e)})),this._watcher.connectionState&&this._watcher.connectionState(e),[2]}))}))},e.prototype._handleConnecting=function(){this._watcher.onConnecting&&this._watcher.onConnecting()},e.prototype._handleConnected=function(){this._watcher.onConnected&&this._watcher.onConnected()},e.prototype._handleDisconnect=function(e){this._watcher.onDisconnect&&this._watcher.onDisconnect(e)},e.prototype._handleSuspend=function(e){this._watcher.onSuspend&&this._watcher.onSuspend(e)},e.prototype._messageReceiver=function(e,t,n){var i,r,s;if((e.conversationType===j.RTC_ROOM||Object.prototype.hasOwnProperty.call(Ye,e.messageType))&&this._watcher.rtcInnerWatcher&&this._watcher.rtcInnerWatcher.message)this._watcher.rtcInnerWatcher.message(Rs(e));else if(-1===[\\\"RC:ChrmJoinNtf\\\",\\\"RC:ChrmQuitNtf\\\"].indexOf(e.messageType)||\\\"function\\\"!=typeof this._watcher.chatroomState){if(\\\"RC:ChrmMemChange\\\"!==e.messageType){if(e.messageType!==Se.TYPING_STATUS||(this._addTypingInfo(Rs(e)),!this._watcher.typingState))if(e.messageType!==Se.LOG_COMMAND||\\\"rongcloudsystem\\\"!==e.senderUserId)if(e.messageType!==Se.INTERCEPT){if(!this._pluginContextQueue.some((function(t){if(!t.onmessage)return!1;try{return t.onmessage(Rs(e))}catch(e){return ge.error(\\\"plugin error =>\\\",e),!1}})))if(this._watcher.message&&this._watcher.message(Rs(e),t,n),\\\"RC:ReadNtf\\\"!==e.messageType)if(\\\"RC:RRReqMsg\\\"!==e.messageType){if(\\\"RC:RRRspMsg\\\"!==e.messageType)return e;var o=null===(s=e.content)||void 0===s?void 0:s.receiptMessageDic;o&&Array.isArray(o[this._engine.currentUserId])&&\\\"function\\\"==typeof this._watcher.messageReceiptResponse&&this._watcher.messageReceiptResponse({conversationType:e.conversationType,targetId:e.targetId,channelId:e.channelId},e.senderUserId,o[this._engine.currentUserId])}else\\\"function\\\"==typeof this._watcher.messageReceiptRequest&&this._watcher.messageReceiptRequest({conversationType:e.conversationType,targetId:e.targetId,channelId:e.channelId},e.content.messageUId,e.senderUserId);else\\\"function\\\"==typeof this._watcher.readReceiptReceived&&this._watcher.readReceiptReceived({conversationType:e.conversationType,targetId:e.targetId,channelId:e.channelId},e.content.messageUId,e.content.lastMessageSendTime)}else this._MessageBlockedListener({conversationType:e.conversationType,targetId:e.targetId,channelId:e.channelId||\\\"\\\",blockType:e.content.interceptType,blockedMessageUId:e.content.msgUId});else{var a=e.content,u=a.startTime,c=a.endTime,h=a.platform,l=a.logId,d=a.uri,f=a.packageName,p={startTime:parseInt(u),endTime:parseInt(c),platform:h,logId:l,uri:d,packageName:f};null===(r=Cs.getInstance())||void 0===r||r.reportFullLog(p)}}else if(\\\"function\\\"==typeof this._watcher.chatroomState){var g={};Array.isArray(e.content.userList)&&e.content.userList.forEach((function(e){g[e.userId]=e.status})),this._watcher.chatroomState({userChange:{users:g,chatroomId:e.targetId}})}}else this._watcher.chatroomState({userChange:{users:(i={},i[e.senderUserId]=\\\"RC:ChrmQuitNtf\\\"===e.messageType?De.QUIT:De.JOIN,i),chatroomId:e.targetId}})},e.prototype._batchMessageReceiver=function(e,t,n){var i=this,r=[];e.forEach((function(e){var s=i._messageReceiver(e,t,n);s&&r.push(s)})),r.length&&this._watcher.batchMessage&&this._watcher.batchMessage(r)},e.prototype._chatroomInfoListener=function(e){this._watcher.chatroomState&&this._watcher.chatroomState(e)},e.prototype._conversationInfoListener=function(e){this._watcher.conversationState&&this._watcher.conversationState(e)},e.prototype._expansionInfoListener=function(e){this._watcher.expansion&&this._watcher.expansion(e)},e.prototype._tagListener=function(){this._watcher.tag&&this._watcher.tag()},e.prototype._conversationTagListener=function(){this._watcher.conversationTagChanged&&this._watcher.conversationTagChanged()},e.prototype._typingStatusListener=function(e){this._watcher.typingState&&this._watcher.typingState(e)},e.prototype._pullFinishedListener=function(){this._watcher.pullFinished&&this._watcher.pullFinished()},e.prototype._MessageBlockedListener=function(e){this._watcher.messageBlocked&&this._watcher.messageBlocked(e)},e.prototype._ultraGroupEnableListener=function(e){this._watcher.ultraGroupEnable&&this._watcher.ultraGroupEnable(e)},e.prototype._operateStatusListener=function(e){this._watcher.operateStatus&&this._watcher.operateStatus(e)},e.prototype._ultraGroupMessageExpansionUpdatedListener=function(e){this._watcher.ultraGroupMessageExpansionUpdated&&this._watcher.ultraGroupMessageExpansionUpdated(e)},e.prototype._ultraGroupMessageModifiedListener=function(e){this._watcher.ultraGroupMessageModified&&this._watcher.ultraGroupMessageModified(e)},e.prototype._ultraGroupMessageRecalledListener=function(e){this._watcher.ultraGroupMessageRecalled&&this._watcher.ultraGroupMessageRecalled(e)},e.prototype._rtcDataChange=function(e,t){this._pluginContextQueue.forEach((function(n){n.onrtcdatachange&&n.onrtcdatachange(e,t)}))},e.prototype.assignWatcher=function(e){var t=this;Object.keys(this._watcher).forEach((function(n){if(Object.prototype.hasOwnProperty.call(e,n)){var i=e[n];t._watcher[n]=ie(i)||ne(i)?i:void 0}}))},e.prototype.resetWatcher=function(){var e=this;Object.keys(this._watcher).forEach((function(t){e._watcher[t]=void 0}))},e.prototype._addTypingInfo=function(e){var t=e.senderUserId,n=e.conversationType,i=e.targetId,r=e.content,s=e.channelId,o=r.typingContentType,a=n+\\\"#\\\"+i+\\\"#\\\"+(s||\\\"\\\");this._typingInfo[a]||(this._typingInfo[a]=[]);var u=this._typingInfo[a].findIndex((function(e){return e.userId===t}));u>=0&&this._typingInfo[a][u].messageType===o?this._typingInfo[a][u].timestamp=Date.now():(u>=0&&this._typingInfo[a].splice(u,1),this._typingInfo[a].push({userId:t,messageType:o,timestamp:Date.now()}),this._typingChangedList.includes(a)||this._typingChangedList.push(a),this._startCheckTypingInfo())},e.prototype._startCheckTypingInfo=function(){var e=this;-1===this._typingInternalTimer&&0!==Object.keys(this._typingInfo).length&&(this._typingInternalTimer=setInterval((function(){for(var t in e._typingInfo){var n=e._typingInfo[t].length;e._typingInfo[t]=e._typingInfo[t].filter((function(t){return Date.now()-t.timestamp<e._typingExpireTime})),e._typingInfo[t].length===n||e._typingChangedList.includes(t)||e._typingChangedList.push(t),0===e._typingInfo[t].length&&delete e._typingInfo[t]}if(e._typingChangedList.length>0){var i=e._typingChangedList.map((function(t){return{conversationType:Number(t.split(\\\"#\\\")[0]),targetId:t.split(\\\"#\\\")[1],channelId:t.split(\\\"#\\\")[2],list:e._typingInfo[t]||[]}}));e._typingStatusListener(i),e._typingChangedList=[]}0===Object.keys(e._typingInfo).length&&(clearInterval(e._typingInternalTimer),e._typingInternalTimer=-1)}),500))},e.prototype.getConnectedTime=function(){return this._engine.getConnectedTime()},e.prototype.getServerTime=function(){return this._engine.getServerTime()},e.prototype.getDeviceId=function(){return this._engine.getDeviceId()},e.prototype.getCurrentUserId=function(){return this._engine.currentUserId},e.prototype.getConnectionStatus=function(){return this._connectionStatus},Object.defineProperty(e.prototype,\\\"token\\\",{get:function(){return this._token},enumerable:!1,configurable:!0}),e.prototype.connect=function(e,t,n){return void 0===t&&(t=!1),M(this,void 0,void 0,(function(){var i,r,s,o,a,u;return w(this,(function(c){switch(c.label){case 0:return this._connectionStatus===Ie.CONNECTED?[2,{code:Ee.SUCCESS,userId:this._engine.currentUserId}]:this._connectionStatus===Ie.CONNECTING?[2,{code:Ee.BIZ_ERROR_CONNECTING}]:\\\"string\\\"!=typeof e||0===e.length?[2,{code:Ee.RC_CONN_USER_OR_PASSWD_ERROR}]:(this._token=e,i=e.split(\\\"@\\\"),r=i[1],s=r?r.split(\\\";\\\").map((function(e){return/^https?:/.test(e)?e:\\\"https://\\\"+e})):[],[4,this._engine.navi.getInfo(this._getTokenWithoutNavi(),s,t,this._options.checkCA)]);case 1:return(o=c.sent())?1===(null==o?void 0:o.type)?[2,{code:Ee.PACKAGE_ENVIRONMENT_ERROR}]:(a=Je.getInfo(),[4,this._engine.connect(this._getTokenWithoutNavi(),o,n)]):[2,{code:Ee.RC_NAVI_RESOURCE_ERROR}];case 2:return u=c.sent(),ge.__insertLogIntoDatabase(),u!==Ce.REDIRECT?[3,4]:(this._connectionStatus=Ie.REDIRECT,[4,this.connect(e,!0)]);case 3:return[2,c.sent()];case 4:return u===Ee.SUCCESS&&(ge.info(\\\"connect success, userId: \\\"+this._engine.currentUserId),1!==(null==o?void 0:o.type)&&this._engine.reportSDKInfo&&this._engine.reportSDKInfo(a),Cs.init({runtime:this._runtime,logSwitch:(null==o?void 0:o.logSwitch)||0,logPolicy:JSON.parse((null==o?void 0:o.logPolicy)||\\\"{}\\\"),appkey:this.appkey,version:this.apiVersion,userId:this._engine.currentUserId}),pe.init(this._engine.currentUserId),this._isInternalConnected=!0),u!==Ee.SUCCESS||mt()||1===o.openUS&&this._pullUserSettings(),u!==Ee.SUCCESS&&(this._connectionStatus=Ie.CONNECTION_CLOSED),[2,{code:u,userId:this._engine.currentUserId}]}}))}))},e.prototype._pullUserSettings=function(){return M(this,void 0,void 0,(function(){return w(this,(function(e){return[2]}))}))},e.prototype.disconnect=function(){var e;return this._isInternalConnected=!1,clearInterval(this._typingInternalTimer),this._typingInternalTimer=-1,this._typingInfo={},null===(e=Cs.getInstance())||void 0===e||e.distroy(),ge.__insertLogIntoDatabase(),pe.reset(),this._engine.disconnect(),this._pluginContextQueue.forEach((function(e){if(e.ondisconnect)try{e.ondisconnect()}catch(e){ge.error(\\\"plugin error =>\\\",e)}})),Promise.resolve()},e.prototype.reconnect=function(e){return this._isInternalConnected?Promise.resolve({code:Ee.CAN_NOT_RECONNECT}):this.connect(this._getTokenWithoutNavi(),!1,e)},e.prototype._getTokenWithoutNavi=function(){return this._token.replace(/@.+$/,\\\"@\\\")},e.prototype.getInfoFromCache=function(){return this._engine.navi.getInfoFromCache(this._getTokenWithoutNavi())},e.prototype.registerMessageType=function(e,t,n,i,r){void 0===i&&(i=[]),void 0===r&&(r=!1),this._engine.registerMessageType(e,t,n,i,r)},e.prototype.sendMessage=function(e,t,n,i){if(e!==j.ULTRA_GROUP){var r=this.getInfoFromCache();if(1===((null==r?void 0:r.grpRRVer)||0)&&n.messageType===Se.READ_RECEIPT_RESPONSE)return Promise.resolve({code:Ee.READ_RECEIPT_ERROR})}var s=n.canIncludeExpansion,o=void 0!==s&&s,a=n.expansion;if(o&&he(a))return Promise.resolve({code:Ee.BIZ_ERROR_INVALID_PARAMETER});var u=JSON.stringify(n.content);return V(u)>131072?Promise.resolve({code:Ee.RC_MSG_CONTENT_EXCEED_LIMIT}):e===j.ULTRA_GROUP?this._engine.sendUltraMessage(t,n):this._engine.sendMessage(e,t,n,i)},e.prototype.sendExpansionMessage=function(e){return M(this,void 0,void 0,(function(){var t,n,i,r,s,o,a,u,c,h,l,d,f,p;return w(this,(function(g){switch(g.label){case 0:if(t=e.channelId,n=e.conversationType,i=e.targetId,r=e.messageUId,s=e.keys,o=e.expansion,a=e.removeAll,!e.canIncludeExpansion)return[2,{code:Ee.MESSAGE_KV_NOT_SUPPORT}];if(u=!1,c=he(o),h=!1,ne(o))for(d in l=Object.keys(o).length,u=l>20,o)if(f=o[d],(h=d.length>32||f.length>4096)||c)break;return u||h?[2,{code:Ee.EXPANSION_LIMIT_EXCEET}]:c?[2,{code:Ee.BIZ_ERROR_INVALID_PARAMETER}]:(p={mid:r},o&&(p.put=o),s&&(p.del=s),a&&(p.removeAll=1),[4,this._engine.sendMessage(n,i,{content:p,messageType:Se.EXPANSION_NOTIFY,channelId:t})]);case 1:return[2,{code:g.sent().code}]}}))}))},e.prototype.sendReadReceiptMessage=function(e,t,n){return M(this,void 0,void 0,(function(){var i;return w(this,(function(r){return i=this.getInfoFromCache(),0===((null==i?void 0:i.grpRRVer)||0)?[2,{code:Ee.READ_RECEIPT_ERROR,data:\\\"The read receipt switch is not on, please call the sendMessage method!\\\"}]:[2,this._engine.sendReadReceiptMessage(e,t,n)]}))}))},e.prototype.getMessageReader=function(e,t,n){return M(this,void 0,void 0,(function(){var i;return w(this,(function(r){return i=this.getInfoFromCache(),0===((null==i?void 0:i.grpRRVer)||0)?[2,{code:Ee.READ_RECEIPT_ERROR}]:[2,this._engine.getMessageReader(e,t,n)]}))}))},e.prototype._destroy=function(){var e;this._isInternalConnected=!1,this._watcher={batchMessage:void 0,message:void 0,conversationState:void 0,chatroomState:void 0,connectionState:void 0,rtcInnerWatcher:void 0,expansion:void 0,tag:void 0,conversationTagChanged:void 0,typingState:void 0,pullFinished:void 0,onConnecting:void 0,onConnected:void 0,onDisconnect:void 0,onSuspend:void 0},this._engine.disconnect(),this._pluginContextQueue.forEach((function(e){if(e.ondestroy)try{e.ondestroy()}catch(e){ge.error(\\\"plugin error =>\\\",e)}})),this._pluginContextQueue.length=0,this._pluginInstanseMap={},null===(e=Cs.getInstance())||void 0===e||e.distroy(),pe.reset()},e.prototype.getHistoryMessage=function(e,t,n,i,r,s,o){if(void 0===n&&(n=0),void 0===i&&(i=20),void 0===r&&(r=0),void 0===s&&(s=\\\"\\\"),void 0===o&&(o=\\\"\\\"),e===j.ULTRA_GROUP){var a={timestamp:n,count:i,order:r,channelId:s};return this._engine.getUltraHistoryMsg(t,a)}return this._engine.getHistoryMessage(e,t,n,i,r,s,o||\\\"\\\")},e.prototype.getConversationList=function(e,t,n,i,r){if(void 0===e&&(e=300),void 0===r&&(r=\\\"\\\"),t===j.ULTRA_GROUP){var s=Ee.METHOD_NOT_SUPPORT;return Promise.resolve({code:s,msg:Ee[s]})}return this._engine.getConversationList(e,t,n,i,r)},e.prototype.getConversation=function(e,t,n){return this._engine.getConversation(e,t,n)},e.prototype.removeConversation=function(e,t,n){return void 0===n&&(n=\\\"\\\"),e===j.ULTRA_GROUP?Promise.resolve(Ee.METHOD_NOT_SUPPORT):this._engine.removeConversation(e,t,n)},e.prototype.getUltraGroupList=function(){return this._engine.getUltraGroupList()},e.prototype.getBlockUltraGroupList=function(){return this._engine.getBlockUltraGroupList()},e.prototype.getTopUltraGroupList=function(){return this._engine.getTopUltraGroupList()},e.prototype.clearUnreadCount=function(e,t,n){return void 0===n&&(n=\\\"\\\"),e===j.ULTRA_GROUP?this._engine.clearUltraUnreadcount(t,n):this._engine.clearConversationUnreadCount(e,t,n)},e.prototype.clearAllUnreadCount=function(){return this._engine.clearAllUnreadCount()},e.prototype.getUnreadCount=function(e,t,n){return void 0===n&&(n=\\\"\\\"),this._engine.getConversationUnreadCount(e,t,n)},e.prototype.getTotalUnreadCount=function(e,t,n){if(t&&t.includes(j.ULTRA_GROUP)){var i=Ee.METHOD_NOT_SUPPORT;return Promise.resolve({code:i,msg:Ee[i]})}return this._engine.getAllConversationUnreadCount(e,t&&t.length>0?t:[j.PRIVATE,j.GROUP,j.SYSTEM,j.PUBLIC_SERVICE],!!n)},e.prototype.getFirstUnreadMessage=function(e,t,n){return void 0===n&&(n=\\\"\\\"),this._engine.getFirstUnreadMessage(e,t,n)},e.prototype.setConversationStatus=function(e,t,n,i,r){if(void 0===r&&(r=\\\"\\\"),e===j.ULTRA_GROUP&&void 0!==n)return Promise.resolve(Ee.METHOD_NOT_SUPPORT);var s=[{conversationType:e,targetId:t,isTop:n,notificationStatus:i,channelId:r}];return this._engine.batchSetConversationStatus(s)},e.prototype.saveConversationMessageDraft=function(e,t,n,i){return void 0===i&&(i=\\\"\\\"),this._engine.saveConversationMessageDraft(e,t,n,i)},e.prototype.getConversationMessageDraft=function(e,t,n){return void 0===n&&(n=\\\"\\\"),this._engine.getConversationMessageDraft(e,t,n)},e.prototype.clearConversationMessageDraft=function(e,t,n){return void 0===n&&(n=\\\"\\\"),this._engine.clearConversationMessageDraft(e,t,n)},e.prototype.recallMessage=function(e,t,n,i,r){return this._engine.recallMsg(e,t,n,i,r)},e.prototype.deleteRemoteMessage=function(e,t,n,i){return void 0===i&&(i=\\\"\\\"),e===j.ULTRA_GROUP?Promise.resolve(Ee.METHOD_NOT_SUPPORT):this._engine.deleteRemoteMessage(e,t,n,i)},e.prototype.deleteRemoteMessageByTimestamp=function(e,t,n,i){return void 0===i&&(i=\\\"\\\"),this._engine.deleteRemoteMessageByTimestamp(e,t,n,i)},e.prototype.joinChatroom=function(e,t){return void 0===t&&(t=10),this._engine.joinChatroom(e,t)},e.prototype.joinExistChatroom=function(e,t){return void 0===t&&(t=10),this._engine.joinExistChatroom(e,t)},e.prototype.quitChatroom=function(e){return this._engine.quitChatroom(e)},e.prototype.getChatroomInfo=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=0),this._engine.getChatroomInfo(e,t,n)},e.prototype.setChatroomEntry=function(e,t){var n=t.key,i=t.value;return ht(n)&&lt(i)?this._engine.setChatroomEntry(e,t):Promise.resolve(Ee.BIZ_ERROR_INVALID_PARAMETER)},e.prototype.setChatroomEntries=function(e,t){for(var n=0;n<t.entries.length;n++){var i=t.entries[n],r=i.key,s=i.value;if(!ht(r)||!lt(s))return Promise.resolve({code:Ee.BIZ_ERROR_INVALID_PARAMETER})}return this._engine.setChatroomEntries(e,t)},e.prototype.forceSetChatroomEntry=function(e,t){var n=t.key,i=t.value;return ht(n)&&lt(i)?this._engine.forceSetChatroomEntry(e,t):Promise.resolve(Ee.BIZ_ERROR_INVALID_PARAMETER)},e.prototype.removeChatroomEntry=function(e,t){var n=t.key;return ht(n)?this._engine.removeChatroomEntry(e,t):Promise.resolve(Ee.BIZ_ERROR_INVALID_PARAMETER)},e.prototype.removeChatroomEntries=function(e,t){for(var n=0;n<t.entries.length;n++){var i=t.entries[n].key;if(!ht(i))return Promise.resolve({code:Ee.BIZ_ERROR_INVALID_PARAMETER})}return this._engine.removeChatroomEntries(e,t)},e.prototype.forceRemoveChatroomEntry=function(e,t){var n=t.key;return ht(n)?this._engine.forceRemoveChatroomEntry(e,t):Promise.resolve(Ee.BIZ_ERROR_INVALID_PARAMETER)},e.prototype.getChatroomEntry=function(e,t){return this._engine.getChatroomEntry(e,t)},e.prototype.getAllChatroomEntries=function(e){return this._engine.getAllChatroomEntry(e)},e.prototype.getChatroomHistoryMessages=function(e,t,n,i){return void 0===t&&(t=20),void 0===n&&(n=0),void 0===i&&(i=0),this._engine.getChatroomHistoryMessages(e,i,t,n)},e.prototype.getFileToken=function(e,t,n,i){return M(this,void 0,void 0,(function(){var r,s,o,a,u,c,h;return w(this,(function(l){switch(l.label){case 0:return r=this.getInfoFromCache(),s=(null==r?void 0:r.bosAddr)||\\\"\\\",o=(null==r?void 0:r.uploadServer)||\\\"\\\",a=(null==r?void 0:r.ossConfig)||\\\"\\\",[4,this._engine.getFileToken(e,t,n,i)];case 1:return u=l.sent(),c=u.code,h=u.data,c===Ee.SUCCESS?[2,Promise.resolve(Object.assign(h,{bos:s,qiniu:o,ossConfig:a}))]:[2,Promise.reject(c)]}}))}))},e.prototype.getFileUrl=function(e,t,n,i,r){return void 0===r&&(r=Ue.QINIU),M(this,void 0,void 0,(function(){var s,o,a;return w(this,(function(u){switch(u.label){case 0:return(null==i?void 0:i.isBosRes)?[2,Promise.resolve(i)]:[4,this._engine.getFileUrl(e,r,t,n)];case 1:return s=u.sent(),o=s.code,a=s.data,o===Ee.SUCCESS?[2,Promise.resolve(a)]:[2,Promise.reject(o)]}}))}))},e.prototype.createTag=function(e){return M(this,void 0,void 0,(function(){return w(this,(function(t){return[2,this._engine.createTag(e)]}))}))},e.prototype.removeTag=function(e){return M(this,void 0,void 0,(function(){return w(this,(function(t){return[2,this._engine.removeTag(e)]}))}))},e.prototype.updateTag=function(e){return M(this,void 0,void 0,(function(){return w(this,(function(t){return[2,this._engine.updateTag(e)]}))}))},e.prototype.getTagList=function(){return M(this,void 0,void 0,(function(){return w(this,(function(e){return[2,this._engine.getTagList()]}))}))},e.prototype.addTagForConversations=function(e,t){return M(this,void 0,void 0,(function(){return w(this,(function(n){return t.length>1e3?[2,Promise.reject(Ee.CONVER_OUT_LIMIT_ERROR)]:[2,this._engine.addTagForConversations(e,t)]}))}))},e.prototype.removeTagForConversations=function(e,t){return M(this,void 0,void 0,(function(){return w(this,(function(n){return[2,this._engine.removeTagForConversations(e,t)]}))}))},e.prototype.removeTagsForConversation=function(e,t){return M(this,void 0,void 0,(function(){return w(this,(function(n){return[2,this._engine.removeTagsForConversation(e,t)]}))}))},e.prototype.getConversationListByTag=function(e,t,n,i){return M(this,void 0,void 0,(function(){return w(this,(function(r){return[2,this._engine.getConversationListByTag(e,t,n,i)]}))}))},e.prototype.getUnreadCountByTag=function(e,t){return M(this,void 0,void 0,(function(){return w(this,(function(n){return[2,this._engine.getUnreadCountByTag(e,t)]}))}))},e.prototype.setConversationStatusInTag=function(e,t,n){return M(this,void 0,void 0,(function(){return w(this,(function(i){return[2,this._engine.setConversationStatusInTag(e,t,n)]}))}))},e.prototype.getTagsForConversation=function(e){return M(this,void 0,void 0,(function(){return w(this,(function(t){return[2,this._engine.getTagsForConversation(e)]}))}))},e.prototype.getBlockConversationList=function(){return this._engine.getBlockConversationList()},e.prototype.getTopConversationList=function(){return this._engine.getTopConversationList()},e.prototype.getUnreadMentionedCount=function(e){return this._engine.getUnreadMentionedCount(e)},e.prototype.getAllUnreadMentionedCount=function(){return this._engine.getAllUnreadMentionedCount()},e.prototype.sendUltraGroupTypingStatus=function(e){if(e.conversationType!==j.ULTRA_GROUP){var t=Ee.METHOD_ONLY_SUPPORT_ULTRA_GROUP;return Promise.resolve({code:t,msg:Ee[t]})}return this._engine.sendUltraGroupTypingStatus(e)},e.prototype.getUltraGroupMessageListByMessageUId=function(e){return this._engine.getUltraGroupMessageListByMessageUId(e)},e.prototype.expandUltraMessage=function(e){return M(this,void 0,void 0,(function(){var t,n,i,r,s,o,a,u,c,h;return w(this,(function(l){switch(l.label){case 0:if(e.channelId,t=e.conversationType,e.targetId,e.messageUId,e.keys,n=e.expansion,e.removeAll,i=e.canIncludeExpansion,t!==j.ULTRA_GROUP)return[2,{code:r=Ee.METHOD_ONLY_SUPPORT_ULTRA_GROUP,msg:Ee[r]}];if(!i)return[2,{code:Ee.MESSAGE_KV_NOT_SUPPORT}];if(s=!1,o=he(n),a=!1,ne(n))for(c in u=Object.keys(n).length,s=u>20,n)if(h=n[c],a=c.length>32||h.length>64)break;return s||a?[2,{code:Ee.EXPANSION_LIMIT_EXCEET}]:o?[2,{code:Ee.BIZ_ERROR_INVALID_PARAMETER}]:[4,this._engine.expandUltraMessage(e)];case 1:return[2,{code:l.sent().code}]}}))}))},e.prototype.modifyMessage=function(e){return M(this,void 0,void 0,(function(){var t;return w(this,(function(n){switch(n.label){case 0:return e.conversationType!==j.ULTRA_GROUP?[2,{code:t=Ee.METHOD_ONLY_SUPPORT_ULTRA_GROUP,msg:Ee[t]}]:[4,this._engine.modifyMessage(e)];case 1:return[2,{code:n.sent().code}]}}))}))},e.prototype.getUltraGroupUnreadMentionedCountByTargetId=function(e){return this._engine.getUltraGroupUnreadMentionedCountByTargetId(e)},e.prototype.getAllConversationState=function(){return this._engine.getAllConversationState()},e.prototype.callExtra=function(e){for(var t,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return(t=this._engine).callExtra.apply(t,A([e],n))},e.prototype.clearConversations=function(e,t){return M(this,void 0,void 0,(function(){return w(this,(function(n){switch(n.label){case 0:return[4,this._engine.clearConversations(e,t)];case 1:return[2,n.sent()]}}))}))},e.prototype.setUserStatusListener=function(e,t){return this._engine.setUserStatusListener(e,(function(e){try{t(e)}catch(e){ge.error(e)}}))},e.prototype.addToBlacklist=function(e){return M(this,void 0,void 0,(function(){return w(this,(function(t){return[2,this._engine.addToBlacklist(e)]}))}))},e.prototype.removeFromBlacklist=function(e){return M(this,void 0,void 0,(function(){return w(this,(function(t){return[2,this._engine.removeFromBlacklist(e)]}))}))},e.prototype.getBlacklist=function(){return M(this,void 0,void 0,(function(){return w(this,(function(e){return[2,this._engine.getBlacklist()]}))}))},e.prototype.getBlacklistStatus=function(e){return M(this,void 0,void 0,(function(){return w(this,(function(t){return[2,this._engine.getBlacklistStatus(e)]}))}))},e.prototype.insertMessage=function(e,t,n){return M(this,void 0,void 0,(function(){return w(this,(function(i){return[2,this._engine.insertMessage(e,t,n)]}))}))},e.prototype.deleteMessages=function(e){return M(this,void 0,void 0,(function(){return w(this,(function(t){return[2,this._engine.deleteMessages(e)]}))}))},e.prototype.deleteMessagesByTimestamp=function(e,t,n,i,r){return void 0===r&&(r=\\\"\\\"),M(this,void 0,void 0,(function(){return w(this,(function(s){return[2,this._engine.deleteMessagesByTimestamp(e,t,n,i,r)]}))}))},e.prototype.clearMessages=function(e,t,n){return void 0===n&&(n=\\\"\\\"),M(this,void 0,void 0,(function(){return w(this,(function(i){return[2,this._engine.clearMessages(e,t,n)]}))}))},e.prototype.getMessage=function(e){return M(this,void 0,void 0,(function(){return w(this,(function(t){return[2,this._engine.getMessage(e)]}))}))},e.prototype.setMessageContent=function(e,t,n){return M(this,void 0,void 0,(function(){return w(this,(function(i){return[2,this._engine.setMessageContent(e,t,n)]}))}))},e.prototype.setMessageSearchField=function(e,t,n){return M(this,void 0,void 0,(function(){return w(this,(function(i){return[2,this._engine.setMessageSearchField(e,t,n)]}))}))},e.prototype.setMessageSentStatus=function(e,t){return M(this,void 0,void 0,(function(){return w(this,(function(n){return[2,this._engine.setMessageSentStatus(e,t)]}))}))},e.prototype.setMessageReceivedStatus=function(e,t){return M(this,void 0,void 0,(function(){return w(this,(function(n){return[2,this._engine.setMessageReceivedStatus(e,t)]}))}))},e.prototype.setUserStatus=function(e){return M(this,void 0,void 0,(function(){return w(this,(function(t){return[2,this._engine.setUserStatus(e)]}))}))},e.prototype.subscribeUserStatus=function(e){return M(this,void 0,void 0,(function(){return w(this,(function(t){return[2,this._engine.subscribeUserStatus(e)]}))}))},e.prototype.getUserStatus=function(e){return M(this,void 0,void 0,(function(){return w(this,(function(t){return[2,this._engine.getUserStatus(e)]}))}))},e.prototype.searchConversationByContent=function(e,t,n,i){return void 0===t&&(t=[]),void 0===n&&(n=\\\"\\\"),M(this,void 0,void 0,(function(){return w(this,(function(r){return[2,this._engine.searchConversationByContent(e,t,n,i)]}))}))},e.prototype.searchMessageByContent=function(e,t,n,i,r,s,o){return void 0===o&&(o=\\\"\\\"),M(this,void 0,void 0,(function(){return w(this,(function(a){return[2,this._engine.searchMessageByContent(e,t,n,i,r,s,o)]}))}))},e.prototype.getUnreadMentionedMessages=function(e,t,n){return void 0===n&&(n=\\\"\\\"),this._engine.getUnreadMentionedMessages(e,t,n)},e.prototype.clearUnreadCountByTimestamp=function(e,t,n,i){return void 0===i&&(i=\\\"\\\"),this._engine.clearUnreadCountByTimestamp(e,t,n,i)},e.prototype.getConversationNotificationStatus=function(e,t,n){return void 0===n&&(n=\\\"\\\"),this._engine.getConversationNotificationStatus(e,t,n)},e.prototype.getRemoteHistoryMessages=function(e,t,n,i,r,s){return this._engine.getRemoteHistoryMessages(e,t,n,i,r,s)},e.prototype.getConversationListWithAllChannel=function(){return this._engine.getConversationListWithAllChannel()},e.prototype.getConversationListWithAllChannelByPage=function(e,t){return this._engine.getConversationListWithAllChannelByPage(e,t)},e.prototype.joinRTCRoom=function(e,t,n,i,r,s){return this._engine.joinRTCRoom(e,t,n,i,r,s)},e.prototype.quitRTCRoom=function(e){return this._engine.quitRTCRoom(e)},e.prototype.rtcPing=function(e,t,n){return this._engine.rtcPing(e,t,n)},e.prototype.getRTCRoomInfo=function(e){return this._engine.getRTCRoomInfo(e)},e.prototype.getRTCUserInfoList=function(e){return this._engine.getRTCUserInfoList(e)},e.prototype.getRTCUserInfo=function(e){return this._engine.getRTCUserInfo(e)},e.prototype.setRTCUserInfo=function(e,t,n){return this._engine.setRTCUserInfo(e,t,n)},e.prototype.removeRTCUserInfo=function(e,t){return this._engine.removeRTCUserInfo(e,t)},e.prototype.setRTCData=function(e,t,n,i,r,s){return this._engine.setRTCData(e,t,n,i,r,s)},e.prototype.setRTCTotalRes=function(e,t,n,i,r){return void 0===r&&(r=\\\"\\\"),this._engine.setRTCTotalRes(e,t,n,i,r)},e.prototype.setRTCCDNUris=function(e,t,n){return this._engine.setRTCCDNUris(e,t,n)},e.prototype.getRTCData=function(e,t,n,i){return this._engine.getRTCData(e,t,n,i)},e.prototype.removeRTCData=function(e,t,n,i,r){return this._engine.removeRTCData(e,t,n,i,r)},e.prototype.setRTCOutData=function(e,t,n,i){return this._engine.setRTCOutData(e,t,n,i)},e.prototype.getRTCOutData=function(e,t){return this._engine.getRTCOutData(e,t)},e.prototype.getRTCToken=function(e,t,n){return this._engine.getRTCToken(e,t,n)},e.prototype.setRTCState=function(e,t){return this._engine.setRTCState(e,t)},e.prototype.getRTCUserList=function(e){return this._engine.getRTCUserList(e)},e.prototype.joinLivingRoomAsAudience=function(e,t,n){return this._engine.joinLivingRoomAsAudience(e,t,n)},e.prototype.quitLivingRoomAsAudience=function(e){return this._engine.quitLivingRoomAsAudience(e)},e.prototype.rtcIdentityChange=function(e,t,n){return this._engine.rtcIdentityChange(e,t,n)},e.prototype.getRTCJoinedUserInfo=function(e){return this._engine.getRTCJoinedUserInfo(e)},e.prototype.requestRoomPK=function(e){return this._engine.requestRoomPK(e)},e.prototype.cancelRoomPK=function(e){return this._engine.cancelRoomPK(e)},e.prototype.responseRoomPK=function(e){return this._engine.responseRoomPK(e)},e.prototype.endRoomPK=function(e){return this._engine.endRoomPK(e)},e.prototype.bindRTCRoomForChatroom=function(e){return this._engine.bindRTCRoomForChatroom(e)},e}();!function(e){e[e.add=1]=\\\"add\\\",e[e.update=2]=\\\"update\\\",e[e.delete=3]=\\\"delete\\\"}(Ss||(Ss={}));var Os=\\\"5.2.1\\\";\\n\\n\\n//# sourceURL=webpack://@rongcloud/rcliveroomlib/./node_modules/@rongcloud/engine/dist/index.esm.js?\");\n\n/***/ }),\n\n/***/ \"./node_modules/@rongcloud/imlib-next/dist/index.esm.js\":\n/*!**************************************************************!*\\\n  !*** ./node_modules/@rongcloud/imlib-next/dist/index.esm.js ***!\n  \\**************************************************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\neval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   \\\"ConnectionStatus\\\": () => (/* reexport safe */ _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ConnectionStatus),\\n/* harmony export */   \\\"ConversationType\\\": () => (/* reexport safe */ _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ConversationType),\\n/* harmony export */   \\\"ErrorCode\\\": () => (/* reexport safe */ _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode),\\n/* harmony export */   \\\"LogLevel\\\": () => (/* reexport safe */ _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.LogLevel),\\n/* harmony export */   \\\"MentionedType\\\": () => (/* reexport safe */ _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.MentionedType),\\n/* harmony export */   \\\"MessageBlockType\\\": () => (/* reexport safe */ _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.MessageBlockType),\\n/* harmony export */   \\\"MessageDirection\\\": () => (/* reexport safe */ _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.MessageDirection),\\n/* harmony export */   \\\"NotificationStatus\\\": () => (/* reexport safe */ _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.NotificationStatus),\\n/* harmony export */   \\\"ReceivedStatus\\\": () => (/* reexport safe */ _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ReceivedStatus),\\n/* harmony export */   \\\"UploadMethod\\\": () => (/* reexport safe */ _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.UploadMethod),\\n/* harmony export */   \\\"BaseMessage\\\": () => (/* binding */ ut),\\n/* harmony export */   \\\"CombineMessage\\\": () => (/* binding */ It),\\n/* harmony export */   \\\"ConnectType\\\": () => (/* binding */ Vn),\\n/* harmony export */   \\\"Events\\\": () => (/* binding */ w),\\n/* harmony export */   \\\"FileMessage\\\": () => (/* binding */ St),\\n/* harmony export */   \\\"GIFMessage\\\": () => (/* binding */ Ct),\\n/* harmony export */   \\\"HQVoiceMessage\\\": () => (/* binding */ pt),\\n/* harmony export */   \\\"ImageMessage\\\": () => (/* binding */ mt),\\n/* harmony export */   \\\"LocationMessage\\\": () => (/* binding */ Et),\\n/* harmony export */   \\\"MessageType\\\": () => (/* binding */ zn),\\n/* harmony export */   \\\"ReferenceMessage\\\": () => (/* binding */ yt),\\n/* harmony export */   \\\"RichContentMessage\\\": () => (/* binding */ Rt),\\n/* harmony export */   \\\"SightMessage\\\": () => (/* binding */ ht),\\n/* harmony export */   \\\"TextMessage\\\": () => (/* binding */ vt),\\n/* harmony export */   \\\"VoiceMessage\\\": () => (/* binding */ Tt),\\n/* harmony export */   \\\"__addSDKVersion\\\": () => (/* binding */ Ce),\\n/* harmony export */   \\\"addConversationsToTag\\\": () => (/* binding */ Gn),\\n/* harmony export */   \\\"addEventListener\\\": () => (/* binding */ pe),\\n/* harmony export */   \\\"addTag\\\": () => (/* binding */ An),\\n/* harmony export */   \\\"bindRTCRoomForChatroom\\\": () => (/* binding */ dt),\\n/* harmony export */   \\\"clearAllMessagesUnreadStatus\\\": () => (/* binding */ _e),\\n/* harmony export */   \\\"clearEventListeners\\\": () => (/* binding */ Se),\\n/* harmony export */   \\\"clearHistoryMessages\\\": () => (/* binding */ pn),\\n/* harmony export */   \\\"clearMessages\\\": () => (/* binding */ On),\\n/* harmony export */   \\\"clearMessagesUnreadStatus\\\": () => (/* binding */ Me),\\n/* harmony export */   \\\"clearTextMessageDraft\\\": () => (/* binding */ Ne),\\n/* harmony export */   \\\"clearUnreadCountByTimestamp\\\": () => (/* binding */ _n),\\n/* harmony export */   \\\"connect\\\": () => (/* binding */ ue),\\n/* harmony export */   \\\"deleteLocalMessagesByTimestamp\\\": () => (/* binding */ Un),\\n/* harmony export */   \\\"deleteMessages\\\": () => (/* binding */ mn),\\n/* harmony export */   \\\"disconnect\\\": () => (/* binding */ le),\\n/* harmony export */   \\\"forceRemoveChatRoomEntry\\\": () => (/* binding */ rt),\\n/* harmony export */   \\\"forceSetChatRoomEntry\\\": () => (/* binding */ nt),\\n/* harmony export */   \\\"getAllChatRoomEntries\\\": () => (/* binding */ it),\\n/* harmony export */   \\\"getAllConversationState\\\": () => (/* binding */ De),\\n/* harmony export */   \\\"getAllUnreadMentionedCount\\\": () => (/* binding */ Ge),\\n/* harmony export */   \\\"getBlockUltraGroupList\\\": () => (/* binding */ He),\\n/* harmony export */   \\\"getBlockedConversationList\\\": () => (/* binding */ xe),\\n/* harmony export */   \\\"getChatRoomEntry\\\": () => (/* binding */ st),\\n/* harmony export */   \\\"getChatRoomInfo\\\": () => (/* binding */ $e),\\n/* harmony export */   \\\"getChatroomHistoryMessages\\\": () => (/* binding */ ct),\\n/* harmony export */   \\\"getConnectionStatus\\\": () => (/* binding */ ge),\\n/* harmony export */   \\\"getConversationList\\\": () => (/* binding */ Te),\\n/* harmony export */   \\\"getConversationNotificationStatus\\\": () => (/* binding */ Ae),\\n/* harmony export */   \\\"getConversationsFromTagByPage\\\": () => (/* binding */ Bn),\\n/* harmony export */   \\\"getCurrentUserId\\\": () => (/* binding */ me),\\n/* harmony export */   \\\"getFileToken\\\": () => (/* binding */ Yt),\\n/* harmony export */   \\\"getFileUrl\\\": () => (/* binding */ Qt),\\n/* harmony export */   \\\"getFirstUnreadMessage\\\": () => (/* binding */ Tn),\\n/* harmony export */   \\\"getHistoryMessages\\\": () => (/* binding */ rn),\\n/* harmony export */   \\\"getMessage\\\": () => (/* binding */ yn),\\n/* harmony export */   \\\"getMessageReader\\\": () => (/* binding */ Sn),\\n/* harmony export */   \\\"getRemoteHistoryMessages\\\": () => (/* binding */ sn),\\n/* harmony export */   \\\"getServerTime\\\": () => (/* binding */ fe),\\n/* harmony export */   \\\"getTags\\\": () => (/* binding */ Pn),\\n/* harmony export */   \\\"getTagsFromConversation\\\": () => (/* binding */ Ln),\\n/* harmony export */   \\\"getTextMessageDraft\\\": () => (/* binding */ ye),\\n/* harmony export */   \\\"getTopConversationList\\\": () => (/* binding */ Pe),\\n/* harmony export */   \\\"getTotalUnreadCount\\\": () => (/* binding */ Ue),\\n/* harmony export */   \\\"getUltraGroupList\\\": () => (/* binding */ ke),\\n/* harmony export */   \\\"getUltraGroupMessageListByMessageUId\\\": () => (/* binding */ Fe),\\n/* harmony export */   \\\"getUltraGroupUnreadMentionedCountByTargetId\\\": () => (/* binding */ Xe),\\n/* harmony export */   \\\"getUnreadCount\\\": () => (/* binding */ Oe),\\n/* harmony export */   \\\"getUnreadCountByTag\\\": () => (/* binding */ Fn),\\n/* harmony export */   \\\"getUnreadMentionedCount\\\": () => (/* binding */ Le),\\n/* harmony export */   \\\"getUnreadMentionedMessages\\\": () => (/* binding */ Rn),\\n/* harmony export */   \\\"init\\\": () => (/* binding */ ce),\\n/* harmony export */   \\\"insertMessage\\\": () => (/* binding */ En),\\n/* harmony export */   \\\"installPlugin\\\": () => (/* binding */ de),\\n/* harmony export */   \\\"joinChatRoom\\\": () => (/* binding */ We),\\n/* harmony export */   \\\"joinExistChatRoom\\\": () => (/* binding */ Ye),\\n/* harmony export */   \\\"modifyMessage\\\": () => (/* binding */ Ke),\\n/* harmony export */   \\\"onceEventListener\\\": () => (/* binding */ he),\\n/* harmony export */   \\\"quitChatRoom\\\": () => (/* binding */ Qe),\\n/* harmony export */   \\\"recallMessage\\\": () => (/* binding */ fn),\\n/* harmony export */   \\\"registerMessageType\\\": () => (/* binding */ Cn),\\n/* harmony export */   \\\"removeAllExpansionForUltraGroupMessage\\\": () => (/* binding */ ze),\\n/* harmony export */   \\\"removeChatRoomEntries\\\": () => (/* binding */ at),\\n/* harmony export */   \\\"removeChatRoomEntry\\\": () => (/* binding */ ot),\\n/* harmony export */   \\\"removeConversation\\\": () => (/* binding */ Ee),\\n/* harmony export */   \\\"removeConversationsFromTag\\\": () => (/* binding */ Dn),\\n/* harmony export */   \\\"removeEventListener\\\": () => (/* binding */ ve),\\n/* harmony export */   \\\"removeEventListeners\\\": () => (/* binding */ Ie),\\n/* harmony export */   \\\"removeExpansionForUltraGroupMessage\\\": () => (/* binding */ Ve),\\n/* harmony export */   \\\"removeMessageExpansionForKey\\\": () => (/* binding */ vn),\\n/* harmony export */   \\\"removeTag\\\": () => (/* binding */ xn),\\n/* harmony export */   \\\"removeTagFromConversations\\\": () => (/* binding */ Hn),\\n/* harmony export */   \\\"removeTagsFromConversation\\\": () => (/* binding */ kn),\\n/* harmony export */   \\\"saveTextMessageDraft\\\": () => (/* binding */ Re),\\n/* harmony export */   \\\"searchConversationByContent\\\": () => (/* binding */ Mn),\\n/* harmony export */   \\\"searchMessages\\\": () => (/* binding */ Nn),\\n/* harmony export */   \\\"sendFileMessage\\\": () => (/* binding */ tn),\\n/* harmony export */   \\\"sendHQVoiceMessage\\\": () => (/* binding */ on),\\n/* harmony export */   \\\"sendImageMessage\\\": () => (/* binding */ nn),\\n/* harmony export */   \\\"sendMessage\\\": () => (/* binding */ $t),\\n/* harmony export */   \\\"sendReadReceiptMessage\\\": () => (/* binding */ cn),\\n/* harmony export */   \\\"sendReadReceiptRequest\\\": () => (/* binding */ dn),\\n/* harmony export */   \\\"sendReadReceiptResponse\\\": () => (/* binding */ un),\\n/* harmony export */   \\\"sendReadReceiptResponseV2\\\": () => (/* binding */ ln),\\n/* harmony export */   \\\"sendSightMessage\\\": () => (/* binding */ an),\\n/* harmony export */   \\\"sendSyncReadStatusMessage\\\": () => (/* binding */ gn),\\n/* harmony export */   \\\"sendTextMessage\\\": () => (/* binding */ Zt),\\n/* harmony export */   \\\"sendTypingStatusMessage\\\": () => (/* binding */ In),\\n/* harmony export */   \\\"sendUltraGroupTypingStatus\\\": () => (/* binding */ Be),\\n/* harmony export */   \\\"setChatRoomEntries\\\": () => (/* binding */ et),\\n/* harmony export */   \\\"setChatRoomEntry\\\": () => (/* binding */ Ze),\\n/* harmony export */   \\\"setConversationNotificationStatus\\\": () => (/* binding */ we),\\n/* harmony export */   \\\"setConversationToTop\\\": () => (/* binding */ be),\\n/* harmony export */   \\\"setConversationToTopInTag\\\": () => (/* binding */ qn),\\n/* harmony export */   \\\"setMessageReceivedStatus\\\": () => (/* binding */ wn),\\n/* harmony export */   \\\"updateExpansionForUltraGroupMessage\\\": () => (/* binding */ qe),\\n/* harmony export */   \\\"updateMessageExpansion\\\": () => (/* binding */ hn),\\n/* harmony export */   \\\"updateTag\\\": () => (/* binding */ bn)\\n/* harmony export */ });\\n/* harmony import */ var _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @rongcloud/engine */ \\\"./node_modules/@rongcloud/imlib-next/node_modules/@rongcloud/engine/dist/index.esm.js\\\");\\n\\n/*! *****************************************************************************\\nCopyright (c) Microsoft Corporation.\\n\\nPermission to use, copy, modify, and/or distribute this software for any\\npurpose with or without fee is hereby granted.\\n\\nTHE SOFTWARE IS PROVIDED \\\"AS IS\\\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\\nPERFORMANCE OF THIS SOFTWARE.\\n***************************************************************************** */var y=function(e,t){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},y(e,t)};var R=function(){return R=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},R.apply(this,arguments)};function N(e,t,n,o){return new(n||(n=Promise))((function(a,r){function s(e){try{c(o.next(e))}catch(e){r(e)}}function i(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,i)}c((o=o.apply(e,t||[])).next())}))}function U(e,t){var n,o,a,r,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:i(0),throw:i(1),return:i(2)},\\\"function\\\"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function i(r){return function(i){return function(r){if(n)throw new TypeError(\\\"Generator is already executing.\\\");for(;s;)try{if(n=1,o&&(a=2&r[0]?o.return:r[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(a=s.trys,(a=a.length>0&&a[a.length-1])||6!==r[0]&&2!==r[0])){s=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){s.label=r[1];break}if(6===r[0]&&s.label<a[1]){s.label=a[1],a=r;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(r);break}a[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(e){r=[6,e],o=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,i])}}}var O=new _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.Logger(\\\"RCIM\\\"),M=function(){return!(\\\"undefined\\\"==typeof uni||!function(e){for(var t=[\\\"canIUse\\\",\\\"getSystemInfo\\\"],n=0,o=t.length;n<o;n++)if(!e[t[n]])return!1;return!0}(uni))},_=M();var w,A={tag:\\\"browser\\\",httpReq:function(e){var t=e.method||_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.HttpMethod.GET,n=e.timeout||6e4,r=e.headers,s=e.query,i=e.body,c=(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.appendUrl)(e.url,s);return new Promise((function(e){var o,a=(o=\\\"undefined\\\"!=typeof XMLHttpRequest&&\\\"withCredentials\\\"in new XMLHttpRequest,\\\"undefined\\\"!=typeof XMLHttpRequest&&o?new XMLHttpRequest:\\\"undefined\\\"!=typeof XDomainRequest?new XDomainRequest:new ActiveXObject(\\\"Microsoft.XMLHTTP\\\")),s=\\\"[object XDomainRequest]\\\"===Object.prototype.toString.call(a);if(a.open(t,c),r&&a.setRequestHeader)for(var d in r)a.setRequestHeader(d,r[d]);if(s){a.timeout=n,a.onload=function(){e({data:a.responseText,status:a.status||200})},a.onerror=function(){e({status:a.status||0})},a.ontimeout=function(){e({status:a.status||0})};var u=\\\"object\\\"==typeof i?JSON.stringify(i):i;a.send(u)}else a.onreadystatechange=function(){4===a.readyState&&e({data:a.responseText,status:a.status})},a.onerror=function(){e({status:a.status||0})},setTimeout((function(){return e({status:a.status||0})}),n),a.send(i)}))},localStorage:null===window||void 0===window?void 0:window.localStorage,sessionStorage:null===window||void 0===window?void 0:window.sessionStorage,isSupportSocket:function(){var e=\\\"undefined\\\"!=typeof WebSocket;return e||O.warn(\\\"websocket not support\\\"),e},useNavi:!0,connectPlatform:\\\"\\\",isFromUniapp:_,createWebSocket:function(e,t){var n=new WebSocket(e,t);return n.binaryType=\\\"arraybuffer\\\",{onClose:function(e){n.onclose=function(t){var n=t.code,o=t.reason;e(n,o)}},onError:function(e){n.onerror=e},onMessage:function(e){n.onmessage=function(t){e(t.data)}},onOpen:function(e){n.onopen=e},send:function(e){n.send(e)},close:function(e,t){n.close(e,t)}}},createDataChannel:function(e,o){return this.isSupportSocket()&&\\\"websocket\\\"===o?new _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.WebSocketChannel(this,e):new _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.CometChannel(this,e)}},x=M(),b=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return wx[e].apply(wx,t)}catch(e){O.error(e)}}},P={setItem:b(\\\"setStorageSync\\\"),getItem:b(\\\"getStorageSync\\\"),removeItem:b(\\\"removeStorageSync\\\"),clear:b(\\\"clearStorageSync\\\")},L={tag:\\\"wechat\\\",httpReq:function(e){var t=e.method||_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.HttpMethod.GET,n=e.timeout||6e4,s=e.headers,i=e.query,c=e.body,d=(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.appendUrl)(e.url,i);return new Promise((function(e){wx.request({url:d,method:t,headers:s,timeout:n,data:c,success:function(t){e({data:t.data,status:t.statusCode})},fail:function(){e({status:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.RC_HTTP_REQ_TIMEOUT})}})}))},localStorage:P,sessionStorage:P,isSupportSocket:function(){return!0},useNavi:!1,connectPlatform:\\\"MiniProgram\\\",isFromUniapp:x,createWebSocket:function(e,t){var n=wx.connectSocket({url:e,protocols:t});return{onClose:function(e){n.onClose((function(t){e(t.code,t.reason)}))},onError:function(e){n.onError((function(t){e(t.errMsg)}))},onMessage:function(e){n.onMessage((function(t){e(t.data)}))},onOpen:function(e){n.onOpen(e)},send:function(e){n.send({data:e})},close:function(e,t){n.close({code:e,reason:t})}}},createDataChannel:function(e,o){return\\\"websocket\\\"===o?new _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.WebSocketChannel(this,e):new _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.CometChannel(this,e)}},G=M(),D=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return my[e].apply(my,t)}catch(e){O.error(e)}}},k={setItem:D(\\\"setStorageSync\\\"),getItem:D(\\\"getStorageSync\\\"),removeItem:D(\\\"removeStorageSync\\\"),clear:D(\\\"clearStorageSync\\\")},H={tag:\\\"alipay\\\",httpReq:function(e){var t=e.method||_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.HttpMethod.GET,n=e.timeout||6e4,s=e.headers,i=e.query,c=e.body,d=(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.appendUrl)(e.url,i),u=e.dataType||\\\"json\\\";return new Promise((function(e){my.request({url:d,method:t,headers:s,timeout:n,data:c,dataType:u,success:function(t){e({data:t.data,status:t.status})},fail:function(){e({status:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.RC_HTTP_REQ_TIMEOUT})}})}))},localStorage:k,sessionStorage:k,isSupportSocket:function(){return!1},useNavi:!1,connectPlatform:\\\"MiniProgram\\\",isFromUniapp:G,createDataChannel:function(e,o){return\\\"websocket\\\"===o?new _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.WebSocketChannel(this,e):new _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.CometChannel(this,e)}},B=M(),F=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return console.log(\\\"tt\\\",tt),tt[e].apply(tt,t)}catch(e){O.error(e)}}},q={setItem:F(\\\"setStorageSync\\\"),getItem:F(\\\"getStorageSync\\\"),removeItem:F(\\\"removeStorageSync\\\"),clear:F(\\\"clearStorageSync\\\")},V={tag:\\\"toutiao\\\",isSupportSocket:function(){return!0},useNavi:!1,connectPlatform:\\\"MiniProgram\\\",isFromUniapp:B,localStorage:q,sessionStorage:q,httpReq:function(e){return new Promise((function(t,n){tt.request({url:e.url,data:e.body,header:e.headers,method:e.method,success:function(e){console.log(\\\"调用成功\\\",e.data);var n=(null==e?void 0:e.data)||{},o={data:JSON.stringify(n),status:e.statusCode};t(o)},fail:function(e){console.log(\\\"调用失败\\\",e.errMsg),n({data:e.errMsg})}})}))},createWebSocket:function(e,t){var n=tt.connectSocket({url:e,protocols:t});return{onOpen:function(e){n.onOpen(e)},onClose:function(e){n.onClose((function(t){return e(t.code,t.reason)}))},onError:function(e){n.onError((function(t){return e(t.errMsg)}))},onMessage:function(e){n.onMessage((function(t){return e(t.data)}))},send:function(e){n.send({data:e})},close:function(e,t){n.close({code:e,reason:t})}}},createDataChannel:function(e,o){return\\\"websocket\\\"===o?new _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.WebSocketChannel(this,e):new _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.CometChannel(this,e)}},z=M(),K=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return console.log(\\\"swan\\\",swan),swan[e].apply(swan,t)}catch(e){O.error(e)}}},X={setItem:K(\\\"setStorageSync\\\"),getItem:K(\\\"getStorageSync\\\"),removeItem:K(\\\"removeStorageSync\\\"),clear:K(\\\"clearStorageSync\\\")},j={tag:\\\"baidu\\\",isSupportSocket:function(){return!0},useNavi:!1,connectPlatform:\\\"MiniProgram\\\",isFromUniapp:z,localStorage:X,sessionStorage:X,httpReq:function(e){return new Promise((function(t,n){swan.request({url:e.url,data:e.body,header:e.headers,method:e.method,success:function(e){console.log(\\\"调用成功\\\",e.data);var n=(null==e?void 0:e.data)||{},o={data:JSON.stringify(n),status:e.statusCode};t(o)},fail:function(e){console.log(\\\"调用失败\\\",e.errorCode),n({data:e.errorCode})}})}))},createWebSocket:function(e,t){var n=swan.connectSocket({url:e,protocols:t});return{onOpen:function(e){n.onOpen(e)},onClose:function(e){n.onClose((function(t){return e(t.code,t.reason)}))},onError:function(e){n.onError((function(t){return e(t.errMsg)}))},onMessage:function(e){n.onMessage((function(t){return e(t.data)}))},send:function(e){n.send({data:e})},close:function(e,t){n.close({code:e,reason:t})}}},createDataChannel:function(e,o){return\\\"websocket\\\"===o?new _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.WebSocketChannel(this,e):new _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.CometChannel(this,e)}},J=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return uni[e].apply(uni,t)}catch(e){O.error(e)}}},W={setItem:J(\\\"setStorageSync\\\"),getItem:J(\\\"getStorageSync\\\"),removeItem:J(\\\"removeStorageSync\\\"),clear:J(\\\"clearStorageSync\\\")},Y={tag:\\\"uniapp\\\",httpReq:function(e){var t=e.method||_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.HttpMethod.GET,n=e.timeout||6e4,s=e.headers,i=e.query,c=e.body,d=(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.appendUrl)(e.url,i);return new Promise((function(e){uni.request({url:d,method:t,headers:s,timeout:n,data:c,success:function(t){e({data:t.data,status:t.statusCode})},fail:function(){e({status:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.RC_HTTP_REQ_TIMEOUT})}})}))},localStorage:W,sessionStorage:W,isSupportSocket:function(){return!0},useNavi:!0,connectPlatform:\\\"\\\",isFromUniapp:!0,createWebSocket:function(e,t){var n={complete:function(){},url:e,protocols:t},o=uni.connectSocket(n);return{onClose:function(e){o.onClose((function(t){e(t.code,t.reason)}))},onError:function(e){o.onError((function(t){e(t.errMsg)}))},onMessage:function(e){o.onMessage((function(t){e(t.data)}))},onOpen:function(e){o.onOpen(e)},send:function(e){o.send({data:e})},close:function(e,t){o.close({code:e,reason:t})}}},createDataChannel:function(e,o){return\\\"websocket\\\"===o?new _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.WebSocketChannel(this,e):new _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.CometChannel(this,e)}},Q=function(e){return e&&e.canIUse&&e.getSystemInfo},$=\\\"undefined\\\"!=typeof uni&&Q(uni)?function(){switch(process.env.VUE_APP_PLATFORM){case\\\"app-plus\\\":return Y;case\\\"mp-baidu\\\":return j;case\\\"mp-toutiao\\\":return V;case\\\"mp-alipay\\\":return H;case\\\"mp-weixin\\\":return L;default:return A}}():\\\"undefined\\\"!=typeof wx&&Q(wx)?L:\\\"undefined\\\"!=typeof my&&Q(my)?H:\\\"undefined\\\"!=typeof tt&&Q(tt)?V:\\\"undefined\\\"!=typeof swan&&Q(swan)?j:A;function Z(e){var t=e.conversationType,n=e.channelId,o=e.messageType,a=e.content,r=e.senderUserId,c=e.targetId,d=e.sentTime,u=e.receivedTime,l=e.messageUId,g=e.messageDirection,f=e.isPersited,m=e.isCounted,p=e.isOffLineMessage,h=e.canIncludeExpansion,v=e.expansion,I=e.receivedStatus,S=e.disableNotification,C=e.isMentioned,T=e.isStatusMessage,E=e.readReceiptInfo,y=e.pushConfig,R=e.messageId,N=e.isInterrupt,U=e.isModifyMessage;I||(I=_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ReceivedStatus.UNREAD);var O={messageType:o,channelId:n||\\\"\\\",content:a,senderUserId:r,targetId:c,conversationType:t,sentTime:d,receivedTime:u,messageUId:l,messageDirection:g,isPersited:f,isCounted:m,isMentioned:C,disableNotification:S,isStatusMessage:T,canIncludeExpansion:h,expansion:v,receivedStatus:I,readReceiptInfo:E,pushConfig:y,messageId:R,isInterrupt:N,isModifyMessage:U};return t!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ConversationType.ULTRA_GROUP&&(O.isOffLineMessage=p),O}!function(e){e.CONNECTING=\\\"CONNECTING\\\",e.CONNECTED=\\\"CONNECTED\\\",e.DISCONNECT=\\\"DISCONNECT\\\",e.SUSPEND=\\\"SUSPEND\\\",e.MESSAGES=\\\"MESSAGES\\\",e.READ_RECEIPT_RECEIVED=\\\"READ_RECEIPT_RECEIVED\\\",e.MESSAGE_RECEIPT_REQUEST=\\\"MESSAGE_RECEIPT_REQUEST\\\",e.MESSAGE_RECEIPT_RESPONSE=\\\"MESSAGE_RECEIPT_RESPONSE\\\",e.CONVERSATION=\\\"CONVERSATION\\\",e.CHATROOM=\\\"CHATROOM\\\",e.EXPANSION=\\\"EXPANSION\\\",e.PULL_OFFLINE_MESSAGE_FINISHED=\\\"PULL_OFFLINE_MESSAGE_FINISHED\\\",e.TAG=\\\"TAG\\\",e.CONVERSATION_TAG=\\\"CONVERSATION_TAG\\\",e.TYPING_STATUS=\\\"TYPING_STATUS\\\",e.MESSAGE_BLOCKED=\\\"MESSAGE_BLOCKED\\\",e.ULTRA_GROUP_ENABLE=\\\"ULTRA_GROUP_ENABLE\\\",e.OPERATE_STATUS=\\\"OPERATE_STATUS\\\",e.ULTRA_GROUP_MESSAGE_EXPANSION_UPDATED=\\\"ULTRA_GROUP_MESSAGE_EXPANSION_UPDATED\\\",e.ULTRA_GROUP_MESSAGE_MODIFIED=\\\"ULTRA_GROUP_MESSAGE_MODIFIED\\\",e.ULTRA_GROUP_MESSAGE_RECALLED=\\\"ULTRA_GROUP_MESSAGE_RECALLED\\\"}(w||(w={}));var ee,te=function(e){function t(n){var o=e.call(this)||this;if(t.imClient)return O.error(\\\"Please do not repeatedly perform the init method\\\"),t.imClient;(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.navigators\\\",n.navigators,(function(e){return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isArray)(e)&&(0===e.length||e.every(_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isHttpUrl))}));var a=null==n?void 0:n.connectType;return a?_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.CONNECTION_TYPE.WEBSOCKET!==a&&_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.CONNECTION_TYPE.COMET!==a&&(O.warn(\\\"RongIMLib connectionType must be \\\"+_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.CONNECTION_TYPE.WEBSOCKET+\\\" or \\\"+_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.CONNECTION_TYPE.COMET),a=_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.CONNECTION_TYPE.WEBSOCKET):a=_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.CONNECTION_TYPE.WEBSOCKET,o._context=_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.APIContext.init($,{appkey:n.appkey,apiVersion:\\\"5.2.1\\\",navigators:n.navigators||[],miniCMPProxy:n.customCMP||[],connectionType:a,logLevel:n.logLevel,logStdout:n.logStdout,indexDBSwitch:n.indexDBSwitch,checkCA:n.checkCA}),o.watch(),t.imClient=o,o}return function(e,t){if(\\\"function\\\"!=typeof t&&null!==t)throw new TypeError(\\\"Class extends value \\\"+String(t)+\\\" is not a constructor or null\\\");function n(){this.constructor=e}y(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),Object.defineProperty(t.prototype,\\\"context\\\",{get:function(){if(!this._context)throw new Error(\\\"Please perform the init method!\\\");return this._context},enumerable:!1,configurable:!0}),t.prototype.watch=function(){var e=this,t={onConnecting:function(){e.emit(w.CONNECTING)},onConnected:function(){e.emit(w.CONNECTED)},onDisconnect:function(t){e.emit(w.DISCONNECT,t)},onSuspend:function(t){e.emit(w.SUSPEND,t)},batchMessage:function(t){e.emit(w.MESSAGES,{messages:t.map((function(e){return Z(e)}))})},typingState:function(t){e.emit(w.TYPING_STATUS,{status:t})},readReceiptReceived:function(t,n,o){e.emit(w.READ_RECEIPT_RECEIVED,{conversation:t,messageUId:n,sentTime:o})},messageReceiptRequest:function(t,n,o){e.emit(w.MESSAGE_RECEIPT_REQUEST,{conversation:t,messageUId:n,senderUserId:o})},messageReceiptResponse:function(t,n,o){e.emit(w.MESSAGE_RECEIPT_RESPONSE,{conversation:t,receivedUserId:n,messageUIdList:o})},conversationState:function(t){var n=t.map((function(e){var t=e.conversationType;return t===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ConversationType.ULTRA_GROUP?{conversation:{conversationType:t,latestMessage:e.latestMessage?Z(e.latestMessage):null,targetId:e.targetId,unreadMessageCount:e.unreadMessageCount,unreadMentionedCount:e.unreadMentionedCount,versionTime:e.versionTime,notificationStatus:e.notificationStatus,lastUnreadTime:e.lastUnreadTime,channelId:e.channelId}}:{conversation:{conversationType:t,latestMessage:e.latestMessage?Z(e.latestMessage):null,targetId:e.targetId,unreadMessageCount:e.unreadMessageCount,hasMentioned:e.hasMentioned,mentionedInfo:e.mentionedInfo,lastUnreadTime:e.lastUnreadTime,notificationStatus:e.notificationStatus,isTop:e.isTop,channelId:e.channelId,unreadMentionedCount:e.unreadMentionedCount},updatedItems:e.updatedItems}}));e.emit(w.CONVERSATION,{conversationList:n})},chatroomState:function(t){e.emit(w.CHATROOM,t)},expansion:function(t){e.emit(w.EXPANSION,t)},pullFinished:function(){e.emit(w.PULL_OFFLINE_MESSAGE_FINISHED)},tag:function(){e.emit(w.TAG)},conversationTagChanged:function(){e.emit(w.CONVERSATION_TAG)},messageBlocked:function(t){e.emit(w.MESSAGE_BLOCKED,t)},ultraGroupEnable:function(t){e.emit(w.ULTRA_GROUP_ENABLE,t)},operateStatus:function(t){e.emit(w.OPERATE_STATUS,t)},ultraGroupMessageExpansionUpdated:function(t){e.emit(w.ULTRA_GROUP_MESSAGE_EXPANSION_UPDATED,t)},ultraGroupMessageModified:function(t){e.emit(w.ULTRA_GROUP_MESSAGE_MODIFIED,t)},ultraGroupMessageRecalled:function(t){e.emit(w.ULTRA_GROUP_MESSAGE_RECALLED,t)}};this.context.assignWatcher(t)},t}(_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.EventEmitter),ne={TIMEOUT:{code:-1,msg:\\\"Network timeout\\\"},SDK_INTERNAL_ERROR:{code:-2,msg:\\\"SDK internal error\\\"},PARAMETER_ERROR:{code:-3,msg:\\\"Please check the parameters, the {param} expected a value of {expect} but received {current}\\\"},REJECTED_BY_BLACKLIST:{code:405,msg:\\\"Blacklisted by the other party\\\"},SEND_TOO_FAST:{code:20604,msg:\\\"Sending messages too quickly\\\"},NOT_IN_GROUP:{code:22406,msg:\\\"Not in group\\\"},FORBIDDEN_IN_GROUP:{code:22408,msg:\\\"Forbbiden from speaking in the group\\\"},NOT_IN_CHATROOM:{code:23406,msg:\\\"Not in chatRoom\\\"},FORBIDDEN_IN_CHATROOM:{code:23408,msg:\\\"Forbbiden from speaking in the chatRoom\\\"},KICKED_FROM_CHATROOM:{code:23409,msg:\\\"Kicked out and forbbiden from joining the chatRoom\\\"},CHATROOM_NOT_EXIST:{code:23410,msg:\\\"ChatRoom does not exist\\\"},CHATROOM_IS_FULL:{code:23411,msg:\\\"ChatRoom members exceeded\\\"},PARAMETER_INVALID_CHATROOM:{code:23412,msg:\\\"Invalid chatRoom parameters\\\"},ROAMING_SERVICE_UNAVAILABLE_CHATROOM:{code:23414,msg:\\\"ChatRoom message roaming service is not open, Please go to the developer to open this service\\\"},RECALLMESSAGE_PARAMETER_INVALID:{code:25101,msg:\\\"Invalid recall message parameter\\\"},ROAMING_SERVICE_UNAVAILABLE_MESSAGE:{code:25102,msg:\\\"Single group chat roaming service is not open, Please go to the developer to open this service\\\"},PUSHSETTING_PARAMETER_INVALID:{code:26001,msg:\\\"Invalid push parameter\\\"},OPERATION_BLOCKED:{code:20605,msg:\\\"Operation is blocked\\\"},OPERATION_NOT_SUPPORT:{code:20606,msg:\\\"Operation is not supported\\\"},MSG_BLOCKED_SENSITIVE_WORD:{code:21501,msg:\\\"The sent message contains sensitive words\\\"},REPLACED_SENSITIVE_WORD:{code:21502,msg:\\\"Sensitive words in the message have been replaced\\\"},NOT_CONNECTED:{code:30001,msg:\\\"Please connect successfully first\\\"},NAVI_REQUEST_ERROR:{code:30007,msg:\\\"Navigation http request failed\\\"},CMP_REQUEST_ERROR:{code:30010,msg:\\\"CMP sniff http request failed\\\"},CONN_APPKEY_FAKE:{code:31002,msg:\\\"Your appkey is fake\\\"},CONN_MINI_SERVICE_NOT_OPEN:{code:31003,msg:\\\"Mini program service is not open, Please go to the developer to open this service\\\"},CONN_ACK_TIMEOUT:{code:31e3,msg:\\\"Connection ACK timeout\\\"},CONN_TOKEN_INCORRECT:{code:31004,msg:\\\"Your token is not valid or expired\\\"},CONN_NOT_AUTHRORIZED:{code:31005,msg:\\\"AppKey and Token do not match\\\"},CONN_REDIRECTED:{code:31006,msg:\\\"Connection redirection\\\"},CONN_APP_BLOCKED_OR_DELETED:{code:31008,msg:\\\"AppKey is banned or deleted\\\"},CONN_USER_BLOCKED:{code:31009,msg:\\\"User blocked\\\"},CONN_DOMAIN_INCORRECT:{code:31012,msg:\\\"Connect domain error, Please check the set security domain\\\"},ROAMING_SERVICE_UNAVAILABLE:{code:33007,msg:\\\"Roaming service cloud is not open, Please go to the developer to open this service\\\"},RC_CONNECTION_EXIST:{code:34001,msg:\\\"Connection already exists\\\"},CHATROOM_KV_EXCEED:{code:23423,msg:\\\"ChatRoom KV setting exceeds maximum\\\"},CHATROOM_KV_OVERWRITE_INVALID:{code:23424,msg:\\\"ChatRoom KV already exists\\\"},CHATROOM_KV_STORE_NOT_OPEN:{code:23426,msg:\\\"ChatRoom KV storage service is not open, Please go to the developer to open this service\\\"},CHATROOM_KEY_NOT_EXIST:{code:23427,msg:\\\"ChatRoom key does not exist\\\"},MSG_KV_NOT_SUPPORT:{code:34008,msg:\\\"The message cannot be extended\\\"},SEND_MESSAGE_KV_FAIL:{code:34009,msg:\\\"Sending RC expansion message fail\\\"},EXPANSION_LIMIT_EXCEET:{code:34010,msg:\\\"The message expansion size is beyond the limit\\\"},ILLGAL_PARAMS:{code:33003,msg:\\\"Incorrect parameters passed in while calling the interface\\\"},UPLOAD_FILE_FAILED:{code:35020,msg:\\\"File upload failed\\\"},CHATROOM_KV_STORE_NOT_ALL_SUCCESS:{code:23428,msg:\\\"Chatroom kv store not all success\\\"},CHATROOM_KV_STORE_OUT_LIMIT:{code:23429,msg:\\\"Chatroom kv's length is out of limit\\\"},TAG_EXISTS:{code:33101,msg:\\\"The tag already exists\\\"},TAG_NOT_EXIST:{code:33100,msg:\\\"The tag does not exist\\\"},NOT_SUPPORT:{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT,msg:\\\"The method is not supported in a browser!\\\"}},oe={},ae={};for(var re in ne){var se=ne[re],ie=se.code;oe[ie]=re,ae[ie]=se}ne.ROAMING_SERVICE_UNAVAILABLE.code;var ce=function(e){ee=ee||new te(e)};function de(e,t){return null==ee?void 0:ee.context.install(e,t)}function ue(e,t){return N(this,void 0,void 0,(function(){var n;return U(this,(function(o){switch(o.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"token\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),O.warn(\\\"RongIMLib Version: 5.2.1, Commit: 5f3d7b5af1e6e31d4545ef0973b990837060617b\\\"),[4,ee.context.connect(e,!1,t)];case 1:return(n=o.sent()).code===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:n.code,data:{userId:n.userId}}]:[2,{code:n.code,msg:oe[n.code]}]}}))}))}function le(){return ee.context.disconnect()}function ge(){return ee.context.getConnectionStatus()}function fe(){return ee.context.getServerTime()}function me(){return ee.context.getCurrentUserId()}function pe(e,t,n){ee.on(e,t,n)}function he(e,t,n){ee.once(e,t,n)}function ve(e,t,n){ee.off(e,t,n)}function Ie(e){ee.removeAll(e)}function Se(){ee.clear()}function Ce(e,t){_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.VersionManage.add(e,t)}function Te(e,t){return N(this,void 0,void 0,(function(){var n,o,a,s;return U(this,(function(i){switch(i.label){case 0:return O.debug(\\\"get conversation list ->\\\"),[4,te.imClient.context.getConversationList(null==e?void 0:e.count,void 0,null==e?void 0:e.startTime,null==e?void 0:e.order,t)];case 1:return n=i.sent(),o=n.code,a=n.data,o===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS&&a?(s=a.map((function(e){return function(e){var t=e.conversationType,n=e.targetId,o=e.latestMessage,a=e.unreadMessageCount,r=e.hasMentioned,s=e.mentionedInfo,i=e.lastUnreadTime,c=e.notificationStatus,d=e.isTop,u=e.channelId,l=e.unreadMentionedCount;return{conversationType:t,targetId:n,latestMessage:o&&Z(o),unreadMessageCount:a,hasMentioned:r,mentionedInfo:r?{type:null==s?void 0:s.type,userIdList:null==s?void 0:s.userIdList}:void 0,lastUnreadTime:i,notificationStatus:c,isTop:d,channelId:u,unreadMentionedCount:l}}(e)})),[2,{code:0,data:s}]):(O.warn(\\\"get conversation list fail ->\\\"+o+\\\":\\\"+oe[o]),[2,{code:o,msg:oe[o]}])}}))}))}function Ee(e){return N(this,void 0,void 0,(function(){var t,n;return U(this,(function(o){switch(o.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.conversationType\\\",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isValidConversationType,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.targetId\\\",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.channelId\\\",e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),[4,te.imClient.context.removeConversation(e.conversationType,e.targetId,e.channelId)];case 1:return t=o.sent(),n=\\\"conversationType:\\\"+e.conversationType+\\\",targetId:\\\"+e.targetId,O.debug(\\\"destroy conversation ->\\\"+n),t!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(O.warn(\\\"destroy conversation fail ->\\\"+t+\\\":\\\"+oe[t]+\\\",\\\"+n),[2,{code:t,msg:oe[t]}]):[2,{code:t}]}}))}))}function ye(e){return N(this,void 0,void 0,(function(){var t,n,o,a;return U(this,(function(s){switch(s.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.conversationType\\\",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isValidConversationType,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.targetId\\\",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.channelId\\\",e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),[4,te.imClient.context.getConversationMessageDraft(e.conversationType,e.targetId,e.channelId)];case 1:return t=s.sent(),n=t.code,o=t.data,a=\\\"conversationType:\\\"+e.conversationType+\\\",targetId:\\\"+e.targetId,O.debug(\\\"get draft ->\\\"+a),n===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:n,data:o||\\\"\\\"}]:(O.warn(\\\"get draft fail ->\\\"+n+\\\":\\\"+oe[n]+\\\",\\\"+a),[2,{code:n,msg:oe[n]}])}}))}))}function Re(e,t){return N(this,void 0,void 0,(function(){var n,o;return U(this,(function(a){switch(a.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.conversationType\\\",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isValidConversationType,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.targetId\\\",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.channelId\\\",e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"draft\\\",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),n=\\\"conversationType:\\\"+e.conversationType+\\\",targetId:\\\"+e.targetId,O.debug(\\\"set draft ->\\\"+n),[4,te.imClient.context.saveConversationMessageDraft(e.conversationType,e.targetId,t,e.channelId)];case 1:return(o=a.sent())===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:o}]:(O.warn(\\\"set draft fail ->\\\"+o+\\\":\\\"+oe[o]+\\\",\\\"+n),[2,{code:o,msg:oe[o]}])}}))}))}function Ne(e){return N(this,void 0,void 0,(function(){var t,n;return U(this,(function(o){switch(o.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.conversationType\\\",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isValidConversationType,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.targetId\\\",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.channelId\\\",e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),t=\\\"conversationType:\\\"+e.conversationType+\\\",targetId:\\\"+e.targetId,O.debug(\\\"delete draft  ->\\\"+t),[4,te.imClient.context.clearConversationMessageDraft(e.conversationType,e.targetId,e.channelId)];case 1:return(n=o.sent())===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:n}]:(O.warn(\\\"delete draft fail ->\\\"+n+\\\":\\\"+oe[n]+\\\",\\\"+t),[2,{code:n,msg:oe[n]}])}}))}))}function Ue(e,t){return N(this,void 0,void 0,(function(){var n,o,a,s,i,d;return U(this,(function(u){switch(u.label){case 0:if(O.debug(\\\"get total unread count -> ConversationType:\\\"+JSON.stringify(t)+\\\" includeMuted:\\\"+e),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"includeMuted\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.BOOLEAN,!1),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversationTypes\\\",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.ARRAY,!1),t)for(n=0,o=t;n<o.length;n++)a=o[n],(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversationType\\\",a,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isValidConversationType);return[4,te.imClient.context.getTotalUnreadCount(\\\"\\\",t,e)];case 1:return s=u.sent(),i=s.code,d=s.data,i===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:i,data:d}]:(O.warn(\\\"getTotalUnreadCount fail ->\\\"+i+\\\":\\\"+oe[i]),[2,{code:i,msg:oe[i]}])}}))}))}function Oe(e){return N(this,void 0,void 0,(function(){var t,n,o,a;return U(this,(function(s){switch(s.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.conversationType\\\",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isValidConversationType,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.targetId\\\",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.channelId\\\",e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),[4,te.imClient.context.getUnreadCount(e.conversationType,e.targetId,e.channelId)];case 1:return t=s.sent(),n=t.code,o=t.data,a=\\\"conversationType:\\\"+e.conversationType+\\\",targetId:\\\"+e.targetId,O.debug(\\\"get unreadCount ->\\\"+a),n===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:n,data:o}]:(O.warn(\\\"get unreadCount fail ->\\\"+n+\\\":\\\"+oe[n]+\\\",\\\"+a),[2,{code:n,msg:oe[n]}])}}))}))}function Me(e){return N(this,void 0,void 0,(function(){var t,n;return U(this,(function(o){switch(o.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.conversationType\\\",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isValidConversationType,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.targetId\\\",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.channelId\\\",e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),[4,te.imClient.context.clearUnreadCount(e.conversationType,e.targetId,e.channelId)];case 1:return t=o.sent(),n=\\\"conversationType:\\\"+e.conversationType+\\\",targetId:\\\"+e.targetId,O.debug(\\\"clear unreadMsgNum ->\\\"+n),t!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(O.warn(\\\"clear unreadMsgNum fail ->\\\"+t+\\\":\\\"+oe[t]+\\\",\\\"+n),[2,{code:t,msg:oe[t]}]):[2,{code:t}]}}))}))}function _e(){return N(this,void 0,void 0,(function(){return U(this,(function(e){switch(e.label){case 0:return[4,te.imClient.context.clearAllUnreadCount()];case 1:return[2,{code:e.sent()}]}}))}))}function we(e,t){return N(this,void 0,void 0,(function(){var n,o;return U(this,(function(a){switch(a.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.conversationType\\\",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isValidConversationType,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.targetId\\\",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.channelId\\\",e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"notificationStatus\\\",t,(function(e){return 1===e||2===e}),!0),n=\\\"conversationType:\\\"+e.conversationType+\\\",targetId:\\\"+e.targetId,O.debug(\\\"set conversation status ->\\\"+n),[4,te.imClient.context.setConversationStatus(e.conversationType,e.targetId,void 0,t,e.channelId)];case 1:return(o=a.sent())!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(O.warn(\\\"set conversation status fail ->\\\"+o+\\\":\\\"+oe[o]+\\\",\\\"+n),[2,{code:o,msg:oe[o]}]):[2,{code:o}]}}))}))}function Ae(e){return N(this,void 0,void 0,(function(){var t,n,o;return U(this,(function(a){switch(a.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.conversationType\\\",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isValidConversationType,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.targetId\\\",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.channelId\\\",e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),O.info(\\\"getConversationNotificationStatus ->targetId:\\\"+e.targetId+\\\",conversationType:\\\"+e.conversationType),[4,te.imClient.context.getConversationNotificationStatus(e.conversationType,e.targetId,e.channelId)];case 1:return t=a.sent(),n=t.code,o=t.data,n===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:n,data:o}]:(O.warn(\\\"getConversationNotificationStatus ->code:\\\"+n+\\\",targetId:\\\"+e.targetId),[2,{code:n,msg:oe[n]}])}}))}))}function xe(){return N(this,void 0,void 0,(function(){var e,t,n;return U(this,(function(o){switch(o.label){case 0:return[4,te.imClient.context.getBlockConversationList()];case 1:return e=o.sent(),t=e.code,n=e.data,[2,{code:t,data:n}]}}))}))}function be(e,t){return void 0===t&&(t=!0),N(this,void 0,void 0,(function(){var n,o;return U(this,(function(a){switch(a.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.type\\\",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isValidConversationType,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.targetId\\\",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.channelId\\\",e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),n=\\\"conversationType:\\\"+e.conversationType+\\\",targetId:\\\"+e.targetId,O.debug(\\\"set conversation status ->\\\"+n),[4,te.imClient.context.setConversationStatus(e.conversationType,e.targetId,t,void 0,e.channelId)];case 1:return(o=a.sent())!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(O.warn(\\\"set conversation status fail ->\\\"+o+\\\":\\\"+oe[o]+\\\",\\\"+n),[2,{code:o,msg:oe[o]}]):[2,{code:o}]}}))}))}function Pe(){return N(this,void 0,void 0,(function(){var e,t,n;return U(this,(function(o){switch(o.label){case 0:return[4,te.imClient.context.getTopConversationList()];case 1:return e=o.sent(),t=e.code,n=e.data,[2,{code:t,data:n}]}}))}))}function Le(e){return N(this,void 0,void 0,(function(){return U(this,(function(t){return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.targetId\\\",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.channelId\\\",e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),O.debug(\\\"getUnreadMentionedCount\\\"+e.targetId+\\\",channelId:\\\"+e.channelId),[2,te.imClient.context.getUnreadMentionedCount(e)]}))}))}function Ge(){return N(this,void 0,void 0,(function(){return U(this,(function(e){return O.debug(\\\"getAllUnreadMentionedCount\\\"),[2,te.imClient.context.getAllUnreadMentionedCount()]}))}))}function De(){return N(this,void 0,void 0,(function(){return U(this,(function(e){return[2,te.imClient.context.getAllConversationState()]}))}))}function ke(){return N(this,void 0,void 0,(function(){var e,t,n;return U(this,(function(o){switch(o.label){case 0:return[4,te.imClient.context.getUltraGroupList()];case 1:return e=o.sent(),t=e.code,n=e.data,t===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS,data:n}]:(O.warn(\\\"get ultragroup  ->\\\"+t+\\\":\\\"+oe[t]),[2,{code:t,msg:oe[t]}])}}))}))}function He(){return N(this,void 0,void 0,(function(){var e,t,n;return U(this,(function(o){switch(o.label){case 0:return[4,te.imClient.context.getBlockUltraGroupList()];case 1:return e=o.sent(),t=e.code,n=e.data,t===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS,data:n}]:(O.warn(\\\"get block ultragroup  ->\\\"+t+\\\":\\\"+oe[t]),[2,{code:t,msg:oe[t]}])}}))}))}function Be(e){return N(this,void 0,void 0,(function(){var t;return U(this,(function(n){switch(n.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.targetId\\\",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.channelId\\\",e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.conversationType\\\",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isValidConversationType,!0),[4,te.imClient.context.sendUltraGroupTypingStatus(e)];case 1:return(t=n.sent().code)===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS}]:(O.warn(\\\"send ultraGroup OperateStatus   ->\\\"+t+\\\":\\\"+oe[t]),[2,{code:t,msg:oe[t]}])}}))}))}function Fe(e,t){return N(this,void 0,void 0,(function(){var n,o,a,s,i,d,u,l;return U(this,(function(g){switch(g.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.targetId\\\",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.channelId\\\",e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.conversationType\\\",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isValidConversationType,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"msgs\\\",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.ARRAY,!0),n=e.targetId,o=e.conversationType,a=e.channelId,s=[],t.forEach((function(e){var t=e.sendTime,n=e.messageUId;s.push({sendTime:t,messageUId:n,channelId:a})})),i={targetId:n,conversationType:o,messages:s},[4,te.imClient.context.getUltraGroupMessageListByMessageUId(i)];case 1:return d=g.sent(),u=d.code,l=d.data,u===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS,data:l}]:(O.warn(\\\"get UltraGroup MessageList by messageUId   ->\\\"+u+\\\":\\\"+oe[u]),[2,{code:u,msg:oe[u]}])}}))}))}function qe(e,t){return N(this,void 0,void 0,(function(){var n,o,a,s,i,d,u,l,g;return U(this,(function(f){switch(f.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"expansion\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.OBJECT,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"message\\\",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.OBJECT,!0),n=t.conversationType,o=t.targetId,a=t.messageUId,s=t.sentTime,i=t.canIncludeExpansion,d=t.channelId,u=\\\"conversationType:\\\"+n+\\\",targetId:\\\"+o+\\\",channelId:\\\"+d+\\\",messageUId:\\\"+a,O.debug(\\\"update expansion for ultragroup message  ->\\\"+u),l={targetId:o,channelId:d,conversationType:n,sendTime:s,canIncludeExpansion:i,messageUId:a,expansion:e},[4,te.imClient.context.expandUltraMessage(l)];case 1:return(g=f.sent().code)===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS}]:(O.warn(\\\"update expansion for ultragroup message   ->\\\"+g+\\\":\\\"+oe[g]),[2,{code:g,msg:oe[g]}])}}))}))}function Ve(e,t){return N(this,void 0,void 0,(function(){var n,o,a,s,i,d,u,l,g;return U(this,(function(f){switch(f.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"expansion\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.ARRAY,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"message\\\",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.OBJECT,!0),n=t.conversationType,o=t.targetId,a=t.messageUId,s=t.sentTime,i=t.canIncludeExpansion,d=t.channelId,u=\\\"conversationType:\\\"+n+\\\",targetId:\\\"+o+\\\",channelId:\\\"+d+\\\",messageUId:\\\"+a,O.debug(\\\"remove expansion for ultragroup message  ->\\\"+u),l={targetId:o,channelId:d,conversationType:n,sendTime:s,canIncludeExpansion:i,messageUId:a,keys:e},[4,te.imClient.context.expandUltraMessage(l)];case 1:return(g=f.sent().code)===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS}]:(O.warn(\\\"remove expansion for ultraGroup message   ->\\\"+g+\\\":\\\"+oe[g]),[2,{code:g,msg:oe[g]}])}}))}))}function ze(e){return N(this,void 0,void 0,(function(){var t,n,o,a,s,i,d,u,l;return U(this,(function(g){switch(g.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"message\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.OBJECT,!0),t=e.conversationType,n=e.targetId,o=e.messageUId,a=e.sentTime,s=e.canIncludeExpansion,i=e.channelId,d=\\\"conversationType:\\\"+t+\\\",targetId:\\\"+n+\\\",channelId:\\\"+i+\\\",messageUId:\\\"+o,O.debug(\\\"remove all expansion for ultraGroup message ->\\\"+d),u={targetId:n,channelId:i,conversationType:t,sendTime:a,canIncludeExpansion:s,messageUId:o,removeAll:!0},[4,te.imClient.context.expandUltraMessage(u)];case 1:return(l=g.sent().code)===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS}]:(O.warn(\\\"remove all expansion for ultraGroup message   ->\\\"+l+\\\":\\\"+oe[l]),[2,{code:l,msg:oe[l]}])}}))}))}function Ke(e,t){return N(this,void 0,void 0,(function(){var n,o,a,s,i,d,u,l,g,f;return U(this,(function(m){switch(m.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"content\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.OBJECT,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"message\\\",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.OBJECT,!0),n=t.conversationType,o=t.targetId,a=t.messageUId,s=t.senderUserId,i=t.sentTime,d=t.canIncludeExpansion,u=t.channelId,l=\\\"conversationType:\\\"+n+\\\",targetId:\\\"+o+\\\",channelId:\\\"+u+\\\",messageUId:\\\"+a,O.debug(\\\"update ultragroup message expansion ->\\\"+l),g={targetId:o,channelId:u,conversationType:n,fromUserId:s,sendTime:i,canIncludeExpansion:d,messageUId:a,content:e},[4,te.imClient.context.modifyMessage(g)];case 1:return(f=m.sent().code)===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS}]:(O.warn(\\\"modify ultraGroup message   ->\\\"+f+\\\":\\\"+oe[f]),[2,{code:f,msg:oe[f]}])}}))}))}function Xe(e){return N(this,void 0,void 0,(function(){var t,n,o;return U(this,(function(a){switch(a.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"cotargetIdntent\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),O.debug(\\\"get UltraGroup unreadMentionedCount by targetId:\\\"+e),[4,te.imClient.context.getUltraGroupUnreadMentionedCountByTargetId(e)];case 1:return t=a.sent(),n=t.code,o=t.data,n===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS,data:o}]:(O.warn(\\\"get UltraGroup unreadMentionedCount by targetId error ->\\\"+n+\\\":\\\"+oe[n]),[2,{code:n,msg:oe[n]}])}}))}))}var je=function(e){(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.key\\\",e.key,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.value\\\",e.value,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.isAutoDelete\\\",e.isAutoDelete,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.BOOLEAN),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.isSendNotification\\\",e.isSendNotification,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.BOOLEAN),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.notificationExtra\\\",e.notificationExtra,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING)},Je=function(e){(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.key\\\",e.key,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.isSendNotification\\\",e.isSendNotification,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.BOOLEAN),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.notificationExtra\\\",e.notificationExtra,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING)};function We(e,t){return N(this,void 0,void 0,(function(){var n,o;return U(this,(function(a){switch(a.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.count\\\",t.count,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),n=\\\"id:\\\"+e,O.debug(\\\"join chatroom ->\\\"+n),[4,te.imClient.context.joinChatroom(e,t.count)];case 1:return(o=a.sent())!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(O.warn(\\\"join chatroom fail ->code+:\\\"+oe[o]+\\\",\\\"+n),[2,{code:o,msg:oe[o]}]):[2,{code:o}]}}))}))}function Ye(e,t){return N(this,void 0,void 0,(function(){var n,o;return U(this,(function(a){switch(a.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.count\\\",t.count,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),n=\\\"id:\\\"+e,O.debug(\\\"join exist chatroom ->\\\"+n),[4,te.imClient.context.joinExistChatroom(e,t.count)];case 1:return(o=a.sent())!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(O.warn(\\\"join exist chatroom fail ->code:\\\"+oe[o]+\\\",\\\"+n),[2,{code:o,msg:oe[o]}]):[2,{code:o}]}}))}))}function Qe(e){return N(this,void 0,void 0,(function(){var t,n;return U(this,(function(o){switch(o.label){case 0:return t=\\\"id:\\\"+e,O.debug(\\\"quit chatroom ->\\\"+t),[4,te.imClient.context.quitChatroom(e)];case 1:return(n=o.sent())!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(O.warn(\\\"quit chatroom fail ->code+:\\\"+oe[n]+\\\",\\\"+t),[2,{code:n,msg:oe[n]}]):[2,{code:n}]}}))}))}function $e(e,t){return N(this,void 0,void 0,(function(){var n,o,a,s;return U(this,(function(i){switch(i.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.count\\\",t.count,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.order\\\",t.order,(function(e){return[0,1,2].includes(e)})),n=\\\"id:\\\"+e,O.debug(\\\"get chatroom info ->\\\"+n),[4,te.imClient.context.getChatroomInfo(e,t.count,t.order)];case 1:return o=i.sent(),a=o.code,s=o.data,a===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS&&s?[2,{code:a,data:s}]:(O.warn(\\\"get chatroom info fail ->code+:\\\"+oe[a]+\\\",\\\"+n),[2,{code:a,msg:oe[a]}])}}))}))}function Ze(e,t){return N(this,void 0,void 0,(function(){var n,o;return U(this,(function(a){switch(a.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"targetId\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),je(t),n=\\\"id:\\\"+e,O.debug(\\\"set chatroom entry->\\\"+n),[4,te.imClient.context.setChatroomEntry(e,t)];case 1:return(o=a.sent())!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(O.warn(\\\"set chatroom entry fail ->code+:\\\"+oe[o]+\\\",\\\"+n),[2,{code:o,msg:oe[o]}]):[2,{code:o}]}}))}))}function et(e,t){return N(this,void 0,void 0,(function(){var n,o,a,s;return U(this,(function(i){switch(i.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"targetId\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),function(e){e.entries.forEach((function(e){(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"entry.key\\\",e.key,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"entry.value\\\",e.value,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0)})),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.isAutoDelete\\\",e.isAutoDelete,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.BOOLEAN),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.notificationExtra\\\",e.notificationExtra,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING)}(t),t.entries.length>10?[2,ne.CHATROOM_KV_STORE_OUT_LIMIT]:(n=\\\"id:\\\"+e,O.debug(\\\"set chatroom entry->\\\"+n),[4,te.imClient.context.setChatroomEntries(e,t)]);case 1:return o=i.sent(),a=o.code,s=o.data,a!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(O.warn(\\\"set chatroom entry fail ->code+:\\\"+oe[a]+\\\",\\\"+n),[2,{code:a,msg:oe[a],data:s}]):[2,{code:a}]}}))}))}function nt(e,t){return N(this,void 0,void 0,(function(){var n,o;return U(this,(function(a){switch(a.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"targetId\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),je(t),n=\\\"id:\\\"+e,O.debug(\\\"force set chatroom entry ->\\\"+n),[4,te.imClient.context.forceSetChatroomEntry(e,t)];case 1:return(o=a.sent())!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(O.warn(\\\"force set chatroom entry fail ->code+:\\\"+oe[o]+\\\",\\\"+n),[2,{code:o,msg:oe[o]}]):[2,{code:o}]}}))}))}function ot(e,t){return N(this,void 0,void 0,(function(){var n,o;return U(this,(function(a){switch(a.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"targetId\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),Je(t),n=\\\"id:\\\"+e,O.debug(\\\"remove chatroom entry->\\\"+n),[4,te.imClient.context.removeChatroomEntry(e,t)];case 1:return(o=a.sent())!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(O.warn(\\\"remove chatroom entry fail ->code+:\\\"+oe[o]+\\\",\\\"+n),[2,{code:o,msg:oe[o]}]):[2,{code:o}]}}))}))}function at(e,t){return N(this,void 0,void 0,(function(){var n,o,a,s,i;return U(this,(function(d){switch(d.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"targetId\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),function(e){e.entries.forEach((function(e){(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"key\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0)})),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.notificationExtra\\\",e.notificationExtra,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING)}(t),n=\\\"id:\\\"+e,O.debug(\\\"remove chatroom entry->\\\"+n),(o=Object.assign({},t)).entries=t.entries.map((function(e){return{key:e}})),[4,te.imClient.context.removeChatroomEntries(e,o)];case 1:return a=d.sent(),s=a.code,i=a.data,s!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(O.warn(\\\"remove chatroom entry fail ->code+:\\\"+oe[s]+\\\",\\\"+n),[2,{code:s,msg:oe[s],data:i}]):[2,{code:s}]}}))}))}function rt(e,t){return N(this,void 0,void 0,(function(){var n,o;return U(this,(function(a){switch(a.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"targetId\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),Je(t),n=\\\"id:\\\"+e,O.debug(\\\"force remove chatroom entry ->\\\"+n),[4,te.imClient.context.forceRemoveChatroomEntry(e,t)];case 1:return(o=a.sent())!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(O.warn(\\\"force remove chatroom entry fail ->code+:\\\"+oe[o]+\\\",\\\"+n),[2,{code:o,msg:oe[o]}]):[2,{code:o}]}}))}))}function st(e,t){return N(this,void 0,void 0,(function(){var n,o,a,s;return U(this,(function(i){switch(i.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"key\\\",t,(function(e){return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isString)(e)&&/[\\\\w+=-]+/.test(e)&&e.length<=128}),!0),n=\\\"id:\\\"+e,O.debug(\\\"get chatroom entry->\\\"+n),[4,te.imClient.context.getChatroomEntry(e,t)];case 1:return o=i.sent(),a=o.code,s=o.data,a===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS&&s?[2,{code:a,data:s}]:(O.warn(\\\"get chatroom entry fail ->code+:\\\"+oe[a]+\\\",\\\"+n),[2,{code:a,msg:oe[a]}])}}))}))}function it(e){return N(this,void 0,void 0,(function(){var t,n,o,a;return U(this,(function(s){switch(s.label){case 0:return t=\\\"id:\\\"+e,O.debug(\\\"get all chatroom entries->\\\"+t),[4,te.imClient.context.getAllChatroomEntries(e)];case 1:return n=s.sent(),o=n.code,a=n.data,o===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS&&a?[2,{code:o,data:a}]:(O.warn(\\\"get all chatroom entries fail ->code+:\\\"+oe[o]+\\\",\\\"+t),[2,{code:o,msg:oe[o]}])}}))}))}function ct(e,t){return N(this,void 0,void 0,(function(){var n,o,a,s,i;return U(this,(function(d){switch(d.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.timestamp\\\",t.timestamp,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.count\\\",t.count,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.order\\\",t.order,(function(e){return 0===e||1===e})),n=\\\"id:\\\"+e,O.debug(\\\"get chatroom history message->\\\"+n),[4,te.imClient.context.getChatRoomHistoryMessages(e,t.count,t.order,t.timestamp)];case 1:return o=d.sent(),a=o.code,s=o.data,a===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS&&s?(i=s.list.map((function(e){return Z(e)})),[2,{code:a,data:{list:i,hasMore:!!s.hasMore}}]):(O.warn(\\\"get chatroom history message fail ->code+:\\\"+oe[a]+\\\",\\\"+n),[2,{code:a,msg:oe[a]}])}}))}))}function dt(e){return N(this,void 0,void 0,(function(){var t;return U(this,(function(n){switch(n.label){case 0:return[4,te.imClient.context.bindRTCRoomForChatroom(e)];case 1:return[2,{code:t=n.sent(),msg:oe[t]}]}}))}))}var ut=function(e,t,n,o){void 0===n&&(n=!0),void 0===o&&(o=!0),this.messageType=e,this.content=t,this.isPersited=n,this.isCounted=o};function lt(e,t,n){void 0===t&&(t=!0),void 0===n&&(n=!0);return function(o){return new ut(e,o,t,n)}}var gt,ft,mt=lt(\\\"RC:ImgMsg\\\"),pt=lt(\\\"RC:HQVCMsg\\\"),ht=lt(\\\"RC:SightMsg\\\"),vt=lt(\\\"RC:TxtMsg\\\"),It=lt(\\\"RC:CombineMsg\\\"),St=lt(\\\"RC:FileMsg\\\"),Ct=lt(\\\"RC:GIFMsg\\\"),Tt=lt(\\\"RC:VcMsg\\\"),Et=lt(\\\"RC:LBSMsg\\\"),yt=lt(\\\"RC:ReferenceMsg\\\"),Rt=lt(\\\"RC:ImgTextMsg\\\"),Nt={qiniu:function(e,t,n,o){var a,r=\\\"https://\\\"+t.uploadHost.qiniu;a=_t()+Ut[0][1]||r,Ut.shift();var s=new XMLHttpRequest;s.upload&&t.support_options&&(s.upload.onprogress=function(e){n.onProgress(e.loaded,e.total)});s.onreadystatechange=function(){if(4===s.readyState){var a=s.responseText||\\\"{}\\\";(a=JSON.parse(a)).filename=t.uniqueValue,a.uploadMethod=_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.UploadMethod?_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.UploadMethod.QINIU:\\\"\\\",200===s.status?n.onCompleted(a):Ut.length?Nt[Ut[0][0]](e,t,n,o):n.onError(\\\"upload fail\\\")}},t.isChunk&&(a=function(e,t){var n=\\\"\\\";Mt(t,(function(e,t){\\\"token\\\"!==e&&(n+=(n?\\\"&\\\":\\\"\\\")+encodeURIComponent(e)+\\\"=\\\"+encodeURIComponent(t))})),n&&(e+=(e.indexOf(\\\"?\\\")>0?\\\"&\\\":\\\"?\\\")+n);return e}(a+=\\\"/mkblk/\\\"+e.size,t.multi_parmas));s.open(t.method,a,!0),n.onOpen(s),t.stream&&s.setRequestHeader(\\\"authorization\\\",\\\"UpToken \\\"+t.multi_parmas.token);Mt(t.headers,(function(e,t){s.setRequestHeader(e,t)})),s.send(e)},baidu:function(e,t,n,o){if(console.log(o,t),o.size>Ot)throw new Error(\\\"the file size is over 5GB!\\\");var a=t||{};t=t||ft;var r=new XMLHttpRequest,s=_t();if(!a.uploadHost.bos&&!a.bosUploadPath)return;var i=s+Ut[0][1]+a.bosUploadPath;Ut.shift();var c=a.bosHeader||{},d={filename:t.uniqueValue||o.uniqueName,name:o.name,downloadUrl:i,isBosRes:!0};r.upload&&t.support_options&&(r.upload.onprogress=function(e){n.onProgress(e.loaded,e.total,!0)});r.onreadystatechange=function(){if(4===r.readyState){var a=r.responseText||\\\"{}\\\";if((a=JSON.parse(a)).filename=t.uniqueValue,200===r.status){n.onCompleted(d,!0)}else Ut.length?Nt[Ut[0][0]](e,t,n,o):n.onError(\\\"upload fail\\\")}},r.open(t.method,i,!0),r.setRequestHeader(\\\"authorization\\\",c.bosToken),r.setRequestHeader(\\\"x-bce-date\\\",c.bosDate),r.send(o)},aliyun:function(e,t,n,o){if(o.size>Ot)throw new Error(\\\"the file size is over 5GB!\\\");const a=new FormData;a.set(\\\"file\\\",e.get(\\\"file\\\")),a.set(\\\"key\\\",e.get(\\\"key\\\")),a.set(\\\"token\\\",e.get(\\\"token\\\"));const r=Ut[0][1];Ut.shift(),e=e||gt,t=(t=t||{})||ft;var s=new XMLHttpRequest,i=_t()+t.ossBucketName+\\\".\\\"+r;s.upload&&t.support_options&&(s.upload.onprogress=function(e){n.onProgress(e.loaded,e.total)});s.onreadystatechange=function(){if(4===s.readyState){var e=s.responseText||\\\"{}\\\";(e=JSON.parse(e)).name=t.uniqueValue,e.filename=t.uploadFileName,e.uploadMethod=_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.UploadMethod?_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.UploadMethod.ALI:\\\"\\\",200===s.status?n.onCompleted(e):Ut.length?Nt[Ut[0][0]](a,t,n,o):n.onError(\\\"upload fail\\\")}},s.open(t.method,i,!0),console.log(\\\"ali:url\\\",i);var c=t.aliHeader||{};e.set(\\\"OSSAccessKeyId\\\",c.osskeyId),e.set(\\\"policy\\\",c.ossPolicy),e.set(\\\"Signature\\\",c.ossSign),e.set(\\\"success_action_status\\\",200),e.delete(\\\"key\\\"),e.append(\\\"key\\\",t.uploadFileName),e.delete(\\\"file\\\"),e.append(\\\"file\\\",o),s.send(e)},s3:function(e,t,n,o){var a=new FormData,r=new XMLHttpRequest,s=_t();const i=Ut[0][1];var c=s+t.s3BucketName+\\\".\\\"+i;console.log(\\\"uploadS3:url\\\",c),Ut.shift(),r.upload&&t.support_options&&(r.upload.onprogress=function(e){n.onProgress(e.loaded,e.total)});r.onreadystatechange=function(){if(4===r.readyState){var a=r.responseText||\\\"{}\\\";if((a=JSON.parse(a)).name=t.uniqueValue,a.filename=t.uploadFileName,a.uploadMethod=_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.UploadMethod.AWS,console.log(\\\"UploadMethod:\\\",_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.UploadMethod),200===r.status||204===r.status)n.onCompleted(a);else if(Ut.length){const a=new FormData;a.set(\\\"file\\\",e.get(\\\"file\\\")),a.set(\\\"key\\\",e.get(\\\"key\\\")),a.set(\\\"token\\\",e.get(\\\"token\\\")),Nt[Ut[0][0]](a,t,n,o)}else n.onError(\\\"upload fail\\\")}},r.open(t.method,c,!0);var d=t?t.s3Header:{},u=o&&o.type;\\\"text/html\\\"===u?a.set(\\\"Content-Disposition\\\",\\\"inline;\\\"):a.set(\\\"Content-Disposition\\\",\\\"attachment;\\\");a.set(\\\"Content-Type\\\",u),a.set(\\\"x-amz-credential\\\",d.s3Credential),a.set(\\\"x-amz-algorithm\\\",d.s3Algorithm),a.set(\\\"x-amz-date\\\",d.s3Date),a.set(\\\"policy\\\",d.s3Policy),a.set(\\\"x-amz-signature\\\",d.s3Signature),a.set(\\\"key\\\",t.uploadFileName),a.set(\\\"file\\\",o),r.send(a)},stc:function(e,t,n,o){new FormData;var a=new XMLHttpRequest;_t();var r=\\\"https://\\\"+Ut[0][1]+\\\"/\\\"+t.stcBucketName+\\\"/\\\"+t.uploadFileName;Ut.shift(),a.upload&&t.support_options&&(a.upload.onprogress=function(e){n.onProgress(e.loaded,e.total)});a.onreadystatechange=function(){if(4===a.readyState){var r=a.responseText||\\\"{}\\\";if((r=JSON.parse(r)).name=t.uniqueValue,r.filename=t.uploadFileName,r.uploadMethod=_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.UploadMethod?_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.UploadMethod.STC:\\\"\\\",200===a.status||204===a.status)n.onCompleted(r);else if(Ut.length){const a=new FormData;a.set(\\\"file\\\",e.get(\\\"file\\\")),a.set(\\\"key\\\",e.get(\\\"key\\\")),a.set(\\\"token\\\",e.get(\\\"token\\\")),Nt[Ut[0][0]](a,t,n,o)}else n.onError(\\\"upload fail\\\")}},a.open(\\\"PUT\\\",r,!0);var s=t?t.stcHeader:{};a.setRequestHeader(\\\"Content-Type\\\",o.type),\\\"text/html\\\"===o.type?a.setRequestHeader(\\\"Content-Disposition\\\",\\\"inline;\\\"):a.setRequestHeader(\\\"Content-Disposition\\\",\\\"attachment;\\\");a.setRequestHeader(\\\"Authorization\\\",s.stcAuthorization),a.setRequestHeader(\\\"x-amz-content-sha256\\\",s.stcContentSha256),a.setRequestHeader(\\\"x-amz-date\\\",s.stcDate),a.send(o)}},Ut=[],Ot=5368709120;function Mt(e,t){for(var n in e)t(n,e[n])}function _t(){var e=\\\"https://\\\";return\\\"http:\\\"!==location.protocol&&\\\"file:\\\"!==location.protocol||(e=\\\"http://\\\"),e}function wt(e,t,n){var o,a,r=e&&e.type||\\\"text/plain\\\",s=r.indexOf(\\\"image\\\")>-1?1:4,i=Math.ceil(e.size/t.stc_chunk_size),c=t&&JSON.parse(t.ossConfig?t.ossConfig:\\\"\\\");Array.isArray(c)||(c=[]);var d=c.find((e=>Object.keys(e).includes(\\\"stc\\\"))),u=\\\"uploads\\\";te.imClient.getFileToken(s,o,\\\"POST\\\",u).then((function(e){o=e.fileName,a=\\\"https://\\\"+d.stc+\\\"/\\\"+t.stcBucketName+\\\"/\\\"+o,console.log(\\\"uploadStcMultipart:url\\\",a);var s=new XMLHttpRequest;s.open(\\\"POST\\\",a+\\\"?\\\"+u,!0),\\\"text/html\\\"===r?s.setRequestHeader(\\\"Content-Disposition\\\",\\\"inline;\\\"):s.setRequestHeader(\\\"Content-Disposition\\\",\\\"attacshment;\\\"),s.setRequestHeader(\\\"Authorization\\\",e&&e.stcAuthorization),s.setRequestHeader(\\\"x-amz-content-sha256\\\",e&&e.stcContentSha256),s.setRequestHeader(\\\"x-amz-date\\\",e&&e.stcDate),s.setRequestHeader(\\\"Content-Type\\\",r),s.send(),s.onreadystatechange=function(e){if(4===s.readyState){var t=s.response.match(/(?:<UploadId>)(\\\\S*?)(?:<\\\\/UploadId>)/);console.log(\\\"uploadId\\\",t),200===s.status||204===s.status?function(e){for(var t=[],n=1;n<=i;n++)t.push(m(e,n));f(e,t)}(Array.isArray(t)&&t[1]):n.onError(\\\"uploadStcMultipart:did not get uploadId\\\")}}}),(function(e){n.onError(\\\"uploadStcMultipart:\\\"+e)}));var l=[],g=new Map;function f(c,d){d&&Array.isArray(d)&&0!==d.length&&Promise.all(d).then((()=>{var d=\\\"uploadId=\\\"+c;if(g.size===i)te.imClient.context.getFileToken(s,o,\\\"POST\\\",d).then((function(o){console.log(\\\"onSuccess\\\",o),console.log(\\\"onSuccess:uploadId\\\",c);var s=new XMLHttpRequest;s.open(\\\"POST\\\",a+\\\"?\\\"+d,!0),s.setRequestHeader(\\\"Authorization\\\",o&&o.stcAuthorization),s.setRequestHeader(\\\"x-amz-content-sha256\\\",o&&o.stcContentSha256),s.setRequestHeader(\\\"x-amz-date\\\",o&&o.stcDate),s.setRequestHeader(\\\"Content-Type\\\",r);var i=\\\"<CompleteMultipartUpload xmlns='http://s3.amazonaws.com/doc/2006-03-01/'>\\\",u=Array.from(g.keys()||[]).sort(((e,t)=>e-t));console.log(\\\"keys\\\",u),u.map((e=>{i+=`<Part><ETag>${g.get(e)}</ETag><PartNumber>${e}</PartNumber></Part>`})),i+=\\\"</CompleteMultipartUpload>\\\",s.send(i),console.log(\\\"xml\\\",i),s.onreadystatechange=function(){if(4===s.readyState)if(200===s.status||204===s.status){var o={};o.name=e.name,o.filename=t.uploadFileName,o.uploadMethod=_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.UploadMethod.STC,n.onCompleted(o)}else n.onError(\\\"uploadStcMultipart:upload does not end\\\")}}),(function(e){n.onError(\\\"uploadStcMultipart:\\\"+e)}));else{var u=[];for(var p of l)u.push(m(c,p));f(c,u)}}),(e=>{console.error(e),n.onError(\\\"uploadStcMultipart: chunkFiles upload failed and those will reupload\\\");var t=[];for(var o of l)t.push(m(c,o));f(c,t)}))}function m(n,i){return new Promise(((c,d)=>{var u=\\\"partNumber=\\\"+i+\\\"&uploadId=\\\"+n;te.imClient.context.getFileToken(s,o,\\\"PUT\\\",u).then((function(n){console.log(\\\"signature \\\"+i+\\\" onSuccess\\\",n);var o=e&&e.slice((i-1)*t.stc_chunk_size,i*t.stc_chunk_size);console.log(\\\"fileChunk:size\\\",o.size);var s=new XMLHttpRequest;s.open(\\\"PUT\\\",a+\\\"?\\\"+u,!0),s.setRequestHeader(\\\"Authorization\\\",n&&n.stcAuthorization),s.setRequestHeader(\\\"x-amz-content-sha256\\\",n&&n.stcContentSha256),s.setRequestHeader(\\\"x-amz-date\\\",n&&n.stcDate),s.setRequestHeader(\\\"Content-Type\\\",r),s.send(o),s.onreadystatechange=function(){if(4===s.readyState)if(200===s.status||204===s.status){var e=s.getResponseHeader(\\\"etag\\\");console.log(\\\"etag:\\\"+i,e),g.set(i,e),c(e)}else l.includes(i)||l.push(i),d(i)}}),(function(e){console.log(\\\"getETags:签名验证失败\\\"),l.includes(i)||l.push(i),d(i)}))}))}}var At={form:function(e,t){var n=new FormData;if(t.unique_key){var o=e.name.substr(e.name.lastIndexOf(\\\".\\\")),a=xt()+o;n.append(t.unique_key,a),t.uniqueValue=a}return n.append(t.file_data_name,e),bt(t.multi_parmas,(function(e,t){n.append(e,t)})),n},json:function(e,t){var n={};if(t.unique_key){var o=e.name.substr(e.name.lastIndexOf(\\\".\\\")),a=xt()+o;n[t.unique_key]=a,t.uniqueValue=a}return n[t.file_data_name]=e,bt(t.multi_parmas,(function(e,t){n[e]=t})),JSON.stringify(n)},data:function(e,t){return e}};function xt(){var e=(new Date).getTime();return\\\"xxxxxx4xxxyxxxxxxx\\\".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),(\\\"x\\\"===t?n:3&n|8).toString(16)}))}function bt(e,t){for(var n in e)t(n,e[n])}var Pt,Lt=0;function Gt(e){this.options=function(e){var t={domain:\\\"\\\",method:\\\"POST\\\",file_data_name:\\\"file\\\",unique_key:\\\"key\\\",base64_size:4194304,chunk_size:4194304,bos_chunk_size:4294967296,stc_chunk_size:10485760,headers:{},multi_parmas:{},query:{},support_options:!0,data:At.form,genUId:xt};if(!e||!e.domain)throw new Error(\\\"domain is null\\\");for(var n in e)t[n]=e[n];return t}(e),this.setOptions=function(e){var t=this;bt(e,(function(e,n){t.options[e]=n}))},console.log(\\\"options\\\",e),this.upload=function(e,t){if(e){var n=this;!function(e,t,n){if(gt=e,ft=t,Ut=[],t.ossConfig){const e=JSON.parse(t.ossConfig);let n,o,a=\\\"\\\";const r=[];e.forEach((e=>{const t=Number(e.p)-1;for(const s in e)\\\"aliyun\\\"===s&&(a=e[s]),\\\"s3\\\"===s&&(n=e[s]),\\\"stc\\\"===s&&(o=e[s]),\\\"p\\\"!==s&&(r[t]=[s,e[s]])})),r.forEach((function(e){e&&Ut.push(e)})),e.length!==Ut.length&&(Ut=[[\\\"qiniu\\\",t.domain],[\\\"baidu\\\",t.uploadHost.bos],[\\\"aliyun\\\",a],[\\\"s3\\\",n],[\\\"stc\\\",o]])}else Ut=[[\\\"qiniu\\\",t.domain],[\\\"baidu\\\",t.uploadHost.bos]];var o;if(t.ossConfig){var a=t&&JSON.parse(t.ossConfig);Array.isArray(a)||(a=[]),o=a.find((e=>Object.keys(e).includes(\\\"stc\\\")))}if(o&&1===parseInt(o.p)&&e.size>=4194304)wt(e,t,n);else{var r=t.data(e,t);Nt[Ut[0][0]](r,t,n,e)}}(e,this.options,{onProgress:function(e,n,o){if(Pt=e,o){Pt=Lt+e/n*(n-Lt)}else Lt=Pt;t.onProgress(Pt,n)},onCompleted:function(e){t.onCompleted(e)},onError:function(e){t.onError(e)},onOpen:function(e){n.xhr=e}})}else t.onError(\\\"upload file is null.\\\")},this.cancel=function(){this.xhr&&this.xhr.abort()}}var Dt={init:function(e){return new Gt(e)},dataType:At,resize:function(e,t,n){e.type;var o=document.createElement(\\\"canvas\\\"),a=new FileReader;a.readAsDataURL(e),a.onload=function(e){var a=e.target.result,r=new Image;r.src=a;var s=r.width,i=r.height,c=function(e,t){var n=1,o=e.width,a=t.maxWidth||0;a>0&&o>a&&(n=a/o);var r=e.height,s=t.maxHeight||0;if(s>0&&r>s){var i=s/r;n=Math.min(n,i)}var c=t.maxSize||0,d=Math.ceil(e.size/1e3);if(d>c){var u=c/d;n=Math.min(n,u)}return n}({width:s,height:i,size:e.total},t),d=a;c<1&&(d=function(e,t,n){o.width=t,o.height=n,o.getContext(\\\"2d\\\").drawImage(e,0,0,t,n);var a=\\\"image/jpg\\\";return o.toDataURL(a)}(r,s*c,i*c)),n(d)}}};const kt=function(e,t,n){var o=document.createElement(\\\"canvas\\\"),a=o.getContext(\\\"2d\\\"),r=new Image;r.onload=function(){var s=function(e,t,n){var o,a,r,s=e<t,i=0,c=0;return(s?t/e:e/t)>n.scale?(s?(a=100,c=((r=t/(o=e/100))-n.maxHeight)/2):(r=100,i=((a=e/(o=t/100))-n.maxWidth)/2),{w:a,h:r,x:-i,y:-c}):(s?(o=t/n.maxHeight,r=n.maxHeight,a=e/o):(o=e/n.maxWidth,a=n.maxWidth,r=t/o),{w:a,h:r,x:-i,y:-c})}(r.width,r.height,t);o.width=s.w>t.maxWidth?t.maxWidth:s.w,o.height=s.h>t.maxHeight?t.maxHeight:s.h,a.drawImage(r,s.x,s.y,s.w,s.h);try{var i=o.toDataURL(e.type,t.quality),c=new RegExp(\\\"^data:image/[^;]+;base64,\\\");i=i.replace(c,\\\"\\\"),n(i)}catch(e){throw new Error(e)}},r.src=\\\"string\\\"==typeof e?\\\"data:image/jpg;base64,\\\"+e:function(e){var t=window.URL||window.webkitURL;return t?t.createObjectURL(e):\\\"\\\"}(e)},Ht=function(e,t){var n=e.file,o=e.compress;kt(n,o,t)},Bt=function(e,t){if(e.getToken)e.getToken((function(n,o){o=o||{},e.multi_parmas||(e.multi_parmas={}),e.multi_parmas.token=n,e.uploadHost||(e.uploadHost={}),e.uploadHost.bos=o.bos,e.ossConfig=o.ossConfig,e.bosHeader||(e.bosHeader={}),e.bosHeader.bosDate=o.bosDate,e.bosHeader.bosToken=o.bosToken,e.bosUploadPath=o.path,e.aliHeader={},e.aliHeader.osskeyId=o.osskeyId,e.aliHeader.ossPolicy=o.ossPolicy,e.aliHeader.ossSign=o.ossSign,e.ossBucketName=o.ossBucketName,e.uploadFileName=o.fileName,e.s3Header={},e.s3Header.s3Credential=o.s3Credential,e.s3Header.s3Algorithm=o.s3Algorithm,e.s3Header.s3Date=o.s3Date,e.s3Header.s3Policy=o.s3Policy,e.s3Header.s3Signature=o.s3Signature,e.s3BucketName=o.s3BucketName,e.stcHeader={},e.stcHeader.stcAuthorization=o.stcAuthorization,e.stcHeader.stcContentSha256=o.stcContentSha256,e.stcHeader.stcDate=o.stcDate,e.stcBucketName=o.stcBucketName,e.headers||(e.headers={}),e.base64&&(e.headers[\\\"Content-type\\\"]=\\\"application/octet-stream\\\",e.headers.Authorization=\\\"UpToken \\\"+n),console.log(\\\"data\\\",o);var a=Dt.init(e);t(a)}));else{e.headers||(e.headers={}),e.base64&&(e.headers[\\\"Content-type\\\"]=\\\"application/octet-stream\\\");var n=Dt.init(e);t(n)}};var Ft,qt,Vt=function(e,t,n){t.upload(e.file,{onError:function(e){n.onError(e)},onProgress:function(e,t){n.onProgress(e,t)},onCompleted:function(t){t.filename||(t.filename=t.hash);var o=e.compressThumbnail||Ht;e.compress?o(e,(function(e){t.thumbnail=e,n.onCompleted(t)})):n.onCompleted(t)}})},zt=function(e){var t=this;this.instance=e,this.upload=function(e,n){Vt({file:e},t.instance,n)},this.cancel=function(){t.instance.cancel()}},Kt=function(e,t){var n=this;this.cfg=t,this.instance=e,this.upload=function(e,t){var o={file:e,compress:n.cfg};Vt(o,n.instance,t)},this.cancel=function(){n.instance.cancel()}},Xt=function(e,t){Bt(e,(function(n){var o={maxHeight:e.maxHeight||160,maxWidth:e.maxWidth||160,quality:e.quality||.5,scale:e.scale||2.4},a=new Kt(n,o);t(a)}))},jt=function(e,t){Bt(e,(function(e){var n=new zt(e);t(n)}))},Jt=Xt;Dt.dataType;function Wt(e){return Ft=Ft||new AudioContext,new Promise((function(t,n){Ft.decodeAudioData(e,(function(e){t({duration:e.duration,length:e.length})}),n)}))}function Yt(e,t,n,o){return new Promise((function(a){te.imClient.context.getFileToken(e,t,n,o).then((function(e){a({code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS,data:e})})).catch((function(e){a({code:e,msg:oe[e]})}))}))}function Qt(e,t,n,o,a){return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"fileType\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isValidFileType,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"filename\\\",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"saveName\\\",n,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"serverType\\\",a,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER),new Promise((function(s){te.imClient.context.getFileUrl(e,t,n,o,a).then((function(e){s({code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS,data:e})})).catch((function(e){s({code:e})}))}))}function $t(e,t,n){return N(this,void 0,void 0,(function(){var o,a,d,u,l,g,f,m,h,v;return U(this,(function(I){switch(I.label){case 0:return n=n||{},t instanceof ut==!1?(O.warn(\\\"send message fail -> message parameter is not an instance of BaseMessage\\\"),[2,ne.ILLGAL_PARAMS]):((0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.channelId\\\",null==e?void 0:e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),o=e.conversationType,a=e.targetId,d=e.channelId,u=\\\"conversationType:\\\"+o+\\\",targetId:\\\"+a,O.debug(\\\"send message  ->\\\"+u),(l=Object.assign(n,t)).channelId=d||\\\"\\\",[4,te.imClient.context.sendMessage(o,a,l)]);case 1:return g=I.sent(),f=g.code,m=g.data,f===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(h=Z(m),[2,{code:f,data:h}]):(O.warn(\\\"send message fail ->\\\"+f+\\\":\\\"+oe[f]+\\\",\\\"+u),v={isMentioned:!!n.isMentioned,content:t.content,messageType:t.messageType,isPersited:t.isPersited||!1,isCounted:t.isCounted||!1,disableNotification:!!(null==n?void 0:n.disableNotification),canIncludeExpansion:!!(null==n?void 0:n.canIncludeExpansion),expansion:(null==n?void 0:n.expansion)||null,conversationType:e.conversationType,targetId:e.targetId,channelId:e.channelId,senderUserId:te.imClient.context.getCurrentUserId(),messageUId:\\\"\\\",messageDirection:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.MessageDirection.SEND,sentTime:(null==m?void 0:m.sentTime)||0,receivedTime:0,isStatusMessage:n.isStatusMessage||!1,receivedStatus:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ReceivedStatus.UNREAD,isOffLineMessage:!1},o!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ConversationType.ULTRA_GROUP&&(v.isOffLineMessage=!1),[2,{code:f,msg:oe[f],data:Z(v)}])}}))}))}function Zt(e,t,n){return $t(e,new vt(t),n)}function en(e,t){return function(n,o,a,s){return new Promise((function(i){var c;!function(e,t,n,o){var a,r=this;if(void 0===t&&(t=_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.FileType.FILE),a=t===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.FileType.IMAGE?_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.FileType.IMAGE:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.FileType.FILE,!qt){qt=\\\"upload.qiniup.com\\\";var s=te.imClient.context.getInfoFromCache();if(s&&s.ossConfig)try{var i=JSON.parse(s.ossConfig).find((function(e){return void 0!==e.qiniu}));i&&(qt=i.qiniu)}catch(e){}}var c=R({domain:qt,getToken:function(e){te.imClient.context.getFileToken(a).then((function(t){e(t.token,t)})).catch((function(e){n.onFail(e)}))}},o);(a===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.FileType.IMAGE?Jt:jt)(c,(function(o){o.upload(e,{onProgress:function(e,t){var o,a=Math.floor(e/t*100);null===(o=n.onProgress)||void 0===o||o.call(n,a)},onCompleted:function(o){return N(r,void 0,void 0,(function(){var r=this;return U(this,(function(s){return Qt(a,o.filename,o.name,o,o.uploadMethod).then((function(s){return N(r,void 0,void 0,(function(){var r,i;return U(this,(function(c){return 0!==s.code?(n.onFail(s),[2]):((r=s.data).type=e.type,r.name=o.name||o.filename,t===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.FileType.AUDIO?(\\\"function\\\"==typeof e.arrayBuffer?e.arrayBuffer().then(Wt).then((function(e){Object.assign(r,e),n.onSuccess(r)}),(function(){n.onSuccess(r)})):((i=new FileReader).onload=function(){i.result?Wt(i.result).then((function(e){Object.assign(r,e),n.onSuccess(r)}),(function(){n.onSuccess(r)})):n.onSuccess(r)},i.onerror=function(){r.duration=0,n.onSuccess(r)},i.readAsArrayBuffer(e)),[2]):(a===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.FileType.IMAGE&&(r.thumbnail=o.thumbnail),n.onSuccess(r),[2]))}))}))})).catch((function(e){n.onFail(e)})),[2]}))}))},onError:function(e){n.onFail(e)}})}))}(o.file,e,{onProgress:null==a?void 0:a.onProgress,onSuccess:function(e){var r,c=(null===(r=null==a?void 0:a.onComplete)||void 0===r?void 0:r.call(a,{url:e.downloadUrl}))||t(e,o);$t(n,c,s).then(i)},onFail:function(e){i({code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.UPLOAD_FILE_FAILED,msg:e||_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode[_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.UPLOAD_FILE_FAILED]})}},(null===(c=s)||void 0===c?void 0:c.thumbnailConfig)||{})}))}}var tn=en(_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.FileType.FILE,(function(e,t){return new St({name:e.name,size:t.file.size,type:t.file.type,fileUrl:e.downloadUrl,user:t.user,extra:t.extra})})),nn=en(_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.FileType.IMAGE,(function(e,t){return new mt({content:e.thumbnail,imageUri:e.downloadUrl,user:t.user,extra:t.extra})})),on=en(_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.FileType.AUDIO,(function(e,t){return new pt({remoteUrl:e.downloadUrl,duration:e.duration,type:e.type,user:t.user,extra:t.extra})})),an=en(_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.FileType.SIGHT,(function(e,t){return new ht({sightUrl:e.downloadUrl,content:t.thumbnail,duration:t.duration,size:t.file.size||e.size,name:t.name||e.name,user:t.user,extra:t.extra})}));function rn(e,t){return N(this,void 0,void 0,(function(){var n,o,a,s,i;return U(this,(function(d){switch(d.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.timestamp\\\",null==t?void 0:t.timestamp,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.count\\\",null==t?void 0:t.count,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.order\\\",null==t?void 0:t.order,(function(e){return 0===e||1===e})),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.channelId\\\",null==e?void 0:e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),n=\\\"conversationType:\\\"+e.conversationType+\\\",targetId:\\\"+e.targetId,O.debug(\\\"get history message ->\\\"+n),[4,te.imClient.context.getHistoryMessage(e.conversationType,e.targetId,null==t?void 0:t.timestamp,null==t?void 0:t.count,null==t?void 0:t.order,null==e?void 0:e.channelId)];case 1:return o=d.sent(),a=o.code,s=o.data,a===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS&&s?(i=s.list.map((function(e){return Z(e)})),[2,{code:a,data:{list:i,hasMore:s.hasMore}}]):(O.warn(\\\"get history message fail ->\\\"+a+\\\":\\\"+oe[a]+\\\",\\\"+n),[2,{code:a,msg:oe[a]}])}}))}))}function sn(e,t){return N(this,void 0,void 0,(function(){var n,o,a,s,i;return U(this,(function(d){switch(d.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.timestamp\\\",null==t?void 0:t.timestamp,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.count\\\",null==t?void 0:t.count,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.order\\\",null==t?void 0:t.order,(function(e){return 0===e||1===e})),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.channelId\\\",null==e?void 0:e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),n=\\\"conversationType:\\\"+e.conversationType+\\\",targetId:\\\"+e.targetId,O.debug(\\\"get history message ->\\\"+n),[4,te.imClient.context.getRemoteHistoryMessages(e.conversationType,e.targetId,(null==t?void 0:t.timestamp)||0,(null==t?void 0:t.count)||20,(null==t?void 0:t.order)||0,e.channelId||\\\"\\\")];case 1:return o=d.sent(),a=o.code,s=o.data,a===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS&&s?(i=s.list.map((function(e){return Z(e)})),[2,{code:a,data:{list:i,hasMore:s.hasMore}}]):(O.warn(\\\"get history message fail ->\\\"+a+\\\":\\\"+oe[a]+\\\",\\\"+n),[2,{code:a,msg:oe[a]}])}}))}))}function cn(e,t,n,o){return N(this,void 0,void 0,(function(){var a,r,i,c,d;return U(this,(function(u){switch(u.label){case 0:return a={targetId:e,conversationType:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ConversationType.PRIVATE,channelId:o},r=new ut(\\\"RC:ReadNtf\\\",{messageUId:t,lastMessageSendTime:n,type:1}),[4,$t(a,r)];case 1:return i=u.sent(),c=i.code,d=i.msg,0===c?[2,{code:c}]:[2,{code:c,msg:d}]}}))}))}function dn(e,t,n){return N(this,void 0,void 0,(function(){var o,a,r,i,d;return U(this,(function(u){switch(u.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"messageUId\\\",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"channelId\\\",n,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),o=\\\"messageUId:\\\"+t+\\\",targetId:\\\"+e,O.debug(\\\"send read receipt message ->\\\"+o),a=new ut(\\\"RC:RRReqMsg\\\",{messageUId:t}),[4,$t({targetId:e,conversationType:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ConversationType.GROUP,channelId:n},a)];case 1:return r=u.sent(),i=r.code,d=r.msg,0===i?[2,{code:i}]:[2,{code:i,msg:d}]}}))}))}function un(e,t,n){return N(this,void 0,void 0,(function(){return U(this,(function(e){throw new Error(\\\"This method is deprecated, please use method sendReadReceiptResponseV2.\\\")}))}))}function ln(e,t,n){return N(this,void 0,void 0,(function(){var o,a,i,d,u,l,g;return U(this,(function(f){switch(f.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"targetId\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"messageList\\\",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.OBJECT,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"channelId\\\",n,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),Object.keys(t).forEach((function(e){(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(e,t[e],_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.ARRAY)})),o={targetId:e,conversationType:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ConversationType.GROUP,channelId:n},i=te.imClient.context.getInfoFromCache(),0!==(d=(null==i?void 0:i.grpRRVer)||0)?[3,2]:(u=new ut(\\\"RC:RRRspMsg\\\",{receiptMessageDic:t}),[4,$t(o,u)]);case 1:return a=f.sent(),[3,4];case 2:return 1!==d?[3,4]:(l=[],Object.keys(t).forEach((function(e){t[e].forEach((function(e){-1===l.indexOf(e)&&l.push(e)}))})),l.length?[4,te.imClient.context.sendReadReceiptMessage(e,l,n)]:(O.warn(\\\"Error in parameter messageList.\\\"),[2,{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.PARAMETER_ERROR}]));case 3:a=f.sent(),f.label=4;case 4:return(g=a.code)===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:g}]:(O.warn(\\\"send read receipt message fail ->\\\"+g+\\\":\\\"+oe[g]),[2,{code:g,msg:oe[g]}])}}))}))}function gn(e,t){return N(this,void 0,void 0,(function(){var n,o,a,r;return U(this,(function(s){switch(s.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.type\\\",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.targetId\\\",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"lastMessageSendTime\\\",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.channelId\\\",null==e?void 0:e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),n=new ut(\\\"RC:SRSMsg\\\",{lastMessageSendTime:t}),[4,$t(e,n)];case 1:return o=s.sent(),a=o.code,r=o.msg,0===a?[2,{code:a}]:[2,{code:a,msg:r}]}}))}))}function fn(e,t){return N(this,void 0,void 0,(function(){var n,o,a,s,i;return U(this,(function(d){switch(d.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.messageUId\\\",t.messageUId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.sentTime\\\",t.sentTime,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.disableNotification\\\",null==t?void 0:t.disableNotification,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.BOOLEAN),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.pushConfig\\\",null==t?void 0:t.pushConfig,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.OBJECT),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.channelId\\\",null==e?void 0:e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),n={user:t.user,channelId:e.channelId||\\\"\\\",disableNotification:null==t?void 0:t.disableNotification,pushConfig:null==t?void 0:t.pushConfig},o=\\\"conversationType:\\\"+e.conversationType+\\\",targetId:\\\"+e.targetId+\\\",messageUId:\\\"+t.messageUId,O.debug(\\\"recall message ->\\\"+o),[4,te.imClient.context.recallMessage(e.conversationType,e.targetId,t.messageUId,t.sentTime,n)];case 1:return a=d.sent(),s=a.code,i=a.data,s===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS&&i?[2,{code:s,data:Z(i)}]:s===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:s}]:(O.warn(\\\"recall message fail ->\\\"+s+\\\":\\\"+oe[s]+\\\",\\\"+o),[2,{code:s,msg:oe[s]}])}}))}))}function mn(e,t){return N(this,void 0,void 0,(function(){var n,o;return U(this,(function(a){switch(a.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options\\\",t,(function(e){return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isArray)(e)&&e.length}),!0),t.forEach((function(e){(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.messageUId\\\",e.messageUId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.sentTime\\\",e.sentTime,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.messageDirection\\\",e.messageDirection,(function(e){return 1===e||2===e}),!0)})),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.channelId\\\",null==e?void 0:e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),n=\\\"conversationType:\\\"+e.conversationType+\\\",targetId:\\\"+e.targetId,O.debug(\\\"delete messages ->\\\"+n),[4,te.imClient.context.deleteRemoteMessage(e.conversationType,e.targetId,t,e.channelId)];case 1:return(o=a.sent())!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(O.warn(\\\"delete message fail ->\\\"+o+\\\":\\\"+oe[o]+\\\",\\\"+n),[2,{code:o,msg:oe[o]}]):[2,{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS}]}}))}))}function pn(e,t){return N(this,void 0,void 0,(function(){var n,o;return U(this,(function(a){switch(a.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.timestamp\\\",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.channelId\\\",null==e?void 0:e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),n=\\\"conversationType:\\\"+e.conversationType+\\\",targetId:\\\"+e.targetId,O.debug(\\\"clear message ->\\\"+n),[4,te.imClient.context.deleteRemoteMessageByTimestamp(e.conversationType,e.targetId,t,e.channelId)];case 1:return(o=a.sent())!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(O.warn(\\\"clear message ->\\\"+o+\\\":\\\"+oe[o]+\\\",\\\"+n),[2,{code:o,msg:oe[o]}]):[2,{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS}]}}))}))}function hn(e,t){return N(this,void 0,void 0,(function(){var n,o,a,s,i,d,u,l;return U(this,(function(g){switch(g.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"expansion\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.OBJECT,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"message\\\",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.OBJECT,!0),n=t.conversationType,o=t.targetId,a=t.messageUId,s=t.canIncludeExpansion,i=t.expansion,d=t.channelId,u=\\\"conversationType:\\\"+n+\\\",targetId:\\\"+o+\\\",messageUId:\\\"+a,O.debug(\\\"update message expansion ->\\\"+u),[4,te.imClient.context.sendExpansionMessage({conversationType:n,targetId:o,messageUId:a,expansion:e,canIncludeExpansion:s,originExpansion:i,channelId:d})];case 1:return(l=g.sent().code)!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(O.warn(\\\"update message expansion fail ->\\\"+l+\\\":\\\"+oe[l]+\\\",\\\"+u),[2,{code:l,msg:oe[l]}]):[2,{code:l}]}}))}))}function vn(e,t){return N(this,void 0,void 0,(function(){var n,o,a,s,i,d,u;return U(this,(function(l){switch(l.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"keys\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.ARRAY,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"message\\\",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.OBJECT,!0),n=t.conversationType,o=t.targetId,a=t.messageUId,s=t.canIncludeExpansion,i=t.channelId,d=\\\"conversationType:\\\"+n+\\\",targetId:\\\"+o+\\\",messageUId:\\\"+a,O.debug(\\\"remove message expansion ->\\\"+d),[4,te.imClient.context.sendExpansionMessage({conversationType:n,targetId:o,messageUId:a,canIncludeExpansion:s,keys:e,channelId:i})];case 1:return(u=l.sent().code)!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(O.warn(\\\"remove message expansion fail ->\\\"+u+\\\":\\\"+oe[u]+\\\",\\\"+d),[2,{code:u,msg:oe[u]}]):[2,{code:u}]}}))}))}function In(e,t){return N(this,void 0,void 0,(function(){var n,o,a,s,i;return U(this,(function(d){switch(d.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"typingContentType\\\",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),n=\\\"conversationType:\\\"+e.conversationType+\\\",targetId:\\\"+e.targetId,O.debug(\\\"send typing status message ->\\\"+n),o={messageType:\\\"RC:TypSts\\\",content:{typingContentType:t},isStatusMessage:!0,channelId:e.channelId},[4,te.imClient.context.sendMessage(e.conversationType,e.targetId,o)];case 1:return a=d.sent(),s=a.code,i=a.data,s===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:s,data:Z(i)}]:(O.warn(\\\"send typing status message fail ->\\\"+s+\\\":\\\"+oe[s]+\\\",\\\"+n),[2,{code:s,msg:oe[s]}])}}))}))}function Sn(e,t,n){return N(this,void 0,void 0,(function(){var o,a,s,i;return U(this,(function(d){switch(d.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"messageUId\\\",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),o=\\\"messageUId:\\\"+t+\\\",targetId:\\\"+e,O.debug(\\\"get message reader ->\\\"+o),[4,te.imClient.context.getMessageReader(e,t,n)];case 1:return a=d.sent(),s=a.code,i=a.data,s===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:s,data:i}]:(O.warn(\\\"get message reader fail ->\\\"+s+\\\":\\\"+oe[s]+\\\",\\\"+o),[2,{code:s,msg:oe[s]}])}}))}))}function Cn(e,t,n,o,a){return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"messageType\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"isPersited\\\",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.BOOLEAN,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"isCounted\\\",n,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.BOOLEAN,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"isStatusMessage\\\",a,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.BOOLEAN,!1),te.imClient.context.registerMessageType(e,t,n,o,a),lt(e,t,n)}function Tn(e){return N(this,void 0,void 0,(function(){var t,n,o;return U(this,(function(a){switch(a.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.usingCppEngine)()?((0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.conversationType\\\",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.targetId\\\",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.channelId\\\",null==e?void 0:e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),[4,te.imClient.context.getFirstUnreadMessage(e.conversationType,e.targetId,e.channelId)]):[2,{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT,msg:oe[_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT]}];case 1:return t=a.sent(),n=t.code,o=t.data,n===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:n,data:o}]:(O.warn(\\\"insertMessage ->code:\\\"+n+\\\",targetId:\\\"+e.targetId),[2,{code:n,msg:oe[n]}])}}))}))}function En(e,t,n){return void 0===n&&(n={}),N(this,void 0,void 0,(function(){var o,a,s,i,c,d,u,l,g,f,m,p,h,v,I,S;return U(this,(function(C){switch(C.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.usingCppEngine)()?(o=t.senderUserId,a=t.messageType,s=t.content,i=t.messageDirection,c=t.messageUId,d=t.canIncludeExpansion,u=t.expansion,l=t.disableNotification,g=t.sentTime,f=t.sentStatus,O.info(\\\"insertMessage ->targetId:\\\"+e.targetId+\\\",conversationType:\\\"+e.conversationType),m=n.isUnread,p=n.searchContent,h={senderUserId:o,messageType:a,content:s,messageDirection:i,sentTime:g,sentStatus:f,searchContent:p,isUnread:m,messageUId:c,disableNotification:l,canIncludeExpansion:d,expansionMsg:JSON.stringify(u),channelId:e.channelId||\\\"\\\"},[4,te.imClient.context.insertMessage(e.conversationType,e.targetId,h)]):[2,{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT,msg:oe[_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT]}];case 1:return v=C.sent(),I=v.code,S=v.data,I===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:I,data:Z(S)}]:(O.warn(\\\"insertMessage ->code:\\\"+I+\\\",targetId:\\\"+e.targetId),[2,{code:I,msg:oe[I]}])}}))}))}function yn(e){return N(this,void 0,void 0,(function(){var t,n,o;return U(this,(function(a){switch(a.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.usingCppEngine)()?[4,te.imClient.context.getMessage(e)]:[2,{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT,msg:oe[_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT]}];case 1:return t=a.sent(),n=t.code,o=t.data,n===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:n,data:Z(o)}]:(O.warn(\\\"getMessage ->code:\\\"+n+\\\",messageId:\\\"+e),[2,{code:n,msg:oe[n]}])}}))}))}function Rn(e){if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.usingCppEngine)())return{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT,msg:oe[_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT]};(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversationType\\\",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"targetId\\\",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0);var t=te.imClient.context.getUnreadMentionedMessages(e.conversationType,e.targetId),n=[];return t&&t.length&&t.forEach((function(e){return n.push(Z(e))})),{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS,data:n}}function Nn(e,t,n,o){return N(this,void 0,void 0,(function(){var a,s,i,d;return U(this,(function(u){switch(u.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.usingCppEngine)()?((0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversationType\\\",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"targetId\\\",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"keyword\\\",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"timestamp\\\",n,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"count\\\",o,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER),1,[4,te.imClient.context.searchMessageByContent(e.conversationType,e.targetId,t,n,o,1,e.channelId)]):[2,{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT,msg:oe[_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT]}];case 1:return a=u.sent(),s=a.code,i=a.data,s===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(d=[],(null==i?void 0:i.messages)&&i.messages.length&&i.messages.forEach((function(e){return d.push(Z(e))})),[2,{code:s,data:{messages:d,count:null==i?void 0:i.count}}]):(O.warn(\\\"searchMessages ->code:\\\"+s+\\\",targetId:\\\"+e.targetId),[2,{code:s,msg:oe[s]}])}}))}))}function Un(e,t,n){return N(this,void 0,void 0,(function(){var o;return U(this,(function(a){switch(a.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.usingCppEngine)()?((0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversationType\\\",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"targetId\\\",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"timestamp\\\",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"cleanSpace\\\",n,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.BOOLEAN),[4,te.imClient.context.deleteMessagesByTimestamp(e.conversationType,e.targetId,t,n,e.channelId)]):[2,{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT,msg:oe[_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT]}];case 1:return(o=a.sent())===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:o}]:(O.warn(\\\"deleteLocalMessagesByTimestamp ->code:\\\"+o+\\\",targetId:\\\"+e.targetId),[2,{code:o,msg:oe[o]}])}}))}))}function On(e){return N(this,void 0,void 0,(function(){var t;return U(this,(function(n){switch(n.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.usingCppEngine)()?(O.info(\\\"clearMessages ->targetId:\\\"+e.targetId+\\\",conversationType:\\\"+e.conversationType),[4,te.imClient.context.clearMessages(e.conversationType,e.targetId,e.channelId)]):[2,{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT,msg:oe[_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT]}];case 1:return(t=n.sent())===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:t}]:(O.warn(\\\"clearMessages ->code:\\\"+t+\\\",targetId:\\\"+e.targetId),[2,{code:t,msg:oe[t]}])}}))}))}function Mn(e,t,n,o){return N(this,void 0,void 0,(function(){var a,s,i;return U(this,(function(c){switch(c.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.usingCppEngine)()?(O.info(\\\"searchConversationByContent ->keyword:\\\"+e),[4,te.imClient.context.searchConversationByContent(e,n,o,t)]):[2,{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT,msg:oe[_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT]}];case 1:return a=c.sent(),s=a.code,i=a.data,s===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:s,data:i}]:(O.warn(\\\"searchConversationByContent ->code:\\\"+s+\\\",keyword:\\\"+e),[2,{code:s,msg:oe[s]}])}}))}))}function _n(e,t){return N(this,void 0,void 0,(function(){var n;return U(this,(function(o){switch(o.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.usingCppEngine)()?(O.info(\\\"clearUnreadCountByTimestamp ->targetId:\\\"+e.targetId+\\\",conversationType:\\\"+e.conversationType),[4,te.imClient.context.clearUnreadCountByTimestamp(e.conversationType,e.targetId,t,e.channelId)]):[2,{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT,msg:oe[_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT]}];case 1:return(n=o.sent())===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:n}]:(O.warn(\\\"clearUnreadCountByTimestamp ->code:\\\"+n+\\\",targetId:\\\"+e.targetId),[2,{code:n,msg:oe[n]}])}}))}))}function wn(e,t){return N(this,void 0,void 0,(function(){var n;return U(this,(function(o){switch(o.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.usingCppEngine)()?((0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"messageId\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"receivedStatus\\\",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),O.info(\\\"setMessageReceivedStatus ->messageId:\\\"+e+\\\",receivedStatus:\\\"+t),[4,te.imClient.context.setMessageReceivedStatus(e,t)]):[2,{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT,msg:oe[_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT]}];case 1:return(n=o.sent())===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:n}]:(O.warn(\\\"setMessageReceivedStatus ->code:\\\"+n+\\\",messageId:\\\"+e),[2,{code:n,msg:oe[n]}])}}))}))}function An(e){return N(this,void 0,void 0,(function(){var t;return U(this,(function(n){switch(n.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"tag.tagId\\\",e.tagId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"tag.tagId\\\",e.tagId,(function(e){return e.length<=10})),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"tag.tagName\\\",e.tagName,(function(e){return e.length<=15})),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"tag.tagName\\\",e.tagName,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),O.info(\\\"createTag ->tagId:\\\"+e.tagId+\\\",tagName:\\\"+e.tagName),[4,te.imClient.context.createTag(e)];case 1:return(t=n.sent().code)===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:t}]:(O.warn(\\\"createTag ->code:\\\"+t+\\\",tagId:\\\"+e.tagId),[2,{code:t,msg:oe[t]}])}}))}))}function xn(e){return N(this,void 0,void 0,(function(){var t;return U(this,(function(n){switch(n.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"tagId\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),O.info(\\\"removeTag ->tagId:\\\"+e),[4,te.imClient.context.removeTag(e)];case 1:return(t=n.sent().code)===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:t}]:(O.warn(\\\"removeTag ->code:\\\"+t+\\\",tagId:\\\"+e),[2,{code:t,msg:oe[t]}])}}))}))}function bn(e){return N(this,void 0,void 0,(function(){var t;return U(this,(function(n){switch(n.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"tag.tagId\\\",e.tagId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"tag.tagName\\\",e.tagName,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"tag.tagName\\\",e.tagName,(function(e){return e.length<=15})),O.info(\\\"updateTag ->tagId:\\\"+e.tagId+\\\",tagName:\\\"+e.tagName),[4,te.imClient.context.updateTag(e)];case 1:return(t=n.sent().code)===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:t}]:(O.warn(\\\"updateTag ->code:\\\"+t+\\\",tagId:\\\"+e.tagId),[2,{code:t,msg:oe[t]}])}}))}))}function Pn(){return N(this,void 0,void 0,(function(){var e,t,n;return U(this,(function(o){switch(o.label){case 0:return[4,te.imClient.context.getTagList()];case 1:return e=o.sent(),t=e.code,n=e.data,t===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS,data:n}]:(O.warn(\\\"getTagList ->code:\\\"+t),[2,{code:t,msg:oe[t]}])}}))}))}function Ln(e){return N(this,void 0,void 0,(function(){var t,n,o;return U(this,(function(a){switch(a.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversationType\\\",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"targetId\\\",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"channelId\\\",e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),O.info(\\\"getTagsForConversation ->targetId:\\\"+e.targetId+\\\",conversationType:\\\"+e.conversationType),[4,te.imClient.context.getTagsForConversation(e)];case 1:return t=a.sent(),n=t.code,o=t.data,n===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:n,data:o}]:[2,{code:n,msg:oe[n]}]}}))}))}function Gn(e,t){return N(this,void 0,void 0,(function(){var n;return U(this,(function(o){switch(o.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"tagId\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversations\\\",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.ARRAY,!0),t.forEach((function(e){(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.conversationType\\\",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.targetId\\\",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.channelId\\\",e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID)})),O.info(\\\"addTagForConversations ->tagId:\\\"+e),[4,te.imClient.context.addTagForConversations(e,t)];case 1:return(n=o.sent().code)===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:n}]:(O.warn(\\\"addTagForConversations ->code:\\\"+n+\\\",tagId:\\\"+e),[2,{code:n,msg:oe[n]}])}}))}))}function Dn(e,t){return N(this,void 0,void 0,(function(){var n;return U(this,(function(o){switch(o.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"tagId\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversations\\\",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.ARRAY,!0),t.forEach((function(e){(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.conversationType\\\",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.targetId\\\",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.channelId\\\",e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID)})),O.info(\\\"removeTagForConversations ->tagId:\\\"+e),[4,te.imClient.context.removeTagForConversations(e,t)];case 1:return(n=o.sent().code)===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:n}]:(O.warn(\\\"removeTagForConversations ->code:\\\"+n+\\\",tagId:\\\"+e),[2,{code:n,msg:oe[n]}])}}))}))}function kn(e,t){return N(this,void 0,void 0,(function(){var n;return U(this,(function(o){switch(o.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.conversationType\\\",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.targetId\\\",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.channelId\\\",e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"tagIds\\\",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.ARRAY,!0),t.forEach((function(e){(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"tagId\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0)})),O.info(\\\"removeTagsForConversation ->tagIds:\\\"+t+\\\",targetId:\\\"+e.targetId+\\\",conversationType:\\\"+e.conversationType),[4,te.imClient.context.removeTagsForConversation(e,t)];case 1:return(n=o.sent().code)===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:n}]:(O.warn(\\\"removeTagsForConversation ->code:\\\"+n+\\\",tagIds:\\\"+t),[2,{code:n,msg:oe[n]}])}}))}))}function Hn(e,t){return N(this,void 0,void 0,(function(){var n;return U(this,(function(o){switch(o.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"tagId\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversations\\\",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.ARRAY,!0),t.forEach((function(e){(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.conversationType\\\",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.targetId\\\",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.channelId\\\",e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID)})),O.info(\\\"removeTagForConversations ->tagId:\\\"+e),[4,te.imClient.context.removeTagForConversations(e,t)];case 1:return(n=o.sent().code)===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:n}]:(O.warn(\\\"removeTagForConversations ->code:\\\"+n+\\\",tagId:\\\"+e),[2,{code:n,msg:oe[n]}])}}))}))}function Bn(e,t,n){return N(this,void 0,void 0,(function(){var o,a,s;return U(this,(function(i){switch(i.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"tagId\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"count\\\",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"startTime\\\",n,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),O.info(\\\"getConversationListByTag ->tagId:\\\"+e),[4,te.imClient.context.getConversationListByTag(e,n,t)];case 1:return o=i.sent(),a=o.code,s=o.data,a===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:a,data:s}]:(O.warn(\\\"getConversationListByTag ->code:\\\"+a+\\\",tagId:\\\"+e),[2,{code:a,msg:oe[a]}])}}))}))}function Fn(e,t){return N(this,void 0,void 0,(function(){var n,o,a;return U(this,(function(s){switch(s.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"tagId\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"containMuted\\\",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.BOOLEAN,!0),O.info(\\\"getUnreadCountByTag ->tagId:\\\"+e),[4,te.imClient.context.getUnreadCountByTag(e,t)];case 1:return n=s.sent(),o=n.code,a=n.data,O.info(o,a),o===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:o,data:a}]:(O.warn(\\\"getUnreadCountByTag ->code:\\\"+o+\\\",tagId:\\\"+e),[2,{code:o,msg:oe[o]}])}}))}))}function qn(e,t,n){return N(this,void 0,void 0,(function(){var o,a;return U(this,(function(s){switch(s.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"tagId\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.targetId\\\",t.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.conversationType\\\",t.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.channelId\\\",t.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"status.isTop\\\",n,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.BOOLEAN,!0),O.info(\\\"setConversationStatusInTag ->tagId:\\\"+e+\\\",targetId:\\\"+t.targetId+\\\",conversationType\\\"+t.conversationType),[4,te.imClient.context.setConversationStatusInTag(e,t,{isTop:n})];case 1:return o=s.sent(),(a=o.code)===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:a}]:(O.warn(\\\"setConversationStatusInTag ->code:\\\"+a+\\\",tagId:\\\"+e),[2,{code:a,msg:oe[a]}])}}))}))}en(_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.FileType.COMBINE_HTML,(function(e,t){return new It({remoteUrl:e.downloadUrl,nameList:t.nameList,summaryList:t.summaryList,conversationType:t.conversationType,user:t.user,extra:t.extra})}));var Vn={COMET:\\\"comet\\\",WEBSOCKET:\\\"websocket\\\"},zn={TEXT:\\\"RC:TxtMsg\\\",VOICE:\\\"RC:VcMsg\\\",HQ_VOICE:\\\"RC:HQVCMsg\\\",IMAGE:\\\"RC:ImgMsg\\\",GIF:\\\"RC:GIFMsg\\\",RICH_CONTENT:\\\"RC:ImgTextMsg\\\",LOCATION:\\\"RC:LBSMsg\\\",FILE:\\\"RC:FileMsg\\\",SIGHT:\\\"RC:SightMsg\\\",COMBINE:\\\"RC:CombineMsg\\\",CHRM_KV_NOTIFY:\\\"RC:chrmKVNotiMsg\\\",LOG_COMMAND:\\\"RC:LogCmdMsg\\\",EXPANSION_NOTIFY:\\\"RC:MsgExMsg\\\",REFERENCE:\\\"RC:ReferenceMsg\\\",RECALL_MESSAGE_TYPE:\\\"RC:RcCmd\\\"};_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.VersionManage.add(\\\"imlib\\\",\\\"5.2.1\\\"),_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.VersionManage.validEngine(\\\"5.2.1\\\")||O.error(\\\"The current engine version '\\\"+_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.VersionManage.getInfo().engine+\\\"' error，imlib required engine version at least '5.2.1'.\\\");\\n\\n\\n//# sourceURL=webpack://@rongcloud/rcliveroomlib/./node_modules/@rongcloud/imlib-next/dist/index.esm.js?\");\n\n/***/ }),\n\n/***/ \"./node_modules/@rongcloud/imlib-next/node_modules/@rongcloud/engine/dist/index.esm.js\":\n/*!*********************************************************************************************!*\\\n  !*** ./node_modules/@rongcloud/imlib-next/node_modules/@rongcloud/engine/dist/index.esm.js ***!\n  \\*********************************************************************************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\neval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   \\\"AEngine\\\": () => (/* binding */ Gr),\\n/* harmony export */   \\\"ANavi\\\": () => (/* binding */ qr),\\n/* harmony export */   \\\"APIContext\\\": () => (/* binding */ Ns),\\n/* harmony export */   \\\"AppStorage\\\": () => (/* binding */ R),\\n/* harmony export */   \\\"AssertRules\\\": () => (/* binding */ We),\\n/* harmony export */   \\\"CONNECTION_TYPE\\\": () => (/* binding */ t),\\n/* harmony export */   \\\"CPP_PROTOCAL_MSGTYPE_OPTION\\\": () => (/* binding */ E),\\n/* harmony export */   \\\"CallLibMsgType\\\": () => (/* binding */ Ye),\\n/* harmony export */   \\\"ChatroomEntryType\\\": () => (/* binding */ Le),\\n/* harmony export */   \\\"ChatroomMemberChangeType\\\": () => (/* binding */ De),\\n/* harmony export */   \\\"CometChannel\\\": () => (/* binding */ Br),\\n/* harmony export */   \\\"ConnectResultCode\\\": () => (/* binding */ Ce),\\n/* harmony export */   \\\"ConnectionStatus\\\": () => (/* binding */ Ie),\\n/* harmony export */   \\\"ConversationType\\\": () => (/* binding */ j),\\n/* harmony export */   \\\"DelayTimer\\\": () => (/* binding */ Rt),\\n/* harmony export */   \\\"ErrorCode\\\": () => (/* binding */ Ee),\\n/* harmony export */   \\\"EventEmitter\\\": () => (/* binding */ _e),\\n/* harmony export */   \\\"FileType\\\": () => (/* binding */ W),\\n/* harmony export */   \\\"HttpMethod\\\": () => (/* binding */ Vr),\\n/* harmony export */   \\\"IM_COMET_PULLMSG_TIMEOUT\\\": () => (/* binding */ y),\\n/* harmony export */   \\\"IM_PING_INTERVAL_TIME\\\": () => (/* binding */ d),\\n/* harmony export */   \\\"IM_PING_MIN_TIMEOUT\\\": () => (/* binding */ p),\\n/* harmony export */   \\\"IM_PING_TIMEOUT\\\": () => (/* binding */ f),\\n/* harmony export */   \\\"IM_SIGNAL_TIMEOUT\\\": () => (/* binding */ l),\\n/* harmony export */   \\\"LiveRole\\\": () => (/* binding */ Ge),\\n/* harmony export */   \\\"LiveType\\\": () => (/* binding */ Be),\\n/* harmony export */   \\\"LogLevel\\\": () => (/* binding */ U),\\n/* harmony export */   \\\"LogType\\\": () => (/* binding */ b),\\n/* harmony export */   \\\"Logger\\\": () => (/* binding */ pe),\\n/* harmony export */   \\\"MAX_MESSAGE_CONTENT_BYTES\\\": () => (/* binding */ _),\\n/* harmony export */   \\\"MINI_COMET_CONNECT_URIS\\\": () => (/* binding */ h),\\n/* harmony export */   \\\"MINI_SOCKET_CONNECT_URIS\\\": () => (/* binding */ c),\\n/* harmony export */   \\\"MentionedType\\\": () => (/* binding */ we),\\n/* harmony export */   \\\"MessageBlockType\\\": () => (/* binding */ ke),\\n/* harmony export */   \\\"MessageDirection\\\": () => (/* binding */ me),\\n/* harmony export */   \\\"MessageType\\\": () => (/* binding */ Se),\\n/* harmony export */   \\\"NAVI_CACHE_DURATION\\\": () => (/* binding */ r),\\n/* harmony export */   \\\"NAVI_REQ_TIMEOUT\\\": () => (/* binding */ s),\\n/* harmony export */   \\\"NotificationStatus\\\": () => (/* binding */ Oe),\\n/* harmony export */   \\\"OperateStatus\\\": () => (/* binding */ Fe),\\n/* harmony export */   \\\"PING_REQ_TIMEOUT\\\": () => (/* binding */ o),\\n/* harmony export */   \\\"PUBLIC_CLOUD_NAVI_URIS\\\": () => (/* binding */ u),\\n/* harmony export */   \\\"PluginContext\\\": () => (/* binding */ ys),\\n/* harmony export */   \\\"RCAssertError\\\": () => (/* binding */ nt),\\n/* harmony export */   \\\"RTCApiType\\\": () => (/* binding */ qe),\\n/* harmony export */   \\\"RTCIdentityChangeType\\\": () => (/* binding */ Ke),\\n/* harmony export */   \\\"RTCJoinType\\\": () => (/* binding */ He),\\n/* harmony export */   \\\"RTCMode\\\": () => (/* binding */ xe),\\n/* harmony export */   \\\"RTCPluginContext\\\": () => (/* binding */ ms),\\n/* harmony export */   \\\"ReceivedStatus\\\": () => (/* binding */ i),\\n/* harmony export */   \\\"SEND_MESSAGE_TYPE_OPTION\\\": () => (/* binding */ v),\\n/* harmony export */   \\\"STATUS_MESSAGE\\\": () => (/* binding */ T),\\n/* harmony export */   \\\"STORAGE_ROOT_KEY\\\": () => (/* binding */ m),\\n/* harmony export */   \\\"TagChangeType\\\": () => (/* binding */ Ss),\\n/* harmony export */   \\\"UploadMethod\\\": () => (/* binding */ Ue),\\n/* harmony export */   \\\"VersionManage\\\": () => (/* binding */ Je),\\n/* harmony export */   \\\"WEB_SOCKET_TIMEOUT\\\": () => (/* binding */ a),\\n/* harmony export */   \\\"WebSocketChannel\\\": () => (/* binding */ xr),\\n/* harmony export */   \\\"appendUrl\\\": () => (/* binding */ k),\\n/* harmony export */   \\\"assert\\\": () => (/* binding */ it),\\n/* harmony export */   \\\"clone\\\": () => (/* binding */ It),\\n/* harmony export */   \\\"cloneByJSON\\\": () => (/* binding */ yt),\\n/* harmony export */   \\\"forEach\\\": () => (/* binding */ dt),\\n/* harmony export */   \\\"formatConnectResponseCode\\\": () => (/* binding */ Et),\\n/* harmony export */   \\\"getBrowser\\\": () => (/* binding */ vt),\\n/* harmony export */   \\\"getMimeKey\\\": () => (/* binding */ at),\\n/* harmony export */   \\\"getUploadFileName\\\": () => (/* binding */ ot),\\n/* harmony export */   \\\"indexOf\\\": () => (/* binding */ pt),\\n/* harmony export */   \\\"isArray\\\": () => (/* binding */ X),\\n/* harmony export */   \\\"isArrayBuffer\\\": () => (/* binding */ $),\\n/* harmony export */   \\\"isBoolean\\\": () => (/* binding */ z),\\n/* harmony export */   \\\"isFunction\\\": () => (/* binding */ ie),\\n/* harmony export */   \\\"isHttpUrl\\\": () => (/* binding */ oe),\\n/* harmony export */   \\\"isInObject\\\": () => (/* binding */ _t),\\n/* harmony export */   \\\"isInclude\\\": () => (/* binding */ gt),\\n/* harmony export */   \\\"isNull\\\": () => (/* binding */ se),\\n/* harmony export */   \\\"isNumber\\\": () => (/* binding */ Z),\\n/* harmony export */   \\\"isObject\\\": () => (/* binding */ ne),\\n/* harmony export */   \\\"isString\\\": () => (/* binding */ J),\\n/* harmony export */   \\\"isUndefined\\\": () => (/* binding */ re),\\n/* harmony export */   \\\"isValidChrmEntryKey\\\": () => (/* binding */ ht),\\n/* harmony export */   \\\"isValidChrmEntryValue\\\": () => (/* binding */ lt),\\n/* harmony export */   \\\"isValidConversationType\\\": () => (/* binding */ ue),\\n/* harmony export */   \\\"isValidExpansion\\\": () => (/* binding */ he),\\n/* harmony export */   \\\"isValidFileType\\\": () => (/* binding */ ce),\\n/* harmony export */   \\\"map\\\": () => (/* binding */ ft),\\n/* harmony export */   \\\"notEmptyArray\\\": () => (/* binding */ te),\\n/* harmony export */   \\\"notEmptyObject\\\": () => (/* binding */ ae),\\n/* harmony export */   \\\"notEmptyString\\\": () => (/* binding */ ee),\\n/* harmony export */   \\\"pushConfigsToJSON\\\": () => (/* binding */ ut),\\n/* harmony export */   \\\"pushJSONToConfigs\\\": () => (/* binding */ ct),\\n/* harmony export */   \\\"todo\\\": () => (/* binding */ P),\\n/* harmony export */   \\\"usingCppEngine\\\": () => (/* binding */ mt),\\n/* harmony export */   \\\"validate\\\": () => (/* binding */ rt),\\n/* harmony export */   \\\"version\\\": () => (/* binding */ Os)\\n/* harmony export */ });\\nvar e;!function(e){e[e.READ=1]=\\\"READ\\\",e[e.LISTENED=2]=\\\"LISTENED\\\",e[e.DOWNLOADED=4]=\\\"DOWNLOADED\\\",e[e.RETRIEVED=8]=\\\"RETRIEVED\\\",e[e.UNREAD=0]=\\\"UNREAD\\\"}(e||(e={}));var t,n,i=e,r=72e5,s=1e4,o=5e3,a=5e3,u=[\\\"https://nav.cn.ronghub.com\\\",\\\"https://nav2-cn.ronghub.com\\\"],c=[\\\"wsproxy.cn.ronghub.com\\\",\\\"wsap-cn.ronghub.com\\\"],h=[\\\"cometproxy-cn.ronghub.com\\\",\\\"mini-cn.ronghub.com\\\"],l=3e4,d=15e3,f=15e3,p=2e3,_=131072,y=45e3,m=\\\"RCV4-\\\",v={\\\"RC:TxtMsg\\\":{isCounted:!0,isPersited:!0},\\\"RC:ImgMsg\\\":{isCounted:!0,isPersited:!0},\\\"RC:VcMsg\\\":{isCounted:!0,isPersited:!0},\\\"RC:ImgTextMsg\\\":{isCounted:!0,isPersited:!0},\\\"RC:FileMsg\\\":{isCounted:!0,isPersited:!0},\\\"RC:HQVCMsg\\\":{isCounted:!0,isPersited:!0},\\\"RC:LBSMsg\\\":{isCounted:!0,isPersited:!0},\\\"RC:PSImgTxtMsg\\\":{isCounted:!0,isPersited:!0},\\\"RC:PSMultiImgTxtMsg\\\":{isCounted:!0,isPersited:!0},\\\"RCJrmf:RpMsg\\\":{isCounted:!0,isPersited:!0},\\\"RCJrmf:RpOpendMsg\\\":{isCounted:!0,isPersited:!0},\\\"RC:CombineMsg\\\":{isCounted:!0,isPersited:!0},\\\"RC:ReferenceMsg\\\":{isCounted:!0,isPersited:!0},\\\"RC:SightMsg\\\":{isCounted:!0,isPersited:!0},\\\"RC:GIFMsg\\\":{isCounted:!0,isPersited:!0},\\\"RC:InfoNtf\\\":{isCounted:!1,isPersited:!0},\\\"RC:ContactNtf\\\":{isCounted:!1,isPersited:!0},\\\"RC:ProfileNtf\\\":{isCounted:!1,isPersited:!0},\\\"RC:CmdNtf\\\":{isCounted:!1,isPersited:!0},\\\"RC:GrpNtf\\\":{isCounted:!1,isPersited:!0},\\\"RC:RcCmd\\\":{isCounted:!1,isPersited:!0},\\\"RC:CmdMsg\\\":{isCounted:!1,isPersited:!1},\\\"RC:TypSts\\\":{isCounted:!1,isPersited:!1},\\\"RC:PSCmd\\\":{isCounted:!1,isPersited:!1},\\\"RC:SRSMsg\\\":{isCounted:!1,isPersited:!1},\\\"RC:RRReqMsg\\\":{isCounted:!1,isPersited:!1},\\\"RC:RRRspMsg\\\":{isCounted:!1,isPersited:!1},\\\"RC:CsChaR\\\":{isCounted:!1,isPersited:!1},\\\"RC:CSCha\\\":{isCounted:!1,isPersited:!1},\\\"RC:CsEva\\\":{isCounted:!1,isPersited:!1},\\\"RC:CsContact\\\":{isCounted:!1,isPersited:!1},\\\"RC:CsHs\\\":{isCounted:!1,isPersited:!1},\\\"RC:CsHsR\\\":{isCounted:!1,isPersited:!1},\\\"RC:CsSp\\\":{isCounted:!1,isPersited:!1},\\\"RC:CsEnd\\\":{isCounted:!1,isPersited:!1},\\\"RC:CsUpdate\\\":{isCounted:!1,isPersited:!1},\\\"RC:ReadNtf\\\":{isCounted:!1,isPersited:!1},\\\"RC:chrmKVNotiMsg\\\":{isCounted:!1,isPersited:!1},\\\"RC:VCAccept\\\":{isCounted:!1,isPersited:!1},\\\"RC:VCRinging\\\":{isCounted:!1,isPersited:!1},\\\"RC:VCSummary\\\":{isCounted:!1,isPersited:!1},\\\"RC:VCHangup\\\":{isCounted:!1,isPersited:!1},\\\"RC:VCInvite\\\":{isCounted:!1,isPersited:!1},\\\"RC:VCModifyMedia\\\":{isCounted:!1,isPersited:!1},\\\"RC:VCModifyMem\\\":{isCounted:!1,isPersited:!1},\\\"RC:MsgExMsg\\\":{isCounted:!1,isPersited:!1},\\\"RC:RRMsg\\\":{isCounted:!1,isPersited:!1},\\\"RC:LogCmdMsg\\\":{isCounted:!1,isPersited:!1},\\\"RC:InterceptMsg\\\":{isCounted:!1,isPersited:!1}},E={\\\"RC:DizNtf\\\":{isCounted:!1,isPersited:!1}},T=[\\\"RC:TypSts\\\",\\\"RC:InterceptMsg\\\"];!function(e){e.WEBSOCKET=\\\"websocket\\\",e.COMET=\\\"comet\\\"}(t||(t={}));var I=function(e){return n||(n={set:function(t,n){e.localStorage.setItem(t,JSON.stringify(n))},get:function(t){var n;try{n=JSON.parse(e.localStorage.getItem(t))}catch(e){n=null}return n},remove:function(t){return e.localStorage.removeItem(t)},getKeys:function(){var t=[];for(var n in e.localStorage)t.push(n);return t}}),n},C=function(){function e(e){this._caches={},e&&(this._caches=e)}return e.prototype.set=function(e,t){this._caches[e]=t},e.prototype.remove=function(e){var t=this.get(e);return delete this._caches[e],t},e.prototype.get=function(e){return this._caches[e]},e.prototype.getKeys=function(){var e=[];for(var t in this._caches)e.push(t);return e},e}(),R=function(){function e(e,t){var n,i=t?\\\"RCV4-\\\"+t:\\\"RCV4-\\\";this._rootStorage=I(e);var r=this._rootStorage.get(i)||{};this._cache=new C(((n={})[i]=r,n)),this._storageKey=i}return e.prototype._get=function(){var e=this._storageKey;return this._cache.get(e)||{}},e.prototype._set=function(e){var t=this._storageKey;e=e||{},this._cache.set(t,e),this._rootStorage.set(t,e)},e.prototype.set=function(e,t){var n=this._get();n[e]=t,this._set(n)},e.prototype.remove=function(e){var t=this._get();delete t[e],this._set(t)},e.prototype.clear=function(){var e=this._storageKey;this._rootStorage.remove(e),this._cache.remove(e)},e.prototype.get=function(e){return this._get()[e]},e.prototype.getKeys=function(){var e=this._get(),t=[];for(var n in e)t.push(n);return t},e.prototype.getValues=function(){return this._get()||{}},e}(),S=function(e,t){return(S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function N(e,t){if(\\\"function\\\"!=typeof t&&null!==t)throw new TypeError(\\\"Class extends value \\\"+String(t)+\\\" is not a constructor or null\\\");function n(){this.constructor=e}S(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var O=function(){return(O=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function M(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{u(i.next(e))}catch(e){s(e)}}function a(e){try{u(i.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}u((i=i.apply(e,t||[])).next())}))}function w(e,t){var n,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},\\\"function\\\"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError(\\\"Generator is already executing.\\\");for(;o;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function A(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e}var U,b,L=function(e){function t(t){return e.call(this,\\\"TODO => \\\"+t)||this}return N(t,e),t}(Error),P=function(e){return new L(e)},D=function(e,t,n){if(void 0===t||void 0===n)return e.toUpperCase();var i=e.slice(t,n);return e=e.replace(i,(function(e){return e.toUpperCase()}))},V=function(e,t){void 0===t&&(t=\\\"utf-8\\\");var n,i=0;if(\\\"utf-16\\\"===t)for(var r=0,s=e.length;r<s;r++)i+=(n=e.charCodeAt(r))<=65535?2:4;else for(r=0,s=e.length;r<s;r++)i+=(n=e.charCodeAt(r))<127?1:n<=2047?2:n<=65535?3:4;return i},k=function(e,t){if(e=e.replace(/\\\\?$/,\\\"\\\"),!t)return e;var n=Object.keys(t).map((function(e){return e+\\\"=\\\"+t[e]})).filter((function(e){return!!e}));return n.length?[e,n.join(\\\"&\\\")].join(\\\"?\\\"):e},x=function(e){return e.match(/\\\\d+(\\\\.\\\\d+){2}/)[0]};!function(e){e[e.LOG=0]=\\\"LOG\\\",e[e.DEBUG=0]=\\\"DEBUG\\\",e[e.INFO=1]=\\\"INFO\\\",e[e.WARN=2]=\\\"WARN\\\",e[e.ERROR=3]=\\\"ERROR\\\",e[e.FATAL=4]=\\\"FATAL\\\",e[e.NONE=1e3]=\\\"NONE\\\"}(U||(U={})),function(e){e.IM=\\\"IM\\\",e.RTC=\\\"RTC\\\"}(b||(b={}));var B=\\\"RC_Logs\\\";function G(e){var t=e.target.result;1===e.oldVersion&&t.deleteObjectStore(B),function(e,t,n){var i;if(!e.objectStoreNames.contains(t)){var r=O({},n.objectStoreParams);i=e.createObjectStore(t,r),n.indexs&&n.indexs.length>0&&n.indexs.forEach((function(e){i.createIndex(e.indexName,e.key,{unique:e.unique})}))}}(t,B,{indexs:[{indexName:\\\"time\\\",key:\\\"time\\\",unique:!1}],objectStoreParams:{autoIncrement:!0}})}var F,q=function(){function e(){}return e.init=function(){if(\\\"undefined\\\"!=typeof window&&window&&window.indexedDB){var t=window.indexedDB.open(\\\"RC_ENGINE_DB\\\",2);t.onerror=function(e){console.warn(\\\"open indexDB request failed \\\"+e.target.error)},t.onsuccess=function(t){e._db=t.target.result,e._db&&(e._db.onclose=function(t){var n;console.warn(\\\"The database \\\"+(null===(n=e._db)||void 0===n?void 0:n.name)+\\\" has unexpectedly closed.\\\",t),e._db=null,window.__RCIndexDBInstance=null},e._db.onerror=function(t){var n;console.warn(\\\"The database \\\"+(null===(n=e._db)||void 0===n?void 0:n.name)+\\\" has opening error.\\\",t),e._db=null,window.__RCIndexDBInstance=null},e._db.onabort=function(t){var n;console.warn(\\\"The database \\\"+(null===(n=e._db)||void 0===n?void 0:n.name)+\\\" has opening aborted.\\\",t),e._db=null,window.__RCIndexDBInstance=null}),window.__RCIndexDBInstance=new e},t.onupgradeneeded=function(t){e._db=t.target.result,G(t)}}else console.debug(\\\"IndexDB is not currently supported in the environment!\\\")},e.getInstance=function(){return window&&window.__RCIndexDBInstance?window.__RCIndexDBInstance:null},e.prototype.addList=function(t,n){return new Promise((function(i){if(e._db){var r=e._db.transaction([t],\\\"readwrite\\\"),s=r.objectStore(t);n.forEach((function(e){null==s||s.add(e)})),r.oncomplete=function(e){i(!0)},r.onerror=function(e){i(!1)}}else i(!1)}))},e.prototype.getRangeData=function(t,n,i,r){return new Promise((function(s){if(e._db){var o=e._db.transaction([t],\\\"readwrite\\\").objectStore(t),a=IDBKeyRange.bound(i,r),u=o.index(n),c=[],h=u.openCursor(a);h.onsuccess=function(e){var t=e.target.result;t?(c.push(t.value),t.continue()):s(c)},h.onerror=function(e){console.error(e),s([])}}else s([])}))},e.prototype.getCount=function(t,n){return new Promise((function(n){if(e._db){var i=e._db.transaction([t],\\\"readonly\\\").objectStore(t).count();i.onsuccess=function(){n(i.result)},i.onerror=function(e){console.error(e),n(0)}}else n(0)}))},e.prototype.removeFirstData=function(t,n,i){return new Promise((function(n){if(e._db){var r=e._db.transaction([t],\\\"readwrite\\\").objectStore(t),s=r.getAllKeys(IDBKeyRange.lowerBound(0),i);s.onsuccess=function(){var e=s.result;e.length>0&&(r.delete(IDBKeyRange.bound(e[0],e[e.length-1])).onsuccess=function(){n(!0)})}}else n(!1)}))},e._db=null,e}(),K=function(){return\\\"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\\\".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return(\\\"x\\\"===e?t:3&t|8).toString(16)}))},H=function(){var e=K();if(e=e.replace(/-/g,\\\"\\\")+\\\"a\\\",(e=function(e){var t=\\\"0123456789abcdefghigklmnopqrstuvwxyzABCDEFGHIGKLMNOPQRSTUVWXYZa0\\\".split(\\\"\\\"),n=t.length+1,i=+e,r=[];do{var s=i%n;i=(i-s)/n,r.unshift(t[s])}while(i);return r.join(\\\"\\\")}(e=parseInt(e,16))).length>22&&(e=e.slice(0,22)),e.length<22)for(var t=22-e.length,n=0;n<t;n++)e+=\\\"0\\\";return e};!function(e){e[e.NONE=0]=\\\"NONE\\\",e[e.PRIVATE=1]=\\\"PRIVATE\\\",e[e.DISCUSSION=2]=\\\"DISCUSSION\\\",e[e.GROUP=3]=\\\"GROUP\\\",e[e.CHATROOM=4]=\\\"CHATROOM\\\",e[e.CUSTOMER_SERVICE=5]=\\\"CUSTOMER_SERVICE\\\",e[e.SYSTEM=6]=\\\"SYSTEM\\\",e[e.APP_PUBLIC_SERVICE=7]=\\\"APP_PUBLIC_SERVICE\\\",e[e.PUBLIC_SERVICE=8]=\\\"PUBLIC_SERVICE\\\",e[e.ULTRA_GROUP=10]=\\\"ULTRA_GROUP\\\",e[e.RTC_ROOM=12]=\\\"RTC_ROOM\\\"}(F||(F={}));var Y,j=F;!function(e){e[e.IMAGE=1]=\\\"IMAGE\\\",e[e.AUDIO=2]=\\\"AUDIO\\\",e[e.VIDEO=3]=\\\"VIDEO\\\",e[e.FILE=4]=\\\"FILE\\\",e[e.SIGHT=5]=\\\"SIGHT\\\",e[e.COMBINE_HTML=6]=\\\"COMBINE_HTML\\\"}(Y||(Y={}));var Q,W=Y,J=function(e){return\\\"string\\\"==typeof e},z=function(e){return\\\"boolean\\\"==typeof e},Z=function(e){return\\\"number\\\"==typeof e&&!isNaN(e)},X=function(e){return-1!==Object.prototype.toString.call(e).indexOf(\\\"Array\\\")},$=function(e){return\\\"[object ArrayBuffer]\\\"===Object.prototype.toString.call(e)},ee=function(e){return J(e)&&e.length>0},te=function(e){return X(e)&&e.length>0},ne=function(e){return\\\"[object Object]\\\"===Object.prototype.toString.call(e)},ie=function(e){return\\\"[object Function]\\\"===Object.prototype.toString.call(e)},re=function(e){return void 0===e||\\\"[object Undefined]\\\"===Object.prototype.toString.call(e)},se=function(e){return\\\"[object Null]\\\"===Object.prototype.toString.call(e)},oe=function(e){return J(e)&&/https?:\\\\/\\\\//.test(e)},ae=function(e){for(var t in e)return!0;return!1},ue=function(e){return Z(e)&&Object.prototype.hasOwnProperty.call(j,e)},ce=function(e){return Z(e)&&Object.prototype.hasOwnProperty.call(W,e)},he=function(e){var t=!1;if(ne(e))for(var n in e)if(t=J(n)&&!/^[A-Za-z0-9_=+-]+$/.test(n))break;return t},le={};console&&((Q={})[U.DEBUG]=console.debug.bind(console),Q[U.INFO]=console.info.bind(console),Q[U.WARN]=console.warn.bind(console),Q[U.ERROR]=console.error.bind(console),Q[U.FATAL]=console.log.bind(console),le=Q);var de,fe=function(e){return J(e)||Z(e)||re(e)||z(e)?e:e instanceof Error?JSON.stringify({name:e.name,message:e.message,stack:e.stack}):JSON.stringify(e)},pe=function(){function e(e,t,n){this.tag=e,this.type=t,this.initiator=n,this._outLevel=U.WARN,this.debug=this.log.bind(this,U.DEBUG),this.info=this.log.bind(this,U.INFO),this.warn=this.log.bind(this,U.WARN),this.error=this.log.bind(this,U.ERROR),this.fatal=this.log.bind(this,U.FATAL)}return e.init=function(t){e.userId=t},e.reset=function(){e.userId=\\\"\\\"},e.prototype._defaultStdout=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];le[e]&&le[e].apply(le,A([t+\\\":\\\"],n))},e.prototype.__pushLocalLog=function(t,n,i){var r;r=this.type?this.type:[\\\"RCRTCLog\\\",\\\"RCCall\\\",\\\"RCRTC\\\",\\\"RTC-A\\\"].includes(this.tag)?b.RTC:b.IM;var s=Date.now();V(n)>=1e3&&(n=function(e,t,n){if(void 0===n&&(n=\\\"utf-8\\\"),!e||!t)return\\\"\\\";var i=\\\"utf-8\\\"===n?3:2,r=0,s=0,o=\\\"\\\";for(s=0;s<e.length;s++){if(e.charCodeAt(s)>255?r+=i:r++,r>t)return o;o+=e.charAt(s)}return e}(n,1e3));var o=JSON.stringify({message:n,userId:e.userId}).replace(/\\\"/g,'\\\"\\\"'),a=/^[\\\\w]+-[\\\\w]+-[\\\\w]+?/.test(i)?i:(this.initiator||\\\"L\\\")+\\\"-\\\"+i+\\\"-O\\\",u={sessionId:e.sessionId,time:s,level:4-t,content:e.sessionId+\\\",\\\"+Date.now()+\\\",\\\"+r+\\\",\\\"+(4-t)+\\\",\\\"+a+',\\\"'+o+'\\\"\\\\n',userId:e.userId};e.databaseLogList.push(u),(e.databaseLogList.length>=100||t===U.FATAL)&&this.__insertLogIntoDatabase()},e.prototype.__insertLogIntoDatabase=function(){return M(this,void 0,void 0,(function(){var t,n,i;return w(this,(function(r){switch(r.label){case 0:return t=A([],e.databaseLogList),e.databaseLogList=[],(n=q.getInstance())?[4,n.addList(B,t)]:[3,3];case 1:return i=r.sent(),[4,n.getCount(B,\\\"time\\\")];case 2:return r.sent()>1e5&&n.removeFirstData(B,\\\"time\\\",2e3),[2,i];case 3:return[2,!1]}}))}))},e.prototype.setLogLevel=function(e){this._outLevel=\\\"number\\\"!=typeof e?U.WARN:e},e.prototype.setLogStdout=function(e){this._logStdout=e},e.prototype.log=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(e>U.DEBUG&&this.__pushLocalLog(e,t.map(fe).join(\\\" \\\"),this.tag),!(e<this._outLevel)){var i=(new Date).toISOString()+\\\"[\\\"+this.tag+\\\"][\\\"+U[e]+\\\"]\\\",r=i+\\\" - \\\"+t.map(fe).join(\\\" \\\");this._logStdout?this._logStdout(e,r):this._stdout?this._stdout(e,r):this._defaultStdout.apply(this,A([e,i],t))}},e.prototype.reportLog=function(t,n,i){this.__pushLocalLog(4-t,i,n);var r=JSON.stringify({message:i}).replace(/\\\"/g,'\\\"\\\"');r='\\\"'+r+'\\\"';var s={level:t,content:[e.sessionId,Date.now(),this.type,t,n,r].join()+\\\"\\\\n\\\"};e.realTimeLogList.push(s),e.realTimeLogList.length>=600&&(e.realTimeLogList=e.realTimeLogList.slice(-500))},e.prototype.set=function(e,t){this.warn(\\\"logger.set has being deprecated!\\\")},e.prototype.setStdout=function(e){this._stdout=e},e.prototype.__clearRealTimeLog=function(){e.realTimeLogList=[]},e.databaseLogList=[],e.realTimeLogList=[],e.sessionId=H(),e.userId=\\\"\\\",e}(),ge=new pe(\\\"RCLog\\\"),_e=function(){function e(){this._map={}}return e.prototype.on=function(e,t,n){var i=this._map[e]||(this._map[e]=[]);i.some((function(e){return e.listener===t&&e.target===n}))||i.push({listener:t,target:n})},e.prototype.once=function(e,t,n){var i=this._map[e]||(this._map[e]=[]);i.some((function(e){return e.listener===t&&e.target===n}))||i.push({listener:t,target:n,once:!0})},e.prototype.off=function(e,t,n){var i=this._map[e];i&&((i=i.filter((function(e){return e.listener!==t||e.target!==n}))).length?this._map[e]=i:delete this._map[e])},e.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=this._map[e];if(i)for(var r=i.length-1;r>=0;r-=1){var s=i[r],o=s.target,a=s.once,u=s.listener;a&&i.splice(r,1);try{u.call.apply(u,A([o],t))}catch(e){ge.error(e)}}},e.prototype.removeAll=function(e){delete this._map[e]},e.prototype.clear=function(){Object.keys(this._map).forEach(this.removeAll,this)},e}();!function(e){e[e.SEND=1]=\\\"SEND\\\",e[e.RECEIVE=2]=\\\"RECEIVE\\\"}(de||(de={}));var ye,me=de;!function(e){e[e.TIMEOUT=-1]=\\\"TIMEOUT\\\",e[e.UNKNOWN=-2]=\\\"UNKNOWN\\\",e[e.PARAMETER_ERROR=-3]=\\\"PARAMETER_ERROR\\\",e[e.EXTRA_METHOD_UNDEFINED=-4]=\\\"EXTRA_METHOD_UNDEFINED\\\",e[e.MAIN_PROCESS_ERROR=-5]=\\\"MAIN_PROCESS_ERROR\\\",e[e.PARAMETER_CHANGED=-6]=\\\"PARAMETER_CHANGED\\\",e[e.SUCCESS=0]=\\\"SUCCESS\\\",e[e.RC_MSG_UNAUTHORIZED=20406]=\\\"RC_MSG_UNAUTHORIZED\\\",e[e.RC_DISCUSSION_GROUP_ID_INVALID=20407]=\\\"RC_DISCUSSION_GROUP_ID_INVALID\\\",e[e.SEND_FREQUENCY_TOO_FAST=20604]=\\\"SEND_FREQUENCY_TOO_FAST\\\",e[e.NOT_IN_DISCUSSION=21406]=\\\"NOT_IN_DISCUSSION\\\",e[e.FORBIDDEN_IN_GROUP=22408]=\\\"FORBIDDEN_IN_GROUP\\\",e[e.RECALL_MESSAGE=25101]=\\\"RECALL_MESSAGE\\\",e[e.NOT_IN_GROUP=22406]=\\\"NOT_IN_GROUP\\\",e[e.NOT_IN_CHATROOM=23406]=\\\"NOT_IN_CHATROOM\\\",e[e.FORBIDDEN_IN_CHATROOM=23408]=\\\"FORBIDDEN_IN_CHATROOM\\\",e[e.RC_CHATROOM_USER_KICKED=23409]=\\\"RC_CHATROOM_USER_KICKED\\\",e[e.RC_CHATROOM_NOT_EXIST=23410]=\\\"RC_CHATROOM_NOT_EXIST\\\",e[e.RC_CHATROOM_IS_FULL=23411]=\\\"RC_CHATROOM_IS_FULL\\\",e[e.RC_CHATROOM_PATAMETER_INVALID=23412]=\\\"RC_CHATROOM_PATAMETER_INVALID\\\",e[e.CHATROOM_GET_HISTORYMSG_ERROR=23413]=\\\"CHATROOM_GET_HISTORYMSG_ERROR\\\",e[e.CHATROOM_NOT_OPEN_HISTORYMSG_STORE=23414]=\\\"CHATROOM_NOT_OPEN_HISTORYMSG_STORE\\\",e[e.CHATROOM_KV_EXCEED=23423]=\\\"CHATROOM_KV_EXCEED\\\",e[e.CHATROOM_KV_OVERWRITE_INVALID=23424]=\\\"CHATROOM_KV_OVERWRITE_INVALID\\\",e[e.CHATROOM_KV_STORE_NOT_OPEN=23426]=\\\"CHATROOM_KV_STORE_NOT_OPEN\\\",e[e.CHATROOM_KEY_NOT_EXIST=23427]=\\\"CHATROOM_KEY_NOT_EXIST\\\",\\n/*!\\n     聊天室设置 KV 失败，出现在两人或者多端同时操作一个 kv。\\n     如果出现该错误，为避免和其他端同时操作，请延时一定时间再试\\n    */\\ne[e.CHATROOM_KV_SET_ERROR=23431]=\\\"CHATROOM_KV_SET_ERROR\\\",e[e.SENSITIVE_SHIELD=21501]=\\\"SENSITIVE_SHIELD\\\",e[e.SENSITIVE_REPLACE=21502]=\\\"SENSITIVE_REPLACE\\\",e[e.JOIN_IN_DISCUSSION=21407]=\\\"JOIN_IN_DISCUSSION\\\",e[e.CREATE_DISCUSSION=21408]=\\\"CREATE_DISCUSSION\\\",e[e.INVITE_DICUSSION=21409]=\\\"INVITE_DICUSSION\\\",e[e.GET_USERINFO_ERROR=23407]=\\\"GET_USERINFO_ERROR\\\",e[e.REJECTED_BY_BLACKLIST=405]=\\\"REJECTED_BY_BLACKLIST\\\",e[e.RC_NET_CHANNEL_INVALID=30001]=\\\"RC_NET_CHANNEL_INVALID\\\",e[e.RC_NET_UNAVAILABLE=30002]=\\\"RC_NET_UNAVAILABLE\\\",e[e.RC_MSG_RESP_TIMEOUT=30003]=\\\"RC_MSG_RESP_TIMEOUT\\\",e[e.RC_HTTP_SEND_FAIL=30004]=\\\"RC_HTTP_SEND_FAIL\\\",e[e.RC_HTTP_REQ_TIMEOUT=30005]=\\\"RC_HTTP_REQ_TIMEOUT\\\",e[e.RC_HTTP_RECV_FAIL=30006]=\\\"RC_HTTP_RECV_FAIL\\\",e[e.RC_NAVI_RESOURCE_ERROR=30007]=\\\"RC_NAVI_RESOURCE_ERROR\\\",e[e.RC_NODE_NOT_FOUND=30008]=\\\"RC_NODE_NOT_FOUND\\\",e[e.RC_DOMAIN_NOT_RESOLVE=30009]=\\\"RC_DOMAIN_NOT_RESOLVE\\\",e[e.RC_SOCKET_NOT_CREATED=30010]=\\\"RC_SOCKET_NOT_CREATED\\\",e[e.RC_SOCKET_DISCONNECTED=30011]=\\\"RC_SOCKET_DISCONNECTED\\\",e[e.RC_PING_SEND_FAIL=30012]=\\\"RC_PING_SEND_FAIL\\\",e[e.RC_PONG_RECV_FAIL=30013]=\\\"RC_PONG_RECV_FAIL\\\",e[e.RC_MSG_SEND_FAIL=30014]=\\\"RC_MSG_SEND_FAIL\\\",e[e.RC_MSG_CONTENT_EXCEED_LIMIT=30016]=\\\"RC_MSG_CONTENT_EXCEED_LIMIT\\\",e[e.RC_CONN_ACK_TIMEOUT=31e3]=\\\"RC_CONN_ACK_TIMEOUT\\\",e[e.RC_CONN_PROTO_VERSION_ERROR=31001]=\\\"RC_CONN_PROTO_VERSION_ERROR\\\",e[e.RC_CONN_ID_REJECT=31002]=\\\"RC_CONN_ID_REJECT\\\",e[e.RC_CONN_SERVER_UNAVAILABLE=31003]=\\\"RC_CONN_SERVER_UNAVAILABLE\\\",e[e.RC_CONN_USER_OR_PASSWD_ERROR=31004]=\\\"RC_CONN_USER_OR_PASSWD_ERROR\\\",e[e.RC_CONN_NOT_AUTHRORIZED=31005]=\\\"RC_CONN_NOT_AUTHRORIZED\\\",e[e.RC_CONN_REDIRECTED=31006]=\\\"RC_CONN_REDIRECTED\\\",e[e.RC_CONN_PACKAGE_NAME_INVALID=31007]=\\\"RC_CONN_PACKAGE_NAME_INVALID\\\",e[e.RC_CONN_APP_BLOCKED_OR_DELETED=31008]=\\\"RC_CONN_APP_BLOCKED_OR_DELETED\\\",e[e.RC_CONN_USER_BLOCKED=31009]=\\\"RC_CONN_USER_BLOCKED\\\",e[e.RC_DISCONN_KICK=31010]=\\\"RC_DISCONN_KICK\\\",e[e.RC_DISCONN_EXCEPTION=31011]=\\\"RC_DISCONN_EXCEPTION\\\",e[e.RC_APP_AUTH_NOT_PASS=31026]=\\\"RC_APP_AUTH_NOT_PASS\\\",e[e.RC_OTP_USED=31027]=\\\"RC_OTP_USED\\\",e[e.RC_PLATFORM_ERROR=31028]=\\\"RC_PLATFORM_ERROR\\\",e[e.RC_QUERY_ACK_NO_DATA=32001]=\\\"RC_QUERY_ACK_NO_DATA\\\",e[e.RC_MSG_DATA_INCOMPLETE=32002]=\\\"RC_MSG_DATA_INCOMPLETE\\\",e[e.BIZ_ERROR_CLIENT_NOT_INIT=33001]=\\\"BIZ_ERROR_CLIENT_NOT_INIT\\\",e[e.BIZ_ERROR_DATABASE_ERROR=33002]=\\\"BIZ_ERROR_DATABASE_ERROR\\\",e[e.BIZ_ERROR_INVALID_PARAMETER=33003]=\\\"BIZ_ERROR_INVALID_PARAMETER\\\",e[e.BIZ_ERROR_NO_CHANNEL=33004]=\\\"BIZ_ERROR_NO_CHANNEL\\\",e[e.BIZ_ERROR_RECONNECT_SUCCESS=33005]=\\\"BIZ_ERROR_RECONNECT_SUCCESS\\\",e[e.BIZ_ERROR_CONNECTING=33006]=\\\"BIZ_ERROR_CONNECTING\\\",e[e.MSG_ROAMING_SERVICE_UNAVAILABLE=33007]=\\\"MSG_ROAMING_SERVICE_UNAVAILABLE\\\",e[e.MSG_INSERT_ERROR=33008]=\\\"MSG_INSERT_ERROR\\\",e[e.MSG_DEL_ERROR=33009]=\\\"MSG_DEL_ERROR\\\",e[e.TAG_EXISTS=33101]=\\\"TAG_EXISTS\\\",e[e.TAG_NOT_EXIST=33100]=\\\"TAG_NOT_EXIST\\\",e[e.NO_TAG_IN_CONVER=33102]=\\\"NO_TAG_IN_CONVER\\\",e[e.CONVER_REMOVE_ERROR=34001]=\\\"CONVER_REMOVE_ERROR\\\",e[e.CONVER_GETLIST_ERROR=34002]=\\\"CONVER_GETLIST_ERROR\\\",e[e.CONVER_SETOP_ERROR=34003]=\\\"CONVER_SETOP_ERROR\\\",e[e.CONVER_TOTAL_UNREAD_ERROR=34004]=\\\"CONVER_TOTAL_UNREAD_ERROR\\\",e[e.CONVER_TYPE_UNREAD_ERROR=34005]=\\\"CONVER_TYPE_UNREAD_ERROR\\\",e[e.CONVER_ID_TYPE_UNREAD_ERROR=34006]=\\\"CONVER_ID_TYPE_UNREAD_ERROR\\\",e[e.CONVER_CLEAR_ERROR=34007]=\\\"CONVER_CLEAR_ERROR\\\",e[e.EXPANSION_LIMIT_EXCEET=34010]=\\\"EXPANSION_LIMIT_EXCEET\\\",e[e.MESSAGE_KV_NOT_SUPPORT=34008]=\\\"MESSAGE_KV_NOT_SUPPORT\\\",e[e.CLEAR_HIS_TIME_ERROR=34011]=\\\"CLEAR_HIS_TIME_ERROR\\\",e[e.CONVER_OUT_LIMIT_ERROR=34013]=\\\"CONVER_OUT_LIMIT_ERROR\\\",e[e.CONVER_GET_ERROR=35021]=\\\"CONVER_GET_ERROR\\\",e[e.GROUP_SYNC_ERROR=35001]=\\\"GROUP_SYNC_ERROR\\\",e[e.GROUP_MATCH_ERROR=35002]=\\\"GROUP_MATCH_ERROR\\\",e[e.READ_RECEIPT_ERROR=35003]=\\\"READ_RECEIPT_ERROR\\\",e[e.PACKAGE_ENVIRONMENT_ERROR=35006]=\\\"PACKAGE_ENVIRONMENT_ERROR\\\",e[e.CAN_NOT_RECONNECT=35007]=\\\"CAN_NOT_RECONNECT\\\",e[e.SERVER_UNAVAILABLE=35008]=\\\"SERVER_UNAVAILABLE\\\",e[e.HOSTNAME_ERROR=35009]=\\\"HOSTNAME_ERROR\\\",e[e.HAS_OHTER_SAME_CLIENT_ON_LINE=35010]=\\\"HAS_OHTER_SAME_CLIENT_ON_LINE\\\",e[e.METHOD_NOT_AVAILABLE=35011]=\\\"METHOD_NOT_AVAILABLE\\\",e[e.METHOD_NOT_SUPPORT=35012]=\\\"METHOD_NOT_SUPPORT\\\",e[e.MSG_LIMIT_ERROR=35013]=\\\"MSG_LIMIT_ERROR\\\",e[e.METHOD_ONLY_SUPPORT_ULTRA_GROUP=35014]=\\\"METHOD_ONLY_SUPPORT_ULTRA_GROUP\\\",e[e.UPLOAD_FILE_FAILED=35020]=\\\"UPLOAD_FILE_FAILED\\\",e[e.CHATROOM_ID_ISNULL=36001]=\\\"CHATROOM_ID_ISNULL\\\",e[e.CHARTOOM_JOIN_ERROR=36002]=\\\"CHARTOOM_JOIN_ERROR\\\",e[e.CHATROOM_HISMESSAGE_ERROR=36003]=\\\"CHATROOM_HISMESSAGE_ERROR\\\",e[e.CHATROOM_KV_NOT_FOUND=36004]=\\\"CHATROOM_KV_NOT_FOUND\\\",e[e.BLACK_ADD_ERROR=37001]=\\\"BLACK_ADD_ERROR\\\",e[e.BLACK_GETSTATUS_ERROR=37002]=\\\"BLACK_GETSTATUS_ERROR\\\",e[e.BLACK_REMOVE_ERROR=37003]=\\\"BLACK_REMOVE_ERROR\\\",e[e.DRAF_GET_ERROR=38001]=\\\"DRAF_GET_ERROR\\\",e[e.DRAF_SAVE_ERROR=38002]=\\\"DRAF_SAVE_ERROR\\\",e[e.DRAF_REMOVE_ERROR=38003]=\\\"DRAF_REMOVE_ERROR\\\",e[e.SUBSCRIBE_ERROR=39001]=\\\"SUBSCRIBE_ERROR\\\",e[e.NOT_SUPPORT=39002]=\\\"NOT_SUPPORT\\\",e[e.QNTKN_FILETYPE_ERROR=41001]=\\\"QNTKN_FILETYPE_ERROR\\\",e[e.QNTKN_GET_ERROR=41002]=\\\"QNTKN_GET_ERROR\\\",e[e.COOKIE_ENABLE=51001]=\\\"COOKIE_ENABLE\\\",e[e.GET_MESSAGE_BY_ID_ERROR=61001]=\\\"GET_MESSAGE_BY_ID_ERROR\\\",e[e.HAVNODEVICEID=24001]=\\\"HAVNODEVICEID\\\",e[e.DEVICEIDISHAVE=24002]=\\\"DEVICEIDISHAVE\\\",e[e.FEILD=24009]=\\\"FEILD\\\",e[e.VOIPISNULL=24013]=\\\"VOIPISNULL\\\",e[e.NOENGINETYPE=24010]=\\\"NOENGINETYPE\\\",e[e.NULLCHANNELNAME=24011]=\\\"NULLCHANNELNAME\\\",e[e.VOIPDYANMICERROR=24012]=\\\"VOIPDYANMICERROR\\\",e[e.NOVOIP=24014]=\\\"NOVOIP\\\",e[e.INTERNALERRROR=24015]=\\\"INTERNALERRROR\\\",e[e.VOIPCLOSE=24016]=\\\"VOIPCLOSE\\\",e[e.CLOSE_BEFORE_OPEN=51001]=\\\"CLOSE_BEFORE_OPEN\\\",e[e.ALREADY_IN_USE=51002]=\\\"ALREADY_IN_USE\\\",e[e.INVALID_CHANNEL_NAME=51003]=\\\"INVALID_CHANNEL_NAME\\\",e[e.VIDEO_CONTAINER_IS_NULL=51004]=\\\"VIDEO_CONTAINER_IS_NULL\\\",e[e.DELETE_MESSAGE_ID_IS_NULL=61001]=\\\"DELETE_MESSAGE_ID_IS_NULL\\\",e[e.CANCEL=1]=\\\"CANCEL\\\",e[e.REJECT=2]=\\\"REJECT\\\",e[e.HANGUP=3]=\\\"HANGUP\\\",e[e.BUSYLINE=4]=\\\"BUSYLINE\\\",e[e.NO_RESPONSE=5]=\\\"NO_RESPONSE\\\",e[e.ENGINE_UN_SUPPORTED=6]=\\\"ENGINE_UN_SUPPORTED\\\",e[e.NETWORK_ERROR=7]=\\\"NETWORK_ERROR\\\",e[e.REMOTE_CANCEL=11]=\\\"REMOTE_CANCEL\\\",e[e.REMOTE_REJECT=12]=\\\"REMOTE_REJECT\\\",e[e.REMOTE_HANGUP=13]=\\\"REMOTE_HANGUP\\\",e[e.REMOTE_BUSYLINE=14]=\\\"REMOTE_BUSYLINE\\\",e[e.REMOTE_NO_RESPONSE=15]=\\\"REMOTE_NO_RESPONSE\\\",e[e.REMOTE_ENGINE_UN_SUPPORTED=16]=\\\"REMOTE_ENGINE_UN_SUPPORTED\\\",e[e.REMOTE_NETWORK_ERROR=17]=\\\"REMOTE_NETWORK_ERROR\\\",e[e.VOIP_NOT_AVALIABLE=18]=\\\"VOIP_NOT_AVALIABLE\\\",e[e.CHATROOM_KV_STORE_NOT_ALL_SUCCESS=23428]=\\\"CHATROOM_KV_STORE_NOT_ALL_SUCCESS\\\",e[e.CHATROOM_KV_STORE_OUT_LIMIT=23429]=\\\"CHATROOM_KV_STORE_OUT_LIMIT\\\"}(ye||(ye={}));var ve,Ee=ye;!function(e){e[e.CONNECTED=0]=\\\"CONNECTED\\\",e[e.CONNECTING=1]=\\\"CONNECTING\\\",e[e.DISCONNECTED=2]=\\\"DISCONNECTED\\\",e[e.NETWORK_UNAVAILABLE=3]=\\\"NETWORK_UNAVAILABLE\\\",e[e.CONNECTION_CLOSED=4]=\\\"CONNECTION_CLOSED\\\",e[e.KICKED_OFFLINE_BY_OTHER_CLIENT=6]=\\\"KICKED_OFFLINE_BY_OTHER_CLIENT\\\",e[e.WEBSOCKET_UNAVAILABLE=7]=\\\"WEBSOCKET_UNAVAILABLE\\\",e[e.WEBSOCKET_ERROR=8]=\\\"WEBSOCKET_ERROR\\\",e[e.BLOCKED=9]=\\\"BLOCKED\\\",e[e.DOMAIN_INCORRECT=12]=\\\"DOMAIN_INCORRECT\\\",e[e.DISCONNECT_BY_SERVER=13]=\\\"DISCONNECT_BY_SERVER\\\",e[e.REDIRECT=14]=\\\"REDIRECT\\\",e[e.APPKEY_IS_FAKE=20]=\\\"APPKEY_IS_FAKE\\\",e[e.ULTRALIMIT=1101]=\\\"ULTRALIMIT\\\",e[e.REQUEST_NAVI=201]=\\\"REQUEST_NAVI\\\",e[e.RESPONSE_NAVI=202]=\\\"RESPONSE_NAVI\\\",e[e.RESPONSE_NAVI_ERROR=203]=\\\"RESPONSE_NAVI_ERROR\\\",e[e.RESPONSE_NAVI_TIMEOUT=204]=\\\"RESPONSE_NAVI_TIMEOUT\\\"}(ve||(ve={}));var Te,Ie=ve,Ce={ACCEPTED:0,UNACCEPTABLE_PROTOCOL_VERSION:1,IDENTIFIER_REJECTED:2,SERVER_UNAVAILABLE:3,TOKEN_INCORRECT:4,NOT_AUTHORIZED:5,REDIRECT:6,PACKAGE_ERROR:7,APP_BLOCK_OR_DELETE:8,BLOCK:9,TOKEN_EXPIRE:10,DEVICE_ERROR:11,HOSTNAME_ERROR:12,HASOHTERSAMECLIENTONLINE:13,IN_OTHER_CLUSTER:15,APP_AUTH_NOT_PASS:16,OTP_USED:17,PLATFORM_ERROR:18};!function(e){e.TextMessage=\\\"RC:TxtMsg\\\",e.VOICE=\\\"RC:VcMsg\\\",e.HQ_VOICE=\\\"RC:HQVCMsg\\\",e.IMAGE=\\\"RC:ImgMsg\\\",e.GIF=\\\"RC:GIFMsg\\\",e.RICH_CONTENT=\\\"RC:ImgTextMsg\\\",e.LOCATION=\\\"RC:LBSMsg\\\",e.FILE=\\\"RC:FileMsg\\\",e.SIGHT=\\\"RC:SightMsg\\\",e.COMBINE=\\\"RC:CombineMsg\\\",e.CHRM_KV_NOTIFY=\\\"RC:chrmKVNotiMsg\\\",e.LOG_COMMAND=\\\"RC:LogCmdMsg\\\",e.EXPANSION_NOTIFY=\\\"RC:MsgExMsg\\\",e.REFERENCE=\\\"RC:ReferenceMsg\\\",e.RECALL=\\\"RC:RcCmd\\\",e.READ_RECEIPT=\\\"RC:ReadNtf\\\",e.READ_RECEIPT_REQUEST=\\\"RC:RRReqMsg\\\",e.READ_RECEIPT_RESPONSE=\\\"RC:RRRspMsg\\\",e.SYNC_READ_STATUS=\\\"RC:SRSMsg\\\",e.GROUP_READ_RECEIPT_REQUEST=\\\"RC:RRMsg\\\",e.CHATROOM_JOIN=\\\"RC:ChrmJoinNtf\\\",e.CHATROOM_LEFT=\\\"RC:ChrmQuitNtf\\\",e.CHATROOM_MERGE_CHANGE=\\\"RC:ChrmMemChange\\\",e.TYPING_STATUS=\\\"RC:TypSts\\\",e.INTERCEPT=\\\"RC:InterceptMsg\\\"}(Te||(Te={}));var Re,Se=Te;!function(e){e[e.OPEN=1]=\\\"OPEN\\\",e[e.CLOSE=2]=\\\"CLOSE\\\"}(Re||(Re={}));var Ne,Oe=Re;!function(e){e[e.ALL=1]=\\\"ALL\\\",e[e.SINGAL=2]=\\\"SINGAL\\\"}(Ne||(Ne={}));var Me,we=Ne;!function(e){e[e.QINIU=1]=\\\"QINIU\\\",e[e.ALI=2]=\\\"ALI\\\",e[e.AWS=3]=\\\"AWS\\\",e[e.STC=4]=\\\"STC\\\"}(Me||(Me={}));var Ae,Ue=Me;!function(e){e[e.UPDATE=1]=\\\"UPDATE\\\",e[e.DELETE=2]=\\\"DELETE\\\"}(Ae||(Ae={}));var be,Le=Ae;!function(e){e[e.QUIT=0]=\\\"QUIT\\\",e[e.JOIN=1]=\\\"JOIN\\\"}(be||(be={}));var Pe,De=be;!function(e){\\n/*!\\n    全局敏感词：命中了融云内置的全局敏感词\\n   */\\ne[e.GLOBAL=1]=\\\"GLOBAL\\\",\\n/*!\\n     自定义敏感词拦截：命中了客户在融云自定义的敏感词\\n    */\\ne[e.CUSTOM=2]=\\\"CUSTOM\\\",\\n/*!\\n     第三方审核拦截：命中了第三方（数美）或模板路由决定不下发的状态\\n    */\\ne[e.THIRD_PARTY=3]=\\\"THIRD_PARTY\\\"}(Pe||(Pe={}));var Ve,ke=Pe;!function(e){e[e.typing=0]=\\\"typing\\\"}(Ve||(Ve={}));var xe,Be,Ge,Fe=Ve;!function(e){e[e.RTC=0]=\\\"RTC\\\",e[e.LIVE=2]=\\\"LIVE\\\"}(xe||(xe={})),function(e){e[e.AUDIO_AND_VIDEO=0]=\\\"AUDIO_AND_VIDEO\\\",e[e.AUDIO=1]=\\\"AUDIO\\\"}(Be||(Be={})),function(e){e[e.ANCHOR=1]=\\\"ANCHOR\\\",e[e.AUDIENCE=2]=\\\"AUDIENCE\\\"}(Ge||(Ge={}));var qe,Ke,He,Ye={\\\"RC:VCAccept\\\":\\\"RC:VCAccept\\\",\\\"RC:VCRinging\\\":\\\"RC:VCRinging\\\",\\\"RC:VCSummary\\\":\\\"RC:VCSummary\\\",\\\"RC:VCHangup\\\":\\\"RC:VCHangup\\\",\\\"RC:VCInvite\\\":\\\"RC:VCInvite\\\",\\\"RC:VCModifyMedia\\\":\\\"RC:VCModifyMedia\\\",\\\"RC:VCModifyMem\\\":\\\"RC:VCModifyMem\\\"};!function(e){e[e.ROOM=1]=\\\"ROOM\\\",e[e.PERSON=2]=\\\"PERSON\\\"}(qe||(qe={})),function(e){e[e.AnchorToViewer=1]=\\\"AnchorToViewer\\\",e[e.ViewerToAnchor=2]=\\\"ViewerToAnchor\\\"}(Ke||(Ke={})),function(e){e[e.KICK=0]=\\\"KICK\\\",e[e.REFUSE=1]=\\\"REFUSE\\\",e[e.COEXIST=2]=\\\"COEXIST\\\"}(He||(He={}));var je=\\\"undefined\\\"!=typeof window&&window?(window.__RCVersionInfo||(window.__RCVersionInfo={}),window.__RCVersionInfo):{};je.engine=\\\"5.2.1\\\";var Qe,We,Je=function(){function e(){}return e.add=function(e,t){je[e]=t},e.validEngine=function(e){var t=e.match(/\\\\d+\\\\.\\\\d+\\\\.\\\\d+/);if(!t)return ge.warn(\\\"The validation engine version '\\\"+e+\\\"' is invalid!\\\"),!1;var n=t[0].split(\\\".\\\").map((function(e){return e.padStart(3,\\\"0\\\")})).join(\\\"\\\");return je.engine.match(/\\\\d+\\\\.\\\\d+\\\\.\\\\d+/)[0].split(\\\".\\\").map((function(e){return e.padStart(3,\\\"0\\\")})).join(\\\"\\\")>=n},e.getInfo=function(){return je},e}();!function(e){e[e.STRING=0]=\\\"STRING\\\",e[e.ONLY_STRING=1]=\\\"ONLY_STRING\\\",e[e.NUMBER=2]=\\\"NUMBER\\\",e[e.BOOLEAN=3]=\\\"BOOLEAN\\\",e[e.OBJECT=4]=\\\"OBJECT\\\",e[e.ARRAY=5]=\\\"ARRAY\\\",e[e.CALLBACK=6]=\\\"CALLBACK\\\",e[e.CHANNEL_ID=7]=\\\"CHANNEL_ID\\\"}(We||(We={}));var ze,Ze,Xe,$e,et,tt=((Qe={})[We.STRING]=ee,Qe[We.ONLY_STRING]=J,Qe[We.NUMBER]=Z,Qe[We.BOOLEAN]=function(e){return\\\"boolean\\\"==typeof e},Qe[We.OBJECT]=ne,Qe[We.ARRAY]=X,Qe[We.CALLBACK]=function(e){var t=!0;return ne(e)||(t=!1),(e=e||{}).onSuccess&&!ie(e.onSuccess)&&(t=!1),e.onError&&!ie(e.onError)&&(t=!1),t},Qe[We.CHANNEL_ID]=function(e){var t=!1;return J(e)&&!/_/g.test(e)&&e.length<=20&&(t=!0),t},Qe),nt=function(e){function t(t){var n=e.call(this,t)||this;return n.name=\\\"RCAssertError\\\",n}return N(t,e),t}(Error),it=function(e,t,n,i){if(void 0===i&&(i=!1),!rt(e,t,n,i))throw new nt(\\\"'\\\"+e+\\\"' is invalid: \\\"+JSON.stringify(t))},rt=function(e,t,n,i){void 0===i&&(i=!1),n=tt[n]||n;var r=i&&!n(t)||!i&&!(re(t)||null===t||n(t));return r&&ge.error(\\\"'\\\"+e+\\\"' is invalid: \\\"+JSON.stringify(t)),!r},st=function(e){if(!ne(e)||void 0===e.low||void 0===e.high)return e;var t=e.low;return t<0&&(t+=4294967296),t=t.toString(16),parseInt(e.high.toString(16)+\\\"00000000\\\".replace(new RegExp(\\\"0{\\\"+t.length+\\\"}$\\\"),t),16)},ot=function(e,t){var n=Math.floor(1e3*Math.random()%1e4),i=K(),r=function(e){e=e||\\\"-\\\";var t=new Date;return\\\"\\\"+t.getFullYear()+e+(t.getMonth()+1)+e+t.getDate()}(),s=(new Date).getTime(),o=\\\"\\\";if(t){var a=t.split(\\\".\\\");o=\\\".\\\"+a[a.length-1]}return e+\\\"__RC-\\\"+r+\\\"_\\\"+n+\\\"_\\\"+s+i+o},at=function(e){var t=\\\"application/octet-stream\\\";switch(e){case W.IMAGE:t=\\\"image/jpeg\\\";break;case W.AUDIO:t=\\\"audio/amr\\\";break;case W.VIDEO:t=\\\"video/3gpp\\\";break;case W.SIGHT:t=\\\"video/mpeg4\\\";break;case W.COMBINE_HTML:t=\\\"text/html\\\"}return t},ut=function(e,t){void 0===e&&(e={}),void 0===t&&(t={});var n=e.threadId,i=e.apnsCollapseId,r=e.category,s=e.richMediaUri,o=t.channelIdMi,a=t.channelIdHW,u=t.channelIdOPPO,c=t.typeVivo,h=t.googleConfig,l={};l[\\\"thread-id\\\"]=n||\\\"\\\",l[\\\"apns-collapse-id\\\"]=i||\\\"\\\",l.category=r||\\\"\\\",l.richMediaUri=s||\\\"\\\";var d={};d.collapse_key=null==h?void 0:h.collapseKey,d.imageUrl=null==h?void 0:h.imageUrl;var f=null==h?void 0:h.priority;f&&![\\\"high\\\",\\\"normal\\\"].includes(f)&&(f=\\\"normal\\\"),d.priority=f;var p=[{HW:{channelId:a||\\\"\\\"}},{MI:{channelId:o||\\\"\\\"}},{OPPO:{channelId:u||\\\"\\\"}},{VIVO:{classification:c||\\\"\\\"}},{APNS:l},{FCM:d}];return JSON.stringify(p)},ct=function(e,t){var n={},i={notificationId:t||\\\"\\\"};if(!e)return{iOSConfig:n,androidConfig:i};try{var r=JSON.parse(e);null==r||r.forEach((function(e){var t,r,s,o,a=Object.keys(e);if(0!==a.length){var u=a[0];switch(u){case\\\"HW\\\":return void(i.channelIdHW=null===(t=e[u])||void 0===t?void 0:t.channelId);case\\\"MI\\\":return void(i.channelIdMi=null===(r=e[u])||void 0===r?void 0:r.channelId);case\\\"OPPO\\\":return void(i.channelIdOPPO=null===(s=e[u])||void 0===s?void 0:s.channelId);case\\\"VIVO\\\":return void(i.typeVivo=null===(o=e[u])||void 0===o?void 0:o.classification);case\\\"APNS\\\":return n.threadId=e[u][\\\"thread-id\\\"],n.apnsCollapseId=e[u][\\\"apns-collapse-id\\\"],n.category=e[u].category,void(n.richMediaUri=e[u].richMediaUri);case\\\"FCM\\\":i.googleConfig={collapseKey:e[u].collapse_key||\\\"\\\",imageUrl:e[u].imageUrl||\\\"\\\",priority:e[u].priority||\\\"\\\"}}}}))}catch(t){ge.error(\\\"Wrong format for pushConfigs field! content: \\\"+e)}return{iOSConfig:n,androidConfig:i}},ht=function(e){var t=/^[A-Za-z0-9_=+-]+$/.test(e),n=e.length;return t&&(n<=128&&n>=1)},lt=function(e){var t=e.length;return t<=4096&&t>=1},dt=function(e,t,n){t=t||function(){};var i=(n=n||{}).isReverse;ne(e)&&function(){for(var n in e)t(e[n],n,e)}(),(X(e)||J(e))&&function(){if(i)for(var n=e.length-1;n>=0;n--)t(e[n],n);else for(var r=0,s=e.length;r<s;r++)t(e[r],r)}()},ft=function(e,t){return dt(e,(function(n,i){e[i]=t(n,i)})),e},pt=function(e,t){if(e.indexOf)return e.indexOf(t);var n=-1;return dt(e,(function(e,i){t===e&&(n=i)})),n},gt=function(e,t){return-1!==pt(e,t)},_t=function(e,t){var n=[];return dt(e,(function(e){n.push(e)})),-1!==pt(n,t)},yt=function(e){return JSON.parse(JSON.stringify(e))},mt=function(){return\\\"undefined\\\"!=typeof RCCppEngine},vt=function(e){if(\\\"browser\\\"!==e.tag)return{type:e.tag,version:\\\"UnKonw\\\"};var t,n,i=navigator.userAgent,r={IE:/rv:([\\\\d.]+)\\\\) like Gecko|MSIE ([\\\\d.]+)/,Edge:/Edge\\\\/([\\\\d.]+)/,Firefox:/Firefox\\\\/([\\\\d.]+)/,Opera:/(?:OPERA|OPR).([\\\\d.]+)/,WeChat:/MicroMessenger\\\\/([\\\\d.]+)/,QQBrowser:/QQBrowser\\\\/([\\\\d.]+)/,Chrome:/Chrome\\\\/([\\\\d.]+)/,Safari:/Version\\\\/([\\\\d.]+).*Safari/,iOSChrome:/Mobile\\\\/([\\\\d.]+).*Safari/};for(var s in r)if(r.hasOwnProperty(s)){var o=i.match(r[s]);if(o){n=s,t=o[1]||o[2];break}}return{type:n||\\\"UnKonw\\\",version:t||\\\"UnKonw\\\"}},Et=function(e){switch(e){case Ce.SERVER_UNAVAILABLE:return Ee.SERVER_UNAVAILABLE;case Ce.TOKEN_INCORRECT:return Ee.RC_CONN_USER_OR_PASSWD_ERROR;case Ce.REDIRECT:return Ee.RC_CONN_REDIRECTED;case Ce.APP_BLOCK_OR_DELETE:return Ee.RC_CONN_APP_BLOCKED_OR_DELETED;case Ce.BLOCK:return Ee.RC_CONN_USER_BLOCKED;case Ce.TOKEN_EXPIRE:return Ee.RC_CONN_USER_OR_PASSWD_ERROR;case Ce.HOSTNAME_ERROR:return Ee.HOSTNAME_ERROR;case Ce.HASOHTERSAMECLIENTONLINE:return Ee.HAS_OHTER_SAME_CLIENT_ON_LINE;case Ce.APP_AUTH_NOT_PASS:return Ee.RC_APP_AUTH_NOT_PASS;case Ce.OTP_USED:return Ee.RC_OTP_USED;case Ce.PLATFORM_ERROR:return Ee.RC_PLATFORM_ERROR;default:return Ee.RC_NET_UNAVAILABLE}},Tt=function(e){var t;if(\\\"object\\\"==typeof e)if(Array.isArray(e))for(var n in t=[],e)t.push(Tt(e[n]));else for(var n in t={},e)t[n]=Tt(e[n]);else t=e;return t},It=function(e){var t;try{t=Tt(e)}catch(n){ge.error(\\\"clone err:\\\",n),t=JSON.parse(JSON.stringify(e))}return t},Ct=function(e){var t={},n=JSON.parse(e);return dt(n,(function(e,n){t[n]=e.v})),t},Rt={_delayTime:0,setTime:function(e){var t=(new Date).getTime();Rt._delayTime=t-e},getTime:function(){var e=Rt._delayTime;return(new Date).getTime()-e}},St=function(e,t){var n=0;return e.isAutoDelete&&(n|=1),e.isOverwrite&&(n|=2),2===t&&(n|=4),n};!function(e){e[e.AT_MOST_ONCE=0]=\\\"AT_MOST_ONCE\\\",e[e.AT_LEAST_ONCE=1]=\\\"AT_LEAST_ONCE\\\",e[e.EXACTLY_ONCE=2]=\\\"EXACTLY_ONCE\\\",e[e.DEFAULT=3]=\\\"DEFAULT\\\"}(ze||(ze={})),function(e){e[e.SYMMETRIC=0]=\\\"SYMMETRIC\\\",e[e.CONNECT=1]=\\\"CONNECT\\\",e[e.CONN_ACK=2]=\\\"CONN_ACK\\\",e[e.PUBLISH=3]=\\\"PUBLISH\\\",e[e.PUB_ACK=4]=\\\"PUB_ACK\\\",e[e.QUERY=5]=\\\"QUERY\\\",e[e.QUERY_ACK=6]=\\\"QUERY_ACK\\\",e[e.QUERY_CONFIRM=7]=\\\"QUERY_CONFIRM\\\",e[e.SUBSCRIBE=8]=\\\"SUBSCRIBE\\\",e[e.SUB_ACK=9]=\\\"SUB_ACK\\\",e[e.UNSUBSCRIBE=10]=\\\"UNSUBSCRIBE\\\",e[e.UNSUB_ACK=11]=\\\"UNSUB_ACK\\\",e[e.PING_REQ=12]=\\\"PING_REQ\\\",e[e.PING_RESP=13]=\\\"PING_RESP\\\",e[e.DISCONNECT=14]=\\\"DISCONNECT\\\",e[e.RESERVER2=15]=\\\"RESERVER2\\\"}(Ze||(Ze={})),function(e){e.CONN_ACK=\\\"ConnAckMessage\\\",e.DISCONNECT=\\\"DisconnectMessage\\\",e.PING_REQ=\\\"PingReqMessage\\\",e.PING_RESP=\\\"PingRespMessage\\\",e.PUBLISH=\\\"PublishMessage\\\",e.PUB_ACK=\\\"PubAckMessage\\\",e.QUERY=\\\"QueryMessage\\\",e.QUERY_CON=\\\"QueryConMessage\\\",e.QUERY_ACK=\\\"QueryAckMessage\\\"}(Xe||(Xe={})),function(e){e.PUB=\\\"pub\\\",e.QUERY=\\\"qry\\\"}($e||($e={})),function(e){e[e.V4=4]=\\\"V4\\\",e[e.V3=3]=\\\"V3\\\"}(et||(et={}));var Nt,Ot=function(){function e(e,t,n,i){void 0===t&&(t=!1),void 0===n&&(n=ze.AT_LEAST_ONCE),void 0===i&&(i=!1),this._retain=!1,this.qos=ze.AT_LEAST_ONCE,this._dup=!1,this.syncMsg=!1;var r=e>0;e&&r&&1===arguments.length?(this._retain=(1&e)>0,this.qos=(6&e)>>1,this._dup=(8&e)>0,this.type=e>>4&15,this.syncMsg=8==(8&e)):(this.type=e,this._retain=t,this.qos=n,this._dup=i)}return e.prototype.encode=function(){var e=this.type<<4;return e|=this._retain?1:0,e|=this.qos<<1,e|=this._dup?8:0},e}(),Mt=function(){function e(){}return e.writeUTF=function(e,t){var n=[],i=0;if(J(e))for(var r=0,s=e.length;r<s;r++){var o=e.charCodeAt(r);o>=0&&o<=127?(i+=1,n.push(o)):o>=128&&o<=2047?(i+=2,n.push(192|31&o>>6),n.push(128|63&o)):o>=2048&&o<=65535&&(i+=3,n.push(224|15&o>>12),n.push(128|63&o>>6),n.push(128|63&o))}for(r=0,s=n.length;r<s;r++)n[r]>255&&(n[r]&=255);return t?n:i<=255?[0,i].concat(n):[i>>8,255&i].concat(n)},e.readUTF=function(e){for(var t,n,i=[],r=-1,s=e,o=\\\"\\\";++r<s.length;){var a=Number(s[r]);if(a===(127&a)||(240==(240&a)?a=(a=(a=(a^=240)<<6|128^s[++r])<<6|128^s[++r])<<6|128^s[++r]:224==(224&a)?a=(a=(a^=224)<<6|128^s[++r])<<6|128^s[++r]:192==(192&a)&&(a=(a^=192)<<6|128^s[++r])),!isFinite(a)||a<0||a>1114111||Math.floor(a)!==a)throw RangeError(\\\"Invalid code point: \\\"+a);a<=65535?i.push(a):(t=(a-=65536)>>10|55296,n=a%1024|56320,i.push(t,n)),(r+1===s.length||i.length>16384)&&(o+=String.fromCharCode.apply(null,i),i.length=0)}return o},e}(),wt=function(){function e(e){this._position=0,this._poolLen=0,this._pool=e,this._poolLen=e.length}return e.prototype.check=function(){return this._position>=this._pool.length},e.prototype.read2Byte=function(){var e=this;if(e.check())return-1;for(var t=\\\"\\\",n=0;n<2;n++){var i=e._pool[e._position++].toString(16);1===i.length&&(i=\\\"0\\\"+i),t+=i.toString()}return parseInt(t,16)},e.prototype.readInt=function(){var e=this;if(e.check())return-1;for(var t=\\\"\\\",n=0;n<4;n++){var i=e._pool[e._position++].toString(16);1===i.length&&(i=\\\"0\\\"+i),t+=i.toString()}return parseInt(t,16)},e.prototype.readLong=function(){var e=this;if(e.check())return-1;for(var t=\\\"\\\",n=0;n<8;n++){var i=e._pool[e._position++].toString(16);1===i.length&&(i=\\\"0\\\"+i),t+=i}return parseInt(t,16)},e.prototype.readByte=function(){if(this.check())return-1;var e=this._pool[this._position++];return e>255&&(e&=255),e},e.prototype.readUTF=function(){if(this.check())return\\\"\\\";var e=this.readByte()<<8|this.readByte(),t=this._pool.subarray(this._position,this._position+=e);return Mt.readUTF(t)},e.prototype.readAll=function(){return this._pool.subarray(this._position,this._poolLen)},e}(),At=function(){function e(){this._pool=[],this._position=0,this._writen=0}return e.prototype.write=function(e){return-1!==Object.prototype.toString.call(e).indexOf(\\\"Array\\\")?this._pool=this._pool.concat(e):e>=0&&(e>255&&(e&=255),this._pool.push(e),this._writen++),e},e.prototype.writeArr=function(e){return this._pool=this._pool.concat(e),e},e.prototype.writeUTF=function(e){var t=Mt.writeUTF(e);this._pool=this._pool.concat(t),this._writen+=t.length},e.prototype.getBytesArray=function(){return this._pool},e}(),Ut=\\\"UpStreamMessage\\\",bt=\\\"PushExtra\\\",Lt=\\\"DownStreamMessage\\\",Pt=\\\"DownStreamMessages\\\",Dt=\\\"SessionsAttQryInput\\\",Vt=\\\"SessionsAttOutput\\\",kt=\\\"SyncRequestMsg\\\",xt=\\\"ChrmPullMsg\\\",Bt=\\\"NotifyMsg\\\",Gt=\\\"HistoryMsgInput\\\",Ft=\\\"HistoryMsgOuput\\\",qt=\\\"RelationQryInput\\\",Kt=\\\"RelationsOutput\\\",Ht=\\\"DeleteSessionsInput\\\",Yt=\\\"SessionInfo\\\",jt=\\\"DeleteSessionsOutput\\\",Qt=\\\"RelationsInput\\\",Wt=\\\"DeleteMsgInput\\\",Jt=\\\"CleanHisMsgInput\\\",zt=\\\"SessionMsgReadInput\\\",Zt=\\\"ChrmInput\\\",Xt=\\\"ChrmOutput\\\",$t=\\\"QueryChatRoomInfoInput\\\",en=\\\"QueryChatRoomInfoOutput\\\",tn=\\\"RtcInput\\\",nn=\\\"RtcUserListOutput\\\",rn=\\\"SetUserStatusInput\\\",sn=\\\"RtcSetDataInput\\\",on=\\\"RtcUserSetDataInput\\\",an=\\\"RtcDataInput\\\",un=\\\"RtcSetOutDataInput\\\",cn=\\\"MCFollowInput\\\",hn=\\\"RtcTokenOutput\\\",ln=\\\"RtcQryOutput\\\",dn=\\\"RtcQryUserOutDataInput\\\",fn=\\\"RtcUserOutDataOutput\\\",pn=\\\"RtcQueryListInput\\\",gn=\\\"RtcRoomInfoOutput\\\",_n=\\\"RtcValueInfo\\\",yn=\\\"RtcKeyDeleteInput\\\",mn=\\\"GetQNupTokenInput\\\",vn=\\\"GetQNupTokenOutput\\\",En=\\\"GetQNdownloadUrlInput\\\",Tn=\\\"GetDownloadUrlInput\\\",In=\\\"GetQNdownloadUrlOutput\\\",Cn=\\\"GetDownloadUrlOutput\\\",Rn=\\\"ChrmKVEntity\\\",Sn=\\\"SetChrmKV\\\",Nn=\\\"SetChrmKVS\\\",On=\\\"DeleteChrmKVS\\\",Mn=\\\"ChrmKVOutput\\\",wn=\\\"ChrmKVSOutput\\\",An=\\\"ChrmKVSVersionEntity\\\",Un=\\\"ChrmKVSOutputEntity\\\",bn=\\\"QueryChrmKV\\\",Ln=\\\"SetUserSettingInput\\\",Pn=\\\"SetUserSettingOutput\\\",Dn=\\\"PullUserSettingInput\\\",Vn=\\\"PullUserSettingOutput\\\",kn=\\\"UserSettingNotification\\\",xn=\\\"SessionReq\\\",Bn=\\\"SessionStates\\\",Gn=\\\"SessionState\\\",Fn=\\\"SessionStateItem\\\",qn=\\\"SessionStateModifyReq\\\",Kn=\\\"SessionStateModifyResp\\\",Hn=\\\"GrpReadReceiptMsg\\\",Yn=\\\"GrpReadReceiptQryReq\\\",jn=\\\"GrpReadReceiptQryResp\\\",Qn=\\\"GrpMsgReadUser\\\",Wn=\\\"SessionTagAddInput\\\",Jn=\\\"SessionTagItem\\\",zn=\\\"SessionTagDelInput\\\",Zn=\\\"SessionDisTagReq\\\",Xn=\\\"ReportSDKInput\\\",$n=\\\"ReportSDKOutput\\\",ei=\\\"UltraGrpPullSes\\\",ti=\\\"UltraGrpPullMsg\\\",ni=\\\"MsgChangeReq\\\",ii=\\\"QueryMsgChange\\\",ri=\\\"MsgChange\\\",si=\\\"MsgChangeList\\\",oi=\\\"MsgQuery\\\",ai=\\\"MessageQueryInfo\\\",ui=\\\"MsgQueryAck\\\",ci=\\\"OperateStatus\\\",hi=\\\"OperateStatusNotify\\\",li=\\\"OperateInfo\\\",di=\\\"OperateSummary\\\",fi=\\\"RtcNotifyMsg\\\",pi=\\\"RtcPullKV\\\",gi=\\\"RtcKVOutput\\\",_i=\\\"RtcQueryUserJoinedInput\\\",yi=\\\"RtcQueryUserJoinedOutput\\\",mi=\\\"RtcViewerJoinedOutput\\\",vi=\\\"RtcInviteInput\\\",Ei=\\\"RtcCancelInviteInput\\\",Ti=\\\"RtcInviteAnswerInput\\\",Ii=\\\"RtcEndInviteInput\\\",Ci=\\\"SetRtcRoomIdInput\\\",Ri=\\\"SetRtcRoomIdOutput\\\",Si=((Nt={})[Ut]=[\\\"sessionId\\\",\\\"classname\\\",\\\"content\\\",\\\"pushText\\\",\\\"userId\\\",\\\"configFlag\\\",\\\"appData\\\",\\\"extraContent\\\",\\\"pushExt\\\",\\\"busChannel\\\"],Nt[Pt]=[\\\"list\\\",\\\"syncTime\\\",\\\"finished\\\"],Nt[Lt]=[\\\"fromUserId\\\",\\\"type\\\",\\\"groupId\\\",\\\"classname\\\",\\\"content\\\",\\\"dataTime\\\",\\\"status\\\",\\\"msgId\\\",\\\"extraContent\\\",\\\"pushContent\\\",\\\"configFlag\\\",\\\"pushExt\\\",\\\"busChannel\\\"],Nt[bt]=[\\\"title\\\",\\\"templateIdNoUse\\\",\\\"pushId\\\",\\\"pushConfigs\\\",\\\"templateId\\\"],Nt[Dt]=[\\\"nothing\\\"],Nt[Vt]=[\\\"inboxTime\\\",\\\"sendboxTime\\\",\\\"totalUnreadCount\\\"],Nt[kt]=[\\\"syncTime\\\",\\\"ispolling\\\",\\\"isweb\\\",\\\"isPullSend\\\",\\\"isKeeping\\\",\\\"sendBoxSyncTime\\\"],Nt[xt]=[\\\"syncTime\\\",\\\"count\\\"],Nt[Bt]=[\\\"type\\\",\\\"time\\\",\\\"chrmId\\\"],Nt[Gt]=[\\\"targetId\\\",\\\"time\\\",\\\"count\\\",\\\"order\\\",\\\"busChannel\\\"],Nt[Ft]=[\\\"list\\\",\\\"syncTime\\\",\\\"hasMsg\\\"],Nt[qt]=[\\\"type\\\",\\\"count\\\",\\\"startTime\\\",\\\"order\\\"],Nt[Kt]=[\\\"info\\\",\\\"isFinished\\\"],Nt[Ht]=[\\\"sessions\\\"],Nt[Yt]=[\\\"type\\\",\\\"channelId\\\",\\\"busChannel\\\"],Nt[jt]=[\\\"nothing\\\"],Nt[Qt]=[\\\"type\\\",\\\"msg\\\",\\\"count\\\",\\\"busChannel\\\",\\\"startTime\\\",\\\"endTime\\\"],Nt[Wt]=[\\\"type\\\",\\\"conversationId\\\",\\\"msgs\\\",\\\"busChannel\\\"],Nt[Jt]=[\\\"targetId\\\",\\\"dataTime\\\",\\\"conversationType\\\",\\\"busChannel\\\"],Nt[zt]=[\\\"type\\\",\\\"msgTime\\\",\\\"channelId\\\",\\\"busChannel\\\"],Nt[Zt]=[\\\"nothing\\\"],Nt[Xt]=[\\\"nothing\\\",\\\"sessionId\\\",\\\"joinTime\\\"],Nt[$t]=[\\\"count\\\",\\\"order\\\"],Nt[en]=[\\\"userTotalNums\\\",\\\"userInfos\\\"],Nt[mn]=[\\\"type\\\",\\\"key\\\",\\\"httpMethod\\\",\\\"queryString\\\"],Nt[En]=[\\\"type\\\",\\\"key\\\",\\\"fileName\\\"],Nt[Tn]=[\\\"type\\\",\\\"key\\\",\\\"fileName\\\"],Nt[vn]=[\\\"deadline\\\",\\\"token\\\",\\\"bosToken\\\",\\\"bosDate\\\",\\\"path\\\",\\\"osskeyId\\\",\\\"ossPolicy\\\",\\\"ossSign\\\",\\\"ossBucketName\\\"],Nt[In]=[\\\"downloadUrl\\\"],Nt[Cn]=[\\\"downloadUrl\\\"],Nt[Rn]=[\\\"key\\\",\\\"value\\\",\\\"status\\\",\\\"timestamp\\\",\\\"uid\\\",\\\"version\\\"],Nt[Sn]=[\\\"entry\\\",\\\"bNotify\\\",\\\"notification\\\",\\\"type\\\"],Nt[Nn]=[\\\"entry\\\",\\\"bNotify\\\",\\\"notification\\\",\\\"type\\\"],Nt[On]=[\\\"entry\\\",\\\"bNotify\\\",\\\"notification\\\",\\\"type\\\"],Nt[Mn]=[\\\"entries\\\",\\\"bFullUpdate\\\",\\\"syncTime\\\"],Nt[wn]=[\\\"timestamp\\\",\\\"errorKeys\\\",\\\"keysVersion\\\"],Nt[An]=[\\\"version\\\",\\\"key\\\"],Nt[Un]=[\\\"key\\\",\\\"errorCode\\\"],Nt[bn]=[\\\"timestamp\\\"],Nt[Ln]=[\\\"version\\\",\\\"value\\\"],Nt[Pn]=[\\\"version\\\",\\\"reserve\\\"],Nt[Dn]=[\\\"version\\\",\\\"reserve\\\"],Nt[Vn]=[\\\"items\\\",\\\"version\\\"],Nt.UserSettingItem=[\\\"targetId\\\",\\\"type\\\",\\\"key\\\",\\\"value\\\",\\\"version\\\",\\\"status\\\",\\\"tags\\\"],Nt[xn]=[\\\"time\\\"],Nt[Bn]=[\\\"version\\\",\\\"state\\\"],Nt[Gn]=[\\\"type\\\",\\\"channelId\\\",\\\"time\\\",\\\"stateItem\\\",\\\"busChannel\\\"],Nt[Fn]=[\\\"sessionStateType\\\",\\\"value\\\",\\\"tags\\\"],Nt[qn]=[\\\"version\\\",\\\"state\\\"],Nt[Kn]=[\\\"version\\\"],Nt[Hn]=[\\\"msgId\\\",\\\"busChannel\\\"],Nt[Yn]=[\\\"msgId\\\",\\\"busChannel\\\"],Nt[jn]=[\\\"totalMemberNum\\\",\\\"list\\\"],Nt[Qn]=[\\\"readTime\\\",\\\"userId\\\"],Nt[Wn]=[\\\"version\\\",\\\"tags\\\"],Nt[Jn]=[\\\"tagId\\\",\\\"name\\\",\\\"createdTime\\\",\\\"isTop\\\"],Nt[zn]=[\\\"version\\\",\\\"tags\\\"],Nt[Zn]=[\\\"tagId\\\"],Nt[kn]=[\\\"version\\\",\\\"reserve\\\"],Nt[Xn]=[\\\"sdkInfo\\\"],Nt[$n]=[\\\"nothing\\\"],Nt[ei]=[\\\"syncTime\\\",\\\"isEraseMsgContent\\\"],Nt[ti]=[\\\"syncTime\\\"],Nt[ni]=[\\\"fromUserId\\\",\\\"targetId\\\",\\\"type\\\",\\\"busChannel\\\",\\\"msgUID\\\",\\\"msgTime\\\",\\\"content\\\"],Nt[ii]=[\\\"syncTime\\\"],Nt[si]=[\\\"list\\\",\\\"syncTime\\\",\\\"hasNext\\\"],Nt[ri]=[\\\"targetId\\\",\\\"type\\\",\\\"time\\\",\\\"changeType\\\",\\\"msgUID\\\",\\\"msgTime\\\",\\\"busChannel\\\",\\\"isAdmin\\\",\\\"isDel\\\",\\\"operatorId\\\"],Nt[oi]=[\\\"targetId\\\",\\\"type\\\",\\\"query\\\"],Nt[ai]=[\\\"msgTime\\\",\\\"msgUID\\\",\\\"busChannel\\\"],Nt[ui]=[\\\"list\\\"],Nt[ci]=[\\\"targetId\\\",\\\"type\\\",\\\"opType\\\",\\\"busChannel\\\"],Nt[hi]=[\\\"type\\\",\\\"notifyType\\\",\\\"info\\\",\\\"summary\\\"],Nt[li]=[\\\"targetId\\\",\\\"busChannel\\\",\\\"userId\\\",\\\"opType\\\",\\\"optime\\\"],Nt[di]=[\\\"targetId\\\",\\\"busChannel\\\",\\\"count\\\",\\\"opType\\\"],Nt[tn]=[\\\"roomType\\\",\\\"broadcastType\\\",\\\"extraInnerData\\\",\\\"needSysChatroom\\\",\\\"identityChangeType\\\",\\\"joinType\\\"],Nt[nn]=[\\\"users\\\",\\\"token\\\",\\\"sessionId\\\",\\\"roomInfo\\\"],Nt[rn]=[\\\"status\\\"],Nt[sn]=[\\\"interior\\\",\\\"target\\\",\\\"key\\\",\\\"value\\\",\\\"objectName\\\",\\\"content\\\"],Nt[on]=[\\\"valueInfo\\\",\\\"objectName\\\",\\\"content\\\"],Nt[an]=[\\\"interior\\\",\\\"target\\\",\\\"key\\\",\\\"objectName\\\",\\\"content\\\"],Nt[un]=[\\\"target\\\",\\\"valueInfo\\\",\\\"objectName\\\",\\\"content\\\"],Nt[cn]=[\\\"state\\\"],Nt[hn]=[\\\"rtcToken\\\"],Nt[ln]=[\\\"outInfo\\\"],Nt[dn]=[\\\"userId\\\"],Nt[fn]=[\\\"user\\\"],Nt[pn]=[\\\"order\\\"],Nt[gn]=[\\\"roomId\\\",\\\"roomData\\\",\\\"userCount\\\",\\\"list\\\"],Nt[_n]=[\\\"key\\\",\\\"value\\\"],Nt[yn]=[\\\"key\\\"],Nt[fi]=[\\\"type\\\",\\\"time\\\",\\\"roomId\\\"],Nt[pi]=[\\\"timestamp\\\",\\\"roomId\\\"],Nt[gi]=[\\\"entries\\\",\\\"bFullUpdate\\\",\\\"syncTime\\\"],Nt[_i]=[\\\"userId\\\"],Nt[yi]=[\\\"info\\\"],Nt[vi]=[\\\"invitedUserId\\\",\\\"timeoutTime\\\",\\\"invitedRoomId\\\",\\\"inviteInfo\\\",\\\"inviteSessionId\\\"],Nt[Ei]=[\\\"invitedUserId\\\",\\\"invitedRoomId\\\",\\\"inviteInfo\\\",\\\"inviteSessionId\\\"],Nt[Ti]=[\\\"inviteUserID\\\",\\\"answerCode\\\",\\\"inviteRoomId\\\",\\\"inviteSessionId\\\",\\\"content\\\",\\\"key\\\",\\\"value\\\"],Nt[Ii]=[\\\"inviteRoomId\\\",\\\"inviteSessionId\\\",\\\"inviteContent\\\",\\\"inviteRoomKeys\\\"],Nt[Ci]=[\\\"rtcRoomId\\\"],Nt[Ri]=[\\\"nothing\\\"],Nt),Ni={},Oi=function(e){var t=Si[e];Ni[e]=function(){for(var e={},n={getArrayData:function(){return e}},i=function(i){var r=t[i],s=\\\"set\\\"+D(r,0,1);n[s]=function(t){e[r]=t}},r=0;r<t.length;r++)i(r);return n},Ni[e].decode=function(e){var t={};J(e)&&(e=JSON.parse(e));var n=function(n){var i=\\\"get\\\"+D(n,0,1);t[n]=e[n],t[i]=function(){return e[n]}};for(var i in e)n(i);return t}};for(var Mi in Si)Oi(Mi);Ni.getModule=function(e){return Ni[e]()};var wi=\\\"\\\\npackage Modules;\\\\nmessage probuf {\\\\n  message \\\"+rn+\\\"\\\\n  {\\\\n    optional int32 status=1;\\\\n  }\\\\n\\\\n  message SetUserStatusOutput\\\\n  {\\\\n    optional int32 nothing=1;\\\\n  }\\\\n\\\\n  message GetUserStatusInput\\\\n  {\\\\n    optional int32 nothing=1;\\\\n  }\\\\n\\\\n  message GetUserStatusOutput\\\\n  {\\\\n    optional string status=1;\\\\n    optional string subUserId=2;\\\\n  }\\\\n\\\\n  message SubUserStatusInput\\\\n  {\\\\n    repeated string userid =1;\\\\n  }\\\\n\\\\n  message SubUserStatusOutput\\\\n  {\\\\n    optional int32 nothing=1;\\\\n  }\\\\n  message VoipDynamicInput\\\\n  {\\\\n    required int32  engineType = 1;\\\\n    required string channelName = 2;\\\\n    optional string channelExtra = 3;\\\\n  }\\\\n\\\\n  message VoipDynamicOutput\\\\n  {\\\\n      required string dynamicKey=1;\\\\n  }\\\\n  message \\\"+Bt+\\\" {\\\\n    required int32 type = 1;\\\\n    optional int64 time = 2;\\\\n    optional string chrmId=3;\\\\n  }\\\\n  message \\\"+kt+\\\" {\\\\n    required int64 syncTime = 1;\\\\n    required bool ispolling = 2;\\\\n    optional bool isweb=3;\\\\n    optional bool isPullSend=4;\\\\n    optional bool isKeeping=5;\\\\n    optional int64 sendBoxSyncTime=6;\\\\n  }\\\\n  message \\\"+Ut+\\\" {\\\\n    required int32 sessionId = 1;\\\\n    required string classname = 2;\\\\n    required bytes content = 3;\\\\n    optional string pushText = 4;\\\\n    optional string appData = 5;\\\\n    repeated string userId = 6;\\\\n    optional int64 delMsgTime = 7;\\\\n    optional string delMsgId = 8;\\\\n    optional int32 configFlag = 9;\\\\n    optional int64 clientUniqueId = 10;\\\\n    optional string extraContent = 11;\\\\n    optional PushExtra pushExt = 12;\\\\n    optional string busChannel = 13; // 该消息所属会话的业务标识\\\\n  }\\\\n  message \\\"+bt+\\\" {\\\\n    optional string title = 1;\\\\n    optional int32  templateIdNoUse= 2;\\\\n    optional string pushId = 3;\\\\n    optional string pushConfigs = 4;\\\\n    optional string templateId = 5;\\\\n  }\\\\n  message \\\"+Pt+\\\" {\\\\n    repeated DownStreamMessage list = 1;\\\\n    required int64 syncTime = 2;\\\\n    optional bool finished = 3;\\\\n  }\\\\n  message \\\"+Lt+\\\" {\\\\n    required string fromUserId = 1;\\\\n    required ChannelType type = 2;\\\\n    optional string groupId = 3;\\\\n    required string classname = 4;\\\\n    required bytes content = 5;\\\\n    required int64 dataTime = 6;\\\\n    required int64 status = 7;\\\\n    optional int64 extra = 8;\\\\n    optional string msgId = 9;\\\\n    optional int32 direction = 10;\\\\n    optional int32 plantform =11;\\\\n    optional int32 isRemoved = 12;\\\\n    optional string source = 13;\\\\n    optional int64 clientUniqueId = 14;\\\\n    optional string extraContent = 15;\\\\n    optional string pushContent = 16;\\\\n    optional int32 configFlag = 17;\\\\n    optional PushExtra pushExt = 18;\\\\n    optional string busChannel = 19; // 该消息所属会话的业务标识，限制20字符以内\\\\n    optional int64 extStatus = 20; // 消息的扩展标记 第0位,表示送达状态: 0x01 表示已送达;断档: 0x02 表示是否需要执行断档策略; 消息修改: 0x04 拉取历史消息时表示该消息是否修改过\\\\n  }\\\\n  enum ChannelType {\\\\n    PERSON = 1;\\\\n    PERSONS = 2;\\\\n    GROUP = 3;\\\\n    TEMPGROUP = 4;\\\\n    CUSTOMERSERVICE = 5;\\\\n    NOTIFY = 6;\\\\n    MC=7;\\\\n    MP=8;\\\\n    ULTRAGROUP = 10;\\\\n  }\\\\n  message CreateDiscussionInput {\\\\n    optional string name = 1;\\\\n  }\\\\n  message CreateDiscussionOutput {\\\\n    required string id = 1;\\\\n  }\\\\n  message ChannelInvitationInput {\\\\n    repeated string users = 1;\\\\n  }\\\\n  message LeaveChannelInput {\\\\n    required int32 nothing = 1;\\\\n  }\\\\n  message ChannelEvictionInput {\\\\n    required string user = 1;\\\\n  }\\\\n  message RenameChannelInput {\\\\n    required string name = 1;\\\\n  }\\\\n  message ChannelInfoInput {\\\\n    required int32 nothing = 1;\\\\n  }\\\\n  message ChannelInfoOutput {\\\\n    required ChannelType type = 1;\\\\n    required string channelId = 2;\\\\n    required string channelName = 3;\\\\n    required string adminUserId = 4;\\\\n    repeated string firstTenUserIds = 5;\\\\n    required int32 openStatus = 6;\\\\n  }\\\\n  message ChannelInfosInput {\\\\n    required int32 page = 1;\\\\n    optional int32 number = 2;\\\\n  }\\\\n  message ChannelInfosOutput {\\\\n    repeated ChannelInfoOutput channels = 1;\\\\n    required int32 total = 2;\\\\n  }\\\\n  message MemberInfo {\\\\n    required string userId = 1;\\\\n    required string userName = 2;\\\\n    required string userPortrait = 3;\\\\n    required string extension = 4;\\\\n  }\\\\n  message GroupMembersInput {\\\\n    required int32 page = 1;\\\\n    optional int32 number = 2;\\\\n  }\\\\n  message GroupMembersOutput {\\\\n    repeated MemberInfo members = 1;\\\\n    required int32 total = 2;\\\\n  }\\\\n  message GetUserInfoInput {\\\\n    required int32 nothing = 1;\\\\n  }\\\\n  message GetUserInfoOutput {\\\\n    required string userId = 1;\\\\n    required string userName = 2;\\\\n    required string userPortrait = 3;\\\\n  }\\\\n  message GetSessionIdInput {\\\\n    required int32 nothing = 1;\\\\n  }\\\\n  message GetSessionIdOutput {\\\\n    required int32 sessionId = 1;\\\\n  }\\\\n  enum FileType {\\\\n    image = \\\"+W.IMAGE+\\\";\\\\n    audio = \\\"+W.AUDIO+\\\";\\\\n    video = \\\"+W.VIDEO+\\\";\\\\n    file = \\\"+W.FILE+\\\";\\\\n  }\\\\n  message \\\"+mn+\\\" {\\\\n    required FileType type = 1;\\\\n    optional string key = 2;\\\\n    optional string httpMethod = 3;\\\\n    optional string queryString = 4;\\\\n  }\\\\n  message \\\"+En+\\\" {\\\\n    required FileType type = 1;\\\\n    required string key = 2;\\\\n    optional string  fileName = 3;\\\\n  }\\\\n  message \\\"+Tn+\\\" {\\\\n    required FileType type = 1;\\\\n    required string key = 2;\\\\n    optional string fileName = 3;\\\\n   }\\\\n  message \\\"+vn+\\\" {\\\\n    required int64 deadline = 1;\\\\n    required string token = 2;\\\\n    optional string bosToken = 3;\\\\n    optional string bosDate = 4;\\\\n    optional string path = 5;\\\\n    optional string osskeyId = 6;\\\\n    optional string ossPolicy = 7;\\\\n    optional string ossSign = 8;\\\\n    optional string ossBucketName = 9;\\\\n    optional string s3Credential = 10;\\\\n    optional string s3Algorithm = 11;\\\\n    optional string s3Date = 12;\\\\n    optional string s3Policy = 13;\\\\n    optional string s3Signature = 14;\\\\n    optional string s3BucketName = 15;\\\\n    optional string stcAuthorization = 16;\\\\n    optional string stcContentSha256 = 17;\\\\n    optional string stcDate = 18;\\\\n    optional string stcBucketName = 19;\\\\n  }\\\\n  message \\\"+In+\\\" {\\\\n    required string downloadUrl = 1;\\\\n  }\\\\n  message \\\"+Cn+\\\" {\\\\n    required string downloadUrl = 1;\\\\n  }\\\\n  message Add2BlackListInput {\\\\n    required string userId = 1;\\\\n  }\\\\n  message RemoveFromBlackListInput {\\\\n    required string userId = 1;\\\\n  }\\\\n  message QueryBlackListInput {\\\\n    required int32 nothing = 1;\\\\n  }\\\\n  message QueryBlackListOutput {\\\\n    repeated string userIds = 1;\\\\n  }\\\\n  message BlackListStatusInput {\\\\n    required string userId = 1;\\\\n  }\\\\n  message BlockPushInput {\\\\n    required string blockeeId = 1;\\\\n  }\\\\n  message ModifyPermissionInput {\\\\n    required int32 openStatus = 1;\\\\n  }\\\\n  message GroupInput {\\\\n    repeated GroupInfo groupInfo = 1;\\\\n  }\\\\n  message GroupOutput {\\\\n    required int32 nothing = 1;\\\\n  }\\\\n  message GroupInfo {\\\\n    required string id = 1;\\\\n    required string name = 2;\\\\n  }\\\\n  message GroupHashInput {\\\\n    required string userId = 1;\\\\n    required string groupHashCode = 2;\\\\n  }\\\\n  message GroupHashOutput {\\\\n    required GroupHashType result = 1;\\\\n  }\\\\n  enum GroupHashType {\\\\n    group_success = 0x00;\\\\n    group_failure = 0x01;\\\\n  }\\\\n  message \\\"+Zt+\\\" {\\\\n    required int32 nothing = 1;\\\\n  }\\\\n  message \\\"+Xt+\\\" {\\\\n    required int32 nothing = 1;\\\\n    optional string sessionId = 2;\\\\n    optional int64 joinTime = 3;\\\\n  }\\\\n  message \\\"+xt+\\\" {\\\\n    required int64 syncTime = 1;\\\\n    required int32 count = 2;\\\\n  }\\\\n\\\\n  message ChrmPullMsgNew\\\\n  {\\\\n    required int32 count = 1;\\\\n    required int64 syncTime = 2;\\\\n    optional string chrmId=3;\\\\n  }\\\\n  message \\\"+qt+\\\"\\\\n  {\\\\n    optional ChannelType type = 1;\\\\n    optional int32 count = 2;\\\\n    optional int64 startTime = 3;\\\\n    optional int32 order = 4;\\\\n  }\\\\n  message \\\"+Qt+\\\"\\\\n  {\\\\n    required ChannelType type = 1;\\\\n    optional DownStreamMessage msg =2;\\\\n    optional int32 count = 3;\\\\n    repeated string busChannel = 4;\\\\n    optional int64 startTime = 5;\\\\n    optional int64 endTime = 6;\\\\n  }\\\\n  message \\\"+Kt+\\\"\\\\n  {\\\\n    repeated RelationInfo info = 1;\\\\n    optional bool isFinished = 2;//是否结束\\\\n  }\\\\n  message RelationInfo\\\\n  {\\\\n    required ChannelType type = 1;\\\\n    required string userId = 2;\\\\n    optional DownStreamMessage msg =3;\\\\n    optional int64 readMsgTime= 4;\\\\n    optional int64 unreadCount= 5;\\\\n    optional string busChannel = 6;//该消息所属会话的业务标识\\\\n    optional int64 versionTime = 7;//会话项变更时间戳，注意:非排序时间戳\\\\n    optional int64 remindCount = 8;//被@的未读数\\\\n  }\\\\n  message RelationInfoReadTime\\\\n  {\\\\n    required ChannelType type = 1;\\\\n    required int64 readMsgTime= 2;\\\\n    required string targetId = 3;\\\\n  }\\\\n  message \\\"+Jt+\\\"\\\\n  {\\\\n      required string targetId = 1;\\\\n      required int64 dataTime = 2;\\\\n      optional int32 conversationType= 3;\\\\n      optional string busChannel = 4; //该消息所属会话的业务标识，限制20字符以内\\\\n  }\\\\n  message HistoryMessageInput\\\\n  {\\\\n    required string targetId = 1;\\\\n    required int64 dataTime =2;\\\\n    required int32 size  = 3;\\\\n  }\\\\n\\\\n  message HistoryMessagesOuput\\\\n  {\\\\n    repeated DownStreamMessage list = 1;\\\\n    required int64 syncTime = 2;\\\\n    required int32 hasMsg = 3;\\\\n  }\\\\n  message \\\"+$t+\\\"\\\\n  {\\\\n    required int32 count= 1;\\\\n    optional int32 order= 2;\\\\n  }\\\\n\\\\n  message \\\"+en+\\\"\\\\n  {\\\\n    optional int32 userTotalNums = 1;\\\\n    repeated ChrmMember userInfos = 2;\\\\n  }\\\\n  message ChrmMember\\\\n  {\\\\n    required int64 time = 1;\\\\n    required string id = 2;\\\\n  }\\\\n  message MPFollowInput\\\\n  {\\\\n    required string id = 1;\\\\n  }\\\\n\\\\n  message MPFollowOutput\\\\n  {\\\\n    required int32 nothing = 1;\\\\n    optional MpInfo info =2;\\\\n  }\\\\n\\\\n  message \\\"+cn+\\\"\\\\n  {\\\\n    required string state = 1;\\\\n  }\\\\n\\\\n  message MCFollowOutput\\\\n  {\\\\n    required int32 nothing = 1;\\\\n    optional MpInfo info =2;\\\\n  }\\\\n\\\\n  message MpInfo\\\\n  {\\\\n    required string mpid=1;\\\\n    required string name = 2;\\\\n    required string type = 3;\\\\n    required int64 time=4;\\\\n    optional string portraitUrl=5;\\\\n    optional string extra =6;\\\\n  }\\\\n\\\\n  message SearchMpInput\\\\n  {\\\\n    required int32 type=1;\\\\n    required string id=2;\\\\n  }\\\\n\\\\n  message SearchMpOutput\\\\n  {\\\\n    required int32 nothing=1;\\\\n    repeated MpInfo info = 2;\\\\n  }\\\\n\\\\n  message PullMpInput\\\\n  {\\\\n    required int64 time=1;\\\\n    required string mpid=2;\\\\n  }\\\\n\\\\n  message PullMpOutput\\\\n  {\\\\n    required int32 status=1;\\\\n    repeated MpInfo info = 2;\\\\n  }\\\\n  message \\\"+Gt+\\\"\\\\n  {\\\\n    optional string targetId = 1;\\\\n    optional int64 time = 2;\\\\n    optional int32 count  = 3;\\\\n    optional int32 order = 4;\\\\n    optional string busChannel = 5; //该消息所属会话的业务标识，限制20字符以内\\\\n  }\\\\n\\\\n  message \\\"+Ft+\\\"\\\\n  {\\\\n    repeated DownStreamMessage list=1;\\\\n    required int64 syncTime=2;\\\\n    required int32 hasMsg=3;\\\\n  }\\\\n  message \\\"+pn+\\\"{\\\\n    optional int32 order=1;\\\\n  }\\\\n\\\\n  message \\\"+yn+\\\"{\\\\n    repeated string key=1;\\\\n  }\\\\n\\\\n  message \\\"+_n+\\\"{\\\\n    required string key=1;\\\\n    required string value=2;\\\\n  }\\\\n\\\\n  message RtcUserInfo{\\\\n    required string userId=1;\\\\n    repeated \\\"+_n+\\\" userData=2; //用户资源信息\\\\n  }\\\\n\\\\n  message \\\"+nn+\\\"{\\\\n    repeated RtcUserInfo users=1;\\\\n    optional string token=2;\\\\n    optional string sessionId=3;\\\\n    repeated RtcValueInfo roomInfo = 4; //房间key value\\\\n    repeated RtcKVEntity entries = 5;//直播KV属性对象集合\\\\n    optional int64 syncTime = 6;//所有属性的最大时间戳（下次拉取KV时用）。\\\\n    optional int32 offlineKickTime = 7;//server超时踢人时间，默认60s\\\\n  }\\\\n  message RtcRoomInfoOutput{\\\\n    optional string roomId = 1;\\\\n    repeated \\\"+_n+\\\" roomData = 2;\\\\n    optional int32 userCount = 3;\\\\n    repeated RtcUserInfo list=4;\\\\n  }\\\\n  message \\\"+tn+\\\"{\\\\n    required int32 roomType=1;\\\\n    optional int32 broadcastType=2;\\\\n    optional RtcValueInfo extraInnerData = 3;\\\\n    optional bool needSysChatroom = 4; //是否需要同步聊天室\\\\n    optional IdentityChangeType identityChangeType = 5; //身份变更类型\\\\n    optional JoinType joinType = 6; // 加入房间类型\\\\n    repeated \\\"+_n+\\\" innerDatas = 7; //用户内部inner数据，角色或者连麦信息等\\\\n    repeated \\\"+_n+\\\" outerDatas = 8; //用户内部outer数据，自定义数据结构RtcInput。\\\\n  }\\\\n  enum JoinType {\\\\n    KICK = 0; //踢前一个设备\\\\n    REFUSE = 1; //当前加入拒绝\\\\n    COEXIST = 2; //两个设备共存\\\\n  }\\\\n  message RtcQryInput{\\\\n    required bool isInterior=1;\\\\n    required targetType target=2;\\\\n    repeated string key=3;\\\\n  }\\\\n  message \\\"+ln+\\\"{\\\\n    repeated \\\"+_n+\\\" outInfo=1;\\\\n  }\\\\n  message RtcDelDataInput{\\\\n    repeated string key=1;\\\\n    required bool isInterior=2;\\\\n    required targetType target=3;\\\\n  }\\\\n  message \\\"+an+\\\"{\\\\n    required bool interior=1;\\\\n    required targetType target=2;\\\\n    repeated string key=3;\\\\n    optional string objectName=4;\\\\n    optional string content=5;\\\\n  }\\\\n  message \\\"+sn+\\\"{\\\\n    required bool interior=1;\\\\n    required targetType target=2;\\\\n    required string key=3;\\\\n    required string value=4;\\\\n    optional string objectName=5;\\\\n    optional string content=6;\\\\n  }\\\\n  message \\\"+on+\\\" {\\\\n    repeated \\\"+_n+\\\" valueInfo = 1;\\\\n    required string objectName = 2;\\\\n    repeated \\\"+_n+\\\" content = 3;\\\\n  }\\\\n  message RtcOutput\\\\n  {\\\\n    optional int32 nothing=1;\\\\n  }\\\\n  message \\\"+hn+\\\"{\\\\n    required string rtcToken=1;\\\\n  }\\\\n  enum targetType {\\\\n    ROOM =1 ;\\\\n    PERSON = 2;\\\\n  }\\\\n  message \\\"+un+\\\"{\\\\n    required targetType target=1;\\\\n    repeated \\\"+_n+\\\" valueInfo=2;\\\\n    optional string objectName=3;\\\\n    optional string content=4;\\\\n  }\\\\n  message \\\"+dn+\\\"{\\\\n    repeated string userId = 1;\\\\n  }\\\\n  message \\\"+fn+\\\"{\\\\n    repeated RtcUserInfo user = 1;\\\\n  }\\\\n  message \\\"+Dt+\\\"{\\\\n    required int32 nothing = 1;\\\\n  }\\\\n  message \\\"+Vt+\\\"{\\\\n    required int64 inboxTime = 1;\\\\n    required int64 sendboxTime = 2;\\\\n    required int64 totalUnreadCount = 3;\\\\n  }\\\\n  message \\\"+zt+\\\"\\\\n  {\\\\n    required ChannelType type = 1;\\\\n    required int64 msgTime = 2;\\\\n    required string channelId = 3;\\\\n    optional string busChannel = 4;//该消息所属会话的业务标识\\\\n  }\\\\n  message SessionMsgReadOutput\\\\n  {\\\\n    optional int32 nothing=1;\\\\n  }\\\\n  message \\\"+Ht+\\\"\\\\n  {\\\\n    repeated SessionInfo sessions = 1;\\\\n  }\\\\n  message \\\"+Yt+\\\"\\\\n  {\\\\n    required ChannelType type = 1;\\\\n    required string channelId = 2;\\\\n    optional string busChannel = 3;//所属会话业务标识\\\\n  }\\\\n  message \\\"+jt+\\\"\\\\n  {\\\\n    optional int32 nothing=1;\\\\n  }\\\\n  message \\\"+Wt+\\\"\\\\n  {\\\\n    optional ChannelType type = 1;\\\\n    optional string conversationId = 2;\\\\n    repeated DeleteMsg msgs = 3;\\\\n    optional string busChannel = 4; //该消息所属会话的业务标识，限制20字符以内\\\\n  }\\\\n  message DeleteMsg\\\\n  {\\\\n    optional string msgId = 1;\\\\n    optional int64 msgDataTime = 2;\\\\n    optional int32 direct = 3;\\\\n  }\\\\n  message ChrmKVEntity {\\\\n    required string key = 1;\\\\n    required string value = 2;\\\\n    optional int32 status = 3;\\\\n    optional int64 timestamp = 4;\\\\n    optional string uid = 5;\\\\n    optional int64 version = 6;\\\\n  }\\\\n  message \\\"+Sn+\\\" {\\\\n    required ChrmKVEntity entry = 1;\\\\n    optional bool bNotify = 2;\\\\n    optional UpStreamMessage notification = 3;\\\\n    optional ChannelType type = 4;\\\\n  }\\\\n  message \\\"+Nn+\\\" {\\\\n    repeated ChrmKVEntity entry = 1;\\\\n    optional bool bNotify = 2;\\\\n    optional UpStreamMessage notification = 3;\\\\n    optional ChannelType type = 4;\\\\n  }\\\\n  message \\\"+On+\\\" {\\\\n    repeated ChrmKVEntity entry = 1;\\\\n    optional bool bNotify = 2;\\\\n    optional UpStreamMessage notification = 3;\\\\n    optional ChannelType type = 4;\\\\n  }\\\\n  message \\\"+Mn+\\\" {\\\\n    repeated ChrmKVEntity entries = 1;\\\\n    optional bool bFullUpdate = 2;\\\\n    optional int64 syncTime = 3;\\\\n  }\\\\n  message ChrmKVSVersionEntity {\\\\n    optional int64 version = 1;\\\\n    optional string key = 2;\\\\n  }\\\\n\\\\n  message \\\"+wn+\\\" {\\\\n    repeated ChrmKVSOutputEntity errorKeys = 1;\\\\n    repeated ChrmKVSVersionEntity keysVersion = 2;\\\\n  }\\\\n  message \\\"+Un+\\\"\\\\n  {\\\\n    optional string key = 1;\\\\n    optional int32 errorCode = 2;\\\\n  }\\\\n  message \\\"+bn+\\\" {\\\\n    required int64 timestamp = 1;\\\\n  }\\\\n  message \\\"+Ln+\\\" {\\\\n    required int64 version=1;\\\\n    required string value=2;\\\\n  }\\\\n  message \\\"+Pn+\\\" {\\\\n    required int64 version=1;\\\\n    required bool reserve=2;\\\\n  }\\\\n  message \\\"+Dn+\\\" {\\\\n    required int64 version=1;\\\\n    optional bool reserve=2;\\\\n  }\\\\n  message \\\"+Vn+\\\" {\\\\n    repeated UserSettingItem items = 1;\\\\n    required int64 version=2;\\\\n  }\\\\n  message UserSettingItem {\\\\n    required string targetId= 1;\\\\n    required ChannelType type = 2;\\\\n    required string key = 4;\\\\n    required bytes value = 5;\\\\n    required int64 version=6;\\\\n    required int32 status=7;\\\\n    repeated SessionTagItem tags= 8;\\\\n  }\\\\n  message \\\"+xn+\\\" {\\\\n    required int64 time = 1;\\\\n  }\\\\n  message \\\"+Bn+\\\" {\\\\n    required int64 version=1;\\\\n    repeated SessionState state= 2;\\\\n  }\\\\n  message \\\"+Gn+\\\" {\\\\n    required ChannelType type = 1;\\\\n    required string channelId = 2;\\\\n    optional int64 time = 3;\\\\n    repeated SessionStateItem stateItem = 4;\\\\n    optional string busChannel = 5;//该消息所属会话的业务标识\\\\n  }\\\\n  message \\\"+Fn+\\\" {\\\\n    required SessionStateType sessionStateType = 1;\\\\n    required string value = 2;\\\\n    repeated SessionTagItem tags = 3;\\\\n  }\\\\n  enum SessionStateType {\\\\n    IsSilent = 1;\\\\n    IsTop = 2;\\\\n    Tags = 3;\\\\n  }\\\\n  message \\\"+qn+\\\" {\\\\n    required int64 version=1;\\\\n    repeated SessionState state= 2;\\\\n  }\\\\n  message \\\"+Kn+\\\" {\\\\n    required int64 version=1;\\\\n  }\\\\n  message \\\"+Hn+\\\" {\\\\n    repeated string msgId=1; //已读消息ID\\\\n    optional string channelId = 2; // 该消息所属会话的业务标识\\\\n  }\\\\n  message \\\"+Yn+\\\" {\\\\n    repeated string msgId=1; //已读消息ID\\\\n    optional string channelId = 2; // 该消息所属会话的业务标识\\\\n  }\\\\n  message \\\"+jn+\\\" {\\\\n    required int32 totalMemberNum = 1;//群内总人数\\\\n    repeated GrpMsgReadUser list = 2;//已读用户列表（list复类型）\\\\n  }\\\\n  message \\\"+Qn+\\\" {\\\\n    required int64 readTime = 1;//已读时间\\\\n    required string userId = 2;//已读用户id\\\\n  }\\\\n  message \\\"+Wn+\\\" {\\\\n    required int64 version=1;\\\\n    repeated SessionTagItem tags=2;\\\\n  }\\\\n  message \\\"+Jn+\\\" {\\\\n    required string tagId=1;\\\\n    optional string name=2;\\\\n    optional int64 createdTime=3;\\\\n    optional bool isTop=4;\\\\n  }\\\\n  message \\\"+zn+\\\" {\\\\n    required int64 version=1;\\\\n    repeated SessionTagItem tags=2;\\\\n  }\\\\n  message \\\"+Zn+\\\" {\\\\n    repeated string tagId=1;\\\\n  }\\\\n  message \\\"+kn+\\\" {\\\\n    required int64 version=1;\\\\n    required bool reserve=2;\\\\n  }\\\\n  message \\\"+Xn+' {\\\\n    required string sdkInfo=1; // 用户集成的 sdk 信息,json 格式 {\\\"web-rtc\\\": \\\"4.0.3.7\\\"}\\\\n  }\\\\n  message '+$n+\\\"\\\\n  {\\\\n    optional int32 nothing=1; //占位\\\\n  }\\\\n  message \\\"+fi+\\\" \\\\n  {\\\\n    required int32 type= 1;   //(通知类型 1:rtc房间状态KV变更通知)\\\\n    optional int64 time= 2;   //消息产生时间\\\\n    optional string roomId=3; //主播房间id\\\\n  }\\\\n  message \\\"+pi+\\\"\\\\n  {\\\\n    required int64 timestamp = 1;\\\\n    required string roomId = 2;\\\\n  }\\\\n  message \\\"+gi+\\\"\\\\n  {\\\\n    repeated RtcKVEntity entries = 1;\\\\n    optional bool bFullUpdate = 2;\\\\n    optional int64 syncTime = 3; \\\\n  }\\\\n  message RtcKVEntity \\\\n  {\\\\n    required string key = 1;\\\\n    required string value = 2;\\\\n    optional int32 status = 3;\\\\n    optional int64 timestamp = 4;\\\\n    optional string uid = 5;\\\\n  }\\\\n  enum IdentityChangeType \\\\n  {\\\\n    AnchorToViewer = 1; //1为主播变观众\\\\n    ViewerToAnchor = 2; //2为观众变主播\\\\n  }\\\\n  message \\\"+_i+\\\"\\\\n  {\\\\n    required string userId = 1;\\\\n  }\\\\n  message \\\"+yi+\\\"\\\\n  {\\\\n    repeated RtcJoinedInfo info = 1;\\\\n  }\\\\n  message RtcJoinedInfo\\\\n  {\\\\n    required string deviceId = 1; //设备ID\\\\n    required string roomId = 2;   //加入的房间ID\\\\n    optional int64 joinTime = 3;  //加入的时间\\\\n  }\\\\n  message \\\"+mi+\\\"\\\\n  {\\\\n    required string rtcToken=1;\\\\n    repeated RtcKVEntity entries = 2;//KV属性对象集合\\\\n    optional int64 syncTime = 3;//所有属性的最大时间戳（下次拉取KV时用）。\\\\n  }\\\\n  message \\\"+vi+\\\"\\\\n  {\\\\n    required string invitedUserId=1;    //被邀请的人的uid\\\\n    optional int32  timeoutTime=2;       //邀请超时时间(秒),默认三十秒\\\\n    required string invitedRoomId=3;    //被邀请的房间\\\\n    required string inviteInfo=4;       //邀请的信息(包含邀请人,被邀请人,各自userid)客户端定义好.协议栈和server透传\\\\n    required string inviteSessionId= 5; //客户端保证唯一性(建议roomid_userid_时间戳_随机数)\\\\n  }\\\\n  message \\\"+Ei+\\\"\\\\n  {\\\\n    required string invitedUserId=1;   //被邀请的人的uid\\\\n    required string invitedRoomId=2;   //被邀请的房间\\\\n    required string inviteInfo=3;      //取消邀请的信息(包含邀请人,被邀请人,各自userid)客户端定义好.协议栈和server透传\\\\n    required string inviteSessionId=4; //邀请的sessionId,客户端发起邀请时产生\\\\n  }\\\\n  message \\\"+Ti+\\\"\\\\n  {\\\\n    required string inviteUserId=1;    //邀请的人的uid\\\\n    required int32  answerCode=2;      //是否接受连麦邀请.0为拒绝,1为接受\\\\n    required string inviteRoomId=3;    //邀请的房间\\\\n    required string inviteSessionId=4; //邀请的sessionId\\\\n    required string content=5;         //需要转发的content\\\\n    optional string key=6;             //如果接受的话,需要加这个字段,放在room级别的k和v,新加入房间的能拉取到\\\\n    optional string value=7;           //如果接受的话,需要加这个字段,放在room级别的k和v,新加入房间的能拉取到\\\\n  }\\\\n  message \\\"+Ii+\\\"\\\\n  {\\\\n    required string inviteRoomId=1;    //邀请的房间\\\\n    required string inviteSessionId=2; //邀请的sessionId\\\\n    required string inviteContent=3;   //结束连麦的信息(需要透传给房间内其他人)\\\\n    repeated string inviteRoomKeys=4;  //需要删除连麦的信息的key\\\\n  }\\\\n  message \\\"+ei+\\\"\\\\n  {\\\\n      required int64 syncTime = 1;//同步时间戳\\\\n      optional bool isEraseMsgContent = 2;//拉取会话时，是否屏蔽掉消息内容\\\\n  }\\\\n  message \\\"+ti+\\\"\\\\n  {\\\\n    required int64 syncTime = 1;//同步时间戳\\\\n  }\\\\n  message  \\\"+ni+\\\"\\\\n  {\\\\n    required string fromUserId = 1;//（谁发的）\\\\n    required string targetId = 2;// 目标Id(超级群Id)\\\\n    required ChannelType type = 3;//发送类型如：（P2P,GROUP,ULTRAGROUP）\\\\n    required string msgUID = 4; // 扩展消息的内容体\\\\n    required int64 msgTime = 5; //原始消息时间\\\\n    optional string busChannel = 6; // 该消息所属会话的业务标识，限制20字符以内\\\\n    optional string content = 7; // 即extraContent消息扩展内容,下表格说明\\\\n  }\\\\n  message \\\"+ii+\\\"  //查询入参\\\\n  {\\\\n    required int64 syncTime = 1;//同步时间戳\\\\n  }\\\\n  message \\\"+si+\\\"  //应答结果\\\\n  {\\\\n    repeated MsgChange list = 1; //变更\\\\n    required int64 syncTime = 2; //同步时间(用于下次同步入参)\\\\n    optional bool  hasNext = 3 ;\\\\n  }\\\\n  message MsgChange  //变更详情\\\\n  {\\\\n    required string targetId = 1; //  目标Id(超级群Id)\\\\n    required ChannelType type = 2; //  会话类型\\\\n    required int64 time = 3;  // 变更时间\\\\n    required int32 changeType = 4;  // 消息变更类型（1:扩展,2:修改,3:撤回)\\\\n    required string msgUID  = 5;  // 消息ID\\\\n    required int64 msgTime = 6;  //  消息时间\\\\n    optional string busChannel = 7; // 频道ID\\\\n    optional bool isAdmin = 8; //是否为管理员，默认为 0，设为 1 时，IMKit 收到此条消息后，小灰条默认显示为“管理员 撤回了一条消息”。\\\\n    optional bool isDel = 9; //默认为 0 撤回该条消息同时，用户端将该条消息删除并替换为一条小灰条撤回提示消息；为 1 时，该条消息删除后，不替换为小灰条提示消息。\\\\n    optional string operatorId = 10; // 新加 - 消息变更的操作人Id\\\\n  }\\\\n  message \\\"+oi+\\\"  //请求\\\\n  {\\\\n    required string targetId = 1; //  目标Id(超级群Id)\\\\n    required ChannelType type = 2; //  会话类型\\\\n    repeated MessageQueryInfo query = 3; //\\\\n  }\\\\n  message MessageQueryInfo\\\\n  {\\\\n    required int64 msgTime = 1;  // 消息时间\\\\n    required string msgUID  = 2;  // 消息ID\\\\n    optional string busChannel = 3; // 频道ID\\\\n  }\\\\n  message \\\"+ui+\\\"  //应答\\\\n  {\\\\n    repeated DownStreamMessage list = 1;//消息\\\\n  }\\\\n  message \\\"+ci+\\\"  //客户端发送\\\\n  {\\\\n    optional string targetId =  1;// targetId\\\\n    optional ChannelType type = 2;//发送会话类型如：（P2P,GROUP） \\\\n    optional int32 opType = 3;  //0 , 正在输入, 1 正在XXX  \\\\n    optional string busChannel = 4; // 频道(channelId,可以为空)\\\\n  }\\\\n  message \\\"+hi+\\\"  //服务端发送\\\\n  {\\\\n      optional ChannelType type = 1;//发送会话类型如（P2P,GROUP） \\\\n      optional int64 notifyType = 2; //0x1 表示明细, 0x2 表示汇总 0x3 表示明细+汇总\\\\n      repeated OperateInfo info = 3 ; //明细列表 当notifyType 为 1和3时,有效\\\\n      repeated OperateSummary summary = 4 ; //汇总列表, 当notifyType 为2和3 时,有效\\\\n  }\\\\n  message \\\"+li+\\\" {\\\\n    // XX 正在做什么\\\\n    optional string targetId = 1; // 超级群Id  会话id\\\\n    optional string busChannel = 2; // 频道(channelId,可以为空)\\\\n    optional string userId = 3; // userId\\\\n    optional int32 opType = 4;  //0 , 正在输入, 1 正在XX \\\\n    optional int64 optime = 5;  //服务端收到用户操作的上行时间. \\\\n  }\\\\n      \\\\n  message \\\"+di+\\\" {\\\\n    // 几个人 正在干什么\\\\n    optional string targetId = 1; // 超级群Id  会话id\\\\n    optional string busChannel = 2; // 频道(channelId,可以为空)\\\\n    optional int32 count  = 3; // 操作人数\\\\n    optional int32 opType = 4; //0, 正在输入, 1 正在XX \\\\n  }\\\\n  message \\\"+Ci+\\\"\\\\n  {\\\\n    required string  rtcRoomId= 1;  //rtc房间ID;\\\\n  }\\\\n  message \\\"+Ri+\\\"\\\\n  {\\\\n    required int32 nothing = 1;   //用于占位\\\\n  }\\\\n}\\\\n\\\";var Ai,Ui,bi,Li,Pi,Di=(Ai=wi,function(e,t){var n,i,r={};return r.ByteBuffer=e,r.c=e,n=e,r.Long=t||null,r.VERSION=\\\"5.0.1\\\",r.WIRE_TYPES={},r.WIRE_TYPES.VARINT=0,r.WIRE_TYPES.BITS64=1,r.WIRE_TYPES.LDELIM=2,r.WIRE_TYPES.STARTGROUP=3,r.WIRE_TYPES.ENDGROUP=4,r.WIRE_TYPES.BITS32=5,r.PACKABLE_WIRE_TYPES=[r.WIRE_TYPES.VARINT,r.WIRE_TYPES.BITS64,r.WIRE_TYPES.BITS32],r.TYPES={int32:{name:\\\"int32\\\",wireType:r.WIRE_TYPES.VARINT,defaultValue:0},uint32:{name:\\\"uint32\\\",wireType:r.WIRE_TYPES.VARINT,defaultValue:0},sint32:{name:\\\"sint32\\\",wireType:r.WIRE_TYPES.VARINT,defaultValue:0},int64:{name:\\\"int64\\\",wireType:r.WIRE_TYPES.VARINT,defaultValue:r.Long?r.Long.ZERO:void 0},uint64:{name:\\\"uint64\\\",wireType:r.WIRE_TYPES.VARINT,defaultValue:r.Long?r.Long.UZERO:void 0},sint64:{name:\\\"sint64\\\",wireType:r.WIRE_TYPES.VARINT,defaultValue:r.Long?r.Long.ZERO:void 0},bool:{name:\\\"bool\\\",wireType:r.WIRE_TYPES.VARINT,defaultValue:!1},double:{name:\\\"double\\\",wireType:r.WIRE_TYPES.BITS64,defaultValue:0},string:{name:\\\"string\\\",wireType:r.WIRE_TYPES.LDELIM,defaultValue:\\\"\\\"},bytes:{name:\\\"bytes\\\",wireType:r.WIRE_TYPES.LDELIM,defaultValue:null},fixed32:{name:\\\"fixed32\\\",wireType:r.WIRE_TYPES.BITS32,defaultValue:0},sfixed32:{name:\\\"sfixed32\\\",wireType:r.WIRE_TYPES.BITS32,defaultValue:0},fixed64:{name:\\\"fixed64\\\",wireType:r.WIRE_TYPES.BITS64,defaultValue:r.Long?r.Long.UZERO:void 0},sfixed64:{name:\\\"sfixed64\\\",wireType:r.WIRE_TYPES.BITS64,defaultValue:r.Long?r.Long.ZERO:void 0},float:{name:\\\"float\\\",wireType:r.WIRE_TYPES.BITS32,defaultValue:0},enum:{name:\\\"enum\\\",wireType:r.WIRE_TYPES.VARINT,defaultValue:0},message:{name:\\\"message\\\",wireType:r.WIRE_TYPES.LDELIM,defaultValue:null},group:{name:\\\"group\\\",wireType:r.WIRE_TYPES.STARTGROUP,defaultValue:null}},r.MAP_KEY_TYPES=[r.TYPES.int32,r.TYPES.sint32,r.TYPES.sfixed32,r.TYPES.uint32,r.TYPES.fixed32,r.TYPES.int64,r.TYPES.sint64,r.TYPES.sfixed64,r.TYPES.uint64,r.TYPES.fixed64,r.TYPES.bool,r.TYPES.string,r.TYPES.bytes],r.ID_MIN=1,r.ID_MAX=536870911,r.convertFieldsToCamelCase=!1,r.populateAccessors=!0,r.populateDefaults=!0,r.Util=function(){var e={};return e.IS_NODE=!(\\\"object\\\"!=typeof process||process+\\\"\\\"!=\\\"[object process]\\\"||process.browser),e.XHR=function(){var e,t=[function(){return new XMLHttpRequest},function(){return new ActiveXObject(\\\"Msxml2.XMLHTTP\\\")},function(){return new ActiveXObject(\\\"Msxml3.XMLHTTP\\\")},function(){return new ActiveXObject(\\\"Microsoft.XMLHTTP\\\")}],n=null;for(e=0;e<t.length;e++){try{n=t[e]()}catch(e){continue}break}if(!n)throw Error(\\\"XMLHttpRequest is not supported\\\");return n},e.fetch=function(t,n){if(n&&\\\"function\\\"!=typeof n&&(n=null),e.IS_NODE)if(n)g.readFile(t,(function(e,t){n(e?null:\\\"\\\"+t)}));else try{return g.readFileSync(t)}catch(e){return null}else{var i=e.XHR();if(i.open(\\\"GET\\\",t,!!n),i.setRequestHeader(\\\"Accept\\\",\\\"text/plain\\\"),\\\"function\\\"==typeof i.overrideMimeType&&i.overrideMimeType(\\\"text/plain\\\"),!n)return i.send(null),200==i.status||0==i.status&&\\\"string\\\"==typeof i.responseText?i.responseText:null;if(i.onreadystatechange=function(){4==i.readyState&&(200==i.status||0==i.status&&\\\"string\\\"==typeof i.responseText?n(i.responseText):n(null))},4==i.readyState)return;i.send(null)}},e.toCamelCase=function(e){return e.replace(/_([a-zA-Z])/g,(function(e,t){return t.toUpperCase()}))},e}(),r.Lang={DELIM:/[\\\\s\\\\{\\\\}=;:\\\\[\\\\],'\\\"\\\\(\\\\)<>]/g,RULE:/^(?:required|optional|repeated|map)$/,TYPE:/^(?:double|float|int32|uint32|sint32|int64|uint64|sint64|fixed32|sfixed32|fixed64|sfixed64|bool|string|bytes)$/,NAME:/^[a-zA-Z_][a-zA-Z_0-9]*$/,TYPEDEF:/^[a-zA-Z][a-zA-Z_0-9]*$/,TYPEREF:/^(?:\\\\.?[a-zA-Z_][a-zA-Z_0-9]*)+$/,FQTYPEREF:/^(?:\\\\.[a-zA-Z][a-zA-Z_0-9]*)+$/,NUMBER:/^-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+|([0-9]*(\\\\.[0-9]*)?([Ee][+-]?[0-9]+)?)|inf|nan)$/,NUMBER_DEC:/^(?:[1-9][0-9]*|0)$/,NUMBER_HEX:/^0[xX][0-9a-fA-F]+$/,NUMBER_OCT:/^0[0-7]+$/,NUMBER_FLT:/^([0-9]*(\\\\.[0-9]*)?([Ee][+-]?[0-9]+)?|inf|nan)$/,BOOL:/^(?:true|false)$/i,ID:/^(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/,NEGID:/^\\\\-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/,WHITESPACE:/\\\\s/,STRING:/(?:\\\"([^\\\"\\\\\\\\]*(?:\\\\\\\\.[^\\\"\\\\\\\\]*)*)\\\")|(?:'([^'\\\\\\\\]*(?:\\\\\\\\.[^'\\\\\\\\]*)*)')/g,STRING_DQ:/(?:\\\"([^\\\"\\\\\\\\]*(?:\\\\\\\\.[^\\\"\\\\\\\\]*)*)\\\")/g,STRING_SQ:/(?:'([^'\\\\\\\\]*(?:\\\\\\\\.[^'\\\\\\\\]*)*)')/g},r.DotProto=function(e,t){function n(e,n){var i=-1,r=1;if(\\\"-\\\"==e.charAt(0)&&(r=-1,e=e.substring(1)),t.NUMBER_DEC.test(e))i=parseInt(e);else if(t.NUMBER_HEX.test(e))i=parseInt(e.substring(2),16);else{if(!t.NUMBER_OCT.test(e))throw Error(\\\"illegal id value: \\\"+(r<0?\\\"-\\\":\\\"\\\")+e);i=parseInt(e.substring(1),8)}if(i=0|r*i,!n&&i<0)throw Error(\\\"illegal id value: \\\"+(r<0?\\\"-\\\":\\\"\\\")+e);return i}function i(e){var n=1;if(\\\"-\\\"==e.charAt(0)&&(n=-1,e=e.substring(1)),t.NUMBER_DEC.test(e))return n*parseInt(e,10);if(t.NUMBER_HEX.test(e))return n*parseInt(e.substring(2),16);if(t.NUMBER_OCT.test(e))return n*parseInt(e.substring(1),8);if(\\\"inf\\\"===e)return 1/0*n;if(\\\"nan\\\"===e)return NaN;if(t.NUMBER_FLT.test(e))return n*parseFloat(e);throw Error(\\\"illegal number value: \\\"+(n<0?\\\"-\\\":\\\"\\\")+e)}function r(e,t,n){void 0===e[t]?e[t]=n:(Array.isArray(e[t])||(e[t]=[e[t]]),e[t].push(n))}var s,o,a={},u=function(e){this.source=e+\\\"\\\",this.index=0,this.line=1,this.stack=[],this._stringOpen=null},c=u.prototype;return c._readString=function(){var e,n='\\\"'===this._stringOpen?t.STRING_DQ:t.STRING_SQ;if(n.lastIndex=this.index-1,!(e=n.exec(this.source)))throw Error(\\\"unterminated string\\\");return this.index=n.lastIndex,this.stack.push(this._stringOpen),this._stringOpen=null,e[1]},c.next=function(){var e,n,i,r,s;if(this.stack.length>0)return this.stack.shift();if(this.index>=this.source.length)return null;if(null!==this._stringOpen)return this._readString();do{for(e=!1;t.WHITESPACE.test(i=this.source.charAt(this.index));)if(\\\"\\\\n\\\"===i&&++this.line,++this.index===this.source.length)return null;if(\\\"/\\\"===this.source.charAt(this.index))if(++this.index,\\\"/\\\"===this.source.charAt(this.index)){for(;\\\"\\\\n\\\"!==this.source.charAt(++this.index);)if(this.index==this.source.length)return null;++this.index,++this.line,e=!0}else{if(\\\"*\\\"!==(i=this.source.charAt(this.index)))return\\\"/\\\";do{if(\\\"\\\\n\\\"===i&&++this.line,++this.index===this.source.length)return null;n=i,i=this.source.charAt(this.index)}while(\\\"*\\\"!==n||\\\"/\\\"!==i);++this.index,e=!0}}while(e);if(this.index===this.source.length)return null;if(r=this.index,t.DELIM.lastIndex=0,!t.DELIM.test(this.source.charAt(r++)))for(;r<this.source.length&&!t.DELIM.test(this.source.charAt(r));)++r;return('\\\"'===(s=this.source.substring(this.index,this.index=r))||\\\"'\\\"===s)&&(this._stringOpen=s),s},c.peek=function(){if(0===this.stack.length){var e=this.next();if(null===e)return null;this.stack.push(e)}return this.stack[0]},c.skip=function(e){var t=this.next();if(t!==e)throw Error(\\\"illegal '\\\"+t+\\\"', '\\\"+e+\\\"' expected\\\")},c.omit=function(e){return this.peek()===e&&(this.next(),!0)},c.toString=function(){return\\\"Tokenizer (\\\"+this.index+\\\"/\\\"+this.source.length+\\\" at line \\\"+this.line+\\\")\\\"},a.Tokenizer=u,(o=(s=function(e){this.tn=new u(e),this.proto3=!1}).prototype).parse=function(){var e,n={name:\\\"[ROOT]\\\",package:null,messages:[],enums:[],imports:[],options:{},services:[]},i=!0;try{for(;e=this.tn.next();)switch(e){case\\\"package\\\":if(!i||null!==n.package)throw Error(\\\"unexpected 'package'\\\");if(e=this.tn.next(),!t.TYPEREF.test(e))throw Error(\\\"illegal package name: \\\"+e);this.tn.skip(\\\";\\\"),n.package=e;break;case\\\"import\\\":if(!i)throw Error(\\\"unexpected 'import'\\\");\\\"public\\\"===(e=this.tn.peek())&&this.tn.next(),e=this._readString(),this.tn.skip(\\\";\\\"),n.imports.push(e);break;case\\\"syntax\\\":if(!i)throw Error(\\\"unexpected 'syntax'\\\");this.tn.skip(\\\"=\\\"),\\\"proto3\\\"===(n.syntax=this._readString())&&(this.proto3=!0),this.tn.skip(\\\";\\\");break;case\\\"message\\\":this._parseMessage(n,null),i=!1;break;case\\\"enum\\\":this._parseEnum(n),i=!1;break;case\\\"option\\\":this._parseOption(n);break;case\\\"service\\\":this._parseService(n);break;case\\\"extend\\\":this._parseExtend(n);break;default:throw Error(\\\"unexpected '\\\"+e+\\\"'\\\")}}catch(e){throw e.message=\\\"Parse error at line \\\"+this.tn.line+\\\": \\\"+e.message,e}return delete n.name,n},s.parse=function(e){return new s(e).parse()},o._readString=function(){var e,t,n=\\\"\\\";do{if(\\\"'\\\"!==(t=this.tn.next())&&'\\\"'!==t)throw Error(\\\"illegal string delimiter: \\\"+t);n+=this.tn.next(),this.tn.skip(t),e=this.tn.peek()}while('\\\"'===e||'\\\"'===e);return n},o._readValue=function(e){var n=this.tn.peek();if('\\\"'===n||\\\"'\\\"===n)return this._readString();if(this.tn.next(),t.NUMBER.test(n))return i(n);if(t.BOOL.test(n))return\\\"true\\\"===n.toLowerCase();if(e&&t.TYPEREF.test(n))return n;throw Error(\\\"illegal value: \\\"+n)},o._parseOption=function(e,n){var i,r=this.tn.next(),s=!1;if(\\\"(\\\"===r&&(s=!0,r=this.tn.next()),!t.TYPEREF.test(r))throw Error(\\\"illegal option name: \\\"+r);i=r,s&&(this.tn.skip(\\\")\\\"),i=\\\"(\\\"+i+\\\")\\\",r=this.tn.peek(),t.FQTYPEREF.test(r)&&(i+=r,this.tn.next())),this.tn.skip(\\\"=\\\"),this._parseOptionValue(e,i),n||this.tn.skip(\\\";\\\")},o._parseOptionValue=function(e,n){var i=this.tn.peek();if(\\\"{\\\"!==i)r(e.options,n,this._readValue(!0));else for(this.tn.skip(\\\"{\\\");\\\"}\\\"!==(i=this.tn.next());){if(!t.NAME.test(i))throw Error(\\\"illegal option name: \\\"+n+\\\".\\\"+i);this.tn.omit(\\\":\\\")?r(e.options,n+\\\".\\\"+i,this._readValue(!0)):this._parseOptionValue(e,n+\\\".\\\"+i)}},o._parseService=function(e){var n,i=this.tn.next();if(!t.NAME.test(i))throw Error(\\\"illegal service name at line \\\"+this.tn.line+\\\": \\\"+i);for(n={name:i,rpc:{},options:{}},this.tn.skip(\\\"{\\\");\\\"}\\\"!==(i=this.tn.next());)if(\\\"option\\\"===i)this._parseOption(n);else{if(\\\"rpc\\\"!==i)throw Error(\\\"illegal service token: \\\"+i);this._parseServiceRPC(n)}this.tn.omit(\\\";\\\"),e.services.push(n)},o._parseServiceRPC=function(e){var n,i,r=\\\"rpc\\\",s=this.tn.next();if(!t.NAME.test(s))throw Error(\\\"illegal rpc service method name: \\\"+s);if(n=s,i={request:null,response:null,request_stream:!1,response_stream:!1,options:{}},this.tn.skip(\\\"(\\\"),\\\"stream\\\"===(s=this.tn.next()).toLowerCase()&&(i.request_stream=!0,s=this.tn.next()),!t.TYPEREF.test(s))throw Error(\\\"illegal rpc service request type: \\\"+s);if(i.request=s,this.tn.skip(\\\")\\\"),\\\"returns\\\"!==(s=this.tn.next()).toLowerCase())throw Error(\\\"illegal rpc service request type delimiter: \\\"+s);if(this.tn.skip(\\\"(\\\"),\\\"stream\\\"===(s=this.tn.next()).toLowerCase()&&(i.response_stream=!0,s=this.tn.next()),i.response=s,this.tn.skip(\\\")\\\"),\\\"{\\\"===(s=this.tn.peek())){for(this.tn.next();\\\"}\\\"!==(s=this.tn.next());){if(\\\"option\\\"!==s)throw Error(\\\"illegal rpc service token: \\\"+s);this._parseOption(i)}this.tn.omit(\\\";\\\")}else this.tn.skip(\\\";\\\");void 0===e[r]&&(e[r]={}),e[r][n]=i},o._parseMessage=function(e,i){var r=!!i,s=this.tn.next(),o={name:\\\"\\\",fields:[],enums:[],messages:[],options:{},services:[],oneofs:{}};if(!t.NAME.test(s))throw Error(\\\"illegal \\\"+(r?\\\"group\\\":\\\"message\\\")+\\\" name: \\\"+s);for(o.name=s,r&&(this.tn.skip(\\\"=\\\"),i.id=n(this.tn.next()),o.isGroup=!0),\\\"[\\\"===(s=this.tn.peek())&&i&&this._parseFieldOptions(i),this.tn.skip(\\\"{\\\");\\\"}\\\"!==(s=this.tn.next());)if(t.RULE.test(s))this._parseMessageField(o,s);else if(\\\"oneof\\\"===s)this._parseMessageOneOf(o);else if(\\\"enum\\\"===s)this._parseEnum(o);else if(\\\"message\\\"===s)this._parseMessage(o);else if(\\\"option\\\"===s)this._parseOption(o);else if(\\\"service\\\"===s)this._parseService(o);else if(\\\"extensions\\\"===s)o.extensions=this._parseExtensionRanges();else if(\\\"reserved\\\"===s)this._parseIgnored();else if(\\\"extend\\\"===s)this._parseExtend(o);else{if(!t.TYPEREF.test(s))throw Error(\\\"illegal message token: \\\"+s);if(!this.proto3)throw Error(\\\"illegal field rule: \\\"+s);this._parseMessageField(o,\\\"optional\\\",s)}return this.tn.omit(\\\";\\\"),e.messages.push(o),o},o._parseIgnored=function(){for(;\\\";\\\"!==this.tn.peek();)this.tn.next();this.tn.skip(\\\";\\\")},o._parseMessageField=function(e,i,r){var s,o,a;if(!t.RULE.test(i))throw Error(\\\"illegal message field rule: \\\"+i);if(s={rule:i,type:\\\"\\\",name:\\\"\\\",options:{},id:0},\\\"map\\\"===i){if(r)throw Error(\\\"illegal type: \\\"+r);if(this.tn.skip(\\\"<\\\"),o=this.tn.next(),!t.TYPE.test(o)&&!t.TYPEREF.test(o))throw Error(\\\"illegal message field type: \\\"+o);if(s.keytype=o,this.tn.skip(\\\",\\\"),o=this.tn.next(),!t.TYPE.test(o)&&!t.TYPEREF.test(o))throw Error(\\\"illegal message field: \\\"+o);if(s.type=o,this.tn.skip(\\\">\\\"),o=this.tn.next(),!t.NAME.test(o))throw Error(\\\"illegal message field name: \\\"+o);s.name=o,this.tn.skip(\\\"=\\\"),s.id=n(this.tn.next()),\\\"[\\\"===(o=this.tn.peek())&&this._parseFieldOptions(s),this.tn.skip(\\\";\\\")}else if(\\\"group\\\"===(r=void 0!==r?r:this.tn.next())){if(a=this._parseMessage(e,s),!/^[A-Z]/.test(a.name))throw Error(\\\"illegal group name: \\\"+a.name);s.type=a.name,s.name=a.name.toLowerCase(),this.tn.omit(\\\";\\\")}else{if(!t.TYPE.test(r)&&!t.TYPEREF.test(r))throw Error(\\\"illegal message field type: \\\"+r);if(s.type=r,o=this.tn.next(),!t.NAME.test(o))throw Error(\\\"illegal message field name: \\\"+o);s.name=o,this.tn.skip(\\\"=\\\"),s.id=n(this.tn.next()),\\\"[\\\"===(o=this.tn.peek())&&this._parseFieldOptions(s),this.tn.skip(\\\";\\\")}return e.fields.push(s),s},o._parseMessageOneOf=function(e){var n,i,r,s=this.tn.next();if(!t.NAME.test(s))throw Error(\\\"illegal oneof name: \\\"+s);for(i=s,r=[],this.tn.skip(\\\"{\\\");\\\"}\\\"!==(s=this.tn.next());)(n=this._parseMessageField(e,\\\"optional\\\",s)).oneof=i,r.push(n.id);this.tn.omit(\\\";\\\"),e.oneofs[i]=r},o._parseFieldOptions=function(e){this.tn.skip(\\\"[\\\");for(var t=!0;\\\"]\\\"!==this.tn.peek();)t||this.tn.skip(\\\",\\\"),this._parseOption(e,!0),t=!1;this.tn.next()},o._parseEnum=function(e){var i,r={name:\\\"\\\",values:[],options:{}},s=this.tn.next();if(!t.NAME.test(s))throw Error(\\\"illegal name: \\\"+s);for(r.name=s,this.tn.skip(\\\"{\\\");\\\"}\\\"!==(s=this.tn.next());)if(\\\"option\\\"===s)this._parseOption(r);else{if(!t.NAME.test(s))throw Error(\\\"illegal name: \\\"+s);this.tn.skip(\\\"=\\\"),i={name:s,id:n(this.tn.next(),!0)},\\\"[\\\"===(s=this.tn.peek())&&this._parseFieldOptions({options:{}}),this.tn.skip(\\\";\\\"),r.values.push(i)}this.tn.omit(\\\";\\\"),e.enums.push(r)},o._parseExtensionRanges=function(){var t,n,r,s=[];do{for(n=[];;){switch(t=this.tn.next()){case\\\"min\\\":r=e.ID_MIN;break;case\\\"max\\\":r=e.ID_MAX;break;default:r=i(t)}if(n.push(r),2===n.length)break;if(\\\"to\\\"!==this.tn.peek()){n.push(r);break}this.tn.next()}s.push(n)}while(this.tn.omit(\\\",\\\"));return this.tn.skip(\\\";\\\"),s},o._parseExtend=function(e){var n,i=this.tn.next();if(!t.TYPEREF.test(i))throw Error(\\\"illegal extend reference: \\\"+i);for(n={ref:i,fields:[]},this.tn.skip(\\\"{\\\");\\\"}\\\"!==(i=this.tn.next());)if(t.RULE.test(i))this._parseMessageField(n,i);else{if(!t.TYPEREF.test(i))throw Error(\\\"illegal extend token: \\\"+i);if(!this.proto3)throw Error(\\\"illegal field rule: \\\"+i);this._parseMessageField(n,\\\"optional\\\",i)}return this.tn.omit(\\\";\\\"),e.messages.push(n),n},o.toString=function(){return\\\"Parser at line \\\"+this.tn.line},a.Parser=s,a}(r,r.Lang),r.Reflect=function(t){function i(e,n){if(e&&\\\"number\\\"==typeof e.low&&\\\"number\\\"==typeof e.high&&\\\"boolean\\\"==typeof e.unsigned&&e.low==e.low&&e.high==e.high)return new t.Long(e.low,e.high,void 0===n?e.unsigned:n);if(\\\"string\\\"==typeof e)return t.Long.fromString(e,n||!1,10);if(\\\"number\\\"==typeof e)return t.Long.fromNumber(e,n||!1);throw Error(\\\"not convertible to Long\\\")}function r(e,n){var i=n.readVarint32(),s=7&i,o=i>>>3;switch(s){case t.WIRE_TYPES.VARINT:do{i=n.readUint8()}while(128==(128&i));break;case t.WIRE_TYPES.BITS64:n.offset+=8;break;case t.WIRE_TYPES.LDELIM:i=n.readVarint32(),n.offset+=i;break;case t.WIRE_TYPES.STARTGROUP:r(o,n);break;case t.WIRE_TYPES.ENDGROUP:if(o===e)return!1;throw Error(\\\"Illegal GROUPEND after unknown group: \\\"+o+\\\" (\\\"+e+\\\" expected)\\\");case t.WIRE_TYPES.BITS32:n.offset+=4;break;default:throw Error(\\\"Illegal wire type in unknown group \\\"+e+\\\": \\\"+s)}return!0}var s,o,a,u,c,h,l,d,f,p,g,_,y,m,v,E,T={},I=function(e,t,n){this.builder=e,this.parent=t,this.name=n,this.className},C=I.prototype;return C.fqn=function(){for(var e=this.name,t=this;null!=(t=t.parent);)e=t.name+\\\".\\\"+e;return e},C.toString=function(e){return(e?this.className+\\\" \\\":\\\"\\\")+this.fqn()},C.build=function(){throw Error(this.toString(!0)+\\\" cannot be built directly\\\")},T.T=I,(o=(s=function(e,t,n,i,r){I.call(this,e,t,n),this.className=\\\"Namespace\\\",this.children=[],this.options=i||{},this.syntax=r||\\\"proto2\\\"}).prototype=Object.create(I.prototype)).getChildren=function(e){var t,n,i;if(null==(e=e||null))return this.children.slice();for(t=[],n=0,i=this.children.length;i>n;++n)this.children[n]instanceof e&&t.push(this.children[n]);return t},o.addChild=function(e){var t;if(t=this.getChild(e.name))if(t instanceof c.Field&&t.name!==t.originalName&&null===this.getChild(t.originalName))t.name=t.originalName;else{if(!(e instanceof c.Field&&e.name!==e.originalName&&null===this.getChild(e.originalName)))throw Error(\\\"Duplicate name in namespace \\\"+this.toString(!0)+\\\": \\\"+e.name);e.name=e.originalName}this.children.push(e)},o.getChild=function(e){var t,n,i=\\\"number\\\"==typeof e?\\\"id\\\":\\\"name\\\";for(t=0,n=this.children.length;n>t;++t)if(this.children[t][i]===e)return this.children[t];return null},o.resolve=function(e,t){var n,i=\\\"string\\\"==typeof e?e.split(\\\".\\\"):e,r=this,s=0;if(\\\"\\\"===i[s]){for(;null!==r.parent;)r=r.parent;s++}do{do{if(!(r instanceof T.Namespace)){r=null;break}if(!((n=r.getChild(i[s]))&&n instanceof T.T&&(!t||n instanceof T.Namespace))){r=null;break}r=n,s++}while(s<i.length);if(null!=r)break;if(null!==this.parent)return this.parent.resolve(e,t)}while(null!=r);return r},o.qn=function(e){var t,n,i=[],r=e;do{i.unshift(r.name),r=r.parent}while(null!==r);for(t=1;t<=i.length;t++)if(n=i.slice(i.length-t),e===this.resolve(n,e instanceof T.Namespace))return n.join(\\\".\\\");return e.fqn()},o.build=function(){var e,t,n,i={},r=this.children;for(t=0,n=r.length;n>t;++t)(e=r[t])instanceof s&&(i[e.name]=e.build());return Object.defineProperty&&Object.defineProperty(i,\\\"$options\\\",{value:this.buildOpt()}),i},o.buildOpt=function(){var e,t,n,i,r={},s=Object.keys(this.options);for(e=0,t=s.length;t>e;++e)n=s[e],i=this.options[s[e]],r[n]=i;return r},o.getOption=function(e){return void 0===e?this.options:void 0!==this.options[e]?this.options[e]:null},T.Namespace=s,u=(a=function(e,n,i,r){if(this.type=e,this.resolvedType=n,this.isMapKey=i,this.syntax=r,i&&t.MAP_KEY_TYPES.indexOf(e)<0)throw Error(\\\"Invalid map key type: \\\"+e.name)}).prototype,a.defaultFieldValue=function(e){if(\\\"string\\\"==typeof e&&(e=t.TYPES[e]),void 0===e.defaultValue)throw Error(\\\"default value for type \\\"+e.name+\\\" is not supported\\\");return e==t.TYPES.bytes?new n(0):e.defaultValue},u.verifyValue=function(n){var r,s,o,a=function(e,t){throw Error(\\\"Illegal value for \\\"+this.toString(!0)+\\\" of type \\\"+this.type.name+\\\": \\\"+e+\\\" (\\\"+t+\\\")\\\")}.bind(this);switch(this.type){case t.TYPES.int32:case t.TYPES.sint32:case t.TYPES.sfixed32:return(\\\"number\\\"!=typeof n||n==n&&n%1!=0)&&a(typeof n,\\\"not an integer\\\"),n>4294967295?0|n:n;case t.TYPES.uint32:case t.TYPES.fixed32:return(\\\"number\\\"!=typeof n||n==n&&n%1!=0)&&a(typeof n,\\\"not an integer\\\"),n<0?n>>>0:n;case t.TYPES.int64:case t.TYPES.sint64:case t.TYPES.sfixed64:if(t.Long)try{return i(n,!1)}catch(e){a(typeof n,e.message)}else a(typeof n,\\\"requires Long.js\\\");case t.TYPES.uint64:case t.TYPES.fixed64:if(t.Long)try{return i(n,!0)}catch(e){a(typeof n,e.message)}else a(typeof n,\\\"requires Long.js\\\");case t.TYPES.bool:return\\\"boolean\\\"!=typeof n&&a(typeof n,\\\"not a boolean\\\"),n;case t.TYPES.float:case t.TYPES.double:return\\\"number\\\"!=typeof n&&a(typeof n,\\\"not a number\\\"),n;case t.TYPES.string:return\\\"string\\\"==typeof n||n&&n instanceof String||a(typeof n,\\\"not a string\\\"),\\\"\\\"+n;case t.TYPES.bytes:return e.isByteBuffer(n)?n:e.wrap(n);case t.TYPES.enum:for(r=this.resolvedType.getChildren(t.Reflect.Enum.Value),o=0;o<r.length;o++){if(r[o].name==n)return r[o].id;if(r[o].id==n)return r[o].id}if(\\\"proto3\\\"===this.syntax)return(\\\"number\\\"!=typeof n||n==n&&n%1!=0)&&a(typeof n,\\\"not an integer\\\"),(n>4294967295||n<0)&&a(typeof n,\\\"not in range for uint32\\\"),n;a(n,\\\"not a valid enum value\\\");case t.TYPES.group:case t.TYPES.message:if(n&&\\\"object\\\"==typeof n||a(typeof n,\\\"object expected\\\"),n instanceof this.resolvedType.clazz)return n;if(n instanceof t.Builder.Message){for(o in s={},n)n.hasOwnProperty(o)&&(s[o]=n[o]);n=s}return new this.resolvedType.clazz(n)}throw Error(\\\"[INTERNAL] Illegal value for \\\"+this.toString(!0)+\\\": \\\"+n+\\\" (undefined type \\\"+this.type+\\\")\\\")},u.calculateLength=function(e,i){if(null===i)return 0;var r;switch(this.type){case t.TYPES.int32:return i<0?n.calculateVarint64(i):n.calculateVarint32(i);case t.TYPES.uint32:return n.calculateVarint32(i);case t.TYPES.sint32:return n.calculateVarint32(n.zigZagEncode32(i));case t.TYPES.fixed32:case t.TYPES.sfixed32:case t.TYPES.float:return 4;case t.TYPES.int64:case t.TYPES.uint64:return n.calculateVarint64(i);case t.TYPES.sint64:return n.calculateVarint64(n.zigZagEncode64(i));case t.TYPES.fixed64:case t.TYPES.sfixed64:return 8;case t.TYPES.bool:return 1;case t.TYPES.enum:return n.calculateVarint32(i);case t.TYPES.double:return 8;case t.TYPES.string:return r=n.calculateUTF8Bytes(i),n.calculateVarint32(r)+r;case t.TYPES.bytes:if(i.remaining()<0)throw Error(\\\"Illegal value for \\\"+this.toString(!0)+\\\": \\\"+i.remaining()+\\\" bytes remaining\\\");return n.calculateVarint32(i.remaining())+i.remaining();case t.TYPES.message:return r=this.resolvedType.calculate(i),n.calculateVarint32(r)+r;case t.TYPES.group:return(r=this.resolvedType.calculate(i))+n.calculateVarint32(e<<3|t.WIRE_TYPES.ENDGROUP)}throw Error(\\\"[INTERNAL] Illegal value to encode in \\\"+this.toString(!0)+\\\": \\\"+i+\\\" (unknown type)\\\")},u.encodeValue=function(e,i,r){var s,o;if(null===i)return r;switch(this.type){case t.TYPES.int32:i<0?r.writeVarint64(i):r.writeVarint32(i);break;case t.TYPES.uint32:r.writeVarint32(i);break;case t.TYPES.sint32:r.writeVarint32ZigZag(i);break;case t.TYPES.fixed32:r.writeUint32(i);break;case t.TYPES.sfixed32:r.writeInt32(i);break;case t.TYPES.int64:case t.TYPES.uint64:r.writeVarint64(i);break;case t.TYPES.sint64:r.writeVarint64ZigZag(i);break;case t.TYPES.fixed64:r.writeUint64(i);break;case t.TYPES.sfixed64:r.writeInt64(i);break;case t.TYPES.bool:\\\"string\\\"==typeof i?r.writeVarint32(\\\"false\\\"===i.toLowerCase()?0:!!i):r.writeVarint32(i?1:0);break;case t.TYPES.enum:r.writeVarint32(i);break;case t.TYPES.float:r.writeFloat32(i);break;case t.TYPES.double:r.writeFloat64(i);break;case t.TYPES.string:r.writeVString(i);break;case t.TYPES.bytes:if(i.remaining()<0)throw Error(\\\"Illegal value for \\\"+this.toString(!0)+\\\": \\\"+i.remaining()+\\\" bytes remaining\\\");s=i.offset,r.writeVarint32(i.remaining()),r.append(i),i.offset=s;break;case t.TYPES.message:o=(new n).LE(),this.resolvedType.encode(i,o),r.writeVarint32(o.offset),r.append(o.flip());break;case t.TYPES.group:this.resolvedType.encode(i,r),r.writeVarint32(e<<3|t.WIRE_TYPES.ENDGROUP);break;default:throw Error(\\\"[INTERNAL] Illegal value to encode in \\\"+this.toString(!0)+\\\": \\\"+i+\\\" (unknown type)\\\")}return r},u.decode=function(e,n,i){if(n!=this.type.wireType)throw Error(\\\"Unexpected wire type for element\\\");var r,s;switch(this.type){case t.TYPES.int32:return 0|e.readVarint32();case t.TYPES.uint32:return e.readVarint32()>>>0;case t.TYPES.sint32:return 0|e.readVarint32ZigZag();case t.TYPES.fixed32:return e.readUint32()>>>0;case t.TYPES.sfixed32:return 0|e.readInt32();case t.TYPES.int64:return e.readVarint64();case t.TYPES.uint64:return e.readVarint64().toUnsigned();case t.TYPES.sint64:return e.readVarint64ZigZag();case t.TYPES.fixed64:return e.readUint64();case t.TYPES.sfixed64:return e.readInt64();case t.TYPES.bool:return!!e.readVarint32();case t.TYPES.enum:return e.readVarint32();case t.TYPES.float:return e.readFloat();case t.TYPES.double:return e.readDouble();case t.TYPES.string:return e.readVString();case t.TYPES.bytes:if(s=e.readVarint32(),e.remaining()<s)throw Error(\\\"Illegal number of bytes for \\\"+this.toString(!0)+\\\": \\\"+s+\\\" required but got only \\\"+e.remaining());return(r=e.clone()).limit=r.offset+s,e.offset+=s,r;case t.TYPES.message:return s=e.readVarint32(),this.resolvedType.decode(e,s);case t.TYPES.group:return this.resolvedType.decode(e,-1,i)}throw Error(\\\"[INTERNAL] Illegal decode type\\\")},u.valueFromString=function(e){if(!this.isMapKey)throw Error(\\\"valueFromString() called on non-map-key element\\\");switch(this.type){case t.TYPES.int32:case t.TYPES.sint32:case t.TYPES.sfixed32:case t.TYPES.uint32:case t.TYPES.fixed32:return this.verifyValue(parseInt(e));case t.TYPES.int64:case t.TYPES.sint64:case t.TYPES.sfixed64:case t.TYPES.uint64:case t.TYPES.fixed64:return this.verifyValue(e);case t.TYPES.bool:return\\\"true\\\"===e;case t.TYPES.string:return this.verifyValue(e);case t.TYPES.bytes:return n.fromBinary(e)}},u.valueToString=function(e){if(!this.isMapKey)throw Error(\\\"valueToString() called on non-map-key element\\\");return this.type===t.TYPES.bytes?e.toString(\\\"binary\\\"):e.toString()},T.Element=a,(h=(c=function(e,t,n,i,r,o){s.call(this,e,t,n,i,o),this.className=\\\"Message\\\",this.extensions=void 0,this.clazz=null,this.isGroup=!!r,this._fields=null,this._fieldsById=null,this._fieldsByName=null}).prototype=Object.create(s.prototype)).build=function(i){var r,s,o,a;if(this.clazz&&!i)return this.clazz;for(r=function(t,i){function r(e,i,s,o){var a,u,c,h,l,d,f;if(null===e||\\\"object\\\"!=typeof e)return o&&o instanceof t.Reflect.Enum&&null!==(a=t.Reflect.Enum.getName(o.object,e))?a:e;if(n.isByteBuffer(e))return i?e.toBase64():e.toBuffer();if(t.Long.isLong(e))return s?e.toString():t.Long.fromValue(e);if(Array.isArray(e))return u=[],e.forEach((function(e,t){u[t]=r(e,i,s,o)})),u;if(u={},e instanceof t.Map){for(h=(c=e.entries()).next();!h.done;h=c.next())u[e.keyElem.valueToString(h.value[0])]=r(h.value[1],i,s,e.valueElem.resolvedType);return u}for(f in l=e.$type,d=void 0,e)e.hasOwnProperty(f)&&(u[f]=l&&(d=l.getChild(f))?r(e[f],i,s,d.resolvedType):r(e[f],i,s));return u}var s,o,a=i.getChildren(t.Reflect.Message.Field),u=i.getChildren(t.Reflect.Message.OneOf),c=function(e){var r,s,o,h;for(t.Builder.Message.call(this),r=0,s=u.length;s>r;++r)this[u[r].name]=null;for(r=0,s=a.length;s>r;++r)this[(o=a[r]).name]=o.repeated?[]:o.map?new t.Map(o):null,!o.required&&\\\"proto3\\\"!==i.syntax||null===o.defaultValue||(this[o.name]=o.defaultValue);if(arguments.length>0)if(1!==arguments.length||null===e||\\\"object\\\"!=typeof e||!(\\\"function\\\"!=typeof e.encode||e instanceof c)||Array.isArray(e)||e instanceof t.Map||n.isByteBuffer(e)||e instanceof ArrayBuffer||t.Long&&e instanceof t.Long)for(r=0,s=arguments.length;s>r;++r)void 0!==(h=arguments[r])&&this.$set(a[r].name,h);else this.$set(e)},h=c.prototype=Object.create(t.Builder.Message.prototype);for(h.add=function(e,n,r){var s=i._fieldsByName[e];if(!r){if(!s)throw Error(this+\\\"#\\\"+e+\\\" is undefined\\\");if(!(s instanceof t.Reflect.Message.Field))throw Error(this+\\\"#\\\"+e+\\\" is not a field: \\\"+s.toString(!0));if(!s.repeated)throw Error(this+\\\"#\\\"+e+\\\" is not a repeated field\\\");n=s.verifyValue(n,!0)}return null===this[e]&&(this[e]=[]),this[e].push(n),this},h.$add=h.add,h.set=function(e,n,r){var s,o,a;if(e&&\\\"object\\\"==typeof e){for(s in r=n,e)e.hasOwnProperty(s)&&void 0!==(n=e[s])&&this.$set(s,n,r);return this}if(o=i._fieldsByName[e],r)this[e]=n;else{if(!o)throw Error(this+\\\"#\\\"+e+\\\" is not a field: undefined\\\");if(!(o instanceof t.Reflect.Message.Field))throw Error(this+\\\"#\\\"+e+\\\" is not a field: \\\"+o.toString(!0));this[o.name]=n=o.verifyValue(n)}return o&&o.oneof&&(a=this[o.oneof.name],null!==n?(null!==a&&a!==o.name&&(this[a]=null),this[o.oneof.name]=o.name):a===e&&(this[o.oneof.name]=null)),this},h.$set=h.set,h.get=function(e,n){if(n)return this[e];var r=i._fieldsByName[e];if(!(r&&r instanceof t.Reflect.Message.Field))throw Error(this+\\\"#\\\"+e+\\\" is not a field: undefined\\\");if(!(r instanceof t.Reflect.Message.Field))throw Error(this+\\\"#\\\"+e+\\\" is not a field: \\\"+r.toString(!0));return this[r.name]},h.$get=h.get,s=0;s<a.length;s++)(o=a[s])instanceof t.Reflect.Message.ExtensionField||i.builder.options.populateAccessors&&function(e){var t,n,r,s=e.originalName.replace(/(_[a-zA-Z])/g,(function(e){return e.toUpperCase().replace(\\\"_\\\",\\\"\\\")}));s=s.substring(0,1).toUpperCase()+s.substring(1),t=e.originalName.replace(/([A-Z])/g,(function(e){return\\\"_\\\"+e})),n=function(t,n){return this[e.name]=n?t:e.verifyValue(t),this},r=function(){return this[e.name]},null===i.getChild(\\\"set\\\"+s)&&(h[\\\"set\\\"+s]=n),null===i.getChild(\\\"set_\\\"+t)&&(h[\\\"set_\\\"+t]=n),null===i.getChild(\\\"get\\\"+s)&&(h[\\\"get\\\"+s]=r),null===i.getChild(\\\"get_\\\"+t)&&(h[\\\"get_\\\"+t]=r)}(o);return h.encode=function(t,n){var r,s;\\\"boolean\\\"==typeof t&&(n=t,t=void 0),r=!1,t||(t=new e,r=!0),s=t.littleEndian;try{return i.encode(this,t.LE(),n),(r?t.flip():t).LE(s)}catch(e){throw t.LE(s),e}},c.encode=function(e,t,n){return new c(e).encode(t,n)},h.calculate=function(){return i.calculate(this)},h.encodeDelimited=function(e){var t,r=!1;return e||(e=new n,r=!0),t=(new n).LE(),i.encode(this,t).flip(),e.writeVarint32(t.remaining()),e.append(t),r?e.flip():e},h.encodeAB=function(){try{return this.encode().toArrayBuffer()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toArrayBuffer()),e}},h.toArrayBuffer=h.encodeAB,h.encodeNB=function(){try{return this.encode().toBuffer()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toBuffer()),e}},h.toBuffer=h.encodeNB,h.encode64=function(){try{return this.encode().toBase64()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toBase64()),e}},h.toBase64=h.encode64,h.encodeHex=function(){try{return this.encode().toHex()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toHex()),e}},h.toHex=h.encodeHex,h.toRaw=function(e,t){return r(this,!!e,!!t,this.$type)},h.encodeJSON=function(){return JSON.stringify(r(this,!0,!0,this.$type))},c.decode=function(e,t){var r,s;\\\"string\\\"==typeof e&&(e=n.wrap(e,t||\\\"base64\\\")),r=(e=n.isByteBuffer(e)?e:n.wrap(e)).littleEndian;try{return s=i.decode(e.LE()),e.LE(r),s}catch(t){throw e.LE(r),t}},c.decodeDelimited=function(e,t){var r,s,o;if(\\\"string\\\"==typeof e&&(e=n.wrap(e,t||\\\"base64\\\")),(e=n.isByteBuffer(e)?e:n.wrap(e)).remaining()<1)return null;if(r=e.offset,s=e.readVarint32(),e.remaining()<s)return e.offset=r,null;try{return o=i.decode(e.slice(e.offset,e.offset+s).LE()),e.offset+=s,o}catch(t){throw e.offset+=s,t}},c.decode64=function(e){return c.decode(e,\\\"base64\\\")},c.decodeHex=function(e){return c.decode(e,\\\"hex\\\")},c.decodeJSON=function(e){return new c(JSON.parse(e))},h.toString=function(){return i.toString()},Object.defineProperty&&(Object.defineProperty(c,\\\"$options\\\",{value:i.buildOpt()}),Object.defineProperty(h,\\\"$options\\\",{value:c.$options}),Object.defineProperty(c,\\\"$type\\\",{value:i}),Object.defineProperty(h,\\\"$type\\\",{value:i})),c}(t,this),this._fields=[],this._fieldsById={},this._fieldsByName={},o=0,a=this.children.length;a>o;o++)if((s=this.children[o])instanceof g||s instanceof c||s instanceof m){if(r.hasOwnProperty(s.name))throw Error(\\\"Illegal reflect child of \\\"+this.toString(!0)+\\\": \\\"+s.toString(!0)+\\\" cannot override static property '\\\"+s.name+\\\"'\\\");r[s.name]=s.build()}else if(s instanceof c.Field)s.build(),this._fields.push(s),this._fieldsById[s.id]=s,this._fieldsByName[s.name]=s;else if(!(s instanceof c.OneOf||s instanceof y))throw Error(\\\"Illegal reflect child of \\\"+this.toString(!0)+\\\": \\\"+this.children[o].toString(!0));return this.clazz=r},h.encode=function(e,t,n){var i,r,s,o,a,u=null;for(s=0,o=this._fields.length;o>s;++s)r=e[(i=this._fields[s]).name],i.required&&null===r?null===u&&(u=i):i.encode(n?r:i.verifyValue(r),t,e);if(null!==u)throw(a=Error(\\\"Missing at least one required field for \\\"+this.toString(!0)+\\\": \\\"+u)).encoded=t,a;return t},h.calculate=function(e){for(var t,n,i=0,r=0,s=this._fields.length;s>r;++r){if(n=e[(t=this._fields[r]).name],t.required&&null===n)throw Error(\\\"Missing at least one required field for \\\"+this.toString(!0)+\\\": \\\"+t);i+=t.calculate(n,e)}return i},h.decode=function(e,n,i){var s,o,a,u,c,h,l,d,f,p,g,_;for(n=\\\"number\\\"==typeof n?n:-1,c=e.offset,h=new this.clazz;e.offset<c+n||-1===n&&e.remaining()>0;){if(a=(s=e.readVarint32())>>>3,(o=7&s)===t.WIRE_TYPES.ENDGROUP){if(a!==i)throw Error(\\\"Illegal group end indicator for \\\"+this.toString(!0)+\\\": \\\"+a+\\\" (\\\"+(i?i+\\\" expected\\\":\\\"not a group\\\")+\\\")\\\");break}if(u=this._fieldsById[a])u.repeated&&!u.options.packed?h[u.name].push(u.decode(o,e)):u.map?(d=u.decode(o,e),h[u.name].set(d[0],d[1])):(h[u.name]=u.decode(o,e),u.oneof&&(null!==(f=h[u.oneof.name])&&f!==u.name&&(h[f]=null),h[u.oneof.name]=u.name));else switch(o){case t.WIRE_TYPES.VARINT:e.readVarint32();break;case t.WIRE_TYPES.BITS32:e.offset+=4;break;case t.WIRE_TYPES.BITS64:e.offset+=8;break;case t.WIRE_TYPES.LDELIM:l=e.readVarint32(),e.offset+=l;break;case t.WIRE_TYPES.STARTGROUP:for(;r(a,e););break;default:throw Error(\\\"Illegal wire type for unknown field \\\"+a+\\\" in \\\"+this.toString(!0)+\\\"#decode: \\\"+o)}}for(p=0,g=this._fields.length;g>p;++p)if(null===h[(u=this._fields[p]).name])if(\\\"proto3\\\"===this.syntax)h[u.name]=u.defaultValue;else{if(u.required)throw(_=Error(\\\"Missing at least one required field for \\\"+this.toString(!0)+\\\": \\\"+u.name)).decoded=h,_;t.populateDefaults&&null!==u.defaultValue&&(h[u.name]=u.defaultValue)}return h},T.Message=c,(d=(l=function(e,n,i,r,s,o,a,u,h,l){I.call(this,e,n,o),this.className=\\\"Message.Field\\\",this.required=\\\"required\\\"===i,this.repeated=\\\"repeated\\\"===i,this.map=\\\"map\\\"===i,this.keyType=r||null,this.type=s,this.resolvedType=null,this.id=a,this.options=u||{},this.defaultValue=null,this.oneof=h||null,this.syntax=l||\\\"proto2\\\",this.originalName=this.name,this.element=null,this.keyElement=null,!this.builder.options.convertFieldsToCamelCase||this instanceof c.ExtensionField||(this.name=t.Util.toCamelCase(this.name))}).prototype=Object.create(I.prototype)).build=function(){this.element=new a(this.type,this.resolvedType,!1,this.syntax),this.map&&(this.keyElement=new a(this.keyType,void 0,!0,this.syntax)),\\\"proto3\\\"!==this.syntax||this.repeated||this.map?void 0!==this.options.default&&(this.defaultValue=this.verifyValue(this.options.default)):this.defaultValue=a.defaultFieldValue(this.type)},d.verifyValue=function(e,n){var i,r,s;if(n=n||!1,i=function(e,t){throw Error(\\\"Illegal value for \\\"+this.toString(!0)+\\\" of type \\\"+this.type.name+\\\": \\\"+e+\\\" (\\\"+t+\\\")\\\")}.bind(this),null===e)return this.required&&i(typeof e,\\\"required\\\"),\\\"proto3\\\"===this.syntax&&this.type!==t.TYPES.message&&i(typeof e,\\\"proto3 field without field presence cannot be null\\\"),null;if(this.repeated&&!n){for(Array.isArray(e)||(e=[e]),s=[],r=0;r<e.length;r++)s.push(this.element.verifyValue(e[r]));return s}return this.map&&!n?e instanceof t.Map?e:(e instanceof Object||i(typeof e,\\\"expected ProtoBuf.Map or raw object for map field\\\"),new t.Map(this,e)):(!this.repeated&&Array.isArray(e)&&i(typeof e,\\\"no array expected\\\"),this.element.verifyValue(e))},d.hasWirePresence=function(e,n){if(\\\"proto3\\\"!==this.syntax)return null!==e;if(this.oneof&&n[this.oneof.name]===this.name)return!0;switch(this.type){case t.TYPES.int32:case t.TYPES.sint32:case t.TYPES.sfixed32:case t.TYPES.uint32:case t.TYPES.fixed32:return 0!==e;case t.TYPES.int64:case t.TYPES.sint64:case t.TYPES.sfixed64:case t.TYPES.uint64:case t.TYPES.fixed64:return 0!==e.low||0!==e.high;case t.TYPES.bool:return e;case t.TYPES.float:case t.TYPES.double:return 0!==e;case t.TYPES.string:return e.length>0;case t.TYPES.bytes:return e.remaining()>0;case t.TYPES.enum:return 0!==e;case t.TYPES.message:return null!==e;default:return!0}},d.encode=function(e,i,r){var s,o,a,u,c;if(null===this.type||\\\"object\\\"!=typeof this.type)throw Error(\\\"[INTERNAL] Unresolved type in \\\"+this.toString(!0)+\\\": \\\"+this.type);if(null===e||this.repeated&&0==e.length)return i;try{if(this.repeated)if(this.options.packed&&t.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0){for(i.writeVarint32(this.id<<3|t.WIRE_TYPES.LDELIM),i.ensureCapacity(i.offset+=1),o=i.offset,s=0;s<e.length;s++)this.element.encodeValue(this.id,e[s],i);a=i.offset-o,(u=n.calculateVarint32(a))>1&&(c=i.slice(o,i.offset),o+=u-1,i.offset=o,i.append(c)),i.writeVarint32(a,o-u)}else for(s=0;s<e.length;s++)i.writeVarint32(this.id<<3|this.type.wireType),this.element.encodeValue(this.id,e[s],i);else this.map?e.forEach((function(e,r){var s=n.calculateVarint32(8|this.keyType.wireType)+this.keyElement.calculateLength(1,r)+n.calculateVarint32(16|this.type.wireType)+this.element.calculateLength(2,e);i.writeVarint32(this.id<<3|t.WIRE_TYPES.LDELIM),i.writeVarint32(s),i.writeVarint32(8|this.keyType.wireType),this.keyElement.encodeValue(1,r,i),i.writeVarint32(16|this.type.wireType),this.element.encodeValue(2,e,i)}),this):this.hasWirePresence(e,r)&&(i.writeVarint32(this.id<<3|this.type.wireType),this.element.encodeValue(this.id,e,i))}catch(t){throw Error(\\\"Illegal value for \\\"+this.toString(!0)+\\\": \\\"+e+\\\" (\\\"+t+\\\")\\\")}return i},d.calculate=function(e,i){var r,s,o;if(e=this.verifyValue(e),null===this.type||\\\"object\\\"!=typeof this.type)throw Error(\\\"[INTERNAL] Unresolved type in \\\"+this.toString(!0)+\\\": \\\"+this.type);if(null===e||this.repeated&&0==e.length)return 0;r=0;try{if(this.repeated)if(this.options.packed&&t.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0){for(r+=n.calculateVarint32(this.id<<3|t.WIRE_TYPES.LDELIM),o=0,s=0;s<e.length;s++)o+=this.element.calculateLength(this.id,e[s]);r+=n.calculateVarint32(o),r+=o}else for(s=0;s<e.length;s++)r+=n.calculateVarint32(this.id<<3|this.type.wireType),r+=this.element.calculateLength(this.id,e[s]);else this.map?e.forEach((function(e,i){var s=n.calculateVarint32(8|this.keyType.wireType)+this.keyElement.calculateLength(1,i)+n.calculateVarint32(16|this.type.wireType)+this.element.calculateLength(2,e);r+=n.calculateVarint32(this.id<<3|t.WIRE_TYPES.LDELIM),r+=n.calculateVarint32(s),r+=s}),this):this.hasWirePresence(e,i)&&(r+=n.calculateVarint32(this.id<<3|this.type.wireType),r+=this.element.calculateLength(this.id,e))}catch(t){throw Error(\\\"Illegal value for \\\"+this.toString(!0)+\\\": \\\"+e+\\\" (\\\"+t+\\\")\\\")}return r},d.decode=function(e,n,i){var r,s,o,u,c,h,l;if(!(!this.map&&e==this.type.wireType||!i&&this.repeated&&this.options.packed&&e==t.WIRE_TYPES.LDELIM||this.map&&e==t.WIRE_TYPES.LDELIM))throw Error(\\\"Illegal wire type for field \\\"+this.toString(!0)+\\\": \\\"+e+\\\" (\\\"+this.type.wireType+\\\" expected)\\\");if(e==t.WIRE_TYPES.LDELIM&&this.repeated&&this.options.packed&&t.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0&&!i){for(s=n.readVarint32(),s=n.offset+s,o=[];n.offset<s;)o.push(this.decode(this.type.wireType,n,!0));return o}if(this.map){if(u=a.defaultFieldValue(this.keyType),r=a.defaultFieldValue(this.type),s=n.readVarint32(),n.remaining()<s)throw Error(\\\"Illegal number of bytes for \\\"+this.toString(!0)+\\\": \\\"+s+\\\" required but got only \\\"+n.remaining());for((c=n.clone()).limit=c.offset+s,n.offset+=s;c.remaining()>0;)if(e=7&(h=c.readVarint32()),1==(l=h>>>3))u=this.keyElement.decode(c,e,l);else{if(2!==l)throw Error(\\\"Unexpected tag in map field key/value submessage\\\");r=this.element.decode(c,e,l)}return[u,r]}return this.element.decode(n,e,this.id)},T.Message.Field=l,(f=function(e,t,n,i,r,s,o){l.call(this,e,t,n,null,i,r,s,o),this.extension}).prototype=Object.create(l.prototype),T.Message.ExtensionField=f,p=function(e,t,n){I.call(this,e,t,n),this.fields=[]},T.Message.OneOf=p,(g=function(e,t,n,i,r){s.call(this,e,t,n,i,r),this.className=\\\"Enum\\\",this.object=null}).getName=function(e,t){var n,i,r=Object.keys(e);for(i=0;i<r.length;++i)if(e[n=r[i]]===t)return n;return null},(g.prototype=Object.create(s.prototype)).build=function(e){var n,i,r,s;if(this.object&&!e)return this.object;for(n=new t.Builder.Enum,r=0,s=(i=this.getChildren(g.Value)).length;s>r;++r)n[i[r].name]=i[r].id;return Object.defineProperty&&Object.defineProperty(n,\\\"$options\\\",{value:this.buildOpt(),enumerable:!1}),this.object=n},T.Enum=g,(_=function(e,t,n,i){I.call(this,e,t,n),this.className=\\\"Enum.Value\\\",this.id=i}).prototype=Object.create(I.prototype),T.Enum.Value=_,(y=function(e,t,n,i){I.call(this,e,t,n),this.field=i}).prototype=Object.create(I.prototype),T.Extension=y,((m=function(e,t,n,i){s.call(this,e,t,n,i),this.className=\\\"Service\\\",this.clazz=null}).prototype=Object.create(s.prototype)).build=function(e){return this.clazz&&!e?this.clazz:this.clazz=function(e,t){var i,r=function(t){e.Builder.Service.call(this),this.rpcImpl=t||function(e,t,n){setTimeout(n.bind(this,Error(\\\"Not implemented, see: https://github.com/dcodeIO/ProtoBuf.js/wiki/Services\\\")),0)}},s=r.prototype=Object.create(e.Builder.Service.prototype),o=t.getChildren(e.Reflect.Service.RPCMethod);for(i=0;i<o.length;i++)!function(e){s[e.name]=function(i,r){try{try{i=e.resolvedRequestType.clazz.decode(n.wrap(i))}catch(e){if(!(e instanceof TypeError))throw e}if(null===i||\\\"object\\\"!=typeof i)throw Error(\\\"Illegal arguments\\\");i instanceof e.resolvedRequestType.clazz||(i=new e.resolvedRequestType.clazz(i)),this.rpcImpl(e.fqn(),i,(function(n,i){if(!n){try{i=e.resolvedResponseType.clazz.decode(i)}catch(e){}return i&&i instanceof e.resolvedResponseType.clazz?void r(null,i):void r(Error(\\\"Illegal response type received in service method \\\"+t.name+\\\"#\\\"+e.name))}r(n)}))}catch(e){setTimeout(r.bind(this,e),0)}},r[e.name]=function(t,n,i){new r(t)[e.name](n,i)},Object.defineProperty&&(Object.defineProperty(r[e.name],\\\"$options\\\",{value:e.buildOpt()}),Object.defineProperty(s[e.name],\\\"$options\\\",{value:r[e.name].$options}))}(o[i]);return Object.defineProperty&&(Object.defineProperty(r,\\\"$options\\\",{value:t.buildOpt()}),Object.defineProperty(s,\\\"$options\\\",{value:r.$options}),Object.defineProperty(r,\\\"$type\\\",{value:t}),Object.defineProperty(s,\\\"$type\\\",{value:t})),r}(t,this)},T.Service=m,((v=function(e,t,n,i){I.call(this,e,t,n),this.className=\\\"Service.Method\\\",this.options=i||{}}).prototype=Object.create(I.prototype)).buildOpt=o.buildOpt,T.Service.Method=v,(E=function(e,t,n,i,r,s,o,a){v.call(this,e,t,n,a),this.className=\\\"Service.RPCMethod\\\",this.requestName=i,this.responseName=r,this.requestStream=s,this.responseStream=o,this.resolvedRequestType=null,this.resolvedResponseType=null}).prototype=Object.create(v.prototype),T.Service.RPCMethod=E,T}(r),r.Builder=function(e,t,n){function i(e){e.messages&&e.messages.forEach((function(t){t.syntax=e.syntax,i(t)})),e.enums&&e.enums.forEach((function(t){t.syntax=e.syntax}))}var r=function(e){this.ns=new n.Namespace(this,null,\\\"\\\"),this.ptr=this.ns,this.resolved=!1,this.result=null,this.files={},this.importRoot=null,this.options=e||{}},s=r.prototype;return r.isMessage=function(e){return\\\"string\\\"==typeof e.name&&void 0===e.values&&void 0===e.rpc},r.isMessageField=function(e){return\\\"string\\\"==typeof e.rule&&\\\"string\\\"==typeof e.name&&\\\"string\\\"==typeof e.type&&void 0!==e.id},r.isEnum=function(e){return\\\"string\\\"==typeof e.name&&!(void 0===e.values||!Array.isArray(e.values)||0===e.values.length)},r.isService=function(e){return!(\\\"string\\\"!=typeof e.name||\\\"object\\\"!=typeof e.rpc||!e.rpc)},r.isExtend=function(e){return\\\"string\\\"==typeof e.ref},s.reset=function(){return this.ptr=this.ns,this},s.define=function(e){if(\\\"string\\\"!=typeof e||!t.TYPEREF.test(e))throw Error(\\\"illegal namespace: \\\"+e);return e.split(\\\".\\\").forEach((function(e){var t=this.ptr.getChild(e);null===t&&this.ptr.addChild(t=new n.Namespace(this,this.ptr,e)),this.ptr=t}),this),this},s.create=function(t){var i,s,o,a,u;if(!t)return this;if(Array.isArray(t)){if(0===t.length)return this;t=t.slice()}else t=[t];for(i=[t];i.length>0;){if(t=i.pop(),!Array.isArray(t))throw Error(\\\"not a valid namespace: \\\"+JSON.stringify(t));for(;t.length>0;){if(s=t.shift(),r.isMessage(s)){if(o=new n.Message(this,this.ptr,s.name,s.options,s.isGroup,s.syntax),a={},s.oneofs&&Object.keys(s.oneofs).forEach((function(e){o.addChild(a[e]=new n.Message.OneOf(this,o,e))}),this),s.fields&&s.fields.forEach((function(e){if(null!==o.getChild(0|e.id))throw Error(\\\"duplicate or invalid field id in \\\"+o.name+\\\": \\\"+e.id);if(e.options&&\\\"object\\\"!=typeof e.options)throw Error(\\\"illegal field options in \\\"+o.name+\\\"#\\\"+e.name);var t=null;if(\\\"string\\\"==typeof e.oneof&&!(t=a[e.oneof]))throw Error(\\\"illegal oneof in \\\"+o.name+\\\"#\\\"+e.name+\\\": \\\"+e.oneof);e=new n.Message.Field(this,o,e.rule,e.keytype,e.type,e.name,e.id,e.options,t,s.syntax),t&&t.fields.push(e),o.addChild(e)}),this),u=[],s.enums&&s.enums.forEach((function(e){u.push(e)})),s.messages&&s.messages.forEach((function(e){u.push(e)})),s.services&&s.services.forEach((function(e){u.push(e)})),s.extensions&&(o.extensions=\\\"number\\\"==typeof s.extensions[0]?[s.extensions]:s.extensions),this.ptr.addChild(o),u.length>0){i.push(t),t=u,u=null,this.ptr=o,o=null;continue}u=null}else if(r.isEnum(s))o=new n.Enum(this,this.ptr,s.name,s.options,s.syntax),s.values.forEach((function(e){o.addChild(new n.Enum.Value(this,o,e.name,e.id))}),this),this.ptr.addChild(o);else if(r.isService(s))o=new n.Service(this,this.ptr,s.name,s.options),Object.keys(s.rpc).forEach((function(e){var t=s.rpc[e];o.addChild(new n.Service.RPCMethod(this,o,e,t.request,t.response,!!t.request_stream,!!t.response_stream,t.options))}),this),this.ptr.addChild(o);else{if(!r.isExtend(s))throw Error(\\\"not a valid definition: \\\"+JSON.stringify(s));if(o=this.ptr.resolve(s.ref,!0))s.fields.forEach((function(t){var i,r,s,a;if(null!==o.getChild(0|t.id))throw Error(\\\"duplicate extended field id in \\\"+o.name+\\\": \\\"+t.id);if(o.extensions&&(i=!1,o.extensions.forEach((function(e){t.id>=e[0]&&t.id<=e[1]&&(i=!0)})),!i))throw Error(\\\"illegal extended field id in \\\"+o.name+\\\": \\\"+t.id+\\\" (not within valid ranges)\\\");r=t.name,this.options.convertFieldsToCamelCase&&(r=e.Util.toCamelCase(r)),s=new n.Message.ExtensionField(this,o,t.rule,t.type,this.ptr.fqn()+\\\".\\\"+r,t.id,t.options),a=new n.Extension(this,this.ptr,t.name,s),s.extension=a,this.ptr.addChild(a),o.addChild(s)}),this);else if(!/\\\\.?google\\\\.protobuf\\\\./.test(s.ref))throw Error(\\\"extended message \\\"+s.ref+\\\" is not defined\\\")}s=null,o=null}t=null,this.ptr=this.ptr.parent}return this.resolved=!1,this.result=null,this},s.import=function(t,n){var r,s,o,a,u,c,h,l,d=\\\"/\\\";if(\\\"string\\\"==typeof n){if(e.Util.IS_NODE,!0===this.files[n])return this.reset();this.files[n]=!0}else if(\\\"object\\\"==typeof n){if(r=n.root,e.Util.IS_NODE,(r.indexOf(\\\"\\\\\\\\\\\")>=0||n.file.indexOf(\\\"\\\\\\\\\\\")>=0)&&(d=\\\"\\\\\\\\\\\"),s=r+d+n.file,!0===this.files[s])return this.reset();this.files[s]=!0}if(t.imports&&t.imports.length>0){for(a=!1,\\\"object\\\"==typeof n?(this.importRoot=n.root,a=!0,o=this.importRoot,n=n.file,(o.indexOf(\\\"\\\\\\\\\\\")>=0||n.indexOf(\\\"\\\\\\\\\\\")>=0)&&(d=\\\"\\\\\\\\\\\")):\\\"string\\\"==typeof n?this.importRoot?o=this.importRoot:n.indexOf(\\\"/\\\")>=0?\\\"\\\"===(o=n.replace(/\\\\/[^\\\\/]*$/,\\\"\\\"))&&(o=\\\"/\\\"):n.indexOf(\\\"\\\\\\\\\\\")>=0?(o=n.replace(/\\\\\\\\[^\\\\\\\\]*$/,\\\"\\\"),d=\\\"\\\\\\\\\\\"):o=\\\".\\\":o=null,u=0;u<t.imports.length;u++)if(\\\"string\\\"==typeof t.imports[u]){if(!o)throw Error(\\\"cannot determine import root\\\");if(\\\"google/protobuf/descriptor.proto\\\"===(c=t.imports[u]))continue;if(c=o+d+c,!0===this.files[c])continue;if(/\\\\.proto$/i.test(c)&&!e.DotProto&&(c=c.replace(/\\\\.proto$/,\\\".json\\\")),null===(h=e.Util.fetch(c)))throw Error(\\\"failed to import '\\\"+c+\\\"' in '\\\"+n+\\\"': file not found\\\");/\\\\.json$/i.test(c)?this.import(JSON.parse(h+\\\"\\\"),c):this.import(e.DotProto.Parser.parse(h),c)}else n?/\\\\.(\\\\w+)$/.test(n)?this.import(t.imports[u],n.replace(/^(.+)\\\\.(\\\\w+)$/,(function(e,t,n){return t+\\\"_import\\\"+u+\\\".\\\"+n}))):this.import(t.imports[u],n+\\\"_import\\\"+u):this.import(t.imports[u]);a&&(this.importRoot=null)}return t.package&&this.define(t.package),t.syntax&&i(t),l=this.ptr,t.options&&Object.keys(t.options).forEach((function(e){l.options[e]=t.options[e]})),t.messages&&(this.create(t.messages),this.ptr=l),t.enums&&(this.create(t.enums),this.ptr=l),t.services&&(this.create(t.services),this.ptr=l),t.extends&&this.create(t.extends),this.reset()},s.resolveAll=function(){var i;if(null==this.ptr||\\\"object\\\"==typeof this.ptr.type)return this;if(this.ptr instanceof n.Namespace)this.ptr.children.forEach((function(e){this.ptr=e,this.resolveAll()}),this);else if(this.ptr instanceof n.Message.Field){if(t.TYPE.test(this.ptr.type))this.ptr.type=e.TYPES[this.ptr.type];else{if(!t.TYPEREF.test(this.ptr.type))throw Error(\\\"illegal type reference in \\\"+this.ptr.toString(!0)+\\\": \\\"+this.ptr.type);if(!(i=(this.ptr instanceof n.Message.ExtensionField?this.ptr.extension.parent:this.ptr.parent).resolve(this.ptr.type,!0)))throw Error(\\\"unresolvable type reference in \\\"+this.ptr.toString(!0)+\\\": \\\"+this.ptr.type);if(this.ptr.resolvedType=i,i instanceof n.Enum){if(this.ptr.type=e.TYPES.enum,\\\"proto3\\\"===this.ptr.syntax&&\\\"proto3\\\"!==i.syntax)throw Error(\\\"proto3 message cannot reference proto2 enum\\\")}else{if(!(i instanceof n.Message))throw Error(\\\"illegal type reference in \\\"+this.ptr.toString(!0)+\\\": \\\"+this.ptr.type);this.ptr.type=i.isGroup?e.TYPES.group:e.TYPES.message}}if(this.ptr.map){if(!t.TYPE.test(this.ptr.keyType))throw Error(\\\"illegal key type for map field in \\\"+this.ptr.toString(!0)+\\\": \\\"+this.ptr.keyType);this.ptr.keyType=e.TYPES[this.ptr.keyType]}}else if(this.ptr instanceof e.Reflect.Service.Method){if(!(this.ptr instanceof e.Reflect.Service.RPCMethod))throw Error(\\\"illegal service type in \\\"+this.ptr.toString(!0));if(!((i=this.ptr.parent.resolve(this.ptr.requestName,!0))&&i instanceof e.Reflect.Message))throw Error(\\\"Illegal type reference in \\\"+this.ptr.toString(!0)+\\\": \\\"+this.ptr.requestName);if(this.ptr.resolvedRequestType=i,!((i=this.ptr.parent.resolve(this.ptr.responseName,!0))&&i instanceof e.Reflect.Message))throw Error(\\\"Illegal type reference in \\\"+this.ptr.toString(!0)+\\\": \\\"+this.ptr.responseName);this.ptr.resolvedResponseType=i}else if(!(this.ptr instanceof e.Reflect.Message.OneOf||this.ptr instanceof e.Reflect.Extension||this.ptr instanceof e.Reflect.Enum.Value))throw Error(\\\"illegal object in namespace: \\\"+typeof this.ptr+\\\": \\\"+this.ptr);return this.reset()},s.build=function(e){var t,n,i;if(this.reset(),this.resolved||(this.resolveAll(),this.resolved=!0,this.result=null),null===this.result&&(this.result=this.ns.build()),!e)return this.result;for(t=\\\"string\\\"==typeof e?e.split(\\\".\\\"):e,n=this.result,i=0;i<t.length;i++){if(!n[t[i]]){n=null;break}n=n[t[i]]}return n},s.lookup=function(e,t){return e?this.ns.resolve(e,t):this.ns},s.toString=function(){return\\\"Builder\\\"},r.Message=function(){},r.Enum=function(){},r.Service=function(){},r}(r,r.Lang,r.Reflect),r.Map=function(e,t){function n(e){var t=0;return{next:function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}}var i=function(e,n){var i,r,s,o;if(!e.map)throw Error(\\\"field is not a map\\\");if(this.field=e,this.keyElem=new t.Element(e.keyType,null,!0,e.syntax),this.valueElem=new t.Element(e.type,e.resolvedType,!1,e.syntax),this.map={},Object.defineProperty(this,\\\"size\\\",{get:function(){return Object.keys(this.map).length}}),n)for(i=Object.keys(n),r=0;r<i.length;r++)s=this.keyElem.valueFromString(i[r]),o=this.valueElem.verifyValue(n[i[r]]),this.map[this.keyElem.valueToString(s)]={key:s,value:o}},r=i.prototype;return r.clear=function(){this.map={}},r.delete=function(e){var t=this.keyElem.valueToString(this.keyElem.verifyValue(e)),n=t in this.map;return delete this.map[t],n},r.entries=function(){var e,t,i=[],r=Object.keys(this.map);for(t=0;t<r.length;t++)i.push([(e=this.map[r[t]]).key,e.value]);return n(i)},r.keys=function(){var e,t=[],i=Object.keys(this.map);for(e=0;e<i.length;e++)t.push(this.map[i[e]].key);return n(t)},r.values=function(){var e,t=[],i=Object.keys(this.map);for(e=0;e<i.length;e++)t.push(this.map[i[e]].value);return n(t)},r.forEach=function(e,t){var n,i,r=Object.keys(this.map);for(i=0;i<r.length;i++)e.call(t,(n=this.map[r[i]]).value,n.key,this)},r.set=function(e,t){var n=this.keyElem.verifyValue(e),i=this.valueElem.verifyValue(t);return this.map[this.keyElem.valueToString(n)]={key:n,value:i},this},r.get=function(e){var t=this.keyElem.valueToString(this.keyElem.verifyValue(e));return t in this.map?this.map[t].value:void 0},r.has=function(e){return this.keyElem.valueToString(this.keyElem.verifyValue(e))in this.map},i}(0,r.Reflect),r.loadProto=function(e,t,n){return(\\\"string\\\"==typeof t||t&&\\\"string\\\"==typeof t.file&&\\\"string\\\"==typeof t.root)&&(n=t,t=void 0),r.loadJson(r.DotProto.Parser.parse(e),t,n)},r.protoFromString=r.loadProto,r.loadProtoFile=function(e,t,n){if(t&&\\\"object\\\"==typeof t?(n=t,t=null):t&&\\\"function\\\"==typeof t||(t=null),t)return r.Util.fetch(\\\"string\\\"==typeof e?e:e.root+\\\"/\\\"+e.file,(function(i){if(null!==i)try{t(null,r.loadProto(i,n,e))}catch(e){t(e)}else t(Error(\\\"Failed to fetch file\\\"))}));var i=r.Util.fetch(\\\"object\\\"==typeof e?e.root+\\\"/\\\"+e.file:e);return null===i?null:r.loadProto(i,n,e)},r.protoFromFile=r.loadProtoFile,r.newBuilder=function(e){return void 0===(e=e||{}).convertFieldsToCamelCase&&(e.convertFieldsToCamelCase=r.convertFieldsToCamelCase),void 0===e.populateAccessors&&(e.populateAccessors=r.populateAccessors),new r.Builder(e)},r.loadJson=function(e,t,n){return(\\\"string\\\"==typeof t||t&&\\\"string\\\"==typeof t.file&&\\\"string\\\"==typeof t.root)&&(n=t,t=null),t&&\\\"object\\\"==typeof t||(t=r.newBuilder()),\\\"string\\\"==typeof e&&(e=JSON.parse(e)),t.import(e,n),t.resolveAll(),t},r.loadJsonFile=function(e,t,n){if(t&&\\\"object\\\"==typeof t?(n=t,t=null):t&&\\\"function\\\"==typeof t||(t=null),t)return r.Util.fetch(\\\"string\\\"==typeof e?e:e.root+\\\"/\\\"+e.file,(function(i){if(null!==i)try{t(null,r.loadJson(JSON.parse(i),n,e))}catch(e){t(e)}else t(Error(\\\"Failed to fetch file\\\"))}));var i=r.Util.fetch(\\\"object\\\"==typeof e?e.root+\\\"/\\\"+e.file:e);return null===i?null:r.loadJson(JSON.parse(i),n,e)},i=Ai,r.loadProto(i,void 0,\\\"\\\").build(\\\"Modules\\\").probuf}(function(e){function t(e){var t=0;return function(){return t<e.length?e.charCodeAt(t++):null}}function n(){var e=[],t=[];return function(){return 0===arguments.length?t.join(\\\"\\\")+a.apply(String,e):(e.length+arguments.length>1024&&(t.push(a.apply(String,e)),e.length=0),void Array.prototype.push.apply(e,arguments))}}function i(e,t,n,i,r){var s,o,a=8*r-i-1,u=(1<<a)-1,c=u>>1,h=-7,l=n?r-1:0,d=n?-1:1,f=e[t+l];for(l+=d,s=f&(1<<-h)-1,f>>=-h,h+=a;h>0;s=256*s+e[t+l],l+=d,h-=8);for(o=s&(1<<-h)-1,s>>=-h,h+=i;h>0;o=256*o+e[t+l],l+=d,h-=8);if(0===s)s=1-c;else{if(s===u)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,i),s-=c}return(f?-1:1)*o*Math.pow(2,s-i)}function r(e,t,n,i,r,s){var o,a,u,c=8*s-r-1,h=(1<<c)-1,l=h>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:s-1,p=i?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||1/0===t?(a=isNaN(t)?1:0,o=h):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),(t+=o+l>=1?d/u:d*Math.pow(2,1-l))*u>=2&&(o++,u/=2),o+l>=h?(a=0,o=h):o+l>=1?(a=(t*u-1)*Math.pow(2,r),o+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,r),o=0));r>=8;e[n+f]=255&a,f+=p,a/=256,r-=8);for(o=o<<r|a,c+=r;c>0;e[n+f]=255&o,f+=p,o/=256,c-=8);e[n+f-p]|=128*g}var s,o,a,u,c,h=function(e,t,n){if(void 0===e&&(e=h.DEFAULT_CAPACITY),void 0===t&&(t=h.DEFAULT_ENDIAN),void 0===n&&(n=h.DEFAULT_NOASSERT),!n){if((e|=0)<0)throw RangeError(\\\"Illegal capacity\\\");t=!!t,n=!!n}this.buffer=0===e?o:new ArrayBuffer(e),this.view=0===e?null:new Uint8Array(this.buffer),this.offset=0,this.markedOffset=-1,this.limit=e,this.littleEndian=t,this.noAssert=n};return h.VERSION=\\\"5.0.1\\\",h.LITTLE_ENDIAN=!0,h.BIG_ENDIAN=!1,h.DEFAULT_CAPACITY=16,h.DEFAULT_ENDIAN=h.BIG_ENDIAN,h.DEFAULT_NOASSERT=!1,h.Long=e||null,(s=h.prototype).__isByteBuffer__,Object.defineProperty(s,\\\"__isByteBuffer__\\\",{value:!0,enumerable:!1,configurable:!1}),o=new ArrayBuffer(0),a=String.fromCharCode,h.accessor=function(){return Uint8Array},h.allocate=function(e,t,n){return new h(e,t,n)},h.concat=function(e,t,n,i){var r,s,o,a,u,c;for((\\\"boolean\\\"==typeof t||\\\"string\\\"!=typeof t)&&(i=n,n=t,t=void 0),r=0,o=0,a=e.length;a>o;++o)h.isByteBuffer(e[o])||(e[o]=h.wrap(e[o],t)),(s=e[o].limit-e[o].offset)>0&&(r+=s);if(0===r)return new h(0,n,i);for(c=new h(r,n,i),o=0;a>o;)(s=(u=e[o++]).limit-u.offset)<=0||(c.view.set(u.view.subarray(u.offset,u.limit),c.offset),c.offset+=s);return c.limit=c.offset,c.offset=0,c},h.isByteBuffer=function(e){return!0===(e&&e.__isByteBuffer__)},h.type=function(){return ArrayBuffer},h.wrap=function(e,t,n,i){var r,o;if(\\\"string\\\"!=typeof t&&(i=n,n=t,t=void 0),\\\"string\\\"==typeof e)switch(void 0===t&&(t=\\\"utf8\\\"),t){case\\\"base64\\\":return h.fromBase64(e,n);case\\\"hex\\\":return h.fromHex(e,n);case\\\"binary\\\":return h.fromBinary(e,n);case\\\"utf8\\\":return h.fromUTF8(e,n);case\\\"debug\\\":return h.fromDebug(e,n);default:throw Error(\\\"Unsupported encoding: \\\"+t)}if(null===e||\\\"object\\\"!=typeof e)throw TypeError(\\\"Illegal buffer\\\");if(h.isByteBuffer(e))return(r=s.clone.call(e)).markedOffset=-1,r;if(e instanceof Uint8Array)r=new h(0,n,i),e.length>0&&(r.buffer=e.buffer,r.offset=e.byteOffset,r.limit=e.byteOffset+e.byteLength,r.view=new Uint8Array(e.buffer));else if(e instanceof ArrayBuffer)r=new h(0,n,i),e.byteLength>0&&(r.buffer=e,r.offset=0,r.limit=e.byteLength,r.view=e.byteLength>0?new Uint8Array(e):null);else{if(\\\"[object Array]\\\"!==Object.prototype.toString.call(e))throw TypeError(\\\"Illegal buffer\\\");for((r=new h(e.length,n,i)).limit=e.length,o=0;o<e.length;++o)r.view[o]=e[o]}return r},s.writeBitSet=function(e,t){var n,i,r,s,o,a,u=void 0===t;if(u&&(t=this.offset),!this.noAssert){if(!(e instanceof Array))throw TypeError(\\\"Illegal BitSet: Not an array\\\");if(\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal offset: \\\"+t+\\\" (not an integer)\\\");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+t+\\\" (+0) <= \\\"+this.buffer.byteLength)}for(i=t,s=(r=e.length)>>3,o=0,t+=this.writeVarint32(r,t);s--;)n=1&!!e[o++]|(1&!!e[o++])<<1|(1&!!e[o++])<<2|(1&!!e[o++])<<3|(1&!!e[o++])<<4|(1&!!e[o++])<<5|(1&!!e[o++])<<6|(1&!!e[o++])<<7,this.writeByte(n,t++);if(r>o){for(a=0,n=0;r>o;)n|=(1&!!e[o++])<<a++;this.writeByte(n,t++)}return u?(this.offset=t,this):t-i},s.readBitSet=function(e){var t,n,i,r,s,o,a,u=void 0===e;for(u&&(e=this.offset),r=(i=(n=this.readVarint32(e)).value)>>3,s=0,o=[],e+=n.length;r--;)t=this.readByte(e++),o[s++]=!!(1&t),o[s++]=!!(2&t),o[s++]=!!(4&t),o[s++]=!!(8&t),o[s++]=!!(16&t),o[s++]=!!(32&t),o[s++]=!!(64&t),o[s++]=!!(128&t);if(i>s)for(a=0,t=this.readByte(e++);i>s;)o[s++]=!!(1&t>>a++);return u&&(this.offset=e),o},s.readBytes=function(e,t){var n,i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal offset: \\\"+t+\\\" (not an integer)\\\");if((t>>>=0)<0||t+e>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+t+\\\" (+\\\"+e+\\\") <= \\\"+this.buffer.byteLength)}return n=this.slice(t,t+e),i&&(this.offset+=e),n},s.writeBytes=s.append,s.writeInt8=function(e,t){var n,i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal value: \\\"+e+\\\" (not an integer)\\\");if(e|=0,\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal offset: \\\"+t+\\\" (not an integer)\\\");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+t+\\\" (+0) <= \\\"+this.buffer.byteLength)}return(t+=1)>(n=this.buffer.byteLength)&&this.resize((n*=2)>t?n:t),t-=1,this.view[t]=e,i&&(this.offset+=1),this},s.writeByte=s.writeInt8,s.readInt8=function(e){var t,n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal offset: \\\"+e+\\\" (not an integer)\\\");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+e+\\\" (+1) <= \\\"+this.buffer.byteLength)}return 128==(128&(t=this.view[e]))&&(t=-(255-t+1)),n&&(this.offset+=1),t},s.readByte=s.readInt8,s.writeUint8=function(e,t){var n,i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal value: \\\"+e+\\\" (not an integer)\\\");if(e>>>=0,\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal offset: \\\"+t+\\\" (not an integer)\\\");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+t+\\\" (+0) <= \\\"+this.buffer.byteLength)}return(t+=1)>(n=this.buffer.byteLength)&&this.resize((n*=2)>t?n:t),t-=1,this.view[t]=e,i&&(this.offset+=1),this},s.writeUInt8=s.writeUint8,s.readUint8=function(e){var t,n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal offset: \\\"+e+\\\" (not an integer)\\\");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+e+\\\" (+1) <= \\\"+this.buffer.byteLength)}return t=this.view[e],n&&(this.offset+=1),t},s.readUInt8=s.readUint8,s.writeInt16=function(e,t){var n,i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal value: \\\"+e+\\\" (not an integer)\\\");if(e|=0,\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal offset: \\\"+t+\\\" (not an integer)\\\");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+t+\\\" (+0) <= \\\"+this.buffer.byteLength)}return(t+=2)>(n=this.buffer.byteLength)&&this.resize((n*=2)>t?n:t),t-=2,this.littleEndian?(this.view[t+1]=(65280&e)>>>8,this.view[t]=255&e):(this.view[t]=(65280&e)>>>8,this.view[t+1]=255&e),i&&(this.offset+=2),this},s.writeShort=s.writeInt16,s.readInt16=function(e){var t,n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal offset: \\\"+e+\\\" (not an integer)\\\");if((e>>>=0)<0||e+2>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+e+\\\" (+2) <= \\\"+this.buffer.byteLength)}return t=0,this.littleEndian?(t=this.view[e],t|=this.view[e+1]<<8):(t=this.view[e]<<8,t|=this.view[e+1]),32768==(32768&t)&&(t=-(65535-t+1)),n&&(this.offset+=2),t},s.readShort=s.readInt16,s.writeUint16=function(e,t){var n,i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal value: \\\"+e+\\\" (not an integer)\\\");if(e>>>=0,\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal offset: \\\"+t+\\\" (not an integer)\\\");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+t+\\\" (+0) <= \\\"+this.buffer.byteLength)}return(t+=2)>(n=this.buffer.byteLength)&&this.resize((n*=2)>t?n:t),t-=2,this.littleEndian?(this.view[t+1]=(65280&e)>>>8,this.view[t]=255&e):(this.view[t]=(65280&e)>>>8,this.view[t+1]=255&e),i&&(this.offset+=2),this},s.writeUInt16=s.writeUint16,s.readUint16=function(e){var t,n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal offset: \\\"+e+\\\" (not an integer)\\\");if((e>>>=0)<0||e+2>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+e+\\\" (+2) <= \\\"+this.buffer.byteLength)}return t=0,this.littleEndian?(t=this.view[e],t|=this.view[e+1]<<8):(t=this.view[e]<<8,t|=this.view[e+1]),n&&(this.offset+=2),t},s.readUInt16=s.readUint16,s.writeInt32=function(e,t){var n,i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal value: \\\"+e+\\\" (not an integer)\\\");if(e|=0,\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal offset: \\\"+t+\\\" (not an integer)\\\");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+t+\\\" (+0) <= \\\"+this.buffer.byteLength)}return(t+=4)>(n=this.buffer.byteLength)&&this.resize((n*=2)>t?n:t),t-=4,this.littleEndian?(this.view[t+3]=255&e>>>24,this.view[t+2]=255&e>>>16,this.view[t+1]=255&e>>>8,this.view[t]=255&e):(this.view[t]=255&e>>>24,this.view[t+1]=255&e>>>16,this.view[t+2]=255&e>>>8,this.view[t+3]=255&e),i&&(this.offset+=4),this},s.writeInt=s.writeInt32,s.readInt32=function(e){var t,n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal offset: \\\"+e+\\\" (not an integer)\\\");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+e+\\\" (+4) <= \\\"+this.buffer.byteLength)}return t=0,this.littleEndian?(t=this.view[e+2]<<16,t|=this.view[e+1]<<8,t|=this.view[e],t+=this.view[e+3]<<24>>>0):(t=this.view[e+1]<<16,t|=this.view[e+2]<<8,t|=this.view[e+3],t+=this.view[e]<<24>>>0),t|=0,n&&(this.offset+=4),t},s.readInt=s.readInt32,s.writeUint32=function(e,t){var n,i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal value: \\\"+e+\\\" (not an integer)\\\");if(e>>>=0,\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal offset: \\\"+t+\\\" (not an integer)\\\");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+t+\\\" (+0) <= \\\"+this.buffer.byteLength)}return(t+=4)>(n=this.buffer.byteLength)&&this.resize((n*=2)>t?n:t),t-=4,this.littleEndian?(this.view[t+3]=255&e>>>24,this.view[t+2]=255&e>>>16,this.view[t+1]=255&e>>>8,this.view[t]=255&e):(this.view[t]=255&e>>>24,this.view[t+1]=255&e>>>16,this.view[t+2]=255&e>>>8,this.view[t+3]=255&e),i&&(this.offset+=4),this},s.writeUInt32=s.writeUint32,s.readUint32=function(e){var t,n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal offset: \\\"+e+\\\" (not an integer)\\\");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+e+\\\" (+4) <= \\\"+this.buffer.byteLength)}return t=0,this.littleEndian?(t=this.view[e+2]<<16,t|=this.view[e+1]<<8,t|=this.view[e],t+=this.view[e+3]<<24>>>0):(t=this.view[e+1]<<16,t|=this.view[e+2]<<8,t|=this.view[e+3],t+=this.view[e]<<24>>>0),n&&(this.offset+=4),t},s.readUInt32=s.readUint32,e&&(s.writeInt64=function(t,n){var i,r,s,o=void 0===n;if(o&&(n=this.offset),!this.noAssert){if(\\\"number\\\"==typeof t)t=e.fromNumber(t);else if(\\\"string\\\"==typeof t)t=e.fromString(t);else if(!(t&&t instanceof e))throw TypeError(\\\"Illegal value: \\\"+t+\\\" (not an integer or Long)\\\");if(\\\"number\\\"!=typeof n||n%1!=0)throw TypeError(\\\"Illegal offset: \\\"+n+\\\" (not an integer)\\\");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+n+\\\" (+0) <= \\\"+this.buffer.byteLength)}return\\\"number\\\"==typeof t?t=e.fromNumber(t):\\\"string\\\"==typeof t&&(t=e.fromString(t)),(n+=8)>(i=this.buffer.byteLength)&&this.resize((i*=2)>n?i:n),n-=8,r=t.low,s=t.high,this.littleEndian?(this.view[n+3]=255&r>>>24,this.view[n+2]=255&r>>>16,this.view[n+1]=255&r>>>8,this.view[n]=255&r,n+=4,this.view[n+3]=255&s>>>24,this.view[n+2]=255&s>>>16,this.view[n+1]=255&s>>>8,this.view[n]=255&s):(this.view[n]=255&s>>>24,this.view[n+1]=255&s>>>16,this.view[n+2]=255&s>>>8,this.view[n+3]=255&s,n+=4,this.view[n]=255&r>>>24,this.view[n+1]=255&r>>>16,this.view[n+2]=255&r>>>8,this.view[n+3]=255&r),o&&(this.offset+=8),this},s.writeLong=s.writeInt64,s.readInt64=function(t){var n,i,r,s=void 0===t;if(s&&(t=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal offset: \\\"+t+\\\" (not an integer)\\\");if((t>>>=0)<0||t+8>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+t+\\\" (+8) <= \\\"+this.buffer.byteLength)}return n=0,i=0,this.littleEndian?(n=this.view[t+2]<<16,n|=this.view[t+1]<<8,n|=this.view[t],n+=this.view[t+3]<<24>>>0,t+=4,i=this.view[t+2]<<16,i|=this.view[t+1]<<8,i|=this.view[t],i+=this.view[t+3]<<24>>>0):(i=this.view[t+1]<<16,i|=this.view[t+2]<<8,i|=this.view[t+3],i+=this.view[t]<<24>>>0,t+=4,n=this.view[t+1]<<16,n|=this.view[t+2]<<8,n|=this.view[t+3],n+=this.view[t]<<24>>>0),r=new e(n,i,!1),s&&(this.offset+=8),r},s.readLong=s.readInt64,s.writeUint64=function(t,n){var i,r,s,o=void 0===n;if(o&&(n=this.offset),!this.noAssert){if(\\\"number\\\"==typeof t)t=e.fromNumber(t);else if(\\\"string\\\"==typeof t)t=e.fromString(t);else if(!(t&&t instanceof e))throw TypeError(\\\"Illegal value: \\\"+t+\\\" (not an integer or Long)\\\");if(\\\"number\\\"!=typeof n||n%1!=0)throw TypeError(\\\"Illegal offset: \\\"+n+\\\" (not an integer)\\\");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+n+\\\" (+0) <= \\\"+this.buffer.byteLength)}return\\\"number\\\"==typeof t?t=e.fromNumber(t):\\\"string\\\"==typeof t&&(t=e.fromString(t)),(n+=8)>(i=this.buffer.byteLength)&&this.resize((i*=2)>n?i:n),n-=8,r=t.low,s=t.high,this.littleEndian?(this.view[n+3]=255&r>>>24,this.view[n+2]=255&r>>>16,this.view[n+1]=255&r>>>8,this.view[n]=255&r,n+=4,this.view[n+3]=255&s>>>24,this.view[n+2]=255&s>>>16,this.view[n+1]=255&s>>>8,this.view[n]=255&s):(this.view[n]=255&s>>>24,this.view[n+1]=255&s>>>16,this.view[n+2]=255&s>>>8,this.view[n+3]=255&s,n+=4,this.view[n]=255&r>>>24,this.view[n+1]=255&r>>>16,this.view[n+2]=255&r>>>8,this.view[n+3]=255&r),o&&(this.offset+=8),this},s.writeUInt64=s.writeUint64,s.readUint64=function(t){var n,i,r,s=void 0===t;if(s&&(t=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal offset: \\\"+t+\\\" (not an integer)\\\");if((t>>>=0)<0||t+8>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+t+\\\" (+8) <= \\\"+this.buffer.byteLength)}return n=0,i=0,this.littleEndian?(n=this.view[t+2]<<16,n|=this.view[t+1]<<8,n|=this.view[t],n+=this.view[t+3]<<24>>>0,t+=4,i=this.view[t+2]<<16,i|=this.view[t+1]<<8,i|=this.view[t],i+=this.view[t+3]<<24>>>0):(i=this.view[t+1]<<16,i|=this.view[t+2]<<8,i|=this.view[t+3],i+=this.view[t]<<24>>>0,t+=4,n=this.view[t+1]<<16,n|=this.view[t+2]<<8,n|=this.view[t+3],n+=this.view[t]<<24>>>0),r=new e(n,i,!0),s&&(this.offset+=8),r},s.readUInt64=s.readUint64),s.writeFloat32=function(e,t){var n,i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e)throw TypeError(\\\"Illegal value: \\\"+e+\\\" (not a number)\\\");if(\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal offset: \\\"+t+\\\" (not an integer)\\\");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+t+\\\" (+0) <= \\\"+this.buffer.byteLength)}return(t+=4)>(n=this.buffer.byteLength)&&this.resize((n*=2)>t?n:t),t-=4,r(this.view,e,t,this.littleEndian,23,4),i&&(this.offset+=4),this},s.writeFloat=s.writeFloat32,s.readFloat32=function(e){var t,n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal offset: \\\"+e+\\\" (not an integer)\\\");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+e+\\\" (+4) <= \\\"+this.buffer.byteLength)}return t=i(this.view,e,this.littleEndian,23,4),n&&(this.offset+=4),t},s.readFloat=s.readFloat32,s.writeFloat64=function(e,t){var n,i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e)throw TypeError(\\\"Illegal value: \\\"+e+\\\" (not a number)\\\");if(\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal offset: \\\"+t+\\\" (not an integer)\\\");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+t+\\\" (+0) <= \\\"+this.buffer.byteLength)}return(t+=8)>(n=this.buffer.byteLength)&&this.resize((n*=2)>t?n:t),t-=8,r(this.view,e,t,this.littleEndian,52,8),i&&(this.offset+=8),this},s.writeDouble=s.writeFloat64,s.readFloat64=function(e){var t,n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal offset: \\\"+e+\\\" (not an integer)\\\");if((e>>>=0)<0||e+8>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+e+\\\" (+8) <= \\\"+this.buffer.byteLength)}return t=i(this.view,e,this.littleEndian,52,8),n&&(this.offset+=8),t},s.readDouble=s.readFloat64,h.MAX_VARINT32_BYTES=5,h.calculateVarint32=function(e){return(e>>>=0)<128?1:e<16384?2:1<<21>e?3:1<<28>e?4:5},h.zigZagEncode32=function(e){return((e|=0)<<1^e>>31)>>>0},h.zigZagDecode32=function(e){return 0|e>>>1^-(1&e)},s.writeVarint32=function(e,t){var n,i,r,s=void 0===t;if(s&&(t=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal value: \\\"+e+\\\" (not an integer)\\\");if(e|=0,\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal offset: \\\"+t+\\\" (not an integer)\\\");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+t+\\\" (+0) <= \\\"+this.buffer.byteLength)}for((t+=i=h.calculateVarint32(e))>(r=this.buffer.byteLength)&&this.resize((r*=2)>t?r:t),t-=i,e>>>=0;e>=128;)n=128|127&e,this.view[t++]=n,e>>>=7;return this.view[t++]=e,s?(this.offset=t,this):i},s.writeVarint32ZigZag=function(e,t){return this.writeVarint32(h.zigZagEncode32(e),t)},s.readVarint32=function(e){var t,n,i,r,s=void 0===e;if(s&&(e=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal offset: \\\"+e+\\\" (not an integer)\\\");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+e+\\\" (+1) <= \\\"+this.buffer.byteLength)}n=0,i=0;do{if(!this.noAssert&&e>this.limit)throw(r=Error(\\\"Truncated\\\")).truncated=!0,r;t=this.view[e++],n<5&&(i|=(127&t)<<7*n),++n}while(0!=(128&t));return i|=0,s?(this.offset=e,i):{value:i,length:n}},s.readVarint32ZigZag=function(e){var t=this.readVarint32(e);return\\\"object\\\"==typeof t?t.value=h.zigZagDecode32(t.value):t=h.zigZagDecode32(t),t},e&&(h.MAX_VARINT64_BYTES=10,h.calculateVarint64=function(t){\\\"number\\\"==typeof t?t=e.fromNumber(t):\\\"string\\\"==typeof t&&(t=e.fromString(t));var n=t.toInt()>>>0,i=t.shiftRightUnsigned(28).toInt()>>>0,r=t.shiftRightUnsigned(56).toInt()>>>0;return 0==r?0==i?n<16384?n<128?1:2:1<<21>n?3:4:i<16384?i<128?5:6:1<<21>i?7:8:r<128?9:10},h.zigZagEncode64=function(t){return\\\"number\\\"==typeof t?t=e.fromNumber(t,!1):\\\"string\\\"==typeof t?t=e.fromString(t,!1):!1!==t.unsigned&&(t=t.toSigned()),t.shiftLeft(1).xor(t.shiftRight(63)).toUnsigned()},h.zigZagDecode64=function(t){return\\\"number\\\"==typeof t?t=e.fromNumber(t,!1):\\\"string\\\"==typeof t?t=e.fromString(t,!1):!1!==t.unsigned&&(t=t.toSigned()),t.shiftRightUnsigned(1).xor(t.and(e.ONE).toSigned().negate()).toSigned()},s.writeVarint64=function(t,n){var i,r,s,o,a,u=void 0===n;if(u&&(n=this.offset),!this.noAssert){if(\\\"number\\\"==typeof t)t=e.fromNumber(t);else if(\\\"string\\\"==typeof t)t=e.fromString(t);else if(!(t&&t instanceof e))throw TypeError(\\\"Illegal value: \\\"+t+\\\" (not an integer or Long)\\\");if(\\\"number\\\"!=typeof n||n%1!=0)throw TypeError(\\\"Illegal offset: \\\"+n+\\\" (not an integer)\\\");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+n+\\\" (+0) <= \\\"+this.buffer.byteLength)}switch(\\\"number\\\"==typeof t?t=e.fromNumber(t,!1):\\\"string\\\"==typeof t?t=e.fromString(t,!1):!1!==t.unsigned&&(t=t.toSigned()),i=h.calculateVarint64(t),r=t.toInt()>>>0,s=t.shiftRightUnsigned(28).toInt()>>>0,o=t.shiftRightUnsigned(56).toInt()>>>0,(n+=i)>(a=this.buffer.byteLength)&&this.resize((a*=2)>n?a:n),n-=i,i){case 10:this.view[n+9]=1&o>>>7;case 9:this.view[n+8]=9!==i?128|o:127&o;case 8:this.view[n+7]=8!==i?128|s>>>21:127&s>>>21;case 7:this.view[n+6]=7!==i?128|s>>>14:127&s>>>14;case 6:this.view[n+5]=6!==i?128|s>>>7:127&s>>>7;case 5:this.view[n+4]=5!==i?128|s:127&s;case 4:this.view[n+3]=4!==i?128|r>>>21:127&r>>>21;case 3:this.view[n+2]=3!==i?128|r>>>14:127&r>>>14;case 2:this.view[n+1]=2!==i?128|r>>>7:127&r>>>7;case 1:this.view[n]=1!==i?128|r:127&r}return u?(this.offset+=i,this):i},s.writeVarint64ZigZag=function(e,t){return this.writeVarint64(h.zigZagEncode64(e),t)},s.readVarint64=function(t){var n,i,r,s,o,a,u=void 0===t;if(u&&(t=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal offset: \\\"+t+\\\" (not an integer)\\\");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+t+\\\" (+1) <= \\\"+this.buffer.byteLength)}if(n=t,i=0,r=0,s=0,o=0,i=127&(o=this.view[t++]),128&o&&(i|=(127&(o=this.view[t++]))<<7,(128&o||this.noAssert&&void 0===o)&&(i|=(127&(o=this.view[t++]))<<14,(128&o||this.noAssert&&void 0===o)&&(i|=(127&(o=this.view[t++]))<<21,(128&o||this.noAssert&&void 0===o)&&(r=127&(o=this.view[t++]),(128&o||this.noAssert&&void 0===o)&&(r|=(127&(o=this.view[t++]))<<7,(128&o||this.noAssert&&void 0===o)&&(r|=(127&(o=this.view[t++]))<<14,(128&o||this.noAssert&&void 0===o)&&(r|=(127&(o=this.view[t++]))<<21,(128&o||this.noAssert&&void 0===o)&&(s=127&(o=this.view[t++]),(128&o||this.noAssert&&void 0===o)&&(s|=(127&(o=this.view[t++]))<<7,128&o||this.noAssert&&void 0===o))))))))))throw Error(\\\"Buffer overrun\\\");return a=e.fromBits(i|r<<28,r>>>4|s<<24,!1),u?(this.offset=t,a):{value:a,length:t-n}},s.readVarint64ZigZag=function(t){var n=this.readVarint64(t);return n&&n.value instanceof e?n.value=h.zigZagDecode64(n.value):n=h.zigZagDecode64(n),n}),s.writeCString=function(e,n){var i,r,s,o=void 0===n;if(o&&(n=this.offset),r=e.length,!this.noAssert){if(\\\"string\\\"!=typeof e)throw TypeError(\\\"Illegal str: Not a string\\\");for(i=0;r>i;++i)if(0===e.charCodeAt(i))throw RangeError(\\\"Illegal str: Contains NULL-characters\\\");if(\\\"number\\\"!=typeof n||n%1!=0)throw TypeError(\\\"Illegal offset: \\\"+n+\\\" (not an integer)\\\");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+n+\\\" (+0) <= \\\"+this.buffer.byteLength)}return r=c.calculateUTF16asUTF8(t(e))[1],n+=r+1,s=this.buffer.byteLength,n>s&&this.resize((s*=2)>n?s:n),n-=r+1,c.encodeUTF16toUTF8(t(e),function(e){this.view[n++]=e}.bind(this)),this.view[n++]=0,o?(this.offset=n,this):r},s.readCString=function(e){var t,i,r,s=void 0===e;if(s&&(e=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal offset: \\\"+e+\\\" (not an integer)\\\");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+e+\\\" (+1) <= \\\"+this.buffer.byteLength)}return t=e,r=-1,c.decodeUTF8toUTF16(function(){if(0===r)return null;if(e>=this.limit)throw RangeError(\\\"Illegal range: Truncated data, \\\"+e+\\\" < \\\"+this.limit);return 0===(r=this.view[e++])?null:r}.bind(this),i=n(),!0),s?(this.offset=e,i()):{string:i(),length:e-t}},s.writeIString=function(e,n){var i,r,s,o=void 0===n;if(o&&(n=this.offset),!this.noAssert){if(\\\"string\\\"!=typeof e)throw TypeError(\\\"Illegal str: Not a string\\\");if(\\\"number\\\"!=typeof n||n%1!=0)throw TypeError(\\\"Illegal offset: \\\"+n+\\\" (not an integer)\\\");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+n+\\\" (+0) <= \\\"+this.buffer.byteLength)}if(r=n,i=c.calculateUTF16asUTF8(t(e),this.noAssert)[1],n+=4+i,s=this.buffer.byteLength,n>s&&this.resize((s*=2)>n?s:n),n-=4+i,this.littleEndian?(this.view[n+3]=255&i>>>24,this.view[n+2]=255&i>>>16,this.view[n+1]=255&i>>>8,this.view[n]=255&i):(this.view[n]=255&i>>>24,this.view[n+1]=255&i>>>16,this.view[n+2]=255&i>>>8,this.view[n+3]=255&i),n+=4,c.encodeUTF16toUTF8(t(e),function(e){this.view[n++]=e}.bind(this)),n!==r+4+i)throw RangeError(\\\"Illegal range: Truncated data, \\\"+n+\\\" == \\\"+(n+4+i));return o?(this.offset=n,this):n-r},s.readIString=function(e){var t,n,i,r=void 0===e;if(r&&(e=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal offset: \\\"+e+\\\" (not an integer)\\\");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+e+\\\" (+4) <= \\\"+this.buffer.byteLength)}return t=e,n=this.readUint32(e),i=this.readUTF8String(n,h.METRICS_BYTES,e+=4),e+=i.length,r?(this.offset=e,i.string):{string:i.string,length:e-t}},h.METRICS_CHARS=\\\"c\\\",h.METRICS_BYTES=\\\"b\\\",s.writeUTF8String=function(e,n){var i,r,s,o=void 0===n;if(o&&(n=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof n||n%1!=0)throw TypeError(\\\"Illegal offset: \\\"+n+\\\" (not an integer)\\\");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+n+\\\" (+0) <= \\\"+this.buffer.byteLength)}return r=n,i=c.calculateUTF16asUTF8(t(e))[1],n+=i,s=this.buffer.byteLength,n>s&&this.resize((s*=2)>n?s:n),n-=i,c.encodeUTF16toUTF8(t(e),function(e){this.view[n++]=e}.bind(this)),o?(this.offset=n,this):n-r},s.writeString=s.writeUTF8String,h.calculateUTF8Chars=function(e){return c.calculateUTF16asUTF8(t(e))[0]},h.calculateUTF8Bytes=function(e){return c.calculateUTF16asUTF8(t(e))[1]},h.calculateString=h.calculateUTF8Bytes,s.readUTF8String=function(e,t,i){var r,s,o,a,u;if(\\\"number\\\"==typeof t&&(i=t,t=void 0),(r=void 0===i)&&(i=this.offset),void 0===t&&(t=h.METRICS_CHARS),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal length: \\\"+e+\\\" (not an integer)\\\");if(e|=0,\\\"number\\\"!=typeof i||i%1!=0)throw TypeError(\\\"Illegal offset: \\\"+i+\\\" (not an integer)\\\");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+i+\\\" (+0) <= \\\"+this.buffer.byteLength)}if(o=0,a=i,t===h.METRICS_CHARS){if(s=n(),c.decodeUTF8(function(){return e>o&&i<this.limit?this.view[i++]:null}.bind(this),(function(e){++o,c.UTF8toUTF16(e,s)})),o!==e)throw RangeError(\\\"Illegal range: Truncated data, \\\"+o+\\\" == \\\"+e);return r?(this.offset=i,s()):{string:s(),length:i-a}}if(t===h.METRICS_BYTES){if(!this.noAssert){if(\\\"number\\\"!=typeof i||i%1!=0)throw TypeError(\\\"Illegal offset: \\\"+i+\\\" (not an integer)\\\");if((i>>>=0)<0||i+e>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+i+\\\" (+\\\"+e+\\\") <= \\\"+this.buffer.byteLength)}if(u=i+e,c.decodeUTF8toUTF16(function(){return u>i?this.view[i++]:null}.bind(this),s=n(),this.noAssert),i!==u)throw RangeError(\\\"Illegal range: Truncated data, \\\"+i+\\\" == \\\"+u);return r?(this.offset=i,s()):{string:s(),length:i-a}}throw TypeError(\\\"Unsupported metrics: \\\"+t)},s.readString=s.readUTF8String,s.writeVString=function(e,n){var i,r,s,o,a=void 0===n;if(a&&(n=this.offset),!this.noAssert){if(\\\"string\\\"!=typeof e)throw TypeError(\\\"Illegal str: Not a string\\\");if(\\\"number\\\"!=typeof n||n%1!=0)throw TypeError(\\\"Illegal offset: \\\"+n+\\\" (not an integer)\\\");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+n+\\\" (+0) <= \\\"+this.buffer.byteLength)}if(s=n,i=c.calculateUTF16asUTF8(t(e),this.noAssert)[1],r=h.calculateVarint32(i),n+=r+i,o=this.buffer.byteLength,n>o&&this.resize((o*=2)>n?o:n),n-=r+i,n+=this.writeVarint32(i,n),c.encodeUTF16toUTF8(t(e),function(e){this.view[n++]=e}.bind(this)),n!==s+i+r)throw RangeError(\\\"Illegal range: Truncated data, \\\"+n+\\\" == \\\"+(n+i+r));return a?(this.offset=n,this):n-s},s.readVString=function(e){var t,n,i,r=void 0===e;if(r&&(e=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal offset: \\\"+e+\\\" (not an integer)\\\");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+e+\\\" (+1) <= \\\"+this.buffer.byteLength)}return t=e,n=this.readVarint32(e),i=this.readUTF8String(n.value,h.METRICS_BYTES,e+=n.length),e+=i.length,r?(this.offset=e,i.string):{string:i.string,length:e-t}},s.append=function(e,t,n){var i,r,s;if((\\\"number\\\"==typeof t||\\\"string\\\"!=typeof t)&&(n=t,t=void 0),(i=void 0===n)&&(n=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof n||n%1!=0)throw TypeError(\\\"Illegal offset: \\\"+n+\\\" (not an integer)\\\");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+n+\\\" (+0) <= \\\"+this.buffer.byteLength)}return e instanceof h||(e=h.wrap(e,t)),(r=e.limit-e.offset)<=0||((n+=r)>(s=this.buffer.byteLength)&&this.resize((s*=2)>n?s:n),n-=r,this.view.set(e.view.subarray(e.offset,e.limit),n),e.offset+=r,i&&(this.offset+=r)),this},s.appendTo=function(e,t){return e.append(this,t),this},s.assert=function(e){return this.noAssert=!e,this},s.capacity=function(){return this.buffer.byteLength},s.clear=function(){return this.offset=0,this.limit=this.buffer.byteLength,this.markedOffset=-1,this},s.clone=function(e){var t=new h(0,this.littleEndian,this.noAssert);return e?(t.buffer=new ArrayBuffer(this.buffer.byteLength),t.view=new Uint8Array(t.buffer)):(t.buffer=this.buffer,t.view=this.view),t.offset=this.offset,t.markedOffset=this.markedOffset,t.limit=this.limit,t},s.compact=function(e,t){var n,i,r;if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal begin: Not an integer\\\");if(e>>>=0,\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal end: Not an integer\\\");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError(\\\"Illegal range: 0 <= \\\"+e+\\\" <= \\\"+t+\\\" <= \\\"+this.buffer.byteLength)}return 0===e&&t===this.buffer.byteLength?this:0==(n=t-e)?(this.buffer=o,this.view=null,this.markedOffset>=0&&(this.markedOffset-=e),this.offset=0,this.limit=0,this):(i=new ArrayBuffer(n),(r=new Uint8Array(i)).set(this.view.subarray(e,t)),this.buffer=i,this.view=r,this.markedOffset>=0&&(this.markedOffset-=e),this.offset=0,this.limit=n,this)},s.copy=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal begin: Not an integer\\\");if(e>>>=0,\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal end: Not an integer\\\");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError(\\\"Illegal range: 0 <= \\\"+e+\\\" <= \\\"+t+\\\" <= \\\"+this.buffer.byteLength)}if(e===t)return new h(0,this.littleEndian,this.noAssert);var n=t-e,i=new h(n,this.littleEndian,this.noAssert);return i.offset=0,i.limit=n,i.markedOffset>=0&&(i.markedOffset-=e),this.copyTo(i,0,e,t),i},s.copyTo=function(e,t,n,i){var r,s,o;if(!this.noAssert&&!h.isByteBuffer(e))throw TypeError(\\\"Illegal target: Not a ByteBuffer\\\");if(t=(s=void 0===t)?e.offset:0|t,n=(r=void 0===n)?this.offset:0|n,i=void 0===i?this.limit:0|i,t<0||t>e.buffer.byteLength)throw RangeError(\\\"Illegal target range: 0 <= \\\"+t+\\\" <= \\\"+e.buffer.byteLength);if(n<0||i>this.buffer.byteLength)throw RangeError(\\\"Illegal source range: 0 <= \\\"+n+\\\" <= \\\"+this.buffer.byteLength);return 0==(o=i-n)?e:(e.ensureCapacity(t+o),e.view.set(this.view.subarray(n,i),t),r&&(this.offset+=o),s&&(e.offset+=o),this)},s.ensureCapacity=function(e){var t=this.buffer.byteLength;return e>t?this.resize((t*=2)>e?t:e):this},s.fill=function(e,t,n){var i=void 0===t;if(i&&(t=this.offset),\\\"string\\\"==typeof e&&e.length>0&&(e=e.charCodeAt(0)),void 0===t&&(t=this.offset),void 0===n&&(n=this.limit),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal value: \\\"+e+\\\" (not an integer)\\\");if(e|=0,\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal begin: Not an integer\\\");if(t>>>=0,\\\"number\\\"!=typeof n||n%1!=0)throw TypeError(\\\"Illegal end: Not an integer\\\");if(n>>>=0,t<0||t>n||n>this.buffer.byteLength)throw RangeError(\\\"Illegal range: 0 <= \\\"+t+\\\" <= \\\"+n+\\\" <= \\\"+this.buffer.byteLength)}if(t>=n)return this;for(;n>t;)this.view[t++]=e;return i&&(this.offset=t),this},s.flip=function(){return this.limit=this.offset,this.offset=0,this},s.mark=function(e){if(e=void 0===e?this.offset:e,!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal offset: \\\"+e+\\\" (not an integer)\\\");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+e+\\\" (+0) <= \\\"+this.buffer.byteLength)}return this.markedOffset=e,this},s.order=function(e){if(!this.noAssert&&\\\"boolean\\\"!=typeof e)throw TypeError(\\\"Illegal littleEndian: Not a boolean\\\");return this.littleEndian=!!e,this},s.LE=function(e){return this.littleEndian=void 0===e||!!e,this},s.BE=function(e){return this.littleEndian=void 0!==e&&!e,this},s.prepend=function(e,t,n){var i,r,s,o,a;if((\\\"number\\\"==typeof t||\\\"string\\\"!=typeof t)&&(n=t,t=void 0),(i=void 0===n)&&(n=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof n||n%1!=0)throw TypeError(\\\"Illegal offset: \\\"+n+\\\" (not an integer)\\\");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+n+\\\" (+0) <= \\\"+this.buffer.byteLength)}return e instanceof h||(e=h.wrap(e,t)),(r=e.limit-e.offset)<=0||((s=r-n)>0?(o=new ArrayBuffer(this.buffer.byteLength+s),(a=new Uint8Array(o)).set(this.view.subarray(n,this.buffer.byteLength),r),this.buffer=o,this.view=a,this.offset+=s,this.markedOffset>=0&&(this.markedOffset+=s),this.limit+=s,n+=s):new Uint8Array(this.buffer),this.view.set(e.view.subarray(e.offset,e.limit),n-r),e.offset=e.limit,i&&(this.offset-=r)),this},s.prependTo=function(e,t){return e.prepend(this,t),this},s.printDebug=function(e){\\\"function\\\"!=typeof e&&(e=console.log.bind(console)),e(this.toString()+\\\"\\\\n-------------------------------------------------------------------\\\\n\\\"+this.toDebug(!0))},s.remaining=function(){return this.limit-this.offset},s.reset=function(){return this.markedOffset>=0?(this.offset=this.markedOffset,this.markedOffset=-1):this.offset=0,this},s.resize=function(e){var t,n;if(!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal capacity: \\\"+e+\\\" (not an integer)\\\");if((e|=0)<0)throw RangeError(\\\"Illegal capacity: 0 <= \\\"+e)}return this.buffer.byteLength<e&&(t=new ArrayBuffer(e),(n=new Uint8Array(t)).set(this.view),this.buffer=t,this.view=n),this},s.reverse=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal begin: Not an integer\\\");if(e>>>=0,\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal end: Not an integer\\\");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError(\\\"Illegal range: 0 <= \\\"+e+\\\" <= \\\"+t+\\\" <= \\\"+this.buffer.byteLength)}return e===t||Array.prototype.reverse.call(this.view.subarray(e,t)),this},s.skip=function(e){if(!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal length: \\\"+e+\\\" (not an integer)\\\");e|=0}var t=this.offset+e;if(!this.noAssert&&(t<0||t>this.buffer.byteLength))throw RangeError(\\\"Illegal length: 0 <= \\\"+this.offset+\\\" + \\\"+e+\\\" <= \\\"+this.buffer.byteLength);return this.offset=t,this},s.slice=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal begin: Not an integer\\\");if(e>>>=0,\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal end: Not an integer\\\");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError(\\\"Illegal range: 0 <= \\\"+e+\\\" <= \\\"+t+\\\" <= \\\"+this.buffer.byteLength)}var n=this.clone();return n.offset=e,n.limit=t,n},s.toBuffer=function(e){var t,n=this.offset,i=this.limit;if(!this.noAssert){if(\\\"number\\\"!=typeof n||n%1!=0)throw TypeError(\\\"Illegal offset: Not an integer\\\");if(n>>>=0,\\\"number\\\"!=typeof i||i%1!=0)throw TypeError(\\\"Illegal limit: Not an integer\\\");if(i>>>=0,n<0||n>i||i>this.buffer.byteLength)throw RangeError(\\\"Illegal range: 0 <= \\\"+n+\\\" <= \\\"+i+\\\" <= \\\"+this.buffer.byteLength)}return e||0!==n||i!==this.buffer.byteLength?n===i?o:(t=new ArrayBuffer(i-n),new Uint8Array(t).set(new Uint8Array(this.buffer).subarray(n,i),0),t):this.buffer},s.toArrayBuffer=s.toBuffer,s.toString=function(e,t,n){if(void 0===e)return\\\"ByteBufferAB(offset=\\\"+this.offset+\\\",markedOffset=\\\"+this.markedOffset+\\\",limit=\\\"+this.limit+\\\",capacity=\\\"+this.capacity()+\\\")\\\";switch(\\\"number\\\"==typeof e&&(n=t=e=\\\"utf8\\\"),e){case\\\"utf8\\\":return this.toUTF8(t,n);case\\\"base64\\\":return this.toBase64(t,n);case\\\"hex\\\":return this.toHex(t,n);case\\\"binary\\\":return this.toBinary(t,n);case\\\"debug\\\":return this.toDebug();case\\\"columns\\\":return this.toColumns();default:throw Error(\\\"Unsupported encoding: \\\"+e)}},u=function(){var e,t,n={},i=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47],r=[];for(e=0,t=i.length;t>e;++e)r[i[e]]=e;return n.encode=function(e,t){for(var n,r;null!==(n=e());)t(i[63&n>>2]),r=(3&n)<<4,null!==(n=e())?(t(i[63&((r|=15&n>>4)|15&n>>4)]),r=(15&n)<<2,null!==(n=e())?(t(i[63&(r|3&n>>6)]),t(i[63&n])):(t(i[63&r]),t(61))):(t(i[63&r]),t(61),t(61))},n.decode=function(e,t){function n(e){throw Error(\\\"Illegal character code: \\\"+e)}for(var i,s,o;null!==(i=e());)if(void 0===(s=r[i])&&n(i),null!==(i=e())&&(void 0===(o=r[i])&&n(i),t(s<<2>>>0|(48&o)>>4),null!==(i=e()))){if(void 0===(s=r[i])){if(61===i)break;n(i)}if(t((15&o)<<4>>>0|(60&s)>>2),null!==(i=e())){if(void 0===(o=r[i])){if(61===i)break;n(i)}t((3&s)<<6>>>0|o)}}},n.test=function(e){return/^(?:[A-Za-z0-9+\\\\/]{4})*(?:[A-Za-z0-9+\\\\/]{2}==|[A-Za-z0-9+\\\\/]{3}=)?$/.test(e)},n}(),s.toBase64=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),t|=0,(e|=0)<0||t>this.capacity||e>t)throw RangeError(\\\"begin, end\\\");var i;return u.encode(function(){return t>e?this.view[e++]:null}.bind(this),i=n()),i()},h.fromBase64=function(e,n){if(\\\"string\\\"!=typeof e)throw TypeError(\\\"str\\\");var i=new h(e.length/4*3,n),r=0;return u.decode(t(e),(function(e){i.view[r++]=e})),i.limit=r,i},h.btoa=function(e){return h.fromBinary(e).toBase64()},h.atob=function(e){return h.fromBase64(e).toBinary()},s.toBinary=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),t|=0,(e|=0)<0||t>this.capacity()||e>t)throw RangeError(\\\"begin, end\\\");if(e===t)return\\\"\\\";for(var n=[],i=[];t>e;)n.push(this.view[e++]),n.length>=1024&&(i.push(String.fromCharCode.apply(String,n)),n=[]);return i.join(\\\"\\\")+String.fromCharCode.apply(String,n)},h.fromBinary=function(e,t){if(\\\"string\\\"!=typeof e)throw TypeError(\\\"str\\\");for(var n,i=0,r=e.length,s=new h(r,t);r>i;){if((n=e.charCodeAt(i))>255)throw RangeError(\\\"illegal char code: \\\"+n);s.view[i++]=n}return s.limit=r,s},s.toDebug=function(e){for(var t,n=-1,i=this.buffer.byteLength,r=\\\"\\\",s=\\\"\\\",o=\\\"\\\";i>n;){if(-1!==n&&(r+=(t=this.view[n])<16?\\\"0\\\"+t.toString(16).toUpperCase():t.toString(16).toUpperCase(),e&&(s+=t>32&&t<127?String.fromCharCode(t):\\\".\\\")),++n,e&&n>0&&n%16==0&&n!==i){for(;r.length<51;)r+=\\\" \\\";o+=r+s+\\\"\\\\n\\\",r=s=\\\"\\\"}r+=n===this.offset&&n===this.limit?n===this.markedOffset?\\\"!\\\":\\\"|\\\":n===this.offset?n===this.markedOffset?\\\"[\\\":\\\"<\\\":n===this.limit?n===this.markedOffset?\\\"]\\\":\\\">\\\":n===this.markedOffset?\\\"'\\\":e||0!==n&&n!==i?\\\" \\\":\\\"\\\"}if(e&&\\\" \\\"!==r){for(;r.length<51;)r+=\\\" \\\";o+=r+s+\\\"\\\\n\\\"}return e?o:r},h.fromDebug=function(e,t,n){for(var i,r,s=e.length,o=new h(0|(s+1)/3,t,n),a=0,u=0,c=!1,l=!1,d=!1,f=!1,p=!1;s>a;){switch(i=e.charAt(a++)){case\\\"!\\\":if(!n){if(l||d||f){p=!0;break}l=d=f=!0}o.offset=o.markedOffset=o.limit=u,c=!1;break;case\\\"|\\\":if(!n){if(l||f){p=!0;break}l=f=!0}o.offset=o.limit=u,c=!1;break;case\\\"[\\\":if(!n){if(l||d){p=!0;break}l=d=!0}o.offset=o.markedOffset=u,c=!1;break;case\\\"<\\\":if(!n){if(l){p=!0;break}l=!0}o.offset=u,c=!1;break;case\\\"]\\\":if(!n){if(f||d){p=!0;break}f=d=!0}o.limit=o.markedOffset=u,c=!1;break;case\\\">\\\":if(!n){if(f){p=!0;break}f=!0}o.limit=u,c=!1;break;case\\\"'\\\":if(!n){if(d){p=!0;break}d=!0}o.markedOffset=u,c=!1;break;case\\\" \\\":c=!1;break;default:if(!n&&c){p=!0;break}if(r=parseInt(i+e.charAt(a++),16),!n&&(isNaN(r)||r<0||r>255))throw TypeError(\\\"Illegal str: Not a debug encoded string\\\");o.view[u++]=r,c=!0}if(p)throw TypeError(\\\"Illegal str: Invalid symbol at \\\"+a)}if(!n){if(!l||!f)throw TypeError(\\\"Illegal str: Missing offset or limit\\\");if(u<o.buffer.byteLength)throw TypeError(\\\"Illegal str: Not a debug encoded string (is it hex?) \\\"+u+\\\" < \\\"+s)}return o},s.toHex=function(e,t){if(e=void 0===e?this.offset:e,t=void 0===t?this.limit:t,!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal begin: Not an integer\\\");if(e>>>=0,\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal end: Not an integer\\\");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError(\\\"Illegal range: 0 <= \\\"+e+\\\" <= \\\"+t+\\\" <= \\\"+this.buffer.byteLength)}for(var n,i=new Array(t-e);t>e;)(n=this.view[e++])<16?i.push(\\\"0\\\",n.toString(16)):i.push(n.toString(16));return i.join(\\\"\\\")},h.fromHex=function(e,t,n){var i,r,s,o,a;if(!n){if(\\\"string\\\"!=typeof e)throw TypeError(\\\"Illegal str: Not a string\\\");if(e.length%2!=0)throw TypeError(\\\"Illegal str: Length not a multiple of 2\\\")}for(r=e.length,s=new h(0|r/2,t),o=0,a=0;r>o;o+=2){if(i=parseInt(e.substring(o,o+2),16),!n&&(!isFinite(i)||i<0||i>255))throw TypeError(\\\"Illegal str: Contains non-hex characters\\\");s.view[a++]=i}return s.limit=a,s},c=function(){var e={MAX_CODEPOINT:1114111,encodeUTF8:function(e,t){var n=null;for(\\\"number\\\"==typeof e&&(n=e,e=function(){return null});null!==n||null!==(n=e());)n<128?t(127&n):n<2048?(t(192|31&n>>6),t(128|63&n)):n<65536?(t(224|15&n>>12),t(128|63&n>>6),t(128|63&n)):(t(240|7&n>>18),t(128|63&n>>12),t(128|63&n>>6),t(128|63&n)),n=null},decodeUTF8:function(e,t){for(var n,i,r,s,o=function(e){e=e.slice(0,e.indexOf(null));var t=Error(e.toString());throw t.name=\\\"TruncatedError\\\",t.bytes=e,t};null!==(n=e());)if(0==(128&n))t(n);else if(192==(224&n))null===(i=e())&&o([n,i]),t((31&n)<<6|63&i);else if(224==(240&n))(null===(i=e())||null===(r=e()))&&o([n,i,r]),t((15&n)<<12|(63&i)<<6|63&r);else{if(240!=(248&n))throw RangeError(\\\"Illegal starting byte: \\\"+n);(null===(i=e())||null===(r=e())||null===(s=e()))&&o([n,i,r,s]),t((7&n)<<18|(63&i)<<12|(63&r)<<6|63&s)}},UTF16toUTF8:function(e,t){for(var n,i=null;null!==(n=null!==i?i:e());)n>=55296&&n<=57343&&null!==(i=e())&&i>=56320&&i<=57343?(t(1024*(n-55296)+i-56320+65536),i=null):t(n);null!==i&&t(i)},UTF8toUTF16:function(e,t){var n=null;for(\\\"number\\\"==typeof e&&(n=e,e=function(){return null});null!==n||null!==(n=e());)n<=65535?t(n):(t(55296+((n-=65536)>>10)),t(n%1024+56320)),n=null},encodeUTF16toUTF8:function(t,n){e.UTF16toUTF8(t,(function(t){e.encodeUTF8(t,n)}))},decodeUTF8toUTF16:function(t,n){e.decodeUTF8(t,(function(t){e.UTF8toUTF16(t,n)}))},calculateCodePoint:function(e){return e<128?1:e<2048?2:e<65536?3:4},calculateUTF8:function(e){for(var t,n=0;null!==(t=e());)n+=t<128?1:t<2048?2:t<65536?3:4;return n},calculateUTF16asUTF8:function(t){var n=0,i=0;return e.UTF16toUTF8(t,(function(e){++n,i+=e<128?1:e<2048?2:e<65536?3:4})),[n,i]}};return e}(),s.toUTF8=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal begin: Not an integer\\\");if(e>>>=0,\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal end: Not an integer\\\");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError(\\\"Illegal range: 0 <= \\\"+e+\\\" <= \\\"+t+\\\" <= \\\"+this.buffer.byteLength)}var i;try{c.decodeUTF8toUTF16(function(){return t>e?this.view[e++]:null}.bind(this),i=n())}catch(n){if(e!==t)throw RangeError(\\\"Illegal range: Truncated data, \\\"+e+\\\" != \\\"+t)}return i()},h.fromUTF8=function(e,n,i){if(!i&&\\\"string\\\"!=typeof e)throw TypeError(\\\"Illegal str: Not a string\\\");var r=new h(c.calculateUTF16asUTF8(t(e),!0)[1],n,i),s=0;return c.encodeUTF16toUTF8(t(e),(function(e){r.view[s++]=e})),r.limit=s,r},h}(Ui=function(){function e(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function t(e){return!0===(e&&e.__isLong__)}function n(e,t){var n,i,s;return t?(s=(e>>>=0)>=0&&e<256)&&(i=u[e])?i:(n=r(e,(0|e)<0?-1:0,!0),s&&(u[e]=n),n):(s=(e|=0)>=-128&&e<128)&&(i=a[e])?i:(n=r(e,e<0?-1:0,!1),s&&(a[e]=n),n)}function i(e,t){if(isNaN(e)||!isFinite(e))return t?g:p;if(t){if(e<0)return g;if(e>=l)return E}else{if(-d>=e)return T;if(e+1>=d)return v}return e<0?i(-e,t).neg():r(0|e%h,0|e/h,t)}function r(t,n,i){return new e(t,n,i)}function s(e,t,n){var r,o,a,u,h,l,d;if(0===e.length)throw Error(\\\"empty string\\\");if(\\\"NaN\\\"===e||\\\"Infinity\\\"===e||\\\"+Infinity\\\"===e||\\\"-Infinity\\\"===e)return p;if(\\\"number\\\"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||n>36)throw RangeError(\\\"radix\\\");if((r=e.indexOf(\\\"-\\\"))>0)throw Error(\\\"interior hyphen\\\");if(0===r)return s(e.substring(1),t,n).neg();for(o=i(c(n,8)),a=p,u=0;u<e.length;u+=8)h=Math.min(8,e.length-u),l=parseInt(e.substring(u,u+h),n),h<8?(d=i(c(n,h)),a=a.mul(d).add(i(l))):a=(a=a.mul(o)).add(i(l));return a.unsigned=t,a}function o(t){return t instanceof e?t:\\\"number\\\"==typeof t?i(t):\\\"string\\\"==typeof t?s(t):r(t.low,t.high,t.unsigned)}var a,u,c,h,l,d,f,p,g,_,y,m,v,E,T,I;return e.prototype.__isLong__,Object.defineProperty(e.prototype,\\\"__isLong__\\\",{value:!0,enumerable:!1,configurable:!1}),e.isLong=t,a={},u={},e.fromInt=n,e.fromNumber=i,e.fromBits=r,c=Math.pow,e.fromString=s,e.fromValue=o,d=(l=(h=4294967296)*h)/2,f=n(16777216),p=n(0),e.ZERO=p,g=n(0,!0),e.UZERO=g,_=n(1),e.ONE=_,y=n(1,!0),e.UONE=y,m=n(-1),e.NEG_ONE=m,v=r(-1,2147483647,!1),e.MAX_VALUE=v,E=r(-1,-1,!0),e.MAX_UNSIGNED_VALUE=E,T=r(0,-2147483648,!1),e.MIN_VALUE=T,(I=e.prototype).toInt=function(){return this.unsigned?this.low>>>0:this.low},I.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},I.toString=function(e){var t,n,r,s,o,a,u,h;if((e=e||10)<2||e>36)throw RangeError(\\\"radix\\\");if(this.isZero())return\\\"0\\\";if(this.isNegative())return this.eq(T)?(t=i(e),r=(n=this.div(t)).mul(t).sub(this),n.toString(e)+r.toInt().toString(e)):\\\"-\\\"+this.neg().toString(e);for(s=i(c(e,6),this.unsigned),o=this,a=\\\"\\\";;){if(u=o.div(s),h=(o.sub(u.mul(s)).toInt()>>>0).toString(e),(o=u).isZero())return h+a;for(;h.length<6;)h=\\\"0\\\"+h;a=\\\"\\\"+h+a}},I.getHighBits=function(){return this.high},I.getHighBitsUnsigned=function(){return this.high>>>0},I.getLowBits=function(){return this.low},I.getLowBitsUnsigned=function(){return this.low>>>0},I.getNumBitsAbs=function(){var e,t;if(this.isNegative())return this.eq(T)?64:this.neg().getNumBitsAbs();for(e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},I.isZero=function(){return 0===this.high&&0===this.low},I.isNegative=function(){return!this.unsigned&&this.high<0},I.isPositive=function(){return this.unsigned||this.high>=0},I.isOdd=function(){return 1==(1&this.low)},I.isEven=function(){return 0==(1&this.low)},I.equals=function(e){return t(e)||(e=o(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},I.eq=I.equals,I.notEquals=function(e){return!this.eq(e)},I.neq=I.notEquals,I.lessThan=function(e){return this.comp(e)<0},I.lt=I.lessThan,I.lessThanOrEqual=function(e){return this.comp(e)<=0},I.lte=I.lessThanOrEqual,I.greaterThan=function(e){return this.comp(e)>0},I.gt=I.greaterThan,I.greaterThanOrEqual=function(e){return this.comp(e)>=0},I.gte=I.greaterThanOrEqual,I.compare=function(e){if(t(e)||(e=o(e)),this.eq(e))return 0;var n=this.isNegative(),i=e.isNegative();return n&&!i?-1:!n&&i?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},I.comp=I.compare,I.negate=function(){return!this.unsigned&&this.eq(T)?T:this.not().add(_)},I.neg=I.negate,I.add=function(e){var n,i,s,a,u,c,h,l,d,f,p;return t(e)||(e=o(e)),n=this.high>>>16,i=65535&this.high,s=this.low>>>16,a=65535&this.low,u=e.high>>>16,c=65535&e.high,h=e.low>>>16,l=0,d=0,f=0,p=0,f+=(p+=a+(65535&e.low))>>>16,d+=(f+=s+h)>>>16,l+=(d+=i+c)>>>16,l+=n+u,r((f&=65535)<<16|(p&=65535),(l&=65535)<<16|(d&=65535),this.unsigned)},I.subtract=function(e){return t(e)||(e=o(e)),this.add(e.neg())},I.sub=I.subtract,I.multiply=function(e){var n,s,a,u,c,h,l,d,g,_,y,m;return this.isZero()?p:(t(e)||(e=o(e)),e.isZero()?p:this.eq(T)?e.isOdd()?T:p:e.eq(T)?this.isOdd()?T:p:this.isNegative()?e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg():e.isNegative()?this.mul(e.neg()).neg():this.lt(f)&&e.lt(f)?i(this.toNumber()*e.toNumber(),this.unsigned):(n=this.high>>>16,s=65535&this.high,a=this.low>>>16,u=65535&this.low,c=e.high>>>16,h=65535&e.high,l=e.low>>>16,g=0,_=0,y=0,m=0,y+=(m+=u*(d=65535&e.low))>>>16,_+=(y+=a*d)>>>16,y&=65535,_+=(y+=u*l)>>>16,g+=(_+=s*d)>>>16,_&=65535,g+=(_+=a*l)>>>16,_&=65535,g+=(_+=u*h)>>>16,g+=n*d+s*l+a*h+u*c,r((y&=65535)<<16|(m&=65535),(g&=65535)<<16|(_&=65535),this.unsigned)))},I.mul=I.multiply,I.divide=function(e){var n,r,s,a,u,h,l;if(t(e)||(e=o(e)),e.isZero())throw Error(\\\"division by zero\\\");if(this.isZero())return this.unsigned?g:p;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return g;if(e.gt(this.shru(1)))return y;s=g}else{if(this.eq(T))return e.eq(_)||e.eq(m)?T:e.eq(T)?_:(n=this.shr(1).div(e).shl(1)).eq(p)?e.isNegative()?_:m:(r=this.sub(e.mul(n)),s=n.add(r.div(e)));if(e.eq(T))return this.unsigned?g:p;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=p}for(r=this;r.gte(e);){for(n=Math.max(1,Math.floor(r.toNumber()/e.toNumber())),u=(a=Math.ceil(Math.log(n)/Math.LN2))<=48?1:c(2,a-48),l=(h=i(n)).mul(e);l.isNegative()||l.gt(r);)l=(h=i(n-=u,this.unsigned)).mul(e);h.isZero()&&(h=_),s=s.add(h),r=r.sub(l)}return s},I.div=I.divide,I.modulo=function(e){return t(e)||(e=o(e)),this.sub(this.div(e).mul(e))},I.mod=I.modulo,I.not=function(){return r(~this.low,~this.high,this.unsigned)},I.and=function(e){return t(e)||(e=o(e)),r(this.low&e.low,this.high&e.high,this.unsigned)},I.or=function(e){return t(e)||(e=o(e)),r(this.low|e.low,this.high|e.high,this.unsigned)},I.xor=function(e){return t(e)||(e=o(e)),r(this.low^e.low,this.high^e.high,this.unsigned)},I.shiftLeft=function(e){return t(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?r(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):r(0,this.low<<e-32,this.unsigned)},I.shl=I.shiftLeft,I.shiftRight=function(e){return t(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?r(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):r(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},I.shr=I.shiftRight,I.shiftRightUnsigned=function(e){var n;return t(e)&&(e=e.toInt()),0==(e&=63)?this:(n=this.high,e<32?r(this.low>>>e|n<<32-e,n>>>e,this.unsigned):r(32===e?n:n>>>e-32,0,this.unsigned))},I.shru=I.shiftRightUnsigned,I.toSigned=function(){return this.unsigned?r(this.low,this.high,!1):this},I.toUnsigned=function(){return this.unsigned?this:r(this.low,this.high,!0)},I.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},I.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,255&t>>>8,255&t>>>16,255&t>>>24,255&e,255&e>>>8,255&e>>>16,255&e>>>24]},I.toBytesBE=function(){var e=this.high,t=this.low;return[255&e>>>24,255&e>>>16,255&e>>>8,255&e,255&t>>>24,255&t>>>16,255&t>>>8,255&t]},e}()),Ui));Di.getModule=function(e){var t=new Di[e];return t.getArrayData=function(){var e=t.toArrayBuffer();return e=$(e)?[].slice.call(new Int8Array(e)):e},t};var Vi,ki=\\\"pgMsgP\\\",xi=\\\"chatMsg\\\",Bi=\\\"pcMsgP\\\",Gi={PRIVATE:\\\"ppMsgS\\\",GROUP:\\\"pgMsgS\\\",CHATROOM:\\\"chatMsgS\\\"},Fi=\\\"delMsg\\\",qi=\\\"joinChrm\\\",Ki=\\\"joinChrmR\\\",Hi=\\\"exitChrm\\\",Yi=\\\"setKV\\\",ji=\\\"delKV\\\",Qi=\\\"setKVS\\\",Wi=\\\"delKVS\\\",Ji=\\\"qryRelationR\\\",zi=\\\"delRelation\\\",Zi=\\\"setSeAtt\\\",Xi={PRIVATE:\\\"cleanPMsg\\\",GROUP:\\\"cleanGMsg\\\",ULTRA_GROUP:\\\"cleanGMsg\\\",CUSTOMER_SERVICE:\\\"cleanCMsg\\\",SYSTEM:\\\"cleanSMsg\\\"},$i=\\\"qryPMsg\\\",er=\\\"qryGMsg\\\",tr=\\\"qryCHMsg\\\",nr=\\\"qryCMsg\\\",ir=\\\"qrySMsg\\\",rr=((bi={})[\\\"ppMsgP\\\"]=j.PRIVATE,bi[ki]=j.GROUP,bi[xi]=j.CHATROOM,bi[Bi]=j.CUSTOMER_SERVICE,bi),sr=((Li={})[j.PRIVATE]=$i,Li[j.GROUP]=er,Li[j.CHATROOM]=tr,Li[j.CUSTOMER_SERVICE]=nr,Li[j.SYSTEM]=ir,Li),or=((Pi={})[j.PRIVATE]=Xi.PRIVATE,Pi[j.GROUP]=Xi.GROUP,Pi[j.ULTRA_GROUP]=Xi.ULTRA_GROUP,Pi[j.CUSTOMER_SERVICE]=Xi.CUSTOMER_SERVICE,Pi[j.SYSTEM]=Xi.SYSTEM,Pi),ar=\\\"1\\\",ur=\\\"0\\\",cr=1,hr=2,lr=3,dr=function(){function e(e){this._codec=\\\"websocket\\\"===e?Di:Ni,this._connectType=e}return e.prototype.decodeByPBName=function(e,t,n){var i,r=this,s=e,o=((i={})[Pt]=r._formatSyncMessages,i[Lt]=r._formatReceivedMessage,i[Ut]=r._formatSentMessage,i[Ft]=r._formatHistoryMessages,i[Kt]=r._formatConversationList,i[en]=r._formatChatRoomInfos,i[nn]=r._formatRTCUserList,i[ln]=r._formatRTCData,i[Mn]=r._formatChatRoomKVList,i[Vn]=r._formatUserSetting,i[Bn]=r._formatConversationStatus,i[jn]=r._formatGrpReadReceiptQryResp,i[Pn]=r._formatSetUserSettingOutput,i[kn]=r._formatUserSettingNotification,i[si]=r._formatUltraMsgChangeList,i[hi]=r._formatUltraOperateStatusNotifyList,i[ui]=r._formatUltraMsgList,i[Xt]=r._formatChrmKVVersion,i[gi]=r._formatRTCRoomKVList,i[hn]=r._formatRTCAuidenceJoinRoomData,i[yi]=r._formatRTCJoinedUserInfo,i)[t];try{s=e.length>0&&r._codec[t].decode(e),ne(s)&&(s=function(e){for(var t in e)ne(e[t])&&(e[t]=st(e[t]));return e}(s)),ie(o)&&(s=o.call(this,s,n))}catch(n){ge.error(\\\"PB parse error\\\\n\\\",n,e,t)}return s},e.prototype._readBytes=function(e){var t=e.offset,n=e.buffer,i=e.limit;if(t)try{var r=$(n)?new Uint8Array(n):n;return Mt.readUTF(r.subarray(t,i))}catch(e){ge.info(\\\"readBytes error\\\\n\\\",e)}return e},e.prototype._formatBytes=function(e){if(!e)return e;var t=this._readBytes(e);try{t=JSON.parse(t)}catch(e){ge.info(\\\"formatBytes error\\\\n\\\",e)}return t||e},e.prototype._formatSyncMessages=function(e,t){t=t||{};var n=this,i=e.list,r=e.syncTime,s=e.finished;return(re(s)||null===s)&&(e.finished=!0),e.syncTime=st(r),e.list=ft(i,(function(e){return n._formatReceivedMessage(e,t)})),e},e.prototype._formatReceivedMessage=function(e,t){if(!e)return e;var n=(t=t||{}).currentUserId,r=t.connectedTime,s=e.content,o=e.fromUserId,a=e.type,u=e.groupId,c=e.status,h=e.dataTime,l=e.classname,d=e.msgId,f=e.extraContent,p=e.pushContent,g=e.pushExt,_=e.configFlag,y=e.extStatus,m=(e.direction||me.RECEIVE)===me.SEND,v=function(e){var t=i.READ;return{isPersited:!!(16&e),isCounted:!!(32&e),isMentioned:!!(64&e),disableNotification:!!(512&e),receivedStatus:t=2&e?i.RETRIEVED:t,canIncludeExpansion:!!(1024&e)}}(c),E=v.isPersited,T=v.isCounted,I=v.isMentioned,C=v.disableNotification,R=v.receivedStatus,S=v.canIncludeExpansion,N=!!(2&(y||0)),M=!!(4&(y||0)),w=[j.GROUP,j.CHATROOM,j.RTC_ROOM,j.ULTRA_GROUP].indexOf(a)>-1?u:o,A=m?n:o,U=st(h),b=U<r,L=a===j.CHATROOM,P=this._formatBytes(s),D={};if(g&&(D=ct(g.pushConfigs,g.pushId)),P.user){var V=P.user,k=V.portrait,x=V.portraitUri,B=k||x;B&&(P.user.portrait=P.user.portraitUri=B)}var G,F=O(O({},D),{pushTitle:null==g?void 0:g.title,pushContent:p,pushData:p,disablePushTitle:!!_&&Boolean(4&_),forceShowDetailContent:!!_&&Boolean(8&_),templateId:null==g?void 0:g.templateId}),q=m?me.SEND:me.RECEIVE;L&&o===n&&(q=me.SEND),f&&(G={},G=Ct(f));var K={conversationType:a,targetId:w,senderUserId:A,messageType:l,messageUId:d,isPersited:E,isCounted:T,isMentioned:I,sentTime:U,messageDirection:q,receivedTime:Rt.getTime(),disableNotification:C,receivedStatus:R,canIncludeExpansion:S,content:P,expansion:G,configFlag:_,pushConfig:F,channelId:e.busChannel||\\\"\\\",isInterrupt:N,isModifyMessage:M};return a!==j.ULTRA_GROUP&&(K.isOffLineMessage=b),K},e.prototype._formatSentMessage=function(e,t){var n,i=e.content,r=e.classname,s=e.sessionId,o=e.msgId,a=e.extraContent,u=e.pushExt,c=e.pushContent,h=e.configFlag,l=e.extStatus,d=t.signal,f=t.currentUserId,p=d.date,g=d.topic,_=d.targetId,y=!!(2&(l||0)),m=function(e){return{isPersited:!!(1&e),isCounted:!!(2&e),disableNotification:!!(32&e),canIncludeExpansion:!!(64&e)}}(s),v=m.isPersited,E=m.isCounted,T=m.disableNotification,I=m.canIncludeExpansion,C=rr[g]||j.PRIVATE,R=_t(Gi,g),S=this._formatBytes(i),N=_;r===Se.RECALL&&(C=S.conversationType||C,N=S.targetId||_),a&&(n={},n=Ct(a));var M={};u&&(M=ct(u.pushConfigs,u.pushId));var w=O(O({},M),{pushTitle:null==u?void 0:u.title,pushContent:c,pushData:c,disablePushTitle:!!h&&Boolean(4&h),forceShowDetailContent:!!h&&Boolean(8&h),templateId:null==u?void 0:u.templateId});return{conversationType:C,targetId:N,messageType:r,messageUId:o,isPersited:v,isCounted:E,isStatusMessage:R,senderUserId:f,content:this._formatBytes(i),sentTime:1e3*p,receivedTime:Rt.getTime(),messageDirection:me.SEND,isOffLineMessage:!1,disableNotification:T,canIncludeExpansion:I,expansion:n,pushConfig:w,channelId:e.busChannel||\\\"\\\",isInterrupt:y}},e.prototype._formatHistoryMessages=function(e,t){var n=this,i=t.conversation||{},r=e.list,s=e.hasMsg,o=i.targetId,a=st(e.syncTime),u=[];return dt(r,(function(e){var r=n._formatReceivedMessage(e,t);i.conversationType===j.ULTRA_GROUP?r.targetId=e.groupId||i.targetId:r.targetId=o,u.push(r)}),{isReverse:!0}),{syncTime:a,list:u,hasMore:!!s}},e.prototype._formatUltraMsgChangeList=function(e){var t=e.list,n=e.syncTime,i=e.hasNext;return{syncTime:n,list:t&&t.map((function(e){var t=e.targetId,n=e.type,i=e.time,r=e.changeType,s=e.msgUID,o=e.msgTime,a=e.busChannel,u=e.isAdmin,c=e.isDel,h=e.operatorId;return{targetId:t,conversationType:n,changeType:r,messageUId:s,changeTime:st(i),sendTime:st(o),channelId:a,isAdmin:u,isDel:c,operatorId:h}})),hasNext:i}},e.prototype._formatUltraOperateStatusNotifyList=function(e){var t=e.type,n=e.notifyType,i=e.info,r=e.summary,s=[],o=[],a=2==(2&n),u=1==(1&n);return u&&Array.isArray(i)&&i.forEach((function(e){var t=e.targetId,n=e.busChannel,i=e.userId,r=e.opType,o=e.optime,a=st(o);s.push({targetId:t,channelId:n,userId:i,operationType:r,operationTime:a})})),a&&Array.isArray(r)&&r.forEach((function(e){var t=e.targetId,n=e.busChannel,i=e.count,r=e.opType;o.push({targetId:t,channelId:n,count:i,operationType:r})})),{conversationType:t,info:s,summary:o,hasInfo:u,hasSummary:a}},e.prototype._formatUltraMsgList=function(e,t){var n=this,i=e.list;return{list:i&&i.map((function(e){return n._formatReceivedMessage(e,t)}))}},e.prototype._formatConversationList=function(e,t){var n=this,i=e.info,r=t.afterDecode||function(){},s={list:i=ft(i,(function(e){var i=e.msg,s=e.userId,o=e.type,a=e.unreadCount,u=e.busChannel,c=e.versionTime,h=e.remindCount,l=null;i&&((l=n._formatReceivedMessage(i,t)).targetId=s);var d={targetId:s,conversationType:o,unreadMessageCount:st(a)||0,latestMessage:l||{},channelId:u||\\\"\\\"};return o===j.ULTRA_GROUP&&(d.versionTime=st(c)||0,d.unreadMentionedCount=st(h)||0),r(d)||d}))};return((null==t?void 0:t.conversationType)||j.NONE)===j.ULTRA_GROUP&&(s.isFinished=e.isFinished),s},e.prototype._formatSetUserSettingOutput=function(e){return e},e.prototype._formatChatRoomInfos=function(e){var t=e.userTotalNums,n=e.userInfos;return{userCount:t,userInfos:ft(n,(function(e){var t=e.id,n=e.time;return{id:t,time:st(n)}}))}},e.prototype._formatChatRoomKVList=function(e){var t=e.entries,n=e.bFullUpdate,i=e.syncTime;return{kvEntries:t=ft(t=t||[],(function(e){var t=e.key,n=e.value,i=e.status,r=e.timestamp,s=e.uid,o=e.version,a=function(e){return{isAutoDelete:!!(1&e),isOverwrite:!!(2&e),type:4&e?Le.DELETE:Le.UPDATE}}(i);return{key:t,value:n,isAutoDelete:a.isAutoDelete,isOverwrite:a.isOverwrite,type:a.type,userId:s,timestamp:st(r),version:st(o)}})),isFullUpdate:n,syncTime:i}},e.prototype._formatUserSetting=function(e){var t=this,n=e.items,i=e.version,r={};return dt(n||[],(function(e){var n=e.key,i=e.version,s=e.value;e.version=st(i),e.value=t._readBytes(s),\\\"Tag\\\"===n&&e.tags.forEach((function(e){e.createdTime=st(e.createdTime),e.tagName=e.name})),r[n]=e})),{settings:r,version:i}},e.prototype._formatConversationStatus=function(e){var t=e.state,n=[];return dt(t,(function(e){var t=e.type,i=e.channelId,r=e.time,s=e.stateItem,o=e.busChannel,a=Oe.CLOSE,u=!1,c=[];dt(s,(function(e){var t=e.sessionStateType,n=e.value,i=e.tags;switch(t){case cr:a=n===ar?Oe.OPEN:Oe.CLOSE;break;case hr:u=n===ar;break;case lr:c=i}})),n.push({conversationType:t,type:t,targetId:i,notificationStatus:a,isTop:u,updatedTime:st(r),tags:c,channelId:o||\\\"\\\"})})),n},e.prototype._formatRTCUserList=function(e){var t=e.users,n=e.token,i=e.sessionId,r=e.roomInfo,s=e.entries,o={};return dt(t,(function(e){var t=e.userId,n=e.userData,i={};dt(n,(function(e){var t=e.key,n=e.value;i[t]=n})),o[t]=i})),{users:o,token:n,sessionId:i,roomInfo:r,kvEntries:s}},e.prototype._formatRTCData=function(e){var t=e.outInfo,n={};return dt(t,(function(e){n[e.key]=e.value})),n},e.prototype._formatRTCRoomInfo=function(e){var t=e.roomId,n=e.userCount,i=e.roomData,r={id:t,total:n};return dt(i,(function(e){r[e.key]=e.value})),r},e.prototype._formatGrpReadReceiptQryResp=function(e){var t=e.totalMemberNum,n=e.list;return n.forEach((function(e){e.readTime=st(e.readTime)})),{totalMemberCount:t,list:n}},e.prototype._formatUserSettingNotification=function(e){return e},e.prototype._formatRTCRoomKVList=function(e){var t=e.entries,n=e.bFullUpdate,i=e.syncTime;return{kvEntries:t=(t=t||[]).map((function(e){var t=e.timestamp;return Object.assign(e,{timestamp:st(t)})})),isFullUpdate:n,syncTime:i}},e.prototype._formatChrmKVVersion=function(e){return e},e.prototype._formatRTCAuidenceJoinRoomData=function(e){return e},e.prototype._formatRTCJoinedUserInfo=function(e){return(e.info||[]).map((function(e){return{deviceId:e.deviceId,roomId:e.roomId,joinTime:st(e.joinTime)}}))},e.prototype.encodeServerConfParams=function(){var e=this._codec.getModule(Dt);return e.setNothing(1),e.getArrayData()},e.prototype._getUpMsgModule=function(e,t){var n,i,r,s=\\\"comet\\\"===this._connectType,o=e.conversationType,a=t.messageType,u=t.isMentioned,c=t.mentionedType,h=t.mentionedUserIdList,l=t.content,d=t.pushContent,f=t.pushData,p=t.directionalUserIdList,g=t.isFilerWhiteBlacklist,_=t.isVoipPush,y=t.canIncludeExpansion,m=t.expansion,v=t.pushConfig,E=t.channelId;[j.GROUP,j.ULTRA_GROUP].includes(o);var T=this._codec.getModule(Ut),I=function(e){var t=e.isStatusMessage,n=e.isPersited,i=e.isCounted;t&&(n=i=!1);var r=0;return n&&(r|=1),i&&(r|=2),e.isMentioned&&(r|=4),e.disableNotification&&(r|=32),e.canIncludeExpansion&&(r|=64),r}(t),C=v||{},R=C.pushTitle,S=C.pushContent,N=C.pushData,O=C.iOSConfig,M=C.androidConfig,w=C.templateId,A=C.disablePushTitle,U=C.forceShowDetailContent,b=0;T.setSessionId(I),u&&l&&(l.mentionedInfo={userIdList:(null===(n=l.mentionedInfo)||void 0===n?void 0:n.userIdList)||h||[],type:(null===(i=l.mentionedInfo)||void 0===i?void 0:i.type)||c||we.ALL,mentionedContent:(null===(r=l.mentionedInfo)||void 0===r?void 0:r.mentionedContent)||\\\"\\\"});var L=S||d||\\\"\\\",P=N||f||\\\"\\\";if(L&&T.setPushText(L),P&&T.setAppData(P),p&&T.setUserId(p),b|=_?1:0,b|=g?2:0,b|=A?4:0,b|=U?8:0,T.setConfigFlag(b),T.setClassname(a),l.user&&l.user.portraitUri&&(l.user.portrait=l.user.portraitUri),T.setContent(JSON.stringify(l)),y&&m){var D={};dt(m,(function(e,t){D[t]={v:e}})),T.setExtraContent(JSON.stringify(D))}if(v){var V=this._codec.getModule(bt);if(R&&V.setTitle(R),O&&M){var k=ut(O,M);V.setPushConfigs(k)}(null==M?void 0:M.notificationId)&&V.setPushId(null==M?void 0:M.notificationId),V.setTemplateId(w||\\\"\\\"),T.setPushExt(s?V.getArrayData():V)}return re(E)||T.setBusChannel(E),T},e.prototype.encodeUpMsg=function(e,t){return this._getUpMsgModule(e,t).getArrayData()},e.prototype.encodeSyncMsg=function(e){var t=e.sendboxTime,n=e.inboxTime,i=this._codec.getModule(kt);return i.setIspolling(!1),i.setIsPullSend(!0),i.setSendBoxSyncTime(t),i.setSyncTime(n),i.getArrayData()},e.prototype.encodeChrmSyncMsg=function(e,t){e=e||0,t=t||0;var n=this._codec.getModule(xt);return n.setCount(t),n.setSyncTime(e),n.getArrayData()},e.prototype.encodeGetHistoryMsg=function(e,t){var n=t.count,i=t.order,r=t.timestamp,s=t.channelId,o=this._codec.getModule(Gt);return o.setTargetId(e),o.setTime(r),o.setCount(n),o.setOrder(i),o.setBusChannel(s||\\\"\\\"),o.getArrayData()},e.prototype.encodeSuperSyncMsg=function(e){var t=this._codec.getModule(ti);return t.setSyncTime(e),t.getArrayData()},e.prototype.encodeGetConversationList=function(e){var t=(e=e||{}).count,n=e.startTime,i=this._codec.getModule(qt);return i.setType(1),i.setCount(t),i.setStartTime(n),i.getArrayData()},e.prototype.encodeOldConversationList=function(e){var t=(e=e||{}).count,n=e.type,i=e.startTime,r=e.order;t=t||0,i=i||0,r=r||0;var s=this._codec.getModule(qt);return s.setType(n),s.setCount(t),s.setStartTime(i),s.setOrder(r),s.getArrayData()},e.prototype.encodeRemoveOldConversationList=function(e){var t=(e=e||{}).conversationType,n=e.channelId,i=this._codec.getModule(Qt);return i.setType(t),n&&i.setBusChannel([n]),i.getArrayData()},e.prototype.encodeRemoveConversationList=function(e){var t=this,n=this._codec.getModule(Ht),i=[];return dt(e,(function(e){var n=e.conversationType,r=e.targetId,s=t._codec.getModule(Yt);s.setType(n),s.setChannelId(r),i.push(s)})),n.setSessions(i),n.getArrayData()},e.prototype.encodeDeleteMessages=function(e,t,n,i){var r=this._codec.getModule(Wt),s=[];return dt(n,(function(e){s.push({msgId:e.messageUId,msgDataTime:e.sentTime,direct:e.messageDirection})})),r.setType(e),r.setConversationId(t),r.setMsgs(s),r.setBusChannel(i),r.getArrayData()},e.prototype.encodeClearMessages=function(e,t,n,i){var r=this._codec.getModule(Jt);return t=t||(new Date).getTime(),r.setDataTime(t),r.setTargetId(e),r.setBusChannel(n),r.setConversationType(i),r.getArrayData()},e.prototype.encodeClearUnreadCount=function(e,t){var n=e.conversationType,i=e.targetId,r=e.channelId,s=t.timestamp,o=this._codec.getModule(zt);return s=s||+new Date,o.setType(n),o.setChannelId(i),o.setMsgTime(s),o.setBusChannel(r),o.getArrayData()},e.prototype.encodeExpandUltraMessage=function(e,t){var n=e.targetId,i=e.conversationType,r=e.channelId,s=e.messageUId,o=e.sendTime,a=e.keys,u={mid:s,put:e.expansion,del:a,clear:e.removeAll?1:0},c=this._codec.getModule(ni);return c.setFromUserId(t),c.setTargetId(n),c.setType(i),c.setBusChannel(r||\\\"\\\"),c.setMsgUID(s),c.setMsgTime(o),c.setContent(JSON.stringify(u)),c.getArrayData()},e.prototype.encodemodifyMessage=function(e,t){var n=e.targetId,i=e.conversationType,r=e.channelId,s=e.messageUId,o=e.sendTime,a=e.content,u=this._codec.getModule(ni);return u.setFromUserId(t),u.setTargetId(n),u.setType(i),u.setBusChannel(r||\\\"\\\"),u.setMsgUID(s),u.setMsgTime(o),u.setContent(JSON.stringify(a)),u.getArrayData()},e.prototype.encodeQueryMsgChange=function(e){var t=this._codec.getModule(ii);return t.setSyncTime(e),t.getArrayData()},e.prototype.encodeMsgQuery=function(e){var t=e.targetId,n=e.conversationType,i=e.messages,r=this._codec.getModule(oi),s=i.map((function(e){return{msgTime:e.sendTime,msgUID:e.messageUId,busChannel:e.channelId}}));return r.setTargetId(t),r.setType(n),r.setQuery(s),r.getArrayData()},e.prototype.encodeOperateStatus=function(e,t,n,i){var r=this._codec.getModule(ci);return r.setTargetId(e),r.setType(t),r.setBusChannel(n),r.setOpType(i),r.getArrayData()},e.prototype.encodeJoinOrQuitChatRoom=function(){var e=this._codec.getModule(Zt);return e.setNothing(1),e.getArrayData()},e.prototype.encodeGetChatRoomInfo=function(e,t){var n=this._codec.getModule($t);return n.setCount(e),n.setOrder(t),n.getArrayData()},e.prototype.encodeGetFileToken=function(e,t,n,i){var r=this._codec.getModule(mn);return r.setType(e),r.setKey(t),r.setHttpMethod(n),r.setQueryString(i),r.getArrayData()},e.prototype.encodeGetFileUrl=function(e,t,n,i){var r=this._codec.getModule(e);return r.setType(t),r.setKey(n),i&&r.setFileName(i),r.getArrayData()},e.prototype.encodeModifyChatRoomKV=function(e,t,n){var i=\\\"comet\\\"===this._connectType,r=this._codec.getModule(Sn),s=t.key,o=t.value,a=t.notificationExtra,u=t.isSendNotification,c=t.type,h=t.timestamp,l=c||Le.UPDATE,d=St(t,l),f={key:s,value:o||\\\"\\\",uid:n,version:h};if(re(d)||(f.status=d),r.setEntry(f),u){var p={conversationType:j.CHATROOM,targetId:e},g={key:s,value:o,extra:a,type:l},_=this._getUpMsgModule(p,{messageType:Se.CHRM_KV_NOTIFY,content:g,isPersited:!1,isCounted:!1});i?r.setNotification(_.getArrayData()):r.setNotification(_),r.setBNotify(!0),r.setType(j.CHATROOM)}return r.getArrayData()},e.prototype.encodeModifyChatRoomKVS=function(e,t,n){this._connectType;var i=this._codec.getModule(Nn),r=t.entries,s=t.type||Le.UPDATE,o=St(t,s),a=[];return r.forEach((function(e){var t={key:e.key,value:e.value||\\\"\\\",uid:n,version:e.timestamp};re(o)||(t.status=o),a.push(t)})),i.setEntry(a),i.getArrayData()},e.prototype.encodePullChatRoomKV=function(e){var t=this._codec.getModule(bn);return t.setTimestamp(e),t.getArrayData()},e.prototype.encodePullUserSetting=function(e){var t=this._codec.getModule(Dn);return t.setVersion(e),t.getArrayData()},e.prototype.encodeGetConversationStatus=function(e){var t=this._codec.getModule(xn);return t.setTime(e),t.getArrayData()},e.prototype.encodeSetConversationStatus=function(e){var t=this,n=\\\"comet\\\"===this._connectType,i=this._codec.getModule(qn),r=Rt.getTime(),s=[];return dt(e,(function(e){var i=t._codec.getModule(Gn),o=e.conversationType,a=e.targetId,u=e.notificationStatus,c=e.isTop,h=e.channelId,l=[];i.setType(o),i.setChannelId(a),i.setTime(r),i.setBusChannel(h);var d=u===Oe.OPEN,f={};re(u)||(f[cr]=d),re(c)||(f[hr]=c),dt(f,(function(e,i){if(!re(e)){var r=t._codec.getModule(Fn);e=e?ar:ur,r.setSessionStateType(Number(i)),r.setValue(e);var s=n?r.getArrayData():r;l.push(s)}})),i.setStateItem(l);var p=n?i.getArrayData():i;s.push(p)})),i.setVersion(r),i.setState(s),i.getArrayData()},e.prototype.encodeReadReceipt=function(e,t){var n=this._codec.getModule(Hn);return n.setMsgId(e),t&&n.setChannelId(t),n.getArrayData()},e.prototype.encodeCreateTag=function(e,t){var n=this,i=\\\"comet\\\"===this._connectType,r=this._codec.getModule(Wn),s=[];return e.forEach((function(e){var t=n._codec.getModule(Jn);t.setTagId(e.tagId),t.setName(e.tagName),s.push(i?t.getArrayData():t)})),r.setTags(s),r.setVersion(t),r.getArrayData()},e.prototype.encodeMessageReader=function(e,t){var n=this._codec.getModule(Hn);return n.setMsgId(e),t&&n.setChannelId(t),n.getArrayData()},e.prototype.encodeRemoveTag=function(e,t){var n=this,i=\\\"comet\\\"===this._connectType,r=this._codec.getModule(zn),s=[];return e.forEach((function(e){var t=n._codec.getModule(Jn);t.setTagId(e),s.push(i?t.getArrayData():t)})),r.setTags(s),r.setVersion(t),r.getArrayData()},e.prototype.encodeDisConversationTag=function(e){var t=this._codec.getModule(Zn);return t.setTagId(e),t.getArrayData()},e.prototype.encodeUpdateConversationTag=function(e,t){var n=this,i=\\\"comet\\\"===this._connectType,r=this._codec.getModule(qn),s=[];return t.forEach((function(t){var r=n._codec.getModule(Gn),o=n._codec.getModule(Fn),a=[];e.forEach((function(e){var t=n._codec.getModule(Jn);t.setTagId(e.tagId),re(e.isTop)||t.setIsTop(e.isTop),a.push(i?t.getArrayData():t)})),o.setSessionStateType(lr),o.setValue(JSON.stringify(a)),o.setTags(a),r.setType(t.conversationType),r.setChannelId(t.targetId),r.setTime(Date.now()),r.setStateItem([i?o.getArrayData():o]),s.push(i?r.getArrayData():r)})),r.setState(s),r.setVersion(Rt.getTime()),r.getArrayData()},e.prototype.encodeReportSDKInfo=function(e){var t=this._codec.getModule(Xn);return t.setSdkInfo(e),t.getArrayData()},e.prototype.encodeUltraGroup=function(e,t){var n=this._codec.getModule(ei);return n.setSyncTime(e),n.setIsEraseMsgContent(t),n.getArrayData()},e.prototype.encodeJoinRTCRoom=function(e,t,n,i,r){var s=this,o=\\\"comet\\\"===this._connectType,a=this._codec.getModule(tn);if(e=e||0,a.setRoomType(e),re(t)||a.setBroadcastType(t),re(n)||a.setJoinType(n),i){var u=[],c=this._codec.getModule(_n);for(var h in i)c.setKey(h),c.setValue(i[h]),o?u.push(c.getArrayData()):u.push(c);a.setInnerDatas(u)}if(r){var l=[];Object.keys(r).forEach((function(e){var t=s._codec.getModule(_n);t.setKey(e),t.setValue(r[e]),o?l.push(t.getArrayData()):l.push(t)})),a.setOuterDatas(l)}return a.getArrayData()},e.prototype.encodeQuitRTCRoom=function(){return this._codec.getModule(rn).getArrayData()},e.prototype.encodeSetRTCData=function(e,t,n,i,r){var s=this._codec.getModule(sn);if(s.setInterior(n),s.setTarget(i),s.setKey(e),s.setValue(t),r){r.name&&s.setObjectName(r.name);var o=r.content;o&&(ne(o)&&(o=JSON.stringify(o)),s.setContent(o))}return s.getArrayData()},e.prototype.encodeUserSetRTCData=function(e,t,n,i){var r=this,s=\\\"comet\\\"===this._connectType,o=this._codec.getModule(on);o.setObjectName(n);var a=this._codec.getModule(_n);a.setKey(e.name),a.setValue(e.content),s?o.setContent(a.getArrayData()):o.setContent(a);var u=[];return[\\\"uris\\\",\\\"mcu_uris\\\"].forEach((function(e){var n=r._codec.getModule(_n);n.setKey(e);var o=\\\"uris\\\"===e?t:i;n.setValue(o),s?u.push(n.getArrayData()):u.push(n)})),o.setValueInfo(u),o.getArrayData()},e.prototype.encodeUserSetRTCCDNUris=function(e,t){this._connectType;var n=this._codec.getModule(on);n.setObjectName(e);var i=this._codec.getModule(_n);return i.setKey(\\\"cdn_uris\\\"),i.setValue(t),n.setValueInfo(i),n.getArrayData()},e.prototype.encodeGetRTCData=function(e,t,n){var i=this._codec.getModule(an);return i.setInterior(t),i.setTarget(n),i.setKey(e),i.getArrayData()},e.prototype.encodeRemoveRTCData=function(e,t,n,i){var r=this._codec.getModule(an);r.setInterior(t),r.setTarget(n),r.setKey(e);var s=(i=i||{}).name,o=i.content;return!re(s)&&r.setObjectName(s),re(o)||(ne(o)&&(o=JSON.stringify(o)),r.setContent(o)),r.getArrayData()},e.prototype.encodeSetRTCOutData=function(e,t,n){var i=this._codec.getModule(un);i.setTarget(t),X(e)||(e=[e]),dt(e,(function(t,n){t.key=t.key?t.key.toString():t.key,t.value=t.value?t.value.toString():t.value,e[n]=t})),i.setValueInfo(e);var r=(n=n||{}).name,s=n.content;return!re(r)&&i.setObjectName(r),re(s)||(ne(s)&&(s=JSON.stringify(s)),i.setContent(s)),i.getArrayData()},e.prototype.ecnodeGetRTCOutData=function(e){var t=this._codec.getModule(dn);return t.setUserId(e),t.getArrayData()},e.prototype.encodeSetRTCState=function(e){var t=this._codec.getModule(cn);return t.setState(e),t.getArrayData()},e.prototype.encodeGetRTCRoomInfo=function(){var e=this._codec.getModule(pn);return e.setOrder(2),e.getArrayData()},e.prototype.encodeSetRTCUserInfo=function(e,t){var n=this._codec.getModule(_n);return n.setKey(e),n.setValue(t),n.getArrayData()},e.prototype.encodeRemoveRTCUserInfo=function(e){var t=this._codec.getModule(yn);return t.setKey(e),t.getArrayData()},e.prototype.encodeIdentityChangeInfo=function(e,t,n){void 0===n&&(n=!1);var i=this._codec.getModule(tn);return i.setRoomType(xe.LIVE),t&&i.setBroadcastType(t),i.setIdentityChangeType(e),i.setNeedSysChatroom(n),i.getArrayData()},e.prototype.encodePullRTCRoomKV=function(e,t){var n=this._codec.getModule(pi);return n.setTimestamp(t),n.setRoomId(e),n.getArrayData()},e.prototype.encodeQueryUserJoinedInfo=function(e){var t=this._codec.getModule(_i);return t.setUserId(e),t.getArrayData()},e.prototype.encodeRequestRoomPK=function(e){var t=e.invitedRoomId,n=e.invitedUserId,i=e.inviteSessionId,r=e.inviteTimeout,s=e.inviteInfo,o=this._codec.getModule(vi);return o.setInvitedRoomId(t),o.setInvitedUserId(n),o.setInviteSessionId(i),o.setTimeoutTime(r),o.setInviteInfo(s),o.getArrayData()},e.prototype.encodeCancelRoomPK=function(e){var t=e.invitedRoomId,n=e.invitedUserId,i=e.inviteSessionId,r=e.inviteInfo,s=this._codec.getModule(Ei);return s.setInvitedRoomId(t),s.setInvitedUserId(n),s.setInviteSessionId(i),s.setInviteInfo(r),s.getArrayData()},e.prototype.encodeResponseRoomPK=function(e){var t=e.inviteUserId,n=e.inviteRoomId,i=e.inviteSessionId,r=e.content,s=e.key,o=e.value,a=e.agree?1:0,u=this._codec.getModule(Ti);return u.setInviteUserId(t),u.setInviteRoomId(n),u.setInviteSessionId(i),u.setContent(r),u.setKey(s),u.setValue(o),u.setAnswerCode(a),u.getArrayData()},e.prototype.encodeEndRoomPK=function(e){var t=e.endRoomId,n=e.sessionId,i=e.content,r=e.keys,s=this._codec.getModule(Ii);return s.setInviteRoomId(t),s.setInviteSessionId(n),s.setInviteContent(i),s.setInviteRoomKeys(r),s.getArrayData()},e.prototype.encodebindRTCRoomForChatroom=function(e){var t=this._codec.getModule(Ci);return t.setRtcRoomId(e.rtcRoomId),t.getArrayData()},e}(),fr=function(e,t){this._watcher=t,this.codec=new dr(e)},pr=function(e,t){return e&&t?t+\\\"_\\\"+e:e||Date.now()},gr=function(){function e(e){this.header=e,this._name=null,this.lengthSize=0,this.messageId=0,this.timestamp=0,this.syncMsg=!1,this.identifier=\\\"\\\"}return e.prototype.getIdentifier=function(){var e=this.messageId,t=this.identifier;return pr(e,t)},e.prototype.read=function(e,t,n){this.readMessage(e,t,n)},e.prototype.readMessage=function(e,t,n){return{stream:e,length:t}},e}(),_r=function(){function e(e){this.lengthSize=0,this.messageId=0,this.topic=\\\"\\\",this.targetId=\\\"\\\",this.identifier=\\\"\\\",this._header=new Ot(e,!1,ze.AT_MOST_ONCE,!1)}return e.prototype.getIdentifier=function(){var e=this.messageId,t=this.identifier;return pr(e,t)},e.prototype.write=function(e){var t=this.getHeaderFlag();e.write(t),this.writeMessage(e)},e.prototype.setHeaderQos=function(e){this._header.qos=e},e.prototype.getHeaderFlag=function(){return this._header.encode()},e.prototype.getLengthSize=function(){return this.lengthSize},e.prototype.getBufferData=function(){var e=new At;this.write(e);var t=e.getBytesArray();return new Int8Array(t)},e.prototype.getCometData=function(){var e=this.data||{};return JSON.stringify(e)},e}(),yr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._name=Xe.CONN_ACK,t.status=null,t.userId=null,t.timestamp=0,t}return N(t,e),t.prototype.readMessage=function(e,n,i){if(e.readByte(),this.status=+e.readByte(),n<=t.MESSAGE_LENGTH)return{stream:e,length:n};if(i===et.V4){var r=e.readByte();1&r&&(this.userId=e.readUTF()),2&r&&e.readUTF(),4&r&&(this.timestamp=e.readLong()),8&r&&(this.messageId=e.read2Byte())}else{this.userId=e.readUTF();var s=e.readUTF();ge.debug(\\\"server sessionId -> \\\"+s),this.timestamp=e.readLong()}return{stream:e,length:n}},t.MESSAGE_LENGTH=2,t}(gr),mr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._name=Xe.DISCONNECT,t.status=0,t}return N(t,e),t.prototype.readMessage=function(e,t){return e.readByte(),this.status=+e.readByte(),{stream:e,length:t}},t.MESSAGE_LENGTH=2,t}(gr),vr=function(e){function t(){var t=e.call(this,Ze.PING_REQ)||this;return t._name=Xe.PING_REQ,t}return N(t,e),t.prototype.writeMessage=function(e){},t}(_r),Er=function(e){function t(t){var n=e.call(this,t)||this;return n._name=Xe.PING_RESP,n}return N(t,e),t}(gr),Tr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.messageId=0,t}return N(t,e),t.prototype.readMessage=function(e,t){var n=256*e.readByte()+e.readByte();return this.messageId=parseInt(n.toString(),10),{stream:e,length:t}},t}(gr),Ir=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.messageId=0,t}return N(t,e),t.prototype.writeMessage=function(e){var t=this.messageId,n=255&t,i=(65280&t)>>8;e.write(i),e.write(n)},t}(_r),Cr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._name=Xe.PUBLISH,t.topic=\\\"\\\",t.targetId=\\\"\\\",t.syncMsg=!1,t.identifier=$e.PUB,t}return N(t,e),t.prototype.readMessage=function(t,n){return this.date=t.readInt(),this.topic=t.readUTF(),this.targetId=t.readUTF(),e.prototype.readMessage.call(this,t,n),this.data=t.readAll(),{stream:t,length:n}},t}(Tr),Rr=function(e){function t(t,n,i){var r=e.call(this,Ze.PUBLISH)||this;return r._name=Xe.PUBLISH,r.syncMsg=!1,r.identifier=$e.PUB,r.topic=t,r.data=J(n)?Mt.writeUTF(n):n,r.targetId=i,r}return N(t,e),t.prototype.writeMessage=function(t){t.writeUTF(this.topic),t.writeUTF(this.targetId),e.prototype.writeMessage.call(this,t),t.write(this.data)},t}(Ir),Sr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._name=Xe.PUB_ACK,t.status=0,t.date=0,t.millisecond=0,t.messageUId=\\\"\\\",t.timestamp=0,t.identifier=$e.PUB,t.topic=\\\"\\\",t.targetId=\\\"\\\",t}return N(t,e),t.prototype.readMessage=function(t,n){return e.prototype.readMessage.call(this,t,n),this.date=t.readInt(),this.status=256*t.readByte()+t.readByte(),this.millisecond=256*t.readByte()+t.readByte(),this.timestamp=1e3*this.date+this.millisecond,this.messageUId=t.readUTF(),{stream:t,length:n}},t}(Tr),Nr=function(e){function t(t){var n=e.call(this,Ze.PUB_ACK)||this;return n._name=Xe.PUB_ACK,n.status=0,n.date=0,n.millisecond=0,n.messageUId=\\\"\\\",n.timestamp=0,n.messageId=t,n}return N(t,e),t.prototype.writeMessage=function(t){e.prototype.writeMessage.call(this,t)},t}(Ir),Or=function(e){function t(t,n,i){var r=e.call(this,Ze.QUERY)||this;return r.name=Xe.QUERY,r.identifier=$e.QUERY,r.topic=t,r.data=J(n)?Mt.writeUTF(n):n,r.targetId=i,r}return N(t,e),t.prototype.writeMessage=function(t){t.writeUTF(this.topic),t.writeUTF(this.targetId),e.prototype.writeMessage.call(this,t),t.write(this.data)},t}(Ir),Mr=function(e){function t(t){var n=e.call(this,Ze.QUERY_CONFIRM)||this;return n._name=Xe.QUERY_CON,n.messageId=t,n}return N(t,e),t}(Ir),wr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._name=Xe.QUERY_ACK,t.status=0,t.identifier=$e.QUERY,t.topic=\\\"\\\",t.targetId=\\\"\\\",t}return N(t,e),t.prototype.readMessage=function(t,n){return e.prototype.readMessage.call(this,t,n),this.date=t.readInt(),this.status=256*t.readByte()+t.readByte(),this.data=t.readAll(),{stream:t,length:n}},t}(Tr),Ar=function(e){var t,n=e.type;switch(n){case Ze.CONN_ACK:t=new yr(e);break;case Ze.PUBLISH:(t=new Cr(e)).syncMsg=e.syncMsg;break;case Ze.PUB_ACK:t=new Sr(e);break;case Ze.QUERY_ACK:t=new wr(e);break;case Ze.SUB_ACK:case Ze.UNSUB_ACK:case Ze.PING_RESP:t=new Er(e);break;case Ze.DISCONNECT:t=new mr(e);break;default:t=new gr(e),ge.error(\\\"No support for deserializing \\\"+n+\\\" messages\\\")}return t};!function(e){e[e.ppMsgP=1]=\\\"ppMsgP\\\",e[e.ppMsgN=2]=\\\"ppMsgN\\\",e[e.ppMsgS=3]=\\\"ppMsgS\\\",e[e.pgMsgP=4]=\\\"pgMsgP\\\",e[e.chatMsg=5]=\\\"chatMsg\\\",e[e.pcMsgP=6]=\\\"pcMsgP\\\",e[e.qryPMsg=7]=\\\"qryPMsg\\\",e[e.qryGMsg=8]=\\\"qryGMsg\\\",e[e.qryCHMsg=9]=\\\"qryCHMsg\\\",e[e.qryCMsg=10]=\\\"qryCMsg\\\",e[e.qrySMsg=11]=\\\"qrySMsg\\\",e[e.recallMsg=12]=\\\"recallMsg\\\",e[e.prMsgS=13]=\\\"prMsgS\\\",e[e.rrMsg=14]=\\\"rrMsg\\\",e[e.rrList=15]=\\\"rrList\\\",e[e.s_ntf=16]=\\\"s_ntf\\\",e[e.s_msg=17]=\\\"s_msg\\\",e[e.s_stat=18]=\\\"s_stat\\\",e[e.s_cmd=19]=\\\"s_cmd\\\",e[e.s_us=20]=\\\"s_us\\\",e[e.pullUS=21]=\\\"pullUS\\\",e[e.pgMsgS=22]=\\\"pgMsgS\\\",e[e.chatMsgS=23]=\\\"chatMsgS\\\",e[e.qrySessionsAtt=24]=\\\"qrySessionsAtt\\\",e[e.pullMsg=25]=\\\"pullMsg\\\",e[e.qrySessions=26]=\\\"qrySessions\\\",e[e.delSessions=27]=\\\"delSessions\\\",e[e.delMsg=28]=\\\"delMsg\\\",e[e.updRRTime=29]=\\\"updRRTime\\\",e[e.chrmPull=30]=\\\"chrmPull\\\",e[e.joinChrm=31]=\\\"joinChrm\\\",e[e.joinChrmR=32]=\\\"joinChrmR\\\",e[e.exitChrm=33]=\\\"exitChrm\\\",e[e.queryChrmI=34]=\\\"queryChrmI\\\",e[e.setKV=35]=\\\"setKV\\\",e[e.delKV=36]=\\\"delKV\\\",e[e.pullKV=37]=\\\"pullKV\\\",e[e.qryRelation=38]=\\\"qryRelation\\\",e[e.delRelation=39]=\\\"delRelation\\\",e[e.pullSeAtts=40]=\\\"pullSeAtts\\\",e[e.setSeAtt=41]=\\\"setSeAtt\\\",e[e.qnTkn=42]=\\\"qnTkn\\\",e[e.qnUrl=43]=\\\"qnUrl\\\",e[e.aliUrl=44]=\\\"aliUrl\\\",e[e.s3Url=45]=\\\"s3Url\\\",e[e.stcUrl=46]=\\\"stcUrl\\\",e[e.cleanPMsg=47]=\\\"cleanPMsg\\\",e[e.cleanGMsg=48]=\\\"cleanGMsg\\\",e[e.cleanCMsg=49]=\\\"cleanCMsg\\\",e[e.cleanSMsg=50]=\\\"cleanSMsg\\\",e[e.rtcRJoin_data=51]=\\\"rtcRJoin_data\\\",e[e.rtcRExit=52]=\\\"rtcRExit\\\",e[e.rtcPing=53]=\\\"rtcPing\\\",e[e.rtcSetData=54]=\\\"rtcSetData\\\",e[e.rtc_ntf=55]=\\\"rtc_ntf\\\",e[e.viewerJoinR=56]=\\\"viewerJoinR\\\",e[e.viewerExitR=57]=\\\"viewerExitR\\\",e[e.rtcPullKv=58]=\\\"rtcPullKv\\\",e[e.rtcIdentityChange=59]=\\\"rtcIdentityChange\\\",e[e.userSetData=60]=\\\"userSetData\\\",e[e.rtcQryData=61]=\\\"rtcQryData\\\",e[e.rtcDelData=62]=\\\"rtcDelData\\\",e[e.rtcSetOutData=63]=\\\"rtcSetOutData\\\",e[e.rtcQryUserOutData=64]=\\\"rtcQryUserOutData\\\",e[e.rtcToken=65]=\\\"rtcToken\\\",e[e.rtcUserState=66]=\\\"rtcUserState\\\",e[e.rtcRInfo=67]=\\\"rtcRInfo\\\",e[e.rtcUData=68]=\\\"rtcUData\\\",e[e.rtcUPut=69]=\\\"rtcUPut\\\",e[e.rtcUDel=70]=\\\"rtcUDel\\\",e[e.rtcUList=71]=\\\"rtcUList\\\",e[e.rtcQueryJoined=72]=\\\"rtcQueryJoined\\\",e[e.rtcInvite=73]=\\\"rtcInvite\\\",e[e.rtcCancelInvite=74]=\\\"rtcCancelInvite\\\",e[e.rtcInviteAnswer=75]=\\\"rtcInviteAnswer\\\",e[e.rtcEndInvite=76]=\\\"rtcEndInvite\\\",e[e.addSeTag=77]=\\\"addSeTag\\\",e[e.delSeTag=78]=\\\"delSeTag\\\",e[e.addTag=79]=\\\"addTag\\\",e[e.delTag=80]=\\\"delTag\\\",e[e.disTag=81]=\\\"disTag\\\",e[e.reportsdk=82]=\\\"reportsdk\\\",e[e.pullUgSes=83]=\\\"pullUgSes\\\",e[e.pullUgMsg=84]=\\\"pullUgMsg\\\",e[e.ugMsg=85]=\\\"ugMsg\\\",e[e.qryUgMsg=86]=\\\"qryUgMsg\\\",e[e.updUgRTime=87]=\\\"updUgRTime\\\",e[e.upMsgEx=88]=\\\"upMsgEx\\\",e[e.modifyMsg=89]=\\\"modifyMsg\\\",e[e.qryMsgChange=90]=\\\"qryMsgChange\\\",e[e.qryMsg=91]=\\\"qryMsg\\\",e[e.operate=92]=\\\"operate\\\",e[e.s_opNtf=93]=\\\"s_opNtf\\\",e[e.setRtcRoomId=94]=\\\"setRtcRoomId\\\"}(Vi||(Vi={}));var Ur,br=Vi,Lr=function(e,t,n,i){return M(void 0,void 0,void 0,(function(){var r;return w(this,(function(s){return r=0,e.forEach((function(s){return M(void 0,void 0,void 0,(function(){var o,a,u;return w(this,(function(c){switch(c.label){case 0:o=t+\\\"://\\\"+s+\\\"/ping?r=\\\"+(l=9999,(h=1e3)+Math.floor(Math.random()*(l-h))),ge.debug(\\\"start ping\\\",o),r++,c.label=1;case 1:return c.trys.push([1,3,,4]),[4,n.httpReq({url:o,timeout:5e3})];case 2:return a=c.sent(),[3,4];case 3:return u=c.sent(),ge.error(\\\"ping error: \\\",u),i({finished:r===e.length,code:-2,host:s}),[2];case 4:return ge.debug(\\\"end ping\\\",r,o,null==a?void 0:a.status),i({finished:r===e.length,code:a.status,host:s}),[2]}var h,l}))}))})),[2]}))}))},Pr=function(e,t,n,i,r,s,o,a){return e+\\\"://\\\"+t+\\\"/websocket?appId=\\\"+n+\\\"&token=\\\"+encodeURIComponent(i)+\\\"&sdkVer=\\\"+s+\\\"&pid=\\\"+o+\\\"&apiVer=\\\"+(r.isFromUniapp?\\\"uniapp\\\":\\\"normal\\\")+(r.connectPlatform?\\\"&platform=\\\"+r.connectPlatform:\\\"\\\")+(a?\\\"&protocolVer=\\\"+a:\\\"\\\")},Dr=function(e){return[br.ppMsgS,br.pgMsgS,br.chatMsgS].map((function(e){return br[e]})).indexOf(e)>=0};!function(e){e[e.REDIRECT=0]=\\\"REDIRECT\\\",e[e.OTHER_DEVICE_LOGIN=1]=\\\"OTHER_DEVICE_LOGIN\\\",e[e.BLOCK=2]=\\\"BLOCK\\\",e[e.REMOTE_CLOSE=3]=\\\"REMOTE_CLOSE\\\",e[e.LOGOUT=4]=\\\"LOGOUT\\\",e[e.BLOCK_NEW=5]=\\\"BLOCK_NEW\\\",e[e.REDIRECT_NEW=6]=\\\"REDIRECT_NEW\\\"}(Ur||(Ur={}));var Vr,kr=function(e,t){ge.info(\\\"websocket send -> messageId: \\\"+e.messageId+\\\" topic: \\\"+e.topic);var n=e.getBufferData();t.send(n.buffer)},xr=function(e){function t(t,n){var i=e.call(this,\\\"websocket\\\",n)||this;return i._runtime=t,i._socket=null,i._messageIds={},i._syncMessageIds={},i._failedCount=0,i.ALLOW_FAILED_TIMES=2,i._timer=null,i._idCount=0,i._generateMessageId=function(){return i._idCount>=65535&&(i._idCount=0),++i._idCount},i}return N(t,e),t.prototype.connect=function(e,t,n,i,r,s){return M(this,void 0,void 0,(function(){var o=this;return w(this,(function(a){return[2,new Promise((function(a){var u=[],c=0,h=!1,l=!1,d=function(){return M(o,void 0,void 0,(function(){var n;return w(this,(function(o){switch(o.label){case 0:return 0===u.length||h?[2]:(h=!0,[4,this._connect(e,t,u.shift(),i,r,s)]);case 1:if((n=o.sent())===Ee.SUCCESS)this._checkAlive(),a(n);else if(n===Ce.REDIRECT)a(n);else{if(l&&0===u.length)return a(Et(n)),[2];h=!1,d()}return[2]}}))}))};r=x(r),o._watcher.status(Ie.CONNECTING),Lr(n,i,o._runtime,(function(e){var t=e.code,n=e.finished,i=e.host;l=n,200===t&&(u.push(i),c++,d()),n&&0===c&&(ge.error(\\\"No valid websocket server hosts!\\\"),a(Ee.RC_SOCKET_NOT_CREATED))}))}))]}))}))},t.prototype._connect=function(e,t,n,i,r,s){return M(this,void 0,void 0,(function(){var o,a,u,c,h,l=this;return w(this,(function(d){switch(d.label){case 0:return o=i.replace(\\\"http\\\",\\\"ws\\\"),a=Pr(o,n,e,t,this._runtime,r,\\\"\\\",s),ge.debug(\\\"conenct start -> \\\"+a),this.sendConnectTime=Date.now(),u=this._runtime.createWebSocket(a),c=function(e){l._timer&&(clearTimeout(l._timer),l._timer=null),l._socket===u&&(l._socket=null,l._watcher.status(e))},[4,new Promise((function(e){u.onMessage((function(t){if(\\\"[object ArrayBuffer]\\\"===Object.prototype.toString.call(t)){var n=function(e,t){var n=new Uint8Array(e),i=new wt(n),r=i.readByte(),s=new Ot(r),o=Ar(s);return o.read(i,n.length-1,t),o}(t,s);if(n instanceof Er&&l._pingResolve)return l._pingResolve(Ee.SUCCESS),void(l._pingResolve=void 0);if(n instanceof yr)return ge.debug(\\\"recv connect ack -> \\\"+n.status),n.status!==Ce.ACCEPTED?(ge.warn(\\\"connect failed: \\\"+n.status),void e(n.status)):(ge.info(\\\"connect success -> \\\"+a),l.connectedTime=n.timestamp,l.userId=n.userId||\\\"\\\",l._idCount=n.messageId,void e(Ee.SUCCESS));if(n instanceof mr){var i=n.status;switch(ge.warn(\\\"recv disconnect signal -> status: \\\"+i),i){case Ur.BLOCK_NEW:case Ur.BLOCK:l._watcher.status(Ie.BLOCKED);break;case Ur.OTHER_DEVICE_LOGIN:l._watcher.status(Ie.KICKED_OFFLINE_BY_OTHER_CLIENT);break;case Ur.REDIRECT_NEW:case Ur.REDIRECT:l._watcher.status(Ie.REDIRECT);break;default:l._watcher.status(Ie.DISCONNECT_BY_SERVER)}}else l._onReceiveSignal(n)}else ge.error(\\\"Socket received invalid data:\\\",t)})),u.onClose((function(t,n){for(var i in ge.warn(\\\"websocket closed! code:\\\",t,\\\"reason:\\\",n),c(Ie.CONNECTION_CLOSED),l._messageIds){var r=l._messageIds[i];delete l._messageIds[i],r(Ee.RC_NET_CHANNEL_INVALID)}e(t)})),u.onError((function(t){var n;for(var i in ge.error(\\\"websocket error!\\\",null===(n=t)||void 0===n?void 0:n.stack),c(Ie.WEBSOCKET_ERROR),l._messageIds){var r=l._messageIds[i];delete l._messageIds[i],r(Ee.RC_NET_CHANNEL_INVALID)}e(Ee.NETWORK_ERROR)})),u.onOpen((function(){return ge.debug(\\\"websocket open =>\\\",a)})),setTimeout((function(){e(Ee.TIMEOUT)}),5e3)}))];case 1:return(h=d.sent())===Ee.SUCCESS?this._socket=u:(ge.warn(\\\"connect result -> code: \\\"+h+\\\", url: \\\"+a),u.close()),[2,h]}}))}))},t.prototype._checkAlive=function(){var e;return M(this,void 0,void 0,(function(){var t,n=this;return w(this,(function(i){switch(i.label){case 0:return this._socket?(ge.debug(\\\"send ping ->\\\"),this.sendOnly(new vr),[4,new Promise((function(e){n._pingResolve=e,n._timer&&clearTimeout(n._timer),n._timer=setTimeout((function(){n._pingResolve=void 0,e(Ee.TIMEOUT)}),15e3)}))]):[2];case 1:return(t=i.sent())!==Ee.SUCCESS?(this._failedCount+=1,ge.warn(\\\"ping failed count: \\\"+this._failedCount+\\\", code: \\\"+t),this._failedCount>=this.ALLOW_FAILED_TIMES?(this._failedCount=0,ge.warn(\\\"ping timeout, close current websocket to reconnect!\\\"),null===(e=this._socket)||void 0===e||e.close(),this._watcher.status(Ie.NETWORK_UNAVAILABLE)):this._checkAlive(),[2]):(ge.debug(\\\"recv pong <-\\\"),this._failedCount=0,setTimeout((function(){return n._checkAlive()}),15e3),[2])}}))}))},t.prototype._onReceiveSignal=function(e){return M(this,void 0,void 0,(function(){var t,n,i,r,s,o,a=this;return w(this,(function(u){switch(u.label){case 0:return t=e.messageId,e.header&&e.header.qos!==ze.AT_MOST_ONCE&&(e instanceof Cr&&!e.syncMsg&&(ge.info(\\\"send pubAck -> \\\"+t+\\\" \\\"+e.topic),this.sendOnly(new Nr(t))),e instanceof wr&&(ge.info(\\\"send queryCon -> \\\"+t+\\\" \\\"+e.topic),this.sendOnly(new Mr(t)))),t>0&&(e instanceof Sr||e instanceof wr)&&(ge.info(\\\"recv ack -> messageId: \\\"+t+\\\" \\\"+e.topic),(n=this._messageIds[t])&&(n(e),delete this._messageIds[t]),(i=this._syncMessageIds[t])&&(delete this._syncMessageIds[t],i(e))),e instanceof Cr?(r=e.syncMsg,s=e.topic,ge.info(\\\"recv PublishReader -> messageId: \\\"+t+\\\" \\\"+s),s===br[br.userSetData]?[2]:!r||Dr(s)?(this._watcher.signal(e),[2]):[4,new Promise((function(e){a._syncMessageIds[t]=e}))]):[3,2];case 1:o=u.sent(),delete this._syncMessageIds[t],this._watcher.signal(e,o),u.label=2;case 2:return[2]}}))}))},t.prototype.sendOnly=function(e){this._socket&&((e instanceof Rr||e instanceof Or)&&(e.messageId=this._generateMessageId()),kr(e,this._socket))},t.prototype.send=function(e,t,n,i){return void 0===i&&(i=3e4),M(this,void 0,void 0,(function(){var r,s,o,a=this;return w(this,(function(u){switch(u.label){case 0:return this._socket?(r=this._generateMessageId(),e.messageId=r,kr(e,this._socket),[4,new Promise((function(e){a._messageIds[r]=e,setTimeout((function(){a._messageIds[r]&&delete a._messageIds[r],e()}),i)}))]):[3,2];case 1:return(s=u.sent())?s instanceof wr||s instanceof Sr?(o=t&&s.data?this.codec.decodeByPBName(s.data,t,n):s,0!==s.status?(ge.warn(\\\"send failed -> message: \\\"+r+\\\", respPBName: \\\"+t+\\\", status: \\\"+s.status),[2,{code:s.status,data:t&&s.data?o:null}]):[2,{code:Ee.SUCCESS,data:o}]):[2,{code:s}]:(ge.warn(\\\"send timeout -> message: \\\"+r+\\\", respPBName: \\\"+t+\\\", timeout: \\\"+i),[2,{code:Ee.TIMEOUT}]);case 2:return[2,{code:Ee.RC_NET_CHANNEL_INVALID}]}}))}))},t.prototype.close=function(){this._socket&&(this._socket.close(),this._socket=null,this._watcher.status(Ie.DISCONNECTED))},t}(fr);!function(e){e.GET=\\\"GET\\\",e.POST=\\\"POST\\\"}(Vr||(Vr={}));var Br=function(e){function t(t,n){var i=e.call(this,\\\"comet\\\",n)||this;return i._runtime=t,i._messageIds={},i._syncMessageIds={},i._idCount=0,i._generateMessageId=function(){return++i._idCount},i._pid=encodeURIComponent((new Date).getTime()+Math.random()+\\\"\\\"),i}return N(t,e),t.prototype.handleCometRes=function(e){var t=this;if(200!==e.status&&202!==e.status)return!1;var n=J(e.data)?JSON.parse(e.data):e.data;return n?!X(n)||(dt(n,(function(e){return M(t,void 0,void 0,(function(){var t,n,i,r,s,o,a,u,c,h,l,d=this;return w(this,(function(f){switch(f.label){case 0:if((t=e.sessionid)&&(this._sessionid=t),n=function(e){var t=e.headerCode,n=new Ot(t),i=Ar(n);for(var r in e)i[r]=e[r];return i}(e),i=n.messageId,r=n._header,s=n.status,n.identifier,o=r&&r.qos!==ze.AT_MOST_ONCE,i&&n.getIdentifier&&((a=this._messageIds[i])&&a(n),this._syncMessageIds[i]&&this._syncMessageIds[i](n)),o&&(n instanceof Cr&&!n.syncMsg&&(u=new Nr(i),this.sendOnly(u)),n instanceof wr&&(u=new Mr(i),this.sendOnly(u))),n instanceof mr){switch(s){case Ur.OTHER_DEVICE_LOGIN:this._watcher.status(Ie.KICKED_OFFLINE_BY_OTHER_CLIENT);break;case Ur.BLOCK:case Ur.BLOCK_NEW:this._watcher.status(Ie.BLOCKED);break;case Ur.REDIRECT_NEW:case Ur.REDIRECT:this._watcher.status(Ie.REDIRECT);break;default:this._watcher.status(Ie.DISCONNECT_BY_SERVER)}return[2]}return n instanceof Cr?(c=n.syncMsg,h=n.topic,!c||Dr(h)?(this._watcher.signal(n),[2,!1]):[4,new Promise((function(e){d._syncMessageIds[i]=e}))]):[3,2];case 1:l=f.sent(),delete this._syncMessageIds[i],this._watcher.signal(n,l),f.label=2;case 2:return[2]}}))}))})),!0):(ge.error(\\\"received data is not a validJson\\\",n),!1)},t.prototype._startPullSignal=function(e){return M(this,void 0,void 0,(function(){var t,n,i,r;return w(this,(function(s){switch(s.label){case 0:return t=(new Date).getTime(),n=e+\\\"://\\\"+this._domain+\\\"/pullmsg.js?sessionid=\\\"+this._sessionid+\\\"&timestrap=\\\"+t+\\\"&pid=\\\"+this._pid,[4,this._runtime.httpReq({url:n,body:{pid:this._pid},timeout:45e3})];case 1:return i=s.sent(),r=this.handleCometRes(i),this._isDisconnected||(r?this._startPullSignal(e):(this._isDisconnected=!0,this._watcher.status(Ie.NETWORK_UNAVAILABLE))),[2]}}))}))},t.prototype.connect=function(e,t,n,i,r,s){return M(this,void 0,void 0,(function(){var s,o,a,u,c=this;return w(this,(function(h){return r=x(r),this._protocol=i,this._isDisconnected=!1,this._watcher.status(Ie.CONNECTING),s=[],o=0,a=!1,u=!1,[2,new Promise((function(h){var l=function(){return M(c,void 0,void 0,(function(){var n;return w(this,(function(o){switch(o.label){case 0:return 0===s.length||a?[2]:(a=!0,[4,this._connect(e,t,s.shift(),i,r)]);case 1:if((n=o.sent())===Ee.SUCCESS)this._startPullSignal(i),h(n);else if(n===Ce.REDIRECT)h(n);else{if(u&&0===s.length)return h(Et(n)),[2];a=!1,l()}return[2]}}))}))};c._watcher.status(Ie.CONNECTING),Lr(n,i,c._runtime,(function(e){var t=e.code,n=e.finished,i=e.host;u=n,200===t&&(s.push(i),o++,l()),n&&0===o&&(ge.error(\\\"No valid websocket server hosts!\\\"),h(Ee.RC_SOCKET_NOT_CREATED))}))}))]}))}))},t.prototype._connect=function(e,t,n,i,r){return M(this,void 0,void 0,(function(){var s,o,a,u;return w(this,(function(c){switch(c.label){case 0:return s=function(e){return 200!==e.status&&202!==e.status?(ge.error(\\\"handle comet res -> res: \\\"+JSON.stringify(e||{})),!1):!!e.data&&(function(e){if(ne(e))return!0;var t=!1;try{var n=JSON.parse(e);t=JSON.stringify(n)===e}catch(e){t=!1}return t}(e.data)?ne(e.data)?e.data:JSON.parse(e.data):(ge.error(\\\"received data is not a validJson\\\",e.data),!1))},o=Pr(i,n,e,t,this._runtime,r,this._pid),this.sendConnectTime=Date.now(),ge.debug(\\\"conenct start -> \\\"+o),[4,this._runtime.httpReq({url:o,body:{pid:this._pid},timeout:5e3})];case 1:return a=c.sent(),u=s(a),this._domain=n,u&&0===u.status?(this._sessionid=u.sessionid,this.userId=u.userId,this.connectedTime=u.timestamp):ge.warn(\\\"connect result -> code: \\\"+(null==u?void 0:u.status)+\\\", url: \\\"+o),[2,null==u?void 0:u.status]}}))}))},t.prototype.sendCometData=function(e,t){return M(this,void 0,void 0,(function(){var t,n,i,r,s,o,a,u,c,h;return w(this,(function(l){switch(l.label){case 0:return n=(t=this)._domain,i=t._sessionid,r=t._pid,s=e.messageId,o=e.topic,a=e.targetId,e.identifier,u=e.getHeaderFlag(),c=o?this._protocol+\\\"://\\\"+n+\\\"/websocket?messageid=\\\"+s+\\\"&header=\\\"+u+\\\"&sessionid=\\\"+i+\\\"&topic=\\\"+o+\\\"&targetid=\\\"+a+\\\"&pid=\\\"+r:this._protocol+\\\"://\\\"+n+\\\"/websocket?messageid=\\\"+s+\\\"&header=\\\"+u+\\\"&sessionid=\\\"+i+\\\"&pid=\\\"+r,[4,this._runtime.httpReq({url:c,method:Vr.POST,body:e.getCometData()})];case 1:return h=l.sent(),this.handleCometRes(h),[2]}}))}))},t.prototype.sendOnly=function(e){this.sendCometData(e)},t.prototype.send=function(e,t,n,i){return void 0===i&&(i=3e4),M(this,void 0,void 0,(function(){var r,s,o,a=this;return w(this,(function(u){switch(u.label){case 0:return r=this._generateMessageId(),e.messageId=r,this.sendCometData(e),[4,new Promise((function(e){a._messageIds[r]=e,setTimeout((function(){delete a._messageIds[r],e()}),i)}))];case 1:return(s=u.sent())?(o=t&&s.data?this.codec.decodeByPBName(s.data,t,n):s,0!==s.status?[2,{code:s.status,data:t&&s.data?o:null}]:[2,{code:Ee.SUCCESS,data:o}]):[2,{code:Ee.TIMEOUT}]}}))}))},t.prototype.close=function(){this._isDisconnected=!0,this._watcher.status(Ie.DISCONNECTED)},t}(fr),Gr=function(e,t,n){this.runtime=e,this._watcher=t,this._options=n,this.currentUserId=\\\"\\\",this._appkey=this._options.appkey,this._apiVer=this._options.apiVersion,this.navi=this._createNavi()},Fr=function(e){return[\\\"navi\\\",e].join(\\\"_\\\")},qr=function(){function e(e,t){this._runtime=e,this._options=t,this._naviInfo=null,this._appkey=this._options.appkey,this._apiVersion=x(this._options.apiVersion)}return e.prototype.getInfo=function(e,t,n,i){return M(this,void 0,void 0,(function(){var r,s;return w(this,(function(o){switch(o.label){case 0:return n&&this._clear(e),(r=function(e,t,n){var i,r,s=Fr(e);try{var o=n.getItem(s);r=o?JSON.parse(o):[]}catch(e){r=[]}var a=Date.now();return r.length>0&&(r=r.filter((function(e){return a-e.timestamp<72e5}))),0===r.length?n.removeItem(s):n.setItem(s,JSON.stringify(r)),(null===(i=r.find((function(e){return e.token===t})))||void 0===i?void 0:i.naviInfo)||null}(this._appkey,e,this._runtime.localStorage))?(this._naviInfo=r,[2,r]):(s=this._options.navigators.slice(),t.length&&t.forEach((function(e){s.indexOf(e)<0&&s.unshift(e)})),[4,this._reqNavi(s,this._appkey,e,i)]);case 1:return(r=o.sent())?(this._naviInfo=r,this.setNaviInfo2Cache(e,r),[2,r]):[2,r]}}))}))},e.prototype.setNaviInfo2Cache=function(e,t){this._naviInfo=t,function(e,t,n,i){var r,s=Fr(e);try{var o=i.getItem(s);r=o?JSON.parse(o):[]}catch(e){r=[]}var a=Date.now();r.length>0&&(r=r.filter((function(e){return a-e.timestamp<72e5&&t!==e.token}))),r.push({timestamp:a,naviInfo:n,token:t}),i.setItem(s,JSON.stringify(r))}(this._appkey,e,t,this._runtime.localStorage)},e.prototype.getInfoFromCache=function(e){return this._naviInfo},e.prototype._clear=function(e){!function(e,t,n){var i,r=Fr(e);try{var s=n.getItem(r);i=s?JSON.parse(s):[]}catch(e){i=[]}var o=Date.now();i.length>0&&(i=i.filter((function(e){return o-e.timestamp<72e5&&t!==e.token}))),0===i.length?n.removeItem(r):n.setItem(r,JSON.stringify(i))}(this._appkey,e,this._runtime.localStorage)},e}(),Kr=function(e,t,n){return[e,t,n].join(\\\"_\\\")},Hr=function(){function e(e,t){this._runtime=e,this._appkey=t,this._users={}}return e.prototype._getMemData=function(e){return this._users[e]||(this._users[e]={inboxTime:0,outboxTime:0})},e.prototype.setInboxTime=function(e,t){var n=this._getMemData(t);if(!(n.inboxTime>e)){n.inboxTime=e;var i=Kr(\\\"inbox\\\",this._appkey,t);this._runtime.localStorage.setItem(i,e.toString())}},e.prototype.getInboxTime=function(e){var t=this._getMemData(e);if(0===t.inboxTime){var n=Kr(\\\"inbox\\\",this._appkey,e);t.inboxTime=parseInt(this._runtime.localStorage.getItem(n))||0}return t.inboxTime},e.prototype.setOutboxTime=function(e,t){var n=this._getMemData(t);if(!(n.outboxTime>=e)){n.outboxTime=e;var i=Kr(\\\"outbox\\\",this._appkey,t);this._runtime.localStorage.setItem(i,e.toString())}},e.prototype.getOutboxTime=function(e){var t=this._getMemData(e);if(0===t.outboxTime){var n=Kr(\\\"outbox\\\",this._appkey,e);t.outboxTime=parseInt(this._runtime.localStorage.getItem(n))||0}return t.outboxTime},e}(),Yr={_caches:{},set:function(e,t){this._caches[e]=t},get:function(e){return this._caches[e]||0},clear:function(e){this._caches[e]=0}},jr=function(){function e(e,t){this._kvCaches={},this._chatroomId=e,this._currentUserId=t}return e.prototype._add=function(e){var t=e.key;e.isDeleted=!1,this._kvCaches[t]=e},e.prototype._remove=function(e){var t=e.key,n=this._kvCaches[t];n&&(n.isDeleted=!0,this._kvCaches[t]=n)},e.prototype._setEntry=function(e,t){var n=e.key,i=e.type,r=e.isOverwrite,s=e.userId,o=this._getSetUserId(n),a=i===Le.DELETE,u=o===s,c=!this._isExisted(n),h=a?this._remove:this._add;(t||r||u||c)&&h.call(this,e)},e.prototype.getValue=function(e){var t=this._kvCaches[e]||{};return t.isDeleted?null:t.value},e.prototype.getVersion=function(e){var t=this._kvCaches[e]||{};return t.isDeleted?null:t.version},e.prototype.getAllValue=function(){var e={};for(var t in this._kvCaches)this._kvCaches[t].isDeleted||(e[t]=this._kvCaches[t].value);return e},e.prototype._getSetUserId=function(e){return(this._kvCaches[e]||{}).userId},e.prototype._isExisted=function(e){var t=this._kvCaches[e]||{},n=t.value,i=t.isDeleted;return n&&!i},e.prototype.setEntries=function(e){var t=this,n=e.kvEntries,i=e.isFullUpdate;n=n||[],(i=i||!1)&&this.clear(),n.forEach((function(e){t._setEntry(e,i)})),ge.debug(\\\"end setEntries\\\")},e.prototype.clear=function(){this._kvCaches={}},e}(),Qr=function(){function e(e){this._pullQueue=[],this._isPulling=!1,this._storeCaches={},this._engine=e}return e.prototype._startPull=function(){return M(this,void 0,void 0,(function(){var e,t,n,i,r,s,o;return w(this,(function(a){switch(a.label){case 0:return this._isPulling||0===this._pullQueue.length?[2]:(this._isPulling=!0,e=this._pullQueue.splice(0,1)[0],t=e.chrmId,n=e.timestamp,(i=Yr.get(t))>n?(this._isPulling=!1,this._startPull(),[2]):[4,this._engine.pullChatroomEntry(t,i)]);case 1:return r=a.sent(),s=r.code,o=r.data,this._isPulling=!1,s===Ee.SUCCESS?(Yr.set(t,o.syncTime||0),this._startPull()):this._startPull(),[2]}}))}))},e.prototype.reset=function(e){Yr.clear(e);var t=this._storeCaches[e];t&&t.clear()},e.prototype.pullEntry=function(e,t){this._pullQueue.push({chrmId:e,timestamp:t}),this._startPull()},e.prototype.setLocal=function(e,t,n){var i=this._storeCaches[e];ae(i)||(i=new jr(e,n)),i.setEntries(t),this._storeCaches[e]=i},e.prototype.getValue=function(e,t){var n=this._storeCaches[e];return n?n.getValue(t):null},e.prototype.getVersion=function(e,t){var n=this._storeCaches[e];return n?n.getVersion(t):null},e.prototype.getAll=function(e){var t=this._storeCaches[e],n={};return t&&(n=t.getAllValue()),n},e}(),Wr=function(){function e(e,t,n,i){this._runtime=e,this._appkey=t,this._userId=n,this._canJoinMulipleChrm=i,this._sessionKey=\\\"\\\",this._joinedChrmsInfo={},this._sessionKey=\\\"sync-chrm-\\\"+this._appkey+\\\"-\\\"+this._userId}return e.prototype.set=function(e,t){void 0===t&&(t=10),!this._canJoinMulipleChrm&&(this._joinedChrmsInfo={}),this._joinedChrmsInfo[e]=t,this._runtime.sessionStorage.setItem(this._sessionKey,JSON.stringify(this._joinedChrmsInfo))},e.prototype.get=function(){var e,t;try{t=this._runtime.sessionStorage.getItem(this._sessionKey),e=JSON.parse(t||\\\"{}\\\")}catch(n){ge.error(\\\"parse rejoined chrm infos error -> \\\"+t),e={}}return e},e.prototype.remove=function(e){delete this._joinedChrmsInfo[e],ae(this._joinedChrmsInfo)?this._runtime.sessionStorage.setItem(this._sessionKey,JSON.stringify(this._joinedChrmsInfo)):this.clear()},e.prototype.clear=function(){this._joinedChrmsInfo={},this._runtime.sessionStorage.removeItem(this._sessionKey)},e}(),Jr=\\\"converStatusChanged\\\",zr=function(){function e(e,t,n){this._eventEmitter=new _e,this._pullQueue=[],this._isPulling=!1,this._storage=I(e.runtime),this._appkey=t,this._currentUserId=n,this._engine=e,this._storagePullTimeKey=\\\"con-s-\\\"+t+\\\"-\\\"+n}return e.prototype._set=function(e){var t=this;if(!re(e)&&Array.isArray(e)){var n=this._storage.get(this._storagePullTimeKey)||0,i=e.length;e.forEach((function(e,r){var s=e.updatedTime||0;n=s>n?s:n,e.conversationType=e.type,t._eventEmitter.emit(Jr,{statusItem:e,isLastPull:r===i-1})})),this._storage.set(this._storagePullTimeKey,n)}},e.prototype._startPull=function(){return M(this,void 0,void 0,(function(){var e,t,n,i;return w(this,(function(r){switch(r.label){case 0:return this._isPulling||0===this._pullQueue.length?[2]:(this._isPulling=!0,e=this._pullQueue.splice(0,1)[0],[4,this._engine.pullConversationStatus(e)]);case 1:return t=r.sent(),n=t.code,i=t.data,n===Ee.SUCCESS?(this._isPulling=!1,this._set(i),this._startPull()):this._startPull(),[2]}}))}))},e.prototype.pull=function(e){var t=this._storage.get(this._storagePullTimeKey)||0;(e>t||0===e)&&(this._pullQueue.push(t),this._startPull())},e.prototype.watch=function(e){this._eventEmitter.on(Jr,(function(t){e(t)}))},e.prototype.unwatch=function(){this._eventEmitter.off(Jr,(function(e){}))},e}(),Zr={c:{keyName:\\\"unreadMessageCount\\\",defaultVal:0},hm:{keyName:\\\"hasMentioned\\\",defaultVal:!1},m:{keyName:\\\"mentionedInfo\\\",defaultVal:null},t:{keyName:\\\"lastUnreadTime\\\",defaultVal:0},nc:{keyName:\\\"notificationStatus\\\",defaultVal:2},to:{keyName:\\\"isTop\\\",defaultVal:!1},tg:{keyName:\\\"tags\\\",defaultVal:{}},mc:{keyName:\\\"unreadMentionedCount\\\",defaultVal:0}},Xr={};for(var $r in Zr){var es=Zr[$r].keyName;Xr[es]=$r}var ts,ns=function(){function e(e,t,n){this._appkey=t,this._currentUserId=n;var i=\\\"con-\\\"+t+\\\"-\\\"+n;this.storage=new R(e,i),this._localStore=new R(e,\\\"CONVER-\\\"+t+\\\"-\\\"+n)}return e.prototype._getStoreKey=function(e,t,n){return n+\\\"_\\\"+e+\\\"_\\\"+t},e.prototype._getConOptionByKey=function(e){var t=(e=e||\\\"\\\").split(\\\"_\\\");if(t.length>=2){var n=t.shift(),i=t.shift(),r=t.join(\\\"_\\\");return{conversationType:Number(i),targetId:r,channelId:n}}return{conversationType:j.PRIVATE,targetId:\\\"\\\",channelId:\\\"\\\"}},e.prototype.updateMentionedData=function(e){var t=this,n=e.conversationType,i=e.targetId,r=e.messageType,s=e.isMentioned,o=e.content,a=e.senderUserId,u=e.channelId,c=this._getStoreKey(n,i,u),h=this._localStore.get(c)||{},l=Xr.mentionedInfo,d=Xr.hasMentioned,f=h[l]||{},p=f.userIdList||[],g=o.mentionedInfo;if(g){if(s&&n===j.GROUP)(g.userIdList||[]).forEach((function(e){e===t._currentUserId&&p.indexOf(a)<0&&p.push(a)})),g.type===we.ALL&&p.indexOf(a)<0&&p.push(a);if(r===Se.RECALL&&n===j.GROUP){var _=p.indexOf(a);_>=0&&p.splice(_,1)}g={userIdList:p,type:(null==g?void 0:g.type)||f.type},0!==p.length?(h[l]=g,h[d]=!0):(delete h[l],delete h[d]),ae(h)?this._localStore.set(c,h):this._localStore.remove(c)}},e.prototype.set=function(e,t,n,i){var r=this._getStoreKey(e,t,i),s=this._localStore.get(r)||{};for(var o in n){var a=Xr[o],u=n[o];if(!re(a)&&!re(u)&&\\\"hasMentioned\\\"!==o&&\\\"MentionedInfo\\\"!==o){if(u===Zr[a].defaultVal||\\\"tags\\\"===o&&!ae(u))delete s[a];else if(\\\"tags\\\"===o){var c=u;for(var h in c)c[h].isTop||delete c[h].isTop;s[a]=u}else s[a]=u;s.c||(delete s.t,delete s.hm,delete s.m,delete s.mc)}}ae(s)?this._localStore.set(r,s):this._localStore.remove(r)},e.prototype.get=function(e,t,n){void 0===n&&(n=\\\"\\\");var i=this._getStoreKey(e,t,n),r=this._localStore.get(i)||{},s={};for(var o in Zr){var a=Zr[o],u=a.keyName,c=a.defaultVal;s[u]=r[o]||yt(c)}return s},e.prototype.getValue=function(e){var t=this._localStore.getValues()||{},n=[];for(var i in t){var r=this._getConOptionByKey(i),s={conversationType:r.conversationType,targetId:r.targetId,channelId:r.channelId},o=t[i];for(var a in o){var u=Zr[a],c=u.keyName,h=u.defaultVal;s[c]=o[a]||yt(h)}s=e?e(s):s,n.push(s)}return n},e.prototype.getValueForTag=function(){var e=this._localStore.getValues()||{},t={};for(var n in e){var i=this._getConOptionByKey(n),r=i.conversationType,s=i.targetId,o={},a=e[n];for(var u in a){var c=Zr[u],h=c.keyName,l=c.defaultVal;o[h]=a[u]||yt(l)}for(var d in o.tags){re(t[d])&&(t[d]=[]);var f=Object.assign({},o,{conversationType:r,targetId:s});delete f.tags,t[d].push(f)}}return t},e.prototype.adaptOldStore=function(){try{var e=this.storage.getValues();if(0===Object.keys(e).length)return;for(var t in e){var n=\\\"_\\\"+t;this._localStore.set(n,e[t])}}catch(e){ge.error(\\\"adaptOldStore error: \\\"+e.message)}},e}(),is=[j.PRIVATE,j.GROUP,j.SYSTEM,j.PUBLIC_SERVICE,j.APP_PUBLIC_SERVICE],rs=\\\"conversationChanged\\\",ss=\\\"conTagStatusChanged\\\",os=function(){function e(e,t,n,i,r){var s=this;this._updatedConversations={},this._conTagStatusChanged=!1,this._eventEmitter=new _e,this._draftMap={},this._appkey=t,this._loginUserId=n,this._store=new ns(e.runtime,t,n),this._statusManager=new zr(e,t,n),this._statusManager.watch((function(e){var t=e.statusItem,n=e.isLastPull;s.addStatus(t,n)})),this._eventEmitter.on(rs,(function(e){i(e)})),this._eventEmitter.on(ss,(function(){r()}))}return e.prototype._calcUnreadCount=function(e,t){var n=e.content,i=e.messageType,r=e.sentTime,s=e.isCounted,o=e.messageDirection,a=e.senderUserId,u=o===me.SEND&&a===this._loginUserId,c=i===Se.RECALL,h=ne(n),l=!1,d={},f=t.lastUnreadTime||0,p=t.unreadMessageCount||0;if(f>r||u)return{hasChanged:l,localConversation:t,updateItems:d};(s&&(t.unreadMessageCount=p+1,t.lastUnreadTime=r,l=!0),c&&h)&&(f>=n.sentTime&&p&&(t.unreadMessageCount=p-1,l=!0));return l&&(d.unreadMessageCount={val:t.unreadMessageCount,time:r}),{hasChanged:l,localConversation:t,updateItems:d}},e.prototype._calcMentionedInfo=function(e,t){var n=e.content,i=(e.messageDirection,e.isMentioned),r=e.sentTime;me.SEND;var s=ne(n),o=!1,a={};return i&&s&&n.mentionedInfo&&(t.hasMentioned=!0,o=!0,a.hasMentioned={val:!0,time:r},a.mentionedInfo={val:n.mentionedInfo,time:r}),{hasChanged:o,localConversation:t,updateItems:a}},e.prototype._calcMentionedCount=function(e,t){var n=e.content,i=e.messageDirection,r=!1;if(e.isMentioned&&i===me.RECEIVE&&(null==n?void 0:n.mentionedInfo)){var s=n.mentionedInfo,o=s.type,a=s.userIdList;if(o===we.ALL||(a||[]).includes(this._loginUserId)){r=!0;var u=t.unreadMentionedCount||0;t.unreadMentionedCount=u+1}}return{hasChanged:r,localConversation:t}},e.prototype._setUpdatedConversation=function(e){if(ne(e)){var t=e.conversationType,n=e.targetId,i=e.channelId,r=t+\\\"_\\\"+n,s=this._store.get(t,n,i)||{};this._updatedConversations[r]=Object.assign(s,e)}},e.prototype._setConTagStatusChanged=function(e,t,n,i){var r=(this._store.get(e,t,i)||{}).tags||{};if(Object.keys(r).length===Object.keys(n).length){for(var s in r)if(!n[s]||r[s].isTop!==n[s].isTop)return void(this._conTagStatusChanged=!0)}else this._conTagStatusChanged=!0},e.prototype.addStatus=function(e,t){var n=e.conversationType,i=e.targetId,r=e.updatedTime,s=e.notificationStatus,o=e.isTop,a=e.tags,u=e.channelId,c={},h={};n!==j.ULTRA_GROUP&&(re(s)||(h.notificationStatus={time:r,val:s}),re(o)||(h.isTop={time:r,val:o}),re(a)||(h.tags={time:r,val:a},null==a||a.forEach((function(e){c[e.tagId]={isTop:e.isTop}}))),this._setConTagStatusChanged(n,i,c,u),this._store.set(n,i,{notificationStatus:s,isTop:o,tags:c},u),this._setUpdatedConversation({conversationType:n,targetId:i,updatedItems:h,channelId:u}),t&&this._notifyConversationChanged())},e.prototype._notifyConversationChanged=function(){var e=[];for(var t in this._updatedConversations)e.push(this._updatedConversations[t]);0!==e.length&&(this._eventEmitter.emit(rs,e),this._updatedConversations={},this._conTagStatusChanged&&(this._eventEmitter.emit(ss),this._conTagStatusChanged=!1))},e.prototype.setConversationCacheByMessage=function(e,t){var n=this,i=e.conversationType,r=e.isPersited,s=e.targetId,o=e.channelId;if(is.indexOf(i)>=0){var a=!1,u=this._store.get(i,s,o),c={};if([this._calcUnreadCount,this._calcMentionedInfo,this._calcMentionedCount].forEach((function(t){var i=t.call(n,e,u),r=i.hasChanged,s=i.localConversation,o=i.updateItems;a=a||r,c=O(O({},c),o),u=yt(s)})),a&&this._store.set(i,s,u,o),this._store.updateMentionedData(e),r){var h=this._store.get(i,s,o);h.updatedItems=O({latestMessage:{time:e.sentTime,val:e}},c),h.latestMessage=e;var l=Object.assign(h,{conversationType:i,targetId:s,channelId:o});this._setUpdatedConversation(l)}(a||r)&&this._notifyConversationChanged()}},e.prototype.get=function(e,t,n){return void 0===n&&(n=\\\"\\\"),this._store.get(e,t,n)},e.prototype.getAllUnreadCount=function(e,t,n){var i=this._store.getValue(),r=0;return i.forEach((function(e){var i=e.unreadMessageCount,s=e.notificationStatus,o=e.conversationType;i=i||0,(n||1!==s)&&(t.length>0?t.includes(Number(o))&&(r+=Number(i)):r+=Number(i))})),r},e.prototype.getUnreadCountByTag=function(e,t){var n=this._store.getValueForTag()[e]||[],i=0;return n.forEach((function(e){var n=e.unreadMessageCount,r=e.notificationStatus;(t||1!==r)&&(n=n||0,i+=Number(n))})),i},e.prototype.getUnreadCount=function(e,t,n){return this._store.get(e,t,n).unreadMessageCount||0},e.prototype.clearUnreadCount=function(e,t,n,i){void 0===i&&(i=!0);var r=this._store.get(e,t,n),s=r.unreadMessageCount,o=r.hasMentioned,a={};if(s&&(r.unreadMessageCount=0,a.unreadMessageCount={val:0,time:Date.now()}),o&&(r.hasMentioned=!1,r.unreadMentionedCount=0,r.mentionedInfo=void 0,a.hasMentioned={val:!1,time:Date.now()},a.mentionedInfo={val:void 0,time:Date.now()}),this._store.set(e,t,r,n),i&&0!==Object.keys(a).length){var u=Object.assign(r,{conversationType:e,targetId:t,channelId:n,updatedItems:a});this._setUpdatedConversation(u),this._notifyConversationChanged()}},e.prototype.clearAllUnreadCount=function(){var e=this;this._store.getValue().forEach((function(t){t.unreadMessageCount&&(t.unreadMessageCount=0,e._store.set(t.conversationType,t.targetId,t,t.channelId))}))},e.prototype.startPullConversationStatus=function(e){this._statusManager.pull(e)},e.prototype.setDraft=function(e,t,n,i){var r=e+\\\"_\\\"+t+\\\"_\\\"+i;this._draftMap[r]=n},e.prototype.getDraft=function(e,t,n){var i=e+\\\"_\\\"+t+\\\"_\\\"+n;return this._draftMap[i]},e.prototype.clearDraft=function(e,t,n){var i=e+\\\"_\\\"+t+\\\"_\\\"+n;delete this._draftMap[i]},e.prototype.addTagStatus=function(e,t,n,i){void 0===i&&(i=\\\"\\\");var r=this._store.get(e,t,i).tags;r=Object.assign(r,n),this._store.set(e,t,{tags:r},i)},e.prototype.deleteTagStatus=function(e,t,n,i){void 0===i&&(i=\\\"\\\");var r=this._store.get(e,t,i).tags;n.forEach((function(e){delete r[e]})),this._store.set(e,t,{tags:r},i)},e.prototype.getConversationListForTag=function(){return this._store.getValueForTag()},e.prototype.getBlockConversationList=function(){return this._store.getValue().filter((function(e){return e.notificationStatus===Oe.OPEN})).map((function(e){return{conversationType:e.conversationType,targetId:e.targetId,channelId:e.channelId}}))},e.prototype.getTopConversationList=function(){return(this._store.getValue()||{}).filter((function(e){return e.isTop})).map((function(e){return{conversationType:e.conversationType,targetId:e.targetId,channelId:e.channelId}}))},e.prototype.adaptOldStore=function(){this._store.adaptOldStore()},e.prototype.getUnreadMentionedCount=function(e,t,n){return void 0===e&&(e=\\\"\\\"),this.get(t,n,e).unreadMentionedCount||0},e.prototype.getAllUnreadMentionedCount=function(){var e=this._store.getValue(),t=0;return e.forEach((function(e){var n=e.unreadMentionedCount;n=n||0,t+=Number(n)})),t},e.prototype.getAllConversationState=function(){return this._store.getValue().filter((function(e){return e.unreadMessageCount||e.unreadMentionedCount})).map((function(e){return{conversationType:e.conversationType,targetId:e.targetId,channelId:e.channelId,unreadCount:e.unreadMessageCount||0,unreadMentionedCount:e.unreadMentionedCount||0}}))},e}(),as=function(){function e(e,t,n,i){this._pullQueue=[],this._isPulling=!1,this._storageTagKey=\\\"tag-\\\"+t+\\\"-\\\"+n,this._storagePullTimeKey=\\\"us-s-\\\"+t+\\\"-\\\"+n,this._storage=I(e.runtime),this._engine=e,this._tagWatcherFunc=i}return e.prototype._updateTag=function(e){var t=e.tags,n={};t.forEach((function(e){n[e.tagId]={tagName:e.tagName,createdTime:e.createdTime}})),this._storage.set(this._storageTagKey,n),this._tagWatcherFunc()},e.prototype.addTag=function(e,t){var n=this._storage.get(this._storageTagKey)||{};e.forEach((function(e){var t,i=(null===(t=n[e.tagId])||void 0===t?void 0:t.createdTime)||e.createdTime||0;n[e.tagId]={tagName:e.tagName,createdTime:i}})),this._storage.set(this._storageTagKey,n),this._storage.set(this._storagePullTimeKey,t)},e.prototype.deleteTag=function(e,t){var n=this._storage.get(this._storageTagKey)||{};e.forEach((function(e){delete n[e]})),this._storage.set(this._storageTagKey,n),this._storage.set(this._storagePullTimeKey,t)},e.prototype.getTagsInfo=function(){return this._storage.get(this._storageTagKey)||{}},e.prototype.getTags=function(){var e=this._storage.get(this._storageTagKey)||{},t=[];for(var n in e)t.push({tagId:n,tagName:e[n].tagName,createdTime:e[n].createdTime,conversationCount:0});return t.sort((function(e,t){return(e.createdTime||0)-(t.createdTime||0)}))},e.prototype.getTagById=function(e){var t=this._storage.get(this._storageTagKey)||{};return t[e]?{tagId:e,tagName:t[e].tagName,createdTime:t[e].createdTime,conversationCount:0}:null},e.prototype._startPull=function(){return M(this,void 0,void 0,(function(){var e,t,n,i,r,s,o,a;return w(this,(function(u){switch(u.label){case 0:return this._isPulling||0===this._pullQueue.length?[2]:(this._isPulling=!0,e=this._pullQueue.splice(0,1)[0],[4,this._engine.pullUserSettings(e)]);case 1:return t=u.sent(),n=t.code,i=t.data,n!==Ee.SUCCESS||re(i)?(this._isPulling=!1,this._startPull()):(s=(r=i).settings,o=r.version,a=s.Tag,re(a)||this._updateTag(a),this._storage.set(this._storagePullTimeKey,o),this._isPulling=!1,this._startPull()),[2]}}))}))},e.prototype.pullUserSettings=function(e){var t=this._storage.get(this._storagePullTimeKey)||0;(e>t||0===e)&&(this._pullQueue.push(t),this._startPull())},e.prototype.getVersion=function(){return this._storage.get(this._storagePullTimeKey)||0},e}(),us=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i._miniConnectUrl=\\\"\\\",i._connectType=n.connectionType,i}return N(t,e),t.prototype._formatJSONPUrl=function(e,t,n,i){return e+\\\"/\\\"+(this._runtime.isSupportSocket()&&\\\"websocket\\\"===this._connectType?\\\"navi\\\":\\\"cometnavi\\\")+\\\".js?appId=\\\"+n+\\\"&token=\\\"+encodeURIComponent(t)+\\\"&callBack=\\\"+i+\\\"&v=\\\"+this._apiVersion+\\\"&r=\\\"+Date.now()},t.prototype.getInfo=function(t,n,i){var r;return M(this,void 0,void 0,(function(){var s;return w(this,(function(o){return this._runtime.useNavi||(s=void 0,s=this._runtime.isSupportSocket()&&\\\"websocket\\\"===this._connectType?c.join(\\\",\\\"):h.join(\\\",\\\"),this._miniConnectUrl=(null===(r=this._options.miniCMPProxy)||void 0===r?void 0:r.length)?this._options.miniCMPProxy.join(\\\",\\\"):s||\\\"\\\",n=[]),[2,e.prototype.getInfo.call(this,t,n,i)]}))}))},t.prototype._reqNavi=function(e,t,n){return M(this,void 0,void 0,(function(){var i,r,s,o,a,u,c,h,l;return w(this,(function(d){switch(d.label){case 0:i=\\\"getServerEndpoint\\\",r=0,s=e.length,d.label=1;case 1:return r<s?(o=this._formatJSONPUrl(e[r],n,t,i),ge.debug(\\\"req navi => \\\"+o),[4,this._runtime.httpReq({url:o,timeout:1e4,dataType:\\\"text\\\"})]):[3,4];case 2:if(200!==(a=d.sent()).status)return 403===a.status?ge.error(\\\"request navi error: \\\"+Ee.RC_CONN_USER_OR_PASSWD_ERROR):401===a.status&&ge.error(\\\"request navi error: \\\"+Ee.RC_CONN_APP_BLOCKED_OR_DELETED),[3,3];try{return u=a.data.match(/{[\\\\d\\\\D]+}/),0===(c=u&&u[0]?u[0]:\\\"\\\").indexOf('{\\\\\\\\\\\"code\\\\\\\\\\\":')&&(c=JSON.parse('\\\"'+c+'\\\"')),l=JSON.parse(c),h=/^https/.test(o)?\\\"https\\\":\\\"http\\\",l.protocol=h,this._runtime.useNavi||(l.server=\\\"\\\",l.backupServer=this._miniConnectUrl,l.logSwitch=0),[2,l]}catch(e){ge.error(\\\"parse navi err =>\\\",e)}d.label=3;case 3:return r+=1,[3,1];case 4:return this._runtime.useNavi?[2,null]:[2,l={code:200,protocol:\\\"https\\\",server:\\\"\\\",voipCallInfo:\\\"\\\",kvStorage:0,openHttpDNS:!1,historyMsg:!1,chatroomMsg:!1,uploadServer:\\\"https://upload.qiniup.com\\\",bosAddr:\\\"https://gz.bcebos.com\\\",location:\\\"\\\",monitor:0,joinMChrm:!1,openMp:0,openUS:0,grpMsgLimit:0,isFormatted:0,gifSize:2048,logSwitch:0,logPolicy:\\\"\\\",compDays:0,msgAck:\\\"\\\",activeServer:\\\"\\\",qnAddr:\\\"\\\",extkitSwitch:0,alone:!1,voipServer:\\\"\\\",offlinelogserver:\\\"\\\",backupServer:this._miniConnectUrl}]}}))}))},t}(qr),cs=function(){function e(e){this._pullQueue=[],this._isPulling=!1,this._pullTime=0,this._engine=e}return e.prototype._startPull=function(){return M(this,void 0,void 0,(function(){var e,t,n,i,r,s,o;return w(this,(function(a){switch(a.label){case 0:return this._isPulling||0===this._pullQueue.length?[2]:(this._isPulling=!0,e=this._pullQueue.splice(0,1)[0],t=e.roomId,n=e.timestamp,(i=this._pullTime)>n?(this._isPulling=!1,this._startPull(),[2]):[4,this._engine.pullRTCRoomEntry(t,i)]);case 1:return r=a.sent(),s=r.code,o=r.data,s===Ee.SUCCESS?(this._isPulling=!1,this._pullTime=o.syncTime||0,this._startPull()):this._startPull(),[2]}}))}))},e.prototype.pullEntry=function(e,t){this._pullQueue.push({roomId:e,timestamp:t}),this._startPull()},e.prototype.reset=function(){this._pullTime=0,this._isPulling=!1},e}(),hs=function(e,t){return[\\\"send_msg\\\",e,t].join(\\\"_\\\")},ls=function(){function e(e,t){this._runtime=e,this._appkey=t,this._sendMessageMap={},this._userId=\\\"\\\"}return e.prototype.init=function(e){this._userId=e;var t=hs(this._appkey,e);this._sendMessageMap=this._getLocalInfo(t)},e.prototype._getLocalInfo=function(e){var t=this._runtime.localStorage.getItem(e);try{return t?JSON.parse(t):{}}catch(e){return{}}},e.prototype.setMessage=function(e,t){this._sendMessageMap[e]=t;var n=hs(this._appkey,this._userId),i=this._getLocalInfo(n);i[e]=t,this._runtime.localStorage.setItem(n,JSON.stringify(i))},e.prototype.getSendMessageMap=function(){return this._sendMessageMap},e.prototype.removeByUID=function(e){delete this._sendMessageMap[e]},e.prototype.removeByTimestamp=function(e){var t=hs(this._appkey,this._userId),n=this._getLocalInfo(t);Object.keys(n).forEach((function(t){n[t]<e&&delete n[t]})),this._runtime.localStorage.setItem(t,JSON.stringify(n))},e}(),ds=function(e){var t=\\\"RCDeviceId\\\",n=I(e),i=\\\"\\\",r=n.get(t);return r?i=r:(i=H(),n.set(t,i)),i};(ts={})[j.PRIVATE]=br.qryPMsg,ts[j.GROUP]=br.qryGMsg,ts[j.CHATROOM]=br.qryCHMsg,ts[j.CUSTOMER_SERVICE]=br.qryCMsg,ts[j.SYSTEM]=br.qrySMsg;var fs=[br[br.recallMsg],br[br.ppMsgS],br[br.pgMsgS],br[br.ppMsgP],br[br.pgMsgP],br[br.chatMsg],br[br.pcMsgP],br[br.prMsgS],br[br.updUgRTime]],ps=function(e,t,n,r,s,o){return{conversationType:e,targetId:t,senderUserId:o,messageDirection:me.SEND,isCounted:!!n.isCounted,isMentioned:!!n.isMentioned,content:n.content,messageType:n.messageType,isOffLineMessage:!1,isPersited:!!n.isPersited,messageUId:r,sentTime:s,receivedTime:0,disableNotification:!!n.disableNotification,isStatusMessage:!!n.isStatusMessage,canIncludeExpansion:!!n.canIncludeExpansion,expansion:n.canIncludeExpansion?n.expansion:null,receivedStatus:i.UNREAD,pushConfig:n.pushConfig,channelId:n.channelId,isInterrupt:n.isInterrupt}},gs=function(e){return e.sort((function(e,t){var n,i,r=(null===(n=e.latestMessage)||void 0===n?void 0:n.sentTime)||0;return((null===(i=t.latestMessage)||void 0===i?void 0:i.sentTime)||0)-r}))},_s=function(e){function t(t,n,i){var r=e.call(this,t,n,i)||this;return r._customMessageType={},r._reconnectTimer=-1,r._pullOfflineFinished=!1,r._connectedTime=0,r._localConnectedTime=0,r._status=Ie.DISCONNECTED,r._pullingMsg=!1,r._pullQueue=[],r._chrmsQueue={},r._latestSyncTimestamp=0,r._intervalTimer=-1,r._pullChatroomEntryTimestamp=0,r._lastSyncUltraMsgTimeStamp=0,r._lastSyncUltraMsgLocalTimeStamp=0,r._ultraGroupTimer=-1,r._isUltraPulling=!1,r._ultraGroupTimeQue=[],r._isUltraGroupListExist=!1,r._ultraGroupMap={},r._firstPullUltraGroupTime=0,r._ultraMsgMap={},r._pullUltraChangeMessageQue=[],r._isPullingUltraChangeMessage=!1,r._lastPullingUltraChangeMessageTime=0,r._ultraMsgChangeMap={},r._letterbox=new Hr(t,i.appkey),r._sendMessageStore=new ls(t,i.appkey),r._chrmEntryHandler=new Qr(r),r}return N(t,e),t.prototype._createNavi=function(){return new us(this.runtime,this._options)},t.prototype.getConnectedTime=function(){return this._connectedTime},t.prototype.connect=function(e,t){return M(this,void 0,void 0,(function(){var n,i,r,s,o,a=this;return w(this,(function(u){switch(u.label){case 0:return n=[],this._naviInfo=t,t.server?n.push(t.server):ge.warn(\\\"navi.server is invalid\\\"),(i=t.backupServer)&&i.split(\\\",\\\").forEach((function(e){n.indexOf(e)<0&&n.push(e)})),0===n.length?(ge.error(\\\"navi invaild.\\\",n),[2,Ee.UNKNOWN]):(r=this.runtime.createDataChannel({status:function(i){a._connectionStatusHandler(i,e,n,t.protocol)},signal:this._signalHandler.bind(this)},this._options.connectionType),s=et.V3,1===t.openAnti&&(s=et.V4),[4,r.connect(this._appkey,e,n,t.protocol,this._apiVer,s)]);case 1:return(o=u.sent())===Ee.SUCCESS?(this._channel=r,this.currentUserId=r.userId,this._connectedTime=r.connectedTime,this._localConnectedTime=Math.floor((Date.now()+r.sendConnectTime)/2),this._watcher.status(Ie.CONNECTED),this._status=Ie.CONNECTED,this._pullOfflineFinished=!1,this._conversationManager=new os(this,this._appkey,this.currentUserId,this._watcher.conversation,this._watcher.conversationTag),this._conversationManager.startPullConversationStatus(0),this._userSettingManager=new as(this,this._appkey,this.currentUserId,this._watcher.tag),this._userSettingManager.pullUserSettings(0),this._sendMessageStore.init(this.currentUserId),this._conversationManager.adaptOldStore(),this._rtcKVManager=new cs(this),this._joinedChrmManager=new Wr(this.runtime,this._appkey,this.currentUserId,t.joinMChrm),this._startSyncInterval(),1===t.ugMsg&&this._startUltraSyncInterval()):r.close(),[2,o]}}))}))},t.prototype._connectionStatusHandler=function(e,t,n,i){if(ge.warn(\\\"connection status changed:\\\",e),this._status=e,e!==Ie.CONNECTING)if(e!==Ie.CONNECTED){if(this._channel&&e!==Ie.DISCONNECTED)return e===Ie.BLOCKED||e===Ie.KICKED_OFFLINE_BY_OTHER_CLIENT||e===Ie.DISCONNECT_BY_SERVER?(this.disconnect(),void this._watcher.status(e)):void(e!==Ie.REDIRECT?(this._watcher.status(e),this._try2Reconnect(t,n,i)):this._watcher.status(e));this._watcher.status(e)}else this._watcher.status(e);else this._watcher.status(e)},t.prototype._try2Reconnect=function(e,t,n){return M(this,void 0,void 0,(function(){var i,r=this;return w(this,(function(s){switch(s.label){case 0:return this._channel?(i=et.V3,1===this._naviInfo.openAnti&&(i=et.V4),[4,this._channel.connect(this._appkey,e,t,n,this._apiVer,i)]):[2];case 1:return s.sent()===Ee.SUCCESS?(this._pullOfflineFinished=!1,this._startSyncInterval(),this._watcher.status(Ie.CONNECTED),this._status=Ie.CONNECTED,this._startUltraSyncInterval(),this._rejoinChrm(),ge.__insertLogIntoDatabase(),[2]):(this._watcher.status(Ie.WEBSOCKET_UNAVAILABLE),this._status=Ie.WEBSOCKET_UNAVAILABLE,this._reconnectTimer=setTimeout((function(){r._reconnectTimer=-1,r._try2Reconnect(e,t,n)}),5e3),[2])}}))}))},t.prototype._signalHandler=function(e,t){var n=e.syncMsg,i=e.topic;if(n)this._receiveSyncMsg(e,t);else{var r=br[i];if(r)switch(r){case br.s_ntf:ge.info(\\\"recv s_ntf -> signal.messageId: \\\"+e.messageId),this._pullMsg(e);break;case br.s_msg:this._receiveMsg(e);break;case br.s_cmd:this._receiveStateNotify(e);break;case br.s_us:this._receiveSettingNotify(e);break;case br.rtc_ntf:this._receiveRtcKv(e);break;case br.s_opNtf:this._pullOperateStatusNotify(e)}else ge.error(\\\"unknown topic:\\\",i)}},t.prototype._receiveStateNotify=function(e){var t,n=null===(t=this._channel)||void 0===t?void 0:t.codec.decodeByPBName(e.data,Bt),i=n.time,r=n.type,s=n.chrmId;switch(r){case 2:this._chrmEntryHandler.pullEntry(s,i);break;case 3:this._conversationManager.startPullConversationStatus(i);break;case 4:this._chrmEntryHandler.reset(s),this._watcher.chatroom({chatroomDestroyed:e.targetId});break;case 6:this._ultraGroupTimeQue.push(i),this._syncUltraMsg(this._lastSyncUltraMsgTimeStamp);break;case 7:this._pullUltraChangeMessageQue.push(i),this._pullUltraChangeMessageList(this._lastPullingUltraChangeMessageTime)}},t.prototype._receiveSettingNotify=function(e){var t,n=(null===(t=this._channel)||void 0===t?void 0:t.codec.decodeByPBName(e.data,kn)).version;this._userSettingManager.pullUserSettings(n)},t.prototype._receiveRtcKv=function(e){var t,n=null===(t=this._channel)||void 0===t?void 0:t.codec.decodeByPBName(e.data,fi),i=n.time,r=n.type,s=n.roomId;switch(r){case 1:this._rtcKVManager.pullEntry(s,i)}},t.prototype._receiveMessageExpansion=function(e){var t=e.content,n=t.put,i=t.del,r=t.mid;n&&this._watcher.expansion({updatedExpansion:{messageUId:r,expansion:n}}),i&&this._watcher.expansion({deletedExpansion:{messageUId:r,deletedKeys:i}})},t.prototype._receiveSyncMsg=function(e,t){var n,i;if(fs.includes(e.topic)){if(e.topic===br[br.updUgRTime]){var r=null===(n=this._channel)||void 0===n?void 0:n.codec.decodeByPBName(e.data,zt),s=r.channelId,o=r.busChannel,a=this._ultraGroupMap[o+\\\"_\\\"+s];return a&&(a.unreadMessageCount=0,a.unreadMentionedCount=0,a.lastReadTime=t.timestamp,this._watcher.conversation(It([a]))),void(t&&(this._ultraMsgMap[t.messageUId]=t.timestamp))}var u=null===(i=this._channel)||void 0===i?void 0:i.codec.decodeByPBName(e.data,Ut,{currentUserId:this.currentUserId,signal:e});u=this._handleMsgProperties(u),t&&(u.sentTime=t.timestamp,u.messageUId=t.messageUId),this._pullingMsg?this._pullQueue.push((null==t?void 0:t.timestamp)||u.sentTime):(t&&this._sendMessageStore.setMessage(t.messageUId,t.timestamp),u.messageType!==Se.EXPANSION_NOTIFY?(u.messageType===Se.SYNC_READ_STATUS&&this._conversationManager.clearUnreadCount(u.conversationType,u.targetId,u.channelId),this._conversationManager.setConversationCacheByMessage(u,!0),this._watcher.batchMessage([u])):this._receiveMessageExpansion(u))}},t.prototype._pullMsg=function(e){if(this._channel){var t=this._channel.codec.decodeByPBName(e.data,Bt),n=t.type,i=t.chrmId,r=t.time;if(ge.info(\\\"s_ntf -> type: \\\"+n+\\\", chrmId: \\\"+i+\\\", time: \\\"+r),2===n){var s=this._chrmsQueue[i];if(!s)return;s.queue.push(r),this._pullChrmMsg(i)}else this._pullQueue.push(r),this._syncMsg()}},t.prototype._startSyncInterval=function(){var e=this;this._stopSyncInterval();this._intervalTimer=setInterval((function(){Date.now()-e._latestSyncTimestamp>=18e4&&e._syncMsg()}),3e4),this._latestSyncTimestamp=Date.now(),this._syncMsg()},t.prototype._stopSyncInterval=function(){-1!==this._intervalTimer&&(clearInterval(this._intervalTimer),this._intervalTimer=-1)},t.prototype._syncMsg=function(){return M(this,void 0,void 0,(function(){var e,t,n,i,r,s,o,a,u,c,h,l,d,f,p=this;return w(this,(function(g){switch(g.label){case 0:return this._pullingMsg?[2]:this._channel?(this._pullingMsg=!0,e=this._letterbox.getOutboxTime(this.currentUserId),t=this._letterbox.getInboxTime(this.currentUserId),ge.info(\\\"pullMsg -> sendboxTime: \\\"+e+\\\", inboxTime: \\\"+t),n=this._channel.codec.encodeSyncMsg({sendboxTime:e,inboxTime:t}),i=new Or(br[br.pullMsg],n,this.currentUserId),[4,this._channel.send(i,Pt,{connectedTime:this._channel.connectedTime,currentUserId:this.currentUserId})]):(this._pullingMsg=!1,[2]);case 1:return r=g.sent(),s=r.code,o=r.data,this._latestSyncTimestamp=Date.now(),s!==Ee.SUCCESS||!o||re(o.finished)||re(o.list)||re(o.syncTime)?(ge.warn(\\\"pullMsg failed -> code:\\\",s,\\\", data: \\\",o),this._pullingMsg=!1,[2]):(a=o.list,u=o.finished,c=o.syncTime,ge.info(\\\"pullMsg success -> syncTime: \\\"+c+\\\", finished: \\\"+u),h=0,l=[],a.forEach((function(e){if(e.messageDirection===me.SEND&&(h=Math.max(e.sentTime,h),p._sendMessageStore.getSendMessageMap()[e.messageUId]))return void p._sendMessageStore.removeByUID(e.messageUId);if(e.messageType!==Se.EXPANSION_NOTIFY){if(e.messageType===Se.SYNC_READ_STATUS){if(e.senderUserId!==p.currentUserId)return;p._conversationManager.clearUnreadCount(e.conversationType,e.targetId,e.channelId)}var t=p._handleMsgProperties(e);p._conversationManager.setConversationCacheByMessage(t,!0),l.push(t)}else p._receiveMessageExpansion(e)})),this._watcher.batchMessage(l),this._letterbox.setInboxTime(c,this.currentUserId),this._letterbox.setOutboxTime(h,this.currentUserId),this._sendMessageStore.removeByTimestamp(h),this._pullingMsg=!1,d=this._pullQueue.filter((function(e){return e>c})),this._pullQueue.length=0,(f=this._pullQueue).push.apply(f,d),u&&!this._pullOfflineFinished&&(this._pullOfflineFinished=!0,this._watcher.pullFinished()),(!u||d.length>0)&&this._syncMsg(),[2])}}))}))},t.prototype._receiveMsg=function(e){if(this._channel&&!this._pullingMsg)if(this._pullQueue.length>0)this._syncMsg();else{var t=this._channel.codec.decodeByPBName(e.data,Lt,{currentUserId:this.currentUserId,connectedTime:this._channel.connectedTime});(t=this._handleMsgProperties(t)).senderUserId===this.currentUserId&&this._sendMessageStore.setMessage(t.messageUId,t.sentTime),t.isStatusMessage||t.senderUserId===this.currentUserId||this._letterbox.setInboxTime(t.sentTime,this.currentUserId),t.messageType!==Se.EXPANSION_NOTIFY?t.messageType===Se.SYNC_READ_STATUS&&t.senderUserId!==this.currentUserId||(this._conversationManager.setConversationCacheByMessage(t,!0),this._watcher.batchMessage([t])):this._receiveMessageExpansion(t)}},t.prototype._handleMsgProperties=function(e,t){void 0===t&&(t=!1);var n,i=e.messageType,r=e.isCounted,s=e.isPersited,o=e.isStatusMessage,a=i in v,u=i in this._customMessageType;if(n=a?O(O({},v[i]),{isStatusMessage:T.includes(i)}):u?this._customMessageType[i]:{isCounted:!se(r)&&r,isPersited:!se(s)&&s,isStatusMessage:!1},Object.assign(e,n),t&&!re(o)&&(e.isStatusMessage=o),!t){var c=e.content.user;if(c){var h=c.portrait,l=c.portraitUri,d=h||l;d&&(c.portrait=c.portraitUri=d)}}return e},t.prototype.getHistoryMessage=function(e,t,n,i,r,s){return void 0===s&&(s=\\\"\\\"),M(this,void 0,void 0,(function(){var o,a,u,c,h,l,d,f,p;return w(this,(function(g){switch(g.label){case 0:return a=(o=this).currentUserId,u=o._channel,c=sr[e]||$i,h=1===i&&0===n,u?(l=u.codec.encodeGetHistoryMsg(t,{timestamp:n,count:h?2:i,order:r,channelId:s}),[4,u.send(new Or(c,l,a),Ft,{currentUserId:a,connectedTime:u.connectedTime,conversation:{targetId:t}})]):[3,2];case 1:return d=g.sent(),(f=d.code)!==Ee.SUCCESS?[2,{code:f}]:(p=d.data,h&&2===p.list.length&&(p.hasMore=!0,0===r?p.list.shift():p.list.pop()),[2,{code:f,data:{list:p.list,hasMore:p.hasMore}}]);case 2:return[2,{code:Ee.RC_NET_CHANNEL_INVALID}]}}))}))},t.prototype.reportSDKInfo=function(e){var t=this.currentUserId,n=this._channel;if(n){ge.info(\\\"reportSDKInfo ->\\\",e);var i=n.codec.encodeReportSDKInfo(JSON.stringify(e)),r=new Or(br[br.reportsdk],i,t);n.send(r).then((function(e){var t=e.code;t!==Ee.SUCCESS&&ge.warn(\\\"reportSDKInfo failed -> code: \\\"+t)}))}},t.prototype.deleteRemoteMessage=function(e,t,n,i){return M(this,void 0,void 0,(function(){var r,s,o,a,u,c,h;return w(this,(function(l){switch(l.label){case 0:return s=(r=this).currentUserId,(o=r._channel)?(a=o.codec.encodeDeleteMessages(e,t,n,i),u=new Or(Fi,a,s),[4,o.send(u)]):[3,2];case 1:return c=l.sent(),h=c.code,Ee.SUCCESS,[2,h];case 2:return[2,Ee.RC_NET_CHANNEL_INVALID]}}))}))},t.prototype.deleteRemoteMessageByTimestamp=function(e,t,n,i){return M(this,void 0,void 0,(function(){var r,s,o,a,u,c,h,l;return w(this,(function(d){switch(d.label){case 0:return s=(r=this).currentUserId,(o=r._channel)?(a=o.codec.encodeClearMessages(t,n,i,e),u=or[e],c=new Or(u,a,s),[4,o.send(c)]):[3,2];case 1:return h=d.sent(),l=h.code,Ee.SUCCESS,[2,l];case 2:return[2,Ee.RC_NET_CHANNEL_INVALID]}}))}))},t.prototype.getConversationList=function(e,t,n,i,r){return void 0===e&&(e=300),M(this,void 0,void 0,(function(){var r,s,o,a,u,c,h,l,d=this;return w(this,(function(f){switch(f.label){case 0:return s=(r=this).currentUserId,o=r._channel,t=t||j.PRIVATE,o?(a=o.codec.encodeOldConversationList({count:e,type:t,startTime:n,order:i}),u=new Or(Ji,a,s),[4,o.send(u,Kt,{currentUserId:s,connectedTime:o.connectedTime,afterDecode:function(e){var t=e.conversationType,n=e.targetId,i=e.channelId,r=d._conversationManager.get(t,n,i);return Object.assign(e,r),e}})]):[3,2];case 1:return c=f.sent(),h=c.code,l=c.data,h!==Ee.SUCCESS?[2,{code:h}]:[2,{code:h,data:null==l?void 0:l.list}];case 2:return[2,{code:Ee.RC_NET_CHANNEL_INVALID}]}}))}))},t.prototype.removeConversation=function(e,t,n){return M(this,void 0,void 0,(function(){var i,r,s,o,a;return w(this,(function(u){switch(u.label){case 0:return(i=this._channel)?(r=i.codec.encodeRemoveOldConversationList({conversationType:e,channelId:n,targetId:t}),s=new Or(zi,r,t),[4,i.send(s)]):[3,2];case 1:return o=u.sent(),ge.info(\\\"RemoveConversation =>\\\",o),a=o.code,Ee.SUCCESS,[2,a];case 2:return[2,Ee.RC_NET_CHANNEL_INVALID]}}))}))},t.prototype.getConversation=function(e,t,n){return M(this,void 0,void 0,(function(){var i,r,s,o,a,u;return w(this,(function(c){switch(c.label){case 0:return e!==j.ULTRA_GROUP?[3,1]:(i=this._ultraGroupMap[n+\\\"_\\\"+t])?[3,3]:[2,{code:Ee.CONVER_GET_ERROR}];case 1:return(r=this._conversationManager.get(e,t,n))?[4,this.getHistoryMessage(e,t,0,1,0)]:[2,{code:Ee.CONVER_GET_ERROR}];case 2:if(s=c.sent(),o=s.code,a=s.data,o!==Ee.SUCCESS)return[2,{code:Ee.CONVER_GET_ERROR}];u=(null==a?void 0:a.list[0])||null,i={conversationType:e,targetId:t,channelId:n,unreadMessageCount:r.unreadMessageCount||0,latestMessage:u,notificationStatus:r.notificationStatus||Oe.CLOSE,isTop:r.isTop||!1,lastUnreadTime:r.lastUnreadTime||0,unreadMentionedCount:r.unreadMentionedCount||0},c.label=3;case 3:return[2,{code:Ee.SUCCESS,data:i}]}}))}))},t.prototype.getAllConversationUnreadCount=function(e,t,n){var i=this._conversationManager.getAllUnreadCount(e,t,n);return Promise.resolve({code:Ee.SUCCESS,data:i})},t.prototype.getConversationUnreadCount=function(e,t,n){var i,r;return r=e===j.ULTRA_GROUP?(null===(i=this._ultraGroupMap[n+\\\"_\\\"+t])||void 0===i?void 0:i.unreadMessageCount)||0:this._conversationManager.getUnreadCount(e,t,n),Promise.resolve({code:Ee.SUCCESS,data:r})},t.prototype.clearConversationUnreadCount=function(e,t,n){return this._conversationManager.clearUnreadCount(e,t,n,!1),Promise.resolve(Ee.SUCCESS)},t.prototype.clearAllUnreadCount=function(){return this._conversationManager.clearAllUnreadCount(),Promise.resolve(Ee.SUCCESS)},t.prototype.getFirstUnreadMessage=function(e,t){throw new Error(\\\"Method not implemented.\\\")},t.prototype.saveConversationMessageDraft=function(e,t,n,i){return this._conversationManager.setDraft(e,t,n,i),Promise.resolve(Ee.SUCCESS)},t.prototype.getConversationMessageDraft=function(e,t,n){var i=this._conversationManager.getDraft(e,t,n);return Promise.resolve({code:Ee.SUCCESS,data:i})},t.prototype.clearConversationMessageDraft=function(e,t,n){return this._conversationManager.clearDraft(e,t,n),Promise.resolve(Ee.SUCCESS)},t.prototype.pullConversationStatus=function(e){return M(this,void 0,void 0,(function(){var t,n,i,r,s,o,a,u,c,h=this;return w(this,(function(l){switch(l.label){case 0:return n=(t=this)._channel,i=t.currentUserId,n?(r=n.codec.encodeGetConversationStatus(e),s=new Or(br[br.pullSeAtts],r,i),[4,n.send(s,Bn)]):[3,2];case 1:return o=l.sent(),a=o.code,u=o.data,a!==Ee.SUCCESS?[2,{code:a}]:(c=[],Array.isArray(u)&&u.forEach((function(e){var t=e.conversationType,n=e.targetId,i=e.notificationStatus,r=e.channelId,s=e.isTop,o=h._ultraGroupMap[r+\\\"_\\\"+n];t===j.ULTRA_GROUP?o&&(void 0!==i&&(o.notificationStatus=i),\\\"boolean\\\"==typeof s&&(o.isTop=s)):c.push(e)})),[2,{code:a,data:c}]);case 2:return[2,{code:Ee.RC_NET_CHANNEL_INVALID}]}}))}))},t.prototype.batchSetConversationStatus=function(e){return M(this,void 0,void 0,(function(){var t,n,i,r,s,o,a,u,c,h,l,d=this;return w(this,(function(f){switch(f.label){case 0:return n=(t=this).currentUserId,(i=t._channel)?(r=i.codec.encodeSetConversationStatus(e),s=new Or(Zi,r,n),[4,i.send(s,Kn)]):[3,2];case 1:return o=f.sent(),a=o.code,u=o.data,a===Ee.SUCCESS?(c=u,h=[],e.forEach((function(e){var t=e.conversationType,n=e.targetId,i=e.notificationStatus,r=e.channelId,s=e.isTop;if(t===j.ULTRA_GROUP){var o=d._ultraGroupMap[r+\\\"_\\\"+n];o&&(void 0!==i&&(o.notificationStatus=i),void 0!==s&&(o.isTop=s),h.push(o))}else d._conversationManager.addStatus(O(O({},e),{updatedTime:c.version}),!0)})),h.length>0&&(l=It(h),l=gs(l),this._watcher.conversation(l)),[2,a]):[2,a];case 2:return[2,Ee.RC_NET_CHANNEL_INVALID]}}))}))},t.prototype._joinChrm=function(e,t,n){return M(this,void 0,void 0,(function(){var i,r,s,o,a,u,c;return w(this,(function(h){switch(h.label){case 0:return(i=this._channel)?(r=i.codec.encodeJoinOrQuitChatRoom(),s=new Or(n?Ki:qi,r,e),[4,i.send(s,Xt)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return o=h.sent(),a=o.code,u=o.data,a===Ee.SUCCESS&&(c=u.joinTime,this._chrmsQueue[e]||(this._chrmsQueue[e]={pulling:!1,queue:[],timestamp:0}),this._pullChrmMsg(e,t,c),this._naviInfo.kvStorage&&this._chrmEntryHandler.pullEntry(e,0),this._joinedChrmManager.set(e,t)),[2,a]}}))}))},t.prototype._rejoinChrm=function(){return M(this,void 0,void 0,(function(){var e,t,n,i,r,s;return w(this,(function(o){switch(o.label){case 0:for(n in e=this._joinedChrmManager.get(),t=[],e)t.push(n);i=0,o.label=1;case 1:return i<t.length?(r=t[i],[4,this._joinChrm(r,e[r]||10,!0)]):[3,4];case 2:(s=o.sent())===Ee.SUCCESS?this._watcher.chatroom({rejoinedRoom:{chatroomId:r,count:e[r]}}):this._watcher.chatroom({rejoinedRoom:{chatroomId:r,errorCode:s}}),o.label=3;case 3:return i++,[3,1];case 4:return[2]}}))}))},t.prototype._pullChrmMsg=function(e,t,n){return void 0===t&&(t=10),void 0===n&&(n=0),M(this,void 0,void 0,(function(){var i,r,s,o,a,u,c,h,l,d,f,p;return w(this,(function(g){switch(g.label){case 0:return this._channel?(i=this._chrmsQueue[e],r=i.pulling,s=i.timestamp,r?[2]:(i.pulling=!0,o=this._channel.codec.encodeChrmSyncMsg(s,t),a=new Or(br[br.chrmPull],o,e),[4,this._channel.send(a,Pt,{connectedTime:this._channel.connectedTime,currentUserId:this.currentUserId})])):[2];case 1:return u=g.sent(),c=u.code,h=u.data,i.pulling=!1,c===Ee.SUCCESS&&h?(l=h.list,d=h.syncTime,f=h.finished,i.timestamp=n?Math.max(d,n):d,i.queue=i.queue.filter((function(e){return e>d})),p=[],l.forEach((function(e){e.sentTime<s||p.push(e)})),this._watcher.batchMessage(p),(!f||i.queue.length>0)&&this._pullChrmMsg(e),[2]):(ge.warn(\\\"pull chatroom msg failed, code:\\\",c,\\\", data:\\\",h),[2])}}))}))},t.prototype.joinChatroom=function(e,t){return M(this,void 0,void 0,(function(){return w(this,(function(n){return[2,this._joinChrm(e,t,!1)]}))}))},t.prototype.joinExistChatroom=function(e,t){return M(this,void 0,void 0,(function(){return w(this,(function(n){return[2,this._joinChrm(e,t,!0)]}))}))},t.prototype.quitChatroom=function(e){return M(this,void 0,void 0,(function(){var t,n,i,r,s;return w(this,(function(o){switch(o.label){case 0:return(t=this._channel)?(n=t.codec.encodeJoinOrQuitChatRoom(),i=new Or(Hi,n,e),[4,t.send(i)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return r=o.sent(),(s=r.code)===Ee.SUCCESS&&(delete this._chrmsQueue[e],this._chrmEntryHandler.reset(e),this._joinedChrmManager.remove(e)),[2,s]}}))}))},t.prototype.getChatroomInfo=function(e,t,n){return M(this,void 0,void 0,(function(){var i,r,s,o,a,u;return w(this,(function(c){switch(c.label){case 0:return(i=this._channel)?(r=i.codec.encodeGetChatRoomInfo(t,n),s=new Or(br[br.queryChrmI],r,e),[4,i.send(s,en)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return o=c.sent(),a=o.code,u=o.data,a!==Ee.SUCCESS?[2,{code:a}]:[2,{code:a,data:u}]}}))}))},t.prototype.getChatroomHistoryMessages=function(e,t,n,i){return M(this,void 0,void 0,(function(){var r,s,o,a,u,c;return w(this,(function(h){switch(h.label){case 0:return(r=this._channel)?(s=r.codec.encodeGetHistoryMsg(e,{timestamp:t,count:n,order:i}),o=new Or(tr,s,e),[4,r.send(o,Ft,{conversation:{targetId:e}})]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return a=h.sent(),u=a.code,c=a.data,u!==Ee.SUCCESS?[2,{code:u}]:[2,{code:u,data:{list:c.list,hasMore:c.hasMore}}]}}))}))},t.prototype._modifyChatroomKV=function(e,t){return M(this,void 0,void 0,(function(){var n,i,r,s,o,a,u,c,h;return w(this,(function(l){switch(l.label){case 0:return i=(n=this)._channel,r=n.currentUserId,i?(s=this._chrmEntryHandler.getVersion(e,t.key),t.version=null==s?this.getServerTime():s,o=i.codec.encodeModifyChatRoomKV(e,t,r),a=t.type===Le.UPDATE?Yi:ji,u=new Or(a,o,e),[4,i.send(u,Xt)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return c=l.sent(),(h=c.code)===Ee.SUCCESS?(this._chrmEntryHandler.setLocal(e,{kvEntries:[t],syncTime:(new Date).getTime()},r),[2,h]):[2,h]}}))}))},t.prototype._modifyChatroomKVS=function(e,t){return M(this,void 0,void 0,(function(){var n,i,r,s,o,a,u,c,h,l,d,f,p=this;return w(this,(function(g){switch(g.label){case 0:return i=(n=this)._channel,r=n.currentUserId,i?(t.entries.forEach((function(t){var n=p._chrmEntryHandler.getVersion(e,t.key);t.version=null==n?p.getServerTime():n})),s=i.codec.encodeModifyChatRoomKVS(e,t,r),o=t.type===Le.UPDATE?Qi:Wi,a=new Or(o,s,e),[4,i.send(a,wn)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return u=g.sent(),c=u.code,-1!==[Ee.SUCCESS,Ee.CHATROOM_KV_STORE_NOT_ALL_SUCCESS].indexOf(c)&&(l=[],delete(d=Object.assign({},t)).entries,t.entries.forEach((function(e){l.push(Object.assign({},e,d))})),c===Ee.CHATROOM_KV_STORE_NOT_ALL_SUCCESS&&(f=u.data,ge.warn(\\\"设置失败的属性：\\\",f.errorKeys),h=f.errorKeys,f&&Array.isArray(f.errorKeys)&&f.errorKeys.forEach((function(e){var t=l.findIndex((function(t){return e.key===t.key}));-1!==t&&l.splice(t,1)}))),ge.warn(\\\"设置成功的属性：\\\",l),this._chrmEntryHandler.setLocal(e,{kvEntries:l,syncTime:(new Date).getTime()},r)),[2,{code:c,data:h}]}}))}))},t.prototype.setChatroomEntry=function(e,t){return M(this,void 0,void 0,(function(){return w(this,(function(n){return t.type=Le.UPDATE,t.userId=t.userId||this.currentUserId,[2,this._modifyChatroomKV(e,t)]}))}))},t.prototype.setChatroomEntries=function(e,t){return M(this,void 0,void 0,(function(){return w(this,(function(n){return t.type=Le.UPDATE,t.userId=t.userId||this.currentUserId,[2,this._modifyChatroomKVS(e,t)]}))}))},t.prototype.forceSetChatroomEntry=function(e,t){return M(this,void 0,void 0,(function(){return w(this,(function(n){return t.type=Le.UPDATE,t.isOverwrite=!0,t.userId=t.userId||this.currentUserId,[2,this._modifyChatroomKV(e,t)]}))}))},t.prototype.removeChatroomEntry=function(e,t){return M(this,void 0,void 0,(function(){return w(this,(function(n){return t.type=Le.DELETE,t.userId=t.userId||this.currentUserId,[2,this._modifyChatroomKV(e,t)]}))}))},t.prototype.removeChatroomEntries=function(e,t){return M(this,void 0,void 0,(function(){return w(this,(function(n){return t.type=Le.DELETE,t.userId=t.userId||this.currentUserId,[2,this._modifyChatroomKVS(e,t)]}))}))},t.prototype.forceRemoveChatroomEntry=function(e,t){return M(this,void 0,void 0,(function(){return w(this,(function(n){return t.type=Le.DELETE,t.isOverwrite=!0,t.userId=t.userId||this.currentUserId,[2,this._modifyChatroomKV(e,t)]}))}))},t.prototype.getChatroomEntry=function(e,t){return M(this,void 0,void 0,(function(){var n,i,r,s,o,a,u;return w(this,(function(c){switch(c.label){case 0:return(n=this._chrmEntryHandler.getValue(e,t))?[2,Promise.resolve({code:Ee.SUCCESS,data:n})]:[3,1];case 1:return(i=this._channel)?(r=i.codec.encodePullChatRoomKV(0),s=new Or(br[br.pullKV],r,e),[4,i.send(s,Mn)]):[2,Promise.reject({code:Ee.RC_NET_CHANNEL_INVALID})];case 2:return o=c.sent(),(a=o.data||{})&&a.kvEntries&&a.kvEntries.length&&void 0!==(u=a.kvEntries.find((function(e){return e.key===t})))?[2,Promise.resolve({code:Ee.SUCCESS,data:null==u?void 0:u.value})]:[2,Promise.resolve({code:Ee.CHATROOM_KEY_NOT_EXIST})]}}))}))},t.prototype.getAllChatroomEntry=function(e){return M(this,void 0,void 0,(function(){var t,n,i,r,s,o,a;return w(this,(function(u){switch(u.label){case 0:return(t=this._chrmEntryHandler.getAll(e))&&Object.keys(t).length?[2,Promise.resolve({code:Ee.SUCCESS,data:t})]:[3,1];case 1:return(n=this._channel)?(i={},r=n.codec.encodePullChatRoomKV(0),s=new Or(br[br.pullKV],r,e),[4,n.send(s,Mn)]):[2,Promise.reject({code:Ee.RC_NET_CHANNEL_INVALID})];case 2:return o=u.sent(),(a=o.data||{})&&a.kvEntries&&a.kvEntries.length&&a.kvEntries.forEach((function(e){e.key&&(i[e.key]=e.value||\\\"\\\")})),[2,Promise.resolve({code:Ee.SUCCESS,data:i})]}}))}))},t.prototype.pullChatroomEntry=function(e,t){return M(this,void 0,void 0,(function(){var n,i,r,s,o,a,u,c,h,l,d,f;return w(this,(function(p){switch(p.label){case 0:return i=(n=this)._channel,r=n.currentUserId,i?(t||(t=this._pullChatroomEntryTimestamp),s=i.codec.encodePullChatRoomKV(t),o=new Or(br[br.pullKV],s,e),[4,i.send(o,Mn)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return a=p.sent(),u=a.code,c=a.data,u===Ee.SUCCESS?(ge.info(\\\"Pull success ChrmKV, \\\"+JSON.stringify(a)),this._chrmEntryHandler.setLocal(e,c,r),ge.info(\\\"Save into cache success!\\\"),l=(h=c).kvEntries,d=h.syncTime,this._pullChatroomEntryTimestamp=d||0,f=[],l.length>0&&(l.forEach((function(t){var n=t.key,i=t.value,r=t.type,s=t.timestamp;f.push({key:n,value:i,type:r,timestamp:s,chatroomId:e})})),this._watcher.chatroom({updatedEntries:f})),[2,{code:u,data:c}]):[2,{code:u}]}}))}))},t.prototype.sendMessage=function(e,t,n){return M(this,void 0,void 0,(function(){var i,r,s,o,a,u,c,h,l,d;return w(this,(function(f){switch(f.label){case 0:return this._channel?(n=function(e,t){return\\\"RC:SRSMsg\\\"===e.messageType&&Object.assign(e,{directionalUserIdList:[t]}),e}(n,this.currentUserId),n=this._handleMsgProperties(n,!0),i=!![j.PRIVATE,j.GROUP].includes(e)&&n.isStatusMessage,r=i?function(e){var t;return(t={},t[j.PRIVATE]=br.ppMsgS,t[j.GROUP]=br.pgMsgS,t)[e]}(e):function(e){var t;return(t={},t[j.PRIVATE]=br.ppMsgP,t[j.GROUP]=br.pgMsgP,t[j.CHATROOM]=br.chatMsg,t[j.CUSTOMER_SERVICE]=br.pcMsgP,t[j.RTC_ROOM]=br.prMsgS,t)[e]}(e)||br.ppMsgP,i&&(n.isPersited=!1,n.isCounted=!1),s=this._channel.codec.encodeUpMsg({conversationType:e,targetId:t},n),(o=new Rr(br[r],s,t)).setHeaderQos(ze.AT_LEAST_ONCE),i?(this._channel.sendOnly(o),[2,{code:Ee.SUCCESS,data:ps(e,t,O({},n),\\\"\\\",0,this.currentUserId)}]):(a=Date.now()-this._localConnectedTime+this._connectedTime,u=ps(e,t,O({},n),\\\"\\\",a,this.currentUserId),[4,this._channel.send(o)])):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return c=f.sent(),h=c.code,l=c.data,h!==Ee.SUCCESS?[2,{code:h,data:u}]:(d=l,this._sendMessageStore.setMessage(d.messageUId,d.timestamp),u.sentTime=d.timestamp,u.messageUId=d.messageUId,this._conversationManager.setConversationCacheByMessage(u,!0),[2,{code:Ee.SUCCESS,data:u}])}}))}))},t.prototype.recallMsg=function(e,t,n,i,r){var s;return M(this,void 0,void 0,(function(){var o,a,u,c,h,l,d,f,p,g;return w(this,(function(_){switch(_.label){case 0:return this._channel?(o=r.user,a={content:{conversationType:e,targetId:t,messageUId:n,sentTime:i,user:o},messageType:\\\"RC:RcCmd\\\",disableNotification:null==r?void 0:r.disableNotification,pushConfig:null==r?void 0:r.pushConfig,pushContent:(null===(s=r.pushConfig)||void 0===s?void 0:s.pushContent)||r.pushContent||\\\"\\\",channelId:r.channelId},u=br[br.recallMsg],c=this._channel.codec.encodeUpMsg({conversationType:e,targetId:t},a),(h=new Rr(u,c,this.currentUserId)).setHeaderQos(ze.AT_LEAST_ONCE),[4,this._channel.send(h)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return l=_.sent(),d=l.code,f=l.data,d!==Ee.SUCCESS?[2,{code:d}]:(p=f,e===j.ULTRA_GROUP?(this._ultraMsgMap[p.messageUId]=p.timestamp,[2,{code:Ee.SUCCESS}]):(this._sendMessageStore.setMessage(p.messageUId,p.timestamp),g=ps(e,t,O(O({},a),{isPersited:!0}),p.messageUId,p.timestamp,this.currentUserId),this._conversationManager.setConversationCacheByMessage(g,!0),[2,{code:Ee.SUCCESS,data:g}]))}}))}))},t.prototype.sendReadReceiptMessage=function(e,t,n){return M(this,void 0,void 0,(function(){var i,r;return w(this,(function(s){switch(s.label){case 0:return this._channel?(i=this._channel.codec.encodeReadReceipt(t,n),r=new Or(br[br.rrMsg],i,e),[4,this._channel.send(r)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return[2,s.sent()]}}))}))},t.prototype.getMessageReader=function(e,t,n){return M(this,void 0,void 0,(function(){var i,r;return w(this,(function(s){switch(s.label){case 0:return this._channel?(i=this._channel.codec.encodeMessageReader(t,n),r=new Or(br[br.rrList],i,e),[4,this._channel.send(r,jn)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return[2,s.sent()]}}))}))},t.prototype.pullUserSettings=function(e){return M(this,void 0,void 0,(function(){var t,n;return w(this,(function(i){return this._channel?(t=this._channel.codec.encodePullUserSetting(e),n=new Or(br[br.pullUS],t,this.currentUserId),[2,this._channel.send(n,Vn)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}]}))}))},t.prototype.getFileToken=function(e,t,n,i){return M(this,void 0,void 0,(function(){var r,s,o,a,u,c;return w(this,(function(h){switch(h.label){case 0:return this._channel?(r=i&&\\\"uploads\\\"!==i?t||\\\"\\\":ot(e,t),s=this._channel.codec.encodeGetFileToken(e,r,n||\\\"\\\",i||\\\"\\\"),o=new Or(br[br.qnTkn],s,this.currentUserId),[4,this._channel.send(o,vn)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return a=h.sent(),u=a.code,c=a.data,c=Object.assign(c,{fileName:r}),u===Ee.SUCCESS?[2,{code:u,data:c}]:[2,{code:u}]}}))}))},t.prototype.getFileUrl=function(e,t,n,i){return M(this,void 0,void 0,(function(){var r,s,o,a,u,c,h,l,d;return w(this,(function(f){switch(f.label){case 0:return this._channel?(r=\\\"\\\",s=\\\"\\\",o=\\\"\\\",t===Ue.QINIU?(s=En,o=In):(s=Tn,o=Cn),r=t===Ue.QINIU?br[br.qnUrl]:t===Ue.AWS?br[br.s3Url]:t===Ue.STC?br[br.stcUrl]:br[br.aliUrl],a=this._channel.codec.encodeGetFileUrl(s,e,n,i),u=new Or(r,a,this.currentUserId),[4,this._channel.send(u,o)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return c=f.sent(),h=c.code,l=c.data,d=l,h===Ee.SUCCESS?[2,{code:h,data:d}]:[2,{code:h}]}}))}))},t.prototype.disconnect=function(){-1!==this._reconnectTimer&&(clearTimeout(this._reconnectTimer),this._reconnectTimer=-1),this._channel&&(this._channel.close(),this._channel=void 0),this._pullQueue.length=0,this._stopSyncInterval(),this._stopUltraSyncInterval()},t.prototype.destroy=function(){throw new Error(\\\"JSEngine's method not implemented.\\\")},t.prototype.registerMessageType=function(e,t,n,i,r){this._customMessageType[e]={isPersited:t,isCounted:n,isStatusMessage:r}},t.prototype.getServerTime=function(){return Date.now()-this._localConnectedTime+this._connectedTime},t.prototype.getCurrentUserId=function(){return this.currentUserId},t.prototype.createTag=function(e){return M(this,void 0,void 0,(function(){var t,n,i,r,s,o,a;return w(this,(function(u){switch(u.label){case 0:return this._channel?(t=this._userSettingManager.getVersion(),n=this._channel.codec.encodeCreateTag([e],t),i=new Or(br[br.addSeTag],n,this.currentUserId),[4,this._channel.send(i,Pn)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return r=u.sent(),s=r.code,o=r.data,s!==Ee.SUCCESS?[2,{code:s}]:(a=o.version,this._userSettingManager.addTag([O(O({},e),{createdTime:a})],a),[2,{code:Ee.SUCCESS,data:o}])}}))}))},t.prototype.removeTag=function(e){return M(this,void 0,void 0,(function(){var t,n,i,r,s,o,a;return w(this,(function(u){switch(u.label){case 0:return this._channel?(t=this._userSettingManager.getVersion(),n=this._channel.codec.encodeRemoveTag([e],t),i=new Or(br[br.delSeTag],n,this.currentUserId),[4,this._channel.send(i,Pn)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return r=u.sent(),s=r.code,o=r.data,s!==Ee.SUCCESS?[2,{code:s}]:(a=o.version,this._userSettingManager.deleteTag([e],a),[2,{code:Ee.SUCCESS}])}}))}))},t.prototype.updateTag=function(e){return M(this,void 0,void 0,(function(){var t,n,i,r,s,o,a;return w(this,(function(u){switch(u.label){case 0:return this._channel?(t=this._userSettingManager.getVersion(),n=this._channel.codec.encodeCreateTag([e],t),i=new Or(br[br.addSeTag],n,this.currentUserId),[4,this._channel.send(i,Pn)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return r=u.sent(),s=r.code,o=r.data,s!==Ee.SUCCESS?[2,{code:s}]:(a=o.version,this._userSettingManager.addTag([e],a),[2,{code:Ee.SUCCESS,data:o}])}}))}))},t.prototype.getTagList=function(){return M(this,void 0,void 0,(function(){var e,t;return w(this,(function(n){return e=this._userSettingManager.getTags(),t=this._conversationManager.getConversationListForTag(),e.forEach((function(e){e.conversationCount=t[e.tagId]?t[e.tagId].length:0})),[2,{code:Ee.SUCCESS,data:e}]}))}))},t.prototype.addTagForConversations=function(e,t){return M(this,void 0,void 0,(function(){var n,i,r,s,o=this;return w(this,(function(a){switch(a.label){case 0:return this._channel?this._userSettingManager.getTagById(e)?(n=this._channel.codec.encodeUpdateConversationTag([{tagId:e}],t),i=new Or(br[br.addTag],n,this.currentUserId),[4,this._channel.send(i)]):[2,{code:Ee.TAG_NOT_EXIST}]:[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return(r=a.sent().code)!==Ee.SUCCESS?[2,{code:r}]:((s={})[e]={},t.forEach((function(e){o._conversationManager.addTagStatus(e.conversationType,e.targetId,s,e.channelId)})),[2,{code:Ee.SUCCESS}])}}))}))},t.prototype.removeTagForConversations=function(e,t){return M(this,void 0,void 0,(function(){var n,i,r,s=this;return w(this,(function(o){switch(o.label){case 0:return this._channel?(n=this._channel.codec.encodeUpdateConversationTag([{tagId:e}],t),i=new Or(br[br.delTag],n,this.currentUserId),[4,this._channel.send(i)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return(r=o.sent().code)!==Ee.SUCCESS?[2,{code:r}]:(t.forEach((function(t){s._conversationManager.deleteTagStatus(t.conversationType,t.targetId,[e],t.channelId)})),[2,{code:Ee.SUCCESS}])}}))}))},t.prototype.removeTagsForConversation=function(e,t){return M(this,void 0,void 0,(function(){var n,i,r,s,o,a,u;return w(this,(function(c){switch(c.label){case 0:return this._channel?(n=e.conversationType,i=e.targetId,r=e.channelId,s=t.map((function(e){return{tagId:e}})),o=this._channel.codec.encodeUpdateConversationTag(s,[e]),a=new Or(br[br.delTag],o,this.currentUserId),[4,this._channel.send(a)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return(u=c.sent().code)!==Ee.SUCCESS?[2,{code:u}]:(this._conversationManager.deleteTagStatus(n,i,t,r),[2,{code:Ee.SUCCESS}])}}))}))},t.prototype.getConversationListByTag=function(e,t,n){return M(this,void 0,void 0,(function(){var i,r,s,o,a,u,c,h,l;return w(this,(function(d){switch(d.label){case 0:return r=(i=this).currentUserId,(s=i._channel)?(o=s.codec.encodeOldConversationList({count:n,type:j.PRIVATE,startTime:t}),a=new Or(Ji,o,r),[4,s.send(a,Kt,{currentUserId:r,connectedTime:s.connectedTime})]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return u=d.sent(),c=u.code,h=u.data,l=this._conversationHasTagFilter(e,null==h?void 0:h.list),ge.info(\\\"GetConversationListByTag\\\",l),c!==Ee.SUCCESS?[2,{code:c}]:[2,{code:c,data:l}]}}))}))},t.prototype._conversationHasTagFilter=function(e,t){var n=this,i=[],r=[];function s(e,t){return e.latestMessage&&t.latestMessage?e.latestMessage.sentTime-t.latestMessage.sentTime:0}return t.forEach((function(t){var s=t.conversationType,o=t.targetId,a=t.channelId,u=n._conversationManager.get(s,o,a),c=u.hasMentioned,h=u.mentionedInfo,l=u.lastUnreadTime,d=u.notificationStatus,f=u.isTop,p=u.tags,g=u.unreadMessageCount,_=p&&p[e];if(_){var y=O(O({},t),{hasMentioned:c,mentionedInfo:h,lastUnreadTime:l,notificationStatus:d,isTop:f,unreadMessageCount:g});_.isTop?i.push(O(O({},y),{isTopInTag:!0})):r.push(O(O({},y),{isTopInTag:!1}))}})),A(A([],i.sort(s)),r.sort(s))},t.prototype.getUnreadCountByTag=function(e,t){return M(this,void 0,void 0,(function(){var n;return w(this,(function(i){return this._channel?(n=this._conversationManager.getUnreadCountByTag(e,t),[2,{code:Ee.SUCCESS,data:n}]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}]}))}))},t.prototype.setConversationStatusInTag=function(e,t,n){return M(this,void 0,void 0,(function(){var i,r,s,o,a,u,c,h,l,d;return w(this,(function(f){switch(f.label){case 0:return this._channel?(i=t.targetId,r=t.conversationType,s=t.channelId,o=n.isTop,a=[{tagId:e,isTop:o}],(u=this._conversationManager.get(r,i,s)).tags&&Object.hasOwnProperty.call(u.tags,e)?(c=this._channel.codec.encodeUpdateConversationTag(a,[t]),h=new Or(br[br.addTag],c,this.currentUserId),[4,this._channel.send(h)]):[2,{code:Ee.NO_TAG_IN_CONVER}]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return(l=f.sent().code)!==Ee.SUCCESS?[2,{code:l}]:((d={})[e]={},o&&(d[e].isTop=!0),this._conversationManager.addTagStatus(r,i,d,s),[2,{code:Ee.SUCCESS}])}}))}))},t.prototype.getTagsForConversation=function(e){var t;return M(this,void 0,void 0,(function(){var n,i,r,s;return w(this,(function(o){if(!this._channel)return[2,{code:Ee.RC_NET_CHANNEL_INVALID}];if(n=this._conversationManager.get(e.conversationType,e.targetId,e.channelId),i=this._userSettingManager.getTagsInfo(),r=[],n.tags)for(s in n.tags)r.push({tagId:s,tagName:null===(t=i[s])||void 0===t?void 0:t.tagName});return[2,{code:Ee.SUCCESS,data:r}]}))}))},t.prototype.getBlockConversationList=function(){var e=this._conversationManager.getBlockConversationList();return Promise.resolve({code:Ee.SUCCESS,data:e})},t.prototype.getTopConversationList=function(){var e=this._conversationManager.getTopConversationList();return Promise.resolve({code:Ee.SUCCESS,data:e})},t.prototype.getUnreadMentionedCount=function(e){var t,n;return n=e.conversationType===j.ULTRA_GROUP?(null===(t=this._ultraGroupMap[e.channelId+\\\"_\\\"+e.targetId])||void 0===t?void 0:t.unreadMentionedCount)||0:this._conversationManager.getUnreadMentionedCount(e.channelId,e.conversationType,e.targetId),Promise.resolve({code:Ee.SUCCESS,data:n})},t.prototype.getAllUnreadMentionedCount=function(){var e=this._conversationManager.getAllUnreadMentionedCount();return Promise.resolve({code:Ee.SUCCESS,data:e})},t.prototype.getUltraGroupList=function(){return M(this,void 0,void 0,(function(){var e,t;return w(this,(function(n){return this._isUltraGroupListExist?(e=Object.values(this._ultraGroupMap),e=gs(e),t=It(e),[2,{code:Ee.SUCCESS,data:t}]):[2,{code:Ee.METHOD_NOT_AVAILABLE}]}))}))},t.prototype.getBlockUltraGroupList=function(){if(!this._isUltraGroupListExist)return Promise.resolve({code:Ee.METHOD_NOT_AVAILABLE});var e=Object.values(this._ultraGroupMap),t=[];return e.forEach((function(e){e.notificationStatus===Oe.OPEN&&t.push({conversationType:j.ULTRA_GROUP,targetId:e.targetId,channelId:e.channelId})})),Promise.resolve({code:Ee.SUCCESS,data:t})},t.prototype.getTopUltraGroupList=function(){if(!this._isUltraGroupListExist)return Promise.resolve({code:Ee.METHOD_NOT_AVAILABLE});var e=Object.values(this._ultraGroupMap),t=[];return e.forEach((function(e){!0===e.isTop&&t.push({conversationType:j.ULTRA_GROUP,targetId:e.targetId,channelId:e.channelId})})),Promise.resolve({code:Ee.SUCCESS,data:t})},t.prototype.getUltraGroupUnreadMentionedCountByTargetId=function(e){if(!this._isUltraGroupListExist)return Promise.resolve({code:Ee.METHOD_NOT_AVAILABLE});var t=0;for(var n in this._ultraGroupMap){n.match(/_.*/g)[0].substring(1)===e&&(t+=this._ultraGroupMap[n].unreadMentionedCount)}return Promise.resolve({code:Ee.SUCCESS,data:t})},t.prototype.clearUltraUnreadcount=function(e,t){return void 0===t&&(t=\\\"\\\"),M(this,void 0,void 0,(function(){var n,i,r,s,o;return w(this,(function(a){switch(a.label){case 0:return this._isUltraGroupListExist?this._channel?this._status!==Ie.CONNECTED?[2,Ee.RC_NET_UNAVAILABLE]:(n=Date.now(),i=this._channel.codec.encodeClearUnreadCount({conversationType:j.ULTRA_GROUP,targetId:e,channelId:t},{timestamp:n}),(r=new Rr(br[br.updUgRTime],i,this.currentUserId)).setHeaderQos(ze.AT_LEAST_ONCE),[4,this._channel.send(r)]):[2,Ee.RC_NET_CHANNEL_INVALID]:[2,Promise.resolve(Ee.METHOD_NOT_AVAILABLE)];case 1:return(s=a.sent().code)===Ee.SUCCESS&&(o=this._ultraGroupMap[t+\\\"_\\\"+e])&&(o.unreadMessageCount=0,o.unreadMentionedCount=0,o.lastReadTime=n),[2,s]}}))}))},t.prototype._getUltraGroupList=function(e){return M(this,void 0,void 0,(function(){var t,n,i,r,s,o,a,u,c,h,l,d,f,p=this;return w(this,(function(g){switch(g.label){case 0:return this._channel&&this._status===Ie.CONNECTED?(!1,t=this._channel.codec.encodeUltraGroup(e,false),n=new Or(br[br.pullUgSes],t,this.currentUserId),[4,this._channel.send(n,Kt,{currentUserId:this.currentUserId,conversationType:j.ULTRA_GROUP})]):[2];case 1:return i=g.sent(),r=i.code,s=i.data,r===Ee.SUCCESS&&s?(a=(null==s?void 0:s.list)||[],u=null==s?void 0:s.isFinished,a.forEach((function(e){e.notificationStatus=Oe.CLOSE,e.isTop=!1,p._ultraGroupMap[e.channelId+\\\"_\\\"+e.targetId]=e})),!1!==u?[3,2]:(c=a.length>0&&a[a.length-1].versionTime||0,this._getUltraGroupList(c),[3,4])):(ge.warn(\\\"pull super conversation  failed, code:\\\",r,\\\", data:\\\",s,\\\"retrying...\\\"),o=setTimeout((function(){p._firstPullUltraGroupTime=e,p._getUltraGroupList(e),clearTimeout(o)}),3e3),[2]);case 2:return[4,this.pullConversationStatus(this._firstPullUltraGroupTime)];case 3:h=g.sent(),l=h.code,d=h.data,l!==Ee.SUCCESS&&ge.warn(\\\"pullConversationStatus fail code: \\\"+l+\\\", data: \\\"+d),f=Object.values(this._ultraGroupMap),f=gs(f),this._isUltraGroupListExist=!0,this._watcher.ultraGroupEnable(It(f)),0===this._firstPullUltraGroupTime&&this._syncUltraMsg(this._lastSyncUltraMsgTimeStamp),g.label=4;case 4:return[2]}}))}))},t.prototype._startUltraSyncInterval=function(){var e=this,t=function(){e._ultraGroupTimer=setTimeout((function(){Date.now()-e._lastSyncUltraMsgLocalTimeStamp>=18e4&&e._syncUltraMsg(e._lastSyncUltraMsgTimeStamp),e._stopUltraSyncInterval(),t()}),3e4)};this._lastSyncUltraMsgLocalTimeStamp=Date.now(),this._syncUltraMsg(0),t()},t.prototype._stopUltraSyncInterval=function(){-1!==this._ultraGroupTimer&&(clearTimeout(this._ultraGroupTimer),this._ultraGroupTimer=-1)},t.prototype._syncUltraMsg=function(e){var t;return M(this,void 0,void 0,(function(){var n,i,r,s,o,a,u,c,h,l,d,f,p=this;return w(this,(function(g){switch(g.label){case 0:return this._channel&&this._status===Ie.CONNECTED?this._isUltraPulling?[2]:(ge.info(\\\"start pull ultra msg, time: \\\"+e),this._isUltraPulling=!0,n=this._channel.codec.encodeSuperSyncMsg(e),i=new Or(br[br.pullUgMsg],n,this.currentUserId),[4,this._channel.send(i,Pt,{currentUserId:this.currentUserId,conversation:{conversationType:j.ULTRA_GROUP}})]):[2];case 1:if(r=g.sent(),s=r.code,o=r.data,ge.info(\\\"end pull ultra msg, code: \\\"+s+\\\", syncTime: \\\"+(null==o?void 0:o.syncTime)+\\\", count: \\\"+(null===(t=null==o?void 0:o.list)||void 0===t?void 0:t.length)),this._lastSyncUltraMsgLocalTimeStamp=Date.now(),s!==Ee.SUCCESS||!o)return ge.warn(\\\"sync super  message  failed, code:\\\",s,\\\", data:\\\",o),this._isUltraPulling=!1,[2];if(this._isUltraPulling=!1,a=o.list,u=o.syncTime,c=o.finished,!this._isUltraGroupListExist)return ge.info(\\\"init getUltraGroupList\\\"),this._firstPullUltraGroupTime=0,this._getUltraGroupList(0),this._lastSyncUltraMsgTimeStamp=u,[2];for(f in h={},l=[],a.forEach((function(e){var t,n,i,r=e.targetId,s=e.content,o=e.messageType,a=e.messageUId,c=e.channelId,d=e.isCounted;if(p._ultraMsgMap[a])delete p._ultraMsgMap[a];else{var f=0;((null===(t=null==s?void 0:s.mentionedInfo)||void 0===t?void 0:t.type)===we.ALL||(null===(i=null===(n=null==s?void 0:s.mentionedInfo)||void 0===n?void 0:n.userIdList)||void 0===i?void 0:i.includes(p.currentUserId)))&&(f=1);var g=p._ultraGroupMap[c+\\\"_\\\"+r];if(g)d&&(o===Se.RECALL?g.unreadMessageCount>0&&(g.unreadMessageCount-=1):(g.unreadMessageCount+=1,g.unreadMentionedCount+=f)),g.versionTime=u,g.latestMessage=e,h[c+\\\"_\\\"+r]=g;else{var _={conversationType:j.ULTRA_GROUP,targetId:r,channelId:c,unreadMessageCount:1,unreadMentionedCount:f,versionTime:u,latestMessage:e,notificationStatus:Oe.CLOSE,isTop:!1};p._ultraGroupMap[c+\\\"_\\\"+r]=_,h[c+\\\"_\\\"+r]=_}l.push(e)}})),Object.keys(h).length>0&&(ge.info(\\\"notice ultragroups\\\"),d=Object.values(h),d=gs(d),this._watcher.conversation(It(d))),ge.info(\\\"notice ultragroup message\\\"),this._watcher.batchMessage(l),this._ultraGroupTimeQue=this._ultraGroupTimeQue.filter((function(e){return e>u})),this._ultraMsgMap)this._ultraMsgMap[f]<u&&delete this._ultraMsgMap[f];return!1===c?this._syncUltraMsg(u):a&&a.length>0&&(this._lastSyncUltraMsgTimeStamp=u),this._ultraGroupTimeQue.length>0&&this._syncUltraMsg(this._lastSyncUltraMsgTimeStamp),[2]}}))}))},t.prototype.sendUltraMessage=function(e,t){return M(this,void 0,void 0,(function(){var n,i,r,s,o,a,u,c,h,l;return w(this,(function(d){switch(d.label){case 0:return this._channel?this._status!==Ie.CONNECTED?[2,{code:Ee.RC_NET_UNAVAILABLE}]:(\\\"RC:SRSMsg\\\"===t.messageType&&ge.warn(\\\"ultra group -> direction message convert to message\\\"),t=this._handleMsgProperties(t,!0),n=this._channel.codec.encodeUpMsg({conversationType:j.ULTRA_GROUP,targetId:e},t),(i=new Rr(br[br.ugMsg],n,e)).setHeaderQos(ze.AT_LEAST_ONCE),r=Date.now()-this._localConnectedTime+this._connectedTime,s=ps(j.ULTRA_GROUP,e,O({},t),\\\"\\\",r,this.currentUserId),[4,this._channel.send(i)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return o=d.sent(),a=o.code,u=o.data,a!==Ee.SUCCESS?[2,{code:a,data:s}]:(c=u,s.sentTime=c.timestamp,s.messageUId=c.messageUId,this._ultraMsgMap[c.messageUId]=c.timestamp,h=t.channelId||\\\"\\\",(l=this._ultraGroupMap[h+\\\"_\\\"+e])?l.latestMessage=s:(l={conversationType:j.ULTRA_GROUP,targetId:e,channelId:h,unreadMessageCount:0,unreadMentionedCount:0,versionTime:s.sentTime,latestMessage:s,notificationStatus:Oe.CLOSE,isTop:!1},this._ultraGroupMap[h+\\\"_\\\"+e]=l),this._watcher.conversation(It([l])),[2,{code:a,data:s}])}}))}))},t.prototype.sendUltraGroupTypingStatus=function(e,t){return M(this,void 0,void 0,(function(){var n,i,r,s,o,a;return w(this,(function(u){switch(u.label){case 0:return this._channel?this._status!==Ie.CONNECTED?[2,{code:Ee.RC_NET_UNAVAILABLE}]:(n=e.conversationType,i=e.channelId,r=e.targetId,s=this._channel.codec.encodeOperateStatus(r,n,i||\\\"\\\",t||0),(o=new Rr(br[br.operate],s,r)).setHeaderQos(ze.AT_LEAST_ONCE),[4,this._channel.send(o)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return(a=u.sent().code)!==Ee.SUCCESS?[2,{code:a,msg:Ee[a]}]:[2,{code:a}]}}))}))},t.prototype.getUltraGroupMessageListByMessageUId=function(e){return M(this,void 0,void 0,(function(){var t,n,i,r,s,o,a;return w(this,(function(u){switch(u.label){case 0:return this._channel?this._status!==Ie.CONNECTED?[2,{code:Ee.RC_NET_UNAVAILABLE}]:e.messages&&e.messages.length<1||e.messages&&e.messages.length>20?[2,{code:Ee.MSG_LIMIT_ERROR}]:(t={},e.messages.forEach((function(e){t[e.messageUId]=void 0})),n=this._channel.codec.encodeMsgQuery(e),(i=new Or(br[br.qryMsg],n,this.currentUserId)).setHeaderQos(ze.AT_LEAST_ONCE),[4,this._channel.send(i,ui)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return r=u.sent(),s=r.code,o=r.data,s!==Ee.SUCCESS?[2,{code:s,msg:Ee[s]}]:(a=(o||{}).list,Array.isArray(a)&&a.forEach((function(e){var n=e.messageUId;t[n]=e})),[2,{code:0,data:t}])}}))}))},t.prototype._pullOperateStatusNotify=function(e){if(this._channel){var t=this._channel.codec.decodeByPBName(e.data,hi),n=t.conversationType,i=t.info,r=t.summary;ge.info(\\\"s_opNtf -> type: \\\"+n+\\\", info: \\\"+i+\\\", summary: \\\"+r),this._watcher.operateStatus(t)}},t.prototype.expandUltraMessage=function(e){return M(this,void 0,void 0,(function(){var t,n,i,r,s,o;return w(this,(function(a){switch(a.label){case 0:return this._channel?this._status!==Ie.CONNECTED?[2,{code:Ee.RC_NET_UNAVAILABLE}]:(t=this._channel.codec.encodeExpandUltraMessage(e,this.currentUserId),(n=new Rr(br[br.upMsgEx],t,e.targetId)).setHeaderQos(ze.AT_LEAST_ONCE),[4,this._channel.send(n)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return i=a.sent(),r=i.code,s=i.data,r!==Ee.SUCCESS?[2,{code:r,msg:Ee[r]}]:(o=s,this._ultraMsgMap[o.messageUId]=o.timestamp,[2,{code:r}])}}))}))},t.prototype.modifyMessage=function(e){return M(this,void 0,void 0,(function(){var t,n,i,r,s,o;return w(this,(function(a){switch(a.label){case 0:return this._channel?this._status!==Ie.CONNECTED?[2,{code:Ee.RC_NET_UNAVAILABLE}]:(t=this._channel.codec.encodemodifyMessage(e,this.currentUserId),(n=new Rr(br[br.modifyMsg],t,e.targetId)).setHeaderQos(ze.AT_LEAST_ONCE),[4,this._channel.send(n)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return i=a.sent(),r=i.code,s=i.data,r!==Ee.SUCCESS?[2,{code:r,msg:Ee[r]}]:(o=s,this._ultraMsgMap[o.messageUId]=o.timestamp,[2,{code:r}])}}))}))},t.prototype._pullUltraChangeMessageList=function(e){return M(this,void 0,void 0,(function(){var t,n,i,r,s,o,a,u,c,h,l,d,f,p,g,_,y,m=this;return w(this,(function(v){switch(v.label){case 0:return this._channel?this._status!==Ie.CONNECTED||this._isPullingUltraChangeMessage?[2]:(this._isPullingUltraChangeMessage=!0,t=this._channel.codec.encodeQueryMsgChange(e),(n=new Rr(br[br.qryMsgChange],t,this.currentUserId)).setHeaderQos(ze.AT_LEAST_ONCE),[4,this._channel.send(n,si)]):[2];case 1:if(i=v.sent(),r=i.code,s=i.data,this._isPullingUltraChangeMessage=!1,r!==Ee.SUCCESS)return[2];for(p in a=(o=s||{}).hasNext,u=o.list,c=(null==s?void 0:s.syncTime)||0,h=[],l={},Array.isArray(u)&&u.forEach((function(e){var t=e,n=t.targetId,i=t.conversationType,r=t.sendTime,s=t.messageUId,o=t.changeType,a=t.operatorId,u=e.channelId||\\\"\\\",c=i+\\\"_\\\"+n,d=s+\\\"_\\\"+u+\\\"_\\\"+r,f=l[c];if(f)f.add(d);else{var p=new Set([d]);l[c]=p}3!==o?m._ultraMsgChangeMap[s]=o:h.push({targetId:n,conversationType:i,sendTime:r,messageUId:s,senderUserId:a,channelId:u})})),Array.isArray(h)&&h.length>0&&this._watcher.ultraGroupMessageRecalled(h),d=function(e){var t=e.split(\\\"_\\\"),n=t.shift(),i=t.join(\\\"_\\\"),r=l[e],s=[];r.forEach((function(e){var t=e.split(\\\"_\\\"),n=t[0],i=t[1],r=t[2];s.push({sendTime:Number(r),messageUId:n,channelId:i})}));var o={targetId:i,conversationType:Number(n),messages:s};f._pullUltraMessageList(o)},f=this,l)d(p);for(_ in g=this._pullUltraChangeMessageQue.filter((function(e){return e>c})),this._pullUltraChangeMessageQue.length=0,(y=this._pullUltraChangeMessageQue).push.apply(y,g),this._ultraMsgMap)this._ultraMsgMap[_]<c&&delete this._ultraMsgMap[_];return a?this._pullUltraChangeMessageList(c):this._lastPullingUltraChangeMessageTime=c,[2]}}))}))},t.prototype._pullUltraMessageList=function(e){return M(this,void 0,void 0,(function(){var t,n,i,r,s,o,a,u,c=this;return w(this,(function(h){switch(h.label){case 0:return this._channel?this._status!==Ie.CONNECTED?[2,{code:Ee.RC_NET_UNAVAILABLE}]:(t=this._channel.codec.encodeMsgQuery(e),(n=new Or(br[br.qryMsg],t,this.currentUserId)).setHeaderQos(ze.AT_LEAST_ONCE),[4,this._channel.send(n,ui)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return i=h.sent(),r=i.code,s=i.data,r!==Ee.SUCCESS?[2,{code:r,msg:Ee[r]}]:(o=(s||{}).list,a=[],u=[],Array.isArray(o)&&o.forEach((function(e){var t=e.targetId,n=e.channelId,i=e.messageUId,r=c._ultraGroupMap[n+\\\"_\\\"+t];r&&r.latestMessage.messageUId===e.messageUId&&(r.latestMessage=e);var s=c._ultraMsgChangeMap[i+\\\"\\\"];1===s?a.push(e):2===s&&u.push(e)})),a.length>0&&this._watcher.ultraGroupMessageExpansionUpdated(a||[]),u.length>0&&this._watcher.ultraGroupMessageModified(u||[]),[2])}}))}))},t.prototype.getUltraHistoryMsg=function(e,t){return M(this,void 0,void 0,(function(){var n,i,r,s,o;return w(this,(function(a){switch(a.label){case 0:return this._channel?this._status!==Ie.CONNECTED?[2,{code:Ee.RC_NET_UNAVAILABLE}]:(n=this._channel.codec.encodeGetHistoryMsg(e,t),i=new Or(br[br.qryUgMsg],n,this.currentUserId),[4,this._channel.send(i,Ft,{currentUserId:this.currentUserId,conversation:{conversationType:j.ULTRA_GROUP,targetId:e}})]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return r=a.sent(),s=r.code,o=r.data,s===Ee.SUCCESS&&o?[2,{code:s,data:o}]:(ge.warn(\\\"get super history message  failed, code:\\\",s,\\\", data:\\\",o),[2,{code:s}])}}))}))},t.prototype.searchUltraGroupMessages=function(e){return M(this,void 0,void 0,(function(){return w(this,(function(e){return this._channel?this._status!==Ie.CONNECTED?[2,{code:Ee.RC_NET_UNAVAILABLE}]:[2,{code:Ee.SUCCESS}]:[2,{code:Ee.RC_NET_CHANNEL_INVALID}]}))}))},t.prototype.getAllConversationState=function(){return Promise.resolve({code:Ee.SUCCESS,data:this._conversationManager.getAllConversationState()})},t.prototype.joinRTCRoom=function(e,t,n,i,r,s){return M(this,void 0,void 0,(function(){var o,a;return w(this,(function(u){return this._channel?(o=this._channel.codec.encodeJoinRTCRoom(t,n,i,r,s),a=new Or(br[br.rtcRJoin_data],o,e),[2,this._channel.send(a,nn)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}]}))}))},t.prototype.quitRTCRoom=function(e){return M(this,void 0,void 0,(function(){var t,n;return w(this,(function(i){switch(i.label){case 0:return this._channel?(t=this._channel.codec.encodeQuitRTCRoom(),n=new Or(br[br.rtcRExit],t,e),[4,this._channel.send(n)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return[2,i.sent().code]}}))}))},t.prototype.rtcPing=function(e,t,n){return M(this,void 0,void 0,(function(){var i,r;return w(this,(function(s){switch(s.label){case 0:return this._channel?(i=this._channel.codec.encodeJoinRTCRoom(t,n),r=new Or(br[br.rtcPing],i,e),[4,this._channel.send(r)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return[2,s.sent().code]}}))}))},t.prototype.getRTCRoomInfo=function(e){return M(this,void 0,void 0,(function(){var t,n;return w(this,(function(i){return this._channel?(t=this._channel.codec.encodeGetRTCRoomInfo(),n=new Or(br[br.rtcRInfo],t,e),[2,this._channel.send(n,gn)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}]}))}))},t.prototype.getRTCUserInfoList=function(e){return M(this,void 0,void 0,(function(){var t,n,i,r,s;return w(this,(function(o){switch(o.label){case 0:return this._channel?(t=this._channel.codec.encodeGetRTCRoomInfo(),n=new Or(br[br.rtcUData],t,e),[4,this._channel.send(n,nn)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return i=o.sent(),r=i.code,s=i.data,[2,{code:r,data:s?{users:s.users}:s}]}}))}))},t.prototype.setRTCUserInfo=function(e,t,n){return M(this,void 0,void 0,(function(){var i,r;return w(this,(function(s){switch(s.label){case 0:return this._channel?(i=this._channel.codec.encodeSetRTCUserInfo(t,n),r=new Or(br[br.rtcUPut],i,e),[4,this._channel.send(r)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return[2,s.sent().code]}}))}))},t.prototype.removeRTCUserInfo=function(e,t){return M(this,void 0,void 0,(function(){var n,i;return w(this,(function(r){switch(r.label){case 0:return this._channel?(n=this._channel.codec.encodeRemoveRTCUserInfo(t),i=new Rr(br[br.rtcUDel],n,e),[4,this._channel.send(i)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return[2,r.sent().code]}}))}))},t.prototype.setRTCData=function(e,t,n,i,r,s){return M(this,void 0,void 0,(function(){var o,a;return w(this,(function(u){switch(u.label){case 0:return this._channel?(o=this._channel.codec.encodeSetRTCData(t,n,i,r,s),a=new Rr(br[br.rtcSetData],o,e),[4,this._channel.send(a)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return[2,u.sent().code]}}))}))},t.prototype.setRTCTotalRes=function(e,t,n,i,r){return M(this,void 0,void 0,(function(){var s,o;return w(this,(function(a){switch(a.label){case 0:return this._channel?(s=this._channel.codec.encodeUserSetRTCData(t,n,i,r),o=new Or(br[br.userSetData],s,e),[4,this._channel.send(o)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return[2,a.sent().code]}}))}))},t.prototype.setRTCCDNUris=function(e,t,n){return M(this,void 0,void 0,(function(){var i,r;return w(this,(function(s){switch(s.label){case 0:return this._channel?(i=this._channel.codec.encodeUserSetRTCCDNUris(t,n),r=new Or(br[br.userSetData],i,e),[4,this._channel.send(r)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return[2,s.sent().code]}}))}))},t.prototype.getRTCData=function(e,t,n,i){if(!this._channel)return Promise.resolve({code:Ee.RC_NET_CHANNEL_INVALID});var r=this._channel.codec.encodeGetRTCData(t,n,i),s=new Or(br[br.rtcQryData],r,e);return this._channel.send(s,ln)},t.prototype.removeRTCData=function(e,t,n,i,r){return M(this,void 0,void 0,(function(){var s,o;return w(this,(function(a){switch(a.label){case 0:return this._channel?(s=this._channel.codec.encodeRemoveRTCData(t,n,i,r),o=new Rr(br[br.rtcDelData],s,e),[4,this._channel.send(o)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return[2,a.sent().code]}}))}))},t.prototype.setRTCOutData=function(e,t,n,i){throw new Error(\\\"JSEngine's method not implemented.\\\")},t.prototype.getRTCOutData=function(e,t){throw new Error(\\\"JSEngine's method not implemented.\\\")},t.prototype.getRTCToken=function(e,t,n){return M(this,void 0,void 0,(function(){var i,r;return w(this,(function(s){return this._channel?(i=this._channel.codec.encodeJoinRTCRoom(t,n),r=new Or(br[br.rtcToken],i,e),[2,this._channel.send(r,hn)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}]}))}))},t.prototype.setRTCState=function(e,t){return M(this,void 0,void 0,(function(){var n,i;return w(this,(function(r){switch(r.label){case 0:return this._channel?(n=this._channel.codec.encodeSetRTCState(t),i=new Or(br[br.rtcUserState],n,e),[4,this._channel.send(i)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return[2,r.sent().code]}}))}))},t.prototype.getRTCUserInfo=function(e){return M(this,void 0,void 0,(function(){return w(this,(function(e){throw new Error(\\\"Method not implemented.\\\")}))}))},t.prototype.getRTCUserList=function(e){if(!this._channel)return Promise.resolve({code:Ee.RC_NET_CHANNEL_INVALID});var t=this._channel.codec.encodeGetRTCRoomInfo(),n=new Or(br[br.rtcUList],t,e);return this._channel.send(n,nn)},t.prototype.joinLivingRoomAsAudience=function(e,t,n){return void 0===t&&(t=xe.LIVE),M(this,void 0,void 0,(function(){var i,r,s,o,a,u,c,h;return w(this,(function(l){switch(l.label){case 0:return this._channel?(i=this._channel.codec.encodeJoinRTCRoom(t,n),r=new Or(br[br.viewerJoinR],i,e),[4,this._channel.send(r,mi)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return s=l.sent(),o=s.code,a=s.data,o!==Ee.SUCCESS?[2,{code:o}]:(c=(u=a).rtcToken,h=u.entries,[2,{code:o,data:{token:c,kvEntries:h}}])}}))}))},t.prototype.quitLivingRoomAsAudience=function(e){return M(this,void 0,void 0,(function(){var t,n,i;return w(this,(function(r){switch(r.label){case 0:return this._channel?(t=this._channel.codec.encodeQuitRTCRoom(),n=new Or(br[br.viewerExitR],t,e),[4,this._channel.send(n)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return i=r.sent().code,this._rtcKVManager.reset(),[2,i]}}))}))},t.prototype.rtcIdentityChange=function(e,t,n){return M(this,void 0,void 0,(function(){var i,r,s,o,a;return w(this,(function(u){switch(u.label){case 0:return this._channel?(i=this._channel.codec.encodeIdentityChangeInfo(t,n),r=new Or(br[br.rtcIdentityChange],i,e),[4,this._channel.send(r,nn)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return s=u.sent(),o=s.code,a=s.data,o!==Ee.SUCCESS?[2,{code:o}]:[2,{code:o,data:a}]}}))}))},t.prototype.pullRTCRoomEntry=function(e,t){return M(this,void 0,void 0,(function(){var t,n,i,r,s,o,a,u,c;return w(this,(function(h){switch(h.label){case 0:return n=(t=this)._channel,i=t.currentUserId,n?(ge.info(\\\"audience in room start pull KV\\\"),r=n.codec.encodePullRTCRoomKV(e,0),s=new Or(br[br.rtcPullKv],r,i),[4,n.send(s,gi)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return o=h.sent(),a=o.code,u=o.data,ge.info(\\\"audience in room end pull KV, code: \\\"+a+\\\", data: \\\"+JSON.stringify(u||{})),a===Ee.SUCCESS?(c=u.kvEntries,this._watcher.onRTCDataChange(c,e),[2,{code:a,data:u}]):[2,{code:a}]}}))}))},t.prototype.getRTCJoinedUserInfo=function(e){return M(this,void 0,void 0,(function(){var t,n,i,r,s,o,a,u;return w(this,(function(c){switch(c.label){case 0:return n=(t=this)._channel,i=t.currentUserId,n?(r=n.codec.encodeQueryUserJoinedInfo(e),s=new Or(br[br.rtcQueryJoined],r,i),[4,n.send(s,yi)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return o=c.sent(),a=o.code,u=o.data,a===Ee.SUCCESS?[2,{code:a,data:u}]:[2,{code:a}]}}))}))},t.prototype.getDeviceId=function(){return ds(this.runtime)},t.prototype.requestRoomPK=function(e){return M(this,void 0,void 0,(function(){var t,n,i;return w(this,(function(r){switch(r.label){case 0:return this._channel?(t=this._channel.codec.encodeRequestRoomPK(e),n=new Or(br[br.rtcInvite],t,e.roomId),[4,this._channel.send(n)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return i=r.sent().code,this._rtcKVManager.reset(),[2,i]}}))}))},t.prototype.cancelRoomPK=function(e){return M(this,void 0,void 0,(function(){var t,n,i;return w(this,(function(r){switch(r.label){case 0:return this._channel?(t=this._channel.codec.encodeCancelRoomPK(e),n=new Or(br[br.rtcCancelInvite],t,e.roomId),[4,this._channel.send(n)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return i=r.sent().code,this._rtcKVManager.reset(),[2,i]}}))}))},t.prototype.responseRoomPK=function(e){return M(this,void 0,void 0,(function(){var t,n,i;return w(this,(function(r){switch(r.label){case 0:return this._channel?(t=this._channel.codec.encodeResponseRoomPK(e),n=new Or(br[br.rtcInviteAnswer],t,e.roomId),[4,this._channel.send(n)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return i=r.sent().code,this._rtcKVManager.reset(),[2,i]}}))}))},t.prototype.endRoomPK=function(e){return M(this,void 0,void 0,(function(){var t,n,i;return w(this,(function(r){switch(r.label){case 0:return this._channel?(t=this._channel.codec.encodeEndRoomPK(e),n=new Or(br[br.rtcEndInvite],t,e.roomId),[4,this._channel.send(n)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return i=r.sent().code,this._rtcKVManager.reset(),[2,i]}}))}))},t.prototype.bindRTCRoomForChatroom=function(e){return M(this,void 0,void 0,(function(){var t,n,i,r;return w(this,(function(s){switch(s.label){case 0:return this._channel?(t=e.chatRoomId,n=this._channel.codec.encodebindRTCRoomForChatroom(e),i=new Or(br[br.setRtcRoomId],n,t),[4,this._channel.send(i)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return r=s.sent(),[2,r.code]}}))}))},t.prototype.callExtra=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return Promise.resolve({code:Ee.EXTRA_METHOD_UNDEFINED})},t.prototype.getConversationListWithAllChannel=function(){throw new Error(\\\"Method not implemented.\\\")},t.prototype.getConversationListWithAllChannelByPage=function(e,t){throw new Error(\\\"Method not implemented.\\\")},t.prototype.clearConversations=function(){throw new Error(\\\"Method not implemented.\\\")},t.prototype.setUserStatusListener=function(e,t){throw new Error(\\\"Method not implemented.\\\")},t.prototype.setUserStatus=function(e){throw new Error(\\\"Method not implemented.\\\")},t.prototype.subscribeUserStatus=function(e){throw new Error(\\\"Method not implemented.\\\")},t.prototype.getUserStatus=function(e){throw new Error(\\\"Method not implemented.\\\")},t.prototype.addToBlacklist=function(e){throw new Error(\\\"Method not implemented.\\\")},t.prototype.removeFromBlacklist=function(e){throw new Error(\\\"Method not implemented.\\\")},t.prototype.getBlacklist=function(){throw new Error(\\\"Method not implemented.\\\")},t.prototype.getBlacklistStatus=function(e){throw new Error(\\\"Method not implemented.\\\")},t.prototype.insertMessage=function(e,t,n){throw new Error(\\\"Method not implemented.\\\")},t.prototype.deleteMessages=function(e){throw new Error(\\\"Method not implemented.\\\")},t.prototype.deleteMessagesByTimestamp=function(e,t,n,i,r){throw new Error(\\\"Method not implemented.\\\")},t.prototype.clearMessages=function(e,t,n){throw new Error(\\\"Method not implemented.\\\")},t.prototype.getMessage=function(e){throw new Error(\\\"Method not implemented.\\\")},t.prototype.setMessageContent=function(e,t,n){throw new Error(\\\"Method not implemented.\\\")},t.prototype.setMessageSearchField=function(e,t,n){throw new Error(\\\"Method not implemented.\\\")},t.prototype.searchConversationByContent=function(e,t,n,i){throw new Error(\\\"Method not implemented.\\\")},t.prototype.searchMessageByContent=function(e,t,n,i,r,s){throw new Error(\\\"Method not implemented.\\\")},t.prototype.getUnreadMentionedMessages=function(e,t){throw new Error(\\\"Method not implemented.\\\")},t.prototype.setMessageSentStatus=function(e,t){throw new Error(\\\"Method not implemented.\\\")},t.prototype.setMessageReceivedStatus=function(e,t){throw new Error(\\\"Method not implemented.\\\")},t.prototype.clearUnreadCountByTimestamp=function(e,t,n,i){throw new Error(\\\"Method not implemented.\\\")},t.prototype.getConversationNotificationStatus=function(e,t,n){var i=this._conversationManager.get(e,t,n);return i?Promise.resolve({code:Ee.SUCCESS,data:i.notificationStatus}):Promise.resolve({code:Ee.CONVER_GET_ERROR})},t.prototype.getRemoteHistoryMessages=function(e,t,n,i,r,s){return this.getHistoryMessage(e,t,n,i,r,s)},t}(Gr),ys=function(){function e(e){this._context=e}return e.prototype.__getContext=function(){return this._context},e.prototype.getNaviInfo=function(){return this._context.getInfoFromCache()},e.prototype.getCoreVersion=function(){return this._context.coreVersion},e.prototype.getAPIVersion=function(){return this._context.apiVersion},e.prototype.getAppkey=function(){return this._context.appkey},e.prototype.getCurrentId=function(){return this._context.getCurrentUserId()},e.prototype.getConnectionStatus=function(){return this._context.getConnectionStatus()},e.prototype.getDeviceId=function(){return this._context.getDeviceId()},e.prototype.sendMessage=function(e,t,n){return this._context.sendMessage(e,t,n)},e.prototype.registerMessageType=function(e,t,n,i){void 0===i&&(i=[]),this._context.registerMessageType(e,t,n,i)},e.prototype.getServerTime=function(){return this._context.getServerTime()},e.prototype.getRTCJoinedUserInfo=function(e){return this._context.getRTCJoinedUserInfo(e)},e}(),ms=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return N(t,e),t.prototype.getNaviInfo=function(){return this._context.getInfoFromCache()},t.prototype.joinRTCRoom=function(e,t,n,i,r,s){return this._context.joinRTCRoom(e,t,n,i,r,s)},t.prototype.quitRTCRoom=function(e){return this._context.quitRTCRoom(e)},t.prototype.rtcPing=function(e,t,n){return this._context.rtcPing(e,t,n)},t.prototype.getRTCRoomInfo=function(e){return this._context.getRTCRoomInfo(e)},t.prototype.getRTCUserInfoList=function(e){return this._context.getRTCUserInfoList(e)},t.prototype.getRTCUserInfo=function(e){return this._context.getRTCUserInfo(e)},t.prototype.setRTCUserInfo=function(e,t,n){return this._context.setRTCUserInfo(e,t,n)},t.prototype.removeRTCUserInfo=function(e,t){return this._context.removeRTCUserInfo(e,t)},t.prototype.setRTCData=function(e,t,n,i,r,s){return this._context.setRTCData(e,t,n,i,r,s)},t.prototype.setRTCTotalRes=function(e,t,n,i,r){return this._context.setRTCTotalRes(e,t,n,i,r)},t.prototype.setRTCCDNUris=function(e,t,n){return this._context.setRTCCDNUris(e,t,n)},t.prototype.getRTCData=function(e,t,n,i){return this._context.getRTCData(e,t,n,i)},t.prototype.removeRTCData=function(e,t,n,i,r){return this._context.removeRTCData(e,t,n,i,r)},t.prototype.setRTCOutData=function(e,t,n,i){return this._context.setRTCOutData(e,t,n,i)},t.prototype.getRTCOutData=function(e,t){return this._context.getRTCOutData(e,t)},t.prototype.getRTCToken=function(e,t,n){return this._context.getRTCToken(e,t,n)},t.prototype.setRTCState=function(e,t){return this._context.setRTCState(e,t)},t.prototype.getRTCUserList=function(e){return this._context.getRTCUserList(e)},t.prototype.joinLivingRoomAsAudience=function(e,t,n){return this._context.joinLivingRoomAsAudience(e,t,n)},t.prototype.quitLivingRoomAsAudience=function(e){return this._context.quitLivingRoomAsAudience(e)},t.prototype.rtcIdentityChange=function(e,t,n){return this._context.rtcIdentityChange(e,t,n)},t.prototype.requestRoomPK=function(e){return this._context.requestRoomPK(e)},t.prototype.cancelRoomPK=function(e){return this._context.cancelRoomPK(e)},t.prototype.responseRoomPK=function(e){return this._context.responseRoomPK(e)},t.prototype.endRoomPK=function(e){return this._context.endRoomPK(e)},t}(ys),vs=function(){function e(){}return e.compress=function(e){for(var t=this,n={},i=0;i<e.length-1;i++){var r=e.charAt(i)+e.charAt(i+1);n.hasOwnProperty(r)?n[r].push(i):n[r]=[i]}for(var s=[],o=[],a=function(){if(o.length>0){var e=o.join(\\\"\\\");if(o=[],e.length>26){var n=t.numberEncode(e.length),i=String.fromCharCode(t.dataType.NormalExt|n.length);s.push(i+n)}else{var r=String.fromCharCode(t.dataType.Normal|e.length);s.push(r)}s.push(e)}},u=0;u<e.length;){var c=t.indexOf(n,e,u);if(c.length<2)o.push(e.charAt(u++));else if(c.length<4)o.push(e.substr(u,c.length)),u+=c.length;else{var h=t.numberEncode(u-c.offset),l=t.numberEncode(c.length);if(h.length+l.length>=c.length)o.push(e.substr(u,c.length)),u+=c.length;else{a();var d=String.fromCharCode(t.dataType.Compressed|h.length<<2|l.length);s.push(d+h+l),u+=c.length}}}a();var f=t.numberEncode(e.length),p=String.fromCharCode(t.dataType.Tail|f.length);return s.push(p+f),s.join(\\\"\\\")},e.uncompress=function(e){var t=this,n=0,i=\\\"\\\";e:do{var r=e.charCodeAt(n++),s=r&t.dataType.Mark,o=15&r,a=void 0;switch(s){case t.dataType.Compressed:var u=o>>2,c=3&o;if(0===u||0===c)throw new Error(\\\"Data parsing error,at \\\"+n);var h=t.numberDecode(e.substr(n,u)),l=t.numberDecode(e.substr(n+=u,c));if((h=i.length-h)+l>i.length)throw new Error(\\\"Data parsing error,at \\\"+n);n+=c,i+=i.substr(h,l);break;case t.dataType.Tail:if((a=t.numberDecode(e.substr(n,o)))!==i.length)throw console.log(i.length),console.log(a),new Error(\\\"Data parsing error,at \\\"+n);n+=o;break e;case t.dataType.NormalExt:a=t.numberDecode(e.substr(n,o)),i+=e.substr(n+=o,a),n+=a;break;case t.dataType.Normal:i+=e.substr(n,o),n+=o;break;case t.dataType.Mark:if(o>10)throw new Error(\\\"Data parsing error,at \\\"+n);i+=e.substr(n,16+o),n+=16+o;break;default:throw new Error(\\\"Data parsing error,at \\\"+n+\\\" header:\\\"+s)}}while(n<e.length);return i},e.indexOf=function(e,t,n){var i={length:0,offset:-1};if(t.length,n>=t.length-1)return i;var r=e[t.charAt(n)+t.charAt(n+1)];if(r[0]===n)return i;for(var s=t.length-n,o=0,a=r.length;o<a;o++){var u=r[o],c=n-u;if(!(c>this.max)){var h=Math.min(s,c);if(h<=i.length)break;if(!(i.length>2&&t.charAt(u+i.length-1)!==t.charAt(n+i.length-1))){for(var l=2,d=l;d<h&&t.charAt(u+d)===t.charAt(n+d);d++)l++;l>=i.length&&(i.length=l,i.offset=u)}}}return i},e.numberEncode=function(e){var t=this,n=[],i=0;do{i=e%t.scale,n.push(t.chars.charAt(i)),e=(e-i)/t.scale}while(e>0);return n.join(\\\"\\\")},e.numberDecode=function(e){for(var t=0,n=0,i=e.length-1;i>=0;i--){if(-1===(n=this.chars.indexOf(e.charAt(i))))throw new Error('decode number error, data is \\\"'+e+'\\\"');t=t*this.scale+n}return t},e.dataType={Tail:48,Compressed:64,NormalExt:80,Normal:96,Mark:112},e.chars=\\\"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\\\",e.scale=e.chars.length,e.max=238327,e}(),Es=1,Ts=!1,Is=\\\"undefined\\\"!=typeof location&&\\\"https://\\\"===location.protocol?\\\"https://\\\":\\\"http://\\\",Cs=function(){function e(e){this.info=e,this.logUrl=\\\"logcollection.ronghub.com\\\",this.level=1,this.itv=30,this.times=5,this.deviceId=\\\"\\\",this.deviceInfo=\\\"\\\",this.logSwitch=0,this.logUrl=e.logPolicy.url||this.logUrl,this.level=e.logPolicy.level||this.level,this.itv=e.logPolicy.itv||this.itv,this.times=e.logPolicy.times||this.times,this.deviceId=ds(e.runtime),this.logSwitch=e.logSwitch;var t=vt(e.runtime);this.deviceInfo=t.type+\\\"|\\\"+t.version+\\\"|\\\"+pe.sessionId,this.startReport()}return e.init=function(t){return Ts=!0,e._instance||(e._instance=new e(t)),e._instance},e.getInstance=function(){return e._instance},e.prototype.startReport=function(){var e=this;if(this.logSwitch&&Ts){var t=this.itv*Math.pow(2,Es-1);Es<this.times&&Es++,setTimeout((function(){e.reportRealtimeLog()}),1e3*t)}},e.prototype.reportRealtimeLog=function(){var e=this,t=pe.realTimeLogList.filter((function(t){return t.level<=e.level}));if(0!==t.length){var n=vs.compress(t.map((function(e){return e.content})).join(\\\"\\\")),i=\\\"\\\"+Is+this.logUrl+\\\"?version=\\\"+this.info.version+\\\"&appkey=\\\"+this.info.appkey+\\\"&userId=\\\"+this.info.userId+\\\"&deviceId=\\\"+this.deviceId+\\\"&deviceInfo=\\\"+this.deviceInfo+\\\"&platform=Web\\\";this.info.runtime.httpReq({method:\\\"POST\\\",url:i,body:n}).then((function(t){ge.__clearRealTimeLog(),ge.debug(\\\"report real-time log success\\\");var n=t.data;n&&(n=JSON.parse(n),e.itv=n.nextTime,e.level=n.level,e.logSwitch=n.logSwitch,Es=1),e.startReport()})).catch((function(t){ge.debug(\\\"report real-time log error -> \\\"+t),e.startReport()}))}else this.startReport()},e.prototype.reportFullLog=function(e){return M(this,void 0,void 0,(function(){var t,n,i,r,s,o,a,u,c,h,l=this;return w(this,(function(d){switch(d.label){case 0:return t=e.startTime,n=e.endTime,i=e.platform,r=e.logId,s=e.uri,o=q.getInstance(),ge.debug(\\\"received report log msg, \\\"+i.toLowerCase(),o),\\\"web\\\"===i.toLowerCase()&&o?t>n?(ge.warn(\\\"report error: The start time(\\\"+t+\\\") cannot be greater than the end time(\\\"+t+\\\")\\\"),[2]):[4,ge.__insertLogIntoDatabase()]:[2];case 1:return d.sent(),[4,o.getRangeData(B,\\\"time\\\",t,n)];case 2:return a=(a=d.sent()).filter((function(e){return!e.userId||e.userId===l.info.userId})),u=vs.compress(a.map((function(e){return e.content})).join(\\\"\\\")||\\\"no data\\\"),5e3,c=1,(h=function(){if(!(c>3)&&Ts){var e=s||l.logUrl,t=\\\"\\\"+Is+e+\\\"?version=\\\"+l.info.version+\\\"&appkey=\\\"+l.info.appkey+\\\"&userId=\\\"+l.info.userId+\\\"&logId=\\\"+r+\\\"&deviceId=\\\"+l.deviceId+\\\"&deviceInfo=\\\"+l.deviceInfo+\\\"&platform=Web\\\",n=5e3*(c-1);c++,setTimeout((function(){Ts&&l.info.runtime.httpReq({url:t,method:\\\"POST\\\",body:u}).then((function(){ge.debug(\\\"report full log success!\\\")})).catch((function(e){h(),ge.warn(\\\"report full log error -> \\\"+e)}))}),n)}})(),[2]}}))}))},e.prototype.distroy=function(){Es=1,Ts=!1},e}();function Rs(e){return Object.assign({},e)}var Ss,Ns=function(){function e(e,t){var n;this._runtime=e,this._token=\\\"\\\",this._pluginContextQueue=[],this._pluginInstanseMap={},this.coreVersion=\\\"5.2.1\\\",this._versionInfo={},this._typingInfo={},this._isInternalConnected=!1,this._connectionStatus=Ie.DISCONNECTED,this._canRedirectConnect=!1,this._watcher={message:void 0,batchMessage:void 0,conversationState:void 0,chatroomState:void 0,connectionState:void 0,rtcInnerWatcher:void 0,expansion:void 0,tag:void 0,conversationTagChanged:void 0,pullFinished:void 0,onConnecting:void 0,onConnected:void 0,onDisconnect:void 0,onSuspend:void 0,readReceiptReceived:void 0,messageReceiptRequest:void 0,messageReceiptResponse:void 0,typingState:void 0,messageBlocked:void 0,ultraGroupEnable:void 0,operateStatus:void 0,ultraGroupMessageExpansionUpdated:void 0,ultraGroupMessageModified:void 0,ultraGroupMessageRecalled:void 0},this._typingInternalTimer=-1,this._typingExpireTime=2e3,this._typingChangedList=[],this.getChatRoomHistoryMessages=this.getChatroomHistoryMessages,this._options=Object.assign({},t),this.appkey=this._options.appkey,this.apiVersion=this._options.apiVersion,this._options.typingExpireTime&&(this._options.typingExpireTime<2e3?this._typingExpireTime=2e3:this._options.typingExpireTime>6e3?this._typingExpireTime=6e3:this._typingExpireTime=this._options.typingExpireTime),this._options.navigators=this._options.navigators.filter((function(e){return/^https?:\\\\/\\\\//.test(e)})),this._options.navigators=this._options.navigators.map((function(e){return e.replace(/\\\\/$/g,\\\"\\\")})),0===this._options.navigators.length&&(n=this._options.navigators).push.apply(n,u);var i={status:this._connectionStatusListener.bind(this),batchMessage:this._batchMessageReceiver.bind(this),chatroom:this._chatroomInfoListener.bind(this),conversation:this._conversationInfoListener.bind(this),expansion:this._expansionInfoListener.bind(this),tag:this._tagListener.bind(this),conversationTag:this._conversationTagListener.bind(this),onRTCDataChange:this._rtcDataChange.bind(this),pullFinished:this._pullFinishedListener.bind(this),ultraGroupEnable:this._ultraGroupEnableListener.bind(this),operateStatus:this._operateStatusListener.bind(this),ultraGroupMessageExpansionUpdated:this._ultraGroupMessageExpansionUpdatedListener.bind(this),ultraGroupMessageModified:this._ultraGroupMessageModifiedListener.bind(this),ultraGroupMessageRecalled:this._ultraGroupMessageRecalledListener.bind(this)};this._engine=mt()?new RCCppEngine(e,i,this._options):new _s(e,i,this._options)}return e.init=function(t,n){return ge.setLogLevel(n.logLevel),ge.setLogStdout(n.logStdout),(n.indexDBSwitch||re(n.indexDBSwitch))&&q.init(),ge.debug(\\\"APIContext.init =>\\\",n.appkey,n.navigators),this._context?(ge.error(\\\"Repeat initialize!\\\"),this._context):(ge.warn(\\\"RCEngine Commit:\\\",\\\"5af4c20ffb161461319532f700e7603c9cd9893c\\\"),this._context=new e(t,n),ge.__insertLogIntoDatabase(),this._context)},e.destroy=function(){this._context&&(this._context._destroy(),this._context=void 0)},e.prototype.install=function(e,t){if(this._pluginInstanseMap[e.tag])return ge.warn(\\\"Repeat install plugin: \\\"+e.tag),this._pluginInstanseMap[e.tag];var n=\\\"RCRTC\\\"===e.tag?new ms(this):new ys(this),i=null;try{if(!e.verify(this._runtime))return null;i=e.setup(n,this._runtime,t)}catch(e){ge.error(\\\"install plugin error!\\\\n\\\",e)}return[\\\"RCRTC\\\",\\\"RCCall\\\"].includes(e.tag)&&e.version&&e.name&&(this._versionInfo[e.name]=e.version),i&&this._pluginContextQueue.push(n),i&&(this._pluginInstanseMap[e.tag]=i),i},e.prototype._handleRedirect=function(){return M(this,void 0,void 0,(function(){var e,t=this;return w(this,(function(n){switch(n.label){case 0:return ge.debug(\\\"_handleRedirct\\\",this._token),[4,this.connect(this._token,!0)];case 1:return(e=n.sent().code)!==Ee.SUCCESS&&this._canRedirectConnect&&(this._handleSuspend(e),setTimeout((function(){t._handleRedirect()}),5e3)),[2]}}))}))},e.prototype._connectionStatusListener=function(e){var t;return M(this,void 0,void 0,(function(){return w(this,(function(n){return e===Ie.REDIRECT?(this._canRedirectConnect=!0,this._handleSuspend(e),this._handleRedirect()):e===Ie.BLOCKED||e===Ie.KICKED_OFFLINE_BY_OTHER_CLIENT||e===Ie.DISCONNECT_BY_SERVER?(this._canRedirectConnect=!1,this._handleDisconnect(e)):e===Ie.CONNECTING?this._handleConnecting():e===Ie.CONNECTED?this._handleConnected():e===Ie.DISCONNECTED?this._handleDisconnect(e):e===Ie.NETWORK_UNAVAILABLE&&this._handleSuspend(e),this._connectionStatus=e,(null===(t=this._watcher.rtcInnerWatcher)||void 0===t?void 0:t.status)&&this._watcher.rtcInnerWatcher.status(e),this._pluginContextQueue.forEach((function(t){t.onconnectionstatechange&&t.onconnectionstatechange(e)})),this._watcher.connectionState&&this._watcher.connectionState(e),[2]}))}))},e.prototype._handleConnecting=function(){this._watcher.onConnecting&&this._watcher.onConnecting()},e.prototype._handleConnected=function(){this._watcher.onConnected&&this._watcher.onConnected()},e.prototype._handleDisconnect=function(e){this._watcher.onDisconnect&&this._watcher.onDisconnect(e)},e.prototype._handleSuspend=function(e){this._watcher.onSuspend&&this._watcher.onSuspend(e)},e.prototype._messageReceiver=function(e,t,n){var i,r,s;if((e.conversationType===j.RTC_ROOM||Object.prototype.hasOwnProperty.call(Ye,e.messageType))&&this._watcher.rtcInnerWatcher&&this._watcher.rtcInnerWatcher.message)this._watcher.rtcInnerWatcher.message(Rs(e));else if(-1===[\\\"RC:ChrmJoinNtf\\\",\\\"RC:ChrmQuitNtf\\\"].indexOf(e.messageType)||\\\"function\\\"!=typeof this._watcher.chatroomState){if(\\\"RC:ChrmMemChange\\\"!==e.messageType){if(e.messageType!==Se.TYPING_STATUS||(this._addTypingInfo(Rs(e)),!this._watcher.typingState))if(e.messageType!==Se.LOG_COMMAND||\\\"rongcloudsystem\\\"!==e.senderUserId)if(e.messageType!==Se.INTERCEPT){if(!this._pluginContextQueue.some((function(t){if(!t.onmessage)return!1;try{return t.onmessage(Rs(e))}catch(e){return ge.error(\\\"plugin error =>\\\",e),!1}})))if(this._watcher.message&&this._watcher.message(Rs(e),t,n),\\\"RC:ReadNtf\\\"!==e.messageType)if(\\\"RC:RRReqMsg\\\"!==e.messageType){if(\\\"RC:RRRspMsg\\\"!==e.messageType)return e;var o=null===(s=e.content)||void 0===s?void 0:s.receiptMessageDic;o&&Array.isArray(o[this._engine.currentUserId])&&\\\"function\\\"==typeof this._watcher.messageReceiptResponse&&this._watcher.messageReceiptResponse({conversationType:e.conversationType,targetId:e.targetId,channelId:e.channelId},e.senderUserId,o[this._engine.currentUserId])}else\\\"function\\\"==typeof this._watcher.messageReceiptRequest&&this._watcher.messageReceiptRequest({conversationType:e.conversationType,targetId:e.targetId,channelId:e.channelId},e.content.messageUId,e.senderUserId);else\\\"function\\\"==typeof this._watcher.readReceiptReceived&&this._watcher.readReceiptReceived({conversationType:e.conversationType,targetId:e.targetId,channelId:e.channelId},e.content.messageUId,e.content.lastMessageSendTime)}else this._MessageBlockedListener({conversationType:e.conversationType,targetId:e.targetId,channelId:e.channelId||\\\"\\\",blockType:e.content.interceptType,blockedMessageUId:e.content.msgUId});else{var a=e.content,u=a.startTime,c=a.endTime,h=a.platform,l=a.logId,d=a.uri,f=a.packageName,p={startTime:parseInt(u),endTime:parseInt(c),platform:h,logId:l,uri:d,packageName:f};null===(r=Cs.getInstance())||void 0===r||r.reportFullLog(p)}}else if(\\\"function\\\"==typeof this._watcher.chatroomState){var g={};Array.isArray(e.content.userList)&&e.content.userList.forEach((function(e){g[e.userId]=e.status})),this._watcher.chatroomState({userChange:{users:g,chatroomId:e.targetId}})}}else this._watcher.chatroomState({userChange:{users:(i={},i[e.senderUserId]=\\\"RC:ChrmQuitNtf\\\"===e.messageType?De.QUIT:De.JOIN,i),chatroomId:e.targetId}})},e.prototype._batchMessageReceiver=function(e,t,n){var i=this,r=[];e.forEach((function(e){var s=i._messageReceiver(e,t,n);s&&r.push(s)})),r.length&&this._watcher.batchMessage&&this._watcher.batchMessage(r)},e.prototype._chatroomInfoListener=function(e){this._watcher.chatroomState&&this._watcher.chatroomState(e)},e.prototype._conversationInfoListener=function(e){this._watcher.conversationState&&this._watcher.conversationState(e)},e.prototype._expansionInfoListener=function(e){this._watcher.expansion&&this._watcher.expansion(e)},e.prototype._tagListener=function(){this._watcher.tag&&this._watcher.tag()},e.prototype._conversationTagListener=function(){this._watcher.conversationTagChanged&&this._watcher.conversationTagChanged()},e.prototype._typingStatusListener=function(e){this._watcher.typingState&&this._watcher.typingState(e)},e.prototype._pullFinishedListener=function(){this._watcher.pullFinished&&this._watcher.pullFinished()},e.prototype._MessageBlockedListener=function(e){this._watcher.messageBlocked&&this._watcher.messageBlocked(e)},e.prototype._ultraGroupEnableListener=function(e){this._watcher.ultraGroupEnable&&this._watcher.ultraGroupEnable(e)},e.prototype._operateStatusListener=function(e){this._watcher.operateStatus&&this._watcher.operateStatus(e)},e.prototype._ultraGroupMessageExpansionUpdatedListener=function(e){this._watcher.ultraGroupMessageExpansionUpdated&&this._watcher.ultraGroupMessageExpansionUpdated(e)},e.prototype._ultraGroupMessageModifiedListener=function(e){this._watcher.ultraGroupMessageModified&&this._watcher.ultraGroupMessageModified(e)},e.prototype._ultraGroupMessageRecalledListener=function(e){this._watcher.ultraGroupMessageRecalled&&this._watcher.ultraGroupMessageRecalled(e)},e.prototype._rtcDataChange=function(e,t){this._pluginContextQueue.forEach((function(n){n.onrtcdatachange&&n.onrtcdatachange(e,t)}))},e.prototype.assignWatcher=function(e){var t=this;Object.keys(this._watcher).forEach((function(n){if(Object.prototype.hasOwnProperty.call(e,n)){var i=e[n];t._watcher[n]=ie(i)||ne(i)?i:void 0}}))},e.prototype.resetWatcher=function(){var e=this;Object.keys(this._watcher).forEach((function(t){e._watcher[t]=void 0}))},e.prototype._addTypingInfo=function(e){var t=e.senderUserId,n=e.conversationType,i=e.targetId,r=e.content,s=e.channelId,o=r.typingContentType,a=n+\\\"#\\\"+i+\\\"#\\\"+(s||\\\"\\\");this._typingInfo[a]||(this._typingInfo[a]=[]);var u=this._typingInfo[a].findIndex((function(e){return e.userId===t}));u>=0&&this._typingInfo[a][u].messageType===o?this._typingInfo[a][u].timestamp=Date.now():(u>=0&&this._typingInfo[a].splice(u,1),this._typingInfo[a].push({userId:t,messageType:o,timestamp:Date.now()}),this._typingChangedList.includes(a)||this._typingChangedList.push(a),this._startCheckTypingInfo())},e.prototype._startCheckTypingInfo=function(){var e=this;-1===this._typingInternalTimer&&0!==Object.keys(this._typingInfo).length&&(this._typingInternalTimer=setInterval((function(){for(var t in e._typingInfo){var n=e._typingInfo[t].length;e._typingInfo[t]=e._typingInfo[t].filter((function(t){return Date.now()-t.timestamp<e._typingExpireTime})),e._typingInfo[t].length===n||e._typingChangedList.includes(t)||e._typingChangedList.push(t),0===e._typingInfo[t].length&&delete e._typingInfo[t]}if(e._typingChangedList.length>0){var i=e._typingChangedList.map((function(t){return{conversationType:Number(t.split(\\\"#\\\")[0]),targetId:t.split(\\\"#\\\")[1],channelId:t.split(\\\"#\\\")[2],list:e._typingInfo[t]||[]}}));e._typingStatusListener(i),e._typingChangedList=[]}0===Object.keys(e._typingInfo).length&&(clearInterval(e._typingInternalTimer),e._typingInternalTimer=-1)}),500))},e.prototype.getConnectedTime=function(){return this._engine.getConnectedTime()},e.prototype.getServerTime=function(){return this._engine.getServerTime()},e.prototype.getDeviceId=function(){return this._engine.getDeviceId()},e.prototype.getCurrentUserId=function(){return this._engine.currentUserId},e.prototype.getConnectionStatus=function(){return this._connectionStatus},Object.defineProperty(e.prototype,\\\"token\\\",{get:function(){return this._token},enumerable:!1,configurable:!0}),e.prototype.connect=function(e,t,n){return void 0===t&&(t=!1),M(this,void 0,void 0,(function(){var i,r,s,o,a,u;return w(this,(function(c){switch(c.label){case 0:return this._connectionStatus===Ie.CONNECTED?[2,{code:Ee.SUCCESS,userId:this._engine.currentUserId}]:this._connectionStatus===Ie.CONNECTING?[2,{code:Ee.BIZ_ERROR_CONNECTING}]:\\\"string\\\"!=typeof e||0===e.length?[2,{code:Ee.RC_CONN_USER_OR_PASSWD_ERROR}]:(this._token=e,i=e.split(\\\"@\\\"),r=i[1],s=r?r.split(\\\";\\\").map((function(e){return/^https?:/.test(e)?e:\\\"https://\\\"+e})):[],[4,this._engine.navi.getInfo(this._getTokenWithoutNavi(),s,t,this._options.checkCA)]);case 1:return(o=c.sent())?1===(null==o?void 0:o.type)?[2,{code:Ee.PACKAGE_ENVIRONMENT_ERROR}]:(a=Je.getInfo(),[4,this._engine.connect(this._getTokenWithoutNavi(),o,n)]):[2,{code:Ee.RC_NAVI_RESOURCE_ERROR}];case 2:return u=c.sent(),ge.__insertLogIntoDatabase(),u!==Ce.REDIRECT?[3,4]:(this._connectionStatus=Ie.REDIRECT,[4,this.connect(e,!0)]);case 3:return[2,c.sent()];case 4:return u===Ee.SUCCESS&&(ge.info(\\\"connect success, userId: \\\"+this._engine.currentUserId),1!==(null==o?void 0:o.type)&&this._engine.reportSDKInfo&&this._engine.reportSDKInfo(a),Cs.init({runtime:this._runtime,logSwitch:(null==o?void 0:o.logSwitch)||0,logPolicy:JSON.parse((null==o?void 0:o.logPolicy)||\\\"{}\\\"),appkey:this.appkey,version:this.apiVersion,userId:this._engine.currentUserId}),pe.init(this._engine.currentUserId),this._isInternalConnected=!0),u!==Ee.SUCCESS||mt()||1===o.openUS&&this._pullUserSettings(),u!==Ee.SUCCESS&&(this._connectionStatus=Ie.CONNECTION_CLOSED),[2,{code:u,userId:this._engine.currentUserId}]}}))}))},e.prototype._pullUserSettings=function(){return M(this,void 0,void 0,(function(){return w(this,(function(e){return[2]}))}))},e.prototype.disconnect=function(){var e;return this._isInternalConnected=!1,clearInterval(this._typingInternalTimer),this._typingInternalTimer=-1,this._typingInfo={},null===(e=Cs.getInstance())||void 0===e||e.distroy(),ge.__insertLogIntoDatabase(),pe.reset(),this._engine.disconnect(),this._pluginContextQueue.forEach((function(e){if(e.ondisconnect)try{e.ondisconnect()}catch(e){ge.error(\\\"plugin error =>\\\",e)}})),Promise.resolve()},e.prototype.reconnect=function(e){return this._isInternalConnected?Promise.resolve({code:Ee.CAN_NOT_RECONNECT}):this.connect(this._getTokenWithoutNavi(),!1,e)},e.prototype._getTokenWithoutNavi=function(){return this._token.replace(/@.+$/,\\\"@\\\")},e.prototype.getInfoFromCache=function(){return this._engine.navi.getInfoFromCache(this._getTokenWithoutNavi())},e.prototype.registerMessageType=function(e,t,n,i,r){void 0===i&&(i=[]),void 0===r&&(r=!1),this._engine.registerMessageType(e,t,n,i,r)},e.prototype.sendMessage=function(e,t,n,i){if(e!==j.ULTRA_GROUP){var r=this.getInfoFromCache();if(1===((null==r?void 0:r.grpRRVer)||0)&&n.messageType===Se.READ_RECEIPT_RESPONSE)return Promise.resolve({code:Ee.READ_RECEIPT_ERROR})}var s=n.canIncludeExpansion,o=void 0!==s&&s,a=n.expansion;if(o&&he(a))return Promise.resolve({code:Ee.BIZ_ERROR_INVALID_PARAMETER});var u=JSON.stringify(n.content);return V(u)>131072?Promise.resolve({code:Ee.RC_MSG_CONTENT_EXCEED_LIMIT}):e===j.ULTRA_GROUP?this._engine.sendUltraMessage(t,n):this._engine.sendMessage(e,t,n,i)},e.prototype.sendExpansionMessage=function(e){return M(this,void 0,void 0,(function(){var t,n,i,r,s,o,a,u,c,h,l,d,f,p;return w(this,(function(g){switch(g.label){case 0:if(t=e.channelId,n=e.conversationType,i=e.targetId,r=e.messageUId,s=e.keys,o=e.expansion,a=e.removeAll,!e.canIncludeExpansion)return[2,{code:Ee.MESSAGE_KV_NOT_SUPPORT}];if(u=!1,c=he(o),h=!1,ne(o))for(d in l=Object.keys(o).length,u=l>20,o)if(f=o[d],(h=d.length>32||f.length>4096)||c)break;return u||h?[2,{code:Ee.EXPANSION_LIMIT_EXCEET}]:c?[2,{code:Ee.BIZ_ERROR_INVALID_PARAMETER}]:(p={mid:r},o&&(p.put=o),s&&(p.del=s),a&&(p.removeAll=1),[4,this._engine.sendMessage(n,i,{content:p,messageType:Se.EXPANSION_NOTIFY,channelId:t})]);case 1:return[2,{code:g.sent().code}]}}))}))},e.prototype.sendReadReceiptMessage=function(e,t,n){return M(this,void 0,void 0,(function(){var i;return w(this,(function(r){return i=this.getInfoFromCache(),0===((null==i?void 0:i.grpRRVer)||0)?[2,{code:Ee.READ_RECEIPT_ERROR,data:\\\"The read receipt switch is not on, please call the sendMessage method!\\\"}]:[2,this._engine.sendReadReceiptMessage(e,t,n)]}))}))},e.prototype.getMessageReader=function(e,t,n){return M(this,void 0,void 0,(function(){var i;return w(this,(function(r){return i=this.getInfoFromCache(),0===((null==i?void 0:i.grpRRVer)||0)?[2,{code:Ee.READ_RECEIPT_ERROR}]:[2,this._engine.getMessageReader(e,t,n)]}))}))},e.prototype._destroy=function(){var e;this._isInternalConnected=!1,this._watcher={batchMessage:void 0,message:void 0,conversationState:void 0,chatroomState:void 0,connectionState:void 0,rtcInnerWatcher:void 0,expansion:void 0,tag:void 0,conversationTagChanged:void 0,typingState:void 0,pullFinished:void 0,onConnecting:void 0,onConnected:void 0,onDisconnect:void 0,onSuspend:void 0},this._engine.disconnect(),this._pluginContextQueue.forEach((function(e){if(e.ondestroy)try{e.ondestroy()}catch(e){ge.error(\\\"plugin error =>\\\",e)}})),this._pluginContextQueue.length=0,this._pluginInstanseMap={},null===(e=Cs.getInstance())||void 0===e||e.distroy(),pe.reset()},e.prototype.getHistoryMessage=function(e,t,n,i,r,s,o){if(void 0===n&&(n=0),void 0===i&&(i=20),void 0===r&&(r=0),void 0===s&&(s=\\\"\\\"),void 0===o&&(o=\\\"\\\"),e===j.ULTRA_GROUP){var a={timestamp:n,count:i,order:r,channelId:s};return this._engine.getUltraHistoryMsg(t,a)}return this._engine.getHistoryMessage(e,t,n,i,r,s,o||\\\"\\\")},e.prototype.getConversationList=function(e,t,n,i,r){if(void 0===e&&(e=300),void 0===r&&(r=\\\"\\\"),t===j.ULTRA_GROUP){var s=Ee.METHOD_NOT_SUPPORT;return Promise.resolve({code:s,msg:Ee[s]})}return this._engine.getConversationList(e,t,n,i,r)},e.prototype.getConversation=function(e,t,n){return this._engine.getConversation(e,t,n)},e.prototype.removeConversation=function(e,t,n){return void 0===n&&(n=\\\"\\\"),e===j.ULTRA_GROUP?Promise.resolve(Ee.METHOD_NOT_SUPPORT):this._engine.removeConversation(e,t,n)},e.prototype.getUltraGroupList=function(){return this._engine.getUltraGroupList()},e.prototype.getBlockUltraGroupList=function(){return this._engine.getBlockUltraGroupList()},e.prototype.getTopUltraGroupList=function(){return this._engine.getTopUltraGroupList()},e.prototype.clearUnreadCount=function(e,t,n){return void 0===n&&(n=\\\"\\\"),e===j.ULTRA_GROUP?this._engine.clearUltraUnreadcount(t,n):this._engine.clearConversationUnreadCount(e,t,n)},e.prototype.clearAllUnreadCount=function(){return this._engine.clearAllUnreadCount()},e.prototype.getUnreadCount=function(e,t,n){return void 0===n&&(n=\\\"\\\"),this._engine.getConversationUnreadCount(e,t,n)},e.prototype.getTotalUnreadCount=function(e,t,n){if(t&&t.includes(j.ULTRA_GROUP)){var i=Ee.METHOD_NOT_SUPPORT;return Promise.resolve({code:i,msg:Ee[i]})}return this._engine.getAllConversationUnreadCount(e,t&&t.length>0?t:[j.PRIVATE,j.GROUP,j.SYSTEM,j.PUBLIC_SERVICE],!!n)},e.prototype.getFirstUnreadMessage=function(e,t,n){return void 0===n&&(n=\\\"\\\"),this._engine.getFirstUnreadMessage(e,t,n)},e.prototype.setConversationStatus=function(e,t,n,i,r){if(void 0===r&&(r=\\\"\\\"),e===j.ULTRA_GROUP&&void 0!==n)return Promise.resolve(Ee.METHOD_NOT_SUPPORT);var s=[{conversationType:e,targetId:t,isTop:n,notificationStatus:i,channelId:r}];return this._engine.batchSetConversationStatus(s)},e.prototype.saveConversationMessageDraft=function(e,t,n,i){return void 0===i&&(i=\\\"\\\"),this._engine.saveConversationMessageDraft(e,t,n,i)},e.prototype.getConversationMessageDraft=function(e,t,n){return void 0===n&&(n=\\\"\\\"),this._engine.getConversationMessageDraft(e,t,n)},e.prototype.clearConversationMessageDraft=function(e,t,n){return void 0===n&&(n=\\\"\\\"),this._engine.clearConversationMessageDraft(e,t,n)},e.prototype.recallMessage=function(e,t,n,i,r){return this._engine.recallMsg(e,t,n,i,r)},e.prototype.deleteRemoteMessage=function(e,t,n,i){return void 0===i&&(i=\\\"\\\"),e===j.ULTRA_GROUP?Promise.resolve(Ee.METHOD_NOT_SUPPORT):this._engine.deleteRemoteMessage(e,t,n,i)},e.prototype.deleteRemoteMessageByTimestamp=function(e,t,n,i){return void 0===i&&(i=\\\"\\\"),this._engine.deleteRemoteMessageByTimestamp(e,t,n,i)},e.prototype.joinChatroom=function(e,t){return void 0===t&&(t=10),this._engine.joinChatroom(e,t)},e.prototype.joinExistChatroom=function(e,t){return void 0===t&&(t=10),this._engine.joinExistChatroom(e,t)},e.prototype.quitChatroom=function(e){return this._engine.quitChatroom(e)},e.prototype.getChatroomInfo=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=0),this._engine.getChatroomInfo(e,t,n)},e.prototype.setChatroomEntry=function(e,t){var n=t.key,i=t.value;return ht(n)&&lt(i)?this._engine.setChatroomEntry(e,t):Promise.resolve(Ee.BIZ_ERROR_INVALID_PARAMETER)},e.prototype.setChatroomEntries=function(e,t){for(var n=0;n<t.entries.length;n++){var i=t.entries[n],r=i.key,s=i.value;if(!ht(r)||!lt(s))return Promise.resolve({code:Ee.BIZ_ERROR_INVALID_PARAMETER})}return this._engine.setChatroomEntries(e,t)},e.prototype.forceSetChatroomEntry=function(e,t){var n=t.key,i=t.value;return ht(n)&&lt(i)?this._engine.forceSetChatroomEntry(e,t):Promise.resolve(Ee.BIZ_ERROR_INVALID_PARAMETER)},e.prototype.removeChatroomEntry=function(e,t){var n=t.key;return ht(n)?this._engine.removeChatroomEntry(e,t):Promise.resolve(Ee.BIZ_ERROR_INVALID_PARAMETER)},e.prototype.removeChatroomEntries=function(e,t){for(var n=0;n<t.entries.length;n++){var i=t.entries[n].key;if(!ht(i))return Promise.resolve({code:Ee.BIZ_ERROR_INVALID_PARAMETER})}return this._engine.removeChatroomEntries(e,t)},e.prototype.forceRemoveChatroomEntry=function(e,t){var n=t.key;return ht(n)?this._engine.forceRemoveChatroomEntry(e,t):Promise.resolve(Ee.BIZ_ERROR_INVALID_PARAMETER)},e.prototype.getChatroomEntry=function(e,t){return this._engine.getChatroomEntry(e,t)},e.prototype.getAllChatroomEntries=function(e){return this._engine.getAllChatroomEntry(e)},e.prototype.getChatroomHistoryMessages=function(e,t,n,i){return void 0===t&&(t=20),void 0===n&&(n=0),void 0===i&&(i=0),this._engine.getChatroomHistoryMessages(e,i,t,n)},e.prototype.getFileToken=function(e,t,n,i){return M(this,void 0,void 0,(function(){var r,s,o,a,u,c,h;return w(this,(function(l){switch(l.label){case 0:return r=this.getInfoFromCache(),s=(null==r?void 0:r.bosAddr)||\\\"\\\",o=(null==r?void 0:r.uploadServer)||\\\"\\\",a=(null==r?void 0:r.ossConfig)||\\\"\\\",[4,this._engine.getFileToken(e,t,n,i)];case 1:return u=l.sent(),c=u.code,h=u.data,c===Ee.SUCCESS?[2,Promise.resolve(Object.assign(h,{bos:s,qiniu:o,ossConfig:a}))]:[2,Promise.reject(c)]}}))}))},e.prototype.getFileUrl=function(e,t,n,i,r){return void 0===r&&(r=Ue.QINIU),M(this,void 0,void 0,(function(){var s,o,a;return w(this,(function(u){switch(u.label){case 0:return(null==i?void 0:i.isBosRes)?[2,Promise.resolve(i)]:[4,this._engine.getFileUrl(e,r,t,n)];case 1:return s=u.sent(),o=s.code,a=s.data,o===Ee.SUCCESS?[2,Promise.resolve(a)]:[2,Promise.reject(o)]}}))}))},e.prototype.createTag=function(e){return M(this,void 0,void 0,(function(){return w(this,(function(t){return[2,this._engine.createTag(e)]}))}))},e.prototype.removeTag=function(e){return M(this,void 0,void 0,(function(){return w(this,(function(t){return[2,this._engine.removeTag(e)]}))}))},e.prototype.updateTag=function(e){return M(this,void 0,void 0,(function(){return w(this,(function(t){return[2,this._engine.updateTag(e)]}))}))},e.prototype.getTagList=function(){return M(this,void 0,void 0,(function(){return w(this,(function(e){return[2,this._engine.getTagList()]}))}))},e.prototype.addTagForConversations=function(e,t){return M(this,void 0,void 0,(function(){return w(this,(function(n){return t.length>1e3?[2,Promise.reject(Ee.CONVER_OUT_LIMIT_ERROR)]:[2,this._engine.addTagForConversations(e,t)]}))}))},e.prototype.removeTagForConversations=function(e,t){return M(this,void 0,void 0,(function(){return w(this,(function(n){return[2,this._engine.removeTagForConversations(e,t)]}))}))},e.prototype.removeTagsForConversation=function(e,t){return M(this,void 0,void 0,(function(){return w(this,(function(n){return[2,this._engine.removeTagsForConversation(e,t)]}))}))},e.prototype.getConversationListByTag=function(e,t,n,i){return M(this,void 0,void 0,(function(){return w(this,(function(r){return[2,this._engine.getConversationListByTag(e,t,n,i)]}))}))},e.prototype.getUnreadCountByTag=function(e,t){return M(this,void 0,void 0,(function(){return w(this,(function(n){return[2,this._engine.getUnreadCountByTag(e,t)]}))}))},e.prototype.setConversationStatusInTag=function(e,t,n){return M(this,void 0,void 0,(function(){return w(this,(function(i){return[2,this._engine.setConversationStatusInTag(e,t,n)]}))}))},e.prototype.getTagsForConversation=function(e){return M(this,void 0,void 0,(function(){return w(this,(function(t){return[2,this._engine.getTagsForConversation(e)]}))}))},e.prototype.getBlockConversationList=function(){return this._engine.getBlockConversationList()},e.prototype.getTopConversationList=function(){return this._engine.getTopConversationList()},e.prototype.getUnreadMentionedCount=function(e){return this._engine.getUnreadMentionedCount(e)},e.prototype.getAllUnreadMentionedCount=function(){return this._engine.getAllUnreadMentionedCount()},e.prototype.sendUltraGroupTypingStatus=function(e){if(e.conversationType!==j.ULTRA_GROUP){var t=Ee.METHOD_ONLY_SUPPORT_ULTRA_GROUP;return Promise.resolve({code:t,msg:Ee[t]})}return this._engine.sendUltraGroupTypingStatus(e)},e.prototype.getUltraGroupMessageListByMessageUId=function(e){return this._engine.getUltraGroupMessageListByMessageUId(e)},e.prototype.expandUltraMessage=function(e){return M(this,void 0,void 0,(function(){var t,n,i,r,s,o,a,u,c,h;return w(this,(function(l){switch(l.label){case 0:if(e.channelId,t=e.conversationType,e.targetId,e.messageUId,e.keys,n=e.expansion,e.removeAll,i=e.canIncludeExpansion,t!==j.ULTRA_GROUP)return[2,{code:r=Ee.METHOD_ONLY_SUPPORT_ULTRA_GROUP,msg:Ee[r]}];if(!i)return[2,{code:Ee.MESSAGE_KV_NOT_SUPPORT}];if(s=!1,o=he(n),a=!1,ne(n))for(c in u=Object.keys(n).length,s=u>20,n)if(h=n[c],a=c.length>32||h.length>64)break;return s||a?[2,{code:Ee.EXPANSION_LIMIT_EXCEET}]:o?[2,{code:Ee.BIZ_ERROR_INVALID_PARAMETER}]:[4,this._engine.expandUltraMessage(e)];case 1:return[2,{code:l.sent().code}]}}))}))},e.prototype.modifyMessage=function(e){return M(this,void 0,void 0,(function(){var t;return w(this,(function(n){switch(n.label){case 0:return e.conversationType!==j.ULTRA_GROUP?[2,{code:t=Ee.METHOD_ONLY_SUPPORT_ULTRA_GROUP,msg:Ee[t]}]:[4,this._engine.modifyMessage(e)];case 1:return[2,{code:n.sent().code}]}}))}))},e.prototype.getUltraGroupUnreadMentionedCountByTargetId=function(e){return this._engine.getUltraGroupUnreadMentionedCountByTargetId(e)},e.prototype.getAllConversationState=function(){return this._engine.getAllConversationState()},e.prototype.callExtra=function(e){for(var t,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return(t=this._engine).callExtra.apply(t,A([e],n))},e.prototype.clearConversations=function(e,t){return M(this,void 0,void 0,(function(){return w(this,(function(n){switch(n.label){case 0:return[4,this._engine.clearConversations(e,t)];case 1:return[2,n.sent()]}}))}))},e.prototype.setUserStatusListener=function(e,t){return this._engine.setUserStatusListener(e,(function(e){try{t(e)}catch(e){ge.error(e)}}))},e.prototype.addToBlacklist=function(e){return M(this,void 0,void 0,(function(){return w(this,(function(t){return[2,this._engine.addToBlacklist(e)]}))}))},e.prototype.removeFromBlacklist=function(e){return M(this,void 0,void 0,(function(){return w(this,(function(t){return[2,this._engine.removeFromBlacklist(e)]}))}))},e.prototype.getBlacklist=function(){return M(this,void 0,void 0,(function(){return w(this,(function(e){return[2,this._engine.getBlacklist()]}))}))},e.prototype.getBlacklistStatus=function(e){return M(this,void 0,void 0,(function(){return w(this,(function(t){return[2,this._engine.getBlacklistStatus(e)]}))}))},e.prototype.insertMessage=function(e,t,n){return M(this,void 0,void 0,(function(){return w(this,(function(i){return[2,this._engine.insertMessage(e,t,n)]}))}))},e.prototype.deleteMessages=function(e){return M(this,void 0,void 0,(function(){return w(this,(function(t){return[2,this._engine.deleteMessages(e)]}))}))},e.prototype.deleteMessagesByTimestamp=function(e,t,n,i,r){return void 0===r&&(r=\\\"\\\"),M(this,void 0,void 0,(function(){return w(this,(function(s){return[2,this._engine.deleteMessagesByTimestamp(e,t,n,i,r)]}))}))},e.prototype.clearMessages=function(e,t,n){return void 0===n&&(n=\\\"\\\"),M(this,void 0,void 0,(function(){return w(this,(function(i){return[2,this._engine.clearMessages(e,t,n)]}))}))},e.prototype.getMessage=function(e){return M(this,void 0,void 0,(function(){return w(this,(function(t){return[2,this._engine.getMessage(e)]}))}))},e.prototype.setMessageContent=function(e,t,n){return M(this,void 0,void 0,(function(){return w(this,(function(i){return[2,this._engine.setMessageContent(e,t,n)]}))}))},e.prototype.setMessageSearchField=function(e,t,n){return M(this,void 0,void 0,(function(){return w(this,(function(i){return[2,this._engine.setMessageSearchField(e,t,n)]}))}))},e.prototype.setMessageSentStatus=function(e,t){return M(this,void 0,void 0,(function(){return w(this,(function(n){return[2,this._engine.setMessageSentStatus(e,t)]}))}))},e.prototype.setMessageReceivedStatus=function(e,t){return M(this,void 0,void 0,(function(){return w(this,(function(n){return[2,this._engine.setMessageReceivedStatus(e,t)]}))}))},e.prototype.setUserStatus=function(e){return M(this,void 0,void 0,(function(){return w(this,(function(t){return[2,this._engine.setUserStatus(e)]}))}))},e.prototype.subscribeUserStatus=function(e){return M(this,void 0,void 0,(function(){return w(this,(function(t){return[2,this._engine.subscribeUserStatus(e)]}))}))},e.prototype.getUserStatus=function(e){return M(this,void 0,void 0,(function(){return w(this,(function(t){return[2,this._engine.getUserStatus(e)]}))}))},e.prototype.searchConversationByContent=function(e,t,n,i){return void 0===t&&(t=[]),void 0===n&&(n=\\\"\\\"),M(this,void 0,void 0,(function(){return w(this,(function(r){return[2,this._engine.searchConversationByContent(e,t,n,i)]}))}))},e.prototype.searchMessageByContent=function(e,t,n,i,r,s,o){return void 0===o&&(o=\\\"\\\"),M(this,void 0,void 0,(function(){return w(this,(function(a){return[2,this._engine.searchMessageByContent(e,t,n,i,r,s,o)]}))}))},e.prototype.getUnreadMentionedMessages=function(e,t,n){return void 0===n&&(n=\\\"\\\"),this._engine.getUnreadMentionedMessages(e,t,n)},e.prototype.clearUnreadCountByTimestamp=function(e,t,n,i){return void 0===i&&(i=\\\"\\\"),this._engine.clearUnreadCountByTimestamp(e,t,n,i)},e.prototype.getConversationNotificationStatus=function(e,t,n){return void 0===n&&(n=\\\"\\\"),this._engine.getConversationNotificationStatus(e,t,n)},e.prototype.getRemoteHistoryMessages=function(e,t,n,i,r,s){return this._engine.getRemoteHistoryMessages(e,t,n,i,r,s)},e.prototype.getConversationListWithAllChannel=function(){return this._engine.getConversationListWithAllChannel()},e.prototype.getConversationListWithAllChannelByPage=function(e,t){return this._engine.getConversationListWithAllChannelByPage(e,t)},e.prototype.joinRTCRoom=function(e,t,n,i,r,s){return this._engine.joinRTCRoom(e,t,n,i,r,s)},e.prototype.quitRTCRoom=function(e){return this._engine.quitRTCRoom(e)},e.prototype.rtcPing=function(e,t,n){return this._engine.rtcPing(e,t,n)},e.prototype.getRTCRoomInfo=function(e){return this._engine.getRTCRoomInfo(e)},e.prototype.getRTCUserInfoList=function(e){return this._engine.getRTCUserInfoList(e)},e.prototype.getRTCUserInfo=function(e){return this._engine.getRTCUserInfo(e)},e.prototype.setRTCUserInfo=function(e,t,n){return this._engine.setRTCUserInfo(e,t,n)},e.prototype.removeRTCUserInfo=function(e,t){return this._engine.removeRTCUserInfo(e,t)},e.prototype.setRTCData=function(e,t,n,i,r,s){return this._engine.setRTCData(e,t,n,i,r,s)},e.prototype.setRTCTotalRes=function(e,t,n,i,r){return void 0===r&&(r=\\\"\\\"),this._engine.setRTCTotalRes(e,t,n,i,r)},e.prototype.setRTCCDNUris=function(e,t,n){return this._engine.setRTCCDNUris(e,t,n)},e.prototype.getRTCData=function(e,t,n,i){return this._engine.getRTCData(e,t,n,i)},e.prototype.removeRTCData=function(e,t,n,i,r){return this._engine.removeRTCData(e,t,n,i,r)},e.prototype.setRTCOutData=function(e,t,n,i){return this._engine.setRTCOutData(e,t,n,i)},e.prototype.getRTCOutData=function(e,t){return this._engine.getRTCOutData(e,t)},e.prototype.getRTCToken=function(e,t,n){return this._engine.getRTCToken(e,t,n)},e.prototype.setRTCState=function(e,t){return this._engine.setRTCState(e,t)},e.prototype.getRTCUserList=function(e){return this._engine.getRTCUserList(e)},e.prototype.joinLivingRoomAsAudience=function(e,t,n){return this._engine.joinLivingRoomAsAudience(e,t,n)},e.prototype.quitLivingRoomAsAudience=function(e){return this._engine.quitLivingRoomAsAudience(e)},e.prototype.rtcIdentityChange=function(e,t,n){return this._engine.rtcIdentityChange(e,t,n)},e.prototype.getRTCJoinedUserInfo=function(e){return this._engine.getRTCJoinedUserInfo(e)},e.prototype.requestRoomPK=function(e){return this._engine.requestRoomPK(e)},e.prototype.cancelRoomPK=function(e){return this._engine.cancelRoomPK(e)},e.prototype.responseRoomPK=function(e){return this._engine.responseRoomPK(e)},e.prototype.endRoomPK=function(e){return this._engine.endRoomPK(e)},e.prototype.bindRTCRoomForChatroom=function(e){return this._engine.bindRTCRoomForChatroom(e)},e}();!function(e){e[e.add=1]=\\\"add\\\",e[e.update=2]=\\\"update\\\",e[e.delete=3]=\\\"delete\\\"}(Ss||(Ss={}));var Os=\\\"5.2.1\\\";\\n\\n\\n//# sourceURL=webpack://@rongcloud/rcliveroomlib/./node_modules/@rongcloud/imlib-next/node_modules/@rongcloud/engine/dist/index.esm.js?\");\n\n/***/ }),\n\n/***/ \"./node_modules/@rongcloud/plugin-rtc/dist/index.esm.js\":\n/*!**************************************************************!*\\\n  !*** ./node_modules/@rongcloud/plugin-rtc/dist/index.esm.js ***!\n  \\**************************************************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\neval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   \\\"RTCJoinType\\\": () => (/* reexport safe */ _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCJoinType),\\n/* harmony export */   \\\"BackgroundPictureFillMode\\\": () => (/* binding */ ir),\\n/* harmony export */   \\\"MixLayoutMode\\\": () => (/* binding */ nr),\\n/* harmony export */   \\\"MixVideoRenderMode\\\": () => (/* binding */ sr),\\n/* harmony export */   \\\"RCAbstractRoom\\\": () => (/* binding */ rr),\\n/* harmony export */   \\\"RCAudienceClient\\\": () => (/* binding */ Rr),\\n/* harmony export */   \\\"RCAudienceLivingRoom\\\": () => (/* binding */ Tr),\\n/* harmony export */   \\\"RCCameraVideoTrack\\\": () => (/* binding */ it),\\n/* harmony export */   \\\"RCFrameRate\\\": () => (/* binding */ Be),\\n/* harmony export */   \\\"RCInnerCDNPullIsHttps\\\": () => (/* binding */ Sr),\\n/* harmony export */   \\\"RCInnerCDNPullKind\\\": () => (/* binding */ gr),\\n/* harmony export */   \\\"RCKickReason\\\": () => (/* binding */ yr),\\n/* harmony export */   \\\"RCLivingRoom\\\": () => (/* binding */ _r),\\n/* harmony export */   \\\"RCLivingType\\\": () => (/* binding */ lr),\\n/* harmony export */   \\\"RCLocalAudioTrack\\\": () => (/* binding */ Qe),\\n/* harmony export */   \\\"RCLocalFileAudioTrack\\\": () => (/* binding */ tt),\\n/* harmony export */   \\\"RCLocalFileTrack\\\": () => (/* binding */ Ze),\\n/* harmony export */   \\\"RCLocalFileVideoTrack\\\": () => (/* binding */ et),\\n/* harmony export */   \\\"RCLocalTrack\\\": () => (/* binding */ ze),\\n/* harmony export */   \\\"RCLocalVideoTrack\\\": () => (/* binding */ Xe),\\n/* harmony export */   \\\"RCMCUConfigBuilder\\\": () => (/* binding */ ar),\\n/* harmony export */   \\\"RCMediaType\\\": () => (/* binding */ Fe),\\n/* harmony export */   \\\"RCMicphoneAudioTrack\\\": () => (/* binding */ rt),\\n/* harmony export */   \\\"RCRTCClient\\\": () => (/* binding */ Er),\\n/* harmony export */   \\\"RCRTCCode\\\": () => (/* binding */ T),\\n/* harmony export */   \\\"RCRTCLiveRole\\\": () => (/* binding */ Xt),\\n/* harmony export */   \\\"RCRTCPingResult\\\": () => (/* binding */ Dt),\\n/* harmony export */   \\\"RCRTCRoom\\\": () => (/* binding */ mr),\\n/* harmony export */   \\\"RCRemoteAudioTrack\\\": () => (/* binding */ ot),\\n/* harmony export */   \\\"RCRemoteTrack\\\": () => (/* binding */ st),\\n/* harmony export */   \\\"RCRemoteVideoTrack\\\": () => (/* binding */ at),\\n/* harmony export */   \\\"RCResolution\\\": () => (/* binding */ He),\\n/* harmony export */   \\\"RCScreenVideoTrack\\\": () => (/* binding */ nt),\\n/* harmony export */   \\\"RCTag\\\": () => (/* binding */ br),\\n/* harmony export */   \\\"RCTrack\\\": () => (/* binding */ qe),\\n/* harmony export */   \\\"device\\\": () => (/* binding */ Ye),\\n/* harmony export */   \\\"helper\\\": () => (/* binding */ Pr),\\n/* harmony export */   \\\"installer\\\": () => (/* binding */ kr)\\n/* harmony export */ });\\n/* harmony import */ var _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @rongcloud/engine */ \\\"./node_modules/@rongcloud/engine/dist/index.esm.js\\\");\\n\\n/*! *****************************************************************************\\nCopyright (c) Microsoft Corporation.\\n\\nPermission to use, copy, modify, and/or distribute this software for any\\npurpose with or without fee is hereby granted.\\n\\nTHE SOFTWARE IS PROVIDED \\\"AS IS\\\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\\nPERFORMANCE OF THIS SOFTWARE.\\n***************************************************************************** */function S(e,t,r,i){return new(r||(r=Promise))((function(n,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))}const C=new _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.Logger(\\\"RCRTC\\\");var T,I;!function(e){e[e.SUCCESS=1e4]=\\\"SUCCESS\\\",e[e.SIGNAL_DISCONNECTED=5e4]=\\\"SIGNAL_DISCONNECTED\\\",e[e.PARAMS_ERROR=50001]=\\\"PARAMS_ERROR\\\",e[e.REPERT_JOIN_ROOM=50002]=\\\"REPERT_JOIN_ROOM\\\",e[e.NOT_IN_ROOM=50003]=\\\"NOT_IN_ROOM\\\",e[e.SERVICE_INVALID=50004]=\\\"SERVICE_INVALID\\\",e[e.RTC_TOKEN_INVALID=50006]=\\\"RTC_TOKEN_INVALID\\\",e[e.SIGNAL_ERROR=53001]=\\\"SIGNAL_ERROR\\\",e[e.CREATE_OFFER_FAILED=53003]=\\\"CREATE_OFFER_FAILED\\\",e[e.REQUEST_FAILED=53004]=\\\"REQUEST_FAILED\\\",e[e.MCU_SERVER_NOT_FOUND=53005]=\\\"MCU_SERVER_NOT_FOUND\\\",e[e.BROADCAST_SUB_LIST_NOT_EMPTY=53007]=\\\"BROADCAST_SUB_LIST_NOT_EMPTY\\\",e[e.ROOM_HAS_BEEN_DESTROYED=53008]=\\\"ROOM_HAS_BEEN_DESTROYED\\\",e[e.NOT_OPEN_VIDEO_AUDIO_SERVER=53009]=\\\"NOT_OPEN_VIDEO_AUDIO_SERVER\\\",e[e.GET_USER_MEDIA_FAILED=53010]=\\\"GET_USER_MEDIA_FAILED\\\",e[e.GET_DISPLAY_MEDIA_FAILED=53011]=\\\"GET_DISPLAY_MEDIA_FAILED\\\",e[e.PERMISSION_DENIED=53012]=\\\"PERMISSION_DENIED\\\",e[e.CREATE_CUSTOM_TRACK_FAILED=53013]=\\\"CREATE_CUSTOM_TRACK_FAILED\\\",e[e.INVALID_TAGS=53014]=\\\"INVALID_TAGS\\\",e[e.INVALID_USER_ID=53015]=\\\"INVALID_USER_ID\\\",e[e.CREATE_FILE_TRACK_FAILED=53016]=\\\"CREATE_FILE_TRACK_FAILED\\\",e[e.INVALID_FILE_INSTANCE=53017]=\\\"INVALID_FILE_INSTANCE\\\",e[e.SET_REMOTE_DESCRIPTION_FAILED=53018]=\\\"SET_REMOTE_DESCRIPTION_FAILED\\\",e[e.BROWSER_NOT_SUPPORT=53019]=\\\"BROWSER_NOT_SUPPORT\\\",e[e.TRACK_NOT_READY=53020]=\\\"TRACK_NOT_READY\\\",e[e.VIDEO_TRACK_MISS_MEDIA_ELEMENT=53021]=\\\"VIDEO_TRACK_MISS_MEDIA_ELEMENT\\\",e[e.TRACK_PLAY_ERROR=53022]=\\\"TRACK_PLAY_ERROR\\\",e[e.SIGNAL_AUDIENCE_JOIN_ROOM_FAILED=53023]=\\\"SIGNAL_AUDIENCE_JOIN_ROOM_FAILED\\\",e[e.SIGNAL_ROOM_CHANGE_IDENTITY_FAILED=53024]=\\\"SIGNAL_ROOM_CHANGE_IDENTITY_FAILED\\\",e[e.PACKAGE_ENVIRONMENT_ERROR=53025]=\\\"PACKAGE_ENVIRONMENT_ERROR\\\",e[e.PUBLISH_TRACK_LIMIT_EXCEEDED=53026]=\\\"PUBLISH_TRACK_LIMIT_EXCEEDED\\\",e[e.CDN_RESOURCE_IS_EMPTY=53027]=\\\"CDN_RESOURCE_IS_EMPTY\\\",e[e.SIGNAL_JOIN_RTC_ROOM_REFUSED=53028]=\\\"SIGNAL_JOIN_RTC_ROOM_REFUSED\\\",e[e.NO_PERMISSION_TO_USE_REQUESTED_DEVICE=53029]=\\\"NO_PERMISSION_TO_USE_REQUESTED_DEVICE\\\",e[e.THE_FUNCTION_IS_DISABLED_IN_PKROOM=53030]=\\\"THE_FUNCTION_IS_DISABLED_IN_PKROOM\\\"}(T||(T={})),function(e){e[e.JOIN_REFUSED=40032]=\\\"JOIN_REFUSED\\\"}(I||(I={}));class E{constructor(){this.queue=[],this.locked=!1}checkToStart(){return S(this,void 0,void 0,(function*(){if(0===this.queue.length||this.locked)return;this.locked=!0;const{resolve:e,task:t,reject:r}=this.queue.shift();let i;try{i=yield t(),e(i)}catch(e){r(e)}this.locked=!1,this.checkToStart()}))}push(e){const t=new Promise(((t,r)=>{this.queue.push({resolve:t,task:e,reject:r})}));return this.checkToStart(),t}}const y=new E,k=e=>y.push(e);let b=!0,P=!0;function O(e,t,r){const i=e.match(t);return i&&i.length>=r&&parseInt(i[r],10)}function L(e,t,r){if(!e.RTCPeerConnection)return;const i=e.RTCPeerConnection.prototype,n=i.addEventListener;i.addEventListener=function(e,i){if(e!==t)return n.apply(this,arguments);const s=e=>{const t=r(e);t&&(i.handleEvent?i.handleEvent(t):i(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(i,s),n.apply(this,[e,s])};const s=i.removeEventListener;i.removeEventListener=function(e,r){if(e!==t||!this._eventMap||!this._eventMap[t])return s.apply(this,arguments);if(!this._eventMap[t].has(r))return s.apply(this,arguments);const i=this._eventMap[t].get(r);return this._eventMap[t].delete(r),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,s.apply(this,[e,i])},Object.defineProperty(i,\\\"on\\\"+t,{get(){return this[\\\"_on\\\"+t]},set(e){this[\\\"_on\\\"+t]&&(this.removeEventListener(t,this[\\\"_on\\\"+t]),delete this[\\\"_on\\\"+t]),e&&this.addEventListener(t,this[\\\"_on\\\"+t]=e)},enumerable:!0,configurable:!0})}function N(e){return\\\"boolean\\\"!=typeof e?new Error(\\\"Argument type: \\\"+typeof e+\\\". Please use a boolean.\\\"):(b=e,e?\\\"adapter.js logging disabled\\\":\\\"adapter.js logging enabled\\\")}function D(e){return\\\"boolean\\\"!=typeof e?new Error(\\\"Argument type: \\\"+typeof e+\\\". Please use a boolean.\\\"):(P=!e,\\\"adapter.js deprecation warnings \\\"+(e?\\\"disabled\\\":\\\"enabled\\\"))}function A(){if(\\\"object\\\"==typeof window){if(b)return;\\\"undefined\\\"!=typeof console&&\\\"function\\\"==typeof console.log&&console.log.apply(console,arguments)}}function M(e,t){P&&console.warn(e+\\\" is deprecated, please use \\\"+t+\\\" instead.\\\")}function x(e){return\\\"[object Object]\\\"===Object.prototype.toString.call(e)}function U(e){return x(e)?Object.keys(e).reduce((function(t,r){const i=x(e[r]),n=i?U(e[r]):e[r],s=i&&!Object.keys(n).length;return void 0===n||s?t:Object.assign(t,{[r]:n})}),{}):e}function w(e,t,r){t&&!r.has(t.id)&&(r.set(t.id,t),Object.keys(t).forEach((i=>{i.endsWith(\\\"Id\\\")?w(e,e.get(t[i]),r):i.endsWith(\\\"Ids\\\")&&t[i].forEach((t=>{w(e,e.get(t),r)}))})))}function $(e,t,r){const i=r?\\\"outbound-rtp\\\":\\\"inbound-rtp\\\",n=new Map;if(null===t)return n;const s=[];return e.forEach((e=>{\\\"track\\\"===e.type&&e.trackIdentifier===t.id&&s.push(e)})),s.forEach((t=>{e.forEach((r=>{r.type===i&&r.trackId===t.id&&w(e,r,n)}))})),n}const j=A;function V(e,t){const r=e&&e.navigator;if(!r.mediaDevices)return;const i=function(e){if(\\\"object\\\"!=typeof e||e.mandatory||e.optional)return e;const t={};return Object.keys(e).forEach((r=>{if(\\\"require\\\"===r||\\\"advanced\\\"===r||\\\"mediaSource\\\"===r)return;const i=\\\"object\\\"==typeof e[r]?e[r]:{ideal:e[r]};void 0!==i.exact&&\\\"number\\\"==typeof i.exact&&(i.min=i.max=i.exact);const n=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):\\\"deviceId\\\"===t?\\\"sourceId\\\":t};if(void 0!==i.ideal){t.optional=t.optional||[];let e={};\\\"number\\\"==typeof i.ideal?(e[n(\\\"min\\\",r)]=i.ideal,t.optional.push(e),e={},e[n(\\\"max\\\",r)]=i.ideal,t.optional.push(e)):(e[n(\\\"\\\",r)]=i.ideal,t.optional.push(e))}void 0!==i.exact&&\\\"number\\\"!=typeof i.exact?(t.mandatory=t.mandatory||{},t.mandatory[n(\\\"\\\",r)]=i.exact):[\\\"min\\\",\\\"max\\\"].forEach((e=>{void 0!==i[e]&&(t.mandatory=t.mandatory||{},t.mandatory[n(e,r)]=i[e])}))})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},n=function(e,n){if(t.version>=61)return n(e);if((e=JSON.parse(JSON.stringify(e)))&&\\\"object\\\"==typeof e.audio){const t=function(e,t,r){t in e&&!(r in e)&&(e[r]=e[t],delete e[t])};t((e=JSON.parse(JSON.stringify(e))).audio,\\\"autoGainControl\\\",\\\"googAutoGainControl\\\"),t(e.audio,\\\"noiseSuppression\\\",\\\"googNoiseSuppression\\\"),e.audio=i(e.audio)}if(e&&\\\"object\\\"==typeof e.video){let s=e.video.facingMode;s=s&&(\\\"object\\\"==typeof s?s:{ideal:s});const o=t.version<66;if(s&&(\\\"user\\\"===s.exact||\\\"environment\\\"===s.exact||\\\"user\\\"===s.ideal||\\\"environment\\\"===s.ideal)&&(!r.mediaDevices.getSupportedConstraints||!r.mediaDevices.getSupportedConstraints().facingMode||o)){let t;if(delete e.video.facingMode,\\\"environment\\\"===s.exact||\\\"environment\\\"===s.ideal?t=[\\\"back\\\",\\\"rear\\\"]:\\\"user\\\"!==s.exact&&\\\"user\\\"!==s.ideal||(t=[\\\"front\\\"]),t)return r.mediaDevices.enumerateDevices().then((r=>{let o=(r=r.filter((e=>\\\"videoinput\\\"===e.kind))).find((e=>t.some((t=>e.label.toLowerCase().includes(t)))));return!o&&r.length&&t.includes(\\\"back\\\")&&(o=r[r.length-1]),o&&(e.video.deviceId=s.exact?{exact:o.deviceId}:{ideal:o.deviceId}),e.video=i(e.video),j(\\\"chrome: \\\"+JSON.stringify(e)),n(e)}))}e.video=i(e.video)}return j(\\\"chrome: \\\"+JSON.stringify(e)),n(e)},s=function(e){return t.version>=64?e:{name:{PermissionDeniedError:\\\"NotAllowedError\\\",PermissionDismissedError:\\\"NotAllowedError\\\",InvalidStateError:\\\"NotAllowedError\\\",DevicesNotFoundError:\\\"NotFoundError\\\",ConstraintNotSatisfiedError:\\\"OverconstrainedError\\\",TrackStartError:\\\"NotReadableError\\\",MediaDeviceFailedDueToShutdown:\\\"NotAllowedError\\\",MediaDeviceKillSwitchOn:\\\"NotAllowedError\\\",TabCaptureError:\\\"AbortError\\\",ScreenCaptureError:\\\"AbortError\\\",DeviceCaptureError:\\\"AbortError\\\"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&\\\": \\\")+this.message}}};if(r.getUserMedia=function(e,t,i){n(e,(e=>{r.webkitGetUserMedia(e,t,(e=>{i&&i(s(e))}))}))}.bind(r),r.mediaDevices.getUserMedia){const e=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(t){return n(t,(t=>e(t).then((e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach((e=>{e.stop()})),new DOMException(\\\"\\\",\\\"NotFoundError\\\");return e}),(e=>Promise.reject(s(e))))))}}}function B(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function H(e){if(\\\"object\\\"==typeof e&&e.RTCPeerConnection&&!(\\\"ontrack\\\"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,\\\"ontrack\\\",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener(\\\"track\\\",this._ontrack),this.addEventListener(\\\"track\\\",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener(\\\"addtrack\\\",(r=>{let i;i=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===r.track.id)):{track:r.track};const n=new Event(\\\"track\\\");n.track=r.track,n.receiver=i,n.transceiver={receiver:i},n.streams=[t.stream],this.dispatchEvent(n)})),t.stream.getTracks().forEach((r=>{let i;i=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===r.id)):{track:r};const n=new Event(\\\"track\\\");n.track=r,n.receiver=i,n.transceiver={receiver:i},n.streams=[t.stream],this.dispatchEvent(n)}))},this.addEventListener(\\\"addstream\\\",this._ontrackpoly)),t.apply(this,arguments)}}else L(e,\\\"track\\\",(e=>(e.transceiver||Object.defineProperty(e,\\\"transceiver\\\",{value:{receiver:e.receiver}}),e)))}function F(e){if(\\\"object\\\"==typeof e&&e.RTCPeerConnection&&!(\\\"getSenders\\\"in e.RTCPeerConnection.prototype)&&\\\"createDTMFSender\\\"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&(\\\"audio\\\"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const r=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,i){let n=r.apply(this,arguments);return n||(n=t(this,e),this._senders.push(n)),n};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){i.apply(this,arguments);const t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],r.apply(this,[e]),e.getTracks().forEach((e=>{this._senders.push(t(this,e))}))};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],i.apply(this,[e]),e.getTracks().forEach((e=>{const t=this._senders.find((t=>t.track===e));t&&this._senders.splice(this._senders.indexOf(t),1)}))}}else if(\\\"object\\\"==typeof e&&e.RTCPeerConnection&&\\\"getSenders\\\"in e.RTCPeerConnection.prototype&&\\\"createDTMFSender\\\"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!(\\\"dtmf\\\"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e},Object.defineProperty(e.RTCRtpSender.prototype,\\\"dtmf\\\",{get(){return void 0===this._dtmf&&(\\\"audio\\\"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function K(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,r,i]=arguments;if(arguments.length>0&&\\\"function\\\"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||\\\"function\\\"!=typeof e))return t.apply(this,[]);const n=function(e){const t={};return e.result().forEach((e=>{const r={id:e.id,timestamp:e.timestamp,type:{localcandidate:\\\"local-candidate\\\",remotecandidate:\\\"remote-candidate\\\"}[e.type]||e.type};e.names().forEach((t=>{r[t]=e.stat(t)})),t[r.id]=r})),t},s=function(e){return new Map(Object.keys(e).map((t=>[t,e[t]])))};if(arguments.length>=2){const i=function(e){r(s(n(e)))};return t.apply(this,[i,e])}return new Promise(((e,r)=>{t.apply(this,[function(t){e(s(n(t)))},r])})).then(r,i)}}function G(e){if(!(\\\"object\\\"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!(\\\"getStats\\\"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=r.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>$(t,e.track,!0)))}}if(!(\\\"getStats\\\"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),L(e,\\\"track\\\",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>$(t,e.track,!1)))}}if(!(\\\"getStats\\\"in e.RTCRtpSender.prototype)||!(\\\"getStats\\\"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const e=arguments[0];let t,r,i;return this.getSenders().forEach((r=>{r.track===e&&(t?i=!0:t=r)})),this.getReceivers().forEach((t=>(t.track===e&&(r?i=!0:r=t),t.track===e))),i||t&&r?Promise.reject(new DOMException(\\\"There are more than one sender or receiver for the track.\\\",\\\"InvalidAccessError\\\")):t?t.getStats():r?r.getStats():Promise.reject(new DOMException(\\\"There is no sender or receiver for the track.\\\",\\\"InvalidAccessError\\\"))}return t.apply(this,arguments)}}function J(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((e=>this._shimmedLocalStreams[e][0]))};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){if(!r)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const i=t.apply(this,arguments);return this._shimmedLocalStreams[r.id]?-1===this._shimmedLocalStreams[r.id].indexOf(i)&&this._shimmedLocalStreams[r.id].push(i):this._shimmedLocalStreams[r.id]=[r,i],i};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException(\\\"Track already exists.\\\",\\\"InvalidAccessError\\\")}));const t=this.getSenders();r.apply(this,arguments);const i=this.getSenders().filter((e=>-1===t.indexOf(e)));this._shimmedLocalStreams[e.id]=[e].concat(i)};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],i.apply(this,arguments)};const n=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((t=>{const r=this._shimmedLocalStreams[t].indexOf(e);-1!==r&&this._shimmedLocalStreams[t].splice(r,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]})),n.apply(this,arguments)}}function W(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return J(e);const r=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=r.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map((e=>this._reverseStreams[e.id]))};const i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException(\\\"Track already exists.\\\",\\\"InvalidAccessError\\\")})),!this._reverseStreams[t.id]){const r=new e.MediaStream(t.getTracks());this._streams[t.id]=r,this._reverseStreams[r.id]=t,t=r}i.apply(this,[t])};const n=e.RTCPeerConnection.prototype.removeStream;function s(e,t){let r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const i=e._reverseStreams[t],n=e._streams[i.id];r=r.replace(new RegExp(n.id,\\\"g\\\"),i.id)})),new RTCSessionDescription({type:t.type,sdp:r})}function o(e,t){let r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const i=e._reverseStreams[t],n=e._streams[i.id];r=r.replace(new RegExp(i.id,\\\"g\\\"),n.id)})),new RTCSessionDescription({type:t.type,sdp:r})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},n.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,r){if(\\\"closed\\\"===this.signalingState)throw new DOMException(\\\"The RTCPeerConnection's signalingState is 'closed'.\\\",\\\"InvalidStateError\\\");const i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find((e=>e===t)))throw new DOMException(\\\"The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.\\\",\\\"NotSupportedError\\\");const n=this.getSenders().find((e=>e.track===t));if(n)throw new DOMException(\\\"Track already exists.\\\",\\\"InvalidAccessError\\\");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const s=this._streams[r.id];if(s)s.addTrack(t),Promise.resolve().then((()=>{this.dispatchEvent(new Event(\\\"negotiationneeded\\\"))}));else{const i=new e.MediaStream([t]);this._streams[r.id]=i,this._reverseStreams[i.id]=r,this.addStream(i)}return this.getSenders().find((e=>e.track===t))},[\\\"createOffer\\\",\\\"createAnswer\\\"].forEach((function(t){const r=e.RTCPeerConnection.prototype[t],i={[t](){const e=arguments;return arguments.length&&\\\"function\\\"==typeof arguments[0]?r.apply(this,[t=>{const r=s(this,t);e[0].apply(null,[r])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):r.apply(this,arguments).then((e=>s(this,e)))}};e.RTCPeerConnection.prototype[t]=i[t]}));const a=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=o(this,arguments[0]),a.apply(this,arguments)):a.apply(this,arguments)};const c=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,\\\"localDescription\\\");Object.defineProperty(e.RTCPeerConnection.prototype,\\\"localDescription\\\",{get(){const e=c.get.apply(this);return\\\"\\\"===e.type?e:s(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){if(\\\"closed\\\"===this.signalingState)throw new DOMException(\\\"The RTCPeerConnection's signalingState is 'closed'.\\\",\\\"InvalidStateError\\\");if(!e._pc)throw new DOMException(\\\"Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.\\\",\\\"TypeError\\\");if(!(e._pc===this))throw new DOMException(\\\"Sender was not created by this connection.\\\",\\\"InvalidAccessError\\\");let t;this._streams=this._streams||{},Object.keys(this._streams).forEach((r=>{this._streams[r].getTracks().find((t=>e.track===t))&&(t=this._streams[r])})),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event(\\\"negotiationneeded\\\")))}}function Y(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&[\\\"setLocalDescription\\\",\\\"setRemoteDescription\\\",\\\"addIceCandidate\\\"].forEach((function(t){const r=e.RTCPeerConnection.prototype[t],i={[t](){return arguments[0]=new(\\\"addIceCandidate\\\"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=i[t]}))}function q(e,t){L(e,\\\"negotiationneeded\\\",(e=>{const r=e.target;if(!(t.version<72||r.getConfiguration&&\\\"plan-b\\\"===r.getConfiguration().sdpSemantics)||\\\"stable\\\"===r.signalingState)return e}))}var z=Object.freeze({__proto__:null,shimMediaStream:B,shimOnTrack:H,shimGetSendersWithDtmf:F,shimGetStats:K,shimSenderReceiverGetStats:G,shimAddTrackRemoveTrackWithNative:J,shimAddTrackRemoveTrack:W,shimPeerConnection:Y,fixNegotiationNeeded:q,shimGetUserMedia:V,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&\\\"getDisplayMedia\\\"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(\\\"function\\\"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(r){return t(r).then((t=>{const i=r.video&&r.video.width,n=r.video&&r.video.height,s=r.video&&r.video.frameRate;return r.video={mandatory:{chromeMediaSource:\\\"desktop\\\",chromeMediaSourceId:t,maxFrameRate:s||3}},i&&(r.video.mandatory.maxWidth=i),n&&(r.video.mandatory.maxHeight=n),e.navigator.mediaDevices.getUserMedia(r)}))}:console.error(\\\"shimGetDisplayMedia: getSourceId argument is not a function\\\"))}});var Q,X,Z=(Q=function(e){var t={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split(\\\"\\\\n\\\").map((function(e){return e.trim()}))},t.splitSections=function(e){return e.split(\\\"\\\\nm=\\\").map((function(e,t){return(t>0?\\\"m=\\\"+e:e).trim()+\\\"\\\\r\\\\n\\\"}))},t.getDescription=function(e){var r=t.splitSections(e);return r&&r[0]},t.getMediaSections=function(e){var r=t.splitSections(e);return r.shift(),r},t.matchPrefix=function(e,r){return t.splitLines(e).filter((function(e){return 0===e.indexOf(r)}))},t.parseCandidate=function(e){for(var t,r={foundation:(t=0===e.indexOf(\\\"a=candidate:\\\")?e.substring(12).split(\\\" \\\"):e.substring(10).split(\\\" \\\"))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},i=8;i<t.length;i+=2)switch(t[i]){case\\\"raddr\\\":r.relatedAddress=t[i+1];break;case\\\"rport\\\":r.relatedPort=parseInt(t[i+1],10);break;case\\\"tcptype\\\":r.tcpType=t[i+1];break;case\\\"ufrag\\\":r.ufrag=t[i+1],r.usernameFragment=t[i+1];break;default:r[t[i]]=t[i+1]}return r},t.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var r=e.type;return t.push(\\\"typ\\\"),t.push(r),\\\"host\\\"!==r&&e.relatedAddress&&e.relatedPort&&(t.push(\\\"raddr\\\"),t.push(e.relatedAddress),t.push(\\\"rport\\\"),t.push(e.relatedPort)),e.tcpType&&\\\"tcp\\\"===e.protocol.toLowerCase()&&(t.push(\\\"tcptype\\\"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push(\\\"ufrag\\\"),t.push(e.usernameFragment||e.ufrag)),\\\"candidate:\\\"+t.join(\\\" \\\")},t.parseIceOptions=function(e){return e.substr(14).split(\\\" \\\")},t.parseRtpMap=function(e){var t=e.substr(9).split(\\\" \\\"),r={payloadType:parseInt(t.shift(),10)};return t=t[0].split(\\\"/\\\"),r.name=t[0],r.clockRate=parseInt(t[1],10),r.channels=3===t.length?parseInt(t[2],10):1,r.numChannels=r.channels,r},t.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var r=e.channels||e.numChannels||1;return\\\"a=rtpmap:\\\"+t+\\\" \\\"+e.name+\\\"/\\\"+e.clockRate+(1!==r?\\\"/\\\"+r:\\\"\\\")+\\\"\\\\r\\\\n\\\"},t.parseExtmap=function(e){var t=e.substr(9).split(\\\" \\\");return{id:parseInt(t[0],10),direction:t[0].indexOf(\\\"/\\\")>0?t[0].split(\\\"/\\\")[1]:\\\"sendrecv\\\",uri:t[1]}},t.writeExtmap=function(e){return\\\"a=extmap:\\\"+(e.id||e.preferredId)+(e.direction&&\\\"sendrecv\\\"!==e.direction?\\\"/\\\"+e.direction:\\\"\\\")+\\\" \\\"+e.uri+\\\"\\\\r\\\\n\\\"},t.parseFmtp=function(e){for(var t,r={},i=e.substr(e.indexOf(\\\" \\\")+1).split(\\\";\\\"),n=0;n<i.length;n++)r[(t=i[n].trim().split(\\\"=\\\"))[0].trim()]=t[1];return r},t.writeFmtp=function(e){var t=\\\"\\\",r=e.payloadType;if(void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var i=[];Object.keys(e.parameters).forEach((function(t){e.parameters[t]?i.push(t+\\\"=\\\"+e.parameters[t]):i.push(t)})),t+=\\\"a=fmtp:\\\"+r+\\\" \\\"+i.join(\\\";\\\")+\\\"\\\\r\\\\n\\\"}return t},t.parseRtcpFb=function(e){var t=e.substr(e.indexOf(\\\" \\\")+1).split(\\\" \\\");return{type:t.shift(),parameter:t.join(\\\" \\\")}},t.writeRtcpFb=function(e){var t=\\\"\\\",r=e.payloadType;return void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+=\\\"a=rtcp-fb:\\\"+r+\\\" \\\"+e.type+(e.parameter&&e.parameter.length?\\\" \\\"+e.parameter:\\\"\\\")+\\\"\\\\r\\\\n\\\"})),t},t.parseSsrcMedia=function(e){var t=e.indexOf(\\\" \\\"),r={ssrc:parseInt(e.substr(7,t-7),10)},i=e.indexOf(\\\":\\\",t);return i>-1?(r.attribute=e.substr(t+1,i-t-1),r.value=e.substr(i+1)):r.attribute=e.substr(t+1),r},t.parseSsrcGroup=function(e){var t=e.substr(13).split(\\\" \\\");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},t.getMid=function(e){var r=t.matchPrefix(e,\\\"a=mid:\\\")[0];if(r)return r.substr(6)},t.parseFingerprint=function(e){var t=e.substr(14).split(\\\" \\\");return{algorithm:t[0].toLowerCase(),value:t[1]}},t.getDtlsParameters=function(e,r){return{role:\\\"auto\\\",fingerprints:t.matchPrefix(e+r,\\\"a=fingerprint:\\\").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){var r=\\\"a=setup:\\\"+t+\\\"\\\\r\\\\n\\\";return e.fingerprints.forEach((function(e){r+=\\\"a=fingerprint:\\\"+e.algorithm+\\\" \\\"+e.value+\\\"\\\\r\\\\n\\\"})),r},t.parseCryptoLine=function(e){var t=e.substr(9).split(\\\" \\\");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return\\\"a=crypto:\\\"+e.tag+\\\" \\\"+e.cryptoSuite+\\\" \\\"+(\\\"object\\\"==typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?\\\" \\\"+e.sessionParams.join(\\\" \\\"):\\\"\\\")+\\\"\\\\r\\\\n\\\"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf(\\\"inline:\\\"))return null;var t=e.substr(7).split(\\\"|\\\");return{keyMethod:\\\"inline\\\",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(\\\":\\\")[0]:void 0,mkiLength:t[2]?t[2].split(\\\":\\\")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+\\\":\\\"+e.keySalt+(e.lifeTime?\\\"|\\\"+e.lifeTime:\\\"\\\")+(e.mkiValue&&e.mkiLength?\\\"|\\\"+e.mkiValue+\\\":\\\"+e.mkiLength:\\\"\\\")},t.getCryptoParameters=function(e,r){return t.matchPrefix(e+r,\\\"a=crypto:\\\").map(t.parseCryptoLine)},t.getIceParameters=function(e,r){var i=t.matchPrefix(e+r,\\\"a=ice-ufrag:\\\")[0],n=t.matchPrefix(e+r,\\\"a=ice-pwd:\\\")[0];return i&&n?{usernameFragment:i.substr(12),password:n.substr(10)}:null},t.writeIceParameters=function(e){return\\\"a=ice-ufrag:\\\"+e.usernameFragment+\\\"\\\\r\\\\na=ice-pwd:\\\"+e.password+\\\"\\\\r\\\\n\\\"},t.parseRtpParameters=function(e){for(var r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},i=t.splitLines(e)[0].split(\\\" \\\"),n=3;n<i.length;n++){var s=i[n],o=t.matchPrefix(e,\\\"a=rtpmap:\\\"+s+\\\" \\\")[0];if(o){var a=t.parseRtpMap(o),c=t.matchPrefix(e,\\\"a=fmtp:\\\"+s+\\\" \\\");switch(a.parameters=c.length?t.parseFmtp(c[0]):{},a.rtcpFeedback=t.matchPrefix(e,\\\"a=rtcp-fb:\\\"+s+\\\" \\\").map(t.parseRtcpFb),r.codecs.push(a),a.name.toUpperCase()){case\\\"RED\\\":case\\\"ULPFEC\\\":r.fecMechanisms.push(a.name.toUpperCase())}}}return t.matchPrefix(e,\\\"a=extmap:\\\").forEach((function(e){r.headerExtensions.push(t.parseExtmap(e))})),r},t.writeRtpDescription=function(e,r){var i=\\\"\\\";i+=\\\"m=\\\"+e+\\\" \\\",i+=r.codecs.length>0?\\\"9\\\":\\\"0\\\",i+=\\\" UDP/TLS/RTP/SAVPF \\\",i+=r.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(\\\" \\\")+\\\"\\\\r\\\\n\\\",i+=\\\"c=IN IP4 0.0.0.0\\\\r\\\\n\\\",i+=\\\"a=rtcp:9 IN IP4 0.0.0.0\\\\r\\\\n\\\",r.codecs.forEach((function(e){i+=t.writeRtpMap(e),i+=t.writeFmtp(e),i+=t.writeRtcpFb(e)}));var n=0;return r.codecs.forEach((function(e){e.maxptime>n&&(n=e.maxptime)})),n>0&&(i+=\\\"a=maxptime:\\\"+n+\\\"\\\\r\\\\n\\\"),i+=\\\"a=rtcp-mux\\\\r\\\\n\\\",r.headerExtensions&&r.headerExtensions.forEach((function(e){i+=t.writeExtmap(e)})),i},t.parseRtpEncodingParameters=function(e){var r,i=[],n=t.parseRtpParameters(e),s=-1!==n.fecMechanisms.indexOf(\\\"RED\\\"),o=-1!==n.fecMechanisms.indexOf(\\\"ULPFEC\\\"),a=t.matchPrefix(e,\\\"a=ssrc:\\\").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return\\\"cname\\\"===e.attribute})),c=a.length>0&&a[0].ssrc,d=t.matchPrefix(e,\\\"a=ssrc-group:FID\\\").map((function(e){return e.substr(17).split(\\\" \\\").map((function(e){return parseInt(e,10)}))}));d.length>0&&d[0].length>1&&d[0][0]===c&&(r=d[0][1]),n.codecs.forEach((function(e){if(\\\"RTX\\\"===e.name.toUpperCase()&&e.parameters.apt){var t={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&r&&(t.rtx={ssrc:r}),i.push(t),s&&((t=JSON.parse(JSON.stringify(t))).fec={ssrc:c,mechanism:o?\\\"red+ulpfec\\\":\\\"red\\\"},i.push(t))}})),0===i.length&&c&&i.push({ssrc:c});var u=t.matchPrefix(e,\\\"b=\\\");return u.length&&(u=0===u[0].indexOf(\\\"b=TIAS:\\\")?parseInt(u[0].substr(7),10):0===u[0].indexOf(\\\"b=AS:\\\")?1e3*parseInt(u[0].substr(5),10)*.95-16e3:void 0,i.forEach((function(e){e.maxBitrate=u}))),i},t.parseRtcpParameters=function(e){var r={},i=t.matchPrefix(e,\\\"a=ssrc:\\\").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return\\\"cname\\\"===e.attribute}))[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);var n=t.matchPrefix(e,\\\"a=rtcp-rsize\\\");r.reducedSize=n.length>0,r.compound=0===n.length;var s=t.matchPrefix(e,\\\"a=rtcp-mux\\\");return r.mux=s.length>0,r},t.parseMsid=function(e){var r,i=t.matchPrefix(e,\\\"a=msid:\\\");if(1===i.length)return{stream:(r=i[0].substr(7).split(\\\" \\\"))[0],track:r[1]};var n=t.matchPrefix(e,\\\"a=ssrc:\\\").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return\\\"msid\\\"===e.attribute}));return n.length>0?{stream:(r=n[0].value.split(\\\" \\\"))[0],track:r[1]}:void 0},t.parseSctpDescription=function(e){var r,i=t.parseMLine(e),n=t.matchPrefix(e,\\\"a=max-message-size:\\\");n.length>0&&(r=parseInt(n[0].substr(19),10)),isNaN(r)&&(r=65536);var s=t.matchPrefix(e,\\\"a=sctp-port:\\\");if(s.length>0)return{port:parseInt(s[0].substr(12),10),protocol:i.fmt,maxMessageSize:r};if(t.matchPrefix(e,\\\"a=sctpmap:\\\").length>0){var o=t.matchPrefix(e,\\\"a=sctpmap:\\\")[0].substr(10).split(\\\" \\\");return{port:parseInt(o[0],10),protocol:o[1],maxMessageSize:r}}},t.writeSctpDescription=function(e,t){var r=[];return r=\\\"DTLS/SCTP\\\"!==e.protocol?[\\\"m=\\\"+e.kind+\\\" 9 \\\"+e.protocol+\\\" \\\"+t.protocol+\\\"\\\\r\\\\n\\\",\\\"c=IN IP4 0.0.0.0\\\\r\\\\n\\\",\\\"a=sctp-port:\\\"+t.port+\\\"\\\\r\\\\n\\\"]:[\\\"m=\\\"+e.kind+\\\" 9 \\\"+e.protocol+\\\" \\\"+t.port+\\\"\\\\r\\\\n\\\",\\\"c=IN IP4 0.0.0.0\\\\r\\\\n\\\",\\\"a=sctpmap:\\\"+t.port+\\\" \\\"+t.protocol+\\\" 65535\\\\r\\\\n\\\"],void 0!==t.maxMessageSize&&r.push(\\\"a=max-message-size:\\\"+t.maxMessageSize+\\\"\\\\r\\\\n\\\"),r.join(\\\"\\\")},t.generateSessionId=function(){return Math.random().toString().substr(2,21)},t.writeSessionBoilerplate=function(e,r,i){var n=void 0!==r?r:2;return\\\"v=0\\\\r\\\\no=\\\"+(i||\\\"thisisadapterortc\\\")+\\\" \\\"+(e||t.generateSessionId())+\\\" \\\"+n+\\\" IN IP4 127.0.0.1\\\\r\\\\ns=-\\\\r\\\\nt=0 0\\\\r\\\\n\\\"},t.writeMediaSection=function(e,r,i,n){var s=t.writeRtpDescription(e.kind,r);if(s+=t.writeIceParameters(e.iceGatherer.getLocalParameters()),s+=t.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),\\\"offer\\\"===i?\\\"actpass\\\":\\\"active\\\"),s+=\\\"a=mid:\\\"+e.mid+\\\"\\\\r\\\\n\\\",e.direction?s+=\\\"a=\\\"+e.direction+\\\"\\\\r\\\\n\\\":e.rtpSender&&e.rtpReceiver?s+=\\\"a=sendrecv\\\\r\\\\n\\\":e.rtpSender?s+=\\\"a=sendonly\\\\r\\\\n\\\":e.rtpReceiver?s+=\\\"a=recvonly\\\\r\\\\n\\\":s+=\\\"a=inactive\\\\r\\\\n\\\",e.rtpSender){var o=\\\"msid:\\\"+n.id+\\\" \\\"+e.rtpSender.track.id+\\\"\\\\r\\\\n\\\";s+=\\\"a=\\\"+o,s+=\\\"a=ssrc:\\\"+e.sendEncodingParameters[0].ssrc+\\\" \\\"+o,e.sendEncodingParameters[0].rtx&&(s+=\\\"a=ssrc:\\\"+e.sendEncodingParameters[0].rtx.ssrc+\\\" \\\"+o,s+=\\\"a=ssrc-group:FID \\\"+e.sendEncodingParameters[0].ssrc+\\\" \\\"+e.sendEncodingParameters[0].rtx.ssrc+\\\"\\\\r\\\\n\\\")}return s+=\\\"a=ssrc:\\\"+e.sendEncodingParameters[0].ssrc+\\\" cname:\\\"+t.localCName+\\\"\\\\r\\\\n\\\",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(s+=\\\"a=ssrc:\\\"+e.sendEncodingParameters[0].rtx.ssrc+\\\" cname:\\\"+t.localCName+\\\"\\\\r\\\\n\\\"),s},t.getDirection=function(e,r){for(var i=t.splitLines(e),n=0;n<i.length;n++)switch(i[n]){case\\\"a=sendrecv\\\":case\\\"a=sendonly\\\":case\\\"a=recvonly\\\":case\\\"a=inactive\\\":return i[n].substr(2)}return r?t.getDirection(r):\\\"sendrecv\\\"},t.getKind=function(e){return t.splitLines(e)[0].split(\\\" \\\")[0].substr(2)},t.isRejected=function(e){return\\\"0\\\"===e.split(\\\" \\\",2)[1]},t.parseMLine=function(e){var r=t.splitLines(e)[0].substr(2).split(\\\" \\\");return{kind:r[0],port:parseInt(r[1],10),protocol:r[2],fmt:r.slice(3).join(\\\" \\\")}},t.parseOLine=function(e){var r=t.matchPrefix(e,\\\"o=\\\")[0].substr(2).split(\\\" \\\");return{username:r[0],sessionId:r[1],sessionVersion:parseInt(r[2],10),netType:r[3],addressType:r[4],address:r[5]}},t.isValidSDP=function(e){if(\\\"string\\\"!=typeof e||0===e.length)return!1;for(var r=t.splitLines(e),i=0;i<r.length;i++)if(r[i].length<2||\\\"=\\\"!==r[i].charAt(1))return!1;return!0},e.exports=t},Q(X={exports:{}},X.exports),X.exports);function ee(e,t,r,i,n){var s=Z.writeRtpDescription(e.kind,t);if(s+=Z.writeIceParameters(e.iceGatherer.getLocalParameters()),s+=Z.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),\\\"offer\\\"===r?\\\"actpass\\\":n||\\\"active\\\"),s+=\\\"a=mid:\\\"+e.mid+\\\"\\\\r\\\\n\\\",e.rtpSender&&e.rtpReceiver?s+=\\\"a=sendrecv\\\\r\\\\n\\\":e.rtpSender?s+=\\\"a=sendonly\\\\r\\\\n\\\":e.rtpReceiver?s+=\\\"a=recvonly\\\\r\\\\n\\\":s+=\\\"a=inactive\\\\r\\\\n\\\",e.rtpSender){var o=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=o;var a=\\\"msid:\\\"+(i?i.id:\\\"-\\\")+\\\" \\\"+o+\\\"\\\\r\\\\n\\\";s+=\\\"a=\\\"+a,s+=\\\"a=ssrc:\\\"+e.sendEncodingParameters[0].ssrc+\\\" \\\"+a,e.sendEncodingParameters[0].rtx&&(s+=\\\"a=ssrc:\\\"+e.sendEncodingParameters[0].rtx.ssrc+\\\" \\\"+a,s+=\\\"a=ssrc-group:FID \\\"+e.sendEncodingParameters[0].ssrc+\\\" \\\"+e.sendEncodingParameters[0].rtx.ssrc+\\\"\\\\r\\\\n\\\")}return s+=\\\"a=ssrc:\\\"+e.sendEncodingParameters[0].ssrc+\\\" cname:\\\"+Z.localCName+\\\"\\\\r\\\\n\\\",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(s+=\\\"a=ssrc:\\\"+e.sendEncodingParameters[0].rtx.ssrc+\\\" cname:\\\"+Z.localCName+\\\"\\\\r\\\\n\\\"),s}function te(e,t){var r={codecs:[],headerExtensions:[],fecMechanisms:[]},i=function(e,t){e=parseInt(e,10);for(var r=0;r<t.length;r++)if(t[r].payloadType===e||t[r].preferredPayloadType===e)return t[r]},n=function(e,t,r,n){var s=i(e.parameters.apt,r),o=i(t.parameters.apt,n);return s&&o&&s.name.toLowerCase()===o.name.toLowerCase()};return e.codecs.forEach((function(i){for(var s=0;s<t.codecs.length;s++){var o=t.codecs[s];if(i.name.toLowerCase()===o.name.toLowerCase()&&i.clockRate===o.clockRate){if(\\\"rtx\\\"===i.name.toLowerCase()&&i.parameters&&o.parameters.apt&&!n(i,o,e.codecs,t.codecs))continue;(o=JSON.parse(JSON.stringify(o))).numChannels=Math.min(i.numChannels,o.numChannels),r.codecs.push(o),o.rtcpFeedback=o.rtcpFeedback.filter((function(e){for(var t=0;t<i.rtcpFeedback.length;t++)if(i.rtcpFeedback[t].type===e.type&&i.rtcpFeedback[t].parameter===e.parameter)return!0;return!1}));break}}})),e.headerExtensions.forEach((function(e){for(var i=0;i<t.headerExtensions.length;i++){var n=t.headerExtensions[i];if(e.uri===n.uri){r.headerExtensions.push(n);break}}})),r}function re(e,t,r){return-1!=={offer:{setLocalDescription:[\\\"stable\\\",\\\"have-local-offer\\\"],setRemoteDescription:[\\\"stable\\\",\\\"have-remote-offer\\\"]},answer:{setLocalDescription:[\\\"have-remote-offer\\\",\\\"have-local-pranswer\\\"],setRemoteDescription:[\\\"have-local-offer\\\",\\\"have-remote-pranswer\\\"]}}[t][e].indexOf(r)}function ie(e,t){var r=e.getRemoteCandidates().find((function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type}));return r||e.addRemoteCandidate(t),!r}function ne(e,t){var r=new Error(t);return r.name=e,r.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],r}var se=function(e,t){function r(t,r){r.addTrack(t),r.dispatchEvent(new e.MediaStreamTrackEvent(\\\"addtrack\\\",{track:t}))}function i(t,r,i,n){var s=new Event(\\\"track\\\");s.track=r,s.receiver=i,s.transceiver={receiver:i},s.streams=n,e.setTimeout((function(){t._dispatchEvent(\\\"track\\\",s)}))}var n=function(r){var i=this,n=document.createDocumentFragment();if([\\\"addEventListener\\\",\\\"removeEventListener\\\",\\\"dispatchEvent\\\"].forEach((function(e){i[e]=n[e].bind(n)})),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState=\\\"stable\\\",this.iceConnectionState=\\\"new\\\",this.connectionState=\\\"new\\\",this.iceGatheringState=\\\"new\\\",r=JSON.parse(JSON.stringify(r||{})),this.usingBundle=\\\"max-bundle\\\"===r.bundlePolicy,\\\"negotiate\\\"===r.rtcpMuxPolicy)throw ne(\\\"NotSupportedError\\\",\\\"rtcpMuxPolicy 'negotiate' is not supported\\\");switch(r.rtcpMuxPolicy||(r.rtcpMuxPolicy=\\\"require\\\"),r.iceTransportPolicy){case\\\"all\\\":case\\\"relay\\\":break;default:r.iceTransportPolicy=\\\"all\\\"}switch(r.bundlePolicy){case\\\"balanced\\\":case\\\"max-compat\\\":case\\\"max-bundle\\\":break;default:r.bundlePolicy=\\\"balanced\\\"}if(r.iceServers=function(e,t){var r=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var i=e.urls||e.url;e.url&&!e.urls&&console.warn(\\\"RTCIceServer.url is deprecated! Use urls instead.\\\");var n=\\\"string\\\"==typeof i;return n&&(i=[i]),i=i.filter((function(e){return 0!==e.indexOf(\\\"turn:\\\")||-1===e.indexOf(\\\"transport=udp\\\")||-1!==e.indexOf(\\\"turn:[\\\")||r?0===e.indexOf(\\\"stun:\\\")&&t>=14393&&-1===e.indexOf(\\\"?transport=udp\\\"):(r=!0,!0)})),delete e.url,e.urls=n?i[0]:i,!!i.length}}))}(r.iceServers||[],t),this._iceGatherers=[],r.iceCandidatePoolSize)for(var s=r.iceCandidatePoolSize;s>0;s--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:r.iceServers,gatherPolicy:r.iceTransportPolicy}));else r.iceCandidatePoolSize=0;this._config=r,this.transceivers=[],this._sdpSessionId=Z.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(n.prototype,\\\"localDescription\\\",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(n.prototype,\\\"remoteDescription\\\",{configurable:!0,get:function(){return this._remoteDescription}}),n.prototype.onicecandidate=null,n.prototype.onaddstream=null,n.prototype.ontrack=null,n.prototype.onremovestream=null,n.prototype.onsignalingstatechange=null,n.prototype.oniceconnectionstatechange=null,n.prototype.onconnectionstatechange=null,n.prototype.onicegatheringstatechange=null,n.prototype.onnegotiationneeded=null,n.prototype.ondatachannel=null,n.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),\\\"function\\\"==typeof this[\\\"on\\\"+e]&&this[\\\"on\\\"+e](t))},n.prototype._emitGatheringStateChange=function(){var e=new Event(\\\"icegatheringstatechange\\\");this._dispatchEvent(\\\"icegatheringstatechange\\\",e)},n.prototype.getConfiguration=function(){return this._config},n.prototype.getLocalStreams=function(){return this.localStreams},n.prototype.getRemoteStreams=function(){return this.remoteStreams},n.prototype._createTransceiver=function(e,t){var r=this.transceivers.length>0,i={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&r)i.iceTransport=this.transceivers[0].iceTransport,i.dtlsTransport=this.transceivers[0].dtlsTransport;else{var n=this._createIceAndDtlsTransports();i.iceTransport=n.iceTransport,i.dtlsTransport=n.dtlsTransport}return t||this.transceivers.push(i),i},n.prototype.addTrack=function(t,r){if(this._isClosed)throw ne(\\\"InvalidStateError\\\",\\\"Attempted to call addTrack on a closed peerconnection.\\\");var i;if(this.transceivers.find((function(e){return e.track===t})))throw ne(\\\"InvalidAccessError\\\",\\\"Track already exists.\\\");for(var n=0;n<this.transceivers.length;n++)this.transceivers[n].track||this.transceivers[n].kind!==t.kind||(i=this.transceivers[n]);return i||(i=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(r)&&this.localStreams.push(r),i.track=t,i.stream=r,i.rtpSender=new e.RTCRtpSender(t,i.dtlsTransport),i.rtpSender},n.prototype.addStream=function(e){var r=this;if(t>=15025)e.getTracks().forEach((function(t){r.addTrack(t,e)}));else{var i=e.clone();e.getTracks().forEach((function(e,t){var r=i.getTracks()[t];e.addEventListener(\\\"enabled\\\",(function(e){r.enabled=e.enabled}))})),i.getTracks().forEach((function(e){r.addTrack(e,i)}))}},n.prototype.removeTrack=function(t){if(this._isClosed)throw ne(\\\"InvalidStateError\\\",\\\"Attempted to call removeTrack on a closed peerconnection.\\\");if(!(t instanceof e.RTCRtpSender))throw new TypeError(\\\"Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.\\\");var r=this.transceivers.find((function(e){return e.rtpSender===t}));if(!r)throw ne(\\\"InvalidAccessError\\\",\\\"Sender was not created by this connection.\\\");var i=r.stream;r.rtpSender.stop(),r.rtpSender=null,r.track=null,r.stream=null,-1===this.transceivers.map((function(e){return e.stream})).indexOf(i)&&this.localStreams.indexOf(i)>-1&&this.localStreams.splice(this.localStreams.indexOf(i),1),this._maybeFireNegotiationNeeded()},n.prototype.removeStream=function(e){var t=this;e.getTracks().forEach((function(e){var r=t.getSenders().find((function(t){return t.track===e}));r&&t.removeTrack(r)}))},n.prototype.getSenders=function(){return this.transceivers.filter((function(e){return!!e.rtpSender})).map((function(e){return e.rtpSender}))},n.prototype.getReceivers=function(){return this.transceivers.filter((function(e){return!!e.rtpReceiver})).map((function(e){return e.rtpReceiver}))},n.prototype._createIceGatherer=function(t,r){var i=this;if(r&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var n=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(n,\\\"state\\\",{value:\\\"new\\\",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var r=!e.candidate||0===Object.keys(e.candidate).length;n.state=r?\\\"completed\\\":\\\"gathering\\\",null!==i.transceivers[t].bufferedCandidateEvents&&i.transceivers[t].bufferedCandidateEvents.push(e)},n.addEventListener(\\\"localcandidate\\\",this.transceivers[t].bufferCandidates),n},n.prototype._gather=function(t,r){var i=this,n=this.transceivers[r].iceGatherer;if(!n.onlocalcandidate){var s=this.transceivers[r].bufferedCandidateEvents;this.transceivers[r].bufferedCandidateEvents=null,n.removeEventListener(\\\"localcandidate\\\",this.transceivers[r].bufferCandidates),n.onlocalcandidate=function(e){if(!(i.usingBundle&&r>0)){var s=new Event(\\\"icecandidate\\\");s.candidate={sdpMid:t,sdpMLineIndex:r};var o=e.candidate,a=!o||0===Object.keys(o).length;if(a)\\\"new\\\"!==n.state&&\\\"gathering\\\"!==n.state||(n.state=\\\"completed\\\");else{\\\"new\\\"===n.state&&(n.state=\\\"gathering\\\"),o.component=1,o.ufrag=n.getLocalParameters().usernameFragment;var c=Z.writeCandidate(o);s.candidate=Object.assign(s.candidate,Z.parseCandidate(c)),s.candidate.candidate=c,s.candidate.toJSON=function(){return{candidate:s.candidate.candidate,sdpMid:s.candidate.sdpMid,sdpMLineIndex:s.candidate.sdpMLineIndex,usernameFragment:s.candidate.usernameFragment}}}var d=Z.getMediaSections(i._localDescription.sdp);d[s.candidate.sdpMLineIndex]+=a?\\\"a=end-of-candidates\\\\r\\\\n\\\":\\\"a=\\\"+s.candidate.candidate+\\\"\\\\r\\\\n\\\",i._localDescription.sdp=Z.getDescription(i._localDescription.sdp)+d.join(\\\"\\\");var u=i.transceivers.every((function(e){return e.iceGatherer&&\\\"completed\\\"===e.iceGatherer.state}));\\\"gathering\\\"!==i.iceGatheringState&&(i.iceGatheringState=\\\"gathering\\\",i._emitGatheringStateChange()),a||i._dispatchEvent(\\\"icecandidate\\\",s),u&&(i._dispatchEvent(\\\"icecandidate\\\",new Event(\\\"icecandidate\\\")),i.iceGatheringState=\\\"complete\\\",i._emitGatheringStateChange())}},e.setTimeout((function(){s.forEach((function(e){n.onlocalcandidate(e)}))}),0)}},n.prototype._createIceAndDtlsTransports=function(){var t=this,r=new e.RTCIceTransport(null);r.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var i=new e.RTCDtlsTransport(r);return i.ondtlsstatechange=function(){t._updateConnectionState()},i.onerror=function(){Object.defineProperty(i,\\\"state\\\",{value:\\\"failed\\\",writable:!0}),t._updateConnectionState()},{iceTransport:r,dtlsTransport:i}},n.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var r=this.transceivers[e].iceTransport;r&&(delete r.onicestatechange,delete this.transceivers[e].iceTransport);var i=this.transceivers[e].dtlsTransport;i&&(delete i.ondtlsstatechange,delete i.onerror,delete this.transceivers[e].dtlsTransport)},n.prototype._transceive=function(e,r,i){var n=te(e.localCapabilities,e.remoteCapabilities);r&&e.rtpSender&&(n.encodings=e.sendEncodingParameters,n.rtcp={cname:Z.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(n.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(n)),i&&e.rtpReceiver&&n.codecs.length>0&&(\\\"video\\\"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach((function(e){delete e.rtx})),e.recvEncodingParameters.length?n.encodings=e.recvEncodingParameters:n.encodings=[{}],n.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(n.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(n.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(n))},n.prototype.setLocalDescription=function(e){var t,r,i=this;if(-1===[\\\"offer\\\",\\\"answer\\\"].indexOf(e.type))return Promise.reject(ne(\\\"TypeError\\\",'Unsupported type \\\"'+e.type+'\\\"'));if(!re(\\\"setLocalDescription\\\",e.type,i.signalingState)||i._isClosed)return Promise.reject(ne(\\\"InvalidStateError\\\",\\\"Can not set local \\\"+e.type+\\\" in state \\\"+i.signalingState));if(\\\"offer\\\"===e.type)t=Z.splitSections(e.sdp),r=t.shift(),t.forEach((function(e,t){var r=Z.parseRtpParameters(e);i.transceivers[t].localCapabilities=r})),i.transceivers.forEach((function(e,t){i._gather(e.mid,t)}));else if(\\\"answer\\\"===e.type){t=Z.splitSections(i._remoteDescription.sdp),r=t.shift();var n=Z.matchPrefix(r,\\\"a=ice-lite\\\").length>0;t.forEach((function(e,t){var s=i.transceivers[t],o=s.iceGatherer,a=s.iceTransport,c=s.dtlsTransport,d=s.localCapabilities,u=s.remoteCapabilities;if(!(Z.isRejected(e)&&0===Z.matchPrefix(e,\\\"a=bundle-only\\\").length)&&!s.rejected){var l=Z.getIceParameters(e,r),h=Z.getDtlsParameters(e,r);n&&(h.role=\\\"server\\\"),i.usingBundle&&0!==t||(i._gather(s.mid,t),\\\"new\\\"===a.state&&a.start(o,l,n?\\\"controlling\\\":\\\"controlled\\\"),\\\"new\\\"===c.state&&c.start(h));var p=te(d,u);i._transceive(s,p.codecs.length>0,!1)}}))}return i._localDescription={type:e.type,sdp:e.sdp},\\\"offer\\\"===e.type?i._updateSignalingState(\\\"have-local-offer\\\"):i._updateSignalingState(\\\"stable\\\"),Promise.resolve()},n.prototype.setRemoteDescription=function(n){var s=this;if(-1===[\\\"offer\\\",\\\"answer\\\"].indexOf(n.type))return Promise.reject(ne(\\\"TypeError\\\",'Unsupported type \\\"'+n.type+'\\\"'));if(!re(\\\"setRemoteDescription\\\",n.type,s.signalingState)||s._isClosed)return Promise.reject(ne(\\\"InvalidStateError\\\",\\\"Can not set remote \\\"+n.type+\\\" in state \\\"+s.signalingState));var o={};s.remoteStreams.forEach((function(e){o[e.id]=e}));var a=[],c=Z.splitSections(n.sdp),d=c.shift(),u=Z.matchPrefix(d,\\\"a=ice-lite\\\").length>0,l=Z.matchPrefix(d,\\\"a=group:BUNDLE \\\").length>0;s.usingBundle=l;var h=Z.matchPrefix(d,\\\"a=ice-options:\\\")[0];return s.canTrickleIceCandidates=!!h&&h.substr(14).split(\\\" \\\").indexOf(\\\"trickle\\\")>=0,c.forEach((function(i,c){var h=Z.splitLines(i),p=Z.getKind(i),_=Z.isRejected(i)&&0===Z.matchPrefix(i,\\\"a=bundle-only\\\").length,m=h[0].substr(2).split(\\\" \\\")[2],f=Z.getDirection(i,d),v=Z.parseMsid(i),R=Z.getMid(i)||Z.generateIdentifier();if(_||\\\"application\\\"===p&&(\\\"DTLS/SCTP\\\"===m||\\\"UDP/DTLS/SCTP\\\"===m))s.transceivers[c]={mid:R,kind:p,protocol:m,rejected:!0};else{var g,S,C,T,I,E,y,k,b;!_&&s.transceivers[c]&&s.transceivers[c].rejected&&(s.transceivers[c]=s._createTransceiver(p,!0));var P,O,L=Z.parseRtpParameters(i);_||(P=Z.getIceParameters(i,d),(O=Z.getDtlsParameters(i,d)).role=\\\"client\\\"),y=Z.parseRtpEncodingParameters(i);var N=Z.parseRtcpParameters(i),D=Z.matchPrefix(i,\\\"a=end-of-candidates\\\",d).length>0,A=Z.matchPrefix(i,\\\"a=candidate:\\\").map((function(e){return Z.parseCandidate(e)})).filter((function(e){return 1===e.component}));if((\\\"offer\\\"===n.type||\\\"answer\\\"===n.type)&&!_&&l&&c>0&&s.transceivers[c]&&(s._disposeIceAndDtlsTransports(c),s.transceivers[c].iceGatherer=s.transceivers[0].iceGatherer,s.transceivers[c].iceTransport=s.transceivers[0].iceTransport,s.transceivers[c].dtlsTransport=s.transceivers[0].dtlsTransport,s.transceivers[c].rtpSender&&s.transceivers[c].rtpSender.setTransport(s.transceivers[0].dtlsTransport),s.transceivers[c].rtpReceiver&&s.transceivers[c].rtpReceiver.setTransport(s.transceivers[0].dtlsTransport)),\\\"offer\\\"!==n.type||_){if(\\\"answer\\\"===n.type&&!_){S=(g=s.transceivers[c]).iceGatherer,C=g.iceTransport,T=g.dtlsTransport,I=g.rtpReceiver,E=g.sendEncodingParameters,k=g.localCapabilities,s.transceivers[c].recvEncodingParameters=y,s.transceivers[c].remoteCapabilities=L,s.transceivers[c].rtcpParameters=N,A.length&&\\\"new\\\"===C.state&&(!u&&!D||l&&0!==c?A.forEach((function(e){ie(g.iceTransport,e)})):C.setRemoteCandidates(A)),l&&0!==c||(\\\"new\\\"===C.state&&C.start(S,P,\\\"controlling\\\"),\\\"new\\\"===T.state&&T.start(O)),!te(g.localCapabilities,g.remoteCapabilities).codecs.filter((function(e){return\\\"rtx\\\"===e.name.toLowerCase()})).length&&g.sendEncodingParameters[0].rtx&&delete g.sendEncodingParameters[0].rtx,s._transceive(g,\\\"sendrecv\\\"===f||\\\"recvonly\\\"===f,\\\"sendrecv\\\"===f||\\\"sendonly\\\"===f),!I||\\\"sendrecv\\\"!==f&&\\\"sendonly\\\"!==f?delete g.rtpReceiver:(b=I.track,v?(o[v.stream]||(o[v.stream]=new e.MediaStream),r(b,o[v.stream]),a.push([b,I,o[v.stream]])):(o.default||(o.default=new e.MediaStream),r(b,o.default),a.push([b,I,o.default])))}}else{(g=s.transceivers[c]||s._createTransceiver(p)).mid=R,g.iceGatherer||(g.iceGatherer=s._createIceGatherer(c,l)),A.length&&\\\"new\\\"===g.iceTransport.state&&(!D||l&&0!==c?A.forEach((function(e){ie(g.iceTransport,e)})):g.iceTransport.setRemoteCandidates(A)),k=e.RTCRtpReceiver.getCapabilities(p),t<15019&&(k.codecs=k.codecs.filter((function(e){return\\\"rtx\\\"!==e.name}))),E=g.sendEncodingParameters||[{ssrc:1001*(2*c+2)}];var M,x=!1;if(\\\"sendrecv\\\"===f||\\\"sendonly\\\"===f){if(x=!g.rtpReceiver,I=g.rtpReceiver||new e.RTCRtpReceiver(g.dtlsTransport,p),x)b=I.track,v&&\\\"-\\\"===v.stream||(v?(o[v.stream]||(o[v.stream]=new e.MediaStream,Object.defineProperty(o[v.stream],\\\"id\\\",{get:function(){return v.stream}})),Object.defineProperty(b,\\\"id\\\",{get:function(){return v.track}}),M=o[v.stream]):(o.default||(o.default=new e.MediaStream),M=o.default)),M&&(r(b,M),g.associatedRemoteMediaStreams.push(M)),a.push([b,I,M])}else g.rtpReceiver&&g.rtpReceiver.track&&(g.associatedRemoteMediaStreams.forEach((function(t){var r=t.getTracks().find((function(e){return e.id===g.rtpReceiver.track.id}));r&&function(t,r){r.removeTrack(t),r.dispatchEvent(new e.MediaStreamTrackEvent(\\\"removetrack\\\",{track:t}))}(r,t)})),g.associatedRemoteMediaStreams=[]);g.localCapabilities=k,g.remoteCapabilities=L,g.rtpReceiver=I,g.rtcpParameters=N,g.sendEncodingParameters=E,g.recvEncodingParameters=y,s._transceive(s.transceivers[c],!1,x)}}})),void 0===s._dtlsRole&&(s._dtlsRole=\\\"offer\\\"===n.type?\\\"active\\\":\\\"passive\\\"),s._remoteDescription={type:n.type,sdp:n.sdp},\\\"offer\\\"===n.type?s._updateSignalingState(\\\"have-remote-offer\\\"):s._updateSignalingState(\\\"stable\\\"),Object.keys(o).forEach((function(t){var r=o[t];if(r.getTracks().length){if(-1===s.remoteStreams.indexOf(r)){s.remoteStreams.push(r);var n=new Event(\\\"addstream\\\");n.stream=r,e.setTimeout((function(){s._dispatchEvent(\\\"addstream\\\",n)}))}a.forEach((function(e){var t=e[0],n=e[1];r.id===e[2].id&&i(s,t,n,[r])}))}})),a.forEach((function(e){e[2]||i(s,e[0],e[1],[])})),e.setTimeout((function(){s&&s.transceivers&&s.transceivers.forEach((function(e){e.iceTransport&&\\\"new\\\"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn(\\\"Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification\\\"),e.iceTransport.addRemoteCandidate({}))}))}),4e3),Promise.resolve()},n.prototype.close=function(){this.transceivers.forEach((function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()})),this._isClosed=!0,this._updateSignalingState(\\\"closed\\\")},n.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event(\\\"signalingstatechange\\\");this._dispatchEvent(\\\"signalingstatechange\\\",t)},n.prototype._maybeFireNegotiationNeeded=function(){var t=this;\\\"stable\\\"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout((function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event(\\\"negotiationneeded\\\");t._dispatchEvent(\\\"negotiationneeded\\\",e)}}),0))},n.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++})),e=\\\"new\\\",t.failed>0?e=\\\"failed\\\":t.checking>0?e=\\\"checking\\\":t.disconnected>0?e=\\\"disconnected\\\":t.new>0?e=\\\"new\\\":t.connected>0?e=\\\"connected\\\":t.completed>0&&(e=\\\"completed\\\"),e!==this.iceConnectionState){this.iceConnectionState=e;var r=new Event(\\\"iceconnectionstatechange\\\");this._dispatchEvent(\\\"iceconnectionstatechange\\\",r)}},n.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)})),t.connected+=t.completed,e=\\\"new\\\",t.failed>0?e=\\\"failed\\\":t.connecting>0?e=\\\"connecting\\\":t.disconnected>0?e=\\\"disconnected\\\":t.new>0?e=\\\"new\\\":t.connected>0&&(e=\\\"connected\\\"),e!==this.connectionState){this.connectionState=e;var r=new Event(\\\"connectionstatechange\\\");this._dispatchEvent(\\\"connectionstatechange\\\",r)}},n.prototype.createOffer=function(){var r=this;if(r._isClosed)return Promise.reject(ne(\\\"InvalidStateError\\\",\\\"Can not call createOffer after close\\\"));var i=r.transceivers.filter((function(e){return\\\"audio\\\"===e.kind})).length,n=r.transceivers.filter((function(e){return\\\"video\\\"===e.kind})).length,s=arguments[0];if(s){if(s.mandatory||s.optional)throw new TypeError(\\\"Legacy mandatory/optional constraints not supported.\\\");void 0!==s.offerToReceiveAudio&&(i=!0===s.offerToReceiveAudio?1:!1===s.offerToReceiveAudio?0:s.offerToReceiveAudio),void 0!==s.offerToReceiveVideo&&(n=!0===s.offerToReceiveVideo?1:!1===s.offerToReceiveVideo?0:s.offerToReceiveVideo)}for(r.transceivers.forEach((function(e){\\\"audio\\\"===e.kind?--i<0&&(e.wantReceive=!1):\\\"video\\\"===e.kind&&--n<0&&(e.wantReceive=!1)}));i>0||n>0;)i>0&&(r._createTransceiver(\\\"audio\\\"),i--),n>0&&(r._createTransceiver(\\\"video\\\"),n--);var o=Z.writeSessionBoilerplate(r._sdpSessionId,r._sdpSessionVersion++);r.transceivers.forEach((function(i,n){var s=i.track,o=i.kind,a=i.mid||Z.generateIdentifier();i.mid=a,i.iceGatherer||(i.iceGatherer=r._createIceGatherer(n,r.usingBundle));var c=e.RTCRtpSender.getCapabilities(o);t<15019&&(c.codecs=c.codecs.filter((function(e){return\\\"rtx\\\"!==e.name}))),c.codecs.forEach((function(e){\\\"H264\\\"===e.name&&void 0===e.parameters[\\\"level-asymmetry-allowed\\\"]&&(e.parameters[\\\"level-asymmetry-allowed\\\"]=\\\"1\\\"),i.remoteCapabilities&&i.remoteCapabilities.codecs&&i.remoteCapabilities.codecs.forEach((function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)}))})),c.headerExtensions.forEach((function(e){(i.remoteCapabilities&&i.remoteCapabilities.headerExtensions||[]).forEach((function(t){e.uri===t.uri&&(e.id=t.id)}))}));var d=i.sendEncodingParameters||[{ssrc:1001*(2*n+1)}];s&&t>=15019&&\\\"video\\\"===o&&!d[0].rtx&&(d[0].rtx={ssrc:d[0].ssrc+1}),i.wantReceive&&(i.rtpReceiver=new e.RTCRtpReceiver(i.dtlsTransport,o)),i.localCapabilities=c,i.sendEncodingParameters=d})),\\\"max-compat\\\"!==r._config.bundlePolicy&&(o+=\\\"a=group:BUNDLE \\\"+r.transceivers.map((function(e){return e.mid})).join(\\\" \\\")+\\\"\\\\r\\\\n\\\"),o+=\\\"a=ice-options:trickle\\\\r\\\\n\\\",r.transceivers.forEach((function(e,t){o+=ee(e,e.localCapabilities,\\\"offer\\\",e.stream,r._dtlsRole),o+=\\\"a=rtcp-rsize\\\\r\\\\n\\\",!e.iceGatherer||\\\"new\\\"===r.iceGatheringState||0!==t&&r.usingBundle||(e.iceGatherer.getLocalCandidates().forEach((function(e){e.component=1,o+=\\\"a=\\\"+Z.writeCandidate(e)+\\\"\\\\r\\\\n\\\"})),\\\"completed\\\"===e.iceGatherer.state&&(o+=\\\"a=end-of-candidates\\\\r\\\\n\\\"))}));var a=new e.RTCSessionDescription({type:\\\"offer\\\",sdp:o});return Promise.resolve(a)},n.prototype.createAnswer=function(){var r=this;if(r._isClosed)return Promise.reject(ne(\\\"InvalidStateError\\\",\\\"Can not call createAnswer after close\\\"));if(\\\"have-remote-offer\\\"!==r.signalingState&&\\\"have-local-pranswer\\\"!==r.signalingState)return Promise.reject(ne(\\\"InvalidStateError\\\",\\\"Can not call createAnswer in signalingState \\\"+r.signalingState));var i=Z.writeSessionBoilerplate(r._sdpSessionId,r._sdpSessionVersion++);r.usingBundle&&(i+=\\\"a=group:BUNDLE \\\"+r.transceivers.map((function(e){return e.mid})).join(\\\" \\\")+\\\"\\\\r\\\\n\\\"),i+=\\\"a=ice-options:trickle\\\\r\\\\n\\\";var n=Z.getMediaSections(r._remoteDescription.sdp).length;r.transceivers.forEach((function(e,s){if(!(s+1>n)){if(e.rejected)return\\\"application\\\"===e.kind?\\\"DTLS/SCTP\\\"===e.protocol?i+=\\\"m=application 0 DTLS/SCTP 5000\\\\r\\\\n\\\":i+=\\\"m=application 0 \\\"+e.protocol+\\\" webrtc-datachannel\\\\r\\\\n\\\":\\\"audio\\\"===e.kind?i+=\\\"m=audio 0 UDP/TLS/RTP/SAVPF 0\\\\r\\\\na=rtpmap:0 PCMU/8000\\\\r\\\\n\\\":\\\"video\\\"===e.kind&&(i+=\\\"m=video 0 UDP/TLS/RTP/SAVPF 120\\\\r\\\\na=rtpmap:120 VP8/90000\\\\r\\\\n\\\"),void(i+=\\\"c=IN IP4 0.0.0.0\\\\r\\\\na=inactive\\\\r\\\\na=mid:\\\"+e.mid+\\\"\\\\r\\\\n\\\");var o;if(e.stream)\\\"audio\\\"===e.kind?o=e.stream.getAudioTracks()[0]:\\\"video\\\"===e.kind&&(o=e.stream.getVideoTracks()[0]),o&&t>=15019&&\\\"video\\\"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1});var a=te(e.localCapabilities,e.remoteCapabilities);!a.codecs.filter((function(e){return\\\"rtx\\\"===e.name.toLowerCase()})).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,i+=ee(e,a,\\\"answer\\\",e.stream,r._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(i+=\\\"a=rtcp-rsize\\\\r\\\\n\\\")}}));var s=new e.RTCSessionDescription({type:\\\"answer\\\",sdp:i});return Promise.resolve(s)},n.prototype.addIceCandidate=function(e){var t,r=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError(\\\"sdpMLineIndex or sdpMid required\\\")):new Promise((function(i,n){if(!r._remoteDescription)return n(ne(\\\"InvalidStateError\\\",\\\"Can not add ICE candidate without a remote description\\\"));if(e&&\\\"\\\"!==e.candidate){var s=e.sdpMLineIndex;if(e.sdpMid)for(var o=0;o<r.transceivers.length;o++)if(r.transceivers[o].mid===e.sdpMid){s=o;break}var a=r.transceivers[s];if(!a)return n(ne(\\\"OperationError\\\",\\\"Can not add ICE candidate\\\"));if(a.rejected)return i();var c=Object.keys(e.candidate).length>0?Z.parseCandidate(e.candidate):{};if(\\\"tcp\\\"===c.protocol&&(0===c.port||9===c.port))return i();if(c.component&&1!==c.component)return i();if((0===s||s>0&&a.iceTransport!==r.transceivers[0].iceTransport)&&!ie(a.iceTransport,c))return n(ne(\\\"OperationError\\\",\\\"Can not add ICE candidate\\\"));var d=e.candidate.trim();0===d.indexOf(\\\"a=\\\")&&(d=d.substr(2)),(t=Z.getMediaSections(r._remoteDescription.sdp))[s]+=\\\"a=\\\"+(c.type?d:\\\"end-of-candidates\\\")+\\\"\\\\r\\\\n\\\",r._remoteDescription.sdp=Z.getDescription(r._remoteDescription.sdp)+t.join(\\\"\\\")}else for(var u=0;u<r.transceivers.length&&(r.transceivers[u].rejected||(r.transceivers[u].iceTransport.addRemoteCandidate({}),(t=Z.getMediaSections(r._remoteDescription.sdp))[u]+=\\\"a=end-of-candidates\\\\r\\\\n\\\",r._remoteDescription.sdp=Z.getDescription(r._remoteDescription.sdp)+t.join(\\\"\\\"),!r.usingBundle));u++);i()}))},n.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var r=null;if(this.transceivers.forEach((function(e){e.rtpSender&&e.rtpSender.track===t?r=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(r=e.rtpReceiver)})),!r)throw ne(\\\"InvalidAccessError\\\",\\\"Invalid selector.\\\");return r.getStats()}var i=[];return this.transceivers.forEach((function(e){[\\\"rtpSender\\\",\\\"rtpReceiver\\\",\\\"iceGatherer\\\",\\\"iceTransport\\\",\\\"dtlsTransport\\\"].forEach((function(t){e[t]&&i.push(e[t].getStats())}))})),Promise.all(i).then((function(e){var t=new Map;return e.forEach((function(e){e.forEach((function(e){t.set(e.id,e)}))})),t}))};[\\\"RTCRtpSender\\\",\\\"RTCRtpReceiver\\\",\\\"RTCIceGatherer\\\",\\\"RTCIceTransport\\\",\\\"RTCDtlsTransport\\\"].forEach((function(t){var r=e[t];if(r&&r.prototype&&r.prototype.getStats){var i=r.prototype.getStats;r.prototype.getStats=function(){return i.apply(this).then((function(e){var t=new Map;return Object.keys(e).forEach((function(r){var i;e[r].type={inboundrtp:\\\"inbound-rtp\\\",outboundrtp:\\\"outbound-rtp\\\",candidatepair:\\\"candidate-pair\\\",localcandidate:\\\"local-candidate\\\",remotecandidate:\\\"remote-candidate\\\"}[(i=e[r]).type]||i.type,t.set(r,e[r])})),t}))}}}));var s=[\\\"createOffer\\\",\\\"createAnswer\\\"];return s.forEach((function(e){var t=n.prototype[e];n.prototype[e]=function(){var e=arguments;return\\\"function\\\"==typeof e[0]||\\\"function\\\"==typeof e[1]?t.apply(this,[arguments[2]]).then((function(t){\\\"function\\\"==typeof e[0]&&e[0].apply(null,[t])}),(function(t){\\\"function\\\"==typeof e[1]&&e[1].apply(null,[t])})):t.apply(this,arguments)}})),(s=[\\\"setLocalDescription\\\",\\\"setRemoteDescription\\\",\\\"addIceCandidate\\\"]).forEach((function(e){var t=n.prototype[e];n.prototype[e]=function(){var e=arguments;return\\\"function\\\"==typeof e[1]||\\\"function\\\"==typeof e[2]?t.apply(this,arguments).then((function(){\\\"function\\\"==typeof e[1]&&e[1].apply(null)}),(function(t){\\\"function\\\"==typeof e[2]&&e[2].apply(null,[t])})):t.apply(this,arguments)}})),[\\\"getStats\\\"].forEach((function(e){var t=n.prototype[e];n.prototype[e]=function(){var e=arguments;return\\\"function\\\"==typeof e[1]?t.apply(this,arguments).then((function(){\\\"function\\\"==typeof e[1]&&e[1].apply(null)})):t.apply(this,arguments)}})),n};function oe(e){const t=e&&e.navigator,r=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return r(e).catch((e=>Promise.reject(function(e){return{name:{PermissionDeniedError:\\\"NotAllowedError\\\"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString(){return this.name}}}(e))))}}function ae(e){\\\"getDisplayMedia\\\"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&\\\"getDisplayMedia\\\"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}function ce(e,t){if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){const t=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,\\\"enabled\\\");Object.defineProperty(e.MediaStreamTrack.prototype,\\\"enabled\\\",{set(e){t.set.call(this,e);const r=new Event(\\\"enabled\\\");r.enabled=e,this.dispatchEvent(r)}})}e.RTCRtpSender&&!(\\\"dtmf\\\"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,\\\"dtmf\\\",{get(){return void 0===this._dtmf&&(\\\"audio\\\"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):\\\"video\\\"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);const r=se(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=function(e,t){let r=!1;return(e=JSON.parse(JSON.stringify(e))).filter((e=>{if(e&&(e.urls||e.url)){let t=e.urls||e.url;e.url&&!e.urls&&M(\\\"RTCIceServer.url\\\",\\\"RTCIceServer.urls\\\");const i=\\\"string\\\"==typeof t;return i&&(t=[t]),t=t.filter((e=>{if(0===e.indexOf(\\\"stun:\\\"))return!1;const t=e.startsWith(\\\"turn\\\")&&!e.startsWith(\\\"turn:[\\\")&&e.includes(\\\"transport=udp\\\");return t&&!r?(r=!0,!0):t&&!r})),delete e.url,e.urls=i?t[0]:t,!!t.length}}))}(e.iceServers,t.version),A(\\\"ICE servers after filtering:\\\",e.iceServers)),new r(e)},e.RTCPeerConnection.prototype=r.prototype}function de(e){e.RTCRtpSender&&!(\\\"replaceTrack\\\"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}var ue=Object.freeze({__proto__:null,shimPeerConnection:ce,shimReplaceTrack:de,shimGetUserMedia:oe,shimGetDisplayMedia:ae});function le(e,t){const r=e&&e.navigator,i=e&&e.MediaStreamTrack;if(r.getUserMedia=function(e,t,i){M(\\\"navigator.getUserMedia\\\",\\\"navigator.mediaDevices.getUserMedia\\\"),r.mediaDevices.getUserMedia(e).then(t,i)},!(t.version>55&&\\\"autoGainControl\\\"in r.mediaDevices.getSupportedConstraints())){const e=function(e,t,r){t in e&&!(r in e)&&(e[r]=e[t],delete e[t])},t=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(r){return\\\"object\\\"==typeof r&&\\\"object\\\"==typeof r.audio&&(r=JSON.parse(JSON.stringify(r)),e(r.audio,\\\"autoGainControl\\\",\\\"mozAutoGainControl\\\"),e(r.audio,\\\"noiseSuppression\\\",\\\"mozNoiseSuppression\\\")),t(r)},i&&i.prototype.getSettings){const t=i.prototype.getSettings;i.prototype.getSettings=function(){const r=t.apply(this,arguments);return e(r,\\\"mozAutoGainControl\\\",\\\"autoGainControl\\\"),e(r,\\\"mozNoiseSuppression\\\",\\\"noiseSuppression\\\"),r}}if(i&&i.prototype.applyConstraints){const t=i.prototype.applyConstraints;i.prototype.applyConstraints=function(r){return\\\"audio\\\"===this.kind&&\\\"object\\\"==typeof r&&(r=JSON.parse(JSON.stringify(r)),e(r,\\\"autoGainControl\\\",\\\"mozAutoGainControl\\\"),e(r,\\\"noiseSuppression\\\",\\\"mozNoiseSuppression\\\")),t.apply(this,[r])}}}}function he(e){\\\"object\\\"==typeof e&&e.RTCTrackEvent&&\\\"receiver\\\"in e.RTCTrackEvent.prototype&&!(\\\"transceiver\\\"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,\\\"transceiver\\\",{get(){return{receiver:this.receiver}}})}function pe(e,t){if(\\\"object\\\"!=typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&[\\\"setLocalDescription\\\",\\\"setRemoteDescription\\\",\\\"addIceCandidate\\\"].forEach((function(t){const r=e.RTCPeerConnection.prototype[t],i={[t](){return arguments[0]=new(\\\"addIceCandidate\\\"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=i[t]}));const r={inboundrtp:\\\"inbound-rtp\\\",outboundrtp:\\\"outbound-rtp\\\",candidatepair:\\\"candidate-pair\\\",localcandidate:\\\"local-candidate\\\",remotecandidate:\\\"remote-candidate\\\"},i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,n,s]=arguments;return i.apply(this,[e||null]).then((e=>{if(t.version<53&&!n)try{e.forEach((e=>{e.type=r[e.type]||e.type}))}catch(t){if(\\\"TypeError\\\"!==t.name)throw t;e.forEach(((t,i)=>{e.set(i,Object.assign({},t,{type:r[t.type]||t.type}))}))}return e})).then(n,s)}}function _e(e){if(\\\"object\\\"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&\\\"getStats\\\"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=r.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function me(e){if(\\\"object\\\"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&\\\"getStats\\\"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),L(e,\\\"track\\\",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function fe(e){e.RTCPeerConnection&&!(\\\"removeStream\\\"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){M(\\\"removeStream\\\",\\\"removeTrack\\\"),this.getSenders().forEach((t=>{t.track&&e.getTracks().includes(t.track)&&this.removeTrack(t)}))})}function ve(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function Re(e){if(\\\"object\\\"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const e=arguments[1],r=e&&\\\"sendEncodings\\\"in e;r&&e.sendEncodings.forEach((e=>{if(\\\"rid\\\"in e){if(!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError(\\\"Invalid RID value provided.\\\")}if(\\\"scaleResolutionDownBy\\\"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError(\\\"scale_resolution_down_by must be >= 1.0\\\");if(\\\"maxFramerate\\\"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError(\\\"max_framerate must be >= 0.0\\\")}));const i=t.apply(this,arguments);if(r){const{sender:t}=i,r=t.getParameters();(!(\\\"encodings\\\"in r)||1===r.encodings.length&&0===Object.keys(r.encodings[0]).length)&&(r.encodings=e.sendEncodings,t.sendEncodings=e.sendEncodings,this.setParametersPromises.push(t.setParameters(r).then((()=>{delete t.sendEncodings})).catch((()=>{delete t.sendEncodings}))))}return i})}function ge(e){if(\\\"object\\\"!=typeof e||!e.RTCRtpSender)return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const e=t.apply(this,arguments);return\\\"encodings\\\"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}function Se(e){if(\\\"object\\\"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}function Ce(e){if(\\\"object\\\"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}var Te=Object.freeze({__proto__:null,shimOnTrack:he,shimPeerConnection:pe,shimSenderGetStats:_e,shimReceiverGetStats:me,shimRemoveStream:fe,shimRTCDataChannel:ve,shimAddTransceiver:Re,shimGetParameters:ge,shimCreateOffer:Se,shimCreateAnswer:Ce,shimGetUserMedia:le,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&\\\"getDisplayMedia\\\"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!r||!r.video){const e=new DOMException(\\\"getDisplayMedia without video constraints is undefined\\\");return e.name=\\\"NotFoundError\\\",e.code=8,Promise.reject(e)}return!0===r.video?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})}});function Ie(e){if(\\\"object\\\"==typeof e&&e.RTCPeerConnection){if(\\\"getLocalStreams\\\"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!(\\\"addStream\\\"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((r=>t.call(this,r,e))),e.getVideoTracks().forEach((r=>t.call(this,r,e)))},e.RTCPeerConnection.prototype.addTrack=function(e,...r){return r&&r.forEach((e=>{this._localStreams?this._localStreams.includes(e)||this._localStreams.push(e):this._localStreams=[e]})),t.apply(this,arguments)}}\\\"removeStream\\\"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(-1===t)return;this._localStreams.splice(t,1);const r=e.getTracks();this.getSenders().forEach((e=>{r.includes(e.track)&&this.removeTrack(e)}))})}}function Ee(e){if(\\\"object\\\"==typeof e&&e.RTCPeerConnection&&(\\\"getRemoteStreams\\\"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!(\\\"onaddstream\\\"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,\\\"onaddstream\\\",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener(\\\"addstream\\\",this._onaddstream),this.removeEventListener(\\\"track\\\",this._onaddstreampoly)),this.addEventListener(\\\"addstream\\\",this._onaddstream=e),this.addEventListener(\\\"track\\\",this._onaddstreampoly=e=>{e.streams.forEach((e=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(e))return;this._remoteStreams.push(e);const t=new Event(\\\"addstream\\\");t.stream=e,this.dispatchEvent(t)}))})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener(\\\"track\\\",this._onaddstreampoly=function(t){t.streams.forEach((t=>{if(e._remoteStreams||(e._remoteStreams=[]),e._remoteStreams.indexOf(t)>=0)return;e._remoteStreams.push(t);const r=new Event(\\\"addstream\\\");r.stream=t,e.dispatchEvent(r)}))}),t.apply(e,arguments)}}}function ye(e){if(\\\"object\\\"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,r=t.createOffer,i=t.createAnswer,n=t.setLocalDescription,s=t.setRemoteDescription,o=t.addIceCandidate;t.createOffer=function(e,t){const i=arguments.length>=2?arguments[2]:arguments[0],n=r.apply(this,[i]);return t?(n.then(e,t),Promise.resolve()):n},t.createAnswer=function(e,t){const r=arguments.length>=2?arguments[2]:arguments[0],n=i.apply(this,[r]);return t?(n.then(e,t),Promise.resolve()):n};let a=function(e,t,r){const i=n.apply(this,[e]);return r?(i.then(t,r),Promise.resolve()):i};t.setLocalDescription=a,a=function(e,t,r){const i=s.apply(this,[e]);return r?(i.then(t,r),Promise.resolve()):i},t.setRemoteDescription=a,a=function(e,t,r){const i=o.apply(this,[e]);return r?(i.then(t,r),Promise.resolve()):i},t.addIceCandidate=a}function ke(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,r=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=e=>r(be(e))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,r,i){t.mediaDevices.getUserMedia(e).then(r,i)}.bind(t))}function be(e){return e&&void 0!==e.video?Object.assign({},e,{video:U(e.video)}):e}function Pe(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,r){if(e&&e.iceServers){const t=[];for(let r=0;r<e.iceServers.length;r++){let i=e.iceServers[r];!i.hasOwnProperty(\\\"urls\\\")&&i.hasOwnProperty(\\\"url\\\")?(M(\\\"RTCIceServer.url\\\",\\\"RTCIceServer.urls\\\"),i=JSON.parse(JSON.stringify(i)),i.urls=i.url,delete i.url,t.push(i)):t.push(e.iceServers[r])}e.iceServers=t}return new t(e,r)},e.RTCPeerConnection.prototype=t.prototype,\\\"generateCertificate\\\"in t&&Object.defineProperty(e.RTCPeerConnection,\\\"generateCertificate\\\",{get:()=>t.generateCertificate})}function Oe(e){\\\"object\\\"==typeof e&&e.RTCTrackEvent&&\\\"receiver\\\"in e.RTCTrackEvent.prototype&&!(\\\"transceiver\\\"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,\\\"transceiver\\\",{get(){return{receiver:this.receiver}}})}function Le(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find((e=>\\\"audio\\\"===e.receiver.track.kind));!1===e.offerToReceiveAudio&&t?\\\"sendrecv\\\"===t.direction?t.setDirection?t.setDirection(\\\"sendonly\\\"):t.direction=\\\"sendonly\\\":\\\"recvonly\\\"===t.direction&&(t.setDirection?t.setDirection(\\\"inactive\\\"):t.direction=\\\"inactive\\\"):!0!==e.offerToReceiveAudio||t||this.addTransceiver(\\\"audio\\\"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const r=this.getTransceivers().find((e=>\\\"video\\\"===e.receiver.track.kind));!1===e.offerToReceiveVideo&&r?\\\"sendrecv\\\"===r.direction?r.setDirection?r.setDirection(\\\"sendonly\\\"):r.direction=\\\"sendonly\\\":\\\"recvonly\\\"===r.direction&&(r.setDirection?r.setDirection(\\\"inactive\\\"):r.direction=\\\"inactive\\\"):!0!==e.offerToReceiveVideo||r||this.addTransceiver(\\\"video\\\")}return t.apply(this,arguments)}}function Ne(e){\\\"object\\\"!=typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var De=Object.freeze({__proto__:null,shimLocalStreamsAPI:Ie,shimRemoteStreamsAPI:Ee,shimCallbacksAPI:ye,shimGetUserMedia:ke,shimConstraints:be,shimRTCIceServerUrls:Pe,shimTrackEventTransceiver:Oe,shimCreateOfferLegacy:Le,shimAudioContext:Ne});function Ae(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&\\\"foundation\\\"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if(\\\"object\\\"==typeof e&&e.candidate&&0===e.candidate.indexOf(\\\"a=\\\")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){const r=new t(e),i=Z.parseCandidate(e.candidate),n=Object.assign(r,i);return n.toJSON=function(){return{candidate:n.candidate,sdpMid:n.sdpMid,sdpMLineIndex:n.sdpMLineIndex,usernameFragment:n.usernameFragment}},n}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,L(e,\\\"icecandidate\\\",(t=>(t.candidate&&Object.defineProperty(t,\\\"candidate\\\",{value:new e.RTCIceCandidate(t.candidate),writable:\\\"false\\\"}),t)))}function Me(e,t){if(!e.RTCPeerConnection)return;\\\"sctp\\\"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,\\\"sctp\\\",{get(){return void 0===this._sctp?null:this._sctp}});const r=function(e){if(!e||!e.sdp)return!1;const t=Z.splitSections(e.sdp);return t.shift(),t.some((e=>{const t=Z.parseMLine(e);return t&&\\\"application\\\"===t.kind&&-1!==t.protocol.indexOf(\\\"SCTP\\\")}))},i=function(e){const t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\\\\d+)/);if(null===t||t.length<2)return-1;const r=parseInt(t[1],10);return r!=r?-1:r},n=function(e){let r=65536;return\\\"firefox\\\"===t.browser&&(r=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),r},s=function(e,r){let i=65536;\\\"firefox\\\"===t.browser&&57===t.version&&(i=65535);const n=Z.matchPrefix(e.sdp,\\\"a=max-message-size:\\\");return n.length>0?i=parseInt(n[0].substr(19),10):\\\"firefox\\\"===t.browser&&-1!==r&&(i=2147483637),i},o=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,\\\"chrome\\\"===t.browser&&t.version>=76){const{sdpSemantics:e}=this.getConfiguration();\\\"plan-b\\\"===e&&Object.defineProperty(this,\\\"sctp\\\",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(r(arguments[0])){const e=i(arguments[0]),t=n(e),r=s(arguments[0],e);let o;o=0===t&&0===r?Number.POSITIVE_INFINITY:0===t||0===r?Math.max(t,r):Math.min(t,r);const a={};Object.defineProperty(a,\\\"maxMessageSize\\\",{get:()=>o}),this._sctp=a}return o.apply(this,arguments)}}function xe(e){if(!e.RTCPeerConnection||!(\\\"createDataChannel\\\"in e.RTCPeerConnection.prototype))return;function t(e,t){const r=e.send;e.send=function(){const i=arguments[0],n=i.length||i.size||i.byteLength;if(\\\"open\\\"===e.readyState&&t.sctp&&n>t.sctp.maxMessageSize)throw new TypeError(\\\"Message too large (can send a maximum of \\\"+t.sctp.maxMessageSize+\\\" bytes)\\\");return r.apply(e,arguments)}}const r=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const e=r.apply(this,arguments);return t(e,this),e},L(e,\\\"datachannel\\\",(e=>(t(e.channel,e.target),e)))}function Ue(e){if(!e.RTCPeerConnection||\\\"connectionState\\\"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,\\\"connectionState\\\",{get(){return{completed:\\\"connected\\\",checking:\\\"connecting\\\"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,\\\"onconnectionstatechange\\\",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener(\\\"connectionstatechange\\\",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener(\\\"connectionstatechange\\\",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),[\\\"setLocalDescription\\\",\\\"setRemoteDescription\\\"].forEach((e=>{const r=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;const r=new Event(\\\"connectionstatechange\\\",e);t.dispatchEvent(r)}return e},this.addEventListener(\\\"iceconnectionstatechange\\\",this._connectionstatechangepoly)),r.apply(this,arguments)}}))}function we(e,t){if(!e.RTCPeerConnection)return;if(\\\"chrome\\\"===t.browser&&t.version>=71)return;if(\\\"safari\\\"===t.browser&&t.version>=605)return;const r=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf(\\\"\\\\na=extmap-allow-mixed\\\")){const r=t.sdp.split(\\\"\\\\n\\\").filter((e=>\\\"a=extmap-allow-mixed\\\"!==e.trim())).join(\\\"\\\\n\\\");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:r}):t.sdp=r}return r.apply(this,arguments)}}function $e(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const r=e.RTCPeerConnection.prototype.addIceCandidate;r&&0!==r.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(\\\"chrome\\\"===t.browser&&t.version<78||\\\"firefox\\\"===t.browser&&t.version<68||\\\"safari\\\"===t.browser)&&arguments[0]&&\\\"\\\"===arguments[0].candidate?Promise.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}var je=Object.freeze({__proto__:null,shimRTCIceCandidate:Ae,shimMaxMessageSize:Me,shimSendThrowTypeError:xe,shimConnectionState:Ue,removeExtmapAllowMixed:we,shimAddIceCandidateNullOrEmpty:$e});const Ve=function({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0}){const r=A,i=function(e){const t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser=\\\"Not a browser.\\\",t;const{navigator:r}=e;if(r.mozGetUserMedia)t.browser=\\\"firefox\\\",t.version=O(r.userAgent,/Firefox\\\\/(\\\\d+)\\\\./,1);else if(r.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser=\\\"chrome\\\",t.version=O(r.userAgent,/Chrom(e|ium)\\\\/(\\\\d+)\\\\./,2);else if(r.mediaDevices&&r.userAgent.match(/Edge\\\\/(\\\\d+).(\\\\d+)$/))t.browser=\\\"edge\\\",t.version=O(r.userAgent,/Edge\\\\/(\\\\d+).(\\\\d+)$/,2);else{if(!e.RTCPeerConnection||!r.userAgent.match(/AppleWebKit\\\\/(\\\\d+)\\\\./))return t.browser=\\\"Not a supported browser.\\\",t;t.browser=\\\"safari\\\",t.version=O(r.userAgent,/AppleWebKit\\\\/(\\\\d+)\\\\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&\\\"currentDirection\\\"in e.RTCRtpTransceiver.prototype}return t}(e),n={browserDetails:i,commonShim:je,extractVersion:O,disableLog:N,disableWarnings:D};switch(i.browser){case\\\"chrome\\\":if(!z||!Y||!t.shimChrome)return r(\\\"Chrome shim is not included in this adapter release.\\\"),n;if(null===i.version)return r(\\\"Chrome shim can not determine version, not shimming.\\\"),n;r(\\\"adapter.js shimming chrome.\\\"),n.browserShim=z,$e(e,i),V(e,i),B(e),Y(e,i),H(e),W(e,i),F(e),K(e),G(e),q(e,i),Ae(e),Ue(e),Me(e,i),xe(e),we(e,i);break;case\\\"firefox\\\":if(!Te||!pe||!t.shimFirefox)return r(\\\"Firefox shim is not included in this adapter release.\\\"),n;r(\\\"adapter.js shimming firefox.\\\"),n.browserShim=Te,$e(e,i),le(e,i),pe(e,i),he(e),fe(e),_e(e),me(e),ve(e),Re(e),ge(e),Se(e),Ce(e),Ae(e),Ue(e),Me(e,i),xe(e);break;case\\\"edge\\\":if(!ue||!ce||!t.shimEdge)return r(\\\"MS edge shim is not included in this adapter release.\\\"),n;r(\\\"adapter.js shimming edge.\\\"),n.browserShim=ue,oe(e),ae(e),ce(e,i),de(e),Me(e,i),xe(e);break;case\\\"safari\\\":if(!De||!t.shimSafari)return r(\\\"Safari shim is not included in this adapter release.\\\"),n;r(\\\"adapter.js shimming safari.\\\"),n.browserShim=De,$e(e,i),Pe(e),Le(e),ye(e),Ie(e),Ee(e),Oe(e),ke(e),Ne(e),Ae(e),Me(e,i),xe(e),we(e,i);break;default:r(\\\"Unsupported browser!\\\")}return n}({window:\\\"undefined\\\"==typeof window?void 0:window});var Be,He,Fe;!function(e){e.FPS_10=\\\"FPS_10\\\",e.FPS_15=\\\"FPS_15\\\",e.FPS_24=\\\"FPS_24\\\",e.FPS_30=\\\"FPS_30\\\"}(Be||(Be={})),function(e){e.W176_H132=\\\"W176_H132\\\",e.W176_H144=\\\"W176_H144\\\",e.W256_H144=\\\"W256_H144\\\",e.W320_H180=\\\"W320_H180\\\",e.W240_H240=\\\"W240_H240\\\",e.W320_H240=\\\"W320_H240\\\",e.W480_H360=\\\"W480_H360\\\",e.W640_H360=\\\"W640_H360\\\",e.W480_H480=\\\"W480_H480\\\",e.W640_H480=\\\"W640_H480\\\",e.W720_H480=\\\"W720_H480\\\",e.W1280_H720=\\\"W1280_H720\\\",e.W1920_H1080=\\\"W1920_H1080\\\"}(He||(He={})),function(e){e[e.AUDIO_ONLY=0]=\\\"AUDIO_ONLY\\\",e[e.VIDEO_ONLY=1]=\\\"VIDEO_ONLY\\\",e[e.AUDIO_VIDEO=2]=\\\"AUDIO_VIDEO\\\"}(Fe||(Fe={}));const Ke={[He.W176_H132]:{width:176,height:132,maxBitrate:150,minBitrate:80},[He.W176_H144]:{width:176,height:144,maxBitrate:160,minBitrate:80},[He.W256_H144]:{width:256,height:144,maxBitrate:240,minBitrate:120},[He.W320_H180]:{width:320,height:180,maxBitrate:280,minBitrate:120},[He.W240_H240]:{width:240,height:240,maxBitrate:280,minBitrate:120},[He.W320_H240]:{width:320,height:240,maxBitrate:400,minBitrate:120},[He.W480_H360]:{width:480,height:360,maxBitrate:650,minBitrate:150},[He.W640_H360]:{width:640,height:360,maxBitrate:800,minBitrate:180},[He.W480_H480]:{width:480,height:480,maxBitrate:800,minBitrate:180},[He.W640_H480]:{width:640,height:480,maxBitrate:900,minBitrate:200},[He.W720_H480]:{width:720,height:480,maxBitrate:1e3,minBitrate:200},[He.W1280_H720]:{width:1280,height:720,maxBitrate:2200,minBitrate:250},[He.W1920_H1080]:{width:1920,height:1080,maxBitrate:4e3,minBitrate:400}},Ge=(e,t)=>{const r=e*t;let i=Number.MAX_VALUE,n=null;for(const e in Ke){const t=Ke[e],s=Math.abs(t.width*t.height-r);s<i&&(n=t,i=s)}return n},Je={10:1,15:1,24:1.5,30:1.5},We=e=>{let t=Number.MAX_VALUE,r=1;for(const i in Je){const n=Math.abs(e-parseInt(i));n<t&&(t=n,r=Je[i])}return r},Ye={getCameras:()=>S(void 0,void 0,void 0,(function*(){return(yield navigator.mediaDevices.enumerateDevices()).filter((e=>\\\"videoinput\\\"===e.kind))})),getMicrophones:()=>S(void 0,void 0,void 0,(function*(){return(yield navigator.mediaDevices.enumerateDevices()).filter((e=>\\\"audioinput\\\"===e.kind))})),getSpeakers:()=>S(void 0,void 0,void 0,(function*(){return(yield navigator.mediaDevices.enumerateDevices()).filter((e=>\\\"audiooutput\\\"===e.kind))}))};class qe extends _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.EventEmitter{constructor(e,t,r,i,n){super(),this._tag=e,this._userId=t,this._kind=r,this._isLocalTrack=i,this._roomId=n,this._localMuted=!1,this._remoteMuted=!1,this._streamId=[this._userId||this._roomId,this._tag].join(\\\"_\\\"),this._id=[this._streamId,this.isAudioTrack()?0:1].join(\\\"_\\\")}getStreamId(){return this._streamId}getTrackId(){return this._id}getUserId(){return this._userId}__innerGetMediaStreamTrack(){return this._msTrack}getTag(){return this._tag}isLocalTrack(){return this._isLocalTrack}isVideoTrack(){return\\\"video\\\"===this._kind}isAudioTrack(){return\\\"audio\\\"===this._kind}isReady(){var e;return\\\"live\\\"===(null===(e=this._msTrack)||void 0===e?void 0:e.readyState)}__innerSetMediaStreamTrack(e){this._msTrack=e,this._setLocalMuted(this._localMuted);const t=this._msStream=this._msStream||new MediaStream,r=t.getTracks()[0];r&&t.removeTrack(r),e?t.addTrack(e):this._element&&(this._element.pause(),this._element.srcObject=null)}_setLocalMuted(e){this._msTrack&&(this._msTrack.enabled=!e),this._localMuted=e}mute(){C.info(`set ${this._id} enabled: false`),this._setLocalMuted(!0)}unmute(){C.info(`set ${this._id} enabled: true`),this._setLocalMuted(!1)}isLocalMuted(){return this._localMuted}isMCUTrack(){return Boolean(this._roomId)}isOwnerMuted(){return this._remoteMuted}play(e,t){return S(this,void 0,void 0,(function*(){if(!this._msTrack)return C.warn(`the track is not ready to play -> id: ${this._id}`),{code:T.TRACK_NOT_READY};if(\\\"ended\\\"===this._msTrack.readyState&&C.warn(`the track's readyState is 'ended' -> id: ${this._id}`),null==t?void 0:t.volume){if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(null==t?void 0:t.volume))return C.error(`${null==t?void 0:t.volume} is not a number, the valid range of options.volume is 0-100`),{code:T.PARAMS_ERROR};(null==t?void 0:t.volume)<0&&(t.volume=0,C.warn(\\\"the valid range of options.volume is 0-100, the value of volume has been set 0\\\")),(null==t?void 0:t.volume)>100&&(t.volume=100,C.warn(\\\"the valid range of options.volume is 0-100, the value of volume has been set 100\\\"))}if(null==t?void 0:t.audioDeviceId){if(!(yield Ye.getSpeakers()).map((e=>e.deviceId)).includes(t.audioDeviceId))return C.error(`the options.audioDeviceId is invalid --\\\\x3e ${t.audioDeviceId}`),{code:T.PARAMS_ERROR}}const i=this.isVideoTrack();if(i&&(!e||!(e instanceof HTMLVideoElement)))return C.error(`the video track need an <video> to play -> id: ${this._id}`),{code:T.VIDEO_TRACK_MISS_MEDIA_ELEMENT};this._element=i?e:this._element||new Audio,this._localMuted&&this._setLocalMuted(!1),this._element.srcObject&&this._element.srcObject===this._msStream||this._element.pause(),this._element.onloadstart=e=>{var t;C.debug(`HTMLMediaElement onloadstart -> id: ${null===(t=e.target)||void 0===t?void 0:t.id}, trackId: ${this._id}`)},this._element.ondurationchange=e=>{var t;C.debug(`HTMLMediaElement ondurationchange -> id: ${null===(t=e.target)||void 0===t?void 0:t.id}, trackId: ${this._id}`)},this._element.onloadedmetadata=e=>{var t;C.debug(`HTMLMediaElement onloadedmetadata -> id: ${null===(t=e.target)||void 0===t?void 0:t.id}, trackId: ${this._id}`)},this._element.onloadeddata=e=>{var t;C.debug(`HTMLMediaElement onloadeddata -> id: ${null===(t=e.target)||void 0===t?void 0:t.id}, trackId: ${this._id}`)},this._element.onabort=e=>{var t;C.info(`HTMLMediaElement onabort -> id: ${null===(t=e.target)||void 0===t?void 0:t.id}, trackId: ${this._id}`)},this._element.oncanplay=e=>{var t;C.info(`HTMLMediaElement oncanplay -> id: ${null===(t=e.target)||void 0===t?void 0:t.id}, trackId: ${this._id}`)},this._element.onvolumechange=e=>{var t;const r=Math.floor(100*(null===(t=e.target)||void 0===t?void 0:t.volume));C.info(`HTMLMediaElement onvolumechange -> volume: ${r}, trackId: ${this._id}`)},this._element.srcObject=this._msStream,this._element.autoplay=!0,i&&(this._element.playsInline=!0,this._element.x5PlaysInline=!0,this._element.webkitPlaysInline=!0),i||!(null==t?void 0:t.volume)&&0!==(null==t?void 0:t.volume)||(this._element.volume=(null==t?void 0:t.volume)/100);try{(null==t?void 0:t.audioDeviceId)&&!i?yield this._element.setSinkId(t.audioDeviceId):this._element.play()}catch(e){return\\\"No permission to use requested device\\\"===e.message?(C.error(`setSinkId failed -> ${e.message}`),{code:T.NO_PERMISSION_TO_USE_REQUESTED_DEVICE}):(C.error(e),{code:T.TRACK_PLAY_ERROR})}return{code:T.SUCCESS}}))}__innerDestroy(){this.__innerSetMediaStreamTrack(void 0)}__releaseMediaElement(){this._element&&(this._element.remove(),this._element.srcObject=null)}}class ze extends qe{constructor(e,t,r,i){super(e,t,r,!0),this._isPublished=!1,this.__innerSetMediaStreamTrack(i),i.onended=()=>{i.onended=null,this.emit(ze.EVENT_LOCAL_TRACK_END,this),this.removeAll(ze.EVENT_LOCAL_TRACK_END)}}_setLocalMuted(e){const t=this._localMuted!==e;super._setLocalMuted(e),this._remoteMuted=this._localMuted,t&&this.emit(ze.__INNER_EVENT_MUTED_CHANGE__,this)}__innerSetPublished(e){this._isPublished=e}isPublished(){return this._isPublished}destroy(){var e;C.info(`track is destroyed -> trackId: ${this.getTrackId()}`),null===(e=this._msTrack)||void 0===e||e.stop(),super.__innerDestroy(),this.isAudioTrack()&&super.__releaseMediaElement(),this.emit(ze.__INNER_EVENT_DESTROY__,this)}setBitrate(e=0,t=0,i=0){!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(e)||!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(t)||!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(i)||e<=0||t<=0||e<t?C.error(\\\"setBitrate params error ->\\\"):this._bitrateInfo={max:e,min:t,start:i}}getBitrate(){var e,t;const{min:r,max:i}=this._msTrack?_t(this._msTrack):{min:0,max:0};return{min:(null===(e=this._bitrateInfo)||void 0===e?void 0:e.min)||r,max:(null===(t=this._bitrateInfo)||void 0===t?void 0:t.max)||i}}}ze.EVENT_LOCAL_TRACK_END=\\\"local-track-end\\\",ze.__INNER_EVENT_MUTED_CHANGE__=\\\"inner-muted-change\\\",ze.__INNER_EVENT_DESTROY__=\\\"inner-destroy\\\";class Qe extends ze{constructor(e,t,r){super(e,t,\\\"audio\\\",r)}setBitrate(e,t,r){C.warn(\\\"`setBitrate` invalid for audio track\\\")}getBitrate(){return{start:32,max:32,min:32}}}class Xe extends ze{constructor(e,t,r,i=!1){super(e,t,\\\"video\\\",r),this._isTiny=i}__isTiny(){return this._isTiny}getStreamId(){const e=super.getStreamId();return this._isTiny?`${e}_tiny`:e}getTrackId(){const e=super.getTrackId();return this._isTiny?`${e}_tiny`:e}}class Ze extends ze{constructor(e,t,r,i,n){super(e,t,r,i),this._resource=n,Ze.__innerSetMapping(this.getTrackId(),n)}static __innerSetMapping(e,t){const r=this._mapping.get(t)||[];r.push(e),this._mapping.set(t,r)}static __innerRemoveMapping(e,t){var r,i;const n=null===(r=this._mapping.get(t))||void 0===r?void 0:r.filter((t=>t!==e));n&&n.length>0?this._mapping.set(t,n):(this._mapping.delete(t),t.pause(),t.src=\\\"\\\",null===(i=t.parentNode)||void 0===i||i.removeChild(t))}destroy(){this.isAudioTrack()&&this.mute(),Ze.__innerRemoveMapping(this.getTrackId(),this._resource),super.destroy()}}Ze._mapping=new Map;class et extends Ze{constructor(e,t,r,i){super(e,t,\\\"video\\\",r,i)}}class tt extends Ze{constructor(e,t,r,i){super(e,t,\\\"audio\\\",r,i)}_setLocalMuted(e){this._resource&&(this._resource.muted=e),super._setLocalMuted(e)}play(){return this._setLocalMuted(!1),Promise.resolve({code:T.SUCCESS})}}class rt extends Qe{}class it extends Xe{}class nt extends Xe{}class st extends qe{constructor(e,t,r,i){super(e,t,r,!1,i),this._isSubscribed=!1}__innerSetRemoteMuted(e){this._remoteMuted=e}__innerSetSubscribed(e){this._isSubscribed=e}isSubscribed(){return this._isSubscribed}}class ot extends st{constructor(e,t,r){super(e,t,\\\"audio\\\",r)}}class at extends st{constructor(e,t,r){super(e,t,\\\"video\\\",r)}}const ct=(e,t)=>({name:e,content:JSON.stringify({uris:t,ignore:!0})}),dt=e=>JSON.stringify(e),ut=e=>/^[a-zA-Z\\\\d-=]+$/g.test(e),lt=\\\"http:\\\"!==location.protocol||[\\\"localhost\\\",\\\"127.0.0.1\\\"].includes(location.hostname),ht=e=>{if(void 0===e)return 0;if((0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(e))return e;const t=e;return t.exact||t.ideal||t.max||0},pt=e=>{const t=e.getConstraints();return{width:ht(t.width),height:ht(t.height),frameRate:ht(t.frameRate)}},_t=e=>{const{width:t,height:r,frameRate:i}=pt(e),n=Ge(t,r),s=We(i);return{min:n.minBitrate*s,max:n.maxBitrate*s}},mt=e=>[e.msid,e.mediaType].join(\\\"_\\\"),ft=e=>{const t=e.split(\\\"_\\\");return{mediaType:parseInt(t.pop()),tag:t.pop(),userId:t.join(\\\"_\\\")}},vt=(e,t)=>[e,t].join(\\\"_\\\"),Rt=e=>e.map((e=>Object.assign({},e))),gt=(e,t,r=!1)=>{e=e.slice();const i=[],n=[],s=[];return t.forEach((t=>{const n=mt(t);let o=e.findIndex((e=>mt(e)===n));if(r&&(o=e.findIndex((e=>e.uri===t.uri))),-1===o)return void i.push(t);const a=e[o];a.uri!==t.uri?i.push(t):a.state!==t.state&&s.push(t),e.splice(o,1)})),n.push(...e),{publishedList:i,unpublishedList:n,modifiedList:s}},St=()=>{let e=\\\"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\\\".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return(\\\"x\\\"===e?t:3&t|8).toString(16)}));return e=e.replace(/-/g,\\\"\\\")+\\\"0\\\",e=parseInt(e,16),e=(e=>{const t=\\\"0123456789abcdefghigklmnopqrstuvwxyzABCDEFGHIGKLMNOPQRSTUVWXYZ+/\\\".split(\\\"\\\"),r=t.length+1;let i=+e;const n=[];do{const e=i%r;i=(i-e)/r,n.unshift(t[e])}while(i);return n.join(\\\"\\\")})(e),e.length>22&&(e=e.slice(0,22)),e},Ct=e=>{const[t,r]=e.split(\\\"_\\\").map((e=>parseInt(e.replace(/[^\\\\d]/g,\\\"\\\"))));return{width:t,height:r}},Tt=e=>!!He[e],It=e=>!!Be[e],Et=e=>parseInt(e.replace(\\\"FPS_\\\",\\\"\\\")),yt=(()=>{const{browser:e,version:t,supportsUnifiedPlan:r}=Ve.browserDetails;return{browser:e,version:t,supportsUnifiedPlan:!1!==r}})();function kt(){return\\\"captureStream\\\"in HTMLMediaElement.prototype||\\\"mozCaptureStream\\\"in HTMLMediaElement.prototype}function bt(){return\\\"mediaDevices\\\"in navigator&&\\\"getDisplayMedia\\\"in navigator.mediaDevices}const Pt=e=>\\\"[object Null]\\\"===Object.prototype.toString.call(e),Ot=e=>1===e.type,Lt=e=>{const t={},r=Object.keys(e.users);return r.length&&r.forEach((r=>{const i=[],n=e.users[r];if(n.uris)try{i.push(...JSON.parse(n.uris))}catch(e){C.warn(`invalid user data -> userId: ${r}, userData: ${n}`)}t[r]=i})),t};var Nt,Dt;!function(e){e.PUBLISH=\\\"RCRTC:PublishResource\\\",e.UNPUBLISH=\\\"RCRTC:UnpublishResource\\\",e.MODIFY=\\\"RCRTC:ModifyResource\\\",e.TOTAL_CONTENT_RESOURCE=\\\"RCRTC:TotalContentResources\\\",e.STATE=\\\"RCRTC:state\\\",e.ROOM_NOTIFY=\\\"RCRTC:RoomNtf\\\",e.USER_NOTIFY=\\\"RCRTC:UserNtf\\\",e.KICK=\\\"RCRTC:kick\\\",e.PK_INVITE=\\\"RCRTC:invite\\\",e.PK_INVITE_TIMEOUT=\\\"RCRTC:inviteTimeout\\\",e.PK_CANCEL_INVITE=\\\"RCRTC:cancelInvite\\\",e.PK_INVITE_ANSWER=\\\"RCRTC:answerInvite\\\",e.PK_END=\\\"RCRTC:endInvite\\\",e.OTHER_ROOM_OFFLINE=\\\"RCRTC:otherRoomOffline\\\"}(Nt||(Nt={})),function(e){e.SUCCESS=\\\"Success\\\",e.FAIL=\\\"Fail\\\"}(Dt||(Dt={}));class At{constructor(e,t,r,i=1e4){this._roomId=e,this._roomMode=t,this._context=r,this._gap=i,this._latestTimestamp=Date.now(),this._timer=null}start(){return S(this,void 0,void 0,(function*(){this._timer||(this._timer=setInterval(this._loop.bind(this),this._gap))}))}_loop(){var e,t,r;return S(this,void 0,void 0,(function*(){const n=yield new Promise((e=>{this._context.rtcPing(this._roomId,this._roomMode).then(e).catch((t=>{C.error(`rtcping receive unknown error -> ${t}`),e(_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.UNKNOWN)})),setTimeout(e,1e4,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.TIMEOUT)})),s=Date.now();if(n===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS)return this._latestTimestamp=s,void(null===(e=this.onPingResult)||void 0===e||e.call(this,Dt.SUCCESS));null===(t=this.onPingResult)||void 0===t||t.call(this,Dt.FAIL),C.warn(`rtcping failed -> code: ${n}`),(40003===n||s-this._latestTimestamp>6e4)&&(this.stop(),null===(r=this.onFailed)||void 0===r||r.call(this,40003===n))}))}stop(){this._timer&&(clearInterval(this._timer),this._timer=null)}}var Mt;!function(e){e[e.NORMAL=1]=\\\"NORMAL\\\",e[e.TINY=2]=\\\"TINY\\\"}(Mt||(Mt={}));const xt=(e,t)=>Math.round(8*t/e),Ut=(e,t=2)=>{const r=10**t;return Math.round(e*r)/r},wt=(e,t=2)=>{e>1&&(e/=32767);const r=10**t;return Math.ceil(e*r)},$t=(e,t,r,i)=>{if(0===t)return 0;if(!r||!i)return Ut(e/t,3);const n=t-i;if(0===n)return 0;const s=e-r;return s<0||n<0?0:Ut(s/n,3)},jt=e=>{const{jitter:t,rtt:r,packetsLostRate:i}=e;return!Pt(t)||!Pt(r)||0!==i};class Vt{constructor(e,t){this._rtcPeerConn=e,this._sdpSemantics=t,this._latestPacketsSent={},this._latestBytesSent={},this._latestBytesRecv={},this._latestPacketsRecv={}}updateBytesSent(e,t,r){let i,n;if(this._latestBytesSent[e]&&t<this._latestBytesSent[e].bytesSent&&this.clearLatestpacketsSent([e]),this._latestBytesSent[e]){const{bytesSent:s,timestamp:o}=this._latestBytesSent[e];i=t-s,n=r-o,this._latestBytesSent[e]={bytesSent:t,timestamp:r}}else i=t,n=1e3,this._latestBytesSent[e]={bytesSent:t,timestamp:r};return xt(n,i)}updateBytesRecv(e,t,r){let i,n;if(this._latestBytesRecv[e]&&t<this._latestBytesRecv[e].bytesRecv&&this.clearLatestPacketsRecv([e]),this._latestBytesRecv[e]){const{bytesRecv:s,timestamp:o}=this._latestBytesRecv[e];i=t-s,n=r-o,this._latestBytesRecv[e]={bytesRecv:t,timestamp:r}}else i=t,n=1e3,this._latestBytesRecv[e]={bytesRecv:t,timestamp:r};return xt(n,i)}updateSenderPacketsLost(e,t,r){let i;if(Object.prototype.hasOwnProperty.call(this._latestPacketsSent[e],\\\"packetsSent\\\")){const{packetsLost:n,packetsSent:s}=this._latestPacketsSent[e];i=$t(t,r,n,s),this._latestPacketsSent[e].packetsLost=t,this._latestPacketsSent[e].packetsSent=n===t?s:r}else i=$t(t,r),this._latestPacketsSent[e].packetsLost=t,this._latestPacketsSent[e].packetsSent=r;return i}updateReceiverPacketsLost(e,t,r){let i;if(this._latestPacketsRecv[e]){const{packetsLost:n,packetsRecv:s}=this._latestPacketsRecv[e];i=$t(t,r+t,n,s+n)}else i=$t(t,r);return this._latestPacketsRecv[e]={packetsLost:t,packetsRecv:r},i}clearLatestpacketsSent(e){e.forEach((e=>{if(parseInt(e.split(\\\"_\\\").pop())===Fe.VIDEO_ONLY){const t=`${e}_tiny`;delete this._latestPacketsSent[t],delete this._latestBytesSent[t]}delete this._latestPacketsSent[e],delete this._latestBytesSent[e]}))}clearLatestPacketsRecv(e){e.forEach((e=>{delete this._latestPacketsRecv[e],delete this._latestBytesRecv[e]}))}parseRTCStatsReport(e){const t=e.keys(),r={};let i=t.next();for(;!i.done;){const n=i.value,s=e.get(n);/^RTCCodec_/.test(n)||(r[n]=s),i=t.next()}return r}formatRCRTCStateReport(e){return{senders:[],receivers:[]}}getAudioLevelList(e){return[]}getResourceIdByParseSdp(e){var t,r;const i=e.ssrc,n=e.kind||e.mediaType,s=null===(t=this._rtcPeerConn.currentLocalDescription)||void 0===t?void 0:t.sdp,o=null===(r=this._rtcPeerConn.currentRemoteDescription)||void 0===r?void 0:r.sdp;let a;a=\\\"unified-plan\\\"===this._sdpSemantics?new RegExp(\\\"a=msid:(.*?) \\\"):new RegExp(`a=ssrc:${i} msid:(.*?) `);const c=null==s?void 0:s.split(\\\"\\\\r\\\\nm=\\\"),d=null==c?void 0:c.filter((e=>e.includes(`a=ssrc:${i}`)))[0],u=null==d?void 0:d.match(a);let l=u?u[1]:\\\"\\\";if(l)return`${l}_${\\\"video\\\"===n?1:0}`;const h=null==o?void 0:o.split(\\\"\\\\r\\\\nm=\\\"),p=null==h?void 0:h.filter((e=>e.includes(`a=ssrc:${i}`)))[0],_=null==p?void 0:p.match(a);return l=_?_[1]:\\\"\\\",`${l}_${\\\"video\\\"===n?1:0}`}isValidSender(e){var t;const r=null===(t=this._rtcPeerConn.currentLocalDescription)||void 0===t?void 0:t.sdp,{ssrc:i}=e;return!(null==r?void 0:r.split(\\\"\\\\r\\\\nm=\\\").some((e=>e.includes(i)&&e.includes(\\\"a=inactive\\\"))))}isValidReceiver(e){var t;const r=null===(t=this._rtcPeerConn.currentRemoteDescription)||void 0===t?void 0:t.sdp,{ssrc:i}=e;return!(null==r?void 0:r.split(\\\"\\\\r\\\\nm=\\\").some((e=>e.includes(i)&&e.includes(\\\"a=inactive\\\"))))}}class Bt extends Vt{formatRCRTCStateReport(e){const t={senders:[],receivers:[]},r=Math.floor(e.RTCPeerConnection.timestamp);t.timestamp=r;const i=Object.keys(e);let n=0,s=0;i.filter((e=>/^RTCOutboundRTP(Video|Audio)Stream_/.test(e))).forEach((i=>{const o=e[i];if(\\\"unified-plan\\\"===this._sdpSemantics&&!this.isValidSender(o))return;const{id:a,kind:c,transportId:d,mediaSourceId:u,remoteId:l,packetsSent:h,bytesSent:p,trackId:_,encoderImplementation:m,pliCount:f,nackCount:v,firCount:R}=o;if(!_)return;let{framesPerSecond:g,frameWidth:S,frameHeight:C}=o;\\\"video\\\"!==c||S||C||g||(S=e[_].frameWidth,C=e[_].frameHeight,g=u?e[u].framesPerSecond:null);const T=e[l];let I=null,E=null,y=0;T&&(I=T.jitter,E=T.roundTripTime,y=T.packetsLost),n+=y;const k=this.getResourceIdByParseSdp(o),b=u?e[u].audioLevel:e[_].audioLevel;let P=null;!this._latestPacketsSent[k]&&(this._latestPacketsSent[k]={}),T?P=this.updateSenderPacketsLost(k,y,h):this._latestPacketsSent[k].crtPacketsSent=h;let O=this.updateBytesSent(k,p,r);O<0&&(O=0),s+=O,t.senders.push({id:a,trackId:k,kind:c,packetsLostRate:P,remoteResource:!1,audioLevel:b||0===b?wt(b):null,frameWidth:S,frameHeight:C,frameRate:g,bitrate:O,jitter:I?Math.round(1e3*I):I,rtt:E,encoderImplementation:m,pliCount:f,nackCount:v,googFirsSent:-1,samplingRate:-1,googRenderDelayMs:-1,trackState:-1})}));i.filter((e=>/RTCRemoteInboundRtp(Video|Audio)Stream_/.test(e))).forEach((r=>{const{localId:i,jitter:n,roundTripTime:s,packetsLost:o}=e[r],a=t.senders.filter((e=>e.id===i))[0];if(a&&!jt(a)){const t=this.getResourceIdByParseSdp(e[a.id]);a.jitter=Math.round(1e3*n),a.rtt=s;const r=this._latestPacketsSent[t].crtPacketsSent;a.packetsLostRate=this.updateSenderPacketsLost(t,o,r)}}));let o=0;i.filter((e=>/^RTCInboundRTP(Video|Audio)Stream_/.test(e))).forEach((i=>{const s=e[i];if(\\\"unified-plan\\\"===this._sdpSemantics&&!this.isValidReceiver(s))return;const{trackId:a,packetsLost:c,packetsReceived:d,jitter:u,bytesReceived:l,framesPerSecond:h,kind:p,codecImplementationName:_,nackCount:m,pliCount:f}=s;if(!a)return;let{frameWidth:v,frameHeight:R,audioLevel:g}=s;\\\"video\\\"===p?v||R||(v=e[a].frameWidth,R=e[a].frameHeight):g||(g=e[a].audioLevel),n+=c;const S=this.getResourceIdByParseSdp(s),C=this.updateReceiverPacketsLost(S,c,d);let T=this.updateBytesRecv(S,l,r);T<0&&(T=0),o+=T,t.receivers.push({trackId:S,kind:p,packetsLostRate:C,remoteResource:!0,audioLevel:g||0===g?wt(g):null,frameWidth:v,frameHeight:R,frameRate:h,bitrate:T,jitter:u?Math.round(1e3*u):0,codecImplementationName:_,nackCount:m,pliCount:f,rtt:null,samplingRate:-1,googFirsReceived:-1,googRenderDelayMs:-1,trackState:-1})}));const a=i.filter((e=>/^RTCTransport_/.test(e)))[0];if(a){const r=e[a],{selectedCandidatePairId:i}=r;if(i){const r=e[i],{availableOutgoingBitrate:a,availableIncomingBitrate:c,currentRoundTripTime:d,localCandidateId:u,remoteCandidateId:l}=r,h=e[u],{ip:p,port:_,networkType:m}=h,f=e[l],{ip:v,port:R,protocol:g}=f;t.iceCandidatePair={IP:p,port:_,networkType:m,remoteIP:v,remotePort:R,protocol:g,bitrateRecv:o,bitrateSend:s,rtt:1e3*d,availableOutgoingBitrate:a,availableIncomingBitrate:c,totalPacketsLost:n},t.receivers.forEach((e=>{e.rtt=d}))}}return t}getAudioLevelList(e){const t=[],r=Object.keys(e);r.filter((e=>/^RTCOutboundRTPAudioStream_/.test(e))).forEach((r=>{var i;const n=e[r];if(\\\"unified-plan\\\"===this._sdpSemantics&&!this.isValidSender(n))return;const{mediaSourceId:s,trackId:o}=n,a=this.getResourceIdByParseSdp(n),c=s&&e[s]?e[s].audioLevel:(null===(i=e[o])||void 0===i?void 0:i.audioLevel)||null;t.push({trackId:a,audioLevel:c||0===c?wt(c):null})}));return r.filter((e=>/^RTCInboundRTPAudioStream_/.test(e))).forEach((r=>{const i=e[r];if(\\\"unified-plan\\\"===this._sdpSemantics&&!this.isValidReceiver(i))return;const{trackId:n}=i,s=i.audioLevel||e[n].audioLevel,o=this.getResourceIdByParseSdp(i);t.push({trackId:o,audioLevel:s||0===s?wt(s):null})})),t}}class Ht extends Vt{formatRCRTCStateReport(e){const t=+new Date,r={senders:[],receivers:[],timestamp:t};let i=0,n=0,s=0;for(const o in e){const a=e[o],c=a.type;if(\\\"outbound-rtp\\\"===c){if(\\\"unified-plan\\\"===this._sdpSemantics&&!this.isValidSender(a))continue;const{id:s,kind:o,bytesSent:c,packetsSent:d,bitrateMean:u,framerateMean:l,nackCount:h,pliCount:p,remoteId:_}=a,{jitter:m,roundTripTime:f,packetsLost:v}=_?e[_]:{jitter:null,roundTripTime:null,packetsLost:0},R=this.getResourceIdByParseSdp(a);i+=v;let g=null;!this._latestPacketsSent[R]&&(this._latestPacketsSent[R]={}),_?g=this.updateSenderPacketsLost(R,v,d):this._latestPacketsSent[R].crtPacketsSent=d;let S=0;\\\"video\\\"===o?u&&(S=Math.floor(u/1e3)):S=this.updateBytesSent(R,c,t),S<0&&(S=0),n+=S,r.senders.push({trackId:R,kind:o,packetsLostRate:g,remoteResource:!1,audioLevel:null,frameWidth:null,frameHeight:null,frameRate:Math.floor(l),bitrate:S,jitter:m?Math.round(1e3*m):null,rtt:f,encoderImplementation:null,pliCount:p,nackCount:h,googFirsSent:-1,samplingRate:-1,googRenderDelayMs:-1,trackState:-1})}if(\\\"remote-inbound-rtp\\\"===c){const{localId:t}=a,i=this.getResourceIdByParseSdp(e[t]),n=r.senders.filter((e=>e.trackId===i))[0];n&&jt(n)&&(n.jitter=Math.round(1e3*a.jitter),n.rtt=a.rtt,n.packetsLostRate=this.updateSenderPacketsLost(i,a.packetsLost,this._latestPacketsSent[i].crtPacketsSent))}if(\\\"inbound-rtp\\\"===c){if(\\\"unified-plan\\\"===this._sdpSemantics&&!this.isValidReceiver(a))continue;const{id:e,packetsLost:n,bytesReceived:o,packetsReceived:c,jitter:d,framerateMean:u,kind:l,bitrateMean:h,nackCount:p,pliCount:_}=a,m=this.getResourceIdByParseSdp(a);i+=n;const f=this.updateReceiverPacketsLost(m,n,c);let v=0;\\\"video\\\"===l?h&&(v=Math.floor(h/1e3)):v=this.updateBytesRecv(m,o,t),v<0&&(v=0),s+=v,r.receivers.push({trackId:m,kind:l,packetsLostRate:f,remoteResource:!0,audioLevel:null,frameWidth:null,frameHeight:null,frameRate:Math.floor(u),bitrate:v,jitter:d?Math.round(1e3*d):null,codecImplementationName:null,nackCount:p,pliCount:_,rtt:null,samplingRate:-1,googFirsReceived:-1,googRenderDelayMs:-1,trackState:-1})}if(\\\"candidate-pair\\\"===c&&\\\"succeeded\\\"===a.state){const t=e[a.localCandidateId],{address:o,port:c}=t,d=e[a.remoteCandidateId],{address:u,port:l,protocol:h}=d;r.iceCandidatePair={IP:o,port:c,networkType:null,remoteIP:u,remotePort:l,protocol:h,bitrateRecv:s,bitrateSend:n,rtt:null,availableOutgoingBitrate:null,availableIncomingBitrate:null,totalPacketsLost:i}}}return r.iceCandidatePair&&(r.iceCandidatePair.bitrateSend=n),r.iceCandidatePair&&(r.iceCandidatePair.bitrateRecv=s),r}getAudioLevelList(e){const t=[];for(const r in e){const i=e[r],n=i.type;if(\\\"outbound-rtp\\\"===n){if(\\\"unified-plan\\\"===this._sdpSemantics&&!this.isValidSender(i))continue;const{kind:e}=i;if(\\\"video\\\"===e)continue;const r=this.getResourceIdByParseSdp(i);t.push({trackId:r,audioLevel:null})}if(\\\"inbound-rtp\\\"===n){if(\\\"unified-plan\\\"===this._sdpSemantics&&!this.isValidReceiver(i))continue;const{kind:e}=i;if(\\\"video\\\"===e)continue;const r=this.getResourceIdByParseSdp(i);t.push({trackId:r,audioLevel:null})}}return t}}class Ft extends Vt{formatRCRTCStateReport(e){const t={senders:[],receivers:[]},r=Math.floor(e.RTCPeerConnection.timestamp);t.timestamp=r;const i=Object.keys(e);let n=0,s=0;i.filter((e=>/^RTCOutboundRTP(Video|Audio)Stream_/.test(e))).forEach((i=>{const n=e[i];if(\\\"unified-plan\\\"===this._sdpSemantics&&!this.isValidSender(n))return;const o=this.getResourceIdByParseSdp(n),{mediaType:a,transportId:c,remoteId:d,packetsSent:u,bytesSent:l,trackId:h,encoderImplementation:p,pliCount:_,nackCount:m,firCount:f}=n;if(!h)return;const{audioLevel:v,frameHeight:R,frameWidth:g}=e[h];let S=this.updateBytesSent(o,l,r);S<0&&(S=0),s+=S,t.senders.push({trackId:o,kind:a,packetsLostRate:null,remoteResource:!1,audioLevel:v||0===v?wt(v):null,frameWidth:g,frameHeight:R,frameRate:null,bitrate:S,jitter:null,rtt:null,encoderImplementation:p,pliCount:_,nackCount:m,googFirsSent:-1,samplingRate:-1,googRenderDelayMs:-1,trackState:-1})}));let o=0;i.filter((e=>/^RTCInboundRTP(Video|Audio)Stream_/.test(e))).forEach((i=>{const s=e[i];if(\\\"unified-plan\\\"===this._sdpSemantics&&!this.isValidReceiver(s))return;const{trackId:a,packetsLost:c,packetsReceived:d,jitter:u,bytesReceived:l,mediaType:h,nackCount:p,pliCount:_}=s,m=this.getResourceIdByParseSdp(s);if(!a)return;const{frameHeight:f,frameWidth:v,audioLevel:R}=e[a];n+=c;const g=this.updateReceiverPacketsLost(m,c,d);let S=this.updateBytesRecv(m,l,r);S<0&&(S=0),o+=S,t.receivers.push({trackId:m,kind:h,packetsLostRate:g,remoteResource:!0,audioLevel:R||0===R?wt(R):null,frameWidth:v,frameHeight:f,frameRate:null,bitrate:S,jitter:u,codecImplementationName:null,nackCount:p,pliCount:_,rtt:null,samplingRate:-1,googFirsReceived:-1,googRenderDelayMs:-1,trackState:-1})}));const a=i.filter((e=>/^RTCTransport_/.test(e)))[0];if(a){const r=e[a],{selectedCandidatePairId:i}=r;if(i){const r=e[i],{availableOutgoingBitrate:a,availableIncomingBitrate:c,currentRoundTripTime:d,localCandidateId:u,remoteCandidateId:l}=r,h=e[u],{address:p,port:_}=h,m=e[l],{address:f,port:v,protocol:R}=m;t.iceCandidatePair={IP:p||null,port:_,networkType:null,remoteIP:f,remotePort:v,protocol:R,bitrateRecv:o,bitrateSend:s,rtt:1e3*d,availableOutgoingBitrate:a,availableIncomingBitrate:c,totalPacketsLost:n},t.receivers.forEach((e=>{e.rtt=d}))}}return t}getAudioLevelList(e){const t=[],r=Object.keys(e);r.filter((e=>/^RTCOutboundRTP(Video|Audio)Stream_/.test(e))).forEach((r=>{const i=e[r];if(\\\"unified-plan\\\"===this._sdpSemantics&&!this.isValidSender(i))return;const{trackId:n,mediaType:s}=i;if(\\\"video\\\"===s)return;const o=this.getResourceIdByParseSdp(i),a=e[n];t.push({trackId:o,audioLevel:a||0===a?wt(a):null})}));return r.filter((e=>/^RTCInboundRTP(Video|Audio)Stream_/.test(e))).forEach((r=>{const i=e[r];if(\\\"unified-plan\\\"===this._sdpSemantics&&!this.isValidReceiver(i))return;const{trackId:n,mediaType:s}=i;if(!n||\\\"video\\\"===s)return;const{audioLevel:o}=e[n],a=this.getResourceIdByParseSdp(i);t.push({trackId:a,audioLevel:o||0===o?wt(o):null})})),t}}class Kt{constructor(e){this._peer=e,this._outboundStreams={}}static setSdpSemantics(e){const{browser:t,version:r,supportsUnifiedPlan:i}=yt;i?/chrome/i.test(t)?this._sdpSemantics=r>92?\\\"unified-plan\\\":r<72?\\\"plan-b\\\":e:/firefox/i.test(t)?this._sdpSemantics=\\\"unified-plan\\\":/safari/i.test(t)?this._sdpSemantics=r<12?\\\"plan-b\\\":\\\"unified-plan\\\":this._sdpSemantics=\\\"unified-plan\\\":this._sdpSemantics=\\\"plan-b\\\"}static getSdpSemantics(){return Kt._sdpSemantics}getOutboundVideoInfo(){const e=[];for(const t in this._outboundStreams){const r=this._outboundStreams[t].getVideoTracks()[0];if(!r)continue;const i=/_tiny$/.test(t),{width:n,height:s}=pt(r);e.push({trackId:r.id,simulcast:i?Mt.TINY:Mt.NORMAL,resolution:`${n}x${s}`})}return e}setRemoteAnswer(e){return S(this,void 0,void 0,(function*(){e=e.replace(/\\\\s+\\\\r\\\\n/g,\\\"\\\\r\\\\n\\\");try{yield this._peer.setRemoteDescription({type:\\\"answer\\\",sdp:e})}catch(e){return C.error(e),T.SET_REMOTE_DESCRIPTION_FAILED}return T.SUCCESS}))}getStatParsr(e,t){return/chrome/i.test(yt.browser)?new Bt(e,t):/Firefox/i.test(yt.browser)?new Ht(e,t):/Safari/i.test(yt.browser)?new Ft(e,t):null}}class Gt extends Kt{constructor(){super(...arguments),this.senders={},this._localTracks=[]}addLocalTrack(e){this._localTracks.includes(e)||this._localTracks.push(e);const t=e.getStreamId(),r=e.__innerGetMediaStreamTrack(),i=this._outboundStreams[t]||(this._outboundStreams[t]=new MediaStream);i.getTracks().forEach((e=>{e.kind===r.kind&&i.removeTrack(e)})),i.addTrack(r);const n=e.getTrackId(),s=this.senders[n];s?s.replaceTrack(r):this.senders[n]=this._peer.addTrack(r,i)}removeLocalTrack(e){const t=this._localTracks.findIndex((t=>t===e));t>=0&&this._localTracks.splice(t,1);const r=e.getTrackId(),i=this.senders[r];i&&(i.replaceTrack(null),this._peer.removeTrack(i),delete this.senders[r])}updateSubRemoteTracks(e){}updateRecvTransceiverMap(e,t){}setBitrate(e,t,r){this._maxBitrate=e,this._minBitrate=t,this._startBitrate=r||.7*e}createOffer(e){return S(this,void 0,void 0,(function*(){const t=yield this._peer.createOffer({iceRestart:e,offerToReceiveAudio:!0,offerToReceiveVideo:!0});for(const e in this._outboundStreams){const r=this._outboundStreams[e].id;t.sdp=t.sdp.replace(new RegExp(r,\\\"g\\\"),e)}return yield this._peer.setLocalDescription(t),{type:\\\"offer\\\",semantics:\\\"plan-b\\\",sdp:t.sdp}}))}setRemoteAnswer(e){let t=0,r=0;this._localTracks.forEach((e=>{const{min:i,max:n}=e.getBitrate();r+=i,t+=n})),t=this._maxBitrate&&this._maxBitrate>0?Math.min(t,this._maxBitrate):t,r=this._minBitrate&&this._minBitrate>0?Math.max(r,this._minBitrate):r;const i=this._startBitrate||Math.round(.7*t),n=`b=AS:${t}`;e=e.replace(/[\\\\r\\\\n]+m=video[^\\\\r\\\\n]+/,(e=>`${e}\\\\r\\\\n${n}`));const s=[`;x-google-min-bitrate=${r}`,`;x-google-max-bitrate=${t}`,`;x-google-start-bitrate=${i}`].join(\\\"\\\");return e=e.replace(/[\\\\r\\\\n]+[^\\\\r\\\\n]+profile-level-id[^\\\\r\\\\n]+/g,(e=>e+s)),super.setRemoteAnswer(e)}}class Jt extends Kt{constructor(){super(...arguments),this._sendTransceiver={},this._localTracks={},this._recvAudio=[],this._recvVideo=[],this._recvTransceiver={},this._subedTracks=[]}setBitrate(e,t,r){C.warn(\\\"the interface named `setBitrate` is invalid while sdpSemantics value is `unified-plan`\\\")}addLocalTrack(e){const t=e.getTrackId(),r=e.getStreamId(),i=e.__innerGetMediaStreamTrack();this._localTracks[t]=e;const n=this._outboundStreams[r]||(this._outboundStreams[r]=new MediaStream);n.getTracks().forEach((e=>{e.kind===i.kind&&n.removeTrack(e)})),n.addTrack(i);const s=this._sendTransceiver[t];s?(s.sender.replaceTrack(i),s.direction=\\\"sendonly\\\"):this._sendTransceiver[t]=this._peer.addTransceiver(i,{direction:\\\"sendonly\\\",streams:[n]})}removeLocalTrack(e){const t=e.getTrackId(),r=e.getStreamId();e.__innerGetMediaStreamTrack(),delete this._localTracks[t];const i=this._sendTransceiver[t];if(!i)return;i.direction=\\\"inactive\\\",this._peer.removeTrack(i.sender),i.sender.replaceTrack(null);const n=this._outboundStreams[r];(e.isAudioTrack()?n.getAudioTracks():n.getVideoTracks()).forEach((e=>n.removeTrack(e)));const s=this._sendTransceiver[`${t}_tiny`];if(!s||\\\"inactive\\\"===s.direction)return;s.direction=\\\"inactive\\\";const o=s.sender,a=o.track;this._peer.removeTrack(o),o.replaceTrack(null);this._outboundStreams[`${r}_tiny`].removeTrack(a),a.stop()}updateRecvTransceiverMap(e,t){const{mediaType:r}=ft(e);this._recvTransceiver[e]=t;const i=r===Fe.AUDIO_ONLY?this._recvAudio:this._recvVideo,n=i.findIndex((e=>e===t));n>=0&&i.splice(n,1)}updateSubRemoteTracks(e){const t=e.slice(),r=this._subedTracks.slice();this._subedTracks=e.slice();for(let e=t.length-1;e>=0;e-=1){const i=t[e],n=r.findIndex((e=>e===i));n>=0&&(t.splice(e,1),r.splice(n,1))}r.length&&r.forEach((e=>{const t=e.getTrackId();e.__innerSetMediaStreamTrack(void 0);const r=this._recvTransceiver[t];r&&(r.direction=\\\"inactive\\\")}));const i={audio:0,video:0};t.length&&t.forEach((e=>{const t=e.isAudioTrack()?\\\"audio\\\":\\\"video\\\",r=this._recvTransceiver[e.getTrackId()];r?r.direction=\\\"recvonly\\\":i[t]+=1}));for(let e=this._recvAudio.length;e<i.audio;e+=1)this._recvAudio.push(this._peer.addTransceiver(\\\"audio\\\",{direction:\\\"recvonly\\\"}));for(let e=this._recvVideo.length;e<i.video;e+=1)this._recvVideo.push(this._peer.addTransceiver(\\\"video\\\",{direction:\\\"recvonly\\\"}))}createOffer(e){return S(this,void 0,void 0,(function*(){const t=yield this._peer.createOffer({iceRestart:e});let r=t.sdp;for(const e in this._outboundStreams){const t=this._outboundStreams[e].id;r=r.replace(new RegExp(t,\\\"g\\\"),e)}return r=(e=>e.split(/\\\\r\\\\n(?=m=)/).map((e=>(e=>/a=(recvonly|inactive)/.test(e)?e.replace(/\\\\r\\\\na=(ssrc|msid)[^\\\\r\\\\n]+/g,\\\"\\\"):e)(e))).join(\\\"\\\\r\\\\n\\\"))(r),r=r.replace(/a=ice-options:trickle/g,\\\"a=ice-options:trickle\\\\r\\\\na=ice-options:renomination\\\"),t.sdp=r,yield this._peer.setLocalDescription(t),{type:\\\"offer\\\",semantics:\\\"unified-plan\\\",sdp:r}}))}setRemoteAnswer(e){e=e.split(/\\\\r\\\\n(?=m=)/).map((e=>{var t;const r=e.match(/a=mid:[^\\\\s]+/);if(!r)return e;const i=r[0].replace(\\\"a=mid:\\\",\\\"\\\");let n=\\\"\\\";for(const e in this._sendTransceiver){if(this._sendTransceiver[e].mid===i){n=e;break}}if(!n)return e;const s=null===(t=this._localTracks[n])||void 0===t?void 0:t.getBitrate();if(!s)return e;const{max:o,min:a}=s,c=o&&o>0?s.start||.7*o:0,d=[];if(o&&o>0&&d.push(`;x-google-max-bitrate=${o}`),a&&a>0&&d.push(`;x-google-min-bitrate=${a}`),c>0&&d.push(`;x-google-start-bitrate=${c}`),0===d.length)return e;const u=d.join(\\\"\\\");return e.replace(/[\\\\r\\\\n]+[^\\\\r\\\\n]+profile-level-id[^\\\\r\\\\n]+/g,(e=>e+u))})).join(\\\"\\\\r\\\\n\\\");const t=/[\\\\r\\\\n]+\\\\r\\\\n[\\\\r\\\\n]+/g;return t.test(e)&&(C.warn(`answer sdp invalid -> ${JSON.stringify(e)}`),e=e.replace(t,\\\"\\\\r\\\\n\\\")),super.setRemoteAnswer(e)}}class Wt extends _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.EventEmitter{constructor(e,t){super(),this._reTryExchange=e,this._polarisReport=t,this.pubLocalTracks={},this._reTryExchangeTimer=null,this._reportStatsTimer=null,this._reportListener=null;const r=Kt.getSdpSemantics(),i=this._rtcPeerConn=new RTCPeerConnection({sdpSemantics:r});this._sdpStrategy=\\\"plan-b\\\"===r?new Gt(i):new Jt(i),this._rtcPeerConn.oniceconnectionstatechange=this._onICEConnectionStateChange.bind(this),this._rtcPeerConn.onconnectionstatechange=this._onConnectionStateChange.bind(this),this._rtcPeerConn.ontrack=this._onTrackReady.bind(this),this.reportParser=this._sdpStrategy.getStatParsr(this._rtcPeerConn,r)}getLocalTracks(){return Object.values(this.pubLocalTracks)}_onConnectionStateChange(){C.info(`onconnectionstatechange -> ${this._rtcPeerConn.connectionState}`)}_onICEConnectionStateChange(){var e,t;C.info(`oniceconnectionstatechange -> ${this._rtcPeerConn.iceConnectionState}`),\\\"connected\\\"===this._rtcPeerConn.iceConnectionState&&(this._reportStatsTimer&&clearInterval(this._reportStatsTimer),this._reportStatsTimer=setInterval(this._reportHandle.bind(this),1e3)),\\\"failed\\\"!==this._rtcPeerConn.iceConnectionState&&\\\"disconnected\\\"!==this._rtcPeerConn.iceConnectionState||(C.warn(\\\"iceconenction state is `failed`, exchange SDP to try again.\\\"),this._reTryExchange(),this._reTryExchangeTimer=setInterval(this._reTryExchange,15e3));try{null===(t=null===(e=this._reportListener)||void 0===e?void 0:e.onICEConnectionStateChange)||void 0===t||t.call(e,this._rtcPeerConn.iceConnectionState)}catch(e){C.error(\\\"onICEConnectionStateChange error\\\",e)}}_onTrackReady(e){if(!e.streams.length)return;const t=[e.streams[0].id,\\\"audio\\\"===e.receiver.track.kind?Fe.AUDIO_ONLY:Fe.VIDEO_ONLY].join(\\\"_\\\");this._updateRecvTransceiverMap(t,e.transceiver),this.emit(Wt.__INNER_EVENT_TRACK_READY__,e)}setBitrate(e,t,r){return S(this,void 0,void 0,(function*(){this._sdpStrategy.setBitrate(e,t,r)}))}createOffer(e){return S(this,void 0,void 0,(function*(){const t=yield this._sdpStrategy.createOffer(e);return C.debug(`offer -> ${JSON.stringify(t.sdp)}`),t}))}setRemoteAnswer(e){return S(this,void 0,void 0,(function*(){return C.debug(`answer -> ${JSON.stringify(e)}`),this._sdpStrategy.setRemoteAnswer(e)}))}getLocalTrack(e){return this.pubLocalTracks[e]||null}addLocalTrack(e){this.pubLocalTracks[e.getTrackId()]=e,this._sdpStrategy.addLocalTrack(e),e.off(ze.__INNER_EVENT_MUTED_CHANGE__,this._onLocalTrackMuted,this),e.off(ze.__INNER_EVENT_DESTROY__,this._onLocalTrackDestroied,this),e.on(ze.__INNER_EVENT_MUTED_CHANGE__,this._onLocalTrackMuted,this),e.on(ze.__INNER_EVENT_DESTROY__,this._onLocalTrackDestroied,this)}removeLocalTrackById(e){const t=this.getLocalTrack(e);t&&this.removeLocalTrack(t)}removeAllLocalTrack(){Object.keys(this.pubLocalTracks).forEach((e=>{/_tiny$/.test(e)||this.removeLocalTrackById(e)}))}removeLocalTrack(e){const t=e.getTrackId();delete this.pubLocalTracks[t],this._sdpStrategy.removeLocalTrack(e),e.__innerSetPublished(!1),e.off(ze.__INNER_EVENT_MUTED_CHANGE__,this._onLocalTrackMuted,this),e.off(ze.__INNER_EVENT_DESTROY__,this._onLocalTrackDestroied,this);const r=`${t}_tiny`,i=this.getLocalTrack(r);i&&(this._sdpStrategy.removeLocalTrack(i),delete this.pubLocalTracks[r],i.destroy())}_updateRecvTransceiverMap(e,t){this._sdpStrategy.updateRecvTransceiverMap(e,t)}updateSubRemoteTracks(e){this._sdpStrategy.updateSubRemoteTracks(e)}getOutboundVideoInfo(){return this._sdpStrategy.getOutboundVideoInfo()}_onLocalTrackMuted(e){const t=this.getLocalTrack(`${e.getTrackId()}_tiny`);t&&(t.__innerGetMediaStreamTrack().enabled=!e.isLocalMuted()),this.emit(ze.__INNER_EVENT_MUTED_CHANGE__,e)}_onLocalTrackDestroied(e){this.emit(ze.__INNER_EVENT_DESTROY__,e)}registerReportListener(e){this._reportListener=e}_createRCRTCStateReport(e){const{timestamp:t,iceCandidatePair:r,senders:i,receivers:n}=JSON.parse(JSON.stringify(e));null==r||delete r.totalPacketsLost;for(const e in r)Pt(r[e])&&delete r[e];return{timestamp:t,iceCandidatePair:r,senders:i.map((e=>{const t={};return e.trackId&&(t.trackId=e.trackId),e.kind&&(t.kind=e.kind),(e.packetsLostRate||0===e.packetsLostRate)&&(t.packetsLostRate=e.packetsLostRate),t.remoteResource=e.remoteResource,(e.audioLevel||0===e.audioLevel)&&(t.audioLevel=e.audioLevel),e.frameWidth&&(t.frameWidth=e.frameWidth),e.frameHeight&&(t.frameHeight=e.frameHeight),e.frameRate&&(t.frameRate=e.frameRate),(e.bitrate||0===e.bitrate)&&(t.bitrate=e.bitrate),e.jitter&&(t.jitter=e.jitter),t})),receivers:n.map((e=>{const t={};return e.trackId&&(t.trackId=e.trackId),e.kind&&(t.kind=e.kind),(e.packetsLostRate||0===e.packetsLostRate)&&(t.packetsLostRate=e.packetsLostRate),t.remoteResource=e.remoteResource,(e.audioLevel||0===e.audioLevel)&&(t.audioLevel=e.audioLevel),e.frameWidth&&(t.frameWidth=e.frameWidth),e.frameHeight&&(t.frameHeight=e.frameHeight),e.frameRate&&(t.frameRate=e.frameRate),(e.bitrate||0===e.bitrate)&&(t.bitrate=e.bitrate),e.jitter&&(t.jitter=e.jitter),t}))}}_getStatsData(){var e,t;return S(this,void 0,void 0,(function*(){const r=yield this._rtcPeerConn.getStats(),i=null===(e=this.reportParser)||void 0===e?void 0:e.parseRTCStatsReport(r);return null===(t=this.reportParser)||void 0===t?void 0:t.formatRCRTCStateReport(i)}))}getAudioLevelReportData(){var e,t;return S(this,void 0,void 0,(function*(){const r=yield this._rtcPeerConn.getStats(),i=null===(e=this.reportParser)||void 0===e?void 0:e.parseRTCStatsReport(r);if(!i)return[];return null===(t=this.reportParser)||void 0===t?void 0:t.getAudioLevelList(i)}))}_reportHandle(){var e,t,r;return S(this,void 0,void 0,(function*(){const i=yield this._getStatsData();if(!i)return;(i.senders.length||i.receivers.length)&&(null===(e=this._polarisReport)||void 0===e||e.sendR3R4Data(i));const n=this._createRCRTCStateReport(i);null===(r=null===(t=this._reportListener)||void 0===t?void 0:t.onStateReport)||void 0===r||r.call(t,n)}))}getRTCPeerConn(){return this._rtcPeerConn}destroy(){this.clear(),this.clearReTryExchangeTimer(),this._reportStatsTimer&&(clearInterval(this._reportStatsTimer),this._reportStatsTimer=null),this.registerReportListener(null),this._rtcPeerConn.close(),this.reportParser=null}clearReTryExchangeTimer(){clearInterval(this._reTryExchangeTimer),this._reTryExchangeTimer=null}}var Yt,qt,zt,Qt,Xt;Wt.__INNER_EVENT_TRACK_READY__=\\\"inner-track-ready\\\",function(e){e[e.DISABLE=0]=\\\"DISABLE\\\",e[e.ENABLE=1]=\\\"ENABLE\\\"}(Yt||(Yt={})),function(e){e[e.MeetingOrAnchor=1]=\\\"MeetingOrAnchor\\\",e[e.Audience=2]=\\\"Audience\\\"}(qt||(qt={}));class Zt{constructor(e,t,r,i,n=qt.MeetingOrAnchor){this._context=e,this._runtime=t,this._roomId=r,this._crtRTCRoom=i,this._userRole=n}_send(e){this._context.getConnectionStatus()===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ConnectionStatus.CONNECTED&&this._context.setRTCState(this._roomId,e)}_getClientID(){const e=\\\"uuid\\\";let t=this._runtime.localStorage.getItem(e);return t||(t=St(),this._runtime.localStorage.setItem(e,t)),t}_getRealResourceId(e){let t=e;const r=e.indexOf(\\\"_tiny\\\");return r>-1&&(t=e.slice(0,r)),t}_getPolarisTrackId(e){let t=\\\"\\\";const r=e.split(\\\"_\\\");if(e.includes(\\\"_tiny\\\")){const e=r.pop(),i=parseInt(r.pop())===Fe.AUDIO_ONLY?\\\"audio\\\":\\\"video\\\",n=r.pop();t=[r.join(\\\"_\\\"),n,e,i].join(\\\"_\\\")}else{const e=parseInt(r.pop())===Fe.AUDIO_ONLY?\\\"audio\\\":\\\"video\\\",i=r.pop();t=[r.join(\\\"_\\\"),i,e].join(\\\"_\\\")}return t}sendR3R4Data(e){const{iceCandidatePair:t,senders:r,receivers:i}=e,n=(null==t?void 0:t.bitrateSend)||-1,s=(null==t?void 0:t.bitrateRecv)||-1,o=(null==t?void 0:t.networkType)||\\\"unknown\\\",a=(null==t?void 0:t.rtt)||-1,c=`${(null==t?void 0:t.IP)||-1}:${null==t?void 0:t.port}`,d=(null==t||t.remoteIP,null==t||t.remotePort,(null==t?void 0:t.availableIncomingBitrate)||-1),u=(null==t?void 0:t.availableOutgoingBitrate)||-1,l=(null==t?void 0:t.totalPacketsLost)||-1,h=this._context.getCurrentId();let p=`R3\\\\t${n}\\\\t-1\\\\t-1\\\\t-1\\\\t${o}\\\\t${a}\\\\t${c}\\\\t${d}\\\\t${u}\\\\t${l}\\\\t${h}\\\\r`,_=`R4\\\\t${s}\\\\t-1\\\\t-1\\\\t-1\\\\t${o}\\\\t${a}\\\\t${c}\\\\t${d}\\\\t${u}\\\\t${l}\\\\t${h}\\\\r`;const m=r.map((e=>{var t;const{trackId:r,audioLevel:i,samplingRate:n,bitrate:s,packetsLostRate:o,frameRate:a,frameWidth:c,frameHeight:d,googRenderDelayMs:u,jitter:l,nackCount:h,pliCount:p,rtt:_,googFirsSent:m,encoderImplementation:f}=e,v=this._getPolarisTrackId(r),R=this._getRealResourceId(r);return{trackId:v,googCodecName:f||String(-1),audioLevel:i||0===i?i:-1,bitrate:s||0===s?s:-1,packetsLostRate:o||0===o?o:-1,frameRate:a||-1,resolution:c&&d?`${c} * ${d}`:\\\"-1\\\",jitter:l||-1,nackCount:h||0===h?h:-1,pliCount:p||0===p?p:-1,rtt:_||-1,googFirsSent:m,samplingRate:n,googRenderDelayMs:u,encoderImplementation:f||String(-1),trackState:(null===(t=this._crtRTCRoom.getLocalTrack(R))||void 0===t?void 0:t.isLocalMuted())?Yt.DISABLE:Yt.ENABLE}})),f=i.filter((e=>!!e.trackId)).map((e=>{var t;const{trackId:r,audioLevel:i,samplingRate:n,bitrate:s,packetsLostRate:o,frameRate:a,frameWidth:c,frameHeight:d,googRenderDelayMs:u,jitter:l,nackCount:h,pliCount:p,rtt:_,googFirsReceived:m,codecImplementationName:f}=e,v=this._getPolarisTrackId(r),R=this._getRealResourceId(r);return{trackId:v,googCodecName:f||String(-1),audioLevel:i||0===i?i:-1,bitrate:s||0===s?s:-1,packetsLostRate:o||0===o?o:-1,frameRate:a||-1,resolution:c&&d?`${c} * ${d}`:\\\"-1\\\",jitter:l||-1,nackCount:h||0===h?h:-1,pliCount:p||0===p?p:-1,rtt:_||-1,googFirsReceived:m,samplingRate:n,googRenderDelayMs:u,codecImplementationName:f||String(-1),trackState:(null===(t=this._crtRTCRoom.getRemoteTrack(R))||void 0===t?void 0:t.isLocalMuted())?Yt.DISABLE:Yt.ENABLE}}));p+=m.map((e=>`${e.trackId}\\\\t${e.googCodecName}\\\\t${e.audioLevel}\\\\t${e.samplingRate}\\\\t${e.bitrate}\\\\t${e.packetsLostRate}\\\\t${e.frameRate}\\\\t${e.resolution}\\\\t${e.googRenderDelayMs}\\\\t${e.jitter}\\\\t${e.nackCount}\\\\t${e.pliCount}\\\\t${e.rtt}\\\\t${e.googFirsSent}\\\\t${e.encoderImplementation}\\\\t${e.trackState}`)).join(\\\"\\\\n\\\"),e.senders.length&&this._send(p+`\\\\r${this._userRole}`),_+=f.map((e=>`${e.trackId}\\\\t${e.googCodecName}\\\\t${e.audioLevel}\\\\t${e.samplingRate}\\\\t${e.bitrate}\\\\t${e.packetsLostRate}\\\\t${e.frameRate}\\\\t${e.resolution}\\\\t${e.googRenderDelayMs}\\\\t${e.jitter}\\\\t${e.nackCount}\\\\t${e.pliCount}\\\\t${e.rtt}\\\\t${e.googFirsReceived}\\\\t${e.codecImplementationName}\\\\t${e.trackState}`)).join(\\\"\\\\n\\\"),e.receivers.length&&this._send(_+`\\\\r${this._userRole}`)}sendR1(){const e=`R1\\\\t5.3.1\\\\t${this._context.getCoreVersion()}\\\\tweb\\\\t${navigator.platform}\\\\t-1\\\\t${yt.browser}\\\\t${yt.version}\\\\t${this._getClientID()}\\\\t${this._userRole}`;this._send(e)}sendR2(e,t,r){const i=`R2\\\\t${e}\\\\t${t}\\\\t${this._getClientID()}\\\\r${r.join(\\\"\\\\t\\\")}\\\\r${this._userRole}`;this._send(i)}}!function(e){e.PUBLISH=\\\"publish\\\",e.SUBSCRIBE=\\\"subscribe\\\"}(zt||(zt={})),function(e){e.BEGIN=\\\"begin\\\",e.END=\\\"end\\\"}(Qt||(Qt={}));class er{constructor(e){this._room=e,this._audioLevelChangeHandler=null,this._timer=null,this._pc=this._room.__getPC()}_audioLevelReport(){return S(this,void 0,void 0,(function*(){if(\\\"new\\\"===this._pc.getRTCPeerConn().iceConnectionState||!this._audioLevelChangeHandler)return;const e=(yield this._pc.getAudioLevelReportData()).map((e=>{const{userId:t}=Pr.parseTrackId(e.trackId);return{track:this._room.getCrtUserId()===t?this._room.getLocalTrack(e.trackId):this._room.getRemoteTrack(e.trackId),audioLevel:e.audioLevel||0}})).filter((e=>e.track));this._audioLevelChangeHandler(e)}))}onAudioLevelChange(e,t){t<300||t>1e3?C.error('the valid range of onAudioLevelChange params \\\"gap\\\" is: > 300 && < 1000'):e?(this._audioLevelChangeHandler=e,this._timer=setInterval(this._audioLevelReport.bind(this),t)):this._audioLevelChangeHandler=null}clearAudioLevelReportTimer(){this._timer&&(clearInterval(this._timer),this._timer=null)}}!function(e){e[e.ANCHOR=1]=\\\"ANCHOR\\\",e[e.AUDIENCE=2]=\\\"AUDIENCE\\\"}(Xt||(Xt={}));const tr=e=>e instanceof qe?e.getTrackId():e.track.getTrackId();class rr{constructor(e,t,r,i,n,s,o,a,c,d){this._context=e,this._runtime=t,this._roomId=r,this._roomMode=n,this._service=s,this._initOptions=o,this._ntfClearRoomItem=a,this._isMainRoom=d,this._remoteTracks={},this._subscribedList=[],this._destroyed=!1,this.msgTaskQueue=new E,this._appListener=null,this._onRecvPKMsg=null,this._token=i.token,this._sessionId=i.sessionId,this._roomResources=c?{}:Lt(i),this._initRemoteTracks();const u=this._context.getCurrentId(),l=this._roomResources[u]=this._roomResources[u]||[];C.debug(`room data -> ${JSON.stringify(this._roomResources)}`),l.length>0&&k((()=>this._unpublishPrev(l))),c&&this._afterChangedRole(i),this._pinger=new At(r,this._roomMode,e,this._initOptions.pingGap),this._pinger.onFailed=this._kickoff.bind(this),this._pinger.onPingResult=this._handlePingResult.bind(this),this._pinger.start(),this._polarisReport=new Zt(this._context,this._runtime,this._roomId,this),this._polarisReport.sendR1(),this._pc=new Wt(this._reTryExchange.bind(this),this._polarisReport),this._pc.on(Wt.__INNER_EVENT_TRACK_READY__,this._onTrackReady,this),this._pc.on(ze.__INNER_EVENT_MUTED_CHANGE__,this._onLocalTrackMuted,this),this._pc.on(ze.__INNER_EVENT_DESTROY__,this._onLocalTrackDestroied,this)}_initRemoteTracks(){const e=this._context.getCurrentId();for(const t in this._roomResources){const r=this._roomResources[t];t!==e&&0!==r.length&&r.forEach((e=>{const t=mt(e),{tag:r,userId:i,mediaType:n}=ft(t),s=n===Fe.AUDIO_ONLY?new ot(r,i):new at(r,i);s.__innerSetRemoteMuted(0===e.state),this._remoteTracks[t]=s}))}}_handlePingResult(e){this._callAppListener(\\\"onPing\\\",e)}setBitrate(e,t,i){C.warn(\\\"`RCAbstractRoom.setBitrate` will be deprecated, use `RCLocalTrack.setBitrate` instead.\\\"),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"max\\\",e,(e=>(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(e)&&e>Math.max(t||1,200)),!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"min\\\",t,(t=>(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(t)&&t>=1&&(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(e)||t<e)),!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"start\\\",i,(i=>(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(i)&&i>t&&i<=e)),this._pc.setBitrate(e,t,i)}_onTrackReady(e){const t=e.streams[0].id,r=e.receiver.track,i=[t,\\\"audio\\\"===r.kind?Fe.AUDIO_ONLY:Fe.VIDEO_ONLY].join(\\\"_\\\"),n=this._remoteTracks[i];n?(n.__innerSetMediaStreamTrack(r),this._callAppListener(\\\"onTrackReady\\\",n)):C.warn(`cannot found remote track ${r.id}`)}_callAppListener(e,...t){var r;const i=null===(r=this._appListener)||void 0===r?void 0:r[e];if(i)try{i(...t)}catch(e){C.error(e)}}_onUserUnpublish(e){return S(this,void 0,void 0,(function*(){yield this.unsubscribe(e),e.forEach((e=>{e.__innerDestroy(),delete this._remoteTracks[e.getTrackId()]})),this._onTrackUnpublish(e)}))}_onTrackUnpublish(e){this._callAppListener(\\\"onTrackUnpublish\\\",e)}_unpublishPrev(e){return S(this,void 0,void 0,(function*(){const t=e.slice();e.length=0,C.info(`unpublish uris prev login: ${JSON.stringify(t)}`);const r=yield this._context.setRTCTotalRes(this._roomId,ct(Nt.UNPUBLISH,t),dt([]),Nt.TOTAL_CONTENT_RESOURCE,dt([]));r!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?C.error(`unpublish prev uris failed -> code: ${r}`):C.debug(\\\"unpublish uris prev login succeed\\\")}))}__parseInnerMessage(e){const{targetId:t,conversationType:r}=e;if(r!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ConversationType.RTC_ROOM)return!1;if(t!==this._roomId)return!0;C.info(`recv inner msg -> message: ${JSON.stringify(e)} | roomid: ${this._roomId}`);const i=e.content;switch(e.messageType){case Nt.KICK:this._kickoff(!0,i);break;case Nt.STATE:this.msgTaskQueue.push((()=>this._stateHandle(i)));break;case Nt.MODIFY:case Nt.PUBLISH:case Nt.UNPUBLISH:case Nt.TOTAL_CONTENT_RESOURCE:this.msgTaskQueue.push((()=>this._resourceHandle(i,e.messageType,e.senderUserId)));break;case Nt.ROOM_NOTIFY:this._callAppListener(\\\"onRoomAttributeChange\\\",e.messageType,e.content);break;case Nt.USER_NOTIFY:C.warn(`TODO: ${Nt.USER_NOTIFY}`);break;case Nt.PK_INVITE:case Nt.PK_CANCEL_INVITE:case Nt.PK_INVITE_TIMEOUT:case Nt.PK_INVITE_ANSWER:case Nt.PK_END:this._onRecvPKMsg&&this._onRecvPKMsg(e);break;case Nt.OTHER_ROOM_OFFLINE:break;default:this._callAppListener(\\\"onMessageReceive\\\",e.messageType,e.content,e.senderUserId,e.messageUId)}return!0}_kickoff(e,t){let r;C.warn(`onKickOff -> byServer: ${e}`),this._ntfClearRoomItem(),this._leaveHandle(!e),e&&((null==t?void 0:t.users)||[]).forEach((e=>{e.userId===this._context.getCurrentId()&&(r=e.type)})),this._callAppListener(\\\"onKickOff\\\",e,r)}_rtcpeerClosed(){this._ntfClearRoomItem(),this._leaveHandle(!0),this._callAppListener(\\\"onRTCPeerConnectionCloseByException\\\")}_resourceHandle(e,t,r){return S(this,void 0,void 0,(function*(){if(this._assertRoomDestroyed())return void C.warn(`room has been destroyed. -> roomId: ${this._roomId}`);const{uris:i,ignore:n}=e;if(n||!i)return;const s=[],o=[],a=[];let c;const d=this._roomResources[r]||(this._roomResources[r]=[]);switch(t){case Nt.MODIFY:a.push(...i);break;case Nt.PUBLISH:s.push(...i);break;case Nt.UNPUBLISH:o.push(...i);break;case Nt.TOTAL_CONTENT_RESOURCE:c=gt(d,i),s.push(...c.publishedList),o.push(...c.unpublishedList),a.push(...c.modifiedList)}if(s.length>0){const e=d.map(mt),t=[],r=[];if(s.forEach((i=>{const n=mt(i),s=e.indexOf(n),{userId:o,tag:a,mediaType:c}=ft(n);s>-1?d[s]=i:d.push(i);let u=this._remoteTracks[n];u?u.isSubscribed()&&t.push(u):(u=c===Fe.AUDIO_ONLY?new ot(a,o):new at(a,o),this._remoteTracks[n]=u,r.push(u)),u.__innerSetRemoteMuted(0===i.state)})),t.length){const e=t.map((e=>e.getTrackId()));C.debug(`resub tracks -> ${JSON.stringify(e)}`);const{code:r}=yield k((()=>this.__subscribe(t,!0)));r!==T.SUCCESS&&C.error(`resub tracks failed -> code: ${r}, ids: ${JSON.stringify(e)}`)}this._onTrackPublish(r)}if(o.length>0){const e=o.map(mt);for(let t=d.length-1;t>=0;t-=1){const r=d[t];e.includes(mt(r))&&d.splice(t,1)}const t=o.map((e=>{const t=mt(e);return this._remoteTracks[t]}));yield this._onUserUnpublish(t)}if(a.length>0){const e=d.map(mt);for(let t=0;t<a.length;t+=1){const r=a[t],i=mt(r),n=e.indexOf(i);d[n].state=r.state;const s=this._remoteTracks[i];s.__innerSetRemoteMuted(0===r.state),s.isAudioTrack()?this._onAudioMuteChange(s):this._onVideoMuteChange(s)}}}))}_onTrackPublish(e){this._callAppListener(\\\"onTrackPublish\\\",e)}_stateHandle(e){var t;return S(this,void 0,void 0,(function*(){const{users:r}=e;if(0===r.length)return;const i=[],n=[],s=[],o=[];r.forEach((e=>{0==+e.state?(C.debug(`user joined -> ${e.userId}`),this._roomResources[e.userId]||(e.switchRoleType?s.push(e.userId):i.push(e.userId)),this._roomResources[e.userId]=this._roomResources[e.userId]||[]):(C.debug(`user left -> ${e.userId}`),e.switchRoleType?o.push(e.userId):n.push(e.userId))}));const a=[...i,...s],c=[...n,...o];if(c.length){const e=[],t=[];c.forEach((r=>{e.push(...this.getRemoteTracksByUserId(r)),t.push(r)})),e.length&&(yield this.unsubscribe(e),e.forEach((e=>delete this._remoteTracks[e.getTrackId()]))),t.length&&t.forEach((e=>delete this._roomResources[e]))}if(null===(t=this._appListener)||void 0===t?void 0:t.onSwitchRole)return s.length&&s.forEach((e=>this._callAppListener(\\\"onSwitchRole\\\",e,Xt.ANCHOR))),o.length&&o.forEach((e=>this._callAppListener(\\\"onSwitchRole\\\",e,Xt.AUDIENCE))),i.length&&this._callAppListener(\\\"onUserJoin\\\",i),void(n.length&&this._callAppListener(\\\"onUserLeave\\\",n));a.length&&this._callAppListener(\\\"onUserJoin\\\",a),c.length&&this._callAppListener(\\\"onUserLeave\\\",c)}))}getRoomId(){return this._roomId}getCrtUserId(){return this._context.getCurrentId()}__getPC(){return this._pc}getRemoteUserIds(){const e=this._context.getCurrentId();return Object.keys(this._roomResources).filter((t=>t!==e))}getRemoteTracks(){const e=[];return this.getRemoteUserIds().forEach((t=>{e.push(...this.getRemoteTracksByUserId(t))})),e}getRemoteTracksByUserId(e){const t=[];for(const r in this._remoteTracks){const i=this._remoteTracks[r];i.getUserId()===e&&t.push(i)}return t}getSessionId(){return this._sessionId}sendMessage(e,t){return S(this,void 0,void 0,(function*(){const{code:r}=yield this._context.sendMessage(_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ConversationType.RTC_ROOM,this._roomId,{messageType:e,content:t,isStatusMessage:!0});return r!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(C.error(`send message failed -> code: ${r}`),{code:T.SIGNAL_ERROR}):{code:T.SUCCESS}}))}setRoomAttribute(e,t,r,n=!1){return S(this,void 0,void 0,(function*(){const s=yield this._context.setRTCData(this._roomId,e,t,n,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCApiType.ROOM,r);return s!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(C.error(`SetRoomAttributeValue Failed: ${s}`),{code:T.SIGNAL_ERROR}):{code:T.SUCCESS}}))}deleteRoomAttributes(e,t,r=!1){return S(this,void 0,void 0,(function*(){const n=yield this._context.removeRTCData(this._roomId,e,r,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCApiType.ROOM,t);return n!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(C.error(`DeleteRoomAttribute Failed: ${n}`),{code:T.SIGNAL_ERROR}):{code:T.SUCCESS}}))}getRoomAttributes(e=[],t=!1){return S(this,void 0,void 0,(function*(){const{code:r,data:n}=yield this._context.getRTCData(this._roomId,e,t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCApiType.ROOM);return r!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(C.error(`GetRoomAttributes Failed: ${r}`),{code:T.SIGNAL_ERROR}):{code:T.SUCCESS,data:n}}))}_setUserAttributeValue(e,t,r){return this._context.setRTCData(this._roomId,e,t,!1,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCApiType.PERSON,r)}_deleteUserAttributes(e,t){return this._context.removeRTCData(this._roomId,e,!1,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCApiType.PERSON,t)}_getUserAttributes(e){return this._context.getRTCData(this._roomId,e,!1,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCApiType.PERSON)}isDestroyed(){return this._destroyed}__destroy(e){return this._leaveHandle(e)}_leaveHandle(e){var t;return S(this,void 0,void 0,(function*(){this._destroyed||(this._destroyed=!0,null===(t=this._audioLevelReport)||void 0===t||t.clearAudioLevelReportTimer(),e&&(yield this._context.quitRTCRoom(this._roomId)),this._isMainRoom&&this._quitAllPKRoom(),this._pc.removeAllLocalTrack(),this._pinger.stop(),this._isMainRoom&&(yield this._service.exit(this._getRTCReqestHeaders())),this._pc.destroy(),this._polarisReport=null,this._removeRemoteTracks())}))}_onLocalTrackDestroied(e){e instanceof Xe&&e.__isTiny()||this.unpublish([e])}_onLocalTrackMuted(e){return S(this,void 0,void 0,(function*(){const t=e.getTrackId(),r=this._context.getCurrentId(),n=[{resourceId:t,enabled:!e.isLocalMuted()}],s=this._roomResources[r]||[],o=[];for(let e=0;e<s.length;e+=1){const t=s[e],r=mt(t),i=n.findIndex((e=>e.resourceId===r));if(i>=0){const{enabled:e}=n[i];t.state=e?1:0,o.push(t);break}}const a=yield k((()=>this._context.setRTCTotalRes(this._roomId,ct(Nt.MODIFY,o),dt(s),Nt.TOTAL_CONTENT_RESOURCE)));a!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS&&C.error(\\\"notice `track.enabled` change failed -> code: \\\"+a)}))}_removePubFailedTracks(e){e.forEach((e=>{const t=e instanceof ze?e:e.track;C.debug(`remove pub failed track from peerconnection -> trackId: ${t.getTrackId()}`),this._pc.removeLocalTrackById(t.getTrackId())}))}publish(e){return S(this,void 0,void 0,(function*(){return k((()=>this.__publish(e)))}))}__publish(e){return S(this,void 0,void 0,(function*(){if(!this._isMainRoom&&this instanceof _r)return C.error(\\\"the `publish` is disabled in PK room \\\"),{code:T.THE_FUNCTION_IS_DISABLED_IN_PKROOM};if(this._assertRoomDestroyed())return C.error(`publish failed, room has been destroyed. -> roomId: ${this._roomId}`),{code:T.ROOM_HAS_BEEN_DESTROYED};if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)(\\\"tracks\\\",e,(()=>(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isArray)(e)&&e.length>0&&e.every((e=>e instanceof ze||e.track instanceof ze))),!0))return C.error(`publish failed, tracks is invalid -> roomId: ${this._roomId}`),{code:T.PARAMS_ERROR};const t=this._context.getCurrentId();if(this._pc.getLocalTracks().length+(e=>{let t=0;return e.forEach((e=>{e instanceof ze?t++:e.pubTiny&&e.track.isVideoTrack()?t+=2:t++})),t})(e)>10)return C.error(`publish failed, tracks limit exceeded -> roomId: ${this._roomId}`),{code:T.PUBLISH_TRACK_LIMIT_EXCEEDED};C.debug(`publish tracks -> roomId: ${this._roomId}, tracks: ${e.map(tr)}`),e.forEach((e=>{const{track:t,pubTiny:r}=e instanceof ze?{pubTiny:!1,track:e}:e;if(this._pc.addLocalTrack(t),t.isVideoTrack()&&r){let e;try{e=t.__innerGetMediaStreamTrack().clone();const i=r.frameRate||Be.FPS_15,n=r.resolution||He.W176_H144,{width:s,height:o}=Ct(n),a=Et(i);e.applyConstraints({width:s,height:o,frameRate:a})}catch(r){return null==e||e.stop(),void C.warn(`pubTiny failed -> id: ${t.getTrackId()}, msg: ${r.message}`)}this._pc.addLocalTrack(new Xe(t.getTag(),t.getUserId(),e,!0))}})),this._pc.clearReTryExchangeTimer();const r=yield this._createExchangeParams(this._subscribedList,!1),n=this._getPushOtherRoomsParams();n&&(r.pushOtherRooms=n);const s=yield this._exchangeHandle(r);if(s.code!==T.SUCCESS)return C.error(`publish failed -> roomId: ${this._roomId}, code: ${s.code}`),this._removePubFailedTracks(e),{code:s.code};const{publishList:o,sdp:a,resultCode:l,message:h,urls:p,mcuPublishList:_}=s.data;if(l!==T.SUCCESS)return C.error(`publish failed -> roomId: ${this._roomId}, code: ${l}, msg: ${h}`),this._removePubFailedTracks(e),{code:l};const m=yield this._pc.setRemoteAnswer(a.sdp);if(m!==T.SUCCESS)return{code:m};const f=this._roomResources[t],v=o.map((e=>Object.assign({tag:e.msid.split(\\\"_\\\").pop(),state:this._getResourceState(mt(e))},e))),{publishedList:R}=gt(f,v),g=(null==_?void 0:_.map((e=>Object.assign({tag:e.msid.split(\\\"_\\\").pop(),state:1},e))))||[],S=yield this._context.setRTCTotalRes(this._roomId,ct(Nt.PUBLISH,R),dt(v),Nt.TOTAL_CONTENT_RESOURCE,dt(g));if(S!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS)return C.error(`send publish streams notification failed: ${S}`),{code:T.SIGNAL_ERROR};this._roomResources[t]=v;const I=R.map((e=>mt(e)));return this._polarisReport&&this._polarisReport.sendR2(zt.PUBLISH,Qt.BEGIN,I),e.forEach((e=>{const{track:t}=e instanceof ze?{track:e}:e;t.__innerSetPublished(!0)})),C.debug(`publish success: ${I.join(\\\",\\\")}`),this._roomMode===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCMode.LIVE?{code:T.SUCCESS,liveUrl:null==p?void 0:p.liveUrl}:{code:T.SUCCESS}}))}_getPushOtherRoomsParams(){if(this instanceof _r){const{code:e,roomPKHandler:t}=this.getRoomPKHandler(),r=[];if(e===T.SUCCESS&&t){const e=t.getJoinedPKRooms();for(const i in e){const n=e[i].getSessionId(),s=t.getPKInfo(i);if(!s)return;const{inviterUserAutoMix:o,inviteeUserAutoMix:a,inviterUserId:c}=s,d=this._context.getCurrentId()===c;r.push({roomId:i,sessionId:n,autoMix:d?!!o:!!a})}}return r}}_reTryExchange(){return S(this,void 0,void 0,(function*(){k((()=>S(this,void 0,void 0,(function*(){const e=yield this._createExchangeParams(this._subscribedList,!0),t=this._getPushOtherRoomsParams();t&&(e.pushOtherRooms=t);const r=yield this._exchangeHandle(e);if(r.code!==T.SUCCESS)return C.error(`reTryExchange failed: ${r.code}`),{code:r.code};const{sdp:i,resultCode:n}=r.data;if(n!==T.SUCCESS)return C.error(`reTryExchange failed: ${n}`),{code:n};this._pc.clearReTryExchangeTimer();const s=yield this._pc.setRemoteAnswer(i.sdp);return s!==T.SUCCESS?{code:s}:void 0}))))}))}_exchangeHandle(e){return this._service.exchange(this._getRTCReqestHeaders(),e)}_getRTCReqestHeaders(){return{\\\"App-Key\\\":this._context.getAppkey(),RoomId:this._roomId,Token:this._token,RoomType:this._roomMode,UserId:this._context.getCurrentId()}}_createExchangeParams(e,t){return S(this,void 0,void 0,(function*(){return{sdp:yield this._pc.createOffer(t),extend:JSON.stringify({resolutionInfo:this._pc.getOutboundVideoInfo()}),subscribeList:e.filter((e=>{const t=e.track.getTrackId(),{userId:r}=ft(t);if(!this._roomResources[r])return!1;const i=this._roomResources[r].filter((e=>t===`${e.msid}_${e.mediaType}`)).length;return i})).map((e=>({simulcast:e.subTiny?Mt.TINY:Mt.NORMAL,resolution:\\\"\\\",uri:this._getResourceById(e.track.getTrackId()).uri}))),switchstream:!1}}))}_getResourceState(e){var t;return(null===(t=this.getLocalTrack(e))||void 0===t?void 0:t.isLocalMuted())?0:1}unpublish(e){return S(this,void 0,void 0,(function*(){return k((()=>this.__unpublish(e)))}))}__unpublish(e){var t;return S(this,void 0,void 0,(function*(){if(!this._isMainRoom&&this instanceof _r)return C.error(\\\"the `unpublish` is disabled in PK room \\\"),{code:T.THE_FUNCTION_IS_DISABLED_IN_PKROOM};if(this._assertRoomDestroyed())return C.warn(`room has been destroyed, no need to unpublish tracks -> roomId: ${this._roomId}`),{code:T.SUCCESS};const r=this._context.getCurrentId();if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)(\\\"tracks\\\",e,(()=>e.every((e=>e.getUserId()===r&&e instanceof ze))),!0))return C.warn(`unpublish failed, tracks is invalid -> roomId: ${this._roomId}, tracks: ${e.map(tr)}`),{code:T.PARAMS_ERROR};const n=e.map((e=>e.getTrackId())),s=n.map(this._getResourceById.bind(this)).filter((e=>!!e));if(0===s.length)return{code:T.SUCCESS};const o=this._roomResources[r].filter((e=>!s.includes(e)));n.forEach((e=>this._pc.removeLocalTrackById(e))),null===(t=this._polarisReport)||void 0===t||t.sendR2(zt.PUBLISH,Qt.END,n),this._pc.clearReTryExchangeTimer();const a=yield this._createExchangeParams(this._subscribedList,!1),d=this._getPushOtherRoomsParams();d&&(a.pushOtherRooms=d);const u=yield this._exchangeHandle(a);if(u.code!==T.SUCCESS)return C.error(`exchange failed -> code: ${u.code}`),{code:u.code};const{publishList:l,sdp:h,resultCode:p,message:_,mcuPublishList:m}=u.data;p!==T.SUCCESS&&C.error(`unpublish streams failed -> code: ${p}, msg: ${_}`);const f=m?m.map((e=>Object.assign({tag:e.msid.split(\\\"_\\\").pop(),state:1},e))):[],v=yield this._context.setRTCTotalRes(this._roomId,ct(Nt.UNPUBLISH,s),dt(o),Nt.TOTAL_CONTENT_RESOURCE,dt(f));if(v!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS)return C.error(\\\"send unpublish notification failed:\\\",v),{code:T.SIGNAL_ERROR};C.debug(`unpublish success -> tracks: ${n.join(\\\",\\\")}`);const R=yield this._pc.setRemoteAnswer(h.sdp);if(R!==T.SUCCESS)return{code:R};const g=l.map((e=>Object.assign({tag:e.msid.split(\\\"_\\\").pop(),state:this._getResourceState(mt(e))},e)));return this._roomResources[r]=g,{code:T.SUCCESS}}))}_getResourceById(e){const{userId:t}=ft(e);return this._roomResources[t].find((t=>mt(t)===e))}_isValidResourceId(e){var t;const{userId:r}=ft(e);return!!(null===(t=this._roomResources[r])||void 0===t?void 0:t.find((t=>mt(t)===e)))}subscribe(e){return S(this,void 0,void 0,(function*(){return k((()=>this.__subscribe(e,!1)))}))}__subscribe(e,t=!1){var r;return S(this,void 0,void 0,(function*(){if(this._assertRoomDestroyed())return C.error(`subscribe failed, room has been destroyed -> roomId: ${this._roomId}`),{code:T.ROOM_HAS_BEEN_DESTROYED};if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)(\\\"tracks\\\",e,(()=>(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isArray)(e)&&e.length>0&&e.every((e=>e instanceof st||e.track instanceof st))),!0))return C.error(`subscribe failed, tracks is invalid -> roomId: ${this._roomId}`),{code:T.PARAMS_ERROR};C.info(`subscribe -> roomId: ${this._roomId}, tracks: ${e.map(tr)}`);const i=this._subscribedList.map((e=>Object.assign({},e))),n=e.map((e=>e instanceof st?{track:e}:e));let s=!1;const o=[];return n.forEach((e=>{const t=e.track.getTrackId();o.push(t);const r=i.find((e=>e.track.getTrackId()===t));r&&r.subTiny===e.subTiny||(r?r.subTiny=e.subTiny:i.push(e),s=!0)})),s||t?(null===(r=this._polarisReport)||void 0===r||r.sendR2(zt.SUBSCRIBE,Qt.BEGIN,o),this._updateSubListHandle(i,!0)):{code:T.SUCCESS}}))}unsubscribe(e){return S(this,void 0,void 0,(function*(){return k((()=>this.__unsubscribe(e)))}))}__unsubscribe(e){var t;return S(this,void 0,void 0,(function*(){if(this._assertRoomDestroyed())return C.warn(`room has beed destroyed, no need to unsubscribe tracks -> roomId: ${this._roomId}`),{code:T.SUCCESS};if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)(\\\"tracks\\\",e,(()=>(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isArray)(e)&&e.length>0&&e.every((e=>e instanceof st))),!0))return C.error(`unsubscribe failed, tracks is invalid -> roomId: ${this._roomId}`),{code:T.PARAMS_ERROR};C.info(`unsubscribe -> roomId: ${this._roomId}, tracks: ${e.map(tr)}`);const r=this._subscribedList.map((e=>Object.assign({},e))).filter((t=>!e.includes(t.track)));return null===(t=this._polarisReport)||void 0===t||t.sendR2(zt.SUBSCRIBE,Qt.END,e.map((e=>e.getTrackId()))),this._updateSubListHandle(r,!1)}))}_assertRoomDestroyed(){if(this._destroyed){const e=\\\"This room has been destroyed. Please use `RCRTCClient.joinRTCRoom` or `RCRTCClient.joinLivingRoom` to catch another instance.\\\";return C.warn(e),T.ROOM_HAS_BEEN_DESTROYED}}getLocalTrack(e){return this._pc.getLocalTrack(e)}getLocalTracks(){return this._pc.getLocalTracks()}getRemoteTrack(e){return this._remoteTracks[e]||null}updateSubList(e){return S(this,void 0,void 0,(function*(){return k((()=>this._updateSubListHandle(e,!1)))}))}_updateSubListHandle(e,t=!1){return S(this,void 0,void 0,(function*(){if(this._assertRoomDestroyed())return{code:T.ROOM_HAS_BEEN_DESTROYED};if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)(\\\"resources\\\",e,(()=>(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isArray)(e)&&e.every((e=>e instanceof st||e.track instanceof st))),!0))return C.error(`update sublist failed, tracks is invalid -> roomId: ${this._roomId}`),{code:T.PARAMS_ERROR};C.info(`update subscribe list -> roomId: ${this._roomId}, forceReq: ${t}, tracks: ${e.map(tr)}`);let r=e.map((e=>e instanceof st?{track:e}:Object.assign({},e)));const i={};r=r.filter((e=>{const t=e.track.getTrackId();return this._remoteTracks[t]?!i[t]&&(i[t]=!0):(C.warn(`track cannot found in room -> trackId: ${t}`),!1)})).map((e=>Object.assign({},e)));const n=this._subscribedList.map((e=>Object.assign({},e)));if(!t){let e=!1;if(r.forEach((t=>{const r=n.findIndex((e=>e.track===t.track));if(-1===r)return void(e=!0);n.splice(r,1)[0].subTiny!==t.subTiny&&(e=!0)})),n.length&&(e=!0),!e)return{code:T.SUCCESS}}this._pc.clearReTryExchangeTimer(),this._pc.updateSubRemoteTracks(r.map((e=>e.track)));const s=yield this._createExchangeParams(r,!1),o=this._getPushOtherRoomsParams();o&&(s.pushOtherRooms=o);const a=yield this._exchangeHandle(s),u=r.map((e=>e.track.getTrackId()));if(a.code!==T.SUCCESS)return{code:a.code};const{sdp:l,resultCode:h,message:p,subscribedList:_}=a.data;if(h!==T.SUCCESS)return C.error(`change subscribe list failed: ${h}`),{code:h};C.debug(`subscribe success: ${u.join(\\\",\\\")}`);const m=yield this._pc.setRemoteAnswer(l.sdp);if(m!==T.SUCCESS)return{code:m};const f=null==_?void 0:_.map((e=>`${e.msid}_${e.mediaType}`)),v=r.filter((e=>null==f?void 0:f.includes(e.track.getTrackId()))),R=r.filter((e=>!(null==f?void 0:f.includes(e.track.getTrackId()))));for(const e in this._remoteTracks){const t=v.some((t=>t.track.getTrackId()===e));this._remoteTracks[e].__innerSetSubscribed(t)}return this._subscribedList.splice(0,this._subscribedList.length,...v),R.length?{code:T.SUCCESS,failedList:R}:{code:T.SUCCESS}}))}registerRoomEventListener(e){this._appListener=e}registerReportListener(e){this._pc.registerReportListener(e)}onAudioLevelChange(e,t){var r;null===(r=this._audioLevelReport)||void 0===r||r.clearAudioLevelReportTimer(),this._audioLevelReport=new er(this),this._audioLevelReport.onAudioLevelChange(e,t||1e3)}__onReconnected(e){return S(this,void 0,void 0,(function*(){if(\\\"closed\\\"===this._pc.getRTCPeerConn().connectionState)return C.warn(\\\"RTCPeerConnection closed. Please rejoin room to restore services.\\\"),void this._rtcpeerClosed();const{code:t,data:r}=yield this._context.joinRTCRoom(this._roomId,this._roomMode,e);if(t!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS)return void C.error(`RTC __onReconnected getRTCRoomInfo failed: ${t}`);C.debug(`RTC __onReconnected getRTCRoomInfo success: ${JSON.stringify(r)}`);const n=[],s={},o={},a={},c=Lt(r),d=Object.keys(c),u=Object.keys(this._roomResources);for(let e=d.length-1;e>=0;e-=1){const t=d[e],r=u.indexOf(t);if(-1===r){n.push(t),s[t]=Rt(c[t]);continue}const i=this._roomResources[t],l=c[t],{publishedList:h,modifiedList:p,unpublishedList:_}=gt(i,l,!0);s[t]=Rt(h),o[t]=Rt(_),a[t]=Rt(p),u.splice(r,1)}u.length&&u.forEach((e=>{delete this._roomResources[e]})),Object.assign(this._roomResources,c),u.length&&this._callAppListener(\\\"onUserLeave\\\",u),n.length&&this._callAppListener(\\\"onUserJoin\\\",n);for(const e in o){const t=o[e];if(t.length){const e=t.map((e=>this._remoteTracks[mt(e)]));yield this._onUserUnpublish(e)}}return Object.keys(s).forEach((e=>{const t=s[e];if(0===t.length)return;const r=t.map((e=>{const t=mt(e),{userId:r,tag:i,mediaType:n}=ft(t),s=this._remoteTracks[t]=n===Fe.AUDIO_ONLY?new ot(i,r):new at(i,r);return s.__innerSetRemoteMuted(0===e.state),s}));this._onTrackPublish(r)})),Object.keys(a).forEach((e=>{a[e].forEach((e=>{const t=mt(e),r=this._remoteTracks[t];r.__innerSetRemoteMuted(0===e.state),r.isAudioTrack()?this._onAudioMuteChange(r):this._onVideoMuteChange(r)}))})),{data:r}}))}_onAudioMuteChange(e){this._callAppListener(\\\"onAudioMuteChange\\\",e)}_onVideoMuteChange(e){this._callAppListener(\\\"onVideoMuteChange\\\",e)}_afterChangedRole(e){}_removeRemoteTracks(){const e=Object.values(this._remoteTracks);e.length&&(e.forEach((e=>{e.isAudioTrack()&&e.__releaseMediaElement()})),this._remoteTracks={})}_registerPKMsgListener(e){this._onRecvPKMsg=e}_quitAllPKRoom(){}}var ir,nr,sr;!function(e){e[e.CROP=1]=\\\"CROP\\\",e[e.WHOLE=2]=\\\"WHOLE\\\"}(ir||(ir={})),function(e){e[e.CUSTOMIZE=1]=\\\"CUSTOMIZE\\\",e[e.SUSPENSION=2]=\\\"SUSPENSION\\\",e[e.ADAPTATION=3]=\\\"ADAPTATION\\\"}(nr||(nr={})),function(e){e[e.CROP=1]=\\\"CROP\\\",e[e.WHOLE=2]=\\\"WHOLE\\\"}(sr||(sr={}));const or=()=>({version:1,mode:nr.SUSPENSION});class ar{constructor(e,t,r){this._onFlush=e,this._isValidTrackId=t,this._sendCDNInfoSignal=r,this._values=or()}setHostVideoTrack(e){if(!this._isValidTrackId(e))return C.error(`setHostVideoTrack failed: videoTrackId is invalid -> ${e}`),this;const{mediaType:t,tag:r,userId:i}=ft(e);return t!==Fe.VIDEO_ONLY?(C.error(`setHostVideoTrack failed: kind of resource is not 'video' -> ${e}`),this):(this._values.host_stream_id=vt(i,r),this)}setMixLayoutMode(e){return[nr.CUSTOMIZE,nr.SUSPENSION,nr.ADAPTATION].includes(e)?(this._values.mode=e,this):(C.error(`layout mode is invalid: ${e}`),this)}_addOutputValue(e,t,r=\\\"normal\\\"){const i=this._values.output||(this._values.output={video:{normal:{width:640,height:480}}});if(\\\"cdn\\\"===e)return void(i.cdn=t);if(\\\"audio\\\"===e)return void(i.audio={bitrate:t});const n=i.video;if(\\\"normal\\\"!==r&&\\\"tiny\\\"!==r)if(\\\"backgroundColor\\\"!==r)if(\\\"exparams\\\"!==r){if(\\\"backgroundPicture\\\"===r){const e=n.backgroundPicture||(n.backgroundPicture={fillMode:ir.CROP,picture:[]});Object.assign(e,t)}}else n.exparams={renderMode:t};else n.backgroundColor=t;else{const e=n[r]||(n[r]={});Object.assign(e,t)}}setOutputVideoResolution(e){if(!Tt(e))return C.warn(\\\"setOutputVideoResolution failed: `resolution` is invalid\\\"),this;const{width:t,height:r}=Ct(e);return this._addOutputValue(\\\"video\\\",{width:t,height:r},\\\"normal\\\"),this}setOutputVideoFPS(e){if(!It(e))return C.warn(\\\"setOutputVideoFPS failed: `fps` is invalid\\\"),this;const t=Et(e);return this._addOutputValue(\\\"video\\\",{fps:t},\\\"normal\\\"),this}setOutputVideoBitrate(e){return!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(e)||e<=0?C.error(`bitrate is invalid: ${e}`):this._addOutputValue(\\\"video\\\",{bitrate:e},\\\"normal\\\"),this}setOutputTinyVideoResolution(e){if(!Tt(e))return C.warn(\\\"setOutputTinyVideoResolution failed: `resolution` is invalid\\\"),this;const{width:t,height:r}=Ct(e);return this._addOutputValue(\\\"video\\\",{width:t,height:r},\\\"tiny\\\"),this}setOutputTinyVideoFPS(e){if(!It(e))return C.warn(\\\"setOutputTinyVideoFPS failed: `fps` is invalid\\\"),this;const t=Et(e);return this._addOutputValue(\\\"video\\\",{fps:t},\\\"tiny\\\"),this}setOutputTinyVideoBitrate(e){return!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(e)||e<=0?C.error(`bitrate is invalid: ${e}`):this._addOutputValue(\\\"video\\\",{bitrate:e},\\\"tiny\\\"),this}setOutputVideoRenderMode(e){return[sr.CROP,sr.WHOLE].includes(e)?this._addOutputValue(\\\"video\\\",e,\\\"exparams\\\"):C.error(`renderMode is invalid: ${e}`),this}setOutputAudioBitrate(e){return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(e)&&e>0?this._addOutputValue(\\\"audio\\\",e):C.error(`bitrate is invalid: ${e}`),this}setOutputBackgroundColor(e){return/^0x[a-fA-F0-9]{6}$/.test(e)?this._addOutputValue(\\\"video\\\",e,\\\"backgroundColor\\\"):C.error(`color is invalid: ${e}`),this}addOutputBackgroundPicture(e,t,i,n,s){var o,a,c;if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isHttpUrl)(e))return C.error(`uri is invalid: ${e}`),this;if([t,i,n,s].some((e=>!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(e)||e<0||e>1)))return C.error(`some attrs of (x, y, w, h) is invalid: ${t}, ${i}, ${n}, ${s}`),this;const d=(null===(c=null===(a=null===(o=this._values.output)||void 0===o?void 0:o.video)||void 0===a?void 0:a.backgroundPicture)||void 0===c?void 0:c.picture)||[];return d.push({uri:e,w:n,h:s,x:t,y:i}),this._addOutputValue(\\\"video\\\",{picture:d},\\\"backgroundPicture\\\"),this}removeOutputBackgroundPicture(e){var t,r,i;if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isHttpUrl)(e))return C.error(`uri is invalid: ${e}`),this;let n=null===(i=null===(r=null===(t=this._values.output)||void 0===t?void 0:t.video)||void 0===r?void 0:r.backgroundPicture)||void 0===i?void 0:i.picture;return n&&(n=n.filter((t=>t.uri!==e)),this._addOutputValue(\\\"video\\\",{pictures:n},\\\"backgroundPicture\\\")),this}clearOutputBackgroundPicture(){return this._addOutputValue(\\\"video\\\",{pictures:[]},\\\"backgroundPicture\\\"),this}setOutputBackgroundPictureFillMode(e){return[ir.CROP,ir.WHOLE].includes(e)?this._addOutputValue(\\\"video\\\",{fillMode:e},\\\"backgroundPicture\\\"):C.error(`fillMode is invalid: ${e}`),this}addPublishStreamUrls(e){var t,r;const i=/^rtmp:\\\\/\\\\/.+/;if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isArray)(e)||0===e.length||e.some((e=>!i.test(e))))return C.error(`urls is invalid: ${e}`),this;const n=(null===(r=null===(t=this._values.output)||void 0===t?void 0:t.cdn)||void 0===r?void 0:r.concat())||[];let s=!1;return e.forEach((e=>{n.some((t=>t.pushurl===e))||(s=!0,n.push({pushurl:e}))})),n.length>5?(C.error(\\\"publish stream url no more than 5\\\"),this):(s&&this._addOutputValue(\\\"cdn\\\",n),this)}removePublishStreamUrls(e){var t,r;const i=/^rtmp:\\\\/\\\\/.+/;if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isArray)(e)||0===e.length||e.some((e=>!i.test(e))))return C.error(`urls is invalid: ${e}`),this;const n=(null===(r=null===(t=this._values.output)||void 0===t?void 0:t.cdn)||void 0===r?void 0:r.concat())||[];for(let t=n.length-1;t>=0;t-=1){const{pushurl:r}=n[t],i=e.indexOf(r);i>=0&&(e.splice(i,1),n.splice(t,1))}return this._addOutputValue(\\\"cdn\\\",n),this}clearPublishStreamUrls(){return this._addOutputValue(\\\"cdn\\\",[]),this}addCustomizeLayoutVideo(e,t,i,n,s){if(!this._isValidTrackId(e))return C.error(`trackId is invalid: ${e}`),this;if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(t)||!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(i))return C.error(`some attrs of (x, y) is invalid: ${t}, ${i}`),this;if([n,s].some((e=>!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(e)||e<0)))return C.error(`some attrs of (width, height) is invalid: ${n}, ${s}`),this;const{userId:o,tag:a,mediaType:c}=ft(e);if(c!==Fe.VIDEO_ONLY)return C.error(`kind of resource is not 'video': ${e}`),this;const d=vt(o,a);return(this._values.input||(this._values.input={video:[]})).video.push({user_id:o,stream_id:d,x:t,y:i,width:n,height:s}),this}removeCustomizeLayoutVideo(e){if(!this._isValidTrackId(e))return C.error(`trackId is invalid: ${e}`),this;const{userId:t,tag:r,mediaType:i}=ft(e);if(i!==Fe.VIDEO_ONLY)return C.error(`kind of resource is not 'video': ${e}`),this;const n=vt(t,r),s=this._values.input||(this._values.input={video:[]});return s.video=s.video.filter((e=>e.stream_id===n)),this}clearCustomizeLayoutVideo(){return(this._values.input||(this._values.input={video:[]})).video=[],this}flush(){var e,t,r,i;return S(this,void 0,void 0,(function*(){const n=JSON.parse(JSON.stringify(this._values)),{code:s}=yield this._onFlush(n);return s===T.SUCCESS&&((null===(t=null===(e=this._values.output)||void 0===e?void 0:e.video.normal)||void 0===t?void 0:t.width)||(null===(i=null===(r=this._values.output)||void 0===r?void 0:r.video.normal)||void 0===i?void 0:i.fps))&&this._sendCDNInfoSignal(),this._values=or(),{code:s}}))}}var cr,dr,ur,lr;!function(e){e[e.OPEN=1]=\\\"OPEN\\\",e[e.STOP=2]=\\\"STOP\\\"}(cr||(cr={})),function(e){e[e.SPREAD=0]=\\\"SPREAD\\\",e[e.NO_SPREAD=-1]=\\\"NO_SPREAD\\\"}(dr||(dr={})),function(e){e[e.AUTOMATIC=0]=\\\"AUTOMATIC\\\",e[e.MANUAL=1]=\\\"MANUAL\\\"}(ur||(ur={})),function(e){e[e.VIDEO=0]=\\\"VIDEO\\\",e[e.AUDIO=1]=\\\"AUDIO\\\"}(lr||(lr={}));const hr=()=>\\\"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\\\".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return(\\\"x\\\"===e?t:3&t|8).toString(16)}));class pr{constructor(e,t,r,i,n,s,o,a){this._context=e,this._runtime=t,this._service=r,this._initOptions=i,this._mainLivingRoom=n,this._registerPKMsgListener=s,this._onJoinedPKRoom=o,this._onLeavePKRoom=a,this._inviteTimeout=30,this._PKInfo={},this._appListener=null,this._joinedPKRooms={},this._registerPKMsgListener(this._onRecvPKMsg.bind(this)),this._mainRoomId=this._mainLivingRoom.getRoomId()}_callAppListener(e,...t){var r;const i=null===(r=this._appListener)||void 0===r?void 0:r[e];if(i)try{i(...t)}catch(e){C.error(e)}}_onInvite(e){const t=e.inviteInfo||{},{inviterRoomId:r,inviterUserId:i,extra:n}=t,s={inviterRoomId:r,inviterUserId:i};n&&Object.assign(s,{extra:n}),this._PKInfo[r]=t,this._callAppListener(\\\"onRequestJoinOtherRoom\\\",s)}_onCancelInvite(e){const{inviterRoomId:t,inviterUserId:r,extra:i}=e.inviteInfo||{},n={inviterRoomId:t,inviterUserId:r};i&&Object.assign(n,{extra:i}),delete this._PKInfo[t],this._callAppListener(\\\"onCancelRequestOtherRoom\\\",n)}_onInviteTimeout(e){}_onInviteAnswer(e){const{answerCode:t,inviteContent:r,inviteeUserAutoMix:i}=e,{inviterUserId:n,inviterRoomId:s,inviteeUserId:o,inviteeRoomId:a,extra:c}=r,d={agree:1===t,inviterRoomId:s,inviterUserId:n,inviteeRoomId:a,inviteeUserId:o};this._PKInfo[a].inviteeUserAutoMix=i,this._callAppListener(\\\"onResponseJoinOtherRoom\\\",d)}_onPKEnd(e){return S(this,void 0,void 0,(function*(){const{inviteeRoomId:t,inviterRoomId:r,userId:i}=e.inviteInfo,n=r===this._mainRoomId?t:r,s={endRoomId:n,endUserId:i};yield this.leaveOtherRoom(this._joinedPKRooms[n]),delete this._PKInfo[n],this._callAppListener(\\\"onFinishOtherRoom\\\",s)}))}_onRecvPKMsg(e){const{targetId:t,content:r,messageType:i}=e;switch(i){case Nt.PK_INVITE:this._onInvite(r);break;case Nt.PK_CANCEL_INVITE:this._onCancelInvite(r);break;case Nt.PK_INVITE_TIMEOUT:this._onInviteTimeout(r);break;case Nt.PK_INVITE_ANSWER:this._onInviteAnswer(r);break;case Nt.PK_END:this._onPKEnd(r)}}registerRoomPKEventListener(e){this._appListener=e}requestJoinOtherRoom(e,t,r){return S(this,void 0,void 0,(function*(){if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)(\\\"inviteeRoomId\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.notEmptyString,!0)||!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)(\\\"inviteeUserId\\\",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.notEmptyString,!0))return{code:T.PARAMS_ERROR};C.debug(`requestRoomPK -> inviteeRoomId: ${e}; inviteeUserId: ${t}; options: ${JSON.stringify(r||{})}`);const n=hr(),s=!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isBoolean)(null==r?void 0:r.autoMix)||(null==r?void 0:r.autoMix),o={inviteSessionId:n,inviterRoomId:this._mainRoomId,inviterUserId:this._context.getCurrentId(),inviterUserAutoMix:s,inviteeRoomId:e,inviteeUserId:t,inviteeTimeoutTime:this._inviteTimeout,extra:(null==r?void 0:r.extra)||\\\"\\\"},a={roomId:this._mainRoomId,invitedRoomId:e,invitedUserId:t,inviteTimeout:this._inviteTimeout,inviteInfo:JSON.stringify(o),inviteSessionId:n};C.debug(`requestRoomPK -> params: ${JSON.stringify(a)}`);const d=yield this._context.requestRoomPK(a);return d!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(C.error(`requestRoomPK failed: ${d}`),{code:d}):(C.debug(\\\"requestRoomPK success\\\"),this._PKInfo[e]={inviteSessionId:n,inviterRoomId:this._mainRoomId,inviterUserId:this._context.getCurrentId(),inviterUserAutoMix:s,inviteeRoomId:e},{code:T.SUCCESS})}))}cancelRequestJoinOtherRoom(e,t,r){return S(this,void 0,void 0,(function*(){if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)(\\\"inviteeRoomId\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.notEmptyString,!0)||!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)(\\\"inviteeUserId\\\",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.notEmptyString,!0))return{code:T.PARAMS_ERROR};if(!this._PKInfo[e])return C.error(`未发起过与 ${e} 房间内 ${t} 连麦的请求`),{code:T.PARAMS_ERROR};C.debug(`canceRequestJoinPK -> inviteeRoomId: ${e}; inviteeUserId: ${t}; extra: ${r}`);const n={inviterRoomId:this._mainRoomId,inviterUserId:this._context.getCurrentId(),inviteeRoomId:e,inviteeUserId:t,extra:r||\\\"\\\"},s={roomId:this._mainRoomId,invitedRoomId:e,invitedUserId:t,inviteSessionId:this._PKInfo[e].inviteSessionId,inviteInfo:JSON.stringify(n)};C.debug(`canceRequestJoinPK -> params: ${JSON.stringify(s)}`);const o=yield this._context.cancelRoomPK(s);return o!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(C.error(`canceRequestJoinPK failed: ${o}`),{code:o}):(C.debug(\\\"canceRequestJoinPK success\\\"),delete this._PKInfo[e],{code:T.SUCCESS})}))}responseJoinOtherRoom(e,t,r,n){return S(this,void 0,void 0,(function*(){if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)(\\\"inviterRoomId\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.notEmptyString,!0)||!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)(\\\"inviterUserId\\\",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.notEmptyString,!0))return{code:T.PARAMS_ERROR};if(!this._PKInfo[e])return C.error(`${e} 房间内的 ${t} 未发起过连麦请求`),{code:T.PARAMS_ERROR};C.debug(`responseRoomPK -> inviterRoomId: ${e}; inviterUserId: ${t}; agree: ${r}; options: ${JSON.stringify(n||{})}`);const{inviteSessionId:s,inviterUserAutoMix:o}=this._PKInfo[e],a=!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isBoolean)(null==n?void 0:n.autoMix)||(null==n?void 0:n.autoMix),d={inviteSessionId:s,inviterRoomId:e,inviterUserId:t,inviteeRoomId:this._mainRoomId,inviteeUserId:this._context.getCurrentId(),inviteeUserAutoMix:a},u=Object.assign(d,{inviterUserAutoMix:o}),l=r?Object.assign(d,{MultiRoomKey:`${e}|${this._mainRoomId}`,MultiRoomValue:JSON.stringify(u)}):d;!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isUndefined)(null==n?void 0:n.extra)&&Object.assign(l,{extra:n.extra});const m={agree:r,roomId:this._mainRoomId,inviteSessionId:s,inviteRoomId:e,inviteUserId:t,content:JSON.stringify(l),key:`${e}|${t}`,value:JSON.stringify(d)};C.debug(`responseRoomPK -> params: ${JSON.stringify(m)}`);const f=yield this._context.responseRoomPK(m);return f!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(C.error(`responseRoomPK failed: ${f}`),{code:f}):(C.debug(\\\"responseRoomPK success\\\"),this._PKInfo[e].inviteeUserAutoMix=a,{code:T.SUCCESS})}))}_quitRoomPK(e){return S(this,void 0,void 0,(function*(){const{inviterRoomId:t,inviteeRoomId:r,inviterUserId:n}=this._PKInfo[e],s={inviteeRoomId:r,inviterRoomId:t,userId:this._context.getCurrentId()},o={roomId:this._mainRoomId,endRoomId:e,sessionId:this._PKInfo[e].inviteSessionId,content:JSON.stringify(s),keys:[`${t}|${n}`]};C.debug(`quitRoomPK -> params: ${JSON.stringify(o)}`);const a=yield this._context.endRoomPK(o);return a!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(C.error(`quitRoomPK failed: ${a}`),{code:T.SIGNAL_ERROR}):(C.debug(\\\"quitRoomPK success\\\"),delete this._PKInfo[e],{code:T.SUCCESS})}))}_relaseCrtRoom(){}joinOtherRoom(e){return S(this,void 0,void 0,(function*(){if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)(\\\"roomId\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.notEmptyString,!0))return{code:T.PARAMS_ERROR};if(this._context.getConnectionStatus()!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ConnectionStatus.CONNECTED)return{code:T.SIGNAL_DISCONNECTED};if(C.debug(`joinPKRoom, roomId: ${e}`),this._joinedPKRooms[e])return{code:T.REPERT_JOIN_ROOM};const t=lr.VIDEO,{code:r,data:s}=yield this._context.joinRTCRoom(e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCMode.LIVE,t);if(r!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS)return C.error(`joinRoom failed -> code: ${r}`),{code:r};C.debug(`JoinPKRoom success -> userId: ${this._context.getCurrentId()}, roomId: ${e}, data: ${JSON.stringify(s)}`);const o=new _r(this._context,this._runtime,e,s,this._service,this._initOptions,this._relaseCrtRoom.bind(this),t,!1,!1);return this._joinedPKRooms[e]=o,this._onJoinedPKRoom(e,o),{room:o,code:T.SUCCESS,userIds:o.getRemoteUserIds(),tracks:o.getRemoteTracks()}}))}leaveOtherRoom(e,t){return S(this,void 0,void 0,(function*(){return k((()=>S(this,void 0,void 0,(function*(){const r=e.getRoomId();return C.debug(`leavePKRoom -> userId: ${this._context.getCurrentId()} , roomId: ${r}`),yield e.__destroy(!0),delete this._joinedPKRooms[r],this._onLeavePKRoom(r),this._PKInfo[r]?(t&&this._quitRoomPK(r),{code:T.SUCCESS}):{code:T.SUCCESS}}))))}))}getPKInfo(e){return this._PKInfo[e]}getJoinedPKRooms(){return this._joinedPKRooms}}class _r extends rr{constructor(e,t,r,i,n,s,o,a,c=!1,d){var l;super(e,t,r,i,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCMode.LIVE,n,s,o,c,d),this._livingType=a,this._isMainRoom=d,this._CDNUris=null,this._CDNEnable=!1,this._mcuConfigBuilder=new ar(this._onMCUConfigFlush.bind(this),this._isValidResourceId.bind(this),this._sendCDNInfoSignal.bind(this)),this._isMainRoom&&(this._roomPKHandler=new pr(e,t,n,s,this,super._registerPKMsgListener.bind(this),this._onJoinedPKRoom.bind(this),this._onLeavePKRoom.bind(this)));const h=null===(l=i.roomInfo.filter((e=>\\\"cdn_uris\\\"===e.key))[0])||void 0===l?void 0:l.value;h&&(this._CDNUris=JSON.parse(h)[0])}_isValidResourceId(e){var t;const{userId:r}=ft(e),i=!!(null===(t=this._roomResources[r])||void 0===t?void 0:t.find((t=>mt(t)===e)));let n=!1;const{code:s,roomPKHandler:o}=this.getRoomPKHandler();if(s!==T.SUCCESS||!o)return i;const a=o.getJoinedPKRooms(),c=[];return Object.values(a).map((e=>{c.push(...e.getRemoteTracks())})),n=c.some((t=>e===t.getTrackId())),i||n}getLivingType(){return this._livingType}getMCUConfigBuilder(){return this._isMainRoom?this._mcuConfigBuilder:(C.error(\\\"the `getMCUConfigBuilder` is disabled in PK room \\\"),{code:T.THE_FUNCTION_IS_DISABLED_IN_PKROOM})}_onMCUConfigFlush(e){return S(this,void 0,void 0,(function*(){const t={\\\"App-Key\\\":this._context.getAppkey(),Token:this._token,RoomId:this.getRoomId(),UserId:this._context.getCurrentId(),SessionId:this.getSessionId()},{code:r,res:i}=yield this._service.setMcuConfig(t,e);return r!==T.SUCCESS?(C.error(`set MCU config failed: ${r}`),{code:r}):(C.info(\\\"set MCU config success\\\"),i.pull_url&&(this._CDNUris=JSON.parse(i.pull_url)),{code:r,res:i})}))}__onReconnected(){const e=Object.create(null,{__onReconnected:{get:()=>super.__onReconnected}});var t,r;return S(this,void 0,void 0,(function*(){const i=yield e.__onReconnected.call(this,this._livingType);if(!i||!i.data)return;const n=i.data.roomInfo,s=null===(t=n.filter((e=>\\\"cdn_uris\\\"===e.key))[0])||void 0===t?void 0:t.value;if(!s)return;const o=JSON.parse(s);(null===(r=this._CDNUris)||void 0===r?void 0:r.enableInnerCDN)!==o.enableInnerCDN&&this._callAppListener(\\\"onCDNEnableChange\\\",o.enableInnerCDN),this._CDNUris=o}))}enableInnerCDN(e){return S(this,void 0,void 0,(function*(){if(!this._isMainRoom)return C.error(\\\"the `enableInnerCDN` is disabled in PK room \\\"),{code:T.THE_FUNCTION_IS_DISABLED_IN_PKROOM};if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isBoolean)(e))return C.error(\\\"`enable` is invalid\\\"),{code:T.PARAMS_ERROR};this._CDNEnable=e;const t={version:2,output:{inCDNModel:e?cr.OPEN:cr.STOP}},{code:r}=yield this._onMCUConfigFlush(t);if(r!==T.SUCCESS)return C.error(`enableInnerCDN failed -> code: ${r}`),{code:T.SIGNAL_ERROR};if(this._CDNUris&&this._CDNUris.broadcast!==dr.SPREAD)return C.info(\\\"enableInnerCDN succeed\\\"),{code:T.SUCCESS};const{code:i}=yield k((()=>S(this,void 0,void 0,(function*(){return this._sendCDNInfoSignal()}))));return i===T.SUCCESS?(C.info(\\\"enableInnerCDN succeed\\\"),{code:T.SUCCESS}):(C.error(`enableInnerCDN failed -> code: ${i}`),{code:i})}))}_sendCDNInfoSignal(){return S(this,void 0,void 0,(function*(){this._CDNUris=Object.assign({},this._CDNUris,{enableInnerCDN:this._CDNEnable});return(yield Promise.all([this._spreadCDNInfo(this._CDNUris),this._setRoomCDNInfo(this._CDNUris)])).every((e=>e.code===T.SUCCESS))?{code:T.SUCCESS}:{code:T.SIGNAL_ERROR}}))}_spreadCDNInfo(e){return S(this,void 0,void 0,(function*(){const t=yield this._context.setRTCCDNUris(this._roomId,Nt.TOTAL_CONTENT_RESOURCE,JSON.stringify([e]));return t!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(C.error(`spreadCDNInfo failed -> code: ${t}`),{code:T.SIGNAL_ERROR}):(C.info(\\\"spreadCDNInfo succeed\\\"),{code:T.SUCCESS})}))}_setRoomCDNInfo(e){return S(this,void 0,void 0,(function*(){const t=yield this._context.setRTCData(this._roomId,\\\"cdn_uris\\\",JSON.stringify([e]),!0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCApiType.ROOM);return t!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(C.error(`setRoomCDNInfo failed -> code: ${t}`),{code:T.SIGNAL_ERROR}):(C.info(\\\"setRoomCDNInfo succeed\\\"),{code:T.SUCCESS})}))}_resourceHandle(e,t,r){const i=Object.create(null,{_resourceHandle:{get:()=>super._resourceHandle}});var n;return S(this,void 0,void 0,(function*(){i._resourceHandle.call(this,e,t,r),e.cdn_uris&&((null===(n=this._CDNUris)||void 0===n?void 0:n.enableInnerCDN)!==e.cdn_uris[0].enableInnerCDN&&this._callAppListener(\\\"onCDNEnableChange\\\",!this.__getCDNEnable()),this._CDNUris=e.cdn_uris[0])}))}_exchangeHandle(e){var t,r,i;return S(this,void 0,void 0,(function*(){const n=yield this._service.exchange(this._getRTCReqestHeaders(),e),s=null===(r=null===(t=n.data)||void 0===t?void 0:t.urls)||void 0===r?void 0:r.pull_url;return n.code===T.SUCCESS&&s?(this._CDNUris=JSON.parse(s),(null===(i=this._CDNUris)||void 0===i?void 0:i.broadcast)===dr.SPREAD&&(this._CDNEnable=!0,this._sendCDNInfoSignal()),n):n}))}_afterChangedRole(e){const t=Lt(e),r=this._context.getCurrentId(),i=Object.keys(t);setTimeout((()=>{var n,s,o;const a=i.filter((e=>e!==r));a.length>0&&this._callAppListener(\\\"onUserJoin\\\",a);for(const e in t)e!==r&&this._resourceHandle({uris:t[e]},Nt.TOTAL_CONTENT_RESOURCE,e);(null===(n=e.roomInfo.filter((e=>\\\"cdn_uris\\\"===e.key))[0])||void 0===n?void 0:n.value)&&(null===(s=this._CDNUris)||void 0===s?void 0:s.push_mode)===ur.MANUAL&&this._callAppListener(\\\"onCDNEnableChange\\\",null===(o=this._CDNUris)||void 0===o?void 0:o.enableInnerCDN)}))}__getCDNEnable(){var e;return null===(e=this._CDNUris)||void 0===e?void 0:e.enableInnerCDN}__getCDNPushMode(){var e;return null===(e=this._CDNUris)||void 0===e?void 0:e.push_mode}_onJoinedPKRoom(e,t){const{code:r,roomPKHandler:i}=this.getRoomPKHandler();if(r===T.SUCCESS&&i){if(!i.getPKInfo(e))return;this._exchangeWithPushOtherRoom()}}_onLeavePKRoom(e){const{code:t,roomPKHandler:r}=this.getRoomPKHandler();if(t===T.SUCCESS&&r){if(!r.getPKInfo(e))return;this._exchangeWithPushOtherRoom()}}_exchangeWithPushOtherRoom(){return S(this,void 0,void 0,(function*(){if(!this.getLocalTracks().length)return;const e=yield this._createExchangeParams(this._subscribedList,!1),t=this._getPushOtherRoomsParams();t&&(e.pushOtherRooms=t);const r=yield this._exchangeHandle(e);if(r.code!==T.SUCCESS)return C.error(`reTryExchange failed: ${r.code}`),{code:r.code};const{sdp:i,resultCode:n}=r.data;if(n!==T.SUCCESS)return C.error(`exchange with pushOtherRoom failed: ${n}`),{code:n};const s=yield this._pc.setRemoteAnswer(i.sdp);return s!==T.SUCCESS?{code:s}:void 0}))}getRoomPKHandler(){return this._isMainRoom?{code:T.SUCCESS,roomPKHandler:this._roomPKHandler}:(C.error(\\\"the `getRoomPKHandler` is disabled in PK room \\\"),{code:T.THE_FUNCTION_IS_DISABLED_IN_PKROOM})}_quitAllPKRoom(){const e=this._roomPKHandler.getJoinedPKRooms();for(const t in e){const r=e[t];this._roomPKHandler.leaveOtherRoom(r)}}}class mr extends rr{constructor(e,t,r,i,n,s,o){super(e,t,r,i,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCMode.RTC,n,s,o,!1)}}const fr=()=>({\\\"Content-Type\\\":\\\"application/json;charset=UTF-8\\\",\\\"Cache-Control\\\":\\\"no-cache\\\",ClientType:`web|${yt.browser}|${yt.version}`,ClientVersion:\\\"5.3.1\\\",\\\"Client-Session-Id\\\":hr(),\\\"Request-Id\\\":Date.now().toString()});class vr{constructor(e,t,r,i=5e3){this._runtime=e,this._context=t,this._msUrl=r,this._timeout=i,this._msInNavi=[],this._failedMs=[],this._rtcFinger=void 0,this._clusterId=\\\"\\\",this._configUrl=\\\"\\\"}getNaviMS(){return this._msUrl?[this._msUrl]:this._clusterId?[`https://${this._clusterId}`]:(0===this._msInNavi.length&&(0===this._failedMs.length?this._msInNavi.push(...(e=>{var t;if(!e)return[];let r;try{r=JSON.parse(e.voipCallInfo||'{ \\\"strategy\\\": 0 }')}catch(t){return C.warn(\\\"parse `voipCallInfo` of navi failed: \\\"+e.voipCallInfo),[]}if(0===r.strategy)return[];const i=null===(t=r.callEngine)||void 0===t?void 0:t.filter((e=>4===e.engineType));if(!i||0===i.length)return[];const n=i[0],s=[];return n.mediaServer&&s.push(n.mediaServer.replace(/^(https?:\\\\/\\\\/)?/,\\\"https://\\\")),n.backupMediaServer&&n.backupMediaServer.forEach((e=>{s.push(e.replace(/^(https?:\\\\/\\\\/)?/,\\\"https://\\\"))})),s})(this._context.getNaviInfo())):(this._msInNavi.push(...this._failedMs),this._failedMs.length=0)),this._msInNavi.map((e=>e.trim())))}_request(e,t,r){return S(this,void 0,void 0,(function*(){const i=this.getNaviMS();if(0===i.length)return{code:T.NOT_OPEN_VIDEO_AUDIO_SERVER};this._rtcFinger&&(r.rtcFinger=this._rtcFinger);for(let n=0;n<i.length;n+=1){const s=`${i[n]}${e}`,o=fr();C.debug(`request -> Request-Id: ${o[\\\"Request-Id\\\"]}, url: ${s}`);const{status:a,data:c}=yield this._runtime.httpReq({url:s,body:JSON.stringify(r),headers:Object.assign(Object.assign({},o),t),method:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.HttpMethod.POST,timeout:this._timeout});if(200===a){const e=JSON.parse(c);return e.rtcFinger&&(this._rtcFinger=e.rtcFinger),e.clusterId&&(this._clusterId=e.clusterId),C.debug(`request success -> Request-Id: ${o[\\\"Request-Id\\\"]}`),{code:T.SUCCESS,data:e}}C.warn(`request failed -> Request-Id: ${o[\\\"Request-Id\\\"]}, status: ${a}, url: ${s}`),this._failedMs.push(...this._msInNavi.splice(n,1))}return{code:T.REQUEST_FAILED}}))}exchange(e,t){var r;return S(this,void 0,void 0,(function*(){const i=yield this._request(\\\"/exchange\\\",e,t);if(i.code===T.SUCCESS&&(null===(r=i.data)||void 0===r?void 0:r.resultCode)===T.SUCCESS){const e=i.data.urls;e&&(this._configUrl=e.configUrl)}return i}))}exit(e){return S(this,void 0,void 0,(function*(){const{code:t}=yield this._request(\\\"/exit\\\",e,{});return t}))}broadcastSubscribe(e,t){return this._request(\\\"/broadcast/subscribe\\\",e,t)}broadcastExit(e){return S(this,void 0,void 0,(function*(){const{code:t}=yield this._request(\\\"/broadcast/exit\\\",e,{});return{code:t}}))}setMcuConfig(e,t){return S(this,void 0,void 0,(function*(){if(!this._configUrl)return{code:T.MCU_SERVER_NOT_FOUND};const r=`${this._configUrl.replace(/^(https?:\\\\/\\\\/)?/,\\\"https://\\\")}/server/mcu/config`,i=fr();C.debug(`request -> Request-Id: ${i[\\\"Request-Id\\\"]}, url: ${r}`);const{status:n,data:s}=yield this._runtime.httpReq({url:r,headers:Object.assign(Object.assign({},i),e),body:JSON.stringify(t),method:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.HttpMethod.POST});if(200===n){C.debug(`request success -> Request-Id: ${i[\\\"Request-Id\\\"]}`);const e=JSON.parse(s);return{code:e.resultCode,res:e}}return{code:T.REQUEST_FAILED}}))}getCDNResourceInfo(e,t){return S(this,void 0,void 0,(function*(){const r=fr(),{status:i,data:n}=yield this._runtime.httpReq({url:t,headers:Object.assign(Object.assign({},r),e),method:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.HttpMethod.GET});if(200===i){const e=JSON.parse(n);return{code:e.resultCode,res:e}}return C.warn(`request failed -> Request-Id: ${r[\\\"Request-Id\\\"]}, status: ${i}, url: ${t}`),{code:T.REQUEST_FAILED}}))}}class Rr{constructor(e,t,r){this._context=e,this._rtcToken=\\\"\\\",this._liveUrl=\\\"\\\",this._subTracks=[],this._livingType=null,this._mediaType=null,this._subTiny=!1,this._fromRetry=!1,this._appListener=null,this._service=new vr(t,e,r.mediaServer)}_getReqHeaders(e){return S(this,void 0,void 0,(function*(){const t=this._context.getCurrentId(),r=t;if(!this._rtcToken){const{code:t,data:n}=yield this._context.getRTCToken(r,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCMode.LIVE,e);if(t!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS)return C.error(`getRTCToken failed: ${t}`),{code:T.SIGNAL_ERROR};this._rtcToken=n.rtcToken}return{code:T.SUCCESS,headers:{\\\"App-Key\\\":this._context.getAppkey(),UserId:t,RoomId:r,RoomType:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCMode.LIVE,Token:this._rtcToken}}}))}_clearSubscribeInfo(){var e;this._liveUrl=\\\"\\\",this._livingType=null,this._mediaType=null,this._subTiny=!1,this._subTracks.length=0,null===(e=this._pc)||void 0===e||e.destroy(),this._pc=null}_reTryExchange(){var e;return S(this,void 0,void 0,(function*(){this._fromRetry=!0;const{code:t}=yield this.subscribe(this._liveUrl,this._livingType,this._mediaType,this._subTiny);t===T.SUCCESS&&(null===(e=this._pc)||void 0===e||e.clearReTryExchangeTimer())}))}subscribe(e,t,r,i=!1){return S(this,void 0,void 0,(function*(){return k((()=>this.__subscribe(e,t,r,i)))}))}__subscribe(e,t,r,i=!1){var n;return S(this,void 0,void 0,(function*(){const s=[];if(Ot(this._context.getNaviInfo()))return{code:T.PACKAGE_ENVIRONMENT_ERROR,tracks:s};if(!this._fromRetry&&(null===(n=this._pc)||void 0===n||n.clearReTryExchangeTimer()),this._fromRetry=!1,!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isString)(e))return C.error(`liveUrl is invalid: ${e}`),{code:T.PARAMS_ERROR,tracks:s};if(![lr.AUDIO,lr.VIDEO].includes(t))return C.error(`livingType is invalid: ${t}`),{code:T.PARAMS_ERROR,tracks:s};if(![Fe.AUDIO_ONLY,Fe.VIDEO_ONLY,Fe.AUDIO_VIDEO].includes(r))return C.error(`mediaType is invalid: ${r}`),{code:T.PARAMS_ERROR,tracks:s};if(this._liveUrl&&this._liveUrl!==e)return{code:T.BROADCAST_SUB_LIST_NOT_EMPTY,tracks:s};this._pc||(this._pc=new Wt(this._reTryExchange.bind(this)),this._pc.on(Wt.__INNER_EVENT_TRACK_READY__,this._onTrackReady,this),this.registerReportListener(this._reportListener)),this._liveUrl=e;const{code:o,headers:a}=yield this._getReqHeaders(t);if(o!==T.SUCCESS)return{code:o,tracks:s};const c=`rc_mcu_${Date.now()}`,d=\\\"RongCloudRTC\\\";0===this._subTracks.length&&(this._subTracks.push(new ot(d,c),new at(d,c)),this._pc.updateSubRemoteTracks(this._subTracks.slice()));const u={sdp:yield this._pc.createOffer(!0),liveUrl:e,mediaType:r,simulcast:i?Mt.TINY:Mt.NORMAL,switchstream:!1},l=yield this._service.broadcastSubscribe(a,u);if(l.code!==T.SUCCESS)return C.error(`andience subscribe failed: ${l.code}`),{code:l.code,tracks:s};const h=l.data;if(h.resultCode!==T.SUCCESS)return C.error(`andience subscribe failed! code: ${h.resultCode}; message: ${h.message}`),{code:h.resultCode,tracks:s};C.debug(`andience subscribe success: ${e}`),this._livingType=t,this._mediaType=r,this._subTiny=i;const{sdp:p,subscribedList:_}=h,m=[];return _.forEach((e=>{const{mediaType:t}=e,r=this._subTracks[t];m.push(r),r.__innerSetRemoteMuted(!0)})),this._pc.setRemoteAnswer(p.sdp),{code:T.SUCCESS,tracks:m}}))}unsubscribe(){return S(this,void 0,void 0,(function*(){return k((()=>this.__unsubscribe()))}))}__unsubscribe(){var e;return S(this,void 0,void 0,(function*(){if(null===(e=this._pc)||void 0===e||e.clearReTryExchangeTimer(),!this._rtcToken||!this._liveUrl)return{code:T.SUCCESS};const{headers:t}=yield this._getReqHeaders(),{code:r}=yield this._service.broadcastExit(t);return r!==T.SUCCESS?C.error(`broadcast unsubscribe failed: ${r}`):C.debug(\\\"broadcast unsubscribe success\\\"),this._clearSubscribeInfo(),{code:r}}))}registerReportListener(e){var t;this._reportListener=e,null===(t=this._pc)||void 0===t||t.registerReportListener(e)}registerTrackEventListener(e){this._appListener=e}_onTrackReady(e){var t,r;const i=e.receiver.track,n=\\\"audio\\\"===i.kind?Fe.AUDIO_ONLY:Fe.VIDEO_ONLY,s=this._subTracks[n];s.__innerSetMediaStreamTrack(i);try{null===(r=null===(t=this._appListener)||void 0===t?void 0:t.onTrackReady)||void 0===r||r.call(t,s)}catch(e){C.error(e)}}}var gr,Sr;!function(e){e.RTMP=\\\"rtmp\\\",e.FLV=\\\"flv\\\",e.HLS=\\\"hls\\\"}(gr||(gr={})),function(e){e[e.NOT_HTTPS=0]=\\\"NOT_HTTPS\\\",e[e.HTTPS=1]=\\\"HTTPS\\\"}(Sr||(Sr={}));const Cr=Object.assign(Object.assign({},Ct(He.W176_H144)),{frameRate:Et(Be.FPS_15)});class Tr{constructor(e,t,r,i,n,s){this._context=e,this._runtime=t,this._initOptions=r,this._roomId=i,this._joinResData=n,this._livingType=s,this._roomAnchorList=[],this._roomRes={},this._roomAnchorRes={},this._remoteTracks={},this._appListener=null,this._subscribedList=[],this._sessionId=\\\"\\\",this._destroyed=!1,this._setInitData(),this._service=new vr(this._runtime,this._context,this._initOptions.mediaServer,this._initOptions.timeout),this._polarisReport=new Zt(this._context,this._runtime,this._roomId,this,qt.Audience),this._polarisReport.sendR1(),this._pc=new Wt(this._reTryExchange.bind(this),this._polarisReport),this._pc.on(Wt.__INNER_EVENT_TRACK_READY__,(e=>{const t=e.streams[0].id,r=e.receiver.track,i=[t,\\\"audio\\\"===r.kind?Fe.AUDIO_ONLY:Fe.VIDEO_ONLY].join(\\\"_\\\"),n=this._remoteTracks[i];n?(n.__innerSetMediaStreamTrack(r),this._callAppListener(\\\"onTrackReady\\\",n)):C.warn(\\\"cannot found RCRemoteTrack:\\\",r.id)})),this._context.onrtcdatachange=this.singalDataChange.bind(this)}_setInitData(){const{sessionId:e,remoteUserIds:t,remoteRTCUris:r,remoteMUCUris:i,remoteTracks:n,CDNUris:s}=((e,t)=>{const r=t.filter((e=>\\\"RC_RTC_SESSIONID\\\"===e.key))[0],i=r?r.value:\\\"\\\",n=t.filter((e=>\\\"RC_ANCHOR_LIST\\\"===e.key)).map((e=>JSON.parse(e.value||\\\"[]\\\")))[0],s=t.filter((e=>e.key.includes(\\\"RC_RES_\\\"))).map((e=>JSON.parse(e.value||\\\"{}\\\"))),o=s.length?JSON.parse(s[0].mcu_uris||\\\"[]\\\"):[],a=[];o.forEach((t=>{const{mediaType:r,tag:i}=t,n=r===Fe.AUDIO_ONLY?new ot(i,\\\"\\\",e):new at(i,\\\"\\\",e);a.push(n)}));const c=[],d=[];s.forEach((e=>{const t=JSON.parse(e.uris||\\\"[]\\\");c.push(...t),t.forEach((e=>{const{mediaType:t,tag:r,msid:i}=e,n=i.split(\\\"_\\\")[0],s=t===Fe.AUDIO_ONLY?new ot(r,n):new at(r,n);d.push(s)}))}));const u=t.filter((e=>\\\"RC_CDN\\\"===e.key)).map((e=>{const t=JSON.parse(e.value||\\\"[]\\\");return JSON.parse(t.cdn_uris)[0]}))[0];return{sessionId:i,remoteUserIds:n||[],remoteRTCUris:c,remoteMUCUris:o,remoteRTCTracks:d,remoteMCUTracks:a,remoteTracks:[...d,...a],CDNUris:u||{}}})(this._roomId,this._joinResData.kvEntries);this._sessionId=e,this._roomAnchorList=t,n.forEach((e=>{this._remoteTracks[e.getTrackId()]=e})),this._CDNUris=s,r.forEach((e=>{const t=e.msid.split(\\\"_\\\")[0];this._roomAnchorRes[t]?this._roomAnchorRes[t].push(e):this._roomAnchorRes[t]=[e]})),i.forEach((e=>{const{mediaType:t,tag:r}=e,i=[this._roomId,r,t].join(\\\"_\\\");this._roomRes[i]=e})),r.forEach((e=>{const t=mt(e);this._roomRes[t]=e}))}_assertRoomDestroyed(){if(this._destroyed){const e=\\\"This room has been destroyed. Please use `RCRTCClient.joinLivingRoomAsAudience` to catch another instance.\\\";return C.warn(e),T.ROOM_HAS_BEEN_DESTROYED}}singalDataChange(e,t){var r;if(t!==this._roomId)return void C.warn(`singalDataChange -> not the current room data: data roomId: ${t}, current roomId: ${this._roomId}`);C.debug(\\\"singalDataChange -> singalData:\\\",JSON.stringify(e||{}));const i=[],n=null===(r=e.filter((e=>\\\"RC_CDN\\\"===e.key))[0])||void 0===r?void 0:r.value;n&&this._diffCDNUris(JSON.parse(JSON.parse(n).cdn_uris)[0]),e.forEach((e=>{const{key:t,value:r,timestamp:n,uid:s}=e;if(-1!==t.indexOf(\\\"RC_RES_\\\")){const e=JSON.parse(r||\\\"{}\\\"),t=JSON.parse(e.mcu_uris||\\\"[]\\\"),n=JSON.parse(e.uris||\\\"[]\\\");return i.push(...t),void this._diffAnchorResource(n,s)}if(\\\"RC_ANCHOR_LIST\\\"===t){const e=JSON.parse(r||\\\"[]\\\"),{joinUserIds:t,leftUserIds:i}=this._diffAnchorList(e);t.length>0&&this._handleNewJoinedAnchor(t),i.length>0&&this._handleLeftedAnchor(i)}})),this._diffRoomResource(i)}_diffAnchorList(e){const t=e.filter((e=>this._roomAnchorList.indexOf(e)<0));return{leftUserIds:this._roomAnchorList.filter((t=>e.indexOf(t)<0)),joinUserIds:t}}_handleNewJoinedAnchor(e){this._roomAnchorList.push(...e),this._callAppListener(\\\"onAnchorJoin\\\",e)}_handleLeftedAnchor(e){return S(this,void 0,void 0,(function*(){this._roomAnchorList=this._roomAnchorList.filter((t=>!(e.indexOf(t)>-1)));const t=[];e.forEach((e=>{t.push(...this.getRemoteTracksByUserId(e)),delete this._roomAnchorRes[e]})),t.length&&(yield this.unsubscribe(t),t.forEach((e=>delete this._remoteTracks[e.getTrackId()]))),this._callAppListener(\\\"onAnchorLeave\\\",e)}))}_diffRoomResource(e){return S(this,void 0,void 0,(function*(){const t=[],r=[],i=[];e.forEach((e=>{const r=mt(e),{userId:n,tag:s,mediaType:o}=ft(r),a=[this._roomId,s,o].join(\\\"_\\\");if(!this._remoteTracks[a]){const r=o===Fe.AUDIO_ONLY?new ot(s,\\\"\\\",this._roomId):new at(s,\\\"\\\",this._roomId);t.push(r),this._remoteTracks[a]=r,this._roomRes[r.getTrackId()]=e}i.push(a)})),Object.keys(this._remoteTracks).forEach((e=>{i.indexOf(e)<0&&this._remoteTracks[e].isMCUTrack()&&r.push(this._remoteTracks[e])})),t.length>0&&this._callAppListener(\\\"onTrackPublish\\\",t),r.length>0&&this._onUserUnpublish(r,\\\"onTrackUnpublish\\\")}))}_diffAnchorResource(e,t){return S(this,void 0,void 0,(function*(){const r=this._roomAnchorRes[t]||(this._roomAnchorRes[t]=[]),{publishedList:i,unpublishedList:n,modifiedList:s}=gt(r,e);if(i.length){const e=r.map(mt),t=[],n=[];if(i.forEach((i=>{const s=mt(i),o=e.indexOf(s),{userId:a,tag:c,mediaType:d}=ft(s);o>-1?r[o]=i:r.push(i);let u=this._remoteTracks[s];this._roomRes[s]=i,u?u.isSubscribed()&&t.push(u):(u=d===Fe.AUDIO_ONLY?new ot(c,a):new at(c,a),this._remoteTracks[s]=u,n.push(u)),u.__innerSetRemoteMuted(0===i.state)})),t.length){const e=t.map((e=>e.getTrackId()));C.debug(`resub tracks -> ${JSON.stringify(e)}`);const{code:r}=yield k((()=>this._subscribeHandle(t,!0)));r!==T.SUCCESS&&C.error(`resub tracks failed -> code: ${r}, ids: ${JSON.stringify(e)}`)}this._callAppListener(\\\"onAnchorTrackPublish\\\",n)}if(n.length){const e=n.map(mt);for(let t=r.length-1;t>=0;t-=1){const i=r[t];e.includes(mt(i))&&r.splice(t,1)}const t=n.map((e=>{const t=mt(e);return this._remoteTracks[t]}));yield this._onUserUnpublish(t,\\\"onAnchorTrackUnpublish\\\")}if(s.length){const e=r.map(mt);for(let t=0;t<s.length;t++){const i=s[t],n=mt(i),o=e.indexOf(n);r[o].state=i.state;const a=this._remoteTracks[n];a.__innerSetRemoteMuted(0===i.state),a.isAudioTrack()?this._callAppListener(\\\"onAudioMuteChange\\\",a):this._callAppListener(\\\"onVideoMuteChange\\\",a)}}}))}_onUserUnpublish(e,t){return S(this,void 0,void 0,(function*(){yield this.unsubscribe(e),e.forEach((e=>{this._subscribedList=this._subscribedList.filter((t=>t.track.getTrackId()!==e.getTrackId())),delete this._roomRes[e.getTrackId()],e.__innerDestroy(),delete this._remoteTracks[e.getTrackId()]})),this._callAppListener(t,e)}))}_callAppListener(e,...t){var r;const i=null===(r=this._appListener)||void 0===r?void 0:r[e];if(i)try{i(...t)}catch(e){C.error(e)}}_reTryExchange(){return S(this,void 0,void 0,(function*(){k((()=>S(this,void 0,void 0,(function*(){var e;const{reqBody:t}=yield this._createSubscribeParams(this._subscribedList,{},!0),r=yield this._exchangeHandle(t);if(r.code!==T.SUCCESS)return C.error(`reTryExchange failed: ${r.code}`),{code:r.code};const{sdp:i,resultCode:n}=r.data;if(n!==T.SUCCESS)return C.error(`reTryExchange failed: ${n}`),{code:n};this._pc.clearReTryExchangeTimer();const s=this._subscribedList.filter((e=>e.track.isMCUTrack()));if(s.length>0){const t=s[0].track.getTrackId(),r=null===(e=this._roomRes[t])||void 0===e?void 0:e.msid,n=[this._roomId,\\\"RongCloudRTC\\\"].join(\\\"_\\\");i.sdp=i.sdp.replace(new RegExp(r,\\\"g\\\"),n)}const o=yield this._pc.setRemoteAnswer(i.sdp);return o!==T.SUCCESS?{code:o}:void 0}))))}))}_createSubscribeParams(e,t,r){return S(this,void 0,void 0,(function*(){const i=yield this._pc.createOffer(r),n={resolutionInfo:[]},s={min:0,max:0};Object.keys(t).forEach((e=>{const{mediaStream:r,tinyStream:o}=t[e];[r,o].forEach(((t,r)=>{var o;const a=1===r?[e,\\\"tiny\\\"].join(\\\"_\\\"):e;i.sdp=null===(o=i.sdp)||void 0===o?void 0:o.replace(new RegExp(t.id,\\\"g\\\"),a);const c=t.getVideoTracks()[0];if(!c)return;const d=0===r,{width:u,height:l,frameRate:h}=d?pt(c):Cr;n.resolutionInfo.push({trackId:c.id,simulcast:d?Mt.NORMAL:Mt.TINY,resolution:`${u}x${l}`});const p=Ge(u,l),_=We(h);s.min+=p.minBitrate*_,s.max+=p.maxBitrate*_}))}));return{reqBody:{sdp:i,switchstream:!1,newVersionFlag:!0,subscribeList:e.map((e=>({simulcast:e.subTiny?Mt.TINY:Mt.NORMAL,resolution:\\\"\\\",uri:this._roomRes[e.track.getTrackId()].uri})))},dynamicBitrate:s,offer:i}}))}_subscribeHandle(e,t=!1){var r;return S(this,void 0,void 0,(function*(){if(this._assertRoomDestroyed())return{code:T.ROOM_HAS_BEEN_DESTROYED};if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)(\\\"tracks\\\",e,(()=>(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isArray)(e)&&e.length>0&&e.every((e=>e instanceof st||e.track instanceof st))),!0))return{code:T.PARAMS_ERROR};const i=this._subscribedList.map((e=>Object.assign({},e))),n=e.map((e=>e instanceof st?{track:e}:e));let s=!1;const o=[];return n.forEach((e=>{const t=e.track.getTrackId();o.push(t);const r=i.find((e=>e.track.getTrackId()===t));r&&r.subTiny===e.subTiny||(r?r.subTiny=e.subTiny:i.push(e),s=!0)})),s||t?(null===(r=this._polarisReport)||void 0===r||r.sendR2(zt.SUBSCRIBE,Qt.BEGIN,o),this._updateSubListHandle(i,!0)):{code:T.SUCCESS}}))}_getReqHeaders(){const e=this._context.getCurrentId();return{\\\"App-Key\\\":this._context.getAppkey(),RoomId:e,Token:this._joinResData.token,RoomType:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCMode.LIVE,UserId:e,\\\"Session-Id\\\":this._sessionId}}_exchangeHandle(e){return this._service.broadcastSubscribe(this._getReqHeaders(),e)}_updateSubListHandle(e,t=!1){var r;return S(this,void 0,void 0,(function*(){if(this._assertRoomDestroyed())return{code:T.ROOM_HAS_BEEN_DESTROYED};if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)(\\\"resources\\\",e,(()=>(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isArray)(e)&&e.every((e=>e instanceof st||e.track instanceof st))),!0))return{code:T.PARAMS_ERROR};let i=e.map((e=>e instanceof st?{track:e}:Object.assign({},e)));const n={};i=i.filter((e=>{const t=e.track.getTrackId();return!n[t]&&(n[t]=!0)})).map((e=>Object.assign({},e)));const s=this._subscribedList.map((e=>Object.assign({},e)));if(!t){let e=!1;if(i.forEach((t=>{const r=s.findIndex((e=>e.track===t.track));if(-1===r)return void(e=!0);s.splice(r,1)[0].subTiny!==t.subTiny&&(e=!0)})),s.length&&(e=!0),!e)return{code:T.SUCCESS}}this._pc.clearReTryExchangeTimer(),this._pc.updateSubRemoteTracks(i.map((e=>e.track)));const{reqBody:o}=yield this._createSubscribeParams(i,{},!1),a=yield this._exchangeHandle(o);if(s.length){const e=[];s.forEach((t=>{e.push(t.track.getTrackId())})),null===(r=this._pc.reportParser)||void 0===r||r.clearLatestPacketsRecv(e)}if(a.code!==T.SUCCESS)return{code:a.code};const{sdp:u,resultCode:l,message:h,subscribedList:p}=a.data;if(l!==T.SUCCESS)return C.error(\\\"change subscribe list failed:\\\",h,l),{code:l};i.forEach((e=>{const{track:t}=e;if(t.isMCUTrack()){const e=this._roomRes[t.getTrackId()].msid,{tag:r,userId:i}=ft(t.getTrackId()),n=[i,r].join(\\\"_\\\");u.sdp=u.sdp.replace(new RegExp(e,\\\"g\\\"),n)}}));const _=yield this._pc.setRemoteAnswer(u.sdp);if(_!==T.SUCCESS)return{code:_};const m=null==p?void 0:p.map((e=>`${e.msid}_${e.mediaType}`)),f=i.filter((e=>{if(e.track.isMCUTrack()){const t=this._roomRes[e.track.getTrackId()],r=`${t.msid}_${t.mediaType}`;return m.includes(r)}return null==m?void 0:m.includes(e.track.getTrackId())})),v=null==f?void 0:f.map((e=>`${e.track.getTrackId()}`)),R=i.filter((e=>!(null==v?void 0:v.includes(e.track.getTrackId()))));for(const e in this._remoteTracks){const t=f.some((t=>t.track.getTrackId()===e));this._remoteTracks[e].__innerSetSubscribed(t)}return this._subscribedList.splice(0,this._subscribedList.length,...f),R.length?{code:T.SUCCESS,failedList:R}:{code:T.SUCCESS}}))}_diffCDNUris(e){return S(this,void 0,void 0,(function*(){if(this._CDNUris.url&&!e.url)return this._callAppListener(\\\"onCDNInfoDisable\\\"),void(this._CDNUris=e);(!this._CDNUris||!this._CDNUris.url&&e.url)&&this._callAppListener(\\\"onCDNInfoEnable\\\",{resolution:`W${e.w}_H${e.h}`,fps:`FPS_${e.fps}`});const t=this._CDNUris.w&&e.w&&this._CDNUris.w!==e.w,r=this._CDNUris.h&&e.h&&this._CDNUris.h!==e.h,i=this._CDNUris.fps&&e.fps&&this._CDNUris.fps!==e.fps;(t||r||i)&&this._callAppListener(\\\"onCDNInfoChange\\\",{resolution:`W${e.w}_H${e.h}`,fps:`FPS_${e.fps}`}),this._CDNUris=e}))}_getCDNPlayUrl(e){return S(this,void 0,void 0,(function*(){const{w:t,h:r,fps:i}=e,n=this._initOptions.pullInnerCDNProtocol||gr.FLV,s=this._initOptions.pullInnerCDNUseHttps===Sr.NOT_HTTPS?Sr.NOT_HTTPS:Sr.HTTPS;if(!this._CDNUris.url)return C.error(`cdn_uris url is empty, the anchor need to open or push CDN, code: ${T.CDN_RESOURCE_IS_EMPTY}`),{code:T.CDN_RESOURCE_IS_EMPTY};const o={\\\"App-Key\\\":this._context.getAppkey(),Token:this._joinResData.token,RoomId:this.getRoomId(),UserId:this._context.getCurrentId(),SessionId:this.getSessionId()},a=[];t&&a.push(`w=${t}`),r&&a.push(`h=${r}`),i&&a.push(`fps=${i}`),a.push(`kind=${n}`),a.push(`is_https=${s}`);const c=a.join(\\\"&\\\");let d=`${this._CDNUris.url}?`;c&&(d+=c);const{code:u,res:l}=yield this._service.getCDNResourceInfo(o,d);return u!==T.SUCCESS?(C.error(`getCDNPlayUrl failed: ${u}`),{code:u}):(C.info(`getCDNPlayUrl success: ${null==l?void 0:l.data.pull_url}`),{code:u,CDNPlayUrl:null==l?void 0:l.data.pull_url})}))}getCDNPlayUrl(e,t){return S(this,void 0,void 0,(function*(){if(e&&!Tt(e))return C.error(\\\"`resolution` is invalid\\\"),{code:T.PARAMS_ERROR};if(t&&!It(t))return C.error(\\\"`fps` is invalid\\\"),{code:T.PARAMS_ERROR};const{width:r,height:i}=e?Ct(e):{width:null,height:null},n=t?Et(t):null,s={};return r&&(s.w=r),i&&(s.h=i),n&&(s.fps=n),this._getCDNPlayUrl(s)}))}subscribe(e){return S(this,void 0,void 0,(function*(){return k((()=>this._subscribeHandle(e,!1)))}))}__unsubscribe(e){var t;return S(this,void 0,void 0,(function*(){if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)(\\\"tracks\\\",e,(()=>(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isArray)(e)&&e.length>0&&e.every((e=>e instanceof st))),!0))return C.error(`unsubscribe failed, tracks is invalid -> roomId: ${this._roomId}`),{code:T.PARAMS_ERROR};const r=this._subscribedList.map((e=>Object.assign({},e))).filter((t=>!e.includes(t.track)));return null===(t=this._polarisReport)||void 0===t||t.sendR2(zt.SUBSCRIBE,Qt.END,e.map((e=>e.getTrackId()))),this._updateSubListHandle(r,!1)}))}unsubscribe(e){return S(this,void 0,void 0,(function*(){return k((()=>this.__unsubscribe(e)))}))}__destroy(e){var t;return S(this,void 0,void 0,(function*(){this._destroyed||(this._destroyed=!0,null===(t=this._audioLevelReport)||void 0===t||t.clearAudioLevelReportTimer(),e&&(yield this._context.quitLivingRoomAsAudience(this._roomId)),yield this._service.broadcastExit(this._getReqHeaders()),this._pc.destroy(),this._polarisReport=null,this._context.onrtcdatachange=()=>{})}))}getRemoteTrack(e){return this._remoteTracks[e]}__getPC(){return this._pc}getLocalTrack(e){return{}}__onReconnected(){return S(this,void 0,void 0,(function*(){const{code:e}=yield this._context.joinLivingRoomAsAudience(this._roomId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCMode.LIVE);e!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS&&C.error(\\\"join living room error when on reconnected\\\")}))}registerRoomEventListener(e){this._appListener=e}onAudioLevelChange(e,t){var r;null===(r=this._audioLevelReport)||void 0===r||r.clearAudioLevelReportTimer(),this._audioLevelReport=new er(this),this._audioLevelReport.onAudioLevelChange(e,t||1e3)}registerReportListener(e){var t;null===(t=this._pc)||void 0===t||t.registerReportListener(e)}getRoomId(){return this._roomId}getCrtUserId(){return this._context.getCurrentId()}getSessionId(){return this._sessionId}getRemoteUserIds(){return this._roomAnchorList}getRemoteTracksByUserId(e){const t=[];for(const r in this._remoteTracks){const i=this._remoteTracks[r];i.getUserId()===e&&t.push(i)}return t}getRemoteTracks(){const e=[],t=[];for(const e in this._remoteTracks){if(2===t.length)break;const r=this._remoteTracks[e];r.isMCUTrack()&&t.push(r)}return this._roomAnchorList.forEach((t=>{e.push(...this.getRemoteTracksByUserId(t))})),[...t,...e]}getRemoteRTCTracks(){const e=[];for(const t in this._remoteTracks){const r=this._remoteTracks[t];r.isMCUTrack()||e.push(r)}return e}getRemoteMCUTracks(){const e=[];for(const t in this._remoteTracks){const r=this._remoteTracks[t];r.isMCUTrack()&&e.push(r)}return e}getCDNInfo(){return this._CDNUris.w?{resolution:`W${this._CDNUris.w}_H${this._CDNUris.h}`,fps:`FPS_${this._CDNUris.fps}`,CDNEnable:this._CDNUris.enableInnerCDN}:{CDNEnable:!1}}}const Ir=(e,t)=>{const r=[];return r[0]=(null==t?void 0:t.withoutAudio)?void 0:e.getAudioTracks()[0],r[1]=(null==t?void 0:t.withoutVideo)?void 0:e.getVideoTracks()[0],r};class Er{constructor(e,t,r){this._context=e,this._runtime=t,this._options=r,this._crtRoom=null,this._audience=null,this._crtAudienceLivingRoom=null,Kt.setSdpSemantics(r.sdpSemantics||\\\"plan-b\\\"),this._service=new vr(this._runtime,this._context,this._options.mediaServer,this._options.timeout),this._context.onconnectionstatechange=this._onIMStatusChange.bind(this),this._context.ondisconnect=this._onIMDisconnect.bind(this),this._context.ondestroy=this._onIMUninit.bind(this),this._context.onmessage=this._handleMessage.bind(this)}_handleMessage(e){var t;if(e.conversationType!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ConversationType.RTC_ROOM)return!1;if(this._crtRoom instanceof _r){this._getJoinedPKRoomList().forEach((t=>{t.__parseInnerMessage(e)}))}return null===(t=this._crtRoom)||void 0===t||t.__parseInnerMessage(e),!0}_getJoinedPKRoomList(){const{code:e,roomPKHandler:t}=this._crtRoom.getRoomPKHandler();if(e===T.SUCCESS&&t){const e=t.getJoinedPKRooms()||{};return Object.values(e)}return[]}getCurrentId(){return this._context.getCurrentId()}joinRTCRoom(e,t){return k((()=>this._joinRTCRoom(e,t)))}_joinRTCRoom(e,t){return S(this,void 0,void 0,(function*(){if(Ot(this._context.getNaviInfo()))return{code:T.PACKAGE_ENVIRONMENT_ERROR};if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)(\\\"roomId\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.notEmptyString,!0))return{code:T.PARAMS_ERROR};if(this._crtRoom)return{code:T.REPERT_JOIN_ROOM};if(this._context.getConnectionStatus()!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ConnectionStatus.CONNECTED)return{code:T.SIGNAL_DISCONNECTED};if(!this._service.getNaviMS().length)return{code:T.NOT_OPEN_VIDEO_AUDIO_SERVER};C.debug(`joinRoom -> roomId: ${e}; joinType: ${t||_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCJoinType.KICK}`);const{code:r,data:s}=yield this._context.joinRTCRoom(e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCMode.RTC,void 0,t);if(r!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS){C.error(`joinRoom failed -> code: ${r}`);return{code:r===I.JOIN_REFUSED?T.SIGNAL_JOIN_RTC_ROOM_REFUSED:r}}C.debug(`joinRoom success -> userId: ${this._context.getCurrentId()}, roomId: ${e}, data: ${JSON.stringify(s)}`);const o=new mr(this._context,this._runtime,e,s,this._service,this._options,this._releaseCrtRoomObj.bind(this));return this._crtRoom=o,{room:o,code:T.SUCCESS,userIds:o.getRemoteUserIds(),tracks:o.getRemoteTracks()}}))}joinLivingRoom(e,t){return k((()=>this._joinLivingRoom(e,t)))}_joinLivingRoom(e,t){return S(this,void 0,void 0,(function*(){if(Ot(this._context.getNaviInfo()))return{code:T.PACKAGE_ENVIRONMENT_ERROR};if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)(\\\"roomId\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.notEmptyString,!0)||!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)(\\\"livingType\\\",t,(e=>e===lr.AUDIO||e===lr.VIDEO)))return{code:T.PARAMS_ERROR};if(this._crtRoom)return{code:T.REPERT_JOIN_ROOM};if(this._context.getConnectionStatus()!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ConnectionStatus.CONNECTED)return{code:T.SIGNAL_DISCONNECTED};if(!this._service.getNaviMS().length)return{code:T.NOT_OPEN_VIDEO_AUDIO_SERVER};C.debug(`joinRoom, roomId: ${e}`);const{code:r,data:s}=yield this._context.joinRTCRoom(e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCMode.LIVE,t);if(r!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS)return C.error(`joinRoom failed -> code: ${r}`),{code:r};C.debug(`JoinRoom success -> userId: ${this._context.getCurrentId()}, roomId: ${e}, data: ${JSON.stringify(s)}`);const o=new _r(this._context,this._runtime,e,s,this._service,this._options,this._releaseCrtRoomObj.bind(this),t,!1,!0);this._crtRoom=o;const a={room:o,code:T.SUCCESS,userIds:o.getRemoteUserIds(),tracks:o.getRemoteTracks()};return o.__getCDNPushMode()===ur.MANUAL&&Object.assign(a,{CDNEnable:o.__getCDNEnable()}),a}))}getAudienceClient(){return this._audience||(this._audience=new Rr(this._context,this._runtime,this._options)),this._audience}_onIMStatusChange(e){if(C.debug(`signal server connection state change: ${e}`),e===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ConnectionStatus.CONNECTED){if(this._crtRoom instanceof _r){this._getJoinedPKRoomList().forEach((e=>{e.__onReconnected()}))}this._crtRoom&&this._crtRoom.__onReconnected()}}_onIMDisconnect(){C.debug(\\\"TODO -> on IM disconnect\\\")}_onIMUninit(){C.debug(\\\"TODO -> on IM client ondestroy\\\")}leaveRoom(e){return k((()=>this._leaveRoom(e)))}_leaveRoom(e){return S(this,void 0,void 0,(function*(){return this._crtRoom?(yield this._crtRoom.__destroy(!0),C.debug(`quitRTCRoom -> userId: ${this._context.getCurrentId()} , roomId: ${this._crtRoom.getRoomId()}`),this._crtRoom=null,{code:T.SUCCESS}):{code:T.SUCCESS}}))}_releaseCrtRoomObj(){this._crtRoom=null}_getMediaStream(e,t=\\\"getUserMedia\\\"){return S(this,void 0,void 0,(function*(){try{const r=yield navigator.mediaDevices[t](e);return{code:T.SUCCESS,stream:r}}catch(e){if(\\\"Permission denied\\\"===e.message)return{code:T.PERMISSION_DENIED};C.error(`get user media failed -> ${e.message}`)}return{code:\\\"getUserMedia\\\"===t?T.GET_USER_MEDIA_FAILED:T.GET_DISPLAY_MEDIA_FAILED}}))}createMicrophoneAudioTrack(e=\\\"RongCloudRTC\\\",t){return S(this,void 0,void 0,(function*(){if(!ut(e))return{code:T.INVALID_TAGS};const r=this._context.getCurrentId();if(!r)return{code:T.INVALID_USER_ID};const{stream:i,code:n}=yield this._getMediaStream({audio:{deviceId:null==t?void 0:t.micphoneId,sampleRate:null==t?void 0:t.sampleRate}});if(n!==T.SUCCESS)return{code:n};const s=i.getAudioTracks()[0];return{code:n,track:new rt(e,r,s)}}))}createCameraVideoTrack(e=\\\"RongCloudRTC\\\",t){return S(this,void 0,void 0,(function*(){if(!ut(e))return{code:T.INVALID_TAGS};const r=this._context.getCurrentId();if(!r)return{code:T.INVALID_USER_ID};const i=Tt(null==t?void 0:t.resolution)?t.resolution:He.W640_H480,{width:n,height:s}=Ct(i),{stream:o,code:a}=yield this._getMediaStream({video:{deviceId:null==t?void 0:t.cameraId,frameRate:Et((null==t?void 0:t.frameRate)||Be.FPS_15),width:n,height:s,facingMode:null==t?void 0:t.faceMode}});if(a!==T.SUCCESS)return{code:a};const c=o.getVideoTracks()[0];return{code:a,track:new it(e,r,c)}}))}createMicrophoneAndCameraTracks(e=\\\"RongCloudRTC\\\",t){var r,i,n,s,o,a;return S(this,void 0,void 0,(function*(){const c=[];if(!ut(e))return{code:T.INVALID_TAGS,tracks:c};const d=this._context.getCurrentId();if(!d)return{code:T.INVALID_USER_ID,tracks:c};const u=Tt(null===(r=null==t?void 0:t.video)||void 0===r?void 0:r.resolution)?t.video.resolution:He.W640_H480,{width:l,height:h}=Ct(u),{stream:p,code:_}=yield this._getMediaStream({video:{deviceId:null===(i=null==t?void 0:t.video)||void 0===i?void 0:i.cameraId,frameRate:Et((null===(n=null==t?void 0:t.video)||void 0===n?void 0:n.frameRate)||Be.FPS_15),width:l,height:h,facingMode:null===(s=null==t?void 0:t.video)||void 0===s?void 0:s.faceMode},audio:{deviceId:null===(o=null==t?void 0:t.audio)||void 0===o?void 0:o.micphoneId,sampleRate:null===(a=null==t?void 0:t.audio)||void 0===a?void 0:a.sampleRate}});return _!==T.SUCCESS||p.getTracks().forEach((t=>{\\\"video\\\"===t.kind?c.push(new it(e,d,t)):c.unshift(new rt(e,d,t))})),{code:_,tracks:c}}))}createScreenVideoTrack(e=\\\"screenshare\\\",t){return S(this,void 0,void 0,(function*(){if(!ut(e))return{code:T.INVALID_TAGS};const r=this._context.getCurrentId();if(!r)return{code:T.INVALID_USER_ID};if(!bt())return{code:T.BROWSER_NOT_SUPPORT};const i=/Electron/.test(navigator.userAgent);if(i&&!(null==t?void 0:t.chromeMediaSourceId))return{code:T.PARAMS_ERROR};const n=Tt(null==t?void 0:t.resolution)?t.resolution:He.W1280_H720,{width:s,height:o}=Ct(n),a=i?{mandatory:{chromeMediaSourceId:t.chromeMediaSourceId,chromeMediaSource:\\\"desktop\\\",minWidth:s,maxWidth:s,minHeight:o,maxHeight:o}}:{frameRate:Et((null==t?void 0:t.frameRate)||Be.FPS_15),width:s,height:o},{stream:c,code:d}=yield this._getMediaStream({video:a,audio:!1},i?\\\"getUserMedia\\\":\\\"getDisplayMedia\\\");if(d!==T.SUCCESS)return{code:d};const u=c.getVideoTracks()[0];return{code:d,track:new nt(e,r,u)}}))}createLocalAudioTrack(e,t){return S(this,void 0,void 0,(function*(){if(!ut(e))return{code:T.INVALID_TAGS};if(!t||\\\"[object MediaStreamTrack]\\\"!==t.toString()||\\\"audio\\\"!==t.kind)return{code:T.CREATE_CUSTOM_TRACK_FAILED};const r=this._context.getCurrentId();return r?{code:T.SUCCESS,track:new Qe(e,r,t)}:{code:T.INVALID_USER_ID}}))}createLocalVideoTrack(e,t){return S(this,void 0,void 0,(function*(){if(!ut(e))return{code:T.INVALID_TAGS};if(!t||\\\"[object MediaStreamTrack]\\\"!==t.toString()||\\\"video\\\"!==t.kind)return{code:T.CREATE_CUSTOM_TRACK_FAILED};const r=this._context.getCurrentId();return r?{code:T.SUCCESS,track:new Xe(e,r,t)}:{code:T.INVALID_USER_ID}}))}createLocalFileTracks(e,t,r){return S(this,void 0,void 0,(function*(){if(!ut(e))return{code:T.INVALID_TAGS,tracks:[]};if(!kt())return{code:T.BROWSER_NOT_SUPPORT,tracks:[]};const i=t instanceof File?URL.createObjectURL(t):t;if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isHttpUrl)(i)&&!/^blob:/.test(i))return C.warn(`createLocalFileTracks failed: params error -> url: ${i}`),{code:T.PARAMS_ERROR,tracks:[]};const n=this._context.getCurrentId();return n?new Promise((t=>{const s=document.createElement(\\\"video\\\");(null==r?void 0:r.withoutAudio)&&(s.muted=!0),s.onloadedmetadata=()=>{const o=[];let a;try{const e=s.mozCaptureStream?\\\"mozCaptureStream\\\":\\\"captureStream\\\";a=s[e]()}catch(e){C.error(`create RCLocalFileTrack failed, captureSteam error. -> url: ${i}`),C.error(e),t({code:T.CREATE_FILE_TRACK_FAILED,tracks:o})}const[c,d]=Ir(a,r);c&&o.push(new tt(e,n,c,s)),d&&o.push(new et(e,n,d,s)),0===o.length&&(s.pause(),s.src=\\\"\\\"),s.onerror=null,t({code:T.SUCCESS,tracks:o})},s.onerror=()=>{C.error(`create RCLocalFileTrack failed -> url: ${i}`),t({code:T.CREATE_FILE_TRACK_FAILED,tracks:[]})},s.src=i,s.loop=!0,s.play()})):{code:T.INVALID_USER_ID,tracks:[]}}))}createLocalTracks(e,t,r){return S(this,void 0,void 0,(function*(){const i=[];if(!ut(e))return{code:T.INVALID_TAGS,tracks:i};if(!(t instanceof MediaStream))return{code:T.PARAMS_ERROR,tracks:i};const n=this._context.getCurrentId();if(!n)return{code:T.INVALID_USER_ID,tracks:i};const[s,o]=Ir(t,r);return s&&i.push(new Qe(e,n,s)),o&&i.push(new Xe(e,n,o)),{code:T.SUCCESS,tracks:i}}))}joinLivingRoomAsAudience(e,t){return S(this,void 0,void 0,(function*(){if(Ot(this._context.getNaviInfo()))return{code:T.PACKAGE_ENVIRONMENT_ERROR};if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)(\\\"roomId\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.notEmptyString,!0)||!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)(\\\"livingType\\\",t,(e=>e===lr.AUDIO||e===lr.VIDEO)))return{code:T.PARAMS_ERROR};if(this._crtAudienceLivingRoom)return{code:T.REPERT_JOIN_ROOM};if(!this._service.getNaviMS().length)return{code:T.NOT_OPEN_VIDEO_AUDIO_SERVER};const{code:r,data:n}=yield this._context.joinLivingRoomAsAudience(e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCMode.LIVE,t);if(r!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS)return C.error(\\\"audienceJoinLivingRoomError:\\\",r),{code:T.SIGNAL_AUDIENCE_JOIN_ROOM_FAILED};C.info(`joinLivingRoomAsAudience success, room data: ${JSON.stringify(n)}`);const s=new Tr(this._context,this._runtime,this._options,e,n,t);return this._crtAudienceLivingRoom=s,{room:s,code:T.SUCCESS,userIds:s.getRemoteUserIds(),RTCTracks:s.getRemoteRTCTracks(),MCUTracks:s.getRemoteMCUTracks(),CDNUris:s.getCDNInfo()}}))}leaveLivingRoomAsAudience(e){return S(this,void 0,void 0,(function*(){return this._crtAudienceLivingRoom?this._crtAudienceLivingRoom!==e?{code:T.PARAMS_ERROR}:(yield this._crtAudienceLivingRoom.__destroy(!0),this._crtAudienceLivingRoom=null,{code:T.SUCCESS}):{code:T.SUCCESS}}))}upgradeToAnchorRoom(e){return S(this,void 0,void 0,(function*(){if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)(\\\"room._roomId\\\",e._roomId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.notEmptyString,!0))return{code:T.PARAMS_ERROR};if(this._crtRoom)return{code:T.REPERT_JOIN_ROOM};const{code:t,data:r}=yield this._context.rtcIdentityChange(e._roomId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCIdentityChangeType.ViewerToAnchor,e._livingType);if(t!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS)return C.error(\\\"change room identity error\\\",t),{code:T.SIGNAL_ROOM_CHANGE_IDENTITY_FAILED};yield this._crtAudienceLivingRoom.__destroy(!1);const n=new _r(this._context,this._runtime,e._roomId,r,this._service,this._options,this._releaseCrtRoomObj.bind(this),e._livingType,!0,!0);return this._crtRoom=n,this._crtAudienceLivingRoom=null,{room:n,code:T.SUCCESS,userIds:e.getRemoteUserIds(),tracks:n.getRemoteTracks()}}))}downgradeToAudienceRoom(e){return S(this,void 0,void 0,(function*(){if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)(\\\"room._roomId\\\",e._roomId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.notEmptyString,!0))return{code:T.PARAMS_ERROR};if(this._crtAudienceLivingRoom)return{code:T.REPERT_JOIN_ROOM};const{code:t,data:r}=yield this._context.rtcIdentityChange(e._roomId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCIdentityChangeType.AnchorToViewer,e.getLivingType());if(t!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS)return C.error(\\\"change room identity error\\\",t),{code:T.SIGNAL_ROOM_CHANGE_IDENTITY_FAILED};C.info(`downgradeToAudienceRoom success, room data: ${JSON.stringify(r)}`);const n=new Tr(this._context,this._runtime,this._options,e._roomId,r,e.getLivingType());return this._crtAudienceLivingRoom=n,this._crtRoom.__destroy(!1),this._crtRoom=null,{room:n,code:T.SUCCESS,userIds:n.getRemoteUserIds(),RTCTracks:n.getRemoteRTCTracks(),MCUTracks:n.getRemoteMCUTracks(),CDNUris:n.getCDNInfo()}}))}getJoinedRoomInfo(){return S(this,void 0,void 0,(function*(){const{code:e,data:t}=yield this._context.getRTCJoinedUserInfo(this._context.getCurrentId());return e!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(C.error(\\\"getJoinedUserInfo error\\\",e),{code:T.SIGNAL_ROOM_CHANGE_IDENTITY_FAILED}):{code:T.SUCCESS,data:t}}))}}var yr;!function(e){e[e.SERVER_KICK=1]=\\\"SERVER_KICK\\\",e[e.OTHER_KICK=2]=\\\"OTHER_KICK\\\"}(yr||(yr={}));const kr={tag:\\\"RCRTC\\\",verify:e=>\\\"browser\\\"!==e.tag?(C.error(`RCRTC Plugin is not support the runtime '${e.tag}'`),!1):lt?(_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.VersionManage.add(\\\"plugin-rtc\\\",\\\"5.3.1\\\"),!!_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.VersionManage.validEngine(\\\"5.1.0\\\")||(C.error(`The current engine version '${_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.VersionManage.getInfo().engine}' error, plugin-rtc required engine version at least '5.1.0'.`),!1)):(C.error(\\\"Please use the https protocol or use `http://localhost` to open the page!\\\"),!1),setup:(e,t,i={})=>(C.setLogLevel(i.logLevel),C.setLogStdout(i.logStdout),C.warn(\\\"RCRTC Version: 5.3.1, Commit: e1af0f5ccb06a0084c94e1219d8af54c9793c06b\\\"),C.warn(`browserInfo.browser -> ${yt.browser}`),C.warn(`browserInfo.supportsUnifiedPlan -> ${yt.supportsUnifiedPlan}`),C.warn(`browserInfo.version -> ${yt.version}`),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.mediaServer\\\",i.mediaServer,(e=>!(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isHttpUrl)(e)||\\\"https:\\\"===location.protocol&&!/^https/.test(e)))),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.timeout\\\",i.timeout,(e=>(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(e)&&e>=5e3&&e<=3e4)),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.pingGap\\\",i.pingGap,(e=>(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(e)&&e>=3e3&&e<=1e4)),new Er(e,t,i))},br={DEFAULT:\\\"RongCloudRTC\\\"},Pr={transResolution:Ct,transFrameRate:Et,parseTrackId:ft,ifSupportLocalFileTrack:kt,ifSupportScreenShare:bt};\\n\\n\\n//# sourceURL=webpack://@rongcloud/rcliveroomlib/./node_modules/@rongcloud/plugin-rtc/dist/index.esm.js?\");\n\n/***/ }),\n\n/***/ \"./node_modules/events/events.js\":\n/*!***************************************!*\\\n  !*** ./node_modules/events/events.js ***!\n  \\***************************************/\n/***/ ((module) => {\n\neval(\"// Copyright Joyent, Inc. and other Node contributors.\\n//\\n// Permission is hereby granted, free of charge, to any person obtaining a\\n// copy of this software and associated documentation files (the\\n// \\\"Software\\\"), to deal in the Software without restriction, including\\n// without limitation the rights to use, copy, modify, merge, publish,\\n// distribute, sublicense, and/or sell copies of the Software, and to permit\\n// persons to whom the Software is furnished to do so, subject to the\\n// following conditions:\\n//\\n// The above copyright notice and this permission notice shall be included\\n// in all copies or substantial portions of the Software.\\n//\\n// THE SOFTWARE IS PROVIDED \\\"AS IS\\\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\\n\\n\\n\\nvar R = typeof Reflect === 'object' ? Reflect : null\\nvar ReflectApply = R && typeof R.apply === 'function'\\n  ? R.apply\\n  : function ReflectApply(target, receiver, args) {\\n    return Function.prototype.apply.call(target, receiver, args);\\n  }\\n\\nvar ReflectOwnKeys\\nif (R && typeof R.ownKeys === 'function') {\\n  ReflectOwnKeys = R.ownKeys\\n} else if (Object.getOwnPropertySymbols) {\\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\\n    return Object.getOwnPropertyNames(target)\\n      .concat(Object.getOwnPropertySymbols(target));\\n  };\\n} else {\\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\\n    return Object.getOwnPropertyNames(target);\\n  };\\n}\\n\\nfunction ProcessEmitWarning(warning) {\\n  if (console && console.warn) console.warn(warning);\\n}\\n\\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\\n  return value !== value;\\n}\\n\\nfunction EventEmitter() {\\n  EventEmitter.init.call(this);\\n}\\nmodule.exports = EventEmitter;\\nmodule.exports.once = once;\\n\\n// Backwards-compat with node 0.10.x\\nEventEmitter.EventEmitter = EventEmitter;\\n\\nEventEmitter.prototype._events = undefined;\\nEventEmitter.prototype._eventsCount = 0;\\nEventEmitter.prototype._maxListeners = undefined;\\n\\n// By default EventEmitters will print a warning if more than 10 listeners are\\n// added to it. This is a useful default which helps finding memory leaks.\\nvar defaultMaxListeners = 10;\\n\\nfunction checkListener(listener) {\\n  if (typeof listener !== 'function') {\\n    throw new TypeError('The \\\"listener\\\" argument must be of type Function. Received type ' + typeof listener);\\n  }\\n}\\n\\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\\n  enumerable: true,\\n  get: function() {\\n    return defaultMaxListeners;\\n  },\\n  set: function(arg) {\\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\\n      throw new RangeError('The value of \\\"defaultMaxListeners\\\" is out of range. It must be a non-negative number. Received ' + arg + '.');\\n    }\\n    defaultMaxListeners = arg;\\n  }\\n});\\n\\nEventEmitter.init = function() {\\n\\n  if (this._events === undefined ||\\n      this._events === Object.getPrototypeOf(this)._events) {\\n    this._events = Object.create(null);\\n    this._eventsCount = 0;\\n  }\\n\\n  this._maxListeners = this._maxListeners || undefined;\\n};\\n\\n// Obviously not all Emitters should be limited to 10. This function allows\\n// that to be increased. Set to zero for unlimited.\\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\\n    throw new RangeError('The value of \\\"n\\\" is out of range. It must be a non-negative number. Received ' + n + '.');\\n  }\\n  this._maxListeners = n;\\n  return this;\\n};\\n\\nfunction _getMaxListeners(that) {\\n  if (that._maxListeners === undefined)\\n    return EventEmitter.defaultMaxListeners;\\n  return that._maxListeners;\\n}\\n\\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\\n  return _getMaxListeners(this);\\n};\\n\\nEventEmitter.prototype.emit = function emit(type) {\\n  var args = [];\\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\\n  var doError = (type === 'error');\\n\\n  var events = this._events;\\n  if (events !== undefined)\\n    doError = (doError && events.error === undefined);\\n  else if (!doError)\\n    return false;\\n\\n  // If there is no 'error' event listener then throw.\\n  if (doError) {\\n    var er;\\n    if (args.length > 0)\\n      er = args[0];\\n    if (er instanceof Error) {\\n      // Note: The comments on the `throw` lines are intentional, they show\\n      // up in Node's output if this results in an unhandled exception.\\n      throw er; // Unhandled 'error' event\\n    }\\n    // At least give some kind of context to the user\\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\\n    err.context = er;\\n    throw err; // Unhandled 'error' event\\n  }\\n\\n  var handler = events[type];\\n\\n  if (handler === undefined)\\n    return false;\\n\\n  if (typeof handler === 'function') {\\n    ReflectApply(handler, this, args);\\n  } else {\\n    var len = handler.length;\\n    var listeners = arrayClone(handler, len);\\n    for (var i = 0; i < len; ++i)\\n      ReflectApply(listeners[i], this, args);\\n  }\\n\\n  return true;\\n};\\n\\nfunction _addListener(target, type, listener, prepend) {\\n  var m;\\n  var events;\\n  var existing;\\n\\n  checkListener(listener);\\n\\n  events = target._events;\\n  if (events === undefined) {\\n    events = target._events = Object.create(null);\\n    target._eventsCount = 0;\\n  } else {\\n    // To avoid recursion in the case that type === \\\"newListener\\\"! Before\\n    // adding it to the listeners, first emit \\\"newListener\\\".\\n    if (events.newListener !== undefined) {\\n      target.emit('newListener', type,\\n                  listener.listener ? listener.listener : listener);\\n\\n      // Re-assign `events` because a newListener handler could have caused the\\n      // this._events to be assigned to a new object\\n      events = target._events;\\n    }\\n    existing = events[type];\\n  }\\n\\n  if (existing === undefined) {\\n    // Optimize the case of one listener. Don't need the extra array object.\\n    existing = events[type] = listener;\\n    ++target._eventsCount;\\n  } else {\\n    if (typeof existing === 'function') {\\n      // Adding the second element, need to change to array.\\n      existing = events[type] =\\n        prepend ? [listener, existing] : [existing, listener];\\n      // If we've already got an array, just append.\\n    } else if (prepend) {\\n      existing.unshift(listener);\\n    } else {\\n      existing.push(listener);\\n    }\\n\\n    // Check for listener leak\\n    m = _getMaxListeners(target);\\n    if (m > 0 && existing.length > m && !existing.warned) {\\n      existing.warned = true;\\n      // No error code for this since it is a Warning\\n      // eslint-disable-next-line no-restricted-syntax\\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\\n                          existing.length + ' ' + String(type) + ' listeners ' +\\n                          'added. Use emitter.setMaxListeners() to ' +\\n                          'increase limit');\\n      w.name = 'MaxListenersExceededWarning';\\n      w.emitter = target;\\n      w.type = type;\\n      w.count = existing.length;\\n      ProcessEmitWarning(w);\\n    }\\n  }\\n\\n  return target;\\n}\\n\\nEventEmitter.prototype.addListener = function addListener(type, listener) {\\n  return _addListener(this, type, listener, false);\\n};\\n\\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\\n\\nEventEmitter.prototype.prependListener =\\n    function prependListener(type, listener) {\\n      return _addListener(this, type, listener, true);\\n    };\\n\\nfunction onceWrapper() {\\n  if (!this.fired) {\\n    this.target.removeListener(this.type, this.wrapFn);\\n    this.fired = true;\\n    if (arguments.length === 0)\\n      return this.listener.call(this.target);\\n    return this.listener.apply(this.target, arguments);\\n  }\\n}\\n\\nfunction _onceWrap(target, type, listener) {\\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\\n  var wrapped = onceWrapper.bind(state);\\n  wrapped.listener = listener;\\n  state.wrapFn = wrapped;\\n  return wrapped;\\n}\\n\\nEventEmitter.prototype.once = function once(type, listener) {\\n  checkListener(listener);\\n  this.on(type, _onceWrap(this, type, listener));\\n  return this;\\n};\\n\\nEventEmitter.prototype.prependOnceListener =\\n    function prependOnceListener(type, listener) {\\n      checkListener(listener);\\n      this.prependListener(type, _onceWrap(this, type, listener));\\n      return this;\\n    };\\n\\n// Emits a 'removeListener' event if and only if the listener was removed.\\nEventEmitter.prototype.removeListener =\\n    function removeListener(type, listener) {\\n      var list, events, position, i, originalListener;\\n\\n      checkListener(listener);\\n\\n      events = this._events;\\n      if (events === undefined)\\n        return this;\\n\\n      list = events[type];\\n      if (list === undefined)\\n        return this;\\n\\n      if (list === listener || list.listener === listener) {\\n        if (--this._eventsCount === 0)\\n          this._events = Object.create(null);\\n        else {\\n          delete events[type];\\n          if (events.removeListener)\\n            this.emit('removeListener', type, list.listener || listener);\\n        }\\n      } else if (typeof list !== 'function') {\\n        position = -1;\\n\\n        for (i = list.length - 1; i >= 0; i--) {\\n          if (list[i] === listener || list[i].listener === listener) {\\n            originalListener = list[i].listener;\\n            position = i;\\n            break;\\n          }\\n        }\\n\\n        if (position < 0)\\n          return this;\\n\\n        if (position === 0)\\n          list.shift();\\n        else {\\n          spliceOne(list, position);\\n        }\\n\\n        if (list.length === 1)\\n          events[type] = list[0];\\n\\n        if (events.removeListener !== undefined)\\n          this.emit('removeListener', type, originalListener || listener);\\n      }\\n\\n      return this;\\n    };\\n\\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\\n\\nEventEmitter.prototype.removeAllListeners =\\n    function removeAllListeners(type) {\\n      var listeners, events, i;\\n\\n      events = this._events;\\n      if (events === undefined)\\n        return this;\\n\\n      // not listening for removeListener, no need to emit\\n      if (events.removeListener === undefined) {\\n        if (arguments.length === 0) {\\n          this._events = Object.create(null);\\n          this._eventsCount = 0;\\n        } else if (events[type] !== undefined) {\\n          if (--this._eventsCount === 0)\\n            this._events = Object.create(null);\\n          else\\n            delete events[type];\\n        }\\n        return this;\\n      }\\n\\n      // emit removeListener for all listeners on all events\\n      if (arguments.length === 0) {\\n        var keys = Object.keys(events);\\n        var key;\\n        for (i = 0; i < keys.length; ++i) {\\n          key = keys[i];\\n          if (key === 'removeListener') continue;\\n          this.removeAllListeners(key);\\n        }\\n        this.removeAllListeners('removeListener');\\n        this._events = Object.create(null);\\n        this._eventsCount = 0;\\n        return this;\\n      }\\n\\n      listeners = events[type];\\n\\n      if (typeof listeners === 'function') {\\n        this.removeListener(type, listeners);\\n      } else if (listeners !== undefined) {\\n        // LIFO order\\n        for (i = listeners.length - 1; i >= 0; i--) {\\n          this.removeListener(type, listeners[i]);\\n        }\\n      }\\n\\n      return this;\\n    };\\n\\nfunction _listeners(target, type, unwrap) {\\n  var events = target._events;\\n\\n  if (events === undefined)\\n    return [];\\n\\n  var evlistener = events[type];\\n  if (evlistener === undefined)\\n    return [];\\n\\n  if (typeof evlistener === 'function')\\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\\n\\n  return unwrap ?\\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\\n}\\n\\nEventEmitter.prototype.listeners = function listeners(type) {\\n  return _listeners(this, type, true);\\n};\\n\\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\\n  return _listeners(this, type, false);\\n};\\n\\nEventEmitter.listenerCount = function(emitter, type) {\\n  if (typeof emitter.listenerCount === 'function') {\\n    return emitter.listenerCount(type);\\n  } else {\\n    return listenerCount.call(emitter, type);\\n  }\\n};\\n\\nEventEmitter.prototype.listenerCount = listenerCount;\\nfunction listenerCount(type) {\\n  var events = this._events;\\n\\n  if (events !== undefined) {\\n    var evlistener = events[type];\\n\\n    if (typeof evlistener === 'function') {\\n      return 1;\\n    } else if (evlistener !== undefined) {\\n      return evlistener.length;\\n    }\\n  }\\n\\n  return 0;\\n}\\n\\nEventEmitter.prototype.eventNames = function eventNames() {\\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\\n};\\n\\nfunction arrayClone(arr, n) {\\n  var copy = new Array(n);\\n  for (var i = 0; i < n; ++i)\\n    copy[i] = arr[i];\\n  return copy;\\n}\\n\\nfunction spliceOne(list, index) {\\n  for (; index + 1 < list.length; index++)\\n    list[index] = list[index + 1];\\n  list.pop();\\n}\\n\\nfunction unwrapListeners(arr) {\\n  var ret = new Array(arr.length);\\n  for (var i = 0; i < ret.length; ++i) {\\n    ret[i] = arr[i].listener || arr[i];\\n  }\\n  return ret;\\n}\\n\\nfunction once(emitter, name) {\\n  return new Promise(function (resolve, reject) {\\n    function errorListener(err) {\\n      emitter.removeListener(name, resolver);\\n      reject(err);\\n    }\\n\\n    function resolver() {\\n      if (typeof emitter.removeListener === 'function') {\\n        emitter.removeListener('error', errorListener);\\n      }\\n      resolve([].slice.call(arguments));\\n    };\\n\\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\\n    if (name !== 'error') {\\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\\n    }\\n  });\\n}\\n\\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\\n  if (typeof emitter.on === 'function') {\\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\\n  }\\n}\\n\\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\\n  if (typeof emitter.on === 'function') {\\n    if (flags.once) {\\n      emitter.once(name, listener);\\n    } else {\\n      emitter.on(name, listener);\\n    }\\n  } else if (typeof emitter.addEventListener === 'function') {\\n    // EventTarget does not have `error` event semantics like Node\\n    // EventEmitters, we do not listen for `error` events here.\\n    emitter.addEventListener(name, function wrapListener(arg) {\\n      // IE does not have builtin `{ once: true }` support so we\\n      // have to do it manually.\\n      if (flags.once) {\\n        emitter.removeEventListener(name, wrapListener);\\n      }\\n      listener(arg);\\n    });\\n  } else {\\n    throw new TypeError('The \\\"emitter\\\" argument must be of type EventEmitter. Received type ' + typeof emitter);\\n  }\\n}\\n\\n\\n//# sourceURL=webpack://@rongcloud/rcliveroomlib/./node_modules/events/events.js?\");\n\n/***/ }),\n\n/***/ \"./src/config.ts\":\n/*!***********************!*\\\n  !*** ./src/config.ts ***!\n  \\***********************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\neval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   \\\"sdkStatus\\\": () => (/* binding */ sdkStatus),\\n/* harmony export */   \\\"debug\\\": () => (/* binding */ debug),\\n/* harmony export */   \\\"RCSeatStatus\\\": () => (/* binding */ RCSeatStatus)\\n/* harmony export */ });\\n//sdk自身状态\\nvar sdkStatus;\\n(function (sdkStatus) {\\n    sdkStatus[sdkStatus[\\\"initing\\\"] = 0] = \\\"initing\\\";\\n    sdkStatus[sdkStatus[\\\"ready\\\"] = 1] = \\\"ready\\\"; //初始化完成\\n})(sdkStatus || (sdkStatus = {}));\\nvar debug = true;\\nvar RCSeatStatus = {\\n    // 空麦位\\n    RCSeatStatusEmpty: 0,\\n    // 麦位被使用，userId不为null\\n    RCSeatStatusUsing: 1,\\n    // 麦位被锁定\\n    RCSeatStatusLocking: 2\\n};\\n\\n\\n\\n//# sourceURL=webpack://@rongcloud/rcliveroomlib/./src/config.ts?\");\n\n/***/ }),\n\n/***/ \"./src/index.ts\":\n/*!**********************!*\\\n  !*** ./src/index.ts ***!\n  \\**********************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\neval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   \\\"RCVoiceRoomLibClass\\\": () => (/* binding */ RCVoiceRoomLibClass),\\n/* harmony export */   \\\"default\\\": () => (__WEBPACK_DEFAULT_EXPORT__)\\n/* harmony export */ });\\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! events */ \\\"./node_modules/events/events.js\\\");\\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(events__WEBPACK_IMPORTED_MODULE_0__);\\n/* harmony import */ var _modules_im_index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./modules/im/index */ \\\"./src/modules/im/index.ts\\\");\\n/* harmony import */ var _modules_rtc_index__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./modules/rtc/index */ \\\"./src/modules/rtc/index.ts\\\");\\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./config */ \\\"./src/config.ts\\\");\\n/* harmony import */ var _loger__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./loger */ \\\"./src/loger.ts\\\");\\nvar __extends = (undefined && undefined.__extends) || (function () {\\n    var extendStatics = function (d, b) {\\n        extendStatics = Object.setPrototypeOf ||\\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\\n        return extendStatics(d, b);\\n    };\\n    return function (d, b) {\\n        if (typeof b !== \\\"function\\\" && b !== null)\\n            throw new TypeError(\\\"Class extends value \\\" + String(b) + \\\" is not a constructor or null\\\");\\n        extendStatics(d, b);\\n        function __() { this.constructor = d; }\\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\\n    };\\n})();\\nvar __assign = (undefined && undefined.__assign) || function () {\\n    __assign = Object.assign || function(t) {\\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\\n            s = arguments[i];\\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\\n                t[p] = s[p];\\n        }\\n        return t;\\n    };\\n    return __assign.apply(this, arguments);\\n};\\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\n    return new (P || (P = Promise))(function (resolve, reject) {\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\n        function rejected(value) { try { step(generator[\\\"throw\\\"](value)); } catch (e) { reject(e); } }\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\n    });\\n};\\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\\n    return g = { next: verb(0), \\\"throw\\\": verb(1), \\\"return\\\": verb(2) }, typeof Symbol === \\\"function\\\" && (g[Symbol.iterator] = function() { return this; }), g;\\n    function verb(n) { return function (v) { return step([n, v]); }; }\\n    function step(op) {\\n        if (f) throw new TypeError(\\\"Generator is already executing.\\\");\\n        while (_) try {\\n            if (f = 1, y && (t = op[0] & 2 ? y[\\\"return\\\"] : op[0] ? y[\\\"throw\\\"] || ((t = y[\\\"return\\\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\\n            if (y = 0, t) op = [op[0] & 2, t.value];\\n            switch (op[0]) {\\n                case 0: case 1: t = op; break;\\n                case 4: _.label++; return { value: op[1], done: false };\\n                case 5: _.label++; y = op[1]; op = [0]; continue;\\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\\n                default:\\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\\n                    if (t[2]) _.ops.pop();\\n                    _.trys.pop(); continue;\\n            }\\n            op = body.call(thisArg, _);\\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\\n    }\\n};\\n\\n\\n\\n\\n\\n\\nvar RCVoiceRoomLibClass = /** @class */ (function (_super) {\\n    __extends(RCVoiceRoomLibClass, _super);\\n    function RCVoiceRoomLibClass() {\\n        var _this = _super.call(this) || this;\\n        _this._roomidcli = \\\"\\\";\\n        _this.isAnchor = false; // 默认观众\\n        _this.seatInfoList = []; //房间信息\\n        _this.RCSeatInfoSeatPartPrefixKey = \\\"RCSeatInfoSeatPartPrefixKey_\\\";\\n        _this.leaveRoomControl = true;\\n        _this.seatInfo = {\\n            status: 0,\\n            mute: false,\\n            speaking: false,\\n        };\\n        return _this;\\n        // let initpro: Promise<Function> = new Promise((resolve, reject) => {\\n        //     this.init(options);\\n        // })\\n        // initpro.catch((e) => {\\n        //     console.log(e, \\\"初始化错误\\\")\\n        // })\\n    }\\n    /**\\n    * 初始化 SDK\\n    *\\n    * @param appkey 融云应用身份标识\\n    */\\n    RCVoiceRoomLibClass.prototype.init = function (appkey) {\\n        var _this = this;\\n        /**\\n        * 开始初始化 imlib 和 rtc客户端\\n        */\\n        // console.log(\\\"初始化参数为：\\\", appkey);\\n        var im = new _modules_im_index__WEBPACK_IMPORTED_MODULE_1__.default(appkey);\\n        var rtc = new _modules_rtc_index__WEBPACK_IMPORTED_MODULE_2__.default(im.body);\\n        this.im = im;\\n        this.rtc = rtc;\\n        im.on(\\\"ready\\\", function () {\\n            _this.imready = true;\\n            _loger__WEBPACK_IMPORTED_MODULE_4__.default.log('im初始化完成 开始初始化rtc');\\n            _this.readyCheck();\\n            _this.rtc.on(\\\"ready\\\", function () {\\n                _loger__WEBPACK_IMPORTED_MODULE_4__.default.log('rtc初始化完成');\\n                _this.rtcready = true;\\n                _this.readyCheck();\\n            });\\n            _this.rtc.on(\\\"RtcRtt\\\", function (RtcRtt) {\\n                _this.emit(\\\"RtcRtt\\\", RtcRtt);\\n            });\\n            _this.rtc.on(\\\"remoteVideoTrack\\\", function (track) {\\n                _this.emit(\\\"remoteVideoTrack\\\", track);\\n            });\\n            _this.rtc.init(im.body);\\n        });\\n        im.on(\\\"joinRoom\\\", function (roomid) {\\n            if (_this.rtc.isAnchor && _this.im.seatInfoList[0] && _this.im.seatInfoList[0].status != _config__WEBPACK_IMPORTED_MODULE_3__.RCSeatStatus.RCSeatStatusEmpty) {\\n                console.warn(\\\"调用加入已经存在的房间不能使用 creatandJoinroom方法\\\");\\n            }\\n            _this.rtc.joinRoom(roomid);\\n        });\\n        im.on(\\\"setNewRoom\\\", function () {\\n            _this.seatInfoList = _this.im.seatInfoList;\\n            if (_this.rtc.isAnchor) {\\n                //console.log(\\\"是主播当前要上\\\", this.rtc.currentSeat);\\n                console.log(\\\"ck:\\\");\\n                _this.enterSeat(_this.rtc.currentSeat);\\n                _this.rtc.unmute();\\n            }\\n        });\\n        // im.on(\\\"gotRoomInfo\\\", (info) => {\\n        //     console.log(\\\"got Info: \\\", info)\\n        //     const reg = new RegExp(\\\"^[0-9]*$\\\");\\n        //     for (var i in info) {\\n        //         //this.roomInfo[i]=JSON.parse(info[i])\\n        //         if (i == \\\"RCRoomInfoKey\\\") {\\n        //             this.roomInfo = JSON.parse(info[i])\\n        //             this.emit(\\\"roomInfoDidUpdate\\\", this.roomInfo)\\n        //         } else if (i.substring(0, 28) == 'RCSeatInfoUserPartPrefixKey_' && reg.test(i.split('_')[1])) {\\n        //             this.seatInfoList[i.substring(28)] = JSON.parse(info[i])\\n        //             console.log('设置room info list:', JSON.parse(info[i]))\\n        //             this.emit(\\\"seatInfoDidUpdate\\\", this.seatInfoList)\\n        //         }\\n        //     }\\n        // })\\n        im.on(\\\"roomInfoDidUpdate\\\", function (parm) {\\n            _this.roomInfo = parm.roomInfo;\\n            _this.emit(\\\"roomInfoDidUpdate\\\", _this.roomInfo);\\n        });\\n        im.on(\\\"seatInfoDidUpdate\\\", function () {\\n            _this.seatInfoList = im.seatInfoList;\\n            _this.emit(\\\"seatInfoDidUpdate\\\", _this.seatInfoList);\\n        });\\n        im.on(\\\"onAudienceEnter\\\", function (res) {\\n            _this.emit(\\\"changeUserCount\\\", res);\\n        });\\n        im.on(\\\"onAudienceExit\\\", function (res) {\\n            _this.emit(\\\"changeUserCount\\\", res);\\n        });\\n        im.on(\\\"userEnter\\\", function (res) {\\n            _this.emit(\\\"userEnter\\\", res);\\n        });\\n        im.on(\\\"userExit\\\", function (res) {\\n            _this.emit(\\\"userExit \\\", res);\\n        });\\n        im.on(\\\"onMessageReceived\\\", function (message) {\\n            //默认消息\\n            console.log(message);\\n            _this.emit(\\\"onMessageReceived\\\", message);\\n        });\\n        im.on(\\\"speakingStatusChenge\\\", function (parm) {\\n            //音量状态变更\\n            // console.log(\\\"parm:\\\", parm);\\n            _this.emit(\\\"speakingStatusChenge\\\", parm);\\n            if (_this.seatInfoList[Number(parm.index)]) {\\n                // this.seatInfoList[Number(parm.index)].speaking = parm.speaking;\\n                _this.seatInfoList[Number(parm.index)]['speaking'] = parm.speaking;\\n            }\\n        });\\n        im.on(\\\"mute\\\", function (ismute) {\\n            //是否静音操作\\n            if (ismute) {\\n                _this.rtc.mute();\\n                _this.emit(\\\"SeatMute\\\");\\n            }\\n            else {\\n                _this.rtc.unmute();\\n                _this.emit(\\\"SeatUnMute\\\");\\n            }\\n        });\\n        im.on(\\\"leaveSeat\\\", function () {\\n            _this.leaveSeat(true);\\n            _this.emit(\\\"leaveSeat\\\");\\n            _this.emit(\\\"KickSeatReceived\\\");\\n        });\\n        im.on(\\\"enterSeat\\\", function () {\\n            //主动上麦 只有直播用 默认上1好麦位；\\n            console.log(\\\"上麦操作\\\");\\n            try {\\n                _this.enterSeat(1);\\n            }\\n            catch (error) {\\n                _loger__WEBPACK_IMPORTED_MODULE_4__.default._error('加入视频连麦失败:70009');\\n            }\\n        });\\n        im.on(\\\"RCPickerUserSeatContent\\\", function (parm) {\\n            _this.emit(\\\"onRCPickerUserSeatContent\\\", parm);\\n        });\\n        im.on(\\\"VoiceRoomAgreeManagePick\\\", function (parm) {\\n            _this.emit(\\\"onVoiceRoomAgreeManagePick\\\", parm);\\n        });\\n        im.on(\\\"VoiceRoomRejectManagePick\\\", function (parm) {\\n            _this.emit(\\\"onVoiceRoomRejectManagePick\\\", parm);\\n        });\\n        im.on(\\\"RCKickUserOutRoomContent\\\", function (parm) {\\n            _this.emit(\\\"RCKickUserOutRoomContent\\\", parm);\\n            if (parm.targetId == _this.im.userId) {\\n                console.log('this._roomidcli', _this._roomidcli);\\n                _this.leaveRoom(_this._roomidcli);\\n            }\\n        });\\n        im.on(\\\"RequestSeatAccepted\\\", function () {\\n            var key = \\\"RCRequestSeatPrefixKey_\\\";\\n            if (_this.rtc.roomType == 'live') {\\n                key = \\\"LIVE_VIDEO_REQUEST_PRE_\\\";\\n            }\\n            _this.emit(\\\"RequestSeatAccepted\\\");\\n            _this.im.seatInfoRemove(key + _this.im.userId).then(function (result) {\\n                _loger__WEBPACK_IMPORTED_MODULE_4__.default.log('操作成功:70000');\\n            }).catch(function (err) {\\n                _loger__WEBPACK_IMPORTED_MODULE_4__.default._error('同意排麦请求发送失败:70017', err);\\n            });\\n        });\\n        im.on(\\\"RequestSeatRejected\\\", function () {\\n            var key = \\\"RCRequestSeatPrefixKey_\\\";\\n            if (_this.rtc.roomType == 'live') {\\n                key = \\\"LIVE_VIDEO_REQUEST_PRE_\\\";\\n            }\\n            _this.emit(\\\"RequestSeatRejected\\\");\\n            // console.log('isrej', key, this.im.userId);\\n            // this.im.seatInfoRemove(key + this.im.userId).then((result: any) => {\\n            //     console.log(\\\"删除迈威成功\\\");\\n            //     loger.log('操作成功:70000')\\n            // }).catch((err: any) => {\\n            //     loger._error('拒绝排麦请求发送失败:70018')\\n            // });\\n        });\\n        im.on(\\\"RequestSeatListChanged\\\", function () {\\n            _this.emit(\\\"RequestSeatListChanged\\\");\\n            _loger__WEBPACK_IMPORTED_MODULE_4__.default.log('操作成功:70000');\\n        });\\n        im.on(\\\"onRoomNotificationReceived\\\", function (info) {\\n            _this.emit(\\\"onRoomNotificationReceived\\\", info);\\n        });\\n        im.on(\\\"VoiceRoomClosed\\\", function () {\\n            _this.emit(\\\"onVoiceRoomClosed\\\");\\n        });\\n        im.on(\\\"chatroomDestroyed\\\", function () {\\n            _this.emit(\\\"chatroomDestroyed\\\");\\n        });\\n        im.on(\\\"VoiceRoomBackgroundChanged\\\", function (img) {\\n            _this.emit(\\\"onVoiceRoomBackgroundChanged\\\", img);\\n        });\\n        im.on(\\\"onInvitation\\\", function (o) {\\n            //收到邀请消息\\n            _this.emit(\\\"onInvitation\\\", o);\\n        });\\n        im.on(\\\"onInvitationCancel\\\", function () {\\n            _this.emit(\\\"onInvitationCancel\\\");\\n        });\\n        im.on(\\\"invitationRejected\\\", function (userId) {\\n            _this.emit(\\\"invitationRejected\\\", userId);\\n        });\\n        im.on(\\\"invitationAccepted\\\", function (userId) {\\n            _this.emit(\\\"invitationAccepted\\\", userId);\\n        });\\n        im.on(\\\"keyValueDidUpdate\\\", function (o) {\\n            _this.emit(\\\"keyValueDidUpdate\\\", o);\\n        });\\n        this.rtc.on(\\\"joinRoom\\\", function () { return __awaiter(_this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0: return [4 /*yield*/, this.getRoomInfo(this._roomidcli)];\\n                    case 1:\\n                        _a.sent();\\n                        if (this.seatInfoList.length && this.seatInfoList[this.im.seatIndex] && this.seatInfoList[this.im.seatIndex].mute) {\\n                            // console.log(\\\"上了静音买位\\\");\\n                            this.rtc.mute();\\n                        }\\n                        return [2 /*return*/];\\n                }\\n            });\\n        }); });\\n        this.rtc.on(\\\"unpublish\\\", function () {\\n            _this.emit(\\\"onUnpublish\\\");\\n        });\\n        this.rtc.on(\\\"ondevicechange\\\", function () {\\n            _this.emit(\\\"ondevicechange\\\");\\n        });\\n        this.rtc.on('audioChenge', function (level) {\\n            if (_this.rtc.roomType == 'live') {\\n                return;\\n            }\\n            if (level.track._userId && level.track._userId == _this.im.userId) {\\n                var content = void 0;\\n                var speak = void 0;\\n                if (level.audioLevel) {\\n                    content = {\\n                        name: \\\"RCUserOnSeatSpeakingKey_\\\" + _this.rtc.currentSeat,\\n                        content: '1'\\n                    };\\n                    speak = {\\n                        index: _this.rtc.currentSeat + '',\\n                        speaking: '1'\\n                    };\\n                }\\n                else {\\n                    content = {\\n                        name: \\\"RCUserOnSeatSpeakingKey_\\\" + _this.rtc.currentSeat,\\n                        content: '0'\\n                    };\\n                    speak = {\\n                        index: _this.rtc.currentSeat + '',\\n                        speaking: '0'\\n                    };\\n                }\\n                // console.log('RCUserOnSeatSpeakingKey_', this.rtc.currentSeat);\\n                _this.im.messageUpdate(\\\"RC:VRLRefreshMsg\\\", content);\\n                _this.emit(\\\"speakingStatusChenge\\\", speak);\\n                if (_this.seatInfoList[Number(speak.index)]) {\\n                    // this.seatInfoList[Number(parm.index)].speaking = parm.speaking;\\n                    if (Number(speak.speaking)) {\\n                        _this.seatInfoList[Number(speak.index)]['speaking'] = true;\\n                    }\\n                    else {\\n                        _this.seatInfoList[Number(speak.index)]['speaking'] = false;\\n                    }\\n                }\\n            }\\n        });\\n    };\\n    RCVoiceRoomLibClass.prototype.connect = function (token) {\\n        this.im.connect(token);\\n    };\\n    RCVoiceRoomLibClass.prototype.readyCheck = function () {\\n        if (this.status == _config__WEBPACK_IMPORTED_MODULE_3__.sdkStatus.ready) {\\n            _loger__WEBPACK_IMPORTED_MODULE_4__.default.log(\\\"已经就绪\\\");\\n            return;\\n        }\\n        else {\\n            if (this.imready && this.rtcready) { //两模块就绪报上层ready\\n                this.emit(\\\"ready\\\");\\n            }\\n        }\\n    };\\n    RCVoiceRoomLibClass.prototype.createAndJoinRoom = function (op) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var _a;\\n            return __generator(this, function (_b) {\\n                switch (_b.label) {\\n                    case 0:\\n                        console.log(\\\"主播创建并加入房间\\\", op.roomId);\\n                        this.rtc.isAnchor = true;\\n                        if (op.roomType == 'live') {\\n                            this.rtc.roomType = 'live';\\n                            this.im.roomType = 'live';\\n                            this.rtc.videoNode = op.videoNode;\\n                            this.rtc.miniNode = op.miniNode;\\n                            this.RCSeatInfoSeatPartPrefixKey = \\\"LIVE_VIDEO_SEAT_INFO_PRE_\\\";\\n                        }\\n                        this.rtc.currentSeat = 0;\\n                        this._roomidcli = op.roomId;\\n                        this.im.joinRoom({\\n                            roomId: op.roomId,\\n                            roomName: op.roomName\\n                        });\\n                        _a = this;\\n                        return [4 /*yield*/, this.getLatestSeatInfo()];\\n                    case 1:\\n                        _a.seatInfoList = _b.sent();\\n                        return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    RCVoiceRoomLibClass.prototype.joinRoom = function (op) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var _a;\\n            return __generator(this, function (_b) {\\n                switch (_b.label) {\\n                    case 0:\\n                        console.log(\\\"加入房间:\\\", op.roomId);\\n                        console.log(op);\\n                        if (op.roomType == 'live') {\\n                            this.rtc.roomType = 'live';\\n                            this.im.roomType = 'live';\\n                            this.rtc.videoNode = op.videoNode;\\n                            this.rtc.miniNode = op.miniNode;\\n                            this.RCSeatInfoSeatPartPrefixKey = \\\"LIVE_VIDEO_SEAT_INFO_PRE_\\\";\\n                        }\\n                        //区分房间类型\\n                        this.rtc.isAnchor = false;\\n                        if (!(typeof op == 'string')) return [3 /*break*/, 2];\\n                        return [4 /*yield*/, this.im.joinRoom({\\n                                roomId: op\\n                            })];\\n                    case 1:\\n                        _b.sent();\\n                        return [3 /*break*/, 4];\\n                    case 2: return [4 /*yield*/, this.im.joinRoom({\\n                            roomId: op.roomId\\n                        }).catch(function (err) {\\n                            _loger__WEBPACK_IMPORTED_MODULE_4__.default._error('加入房间失败:70001');\\n                        })];\\n                    case 3:\\n                        _b.sent();\\n                        _b.label = 4;\\n                    case 4:\\n                        this.leaveRoomControl = true;\\n                        console.log(\\\"加入成功\\\");\\n                        this.im.enterRoomMessage();\\n                        this._roomidcli = op.roomId;\\n                        _a = this;\\n                        return [4 /*yield*/, this.getLatestSeatInfo()];\\n                    case 5:\\n                        _a.seatInfoList = _b.sent();\\n                        return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    RCVoiceRoomLibClass.prototype.leaveRoom = function (roomid) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var index;\\n            var _this = this;\\n            return __generator(this, function (_a) {\\n                if (this.leaveRoomControl) {\\n                    console.log(\\\"liv\\\");\\n                    this.leaveRoomControl = false;\\n                    setTimeout(function () {\\n                        _this.leaveRoomControl = true;\\n                    }, 1000);\\n                    console.log(\\\"leaveroom\\\", roomid);\\n                    for (index = 0; index < this.seatInfoList.length; index += 1) {\\n                        if (this.seatInfoList[index]['userId'] && this.seatInfoList[index]['userId'] == this.im.userId) {\\n                            this.leaveSeat(false, true);\\n                            break;\\n                        }\\n                    }\\n                    this.im.leveRoomMessage();\\n                    console.log(\\\"msg\\\");\\n                    this.rtc.leaveRoom(roomid);\\n                    // .catch((err: any) => {\\n                    //     loger._error('离开RTC房间失败:70010')\\n                    // });\\n                    this.im.leaveRoom(roomid);\\n                    // .catch((err: any) => {\\n                    //     loger._error('离开房间失败:70003')\\n                    // });\\n                    this._roomidcli = '';\\n                }\\n                return [2 /*return*/];\\n            });\\n        });\\n    };\\n    RCVoiceRoomLibClass.prototype.getRoomInfo = function (roomid) {\\n        this.im.getRoomInfo(roomid);\\n    };\\n    RCVoiceRoomLibClass.prototype.findSeat = function () {\\n        for (var i = 0; i < this.seatInfoList.length; i++) {\\n            if (Number(this.seatInfoList[i].status) == _config__WEBPACK_IMPORTED_MODULE_3__.RCSeatStatus.RCSeatStatusEmpty) {\\n                return i;\\n            }\\n        }\\n    };\\n    /**\\n     * 更新本地信息并调用本地方法\\n     */\\n    // updateLocalInfo(info){\\n    //     for (var key in info) {\\n    //     switch (key) {\\n    //         case \\\"mute\\\":\\n    //             if (info.mute) {\\n    //                this.rtc.mute()\\n    //             }else{\\n    //                 this.rtc.unmute();\\n    //             }\\n    //             break;\\n    //         default:\\n    //             break;\\n    //     }\\n    //  }\\n    // }\\n    /**\\n    * 用户上麦\\n    *\\n    * @param seatIndex 麦位序号\\n    */\\n    RCVoiceRoomLibClass.prototype.enterSeat = function (seatIndex) {\\n        console.log(\\\"上麦操作\\\", seatIndex);\\n        console.log(\\\"当前麦位信息\\\", this.seatInfoList);\\n        var targetSeatInfo; //目标麦位信息\\n        if (this.seatInfoList.length == seatIndex) { //本地麦位未更新时生成一个默认麦位\\n            targetSeatInfo = this.seatInfo;\\n        }\\n        else {\\n            targetSeatInfo = this.seatInfoList[seatIndex];\\n            if (targetSeatInfo.status == _config__WEBPACK_IMPORTED_MODULE_3__.RCSeatStatus.RCSeatStatusLocking) { //当前麦位存在且已锁定\\n                _loger__WEBPACK_IMPORTED_MODULE_4__.default._error(\\\"麦位已锁定无法上麦\\\");\\n                return;\\n            }\\n            if (targetSeatInfo.status == _config__WEBPACK_IMPORTED_MODULE_3__.RCSeatStatus.RCSeatStatusUsing) { //当前麦位存在且已锁定\\n                _loger__WEBPACK_IMPORTED_MODULE_4__.default._error(\\\"麦位上已经有人了无法上麦\\\");\\n                return;\\n            }\\n            if (this.roomInfo && this.roomInfo.seatCount && (seatIndex >= this.roomInfo.seatCount)) {\\n                _loger__WEBPACK_IMPORTED_MODULE_4__.default._error('麦位不存在 目标麦位大于最大麦位');\\n                return;\\n            }\\n            for (var i = 0; i < this.seatInfoList.length; i += 1) {\\n                if (this.seatInfoList[i]['userId'] && this.seatInfoList[i]['userId'] == this.im.userId) {\\n                    _loger__WEBPACK_IMPORTED_MODULE_4__.default.log('用户已经在麦位上:70003');\\n                    return;\\n                }\\n            }\\n        }\\n        console.log(\\\"上麦\\\");\\n        targetSeatInfo.userId = this.im.userId;\\n        targetSeatInfo.status = _config__WEBPACK_IMPORTED_MODULE_3__.RCSeatStatus.RCSeatStatusUsing;\\n        targetSeatInfo.index = seatIndex;\\n        console.log(\\\"当前更新\\\", this.RCSeatInfoSeatPartPrefixKey + seatIndex);\\n        this.im.seatInfoUpdate(this.RCSeatInfoSeatPartPrefixKey + seatIndex, targetSeatInfo);\\n        // console.log(\\\"更新麦位信息\\\", targetSeatInfo);\\n        try {\\n            this.seatInfoList[seatIndex]['userId'] = this.im.userId;\\n            this.seatInfoList[seatIndex]['status'] = Number(_config__WEBPACK_IMPORTED_MODULE_3__.RCSeatStatus.RCSeatStatusUsing);\\n            this.im.seatIndex = seatIndex;\\n            this.rtc.currentSeat = seatIndex;\\n            this.rtc.enterSeat(seatIndex).then(function () {\\n                // console.log(\\\"是否静音检测\\\", targetSeatInfo.mute)\\n                // if (targetSeatInfo.mute) {\\n                //     this.rtc.mute();\\n                // } else {\\n                //     this.rtc.unmute();\\n                // }\\n            });\\n        }\\n        catch (err) {\\n            _loger__WEBPACK_IMPORTED_MODULE_4__.default._error('未知错误:-1', err);\\n        }\\n    };\\n    /**\\n    * 用户下麦\\n    * 注意：和 enterSeat()成对调用\\n    *\\n    */\\n    RCVoiceRoomLibClass.prototype.leaveSeat = function (ispassive, isLeaveRoom) {\\n        var _this = this;\\n        // console.log(\\\"下麦操作\\\");\\n        if (isLeaveRoom) {\\n            this.rtc.leaveSeat(true);\\n        }\\n        else {\\n            this.rtc.leaveSeat(false);\\n        }\\n        if (ispassive) { //被动下麦不操作远程数据\\n            _loger__WEBPACK_IMPORTED_MODULE_4__.default.log(\\\"被动下麦\\\");\\n            return;\\n        }\\n        var index = null;\\n        var have = false;\\n        var status = Number(_config__WEBPACK_IMPORTED_MODULE_3__.RCSeatStatus.RCSeatStatusEmpty);\\n        for (var i = 0; i < this.seatInfoList.length; i += 1) {\\n            if (this.seatInfoList[i].userId == this.im.userId) {\\n                index = i;\\n                have = true;\\n            }\\n        }\\n        if (!have) {\\n            _loger__WEBPACK_IMPORTED_MODULE_4__.default._error('用户不在麦位上:70004');\\n        }\\n        else {\\n            var value = {\\n                status: status,\\n                mute: this.seatInfoList[index].mute,\\n                speaking: this.seatInfoList[index].speaking,\\n            };\\n            console.log(this.RCSeatInfoSeatPartPrefixKey + index, '下麦操作：', value);\\n            if (this.rtc.roomType == 'live') {\\n                value = {\\n                    \\\"userId\\\": \\\"\\\",\\n                    \\\"mute\\\": false,\\n                    \\\"userEnableVideo\\\": true,\\n                    \\\"frame\\\": \\\"{{0.68330000000000002, 0.69059999999999999}, {0.29999999999999999, 0.16880000000000001}}\\\",\\n                    \\\"lock\\\": false,\\n                    \\\"userEnableAudio\\\": true,\\n                    \\\"index\\\": 1\\n                };\\n            }\\n            this.im.seatInfoUpdate(this.RCSeatInfoSeatPartPrefixKey + index, value).then(function (result) {\\n                _this.seatInfoList[index]['status'] = status;\\n                _this.seatInfoList[index]['mute'] = _this.seatInfoList[index].mute;\\n                _this.seatInfoList[index]['speaking'] = _this.seatInfoList[index].speaking;\\n                //delete this.seatInfoList[index]['userId']\\n                _this.seatInfoList[index]['userId'] = '';\\n                //console.log('this.seatInfoList', this.seatInfoList);\\n                _loger__WEBPACK_IMPORTED_MODULE_4__.default.log('操作成功:70000');\\n            }).catch(function () {\\n                _loger__WEBPACK_IMPORTED_MODULE_4__.default._error('未知错误:-1');\\n            });\\n        }\\n    };\\n    /**\\n    * 将指定麦位下麦\\n    *\\n    * @param userId   用户 Id\\n    */\\n    RCVoiceRoomLibClass.prototype.kickUserFromSeat = function (userId) {\\n        var _this = this;\\n        var index = null;\\n        var have = false;\\n        var arr = [];\\n        if (userId == this.im.userId) {\\n            _loger__WEBPACK_IMPORTED_MODULE_4__.default._error('不能踢自己下麦:70009\\t');\\n            return;\\n        }\\n        for (var i = 0; i < this.seatInfoList.length; i += 1) {\\n            //console.log(\\\"id:\\\",this.seatInfoList[i].userId);\\n            //console.log(\\\"idcheckd:\\\",userId);\\n            if (this.seatInfoList[i].userId == userId) {\\n                index = i;\\n                have = true;\\n            }\\n        }\\n        if (!have) {\\n            _loger__WEBPACK_IMPORTED_MODULE_4__.default._error('用户不在麦上:-1');\\n            return;\\n        }\\n        var value = {\\n            status: 0,\\n            mute: this.seatInfoList[index].mute,\\n            speaking: this.seatInfoList[index].speaking,\\n        };\\n        arr.push(this.im.seatInfoUpdate(this.RCSeatInfoSeatPartPrefixKey + index, value));\\n        Promise.all(arr).then(function (result) {\\n            // this.seatInfoList[index] = {\\n            //     status: 0,\\n            //     mute: this.seatInfoList[index].mute,\\n            //     speaking: this.seatInfoList[index].speaking,\\n            // };\\n            _this.seatInfoList[index]['status'] = 0;\\n            _this.seatInfoList[index]['mute'] = _this.seatInfoList[index].mute;\\n            _this.seatInfoList[index]['speaking'] = _this.seatInfoList[index].speaking;\\n            delete _this.seatInfoList[index]['userId'];\\n            // this.seatInfoList[index]['userId'] = '';\\n            // console.log('this.seatInfoList', this.seatInfoList);\\n            _loger__WEBPACK_IMPORTED_MODULE_4__.default.log('操作成功:70000');\\n        }).catch(function () {\\n            _loger__WEBPACK_IMPORTED_MODULE_4__.default._error('未知错误:-1');\\n        });\\n    };\\n    /**\\n    * 用户跳麦\\n    * 注意：在用户已经在麦位想切换麦位时调用\\n    *\\n    * @param seatIndex 需要跳转的麦位序号\\n    * @param callback  结果回调\\n    */\\n    RCVoiceRoomLibClass.prototype.switchSeatTo = function (seatIndex) {\\n        var _this = this;\\n        // console.log('this.seatInfoList[seatIndex]', this.seatInfoList);\\n        var arr = [];\\n        if (!this.seatInfoList[seatIndex]) {\\n            _loger__WEBPACK_IMPORTED_MODULE_4__.default._error('麦位不存在');\\n            return;\\n        }\\n        if (Number(this.seatInfoList[seatIndex].status) == _config__WEBPACK_IMPORTED_MODULE_3__.RCSeatStatus.RCSeatStatusLocking) {\\n            _loger__WEBPACK_IMPORTED_MODULE_4__.default._error(\\\"麦位被锁定不能跳麦\\\");\\n            return;\\n        }\\n        var index = null;\\n        for (var i = 0; i < this.seatInfoList.length; i += 1) {\\n            if (this.seatInfoList[i].userId === this.im.userId) {\\n                index = i;\\n                break;\\n            }\\n        }\\n        if (index === null) {\\n            _loger__WEBPACK_IMPORTED_MODULE_4__.default._error('用户不在麦位上:70004');\\n        }\\n        else {\\n            if (!this.seatInfoList[seatIndex]['userId']) {\\n                var valueOld = {\\n                    status: 0,\\n                    mute: this.seatInfoList[index].mute,\\n                    speaking: this.seatInfoList[index].speaking,\\n                };\\n                // const valueNew = {\\n                //     ...this.seatInfoList[seatIndex],\\n                //     status: 1,\\n                //     userId: this.im.userId\\n                // }\\n                // arr.push(\\n                //     this.im.seatInfoUpdate(this.RCSeatInfoSeatPartPrefixKey + index, valueOld),\\n                //     this.im.seatInfoUpdate(this.RCSeatInfoSeatPartPrefixKey + seatIndex, valueNew)\\n                // )\\n                // Promise.all(arr).then((result) => {\\n                //     this.seatInfoList[index] = valueOld\\n                //     this.seatInfoList[seatIndex] = valueNew\\n                //     loger.log('操作成功:70000')\\n                // }).catch(() => {\\n                //     loger.log('未知错误:-1')\\n                // })\\n                this.im.seatInfoUpdate(this.RCSeatInfoSeatPartPrefixKey + index, valueOld).then(function (result) {\\n                    // this.seatInfoList[index] = valueOld\\n                    _this.seatInfoList[index]['status'] = 0;\\n                    _this.seatInfoList[index]['mute'] = _this.seatInfoList[index].mute;\\n                    _this.seatInfoList[index]['speaking'] = _this.seatInfoList[index].speaking;\\n                    delete _this.seatInfoList[index]['userId'];\\n                    // this.seatInfoList[index]['userId'] = '';\\n                    _loger__WEBPACK_IMPORTED_MODULE_4__.default.log('操作成功:70000');\\n                    _this.enterSeat(seatIndex);\\n                }).catch(function () {\\n                    _loger__WEBPACK_IMPORTED_MODULE_4__.default._error('未知错误:-1');\\n                });\\n            }\\n            else {\\n                if (this.seatInfoList[seatIndex].userId == this.im.userId) {\\n                    _loger__WEBPACK_IMPORTED_MODULE_4__.default._error('用户跳麦的麦位和之前的一样:70005');\\n                }\\n                else {\\n                    _loger__WEBPACK_IMPORTED_MODULE_4__.default._error('麦位不是空置状态:70006');\\n                }\\n            }\\n        }\\n    };\\n    /**\\n   * 抱用户上麦\\n   *\\n   * @param userId   用户 Id\\n   */\\n    RCVoiceRoomLibClass.prototype.pickUserToSeat = function (userId) {\\n        var value = {\\n            // 填写开发者定义的消息内容\\n            content: \\\"RCPickerUserSeatContent\\\",\\n            invitationId: \\\"f9e6765b-304d-451a-be91-2bb936175888\\\",\\n            sendUserId: this.im.userId,\\n            targetId: userId,\\n            type: 0,\\n        };\\n        if (this.im.roomType = 'live') {\\n            if (userId == this.im.userId) {\\n                _loger__WEBPACK_IMPORTED_MODULE_4__.default._error('不能抱自己上麦:70007');\\n            }\\n            else {\\n                var pmsg = new this.im.regMsg({\\n                    name: \\\"ROOM_COMMAND_INVITATION\\\",\\n                    data: \\\"LIVE_VIDEO_INVITATION_NORMAL\\\" + this.im.userId + \\\"__RCLV__1\\\",\\n                });\\n                this.im.chatRoom.sendMessage({\\n                    conversationType: this.im.chatRoom.ConversationType.PRIVATE,\\n                    targetId: userId\\n                }, pmsg).then(function (message) {\\n                    console.log('发送邀请上麦消息成功', message);\\n                }).catch(function (err) {\\n                    _loger__WEBPACK_IMPORTED_MODULE_4__.default._error('发送抱麦请求失败:70008');\\n                });\\n                ;\\n                // this.im.messageUpdate(\\\"RC:CmdMsg\\\", value).then((massage: any) => {\\n                //     loger.log('操作成功:70000');\\n                //     console.log(\\\"发送邀请成功\\\", massage);\\n                // }).catch((err: any) => {\\n                //     loger._error('发送抱麦请求失败:70008');\\n                // });\\n            }\\n        }\\n        else {\\n            if (userId == this.im.userId) {\\n                _loger__WEBPACK_IMPORTED_MODULE_4__.default._error('不能抱自己上麦:70007');\\n            }\\n            else {\\n                this.im.messageUpdate(\\\"RC:VRLInviteMsg\\\", value).then(function (massage) {\\n                    _loger__WEBPACK_IMPORTED_MODULE_4__.default.log('操作成功:70000');\\n                }).catch(function (err) {\\n                    _loger__WEBPACK_IMPORTED_MODULE_4__.default._error('发送抱麦请求失败:70008');\\n                });\\n            }\\n        }\\n    };\\n    /**\\n    * 将用户踢出房间\\n    *\\n    * @param userId   用户 Id\\n    */\\n    RCVoiceRoomLibClass.prototype.kickUserFromRoom = function (userId) {\\n        var value = {\\n            // 填写开发者定义的消息内容\\n            content: \\\"RCKickUserOutRoomContent\\\",\\n            invitationId: \\\"yourRandomString\\\" + Math.random(),\\n            sendUserId: this.im.userId,\\n            targetId: userId,\\n            type: 0,\\n        };\\n        if (userId == this.im.userId) {\\n            _loger__WEBPACK_IMPORTED_MODULE_4__.default._error('未知错误:-1');\\n        }\\n        else {\\n            this.im.messageUpdate(\\\"RC:VRLInviteMsg\\\", value).then(function (massage) {\\n                _loger__WEBPACK_IMPORTED_MODULE_4__.default.log('操作成功:70000');\\n            }).catch(function (err) {\\n                _loger__WEBPACK_IMPORTED_MODULE_4__.default._error('发送信息失败:70023');\\n            });\\n        }\\n    };\\n    /**\\n    * 将某个麦位静音\\n    *\\n    * @param seatIndex 麦位序号\\n    * @param isMute    是否静音\\n    */\\n    RCVoiceRoomLibClass.prototype.muteSeat = function (seatIndex, ismute) {\\n        var _this = this;\\n        var arr = [];\\n        var value = __assign(__assign({}, this.seatInfoList[seatIndex]), { mute: ismute });\\n        arr.push(this.im.seatInfoUpdate(this.RCSeatInfoSeatPartPrefixKey + seatIndex, value));\\n        Promise.all(arr).then(function (result) {\\n            _loger__WEBPACK_IMPORTED_MODULE_4__.default.log('操作成功:70000');\\n            if (ismute) {\\n                _this.rtc.mute();\\n            }\\n            else {\\n                _this.rtc.unmute();\\n            }\\n            console.log('this.seatInfoList[seatIndex]', _this.seatInfoList[seatIndex]);\\n            // this.seatInfoList[seatIndex] = value\\n            _this.seatInfoList[seatIndex]['mute'] = ismute;\\n        }).catch(function () {\\n            _loger__WEBPACK_IMPORTED_MODULE_4__.default._error('未知错误:-1');\\n        });\\n    };\\n    /**\\n    * 将某个麦位锁定\\n    *\\n    * @param seatIndex 麦位序号\\n    * @param isLocked  是否锁麦位\\n    */\\n    RCVoiceRoomLibClass.prototype.lockSeat = function (seatIndex, isLocked) {\\n        var _this = this;\\n        if (!this.seatInfoList[seatIndex]) {\\n            _loger__WEBPACK_IMPORTED_MODULE_4__.default._error('麦位不存在');\\n            return;\\n        }\\n        var arr = [];\\n        var isLock = isLocked ? 2 : 0;\\n        // let value = null\\n        // if (isLocked) {\\n        // if (this.seatInfoList[seatIndex]['userId']) {\\n        var value = {\\n            mute: this.seatInfoList[seatIndex].mute,\\n            speaking: this.seatInfoList[seatIndex].speaking,\\n            status: isLock,\\n            userId: ''\\n        };\\n        // } else {\\n        //     value = {\\n        //         ...this.seatInfoList[seatIndex],\\n        //         status: isLock,\\n        //     };\\n        // }\\n        // } else {\\n        //     value = {\\n        //         mute: this.seatInfoList[seatIndex].mute,\\n        //         speaking: this.seatInfoList[seatIndex].speaking,\\n        //         status: isLock,\\n        //         userId: ''\\n        //     };\\n        // }\\n        arr.push(this.im.seatInfoUpdate(this.RCSeatInfoSeatPartPrefixKey + seatIndex, value));\\n        Promise.all(arr).then(function (result) {\\n            _this.seatInfoList[seatIndex]['status'] = isLock;\\n            _this.seatInfoList[seatIndex]['mute'] = _this.seatInfoList[seatIndex].mute;\\n            _this.seatInfoList[seatIndex]['speaking'] = _this.seatInfoList[seatIndex].speaking;\\n            delete _this.seatInfoList[seatIndex]['userId'];\\n            // this.seatInfoList[seatIndex]['userId'] = '';\\n            _loger__WEBPACK_IMPORTED_MODULE_4__.default.log('操作成功:70000');\\n            // this.seatInfoList[seatIndex] = value;\\n        }).catch(function () {\\n            _loger__WEBPACK_IMPORTED_MODULE_4__.default._error('未知错误:-1');\\n        });\\n    };\\n    /**\\n   * 设置房间信息，房间的id必须与当前房间id一致\\n   *\\n   * @param roomInfo 修改的房间信息\\n   */\\n    RCVoiceRoomLibClass.prototype.setRoomInfo = function (roomInfo) {\\n        // console.log(\\\"roominfo\\\", roomInfo, this.roomInfo);\\n        // console.log(\\\"this.roomInfo\\\", this.roomInfo);\\n        // seatCount\\n        if (Number(roomInfo.seatCount) != Number(this.roomInfo.seatCount)) { //座位数发生了变更\\n            console.log(\\\"座位变更\\\");\\n            this.im.setNewRoom(roomInfo);\\n        }\\n        if (roomInfo.isMuteAll != this.roomInfo.isMuteAll) { //将所有麦位静音打开或者关闭\\n            console.log(\\\"全麦静音变更\\\");\\n            this.muteOtherSeats(roomInfo.isMuteAll);\\n            // this.im.seatInfoUpdate(\\\"RCRoomInfoKey\\\", roomInfo)\\n        }\\n        if (roomInfo.isLockAll != this.roomInfo.isLockAll) { //将所有麦位所卖或者解除锁麦\\n            console.log(\\\"全麦锁麦变更\\\");\\n            // this.im.seatInfoUpdate(\\\"RCRoomInfoKey\\\", roomInfo)\\n        }\\n        this.im.seatInfoUpdate(\\\"RCRoomInfoKey\\\", roomInfo);\\n        this.roomInfo = __assign({}, roomInfo);\\n    };\\n    /**\\n    * 将所有麦位静音打开或者关闭\\n    *\\n    * @param isMute 是否静音\\n    */\\n    RCVoiceRoomLibClass.prototype.muteOtherSeats = function (isMute) {\\n        var _this = this;\\n        var arr = [];\\n        var roomData = __assign(__assign({}, this.roomInfo), { isMuteAll: isMute });\\n        // const unMute = !isMute\\n        for (var i = 0; i < this.seatInfoList.length; i += 1) {\\n            // if (this.seatInfoList[i]['userId'] == this.im.userId){//当前麦位本地操作\\n            //     this.updateLocalInfo(this.seatInfoList[i])\\n            // }\\n            if (this.seatInfoList[i]['userId'] != this.im.userId && this.seatInfoList[i]['mute'] != isMute) {\\n                var value = __assign(__assign({}, this.seatInfoList[i]), { mute: isMute });\\n                arr.push(this.im.seatInfoUpdate(this.RCSeatInfoSeatPartPrefixKey + i, value));\\n            }\\n        }\\n        // arr.push(this.im.seatInfoUpdate(\\\"RCRoomInfoKey\\\", roomData))\\n        Promise.all(arr).then(function (result) {\\n            _loger__WEBPACK_IMPORTED_MODULE_4__.default.log('操作成功:70000');\\n            _this.roomInfo = roomData;\\n            for (var i = 0; i < _this.seatInfoList.length; i += 1) {\\n                if (_this.seatInfoList[i]['userId'] != _this.im.userId && _this.seatInfoList[i]['mute'] != isMute) {\\n                    // let value = {\\n                    //     ...this.seatInfoList[i],\\n                    //     mute: isMute\\n                    // }\\n                    // this.seatInfoList[i] = value\\n                    _this.seatInfoList[i]['mute'] = isMute;\\n                }\\n            }\\n        }).catch(function () {\\n            _loger__WEBPACK_IMPORTED_MODULE_4__.default._error('未知错误:-1');\\n        });\\n    };\\n    /**\\n    * 发送消息\\n    *\\n    * @param message  融云消息实体\\n    */\\n    RCVoiceRoomLibClass.prototype.sendMessage = function (message) {\\n        this.im.chatRoom.send(message).then(function () {\\n            _loger__WEBPACK_IMPORTED_MODULE_4__.default.log('操作成功:70000');\\n        }).catch(function (err) {\\n            _loger__WEBPACK_IMPORTED_MODULE_4__.default._error('发送信息失败:70023', err);\\n        });\\n    };\\n    /**\\n    * 通知房间所有用户执行某个刷新操作\\n    *\\n    * @param name    刷新操作的名称\\n    * @param content 刷新操作的内容\\n    */\\n    RCVoiceRoomLibClass.prototype.notifyVoiceRoom = function (name, content) {\\n        var value = {\\n            content: content,\\n            name: name,\\n        };\\n        this.im.messageUpdate(\\\"RC:VRLRefreshMsg\\\", value).then(function (massage) {\\n            _loger__WEBPACK_IMPORTED_MODULE_4__.default.log('操作成功:70000');\\n        }).catch(function (err) {\\n            _loger__WEBPACK_IMPORTED_MODULE_4__.default._error('发送信息失败:70023');\\n        });\\n    };\\n    /**\\n  * 断开连接，用户退出时调用\\n  */\\n    // disConnect() {\\n    //     this.disConnect()\\n    // }\\n    /**\\n    * 获取最新在麦位上用户的标识集合\\n    *\\n    */\\n    RCVoiceRoomLibClass.prototype.getRequestSeatUserIds = function () {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var arr, error_1;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        arr = [];\\n                        _a.label = 1;\\n                    case 1:\\n                        _a.trys.push([1, 3, , 4]);\\n                        return [4 /*yield*/, this.im.chatRoom.getAllChatRoomEntries(this.im.roomId).then(function (entries) {\\n                                console.log(\\\"entries\\\", entries.data);\\n                                Object.keys(entries.data).forEach(function (key) {\\n                                    if (key.split(\\\"_\\\")[0] == \\\"RCRequestSeatPrefixKey\\\" &&\\n                                        entries.data[key] == \\\"RCRequestSeatContentRequest\\\") {\\n                                        arr.push(key.split(\\\"_\\\")[1]);\\n                                    }\\n                                    if (key.substr(0, 23) == \\\"LIVE_VIDEO_REQUEST_PRE_\\\" && entries.data[key].split(\\\"-\\\")[0] == \\\"LIVE_VIDEO_REQUEST_NORMAL\\\") {\\n                                        arr.push(key.substr(23));\\n                                    }\\n                                });\\n                                console.log(\\\"排麦队列\\\", arr);\\n                                _loger__WEBPACK_IMPORTED_MODULE_4__.default.log('同步排麦相关信息:70021');\\n                            }).catch(function () {\\n                                _loger__WEBPACK_IMPORTED_MODULE_4__.default.log('获取排麦请求列表失败:70022');\\n                            })];\\n                    case 2:\\n                        _a.sent();\\n                        return [3 /*break*/, 4];\\n                    case 3:\\n                        error_1 = _a.sent();\\n                        _loger__WEBPACK_IMPORTED_MODULE_4__.default.log('获取排麦请求列表失败:70022');\\n                        return [3 /*break*/, 4];\\n                    case 4: return [2 /*return*/, arr];\\n                }\\n            });\\n        });\\n    };\\n    /**\\n    * 获取最新麦位信息\\n    *\\n    * @param resultCallback\\n    */\\n    RCVoiceRoomLibClass.prototype.getLatestSeatInfo = function () {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var arr, error_2;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        arr = [];\\n                        _a.label = 1;\\n                    case 1:\\n                        _a.trys.push([1, 3, , 4]);\\n                        return [4 /*yield*/, this.im.chatRoom.getAllChatRoomEntries(this.im.roomId).then(function (entries) {\\n                                console.log('entries:', entries.data);\\n                                // {\\n                                //     \\\"LIVE_VIDEO_SEAT_INFO_PRE_0\\\": \\\"{\\\\\\\"userId\\\\\\\":\\\\\\\"c0565a81-6642-45f6-83ab-40fd8c9c6929\\\\\\\",\\\\\\\"mute\\\\\\\":false,\\\\\\\"userEnableVideo\\\\\\\":true,\\\\\\\"frame\\\\\\\":\\\\\\\"{{0, 0}, {0.33333333333333331, 0.33333333333333331}}\\\\\\\",\\\\\\\"lock\\\\\\\":false,\\\\\\\"userEnableAudio\\\\\\\":true,\\\\\\\"index\\\\\\\":0}\\\",\\n                                //     \\\"LIVE_VIDEO_SEAT_INFO_PRE_1\\\": \\\"{\\\\\\\"userId\\\\\\\":\\\\\\\"\\\\\\\",\\\\\\\"mute\\\\\\\":false,\\\\\\\"userEnableVideo\\\\\\\":true,\\\\\\\"frame\\\\\\\":\\\\\\\"{{0, 0.33333333333333331}, {0.33333333333333331, 0.33333333333333331}}\\\\\\\",\\\\\\\"lock\\\\\\\":false,\\\\\\\"userEnableAudio\\\\\\\":true,\\\\\\\"index\\\\\\\":1}\\\",\\n                                //     \\\"LIVE_VIDEO_SEAT_INFO_PRE_6\\\": \\\"{\\\\\\\"userId\\\\\\\":\\\\\\\"\\\\\\\",\\\\\\\"mute\\\\\\\":false,\\\\\\\"userEnableVideo\\\\\\\":true,\\\\\\\"frame\\\\\\\":\\\\\\\"{{0.66666666666666663, 0.66666666666666663}, {0.33333333333333331, 0.33333333333333331}}\\\\\\\",\\\\\\\"lock\\\\\\\":false,\\\\\\\"userEnableAudio\\\\\\\":true,\\\\\\\"index\\\\\\\":6}\\\",\\n                                //     \\\"LIVE_VIDEO_ROOM_MIX_TYPE\\\": \\\"6\\\",\\n                                //     \\\"LIVE_VIDEO_SEAT_INFO_PRE_2\\\": \\\"{\\\\\\\"userId\\\\\\\":\\\\\\\"\\\\\\\",\\\\\\\"mute\\\\\\\":false,\\\\\\\"userEnableVideo\\\\\\\":true,\\\\\\\"frame\\\\\\\":\\\\\\\"{{0.33333333333333331, 0.33333333333333331}, {0.33333333333333331, 0.33333333333333331}}\\\\\\\",\\\\\\\"lock\\\\\\\":false,\\\\\\\"userEnableAudio\\\\\\\":true,\\\\\\\"index\\\\\\\":2}\\\",\\n                                //     \\\"LIVE_VIDEO_SEAT_INFO_PRE_3\\\": \\\"{\\\\\\\"userId\\\\\\\":\\\\\\\"\\\\\\\",\\\\\\\"mute\\\\\\\":false,\\\\\\\"userEnableVideo\\\\\\\":true,\\\\\\\"frame\\\\\\\":\\\\\\\"{{0.66666666666666663, 0.33333333333333331}, {0.33333333333333331, 0.33333333333333331}}\\\\\\\",\\\\\\\"lock\\\\\\\":false,\\\\\\\"userEnableAudio\\\\\\\":true,\\\\\\\"index\\\\\\\":3}\\\",\\n                                //     \\\"LIVE_VIDEO_ROOM_USER_ID\\\": \\\"c0565a81-6642-45f6-83ab-40fd8c9c6929\\\",\\n                                //     \\\"LIVE_VIDEO_SEAT_INFO_PRE_4\\\": \\\"{\\\\\\\"userId\\\\\\\":\\\\\\\"\\\\\\\",\\\\\\\"mute\\\\\\\":false,\\\\\\\"userEnableVideo\\\\\\\":true,\\\\\\\"frame\\\\\\\":\\\\\\\"{{0, 0.66666666666666663}, {0.33333333333333331, 0.33333333333333331}}\\\\\\\",\\\\\\\"lock\\\\\\\":false,\\\\\\\"userEnableAudio\\\\\\\":true,\\\\\\\"index\\\\\\\":4}\\\",\\n                                //     \\\"LIVE_VIDEO_SEAT_INFO_PRE_5\\\": \\\"{\\\\\\\"userId\\\\\\\":\\\\\\\"\\\\\\\",\\\\\\\"mute\\\\\\\":false,\\\\\\\"userEnableVideo\\\\\\\":true,\\\\\\\"frame\\\\\\\":\\\\\\\"{{0.33333333333333331, 0.66666666666666663}, {0.33333333333333331, 0.33333333333333331}}\\\\\\\",\\\\\\\"lock\\\\\\\":false,\\\\\\\"userEnableAudio\\\\\\\":true,\\\\\\\"index\\\\\\\":5}\\\"\\n                                // }\\n                                Object.keys(entries.data).forEach(function (key) {\\n                                    var entriesArr = key.split(\\\"_\\\");\\n                                    if (entriesArr[0] == \\\"RCSeatInfoSeatPartPrefixKey\\\") {\\n                                        arr[Number(entriesArr[1])] = JSON.parse(entries.data[key]);\\n                                    }\\n                                    if (key.substr(0, 25) == \\\"LIVE_VIDEO_SEAT_INFO_PRE_\\\") {\\n                                        arr[key.substr(25, 1)] = JSON.parse(entries.data[key]);\\n                                        console.log('Number--------', key.substr(25, 1));\\n                                        console.log('entries[key]', entries.data[key]);\\n                                    }\\n                                });\\n                                _loger__WEBPACK_IMPORTED_MODULE_4__.default.log('操作成功:70000');\\n                            }).catch(function () {\\n                                _loger__WEBPACK_IMPORTED_MODULE_4__.default.log('同步麦位信息失败:70019');\\n                            })];\\n                    case 2:\\n                        _a.sent();\\n                        return [2 /*return*/, arr];\\n                    case 3:\\n                        error_2 = _a.sent();\\n                        _loger__WEBPACK_IMPORTED_MODULE_4__.default.log('同步房间信息失败:70020');\\n                        return [2 /*return*/, arr\\n                            //在错误发生时怎么处理\\n                        ];\\n                    case 4: return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    /**\\n     * 更新指定麦位信息中的extra字段\\n     *\\n     * @param index\\n     * @param extra\\n     */\\n    RCVoiceRoomLibClass.prototype.updateSeatInfo = function (index, extra) {\\n        var _this = this;\\n        var arr = [];\\n        var value = __assign(__assign({}, this.seatInfoList[index]), { extra: extra });\\n        arr.push(this.im.seatInfoUpdate(this.RCSeatInfoSeatPartPrefixKey + index, value));\\n        Promise.all(arr).then(function (result) {\\n            _loger__WEBPACK_IMPORTED_MODULE_4__.default.log('操作成功:70000');\\n            // this.seatInfoList[index] = value\\n            _this.seatInfoList[index]['extra'] = extra;\\n        }).catch(function () {\\n            _loger__WEBPACK_IMPORTED_MODULE_4__.default._error('未知错误:-1');\\n        });\\n    };\\n    /**\\n    * 请求排麦\\n    */\\n    RCVoiceRoomLibClass.prototype.requestSeat = function () {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var len, bor, i, arr, key, value, error_3;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        if (!this.im._FreeEnterSeat) return [3 /*break*/, 1];\\n                        console.log(this.im.seatInfoList);\\n                        if (this.im.seatInfoList[1] && this.im.seatInfoList[1].userId && this.im.seatInfoList[1].userId != '') {\\n                            console.log(\\\"麦位上有人\\\");\\n                        }\\n                        else {\\n                            this.enterSeat(1);\\n                        }\\n                        return [3 /*break*/, 4];\\n                    case 1:\\n                        _a.trys.push([1, 3, , 4]);\\n                        return [4 /*yield*/, this.getRequestSeatUserIds()];\\n                    case 2:\\n                        len = _a.sent();\\n                        console.log(len);\\n                        bor = false;\\n                        for (i = 0; i < len.length; i += 1) {\\n                            if (len[i] == this.im.userId) {\\n                                bor = true;\\n                            }\\n                        }\\n                        arr = [];\\n                        key = \\\"RCRequestSeatPrefixKey_\\\";\\n                        value = \\\"RCRequestSeatContentRequest\\\";\\n                        if (this.rtc.roomType == 'live') {\\n                            key = \\\"LIVE_VIDEO_REQUEST_PRE_\\\";\\n                            value = \\\"LIVE_VIDEO_REQUEST_NORMAL\\\" + \\\"-1\\\"; //1.0默认只申请1号麦位 \\n                        }\\n                        if (len.length > 20) {\\n                            _loger__WEBPACK_IMPORTED_MODULE_4__.default._error('排麦人数太多:70014');\\n                        }\\n                        else if (bor) {\\n                            _loger__WEBPACK_IMPORTED_MODULE_4__.default._error('已经在排麦列表中了:70013');\\n                        }\\n                        else {\\n                            arr.push(this.im.RequestseatInfoUpdate(key + this.im.userId, value));\\n                            Promise.all(arr).then(function (result) {\\n                                _loger__WEBPACK_IMPORTED_MODULE_4__.default.log('操作成功:70000');\\n                            }).catch(function () {\\n                                _loger__WEBPACK_IMPORTED_MODULE_4__.default._error('排麦请求发送失败:70015');\\n                            });\\n                        }\\n                        return [3 /*break*/, 4];\\n                    case 3:\\n                        error_3 = _a.sent();\\n                        _loger__WEBPACK_IMPORTED_MODULE_4__.default._error('获取麦位信息失败:70015');\\n                        return [3 /*break*/, 4];\\n                    case 4: return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    /**\\n   * 取消排麦请求\\n   *\\n   */\\n    RCVoiceRoomLibClass.prototype.cancelRequestSeat = function () {\\n        // console.log('this.im.userId', this.im.userId);\\n        var key = \\\"RCRequestSeatPrefixKey_\\\";\\n        if (this.rtc.roomType == 'live') {\\n            key = \\\"LIVE_VIDEO_REQUEST_PRE_\\\";\\n        }\\n        this.im.seatInfoRemove(key + this.im.userId).then(function () {\\n            _loger__WEBPACK_IMPORTED_MODULE_4__.default.log('操作成功:70000');\\n        }).catch(function (err) {\\n            _loger__WEBPACK_IMPORTED_MODULE_4__.default._error('取消排麦请求发送失败:70016');\\n        });\\n    };\\n    /**\\n    * 同意用户排麦请求\\n    *\\n    * @param userId   请求排麦的用户 Id\\n    */\\n    RCVoiceRoomLibClass.prototype.acceptRequestSeat = function (userId) {\\n        var arr = [];\\n        var key = \\\"RCRequestSeatPrefixKey_\\\";\\n        if (this.im.roomType = 'live') {\\n            key = \\\"LIVE_VIDEO_REQUEST_PRE_\\\";\\n            //直接更新麦位信息    \\n            console.log(\\\"当前1号麦位： \\\", this.im.seatInfoList[1]);\\n            this.im.seatInfoList[1].userId = userId;\\n            this.im.seatInfoList[1].status = 1;\\n            this.im.seatInfoList[1].index = 1;\\n            console.log(\\\"更新key：\\\", this.RCSeatInfoSeatPartPrefixKey + \\\"1\\\", \\\"v\\\", this.im.seatInfoList[1]);\\n            this.im.seatInfoUpdate(this.RCSeatInfoSeatPartPrefixKey + \\\"1\\\", this.im.seatInfoList[1]);\\n        }\\n        arr.push(this.im.RequestseatInfoUpdate(key + userId, \\\"RCRequestSeatContentAccept\\\"));\\n        Promise.all(arr).then(function (result) {\\n            _loger__WEBPACK_IMPORTED_MODULE_4__.default.log('操作成功:70000');\\n        }).catch(function () {\\n            _loger__WEBPACK_IMPORTED_MODULE_4__.default._error('同意排麦请求发送失败:70017');\\n        });\\n    };\\n    /**\\n    * 拒绝用户排麦请求\\n    *\\n    * @param userId\\n    */\\n    RCVoiceRoomLibClass.prototype.rejectRequestSeat = function (userId) {\\n        var arr = [];\\n        if (this.im.roomType = 'live') {\\n            var pmsg = new this.im.regMsg({\\n                name: \\\"ROOM_COMMAND_REQUEST\\\",\\n                data: \\\"LIVE_VIDEO_REQUEST_REJECT\\\",\\n            });\\n            arr.push(this.im.chatRoom.sendMessage({\\n                conversationType: this.im.chatRoom.ConversationType.PRIVATE,\\n                targetId: userId\\n            }, pmsg));\\n            this.im.seatInfoRemove(\\\"LIVE_VIDEO_REQUEST_PRE_\\\" + userId).then(function (res) {\\n                console.log(\\\"res\\\", res);\\n            });\\n        }\\n        else {\\n            arr.push(this.im.RequestseatInfoUpdate(\\\"RCRequestSeatPrefixKey_\\\" + userId, \\\"RCRequestSeatContentDeny\\\"));\\n        }\\n        Promise.all(arr).then(function (result) {\\n            console.log(\\\"成功\\\", result);\\n            _loger__WEBPACK_IMPORTED_MODULE_4__.default.log('操作成功:70000');\\n        }).catch(function () {\\n            _loger__WEBPACK_IMPORTED_MODULE_4__.default._error('拒绝排麦请求发送失败:70018');\\n        });\\n    };\\n    /**\\n    * 直播接受邀请\\n    *\\n    * @param userId\\n    */\\n    RCVoiceRoomLibClass.prototype.acceptInvitation = function (userId) {\\n        var pmsg = new this.im.regMsg({\\n            name: \\\"ROOM_COMMAND_INVITATION\\\",\\n            data: \\\"LIVE_VIDEO_INVITATION_ACCPT\\\" + this.im.userId,\\n        });\\n        this.im.chatRoom.sendMessage({\\n            conversationType: this.im.chatRoom.ConversationType.PRIVATE,\\n            targetId: userId\\n        }, pmsg).then(function (message) {\\n            console.log('接受邀请消息成功', message);\\n        }).catch(function (err) {\\n            _loger__WEBPACK_IMPORTED_MODULE_4__.default._error('接受邀请消息失败');\\n        });\\n        ;\\n    };\\n    /**\\n    * 直播拒绝邀请\\n    *\\n    * @param userId\\n    */\\n    RCVoiceRoomLibClass.prototype.rejectInvitation = function (userId) {\\n        var pmsg = new this.im.regMsg({\\n            name: \\\"ROOM_COMMAND_INVITATION\\\",\\n            data: \\\"LIVE_VIDEO_INVITATION_REJECT\\\" + userId,\\n        });\\n        this.im.chatRoom.sendMessage({\\n            conversationType: this.im.chatRoom.ConversationType.PRIVATE,\\n            targetId: userId\\n        }, pmsg).then(function (message) {\\n            console.log('发送拒绝邀请消息成功', message);\\n        }).catch(function (err) {\\n            _loger__WEBPACK_IMPORTED_MODULE_4__.default._error('发送拒绝邀请失败');\\n        });\\n    };\\n    /**\\n    * 取消直播邀请\\n    *\\n    * @param userId\\n    */\\n    RCVoiceRoomLibClass.prototype.cancelInvitation = function (userId) {\\n        var pmsg = new this.im.regMsg({\\n            name: \\\"ROOM_COMMAND_INVITATION\\\",\\n            data: \\\"LIVE_VIDEO_INVITATION_CANCEL\\\",\\n        });\\n        this.im.chatRoom.sendMessage({\\n            conversationType: this.im.chatRoom.ConversationType.PRIVATE,\\n            targetId: userId\\n        }, pmsg).then(function (message) {\\n            console.log('取消邀请消息发送成功');\\n        }).catch(function (err) {\\n            _loger__WEBPACK_IMPORTED_MODULE_4__.default._error('取消邀请消息发送失败');\\n        });\\n    };\\n    /**\\n    * 直播预览\\n    *\\n    * @param videoNode\\n    */\\n    RCVoiceRoomLibClass.prototype.preview = function (o) {\\n        this.rtc.preview(o.videoNode);\\n    };\\n    /**\\n    * 获取已有的本地流\\n    *\\n    * @param videoNode\\n    */\\n    RCVoiceRoomLibClass.prototype.getExist = function () {\\n        this.rtc.getExist();\\n    };\\n    /**\\n    * 获取已有的本地流\\n    *\\n    * @param option{\\n    *     key: string\\n    *     value: object\\n    * }\\n    */\\n    RCVoiceRoomLibClass.prototype.updateKeyValue = function (o) {\\n        var value = o.value;\\n        if (typeof value == \\\"string\\\") {\\n        }\\n        else {\\n            value = JSON.stringify(value);\\n        }\\n        this.im.seatInfoUpdate(o.key, value).then(function () {\\n            _loger__WEBPACK_IMPORTED_MODULE_4__.default.log(\\\"kv更新成功\\\", typeof value);\\n            console.log(\\\"key:\\\", o.key);\\n            console.log(\\\"value:\\\", value);\\n        }).catch(function (err) {\\n            _loger__WEBPACK_IMPORTED_MODULE_4__.default._error('更新房间信息失败:70008');\\n        });\\n    };\\n    return RCVoiceRoomLibClass;\\n}(events__WEBPACK_IMPORTED_MODULE_0__.EventEmitter));\\nvar RCVoiceRoomLib = new RCVoiceRoomLibClass();\\n\\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (RCVoiceRoomLib);\\n\\n\\n//# sourceURL=webpack://@rongcloud/rcliveroomlib/./src/index.ts?\");\n\n/***/ }),\n\n/***/ \"./src/loger.ts\":\n/*!**********************!*\\\n  !*** ./src/loger.ts ***!\n  \\**********************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\neval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   \\\"default\\\": () => (__WEBPACK_DEFAULT_EXPORT__)\\n/* harmony export */ });\\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config */ \\\"./src/config.ts\\\");\\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! events */ \\\"./node_modules/events/events.js\\\");\\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(events__WEBPACK_IMPORTED_MODULE_1__);\\n\\n\\nvar Loger = /** @class */ (function () {\\n    function Loger() {\\n        this.History = [];\\n    }\\n    Loger.prototype.log = function (target, t) {\\n        if (t === void 0) { t = \\\"\\\"; }\\n        if (!_config__WEBPACK_IMPORTED_MODULE_0__.debug)\\n            return;\\n        switch (typeof (target)) {\\n            case \\\"number\\\":\\n                console.log(\\\"its a number ===>\\\", target);\\n                break;\\n            case \\\"string\\\":\\n                console.log(target, t);\\n                break;\\n            case \\\"object\\\":\\n                console.log(\\\"its a object ===>\\\", target);\\n                break;\\n            case \\\"function\\\":\\n                console.log(\\\"its a function ===>\\\", target);\\n            default:\\n                // console.log(target);\\n                break;\\n        }\\n    };\\n    Loger.prototype._log = function (target) {\\n        var l = {\\n            mainStatus: 0,\\n            moduleNum: 0,\\n            readyNum: 0,\\n            loadingList: [],\\n            readyList: [],\\n            runningList: [],\\n            brokenList: [],\\n            unKnowStatesList: []\\n        };\\n        if (Array.isArray(target)) { //array类型.\\n            target.forEach(function (element) {\\n                if ((element instanceof events__WEBPACK_IMPORTED_MODULE_1__.EventEmitter) && (element.name)) { //队列内容是模块数据检查\\n                    l.moduleNum++;\\n                    switch (element.states) {\\n                        case 0:\\n                            l.loadingList.push(element.name);\\n                            break;\\n                        case 1:\\n                            l.readyList.push(element.name);\\n                            l.readyNum++;\\n                            break;\\n                        case 2:\\n                            l.runningList.push(element.name);\\n                            break;\\n                        case 9:\\n                            l.brokenList.push(element.name);\\n                            break;\\n                        default:\\n                            l.unKnowStatesList.push(element.name);\\n                            break;\\n                    }\\n                }\\n                else {\\n                    console.warn(\\\"数据非法\\\");\\n                }\\n            });\\n            this.History.push(l);\\n            if (this.History.length > 99) {\\n                this.History.shift();\\n            }\\n        }\\n        else { //普通对象类型\\n            console.warn(\\\"_log 方法存在异常调用\\\", target);\\n        }\\n    };\\n    Loger.prototype.history = function () {\\n        console.log(this.History);\\n    };\\n    Loger.prototype.warn = function (target, e) {\\n        if (e === void 0) { e = null; }\\n        console.warn(target, e);\\n    };\\n    //错误上报: 参数 e:原始错误信息  errtype:错误类型 mod:错误发生模块 errnum:错误编号;errmessage:错误消息\\n    Loger.prototype.error = function (e, errtype, mod, errnum, errmessage) {\\n        if (errtype === void 0) { errtype = \\\"0\\\"; }\\n        if (mod === void 0) { mod = null; }\\n        if (errnum === void 0) { errnum = \\\"00\\\"; }\\n        if (errmessage === void 0) { errmessage = \\\"unknow err\\\"; }\\n        var errModNum = \\\"0\\\";\\n        //遇到错误时尝试重启该模块.\\n        mod.reboot();\\n    };\\n    Loger.prototype._error = function (target, e) {\\n        if (e === void 0) { e = null; }\\n        throw new Error(target);\\n    };\\n    return Loger;\\n}());\\nvar loger = new Loger();\\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (loger);\\n//执行码 \\n/*\\n千位 执行类别  1数据错误 2网络错误 3硬件 4外部软件环境原因 5自身错误\\n百位 模块号 1主模块 2通信 3录音 4桥接 5pcm 0未找到具体模块\\n十位个位 具体命令\\n    00 未知错误;\\n    01 初始化错误;\\n    02 参数错误;\\n    03 ws接收数据错误;\\n    04 音频navigator获取失败;\\n    05 模块自身损坏\\n    06 native 相关错误\\n    */ \\n\\n\\n//# sourceURL=webpack://@rongcloud/rcliveroomlib/./src/loger.ts?\");\n\n/***/ }),\n\n/***/ \"./src/modules/im/index.ts\":\n/*!*********************************!*\\\n  !*** ./src/modules/im/index.ts ***!\n  \\*********************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\neval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   \\\"default\\\": () => (__WEBPACK_DEFAULT_EXPORT__)\\n/* harmony export */ });\\n/* harmony import */ var _structure_modules__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../structure/modules */ \\\"./src/structure/modules.ts\\\");\\n/* harmony import */ var _rongcloud_imlib_next__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @rongcloud/imlib-next */ \\\"./node_modules/@rongcloud/imlib-next/dist/index.esm.js\\\");\\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../config */ \\\"./src/config.ts\\\");\\n/* harmony import */ var _loger__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../loger */ \\\"./src/loger.ts\\\");\\nvar __extends = (undefined && undefined.__extends) || (function () {\\n    var extendStatics = function (d, b) {\\n        extendStatics = Object.setPrototypeOf ||\\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\\n        return extendStatics(d, b);\\n    };\\n    return function (d, b) {\\n        if (typeof b !== \\\"function\\\" && b !== null)\\n            throw new TypeError(\\\"Class extends value \\\" + String(b) + \\\" is not a constructor or null\\\");\\n        extendStatics(d, b);\\n        function __() { this.constructor = d; }\\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\\n    };\\n})();\\nvar __assign = (undefined && undefined.__assign) || function () {\\n    __assign = Object.assign || function(t) {\\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\\n            s = arguments[i];\\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\\n                t[p] = s[p];\\n        }\\n        return t;\\n    };\\n    return __assign.apply(this, arguments);\\n};\\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\n    return new (P || (P = Promise))(function (resolve, reject) {\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\n        function rejected(value) { try { step(generator[\\\"throw\\\"](value)); } catch (e) { reject(e); } }\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\n    });\\n};\\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\\n    return g = { next: verb(0), \\\"throw\\\": verb(1), \\\"return\\\": verb(2) }, typeof Symbol === \\\"function\\\" && (g[Symbol.iterator] = function() { return this; }), g;\\n    function verb(n) { return function (v) { return step([n, v]); }; }\\n    function step(op) {\\n        if (f) throw new TypeError(\\\"Generator is already executing.\\\");\\n        while (_) try {\\n            if (f = 1, y && (t = op[0] & 2 ? y[\\\"return\\\"] : op[0] ? y[\\\"throw\\\"] || ((t = y[\\\"return\\\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\\n            if (y = 0, t) op = [op[0] & 2, t.value];\\n            switch (op[0]) {\\n                case 0: case 1: t = op; break;\\n                case 4: _.label++; return { value: op[1], done: false };\\n                case 5: _.label++; y = op[1]; op = [0]; continue;\\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\\n                default:\\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\\n                    if (t[2]) _.ops.pop();\\n                    _.trys.pop(); continue;\\n            }\\n            op = body.call(thisArg, _);\\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\\n    }\\n};\\n\\n\\n\\n\\nvar IM = /** @class */ (function (_super) {\\n    __extends(IM, _super);\\n    function IM(appkey) {\\n        var _this = _super.call(this) || this;\\n        _this.states = 0; //0初始化未完成 1就绪 2正在初始化  9浏览器不支持\\n        _this.userId = '';\\n        _this.roomId = '';\\n        _this.seatInfoList = [];\\n        _this.init(appkey);\\n        return _this;\\n    }\\n    IM.prototype.init = function (appkey) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var im, Events, that;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        im = _rongcloud_imlib_next__WEBPACK_IMPORTED_MODULE_1__;\\n                        return [4 /*yield*/, im.__addSDKVersion('rcliveroomlib', '2.0.0')];\\n                    case 1:\\n                        _a.sent();\\n                        return [4 /*yield*/, im.init({ appkey: appkey })];\\n                    case 2:\\n                        _a.sent();\\n                        Events = im.Events;\\n                        this.chatRoom = im;\\n                        this.body = im;\\n                        this.regMsg = im.registerMessageType('RC:CmdMsg', true, true, [], false);\\n                        that = this;\\n                        im.addEventListener(Events.MESSAGES, function (m) {\\n                            var message = m.messages[0];\\n                            console.log(m);\\n                            console.log(message);\\n                            if (message.isOffLineMessage) {\\n                                return;\\n                            }\\n                            switch (message.messageType) {\\n                                case \\\"RC:VRLRefreshMsg\\\":\\n                                    that.emit(\\\"onRoomNotificationReceived\\\", {\\n                                        name: message.content.name,\\n                                        content: message.content.content,\\n                                    });\\n                                    switch (message.content.name.split(\\\"_\\\")[0]) {\\n                                        case \\\"RCAudienceJoinRoom\\\":\\n                                            that.chatRoom.getChatRoomInfo(that.roomId, { count: 0, order: 0 }).then(function (result) {\\n                                                that.emit(\\\"onAudienceEnter\\\", result.userCount);\\n                                            });\\n                                            // that.emit(\\\"onAudienceEnter\\\", { userId: message.content.content });\\n                                            // console.log(message.content.content, \\\"进来了\\\");\\n                                            break;\\n                                        case \\\"RCAudienceLeaveRoom\\\":\\n                                            that.chatRoom.getChatRoomInfo(that.roomId, { count: 0, order: 0 }).then(function (result) {\\n                                                that.emit(\\\"onAudienceExit\\\", result.userCount);\\n                                            });\\n                                            // console.log(message.content.content, \\\"出去了\\\");\\n                                            break;\\n                                        case \\\"RCUserOnSeatSpeakingKey\\\":\\n                                            //console.log(\\\"originkey:\\\", message.content.name)\\n                                            that.emit(\\\"speakingStatusChenge\\\", { index: message.content.name.split(\\\"_\\\")[1], speaking: message.content.content });\\n                                            break;\\n                                        case \\\"VoiceRoomClosed\\\":\\n                                            //console.log(\\\"originkey:\\\", message.content.name)\\n                                            that.emit(\\\"VoiceRoomClosed\\\");\\n                                            break;\\n                                        case \\\"VoiceRoomBackgroundChanged\\\":\\n                                            //console.log(\\\"originkey:\\\", message.content.name)\\n                                            that.emit(\\\"VoiceRoomBackgroundChanged\\\", message.content.content);\\n                                            break;\\n                                        case \\\"VoiceRoomAgreeManagePick\\\":\\n                                            //console.log(\\\"originkey:\\\", message.content.name)\\n                                            that.emit(\\\"VoiceRoomAgreeManagePick\\\", message.content.content);\\n                                            break;\\n                                        case \\\"VoiceRoomRejectManagePick\\\":\\n                                            //console.log(\\\"originkey:\\\", message.content.name)\\n                                            that.emit(\\\"VoiceRoomRejectManagePick\\\", message.content.content);\\n                                            break;\\n                                        default:\\n                                            break;\\n                                    }\\n                                    break;\\n                                case \\\"RC:CmdMsg\\\":\\n                                    switch (message.content.name) {\\n                                        case \\\"ROOM_COMMAND_USER_ENTER\\\":\\n                                            console.log(\\\"有人进来了::\\\", message);\\n                                            that.emit(\\\"userEnter\\\", message.senderUserId);\\n                                            that.chatRoom.getChatRoomInfo(that.roomId, { count: 0, order: 0 }).then(function (result) {\\n                                                that.emit(\\\"onAudienceEnter\\\", result.userCount);\\n                                            });\\n                                            break;\\n                                        case \\\"ROOM_COMMAND_USER_EXIT\\\":\\n                                            that.emit(\\\"userExit\\\", message.senderUserId);\\n                                            that.chatRoom.getChatRoomInfo(that.roomId, { count: 0, order: 0 }).then(function (result) {\\n                                                that.emit(\\\"onAudienceExit\\\", result.userCount);\\n                                            });\\n                                            break;\\n                                        case \\\"ROOM_COMMAND_INVITATION\\\":\\n                                            console.log(\\\"herre :\\\", message.content.data.substr(0, 28));\\n                                            //邀请上麦消息\\n                                            //todo  zengjia le LIVE_VIDEO_INVITATION_REJECTe5b37bfa-9333-4a76-9c15-2c1ae575cd25\\n                                            if (message.content.data == \\\"LIVE_VIDEO_INVITATION_CANCEL\\\") {\\n                                                that.emit(\\\"onInvitationCancel\\\");\\n                                            }\\n                                            else if (message.content.data.substr(0, 28) == \\\"LIVE_VIDEO_INVITATION_REJECT\\\") {\\n                                                that.emit(\\\"invitationRejected\\\", message.content.data.replace(\\\"LIVE_VIDEO_INVITATION_REJECT\\\", ''));\\n                                            }\\n                                            else if (message.content.data.substr(0, 28) == \\\"LIVE_VIDEO_INVITATION_ACCEPT\\\") {\\n                                                that.emit(\\\"invitationAccepted\\\", message.content.data.replace(\\\"LIVE_VIDEO_INVITATION_ACCEPT\\\", ''));\\n                                            }\\n                                            else {\\n                                                var arr = message.content.data.replace(\\\"LIVE_VIDEO_INVITATION_NORMAL\\\", '').split(\\\"__RCLV__\\\");\\n                                                //被邀请的id arr【0】 邀请上 arr【1】号麦位\\n                                                that.emit(\\\"onInvitation\\\", { id: arr[0], seatIndex: arr[1] });\\n                                            }\\n                                            break;\\n                                        case \\\"ROOM_COMMAND_REQUEST\\\":\\n                                            console.log(\\\"邀请相关消息\\\");\\n                                            if (message.content.data.substr(0, 25) == \\\"LIVE_VIDEO_REQUEST_REJECT\\\") {\\n                                                that.emit(\\\"RequestSeatRejected\\\");\\n                                            }\\n                                            else {\\n                                                that.emit(\\\"RequestSeatAccepted\\\");\\n                                            }\\n                                            break;\\n                                        case \\\"ROOM_COMMAND_USER_KICK_OUT_ROOM\\\":\\n                                            console.log(\\\"ti\\\", message);\\n                                            that.emit(\\\"RCKickUserOutRoomContent\\\", {\\n                                                targetId: message.content.data.split('__RCLV__')[0],\\n                                                userId: message.content.data.split('__RCLV__')[1], //踢人者\\n                                            });\\n                                            break;\\n                                        default:\\n                                            break;\\n                                    }\\n                                    break;\\n                                case \\\"RC:VRLInviteMsg\\\":\\n                                    switch (message.content.content) {\\n                                        case \\\"RCKickUserOutRoomContent\\\":\\n                                            that.emit(\\\"RCKickUserOutRoomContent\\\", {\\n                                                targetId: message.content.targetId,\\n                                                userId: message.content.sendUserId,\\n                                            });\\n                                            //console.log(\\\"被踢了\\\");\\n                                            break;\\n                                        case \\\"RCPickerUserSeatContent\\\":\\n                                            that.emit(\\\"RCPickerUserSeatContent\\\", {\\n                                                targetId: message.content.targetId,\\n                                                sendUserId: message.content.sendUserId,\\n                                            });\\n                                            //console.log(\\\"被抱上麦\\\");\\n                                            break;\\n                                        default:\\n                                            break;\\n                                    }\\n                                case \\\"RCMic:loginDeviceMsg\\\": //多端登录\\n                                    that.emit(\\\"mo\\\");\\n                                    break;\\n                                default:\\n                                    that.emit(\\\"onMessageReceived\\\", message);\\n                                    break;\\n                            }\\n                        });\\n                        /**\\n                        * 正在链接的事件状态\\n                        */\\n                        im.addEventListener(Events.CONNECTING, function () {\\n                            // console.log('正在链接...')\\n                        });\\n                        /**\\n                         * 链接到服务器会触发这个事件\\n                         */\\n                        im.addEventListener(Events.CONNECTED, function () {\\n                            console.log('连接成功');\\n                            that.emit(\\\"ready\\\");\\n                        });\\n                        /**\\n                         * 手动调用 disconnect 方法或者用户被踢下线 会触发这个事件\\n                         */\\n                        im.addEventListener(Events.DISCONNECT, function () {\\n                            that.emit(\\\"connectioBreakOff\\\");\\n                        });\\n                        /**\\n                         * 链接出问题时，内部进行重新链接，会出发这个事件\\n                         */\\n                        im.addEventListener(Events.SUSPEND, function () {\\n                            // console.log('链接中断,SDK 会尝试重连,业务层无需关心')\\n                        });\\n                        //聊天室KV更新\\n                        im.addEventListener(Events.CHATROOM, function (event) {\\n                            if (event['chatroomDestroyed']) {\\n                                that.emit(\\\"chatroomDestroyed\\\");\\n                            }\\n                            else {\\n                                // 监听会话列表变更事件\\n                                // conversation(event) {\\n                                //     console.log(\\\"conversation\\\", event)\\n                                // },\\n                                /* 聊天室 KV 存储数据更新  ^[0-9]*$\\n                                */\\n                                var updatedEntries = event.updatedEntries;\\n                                console.log(\\\"kvup==================\\\", event);\\n                                if (event.chatroomDestroyed) { //房间被摧毁\\n                                    that.emit(\\\"chatroomDestroyed\\\");\\n                                }\\n                                if (!updatedEntries)\\n                                    return; //无效麦位不处理避免报错\\n                                updatedEntries.forEach(function (obj) {\\n                                    switch (obj.key.split(\\\"_\\\")[0]) {\\n                                        case \\\"RCRoomInfoKey\\\":\\n                                            var roomInfo = JSON.parse(obj.value);\\n                                            that.emit(\\\"roomInfoDidUpdate\\\", { roomInfo: roomInfo });\\n                                            if (that.seatIndex > roomInfo.seatCount) {\\n                                                _loger__WEBPACK_IMPORTED_MODULE_3__.default.log(\\\"接受到消息下麦\\\");\\n                                                that.emit(\\\"leaveSeat\\\");\\n                                            }\\n                                            if (that.seatInfoList.length > roomInfo.seatCount) {\\n                                                that.seatInfoList.length = roomInfo.seatCount;\\n                                            }\\n                                            break;\\n                                        case \\\"RCSeatInfoSeatPartPrefixKey\\\":\\n                                            //麦位操作\\n                                            //筛查被更改的麦位\\n                                            // console.log('that.seatInfoList', obj.value);\\n                                            if (roomInfo && (obj.key.split(\\\"_\\\")[1] >= roomInfo.seatCount)) { //大于当前seatCount的属性不处理\\n                                                return;\\n                                            }\\n                                            var currentSeatInfo = that.seatInfoList[Number(obj.key.split(\\\"_\\\")[1])]; //当前麦位信息\\n                                            if (!obj.value)\\n                                                return; // 麦位信息不完整直接返回 \\n                                            var newSeatInfo = JSON.parse(obj.value); //传入的麦位信息\\n                                            if (that.seatIndex == Number(obj.key.split(\\\"_\\\")[1])) { //当前在被操作的麦位上\\n                                                // console.log(\\\"当前麦位\\\", that.seatIndex);\\n                                                // console.log(\\\"old\\\",JSON.stringify(currentSeatInfo))\\n                                                // console.log(\\\"new\\\", JSON.stringify(newSeatInfo))\\n                                                for (var key in currentSeatInfo) {\\n                                                    switch (key) {\\n                                                        case \\\"userId\\\":\\n                                                            if (currentSeatInfo.userId != newSeatInfo.userId) {\\n                                                                that.emit(\\\"leaveSeat\\\");\\n                                                            }\\n                                                            break;\\n                                                        case \\\"mute\\\":\\n                                                            if (currentSeatInfo.mute != newSeatInfo.mute) {\\n                                                                that.emit(\\\"mute\\\", newSeatInfo.mute);\\n                                                            }\\n                                                            break;\\n                                                        case \\\"status\\\":\\n                                                            switch (Number(newSeatInfo.status)) {\\n                                                                case _config__WEBPACK_IMPORTED_MODULE_2__.RCSeatStatus.RCSeatStatusEmpty:\\n                                                                    _loger__WEBPACK_IMPORTED_MODULE_3__.default.log(\\\"接受到消息下麦\\\");\\n                                                                    that.emit(\\\"leaveSeat\\\");\\n                                                                    break;\\n                                                                case _config__WEBPACK_IMPORTED_MODULE_2__.RCSeatStatus.RCSeatStatusLocking:\\n                                                                    _loger__WEBPACK_IMPORTED_MODULE_3__.default.log(\\\"锁麦位下麦\\\");\\n                                                                    that.emit(\\\"leaveSeat\\\");\\n                                                                    break;\\n                                                                default:\\n                                                                    break;\\n                                                            }\\n                                                        default:\\n                                                            break;\\n                                                    }\\n                                                }\\n                                            }\\n                                            that.seatInfoList[obj.key.split(\\\"_\\\")[1]] = JSON.parse(obj.value);\\n                                            that.emit(\\\"seatInfoDidUpdate\\\");\\n                                            break;\\n                                        case \\\"RCRequestSeatPrefixKey\\\":\\n                                            if (that.userId && obj.key.split(\\\"_\\\")[1] == that.userId) {\\n                                                if (obj.value == \\\"RCRequestSeatContentAccept\\\") {\\n                                                    that.emit(\\\"RequestSeatAccepted\\\");\\n                                                }\\n                                                else if (obj.value == \\\"RCRequestSeatContentDeny\\\") {\\n                                                    that.emit(\\\"RequestSeatRejected\\\");\\n                                                }\\n                                            }\\n                                            that.emit(\\\"RequestSeatListChanged\\\");\\n                                            break;\\n                                        default:\\n                                            break;\\n                                    }\\n                                    if (obj.key.substr(0, 23) == \\\"LIVE_VIDEO_REQUEST_PRE_\\\") {\\n                                        console.log(obj);\\n                                        if (that.userId && obj.key.substr(23) == that.userId) {\\n                                            if (obj.value.split(\\\"-\\\")[0] == \\\"LIVE_VIDEO_REQUEST_NORMAL\\\") {\\n                                                that.emit(\\\"RequestSeatAccepted\\\");\\n                                            }\\n                                        }\\n                                        that.emit(\\\"RequestSeatListChanged\\\");\\n                                    }\\n                                    if (obj.key.substr(0, 14) == \\\"ROOM_INFO_PRE_\\\") {\\n                                        switch (obj.key.substr(14)) {\\n                                            case \\\"name\\\":\\n                                                if (typeof obj.value == 'string') {\\n                                                    that._roomName = obj.value;\\n                                                }\\n                                                else {\\n                                                    that._roomName = JSON.parse(obj.value);\\n                                                }\\n                                                break;\\n                                            case \\\"shields\\\":\\n                                                that._roomShields = JSON.parse(obj.value);\\n                                                break;\\n                                            case \\\"notice\\\":\\n                                                if (typeof obj.value == 'string') {\\n                                                    that._roomNotice = obj.value;\\n                                                }\\n                                                else {\\n                                                    that._roomNotice = JSON.parse(obj.value);\\n                                                }\\n                                                break;\\n                                            case \\\"FreeEnterSeat\\\":\\n                                                if (obj.value == \\\"1\\\") {\\n                                                    that._FreeEnterSeat = true;\\n                                                }\\n                                                else {\\n                                                    that._FreeEnterSeat = false;\\n                                                }\\n                                                break;\\n                                            default:\\n                                                break;\\n                                        }\\n                                    }\\n                                    if (obj.key.substr(0, 25) == \\\"LIVE_VIDEO_SEAT_INFO_PRE_\\\") { //直播更新麦位逻辑\\n                                        console.log(\\\"直播麦位信息更新\\\", obj.key.substr(25, 1));\\n                                        var currentSeatInfo = that.seatInfoList[Number(obj.key.substr(25, 1))]; //当前麦位信息\\n                                        console.log(\\\"currentSeatInfo\\\", currentSeatInfo);\\n                                        if (!obj.value)\\n                                            return; // 麦位信息不完整直接返回 \\n                                        var newSeatInfo = JSON.parse(obj.value); //传入的麦位信息\\n                                        if (that.seatIndex == Number(obj.key.substr(25, 1))) { //当前在被操作的麦位上\\n                                            console.log(\\\"当前麦位\\\", that.seatIndex);\\n                                            for (var key in currentSeatInfo) {\\n                                                switch (key) {\\n                                                    case \\\"userId\\\":\\n                                                        if (currentSeatInfo.userId != newSeatInfo.userId) {\\n                                                            that.emit(\\\"leaveSeat\\\");\\n                                                        }\\n                                                        break;\\n                                                    case \\\"mute\\\":\\n                                                        if (currentSeatInfo.mute != newSeatInfo.mute) {\\n                                                            that.emit(\\\"mute\\\", newSeatInfo.mute);\\n                                                        }\\n                                                        break;\\n                                                    case \\\"status\\\":\\n                                                        if (newSeatInfo.status && newSeatInfo.status != currentSeatInfo.status) {\\n                                                            switch (Number(newSeatInfo.status)) {\\n                                                                case _config__WEBPACK_IMPORTED_MODULE_2__.RCSeatStatus.RCSeatStatusUsing:\\n                                                                    _loger__WEBPACK_IMPORTED_MODULE_3__.default.log(\\\"接受到消息上麦\\\");\\n                                                                    that.emit(\\\"enterSeat\\\");\\n                                                                    break;\\n                                                                case _config__WEBPACK_IMPORTED_MODULE_2__.RCSeatStatus.RCSeatStatusEmpty:\\n                                                                    _loger__WEBPACK_IMPORTED_MODULE_3__.default.log(\\\"接受到消息下麦\\\");\\n                                                                    that.emit(\\\"leaveSeat\\\");\\n                                                                    break;\\n                                                                case _config__WEBPACK_IMPORTED_MODULE_2__.RCSeatStatus.RCSeatStatusLocking:\\n                                                                    _loger__WEBPACK_IMPORTED_MODULE_3__.default.log(\\\"锁麦位下麦\\\");\\n                                                                    that.emit(\\\"leaveSeat\\\");\\n                                                                    break;\\n                                                                default:\\n                                                                    break;\\n                                                            }\\n                                                        }\\n                                                    default:\\n                                                        break;\\n                                                }\\n                                            }\\n                                        }\\n                                        console.log(\\\"更新麦位\\\", Number(obj.key.substr(25, 1)), that.seatInfoList[Number(obj.key.substr(25, 1))]);\\n                                        if ((Number(obj.key.substr(25, 1)) == 1) && (newSeatInfo.userId == that.userId)) {\\n                                            _loger__WEBPACK_IMPORTED_MODULE_3__.default.log(\\\"直播端接受到麦位消息自动对齐逻辑\\\");\\n                                            that.emit(\\\"enterSeat\\\");\\n                                            //移除拍麦序号\\n                                            that.seatInfoRemove(\\\"LIVE_VIDEO_REQUEST_PRE_\\\" + that.userId);\\n                                            that.emit(\\\"RequestSeatListChanged\\\");\\n                                        }\\n                                        that.seatInfoList[Number(obj.key.substr(25, 1))] = JSON.parse(obj.value);\\n                                        that.emit(\\\"seatInfoDidUpdate\\\", obj);\\n                                    }\\n                                    that.emit(\\\"keyValueDidUpdate\\\", obj);\\n                                });\\n                            }\\n                        });\\n                        return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    IM.prototype.connect = function (token) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var _this = this;\\n            return __generator(this, function (_a) {\\n                return [2 /*return*/, this.chatRoom.connect(token).then(function (res) {\\n                        if (res.code === 0) {\\n                            _this.emit(\\\"connectReady\\\");\\n                            if (res.data.userId) {\\n                                _this.userId = res.data.userId;\\n                                return '操作成功:70000';\\n                            }\\n                            else {\\n                                return '当前用户 Id 为空:70029';\\n                            }\\n                        }\\n                    }).catch(function (error) {\\n                        _this.userId = '';\\n                        return '连接服务器失败:70001';\\n                    })];\\n            });\\n        });\\n    };\\n    IM.prototype.joinRoom = function (o) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var that;\\n            return __generator(this, function (_a) {\\n                that = this;\\n                // console.log(\\\"joinroom\\\", o);\\n                this.roomId = o.roomId;\\n                if (o.roomName) {\\n                    this._roomName = o.roomName;\\n                }\\n                this.chatRoom.joinChatRoom(o.roomId, {\\n                    count: -1 // 进入后, 自动拉取 20 条聊天室最新消息\\n                }).then(function () {\\n                    _loger__WEBPACK_IMPORTED_MODULE_3__.default.log('加入聊天室成功');\\n                    that.emit(\\\"joinRoom\\\", o.roomId);\\n                });\\n                return [2 /*return*/];\\n            });\\n        });\\n    };\\n    IM.prototype.getRoomInfo = function (roomId) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var data;\\n            var _this = this;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0: return [4 /*yield*/, this.chatRoom.getAllChatRoomEntries(roomId).then(function (entries) {\\n                            console.log('获取所有聊天室属性信息 in fun', entries);\\n                            data = entries.data;\\n                            if (JSON.stringify(data) == '{}') {\\n                                //空房间 初始化roominfo todo\\n                                _this.setNewRoom();\\n                                console.log(\\\"初始化新房间----------------------------------\\\");\\n                            }\\n                            for (var key in data) {\\n                                //this.roomInfo[i]=JSON.parse(info[i])\\n                                console.log(\\\"key:\\\", key, \\\"entries:\\\", data);\\n                                if (key == \\\"RCRoomInfoKey\\\") {\\n                                    _this.roomInfo = JSON.parse(data[key]);\\n                                    _this.emit(\\\"roomInfoDidUpdate\\\", { roomInfo: _this.roomInfo });\\n                                }\\n                                else if (key.split(\\\"_\\\")[0] == 'RCSeatInfoUserPartPrefixKey') {\\n                                    _this.seatInfoList[key.split(\\\"_\\\")[1]] = JSON.parse(data[key]);\\n                                    _this.emit(\\\"seatInfoDidUpdate\\\");\\n                                }\\n                                else if (key.substr(0, 25) == \\\"LIVE_VIDEO_SEAT_INFO_PRE_\\\") {\\n                                    _this.seatInfoList[key.substr(25, 1)] = JSON.parse(data[key]);\\n                                    _this.emit(\\\"seatInfoDidUpdate\\\");\\n                                }\\n                            }\\n                        }).catch(function (err) {\\n                            _loger__WEBPACK_IMPORTED_MODULE_3__.default._error('获取房间信息失败:70007');\\n                        })];\\n                    case 1:\\n                        _a.sent();\\n                        return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    IM.prototype.setNewRoom = function (parm) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var seatCount, kvInfo0, kvObj, item, key, defaultRoomInfo_1, value, defaultSeatInfo, arr, start, i, seatCount, oldSeadCount_1, key, defaultRoomInfo_2, value, defaultSeatInfo, arr, start, i, seatName;\\n            var _this = this;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        console.log(\\\"新房间\\\");\\n                        if (!(this.roomType && this.roomType == \\\"live\\\")) return [3 /*break*/, 2];\\n                        seatCount = 2;\\n                        kvInfo0 = {\\n                            userId: this.userId,\\n                            mute: false,\\n                            userEnableVideo: true,\\n                            frame: \\\"{{0,0},{1,1}}\\\",\\n                            lock: false,\\n                            userEnableAudio: true,\\n                            index: 0\\n                        };\\n                        kvObj = {\\n                            \\\"LIVE_VIDEO_SEAT_INFO_PRE_0\\\": kvInfo0\\n                        };\\n                        kvObj[\\\"LIVE_VIDEO_ROOM_MIX_TYPE\\\"] = 1;\\n                        kvObj[\\\"LIVE_VIDEO_ROOM_USER_ID\\\"] = this.userId;\\n                        for (item in kvObj) {\\n                            this.chatRoom.forceSetChatRoomEntry(this.roomId, {\\n                                key: item,\\n                                value: JSON.stringify(kvObj[item]),\\n                                isAutoDelete: false,\\n                                isSendNotification: true,\\n                                notificationExtra: 'Change Count'\\n                            }).then(function () {\\n                                console.log(\\\"设置属性成功\\\");\\n                            });\\n                        }\\n                        key = 'RCRoomInfoKey';\\n                        defaultRoomInfo_1 = {\\n                            isFreeEnterSeat: false,\\n                            isLockAll: false,\\n                            isMuteAll: false,\\n                            roomName: this._roomName + \\\"\\\",\\n                            seatCount: 2 //麦位数量\\n                        };\\n                        value = JSON.stringify(defaultRoomInfo_1);\\n                        this.chatRoom.forceSetChatRoomEntry(this.roomId, {\\n                            key: key,\\n                            value: value,\\n                            isAutoDelete: false,\\n                            isSendNotification: true,\\n                            notificationExtra: 'Change Count'\\n                        }).then(function (e) {\\n                            _this.roomInfo = defaultRoomInfo_1;\\n                            _this.emit(\\\"roomInfoDidUpdate\\\", { roomInfo: _this.roomInfo });\\n                            //  this.emit('setNewRoom')\\n                        });\\n                        defaultSeatInfo = {\\n                            status: 0,\\n                            userId: \\\"\\\",\\n                            mute: false,\\n                            userEnableVideo: true,\\n                            frame: \\\"{{0,0},{1,1}}\\\",\\n                            lock: false,\\n                            userEnableAudio: true,\\n                            index: 0\\n                        };\\n                        arr = [];\\n                        start = 0;\\n                        if (this.roomInfo && this.roomInfo.seatCount) {\\n                            seatCount = this.roomInfo.seatCount;\\n                        }\\n                        if (this.seatInfoList.length) { //已经存在的房间重新设置座位数\\n                            start = 1;\\n                            arr.push(this.seatInfoList[0]); //原本的0号麦位不动\\n                        }\\n                        for (i = 0; i < 10; i++) {\\n                            arr.push(__assign({}, defaultSeatInfo));\\n                            arr[i].index = i;\\n                        }\\n                        return [4 /*yield*/, Promise.all(arr.map(function (item, index) { return __awaiter(_this, void 0, void 0, function () {\\n                                var itemValue;\\n                                return __generator(this, function (_a) {\\n                                    itemValue = item;\\n                                    if (index < defaultRoomInfo_1.seatCount) { //有效麦位\\n                                        this.chatRoom.forceSetChatRoomEntry(this.roomId, {\\n                                            key: \\\"LIVE_VIDEO_SEAT_INFO_PRE_\\\" + index,\\n                                            value: JSON.stringify(itemValue),\\n                                            isAutoDelete: false,\\n                                            isSendNotification: true,\\n                                            notificationExtra: 'Change Count'\\n                                        }).then(function () {\\n                                            console.log(\\\"设置属性成功\\\");\\n                                        });\\n                                    }\\n                                    return [2 /*return*/];\\n                                });\\n                            }); }))];\\n                    case 1:\\n                        _a.sent();\\n                        arr.length = defaultRoomInfo_1.seatCount; //删除本地无效麦位\\n                        this.seatInfoList = arr;\\n                        console.log(\\\"===================================\\\");\\n                        console.log(\\\"初始化setlist\\\", this.seatInfoList);\\n                        this.emit('setNewRoom');\\n                        return [3 /*break*/, 4];\\n                    case 2:\\n                        seatCount = 9;\\n                        if (this.roomInfo && this.roomInfo.seatCount) {\\n                            seatCount = this.roomInfo.seatCount;\\n                            oldSeadCount_1 = this.roomInfo.seatCount;\\n                        }\\n                        if (parm && parm.seatCount) {\\n                            seatCount = parm.seatCount;\\n                        }\\n                        key = 'RCRoomInfoKey';\\n                        defaultRoomInfo_2 = {\\n                            isFreeEnterSeat: false,\\n                            isLockAll: false,\\n                            isMuteAll: false,\\n                            roomName: this._roomName + \\\"\\\",\\n                            seatCount: seatCount //麦位数量\\n                        };\\n                        value = JSON.stringify(defaultRoomInfo_2);\\n                        this.chatRoom.forceSetChatRoomEntry(this.roomId, {\\n                            key: key,\\n                            value: value,\\n                            isAutoDelete: false,\\n                            isSendNotification: true,\\n                            notificationExtra: 'Change Count'\\n                        }).then(function (e) {\\n                            _this.roomInfo = defaultRoomInfo_2;\\n                            _this.emit(\\\"roomInfoDidUpdate\\\", { roomInfo: _this.roomInfo });\\n                            //  this.emit('setNewRoom')\\n                        });\\n                        defaultSeatInfo = {\\n                            status: 0,\\n                            mute: false,\\n                            speaking: false,\\n                        };\\n                        arr = [];\\n                        start = 0;\\n                        if (this.seatInfoList.length) { //已经存在的房间重新设置座位数\\n                            start = 1;\\n                            arr.push(this.seatInfoList[0]); //原本的0号麦位不动\\n                        }\\n                        for (i = 0; i < 10; i++) {\\n                            seatName = \\\"RCSeatInfoSeatPartPrefixKey_\\\" + i;\\n                            // console.log(\\\"seat:\\\", i, seatName, JSON.stringify(defaultSeatInfo))\\n                            // arr.push(JSON.parse(JSON.stringify(defaultSeatInfo)))\\n                            arr.push(__assign({}, defaultSeatInfo));\\n                        }\\n                        return [4 /*yield*/, Promise.all(arr.map(function (item, index) { return __awaiter(_this, void 0, void 0, function () {\\n                                var itemValue;\\n                                var _this = this;\\n                                return __generator(this, function (_a) {\\n                                    itemValue = item;\\n                                    if (index < defaultRoomInfo_2.seatCount) { //有效麦位\\n                                        this.chatRoom.forceSetChatRoomEntry(this.roomId, {\\n                                            key: \\\"RCSeatInfoSeatPartPrefixKey_\\\" + index,\\n                                            value: JSON.stringify(itemValue),\\n                                            isAutoDelete: false,\\n                                            isSendNotification: true,\\n                                            notificationExtra: 'Change Count'\\n                                        }).then(function () {\\n                                            console.log(\\\"设置属性成功\\\");\\n                                        });\\n                                    }\\n                                    else { //无效麦位删除\\n                                        if (index < oldSeadCount_1) { //原有麦位超出部分删除\\n                                            //console.log(\\\"deleing\\\", \\\"RCSeatInfoSeatPartPrefixKey_\\\" + index);\\n                                            setTimeout(function () {\\n                                                _this.chatRoom.forceRemoveChatRoomEntry(_this.roomId, {\\n                                                    key: \\\"RCSeatInfoSeatPartPrefixKey_\\\" + index,\\n                                                    isSendNotification: false,\\n                                                    notificationExtra: 'Change role'\\n                                                }).then(function () {\\n                                                    //console.log('删除聊天室属性成功');\\n                                                });\\n                                            }, (oldSeadCount_1 - index) * 300);\\n                                        }\\n                                    }\\n                                    return [2 /*return*/];\\n                                });\\n                            }); }))];\\n                    case 3:\\n                        _a.sent();\\n                        arr.length = defaultRoomInfo_2.seatCount; //删除本地无效麦位\\n                        this.seatInfoList = arr;\\n                        this.emit('setNewRoom');\\n                        _a.label = 4;\\n                    case 4: return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    //更新消息\\n    IM.prototype.messageUpdate = function (messageType, content) {\\n        console.log(\\\"正在发送的消息体\\\", content);\\n        var PersonMessage = this.chatRoom.registerMessageType(messageType, false, false, []);\\n        var message = new PersonMessage(content);\\n        var arr = [\\n            this.chatRoom\\n                .sendMessage({\\n                conversationType: this.chatRoom.ConversationType.CHATROOM,\\n                targetId: this.roomId\\n            }, message),\\n        ];\\n        return Promise.all(arr);\\n    };\\n    IM.prototype.leaveRoom = function (roomid) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var _this = this;\\n            return __generator(this, function (_a) {\\n                return [2 /*return*/, this.leveRoomMessage(function () {\\n                        _this.chatRoom && _this.chatRoom.quitChatRoom(roomid).then(function (res) {\\n                            //退出时清理房间数据\\n                            _this.roomInfo = null;\\n                            _this.seatInfoList.length = 0;\\n                            _loger__WEBPACK_IMPORTED_MODULE_3__.default.log('退出聊天室成功');\\n                            _this.messageUpdate(\\\"RC:VRLRefreshMsg\\\", {\\n                                name: \\\"RCAudienceLeaveRoom\\\",\\n                                content: _this.userId,\\n                            });\\n                        });\\n                    })];\\n            });\\n        });\\n    };\\n    IM.prototype.enterRoomMessage = function () {\\n        var _this = this;\\n        var message = {\\n            messageType: \\\"RC:VRLRefreshMsg\\\",\\n            content: {\\n                name: \\\"RCAudienceJoinRoom\\\",\\n                content: this.userId\\n            }\\n        };\\n        console.log(\\\"开始发送进房间消息\\\", this.chatRoom, this.roomType);\\n        if (this.roomType == \\\"live\\\") {\\n            this.chatRoom.getChatRoomInfo(this.roomId, { count: 0, order: 0 }).then(function (result) {\\n                var pmsg = new _this.regMsg({\\n                    name: \\\"ROOM_COMMAND_USER_ENTER\\\",\\n                    data: _this.userId + \\\"__RCLV__\\\" + result.data.userCount\\n                });\\n                _this.chatRoom.sendMessage({\\n                    conversationType: _this.chatRoom.ConversationType.CHATROOM,\\n                    targetId: _this.roomId\\n                }, pmsg).then(function (message) {\\n                    console.log('发送进房间消息成功', message);\\n                }).catch(function (err) {\\n                    _loger__WEBPACK_IMPORTED_MODULE_3__.default._error('发送进房间消息失败');\\n                });\\n            });\\n        }\\n        else {\\n            this.chatRoom.sendMessage({\\n                conversationType: this.chatRoom.ConversationType.CHATROOM,\\n                targetId: this.roomId\\n            }, message).then(function (message) {\\n                console.log('发送进房间消息成功', message);\\n            });\\n        }\\n    };\\n    IM.prototype.leveRoomMessage = function (callback) {\\n        var _this = this;\\n        var message = {\\n            messageType: \\\"RC:VRLRefreshMsg\\\",\\n            content: {\\n                name: \\\"RCAudienceLeaveRoom\\\",\\n                content: this.userId\\n            }\\n        };\\n        if (this.roomType == \\\"live\\\") {\\n            message.messageType = \\\"RC:CmdMsg\\\";\\n            message.content.name = \\\"ROOM_COMMAND_USER_EXIT\\\";\\n            this.chatRoom.getChatRoomInfo(this.roomId, { count: 0, order: 0 }).then(function (result) {\\n                var pmsg = new _this.regMsg({\\n                    name: \\\"ROOM_COMMAND_USER_ENTER\\\",\\n                    data: \\\"ROOM_COMMAND_USER_EXIT__RCLV__\\\" + Number(Number(result.data.userCount) - 1)\\n                });\\n                _this.chatRoom.sendMessage({\\n                    conversationType: _this.chatRoom.ConversationType.CHATROOM,\\n                    targetId: _this.roomId\\n                }, pmsg).then(function (message) {\\n                    console.log('发送退房间消息成功', message);\\n                }).catch(function (err) {\\n                    _loger__WEBPACK_IMPORTED_MODULE_3__.default._error('发送退房间消息失败');\\n                });\\n            });\\n        }\\n        else {\\n            this.chatRoom && this.chatRoom.sendMessage({\\n                conversationType: this.chatRoom.ConversationType.CHATROOM,\\n                targetId: this.roomId\\n            }, message).then(function (message) {\\n                console.log('发送退房间消息成功', message);\\n            });\\n        }\\n    };\\n    //设置麦位信息\\n    IM.prototype.seatInfoUpdate = function (key, value) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                console.log(\\\"key\\\", key);\\n                console.log(\\\"value\\\", value);\\n                if (Array.isArray(value) || typeof value == \\\"string\\\") {\\n                    console.log(\\\"不转换：\\\", typeof value, value);\\n                }\\n                else {\\n                    value = JSON.stringify(value);\\n                }\\n                return [2 /*return*/, this.chatRoom.forceSetChatRoomEntry(this.roomId, {\\n                        key: key,\\n                        value: value,\\n                        isAutoDelete: false,\\n                        isSendNotification: false,\\n                    }).then(function () {\\n                        return '设置聊天室属性成功!';\\n                    }).catch(function (err) {\\n                        return '设置聊天室属性失败:' + err;\\n                    })];\\n            });\\n        });\\n    };\\n    //排麦消息设置\\n    IM.prototype.RequestseatInfoUpdate = function (key, value) {\\n        console.log(\\\"排麦更新\\\", key, value);\\n        return this.chatRoom.forceSetChatRoomEntry(this.roomId, {\\n            key: key,\\n            value: value,\\n            isAutoDelete: false,\\n            type: 1,\\n            isSendNotification: false,\\n        }).then(function () {\\n            return '排麦操作成功!';\\n        }).catch(function (err) {\\n            return '排麦操作失败:' + err;\\n        });\\n    };\\n    //断开链接\\n    // disConnect() {\\n    //     this.body.disconnect().then(() => console.log(\\\"断开链接成功\\\"));\\n    // }\\n    //删除麦位信息\\n    IM.prototype.seatInfoRemove = function (key) {\\n        console.log(\\\"删除\\\", this);\\n        var that = this;\\n        return that.chatRoom.forceRemoveChatRoomEntry(this.roomId, {\\n            key: key,\\n            isSendNotification: true,\\n        });\\n    };\\n    return IM;\\n}(_structure_modules__WEBPACK_IMPORTED_MODULE_0__.default));\\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (IM);\\n\\n\\n//# sourceURL=webpack://@rongcloud/rcliveroomlib/./src/modules/im/index.ts?\");\n\n/***/ }),\n\n/***/ \"./src/modules/rtc/index.ts\":\n/*!**********************************!*\\\n  !*** ./src/modules/rtc/index.ts ***!\n  \\**********************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\neval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   \\\"default\\\": () => (__WEBPACK_DEFAULT_EXPORT__)\\n/* harmony export */ });\\n/* harmony import */ var _structure_modules__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../structure/modules */ \\\"./src/structure/modules.ts\\\");\\n/* harmony import */ var _loger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../loger */ \\\"./src/loger.ts\\\");\\n/* harmony import */ var _rongcloud_plugin_rtc__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @rongcloud/plugin-rtc */ \\\"./node_modules/@rongcloud/plugin-rtc/dist/index.esm.js\\\");\\n/* harmony import */ var _rongcloud_engine__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @rongcloud/engine */ \\\"./node_modules/@rongcloud/engine/dist/index.esm.js\\\");\\nvar __extends = (undefined && undefined.__extends) || (function () {\\n    var extendStatics = function (d, b) {\\n        extendStatics = Object.setPrototypeOf ||\\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\\n        return extendStatics(d, b);\\n    };\\n    return function (d, b) {\\n        if (typeof b !== \\\"function\\\" && b !== null)\\n            throw new TypeError(\\\"Class extends value \\\" + String(b) + \\\" is not a constructor or null\\\");\\n        extendStatics(d, b);\\n        function __() { this.constructor = d; }\\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\\n    };\\n})();\\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\n    return new (P || (P = Promise))(function (resolve, reject) {\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\n        function rejected(value) { try { step(generator[\\\"throw\\\"](value)); } catch (e) { reject(e); } }\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\n    });\\n};\\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\\n    return g = { next: verb(0), \\\"throw\\\": verb(1), \\\"return\\\": verb(2) }, typeof Symbol === \\\"function\\\" && (g[Symbol.iterator] = function() { return this; }), g;\\n    function verb(n) { return function (v) { return step([n, v]); }; }\\n    function step(op) {\\n        if (f) throw new TypeError(\\\"Generator is already executing.\\\");\\n        while (_) try {\\n            if (f = 1, y && (t = op[0] & 2 ? y[\\\"return\\\"] : op[0] ? y[\\\"throw\\\"] || ((t = y[\\\"return\\\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\\n            if (y = 0, t) op = [op[0] & 2, t.value];\\n            switch (op[0]) {\\n                case 0: case 1: t = op; break;\\n                case 4: _.label++; return { value: op[1], done: false };\\n                case 5: _.label++; y = op[1]; op = [0]; continue;\\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\\n                default:\\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\\n                    if (t[2]) _.ops.pop();\\n                    _.trys.pop(); continue;\\n            }\\n            op = body.call(thisArg, _);\\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\\n    }\\n};\\n\\n\\n\\n\\n\\nvar RTC = /** @class */ (function (_super) {\\n    __extends(RTC, _super);\\n    function RTC(im) {\\n        var _this = _super.call(this) || this;\\n        _this.states = 0; //0初始化未完成 1就绪 2正在初始化  9浏览器不支持\\n        _this.isAnchor = false; //身份标识 是否主播\\n        return _this;\\n        // this.init(im);\\n    }\\n    RTC.prototype.init = function (im) {\\n        var _this = this;\\n        console.log('内部各SDK版本', _rongcloud_engine__WEBPACK_IMPORTED_MODULE_3__.VersionManage.getInfo());\\n        this.RTCLib = _rongcloud_plugin_rtc__WEBPACK_IMPORTED_MODULE_2__;\\n        var rtcClient = im.installPlugin(this.RTCLib.installer, {});\\n        navigator.mediaDevices.ondevicechange = function (event) {\\n            console.log(\\\"有视频设备改动\\\", event);\\n            _this.emit(\\\"ondevicechange\\\");\\n        };\\n        console.log(\\\"初始化后的rtc\\\", rtcClient);\\n        this.body = rtcClient;\\n        this.emit(\\\"ready\\\");\\n    };\\n    RTC.prototype.joinRoom = function (roomid) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var id;\\n            var _this = this;\\n            return __generator(this, function (_a) {\\n                id = false;\\n                if (this.room && this.room.getRoomId()) {\\n                    id = this.room.getRoomId();\\n                }\\n                if (id) {\\n                    console.log(\\\"有存在的rtc房间 执行先退出逻辑\\\", id);\\n                    this.leaveRoom(id).then(function () {\\n                        console.log(\\\"离开房间成功\\\");\\n                        // console.log(\\\"加入rtcroom\\\", roomid);\\n                        console.log(\\\"我是不是主播\\\", _this.isAnchor);\\n                        // console.log(\\\"type:\\\", RCLivingType.AUDIO);\\n                        if (_this.isAnchor) {\\n                            _this.joinLivingRoomAsAnchor(roomid).catch(function (err) {\\n                                _loger__WEBPACK_IMPORTED_MODULE_1__.default._error('加入RTC房间失败:70002');\\n                            });\\n                        }\\n                        else {\\n                            _this.joinLivingRoomAsAudience(roomid).catch(function (err) {\\n                                _loger__WEBPACK_IMPORTED_MODULE_1__.default._error('加入RTC房间失败:70002');\\n                            });\\n                        }\\n                    });\\n                }\\n                else {\\n                    console.log(\\\"我是不是主播\\\", this.isAnchor, \\\"没有重复直接加入\\\");\\n                    // console.log(\\\"type:\\\", RCLivingType.AUDIO);\\n                    if (this.isAnchor) {\\n                        this.joinLivingRoomAsAnchor(roomid).catch(function (err) {\\n                            _loger__WEBPACK_IMPORTED_MODULE_1__.default._error('加入RTC房间失败:70002');\\n                        });\\n                    }\\n                    else {\\n                        this.joinLivingRoomAsAudience(roomid).catch(function (err) {\\n                            _loger__WEBPACK_IMPORTED_MODULE_1__.default._error('加入RTC房间失败:70002');\\n                        });\\n                    }\\n                }\\n                return [2 /*return*/];\\n            });\\n        });\\n    };\\n    RTC.prototype.joinLivingRoomAsAnchor = function (roomid) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var currentLivingType, _a, room, RTCTracks, MCUTracks, CDNUris, userIds, code, that, getTrack, i, publishTrack, handler, remoteTracksObj, obj;\\n            var _this = this;\\n            return __generator(this, function (_b) {\\n                switch (_b.label) {\\n                    case 0:\\n                        console.log(\\\"主播加入rtcroom\\\", roomid);\\n                        console.log(\\\"this.body\\\", this.body.joinLivingRoom);\\n                        currentLivingType = _rongcloud_plugin_rtc__WEBPACK_IMPORTED_MODULE_2__.RCLivingType.AUDIO;\\n                        if (this.roomType == 'live') {\\n                            currentLivingType = _rongcloud_plugin_rtc__WEBPACK_IMPORTED_MODULE_2__.RCLivingType.VIDEO;\\n                        }\\n                        return [4 /*yield*/, this.body.joinLivingRoom(roomid, currentLivingType)];\\n                    case 1:\\n                        _a = _b.sent(), room = _a.room, RTCTracks = _a.RTCTracks, MCUTracks = _a.MCUTracks, CDNUris = _a.CDNUris, userIds = _a.userIds, code = _a.code;\\n                        console.log(this.RTCLib.RCRTCCode.SUCCESS);\\n                        console.log(\\\"RTCTracks\\\", RTCTracks);\\n                        console.log(\\\"MCUTracks\\\", MCUTracks);\\n                        if (code !== this.RTCLib.RCRTCCode.SUCCESS) {\\n                            console.log('加入rtc房间失败');\\n                            return [2 /*return*/];\\n                        }\\n                        // 设置合流布局\\n                        this.builder = room.getMCUConfigBuilder();\\n                        console.log(\\\"this.builder:\\\", this.builder);\\n                        // 设置合流后的视频流渲染方式，默认值为 `MixVideoRenderMode.CROP`\\n                        // `MixVideoRenderMode.CROP`: 当画布尺寸与视频分辨率比例不同时，裁剪视频内容\\n                        // `MixVideoRenderMode.WHOLE`: 当画布尺寸与视频分辨率不同时，压缩视频尺寸以填充画布\\n                        this.builder.setOutputVideoRenderMode(_rongcloud_plugin_rtc__WEBPACK_IMPORTED_MODULE_2__.MixVideoRenderMode.WHOLE);\\n                        // 设置视频分辨率\\n                        this.builder.setOutputVideoResolution(_rongcloud_plugin_rtc__WEBPACK_IMPORTED_MODULE_2__.RCResolution.W176_H132);\\n                        // 设置视频帧率\\n                        this.builder.setOutputVideoFPS(_rongcloud_plugin_rtc__WEBPACK_IMPORTED_MODULE_2__.RCFrameRate.FPS_15);\\n                        // console.log(\\\" roomid：\\\", room.getRoomId());\\n                        // console.log(\\\" userIds\\\", userIds);\\n                        // 若加入失败，则 room、userIds、tracks 值为 undefined\\n                        if (code !== _rongcloud_plugin_rtc__WEBPACK_IMPORTED_MODULE_2__.RCRTCCode.SUCCESS) {\\n                            console.log('join room failed:', code);\\n                            return [2 /*return*/];\\n                        }\\n                        else {\\n                            console.log(\\\"code of:\\\", code);\\n                        }\\n                        this.room = room;\\n                        that = this;\\n                        console.log('joinLivingRoomAsAnchor', room);\\n                        // 注册房间事件监听器，重复注册时，仅最后一次注册有效\\n                        room.registerRoomEventListener({\\n                            /**\\n                             * 当本端被剔出房间\\n                             * @description 被踢出房间可能是由于服务端超出一定时间未能收到 rtcPing 消息，所以认为己方离线。\\n                             * 另一种可能是己方 rtcPing 失败次数超出上限，故而主动断线\\n                             * @param byServer\\n                             * 当值为 false 时，说明本端 rtcPing 超时\\n                             * 当值为 true 时，说明本端收到被踢出房间通知\\n                             */\\n                            onKickOff: function (byServer) {\\n                                //console.log(\\\"eeeeeevent: 主播房间踢人\\\");\\n                            },\\n                            /**\\n                             * 接收到房间信令时回调，用户可通过房间实例的 `messageUpdate(name, content)` 接口发送信令\\n                             * @param name 信令名\\n                             * @param content 信令内容\\n                             * @param senderUserId 发送者 Id\\n                             * @param messageUId 消息唯一标识\\n                             */\\n                            onMessageReceive: function (name, content, senderUserId, messageUId) {\\n                                console.log(\\\"eeeeeevent: 主播房间收到消息\\\", name, content, senderUserId, messageUId);\\n                            },\\n                            /**\\n                             * 监听房间属性变更通知\\n                             * @param name\\n                             * @param content\\n                             */\\n                            onRoomAttributeChange: function (name, content) {\\n                                //console.log(\\\"eeeeeevent: 主播房间属性变更\\\");\\n                            },\\n                            /**\\n                             * 房间用户禁用/启用音频\\n                             * @param audioTrack RCRemoteAudioTrack 类实例\\n                             */\\n                            onAudioMuteChange: function (audioTrack) {\\n                                //console.log(\\\"eeeeeevent: 主播房间 音频 静音\\\");\\n                            },\\n                            /**\\n                             * 房间用户禁用/启用视频\\n                             * @param videoTrack RCRemoteVideoTrack 类实例对象\\n                             */\\n                            onVideoMuteChange: function (videoTrack) {\\n                                //console.log(\\\"eeeeeevent: 主播房间 视频 静音\\\");\\n                            },\\n                            /**\\n                             * 房间内用户发布资源\\n                             * @param tracks 新发布的音轨与视轨数据列表，包含新发布的 RCRemoteAudioTrack 与 RCRemoteVideoTrack 实例\\n                             */\\n                            onTrackPublish: function (tracks) {\\n                                return __awaiter(this, void 0, void 0, function () {\\n                                    var obj;\\n                                    return __generator(this, function (_a) {\\n                                        // 按业务需求选择需要订阅资源，通过 room.subscribe 接口进行订阅\\n                                        console.log(\\\"发布了的流-主播端\\\", tracks);\\n                                        obj = room.subscribe(tracks).catch(function (err) {\\n                                            _loger__WEBPACK_IMPORTED_MODULE_1__.default._error('订阅流失败:70006');\\n                                        });\\n                                        return [2 /*return*/];\\n                                    });\\n                                });\\n                            },\\n                            /**\\n                             * 房间用户取消发布资源\\n                             * @param tracks 被取消发布的音轨与视轨数据列表\\n                             * @description 当资源被取消发布时，SDK 内部会取消对相关资源的订阅，业务层仅需处理 UI 业务\\n                             */\\n                            onTrackUnpublish: function (tracks) {\\n                                console.log(\\\"资源取消发布了\\\", tracks);\\n                                //console.log(\\\"eeeeeevent: 主播房间取消发布\\\", tracks);\\n                            },\\n                            /**\\n                             * 订阅的音视频流通道已建立, track 已可以进行播放\\n                             * @param track RCRemoteTrack 类实例\\n                             */\\n                            onTrackReady: function (track) {\\n                                console.log(\\\"eeeeeevent:主播ontrackready\\\", track);\\n                                if (track.isAudioTrack()) {\\n                                    // 音轨不需要传递播放控件\\n                                    track.play();\\n                                }\\n                                else {\\n                                    //上报到项目内部去播放方便自定义\\n                                    that.emit(\\\"remoteVideoTrack\\\", track);\\n                                }\\n                            },\\n                            /**\\n                             * 人员加入\\n                             * @param userIds 加入的人员 id 列表\\n                             */\\n                            onUserJoin: function (userIds) {\\n                                //console.log(\\\"eeeeeevent: 主播房间 用户加入\\\", userIds);\\n                            },\\n                            /**\\n                             * 人员退出\\n                             * @param userIds\\n                             */\\n                            onUserLeave: function (userIds) {\\n                                //console.log(\\\"eeeeeevent: 主播房间 用户离开\\\", userIds);\\n                            }\\n                        });\\n                        room.registerReportListener({\\n                            /**\\n                             * 用于接收状态数据报告\\n                             * @param report\\n                             */\\n                            onStateReport: function (report) {\\n                                if (report && report.iceCandidatePair) {\\n                                    that.emit(\\\"RtcRtt\\\", report.iceCandidatePair.rtt);\\n                                }\\n                                else {\\n                                    console.warn(\\\"报告异常\\\");\\n                                }\\n                            }\\n                        });\\n                        if (!(this.roomType == \\\"live\\\")) return [3 /*break*/, 3];\\n                        return [4 /*yield*/, this.body.createMicrophoneAndCameraTracks()];\\n                    case 2:\\n                        getTrack = _b.sent();\\n                        console.log(\\\"本地流：\\\", getTrack);\\n                        this.tracks = getTrack.tracks;\\n                        return [3 /*break*/, 5];\\n                    case 3: return [4 /*yield*/, this.body.createMicrophoneAudioTrack()];\\n                    case 4:\\n                        getTrack = _b.sent();\\n                        this.tracks = [getTrack.track];\\n                        _b.label = 5;\\n                    case 5:\\n                        if (getTrack.code != _rongcloud_plugin_rtc__WEBPACK_IMPORTED_MODULE_2__.RCRTCCode.SUCCESS) {\\n                            console.error(\\\"获取本地流错误\\\");\\n                        }\\n                        else {\\n                            for (i in this.tracks) {\\n                                if (this.tracks[i]._kind == \\\"video\\\") {\\n                                    that.emit(\\\"remoteVideoTrack\\\", this.tracks[i]);\\n                                }\\n                                else {\\n                                    //this.tracks[i].play();\\n                                }\\n                            }\\n                        }\\n                        return [4 /*yield*/, room.publish(this.tracks).catch(function (err) {\\n                                _loger__WEBPACK_IMPORTED_MODULE_1__.default._error('发布流失败:70005');\\n                            })];\\n                    case 6:\\n                        publishTrack = _b.sent();\\n                        // 若资源发布失败\\n                        if (publishTrack.code !== _rongcloud_plugin_rtc__WEBPACK_IMPORTED_MODULE_2__.RCRTCCode.SUCCESS) {\\n                            console.log('资源发布失败:', publishTrack.code);\\n                        }\\n                        else {\\n                            console.log(\\\"资源 发布成功\\\");\\n                            handler = function (audioLevelReportList) {\\n                                // let level: number = 0;\\n                                for (var i in audioLevelReportList) {\\n                                    // level = audioLevelReportList[i].audioLevel\\n                                    _this.emit(\\\"audioChenge\\\", audioLevelReportList[i]);\\n                                    // console.log(\\\"audioreport++++++++++++++++:\\\", audioLevelReportList[i])\\n                                }\\n                            };\\n                            room.onAudioLevelChange(handler, 1000);\\n                            console.log(\\\"资源 发布 成功\\\");\\n                        }\\n                        return [4 /*yield*/, room.getRemoteTracks()];\\n                    case 7:\\n                        remoteTracksObj = _b.sent();\\n                        if (remoteTracksObj.length) {\\n                            obj = room.subscribe(remoteTracksObj).catch(function (err) {\\n                                _loger__WEBPACK_IMPORTED_MODULE_1__.default._error('订阅流失败:70006');\\n                            });\\n                            ;\\n                            // console.log(JSON.stringify(remoteTracks))\\n                        }\\n                        this.emit(\\\"joinRoom\\\");\\n                        return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    RTC.prototype.joinLivingRoomAsAudience = function (roomid) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var currentLivingType, _a, room, RTCTracks, MCUTracks, CDNUris, userIds, code, that;\\n            return __generator(this, function (_b) {\\n                switch (_b.label) {\\n                    case 0:\\n                        console.log(\\\"观众加入rtcroom\\\", roomid);\\n                        currentLivingType = _rongcloud_plugin_rtc__WEBPACK_IMPORTED_MODULE_2__.RCLivingType.AUDIO;\\n                        if (this.roomType == 'live') {\\n                            currentLivingType = _rongcloud_plugin_rtc__WEBPACK_IMPORTED_MODULE_2__.RCLivingType.VIDEO;\\n                        }\\n                        return [4 /*yield*/, this.body.joinLivingRoomAsAudience(roomid, currentLivingType)\\n                            // 若加入失败，则 room 值为 undefined\\n                        ];\\n                    case 1:\\n                        _a = _b.sent(), room = _a.room, RTCTracks = _a.RTCTracks, MCUTracks = _a.MCUTracks, CDNUris = _a.CDNUris, userIds = _a.userIds, code = _a.code;\\n                        // 若加入失败，则 room 值为 undefined\\n                        if (code !== _rongcloud_plugin_rtc__WEBPACK_IMPORTED_MODULE_2__.RCRTCCode.SUCCESS) {\\n                            console.log('join room as audience failed:', code);\\n                        }\\n                        //console.log(\\\"room\\\", room)\\n                        this.room = room;\\n                        that = this;\\n                        this.tracks = MCUTracks;\\n                        room.subscribe(MCUTracks);\\n                        console.log('joinLivingRoomAsAudience', MCUTracks);\\n                        // audienceRoom 为观众加入房间返回的 room\\n                        // 注册房间事件监听器，重复注册时，仅最后一次有效\\n                        room.registerRoomEventListener({\\n                            /**\\n                             * 主播加入\\n                             * @param userIds 加入的主播 id 列表\\n                             */\\n                            onAnchorJoin: function (userIds) {\\n                                //console.log(\\\"观众房间监听\\\");\\n                                //console.log(\\\"主播加入\\\", userIds)\\n                            },\\n                            /**\\n                             * 主播离开\\n                             * @param userIds 离开的主播 id 列表\\n                             */\\n                            onAnchorLeave: function (userIds) {\\n                                //console.log(\\\"观众房间监听\\\");\\n                                //console.log(\\\"主播离开\\\", userIds)\\n                            },\\n                            /*\\n                             * 房间内直播合流资源发布\\n                             * @param track RCRemoteTrack 类实例\\n                             * * 房间类型以第一个加入房间用户设置的直播类型为准\\n                             * * 房间直播类型为 RCLivingType.AUDIO_VIDEO ，tracks 包含 RCRemoteAudioTrack 与 RCRemoteVideoTrack 实例\\n                             * * 直播类型为 RCLivingType.AUDIO ， tracks 仅包含 RCRemoteAudioTrack 实例\\n                             */\\n                            onTrackPublish: function (tracks) {\\n                                console.log(\\\"观众房间监听 有流发布 --\\\", tracks);\\n                                // console.log(\\\"publish\\\", tracks);\\n                                setTimeout(function () {\\n                                    var code = room.subscribe(tracks).catch(function (err) {\\n                                        _loger__WEBPACK_IMPORTED_MODULE_1__.default._error('订阅流失败:70006');\\n                                    }).code;\\n                                    console.log('onTrackPublish:', code);\\n                                    //订阅是异步 暂时不处理回调 默认认为可以成功\\n                                }, 100);\\n                                // for (var i in tracks) {\\n                                //     if (tracks[i].isAudioTrack()) {\\n                                //         // 音频播放无需传递组件\\n                                //         tracks[i].play()\\n                                //     } else {\\n                                //         //视频流处理\\n                                //         console.log(\\\"that.videoNode\\\", that);\\n                                //         tracks[i].play(that.body.videoNode)\\n                                //     }\\n                                // }\\n                            },\\n                            /*\\n                             * 房间内直播合流资源取消发布\\n                             * @param track RCRemoteTrack 类实例\\n                             * * 触发时机: 全部主播退出房间（因资源为多个主播发布的合流资源，单个主播取消发布不会触发）\\n                             */\\n                            onTrackUnpublish: function (tracks) {\\n                                //console.log(\\\"观众房间监听\\\");\\n                                console.log(\\\"unpublish\\\", tracks);\\n                                that.emit(\\\"unpublish\\\");\\n                            },\\n                            onPublishCDNStream: function (stream) {\\n                                console.log(\\\"cdn流-----------------------\\\");\\n                                console.log(\\\"cdn:\\\", stream);\\n                            },\\n                            onTrackReady: function (track) {\\n                                return __awaiter(this, void 0, void 0, function () {\\n                                    var getTrack;\\n                                    return __generator(this, function (_a) {\\n                                        // 订阅的音视频轨道已连接，可以根据业务需求选择性播放\\n                                        console.log(\\\"观众房间监听\\\", that);\\n                                        // console.log('track', track);\\n                                        if (track.isAudioTrack()) {\\n                                            // 音频播放无需传递组件\\n                                            track.play();\\n                                        }\\n                                        else {\\n                                            getTrack = void 0;\\n                                            if (that.body.videoNode) {\\n                                                //视频\\n                                                // 仅当 `code === RCRTCCode.SUCCESS` 时 videoTrack 有值\\n                                                console.log(\\\"播放视频流\\\");\\n                                                console.log(\\\"that.body.videoNode\\\", that.body.videoNode);\\n                                                console.log(\\\"track\\\", track);\\n                                                track.play(that.body.videoNode);\\n                                            }\\n                                        }\\n                                        return [2 /*return*/];\\n                                    });\\n                                });\\n                            },\\n                            // onStateReport(report) {\\n                            //     /**\\n                            //      * 报告生成时间\\n                            //      */\\n                            //     const timestamp: number = report.timestamp\\n                            //     /**\\n                            //      * 对等连接状态数据，其中包含反应当前与媒体服务器之间的 UDP 通道质量的信息 : IIcePairInfo\\n                            //      */\\n                            //     const iceCandidatePair = report.iceCandidatePair\\n                            //     /**\\n                            //      * 所有的上行流的状态数据 : ITrackState[]\\n                            //      */\\n                            //     const senders = report.senders\\n                            //     /**\\n                            //      * 订阅的下行流状态数据 : ITrackState[]\\n                            //      */\\n                            //     const receivers = report.receivers\\n                            //     console.log('timestamp', timestamp);\\n                            //     console.log('iceCandidatePair', iceCandidatePair);\\n                            //     console.log('senders', senders);\\n                            //     console.log('receivers', receivers);\\n                            // }\\n                        });\\n                        room.registerReportListener({\\n                            /**\\n                             * 用于接收状态数据报告\\n                             * @param report\\n                             */\\n                            onStateReport: function (report) {\\n                                that.emit(\\\"RtcRtt\\\", report.iceCandidatePair.rtt);\\n                            }\\n                        });\\n                        // const handler = (audioLevelReportList: { track, audioLevel: number }[]) => {\\n                        //     for (var i in audioLevelReportList) {\\n                        //         // level = audioLevelReportList[i].audioLevel\\n                        //         if (audioLevelReportList[i].audioLevel) {\\n                        //             console.log(\\\"audioreport++++++++++++++++:\\\", audioLevelReportList[i])\\n                        //         }\\n                        //     }\\n                        // let level: number = 0;\\n                        // for (var i in audioLevelReportList) {\\n                        //     level = audioLevelReportList[i].audioLevel\\n                        // }\\n                        // this.emit(\\\"audioChenge\\\", level)\\n                        // }\\n                        // room.onAudioLevelChange(handler, 1000)\\n                        console.log(\\\"加入房间 成功==================\\\");\\n                        this.emit(\\\"joinRoom\\\");\\n                        return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    RTC.prototype.leaveRoom = function (roomid) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var code, i, o, ol;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        console.log(\\\"----------leaveing-------------\\\", roomid);\\n                        if (this.localTrack) { //离开时如果有本地流 释放掉本地设备\\n                            console.log(\\\"尝试释放本地流\\\", this.localTrack);\\n                            this.localTrack.destroy();\\n                        }\\n                        if (!(roomid && roomid != '')) return [3 /*break*/, 5];\\n                        code = void 0;\\n                        if (!this.isAnchor) return [3 /*break*/, 2];\\n                        console.log('===============推房间时this.tracks:', this.tracks);\\n                        if (this.tracks && this.tracks.length) {\\n                            for (i = 0; i < this.tracks.length; i++) {\\n                                console.log('处理；', this.tracks[i]._msTrack, this.tracks[i]._msTrack.stop);\\n                                this.tracks[i]._msTrack.stop();\\n                                //this.tracks[i].destroy();\\n                            }\\n                        }\\n                        return [4 /*yield*/, this.body.leaveRoom(this.room)];\\n                    case 1:\\n                        o = _a.sent();\\n                        code = o.code;\\n                        return [3 /*break*/, 4];\\n                    case 2: return [4 /*yield*/, this.body.leaveLivingRoomAsAudience(this.room)\\n                        // const o = await this.room.unsubscribe(this.tracks)\\n                        // const o = await this.body.leaveRoom(this.room)\\n                    ];\\n                    case 3:\\n                        ol = _a.sent();\\n                        // const o = await this.room.unsubscribe(this.tracks)\\n                        // const o = await this.body.leaveRoom(this.room)\\n                        code = ol.code;\\n                        _a.label = 4;\\n                    case 4:\\n                        if (code !== _rongcloud_plugin_rtc__WEBPACK_IMPORTED_MODULE_2__.RCRTCCode.SUCCESS) {\\n                            console.log('leave room  failed:', code);\\n                            //o.code\\n                        }\\n                        _a.label = 5;\\n                    case 5: return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    RTC.prototype.mute = function () {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var code;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        if (!this.tracks || this.tracks.length == 0)\\n                            return [2 /*return*/];\\n                        console.log(\\\"闭麦当前流：\\\", this.tracks);\\n                        console.log(\\\"当前房间\\\", this.room);\\n                        return [4 /*yield*/, this.room.unpublish(this.tracks)];\\n                    case 1:\\n                        code = (_a.sent()).code;\\n                        console.log('取消发布', code);\\n                        return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    RTC.prototype.unmute = function () {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var code;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        if (!this.tracks || this.tracks.length == 0)\\n                            return [2 /*return*/];\\n                        console.log(\\\"this\\\", this);\\n                        console.log(\\\"room\\\", this.room);\\n                        return [4 /*yield*/, this.room.publish(this.tracks).catch(function (err) {\\n                                _loger__WEBPACK_IMPORTED_MODULE_1__.default._error('发布流失败:70005');\\n                            })];\\n                    case 1:\\n                        code = (_a.sent()).code;\\n                        // // 若资源发布失败\\n                        if (code !== _rongcloud_plugin_rtc__WEBPACK_IMPORTED_MODULE_2__.RCRTCCode.SUCCESS) {\\n                            console.log('资源发布失败:', code);\\n                        }\\n                        else {\\n                            console.log(\\\"资源发布成功\\\");\\n                        }\\n                        return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    RTC.prototype.enterSeat = function (index) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var id, that;\\n            return __generator(this, function (_a) {\\n                this.currentSeat = index;\\n                if (this.isAnchor) {\\n                    console.log(\\\"用户已经在麦位上:70003\\\");\\n                    return [2 /*return*/];\\n                }\\n                console.log('用户上麦到', index);\\n                id = this.room.getRoomId();\\n                that = this;\\n                console.log('enterSeat,当前房间', this.room);\\n                this.leaveRoom(id).then(function () {\\n                    that.isAnchor = true;\\n                    console.log(\\\"离开房间成功\\\");\\n                    that.joinLivingRoomAsAnchor(id);\\n                });\\n                return [2 /*return*/];\\n            });\\n        });\\n    };\\n    RTC.prototype.leaveSeat = function (item) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var code, LocalTracks, j, i, id, that;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        //console.log(\\\"正在下麦\\\");\\n                        if (!this.isAnchor) {\\n                            console.log(\\\"已经是观众无法下麦\\\");\\n                            return [2 /*return*/];\\n                        }\\n                        if (!(this.tracks && this.tracks.length != 0)) return [3 /*break*/, 2];\\n                        return [4 /*yield*/, this.room.unpublish(this.tracks)];\\n                    case 1:\\n                        code = (_a.sent()).code;\\n                        if (code !== _rongcloud_plugin_rtc__WEBPACK_IMPORTED_MODULE_2__.RCRTCCode.SUCCESS) {\\n                            console.log('取消发布失败:', code);\\n                        }\\n                        else {\\n                            console.log(\\\"取消发布成功\\\", code);\\n                            console.log('this.tracks', this.tracks);\\n                            LocalTracks = this.room.getLocalTracks();\\n                            console.log(\\\"LocalTracks\\\", LocalTracks);\\n                            //释放本地资源\\n                            for (j = 0; j < LocalTracks.length; j++) {\\n                                // LocalTracks[j].destroy();\\n                                LocalTracks[j]._msStream.stop();\\n                            }\\n                            this.localTrack && this.localTrack.destroy();\\n                            for (i in this.tracks) {\\n                                console.log(\\\"取消发布trks\\\", this);\\n                                //this.tracks[i].destroy();\\n                                this.tracks[i]._msStream.stop();\\n                            }\\n                        }\\n                        _a.label = 2;\\n                    case 2:\\n                        id = this.room.getRoomId();\\n                        if (item) {\\n                            this.leaveRoom(id);\\n                            return [2 /*return*/];\\n                        }\\n                        that = this;\\n                        this.leaveRoom(id).then(function () {\\n                            console.log(\\\"离开房间成功\\\");\\n                            that.isAnchor = false;\\n                            // setTimeout(() => {\\n                            that.joinLivingRoomAsAudience(id);\\n                            // }, 50);\\n                        });\\n                        return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    RTC.prototype.preview = function (videoNode) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var o;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0: return [4 /*yield*/, this.body.createCameraVideoTrack('RongCloudRTC')];\\n                    case 1:\\n                        o = _a.sent();\\n                        o.track.play(videoNode);\\n                        this.localTrack = o.track;\\n                        return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    RTC.prototype.getExist = function () {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var remoteTracksObj, RongCloudMCULive, i;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0: return [4 /*yield*/, this.room.getRemoteTracks()];\\n                    case 1:\\n                        remoteTracksObj = _a.sent();\\n                        console.log(\\\"已经有存在的流\\\", remoteTracksObj);\\n                        RongCloudMCULive = [];\\n                        for (i = 0; i < remoteTracksObj.length; i++) {\\n                            if (remoteTracksObj[i].getTag() == \\\"RongCloudMCULive\\\") {\\n                                RongCloudMCULive.push(remoteTracksObj[i]);\\n                                if (remoteTracksObj[i].isAudioTrack()) {\\n                                    remoteTracksObj[i].play();\\n                                }\\n                                else {\\n                                    console.log(\\\"准备播放：\\\", remoteTracksObj[i]);\\n                                    console.log(\\\"容器：\\\", this.body.videoNode);\\n                                    remoteTracksObj[i].play(this.body.videoNode);\\n                                }\\n                            }\\n                        }\\n                        if (RongCloudMCULive.length) {\\n                            console.log(RongCloudMCULive);\\n                            this.room.subscribe(RongCloudMCULive).catch(function (err) {\\n                                _loger__WEBPACK_IMPORTED_MODULE_1__.default._error('订阅流失败:70006');\\n                            });\\n                            ;\\n                        }\\n                        return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    return RTC;\\n}(_structure_modules__WEBPACK_IMPORTED_MODULE_0__.default));\\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (RTC);\\n\\n\\n//# sourceURL=webpack://@rongcloud/rcliveroomlib/./src/modules/rtc/index.ts?\");\n\n/***/ }),\n\n/***/ \"./src/structure/modules.ts\":\n/*!**********************************!*\\\n  !*** ./src/structure/modules.ts ***!\n  \\**********************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\neval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   \\\"default\\\": () => (__WEBPACK_DEFAULT_EXPORT__)\\n/* harmony export */ });\\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! events */ \\\"./node_modules/events/events.js\\\");\\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(events__WEBPACK_IMPORTED_MODULE_0__);\\n/* harmony import */ var _loger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../loger */ \\\"./src/loger.ts\\\");\\nvar __extends = (undefined && undefined.__extends) || (function () {\\n    var extendStatics = function (d, b) {\\n        extendStatics = Object.setPrototypeOf ||\\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\\n        return extendStatics(d, b);\\n    };\\n    return function (d, b) {\\n        if (typeof b !== \\\"function\\\" && b !== null)\\n            throw new TypeError(\\\"Class extends value \\\" + String(b) + \\\" is not a constructor or null\\\");\\n        extendStatics(d, b);\\n        function __() { this.constructor = d; }\\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\\n    };\\n})();\\n\\n\\nvar Module = /** @class */ (function (_super) {\\n    __extends(Module, _super);\\n    function Module() {\\n        return _super !== null && _super.apply(this, arguments) || this;\\n    }\\n    Module.prototype.init = function (d) {\\n        if (d === void 0) { d = null; }\\n        _loger__WEBPACK_IMPORTED_MODULE_1__.default.log(\\\"default init: \\\" + this.name + \\\":\\\" + this.name, d);\\n    };\\n    Module.prototype.input = function (d) {\\n        _loger__WEBPACK_IMPORTED_MODULE_1__.default.log(\\\"default input: \\\" + this.name + \\\":\\\" + this.name, d);\\n    };\\n    Module.prototype.start = function () {\\n        _loger__WEBPACK_IMPORTED_MODULE_1__.default.log(\\\"default start: \\\" + this.name);\\n    };\\n    Module.prototype.stop = function () {\\n        _loger__WEBPACK_IMPORTED_MODULE_1__.default.log(\\\"default stop: \\\" + this.name);\\n    };\\n    Module.prototype.cancel = function () {\\n        _loger__WEBPACK_IMPORTED_MODULE_1__.default.log(\\\"default cancel\\\" + this.name);\\n    };\\n    Module.prototype.reboot = function () {\\n        var _this = this;\\n        switch (this.states) {\\n            case 1: //就绪.\\n                _loger__WEBPACK_IMPORTED_MODULE_1__.default.log(\\\"no Err please check code.\\\");\\n                break;\\n            case 2: //占用中.\\n                _loger__WEBPACK_IMPORTED_MODULE_1__.default.log(this.name + ' is on using. try reboot.');\\n                setTimeout(function () {\\n                    _this.cancel();\\n                }, 0);\\n            default:\\n                _loger__WEBPACK_IMPORTED_MODULE_1__.default.log(\\\"unknowStates at rebooting.\\\" + this.name);\\n                break;\\n        }\\n    };\\n    Module.prototype.reinit = function () {\\n        var _this = this;\\n        console.log(\\\"reiniting\\\");\\n        var initpro = new Promise(function (resolve, reject) {\\n            _this.init(1);\\n        });\\n        initpro.then(function (resolve) {\\n            var o = {\\n                from: _this.name,\\n                to: \\\"main\\\",\\n                data: \\\"reboot\\\",\\n            };\\n            _this.emit(\\\"output\\\", o);\\n            console.log(\\\"重启成功!\\\");\\n        });\\n        initpro.catch(function (e) {\\n            _loger__WEBPACK_IMPORTED_MODULE_1__.default.error(e, \\\"5\\\", _this, \\\"01\\\", \\\"重启失败放弃吧少年\\\");\\n        });\\n    };\\n    return Module;\\n}(events__WEBPACK_IMPORTED_MODULE_0__.EventEmitter));\\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Module);\\n\\n\\n//# sourceURL=webpack://@rongcloud/rcliveroomlib/./src/structure/modules.ts?\");\n\n/***/ })\n\n/******/ \t});\n/************************************************************************/\n/******/ \t// The module cache\n/******/ \tvar __webpack_module_cache__ = {};\n/******/ \t\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/ \t\t// Check if module is in cache\n/******/ \t\tvar cachedModule = __webpack_module_cache__[moduleId];\n/******/ \t\tif (cachedModule !== undefined) {\n/******/ \t\t\treturn cachedModule.exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\t\t// no module.id needed\n/******/ \t\t\t// no module.loaded needed\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/ \t\n/******/ \t\t// Execute the module function\n/******/ \t\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n/******/ \t\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/ \t\n/************************************************************************/\n/******/ \t/* webpack/runtime/compat get default export */\n/******/ \t(() => {\n/******/ \t\t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t\t__webpack_require__.n = (module) => {\n/******/ \t\t\tvar getter = module && module.__esModule ?\n/******/ \t\t\t\t() => (module['default']) :\n/******/ \t\t\t\t() => (module);\n/******/ \t\t\t__webpack_require__.d(getter, { a: getter });\n/******/ \t\t\treturn getter;\n/******/ \t\t};\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/define property getters */\n/******/ \t(() => {\n/******/ \t\t// define getter functions for harmony exports\n/******/ \t\t__webpack_require__.d = (exports, definition) => {\n/******/ \t\t\tfor(var key in definition) {\n/******/ \t\t\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n/******/ \t\t\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n/******/ \t\t\t\t}\n/******/ \t\t\t}\n/******/ \t\t};\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/hasOwnProperty shorthand */\n/******/ \t(() => {\n/******/ \t\t__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/make namespace object */\n/******/ \t(() => {\n/******/ \t\t// define __esModule on exports\n/******/ \t\t__webpack_require__.r = (exports) => {\n/******/ \t\t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t\t}\n/******/ \t\t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t\t};\n/******/ \t})();\n/******/ \t\n/************************************************************************/\n/******/ \t\n/******/ \t// startup\n/******/ \t// Load entry module and return exports\n/******/ \t// This entry module can't be inlined because the eval devtool is used.\n/******/ \tvar __webpack_exports__ = __webpack_require__(\"./src/index.ts\");\n/******/ \t\n/******/ \treturn __webpack_exports__;\n/******/ })()\n;\n});"]}]}