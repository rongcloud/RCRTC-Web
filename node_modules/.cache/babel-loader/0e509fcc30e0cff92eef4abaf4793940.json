{"remainingRequest":"/Users/libin/Desktop/Gwork/rcrtc-web/node_modules/babel-loader/lib/index.js!/Users/libin/Desktop/Gwork/rcrtc-web/node_modules/eslint-loader/index.js??ref--13-0!/Users/libin/Desktop/Gwork/rcvoiceroomlib-web/dist/main.js","dependencies":[{"path":"/Users/libin/Desktop/Gwork/rcvoiceroomlib-web/dist/main.js","mtime":1648092801968},{"path":"/Users/libin/Desktop/Gwork/rcrtc-web/babel.config.js","mtime":1635324574352},{"path":"/Users/libin/Desktop/Gwork/rcrtc-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/libin/Desktop/Gwork/rcrtc-web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/libin/Desktop/Gwork/rcrtc-web/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF90eXBlb2Y9cmVxdWlyZSgiL1VzZXJzL2xpYmluL0Rlc2t0b3AvR3dvcmsvcmNydGMtd2ViL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL3R5cGVvZiIpLmRlZmF1bHQ7cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5qcyIpO3JlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuZGVzY3JpcHRpb24uanMiKTtyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyIpO3JlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wudG8tc3RyaW5nLXRhZy5qcyIpO3JlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5qc29uLnRvLXN0cmluZy10YWcuanMiKTtyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMubWF0aC50by1zdHJpbmctdGFnLmpzIik7LyoKICogQVRURU5USU9OOiBUaGUgImV2YWwiIGRldnRvb2wgaGFzIGJlZW4gdXNlZCAobWF5YmUgYnkgZGVmYXVsdCBpbiBtb2RlOiAiZGV2ZWxvcG1lbnQiKS4KICogVGhpcyBkZXZ0b29sIGlzIG5laXRoZXIgbWFkZSBmb3IgcHJvZHVjdGlvbiBub3IgZm9yIHJlYWRhYmxlIG91dHB1dCBmaWxlcy4KICogSXQgdXNlcyAiZXZhbCgpIiBjYWxscyB0byBjcmVhdGUgYSBzZXBhcmF0ZSBzb3VyY2UgZmlsZSBpbiB0aGUgYnJvd3NlciBkZXZ0b29scy4KICogSWYgeW91IGFyZSB0cnlpbmcgdG8gcmVhZCB0aGUgb3V0cHV0IGZpbGUsIHNlbGVjdCBhIGRpZmZlcmVudCBkZXZ0b29sIChodHRwczovL3dlYnBhY2suanMub3JnL2NvbmZpZ3VyYXRpb24vZGV2dG9vbC8pCiAqIG9yIGRpc2FibGUgdGhlIGRlZmF1bHQgZGV2dG9vbCB3aXRoICJkZXZ0b29sOiBmYWxzZSIuCiAqIElmIHlvdSBhcmUgbG9va2luZyBmb3IgcHJvZHVjdGlvbi1yZWFkeSBvdXRwdXQgZmlsZXMsIHNlZSBtb2RlOiAicHJvZHVjdGlvbiIgKGh0dHBzOi8vd2VicGFjay5qcy5vcmcvY29uZmlndXJhdGlvbi9tb2RlLykuCiAqLyhmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LGZhY3Rvcnkpe2lmKCh0eXBlb2YgZXhwb3J0cz09PSJ1bmRlZmluZWQiPyJ1bmRlZmluZWQiOl90eXBlb2YoZXhwb3J0cykpPT09J29iamVjdCcmJih0eXBlb2YgbW9kdWxlPT09InVuZGVmaW5lZCI/InVuZGVmaW5lZCI6X3R5cGVvZihtb2R1bGUpKT09PSdvYmplY3QnKW1vZHVsZS5leHBvcnRzPWZhY3RvcnkoKTtlbHNlIGlmKHR5cGVvZiBkZWZpbmU9PT0nZnVuY3Rpb24nJiZkZWZpbmUuYW1kKWRlZmluZShbXSxmYWN0b3J5KTtlbHNle3ZhciBhPWZhY3RvcnkoKTtmb3IodmFyIGkgaW4gYSl7KCh0eXBlb2YgZXhwb3J0cz09PSJ1bmRlZmluZWQiPyJ1bmRlZmluZWQiOl90eXBlb2YoZXhwb3J0cykpPT09J29iamVjdCc/ZXhwb3J0czpyb290KVtpXT1hW2ldO319fSkoc2VsZixmdW5jdGlvbigpe3JldHVybigvKioqKioqL2Z1bmN0aW9uKCl7Ly8gd2VicGFja0Jvb3RzdHJhcAovKioqKioqLyJ1c2Ugc3RyaWN0IjsvKioqKioqL3ZhciBfX3dlYnBhY2tfbW9kdWxlc19fPXsvKioqLyIuL25vZGVfbW9kdWxlcy9Acm9uZ2Nsb3VkL2VuZ2luZS9kaXN0L2luZGV4LmVzbS5qcyI6LyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXAogICEqKiogLi9ub2RlX21vZHVsZXMvQHJvbmdjbG91ZC9lbmdpbmUvZGlzdC9pbmRleC5lc20uanMgKioqIQogIFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLyAvKioqL2Z1bmN0aW9uIG5vZGVfbW9kdWxlc1JvbmdjbG91ZEVuZ2luZURpc3RJbmRleEVzbUpzKF9fdW51c2VkX3dlYnBhY2tfbW9kdWxlLF9fd2VicGFja19leHBvcnRzX18sX193ZWJwYWNrX3JlcXVpcmVfXyl7ZXZhbCgiX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIHtcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJBRW5naW5lXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHZyKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJBTmF2aVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBtciksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiQVBJQ29udGV4dFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBpcyksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiQXBwU3RvcmFnZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBSKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJBc3NlcnRSdWxlc1wiOiAoKSA9PiAoLyogYmluZGluZyAqLyBIZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiQ09OTkVDVElPTl9UWVBFXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHQpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIkNQUF9QUk9UT0NBTF9NU0dUWVBFX09QVElPTlwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBtKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJDYWxsTGliTXNnVHlwZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBxZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiQ2hhdHJvb21FbnRyeVR5cGVcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gVWUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIkNoYXRyb29tTWVtYmVyQ2hhbmdlVHlwZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBQZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiQ29tZXRDaGFubmVsXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHlyKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJDb25uZWN0UmVzdWx0Q29kZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBUZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiQ29ubmVjdGlvblN0YXR1c1wiOiAoKSA9PiAoLyogYmluZGluZyAqLyBJZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiQ29udmVyc2F0aW9uVHlwZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBqKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJEZWxheVRpbWVyXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIEV0KSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJFcnJvckNvZGVcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gRWUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIkV2ZW50RW1pdHRlclwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBnZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiRmlsZVR5cGVcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gVyksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiSHR0cE1ldGhvZFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBwciksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiSU1fQ09NRVRfUFVMTE1TR19USU1FT1VUXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHkpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIklNX1BJTkdfSU5URVJWQUxfVElNRVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBkKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJJTV9QSU5HX01JTl9USU1FT1VUXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHApLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIklNX1BJTkdfVElNRU9VVFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBmKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJJTV9TSUdOQUxfVElNRU9VVFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBsKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJMaXZlUm9sZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBrZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiTGl2ZVR5cGVcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gVmUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIkxvZ0xldmVsXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIEEpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIkxvZ1R5cGVcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gVSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiTG9nZ2VyXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIGZlKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJNQVhfTUVTU0FHRV9DT05URU5UX0JZVEVTXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIF8pLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIk1JTklfQ09NRVRfQ09OTkVDVF9VUklTXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIGgpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIk1JTklfU09DS0VUX0NPTk5FQ1RfVVJJU1wiOiAoKSA9PiAoLyogYmluZGluZyAqLyBjKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJNZW50aW9uZWRUeXBlXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHdlKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJNZXNzYWdlQmxvY2tUeXBlXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHhlKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJNZXNzYWdlRGlyZWN0aW9uXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHllKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJNZXNzYWdlVHlwZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBSZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiTkFWSV9DQUNIRV9EVVJBVElPTlwiOiAoKSA9PiAoLyogYmluZGluZyAqLyByKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJOQVZJX1JFUV9USU1FT1VUXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHMpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIk5vdGlmaWNhdGlvblN0YXR1c1wiOiAoKSA9PiAoLyogYmluZGluZyAqLyBOZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiUElOR19SRVFfVElNRU9VVFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBvKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJQVUJMSUNfQ0xPVURfTkFWSV9VUklTXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIlBsdWdpbkNvbnRleHRcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gV3IpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIlJDQXNzZXJ0RXJyb3JcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gJGUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIlJUQ0FwaVR5cGVcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gQmUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIlJUQ0lkZW50aXR5Q2hhbmdlVHlwZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBGZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiUlRDSm9pblR5cGVcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gS2UpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIlJUQ01vZGVcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gRGUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIlJUQ1BsdWdpbkNvbnRleHRcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gSnIpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIlJlY2VpdmVkU3RhdHVzXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIGkpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIlNFTkRfTUVTU0FHRV9UWVBFX09QVElPTlwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBFKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJTVEFUVVNfTUVTU0FHRVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBJKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJTVE9SQUdFX1JPT1RfS0VZXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHYpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIlRhZ0NoYW5nZVR5cGVcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gbnMpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIlVwbG9hZE1ldGhvZFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBNZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiVmVyc2lvbk1hbmFnZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBqZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiV0VCX1NPQ0tFVF9USU1FT1VUXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIGEpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIldlYlNvY2tldENoYW5uZWxcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gX3IpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImFwcGVuZFVybFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBrKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJhc3NlcnRcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gZXQpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImNsb25lQnlKU09OXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHB0KSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJmb3JFYWNoXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIGN0KSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJmb3JtYXRDb25uZWN0UmVzcG9uc2VDb2RlXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHl0KSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJnZXRCcm93c2VyXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIF90KSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJnZXRNaW1lS2V5XCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHJ0KSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJnZXRVcGxvYWRGaWxlTmFtZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBpdCksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiaW5kZXhPZlwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBsdCksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiaXNBcnJheVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBYKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJpc0FycmF5QnVmZmVyXCI6ICgpID0+ICgvKiBiaW5kaW5nICovICQpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImlzQm9vbGVhblwiOiAoKSA9PiAoLyogYmluZGluZyAqLyB6KSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJpc0Z1bmN0aW9uXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIGllKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJpc0h0dHBVcmxcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gb2UpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImlzSW5PYmplY3RcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gZnQpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImlzSW5jbHVkZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBkdCksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiaXNOdWxsXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHNlKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJpc051bWJlclwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBaKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJpc09iamVjdFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBuZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiaXNTdHJpbmdcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gSiksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiaXNVbmRlZmluZWRcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gcmUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImlzVmFsaWRDaHJtRW50cnlLZXlcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gYXQpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImlzVmFsaWRDaHJtRW50cnlWYWx1ZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyB1dCksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiaXNWYWxpZENvbnZlcnNhdGlvblR5cGVcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gdWUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImlzVmFsaWRGaWxlVHlwZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBjZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwibWFwXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIGh0KSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJub3RFbXB0eUFycmF5XCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHRlKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJub3RFbXB0eU9iamVjdFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBhZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwibm90RW1wdHlTdHJpbmdcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gZWUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcInB1c2hDb25maWdzVG9KU09OXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHN0KSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJwdXNoSlNPTlRvQ29uZmlnc1wiOiAoKSA9PiAoLyogYmluZGluZyAqLyBvdCksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwidG9kb1wiOiAoKSA9PiAoLyogYmluZGluZyAqLyBQKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJ1c2luZ0NwcEVuZ2luZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBndCksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwidmFsaWRhdGVcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gdHQpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcInZlcnNpb25cIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gcnMpXG4vKiBoYXJtb255IGV4cG9ydCAqLyB9KTtcbnZhciBlOyFmdW5jdGlvbihlKXtlW2UuUkVBRD0xXT1cIlJFQURcIixlW2UuTElTVEVORUQ9Ml09XCJMSVNURU5FRFwiLGVbZS5ET1dOTE9BREVEPTRdPVwiRE9XTkxPQURFRFwiLGVbZS5SRVRSSUVWRUQ9OF09XCJSRVRSSUVWRURcIixlW2UuVU5SRUFEPTBdPVwiVU5SRUFEXCJ9KGV8fChlPXt9KSk7dmFyIHQsbixpPWUscj03MmU1LHM9MWU0LG89NWUzLGE9NWUzLHU9W1wiaHR0cHM6Ly9uYXYuY24ucm9uZ2h1Yi5jb21cIixcImh0dHBzOi8vbmF2Mi1jbi5yb25naHViLmNvbVwiXSxjPVtcIndzcHJveHkuY24ucm9uZ2h1Yi5jb21cIixcIndzYXAtY24ucm9uZ2h1Yi5jb21cIl0saD1bXCJjb21ldHByb3h5LWNuLnJvbmdodWIuY29tXCIsXCJtaW5pLWNuLnJvbmdodWIuY29tXCJdLGw9M2U0LGQ9MTVlMyxmPTE1ZTMscD0yZTMsXz0xMzEwNzIseT00NWUzLHY9XCJSQ1Y0LVwiLEU9e1wiUkM6VHh0TXNnXCI6e2lzQ291bnRlZDohMCxpc1BlcnNpdGVkOiEwfSxcIlJDOkltZ01zZ1wiOntpc0NvdW50ZWQ6ITAsaXNQZXJzaXRlZDohMH0sXCJSQzpWY01zZ1wiOntpc0NvdW50ZWQ6ITAsaXNQZXJzaXRlZDohMH0sXCJSQzpJbWdUZXh0TXNnXCI6e2lzQ291bnRlZDohMCxpc1BlcnNpdGVkOiEwfSxcIlJDOkZpbGVNc2dcIjp7aXNDb3VudGVkOiEwLGlzUGVyc2l0ZWQ6ITB9LFwiUkM6SFFWQ01zZ1wiOntpc0NvdW50ZWQ6ITAsaXNQZXJzaXRlZDohMH0sXCJSQzpMQlNNc2dcIjp7aXNDb3VudGVkOiEwLGlzUGVyc2l0ZWQ6ITB9LFwiUkM6UFNJbWdUeHRNc2dcIjp7aXNDb3VudGVkOiEwLGlzUGVyc2l0ZWQ6ITB9LFwiUkM6UFNNdWx0aUltZ1R4dE1zZ1wiOntpc0NvdW50ZWQ6ITAsaXNQZXJzaXRlZDohMH0sXCJSQ0pybWY6UnBNc2dcIjp7aXNDb3VudGVkOiEwLGlzUGVyc2l0ZWQ6ITB9LFwiUkNKcm1mOlJwT3BlbmRNc2dcIjp7aXNDb3VudGVkOiEwLGlzUGVyc2l0ZWQ6ITB9LFwiUkM6Q29tYmluZU1zZ1wiOntpc0NvdW50ZWQ6ITAsaXNQZXJzaXRlZDohMH0sXCJSQzpSZWZlcmVuY2VNc2dcIjp7aXNDb3VudGVkOiEwLGlzUGVyc2l0ZWQ6ITB9LFwiUkM6U2lnaHRNc2dcIjp7aXNDb3VudGVkOiEwLGlzUGVyc2l0ZWQ6ITB9LFwiUkM6R0lGTXNnXCI6e2lzQ291bnRlZDohMCxpc1BlcnNpdGVkOiEwfSxcIlJDOkluZm9OdGZcIjp7aXNDb3VudGVkOiExLGlzUGVyc2l0ZWQ6ITB9LFwiUkM6Q29udGFjdE50ZlwiOntpc0NvdW50ZWQ6ITEsaXNQZXJzaXRlZDohMH0sXCJSQzpQcm9maWxlTnRmXCI6e2lzQ291bnRlZDohMSxpc1BlcnNpdGVkOiEwfSxcIlJDOkNtZE50ZlwiOntpc0NvdW50ZWQ6ITEsaXNQZXJzaXRlZDohMH0sXCJSQzpHcnBOdGZcIjp7aXNDb3VudGVkOiExLGlzUGVyc2l0ZWQ6ITB9LFwiUkM6UmNDbWRcIjp7aXNDb3VudGVkOiExLGlzUGVyc2l0ZWQ6ITB9LFwiUkM6Q21kTXNnXCI6e2lzQ291bnRlZDohMSxpc1BlcnNpdGVkOiExfSxcIlJDOlR5cFN0c1wiOntpc0NvdW50ZWQ6ITEsaXNQZXJzaXRlZDohMX0sXCJSQzpQU0NtZFwiOntpc0NvdW50ZWQ6ITEsaXNQZXJzaXRlZDohMX0sXCJSQzpTUlNNc2dcIjp7aXNDb3VudGVkOiExLGlzUGVyc2l0ZWQ6ITF9LFwiUkM6UlJSZXFNc2dcIjp7aXNDb3VudGVkOiExLGlzUGVyc2l0ZWQ6ITF9LFwiUkM6UlJSc3BNc2dcIjp7aXNDb3VudGVkOiExLGlzUGVyc2l0ZWQ6ITF9LFwiUkM6Q3NDaGFSXCI6e2lzQ291bnRlZDohMSxpc1BlcnNpdGVkOiExfSxcIlJDOkNTQ2hhXCI6e2lzQ291bnRlZDohMSxpc1BlcnNpdGVkOiExfSxcIlJDOkNzRXZhXCI6e2lzQ291bnRlZDohMSxpc1BlcnNpdGVkOiExfSxcIlJDOkNzQ29udGFjdFwiOntpc0NvdW50ZWQ6ITEsaXNQZXJzaXRlZDohMX0sXCJSQzpDc0hzXCI6e2lzQ291bnRlZDohMSxpc1BlcnNpdGVkOiExfSxcIlJDOkNzSHNSXCI6e2lzQ291bnRlZDohMSxpc1BlcnNpdGVkOiExfSxcIlJDOkNzU3BcIjp7aXNDb3VudGVkOiExLGlzUGVyc2l0ZWQ6ITF9LFwiUkM6Q3NFbmRcIjp7aXNDb3VudGVkOiExLGlzUGVyc2l0ZWQ6ITF9LFwiUkM6Q3NVcGRhdGVcIjp7aXNDb3VudGVkOiExLGlzUGVyc2l0ZWQ6ITF9LFwiUkM6UmVhZE50ZlwiOntpc0NvdW50ZWQ6ITEsaXNQZXJzaXRlZDohMX0sXCJSQzpjaHJtS1ZOb3RpTXNnXCI6e2lzQ291bnRlZDohMSxpc1BlcnNpdGVkOiExfSxcIlJDOlZDQWNjZXB0XCI6e2lzQ291bnRlZDohMSxpc1BlcnNpdGVkOiExfSxcIlJDOlZDUmluZ2luZ1wiOntpc0NvdW50ZWQ6ITEsaXNQZXJzaXRlZDohMX0sXCJSQzpWQ1N1bW1hcnlcIjp7aXNDb3VudGVkOiExLGlzUGVyc2l0ZWQ6ITF9LFwiUkM6VkNIYW5ndXBcIjp7aXNDb3VudGVkOiExLGlzUGVyc2l0ZWQ6ITF9LFwiUkM6VkNJbnZpdGVcIjp7aXNDb3VudGVkOiExLGlzUGVyc2l0ZWQ6ITF9LFwiUkM6VkNNb2RpZnlNZWRpYVwiOntpc0NvdW50ZWQ6ITEsaXNQZXJzaXRlZDohMX0sXCJSQzpWQ01vZGlmeU1lbVwiOntpc0NvdW50ZWQ6ITEsaXNQZXJzaXRlZDohMX0sXCJSQzpNc2dFeE1zZ1wiOntpc0NvdW50ZWQ6ITEsaXNQZXJzaXRlZDohMX0sXCJSQzpSUk1zZ1wiOntpc0NvdW50ZWQ6ITEsaXNQZXJzaXRlZDohMX0sXCJSQzpMb2dDbWRNc2dcIjp7aXNDb3VudGVkOiExLGlzUGVyc2l0ZWQ6ITF9LFwiUkM6SW50ZXJjZXB0TXNnXCI6e2lzQ291bnRlZDohMSxpc1BlcnNpdGVkOiExfX0sbT17XCJSQzpEaXpOdGZcIjp7aXNDb3VudGVkOiExLGlzUGVyc2l0ZWQ6ITF9fSxJPVtcIlJDOlR5cFN0c1wiLFwiUkM6SW50ZXJjZXB0TXNnXCJdOyFmdW5jdGlvbihlKXtlLldFQlNPQ0tFVD1cIndlYnNvY2tldFwiLGUuQ09NRVQ9XCJjb21ldFwifSh0fHwodD17fSkpO3ZhciBUPWZ1bmN0aW9uKGUpe3JldHVybiBufHwobj17c2V0OmZ1bmN0aW9uKHQsbil7ZS5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSh0LEpTT04uc3RyaW5naWZ5KG4pKX0sZ2V0OmZ1bmN0aW9uKHQpe3ZhciBuO3RyeXtuPUpTT04ucGFyc2UoZS5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSh0KSl9Y2F0Y2goZSl7bj1udWxsfXJldHVybiBufSxyZW1vdmU6ZnVuY3Rpb24odCl7cmV0dXJuIGUubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0odCl9LGdldEtleXM6ZnVuY3Rpb24oKXt2YXIgdD1bXTtmb3IodmFyIG4gaW4gZS5sb2NhbFN0b3JhZ2UpdC5wdXNoKG4pO3JldHVybiB0fX0pLG59LEM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuX2NhY2hlcz17fSxlJiYodGhpcy5fY2FjaGVzPWUpfXJldHVybiBlLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24oZSx0KXt0aGlzLl9jYWNoZXNbZV09dH0sZS5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ2V0KGUpO3JldHVybiBkZWxldGUgdGhpcy5fY2FjaGVzW2VdLHR9LGUucHJvdG90eXBlLmdldD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fY2FjaGVzW2VdfSxlLnByb3RvdHlwZS5nZXRLZXlzPWZ1bmN0aW9uKCl7dmFyIGU9W107Zm9yKHZhciB0IGluIHRoaXMuX2NhY2hlcyllLnB1c2godCk7cmV0dXJuIGV9LGV9KCksUj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt2YXIgbixpPXQ/XCJSQ1Y0LVwiK3Q6XCJSQ1Y0LVwiO3RoaXMuX3Jvb3RTdG9yYWdlPVQoZSk7dmFyIHI9dGhpcy5fcm9vdFN0b3JhZ2UuZ2V0KGkpfHx7fTt0aGlzLl9jYWNoZT1uZXcgQygoKG49e30pW2ldPXIsbikpLHRoaXMuX3N0b3JhZ2VLZXk9aX1yZXR1cm4gZS5wcm90b3R5cGUuX2dldD1mdW5jdGlvbigpe3ZhciBlPXRoaXMuX3N0b3JhZ2VLZXk7cmV0dXJuIHRoaXMuX2NhY2hlLmdldChlKXx8e319LGUucHJvdG90eXBlLl9zZXQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fc3RvcmFnZUtleTtlPWV8fHt9LHRoaXMuX2NhY2hlLnNldCh0LGUpLHRoaXMuX3Jvb3RTdG9yYWdlLnNldCh0LGUpfSxlLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLl9nZXQoKTtuW2VdPXQsdGhpcy5fc2V0KG4pfSxlLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fZ2V0KCk7ZGVsZXRlIHRbZV0sdGhpcy5fc2V0KHQpfSxlLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3ZhciBlPXRoaXMuX3N0b3JhZ2VLZXk7dGhpcy5fcm9vdFN0b3JhZ2UucmVtb3ZlKGUpLHRoaXMuX2NhY2hlLnJlbW92ZShlKX0sZS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9nZXQoKVtlXX0sZS5wcm90b3R5cGUuZ2V0S2V5cz1mdW5jdGlvbigpe3ZhciBlPXRoaXMuX2dldCgpLHQ9W107Zm9yKHZhciBuIGluIGUpdC5wdXNoKG4pO3JldHVybiB0fSxlLnByb3RvdHlwZS5nZXRWYWx1ZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0KCl8fHt9fSxlfSgpLFM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4oUz1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG4gaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxuKSYmKGVbbl09dFtuXSl9KShlLHQpfTtmdW5jdGlvbiBOKGUsdCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIrU3RyaW5nKHQpK1wiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9ZX1TKGUsdCksZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KToobi5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IG4pfXZhciBPPWZ1bmN0aW9uKCl7cmV0dXJuKE89T2JqZWN0LmFzc2lnbnx8ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG49MSxpPWFyZ3VtZW50cy5sZW5ndGg7bjxpO24rKylmb3IodmFyIHIgaW4gdD1hcmd1bWVudHNbbl0pT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pO3JldHVybiBlfSkuYXBwbHkodGhpcyxhcmd1bWVudHMpfTtmdW5jdGlvbiB3KGUsdCxuLGkpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKChmdW5jdGlvbihyLHMpe2Z1bmN0aW9uIG8oZSl7dHJ5e3UoaS5uZXh0KGUpKX1jYXRjaChlKXtzKGUpfX1mdW5jdGlvbiBhKGUpe3RyeXt1KGkudGhyb3coZSkpfWNhdGNoKGUpe3MoZSl9fWZ1bmN0aW9uIHUoZSl7dmFyIHQ7ZS5kb25lP3IoZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygbj90Om5ldyBuKChmdW5jdGlvbihlKXtlKHQpfSkpKS50aGVuKG8sYSl9dSgoaT1pLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSkpfWZ1bmN0aW9uIGIoZSx0KXt2YXIgbixpLHIscyxvPXtsYWJlbDowLHNlbnQ6ZnVuY3Rpb24oKXtpZigxJnJbMF0pdGhyb3cgclsxXTtyZXR1cm4gclsxXX0sdHJ5czpbXSxvcHM6W119O3JldHVybiBzPXtuZXh0OmEoMCksdGhyb3c6YSgxKSxyZXR1cm46YSgyKX0sXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiYoc1tTeW1ib2wuaXRlcmF0b3JdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KSxzO2Z1bmN0aW9uIGEocyl7cmV0dXJuIGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihzKXtpZihuKXRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO2Zvcig7bzspdHJ5e2lmKG49MSxpJiYocj0yJnNbMF0/aS5yZXR1cm46c1swXT9pLnRocm93fHwoKHI9aS5yZXR1cm4pJiZyLmNhbGwoaSksMCk6aS5uZXh0KSYmIShyPXIuY2FsbChpLHNbMV0pKS5kb25lKXJldHVybiByO3N3aXRjaChpPTAsciYmKHM9WzImc1swXSxyLnZhbHVlXSksc1swXSl7Y2FzZSAwOmNhc2UgMTpyPXM7YnJlYWs7Y2FzZSA0OnJldHVybiBvLmxhYmVsKysse3ZhbHVlOnNbMV0sZG9uZTohMX07Y2FzZSA1Om8ubGFiZWwrKyxpPXNbMV0scz1bMF07Y29udGludWU7Y2FzZSA3OnM9by5vcHMucG9wKCksby50cnlzLnBvcCgpO2NvbnRpbnVlO2RlZmF1bHQ6aWYoIShyPW8udHJ5cywocj1yLmxlbmd0aD4wJiZyW3IubGVuZ3RoLTFdKXx8NiE9PXNbMF0mJjIhPT1zWzBdKSl7bz0wO2NvbnRpbnVlfWlmKDM9PT1zWzBdJiYoIXJ8fHNbMV0+clswXSYmc1sxXTxyWzNdKSl7by5sYWJlbD1zWzFdO2JyZWFrfWlmKDY9PT1zWzBdJiZvLmxhYmVsPHJbMV0pe28ubGFiZWw9clsxXSxyPXM7YnJlYWt9aWYociYmby5sYWJlbDxyWzJdKXtvLmxhYmVsPXJbMl0sby5vcHMucHVzaChzKTticmVha31yWzJdJiZvLm9wcy5wb3AoKSxvLnRyeXMucG9wKCk7Y29udGludWV9cz10LmNhbGwoZSxvKX1jYXRjaChlKXtzPVs2LGVdLGk9MH1maW5hbGx5e249cj0wfWlmKDUmc1swXSl0aHJvdyBzWzFdO3JldHVybnt2YWx1ZTpzWzBdP3NbMV06dm9pZCAwLGRvbmU6ITB9fShbcyxhXSl9fX1mdW5jdGlvbiBNKGUsdCl7Zm9yKHZhciBuPTAsaT10Lmxlbmd0aCxyPWUubGVuZ3RoO248aTtuKysscisrKWVbcl09dFtuXTtyZXR1cm4gZX12YXIgQSxVLEw9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0KXtyZXR1cm4gZS5jYWxsKHRoaXMsXCJUT0RPID0+IFwiK3QpfHx0aGlzfXJldHVybiBOKHQsZSksdH0oRXJyb3IpLFA9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBMKGUpfSxEPWZ1bmN0aW9uKGUsdCxuKXtpZih2b2lkIDA9PT10fHx2b2lkIDA9PT1uKXJldHVybiBlLnRvVXBwZXJDYXNlKCk7dmFyIGk9ZS5zbGljZSh0LG4pO3JldHVybiBlPWUucmVwbGFjZShpLChmdW5jdGlvbihlKXtyZXR1cm4gZS50b1VwcGVyQ2FzZSgpfSkpfSxWPWZ1bmN0aW9uKGUsdCl7dm9pZCAwPT09dCYmKHQ9XCJ1dGYtOFwiKTt2YXIgbixpPTA7aWYoXCJ1dGYtMTZcIj09PXQpZm9yKHZhciByPTAscz1lLmxlbmd0aDtyPHM7cisrKWkrPShuPWUuY2hhckNvZGVBdChyKSk8PTY1NTM1PzI6NDtlbHNlIGZvcihyPTAscz1lLmxlbmd0aDtyPHM7cisrKWkrPShuPWUuY2hhckNvZGVBdChyKSk8MTI3PzE6bjw9MjA0Nz8yOm48PTY1NTM1PzM6NDtyZXR1cm4gaX0saz1mdW5jdGlvbihlLHQpe2lmKGU9ZS5yZXBsYWNlKC9cXD8kLyxcIlwiKSwhdClyZXR1cm4gZTt2YXIgbj1PYmplY3Qua2V5cyh0KS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlK1wiPVwiK3RbZV19KSkuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4hIWV9KSk7cmV0dXJuIG4ubGVuZ3RoP1tlLG4uam9pbihcIiZcIildLmpvaW4oXCI/XCIpOmV9LHg9ZnVuY3Rpb24oZSl7cmV0dXJuIGUubWF0Y2goL1xcZCsoXFwuXFxkKyl7Mn0vKVswXX07IWZ1bmN0aW9uKGUpe2VbZS5MT0c9MF09XCJMT0dcIixlW2UuREVCVUc9MF09XCJERUJVR1wiLGVbZS5JTkZPPTFdPVwiSU5GT1wiLGVbZS5XQVJOPTJdPVwiV0FSTlwiLGVbZS5FUlJPUj0zXT1cIkVSUk9SXCIsZVtlLkZBVEFMPTRdPVwiRkFUQUxcIixlW2UuTk9ORT0xZTNdPVwiTk9ORVwifShBfHwoQT17fSkpLGZ1bmN0aW9uKGUpe2UuSU09XCJJTVwiLGUuUlRDPVwiUlRDXCJ9KFV8fChVPXt9KSk7dmFyIEI9XCJSQ19Mb2dzXCI7ZnVuY3Rpb24gRihlKXt2YXIgdD1lLnRhcmdldC5yZXN1bHQ7MT09PWUub2xkVmVyc2lvbiYmdC5kZWxldGVPYmplY3RTdG9yZShCKSxmdW5jdGlvbihlLHQsbil7dmFyIGk7aWYoIWUub2JqZWN0U3RvcmVOYW1lcy5jb250YWlucyh0KSl7dmFyIHI9Tyh7fSxuLm9iamVjdFN0b3JlUGFyYW1zKTtpPWUuY3JlYXRlT2JqZWN0U3RvcmUodCxyKSxuLmluZGV4cyYmbi5pbmRleHMubGVuZ3RoPjAmJm4uaW5kZXhzLmZvckVhY2goKGZ1bmN0aW9uKGUpe2kuY3JlYXRlSW5kZXgoZS5pbmRleE5hbWUsZS5rZXkse3VuaXF1ZTplLnVuaXF1ZX0pfSkpfX0odCxCLHtpbmRleHM6W3tpbmRleE5hbWU6XCJ0aW1lXCIsa2V5OlwidGltZVwiLHVuaXF1ZTohMX1dLG9iamVjdFN0b3JlUGFyYW1zOnthdXRvSW5jcmVtZW50OiEwfX0pfXZhciBLLHE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBlLmluaXQ9ZnVuY3Rpb24oKXtpZihcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiZ3aW5kb3cmJndpbmRvdy5pbmRleGVkREIpe3ZhciB0PXdpbmRvdy5pbmRleGVkREIub3BlbihcIlJDX0VOR0lORV9EQlwiLDIpO3Qub25lcnJvcj1mdW5jdGlvbihlKXtjb25zb2xlLndhcm4oXCJvcGVuIGluZGV4REIgcmVxdWVzdCBmYWlsZWQgXCIrZS50YXJnZXQuZXJyb3IpfSx0Lm9uc3VjY2Vzcz1mdW5jdGlvbih0KXtlLl9kYj10LnRhcmdldC5yZXN1bHQsZS5fZGImJihlLl9kYi5vbmNsb3NlPWZ1bmN0aW9uKHQpe3ZhciBuO2NvbnNvbGUud2FybihcIlRoZSBkYXRhYmFzZSBcIisobnVsbD09PShuPWUuX2RiKXx8dm9pZCAwPT09bj92b2lkIDA6bi5uYW1lKStcIiBoYXMgdW5leHBlY3RlZGx5IGNsb3NlZC5cIix0KSxlLl9kYj1udWxsLGUuX2luc3RhbmNlPW51bGx9LGUuX2RiLm9uZXJyb3I9ZnVuY3Rpb24odCl7dmFyIG47Y29uc29sZS53YXJuKFwiVGhlIGRhdGFiYXNlIFwiKyhudWxsPT09KG49ZS5fZGIpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLm5hbWUpK1wiIGhhcyBvcGVuaW5nIGVycm9yLlwiLHQpLGUuX2RiPW51bGwsZS5faW5zdGFuY2U9bnVsbH0sZS5fZGIub25hYm9ydD1mdW5jdGlvbih0KXt2YXIgbjtjb25zb2xlLndhcm4oXCJUaGUgZGF0YWJhc2UgXCIrKG51bGw9PT0obj1lLl9kYil8fHZvaWQgMD09PW4/dm9pZCAwOm4ubmFtZSkrXCIgaGFzIG9wZW5pbmcgYWJvcnRlZC5cIix0KSxlLl9kYj1udWxsLGUuX2luc3RhbmNlPW51bGx9KSxlLl9pbnN0YW5jZT1uZXcgZX0sdC5vbnVwZ3JhZGVuZWVkZWQ9ZnVuY3Rpb24odCl7ZS5fZGI9dC50YXJnZXQucmVzdWx0LEYodCl9fWVsc2UgY29uc29sZS5kZWJ1ZyhcIkluZGV4REIgaXMgbm90IGN1cnJlbnRseSBzdXBwb3J0ZWQgaW4gdGhlIGVudmlyb25tZW50IVwiKX0sZS5nZXRJbnN0YW5jZT1mdW5jdGlvbigpe3JldHVybiBlLl9pbnN0YW5jZX0sZS5wcm90b3R5cGUuYWRkTGlzdD1mdW5jdGlvbih0LG4pe3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24oaSl7aWYoZS5fZGIpe3ZhciByPWUuX2RiLnRyYW5zYWN0aW9uKFt0XSxcInJlYWR3cml0ZVwiKSxzPXIub2JqZWN0U3RvcmUodCk7bi5mb3JFYWNoKChmdW5jdGlvbihlKXtudWxsPT1zfHxzLmFkZChlKX0pKSxyLm9uY29tcGxldGU9ZnVuY3Rpb24oZSl7aSghMCl9LHIub25lcnJvcj1mdW5jdGlvbihlKXtpKCExKX19ZWxzZSBpKCExKX0pKX0sZS5wcm90b3R5cGUuZ2V0UmFuZ2VEYXRhPWZ1bmN0aW9uKHQsbixpLHIpe3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24ocyl7aWYoZS5fZGIpe3ZhciBvPWUuX2RiLnRyYW5zYWN0aW9uKFt0XSxcInJlYWR3cml0ZVwiKS5vYmplY3RTdG9yZSh0KSxhPUlEQktleVJhbmdlLmJvdW5kKGksciksdT1vLmluZGV4KG4pLGM9W10saD11Lm9wZW5DdXJzb3IoYSk7aC5vbnN1Y2Nlc3M9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS50YXJnZXQucmVzdWx0O3Q/KGMucHVzaCh0LnZhbHVlKSx0LmNvbnRpbnVlKCkpOnMoYyl9LGgub25lcnJvcj1mdW5jdGlvbihlKXtjb25zb2xlLmVycm9yKGUpLHMoW10pfX1lbHNlIHMoW10pfSkpfSxlLnByb3RvdHlwZS5nZXRDb3VudD1mdW5jdGlvbih0LG4pe3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24obil7aWYoZS5fZGIpe3ZhciBpPWUuX2RiLnRyYW5zYWN0aW9uKFt0XSxcInJlYWRvbmx5XCIpLm9iamVjdFN0b3JlKHQpLmNvdW50KCk7aS5vbnN1Y2Nlc3M9ZnVuY3Rpb24oKXtuKGkucmVzdWx0KX0saS5vbmVycm9yPWZ1bmN0aW9uKGUpe2NvbnNvbGUuZXJyb3IoZSksbigwKX19ZWxzZSBuKDApfSkpfSxlLnByb3RvdHlwZS5yZW1vdmVGaXJzdERhdGE9ZnVuY3Rpb24odCxuLGkpe3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24obil7aWYoZS5fZGIpe3ZhciByPWUuX2RiLnRyYW5zYWN0aW9uKFt0XSxcInJlYWR3cml0ZVwiKS5vYmplY3RTdG9yZSh0KSxzPXIuZ2V0QWxsS2V5cyhJREJLZXlSYW5nZS5sb3dlckJvdW5kKDApLGkpO3Mub25zdWNjZXNzPWZ1bmN0aW9uKCl7dmFyIGU9cy5yZXN1bHQ7ZS5sZW5ndGg+MCYmKHIuZGVsZXRlKElEQktleVJhbmdlLmJvdW5kKGVbMF0sZVtlLmxlbmd0aC0xXSkpLm9uc3VjY2Vzcz1mdW5jdGlvbigpe24oITApfSl9fWVsc2UgbighMSl9KSl9LGUuX2RiPW51bGwsZX0oKSxZPWZ1bmN0aW9uKCl7cmV0dXJuXCJ4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHhcIi5yZXBsYWNlKC9beHldL2csKGZ1bmN0aW9uKGUpe3ZhciB0PTE2Kk1hdGgucmFuZG9tKCl8MDtyZXR1cm4oXCJ4XCI9PT1lP3Q6MyZ0fDgpLnRvU3RyaW5nKDE2KX0pKX0sSD1mdW5jdGlvbigpe3ZhciBlPVkoKTtpZihlPWUucmVwbGFjZSgvLS9nLFwiXCIpK1wiYVwiLChlPWZ1bmN0aW9uKGUpe3ZhciB0PVwiMDEyMzQ1Njc4OWFiY2RlZmdoaWdrbG1ub3BxcnN0dXZ3eHl6QUJDREVGR0hJR0tMTU5PUFFSU1RVVldYWVphMFwiLnNwbGl0KFwiXCIpLG49dC5sZW5ndGgrMSxpPStlLHI9W107ZG97dmFyIHM9aSVuO2k9KGktcykvbixyLnVuc2hpZnQodFtzXSl9d2hpbGUoaSk7cmV0dXJuIHIuam9pbihcIlwiKX0oZT1wYXJzZUludChlLDE2KSkpLmxlbmd0aD4yMiYmKGU9ZS5zbGljZSgwLDIyKSksZS5sZW5ndGg8MjIpZm9yKHZhciB0PTIyLWUubGVuZ3RoLG49MDtuPHQ7bisrKWUrPVwiMFwiO3JldHVybiBlfTshZnVuY3Rpb24oZSl7ZVtlLk5PTkU9MF09XCJOT05FXCIsZVtlLlBSSVZBVEU9MV09XCJQUklWQVRFXCIsZVtlLkRJU0NVU1NJT049Ml09XCJESVNDVVNTSU9OXCIsZVtlLkdST1VQPTNdPVwiR1JPVVBcIixlW2UuQ0hBVFJPT009NF09XCJDSEFUUk9PTVwiLGVbZS5DVVNUT01FUl9TRVJWSUNFPTVdPVwiQ1VTVE9NRVJfU0VSVklDRVwiLGVbZS5TWVNURU09Nl09XCJTWVNURU1cIixlW2UuQVBQX1BVQkxJQ19TRVJWSUNFPTddPVwiQVBQX1BVQkxJQ19TRVJWSUNFXCIsZVtlLlBVQkxJQ19TRVJWSUNFPThdPVwiUFVCTElDX1NFUlZJQ0VcIixlW2UuUlRDX1JPT009MTJdPVwiUlRDX1JPT01cIn0oS3x8KEs9e30pKTt2YXIgRyxqPUs7IWZ1bmN0aW9uKGUpe2VbZS5JTUFHRT0xXT1cIklNQUdFXCIsZVtlLkFVRElPPTJdPVwiQVVESU9cIixlW2UuVklERU89M109XCJWSURFT1wiLGVbZS5GSUxFPTRdPVwiRklMRVwiLGVbZS5TSUdIVD01XT1cIlNJR0hUXCIsZVtlLkNPTUJJTkVfSFRNTD02XT1cIkNPTUJJTkVfSFRNTFwifShHfHwoRz17fSkpO3ZhciBRLFc9RyxKPWZ1bmN0aW9uKGUpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBlfSx6PWZ1bmN0aW9uKGUpe3JldHVyblwiYm9vbGVhblwiPT10eXBlb2YgZX0sWj1mdW5jdGlvbihlKXtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgZSYmIWlzTmFOKGUpfSxYPWZ1bmN0aW9uKGUpe3JldHVybi0xIT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpLmluZGV4T2YoXCJBcnJheVwiKX0sJD1mdW5jdGlvbihlKXtyZXR1cm5cIltvYmplY3QgQXJyYXlCdWZmZXJdXCI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSl9LGVlPWZ1bmN0aW9uKGUpe3JldHVybiBKKGUpJiZlLmxlbmd0aD4wfSx0ZT1mdW5jdGlvbihlKXtyZXR1cm4gWChlKSYmZS5sZW5ndGg+MH0sbmU9ZnVuY3Rpb24oZSl7cmV0dXJuXCJbb2JqZWN0IE9iamVjdF1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKX0saWU9ZnVuY3Rpb24oZSl7cmV0dXJuXCJbb2JqZWN0IEZ1bmN0aW9uXVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpfSxyZT1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwPT09ZXx8XCJbb2JqZWN0IFVuZGVmaW5lZF1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKX0sc2U9ZnVuY3Rpb24oZSl7cmV0dXJuXCJbb2JqZWN0IE51bGxdXCI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSl9LG9lPWZ1bmN0aW9uKGUpe3JldHVybiBKKGUpJiYvaHR0cHM/OlxcL1xcLy8udGVzdChlKX0sYWU9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0IGluIGUpcmV0dXJuITA7cmV0dXJuITF9LHVlPWZ1bmN0aW9uKGUpe3JldHVybiBaKGUpJiZPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoaixlKX0sY2U9ZnVuY3Rpb24oZSl7cmV0dXJuIFooZSkmJk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChXLGUpfSxoZT17fTtjb25zb2xlJiYoKFE9e30pW0EuREVCVUddPWNvbnNvbGUuZGVidWcuYmluZChjb25zb2xlKSxRW0EuSU5GT109Y29uc29sZS5pbmZvLmJpbmQoY29uc29sZSksUVtBLldBUk5dPWNvbnNvbGUud2Fybi5iaW5kKGNvbnNvbGUpLFFbQS5FUlJPUl09Y29uc29sZS5lcnJvci5iaW5kKGNvbnNvbGUpLFFbQS5GQVRBTF09Y29uc29sZS5sb2cuYmluZChjb25zb2xlKSxoZT1RKTt2YXIgbGUsZGU9ZnVuY3Rpb24oZSl7cmV0dXJuIEooZSl8fFooZSl8fHJlKGUpfHx6KGUpP2U6ZSBpbnN0YW5jZW9mIEVycm9yP0pTT04uc3RyaW5naWZ5KHtuYW1lOmUubmFtZSxtZXNzYWdlOmUubWVzc2FnZSxzdGFjazplLnN0YWNrfSk6SlNPTi5zdHJpbmdpZnkoZSl9LGZlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQsbil7dGhpcy50YWc9ZSx0aGlzLnR5cGU9dCx0aGlzLmluaXRpYXRvcj1uLHRoaXMuX291dExldmVsPUEuV0FSTix0aGlzLmRlYnVnPXRoaXMubG9nLmJpbmQodGhpcyxBLkRFQlVHKSx0aGlzLmluZm89dGhpcy5sb2cuYmluZCh0aGlzLEEuSU5GTyksdGhpcy53YXJuPXRoaXMubG9nLmJpbmQodGhpcyxBLldBUk4pLHRoaXMuZXJyb3I9dGhpcy5sb2cuYmluZCh0aGlzLEEuRVJST1IpLHRoaXMuZmF0YWw9dGhpcy5sb2cuYmluZCh0aGlzLEEuRkFUQUwpfXJldHVybiBlLmluaXQ9ZnVuY3Rpb24odCl7ZS51c2VySWQ9dH0sZS5yZXNldD1mdW5jdGlvbigpe2UudXNlcklkPVwiXCJ9LGUucHJvdG90eXBlLl9kZWZhdWx0U3Rkb3V0PWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPVtdLGk9MjtpPGFyZ3VtZW50cy5sZW5ndGg7aSsrKW5baS0yXT1hcmd1bWVudHNbaV07aGVbZV0mJmhlW2VdLmFwcGx5KGhlLE0oW3QrXCI6XCJdLG4pKX0sZS5wcm90b3R5cGUuX19wdXNoTG9jYWxMb2c9ZnVuY3Rpb24odCxuLGkpe3ZhciByO3I9dGhpcy50eXBlP3RoaXMudHlwZTpbXCJSQ1JUQ0xvZ1wiLFwiUkNDYWxsXCIsXCJSQ1JUQ1wiLFwiUlRDLUFcIl0uaW5jbHVkZXModGhpcy50YWcpP1UuUlRDOlUuSU07dmFyIHM9RGF0ZS5ub3coKTtWKG4pPj0xZTMmJihuPWZ1bmN0aW9uKGUsdCxuKXtpZih2b2lkIDA9PT1uJiYobj1cInV0Zi04XCIpLCFlfHwhdClyZXR1cm5cIlwiO3ZhciBpPVwidXRmLThcIj09PW4/MzoyLHI9MCxzPTAsbz1cIlwiO2ZvcihzPTA7czxlLmxlbmd0aDtzKyspe2lmKGUuY2hhckNvZGVBdChzKT4yNTU/cis9aTpyKysscj50KXJldHVybiBvO28rPWUuY2hhckF0KHMpfXJldHVybiBlfShuLDFlMykpO3ZhciBvPUpTT04uc3RyaW5naWZ5KHttZXNzYWdlOm4sdXNlcklkOmUudXNlcklkfSkucmVwbGFjZSgvXCIvZywnXCJcIicpLGE9L15bXFx3XSstW1xcd10rLVtcXHddKz8vLnRlc3QoaSk/aToodGhpcy5pbml0aWF0b3J8fFwiTFwiKStcIi1cIitpK1wiLU9cIix1PXtzZXNzaW9uSWQ6ZS5zZXNzaW9uSWQsdGltZTpzLGxldmVsOjQtdCxjb250ZW50OmUuc2Vzc2lvbklkK1wiLFwiK0RhdGUubm93KCkrXCIsXCIrcitcIixcIisoNC10KStcIixcIithKycsXCInK28rJ1wiXFxuJyx1c2VySWQ6ZS51c2VySWR9O2UuZGF0YWJhc2VMb2dMaXN0LnB1c2godSksKGUuZGF0YWJhc2VMb2dMaXN0Lmxlbmd0aD49MTAwfHx0PT09QS5GQVRBTCkmJnRoaXMuX19pbnNlcnRMb2dJbnRvRGF0YWJhc2UoKX0sZS5wcm90b3R5cGUuX19pbnNlcnRMb2dJbnRvRGF0YWJhc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHQsbixpO3JldHVybiBiKHRoaXMsKGZ1bmN0aW9uKHIpe3N3aXRjaChyLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHQ9TShbXSxlLmRhdGFiYXNlTG9nTGlzdCksZS5kYXRhYmFzZUxvZ0xpc3Q9W10sKG49cS5nZXRJbnN0YW5jZSgpKT9bNCxuLmFkZExpc3QoQix0KV06WzMsM107Y2FzZSAxOnJldHVybiBpPXIuc2VudCgpLFs0LG4uZ2V0Q291bnQoQixcInRpbWVcIildO2Nhc2UgMjpyZXR1cm4gci5zZW50KCk+MWU1JiZuLnJlbW92ZUZpcnN0RGF0YShCLFwidGltZVwiLDJlMyksWzIsaV07Y2FzZSAzOnJldHVyblsyLCExXX19KSl9KSl9LGUucHJvdG90eXBlLnNldExvZ0xldmVsPWZ1bmN0aW9uKGUpe3RoaXMuX291dExldmVsPVwibnVtYmVyXCIhPXR5cGVvZiBlP0EuV0FSTjplfSxlLnByb3RvdHlwZS5zZXRMb2dTdGRvdXQ9ZnVuY3Rpb24oZSl7dGhpcy5fbG9nU3Rkb3V0PWV9LGUucHJvdG90eXBlLmxvZz1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10sbj0xO248YXJndW1lbnRzLmxlbmd0aDtuKyspdFtuLTFdPWFyZ3VtZW50c1tuXTtpZihlPkEuREVCVUcmJnRoaXMuX19wdXNoTG9jYWxMb2coZSx0Lm1hcChkZSkuam9pbihcIiBcIiksdGhpcy50YWcpLCEoZTx0aGlzLl9vdXRMZXZlbCkpe3ZhciBpPShuZXcgRGF0ZSkudG9JU09TdHJpbmcoKStcIltcIit0aGlzLnRhZytcIl1bXCIrQVtlXStcIl1cIixyPWkrXCIgLSBcIit0Lm1hcChkZSkuam9pbihcIiBcIik7dGhpcy5fbG9nU3Rkb3V0P3RoaXMuX2xvZ1N0ZG91dChlLHIpOnRoaXMuX3N0ZG91dD90aGlzLl9zdGRvdXQoZSxyKTp0aGlzLl9kZWZhdWx0U3Rkb3V0LmFwcGx5KHRoaXMsTShbZSxpXSx0KSl9fSxlLnByb3RvdHlwZS5yZXBvcnRMb2c9ZnVuY3Rpb24odCxuLGkpe3RoaXMuX19wdXNoTG9jYWxMb2coNC10LGksbik7dmFyIHI9SlNPTi5zdHJpbmdpZnkoe21lc3NhZ2U6aX0pLnJlcGxhY2UoL1wiL2csJ1wiXCInKTtyPSdcIicrcisnXCInO3ZhciBzPXtsZXZlbDp0LGNvbnRlbnQ6W2Uuc2Vzc2lvbklkLERhdGUubm93KCksdGhpcy50eXBlLHQsbixyXS5qb2luKCkrXCJcXG5cIn07ZS5yZWFsVGltZUxvZ0xpc3QucHVzaChzKSxlLnJlYWxUaW1lTG9nTGlzdC5sZW5ndGg+PTYwMCYmKGUucmVhbFRpbWVMb2dMaXN0PWUucmVhbFRpbWVMb2dMaXN0LnNsaWNlKC01MDApKX0sZS5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKGUsdCl7dGhpcy53YXJuKFwibG9nZ2VyLnNldCBoYXMgYmVpbmcgZGVwcmVjYXRlZCFcIil9LGUucHJvdG90eXBlLnNldFN0ZG91dD1mdW5jdGlvbihlKXt0aGlzLl9zdGRvdXQ9ZX0sZS5wcm90b3R5cGUuX19jbGVhclJlYWxUaW1lTG9nPWZ1bmN0aW9uKCl7ZS5yZWFsVGltZUxvZ0xpc3Q9W119LGUuZGF0YWJhc2VMb2dMaXN0PVtdLGUucmVhbFRpbWVMb2dMaXN0PVtdLGUuc2Vzc2lvbklkPUgoKSxlLnVzZXJJZD1cIlwiLGV9KCkscGU9bmV3IGZlKFwiUkNMb2dcIiksZ2U9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5fbWFwPXt9fXJldHVybiBlLnByb3RvdHlwZS5vbj1mdW5jdGlvbihlLHQsbil7dmFyIGk9dGhpcy5fbWFwW2VdfHwodGhpcy5fbWFwW2VdPVtdKTtpLnNvbWUoKGZ1bmN0aW9uKGUpe3JldHVybiBlLmxpc3RlbmVyPT09dCYmZS50YXJnZXQ9PT1ufSkpfHxpLnB1c2goe2xpc3RlbmVyOnQsdGFyZ2V0Om59KX0sZS5wcm90b3R5cGUub25jZT1mdW5jdGlvbihlLHQsbil7dmFyIGk9dGhpcy5fbWFwW2VdfHwodGhpcy5fbWFwW2VdPVtdKTtpLnNvbWUoKGZ1bmN0aW9uKGUpe3JldHVybiBlLmxpc3RlbmVyPT09dCYmZS50YXJnZXQ9PT1ufSkpfHxpLnB1c2goe2xpc3RlbmVyOnQsdGFyZ2V0Om4sb25jZTohMH0pfSxlLnByb3RvdHlwZS5vZmY9ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXMuX21hcFtlXTtpJiYoKGk9aS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiBlLmxpc3RlbmVyIT09dHx8ZS50YXJnZXQhPT1ufSkpKS5sZW5ndGg/dGhpcy5fbWFwW2VdPWk6ZGVsZXRlIHRoaXMuX21hcFtlXSl9LGUucHJvdG90eXBlLmVtaXQ9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLG49MTtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKXRbbi0xXT1hcmd1bWVudHNbbl07dmFyIGk9dGhpcy5fbWFwW2VdO2lmKGkpZm9yKHZhciByPWkubGVuZ3RoLTE7cj49MDtyLT0xKXt2YXIgcz1pW3JdLG89cy50YXJnZXQsYT1zLm9uY2UsdT1zLmxpc3RlbmVyO2EmJmkuc3BsaWNlKHIsMSk7dHJ5e3UuY2FsbC5hcHBseSh1LE0oW29dLHQpKX1jYXRjaChlKXtwZS5lcnJvcihlKX19fSxlLnByb3RvdHlwZS5yZW1vdmVBbGw9ZnVuY3Rpb24oZSl7ZGVsZXRlIHRoaXMuX21hcFtlXX0sZS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXtPYmplY3Qua2V5cyh0aGlzLl9tYXApLmZvckVhY2godGhpcy5yZW1vdmVBbGwsdGhpcyl9LGV9KCk7IWZ1bmN0aW9uKGUpe2VbZS5TRU5EPTFdPVwiU0VORFwiLGVbZS5SRUNFSVZFPTJdPVwiUkVDRUlWRVwifShsZXx8KGxlPXt9KSk7dmFyIF9lLHllPWxlOyFmdW5jdGlvbihlKXtlW2UuVElNRU9VVD0tMV09XCJUSU1FT1VUXCIsZVtlLlVOS05PV049LTJdPVwiVU5LTk9XTlwiLGVbZS5QQVJBTUVURVJfRVJST1I9LTNdPVwiUEFSQU1FVEVSX0VSUk9SXCIsZVtlLkVYVFJBX01FVEhPRF9VTkRFRklORUQ9LTRdPVwiRVhUUkFfTUVUSE9EX1VOREVGSU5FRFwiLGVbZS5NQUlOX1BST0NFU1NfRVJST1I9LTVdPVwiTUFJTl9QUk9DRVNTX0VSUk9SXCIsZVtlLlBBUkFNRVRFUl9DSEFOR0VEPS02XT1cIlBBUkFNRVRFUl9DSEFOR0VEXCIsZVtlLlNVQ0NFU1M9MF09XCJTVUNDRVNTXCIsZVtlLlJDX01TR19VTkFVVEhPUklaRUQ9MjA0MDZdPVwiUkNfTVNHX1VOQVVUSE9SSVpFRFwiLGVbZS5SQ19ESVNDVVNTSU9OX0dST1VQX0lEX0lOVkFMSUQ9MjA0MDddPVwiUkNfRElTQ1VTU0lPTl9HUk9VUF9JRF9JTlZBTElEXCIsZVtlLlNFTkRfRlJFUVVFTkNZX1RPT19GQVNUPTIwNjA0XT1cIlNFTkRfRlJFUVVFTkNZX1RPT19GQVNUXCIsZVtlLk5PVF9JTl9ESVNDVVNTSU9OPTIxNDA2XT1cIk5PVF9JTl9ESVNDVVNTSU9OXCIsZVtlLkZPUkJJRERFTl9JTl9HUk9VUD0yMjQwOF09XCJGT1JCSURERU5fSU5fR1JPVVBcIixlW2UuUkVDQUxMX01FU1NBR0U9MjUxMDFdPVwiUkVDQUxMX01FU1NBR0VcIixlW2UuTk9UX0lOX0dST1VQPTIyNDA2XT1cIk5PVF9JTl9HUk9VUFwiLGVbZS5OT1RfSU5fQ0hBVFJPT009MjM0MDZdPVwiTk9UX0lOX0NIQVRST09NXCIsZVtlLkZPUkJJRERFTl9JTl9DSEFUUk9PTT0yMzQwOF09XCJGT1JCSURERU5fSU5fQ0hBVFJPT01cIixlW2UuUkNfQ0hBVFJPT01fVVNFUl9LSUNLRUQ9MjM0MDldPVwiUkNfQ0hBVFJPT01fVVNFUl9LSUNLRURcIixlW2UuUkNfQ0hBVFJPT01fTk9UX0VYSVNUPTIzNDEwXT1cIlJDX0NIQVRST09NX05PVF9FWElTVFwiLGVbZS5SQ19DSEFUUk9PTV9JU19GVUxMPTIzNDExXT1cIlJDX0NIQVRST09NX0lTX0ZVTExcIixlW2UuUkNfQ0hBVFJPT01fUEFUQU1FVEVSX0lOVkFMSUQ9MjM0MTJdPVwiUkNfQ0hBVFJPT01fUEFUQU1FVEVSX0lOVkFMSURcIixlW2UuQ0hBVFJPT01fR0VUX0hJU1RPUllNU0dfRVJST1I9MjM0MTNdPVwiQ0hBVFJPT01fR0VUX0hJU1RPUllNU0dfRVJST1JcIixlW2UuQ0hBVFJPT01fTk9UX09QRU5fSElTVE9SWU1TR19TVE9SRT0yMzQxNF09XCJDSEFUUk9PTV9OT1RfT1BFTl9ISVNUT1JZTVNHX1NUT1JFXCIsZVtlLkNIQVRST09NX0tWX0VYQ0VFRD0yMzQyM109XCJDSEFUUk9PTV9LVl9FWENFRURcIixlW2UuQ0hBVFJPT01fS1ZfT1ZFUldSSVRFX0lOVkFMSUQ9MjM0MjRdPVwiQ0hBVFJPT01fS1ZfT1ZFUldSSVRFX0lOVkFMSURcIixlW2UuQ0hBVFJPT01fS1ZfU1RPUkVfTk9UX09QRU49MjM0MjZdPVwiQ0hBVFJPT01fS1ZfU1RPUkVfTk9UX09QRU5cIixlW2UuQ0hBVFJPT01fS0VZX05PVF9FWElTVD0yMzQyN109XCJDSEFUUk9PTV9LRVlfTk9UX0VYSVNUXCIsZVtlLlNFTlNJVElWRV9TSElFTEQ9MjE1MDFdPVwiU0VOU0lUSVZFX1NISUVMRFwiLGVbZS5TRU5TSVRJVkVfUkVQTEFDRT0yMTUwMl09XCJTRU5TSVRJVkVfUkVQTEFDRVwiLGVbZS5KT0lOX0lOX0RJU0NVU1NJT049MjE0MDddPVwiSk9JTl9JTl9ESVNDVVNTSU9OXCIsZVtlLkNSRUFURV9ESVNDVVNTSU9OPTIxNDA4XT1cIkNSRUFURV9ESVNDVVNTSU9OXCIsZVtlLklOVklURV9ESUNVU1NJT049MjE0MDldPVwiSU5WSVRFX0RJQ1VTU0lPTlwiLGVbZS5HRVRfVVNFUklORk9fRVJST1I9MjM0MDddPVwiR0VUX1VTRVJJTkZPX0VSUk9SXCIsZVtlLlJFSkVDVEVEX0JZX0JMQUNLTElTVD00MDVdPVwiUkVKRUNURURfQllfQkxBQ0tMSVNUXCIsZVtlLlJDX05FVF9DSEFOTkVMX0lOVkFMSUQ9MzAwMDFdPVwiUkNfTkVUX0NIQU5ORUxfSU5WQUxJRFwiLGVbZS5SQ19ORVRfVU5BVkFJTEFCTEU9MzAwMDJdPVwiUkNfTkVUX1VOQVZBSUxBQkxFXCIsZVtlLlJDX01TR19SRVNQX1RJTUVPVVQ9MzAwMDNdPVwiUkNfTVNHX1JFU1BfVElNRU9VVFwiLGVbZS5SQ19IVFRQX1NFTkRfRkFJTD0zMDAwNF09XCJSQ19IVFRQX1NFTkRfRkFJTFwiLGVbZS5SQ19IVFRQX1JFUV9USU1FT1VUPTMwMDA1XT1cIlJDX0hUVFBfUkVRX1RJTUVPVVRcIixlW2UuUkNfSFRUUF9SRUNWX0ZBSUw9MzAwMDZdPVwiUkNfSFRUUF9SRUNWX0ZBSUxcIixlW2UuUkNfTkFWSV9SRVNPVVJDRV9FUlJPUj0zMDAwN109XCJSQ19OQVZJX1JFU09VUkNFX0VSUk9SXCIsZVtlLlJDX05PREVfTk9UX0ZPVU5EPTMwMDA4XT1cIlJDX05PREVfTk9UX0ZPVU5EXCIsZVtlLlJDX0RPTUFJTl9OT1RfUkVTT0xWRT0zMDAwOV09XCJSQ19ET01BSU5fTk9UX1JFU09MVkVcIixlW2UuUkNfU09DS0VUX05PVF9DUkVBVEVEPTMwMDEwXT1cIlJDX1NPQ0tFVF9OT1RfQ1JFQVRFRFwiLGVbZS5SQ19TT0NLRVRfRElTQ09OTkVDVEVEPTMwMDExXT1cIlJDX1NPQ0tFVF9ESVNDT05ORUNURURcIixlW2UuUkNfUElOR19TRU5EX0ZBSUw9MzAwMTJdPVwiUkNfUElOR19TRU5EX0ZBSUxcIixlW2UuUkNfUE9OR19SRUNWX0ZBSUw9MzAwMTNdPVwiUkNfUE9OR19SRUNWX0ZBSUxcIixlW2UuUkNfTVNHX1NFTkRfRkFJTD0zMDAxNF09XCJSQ19NU0dfU0VORF9GQUlMXCIsZVtlLlJDX01TR19DT05URU5UX0VYQ0VFRF9MSU1JVD0zMDAxNl09XCJSQ19NU0dfQ09OVEVOVF9FWENFRURfTElNSVRcIixlW2UuUkNfQ09OTl9BQ0tfVElNRU9VVD0zMWUzXT1cIlJDX0NPTk5fQUNLX1RJTUVPVVRcIixlW2UuUkNfQ09OTl9QUk9UT19WRVJTSU9OX0VSUk9SPTMxMDAxXT1cIlJDX0NPTk5fUFJPVE9fVkVSU0lPTl9FUlJPUlwiLGVbZS5SQ19DT05OX0lEX1JFSkVDVD0zMTAwMl09XCJSQ19DT05OX0lEX1JFSkVDVFwiLGVbZS5SQ19DT05OX1NFUlZFUl9VTkFWQUlMQUJMRT0zMTAwM109XCJSQ19DT05OX1NFUlZFUl9VTkFWQUlMQUJMRVwiLGVbZS5SQ19DT05OX1VTRVJfT1JfUEFTU1dEX0VSUk9SPTMxMDA0XT1cIlJDX0NPTk5fVVNFUl9PUl9QQVNTV0RfRVJST1JcIixlW2UuUkNfQ09OTl9OT1RfQVVUSFJPUklaRUQ9MzEwMDVdPVwiUkNfQ09OTl9OT1RfQVVUSFJPUklaRURcIixlW2UuUkNfQ09OTl9SRURJUkVDVEVEPTMxMDA2XT1cIlJDX0NPTk5fUkVESVJFQ1RFRFwiLGVbZS5SQ19DT05OX1BBQ0tBR0VfTkFNRV9JTlZBTElEPTMxMDA3XT1cIlJDX0NPTk5fUEFDS0FHRV9OQU1FX0lOVkFMSURcIixlW2UuUkNfQ09OTl9BUFBfQkxPQ0tFRF9PUl9ERUxFVEVEPTMxMDA4XT1cIlJDX0NPTk5fQVBQX0JMT0NLRURfT1JfREVMRVRFRFwiLGVbZS5SQ19DT05OX1VTRVJfQkxPQ0tFRD0zMTAwOV09XCJSQ19DT05OX1VTRVJfQkxPQ0tFRFwiLGVbZS5SQ19ESVNDT05OX0tJQ0s9MzEwMTBdPVwiUkNfRElTQ09OTl9LSUNLXCIsZVtlLlJDX0RJU0NPTk5fRVhDRVBUSU9OPTMxMDExXT1cIlJDX0RJU0NPTk5fRVhDRVBUSU9OXCIsZVtlLlJDX0FQUF9BVVRIX05PVF9QQVNTPTMxMDI2XT1cIlJDX0FQUF9BVVRIX05PVF9QQVNTXCIsZVtlLlJDX09UUF9VU0VEPTMxMDI3XT1cIlJDX09UUF9VU0VEXCIsZVtlLlJDX1BMQVRGT1JNX0VSUk9SPTMxMDI4XT1cIlJDX1BMQVRGT1JNX0VSUk9SXCIsZVtlLlJDX1FVRVJZX0FDS19OT19EQVRBPTMyMDAxXT1cIlJDX1FVRVJZX0FDS19OT19EQVRBXCIsZVtlLlJDX01TR19EQVRBX0lOQ09NUExFVEU9MzIwMDJdPVwiUkNfTVNHX0RBVEFfSU5DT01QTEVURVwiLGVbZS5CSVpfRVJST1JfQ0xJRU5UX05PVF9JTklUPTMzMDAxXT1cIkJJWl9FUlJPUl9DTElFTlRfTk9UX0lOSVRcIixlW2UuQklaX0VSUk9SX0RBVEFCQVNFX0VSUk9SPTMzMDAyXT1cIkJJWl9FUlJPUl9EQVRBQkFTRV9FUlJPUlwiLGVbZS5CSVpfRVJST1JfSU5WQUxJRF9QQVJBTUVURVI9MzMwMDNdPVwiQklaX0VSUk9SX0lOVkFMSURfUEFSQU1FVEVSXCIsZVtlLkJJWl9FUlJPUl9OT19DSEFOTkVMPTMzMDA0XT1cIkJJWl9FUlJPUl9OT19DSEFOTkVMXCIsZVtlLkJJWl9FUlJPUl9SRUNPTk5FQ1RfU1VDQ0VTUz0zMzAwNV09XCJCSVpfRVJST1JfUkVDT05ORUNUX1NVQ0NFU1NcIixlW2UuQklaX0VSUk9SX0NPTk5FQ1RJTkc9MzMwMDZdPVwiQklaX0VSUk9SX0NPTk5FQ1RJTkdcIixlW2UuTVNHX1JPQU1JTkdfU0VSVklDRV9VTkFWQUlMQUJMRT0zMzAwN109XCJNU0dfUk9BTUlOR19TRVJWSUNFX1VOQVZBSUxBQkxFXCIsZVtlLk1TR19JTlNFUlRfRVJST1I9MzMwMDhdPVwiTVNHX0lOU0VSVF9FUlJPUlwiLGVbZS5NU0dfREVMX0VSUk9SPTMzMDA5XT1cIk1TR19ERUxfRVJST1JcIixlW2UuVEFHX0VYSVNUUz0zMzEwMV09XCJUQUdfRVhJU1RTXCIsZVtlLlRBR19OT1RfRVhJU1Q9MzMxMDBdPVwiVEFHX05PVF9FWElTVFwiLGVbZS5OT19UQUdfSU5fQ09OVkVSPTMzMTAyXT1cIk5PX1RBR19JTl9DT05WRVJcIixlW2UuQ09OVkVSX1JFTU9WRV9FUlJPUj0zNDAwMV09XCJDT05WRVJfUkVNT1ZFX0VSUk9SXCIsZVtlLkNPTlZFUl9HRVRMSVNUX0VSUk9SPTM0MDAyXT1cIkNPTlZFUl9HRVRMSVNUX0VSUk9SXCIsZVtlLkNPTlZFUl9TRVRPUF9FUlJPUj0zNDAwM109XCJDT05WRVJfU0VUT1BfRVJST1JcIixlW2UuQ09OVkVSX1RPVEFMX1VOUkVBRF9FUlJPUj0zNDAwNF09XCJDT05WRVJfVE9UQUxfVU5SRUFEX0VSUk9SXCIsZVtlLkNPTlZFUl9UWVBFX1VOUkVBRF9FUlJPUj0zNDAwNV09XCJDT05WRVJfVFlQRV9VTlJFQURfRVJST1JcIixlW2UuQ09OVkVSX0lEX1RZUEVfVU5SRUFEX0VSUk9SPTM0MDA2XT1cIkNPTlZFUl9JRF9UWVBFX1VOUkVBRF9FUlJPUlwiLGVbZS5DT05WRVJfQ0xFQVJfRVJST1I9MzQwMDddPVwiQ09OVkVSX0NMRUFSX0VSUk9SXCIsZVtlLkVYUEFOU0lPTl9MSU1JVF9FWENFRVQ9MzQwMTBdPVwiRVhQQU5TSU9OX0xJTUlUX0VYQ0VFVFwiLGVbZS5NRVNTQUdFX0tWX05PVF9TVVBQT1JUPTM0MDA4XT1cIk1FU1NBR0VfS1ZfTk9UX1NVUFBPUlRcIixlW2UuQ0xFQVJfSElTX1RJTUVfRVJST1I9MzQwMTFdPVwiQ0xFQVJfSElTX1RJTUVfRVJST1JcIixlW2UuQ09OVkVSX09VVF9MSU1JVF9FUlJPUj0zNDAxM109XCJDT05WRVJfT1VUX0xJTUlUX0VSUk9SXCIsZVtlLkNPTlZFUl9HRVRfRVJST1I9MzUwMjFdPVwiQ09OVkVSX0dFVF9FUlJPUlwiLGVbZS5HUk9VUF9TWU5DX0VSUk9SPTM1MDAxXT1cIkdST1VQX1NZTkNfRVJST1JcIixlW2UuR1JPVVBfTUFUQ0hfRVJST1I9MzUwMDJdPVwiR1JPVVBfTUFUQ0hfRVJST1JcIixlW2UuUkVBRF9SRUNFSVBUX0VSUk9SPTM1MDAzXT1cIlJFQURfUkVDRUlQVF9FUlJPUlwiLGVbZS5QQUNLQUdFX0VOVklST05NRU5UX0VSUk9SPTM1MDA2XT1cIlBBQ0tBR0VfRU5WSVJPTk1FTlRfRVJST1JcIixlW2UuQ0FOX05PVF9SRUNPTk5FQ1Q9MzUwMDddPVwiQ0FOX05PVF9SRUNPTk5FQ1RcIixlW2UuU0VSVkVSX1VOQVZBSUxBQkxFPTM1MDA4XT1cIlNFUlZFUl9VTkFWQUlMQUJMRVwiLGVbZS5IT1NUTkFNRV9FUlJPUj0zNTAwOV09XCJIT1NUTkFNRV9FUlJPUlwiLGVbZS5IQVNfT0hURVJfU0FNRV9DTElFTlRfT05fTElORT0zNTAxMF09XCJIQVNfT0hURVJfU0FNRV9DTElFTlRfT05fTElORVwiLGVbZS5VUExPQURfRklMRV9GQUlMRUQ9MzUwMjBdPVwiVVBMT0FEX0ZJTEVfRkFJTEVEXCIsZVtlLkNIQVRST09NX0lEX0lTTlVMTD0zNjAwMV09XCJDSEFUUk9PTV9JRF9JU05VTExcIixlW2UuQ0hBUlRPT01fSk9JTl9FUlJPUj0zNjAwMl09XCJDSEFSVE9PTV9KT0lOX0VSUk9SXCIsZVtlLkNIQVRST09NX0hJU01FU1NBR0VfRVJST1I9MzYwMDNdPVwiQ0hBVFJPT01fSElTTUVTU0FHRV9FUlJPUlwiLGVbZS5DSEFUUk9PTV9LVl9OT1RfRk9VTkQ9MzYwMDRdPVwiQ0hBVFJPT01fS1ZfTk9UX0ZPVU5EXCIsZVtlLkJMQUNLX0FERF9FUlJPUj0zNzAwMV09XCJCTEFDS19BRERfRVJST1JcIixlW2UuQkxBQ0tfR0VUU1RBVFVTX0VSUk9SPTM3MDAyXT1cIkJMQUNLX0dFVFNUQVRVU19FUlJPUlwiLGVbZS5CTEFDS19SRU1PVkVfRVJST1I9MzcwMDNdPVwiQkxBQ0tfUkVNT1ZFX0VSUk9SXCIsZVtlLkRSQUZfR0VUX0VSUk9SPTM4MDAxXT1cIkRSQUZfR0VUX0VSUk9SXCIsZVtlLkRSQUZfU0FWRV9FUlJPUj0zODAwMl09XCJEUkFGX1NBVkVfRVJST1JcIixlW2UuRFJBRl9SRU1PVkVfRVJST1I9MzgwMDNdPVwiRFJBRl9SRU1PVkVfRVJST1JcIixlW2UuU1VCU0NSSUJFX0VSUk9SPTM5MDAxXT1cIlNVQlNDUklCRV9FUlJPUlwiLGVbZS5OT1RfU1VQUE9SVD0zOTAwMl09XCJOT1RfU1VQUE9SVFwiLGVbZS5RTlRLTl9GSUxFVFlQRV9FUlJPUj00MTAwMV09XCJRTlRLTl9GSUxFVFlQRV9FUlJPUlwiLGVbZS5RTlRLTl9HRVRfRVJST1I9NDEwMDJdPVwiUU5US05fR0VUX0VSUk9SXCIsZVtlLkNPT0tJRV9FTkFCTEU9NTEwMDFdPVwiQ09PS0lFX0VOQUJMRVwiLGVbZS5HRVRfTUVTU0FHRV9CWV9JRF9FUlJPUj02MTAwMV09XCJHRVRfTUVTU0FHRV9CWV9JRF9FUlJPUlwiLGVbZS5IQVZOT0RFVklDRUlEPTI0MDAxXT1cIkhBVk5PREVWSUNFSURcIixlW2UuREVWSUNFSURJU0hBVkU9MjQwMDJdPVwiREVWSUNFSURJU0hBVkVcIixlW2UuRkVJTEQ9MjQwMDldPVwiRkVJTERcIixlW2UuVk9JUElTTlVMTD0yNDAxM109XCJWT0lQSVNOVUxMXCIsZVtlLk5PRU5HSU5FVFlQRT0yNDAxMF09XCJOT0VOR0lORVRZUEVcIixlW2UuTlVMTENIQU5ORUxOQU1FPTI0MDExXT1cIk5VTExDSEFOTkVMTkFNRVwiLGVbZS5WT0lQRFlBTk1JQ0VSUk9SPTI0MDEyXT1cIlZPSVBEWUFOTUlDRVJST1JcIixlW2UuTk9WT0lQPTI0MDE0XT1cIk5PVk9JUFwiLGVbZS5JTlRFUk5BTEVSUlJPUj0yNDAxNV09XCJJTlRFUk5BTEVSUlJPUlwiLGVbZS5WT0lQQ0xPU0U9MjQwMTZdPVwiVk9JUENMT1NFXCIsZVtlLkNMT1NFX0JFRk9SRV9PUEVOPTUxMDAxXT1cIkNMT1NFX0JFRk9SRV9PUEVOXCIsZVtlLkFMUkVBRFlfSU5fVVNFPTUxMDAyXT1cIkFMUkVBRFlfSU5fVVNFXCIsZVtlLklOVkFMSURfQ0hBTk5FTF9OQU1FPTUxMDAzXT1cIklOVkFMSURfQ0hBTk5FTF9OQU1FXCIsZVtlLlZJREVPX0NPTlRBSU5FUl9JU19OVUxMPTUxMDA0XT1cIlZJREVPX0NPTlRBSU5FUl9JU19OVUxMXCIsZVtlLkRFTEVURV9NRVNTQUdFX0lEX0lTX05VTEw9NjEwMDFdPVwiREVMRVRFX01FU1NBR0VfSURfSVNfTlVMTFwiLGVbZS5DQU5DRUw9MV09XCJDQU5DRUxcIixlW2UuUkVKRUNUPTJdPVwiUkVKRUNUXCIsZVtlLkhBTkdVUD0zXT1cIkhBTkdVUFwiLGVbZS5CVVNZTElORT00XT1cIkJVU1lMSU5FXCIsZVtlLk5PX1JFU1BPTlNFPTVdPVwiTk9fUkVTUE9OU0VcIixlW2UuRU5HSU5FX1VOX1NVUFBPUlRFRD02XT1cIkVOR0lORV9VTl9TVVBQT1JURURcIixlW2UuTkVUV09SS19FUlJPUj03XT1cIk5FVFdPUktfRVJST1JcIixlW2UuUkVNT1RFX0NBTkNFTD0xMV09XCJSRU1PVEVfQ0FOQ0VMXCIsZVtlLlJFTU9URV9SRUpFQ1Q9MTJdPVwiUkVNT1RFX1JFSkVDVFwiLGVbZS5SRU1PVEVfSEFOR1VQPTEzXT1cIlJFTU9URV9IQU5HVVBcIixlW2UuUkVNT1RFX0JVU1lMSU5FPTE0XT1cIlJFTU9URV9CVVNZTElORVwiLGVbZS5SRU1PVEVfTk9fUkVTUE9OU0U9MTVdPVwiUkVNT1RFX05PX1JFU1BPTlNFXCIsZVtlLlJFTU9URV9FTkdJTkVfVU5fU1VQUE9SVEVEPTE2XT1cIlJFTU9URV9FTkdJTkVfVU5fU1VQUE9SVEVEXCIsZVtlLlJFTU9URV9ORVRXT1JLX0VSUk9SPTE3XT1cIlJFTU9URV9ORVRXT1JLX0VSUk9SXCIsZVtlLlZPSVBfTk9UX0FWQUxJQUJMRT0xOF09XCJWT0lQX05PVF9BVkFMSUFCTEVcIixlW2UuQ0hBVFJPT01fS1ZfU1RPUkVfTk9UX0FMTF9TVUNDRVNTPTIzNDI4XT1cIkNIQVRST09NX0tWX1NUT1JFX05PVF9BTExfU1VDQ0VTU1wiLGVbZS5DSEFUUk9PTV9LVl9TVE9SRV9PVVRfTElNSVQ9MjM0MjldPVwiQ0hBVFJPT01fS1ZfU1RPUkVfT1VUX0xJTUlUXCJ9KF9lfHwoX2U9e30pKTt2YXIgdmUsRWU9X2U7IWZ1bmN0aW9uKGUpe2VbZS5DT05ORUNURUQ9MF09XCJDT05ORUNURURcIixlW2UuQ09OTkVDVElORz0xXT1cIkNPTk5FQ1RJTkdcIixlW2UuRElTQ09OTkVDVEVEPTJdPVwiRElTQ09OTkVDVEVEXCIsZVtlLk5FVFdPUktfVU5BVkFJTEFCTEU9M109XCJORVRXT1JLX1VOQVZBSUxBQkxFXCIsZVtlLkNPTk5FQ1RJT05fQ0xPU0VEPTRdPVwiQ09OTkVDVElPTl9DTE9TRURcIixlW2UuS0lDS0VEX09GRkxJTkVfQllfT1RIRVJfQ0xJRU5UPTZdPVwiS0lDS0VEX09GRkxJTkVfQllfT1RIRVJfQ0xJRU5UXCIsZVtlLldFQlNPQ0tFVF9VTkFWQUlMQUJMRT03XT1cIldFQlNPQ0tFVF9VTkFWQUlMQUJMRVwiLGVbZS5XRUJTT0NLRVRfRVJST1I9OF09XCJXRUJTT0NLRVRfRVJST1JcIixlW2UuQkxPQ0tFRD05XT1cIkJMT0NLRURcIixlW2UuRE9NQUlOX0lOQ09SUkVDVD0xMl09XCJET01BSU5fSU5DT1JSRUNUXCIsZVtlLkRJU0NPTk5FQ1RfQllfU0VSVkVSPTEzXT1cIkRJU0NPTk5FQ1RfQllfU0VSVkVSXCIsZVtlLlJFRElSRUNUPTE0XT1cIlJFRElSRUNUXCIsZVtlLkFQUEtFWV9JU19GQUtFPTIwXT1cIkFQUEtFWV9JU19GQUtFXCIsZVtlLlVMVFJBTElNSVQ9MTEwMV09XCJVTFRSQUxJTUlUXCIsZVtlLlJFUVVFU1RfTkFWST0yMDFdPVwiUkVRVUVTVF9OQVZJXCIsZVtlLlJFU1BPTlNFX05BVkk9MjAyXT1cIlJFU1BPTlNFX05BVklcIixlW2UuUkVTUE9OU0VfTkFWSV9FUlJPUj0yMDNdPVwiUkVTUE9OU0VfTkFWSV9FUlJPUlwiLGVbZS5SRVNQT05TRV9OQVZJX1RJTUVPVVQ9MjA0XT1cIlJFU1BPTlNFX05BVklfVElNRU9VVFwifSh2ZXx8KHZlPXt9KSk7dmFyIG1lLEllPXZlLFRlPXtBQ0NFUFRFRDowLFVOQUNDRVBUQUJMRV9QUk9UT0NPTF9WRVJTSU9OOjEsSURFTlRJRklFUl9SRUpFQ1RFRDoyLFNFUlZFUl9VTkFWQUlMQUJMRTozLFRPS0VOX0lOQ09SUkVDVDo0LE5PVF9BVVRIT1JJWkVEOjUsUkVESVJFQ1Q6NixQQUNLQUdFX0VSUk9SOjcsQVBQX0JMT0NLX09SX0RFTEVURTo4LEJMT0NLOjksVE9LRU5fRVhQSVJFOjEwLERFVklDRV9FUlJPUjoxMSxIT1NUTkFNRV9FUlJPUjoxMixIQVNPSFRFUlNBTUVDTElFTlRPTkxJTkU6MTMsSU5fT1RIRVJfQ0xVU1RFUjoxNSxBUFBfQVVUSF9OT1RfUEFTUzoxNixPVFBfVVNFRDoxNyxQTEFURk9STV9FUlJPUjoxOH07IWZ1bmN0aW9uKGUpe2UuVGV4dE1lc3NhZ2U9XCJSQzpUeHRNc2dcIixlLlZPSUNFPVwiUkM6VmNNc2dcIixlLkhRX1ZPSUNFPVwiUkM6SFFWQ01zZ1wiLGUuSU1BR0U9XCJSQzpJbWdNc2dcIixlLkdJRj1cIlJDOkdJRk1zZ1wiLGUuUklDSF9DT05URU5UPVwiUkM6SW1nVGV4dE1zZ1wiLGUuTE9DQVRJT049XCJSQzpMQlNNc2dcIixlLkZJTEU9XCJSQzpGaWxlTXNnXCIsZS5TSUdIVD1cIlJDOlNpZ2h0TXNnXCIsZS5DT01CSU5FPVwiUkM6Q29tYmluZU1zZ1wiLGUuQ0hSTV9LVl9OT1RJRlk9XCJSQzpjaHJtS1ZOb3RpTXNnXCIsZS5MT0dfQ09NTUFORD1cIlJDOkxvZ0NtZE1zZ1wiLGUuRVhQQU5TSU9OX05PVElGWT1cIlJDOk1zZ0V4TXNnXCIsZS5SRUZFUkVOQ0U9XCJSQzpSZWZlcmVuY2VNc2dcIixlLlJFQ0FMTD1cIlJDOlJjQ21kXCIsZS5SRUFEX1JFQ0VJUFQ9XCJSQzpSZWFkTnRmXCIsZS5SRUFEX1JFQ0VJUFRfUkVRVUVTVD1cIlJDOlJSUmVxTXNnXCIsZS5SRUFEX1JFQ0VJUFRfUkVTUE9OU0U9XCJSQzpSUlJzcE1zZ1wiLGUuU1lOQ19SRUFEX1NUQVRVUz1cIlJDOlNSU01zZ1wiLGUuR1JPVVBfUkVBRF9SRUNFSVBUX1JFUVVFU1Q9XCJSQzpSUk1zZ1wiLGUuQ0hBVFJPT01fSk9JTj1cIlJDOkNocm1Kb2luTnRmXCIsZS5DSEFUUk9PTV9MRUZUPVwiUkM6Q2hybVF1aXROdGZcIixlLkNIQVRST09NX01FUkdFX0NIQU5HRT1cIlJDOkNocm1NZW1DaGFuZ2VcIixlLlRZUElOR19TVEFUVVM9XCJSQzpUeXBTdHNcIixlLklOVEVSQ0VQVD1cIlJDOkludGVyY2VwdE1zZ1wifShtZXx8KG1lPXt9KSk7dmFyIENlLFJlPW1lOyFmdW5jdGlvbihlKXtlW2UuT1BFTj0xXT1cIk9QRU5cIixlW2UuQ0xPU0U9Ml09XCJDTE9TRVwifShDZXx8KENlPXt9KSk7dmFyIFNlLE5lPUNlOyFmdW5jdGlvbihlKXtlW2UuQUxMPTFdPVwiQUxMXCIsZVtlLlNJTkdBTD0yXT1cIlNJTkdBTFwifShTZXx8KFNlPXt9KSk7dmFyIE9lLHdlPVNlOyFmdW5jdGlvbihlKXtlW2UuUUlOSVU9MV09XCJRSU5JVVwiLGVbZS5BTEk9Ml09XCJBTElcIixlW2UuQVdTPTNdPVwiQVdTXCIsZVtlLlNUQz00XT1cIlNUQ1wifShPZXx8KE9lPXt9KSk7dmFyIGJlLE1lPU9lOyFmdW5jdGlvbihlKXtlW2UuVVBEQVRFPTFdPVwiVVBEQVRFXCIsZVtlLkRFTEVURT0yXT1cIkRFTEVURVwifShiZXx8KGJlPXt9KSk7dmFyIEFlLFVlPWJlOyFmdW5jdGlvbihlKXtlW2UuUVVJVD0wXT1cIlFVSVRcIixlW2UuSk9JTj0xXT1cIkpPSU5cIn0oQWV8fChBZT17fSkpO3ZhciBMZSxQZT1BZTshZnVuY3Rpb24oZSl7XG4vKiFcbiAgICDlhajlsYDmlY/mhJ/or43vvJrlkb3kuK3kuobono3kupHlhoXnva7nmoTlhajlsYDmlY/mhJ/or41cbiAgICovXG5lW2UuR0xPQkFMPTFdPVwiR0xPQkFMXCIsXG4vKiFcbiAgICAg6Ieq5a6a5LmJ5pWP5oSf6K+N5oum5oiq77ya5ZG95Lit5LqG5a6i5oi35Zyo6J6N5LqR6Ieq5a6a5LmJ55qE5pWP5oSf6K+NXG4gICAgKi9cbmVbZS5DVVNUT009Ml09XCJDVVNUT01cIixcbi8qIVxuICAgICDnrKzkuInmlrnlrqHmoLjmi6bmiKrvvJrlkb3kuK3kuobnrKzkuInmlrnvvIjmlbDnvo7vvInmiJbmqKHmnb/ot6/nlLHlhrPlrprkuI3kuIvlj5HnmoTnirbmgIFcbiAgICAqL1xuZVtlLlRISVJEX1BBUlRZPTNdPVwiVEhJUkRfUEFSVFlcIn0oTGV8fChMZT17fSkpO3ZhciBEZSxWZSxrZSx4ZT1MZTshZnVuY3Rpb24oZSl7ZVtlLlJUQz0wXT1cIlJUQ1wiLGVbZS5MSVZFPTJdPVwiTElWRVwifShEZXx8KERlPXt9KSksZnVuY3Rpb24oZSl7ZVtlLkFVRElPX0FORF9WSURFTz0wXT1cIkFVRElPX0FORF9WSURFT1wiLGVbZS5BVURJTz0xXT1cIkFVRElPXCJ9KFZlfHwoVmU9e30pKSxmdW5jdGlvbihlKXtlW2UuQU5DSE9SPTFdPVwiQU5DSE9SXCIsZVtlLkFVRElFTkNFPTJdPVwiQVVESUVOQ0VcIn0oa2V8fChrZT17fSkpO3ZhciBCZSxGZSxLZSxxZT17XCJSQzpWQ0FjY2VwdFwiOlwiUkM6VkNBY2NlcHRcIixcIlJDOlZDUmluZ2luZ1wiOlwiUkM6VkNSaW5naW5nXCIsXCJSQzpWQ1N1bW1hcnlcIjpcIlJDOlZDU3VtbWFyeVwiLFwiUkM6VkNIYW5ndXBcIjpcIlJDOlZDSGFuZ3VwXCIsXCJSQzpWQ0ludml0ZVwiOlwiUkM6VkNJbnZpdGVcIixcIlJDOlZDTW9kaWZ5TWVkaWFcIjpcIlJDOlZDTW9kaWZ5TWVkaWFcIixcIlJDOlZDTW9kaWZ5TWVtXCI6XCJSQzpWQ01vZGlmeU1lbVwifTshZnVuY3Rpb24oZSl7ZVtlLlJPT009MV09XCJST09NXCIsZVtlLlBFUlNPTj0yXT1cIlBFUlNPTlwifShCZXx8KEJlPXt9KSksZnVuY3Rpb24oZSl7ZVtlLkFuY2hvclRvVmlld2VyPTFdPVwiQW5jaG9yVG9WaWV3ZXJcIixlW2UuVmlld2VyVG9BbmNob3I9Ml09XCJWaWV3ZXJUb0FuY2hvclwifShGZXx8KEZlPXt9KSksZnVuY3Rpb24oZSl7ZVtlLktJQ0s9MF09XCJLSUNLXCIsZVtlLlJFRlVTRT0xXT1cIlJFRlVTRVwiLGVbZS5DT0VYSVNUPTJdPVwiQ09FWElTVFwifShLZXx8KEtlPXt9KSk7dmFyIFllLEhlLEdlPXtlbmdpbmU6XCI1LjEuMlwifSxqZT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt9cmV0dXJuIGUuYWRkPWZ1bmN0aW9uKGUsdCl7R2VbZV09dH0sZS52YWxpZEVuZ2luZT1mdW5jdGlvbihlKXt2YXIgdD1lLm1hdGNoKC9cXGQrXFwuXFxkK1xcLlxcZCsvKTtpZighdClyZXR1cm4gcGUud2FybihcIlRoZSB2YWxpZGF0aW9uIGVuZ2luZSB2ZXJzaW9uICdcIitlK1wiJyBpcyBpbnZhbGlkIVwiKSwhMTt2YXIgbj10WzBdLnNwbGl0KFwiLlwiKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlLnBhZFN0YXJ0KDMsXCIwXCIpfSkpLmpvaW4oXCJcIik7cmV0dXJuIEdlLmVuZ2luZS5tYXRjaCgvXFxkK1xcLlxcZCtcXC5cXGQrLylbMF0uc3BsaXQoXCIuXCIpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUucGFkU3RhcnQoMyxcIjBcIil9KSkuam9pbihcIlwiKT49bn0sZS5nZXRJbmZvPWZ1bmN0aW9uKCl7cmV0dXJuIEdlfSxlfSgpOyFmdW5jdGlvbihlKXtlW2UuU1RSSU5HPTBdPVwiU1RSSU5HXCIsZVtlLk9OTFlfU1RSSU5HPTFdPVwiT05MWV9TVFJJTkdcIixlW2UuTlVNQkVSPTJdPVwiTlVNQkVSXCIsZVtlLkJPT0xFQU49M109XCJCT09MRUFOXCIsZVtlLk9CSkVDVD00XT1cIk9CSkVDVFwiLGVbZS5BUlJBWT01XT1cIkFSUkFZXCIsZVtlLkNBTExCQUNLPTZdPVwiQ0FMTEJBQ0tcIixlW2UuQ0hBTk5FTF9JRD03XT1cIkNIQU5ORUxfSURcIn0oSGV8fChIZT17fSkpO3ZhciBRZSxXZSxKZSx6ZSxaZSxYZT0oKFllPXt9KVtIZS5TVFJJTkddPWVlLFllW0hlLk9OTFlfU1RSSU5HXT1KLFllW0hlLk5VTUJFUl09WixZZVtIZS5CT09MRUFOXT1mdW5jdGlvbihlKXtyZXR1cm5cImJvb2xlYW5cIj09dHlwZW9mIGV9LFllW0hlLk9CSkVDVF09bmUsWWVbSGUuQVJSQVldPVgsWWVbSGUuQ0FMTEJBQ0tdPWZ1bmN0aW9uKGUpe3ZhciB0PSEwO3JldHVybiBuZShlKXx8KHQ9ITEpLChlPWV8fHt9KS5vblN1Y2Nlc3MmJiFpZShlLm9uU3VjY2VzcykmJih0PSExKSxlLm9uRXJyb3ImJiFpZShlLm9uRXJyb3IpJiYodD0hMSksdH0sWWVbSGUuQ0hBTk5FTF9JRF09ZnVuY3Rpb24oZSl7dmFyIHQ9ITE7cmV0dXJuIEooZSkmJiEvXy9nLnRlc3QoZSkmJmUubGVuZ3RoPD0yMCYmKHQ9ITApLHR9LFllKSwkZT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQpe3ZhciBuPWUuY2FsbCh0aGlzLHQpfHx0aGlzO3JldHVybiBuLm5hbWU9XCJSQ0Fzc2VydEVycm9yXCIsbn1yZXR1cm4gTih0LGUpLHR9KEVycm9yKSxldD1mdW5jdGlvbihlLHQsbixpKXtpZih2b2lkIDA9PT1pJiYoaT0hMSksIXR0KGUsdCxuLGkpKXRocm93IG5ldyAkZShcIidcIitlK1wiJyBpcyBpbnZhbGlkOiBcIitKU09OLnN0cmluZ2lmeSh0KSl9LHR0PWZ1bmN0aW9uKGUsdCxuLGkpe3ZvaWQgMD09PWkmJihpPSExKSxuPVhlW25dfHxuO3ZhciByPWkmJiFuKHQpfHwhaSYmIShyZSh0KXx8bnVsbD09PXR8fG4odCkpO3JldHVybiByJiZwZS5lcnJvcihcIidcIitlK1wiJyBpcyBpbnZhbGlkOiBcIitKU09OLnN0cmluZ2lmeSh0KSksIXJ9LG50PWZ1bmN0aW9uKGUpe2lmKCFuZShlKXx8dm9pZCAwPT09ZS5sb3d8fHZvaWQgMD09PWUuaGlnaClyZXR1cm4gZTt2YXIgdD1lLmxvdztyZXR1cm4gdDwwJiYodCs9NDI5NDk2NzI5NiksdD10LnRvU3RyaW5nKDE2KSxwYXJzZUludChlLmhpZ2gudG9TdHJpbmcoMTYpK1wiMDAwMDAwMDBcIi5yZXBsYWNlKG5ldyBSZWdFeHAoXCIwe1wiK3QubGVuZ3RoK1wifSRcIiksdCksMTYpfSxpdD1mdW5jdGlvbihlLHQpe3ZhciBuPU1hdGguZmxvb3IoMWUzKk1hdGgucmFuZG9tKCklMWU0KSxpPVkoKSxyPWZ1bmN0aW9uKGUpe2U9ZXx8XCItXCI7dmFyIHQ9bmV3IERhdGU7cmV0dXJuXCJcIit0LmdldEZ1bGxZZWFyKCkrZSsodC5nZXRNb250aCgpKzEpK2UrdC5nZXREYXRlKCl9KCkscz0obmV3IERhdGUpLmdldFRpbWUoKSxvPVwiXCI7aWYodCl7dmFyIGE9dC5zcGxpdChcIi5cIik7bz1cIi5cIithW2EubGVuZ3RoLTFdfXJldHVybiBlK1wiX19SQy1cIityK1wiX1wiK24rXCJfXCIrcytpK299LHJ0PWZ1bmN0aW9uKGUpe3ZhciB0PVwiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtXCI7c3dpdGNoKGUpe2Nhc2UgVy5JTUFHRTp0PVwiaW1hZ2UvanBlZ1wiO2JyZWFrO2Nhc2UgVy5BVURJTzp0PVwiYXVkaW8vYW1yXCI7YnJlYWs7Y2FzZSBXLlZJREVPOnQ9XCJ2aWRlby8zZ3BwXCI7YnJlYWs7Y2FzZSBXLlNJR0hUOnQ9XCJ2aWRlby9tcGVnNFwiO2JyZWFrO2Nhc2UgVy5DT01CSU5FX0hUTUw6dD1cInRleHQvaHRtbFwifXJldHVybiB0fSxzdD1mdW5jdGlvbihlLHQpe3ZvaWQgMD09PWUmJihlPXt9KSx2b2lkIDA9PT10JiYodD17fSk7dmFyIG49ZS50aHJlYWRJZCxpPWUuYXBuc0NvbGxhcHNlSWQscj1lLmNhdGVnb3J5LHM9ZS5yaWNoTWVkaWFVcmksbz10LmNoYW5uZWxJZE1pLGE9dC5jaGFubmVsSWRIVyx1PXQuY2hhbm5lbElkT1BQTyxjPXQudHlwZVZpdm8saD10Lmdvb2dsZUNvbmZpZyxsPXt9O2xbXCJ0aHJlYWQtaWRcIl09bnx8XCJcIixsW1wiYXBucy1jb2xsYXBzZS1pZFwiXT1pfHxcIlwiLGwuY2F0ZWdvcnk9cnx8XCJcIixsLnJpY2hNZWRpYVVyaT1zfHxcIlwiO3ZhciBkPXt9O2QuY29sbGFwc2Vfa2V5PW51bGw9PWg/dm9pZCAwOmguY29sbGFwc2VLZXksZC5pbWFnZVVybD1udWxsPT1oP3ZvaWQgMDpoLmltYWdlVXJsO3ZhciBmPW51bGw9PWg/dm9pZCAwOmgucHJpb3JpdHk7ZiYmIVtcImhpZ2hcIixcIm5vcm1hbFwiXS5pbmNsdWRlcyhmKSYmKGY9XCJub3JtYWxcIiksZC5wcmlvcml0eT1mO3ZhciBwPVt7SFc6e2NoYW5uZWxJZDphfHxcIlwifX0se01JOntjaGFubmVsSWQ6b3x8XCJcIn19LHtPUFBPOntjaGFubmVsSWQ6dXx8XCJcIn19LHtWSVZPOntjbGFzc2lmaWNhdGlvbjpjfHxcIlwifX0se0FQTlM6bH0se0ZDTTpkfV07cmV0dXJuIEpTT04uc3RyaW5naWZ5KHApfSxvdD1mdW5jdGlvbihlLHQpe3ZhciBuPXt9LGk9e25vdGlmaWNhdGlvbklkOnR8fFwiXCJ9O2lmKCFlKXJldHVybntpT1NDb25maWc6bixhbmRyb2lkQ29uZmlnOml9O3RyeXt2YXIgcj1KU09OLnBhcnNlKGUpO251bGw9PXJ8fHIuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHQscixzLG8sYT1PYmplY3Qua2V5cyhlKTtpZigwIT09YS5sZW5ndGgpe3ZhciB1PWFbMF07c3dpdGNoKHUpe2Nhc2VcIkhXXCI6cmV0dXJuIHZvaWQoaS5jaGFubmVsSWRIVz1udWxsPT09KHQ9ZVt1XSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuY2hhbm5lbElkKTtjYXNlXCJNSVwiOnJldHVybiB2b2lkKGkuY2hhbm5lbElkTWk9bnVsbD09PShyPWVbdV0pfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLmNoYW5uZWxJZCk7Y2FzZVwiT1BQT1wiOnJldHVybiB2b2lkKGkuY2hhbm5lbElkT1BQTz1udWxsPT09KHM9ZVt1XSl8fHZvaWQgMD09PXM/dm9pZCAwOnMuY2hhbm5lbElkKTtjYXNlXCJWSVZPXCI6cmV0dXJuIHZvaWQoaS50eXBlVml2bz1udWxsPT09KG89ZVt1XSl8fHZvaWQgMD09PW8/dm9pZCAwOm8uY2xhc3NpZmljYXRpb24pO2Nhc2VcIkFQTlNcIjpyZXR1cm4gbi50aHJlYWRJZD1lW3VdW1widGhyZWFkLWlkXCJdLG4uYXBuc0NvbGxhcHNlSWQ9ZVt1XVtcImFwbnMtY29sbGFwc2UtaWRcIl0sbi5jYXRlZ29yeT1lW3VdLmNhdGVnb3J5LHZvaWQobi5yaWNoTWVkaWFVcmk9ZVt1XS5yaWNoTWVkaWFVcmkpO2Nhc2VcIkZDTVwiOmkuZ29vZ2xlQ29uZmlnPXtjb2xsYXBzZUtleTplW3VdLmNvbGxhcHNlX2tleXx8XCJcIixpbWFnZVVybDplW3VdLmltYWdlVXJsfHxcIlwiLHByaW9yaXR5OmVbdV0ucHJpb3JpdHl8fFwiXCJ9fX19KSl9Y2F0Y2godCl7cGUuZXJyb3IoXCJXcm9uZyBmb3JtYXQgZm9yIHB1c2hDb25maWdzIGZpZWxkISBjb250ZW50OiBcIitlKX1yZXR1cm57aU9TQ29uZmlnOm4sYW5kcm9pZENvbmZpZzppfX0sYXQ9ZnVuY3Rpb24oZSl7dmFyIHQ9L15bQS1aYS16MC05Xz0rLV0rJC8udGVzdChlKSxuPWUubGVuZ3RoO3JldHVybiB0JiYobjw9MTI4JiZuPj0xKX0sdXQ9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5sZW5ndGg7cmV0dXJuIHQ8PTQwOTYmJnQ+PTF9LGN0PWZ1bmN0aW9uKGUsdCxuKXt0PXR8fGZ1bmN0aW9uKCl7fTt2YXIgaT0obj1ufHx7fSkuaXNSZXZlcnNlO25lKGUpJiZmdW5jdGlvbigpe2Zvcih2YXIgbiBpbiBlKXQoZVtuXSxuLGUpfSgpLChYKGUpfHxKKGUpKSYmZnVuY3Rpb24oKXtpZihpKWZvcih2YXIgbj1lLmxlbmd0aC0xO24+PTA7bi0tKXQoZVtuXSxuKTtlbHNlIGZvcih2YXIgcj0wLHM9ZS5sZW5ndGg7cjxzO3IrKyl0KGVbcl0scil9KCl9LGh0PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGN0KGUsKGZ1bmN0aW9uKG4saSl7ZVtpXT10KG4saSl9KSksZX0sbHQ9ZnVuY3Rpb24oZSx0KXtpZihlLmluZGV4T2YpcmV0dXJuIGUuaW5kZXhPZih0KTt2YXIgbj0tMTtyZXR1cm4gY3QoZSwoZnVuY3Rpb24oZSxpKXt0PT09ZSYmKG49aSl9KSksbn0sZHQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4tMSE9PWx0KGUsdCl9LGZ0PWZ1bmN0aW9uKGUsdCl7dmFyIG49W107cmV0dXJuIGN0KGUsKGZ1bmN0aW9uKGUpe24ucHVzaChlKX0pKSwtMSE9PWx0KG4sdCl9LHB0PWZ1bmN0aW9uKGUpe3JldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGUpKX0sZ3Q9ZnVuY3Rpb24oKXtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2YgUkNDcHBFbmdpbmV9LF90PWZ1bmN0aW9uKGUpe2lmKFwiYnJvd3NlclwiIT09ZS50YWcpcmV0dXJue3R5cGU6ZS50YWcsdmVyc2lvbjpcIlVuS29ud1wifTt2YXIgdCxuLGk9bmF2aWdhdG9yLnVzZXJBZ2VudCxyPXtJRTovcnY6KFtcXGQuXSspXFwpIGxpa2UgR2Vja298TVNJRSAoW1xcZC5dKykvLEVkZ2U6L0VkZ2VcXC8oW1xcZC5dKykvLEZpcmVmb3g6L0ZpcmVmb3hcXC8oW1xcZC5dKykvLE9wZXJhOi8oPzpPUEVSQXxPUFIpLihbXFxkLl0rKS8sV2VDaGF0Oi9NaWNyb01lc3NlbmdlclxcLyhbXFxkLl0rKS8sUVFCcm93c2VyOi9RUUJyb3dzZXJcXC8oW1xcZC5dKykvLENocm9tZTovQ2hyb21lXFwvKFtcXGQuXSspLyxTYWZhcmk6L1ZlcnNpb25cXC8oW1xcZC5dKykuKlNhZmFyaS8saU9TQ2hyb21lOi9Nb2JpbGVcXC8oW1xcZC5dKykuKlNhZmFyaS99O2Zvcih2YXIgcyBpbiByKWlmKHIuaGFzT3duUHJvcGVydHkocykpe3ZhciBvPWkubWF0Y2gocltzXSk7aWYobyl7bj1zLHQ9b1sxXXx8b1syXTticmVha319cmV0dXJue3R5cGU6bnx8XCJVbktvbndcIix2ZXJzaW9uOnR8fFwiVW5Lb253XCJ9fSx5dD1mdW5jdGlvbihlKXtzd2l0Y2goZSl7Y2FzZSBUZS5TRVJWRVJfVU5BVkFJTEFCTEU6cmV0dXJuIEVlLlNFUlZFUl9VTkFWQUlMQUJMRTtjYXNlIFRlLlRPS0VOX0lOQ09SUkVDVDpyZXR1cm4gRWUuUkNfQ09OTl9VU0VSX09SX1BBU1NXRF9FUlJPUjtjYXNlIFRlLlJFRElSRUNUOnJldHVybiBFZS5SQ19DT05OX1JFRElSRUNURUQ7Y2FzZSBUZS5BUFBfQkxPQ0tfT1JfREVMRVRFOnJldHVybiBFZS5SQ19DT05OX0FQUF9CTE9DS0VEX09SX0RFTEVURUQ7Y2FzZSBUZS5CTE9DSzpyZXR1cm4gRWUuUkNfQ09OTl9VU0VSX0JMT0NLRUQ7Y2FzZSBUZS5UT0tFTl9FWFBJUkU6cmV0dXJuIEVlLlJDX0NPTk5fVVNFUl9PUl9QQVNTV0RfRVJST1I7Y2FzZSBUZS5IT1NUTkFNRV9FUlJPUjpyZXR1cm4gRWUuSE9TVE5BTUVfRVJST1I7Y2FzZSBUZS5IQVNPSFRFUlNBTUVDTElFTlRPTkxJTkU6cmV0dXJuIEVlLkhBU19PSFRFUl9TQU1FX0NMSUVOVF9PTl9MSU5FO2Nhc2UgVGUuQVBQX0FVVEhfTk9UX1BBU1M6cmV0dXJuIEVlLlJDX0FQUF9BVVRIX05PVF9QQVNTO2Nhc2UgVGUuT1RQX1VTRUQ6cmV0dXJuIEVlLlJDX09UUF9VU0VEO2Nhc2UgVGUuUExBVEZPUk1fRVJST1I6cmV0dXJuIEVlLlJDX1BMQVRGT1JNX0VSUk9SO2RlZmF1bHQ6cmV0dXJuIEVlLlJDX05FVF9VTkFWQUlMQUJMRX19LHZ0PWZ1bmN0aW9uKGUpe3ZhciB0PXt9LG49SlNPTi5wYXJzZShlKTtyZXR1cm4gY3QobiwoZnVuY3Rpb24oZSxuKXt0W25dPWUudn0pKSx0fSxFdD17X2RlbGF5VGltZTowLHNldFRpbWU6ZnVuY3Rpb24oZSl7dmFyIHQ9KG5ldyBEYXRlKS5nZXRUaW1lKCk7RXQuX2RlbGF5VGltZT10LWV9LGdldFRpbWU6ZnVuY3Rpb24oKXt2YXIgZT1FdC5fZGVsYXlUaW1lO3JldHVybihuZXcgRGF0ZSkuZ2V0VGltZSgpLWV9fSxtdD1mdW5jdGlvbihlLHQpe3ZhciBuPTA7cmV0dXJuIGUuaXNBdXRvRGVsZXRlJiYobnw9MSksZS5pc092ZXJ3cml0ZSYmKG58PTIpLDI9PT10JiYobnw9NCksbn07IWZ1bmN0aW9uKGUpe2VbZS5BVF9NT1NUX09OQ0U9MF09XCJBVF9NT1NUX09OQ0VcIixlW2UuQVRfTEVBU1RfT05DRT0xXT1cIkFUX0xFQVNUX09OQ0VcIixlW2UuRVhBQ1RMWV9PTkNFPTJdPVwiRVhBQ1RMWV9PTkNFXCIsZVtlLkRFRkFVTFQ9M109XCJERUZBVUxUXCJ9KFFlfHwoUWU9e30pKSxmdW5jdGlvbihlKXtlW2UuU1lNTUVUUklDPTBdPVwiU1lNTUVUUklDXCIsZVtlLkNPTk5FQ1Q9MV09XCJDT05ORUNUXCIsZVtlLkNPTk5fQUNLPTJdPVwiQ09OTl9BQ0tcIixlW2UuUFVCTElTSD0zXT1cIlBVQkxJU0hcIixlW2UuUFVCX0FDSz00XT1cIlBVQl9BQ0tcIixlW2UuUVVFUlk9NV09XCJRVUVSWVwiLGVbZS5RVUVSWV9BQ0s9Nl09XCJRVUVSWV9BQ0tcIixlW2UuUVVFUllfQ09ORklSTT03XT1cIlFVRVJZX0NPTkZJUk1cIixlW2UuU1VCU0NSSUJFPThdPVwiU1VCU0NSSUJFXCIsZVtlLlNVQl9BQ0s9OV09XCJTVUJfQUNLXCIsZVtlLlVOU1VCU0NSSUJFPTEwXT1cIlVOU1VCU0NSSUJFXCIsZVtlLlVOU1VCX0FDSz0xMV09XCJVTlNVQl9BQ0tcIixlW2UuUElOR19SRVE9MTJdPVwiUElOR19SRVFcIixlW2UuUElOR19SRVNQPTEzXT1cIlBJTkdfUkVTUFwiLGVbZS5ESVNDT05ORUNUPTE0XT1cIkRJU0NPTk5FQ1RcIixlW2UuUkVTRVJWRVIyPTE1XT1cIlJFU0VSVkVSMlwifShXZXx8KFdlPXt9KSksZnVuY3Rpb24oZSl7ZS5DT05OX0FDSz1cIkNvbm5BY2tNZXNzYWdlXCIsZS5ESVNDT05ORUNUPVwiRGlzY29ubmVjdE1lc3NhZ2VcIixlLlBJTkdfUkVRPVwiUGluZ1JlcU1lc3NhZ2VcIixlLlBJTkdfUkVTUD1cIlBpbmdSZXNwTWVzc2FnZVwiLGUuUFVCTElTSD1cIlB1Ymxpc2hNZXNzYWdlXCIsZS5QVUJfQUNLPVwiUHViQWNrTWVzc2FnZVwiLGUuUVVFUlk9XCJRdWVyeU1lc3NhZ2VcIixlLlFVRVJZX0NPTj1cIlF1ZXJ5Q29uTWVzc2FnZVwiLGUuUVVFUllfQUNLPVwiUXVlcnlBY2tNZXNzYWdlXCJ9KEplfHwoSmU9e30pKSxmdW5jdGlvbihlKXtlLlBVQj1cInB1YlwiLGUuUVVFUlk9XCJxcnlcIn0oemV8fCh6ZT17fSkpLGZ1bmN0aW9uKGUpe2VbZS5WND00XT1cIlY0XCIsZVtlLlYzPTNdPVwiVjNcIn0oWmV8fChaZT17fSkpO3ZhciBJdCxUdD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LG4saSl7dm9pZCAwPT09dCYmKHQ9ITEpLHZvaWQgMD09PW4mJihuPVFlLkFUX0xFQVNUX09OQ0UpLHZvaWQgMD09PWkmJihpPSExKSx0aGlzLl9yZXRhaW49ITEsdGhpcy5xb3M9UWUuQVRfTEVBU1RfT05DRSx0aGlzLl9kdXA9ITEsdGhpcy5zeW5jTXNnPSExO3ZhciByPWU+MDtlJiZyJiYxPT09YXJndW1lbnRzLmxlbmd0aD8odGhpcy5fcmV0YWluPSgxJmUpPjAsdGhpcy5xb3M9KDYmZSk+PjEsdGhpcy5fZHVwPSg4JmUpPjAsdGhpcy50eXBlPWU+PjQmMTUsdGhpcy5zeW5jTXNnPTg9PSg4JmUpKToodGhpcy50eXBlPWUsdGhpcy5fcmV0YWluPXQsdGhpcy5xb3M9bix0aGlzLl9kdXA9aSl9cmV0dXJuIGUucHJvdG90eXBlLmVuY29kZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMudHlwZTw8NDtyZXR1cm4gZXw9dGhpcy5fcmV0YWluPzE6MCxlfD10aGlzLnFvczw8MSxlfD10aGlzLl9kdXA/ODowfSxlfSgpLEN0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe31yZXR1cm4gZS53cml0ZVVURj1mdW5jdGlvbihlLHQpe3ZhciBuPVtdLGk9MDtpZihKKGUpKWZvcih2YXIgcj0wLHM9ZS5sZW5ndGg7cjxzO3IrKyl7dmFyIG89ZS5jaGFyQ29kZUF0KHIpO28+PTAmJm88PTEyNz8oaSs9MSxuLnB1c2gobykpOm8+PTEyOCYmbzw9MjA0Nz8oaSs9MixuLnB1c2goMTkyfDMxJm8+PjYpLG4ucHVzaCgxMjh8NjMmbykpOm8+PTIwNDgmJm88PTY1NTM1JiYoaSs9MyxuLnB1c2goMjI0fDE1Jm8+PjEyKSxuLnB1c2goMTI4fDYzJm8+PjYpLG4ucHVzaCgxMjh8NjMmbykpfWZvcihyPTAscz1uLmxlbmd0aDtyPHM7cisrKW5bcl0+MjU1JiYobltyXSY9MjU1KTtyZXR1cm4gdD9uOmk8PTI1NT9bMCxpXS5jb25jYXQobik6W2k+PjgsMjU1JmldLmNvbmNhdChuKX0sZS5yZWFkVVRGPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuLGk9W10scj0tMSxzPWUsbz1cIlwiOysrcjxzLmxlbmd0aDspe3ZhciBhPU51bWJlcihzW3JdKTtpZihhPT09KDEyNyZhKXx8KDI0MD09KDI0MCZhKT9hPShhPShhPShhXj0yNDApPDw2fDEyOF5zWysrcl0pPDw2fDEyOF5zWysrcl0pPDw2fDEyOF5zWysrcl06MjI0PT0oMjI0JmEpP2E9KGE9KGFePTIyNCk8PDZ8MTI4XnNbKytyXSk8PDZ8MTI4XnNbKytyXToxOTI9PSgxOTImYSkmJihhPShhXj0xOTIpPDw2fDEyOF5zWysrcl0pKSwhaXNGaW5pdGUoYSl8fGE8MHx8YT4xMTE0MTExfHxNYXRoLmZsb29yKGEpIT09YSl0aHJvdyBSYW5nZUVycm9yKFwiSW52YWxpZCBjb2RlIHBvaW50OiBcIithKTthPD02NTUzNT9pLnB1c2goYSk6KHQ9KGEtPTY1NTM2KT4+MTB8NTUyOTYsbj1hJTEwMjR8NTYzMjAsaS5wdXNoKHQsbikpLChyKzE9PT1zLmxlbmd0aHx8aS5sZW5ndGg+MTYzODQpJiYobys9U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLGkpLGkubGVuZ3RoPTApfXJldHVybiBvfSxlfSgpLFJ0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLl9wb3NpdGlvbj0wLHRoaXMuX3Bvb2xMZW49MCx0aGlzLl9wb29sPWUsdGhpcy5fcG9vbExlbj1lLmxlbmd0aH1yZXR1cm4gZS5wcm90b3R5cGUuY2hlY2s9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcG9zaXRpb24+PXRoaXMuX3Bvb2wubGVuZ3RofSxlLnByb3RvdHlwZS5yZWFkMkJ5dGU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2lmKGUuY2hlY2soKSlyZXR1cm4tMTtmb3IodmFyIHQ9XCJcIixuPTA7bjwyO24rKyl7dmFyIGk9ZS5fcG9vbFtlLl9wb3NpdGlvbisrXS50b1N0cmluZygxNik7MT09PWkubGVuZ3RoJiYoaT1cIjBcIitpKSx0Kz1pLnRvU3RyaW5nKCl9cmV0dXJuIHBhcnNlSW50KHQsMTYpfSxlLnByb3RvdHlwZS5yZWFkSW50PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztpZihlLmNoZWNrKCkpcmV0dXJuLTE7Zm9yKHZhciB0PVwiXCIsbj0wO248NDtuKyspe3ZhciBpPWUuX3Bvb2xbZS5fcG9zaXRpb24rK10udG9TdHJpbmcoMTYpOzE9PT1pLmxlbmd0aCYmKGk9XCIwXCIraSksdCs9aS50b1N0cmluZygpfXJldHVybiBwYXJzZUludCh0LDE2KX0sZS5wcm90b3R5cGUucmVhZExvbmc9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2lmKGUuY2hlY2soKSlyZXR1cm4tMTtmb3IodmFyIHQ9XCJcIixuPTA7bjw4O24rKyl7dmFyIGk9ZS5fcG9vbFtlLl9wb3NpdGlvbisrXS50b1N0cmluZygxNik7MT09PWkubGVuZ3RoJiYoaT1cIjBcIitpKSx0Kz1pfXJldHVybiBwYXJzZUludCh0LDE2KX0sZS5wcm90b3R5cGUucmVhZEJ5dGU9ZnVuY3Rpb24oKXtpZih0aGlzLmNoZWNrKCkpcmV0dXJuLTE7dmFyIGU9dGhpcy5fcG9vbFt0aGlzLl9wb3NpdGlvbisrXTtyZXR1cm4gZT4yNTUmJihlJj0yNTUpLGV9LGUucHJvdG90eXBlLnJlYWRVVEY9ZnVuY3Rpb24oKXtpZih0aGlzLmNoZWNrKCkpcmV0dXJuXCJcIjt2YXIgZT10aGlzLnJlYWRCeXRlKCk8PDh8dGhpcy5yZWFkQnl0ZSgpLHQ9dGhpcy5fcG9vbC5zdWJhcnJheSh0aGlzLl9wb3NpdGlvbix0aGlzLl9wb3NpdGlvbis9ZSk7cmV0dXJuIEN0LnJlYWRVVEYodCl9LGUucHJvdG90eXBlLnJlYWRBbGw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcG9vbC5zdWJhcnJheSh0aGlzLl9wb3NpdGlvbix0aGlzLl9wb29sTGVuKX0sZX0oKSxTdD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLl9wb29sPVtdLHRoaXMuX3Bvc2l0aW9uPTAsdGhpcy5fd3JpdGVuPTB9cmV0dXJuIGUucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUpe3JldHVybi0xIT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpLmluZGV4T2YoXCJBcnJheVwiKT90aGlzLl9wb29sPXRoaXMuX3Bvb2wuY29uY2F0KGUpOmU+PTAmJihlPjI1NSYmKGUmPTI1NSksdGhpcy5fcG9vbC5wdXNoKGUpLHRoaXMuX3dyaXRlbisrKSxlfSxlLnByb3RvdHlwZS53cml0ZUFycj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fcG9vbD10aGlzLl9wb29sLmNvbmNhdChlKSxlfSxlLnByb3RvdHlwZS53cml0ZVVURj1mdW5jdGlvbihlKXt2YXIgdD1DdC53cml0ZVVURihlKTt0aGlzLl9wb29sPXRoaXMuX3Bvb2wuY29uY2F0KHQpLHRoaXMuX3dyaXRlbis9dC5sZW5ndGh9LGUucHJvdG90eXBlLmdldEJ5dGVzQXJyYXk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcG9vbH0sZX0oKSxOdD1cIlVwU3RyZWFtTWVzc2FnZVwiLE90PVwiUHVzaEV4dHJhXCIsd3Q9XCJEb3duU3RyZWFtTWVzc2FnZVwiLGJ0PVwiRG93blN0cmVhbU1lc3NhZ2VzXCIsTXQ9XCJTZXNzaW9uc0F0dFFyeUlucHV0XCIsQXQ9XCJTZXNzaW9uc0F0dE91dHB1dFwiLFV0PVwiU3luY1JlcXVlc3RNc2dcIixMdD1cIkNocm1QdWxsTXNnXCIsUHQ9XCJOb3RpZnlNc2dcIixEdD1cIkhpc3RvcnlNc2dJbnB1dFwiLFZ0PVwiSGlzdG9yeU1zZ091cHV0XCIsa3Q9XCJSZWxhdGlvblFyeUlucHV0XCIseHQ9XCJSZWxhdGlvbnNPdXRwdXRcIixCdD1cIkRlbGV0ZVNlc3Npb25zSW5wdXRcIixGdD1cIlNlc3Npb25JbmZvXCIsS3Q9XCJEZWxldGVTZXNzaW9uc091dHB1dFwiLHF0PVwiUmVsYXRpb25zSW5wdXRcIixZdD1cIkRlbGV0ZU1zZ0lucHV0XCIsSHQ9XCJDbGVhbkhpc01zZ0lucHV0XCIsR3Q9XCJTZXNzaW9uTXNnUmVhZElucHV0XCIsanQ9XCJDaHJtSW5wdXRcIixRdD1cIkNocm1PdXRwdXRcIixXdD1cIlF1ZXJ5Q2hhdFJvb21JbmZvSW5wdXRcIixKdD1cIlF1ZXJ5Q2hhdFJvb21JbmZvT3V0cHV0XCIsenQ9XCJSdGNJbnB1dFwiLFp0PVwiUnRjVXNlckxpc3RPdXRwdXRcIixYdD1cIlNldFVzZXJTdGF0dXNJbnB1dFwiLCR0PVwiUnRjU2V0RGF0YUlucHV0XCIsZW49XCJSdGNVc2VyU2V0RGF0YUlucHV0XCIsdG49XCJSdGNEYXRhSW5wdXRcIixubj1cIlJ0Y1NldE91dERhdGFJbnB1dFwiLHJuPVwiTUNGb2xsb3dJbnB1dFwiLHNuPVwiUnRjVG9rZW5PdXRwdXRcIixvbj1cIlJ0Y1FyeU91dHB1dFwiLGFuPVwiUnRjUXJ5VXNlck91dERhdGFJbnB1dFwiLHVuPVwiUnRjVXNlck91dERhdGFPdXRwdXRcIixjbj1cIlJ0Y1F1ZXJ5TGlzdElucHV0XCIsaG49XCJSdGNSb29tSW5mb091dHB1dFwiLGxuPVwiUnRjVmFsdWVJbmZvXCIsZG49XCJSdGNLZXlEZWxldGVJbnB1dFwiLGZuPVwiR2V0UU51cFRva2VuSW5wdXRcIixwbj1cIkdldFFOdXBUb2tlbk91dHB1dFwiLGduPVwiR2V0UU5kb3dubG9hZFVybElucHV0XCIsX249XCJHZXREb3dubG9hZFVybElucHV0XCIseW49XCJHZXRRTmRvd25sb2FkVXJsT3V0cHV0XCIsdm49XCJHZXREb3dubG9hZFVybE91dHB1dFwiLEVuPVwiU2V0Q2hybUtWXCIsbW49XCJTZXRDaHJtS1ZTXCIsSW49XCJEZWxldGVDaHJtS1ZTXCIsVG49XCJDaHJtS1ZPdXRwdXRcIixDbj1cIkNocm1LVlNPdXRwdXRcIixSbj1cIkNocm1LVlNPdXRwdXRFbnRpdHlcIixTbj1cIlF1ZXJ5Q2hybUtWXCIsTm49XCJTZXRVc2VyU2V0dGluZ0lucHV0XCIsT249XCJTZXRVc2VyU2V0dGluZ091dHB1dFwiLHduPVwiUHVsbFVzZXJTZXR0aW5nSW5wdXRcIixibj1cIlB1bGxVc2VyU2V0dGluZ091dHB1dFwiLE1uPVwiVXNlclNldHRpbmdOb3RpZmljYXRpb25cIixBbj1cIlNlc3Npb25SZXFcIixVbj1cIlNlc3Npb25TdGF0ZXNcIixMbj1cIlNlc3Npb25TdGF0ZVwiLFBuPVwiU2Vzc2lvblN0YXRlSXRlbVwiLERuPVwiU2Vzc2lvblN0YXRlTW9kaWZ5UmVxXCIsVm49XCJTZXNzaW9uU3RhdGVNb2RpZnlSZXNwXCIsa249XCJHcnBSZWFkUmVjZWlwdE1zZ1wiLHhuPVwiR3JwUmVhZFJlY2VpcHRRcnlSZXFcIixCbj1cIkdycFJlYWRSZWNlaXB0UXJ5UmVzcFwiLEZuPVwiR3JwTXNnUmVhZFVzZXJcIixLbj1cIlNlc3Npb25UYWdBZGRJbnB1dFwiLHFuPVwiU2Vzc2lvblRhZ0l0ZW1cIixZbj1cIlNlc3Npb25UYWdEZWxJbnB1dFwiLEhuPVwiU2Vzc2lvbkRpc1RhZ1JlcVwiLEduPVwiUmVwb3J0U0RLSW5wdXRcIixqbj1cIlJlcG9ydFNES091dHB1dFwiLFFuPVwiUnRjTm90aWZ5TXNnXCIsV249XCJSdGNQdWxsS1ZcIixKbj1cIlJ0Y0tWT3V0cHV0XCIsem49XCJSdGNRdWVyeVVzZXJKb2luZWRJbnB1dFwiLFpuPVwiUnRjUXVlcnlVc2VySm9pbmVkT3V0cHV0XCIsWG49XCJSdGNWaWV3ZXJKb2luZWRPdXRwdXRcIiwkbj1cIlJ0Y0ludml0ZUlucHV0XCIsZWk9XCJSdGNDYW5jZWxJbnZpdGVJbnB1dFwiLHRpPVwiUnRjSW52aXRlQW5zd2VySW5wdXRcIixuaT1cIlJ0Y0VuZEludml0ZUlucHV0XCIsaWk9KChJdD17fSlbTnRdPVtcInNlc3Npb25JZFwiLFwiY2xhc3NuYW1lXCIsXCJjb250ZW50XCIsXCJwdXNoVGV4dFwiLFwidXNlcklkXCIsXCJjb25maWdGbGFnXCIsXCJhcHBEYXRhXCIsXCJleHRyYUNvbnRlbnRcIixcInB1c2hFeHRcIixcImJ1c0NoYW5uZWxcIl0sSXRbYnRdPVtcImxpc3RcIixcInN5bmNUaW1lXCIsXCJmaW5pc2hlZFwiXSxJdFt3dF09W1wiZnJvbVVzZXJJZFwiLFwidHlwZVwiLFwiZ3JvdXBJZFwiLFwiY2xhc3NuYW1lXCIsXCJjb250ZW50XCIsXCJkYXRhVGltZVwiLFwic3RhdHVzXCIsXCJtc2dJZFwiLFwiZXh0cmFDb250ZW50XCIsXCJwdXNoQ29udGVudFwiLFwiY29uZmlnRmxhZ1wiLFwicHVzaEV4dFwiLFwiYnVzQ2hhbm5lbFwiXSxJdFtPdF09W1widGl0bGVcIixcInRlbXBsYXRlSWROb1VzZVwiLFwicHVzaElkXCIsXCJwdXNoQ29uZmlnc1wiLFwidGVtcGxhdGVJZFwiXSxJdFtNdF09W1wibm90aGluZ1wiXSxJdFtBdF09W1wiaW5ib3hUaW1lXCIsXCJzZW5kYm94VGltZVwiLFwidG90YWxVbnJlYWRDb3VudFwiXSxJdFtVdF09W1wic3luY1RpbWVcIixcImlzcG9sbGluZ1wiLFwiaXN3ZWJcIixcImlzUHVsbFNlbmRcIixcImlzS2VlcGluZ1wiLFwic2VuZEJveFN5bmNUaW1lXCJdLEl0W0x0XT1bXCJzeW5jVGltZVwiLFwiY291bnRcIl0sSXRbUHRdPVtcInR5cGVcIixcInRpbWVcIixcImNocm1JZFwiXSxJdFtEdF09W1widGFyZ2V0SWRcIixcInRpbWVcIixcImNvdW50XCIsXCJvcmRlclwiLFwiYnVzQ2hhbm5lbFwiXSxJdFtWdF09W1wibGlzdFwiLFwic3luY1RpbWVcIixcImhhc01zZ1wiXSxJdFtrdF09W1widHlwZVwiLFwiY291bnRcIixcInN0YXJ0VGltZVwiLFwib3JkZXJcIl0sSXRbeHRdPVtcImluZm9cIl0sSXRbQnRdPVtcInNlc3Npb25zXCJdLEl0W0Z0XT1bXCJ0eXBlXCIsXCJjaGFubmVsSWRcIixcImJ1c0NoYW5uZWxcIl0sSXRbS3RdPVtcIm5vdGhpbmdcIl0sSXRbcXRdPVtcInR5cGVcIixcIm1zZ1wiLFwiY291bnRcIixcImJ1c0NoYW5uZWxcIixcInN0YXJ0VGltZVwiLFwiZW5kVGltZVwiXSxJdFtZdF09W1widHlwZVwiLFwiY29udmVyc2F0aW9uSWRcIixcIm1zZ3NcIixcImJ1c0NoYW5uZWxcIl0sSXRbSHRdPVtcInRhcmdldElkXCIsXCJkYXRhVGltZVwiLFwiY29udmVyc2F0aW9uVHlwZVwiLFwiYnVzQ2hhbm5lbFwiXSxJdFtHdF09W1widHlwZVwiLFwibXNnVGltZVwiLFwiY2hhbm5lbElkXCJdLEl0W2p0XT1bXCJub3RoaW5nXCJdLEl0W1F0XT1bXCJub3RoaW5nXCIsXCJzZXNzaW9uSWRcIixcImpvaW5UaW1lXCJdLEl0W1d0XT1bXCJjb3VudFwiLFwib3JkZXJcIl0sSXRbSnRdPVtcInVzZXJUb3RhbE51bXNcIixcInVzZXJJbmZvc1wiXSxJdFtmbl09W1widHlwZVwiLFwia2V5XCIsXCJodHRwTWV0aG9kXCIsXCJxdWVyeVN0cmluZ1wiXSxJdFtnbl09W1widHlwZVwiLFwia2V5XCIsXCJmaWxlTmFtZVwiXSxJdFtfbl09W1widHlwZVwiLFwia2V5XCIsXCJmaWxlTmFtZVwiXSxJdFtwbl09W1wiZGVhZGxpbmVcIixcInRva2VuXCIsXCJib3NUb2tlblwiLFwiYm9zRGF0ZVwiLFwicGF0aFwiLFwib3Nza2V5SWRcIixcIm9zc1BvbGljeVwiLFwib3NzU2lnblwiLFwib3NzQnVja2V0TmFtZVwiXSxJdFt5bl09W1wiZG93bmxvYWRVcmxcIl0sSXRbdm5dPVtcImRvd25sb2FkVXJsXCJdLEl0W0VuXT1bXCJlbnRyeVwiLFwiYk5vdGlmeVwiLFwibm90aWZpY2F0aW9uXCIsXCJ0eXBlXCJdLEl0W21uXT1bXCJlbnRyeVwiLFwiYk5vdGlmeVwiLFwibm90aWZpY2F0aW9uXCIsXCJ0eXBlXCJdLEl0W0luXT1bXCJlbnRyeVwiLFwiYk5vdGlmeVwiLFwibm90aWZpY2F0aW9uXCIsXCJ0eXBlXCJdLEl0W1RuXT1bXCJlbnRyaWVzXCIsXCJiRnVsbFVwZGF0ZVwiLFwic3luY1RpbWVcIl0sSXRbQ25dPVtcInRpbWVzdGFtcFwiLFwiZXJyb3JLZXlzXCJdLEl0W1JuXT1bXCJrZXlcIixcImVycm9yQ29kZVwiXSxJdFtTbl09W1widGltZXN0YW1wXCJdLEl0W05uXT1bXCJ2ZXJzaW9uXCIsXCJ2YWx1ZVwiXSxJdFtPbl09W1widmVyc2lvblwiLFwicmVzZXJ2ZVwiXSxJdFt3bl09W1widmVyc2lvblwiLFwicmVzZXJ2ZVwiXSxJdFtibl09W1wiaXRlbXNcIixcInZlcnNpb25cIl0sSXQuVXNlclNldHRpbmdJdGVtPVtcInRhcmdldElkXCIsXCJ0eXBlXCIsXCJrZXlcIixcInZhbHVlXCIsXCJ2ZXJzaW9uXCIsXCJzdGF0dXNcIixcInRhZ3NcIl0sSXRbQW5dPVtcInRpbWVcIl0sSXRbVW5dPVtcInZlcnNpb25cIixcInN0YXRlXCJdLEl0W0xuXT1bXCJ0eXBlXCIsXCJjaGFubmVsSWRcIixcInRpbWVcIixcInN0YXRlSXRlbVwiLFwiYnVzQ2hhbm5lbFwiXSxJdFtQbl09W1wic2Vzc2lvblN0YXRlVHlwZVwiLFwidmFsdWVcIixcInRhZ3NcIl0sSXRbRG5dPVtcInZlcnNpb25cIixcInN0YXRlXCJdLEl0W1ZuXT1bXCJ2ZXJzaW9uXCJdLEl0W2tuXT1bXCJtc2dJZFwiLFwiYnVzQ2hhbm5lbFwiXSxJdFt4bl09W1wibXNnSWRcIixcImJ1c0NoYW5uZWxcIl0sSXRbQm5dPVtcInRvdGFsTWVtYmVyTnVtXCIsXCJsaXN0XCJdLEl0W0ZuXT1bXCJyZWFkVGltZVwiLFwidXNlcklkXCJdLEl0W0tuXT1bXCJ2ZXJzaW9uXCIsXCJ0YWdzXCJdLEl0W3FuXT1bXCJ0YWdJZFwiLFwibmFtZVwiLFwiY3JlYXRlZFRpbWVcIixcImlzVG9wXCJdLEl0W1luXT1bXCJ2ZXJzaW9uXCIsXCJ0YWdzXCJdLEl0W0huXT1bXCJ0YWdJZFwiXSxJdFtNbl09W1widmVyc2lvblwiLFwicmVzZXJ2ZVwiXSxJdFtHbl09W1wic2RrSW5mb1wiXSxJdFtqbl09W1wibm90aGluZ1wiXSxJdFt6dF09W1wicm9vbVR5cGVcIixcImJyb2FkY2FzdFR5cGVcIixcImV4dHJhSW5uZXJEYXRhXCIsXCJuZWVkU3lzQ2hhdHJvb21cIixcImlkZW50aXR5Q2hhbmdlVHlwZVwiLFwiam9pblR5cGVcIl0sSXRbWnRdPVtcInVzZXJzXCIsXCJ0b2tlblwiLFwic2Vzc2lvbklkXCIsXCJyb29tSW5mb1wiXSxJdFtYdF09W1wic3RhdHVzXCJdLEl0WyR0XT1bXCJpbnRlcmlvclwiLFwidGFyZ2V0XCIsXCJrZXlcIixcInZhbHVlXCIsXCJvYmplY3ROYW1lXCIsXCJjb250ZW50XCJdLEl0W2VuXT1bXCJ2YWx1ZUluZm9cIixcIm9iamVjdE5hbWVcIixcImNvbnRlbnRcIl0sSXRbdG5dPVtcImludGVyaW9yXCIsXCJ0YXJnZXRcIixcImtleVwiLFwib2JqZWN0TmFtZVwiLFwiY29udGVudFwiXSxJdFtubl09W1widGFyZ2V0XCIsXCJ2YWx1ZUluZm9cIixcIm9iamVjdE5hbWVcIixcImNvbnRlbnRcIl0sSXRbcm5dPVtcInN0YXRlXCJdLEl0W3NuXT1bXCJydGNUb2tlblwiXSxJdFtvbl09W1wib3V0SW5mb1wiXSxJdFthbl09W1widXNlcklkXCJdLEl0W3VuXT1bXCJ1c2VyXCJdLEl0W2NuXT1bXCJvcmRlclwiXSxJdFtobl09W1wicm9vbUlkXCIsXCJyb29tRGF0YVwiLFwidXNlckNvdW50XCIsXCJsaXN0XCJdLEl0W2xuXT1bXCJrZXlcIixcInZhbHVlXCJdLEl0W2RuXT1bXCJrZXlcIl0sSXRbUW5dPVtcInR5cGVcIixcInRpbWVcIixcInJvb21JZFwiXSxJdFtXbl09W1widGltZXN0YW1wXCIsXCJyb29tSWRcIl0sSXRbSm5dPVtcImVudHJpZXNcIixcImJGdWxsVXBkYXRlXCIsXCJzeW5jVGltZVwiXSxJdFt6bl09W1widXNlcklkXCJdLEl0W1puXT1bXCJpbmZvXCJdLEl0WyRuXT1bXCJpbnZpdGVkVXNlcklkXCIsXCJ0aW1lb3V0VGltZVwiLFwiaW52aXRlZFJvb21JZFwiLFwiaW52aXRlSW5mb1wiLFwiaW52aXRlU2Vzc2lvbklkXCJdLEl0W2VpXT1bXCJpbnZpdGVkVXNlcklkXCIsXCJpbnZpdGVkUm9vbUlkXCIsXCJpbnZpdGVJbmZvXCIsXCJpbnZpdGVTZXNzaW9uSWRcIl0sSXRbdGldPVtcImludml0ZVVzZXJJRFwiLFwiYW5zd2VyQ29kZVwiLFwiaW52aXRlUm9vbUlkXCIsXCJpbnZpdGVTZXNzaW9uSWRcIixcImNvbnRlbnRcIixcImtleVwiLFwidmFsdWVcIl0sSXRbbmldPVtcImludml0ZVJvb21JZFwiLFwiaW52aXRlU2Vzc2lvbklkXCIsXCJpbnZpdGVDb250ZW50XCIsXCJpbnZpdGVSb29tS2V5c1wiXSxJdCkscmk9e30sc2k9ZnVuY3Rpb24oZSl7dmFyIHQ9aWlbZV07cmlbZV09ZnVuY3Rpb24oKXtmb3IodmFyIGU9e30sbj17Z2V0QXJyYXlEYXRhOmZ1bmN0aW9uKCl7cmV0dXJuIGV9fSxpPWZ1bmN0aW9uKGkpe3ZhciByPXRbaV0scz1cInNldFwiK0QociwwLDEpO25bc109ZnVuY3Rpb24odCl7ZVtyXT10fX0scj0wO3I8dC5sZW5ndGg7cisrKWkocik7cmV0dXJuIG59LHJpW2VdLmRlY29kZT1mdW5jdGlvbihlKXt2YXIgdD17fTtKKGUpJiYoZT1KU09OLnBhcnNlKGUpKTt2YXIgbj1mdW5jdGlvbihuKXt2YXIgaT1cImdldFwiK0QobiwwLDEpO3Rbbl09ZVtuXSx0W2ldPWZ1bmN0aW9uKCl7cmV0dXJuIGVbbl19fTtmb3IodmFyIGkgaW4gZSluKGkpO3JldHVybiB0fX07Zm9yKHZhciBvaSBpbiBpaSlzaShvaSk7cmkuZ2V0TW9kdWxlPWZ1bmN0aW9uKGUpe3JldHVybiByaVtlXSgpfTt2YXIgYWk9XCJcXG5wYWNrYWdlIE1vZHVsZXM7XFxubWVzc2FnZSBwcm9idWYge1xcbiAgbWVzc2FnZSBcIitYdCtcIlxcbiAge1xcbiAgICBvcHRpb25hbCBpbnQzMiBzdGF0dXM9MTtcXG4gIH1cXG5cXG4gIG1lc3NhZ2UgU2V0VXNlclN0YXR1c091dHB1dFxcbiAge1xcbiAgICBvcHRpb25hbCBpbnQzMiBub3RoaW5nPTE7XFxuICB9XFxuXFxuICBtZXNzYWdlIEdldFVzZXJTdGF0dXNJbnB1dFxcbiAge1xcbiAgICBvcHRpb25hbCBpbnQzMiBub3RoaW5nPTE7XFxuICB9XFxuXFxuICBtZXNzYWdlIEdldFVzZXJTdGF0dXNPdXRwdXRcXG4gIHtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIHN0YXR1cz0xO1xcbiAgICBvcHRpb25hbCBzdHJpbmcgc3ViVXNlcklkPTI7XFxuICB9XFxuXFxuICBtZXNzYWdlIFN1YlVzZXJTdGF0dXNJbnB1dFxcbiAge1xcbiAgICByZXBlYXRlZCBzdHJpbmcgdXNlcmlkID0xO1xcbiAgfVxcblxcbiAgbWVzc2FnZSBTdWJVc2VyU3RhdHVzT3V0cHV0XFxuICB7XFxuICAgIG9wdGlvbmFsIGludDMyIG5vdGhpbmc9MTtcXG4gIH1cXG4gIG1lc3NhZ2UgVm9pcER5bmFtaWNJbnB1dFxcbiAge1xcbiAgICByZXF1aXJlZCBpbnQzMiAgZW5naW5lVHlwZSA9IDE7XFxuICAgIHJlcXVpcmVkIHN0cmluZyBjaGFubmVsTmFtZSA9IDI7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBjaGFubmVsRXh0cmEgPSAzO1xcbiAgfVxcblxcbiAgbWVzc2FnZSBWb2lwRHluYW1pY091dHB1dFxcbiAge1xcbiAgICAgIHJlcXVpcmVkIHN0cmluZyBkeW5hbWljS2V5PTE7XFxuICB9XFxuICBtZXNzYWdlIFwiK1B0K1wiIHtcXG4gICAgcmVxdWlyZWQgaW50MzIgdHlwZSA9IDE7XFxuICAgIG9wdGlvbmFsIGludDY0IHRpbWUgPSAyO1xcbiAgICBvcHRpb25hbCBzdHJpbmcgY2hybUlkPTM7XFxuICB9XFxuICBtZXNzYWdlIFwiK1V0K1wiIHtcXG4gICAgcmVxdWlyZWQgaW50NjQgc3luY1RpbWUgPSAxO1xcbiAgICByZXF1aXJlZCBib29sIGlzcG9sbGluZyA9IDI7XFxuICAgIG9wdGlvbmFsIGJvb2wgaXN3ZWI9MztcXG4gICAgb3B0aW9uYWwgYm9vbCBpc1B1bGxTZW5kPTQ7XFxuICAgIG9wdGlvbmFsIGJvb2wgaXNLZWVwaW5nPTU7XFxuICAgIG9wdGlvbmFsIGludDY0IHNlbmRCb3hTeW5jVGltZT02O1xcbiAgfVxcbiAgbWVzc2FnZSBcIitOdCtcIiB7XFxuICAgIHJlcXVpcmVkIGludDMyIHNlc3Npb25JZCA9IDE7XFxuICAgIHJlcXVpcmVkIHN0cmluZyBjbGFzc25hbWUgPSAyO1xcbiAgICByZXF1aXJlZCBieXRlcyBjb250ZW50ID0gMztcXG4gICAgb3B0aW9uYWwgc3RyaW5nIHB1c2hUZXh0ID0gNDtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIGFwcERhdGEgPSA1O1xcbiAgICByZXBlYXRlZCBzdHJpbmcgdXNlcklkID0gNjtcXG4gICAgb3B0aW9uYWwgaW50NjQgZGVsTXNnVGltZSA9IDc7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBkZWxNc2dJZCA9IDg7XFxuICAgIG9wdGlvbmFsIGludDMyIGNvbmZpZ0ZsYWcgPSA5O1xcbiAgICBvcHRpb25hbCBpbnQ2NCBjbGllbnRVbmlxdWVJZCA9IDEwO1xcbiAgICBvcHRpb25hbCBzdHJpbmcgZXh0cmFDb250ZW50ID0gMTE7XFxuICAgIG9wdGlvbmFsIFB1c2hFeHRyYSBwdXNoRXh0ID0gMTI7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBidXNDaGFubmVsID0gMTM7IC8vIOivpea2iOaBr+aJgOWxnuS8muivneeahOS4muWKoeagh+ivhlxcbiAgfVxcbiAgbWVzc2FnZSBcIitPdCtcIiB7XFxuICAgIG9wdGlvbmFsIHN0cmluZyB0aXRsZSA9IDE7XFxuICAgIG9wdGlvbmFsIGludDMyICB0ZW1wbGF0ZUlkTm9Vc2U9IDI7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBwdXNoSWQgPSAzO1xcbiAgICBvcHRpb25hbCBzdHJpbmcgcHVzaENvbmZpZ3MgPSA0O1xcbiAgICBvcHRpb25hbCBzdHJpbmcgdGVtcGxhdGVJZCA9IDU7XFxuICB9XFxuICBtZXNzYWdlIFwiK2J0K1wiIHtcXG4gICAgcmVwZWF0ZWQgRG93blN0cmVhbU1lc3NhZ2UgbGlzdCA9IDE7XFxuICAgIHJlcXVpcmVkIGludDY0IHN5bmNUaW1lID0gMjtcXG4gICAgb3B0aW9uYWwgYm9vbCBmaW5pc2hlZCA9IDM7XFxuICB9XFxuICBtZXNzYWdlIFwiK3d0K1wiIHtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIGZyb21Vc2VySWQgPSAxO1xcbiAgICByZXF1aXJlZCBDaGFubmVsVHlwZSB0eXBlID0gMjtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIGdyb3VwSWQgPSAzO1xcbiAgICByZXF1aXJlZCBzdHJpbmcgY2xhc3NuYW1lID0gNDtcXG4gICAgcmVxdWlyZWQgYnl0ZXMgY29udGVudCA9IDU7XFxuICAgIHJlcXVpcmVkIGludDY0IGRhdGFUaW1lID0gNjtcXG4gICAgcmVxdWlyZWQgaW50NjQgc3RhdHVzID0gNztcXG4gICAgb3B0aW9uYWwgaW50NjQgZXh0cmEgPSA4O1xcbiAgICBvcHRpb25hbCBzdHJpbmcgbXNnSWQgPSA5O1xcbiAgICBvcHRpb25hbCBpbnQzMiBkaXJlY3Rpb24gPSAxMDtcXG4gICAgb3B0aW9uYWwgaW50MzIgcGxhbnRmb3JtID0xMTtcXG4gICAgb3B0aW9uYWwgaW50MzIgaXNSZW1vdmVkID0gMTI7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBzb3VyY2UgPSAxMztcXG4gICAgb3B0aW9uYWwgaW50NjQgY2xpZW50VW5pcXVlSWQgPSAxNDtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIGV4dHJhQ29udGVudCA9IDE1O1xcbiAgICBvcHRpb25hbCBzdHJpbmcgcHVzaENvbnRlbnQgPSAxNjtcXG4gICAgb3B0aW9uYWwgaW50MzIgY29uZmlnRmxhZyA9IDE3O1xcbiAgICBvcHRpb25hbCBQdXNoRXh0cmEgcHVzaEV4dCA9IDE4O1xcbiAgICBvcHRpb25hbCBzdHJpbmcgYnVzQ2hhbm5lbCA9IDE5OyAvLyDor6Xmtojmga/miYDlsZ7kvJror53nmoTkuJrliqHmoIfor4bvvIzpmZDliLYyMOWtl+espuS7peWGhVxcbiAgfVxcbiAgZW51bSBDaGFubmVsVHlwZSB7XFxuICAgIFBFUlNPTiA9IDE7XFxuICAgIFBFUlNPTlMgPSAyO1xcbiAgICBHUk9VUCA9IDM7XFxuICAgIFRFTVBHUk9VUCA9IDQ7XFxuICAgIENVU1RPTUVSU0VSVklDRSA9IDU7XFxuICAgIE5PVElGWSA9IDY7XFxuICAgIE1DPTc7XFxuICAgIE1QPTg7XFxuICB9XFxuICBtZXNzYWdlIENyZWF0ZURpc2N1c3Npb25JbnB1dCB7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBuYW1lID0gMTtcXG4gIH1cXG4gIG1lc3NhZ2UgQ3JlYXRlRGlzY3Vzc2lvbk91dHB1dCB7XFxuICAgIHJlcXVpcmVkIHN0cmluZyBpZCA9IDE7XFxuICB9XFxuICBtZXNzYWdlIENoYW5uZWxJbnZpdGF0aW9uSW5wdXQge1xcbiAgICByZXBlYXRlZCBzdHJpbmcgdXNlcnMgPSAxO1xcbiAgfVxcbiAgbWVzc2FnZSBMZWF2ZUNoYW5uZWxJbnB1dCB7XFxuICAgIHJlcXVpcmVkIGludDMyIG5vdGhpbmcgPSAxO1xcbiAgfVxcbiAgbWVzc2FnZSBDaGFubmVsRXZpY3Rpb25JbnB1dCB7XFxuICAgIHJlcXVpcmVkIHN0cmluZyB1c2VyID0gMTtcXG4gIH1cXG4gIG1lc3NhZ2UgUmVuYW1lQ2hhbm5lbElucHV0IHtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIG5hbWUgPSAxO1xcbiAgfVxcbiAgbWVzc2FnZSBDaGFubmVsSW5mb0lucHV0IHtcXG4gICAgcmVxdWlyZWQgaW50MzIgbm90aGluZyA9IDE7XFxuICB9XFxuICBtZXNzYWdlIENoYW5uZWxJbmZvT3V0cHV0IHtcXG4gICAgcmVxdWlyZWQgQ2hhbm5lbFR5cGUgdHlwZSA9IDE7XFxuICAgIHJlcXVpcmVkIHN0cmluZyBjaGFubmVsSWQgPSAyO1xcbiAgICByZXF1aXJlZCBzdHJpbmcgY2hhbm5lbE5hbWUgPSAzO1xcbiAgICByZXF1aXJlZCBzdHJpbmcgYWRtaW5Vc2VySWQgPSA0O1xcbiAgICByZXBlYXRlZCBzdHJpbmcgZmlyc3RUZW5Vc2VySWRzID0gNTtcXG4gICAgcmVxdWlyZWQgaW50MzIgb3BlblN0YXR1cyA9IDY7XFxuICB9XFxuICBtZXNzYWdlIENoYW5uZWxJbmZvc0lucHV0IHtcXG4gICAgcmVxdWlyZWQgaW50MzIgcGFnZSA9IDE7XFxuICAgIG9wdGlvbmFsIGludDMyIG51bWJlciA9IDI7XFxuICB9XFxuICBtZXNzYWdlIENoYW5uZWxJbmZvc091dHB1dCB7XFxuICAgIHJlcGVhdGVkIENoYW5uZWxJbmZvT3V0cHV0IGNoYW5uZWxzID0gMTtcXG4gICAgcmVxdWlyZWQgaW50MzIgdG90YWwgPSAyO1xcbiAgfVxcbiAgbWVzc2FnZSBNZW1iZXJJbmZvIHtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIHVzZXJJZCA9IDE7XFxuICAgIHJlcXVpcmVkIHN0cmluZyB1c2VyTmFtZSA9IDI7XFxuICAgIHJlcXVpcmVkIHN0cmluZyB1c2VyUG9ydHJhaXQgPSAzO1xcbiAgICByZXF1aXJlZCBzdHJpbmcgZXh0ZW5zaW9uID0gNDtcXG4gIH1cXG4gIG1lc3NhZ2UgR3JvdXBNZW1iZXJzSW5wdXQge1xcbiAgICByZXF1aXJlZCBpbnQzMiBwYWdlID0gMTtcXG4gICAgb3B0aW9uYWwgaW50MzIgbnVtYmVyID0gMjtcXG4gIH1cXG4gIG1lc3NhZ2UgR3JvdXBNZW1iZXJzT3V0cHV0IHtcXG4gICAgcmVwZWF0ZWQgTWVtYmVySW5mbyBtZW1iZXJzID0gMTtcXG4gICAgcmVxdWlyZWQgaW50MzIgdG90YWwgPSAyO1xcbiAgfVxcbiAgbWVzc2FnZSBHZXRVc2VySW5mb0lucHV0IHtcXG4gICAgcmVxdWlyZWQgaW50MzIgbm90aGluZyA9IDE7XFxuICB9XFxuICBtZXNzYWdlIEdldFVzZXJJbmZvT3V0cHV0IHtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIHVzZXJJZCA9IDE7XFxuICAgIHJlcXVpcmVkIHN0cmluZyB1c2VyTmFtZSA9IDI7XFxuICAgIHJlcXVpcmVkIHN0cmluZyB1c2VyUG9ydHJhaXQgPSAzO1xcbiAgfVxcbiAgbWVzc2FnZSBHZXRTZXNzaW9uSWRJbnB1dCB7XFxuICAgIHJlcXVpcmVkIGludDMyIG5vdGhpbmcgPSAxO1xcbiAgfVxcbiAgbWVzc2FnZSBHZXRTZXNzaW9uSWRPdXRwdXQge1xcbiAgICByZXF1aXJlZCBpbnQzMiBzZXNzaW9uSWQgPSAxO1xcbiAgfVxcbiAgZW51bSBGaWxlVHlwZSB7XFxuICAgIGltYWdlID0gXCIrVy5JTUFHRStcIjtcXG4gICAgYXVkaW8gPSBcIitXLkFVRElPK1wiO1xcbiAgICB2aWRlbyA9IFwiK1cuVklERU8rXCI7XFxuICAgIGZpbGUgPSBcIitXLkZJTEUrXCI7XFxuICB9XFxuICBtZXNzYWdlIFwiK2ZuK1wiIHtcXG4gICAgcmVxdWlyZWQgRmlsZVR5cGUgdHlwZSA9IDE7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBrZXkgPSAyO1xcbiAgICBvcHRpb25hbCBzdHJpbmcgaHR0cE1ldGhvZCA9IDM7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBxdWVyeVN0cmluZyA9IDQ7XFxuICB9XFxuICBtZXNzYWdlIFwiK2duK1wiIHtcXG4gICAgcmVxdWlyZWQgRmlsZVR5cGUgdHlwZSA9IDE7XFxuICAgIHJlcXVpcmVkIHN0cmluZyBrZXkgPSAyO1xcbiAgICBvcHRpb25hbCBzdHJpbmcgIGZpbGVOYW1lID0gMztcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrX24rXCIge1xcbiAgICByZXF1aXJlZCBGaWxlVHlwZSB0eXBlID0gMTtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIGtleSA9IDI7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBmaWxlTmFtZSA9IDM7XFxuICAgfVxcbiAgbWVzc2FnZSBcIitwbitcIiB7XFxuICAgIHJlcXVpcmVkIGludDY0IGRlYWRsaW5lID0gMTtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIHRva2VuID0gMjtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIGJvc1Rva2VuID0gMztcXG4gICAgb3B0aW9uYWwgc3RyaW5nIGJvc0RhdGUgPSA0O1xcbiAgICBvcHRpb25hbCBzdHJpbmcgcGF0aCA9IDU7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBvc3NrZXlJZCA9IDY7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBvc3NQb2xpY3kgPSA3O1xcbiAgICBvcHRpb25hbCBzdHJpbmcgb3NzU2lnbiA9IDg7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBvc3NCdWNrZXROYW1lID0gOTtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIHMzQ3JlZGVudGlhbCA9IDEwO1xcbiAgICBvcHRpb25hbCBzdHJpbmcgczNBbGdvcml0aG0gPSAxMTtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIHMzRGF0ZSA9IDEyO1xcbiAgICBvcHRpb25hbCBzdHJpbmcgczNQb2xpY3kgPSAxMztcXG4gICAgb3B0aW9uYWwgc3RyaW5nIHMzU2lnbmF0dXJlID0gMTQ7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBzM0J1Y2tldE5hbWUgPSAxNTtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIHN0Y0F1dGhvcml6YXRpb24gPSAxNjtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIHN0Y0NvbnRlbnRTaGEyNTYgPSAxNztcXG4gICAgb3B0aW9uYWwgc3RyaW5nIHN0Y0RhdGUgPSAxODtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIHN0Y0J1Y2tldE5hbWUgPSAxOTtcXG4gIH1cXG4gIG1lc3NhZ2UgXCIreW4rXCIge1xcbiAgICByZXF1aXJlZCBzdHJpbmcgZG93bmxvYWRVcmwgPSAxO1xcbiAgfVxcbiAgbWVzc2FnZSBcIit2bitcIiB7XFxuICAgIHJlcXVpcmVkIHN0cmluZyBkb3dubG9hZFVybCA9IDE7XFxuICB9XFxuICBtZXNzYWdlIEFkZDJCbGFja0xpc3RJbnB1dCB7XFxuICAgIHJlcXVpcmVkIHN0cmluZyB1c2VySWQgPSAxO1xcbiAgfVxcbiAgbWVzc2FnZSBSZW1vdmVGcm9tQmxhY2tMaXN0SW5wdXQge1xcbiAgICByZXF1aXJlZCBzdHJpbmcgdXNlcklkID0gMTtcXG4gIH1cXG4gIG1lc3NhZ2UgUXVlcnlCbGFja0xpc3RJbnB1dCB7XFxuICAgIHJlcXVpcmVkIGludDMyIG5vdGhpbmcgPSAxO1xcbiAgfVxcbiAgbWVzc2FnZSBRdWVyeUJsYWNrTGlzdE91dHB1dCB7XFxuICAgIHJlcGVhdGVkIHN0cmluZyB1c2VySWRzID0gMTtcXG4gIH1cXG4gIG1lc3NhZ2UgQmxhY2tMaXN0U3RhdHVzSW5wdXQge1xcbiAgICByZXF1aXJlZCBzdHJpbmcgdXNlcklkID0gMTtcXG4gIH1cXG4gIG1lc3NhZ2UgQmxvY2tQdXNoSW5wdXQge1xcbiAgICByZXF1aXJlZCBzdHJpbmcgYmxvY2tlZUlkID0gMTtcXG4gIH1cXG4gIG1lc3NhZ2UgTW9kaWZ5UGVybWlzc2lvbklucHV0IHtcXG4gICAgcmVxdWlyZWQgaW50MzIgb3BlblN0YXR1cyA9IDE7XFxuICB9XFxuICBtZXNzYWdlIEdyb3VwSW5wdXQge1xcbiAgICByZXBlYXRlZCBHcm91cEluZm8gZ3JvdXBJbmZvID0gMTtcXG4gIH1cXG4gIG1lc3NhZ2UgR3JvdXBPdXRwdXQge1xcbiAgICByZXF1aXJlZCBpbnQzMiBub3RoaW5nID0gMTtcXG4gIH1cXG4gIG1lc3NhZ2UgR3JvdXBJbmZvIHtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIGlkID0gMTtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIG5hbWUgPSAyO1xcbiAgfVxcbiAgbWVzc2FnZSBHcm91cEhhc2hJbnB1dCB7XFxuICAgIHJlcXVpcmVkIHN0cmluZyB1c2VySWQgPSAxO1xcbiAgICByZXF1aXJlZCBzdHJpbmcgZ3JvdXBIYXNoQ29kZSA9IDI7XFxuICB9XFxuICBtZXNzYWdlIEdyb3VwSGFzaE91dHB1dCB7XFxuICAgIHJlcXVpcmVkIEdyb3VwSGFzaFR5cGUgcmVzdWx0ID0gMTtcXG4gIH1cXG4gIGVudW0gR3JvdXBIYXNoVHlwZSB7XFxuICAgIGdyb3VwX3N1Y2Nlc3MgPSAweDAwO1xcbiAgICBncm91cF9mYWlsdXJlID0gMHgwMTtcXG4gIH1cXG4gIG1lc3NhZ2UgXCIranQrXCIge1xcbiAgICByZXF1aXJlZCBpbnQzMiBub3RoaW5nID0gMTtcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrUXQrXCIge1xcbiAgICByZXF1aXJlZCBpbnQzMiBub3RoaW5nID0gMTtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIHNlc3Npb25JZCA9IDI7XFxuICAgIG9wdGlvbmFsIGludDY0IGpvaW5UaW1lID0gMztcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrTHQrXCIge1xcbiAgICByZXF1aXJlZCBpbnQ2NCBzeW5jVGltZSA9IDE7XFxuICAgIHJlcXVpcmVkIGludDMyIGNvdW50ID0gMjtcXG4gIH1cXG5cXG4gIG1lc3NhZ2UgQ2hybVB1bGxNc2dOZXdcXG4gIHtcXG4gICAgcmVxdWlyZWQgaW50MzIgY291bnQgPSAxO1xcbiAgICByZXF1aXJlZCBpbnQ2NCBzeW5jVGltZSA9IDI7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBjaHJtSWQ9MztcXG4gIH1cXG4gIG1lc3NhZ2UgXCIra3QrXCJcXG4gIHtcXG4gICAgb3B0aW9uYWwgQ2hhbm5lbFR5cGUgdHlwZSA9IDE7XFxuICAgIG9wdGlvbmFsIGludDMyIGNvdW50ID0gMjtcXG4gICAgb3B0aW9uYWwgaW50NjQgc3RhcnRUaW1lID0gMztcXG4gICAgb3B0aW9uYWwgaW50MzIgb3JkZXIgPSA0O1xcbiAgfVxcbiAgbWVzc2FnZSBcIitxdCtcIlxcbiAge1xcbiAgICByZXF1aXJlZCBDaGFubmVsVHlwZSB0eXBlID0gMTtcXG4gICAgb3B0aW9uYWwgRG93blN0cmVhbU1lc3NhZ2UgbXNnID0yO1xcbiAgICBvcHRpb25hbCBpbnQzMiBjb3VudCA9IDM7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBidXNDaGFubmVsID0gNDtcXG4gICAgb3B0aW9uYWwgaW50NjQgc3RhcnRUaW1lID0gNTtcXG4gICAgb3B0aW9uYWwgaW50NjQgZW5kVGltZSA9IDY7XFxuICB9XFxuICBtZXNzYWdlIFwiK3h0K1wiXFxuICB7XFxuICAgIHJlcGVhdGVkIFJlbGF0aW9uSW5mbyBpbmZvID0gMTtcXG4gIH1cXG4gIG1lc3NhZ2UgUmVsYXRpb25JbmZvXFxuICB7XFxuICAgIHJlcXVpcmVkIENoYW5uZWxUeXBlIHR5cGUgPSAxO1xcbiAgICByZXF1aXJlZCBzdHJpbmcgdXNlcklkID0gMjtcXG4gICAgb3B0aW9uYWwgRG93blN0cmVhbU1lc3NhZ2UgbXNnID0zO1xcbiAgICBvcHRpb25hbCBpbnQ2NCByZWFkTXNnVGltZT0gNDtcXG4gICAgb3B0aW9uYWwgaW50NjQgdW5yZWFkQ291bnQ9IDU7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBidXNDaGFubmVsID0gNjsvL+ivpea2iOaBr+aJgOWxnuS8muivneeahOS4muWKoeagh+ivhlxcbiAgfVxcbiAgbWVzc2FnZSBSZWxhdGlvbkluZm9SZWFkVGltZVxcbiAge1xcbiAgICByZXF1aXJlZCBDaGFubmVsVHlwZSB0eXBlID0gMTtcXG4gICAgcmVxdWlyZWQgaW50NjQgcmVhZE1zZ1RpbWU9IDI7XFxuICAgIHJlcXVpcmVkIHN0cmluZyB0YXJnZXRJZCA9IDM7XFxuICB9XFxuICBtZXNzYWdlIFwiK0h0K1wiXFxuICB7XFxuICAgICAgcmVxdWlyZWQgc3RyaW5nIHRhcmdldElkID0gMTtcXG4gICAgICByZXF1aXJlZCBpbnQ2NCBkYXRhVGltZSA9IDI7XFxuICAgICAgb3B0aW9uYWwgaW50MzIgY29udmVyc2F0aW9uVHlwZT0gMztcXG4gICAgICBvcHRpb25hbCBzdHJpbmcgYnVzQ2hhbm5lbCA9IDQ7IC8v6K+l5raI5oGv5omA5bGe5Lya6K+d55qE5Lia5Yqh5qCH6K+G77yM6ZmQ5Yi2MjDlrZfnrKbku6XlhoVcXG4gIH1cXG4gIG1lc3NhZ2UgSGlzdG9yeU1lc3NhZ2VJbnB1dFxcbiAge1xcbiAgICByZXF1aXJlZCBzdHJpbmcgdGFyZ2V0SWQgPSAxO1xcbiAgICByZXF1aXJlZCBpbnQ2NCBkYXRhVGltZSA9MjtcXG4gICAgcmVxdWlyZWQgaW50MzIgc2l6ZSAgPSAzO1xcbiAgfVxcblxcbiAgbWVzc2FnZSBIaXN0b3J5TWVzc2FnZXNPdXB1dFxcbiAge1xcbiAgICByZXBlYXRlZCBEb3duU3RyZWFtTWVzc2FnZSBsaXN0ID0gMTtcXG4gICAgcmVxdWlyZWQgaW50NjQgc3luY1RpbWUgPSAyO1xcbiAgICByZXF1aXJlZCBpbnQzMiBoYXNNc2cgPSAzO1xcbiAgfVxcbiAgbWVzc2FnZSBcIitXdCtcIlxcbiAge1xcbiAgICByZXF1aXJlZCBpbnQzMiBjb3VudD0gMTtcXG4gICAgb3B0aW9uYWwgaW50MzIgb3JkZXI9IDI7XFxuICB9XFxuXFxuICBtZXNzYWdlIFwiK0p0K1wiXFxuICB7XFxuICAgIG9wdGlvbmFsIGludDMyIHVzZXJUb3RhbE51bXMgPSAxO1xcbiAgICByZXBlYXRlZCBDaHJtTWVtYmVyIHVzZXJJbmZvcyA9IDI7XFxuICB9XFxuICBtZXNzYWdlIENocm1NZW1iZXJcXG4gIHtcXG4gICAgcmVxdWlyZWQgaW50NjQgdGltZSA9IDE7XFxuICAgIHJlcXVpcmVkIHN0cmluZyBpZCA9IDI7XFxuICB9XFxuICBtZXNzYWdlIE1QRm9sbG93SW5wdXRcXG4gIHtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIGlkID0gMTtcXG4gIH1cXG5cXG4gIG1lc3NhZ2UgTVBGb2xsb3dPdXRwdXRcXG4gIHtcXG4gICAgcmVxdWlyZWQgaW50MzIgbm90aGluZyA9IDE7XFxuICAgIG9wdGlvbmFsIE1wSW5mbyBpbmZvID0yO1xcbiAgfVxcblxcbiAgbWVzc2FnZSBcIitybitcIlxcbiAge1xcbiAgICByZXF1aXJlZCBzdHJpbmcgc3RhdGUgPSAxO1xcbiAgfVxcblxcbiAgbWVzc2FnZSBNQ0ZvbGxvd091dHB1dFxcbiAge1xcbiAgICByZXF1aXJlZCBpbnQzMiBub3RoaW5nID0gMTtcXG4gICAgb3B0aW9uYWwgTXBJbmZvIGluZm8gPTI7XFxuICB9XFxuXFxuICBtZXNzYWdlIE1wSW5mb1xcbiAge1xcbiAgICByZXF1aXJlZCBzdHJpbmcgbXBpZD0xO1xcbiAgICByZXF1aXJlZCBzdHJpbmcgbmFtZSA9IDI7XFxuICAgIHJlcXVpcmVkIHN0cmluZyB0eXBlID0gMztcXG4gICAgcmVxdWlyZWQgaW50NjQgdGltZT00O1xcbiAgICBvcHRpb25hbCBzdHJpbmcgcG9ydHJhaXRVcmw9NTtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIGV4dHJhID02O1xcbiAgfVxcblxcbiAgbWVzc2FnZSBTZWFyY2hNcElucHV0XFxuICB7XFxuICAgIHJlcXVpcmVkIGludDMyIHR5cGU9MTtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIGlkPTI7XFxuICB9XFxuXFxuICBtZXNzYWdlIFNlYXJjaE1wT3V0cHV0XFxuICB7XFxuICAgIHJlcXVpcmVkIGludDMyIG5vdGhpbmc9MTtcXG4gICAgcmVwZWF0ZWQgTXBJbmZvIGluZm8gPSAyO1xcbiAgfVxcblxcbiAgbWVzc2FnZSBQdWxsTXBJbnB1dFxcbiAge1xcbiAgICByZXF1aXJlZCBpbnQ2NCB0aW1lPTE7XFxuICAgIHJlcXVpcmVkIHN0cmluZyBtcGlkPTI7XFxuICB9XFxuXFxuICBtZXNzYWdlIFB1bGxNcE91dHB1dFxcbiAge1xcbiAgICByZXF1aXJlZCBpbnQzMiBzdGF0dXM9MTtcXG4gICAgcmVwZWF0ZWQgTXBJbmZvIGluZm8gPSAyO1xcbiAgfVxcbiAgbWVzc2FnZSBcIitEdCtcIlxcbiAge1xcbiAgICBvcHRpb25hbCBzdHJpbmcgdGFyZ2V0SWQgPSAxO1xcbiAgICBvcHRpb25hbCBpbnQ2NCB0aW1lID0gMjtcXG4gICAgb3B0aW9uYWwgaW50MzIgY291bnQgID0gMztcXG4gICAgb3B0aW9uYWwgaW50MzIgb3JkZXIgPSA0O1xcbiAgICBvcHRpb25hbCBzdHJpbmcgYnVzQ2hhbm5lbCA9IDU7IC8v6K+l5raI5oGv5omA5bGe5Lya6K+d55qE5Lia5Yqh5qCH6K+G77yM6ZmQ5Yi2MjDlrZfnrKbku6XlhoVcXG4gIH1cXG5cXG4gIG1lc3NhZ2UgXCIrVnQrXCJcXG4gIHtcXG4gICAgcmVwZWF0ZWQgRG93blN0cmVhbU1lc3NhZ2UgbGlzdD0xO1xcbiAgICByZXF1aXJlZCBpbnQ2NCBzeW5jVGltZT0yO1xcbiAgICByZXF1aXJlZCBpbnQzMiBoYXNNc2c9MztcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrY24rXCJ7XFxuICAgIG9wdGlvbmFsIGludDMyIG9yZGVyPTE7XFxuICB9XFxuXFxuICBtZXNzYWdlIFwiK2RuK1wie1xcbiAgICByZXBlYXRlZCBzdHJpbmcga2V5PTE7XFxuICB9XFxuXFxuICBtZXNzYWdlIFwiK2xuK1wie1xcbiAgICByZXF1aXJlZCBzdHJpbmcga2V5PTE7XFxuICAgIHJlcXVpcmVkIHN0cmluZyB2YWx1ZT0yO1xcbiAgfVxcblxcbiAgbWVzc2FnZSBSdGNVc2VySW5mb3tcXG4gICAgcmVxdWlyZWQgc3RyaW5nIHVzZXJJZD0xO1xcbiAgICByZXBlYXRlZCBcIitsbitcIiB1c2VyRGF0YT0yOyAvL+eUqOaIt+i1hOa6kOS/oeaBr1xcbiAgfVxcblxcbiAgbWVzc2FnZSBcIitadCtcIntcXG4gICAgcmVwZWF0ZWQgUnRjVXNlckluZm8gdXNlcnM9MTtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIHRva2VuPTI7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBzZXNzaW9uSWQ9MztcXG4gICAgcmVwZWF0ZWQgUnRjVmFsdWVJbmZvIHJvb21JbmZvID0gNDsgLy/miL/pl7RrZXkgdmFsdWVcXG4gICAgcmVwZWF0ZWQgUnRjS1ZFbnRpdHkgZW50cmllcyA9IDU7Ly/nm7Tmkq1LVuWxnuaAp+WvueixoembhuWQiFxcbiAgICBvcHRpb25hbCBpbnQ2NCBzeW5jVGltZSA9IDY7Ly/miYDmnInlsZ7mgKfnmoTmnIDlpKfml7bpl7TmiLPvvIjkuIvmrKHmi4nlj5ZLVuaXtueUqO+8ieOAglxcbiAgICBvcHRpb25hbCBpbnQzMiBvZmZsaW5lS2lja1RpbWUgPSA3Oy8vc2VydmVy6LaF5pe26Lii5Lq65pe26Ze077yM6buY6K6kNjBzXFxuICB9XFxuICBtZXNzYWdlIFJ0Y1Jvb21JbmZvT3V0cHV0e1xcbiAgICBvcHRpb25hbCBzdHJpbmcgcm9vbUlkID0gMTtcXG4gICAgcmVwZWF0ZWQgXCIrbG4rXCIgcm9vbURhdGEgPSAyO1xcbiAgICBvcHRpb25hbCBpbnQzMiB1c2VyQ291bnQgPSAzO1xcbiAgICByZXBlYXRlZCBSdGNVc2VySW5mbyBsaXN0PTQ7XFxuICB9XFxuICBtZXNzYWdlIFwiK3p0K1wie1xcbiAgICByZXF1aXJlZCBpbnQzMiByb29tVHlwZT0xO1xcbiAgICBvcHRpb25hbCBpbnQzMiBicm9hZGNhc3RUeXBlPTI7XFxuICAgIG9wdGlvbmFsIFJ0Y1ZhbHVlSW5mbyBleHRyYUlubmVyRGF0YSA9IDM7XFxuICAgIG9wdGlvbmFsIGJvb2wgbmVlZFN5c0NoYXRyb29tID0gNDsgLy/mmK/lkKbpnIDopoHlkIzmraXogYrlpKnlrqRcXG4gICAgb3B0aW9uYWwgSWRlbnRpdHlDaGFuZ2VUeXBlIGlkZW50aXR5Q2hhbmdlVHlwZSA9IDU7IC8v6Lqr5Lu95Y+Y5pu057G75Z6LXFxuICAgIG9wdGlvbmFsIEpvaW5UeXBlIGpvaW5UeXBlID0gNjsgLy8g5Yqg5YWl5oi/6Ze057G75Z6LXFxuICAgIHJlcGVhdGVkIFwiK2xuK1wiIGlubmVyRGF0YXMgPSA3OyAvL+eUqOaIt+WGhemDqGlubmVy5pWw5o2u77yM6KeS6Imy5oiW6ICF6L+e6bqm5L+h5oGv562JXFxuICAgIHJlcGVhdGVkIFwiK2xuK1wiIG91dGVyRGF0YXMgPSA4OyAvL+eUqOaIt+WGhemDqG91dGVy5pWw5o2u77yM6Ieq5a6a5LmJ5pWw5o2u57uT5p6EUnRjSW5wdXTjgIJcXG4gIH1cXG4gIGVudW0gSm9pblR5cGUge1xcbiAgICBLSUNLID0gMDsgLy/ouKLliY3kuIDkuKrorr7lpIdcXG4gICAgUkVGVVNFID0gMTsgLy/lvZPliY3liqDlhaXmi5Lnu51cXG4gICAgQ09FWElTVCA9IDI7IC8v5Lik5Liq6K6+5aSH5YWx5a2YXFxuICB9XFxuICBtZXNzYWdlIFJ0Y1FyeUlucHV0e1xcbiAgICByZXF1aXJlZCBib29sIGlzSW50ZXJpb3I9MTtcXG4gICAgcmVxdWlyZWQgdGFyZ2V0VHlwZSB0YXJnZXQ9MjtcXG4gICAgcmVwZWF0ZWQgc3RyaW5nIGtleT0zO1xcbiAgfVxcbiAgbWVzc2FnZSBcIitvbitcIntcXG4gICAgcmVwZWF0ZWQgXCIrbG4rXCIgb3V0SW5mbz0xO1xcbiAgfVxcbiAgbWVzc2FnZSBSdGNEZWxEYXRhSW5wdXR7XFxuICAgIHJlcGVhdGVkIHN0cmluZyBrZXk9MTtcXG4gICAgcmVxdWlyZWQgYm9vbCBpc0ludGVyaW9yPTI7XFxuICAgIHJlcXVpcmVkIHRhcmdldFR5cGUgdGFyZ2V0PTM7XFxuICB9XFxuICBtZXNzYWdlIFwiK3RuK1wie1xcbiAgICByZXF1aXJlZCBib29sIGludGVyaW9yPTE7XFxuICAgIHJlcXVpcmVkIHRhcmdldFR5cGUgdGFyZ2V0PTI7XFxuICAgIHJlcGVhdGVkIHN0cmluZyBrZXk9MztcXG4gICAgb3B0aW9uYWwgc3RyaW5nIG9iamVjdE5hbWU9NDtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIGNvbnRlbnQ9NTtcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrJHQrXCJ7XFxuICAgIHJlcXVpcmVkIGJvb2wgaW50ZXJpb3I9MTtcXG4gICAgcmVxdWlyZWQgdGFyZ2V0VHlwZSB0YXJnZXQ9MjtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIGtleT0zO1xcbiAgICByZXF1aXJlZCBzdHJpbmcgdmFsdWU9NDtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIG9iamVjdE5hbWU9NTtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIGNvbnRlbnQ9NjtcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrZW4rXCIge1xcbiAgICByZXBlYXRlZCBcIitsbitcIiB2YWx1ZUluZm8gPSAxO1xcbiAgICByZXF1aXJlZCBzdHJpbmcgb2JqZWN0TmFtZSA9IDI7XFxuICAgIHJlcGVhdGVkIFwiK2xuK1wiIGNvbnRlbnQgPSAzO1xcbiAgfVxcbiAgbWVzc2FnZSBSdGNPdXRwdXRcXG4gIHtcXG4gICAgb3B0aW9uYWwgaW50MzIgbm90aGluZz0xO1xcbiAgfVxcbiAgbWVzc2FnZSBcIitzbitcIntcXG4gICAgcmVxdWlyZWQgc3RyaW5nIHJ0Y1Rva2VuPTE7XFxuICB9XFxuICBlbnVtIHRhcmdldFR5cGUge1xcbiAgICBST09NID0xIDtcXG4gICAgUEVSU09OID0gMjtcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrbm4rXCJ7XFxuICAgIHJlcXVpcmVkIHRhcmdldFR5cGUgdGFyZ2V0PTE7XFxuICAgIHJlcGVhdGVkIFwiK2xuK1wiIHZhbHVlSW5mbz0yO1xcbiAgICBvcHRpb25hbCBzdHJpbmcgb2JqZWN0TmFtZT0zO1xcbiAgICBvcHRpb25hbCBzdHJpbmcgY29udGVudD00O1xcbiAgfVxcbiAgbWVzc2FnZSBcIithbitcIntcXG4gICAgcmVwZWF0ZWQgc3RyaW5nIHVzZXJJZCA9IDE7XFxuICB9XFxuICBtZXNzYWdlIFwiK3VuK1wie1xcbiAgICByZXBlYXRlZCBSdGNVc2VySW5mbyB1c2VyID0gMTtcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrTXQrXCJ7XFxuICAgIHJlcXVpcmVkIGludDMyIG5vdGhpbmcgPSAxO1xcbiAgfVxcbiAgbWVzc2FnZSBcIitBdCtcIntcXG4gICAgcmVxdWlyZWQgaW50NjQgaW5ib3hUaW1lID0gMTtcXG4gICAgcmVxdWlyZWQgaW50NjQgc2VuZGJveFRpbWUgPSAyO1xcbiAgICByZXF1aXJlZCBpbnQ2NCB0b3RhbFVucmVhZENvdW50ID0gMztcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrR3QrXCJcXG4gIHtcXG4gICAgcmVxdWlyZWQgQ2hhbm5lbFR5cGUgdHlwZSA9IDE7XFxuICAgIHJlcXVpcmVkIGludDY0IG1zZ1RpbWUgPSAyO1xcbiAgICByZXF1aXJlZCBzdHJpbmcgY2hhbm5lbElkID0gMztcXG4gIH1cXG4gIG1lc3NhZ2UgU2Vzc2lvbk1zZ1JlYWRPdXRwdXRcXG4gIHtcXG4gICAgb3B0aW9uYWwgaW50MzIgbm90aGluZz0xO1xcbiAgfVxcbiAgbWVzc2FnZSBcIitCdCtcIlxcbiAge1xcbiAgICByZXBlYXRlZCBTZXNzaW9uSW5mbyBzZXNzaW9ucyA9IDE7XFxuICB9XFxuICBtZXNzYWdlIFwiK0Z0K1wiXFxuICB7XFxuICAgIHJlcXVpcmVkIENoYW5uZWxUeXBlIHR5cGUgPSAxO1xcbiAgICByZXF1aXJlZCBzdHJpbmcgY2hhbm5lbElkID0gMjtcXG4gICAgb3B0aW9uYWwgc3RyaW5nIGJ1c0NoYW5uZWwgPSAzOy8v5omA5bGe5Lya6K+d5Lia5Yqh5qCH6K+GXFxuICB9XFxuICBtZXNzYWdlIFwiK0t0K1wiXFxuICB7XFxuICAgIG9wdGlvbmFsIGludDMyIG5vdGhpbmc9MTtcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrWXQrXCJcXG4gIHtcXG4gICAgb3B0aW9uYWwgQ2hhbm5lbFR5cGUgdHlwZSA9IDE7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBjb252ZXJzYXRpb25JZCA9IDI7XFxuICAgIHJlcGVhdGVkIERlbGV0ZU1zZyBtc2dzID0gMztcXG4gICAgb3B0aW9uYWwgc3RyaW5nIGJ1c0NoYW5uZWwgPSA0OyAvL+ivpea2iOaBr+aJgOWxnuS8muivneeahOS4muWKoeagh+ivhu+8jOmZkOWItjIw5a2X56ym5Lul5YaFXFxuICB9XFxuICBtZXNzYWdlIERlbGV0ZU1zZ1xcbiAge1xcbiAgICBvcHRpb25hbCBzdHJpbmcgbXNnSWQgPSAxO1xcbiAgICBvcHRpb25hbCBpbnQ2NCBtc2dEYXRhVGltZSA9IDI7XFxuICAgIG9wdGlvbmFsIGludDMyIGRpcmVjdCA9IDM7XFxuICB9XFxuICBtZXNzYWdlIENocm1LVkVudGl0eSB7XFxuICAgIHJlcXVpcmVkIHN0cmluZyBrZXkgPSAxO1xcbiAgICByZXF1aXJlZCBzdHJpbmcgdmFsdWUgPSAyO1xcbiAgICBvcHRpb25hbCBpbnQzMiBzdGF0dXMgPSAzO1xcbiAgICBvcHRpb25hbCBpbnQ2NCB0aW1lc3RhbXAgPSA0O1xcbiAgICBvcHRpb25hbCBzdHJpbmcgdWlkID0gNTtcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrRW4rXCIge1xcbiAgICByZXF1aXJlZCBDaHJtS1ZFbnRpdHkgZW50cnkgPSAxO1xcbiAgICBvcHRpb25hbCBib29sIGJOb3RpZnkgPSAyO1xcbiAgICBvcHRpb25hbCBVcFN0cmVhbU1lc3NhZ2Ugbm90aWZpY2F0aW9uID0gMztcXG4gICAgb3B0aW9uYWwgQ2hhbm5lbFR5cGUgdHlwZSA9IDQ7XFxuICB9XFxuICBtZXNzYWdlIFwiK21uK1wiIHtcXG4gICAgcmVwZWF0ZWQgQ2hybUtWRW50aXR5IGVudHJ5ID0gMTtcXG4gICAgb3B0aW9uYWwgYm9vbCBiTm90aWZ5ID0gMjtcXG4gICAgb3B0aW9uYWwgVXBTdHJlYW1NZXNzYWdlIG5vdGlmaWNhdGlvbiA9IDM7XFxuICAgIG9wdGlvbmFsIENoYW5uZWxUeXBlIHR5cGUgPSA0O1xcbiAgfVxcbiAgbWVzc2FnZSBcIitJbitcIiB7XFxuICAgIHJlcGVhdGVkIENocm1LVkVudGl0eSBlbnRyeSA9IDE7XFxuICAgIG9wdGlvbmFsIGJvb2wgYk5vdGlmeSA9IDI7XFxuICAgIG9wdGlvbmFsIFVwU3RyZWFtTWVzc2FnZSBub3RpZmljYXRpb24gPSAzO1xcbiAgICBvcHRpb25hbCBDaGFubmVsVHlwZSB0eXBlID0gNDtcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrVG4rXCIge1xcbiAgICByZXBlYXRlZCBDaHJtS1ZFbnRpdHkgZW50cmllcyA9IDE7XFxuICAgIG9wdGlvbmFsIGJvb2wgYkZ1bGxVcGRhdGUgPSAyO1xcbiAgICBvcHRpb25hbCBpbnQ2NCBzeW5jVGltZSA9IDM7XFxuICB9XFxuICBtZXNzYWdlIFwiK0NuK1wiIHtcXG4gICAgcmVwZWF0ZWQgQ2hybUtWU091dHB1dEVudGl0eSBlcnJvcktleXMgPSAxO1xcbiAgfVxcbiAgbWVzc2FnZSBcIitSbitcIlxcbiAge1xcbiAgICBvcHRpb25hbCBzdHJpbmcga2V5ID0gMTtcXG4gICAgb3B0aW9uYWwgaW50MzIgZXJyb3JDb2RlID0gMjtcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrU24rXCIge1xcbiAgICByZXF1aXJlZCBpbnQ2NCB0aW1lc3RhbXAgPSAxO1xcbiAgfVxcbiAgbWVzc2FnZSBcIitObitcIiB7XFxuICAgIHJlcXVpcmVkIGludDY0IHZlcnNpb249MTtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIHZhbHVlPTI7XFxuICB9XFxuICBtZXNzYWdlIFwiK09uK1wiIHtcXG4gICAgcmVxdWlyZWQgaW50NjQgdmVyc2lvbj0xO1xcbiAgICByZXF1aXJlZCBib29sIHJlc2VydmU9MjtcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrd24rXCIge1xcbiAgICByZXF1aXJlZCBpbnQ2NCB2ZXJzaW9uPTE7XFxuICAgIG9wdGlvbmFsIGJvb2wgcmVzZXJ2ZT0yO1xcbiAgfVxcbiAgbWVzc2FnZSBcIitibitcIiB7XFxuICAgIHJlcGVhdGVkIFVzZXJTZXR0aW5nSXRlbSBpdGVtcyA9IDE7XFxuICAgIHJlcXVpcmVkIGludDY0IHZlcnNpb249MjtcXG4gIH1cXG4gIG1lc3NhZ2UgVXNlclNldHRpbmdJdGVtIHtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIHRhcmdldElkPSAxO1xcbiAgICByZXF1aXJlZCBDaGFubmVsVHlwZSB0eXBlID0gMjtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIGtleSA9IDQ7XFxuICAgIHJlcXVpcmVkIGJ5dGVzIHZhbHVlID0gNTtcXG4gICAgcmVxdWlyZWQgaW50NjQgdmVyc2lvbj02O1xcbiAgICByZXF1aXJlZCBpbnQzMiBzdGF0dXM9NztcXG4gICAgcmVwZWF0ZWQgU2Vzc2lvblRhZ0l0ZW0gdGFncz0gODtcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrQW4rXCIge1xcbiAgICByZXF1aXJlZCBpbnQ2NCB0aW1lID0gMTtcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrVW4rXCIge1xcbiAgICByZXF1aXJlZCBpbnQ2NCB2ZXJzaW9uPTE7XFxuICAgIHJlcGVhdGVkIFNlc3Npb25TdGF0ZSBzdGF0ZT0gMjtcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrTG4rXCIge1xcbiAgICByZXF1aXJlZCBDaGFubmVsVHlwZSB0eXBlID0gMTtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIGNoYW5uZWxJZCA9IDI7XFxuICAgIG9wdGlvbmFsIGludDY0IHRpbWUgPSAzO1xcbiAgICByZXBlYXRlZCBTZXNzaW9uU3RhdGVJdGVtIHN0YXRlSXRlbSA9IDQ7XFxuICAgIG9wdGlvbmFsIHN0cmluZyBidXNDaGFubmVsID0gNTsvL+ivpea2iOaBr+aJgOWxnuS8muivneeahOS4muWKoeagh+ivhlxcbiAgfVxcbiAgbWVzc2FnZSBcIitQbitcIiB7XFxuICAgIHJlcXVpcmVkIFNlc3Npb25TdGF0ZVR5cGUgc2Vzc2lvblN0YXRlVHlwZSA9IDE7XFxuICAgIHJlcXVpcmVkIHN0cmluZyB2YWx1ZSA9IDI7XFxuICAgIHJlcGVhdGVkIFNlc3Npb25UYWdJdGVtIHRhZ3MgPSAzO1xcbiAgfVxcbiAgZW51bSBTZXNzaW9uU3RhdGVUeXBlIHtcXG4gICAgSXNTaWxlbnQgPSAxO1xcbiAgICBJc1RvcCA9IDI7XFxuICAgIFRhZ3MgPSAzO1xcbiAgfVxcbiAgbWVzc2FnZSBcIitEbitcIiB7XFxuICAgIHJlcXVpcmVkIGludDY0IHZlcnNpb249MTtcXG4gICAgcmVwZWF0ZWQgU2Vzc2lvblN0YXRlIHN0YXRlPSAyO1xcbiAgfVxcbiAgbWVzc2FnZSBcIitWbitcIiB7XFxuICAgIHJlcXVpcmVkIGludDY0IHZlcnNpb249MTtcXG4gIH1cXG4gIG1lc3NhZ2UgXCIra24rXCIge1xcbiAgICByZXBlYXRlZCBzdHJpbmcgbXNnSWQ9MTsgLy/lt7Lor7vmtojmga9JRFxcbiAgICBvcHRpb25hbCBzdHJpbmcgY2hhbm5lbElkID0gMjsgLy8g6K+l5raI5oGv5omA5bGe5Lya6K+d55qE5Lia5Yqh5qCH6K+GXFxuICB9XFxuICBtZXNzYWdlIFwiK3huK1wiIHtcXG4gICAgcmVwZWF0ZWQgc3RyaW5nIG1zZ0lkPTE7IC8v5bey6K+75raI5oGvSURcXG4gICAgb3B0aW9uYWwgc3RyaW5nIGNoYW5uZWxJZCA9IDI7IC8vIOivpea2iOaBr+aJgOWxnuS8muivneeahOS4muWKoeagh+ivhlxcbiAgfVxcbiAgbWVzc2FnZSBcIitCbitcIiB7XFxuICAgIHJlcXVpcmVkIGludDMyIHRvdGFsTWVtYmVyTnVtID0gMTsvL+e+pOWGheaAu+S6uuaVsFxcbiAgICByZXBlYXRlZCBHcnBNc2dSZWFkVXNlciBsaXN0ID0gMjsvL+W3suivu+eUqOaIt+WIl+ihqO+8iGxpc3TlpI3nsbvlnovvvIlcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrRm4rXCIge1xcbiAgICByZXF1aXJlZCBpbnQ2NCByZWFkVGltZSA9IDE7Ly/lt7Lor7vml7bpl7RcXG4gICAgcmVxdWlyZWQgc3RyaW5nIHVzZXJJZCA9IDI7Ly/lt7Lor7vnlKjmiLdpZFxcbiAgfVxcbiAgbWVzc2FnZSBcIitLbitcIiB7XFxuICAgIHJlcXVpcmVkIGludDY0IHZlcnNpb249MTtcXG4gICAgcmVwZWF0ZWQgU2Vzc2lvblRhZ0l0ZW0gdGFncz0yO1xcbiAgfVxcbiAgbWVzc2FnZSBcIitxbitcIiB7XFxuICAgIHJlcXVpcmVkIHN0cmluZyB0YWdJZD0xO1xcbiAgICBvcHRpb25hbCBzdHJpbmcgbmFtZT0yO1xcbiAgICBvcHRpb25hbCBpbnQ2NCBjcmVhdGVkVGltZT0zO1xcbiAgICBvcHRpb25hbCBib29sIGlzVG9wPTQ7XFxuICB9XFxuICBtZXNzYWdlIFwiK1luK1wiIHtcXG4gICAgcmVxdWlyZWQgaW50NjQgdmVyc2lvbj0xO1xcbiAgICByZXBlYXRlZCBTZXNzaW9uVGFnSXRlbSB0YWdzPTI7XFxuICB9XFxuICBtZXNzYWdlIFwiK0huK1wiIHtcXG4gICAgcmVwZWF0ZWQgc3RyaW5nIHRhZ0lkPTE7XFxuICB9XFxuICBtZXNzYWdlIFwiK01uK1wiIHtcXG4gICAgcmVxdWlyZWQgaW50NjQgdmVyc2lvbj0xO1xcbiAgICByZXF1aXJlZCBib29sIHJlc2VydmU9MjtcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrR24rJyB7XFxuICAgIHJlcXVpcmVkIHN0cmluZyBzZGtJbmZvPTE7IC8vIOeUqOaIt+mbhuaIkOeahCBzZGsg5L+h5oGvLGpzb24g5qC85byPIHtcIndlYi1ydGNcIjogXCI0LjAuMy43XCJ9XFxuICB9XFxuICBtZXNzYWdlICcram4rXCJcXG4gIHtcXG4gICAgb3B0aW9uYWwgaW50MzIgbm90aGluZz0xOyAvL+WNoOS9jVxcbiAgfVxcbiAgbWVzc2FnZSBcIitRbitcIiBcXG4gIHtcXG4gICAgcmVxdWlyZWQgaW50MzIgdHlwZT0gMTsgICAvLyjpgJrnn6XnsbvlnosgMTpydGPmiL/pl7TnirbmgIFLVuWPmOabtOmAmuefpSlcXG4gICAgb3B0aW9uYWwgaW50NjQgdGltZT0gMjsgICAvL+a2iOaBr+S6p+eUn+aXtumXtFxcbiAgICBvcHRpb25hbCBzdHJpbmcgcm9vbUlkPTM7IC8v5Li75pKt5oi/6Ze0aWRcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrV24rXCJcXG4gIHtcXG4gICAgcmVxdWlyZWQgaW50NjQgdGltZXN0YW1wID0gMTtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIHJvb21JZCA9IDI7XFxuICB9XFxuICBtZXNzYWdlIFwiK0puK1wiXFxuICB7XFxuICAgIHJlcGVhdGVkIFJ0Y0tWRW50aXR5IGVudHJpZXMgPSAxO1xcbiAgICBvcHRpb25hbCBib29sIGJGdWxsVXBkYXRlID0gMjtcXG4gICAgb3B0aW9uYWwgaW50NjQgc3luY1RpbWUgPSAzOyBcXG4gIH1cXG4gIG1lc3NhZ2UgUnRjS1ZFbnRpdHkgXFxuICB7XFxuICAgIHJlcXVpcmVkIHN0cmluZyBrZXkgPSAxO1xcbiAgICByZXF1aXJlZCBzdHJpbmcgdmFsdWUgPSAyO1xcbiAgICBvcHRpb25hbCBpbnQzMiBzdGF0dXMgPSAzO1xcbiAgICBvcHRpb25hbCBpbnQ2NCB0aW1lc3RhbXAgPSA0O1xcbiAgICBvcHRpb25hbCBzdHJpbmcgdWlkID0gNTtcXG4gIH1cXG4gIGVudW0gSWRlbnRpdHlDaGFuZ2VUeXBlIFxcbiAge1xcbiAgICBBbmNob3JUb1ZpZXdlciA9IDE7IC8vMeS4uuS4u+aSreWPmOinguS8l1xcbiAgICBWaWV3ZXJUb0FuY2hvciA9IDI7IC8vMuS4uuinguS8l+WPmOS4u+aSrVxcbiAgfVxcbiAgbWVzc2FnZSBcIit6bitcIlxcbiAge1xcbiAgICByZXF1aXJlZCBzdHJpbmcgdXNlcklkID0gMTtcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrWm4rXCJcXG4gIHtcXG4gICAgcmVwZWF0ZWQgUnRjSm9pbmVkSW5mbyBpbmZvID0gMTtcXG4gIH1cXG4gIG1lc3NhZ2UgUnRjSm9pbmVkSW5mb1xcbiAge1xcbiAgICByZXF1aXJlZCBzdHJpbmcgZGV2aWNlSWQgPSAxOyAvL+iuvuWkh0lEXFxuICAgIHJlcXVpcmVkIHN0cmluZyByb29tSWQgPSAyOyAgIC8v5Yqg5YWl55qE5oi/6Ze0SURcXG4gICAgb3B0aW9uYWwgaW50NjQgam9pblRpbWUgPSAzOyAgLy/liqDlhaXnmoTml7bpl7RcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrWG4rXCJcXG4gIHtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIHJ0Y1Rva2VuPTE7XFxuICAgIHJlcGVhdGVkIFJ0Y0tWRW50aXR5IGVudHJpZXMgPSAyOy8vS1blsZ7mgKflr7nosaHpm4blkIhcXG4gICAgb3B0aW9uYWwgaW50NjQgc3luY1RpbWUgPSAzOy8v5omA5pyJ5bGe5oCn55qE5pyA5aSn5pe26Ze05oiz77yI5LiL5qyh5ouJ5Y+WS1bml7bnlKjvvInjgIJcXG4gIH1cXG4gIG1lc3NhZ2UgXCIrJG4rXCJcXG4gIHtcXG4gICAgcmVxdWlyZWQgc3RyaW5nIGludml0ZWRVc2VySWQ9MTsgICAgLy/ooqvpgoDor7fnmoTkurrnmoR1aWRcXG4gICAgb3B0aW9uYWwgaW50MzIgIHRpbWVvdXRUaW1lPTI7ICAgICAgIC8v6YKA6K+36LaF5pe25pe26Ze0KOenkiks6buY6K6k5LiJ5Y2B56eSXFxuICAgIHJlcXVpcmVkIHN0cmluZyBpbnZpdGVkUm9vbUlkPTM7ICAgIC8v6KKr6YKA6K+355qE5oi/6Ze0XFxuICAgIHJlcXVpcmVkIHN0cmluZyBpbnZpdGVJbmZvPTQ7ICAgICAgIC8v6YKA6K+355qE5L+h5oGvKOWMheWQq+mCgOivt+S6uizooqvpgoDor7fkuros5ZCE6IeqdXNlcmlkKeWuouaIt+err+WumuS5ieWlvS7ljY/orq7moIjlkoxzZXJ2ZXLpgI/kvKBcXG4gICAgcmVxdWlyZWQgc3RyaW5nIGludml0ZVNlc3Npb25JZD0gNTsgLy/lrqLmiLfnq6/kv53or4HllK/kuIDmgKco5bu66K6ucm9vbWlkX3VzZXJpZF/ml7bpl7TmiLNf6ZqP5py65pWwKVxcbiAgfVxcbiAgbWVzc2FnZSBcIitlaStcIlxcbiAge1xcbiAgICByZXF1aXJlZCBzdHJpbmcgaW52aXRlZFVzZXJJZD0xOyAgIC8v6KKr6YKA6K+355qE5Lq655qEdWlkXFxuICAgIHJlcXVpcmVkIHN0cmluZyBpbnZpdGVkUm9vbUlkPTI7ICAgLy/ooqvpgoDor7fnmoTmiL/pl7RcXG4gICAgcmVxdWlyZWQgc3RyaW5nIGludml0ZUluZm89MzsgICAgICAvL+WPlua2iOmCgOivt+eahOS/oeaBryjljIXlkKvpgoDor7fkuros6KKr6YKA6K+35Lq6LOWQhOiHqnVzZXJpZCnlrqLmiLfnq6/lrprkuYnlpb0u5Y2P6K6u5qCI5ZKMc2VydmVy6YCP5LygXFxuICAgIHJlcXVpcmVkIHN0cmluZyBpbnZpdGVTZXNzaW9uSWQ9NDsgLy/pgoDor7fnmoRzZXNzaW9uSWQs5a6i5oi356uv5Y+R6LW36YKA6K+35pe25Lqn55SfXFxuICB9XFxuICBtZXNzYWdlIFwiK3RpK1wiXFxuICB7XFxuICAgIHJlcXVpcmVkIHN0cmluZyBpbnZpdGVVc2VySWQ9MTsgICAgLy/pgoDor7fnmoTkurrnmoR1aWRcXG4gICAgcmVxdWlyZWQgaW50MzIgIGFuc3dlckNvZGU9MjsgICAgICAvL+aYr+WQpuaOpeWPl+i/num6pumCgOivty4w5Li65ouS57udLDHkuLrmjqXlj5dcXG4gICAgcmVxdWlyZWQgc3RyaW5nIGludml0ZVJvb21JZD0zOyAgICAvL+mCgOivt+eahOaIv+mXtFxcbiAgICByZXF1aXJlZCBzdHJpbmcgaW52aXRlU2Vzc2lvbklkPTQ7IC8v6YKA6K+355qEc2Vzc2lvbklkXFxuICAgIHJlcXVpcmVkIHN0cmluZyBjb250ZW50PTU7ICAgICAgICAgLy/pnIDopoHovazlj5HnmoRjb250ZW50XFxuICAgIG9wdGlvbmFsIHN0cmluZyBrZXk9NjsgICAgICAgICAgICAgLy/lpoLmnpzmjqXlj5fnmoTor50s6ZyA6KaB5Yqg6L+Z5Liq5a2X5q61LOaUvuWcqHJvb23nuqfliKvnmoRr5ZKMdizmlrDliqDlhaXmiL/pl7TnmoTog73mi4nlj5bliLBcXG4gICAgb3B0aW9uYWwgc3RyaW5nIHZhbHVlPTc7ICAgICAgICAgICAvL+WmguaenOaOpeWPl+eahOivnSzpnIDopoHliqDov5nkuKrlrZfmrrUs5pS+5Zyocm9vbee6p+WIq+eahGvlkox2LOaWsOWKoOWFpeaIv+mXtOeahOiDveaLieWPluWIsFxcbiAgfVxcbiAgbWVzc2FnZSBcIituaStcIlxcbiAge1xcbiAgICByZXF1aXJlZCBzdHJpbmcgaW52aXRlUm9vbUlkPTE7ICAgIC8v6YKA6K+355qE5oi/6Ze0XFxuICAgIHJlcXVpcmVkIHN0cmluZyBpbnZpdGVTZXNzaW9uSWQ9MjsgLy/pgoDor7fnmoRzZXNzaW9uSWRcXG4gICAgcmVxdWlyZWQgc3RyaW5nIGludml0ZUNvbnRlbnQ9MzsgICAvL+e7k+adn+i/num6pueahOS/oeaBryjpnIDopoHpgI/kvKDnu5nmiL/pl7TlhoXlhbbku5bkuropXFxuICAgIHJlcGVhdGVkIHN0cmluZyBpbnZpdGVSb29tS2V5cz00OyAgLy/pnIDopoHliKDpmaTov57puqbnmoTkv6Hmga/nmoRrZXlcXG4gIH1cXG59XFxuXCI7dmFyIHVpLGNpLGhpLGxpLGRpLGZpPSh1aT1haSxmdW5jdGlvbihlLHQpe3ZhciBuLGkscj17fTtyZXR1cm4gci5CeXRlQnVmZmVyPWUsci5jPWUsbj1lLHIuTG9uZz10fHxudWxsLHIuVkVSU0lPTj1cIjUuMC4xXCIsci5XSVJFX1RZUEVTPXt9LHIuV0lSRV9UWVBFUy5WQVJJTlQ9MCxyLldJUkVfVFlQRVMuQklUUzY0PTEsci5XSVJFX1RZUEVTLkxERUxJTT0yLHIuV0lSRV9UWVBFUy5TVEFSVEdST1VQPTMsci5XSVJFX1RZUEVTLkVOREdST1VQPTQsci5XSVJFX1RZUEVTLkJJVFMzMj01LHIuUEFDS0FCTEVfV0lSRV9UWVBFUz1bci5XSVJFX1RZUEVTLlZBUklOVCxyLldJUkVfVFlQRVMuQklUUzY0LHIuV0lSRV9UWVBFUy5CSVRTMzJdLHIuVFlQRVM9e2ludDMyOntuYW1lOlwiaW50MzJcIix3aXJlVHlwZTpyLldJUkVfVFlQRVMuVkFSSU5ULGRlZmF1bHRWYWx1ZTowfSx1aW50MzI6e25hbWU6XCJ1aW50MzJcIix3aXJlVHlwZTpyLldJUkVfVFlQRVMuVkFSSU5ULGRlZmF1bHRWYWx1ZTowfSxzaW50MzI6e25hbWU6XCJzaW50MzJcIix3aXJlVHlwZTpyLldJUkVfVFlQRVMuVkFSSU5ULGRlZmF1bHRWYWx1ZTowfSxpbnQ2NDp7bmFtZTpcImludDY0XCIsd2lyZVR5cGU6ci5XSVJFX1RZUEVTLlZBUklOVCxkZWZhdWx0VmFsdWU6ci5Mb25nP3IuTG9uZy5aRVJPOnZvaWQgMH0sdWludDY0OntuYW1lOlwidWludDY0XCIsd2lyZVR5cGU6ci5XSVJFX1RZUEVTLlZBUklOVCxkZWZhdWx0VmFsdWU6ci5Mb25nP3IuTG9uZy5VWkVSTzp2b2lkIDB9LHNpbnQ2NDp7bmFtZTpcInNpbnQ2NFwiLHdpcmVUeXBlOnIuV0lSRV9UWVBFUy5WQVJJTlQsZGVmYXVsdFZhbHVlOnIuTG9uZz9yLkxvbmcuWkVSTzp2b2lkIDB9LGJvb2w6e25hbWU6XCJib29sXCIsd2lyZVR5cGU6ci5XSVJFX1RZUEVTLlZBUklOVCxkZWZhdWx0VmFsdWU6ITF9LGRvdWJsZTp7bmFtZTpcImRvdWJsZVwiLHdpcmVUeXBlOnIuV0lSRV9UWVBFUy5CSVRTNjQsZGVmYXVsdFZhbHVlOjB9LHN0cmluZzp7bmFtZTpcInN0cmluZ1wiLHdpcmVUeXBlOnIuV0lSRV9UWVBFUy5MREVMSU0sZGVmYXVsdFZhbHVlOlwiXCJ9LGJ5dGVzOntuYW1lOlwiYnl0ZXNcIix3aXJlVHlwZTpyLldJUkVfVFlQRVMuTERFTElNLGRlZmF1bHRWYWx1ZTpudWxsfSxmaXhlZDMyOntuYW1lOlwiZml4ZWQzMlwiLHdpcmVUeXBlOnIuV0lSRV9UWVBFUy5CSVRTMzIsZGVmYXVsdFZhbHVlOjB9LHNmaXhlZDMyOntuYW1lOlwic2ZpeGVkMzJcIix3aXJlVHlwZTpyLldJUkVfVFlQRVMuQklUUzMyLGRlZmF1bHRWYWx1ZTowfSxmaXhlZDY0OntuYW1lOlwiZml4ZWQ2NFwiLHdpcmVUeXBlOnIuV0lSRV9UWVBFUy5CSVRTNjQsZGVmYXVsdFZhbHVlOnIuTG9uZz9yLkxvbmcuVVpFUk86dm9pZCAwfSxzZml4ZWQ2NDp7bmFtZTpcInNmaXhlZDY0XCIsd2lyZVR5cGU6ci5XSVJFX1RZUEVTLkJJVFM2NCxkZWZhdWx0VmFsdWU6ci5Mb25nP3IuTG9uZy5aRVJPOnZvaWQgMH0sZmxvYXQ6e25hbWU6XCJmbG9hdFwiLHdpcmVUeXBlOnIuV0lSRV9UWVBFUy5CSVRTMzIsZGVmYXVsdFZhbHVlOjB9LGVudW06e25hbWU6XCJlbnVtXCIsd2lyZVR5cGU6ci5XSVJFX1RZUEVTLlZBUklOVCxkZWZhdWx0VmFsdWU6MH0sbWVzc2FnZTp7bmFtZTpcIm1lc3NhZ2VcIix3aXJlVHlwZTpyLldJUkVfVFlQRVMuTERFTElNLGRlZmF1bHRWYWx1ZTpudWxsfSxncm91cDp7bmFtZTpcImdyb3VwXCIsd2lyZVR5cGU6ci5XSVJFX1RZUEVTLlNUQVJUR1JPVVAsZGVmYXVsdFZhbHVlOm51bGx9fSxyLk1BUF9LRVlfVFlQRVM9W3IuVFlQRVMuaW50MzIsci5UWVBFUy5zaW50MzIsci5UWVBFUy5zZml4ZWQzMixyLlRZUEVTLnVpbnQzMixyLlRZUEVTLmZpeGVkMzIsci5UWVBFUy5pbnQ2NCxyLlRZUEVTLnNpbnQ2NCxyLlRZUEVTLnNmaXhlZDY0LHIuVFlQRVMudWludDY0LHIuVFlQRVMuZml4ZWQ2NCxyLlRZUEVTLmJvb2wsci5UWVBFUy5zdHJpbmcsci5UWVBFUy5ieXRlc10sci5JRF9NSU49MSxyLklEX01BWD01MzY4NzA5MTEsci5jb252ZXJ0RmllbGRzVG9DYW1lbENhc2U9ITEsci5wb3B1bGF0ZUFjY2Vzc29ycz0hMCxyLnBvcHVsYXRlRGVmYXVsdHM9ITAsci5VdGlsPWZ1bmN0aW9uKCl7dmFyIGU9e307cmV0dXJuIGUuSVNfTk9ERT0hKFwib2JqZWN0XCIhPXR5cGVvZiBwcm9jZXNzfHxwcm9jZXNzK1wiXCIhPVwiW29iamVjdCBwcm9jZXNzXVwifHxwcm9jZXNzLmJyb3dzZXIpLGUuWEhSPWZ1bmN0aW9uKCl7dmFyIGUsdD1bZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFhNTEh0dHBSZXF1ZXN0fSxmdW5jdGlvbigpe3JldHVybiBuZXcgQWN0aXZlWE9iamVjdChcIk1zeG1sMi5YTUxIVFRQXCIpfSxmdW5jdGlvbigpe3JldHVybiBuZXcgQWN0aXZlWE9iamVjdChcIk1zeG1sMy5YTUxIVFRQXCIpfSxmdW5jdGlvbigpe3JldHVybiBuZXcgQWN0aXZlWE9iamVjdChcIk1pY3Jvc29mdC5YTUxIVFRQXCIpfV0sbj1udWxsO2ZvcihlPTA7ZTx0Lmxlbmd0aDtlKyspe3RyeXtuPXRbZV0oKX1jYXRjaChlKXtjb250aW51ZX1icmVha31pZighbil0aHJvdyBFcnJvcihcIlhNTEh0dHBSZXF1ZXN0IGlzIG5vdCBzdXBwb3J0ZWRcIik7cmV0dXJuIG59LGUuZmV0Y2g9ZnVuY3Rpb24odCxuKXtpZihuJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBuJiYobj1udWxsKSxlLklTX05PREUpaWYobilnLnJlYWRGaWxlKHQsKGZ1bmN0aW9uKGUsdCl7bihlP251bGw6XCJcIit0KX0pKTtlbHNlIHRyeXtyZXR1cm4gZy5yZWFkRmlsZVN5bmModCl9Y2F0Y2goZSl7cmV0dXJuIG51bGx9ZWxzZXt2YXIgaT1lLlhIUigpO2lmKGkub3BlbihcIkdFVFwiLHQsISFuKSxpLnNldFJlcXVlc3RIZWFkZXIoXCJBY2NlcHRcIixcInRleHQvcGxhaW5cIiksXCJmdW5jdGlvblwiPT10eXBlb2YgaS5vdmVycmlkZU1pbWVUeXBlJiZpLm92ZXJyaWRlTWltZVR5cGUoXCJ0ZXh0L3BsYWluXCIpLCFuKXJldHVybiBpLnNlbmQobnVsbCksMjAwPT1pLnN0YXR1c3x8MD09aS5zdGF0dXMmJlwic3RyaW5nXCI9PXR5cGVvZiBpLnJlc3BvbnNlVGV4dD9pLnJlc3BvbnNlVGV4dDpudWxsO2lmKGkub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7ND09aS5yZWFkeVN0YXRlJiYoMjAwPT1pLnN0YXR1c3x8MD09aS5zdGF0dXMmJlwic3RyaW5nXCI9PXR5cGVvZiBpLnJlc3BvbnNlVGV4dD9uKGkucmVzcG9uc2VUZXh0KTpuKG51bGwpKX0sND09aS5yZWFkeVN0YXRlKXJldHVybjtpLnNlbmQobnVsbCl9fSxlLnRvQ2FtZWxDYXNlPWZ1bmN0aW9uKGUpe3JldHVybiBlLnJlcGxhY2UoL18oW2EtekEtWl0pL2csKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQudG9VcHBlckNhc2UoKX0pKX0sZX0oKSxyLkxhbmc9e0RFTElNOi9bXFxzXFx7XFx9PTs6XFxbXFxdLCdcIlxcKFxcKTw+XS9nLFJVTEU6L14oPzpyZXF1aXJlZHxvcHRpb25hbHxyZXBlYXRlZHxtYXApJC8sVFlQRTovXig/OmRvdWJsZXxmbG9hdHxpbnQzMnx1aW50MzJ8c2ludDMyfGludDY0fHVpbnQ2NHxzaW50NjR8Zml4ZWQzMnxzZml4ZWQzMnxmaXhlZDY0fHNmaXhlZDY0fGJvb2x8c3RyaW5nfGJ5dGVzKSQvLE5BTUU6L15bYS16QS1aX11bYS16QS1aXzAtOV0qJC8sVFlQRURFRjovXlthLXpBLVpdW2EtekEtWl8wLTldKiQvLFRZUEVSRUY6L14oPzpcXC4/W2EtekEtWl9dW2EtekEtWl8wLTldKikrJC8sRlFUWVBFUkVGOi9eKD86XFwuW2EtekEtWl1bYS16QS1aXzAtOV0qKSskLyxOVU1CRVI6L14tPyg/OlsxLTldWzAtOV0qfDB8MFt4WF1bMC05YS1mQS1GXSt8MFswLTddK3woWzAtOV0qKFxcLlswLTldKik/KFtFZV1bKy1dP1swLTldKyk/KXxpbmZ8bmFuKSQvLE5VTUJFUl9ERUM6L14oPzpbMS05XVswLTldKnwwKSQvLE5VTUJFUl9IRVg6L14wW3hYXVswLTlhLWZBLUZdKyQvLE5VTUJFUl9PQ1Q6L14wWzAtN10rJC8sTlVNQkVSX0ZMVDovXihbMC05XSooXFwuWzAtOV0qKT8oW0VlXVsrLV0/WzAtOV0rKT98aW5mfG5hbikkLyxCT09MOi9eKD86dHJ1ZXxmYWxzZSkkL2ksSUQ6L14oPzpbMS05XVswLTldKnwwfDBbeFhdWzAtOWEtZkEtRl0rfDBbMC03XSspJC8sTkVHSUQ6L15cXC0/KD86WzEtOV1bMC05XSp8MHwwW3hYXVswLTlhLWZBLUZdK3wwWzAtN10rKSQvLFdISVRFU1BBQ0U6L1xccy8sU1RSSU5HOi8oPzpcIihbXlwiXFxcXF0qKD86XFxcXC5bXlwiXFxcXF0qKSopXCIpfCg/OicoW14nXFxcXF0qKD86XFxcXC5bXidcXFxcXSopKiknKS9nLFNUUklOR19EUTovKD86XCIoW15cIlxcXFxdKig/OlxcXFwuW15cIlxcXFxdKikqKVwiKS9nLFNUUklOR19TUTovKD86JyhbXidcXFxcXSooPzpcXFxcLlteJ1xcXFxdKikqKScpL2d9LHIuRG90UHJvdG89ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKGUsbil7dmFyIGk9LTEscj0xO2lmKFwiLVwiPT1lLmNoYXJBdCgwKSYmKHI9LTEsZT1lLnN1YnN0cmluZygxKSksdC5OVU1CRVJfREVDLnRlc3QoZSkpaT1wYXJzZUludChlKTtlbHNlIGlmKHQuTlVNQkVSX0hFWC50ZXN0KGUpKWk9cGFyc2VJbnQoZS5zdWJzdHJpbmcoMiksMTYpO2Vsc2V7aWYoIXQuTlVNQkVSX09DVC50ZXN0KGUpKXRocm93IEVycm9yKFwiaWxsZWdhbCBpZCB2YWx1ZTogXCIrKHI8MD9cIi1cIjpcIlwiKStlKTtpPXBhcnNlSW50KGUuc3Vic3RyaW5nKDEpLDgpfWlmKGk9MHxyKmksIW4mJmk8MCl0aHJvdyBFcnJvcihcImlsbGVnYWwgaWQgdmFsdWU6IFwiKyhyPDA/XCItXCI6XCJcIikrZSk7cmV0dXJuIGl9ZnVuY3Rpb24gaShlKXt2YXIgbj0xO2lmKFwiLVwiPT1lLmNoYXJBdCgwKSYmKG49LTEsZT1lLnN1YnN0cmluZygxKSksdC5OVU1CRVJfREVDLnRlc3QoZSkpcmV0dXJuIG4qcGFyc2VJbnQoZSwxMCk7aWYodC5OVU1CRVJfSEVYLnRlc3QoZSkpcmV0dXJuIG4qcGFyc2VJbnQoZS5zdWJzdHJpbmcoMiksMTYpO2lmKHQuTlVNQkVSX09DVC50ZXN0KGUpKXJldHVybiBuKnBhcnNlSW50KGUuc3Vic3RyaW5nKDEpLDgpO2lmKFwiaW5mXCI9PT1lKXJldHVybiAxLzAqbjtpZihcIm5hblwiPT09ZSlyZXR1cm4gTmFOO2lmKHQuTlVNQkVSX0ZMVC50ZXN0KGUpKXJldHVybiBuKnBhcnNlRmxvYXQoZSk7dGhyb3cgRXJyb3IoXCJpbGxlZ2FsIG51bWJlciB2YWx1ZTogXCIrKG48MD9cIi1cIjpcIlwiKStlKX1mdW5jdGlvbiByKGUsdCxuKXt2b2lkIDA9PT1lW3RdP2VbdF09bjooQXJyYXkuaXNBcnJheShlW3RdKXx8KGVbdF09W2VbdF1dKSxlW3RdLnB1c2gobikpfXZhciBzLG8sYT17fSx1PWZ1bmN0aW9uKGUpe3RoaXMuc291cmNlPWUrXCJcIix0aGlzLmluZGV4PTAsdGhpcy5saW5lPTEsdGhpcy5zdGFjaz1bXSx0aGlzLl9zdHJpbmdPcGVuPW51bGx9LGM9dS5wcm90b3R5cGU7cmV0dXJuIGMuX3JlYWRTdHJpbmc9ZnVuY3Rpb24oKXt2YXIgZSxuPSdcIic9PT10aGlzLl9zdHJpbmdPcGVuP3QuU1RSSU5HX0RROnQuU1RSSU5HX1NRO2lmKG4ubGFzdEluZGV4PXRoaXMuaW5kZXgtMSwhKGU9bi5leGVjKHRoaXMuc291cmNlKSkpdGhyb3cgRXJyb3IoXCJ1bnRlcm1pbmF0ZWQgc3RyaW5nXCIpO3JldHVybiB0aGlzLmluZGV4PW4ubGFzdEluZGV4LHRoaXMuc3RhY2sucHVzaCh0aGlzLl9zdHJpbmdPcGVuKSx0aGlzLl9zdHJpbmdPcGVuPW51bGwsZVsxXX0sYy5uZXh0PWZ1bmN0aW9uKCl7dmFyIGUsbixpLHIscztpZih0aGlzLnN0YWNrLmxlbmd0aD4wKXJldHVybiB0aGlzLnN0YWNrLnNoaWZ0KCk7aWYodGhpcy5pbmRleD49dGhpcy5zb3VyY2UubGVuZ3RoKXJldHVybiBudWxsO2lmKG51bGwhPT10aGlzLl9zdHJpbmdPcGVuKXJldHVybiB0aGlzLl9yZWFkU3RyaW5nKCk7ZG97Zm9yKGU9ITE7dC5XSElURVNQQUNFLnRlc3QoaT10aGlzLnNvdXJjZS5jaGFyQXQodGhpcy5pbmRleCkpOylpZihcIlxcblwiPT09aSYmKyt0aGlzLmxpbmUsKyt0aGlzLmluZGV4PT09dGhpcy5zb3VyY2UubGVuZ3RoKXJldHVybiBudWxsO2lmKFwiL1wiPT09dGhpcy5zb3VyY2UuY2hhckF0KHRoaXMuaW5kZXgpKWlmKCsrdGhpcy5pbmRleCxcIi9cIj09PXRoaXMuc291cmNlLmNoYXJBdCh0aGlzLmluZGV4KSl7Zm9yKDtcIlxcblwiIT09dGhpcy5zb3VyY2UuY2hhckF0KCsrdGhpcy5pbmRleCk7KWlmKHRoaXMuaW5kZXg9PXRoaXMuc291cmNlLmxlbmd0aClyZXR1cm4gbnVsbDsrK3RoaXMuaW5kZXgsKyt0aGlzLmxpbmUsZT0hMH1lbHNle2lmKFwiKlwiIT09KGk9dGhpcy5zb3VyY2UuY2hhckF0KHRoaXMuaW5kZXgpKSlyZXR1cm5cIi9cIjtkb3tpZihcIlxcblwiPT09aSYmKyt0aGlzLmxpbmUsKyt0aGlzLmluZGV4PT09dGhpcy5zb3VyY2UubGVuZ3RoKXJldHVybiBudWxsO249aSxpPXRoaXMuc291cmNlLmNoYXJBdCh0aGlzLmluZGV4KX13aGlsZShcIipcIiE9PW58fFwiL1wiIT09aSk7Kyt0aGlzLmluZGV4LGU9ITB9fXdoaWxlKGUpO2lmKHRoaXMuaW5kZXg9PT10aGlzLnNvdXJjZS5sZW5ndGgpcmV0dXJuIG51bGw7aWYocj10aGlzLmluZGV4LHQuREVMSU0ubGFzdEluZGV4PTAsIXQuREVMSU0udGVzdCh0aGlzLnNvdXJjZS5jaGFyQXQocisrKSkpZm9yKDtyPHRoaXMuc291cmNlLmxlbmd0aCYmIXQuREVMSU0udGVzdCh0aGlzLnNvdXJjZS5jaGFyQXQocikpOykrK3I7cmV0dXJuKCdcIic9PT0ocz10aGlzLnNvdXJjZS5zdWJzdHJpbmcodGhpcy5pbmRleCx0aGlzLmluZGV4PXIpKXx8XCInXCI9PT1zKSYmKHRoaXMuX3N0cmluZ09wZW49cyksc30sYy5wZWVrPWZ1bmN0aW9uKCl7aWYoMD09PXRoaXMuc3RhY2subGVuZ3RoKXt2YXIgZT10aGlzLm5leHQoKTtpZihudWxsPT09ZSlyZXR1cm4gbnVsbDt0aGlzLnN0YWNrLnB1c2goZSl9cmV0dXJuIHRoaXMuc3RhY2tbMF19LGMuc2tpcD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLm5leHQoKTtpZih0IT09ZSl0aHJvdyBFcnJvcihcImlsbGVnYWwgJ1wiK3QrXCInLCAnXCIrZStcIicgZXhwZWN0ZWRcIil9LGMub21pdD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wZWVrKCk9PT1lJiYodGhpcy5uZXh0KCksITApfSxjLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuXCJUb2tlbml6ZXIgKFwiK3RoaXMuaW5kZXgrXCIvXCIrdGhpcy5zb3VyY2UubGVuZ3RoK1wiIGF0IGxpbmUgXCIrdGhpcy5saW5lK1wiKVwifSxhLlRva2VuaXplcj11LChvPShzPWZ1bmN0aW9uKGUpe3RoaXMudG49bmV3IHUoZSksdGhpcy5wcm90bzM9ITF9KS5wcm90b3R5cGUpLnBhcnNlPWZ1bmN0aW9uKCl7dmFyIGUsbj17bmFtZTpcIltST09UXVwiLHBhY2thZ2U6bnVsbCxtZXNzYWdlczpbXSxlbnVtczpbXSxpbXBvcnRzOltdLG9wdGlvbnM6e30sc2VydmljZXM6W119LGk9ITA7dHJ5e2Zvcig7ZT10aGlzLnRuLm5leHQoKTspc3dpdGNoKGUpe2Nhc2VcInBhY2thZ2VcIjppZighaXx8bnVsbCE9PW4ucGFja2FnZSl0aHJvdyBFcnJvcihcInVuZXhwZWN0ZWQgJ3BhY2thZ2UnXCIpO2lmKGU9dGhpcy50bi5uZXh0KCksIXQuVFlQRVJFRi50ZXN0KGUpKXRocm93IEVycm9yKFwiaWxsZWdhbCBwYWNrYWdlIG5hbWU6IFwiK2UpO3RoaXMudG4uc2tpcChcIjtcIiksbi5wYWNrYWdlPWU7YnJlYWs7Y2FzZVwiaW1wb3J0XCI6aWYoIWkpdGhyb3cgRXJyb3IoXCJ1bmV4cGVjdGVkICdpbXBvcnQnXCIpO1wicHVibGljXCI9PT0oZT10aGlzLnRuLnBlZWsoKSkmJnRoaXMudG4ubmV4dCgpLGU9dGhpcy5fcmVhZFN0cmluZygpLHRoaXMudG4uc2tpcChcIjtcIiksbi5pbXBvcnRzLnB1c2goZSk7YnJlYWs7Y2FzZVwic3ludGF4XCI6aWYoIWkpdGhyb3cgRXJyb3IoXCJ1bmV4cGVjdGVkICdzeW50YXgnXCIpO3RoaXMudG4uc2tpcChcIj1cIiksXCJwcm90bzNcIj09PShuLnN5bnRheD10aGlzLl9yZWFkU3RyaW5nKCkpJiYodGhpcy5wcm90bzM9ITApLHRoaXMudG4uc2tpcChcIjtcIik7YnJlYWs7Y2FzZVwibWVzc2FnZVwiOnRoaXMuX3BhcnNlTWVzc2FnZShuLG51bGwpLGk9ITE7YnJlYWs7Y2FzZVwiZW51bVwiOnRoaXMuX3BhcnNlRW51bShuKSxpPSExO2JyZWFrO2Nhc2VcIm9wdGlvblwiOnRoaXMuX3BhcnNlT3B0aW9uKG4pO2JyZWFrO2Nhc2VcInNlcnZpY2VcIjp0aGlzLl9wYXJzZVNlcnZpY2Uobik7YnJlYWs7Y2FzZVwiZXh0ZW5kXCI6dGhpcy5fcGFyc2VFeHRlbmQobik7YnJlYWs7ZGVmYXVsdDp0aHJvdyBFcnJvcihcInVuZXhwZWN0ZWQgJ1wiK2UrXCInXCIpfX1jYXRjaChlKXt0aHJvdyBlLm1lc3NhZ2U9XCJQYXJzZSBlcnJvciBhdCBsaW5lIFwiK3RoaXMudG4ubGluZStcIjogXCIrZS5tZXNzYWdlLGV9cmV0dXJuIGRlbGV0ZSBuLm5hbWUsbn0scy5wYXJzZT1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IHMoZSkucGFyc2UoKX0sby5fcmVhZFN0cmluZz1mdW5jdGlvbigpe3ZhciBlLHQsbj1cIlwiO2Rve2lmKFwiJ1wiIT09KHQ9dGhpcy50bi5uZXh0KCkpJiYnXCInIT09dCl0aHJvdyBFcnJvcihcImlsbGVnYWwgc3RyaW5nIGRlbGltaXRlcjogXCIrdCk7bis9dGhpcy50bi5uZXh0KCksdGhpcy50bi5za2lwKHQpLGU9dGhpcy50bi5wZWVrKCl9d2hpbGUoJ1wiJz09PWV8fCdcIic9PT1lKTtyZXR1cm4gbn0sby5fcmVhZFZhbHVlPWZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMudG4ucGVlaygpO2lmKCdcIic9PT1ufHxcIidcIj09PW4pcmV0dXJuIHRoaXMuX3JlYWRTdHJpbmcoKTtpZih0aGlzLnRuLm5leHQoKSx0Lk5VTUJFUi50ZXN0KG4pKXJldHVybiBpKG4pO2lmKHQuQk9PTC50ZXN0KG4pKXJldHVyblwidHJ1ZVwiPT09bi50b0xvd2VyQ2FzZSgpO2lmKGUmJnQuVFlQRVJFRi50ZXN0KG4pKXJldHVybiBuO3Rocm93IEVycm9yKFwiaWxsZWdhbCB2YWx1ZTogXCIrbil9LG8uX3BhcnNlT3B0aW9uPWZ1bmN0aW9uKGUsbil7dmFyIGkscj10aGlzLnRuLm5leHQoKSxzPSExO2lmKFwiKFwiPT09ciYmKHM9ITAscj10aGlzLnRuLm5leHQoKSksIXQuVFlQRVJFRi50ZXN0KHIpKXRocm93IEVycm9yKFwiaWxsZWdhbCBvcHRpb24gbmFtZTogXCIrcik7aT1yLHMmJih0aGlzLnRuLnNraXAoXCIpXCIpLGk9XCIoXCIraStcIilcIixyPXRoaXMudG4ucGVlaygpLHQuRlFUWVBFUkVGLnRlc3QocikmJihpKz1yLHRoaXMudG4ubmV4dCgpKSksdGhpcy50bi5za2lwKFwiPVwiKSx0aGlzLl9wYXJzZU9wdGlvblZhbHVlKGUsaSksbnx8dGhpcy50bi5za2lwKFwiO1wiKX0sby5fcGFyc2VPcHRpb25WYWx1ZT1mdW5jdGlvbihlLG4pe3ZhciBpPXRoaXMudG4ucGVlaygpO2lmKFwie1wiIT09aSlyKGUub3B0aW9ucyxuLHRoaXMuX3JlYWRWYWx1ZSghMCkpO2Vsc2UgZm9yKHRoaXMudG4uc2tpcChcIntcIik7XCJ9XCIhPT0oaT10aGlzLnRuLm5leHQoKSk7KXtpZighdC5OQU1FLnRlc3QoaSkpdGhyb3cgRXJyb3IoXCJpbGxlZ2FsIG9wdGlvbiBuYW1lOiBcIituK1wiLlwiK2kpO3RoaXMudG4ub21pdChcIjpcIik/cihlLm9wdGlvbnMsbitcIi5cIitpLHRoaXMuX3JlYWRWYWx1ZSghMCkpOnRoaXMuX3BhcnNlT3B0aW9uVmFsdWUoZSxuK1wiLlwiK2kpfX0sby5fcGFyc2VTZXJ2aWNlPWZ1bmN0aW9uKGUpe3ZhciBuLGk9dGhpcy50bi5uZXh0KCk7aWYoIXQuTkFNRS50ZXN0KGkpKXRocm93IEVycm9yKFwiaWxsZWdhbCBzZXJ2aWNlIG5hbWUgYXQgbGluZSBcIit0aGlzLnRuLmxpbmUrXCI6IFwiK2kpO2ZvcihuPXtuYW1lOmkscnBjOnt9LG9wdGlvbnM6e319LHRoaXMudG4uc2tpcChcIntcIik7XCJ9XCIhPT0oaT10aGlzLnRuLm5leHQoKSk7KWlmKFwib3B0aW9uXCI9PT1pKXRoaXMuX3BhcnNlT3B0aW9uKG4pO2Vsc2V7aWYoXCJycGNcIiE9PWkpdGhyb3cgRXJyb3IoXCJpbGxlZ2FsIHNlcnZpY2UgdG9rZW46IFwiK2kpO3RoaXMuX3BhcnNlU2VydmljZVJQQyhuKX10aGlzLnRuLm9taXQoXCI7XCIpLGUuc2VydmljZXMucHVzaChuKX0sby5fcGFyc2VTZXJ2aWNlUlBDPWZ1bmN0aW9uKGUpe3ZhciBuLGkscj1cInJwY1wiLHM9dGhpcy50bi5uZXh0KCk7aWYoIXQuTkFNRS50ZXN0KHMpKXRocm93IEVycm9yKFwiaWxsZWdhbCBycGMgc2VydmljZSBtZXRob2QgbmFtZTogXCIrcyk7aWYobj1zLGk9e3JlcXVlc3Q6bnVsbCxyZXNwb25zZTpudWxsLHJlcXVlc3Rfc3RyZWFtOiExLHJlc3BvbnNlX3N0cmVhbTohMSxvcHRpb25zOnt9fSx0aGlzLnRuLnNraXAoXCIoXCIpLFwic3RyZWFtXCI9PT0ocz10aGlzLnRuLm5leHQoKSkudG9Mb3dlckNhc2UoKSYmKGkucmVxdWVzdF9zdHJlYW09ITAscz10aGlzLnRuLm5leHQoKSksIXQuVFlQRVJFRi50ZXN0KHMpKXRocm93IEVycm9yKFwiaWxsZWdhbCBycGMgc2VydmljZSByZXF1ZXN0IHR5cGU6IFwiK3MpO2lmKGkucmVxdWVzdD1zLHRoaXMudG4uc2tpcChcIilcIiksXCJyZXR1cm5zXCIhPT0ocz10aGlzLnRuLm5leHQoKSkudG9Mb3dlckNhc2UoKSl0aHJvdyBFcnJvcihcImlsbGVnYWwgcnBjIHNlcnZpY2UgcmVxdWVzdCB0eXBlIGRlbGltaXRlcjogXCIrcyk7aWYodGhpcy50bi5za2lwKFwiKFwiKSxcInN0cmVhbVwiPT09KHM9dGhpcy50bi5uZXh0KCkpLnRvTG93ZXJDYXNlKCkmJihpLnJlc3BvbnNlX3N0cmVhbT0hMCxzPXRoaXMudG4ubmV4dCgpKSxpLnJlc3BvbnNlPXMsdGhpcy50bi5za2lwKFwiKVwiKSxcIntcIj09PShzPXRoaXMudG4ucGVlaygpKSl7Zm9yKHRoaXMudG4ubmV4dCgpO1wifVwiIT09KHM9dGhpcy50bi5uZXh0KCkpOyl7aWYoXCJvcHRpb25cIiE9PXMpdGhyb3cgRXJyb3IoXCJpbGxlZ2FsIHJwYyBzZXJ2aWNlIHRva2VuOiBcIitzKTt0aGlzLl9wYXJzZU9wdGlvbihpKX10aGlzLnRuLm9taXQoXCI7XCIpfWVsc2UgdGhpcy50bi5za2lwKFwiO1wiKTt2b2lkIDA9PT1lW3JdJiYoZVtyXT17fSksZVtyXVtuXT1pfSxvLl9wYXJzZU1lc3NhZ2U9ZnVuY3Rpb24oZSxpKXt2YXIgcj0hIWkscz10aGlzLnRuLm5leHQoKSxvPXtuYW1lOlwiXCIsZmllbGRzOltdLGVudW1zOltdLG1lc3NhZ2VzOltdLG9wdGlvbnM6e30sc2VydmljZXM6W10sb25lb2ZzOnt9fTtpZighdC5OQU1FLnRlc3QocykpdGhyb3cgRXJyb3IoXCJpbGxlZ2FsIFwiKyhyP1wiZ3JvdXBcIjpcIm1lc3NhZ2VcIikrXCIgbmFtZTogXCIrcyk7Zm9yKG8ubmFtZT1zLHImJih0aGlzLnRuLnNraXAoXCI9XCIpLGkuaWQ9bih0aGlzLnRuLm5leHQoKSksby5pc0dyb3VwPSEwKSxcIltcIj09PShzPXRoaXMudG4ucGVlaygpKSYmaSYmdGhpcy5fcGFyc2VGaWVsZE9wdGlvbnMoaSksdGhpcy50bi5za2lwKFwie1wiKTtcIn1cIiE9PShzPXRoaXMudG4ubmV4dCgpKTspaWYodC5SVUxFLnRlc3QocykpdGhpcy5fcGFyc2VNZXNzYWdlRmllbGQobyxzKTtlbHNlIGlmKFwib25lb2ZcIj09PXMpdGhpcy5fcGFyc2VNZXNzYWdlT25lT2Yobyk7ZWxzZSBpZihcImVudW1cIj09PXMpdGhpcy5fcGFyc2VFbnVtKG8pO2Vsc2UgaWYoXCJtZXNzYWdlXCI9PT1zKXRoaXMuX3BhcnNlTWVzc2FnZShvKTtlbHNlIGlmKFwib3B0aW9uXCI9PT1zKXRoaXMuX3BhcnNlT3B0aW9uKG8pO2Vsc2UgaWYoXCJzZXJ2aWNlXCI9PT1zKXRoaXMuX3BhcnNlU2VydmljZShvKTtlbHNlIGlmKFwiZXh0ZW5zaW9uc1wiPT09cylvLmV4dGVuc2lvbnM9dGhpcy5fcGFyc2VFeHRlbnNpb25SYW5nZXMoKTtlbHNlIGlmKFwicmVzZXJ2ZWRcIj09PXMpdGhpcy5fcGFyc2VJZ25vcmVkKCk7ZWxzZSBpZihcImV4dGVuZFwiPT09cyl0aGlzLl9wYXJzZUV4dGVuZChvKTtlbHNle2lmKCF0LlRZUEVSRUYudGVzdChzKSl0aHJvdyBFcnJvcihcImlsbGVnYWwgbWVzc2FnZSB0b2tlbjogXCIrcyk7aWYoIXRoaXMucHJvdG8zKXRocm93IEVycm9yKFwiaWxsZWdhbCBmaWVsZCBydWxlOiBcIitzKTt0aGlzLl9wYXJzZU1lc3NhZ2VGaWVsZChvLFwib3B0aW9uYWxcIixzKX1yZXR1cm4gdGhpcy50bi5vbWl0KFwiO1wiKSxlLm1lc3NhZ2VzLnB1c2gobyksb30sby5fcGFyc2VJZ25vcmVkPWZ1bmN0aW9uKCl7Zm9yKDtcIjtcIiE9PXRoaXMudG4ucGVlaygpOyl0aGlzLnRuLm5leHQoKTt0aGlzLnRuLnNraXAoXCI7XCIpfSxvLl9wYXJzZU1lc3NhZ2VGaWVsZD1mdW5jdGlvbihlLGkscil7dmFyIHMsbyxhO2lmKCF0LlJVTEUudGVzdChpKSl0aHJvdyBFcnJvcihcImlsbGVnYWwgbWVzc2FnZSBmaWVsZCBydWxlOiBcIitpKTtpZihzPXtydWxlOmksdHlwZTpcIlwiLG5hbWU6XCJcIixvcHRpb25zOnt9LGlkOjB9LFwibWFwXCI9PT1pKXtpZihyKXRocm93IEVycm9yKFwiaWxsZWdhbCB0eXBlOiBcIityKTtpZih0aGlzLnRuLnNraXAoXCI8XCIpLG89dGhpcy50bi5uZXh0KCksIXQuVFlQRS50ZXN0KG8pJiYhdC5UWVBFUkVGLnRlc3QobykpdGhyb3cgRXJyb3IoXCJpbGxlZ2FsIG1lc3NhZ2UgZmllbGQgdHlwZTogXCIrbyk7aWYocy5rZXl0eXBlPW8sdGhpcy50bi5za2lwKFwiLFwiKSxvPXRoaXMudG4ubmV4dCgpLCF0LlRZUEUudGVzdChvKSYmIXQuVFlQRVJFRi50ZXN0KG8pKXRocm93IEVycm9yKFwiaWxsZWdhbCBtZXNzYWdlIGZpZWxkOiBcIitvKTtpZihzLnR5cGU9byx0aGlzLnRuLnNraXAoXCI+XCIpLG89dGhpcy50bi5uZXh0KCksIXQuTkFNRS50ZXN0KG8pKXRocm93IEVycm9yKFwiaWxsZWdhbCBtZXNzYWdlIGZpZWxkIG5hbWU6IFwiK28pO3MubmFtZT1vLHRoaXMudG4uc2tpcChcIj1cIikscy5pZD1uKHRoaXMudG4ubmV4dCgpKSxcIltcIj09PShvPXRoaXMudG4ucGVlaygpKSYmdGhpcy5fcGFyc2VGaWVsZE9wdGlvbnMocyksdGhpcy50bi5za2lwKFwiO1wiKX1lbHNlIGlmKFwiZ3JvdXBcIj09PShyPXZvaWQgMCE9PXI/cjp0aGlzLnRuLm5leHQoKSkpe2lmKGE9dGhpcy5fcGFyc2VNZXNzYWdlKGUscyksIS9eW0EtWl0vLnRlc3QoYS5uYW1lKSl0aHJvdyBFcnJvcihcImlsbGVnYWwgZ3JvdXAgbmFtZTogXCIrYS5uYW1lKTtzLnR5cGU9YS5uYW1lLHMubmFtZT1hLm5hbWUudG9Mb3dlckNhc2UoKSx0aGlzLnRuLm9taXQoXCI7XCIpfWVsc2V7aWYoIXQuVFlQRS50ZXN0KHIpJiYhdC5UWVBFUkVGLnRlc3QocikpdGhyb3cgRXJyb3IoXCJpbGxlZ2FsIG1lc3NhZ2UgZmllbGQgdHlwZTogXCIrcik7aWYocy50eXBlPXIsbz10aGlzLnRuLm5leHQoKSwhdC5OQU1FLnRlc3QobykpdGhyb3cgRXJyb3IoXCJpbGxlZ2FsIG1lc3NhZ2UgZmllbGQgbmFtZTogXCIrbyk7cy5uYW1lPW8sdGhpcy50bi5za2lwKFwiPVwiKSxzLmlkPW4odGhpcy50bi5uZXh0KCkpLFwiW1wiPT09KG89dGhpcy50bi5wZWVrKCkpJiZ0aGlzLl9wYXJzZUZpZWxkT3B0aW9ucyhzKSx0aGlzLnRuLnNraXAoXCI7XCIpfXJldHVybiBlLmZpZWxkcy5wdXNoKHMpLHN9LG8uX3BhcnNlTWVzc2FnZU9uZU9mPWZ1bmN0aW9uKGUpe3ZhciBuLGkscixzPXRoaXMudG4ubmV4dCgpO2lmKCF0Lk5BTUUudGVzdChzKSl0aHJvdyBFcnJvcihcImlsbGVnYWwgb25lb2YgbmFtZTogXCIrcyk7Zm9yKGk9cyxyPVtdLHRoaXMudG4uc2tpcChcIntcIik7XCJ9XCIhPT0ocz10aGlzLnRuLm5leHQoKSk7KShuPXRoaXMuX3BhcnNlTWVzc2FnZUZpZWxkKGUsXCJvcHRpb25hbFwiLHMpKS5vbmVvZj1pLHIucHVzaChuLmlkKTt0aGlzLnRuLm9taXQoXCI7XCIpLGUub25lb2ZzW2ldPXJ9LG8uX3BhcnNlRmllbGRPcHRpb25zPWZ1bmN0aW9uKGUpe3RoaXMudG4uc2tpcChcIltcIik7Zm9yKHZhciB0PSEwO1wiXVwiIT09dGhpcy50bi5wZWVrKCk7KXR8fHRoaXMudG4uc2tpcChcIixcIiksdGhpcy5fcGFyc2VPcHRpb24oZSwhMCksdD0hMTt0aGlzLnRuLm5leHQoKX0sby5fcGFyc2VFbnVtPWZ1bmN0aW9uKGUpe3ZhciBpLHI9e25hbWU6XCJcIix2YWx1ZXM6W10sb3B0aW9uczp7fX0scz10aGlzLnRuLm5leHQoKTtpZighdC5OQU1FLnRlc3QocykpdGhyb3cgRXJyb3IoXCJpbGxlZ2FsIG5hbWU6IFwiK3MpO2ZvcihyLm5hbWU9cyx0aGlzLnRuLnNraXAoXCJ7XCIpO1wifVwiIT09KHM9dGhpcy50bi5uZXh0KCkpOylpZihcIm9wdGlvblwiPT09cyl0aGlzLl9wYXJzZU9wdGlvbihyKTtlbHNle2lmKCF0Lk5BTUUudGVzdChzKSl0aHJvdyBFcnJvcihcImlsbGVnYWwgbmFtZTogXCIrcyk7dGhpcy50bi5za2lwKFwiPVwiKSxpPXtuYW1lOnMsaWQ6bih0aGlzLnRuLm5leHQoKSwhMCl9LFwiW1wiPT09KHM9dGhpcy50bi5wZWVrKCkpJiZ0aGlzLl9wYXJzZUZpZWxkT3B0aW9ucyh7b3B0aW9uczp7fX0pLHRoaXMudG4uc2tpcChcIjtcIiksci52YWx1ZXMucHVzaChpKX10aGlzLnRuLm9taXQoXCI7XCIpLGUuZW51bXMucHVzaChyKX0sby5fcGFyc2VFeHRlbnNpb25SYW5nZXM9ZnVuY3Rpb24oKXt2YXIgdCxuLHIscz1bXTtkb3tmb3Iobj1bXTs7KXtzd2l0Y2godD10aGlzLnRuLm5leHQoKSl7Y2FzZVwibWluXCI6cj1lLklEX01JTjticmVhaztjYXNlXCJtYXhcIjpyPWUuSURfTUFYO2JyZWFrO2RlZmF1bHQ6cj1pKHQpfWlmKG4ucHVzaChyKSwyPT09bi5sZW5ndGgpYnJlYWs7aWYoXCJ0b1wiIT09dGhpcy50bi5wZWVrKCkpe24ucHVzaChyKTticmVha310aGlzLnRuLm5leHQoKX1zLnB1c2gobil9d2hpbGUodGhpcy50bi5vbWl0KFwiLFwiKSk7cmV0dXJuIHRoaXMudG4uc2tpcChcIjtcIiksc30sby5fcGFyc2VFeHRlbmQ9ZnVuY3Rpb24oZSl7dmFyIG4saT10aGlzLnRuLm5leHQoKTtpZighdC5UWVBFUkVGLnRlc3QoaSkpdGhyb3cgRXJyb3IoXCJpbGxlZ2FsIGV4dGVuZCByZWZlcmVuY2U6IFwiK2kpO2ZvcihuPXtyZWY6aSxmaWVsZHM6W119LHRoaXMudG4uc2tpcChcIntcIik7XCJ9XCIhPT0oaT10aGlzLnRuLm5leHQoKSk7KWlmKHQuUlVMRS50ZXN0KGkpKXRoaXMuX3BhcnNlTWVzc2FnZUZpZWxkKG4saSk7ZWxzZXtpZighdC5UWVBFUkVGLnRlc3QoaSkpdGhyb3cgRXJyb3IoXCJpbGxlZ2FsIGV4dGVuZCB0b2tlbjogXCIraSk7aWYoIXRoaXMucHJvdG8zKXRocm93IEVycm9yKFwiaWxsZWdhbCBmaWVsZCBydWxlOiBcIitpKTt0aGlzLl9wYXJzZU1lc3NhZ2VGaWVsZChuLFwib3B0aW9uYWxcIixpKX1yZXR1cm4gdGhpcy50bi5vbWl0KFwiO1wiKSxlLm1lc3NhZ2VzLnB1c2gobiksbn0sby50b1N0cmluZz1mdW5jdGlvbigpe3JldHVyblwiUGFyc2VyIGF0IGxpbmUgXCIrdGhpcy50bi5saW5lfSxhLlBhcnNlcj1zLGF9KHIsci5MYW5nKSxyLlJlZmxlY3Q9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gaShlLG4pe2lmKGUmJlwibnVtYmVyXCI9PXR5cGVvZiBlLmxvdyYmXCJudW1iZXJcIj09dHlwZW9mIGUuaGlnaCYmXCJib29sZWFuXCI9PXR5cGVvZiBlLnVuc2lnbmVkJiZlLmxvdz09ZS5sb3cmJmUuaGlnaD09ZS5oaWdoKXJldHVybiBuZXcgdC5Mb25nKGUubG93LGUuaGlnaCx2b2lkIDA9PT1uP2UudW5zaWduZWQ6bik7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGUpcmV0dXJuIHQuTG9uZy5mcm9tU3RyaW5nKGUsbnx8ITEsMTApO2lmKFwibnVtYmVyXCI9PXR5cGVvZiBlKXJldHVybiB0LkxvbmcuZnJvbU51bWJlcihlLG58fCExKTt0aHJvdyBFcnJvcihcIm5vdCBjb252ZXJ0aWJsZSB0byBMb25nXCIpfWZ1bmN0aW9uIHIoZSxuKXt2YXIgaT1uLnJlYWRWYXJpbnQzMigpLHM9NyZpLG89aT4+PjM7c3dpdGNoKHMpe2Nhc2UgdC5XSVJFX1RZUEVTLlZBUklOVDpkb3tpPW4ucmVhZFVpbnQ4KCl9d2hpbGUoMTI4PT0oMTI4JmkpKTticmVhaztjYXNlIHQuV0lSRV9UWVBFUy5CSVRTNjQ6bi5vZmZzZXQrPTg7YnJlYWs7Y2FzZSB0LldJUkVfVFlQRVMuTERFTElNOmk9bi5yZWFkVmFyaW50MzIoKSxuLm9mZnNldCs9aTticmVhaztjYXNlIHQuV0lSRV9UWVBFUy5TVEFSVEdST1VQOnIobyxuKTticmVhaztjYXNlIHQuV0lSRV9UWVBFUy5FTkRHUk9VUDppZihvPT09ZSlyZXR1cm4hMTt0aHJvdyBFcnJvcihcIklsbGVnYWwgR1JPVVBFTkQgYWZ0ZXIgdW5rbm93biBncm91cDogXCIrbytcIiAoXCIrZStcIiBleHBlY3RlZClcIik7Y2FzZSB0LldJUkVfVFlQRVMuQklUUzMyOm4ub2Zmc2V0Kz00O2JyZWFrO2RlZmF1bHQ6dGhyb3cgRXJyb3IoXCJJbGxlZ2FsIHdpcmUgdHlwZSBpbiB1bmtub3duIGdyb3VwIFwiK2UrXCI6IFwiK3MpfXJldHVybiEwfXZhciBzLG8sYSx1LGMsaCxsLGQsZixwLGcsXyx5LHYsRSxtLEk9e30sVD1mdW5jdGlvbihlLHQsbil7dGhpcy5idWlsZGVyPWUsdGhpcy5wYXJlbnQ9dCx0aGlzLm5hbWU9bix0aGlzLmNsYXNzTmFtZX0sQz1ULnByb3RvdHlwZTtyZXR1cm4gQy5mcW49ZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcy5uYW1lLHQ9dGhpcztudWxsIT0odD10LnBhcmVudCk7KWU9dC5uYW1lK1wiLlwiK2U7cmV0dXJuIGV9LEMudG9TdHJpbmc9ZnVuY3Rpb24oZSl7cmV0dXJuKGU/dGhpcy5jbGFzc05hbWUrXCIgXCI6XCJcIikrdGhpcy5mcW4oKX0sQy5idWlsZD1mdW5jdGlvbigpe3Rocm93IEVycm9yKHRoaXMudG9TdHJpbmcoITApK1wiIGNhbm5vdCBiZSBidWlsdCBkaXJlY3RseVwiKX0sSS5UPVQsKG89KHM9ZnVuY3Rpb24oZSx0LG4saSxyKXtULmNhbGwodGhpcyxlLHQsbiksdGhpcy5jbGFzc05hbWU9XCJOYW1lc3BhY2VcIix0aGlzLmNoaWxkcmVuPVtdLHRoaXMub3B0aW9ucz1pfHx7fSx0aGlzLnN5bnRheD1yfHxcInByb3RvMlwifSkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVC5wcm90b3R5cGUpKS5nZXRDaGlsZHJlbj1mdW5jdGlvbihlKXt2YXIgdCxuLGk7aWYobnVsbD09KGU9ZXx8bnVsbCkpcmV0dXJuIHRoaXMuY2hpbGRyZW4uc2xpY2UoKTtmb3IodD1bXSxuPTAsaT10aGlzLmNoaWxkcmVuLmxlbmd0aDtpPm47KytuKXRoaXMuY2hpbGRyZW5bbl1pbnN0YW5jZW9mIGUmJnQucHVzaCh0aGlzLmNoaWxkcmVuW25dKTtyZXR1cm4gdH0sby5hZGRDaGlsZD1mdW5jdGlvbihlKXt2YXIgdDtpZih0PXRoaXMuZ2V0Q2hpbGQoZS5uYW1lKSlpZih0IGluc3RhbmNlb2YgYy5GaWVsZCYmdC5uYW1lIT09dC5vcmlnaW5hbE5hbWUmJm51bGw9PT10aGlzLmdldENoaWxkKHQub3JpZ2luYWxOYW1lKSl0Lm5hbWU9dC5vcmlnaW5hbE5hbWU7ZWxzZXtpZighKGUgaW5zdGFuY2VvZiBjLkZpZWxkJiZlLm5hbWUhPT1lLm9yaWdpbmFsTmFtZSYmbnVsbD09PXRoaXMuZ2V0Q2hpbGQoZS5vcmlnaW5hbE5hbWUpKSl0aHJvdyBFcnJvcihcIkR1cGxpY2F0ZSBuYW1lIGluIG5hbWVzcGFjZSBcIit0aGlzLnRvU3RyaW5nKCEwKStcIjogXCIrZS5uYW1lKTtlLm5hbWU9ZS5vcmlnaW5hbE5hbWV9dGhpcy5jaGlsZHJlbi5wdXNoKGUpfSxvLmdldENoaWxkPWZ1bmN0aW9uKGUpe3ZhciB0LG4saT1cIm51bWJlclwiPT10eXBlb2YgZT9cImlkXCI6XCJuYW1lXCI7Zm9yKHQ9MCxuPXRoaXMuY2hpbGRyZW4ubGVuZ3RoO24+dDsrK3QpaWYodGhpcy5jaGlsZHJlblt0XVtpXT09PWUpcmV0dXJuIHRoaXMuY2hpbGRyZW5bdF07cmV0dXJuIG51bGx9LG8ucmVzb2x2ZT1mdW5jdGlvbihlLHQpe3ZhciBuLGk9XCJzdHJpbmdcIj09dHlwZW9mIGU/ZS5zcGxpdChcIi5cIik6ZSxyPXRoaXMscz0wO2lmKFwiXCI9PT1pW3NdKXtmb3IoO251bGwhPT1yLnBhcmVudDspcj1yLnBhcmVudDtzKyt9ZG97ZG97aWYoIShyIGluc3RhbmNlb2YgSS5OYW1lc3BhY2UpKXtyPW51bGw7YnJlYWt9aWYoISgobj1yLmdldENoaWxkKGlbc10pKSYmbiBpbnN0YW5jZW9mIEkuVCYmKCF0fHxuIGluc3RhbmNlb2YgSS5OYW1lc3BhY2UpKSl7cj1udWxsO2JyZWFrfXI9bixzKyt9d2hpbGUoczxpLmxlbmd0aCk7aWYobnVsbCE9cilicmVhaztpZihudWxsIT09dGhpcy5wYXJlbnQpcmV0dXJuIHRoaXMucGFyZW50LnJlc29sdmUoZSx0KX13aGlsZShudWxsIT1yKTtyZXR1cm4gcn0sby5xbj1mdW5jdGlvbihlKXt2YXIgdCxuLGk9W10scj1lO2Rve2kudW5zaGlmdChyLm5hbWUpLHI9ci5wYXJlbnR9d2hpbGUobnVsbCE9PXIpO2Zvcih0PTE7dDw9aS5sZW5ndGg7dCsrKWlmKG49aS5zbGljZShpLmxlbmd0aC10KSxlPT09dGhpcy5yZXNvbHZlKG4sZSBpbnN0YW5jZW9mIEkuTmFtZXNwYWNlKSlyZXR1cm4gbi5qb2luKFwiLlwiKTtyZXR1cm4gZS5mcW4oKX0sby5idWlsZD1mdW5jdGlvbigpe3ZhciBlLHQsbixpPXt9LHI9dGhpcy5jaGlsZHJlbjtmb3IodD0wLG49ci5sZW5ndGg7bj50OysrdCkoZT1yW3RdKWluc3RhbmNlb2YgcyYmKGlbZS5uYW1lXT1lLmJ1aWxkKCkpO3JldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLFwiJG9wdGlvbnNcIix7dmFsdWU6dGhpcy5idWlsZE9wdCgpfSksaX0sby5idWlsZE9wdD1mdW5jdGlvbigpe3ZhciBlLHQsbixpLHI9e30scz1PYmplY3Qua2V5cyh0aGlzLm9wdGlvbnMpO2ZvcihlPTAsdD1zLmxlbmd0aDt0PmU7KytlKW49c1tlXSxpPXRoaXMub3B0aW9uc1tzW2VdXSxyW25dPWk7cmV0dXJuIHJ9LG8uZ2V0T3B0aW9uPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lP3RoaXMub3B0aW9uczp2b2lkIDAhPT10aGlzLm9wdGlvbnNbZV0/dGhpcy5vcHRpb25zW2VdOm51bGx9LEkuTmFtZXNwYWNlPXMsdT0oYT1mdW5jdGlvbihlLG4saSxyKXtpZih0aGlzLnR5cGU9ZSx0aGlzLnJlc29sdmVkVHlwZT1uLHRoaXMuaXNNYXBLZXk9aSx0aGlzLnN5bnRheD1yLGkmJnQuTUFQX0tFWV9UWVBFUy5pbmRleE9mKGUpPDApdGhyb3cgRXJyb3IoXCJJbnZhbGlkIG1hcCBrZXkgdHlwZTogXCIrZS5uYW1lKX0pLnByb3RvdHlwZSxhLmRlZmF1bHRGaWVsZFZhbHVlPWZ1bmN0aW9uKGUpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlJiYoZT10LlRZUEVTW2VdKSx2b2lkIDA9PT1lLmRlZmF1bHRWYWx1ZSl0aHJvdyBFcnJvcihcImRlZmF1bHQgdmFsdWUgZm9yIHR5cGUgXCIrZS5uYW1lK1wiIGlzIG5vdCBzdXBwb3J0ZWRcIik7cmV0dXJuIGU9PXQuVFlQRVMuYnl0ZXM/bmV3IG4oMCk6ZS5kZWZhdWx0VmFsdWV9LHUudmVyaWZ5VmFsdWU9ZnVuY3Rpb24obil7dmFyIHIscyxvLGE9ZnVuY3Rpb24oZSx0KXt0aHJvdyBFcnJvcihcIklsbGVnYWwgdmFsdWUgZm9yIFwiK3RoaXMudG9TdHJpbmcoITApK1wiIG9mIHR5cGUgXCIrdGhpcy50eXBlLm5hbWUrXCI6IFwiK2UrXCIgKFwiK3QrXCIpXCIpfS5iaW5kKHRoaXMpO3N3aXRjaCh0aGlzLnR5cGUpe2Nhc2UgdC5UWVBFUy5pbnQzMjpjYXNlIHQuVFlQRVMuc2ludDMyOmNhc2UgdC5UWVBFUy5zZml4ZWQzMjpyZXR1cm4oXCJudW1iZXJcIiE9dHlwZW9mIG58fG49PW4mJm4lMSE9MCkmJmEodHlwZW9mIG4sXCJub3QgYW4gaW50ZWdlclwiKSxuPjQyOTQ5NjcyOTU/MHxuOm47Y2FzZSB0LlRZUEVTLnVpbnQzMjpjYXNlIHQuVFlQRVMuZml4ZWQzMjpyZXR1cm4oXCJudW1iZXJcIiE9dHlwZW9mIG58fG49PW4mJm4lMSE9MCkmJmEodHlwZW9mIG4sXCJub3QgYW4gaW50ZWdlclwiKSxuPDA/bj4+PjA6bjtjYXNlIHQuVFlQRVMuaW50NjQ6Y2FzZSB0LlRZUEVTLnNpbnQ2NDpjYXNlIHQuVFlQRVMuc2ZpeGVkNjQ6aWYodC5Mb25nKXRyeXtyZXR1cm4gaShuLCExKX1jYXRjaChlKXthKHR5cGVvZiBuLGUubWVzc2FnZSl9ZWxzZSBhKHR5cGVvZiBuLFwicmVxdWlyZXMgTG9uZy5qc1wiKTtjYXNlIHQuVFlQRVMudWludDY0OmNhc2UgdC5UWVBFUy5maXhlZDY0OmlmKHQuTG9uZyl0cnl7cmV0dXJuIGkobiwhMCl9Y2F0Y2goZSl7YSh0eXBlb2YgbixlLm1lc3NhZ2UpfWVsc2UgYSh0eXBlb2YgbixcInJlcXVpcmVzIExvbmcuanNcIik7Y2FzZSB0LlRZUEVTLmJvb2w6cmV0dXJuXCJib29sZWFuXCIhPXR5cGVvZiBuJiZhKHR5cGVvZiBuLFwibm90IGEgYm9vbGVhblwiKSxuO2Nhc2UgdC5UWVBFUy5mbG9hdDpjYXNlIHQuVFlQRVMuZG91YmxlOnJldHVyblwibnVtYmVyXCIhPXR5cGVvZiBuJiZhKHR5cGVvZiBuLFwibm90IGEgbnVtYmVyXCIpLG47Y2FzZSB0LlRZUEVTLnN0cmluZzpyZXR1cm5cInN0cmluZ1wiPT10eXBlb2Ygbnx8biYmbiBpbnN0YW5jZW9mIFN0cmluZ3x8YSh0eXBlb2YgbixcIm5vdCBhIHN0cmluZ1wiKSxcIlwiK247Y2FzZSB0LlRZUEVTLmJ5dGVzOnJldHVybiBlLmlzQnl0ZUJ1ZmZlcihuKT9uOmUud3JhcChuKTtjYXNlIHQuVFlQRVMuZW51bTpmb3Iocj10aGlzLnJlc29sdmVkVHlwZS5nZXRDaGlsZHJlbih0LlJlZmxlY3QuRW51bS5WYWx1ZSksbz0wO288ci5sZW5ndGg7bysrKXtpZihyW29dLm5hbWU9PW4pcmV0dXJuIHJbb10uaWQ7aWYocltvXS5pZD09bilyZXR1cm4gcltvXS5pZH1pZihcInByb3RvM1wiPT09dGhpcy5zeW50YXgpcmV0dXJuKFwibnVtYmVyXCIhPXR5cGVvZiBufHxuPT1uJiZuJTEhPTApJiZhKHR5cGVvZiBuLFwibm90IGFuIGludGVnZXJcIiksKG4+NDI5NDk2NzI5NXx8bjwwKSYmYSh0eXBlb2YgbixcIm5vdCBpbiByYW5nZSBmb3IgdWludDMyXCIpLG47YShuLFwibm90IGEgdmFsaWQgZW51bSB2YWx1ZVwiKTtjYXNlIHQuVFlQRVMuZ3JvdXA6Y2FzZSB0LlRZUEVTLm1lc3NhZ2U6aWYobiYmXCJvYmplY3RcIj09dHlwZW9mIG58fGEodHlwZW9mIG4sXCJvYmplY3QgZXhwZWN0ZWRcIiksbiBpbnN0YW5jZW9mIHRoaXMucmVzb2x2ZWRUeXBlLmNsYXp6KXJldHVybiBuO2lmKG4gaW5zdGFuY2VvZiB0LkJ1aWxkZXIuTWVzc2FnZSl7Zm9yKG8gaW4gcz17fSxuKW4uaGFzT3duUHJvcGVydHkobykmJihzW29dPW5bb10pO249c31yZXR1cm4gbmV3IHRoaXMucmVzb2x2ZWRUeXBlLmNsYXp6KG4pfXRocm93IEVycm9yKFwiW0lOVEVSTkFMXSBJbGxlZ2FsIHZhbHVlIGZvciBcIit0aGlzLnRvU3RyaW5nKCEwKStcIjogXCIrbitcIiAodW5kZWZpbmVkIHR5cGUgXCIrdGhpcy50eXBlK1wiKVwiKX0sdS5jYWxjdWxhdGVMZW5ndGg9ZnVuY3Rpb24oZSxpKXtpZihudWxsPT09aSlyZXR1cm4gMDt2YXIgcjtzd2l0Y2godGhpcy50eXBlKXtjYXNlIHQuVFlQRVMuaW50MzI6cmV0dXJuIGk8MD9uLmNhbGN1bGF0ZVZhcmludDY0KGkpOm4uY2FsY3VsYXRlVmFyaW50MzIoaSk7Y2FzZSB0LlRZUEVTLnVpbnQzMjpyZXR1cm4gbi5jYWxjdWxhdGVWYXJpbnQzMihpKTtjYXNlIHQuVFlQRVMuc2ludDMyOnJldHVybiBuLmNhbGN1bGF0ZVZhcmludDMyKG4uemlnWmFnRW5jb2RlMzIoaSkpO2Nhc2UgdC5UWVBFUy5maXhlZDMyOmNhc2UgdC5UWVBFUy5zZml4ZWQzMjpjYXNlIHQuVFlQRVMuZmxvYXQ6cmV0dXJuIDQ7Y2FzZSB0LlRZUEVTLmludDY0OmNhc2UgdC5UWVBFUy51aW50NjQ6cmV0dXJuIG4uY2FsY3VsYXRlVmFyaW50NjQoaSk7Y2FzZSB0LlRZUEVTLnNpbnQ2NDpyZXR1cm4gbi5jYWxjdWxhdGVWYXJpbnQ2NChuLnppZ1phZ0VuY29kZTY0KGkpKTtjYXNlIHQuVFlQRVMuZml4ZWQ2NDpjYXNlIHQuVFlQRVMuc2ZpeGVkNjQ6cmV0dXJuIDg7Y2FzZSB0LlRZUEVTLmJvb2w6cmV0dXJuIDE7Y2FzZSB0LlRZUEVTLmVudW06cmV0dXJuIG4uY2FsY3VsYXRlVmFyaW50MzIoaSk7Y2FzZSB0LlRZUEVTLmRvdWJsZTpyZXR1cm4gODtjYXNlIHQuVFlQRVMuc3RyaW5nOnJldHVybiByPW4uY2FsY3VsYXRlVVRGOEJ5dGVzKGkpLG4uY2FsY3VsYXRlVmFyaW50MzIocikrcjtjYXNlIHQuVFlQRVMuYnl0ZXM6aWYoaS5yZW1haW5pbmcoKTwwKXRocm93IEVycm9yKFwiSWxsZWdhbCB2YWx1ZSBmb3IgXCIrdGhpcy50b1N0cmluZyghMCkrXCI6IFwiK2kucmVtYWluaW5nKCkrXCIgYnl0ZXMgcmVtYWluaW5nXCIpO3JldHVybiBuLmNhbGN1bGF0ZVZhcmludDMyKGkucmVtYWluaW5nKCkpK2kucmVtYWluaW5nKCk7Y2FzZSB0LlRZUEVTLm1lc3NhZ2U6cmV0dXJuIHI9dGhpcy5yZXNvbHZlZFR5cGUuY2FsY3VsYXRlKGkpLG4uY2FsY3VsYXRlVmFyaW50MzIocikrcjtjYXNlIHQuVFlQRVMuZ3JvdXA6cmV0dXJuKHI9dGhpcy5yZXNvbHZlZFR5cGUuY2FsY3VsYXRlKGkpKStuLmNhbGN1bGF0ZVZhcmludDMyKGU8PDN8dC5XSVJFX1RZUEVTLkVOREdST1VQKX10aHJvdyBFcnJvcihcIltJTlRFUk5BTF0gSWxsZWdhbCB2YWx1ZSB0byBlbmNvZGUgaW4gXCIrdGhpcy50b1N0cmluZyghMCkrXCI6IFwiK2krXCIgKHVua25vd24gdHlwZSlcIil9LHUuZW5jb2RlVmFsdWU9ZnVuY3Rpb24oZSxpLHIpe3ZhciBzLG87aWYobnVsbD09PWkpcmV0dXJuIHI7c3dpdGNoKHRoaXMudHlwZSl7Y2FzZSB0LlRZUEVTLmludDMyOmk8MD9yLndyaXRlVmFyaW50NjQoaSk6ci53cml0ZVZhcmludDMyKGkpO2JyZWFrO2Nhc2UgdC5UWVBFUy51aW50MzI6ci53cml0ZVZhcmludDMyKGkpO2JyZWFrO2Nhc2UgdC5UWVBFUy5zaW50MzI6ci53cml0ZVZhcmludDMyWmlnWmFnKGkpO2JyZWFrO2Nhc2UgdC5UWVBFUy5maXhlZDMyOnIud3JpdGVVaW50MzIoaSk7YnJlYWs7Y2FzZSB0LlRZUEVTLnNmaXhlZDMyOnIud3JpdGVJbnQzMihpKTticmVhaztjYXNlIHQuVFlQRVMuaW50NjQ6Y2FzZSB0LlRZUEVTLnVpbnQ2NDpyLndyaXRlVmFyaW50NjQoaSk7YnJlYWs7Y2FzZSB0LlRZUEVTLnNpbnQ2NDpyLndyaXRlVmFyaW50NjRaaWdaYWcoaSk7YnJlYWs7Y2FzZSB0LlRZUEVTLmZpeGVkNjQ6ci53cml0ZVVpbnQ2NChpKTticmVhaztjYXNlIHQuVFlQRVMuc2ZpeGVkNjQ6ci53cml0ZUludDY0KGkpO2JyZWFrO2Nhc2UgdC5UWVBFUy5ib29sOlwic3RyaW5nXCI9PXR5cGVvZiBpP3Iud3JpdGVWYXJpbnQzMihcImZhbHNlXCI9PT1pLnRvTG93ZXJDYXNlKCk/MDohIWkpOnIud3JpdGVWYXJpbnQzMihpPzE6MCk7YnJlYWs7Y2FzZSB0LlRZUEVTLmVudW06ci53cml0ZVZhcmludDMyKGkpO2JyZWFrO2Nhc2UgdC5UWVBFUy5mbG9hdDpyLndyaXRlRmxvYXQzMihpKTticmVhaztjYXNlIHQuVFlQRVMuZG91YmxlOnIud3JpdGVGbG9hdDY0KGkpO2JyZWFrO2Nhc2UgdC5UWVBFUy5zdHJpbmc6ci53cml0ZVZTdHJpbmcoaSk7YnJlYWs7Y2FzZSB0LlRZUEVTLmJ5dGVzOmlmKGkucmVtYWluaW5nKCk8MCl0aHJvdyBFcnJvcihcIklsbGVnYWwgdmFsdWUgZm9yIFwiK3RoaXMudG9TdHJpbmcoITApK1wiOiBcIitpLnJlbWFpbmluZygpK1wiIGJ5dGVzIHJlbWFpbmluZ1wiKTtzPWkub2Zmc2V0LHIud3JpdGVWYXJpbnQzMihpLnJlbWFpbmluZygpKSxyLmFwcGVuZChpKSxpLm9mZnNldD1zO2JyZWFrO2Nhc2UgdC5UWVBFUy5tZXNzYWdlOm89KG5ldyBuKS5MRSgpLHRoaXMucmVzb2x2ZWRUeXBlLmVuY29kZShpLG8pLHIud3JpdGVWYXJpbnQzMihvLm9mZnNldCksci5hcHBlbmQoby5mbGlwKCkpO2JyZWFrO2Nhc2UgdC5UWVBFUy5ncm91cDp0aGlzLnJlc29sdmVkVHlwZS5lbmNvZGUoaSxyKSxyLndyaXRlVmFyaW50MzIoZTw8M3x0LldJUkVfVFlQRVMuRU5ER1JPVVApO2JyZWFrO2RlZmF1bHQ6dGhyb3cgRXJyb3IoXCJbSU5URVJOQUxdIElsbGVnYWwgdmFsdWUgdG8gZW5jb2RlIGluIFwiK3RoaXMudG9TdHJpbmcoITApK1wiOiBcIitpK1wiICh1bmtub3duIHR5cGUpXCIpfXJldHVybiByfSx1LmRlY29kZT1mdW5jdGlvbihlLG4saSl7aWYobiE9dGhpcy50eXBlLndpcmVUeXBlKXRocm93IEVycm9yKFwiVW5leHBlY3RlZCB3aXJlIHR5cGUgZm9yIGVsZW1lbnRcIik7dmFyIHIscztzd2l0Y2godGhpcy50eXBlKXtjYXNlIHQuVFlQRVMuaW50MzI6cmV0dXJuIDB8ZS5yZWFkVmFyaW50MzIoKTtjYXNlIHQuVFlQRVMudWludDMyOnJldHVybiBlLnJlYWRWYXJpbnQzMigpPj4+MDtjYXNlIHQuVFlQRVMuc2ludDMyOnJldHVybiAwfGUucmVhZFZhcmludDMyWmlnWmFnKCk7Y2FzZSB0LlRZUEVTLmZpeGVkMzI6cmV0dXJuIGUucmVhZFVpbnQzMigpPj4+MDtjYXNlIHQuVFlQRVMuc2ZpeGVkMzI6cmV0dXJuIDB8ZS5yZWFkSW50MzIoKTtjYXNlIHQuVFlQRVMuaW50NjQ6cmV0dXJuIGUucmVhZFZhcmludDY0KCk7Y2FzZSB0LlRZUEVTLnVpbnQ2NDpyZXR1cm4gZS5yZWFkVmFyaW50NjQoKS50b1Vuc2lnbmVkKCk7Y2FzZSB0LlRZUEVTLnNpbnQ2NDpyZXR1cm4gZS5yZWFkVmFyaW50NjRaaWdaYWcoKTtjYXNlIHQuVFlQRVMuZml4ZWQ2NDpyZXR1cm4gZS5yZWFkVWludDY0KCk7Y2FzZSB0LlRZUEVTLnNmaXhlZDY0OnJldHVybiBlLnJlYWRJbnQ2NCgpO2Nhc2UgdC5UWVBFUy5ib29sOnJldHVybiEhZS5yZWFkVmFyaW50MzIoKTtjYXNlIHQuVFlQRVMuZW51bTpyZXR1cm4gZS5yZWFkVmFyaW50MzIoKTtjYXNlIHQuVFlQRVMuZmxvYXQ6cmV0dXJuIGUucmVhZEZsb2F0KCk7Y2FzZSB0LlRZUEVTLmRvdWJsZTpyZXR1cm4gZS5yZWFkRG91YmxlKCk7Y2FzZSB0LlRZUEVTLnN0cmluZzpyZXR1cm4gZS5yZWFkVlN0cmluZygpO2Nhc2UgdC5UWVBFUy5ieXRlczppZihzPWUucmVhZFZhcmludDMyKCksZS5yZW1haW5pbmcoKTxzKXRocm93IEVycm9yKFwiSWxsZWdhbCBudW1iZXIgb2YgYnl0ZXMgZm9yIFwiK3RoaXMudG9TdHJpbmcoITApK1wiOiBcIitzK1wiIHJlcXVpcmVkIGJ1dCBnb3Qgb25seSBcIitlLnJlbWFpbmluZygpKTtyZXR1cm4ocj1lLmNsb25lKCkpLmxpbWl0PXIub2Zmc2V0K3MsZS5vZmZzZXQrPXMscjtjYXNlIHQuVFlQRVMubWVzc2FnZTpyZXR1cm4gcz1lLnJlYWRWYXJpbnQzMigpLHRoaXMucmVzb2x2ZWRUeXBlLmRlY29kZShlLHMpO2Nhc2UgdC5UWVBFUy5ncm91cDpyZXR1cm4gdGhpcy5yZXNvbHZlZFR5cGUuZGVjb2RlKGUsLTEsaSl9dGhyb3cgRXJyb3IoXCJbSU5URVJOQUxdIElsbGVnYWwgZGVjb2RlIHR5cGVcIil9LHUudmFsdWVGcm9tU3RyaW5nPWZ1bmN0aW9uKGUpe2lmKCF0aGlzLmlzTWFwS2V5KXRocm93IEVycm9yKFwidmFsdWVGcm9tU3RyaW5nKCkgY2FsbGVkIG9uIG5vbi1tYXAta2V5IGVsZW1lbnRcIik7c3dpdGNoKHRoaXMudHlwZSl7Y2FzZSB0LlRZUEVTLmludDMyOmNhc2UgdC5UWVBFUy5zaW50MzI6Y2FzZSB0LlRZUEVTLnNmaXhlZDMyOmNhc2UgdC5UWVBFUy51aW50MzI6Y2FzZSB0LlRZUEVTLmZpeGVkMzI6cmV0dXJuIHRoaXMudmVyaWZ5VmFsdWUocGFyc2VJbnQoZSkpO2Nhc2UgdC5UWVBFUy5pbnQ2NDpjYXNlIHQuVFlQRVMuc2ludDY0OmNhc2UgdC5UWVBFUy5zZml4ZWQ2NDpjYXNlIHQuVFlQRVMudWludDY0OmNhc2UgdC5UWVBFUy5maXhlZDY0OnJldHVybiB0aGlzLnZlcmlmeVZhbHVlKGUpO2Nhc2UgdC5UWVBFUy5ib29sOnJldHVyblwidHJ1ZVwiPT09ZTtjYXNlIHQuVFlQRVMuc3RyaW5nOnJldHVybiB0aGlzLnZlcmlmeVZhbHVlKGUpO2Nhc2UgdC5UWVBFUy5ieXRlczpyZXR1cm4gbi5mcm9tQmluYXJ5KGUpfX0sdS52YWx1ZVRvU3RyaW5nPWZ1bmN0aW9uKGUpe2lmKCF0aGlzLmlzTWFwS2V5KXRocm93IEVycm9yKFwidmFsdWVUb1N0cmluZygpIGNhbGxlZCBvbiBub24tbWFwLWtleSBlbGVtZW50XCIpO3JldHVybiB0aGlzLnR5cGU9PT10LlRZUEVTLmJ5dGVzP2UudG9TdHJpbmcoXCJiaW5hcnlcIik6ZS50b1N0cmluZygpfSxJLkVsZW1lbnQ9YSwoaD0oYz1mdW5jdGlvbihlLHQsbixpLHIsbyl7cy5jYWxsKHRoaXMsZSx0LG4saSxvKSx0aGlzLmNsYXNzTmFtZT1cIk1lc3NhZ2VcIix0aGlzLmV4dGVuc2lvbnM9dm9pZCAwLHRoaXMuY2xheno9bnVsbCx0aGlzLmlzR3JvdXA9ISFyLHRoaXMuX2ZpZWxkcz1udWxsLHRoaXMuX2ZpZWxkc0J5SWQ9bnVsbCx0aGlzLl9maWVsZHNCeU5hbWU9bnVsbH0pLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHMucHJvdG90eXBlKSkuYnVpbGQ9ZnVuY3Rpb24oaSl7dmFyIHIscyxvLGE7aWYodGhpcy5jbGF6eiYmIWkpcmV0dXJuIHRoaXMuY2xheno7Zm9yKHI9ZnVuY3Rpb24odCxpKXtmdW5jdGlvbiByKGUsaSxzLG8pe3ZhciBhLHUsYyxoLGwsZCxmO2lmKG51bGw9PT1lfHxcIm9iamVjdFwiIT10eXBlb2YgZSlyZXR1cm4gbyYmbyBpbnN0YW5jZW9mIHQuUmVmbGVjdC5FbnVtJiZudWxsIT09KGE9dC5SZWZsZWN0LkVudW0uZ2V0TmFtZShvLm9iamVjdCxlKSk/YTplO2lmKG4uaXNCeXRlQnVmZmVyKGUpKXJldHVybiBpP2UudG9CYXNlNjQoKTplLnRvQnVmZmVyKCk7aWYodC5Mb25nLmlzTG9uZyhlKSlyZXR1cm4gcz9lLnRvU3RyaW5nKCk6dC5Mb25nLmZyb21WYWx1ZShlKTtpZihBcnJheS5pc0FycmF5KGUpKXJldHVybiB1PVtdLGUuZm9yRWFjaCgoZnVuY3Rpb24oZSx0KXt1W3RdPXIoZSxpLHMsbyl9KSksdTtpZih1PXt9LGUgaW5zdGFuY2VvZiB0Lk1hcCl7Zm9yKGg9KGM9ZS5lbnRyaWVzKCkpLm5leHQoKTshaC5kb25lO2g9Yy5uZXh0KCkpdVtlLmtleUVsZW0udmFsdWVUb1N0cmluZyhoLnZhbHVlWzBdKV09cihoLnZhbHVlWzFdLGkscyxlLnZhbHVlRWxlbS5yZXNvbHZlZFR5cGUpO3JldHVybiB1fWZvcihmIGluIGw9ZS4kdHlwZSxkPXZvaWQgMCxlKWUuaGFzT3duUHJvcGVydHkoZikmJih1W2ZdPWwmJihkPWwuZ2V0Q2hpbGQoZikpP3IoZVtmXSxpLHMsZC5yZXNvbHZlZFR5cGUpOnIoZVtmXSxpLHMpKTtyZXR1cm4gdX12YXIgcyxvLGE9aS5nZXRDaGlsZHJlbih0LlJlZmxlY3QuTWVzc2FnZS5GaWVsZCksdT1pLmdldENoaWxkcmVuKHQuUmVmbGVjdC5NZXNzYWdlLk9uZU9mKSxjPWZ1bmN0aW9uKGUpe3ZhciByLHMsbyxoO2Zvcih0LkJ1aWxkZXIuTWVzc2FnZS5jYWxsKHRoaXMpLHI9MCxzPXUubGVuZ3RoO3M+cjsrK3IpdGhpc1t1W3JdLm5hbWVdPW51bGw7Zm9yKHI9MCxzPWEubGVuZ3RoO3M+cjsrK3IpdGhpc1sobz1hW3JdKS5uYW1lXT1vLnJlcGVhdGVkP1tdOm8ubWFwP25ldyB0Lk1hcChvKTpudWxsLCFvLnJlcXVpcmVkJiZcInByb3RvM1wiIT09aS5zeW50YXh8fG51bGw9PT1vLmRlZmF1bHRWYWx1ZXx8KHRoaXNbby5uYW1lXT1vLmRlZmF1bHRWYWx1ZSk7aWYoYXJndW1lbnRzLmxlbmd0aD4wKWlmKDEhPT1hcmd1bWVudHMubGVuZ3RofHxudWxsPT09ZXx8XCJvYmplY3RcIiE9dHlwZW9mIGV8fCEoXCJmdW5jdGlvblwiIT10eXBlb2YgZS5lbmNvZGV8fGUgaW5zdGFuY2VvZiBjKXx8QXJyYXkuaXNBcnJheShlKXx8ZSBpbnN0YW5jZW9mIHQuTWFwfHxuLmlzQnl0ZUJ1ZmZlcihlKXx8ZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyfHx0LkxvbmcmJmUgaW5zdGFuY2VvZiB0LkxvbmcpZm9yKHI9MCxzPWFyZ3VtZW50cy5sZW5ndGg7cz5yOysrcil2b2lkIDAhPT0oaD1hcmd1bWVudHNbcl0pJiZ0aGlzLiRzZXQoYVtyXS5uYW1lLGgpO2Vsc2UgdGhpcy4kc2V0KGUpfSxoPWMucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodC5CdWlsZGVyLk1lc3NhZ2UucHJvdG90eXBlKTtmb3IoaC5hZGQ9ZnVuY3Rpb24oZSxuLHIpe3ZhciBzPWkuX2ZpZWxkc0J5TmFtZVtlXTtpZighcil7aWYoIXMpdGhyb3cgRXJyb3IodGhpcytcIiNcIitlK1wiIGlzIHVuZGVmaW5lZFwiKTtpZighKHMgaW5zdGFuY2VvZiB0LlJlZmxlY3QuTWVzc2FnZS5GaWVsZCkpdGhyb3cgRXJyb3IodGhpcytcIiNcIitlK1wiIGlzIG5vdCBhIGZpZWxkOiBcIitzLnRvU3RyaW5nKCEwKSk7aWYoIXMucmVwZWF0ZWQpdGhyb3cgRXJyb3IodGhpcytcIiNcIitlK1wiIGlzIG5vdCBhIHJlcGVhdGVkIGZpZWxkXCIpO249cy52ZXJpZnlWYWx1ZShuLCEwKX1yZXR1cm4gbnVsbD09PXRoaXNbZV0mJih0aGlzW2VdPVtdKSx0aGlzW2VdLnB1c2gobiksdGhpc30saC4kYWRkPWguYWRkLGguc2V0PWZ1bmN0aW9uKGUsbixyKXt2YXIgcyxvLGE7aWYoZSYmXCJvYmplY3RcIj09dHlwZW9mIGUpe2ZvcihzIGluIHI9bixlKWUuaGFzT3duUHJvcGVydHkocykmJnZvaWQgMCE9PShuPWVbc10pJiZ0aGlzLiRzZXQocyxuLHIpO3JldHVybiB0aGlzfWlmKG89aS5fZmllbGRzQnlOYW1lW2VdLHIpdGhpc1tlXT1uO2Vsc2V7aWYoIW8pdGhyb3cgRXJyb3IodGhpcytcIiNcIitlK1wiIGlzIG5vdCBhIGZpZWxkOiB1bmRlZmluZWRcIik7aWYoIShvIGluc3RhbmNlb2YgdC5SZWZsZWN0Lk1lc3NhZ2UuRmllbGQpKXRocm93IEVycm9yKHRoaXMrXCIjXCIrZStcIiBpcyBub3QgYSBmaWVsZDogXCIrby50b1N0cmluZyghMCkpO3RoaXNbby5uYW1lXT1uPW8udmVyaWZ5VmFsdWUobil9cmV0dXJuIG8mJm8ub25lb2YmJihhPXRoaXNbby5vbmVvZi5uYW1lXSxudWxsIT09bj8obnVsbCE9PWEmJmEhPT1vLm5hbWUmJih0aGlzW2FdPW51bGwpLHRoaXNbby5vbmVvZi5uYW1lXT1vLm5hbWUpOmE9PT1lJiYodGhpc1tvLm9uZW9mLm5hbWVdPW51bGwpKSx0aGlzfSxoLiRzZXQ9aC5zZXQsaC5nZXQ9ZnVuY3Rpb24oZSxuKXtpZihuKXJldHVybiB0aGlzW2VdO3ZhciByPWkuX2ZpZWxkc0J5TmFtZVtlXTtpZighKHImJnIgaW5zdGFuY2VvZiB0LlJlZmxlY3QuTWVzc2FnZS5GaWVsZCkpdGhyb3cgRXJyb3IodGhpcytcIiNcIitlK1wiIGlzIG5vdCBhIGZpZWxkOiB1bmRlZmluZWRcIik7aWYoIShyIGluc3RhbmNlb2YgdC5SZWZsZWN0Lk1lc3NhZ2UuRmllbGQpKXRocm93IEVycm9yKHRoaXMrXCIjXCIrZStcIiBpcyBub3QgYSBmaWVsZDogXCIrci50b1N0cmluZyghMCkpO3JldHVybiB0aGlzW3IubmFtZV19LGguJGdldD1oLmdldCxzPTA7czxhLmxlbmd0aDtzKyspKG89YVtzXSlpbnN0YW5jZW9mIHQuUmVmbGVjdC5NZXNzYWdlLkV4dGVuc2lvbkZpZWxkfHxpLmJ1aWxkZXIub3B0aW9ucy5wb3B1bGF0ZUFjY2Vzc29ycyYmZnVuY3Rpb24oZSl7dmFyIHQsbixyLHM9ZS5vcmlnaW5hbE5hbWUucmVwbGFjZSgvKF9bYS16QS1aXSkvZywoZnVuY3Rpb24oZSl7cmV0dXJuIGUudG9VcHBlckNhc2UoKS5yZXBsYWNlKFwiX1wiLFwiXCIpfSkpO3M9cy5zdWJzdHJpbmcoMCwxKS50b1VwcGVyQ2FzZSgpK3Muc3Vic3RyaW5nKDEpLHQ9ZS5vcmlnaW5hbE5hbWUucmVwbGFjZSgvKFtBLVpdKS9nLChmdW5jdGlvbihlKXtyZXR1cm5cIl9cIitlfSkpLG49ZnVuY3Rpb24odCxuKXtyZXR1cm4gdGhpc1tlLm5hbWVdPW4/dDplLnZlcmlmeVZhbHVlKHQpLHRoaXN9LHI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1tlLm5hbWVdfSxudWxsPT09aS5nZXRDaGlsZChcInNldFwiK3MpJiYoaFtcInNldFwiK3NdPW4pLG51bGw9PT1pLmdldENoaWxkKFwic2V0X1wiK3QpJiYoaFtcInNldF9cIit0XT1uKSxudWxsPT09aS5nZXRDaGlsZChcImdldFwiK3MpJiYoaFtcImdldFwiK3NdPXIpLG51bGw9PT1pLmdldENoaWxkKFwiZ2V0X1wiK3QpJiYoaFtcImdldF9cIit0XT1yKX0obyk7cmV0dXJuIGguZW5jb2RlPWZ1bmN0aW9uKHQsbil7dmFyIHIscztcImJvb2xlYW5cIj09dHlwZW9mIHQmJihuPXQsdD12b2lkIDApLHI9ITEsdHx8KHQ9bmV3IGUscj0hMCkscz10LmxpdHRsZUVuZGlhbjt0cnl7cmV0dXJuIGkuZW5jb2RlKHRoaXMsdC5MRSgpLG4pLChyP3QuZmxpcCgpOnQpLkxFKHMpfWNhdGNoKGUpe3Rocm93IHQuTEUocyksZX19LGMuZW5jb2RlPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gbmV3IGMoZSkuZW5jb2RlKHQsbil9LGguY2FsY3VsYXRlPWZ1bmN0aW9uKCl7cmV0dXJuIGkuY2FsY3VsYXRlKHRoaXMpfSxoLmVuY29kZURlbGltaXRlZD1mdW5jdGlvbihlKXt2YXIgdCxyPSExO3JldHVybiBlfHwoZT1uZXcgbixyPSEwKSx0PShuZXcgbikuTEUoKSxpLmVuY29kZSh0aGlzLHQpLmZsaXAoKSxlLndyaXRlVmFyaW50MzIodC5yZW1haW5pbmcoKSksZS5hcHBlbmQodCkscj9lLmZsaXAoKTplfSxoLmVuY29kZUFCPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiB0aGlzLmVuY29kZSgpLnRvQXJyYXlCdWZmZXIoKX1jYXRjaChlKXt0aHJvdyBlLmVuY29kZWQmJihlLmVuY29kZWQ9ZS5lbmNvZGVkLnRvQXJyYXlCdWZmZXIoKSksZX19LGgudG9BcnJheUJ1ZmZlcj1oLmVuY29kZUFCLGguZW5jb2RlTkI9ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIHRoaXMuZW5jb2RlKCkudG9CdWZmZXIoKX1jYXRjaChlKXt0aHJvdyBlLmVuY29kZWQmJihlLmVuY29kZWQ9ZS5lbmNvZGVkLnRvQnVmZmVyKCkpLGV9fSxoLnRvQnVmZmVyPWguZW5jb2RlTkIsaC5lbmNvZGU2ND1mdW5jdGlvbigpe3RyeXtyZXR1cm4gdGhpcy5lbmNvZGUoKS50b0Jhc2U2NCgpfWNhdGNoKGUpe3Rocm93IGUuZW5jb2RlZCYmKGUuZW5jb2RlZD1lLmVuY29kZWQudG9CYXNlNjQoKSksZX19LGgudG9CYXNlNjQ9aC5lbmNvZGU2NCxoLmVuY29kZUhleD1mdW5jdGlvbigpe3RyeXtyZXR1cm4gdGhpcy5lbmNvZGUoKS50b0hleCgpfWNhdGNoKGUpe3Rocm93IGUuZW5jb2RlZCYmKGUuZW5jb2RlZD1lLmVuY29kZWQudG9IZXgoKSksZX19LGgudG9IZXg9aC5lbmNvZGVIZXgsaC50b1Jhdz1mdW5jdGlvbihlLHQpe3JldHVybiByKHRoaXMsISFlLCEhdCx0aGlzLiR0eXBlKX0saC5lbmNvZGVKU09OPWZ1bmN0aW9uKCl7cmV0dXJuIEpTT04uc3RyaW5naWZ5KHIodGhpcywhMCwhMCx0aGlzLiR0eXBlKSl9LGMuZGVjb2RlPWZ1bmN0aW9uKGUsdCl7dmFyIHIscztcInN0cmluZ1wiPT10eXBlb2YgZSYmKGU9bi53cmFwKGUsdHx8XCJiYXNlNjRcIikpLHI9KGU9bi5pc0J5dGVCdWZmZXIoZSk/ZTpuLndyYXAoZSkpLmxpdHRsZUVuZGlhbjt0cnl7cmV0dXJuIHM9aS5kZWNvZGUoZS5MRSgpKSxlLkxFKHIpLHN9Y2F0Y2godCl7dGhyb3cgZS5MRShyKSx0fX0sYy5kZWNvZGVEZWxpbWl0ZWQ9ZnVuY3Rpb24oZSx0KXt2YXIgcixzLG87aWYoXCJzdHJpbmdcIj09dHlwZW9mIGUmJihlPW4ud3JhcChlLHR8fFwiYmFzZTY0XCIpKSwoZT1uLmlzQnl0ZUJ1ZmZlcihlKT9lOm4ud3JhcChlKSkucmVtYWluaW5nKCk8MSlyZXR1cm4gbnVsbDtpZihyPWUub2Zmc2V0LHM9ZS5yZWFkVmFyaW50MzIoKSxlLnJlbWFpbmluZygpPHMpcmV0dXJuIGUub2Zmc2V0PXIsbnVsbDt0cnl7cmV0dXJuIG89aS5kZWNvZGUoZS5zbGljZShlLm9mZnNldCxlLm9mZnNldCtzKS5MRSgpKSxlLm9mZnNldCs9cyxvfWNhdGNoKHQpe3Rocm93IGUub2Zmc2V0Kz1zLHR9fSxjLmRlY29kZTY0PWZ1bmN0aW9uKGUpe3JldHVybiBjLmRlY29kZShlLFwiYmFzZTY0XCIpfSxjLmRlY29kZUhleD1mdW5jdGlvbihlKXtyZXR1cm4gYy5kZWNvZGUoZSxcImhleFwiKX0sYy5kZWNvZGVKU09OPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgYyhKU09OLnBhcnNlKGUpKX0saC50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiBpLnRvU3RyaW5nKCl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSYmKE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjLFwiJG9wdGlvbnNcIix7dmFsdWU6aS5idWlsZE9wdCgpfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGgsXCIkb3B0aW9uc1wiLHt2YWx1ZTpjLiRvcHRpb25zfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGMsXCIkdHlwZVwiLHt2YWx1ZTppfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGgsXCIkdHlwZVwiLHt2YWx1ZTppfSkpLGN9KHQsdGhpcyksdGhpcy5fZmllbGRzPVtdLHRoaXMuX2ZpZWxkc0J5SWQ9e30sdGhpcy5fZmllbGRzQnlOYW1lPXt9LG89MCxhPXRoaXMuY2hpbGRyZW4ubGVuZ3RoO2E+bztvKyspaWYoKHM9dGhpcy5jaGlsZHJlbltvXSlpbnN0YW5jZW9mIGd8fHMgaW5zdGFuY2VvZiBjfHxzIGluc3RhbmNlb2Ygdil7aWYoci5oYXNPd25Qcm9wZXJ0eShzLm5hbWUpKXRocm93IEVycm9yKFwiSWxsZWdhbCByZWZsZWN0IGNoaWxkIG9mIFwiK3RoaXMudG9TdHJpbmcoITApK1wiOiBcIitzLnRvU3RyaW5nKCEwKStcIiBjYW5ub3Qgb3ZlcnJpZGUgc3RhdGljIHByb3BlcnR5ICdcIitzLm5hbWUrXCInXCIpO3Jbcy5uYW1lXT1zLmJ1aWxkKCl9ZWxzZSBpZihzIGluc3RhbmNlb2YgYy5GaWVsZClzLmJ1aWxkKCksdGhpcy5fZmllbGRzLnB1c2gocyksdGhpcy5fZmllbGRzQnlJZFtzLmlkXT1zLHRoaXMuX2ZpZWxkc0J5TmFtZVtzLm5hbWVdPXM7ZWxzZSBpZighKHMgaW5zdGFuY2VvZiBjLk9uZU9mfHxzIGluc3RhbmNlb2YgeSkpdGhyb3cgRXJyb3IoXCJJbGxlZ2FsIHJlZmxlY3QgY2hpbGQgb2YgXCIrdGhpcy50b1N0cmluZyghMCkrXCI6IFwiK3RoaXMuY2hpbGRyZW5bb10udG9TdHJpbmcoITApKTtyZXR1cm4gdGhpcy5jbGF6ej1yfSxoLmVuY29kZT1mdW5jdGlvbihlLHQsbil7dmFyIGkscixzLG8sYSx1PW51bGw7Zm9yKHM9MCxvPXRoaXMuX2ZpZWxkcy5sZW5ndGg7bz5zOysrcylyPWVbKGk9dGhpcy5fZmllbGRzW3NdKS5uYW1lXSxpLnJlcXVpcmVkJiZudWxsPT09cj9udWxsPT09dSYmKHU9aSk6aS5lbmNvZGUobj9yOmkudmVyaWZ5VmFsdWUociksdCxlKTtpZihudWxsIT09dSl0aHJvdyhhPUVycm9yKFwiTWlzc2luZyBhdCBsZWFzdCBvbmUgcmVxdWlyZWQgZmllbGQgZm9yIFwiK3RoaXMudG9TdHJpbmcoITApK1wiOiBcIit1KSkuZW5jb2RlZD10LGE7cmV0dXJuIHR9LGguY2FsY3VsYXRlPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuLGk9MCxyPTAscz10aGlzLl9maWVsZHMubGVuZ3RoO3M+cjsrK3Ipe2lmKG49ZVsodD10aGlzLl9maWVsZHNbcl0pLm5hbWVdLHQucmVxdWlyZWQmJm51bGw9PT1uKXRocm93IEVycm9yKFwiTWlzc2luZyBhdCBsZWFzdCBvbmUgcmVxdWlyZWQgZmllbGQgZm9yIFwiK3RoaXMudG9TdHJpbmcoITApK1wiOiBcIit0KTtpKz10LmNhbGN1bGF0ZShuLGUpfXJldHVybiBpfSxoLmRlY29kZT1mdW5jdGlvbihlLG4saSl7dmFyIHMsbyxhLHUsYyxoLGwsZCxmLHAsZyxfO2ZvcihuPVwibnVtYmVyXCI9PXR5cGVvZiBuP246LTEsYz1lLm9mZnNldCxoPW5ldyB0aGlzLmNsYXp6O2Uub2Zmc2V0PGMrbnx8LTE9PT1uJiZlLnJlbWFpbmluZygpPjA7KXtpZihhPShzPWUucmVhZFZhcmludDMyKCkpPj4+Mywobz03JnMpPT09dC5XSVJFX1RZUEVTLkVOREdST1VQKXtpZihhIT09aSl0aHJvdyBFcnJvcihcIklsbGVnYWwgZ3JvdXAgZW5kIGluZGljYXRvciBmb3IgXCIrdGhpcy50b1N0cmluZyghMCkrXCI6IFwiK2ErXCIgKFwiKyhpP2krXCIgZXhwZWN0ZWRcIjpcIm5vdCBhIGdyb3VwXCIpK1wiKVwiKTticmVha31pZih1PXRoaXMuX2ZpZWxkc0J5SWRbYV0pdS5yZXBlYXRlZCYmIXUub3B0aW9ucy5wYWNrZWQ/aFt1Lm5hbWVdLnB1c2godS5kZWNvZGUobyxlKSk6dS5tYXA/KGQ9dS5kZWNvZGUobyxlKSxoW3UubmFtZV0uc2V0KGRbMF0sZFsxXSkpOihoW3UubmFtZV09dS5kZWNvZGUobyxlKSx1Lm9uZW9mJiYobnVsbCE9PShmPWhbdS5vbmVvZi5uYW1lXSkmJmYhPT11Lm5hbWUmJihoW2ZdPW51bGwpLGhbdS5vbmVvZi5uYW1lXT11Lm5hbWUpKTtlbHNlIHN3aXRjaChvKXtjYXNlIHQuV0lSRV9UWVBFUy5WQVJJTlQ6ZS5yZWFkVmFyaW50MzIoKTticmVhaztjYXNlIHQuV0lSRV9UWVBFUy5CSVRTMzI6ZS5vZmZzZXQrPTQ7YnJlYWs7Y2FzZSB0LldJUkVfVFlQRVMuQklUUzY0OmUub2Zmc2V0Kz04O2JyZWFrO2Nhc2UgdC5XSVJFX1RZUEVTLkxERUxJTTpsPWUucmVhZFZhcmludDMyKCksZS5vZmZzZXQrPWw7YnJlYWs7Y2FzZSB0LldJUkVfVFlQRVMuU1RBUlRHUk9VUDpmb3IoO3IoYSxlKTspO2JyZWFrO2RlZmF1bHQ6dGhyb3cgRXJyb3IoXCJJbGxlZ2FsIHdpcmUgdHlwZSBmb3IgdW5rbm93biBmaWVsZCBcIithK1wiIGluIFwiK3RoaXMudG9TdHJpbmcoITApK1wiI2RlY29kZTogXCIrbyl9fWZvcihwPTAsZz10aGlzLl9maWVsZHMubGVuZ3RoO2c+cDsrK3ApaWYobnVsbD09PWhbKHU9dGhpcy5fZmllbGRzW3BdKS5uYW1lXSlpZihcInByb3RvM1wiPT09dGhpcy5zeW50YXgpaFt1Lm5hbWVdPXUuZGVmYXVsdFZhbHVlO2Vsc2V7aWYodS5yZXF1aXJlZCl0aHJvdyhfPUVycm9yKFwiTWlzc2luZyBhdCBsZWFzdCBvbmUgcmVxdWlyZWQgZmllbGQgZm9yIFwiK3RoaXMudG9TdHJpbmcoITApK1wiOiBcIit1Lm5hbWUpKS5kZWNvZGVkPWgsXzt0LnBvcHVsYXRlRGVmYXVsdHMmJm51bGwhPT11LmRlZmF1bHRWYWx1ZSYmKGhbdS5uYW1lXT11LmRlZmF1bHRWYWx1ZSl9cmV0dXJuIGh9LEkuTWVzc2FnZT1jLChkPShsPWZ1bmN0aW9uKGUsbixpLHIscyxvLGEsdSxoLGwpe1QuY2FsbCh0aGlzLGUsbixvKSx0aGlzLmNsYXNzTmFtZT1cIk1lc3NhZ2UuRmllbGRcIix0aGlzLnJlcXVpcmVkPVwicmVxdWlyZWRcIj09PWksdGhpcy5yZXBlYXRlZD1cInJlcGVhdGVkXCI9PT1pLHRoaXMubWFwPVwibWFwXCI9PT1pLHRoaXMua2V5VHlwZT1yfHxudWxsLHRoaXMudHlwZT1zLHRoaXMucmVzb2x2ZWRUeXBlPW51bGwsdGhpcy5pZD1hLHRoaXMub3B0aW9ucz11fHx7fSx0aGlzLmRlZmF1bHRWYWx1ZT1udWxsLHRoaXMub25lb2Y9aHx8bnVsbCx0aGlzLnN5bnRheD1sfHxcInByb3RvMlwiLHRoaXMub3JpZ2luYWxOYW1lPXRoaXMubmFtZSx0aGlzLmVsZW1lbnQ9bnVsbCx0aGlzLmtleUVsZW1lbnQ9bnVsbCwhdGhpcy5idWlsZGVyLm9wdGlvbnMuY29udmVydEZpZWxkc1RvQ2FtZWxDYXNlfHx0aGlzIGluc3RhbmNlb2YgYy5FeHRlbnNpb25GaWVsZHx8KHRoaXMubmFtZT10LlV0aWwudG9DYW1lbENhc2UodGhpcy5uYW1lKSl9KS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShULnByb3RvdHlwZSkpLmJ1aWxkPWZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50PW5ldyBhKHRoaXMudHlwZSx0aGlzLnJlc29sdmVkVHlwZSwhMSx0aGlzLnN5bnRheCksdGhpcy5tYXAmJih0aGlzLmtleUVsZW1lbnQ9bmV3IGEodGhpcy5rZXlUeXBlLHZvaWQgMCwhMCx0aGlzLnN5bnRheCkpLFwicHJvdG8zXCIhPT10aGlzLnN5bnRheHx8dGhpcy5yZXBlYXRlZHx8dGhpcy5tYXA/dm9pZCAwIT09dGhpcy5vcHRpb25zLmRlZmF1bHQmJih0aGlzLmRlZmF1bHRWYWx1ZT10aGlzLnZlcmlmeVZhbHVlKHRoaXMub3B0aW9ucy5kZWZhdWx0KSk6dGhpcy5kZWZhdWx0VmFsdWU9YS5kZWZhdWx0RmllbGRWYWx1ZSh0aGlzLnR5cGUpfSxkLnZlcmlmeVZhbHVlPWZ1bmN0aW9uKGUsbil7dmFyIGkscixzO2lmKG49bnx8ITEsaT1mdW5jdGlvbihlLHQpe3Rocm93IEVycm9yKFwiSWxsZWdhbCB2YWx1ZSBmb3IgXCIrdGhpcy50b1N0cmluZyghMCkrXCIgb2YgdHlwZSBcIit0aGlzLnR5cGUubmFtZStcIjogXCIrZStcIiAoXCIrdCtcIilcIil9LmJpbmQodGhpcyksbnVsbD09PWUpcmV0dXJuIHRoaXMucmVxdWlyZWQmJmkodHlwZW9mIGUsXCJyZXF1aXJlZFwiKSxcInByb3RvM1wiPT09dGhpcy5zeW50YXgmJnRoaXMudHlwZSE9PXQuVFlQRVMubWVzc2FnZSYmaSh0eXBlb2YgZSxcInByb3RvMyBmaWVsZCB3aXRob3V0IGZpZWxkIHByZXNlbmNlIGNhbm5vdCBiZSBudWxsXCIpLG51bGw7aWYodGhpcy5yZXBlYXRlZCYmIW4pe2ZvcihBcnJheS5pc0FycmF5KGUpfHwoZT1bZV0pLHM9W10scj0wO3I8ZS5sZW5ndGg7cisrKXMucHVzaCh0aGlzLmVsZW1lbnQudmVyaWZ5VmFsdWUoZVtyXSkpO3JldHVybiBzfXJldHVybiB0aGlzLm1hcCYmIW4/ZSBpbnN0YW5jZW9mIHQuTWFwP2U6KGUgaW5zdGFuY2VvZiBPYmplY3R8fGkodHlwZW9mIGUsXCJleHBlY3RlZCBQcm90b0J1Zi5NYXAgb3IgcmF3IG9iamVjdCBmb3IgbWFwIGZpZWxkXCIpLG5ldyB0Lk1hcCh0aGlzLGUpKTooIXRoaXMucmVwZWF0ZWQmJkFycmF5LmlzQXJyYXkoZSkmJmkodHlwZW9mIGUsXCJubyBhcnJheSBleHBlY3RlZFwiKSx0aGlzLmVsZW1lbnQudmVyaWZ5VmFsdWUoZSkpfSxkLmhhc1dpcmVQcmVzZW5jZT1mdW5jdGlvbihlLG4pe2lmKFwicHJvdG8zXCIhPT10aGlzLnN5bnRheClyZXR1cm4gbnVsbCE9PWU7aWYodGhpcy5vbmVvZiYmblt0aGlzLm9uZW9mLm5hbWVdPT09dGhpcy5uYW1lKXJldHVybiEwO3N3aXRjaCh0aGlzLnR5cGUpe2Nhc2UgdC5UWVBFUy5pbnQzMjpjYXNlIHQuVFlQRVMuc2ludDMyOmNhc2UgdC5UWVBFUy5zZml4ZWQzMjpjYXNlIHQuVFlQRVMudWludDMyOmNhc2UgdC5UWVBFUy5maXhlZDMyOnJldHVybiAwIT09ZTtjYXNlIHQuVFlQRVMuaW50NjQ6Y2FzZSB0LlRZUEVTLnNpbnQ2NDpjYXNlIHQuVFlQRVMuc2ZpeGVkNjQ6Y2FzZSB0LlRZUEVTLnVpbnQ2NDpjYXNlIHQuVFlQRVMuZml4ZWQ2NDpyZXR1cm4gMCE9PWUubG93fHwwIT09ZS5oaWdoO2Nhc2UgdC5UWVBFUy5ib29sOnJldHVybiBlO2Nhc2UgdC5UWVBFUy5mbG9hdDpjYXNlIHQuVFlQRVMuZG91YmxlOnJldHVybiAwIT09ZTtjYXNlIHQuVFlQRVMuc3RyaW5nOnJldHVybiBlLmxlbmd0aD4wO2Nhc2UgdC5UWVBFUy5ieXRlczpyZXR1cm4gZS5yZW1haW5pbmcoKT4wO2Nhc2UgdC5UWVBFUy5lbnVtOnJldHVybiAwIT09ZTtjYXNlIHQuVFlQRVMubWVzc2FnZTpyZXR1cm4gbnVsbCE9PWU7ZGVmYXVsdDpyZXR1cm4hMH19LGQuZW5jb2RlPWZ1bmN0aW9uKGUsaSxyKXt2YXIgcyxvLGEsdSxjO2lmKG51bGw9PT10aGlzLnR5cGV8fFwib2JqZWN0XCIhPXR5cGVvZiB0aGlzLnR5cGUpdGhyb3cgRXJyb3IoXCJbSU5URVJOQUxdIFVucmVzb2x2ZWQgdHlwZSBpbiBcIit0aGlzLnRvU3RyaW5nKCEwKStcIjogXCIrdGhpcy50eXBlKTtpZihudWxsPT09ZXx8dGhpcy5yZXBlYXRlZCYmMD09ZS5sZW5ndGgpcmV0dXJuIGk7dHJ5e2lmKHRoaXMucmVwZWF0ZWQpaWYodGhpcy5vcHRpb25zLnBhY2tlZCYmdC5QQUNLQUJMRV9XSVJFX1RZUEVTLmluZGV4T2YodGhpcy50eXBlLndpcmVUeXBlKT49MCl7Zm9yKGkud3JpdGVWYXJpbnQzMih0aGlzLmlkPDwzfHQuV0lSRV9UWVBFUy5MREVMSU0pLGkuZW5zdXJlQ2FwYWNpdHkoaS5vZmZzZXQrPTEpLG89aS5vZmZzZXQscz0wO3M8ZS5sZW5ndGg7cysrKXRoaXMuZWxlbWVudC5lbmNvZGVWYWx1ZSh0aGlzLmlkLGVbc10saSk7YT1pLm9mZnNldC1vLCh1PW4uY2FsY3VsYXRlVmFyaW50MzIoYSkpPjEmJihjPWkuc2xpY2UobyxpLm9mZnNldCksbys9dS0xLGkub2Zmc2V0PW8saS5hcHBlbmQoYykpLGkud3JpdGVWYXJpbnQzMihhLG8tdSl9ZWxzZSBmb3Iocz0wO3M8ZS5sZW5ndGg7cysrKWkud3JpdGVWYXJpbnQzMih0aGlzLmlkPDwzfHRoaXMudHlwZS53aXJlVHlwZSksdGhpcy5lbGVtZW50LmVuY29kZVZhbHVlKHRoaXMuaWQsZVtzXSxpKTtlbHNlIHRoaXMubWFwP2UuZm9yRWFjaCgoZnVuY3Rpb24oZSxyKXt2YXIgcz1uLmNhbGN1bGF0ZVZhcmludDMyKDh8dGhpcy5rZXlUeXBlLndpcmVUeXBlKSt0aGlzLmtleUVsZW1lbnQuY2FsY3VsYXRlTGVuZ3RoKDEscikrbi5jYWxjdWxhdGVWYXJpbnQzMigxNnx0aGlzLnR5cGUud2lyZVR5cGUpK3RoaXMuZWxlbWVudC5jYWxjdWxhdGVMZW5ndGgoMixlKTtpLndyaXRlVmFyaW50MzIodGhpcy5pZDw8M3x0LldJUkVfVFlQRVMuTERFTElNKSxpLndyaXRlVmFyaW50MzIocyksaS53cml0ZVZhcmludDMyKDh8dGhpcy5rZXlUeXBlLndpcmVUeXBlKSx0aGlzLmtleUVsZW1lbnQuZW5jb2RlVmFsdWUoMSxyLGkpLGkud3JpdGVWYXJpbnQzMigxNnx0aGlzLnR5cGUud2lyZVR5cGUpLHRoaXMuZWxlbWVudC5lbmNvZGVWYWx1ZSgyLGUsaSl9KSx0aGlzKTp0aGlzLmhhc1dpcmVQcmVzZW5jZShlLHIpJiYoaS53cml0ZVZhcmludDMyKHRoaXMuaWQ8PDN8dGhpcy50eXBlLndpcmVUeXBlKSx0aGlzLmVsZW1lbnQuZW5jb2RlVmFsdWUodGhpcy5pZCxlLGkpKX1jYXRjaCh0KXt0aHJvdyBFcnJvcihcIklsbGVnYWwgdmFsdWUgZm9yIFwiK3RoaXMudG9TdHJpbmcoITApK1wiOiBcIitlK1wiIChcIit0K1wiKVwiKX1yZXR1cm4gaX0sZC5jYWxjdWxhdGU9ZnVuY3Rpb24oZSxpKXt2YXIgcixzLG87aWYoZT10aGlzLnZlcmlmeVZhbHVlKGUpLG51bGw9PT10aGlzLnR5cGV8fFwib2JqZWN0XCIhPXR5cGVvZiB0aGlzLnR5cGUpdGhyb3cgRXJyb3IoXCJbSU5URVJOQUxdIFVucmVzb2x2ZWQgdHlwZSBpbiBcIit0aGlzLnRvU3RyaW5nKCEwKStcIjogXCIrdGhpcy50eXBlKTtpZihudWxsPT09ZXx8dGhpcy5yZXBlYXRlZCYmMD09ZS5sZW5ndGgpcmV0dXJuIDA7cj0wO3RyeXtpZih0aGlzLnJlcGVhdGVkKWlmKHRoaXMub3B0aW9ucy5wYWNrZWQmJnQuUEFDS0FCTEVfV0lSRV9UWVBFUy5pbmRleE9mKHRoaXMudHlwZS53aXJlVHlwZSk+PTApe2ZvcihyKz1uLmNhbGN1bGF0ZVZhcmludDMyKHRoaXMuaWQ8PDN8dC5XSVJFX1RZUEVTLkxERUxJTSksbz0wLHM9MDtzPGUubGVuZ3RoO3MrKylvKz10aGlzLmVsZW1lbnQuY2FsY3VsYXRlTGVuZ3RoKHRoaXMuaWQsZVtzXSk7cis9bi5jYWxjdWxhdGVWYXJpbnQzMihvKSxyKz1vfWVsc2UgZm9yKHM9MDtzPGUubGVuZ3RoO3MrKylyKz1uLmNhbGN1bGF0ZVZhcmludDMyKHRoaXMuaWQ8PDN8dGhpcy50eXBlLndpcmVUeXBlKSxyKz10aGlzLmVsZW1lbnQuY2FsY3VsYXRlTGVuZ3RoKHRoaXMuaWQsZVtzXSk7ZWxzZSB0aGlzLm1hcD9lLmZvckVhY2goKGZ1bmN0aW9uKGUsaSl7dmFyIHM9bi5jYWxjdWxhdGVWYXJpbnQzMig4fHRoaXMua2V5VHlwZS53aXJlVHlwZSkrdGhpcy5rZXlFbGVtZW50LmNhbGN1bGF0ZUxlbmd0aCgxLGkpK24uY2FsY3VsYXRlVmFyaW50MzIoMTZ8dGhpcy50eXBlLndpcmVUeXBlKSt0aGlzLmVsZW1lbnQuY2FsY3VsYXRlTGVuZ3RoKDIsZSk7cis9bi5jYWxjdWxhdGVWYXJpbnQzMih0aGlzLmlkPDwzfHQuV0lSRV9UWVBFUy5MREVMSU0pLHIrPW4uY2FsY3VsYXRlVmFyaW50MzIocykscis9c30pLHRoaXMpOnRoaXMuaGFzV2lyZVByZXNlbmNlKGUsaSkmJihyKz1uLmNhbGN1bGF0ZVZhcmludDMyKHRoaXMuaWQ8PDN8dGhpcy50eXBlLndpcmVUeXBlKSxyKz10aGlzLmVsZW1lbnQuY2FsY3VsYXRlTGVuZ3RoKHRoaXMuaWQsZSkpfWNhdGNoKHQpe3Rocm93IEVycm9yKFwiSWxsZWdhbCB2YWx1ZSBmb3IgXCIrdGhpcy50b1N0cmluZyghMCkrXCI6IFwiK2UrXCIgKFwiK3QrXCIpXCIpfXJldHVybiByfSxkLmRlY29kZT1mdW5jdGlvbihlLG4saSl7dmFyIHIscyxvLHUsYyxoLGw7aWYoISghdGhpcy5tYXAmJmU9PXRoaXMudHlwZS53aXJlVHlwZXx8IWkmJnRoaXMucmVwZWF0ZWQmJnRoaXMub3B0aW9ucy5wYWNrZWQmJmU9PXQuV0lSRV9UWVBFUy5MREVMSU18fHRoaXMubWFwJiZlPT10LldJUkVfVFlQRVMuTERFTElNKSl0aHJvdyBFcnJvcihcIklsbGVnYWwgd2lyZSB0eXBlIGZvciBmaWVsZCBcIit0aGlzLnRvU3RyaW5nKCEwKStcIjogXCIrZStcIiAoXCIrdGhpcy50eXBlLndpcmVUeXBlK1wiIGV4cGVjdGVkKVwiKTtpZihlPT10LldJUkVfVFlQRVMuTERFTElNJiZ0aGlzLnJlcGVhdGVkJiZ0aGlzLm9wdGlvbnMucGFja2VkJiZ0LlBBQ0tBQkxFX1dJUkVfVFlQRVMuaW5kZXhPZih0aGlzLnR5cGUud2lyZVR5cGUpPj0wJiYhaSl7Zm9yKHM9bi5yZWFkVmFyaW50MzIoKSxzPW4ub2Zmc2V0K3Msbz1bXTtuLm9mZnNldDxzOylvLnB1c2godGhpcy5kZWNvZGUodGhpcy50eXBlLndpcmVUeXBlLG4sITApKTtyZXR1cm4gb31pZih0aGlzLm1hcCl7aWYodT1hLmRlZmF1bHRGaWVsZFZhbHVlKHRoaXMua2V5VHlwZSkscj1hLmRlZmF1bHRGaWVsZFZhbHVlKHRoaXMudHlwZSkscz1uLnJlYWRWYXJpbnQzMigpLG4ucmVtYWluaW5nKCk8cyl0aHJvdyBFcnJvcihcIklsbGVnYWwgbnVtYmVyIG9mIGJ5dGVzIGZvciBcIit0aGlzLnRvU3RyaW5nKCEwKStcIjogXCIrcytcIiByZXF1aXJlZCBidXQgZ290IG9ubHkgXCIrbi5yZW1haW5pbmcoKSk7Zm9yKChjPW4uY2xvbmUoKSkubGltaXQ9Yy5vZmZzZXQrcyxuLm9mZnNldCs9cztjLnJlbWFpbmluZygpPjA7KWlmKGU9NyYoaD1jLnJlYWRWYXJpbnQzMigpKSwxPT0obD1oPj4+MykpdT10aGlzLmtleUVsZW1lbnQuZGVjb2RlKGMsZSxsKTtlbHNle2lmKDIhPT1sKXRocm93IEVycm9yKFwiVW5leHBlY3RlZCB0YWcgaW4gbWFwIGZpZWxkIGtleS92YWx1ZSBzdWJtZXNzYWdlXCIpO3I9dGhpcy5lbGVtZW50LmRlY29kZShjLGUsbCl9cmV0dXJuW3Uscl19cmV0dXJuIHRoaXMuZWxlbWVudC5kZWNvZGUobixlLHRoaXMuaWQpfSxJLk1lc3NhZ2UuRmllbGQ9bCwoZj1mdW5jdGlvbihlLHQsbixpLHIscyxvKXtsLmNhbGwodGhpcyxlLHQsbixudWxsLGkscixzLG8pLHRoaXMuZXh0ZW5zaW9ufSkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobC5wcm90b3R5cGUpLEkuTWVzc2FnZS5FeHRlbnNpb25GaWVsZD1mLHA9ZnVuY3Rpb24oZSx0LG4pe1QuY2FsbCh0aGlzLGUsdCxuKSx0aGlzLmZpZWxkcz1bXX0sSS5NZXNzYWdlLk9uZU9mPXAsKGc9ZnVuY3Rpb24oZSx0LG4saSxyKXtzLmNhbGwodGhpcyxlLHQsbixpLHIpLHRoaXMuY2xhc3NOYW1lPVwiRW51bVwiLHRoaXMub2JqZWN0PW51bGx9KS5nZXROYW1lPWZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyPU9iamVjdC5rZXlzKGUpO2ZvcihpPTA7aTxyLmxlbmd0aDsrK2kpaWYoZVtuPXJbaV1dPT09dClyZXR1cm4gbjtyZXR1cm4gbnVsbH0sKGcucHJvdG90eXBlPU9iamVjdC5jcmVhdGUocy5wcm90b3R5cGUpKS5idWlsZD1mdW5jdGlvbihlKXt2YXIgbixpLHIscztpZih0aGlzLm9iamVjdCYmIWUpcmV0dXJuIHRoaXMub2JqZWN0O2ZvcihuPW5ldyB0LkJ1aWxkZXIuRW51bSxyPTAscz0oaT10aGlzLmdldENoaWxkcmVuKGcuVmFsdWUpKS5sZW5ndGg7cz5yOysrciluW2lbcl0ubmFtZV09aVtyXS5pZDtyZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5JiZPYmplY3QuZGVmaW5lUHJvcGVydHkobixcIiRvcHRpb25zXCIse3ZhbHVlOnRoaXMuYnVpbGRPcHQoKSxlbnVtZXJhYmxlOiExfSksdGhpcy5vYmplY3Q9bn0sSS5FbnVtPWcsKF89ZnVuY3Rpb24oZSx0LG4saSl7VC5jYWxsKHRoaXMsZSx0LG4pLHRoaXMuY2xhc3NOYW1lPVwiRW51bS5WYWx1ZVwiLHRoaXMuaWQ9aX0pLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKFQucHJvdG90eXBlKSxJLkVudW0uVmFsdWU9XywoeT1mdW5jdGlvbihlLHQsbixpKXtULmNhbGwodGhpcyxlLHQsbiksdGhpcy5maWVsZD1pfSkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVC5wcm90b3R5cGUpLEkuRXh0ZW5zaW9uPXksKCh2PWZ1bmN0aW9uKGUsdCxuLGkpe3MuY2FsbCh0aGlzLGUsdCxuLGkpLHRoaXMuY2xhc3NOYW1lPVwiU2VydmljZVwiLHRoaXMuY2xheno9bnVsbH0pLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHMucHJvdG90eXBlKSkuYnVpbGQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuY2xhenomJiFlP3RoaXMuY2xheno6dGhpcy5jbGF6ej1mdW5jdGlvbihlLHQpe3ZhciBpLHI9ZnVuY3Rpb24odCl7ZS5CdWlsZGVyLlNlcnZpY2UuY2FsbCh0aGlzKSx0aGlzLnJwY0ltcGw9dHx8ZnVuY3Rpb24oZSx0LG4pe3NldFRpbWVvdXQobi5iaW5kKHRoaXMsRXJyb3IoXCJOb3QgaW1wbGVtZW50ZWQsIHNlZTogaHR0cHM6Ly9naXRodWIuY29tL2Rjb2RlSU8vUHJvdG9CdWYuanMvd2lraS9TZXJ2aWNlc1wiKSksMCl9fSxzPXIucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZS5CdWlsZGVyLlNlcnZpY2UucHJvdG90eXBlKSxvPXQuZ2V0Q2hpbGRyZW4oZS5SZWZsZWN0LlNlcnZpY2UuUlBDTWV0aG9kKTtmb3IoaT0wO2k8by5sZW5ndGg7aSsrKSFmdW5jdGlvbihlKXtzW2UubmFtZV09ZnVuY3Rpb24oaSxyKXt0cnl7dHJ5e2k9ZS5yZXNvbHZlZFJlcXVlc3RUeXBlLmNsYXp6LmRlY29kZShuLndyYXAoaSkpfWNhdGNoKGUpe2lmKCEoZSBpbnN0YW5jZW9mIFR5cGVFcnJvcikpdGhyb3cgZX1pZihudWxsPT09aXx8XCJvYmplY3RcIiE9dHlwZW9mIGkpdGhyb3cgRXJyb3IoXCJJbGxlZ2FsIGFyZ3VtZW50c1wiKTtpIGluc3RhbmNlb2YgZS5yZXNvbHZlZFJlcXVlc3RUeXBlLmNsYXp6fHwoaT1uZXcgZS5yZXNvbHZlZFJlcXVlc3RUeXBlLmNsYXp6KGkpKSx0aGlzLnJwY0ltcGwoZS5mcW4oKSxpLChmdW5jdGlvbihuLGkpe2lmKCFuKXt0cnl7aT1lLnJlc29sdmVkUmVzcG9uc2VUeXBlLmNsYXp6LmRlY29kZShpKX1jYXRjaChlKXt9cmV0dXJuIGkmJmkgaW5zdGFuY2VvZiBlLnJlc29sdmVkUmVzcG9uc2VUeXBlLmNsYXp6P3ZvaWQgcihudWxsLGkpOnZvaWQgcihFcnJvcihcIklsbGVnYWwgcmVzcG9uc2UgdHlwZSByZWNlaXZlZCBpbiBzZXJ2aWNlIG1ldGhvZCBcIit0Lm5hbWUrXCIjXCIrZS5uYW1lKSl9cihuKX0pKX1jYXRjaChlKXtzZXRUaW1lb3V0KHIuYmluZCh0aGlzLGUpLDApfX0scltlLm5hbWVdPWZ1bmN0aW9uKHQsbixpKXtuZXcgcih0KVtlLm5hbWVdKG4saSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSYmKE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyW2UubmFtZV0sXCIkb3B0aW9uc1wiLHt2YWx1ZTplLmJ1aWxkT3B0KCl9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoc1tlLm5hbWVdLFwiJG9wdGlvbnNcIix7dmFsdWU6cltlLm5hbWVdLiRvcHRpb25zfSkpfShvW2ldKTtyZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5JiYoT2JqZWN0LmRlZmluZVByb3BlcnR5KHIsXCIkb3B0aW9uc1wiLHt2YWx1ZTp0LmJ1aWxkT3B0KCl9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocyxcIiRvcHRpb25zXCIse3ZhbHVlOnIuJG9wdGlvbnN9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocixcIiR0eXBlXCIse3ZhbHVlOnR9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocyxcIiR0eXBlXCIse3ZhbHVlOnR9KSkscn0odCx0aGlzKX0sSS5TZXJ2aWNlPXYsKChFPWZ1bmN0aW9uKGUsdCxuLGkpe1QuY2FsbCh0aGlzLGUsdCxuKSx0aGlzLmNsYXNzTmFtZT1cIlNlcnZpY2UuTWV0aG9kXCIsdGhpcy5vcHRpb25zPWl8fHt9fSkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoVC5wcm90b3R5cGUpKS5idWlsZE9wdD1vLmJ1aWxkT3B0LEkuU2VydmljZS5NZXRob2Q9RSwobT1mdW5jdGlvbihlLHQsbixpLHIscyxvLGEpe0UuY2FsbCh0aGlzLGUsdCxuLGEpLHRoaXMuY2xhc3NOYW1lPVwiU2VydmljZS5SUENNZXRob2RcIix0aGlzLnJlcXVlc3ROYW1lPWksdGhpcy5yZXNwb25zZU5hbWU9cix0aGlzLnJlcXVlc3RTdHJlYW09cyx0aGlzLnJlc3BvbnNlU3RyZWFtPW8sdGhpcy5yZXNvbHZlZFJlcXVlc3RUeXBlPW51bGwsdGhpcy5yZXNvbHZlZFJlc3BvbnNlVHlwZT1udWxsfSkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoRS5wcm90b3R5cGUpLEkuU2VydmljZS5SUENNZXRob2Q9bSxJfShyKSxyLkJ1aWxkZXI9ZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIGkoZSl7ZS5tZXNzYWdlcyYmZS5tZXNzYWdlcy5mb3JFYWNoKChmdW5jdGlvbih0KXt0LnN5bnRheD1lLnN5bnRheCxpKHQpfSkpLGUuZW51bXMmJmUuZW51bXMuZm9yRWFjaCgoZnVuY3Rpb24odCl7dC5zeW50YXg9ZS5zeW50YXh9KSl9dmFyIHI9ZnVuY3Rpb24oZSl7dGhpcy5ucz1uZXcgbi5OYW1lc3BhY2UodGhpcyxudWxsLFwiXCIpLHRoaXMucHRyPXRoaXMubnMsdGhpcy5yZXNvbHZlZD0hMSx0aGlzLnJlc3VsdD1udWxsLHRoaXMuZmlsZXM9e30sdGhpcy5pbXBvcnRSb290PW51bGwsdGhpcy5vcHRpb25zPWV8fHt9fSxzPXIucHJvdG90eXBlO3JldHVybiByLmlzTWVzc2FnZT1mdW5jdGlvbihlKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgZS5uYW1lJiZ2b2lkIDA9PT1lLnZhbHVlcyYmdm9pZCAwPT09ZS5ycGN9LHIuaXNNZXNzYWdlRmllbGQ9ZnVuY3Rpb24oZSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGUucnVsZSYmXCJzdHJpbmdcIj09dHlwZW9mIGUubmFtZSYmXCJzdHJpbmdcIj09dHlwZW9mIGUudHlwZSYmdm9pZCAwIT09ZS5pZH0sci5pc0VudW09ZnVuY3Rpb24oZSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGUubmFtZSYmISh2b2lkIDA9PT1lLnZhbHVlc3x8IUFycmF5LmlzQXJyYXkoZS52YWx1ZXMpfHwwPT09ZS52YWx1ZXMubGVuZ3RoKX0sci5pc1NlcnZpY2U9ZnVuY3Rpb24oZSl7cmV0dXJuIShcInN0cmluZ1wiIT10eXBlb2YgZS5uYW1lfHxcIm9iamVjdFwiIT10eXBlb2YgZS5ycGN8fCFlLnJwYyl9LHIuaXNFeHRlbmQ9ZnVuY3Rpb24oZSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGUucmVmfSxzLnJlc2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHRyPXRoaXMubnMsdGhpc30scy5kZWZpbmU9ZnVuY3Rpb24oZSl7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGV8fCF0LlRZUEVSRUYudGVzdChlKSl0aHJvdyBFcnJvcihcImlsbGVnYWwgbmFtZXNwYWNlOiBcIitlKTtyZXR1cm4gZS5zcGxpdChcIi5cIikuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5wdHIuZ2V0Q2hpbGQoZSk7bnVsbD09PXQmJnRoaXMucHRyLmFkZENoaWxkKHQ9bmV3IG4uTmFtZXNwYWNlKHRoaXMsdGhpcy5wdHIsZSkpLHRoaXMucHRyPXR9KSx0aGlzKSx0aGlzfSxzLmNyZWF0ZT1mdW5jdGlvbih0KXt2YXIgaSxzLG8sYSx1O2lmKCF0KXJldHVybiB0aGlzO2lmKEFycmF5LmlzQXJyYXkodCkpe2lmKDA9PT10Lmxlbmd0aClyZXR1cm4gdGhpczt0PXQuc2xpY2UoKX1lbHNlIHQ9W3RdO2ZvcihpPVt0XTtpLmxlbmd0aD4wOyl7aWYodD1pLnBvcCgpLCFBcnJheS5pc0FycmF5KHQpKXRocm93IEVycm9yKFwibm90IGEgdmFsaWQgbmFtZXNwYWNlOiBcIitKU09OLnN0cmluZ2lmeSh0KSk7Zm9yKDt0Lmxlbmd0aD4wOyl7aWYocz10LnNoaWZ0KCksci5pc01lc3NhZ2Uocykpe2lmKG89bmV3IG4uTWVzc2FnZSh0aGlzLHRoaXMucHRyLHMubmFtZSxzLm9wdGlvbnMscy5pc0dyb3VwLHMuc3ludGF4KSxhPXt9LHMub25lb2ZzJiZPYmplY3Qua2V5cyhzLm9uZW9mcykuZm9yRWFjaCgoZnVuY3Rpb24oZSl7by5hZGRDaGlsZChhW2VdPW5ldyBuLk1lc3NhZ2UuT25lT2YodGhpcyxvLGUpKX0pLHRoaXMpLHMuZmllbGRzJiZzLmZpZWxkcy5mb3JFYWNoKChmdW5jdGlvbihlKXtpZihudWxsIT09by5nZXRDaGlsZCgwfGUuaWQpKXRocm93IEVycm9yKFwiZHVwbGljYXRlIG9yIGludmFsaWQgZmllbGQgaWQgaW4gXCIrby5uYW1lK1wiOiBcIitlLmlkKTtpZihlLm9wdGlvbnMmJlwib2JqZWN0XCIhPXR5cGVvZiBlLm9wdGlvbnMpdGhyb3cgRXJyb3IoXCJpbGxlZ2FsIGZpZWxkIG9wdGlvbnMgaW4gXCIrby5uYW1lK1wiI1wiK2UubmFtZSk7dmFyIHQ9bnVsbDtpZihcInN0cmluZ1wiPT10eXBlb2YgZS5vbmVvZiYmISh0PWFbZS5vbmVvZl0pKXRocm93IEVycm9yKFwiaWxsZWdhbCBvbmVvZiBpbiBcIitvLm5hbWUrXCIjXCIrZS5uYW1lK1wiOiBcIitlLm9uZW9mKTtlPW5ldyBuLk1lc3NhZ2UuRmllbGQodGhpcyxvLGUucnVsZSxlLmtleXR5cGUsZS50eXBlLGUubmFtZSxlLmlkLGUub3B0aW9ucyx0LHMuc3ludGF4KSx0JiZ0LmZpZWxkcy5wdXNoKGUpLG8uYWRkQ2hpbGQoZSl9KSx0aGlzKSx1PVtdLHMuZW51bXMmJnMuZW51bXMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dS5wdXNoKGUpfSkpLHMubWVzc2FnZXMmJnMubWVzc2FnZXMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dS5wdXNoKGUpfSkpLHMuc2VydmljZXMmJnMuc2VydmljZXMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dS5wdXNoKGUpfSkpLHMuZXh0ZW5zaW9ucyYmKG8uZXh0ZW5zaW9ucz1cIm51bWJlclwiPT10eXBlb2Ygcy5leHRlbnNpb25zWzBdP1tzLmV4dGVuc2lvbnNdOnMuZXh0ZW5zaW9ucyksdGhpcy5wdHIuYWRkQ2hpbGQobyksdS5sZW5ndGg+MCl7aS5wdXNoKHQpLHQ9dSx1PW51bGwsdGhpcy5wdHI9byxvPW51bGw7Y29udGludWV9dT1udWxsfWVsc2UgaWYoci5pc0VudW0ocykpbz1uZXcgbi5FbnVtKHRoaXMsdGhpcy5wdHIscy5uYW1lLHMub3B0aW9ucyxzLnN5bnRheCkscy52YWx1ZXMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7by5hZGRDaGlsZChuZXcgbi5FbnVtLlZhbHVlKHRoaXMsbyxlLm5hbWUsZS5pZCkpfSksdGhpcyksdGhpcy5wdHIuYWRkQ2hpbGQobyk7ZWxzZSBpZihyLmlzU2VydmljZShzKSlvPW5ldyBuLlNlcnZpY2UodGhpcyx0aGlzLnB0cixzLm5hbWUscy5vcHRpb25zKSxPYmplY3Qua2V5cyhzLnJwYykuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHQ9cy5ycGNbZV07by5hZGRDaGlsZChuZXcgbi5TZXJ2aWNlLlJQQ01ldGhvZCh0aGlzLG8sZSx0LnJlcXVlc3QsdC5yZXNwb25zZSwhIXQucmVxdWVzdF9zdHJlYW0sISF0LnJlc3BvbnNlX3N0cmVhbSx0Lm9wdGlvbnMpKX0pLHRoaXMpLHRoaXMucHRyLmFkZENoaWxkKG8pO2Vsc2V7aWYoIXIuaXNFeHRlbmQocykpdGhyb3cgRXJyb3IoXCJub3QgYSB2YWxpZCBkZWZpbml0aW9uOiBcIitKU09OLnN0cmluZ2lmeShzKSk7aWYobz10aGlzLnB0ci5yZXNvbHZlKHMucmVmLCEwKSlzLmZpZWxkcy5mb3JFYWNoKChmdW5jdGlvbih0KXt2YXIgaSxyLHMsYTtpZihudWxsIT09by5nZXRDaGlsZCgwfHQuaWQpKXRocm93IEVycm9yKFwiZHVwbGljYXRlIGV4dGVuZGVkIGZpZWxkIGlkIGluIFwiK28ubmFtZStcIjogXCIrdC5pZCk7aWYoby5leHRlbnNpb25zJiYoaT0hMSxvLmV4dGVuc2lvbnMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dC5pZD49ZVswXSYmdC5pZDw9ZVsxXSYmKGk9ITApfSkpLCFpKSl0aHJvdyBFcnJvcihcImlsbGVnYWwgZXh0ZW5kZWQgZmllbGQgaWQgaW4gXCIrby5uYW1lK1wiOiBcIit0LmlkK1wiIChub3Qgd2l0aGluIHZhbGlkIHJhbmdlcylcIik7cj10Lm5hbWUsdGhpcy5vcHRpb25zLmNvbnZlcnRGaWVsZHNUb0NhbWVsQ2FzZSYmKHI9ZS5VdGlsLnRvQ2FtZWxDYXNlKHIpKSxzPW5ldyBuLk1lc3NhZ2UuRXh0ZW5zaW9uRmllbGQodGhpcyxvLHQucnVsZSx0LnR5cGUsdGhpcy5wdHIuZnFuKCkrXCIuXCIrcix0LmlkLHQub3B0aW9ucyksYT1uZXcgbi5FeHRlbnNpb24odGhpcyx0aGlzLnB0cix0Lm5hbWUscykscy5leHRlbnNpb249YSx0aGlzLnB0ci5hZGRDaGlsZChhKSxvLmFkZENoaWxkKHMpfSksdGhpcyk7ZWxzZSBpZighL1xcLj9nb29nbGVcXC5wcm90b2J1ZlxcLi8udGVzdChzLnJlZikpdGhyb3cgRXJyb3IoXCJleHRlbmRlZCBtZXNzYWdlIFwiK3MucmVmK1wiIGlzIG5vdCBkZWZpbmVkXCIpfXM9bnVsbCxvPW51bGx9dD1udWxsLHRoaXMucHRyPXRoaXMucHRyLnBhcmVudH1yZXR1cm4gdGhpcy5yZXNvbHZlZD0hMSx0aGlzLnJlc3VsdD1udWxsLHRoaXN9LHMuaW1wb3J0PWZ1bmN0aW9uKHQsbil7dmFyIHIscyxvLGEsdSxjLGgsbCxkPVwiL1wiO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBuKXtpZihlLlV0aWwuSVNfTk9ERSwhMD09PXRoaXMuZmlsZXNbbl0pcmV0dXJuIHRoaXMucmVzZXQoKTt0aGlzLmZpbGVzW25dPSEwfWVsc2UgaWYoXCJvYmplY3RcIj09dHlwZW9mIG4pe2lmKHI9bi5yb290LGUuVXRpbC5JU19OT0RFLChyLmluZGV4T2YoXCJcXFxcXCIpPj0wfHxuLmZpbGUuaW5kZXhPZihcIlxcXFxcIik+PTApJiYoZD1cIlxcXFxcIikscz1yK2Qrbi5maWxlLCEwPT09dGhpcy5maWxlc1tzXSlyZXR1cm4gdGhpcy5yZXNldCgpO3RoaXMuZmlsZXNbc109ITB9aWYodC5pbXBvcnRzJiZ0LmltcG9ydHMubGVuZ3RoPjApe2ZvcihhPSExLFwib2JqZWN0XCI9PXR5cGVvZiBuPyh0aGlzLmltcG9ydFJvb3Q9bi5yb290LGE9ITAsbz10aGlzLmltcG9ydFJvb3Qsbj1uLmZpbGUsKG8uaW5kZXhPZihcIlxcXFxcIik+PTB8fG4uaW5kZXhPZihcIlxcXFxcIik+PTApJiYoZD1cIlxcXFxcIikpOlwic3RyaW5nXCI9PXR5cGVvZiBuP3RoaXMuaW1wb3J0Um9vdD9vPXRoaXMuaW1wb3J0Um9vdDpuLmluZGV4T2YoXCIvXCIpPj0wP1wiXCI9PT0obz1uLnJlcGxhY2UoL1xcL1teXFwvXSokLyxcIlwiKSkmJihvPVwiL1wiKTpuLmluZGV4T2YoXCJcXFxcXCIpPj0wPyhvPW4ucmVwbGFjZSgvXFxcXFteXFxcXF0qJC8sXCJcIiksZD1cIlxcXFxcIik6bz1cIi5cIjpvPW51bGwsdT0wO3U8dC5pbXBvcnRzLmxlbmd0aDt1KyspaWYoXCJzdHJpbmdcIj09dHlwZW9mIHQuaW1wb3J0c1t1XSl7aWYoIW8pdGhyb3cgRXJyb3IoXCJjYW5ub3QgZGV0ZXJtaW5lIGltcG9ydCByb290XCIpO2lmKFwiZ29vZ2xlL3Byb3RvYnVmL2Rlc2NyaXB0b3IucHJvdG9cIj09PShjPXQuaW1wb3J0c1t1XSkpY29udGludWU7aWYoYz1vK2QrYywhMD09PXRoaXMuZmlsZXNbY10pY29udGludWU7aWYoL1xcLnByb3RvJC9pLnRlc3QoYykmJiFlLkRvdFByb3RvJiYoYz1jLnJlcGxhY2UoL1xcLnByb3RvJC8sXCIuanNvblwiKSksbnVsbD09PShoPWUuVXRpbC5mZXRjaChjKSkpdGhyb3cgRXJyb3IoXCJmYWlsZWQgdG8gaW1wb3J0ICdcIitjK1wiJyBpbiAnXCIrbitcIic6IGZpbGUgbm90IGZvdW5kXCIpOy9cXC5qc29uJC9pLnRlc3QoYyk/dGhpcy5pbXBvcnQoSlNPTi5wYXJzZShoK1wiXCIpLGMpOnRoaXMuaW1wb3J0KGUuRG90UHJvdG8uUGFyc2VyLnBhcnNlKGgpLGMpfWVsc2Ugbj8vXFwuKFxcdyspJC8udGVzdChuKT90aGlzLmltcG9ydCh0LmltcG9ydHNbdV0sbi5yZXBsYWNlKC9eKC4rKVxcLihcXHcrKSQvLChmdW5jdGlvbihlLHQsbil7cmV0dXJuIHQrXCJfaW1wb3J0XCIrdStcIi5cIitufSkpKTp0aGlzLmltcG9ydCh0LmltcG9ydHNbdV0sbitcIl9pbXBvcnRcIit1KTp0aGlzLmltcG9ydCh0LmltcG9ydHNbdV0pO2EmJih0aGlzLmltcG9ydFJvb3Q9bnVsbCl9cmV0dXJuIHQucGFja2FnZSYmdGhpcy5kZWZpbmUodC5wYWNrYWdlKSx0LnN5bnRheCYmaSh0KSxsPXRoaXMucHRyLHQub3B0aW9ucyYmT2JqZWN0LmtleXModC5vcHRpb25zKS5mb3JFYWNoKChmdW5jdGlvbihlKXtsLm9wdGlvbnNbZV09dC5vcHRpb25zW2VdfSkpLHQubWVzc2FnZXMmJih0aGlzLmNyZWF0ZSh0Lm1lc3NhZ2VzKSx0aGlzLnB0cj1sKSx0LmVudW1zJiYodGhpcy5jcmVhdGUodC5lbnVtcyksdGhpcy5wdHI9bCksdC5zZXJ2aWNlcyYmKHRoaXMuY3JlYXRlKHQuc2VydmljZXMpLHRoaXMucHRyPWwpLHQuZXh0ZW5kcyYmdGhpcy5jcmVhdGUodC5leHRlbmRzKSx0aGlzLnJlc2V0KCl9LHMucmVzb2x2ZUFsbD1mdW5jdGlvbigpe3ZhciBpO2lmKG51bGw9PXRoaXMucHRyfHxcIm9iamVjdFwiPT10eXBlb2YgdGhpcy5wdHIudHlwZSlyZXR1cm4gdGhpcztpZih0aGlzLnB0ciBpbnN0YW5jZW9mIG4uTmFtZXNwYWNlKXRoaXMucHRyLmNoaWxkcmVuLmZvckVhY2goKGZ1bmN0aW9uKGUpe3RoaXMucHRyPWUsdGhpcy5yZXNvbHZlQWxsKCl9KSx0aGlzKTtlbHNlIGlmKHRoaXMucHRyIGluc3RhbmNlb2Ygbi5NZXNzYWdlLkZpZWxkKXtpZih0LlRZUEUudGVzdCh0aGlzLnB0ci50eXBlKSl0aGlzLnB0ci50eXBlPWUuVFlQRVNbdGhpcy5wdHIudHlwZV07ZWxzZXtpZighdC5UWVBFUkVGLnRlc3QodGhpcy5wdHIudHlwZSkpdGhyb3cgRXJyb3IoXCJpbGxlZ2FsIHR5cGUgcmVmZXJlbmNlIGluIFwiK3RoaXMucHRyLnRvU3RyaW5nKCEwKStcIjogXCIrdGhpcy5wdHIudHlwZSk7aWYoIShpPSh0aGlzLnB0ciBpbnN0YW5jZW9mIG4uTWVzc2FnZS5FeHRlbnNpb25GaWVsZD90aGlzLnB0ci5leHRlbnNpb24ucGFyZW50OnRoaXMucHRyLnBhcmVudCkucmVzb2x2ZSh0aGlzLnB0ci50eXBlLCEwKSkpdGhyb3cgRXJyb3IoXCJ1bnJlc29sdmFibGUgdHlwZSByZWZlcmVuY2UgaW4gXCIrdGhpcy5wdHIudG9TdHJpbmcoITApK1wiOiBcIit0aGlzLnB0ci50eXBlKTtpZih0aGlzLnB0ci5yZXNvbHZlZFR5cGU9aSxpIGluc3RhbmNlb2Ygbi5FbnVtKXtpZih0aGlzLnB0ci50eXBlPWUuVFlQRVMuZW51bSxcInByb3RvM1wiPT09dGhpcy5wdHIuc3ludGF4JiZcInByb3RvM1wiIT09aS5zeW50YXgpdGhyb3cgRXJyb3IoXCJwcm90bzMgbWVzc2FnZSBjYW5ub3QgcmVmZXJlbmNlIHByb3RvMiBlbnVtXCIpfWVsc2V7aWYoIShpIGluc3RhbmNlb2Ygbi5NZXNzYWdlKSl0aHJvdyBFcnJvcihcImlsbGVnYWwgdHlwZSByZWZlcmVuY2UgaW4gXCIrdGhpcy5wdHIudG9TdHJpbmcoITApK1wiOiBcIit0aGlzLnB0ci50eXBlKTt0aGlzLnB0ci50eXBlPWkuaXNHcm91cD9lLlRZUEVTLmdyb3VwOmUuVFlQRVMubWVzc2FnZX19aWYodGhpcy5wdHIubWFwKXtpZighdC5UWVBFLnRlc3QodGhpcy5wdHIua2V5VHlwZSkpdGhyb3cgRXJyb3IoXCJpbGxlZ2FsIGtleSB0eXBlIGZvciBtYXAgZmllbGQgaW4gXCIrdGhpcy5wdHIudG9TdHJpbmcoITApK1wiOiBcIit0aGlzLnB0ci5rZXlUeXBlKTt0aGlzLnB0ci5rZXlUeXBlPWUuVFlQRVNbdGhpcy5wdHIua2V5VHlwZV19fWVsc2UgaWYodGhpcy5wdHIgaW5zdGFuY2VvZiBlLlJlZmxlY3QuU2VydmljZS5NZXRob2Qpe2lmKCEodGhpcy5wdHIgaW5zdGFuY2VvZiBlLlJlZmxlY3QuU2VydmljZS5SUENNZXRob2QpKXRocm93IEVycm9yKFwiaWxsZWdhbCBzZXJ2aWNlIHR5cGUgaW4gXCIrdGhpcy5wdHIudG9TdHJpbmcoITApKTtpZighKChpPXRoaXMucHRyLnBhcmVudC5yZXNvbHZlKHRoaXMucHRyLnJlcXVlc3ROYW1lLCEwKSkmJmkgaW5zdGFuY2VvZiBlLlJlZmxlY3QuTWVzc2FnZSkpdGhyb3cgRXJyb3IoXCJJbGxlZ2FsIHR5cGUgcmVmZXJlbmNlIGluIFwiK3RoaXMucHRyLnRvU3RyaW5nKCEwKStcIjogXCIrdGhpcy5wdHIucmVxdWVzdE5hbWUpO2lmKHRoaXMucHRyLnJlc29sdmVkUmVxdWVzdFR5cGU9aSwhKChpPXRoaXMucHRyLnBhcmVudC5yZXNvbHZlKHRoaXMucHRyLnJlc3BvbnNlTmFtZSwhMCkpJiZpIGluc3RhbmNlb2YgZS5SZWZsZWN0Lk1lc3NhZ2UpKXRocm93IEVycm9yKFwiSWxsZWdhbCB0eXBlIHJlZmVyZW5jZSBpbiBcIit0aGlzLnB0ci50b1N0cmluZyghMCkrXCI6IFwiK3RoaXMucHRyLnJlc3BvbnNlTmFtZSk7dGhpcy5wdHIucmVzb2x2ZWRSZXNwb25zZVR5cGU9aX1lbHNlIGlmKCEodGhpcy5wdHIgaW5zdGFuY2VvZiBlLlJlZmxlY3QuTWVzc2FnZS5PbmVPZnx8dGhpcy5wdHIgaW5zdGFuY2VvZiBlLlJlZmxlY3QuRXh0ZW5zaW9ufHx0aGlzLnB0ciBpbnN0YW5jZW9mIGUuUmVmbGVjdC5FbnVtLlZhbHVlKSl0aHJvdyBFcnJvcihcImlsbGVnYWwgb2JqZWN0IGluIG5hbWVzcGFjZTogXCIrdHlwZW9mIHRoaXMucHRyK1wiOiBcIit0aGlzLnB0cik7cmV0dXJuIHRoaXMucmVzZXQoKX0scy5idWlsZD1mdW5jdGlvbihlKXt2YXIgdCxuLGk7aWYodGhpcy5yZXNldCgpLHRoaXMucmVzb2x2ZWR8fCh0aGlzLnJlc29sdmVBbGwoKSx0aGlzLnJlc29sdmVkPSEwLHRoaXMucmVzdWx0PW51bGwpLG51bGw9PT10aGlzLnJlc3VsdCYmKHRoaXMucmVzdWx0PXRoaXMubnMuYnVpbGQoKSksIWUpcmV0dXJuIHRoaXMucmVzdWx0O2Zvcih0PVwic3RyaW5nXCI9PXR5cGVvZiBlP2Uuc3BsaXQoXCIuXCIpOmUsbj10aGlzLnJlc3VsdCxpPTA7aTx0Lmxlbmd0aDtpKyspe2lmKCFuW3RbaV1dKXtuPW51bGw7YnJlYWt9bj1uW3RbaV1dfXJldHVybiBufSxzLmxvb2t1cD1mdW5jdGlvbihlLHQpe3JldHVybiBlP3RoaXMubnMucmVzb2x2ZShlLHQpOnRoaXMubnN9LHMudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm5cIkJ1aWxkZXJcIn0sci5NZXNzYWdlPWZ1bmN0aW9uKCl7fSxyLkVudW09ZnVuY3Rpb24oKXt9LHIuU2VydmljZT1mdW5jdGlvbigpe30scn0ocixyLkxhbmcsci5SZWZsZWN0KSxyLk1hcD1mdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oZSl7dmFyIHQ9MDtyZXR1cm57bmV4dDpmdW5jdGlvbigpe3JldHVybiB0PGUubGVuZ3RoP3tkb25lOiExLHZhbHVlOmVbdCsrXX06e2RvbmU6ITB9fX19dmFyIGk9ZnVuY3Rpb24oZSxuKXt2YXIgaSxyLHMsbztpZighZS5tYXApdGhyb3cgRXJyb3IoXCJmaWVsZCBpcyBub3QgYSBtYXBcIik7aWYodGhpcy5maWVsZD1lLHRoaXMua2V5RWxlbT1uZXcgdC5FbGVtZW50KGUua2V5VHlwZSxudWxsLCEwLGUuc3ludGF4KSx0aGlzLnZhbHVlRWxlbT1uZXcgdC5FbGVtZW50KGUudHlwZSxlLnJlc29sdmVkVHlwZSwhMSxlLnN5bnRheCksdGhpcy5tYXA9e30sT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJzaXplXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBPYmplY3Qua2V5cyh0aGlzLm1hcCkubGVuZ3RofX0pLG4pZm9yKGk9T2JqZWN0LmtleXMobikscj0wO3I8aS5sZW5ndGg7cisrKXM9dGhpcy5rZXlFbGVtLnZhbHVlRnJvbVN0cmluZyhpW3JdKSxvPXRoaXMudmFsdWVFbGVtLnZlcmlmeVZhbHVlKG5baVtyXV0pLHRoaXMubWFwW3RoaXMua2V5RWxlbS52YWx1ZVRvU3RyaW5nKHMpXT17a2V5OnMsdmFsdWU6b319LHI9aS5wcm90b3R5cGU7cmV0dXJuIHIuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLm1hcD17fX0sci5kZWxldGU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5rZXlFbGVtLnZhbHVlVG9TdHJpbmcodGhpcy5rZXlFbGVtLnZlcmlmeVZhbHVlKGUpKSxuPXQgaW4gdGhpcy5tYXA7cmV0dXJuIGRlbGV0ZSB0aGlzLm1hcFt0XSxufSxyLmVudHJpZXM9ZnVuY3Rpb24oKXt2YXIgZSx0LGk9W10scj1PYmplY3Qua2V5cyh0aGlzLm1hcCk7Zm9yKHQ9MDt0PHIubGVuZ3RoO3QrKylpLnB1c2goWyhlPXRoaXMubWFwW3JbdF1dKS5rZXksZS52YWx1ZV0pO3JldHVybiBuKGkpfSxyLmtleXM9ZnVuY3Rpb24oKXt2YXIgZSx0PVtdLGk9T2JqZWN0LmtleXModGhpcy5tYXApO2ZvcihlPTA7ZTxpLmxlbmd0aDtlKyspdC5wdXNoKHRoaXMubWFwW2lbZV1dLmtleSk7cmV0dXJuIG4odCl9LHIudmFsdWVzPWZ1bmN0aW9uKCl7dmFyIGUsdD1bXSxpPU9iamVjdC5rZXlzKHRoaXMubWFwKTtmb3IoZT0wO2U8aS5sZW5ndGg7ZSsrKXQucHVzaCh0aGlzLm1hcFtpW2VdXS52YWx1ZSk7cmV0dXJuIG4odCl9LHIuZm9yRWFjaD1mdW5jdGlvbihlLHQpe3ZhciBuLGkscj1PYmplY3Qua2V5cyh0aGlzLm1hcCk7Zm9yKGk9MDtpPHIubGVuZ3RoO2krKyllLmNhbGwodCwobj10aGlzLm1hcFtyW2ldXSkudmFsdWUsbi5rZXksdGhpcyl9LHIuc2V0PWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5rZXlFbGVtLnZlcmlmeVZhbHVlKGUpLGk9dGhpcy52YWx1ZUVsZW0udmVyaWZ5VmFsdWUodCk7cmV0dXJuIHRoaXMubWFwW3RoaXMua2V5RWxlbS52YWx1ZVRvU3RyaW5nKG4pXT17a2V5Om4sdmFsdWU6aX0sdGhpc30sci5nZXQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5rZXlFbGVtLnZhbHVlVG9TdHJpbmcodGhpcy5rZXlFbGVtLnZlcmlmeVZhbHVlKGUpKTtyZXR1cm4gdCBpbiB0aGlzLm1hcD90aGlzLm1hcFt0XS52YWx1ZTp2b2lkIDB9LHIuaGFzPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmtleUVsZW0udmFsdWVUb1N0cmluZyh0aGlzLmtleUVsZW0udmVyaWZ5VmFsdWUoZSkpaW4gdGhpcy5tYXB9LGl9KDAsci5SZWZsZWN0KSxyLmxvYWRQcm90bz1mdW5jdGlvbihlLHQsbil7cmV0dXJuKFwic3RyaW5nXCI9PXR5cGVvZiB0fHx0JiZcInN0cmluZ1wiPT10eXBlb2YgdC5maWxlJiZcInN0cmluZ1wiPT10eXBlb2YgdC5yb290KSYmKG49dCx0PXZvaWQgMCksci5sb2FkSnNvbihyLkRvdFByb3RvLlBhcnNlci5wYXJzZShlKSx0LG4pfSxyLnByb3RvRnJvbVN0cmluZz1yLmxvYWRQcm90byxyLmxvYWRQcm90b0ZpbGU9ZnVuY3Rpb24oZSx0LG4pe2lmKHQmJlwib2JqZWN0XCI9PXR5cGVvZiB0PyhuPXQsdD1udWxsKTp0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0fHwodD1udWxsKSx0KXJldHVybiByLlV0aWwuZmV0Y2goXCJzdHJpbmdcIj09dHlwZW9mIGU/ZTplLnJvb3QrXCIvXCIrZS5maWxlLChmdW5jdGlvbihpKXtpZihudWxsIT09aSl0cnl7dChudWxsLHIubG9hZFByb3RvKGksbixlKSl9Y2F0Y2goZSl7dChlKX1lbHNlIHQoRXJyb3IoXCJGYWlsZWQgdG8gZmV0Y2ggZmlsZVwiKSl9KSk7dmFyIGk9ci5VdGlsLmZldGNoKFwib2JqZWN0XCI9PXR5cGVvZiBlP2Uucm9vdCtcIi9cIitlLmZpbGU6ZSk7cmV0dXJuIG51bGw9PT1pP251bGw6ci5sb2FkUHJvdG8oaSxuLGUpfSxyLnByb3RvRnJvbUZpbGU9ci5sb2FkUHJvdG9GaWxlLHIubmV3QnVpbGRlcj1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwPT09KGU9ZXx8e30pLmNvbnZlcnRGaWVsZHNUb0NhbWVsQ2FzZSYmKGUuY29udmVydEZpZWxkc1RvQ2FtZWxDYXNlPXIuY29udmVydEZpZWxkc1RvQ2FtZWxDYXNlKSx2b2lkIDA9PT1lLnBvcHVsYXRlQWNjZXNzb3JzJiYoZS5wb3B1bGF0ZUFjY2Vzc29ycz1yLnBvcHVsYXRlQWNjZXNzb3JzKSxuZXcgci5CdWlsZGVyKGUpfSxyLmxvYWRKc29uPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4oXCJzdHJpbmdcIj09dHlwZW9mIHR8fHQmJlwic3RyaW5nXCI9PXR5cGVvZiB0LmZpbGUmJlwic3RyaW5nXCI9PXR5cGVvZiB0LnJvb3QpJiYobj10LHQ9bnVsbCksdCYmXCJvYmplY3RcIj09dHlwZW9mIHR8fCh0PXIubmV3QnVpbGRlcigpKSxcInN0cmluZ1wiPT10eXBlb2YgZSYmKGU9SlNPTi5wYXJzZShlKSksdC5pbXBvcnQoZSxuKSx0LnJlc29sdmVBbGwoKSx0fSxyLmxvYWRKc29uRmlsZT1mdW5jdGlvbihlLHQsbil7aWYodCYmXCJvYmplY3RcIj09dHlwZW9mIHQ/KG49dCx0PW51bGwpOnQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIHR8fCh0PW51bGwpLHQpcmV0dXJuIHIuVXRpbC5mZXRjaChcInN0cmluZ1wiPT10eXBlb2YgZT9lOmUucm9vdCtcIi9cIitlLmZpbGUsKGZ1bmN0aW9uKGkpe2lmKG51bGwhPT1pKXRyeXt0KG51bGwsci5sb2FkSnNvbihKU09OLnBhcnNlKGkpLG4sZSkpfWNhdGNoKGUpe3QoZSl9ZWxzZSB0KEVycm9yKFwiRmFpbGVkIHRvIGZldGNoIGZpbGVcIikpfSkpO3ZhciBpPXIuVXRpbC5mZXRjaChcIm9iamVjdFwiPT10eXBlb2YgZT9lLnJvb3QrXCIvXCIrZS5maWxlOmUpO3JldHVybiBudWxsPT09aT9udWxsOnIubG9hZEpzb24oSlNPTi5wYXJzZShpKSxuLGUpfSxpPXVpLHIubG9hZFByb3RvKGksdm9pZCAwLFwiXCIpLmJ1aWxkKFwiTW9kdWxlc1wiKS5wcm9idWZ9KGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7dmFyIHQ9MDtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdDxlLmxlbmd0aD9lLmNoYXJDb2RlQXQodCsrKTpudWxsfX1mdW5jdGlvbiBuKCl7dmFyIGU9W10sdD1bXTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gMD09PWFyZ3VtZW50cy5sZW5ndGg/dC5qb2luKFwiXCIpK2EuYXBwbHkoU3RyaW5nLGUpOihlLmxlbmd0aCthcmd1bWVudHMubGVuZ3RoPjEwMjQmJih0LnB1c2goYS5hcHBseShTdHJpbmcsZSkpLGUubGVuZ3RoPTApLHZvaWQgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoZSxhcmd1bWVudHMpKX19ZnVuY3Rpb24gaShlLHQsbixpLHIpe3ZhciBzLG8sYT04KnItaS0xLHU9KDE8PGEpLTEsYz11Pj4xLGg9LTcsbD1uP3ItMTowLGQ9bj8tMToxLGY9ZVt0K2xdO2ZvcihsKz1kLHM9ZiYoMTw8LWgpLTEsZj4+PS1oLGgrPWE7aD4wO3M9MjU2KnMrZVt0K2xdLGwrPWQsaC09OCk7Zm9yKG89cyYoMTw8LWgpLTEscz4+PS1oLGgrPWk7aD4wO289MjU2Km8rZVt0K2xdLGwrPWQsaC09OCk7aWYoMD09PXMpcz0xLWM7ZWxzZXtpZihzPT09dSlyZXR1cm4gbz9OYU46MS8wKihmPy0xOjEpO28rPU1hdGgucG93KDIsaSkscy09Y31yZXR1cm4oZj8tMToxKSpvKk1hdGgucG93KDIscy1pKX1mdW5jdGlvbiByKGUsdCxuLGkscixzKXt2YXIgbyxhLHUsYz04KnMtci0xLGg9KDE8PGMpLTEsbD1oPj4xLGQ9MjM9PT1yP01hdGgucG93KDIsLTI0KS1NYXRoLnBvdygyLC03Nyk6MCxmPWk/MDpzLTEscD1pPzE6LTEsZz10PDB8fDA9PT10JiYxL3Q8MD8xOjA7Zm9yKHQ9TWF0aC5hYnModCksaXNOYU4odCl8fDEvMD09PXQ/KGE9aXNOYU4odCk/MTowLG89aCk6KG89TWF0aC5mbG9vcihNYXRoLmxvZyh0KS9NYXRoLkxOMiksdCoodT1NYXRoLnBvdygyLC1vKSk8MSYmKG8tLSx1Kj0yKSwodCs9bytsPj0xP2QvdTpkKk1hdGgucG93KDIsMS1sKSkqdT49MiYmKG8rKyx1Lz0yKSxvK2w+PWg/KGE9MCxvPWgpOm8rbD49MT8oYT0odCp1LTEpKk1hdGgucG93KDIsciksbys9bCk6KGE9dCpNYXRoLnBvdygyLGwtMSkqTWF0aC5wb3coMixyKSxvPTApKTtyPj04O2VbbitmXT0yNTUmYSxmKz1wLGEvPTI1NixyLT04KTtmb3Iobz1vPDxyfGEsYys9cjtjPjA7ZVtuK2ZdPTI1NSZvLGYrPXAsby89MjU2LGMtPTgpO2VbbitmLXBdfD0xMjgqZ312YXIgcyxvLGEsdSxjLGg9ZnVuY3Rpb24oZSx0LG4pe2lmKHZvaWQgMD09PWUmJihlPWguREVGQVVMVF9DQVBBQ0lUWSksdm9pZCAwPT09dCYmKHQ9aC5ERUZBVUxUX0VORElBTiksdm9pZCAwPT09biYmKG49aC5ERUZBVUxUX05PQVNTRVJUKSwhbil7aWYoKGV8PTApPDApdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgY2FwYWNpdHlcIik7dD0hIXQsbj0hIW59dGhpcy5idWZmZXI9MD09PWU/bzpuZXcgQXJyYXlCdWZmZXIoZSksdGhpcy52aWV3PTA9PT1lP251bGw6bmV3IFVpbnQ4QXJyYXkodGhpcy5idWZmZXIpLHRoaXMub2Zmc2V0PTAsdGhpcy5tYXJrZWRPZmZzZXQ9LTEsdGhpcy5saW1pdD1lLHRoaXMubGl0dGxlRW5kaWFuPXQsdGhpcy5ub0Fzc2VydD1ufTtyZXR1cm4gaC5WRVJTSU9OPVwiNS4wLjFcIixoLkxJVFRMRV9FTkRJQU49ITAsaC5CSUdfRU5ESUFOPSExLGguREVGQVVMVF9DQVBBQ0lUWT0xNixoLkRFRkFVTFRfRU5ESUFOPWguQklHX0VORElBTixoLkRFRkFVTFRfTk9BU1NFUlQ9ITEsaC5Mb25nPWV8fG51bGwsKHM9aC5wcm90b3R5cGUpLl9faXNCeXRlQnVmZmVyX18sT2JqZWN0LmRlZmluZVByb3BlcnR5KHMsXCJfX2lzQnl0ZUJ1ZmZlcl9fXCIse3ZhbHVlOiEwLGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiExfSksbz1uZXcgQXJyYXlCdWZmZXIoMCksYT1TdHJpbmcuZnJvbUNoYXJDb2RlLGguYWNjZXNzb3I9ZnVuY3Rpb24oKXtyZXR1cm4gVWludDhBcnJheX0saC5hbGxvY2F0ZT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIG5ldyBoKGUsdCxuKX0saC5jb25jYXQ9ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHIscyxvLGEsdSxjO2ZvcigoXCJib29sZWFuXCI9PXR5cGVvZiB0fHxcInN0cmluZ1wiIT10eXBlb2YgdCkmJihpPW4sbj10LHQ9dm9pZCAwKSxyPTAsbz0wLGE9ZS5sZW5ndGg7YT5vOysrbyloLmlzQnl0ZUJ1ZmZlcihlW29dKXx8KGVbb109aC53cmFwKGVbb10sdCkpLChzPWVbb10ubGltaXQtZVtvXS5vZmZzZXQpPjAmJihyKz1zKTtpZigwPT09cilyZXR1cm4gbmV3IGgoMCxuLGkpO2ZvcihjPW5ldyBoKHIsbixpKSxvPTA7YT5vOykocz0odT1lW28rK10pLmxpbWl0LXUub2Zmc2V0KTw9MHx8KGMudmlldy5zZXQodS52aWV3LnN1YmFycmF5KHUub2Zmc2V0LHUubGltaXQpLGMub2Zmc2V0KSxjLm9mZnNldCs9cyk7cmV0dXJuIGMubGltaXQ9Yy5vZmZzZXQsYy5vZmZzZXQ9MCxjfSxoLmlzQnl0ZUJ1ZmZlcj1mdW5jdGlvbihlKXtyZXR1cm4hMD09PShlJiZlLl9faXNCeXRlQnVmZmVyX18pfSxoLnR5cGU9ZnVuY3Rpb24oKXtyZXR1cm4gQXJyYXlCdWZmZXJ9LGgud3JhcD1mdW5jdGlvbihlLHQsbixpKXt2YXIgcixvO2lmKFwic3RyaW5nXCIhPXR5cGVvZiB0JiYoaT1uLG49dCx0PXZvaWQgMCksXCJzdHJpbmdcIj09dHlwZW9mIGUpc3dpdGNoKHZvaWQgMD09PXQmJih0PVwidXRmOFwiKSx0KXtjYXNlXCJiYXNlNjRcIjpyZXR1cm4gaC5mcm9tQmFzZTY0KGUsbik7Y2FzZVwiaGV4XCI6cmV0dXJuIGguZnJvbUhleChlLG4pO2Nhc2VcImJpbmFyeVwiOnJldHVybiBoLmZyb21CaW5hcnkoZSxuKTtjYXNlXCJ1dGY4XCI6cmV0dXJuIGguZnJvbVVURjgoZSxuKTtjYXNlXCJkZWJ1Z1wiOnJldHVybiBoLmZyb21EZWJ1ZyhlLG4pO2RlZmF1bHQ6dGhyb3cgRXJyb3IoXCJVbnN1cHBvcnRlZCBlbmNvZGluZzogXCIrdCl9aWYobnVsbD09PWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgYnVmZmVyXCIpO2lmKGguaXNCeXRlQnVmZmVyKGUpKXJldHVybihyPXMuY2xvbmUuY2FsbChlKSkubWFya2VkT2Zmc2V0PS0xLHI7aWYoZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpcj1uZXcgaCgwLG4saSksZS5sZW5ndGg+MCYmKHIuYnVmZmVyPWUuYnVmZmVyLHIub2Zmc2V0PWUuYnl0ZU9mZnNldCxyLmxpbWl0PWUuYnl0ZU9mZnNldCtlLmJ5dGVMZW5ndGgsci52aWV3PW5ldyBVaW50OEFycmF5KGUuYnVmZmVyKSk7ZWxzZSBpZihlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpcj1uZXcgaCgwLG4saSksZS5ieXRlTGVuZ3RoPjAmJihyLmJ1ZmZlcj1lLHIub2Zmc2V0PTAsci5saW1pdD1lLmJ5dGVMZW5ndGgsci52aWV3PWUuYnl0ZUxlbmd0aD4wP25ldyBVaW50OEFycmF5KGUpOm51bGwpO2Vsc2V7aWYoXCJbb2JqZWN0IEFycmF5XVwiIT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgYnVmZmVyXCIpO2Zvcigocj1uZXcgaChlLmxlbmd0aCxuLGkpKS5saW1pdD1lLmxlbmd0aCxvPTA7bzxlLmxlbmd0aDsrK28pci52aWV3W29dPWVbb119cmV0dXJuIHJ9LHMud3JpdGVCaXRTZXQ9ZnVuY3Rpb24oZSx0KXt2YXIgbixpLHIscyxvLGEsdT12b2lkIDA9PT10O2lmKHUmJih0PXRoaXMub2Zmc2V0KSwhdGhpcy5ub0Fzc2VydCl7aWYoIShlIGluc3RhbmNlb2YgQXJyYXkpKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgQml0U2V0OiBOb3QgYW4gYXJyYXlcIik7aWYoXCJudW1iZXJcIiE9dHlwZW9mIHR8fHQlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrdCtcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKCh0Pj4+PTApPDB8fHQrMD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIit0K1wiICgrMCkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9Zm9yKGk9dCxzPShyPWUubGVuZ3RoKT4+MyxvPTAsdCs9dGhpcy53cml0ZVZhcmludDMyKHIsdCk7cy0tOyluPTEmISFlW28rK118KDEmISFlW28rK10pPDwxfCgxJiEhZVtvKytdKTw8MnwoMSYhIWVbbysrXSk8PDN8KDEmISFlW28rK10pPDw0fCgxJiEhZVtvKytdKTw8NXwoMSYhIWVbbysrXSk8PDZ8KDEmISFlW28rK10pPDw3LHRoaXMud3JpdGVCeXRlKG4sdCsrKTtpZihyPm8pe2ZvcihhPTAsbj0wO3I+bzspbnw9KDEmISFlW28rK10pPDxhKys7dGhpcy53cml0ZUJ5dGUobix0KyspfXJldHVybiB1Pyh0aGlzLm9mZnNldD10LHRoaXMpOnQtaX0scy5yZWFkQml0U2V0PWZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyLHMsbyxhLHU9dm9pZCAwPT09ZTtmb3IodSYmKGU9dGhpcy5vZmZzZXQpLHI9KGk9KG49dGhpcy5yZWFkVmFyaW50MzIoZSkpLnZhbHVlKT4+MyxzPTAsbz1bXSxlKz1uLmxlbmd0aDtyLS07KXQ9dGhpcy5yZWFkQnl0ZShlKyspLG9bcysrXT0hISgxJnQpLG9bcysrXT0hISgyJnQpLG9bcysrXT0hISg0JnQpLG9bcysrXT0hISg4JnQpLG9bcysrXT0hISgxNiZ0KSxvW3MrK109ISEoMzImdCksb1tzKytdPSEhKDY0JnQpLG9bcysrXT0hISgxMjgmdCk7aWYoaT5zKWZvcihhPTAsdD10aGlzLnJlYWRCeXRlKGUrKyk7aT5zOylvW3MrK109ISEoMSZ0Pj5hKyspO3JldHVybiB1JiYodGhpcy5vZmZzZXQ9ZSksb30scy5yZWFkQnl0ZXM9ZnVuY3Rpb24oZSx0KXt2YXIgbixpPXZvaWQgMD09PXQ7aWYoaSYmKHQ9dGhpcy5vZmZzZXQpLCF0aGlzLm5vQXNzZXJ0KXtpZihcIm51bWJlclwiIT10eXBlb2YgdHx8dCUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiBcIit0K1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoKHQ+Pj49MCk8MHx8dCtlPnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiAwIDw9IFwiK3QrXCIgKCtcIitlK1wiKSA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX1yZXR1cm4gbj10aGlzLnNsaWNlKHQsdCtlKSxpJiYodGhpcy5vZmZzZXQrPWUpLG59LHMud3JpdGVCeXRlcz1zLmFwcGVuZCxzLndyaXRlSW50OD1mdW5jdGlvbihlLHQpe3ZhciBuLGk9dm9pZCAwPT09dDtpZihpJiYodD10aGlzLm9mZnNldCksIXRoaXMubm9Bc3NlcnQpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlfHxlJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCB2YWx1ZTogXCIrZStcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKGV8PTAsXCJudW1iZXJcIiE9dHlwZW9mIHR8fHQlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrdCtcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKCh0Pj4+PTApPDB8fHQrMD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIit0K1wiICgrMCkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9cmV0dXJuKHQrPTEpPihuPXRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpJiZ0aGlzLnJlc2l6ZSgobio9Mik+dD9uOnQpLHQtPTEsdGhpcy52aWV3W3RdPWUsaSYmKHRoaXMub2Zmc2V0Kz0xKSx0aGlzfSxzLndyaXRlQnl0ZT1zLndyaXRlSW50OCxzLnJlYWRJbnQ4PWZ1bmN0aW9uKGUpe3ZhciB0LG49dm9pZCAwPT09ZTtpZihuJiYoZT10aGlzLm9mZnNldCksIXRoaXMubm9Bc3NlcnQpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlfHxlJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK2UrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigoZT4+Pj0wKTwwfHxlKzE+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrZStcIiAoKzEpIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXJldHVybiAxMjg9PSgxMjgmKHQ9dGhpcy52aWV3W2VdKSkmJih0PS0oMjU1LXQrMSkpLG4mJih0aGlzLm9mZnNldCs9MSksdH0scy5yZWFkQnl0ZT1zLnJlYWRJbnQ4LHMud3JpdGVVaW50OD1mdW5jdGlvbihlLHQpe3ZhciBuLGk9dm9pZCAwPT09dDtpZihpJiYodD10aGlzLm9mZnNldCksIXRoaXMubm9Bc3NlcnQpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlfHxlJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCB2YWx1ZTogXCIrZStcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKGU+Pj49MCxcIm51bWJlclwiIT10eXBlb2YgdHx8dCUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiBcIit0K1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoKHQ+Pj49MCk8MHx8dCswPnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiAwIDw9IFwiK3QrXCIgKCswKSA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX1yZXR1cm4odCs9MSk+KG49dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCkmJnRoaXMucmVzaXplKChuKj0yKT50P246dCksdC09MSx0aGlzLnZpZXdbdF09ZSxpJiYodGhpcy5vZmZzZXQrPTEpLHRoaXN9LHMud3JpdGVVSW50OD1zLndyaXRlVWludDgscy5yZWFkVWludDg9ZnVuY3Rpb24oZSl7dmFyIHQsbj12b2lkIDA9PT1lO2lmKG4mJihlPXRoaXMub2Zmc2V0KSwhdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrZStcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKChlPj4+PTApPDB8fGUrMT50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIitlK1wiICgrMSkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9cmV0dXJuIHQ9dGhpcy52aWV3W2VdLG4mJih0aGlzLm9mZnNldCs9MSksdH0scy5yZWFkVUludDg9cy5yZWFkVWludDgscy53cml0ZUludDE2PWZ1bmN0aW9uKGUsdCl7dmFyIG4saT12b2lkIDA9PT10O2lmKGkmJih0PXRoaXMub2Zmc2V0KSwhdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIHZhbHVlOiBcIitlK1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoZXw9MCxcIm51bWJlclwiIT10eXBlb2YgdHx8dCUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiBcIit0K1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoKHQ+Pj49MCk8MHx8dCswPnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiAwIDw9IFwiK3QrXCIgKCswKSA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX1yZXR1cm4odCs9Mik+KG49dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCkmJnRoaXMucmVzaXplKChuKj0yKT50P246dCksdC09Mix0aGlzLmxpdHRsZUVuZGlhbj8odGhpcy52aWV3W3QrMV09KDY1MjgwJmUpPj4+OCx0aGlzLnZpZXdbdF09MjU1JmUpOih0aGlzLnZpZXdbdF09KDY1MjgwJmUpPj4+OCx0aGlzLnZpZXdbdCsxXT0yNTUmZSksaSYmKHRoaXMub2Zmc2V0Kz0yKSx0aGlzfSxzLndyaXRlU2hvcnQ9cy53cml0ZUludDE2LHMucmVhZEludDE2PWZ1bmN0aW9uKGUpe3ZhciB0LG49dm9pZCAwPT09ZTtpZihuJiYoZT10aGlzLm9mZnNldCksIXRoaXMubm9Bc3NlcnQpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlfHxlJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK2UrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigoZT4+Pj0wKTwwfHxlKzI+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrZStcIiAoKzIpIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXJldHVybiB0PTAsdGhpcy5saXR0bGVFbmRpYW4/KHQ9dGhpcy52aWV3W2VdLHR8PXRoaXMudmlld1tlKzFdPDw4KToodD10aGlzLnZpZXdbZV08PDgsdHw9dGhpcy52aWV3W2UrMV0pLDMyNzY4PT0oMzI3NjgmdCkmJih0PS0oNjU1MzUtdCsxKSksbiYmKHRoaXMub2Zmc2V0Kz0yKSx0fSxzLnJlYWRTaG9ydD1zLnJlYWRJbnQxNixzLndyaXRlVWludDE2PWZ1bmN0aW9uKGUsdCl7dmFyIG4saT12b2lkIDA9PT10O2lmKGkmJih0PXRoaXMub2Zmc2V0KSwhdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIHZhbHVlOiBcIitlK1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoZT4+Pj0wLFwibnVtYmVyXCIhPXR5cGVvZiB0fHx0JTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK3QrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigodD4+Pj0wKTwwfHx0KzA+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrdCtcIiAoKzApIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXJldHVybih0Kz0yKT4obj10aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKSYmdGhpcy5yZXNpemUoKG4qPTIpPnQ/bjp0KSx0LT0yLHRoaXMubGl0dGxlRW5kaWFuPyh0aGlzLnZpZXdbdCsxXT0oNjUyODAmZSk+Pj44LHRoaXMudmlld1t0XT0yNTUmZSk6KHRoaXMudmlld1t0XT0oNjUyODAmZSk+Pj44LHRoaXMudmlld1t0KzFdPTI1NSZlKSxpJiYodGhpcy5vZmZzZXQrPTIpLHRoaXN9LHMud3JpdGVVSW50MTY9cy53cml0ZVVpbnQxNixzLnJlYWRVaW50MTY9ZnVuY3Rpb24oZSl7dmFyIHQsbj12b2lkIDA9PT1lO2lmKG4mJihlPXRoaXMub2Zmc2V0KSwhdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrZStcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKChlPj4+PTApPDB8fGUrMj50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIitlK1wiICgrMikgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9cmV0dXJuIHQ9MCx0aGlzLmxpdHRsZUVuZGlhbj8odD10aGlzLnZpZXdbZV0sdHw9dGhpcy52aWV3W2UrMV08PDgpOih0PXRoaXMudmlld1tlXTw8OCx0fD10aGlzLnZpZXdbZSsxXSksbiYmKHRoaXMub2Zmc2V0Kz0yKSx0fSxzLnJlYWRVSW50MTY9cy5yZWFkVWludDE2LHMud3JpdGVJbnQzMj1mdW5jdGlvbihlLHQpe3ZhciBuLGk9dm9pZCAwPT09dDtpZihpJiYodD10aGlzLm9mZnNldCksIXRoaXMubm9Bc3NlcnQpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlfHxlJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCB2YWx1ZTogXCIrZStcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKGV8PTAsXCJudW1iZXJcIiE9dHlwZW9mIHR8fHQlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrdCtcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKCh0Pj4+PTApPDB8fHQrMD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIit0K1wiICgrMCkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9cmV0dXJuKHQrPTQpPihuPXRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpJiZ0aGlzLnJlc2l6ZSgobio9Mik+dD9uOnQpLHQtPTQsdGhpcy5saXR0bGVFbmRpYW4/KHRoaXMudmlld1t0KzNdPTI1NSZlPj4+MjQsdGhpcy52aWV3W3QrMl09MjU1JmU+Pj4xNix0aGlzLnZpZXdbdCsxXT0yNTUmZT4+PjgsdGhpcy52aWV3W3RdPTI1NSZlKToodGhpcy52aWV3W3RdPTI1NSZlPj4+MjQsdGhpcy52aWV3W3QrMV09MjU1JmU+Pj4xNix0aGlzLnZpZXdbdCsyXT0yNTUmZT4+PjgsdGhpcy52aWV3W3QrM109MjU1JmUpLGkmJih0aGlzLm9mZnNldCs9NCksdGhpc30scy53cml0ZUludD1zLndyaXRlSW50MzIscy5yZWFkSW50MzI9ZnVuY3Rpb24oZSl7dmFyIHQsbj12b2lkIDA9PT1lO2lmKG4mJihlPXRoaXMub2Zmc2V0KSwhdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrZStcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKChlPj4+PTApPDB8fGUrND50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIitlK1wiICgrNCkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9cmV0dXJuIHQ9MCx0aGlzLmxpdHRsZUVuZGlhbj8odD10aGlzLnZpZXdbZSsyXTw8MTYsdHw9dGhpcy52aWV3W2UrMV08PDgsdHw9dGhpcy52aWV3W2VdLHQrPXRoaXMudmlld1tlKzNdPDwyND4+PjApOih0PXRoaXMudmlld1tlKzFdPDwxNix0fD10aGlzLnZpZXdbZSsyXTw8OCx0fD10aGlzLnZpZXdbZSszXSx0Kz10aGlzLnZpZXdbZV08PDI0Pj4+MCksdHw9MCxuJiYodGhpcy5vZmZzZXQrPTQpLHR9LHMucmVhZEludD1zLnJlYWRJbnQzMixzLndyaXRlVWludDMyPWZ1bmN0aW9uKGUsdCl7dmFyIG4saT12b2lkIDA9PT10O2lmKGkmJih0PXRoaXMub2Zmc2V0KSwhdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIHZhbHVlOiBcIitlK1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoZT4+Pj0wLFwibnVtYmVyXCIhPXR5cGVvZiB0fHx0JTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK3QrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigodD4+Pj0wKTwwfHx0KzA+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrdCtcIiAoKzApIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXJldHVybih0Kz00KT4obj10aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKSYmdGhpcy5yZXNpemUoKG4qPTIpPnQ/bjp0KSx0LT00LHRoaXMubGl0dGxlRW5kaWFuPyh0aGlzLnZpZXdbdCszXT0yNTUmZT4+PjI0LHRoaXMudmlld1t0KzJdPTI1NSZlPj4+MTYsdGhpcy52aWV3W3QrMV09MjU1JmU+Pj44LHRoaXMudmlld1t0XT0yNTUmZSk6KHRoaXMudmlld1t0XT0yNTUmZT4+PjI0LHRoaXMudmlld1t0KzFdPTI1NSZlPj4+MTYsdGhpcy52aWV3W3QrMl09MjU1JmU+Pj44LHRoaXMudmlld1t0KzNdPTI1NSZlKSxpJiYodGhpcy5vZmZzZXQrPTQpLHRoaXN9LHMud3JpdGVVSW50MzI9cy53cml0ZVVpbnQzMixzLnJlYWRVaW50MzI9ZnVuY3Rpb24oZSl7dmFyIHQsbj12b2lkIDA9PT1lO2lmKG4mJihlPXRoaXMub2Zmc2V0KSwhdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrZStcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKChlPj4+PTApPDB8fGUrND50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIitlK1wiICgrNCkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9cmV0dXJuIHQ9MCx0aGlzLmxpdHRsZUVuZGlhbj8odD10aGlzLnZpZXdbZSsyXTw8MTYsdHw9dGhpcy52aWV3W2UrMV08PDgsdHw9dGhpcy52aWV3W2VdLHQrPXRoaXMudmlld1tlKzNdPDwyND4+PjApOih0PXRoaXMudmlld1tlKzFdPDwxNix0fD10aGlzLnZpZXdbZSsyXTw8OCx0fD10aGlzLnZpZXdbZSszXSx0Kz10aGlzLnZpZXdbZV08PDI0Pj4+MCksbiYmKHRoaXMub2Zmc2V0Kz00KSx0fSxzLnJlYWRVSW50MzI9cy5yZWFkVWludDMyLGUmJihzLndyaXRlSW50NjQ9ZnVuY3Rpb24odCxuKXt2YXIgaSxyLHMsbz12b2lkIDA9PT1uO2lmKG8mJihuPXRoaXMub2Zmc2V0KSwhdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIj09dHlwZW9mIHQpdD1lLmZyb21OdW1iZXIodCk7ZWxzZSBpZihcInN0cmluZ1wiPT10eXBlb2YgdCl0PWUuZnJvbVN0cmluZyh0KTtlbHNlIGlmKCEodCYmdCBpbnN0YW5jZW9mIGUpKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgdmFsdWU6IFwiK3QrXCIgKG5vdCBhbiBpbnRlZ2VyIG9yIExvbmcpXCIpO2lmKFwibnVtYmVyXCIhPXR5cGVvZiBufHxuJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK24rXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigobj4+Pj0wKTwwfHxuKzA+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrbitcIiAoKzApIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXJldHVyblwibnVtYmVyXCI9PXR5cGVvZiB0P3Q9ZS5mcm9tTnVtYmVyKHQpOlwic3RyaW5nXCI9PXR5cGVvZiB0JiYodD1lLmZyb21TdHJpbmcodCkpLChuKz04KT4oaT10aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKSYmdGhpcy5yZXNpemUoKGkqPTIpPm4/aTpuKSxuLT04LHI9dC5sb3cscz10LmhpZ2gsdGhpcy5saXR0bGVFbmRpYW4/KHRoaXMudmlld1tuKzNdPTI1NSZyPj4+MjQsdGhpcy52aWV3W24rMl09MjU1JnI+Pj4xNix0aGlzLnZpZXdbbisxXT0yNTUmcj4+PjgsdGhpcy52aWV3W25dPTI1NSZyLG4rPTQsdGhpcy52aWV3W24rM109MjU1JnM+Pj4yNCx0aGlzLnZpZXdbbisyXT0yNTUmcz4+PjE2LHRoaXMudmlld1tuKzFdPTI1NSZzPj4+OCx0aGlzLnZpZXdbbl09MjU1JnMpOih0aGlzLnZpZXdbbl09MjU1JnM+Pj4yNCx0aGlzLnZpZXdbbisxXT0yNTUmcz4+PjE2LHRoaXMudmlld1tuKzJdPTI1NSZzPj4+OCx0aGlzLnZpZXdbbiszXT0yNTUmcyxuKz00LHRoaXMudmlld1tuXT0yNTUmcj4+PjI0LHRoaXMudmlld1tuKzFdPTI1NSZyPj4+MTYsdGhpcy52aWV3W24rMl09MjU1JnI+Pj44LHRoaXMudmlld1tuKzNdPTI1NSZyKSxvJiYodGhpcy5vZmZzZXQrPTgpLHRoaXN9LHMud3JpdGVMb25nPXMud3JpdGVJbnQ2NCxzLnJlYWRJbnQ2ND1mdW5jdGlvbih0KXt2YXIgbixpLHIscz12b2lkIDA9PT10O2lmKHMmJih0PXRoaXMub2Zmc2V0KSwhdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIHR8fHQlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrdCtcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKCh0Pj4+PTApPDB8fHQrOD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIit0K1wiICgrOCkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9cmV0dXJuIG49MCxpPTAsdGhpcy5saXR0bGVFbmRpYW4/KG49dGhpcy52aWV3W3QrMl08PDE2LG58PXRoaXMudmlld1t0KzFdPDw4LG58PXRoaXMudmlld1t0XSxuKz10aGlzLnZpZXdbdCszXTw8MjQ+Pj4wLHQrPTQsaT10aGlzLnZpZXdbdCsyXTw8MTYsaXw9dGhpcy52aWV3W3QrMV08PDgsaXw9dGhpcy52aWV3W3RdLGkrPXRoaXMudmlld1t0KzNdPDwyND4+PjApOihpPXRoaXMudmlld1t0KzFdPDwxNixpfD10aGlzLnZpZXdbdCsyXTw8OCxpfD10aGlzLnZpZXdbdCszXSxpKz10aGlzLnZpZXdbdF08PDI0Pj4+MCx0Kz00LG49dGhpcy52aWV3W3QrMV08PDE2LG58PXRoaXMudmlld1t0KzJdPDw4LG58PXRoaXMudmlld1t0KzNdLG4rPXRoaXMudmlld1t0XTw8MjQ+Pj4wKSxyPW5ldyBlKG4saSwhMSkscyYmKHRoaXMub2Zmc2V0Kz04KSxyfSxzLnJlYWRMb25nPXMucmVhZEludDY0LHMud3JpdGVVaW50NjQ9ZnVuY3Rpb24odCxuKXt2YXIgaSxyLHMsbz12b2lkIDA9PT1uO2lmKG8mJihuPXRoaXMub2Zmc2V0KSwhdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIj09dHlwZW9mIHQpdD1lLmZyb21OdW1iZXIodCk7ZWxzZSBpZihcInN0cmluZ1wiPT10eXBlb2YgdCl0PWUuZnJvbVN0cmluZyh0KTtlbHNlIGlmKCEodCYmdCBpbnN0YW5jZW9mIGUpKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgdmFsdWU6IFwiK3QrXCIgKG5vdCBhbiBpbnRlZ2VyIG9yIExvbmcpXCIpO2lmKFwibnVtYmVyXCIhPXR5cGVvZiBufHxuJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK24rXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigobj4+Pj0wKTwwfHxuKzA+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrbitcIiAoKzApIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXJldHVyblwibnVtYmVyXCI9PXR5cGVvZiB0P3Q9ZS5mcm9tTnVtYmVyKHQpOlwic3RyaW5nXCI9PXR5cGVvZiB0JiYodD1lLmZyb21TdHJpbmcodCkpLChuKz04KT4oaT10aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKSYmdGhpcy5yZXNpemUoKGkqPTIpPm4/aTpuKSxuLT04LHI9dC5sb3cscz10LmhpZ2gsdGhpcy5saXR0bGVFbmRpYW4/KHRoaXMudmlld1tuKzNdPTI1NSZyPj4+MjQsdGhpcy52aWV3W24rMl09MjU1JnI+Pj4xNix0aGlzLnZpZXdbbisxXT0yNTUmcj4+PjgsdGhpcy52aWV3W25dPTI1NSZyLG4rPTQsdGhpcy52aWV3W24rM109MjU1JnM+Pj4yNCx0aGlzLnZpZXdbbisyXT0yNTUmcz4+PjE2LHRoaXMudmlld1tuKzFdPTI1NSZzPj4+OCx0aGlzLnZpZXdbbl09MjU1JnMpOih0aGlzLnZpZXdbbl09MjU1JnM+Pj4yNCx0aGlzLnZpZXdbbisxXT0yNTUmcz4+PjE2LHRoaXMudmlld1tuKzJdPTI1NSZzPj4+OCx0aGlzLnZpZXdbbiszXT0yNTUmcyxuKz00LHRoaXMudmlld1tuXT0yNTUmcj4+PjI0LHRoaXMudmlld1tuKzFdPTI1NSZyPj4+MTYsdGhpcy52aWV3W24rMl09MjU1JnI+Pj44LHRoaXMudmlld1tuKzNdPTI1NSZyKSxvJiYodGhpcy5vZmZzZXQrPTgpLHRoaXN9LHMud3JpdGVVSW50NjQ9cy53cml0ZVVpbnQ2NCxzLnJlYWRVaW50NjQ9ZnVuY3Rpb24odCl7dmFyIG4saSxyLHM9dm9pZCAwPT09dDtpZihzJiYodD10aGlzLm9mZnNldCksIXRoaXMubm9Bc3NlcnQpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiB0fHx0JTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK3QrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigodD4+Pj0wKTwwfHx0Kzg+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrdCtcIiAoKzgpIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXJldHVybiBuPTAsaT0wLHRoaXMubGl0dGxlRW5kaWFuPyhuPXRoaXMudmlld1t0KzJdPDwxNixufD10aGlzLnZpZXdbdCsxXTw8OCxufD10aGlzLnZpZXdbdF0sbis9dGhpcy52aWV3W3QrM108PDI0Pj4+MCx0Kz00LGk9dGhpcy52aWV3W3QrMl08PDE2LGl8PXRoaXMudmlld1t0KzFdPDw4LGl8PXRoaXMudmlld1t0XSxpKz10aGlzLnZpZXdbdCszXTw8MjQ+Pj4wKTooaT10aGlzLnZpZXdbdCsxXTw8MTYsaXw9dGhpcy52aWV3W3QrMl08PDgsaXw9dGhpcy52aWV3W3QrM10saSs9dGhpcy52aWV3W3RdPDwyND4+PjAsdCs9NCxuPXRoaXMudmlld1t0KzFdPDwxNixufD10aGlzLnZpZXdbdCsyXTw8OCxufD10aGlzLnZpZXdbdCszXSxuKz10aGlzLnZpZXdbdF08PDI0Pj4+MCkscj1uZXcgZShuLGksITApLHMmJih0aGlzLm9mZnNldCs9OCkscn0scy5yZWFkVUludDY0PXMucmVhZFVpbnQ2NCkscy53cml0ZUZsb2F0MzI9ZnVuY3Rpb24oZSx0KXt2YXIgbixpPXZvaWQgMD09PXQ7aWYoaSYmKHQ9dGhpcy5vZmZzZXQpLCF0aGlzLm5vQXNzZXJ0KXtpZihcIm51bWJlclwiIT10eXBlb2YgZSl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIHZhbHVlOiBcIitlK1wiIChub3QgYSBudW1iZXIpXCIpO2lmKFwibnVtYmVyXCIhPXR5cGVvZiB0fHx0JTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK3QrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigodD4+Pj0wKTwwfHx0KzA+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrdCtcIiAoKzApIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXJldHVybih0Kz00KT4obj10aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKSYmdGhpcy5yZXNpemUoKG4qPTIpPnQ/bjp0KSx0LT00LHIodGhpcy52aWV3LGUsdCx0aGlzLmxpdHRsZUVuZGlhbiwyMyw0KSxpJiYodGhpcy5vZmZzZXQrPTQpLHRoaXN9LHMud3JpdGVGbG9hdD1zLndyaXRlRmxvYXQzMixzLnJlYWRGbG9hdDMyPWZ1bmN0aW9uKGUpe3ZhciB0LG49dm9pZCAwPT09ZTtpZihuJiYoZT10aGlzLm9mZnNldCksIXRoaXMubm9Bc3NlcnQpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlfHxlJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK2UrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigoZT4+Pj0wKTwwfHxlKzQ+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrZStcIiAoKzQpIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXJldHVybiB0PWkodGhpcy52aWV3LGUsdGhpcy5saXR0bGVFbmRpYW4sMjMsNCksbiYmKHRoaXMub2Zmc2V0Kz00KSx0fSxzLnJlYWRGbG9hdD1zLnJlYWRGbG9hdDMyLHMud3JpdGVGbG9hdDY0PWZ1bmN0aW9uKGUsdCl7dmFyIG4saT12b2lkIDA9PT10O2lmKGkmJih0PXRoaXMub2Zmc2V0KSwhdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGUpdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCB2YWx1ZTogXCIrZStcIiAobm90IGEgbnVtYmVyKVwiKTtpZihcIm51bWJlclwiIT10eXBlb2YgdHx8dCUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiBcIit0K1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoKHQ+Pj49MCk8MHx8dCswPnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiAwIDw9IFwiK3QrXCIgKCswKSA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX1yZXR1cm4odCs9OCk+KG49dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCkmJnRoaXMucmVzaXplKChuKj0yKT50P246dCksdC09OCxyKHRoaXMudmlldyxlLHQsdGhpcy5saXR0bGVFbmRpYW4sNTIsOCksaSYmKHRoaXMub2Zmc2V0Kz04KSx0aGlzfSxzLndyaXRlRG91YmxlPXMud3JpdGVGbG9hdDY0LHMucmVhZEZsb2F0NjQ9ZnVuY3Rpb24oZSl7dmFyIHQsbj12b2lkIDA9PT1lO2lmKG4mJihlPXRoaXMub2Zmc2V0KSwhdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrZStcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKChlPj4+PTApPDB8fGUrOD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIitlK1wiICgrOCkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9cmV0dXJuIHQ9aSh0aGlzLnZpZXcsZSx0aGlzLmxpdHRsZUVuZGlhbiw1Miw4KSxuJiYodGhpcy5vZmZzZXQrPTgpLHR9LHMucmVhZERvdWJsZT1zLnJlYWRGbG9hdDY0LGguTUFYX1ZBUklOVDMyX0JZVEVTPTUsaC5jYWxjdWxhdGVWYXJpbnQzMj1mdW5jdGlvbihlKXtyZXR1cm4oZT4+Pj0wKTwxMjg/MTplPDE2Mzg0PzI6MTw8MjE+ZT8zOjE8PDI4PmU/NDo1fSxoLnppZ1phZ0VuY29kZTMyPWZ1bmN0aW9uKGUpe3JldHVybigoZXw9MCk8PDFeZT4+MzEpPj4+MH0saC56aWdaYWdEZWNvZGUzMj1mdW5jdGlvbihlKXtyZXR1cm4gMHxlPj4+MV4tKDEmZSl9LHMud3JpdGVWYXJpbnQzMj1mdW5jdGlvbihlLHQpe3ZhciBuLGkscixzPXZvaWQgMD09PXQ7aWYocyYmKHQ9dGhpcy5vZmZzZXQpLCF0aGlzLm5vQXNzZXJ0KXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZSUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgdmFsdWU6IFwiK2UrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZihlfD0wLFwibnVtYmVyXCIhPXR5cGVvZiB0fHx0JTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK3QrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigodD4+Pj0wKTwwfHx0KzA+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrdCtcIiAoKzApIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfWZvcigodCs9aT1oLmNhbGN1bGF0ZVZhcmludDMyKGUpKT4ocj10aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKSYmdGhpcy5yZXNpemUoKHIqPTIpPnQ/cjp0KSx0LT1pLGU+Pj49MDtlPj0xMjg7KW49MTI4fDEyNyZlLHRoaXMudmlld1t0KytdPW4sZT4+Pj03O3JldHVybiB0aGlzLnZpZXdbdCsrXT1lLHM/KHRoaXMub2Zmc2V0PXQsdGhpcyk6aX0scy53cml0ZVZhcmludDMyWmlnWmFnPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMud3JpdGVWYXJpbnQzMihoLnppZ1phZ0VuY29kZTMyKGUpLHQpfSxzLnJlYWRWYXJpbnQzMj1mdW5jdGlvbihlKXt2YXIgdCxuLGkscixzPXZvaWQgMD09PWU7aWYocyYmKGU9dGhpcy5vZmZzZXQpLCF0aGlzLm5vQXNzZXJ0KXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZSUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiBcIitlK1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoKGU+Pj49MCk8MHx8ZSsxPnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiAwIDw9IFwiK2UrXCIgKCsxKSA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX1uPTAsaT0wO2Rve2lmKCF0aGlzLm5vQXNzZXJ0JiZlPnRoaXMubGltaXQpdGhyb3cocj1FcnJvcihcIlRydW5jYXRlZFwiKSkudHJ1bmNhdGVkPSEwLHI7dD10aGlzLnZpZXdbZSsrXSxuPDUmJihpfD0oMTI3JnQpPDw3Km4pLCsrbn13aGlsZSgwIT0oMTI4JnQpKTtyZXR1cm4gaXw9MCxzPyh0aGlzLm9mZnNldD1lLGkpOnt2YWx1ZTppLGxlbmd0aDpufX0scy5yZWFkVmFyaW50MzJaaWdaYWc9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5yZWFkVmFyaW50MzIoZSk7cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIHQ/dC52YWx1ZT1oLnppZ1phZ0RlY29kZTMyKHQudmFsdWUpOnQ9aC56aWdaYWdEZWNvZGUzMih0KSx0fSxlJiYoaC5NQVhfVkFSSU5UNjRfQllURVM9MTAsaC5jYWxjdWxhdGVWYXJpbnQ2ND1mdW5jdGlvbih0KXtcIm51bWJlclwiPT10eXBlb2YgdD90PWUuZnJvbU51bWJlcih0KTpcInN0cmluZ1wiPT10eXBlb2YgdCYmKHQ9ZS5mcm9tU3RyaW5nKHQpKTt2YXIgbj10LnRvSW50KCk+Pj4wLGk9dC5zaGlmdFJpZ2h0VW5zaWduZWQoMjgpLnRvSW50KCk+Pj4wLHI9dC5zaGlmdFJpZ2h0VW5zaWduZWQoNTYpLnRvSW50KCk+Pj4wO3JldHVybiAwPT1yPzA9PWk/bjwxNjM4ND9uPDEyOD8xOjI6MTw8MjE+bj8zOjQ6aTwxNjM4ND9pPDEyOD81OjY6MTw8MjE+aT83Ojg6cjwxMjg/OToxMH0saC56aWdaYWdFbmNvZGU2ND1mdW5jdGlvbih0KXtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgdD90PWUuZnJvbU51bWJlcih0LCExKTpcInN0cmluZ1wiPT10eXBlb2YgdD90PWUuZnJvbVN0cmluZyh0LCExKTohMSE9PXQudW5zaWduZWQmJih0PXQudG9TaWduZWQoKSksdC5zaGlmdExlZnQoMSkueG9yKHQuc2hpZnRSaWdodCg2MykpLnRvVW5zaWduZWQoKX0saC56aWdaYWdEZWNvZGU2ND1mdW5jdGlvbih0KXtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgdD90PWUuZnJvbU51bWJlcih0LCExKTpcInN0cmluZ1wiPT10eXBlb2YgdD90PWUuZnJvbVN0cmluZyh0LCExKTohMSE9PXQudW5zaWduZWQmJih0PXQudG9TaWduZWQoKSksdC5zaGlmdFJpZ2h0VW5zaWduZWQoMSkueG9yKHQuYW5kKGUuT05FKS50b1NpZ25lZCgpLm5lZ2F0ZSgpKS50b1NpZ25lZCgpfSxzLndyaXRlVmFyaW50NjQ9ZnVuY3Rpb24odCxuKXt2YXIgaSxyLHMsbyxhLHU9dm9pZCAwPT09bjtpZih1JiYobj10aGlzLm9mZnNldCksIXRoaXMubm9Bc3NlcnQpe2lmKFwibnVtYmVyXCI9PXR5cGVvZiB0KXQ9ZS5mcm9tTnVtYmVyKHQpO2Vsc2UgaWYoXCJzdHJpbmdcIj09dHlwZW9mIHQpdD1lLmZyb21TdHJpbmcodCk7ZWxzZSBpZighKHQmJnQgaW5zdGFuY2VvZiBlKSl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIHZhbHVlOiBcIit0K1wiIChub3QgYW4gaW50ZWdlciBvciBMb25nKVwiKTtpZihcIm51bWJlclwiIT10eXBlb2Ygbnx8biUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiBcIituK1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoKG4+Pj49MCk8MHx8biswPnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiAwIDw9IFwiK24rXCIgKCswKSA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX1zd2l0Y2goXCJudW1iZXJcIj09dHlwZW9mIHQ/dD1lLmZyb21OdW1iZXIodCwhMSk6XCJzdHJpbmdcIj09dHlwZW9mIHQ/dD1lLmZyb21TdHJpbmcodCwhMSk6ITEhPT10LnVuc2lnbmVkJiYodD10LnRvU2lnbmVkKCkpLGk9aC5jYWxjdWxhdGVWYXJpbnQ2NCh0KSxyPXQudG9JbnQoKT4+PjAscz10LnNoaWZ0UmlnaHRVbnNpZ25lZCgyOCkudG9JbnQoKT4+PjAsbz10LnNoaWZ0UmlnaHRVbnNpZ25lZCg1NikudG9JbnQoKT4+PjAsKG4rPWkpPihhPXRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpJiZ0aGlzLnJlc2l6ZSgoYSo9Mik+bj9hOm4pLG4tPWksaSl7Y2FzZSAxMDp0aGlzLnZpZXdbbis5XT0xJm8+Pj43O2Nhc2UgOTp0aGlzLnZpZXdbbis4XT05IT09aT8xMjh8bzoxMjcmbztjYXNlIDg6dGhpcy52aWV3W24rN109OCE9PWk/MTI4fHM+Pj4yMToxMjcmcz4+PjIxO2Nhc2UgNzp0aGlzLnZpZXdbbis2XT03IT09aT8xMjh8cz4+PjE0OjEyNyZzPj4+MTQ7Y2FzZSA2OnRoaXMudmlld1tuKzVdPTYhPT1pPzEyOHxzPj4+NzoxMjcmcz4+Pjc7Y2FzZSA1OnRoaXMudmlld1tuKzRdPTUhPT1pPzEyOHxzOjEyNyZzO2Nhc2UgNDp0aGlzLnZpZXdbbiszXT00IT09aT8xMjh8cj4+PjIxOjEyNyZyPj4+MjE7Y2FzZSAzOnRoaXMudmlld1tuKzJdPTMhPT1pPzEyOHxyPj4+MTQ6MTI3JnI+Pj4xNDtjYXNlIDI6dGhpcy52aWV3W24rMV09MiE9PWk/MTI4fHI+Pj43OjEyNyZyPj4+NztjYXNlIDE6dGhpcy52aWV3W25dPTEhPT1pPzEyOHxyOjEyNyZyfXJldHVybiB1Pyh0aGlzLm9mZnNldCs9aSx0aGlzKTppfSxzLndyaXRlVmFyaW50NjRaaWdaYWc9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy53cml0ZVZhcmludDY0KGguemlnWmFnRW5jb2RlNjQoZSksdCl9LHMucmVhZFZhcmludDY0PWZ1bmN0aW9uKHQpe3ZhciBuLGkscixzLG8sYSx1PXZvaWQgMD09PXQ7aWYodSYmKHQ9dGhpcy5vZmZzZXQpLCF0aGlzLm5vQXNzZXJ0KXtpZihcIm51bWJlclwiIT10eXBlb2YgdHx8dCUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiBcIit0K1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoKHQ+Pj49MCk8MHx8dCsxPnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiAwIDw9IFwiK3QrXCIgKCsxKSA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX1pZihuPXQsaT0wLHI9MCxzPTAsbz0wLGk9MTI3JihvPXRoaXMudmlld1t0KytdKSwxMjgmbyYmKGl8PSgxMjcmKG89dGhpcy52aWV3W3QrK10pKTw8NywoMTI4Jm98fHRoaXMubm9Bc3NlcnQmJnZvaWQgMD09PW8pJiYoaXw9KDEyNyYobz10aGlzLnZpZXdbdCsrXSkpPDwxNCwoMTI4Jm98fHRoaXMubm9Bc3NlcnQmJnZvaWQgMD09PW8pJiYoaXw9KDEyNyYobz10aGlzLnZpZXdbdCsrXSkpPDwyMSwoMTI4Jm98fHRoaXMubm9Bc3NlcnQmJnZvaWQgMD09PW8pJiYocj0xMjcmKG89dGhpcy52aWV3W3QrK10pLCgxMjgmb3x8dGhpcy5ub0Fzc2VydCYmdm9pZCAwPT09bykmJihyfD0oMTI3JihvPXRoaXMudmlld1t0KytdKSk8PDcsKDEyOCZvfHx0aGlzLm5vQXNzZXJ0JiZ2b2lkIDA9PT1vKSYmKHJ8PSgxMjcmKG89dGhpcy52aWV3W3QrK10pKTw8MTQsKDEyOCZvfHx0aGlzLm5vQXNzZXJ0JiZ2b2lkIDA9PT1vKSYmKHJ8PSgxMjcmKG89dGhpcy52aWV3W3QrK10pKTw8MjEsKDEyOCZvfHx0aGlzLm5vQXNzZXJ0JiZ2b2lkIDA9PT1vKSYmKHM9MTI3JihvPXRoaXMudmlld1t0KytdKSwoMTI4Jm98fHRoaXMubm9Bc3NlcnQmJnZvaWQgMD09PW8pJiYoc3w9KDEyNyYobz10aGlzLnZpZXdbdCsrXSkpPDw3LDEyOCZvfHx0aGlzLm5vQXNzZXJ0JiZ2b2lkIDA9PT1vKSkpKSkpKSkpKXRocm93IEVycm9yKFwiQnVmZmVyIG92ZXJydW5cIik7cmV0dXJuIGE9ZS5mcm9tQml0cyhpfHI8PDI4LHI+Pj40fHM8PDI0LCExKSx1Pyh0aGlzLm9mZnNldD10LGEpOnt2YWx1ZTphLGxlbmd0aDp0LW59fSxzLnJlYWRWYXJpbnQ2NFppZ1phZz1mdW5jdGlvbih0KXt2YXIgbj10aGlzLnJlYWRWYXJpbnQ2NCh0KTtyZXR1cm4gbiYmbi52YWx1ZSBpbnN0YW5jZW9mIGU/bi52YWx1ZT1oLnppZ1phZ0RlY29kZTY0KG4udmFsdWUpOm49aC56aWdaYWdEZWNvZGU2NChuKSxufSkscy53cml0ZUNTdHJpbmc9ZnVuY3Rpb24oZSxuKXt2YXIgaSxyLHMsbz12b2lkIDA9PT1uO2lmKG8mJihuPXRoaXMub2Zmc2V0KSxyPWUubGVuZ3RoLCF0aGlzLm5vQXNzZXJ0KXtpZihcInN0cmluZ1wiIT10eXBlb2YgZSl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIHN0cjogTm90IGEgc3RyaW5nXCIpO2ZvcihpPTA7cj5pOysraSlpZigwPT09ZS5jaGFyQ29kZUF0KGkpKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIHN0cjogQ29udGFpbnMgTlVMTC1jaGFyYWN0ZXJzXCIpO2lmKFwibnVtYmVyXCIhPXR5cGVvZiBufHxuJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK24rXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigobj4+Pj0wKTwwfHxuKzA+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrbitcIiAoKzApIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXJldHVybiByPWMuY2FsY3VsYXRlVVRGMTZhc1VURjgodChlKSlbMV0sbis9cisxLHM9dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCxuPnMmJnRoaXMucmVzaXplKChzKj0yKT5uP3M6biksbi09cisxLGMuZW5jb2RlVVRGMTZ0b1VURjgodChlKSxmdW5jdGlvbihlKXt0aGlzLnZpZXdbbisrXT1lfS5iaW5kKHRoaXMpKSx0aGlzLnZpZXdbbisrXT0wLG8/KHRoaXMub2Zmc2V0PW4sdGhpcyk6cn0scy5yZWFkQ1N0cmluZz1mdW5jdGlvbihlKXt2YXIgdCxpLHIscz12b2lkIDA9PT1lO2lmKHMmJihlPXRoaXMub2Zmc2V0KSwhdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrZStcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKChlPj4+PTApPDB8fGUrMT50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIitlK1wiICgrMSkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9cmV0dXJuIHQ9ZSxyPS0xLGMuZGVjb2RlVVRGOHRvVVRGMTYoZnVuY3Rpb24oKXtpZigwPT09cilyZXR1cm4gbnVsbDtpZihlPj10aGlzLmxpbWl0KXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIHJhbmdlOiBUcnVuY2F0ZWQgZGF0YSwgXCIrZStcIiA8IFwiK3RoaXMubGltaXQpO3JldHVybiAwPT09KHI9dGhpcy52aWV3W2UrK10pP251bGw6cn0uYmluZCh0aGlzKSxpPW4oKSwhMCkscz8odGhpcy5vZmZzZXQ9ZSxpKCkpOntzdHJpbmc6aSgpLGxlbmd0aDplLXR9fSxzLndyaXRlSVN0cmluZz1mdW5jdGlvbihlLG4pe3ZhciBpLHIscyxvPXZvaWQgMD09PW47aWYobyYmKG49dGhpcy5vZmZzZXQpLCF0aGlzLm5vQXNzZXJ0KXtpZihcInN0cmluZ1wiIT10eXBlb2YgZSl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIHN0cjogTm90IGEgc3RyaW5nXCIpO2lmKFwibnVtYmVyXCIhPXR5cGVvZiBufHxuJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK24rXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigobj4+Pj0wKTwwfHxuKzA+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrbitcIiAoKzApIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfWlmKHI9bixpPWMuY2FsY3VsYXRlVVRGMTZhc1VURjgodChlKSx0aGlzLm5vQXNzZXJ0KVsxXSxuKz00K2kscz10aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoLG4+cyYmdGhpcy5yZXNpemUoKHMqPTIpPm4/czpuKSxuLT00K2ksdGhpcy5saXR0bGVFbmRpYW4/KHRoaXMudmlld1tuKzNdPTI1NSZpPj4+MjQsdGhpcy52aWV3W24rMl09MjU1Jmk+Pj4xNix0aGlzLnZpZXdbbisxXT0yNTUmaT4+PjgsdGhpcy52aWV3W25dPTI1NSZpKToodGhpcy52aWV3W25dPTI1NSZpPj4+MjQsdGhpcy52aWV3W24rMV09MjU1Jmk+Pj4xNix0aGlzLnZpZXdbbisyXT0yNTUmaT4+PjgsdGhpcy52aWV3W24rM109MjU1JmkpLG4rPTQsYy5lbmNvZGVVVEYxNnRvVVRGOCh0KGUpLGZ1bmN0aW9uKGUpe3RoaXMudmlld1tuKytdPWV9LmJpbmQodGhpcykpLG4hPT1yKzQraSl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCByYW5nZTogVHJ1bmNhdGVkIGRhdGEsIFwiK24rXCIgPT0gXCIrKG4rNCtpKSk7cmV0dXJuIG8/KHRoaXMub2Zmc2V0PW4sdGhpcyk6bi1yfSxzLnJlYWRJU3RyaW5nPWZ1bmN0aW9uKGUpe3ZhciB0LG4saSxyPXZvaWQgMD09PWU7aWYociYmKGU9dGhpcy5vZmZzZXQpLCF0aGlzLm5vQXNzZXJ0KXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZSUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiBcIitlK1wiIChub3QgYW4gaW50ZWdlcilcIik7aWYoKGU+Pj49MCk8MHx8ZSs0PnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgb2Zmc2V0OiAwIDw9IFwiK2UrXCIgKCs0KSA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX1yZXR1cm4gdD1lLG49dGhpcy5yZWFkVWludDMyKGUpLGk9dGhpcy5yZWFkVVRGOFN0cmluZyhuLGguTUVUUklDU19CWVRFUyxlKz00KSxlKz1pLmxlbmd0aCxyPyh0aGlzLm9mZnNldD1lLGkuc3RyaW5nKTp7c3RyaW5nOmkuc3RyaW5nLGxlbmd0aDplLXR9fSxoLk1FVFJJQ1NfQ0hBUlM9XCJjXCIsaC5NRVRSSUNTX0JZVEVTPVwiYlwiLHMud3JpdGVVVEY4U3RyaW5nPWZ1bmN0aW9uKGUsbil7dmFyIGkscixzLG89dm9pZCAwPT09bjtpZihvJiYobj10aGlzLm9mZnNldCksIXRoaXMubm9Bc3NlcnQpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBufHxuJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK24rXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigobj4+Pj0wKTwwfHxuKzA+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrbitcIiAoKzApIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXJldHVybiByPW4saT1jLmNhbGN1bGF0ZVVURjE2YXNVVEY4KHQoZSkpWzFdLG4rPWkscz10aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoLG4+cyYmdGhpcy5yZXNpemUoKHMqPTIpPm4/czpuKSxuLT1pLGMuZW5jb2RlVVRGMTZ0b1VURjgodChlKSxmdW5jdGlvbihlKXt0aGlzLnZpZXdbbisrXT1lfS5iaW5kKHRoaXMpKSxvPyh0aGlzLm9mZnNldD1uLHRoaXMpOm4tcn0scy53cml0ZVN0cmluZz1zLndyaXRlVVRGOFN0cmluZyxoLmNhbGN1bGF0ZVVURjhDaGFycz1mdW5jdGlvbihlKXtyZXR1cm4gYy5jYWxjdWxhdGVVVEYxNmFzVVRGOCh0KGUpKVswXX0saC5jYWxjdWxhdGVVVEY4Qnl0ZXM9ZnVuY3Rpb24oZSl7cmV0dXJuIGMuY2FsY3VsYXRlVVRGMTZhc1VURjgodChlKSlbMV19LGguY2FsY3VsYXRlU3RyaW5nPWguY2FsY3VsYXRlVVRGOEJ5dGVzLHMucmVhZFVURjhTdHJpbmc9ZnVuY3Rpb24oZSx0LGkpe3ZhciByLHMsbyxhLHU7aWYoXCJudW1iZXJcIj09dHlwZW9mIHQmJihpPXQsdD12b2lkIDApLChyPXZvaWQgMD09PWkpJiYoaT10aGlzLm9mZnNldCksdm9pZCAwPT09dCYmKHQ9aC5NRVRSSUNTX0NIQVJTKSwhdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGxlbmd0aDogXCIrZStcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKGV8PTAsXCJudW1iZXJcIiE9dHlwZW9mIGl8fGklMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIraStcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKChpPj4+PTApPDB8fGkrMD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIitpK1wiICgrMCkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9aWYobz0wLGE9aSx0PT09aC5NRVRSSUNTX0NIQVJTKXtpZihzPW4oKSxjLmRlY29kZVVURjgoZnVuY3Rpb24oKXtyZXR1cm4gZT5vJiZpPHRoaXMubGltaXQ/dGhpcy52aWV3W2krK106bnVsbH0uYmluZCh0aGlzKSwoZnVuY3Rpb24oZSl7KytvLGMuVVRGOHRvVVRGMTYoZSxzKX0pKSxvIT09ZSl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCByYW5nZTogVHJ1bmNhdGVkIGRhdGEsIFwiK28rXCIgPT0gXCIrZSk7cmV0dXJuIHI/KHRoaXMub2Zmc2V0PWkscygpKTp7c3RyaW5nOnMoKSxsZW5ndGg6aS1hfX1pZih0PT09aC5NRVRSSUNTX0JZVEVTKXtpZighdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGl8fGklMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIraStcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKChpPj4+PTApPDB8fGkrZT50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIitpK1wiICgrXCIrZStcIikgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9aWYodT1pK2UsYy5kZWNvZGVVVEY4dG9VVEYxNihmdW5jdGlvbigpe3JldHVybiB1Pmk/dGhpcy52aWV3W2krK106bnVsbH0uYmluZCh0aGlzKSxzPW4oKSx0aGlzLm5vQXNzZXJ0KSxpIT09dSl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCByYW5nZTogVHJ1bmNhdGVkIGRhdGEsIFwiK2krXCIgPT0gXCIrdSk7cmV0dXJuIHI/KHRoaXMub2Zmc2V0PWkscygpKTp7c3RyaW5nOnMoKSxsZW5ndGg6aS1hfX10aHJvdyBUeXBlRXJyb3IoXCJVbnN1cHBvcnRlZCBtZXRyaWNzOiBcIit0KX0scy5yZWFkU3RyaW5nPXMucmVhZFVURjhTdHJpbmcscy53cml0ZVZTdHJpbmc9ZnVuY3Rpb24oZSxuKXt2YXIgaSxyLHMsbyxhPXZvaWQgMD09PW47aWYoYSYmKG49dGhpcy5vZmZzZXQpLCF0aGlzLm5vQXNzZXJ0KXtpZihcInN0cmluZ1wiIT10eXBlb2YgZSl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIHN0cjogTm90IGEgc3RyaW5nXCIpO2lmKFwibnVtYmVyXCIhPXR5cGVvZiBufHxuJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK24rXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigobj4+Pj0wKTwwfHxuKzA+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrbitcIiAoKzApIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfWlmKHM9bixpPWMuY2FsY3VsYXRlVVRGMTZhc1VURjgodChlKSx0aGlzLm5vQXNzZXJ0KVsxXSxyPWguY2FsY3VsYXRlVmFyaW50MzIoaSksbis9citpLG89dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCxuPm8mJnRoaXMucmVzaXplKChvKj0yKT5uP286biksbi09citpLG4rPXRoaXMud3JpdGVWYXJpbnQzMihpLG4pLGMuZW5jb2RlVVRGMTZ0b1VURjgodChlKSxmdW5jdGlvbihlKXt0aGlzLnZpZXdbbisrXT1lfS5iaW5kKHRoaXMpKSxuIT09cytpK3IpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgcmFuZ2U6IFRydW5jYXRlZCBkYXRhLCBcIituK1wiID09IFwiKyhuK2krcikpO3JldHVybiBhPyh0aGlzLm9mZnNldD1uLHRoaXMpOm4tc30scy5yZWFkVlN0cmluZz1mdW5jdGlvbihlKXt2YXIgdCxuLGkscj12b2lkIDA9PT1lO2lmKHImJihlPXRoaXMub2Zmc2V0KSwhdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrZStcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKChlPj4+PTApPDB8fGUrMT50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIitlK1wiICgrMSkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9cmV0dXJuIHQ9ZSxuPXRoaXMucmVhZFZhcmludDMyKGUpLGk9dGhpcy5yZWFkVVRGOFN0cmluZyhuLnZhbHVlLGguTUVUUklDU19CWVRFUyxlKz1uLmxlbmd0aCksZSs9aS5sZW5ndGgscj8odGhpcy5vZmZzZXQ9ZSxpLnN0cmluZyk6e3N0cmluZzppLnN0cmluZyxsZW5ndGg6ZS10fX0scy5hcHBlbmQ9ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIscztpZigoXCJudW1iZXJcIj09dHlwZW9mIHR8fFwic3RyaW5nXCIhPXR5cGVvZiB0KSYmKG49dCx0PXZvaWQgMCksKGk9dm9pZCAwPT09bikmJihuPXRoaXMub2Zmc2V0KSwhdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIG58fG4lMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogXCIrbitcIiAobm90IGFuIGludGVnZXIpXCIpO2lmKChuPj4+PTApPDB8fG4rMD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogMCA8PSBcIituK1wiICgrMCkgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9cmV0dXJuIGUgaW5zdGFuY2VvZiBofHwoZT1oLndyYXAoZSx0KSksKHI9ZS5saW1pdC1lLm9mZnNldCk8PTB8fCgobis9cik+KHM9dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCkmJnRoaXMucmVzaXplKChzKj0yKT5uP3M6biksbi09cix0aGlzLnZpZXcuc2V0KGUudmlldy5zdWJhcnJheShlLm9mZnNldCxlLmxpbWl0KSxuKSxlLm9mZnNldCs9cixpJiYodGhpcy5vZmZzZXQrPXIpKSx0aGlzfSxzLmFwcGVuZFRvPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuYXBwZW5kKHRoaXMsdCksdGhpc30scy5hc3NlcnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMubm9Bc3NlcnQ9IWUsdGhpc30scy5jYXBhY2l0eT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RofSxzLmNsZWFyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub2Zmc2V0PTAsdGhpcy5saW1pdD10aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoLHRoaXMubWFya2VkT2Zmc2V0PS0xLHRoaXN9LHMuY2xvbmU9ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IGgoMCx0aGlzLmxpdHRsZUVuZGlhbix0aGlzLm5vQXNzZXJ0KTtyZXR1cm4gZT8odC5idWZmZXI9bmV3IEFycmF5QnVmZmVyKHRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpLHQudmlldz1uZXcgVWludDhBcnJheSh0LmJ1ZmZlcikpOih0LmJ1ZmZlcj10aGlzLmJ1ZmZlcix0LnZpZXc9dGhpcy52aWV3KSx0Lm9mZnNldD10aGlzLm9mZnNldCx0Lm1hcmtlZE9mZnNldD10aGlzLm1hcmtlZE9mZnNldCx0LmxpbWl0PXRoaXMubGltaXQsdH0scy5jb21wYWN0PWZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyO2lmKHZvaWQgMD09PWUmJihlPXRoaXMub2Zmc2V0KSx2b2lkIDA9PT10JiYodD10aGlzLmxpbWl0KSwhdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGJlZ2luOiBOb3QgYW4gaW50ZWdlclwiKTtpZihlPj4+PTAsXCJudW1iZXJcIiE9dHlwZW9mIHR8fHQlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGVuZDogTm90IGFuIGludGVnZXJcIik7aWYodD4+Pj0wLGU8MHx8ZT50fHx0PnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgcmFuZ2U6IDAgPD0gXCIrZStcIiA8PSBcIit0K1wiIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXJldHVybiAwPT09ZSYmdD09PXRoaXMuYnVmZmVyLmJ5dGVMZW5ndGg/dGhpczowPT0obj10LWUpPyh0aGlzLmJ1ZmZlcj1vLHRoaXMudmlldz1udWxsLHRoaXMubWFya2VkT2Zmc2V0Pj0wJiYodGhpcy5tYXJrZWRPZmZzZXQtPWUpLHRoaXMub2Zmc2V0PTAsdGhpcy5saW1pdD0wLHRoaXMpOihpPW5ldyBBcnJheUJ1ZmZlcihuKSwocj1uZXcgVWludDhBcnJheShpKSkuc2V0KHRoaXMudmlldy5zdWJhcnJheShlLHQpKSx0aGlzLmJ1ZmZlcj1pLHRoaXMudmlldz1yLHRoaXMubWFya2VkT2Zmc2V0Pj0wJiYodGhpcy5tYXJrZWRPZmZzZXQtPWUpLHRoaXMub2Zmc2V0PTAsdGhpcy5saW1pdD1uLHRoaXMpfSxzLmNvcHk9ZnVuY3Rpb24oZSx0KXtpZih2b2lkIDA9PT1lJiYoZT10aGlzLm9mZnNldCksdm9pZCAwPT09dCYmKHQ9dGhpcy5saW1pdCksIXRoaXMubm9Bc3NlcnQpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlfHxlJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBiZWdpbjogTm90IGFuIGludGVnZXJcIik7aWYoZT4+Pj0wLFwibnVtYmVyXCIhPXR5cGVvZiB0fHx0JTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBlbmQ6IE5vdCBhbiBpbnRlZ2VyXCIpO2lmKHQ+Pj49MCxlPDB8fGU+dHx8dD50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIHJhbmdlOiAwIDw9IFwiK2UrXCIgPD0gXCIrdCtcIiA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX1pZihlPT09dClyZXR1cm4gbmV3IGgoMCx0aGlzLmxpdHRsZUVuZGlhbix0aGlzLm5vQXNzZXJ0KTt2YXIgbj10LWUsaT1uZXcgaChuLHRoaXMubGl0dGxlRW5kaWFuLHRoaXMubm9Bc3NlcnQpO3JldHVybiBpLm9mZnNldD0wLGkubGltaXQ9bixpLm1hcmtlZE9mZnNldD49MCYmKGkubWFya2VkT2Zmc2V0LT1lKSx0aGlzLmNvcHlUbyhpLDAsZSx0KSxpfSxzLmNvcHlUbz1mdW5jdGlvbihlLHQsbixpKXt2YXIgcixzLG87aWYoIXRoaXMubm9Bc3NlcnQmJiFoLmlzQnl0ZUJ1ZmZlcihlKSl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIHRhcmdldDogTm90IGEgQnl0ZUJ1ZmZlclwiKTtpZih0PShzPXZvaWQgMD09PXQpP2Uub2Zmc2V0OjB8dCxuPShyPXZvaWQgMD09PW4pP3RoaXMub2Zmc2V0OjB8bixpPXZvaWQgMD09PWk/dGhpcy5saW1pdDowfGksdDwwfHx0PmUuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgdGFyZ2V0IHJhbmdlOiAwIDw9IFwiK3QrXCIgPD0gXCIrZS5idWZmZXIuYnl0ZUxlbmd0aCk7aWYobjwwfHxpPnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgc291cmNlIHJhbmdlOiAwIDw9IFwiK24rXCIgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCk7cmV0dXJuIDA9PShvPWktbik/ZTooZS5lbnN1cmVDYXBhY2l0eSh0K28pLGUudmlldy5zZXQodGhpcy52aWV3LnN1YmFycmF5KG4saSksdCksciYmKHRoaXMub2Zmc2V0Kz1vKSxzJiYoZS5vZmZzZXQrPW8pLHRoaXMpfSxzLmVuc3VyZUNhcGFjaXR5PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuYnVmZmVyLmJ5dGVMZW5ndGg7cmV0dXJuIGU+dD90aGlzLnJlc2l6ZSgodCo9Mik+ZT90OmUpOnRoaXN9LHMuZmlsbD1mdW5jdGlvbihlLHQsbil7dmFyIGk9dm9pZCAwPT09dDtpZihpJiYodD10aGlzLm9mZnNldCksXCJzdHJpbmdcIj09dHlwZW9mIGUmJmUubGVuZ3RoPjAmJihlPWUuY2hhckNvZGVBdCgwKSksdm9pZCAwPT09dCYmKHQ9dGhpcy5vZmZzZXQpLHZvaWQgMD09PW4mJihuPXRoaXMubGltaXQpLCF0aGlzLm5vQXNzZXJ0KXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZSUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgdmFsdWU6IFwiK2UrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZihlfD0wLFwibnVtYmVyXCIhPXR5cGVvZiB0fHx0JTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBiZWdpbjogTm90IGFuIGludGVnZXJcIik7aWYodD4+Pj0wLFwibnVtYmVyXCIhPXR5cGVvZiBufHxuJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBlbmQ6IE5vdCBhbiBpbnRlZ2VyXCIpO2lmKG4+Pj49MCx0PDB8fHQ+bnx8bj50aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIHJhbmdlOiAwIDw9IFwiK3QrXCIgPD0gXCIrbitcIiA8PSBcIit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKX1pZih0Pj1uKXJldHVybiB0aGlzO2Zvcig7bj50Oyl0aGlzLnZpZXdbdCsrXT1lO3JldHVybiBpJiYodGhpcy5vZmZzZXQ9dCksdGhpc30scy5mbGlwPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGltaXQ9dGhpcy5vZmZzZXQsdGhpcy5vZmZzZXQ9MCx0aGlzfSxzLm1hcms9ZnVuY3Rpb24oZSl7aWYoZT12b2lkIDA9PT1lP3RoaXMub2Zmc2V0OmUsIXRoaXMubm9Bc3NlcnQpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlfHxlJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK2UrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigoZT4+Pj0wKTwwfHxlKzA+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrZStcIiAoKzApIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXJldHVybiB0aGlzLm1hcmtlZE9mZnNldD1lLHRoaXN9LHMub3JkZXI9ZnVuY3Rpb24oZSl7aWYoIXRoaXMubm9Bc3NlcnQmJlwiYm9vbGVhblwiIT10eXBlb2YgZSl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGxpdHRsZUVuZGlhbjogTm90IGEgYm9vbGVhblwiKTtyZXR1cm4gdGhpcy5saXR0bGVFbmRpYW49ISFlLHRoaXN9LHMuTEU9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMubGl0dGxlRW5kaWFuPXZvaWQgMD09PWV8fCEhZSx0aGlzfSxzLkJFPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmxpdHRsZUVuZGlhbj12b2lkIDAhPT1lJiYhZSx0aGlzfSxzLnByZXBlbmQ9ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLHIscyxvLGE7aWYoKFwibnVtYmVyXCI9PXR5cGVvZiB0fHxcInN0cmluZ1wiIT10eXBlb2YgdCkmJihuPXQsdD12b2lkIDApLChpPXZvaWQgMD09PW4pJiYobj10aGlzLm9mZnNldCksIXRoaXMubm9Bc3NlcnQpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBufHxuJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IFwiK24rXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigobj4+Pj0wKTwwfHxuKzA+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBvZmZzZXQ6IDAgPD0gXCIrbitcIiAoKzApIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXJldHVybiBlIGluc3RhbmNlb2YgaHx8KGU9aC53cmFwKGUsdCkpLChyPWUubGltaXQtZS5vZmZzZXQpPD0wfHwoKHM9ci1uKT4wPyhvPW5ldyBBcnJheUJ1ZmZlcih0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoK3MpLChhPW5ldyBVaW50OEFycmF5KG8pKS5zZXQodGhpcy52aWV3LnN1YmFycmF5KG4sdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCksciksdGhpcy5idWZmZXI9byx0aGlzLnZpZXc9YSx0aGlzLm9mZnNldCs9cyx0aGlzLm1hcmtlZE9mZnNldD49MCYmKHRoaXMubWFya2VkT2Zmc2V0Kz1zKSx0aGlzLmxpbWl0Kz1zLG4rPXMpOm5ldyBVaW50OEFycmF5KHRoaXMuYnVmZmVyKSx0aGlzLnZpZXcuc2V0KGUudmlldy5zdWJhcnJheShlLm9mZnNldCxlLmxpbWl0KSxuLXIpLGUub2Zmc2V0PWUubGltaXQsaSYmKHRoaXMub2Zmc2V0LT1yKSksdGhpc30scy5wcmVwZW5kVG89ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5wcmVwZW5kKHRoaXMsdCksdGhpc30scy5wcmludERlYnVnPWZ1bmN0aW9uKGUpe1wiZnVuY3Rpb25cIiE9dHlwZW9mIGUmJihlPWNvbnNvbGUubG9nLmJpbmQoY29uc29sZSkpLGUodGhpcy50b1N0cmluZygpK1wiXFxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxcblwiK3RoaXMudG9EZWJ1ZyghMCkpfSxzLnJlbWFpbmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxpbWl0LXRoaXMub2Zmc2V0fSxzLnJlc2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFya2VkT2Zmc2V0Pj0wPyh0aGlzLm9mZnNldD10aGlzLm1hcmtlZE9mZnNldCx0aGlzLm1hcmtlZE9mZnNldD0tMSk6dGhpcy5vZmZzZXQ9MCx0aGlzfSxzLnJlc2l6ZT1mdW5jdGlvbihlKXt2YXIgdCxuO2lmKCF0aGlzLm5vQXNzZXJ0KXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZSUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgY2FwYWNpdHk6IFwiK2UrXCIgKG5vdCBhbiBpbnRlZ2VyKVwiKTtpZigoZXw9MCk8MCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBjYXBhY2l0eTogMCA8PSBcIitlKX1yZXR1cm4gdGhpcy5idWZmZXIuYnl0ZUxlbmd0aDxlJiYodD1uZXcgQXJyYXlCdWZmZXIoZSksKG49bmV3IFVpbnQ4QXJyYXkodCkpLnNldCh0aGlzLnZpZXcpLHRoaXMuYnVmZmVyPXQsdGhpcy52aWV3PW4pLHRoaXN9LHMucmV2ZXJzZT1mdW5jdGlvbihlLHQpe2lmKHZvaWQgMD09PWUmJihlPXRoaXMub2Zmc2V0KSx2b2lkIDA9PT10JiYodD10aGlzLmxpbWl0KSwhdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGJlZ2luOiBOb3QgYW4gaW50ZWdlclwiKTtpZihlPj4+PTAsXCJudW1iZXJcIiE9dHlwZW9mIHR8fHQlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGVuZDogTm90IGFuIGludGVnZXJcIik7aWYodD4+Pj0wLGU8MHx8ZT50fHx0PnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgcmFuZ2U6IDAgPD0gXCIrZStcIiA8PSBcIit0K1wiIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXJldHVybiBlPT09dHx8QXJyYXkucHJvdG90eXBlLnJldmVyc2UuY2FsbCh0aGlzLnZpZXcuc3ViYXJyYXkoZSx0KSksdGhpc30scy5za2lwPWZ1bmN0aW9uKGUpe2lmKCF0aGlzLm5vQXNzZXJ0KXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZSUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgbGVuZ3RoOiBcIitlK1wiIChub3QgYW4gaW50ZWdlcilcIik7ZXw9MH12YXIgdD10aGlzLm9mZnNldCtlO2lmKCF0aGlzLm5vQXNzZXJ0JiYodDwwfHx0PnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpKXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIGxlbmd0aDogMCA8PSBcIit0aGlzLm9mZnNldCtcIiArIFwiK2UrXCIgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCk7cmV0dXJuIHRoaXMub2Zmc2V0PXQsdGhpc30scy5zbGljZT1mdW5jdGlvbihlLHQpe2lmKHZvaWQgMD09PWUmJihlPXRoaXMub2Zmc2V0KSx2b2lkIDA9PT10JiYodD10aGlzLmxpbWl0KSwhdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGUlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGJlZ2luOiBOb3QgYW4gaW50ZWdlclwiKTtpZihlPj4+PTAsXCJudW1iZXJcIiE9dHlwZW9mIHR8fHQlMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGVuZDogTm90IGFuIGludGVnZXJcIik7aWYodD4+Pj0wLGU8MHx8ZT50fHx0PnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgcmFuZ2U6IDAgPD0gXCIrZStcIiA8PSBcIit0K1wiIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXZhciBuPXRoaXMuY2xvbmUoKTtyZXR1cm4gbi5vZmZzZXQ9ZSxuLmxpbWl0PXQsbn0scy50b0J1ZmZlcj1mdW5jdGlvbihlKXt2YXIgdCxuPXRoaXMub2Zmc2V0LGk9dGhpcy5saW1pdDtpZighdGhpcy5ub0Fzc2VydCl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIG58fG4lMSE9MCl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIG9mZnNldDogTm90IGFuIGludGVnZXJcIik7aWYobj4+Pj0wLFwibnVtYmVyXCIhPXR5cGVvZiBpfHxpJTEhPTApdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBsaW1pdDogTm90IGFuIGludGVnZXJcIik7aWYoaT4+Pj0wLG48MHx8bj5pfHxpPnRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgUmFuZ2VFcnJvcihcIklsbGVnYWwgcmFuZ2U6IDAgPD0gXCIrbitcIiA8PSBcIitpK1wiIDw9IFwiK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgpfXJldHVybiBlfHwwIT09bnx8aSE9PXRoaXMuYnVmZmVyLmJ5dGVMZW5ndGg/bj09PWk/bzoodD1uZXcgQXJyYXlCdWZmZXIoaS1uKSxuZXcgVWludDhBcnJheSh0KS5zZXQobmV3IFVpbnQ4QXJyYXkodGhpcy5idWZmZXIpLnN1YmFycmF5KG4saSksMCksdCk6dGhpcy5idWZmZXJ9LHMudG9BcnJheUJ1ZmZlcj1zLnRvQnVmZmVyLHMudG9TdHJpbmc9ZnVuY3Rpb24oZSx0LG4pe2lmKHZvaWQgMD09PWUpcmV0dXJuXCJCeXRlQnVmZmVyQUIob2Zmc2V0PVwiK3RoaXMub2Zmc2V0K1wiLG1hcmtlZE9mZnNldD1cIit0aGlzLm1hcmtlZE9mZnNldCtcIixsaW1pdD1cIit0aGlzLmxpbWl0K1wiLGNhcGFjaXR5PVwiK3RoaXMuY2FwYWNpdHkoKStcIilcIjtzd2l0Y2goXCJudW1iZXJcIj09dHlwZW9mIGUmJihuPXQ9ZT1cInV0ZjhcIiksZSl7Y2FzZVwidXRmOFwiOnJldHVybiB0aGlzLnRvVVRGOCh0LG4pO2Nhc2VcImJhc2U2NFwiOnJldHVybiB0aGlzLnRvQmFzZTY0KHQsbik7Y2FzZVwiaGV4XCI6cmV0dXJuIHRoaXMudG9IZXgodCxuKTtjYXNlXCJiaW5hcnlcIjpyZXR1cm4gdGhpcy50b0JpbmFyeSh0LG4pO2Nhc2VcImRlYnVnXCI6cmV0dXJuIHRoaXMudG9EZWJ1ZygpO2Nhc2VcImNvbHVtbnNcIjpyZXR1cm4gdGhpcy50b0NvbHVtbnMoKTtkZWZhdWx0OnRocm93IEVycm9yKFwiVW5zdXBwb3J0ZWQgZW5jb2Rpbmc6IFwiK2UpfX0sdT1mdW5jdGlvbigpe3ZhciBlLHQsbj17fSxpPVs2NSw2Niw2Nyw2OCw2OSw3MCw3MSw3Miw3Myw3NCw3NSw3Niw3Nyw3OCw3OSw4MCw4MSw4Miw4Myw4NCw4NSw4Niw4Nyw4OCw4OSw5MCw5Nyw5OCw5OSwxMDAsMTAxLDEwMiwxMDMsMTA0LDEwNSwxMDYsMTA3LDEwOCwxMDksMTEwLDExMSwxMTIsMTEzLDExNCwxMTUsMTE2LDExNywxMTgsMTE5LDEyMCwxMjEsMTIyLDQ4LDQ5LDUwLDUxLDUyLDUzLDU0LDU1LDU2LDU3LDQzLDQ3XSxyPVtdO2ZvcihlPTAsdD1pLmxlbmd0aDt0PmU7KytlKXJbaVtlXV09ZTtyZXR1cm4gbi5lbmNvZGU9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG4scjtudWxsIT09KG49ZSgpKTspdChpWzYzJm4+PjJdKSxyPSgzJm4pPDw0LG51bGwhPT0obj1lKCkpPyh0KGlbNjMmKChyfD0xNSZuPj40KXwxNSZuPj40KV0pLHI9KDE1Jm4pPDwyLG51bGwhPT0obj1lKCkpPyh0KGlbNjMmKHJ8MyZuPj42KV0pLHQoaVs2MyZuXSkpOih0KGlbNjMmcl0pLHQoNjEpKSk6KHQoaVs2MyZyXSksdCg2MSksdCg2MSkpfSxuLmRlY29kZT1mdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oZSl7dGhyb3cgRXJyb3IoXCJJbGxlZ2FsIGNoYXJhY3RlciBjb2RlOiBcIitlKX1mb3IodmFyIGkscyxvO251bGwhPT0oaT1lKCkpOylpZih2b2lkIDA9PT0ocz1yW2ldKSYmbihpKSxudWxsIT09KGk9ZSgpKSYmKHZvaWQgMD09PShvPXJbaV0pJiZuKGkpLHQoczw8Mj4+PjB8KDQ4Jm8pPj40KSxudWxsIT09KGk9ZSgpKSkpe2lmKHZvaWQgMD09PShzPXJbaV0pKXtpZig2MT09PWkpYnJlYWs7bihpKX1pZih0KCgxNSZvKTw8ND4+PjB8KDYwJnMpPj4yKSxudWxsIT09KGk9ZSgpKSl7aWYodm9pZCAwPT09KG89cltpXSkpe2lmKDYxPT09aSlicmVhaztuKGkpfXQoKDMmcyk8PDY+Pj4wfG8pfX19LG4udGVzdD1mdW5jdGlvbihlKXtyZXR1cm4vXig/OltBLVphLXowLTkrXFwvXXs0fSkqKD86W0EtWmEtejAtOStcXC9dezJ9PT18W0EtWmEtejAtOStcXC9dezN9PSk/JC8udGVzdChlKX0sbn0oKSxzLnRvQmFzZTY0PWZ1bmN0aW9uKGUsdCl7aWYodm9pZCAwPT09ZSYmKGU9dGhpcy5vZmZzZXQpLHZvaWQgMD09PXQmJih0PXRoaXMubGltaXQpLHR8PTAsKGV8PTApPDB8fHQ+dGhpcy5jYXBhY2l0eXx8ZT50KXRocm93IFJhbmdlRXJyb3IoXCJiZWdpbiwgZW5kXCIpO3ZhciBpO3JldHVybiB1LmVuY29kZShmdW5jdGlvbigpe3JldHVybiB0PmU/dGhpcy52aWV3W2UrK106bnVsbH0uYmluZCh0aGlzKSxpPW4oKSksaSgpfSxoLmZyb21CYXNlNjQ9ZnVuY3Rpb24oZSxuKXtpZihcInN0cmluZ1wiIT10eXBlb2YgZSl0aHJvdyBUeXBlRXJyb3IoXCJzdHJcIik7dmFyIGk9bmV3IGgoZS5sZW5ndGgvNCozLG4pLHI9MDtyZXR1cm4gdS5kZWNvZGUodChlKSwoZnVuY3Rpb24oZSl7aS52aWV3W3IrK109ZX0pKSxpLmxpbWl0PXIsaX0saC5idG9hPWZ1bmN0aW9uKGUpe3JldHVybiBoLmZyb21CaW5hcnkoZSkudG9CYXNlNjQoKX0saC5hdG9iPWZ1bmN0aW9uKGUpe3JldHVybiBoLmZyb21CYXNlNjQoZSkudG9CaW5hcnkoKX0scy50b0JpbmFyeT1mdW5jdGlvbihlLHQpe2lmKHZvaWQgMD09PWUmJihlPXRoaXMub2Zmc2V0KSx2b2lkIDA9PT10JiYodD10aGlzLmxpbWl0KSx0fD0wLChlfD0wKTwwfHx0PnRoaXMuY2FwYWNpdHkoKXx8ZT50KXRocm93IFJhbmdlRXJyb3IoXCJiZWdpbiwgZW5kXCIpO2lmKGU9PT10KXJldHVyblwiXCI7Zm9yKHZhciBuPVtdLGk9W107dD5lOyluLnB1c2godGhpcy52aWV3W2UrK10pLG4ubGVuZ3RoPj0xMDI0JiYoaS5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLG4pKSxuPVtdKTtyZXR1cm4gaS5qb2luKFwiXCIpK1N0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLG4pfSxoLmZyb21CaW5hcnk9ZnVuY3Rpb24oZSx0KXtpZihcInN0cmluZ1wiIT10eXBlb2YgZSl0aHJvdyBUeXBlRXJyb3IoXCJzdHJcIik7Zm9yKHZhciBuLGk9MCxyPWUubGVuZ3RoLHM9bmV3IGgocix0KTtyPmk7KXtpZigobj1lLmNoYXJDb2RlQXQoaSkpPjI1NSl0aHJvdyBSYW5nZUVycm9yKFwiaWxsZWdhbCBjaGFyIGNvZGU6IFwiK24pO3Mudmlld1tpKytdPW59cmV0dXJuIHMubGltaXQ9cixzfSxzLnRvRGVidWc9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG49LTEsaT10aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoLHI9XCJcIixzPVwiXCIsbz1cIlwiO2k+bjspe2lmKC0xIT09biYmKHIrPSh0PXRoaXMudmlld1tuXSk8MTY/XCIwXCIrdC50b1N0cmluZygxNikudG9VcHBlckNhc2UoKTp0LnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpLGUmJihzKz10PjMyJiZ0PDEyNz9TdHJpbmcuZnJvbUNoYXJDb2RlKHQpOlwiLlwiKSksKytuLGUmJm4+MCYmbiUxNj09MCYmbiE9PWkpe2Zvcig7ci5sZW5ndGg8NTE7KXIrPVwiIFwiO28rPXIrcytcIlxcblwiLHI9cz1cIlwifXIrPW49PT10aGlzLm9mZnNldCYmbj09PXRoaXMubGltaXQ/bj09PXRoaXMubWFya2VkT2Zmc2V0P1wiIVwiOlwifFwiOm49PT10aGlzLm9mZnNldD9uPT09dGhpcy5tYXJrZWRPZmZzZXQ/XCJbXCI6XCI8XCI6bj09PXRoaXMubGltaXQ/bj09PXRoaXMubWFya2VkT2Zmc2V0P1wiXVwiOlwiPlwiOm49PT10aGlzLm1hcmtlZE9mZnNldD9cIidcIjplfHwwIT09biYmbiE9PWk/XCIgXCI6XCJcIn1pZihlJiZcIiBcIiE9PXIpe2Zvcig7ci5sZW5ndGg8NTE7KXIrPVwiIFwiO28rPXIrcytcIlxcblwifXJldHVybiBlP286cn0saC5mcm9tRGVidWc9ZnVuY3Rpb24oZSx0LG4pe2Zvcih2YXIgaSxyLHM9ZS5sZW5ndGgsbz1uZXcgaCgwfChzKzEpLzMsdCxuKSxhPTAsdT0wLGM9ITEsbD0hMSxkPSExLGY9ITEscD0hMTtzPmE7KXtzd2l0Y2goaT1lLmNoYXJBdChhKyspKXtjYXNlXCIhXCI6aWYoIW4pe2lmKGx8fGR8fGYpe3A9ITA7YnJlYWt9bD1kPWY9ITB9by5vZmZzZXQ9by5tYXJrZWRPZmZzZXQ9by5saW1pdD11LGM9ITE7YnJlYWs7Y2FzZVwifFwiOmlmKCFuKXtpZihsfHxmKXtwPSEwO2JyZWFrfWw9Zj0hMH1vLm9mZnNldD1vLmxpbWl0PXUsYz0hMTticmVhaztjYXNlXCJbXCI6aWYoIW4pe2lmKGx8fGQpe3A9ITA7YnJlYWt9bD1kPSEwfW8ub2Zmc2V0PW8ubWFya2VkT2Zmc2V0PXUsYz0hMTticmVhaztjYXNlXCI8XCI6aWYoIW4pe2lmKGwpe3A9ITA7YnJlYWt9bD0hMH1vLm9mZnNldD11LGM9ITE7YnJlYWs7Y2FzZVwiXVwiOmlmKCFuKXtpZihmfHxkKXtwPSEwO2JyZWFrfWY9ZD0hMH1vLmxpbWl0PW8ubWFya2VkT2Zmc2V0PXUsYz0hMTticmVhaztjYXNlXCI+XCI6aWYoIW4pe2lmKGYpe3A9ITA7YnJlYWt9Zj0hMH1vLmxpbWl0PXUsYz0hMTticmVhaztjYXNlXCInXCI6aWYoIW4pe2lmKGQpe3A9ITA7YnJlYWt9ZD0hMH1vLm1hcmtlZE9mZnNldD11LGM9ITE7YnJlYWs7Y2FzZVwiIFwiOmM9ITE7YnJlYWs7ZGVmYXVsdDppZighbiYmYyl7cD0hMDticmVha31pZihyPXBhcnNlSW50KGkrZS5jaGFyQXQoYSsrKSwxNiksIW4mJihpc05hTihyKXx8cjwwfHxyPjI1NSkpdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBzdHI6IE5vdCBhIGRlYnVnIGVuY29kZWQgc3RyaW5nXCIpO28udmlld1t1KytdPXIsYz0hMH1pZihwKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgc3RyOiBJbnZhbGlkIHN5bWJvbCBhdCBcIithKX1pZighbil7aWYoIWx8fCFmKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgc3RyOiBNaXNzaW5nIG9mZnNldCBvciBsaW1pdFwiKTtpZih1PG8uYnVmZmVyLmJ5dGVMZW5ndGgpdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBzdHI6IE5vdCBhIGRlYnVnIGVuY29kZWQgc3RyaW5nIChpcyBpdCBoZXg/KSBcIit1K1wiIDwgXCIrcyl9cmV0dXJuIG99LHMudG9IZXg9ZnVuY3Rpb24oZSx0KXtpZihlPXZvaWQgMD09PWU/dGhpcy5vZmZzZXQ6ZSx0PXZvaWQgMD09PXQ/dGhpcy5saW1pdDp0LCF0aGlzLm5vQXNzZXJ0KXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZSUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgYmVnaW46IE5vdCBhbiBpbnRlZ2VyXCIpO2lmKGU+Pj49MCxcIm51bWJlclwiIT10eXBlb2YgdHx8dCUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgZW5kOiBOb3QgYW4gaW50ZWdlclwiKTtpZih0Pj4+PTAsZTwwfHxlPnR8fHQ+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCByYW5nZTogMCA8PSBcIitlK1wiIDw9IFwiK3QrXCIgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9Zm9yKHZhciBuLGk9bmV3IEFycmF5KHQtZSk7dD5lOykobj10aGlzLnZpZXdbZSsrXSk8MTY/aS5wdXNoKFwiMFwiLG4udG9TdHJpbmcoMTYpKTppLnB1c2gobi50b1N0cmluZygxNikpO3JldHVybiBpLmpvaW4oXCJcIil9LGguZnJvbUhleD1mdW5jdGlvbihlLHQsbil7dmFyIGkscixzLG8sYTtpZighbil7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGUpdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBzdHI6IE5vdCBhIHN0cmluZ1wiKTtpZihlLmxlbmd0aCUyIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgc3RyOiBMZW5ndGggbm90IGEgbXVsdGlwbGUgb2YgMlwiKX1mb3Iocj1lLmxlbmd0aCxzPW5ldyBoKDB8ci8yLHQpLG89MCxhPTA7cj5vO28rPTIpe2lmKGk9cGFyc2VJbnQoZS5zdWJzdHJpbmcobyxvKzIpLDE2KSwhbiYmKCFpc0Zpbml0ZShpKXx8aTwwfHxpPjI1NSkpdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBzdHI6IENvbnRhaW5zIG5vbi1oZXggY2hhcmFjdGVyc1wiKTtzLnZpZXdbYSsrXT1pfXJldHVybiBzLmxpbWl0PWEsc30sYz1mdW5jdGlvbigpe3ZhciBlPXtNQVhfQ09ERVBPSU5UOjExMTQxMTEsZW5jb2RlVVRGODpmdW5jdGlvbihlLHQpe3ZhciBuPW51bGw7Zm9yKFwibnVtYmVyXCI9PXR5cGVvZiBlJiYobj1lLGU9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0pO251bGwhPT1ufHxudWxsIT09KG49ZSgpKTspbjwxMjg/dCgxMjcmbik6bjwyMDQ4Pyh0KDE5MnwzMSZuPj42KSx0KDEyOHw2MyZuKSk6bjw2NTUzNj8odCgyMjR8MTUmbj4+MTIpLHQoMTI4fDYzJm4+PjYpLHQoMTI4fDYzJm4pKToodCgyNDB8NyZuPj4xOCksdCgxMjh8NjMmbj4+MTIpLHQoMTI4fDYzJm4+PjYpLHQoMTI4fDYzJm4pKSxuPW51bGx9LGRlY29kZVVURjg6ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG4saSxyLHMsbz1mdW5jdGlvbihlKXtlPWUuc2xpY2UoMCxlLmluZGV4T2YobnVsbCkpO3ZhciB0PUVycm9yKGUudG9TdHJpbmcoKSk7dGhyb3cgdC5uYW1lPVwiVHJ1bmNhdGVkRXJyb3JcIix0LmJ5dGVzPWUsdH07bnVsbCE9PShuPWUoKSk7KWlmKDA9PSgxMjgmbikpdChuKTtlbHNlIGlmKDE5Mj09KDIyNCZuKSludWxsPT09KGk9ZSgpKSYmbyhbbixpXSksdCgoMzEmbik8PDZ8NjMmaSk7ZWxzZSBpZigyMjQ9PSgyNDAmbikpKG51bGw9PT0oaT1lKCkpfHxudWxsPT09KHI9ZSgpKSkmJm8oW24saSxyXSksdCgoMTUmbik8PDEyfCg2MyZpKTw8Nnw2MyZyKTtlbHNle2lmKDI0MCE9KDI0OCZuKSl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCBzdGFydGluZyBieXRlOiBcIituKTsobnVsbD09PShpPWUoKSl8fG51bGw9PT0ocj1lKCkpfHxudWxsPT09KHM9ZSgpKSkmJm8oW24saSxyLHNdKSx0KCg3Jm4pPDwxOHwoNjMmaSk8PDEyfCg2MyZyKTw8Nnw2MyZzKX19LFVURjE2dG9VVEY4OmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuLGk9bnVsbDtudWxsIT09KG49bnVsbCE9PWk/aTplKCkpOyluPj01NTI5NiYmbjw9NTczNDMmJm51bGwhPT0oaT1lKCkpJiZpPj01NjMyMCYmaTw9NTczNDM/KHQoMTAyNCoobi01NTI5NikraS01NjMyMCs2NTUzNiksaT1udWxsKTp0KG4pO251bGwhPT1pJiZ0KGkpfSxVVEY4dG9VVEYxNjpmdW5jdGlvbihlLHQpe3ZhciBuPW51bGw7Zm9yKFwibnVtYmVyXCI9PXR5cGVvZiBlJiYobj1lLGU9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0pO251bGwhPT1ufHxudWxsIT09KG49ZSgpKTspbjw9NjU1MzU/dChuKToodCg1NTI5NisoKG4tPTY1NTM2KT4+MTApKSx0KG4lMTAyNCs1NjMyMCkpLG49bnVsbH0sZW5jb2RlVVRGMTZ0b1VURjg6ZnVuY3Rpb24odCxuKXtlLlVURjE2dG9VVEY4KHQsKGZ1bmN0aW9uKHQpe2UuZW5jb2RlVVRGOCh0LG4pfSkpfSxkZWNvZGVVVEY4dG9VVEYxNjpmdW5jdGlvbih0LG4pe2UuZGVjb2RlVVRGOCh0LChmdW5jdGlvbih0KXtlLlVURjh0b1VURjE2KHQsbil9KSl9LGNhbGN1bGF0ZUNvZGVQb2ludDpmdW5jdGlvbihlKXtyZXR1cm4gZTwxMjg/MTplPDIwNDg/MjplPDY1NTM2PzM6NH0sY2FsY3VsYXRlVVRGODpmdW5jdGlvbihlKXtmb3IodmFyIHQsbj0wO251bGwhPT0odD1lKCkpOyluKz10PDEyOD8xOnQ8MjA0OD8yOnQ8NjU1MzY/Mzo0O3JldHVybiBufSxjYWxjdWxhdGVVVEYxNmFzVVRGODpmdW5jdGlvbih0KXt2YXIgbj0wLGk9MDtyZXR1cm4gZS5VVEYxNnRvVVRGOCh0LChmdW5jdGlvbihlKXsrK24saSs9ZTwxMjg/MTplPDIwNDg/MjplPDY1NTM2PzM6NH0pKSxbbixpXX19O3JldHVybiBlfSgpLHMudG9VVEY4PWZ1bmN0aW9uKGUsdCl7aWYodm9pZCAwPT09ZSYmKGU9dGhpcy5vZmZzZXQpLHZvaWQgMD09PXQmJih0PXRoaXMubGltaXQpLCF0aGlzLm5vQXNzZXJ0KXtpZihcIm51bWJlclwiIT10eXBlb2YgZXx8ZSUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgYmVnaW46IE5vdCBhbiBpbnRlZ2VyXCIpO2lmKGU+Pj49MCxcIm51bWJlclwiIT10eXBlb2YgdHx8dCUxIT0wKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgZW5kOiBOb3QgYW4gaW50ZWdlclwiKTtpZih0Pj4+PTAsZTwwfHxlPnR8fHQ+dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl0aHJvdyBSYW5nZUVycm9yKFwiSWxsZWdhbCByYW5nZTogMCA8PSBcIitlK1wiIDw9IFwiK3QrXCIgPD0gXCIrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl9dmFyIGk7dHJ5e2MuZGVjb2RlVVRGOHRvVVRGMTYoZnVuY3Rpb24oKXtyZXR1cm4gdD5lP3RoaXMudmlld1tlKytdOm51bGx9LmJpbmQodGhpcyksaT1uKCkpfWNhdGNoKG4pe2lmKGUhPT10KXRocm93IFJhbmdlRXJyb3IoXCJJbGxlZ2FsIHJhbmdlOiBUcnVuY2F0ZWQgZGF0YSwgXCIrZStcIiAhPSBcIit0KX1yZXR1cm4gaSgpfSxoLmZyb21VVEY4PWZ1bmN0aW9uKGUsbixpKXtpZighaSYmXCJzdHJpbmdcIiE9dHlwZW9mIGUpdGhyb3cgVHlwZUVycm9yKFwiSWxsZWdhbCBzdHI6IE5vdCBhIHN0cmluZ1wiKTt2YXIgcj1uZXcgaChjLmNhbGN1bGF0ZVVURjE2YXNVVEY4KHQoZSksITApWzFdLG4saSkscz0wO3JldHVybiBjLmVuY29kZVVURjE2dG9VVEY4KHQoZSksKGZ1bmN0aW9uKGUpe3Iudmlld1tzKytdPWV9KSksci5saW1pdD1zLHJ9LGh9KGNpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQsbil7dGhpcy5sb3c9MHxlLHRoaXMuaGlnaD0wfHQsdGhpcy51bnNpZ25lZD0hIW59ZnVuY3Rpb24gdChlKXtyZXR1cm4hMD09PShlJiZlLl9faXNMb25nX18pfWZ1bmN0aW9uIG4oZSx0KXt2YXIgbixpLHM7cmV0dXJuIHQ/KHM9KGU+Pj49MCk+PTAmJmU8MjU2KSYmKGk9dVtlXSk/aToobj1yKGUsKDB8ZSk8MD8tMTowLCEwKSxzJiYodVtlXT1uKSxuKToocz0oZXw9MCk+PS0xMjgmJmU8MTI4KSYmKGk9YVtlXSk/aToobj1yKGUsZTwwPy0xOjAsITEpLHMmJihhW2VdPW4pLG4pfWZ1bmN0aW9uIGkoZSx0KXtpZihpc05hTihlKXx8IWlzRmluaXRlKGUpKXJldHVybiB0P2c6cDtpZih0KXtpZihlPDApcmV0dXJuIGc7aWYoZT49bClyZXR1cm4gbX1lbHNle2lmKC1kPj1lKXJldHVybiBJO2lmKGUrMT49ZClyZXR1cm4gRX1yZXR1cm4gZTwwP2koLWUsdCkubmVnKCk6cigwfGUlaCwwfGUvaCx0KX1mdW5jdGlvbiByKHQsbixpKXtyZXR1cm4gbmV3IGUodCxuLGkpfWZ1bmN0aW9uIHMoZSx0LG4pe3ZhciByLG8sYSx1LGgsbCxkO2lmKDA9PT1lLmxlbmd0aCl0aHJvdyBFcnJvcihcImVtcHR5IHN0cmluZ1wiKTtpZihcIk5hTlwiPT09ZXx8XCJJbmZpbml0eVwiPT09ZXx8XCIrSW5maW5pdHlcIj09PWV8fFwiLUluZmluaXR5XCI9PT1lKXJldHVybiBwO2lmKFwibnVtYmVyXCI9PXR5cGVvZiB0PyhuPXQsdD0hMSk6dD0hIXQsKG49bnx8MTApPDJ8fG4+MzYpdGhyb3cgUmFuZ2VFcnJvcihcInJhZGl4XCIpO2lmKChyPWUuaW5kZXhPZihcIi1cIikpPjApdGhyb3cgRXJyb3IoXCJpbnRlcmlvciBoeXBoZW5cIik7aWYoMD09PXIpcmV0dXJuIHMoZS5zdWJzdHJpbmcoMSksdCxuKS5uZWcoKTtmb3Iobz1pKGMobiw4KSksYT1wLHU9MDt1PGUubGVuZ3RoO3UrPTgpaD1NYXRoLm1pbig4LGUubGVuZ3RoLXUpLGw9cGFyc2VJbnQoZS5zdWJzdHJpbmcodSx1K2gpLG4pLGg8OD8oZD1pKGMobixoKSksYT1hLm11bChkKS5hZGQoaShsKSkpOmE9KGE9YS5tdWwobykpLmFkZChpKGwpKTtyZXR1cm4gYS51bnNpZ25lZD10LGF9ZnVuY3Rpb24gbyh0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIGU/dDpcIm51bWJlclwiPT10eXBlb2YgdD9pKHQpOlwic3RyaW5nXCI9PXR5cGVvZiB0P3ModCk6cih0Lmxvdyx0LmhpZ2gsdC51bnNpZ25lZCl9dmFyIGEsdSxjLGgsbCxkLGYscCxnLF8seSx2LEUsbSxJLFQ7cmV0dXJuIGUucHJvdG90eXBlLl9faXNMb25nX18sT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiX19pc0xvbmdfX1wiLHt2YWx1ZTohMCxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMX0pLGUuaXNMb25nPXQsYT17fSx1PXt9LGUuZnJvbUludD1uLGUuZnJvbU51bWJlcj1pLGUuZnJvbUJpdHM9cixjPU1hdGgucG93LGUuZnJvbVN0cmluZz1zLGUuZnJvbVZhbHVlPW8sZD0obD0oaD00Mjk0OTY3Mjk2KSpoKS8yLGY9bigxNjc3NzIxNikscD1uKDApLGUuWkVSTz1wLGc9bigwLCEwKSxlLlVaRVJPPWcsXz1uKDEpLGUuT05FPV8seT1uKDEsITApLGUuVU9ORT15LHY9bigtMSksZS5ORUdfT05FPXYsRT1yKC0xLDIxNDc0ODM2NDcsITEpLGUuTUFYX1ZBTFVFPUUsbT1yKC0xLC0xLCEwKSxlLk1BWF9VTlNJR05FRF9WQUxVRT1tLEk9cigwLC0yMTQ3NDgzNjQ4LCExKSxlLk1JTl9WQUxVRT1JLChUPWUucHJvdG90eXBlKS50b0ludD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnVuc2lnbmVkP3RoaXMubG93Pj4+MDp0aGlzLmxvd30sVC50b051bWJlcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnVuc2lnbmVkPyh0aGlzLmhpZ2g+Pj4wKSpoKyh0aGlzLmxvdz4+PjApOnRoaXMuaGlnaCpoKyh0aGlzLmxvdz4+PjApfSxULnRvU3RyaW5nPWZ1bmN0aW9uKGUpe3ZhciB0LG4scixzLG8sYSx1LGg7aWYoKGU9ZXx8MTApPDJ8fGU+MzYpdGhyb3cgUmFuZ2VFcnJvcihcInJhZGl4XCIpO2lmKHRoaXMuaXNaZXJvKCkpcmV0dXJuXCIwXCI7aWYodGhpcy5pc05lZ2F0aXZlKCkpcmV0dXJuIHRoaXMuZXEoSSk/KHQ9aShlKSxyPShuPXRoaXMuZGl2KHQpKS5tdWwodCkuc3ViKHRoaXMpLG4udG9TdHJpbmcoZSkrci50b0ludCgpLnRvU3RyaW5nKGUpKTpcIi1cIit0aGlzLm5lZygpLnRvU3RyaW5nKGUpO2ZvcihzPWkoYyhlLDYpLHRoaXMudW5zaWduZWQpLG89dGhpcyxhPVwiXCI7Oyl7aWYodT1vLmRpdihzKSxoPShvLnN1Yih1Lm11bChzKSkudG9JbnQoKT4+PjApLnRvU3RyaW5nKGUpLChvPXUpLmlzWmVybygpKXJldHVybiBoK2E7Zm9yKDtoLmxlbmd0aDw2OyloPVwiMFwiK2g7YT1cIlwiK2grYX19LFQuZ2V0SGlnaEJpdHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oaWdofSxULmdldEhpZ2hCaXRzVW5zaWduZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oaWdoPj4+MH0sVC5nZXRMb3dCaXRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubG93fSxULmdldExvd0JpdHNVbnNpZ25lZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxvdz4+PjB9LFQuZ2V0TnVtQml0c0Ficz1mdW5jdGlvbigpe3ZhciBlLHQ7aWYodGhpcy5pc05lZ2F0aXZlKCkpcmV0dXJuIHRoaXMuZXEoSSk/NjQ6dGhpcy5uZWcoKS5nZXROdW1CaXRzQWJzKCk7Zm9yKGU9MCE9dGhpcy5oaWdoP3RoaXMuaGlnaDp0aGlzLmxvdyx0PTMxO3Q+MCYmMD09KGUmMTw8dCk7dC0tKTtyZXR1cm4gMCE9dGhpcy5oaWdoP3QrMzM6dCsxfSxULmlzWmVybz1mdW5jdGlvbigpe3JldHVybiAwPT09dGhpcy5oaWdoJiYwPT09dGhpcy5sb3d9LFQuaXNOZWdhdGl2ZT1mdW5jdGlvbigpe3JldHVybiF0aGlzLnVuc2lnbmVkJiZ0aGlzLmhpZ2g8MH0sVC5pc1Bvc2l0aXZlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudW5zaWduZWR8fHRoaXMuaGlnaD49MH0sVC5pc09kZD1mdW5jdGlvbigpe3JldHVybiAxPT0oMSZ0aGlzLmxvdyl9LFQuaXNFdmVuPWZ1bmN0aW9uKCl7cmV0dXJuIDA9PSgxJnRoaXMubG93KX0sVC5lcXVhbHM9ZnVuY3Rpb24oZSl7cmV0dXJuIHQoZSl8fChlPW8oZSkpLCh0aGlzLnVuc2lnbmVkPT09ZS51bnNpZ25lZHx8dGhpcy5oaWdoPj4+MzEhPTF8fGUuaGlnaD4+PjMxIT0xKSYmdGhpcy5oaWdoPT09ZS5oaWdoJiZ0aGlzLmxvdz09PWUubG93fSxULmVxPVQuZXF1YWxzLFQubm90RXF1YWxzPWZ1bmN0aW9uKGUpe3JldHVybiF0aGlzLmVxKGUpfSxULm5lcT1ULm5vdEVxdWFscyxULmxlc3NUaGFuPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmNvbXAoZSk8MH0sVC5sdD1ULmxlc3NUaGFuLFQubGVzc1RoYW5PckVxdWFsPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmNvbXAoZSk8PTB9LFQubHRlPVQubGVzc1RoYW5PckVxdWFsLFQuZ3JlYXRlclRoYW49ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuY29tcChlKT4wfSxULmd0PVQuZ3JlYXRlclRoYW4sVC5ncmVhdGVyVGhhbk9yRXF1YWw9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuY29tcChlKT49MH0sVC5ndGU9VC5ncmVhdGVyVGhhbk9yRXF1YWwsVC5jb21wYXJlPWZ1bmN0aW9uKGUpe2lmKHQoZSl8fChlPW8oZSkpLHRoaXMuZXEoZSkpcmV0dXJuIDA7dmFyIG49dGhpcy5pc05lZ2F0aXZlKCksaT1lLmlzTmVnYXRpdmUoKTtyZXR1cm4gbiYmIWk/LTE6IW4mJmk/MTp0aGlzLnVuc2lnbmVkP2UuaGlnaD4+PjA+dGhpcy5oaWdoPj4+MHx8ZS5oaWdoPT09dGhpcy5oaWdoJiZlLmxvdz4+PjA+dGhpcy5sb3c+Pj4wPy0xOjE6dGhpcy5zdWIoZSkuaXNOZWdhdGl2ZSgpPy0xOjF9LFQuY29tcD1ULmNvbXBhcmUsVC5uZWdhdGU9ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy51bnNpZ25lZCYmdGhpcy5lcShJKT9JOnRoaXMubm90KCkuYWRkKF8pfSxULm5lZz1ULm5lZ2F0ZSxULmFkZD1mdW5jdGlvbihlKXt2YXIgbixpLHMsYSx1LGMsaCxsLGQsZixwO3JldHVybiB0KGUpfHwoZT1vKGUpKSxuPXRoaXMuaGlnaD4+PjE2LGk9NjU1MzUmdGhpcy5oaWdoLHM9dGhpcy5sb3c+Pj4xNixhPTY1NTM1JnRoaXMubG93LHU9ZS5oaWdoPj4+MTYsYz02NTUzNSZlLmhpZ2gsaD1lLmxvdz4+PjE2LGw9MCxkPTAsZj0wLHA9MCxmKz0ocCs9YSsoNjU1MzUmZS5sb3cpKT4+PjE2LGQrPShmKz1zK2gpPj4+MTYsbCs9KGQrPWkrYyk+Pj4xNixsKz1uK3UscigoZiY9NjU1MzUpPDwxNnwocCY9NjU1MzUpLChsJj02NTUzNSk8PDE2fChkJj02NTUzNSksdGhpcy51bnNpZ25lZCl9LFQuc3VidHJhY3Q9ZnVuY3Rpb24oZSl7cmV0dXJuIHQoZSl8fChlPW8oZSkpLHRoaXMuYWRkKGUubmVnKCkpfSxULnN1Yj1ULnN1YnRyYWN0LFQubXVsdGlwbHk9ZnVuY3Rpb24oZSl7dmFyIG4scyxhLHUsYyxoLGwsZCxnLF8seSx2O3JldHVybiB0aGlzLmlzWmVybygpP3A6KHQoZSl8fChlPW8oZSkpLGUuaXNaZXJvKCk/cDp0aGlzLmVxKEkpP2UuaXNPZGQoKT9JOnA6ZS5lcShJKT90aGlzLmlzT2RkKCk/STpwOnRoaXMuaXNOZWdhdGl2ZSgpP2UuaXNOZWdhdGl2ZSgpP3RoaXMubmVnKCkubXVsKGUubmVnKCkpOnRoaXMubmVnKCkubXVsKGUpLm5lZygpOmUuaXNOZWdhdGl2ZSgpP3RoaXMubXVsKGUubmVnKCkpLm5lZygpOnRoaXMubHQoZikmJmUubHQoZik/aSh0aGlzLnRvTnVtYmVyKCkqZS50b051bWJlcigpLHRoaXMudW5zaWduZWQpOihuPXRoaXMuaGlnaD4+PjE2LHM9NjU1MzUmdGhpcy5oaWdoLGE9dGhpcy5sb3c+Pj4xNix1PTY1NTM1JnRoaXMubG93LGM9ZS5oaWdoPj4+MTYsaD02NTUzNSZlLmhpZ2gsbD1lLmxvdz4+PjE2LGc9MCxfPTAseT0wLHY9MCx5Kz0odis9dSooZD02NTUzNSZlLmxvdykpPj4+MTYsXys9KHkrPWEqZCk+Pj4xNix5Jj02NTUzNSxfKz0oeSs9dSpsKT4+PjE2LGcrPShfKz1zKmQpPj4+MTYsXyY9NjU1MzUsZys9KF8rPWEqbCk+Pj4xNixfJj02NTUzNSxnKz0oXys9dSpoKT4+PjE2LGcrPW4qZCtzKmwrYSpoK3UqYyxyKCh5Jj02NTUzNSk8PDE2fCh2Jj02NTUzNSksKGcmPTY1NTM1KTw8MTZ8KF8mPTY1NTM1KSx0aGlzLnVuc2lnbmVkKSkpfSxULm11bD1ULm11bHRpcGx5LFQuZGl2aWRlPWZ1bmN0aW9uKGUpe3ZhciBuLHIscyxhLHUsaCxsO2lmKHQoZSl8fChlPW8oZSkpLGUuaXNaZXJvKCkpdGhyb3cgRXJyb3IoXCJkaXZpc2lvbiBieSB6ZXJvXCIpO2lmKHRoaXMuaXNaZXJvKCkpcmV0dXJuIHRoaXMudW5zaWduZWQ/ZzpwO2lmKHRoaXMudW5zaWduZWQpe2lmKGUudW5zaWduZWR8fChlPWUudG9VbnNpZ25lZCgpKSxlLmd0KHRoaXMpKXJldHVybiBnO2lmKGUuZ3QodGhpcy5zaHJ1KDEpKSlyZXR1cm4geTtzPWd9ZWxzZXtpZih0aGlzLmVxKEkpKXJldHVybiBlLmVxKF8pfHxlLmVxKHYpP0k6ZS5lcShJKT9fOihuPXRoaXMuc2hyKDEpLmRpdihlKS5zaGwoMSkpLmVxKHApP2UuaXNOZWdhdGl2ZSgpP186djoocj10aGlzLnN1YihlLm11bChuKSkscz1uLmFkZChyLmRpdihlKSkpO2lmKGUuZXEoSSkpcmV0dXJuIHRoaXMudW5zaWduZWQ/ZzpwO2lmKHRoaXMuaXNOZWdhdGl2ZSgpKXJldHVybiBlLmlzTmVnYXRpdmUoKT90aGlzLm5lZygpLmRpdihlLm5lZygpKTp0aGlzLm5lZygpLmRpdihlKS5uZWcoKTtpZihlLmlzTmVnYXRpdmUoKSlyZXR1cm4gdGhpcy5kaXYoZS5uZWcoKSkubmVnKCk7cz1wfWZvcihyPXRoaXM7ci5ndGUoZSk7KXtmb3Iobj1NYXRoLm1heCgxLE1hdGguZmxvb3Ioci50b051bWJlcigpL2UudG9OdW1iZXIoKSkpLHU9KGE9TWF0aC5jZWlsKE1hdGgubG9nKG4pL01hdGguTE4yKSk8PTQ4PzE6YygyLGEtNDgpLGw9KGg9aShuKSkubXVsKGUpO2wuaXNOZWdhdGl2ZSgpfHxsLmd0KHIpOylsPShoPWkobi09dSx0aGlzLnVuc2lnbmVkKSkubXVsKGUpO2guaXNaZXJvKCkmJihoPV8pLHM9cy5hZGQoaCkscj1yLnN1YihsKX1yZXR1cm4gc30sVC5kaXY9VC5kaXZpZGUsVC5tb2R1bG89ZnVuY3Rpb24oZSl7cmV0dXJuIHQoZSl8fChlPW8oZSkpLHRoaXMuc3ViKHRoaXMuZGl2KGUpLm11bChlKSl9LFQubW9kPVQubW9kdWxvLFQubm90PWZ1bmN0aW9uKCl7cmV0dXJuIHIofnRoaXMubG93LH50aGlzLmhpZ2gsdGhpcy51bnNpZ25lZCl9LFQuYW5kPWZ1bmN0aW9uKGUpe3JldHVybiB0KGUpfHwoZT1vKGUpKSxyKHRoaXMubG93JmUubG93LHRoaXMuaGlnaCZlLmhpZ2gsdGhpcy51bnNpZ25lZCl9LFQub3I9ZnVuY3Rpb24oZSl7cmV0dXJuIHQoZSl8fChlPW8oZSkpLHIodGhpcy5sb3d8ZS5sb3csdGhpcy5oaWdofGUuaGlnaCx0aGlzLnVuc2lnbmVkKX0sVC54b3I9ZnVuY3Rpb24oZSl7cmV0dXJuIHQoZSl8fChlPW8oZSkpLHIodGhpcy5sb3deZS5sb3csdGhpcy5oaWdoXmUuaGlnaCx0aGlzLnVuc2lnbmVkKX0sVC5zaGlmdExlZnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHQoZSkmJihlPWUudG9JbnQoKSksMD09KGUmPTYzKT90aGlzOmU8MzI/cih0aGlzLmxvdzw8ZSx0aGlzLmhpZ2g8PGV8dGhpcy5sb3c+Pj4zMi1lLHRoaXMudW5zaWduZWQpOnIoMCx0aGlzLmxvdzw8ZS0zMix0aGlzLnVuc2lnbmVkKX0sVC5zaGw9VC5zaGlmdExlZnQsVC5zaGlmdFJpZ2h0PWZ1bmN0aW9uKGUpe3JldHVybiB0KGUpJiYoZT1lLnRvSW50KCkpLDA9PShlJj02Myk/dGhpczplPDMyP3IodGhpcy5sb3c+Pj5lfHRoaXMuaGlnaDw8MzItZSx0aGlzLmhpZ2g+PmUsdGhpcy51bnNpZ25lZCk6cih0aGlzLmhpZ2g+PmUtMzIsdGhpcy5oaWdoPj0wPzA6LTEsdGhpcy51bnNpZ25lZCl9LFQuc2hyPVQuc2hpZnRSaWdodCxULnNoaWZ0UmlnaHRVbnNpZ25lZD1mdW5jdGlvbihlKXt2YXIgbjtyZXR1cm4gdChlKSYmKGU9ZS50b0ludCgpKSwwPT0oZSY9NjMpP3RoaXM6KG49dGhpcy5oaWdoLGU8MzI/cih0aGlzLmxvdz4+PmV8bjw8MzItZSxuPj4+ZSx0aGlzLnVuc2lnbmVkKTpyKDMyPT09ZT9uOm4+Pj5lLTMyLDAsdGhpcy51bnNpZ25lZCkpfSxULnNocnU9VC5zaGlmdFJpZ2h0VW5zaWduZWQsVC50b1NpZ25lZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnVuc2lnbmVkP3IodGhpcy5sb3csdGhpcy5oaWdoLCExKTp0aGlzfSxULnRvVW5zaWduZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy51bnNpZ25lZD90aGlzOnIodGhpcy5sb3csdGhpcy5oaWdoLCEwKX0sVC50b0J5dGVzPWZ1bmN0aW9uKGUpe3JldHVybiBlP3RoaXMudG9CeXRlc0xFKCk6dGhpcy50b0J5dGVzQkUoKX0sVC50b0J5dGVzTEU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmhpZ2gsdD10aGlzLmxvdztyZXR1cm5bMjU1JnQsMjU1JnQ+Pj44LDI1NSZ0Pj4+MTYsMjU1JnQ+Pj4yNCwyNTUmZSwyNTUmZT4+PjgsMjU1JmU+Pj4xNiwyNTUmZT4+PjI0XX0sVC50b0J5dGVzQkU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmhpZ2gsdD10aGlzLmxvdztyZXR1cm5bMjU1JmU+Pj4yNCwyNTUmZT4+PjE2LDI1NSZlPj4+OCwyNTUmZSwyNTUmdD4+PjI0LDI1NSZ0Pj4+MTYsMjU1JnQ+Pj44LDI1NSZ0XX0sZX0oKSksY2kpKTtmaS5nZXRNb2R1bGU9ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IGZpW2VdO3JldHVybiB0LmdldEFycmF5RGF0YT1mdW5jdGlvbigpe3ZhciBlPXQudG9BcnJheUJ1ZmZlcigpO3JldHVybiBlPSQoZSk/W10uc2xpY2UuY2FsbChuZXcgSW50OEFycmF5KGUpKTplfSx0fTt2YXIgcGksZ2k9XCJwZ01zZ1BcIixfaT1cImNoYXRNc2dcIix5aT1cInBjTXNnUFwiLHZpPXtQUklWQVRFOlwicHBNc2dTXCIsR1JPVVA6XCJwZ01zZ1NcIixDSEFUUk9PTTpcImNoYXRNc2dTXCJ9LEVpPVwiZGVsTXNnXCIsbWk9XCJqb2luQ2hybVwiLElpPVwiam9pbkNocm1SXCIsVGk9XCJleGl0Q2hybVwiLENpPVwic2V0S1ZcIixSaT1cImRlbEtWXCIsU2k9XCJzZXRLVlNcIixOaT1cImRlbEtWU1wiLE9pPVwicXJ5UmVsYXRpb25SXCIsd2k9XCJkZWxSZWxhdGlvblwiLGJpPVwic2V0U2VBdHRcIixNaT17UFJJVkFURTpcImNsZWFuUE1zZ1wiLEdST1VQOlwiY2xlYW5HTXNnXCIsQ1VTVE9NRVJfU0VSVklDRTpcImNsZWFuQ01zZ1wiLFNZU1RFTTpcImNsZWFuU01zZ1wifSxBaT1cInFyeVBNc2dcIixVaT1cInFyeUdNc2dcIixMaT1cInFyeUNITXNnXCIsUGk9XCJxcnlDTXNnXCIsRGk9XCJxcnlTTXNnXCIsVmk9KChoaT17fSlbXCJwcE1zZ1BcIl09ai5QUklWQVRFLGhpW2dpXT1qLkdST1VQLGhpW19pXT1qLkNIQVRST09NLGhpW3lpXT1qLkNVU1RPTUVSX1NFUlZJQ0UsaGkpLGtpPSgobGk9e30pW2ouUFJJVkFURV09QWksbGlbai5HUk9VUF09VWksbGlbai5DSEFUUk9PTV09TGksbGlbai5DVVNUT01FUl9TRVJWSUNFXT1QaSxsaVtqLlNZU1RFTV09RGksbGkpLHhpPSgoZGk9e30pW2ouUFJJVkFURV09TWkuUFJJVkFURSxkaVtqLkdST1VQXT1NaS5HUk9VUCxkaVtqLkNVU1RPTUVSX1NFUlZJQ0VdPU1pLkNVU1RPTUVSX1NFUlZJQ0UsZGlbai5TWVNURU1dPU1pLlNZU1RFTSxkaSksQmk9XCIxXCIsRmk9XCIwXCIsS2k9MSxxaT0yLFlpPTMsSGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuX2NvZGVjPVwid2Vic29ja2V0XCI9PT1lP2ZpOnJpLHRoaXMuX2Nvbm5lY3RUeXBlPWV9cmV0dXJuIGUucHJvdG90eXBlLmRlY29kZUJ5UEJOYW1lPWZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyPXRoaXMscz1lLG89KChpPXt9KVtidF09ci5fZm9ybWF0U3luY01lc3NhZ2VzLGlbd3RdPXIuX2Zvcm1hdFJlY2VpdmVkTWVzc2FnZSxpW050XT1yLl9mb3JtYXRTZW50TWVzc2FnZSxpW1Z0XT1yLl9mb3JtYXRIaXN0b3J5TWVzc2FnZXMsaVt4dF09ci5fZm9ybWF0Q29udmVyc2F0aW9uTGlzdCxpW0p0XT1yLl9mb3JtYXRDaGF0Um9vbUluZm9zLGlbWnRdPXIuX2Zvcm1hdFJUQ1VzZXJMaXN0LGlbb25dPXIuX2Zvcm1hdFJUQ0RhdGEsaVtUbl09ci5fZm9ybWF0Q2hhdFJvb21LVkxpc3QsaVtibl09ci5fZm9ybWF0VXNlclNldHRpbmcsaVtVbl09ci5fZm9ybWF0Q29udmVyc2F0aW9uU3RhdHVzLGlbQm5dPXIuX2Zvcm1hdEdycFJlYWRSZWNlaXB0UXJ5UmVzcCxpW09uXT1yLl9mb3JtYXRTZXRVc2VyU2V0dGluZ091dHB1dCxpW01uXT1yLl9mb3JtYXRVc2VyU2V0dGluZ05vdGlmaWNhdGlvbixpW0puXT1yLl9mb3JtYXRSVENSb29tS1ZMaXN0LGlbc25dPXIuX2Zvcm1hdFJUQ0F1aWRlbmNlSm9pblJvb21EYXRhLGlbWm5dPXIuX2Zvcm1hdFJUQ0pvaW5lZFVzZXJJbmZvLGkpW3RdO3RyeXtzPWUubGVuZ3RoPjAmJnIuX2NvZGVjW3RdLmRlY29kZShlKSxuZShzKSYmKHM9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0IGluIGUpbmUoZVt0XSkmJihlW3RdPW50KGVbdF0pKTtyZXR1cm4gZX0ocykpLGllKG8pJiYocz1vLmNhbGwodGhpcyxzLG4pKX1jYXRjaChuKXtwZS5lcnJvcihcIlBCIHBhcnNlIGVycm9yXFxuXCIsbixlLHQpfXJldHVybiBzfSxlLnByb3RvdHlwZS5fcmVhZEJ5dGVzPWZ1bmN0aW9uKGUpe3ZhciB0PWUub2Zmc2V0LG49ZS5idWZmZXIsaT1lLmxpbWl0O2lmKHQpdHJ5e3ZhciByPSQobik/bmV3IFVpbnQ4QXJyYXkobik6bjtyZXR1cm4gQ3QucmVhZFVURihyLnN1YmFycmF5KHQsaSkpfWNhdGNoKGUpe3BlLmluZm8oXCJyZWFkQnl0ZXMgZXJyb3JcXG5cIixlKX1yZXR1cm4gZX0sZS5wcm90b3R5cGUuX2Zvcm1hdEJ5dGVzPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX3JlYWRCeXRlcyhlKTt0cnl7dD1KU09OLnBhcnNlKHQpfWNhdGNoKGUpe3BlLmluZm8oXCJmb3JtYXRCeXRlcyBlcnJvclxcblwiLGUpfXJldHVybiB0fHxlfSxlLnByb3RvdHlwZS5fZm9ybWF0U3luY01lc3NhZ2VzPWZ1bmN0aW9uKGUsdCl7dD10fHx7fTt2YXIgbj10aGlzLGk9ZS5saXN0LHI9ZS5zeW5jVGltZSxzPWUuZmluaXNoZWQ7cmV0dXJuKHJlKHMpfHxudWxsPT09cykmJihlLmZpbmlzaGVkPSEwKSxlLnN5bmNUaW1lPW50KHIpLGUubGlzdD1odChpLChmdW5jdGlvbihlKXtyZXR1cm4gbi5fZm9ybWF0UmVjZWl2ZWRNZXNzYWdlKGUsdCl9KSksZX0sZS5wcm90b3R5cGUuX2Zvcm1hdFJlY2VpdmVkTWVzc2FnZT1mdW5jdGlvbihlLHQpe3ZhciBuPSh0PXR8fHt9KS5jdXJyZW50VXNlcklkLHI9dC5jb25uZWN0ZWRUaW1lLHM9ZS5jb250ZW50LG89ZS5mcm9tVXNlcklkLGE9ZS50eXBlLHU9ZS5ncm91cElkLGM9ZS5zdGF0dXMsaD1lLmRhdGFUaW1lLGw9ZS5jbGFzc25hbWUsZD1lLm1zZ0lkLGY9ZS5leHRyYUNvbnRlbnQscD1lLnB1c2hDb250ZW50LGc9ZS5wdXNoRXh0LF89ZS5jb25maWdGbGFnLHk9KGUuZGlyZWN0aW9ufHx5ZS5SRUNFSVZFKT09PXllLlNFTkQsdj1mdW5jdGlvbihlKXt2YXIgdD1pLlJFQUQ7cmV0dXJue2lzUGVyc2l0ZWQ6ISEoMTYmZSksaXNDb3VudGVkOiEhKDMyJmUpLGlzTWVudGlvbmVkOiEhKDY0JmUpLGRpc2FibGVOb3RpZmljYXRpb246ISEoNTEyJmUpLHJlY2VpdmVkU3RhdHVzOnQ9MiZlP2kuUkVUUklFVkVEOnQsY2FuSW5jbHVkZUV4cGFuc2lvbjohISgxMDI0JmUpfX0oYyksRT12LmlzUGVyc2l0ZWQsbT12LmlzQ291bnRlZCxJPXYuaXNNZW50aW9uZWQsVD12LmRpc2FibGVOb3RpZmljYXRpb24sQz12LnJlY2VpdmVkU3RhdHVzLFI9di5jYW5JbmNsdWRlRXhwYW5zaW9uLFM9W2ouR1JPVVAsai5DSEFUUk9PTSxqLlJUQ19ST09NXS5pbmRleE9mKGEpPi0xP3U6byxOPXk/bjpvLHc9bnQoaCksYj13PHIsTT1hPT09ai5DSEFUUk9PTSxBPXRoaXMuX2Zvcm1hdEJ5dGVzKHMpLFU9e307aWYoZyYmKFU9b3QoZy5wdXNoQ29uZmlncyxnLnB1c2hJZCkpLEEudXNlcil7dmFyIEw9QS51c2VyLFA9TC5wb3J0cmFpdCxEPUwucG9ydHJhaXRVcmksVj1QfHxEO1YmJihBLnVzZXIucG9ydHJhaXQ9QS51c2VyLnBvcnRyYWl0VXJpPVYpfXZhciBrLHg9TyhPKHt9LFUpLHtwdXNoVGl0bGU6bnVsbD09Zz92b2lkIDA6Zy50aXRsZSxwdXNoQ29udGVudDpwLHB1c2hEYXRhOnAsZGlzYWJsZVB1c2hUaXRsZTohIV8mJkJvb2xlYW4oNCZfKSxmb3JjZVNob3dEZXRhaWxDb250ZW50OiEhXyYmQm9vbGVhbig4Jl8pLHRlbXBsYXRlSWQ6bnVsbD09Zz92b2lkIDA6Zy50ZW1wbGF0ZUlkfSksQj15P3llLlNFTkQ6eWUuUkVDRUlWRTtyZXR1cm4gTSYmbz09PW4mJihCPXllLlNFTkQpLGYmJihrPXt9LGs9dnQoZikpLHtjb252ZXJzYXRpb25UeXBlOmEsdGFyZ2V0SWQ6UyxzZW5kZXJVc2VySWQ6TixtZXNzYWdlVHlwZTpsLG1lc3NhZ2VVSWQ6ZCxpc1BlcnNpdGVkOkUsaXNDb3VudGVkOm0saXNNZW50aW9uZWQ6SSxzZW50VGltZTp3LGlzT2ZmTGluZU1lc3NhZ2U6YixtZXNzYWdlRGlyZWN0aW9uOkIscmVjZWl2ZWRUaW1lOkV0LmdldFRpbWUoKSxkaXNhYmxlTm90aWZpY2F0aW9uOlQscmVjZWl2ZWRTdGF0dXM6QyxjYW5JbmNsdWRlRXhwYW5zaW9uOlIsY29udGVudDpBLGV4cGFuc2lvbjprLGNvbmZpZ0ZsYWc6XyxwdXNoQ29uZmlnOngsY2hhbm5lbElkOmUuYnVzQ2hhbm5lbHx8XCJcIn19LGUucHJvdG90eXBlLl9mb3JtYXRTZW50TWVzc2FnZT1mdW5jdGlvbihlLHQpe3ZhciBuLGk9ZS5jb250ZW50LHI9ZS5jbGFzc25hbWUscz1lLnNlc3Npb25JZCxvPWUubXNnSWQsYT1lLmV4dHJhQ29udGVudCx1PWUucHVzaEV4dCxjPWUucHVzaENvbnRlbnQsaD1lLmNvbmZpZ0ZsYWcsbD10LnNpZ25hbCxkPXQuY3VycmVudFVzZXJJZCxmPWwuZGF0ZSxwPWwudG9waWMsZz1sLnRhcmdldElkLF89ZnVuY3Rpb24oZSl7cmV0dXJue2lzUGVyc2l0ZWQ6ISEoMSZlKSxpc0NvdW50ZWQ6ISEoMiZlKSxkaXNhYmxlTm90aWZpY2F0aW9uOiEhKDMyJmUpLGNhbkluY2x1ZGVFeHBhbnNpb246ISEoNjQmZSl9fShzKSx5PV8uaXNQZXJzaXRlZCx2PV8uaXNDb3VudGVkLEU9Xy5kaXNhYmxlTm90aWZpY2F0aW9uLG09Xy5jYW5JbmNsdWRlRXhwYW5zaW9uLEk9VmlbcF18fGouUFJJVkFURSxUPWZ0KHZpLHApLEM9dGhpcy5fZm9ybWF0Qnl0ZXMoaSksUj1nO3I9PT1SZS5SRUNBTEwmJihJPUMuY29udmVyc2F0aW9uVHlwZXx8SSxSPUMudGFyZ2V0SWR8fGcpLGEmJihuPXt9LG49dnQoYSkpO3ZhciBTPXt9O3UmJihTPW90KHUucHVzaENvbmZpZ3MsdS5wdXNoSWQpKTt2YXIgTj1PKE8oe30sUykse3B1c2hUaXRsZTpudWxsPT11P3ZvaWQgMDp1LnRpdGxlLHB1c2hDb250ZW50OmMscHVzaERhdGE6YyxkaXNhYmxlUHVzaFRpdGxlOiEhaCYmQm9vbGVhbig0JmgpLGZvcmNlU2hvd0RldGFpbENvbnRlbnQ6ISFoJiZCb29sZWFuKDgmaCksdGVtcGxhdGVJZDpudWxsPT11P3ZvaWQgMDp1LnRlbXBsYXRlSWR9KTtyZXR1cm57Y29udmVyc2F0aW9uVHlwZTpJLHRhcmdldElkOlIsbWVzc2FnZVR5cGU6cixtZXNzYWdlVUlkOm8saXNQZXJzaXRlZDp5LGlzQ291bnRlZDp2LGlzU3RhdHVzTWVzc2FnZTpULHNlbmRlclVzZXJJZDpkLGNvbnRlbnQ6dGhpcy5fZm9ybWF0Qnl0ZXMoaSksc2VudFRpbWU6MWUzKmYscmVjZWl2ZWRUaW1lOkV0LmdldFRpbWUoKSxtZXNzYWdlRGlyZWN0aW9uOnllLlNFTkQsaXNPZmZMaW5lTWVzc2FnZTohMSxkaXNhYmxlTm90aWZpY2F0aW9uOkUsY2FuSW5jbHVkZUV4cGFuc2lvbjptLGV4cGFuc2lvbjpuLHB1c2hDb25maWc6TixjaGFubmVsSWQ6ZS5idXNDaGFubmVsfHxcIlwifX0sZS5wcm90b3R5cGUuX2Zvcm1hdEhpc3RvcnlNZXNzYWdlcz1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMsaT10LmNvbnZlcnNhdGlvbnx8e30scj1lLmxpc3Qscz1lLmhhc01zZyxvPWkudGFyZ2V0SWQsYT1udChlLnN5bmNUaW1lKSx1PVtdO3JldHVybiBjdChyLChmdW5jdGlvbihlKXt2YXIgaT1uLl9mb3JtYXRSZWNlaXZlZE1lc3NhZ2UoZSx0KTtpLnRhcmdldElkPW8sdS5wdXNoKGkpfSkse2lzUmV2ZXJzZTohMH0pLHtzeW5jVGltZTphLGxpc3Q6dSxoYXNNb3JlOiEhc319LGUucHJvdG90eXBlLl9mb3JtYXRDb252ZXJzYXRpb25MaXN0PWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcyxpPWUuaW5mbyxyPXQuYWZ0ZXJEZWNvZGV8fGZ1bmN0aW9uKCl7fTtyZXR1cm4oaT1odChpLChmdW5jdGlvbihlKXt2YXIgaT1lLm1zZyxzPWUudXNlcklkLG89ZS50eXBlLGE9ZS51bnJlYWRDb3VudCx1PWUuYnVzQ2hhbm5lbCxjPW51bGw7aSYmKChjPW4uX2Zvcm1hdFJlY2VpdmVkTWVzc2FnZShpLHQpKS50YXJnZXRJZD1zKTt2YXIgaD17dGFyZ2V0SWQ6cyxjb252ZXJzYXRpb25UeXBlOm8sdW5yZWFkTWVzc2FnZUNvdW50OmEsbGF0ZXN0TWVzc2FnZTpjLGNoYW5uZWxJZDp1fHxcIlwifTtyZXR1cm4gcihoKXx8aH0pKSl8fFtdfSxlLnByb3RvdHlwZS5fZm9ybWF0U2V0VXNlclNldHRpbmdPdXRwdXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGV9LGUucHJvdG90eXBlLl9mb3JtYXRDaGF0Um9vbUluZm9zPWZ1bmN0aW9uKGUpe3ZhciB0PWUudXNlclRvdGFsTnVtcyxuPWUudXNlckluZm9zO3JldHVybnt1c2VyQ291bnQ6dCx1c2VySW5mb3M6aHQobiwoZnVuY3Rpb24oZSl7dmFyIHQ9ZS5pZCxuPWUudGltZTtyZXR1cm57aWQ6dCx0aW1lOm50KG4pfX0pKX19LGUucHJvdG90eXBlLl9mb3JtYXRDaGF0Um9vbUtWTGlzdD1mdW5jdGlvbihlKXt2YXIgdD1lLmVudHJpZXMsbj1lLmJGdWxsVXBkYXRlLGk9ZS5zeW5jVGltZTtyZXR1cm57a3ZFbnRyaWVzOnQ9aHQodD10fHxbXSwoZnVuY3Rpb24oZSl7dmFyIHQ9ZS5rZXksbj1lLnZhbHVlLGk9ZS5zdGF0dXMscj1lLnRpbWVzdGFtcCxzPWUudWlkLG89ZnVuY3Rpb24oZSl7cmV0dXJue2lzQXV0b0RlbGV0ZTohISgxJmUpLGlzT3ZlcndyaXRlOiEhKDImZSksdHlwZTo0JmU/VWUuREVMRVRFOlVlLlVQREFURX19KGkpO3JldHVybntrZXk6dCx2YWx1ZTpuLGlzQXV0b0RlbGV0ZTpvLmlzQXV0b0RlbGV0ZSxpc092ZXJ3cml0ZTpvLmlzT3ZlcndyaXRlLHR5cGU6by50eXBlLHVzZXJJZDpzLHRpbWVzdGFtcDpudChyKX19KSksaXNGdWxsVXBkYXRlOm4sc3luY1RpbWU6aX19LGUucHJvdG90eXBlLl9mb3JtYXRVc2VyU2V0dGluZz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5pdGVtcyxpPWUudmVyc2lvbixyPXt9O3JldHVybiBjdChufHxbXSwoZnVuY3Rpb24oZSl7dmFyIG49ZS5rZXksaT1lLnZlcnNpb24scz1lLnZhbHVlO2UudmVyc2lvbj1udChpKSxlLnZhbHVlPXQuX3JlYWRCeXRlcyhzKSxcIlRhZ1wiPT09biYmZS50YWdzLmZvckVhY2goKGZ1bmN0aW9uKGUpe2UuY3JlYXRlZFRpbWU9bnQoZS5jcmVhdGVkVGltZSksZS50YWdOYW1lPWUubmFtZX0pKSxyW25dPWV9KSkse3NldHRpbmdzOnIsdmVyc2lvbjppfX0sZS5wcm90b3R5cGUuX2Zvcm1hdENvbnZlcnNhdGlvblN0YXR1cz1mdW5jdGlvbihlKXt2YXIgdD1lLnN0YXRlLG49W107cmV0dXJuIGN0KHQsKGZ1bmN0aW9uKGUpe3ZhciB0PWUudHlwZSxpPWUuY2hhbm5lbElkLHI9ZS50aW1lLHM9ZS5zdGF0ZUl0ZW0sbz1lLmJ1c0NoYW5uZWwsYT1OZS5DTE9TRSx1PSExLGM9W107Y3QocywoZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zZXNzaW9uU3RhdGVUeXBlLG49ZS52YWx1ZSxpPWUudGFncztzd2l0Y2godCl7Y2FzZSBLaTphPW49PT1CaT9OZS5PUEVOOk5lLkNMT1NFO2JyZWFrO2Nhc2UgcWk6dT1uPT09Qmk7YnJlYWs7Y2FzZSBZaTpjPWl9fSkpLG4ucHVzaCh7Y29udmVyc2F0aW9uVHlwZTp0LHR5cGU6dCx0YXJnZXRJZDppLG5vdGlmaWNhdGlvblN0YXR1czphLGlzVG9wOnUsdXBkYXRlZFRpbWU6bnQociksdGFnczpjLGNoYW5uZWxJZDpvfHxcIlwifSl9KSksbn0sZS5wcm90b3R5cGUuX2Zvcm1hdFJUQ1VzZXJMaXN0PWZ1bmN0aW9uKGUpe3ZhciB0PWUudXNlcnMsbj1lLnRva2VuLGk9ZS5zZXNzaW9uSWQscj1lLnJvb21JbmZvLHM9ZS5lbnRyaWVzLG89e307cmV0dXJuIGN0KHQsKGZ1bmN0aW9uKGUpe3ZhciB0PWUudXNlcklkLG49ZS51c2VyRGF0YSxpPXt9O2N0KG4sKGZ1bmN0aW9uKGUpe3ZhciB0PWUua2V5LG49ZS52YWx1ZTtpW3RdPW59KSksb1t0XT1pfSkpLHt1c2VyczpvLHRva2VuOm4sc2Vzc2lvbklkOmkscm9vbUluZm86cixrdkVudHJpZXM6c319LGUucHJvdG90eXBlLl9mb3JtYXRSVENEYXRhPWZ1bmN0aW9uKGUpe3ZhciB0PWUub3V0SW5mbyxuPXt9O3JldHVybiBjdCh0LChmdW5jdGlvbihlKXtuW2Uua2V5XT1lLnZhbHVlfSkpLG59LGUucHJvdG90eXBlLl9mb3JtYXRSVENSb29tSW5mbz1mdW5jdGlvbihlKXt2YXIgdD1lLnJvb21JZCxuPWUudXNlckNvdW50LGk9ZS5yb29tRGF0YSxyPXtpZDp0LHRvdGFsOm59O3JldHVybiBjdChpLChmdW5jdGlvbihlKXtyW2Uua2V5XT1lLnZhbHVlfSkpLHJ9LGUucHJvdG90eXBlLl9mb3JtYXRHcnBSZWFkUmVjZWlwdFFyeVJlc3A9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS50b3RhbE1lbWJlck51bSxuPWUubGlzdDtyZXR1cm4gbi5mb3JFYWNoKChmdW5jdGlvbihlKXtlLnJlYWRUaW1lPW50KGUucmVhZFRpbWUpfSkpLHt0b3RhbE1lbWJlckNvdW50OnQsbGlzdDpufX0sZS5wcm90b3R5cGUuX2Zvcm1hdFVzZXJTZXR0aW5nTm90aWZpY2F0aW9uPWZ1bmN0aW9uKGUpe3JldHVybiBlfSxlLnByb3RvdHlwZS5fZm9ybWF0UlRDUm9vbUtWTGlzdD1mdW5jdGlvbihlKXt2YXIgdD1lLmVudHJpZXMsbj1lLmJGdWxsVXBkYXRlLGk9ZS5zeW5jVGltZTtyZXR1cm57a3ZFbnRyaWVzOnQ9KHQ9dHx8W10pLm1hcCgoZnVuY3Rpb24oZSl7dmFyIHQ9ZS50aW1lc3RhbXA7cmV0dXJuIE9iamVjdC5hc3NpZ24oZSx7dGltZXN0YW1wOm50KHQpfSl9KSksaXNGdWxsVXBkYXRlOm4sc3luY1RpbWU6aX19LGUucHJvdG90eXBlLl9mb3JtYXRSVENBdWlkZW5jZUpvaW5Sb29tRGF0YT1mdW5jdGlvbihlKXtyZXR1cm4gZX0sZS5wcm90b3R5cGUuX2Zvcm1hdFJUQ0pvaW5lZFVzZXJJbmZvPWZ1bmN0aW9uKGUpe3JldHVybihlLmluZm98fFtdKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybntkZXZpY2VJZDplLmRldmljZUlkLHJvb21JZDplLnJvb21JZCxqb2luVGltZTpudChlLmpvaW5UaW1lKX19KSl9LGUucHJvdG90eXBlLmVuY29kZVNlcnZlckNvbmZQYXJhbXM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9jb2RlYy5nZXRNb2R1bGUoTXQpO3JldHVybiBlLnNldE5vdGhpbmcoMSksZS5nZXRBcnJheURhdGEoKX0sZS5wcm90b3R5cGUuX2dldFVwTXNnTW9kdWxlPWZ1bmN0aW9uKGUsdCl7dmFyIG4saSxyLHM9XCJjb21ldFwiPT09dGhpcy5fY29ubmVjdFR5cGUsbz0oZS5jb252ZXJzYXRpb25UeXBlLHQubWVzc2FnZVR5cGUpLGE9dC5pc01lbnRpb25lZCx1PXQubWVudGlvbmVkVHlwZSxjPXQubWVudGlvbmVkVXNlcklkTGlzdCxoPXQuY29udGVudCxsPXQucHVzaENvbnRlbnQsZD10LnB1c2hEYXRhLGY9dC5kaXJlY3Rpb25hbFVzZXJJZExpc3QscD10LmlzRmlsZXJXaGl0ZUJsYWNrbGlzdCxnPXQuaXNWb2lwUHVzaCxfPXQuY2FuSW5jbHVkZUV4cGFuc2lvbix5PXQuZXhwYW5zaW9uLHY9dC5wdXNoQ29uZmlnLEU9dC5jaGFubmVsSWQ7ai5HUk9VUDt2YXIgbT10aGlzLl9jb2RlYy5nZXRNb2R1bGUoTnQpLEk9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5pc1N0YXR1c01lc3NhZ2Usbj1lLmlzUGVyc2l0ZWQsaT1lLmlzQ291bnRlZDt0JiYobj1pPSExKTt2YXIgcj0wO3JldHVybiBuJiYocnw9MSksaSYmKHJ8PTIpLGUuaXNNZW50aW9uZWQmJihyfD00KSxlLmRpc2FibGVOb3RpZmljYXRpb24mJihyfD0zMiksZS5jYW5JbmNsdWRlRXhwYW5zaW9uJiYocnw9NjQpLHJ9KHQpLFQ9dnx8e30sQz1ULnB1c2hUaXRsZSxSPVQucHVzaENvbnRlbnQsUz1ULnB1c2hEYXRhLE49VC5pT1NDb25maWcsTz1ULmFuZHJvaWRDb25maWcsdz1ULnRlbXBsYXRlSWQsYj1ULmRpc2FibGVQdXNoVGl0bGUsTT1ULmZvcmNlU2hvd0RldGFpbENvbnRlbnQsQT0wO20uc2V0U2Vzc2lvbklkKEkpLGEmJmgmJihoLm1lbnRpb25lZEluZm89e3VzZXJJZExpc3Q6KG51bGw9PT0obj1oLm1lbnRpb25lZEluZm8pfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLnVzZXJJZExpc3QpfHxjfHxbXSx0eXBlOihudWxsPT09KGk9aC5tZW50aW9uZWRJbmZvKXx8dm9pZCAwPT09aT92b2lkIDA6aS50eXBlKXx8dXx8d2UuQUxMLG1lbnRpb25lZENvbnRlbnQ6KG51bGw9PT0ocj1oLm1lbnRpb25lZEluZm8pfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLm1lbnRpb25lZENvbnRlbnQpfHxcIlwifSk7dmFyIFU9Unx8bHx8XCJcIixMPVN8fGR8fFwiXCI7aWYoVSYmbS5zZXRQdXNoVGV4dChVKSxMJiZtLnNldEFwcERhdGEoTCksZiYmbS5zZXRVc2VySWQoZiksQXw9Zz8xOjAsQXw9cD8yOjAsQXw9Yj80OjAsQXw9TT84OjAsbS5zZXRDb25maWdGbGFnKEEpLG0uc2V0Q2xhc3NuYW1lKG8pLGgudXNlciYmaC51c2VyLnBvcnRyYWl0VXJpJiYoaC51c2VyLnBvcnRyYWl0PWgudXNlci5wb3J0cmFpdFVyaSksbS5zZXRDb250ZW50KEpTT04uc3RyaW5naWZ5KGgpKSxfJiZ5KXt2YXIgUD17fTtjdCh5LChmdW5jdGlvbihlLHQpe1BbdF09e3Y6ZX19KSksbS5zZXRFeHRyYUNvbnRlbnQoSlNPTi5zdHJpbmdpZnkoUCkpfWlmKHYpe3ZhciBEPXRoaXMuX2NvZGVjLmdldE1vZHVsZShPdCk7aWYoQyYmRC5zZXRUaXRsZShDKSxOJiZPKXt2YXIgVj1zdChOLE8pO0Quc2V0UHVzaENvbmZpZ3MoVil9KG51bGw9PU8/dm9pZCAwOk8ubm90aWZpY2F0aW9uSWQpJiZELnNldFB1c2hJZChudWxsPT1PP3ZvaWQgMDpPLm5vdGlmaWNhdGlvbklkKSxELnNldFRlbXBsYXRlSWQod3x8XCJcIiksbS5zZXRQdXNoRXh0KHM/RC5nZXRBcnJheURhdGEoKTpEKX1yZXR1cm4gcmUoRSl8fG0uc2V0QnVzQ2hhbm5lbChFKSxtfSxlLnByb3RvdHlwZS5lbmNvZGVVcE1zZz1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLl9nZXRVcE1zZ01vZHVsZShlLHQpLmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVTeW5jTXNnPWZ1bmN0aW9uKGUpe3ZhciB0PWUuc2VuZGJveFRpbWUsbj1lLmluYm94VGltZSxpPXRoaXMuX2NvZGVjLmdldE1vZHVsZShVdCk7cmV0dXJuIGkuc2V0SXNwb2xsaW5nKCExKSxpLnNldElzUHVsbFNlbmQoITApLGkuc2V0U2VuZEJveFN5bmNUaW1lKHQpLGkuc2V0U3luY1RpbWUobiksaS5nZXRBcnJheURhdGEoKX0sZS5wcm90b3R5cGUuZW5jb2RlQ2hybVN5bmNNc2c9ZnVuY3Rpb24oZSx0KXtlPWV8fDAsdD10fHwwO3ZhciBuPXRoaXMuX2NvZGVjLmdldE1vZHVsZShMdCk7cmV0dXJuIG4uc2V0Q291bnQodCksbi5zZXRTeW5jVGltZShlKSxuLmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVHZXRIaXN0b3J5TXNnPWZ1bmN0aW9uKGUsdCl7dmFyIG49dC5jb3VudCxpPXQub3JkZXIscj10LnRpbWVzdGFtcCxzPXQuY2hhbm5lbElkLG89dGhpcy5fY29kZWMuZ2V0TW9kdWxlKER0KTtyZXR1cm4gby5zZXRUYXJnZXRJZChlKSxvLnNldFRpbWUociksby5zZXRDb3VudChuKSxvLnNldE9yZGVyKGkpLG8uc2V0QnVzQ2hhbm5lbChzfHxcIlwiKSxvLmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVHZXRDb252ZXJzYXRpb25MaXN0PWZ1bmN0aW9uKGUpe3ZhciB0PShlPWV8fHt9KS5jb3VudCxuPWUuc3RhcnRUaW1lLGk9dGhpcy5fY29kZWMuZ2V0TW9kdWxlKGt0KTtyZXR1cm4gaS5zZXRUeXBlKDEpLGkuc2V0Q291bnQodCksaS5zZXRTdGFydFRpbWUobiksaS5nZXRBcnJheURhdGEoKX0sZS5wcm90b3R5cGUuZW5jb2RlT2xkQ29udmVyc2F0aW9uTGlzdD1mdW5jdGlvbihlKXt2YXIgdD0oZT1lfHx7fSkuY291bnQsbj1lLnR5cGUsaT1lLnN0YXJ0VGltZSxyPWUub3JkZXI7dD10fHwwLGk9aXx8MCxyPXJ8fDA7dmFyIHM9dGhpcy5fY29kZWMuZ2V0TW9kdWxlKGt0KTtyZXR1cm4gcy5zZXRUeXBlKG4pLHMuc2V0Q291bnQodCkscy5zZXRTdGFydFRpbWUoaSkscy5zZXRPcmRlcihyKSxzLmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVSZW1vdmVPbGRDb252ZXJzYXRpb25MaXN0PWZ1bmN0aW9uKGUpe3ZhciB0PShlPWV8fHt9KS5jb252ZXJzYXRpb25UeXBlLG49ZS5jaGFubmVsSWQsaT10aGlzLl9jb2RlYy5nZXRNb2R1bGUocXQpO3JldHVybiBpLnNldFR5cGUodCksaS5zZXRCdXNDaGFubmVsKG4pLGkuZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLmVuY29kZVJlbW92ZUNvbnZlcnNhdGlvbkxpc3Q9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXRoaXMuX2NvZGVjLmdldE1vZHVsZShCdCksaT1bXTtyZXR1cm4gY3QoZSwoZnVuY3Rpb24oZSl7dmFyIG49ZS5jb252ZXJzYXRpb25UeXBlLHI9ZS50YXJnZXRJZCxzPXQuX2NvZGVjLmdldE1vZHVsZShGdCk7cy5zZXRUeXBlKG4pLHMuc2V0Q2hhbm5lbElkKHIpLGkucHVzaChzKX0pKSxuLnNldFNlc3Npb25zKGkpLG4uZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLmVuY29kZURlbGV0ZU1lc3NhZ2VzPWZ1bmN0aW9uKGUsdCxuLGkpe3ZhciByPXRoaXMuX2NvZGVjLmdldE1vZHVsZShZdCkscz1bXTtyZXR1cm4gY3QobiwoZnVuY3Rpb24oZSl7cy5wdXNoKHttc2dJZDplLm1lc3NhZ2VVSWQsbXNnRGF0YVRpbWU6ZS5zZW50VGltZSxkaXJlY3Q6ZS5tZXNzYWdlRGlyZWN0aW9ufSl9KSksci5zZXRUeXBlKGUpLHIuc2V0Q29udmVyc2F0aW9uSWQodCksci5zZXRNc2dzKHMpLHIuc2V0QnVzQ2hhbm5lbChpKSxyLmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVDbGVhck1lc3NhZ2VzPWZ1bmN0aW9uKGUsdCxuKXt2YXIgaT10aGlzLl9jb2RlYy5nZXRNb2R1bGUoSHQpO3JldHVybiB0PXR8fChuZXcgRGF0ZSkuZ2V0VGltZSgpLGkuc2V0RGF0YVRpbWUodCksaS5zZXRUYXJnZXRJZChlKSxpLnNldEJ1c0NoYW5uZWwobiksaS5nZXRBcnJheURhdGEoKX0sZS5wcm90b3R5cGUuZW5jb2RlQ2xlYXJVbnJlYWRDb3VudD1mdW5jdGlvbihlLHQpe3ZhciBuPWUuY29udmVyc2F0aW9uVHlwZSxpPWUudGFyZ2V0SWQscj10LnRpbWVzdGFtcCxzPXRoaXMuX2NvZGVjLmdldE1vZHVsZShHdCk7cmV0dXJuIHI9cnx8K25ldyBEYXRlLHMuc2V0VHlwZShuKSxzLnNldENoYW5uZWxJZChpKSxzLnNldE1zZ1RpbWUocikscy5nZXRBcnJheURhdGEoKX0sZS5wcm90b3R5cGUuZW5jb2RlSm9pbk9yUXVpdENoYXRSb29tPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fY29kZWMuZ2V0TW9kdWxlKGp0KTtyZXR1cm4gZS5zZXROb3RoaW5nKDEpLGUuZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLmVuY29kZUdldENoYXRSb29tSW5mbz1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuX2NvZGVjLmdldE1vZHVsZShXdCk7cmV0dXJuIG4uc2V0Q291bnQoZSksbi5zZXRPcmRlcih0KSxuLmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVHZXRGaWxlVG9rZW49ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHI9dGhpcy5fY29kZWMuZ2V0TW9kdWxlKGZuKTtyZXR1cm4gci5zZXRUeXBlKGUpLHIuc2V0S2V5KHQpLHIuc2V0SHR0cE1ldGhvZChuKSxyLnNldFF1ZXJ5U3RyaW5nKGkpLHIuZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLmVuY29kZUdldEZpbGVVcmw9ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHI9dGhpcy5fY29kZWMuZ2V0TW9kdWxlKGUpO3JldHVybiByLnNldFR5cGUodCksci5zZXRLZXkobiksaSYmci5zZXRGaWxlTmFtZShpKSxyLmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVNb2RpZnlDaGF0Um9vbUtWPWZ1bmN0aW9uKGUsdCxuKXt2YXIgaT1cImNvbWV0XCI9PT10aGlzLl9jb25uZWN0VHlwZSxyPXRoaXMuX2NvZGVjLmdldE1vZHVsZShFbikscz10LmtleSxvPXQudmFsdWUsYT10Lm5vdGlmaWNhdGlvbkV4dHJhLHU9dC5pc1NlbmROb3RpZmljYXRpb24sYz10LnR5cGV8fFVlLlVQREFURSxoPW10KHQsYyksbD17a2V5OnMsdmFsdWU6b3x8XCJcIix1aWQ6bn07aWYocmUoaCl8fChsLnN0YXR1cz1oKSxyLnNldEVudHJ5KGwpLHUpe3ZhciBkPXtjb252ZXJzYXRpb25UeXBlOmouQ0hBVFJPT00sdGFyZ2V0SWQ6ZX0sZj17a2V5OnMsdmFsdWU6byxleHRyYTphLHR5cGU6Y30scD10aGlzLl9nZXRVcE1zZ01vZHVsZShkLHttZXNzYWdlVHlwZTpSZS5DSFJNX0tWX05PVElGWSxjb250ZW50OmYsaXNQZXJzaXRlZDohMSxpc0NvdW50ZWQ6ITF9KTtpP3Iuc2V0Tm90aWZpY2F0aW9uKHAuZ2V0QXJyYXlEYXRhKCkpOnIuc2V0Tm90aWZpY2F0aW9uKHApLHIuc2V0Qk5vdGlmeSghMCksci5zZXRUeXBlKGouQ0hBVFJPT00pfXJldHVybiByLmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVNb2RpZnlDaGF0Um9vbUtWUz1mdW5jdGlvbihlLHQsbil7dGhpcy5fY29ubmVjdFR5cGU7dmFyIGk9dGhpcy5fY29kZWMuZ2V0TW9kdWxlKG1uKSxyPXQuZW50cmllcyxzPXQudHlwZXx8VWUuVVBEQVRFLG89bXQodCxzKSxhPVtdO3JldHVybiByLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0PXtrZXk6ZS5rZXksdmFsdWU6ZS52YWx1ZXx8XCJcIix1aWQ6bn07cmUobyl8fCh0LnN0YXR1cz1vKSxhLnB1c2godCl9KSksaS5zZXRFbnRyeShhKSxpLmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVQdWxsQ2hhdFJvb21LVj1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9jb2RlYy5nZXRNb2R1bGUoU24pO3JldHVybiB0LnNldFRpbWVzdGFtcChlKSx0LmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVQdWxsVXNlclNldHRpbmc9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fY29kZWMuZ2V0TW9kdWxlKHduKTtyZXR1cm4gdC5zZXRWZXJzaW9uKGUpLHQuZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLmVuY29kZUdldENvbnZlcnNhdGlvblN0YXR1cz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9jb2RlYy5nZXRNb2R1bGUoQW4pO3JldHVybiB0LnNldFRpbWUoZSksdC5nZXRBcnJheURhdGEoKX0sZS5wcm90b3R5cGUuZW5jb2RlU2V0Q29udmVyc2F0aW9uU3RhdHVzPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1cImNvbWV0XCI9PT10aGlzLl9jb25uZWN0VHlwZSxpPXRoaXMuX2NvZGVjLmdldE1vZHVsZShEbikscj1FdC5nZXRUaW1lKCkscz1bXTtyZXR1cm4gY3QoZSwoZnVuY3Rpb24oZSl7dmFyIGk9dC5fY29kZWMuZ2V0TW9kdWxlKExuKSxvPWUuY29udmVyc2F0aW9uVHlwZSxhPWUudGFyZ2V0SWQsdT1lLm5vdGlmaWNhdGlvblN0YXR1cyxjPWUuaXNUb3AsaD1lLmNoYW5uZWxJZCxsPVtdO2kuc2V0VHlwZShvKSxpLnNldENoYW5uZWxJZChhKSxpLnNldFRpbWUociksaS5zZXRCdXNDaGFubmVsKGgpO3ZhciBkPXU9PT1OZS5PUEVOLGY9e307cmUodSl8fChmW0tpXT1kKSxyZShjKXx8KGZbcWldPWMpLGN0KGYsKGZ1bmN0aW9uKGUsaSl7aWYoIXJlKGUpKXt2YXIgcj10Ll9jb2RlYy5nZXRNb2R1bGUoUG4pO2U9ZT9CaTpGaSxyLnNldFNlc3Npb25TdGF0ZVR5cGUoTnVtYmVyKGkpKSxyLnNldFZhbHVlKGUpO3ZhciBzPW4/ci5nZXRBcnJheURhdGEoKTpyO2wucHVzaChzKX19KSksaS5zZXRTdGF0ZUl0ZW0obCk7dmFyIHA9bj9pLmdldEFycmF5RGF0YSgpOmk7cy5wdXNoKHApfSkpLGkuc2V0VmVyc2lvbihyKSxpLnNldFN0YXRlKHMpLGkuZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLmVuY29kZVJlYWRSZWNlaXB0PWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5fY29kZWMuZ2V0TW9kdWxlKGtuKTtyZXR1cm4gbi5zZXRNc2dJZChlKSx0JiZuLnNldENoYW5uZWxJZCh0KSxuLmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVDcmVhdGVUYWc9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLGk9XCJjb21ldFwiPT09dGhpcy5fY29ubmVjdFR5cGUscj10aGlzLl9jb2RlYy5nZXRNb2R1bGUoS24pLHM9W107cmV0dXJuIGUuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHQ9bi5fY29kZWMuZ2V0TW9kdWxlKHFuKTt0LnNldFRhZ0lkKGUudGFnSWQpLHQuc2V0TmFtZShlLnRhZ05hbWUpLHMucHVzaChpP3QuZ2V0QXJyYXlEYXRhKCk6dCl9KSksci5zZXRUYWdzKHMpLHIuc2V0VmVyc2lvbih0KSxyLmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVNZXNzYWdlUmVhZGVyPWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5fY29kZWMuZ2V0TW9kdWxlKGtuKTtyZXR1cm4gbi5zZXRNc2dJZChlKSx0JiZuLnNldENoYW5uZWxJZCh0KSxuLmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVSZW1vdmVUYWc9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLGk9XCJjb21ldFwiPT09dGhpcy5fY29ubmVjdFR5cGUscj10aGlzLl9jb2RlYy5nZXRNb2R1bGUoWW4pLHM9W107cmV0dXJuIGUuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHQ9bi5fY29kZWMuZ2V0TW9kdWxlKHFuKTt0LnNldFRhZ0lkKGUpLHMucHVzaChpP3QuZ2V0QXJyYXlEYXRhKCk6dCl9KSksci5zZXRUYWdzKHMpLHIuc2V0VmVyc2lvbih0KSxyLmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVEaXNDb252ZXJzYXRpb25UYWc9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fY29kZWMuZ2V0TW9kdWxlKEhuKTtyZXR1cm4gdC5zZXRUYWdJZChlKSx0LmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVVcGRhdGVDb252ZXJzYXRpb25UYWc9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLGk9XCJjb21ldFwiPT09dGhpcy5fY29ubmVjdFR5cGUscj10aGlzLl9jb2RlYy5nZXRNb2R1bGUoRG4pLHM9W107cmV0dXJuIHQuZm9yRWFjaCgoZnVuY3Rpb24odCl7dmFyIHI9bi5fY29kZWMuZ2V0TW9kdWxlKExuKSxvPW4uX2NvZGVjLmdldE1vZHVsZShQbiksYT1bXTtlLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0PW4uX2NvZGVjLmdldE1vZHVsZShxbik7dC5zZXRUYWdJZChlLnRhZ0lkKSxyZShlLmlzVG9wKXx8dC5zZXRJc1RvcChlLmlzVG9wKSxhLnB1c2goaT90LmdldEFycmF5RGF0YSgpOnQpfSkpLG8uc2V0U2Vzc2lvblN0YXRlVHlwZShZaSksby5zZXRWYWx1ZShKU09OLnN0cmluZ2lmeShhKSksby5zZXRUYWdzKGEpLHIuc2V0VHlwZSh0LmNvbnZlcnNhdGlvblR5cGUpLHIuc2V0Q2hhbm5lbElkKHQudGFyZ2V0SWQpLHIuc2V0VGltZShEYXRlLm5vdygpKSxyLnNldFN0YXRlSXRlbShbaT9vLmdldEFycmF5RGF0YSgpOm9dKSxzLnB1c2goaT9yLmdldEFycmF5RGF0YSgpOnIpfSkpLHIuc2V0U3RhdGUocyksci5zZXRWZXJzaW9uKEV0LmdldFRpbWUoKSksci5nZXRBcnJheURhdGEoKX0sZS5wcm90b3R5cGUuZW5jb2RlUmVwb3J0U0RLSW5mbz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9jb2RlYy5nZXRNb2R1bGUoR24pO3JldHVybiB0LnNldFNka0luZm8oZSksdC5nZXRBcnJheURhdGEoKX0sZS5wcm90b3R5cGUuZW5jb2RlSm9pblJUQ1Jvb209ZnVuY3Rpb24oZSx0LG4saSxyKXt2YXIgcz10aGlzLG89XCJjb21ldFwiPT09dGhpcy5fY29ubmVjdFR5cGUsYT10aGlzLl9jb2RlYy5nZXRNb2R1bGUoenQpO2lmKGU9ZXx8MCxhLnNldFJvb21UeXBlKGUpLHJlKHQpfHxhLnNldEJyb2FkY2FzdFR5cGUodCkscmUobil8fGEuc2V0Sm9pblR5cGUobiksaSl7dmFyIHU9W10sYz10aGlzLl9jb2RlYy5nZXRNb2R1bGUobG4pO2Zvcih2YXIgaCBpbiBpKWMuc2V0S2V5KGgpLGMuc2V0VmFsdWUoaVtoXSksbz91LnB1c2goYy5nZXRBcnJheURhdGEoKSk6dS5wdXNoKGMpO2Euc2V0SW5uZXJEYXRhcyh1KX1pZihyKXt2YXIgbD1bXTtPYmplY3Qua2V5cyhyKS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgdD1zLl9jb2RlYy5nZXRNb2R1bGUobG4pO3Quc2V0S2V5KGUpLHQuc2V0VmFsdWUocltlXSksbz9sLnB1c2godC5nZXRBcnJheURhdGEoKSk6bC5wdXNoKHQpfSkpLGEuc2V0T3V0ZXJEYXRhcyhsKX1yZXR1cm4gYS5nZXRBcnJheURhdGEoKX0sZS5wcm90b3R5cGUuZW5jb2RlUXVpdFJUQ1Jvb209ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29kZWMuZ2V0TW9kdWxlKFh0KS5nZXRBcnJheURhdGEoKX0sZS5wcm90b3R5cGUuZW5jb2RlU2V0UlRDRGF0YT1mdW5jdGlvbihlLHQsbixpLHIpe3ZhciBzPXRoaXMuX2NvZGVjLmdldE1vZHVsZSgkdCk7aWYocy5zZXRJbnRlcmlvcihuKSxzLnNldFRhcmdldChpKSxzLnNldEtleShlKSxzLnNldFZhbHVlKHQpLHIpe3IubmFtZSYmcy5zZXRPYmplY3ROYW1lKHIubmFtZSk7dmFyIG89ci5jb250ZW50O28mJihuZShvKSYmKG89SlNPTi5zdHJpbmdpZnkobykpLHMuc2V0Q29udGVudChvKSl9cmV0dXJuIHMuZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLmVuY29kZVVzZXJTZXRSVENEYXRhPWZ1bmN0aW9uKGUsdCxuLGkpe3ZhciByPXRoaXMscz1cImNvbWV0XCI9PT10aGlzLl9jb25uZWN0VHlwZSxvPXRoaXMuX2NvZGVjLmdldE1vZHVsZShlbik7by5zZXRPYmplY3ROYW1lKG4pO3ZhciBhPXRoaXMuX2NvZGVjLmdldE1vZHVsZShsbik7YS5zZXRLZXkoZS5uYW1lKSxhLnNldFZhbHVlKGUuY29udGVudCkscz9vLnNldENvbnRlbnQoYS5nZXRBcnJheURhdGEoKSk6by5zZXRDb250ZW50KGEpO3ZhciB1PVtdO3JldHVybltcInVyaXNcIixcIm1jdV91cmlzXCJdLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBuPXIuX2NvZGVjLmdldE1vZHVsZShsbik7bi5zZXRLZXkoZSk7dmFyIG89XCJ1cmlzXCI9PT1lP3Q6aTtuLnNldFZhbHVlKG8pLHM/dS5wdXNoKG4uZ2V0QXJyYXlEYXRhKCkpOnUucHVzaChuKX0pKSxvLnNldFZhbHVlSW5mbyh1KSxvLmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVVc2VyU2V0UlRDQ0ROVXJpcz1mdW5jdGlvbihlLHQpe3RoaXMuX2Nvbm5lY3RUeXBlO3ZhciBuPXRoaXMuX2NvZGVjLmdldE1vZHVsZShlbik7bi5zZXRPYmplY3ROYW1lKGUpO3ZhciBpPXRoaXMuX2NvZGVjLmdldE1vZHVsZShsbik7cmV0dXJuIGkuc2V0S2V5KFwiY2RuX3VyaXNcIiksaS5zZXRWYWx1ZSh0KSxuLnNldFZhbHVlSW5mbyhpKSxuLmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVHZXRSVENEYXRhPWZ1bmN0aW9uKGUsdCxuKXt2YXIgaT10aGlzLl9jb2RlYy5nZXRNb2R1bGUodG4pO3JldHVybiBpLnNldEludGVyaW9yKHQpLGkuc2V0VGFyZ2V0KG4pLGkuc2V0S2V5KGUpLGkuZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLmVuY29kZVJlbW92ZVJUQ0RhdGE9ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHI9dGhpcy5fY29kZWMuZ2V0TW9kdWxlKHRuKTtyLnNldEludGVyaW9yKHQpLHIuc2V0VGFyZ2V0KG4pLHIuc2V0S2V5KGUpO3ZhciBzPShpPWl8fHt9KS5uYW1lLG89aS5jb250ZW50O3JldHVybiFyZShzKSYmci5zZXRPYmplY3ROYW1lKHMpLHJlKG8pfHwobmUobykmJihvPUpTT04uc3RyaW5naWZ5KG8pKSxyLnNldENvbnRlbnQobykpLHIuZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLmVuY29kZVNldFJUQ091dERhdGE9ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXMuX2NvZGVjLmdldE1vZHVsZShubik7aS5zZXRUYXJnZXQodCksWChlKXx8KGU9W2VdKSxjdChlLChmdW5jdGlvbih0LG4pe3Qua2V5PXQua2V5P3Qua2V5LnRvU3RyaW5nKCk6dC5rZXksdC52YWx1ZT10LnZhbHVlP3QudmFsdWUudG9TdHJpbmcoKTp0LnZhbHVlLGVbbl09dH0pKSxpLnNldFZhbHVlSW5mbyhlKTt2YXIgcj0obj1ufHx7fSkubmFtZSxzPW4uY29udGVudDtyZXR1cm4hcmUocikmJmkuc2V0T2JqZWN0TmFtZShyKSxyZShzKXx8KG5lKHMpJiYocz1KU09OLnN0cmluZ2lmeShzKSksaS5zZXRDb250ZW50KHMpKSxpLmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lY25vZGVHZXRSVENPdXREYXRhPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2NvZGVjLmdldE1vZHVsZShhbik7cmV0dXJuIHQuc2V0VXNlcklkKGUpLHQuZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLmVuY29kZVNldFJUQ1N0YXRlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2NvZGVjLmdldE1vZHVsZShybik7cmV0dXJuIHQuc2V0U3RhdGUoZSksdC5nZXRBcnJheURhdGEoKX0sZS5wcm90b3R5cGUuZW5jb2RlR2V0UlRDUm9vbUluZm89ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9jb2RlYy5nZXRNb2R1bGUoY24pO3JldHVybiBlLnNldE9yZGVyKDIpLGUuZ2V0QXJyYXlEYXRhKCl9LGUucHJvdG90eXBlLmVuY29kZVNldFJUQ1VzZXJJbmZvPWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5fY29kZWMuZ2V0TW9kdWxlKGxuKTtyZXR1cm4gbi5zZXRLZXkoZSksbi5zZXRWYWx1ZSh0KSxuLmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVSZW1vdmVSVENVc2VySW5mbz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9jb2RlYy5nZXRNb2R1bGUoZG4pO3JldHVybiB0LnNldEtleShlKSx0LmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVJZGVudGl0eUNoYW5nZUluZm89ZnVuY3Rpb24oZSx0LG4pe3ZvaWQgMD09PW4mJihuPSExKTt2YXIgaT10aGlzLl9jb2RlYy5nZXRNb2R1bGUoenQpO3JldHVybiBpLnNldFJvb21UeXBlKERlLkxJVkUpLHQmJmkuc2V0QnJvYWRjYXN0VHlwZSh0KSxpLnNldElkZW50aXR5Q2hhbmdlVHlwZShlKSxpLnNldE5lZWRTeXNDaGF0cm9vbShuKSxpLmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVQdWxsUlRDUm9vbUtWPWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5fY29kZWMuZ2V0TW9kdWxlKFduKTtyZXR1cm4gbi5zZXRUaW1lc3RhbXAodCksbi5zZXRSb29tSWQoZSksbi5nZXRBcnJheURhdGEoKX0sZS5wcm90b3R5cGUuZW5jb2RlUXVlcnlVc2VySm9pbmVkSW5mbz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9jb2RlYy5nZXRNb2R1bGUoem4pO3JldHVybiB0LnNldFVzZXJJZChlKSx0LmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVSZXF1ZXN0Um9vbVBLPWZ1bmN0aW9uKGUpe3ZhciB0PWUuaW52aXRlZFJvb21JZCxuPWUuaW52aXRlZFVzZXJJZCxpPWUuaW52aXRlU2Vzc2lvbklkLHI9ZS5pbnZpdGVUaW1lb3V0LHM9ZS5pbnZpdGVJbmZvLG89dGhpcy5fY29kZWMuZ2V0TW9kdWxlKCRuKTtyZXR1cm4gby5zZXRJbnZpdGVkUm9vbUlkKHQpLG8uc2V0SW52aXRlZFVzZXJJZChuKSxvLnNldEludml0ZVNlc3Npb25JZChpKSxvLnNldFRpbWVvdXRUaW1lKHIpLG8uc2V0SW52aXRlSW5mbyhzKSxvLmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVDYW5jZWxSb29tUEs9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5pbnZpdGVkUm9vbUlkLG49ZS5pbnZpdGVkVXNlcklkLGk9ZS5pbnZpdGVTZXNzaW9uSWQscj1lLmludml0ZUluZm8scz10aGlzLl9jb2RlYy5nZXRNb2R1bGUoZWkpO3JldHVybiBzLnNldEludml0ZWRSb29tSWQodCkscy5zZXRJbnZpdGVkVXNlcklkKG4pLHMuc2V0SW52aXRlU2Vzc2lvbklkKGkpLHMuc2V0SW52aXRlSW5mbyhyKSxzLmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVSZXNwb25zZVJvb21QSz1mdW5jdGlvbihlKXt2YXIgdD1lLmludml0ZVVzZXJJZCxuPWUuaW52aXRlUm9vbUlkLGk9ZS5pbnZpdGVTZXNzaW9uSWQscj1lLmNvbnRlbnQscz1lLmtleSxvPWUudmFsdWUsYT1lLmFncmVlPzE6MCx1PXRoaXMuX2NvZGVjLmdldE1vZHVsZSh0aSk7cmV0dXJuIHUuc2V0SW52aXRlVXNlcklkKHQpLHUuc2V0SW52aXRlUm9vbUlkKG4pLHUuc2V0SW52aXRlU2Vzc2lvbklkKGkpLHUuc2V0Q29udGVudChyKSx1LnNldEtleShzKSx1LnNldFZhbHVlKG8pLHUuc2V0QW5zd2VyQ29kZShhKSx1LmdldEFycmF5RGF0YSgpfSxlLnByb3RvdHlwZS5lbmNvZGVFbmRSb29tUEs9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5lbmRSb29tSWQsbj1lLnNlc3Npb25JZCxpPWUuY29udGVudCxyPWUua2V5cyxzPXRoaXMuX2NvZGVjLmdldE1vZHVsZShuaSk7cmV0dXJuIHMuc2V0SW52aXRlUm9vbUlkKHQpLHMuc2V0SW52aXRlU2Vzc2lvbklkKG4pLHMuc2V0SW52aXRlQ29udGVudChpKSxzLnNldEludml0ZVJvb21LZXlzKHIpLHMuZ2V0QXJyYXlEYXRhKCl9LGV9KCksR2k9ZnVuY3Rpb24oZSx0KXt0aGlzLl93YXRjaGVyPXQsdGhpcy5jb2RlYz1uZXcgSGkoZSl9LGppPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUmJnQ/dCtcIl9cIitlOmV8fERhdGUubm93KCl9LFFpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLmhlYWRlcj1lLHRoaXMuX25hbWU9bnVsbCx0aGlzLmxlbmd0aFNpemU9MCx0aGlzLm1lc3NhZ2VJZD0wLHRoaXMudGltZXN0YW1wPTAsdGhpcy5zeW5jTXNnPSExLHRoaXMuaWRlbnRpZmllcj1cIlwifXJldHVybiBlLnByb3RvdHlwZS5nZXRJZGVudGlmaWVyPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5tZXNzYWdlSWQsdD10aGlzLmlkZW50aWZpZXI7cmV0dXJuIGppKGUsdCl9LGUucHJvdG90eXBlLnJlYWQ9ZnVuY3Rpb24oZSx0LG4pe3RoaXMucmVhZE1lc3NhZ2UoZSx0LG4pfSxlLnByb3RvdHlwZS5yZWFkTWVzc2FnZT1mdW5jdGlvbihlLHQsbil7cmV0dXJue3N0cmVhbTplLGxlbmd0aDp0fX0sZX0oKSxXaT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5sZW5ndGhTaXplPTAsdGhpcy5tZXNzYWdlSWQ9MCx0aGlzLnRvcGljPVwiXCIsdGhpcy50YXJnZXRJZD1cIlwiLHRoaXMuaWRlbnRpZmllcj1cIlwiLHRoaXMuX2hlYWRlcj1uZXcgVHQoZSwhMSxRZS5BVF9NT1NUX09OQ0UsITEpfXJldHVybiBlLnByb3RvdHlwZS5nZXRJZGVudGlmaWVyPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5tZXNzYWdlSWQsdD10aGlzLmlkZW50aWZpZXI7cmV0dXJuIGppKGUsdCl9LGUucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ2V0SGVhZGVyRmxhZygpO2Uud3JpdGUodCksdGhpcy53cml0ZU1lc3NhZ2UoZSl9LGUucHJvdG90eXBlLnNldEhlYWRlclFvcz1mdW5jdGlvbihlKXt0aGlzLl9oZWFkZXIucW9zPWV9LGUucHJvdG90eXBlLmdldEhlYWRlckZsYWc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faGVhZGVyLmVuY29kZSgpfSxlLnByb3RvdHlwZS5nZXRMZW5ndGhTaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGVuZ3RoU2l6ZX0sZS5wcm90b3R5cGUuZ2V0QnVmZmVyRGF0YT1mdW5jdGlvbigpe3ZhciBlPW5ldyBTdDt0aGlzLndyaXRlKGUpO3ZhciB0PWUuZ2V0Qnl0ZXNBcnJheSgpO3JldHVybiBuZXcgSW50OEFycmF5KHQpfSxlLnByb3RvdHlwZS5nZXRDb21ldERhdGE9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmRhdGF8fHt9O3JldHVybiBKU09OLnN0cmluZ2lmeShlKX0sZX0oKSxKaT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7dmFyIHQ9bnVsbCE9PWUmJmUuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzO3JldHVybiB0Ll9uYW1lPUplLkNPTk5fQUNLLHQuc3RhdHVzPW51bGwsdC51c2VySWQ9bnVsbCx0LnRpbWVzdGFtcD0wLHR9cmV0dXJuIE4odCxlKSx0LnByb3RvdHlwZS5yZWFkTWVzc2FnZT1mdW5jdGlvbihlLG4saSl7aWYoZS5yZWFkQnl0ZSgpLHRoaXMuc3RhdHVzPStlLnJlYWRCeXRlKCksbjw9dC5NRVNTQUdFX0xFTkdUSClyZXR1cm57c3RyZWFtOmUsbGVuZ3RoOm59O2lmKGk9PT1aZS5WNCl7dmFyIHI9ZS5yZWFkQnl0ZSgpOzEmciYmKHRoaXMudXNlcklkPWUucmVhZFVURigpKSwyJnImJmUucmVhZFVURigpLDQmciYmKHRoaXMudGltZXN0YW1wPWUucmVhZExvbmcoKSksOCZyJiYodGhpcy5tZXNzYWdlSWQ9ZS5yZWFkMkJ5dGUoKSl9ZWxzZXt0aGlzLnVzZXJJZD1lLnJlYWRVVEYoKTt2YXIgcz1lLnJlYWRVVEYoKTtwZS5kZWJ1ZyhcInNlcnZlciBzZXNzaW9uSWQgLT4gXCIrcyksdGhpcy50aW1lc3RhbXA9ZS5yZWFkTG9uZygpfXJldHVybntzdHJlYW06ZSxsZW5ndGg6bn19LHQuTUVTU0FHRV9MRU5HVEg9Mix0fShRaSksemk9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3ZhciB0PW51bGwhPT1lJiZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpcztyZXR1cm4gdC5fbmFtZT1KZS5ESVNDT05ORUNULHQuc3RhdHVzPTAsdH1yZXR1cm4gTih0LGUpLHQucHJvdG90eXBlLnJlYWRNZXNzYWdlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUucmVhZEJ5dGUoKSx0aGlzLnN0YXR1cz0rZS5yZWFkQnl0ZSgpLHtzdHJlYW06ZSxsZW5ndGg6dH19LHQuTUVTU0FHRV9MRU5HVEg9Mix0fShRaSksWmk9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3ZhciB0PWUuY2FsbCh0aGlzLFdlLlBJTkdfUkVRKXx8dGhpcztyZXR1cm4gdC5fbmFtZT1KZS5QSU5HX1JFUSx0fXJldHVybiBOKHQsZSksdC5wcm90b3R5cGUud3JpdGVNZXNzYWdlPWZ1bmN0aW9uKGUpe30sdH0oV2kpLFhpPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCl7dmFyIG49ZS5jYWxsKHRoaXMsdCl8fHRoaXM7cmV0dXJuIG4uX25hbWU9SmUuUElOR19SRVNQLG59cmV0dXJuIE4odCxlKSx0fShRaSksJGk9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3ZhciB0PW51bGwhPT1lJiZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpcztyZXR1cm4gdC5tZXNzYWdlSWQ9MCx0fXJldHVybiBOKHQsZSksdC5wcm90b3R5cGUucmVhZE1lc3NhZ2U9ZnVuY3Rpb24oZSx0KXt2YXIgbj0yNTYqZS5yZWFkQnl0ZSgpK2UucmVhZEJ5dGUoKTtyZXR1cm4gdGhpcy5tZXNzYWdlSWQ9cGFyc2VJbnQobi50b1N0cmluZygpLDEwKSx7c3RyZWFtOmUsbGVuZ3RoOnR9fSx0fShRaSksZXI9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3ZhciB0PW51bGwhPT1lJiZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpcztyZXR1cm4gdC5tZXNzYWdlSWQ9MCx0fXJldHVybiBOKHQsZSksdC5wcm90b3R5cGUud3JpdGVNZXNzYWdlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMubWVzc2FnZUlkLG49MjU1JnQsaT0oNjUyODAmdCk+Pjg7ZS53cml0ZShpKSxlLndyaXRlKG4pfSx0fShXaSksdHI9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3ZhciB0PW51bGwhPT1lJiZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpcztyZXR1cm4gdC5fbmFtZT1KZS5QVUJMSVNILHQudG9waWM9XCJcIix0LnRhcmdldElkPVwiXCIsdC5zeW5jTXNnPSExLHQuaWRlbnRpZmllcj16ZS5QVUIsdH1yZXR1cm4gTih0LGUpLHQucHJvdG90eXBlLnJlYWRNZXNzYWdlPWZ1bmN0aW9uKHQsbil7cmV0dXJuIHRoaXMuZGF0ZT10LnJlYWRJbnQoKSx0aGlzLnRvcGljPXQucmVhZFVURigpLHRoaXMudGFyZ2V0SWQ9dC5yZWFkVVRGKCksZS5wcm90b3R5cGUucmVhZE1lc3NhZ2UuY2FsbCh0aGlzLHQsbiksdGhpcy5kYXRhPXQucmVhZEFsbCgpLHtzdHJlYW06dCxsZW5ndGg6bn19LHR9KCRpKSxucj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQsbixpKXt2YXIgcj1lLmNhbGwodGhpcyxXZS5QVUJMSVNIKXx8dGhpcztyZXR1cm4gci5fbmFtZT1KZS5QVUJMSVNILHIuc3luY01zZz0hMSxyLmlkZW50aWZpZXI9emUuUFVCLHIudG9waWM9dCxyLmRhdGE9SihuKT9DdC53cml0ZVVURihuKTpuLHIudGFyZ2V0SWQ9aSxyfXJldHVybiBOKHQsZSksdC5wcm90b3R5cGUud3JpdGVNZXNzYWdlPWZ1bmN0aW9uKHQpe3Qud3JpdGVVVEYodGhpcy50b3BpYyksdC53cml0ZVVURih0aGlzLnRhcmdldElkKSxlLnByb3RvdHlwZS53cml0ZU1lc3NhZ2UuY2FsbCh0aGlzLHQpLHQud3JpdGUodGhpcy5kYXRhKX0sdH0oZXIpLGlyPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXt2YXIgdD1udWxsIT09ZSYmZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXM7cmV0dXJuIHQuX25hbWU9SmUuUFVCX0FDSyx0LnN0YXR1cz0wLHQuZGF0ZT0wLHQubWlsbGlzZWNvbmQ9MCx0Lm1lc3NhZ2VVSWQ9XCJcIix0LnRpbWVzdGFtcD0wLHQuaWRlbnRpZmllcj16ZS5QVUIsdC50b3BpYz1cIlwiLHQudGFyZ2V0SWQ9XCJcIix0fXJldHVybiBOKHQsZSksdC5wcm90b3R5cGUucmVhZE1lc3NhZ2U9ZnVuY3Rpb24odCxuKXtyZXR1cm4gZS5wcm90b3R5cGUucmVhZE1lc3NhZ2UuY2FsbCh0aGlzLHQsbiksdGhpcy5kYXRlPXQucmVhZEludCgpLHRoaXMuc3RhdHVzPTI1Nip0LnJlYWRCeXRlKCkrdC5yZWFkQnl0ZSgpLHRoaXMubWlsbGlzZWNvbmQ9MjU2KnQucmVhZEJ5dGUoKSt0LnJlYWRCeXRlKCksdGhpcy50aW1lc3RhbXA9MWUzKnRoaXMuZGF0ZSt0aGlzLm1pbGxpc2Vjb25kLHRoaXMubWVzc2FnZVVJZD10LnJlYWRVVEYoKSx7c3RyZWFtOnQsbGVuZ3RoOm59fSx0fSgkaSkscnI9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0KXt2YXIgbj1lLmNhbGwodGhpcyxXZS5QVUJfQUNLKXx8dGhpcztyZXR1cm4gbi5fbmFtZT1KZS5QVUJfQUNLLG4uc3RhdHVzPTAsbi5kYXRlPTAsbi5taWxsaXNlY29uZD0wLG4ubWVzc2FnZVVJZD1cIlwiLG4udGltZXN0YW1wPTAsbi5tZXNzYWdlSWQ9dCxufXJldHVybiBOKHQsZSksdC5wcm90b3R5cGUud3JpdGVNZXNzYWdlPWZ1bmN0aW9uKHQpe2UucHJvdG90eXBlLndyaXRlTWVzc2FnZS5jYWxsKHRoaXMsdCl9LHR9KGVyKSxzcj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQsbixpKXt2YXIgcj1lLmNhbGwodGhpcyxXZS5RVUVSWSl8fHRoaXM7cmV0dXJuIHIubmFtZT1KZS5RVUVSWSxyLmlkZW50aWZpZXI9emUuUVVFUlksci50b3BpYz10LHIuZGF0YT1KKG4pP0N0LndyaXRlVVRGKG4pOm4sci50YXJnZXRJZD1pLHJ9cmV0dXJuIE4odCxlKSx0LnByb3RvdHlwZS53cml0ZU1lc3NhZ2U9ZnVuY3Rpb24odCl7dC53cml0ZVVURih0aGlzLnRvcGljKSx0LndyaXRlVVRGKHRoaXMudGFyZ2V0SWQpLGUucHJvdG90eXBlLndyaXRlTWVzc2FnZS5jYWxsKHRoaXMsdCksdC53cml0ZSh0aGlzLmRhdGEpfSx0fShlciksb3I9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0KXt2YXIgbj1lLmNhbGwodGhpcyxXZS5RVUVSWV9DT05GSVJNKXx8dGhpcztyZXR1cm4gbi5fbmFtZT1KZS5RVUVSWV9DT04sbi5tZXNzYWdlSWQ9dCxufXJldHVybiBOKHQsZSksdH0oZXIpLGFyPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXt2YXIgdD1udWxsIT09ZSYmZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXM7cmV0dXJuIHQuX25hbWU9SmUuUVVFUllfQUNLLHQuc3RhdHVzPTAsdC5pZGVudGlmaWVyPXplLlFVRVJZLHQudG9waWM9XCJcIix0LnRhcmdldElkPVwiXCIsdH1yZXR1cm4gTih0LGUpLHQucHJvdG90eXBlLnJlYWRNZXNzYWdlPWZ1bmN0aW9uKHQsbil7cmV0dXJuIGUucHJvdG90eXBlLnJlYWRNZXNzYWdlLmNhbGwodGhpcyx0LG4pLHRoaXMuZGF0ZT10LnJlYWRJbnQoKSx0aGlzLnN0YXR1cz0yNTYqdC5yZWFkQnl0ZSgpK3QucmVhZEJ5dGUoKSx0aGlzLmRhdGE9dC5yZWFkQWxsKCkse3N0cmVhbTp0LGxlbmd0aDpufX0sdH0oJGkpLHVyPWZ1bmN0aW9uKGUpe3ZhciB0LG49ZS50eXBlO3N3aXRjaChuKXtjYXNlIFdlLkNPTk5fQUNLOnQ9bmV3IEppKGUpO2JyZWFrO2Nhc2UgV2UuUFVCTElTSDoodD1uZXcgdHIoZSkpLnN5bmNNc2c9ZS5zeW5jTXNnO2JyZWFrO2Nhc2UgV2UuUFVCX0FDSzp0PW5ldyBpcihlKTticmVhaztjYXNlIFdlLlFVRVJZX0FDSzp0PW5ldyBhcihlKTticmVhaztjYXNlIFdlLlNVQl9BQ0s6Y2FzZSBXZS5VTlNVQl9BQ0s6Y2FzZSBXZS5QSU5HX1JFU1A6dD1uZXcgWGkoZSk7YnJlYWs7Y2FzZSBXZS5ESVNDT05ORUNUOnQ9bmV3IHppKGUpO2JyZWFrO2RlZmF1bHQ6dD1uZXcgUWkoZSkscGUuZXJyb3IoXCJObyBzdXBwb3J0IGZvciBkZXNlcmlhbGl6aW5nIFwiK24rXCIgbWVzc2FnZXNcIil9cmV0dXJuIHR9OyFmdW5jdGlvbihlKXtlW2UucHBNc2dQPTFdPVwicHBNc2dQXCIsZVtlLnBwTXNnTj0yXT1cInBwTXNnTlwiLGVbZS5wcE1zZ1M9M109XCJwcE1zZ1NcIixlW2UucGdNc2dQPTRdPVwicGdNc2dQXCIsZVtlLmNoYXRNc2c9NV09XCJjaGF0TXNnXCIsZVtlLnBjTXNnUD02XT1cInBjTXNnUFwiLGVbZS5xcnlQTXNnPTddPVwicXJ5UE1zZ1wiLGVbZS5xcnlHTXNnPThdPVwicXJ5R01zZ1wiLGVbZS5xcnlDSE1zZz05XT1cInFyeUNITXNnXCIsZVtlLnFyeUNNc2c9MTBdPVwicXJ5Q01zZ1wiLGVbZS5xcnlTTXNnPTExXT1cInFyeVNNc2dcIixlW2UucmVjYWxsTXNnPTEyXT1cInJlY2FsbE1zZ1wiLGVbZS5wck1zZ1M9MTNdPVwicHJNc2dTXCIsZVtlLnJyTXNnPTE0XT1cInJyTXNnXCIsZVtlLnJyTGlzdD0xNV09XCJyckxpc3RcIixlW2Uuc19udGY9MTZdPVwic19udGZcIixlW2Uuc19tc2c9MTddPVwic19tc2dcIixlW2Uuc19zdGF0PTE4XT1cInNfc3RhdFwiLGVbZS5zX2NtZD0xOV09XCJzX2NtZFwiLGVbZS5zX3VzPTIwXT1cInNfdXNcIixlW2UucHVsbFVTPTIxXT1cInB1bGxVU1wiLGVbZS5wZ01zZ1M9MjJdPVwicGdNc2dTXCIsZVtlLmNoYXRNc2dTPTIzXT1cImNoYXRNc2dTXCIsZVtlLnFyeVNlc3Npb25zQXR0PTI0XT1cInFyeVNlc3Npb25zQXR0XCIsZVtlLnB1bGxNc2c9MjVdPVwicHVsbE1zZ1wiLGVbZS5xcnlTZXNzaW9ucz0yNl09XCJxcnlTZXNzaW9uc1wiLGVbZS5kZWxTZXNzaW9ucz0yN109XCJkZWxTZXNzaW9uc1wiLGVbZS5kZWxNc2c9MjhdPVwiZGVsTXNnXCIsZVtlLnVwZFJSVGltZT0yOV09XCJ1cGRSUlRpbWVcIixlW2UuY2hybVB1bGw9MzBdPVwiY2hybVB1bGxcIixlW2Uuam9pbkNocm09MzFdPVwiam9pbkNocm1cIixlW2Uuam9pbkNocm1SPTMyXT1cImpvaW5DaHJtUlwiLGVbZS5leGl0Q2hybT0zM109XCJleGl0Q2hybVwiLGVbZS5xdWVyeUNocm1JPTM0XT1cInF1ZXJ5Q2hybUlcIixlW2Uuc2V0S1Y9MzVdPVwic2V0S1ZcIixlW2UuZGVsS1Y9MzZdPVwiZGVsS1ZcIixlW2UucHVsbEtWPTM3XT1cInB1bGxLVlwiLGVbZS5xcnlSZWxhdGlvbj0zOF09XCJxcnlSZWxhdGlvblwiLGVbZS5kZWxSZWxhdGlvbj0zOV09XCJkZWxSZWxhdGlvblwiLGVbZS5wdWxsU2VBdHRzPTQwXT1cInB1bGxTZUF0dHNcIixlW2Uuc2V0U2VBdHQ9NDFdPVwic2V0U2VBdHRcIixlW2UucW5Ua249NDJdPVwicW5Ua25cIixlW2UucW5Vcmw9NDNdPVwicW5VcmxcIixlW2UuYWxpVXJsPTQ0XT1cImFsaVVybFwiLGVbZS5zM1VybD00NV09XCJzM1VybFwiLGVbZS5zdGNVcmw9NDZdPVwic3RjVXJsXCIsZVtlLmNsZWFuUE1zZz00N109XCJjbGVhblBNc2dcIixlW2UuY2xlYW5HTXNnPTQ4XT1cImNsZWFuR01zZ1wiLGVbZS5jbGVhbkNNc2c9NDldPVwiY2xlYW5DTXNnXCIsZVtlLmNsZWFuU01zZz01MF09XCJjbGVhblNNc2dcIixlW2UucnRjUkpvaW5fZGF0YT01MV09XCJydGNSSm9pbl9kYXRhXCIsZVtlLnJ0Y1JFeGl0PTUyXT1cInJ0Y1JFeGl0XCIsZVtlLnJ0Y1Bpbmc9NTNdPVwicnRjUGluZ1wiLGVbZS5ydGNTZXREYXRhPTU0XT1cInJ0Y1NldERhdGFcIixlW2UucnRjX250Zj01NV09XCJydGNfbnRmXCIsZVtlLnZpZXdlckpvaW5SPTU2XT1cInZpZXdlckpvaW5SXCIsZVtlLnZpZXdlckV4aXRSPTU3XT1cInZpZXdlckV4aXRSXCIsZVtlLnJ0Y1B1bGxLdj01OF09XCJydGNQdWxsS3ZcIixlW2UucnRjSWRlbnRpdHlDaGFuZ2U9NTldPVwicnRjSWRlbnRpdHlDaGFuZ2VcIixlW2UudXNlclNldERhdGE9NjBdPVwidXNlclNldERhdGFcIixlW2UucnRjUXJ5RGF0YT02MV09XCJydGNRcnlEYXRhXCIsZVtlLnJ0Y0RlbERhdGE9NjJdPVwicnRjRGVsRGF0YVwiLGVbZS5ydGNTZXRPdXREYXRhPTYzXT1cInJ0Y1NldE91dERhdGFcIixlW2UucnRjUXJ5VXNlck91dERhdGE9NjRdPVwicnRjUXJ5VXNlck91dERhdGFcIixlW2UucnRjVG9rZW49NjVdPVwicnRjVG9rZW5cIixlW2UucnRjVXNlclN0YXRlPTY2XT1cInJ0Y1VzZXJTdGF0ZVwiLGVbZS5ydGNSSW5mbz02N109XCJydGNSSW5mb1wiLGVbZS5ydGNVRGF0YT02OF09XCJydGNVRGF0YVwiLGVbZS5ydGNVUHV0PTY5XT1cInJ0Y1VQdXRcIixlW2UucnRjVURlbD03MF09XCJydGNVRGVsXCIsZVtlLnJ0Y1VMaXN0PTcxXT1cInJ0Y1VMaXN0XCIsZVtlLnJ0Y1F1ZXJ5Sm9pbmVkPTcyXT1cInJ0Y1F1ZXJ5Sm9pbmVkXCIsZVtlLmFkZFNlVGFnPTczXT1cImFkZFNlVGFnXCIsZVtlLmRlbFNlVGFnPTc0XT1cImRlbFNlVGFnXCIsZVtlLmFkZFRhZz03NV09XCJhZGRUYWdcIixlW2UuZGVsVGFnPTc2XT1cImRlbFRhZ1wiLGVbZS5kaXNUYWc9NzddPVwiZGlzVGFnXCIsZVtlLnJlcG9ydHNkaz03OF09XCJyZXBvcnRzZGtcIixlW2UucnRjSW52aXRlPTc5XT1cInJ0Y0ludml0ZVwiLGVbZS5ydGNDYW5jZWxJbnZpdGU9ODBdPVwicnRjQ2FuY2VsSW52aXRlXCIsZVtlLnJ0Y0ludml0ZUFuc3dlcj04MV09XCJydGNJbnZpdGVBbnN3ZXJcIixlW2UucnRjRW5kSW52aXRlPTgyXT1cInJ0Y0VuZEludml0ZVwifShwaXx8KHBpPXt9KSk7dmFyIGNyLGhyPXBpLGxyPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiB3KHZvaWQgMCx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciByO3JldHVybiBiKHRoaXMsKGZ1bmN0aW9uKHMpe3JldHVybiByPTAsZS5mb3JFYWNoKChmdW5jdGlvbihzKXtyZXR1cm4gdyh2b2lkIDAsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbyxhO3JldHVybiBiKHRoaXMsKGZ1bmN0aW9uKHUpe3N3aXRjaCh1LmxhYmVsKXtjYXNlIDA6cmV0dXJuIG89dCtcIjovL1wiK3MrXCIvcGluZz9yPVwiKyhoPTk5OTksKGM9MWUzKStNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqKGgtYykpKSxwZS5kZWJ1ZyhcInN0YXJ0IHBpbmdcIixvKSxbNCxuLmh0dHBSZXEoe3VybDpvLHRpbWVvdXQ6NWUzfSldO2Nhc2UgMTpyZXR1cm4gYT11LnNlbnQoKSxwZS5kZWJ1ZyhcImVuZCBwaW5nXCIscixvLGEuc3RhdHVzKSxyKyssaSh7ZmluaXNoZWQ6cj09PWUubGVuZ3RoLGNvZGU6YS5zdGF0dXMsaG9zdDpzfSksWzJdfXZhciBjLGh9KSl9KSl9KSksWzJdfSkpfSkpfSxkcj1mdW5jdGlvbihlLHQsbixpLHIscyxvLGEpe3JldHVybiBlK1wiOi8vXCIrdCtcIi93ZWJzb2NrZXQ/YXBwSWQ9XCIrbitcIiZ0b2tlbj1cIitlbmNvZGVVUklDb21wb25lbnQoaSkrXCImc2RrVmVyPVwiK3MrXCImcGlkPVwiK28rXCImYXBpVmVyPVwiKyhyLmlzRnJvbVVuaWFwcD9cInVuaWFwcFwiOlwibm9ybWFsXCIpKyhyLmNvbm5lY3RQbGF0Zm9ybT9cIiZwbGF0Zm9ybT1cIityLmNvbm5lY3RQbGF0Zm9ybTpcIlwiKSsoYT9cIiZwcm90b2NvbFZlcj1cIithOlwiXCIpfSxmcj1mdW5jdGlvbihlKXtyZXR1cm5baHIucHBNc2dTLGhyLnBnTXNnUyxoci5jaGF0TXNnU10ubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gaHJbZV19KSkuaW5kZXhPZihlKT49MH07IWZ1bmN0aW9uKGUpe2VbZS5SRURJUkVDVD0wXT1cIlJFRElSRUNUXCIsZVtlLk9USEVSX0RFVklDRV9MT0dJTj0xXT1cIk9USEVSX0RFVklDRV9MT0dJTlwiLGVbZS5CTE9DSz0yXT1cIkJMT0NLXCIsZVtlLlJFTU9URV9DTE9TRT0zXT1cIlJFTU9URV9DTE9TRVwiLGVbZS5MT0dPVVQ9NF09XCJMT0dPVVRcIixlW2UuQkxPQ0tfTkVXPTVdPVwiQkxPQ0tfTkVXXCIsZVtlLlJFRElSRUNUX05FVz02XT1cIlJFRElSRUNUX05FV1wifShjcnx8KGNyPXt9KSk7dmFyIHByLGdyPWZ1bmN0aW9uKGUsdCl7cGUuaW5mbyhcIndlYnNvY2tldCBzZW5kIC0+IG1lc3NhZ2VJZDogXCIrZS5tZXNzYWdlSWQrXCIgdG9waWM6IFwiK2UudG9waWMpO3ZhciBuPWUuZ2V0QnVmZmVyRGF0YSgpO3Quc2VuZChuLmJ1ZmZlcil9LF9yPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxuKXt2YXIgaT1lLmNhbGwodGhpcyxcIndlYnNvY2tldFwiLG4pfHx0aGlzO3JldHVybiBpLl9ydW50aW1lPXQsaS5fc29ja2V0PW51bGwsaS5fbWVzc2FnZUlkcz17fSxpLl9zeW5jTWVzc2FnZUlkcz17fSxpLl9mYWlsZWRDb3VudD0wLGkuQUxMT1dfRkFJTEVEX1RJTUVTPTIsaS5fdGltZXI9bnVsbCxpLl9pZENvdW50PTAsaS5fZ2VuZXJhdGVNZXNzYWdlSWQ9ZnVuY3Rpb24oKXtyZXR1cm4gaS5faWRDb3VudD49NjU1MzUmJihpLl9pZENvdW50PTApLCsraS5faWRDb3VudH0saX1yZXR1cm4gTih0LGUpLHQucHJvdG90eXBlLmNvbm5lY3Q9ZnVuY3Rpb24oZSx0LG4saSxyLHMpe3JldHVybiB3KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbz10aGlzO3JldHVybiBiKHRoaXMsKGZ1bmN0aW9uKGEpe3JldHVyblsyLG5ldyBQcm9taXNlKChmdW5jdGlvbihhKXt2YXIgdT1bXSxjPTAsaD0hMSxsPSExLGQ9ZnVuY3Rpb24oKXtyZXR1cm4gdyhvLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG47cmV0dXJuIGIodGhpcywoZnVuY3Rpb24obyl7c3dpdGNoKG8ubGFiZWwpe2Nhc2UgMDpyZXR1cm4gMD09PXUubGVuZ3RofHxoP1syXTooaD0hMCxbNCx0aGlzLl9jb25uZWN0KGUsdCx1LnNoaWZ0KCksaSxyLHMpXSk7Y2FzZSAxOmlmKChuPW8uc2VudCgpKT09PUVlLlNVQ0NFU1MpdGhpcy5fY2hlY2tBbGl2ZSgpLGEobik7ZWxzZSBpZihuPT09VGUuUkVESVJFQ1QpYShuKTtlbHNle2lmKGwmJjA9PT11Lmxlbmd0aClyZXR1cm4gYSh5dChuKSksWzJdO2g9ITEsZCgpfXJldHVyblsyXX19KSl9KSl9O3I9eChyKSxvLl93YXRjaGVyLnN0YXR1cyhJZS5DT05ORUNUSU5HKSxscihuLGksby5fcnVudGltZSwoZnVuY3Rpb24oZSl7dmFyIHQ9ZS5jb2RlLG49ZS5maW5pc2hlZCxpPWUuaG9zdDtsPW4sMjAwPT09dCYmKHUucHVzaChpKSxjKyssZCgpKSxuJiYwPT09YyYmKHBlLmVycm9yKFwiTm8gdmFsaWQgd2Vic29ja2V0IHNlcnZlciBob3N0cyFcIiksYShFZS5SQ19TT0NLRVRfTk9UX0NSRUFURUQpKX0pKX0pKV19KSl9KSl9LHQucHJvdG90eXBlLl9jb25uZWN0PWZ1bmN0aW9uKGUsdCxuLGkscixzKXtyZXR1cm4gdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG8sYSx1LGMsaCxsPXRoaXM7cmV0dXJuIGIodGhpcywoZnVuY3Rpb24oZCl7c3dpdGNoKGQubGFiZWwpe2Nhc2UgMDpyZXR1cm4gbz1pLnJlcGxhY2UoXCJodHRwXCIsXCJ3c1wiKSxhPWRyKG8sbixlLHQsdGhpcy5fcnVudGltZSxyLFwiXCIscykscGUuZGVidWcoXCJjb25lbmN0IHN0YXJ0IC0+IFwiK2EpLHRoaXMuc2VuZENvbm5lY3RUaW1lPURhdGUubm93KCksdT10aGlzLl9ydW50aW1lLmNyZWF0ZVdlYlNvY2tldChhKSxjPWZ1bmN0aW9uKGUpe2wuX3RpbWVyJiYoY2xlYXJUaW1lb3V0KGwuX3RpbWVyKSxsLl90aW1lcj1udWxsKSxsLl9zb2NrZXQ9PT11JiYobC5fc29ja2V0PW51bGwsbC5fd2F0Y2hlci5zdGF0dXMoZSkpfSxbNCxuZXcgUHJvbWlzZSgoZnVuY3Rpb24oZSl7dS5vbk1lc3NhZ2UoKGZ1bmN0aW9uKHQpe2lmKFwiW29iamVjdCBBcnJheUJ1ZmZlcl1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KSl7dmFyIG49ZnVuY3Rpb24oZSx0KXt2YXIgbj1uZXcgVWludDhBcnJheShlKSxpPW5ldyBSdChuKSxyPWkucmVhZEJ5dGUoKSxzPW5ldyBUdChyKSxvPXVyKHMpO3JldHVybiBvLnJlYWQoaSxuLmxlbmd0aC0xLHQpLG99KHQscyk7aWYobiBpbnN0YW5jZW9mIFhpJiZsLl9waW5nUmVzb2x2ZSlyZXR1cm4gbC5fcGluZ1Jlc29sdmUoRWUuU1VDQ0VTUyksdm9pZChsLl9waW5nUmVzb2x2ZT12b2lkIDApO2lmKG4gaW5zdGFuY2VvZiBKaSlyZXR1cm4gcGUuZGVidWcoXCJyZWN2IGNvbm5lY3QgYWNrIC0+IFwiK24uc3RhdHVzKSxuLnN0YXR1cyE9PVRlLkFDQ0VQVEVEPyhwZS53YXJuKFwiY29ubmVjdCBmYWlsZWQ6IFwiK24uc3RhdHVzKSx2b2lkIGUobi5zdGF0dXMpKToocGUuaW5mbyhcImNvbm5lY3Qgc3VjY2VzcyAtPiBcIithKSxsLmNvbm5lY3RlZFRpbWU9bi50aW1lc3RhbXAsbC51c2VySWQ9bi51c2VySWR8fFwiXCIsbC5faWRDb3VudD1uLm1lc3NhZ2VJZCx2b2lkIGUoRWUuU1VDQ0VTUykpO2lmKG4gaW5zdGFuY2VvZiB6aSl7dmFyIGk9bi5zdGF0dXM7c3dpdGNoKHBlLndhcm4oXCJyZWN2IGRpc2Nvbm5lY3Qgc2lnbmFsIC0+IHN0YXR1czogXCIraSksaSl7Y2FzZSBjci5CTE9DS19ORVc6Y2FzZSBjci5CTE9DSzpsLl93YXRjaGVyLnN0YXR1cyhJZS5CTE9DS0VEKTticmVhaztjYXNlIGNyLk9USEVSX0RFVklDRV9MT0dJTjpsLl93YXRjaGVyLnN0YXR1cyhJZS5LSUNLRURfT0ZGTElORV9CWV9PVEhFUl9DTElFTlQpO2JyZWFrO2Nhc2UgY3IuUkVESVJFQ1RfTkVXOmNhc2UgY3IuUkVESVJFQ1Q6bC5fd2F0Y2hlci5zdGF0dXMoSWUuUkVESVJFQ1QpO2JyZWFrO2RlZmF1bHQ6bC5fd2F0Y2hlci5zdGF0dXMoSWUuRElTQ09OTkVDVF9CWV9TRVJWRVIpfX1lbHNlIGwuX29uUmVjZWl2ZVNpZ25hbChuKX1lbHNlIHBlLmVycm9yKFwiU29ja2V0IHJlY2VpdmVkIGludmFsaWQgZGF0YTpcIix0KX0pKSx1Lm9uQ2xvc2UoKGZ1bmN0aW9uKHQsbil7Zm9yKHZhciBpIGluIHBlLndhcm4oXCJ3ZWJzb2NrZXQgY2xvc2VkISBjb2RlOlwiLHQsXCJyZWFzb246XCIsbiksYyhJZS5DT05ORUNUSU9OX0NMT1NFRCksbC5fbWVzc2FnZUlkcyl7dmFyIHI9bC5fbWVzc2FnZUlkc1tpXTtkZWxldGUgbC5fbWVzc2FnZUlkc1tpXSxyKEVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSUQpfWUodCl9KSksdS5vbkVycm9yKChmdW5jdGlvbih0KXt2YXIgbjtmb3IodmFyIGkgaW4gcGUuZXJyb3IoXCJ3ZWJzb2NrZXQgZXJyb3IhXCIsbnVsbD09PShuPXQpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLnN0YWNrKSxjKEllLldFQlNPQ0tFVF9FUlJPUiksbC5fbWVzc2FnZUlkcyl7dmFyIHI9bC5fbWVzc2FnZUlkc1tpXTtkZWxldGUgbC5fbWVzc2FnZUlkc1tpXSxyKEVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSUQpfWUoRWUuTkVUV09SS19FUlJPUil9KSksdS5vbk9wZW4oKGZ1bmN0aW9uKCl7cmV0dXJuIHBlLmRlYnVnKFwid2Vic29ja2V0IG9wZW4gPT5cIixhKX0pKSxzZXRUaW1lb3V0KChmdW5jdGlvbigpe2UoRWUuVElNRU9VVCl9KSw1ZTMpfSkpXTtjYXNlIDE6cmV0dXJuKGg9ZC5zZW50KCkpPT09RWUuU1VDQ0VTUz90aGlzLl9zb2NrZXQ9dToocGUud2FybihcImNvbm5lY3QgcmVzdWx0IC0+IGNvZGU6IFwiK2grXCIsIHVybDogXCIrYSksdS5jbG9zZSgpKSxbMixoXX19KSl9KSl9LHQucHJvdG90eXBlLl9jaGVja0FsaXZlPWZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuIHcodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciB0LG49dGhpcztyZXR1cm4gYih0aGlzLChmdW5jdGlvbihpKXtzd2l0Y2goaS5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9zb2NrZXQ/KHBlLmRlYnVnKFwic2VuZCBwaW5nIC0+XCIpLHRoaXMuc2VuZE9ubHkobmV3IFppKSxbNCxuZXcgUHJvbWlzZSgoZnVuY3Rpb24oZSl7bi5fcGluZ1Jlc29sdmU9ZSxuLl90aW1lciYmY2xlYXJUaW1lb3V0KG4uX3RpbWVyKSxuLl90aW1lcj1zZXRUaW1lb3V0KChmdW5jdGlvbigpe24uX3BpbmdSZXNvbHZlPXZvaWQgMCxlKEVlLlRJTUVPVVQpfSksMTVlMyl9KSldKTpbMl07Y2FzZSAxOnJldHVybih0PWkuc2VudCgpKSE9PUVlLlNVQ0NFU1M/KHRoaXMuX2ZhaWxlZENvdW50Kz0xLHBlLndhcm4oXCJwaW5nIGZhaWxlZCBjb3VudDogXCIrdGhpcy5fZmFpbGVkQ291bnQrXCIsIGNvZGU6IFwiK3QpLHRoaXMuX2ZhaWxlZENvdW50Pj10aGlzLkFMTE9XX0ZBSUxFRF9USU1FUz8odGhpcy5fZmFpbGVkQ291bnQ9MCxwZS53YXJuKFwicGluZyB0aW1lb3V0LCBjbG9zZSBjdXJyZW50IHdlYnNvY2tldCB0byByZWNvbm5lY3QhXCIpLG51bGw9PT0oZT10aGlzLl9zb2NrZXQpfHx2b2lkIDA9PT1lfHxlLmNsb3NlKCksdGhpcy5fd2F0Y2hlci5zdGF0dXMoSWUuTkVUV09SS19VTkFWQUlMQUJMRSkpOnRoaXMuX2NoZWNrQWxpdmUoKSxbMl0pOihwZS5kZWJ1ZyhcInJlY3YgcG9uZyA8LVwiKSx0aGlzLl9mYWlsZWRDb3VudD0wLHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7cmV0dXJuIG4uX2NoZWNrQWxpdmUoKX0pLDE1ZTMpLFsyXSl9fSkpfSkpfSx0LnByb3RvdHlwZS5fb25SZWNlaXZlU2lnbmFsPWZ1bmN0aW9uKGUpe3JldHVybiB3KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgdCxuLGkscixzLG8sYT10aGlzO3JldHVybiBiKHRoaXMsKGZ1bmN0aW9uKHUpe3N3aXRjaCh1LmxhYmVsKXtjYXNlIDA6cmV0dXJuIHQ9ZS5tZXNzYWdlSWQsZS5oZWFkZXImJmUuaGVhZGVyLnFvcyE9PVFlLkFUX01PU1RfT05DRSYmKGUgaW5zdGFuY2VvZiB0ciYmIWUuc3luY01zZyYmKHBlLmluZm8oXCJzZW5kIHB1YkFjayAtPiBcIit0K1wiIFwiK2UudG9waWMpLHRoaXMuc2VuZE9ubHkobmV3IHJyKHQpKSksZSBpbnN0YW5jZW9mIGFyJiYocGUuaW5mbyhcInNlbmQgcXVlcnlDb24gLT4gXCIrdCtcIiBcIitlLnRvcGljKSx0aGlzLnNlbmRPbmx5KG5ldyBvcih0KSkpKSx0PjAmJihlIGluc3RhbmNlb2YgaXJ8fGUgaW5zdGFuY2VvZiBhcikmJihwZS5pbmZvKFwicmVjdiBhY2sgLT4gbWVzc2FnZUlkOiBcIit0K1wiIFwiK2UudG9waWMpLChuPXRoaXMuX21lc3NhZ2VJZHNbdF0pJiYobihlKSxkZWxldGUgdGhpcy5fbWVzc2FnZUlkc1t0XSksKGk9dGhpcy5fc3luY01lc3NhZ2VJZHNbdF0pJiYoZGVsZXRlIHRoaXMuX3N5bmNNZXNzYWdlSWRzW3RdLGkoZSkpKSxlIGluc3RhbmNlb2YgdHI/KHI9ZS5zeW5jTXNnLHM9ZS50b3BpYyxwZS5pbmZvKFwicmVjdiBQdWJsaXNoUmVhZGVyIC0+IG1lc3NhZ2VJZDogXCIrdCtcIiBcIitzKSxzPT09aHJbaHIudXNlclNldERhdGFdP1syXTohcnx8ZnIocyk/KHRoaXMuX3dhdGNoZXIuc2lnbmFsKGUpLFsyXSk6WzQsbmV3IFByb21pc2UoKGZ1bmN0aW9uKGUpe2EuX3N5bmNNZXNzYWdlSWRzW3RdPWV9KSldKTpbMywyXTtjYXNlIDE6bz11LnNlbnQoKSxkZWxldGUgdGhpcy5fc3luY01lc3NhZ2VJZHNbdF0sdGhpcy5fd2F0Y2hlci5zaWduYWwoZSxvKSx1LmxhYmVsPTI7Y2FzZSAyOnJldHVyblsyXX19KSl9KSl9LHQucHJvdG90eXBlLnNlbmRPbmx5PWZ1bmN0aW9uKGUpe3RoaXMuX3NvY2tldCYmKChlIGluc3RhbmNlb2YgbnJ8fGUgaW5zdGFuY2VvZiBzcikmJihlLm1lc3NhZ2VJZD10aGlzLl9nZW5lcmF0ZU1lc3NhZ2VJZCgpKSxncihlLHRoaXMuX3NvY2tldCkpfSx0LnByb3RvdHlwZS5zZW5kPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiB2b2lkIDA9PT1pJiYoaT0zZTQpLHcodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciByLHMsbyxhPXRoaXM7cmV0dXJuIGIodGhpcywoZnVuY3Rpb24odSl7c3dpdGNoKHUubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5fc29ja2V0PyhyPXRoaXMuX2dlbmVyYXRlTWVzc2FnZUlkKCksZS5tZXNzYWdlSWQ9cixncihlLHRoaXMuX3NvY2tldCksWzQsbmV3IFByb21pc2UoKGZ1bmN0aW9uKGUpe2EuX21lc3NhZ2VJZHNbcl09ZSxzZXRUaW1lb3V0KChmdW5jdGlvbigpe2EuX21lc3NhZ2VJZHNbcl0mJmRlbGV0ZSBhLl9tZXNzYWdlSWRzW3JdLGUoKX0pLGkpfSkpXSk6WzMsMl07Y2FzZSAxOnJldHVybihzPXUuc2VudCgpKT9zIGluc3RhbmNlb2YgYXJ8fHMgaW5zdGFuY2VvZiBpcj8obz10JiZzLmRhdGE/dGhpcy5jb2RlYy5kZWNvZGVCeVBCTmFtZShzLmRhdGEsdCxuKTpzLDAhPT1zLnN0YXR1cz8ocGUud2FybihcInNlbmQgZmFpbGVkIC0+IG1lc3NhZ2U6IFwiK3IrXCIsIHJlc3BQQk5hbWU6IFwiK3QrXCIsIHN0YXR1czogXCIrcy5zdGF0dXMpLFsyLHtjb2RlOnMuc3RhdHVzLGRhdGE6dCYmcy5kYXRhP286bnVsbH1dKTpbMix7Y29kZTpFZS5TVUNDRVNTLGRhdGE6b31dKTpbMix7Y29kZTpzfV06KHBlLndhcm4oXCJzZW5kIHRpbWVvdXQgLT4gbWVzc2FnZTogXCIrcitcIiwgcmVzcFBCTmFtZTogXCIrdCtcIiwgdGltZW91dDogXCIraSksWzIse2NvZGU6RWUuVElNRU9VVH1dKTtjYXNlIDI6cmV0dXJuWzIse2NvZGU6RWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRH1dfX0pKX0pKX0sdC5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oKXt0aGlzLl9zb2NrZXQmJih0aGlzLl9zb2NrZXQuY2xvc2UoKSx0aGlzLl9zb2NrZXQ9bnVsbCx0aGlzLl93YXRjaGVyLnN0YXR1cyhJZS5ESVNDT05ORUNURUQpKX0sdH0oR2kpOyFmdW5jdGlvbihlKXtlLkdFVD1cIkdFVFwiLGUuUE9TVD1cIlBPU1RcIn0ocHJ8fChwcj17fSkpO3ZhciB5cj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQsbil7dmFyIGk9ZS5jYWxsKHRoaXMsXCJjb21ldFwiLG4pfHx0aGlzO3JldHVybiBpLl9ydW50aW1lPXQsaS5fbWVzc2FnZUlkcz17fSxpLl9zeW5jTWVzc2FnZUlkcz17fSxpLl9pZENvdW50PTAsaS5fZ2VuZXJhdGVNZXNzYWdlSWQ9ZnVuY3Rpb24oKXtyZXR1cm4rK2kuX2lkQ291bnR9LGkuX3BpZD1lbmNvZGVVUklDb21wb25lbnQoKG5ldyBEYXRlKS5nZXRUaW1lKCkrTWF0aC5yYW5kb20oKStcIlwiKSxpfXJldHVybiBOKHQsZSksdC5wcm90b3R5cGUuaGFuZGxlQ29tZXRSZXM9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZigyMDAhPT1lLnN0YXR1cyYmMjAyIT09ZS5zdGF0dXMpcmV0dXJuITE7dmFyIG49SihlLmRhdGEpP0pTT04ucGFyc2UoZS5kYXRhKTplLmRhdGE7cmV0dXJuIG4/IVgobil8fChjdChuLChmdW5jdGlvbihlKXtyZXR1cm4gdyh0LHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHQsbixpLHIscyxvLGEsdSxjLGgsbCxkPXRoaXM7cmV0dXJuIGIodGhpcywoZnVuY3Rpb24oZil7c3dpdGNoKGYubGFiZWwpe2Nhc2UgMDppZigodD1lLnNlc3Npb25pZCkmJih0aGlzLl9zZXNzaW9uaWQ9dCksbj1mdW5jdGlvbihlKXt2YXIgdD1lLmhlYWRlckNvZGUsbj1uZXcgVHQodCksaT11cihuKTtmb3IodmFyIHIgaW4gZSlpW3JdPWVbcl07cmV0dXJuIGl9KGUpLGk9bi5tZXNzYWdlSWQscj1uLl9oZWFkZXIscz1uLnN0YXR1cyxuLmlkZW50aWZpZXIsbz1yJiZyLnFvcyE9PVFlLkFUX01PU1RfT05DRSxpJiZuLmdldElkZW50aWZpZXImJigoYT10aGlzLl9tZXNzYWdlSWRzW2ldKSYmYShuKSx0aGlzLl9zeW5jTWVzc2FnZUlkc1tpXSYmdGhpcy5fc3luY01lc3NhZ2VJZHNbaV0obikpLG8mJihuIGluc3RhbmNlb2YgdHImJiFuLnN5bmNNc2cmJih1PW5ldyBycihpKSx0aGlzLnNlbmRPbmx5KHUpKSxuIGluc3RhbmNlb2YgYXImJih1PW5ldyBvcihpKSx0aGlzLnNlbmRPbmx5KHUpKSksbiBpbnN0YW5jZW9mIHppKXtzd2l0Y2gocyl7Y2FzZSBjci5PVEhFUl9ERVZJQ0VfTE9HSU46dGhpcy5fd2F0Y2hlci5zdGF0dXMoSWUuS0lDS0VEX09GRkxJTkVfQllfT1RIRVJfQ0xJRU5UKTticmVhaztjYXNlIGNyLkJMT0NLOmNhc2UgY3IuQkxPQ0tfTkVXOnRoaXMuX3dhdGNoZXIuc3RhdHVzKEllLkJMT0NLRUQpO2JyZWFrO2Nhc2UgY3IuUkVESVJFQ1RfTkVXOmNhc2UgY3IuUkVESVJFQ1Q6dGhpcy5fd2F0Y2hlci5zdGF0dXMoSWUuUkVESVJFQ1QpO2JyZWFrO2RlZmF1bHQ6dGhpcy5fd2F0Y2hlci5zdGF0dXMoSWUuRElTQ09OTkVDVF9CWV9TRVJWRVIpfXJldHVyblsyXX1yZXR1cm4gbiBpbnN0YW5jZW9mIHRyPyhjPW4uc3luY01zZyxoPW4udG9waWMsIWN8fGZyKGgpPyh0aGlzLl93YXRjaGVyLnNpZ25hbChuKSxbMiwhMV0pOls0LG5ldyBQcm9taXNlKChmdW5jdGlvbihlKXtkLl9zeW5jTWVzc2FnZUlkc1tpXT1lfSkpXSk6WzMsMl07Y2FzZSAxOmw9Zi5zZW50KCksZGVsZXRlIHRoaXMuX3N5bmNNZXNzYWdlSWRzW2ldLHRoaXMuX3dhdGNoZXIuc2lnbmFsKG4sbCksZi5sYWJlbD0yO2Nhc2UgMjpyZXR1cm5bMl19fSkpfSkpfSkpLCEwKToocGUuZXJyb3IoXCJyZWNlaXZlZCBkYXRhIGlzIG5vdCBhIHZhbGlkSnNvblwiLG4pLCExKX0sdC5wcm90b3R5cGUuX3N0YXJ0UHVsbFNpZ25hbD1mdW5jdGlvbihlKXtyZXR1cm4gdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHQsbixpLHI7cmV0dXJuIGIodGhpcywoZnVuY3Rpb24ocyl7c3dpdGNoKHMubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdD0obmV3IERhdGUpLmdldFRpbWUoKSxuPWUrXCI6Ly9cIit0aGlzLl9kb21haW4rXCIvcHVsbG1zZy5qcz9zZXNzaW9uaWQ9XCIrdGhpcy5fc2Vzc2lvbmlkK1wiJnRpbWVzdHJhcD1cIit0K1wiJnBpZD1cIit0aGlzLl9waWQsWzQsdGhpcy5fcnVudGltZS5odHRwUmVxKHt1cmw6bixib2R5OntwaWQ6dGhpcy5fcGlkfSx0aW1lb3V0OjQ1ZTN9KV07Y2FzZSAxOnJldHVybiBpPXMuc2VudCgpLHI9dGhpcy5oYW5kbGVDb21ldFJlcyhpKSx0aGlzLl9pc0Rpc2Nvbm5lY3RlZHx8KHI/dGhpcy5fc3RhcnRQdWxsU2lnbmFsKGUpOih0aGlzLl9pc0Rpc2Nvbm5lY3RlZD0hMCx0aGlzLl93YXRjaGVyLnN0YXR1cyhJZS5ORVRXT1JLX1VOQVZBSUxBQkxFKSkpLFsyXX19KSl9KSl9LHQucHJvdG90eXBlLmNvbm5lY3Q9ZnVuY3Rpb24oZSx0LG4saSxyLHMpe3JldHVybiB3KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgcyxvLGEsdSxjPXRoaXM7cmV0dXJuIGIodGhpcywoZnVuY3Rpb24oaCl7cmV0dXJuIHI9eChyKSx0aGlzLl9wcm90b2NvbD1pLHRoaXMuX2lzRGlzY29ubmVjdGVkPSExLHRoaXMuX3dhdGNoZXIuc3RhdHVzKEllLkNPTk5FQ1RJTkcpLHM9W10sbz0wLGE9ITEsdT0hMSxbMixuZXcgUHJvbWlzZSgoZnVuY3Rpb24oaCl7dmFyIGw9ZnVuY3Rpb24oKXtyZXR1cm4gdyhjLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG47cmV0dXJuIGIodGhpcywoZnVuY3Rpb24obyl7c3dpdGNoKG8ubGFiZWwpe2Nhc2UgMDpyZXR1cm4gMD09PXMubGVuZ3RofHxhP1syXTooYT0hMCxbNCx0aGlzLl9jb25uZWN0KGUsdCxzLnNoaWZ0KCksaSxyKV0pO2Nhc2UgMTppZigobj1vLnNlbnQoKSk9PT1FZS5TVUNDRVNTKXRoaXMuX3N0YXJ0UHVsbFNpZ25hbChpKSxoKG4pO2Vsc2UgaWYobj09PVRlLlJFRElSRUNUKWgobik7ZWxzZXtpZih1JiYwPT09cy5sZW5ndGgpcmV0dXJuIGgoeXQobikpLFsyXTthPSExLGwoKX1yZXR1cm5bMl19fSkpfSkpfTtjLl93YXRjaGVyLnN0YXR1cyhJZS5DT05ORUNUSU5HKSxscihuLGksYy5fcnVudGltZSwoZnVuY3Rpb24oZSl7dmFyIHQ9ZS5jb2RlLG49ZS5maW5pc2hlZCxpPWUuaG9zdDt1PW4sMjAwPT09dCYmKHMucHVzaChpKSxvKyssbCgpKSxuJiYwPT09byYmKHBlLmVycm9yKFwiTm8gdmFsaWQgd2Vic29ja2V0IHNlcnZlciBob3N0cyFcIiksaChFZS5SQ19TT0NLRVRfTk9UX0NSRUFURUQpKX0pKX0pKV19KSl9KSl9LHQucHJvdG90eXBlLl9jb25uZWN0PWZ1bmN0aW9uKGUsdCxuLGkscil7cmV0dXJuIHcodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBzLG8sYSx1O3JldHVybiBiKHRoaXMsKGZ1bmN0aW9uKGMpe3N3aXRjaChjLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHM9ZnVuY3Rpb24oZSl7cmV0dXJuIDIwMCE9PWUuc3RhdHVzJiYyMDIhPT1lLnN0YXR1cz8ocGUuZXJyb3IoXCJoYW5kbGUgY29tZXQgcmVzIC0+IHJlczogXCIrSlNPTi5zdHJpbmdpZnkoZXx8e30pKSwhMSk6ISFlLmRhdGEmJihmdW5jdGlvbihlKXtpZihuZShlKSlyZXR1cm4hMDt2YXIgdD0hMTt0cnl7dmFyIG49SlNPTi5wYXJzZShlKTt0PUpTT04uc3RyaW5naWZ5KG4pPT09ZX1jYXRjaChlKXt0PSExfXJldHVybiB0fShlLmRhdGEpP25lKGUuZGF0YSk/ZS5kYXRhOkpTT04ucGFyc2UoZS5kYXRhKToocGUuZXJyb3IoXCJyZWNlaXZlZCBkYXRhIGlzIG5vdCBhIHZhbGlkSnNvblwiLGUuZGF0YSksITEpKX0sbz1kcihpLG4sZSx0LHRoaXMuX3J1bnRpbWUscix0aGlzLl9waWQpLHRoaXMuc2VuZENvbm5lY3RUaW1lPURhdGUubm93KCkscGUuZGVidWcoXCJjb25lbmN0IHN0YXJ0IC0+IFwiK28pLFs0LHRoaXMuX3J1bnRpbWUuaHR0cFJlcSh7dXJsOm8sYm9keTp7cGlkOnRoaXMuX3BpZH0sdGltZW91dDo1ZTN9KV07Y2FzZSAxOnJldHVybiBhPWMuc2VudCgpLHU9cyhhKSx0aGlzLl9kb21haW49bix1JiYwPT09dS5zdGF0dXM/KHRoaXMuX3Nlc3Npb25pZD11LnNlc3Npb25pZCx0aGlzLnVzZXJJZD11LnVzZXJJZCx0aGlzLmNvbm5lY3RlZFRpbWU9dS50aW1lc3RhbXApOnBlLndhcm4oXCJjb25uZWN0IHJlc3VsdCAtPiBjb2RlOiBcIisobnVsbD09dT92b2lkIDA6dS5zdGF0dXMpK1wiLCB1cmw6IFwiK28pLFsyLG51bGw9PXU/dm9pZCAwOnUuc3RhdHVzXX19KSl9KSl9LHQucHJvdG90eXBlLnNlbmRDb21ldERhdGE9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHQsbixpLHIscyxvLGEsdSxjLGg7cmV0dXJuIGIodGhpcywoZnVuY3Rpb24obCl7c3dpdGNoKGwubGFiZWwpe2Nhc2UgMDpyZXR1cm4gbj0odD10aGlzKS5fZG9tYWluLGk9dC5fc2Vzc2lvbmlkLHI9dC5fcGlkLHM9ZS5tZXNzYWdlSWQsbz1lLnRvcGljLGE9ZS50YXJnZXRJZCxlLmlkZW50aWZpZXIsdT1lLmdldEhlYWRlckZsYWcoKSxjPW8/dGhpcy5fcHJvdG9jb2wrXCI6Ly9cIituK1wiL3dlYnNvY2tldD9tZXNzYWdlaWQ9XCIrcytcIiZoZWFkZXI9XCIrdStcIiZzZXNzaW9uaWQ9XCIraStcIiZ0b3BpYz1cIitvK1wiJnRhcmdldGlkPVwiK2ErXCImcGlkPVwiK3I6dGhpcy5fcHJvdG9jb2wrXCI6Ly9cIituK1wiL3dlYnNvY2tldD9tZXNzYWdlaWQ9XCIrcytcIiZoZWFkZXI9XCIrdStcIiZzZXNzaW9uaWQ9XCIraStcIiZwaWQ9XCIrcixbNCx0aGlzLl9ydW50aW1lLmh0dHBSZXEoe3VybDpjLG1ldGhvZDpwci5QT1NULGJvZHk6ZS5nZXRDb21ldERhdGEoKX0pXTtjYXNlIDE6cmV0dXJuIGg9bC5zZW50KCksdGhpcy5oYW5kbGVDb21ldFJlcyhoKSxbMl19fSkpfSkpfSx0LnByb3RvdHlwZS5zZW5kT25seT1mdW5jdGlvbihlKXt0aGlzLnNlbmRDb21ldERhdGEoZSl9LHQucHJvdG90eXBlLnNlbmQ9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIHZvaWQgMD09PWkmJihpPTNlNCksdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHIscyxvLGE9dGhpcztyZXR1cm4gYih0aGlzLChmdW5jdGlvbih1KXtzd2l0Y2godS5sYWJlbCl7Y2FzZSAwOnJldHVybiByPXRoaXMuX2dlbmVyYXRlTWVzc2FnZUlkKCksZS5tZXNzYWdlSWQ9cix0aGlzLnNlbmRDb21ldERhdGEoZSksWzQsbmV3IFByb21pc2UoKGZ1bmN0aW9uKGUpe2EuX21lc3NhZ2VJZHNbcl09ZSxzZXRUaW1lb3V0KChmdW5jdGlvbigpe2RlbGV0ZSBhLl9tZXNzYWdlSWRzW3JdLGUoKX0pLGkpfSkpXTtjYXNlIDE6cmV0dXJuKHM9dS5zZW50KCkpPyhvPXQmJnMuZGF0YT90aGlzLmNvZGVjLmRlY29kZUJ5UEJOYW1lKHMuZGF0YSx0LG4pOnMsMCE9PXMuc3RhdHVzP1syLHtjb2RlOnMuc3RhdHVzLGRhdGE6dCYmcy5kYXRhP286bnVsbH1dOlsyLHtjb2RlOkVlLlNVQ0NFU1MsZGF0YTpvfV0pOlsyLHtjb2RlOkVlLlRJTUVPVVR9XX19KSl9KSl9LHQucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uKCl7dGhpcy5faXNEaXNjb25uZWN0ZWQ9ITAsdGhpcy5fd2F0Y2hlci5zdGF0dXMoSWUuRElTQ09OTkVDVEVEKX0sdH0oR2kpLHZyPWZ1bmN0aW9uKGUsdCxuKXt0aGlzLnJ1bnRpbWU9ZSx0aGlzLl93YXRjaGVyPXQsdGhpcy5fb3B0aW9ucz1uLHRoaXMuY3VycmVudFVzZXJJZD1cIlwiLHRoaXMuX2FwcGtleT10aGlzLl9vcHRpb25zLmFwcGtleSx0aGlzLl9hcGlWZXI9dGhpcy5fb3B0aW9ucy5hcGlWZXJzaW9uLHRoaXMubmF2aT10aGlzLl9jcmVhdGVOYXZpKCl9LEVyPWZ1bmN0aW9uKGUpe3JldHVybltcIm5hdmlcIixlXS5qb2luKFwiX1wiKX0sbXI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dGhpcy5fcnVudGltZT1lLHRoaXMuX29wdGlvbnM9dCx0aGlzLl9uYXZpSW5mbz1udWxsLHRoaXMuX2FwcGtleT10aGlzLl9vcHRpb25zLmFwcGtleSx0aGlzLl9hcGlWZXJzaW9uPXgodGhpcy5fb3B0aW9ucy5hcGlWZXJzaW9uKX1yZXR1cm4gZS5wcm90b3R5cGUuZ2V0SW5mbz1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHIscztyZXR1cm4gYih0aGlzLChmdW5jdGlvbihvKXtzd2l0Y2goby5sYWJlbCl7Y2FzZSAwOnJldHVybiBuJiZ0aGlzLl9jbGVhcihlKSwocj1mdW5jdGlvbihlLHQsbil7dmFyIGkscixzPUVyKGUpO3RyeXt2YXIgbz1uLmdldEl0ZW0ocyk7cj1vP0pTT04ucGFyc2Uobyk6W119Y2F0Y2goZSl7cj1bXX12YXIgYT1EYXRlLm5vdygpO3JldHVybiByLmxlbmd0aD4wJiYocj1yLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIGEtZS50aW1lc3RhbXA8NzJlNX0pKSksMD09PXIubGVuZ3RoP24ucmVtb3ZlSXRlbShzKTpuLnNldEl0ZW0ocyxKU09OLnN0cmluZ2lmeShyKSksKG51bGw9PT0oaT1yLmZpbmQoKGZ1bmN0aW9uKGUpe3JldHVybiBlLnRva2VuPT09dH0pKSl8fHZvaWQgMD09PWk/dm9pZCAwOmkubmF2aUluZm8pfHxudWxsfSh0aGlzLl9hcHBrZXksZSx0aGlzLl9ydW50aW1lLmxvY2FsU3RvcmFnZSkpPyh0aGlzLl9uYXZpSW5mbz1yLFsyLHJdKToocz10aGlzLl9vcHRpb25zLm5hdmlnYXRvcnMuc2xpY2UoKSx0Lmxlbmd0aCYmdC5mb3JFYWNoKChmdW5jdGlvbihlKXtzLmluZGV4T2YoZSk8MCYmcy51bnNoaWZ0KGUpfSkpLFs0LHRoaXMuX3JlcU5hdmkocyx0aGlzLl9hcHBrZXksZSxpKV0pO2Nhc2UgMTpyZXR1cm4ocj1vLnNlbnQoKSk/KHRoaXMuX25hdmlJbmZvPXIsdGhpcy5zZXROYXZpSW5mbzJDYWNoZShlLHIpLFsyLHJdKTpbMixyXX19KSl9KSl9LGUucHJvdG90eXBlLnNldE5hdmlJbmZvMkNhY2hlPWZ1bmN0aW9uKGUsdCl7dGhpcy5fbmF2aUluZm89dCxmdW5jdGlvbihlLHQsbixpKXt2YXIgcixzPUVyKGUpO3RyeXt2YXIgbz1pLmdldEl0ZW0ocyk7cj1vP0pTT04ucGFyc2Uobyk6W119Y2F0Y2goZSl7cj1bXX12YXIgYT1EYXRlLm5vdygpO3IubGVuZ3RoPjAmJihyPXIuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4gYS1lLnRpbWVzdGFtcDw3MmU1JiZ0IT09ZS50b2tlbn0pKSksci5wdXNoKHt0aW1lc3RhbXA6YSxuYXZpSW5mbzpuLHRva2VuOnR9KSxpLnNldEl0ZW0ocyxKU09OLnN0cmluZ2lmeShyKSl9KHRoaXMuX2FwcGtleSxlLHQsdGhpcy5fcnVudGltZS5sb2NhbFN0b3JhZ2UpfSxlLnByb3RvdHlwZS5nZXRJbmZvRnJvbUNhY2hlPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9uYXZpSW5mb30sZS5wcm90b3R5cGUuX2NsZWFyPWZ1bmN0aW9uKGUpeyFmdW5jdGlvbihlLHQsbil7dmFyIGkscj1FcihlKTt0cnl7dmFyIHM9bi5nZXRJdGVtKHIpO2k9cz9KU09OLnBhcnNlKHMpOltdfWNhdGNoKGUpe2k9W119dmFyIG89RGF0ZS5ub3coKTtpLmxlbmd0aD4wJiYoaT1pLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIG8tZS50aW1lc3RhbXA8NzJlNSYmdCE9PWUudG9rZW59KSkpLDA9PT1pLmxlbmd0aD9uLnJlbW92ZUl0ZW0ocik6bi5zZXRJdGVtKHIsSlNPTi5zdHJpbmdpZnkoaSkpfSh0aGlzLl9hcHBrZXksZSx0aGlzLl9ydW50aW1lLmxvY2FsU3RvcmFnZSl9LGV9KCksSXI9ZnVuY3Rpb24oZSx0LG4pe3JldHVybltlLHQsbl0uam9pbihcIl9cIil9LFRyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3RoaXMuX3J1bnRpbWU9ZSx0aGlzLl9hcHBrZXk9dCx0aGlzLl91c2Vycz17fX1yZXR1cm4gZS5wcm90b3R5cGUuX2dldE1lbURhdGE9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3VzZXJzW2VdfHwodGhpcy5fdXNlcnNbZV09e2luYm94VGltZTowLG91dGJveFRpbWU6MH0pfSxlLnByb3RvdHlwZS5zZXRJbmJveFRpbWU9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLl9nZXRNZW1EYXRhKHQpO2lmKCEobi5pbmJveFRpbWU+ZSkpe24uaW5ib3hUaW1lPWU7dmFyIGk9SXIoXCJpbmJveFwiLHRoaXMuX2FwcGtleSx0KTt0aGlzLl9ydW50aW1lLmxvY2FsU3RvcmFnZS5zZXRJdGVtKGksZS50b1N0cmluZygpKX19LGUucHJvdG90eXBlLmdldEluYm94VGltZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9nZXRNZW1EYXRhKGUpO2lmKDA9PT10LmluYm94VGltZSl7dmFyIG49SXIoXCJpbmJveFwiLHRoaXMuX2FwcGtleSxlKTt0LmluYm94VGltZT1wYXJzZUludCh0aGlzLl9ydW50aW1lLmxvY2FsU3RvcmFnZS5nZXRJdGVtKG4pKXx8MH1yZXR1cm4gdC5pbmJveFRpbWV9LGUucHJvdG90eXBlLnNldE91dGJveFRpbWU9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLl9nZXRNZW1EYXRhKHQpO2lmKCEobi5vdXRib3hUaW1lPj1lKSl7bi5vdXRib3hUaW1lPWU7dmFyIGk9SXIoXCJvdXRib3hcIix0aGlzLl9hcHBrZXksdCk7dGhpcy5fcnVudGltZS5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShpLGUudG9TdHJpbmcoKSl9fSxlLnByb3RvdHlwZS5nZXRPdXRib3hUaW1lPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2dldE1lbURhdGEoZSk7aWYoMD09PXQub3V0Ym94VGltZSl7dmFyIG49SXIoXCJvdXRib3hcIix0aGlzLl9hcHBrZXksZSk7dC5vdXRib3hUaW1lPXBhcnNlSW50KHRoaXMuX3J1bnRpbWUubG9jYWxTdG9yYWdlLmdldEl0ZW0obikpfHwwfXJldHVybiB0Lm91dGJveFRpbWV9LGV9KCksQ3I9e19jYWNoZXM6e30sc2V0OmZ1bmN0aW9uKGUsdCl7dGhpcy5fY2FjaGVzW2VdPXR9LGdldDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fY2FjaGVzW2VdfHwwfSxjbGVhcjpmdW5jdGlvbihlKXt0aGlzLl9jYWNoZXNbZV09MH19LFJyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3RoaXMuX2t2Q2FjaGVzPXt9LHRoaXMuX2NoYXRyb29tSWQ9ZSx0aGlzLl9jdXJyZW50VXNlcklkPXR9cmV0dXJuIGUucHJvdG90eXBlLl9hZGQ9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5rZXk7ZS5pc0RlbGV0ZWQ9ITEsdGhpcy5fa3ZDYWNoZXNbdF09ZX0sZS5wcm90b3R5cGUuX3JlbW92ZT1mdW5jdGlvbihlKXt2YXIgdD1lLmtleSxuPXRoaXMuX2t2Q2FjaGVzW3RdO24mJihuLmlzRGVsZXRlZD0hMCx0aGlzLl9rdkNhY2hlc1t0XT1uKX0sZS5wcm90b3R5cGUuX3NldEVudHJ5PWZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5rZXksaT1lLnR5cGUscj1lLmlzT3ZlcndyaXRlLHM9ZS51c2VySWQsbz10aGlzLl9nZXRTZXRVc2VySWQobiksYT1pPT09VWUuREVMRVRFLHU9bz09PXMsYz0hdGhpcy5faXNFeGlzdGVkKG4pLGg9YT90aGlzLl9yZW1vdmU6dGhpcy5fYWRkOyh0fHxyfHx1fHxjKSYmaC5jYWxsKHRoaXMsZSl9LGUucHJvdG90eXBlLmdldFZhbHVlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2t2Q2FjaGVzW2VdfHx7fTtyZXR1cm4gdC5pc0RlbGV0ZWQ/bnVsbDp0LnZhbHVlfSxlLnByb3RvdHlwZS5nZXRBbGxWYWx1ZT1mdW5jdGlvbigpe3ZhciBlPXt9O2Zvcih2YXIgdCBpbiB0aGlzLl9rdkNhY2hlcyl0aGlzLl9rdkNhY2hlc1t0XS5pc0RlbGV0ZWR8fChlW3RdPXRoaXMuX2t2Q2FjaGVzW3RdLnZhbHVlKTtyZXR1cm4gZX0sZS5wcm90b3R5cGUuX2dldFNldFVzZXJJZD1mdW5jdGlvbihlKXtyZXR1cm4odGhpcy5fa3ZDYWNoZXNbZV18fHt9KS51c2VySWR9LGUucHJvdG90eXBlLl9pc0V4aXN0ZWQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fa3ZDYWNoZXNbZV18fHt9LG49dC52YWx1ZSxpPXQuaXNEZWxldGVkO3JldHVybiBuJiYhaX0sZS5wcm90b3R5cGUuc2V0RW50cmllcz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLG49ZS5rdkVudHJpZXMsaT1lLmlzRnVsbFVwZGF0ZTtuPW58fFtdLChpPWl8fCExKSYmdGhpcy5jbGVhcigpLG4uZm9yRWFjaCgoZnVuY3Rpb24oZSl7dC5fc2V0RW50cnkoZSxpKX0pKSxwZS5kZWJ1ZyhcImVuZCBzZXRFbnRyaWVzXCIpfSxlLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3RoaXMuX2t2Q2FjaGVzPXt9fSxlfSgpLFNyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLl9wdWxsUXVldWU9W10sdGhpcy5faXNQdWxsaW5nPSExLHRoaXMuX3N0b3JlQ2FjaGVzPXt9LHRoaXMuX2VuZ2luZT1lfXJldHVybiBlLnByb3RvdHlwZS5fc3RhcnRQdWxsPWZ1bmN0aW9uKCl7cmV0dXJuIHcodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBlLHQsbixpLHIscyxvO3JldHVybiBiKHRoaXMsKGZ1bmN0aW9uKGEpe3N3aXRjaChhLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuX2lzUHVsbGluZ3x8MD09PXRoaXMuX3B1bGxRdWV1ZS5sZW5ndGg/WzJdOih0aGlzLl9pc1B1bGxpbmc9ITAsZT10aGlzLl9wdWxsUXVldWUuc3BsaWNlKDAsMSlbMF0sdD1lLmNocm1JZCxuPWUudGltZXN0YW1wLChpPUNyLmdldCh0KSk+bj8odGhpcy5faXNQdWxsaW5nPSExLHRoaXMuX3N0YXJ0UHVsbCgpLFsyXSk6WzQsdGhpcy5fZW5naW5lLnB1bGxDaGF0cm9vbUVudHJ5KHQsaSldKTtjYXNlIDE6cmV0dXJuIHI9YS5zZW50KCkscz1yLmNvZGUsbz1yLmRhdGEsdGhpcy5faXNQdWxsaW5nPSExLHM9PT1FZS5TVUNDRVNTPyhDci5zZXQodCxvLnN5bmNUaW1lfHwwKSx0aGlzLl9zdGFydFB1bGwoKSk6dGhpcy5fc3RhcnRQdWxsKCksWzJdfX0pKX0pKX0sZS5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oZSl7Q3IuY2xlYXIoZSk7dmFyIHQ9dGhpcy5fc3RvcmVDYWNoZXNbZV07dCYmdC5jbGVhcigpfSxlLnByb3RvdHlwZS5wdWxsRW50cnk9ZnVuY3Rpb24oZSx0KXt0aGlzLl9wdWxsUXVldWUucHVzaCh7Y2hybUlkOmUsdGltZXN0YW1wOnR9KSx0aGlzLl9zdGFydFB1bGwoKX0sZS5wcm90b3R5cGUuc2V0TG9jYWw9ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXMuX3N0b3JlQ2FjaGVzW2VdO2FlKGkpfHwoaT1uZXcgUnIoZSxuKSksaS5zZXRFbnRyaWVzKHQpLHRoaXMuX3N0b3JlQ2FjaGVzW2VdPWl9LGUucHJvdG90eXBlLmdldFZhbHVlPWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5fc3RvcmVDYWNoZXNbZV07cmV0dXJuIG4/bi5nZXRWYWx1ZSh0KTpudWxsfSxlLnByb3RvdHlwZS5nZXRBbGw9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fc3RvcmVDYWNoZXNbZV0sbj17fTtyZXR1cm4gdCYmKG49dC5nZXRBbGxWYWx1ZSgpKSxufSxlfSgpLE5yPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQsbixpKXt0aGlzLl9ydW50aW1lPWUsdGhpcy5fYXBwa2V5PXQsdGhpcy5fdXNlcklkPW4sdGhpcy5fY2FuSm9pbk11bGlwbGVDaHJtPWksdGhpcy5fc2Vzc2lvbktleT1cIlwiLHRoaXMuX2pvaW5lZENocm1zSW5mbz17fSx0aGlzLl9zZXNzaW9uS2V5PVwic3luYy1jaHJtLVwiK3RoaXMuX2FwcGtleStcIi1cIit0aGlzLl91c2VySWR9cmV0dXJuIGUucHJvdG90eXBlLnNldD1mdW5jdGlvbihlLHQpe3ZvaWQgMD09PXQmJih0PTEwKSwhdGhpcy5fY2FuSm9pbk11bGlwbGVDaHJtJiYodGhpcy5fam9pbmVkQ2hybXNJbmZvPXt9KSx0aGlzLl9qb2luZWRDaHJtc0luZm9bZV09dCx0aGlzLl9ydW50aW1lLnNlc3Npb25TdG9yYWdlLnNldEl0ZW0odGhpcy5fc2Vzc2lvbktleSxKU09OLnN0cmluZ2lmeSh0aGlzLl9qb2luZWRDaHJtc0luZm8pKX0sZS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKCl7dmFyIGUsdDt0cnl7dD10aGlzLl9ydW50aW1lLnNlc3Npb25TdG9yYWdlLmdldEl0ZW0odGhpcy5fc2Vzc2lvbktleSksZT1KU09OLnBhcnNlKHR8fFwie31cIil9Y2F0Y2gobil7cGUuZXJyb3IoXCJwYXJzZSByZWpvaW5lZCBjaHJtIGluZm9zIGVycm9yIC0+IFwiK3QpLGU9e319cmV0dXJuIGV9LGUucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbihlKXtkZWxldGUgdGhpcy5fam9pbmVkQ2hybXNJbmZvW2VdLGFlKHRoaXMuX2pvaW5lZENocm1zSW5mbyk/dGhpcy5fcnVudGltZS5zZXNzaW9uU3RvcmFnZS5zZXRJdGVtKHRoaXMuX3Nlc3Npb25LZXksSlNPTi5zdHJpbmdpZnkodGhpcy5fam9pbmVkQ2hybXNJbmZvKSk6dGhpcy5jbGVhcigpfSxlLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3RoaXMuX2pvaW5lZENocm1zSW5mbz17fSx0aGlzLl9ydW50aW1lLnNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0odGhpcy5fc2Vzc2lvbktleSl9LGV9KCksT3I9XCJjb252ZXJTdGF0dXNDaGFuZ2VkXCIsd3I9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxuKXt0aGlzLl9ldmVudEVtaXR0ZXI9bmV3IGdlLHRoaXMuX3B1bGxRdWV1ZT1bXSx0aGlzLl9pc1B1bGxpbmc9ITEsdGhpcy5fc3RvcmFnZT1UKGUucnVudGltZSksdGhpcy5fYXBwa2V5PXQsdGhpcy5fY3VycmVudFVzZXJJZD1uLHRoaXMuX2VuZ2luZT1lLHRoaXMuX3N0b3JhZ2VQdWxsVGltZUtleT1cImNvbi1zLVwiK3QrXCItXCIrbn1yZXR1cm4gZS5wcm90b3R5cGUuX3NldD1mdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKCFyZShlKSYmQXJyYXkuaXNBcnJheShlKSl7dmFyIG49dGhpcy5fc3RvcmFnZS5nZXQodGhpcy5fc3RvcmFnZVB1bGxUaW1lS2V5KXx8MCxpPWUubGVuZ3RoO2UuZm9yRWFjaCgoZnVuY3Rpb24oZSxyKXt2YXIgcz1lLnVwZGF0ZWRUaW1lfHwwO249cz5uP3M6bixlLmNvbnZlcnNhdGlvblR5cGU9ZS50eXBlLHQuX2V2ZW50RW1pdHRlci5lbWl0KE9yLHtzdGF0dXNJdGVtOmUsaXNMYXN0UHVsbDpyPT09aS0xfSl9KSksdGhpcy5fc3RvcmFnZS5zZXQodGhpcy5fc3RvcmFnZVB1bGxUaW1lS2V5LG4pfX0sZS5wcm90b3R5cGUuX3N0YXJ0UHVsbD1mdW5jdGlvbigpe3JldHVybiB3KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgZSx0LG4saTtyZXR1cm4gYih0aGlzLChmdW5jdGlvbihyKXtzd2l0Y2goci5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9pc1B1bGxpbmd8fDA9PT10aGlzLl9wdWxsUXVldWUubGVuZ3RoP1syXToodGhpcy5faXNQdWxsaW5nPSEwLGU9dGhpcy5fcHVsbFF1ZXVlLnNwbGljZSgwLDEpWzBdLFs0LHRoaXMuX2VuZ2luZS5wdWxsQ29udmVyc2F0aW9uU3RhdHVzKGUpXSk7Y2FzZSAxOnJldHVybiB0PXIuc2VudCgpLG49dC5jb2RlLGk9dC5kYXRhLG49PT1FZS5TVUNDRVNTPyh0aGlzLl9pc1B1bGxpbmc9ITEsdGhpcy5fc2V0KGkpLHRoaXMuX3N0YXJ0UHVsbCgpKTp0aGlzLl9zdGFydFB1bGwoKSxbMl19fSkpfSkpfSxlLnByb3RvdHlwZS5wdWxsPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX3N0b3JhZ2UuZ2V0KHRoaXMuX3N0b3JhZ2VQdWxsVGltZUtleSl8fDA7KGU+dHx8MD09PWUpJiYodGhpcy5fcHVsbFF1ZXVlLnB1c2godCksdGhpcy5fc3RhcnRQdWxsKCkpfSxlLnByb3RvdHlwZS53YXRjaD1mdW5jdGlvbihlKXt0aGlzLl9ldmVudEVtaXR0ZXIub24oT3IsKGZ1bmN0aW9uKHQpe2UodCl9KSl9LGUucHJvdG90eXBlLnVud2F0Y2g9ZnVuY3Rpb24oKXt0aGlzLl9ldmVudEVtaXR0ZXIub2ZmKE9yLChmdW5jdGlvbihlKXt9KSl9LGV9KCksYnI9e2M6e2tleU5hbWU6XCJ1bnJlYWRNZXNzYWdlQ291bnRcIixkZWZhdWx0VmFsOjB9LGhtOntrZXlOYW1lOlwiaGFzTWVudGlvbmVkXCIsZGVmYXVsdFZhbDohMX0sbTp7a2V5TmFtZTpcIm1lbnRpb25lZEluZm9cIixkZWZhdWx0VmFsOm51bGx9LHQ6e2tleU5hbWU6XCJsYXN0VW5yZWFkVGltZVwiLGRlZmF1bHRWYWw6MH0sbmM6e2tleU5hbWU6XCJub3RpZmljYXRpb25TdGF0dXNcIixkZWZhdWx0VmFsOjJ9LHRvOntrZXlOYW1lOlwiaXNUb3BcIixkZWZhdWx0VmFsOiExfSx0Zzp7a2V5TmFtZTpcInRhZ3NcIixkZWZhdWx0VmFsOnt9fSxtYzp7a2V5TmFtZTpcInVucmVhZE1lbnRpb25lZENvdW50XCIsZGVmYXVsdFZhbDowfX0sTXI9e307Zm9yKHZhciBBciBpbiBicil7dmFyIFVyPWJyW0FyXS5rZXlOYW1lO01yW1VyXT1Bcn12YXIgTHIsUHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxuKXt0aGlzLl9hcHBrZXk9dCx0aGlzLl9jdXJyZW50VXNlcklkPW47dmFyIGk9XCJjb24tXCIrdCtcIi1cIituO3RoaXMuc3RvcmFnZT1uZXcgUihlLGkpLHRoaXMuX2xvY2FsU3RvcmU9bmV3IFIoZSxcIkNPTlZFUi1cIit0K1wiLVwiK24pfXJldHVybiBlLnByb3RvdHlwZS5fZ2V0U3RvcmVLZXk9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBuK1wiX1wiK2UrXCJfXCIrdH0sZS5wcm90b3R5cGUuX2dldENvbk9wdGlvbkJ5S2V5PWZ1bmN0aW9uKGUpe3ZhciB0PShlPWV8fFwiXCIpLnNwbGl0KFwiX1wiKTtpZih0Lmxlbmd0aD49Mil7dmFyIG49dC5zaGlmdCgpLGk9dC5zaGlmdCgpLHI9dC5qb2luKFwiX1wiKTtyZXR1cm57Y29udmVyc2F0aW9uVHlwZTpOdW1iZXIoaSksdGFyZ2V0SWQ6cixjaGFubmVsSWQ6bn19cmV0dXJue2NvbnZlcnNhdGlvblR5cGU6ai5QUklWQVRFLHRhcmdldElkOlwiXCIsY2hhbm5lbElkOlwiXCJ9fSxlLnByb3RvdHlwZS51cGRhdGVNZW50aW9uZWREYXRhPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1lLmNvbnZlcnNhdGlvblR5cGUsaT1lLnRhcmdldElkLHI9ZS5tZXNzYWdlVHlwZSxzPWUuaXNNZW50aW9uZWQsbz1lLmNvbnRlbnQsYT1lLnNlbmRlclVzZXJJZCx1PWUuY2hhbm5lbElkLGM9dGhpcy5fZ2V0U3RvcmVLZXkobixpLHUpLGg9dGhpcy5fbG9jYWxTdG9yZS5nZXQoYyl8fHt9LGw9TXIubWVudGlvbmVkSW5mbyxkPU1yLmhhc01lbnRpb25lZCxmPWhbbF18fHt9LHA9Zi51c2VySWRMaXN0fHxbXSxnPW8ubWVudGlvbmVkSW5mbztpZihnKXtpZihzJiZuPT09ai5HUk9VUCkoZy51c2VySWRMaXN0fHxbXSkuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZT09PXQuX2N1cnJlbnRVc2VySWQmJnAuaW5kZXhPZihhKTwwJiZwLnB1c2goYSl9KSksZy50eXBlPT09d2UuQUxMJiZwLmluZGV4T2YoYSk8MCYmcC5wdXNoKGEpO2lmKHI9PT1SZS5SRUNBTEwmJm49PT1qLkdST1VQKXt2YXIgXz1wLmluZGV4T2YoYSk7Xz49MCYmcC5zcGxpY2UoXywxKX1nPXt1c2VySWRMaXN0OnAsdHlwZToobnVsbD09Zz92b2lkIDA6Zy50eXBlKXx8Zi50eXBlfSwwIT09cC5sZW5ndGg/KGhbbF09ZyxoW2RdPSEwKTooZGVsZXRlIGhbbF0sZGVsZXRlIGhbZF0pLGFlKGgpP3RoaXMuX2xvY2FsU3RvcmUuc2V0KGMsaCk6dGhpcy5fbG9jYWxTdG9yZS5yZW1vdmUoYyl9fSxlLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHI9dGhpcy5fZ2V0U3RvcmVLZXkoZSx0LGkpLHM9dGhpcy5fbG9jYWxTdG9yZS5nZXQocil8fHt9O2Zvcih2YXIgbyBpbiBuKXt2YXIgYT1NcltvXSx1PW5bb107aWYoIXJlKGEpJiYhcmUodSkmJlwiaGFzTWVudGlvbmVkXCIhPT1vJiZcIk1lbnRpb25lZEluZm9cIiE9PW8pe2lmKHU9PT1iclthXS5kZWZhdWx0VmFsfHxcInRhZ3NcIj09PW8mJiFhZSh1KSlkZWxldGUgc1thXTtlbHNlIGlmKFwidGFnc1wiPT09byl7dmFyIGM9dTtmb3IodmFyIGggaW4gYyljW2hdLmlzVG9wfHxkZWxldGUgY1toXS5pc1RvcDtzW2FdPXV9ZWxzZSBzW2FdPXU7cy5jfHwoZGVsZXRlIHMudCxkZWxldGUgcy5obSxkZWxldGUgcy5tLGRlbGV0ZSBzLm1jKX19YWUocyk/dGhpcy5fbG9jYWxTdG9yZS5zZXQocixzKTp0aGlzLl9sb2NhbFN0b3JlLnJlbW92ZShyKX0sZS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGUsdCxuKXt2b2lkIDA9PT1uJiYobj1cIlwiKTt2YXIgaT10aGlzLl9nZXRTdG9yZUtleShlLHQsbikscj10aGlzLl9sb2NhbFN0b3JlLmdldChpKXx8e30scz17fTtmb3IodmFyIG8gaW4gYnIpe3ZhciBhPWJyW29dLHU9YS5rZXlOYW1lLGM9YS5kZWZhdWx0VmFsO3NbdV09cltvXXx8cHQoYyl9cmV0dXJuIHN9LGUucHJvdG90eXBlLmdldFZhbHVlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2xvY2FsU3RvcmUuZ2V0VmFsdWVzKCl8fHt9LG49W107Zm9yKHZhciBpIGluIHQpe3ZhciByPXRoaXMuX2dldENvbk9wdGlvbkJ5S2V5KGkpLHM9e2NvbnZlcnNhdGlvblR5cGU6ci5jb252ZXJzYXRpb25UeXBlLHRhcmdldElkOnIudGFyZ2V0SWQsY2hhbm5lbElkOnIuY2hhbm5lbElkfSxvPXRbaV07Zm9yKHZhciBhIGluIG8pe3ZhciB1PWJyW2FdLGM9dS5rZXlOYW1lLGg9dS5kZWZhdWx0VmFsO3NbY109b1thXXx8cHQoaCl9cz1lP2Uocyk6cyxuLnB1c2gocyl9cmV0dXJuIG59LGUucHJvdG90eXBlLmdldFZhbHVlRm9yVGFnPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fbG9jYWxTdG9yZS5nZXRWYWx1ZXMoKXx8e30sdD17fTtmb3IodmFyIG4gaW4gZSl7dmFyIGk9dGhpcy5fZ2V0Q29uT3B0aW9uQnlLZXkobikscj1pLmNvbnZlcnNhdGlvblR5cGUscz1pLnRhcmdldElkLG89e30sYT1lW25dO2Zvcih2YXIgdSBpbiBhKXt2YXIgYz1iclt1XSxoPWMua2V5TmFtZSxsPWMuZGVmYXVsdFZhbDtvW2hdPWFbdV18fHB0KGwpfWZvcih2YXIgZCBpbiBvLnRhZ3Mpe3JlKHRbZF0pJiYodFtkXT1bXSk7dmFyIGY9T2JqZWN0LmFzc2lnbih7fSxvLHtjb252ZXJzYXRpb25UeXBlOnIsdGFyZ2V0SWQ6c30pO2RlbGV0ZSBmLnRhZ3MsdFtkXS5wdXNoKGYpfX1yZXR1cm4gdH0sZS5wcm90b3R5cGUuYWRhcHRPbGRTdG9yZT1mdW5jdGlvbigpe3RyeXt2YXIgZT10aGlzLnN0b3JhZ2UuZ2V0VmFsdWVzKCk7aWYoMD09PU9iamVjdC5rZXlzKGUpLmxlbmd0aClyZXR1cm47Zm9yKHZhciB0IGluIGUpe3ZhciBuPVwiX1wiK3Q7dGhpcy5fbG9jYWxTdG9yZS5zZXQobixlW3RdKX19Y2F0Y2goZSl7cGUuZXJyb3IoXCJhZGFwdE9sZFN0b3JlIGVycm9yOiBcIitlLm1lc3NhZ2UpfX0sZX0oKSxEcj1bai5QUklWQVRFLGouR1JPVVAsai5TWVNURU0sai5QVUJMSUNfU0VSVklDRSxqLkFQUF9QVUJMSUNfU0VSVklDRV0sVnI9XCJjb252ZXJzYXRpb25DaGFuZ2VkXCIsa3I9XCJjb25UYWdTdGF0dXNDaGFuZ2VkXCIseHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxuLGkscil7dmFyIHM9dGhpczt0aGlzLl91cGRhdGVkQ29udmVyc2F0aW9ucz17fSx0aGlzLl9jb25UYWdTdGF0dXNDaGFuZ2VkPSExLHRoaXMuX2V2ZW50RW1pdHRlcj1uZXcgZ2UsdGhpcy5fZHJhZnRNYXA9e30sdGhpcy5fYXBwa2V5PXQsdGhpcy5fbG9naW5Vc2VySWQ9bix0aGlzLl9zdG9yZT1uZXcgUHIoZS5ydW50aW1lLHQsbiksdGhpcy5fc3RhdHVzTWFuYWdlcj1uZXcgd3IoZSx0LG4pLHRoaXMuX3N0YXR1c01hbmFnZXIud2F0Y2goKGZ1bmN0aW9uKGUpe3ZhciB0PWUuc3RhdHVzSXRlbSxuPWUuaXNMYXN0UHVsbDtzLmFkZFN0YXR1cyh0LG4pfSkpLHRoaXMuX2V2ZW50RW1pdHRlci5vbihWciwoZnVuY3Rpb24oZSl7aShlKX0pKSx0aGlzLl9ldmVudEVtaXR0ZXIub24oa3IsKGZ1bmN0aW9uKCl7cigpfSkpfXJldHVybiBlLnByb3RvdHlwZS5fY2FsY1VucmVhZENvdW50PWZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5jb250ZW50LGk9ZS5tZXNzYWdlVHlwZSxyPWUuc2VudFRpbWUscz1lLmlzQ291bnRlZCxvPWUubWVzc2FnZURpcmVjdGlvbixhPWUuc2VuZGVyVXNlcklkLHU9bz09PXllLlNFTkQmJmE9PT10aGlzLl9sb2dpblVzZXJJZCxjPWk9PT1SZS5SRUNBTEwsaD1uZShuKSxsPSExLGQ9e30sZj10Lmxhc3RVbnJlYWRUaW1lfHwwLHA9dC51bnJlYWRNZXNzYWdlQ291bnR8fDA7aWYoZj5yfHx1KXJldHVybntoYXNDaGFuZ2VkOmwsbG9jYWxDb252ZXJzYXRpb246dCx1cGRhdGVJdGVtczpkfTsocyYmKHQudW5yZWFkTWVzc2FnZUNvdW50PXArMSx0Lmxhc3RVbnJlYWRUaW1lPXIsbD0hMCksYyYmaCkmJihmPj1uLnNlbnRUaW1lJiZwJiYodC51bnJlYWRNZXNzYWdlQ291bnQ9cC0xLGw9ITApKTtyZXR1cm4gbCYmKGQudW5yZWFkTWVzc2FnZUNvdW50PXt2YWw6dC51bnJlYWRNZXNzYWdlQ291bnQsdGltZTpyfSkse2hhc0NoYW5nZWQ6bCxsb2NhbENvbnZlcnNhdGlvbjp0LHVwZGF0ZUl0ZW1zOmR9fSxlLnByb3RvdHlwZS5fY2FsY01lbnRpb25lZEluZm89ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLmNvbnRlbnQsaT0oZS5tZXNzYWdlRGlyZWN0aW9uLGUuaXNNZW50aW9uZWQpLHI9ZS5zZW50VGltZTt5ZS5TRU5EO3ZhciBzPW5lKG4pLG89ITEsYT17fTtyZXR1cm4gaSYmcyYmbi5tZW50aW9uZWRJbmZvJiYodC5oYXNNZW50aW9uZWQ9ITAsbz0hMCxhLmhhc01lbnRpb25lZD17dmFsOiEwLHRpbWU6cn0sYS5tZW50aW9uZWRJbmZvPXt2YWw6bi5tZW50aW9uZWRJbmZvLHRpbWU6cn0pLHtoYXNDaGFuZ2VkOm8sbG9jYWxDb252ZXJzYXRpb246dCx1cGRhdGVJdGVtczphfX0sZS5wcm90b3R5cGUuX2NhbGNNZW50aW9uZWRDb3VudD1mdW5jdGlvbihlLHQpe3ZhciBuPWUuY29udGVudCxpPWUubWVzc2FnZURpcmVjdGlvbixyPSExO2lmKGUuaXNNZW50aW9uZWQmJmk9PT15ZS5SRUNFSVZFJiYobnVsbD09bj92b2lkIDA6bi5tZW50aW9uZWRJbmZvKSl7dmFyIHM9bi5tZW50aW9uZWRJbmZvLG89cy50eXBlLGE9cy51c2VySWRMaXN0O2lmKG89PT13ZS5BTEx8fChhfHxbXSkuaW5jbHVkZXModGhpcy5fbG9naW5Vc2VySWQpKXtyPSEwO3ZhciB1PXQudW5yZWFkTWVudGlvbmVkQ291bnR8fDA7dC51bnJlYWRNZW50aW9uZWRDb3VudD11KzF9fXJldHVybntoYXNDaGFuZ2VkOnIsbG9jYWxDb252ZXJzYXRpb246dH19LGUucHJvdG90eXBlLl9zZXRVcGRhdGVkQ29udmVyc2F0aW9uPWZ1bmN0aW9uKGUpe2lmKG5lKGUpKXt2YXIgdD1lLmNvbnZlcnNhdGlvblR5cGUsbj1lLnRhcmdldElkLGk9ZS5jaGFubmVsSWQscj10K1wiX1wiK24scz10aGlzLl9zdG9yZS5nZXQodCxuLGkpfHx7fTt0aGlzLl91cGRhdGVkQ29udmVyc2F0aW9uc1tyXT1PYmplY3QuYXNzaWduKHMsZSl9fSxlLnByb3RvdHlwZS5fc2V0Q29uVGFnU3RhdHVzQ2hhbmdlZD1mdW5jdGlvbihlLHQsbixpKXt2YXIgcj0odGhpcy5fc3RvcmUuZ2V0KGUsdCxpKXx8e30pLnRhZ3N8fHt9O2lmKE9iamVjdC5rZXlzKHIpLmxlbmd0aD09PU9iamVjdC5rZXlzKG4pLmxlbmd0aCl7Zm9yKHZhciBzIGluIHIpaWYoIW5bc118fHJbc10uaXNUb3AhPT1uW3NdLmlzVG9wKXJldHVybiB2b2lkKHRoaXMuX2NvblRhZ1N0YXR1c0NoYW5nZWQ9ITApfWVsc2UgdGhpcy5fY29uVGFnU3RhdHVzQ2hhbmdlZD0hMH0sZS5wcm90b3R5cGUuYWRkU3RhdHVzPWZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5jb252ZXJzYXRpb25UeXBlLGk9ZS50YXJnZXRJZCxyPWUudXBkYXRlZFRpbWUscz1lLm5vdGlmaWNhdGlvblN0YXR1cyxvPWUuaXNUb3AsYT1lLnRhZ3MsdT1lLmNoYW5uZWxJZCxjPXt9LGg9e307cmUocyl8fChoLm5vdGlmaWNhdGlvblN0YXR1cz17dGltZTpyLHZhbDpzfSkscmUobyl8fChoLmlzVG9wPXt0aW1lOnIsdmFsOm99KSxyZShhKXx8KGgudGFncz17dGltZTpyLHZhbDphfSxudWxsPT1hfHxhLmZvckVhY2goKGZ1bmN0aW9uKGUpe2NbZS50YWdJZF09e2lzVG9wOmUuaXNUb3B9fSkpKSx0aGlzLl9zZXRDb25UYWdTdGF0dXNDaGFuZ2VkKG4saSxjLHUpLHRoaXMuX3N0b3JlLnNldChuLGkse25vdGlmaWNhdGlvblN0YXR1czpzLGlzVG9wOm8sdGFnczpjfSx1KSx0aGlzLl9zZXRVcGRhdGVkQ29udmVyc2F0aW9uKHtjb252ZXJzYXRpb25UeXBlOm4sdGFyZ2V0SWQ6aSx1cGRhdGVkSXRlbXM6aCxjaGFubmVsSWQ6dX0pLHQmJnRoaXMuX25vdGlmeUNvbnZlcnNhdGlvbkNoYW5nZWQoKX0sZS5wcm90b3R5cGUuX25vdGlmeUNvbnZlcnNhdGlvbkNoYW5nZWQ9ZnVuY3Rpb24oKXt2YXIgZT1bXTtmb3IodmFyIHQgaW4gdGhpcy5fdXBkYXRlZENvbnZlcnNhdGlvbnMpZS5wdXNoKHRoaXMuX3VwZGF0ZWRDb252ZXJzYXRpb25zW3RdKTswIT09ZS5sZW5ndGgmJih0aGlzLl9ldmVudEVtaXR0ZXIuZW1pdChWcixlKSx0aGlzLl91cGRhdGVkQ29udmVyc2F0aW9ucz17fSx0aGlzLl9jb25UYWdTdGF0dXNDaGFuZ2VkJiYodGhpcy5fZXZlbnRFbWl0dGVyLmVtaXQoa3IpLHRoaXMuX2NvblRhZ1N0YXR1c0NoYW5nZWQ9ITEpKX0sZS5wcm90b3R5cGUuc2V0Q29udmVyc2F0aW9uQ2FjaGVCeU1lc3NhZ2U9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLGk9ZS5jb252ZXJzYXRpb25UeXBlLHI9ZS5pc1BlcnNpdGVkLHM9ZS50YXJnZXRJZCxvPWUuY2hhbm5lbElkO2lmKERyLmluZGV4T2YoaSk+PTApe3ZhciBhPSExLHU9dGhpcy5fc3RvcmUuZ2V0KGkscyxvKSxjPXt9O2lmKFt0aGlzLl9jYWxjVW5yZWFkQ291bnQsdGhpcy5fY2FsY01lbnRpb25lZEluZm8sdGhpcy5fY2FsY01lbnRpb25lZENvdW50XS5mb3JFYWNoKChmdW5jdGlvbih0KXt2YXIgaT10LmNhbGwobixlLHUpLHI9aS5oYXNDaGFuZ2VkLHM9aS5sb2NhbENvbnZlcnNhdGlvbixvPWkudXBkYXRlSXRlbXM7YT1hfHxyLGM9TyhPKHt9LGMpLG8pLHU9cHQocyl9KSksYSYmdGhpcy5fc3RvcmUuc2V0KGkscyx1LG8pLHRoaXMuX3N0b3JlLnVwZGF0ZU1lbnRpb25lZERhdGEoZSkscil7dmFyIGg9dGhpcy5fc3RvcmUuZ2V0KGkscyxvKTtoLnVwZGF0ZWRJdGVtcz1PKHtsYXRlc3RNZXNzYWdlOnt0aW1lOmUuc2VudFRpbWUsdmFsOmV9fSxjKSxoLmxhdGVzdE1lc3NhZ2U9ZTt2YXIgbD1PYmplY3QuYXNzaWduKGgse2NvbnZlcnNhdGlvblR5cGU6aSx0YXJnZXRJZDpzLGNoYW5uZWxJZDpvfSk7dGhpcy5fc2V0VXBkYXRlZENvbnZlcnNhdGlvbihsKX0oYXx8cikmJnRoaXMuX25vdGlmeUNvbnZlcnNhdGlvbkNoYW5nZWQoKX19LGUucHJvdG90eXBlLmdldD1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHZvaWQgMD09PW4mJihuPVwiXCIpLHRoaXMuX3N0b3JlLmdldChlLHQsbil9LGUucHJvdG90eXBlLmdldEFsbFVucmVhZENvdW50PWZ1bmN0aW9uKGUsdCxuKXt2YXIgaT10aGlzLl9zdG9yZS5nZXRWYWx1ZSgpLHI9MDtyZXR1cm4gaS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgaT1lLnVucmVhZE1lc3NhZ2VDb3VudCxzPWUubm90aWZpY2F0aW9uU3RhdHVzLG89ZS5jb252ZXJzYXRpb25UeXBlO2k9aXx8MCwobnx8MSE9PXMpJiYodC5sZW5ndGg+MD90LmluY2x1ZGVzKE51bWJlcihvKSkmJihyKz1OdW1iZXIoaSkpOnIrPU51bWJlcihpKSl9KSkscn0sZS5wcm90b3R5cGUuZ2V0VW5yZWFkQ291bnRCeVRhZz1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuX3N0b3JlLmdldFZhbHVlRm9yVGFnKClbZV18fFtdLGk9MDtyZXR1cm4gbi5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbj1lLnVucmVhZE1lc3NhZ2VDb3VudCxyPWUubm90aWZpY2F0aW9uU3RhdHVzOyh0fHwxIT09cikmJihuPW58fDAsaSs9TnVtYmVyKG4pKX0pKSxpfSxlLnByb3RvdHlwZS5nZXRVbnJlYWRDb3VudD1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHRoaXMuX3N0b3JlLmdldChlLHQsbikudW5yZWFkTWVzc2FnZUNvdW50fHwwfSxlLnByb3RvdHlwZS5jbGVhclVucmVhZENvdW50PWZ1bmN0aW9uKGUsdCxuLGkpe3ZvaWQgMD09PWkmJihpPSEwKTt2YXIgcj10aGlzLl9zdG9yZS5nZXQoZSx0LG4pLHM9ci51bnJlYWRNZXNzYWdlQ291bnQsbz1yLmhhc01lbnRpb25lZCxhPXt9O2lmKHMmJihyLnVucmVhZE1lc3NhZ2VDb3VudD0wLGEudW5yZWFkTWVzc2FnZUNvdW50PXt2YWw6MCx0aW1lOkRhdGUubm93KCl9KSxvJiYoci5oYXNNZW50aW9uZWQ9ITEsci51bnJlYWRNZW50aW9uZWRDb3VudD0wLHIubWVudGlvbmVkSW5mbz12b2lkIDAsYS5oYXNNZW50aW9uZWQ9e3ZhbDohMSx0aW1lOkRhdGUubm93KCl9LGEubWVudGlvbmVkSW5mbz17dmFsOnZvaWQgMCx0aW1lOkRhdGUubm93KCl9KSx0aGlzLl9zdG9yZS5zZXQoZSx0LHIsbiksaSYmMCE9PU9iamVjdC5rZXlzKGEpLmxlbmd0aCl7dmFyIHU9T2JqZWN0LmFzc2lnbihyLHtjb252ZXJzYXRpb25UeXBlOmUsdGFyZ2V0SWQ6dCxjaGFubmVsSWQ6bix1cGRhdGVkSXRlbXM6YX0pO3RoaXMuX3NldFVwZGF0ZWRDb252ZXJzYXRpb24odSksdGhpcy5fbm90aWZ5Q29udmVyc2F0aW9uQ2hhbmdlZCgpfX0sZS5wcm90b3R5cGUuY2xlYXJBbGxVbnJlYWRDb3VudD1mdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5fc3RvcmUuZ2V0VmFsdWUoKS5mb3JFYWNoKChmdW5jdGlvbih0KXt0LnVucmVhZE1lc3NhZ2VDb3VudCYmKHQudW5yZWFkTWVzc2FnZUNvdW50PTAsZS5fc3RvcmUuc2V0KHQuY29udmVyc2F0aW9uVHlwZSx0LnRhcmdldElkLHQsdC5jaGFubmVsSWQpKX0pKX0sZS5wcm90b3R5cGUuc3RhcnRQdWxsQ29udmVyc2F0aW9uU3RhdHVzPWZ1bmN0aW9uKGUpe3RoaXMuX3N0YXR1c01hbmFnZXIucHVsbChlKX0sZS5wcm90b3R5cGUuc2V0RHJhZnQ9ZnVuY3Rpb24oZSx0LG4saSl7dmFyIHI9ZStcIl9cIit0K1wiX1wiK2k7dGhpcy5fZHJhZnRNYXBbcl09bn0sZS5wcm90b3R5cGUuZ2V0RHJhZnQ9ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPWUrXCJfXCIrdCtcIl9cIituO3JldHVybiB0aGlzLl9kcmFmdE1hcFtpXX0sZS5wcm90b3R5cGUuY2xlYXJEcmFmdD1mdW5jdGlvbihlLHQsbil7dmFyIGk9ZStcIl9cIit0K1wiX1wiK247ZGVsZXRlIHRoaXMuX2RyYWZ0TWFwW2ldfSxlLnByb3RvdHlwZS5hZGRUYWdTdGF0dXM9ZnVuY3Rpb24oZSx0LG4saSl7dm9pZCAwPT09aSYmKGk9XCJcIik7dmFyIHI9dGhpcy5fc3RvcmUuZ2V0KGUsdCxpKS50YWdzO3I9T2JqZWN0LmFzc2lnbihyLG4pLHRoaXMuX3N0b3JlLnNldChlLHQse3RhZ3M6cn0saSl9LGUucHJvdG90eXBlLmRlbGV0ZVRhZ1N0YXR1cz1mdW5jdGlvbihlLHQsbixpKXt2b2lkIDA9PT1pJiYoaT1cIlwiKTt2YXIgcj10aGlzLl9zdG9yZS5nZXQoZSx0LGkpLnRhZ3M7bi5mb3JFYWNoKChmdW5jdGlvbihlKXtkZWxldGUgcltlXX0pKSx0aGlzLl9zdG9yZS5zZXQoZSx0LHt0YWdzOnJ9LGkpfSxlLnByb3RvdHlwZS5nZXRDb252ZXJzYXRpb25MaXN0Rm9yVGFnPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0b3JlLmdldFZhbHVlRm9yVGFnKCl9LGUucHJvdG90eXBlLmdldEJsb2NrQ29udmVyc2F0aW9uTGlzdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdG9yZS5nZXRWYWx1ZSgpLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIGUubm90aWZpY2F0aW9uU3RhdHVzPT09TmUuT1BFTn0pKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybntjb252ZXJzYXRpb25UeXBlOmUuY29udmVyc2F0aW9uVHlwZSx0YXJnZXRJZDplLnRhcmdldElkLGNoYW5uZWxJZDplLmNoYW5uZWxJZH19KSl9LGUucHJvdG90eXBlLmdldFRvcENvbnZlcnNhdGlvbkxpc3Q9ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5fc3RvcmUuZ2V0VmFsdWUoKXx8e30pLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIGUuaXNUb3B9KSkubWFwKChmdW5jdGlvbihlKXtyZXR1cm57Y29udmVyc2F0aW9uVHlwZTplLmNvbnZlcnNhdGlvblR5cGUsdGFyZ2V0SWQ6ZS50YXJnZXRJZCxjaGFubmVsSWQ6ZS5jaGFubmVsSWR9fSkpfSxlLnByb3RvdHlwZS5hZGFwdE9sZFN0b3JlPWZ1bmN0aW9uKCl7dGhpcy5fc3RvcmUuYWRhcHRPbGRTdG9yZSgpfSxlLnByb3RvdHlwZS5nZXRVbnJlYWRNZW50aW9uZWRDb3VudD1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHZvaWQgMD09PWUmJihlPVwiXCIpLHRoaXMuZ2V0KHQsbixlKS51bnJlYWRNZW50aW9uZWRDb3VudHx8MH0sZS5wcm90b3R5cGUuZ2V0QWxsVW5yZWFkTWVudGlvbmVkQ291bnQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9zdG9yZS5nZXRWYWx1ZSgpLHQ9MDtyZXR1cm4gZS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbj1lLnVucmVhZE1lbnRpb25lZENvdW50O249bnx8MCx0Kz1OdW1iZXIobil9KSksdH0sZS5wcm90b3R5cGUuZ2V0QWxsQ29udmVyc2F0aW9uU3RhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RvcmUuZ2V0VmFsdWUoKS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiBlLnVucmVhZE1lc3NhZ2VDb3VudHx8ZS51bnJlYWRNZW50aW9uZWRDb3VudH0pKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybntjb252ZXJzYXRpb25UeXBlOmUuY29udmVyc2F0aW9uVHlwZSx0YXJnZXRJZDplLnRhcmdldElkLGNoYW5uZWxJZDplLmNoYW5uZWxJZCx1bnJlYWRDb3VudDplLnVucmVhZE1lc3NhZ2VDb3VudHx8MCx1bnJlYWRNZW50aW9uZWRDb3VudDplLnVucmVhZE1lbnRpb25lZENvdW50fHwwfX0pKX0sZX0oKSxCcj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LG4saSl7dGhpcy5fcHVsbFF1ZXVlPVtdLHRoaXMuX2lzUHVsbGluZz0hMSx0aGlzLl9zdG9yYWdlVGFnS2V5PVwidGFnLVwiK3QrXCItXCIrbix0aGlzLl9zdG9yYWdlUHVsbFRpbWVLZXk9XCJ1cy1zLVwiK3QrXCItXCIrbix0aGlzLl9zdG9yYWdlPVQoZS5ydW50aW1lKSx0aGlzLl9lbmdpbmU9ZSx0aGlzLl90YWdXYXRjaGVyRnVuYz1pfXJldHVybiBlLnByb3RvdHlwZS5fdXBkYXRlVGFnPWZ1bmN0aW9uKGUpe3ZhciB0PWUudGFncyxuPXt9O3QuZm9yRWFjaCgoZnVuY3Rpb24oZSl7bltlLnRhZ0lkXT17dGFnTmFtZTplLnRhZ05hbWUsY3JlYXRlZFRpbWU6ZS5jcmVhdGVkVGltZX19KSksdGhpcy5fc3RvcmFnZS5zZXQodGhpcy5fc3RvcmFnZVRhZ0tleSxuKSx0aGlzLl90YWdXYXRjaGVyRnVuYygpfSxlLnByb3RvdHlwZS5hZGRUYWc9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLl9zdG9yYWdlLmdldCh0aGlzLl9zdG9yYWdlVGFnS2V5KXx8e307ZS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgdCxpPShudWxsPT09KHQ9bltlLnRhZ0lkXSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuY3JlYXRlZFRpbWUpfHxlLmNyZWF0ZWRUaW1lfHwwO25bZS50YWdJZF09e3RhZ05hbWU6ZS50YWdOYW1lLGNyZWF0ZWRUaW1lOml9fSkpLHRoaXMuX3N0b3JhZ2Uuc2V0KHRoaXMuX3N0b3JhZ2VUYWdLZXksbiksdGhpcy5fc3RvcmFnZS5zZXQodGhpcy5fc3RvcmFnZVB1bGxUaW1lS2V5LHQpfSxlLnByb3RvdHlwZS5kZWxldGVUYWc9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLl9zdG9yYWdlLmdldCh0aGlzLl9zdG9yYWdlVGFnS2V5KXx8e307ZS5mb3JFYWNoKChmdW5jdGlvbihlKXtkZWxldGUgbltlXX0pKSx0aGlzLl9zdG9yYWdlLnNldCh0aGlzLl9zdG9yYWdlVGFnS2V5LG4pLHRoaXMuX3N0b3JhZ2Uuc2V0KHRoaXMuX3N0b3JhZ2VQdWxsVGltZUtleSx0KX0sZS5wcm90b3R5cGUuZ2V0VGFnc0luZm89ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RvcmFnZS5nZXQodGhpcy5fc3RvcmFnZVRhZ0tleSl8fHt9fSxlLnByb3RvdHlwZS5nZXRUYWdzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fc3RvcmFnZS5nZXQodGhpcy5fc3RvcmFnZVRhZ0tleSl8fHt9LHQ9W107Zm9yKHZhciBuIGluIGUpdC5wdXNoKHt0YWdJZDpuLHRhZ05hbWU6ZVtuXS50YWdOYW1lLGNyZWF0ZWRUaW1lOmVbbl0uY3JlYXRlZFRpbWUsY29udmVyc2F0aW9uQ291bnQ6MH0pO3JldHVybiB0LnNvcnQoKGZ1bmN0aW9uKGUsdCl7cmV0dXJuKGUuY3JlYXRlZFRpbWV8fDApLSh0LmNyZWF0ZWRUaW1lfHwwKX0pKX0sZS5wcm90b3R5cGUuZ2V0VGFnQnlJZD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9zdG9yYWdlLmdldCh0aGlzLl9zdG9yYWdlVGFnS2V5KXx8e307cmV0dXJuIHRbZV0/e3RhZ0lkOmUsdGFnTmFtZTp0W2VdLnRhZ05hbWUsY3JlYXRlZFRpbWU6dFtlXS5jcmVhdGVkVGltZSxjb252ZXJzYXRpb25Db3VudDowfTpudWxsfSxlLnByb3RvdHlwZS5fc3RhcnRQdWxsPWZ1bmN0aW9uKCl7cmV0dXJuIHcodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBlLHQsbixpLHIscyxvLGE7cmV0dXJuIGIodGhpcywoZnVuY3Rpb24odSl7c3dpdGNoKHUubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5faXNQdWxsaW5nfHwwPT09dGhpcy5fcHVsbFF1ZXVlLmxlbmd0aD9bMl06KHRoaXMuX2lzUHVsbGluZz0hMCxlPXRoaXMuX3B1bGxRdWV1ZS5zcGxpY2UoMCwxKVswXSxbNCx0aGlzLl9lbmdpbmUucHVsbFVzZXJTZXR0aW5ncyhlKV0pO2Nhc2UgMTpyZXR1cm4gdD11LnNlbnQoKSxuPXQuY29kZSxpPXQuZGF0YSxuIT09RWUuU1VDQ0VTU3x8cmUoaSk/KHRoaXMuX2lzUHVsbGluZz0hMSx0aGlzLl9zdGFydFB1bGwoKSk6KHM9KHI9aSkuc2V0dGluZ3Msbz1yLnZlcnNpb24sYT1zLlRhZyxyZShhKXx8dGhpcy5fdXBkYXRlVGFnKGEpLHRoaXMuX3N0b3JhZ2Uuc2V0KHRoaXMuX3N0b3JhZ2VQdWxsVGltZUtleSxvKSx0aGlzLl9pc1B1bGxpbmc9ITEsdGhpcy5fc3RhcnRQdWxsKCkpLFsyXX19KSl9KSl9LGUucHJvdG90eXBlLnB1bGxVc2VyU2V0dGluZ3M9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fc3RvcmFnZS5nZXQodGhpcy5fc3RvcmFnZVB1bGxUaW1lS2V5KXx8MDsoZT50fHwwPT09ZSkmJih0aGlzLl9wdWxsUXVldWUucHVzaCh0KSx0aGlzLl9zdGFydFB1bGwoKSl9LGUucHJvdG90eXBlLmdldFZlcnNpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RvcmFnZS5nZXQodGhpcy5fc3RvcmFnZVB1bGxUaW1lS2V5KXx8MH0sZX0oKSxGcj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQsbil7dmFyIGk9ZS5jYWxsKHRoaXMsdCxuKXx8dGhpcztyZXR1cm4gaS5fbWluaUNvbm5lY3RVcmw9XCJcIixpLl9jb25uZWN0VHlwZT1uLmNvbm5lY3Rpb25UeXBlLGl9cmV0dXJuIE4odCxlKSx0LnByb3RvdHlwZS5fZm9ybWF0SlNPTlBVcmw9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIGUrXCIvXCIrKHRoaXMuX3J1bnRpbWUuaXNTdXBwb3J0U29ja2V0KCkmJlwid2Vic29ja2V0XCI9PT10aGlzLl9jb25uZWN0VHlwZT9cIm5hdmlcIjpcImNvbWV0bmF2aVwiKStcIi5qcz9hcHBJZD1cIituK1wiJnRva2VuPVwiK2VuY29kZVVSSUNvbXBvbmVudCh0KStcIiZjYWxsQmFjaz1cIitpK1wiJnY9XCIrdGhpcy5fYXBpVmVyc2lvbitcIiZyPVwiK0RhdGUubm93KCl9LHQucHJvdG90eXBlLmdldEluZm89ZnVuY3Rpb24odCxuLGkpe3ZhciByO3JldHVybiB3KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgcztyZXR1cm4gYih0aGlzLChmdW5jdGlvbihvKXtyZXR1cm4gdGhpcy5fcnVudGltZS51c2VOYXZpfHwocz12b2lkIDAscz10aGlzLl9ydW50aW1lLmlzU3VwcG9ydFNvY2tldCgpJiZcIndlYnNvY2tldFwiPT09dGhpcy5fY29ubmVjdFR5cGU/Yy5qb2luKFwiLFwiKTpoLmpvaW4oXCIsXCIpLHRoaXMuX21pbmlDb25uZWN0VXJsPShudWxsPT09KHI9dGhpcy5fb3B0aW9ucy5taW5pQ01QUHJveHkpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLmxlbmd0aCk/dGhpcy5fb3B0aW9ucy5taW5pQ01QUHJveHkuam9pbihcIixcIik6c3x8XCJcIixuPVtdKSxbMixlLnByb3RvdHlwZS5nZXRJbmZvLmNhbGwodGhpcyx0LG4saSldfSkpfSkpfSx0LnByb3RvdHlwZS5fcmVxTmF2aT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHcodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBpLHIscyxvLGEsdSxjLGgsbDtyZXR1cm4gYih0aGlzLChmdW5jdGlvbihkKXtzd2l0Y2goZC5sYWJlbCl7Y2FzZSAwOmk9XCJnZXRTZXJ2ZXJFbmRwb2ludFwiLHI9MCxzPWUubGVuZ3RoLGQubGFiZWw9MTtjYXNlIDE6cmV0dXJuIHI8cz8obz10aGlzLl9mb3JtYXRKU09OUFVybChlW3JdLG4sdCxpKSxwZS5kZWJ1ZyhcInJlcSBuYXZpID0+IFwiK28pLFs0LHRoaXMuX3J1bnRpbWUuaHR0cFJlcSh7dXJsOm8sdGltZW91dDoxZTQsZGF0YVR5cGU6XCJ0ZXh0XCJ9KV0pOlszLDRdO2Nhc2UgMjppZigyMDAhPT0oYT1kLnNlbnQoKSkuc3RhdHVzKXJldHVybiA0MDM9PT1hLnN0YXR1cz9wZS5lcnJvcihcInJlcXVlc3QgbmF2aSBlcnJvcjogXCIrRWUuUkNfQ09OTl9VU0VSX09SX1BBU1NXRF9FUlJPUik6NDAxPT09YS5zdGF0dXMmJnBlLmVycm9yKFwicmVxdWVzdCBuYXZpIGVycm9yOiBcIitFZS5SQ19DT05OX0FQUF9CTE9DS0VEX09SX0RFTEVURUQpLFszLDNdO3RyeXtyZXR1cm4gdT1hLmRhdGEubWF0Y2goL3tbXFxkXFxEXSt9LyksMD09PShjPXUmJnVbMF0/dVswXTpcIlwiKS5pbmRleE9mKCd7XFxcXFwiY29kZVxcXFxcIjonKSYmKGM9SlNPTi5wYXJzZSgnXCInK2MrJ1wiJykpLGw9SlNPTi5wYXJzZShjKSxoPS9eaHR0cHMvLnRlc3Qobyk/XCJodHRwc1wiOlwiaHR0cFwiLGwucHJvdG9jb2w9aCx0aGlzLl9ydW50aW1lLnVzZU5hdml8fChsLnNlcnZlcj1cIlwiLGwuYmFja3VwU2VydmVyPXRoaXMuX21pbmlDb25uZWN0VXJsLGwubG9nU3dpdGNoPTApLFsyLGxdfWNhdGNoKGUpe3BlLmVycm9yKFwicGFyc2UgbmF2aSBlcnIgPT5cIixlKX1kLmxhYmVsPTM7Y2FzZSAzOnJldHVybiByKz0xLFszLDFdO2Nhc2UgNDpyZXR1cm4gdGhpcy5fcnVudGltZS51c2VOYXZpP1syLG51bGxdOlsyLGw9e2NvZGU6MjAwLHByb3RvY29sOlwiaHR0cHNcIixzZXJ2ZXI6XCJcIix2b2lwQ2FsbEluZm86XCJcIixrdlN0b3JhZ2U6MCxvcGVuSHR0cEROUzohMSxoaXN0b3J5TXNnOiExLGNoYXRyb29tTXNnOiExLHVwbG9hZFNlcnZlcjpcImh0dHBzOi8vdXBsb2FkLnFpbml1cC5jb21cIixib3NBZGRyOlwiaHR0cHM6Ly9nei5iY2Vib3MuY29tXCIsbG9jYXRpb246XCJcIixtb25pdG9yOjAsam9pbk1DaHJtOiExLG9wZW5NcDowLG9wZW5VUzowLGdycE1zZ0xpbWl0OjAsaXNGb3JtYXR0ZWQ6MCxnaWZTaXplOjIwNDgsbG9nU3dpdGNoOjAsbG9nUG9saWN5OlwiXCIsY29tcERheXM6MCxtc2dBY2s6XCJcIixhY3RpdmVTZXJ2ZXI6XCJcIixxbkFkZHI6XCJcIixleHRraXRTd2l0Y2g6MCxhbG9uZTohMSx2b2lwU2VydmVyOlwiXCIsb2ZmbGluZWxvZ3NlcnZlcjpcIlwiLGJhY2t1cFNlcnZlcjp0aGlzLl9taW5pQ29ubmVjdFVybH1dfX0pKX0pKX0sdH0obXIpLEtyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLl9wdWxsUXVldWU9W10sdGhpcy5faXNQdWxsaW5nPSExLHRoaXMuX3B1bGxUaW1lPTAsdGhpcy5fZW5naW5lPWV9cmV0dXJuIGUucHJvdG90eXBlLl9zdGFydFB1bGw9ZnVuY3Rpb24oKXtyZXR1cm4gdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIGUsdCxuLGkscixzLG87cmV0dXJuIGIodGhpcywoZnVuY3Rpb24oYSl7c3dpdGNoKGEubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5faXNQdWxsaW5nfHwwPT09dGhpcy5fcHVsbFF1ZXVlLmxlbmd0aD9bMl06KHRoaXMuX2lzUHVsbGluZz0hMCxlPXRoaXMuX3B1bGxRdWV1ZS5zcGxpY2UoMCwxKVswXSx0PWUucm9vbUlkLG49ZS50aW1lc3RhbXAsKGk9dGhpcy5fcHVsbFRpbWUpPm4/KHRoaXMuX2lzUHVsbGluZz0hMSx0aGlzLl9zdGFydFB1bGwoKSxbMl0pOls0LHRoaXMuX2VuZ2luZS5wdWxsUlRDUm9vbUVudHJ5KHQsaSldKTtjYXNlIDE6cmV0dXJuIHI9YS5zZW50KCkscz1yLmNvZGUsbz1yLmRhdGEscz09PUVlLlNVQ0NFU1M/KHRoaXMuX2lzUHVsbGluZz0hMSx0aGlzLl9wdWxsVGltZT1vLnN5bmNUaW1lfHwwLHRoaXMuX3N0YXJ0UHVsbCgpKTp0aGlzLl9zdGFydFB1bGwoKSxbMl19fSkpfSkpfSxlLnByb3RvdHlwZS5wdWxsRW50cnk9ZnVuY3Rpb24oZSx0KXt0aGlzLl9wdWxsUXVldWUucHVzaCh7cm9vbUlkOmUsdGltZXN0YW1wOnR9KSx0aGlzLl9zdGFydFB1bGwoKX0sZS5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLl9wdWxsVGltZT0wLHRoaXMuX2lzUHVsbGluZz0hMX0sZX0oKSxxcj1mdW5jdGlvbihlLHQpe3JldHVybltcInNlbmRfbXNnXCIsZSx0XS5qb2luKFwiX1wiKX0sWXI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dGhpcy5fcnVudGltZT1lLHRoaXMuX2FwcGtleT10LHRoaXMuX3NlbmRNZXNzYWdlTWFwPXt9LHRoaXMuX3VzZXJJZD1cIlwifXJldHVybiBlLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKGUpe3RoaXMuX3VzZXJJZD1lO3ZhciB0PXFyKHRoaXMuX2FwcGtleSxlKTt0aGlzLl9zZW5kTWVzc2FnZU1hcD10aGlzLl9nZXRMb2NhbEluZm8odCl9LGUucHJvdG90eXBlLl9nZXRMb2NhbEluZm89ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fcnVudGltZS5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShlKTt0cnl7cmV0dXJuIHQ/SlNPTi5wYXJzZSh0KTp7fX1jYXRjaChlKXtyZXR1cm57fX19LGUucHJvdG90eXBlLnNldE1lc3NhZ2U9ZnVuY3Rpb24oZSx0KXt0aGlzLl9zZW5kTWVzc2FnZU1hcFtlXT10O3ZhciBuPXFyKHRoaXMuX2FwcGtleSx0aGlzLl91c2VySWQpLGk9dGhpcy5fZ2V0TG9jYWxJbmZvKG4pO2lbZV09dCx0aGlzLl9ydW50aW1lLmxvY2FsU3RvcmFnZS5zZXRJdGVtKG4sSlNPTi5zdHJpbmdpZnkoaSkpfSxlLnByb3RvdHlwZS5nZXRTZW5kTWVzc2FnZU1hcD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zZW5kTWVzc2FnZU1hcH0sZS5wcm90b3R5cGUucmVtb3ZlQnlVSUQ9ZnVuY3Rpb24oZSl7ZGVsZXRlIHRoaXMuX3NlbmRNZXNzYWdlTWFwW2VdfSxlLnByb3RvdHlwZS5yZW1vdmVCeVRpbWVzdGFtcD1mdW5jdGlvbihlKXt2YXIgdD1xcih0aGlzLl9hcHBrZXksdGhpcy5fdXNlcklkKSxuPXRoaXMuX2dldExvY2FsSW5mbyh0KTtPYmplY3Qua2V5cyhuKS5mb3JFYWNoKChmdW5jdGlvbih0KXtuW3RdPGUmJmRlbGV0ZSBuW3RdfSkpLHRoaXMuX3J1bnRpbWUubG9jYWxTdG9yYWdlLnNldEl0ZW0odCxKU09OLnN0cmluZ2lmeShuKSl9LGV9KCksSHI9ZnVuY3Rpb24oZSl7dmFyIHQ9XCJSQ0RldmljZUlkXCIsbj1UKGUpLGk9XCJcIixyPW4uZ2V0KHQpO3JldHVybiByP2k9cjooaT1IKCksbi5zZXQodCxpKSksaX07KExyPXt9KVtqLlBSSVZBVEVdPWhyLnFyeVBNc2csTHJbai5HUk9VUF09aHIucXJ5R01zZyxMcltqLkNIQVRST09NXT1oci5xcnlDSE1zZyxMcltqLkNVU1RPTUVSX1NFUlZJQ0VdPWhyLnFyeUNNc2csTHJbai5TWVNURU1dPWhyLnFyeVNNc2c7dmFyIEdyPVtocltoci5yZWNhbGxNc2ddLGhyW2hyLnBwTXNnU10saHJbaHIucGdNc2dTXSxocltoci5wcE1zZ1BdLGhyW2hyLnBnTXNnUF0saHJbaHIuY2hhdE1zZ10saHJbaHIucGNNc2dQXSxocltoci5wck1zZ1NdXSxqcj1mdW5jdGlvbihlLHQsbixyLHMsbyl7cmV0dXJue2NvbnZlcnNhdGlvblR5cGU6ZSx0YXJnZXRJZDp0LHNlbmRlclVzZXJJZDpvLG1lc3NhZ2VEaXJlY3Rpb246eWUuU0VORCxpc0NvdW50ZWQ6ISFuLmlzQ291bnRlZCxpc01lbnRpb25lZDohIW4uaXNNZW50aW9uZWQsY29udGVudDpuLmNvbnRlbnQsbWVzc2FnZVR5cGU6bi5tZXNzYWdlVHlwZSxpc09mZkxpbmVNZXNzYWdlOiExLGlzUGVyc2l0ZWQ6ISFuLmlzUGVyc2l0ZWQsbWVzc2FnZVVJZDpyLHNlbnRUaW1lOnMscmVjZWl2ZWRUaW1lOjAsZGlzYWJsZU5vdGlmaWNhdGlvbjohIW4uZGlzYWJsZU5vdGlmaWNhdGlvbixpc1N0YXR1c01lc3NhZ2U6ISFuLmlzU3RhdHVzTWVzc2FnZSxjYW5JbmNsdWRlRXhwYW5zaW9uOiEhbi5jYW5JbmNsdWRlRXhwYW5zaW9uLGV4cGFuc2lvbjpuLmNhbkluY2x1ZGVFeHBhbnNpb24/bi5leHBhbnNpb246bnVsbCxyZWNlaXZlZFN0YXR1czppLlVOUkVBRCxwdXNoQ29uZmlnOm4ucHVzaENvbmZpZyxjaGFubmVsSWQ6bi5jaGFubmVsSWR9fSxRcj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQsbixpKXt2YXIgcj1lLmNhbGwodGhpcyx0LG4saSl8fHRoaXM7cmV0dXJuIHIuX2N1c3RvbU1lc3NhZ2VUeXBlPXt9LHIuX3JlY29ubmVjdFRpbWVyPS0xLHIuX3B1bGxPZmZsaW5lRmluaXNoZWQ9ITEsci5fY29ubmVjdGVkVGltZT0wLHIuX2xvY2FsQ29ubmVjdGVkVGltZT0wLHIuX3B1bGxpbmdNc2c9ITEsci5fcHVsbFF1ZXVlPVtdLHIuX2Nocm1zUXVldWU9e30sci5fbGF0ZXN0U3luY1RpbWVzdGFtcD0wLHIuX2ludGVydmFsVGltZXI9LTEsci5fbGV0dGVyYm94PW5ldyBUcih0LGkuYXBwa2V5KSxyLl9zZW5kTWVzc2FnZVN0b3JlPW5ldyBZcih0LGkuYXBwa2V5KSxyLl9jaHJtRW50cnlIYW5kbGVyPW5ldyBTcihyKSxyfXJldHVybiBOKHQsZSksdC5wcm90b3R5cGUuX2NyZWF0ZU5hdmk9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IEZyKHRoaXMucnVudGltZSx0aGlzLl9vcHRpb25zKX0sdC5wcm90b3R5cGUuZ2V0Q29ubmVjdGVkVGltZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb25uZWN0ZWRUaW1lfSx0LnByb3RvdHlwZS5jb25uZWN0PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHcodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBuLGkscixzLG8sYT10aGlzO3JldHVybiBiKHRoaXMsKGZ1bmN0aW9uKHUpe3N3aXRjaCh1LmxhYmVsKXtjYXNlIDA6cmV0dXJuIG49W10sdGhpcy5fbmF2aUluZm89dCx0LnNlcnZlcj9uLnB1c2godC5zZXJ2ZXIpOnBlLndhcm4oXCJuYXZpLnNlcnZlciBpcyBpbnZhbGlkXCIpLChpPXQuYmFja3VwU2VydmVyKSYmaS5zcGxpdChcIixcIikuZm9yRWFjaCgoZnVuY3Rpb24oZSl7bi5pbmRleE9mKGUpPDAmJm4ucHVzaChlKX0pKSwwPT09bi5sZW5ndGg/KHBlLmVycm9yKFwibmF2aSBpbnZhaWxkLlwiLG4pLFsyLEVlLlVOS05PV05dKToocj10aGlzLnJ1bnRpbWUuY3JlYXRlRGF0YUNoYW5uZWwoe3N0YXR1czpmdW5jdGlvbihpKXthLl9jb25uZWN0aW9uU3RhdHVzSGFuZGxlcihpLGUsbix0LnByb3RvY29sKX0sc2lnbmFsOnRoaXMuX3NpZ25hbEhhbmRsZXIuYmluZCh0aGlzKX0sdGhpcy5fb3B0aW9ucy5jb25uZWN0aW9uVHlwZSkscz1aZS5WMywxPT09dC5vcGVuQW50aSYmKHM9WmUuVjQpLFs0LHIuY29ubmVjdCh0aGlzLl9hcHBrZXksZSxuLHQucHJvdG9jb2wsdGhpcy5fYXBpVmVyLHMpXSk7Y2FzZSAxOnJldHVybihvPXUuc2VudCgpKT09PUVlLlNVQ0NFU1M/KHRoaXMuX2NoYW5uZWw9cix0aGlzLmN1cnJlbnRVc2VySWQ9ci51c2VySWQsdGhpcy5fY29ubmVjdGVkVGltZT1yLmNvbm5lY3RlZFRpbWUsdGhpcy5fbG9jYWxDb25uZWN0ZWRUaW1lPU1hdGguZmxvb3IoKERhdGUubm93KCkrci5zZW5kQ29ubmVjdFRpbWUpLzIpLHRoaXMuX3dhdGNoZXIuc3RhdHVzKEllLkNPTk5FQ1RFRCksdGhpcy5fcHVsbE9mZmxpbmVGaW5pc2hlZD0hMSx0aGlzLl9jb252ZXJzYXRpb25NYW5hZ2VyPW5ldyB4cih0aGlzLHRoaXMuX2FwcGtleSx0aGlzLmN1cnJlbnRVc2VySWQsdGhpcy5fd2F0Y2hlci5jb252ZXJzYXRpb24sdGhpcy5fd2F0Y2hlci5jb252ZXJzYXRpb25UYWcpLHRoaXMuX2NvbnZlcnNhdGlvbk1hbmFnZXIuc3RhcnRQdWxsQ29udmVyc2F0aW9uU3RhdHVzKDApLHRoaXMuX3VzZXJTZXR0aW5nTWFuYWdlcj1uZXcgQnIodGhpcyx0aGlzLl9hcHBrZXksdGhpcy5jdXJyZW50VXNlcklkLHRoaXMuX3dhdGNoZXIudGFnKSx0aGlzLl91c2VyU2V0dGluZ01hbmFnZXIucHVsbFVzZXJTZXR0aW5ncygwKSx0aGlzLl9zZW5kTWVzc2FnZVN0b3JlLmluaXQodGhpcy5jdXJyZW50VXNlcklkKSx0aGlzLl9jb252ZXJzYXRpb25NYW5hZ2VyLmFkYXB0T2xkU3RvcmUoKSx0aGlzLl9ydGNLVk1hbmFnZXI9bmV3IEtyKHRoaXMpLHRoaXMuX2pvaW5lZENocm1NYW5hZ2VyPW5ldyBOcih0aGlzLnJ1bnRpbWUsdGhpcy5fYXBwa2V5LHRoaXMuY3VycmVudFVzZXJJZCx0LmpvaW5NQ2hybSksdGhpcy5fc3RhcnRTeW5jSW50ZXJ2YWwoKSk6ci5jbG9zZSgpLFsyLG9dfX0pKX0pKX0sdC5wcm90b3R5cGUuX2Nvbm5lY3Rpb25TdGF0dXNIYW5kbGVyPWZ1bmN0aW9uKGUsdCxuLGkpe2lmKHBlLndhcm4oXCJjb25uZWN0aW9uIHN0YXR1cyBjaGFuZ2VkOlwiLGUpLGUhPT1JZS5DT05ORUNUSU5HKWlmKGUhPT1JZS5DT05ORUNURUQpe2lmKHRoaXMuX2NoYW5uZWwmJmUhPT1JZS5ESVNDT05ORUNURUQpcmV0dXJuIGU9PT1JZS5CTE9DS0VEfHxlPT09SWUuS0lDS0VEX09GRkxJTkVfQllfT1RIRVJfQ0xJRU5UfHxlPT09SWUuRElTQ09OTkVDVF9CWV9TRVJWRVI/KHRoaXMuZGlzY29ubmVjdCgpLHZvaWQgdGhpcy5fd2F0Y2hlci5zdGF0dXMoZSkpOnZvaWQoZSE9PUllLlJFRElSRUNUPyh0aGlzLl93YXRjaGVyLnN0YXR1cyhlKSx0aGlzLl90cnkyUmVjb25uZWN0KHQsbixpKSk6dGhpcy5fd2F0Y2hlci5zdGF0dXMoZSkpO3RoaXMuX3dhdGNoZXIuc3RhdHVzKGUpfWVsc2UgdGhpcy5fd2F0Y2hlci5zdGF0dXMoZSk7ZWxzZSB0aGlzLl93YXRjaGVyLnN0YXR1cyhlKX0sdC5wcm90b3R5cGUuX3RyeTJSZWNvbm5lY3Q9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB3KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgaSxyPXRoaXM7cmV0dXJuIGIodGhpcywoZnVuY3Rpb24ocyl7c3dpdGNoKHMubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5fY2hhbm5lbD8oaT1aZS5WMywxPT09dGhpcy5fbmF2aUluZm8ub3BlbkFudGkmJihpPVplLlY0KSxbNCx0aGlzLl9jaGFubmVsLmNvbm5lY3QodGhpcy5fYXBwa2V5LGUsdCxuLHRoaXMuX2FwaVZlcixpKV0pOlsyXTtjYXNlIDE6cmV0dXJuIHMuc2VudCgpPT09RWUuU1VDQ0VTUz8odGhpcy5fcHVsbE9mZmxpbmVGaW5pc2hlZD0hMSx0aGlzLl9zdGFydFN5bmNJbnRlcnZhbCgpLHRoaXMuX3dhdGNoZXIuc3RhdHVzKEllLkNPTk5FQ1RFRCksdGhpcy5fcmVqb2luQ2hybSgpLHBlLl9faW5zZXJ0TG9nSW50b0RhdGFiYXNlKCksWzJdKToodGhpcy5fd2F0Y2hlci5zdGF0dXMoSWUuV0VCU09DS0VUX1VOQVZBSUxBQkxFKSx0aGlzLl9yZWNvbm5lY3RUaW1lcj1zZXRUaW1lb3V0KChmdW5jdGlvbigpe3IuX3JlY29ubmVjdFRpbWVyPS0xLHIuX3RyeTJSZWNvbm5lY3QoZSx0LG4pfSksNWUzKSxbMl0pfX0pKX0pKX0sdC5wcm90b3R5cGUuX3NpZ25hbEhhbmRsZXI9ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLnN5bmNNc2csaT1lLnRvcGljO2lmKG4pdGhpcy5fcmVjZWl2ZVN5bmNNc2coZSx0KTtlbHNle3ZhciByPWhyW2ldO2lmKHIpc3dpdGNoKHIpe2Nhc2UgaHIuc19udGY6cGUuaW5mbyhcInJlY3Ygc19udGYgLT4gc2lnbmFsLm1lc3NhZ2VJZDogXCIrZS5tZXNzYWdlSWQpLHRoaXMuX3B1bGxNc2coZSk7YnJlYWs7Y2FzZSBoci5zX21zZzp0aGlzLl9yZWNlaXZlTXNnKGUpO2JyZWFrO2Nhc2UgaHIuc19jbWQ6dGhpcy5fcmVjZWl2ZVN0YXRlTm90aWZ5KGUpO2JyZWFrO2Nhc2UgaHIuc191czp0aGlzLl9yZWNlaXZlU2V0dGluZ05vdGlmeShlKTticmVhaztjYXNlIGhyLnJ0Y19udGY6dGhpcy5fcmVjZWl2ZVJ0Y0t2KGUpfWVsc2UgcGUuZXJyb3IoXCJ1bmtub3duIHRvcGljOlwiLGkpfX0sdC5wcm90b3R5cGUuX3JlY2VpdmVTdGF0ZU5vdGlmeT1mdW5jdGlvbihlKXt2YXIgdCxuPW51bGw9PT0odD10aGlzLl9jaGFubmVsKXx8dm9pZCAwPT09dD92b2lkIDA6dC5jb2RlYy5kZWNvZGVCeVBCTmFtZShlLmRhdGEsUHQpLGk9bi50aW1lLHI9bi50eXBlLHM9bi5jaHJtSWQ7c3dpdGNoKHIpe2Nhc2UgMjp0aGlzLl9jaHJtRW50cnlIYW5kbGVyLnB1bGxFbnRyeShzLGkpO2JyZWFrO2Nhc2UgMzp0aGlzLl9jb252ZXJzYXRpb25NYW5hZ2VyLnN0YXJ0UHVsbENvbnZlcnNhdGlvblN0YXR1cyhpKTticmVhaztjYXNlIDQ6dGhpcy5fY2hybUVudHJ5SGFuZGxlci5yZXNldChzKSx0aGlzLl93YXRjaGVyLmNoYXRyb29tKHtjaGF0cm9vbURlc3Ryb3llZDplLnRhcmdldElkfSl9fSx0LnByb3RvdHlwZS5fcmVjZWl2ZVNldHRpbmdOb3RpZnk9ZnVuY3Rpb24oZSl7dmFyIHQsbj0obnVsbD09PSh0PXRoaXMuX2NoYW5uZWwpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmNvZGVjLmRlY29kZUJ5UEJOYW1lKGUuZGF0YSxNbikpLnZlcnNpb247dGhpcy5fdXNlclNldHRpbmdNYW5hZ2VyLnB1bGxVc2VyU2V0dGluZ3Mobil9LHQucHJvdG90eXBlLl9yZWNlaXZlUnRjS3Y9ZnVuY3Rpb24oZSl7dmFyIHQsbj1udWxsPT09KHQ9dGhpcy5fY2hhbm5lbCl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuY29kZWMuZGVjb2RlQnlQQk5hbWUoZS5kYXRhLFFuKSxpPW4udGltZSxyPW4udHlwZSxzPW4ucm9vbUlkO3N3aXRjaChyKXtjYXNlIDE6dGhpcy5fcnRjS1ZNYW5hZ2VyLnB1bGxFbnRyeShzLGkpfX0sdC5wcm90b3R5cGUuX3JlY2VpdmVNZXNzYWdlRXhwYW5zaW9uPWZ1bmN0aW9uKGUpe3ZhciB0PWUuY29udGVudCxuPXQucHV0LGk9dC5kZWwscj10Lm1pZDtuJiZ0aGlzLl93YXRjaGVyLmV4cGFuc2lvbih7dXBkYXRlZEV4cGFuc2lvbjp7bWVzc2FnZVVJZDpyLGV4cGFuc2lvbjpufX0pLGkmJnRoaXMuX3dhdGNoZXIuZXhwYW5zaW9uKHtkZWxldGVkRXhwYW5zaW9uOnttZXNzYWdlVUlkOnIsZGVsZXRlZEtleXM6aX19KX0sdC5wcm90b3R5cGUuX3JlY2VpdmVTeW5jTXNnPWZ1bmN0aW9uKGUsdCl7dmFyIG47aWYoR3IuaW5jbHVkZXMoZS50b3BpYykpe3ZhciBpPW51bGw9PT0obj10aGlzLl9jaGFubmVsKXx8dm9pZCAwPT09bj92b2lkIDA6bi5jb2RlYy5kZWNvZGVCeVBCTmFtZShlLmRhdGEsTnQse2N1cnJlbnRVc2VySWQ6dGhpcy5jdXJyZW50VXNlcklkLHNpZ25hbDplfSk7aT10aGlzLl9oYW5kbGVNc2dQcm9wZXJ0aWVzKGkpLHQmJihpLnNlbnRUaW1lPXQudGltZXN0YW1wLGkubWVzc2FnZVVJZD10Lm1lc3NhZ2VVSWQpLHRoaXMuX3B1bGxpbmdNc2c/dGhpcy5fcHVsbFF1ZXVlLnB1c2goKG51bGw9PXQ/dm9pZCAwOnQudGltZXN0YW1wKXx8aS5zZW50VGltZSk6KHQmJnRoaXMuX3NlbmRNZXNzYWdlU3RvcmUuc2V0TWVzc2FnZSh0Lm1lc3NhZ2VVSWQsdC50aW1lc3RhbXApLGkubWVzc2FnZVR5cGUhPT1SZS5FWFBBTlNJT05fTk9USUZZPyhpLm1lc3NhZ2VUeXBlPT09UmUuU1lOQ19SRUFEX1NUQVRVUyYmdGhpcy5fY29udmVyc2F0aW9uTWFuYWdlci5jbGVhclVucmVhZENvdW50KGkuY29udmVyc2F0aW9uVHlwZSxpLnRhcmdldElkLGkuY2hhbm5lbElkKSx0aGlzLl9jb252ZXJzYXRpb25NYW5hZ2VyLnNldENvbnZlcnNhdGlvbkNhY2hlQnlNZXNzYWdlKGksITApLHRoaXMuX3dhdGNoZXIuYmF0Y2hNZXNzYWdlKFtpXSkpOnRoaXMuX3JlY2VpdmVNZXNzYWdlRXhwYW5zaW9uKGkpKX19LHQucHJvdG90eXBlLl9wdWxsTXNnPWZ1bmN0aW9uKGUpe2lmKHRoaXMuX2NoYW5uZWwpe3ZhciB0PXRoaXMuX2NoYW5uZWwuY29kZWMuZGVjb2RlQnlQQk5hbWUoZS5kYXRhLFB0KSxuPXQudHlwZSxpPXQuY2hybUlkLHI9dC50aW1lO2lmKHBlLmluZm8oXCJzX250ZiAtPiB0eXBlOiBcIituK1wiLCBjaHJtSWQ6IFwiK2krXCIsIHRpbWU6IFwiK3IpLDI9PT1uKXt2YXIgcz10aGlzLl9jaHJtc1F1ZXVlW2ldO2lmKCFzKXJldHVybjtzLnF1ZXVlLnB1c2gociksdGhpcy5fcHVsbENocm1Nc2coaSl9ZWxzZSB0aGlzLl9wdWxsUXVldWUucHVzaChyKSx0aGlzLl9zeW5jTXNnKCl9fSx0LnByb3RvdHlwZS5fc3RhcnRTeW5jSW50ZXJ2YWw9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuX3N0b3BTeW5jSW50ZXJ2YWwoKTt0aGlzLl9pbnRlcnZhbFRpbWVyPXNldEludGVydmFsKChmdW5jdGlvbigpe0RhdGUubm93KCktZS5fbGF0ZXN0U3luY1RpbWVzdGFtcD49MThlNCYmZS5fc3luY01zZygpfSksM2U0KSx0aGlzLl9sYXRlc3RTeW5jVGltZXN0YW1wPURhdGUubm93KCksdGhpcy5fc3luY01zZygpfSx0LnByb3RvdHlwZS5fc3RvcFN5bmNJbnRlcnZhbD1mdW5jdGlvbigpey0xIT09dGhpcy5faW50ZXJ2YWxUaW1lciYmKGNsZWFySW50ZXJ2YWwodGhpcy5faW50ZXJ2YWxUaW1lciksdGhpcy5faW50ZXJ2YWxUaW1lcj0tMSl9LHQucHJvdG90eXBlLl9zeW5jTXNnPWZ1bmN0aW9uKCl7cmV0dXJuIHcodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBlLHQsbixpLHIscyxvLGEsdSxjLGgsbCxkLGYscD10aGlzO3JldHVybiBiKHRoaXMsKGZ1bmN0aW9uKGcpe3N3aXRjaChnLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuX3B1bGxpbmdNc2c/WzJdOnRoaXMuX2NoYW5uZWw/KHRoaXMuX3B1bGxpbmdNc2c9ITAsZT10aGlzLl9sZXR0ZXJib3guZ2V0T3V0Ym94VGltZSh0aGlzLmN1cnJlbnRVc2VySWQpLHQ9dGhpcy5fbGV0dGVyYm94LmdldEluYm94VGltZSh0aGlzLmN1cnJlbnRVc2VySWQpLHBlLmluZm8oXCJwdWxsTXNnIC0+IHNlbmRib3hUaW1lOiBcIitlK1wiLCBpbmJveFRpbWU6IFwiK3QpLG49dGhpcy5fY2hhbm5lbC5jb2RlYy5lbmNvZGVTeW5jTXNnKHtzZW5kYm94VGltZTplLGluYm94VGltZTp0fSksaT1uZXcgc3IoaHJbaHIucHVsbE1zZ10sbix0aGlzLmN1cnJlbnRVc2VySWQpLFs0LHRoaXMuX2NoYW5uZWwuc2VuZChpLGJ0LHtjb25uZWN0ZWRUaW1lOnRoaXMuX2NoYW5uZWwuY29ubmVjdGVkVGltZSxjdXJyZW50VXNlcklkOnRoaXMuY3VycmVudFVzZXJJZH0pXSk6KHRoaXMuX3B1bGxpbmdNc2c9ITEsWzJdKTtjYXNlIDE6cmV0dXJuIHI9Zy5zZW50KCkscz1yLmNvZGUsbz1yLmRhdGEsdGhpcy5fbGF0ZXN0U3luY1RpbWVzdGFtcD1EYXRlLm5vdygpLHMhPT1FZS5TVUNDRVNTfHwhb3x8cmUoby5maW5pc2hlZCl8fHJlKG8ubGlzdCl8fHJlKG8uc3luY1RpbWUpPyhwZS53YXJuKFwicHVsbE1zZyBmYWlsZWQgLT4gY29kZTpcIixzLFwiLCBkYXRhOiBcIixvKSx0aGlzLl9wdWxsaW5nTXNnPSExLFsyXSk6KGE9by5saXN0LHU9by5maW5pc2hlZCxjPW8uc3luY1RpbWUscGUuaW5mbyhcInB1bGxNc2cgc3VjY2VzcyAtPiBzeW5jVGltZTogXCIrYytcIiwgZmluaXNoZWQ6IFwiK3UpLGg9MCxsPVtdLGEuZm9yRWFjaCgoZnVuY3Rpb24oZSl7aWYoZS5tZXNzYWdlRGlyZWN0aW9uPT09eWUuU0VORCYmKGg9TWF0aC5tYXgoZS5zZW50VGltZSxoKSxwLl9zZW5kTWVzc2FnZVN0b3JlLmdldFNlbmRNZXNzYWdlTWFwKClbZS5tZXNzYWdlVUlkXSkpcmV0dXJuIHZvaWQgcC5fc2VuZE1lc3NhZ2VTdG9yZS5yZW1vdmVCeVVJRChlLm1lc3NhZ2VVSWQpO2lmKGUubWVzc2FnZVR5cGUhPT1SZS5FWFBBTlNJT05fTk9USUZZKXtpZihlLm1lc3NhZ2VUeXBlPT09UmUuU1lOQ19SRUFEX1NUQVRVUyl7aWYoZS5zZW5kZXJVc2VySWQhPT1wLmN1cnJlbnRVc2VySWQpcmV0dXJuO3AuX2NvbnZlcnNhdGlvbk1hbmFnZXIuY2xlYXJVbnJlYWRDb3VudChlLmNvbnZlcnNhdGlvblR5cGUsZS50YXJnZXRJZCxlLmNoYW5uZWxJZCl9dmFyIHQ9cC5faGFuZGxlTXNnUHJvcGVydGllcyhlKTtwLl9jb252ZXJzYXRpb25NYW5hZ2VyLnNldENvbnZlcnNhdGlvbkNhY2hlQnlNZXNzYWdlKHQsITApLGwucHVzaCh0KX1lbHNlIHAuX3JlY2VpdmVNZXNzYWdlRXhwYW5zaW9uKGUpfSkpLHRoaXMuX3dhdGNoZXIuYmF0Y2hNZXNzYWdlKGwpLHRoaXMuX2xldHRlcmJveC5zZXRJbmJveFRpbWUoYyx0aGlzLmN1cnJlbnRVc2VySWQpLHRoaXMuX2xldHRlcmJveC5zZXRPdXRib3hUaW1lKGgsdGhpcy5jdXJyZW50VXNlcklkKSx0aGlzLl9zZW5kTWVzc2FnZVN0b3JlLnJlbW92ZUJ5VGltZXN0YW1wKGgpLHRoaXMuX3B1bGxpbmdNc2c9ITEsZD10aGlzLl9wdWxsUXVldWUuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4gZT5jfSkpLHRoaXMuX3B1bGxRdWV1ZS5sZW5ndGg9MCwoZj10aGlzLl9wdWxsUXVldWUpLnB1c2guYXBwbHkoZixkKSx1JiYhdGhpcy5fcHVsbE9mZmxpbmVGaW5pc2hlZCYmKHRoaXMuX3B1bGxPZmZsaW5lRmluaXNoZWQ9ITAsdGhpcy5fd2F0Y2hlci5wdWxsRmluaXNoZWQoKSksKCF1fHxkLmxlbmd0aD4wKSYmdGhpcy5fc3luY01zZygpLFsyXSl9fSkpfSkpfSx0LnByb3RvdHlwZS5fcmVjZWl2ZU1zZz1mdW5jdGlvbihlKXtpZih0aGlzLl9jaGFubmVsJiYhdGhpcy5fcHVsbGluZ01zZylpZih0aGlzLl9wdWxsUXVldWUubGVuZ3RoPjApdGhpcy5fc3luY01zZygpO2Vsc2V7dmFyIHQ9dGhpcy5fY2hhbm5lbC5jb2RlYy5kZWNvZGVCeVBCTmFtZShlLmRhdGEsd3Qse2N1cnJlbnRVc2VySWQ6dGhpcy5jdXJyZW50VXNlcklkLGNvbm5lY3RlZFRpbWU6dGhpcy5fY2hhbm5lbC5jb25uZWN0ZWRUaW1lfSk7KHQ9dGhpcy5faGFuZGxlTXNnUHJvcGVydGllcyh0KSkuc2VuZGVyVXNlcklkPT09dGhpcy5jdXJyZW50VXNlcklkJiZ0aGlzLl9zZW5kTWVzc2FnZVN0b3JlLnNldE1lc3NhZ2UodC5tZXNzYWdlVUlkLHQuc2VudFRpbWUpLHQuaXNTdGF0dXNNZXNzYWdlfHx0LnNlbmRlclVzZXJJZD09PXRoaXMuY3VycmVudFVzZXJJZHx8dGhpcy5fbGV0dGVyYm94LnNldEluYm94VGltZSh0LnNlbnRUaW1lLHRoaXMuY3VycmVudFVzZXJJZCksdC5tZXNzYWdlVHlwZSE9PVJlLkVYUEFOU0lPTl9OT1RJRlk/dC5tZXNzYWdlVHlwZT09PVJlLlNZTkNfUkVBRF9TVEFUVVMmJnQuc2VuZGVyVXNlcklkIT09dGhpcy5jdXJyZW50VXNlcklkfHwodGhpcy5fY29udmVyc2F0aW9uTWFuYWdlci5zZXRDb252ZXJzYXRpb25DYWNoZUJ5TWVzc2FnZSh0LCEwKSx0aGlzLl93YXRjaGVyLmJhdGNoTWVzc2FnZShbdF0pKTp0aGlzLl9yZWNlaXZlTWVzc2FnZUV4cGFuc2lvbih0KX19LHQucHJvdG90eXBlLl9oYW5kbGVNc2dQcm9wZXJ0aWVzPWZ1bmN0aW9uKGUsdCl7dm9pZCAwPT09dCYmKHQ9ITEpO3ZhciBuLGk9ZS5tZXNzYWdlVHlwZSxyPWUuaXNDb3VudGVkLHM9ZS5pc1BlcnNpdGVkLG89ZS5pc1N0YXR1c01lc3NhZ2UsYT1pIGluIEUsdT1pIGluIHRoaXMuX2N1c3RvbU1lc3NhZ2VUeXBlO2lmKG49YT9PKE8oe30sRVtpXSkse2lzU3RhdHVzTWVzc2FnZTpJLmluY2x1ZGVzKGkpfSk6dT90aGlzLl9jdXN0b21NZXNzYWdlVHlwZVtpXTp7aXNDb3VudGVkOiFzZShyKSYmcixpc1BlcnNpdGVkOiFzZShzKSYmcyxpc1N0YXR1c01lc3NhZ2U6ITF9LE9iamVjdC5hc3NpZ24oZSxuKSx0JiYhcmUobykmJihlLmlzU3RhdHVzTWVzc2FnZT1vKSwhdCl7dmFyIGM9ZS5jb250ZW50LnVzZXI7aWYoYyl7dmFyIGg9Yy5wb3J0cmFpdCxsPWMucG9ydHJhaXRVcmksZD1ofHxsO2QmJihjLnBvcnRyYWl0PWMucG9ydHJhaXRVcmk9ZCl9fXJldHVybiBlfSx0LnByb3RvdHlwZS5nZXRIaXN0b3J5TWVzc2FnZT1mdW5jdGlvbihlLHQsbixpLHIscyl7cmV0dXJuIHZvaWQgMD09PXMmJihzPVwiXCIpLHcodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBvLGEsdSxjLGgsbCxkLGYscDtyZXR1cm4gYih0aGlzLChmdW5jdGlvbihnKXtzd2l0Y2goZy5sYWJlbCl7Y2FzZSAwOnJldHVybiBhPShvPXRoaXMpLmN1cnJlbnRVc2VySWQsdT1vLl9jaGFubmVsLGM9a2lbZV18fEFpLGg9MT09PWkmJjA9PT1uLHU/KGw9dS5jb2RlYy5lbmNvZGVHZXRIaXN0b3J5TXNnKHQse3RpbWVzdGFtcDpuLGNvdW50Omg/MjppLG9yZGVyOnIsY2hhbm5lbElkOnN9KSxbNCx1LnNlbmQobmV3IHNyKGMsbCxhKSxWdCx7Y3VycmVudFVzZXJJZDphLGNvbm5lY3RlZFRpbWU6dS5jb25uZWN0ZWRUaW1lLGNvbnZlcnNhdGlvbjp7dGFyZ2V0SWQ6dH19KV0pOlszLDJdO2Nhc2UgMTpyZXR1cm4gZD1nLnNlbnQoKSwoZj1kLmNvZGUpIT09RWUuU1VDQ0VTUz9bMix7Y29kZTpmfV06KHA9ZC5kYXRhLGgmJjI9PT1wLmxpc3QubGVuZ3RoJiYocC5oYXNNb3JlPSEwLDA9PT1yP3AubGlzdC5zaGlmdCgpOnAubGlzdC5wb3AoKSksWzIse2NvZGU6ZixkYXRhOntsaXN0OnAubGlzdCxoYXNNb3JlOnAuaGFzTW9yZX19XSk7Y2FzZSAyOnJldHVyblsyLHtjb2RlOkVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSUR9XX19KSl9KSl9LHQucHJvdG90eXBlLnJlcG9ydFNES0luZm89ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5jdXJyZW50VXNlcklkLG49dGhpcy5fY2hhbm5lbDtpZihuKXtwZS5pbmZvKFwicmVwb3J0U0RLSW5mbyAtPlwiLGUpO3ZhciBpPW4uY29kZWMuZW5jb2RlUmVwb3J0U0RLSW5mbyhKU09OLnN0cmluZ2lmeShlKSkscj1uZXcgc3IoaHJbaHIucmVwb3J0c2RrXSxpLHQpO24uc2VuZChyKS50aGVuKChmdW5jdGlvbihlKXt2YXIgdD1lLmNvZGU7dCE9PUVlLlNVQ0NFU1MmJnBlLndhcm4oXCJyZXBvcnRTREtJbmZvIGZhaWxlZCAtPiBjb2RlOiBcIit0KX0pKX19LHQucHJvdG90eXBlLmRlbGV0ZVJlbW90ZU1lc3NhZ2U9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIHcodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciByLHMsbyxhLHUsYyxoO3JldHVybiBiKHRoaXMsKGZ1bmN0aW9uKGwpe3N3aXRjaChsLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHM9KHI9dGhpcykuY3VycmVudFVzZXJJZCwobz1yLl9jaGFubmVsKT8oYT1vLmNvZGVjLmVuY29kZURlbGV0ZU1lc3NhZ2VzKGUsdCxuLGkpLHU9bmV3IHNyKEVpLGEscyksWzQsby5zZW5kKHUpXSk6WzMsMl07Y2FzZSAxOnJldHVybiBjPWwuc2VudCgpLGg9Yy5jb2RlLEVlLlNVQ0NFU1MsWzIsaF07Y2FzZSAyOnJldHVyblsyLEVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSURdfX0pKX0pKX0sdC5wcm90b3R5cGUuZGVsZXRlUmVtb3RlTWVzc2FnZUJ5VGltZXN0YW1wPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiB3KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgcixzLG8sYSx1LGMsaCxsO3JldHVybiBiKHRoaXMsKGZ1bmN0aW9uKGQpe3N3aXRjaChkLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHM9KHI9dGhpcykuY3VycmVudFVzZXJJZCwobz1yLl9jaGFubmVsKT8oYT1vLmNvZGVjLmVuY29kZUNsZWFyTWVzc2FnZXModCxuLGkpLHU9eGlbZV0sYz1uZXcgc3IodSxhLHMpLFs0LG8uc2VuZChjKV0pOlszLDJdO2Nhc2UgMTpyZXR1cm4gaD1kLnNlbnQoKSxsPWguY29kZSxFZS5TVUNDRVNTLFsyLGxdO2Nhc2UgMjpyZXR1cm5bMixFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEXX19KSl9KSl9LHQucHJvdG90eXBlLmdldENvbnZlcnNhdGlvbkxpc3Q9ZnVuY3Rpb24oZSx0LG4saSxyKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9MzAwKSx3KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgcixzLG8sYSx1LGMsaCxsLGQ9dGhpcztyZXR1cm4gYih0aGlzLChmdW5jdGlvbihmKXtzd2l0Y2goZi5sYWJlbCl7Y2FzZSAwOnJldHVybiBzPShyPXRoaXMpLmN1cnJlbnRVc2VySWQsbz1yLl9jaGFubmVsLHQ9dHx8ai5QUklWQVRFLG8/KGE9by5jb2RlYy5lbmNvZGVPbGRDb252ZXJzYXRpb25MaXN0KHtjb3VudDplLHR5cGU6dCxzdGFydFRpbWU6bixvcmRlcjppfSksdT1uZXcgc3IoT2ksYSxzKSxbNCxvLnNlbmQodSx4dCx7Y3VycmVudFVzZXJJZDpzLGNvbm5lY3RlZFRpbWU6by5jb25uZWN0ZWRUaW1lLGFmdGVyRGVjb2RlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuY29udmVyc2F0aW9uVHlwZSxuPWUudGFyZ2V0SWQsaT1lLmNoYW5uZWxJZCxyPWQuX2NvbnZlcnNhdGlvbk1hbmFnZXIuZ2V0KHQsbixpKTtyZXR1cm4gT2JqZWN0LmFzc2lnbihlLHIpLGV9fSldKTpbMywyXTtjYXNlIDE6cmV0dXJuIGM9Zi5zZW50KCksaD1jLmNvZGUsbD1jLmRhdGEsaCE9PUVlLlNVQ0NFU1M/WzIse2NvZGU6aH1dOlsyLHtjb2RlOmgsZGF0YTpsfV07Y2FzZSAyOnJldHVyblsyLHtjb2RlOkVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSUR9XX19KSl9KSl9LHQucHJvdG90eXBlLnJlbW92ZUNvbnZlcnNhdGlvbj1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHcodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBpLHIscyxvLGE7cmV0dXJuIGIodGhpcywoZnVuY3Rpb24odSl7c3dpdGNoKHUubGFiZWwpe2Nhc2UgMDpyZXR1cm4oaT10aGlzLl9jaGFubmVsKT8ocj1pLmNvZGVjLmVuY29kZVJlbW92ZU9sZENvbnZlcnNhdGlvbkxpc3Qoe2NvbnZlcnNhdGlvblR5cGU6ZSxjaGFubmVsSWQ6bix0YXJnZXRJZDp0fSkscz1uZXcgc3Iod2kscix0KSxbNCxpLnNlbmQocyldKTpbMywyXTtjYXNlIDE6cmV0dXJuIG89dS5zZW50KCkscGUuaW5mbyhcIlJlbW92ZUNvbnZlcnNhdGlvbiA9PlwiLG8pLGE9by5jb2RlLEVlLlNVQ0NFU1MsWzIsYV07Y2FzZSAyOnJldHVyblsyLEVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSURdfX0pKX0pKX0sdC5wcm90b3R5cGUuZ2V0Q29udmVyc2F0aW9uPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIGkscixzLG8sYSx1O3JldHVybiBiKHRoaXMsKGZ1bmN0aW9uKGMpe3N3aXRjaChjLmxhYmVsKXtjYXNlIDA6cmV0dXJuKGk9dGhpcy5fY29udmVyc2F0aW9uTWFuYWdlci5nZXQoZSx0LG4pKT9bNCx0aGlzLmdldEhpc3RvcnlNZXNzYWdlKGUsdCwwLDEsMCldOlsyLHtjb2RlOkVlLkNPTlZFUl9HRVRfRVJST1J9XTtjYXNlIDE6cmV0dXJuIHI9Yy5zZW50KCkscz1yLmNvZGUsbz1yLmRhdGEscyE9PUVlLlNVQ0NFU1M/WzIse2NvZGU6RWUuQ09OVkVSX0dFVF9FUlJPUn1dOihhPShudWxsPT1vP3ZvaWQgMDpvLmxpc3RbMF0pfHxudWxsLHU9e2NvbnZlcnNhdGlvblR5cGU6ZSx0YXJnZXRJZDp0LGNoYW5uZWxJZDpuLHVucmVhZE1lc3NhZ2VDb3VudDppLnVucmVhZE1lc3NhZ2VDb3VudHx8MCxsYXRlc3RNZXNzYWdlOmEsbm90aWZpY2F0aW9uU3RhdHVzOmkubm90aWZpY2F0aW9uU3RhdHVzfHxOZS5DTE9TRSxpc1RvcDppLmlzVG9wfHwhMSxsYXN0VW5yZWFkVGltZTppLmxhc3RVbnJlYWRUaW1lfHwwLHVucmVhZE1lbnRpb25lZENvdW50OmkudW5yZWFkTWVudGlvbmVkQ291bnR8fDB9LFsyLHtjb2RlOkVlLlNVQ0NFU1MsZGF0YTp1fV0pfX0pKX0pKX0sdC5wcm90b3R5cGUuZ2V0QWxsQ29udmVyc2F0aW9uVW5yZWFkQ291bnQ9ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXMuX2NvbnZlcnNhdGlvbk1hbmFnZXIuZ2V0QWxsVW5yZWFkQ291bnQoZSx0LG4pO3JldHVybiBQcm9taXNlLnJlc29sdmUoe2NvZGU6RWUuU1VDQ0VTUyxkYXRhOml9KX0sdC5wcm90b3R5cGUuZ2V0Q29udmVyc2F0aW9uVW5yZWFkQ291bnQ9ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXMuX2NvbnZlcnNhdGlvbk1hbmFnZXIuZ2V0VW5yZWFkQ291bnQoZSx0LG4pO3JldHVybiBQcm9taXNlLnJlc29sdmUoe2NvZGU6RWUuU1VDQ0VTUyxkYXRhOml9KX0sdC5wcm90b3R5cGUuY2xlYXJDb252ZXJzYXRpb25VbnJlYWRDb3VudD1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHRoaXMuX2NvbnZlcnNhdGlvbk1hbmFnZXIuY2xlYXJVbnJlYWRDb3VudChlLHQsbiwhMSksUHJvbWlzZS5yZXNvbHZlKEVlLlNVQ0NFU1MpfSx0LnByb3RvdHlwZS5jbGVhckFsbFVucmVhZENvdW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbnZlcnNhdGlvbk1hbmFnZXIuY2xlYXJBbGxVbnJlYWRDb3VudCgpLFByb21pc2UucmVzb2x2ZShFZS5TVUNDRVNTKX0sdC5wcm90b3R5cGUuZ2V0Rmlyc3RVbnJlYWRNZXNzYWdlPWZ1bmN0aW9uKGUsdCl7dGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIil9LHQucHJvdG90eXBlLnNhdmVDb252ZXJzYXRpb25NZXNzYWdlRHJhZnQ9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIHRoaXMuX2NvbnZlcnNhdGlvbk1hbmFnZXIuc2V0RHJhZnQoZSx0LG4saSksUHJvbWlzZS5yZXNvbHZlKEVlLlNVQ0NFU1MpfSx0LnByb3RvdHlwZS5nZXRDb252ZXJzYXRpb25NZXNzYWdlRHJhZnQ9ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXMuX2NvbnZlcnNhdGlvbk1hbmFnZXIuZ2V0RHJhZnQoZSx0LG4pO3JldHVybiBQcm9taXNlLnJlc29sdmUoe2NvZGU6RWUuU1VDQ0VTUyxkYXRhOml9KX0sdC5wcm90b3R5cGUuY2xlYXJDb252ZXJzYXRpb25NZXNzYWdlRHJhZnQ9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB0aGlzLl9jb252ZXJzYXRpb25NYW5hZ2VyLmNsZWFyRHJhZnQoZSx0LG4pLFByb21pc2UucmVzb2x2ZShFZS5TVUNDRVNTKX0sdC5wcm90b3R5cGUucHVsbENvbnZlcnNhdGlvblN0YXR1cz1mdW5jdGlvbihlKXtyZXR1cm4gdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHQsbixpLHIscyxvLGEsdTtyZXR1cm4gYih0aGlzLChmdW5jdGlvbihjKXtzd2l0Y2goYy5sYWJlbCl7Y2FzZSAwOnJldHVybiBuPSh0PXRoaXMpLl9jaGFubmVsLGk9dC5jdXJyZW50VXNlcklkLG4/KHI9bi5jb2RlYy5lbmNvZGVHZXRDb252ZXJzYXRpb25TdGF0dXMoZSkscz1uZXcgc3IoaHJbaHIucHVsbFNlQXR0c10scixpKSxbNCxuLnNlbmQocyxVbildKTpbMywyXTtjYXNlIDE6cmV0dXJuIG89Yy5zZW50KCksYT1vLmNvZGUsdT1vLmRhdGEsYSE9PUVlLlNVQ0NFU1M/WzIse2NvZGU6YX1dOlsyLHtjb2RlOmEsZGF0YTp1fV07Y2FzZSAyOnJldHVyblsyLHtjb2RlOkVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSUR9XX19KSl9KSl9LHQucHJvdG90eXBlLmJhdGNoU2V0Q29udmVyc2F0aW9uU3RhdHVzPWZ1bmN0aW9uKGUpe3JldHVybiB3KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgdCxuLGkscixzLG8sYSx1LGMsaD10aGlzO3JldHVybiBiKHRoaXMsKGZ1bmN0aW9uKGwpe3N3aXRjaChsLmxhYmVsKXtjYXNlIDA6cmV0dXJuIG49KHQ9dGhpcykuY3VycmVudFVzZXJJZCwoaT10Ll9jaGFubmVsKT8ocj1pLmNvZGVjLmVuY29kZVNldENvbnZlcnNhdGlvblN0YXR1cyhlKSxzPW5ldyBzcihiaSxyLG4pLFs0LGkuc2VuZChzLFZuKV0pOlszLDJdO2Nhc2UgMTpyZXR1cm4gbz1sLnNlbnQoKSxhPW8uY29kZSx1PW8uZGF0YSxhPT09RWUuU1VDQ0VTUz8oYz11LGUuZm9yRWFjaCgoZnVuY3Rpb24oZSl7aC5fY29udmVyc2F0aW9uTWFuYWdlci5hZGRTdGF0dXMoTyhPKHt9LGUpLHt1cGRhdGVkVGltZTpjLnZlcnNpb259KSwhMCl9KSksWzIsYV0pOlsyLGFdO2Nhc2UgMjpyZXR1cm5bMixFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEXX19KSl9KSl9LHQucHJvdG90eXBlLl9qb2luQ2hybT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHcodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBpLHIscyxvLGEsdSxjO3JldHVybiBiKHRoaXMsKGZ1bmN0aW9uKGgpe3N3aXRjaChoLmxhYmVsKXtjYXNlIDA6cmV0dXJuKGk9dGhpcy5fY2hhbm5lbCk/KHI9aS5jb2RlYy5lbmNvZGVKb2luT3JRdWl0Q2hhdFJvb20oKSxzPW5ldyBzcihuP0lpOm1pLHIsZSksWzQsaS5zZW5kKHMsUXQpXSk6WzIsRWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRF07Y2FzZSAxOnJldHVybiBvPWguc2VudCgpLGE9by5jb2RlLHU9by5kYXRhLGE9PT1FZS5TVUNDRVNTJiYoYz11LmpvaW5UaW1lLHRoaXMuX2Nocm1zUXVldWVbZV18fCh0aGlzLl9jaHJtc1F1ZXVlW2VdPXtwdWxsaW5nOiExLHF1ZXVlOltdLHRpbWVzdGFtcDowfSksdGhpcy5fcHVsbENocm1Nc2coZSx0LGMpLHRoaXMuX25hdmlJbmZvLmt2U3RvcmFnZSYmdGhpcy5fY2hybUVudHJ5SGFuZGxlci5wdWxsRW50cnkoZSwwKSx0aGlzLl9qb2luZWRDaHJtTWFuYWdlci5zZXQoZSx0KSksWzIsYV19fSkpfSkpfSx0LnByb3RvdHlwZS5fcmVqb2luQ2hybT1mdW5jdGlvbigpe3JldHVybiB3KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgZSx0LG4saSxyLHM7cmV0dXJuIGIodGhpcywoZnVuY3Rpb24obyl7c3dpdGNoKG8ubGFiZWwpe2Nhc2UgMDpmb3IobiBpbiBlPXRoaXMuX2pvaW5lZENocm1NYW5hZ2VyLmdldCgpLHQ9W10sZSl0LnB1c2gobik7aT0wLG8ubGFiZWw9MTtjYXNlIDE6cmV0dXJuIGk8dC5sZW5ndGg/KHI9dFtpXSxbNCx0aGlzLl9qb2luQ2hybShyLGVbcl18fDEwLCEwKV0pOlszLDRdO2Nhc2UgMjoocz1vLnNlbnQoKSk9PT1FZS5TVUNDRVNTP3RoaXMuX3dhdGNoZXIuY2hhdHJvb20oe3Jlam9pbmVkUm9vbTp7Y2hhdHJvb21JZDpyLGNvdW50OmVbcl19fSk6dGhpcy5fd2F0Y2hlci5jaGF0cm9vbSh7cmVqb2luZWRSb29tOntjaGF0cm9vbUlkOnIsZXJyb3JDb2RlOnN9fSksby5sYWJlbD0zO2Nhc2UgMzpyZXR1cm4gaSsrLFszLDFdO2Nhc2UgNDpyZXR1cm5bMl19fSkpfSkpfSx0LnByb3RvdHlwZS5fcHVsbENocm1Nc2c9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB2b2lkIDA9PT10JiYodD0xMCksdm9pZCAwPT09biYmKG49MCksdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIGkscixzLG8sYSx1LGMsaCxsLGQsZixwO3JldHVybiBiKHRoaXMsKGZ1bmN0aW9uKGcpe3N3aXRjaChnLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuX2NoYW5uZWw/KGk9dGhpcy5fY2hybXNRdWV1ZVtlXSxyPWkucHVsbGluZyxzPWkudGltZXN0YW1wLHI/WzJdOihpLnB1bGxpbmc9ITAsbz10aGlzLl9jaGFubmVsLmNvZGVjLmVuY29kZUNocm1TeW5jTXNnKHMsdCksYT1uZXcgc3IoaHJbaHIuY2hybVB1bGxdLG8sZSksWzQsdGhpcy5fY2hhbm5lbC5zZW5kKGEsYnQse2Nvbm5lY3RlZFRpbWU6dGhpcy5fY2hhbm5lbC5jb25uZWN0ZWRUaW1lLGN1cnJlbnRVc2VySWQ6dGhpcy5jdXJyZW50VXNlcklkfSldKSk6WzJdO2Nhc2UgMTpyZXR1cm4gdT1nLnNlbnQoKSxjPXUuY29kZSxoPXUuZGF0YSxpLnB1bGxpbmc9ITEsYz09PUVlLlNVQ0NFU1MmJmg/KGw9aC5saXN0LGQ9aC5zeW5jVGltZSxmPWguZmluaXNoZWQsaS50aW1lc3RhbXA9bj9NYXRoLm1heChkLG4pOmQsaS5xdWV1ZT1pLnF1ZXVlLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIGU+ZH0pKSxwPVtdLGwuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZS5zZW50VGltZTxzfHxwLnB1c2goZSl9KSksdGhpcy5fd2F0Y2hlci5iYXRjaE1lc3NhZ2UocCksKCFmfHxpLnF1ZXVlLmxlbmd0aD4wKSYmdGhpcy5fcHVsbENocm1Nc2coZSksWzJdKToocGUud2FybihcInB1bGwgY2hhdHJvb20gbXNnIGZhaWxlZCwgY29kZTpcIixjLFwiLCBkYXRhOlwiLGgpLFsyXSl9fSkpfSkpfSx0LnByb3RvdHlwZS5qb2luQ2hhdHJvb209ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIGIodGhpcywoZnVuY3Rpb24obil7cmV0dXJuWzIsdGhpcy5fam9pbkNocm0oZSx0LCExKV19KSl9KSl9LHQucHJvdG90eXBlLmpvaW5FeGlzdENoYXRyb29tPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHcodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiBiKHRoaXMsKGZ1bmN0aW9uKG4pe3JldHVyblsyLHRoaXMuX2pvaW5DaHJtKGUsdCwhMCldfSkpfSkpfSx0LnByb3RvdHlwZS5xdWl0Q2hhdHJvb209ZnVuY3Rpb24oZSl7cmV0dXJuIHcodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciB0LG4saSxyLHM7cmV0dXJuIGIodGhpcywoZnVuY3Rpb24obyl7c3dpdGNoKG8ubGFiZWwpe2Nhc2UgMDpyZXR1cm4odD10aGlzLl9jaGFubmVsKT8obj10LmNvZGVjLmVuY29kZUpvaW5PclF1aXRDaGF0Um9vbSgpLGk9bmV3IHNyKFRpLG4sZSksWzQsdC5zZW5kKGkpXSk6WzIsRWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRF07Y2FzZSAxOnJldHVybiByPW8uc2VudCgpLChzPXIuY29kZSk9PT1FZS5TVUNDRVNTJiYoZGVsZXRlIHRoaXMuX2Nocm1zUXVldWVbZV0sdGhpcy5fY2hybUVudHJ5SGFuZGxlci5yZXNldChlKSx0aGlzLl9qb2luZWRDaHJtTWFuYWdlci5yZW1vdmUoZSkpLFsyLHNdfX0pKX0pKX0sdC5wcm90b3R5cGUuZ2V0Q2hhdHJvb21JbmZvPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIGkscixzLG8sYSx1O3JldHVybiBiKHRoaXMsKGZ1bmN0aW9uKGMpe3N3aXRjaChjLmxhYmVsKXtjYXNlIDA6cmV0dXJuKGk9dGhpcy5fY2hhbm5lbCk/KHI9aS5jb2RlYy5lbmNvZGVHZXRDaGF0Um9vbUluZm8odCxuKSxzPW5ldyBzcihocltoci5xdWVyeUNocm1JXSxyLGUpLFs0LGkuc2VuZChzLEp0KV0pOlsyLHtjb2RlOkVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSUR9XTtjYXNlIDE6cmV0dXJuIG89Yy5zZW50KCksYT1vLmNvZGUsdT1vLmRhdGEsYSE9PUVlLlNVQ0NFU1M/WzIse2NvZGU6YX1dOlsyLHtjb2RlOmEsZGF0YTp1fV19fSkpfSkpfSx0LnByb3RvdHlwZS5nZXRDaGF0cm9vbUhpc3RvcnlNZXNzYWdlcz1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHIscyxvLGEsdSxjO3JldHVybiBiKHRoaXMsKGZ1bmN0aW9uKGgpe3N3aXRjaChoLmxhYmVsKXtjYXNlIDA6cmV0dXJuKHI9dGhpcy5fY2hhbm5lbCk/KHM9ci5jb2RlYy5lbmNvZGVHZXRIaXN0b3J5TXNnKGUse3RpbWVzdGFtcDp0LGNvdW50Om4sb3JkZXI6aX0pLG89bmV3IHNyKExpLHMsZSksWzQsci5zZW5kKG8sVnQse2NvbnZlcnNhdGlvbjp7dGFyZ2V0SWQ6ZX19KV0pOlsyLHtjb2RlOkVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSUR9XTtjYXNlIDE6cmV0dXJuIGE9aC5zZW50KCksdT1hLmNvZGUsYz1hLmRhdGEsdSE9PUVlLlNVQ0NFU1M/WzIse2NvZGU6dX1dOlsyLHtjb2RlOnUsZGF0YTp7bGlzdDpjLmxpc3QsaGFzTW9yZTpjLmhhc01vcmV9fV19fSkpfSkpfSx0LnByb3RvdHlwZS5fbW9kaWZ5Q2hhdHJvb21LVj1mdW5jdGlvbihlLHQpe3JldHVybiB3KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbixpLHIscyxvLGEsdSxjO3JldHVybiBiKHRoaXMsKGZ1bmN0aW9uKGgpe3N3aXRjaChoLmxhYmVsKXtjYXNlIDA6cmV0dXJuIGk9KG49dGhpcykuX2NoYW5uZWwscj1uLmN1cnJlbnRVc2VySWQsaT8ocz1pLmNvZGVjLmVuY29kZU1vZGlmeUNoYXRSb29tS1YoZSx0LHIpLG89dC50eXBlPT09VWUuVVBEQVRFP0NpOlJpLGE9bmV3IHNyKG8scyxlKSxbNCxpLnNlbmQoYSldKTpbMixFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEXTtjYXNlIDE6cmV0dXJuIHU9aC5zZW50KCksKGM9dS5jb2RlKT09PUVlLlNVQ0NFU1M/KHRoaXMuX2Nocm1FbnRyeUhhbmRsZXIuc2V0TG9jYWwoZSx7a3ZFbnRyaWVzOlt0XSxzeW5jVGltZToobmV3IERhdGUpLmdldFRpbWUoKX0sciksWzIsY10pOlsyLGNdfX0pKX0pKX0sdC5wcm90b3R5cGUuX21vZGlmeUNoYXRyb29tS1ZTPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHcodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBuLGkscixzLG8sYSx1LGMsaCxsLGQsZjtyZXR1cm4gYih0aGlzLChmdW5jdGlvbihwKXtzd2l0Y2gocC5sYWJlbCl7Y2FzZSAwOnJldHVybiBpPShuPXRoaXMpLl9jaGFubmVsLHI9bi5jdXJyZW50VXNlcklkLGk/KHM9aS5jb2RlYy5lbmNvZGVNb2RpZnlDaGF0Um9vbUtWUyhlLHQsciksbz10LnR5cGU9PT1VZS5VUERBVEU/U2k6TmksYT1uZXcgc3IobyxzLGUpLFs0LGkuc2VuZChhLENuKV0pOlsyLHtjb2RlOkVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSUR9XTtjYXNlIDE6cmV0dXJuIHU9cC5zZW50KCksYz11LmNvZGUsLTEhPT1bRWUuU1VDQ0VTUyxFZS5DSEFUUk9PTV9LVl9TVE9SRV9OT1RfQUxMX1NVQ0NFU1NdLmluZGV4T2YoYykmJihsPVtdLGRlbGV0ZShkPU9iamVjdC5hc3NpZ24oe30sdCkpLmVudHJpZXMsdC5lbnRyaWVzLmZvckVhY2goKGZ1bmN0aW9uKGUpe2wucHVzaChPYmplY3QuYXNzaWduKHt9LGUsZCkpfSkpLGM9PT1FZS5DSEFUUk9PTV9LVl9TVE9SRV9OT1RfQUxMX1NVQ0NFU1MmJihmPXUuZGF0YSxwZS53YXJuKFwi6K6+572u5aSx6LSl55qE5bGe5oCn77yaXCIsZi5lcnJvcktleXMpLGg9Zi5lcnJvcktleXMsZiYmQXJyYXkuaXNBcnJheShmLmVycm9yS2V5cykmJmYuZXJyb3JLZXlzLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0PWwuZmluZEluZGV4KChmdW5jdGlvbih0KXtyZXR1cm4gZS5rZXk9PT10LmtleX0pKTstMSE9PXQmJmwuc3BsaWNlKHQsMSl9KSkpLHBlLndhcm4oXCLorr7nva7miJDlip/nmoTlsZ7mgKfvvJpcIixsKSx0aGlzLl9jaHJtRW50cnlIYW5kbGVyLnNldExvY2FsKGUse2t2RW50cmllczpsLHN5bmNUaW1lOihuZXcgRGF0ZSkuZ2V0VGltZSgpfSxyKSksWzIse2NvZGU6YyxkYXRhOmh9XX19KSl9KSl9LHQucHJvdG90eXBlLnNldENoYXRyb29tRW50cnk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIGIodGhpcywoZnVuY3Rpb24obil7cmV0dXJuIHQudHlwZT1VZS5VUERBVEUsdC51c2VySWQ9dC51c2VySWR8fHRoaXMuY3VycmVudFVzZXJJZCxbMix0aGlzLl9tb2RpZnlDaGF0cm9vbUtWKGUsdCldfSkpfSkpfSx0LnByb3RvdHlwZS5zZXRDaGF0cm9vbUVudHJpZXM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIGIodGhpcywoZnVuY3Rpb24obil7cmV0dXJuIHQudHlwZT1VZS5VUERBVEUsdC51c2VySWQ9dC51c2VySWR8fHRoaXMuY3VycmVudFVzZXJJZCxbMix0aGlzLl9tb2RpZnlDaGF0cm9vbUtWUyhlLHQpXX0pKX0pKX0sdC5wcm90b3R5cGUuZm9yY2VTZXRDaGF0cm9vbUVudHJ5PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHcodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiBiKHRoaXMsKGZ1bmN0aW9uKG4pe3JldHVybiB0LnR5cGU9VWUuVVBEQVRFLHQuaXNPdmVyd3JpdGU9ITAsdC51c2VySWQ9dC51c2VySWR8fHRoaXMuY3VycmVudFVzZXJJZCxbMix0aGlzLl9tb2RpZnlDaGF0cm9vbUtWKGUsdCldfSkpfSkpfSx0LnByb3RvdHlwZS5yZW1vdmVDaGF0cm9vbUVudHJ5PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHcodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiBiKHRoaXMsKGZ1bmN0aW9uKG4pe3JldHVybiB0LnR5cGU9VWUuREVMRVRFLHQudXNlcklkPXQudXNlcklkfHx0aGlzLmN1cnJlbnRVc2VySWQsWzIsdGhpcy5fbW9kaWZ5Q2hhdHJvb21LVihlLHQpXX0pKX0pKX0sdC5wcm90b3R5cGUucmVtb3ZlQ2hhdHJvb21FbnRyaWVzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHcodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiBiKHRoaXMsKGZ1bmN0aW9uKG4pe3JldHVybiB0LnR5cGU9VWUuREVMRVRFLHQudXNlcklkPXQudXNlcklkfHx0aGlzLmN1cnJlbnRVc2VySWQsWzIsdGhpcy5fbW9kaWZ5Q2hhdHJvb21LVlMoZSx0KV19KSl9KSl9LHQucHJvdG90eXBlLmZvcmNlUmVtb3ZlQ2hhdHJvb21FbnRyeT1mdW5jdGlvbihlLHQpe3JldHVybiB3KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXtyZXR1cm4gYih0aGlzLChmdW5jdGlvbihuKXtyZXR1cm4gdC50eXBlPVVlLkRFTEVURSx0LmlzT3ZlcndyaXRlPSEwLHQudXNlcklkPXQudXNlcklkfHx0aGlzLmN1cnJlbnRVc2VySWQsWzIsdGhpcy5fbW9kaWZ5Q2hhdHJvb21LVihlLHQpXX0pKX0pKX0sdC5wcm90b3R5cGUuZ2V0Q2hhdHJvb21FbnRyeT1mdW5jdGlvbihlLHQpe3JldHVybiB3KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbixpLHIscyxvLGEsdTtyZXR1cm4gYih0aGlzLChmdW5jdGlvbihjKXtzd2l0Y2goYy5sYWJlbCl7Y2FzZSAwOnJldHVybihuPXRoaXMuX2Nocm1FbnRyeUhhbmRsZXIuZ2V0VmFsdWUoZSx0KSk/WzIsUHJvbWlzZS5yZXNvbHZlKHtjb2RlOkVlLlNVQ0NFU1MsZGF0YTpufSldOlszLDFdO2Nhc2UgMTpyZXR1cm4oaT10aGlzLl9jaGFubmVsKT8ocj1pLmNvZGVjLmVuY29kZVB1bGxDaGF0Um9vbUtWKDApLHM9bmV3IHNyKGhyW2hyLnB1bGxLVl0scixlKSxbNCxpLnNlbmQocyxUbildKTpbMixQcm9taXNlLnJlamVjdCh7Y29kZTpFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEfSldO2Nhc2UgMjpyZXR1cm4gbz1jLnNlbnQoKSwoYT1vLmRhdGF8fHt9KSYmYS5rdkVudHJpZXMmJmEua3ZFbnRyaWVzLmxlbmd0aCYmdm9pZCAwIT09KHU9YS5rdkVudHJpZXMuZmluZCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUua2V5PT09dH0pKSk/WzIsUHJvbWlzZS5yZXNvbHZlKHtjb2RlOkVlLlNVQ0NFU1MsZGF0YTpudWxsPT11P3ZvaWQgMDp1LnZhbHVlfSldOlsyLFByb21pc2UucmVzb2x2ZSh7Y29kZTpFZS5DSEFUUk9PTV9LRVlfTk9UX0VYSVNUfSldfX0pKX0pKX0sdC5wcm90b3R5cGUuZ2V0QWxsQ2hhdHJvb21FbnRyeT1mdW5jdGlvbihlKXtyZXR1cm4gdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHQsbixpLHIscyxvLGE7cmV0dXJuIGIodGhpcywoZnVuY3Rpb24odSl7c3dpdGNoKHUubGFiZWwpe2Nhc2UgMDpyZXR1cm4odD10aGlzLl9jaHJtRW50cnlIYW5kbGVyLmdldEFsbChlKSkmJk9iamVjdC5rZXlzKHQpLmxlbmd0aD9bMixQcm9taXNlLnJlc29sdmUoe2NvZGU6RWUuU1VDQ0VTUyxkYXRhOnR9KV06WzMsMV07Y2FzZSAxOnJldHVybihuPXRoaXMuX2NoYW5uZWwpPyhpPXt9LHI9bi5jb2RlYy5lbmNvZGVQdWxsQ2hhdFJvb21LVigwKSxzPW5ldyBzcihocltoci5wdWxsS1ZdLHIsZSksWzQsbi5zZW5kKHMsVG4pXSk6WzIsUHJvbWlzZS5yZWplY3Qoe2NvZGU6RWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRH0pXTtjYXNlIDI6cmV0dXJuIG89dS5zZW50KCksKGE9by5kYXRhfHx7fSkmJmEua3ZFbnRyaWVzJiZhLmt2RW50cmllcy5sZW5ndGgmJmEua3ZFbnRyaWVzLmZvckVhY2goKGZ1bmN0aW9uKGUpe2Uua2V5JiYoaVtlLmtleV09ZS52YWx1ZXx8XCJcIil9KSksWzIsUHJvbWlzZS5yZXNvbHZlKHtjb2RlOkVlLlNVQ0NFU1MsZGF0YTppfSldfX0pKX0pKX0sdC5wcm90b3R5cGUucHVsbENoYXRyb29tRW50cnk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG4saSxyLHMsbyxhLHUsYyxoLGw7cmV0dXJuIGIodGhpcywoZnVuY3Rpb24oZCl7c3dpdGNoKGQubGFiZWwpe2Nhc2UgMDpyZXR1cm4gaT0obj10aGlzKS5fY2hhbm5lbCxyPW4uY3VycmVudFVzZXJJZCxpPyhzPWkuY29kZWMuZW5jb2RlUHVsbENoYXRSb29tS1YodCksbz1uZXcgc3IoaHJbaHIucHVsbEtWXSxzLGUpLFs0LGkuc2VuZChvLFRuKV0pOlsyLHtjb2RlOkVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSUR9XTtjYXNlIDE6cmV0dXJuIGE9ZC5zZW50KCksdT1hLmNvZGUsYz1hLmRhdGEsdT09PUVlLlNVQ0NFU1M/KHBlLmluZm8oXCJQdWxsIHN1Y2Nlc3MgQ2hybUtWLCBcIitKU09OLnN0cmluZ2lmeShhKSksdGhpcy5fY2hybUVudHJ5SGFuZGxlci5zZXRMb2NhbChlLGMscikscGUuaW5mbyhcIlNhdmUgaW50byBjYWNoZSBzdWNjZXNzIVwiKSxoPWMua3ZFbnRyaWVzLGw9W10saC5sZW5ndGg+MCYmKGguZm9yRWFjaCgoZnVuY3Rpb24odCl7dmFyIG49dC5rZXksaT10LnZhbHVlLHI9dC50eXBlLHM9dC50aW1lc3RhbXA7bC5wdXNoKHtrZXk6bix2YWx1ZTppLHR5cGU6cix0aW1lc3RhbXA6cyxjaGF0cm9vbUlkOmV9KX0pKSx0aGlzLl93YXRjaGVyLmNoYXRyb29tKHt1cGRhdGVkRW50cmllczpsfSkpLFsyLHtjb2RlOnUsZGF0YTpjfV0pOlsyLHtjb2RlOnV9XX19KSl9KSl9LHQucHJvdG90eXBlLnNlbmRNZXNzYWdlPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIGkscixzLG8sYSx1LGMsaCxsLGQ7cmV0dXJuIGIodGhpcywoZnVuY3Rpb24oZil7c3dpdGNoKGYubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5fY2hhbm5lbD8obj1mdW5jdGlvbihlLHQpe3JldHVyblwiUkM6U1JTTXNnXCI9PT1lLm1lc3NhZ2VUeXBlJiZPYmplY3QuYXNzaWduKGUse2RpcmVjdGlvbmFsVXNlcklkTGlzdDpbdF19KSxlfShuLHRoaXMuY3VycmVudFVzZXJJZCksbj10aGlzLl9oYW5kbGVNc2dQcm9wZXJ0aWVzKG4sITApLGk9ISFbai5QUklWQVRFLGouR1JPVVBdLmluY2x1ZGVzKGUpJiZuLmlzU3RhdHVzTWVzc2FnZSxyPWk/ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuKHQ9e30sdFtqLlBSSVZBVEVdPWhyLnBwTXNnUyx0W2ouR1JPVVBdPWhyLnBnTXNnUyx0KVtlXX0oZSk6ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuKHQ9e30sdFtqLlBSSVZBVEVdPWhyLnBwTXNnUCx0W2ouR1JPVVBdPWhyLnBnTXNnUCx0W2ouQ0hBVFJPT01dPWhyLmNoYXRNc2csdFtqLkNVU1RPTUVSX1NFUlZJQ0VdPWhyLnBjTXNnUCx0W2ouUlRDX1JPT01dPWhyLnByTXNnUyx0KVtlXX0oZSl8fGhyLnBwTXNnUCxpJiYobi5pc1BlcnNpdGVkPSExLG4uaXNDb3VudGVkPSExKSxzPXRoaXMuX2NoYW5uZWwuY29kZWMuZW5jb2RlVXBNc2coe2NvbnZlcnNhdGlvblR5cGU6ZSx0YXJnZXRJZDp0fSxuKSwobz1uZXcgbnIoaHJbcl0scyx0KSkuc2V0SGVhZGVyUW9zKFFlLkFUX0xFQVNUX09OQ0UpLGk/KHRoaXMuX2NoYW5uZWwuc2VuZE9ubHkobyksWzIse2NvZGU6RWUuU1VDQ0VTUyxkYXRhOmpyKGUsdCxPKHt9LG4pLFwiXCIsMCx0aGlzLmN1cnJlbnRVc2VySWQpfV0pOihhPURhdGUubm93KCktdGhpcy5fbG9jYWxDb25uZWN0ZWRUaW1lK3RoaXMuX2Nvbm5lY3RlZFRpbWUsdT1qcihlLHQsTyh7fSxuKSxcIlwiLGEsdGhpcy5jdXJyZW50VXNlcklkKSxbNCx0aGlzLl9jaGFubmVsLnNlbmQobyldKSk6WzIse2NvZGU6RWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRH1dO2Nhc2UgMTpyZXR1cm4gYz1mLnNlbnQoKSxoPWMuY29kZSxsPWMuZGF0YSxoIT09RWUuU1VDQ0VTUz9bMix7Y29kZTpoLGRhdGE6dX1dOihkPWwsdGhpcy5fc2VuZE1lc3NhZ2VTdG9yZS5zZXRNZXNzYWdlKGQubWVzc2FnZVVJZCxkLnRpbWVzdGFtcCksdS5zZW50VGltZT1kLnRpbWVzdGFtcCx1Lm1lc3NhZ2VVSWQ9ZC5tZXNzYWdlVUlkLHRoaXMuX2NvbnZlcnNhdGlvbk1hbmFnZXIuc2V0Q29udmVyc2F0aW9uQ2FjaGVCeU1lc3NhZ2UodSwhMCksWzIse2NvZGU6RWUuU1VDQ0VTUyxkYXRhOnV9XSl9fSkpfSkpfSx0LnByb3RvdHlwZS5yZWNhbGxNc2c9ZnVuY3Rpb24oZSx0LG4saSxyKXt2YXIgcztyZXR1cm4gdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG8sYSx1LGMsaCxsLGQsZixwLGc7cmV0dXJuIGIodGhpcywoZnVuY3Rpb24oXyl7c3dpdGNoKF8ubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5fY2hhbm5lbD8obz1yLnVzZXIsYT17Y29udGVudDp7Y29udmVyc2F0aW9uVHlwZTplLHRhcmdldElkOnQsbWVzc2FnZVVJZDpuLHNlbnRUaW1lOmksdXNlcjpvfSxtZXNzYWdlVHlwZTpcIlJDOlJjQ21kXCIsZGlzYWJsZU5vdGlmaWNhdGlvbjpudWxsPT1yP3ZvaWQgMDpyLmRpc2FibGVOb3RpZmljYXRpb24scHVzaENvbmZpZzpudWxsPT1yP3ZvaWQgMDpyLnB1c2hDb25maWcscHVzaENvbnRlbnQ6KG51bGw9PT0ocz1yLnB1c2hDb25maWcpfHx2b2lkIDA9PT1zP3ZvaWQgMDpzLnB1c2hDb250ZW50KXx8ci5wdXNoQ29udGVudHx8XCJcIixjaGFubmVsSWQ6ci5jaGFubmVsSWR9LHU9aHJbaHIucmVjYWxsTXNnXSxjPXRoaXMuX2NoYW5uZWwuY29kZWMuZW5jb2RlVXBNc2coe2NvbnZlcnNhdGlvblR5cGU6ZSx0YXJnZXRJZDp0fSxhKSwoaD1uZXcgbnIodSxjLHRoaXMuY3VycmVudFVzZXJJZCkpLnNldEhlYWRlclFvcyhRZS5BVF9MRUFTVF9PTkNFKSxbNCx0aGlzLl9jaGFubmVsLnNlbmQoaCldKTpbMix7Y29kZTpFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEfV07Y2FzZSAxOnJldHVybiBsPV8uc2VudCgpLGQ9bC5jb2RlLGY9bC5kYXRhLGQhPT1FZS5TVUNDRVNTP1syLHtjb2RlOmR9XToocD1mLHRoaXMuX3NlbmRNZXNzYWdlU3RvcmUuc2V0TWVzc2FnZShwLm1lc3NhZ2VVSWQscC50aW1lc3RhbXApLGc9anIoZSx0LE8oTyh7fSxhKSx7aXNQZXJzaXRlZDohMH0pLHAubWVzc2FnZVVJZCxwLnRpbWVzdGFtcCx0aGlzLmN1cnJlbnRVc2VySWQpLHRoaXMuX2NvbnZlcnNhdGlvbk1hbmFnZXIuc2V0Q29udmVyc2F0aW9uQ2FjaGVCeU1lc3NhZ2UoZywhMCksWzIse2NvZGU6RWUuU1VDQ0VTUyxkYXRhOmd9XSl9fSkpfSkpfSx0LnByb3RvdHlwZS5zZW5kUmVhZFJlY2VpcHRNZXNzYWdlPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIGkscjtyZXR1cm4gYih0aGlzLChmdW5jdGlvbihzKXtzd2l0Y2gocy5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9jaGFubmVsPyhpPXRoaXMuX2NoYW5uZWwuY29kZWMuZW5jb2RlUmVhZFJlY2VpcHQodCxuKSxyPW5ldyBzcihocltoci5yck1zZ10saSxlKSxbNCx0aGlzLl9jaGFubmVsLnNlbmQocildKTpbMix7Y29kZTpFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEfV07Y2FzZSAxOnJldHVyblsyLHMuc2VudCgpXX19KSl9KSl9LHQucHJvdG90eXBlLmdldE1lc3NhZ2VSZWFkZXI9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB3KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgaSxyO3JldHVybiBiKHRoaXMsKGZ1bmN0aW9uKHMpe3N3aXRjaChzLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuX2NoYW5uZWw/KGk9dGhpcy5fY2hhbm5lbC5jb2RlYy5lbmNvZGVNZXNzYWdlUmVhZGVyKHQsbikscj1uZXcgc3IoaHJbaHIucnJMaXN0XSxpLGUpLFs0LHRoaXMuX2NoYW5uZWwuc2VuZChyLEJuKV0pOlsyLHtjb2RlOkVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSUR9XTtjYXNlIDE6cmV0dXJuWzIscy5zZW50KCldfX0pKX0pKX0sdC5wcm90b3R5cGUucHVsbFVzZXJTZXR0aW5ncz1mdW5jdGlvbihlKXtyZXR1cm4gdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHQsbjtyZXR1cm4gYih0aGlzLChmdW5jdGlvbihpKXtyZXR1cm4gdGhpcy5fY2hhbm5lbD8odD10aGlzLl9jaGFubmVsLmNvZGVjLmVuY29kZVB1bGxVc2VyU2V0dGluZyhlKSxuPW5ldyBzcihocltoci5wdWxsVVNdLHQsdGhpcy5jdXJyZW50VXNlcklkKSxbMix0aGlzLl9jaGFubmVsLnNlbmQobixibildKTpbMix7Y29kZTpFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEfV19KSl9KSl9LHQucHJvdG90eXBlLmdldEZpbGVUb2tlbj1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHIscyxvLGEsdSxjO3JldHVybiBiKHRoaXMsKGZ1bmN0aW9uKGgpe3N3aXRjaChoLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuX2NoYW5uZWw/KHI9aSYmXCJ1cGxvYWRzXCIhPT1pP3R8fFwiXCI6aXQoZSx0KSxzPXRoaXMuX2NoYW5uZWwuY29kZWMuZW5jb2RlR2V0RmlsZVRva2VuKGUscixufHxcIlwiLGl8fFwiXCIpLG89bmV3IHNyKGhyW2hyLnFuVGtuXSxzLHRoaXMuY3VycmVudFVzZXJJZCksWzQsdGhpcy5fY2hhbm5lbC5zZW5kKG8scG4pXSk6WzIse2NvZGU6RWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRH1dO2Nhc2UgMTpyZXR1cm4gYT1oLnNlbnQoKSx1PWEuY29kZSxjPWEuZGF0YSxjPU9iamVjdC5hc3NpZ24oYyx7ZmlsZU5hbWU6cn0pLHU9PT1FZS5TVUNDRVNTP1syLHtjb2RlOnUsZGF0YTpjfV06WzIse2NvZGU6dX1dfX0pKX0pKX0sdC5wcm90b3R5cGUuZ2V0RmlsZVVybD1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHIscyxvLGEsdSxjLGgsbCxkO3JldHVybiBiKHRoaXMsKGZ1bmN0aW9uKGYpe3N3aXRjaChmLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuX2NoYW5uZWw/KHI9XCJcIixzPVwiXCIsbz1cIlwiLHQ9PT1NZS5RSU5JVT8ocz1nbixvPXluKToocz1fbixvPXZuKSxyPXQ9PT1NZS5RSU5JVT9ocltoci5xblVybF06dD09PU1lLkFXUz9ocltoci5zM1VybF06dD09PU1lLlNUQz9ocltoci5zdGNVcmxdOmhyW2hyLmFsaVVybF0sYT10aGlzLl9jaGFubmVsLmNvZGVjLmVuY29kZUdldEZpbGVVcmwocyxlLG4saSksdT1uZXcgc3IocixhLHRoaXMuY3VycmVudFVzZXJJZCksWzQsdGhpcy5fY2hhbm5lbC5zZW5kKHUsbyldKTpbMix7Y29kZTpFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEfV07Y2FzZSAxOnJldHVybiBjPWYuc2VudCgpLGg9Yy5jb2RlLGw9Yy5kYXRhLGQ9bCxoPT09RWUuU1VDQ0VTUz9bMix7Y29kZTpoLGRhdGE6ZH1dOlsyLHtjb2RlOmh9XX19KSl9KSl9LHQucHJvdG90eXBlLmRpc2Nvbm5lY3Q9ZnVuY3Rpb24oKXstMSE9PXRoaXMuX3JlY29ubmVjdFRpbWVyJiYoY2xlYXJUaW1lb3V0KHRoaXMuX3JlY29ubmVjdFRpbWVyKSx0aGlzLl9yZWNvbm5lY3RUaW1lcj0tMSksdGhpcy5fY2hhbm5lbCYmKHRoaXMuX2NoYW5uZWwuY2xvc2UoKSx0aGlzLl9jaGFubmVsPXZvaWQgMCksdGhpcy5fcHVsbFF1ZXVlLmxlbmd0aD0wLHRoaXMuX3N0b3BTeW5jSW50ZXJ2YWwoKX0sdC5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcihcIkpTRW5naW5lJ3MgbWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIil9LHQucHJvdG90eXBlLnJlZ2lzdGVyTWVzc2FnZVR5cGU9ZnVuY3Rpb24oZSx0LG4saSxyKXt0aGlzLl9jdXN0b21NZXNzYWdlVHlwZVtlXT17aXNQZXJzaXRlZDp0LGlzQ291bnRlZDpuLGlzU3RhdHVzTWVzc2FnZTpyfX0sdC5wcm90b3R5cGUuZ2V0U2VydmVyVGltZT1mdW5jdGlvbigpe3JldHVybiBEYXRlLm5vdygpLXRoaXMuX2xvY2FsQ29ubmVjdGVkVGltZSt0aGlzLl9jb25uZWN0ZWRUaW1lfSx0LnByb3RvdHlwZS5nZXRDdXJyZW50VXNlcklkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY3VycmVudFVzZXJJZH0sdC5wcm90b3R5cGUuY3JlYXRlVGFnPWZ1bmN0aW9uKGUpe3JldHVybiB3KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgdCxuLGkscixzLG8sYTtyZXR1cm4gYih0aGlzLChmdW5jdGlvbih1KXtzd2l0Y2godS5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9jaGFubmVsPyh0PXRoaXMuX3VzZXJTZXR0aW5nTWFuYWdlci5nZXRWZXJzaW9uKCksbj10aGlzLl9jaGFubmVsLmNvZGVjLmVuY29kZUNyZWF0ZVRhZyhbZV0sdCksaT1uZXcgc3IoaHJbaHIuYWRkU2VUYWddLG4sdGhpcy5jdXJyZW50VXNlcklkKSxbNCx0aGlzLl9jaGFubmVsLnNlbmQoaSxPbildKTpbMix7Y29kZTpFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEfV07Y2FzZSAxOnJldHVybiByPXUuc2VudCgpLHM9ci5jb2RlLG89ci5kYXRhLHMhPT1FZS5TVUNDRVNTP1syLHtjb2RlOnN9XTooYT1vLnZlcnNpb24sdGhpcy5fdXNlclNldHRpbmdNYW5hZ2VyLmFkZFRhZyhbTyhPKHt9LGUpLHtjcmVhdGVkVGltZTphfSldLGEpLFsyLHtjb2RlOkVlLlNVQ0NFU1MsZGF0YTpvfV0pfX0pKX0pKX0sdC5wcm90b3R5cGUucmVtb3ZlVGFnPWZ1bmN0aW9uKGUpe3JldHVybiB3KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgdCxuLGkscixzLG8sYTtyZXR1cm4gYih0aGlzLChmdW5jdGlvbih1KXtzd2l0Y2godS5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9jaGFubmVsPyh0PXRoaXMuX3VzZXJTZXR0aW5nTWFuYWdlci5nZXRWZXJzaW9uKCksbj10aGlzLl9jaGFubmVsLmNvZGVjLmVuY29kZVJlbW92ZVRhZyhbZV0sdCksaT1uZXcgc3IoaHJbaHIuZGVsU2VUYWddLG4sdGhpcy5jdXJyZW50VXNlcklkKSxbNCx0aGlzLl9jaGFubmVsLnNlbmQoaSxPbildKTpbMix7Y29kZTpFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEfV07Y2FzZSAxOnJldHVybiByPXUuc2VudCgpLHM9ci5jb2RlLG89ci5kYXRhLHMhPT1FZS5TVUNDRVNTP1syLHtjb2RlOnN9XTooYT1vLnZlcnNpb24sdGhpcy5fdXNlclNldHRpbmdNYW5hZ2VyLmRlbGV0ZVRhZyhbZV0sYSksWzIse2NvZGU6RWUuU1VDQ0VTU31dKX19KSl9KSl9LHQucHJvdG90eXBlLnVwZGF0ZVRhZz1mdW5jdGlvbihlKXtyZXR1cm4gdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHQsbixpLHIscyxvLGE7cmV0dXJuIGIodGhpcywoZnVuY3Rpb24odSl7c3dpdGNoKHUubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5fY2hhbm5lbD8odD10aGlzLl91c2VyU2V0dGluZ01hbmFnZXIuZ2V0VmVyc2lvbigpLG49dGhpcy5fY2hhbm5lbC5jb2RlYy5lbmNvZGVDcmVhdGVUYWcoW2VdLHQpLGk9bmV3IHNyKGhyW2hyLmFkZFNlVGFnXSxuLHRoaXMuY3VycmVudFVzZXJJZCksWzQsdGhpcy5fY2hhbm5lbC5zZW5kKGksT24pXSk6WzIse2NvZGU6RWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRH1dO2Nhc2UgMTpyZXR1cm4gcj11LnNlbnQoKSxzPXIuY29kZSxvPXIuZGF0YSxzIT09RWUuU1VDQ0VTUz9bMix7Y29kZTpzfV06KGE9by52ZXJzaW9uLHRoaXMuX3VzZXJTZXR0aW5nTWFuYWdlci5hZGRUYWcoW2VdLGEpLFsyLHtjb2RlOkVlLlNVQ0NFU1MsZGF0YTpvfV0pfX0pKX0pKX0sdC5wcm90b3R5cGUuZ2V0VGFnTGlzdD1mdW5jdGlvbigpe3JldHVybiB3KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgZSx0O3JldHVybiBiKHRoaXMsKGZ1bmN0aW9uKG4pe3JldHVybiBlPXRoaXMuX3VzZXJTZXR0aW5nTWFuYWdlci5nZXRUYWdzKCksdD10aGlzLl9jb252ZXJzYXRpb25NYW5hZ2VyLmdldENvbnZlcnNhdGlvbkxpc3RGb3JUYWcoKSxlLmZvckVhY2goKGZ1bmN0aW9uKGUpe2UuY29udmVyc2F0aW9uQ291bnQ9dFtlLnRhZ0lkXT90W2UudGFnSWRdLmxlbmd0aDowfSkpLFsyLHtjb2RlOkVlLlNVQ0NFU1MsZGF0YTplfV19KSl9KSl9LHQucHJvdG90eXBlLmFkZFRhZ0ZvckNvbnZlcnNhdGlvbnM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG4saSxyLHMsbz10aGlzO3JldHVybiBiKHRoaXMsKGZ1bmN0aW9uKGEpe3N3aXRjaChhLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuX2NoYW5uZWw/dGhpcy5fdXNlclNldHRpbmdNYW5hZ2VyLmdldFRhZ0J5SWQoZSk/KG49dGhpcy5fY2hhbm5lbC5jb2RlYy5lbmNvZGVVcGRhdGVDb252ZXJzYXRpb25UYWcoW3t0YWdJZDplfV0sdCksaT1uZXcgc3IoaHJbaHIuYWRkVGFnXSxuLHRoaXMuY3VycmVudFVzZXJJZCksWzQsdGhpcy5fY2hhbm5lbC5zZW5kKGkpXSk6WzIse2NvZGU6RWUuVEFHX05PVF9FWElTVH1dOlsyLHtjb2RlOkVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSUR9XTtjYXNlIDE6cmV0dXJuKHI9YS5zZW50KCkuY29kZSkhPT1FZS5TVUNDRVNTP1syLHtjb2RlOnJ9XTooKHM9e30pW2VdPXt9LHQuZm9yRWFjaCgoZnVuY3Rpb24oZSl7by5fY29udmVyc2F0aW9uTWFuYWdlci5hZGRUYWdTdGF0dXMoZS5jb252ZXJzYXRpb25UeXBlLGUudGFyZ2V0SWQscyxlLmNoYW5uZWxJZCl9KSksWzIse2NvZGU6RWUuU1VDQ0VTU31dKX19KSl9KSl9LHQucHJvdG90eXBlLnJlbW92ZVRhZ0ZvckNvbnZlcnNhdGlvbnM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG4saSxyLHM9dGhpcztyZXR1cm4gYih0aGlzLChmdW5jdGlvbihvKXtzd2l0Y2goby5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9jaGFubmVsPyhuPXRoaXMuX2NoYW5uZWwuY29kZWMuZW5jb2RlVXBkYXRlQ29udmVyc2F0aW9uVGFnKFt7dGFnSWQ6ZX1dLHQpLGk9bmV3IHNyKGhyW2hyLmRlbFRhZ10sbix0aGlzLmN1cnJlbnRVc2VySWQpLFs0LHRoaXMuX2NoYW5uZWwuc2VuZChpKV0pOlsyLHtjb2RlOkVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSUR9XTtjYXNlIDE6cmV0dXJuKHI9by5zZW50KCkuY29kZSkhPT1FZS5TVUNDRVNTP1syLHtjb2RlOnJ9XToodC5mb3JFYWNoKChmdW5jdGlvbih0KXtzLl9jb252ZXJzYXRpb25NYW5hZ2VyLmRlbGV0ZVRhZ1N0YXR1cyh0LmNvbnZlcnNhdGlvblR5cGUsdC50YXJnZXRJZCxbZV0sdC5jaGFubmVsSWQpfSkpLFsyLHtjb2RlOkVlLlNVQ0NFU1N9XSl9fSkpfSkpfSx0LnByb3RvdHlwZS5yZW1vdmVUYWdzRm9yQ29udmVyc2F0aW9uPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHcodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBuLGkscixzLG8sYSx1O3JldHVybiBiKHRoaXMsKGZ1bmN0aW9uKGMpe3N3aXRjaChjLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuX2NoYW5uZWw/KG49ZS5jb252ZXJzYXRpb25UeXBlLGk9ZS50YXJnZXRJZCxyPWUuY2hhbm5lbElkLHM9dC5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybnt0YWdJZDplfX0pKSxvPXRoaXMuX2NoYW5uZWwuY29kZWMuZW5jb2RlVXBkYXRlQ29udmVyc2F0aW9uVGFnKHMsW2VdKSxhPW5ldyBzcihocltoci5kZWxUYWddLG8sdGhpcy5jdXJyZW50VXNlcklkKSxbNCx0aGlzLl9jaGFubmVsLnNlbmQoYSldKTpbMix7Y29kZTpFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEfV07Y2FzZSAxOnJldHVybih1PWMuc2VudCgpLmNvZGUpIT09RWUuU1VDQ0VTUz9bMix7Y29kZTp1fV06KHRoaXMuX2NvbnZlcnNhdGlvbk1hbmFnZXIuZGVsZXRlVGFnU3RhdHVzKG4saSx0LHIpLFsyLHtjb2RlOkVlLlNVQ0NFU1N9XSl9fSkpfSkpfSx0LnByb3RvdHlwZS5nZXRDb252ZXJzYXRpb25MaXN0QnlUYWc9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB3KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgaSxyLHMsbyxhLHUsYyxoLGw7cmV0dXJuIGIodGhpcywoZnVuY3Rpb24oZCl7c3dpdGNoKGQubGFiZWwpe2Nhc2UgMDpyZXR1cm4gcj0oaT10aGlzKS5jdXJyZW50VXNlcklkLChzPWkuX2NoYW5uZWwpPyhvPXMuY29kZWMuZW5jb2RlT2xkQ29udmVyc2F0aW9uTGlzdCh7Y291bnQ6bix0eXBlOmouUFJJVkFURSxzdGFydFRpbWU6dH0pLGE9bmV3IHNyKE9pLG8sciksWzQscy5zZW5kKGEseHQse2N1cnJlbnRVc2VySWQ6cixjb25uZWN0ZWRUaW1lOnMuY29ubmVjdGVkVGltZX0pXSk6WzIse2NvZGU6RWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRH1dO2Nhc2UgMTpyZXR1cm4gdT1kLnNlbnQoKSxjPXUuY29kZSxoPXUuZGF0YSxsPXRoaXMuX2NvbnZlcnNhdGlvbkhhc1RhZ0ZpbHRlcihlLGgpLHBlLmluZm8oXCJHZXRDb252ZXJzYXRpb25MaXN0QnlUYWdcIixsKSxjIT09RWUuU1VDQ0VTUz9bMix7Y29kZTpjfV06WzIse2NvZGU6YyxkYXRhOmx9XX19KSl9KSl9LHQucHJvdG90eXBlLl9jb252ZXJzYXRpb25IYXNUYWdGaWx0ZXI9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLGk9W10scj1bXTtmdW5jdGlvbiBzKGUsdCl7cmV0dXJuIGUubGF0ZXN0TWVzc2FnZSYmdC5sYXRlc3RNZXNzYWdlP2UubGF0ZXN0TWVzc2FnZS5zZW50VGltZS10LmxhdGVzdE1lc3NhZ2Uuc2VudFRpbWU6MH1yZXR1cm4gdC5mb3JFYWNoKChmdW5jdGlvbih0KXt2YXIgcz10LmNvbnZlcnNhdGlvblR5cGUsbz10LnRhcmdldElkLGE9dC5jaGFubmVsSWQsdT1uLl9jb252ZXJzYXRpb25NYW5hZ2VyLmdldChzLG8sYSksYz11Lmhhc01lbnRpb25lZCxoPXUubWVudGlvbmVkSW5mbyxsPXUubGFzdFVucmVhZFRpbWUsZD11Lm5vdGlmaWNhdGlvblN0YXR1cyxmPXUuaXNUb3AscD11LnRhZ3MsZz11LnVucmVhZE1lc3NhZ2VDb3VudCxfPXAmJnBbZV07aWYoXyl7dmFyIHk9TyhPKHt9LHQpLHtoYXNNZW50aW9uZWQ6YyxtZW50aW9uZWRJbmZvOmgsbGFzdFVucmVhZFRpbWU6bCxub3RpZmljYXRpb25TdGF0dXM6ZCxpc1RvcDpmLHVucmVhZE1lc3NhZ2VDb3VudDpnfSk7Xy5pc1RvcD9pLnB1c2goTyhPKHt9LHkpLHtpc1RvcEluVGFnOiEwfSkpOnIucHVzaChPKE8oe30seSkse2lzVG9wSW5UYWc6ITF9KSl9fSkpLE0oTShbXSxpLnNvcnQocykpLHIuc29ydChzKSl9LHQucHJvdG90eXBlLmdldFVucmVhZENvdW50QnlUYWc9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG47cmV0dXJuIGIodGhpcywoZnVuY3Rpb24oaSl7cmV0dXJuIHRoaXMuX2NoYW5uZWw/KG49dGhpcy5fY29udmVyc2F0aW9uTWFuYWdlci5nZXRVbnJlYWRDb3VudEJ5VGFnKGUsdCksWzIse2NvZGU6RWUuU1VDQ0VTUyxkYXRhOm59XSk6WzIse2NvZGU6RWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRH1dfSkpfSkpfSx0LnByb3RvdHlwZS5zZXRDb252ZXJzYXRpb25TdGF0dXNJblRhZz1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHcodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBpLHIscyxvLGEsdSxjLGgsbCxkO3JldHVybiBiKHRoaXMsKGZ1bmN0aW9uKGYpe3N3aXRjaChmLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuX2NoYW5uZWw/KGk9dC50YXJnZXRJZCxyPXQuY29udmVyc2F0aW9uVHlwZSxzPXQuY2hhbm5lbElkLG89bi5pc1RvcCxhPVt7dGFnSWQ6ZSxpc1RvcDpvfV0sKHU9dGhpcy5fY29udmVyc2F0aW9uTWFuYWdlci5nZXQocixpLHMpKS50YWdzJiZPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbCh1LnRhZ3MsZSk/KGM9dGhpcy5fY2hhbm5lbC5jb2RlYy5lbmNvZGVVcGRhdGVDb252ZXJzYXRpb25UYWcoYSxbdF0pLGg9bmV3IHNyKGhyW2hyLmFkZFRhZ10sYyx0aGlzLmN1cnJlbnRVc2VySWQpLFs0LHRoaXMuX2NoYW5uZWwuc2VuZChoKV0pOlsyLHtjb2RlOkVlLk5PX1RBR19JTl9DT05WRVJ9XSk6WzIse2NvZGU6RWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRH1dO2Nhc2UgMTpyZXR1cm4obD1mLnNlbnQoKS5jb2RlKSE9PUVlLlNVQ0NFU1M/WzIse2NvZGU6bH1dOigoZD17fSlbZV09e30sbyYmKGRbZV0uaXNUb3A9ITApLHRoaXMuX2NvbnZlcnNhdGlvbk1hbmFnZXIuYWRkVGFnU3RhdHVzKHIsaSxkLHMpLFsyLHtjb2RlOkVlLlNVQ0NFU1N9XSl9fSkpfSkpfSx0LnByb3RvdHlwZS5nZXRUYWdzRm9yQ29udmVyc2F0aW9uPWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiB3KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbixpLHIscztyZXR1cm4gYih0aGlzLChmdW5jdGlvbihvKXtpZighdGhpcy5fY2hhbm5lbClyZXR1cm5bMix7Y29kZTpFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEfV07aWYobj10aGlzLl9jb252ZXJzYXRpb25NYW5hZ2VyLmdldChlLmNvbnZlcnNhdGlvblR5cGUsZS50YXJnZXRJZCxlLmNoYW5uZWxJZCksaT10aGlzLl91c2VyU2V0dGluZ01hbmFnZXIuZ2V0VGFnc0luZm8oKSxyPVtdLG4udGFncylmb3IocyBpbiBuLnRhZ3Mpci5wdXNoKHt0YWdJZDpzLHRhZ05hbWU6bnVsbD09PSh0PWlbc10pfHx2b2lkIDA9PT10P3ZvaWQgMDp0LnRhZ05hbWV9KTtyZXR1cm5bMix7Y29kZTpFZS5TVUNDRVNTLGRhdGE6cn1dfSkpfSkpfSx0LnByb3RvdHlwZS5nZXRCbG9ja0NvbnZlcnNhdGlvbkxpc3Q9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9jb252ZXJzYXRpb25NYW5hZ2VyLmdldEJsb2NrQ29udmVyc2F0aW9uTGlzdCgpO3JldHVybiBQcm9taXNlLnJlc29sdmUoe2NvZGU6RWUuU1VDQ0VTUyxkYXRhOmV9KX0sdC5wcm90b3R5cGUuZ2V0VG9wQ29udmVyc2F0aW9uTGlzdD1mdW5jdGlvbigpe3ZhciBlPXRoaXMuX2NvbnZlcnNhdGlvbk1hbmFnZXIuZ2V0VG9wQ29udmVyc2F0aW9uTGlzdCgpO3JldHVybiBQcm9taXNlLnJlc29sdmUoe2NvZGU6RWUuU1VDQ0VTUyxkYXRhOmV9KX0sdC5wcm90b3R5cGUuZ2V0VW5yZWFkTWVudGlvbmVkQ291bnQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fY29udmVyc2F0aW9uTWFuYWdlci5nZXRVbnJlYWRNZW50aW9uZWRDb3VudChlLmNoYW5uZWxJZCxlLmNvbnZlcnNhdGlvblR5cGUsZS50YXJnZXRJZCk7cmV0dXJuIFByb21pc2UucmVzb2x2ZSh7Y29kZTpFZS5TVUNDRVNTLGRhdGE6dH0pfSx0LnByb3RvdHlwZS5nZXRBbGxVbnJlYWRNZW50aW9uZWRDb3VudD1mdW5jdGlvbigpe3ZhciBlPXRoaXMuX2NvbnZlcnNhdGlvbk1hbmFnZXIuZ2V0QWxsVW5yZWFkTWVudGlvbmVkQ291bnQoKTtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtjb2RlOkVlLlNVQ0NFU1MsZGF0YTplfSl9LHQucHJvdG90eXBlLmdldEFsbENvbnZlcnNhdGlvblN0YXRlPWZ1bmN0aW9uKCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZSh7Y29kZTpFZS5TVUNDRVNTLGRhdGE6dGhpcy5fY29udmVyc2F0aW9uTWFuYWdlci5nZXRBbGxDb252ZXJzYXRpb25TdGF0ZSgpfSl9LHQucHJvdG90eXBlLmpvaW5SVENSb29tPWZ1bmN0aW9uKGUsdCxuLGkscixzKXtyZXR1cm4gdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG8sYTtyZXR1cm4gYih0aGlzLChmdW5jdGlvbih1KXtyZXR1cm4gdGhpcy5fY2hhbm5lbD8obz10aGlzLl9jaGFubmVsLmNvZGVjLmVuY29kZUpvaW5SVENSb29tKHQsbixpLHIscyksYT1uZXcgc3IoaHJbaHIucnRjUkpvaW5fZGF0YV0sbyxlKSxbMix0aGlzLl9jaGFubmVsLnNlbmQoYSxadCldKTpbMix7Y29kZTpFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEfV19KSl9KSl9LHQucHJvdG90eXBlLnF1aXRSVENSb29tPWZ1bmN0aW9uKGUpe3JldHVybiB3KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgdCxuO3JldHVybiBiKHRoaXMsKGZ1bmN0aW9uKGkpe3N3aXRjaChpLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuX2NoYW5uZWw/KHQ9dGhpcy5fY2hhbm5lbC5jb2RlYy5lbmNvZGVRdWl0UlRDUm9vbSgpLG49bmV3IHNyKGhyW2hyLnJ0Y1JFeGl0XSx0LGUpLFs0LHRoaXMuX2NoYW5uZWwuc2VuZChuKV0pOlsyLEVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSURdO2Nhc2UgMTpyZXR1cm5bMixpLnNlbnQoKS5jb2RlXX19KSl9KSl9LHQucHJvdG90eXBlLnJ0Y1Bpbmc9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB3KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgaSxyO3JldHVybiBiKHRoaXMsKGZ1bmN0aW9uKHMpe3N3aXRjaChzLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuX2NoYW5uZWw/KGk9dGhpcy5fY2hhbm5lbC5jb2RlYy5lbmNvZGVKb2luUlRDUm9vbSh0LG4pLHI9bmV3IHNyKGhyW2hyLnJ0Y1BpbmddLGksZSksWzQsdGhpcy5fY2hhbm5lbC5zZW5kKHIpXSk6WzIsRWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRF07Y2FzZSAxOnJldHVyblsyLHMuc2VudCgpLmNvZGVdfX0pKX0pKX0sdC5wcm90b3R5cGUuZ2V0UlRDUm9vbUluZm89ZnVuY3Rpb24oZSl7cmV0dXJuIHcodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciB0LG47cmV0dXJuIGIodGhpcywoZnVuY3Rpb24oaSl7cmV0dXJuIHRoaXMuX2NoYW5uZWw/KHQ9dGhpcy5fY2hhbm5lbC5jb2RlYy5lbmNvZGVHZXRSVENSb29tSW5mbygpLG49bmV3IHNyKGhyW2hyLnJ0Y1JJbmZvXSx0LGUpLFsyLHRoaXMuX2NoYW5uZWwuc2VuZChuLGhuKV0pOlsyLHtjb2RlOkVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSUR9XX0pKX0pKX0sdC5wcm90b3R5cGUuZ2V0UlRDVXNlckluZm9MaXN0PWZ1bmN0aW9uKGUpe3JldHVybiB3KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgdCxuLGkscixzO3JldHVybiBiKHRoaXMsKGZ1bmN0aW9uKG8pe3N3aXRjaChvLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuX2NoYW5uZWw/KHQ9dGhpcy5fY2hhbm5lbC5jb2RlYy5lbmNvZGVHZXRSVENSb29tSW5mbygpLG49bmV3IHNyKGhyW2hyLnJ0Y1VEYXRhXSx0LGUpLFs0LHRoaXMuX2NoYW5uZWwuc2VuZChuLFp0KV0pOlsyLHtjb2RlOkVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSUR9XTtjYXNlIDE6cmV0dXJuIGk9by5zZW50KCkscj1pLmNvZGUscz1pLmRhdGEsWzIse2NvZGU6cixkYXRhOnM/e3VzZXJzOnMudXNlcnN9OnN9XX19KSl9KSl9LHQucHJvdG90eXBlLnNldFJUQ1VzZXJJbmZvPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIGkscjtyZXR1cm4gYih0aGlzLChmdW5jdGlvbihzKXtzd2l0Y2gocy5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9jaGFubmVsPyhpPXRoaXMuX2NoYW5uZWwuY29kZWMuZW5jb2RlU2V0UlRDVXNlckluZm8odCxuKSxyPW5ldyBzcihocltoci5ydGNVUHV0XSxpLGUpLFs0LHRoaXMuX2NoYW5uZWwuc2VuZChyKV0pOlsyLEVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSURdO2Nhc2UgMTpyZXR1cm5bMixzLnNlbnQoKS5jb2RlXX19KSl9KSl9LHQucHJvdG90eXBlLnJlbW92ZVJUQ1VzZXJJbmZvPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHcodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBuLGk7cmV0dXJuIGIodGhpcywoZnVuY3Rpb24ocil7c3dpdGNoKHIubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5fY2hhbm5lbD8obj10aGlzLl9jaGFubmVsLmNvZGVjLmVuY29kZVJlbW92ZVJUQ1VzZXJJbmZvKHQpLGk9bmV3IG5yKGhyW2hyLnJ0Y1VEZWxdLG4sZSksWzQsdGhpcy5fY2hhbm5lbC5zZW5kKGkpXSk6WzIsRWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRF07Y2FzZSAxOnJldHVyblsyLHIuc2VudCgpLmNvZGVdfX0pKX0pKX0sdC5wcm90b3R5cGUuc2V0UlRDRGF0YT1mdW5jdGlvbihlLHQsbixpLHIscyl7cmV0dXJuIHcodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBvLGE7cmV0dXJuIGIodGhpcywoZnVuY3Rpb24odSl7c3dpdGNoKHUubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5fY2hhbm5lbD8obz10aGlzLl9jaGFubmVsLmNvZGVjLmVuY29kZVNldFJUQ0RhdGEodCxuLGkscixzKSxhPW5ldyBucihocltoci5ydGNTZXREYXRhXSxvLGUpLFs0LHRoaXMuX2NoYW5uZWwuc2VuZChhKV0pOlsyLEVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSURdO2Nhc2UgMTpyZXR1cm5bMix1LnNlbnQoKS5jb2RlXX19KSl9KSl9LHQucHJvdG90eXBlLnNldFJUQ1RvdGFsUmVzPWZ1bmN0aW9uKGUsdCxuLGkscil7cmV0dXJuIHcodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBzLG87cmV0dXJuIGIodGhpcywoZnVuY3Rpb24oYSl7c3dpdGNoKGEubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5fY2hhbm5lbD8ocz10aGlzLl9jaGFubmVsLmNvZGVjLmVuY29kZVVzZXJTZXRSVENEYXRhKHQsbixpLHIpLG89bmV3IHNyKGhyW2hyLnVzZXJTZXREYXRhXSxzLGUpLFs0LHRoaXMuX2NoYW5uZWwuc2VuZChvKV0pOlsyLEVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSURdO2Nhc2UgMTpyZXR1cm5bMixhLnNlbnQoKS5jb2RlXX19KSl9KSl9LHQucHJvdG90eXBlLnNldFJUQ0NETlVyaXM9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB3KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgaSxyO3JldHVybiBiKHRoaXMsKGZ1bmN0aW9uKHMpe3N3aXRjaChzLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuX2NoYW5uZWw/KGk9dGhpcy5fY2hhbm5lbC5jb2RlYy5lbmNvZGVVc2VyU2V0UlRDQ0ROVXJpcyh0LG4pLHI9bmV3IHNyKGhyW2hyLnVzZXJTZXREYXRhXSxpLGUpLFs0LHRoaXMuX2NoYW5uZWwuc2VuZChyKV0pOlsyLEVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSURdO2Nhc2UgMTpyZXR1cm5bMixzLnNlbnQoKS5jb2RlXX19KSl9KSl9LHQucHJvdG90eXBlLmdldFJUQ0RhdGE9ZnVuY3Rpb24oZSx0LG4saSl7aWYoIXRoaXMuX2NoYW5uZWwpcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7Y29kZTpFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEfSk7dmFyIHI9dGhpcy5fY2hhbm5lbC5jb2RlYy5lbmNvZGVHZXRSVENEYXRhKHQsbixpKSxzPW5ldyBzcihocltoci5ydGNRcnlEYXRhXSxyLGUpO3JldHVybiB0aGlzLl9jaGFubmVsLnNlbmQocyxvbil9LHQucHJvdG90eXBlLnJlbW92ZVJUQ0RhdGE9ZnVuY3Rpb24oZSx0LG4saSxyKXtyZXR1cm4gdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHMsbztyZXR1cm4gYih0aGlzLChmdW5jdGlvbihhKXtzd2l0Y2goYS5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9jaGFubmVsPyhzPXRoaXMuX2NoYW5uZWwuY29kZWMuZW5jb2RlUmVtb3ZlUlRDRGF0YSh0LG4saSxyKSxvPW5ldyBucihocltoci5ydGNEZWxEYXRhXSxzLGUpLFs0LHRoaXMuX2NoYW5uZWwuc2VuZChvKV0pOlsyLEVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSURdO2Nhc2UgMTpyZXR1cm5bMixhLnNlbnQoKS5jb2RlXX19KSl9KSl9LHQucHJvdG90eXBlLnNldFJUQ091dERhdGE9ZnVuY3Rpb24oZSx0LG4saSl7dGhyb3cgbmV3IEVycm9yKFwiSlNFbmdpbmUncyBtZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKX0sdC5wcm90b3R5cGUuZ2V0UlRDT3V0RGF0YT1mdW5jdGlvbihlLHQpe3Rocm93IG5ldyBFcnJvcihcIkpTRW5naW5lJ3MgbWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIil9LHQucHJvdG90eXBlLmdldFJUQ1Rva2VuPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIGkscjtyZXR1cm4gYih0aGlzLChmdW5jdGlvbihzKXtyZXR1cm4gdGhpcy5fY2hhbm5lbD8oaT10aGlzLl9jaGFubmVsLmNvZGVjLmVuY29kZUpvaW5SVENSb29tKHQsbikscj1uZXcgc3IoaHJbaHIucnRjVG9rZW5dLGksZSksWzIsdGhpcy5fY2hhbm5lbC5zZW5kKHIsc24pXSk6WzIse2NvZGU6RWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRH1dfSkpfSkpfSx0LnByb3RvdHlwZS5zZXRSVENTdGF0ZT1mdW5jdGlvbihlLHQpe3JldHVybiB3KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbixpO3JldHVybiBiKHRoaXMsKGZ1bmN0aW9uKHIpe3N3aXRjaChyLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuX2NoYW5uZWw/KG49dGhpcy5fY2hhbm5lbC5jb2RlYy5lbmNvZGVTZXRSVENTdGF0ZSh0KSxpPW5ldyBzcihocltoci5ydGNVc2VyU3RhdGVdLG4sZSksWzQsdGhpcy5fY2hhbm5lbC5zZW5kKGkpXSk6WzIsRWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRF07Y2FzZSAxOnJldHVyblsyLHIuc2VudCgpLmNvZGVdfX0pKX0pKX0sdC5wcm90b3R5cGUuZ2V0UlRDVXNlckluZm89ZnVuY3Rpb24oZSl7cmV0dXJuIHcodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiBiKHRoaXMsKGZ1bmN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpfSkpfSkpfSx0LnByb3RvdHlwZS5nZXRSVENVc2VyTGlzdD1mdW5jdGlvbihlKXtpZighdGhpcy5fY2hhbm5lbClyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtjb2RlOkVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSUR9KTt2YXIgdD10aGlzLl9jaGFubmVsLmNvZGVjLmVuY29kZUdldFJUQ1Jvb21JbmZvKCksbj1uZXcgc3IoaHJbaHIucnRjVUxpc3RdLHQsZSk7cmV0dXJuIHRoaXMuX2NoYW5uZWwuc2VuZChuLFp0KX0sdC5wcm90b3R5cGUuam9pbkxpdmluZ1Jvb21Bc0F1ZGllbmNlPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9RGUuTElWRSksdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIGkscixzLG8sYSx1LGMsaDtyZXR1cm4gYih0aGlzLChmdW5jdGlvbihsKXtzd2l0Y2gobC5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9jaGFubmVsPyhpPXRoaXMuX2NoYW5uZWwuY29kZWMuZW5jb2RlSm9pblJUQ1Jvb20odCxuKSxyPW5ldyBzcihocltoci52aWV3ZXJKb2luUl0saSxlKSxbNCx0aGlzLl9jaGFubmVsLnNlbmQocixYbildKTpbMix7Y29kZTpFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEfV07Y2FzZSAxOnJldHVybiBzPWwuc2VudCgpLG89cy5jb2RlLGE9cy5kYXRhLG8hPT1FZS5TVUNDRVNTP1syLHtjb2RlOm99XTooYz0odT1hKS5ydGNUb2tlbixoPXUuZW50cmllcyxbMix7Y29kZTpvLGRhdGE6e3Rva2VuOmMsa3ZFbnRyaWVzOmh9fV0pfX0pKX0pKX0sdC5wcm90b3R5cGUucXVpdExpdmluZ1Jvb21Bc0F1ZGllbmNlPWZ1bmN0aW9uKGUpe3JldHVybiB3KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgdCxuLGk7cmV0dXJuIGIodGhpcywoZnVuY3Rpb24ocil7c3dpdGNoKHIubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5fY2hhbm5lbD8odD10aGlzLl9jaGFubmVsLmNvZGVjLmVuY29kZVF1aXRSVENSb29tKCksbj1uZXcgc3IoaHJbaHIudmlld2VyRXhpdFJdLHQsZSksWzQsdGhpcy5fY2hhbm5lbC5zZW5kKG4pXSk6WzIsRWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRF07Y2FzZSAxOnJldHVybiBpPXIuc2VudCgpLmNvZGUsdGhpcy5fcnRjS1ZNYW5hZ2VyLnJlc2V0KCksWzIsaV19fSkpfSkpfSx0LnByb3RvdHlwZS5ydGNJZGVudGl0eUNoYW5nZT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHcodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBpLHIscyxvLGE7cmV0dXJuIGIodGhpcywoZnVuY3Rpb24odSl7c3dpdGNoKHUubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5fY2hhbm5lbD8oaT10aGlzLl9jaGFubmVsLmNvZGVjLmVuY29kZUlkZW50aXR5Q2hhbmdlSW5mbyh0LG4pLHI9bmV3IHNyKGhyW2hyLnJ0Y0lkZW50aXR5Q2hhbmdlXSxpLGUpLFs0LHRoaXMuX2NoYW5uZWwuc2VuZChyLFp0KV0pOlsyLHtjb2RlOkVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSUR9XTtjYXNlIDE6cmV0dXJuIHM9dS5zZW50KCksbz1zLmNvZGUsYT1zLmRhdGEsbyE9PUVlLlNVQ0NFU1M/WzIse2NvZGU6b31dOlsyLHtjb2RlOm8sZGF0YTphfV19fSkpfSkpfSx0LnByb3RvdHlwZS5wdWxsUlRDUm9vbUVudHJ5PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHcodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciB0LG4saSxyLHMsbyxhLHUsYztyZXR1cm4gYih0aGlzLChmdW5jdGlvbihoKXtzd2l0Y2goaC5sYWJlbCl7Y2FzZSAwOnJldHVybiBuPSh0PXRoaXMpLl9jaGFubmVsLGk9dC5jdXJyZW50VXNlcklkLG4/KHBlLmluZm8oXCJhdWRpZW5jZSBpbiByb29tIHN0YXJ0IHB1bGwgS1ZcIikscj1uLmNvZGVjLmVuY29kZVB1bGxSVENSb29tS1YoZSwwKSxzPW5ldyBzcihocltoci5ydGNQdWxsS3ZdLHIsaSksWzQsbi5zZW5kKHMsSm4pXSk6WzIse2NvZGU6RWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRH1dO2Nhc2UgMTpyZXR1cm4gbz1oLnNlbnQoKSxhPW8uY29kZSx1PW8uZGF0YSxwZS5pbmZvKFwiYXVkaWVuY2UgaW4gcm9vbSBlbmQgcHVsbCBLViwgY29kZTogXCIrYStcIiwgZGF0YTogXCIrSlNPTi5zdHJpbmdpZnkodXx8e30pKSxhPT09RWUuU1VDQ0VTUz8oYz11Lmt2RW50cmllcyx0aGlzLl93YXRjaGVyLm9uUlRDRGF0YUNoYW5nZShjLGUpLFsyLHtjb2RlOmEsZGF0YTp1fV0pOlsyLHtjb2RlOmF9XX19KSl9KSl9LHQucHJvdG90eXBlLmdldFJUQ0pvaW5lZFVzZXJJbmZvPWZ1bmN0aW9uKGUpe3JldHVybiB3KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgdCxuLGkscixzLG8sYSx1O3JldHVybiBiKHRoaXMsKGZ1bmN0aW9uKGMpe3N3aXRjaChjLmxhYmVsKXtjYXNlIDA6cmV0dXJuIG49KHQ9dGhpcykuX2NoYW5uZWwsaT10LmN1cnJlbnRVc2VySWQsbj8ocj1uLmNvZGVjLmVuY29kZVF1ZXJ5VXNlckpvaW5lZEluZm8oZSkscz1uZXcgc3IoaHJbaHIucnRjUXVlcnlKb2luZWRdLHIsaSksWzQsbi5zZW5kKHMsWm4pXSk6WzIse2NvZGU6RWUuUkNfTkVUX0NIQU5ORUxfSU5WQUxJRH1dO2Nhc2UgMTpyZXR1cm4gbz1jLnNlbnQoKSxhPW8uY29kZSx1PW8uZGF0YSxhPT09RWUuU1VDQ0VTUz9bMix7Y29kZTphLGRhdGE6dX1dOlsyLHtjb2RlOmF9XX19KSl9KSl9LHQucHJvdG90eXBlLmdldERldmljZUlkPWZ1bmN0aW9uKCl7cmV0dXJuIEhyKHRoaXMucnVudGltZSl9LHQucHJvdG90eXBlLnJlcXVlc3RSb29tUEs9ZnVuY3Rpb24oZSl7cmV0dXJuIHcodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciB0LG4saTtyZXR1cm4gYih0aGlzLChmdW5jdGlvbihyKXtzd2l0Y2goci5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9jaGFubmVsPyh0PXRoaXMuX2NoYW5uZWwuY29kZWMuZW5jb2RlUmVxdWVzdFJvb21QSyhlKSxuPW5ldyBzcihocltoci5ydGNJbnZpdGVdLHQsZS5yb29tSWQpLFs0LHRoaXMuX2NoYW5uZWwuc2VuZChuKV0pOlsyLEVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSURdO2Nhc2UgMTpyZXR1cm4gaT1yLnNlbnQoKS5jb2RlLHRoaXMuX3J0Y0tWTWFuYWdlci5yZXNldCgpLFsyLGldfX0pKX0pKX0sdC5wcm90b3R5cGUuY2FuY2VsUm9vbVBLPWZ1bmN0aW9uKGUpe3JldHVybiB3KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgdCxuLGk7cmV0dXJuIGIodGhpcywoZnVuY3Rpb24ocil7c3dpdGNoKHIubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5fY2hhbm5lbD8odD10aGlzLl9jaGFubmVsLmNvZGVjLmVuY29kZUNhbmNlbFJvb21QSyhlKSxuPW5ldyBzcihocltoci5ydGNDYW5jZWxJbnZpdGVdLHQsZS5yb29tSWQpLFs0LHRoaXMuX2NoYW5uZWwuc2VuZChuKV0pOlsyLEVlLlJDX05FVF9DSEFOTkVMX0lOVkFMSURdO2Nhc2UgMTpyZXR1cm4gaT1yLnNlbnQoKS5jb2RlLHRoaXMuX3J0Y0tWTWFuYWdlci5yZXNldCgpLFsyLGldfX0pKX0pKX0sdC5wcm90b3R5cGUucmVzcG9uc2VSb29tUEs9ZnVuY3Rpb24oZSl7cmV0dXJuIHcodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciB0LG4saTtyZXR1cm4gYih0aGlzLChmdW5jdGlvbihyKXtzd2l0Y2goci5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9jaGFubmVsPyh0PXRoaXMuX2NoYW5uZWwuY29kZWMuZW5jb2RlUmVzcG9uc2VSb29tUEsoZSksbj1uZXcgc3IoaHJbaHIucnRjSW52aXRlQW5zd2VyXSx0LGUucm9vbUlkKSxbNCx0aGlzLl9jaGFubmVsLnNlbmQobildKTpbMixFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEXTtjYXNlIDE6cmV0dXJuIGk9ci5zZW50KCkuY29kZSx0aGlzLl9ydGNLVk1hbmFnZXIucmVzZXQoKSxbMixpXX19KSl9KSl9LHQucHJvdG90eXBlLmVuZFJvb21QSz1mdW5jdGlvbihlKXtyZXR1cm4gdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHQsbixpO3JldHVybiBiKHRoaXMsKGZ1bmN0aW9uKHIpe3N3aXRjaChyLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuX2NoYW5uZWw/KHQ9dGhpcy5fY2hhbm5lbC5jb2RlYy5lbmNvZGVFbmRSb29tUEsoZSksbj1uZXcgc3IoaHJbaHIucnRjRW5kSW52aXRlXSx0LGUucm9vbUlkKSxbNCx0aGlzLl9jaGFubmVsLnNlbmQobildKTpbMixFZS5SQ19ORVRfQ0hBTk5FTF9JTlZBTElEXTtjYXNlIDE6cmV0dXJuIGk9ci5zZW50KCkuY29kZSx0aGlzLl9ydGNLVk1hbmFnZXIucmVzZXQoKSxbMixpXX19KSl9KSl9LHQucHJvdG90eXBlLmNhbGxFeHRyYT1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10sbj0xO248YXJndW1lbnRzLmxlbmd0aDtuKyspdFtuLTFdPWFyZ3VtZW50c1tuXTtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtjb2RlOkVlLkVYVFJBX01FVEhPRF9VTkRFRklORUR9KX0sdC5wcm90b3R5cGUuZ2V0Q29udmVyc2F0aW9uTGlzdFdpdGhBbGxDaGFubmVsPWZ1bmN0aW9uKCl7dGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIil9LHQucHJvdG90eXBlLmdldENvbnZlcnNhdGlvbkxpc3RXaXRoQWxsQ2hhbm5lbEJ5UGFnZT1mdW5jdGlvbihlLHQpe3Rocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpfSx0LnByb3RvdHlwZS5jbGVhckNvbnZlcnNhdGlvbnM9ZnVuY3Rpb24oKXt0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKX0sdC5wcm90b3R5cGUuc2V0VXNlclN0YXR1c0xpc3RlbmVyPWZ1bmN0aW9uKGUsdCl7dGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIil9LHQucHJvdG90eXBlLnNldFVzZXJTdGF0dXM9ZnVuY3Rpb24oZSl7dGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIil9LHQucHJvdG90eXBlLnN1YnNjcmliZVVzZXJTdGF0dXM9ZnVuY3Rpb24oZSl7dGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIil9LHQucHJvdG90eXBlLmdldFVzZXJTdGF0dXM9ZnVuY3Rpb24oZSl7dGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIil9LHQucHJvdG90eXBlLmFkZFRvQmxhY2tsaXN0PWZ1bmN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpfSx0LnByb3RvdHlwZS5yZW1vdmVGcm9tQmxhY2tsaXN0PWZ1bmN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpfSx0LnByb3RvdHlwZS5nZXRCbGFja2xpc3Q9ZnVuY3Rpb24oKXt0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKX0sdC5wcm90b3R5cGUuZ2V0QmxhY2tsaXN0U3RhdHVzPWZ1bmN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpfSx0LnByb3RvdHlwZS5pbnNlcnRNZXNzYWdlPWZ1bmN0aW9uKGUsdCxuKXt0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKX0sdC5wcm90b3R5cGUuZGVsZXRlTWVzc2FnZXM9ZnVuY3Rpb24oZSl7dGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIil9LHQucHJvdG90eXBlLmRlbGV0ZU1lc3NhZ2VzQnlUaW1lc3RhbXA9ZnVuY3Rpb24oZSx0LG4saSxyKXt0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKX0sdC5wcm90b3R5cGUuY2xlYXJNZXNzYWdlcz1mdW5jdGlvbihlLHQsbil7dGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIil9LHQucHJvdG90eXBlLmdldE1lc3NhZ2U9ZnVuY3Rpb24oZSl7dGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIil9LHQucHJvdG90eXBlLnNldE1lc3NhZ2VDb250ZW50PWZ1bmN0aW9uKGUsdCxuKXt0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKX0sdC5wcm90b3R5cGUuc2V0TWVzc2FnZVNlYXJjaEZpZWxkPWZ1bmN0aW9uKGUsdCxuKXt0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKX0sdC5wcm90b3R5cGUuc2VhcmNoQ29udmVyc2F0aW9uQnlDb250ZW50PWZ1bmN0aW9uKGUsdCxuLGkpe3Rocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpfSx0LnByb3RvdHlwZS5zZWFyY2hNZXNzYWdlQnlDb250ZW50PWZ1bmN0aW9uKGUsdCxuLGkscixzKXt0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKX0sdC5wcm90b3R5cGUuZ2V0VW5yZWFkTWVudGlvbmVkTWVzc2FnZXM9ZnVuY3Rpb24oZSx0KXt0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKX0sdC5wcm90b3R5cGUuc2V0TWVzc2FnZVNlbnRTdGF0dXM9ZnVuY3Rpb24oZSx0KXt0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKX0sdC5wcm90b3R5cGUuc2V0TWVzc2FnZVJlY2VpdmVkU3RhdHVzPWZ1bmN0aW9uKGUsdCl7dGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIil9LHQucHJvdG90eXBlLmNsZWFyVW5yZWFkQ291bnRCeVRpbWVzdGFtcD1mdW5jdGlvbihlLHQsbixpKXt0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKX0sdC5wcm90b3R5cGUuZ2V0Q29udmVyc2F0aW9uTm90aWZpY2F0aW9uU3RhdHVzPWZ1bmN0aW9uKGUsdCxuKXt2YXIgaT10aGlzLl9jb252ZXJzYXRpb25NYW5hZ2VyLmdldChlLHQsbik7cmV0dXJuIGk/UHJvbWlzZS5yZXNvbHZlKHtjb2RlOkVlLlNVQ0NFU1MsZGF0YTppLm5vdGlmaWNhdGlvblN0YXR1c30pOlByb21pc2UucmVzb2x2ZSh7Y29kZTpFZS5DT05WRVJfR0VUX0VSUk9SfSl9LHQucHJvdG90eXBlLmdldFJlbW90ZUhpc3RvcnlNZXNzYWdlcz1mdW5jdGlvbihlLHQsbixpLHIscyl7cmV0dXJuIHRoaXMuZ2V0SGlzdG9yeU1lc3NhZ2UoZSx0LG4saSxyLHMpfSx0fSh2ciksV3I9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuX2NvbnRleHQ9ZX1yZXR1cm4gZS5wcm90b3R5cGUuX19nZXRDb250ZXh0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbnRleHR9LGUucHJvdG90eXBlLmdldE5hdmlJbmZvPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbnRleHQuZ2V0SW5mb0Zyb21DYWNoZSgpfSxlLnByb3RvdHlwZS5nZXRDb3JlVmVyc2lvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb250ZXh0LmNvcmVWZXJzaW9ufSxlLnByb3RvdHlwZS5nZXRBUElWZXJzaW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbnRleHQuYXBpVmVyc2lvbn0sZS5wcm90b3R5cGUuZ2V0QXBwa2V5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbnRleHQuYXBwa2V5fSxlLnByb3RvdHlwZS5nZXRDdXJyZW50SWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29udGV4dC5nZXRDdXJyZW50VXNlcklkKCl9LGUucHJvdG90eXBlLmdldENvbm5lY3Rpb25TdGF0dXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29udGV4dC5nZXRDb25uZWN0aW9uU3RhdHVzKCl9LGUucHJvdG90eXBlLmdldERldmljZUlkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbnRleHQuZ2V0RGV2aWNlSWQoKX0sZS5wcm90b3R5cGUuc2VuZE1lc3NhZ2U9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB0aGlzLl9jb250ZXh0LnNlbmRNZXNzYWdlKGUsdCxuKX0sZS5wcm90b3R5cGUucmVnaXN0ZXJNZXNzYWdlVHlwZT1mdW5jdGlvbihlLHQsbixpKXt2b2lkIDA9PT1pJiYoaT1bXSksdGhpcy5fY29udGV4dC5yZWdpc3Rlck1lc3NhZ2VUeXBlKGUsdCxuLGkpfSxlLnByb3RvdHlwZS5nZXRTZXJ2ZXJUaW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbnRleHQuZ2V0U2VydmVyVGltZSgpfSxlLnByb3RvdHlwZS5nZXRSVENKb2luZWRVc2VySW5mbz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fY29udGV4dC5nZXRSVENKb2luZWRVc2VySW5mbyhlKX0sZX0oKSxKcj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7cmV0dXJuIG51bGwhPT1lJiZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gTih0LGUpLHQucHJvdG90eXBlLmdldE5hdmlJbmZvPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbnRleHQuZ2V0SW5mb0Zyb21DYWNoZSgpfSx0LnByb3RvdHlwZS5qb2luUlRDUm9vbT1mdW5jdGlvbihlLHQsbixpLHIscyl7cmV0dXJuIHRoaXMuX2NvbnRleHQuam9pblJUQ1Jvb20oZSx0LG4saSxyLHMpfSx0LnByb3RvdHlwZS5xdWl0UlRDUm9vbT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fY29udGV4dC5xdWl0UlRDUm9vbShlKX0sdC5wcm90b3R5cGUucnRjUGluZz1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHRoaXMuX2NvbnRleHQucnRjUGluZyhlLHQsbil9LHQucHJvdG90eXBlLmdldFJUQ1Jvb21JbmZvPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9jb250ZXh0LmdldFJUQ1Jvb21JbmZvKGUpfSx0LnByb3RvdHlwZS5nZXRSVENVc2VySW5mb0xpc3Q9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2NvbnRleHQuZ2V0UlRDVXNlckluZm9MaXN0KGUpfSx0LnByb3RvdHlwZS5nZXRSVENVc2VySW5mbz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fY29udGV4dC5nZXRSVENVc2VySW5mbyhlKX0sdC5wcm90b3R5cGUuc2V0UlRDVXNlckluZm89ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB0aGlzLl9jb250ZXh0LnNldFJUQ1VzZXJJbmZvKGUsdCxuKX0sdC5wcm90b3R5cGUucmVtb3ZlUlRDVXNlckluZm89ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5fY29udGV4dC5yZW1vdmVSVENVc2VySW5mbyhlLHQpfSx0LnByb3RvdHlwZS5zZXRSVENEYXRhPWZ1bmN0aW9uKGUsdCxuLGkscixzKXtyZXR1cm4gdGhpcy5fY29udGV4dC5zZXRSVENEYXRhKGUsdCxuLGkscixzKX0sdC5wcm90b3R5cGUuc2V0UlRDVG90YWxSZXM9ZnVuY3Rpb24oZSx0LG4saSxyKXtyZXR1cm4gdGhpcy5fY29udGV4dC5zZXRSVENUb3RhbFJlcyhlLHQsbixpLHIpfSx0LnByb3RvdHlwZS5zZXRSVENDRE5VcmlzPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdGhpcy5fY29udGV4dC5zZXRSVENDRE5VcmlzKGUsdCxuKX0sdC5wcm90b3R5cGUuZ2V0UlRDRGF0YT1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gdGhpcy5fY29udGV4dC5nZXRSVENEYXRhKGUsdCxuLGkpfSx0LnByb3RvdHlwZS5yZW1vdmVSVENEYXRhPWZ1bmN0aW9uKGUsdCxuLGkscil7cmV0dXJuIHRoaXMuX2NvbnRleHQucmVtb3ZlUlRDRGF0YShlLHQsbixpLHIpfSx0LnByb3RvdHlwZS5zZXRSVENPdXREYXRhPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiB0aGlzLl9jb250ZXh0LnNldFJUQ091dERhdGEoZSx0LG4saSl9LHQucHJvdG90eXBlLmdldFJUQ091dERhdGE9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5fY29udGV4dC5nZXRSVENPdXREYXRhKGUsdCl9LHQucHJvdG90eXBlLmdldFJUQ1Rva2VuPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdGhpcy5fY29udGV4dC5nZXRSVENUb2tlbihlLHQsbil9LHQucHJvdG90eXBlLnNldFJUQ1N0YXRlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX2NvbnRleHQuc2V0UlRDU3RhdGUoZSx0KX0sdC5wcm90b3R5cGUuZ2V0UlRDVXNlckxpc3Q9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2NvbnRleHQuZ2V0UlRDVXNlckxpc3QoZSl9LHQucHJvdG90eXBlLmpvaW5MaXZpbmdSb29tQXNBdWRpZW5jZT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHRoaXMuX2NvbnRleHQuam9pbkxpdmluZ1Jvb21Bc0F1ZGllbmNlKGUsdCxuKX0sdC5wcm90b3R5cGUucXVpdExpdmluZ1Jvb21Bc0F1ZGllbmNlPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9jb250ZXh0LnF1aXRMaXZpbmdSb29tQXNBdWRpZW5jZShlKX0sdC5wcm90b3R5cGUucnRjSWRlbnRpdHlDaGFuZ2U9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB0aGlzLl9jb250ZXh0LnJ0Y0lkZW50aXR5Q2hhbmdlKGUsdCxuKX0sdC5wcm90b3R5cGUucmVxdWVzdFJvb21QSz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fY29udGV4dC5yZXF1ZXN0Um9vbVBLKGUpfSx0LnByb3RvdHlwZS5jYW5jZWxSb29tUEs9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2NvbnRleHQuY2FuY2VsUm9vbVBLKGUpfSx0LnByb3RvdHlwZS5yZXNwb25zZVJvb21QSz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fY29udGV4dC5yZXNwb25zZVJvb21QSyhlKX0sdC5wcm90b3R5cGUuZW5kUm9vbVBLPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9jb250ZXh0LmVuZFJvb21QSyhlKX0sdH0oV3IpLHpyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe31yZXR1cm4gZS5jb21wcmVzcz1mdW5jdGlvbihlKXtmb3IodmFyIHQ9dGhpcyxuPXt9LGk9MDtpPGUubGVuZ3RoLTE7aSsrKXt2YXIgcj1lLmNoYXJBdChpKStlLmNoYXJBdChpKzEpO24uaGFzT3duUHJvcGVydHkocik/bltyXS5wdXNoKGkpOm5bcl09W2ldfWZvcih2YXIgcz1bXSxvPVtdLGE9ZnVuY3Rpb24oKXtpZihvLmxlbmd0aD4wKXt2YXIgZT1vLmpvaW4oXCJcIik7aWYobz1bXSxlLmxlbmd0aD4yNil7dmFyIG49dC5udW1iZXJFbmNvZGUoZS5sZW5ndGgpLGk9U3RyaW5nLmZyb21DaGFyQ29kZSh0LmRhdGFUeXBlLk5vcm1hbEV4dHxuLmxlbmd0aCk7cy5wdXNoKGkrbil9ZWxzZXt2YXIgcj1TdHJpbmcuZnJvbUNoYXJDb2RlKHQuZGF0YVR5cGUuTm9ybWFsfGUubGVuZ3RoKTtzLnB1c2gocil9cy5wdXNoKGUpfX0sdT0wO3U8ZS5sZW5ndGg7KXt2YXIgYz10LmluZGV4T2YobixlLHUpO2lmKGMubGVuZ3RoPDIpby5wdXNoKGUuY2hhckF0KHUrKykpO2Vsc2UgaWYoYy5sZW5ndGg8NClvLnB1c2goZS5zdWJzdHIodSxjLmxlbmd0aCkpLHUrPWMubGVuZ3RoO2Vsc2V7dmFyIGg9dC5udW1iZXJFbmNvZGUodS1jLm9mZnNldCksbD10Lm51bWJlckVuY29kZShjLmxlbmd0aCk7aWYoaC5sZW5ndGgrbC5sZW5ndGg+PWMubGVuZ3RoKW8ucHVzaChlLnN1YnN0cih1LGMubGVuZ3RoKSksdSs9Yy5sZW5ndGg7ZWxzZXthKCk7dmFyIGQ9U3RyaW5nLmZyb21DaGFyQ29kZSh0LmRhdGFUeXBlLkNvbXByZXNzZWR8aC5sZW5ndGg8PDJ8bC5sZW5ndGgpO3MucHVzaChkK2grbCksdSs9Yy5sZW5ndGh9fX1hKCk7dmFyIGY9dC5udW1iZXJFbmNvZGUoZS5sZW5ndGgpLHA9U3RyaW5nLmZyb21DaGFyQ29kZSh0LmRhdGFUeXBlLlRhaWx8Zi5sZW5ndGgpO3JldHVybiBzLnB1c2gocCtmKSxzLmpvaW4oXCJcIil9LGUudW5jb21wcmVzcz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLG49MCxpPVwiXCI7ZTpkb3t2YXIgcj1lLmNoYXJDb2RlQXQobisrKSxzPXImdC5kYXRhVHlwZS5NYXJrLG89MTUmcixhPXZvaWQgMDtzd2l0Y2gocyl7Y2FzZSB0LmRhdGFUeXBlLkNvbXByZXNzZWQ6dmFyIHU9bz4+MixjPTMmbztpZigwPT09dXx8MD09PWMpdGhyb3cgbmV3IEVycm9yKFwiRGF0YSBwYXJzaW5nIGVycm9yLGF0IFwiK24pO3ZhciBoPXQubnVtYmVyRGVjb2RlKGUuc3Vic3RyKG4sdSkpLGw9dC5udW1iZXJEZWNvZGUoZS5zdWJzdHIobis9dSxjKSk7aWYoKGg9aS5sZW5ndGgtaCkrbD5pLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoXCJEYXRhIHBhcnNpbmcgZXJyb3IsYXQgXCIrbik7bis9YyxpKz1pLnN1YnN0cihoLGwpO2JyZWFrO2Nhc2UgdC5kYXRhVHlwZS5UYWlsOmlmKChhPXQubnVtYmVyRGVjb2RlKGUuc3Vic3RyKG4sbykpKSE9PWkubGVuZ3RoKXRocm93IGNvbnNvbGUubG9nKGkubGVuZ3RoKSxjb25zb2xlLmxvZyhhKSxuZXcgRXJyb3IoXCJEYXRhIHBhcnNpbmcgZXJyb3IsYXQgXCIrbik7bis9bzticmVhayBlO2Nhc2UgdC5kYXRhVHlwZS5Ob3JtYWxFeHQ6YT10Lm51bWJlckRlY29kZShlLnN1YnN0cihuLG8pKSxpKz1lLnN1YnN0cihuKz1vLGEpLG4rPWE7YnJlYWs7Y2FzZSB0LmRhdGFUeXBlLk5vcm1hbDppKz1lLnN1YnN0cihuLG8pLG4rPW87YnJlYWs7Y2FzZSB0LmRhdGFUeXBlLk1hcms6aWYobz4xMCl0aHJvdyBuZXcgRXJyb3IoXCJEYXRhIHBhcnNpbmcgZXJyb3IsYXQgXCIrbik7aSs9ZS5zdWJzdHIobiwxNitvKSxuKz0xNitvO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKFwiRGF0YSBwYXJzaW5nIGVycm9yLGF0IFwiK24rXCIgaGVhZGVyOlwiK3MpfX13aGlsZShuPGUubGVuZ3RoKTtyZXR1cm4gaX0sZS5pbmRleE9mPWZ1bmN0aW9uKGUsdCxuKXt2YXIgaT17bGVuZ3RoOjAsb2Zmc2V0Oi0xfTtpZih0Lmxlbmd0aCxuPj10Lmxlbmd0aC0xKXJldHVybiBpO3ZhciByPWVbdC5jaGFyQXQobikrdC5jaGFyQXQobisxKV07aWYoclswXT09PW4pcmV0dXJuIGk7Zm9yKHZhciBzPXQubGVuZ3RoLW4sbz0wLGE9ci5sZW5ndGg7bzxhO28rKyl7dmFyIHU9cltvXSxjPW4tdTtpZighKGM+dGhpcy5tYXgpKXt2YXIgaD1NYXRoLm1pbihzLGMpO2lmKGg8PWkubGVuZ3RoKWJyZWFrO2lmKCEoaS5sZW5ndGg+MiYmdC5jaGFyQXQodStpLmxlbmd0aC0xKSE9PXQuY2hhckF0KG4raS5sZW5ndGgtMSkpKXtmb3IodmFyIGw9MixkPWw7ZDxoJiZ0LmNoYXJBdCh1K2QpPT09dC5jaGFyQXQobitkKTtkKyspbCsrO2w+PWkubGVuZ3RoJiYoaS5sZW5ndGg9bCxpLm9mZnNldD11KX19fXJldHVybiBpfSxlLm51bWJlckVuY29kZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLG49W10saT0wO2Rve2k9ZSV0LnNjYWxlLG4ucHVzaCh0LmNoYXJzLmNoYXJBdChpKSksZT0oZS1pKS90LnNjYWxlfXdoaWxlKGU+MCk7cmV0dXJuIG4uam9pbihcIlwiKX0sZS5udW1iZXJEZWNvZGU9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTAsbj0wLGk9ZS5sZW5ndGgtMTtpPj0wO2ktLSl7aWYoLTE9PT0obj10aGlzLmNoYXJzLmluZGV4T2YoZS5jaGFyQXQoaSkpKSl0aHJvdyBuZXcgRXJyb3IoJ2RlY29kZSBudW1iZXIgZXJyb3IsIGRhdGEgaXMgXCInK2UrJ1wiJyk7dD10KnRoaXMuc2NhbGUrbn1yZXR1cm4gdH0sZS5kYXRhVHlwZT17VGFpbDo0OCxDb21wcmVzc2VkOjY0LE5vcm1hbEV4dDo4MCxOb3JtYWw6OTYsTWFyazoxMTJ9LGUuY2hhcnM9XCIwMTIzNDU2Nzg5QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5elwiLGUuc2NhbGU9ZS5jaGFycy5sZW5ndGgsZS5tYXg9MjM4MzI3LGV9KCksWnI9MSxYcj0hMSwkcj1cInVuZGVmaW5lZFwiIT10eXBlb2YgbG9jYXRpb24mJlwiaHR0cHM6Ly9cIj09PWxvY2F0aW9uLnByb3RvY29sP1wiaHR0cHM6Ly9cIjpcImh0dHA6Ly9cIixlcz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5pbmZvPWUsdGhpcy5sb2dVcmw9XCJsb2djb2xsZWN0aW9uLnJvbmdodWIuY29tXCIsdGhpcy5sZXZlbD0xLHRoaXMuaXR2PTMwLHRoaXMudGltZXM9NSx0aGlzLmRldmljZUlkPVwiXCIsdGhpcy5kZXZpY2VJbmZvPVwiXCIsdGhpcy5sb2dTd2l0Y2g9MCx0aGlzLmxvZ1VybD1lLmxvZ1BvbGljeS51cmx8fHRoaXMubG9nVXJsLHRoaXMubGV2ZWw9ZS5sb2dQb2xpY3kubGV2ZWx8fHRoaXMubGV2ZWwsdGhpcy5pdHY9ZS5sb2dQb2xpY3kuaXR2fHx0aGlzLml0dix0aGlzLnRpbWVzPWUubG9nUG9saWN5LnRpbWVzfHx0aGlzLnRpbWVzLHRoaXMuZGV2aWNlSWQ9SHIoZS5ydW50aW1lKSx0aGlzLmxvZ1N3aXRjaD1lLmxvZ1N3aXRjaDt2YXIgdD1fdChlLnJ1bnRpbWUpO3RoaXMuZGV2aWNlSW5mbz10LnR5cGUrXCJ8XCIrdC52ZXJzaW9uK1wifFwiK2ZlLnNlc3Npb25JZCx0aGlzLnN0YXJ0UmVwb3J0KCl9cmV0dXJuIGUuaW5pdD1mdW5jdGlvbih0KXtyZXR1cm4gWHI9ITAsZS5faW5zdGFuY2V8fChlLl9pbnN0YW5jZT1uZXcgZSh0KSksZS5faW5zdGFuY2V9LGUuZ2V0SW5zdGFuY2U9ZnVuY3Rpb24oKXtyZXR1cm4gZS5faW5zdGFuY2V9LGUucHJvdG90eXBlLnN0YXJ0UmVwb3J0PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztpZih0aGlzLmxvZ1N3aXRjaCYmWHIpe3ZhciB0PXRoaXMuaXR2Kk1hdGgucG93KDIsWnItMSk7WnI8dGhpcy50aW1lcyYmWnIrKyxzZXRUaW1lb3V0KChmdW5jdGlvbigpe2UucmVwb3J0UmVhbHRpbWVMb2coKX0pLDFlMyp0KX19LGUucHJvdG90eXBlLnJlcG9ydFJlYWx0aW1lTG9nPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PWZlLnJlYWxUaW1lTG9nTGlzdC5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiB0LmxldmVsPD1lLmxldmVsfSkpO2lmKDAhPT10Lmxlbmd0aCl7dmFyIG49enIuY29tcHJlc3ModC5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlLmNvbnRlbnR9KSkuam9pbihcIlwiKSksaT1cIlwiKyRyK3RoaXMubG9nVXJsK1wiP3ZlcnNpb249XCIrdGhpcy5pbmZvLnZlcnNpb24rXCImYXBwa2V5PVwiK3RoaXMuaW5mby5hcHBrZXkrXCImdXNlcklkPVwiK3RoaXMuaW5mby51c2VySWQrXCImZGV2aWNlSWQ9XCIrdGhpcy5kZXZpY2VJZCtcIiZkZXZpY2VJbmZvPVwiK3RoaXMuZGV2aWNlSW5mbytcIiZwbGF0Zm9ybT1XZWJcIjt0aGlzLmluZm8ucnVudGltZS5odHRwUmVxKHttZXRob2Q6XCJQT1NUXCIsdXJsOmksYm9keTpufSkudGhlbigoZnVuY3Rpb24odCl7cGUuX19jbGVhclJlYWxUaW1lTG9nKCkscGUuZGVidWcoXCJyZXBvcnQgcmVhbC10aW1lIGxvZyBzdWNjZXNzXCIpO3ZhciBuPXQuZGF0YTtuJiYobj1KU09OLnBhcnNlKG4pLGUuaXR2PW4ubmV4dFRpbWUsZS5sZXZlbD1uLmxldmVsLGUubG9nU3dpdGNoPW4ubG9nU3dpdGNoLFpyPTEpLGUuc3RhcnRSZXBvcnQoKX0pKS5jYXRjaCgoZnVuY3Rpb24odCl7cGUuZGVidWcoXCJyZXBvcnQgcmVhbC10aW1lIGxvZyBlcnJvciAtPiBcIit0KSxlLnN0YXJ0UmVwb3J0KCl9KSl9ZWxzZSB0aGlzLnN0YXJ0UmVwb3J0KCl9LGUucHJvdG90eXBlLnJlcG9ydEZ1bGxMb2c9ZnVuY3Rpb24oZSl7cmV0dXJuIHcodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciB0LG4saSxyLHMsbyxhLHUsYyxoLGw9dGhpcztyZXR1cm4gYih0aGlzLChmdW5jdGlvbihkKXtzd2l0Y2goZC5sYWJlbCl7Y2FzZSAwOnJldHVybiB0PWUuc3RhcnRUaW1lLG49ZS5lbmRUaW1lLGk9ZS5wbGF0Zm9ybSxyPWUubG9nSWQscz1lLnVyaSxvPXEuZ2V0SW5zdGFuY2UoKSxwZS5kZWJ1ZyhcInJlY2VpdmVkIHJlcG9ydCBsb2cgbXNnLCBcIitpLnRvTG93ZXJDYXNlKCksbyksXCJ3ZWJcIj09PWkudG9Mb3dlckNhc2UoKSYmbz90Pm4/KHBlLndhcm4oXCJyZXBvcnQgZXJyb3I6IFRoZSBzdGFydCB0aW1lKFwiK3QrXCIpIGNhbm5vdCBiZSBncmVhdGVyIHRoYW4gdGhlIGVuZCB0aW1lKFwiK3QrXCIpXCIpLFsyXSk6WzQscGUuX19pbnNlcnRMb2dJbnRvRGF0YWJhc2UoKV06WzJdO2Nhc2UgMTpyZXR1cm4gZC5zZW50KCksWzQsby5nZXRSYW5nZURhdGEoQixcInRpbWVcIix0LG4pXTtjYXNlIDI6cmV0dXJuIGE9KGE9ZC5zZW50KCkpLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIWUudXNlcklkfHxlLnVzZXJJZD09PWwuaW5mby51c2VySWR9KSksdT16ci5jb21wcmVzcyhhLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUuY29udGVudH0pKS5qb2luKFwiXCIpfHxcIm5vIGRhdGFcIiksNWUzLGM9MSwoaD1mdW5jdGlvbigpe2lmKCEoYz4zKSYmWHIpe3ZhciBlPXN8fGwubG9nVXJsLHQ9XCJcIiskcitlK1wiP3ZlcnNpb249XCIrbC5pbmZvLnZlcnNpb24rXCImYXBwa2V5PVwiK2wuaW5mby5hcHBrZXkrXCImdXNlcklkPVwiK2wuaW5mby51c2VySWQrXCImbG9nSWQ9XCIrcitcIiZkZXZpY2VJZD1cIitsLmRldmljZUlkK1wiJmRldmljZUluZm89XCIrbC5kZXZpY2VJbmZvK1wiJnBsYXRmb3JtPVdlYlwiLG49NWUzKihjLTEpO2MrKyxzZXRUaW1lb3V0KChmdW5jdGlvbigpe1hyJiZsLmluZm8ucnVudGltZS5odHRwUmVxKHt1cmw6dCxtZXRob2Q6XCJQT1NUXCIsYm9keTp1fSkudGhlbigoZnVuY3Rpb24oKXtwZS5kZWJ1ZyhcInJlcG9ydCBmdWxsIGxvZyBzdWNjZXNzIVwiKX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7aCgpLHBlLndhcm4oXCJyZXBvcnQgZnVsbCBsb2cgZXJyb3IgLT4gXCIrZSl9KSl9KSxuKX19KSgpLFsyXX19KSl9KSl9LGUucHJvdG90eXBlLmRpc3Ryb3k9ZnVuY3Rpb24oKXtacj0xLFhyPSExfSxlfSgpO2Z1bmN0aW9uIHRzKGUpe3JldHVybiBPYmplY3QuYXNzaWduKHt9LGUpfXZhciBucyxpcz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt2YXIgbjt0aGlzLl9ydW50aW1lPWUsdGhpcy5fdG9rZW49XCJcIix0aGlzLl9wbHVnaW5Db250ZXh0UXVldWU9W10sdGhpcy5fcGx1Z2luSW5zdGFuc2VNYXA9e30sdGhpcy5jb3JlVmVyc2lvbj1cIjUuMS4yXCIsdGhpcy5fdmVyc2lvbkluZm89e30sdGhpcy5fdHlwaW5nSW5mbz17fSx0aGlzLl9pc0ludGVybmFsQ29ubmVjdGVkPSExLHRoaXMuX2Nvbm5lY3Rpb25TdGF0dXM9SWUuRElTQ09OTkVDVEVELHRoaXMuX2NhblJlZGlyZWN0Q29ubmVjdD0hMSx0aGlzLl93YXRjaGVyPXttZXNzYWdlOnZvaWQgMCxiYXRjaE1lc3NhZ2U6dm9pZCAwLGNvbnZlcnNhdGlvblN0YXRlOnZvaWQgMCxjaGF0cm9vbVN0YXRlOnZvaWQgMCxjb25uZWN0aW9uU3RhdGU6dm9pZCAwLHJ0Y0lubmVyV2F0Y2hlcjp2b2lkIDAsZXhwYW5zaW9uOnZvaWQgMCx0YWc6dm9pZCAwLGNvbnZlcnNhdGlvblRhZ0NoYW5nZWQ6dm9pZCAwLHB1bGxGaW5pc2hlZDp2b2lkIDAsb25Db25uZWN0aW5nOnZvaWQgMCxvbkNvbm5lY3RlZDp2b2lkIDAsb25EaXNjb25uZWN0OnZvaWQgMCxvblN1c3BlbmQ6dm9pZCAwLHJlYWRSZWNlaXB0UmVjZWl2ZWQ6dm9pZCAwLG1lc3NhZ2VSZWNlaXB0UmVxdWVzdDp2b2lkIDAsbWVzc2FnZVJlY2VpcHRSZXNwb25zZTp2b2lkIDAsdHlwaW5nU3RhdGU6dm9pZCAwLG1lc3NhZ2VCbG9ja2VkOnZvaWQgMH0sdGhpcy5fdHlwaW5nSW50ZXJuYWxUaW1lcj0tMSx0aGlzLl90eXBpbmdFeHBpcmVUaW1lPTJlMyx0aGlzLl90eXBpbmdDaGFuZ2VkTGlzdD1bXSx0aGlzLmdldENoYXRSb29tSGlzdG9yeU1lc3NhZ2VzPXRoaXMuZ2V0Q2hhdHJvb21IaXN0b3J5TWVzc2FnZXMsdGhpcy5fb3B0aW9ucz1PYmplY3QuYXNzaWduKHt9LHQpLHRoaXMuYXBwa2V5PXRoaXMuX29wdGlvbnMuYXBwa2V5LHRoaXMuYXBpVmVyc2lvbj10aGlzLl9vcHRpb25zLmFwaVZlcnNpb24sdGhpcy5fb3B0aW9ucy50eXBpbmdFeHBpcmVUaW1lJiYodGhpcy5fb3B0aW9ucy50eXBpbmdFeHBpcmVUaW1lPDJlMz90aGlzLl90eXBpbmdFeHBpcmVUaW1lPTJlMzp0aGlzLl9vcHRpb25zLnR5cGluZ0V4cGlyZVRpbWU+NmUzP3RoaXMuX3R5cGluZ0V4cGlyZVRpbWU9NmUzOnRoaXMuX3R5cGluZ0V4cGlyZVRpbWU9dGhpcy5fb3B0aW9ucy50eXBpbmdFeHBpcmVUaW1lKSx0aGlzLl9vcHRpb25zLm5hdmlnYXRvcnM9dGhpcy5fb3B0aW9ucy5uYXZpZ2F0b3JzLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuL15odHRwcz86XFwvXFwvLy50ZXN0KGUpfSkpLHRoaXMuX29wdGlvbnMubmF2aWdhdG9ycz10aGlzLl9vcHRpb25zLm5hdmlnYXRvcnMubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gZS5yZXBsYWNlKC9cXC8kL2csXCJcIil9KSksMD09PXRoaXMuX29wdGlvbnMubmF2aWdhdG9ycy5sZW5ndGgmJihuPXRoaXMuX29wdGlvbnMubmF2aWdhdG9ycykucHVzaC5hcHBseShuLHUpO3ZhciBpPXtzdGF0dXM6dGhpcy5fY29ubmVjdGlvblN0YXR1c0xpc3RlbmVyLmJpbmQodGhpcyksYmF0Y2hNZXNzYWdlOnRoaXMuX2JhdGNoTWVzc2FnZVJlY2VpdmVyLmJpbmQodGhpcyksY2hhdHJvb206dGhpcy5fY2hhdHJvb21JbmZvTGlzdGVuZXIuYmluZCh0aGlzKSxjb252ZXJzYXRpb246dGhpcy5fY29udmVyc2F0aW9uSW5mb0xpc3RlbmVyLmJpbmQodGhpcyksZXhwYW5zaW9uOnRoaXMuX2V4cGFuc2lvbkluZm9MaXN0ZW5lci5iaW5kKHRoaXMpLHRhZzp0aGlzLl90YWdMaXN0ZW5lci5iaW5kKHRoaXMpLGNvbnZlcnNhdGlvblRhZzp0aGlzLl9jb252ZXJzYXRpb25UYWdMaXN0ZW5lci5iaW5kKHRoaXMpLG9uUlRDRGF0YUNoYW5nZTp0aGlzLl9ydGNEYXRhQ2hhbmdlLmJpbmQodGhpcykscHVsbEZpbmlzaGVkOnRoaXMuX3B1bGxGaW5pc2hlZExpc3RlbmVyLmJpbmQodGhpcyl9O3RoaXMuX2VuZ2luZT1ndCgpP25ldyBSQ0NwcEVuZ2luZShlLGksdGhpcy5fb3B0aW9ucyk6bmV3IFFyKGUsaSx0aGlzLl9vcHRpb25zKX1yZXR1cm4gZS5pbml0PWZ1bmN0aW9uKHQsbil7cmV0dXJuIHBlLnNldExvZ0xldmVsKG4ubG9nTGV2ZWwpLHBlLnNldExvZ1N0ZG91dChuLmxvZ1N0ZG91dCksKG4uaW5kZXhEQlN3aXRjaHx8cmUobi5pbmRleERCU3dpdGNoKSkmJnEuaW5pdCgpLHBlLmRlYnVnKFwiQVBJQ29udGV4dC5pbml0ID0+XCIsbi5hcHBrZXksbi5uYXZpZ2F0b3JzKSx0aGlzLl9jb250ZXh0PyhwZS5lcnJvcihcIlJlcGVhdCBpbml0aWFsaXplIVwiKSx0aGlzLl9jb250ZXh0KToocGUud2FybihcIlJDRW5naW5lIENvbW1pdDpcIixcImVmZDFiN2Y0NGQyNTE3YWI5YTJmYWIwMDNjMjk4MTg0ZDFmMDZmY2FcIiksdGhpcy5fY29udGV4dD1uZXcgZSh0LG4pLHBlLl9faW5zZXJ0TG9nSW50b0RhdGFiYXNlKCksdGhpcy5fY29udGV4dCl9LGUuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMuX2NvbnRleHQmJih0aGlzLl9jb250ZXh0Ll9kZXN0cm95KCksdGhpcy5fY29udGV4dD12b2lkIDApfSxlLnByb3RvdHlwZS5pbnN0YWxsPWZ1bmN0aW9uKGUsdCl7aWYodGhpcy5fcGx1Z2luSW5zdGFuc2VNYXBbZS50YWddKXJldHVybiBwZS53YXJuKFwiUmVwZWF0IGluc3RhbGwgcGx1Z2luOiBcIitlLnRhZyksdGhpcy5fcGx1Z2luSW5zdGFuc2VNYXBbZS50YWddO3ZhciBuPVwiUkNSVENcIj09PWUudGFnP25ldyBKcih0aGlzKTpuZXcgV3IodGhpcyksaT1udWxsO3RyeXtpZighZS52ZXJpZnkodGhpcy5fcnVudGltZSkpcmV0dXJuIG51bGw7aT1lLnNldHVwKG4sdGhpcy5fcnVudGltZSx0KX1jYXRjaChlKXtwZS5lcnJvcihcImluc3RhbGwgcGx1Z2luIGVycm9yIVxcblwiLGUpfXJldHVybltcIlJDUlRDXCIsXCJSQ0NhbGxcIl0uaW5jbHVkZXMoZS50YWcpJiZlLnZlcnNpb24mJmUubmFtZSYmKHRoaXMuX3ZlcnNpb25JbmZvW2UubmFtZV09ZS52ZXJzaW9uKSxpJiZ0aGlzLl9wbHVnaW5Db250ZXh0UXVldWUucHVzaChuKSxpJiYodGhpcy5fcGx1Z2luSW5zdGFuc2VNYXBbZS50YWddPWkpLGl9LGUucHJvdG90eXBlLl9oYW5kbGVSZWRpcmVjdD1mdW5jdGlvbigpe3JldHVybiB3KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXM7cmV0dXJuIGIodGhpcywoZnVuY3Rpb24obil7c3dpdGNoKG4ubGFiZWwpe2Nhc2UgMDpyZXR1cm4gcGUuZGVidWcoXCJfaGFuZGxlUmVkaXJjdFwiLHRoaXMuX3Rva2VuKSxbNCx0aGlzLmNvbm5lY3QodGhpcy5fdG9rZW4sITApXTtjYXNlIDE6cmV0dXJuKGU9bi5zZW50KCkuY29kZSkhPT1FZS5TVUNDRVNTJiZ0aGlzLl9jYW5SZWRpcmVjdENvbm5lY3QmJih0aGlzLl9oYW5kbGVTdXNwZW5kKGUpLHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7dC5faGFuZGxlUmVkaXJlY3QoKX0pLDVlMykpLFsyXX19KSl9KSl9LGUucHJvdG90eXBlLl9jb25uZWN0aW9uU3RhdHVzTGlzdGVuZXI9ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIHcodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiBiKHRoaXMsKGZ1bmN0aW9uKG4pe3JldHVybiBlPT09SWUuUkVESVJFQ1Q/KHRoaXMuX2NhblJlZGlyZWN0Q29ubmVjdD0hMCx0aGlzLl9oYW5kbGVTdXNwZW5kKGUpLHRoaXMuX2hhbmRsZVJlZGlyZWN0KCkpOmU9PT1JZS5CTE9DS0VEfHxlPT09SWUuS0lDS0VEX09GRkxJTkVfQllfT1RIRVJfQ0xJRU5UfHxlPT09SWUuRElTQ09OTkVDVF9CWV9TRVJWRVI/KHRoaXMuX2NhblJlZGlyZWN0Q29ubmVjdD0hMSx0aGlzLl9oYW5kbGVEaXNjb25uZWN0KGUpKTplPT09SWUuQ09OTkVDVElORz90aGlzLl9oYW5kbGVDb25uZWN0aW5nKCk6ZT09PUllLkNPTk5FQ1RFRD90aGlzLl9oYW5kbGVDb25uZWN0ZWQoKTplPT09SWUuRElTQ09OTkVDVEVEP3RoaXMuX2hhbmRsZURpc2Nvbm5lY3QoZSk6ZT09PUllLk5FVFdPUktfVU5BVkFJTEFCTEUmJnRoaXMuX2hhbmRsZVN1c3BlbmQoZSksdGhpcy5fY29ubmVjdGlvblN0YXR1cz1lLChudWxsPT09KHQ9dGhpcy5fd2F0Y2hlci5ydGNJbm5lcldhdGNoZXIpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LnN0YXR1cykmJnRoaXMuX3dhdGNoZXIucnRjSW5uZXJXYXRjaGVyLnN0YXR1cyhlKSx0aGlzLl9wbHVnaW5Db250ZXh0UXVldWUuZm9yRWFjaCgoZnVuY3Rpb24odCl7dC5vbmNvbm5lY3Rpb25zdGF0ZWNoYW5nZSYmdC5vbmNvbm5lY3Rpb25zdGF0ZWNoYW5nZShlKX0pKSx0aGlzLl93YXRjaGVyLmNvbm5lY3Rpb25TdGF0ZSYmdGhpcy5fd2F0Y2hlci5jb25uZWN0aW9uU3RhdGUoZSksWzJdfSkpfSkpfSxlLnByb3RvdHlwZS5faGFuZGxlQ29ubmVjdGluZz1mdW5jdGlvbigpe3RoaXMuX3dhdGNoZXIub25Db25uZWN0aW5nJiZ0aGlzLl93YXRjaGVyLm9uQ29ubmVjdGluZygpfSxlLnByb3RvdHlwZS5faGFuZGxlQ29ubmVjdGVkPWZ1bmN0aW9uKCl7dGhpcy5fd2F0Y2hlci5vbkNvbm5lY3RlZCYmdGhpcy5fd2F0Y2hlci5vbkNvbm5lY3RlZCgpfSxlLnByb3RvdHlwZS5faGFuZGxlRGlzY29ubmVjdD1mdW5jdGlvbihlKXt0aGlzLl93YXRjaGVyLm9uRGlzY29ubmVjdCYmdGhpcy5fd2F0Y2hlci5vbkRpc2Nvbm5lY3QoZSl9LGUucHJvdG90eXBlLl9oYW5kbGVTdXNwZW5kPWZ1bmN0aW9uKGUpe3RoaXMuX3dhdGNoZXIub25TdXNwZW5kJiZ0aGlzLl93YXRjaGVyLm9uU3VzcGVuZChlKX0sZS5wcm90b3R5cGUuX21lc3NhZ2VSZWNlaXZlcj1mdW5jdGlvbihlLHQsbil7dmFyIGkscixzO2lmKChlLmNvbnZlcnNhdGlvblR5cGU9PT1qLlJUQ19ST09NfHxPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocWUsZS5tZXNzYWdlVHlwZSkpJiZ0aGlzLl93YXRjaGVyLnJ0Y0lubmVyV2F0Y2hlciYmdGhpcy5fd2F0Y2hlci5ydGNJbm5lcldhdGNoZXIubWVzc2FnZSl0aGlzLl93YXRjaGVyLnJ0Y0lubmVyV2F0Y2hlci5tZXNzYWdlKHRzKGUpKTtlbHNlIGlmKC0xPT09W1wiUkM6Q2hybUpvaW5OdGZcIixcIlJDOkNocm1RdWl0TnRmXCJdLmluZGV4T2YoZS5tZXNzYWdlVHlwZSl8fFwiZnVuY3Rpb25cIiE9dHlwZW9mIHRoaXMuX3dhdGNoZXIuY2hhdHJvb21TdGF0ZSl7aWYoXCJSQzpDaHJtTWVtQ2hhbmdlXCIhPT1lLm1lc3NhZ2VUeXBlKXtpZihlLm1lc3NhZ2VUeXBlIT09UmUuVFlQSU5HX1NUQVRVU3x8KHRoaXMuX2FkZFR5cGluZ0luZm8odHMoZSkpLCF0aGlzLl93YXRjaGVyLnR5cGluZ1N0YXRlKSlpZihlLm1lc3NhZ2VUeXBlIT09UmUuTE9HX0NPTU1BTkR8fFwicm9uZ2Nsb3Vkc3lzdGVtXCIhPT1lLnNlbmRlclVzZXJJZClpZihlLm1lc3NhZ2VUeXBlIT09UmUuSU5URVJDRVBUKXtpZighdGhpcy5fcGx1Z2luQ29udGV4dFF1ZXVlLnNvbWUoKGZ1bmN0aW9uKHQpe2lmKCF0Lm9ubWVzc2FnZSlyZXR1cm4hMTt0cnl7cmV0dXJuIHQub25tZXNzYWdlKHRzKGUpKX1jYXRjaChlKXtyZXR1cm4gcGUuZXJyb3IoXCJwbHVnaW4gZXJyb3IgPT5cIixlKSwhMX19KSkpaWYodGhpcy5fd2F0Y2hlci5tZXNzYWdlJiZ0aGlzLl93YXRjaGVyLm1lc3NhZ2UodHMoZSksdCxuKSxcIlJDOlJlYWROdGZcIiE9PWUubWVzc2FnZVR5cGUpaWYoXCJSQzpSUlJlcU1zZ1wiIT09ZS5tZXNzYWdlVHlwZSl7aWYoXCJSQzpSUlJzcE1zZ1wiIT09ZS5tZXNzYWdlVHlwZSlyZXR1cm4gZTt2YXIgbz1udWxsPT09KHM9ZS5jb250ZW50KXx8dm9pZCAwPT09cz92b2lkIDA6cy5yZWNlaXB0TWVzc2FnZURpYztvJiZBcnJheS5pc0FycmF5KG9bdGhpcy5fZW5naW5lLmN1cnJlbnRVc2VySWRdKSYmXCJmdW5jdGlvblwiPT10eXBlb2YgdGhpcy5fd2F0Y2hlci5tZXNzYWdlUmVjZWlwdFJlc3BvbnNlJiZ0aGlzLl93YXRjaGVyLm1lc3NhZ2VSZWNlaXB0UmVzcG9uc2Uoe2NvbnZlcnNhdGlvblR5cGU6ZS5jb252ZXJzYXRpb25UeXBlLHRhcmdldElkOmUudGFyZ2V0SWQsY2hhbm5lbElkOmUuY2hhbm5lbElkfSxlLnNlbmRlclVzZXJJZCxvW3RoaXMuX2VuZ2luZS5jdXJyZW50VXNlcklkXSl9ZWxzZVwiZnVuY3Rpb25cIj09dHlwZW9mIHRoaXMuX3dhdGNoZXIubWVzc2FnZVJlY2VpcHRSZXF1ZXN0JiZ0aGlzLl93YXRjaGVyLm1lc3NhZ2VSZWNlaXB0UmVxdWVzdCh7Y29udmVyc2F0aW9uVHlwZTplLmNvbnZlcnNhdGlvblR5cGUsdGFyZ2V0SWQ6ZS50YXJnZXRJZCxjaGFubmVsSWQ6ZS5jaGFubmVsSWR9LGUuY29udGVudC5tZXNzYWdlVUlkLGUuc2VuZGVyVXNlcklkKTtlbHNlXCJmdW5jdGlvblwiPT10eXBlb2YgdGhpcy5fd2F0Y2hlci5yZWFkUmVjZWlwdFJlY2VpdmVkJiZ0aGlzLl93YXRjaGVyLnJlYWRSZWNlaXB0UmVjZWl2ZWQoe2NvbnZlcnNhdGlvblR5cGU6ZS5jb252ZXJzYXRpb25UeXBlLHRhcmdldElkOmUudGFyZ2V0SWQsY2hhbm5lbElkOmUuY2hhbm5lbElkfSxlLmNvbnRlbnQubWVzc2FnZVVJZCxlLmNvbnRlbnQubGFzdE1lc3NhZ2VTZW5kVGltZSl9ZWxzZSB0aGlzLl9NZXNzYWdlQmxvY2tlZExpc3RlbmVyKHtjb252ZXJzYXRpb25UeXBlOmUuY29udmVyc2F0aW9uVHlwZSx0YXJnZXRJZDplLnRhcmdldElkLGNoYW5uZWxJZDplLmNoYW5uZWxJZHx8XCJcIixibG9ja1R5cGU6ZS5jb250ZW50LmludGVyY2VwdFR5cGUsYmxvY2tlZE1lc3NhZ2VVSWQ6ZS5jb250ZW50Lm1zZ1VJZH0pO2Vsc2V7dmFyIGE9ZS5jb250ZW50LHU9YS5zdGFydFRpbWUsYz1hLmVuZFRpbWUsaD1hLnBsYXRmb3JtLGw9YS5sb2dJZCxkPWEudXJpLGY9YS5wYWNrYWdlTmFtZSxwPXtzdGFydFRpbWU6cGFyc2VJbnQodSksZW5kVGltZTpwYXJzZUludChjKSxwbGF0Zm9ybTpoLGxvZ0lkOmwsdXJpOmQscGFja2FnZU5hbWU6Zn07bnVsbD09PShyPWVzLmdldEluc3RhbmNlKCkpfHx2b2lkIDA9PT1yfHxyLnJlcG9ydEZ1bGxMb2cocCl9fWVsc2UgaWYoXCJmdW5jdGlvblwiPT10eXBlb2YgdGhpcy5fd2F0Y2hlci5jaGF0cm9vbVN0YXRlKXt2YXIgZz17fTtBcnJheS5pc0FycmF5KGUuY29udGVudC51c2VyTGlzdCkmJmUuY29udGVudC51c2VyTGlzdC5mb3JFYWNoKChmdW5jdGlvbihlKXtnW2UudXNlcklkXT1lLnN0YXR1c30pKSx0aGlzLl93YXRjaGVyLmNoYXRyb29tU3RhdGUoe3VzZXJDaGFuZ2U6e3VzZXJzOmcsY2hhdHJvb21JZDplLnRhcmdldElkfX0pfX1lbHNlIHRoaXMuX3dhdGNoZXIuY2hhdHJvb21TdGF0ZSh7dXNlckNoYW5nZTp7dXNlcnM6KGk9e30saVtlLnNlbmRlclVzZXJJZF09XCJSQzpDaHJtUXVpdE50ZlwiPT09ZS5tZXNzYWdlVHlwZT9QZS5RVUlUOlBlLkpPSU4saSksY2hhdHJvb21JZDplLnRhcmdldElkfX0pfSxlLnByb3RvdHlwZS5fYmF0Y2hNZXNzYWdlUmVjZWl2ZXI9ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXMscj1bXTtlLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciBzPWkuX21lc3NhZ2VSZWNlaXZlcihlLHQsbik7cyYmci5wdXNoKHMpfSkpLHIubGVuZ3RoJiZ0aGlzLl93YXRjaGVyLmJhdGNoTWVzc2FnZSYmdGhpcy5fd2F0Y2hlci5iYXRjaE1lc3NhZ2Uocil9LGUucHJvdG90eXBlLl9jaGF0cm9vbUluZm9MaXN0ZW5lcj1mdW5jdGlvbihlKXt0aGlzLl93YXRjaGVyLmNoYXRyb29tU3RhdGUmJnRoaXMuX3dhdGNoZXIuY2hhdHJvb21TdGF0ZShlKX0sZS5wcm90b3R5cGUuX2NvbnZlcnNhdGlvbkluZm9MaXN0ZW5lcj1mdW5jdGlvbihlKXt0aGlzLl93YXRjaGVyLmNvbnZlcnNhdGlvblN0YXRlJiZ0aGlzLl93YXRjaGVyLmNvbnZlcnNhdGlvblN0YXRlKGUpfSxlLnByb3RvdHlwZS5fZXhwYW5zaW9uSW5mb0xpc3RlbmVyPWZ1bmN0aW9uKGUpe3RoaXMuX3dhdGNoZXIuZXhwYW5zaW9uJiZ0aGlzLl93YXRjaGVyLmV4cGFuc2lvbihlKX0sZS5wcm90b3R5cGUuX3RhZ0xpc3RlbmVyPWZ1bmN0aW9uKCl7dGhpcy5fd2F0Y2hlci50YWcmJnRoaXMuX3dhdGNoZXIudGFnKCl9LGUucHJvdG90eXBlLl9jb252ZXJzYXRpb25UYWdMaXN0ZW5lcj1mdW5jdGlvbigpe3RoaXMuX3dhdGNoZXIuY29udmVyc2F0aW9uVGFnQ2hhbmdlZCYmdGhpcy5fd2F0Y2hlci5jb252ZXJzYXRpb25UYWdDaGFuZ2VkKCl9LGUucHJvdG90eXBlLl90eXBpbmdTdGF0dXNMaXN0ZW5lcj1mdW5jdGlvbihlKXt0aGlzLl93YXRjaGVyLnR5cGluZ1N0YXRlJiZ0aGlzLl93YXRjaGVyLnR5cGluZ1N0YXRlKGUpfSxlLnByb3RvdHlwZS5fcHVsbEZpbmlzaGVkTGlzdGVuZXI9ZnVuY3Rpb24oKXt0aGlzLl93YXRjaGVyLnB1bGxGaW5pc2hlZCYmdGhpcy5fd2F0Y2hlci5wdWxsRmluaXNoZWQoKX0sZS5wcm90b3R5cGUuX01lc3NhZ2VCbG9ja2VkTGlzdGVuZXI9ZnVuY3Rpb24oZSl7dGhpcy5fd2F0Y2hlci5tZXNzYWdlQmxvY2tlZCYmdGhpcy5fd2F0Y2hlci5tZXNzYWdlQmxvY2tlZChlKX0sZS5wcm90b3R5cGUuX3J0Y0RhdGFDaGFuZ2U9ZnVuY3Rpb24oZSx0KXt0aGlzLl9wbHVnaW5Db250ZXh0UXVldWUuZm9yRWFjaCgoZnVuY3Rpb24obil7bi5vbnJ0Y2RhdGFjaGFuZ2UmJm4ub25ydGNkYXRhY2hhbmdlKGUsdCl9KSl9LGUucHJvdG90eXBlLmFzc2lnbldhdGNoZXI9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztPYmplY3Qua2V5cyh0aGlzLl93YXRjaGVyKS5mb3JFYWNoKChmdW5jdGlvbihuKXtpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxuKSl7dmFyIGk9ZVtuXTt0Ll93YXRjaGVyW25dPWllKGkpfHxuZShpKT9pOnZvaWQgMH19KSl9LGUucHJvdG90eXBlLnJlc2V0V2F0Y2hlcj1mdW5jdGlvbigpe3ZhciBlPXRoaXM7T2JqZWN0LmtleXModGhpcy5fd2F0Y2hlcikuZm9yRWFjaCgoZnVuY3Rpb24odCl7ZS5fd2F0Y2hlclt0XT12b2lkIDB9KSl9LGUucHJvdG90eXBlLl9hZGRUeXBpbmdJbmZvPWZ1bmN0aW9uKGUpe3ZhciB0PWUuc2VuZGVyVXNlcklkLG49ZS5jb252ZXJzYXRpb25UeXBlLGk9ZS50YXJnZXRJZCxyPWUuY29udGVudCxzPWUuY2hhbm5lbElkLG89ci50eXBpbmdDb250ZW50VHlwZSxhPW4rXCIjXCIraStcIiNcIisoc3x8XCJcIik7dGhpcy5fdHlwaW5nSW5mb1thXXx8KHRoaXMuX3R5cGluZ0luZm9bYV09W10pO3ZhciB1PXRoaXMuX3R5cGluZ0luZm9bYV0uZmluZEluZGV4KChmdW5jdGlvbihlKXtyZXR1cm4gZS51c2VySWQ9PT10fSkpO3U+PTAmJnRoaXMuX3R5cGluZ0luZm9bYV1bdV0ubWVzc2FnZVR5cGU9PT1vP3RoaXMuX3R5cGluZ0luZm9bYV1bdV0udGltZXN0YW1wPURhdGUubm93KCk6KHU+PTAmJnRoaXMuX3R5cGluZ0luZm9bYV0uc3BsaWNlKHUsMSksdGhpcy5fdHlwaW5nSW5mb1thXS5wdXNoKHt1c2VySWQ6dCxtZXNzYWdlVHlwZTpvLHRpbWVzdGFtcDpEYXRlLm5vdygpfSksdGhpcy5fdHlwaW5nQ2hhbmdlZExpc3QuaW5jbHVkZXMoYSl8fHRoaXMuX3R5cGluZ0NoYW5nZWRMaXN0LnB1c2goYSksdGhpcy5fc3RhcnRDaGVja1R5cGluZ0luZm8oKSl9LGUucHJvdG90eXBlLl9zdGFydENoZWNrVHlwaW5nSW5mbz1mdW5jdGlvbigpe3ZhciBlPXRoaXM7LTE9PT10aGlzLl90eXBpbmdJbnRlcm5hbFRpbWVyJiYwIT09T2JqZWN0LmtleXModGhpcy5fdHlwaW5nSW5mbykubGVuZ3RoJiYodGhpcy5fdHlwaW5nSW50ZXJuYWxUaW1lcj1zZXRJbnRlcnZhbCgoZnVuY3Rpb24oKXtmb3IodmFyIHQgaW4gZS5fdHlwaW5nSW5mbyl7dmFyIG49ZS5fdHlwaW5nSW5mb1t0XS5sZW5ndGg7ZS5fdHlwaW5nSW5mb1t0XT1lLl90eXBpbmdJbmZvW3RdLmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuIERhdGUubm93KCktdC50aW1lc3RhbXA8ZS5fdHlwaW5nRXhwaXJlVGltZX0pKSxlLl90eXBpbmdJbmZvW3RdLmxlbmd0aD09PW58fGUuX3R5cGluZ0NoYW5nZWRMaXN0LmluY2x1ZGVzKHQpfHxlLl90eXBpbmdDaGFuZ2VkTGlzdC5wdXNoKHQpLDA9PT1lLl90eXBpbmdJbmZvW3RdLmxlbmd0aCYmZGVsZXRlIGUuX3R5cGluZ0luZm9bdF19aWYoZS5fdHlwaW5nQ2hhbmdlZExpc3QubGVuZ3RoPjApe3ZhciBpPWUuX3R5cGluZ0NoYW5nZWRMaXN0Lm1hcCgoZnVuY3Rpb24odCl7cmV0dXJue2NvbnZlcnNhdGlvblR5cGU6TnVtYmVyKHQuc3BsaXQoXCIjXCIpWzBdKSx0YXJnZXRJZDp0LnNwbGl0KFwiI1wiKVsxXSxjaGFubmVsSWQ6dC5zcGxpdChcIiNcIilbMl0sbGlzdDplLl90eXBpbmdJbmZvW3RdfHxbXX19KSk7ZS5fdHlwaW5nU3RhdHVzTGlzdGVuZXIoaSksZS5fdHlwaW5nQ2hhbmdlZExpc3Q9W119MD09PU9iamVjdC5rZXlzKGUuX3R5cGluZ0luZm8pLmxlbmd0aCYmKGNsZWFySW50ZXJ2YWwoZS5fdHlwaW5nSW50ZXJuYWxUaW1lciksZS5fdHlwaW5nSW50ZXJuYWxUaW1lcj0tMSl9KSw1MDApKX0sZS5wcm90b3R5cGUuZ2V0Q29ubmVjdGVkVGltZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9lbmdpbmUuZ2V0Q29ubmVjdGVkVGltZSgpfSxlLnByb3RvdHlwZS5nZXRTZXJ2ZXJUaW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VuZ2luZS5nZXRTZXJ2ZXJUaW1lKCl9LGUucHJvdG90eXBlLmdldERldmljZUlkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VuZ2luZS5nZXREZXZpY2VJZCgpfSxlLnByb3RvdHlwZS5nZXRDdXJyZW50VXNlcklkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VuZ2luZS5jdXJyZW50VXNlcklkfSxlLnByb3RvdHlwZS5nZXRDb25uZWN0aW9uU3RhdHVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Nvbm5lY3Rpb25TdGF0dXN9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInRva2VuXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90b2tlbn0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5jb25uZWN0PWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9ITEpLHcodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBpLHIscyxvLGEsdTtyZXR1cm4gYih0aGlzLChmdW5jdGlvbihjKXtzd2l0Y2goYy5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9jb25uZWN0aW9uU3RhdHVzPT09SWUuQ09OTkVDVEVEP1syLHtjb2RlOkVlLlNVQ0NFU1MsdXNlcklkOnRoaXMuX2VuZ2luZS5jdXJyZW50VXNlcklkfV06dGhpcy5fY29ubmVjdGlvblN0YXR1cz09PUllLkNPTk5FQ1RJTkc/WzIse2NvZGU6RWUuQklaX0VSUk9SX0NPTk5FQ1RJTkd9XTpcInN0cmluZ1wiIT10eXBlb2YgZXx8MD09PWUubGVuZ3RoP1syLHtjb2RlOkVlLlJDX0NPTk5fVVNFUl9PUl9QQVNTV0RfRVJST1J9XToodGhpcy5fdG9rZW49ZSxpPWUuc3BsaXQoXCJAXCIpLHI9aVsxXSxzPXI/ci5zcGxpdChcIjtcIikubWFwKChmdW5jdGlvbihlKXtyZXR1cm4vXmh0dHBzPzovLnRlc3QoZSk/ZTpcImh0dHBzOi8vXCIrZX0pKTpbXSxbNCx0aGlzLl9lbmdpbmUubmF2aS5nZXRJbmZvKHRoaXMuX2dldFRva2VuV2l0aG91dE5hdmkoKSxzLHQsdGhpcy5fb3B0aW9ucy5jaGVja0NBKV0pO2Nhc2UgMTpyZXR1cm4obz1jLnNlbnQoKSk/MT09PShudWxsPT1vP3ZvaWQgMDpvLnR5cGUpP1syLHtjb2RlOkVlLlBBQ0tBR0VfRU5WSVJPTk1FTlRfRVJST1J9XTooYT1qZS5nZXRJbmZvKCksWzQsdGhpcy5fZW5naW5lLmNvbm5lY3QodGhpcy5fZ2V0VG9rZW5XaXRob3V0TmF2aSgpLG8sbildKTpbMix7Y29kZTpFZS5SQ19OQVZJX1JFU09VUkNFX0VSUk9SfV07Y2FzZSAyOnJldHVybiB1PWMuc2VudCgpLHBlLl9faW5zZXJ0TG9nSW50b0RhdGFiYXNlKCksdSE9PVRlLlJFRElSRUNUP1szLDRdOih0aGlzLl9jb25uZWN0aW9uU3RhdHVzPUllLlJFRElSRUNULFs0LHRoaXMuY29ubmVjdChlLCEwKV0pO2Nhc2UgMzpyZXR1cm5bMixjLnNlbnQoKV07Y2FzZSA0OnJldHVybiB1PT09RWUuU1VDQ0VTUyYmKHBlLmluZm8oXCJjb25uZWN0IHN1Y2Nlc3MsIHVzZXJJZDogXCIrdGhpcy5fZW5naW5lLmN1cnJlbnRVc2VySWQpLDEhPT0obnVsbD09bz92b2lkIDA6by50eXBlKSYmdGhpcy5fZW5naW5lLnJlcG9ydFNES0luZm8mJnRoaXMuX2VuZ2luZS5yZXBvcnRTREtJbmZvKGEpLGVzLmluaXQoe3J1bnRpbWU6dGhpcy5fcnVudGltZSxsb2dTd2l0Y2g6KG51bGw9PW8/dm9pZCAwOm8ubG9nU3dpdGNoKXx8MCxsb2dQb2xpY3k6SlNPTi5wYXJzZSgobnVsbD09bz92b2lkIDA6by5sb2dQb2xpY3kpfHxcInt9XCIpLGFwcGtleTp0aGlzLmFwcGtleSx2ZXJzaW9uOnRoaXMuYXBpVmVyc2lvbix1c2VySWQ6dGhpcy5fZW5naW5lLmN1cnJlbnRVc2VySWR9KSxmZS5pbml0KHRoaXMuX2VuZ2luZS5jdXJyZW50VXNlcklkKSx0aGlzLl9pc0ludGVybmFsQ29ubmVjdGVkPSEwKSx1IT09RWUuU1VDQ0VTU3x8Z3QoKXx8MT09PW8ub3BlblVTJiZ0aGlzLl9wdWxsVXNlclNldHRpbmdzKCksdSE9PUVlLlNVQ0NFU1MmJih0aGlzLl9jb25uZWN0aW9uU3RhdHVzPUllLkNPTk5FQ1RJT05fQ0xPU0VEKSxbMix7Y29kZTp1LHVzZXJJZDp0aGlzLl9lbmdpbmUuY3VycmVudFVzZXJJZH1dfX0pKX0pKX0sZS5wcm90b3R5cGUuX3B1bGxVc2VyU2V0dGluZ3M9ZnVuY3Rpb24oKXtyZXR1cm4gdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIGIodGhpcywoZnVuY3Rpb24oZSl7cmV0dXJuWzJdfSkpfSkpfSxlLnByb3RvdHlwZS5kaXNjb25uZWN0PWZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuIHRoaXMuX2lzSW50ZXJuYWxDb25uZWN0ZWQ9ITEsY2xlYXJJbnRlcnZhbCh0aGlzLl90eXBpbmdJbnRlcm5hbFRpbWVyKSx0aGlzLl90eXBpbmdJbnRlcm5hbFRpbWVyPS0xLHRoaXMuX3R5cGluZ0luZm89e30sbnVsbD09PShlPWVzLmdldEluc3RhbmNlKCkpfHx2b2lkIDA9PT1lfHxlLmRpc3Ryb3koKSxwZS5fX2luc2VydExvZ0ludG9EYXRhYmFzZSgpLGZlLnJlc2V0KCksdGhpcy5fZW5naW5lLmRpc2Nvbm5lY3QoKSx0aGlzLl9wbHVnaW5Db250ZXh0UXVldWUuZm9yRWFjaCgoZnVuY3Rpb24oZSl7aWYoZS5vbmRpc2Nvbm5lY3QpdHJ5e2Uub25kaXNjb25uZWN0KCl9Y2F0Y2goZSl7cGUuZXJyb3IoXCJwbHVnaW4gZXJyb3IgPT5cIixlKX19KSksUHJvbWlzZS5yZXNvbHZlKCl9LGUucHJvdG90eXBlLnJlY29ubmVjdD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5faXNJbnRlcm5hbENvbm5lY3RlZD9Qcm9taXNlLnJlc29sdmUoe2NvZGU6RWUuQ0FOX05PVF9SRUNPTk5FQ1R9KTp0aGlzLmNvbm5lY3QodGhpcy5fZ2V0VG9rZW5XaXRob3V0TmF2aSgpLCExLGUpfSxlLnByb3RvdHlwZS5fZ2V0VG9rZW5XaXRob3V0TmF2aT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl90b2tlbi5yZXBsYWNlKC9ALiskLyxcIkBcIil9LGUucHJvdG90eXBlLmdldEluZm9Gcm9tQ2FjaGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZW5naW5lLm5hdmkuZ2V0SW5mb0Zyb21DYWNoZSh0aGlzLl9nZXRUb2tlbldpdGhvdXROYXZpKCkpfSxlLnByb3RvdHlwZS5yZWdpc3Rlck1lc3NhZ2VUeXBlPWZ1bmN0aW9uKGUsdCxuLGkscil7dm9pZCAwPT09aSYmKGk9W10pLHZvaWQgMD09PXImJihyPSExKSx0aGlzLl9lbmdpbmUucmVnaXN0ZXJNZXNzYWdlVHlwZShlLHQsbixpLHIpfSxlLnByb3RvdHlwZS5zZW5kTWVzc2FnZT1mdW5jdGlvbihlLHQsbixpKXt2YXIgcj10aGlzLmdldEluZm9Gcm9tQ2FjaGUoKTtpZigxPT09KChudWxsPT1yP3ZvaWQgMDpyLmdycFJSVmVyKXx8MCkmJm4ubWVzc2FnZVR5cGU9PT1SZS5SRUFEX1JFQ0VJUFRfUkVTUE9OU0UpcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7Y29kZTpFZS5SRUFEX1JFQ0VJUFRfRVJST1J9KTt2YXIgcz1KU09OLnN0cmluZ2lmeShuLmNvbnRlbnQpO3JldHVybiBWKHMpPjEzMTA3Mj9Qcm9taXNlLnJlc29sdmUoe2NvZGU6RWUuUkNfTVNHX0NPTlRFTlRfRVhDRUVEX0xJTUlUfSk6dGhpcy5fZW5naW5lLnNlbmRNZXNzYWdlKGUsdCxuLGkpfSxlLnByb3RvdHlwZS5zZW5kRXhwYW5zaW9uTWVzc2FnZT1mdW5jdGlvbihlKXtyZXR1cm4gdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHQsbixpLHIscyxvLGEsdSxjLGgsbCxkLGYscDtyZXR1cm4gYih0aGlzLChmdW5jdGlvbihnKXtzd2l0Y2goZy5sYWJlbCl7Y2FzZSAwOmlmKHQ9ZS5jaGFubmVsSWQsbj1lLmNvbnZlcnNhdGlvblR5cGUsaT1lLnRhcmdldElkLHI9ZS5tZXNzYWdlVUlkLHM9ZS5rZXlzLG89ZS5leHBhbnNpb24sYT1lLnJlbW92ZUFsbCwhZS5jYW5JbmNsdWRlRXhwYW5zaW9uKXJldHVyblsyLHtjb2RlOkVlLk1FU1NBR0VfS1ZfTk9UX1NVUFBPUlR9XTtpZih1PSExLGM9ITEsaD0hMSxuZShvKSlmb3IoZCBpbiBsPU9iamVjdC5rZXlzKG8pLmxlbmd0aCx1PWw+MjAsbylpZihmPW9bZF0sYz1KKGQpJiYhL15bQS1aYS16MC05Xz0rLV0rJC8udGVzdChkKSwoaD1kLmxlbmd0aD4zMnx8Zi5sZW5ndGg+NDA5Nil8fGMpYnJlYWs7cmV0dXJuIHV8fGg/WzIse2NvZGU6RWUuRVhQQU5TSU9OX0xJTUlUX0VYQ0VFVH1dOmM/WzIse2NvZGU6RWUuQklaX0VSUk9SX0lOVkFMSURfUEFSQU1FVEVSfV06KHA9e21pZDpyfSxvJiYocC5wdXQ9bykscyYmKHAuZGVsPXMpLGEmJihwLnJlbW92ZUFsbD0xKSxbNCx0aGlzLl9lbmdpbmUuc2VuZE1lc3NhZ2UobixpLHtjb250ZW50OnAsbWVzc2FnZVR5cGU6UmUuRVhQQU5TSU9OX05PVElGWSxjaGFubmVsSWQ6dH0pXSk7Y2FzZSAxOnJldHVyblsyLHtjb2RlOmcuc2VudCgpLmNvZGV9XX19KSl9KSl9LGUucHJvdG90eXBlLnNlbmRSZWFkUmVjZWlwdE1lc3NhZ2U9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB3KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgaTtyZXR1cm4gYih0aGlzLChmdW5jdGlvbihyKXtyZXR1cm4gaT10aGlzLmdldEluZm9Gcm9tQ2FjaGUoKSwwPT09KChudWxsPT1pP3ZvaWQgMDppLmdycFJSVmVyKXx8MCk/WzIse2NvZGU6RWUuUkVBRF9SRUNFSVBUX0VSUk9SLGRhdGE6XCJUaGUgcmVhZCByZWNlaXB0IHN3aXRjaCBpcyBub3Qgb24sIHBsZWFzZSBjYWxsIHRoZSBzZW5kTWVzc2FnZSBtZXRob2QhXCJ9XTpbMix0aGlzLl9lbmdpbmUuc2VuZFJlYWRSZWNlaXB0TWVzc2FnZShlLHQsbildfSkpfSkpfSxlLnByb3RvdHlwZS5nZXRNZXNzYWdlUmVhZGVyPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIGk7cmV0dXJuIGIodGhpcywoZnVuY3Rpb24ocil7cmV0dXJuIGk9dGhpcy5nZXRJbmZvRnJvbUNhY2hlKCksMD09PSgobnVsbD09aT92b2lkIDA6aS5ncnBSUlZlcil8fDApP1syLHtjb2RlOkVlLlJFQURfUkVDRUlQVF9FUlJPUn1dOlsyLHRoaXMuX2VuZ2luZS5nZXRNZXNzYWdlUmVhZGVyKGUsdCxuKV19KSl9KSl9LGUucHJvdG90eXBlLl9kZXN0cm95PWZ1bmN0aW9uKCl7dmFyIGU7dGhpcy5faXNJbnRlcm5hbENvbm5lY3RlZD0hMSx0aGlzLl93YXRjaGVyPXtiYXRjaE1lc3NhZ2U6dm9pZCAwLG1lc3NhZ2U6dm9pZCAwLGNvbnZlcnNhdGlvblN0YXRlOnZvaWQgMCxjaGF0cm9vbVN0YXRlOnZvaWQgMCxjb25uZWN0aW9uU3RhdGU6dm9pZCAwLHJ0Y0lubmVyV2F0Y2hlcjp2b2lkIDAsZXhwYW5zaW9uOnZvaWQgMCx0YWc6dm9pZCAwLGNvbnZlcnNhdGlvblRhZ0NoYW5nZWQ6dm9pZCAwLHR5cGluZ1N0YXRlOnZvaWQgMCxwdWxsRmluaXNoZWQ6dm9pZCAwLG9uQ29ubmVjdGluZzp2b2lkIDAsb25Db25uZWN0ZWQ6dm9pZCAwLG9uRGlzY29ubmVjdDp2b2lkIDAsb25TdXNwZW5kOnZvaWQgMH0sdGhpcy5fZW5naW5lLmRpc2Nvbm5lY3QoKSx0aGlzLl9wbHVnaW5Db250ZXh0UXVldWUuZm9yRWFjaCgoZnVuY3Rpb24oZSl7aWYoZS5vbmRlc3Ryb3kpdHJ5e2Uub25kZXN0cm95KCl9Y2F0Y2goZSl7cGUuZXJyb3IoXCJwbHVnaW4gZXJyb3IgPT5cIixlKX19KSksdGhpcy5fcGx1Z2luQ29udGV4dFF1ZXVlLmxlbmd0aD0wLHRoaXMuX3BsdWdpbkluc3RhbnNlTWFwPXt9LG51bGw9PT0oZT1lcy5nZXRJbnN0YW5jZSgpKXx8dm9pZCAwPT09ZXx8ZS5kaXN0cm95KCksZmUucmVzZXQoKX0sZS5wcm90b3R5cGUuZ2V0SGlzdG9yeU1lc3NhZ2U9ZnVuY3Rpb24oZSx0LG4saSxyLHMsbyl7cmV0dXJuIHZvaWQgMD09PW4mJihuPTApLHZvaWQgMD09PWkmJihpPTIwKSx2b2lkIDA9PT1yJiYocj0wKSx2b2lkIDA9PT1zJiYocz1cIlwiKSx2b2lkIDA9PT1vJiYobz1cIlwiKSx0aGlzLl9lbmdpbmUuZ2V0SGlzdG9yeU1lc3NhZ2UoZSx0LG4saSxyLHMsb3x8XCJcIil9LGUucHJvdG90eXBlLmdldENvbnZlcnNhdGlvbkxpc3Q9ZnVuY3Rpb24oZSx0LG4saSxyKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9MzAwKSx2b2lkIDA9PT1yJiYocj1cIlwiKSx0aGlzLl9lbmdpbmUuZ2V0Q29udmVyc2F0aW9uTGlzdChlLHQsbixpLHIpfSxlLnByb3RvdHlwZS5nZXRDb252ZXJzYXRpb249ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB0aGlzLl9lbmdpbmUuZ2V0Q29udmVyc2F0aW9uKGUsdCxuKX0sZS5wcm90b3R5cGUucmVtb3ZlQ29udmVyc2F0aW9uPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdm9pZCAwPT09biYmKG49XCJcIiksdGhpcy5fZW5naW5lLnJlbW92ZUNvbnZlcnNhdGlvbihlLHQsbil9LGUucHJvdG90eXBlLmNsZWFyVW5yZWFkQ291bnQ9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB2b2lkIDA9PT1uJiYobj1cIlwiKSx0aGlzLl9lbmdpbmUuY2xlYXJDb252ZXJzYXRpb25VbnJlYWRDb3VudChlLHQsbil9LGUucHJvdG90eXBlLmNsZWFyQWxsVW5yZWFkQ291bnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZW5naW5lLmNsZWFyQWxsVW5yZWFkQ291bnQoKX0sZS5wcm90b3R5cGUuZ2V0VW5yZWFkQ291bnQ9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB2b2lkIDA9PT1uJiYobj1cIlwiKSx0aGlzLl9lbmdpbmUuZ2V0Q29udmVyc2F0aW9uVW5yZWFkQ291bnQoZSx0LG4pfSxlLnByb3RvdHlwZS5nZXRUb3RhbFVucmVhZENvdW50PWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdGhpcy5fZW5naW5lLmdldEFsbENvbnZlcnNhdGlvblVucmVhZENvdW50KGUsdCYmdC5sZW5ndGg+MD90OltqLlBSSVZBVEUsai5HUk9VUCxqLlNZU1RFTSxqLlBVQkxJQ19TRVJWSUNFXSwhIW4pfSxlLnByb3RvdHlwZS5nZXRGaXJzdFVucmVhZE1lc3NhZ2U9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB2b2lkIDA9PT1uJiYobj1cIlwiKSx0aGlzLl9lbmdpbmUuZ2V0Rmlyc3RVbnJlYWRNZXNzYWdlKGUsdCxuKX0sZS5wcm90b3R5cGUuc2V0Q29udmVyc2F0aW9uU3RhdHVzPWZ1bmN0aW9uKGUsdCxuLGkscil7dm9pZCAwPT09ciYmKHI9XCJcIik7dmFyIHM9W3tjb252ZXJzYXRpb25UeXBlOmUsdGFyZ2V0SWQ6dCxpc1RvcDpuLG5vdGlmaWNhdGlvblN0YXR1czppLGNoYW5uZWxJZDpyfV07cmV0dXJuIHRoaXMuX2VuZ2luZS5iYXRjaFNldENvbnZlcnNhdGlvblN0YXR1cyhzKX0sZS5wcm90b3R5cGUuc2F2ZUNvbnZlcnNhdGlvbk1lc3NhZ2VEcmFmdD1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gdm9pZCAwPT09aSYmKGk9XCJcIiksdGhpcy5fZW5naW5lLnNhdmVDb252ZXJzYXRpb25NZXNzYWdlRHJhZnQoZSx0LG4saSl9LGUucHJvdG90eXBlLmdldENvbnZlcnNhdGlvbk1lc3NhZ2VEcmFmdD1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHZvaWQgMD09PW4mJihuPVwiXCIpLHRoaXMuX2VuZ2luZS5nZXRDb252ZXJzYXRpb25NZXNzYWdlRHJhZnQoZSx0LG4pfSxlLnByb3RvdHlwZS5jbGVhckNvbnZlcnNhdGlvbk1lc3NhZ2VEcmFmdD1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHZvaWQgMD09PW4mJihuPVwiXCIpLHRoaXMuX2VuZ2luZS5jbGVhckNvbnZlcnNhdGlvbk1lc3NhZ2VEcmFmdChlLHQsbil9LGUucHJvdG90eXBlLnJlY2FsbE1lc3NhZ2U9ZnVuY3Rpb24oZSx0LG4saSxyKXtyZXR1cm4gdGhpcy5fZW5naW5lLnJlY2FsbE1zZyhlLHQsbixpLHIpfSxlLnByb3RvdHlwZS5kZWxldGVSZW1vdGVNZXNzYWdlPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiB2b2lkIDA9PT1pJiYoaT1cIlwiKSx0aGlzLl9lbmdpbmUuZGVsZXRlUmVtb3RlTWVzc2FnZShlLHQsbixpKX0sZS5wcm90b3R5cGUuZGVsZXRlUmVtb3RlTWVzc2FnZUJ5VGltZXN0YW1wPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiB2b2lkIDA9PT1pJiYoaT1cIlwiKSx0aGlzLl9lbmdpbmUuZGVsZXRlUmVtb3RlTWVzc2FnZUJ5VGltZXN0YW1wKGUsdCxuLGkpfSxlLnByb3RvdHlwZS5qb2luQ2hhdHJvb209ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9MTApLHRoaXMuX2VuZ2luZS5qb2luQ2hhdHJvb20oZSx0KX0sZS5wcm90b3R5cGUuam9pbkV4aXN0Q2hhdHJvb209ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9MTApLHRoaXMuX2VuZ2luZS5qb2luRXhpc3RDaGF0cm9vbShlLHQpfSxlLnByb3RvdHlwZS5xdWl0Q2hhdHJvb209ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2VuZ2luZS5xdWl0Q2hhdHJvb20oZSl9LGUucHJvdG90eXBlLmdldENoYXRyb29tSW5mbz1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHZvaWQgMD09PXQmJih0PTApLHZvaWQgMD09PW4mJihuPTApLHRoaXMuX2VuZ2luZS5nZXRDaGF0cm9vbUluZm8oZSx0LG4pfSxlLnByb3RvdHlwZS5zZXRDaGF0cm9vbUVudHJ5PWZ1bmN0aW9uKGUsdCl7dmFyIG49dC5rZXksaT10LnZhbHVlO3JldHVybiBhdChuKSYmdXQoaSk/dGhpcy5fZW5naW5lLnNldENoYXRyb29tRW50cnkoZSx0KTpQcm9taXNlLnJlc29sdmUoRWUuQklaX0VSUk9SX0lOVkFMSURfUEFSQU1FVEVSKX0sZS5wcm90b3R5cGUuc2V0Q2hhdHJvb21FbnRyaWVzPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPTA7bjx0LmVudHJpZXMubGVuZ3RoO24rKyl7dmFyIGk9dC5lbnRyaWVzW25dLHI9aS5rZXkscz1pLnZhbHVlO2lmKCFhdChyKXx8IXV0KHMpKXJldHVybiBQcm9taXNlLnJlc29sdmUoe2NvZGU6RWUuQklaX0VSUk9SX0lOVkFMSURfUEFSQU1FVEVSfSl9cmV0dXJuIHRoaXMuX2VuZ2luZS5zZXRDaGF0cm9vbUVudHJpZXMoZSx0KX0sZS5wcm90b3R5cGUuZm9yY2VTZXRDaGF0cm9vbUVudHJ5PWZ1bmN0aW9uKGUsdCl7dmFyIG49dC5rZXksaT10LnZhbHVlO3JldHVybiBhdChuKSYmdXQoaSk/dGhpcy5fZW5naW5lLmZvcmNlU2V0Q2hhdHJvb21FbnRyeShlLHQpOlByb21pc2UucmVzb2x2ZShFZS5CSVpfRVJST1JfSU5WQUxJRF9QQVJBTUVURVIpfSxlLnByb3RvdHlwZS5yZW1vdmVDaGF0cm9vbUVudHJ5PWZ1bmN0aW9uKGUsdCl7dmFyIG49dC5rZXk7cmV0dXJuIGF0KG4pP3RoaXMuX2VuZ2luZS5yZW1vdmVDaGF0cm9vbUVudHJ5KGUsdCk6UHJvbWlzZS5yZXNvbHZlKEVlLkJJWl9FUlJPUl9JTlZBTElEX1BBUkFNRVRFUil9LGUucHJvdG90eXBlLnJlbW92ZUNoYXRyb29tRW50cmllcz1mdW5jdGlvbihlLHQpe2Zvcih2YXIgbj0wO248dC5lbnRyaWVzLmxlbmd0aDtuKyspe3ZhciBpPXQuZW50cmllc1tuXS5rZXk7aWYoIWF0KGkpKXJldHVybiBQcm9taXNlLnJlc29sdmUoe2NvZGU6RWUuQklaX0VSUk9SX0lOVkFMSURfUEFSQU1FVEVSfSl9cmV0dXJuIHRoaXMuX2VuZ2luZS5yZW1vdmVDaGF0cm9vbUVudHJpZXMoZSx0KX0sZS5wcm90b3R5cGUuZm9yY2VSZW1vdmVDaGF0cm9vbUVudHJ5PWZ1bmN0aW9uKGUsdCl7dmFyIG49dC5rZXk7cmV0dXJuIGF0KG4pP3RoaXMuX2VuZ2luZS5mb3JjZVJlbW92ZUNoYXRyb29tRW50cnkoZSx0KTpQcm9taXNlLnJlc29sdmUoRWUuQklaX0VSUk9SX0lOVkFMSURfUEFSQU1FVEVSKX0sZS5wcm90b3R5cGUuZ2V0Q2hhdHJvb21FbnRyeT1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLl9lbmdpbmUuZ2V0Q2hhdHJvb21FbnRyeShlLHQpfSxlLnByb3RvdHlwZS5nZXRBbGxDaGF0cm9vbUVudHJpZXM9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2VuZ2luZS5nZXRBbGxDaGF0cm9vbUVudHJ5KGUpfSxlLnByb3RvdHlwZS5nZXRDaGF0cm9vbUhpc3RvcnlNZXNzYWdlcz1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9MjApLHZvaWQgMD09PW4mJihuPTApLHZvaWQgMD09PWkmJihpPTApLHRoaXMuX2VuZ2luZS5nZXRDaGF0cm9vbUhpc3RvcnlNZXNzYWdlcyhlLGksdCxuKX0sZS5wcm90b3R5cGUuZ2V0RmlsZVRva2VuPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiB3KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgcixzLG8sYSx1LGMsaDtyZXR1cm4gYih0aGlzLChmdW5jdGlvbihsKXtzd2l0Y2gobC5sYWJlbCl7Y2FzZSAwOnJldHVybiByPXRoaXMuZ2V0SW5mb0Zyb21DYWNoZSgpLHM9KG51bGw9PXI/dm9pZCAwOnIuYm9zQWRkcil8fFwiXCIsbz0obnVsbD09cj92b2lkIDA6ci51cGxvYWRTZXJ2ZXIpfHxcIlwiLGE9KG51bGw9PXI/dm9pZCAwOnIub3NzQ29uZmlnKXx8XCJcIixbNCx0aGlzLl9lbmdpbmUuZ2V0RmlsZVRva2VuKGUsdCxuLGkpXTtjYXNlIDE6cmV0dXJuIHU9bC5zZW50KCksYz11LmNvZGUsaD11LmRhdGEsYz09PUVlLlNVQ0NFU1M/WzIsUHJvbWlzZS5yZXNvbHZlKE9iamVjdC5hc3NpZ24oaCx7Ym9zOnMscWluaXU6byxvc3NDb25maWc6YX0pKV06WzIsUHJvbWlzZS5yZWplY3QoYyldfX0pKX0pKX0sZS5wcm90b3R5cGUuZ2V0RmlsZVVybD1mdW5jdGlvbihlLHQsbixpLHIpe3JldHVybiB2b2lkIDA9PT1yJiYocj1NZS5RSU5JVSksdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHMsbyxhO3JldHVybiBiKHRoaXMsKGZ1bmN0aW9uKHUpe3N3aXRjaCh1LmxhYmVsKXtjYXNlIDA6cmV0dXJuKG51bGw9PWk/dm9pZCAwOmkuaXNCb3NSZXMpP1syLFByb21pc2UucmVzb2x2ZShpKV06WzQsdGhpcy5fZW5naW5lLmdldEZpbGVVcmwoZSxyLHQsbildO2Nhc2UgMTpyZXR1cm4gcz11LnNlbnQoKSxvPXMuY29kZSxhPXMuZGF0YSxvPT09RWUuU1VDQ0VTUz9bMixQcm9taXNlLnJlc29sdmUoYSldOlsyLFByb21pc2UucmVqZWN0KG8pXX19KSl9KSl9LGUucHJvdG90eXBlLmNyZWF0ZVRhZz1mdW5jdGlvbihlKXtyZXR1cm4gdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIGIodGhpcywoZnVuY3Rpb24odCl7cmV0dXJuWzIsdGhpcy5fZW5naW5lLmNyZWF0ZVRhZyhlKV19KSl9KSl9LGUucHJvdG90eXBlLnJlbW92ZVRhZz1mdW5jdGlvbihlKXtyZXR1cm4gdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIGIodGhpcywoZnVuY3Rpb24odCl7cmV0dXJuWzIsdGhpcy5fZW5naW5lLnJlbW92ZVRhZyhlKV19KSl9KSl9LGUucHJvdG90eXBlLnVwZGF0ZVRhZz1mdW5jdGlvbihlKXtyZXR1cm4gdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIGIodGhpcywoZnVuY3Rpb24odCl7cmV0dXJuWzIsdGhpcy5fZW5naW5lLnVwZGF0ZVRhZyhlKV19KSl9KSl9LGUucHJvdG90eXBlLmdldFRhZ0xpc3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIGIodGhpcywoZnVuY3Rpb24oZSl7cmV0dXJuWzIsdGhpcy5fZW5naW5lLmdldFRhZ0xpc3QoKV19KSl9KSl9LGUucHJvdG90eXBlLmFkZFRhZ0ZvckNvbnZlcnNhdGlvbnM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIGIodGhpcywoZnVuY3Rpb24obil7cmV0dXJuIHQubGVuZ3RoPjFlMz9bMixQcm9taXNlLnJlamVjdChFZS5DT05WRVJfT1VUX0xJTUlUX0VSUk9SKV06WzIsdGhpcy5fZW5naW5lLmFkZFRhZ0ZvckNvbnZlcnNhdGlvbnMoZSx0KV19KSl9KSl9LGUucHJvdG90eXBlLnJlbW92ZVRhZ0ZvckNvbnZlcnNhdGlvbnM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIGIodGhpcywoZnVuY3Rpb24obil7cmV0dXJuWzIsdGhpcy5fZW5naW5lLnJlbW92ZVRhZ0ZvckNvbnZlcnNhdGlvbnMoZSx0KV19KSl9KSl9LGUucHJvdG90eXBlLnJlbW92ZVRhZ3NGb3JDb252ZXJzYXRpb249ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIGIodGhpcywoZnVuY3Rpb24obil7cmV0dXJuWzIsdGhpcy5fZW5naW5lLnJlbW92ZVRhZ3NGb3JDb252ZXJzYXRpb24oZSx0KV19KSl9KSl9LGUucHJvdG90eXBlLmdldENvbnZlcnNhdGlvbkxpc3RCeVRhZz1mdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIGIodGhpcywoZnVuY3Rpb24ocil7cmV0dXJuWzIsdGhpcy5fZW5naW5lLmdldENvbnZlcnNhdGlvbkxpc3RCeVRhZyhlLHQsbixpKV19KSl9KSl9LGUucHJvdG90eXBlLmdldFVucmVhZENvdW50QnlUYWc9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIGIodGhpcywoZnVuY3Rpb24obil7cmV0dXJuWzIsdGhpcy5fZW5naW5lLmdldFVucmVhZENvdW50QnlUYWcoZSx0KV19KSl9KSl9LGUucHJvdG90eXBlLnNldENvbnZlcnNhdGlvblN0YXR1c0luVGFnPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIGIodGhpcywoZnVuY3Rpb24oaSl7cmV0dXJuWzIsdGhpcy5fZW5naW5lLnNldENvbnZlcnNhdGlvblN0YXR1c0luVGFnKGUsdCxuKV19KSl9KSl9LGUucHJvdG90eXBlLmdldFRhZ3NGb3JDb252ZXJzYXRpb249ZnVuY3Rpb24oZSl7cmV0dXJuIHcodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiBiKHRoaXMsKGZ1bmN0aW9uKHQpe3JldHVyblsyLHRoaXMuX2VuZ2luZS5nZXRUYWdzRm9yQ29udmVyc2F0aW9uKGUpXX0pKX0pKX0sZS5wcm90b3R5cGUuZ2V0QmxvY2tDb252ZXJzYXRpb25MaXN0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VuZ2luZS5nZXRCbG9ja0NvbnZlcnNhdGlvbkxpc3QoKX0sZS5wcm90b3R5cGUuZ2V0VG9wQ29udmVyc2F0aW9uTGlzdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9lbmdpbmUuZ2V0VG9wQ29udmVyc2F0aW9uTGlzdCgpfSxlLnByb3RvdHlwZS5nZXRVbnJlYWRNZW50aW9uZWRDb3VudD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZW5naW5lLmdldFVucmVhZE1lbnRpb25lZENvdW50KGUpfSxlLnByb3RvdHlwZS5nZXRBbGxVbnJlYWRNZW50aW9uZWRDb3VudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9lbmdpbmUuZ2V0QWxsVW5yZWFkTWVudGlvbmVkQ291bnQoKX0sZS5wcm90b3R5cGUuZ2V0QWxsQ29udmVyc2F0aW9uU3RhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZW5naW5lLmdldEFsbENvbnZlcnNhdGlvblN0YXRlKCl9LGUucHJvdG90eXBlLmNhbGxFeHRyYT1mdW5jdGlvbihlKXtmb3IodmFyIHQsbj1bXSxpPTE7aTxhcmd1bWVudHMubGVuZ3RoO2krKyluW2ktMV09YXJndW1lbnRzW2ldO3JldHVybih0PXRoaXMuX2VuZ2luZSkuY2FsbEV4dHJhLmFwcGx5KHQsTShbZV0sbikpfSxlLnByb3RvdHlwZS5jbGVhckNvbnZlcnNhdGlvbnM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIGIodGhpcywoZnVuY3Rpb24obil7c3dpdGNoKG4ubGFiZWwpe2Nhc2UgMDpyZXR1cm5bNCx0aGlzLl9lbmdpbmUuY2xlYXJDb252ZXJzYXRpb25zKGUsdCldO2Nhc2UgMTpyZXR1cm5bMixuLnNlbnQoKV19fSkpfSkpfSxlLnByb3RvdHlwZS5zZXRVc2VyU3RhdHVzTGlzdGVuZXI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5fZW5naW5lLnNldFVzZXJTdGF0dXNMaXN0ZW5lcihlLChmdW5jdGlvbihlKXt0cnl7dChlKX1jYXRjaChlKXtwZS5lcnJvcihlKX19KSl9LGUucHJvdG90eXBlLmFkZFRvQmxhY2tsaXN0PWZ1bmN0aW9uKGUpe3JldHVybiB3KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXtyZXR1cm4gYih0aGlzLChmdW5jdGlvbih0KXtyZXR1cm5bMix0aGlzLl9lbmdpbmUuYWRkVG9CbGFja2xpc3QoZSldfSkpfSkpfSxlLnByb3RvdHlwZS5yZW1vdmVGcm9tQmxhY2tsaXN0PWZ1bmN0aW9uKGUpe3JldHVybiB3KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXtyZXR1cm4gYih0aGlzLChmdW5jdGlvbih0KXtyZXR1cm5bMix0aGlzLl9lbmdpbmUucmVtb3ZlRnJvbUJsYWNrbGlzdChlKV19KSl9KSl9LGUucHJvdG90eXBlLmdldEJsYWNrbGlzdD1mdW5jdGlvbigpe3JldHVybiB3KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXtyZXR1cm4gYih0aGlzLChmdW5jdGlvbihlKXtyZXR1cm5bMix0aGlzLl9lbmdpbmUuZ2V0QmxhY2tsaXN0KCldfSkpfSkpfSxlLnByb3RvdHlwZS5nZXRCbGFja2xpc3RTdGF0dXM9ZnVuY3Rpb24oZSl7cmV0dXJuIHcodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiBiKHRoaXMsKGZ1bmN0aW9uKHQpe3JldHVyblsyLHRoaXMuX2VuZ2luZS5nZXRCbGFja2xpc3RTdGF0dXMoZSldfSkpfSkpfSxlLnByb3RvdHlwZS5pbnNlcnRNZXNzYWdlPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIGIodGhpcywoZnVuY3Rpb24oaSl7cmV0dXJuWzIsdGhpcy5fZW5naW5lLmluc2VydE1lc3NhZ2UoZSx0LG4pXX0pKX0pKX0sZS5wcm90b3R5cGUuZGVsZXRlTWVzc2FnZXM9ZnVuY3Rpb24oZSl7cmV0dXJuIHcodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiBiKHRoaXMsKGZ1bmN0aW9uKHQpe3JldHVyblsyLHRoaXMuX2VuZ2luZS5kZWxldGVNZXNzYWdlcyhlKV19KSl9KSl9LGUucHJvdG90eXBlLmRlbGV0ZU1lc3NhZ2VzQnlUaW1lc3RhbXA9ZnVuY3Rpb24oZSx0LG4saSxyKXtyZXR1cm4gdm9pZCAwPT09ciYmKHI9XCJcIiksdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIGIodGhpcywoZnVuY3Rpb24ocyl7cmV0dXJuWzIsdGhpcy5fZW5naW5lLmRlbGV0ZU1lc3NhZ2VzQnlUaW1lc3RhbXAoZSx0LG4saSxyKV19KSl9KSl9LGUucHJvdG90eXBlLmNsZWFyTWVzc2FnZXM9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB2b2lkIDA9PT1uJiYobj1cIlwiKSx3KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXtyZXR1cm4gYih0aGlzLChmdW5jdGlvbihpKXtyZXR1cm5bMix0aGlzLl9lbmdpbmUuY2xlYXJNZXNzYWdlcyhlLHQsbildfSkpfSkpfSxlLnByb3RvdHlwZS5nZXRNZXNzYWdlPWZ1bmN0aW9uKGUpe3JldHVybiB3KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXtyZXR1cm4gYih0aGlzLChmdW5jdGlvbih0KXtyZXR1cm5bMix0aGlzLl9lbmdpbmUuZ2V0TWVzc2FnZShlKV19KSl9KSl9LGUucHJvdG90eXBlLnNldE1lc3NhZ2VDb250ZW50PWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIGIodGhpcywoZnVuY3Rpb24oaSl7cmV0dXJuWzIsdGhpcy5fZW5naW5lLnNldE1lc3NhZ2VDb250ZW50KGUsdCxuKV19KSl9KSl9LGUucHJvdG90eXBlLnNldE1lc3NhZ2VTZWFyY2hGaWVsZD1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHcodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiBiKHRoaXMsKGZ1bmN0aW9uKGkpe3JldHVyblsyLHRoaXMuX2VuZ2luZS5zZXRNZXNzYWdlU2VhcmNoRmllbGQoZSx0LG4pXX0pKX0pKX0sZS5wcm90b3R5cGUuc2V0TWVzc2FnZVNlbnRTdGF0dXM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIGIodGhpcywoZnVuY3Rpb24obil7cmV0dXJuWzIsdGhpcy5fZW5naW5lLnNldE1lc3NhZ2VTZW50U3RhdHVzKGUsdCldfSkpfSkpfSxlLnByb3RvdHlwZS5zZXRNZXNzYWdlUmVjZWl2ZWRTdGF0dXM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIGIodGhpcywoZnVuY3Rpb24obil7cmV0dXJuWzIsdGhpcy5fZW5naW5lLnNldE1lc3NhZ2VSZWNlaXZlZFN0YXR1cyhlLHQpXX0pKX0pKX0sZS5wcm90b3R5cGUuc2V0VXNlclN0YXR1cz1mdW5jdGlvbihlKXtyZXR1cm4gdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIGIodGhpcywoZnVuY3Rpb24odCl7cmV0dXJuWzIsdGhpcy5fZW5naW5lLnNldFVzZXJTdGF0dXMoZSldfSkpfSkpfSxlLnByb3RvdHlwZS5zdWJzY3JpYmVVc2VyU3RhdHVzPWZ1bmN0aW9uKGUpe3JldHVybiB3KHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXtyZXR1cm4gYih0aGlzLChmdW5jdGlvbih0KXtyZXR1cm5bMix0aGlzLl9lbmdpbmUuc3Vic2NyaWJlVXNlclN0YXR1cyhlKV19KSl9KSl9LGUucHJvdG90eXBlLmdldFVzZXJTdGF0dXM9ZnVuY3Rpb24oZSl7cmV0dXJuIHcodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiBiKHRoaXMsKGZ1bmN0aW9uKHQpe3JldHVyblsyLHRoaXMuX2VuZ2luZS5nZXRVc2VyU3RhdHVzKGUpXX0pKX0pKX0sZS5wcm90b3R5cGUuc2VhcmNoQ29udmVyc2F0aW9uQnlDb250ZW50PWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiB2b2lkIDA9PT10JiYodD1bXSksdm9pZCAwPT09biYmKG49XCJcIiksdyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIGIodGhpcywoZnVuY3Rpb24ocil7cmV0dXJuWzIsdGhpcy5fZW5naW5lLnNlYXJjaENvbnZlcnNhdGlvbkJ5Q29udGVudChlLHQsbixpKV19KSl9KSl9LGUucHJvdG90eXBlLnNlYXJjaE1lc3NhZ2VCeUNvbnRlbnQ9ZnVuY3Rpb24oZSx0LG4saSxyLHMsbyl7cmV0dXJuIHZvaWQgMD09PW8mJihvPVwiXCIpLHcodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiBiKHRoaXMsKGZ1bmN0aW9uKGEpe3JldHVyblsyLHRoaXMuX2VuZ2luZS5zZWFyY2hNZXNzYWdlQnlDb250ZW50KGUsdCxuLGkscixzLG8pXX0pKX0pKX0sZS5wcm90b3R5cGUuZ2V0VW5yZWFkTWVudGlvbmVkTWVzc2FnZXM9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB2b2lkIDA9PT1uJiYobj1cIlwiKSx0aGlzLl9lbmdpbmUuZ2V0VW5yZWFkTWVudGlvbmVkTWVzc2FnZXMoZSx0LG4pfSxlLnByb3RvdHlwZS5jbGVhclVucmVhZENvdW50QnlUaW1lc3RhbXA9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIHZvaWQgMD09PWkmJihpPVwiXCIpLHRoaXMuX2VuZ2luZS5jbGVhclVucmVhZENvdW50QnlUaW1lc3RhbXAoZSx0LG4saSl9LGUucHJvdG90eXBlLmdldENvbnZlcnNhdGlvbk5vdGlmaWNhdGlvblN0YXR1cz1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHZvaWQgMD09PW4mJihuPVwiXCIpLHRoaXMuX2VuZ2luZS5nZXRDb252ZXJzYXRpb25Ob3RpZmljYXRpb25TdGF0dXMoZSx0LG4pfSxlLnByb3RvdHlwZS5nZXRSZW1vdGVIaXN0b3J5TWVzc2FnZXM9ZnVuY3Rpb24oZSx0LG4saSxyLHMpe3JldHVybiB0aGlzLl9lbmdpbmUuZ2V0UmVtb3RlSGlzdG9yeU1lc3NhZ2VzKGUsdCxuLGkscixzKX0sZS5wcm90b3R5cGUuZ2V0Q29udmVyc2F0aW9uTGlzdFdpdGhBbGxDaGFubmVsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VuZ2luZS5nZXRDb252ZXJzYXRpb25MaXN0V2l0aEFsbENoYW5uZWwoKX0sZS5wcm90b3R5cGUuZ2V0Q29udmVyc2F0aW9uTGlzdFdpdGhBbGxDaGFubmVsQnlQYWdlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX2VuZ2luZS5nZXRDb252ZXJzYXRpb25MaXN0V2l0aEFsbENoYW5uZWxCeVBhZ2UoZSx0KX0sZS5wcm90b3R5cGUuam9pblJUQ1Jvb209ZnVuY3Rpb24oZSx0LG4saSxyLHMpe3JldHVybiB0aGlzLl9lbmdpbmUuam9pblJUQ1Jvb20oZSx0LG4saSxyLHMpfSxlLnByb3RvdHlwZS5xdWl0UlRDUm9vbT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZW5naW5lLnF1aXRSVENSb29tKGUpfSxlLnByb3RvdHlwZS5ydGNQaW5nPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdGhpcy5fZW5naW5lLnJ0Y1BpbmcoZSx0LG4pfSxlLnByb3RvdHlwZS5nZXRSVENSb29tSW5mbz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZW5naW5lLmdldFJUQ1Jvb21JbmZvKGUpfSxlLnByb3RvdHlwZS5nZXRSVENVc2VySW5mb0xpc3Q9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2VuZ2luZS5nZXRSVENVc2VySW5mb0xpc3QoZSl9LGUucHJvdG90eXBlLmdldFJUQ1VzZXJJbmZvPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9lbmdpbmUuZ2V0UlRDVXNlckluZm8oZSl9LGUucHJvdG90eXBlLnNldFJUQ1VzZXJJbmZvPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdGhpcy5fZW5naW5lLnNldFJUQ1VzZXJJbmZvKGUsdCxuKX0sZS5wcm90b3R5cGUucmVtb3ZlUlRDVXNlckluZm89ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5fZW5naW5lLnJlbW92ZVJUQ1VzZXJJbmZvKGUsdCl9LGUucHJvdG90eXBlLnNldFJUQ0RhdGE9ZnVuY3Rpb24oZSx0LG4saSxyLHMpe3JldHVybiB0aGlzLl9lbmdpbmUuc2V0UlRDRGF0YShlLHQsbixpLHIscyl9LGUucHJvdG90eXBlLnNldFJUQ1RvdGFsUmVzPWZ1bmN0aW9uKGUsdCxuLGkscil7cmV0dXJuIHZvaWQgMD09PXImJihyPVwiXCIpLHRoaXMuX2VuZ2luZS5zZXRSVENUb3RhbFJlcyhlLHQsbixpLHIpfSxlLnByb3RvdHlwZS5zZXRSVENDRE5VcmlzPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdGhpcy5fZW5naW5lLnNldFJUQ0NETlVyaXMoZSx0LG4pfSxlLnByb3RvdHlwZS5nZXRSVENEYXRhPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiB0aGlzLl9lbmdpbmUuZ2V0UlRDRGF0YShlLHQsbixpKX0sZS5wcm90b3R5cGUucmVtb3ZlUlRDRGF0YT1mdW5jdGlvbihlLHQsbixpLHIpe3JldHVybiB0aGlzLl9lbmdpbmUucmVtb3ZlUlRDRGF0YShlLHQsbixpLHIpfSxlLnByb3RvdHlwZS5zZXRSVENPdXREYXRhPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiB0aGlzLl9lbmdpbmUuc2V0UlRDT3V0RGF0YShlLHQsbixpKX0sZS5wcm90b3R5cGUuZ2V0UlRDT3V0RGF0YT1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLl9lbmdpbmUuZ2V0UlRDT3V0RGF0YShlLHQpfSxlLnByb3RvdHlwZS5nZXRSVENUb2tlbj1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHRoaXMuX2VuZ2luZS5nZXRSVENUb2tlbihlLHQsbil9LGUucHJvdG90eXBlLnNldFJUQ1N0YXRlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX2VuZ2luZS5zZXRSVENTdGF0ZShlLHQpfSxlLnByb3RvdHlwZS5nZXRSVENVc2VyTGlzdD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZW5naW5lLmdldFJUQ1VzZXJMaXN0KGUpfSxlLnByb3RvdHlwZS5qb2luTGl2aW5nUm9vbUFzQXVkaWVuY2U9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiB0aGlzLl9lbmdpbmUuam9pbkxpdmluZ1Jvb21Bc0F1ZGllbmNlKGUsdCxuKX0sZS5wcm90b3R5cGUucXVpdExpdmluZ1Jvb21Bc0F1ZGllbmNlPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9lbmdpbmUucXVpdExpdmluZ1Jvb21Bc0F1ZGllbmNlKGUpfSxlLnByb3RvdHlwZS5ydGNJZGVudGl0eUNoYW5nZT1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHRoaXMuX2VuZ2luZS5ydGNJZGVudGl0eUNoYW5nZShlLHQsbil9LGUucHJvdG90eXBlLmdldFJUQ0pvaW5lZFVzZXJJbmZvPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9lbmdpbmUuZ2V0UlRDSm9pbmVkVXNlckluZm8oZSl9LGUucHJvdG90eXBlLnJlcXVlc3RSb29tUEs9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2VuZ2luZS5yZXF1ZXN0Um9vbVBLKGUpfSxlLnByb3RvdHlwZS5jYW5jZWxSb29tUEs9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2VuZ2luZS5jYW5jZWxSb29tUEsoZSl9LGUucHJvdG90eXBlLnJlc3BvbnNlUm9vbVBLPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9lbmdpbmUucmVzcG9uc2VSb29tUEsoZSl9LGUucHJvdG90eXBlLmVuZFJvb21QSz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZW5naW5lLmVuZFJvb21QSyhlKX0sZX0oKTshZnVuY3Rpb24oZSl7ZVtlLmFkZD0xXT1cImFkZFwiLGVbZS51cGRhdGU9Ml09XCJ1cGRhdGVcIixlW2UuZGVsZXRlPTNdPVwiZGVsZXRlXCJ9KG5zfHwobnM9e30pKTt2YXIgcnM9XCI1LjEuMlwiO1xuXG5cbi8vIyBzb3VyY2VVUkw9d2VicGFjazovL0Byb25nY2xvdWQvcmN2b2ljZXJvb21saWItdjEvLi9ub2RlX21vZHVsZXMvQHJvbmdjbG91ZC9lbmdpbmUvZGlzdC9pbmRleC5lc20uanM/Iik7LyoqKi99LC8qKiovIi4vbm9kZV9tb2R1bGVzL0Byb25nY2xvdWQvaW1saWItbmV4dC9kaXN0L2luZGV4LmVzbS5qcyI6LyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlwKICAhKioqIC4vbm9kZV9tb2R1bGVzL0Byb25nY2xvdWQvaW1saWItbmV4dC9kaXN0L2luZGV4LmVzbS5qcyAqKiohCiAgXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLyAvKioqL2Z1bmN0aW9uIG5vZGVfbW9kdWxlc1JvbmdjbG91ZEltbGliTmV4dERpc3RJbmRleEVzbUpzKF9fdW51c2VkX3dlYnBhY2tfbW9kdWxlLF9fd2VicGFja19leHBvcnRzX18sX193ZWJwYWNrX3JlcXVpcmVfXyl7ZXZhbCgiX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIHtcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJDb25uZWN0aW9uU3RhdHVzXCI6ICgpID0+ICgvKiByZWV4cG9ydCBzYWZlICovIF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQ29ubmVjdGlvblN0YXR1cyksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiQ29udmVyc2F0aW9uVHlwZVwiOiAoKSA9PiAoLyogcmVleHBvcnQgc2FmZSAqLyBfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkNvbnZlcnNhdGlvblR5cGUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIkVycm9yQ29kZVwiOiAoKSA9PiAoLyogcmVleHBvcnQgc2FmZSAqLyBfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiTG9nTGV2ZWxcIjogKCkgPT4gKC8qIHJlZXhwb3J0IHNhZmUgKi8gX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Mb2dMZXZlbCksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiTWVudGlvbmVkVHlwZVwiOiAoKSA9PiAoLyogcmVleHBvcnQgc2FmZSAqLyBfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLk1lbnRpb25lZFR5cGUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIk1lc3NhZ2VCbG9ja1R5cGVcIjogKCkgPT4gKC8qIHJlZXhwb3J0IHNhZmUgKi8gX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5NZXNzYWdlQmxvY2tUeXBlKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJNZXNzYWdlRGlyZWN0aW9uXCI6ICgpID0+ICgvKiByZWV4cG9ydCBzYWZlICovIF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uTWVzc2FnZURpcmVjdGlvbiksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiTm90aWZpY2F0aW9uU3RhdHVzXCI6ICgpID0+ICgvKiByZWV4cG9ydCBzYWZlICovIF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uTm90aWZpY2F0aW9uU3RhdHVzKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJSZWNlaXZlZFN0YXR1c1wiOiAoKSA9PiAoLyogcmVleHBvcnQgc2FmZSAqLyBfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLlJlY2VpdmVkU3RhdHVzKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJVcGxvYWRNZXRob2RcIjogKCkgPT4gKC8qIHJlZXhwb3J0IHNhZmUgKi8gX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5VcGxvYWRNZXRob2QpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIkJhc2VNZXNzYWdlXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIFplKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJDb21iaW5lTWVzc2FnZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBjdCksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiQ29ubmVjdFR5cGVcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gQW4pLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIkV2ZW50c1wiOiAoKSA9PiAoLyogYmluZGluZyAqLyBVKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJGaWxlTWVzc2FnZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyB1dCksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiR0lGTWVzc2FnZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBkdCksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiSFFWb2ljZU1lc3NhZ2VcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gcnQpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIkltYWdlTWVzc2FnZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBhdCksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiTG9jYXRpb25NZXNzYWdlXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIGd0KSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJNZXNzYWdlVHlwZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBQbiksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiUmVmZXJlbmNlTWVzc2FnZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBmdCksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiUmljaENvbnRlbnRNZXNzYWdlXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIG10KSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJTaWdodE1lc3NhZ2VcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gaXQpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIlRleHRNZXNzYWdlXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHN0KSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJWb2ljZU1lc3NhZ2VcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gbHQpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIl9fYWRkU0RLVmVyc2lvblwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBDZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiYWRkQ29udmVyc2F0aW9uc1RvVGFnXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIE9uKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJhZGRFdmVudExpc3RlbmVyXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIGhlKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJhZGRUYWdcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gVG4pLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImNsZWFyQWxsTWVzc2FnZXNVbnJlYWRTdGF0dXNcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gX2UpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImNsZWFyRXZlbnRMaXN0ZW5lcnNcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gU2UpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImNsZWFySGlzdG9yeU1lc3NhZ2VzXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIGFuKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJjbGVhck1lc3NhZ2VzXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHZuKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJjbGVhck1lc3NhZ2VzVW5yZWFkU3RhdHVzXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIE1lKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJjbGVhclRleHRNZXNzYWdlRHJhZnRcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gUmUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImNsZWFyVW5yZWFkQ291bnRCeVRpbWVzdGFtcFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBTbiksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiY29ubmVjdFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBkZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZGVsZXRlTG9jYWxNZXNzYWdlc0J5VGltZXN0YW1wXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHBuKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJkZWxldGVNZXNzYWdlc1wiOiAoKSA9PiAoLyogYmluZGluZyAqLyBvbiksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZGlzY29ubmVjdFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBsZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZm9yY2VSZW1vdmVDaGF0Um9vbUVudHJ5XCI6ICgpID0+ICgvKiBiaW5kaW5nICovIEplKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJmb3JjZVNldENoYXRSb29tRW50cnlcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gamUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImdldEFsbENoYXRSb29tRW50cmllc1wiOiAoKSA9PiAoLyogYmluZGluZyAqLyBRZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZ2V0QWxsQ29udmVyc2F0aW9uU3RhdGVcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gSGUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImdldEFsbFVucmVhZE1lbnRpb25lZENvdW50XCI6ICgpID0+ICgvKiBiaW5kaW5nICovIERlKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJnZXRCbG9ja2VkQ29udmVyc2F0aW9uTGlzdFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBiZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZ2V0Q2hhdFJvb21FbnRyeVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBZZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZ2V0Q2hhdFJvb21JbmZvXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIFZlKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJnZXRDaGF0cm9vbUhpc3RvcnlNZXNzYWdlc1wiOiAoKSA9PiAoLyogYmluZGluZyAqLyAkZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZ2V0Q29ubmVjdGlvblN0YXR1c1wiOiAoKSA9PiAoLyogYmluZGluZyAqLyBnZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZ2V0Q29udmVyc2F0aW9uTGlzdFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBUZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZ2V0Q29udmVyc2F0aW9uTm90aWZpY2F0aW9uU3RhdHVzXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHhlKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJnZXRDb252ZXJzYXRpb25zRnJvbVRhZ0J5UGFnZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBVbiksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZ2V0Q3VycmVudFVzZXJJZFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBtZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZ2V0RmlsZVRva2VuXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIEJ0KSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJnZXRGaWxlVXJsXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHF0KSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJnZXRGaXJzdFVucmVhZE1lc3NhZ2VcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gbG4pLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImdldEhpc3RvcnlNZXNzYWdlc1wiOiAoKSA9PiAoLyogYmluZGluZyAqLyBKdCksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZ2V0TWVzc2FnZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBmbiksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZ2V0TWVzc2FnZVJlYWRlclwiOiAoKSA9PiAoLyogYmluZGluZyAqLyB1biksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZ2V0UmVtb3RlSGlzdG9yeU1lc3NhZ2VzXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIFl0KSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJnZXRTZXJ2ZXJUaW1lXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIGZlKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJnZXRUYWdzXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIE5uKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJnZXRUYWdzRnJvbUNvbnZlcnNhdGlvblwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBSbiksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZ2V0VGV4dE1lc3NhZ2VEcmFmdFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyB5ZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZ2V0VG9wQ29udmVyc2F0aW9uTGlzdFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBQZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZ2V0VG90YWxVbnJlYWRDb3VudFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBPZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZ2V0VW5yZWFkQ291bnRcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gd2UpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImdldFVucmVhZENvdW50QnlUYWdcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8geG4pLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImdldFVucmVhZE1lbnRpb25lZENvdW50XCI6ICgpID0+ICgvKiBiaW5kaW5nICovIExlKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJnZXRVbnJlYWRNZW50aW9uZWRNZXNzYWdlc1wiOiAoKSA9PiAoLyogYmluZGluZyAqLyBtbiksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiaW5pdFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBjZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiaW5zZXJ0TWVzc2FnZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBnbiksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiaW5zdGFsbFBsdWdpblwiOiAoKSA9PiAoLyogYmluZGluZyAqLyB1ZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiam9pbkNoYXRSb29tXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIEJlKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJqb2luRXhpc3RDaGF0Um9vbVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBxZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwib25jZUV2ZW50TGlzdGVuZXJcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gcGUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcInF1aXRDaGF0Um9vbVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBGZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwicmVjYWxsTWVzc2FnZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBubiksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwicmVnaXN0ZXJNZXNzYWdlVHlwZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBkbiksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwicmVtb3ZlQ2hhdFJvb21FbnRyaWVzXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIFdlKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJyZW1vdmVDaGF0Um9vbUVudHJ5XCI6ICgpID0+ICgvKiBiaW5kaW5nICovIFhlKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJyZW1vdmVDb252ZXJzYXRpb25cIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gRWUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcInJlbW92ZUNvbnZlcnNhdGlvbnNGcm9tVGFnXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHduKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJyZW1vdmVFdmVudExpc3RlbmVyXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHZlKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJyZW1vdmVFdmVudExpc3RlbmVyc1wiOiAoKSA9PiAoLyogYmluZGluZyAqLyBJZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwicmVtb3ZlTWVzc2FnZUV4cGFuc2lvbkZvcktleVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBzbiksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwicmVtb3ZlVGFnXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIEVuKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJyZW1vdmVUYWdGcm9tQ29udmVyc2F0aW9uc1wiOiAoKSA9PiAoLyogYmluZGluZyAqLyBfbiksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwicmVtb3ZlVGFnc0Zyb21Db252ZXJzYXRpb25cIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gTW4pLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcInNhdmVUZXh0TWVzc2FnZURyYWZ0XCI6ICgpID0+ICgvKiBiaW5kaW5nICovIE5lKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJzZWFyY2hDb252ZXJzYXRpb25CeUNvbnRlbnRcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gSW4pLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcInNlYXJjaE1lc3NhZ2VzXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIGhuKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJzZW5kRmlsZU1lc3NhZ2VcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gS3QpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcInNlbmRIUVZvaWNlTWVzc2FnZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBYdCksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwic2VuZEltYWdlTWVzc2FnZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBqdCksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwic2VuZE1lc3NhZ2VcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gRnQpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcInNlbmRSZWFkUmVjZWlwdE1lc3NhZ2VcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gUXQpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcInNlbmRSZWFkUmVjZWlwdFJlcXVlc3RcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gJHQpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcInNlbmRSZWFkUmVjZWlwdFJlc3BvbnNlXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIFp0KSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJzZW5kUmVhZFJlY2VpcHRSZXNwb25zZVYyXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIGVuKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJzZW5kU2lnaHRNZXNzYWdlXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIFd0KSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJzZW5kU3luY1JlYWRTdGF0dXNNZXNzYWdlXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHRuKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJzZW5kVGV4dE1lc3NhZ2VcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gVnQpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcInNlbmRUeXBpbmdTdGF0dXNNZXNzYWdlXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIGNuKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJzZXRDaGF0Um9vbUVudHJpZXNcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gS2UpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcInNldENoYXRSb29tRW50cnlcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gemUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcInNldENvbnZlcnNhdGlvbk5vdGlmaWNhdGlvblN0YXR1c1wiOiAoKSA9PiAoLyogYmluZGluZyAqLyBVZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwic2V0Q29udmVyc2F0aW9uVG9Ub3BcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gQWUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcInNldENvbnZlcnNhdGlvblRvVG9wSW5UYWdcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gYm4pLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcInNldE1lc3NhZ2VSZWNlaXZlZFN0YXR1c1wiOiAoKSA9PiAoLyogYmluZGluZyAqLyBDbiksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwidXBkYXRlTWVzc2FnZUV4cGFuc2lvblwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBybiksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwidXBkYXRlVGFnXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHluKVxuLyogaGFybW9ueSBleHBvcnQgKi8gfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIEByb25nY2xvdWQvZW5naW5lICovIFwiLi9ub2RlX21vZHVsZXMvQHJvbmdjbG91ZC9lbmdpbmUvZGlzdC9pbmRleC5lc20uanNcIik7XG5cbi8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uXG5cblBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueVxucHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLlxuXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIXG5SRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFlcbkFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsIERJUkVDVCxcbklORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTVxuTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1Jcbk9USEVSIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBVU0UgT1JcblBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL3ZhciB5PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHk9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsbikmJihlW25dPXRbbl0pfSx5KGUsdCl9O3ZhciBOPWZ1bmN0aW9uKCl7cmV0dXJuIE49T2JqZWN0LmFzc2lnbnx8ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG49MSxvPWFyZ3VtZW50cy5sZW5ndGg7bjxvO24rKylmb3IodmFyIGEgaW4gdD1hcmd1bWVudHNbbl0pT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsYSkmJihlW2FdPXRbYV0pO3JldHVybiBlfSxOLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07ZnVuY3Rpb24gUihlLHQsbixvKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKSgoZnVuY3Rpb24oYSxyKXtmdW5jdGlvbiBpKGUpe3RyeXtjKG8ubmV4dChlKSl9Y2F0Y2goZSl7cihlKX19ZnVuY3Rpb24gcyhlKXt0cnl7YyhvLnRocm93KGUpKX1jYXRjaChlKXtyKGUpfX1mdW5jdGlvbiBjKGUpe3ZhciB0O2UuZG9uZT9hKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIG4/dDpuZXcgbigoZnVuY3Rpb24oZSl7ZSh0KX0pKSkudGhlbihpLHMpfWMoKG89by5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pKX1mdW5jdGlvbiBPKGUsdCl7dmFyIG4sbyxhLHIsaT17bGFiZWw6MCxzZW50OmZ1bmN0aW9uKCl7aWYoMSZhWzBdKXRocm93IGFbMV07cmV0dXJuIGFbMV19LHRyeXM6W10sb3BzOltdfTtyZXR1cm4gcj17bmV4dDpzKDApLHRocm93OnMoMSkscmV0dXJuOnMoMil9LFwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmKHJbU3ltYm9sLml0ZXJhdG9yXT1mdW5jdGlvbigpe3JldHVybiB0aGlzfSkscjtmdW5jdGlvbiBzKHIpe3JldHVybiBmdW5jdGlvbihzKXtyZXR1cm4gZnVuY3Rpb24ocil7aWYobil0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtmb3IoO2k7KXRyeXtpZihuPTEsbyYmKGE9MiZyWzBdP28ucmV0dXJuOnJbMF0/by50aHJvd3x8KChhPW8ucmV0dXJuKSYmYS5jYWxsKG8pLDApOm8ubmV4dCkmJiEoYT1hLmNhbGwobyxyWzFdKSkuZG9uZSlyZXR1cm4gYTtzd2l0Y2gobz0wLGEmJihyPVsyJnJbMF0sYS52YWx1ZV0pLHJbMF0pe2Nhc2UgMDpjYXNlIDE6YT1yO2JyZWFrO2Nhc2UgNDpyZXR1cm4gaS5sYWJlbCsrLHt2YWx1ZTpyWzFdLGRvbmU6ITF9O2Nhc2UgNTppLmxhYmVsKyssbz1yWzFdLHI9WzBdO2NvbnRpbnVlO2Nhc2UgNzpyPWkub3BzLnBvcCgpLGkudHJ5cy5wb3AoKTtjb250aW51ZTtkZWZhdWx0OmlmKCEoYT1pLnRyeXMsKGE9YS5sZW5ndGg+MCYmYVthLmxlbmd0aC0xXSl8fDYhPT1yWzBdJiYyIT09clswXSkpe2k9MDtjb250aW51ZX1pZigzPT09clswXSYmKCFhfHxyWzFdPmFbMF0mJnJbMV08YVszXSkpe2kubGFiZWw9clsxXTticmVha31pZig2PT09clswXSYmaS5sYWJlbDxhWzFdKXtpLmxhYmVsPWFbMV0sYT1yO2JyZWFrfWlmKGEmJmkubGFiZWw8YVsyXSl7aS5sYWJlbD1hWzJdLGkub3BzLnB1c2gocik7YnJlYWt9YVsyXSYmaS5vcHMucG9wKCksaS50cnlzLnBvcCgpO2NvbnRpbnVlfXI9dC5jYWxsKGUsaSl9Y2F0Y2goZSl7cj1bNixlXSxvPTB9ZmluYWxseXtuPWE9MH1pZig1JnJbMF0pdGhyb3cgclsxXTtyZXR1cm57dmFsdWU6clswXT9yWzFdOnZvaWQgMCxkb25lOiEwfX0oW3Isc10pfX19dmFyIHc9bmV3IF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uTG9nZ2VyKFwiUkNJTVwiKSxNPWZ1bmN0aW9uKCl7cmV0dXJuIShcInVuZGVmaW5lZFwiPT10eXBlb2YgdW5pfHwhZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtcImNhbklVc2VcIixcImdldFN5c3RlbUluZm9cIl0sbj0wLG89dC5sZW5ndGg7bjxvO24rKylpZighZVt0W25dXSlyZXR1cm4hMTtyZXR1cm4hMH0odW5pKSl9LF89TSgpO3ZhciBVLHg9e3RhZzpcImJyb3dzZXJcIixodHRwUmVxOmZ1bmN0aW9uKGUpe3ZhciB0PWUubWV0aG9kfHxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkh0dHBNZXRob2QuR0VULG49ZS50aW1lb3V0fHw2ZTQscj1lLmhlYWRlcnMsaT1lLnF1ZXJ5LHM9ZS5ib2R5LGM9KDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hcHBlbmRVcmwpKGUudXJsLGkpO3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24oZSl7dmFyIG8sYT0obz1cInVuZGVmaW5lZFwiIT10eXBlb2YgWE1MSHR0cFJlcXVlc3QmJlwid2l0aENyZWRlbnRpYWxzXCJpbiBuZXcgWE1MSHR0cFJlcXVlc3QsXCJ1bmRlZmluZWRcIiE9dHlwZW9mIFhNTEh0dHBSZXF1ZXN0JiZvP25ldyBYTUxIdHRwUmVxdWVzdDpcInVuZGVmaW5lZFwiIT10eXBlb2YgWERvbWFpblJlcXVlc3Q/bmV3IFhEb21haW5SZXF1ZXN0Om5ldyBBY3RpdmVYT2JqZWN0KFwiTWljcm9zb2Z0LlhNTEhUVFBcIikpLGk9XCJbb2JqZWN0IFhEb21haW5SZXF1ZXN0XVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpO2lmKGEub3Blbih0LGMpLHImJmEuc2V0UmVxdWVzdEhlYWRlcilmb3IodmFyIHUgaW4gcilhLnNldFJlcXVlc3RIZWFkZXIodSxyW3VdKTtpZihpKXthLnRpbWVvdXQ9bixhLm9ubG9hZD1mdW5jdGlvbigpe2Uoe2RhdGE6YS5yZXNwb25zZVRleHQsc3RhdHVzOmEuc3RhdHVzfHwyMDB9KX0sYS5vbmVycm9yPWZ1bmN0aW9uKCl7ZSh7c3RhdHVzOmEuc3RhdHVzfHwwfSl9LGEub250aW1lb3V0PWZ1bmN0aW9uKCl7ZSh7c3RhdHVzOmEuc3RhdHVzfHwwfSl9O3ZhciBkPVwib2JqZWN0XCI9PXR5cGVvZiBzP0pTT04uc3RyaW5naWZ5KHMpOnM7YS5zZW5kKGQpfWVsc2UgYS5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXs0PT09YS5yZWFkeVN0YXRlJiZlKHtkYXRhOmEucmVzcG9uc2VUZXh0LHN0YXR1czphLnN0YXR1c30pfSxhLm9uZXJyb3I9ZnVuY3Rpb24oKXtlKHtzdGF0dXM6YS5zdGF0dXN8fDB9KX0sc2V0VGltZW91dCgoZnVuY3Rpb24oKXtyZXR1cm4gZSh7c3RhdHVzOmEuc3RhdHVzfHwwfSl9KSxuKSxhLnNlbmQocyl9KSl9LGxvY2FsU3RvcmFnZTpudWxsPT09d2luZG93fHx2b2lkIDA9PT13aW5kb3c/dm9pZCAwOndpbmRvdy5sb2NhbFN0b3JhZ2Usc2Vzc2lvblN0b3JhZ2U6bnVsbD09PXdpbmRvd3x8dm9pZCAwPT09d2luZG93P3ZvaWQgMDp3aW5kb3cuc2Vzc2lvblN0b3JhZ2UsaXNTdXBwb3J0U29ja2V0OmZ1bmN0aW9uKCl7dmFyIGU9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFdlYlNvY2tldDtyZXR1cm4gZXx8dy53YXJuKFwid2Vic29ja2V0IG5vdCBzdXBwb3J0XCIpLGV9LHVzZU5hdmk6ITAsY29ubmVjdFBsYXRmb3JtOlwiXCIsaXNGcm9tVW5pYXBwOl8sY3JlYXRlV2ViU29ja2V0OmZ1bmN0aW9uKGUsdCl7dmFyIG49bmV3IFdlYlNvY2tldChlLHQpO3JldHVybiBuLmJpbmFyeVR5cGU9XCJhcnJheWJ1ZmZlclwiLHtvbkNsb3NlOmZ1bmN0aW9uKGUpe24ub25jbG9zZT1mdW5jdGlvbih0KXt2YXIgbj10LmNvZGUsbz10LnJlYXNvbjtlKG4sbyl9fSxvbkVycm9yOmZ1bmN0aW9uKGUpe24ub25lcnJvcj1lfSxvbk1lc3NhZ2U6ZnVuY3Rpb24oZSl7bi5vbm1lc3NhZ2U9ZnVuY3Rpb24odCl7ZSh0LmRhdGEpfX0sb25PcGVuOmZ1bmN0aW9uKGUpe24ub25vcGVuPWV9LHNlbmQ6ZnVuY3Rpb24oZSl7bi5zZW5kKGUpfSxjbG9zZTpmdW5jdGlvbihlLHQpe24uY2xvc2UoZSx0KX19fSxjcmVhdGVEYXRhQ2hhbm5lbDpmdW5jdGlvbihlLG8pe3JldHVybiB0aGlzLmlzU3VwcG9ydFNvY2tldCgpJiZcIndlYnNvY2tldFwiPT09bz9uZXcgX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5XZWJTb2NrZXRDaGFubmVsKHRoaXMsZSk6bmV3IF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQ29tZXRDaGFubmVsKHRoaXMsZSl9fSxiPU0oKSxBPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxuPTA7bjxhcmd1bWVudHMubGVuZ3RoO24rKyl0W25dPWFyZ3VtZW50c1tuXTt0cnl7cmV0dXJuIHd4W2VdLmFwcGx5KHd4LHQpfWNhdGNoKGUpe3cuZXJyb3IoZSl9fX0sUD17c2V0SXRlbTpBKFwic2V0U3RvcmFnZVN5bmNcIiksZ2V0SXRlbTpBKFwiZ2V0U3RvcmFnZVN5bmNcIikscmVtb3ZlSXRlbTpBKFwicmVtb3ZlU3RvcmFnZVN5bmNcIiksY2xlYXI6QShcImNsZWFyU3RvcmFnZVN5bmNcIil9LEw9e3RhZzpcIndlY2hhdFwiLGh0dHBSZXE6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5tZXRob2R8fF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uSHR0cE1ldGhvZC5HRVQsbj1lLnRpbWVvdXR8fDZlNCxpPWUuaGVhZGVycyxzPWUucXVlcnksYz1lLmJvZHksdT0oMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFwcGVuZFVybCkoZS51cmwscyk7cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbihlKXt3eC5yZXF1ZXN0KHt1cmw6dSxtZXRob2Q6dCxoZWFkZXJzOmksdGltZW91dDpuLGRhdGE6YyxzdWNjZXNzOmZ1bmN0aW9uKHQpe2Uoe2RhdGE6dC5kYXRhLHN0YXR1czp0LnN0YXR1c0NvZGV9KX0sZmFpbDpmdW5jdGlvbigpe2Uoe3N0YXR1czpfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5SQ19IVFRQX1JFUV9USU1FT1VUfSl9fSl9KSl9LGxvY2FsU3RvcmFnZTpQLHNlc3Npb25TdG9yYWdlOlAsaXNTdXBwb3J0U29ja2V0OmZ1bmN0aW9uKCl7cmV0dXJuITB9LHVzZU5hdmk6ITEsY29ubmVjdFBsYXRmb3JtOlwiTWluaVByb2dyYW1cIixpc0Zyb21VbmlhcHA6YixjcmVhdGVXZWJTb2NrZXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj13eC5jb25uZWN0U29ja2V0KHt1cmw6ZSxwcm90b2NvbHM6dH0pO3JldHVybntvbkNsb3NlOmZ1bmN0aW9uKGUpe24ub25DbG9zZSgoZnVuY3Rpb24odCl7ZSh0LmNvZGUsdC5yZWFzb24pfSkpfSxvbkVycm9yOmZ1bmN0aW9uKGUpe24ub25FcnJvcigoZnVuY3Rpb24odCl7ZSh0LmVyck1zZyl9KSl9LG9uTWVzc2FnZTpmdW5jdGlvbihlKXtuLm9uTWVzc2FnZSgoZnVuY3Rpb24odCl7ZSh0LmRhdGEpfSkpfSxvbk9wZW46ZnVuY3Rpb24oZSl7bi5vbk9wZW4oZSl9LHNlbmQ6ZnVuY3Rpb24oZSl7bi5zZW5kKHtkYXRhOmV9KX0sY2xvc2U6ZnVuY3Rpb24oZSx0KXtuLmNsb3NlKHtjb2RlOmUscmVhc29uOnR9KX19fSxjcmVhdGVEYXRhQ2hhbm5lbDpmdW5jdGlvbihlLG8pe3JldHVyblwid2Vic29ja2V0XCI9PT1vP25ldyBfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLldlYlNvY2tldENoYW5uZWwodGhpcyxlKTpuZXcgX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Db21ldENoYW5uZWwodGhpcyxlKX19LEQ9TSgpLEg9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLG49MDtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKXRbbl09YXJndW1lbnRzW25dO3RyeXtyZXR1cm4gbXlbZV0uYXBwbHkobXksdCl9Y2F0Y2goZSl7dy5lcnJvcihlKX19fSxrPXtzZXRJdGVtOkgoXCJzZXRTdG9yYWdlU3luY1wiKSxnZXRJdGVtOkgoXCJnZXRTdG9yYWdlU3luY1wiKSxyZW1vdmVJdGVtOkgoXCJyZW1vdmVTdG9yYWdlU3luY1wiKSxjbGVhcjpIKFwiY2xlYXJTdG9yYWdlU3luY1wiKX0sRz17dGFnOlwiYWxpcGF5XCIsaHR0cFJlcTpmdW5jdGlvbihlKXt2YXIgdD1lLm1ldGhvZHx8X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5IdHRwTWV0aG9kLkdFVCxuPWUudGltZW91dHx8NmU0LGk9ZS5oZWFkZXJzLHM9ZS5xdWVyeSxjPWUuYm9keSx1PSgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXBwZW5kVXJsKShlLnVybCxzKSxkPWUuZGF0YVR5cGV8fFwianNvblwiO3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24oZSl7bXkucmVxdWVzdCh7dXJsOnUsbWV0aG9kOnQsaGVhZGVyczppLHRpbWVvdXQ6bixkYXRhOmMsZGF0YVR5cGU6ZCxzdWNjZXNzOmZ1bmN0aW9uKHQpe2Uoe2RhdGE6dC5kYXRhLHN0YXR1czp0LnN0YXR1c30pfSxmYWlsOmZ1bmN0aW9uKCl7ZSh7c3RhdHVzOl9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlJDX0hUVFBfUkVRX1RJTUVPVVR9KX19KX0pKX0sbG9jYWxTdG9yYWdlOmssc2Vzc2lvblN0b3JhZ2U6ayxpc1N1cHBvcnRTb2NrZXQ6ZnVuY3Rpb24oKXtyZXR1cm4hMX0sdXNlTmF2aTohMSxjb25uZWN0UGxhdGZvcm06XCJNaW5pUHJvZ3JhbVwiLGlzRnJvbVVuaWFwcDpELGNyZWF0ZURhdGFDaGFubmVsOmZ1bmN0aW9uKGUsbyl7cmV0dXJuXCJ3ZWJzb2NrZXRcIj09PW8/bmV3IF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uV2ViU29ja2V0Q2hhbm5lbCh0aGlzLGUpOm5ldyBfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkNvbWV0Q2hhbm5lbCh0aGlzLGUpfX0sQj1NKCkscT1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sbj0wO248YXJndW1lbnRzLmxlbmd0aDtuKyspdFtuXT1hcmd1bWVudHNbbl07dHJ5e3JldHVybiBjb25zb2xlLmxvZyhcInR0XCIsdHQpLHR0W2VdLmFwcGx5KHR0LHQpfWNhdGNoKGUpe3cuZXJyb3IoZSl9fX0sRj17c2V0SXRlbTpxKFwic2V0U3RvcmFnZVN5bmNcIiksZ2V0SXRlbTpxKFwiZ2V0U3RvcmFnZVN5bmNcIikscmVtb3ZlSXRlbTpxKFwicmVtb3ZlU3RvcmFnZVN5bmNcIiksY2xlYXI6cShcImNsZWFyU3RvcmFnZVN5bmNcIil9LFY9e3RhZzpcInRvdXRpYW9cIixpc1N1cHBvcnRTb2NrZXQ6ZnVuY3Rpb24oKXtyZXR1cm4hMH0sdXNlTmF2aTohMSxjb25uZWN0UGxhdGZvcm06XCJNaW5pUHJvZ3JhbVwiLGlzRnJvbVVuaWFwcDpCLGxvY2FsU3RvcmFnZTpGLHNlc3Npb25TdG9yYWdlOkYsaHR0cFJlcTpmdW5jdGlvbihlKXtyZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKHQsbil7dHQucmVxdWVzdCh7dXJsOmUudXJsLGRhdGE6ZS5ib2R5LGhlYWRlcjplLmhlYWRlcnMsbWV0aG9kOmUubWV0aG9kLHN1Y2Nlc3M6ZnVuY3Rpb24oZSl7Y29uc29sZS5sb2coXCLosIPnlKjmiJDlip9cIixlLmRhdGEpO3ZhciBuPShudWxsPT1lP3ZvaWQgMDplLmRhdGEpfHx7fSxvPXtkYXRhOkpTT04uc3RyaW5naWZ5KG4pLHN0YXR1czplLnN0YXR1c0NvZGV9O3Qobyl9LGZhaWw6ZnVuY3Rpb24oZSl7Y29uc29sZS5sb2coXCLosIPnlKjlpLHotKVcIixlLmVyck1zZyksbih7ZGF0YTplLmVyck1zZ30pfX0pfSkpfSxjcmVhdGVXZWJTb2NrZXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj10dC5jb25uZWN0U29ja2V0KHt1cmw6ZSxwcm90b2NvbHM6dH0pO3JldHVybntvbk9wZW46ZnVuY3Rpb24oZSl7bi5vbk9wZW4oZSl9LG9uQ2xvc2U6ZnVuY3Rpb24oZSl7bi5vbkNsb3NlKChmdW5jdGlvbih0KXtyZXR1cm4gZSh0LmNvZGUsdC5yZWFzb24pfSkpfSxvbkVycm9yOmZ1bmN0aW9uKGUpe24ub25FcnJvcigoZnVuY3Rpb24odCl7cmV0dXJuIGUodC5lcnJNc2cpfSkpfSxvbk1lc3NhZ2U6ZnVuY3Rpb24oZSl7bi5vbk1lc3NhZ2UoKGZ1bmN0aW9uKHQpe3JldHVybiBlKHQuZGF0YSl9KSl9LHNlbmQ6ZnVuY3Rpb24oZSl7bi5zZW5kKHtkYXRhOmV9KX0sY2xvc2U6ZnVuY3Rpb24oZSx0KXtuLmNsb3NlKHtjb2RlOmUscmVhc29uOnR9KX19fSxjcmVhdGVEYXRhQ2hhbm5lbDpmdW5jdGlvbihlLG8pe3JldHVyblwid2Vic29ja2V0XCI9PT1vP25ldyBfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLldlYlNvY2tldENoYW5uZWwodGhpcyxlKTpuZXcgX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Db21ldENoYW5uZWwodGhpcyxlKX19LHo9TSgpLEs9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLG49MDtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKXRbbl09YXJndW1lbnRzW25dO3RyeXtyZXR1cm4gY29uc29sZS5sb2coXCJzd2FuXCIsc3dhbiksc3dhbltlXS5hcHBseShzd2FuLHQpfWNhdGNoKGUpe3cuZXJyb3IoZSl9fX0saj17c2V0SXRlbTpLKFwic2V0U3RvcmFnZVN5bmNcIiksZ2V0SXRlbTpLKFwiZ2V0U3RvcmFnZVN5bmNcIikscmVtb3ZlSXRlbTpLKFwicmVtb3ZlU3RvcmFnZVN5bmNcIiksY2xlYXI6SyhcImNsZWFyU3RvcmFnZVN5bmNcIil9LFg9e3RhZzpcImJhaWR1XCIsaXNTdXBwb3J0U29ja2V0OmZ1bmN0aW9uKCl7cmV0dXJuITB9LHVzZU5hdmk6ITEsY29ubmVjdFBsYXRmb3JtOlwiTWluaVByb2dyYW1cIixpc0Zyb21VbmlhcHA6eixsb2NhbFN0b3JhZ2U6aixzZXNzaW9uU3RvcmFnZTpqLGh0dHBSZXE6ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbih0LG4pe3N3YW4ucmVxdWVzdCh7dXJsOmUudXJsLGRhdGE6ZS5ib2R5LGhlYWRlcjplLmhlYWRlcnMsbWV0aG9kOmUubWV0aG9kLHN1Y2Nlc3M6ZnVuY3Rpb24oZSl7Y29uc29sZS5sb2coXCLosIPnlKjmiJDlip9cIixlLmRhdGEpO3ZhciBuPShudWxsPT1lP3ZvaWQgMDplLmRhdGEpfHx7fSxvPXtkYXRhOkpTT04uc3RyaW5naWZ5KG4pLHN0YXR1czplLnN0YXR1c0NvZGV9O3Qobyl9LGZhaWw6ZnVuY3Rpb24oZSl7Y29uc29sZS5sb2coXCLosIPnlKjlpLHotKVcIixlLmVycm9yQ29kZSksbih7ZGF0YTplLmVycm9yQ29kZX0pfX0pfSkpfSxjcmVhdGVXZWJTb2NrZXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj1zd2FuLmNvbm5lY3RTb2NrZXQoe3VybDplLHByb3RvY29sczp0fSk7cmV0dXJue29uT3BlbjpmdW5jdGlvbihlKXtuLm9uT3BlbihlKX0sb25DbG9zZTpmdW5jdGlvbihlKXtuLm9uQ2xvc2UoKGZ1bmN0aW9uKHQpe3JldHVybiBlKHQuY29kZSx0LnJlYXNvbil9KSl9LG9uRXJyb3I6ZnVuY3Rpb24oZSl7bi5vbkVycm9yKChmdW5jdGlvbih0KXtyZXR1cm4gZSh0LmVyck1zZyl9KSl9LG9uTWVzc2FnZTpmdW5jdGlvbihlKXtuLm9uTWVzc2FnZSgoZnVuY3Rpb24odCl7cmV0dXJuIGUodC5kYXRhKX0pKX0sc2VuZDpmdW5jdGlvbihlKXtuLnNlbmQoe2RhdGE6ZX0pfSxjbG9zZTpmdW5jdGlvbihlLHQpe24uY2xvc2Uoe2NvZGU6ZSxyZWFzb246dH0pfX19LGNyZWF0ZURhdGFDaGFubmVsOmZ1bmN0aW9uKGUsbyl7cmV0dXJuXCJ3ZWJzb2NrZXRcIj09PW8/bmV3IF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uV2ViU29ja2V0Q2hhbm5lbCh0aGlzLGUpOm5ldyBfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkNvbWV0Q2hhbm5lbCh0aGlzLGUpfX0sVz1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sbj0wO248YXJndW1lbnRzLmxlbmd0aDtuKyspdFtuXT1hcmd1bWVudHNbbl07dHJ5e3JldHVybiB1bmlbZV0uYXBwbHkodW5pLHQpfWNhdGNoKGUpe3cuZXJyb3IoZSl9fX0sSj17c2V0SXRlbTpXKFwic2V0U3RvcmFnZVN5bmNcIiksZ2V0SXRlbTpXKFwiZ2V0U3RvcmFnZVN5bmNcIikscmVtb3ZlSXRlbTpXKFwicmVtb3ZlU3RvcmFnZVN5bmNcIiksY2xlYXI6VyhcImNsZWFyU3RvcmFnZVN5bmNcIil9LFk9e3RhZzpcInVuaWFwcFwiLGh0dHBSZXE6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5tZXRob2R8fF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uSHR0cE1ldGhvZC5HRVQsbj1lLnRpbWVvdXR8fDZlNCxpPWUuaGVhZGVycyxzPWUucXVlcnksYz1lLmJvZHksdT0oMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFwcGVuZFVybCkoZS51cmwscyk7cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbihlKXt1bmkucmVxdWVzdCh7dXJsOnUsbWV0aG9kOnQsaGVhZGVyczppLHRpbWVvdXQ6bixkYXRhOmMsc3VjY2VzczpmdW5jdGlvbih0KXtlKHtkYXRhOnQuZGF0YSxzdGF0dXM6dC5zdGF0dXNDb2RlfSl9LGZhaWw6ZnVuY3Rpb24oKXtlKHtzdGF0dXM6X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuUkNfSFRUUF9SRVFfVElNRU9VVH0pfX0pfSkpfSxsb2NhbFN0b3JhZ2U6SixzZXNzaW9uU3RvcmFnZTpKLGlzU3VwcG9ydFNvY2tldDpmdW5jdGlvbigpe3JldHVybiEwfSx1c2VOYXZpOiEwLGNvbm5lY3RQbGF0Zm9ybTpcIlwiLGlzRnJvbVVuaWFwcDohMCxjcmVhdGVXZWJTb2NrZXQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj17Y29tcGxldGU6ZnVuY3Rpb24oKXt9LHVybDplLHByb3RvY29sczp0fSxvPXVuaS5jb25uZWN0U29ja2V0KG4pO3JldHVybntvbkNsb3NlOmZ1bmN0aW9uKGUpe28ub25DbG9zZSgoZnVuY3Rpb24odCl7ZSh0LmNvZGUsdC5yZWFzb24pfSkpfSxvbkVycm9yOmZ1bmN0aW9uKGUpe28ub25FcnJvcigoZnVuY3Rpb24odCl7ZSh0LmVyck1zZyl9KSl9LG9uTWVzc2FnZTpmdW5jdGlvbihlKXtvLm9uTWVzc2FnZSgoZnVuY3Rpb24odCl7ZSh0LmRhdGEpfSkpfSxvbk9wZW46ZnVuY3Rpb24oZSl7by5vbk9wZW4oZSl9LHNlbmQ6ZnVuY3Rpb24oZSl7by5zZW5kKHtkYXRhOmV9KX0sY2xvc2U6ZnVuY3Rpb24oZSx0KXtvLmNsb3NlKHtjb2RlOmUscmVhc29uOnR9KX19fSxjcmVhdGVEYXRhQ2hhbm5lbDpmdW5jdGlvbihlLG8pe3JldHVyblwid2Vic29ja2V0XCI9PT1vP25ldyBfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLldlYlNvY2tldENoYW5uZWwodGhpcyxlKTpuZXcgX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Db21ldENoYW5uZWwodGhpcyxlKX19LFE9ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuY2FuSVVzZSYmZS5nZXRTeXN0ZW1JbmZvfSwkPVwidW5kZWZpbmVkXCIhPXR5cGVvZiB1bmkmJlEodW5pKT9mdW5jdGlvbigpe3N3aXRjaChwcm9jZXNzLmVudi5WVUVfQVBQX1BMQVRGT1JNKXtjYXNlXCJhcHAtcGx1c1wiOnJldHVybiBZO2Nhc2VcIm1wLWJhaWR1XCI6cmV0dXJuIFg7Y2FzZVwibXAtdG91dGlhb1wiOnJldHVybiBWO2Nhc2VcIm1wLWFsaXBheVwiOnJldHVybiBHO2Nhc2VcIm1wLXdlaXhpblwiOnJldHVybiBMO2RlZmF1bHQ6cmV0dXJuIHh9fSgpOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB3eCYmUSh3eCk/TDpcInVuZGVmaW5lZFwiIT10eXBlb2YgbXkmJlEobXkpP0c6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHR0JiZRKHR0KT9WOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzd2FuJiZRKHN3YW4pP1g6eDtmdW5jdGlvbiBaKGUpe3ZhciB0PWUuY29udmVyc2F0aW9uVHlwZSxuPWUuY2hhbm5lbElkLG89ZS5tZXNzYWdlVHlwZSxhPWUuY29udGVudCxyPWUuc2VuZGVyVXNlcklkLHM9ZS50YXJnZXRJZCxjPWUuc2VudFRpbWUsdT1lLnJlY2VpdmVkVGltZSxkPWUubWVzc2FnZVVJZCxsPWUubWVzc2FnZURpcmVjdGlvbixnPWUuaXNQZXJzaXRlZCxmPWUuaXNDb3VudGVkLG09ZS5pc09mZkxpbmVNZXNzYWdlLGg9ZS5jYW5JbmNsdWRlRXhwYW5zaW9uLHA9ZS5leHBhbnNpb24sdj1lLnJlY2VpdmVkU3RhdHVzLEk9ZS5kaXNhYmxlTm90aWZpY2F0aW9uLFM9ZS5pc01lbnRpb25lZCxDPWUuaXNTdGF0dXNNZXNzYWdlLFQ9ZS5yZWFkUmVjZWlwdEluZm8sRT1lLnB1c2hDb25maWcseT1lLm1lc3NhZ2VJZDtyZXR1cm4gdnx8KHY9X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5SZWNlaXZlZFN0YXR1cy5VTlJFQUQpLHttZXNzYWdlVHlwZTpvLGNoYW5uZWxJZDpufHxcIlwiLGNvbnRlbnQ6YSxzZW5kZXJVc2VySWQ6cix0YXJnZXRJZDpzLGNvbnZlcnNhdGlvblR5cGU6dCxzZW50VGltZTpjLHJlY2VpdmVkVGltZTp1LG1lc3NhZ2VVSWQ6ZCxtZXNzYWdlRGlyZWN0aW9uOmwsaXNQZXJzaXRlZDpnLGlzQ291bnRlZDpmLGlzT2ZmTGluZU1lc3NhZ2U6bSxpc01lbnRpb25lZDpTLGRpc2FibGVOb3RpZmljYXRpb246SSxpc1N0YXR1c01lc3NhZ2U6QyxjYW5JbmNsdWRlRXhwYW5zaW9uOmgsZXhwYW5zaW9uOnAscmVjZWl2ZWRTdGF0dXM6dixyZWFkUmVjZWlwdEluZm86VCxwdXNoQ29uZmlnOkUsbWVzc2FnZUlkOnl9fSFmdW5jdGlvbihlKXtlLkNPTk5FQ1RJTkc9XCJDT05ORUNUSU5HXCIsZS5DT05ORUNURUQ9XCJDT05ORUNURURcIixlLkRJU0NPTk5FQ1Q9XCJESVNDT05ORUNUXCIsZS5TVVNQRU5EPVwiU1VTUEVORFwiLGUuTUVTU0FHRVM9XCJNRVNTQUdFU1wiLGUuUkVBRF9SRUNFSVBUX1JFQ0VJVkVEPVwiUkVBRF9SRUNFSVBUX1JFQ0VJVkVEXCIsZS5NRVNTQUdFX1JFQ0VJUFRfUkVRVUVTVD1cIk1FU1NBR0VfUkVDRUlQVF9SRVFVRVNUXCIsZS5NRVNTQUdFX1JFQ0VJUFRfUkVTUE9OU0U9XCJNRVNTQUdFX1JFQ0VJUFRfUkVTUE9OU0VcIixlLkNPTlZFUlNBVElPTj1cIkNPTlZFUlNBVElPTlwiLGUuQ0hBVFJPT009XCJDSEFUUk9PTVwiLGUuRVhQQU5TSU9OPVwiRVhQQU5TSU9OXCIsZS5QVUxMX09GRkxJTkVfTUVTU0FHRV9GSU5JU0hFRD1cIlBVTExfT0ZGTElORV9NRVNTQUdFX0ZJTklTSEVEXCIsZS5UQUc9XCJUQUdcIixlLkNPTlZFUlNBVElPTl9UQUc9XCJDT05WRVJTQVRJT05fVEFHXCIsZS5UWVBJTkdfU1RBVFVTPVwiVFlQSU5HX1NUQVRVU1wiLGUuTUVTU0FHRV9CTE9DS0VEPVwiTUVTU0FHRV9CTE9DS0VEXCJ9KFV8fChVPXt9KSk7dmFyIGVlLHRlPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQobil7dmFyIG89ZS5jYWxsKHRoaXMpfHx0aGlzO2lmKHQuaW1DbGllbnQpcmV0dXJuIHcuZXJyb3IoXCJQbGVhc2UgZG8gbm90IHJlcGVhdGVkbHkgcGVyZm9ybSB0aGUgaW5pdCBtZXRob2RcIiksdC5pbUNsaWVudDsoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJvcHRpb25zLm5hdmlnYXRvcnNcIixuLm5hdmlnYXRvcnMsKGZ1bmN0aW9uKGUpe3JldHVybiAoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmlzQXJyYXkpKGUpJiYoMD09PWUubGVuZ3RofHxlLmV2ZXJ5KF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uaXNIdHRwVXJsKSl9KSk7dmFyIGE9bnVsbD09bj92b2lkIDA6bi5jb25uZWN0VHlwZTtyZXR1cm4gYT9fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkNPTk5FQ1RJT05fVFlQRS5XRUJTT0NLRVQhPT1hJiZfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkNPTk5FQ1RJT05fVFlQRS5DT01FVCE9PWEmJih3Lndhcm4oXCJSb25nSU1MaWIgY29ubmVjdGlvblR5cGUgbXVzdCBiZSBcIitfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkNPTk5FQ1RJT05fVFlQRS5XRUJTT0NLRVQrXCIgb3IgXCIrX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5DT05ORUNUSU9OX1RZUEUuQ09NRVQpLGE9X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5DT05ORUNUSU9OX1RZUEUuV0VCU09DS0VUKTphPV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQ09OTkVDVElPTl9UWVBFLldFQlNPQ0tFVCxvLl9jb250ZXh0PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQVBJQ29udGV4dC5pbml0KCQse2FwcGtleTpuLmFwcGtleSxhcGlWZXJzaW9uOlwiNS4xLjJcIixuYXZpZ2F0b3JzOm4ubmF2aWdhdG9yc3x8W10sbWluaUNNUFByb3h5Om4uY3VzdG9tQ01QfHxbXSxjb25uZWN0aW9uVHlwZTphLGxvZ0xldmVsOm4ubG9nTGV2ZWwsbG9nU3Rkb3V0Om4ubG9nU3Rkb3V0LGluZGV4REJTd2l0Y2g6bi5pbmRleERCU3dpdGNoLGNoZWNrQ0E6bi5jaGVja0NBfSksby53YXRjaCgpLHQuaW1DbGllbnQ9byxvfXJldHVybiBmdW5jdGlvbihlLHQpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiK1N0cmluZyh0KStcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO2Z1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPWV9eShlLHQpLGUucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KG4ucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyBuKX0odCxlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJjb250ZXh0XCIse2dldDpmdW5jdGlvbigpe2lmKCF0aGlzLl9jb250ZXh0KXRocm93IG5ldyBFcnJvcihcIlBsZWFzZSBwZXJmb3JtIHRoZSBpbml0IG1ldGhvZCFcIik7cmV0dXJuIHRoaXMuX2NvbnRleHR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUud2F0Y2g9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9e29uQ29ubmVjdGluZzpmdW5jdGlvbigpe2UuZW1pdChVLkNPTk5FQ1RJTkcpfSxvbkNvbm5lY3RlZDpmdW5jdGlvbigpe2UuZW1pdChVLkNPTk5FQ1RFRCl9LG9uRGlzY29ubmVjdDpmdW5jdGlvbih0KXtlLmVtaXQoVS5ESVNDT05ORUNULHQpfSxvblN1c3BlbmQ6ZnVuY3Rpb24odCl7ZS5lbWl0KFUuU1VTUEVORCx0KX0sYmF0Y2hNZXNzYWdlOmZ1bmN0aW9uKHQpe2UuZW1pdChVLk1FU1NBR0VTLHttZXNzYWdlczp0Lm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIFooZSl9KSl9KX0sdHlwaW5nU3RhdGU6ZnVuY3Rpb24odCl7ZS5lbWl0KFUuVFlQSU5HX1NUQVRVUyx7c3RhdHVzOnR9KX0scmVhZFJlY2VpcHRSZWNlaXZlZDpmdW5jdGlvbih0LG4sbyl7ZS5lbWl0KFUuUkVBRF9SRUNFSVBUX1JFQ0VJVkVELHtjb252ZXJzYXRpb246dCxtZXNzYWdlVUlkOm4sc2VudFRpbWU6b30pfSxtZXNzYWdlUmVjZWlwdFJlcXVlc3Q6ZnVuY3Rpb24odCxuLG8pe2UuZW1pdChVLk1FU1NBR0VfUkVDRUlQVF9SRVFVRVNULHtjb252ZXJzYXRpb246dCxtZXNzYWdlVUlkOm4sc2VuZGVyVXNlcklkOm99KX0sbWVzc2FnZVJlY2VpcHRSZXNwb25zZTpmdW5jdGlvbih0LG4sbyl7ZS5lbWl0KFUuTUVTU0FHRV9SRUNFSVBUX1JFU1BPTlNFLHtjb252ZXJzYXRpb246dCxyZWNlaXZlZFVzZXJJZDpuLG1lc3NhZ2VVSWRMaXN0Om99KX0sY29udmVyc2F0aW9uU3RhdGU6ZnVuY3Rpb24odCl7dmFyIG49dC5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybntjb252ZXJzYXRpb246e2NvbnZlcnNhdGlvblR5cGU6ZS5jb252ZXJzYXRpb25UeXBlLGxhdGVzdE1lc3NhZ2U6ZS5sYXRlc3RNZXNzYWdlP1ooZS5sYXRlc3RNZXNzYWdlKTpudWxsLHRhcmdldElkOmUudGFyZ2V0SWQsdW5yZWFkTWVzc2FnZUNvdW50OmUudW5yZWFkTWVzc2FnZUNvdW50LGhhc01lbnRpb25lZDplLmhhc01lbnRpb25lZCxtZW50aW9uZWRJbmZvOmUubWVudGlvbmVkSW5mbyxsYXN0VW5yZWFkVGltZTplLmxhc3RVbnJlYWRUaW1lLG5vdGlmaWNhdGlvblN0YXR1czplLm5vdGlmaWNhdGlvblN0YXR1cyxpc1RvcDplLmlzVG9wLGNoYW5uZWxJZDplLmNoYW5uZWxJZCx1bnJlYWRNZW50aW9uZWRDb3VudDplLnVucmVhZE1lbnRpb25lZENvdW50fSx1cGRhdGVkSXRlbXM6ZS51cGRhdGVkSXRlbXN9fSkpO2UuZW1pdChVLkNPTlZFUlNBVElPTix7Y29udmVyc2F0aW9uTGlzdDpufSl9LGNoYXRyb29tU3RhdGU6ZnVuY3Rpb24odCl7ZS5lbWl0KFUuQ0hBVFJPT00sdCl9LGV4cGFuc2lvbjpmdW5jdGlvbih0KXtlLmVtaXQoVS5FWFBBTlNJT04sdCl9LHB1bGxGaW5pc2hlZDpmdW5jdGlvbigpe2UuZW1pdChVLlBVTExfT0ZGTElORV9NRVNTQUdFX0ZJTklTSEVEKX0sdGFnOmZ1bmN0aW9uKCl7ZS5lbWl0KFUuVEFHKX0sY29udmVyc2F0aW9uVGFnQ2hhbmdlZDpmdW5jdGlvbigpe2UuZW1pdChVLkNPTlZFUlNBVElPTl9UQUcpfSxtZXNzYWdlQmxvY2tlZDpmdW5jdGlvbih0KXtlLmVtaXQoVS5NRVNTQUdFX0JMT0NLRUQsdCl9fTt0aGlzLmNvbnRleHQuYXNzaWduV2F0Y2hlcih0KX0sdH0oX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FdmVudEVtaXR0ZXIpLG5lPXtUSU1FT1VUOntjb2RlOi0xLG1zZzpcIk5ldHdvcmsgdGltZW91dFwifSxTREtfSU5URVJOQUxfRVJST1I6e2NvZGU6LTIsbXNnOlwiU0RLIGludGVybmFsIGVycm9yXCJ9LFBBUkFNRVRFUl9FUlJPUjp7Y29kZTotMyxtc2c6XCJQbGVhc2UgY2hlY2sgdGhlIHBhcmFtZXRlcnMsIHRoZSB7cGFyYW19IGV4cGVjdGVkIGEgdmFsdWUgb2Yge2V4cGVjdH0gYnV0IHJlY2VpdmVkIHtjdXJyZW50fVwifSxSRUpFQ1RFRF9CWV9CTEFDS0xJU1Q6e2NvZGU6NDA1LG1zZzpcIkJsYWNrbGlzdGVkIGJ5IHRoZSBvdGhlciBwYXJ0eVwifSxTRU5EX1RPT19GQVNUOntjb2RlOjIwNjA0LG1zZzpcIlNlbmRpbmcgbWVzc2FnZXMgdG9vIHF1aWNrbHlcIn0sTk9UX0lOX0dST1VQOntjb2RlOjIyNDA2LG1zZzpcIk5vdCBpbiBncm91cFwifSxGT1JCSURERU5fSU5fR1JPVVA6e2NvZGU6MjI0MDgsbXNnOlwiRm9yYmJpZGVuIGZyb20gc3BlYWtpbmcgaW4gdGhlIGdyb3VwXCJ9LE5PVF9JTl9DSEFUUk9PTTp7Y29kZToyMzQwNixtc2c6XCJOb3QgaW4gY2hhdFJvb21cIn0sRk9SQklEREVOX0lOX0NIQVRST09NOntjb2RlOjIzNDA4LG1zZzpcIkZvcmJiaWRlbiBmcm9tIHNwZWFraW5nIGluIHRoZSBjaGF0Um9vbVwifSxLSUNLRURfRlJPTV9DSEFUUk9PTTp7Y29kZToyMzQwOSxtc2c6XCJLaWNrZWQgb3V0IGFuZCBmb3JiYmlkZW4gZnJvbSBqb2luaW5nIHRoZSBjaGF0Um9vbVwifSxDSEFUUk9PTV9OT1RfRVhJU1Q6e2NvZGU6MjM0MTAsbXNnOlwiQ2hhdFJvb20gZG9lcyBub3QgZXhpc3RcIn0sQ0hBVFJPT01fSVNfRlVMTDp7Y29kZToyMzQxMSxtc2c6XCJDaGF0Um9vbSBtZW1iZXJzIGV4Y2VlZGVkXCJ9LFBBUkFNRVRFUl9JTlZBTElEX0NIQVRST09NOntjb2RlOjIzNDEyLG1zZzpcIkludmFsaWQgY2hhdFJvb20gcGFyYW1ldGVyc1wifSxST0FNSU5HX1NFUlZJQ0VfVU5BVkFJTEFCTEVfQ0hBVFJPT006e2NvZGU6MjM0MTQsbXNnOlwiQ2hhdFJvb20gbWVzc2FnZSByb2FtaW5nIHNlcnZpY2UgaXMgbm90IG9wZW4sIFBsZWFzZSBnbyB0byB0aGUgZGV2ZWxvcGVyIHRvIG9wZW4gdGhpcyBzZXJ2aWNlXCJ9LFJFQ0FMTE1FU1NBR0VfUEFSQU1FVEVSX0lOVkFMSUQ6e2NvZGU6MjUxMDEsbXNnOlwiSW52YWxpZCByZWNhbGwgbWVzc2FnZSBwYXJhbWV0ZXJcIn0sUk9BTUlOR19TRVJWSUNFX1VOQVZBSUxBQkxFX01FU1NBR0U6e2NvZGU6MjUxMDIsbXNnOlwiU2luZ2xlIGdyb3VwIGNoYXQgcm9hbWluZyBzZXJ2aWNlIGlzIG5vdCBvcGVuLCBQbGVhc2UgZ28gdG8gdGhlIGRldmVsb3BlciB0byBvcGVuIHRoaXMgc2VydmljZVwifSxQVVNIU0VUVElOR19QQVJBTUVURVJfSU5WQUxJRDp7Y29kZToyNjAwMSxtc2c6XCJJbnZhbGlkIHB1c2ggcGFyYW1ldGVyXCJ9LE9QRVJBVElPTl9CTE9DS0VEOntjb2RlOjIwNjA1LG1zZzpcIk9wZXJhdGlvbiBpcyBibG9ja2VkXCJ9LE9QRVJBVElPTl9OT1RfU1VQUE9SVDp7Y29kZToyMDYwNixtc2c6XCJPcGVyYXRpb24gaXMgbm90IHN1cHBvcnRlZFwifSxNU0dfQkxPQ0tFRF9TRU5TSVRJVkVfV09SRDp7Y29kZToyMTUwMSxtc2c6XCJUaGUgc2VudCBtZXNzYWdlIGNvbnRhaW5zIHNlbnNpdGl2ZSB3b3Jkc1wifSxSRVBMQUNFRF9TRU5TSVRJVkVfV09SRDp7Y29kZToyMTUwMixtc2c6XCJTZW5zaXRpdmUgd29yZHMgaW4gdGhlIG1lc3NhZ2UgaGF2ZSBiZWVuIHJlcGxhY2VkXCJ9LE5PVF9DT05ORUNURUQ6e2NvZGU6MzAwMDEsbXNnOlwiUGxlYXNlIGNvbm5lY3Qgc3VjY2Vzc2Z1bGx5IGZpcnN0XCJ9LE5BVklfUkVRVUVTVF9FUlJPUjp7Y29kZTozMDAwNyxtc2c6XCJOYXZpZ2F0aW9uIGh0dHAgcmVxdWVzdCBmYWlsZWRcIn0sQ01QX1JFUVVFU1RfRVJST1I6e2NvZGU6MzAwMTAsbXNnOlwiQ01QIHNuaWZmIGh0dHAgcmVxdWVzdCBmYWlsZWRcIn0sQ09OTl9BUFBLRVlfRkFLRTp7Y29kZTozMTAwMixtc2c6XCJZb3VyIGFwcGtleSBpcyBmYWtlXCJ9LENPTk5fTUlOSV9TRVJWSUNFX05PVF9PUEVOOntjb2RlOjMxMDAzLG1zZzpcIk1pbmkgcHJvZ3JhbSBzZXJ2aWNlIGlzIG5vdCBvcGVuLCBQbGVhc2UgZ28gdG8gdGhlIGRldmVsb3BlciB0byBvcGVuIHRoaXMgc2VydmljZVwifSxDT05OX0FDS19USU1FT1VUOntjb2RlOjMxZTMsbXNnOlwiQ29ubmVjdGlvbiBBQ0sgdGltZW91dFwifSxDT05OX1RPS0VOX0lOQ09SUkVDVDp7Y29kZTozMTAwNCxtc2c6XCJZb3VyIHRva2VuIGlzIG5vdCB2YWxpZCBvciBleHBpcmVkXCJ9LENPTk5fTk9UX0FVVEhST1JJWkVEOntjb2RlOjMxMDA1LG1zZzpcIkFwcEtleSBhbmQgVG9rZW4gZG8gbm90IG1hdGNoXCJ9LENPTk5fUkVESVJFQ1RFRDp7Y29kZTozMTAwNixtc2c6XCJDb25uZWN0aW9uIHJlZGlyZWN0aW9uXCJ9LENPTk5fQVBQX0JMT0NLRURfT1JfREVMRVRFRDp7Y29kZTozMTAwOCxtc2c6XCJBcHBLZXkgaXMgYmFubmVkIG9yIGRlbGV0ZWRcIn0sQ09OTl9VU0VSX0JMT0NLRUQ6e2NvZGU6MzEwMDksbXNnOlwiVXNlciBibG9ja2VkXCJ9LENPTk5fRE9NQUlOX0lOQ09SUkVDVDp7Y29kZTozMTAxMixtc2c6XCJDb25uZWN0IGRvbWFpbiBlcnJvciwgUGxlYXNlIGNoZWNrIHRoZSBzZXQgc2VjdXJpdHkgZG9tYWluXCJ9LFJPQU1JTkdfU0VSVklDRV9VTkFWQUlMQUJMRTp7Y29kZTozMzAwNyxtc2c6XCJSb2FtaW5nIHNlcnZpY2UgY2xvdWQgaXMgbm90IG9wZW4sIFBsZWFzZSBnbyB0byB0aGUgZGV2ZWxvcGVyIHRvIG9wZW4gdGhpcyBzZXJ2aWNlXCJ9LFJDX0NPTk5FQ1RJT05fRVhJU1Q6e2NvZGU6MzQwMDEsbXNnOlwiQ29ubmVjdGlvbiBhbHJlYWR5IGV4aXN0c1wifSxDSEFUUk9PTV9LVl9FWENFRUQ6e2NvZGU6MjM0MjMsbXNnOlwiQ2hhdFJvb20gS1Ygc2V0dGluZyBleGNlZWRzIG1heGltdW1cIn0sQ0hBVFJPT01fS1ZfT1ZFUldSSVRFX0lOVkFMSUQ6e2NvZGU6MjM0MjQsbXNnOlwiQ2hhdFJvb20gS1YgYWxyZWFkeSBleGlzdHNcIn0sQ0hBVFJPT01fS1ZfU1RPUkVfTk9UX09QRU46e2NvZGU6MjM0MjYsbXNnOlwiQ2hhdFJvb20gS1Ygc3RvcmFnZSBzZXJ2aWNlIGlzIG5vdCBvcGVuLCBQbGVhc2UgZ28gdG8gdGhlIGRldmVsb3BlciB0byBvcGVuIHRoaXMgc2VydmljZVwifSxDSEFUUk9PTV9LRVlfTk9UX0VYSVNUOntjb2RlOjIzNDI3LG1zZzpcIkNoYXRSb29tIGtleSBkb2VzIG5vdCBleGlzdFwifSxNU0dfS1ZfTk9UX1NVUFBPUlQ6e2NvZGU6MzQwMDgsbXNnOlwiVGhlIG1lc3NhZ2UgY2Fubm90IGJlIGV4dGVuZGVkXCJ9LFNFTkRfTUVTU0FHRV9LVl9GQUlMOntjb2RlOjM0MDA5LG1zZzpcIlNlbmRpbmcgUkMgZXhwYW5zaW9uIG1lc3NhZ2UgZmFpbFwifSxFWFBBTlNJT05fTElNSVRfRVhDRUVUOntjb2RlOjM0MDEwLG1zZzpcIlRoZSBtZXNzYWdlIGV4cGFuc2lvbiBzaXplIGlzIGJleW9uZCB0aGUgbGltaXRcIn0sSUxMR0FMX1BBUkFNUzp7Y29kZTozMzAwMyxtc2c6XCJJbmNvcnJlY3QgcGFyYW1ldGVycyBwYXNzZWQgaW4gd2hpbGUgY2FsbGluZyB0aGUgaW50ZXJmYWNlXCJ9LFVQTE9BRF9GSUxFX0ZBSUxFRDp7Y29kZTozNTAyMCxtc2c6XCJGaWxlIHVwbG9hZCBmYWlsZWRcIn0sQ0hBVFJPT01fS1ZfU1RPUkVfTk9UX0FMTF9TVUNDRVNTOntjb2RlOjIzNDI4LG1zZzpcIkNoYXRyb29tIGt2IHN0b3JlIG5vdCBhbGwgc3VjY2Vzc1wifSxDSEFUUk9PTV9LVl9TVE9SRV9PVVRfTElNSVQ6e2NvZGU6MjM0MjksbXNnOlwiQ2hhdHJvb20ga3YncyBsZW5ndGggaXMgb3V0IG9mIGxpbWl0XCJ9LFRBR19FWElTVFM6e2NvZGU6MzMxMDEsbXNnOlwiVGhlIHRhZyBhbHJlYWR5IGV4aXN0c1wifSxUQUdfTk9UX0VYSVNUOntjb2RlOjMzMTAwLG1zZzpcIlRoZSB0YWcgZG9lcyBub3QgZXhpc3RcIn0sTk9UX1NVUFBPUlQ6e2NvZGU6X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuTk9UX1NVUFBPUlQsbXNnOlwiVGhlIG1ldGhvZCBpcyBub3Qgc3VwcG9ydGVkIGluIGEgYnJvd3NlciFcIn19LG9lPXt9LGFlPXt9O2Zvcih2YXIgcmUgaW4gbmUpe3ZhciBpZT1uZVtyZV0sc2U9aWUuY29kZTtvZVtzZV09cmUsYWVbc2VdPWllfW5lLlJPQU1JTkdfU0VSVklDRV9VTkFWQUlMQUJMRS5jb2RlO3ZhciBjZT1mdW5jdGlvbihlKXtlZT1lZXx8bmV3IHRlKGUpfTtmdW5jdGlvbiB1ZShlLHQpe3JldHVybiBudWxsPT1lZT92b2lkIDA6ZWUuY29udGV4dC5pbnN0YWxsKGUsdCl9ZnVuY3Rpb24gZGUoZSx0KXtyZXR1cm4gUih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG47cmV0dXJuIE8odGhpcywoZnVuY3Rpb24obyl7c3dpdGNoKG8ubGFiZWwpe2Nhc2UgMDpyZXR1cm4gKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwidG9rZW5cIixlLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuU1RSSU5HLCEwKSx3Lndhcm4oXCJSb25nSU1MaWIgVmVyc2lvbjogNS4xLjIsIENvbW1pdDogNWY4YzdlZjc5NWE0MjcxMTgxZmYzYmMyNmU4YjkwMDNlMzY5Mzk4OFwiKSxbNCxlZS5jb250ZXh0LmNvbm5lY3QoZSwhMSx0KV07Y2FzZSAxOnJldHVybihuPW8uc2VudCgpKS5jb2RlPT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUz9bMix7Y29kZTpuLmNvZGUsZGF0YTp7dXNlcklkOm4udXNlcklkfX1dOlsyLHtjb2RlOm4uY29kZSxtc2c6b2Vbbi5jb2RlXX1dfX0pKX0pKX1mdW5jdGlvbiBsZSgpe3JldHVybiBlZS5jb250ZXh0LmRpc2Nvbm5lY3QoKX1mdW5jdGlvbiBnZSgpe3JldHVybiBlZS5jb250ZXh0LmdldENvbm5lY3Rpb25TdGF0dXMoKX1mdW5jdGlvbiBmZSgpe3JldHVybiBlZS5jb250ZXh0LmdldFNlcnZlclRpbWUoKX1mdW5jdGlvbiBtZSgpe3JldHVybiBlZS5jb250ZXh0LmdldEN1cnJlbnRVc2VySWQoKX1mdW5jdGlvbiBoZShlLHQsbil7ZWUub24oZSx0LG4pfWZ1bmN0aW9uIHBlKGUsdCxuKXtlZS5vbmNlKGUsdCxuKX1mdW5jdGlvbiB2ZShlLHQsbil7ZWUub2ZmKGUsdCxuKX1mdW5jdGlvbiBJZShlKXtlZS5yZW1vdmVBbGwoZSl9ZnVuY3Rpb24gU2UoKXtlZS5jbGVhcigpfWZ1bmN0aW9uIENlKGUsdCl7X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5WZXJzaW9uTWFuYWdlLmFkZChlLHQpfWZ1bmN0aW9uIFRlKGUsdCl7cmV0dXJuIFIodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBuLG8sYSxpO3JldHVybiBPKHRoaXMsKGZ1bmN0aW9uKHMpe3N3aXRjaChzLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHcuZGVidWcoXCJnZXQgY29udmVyc2F0aW9uIGxpc3QgLT5cIiksWzQsdGUuaW1DbGllbnQuY29udGV4dC5nZXRDb252ZXJzYXRpb25MaXN0KG51bGw9PWU/dm9pZCAwOmUuY291bnQsdm9pZCAwLG51bGw9PWU/dm9pZCAwOmUuc3RhcnRUaW1lLG51bGw9PWU/dm9pZCAwOmUub3JkZXIsdCldO2Nhc2UgMTpyZXR1cm4gbj1zLnNlbnQoKSxvPW4uY29kZSxhPW4uZGF0YSxvPT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUyYmYT8oaT1hLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciB0PWUuY29udmVyc2F0aW9uVHlwZSxuPWUudGFyZ2V0SWQsbz1lLmxhdGVzdE1lc3NhZ2UsYT1lLnVucmVhZE1lc3NhZ2VDb3VudCxyPWUuaGFzTWVudGlvbmVkLGk9ZS5tZW50aW9uZWRJbmZvLHM9ZS5sYXN0VW5yZWFkVGltZSxjPWUubm90aWZpY2F0aW9uU3RhdHVzLHU9ZS5pc1RvcCxkPWUuY2hhbm5lbElkLGw9ZS51bnJlYWRNZW50aW9uZWRDb3VudDtyZXR1cm57Y29udmVyc2F0aW9uVHlwZTp0LHRhcmdldElkOm4sbGF0ZXN0TWVzc2FnZTpvJiZaKG8pLHVucmVhZE1lc3NhZ2VDb3VudDphLGhhc01lbnRpb25lZDpyLG1lbnRpb25lZEluZm86cj97dHlwZTpudWxsPT1pP3ZvaWQgMDppLnR5cGUsdXNlcklkTGlzdDpudWxsPT1pP3ZvaWQgMDppLnVzZXJJZExpc3R9OnZvaWQgMCxsYXN0VW5yZWFkVGltZTpzLG5vdGlmaWNhdGlvblN0YXR1czpjLGlzVG9wOnUsY2hhbm5lbElkOmQsdW5yZWFkTWVudGlvbmVkQ291bnQ6bH19KGUpfSkpLFsyLHtjb2RlOjAsZGF0YTppfV0pOih3Lndhcm4oXCJnZXQgY29udmVyc2F0aW9uIGxpc3QgZmFpbCAtPlwiK28rXCI6XCIrb2Vbb10pLFsyLHtjb2RlOm8sbXNnOm9lW29dfV0pfX0pKX0pKX1mdW5jdGlvbiBFZShlKXtyZXR1cm4gUih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHQsbjtyZXR1cm4gTyh0aGlzLChmdW5jdGlvbihvKXtzd2l0Y2goby5sYWJlbCl7Y2FzZSAwOnJldHVybiAoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJvcHRpb25zLmNvbnZlcnNhdGlvblR5cGVcIixlLmNvbnZlcnNhdGlvblR5cGUsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5pc1ZhbGlkQ29udmVyc2F0aW9uVHlwZSwhMCksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwib3B0aW9ucy50YXJnZXRJZFwiLGUudGFyZ2V0SWQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5TVFJJTkcsITApLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm9wdGlvbnMuY2hhbm5lbElkXCIsZS5jaGFubmVsSWQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5DSEFOTkVMX0lEKSxbNCx0ZS5pbUNsaWVudC5jb250ZXh0LnJlbW92ZUNvbnZlcnNhdGlvbihlLmNvbnZlcnNhdGlvblR5cGUsZS50YXJnZXRJZCxlLmNoYW5uZWxJZCldO2Nhc2UgMTpyZXR1cm4gdD1vLnNlbnQoKSxuPVwiY29udmVyc2F0aW9uVHlwZTpcIitlLmNvbnZlcnNhdGlvblR5cGUrXCIsdGFyZ2V0SWQ6XCIrZS50YXJnZXRJZCx3LmRlYnVnKFwiZGVzdHJveSBjb252ZXJzYXRpb24gLT5cIituKSx0IT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUz8ody53YXJuKFwiZGVzdHJveSBjb252ZXJzYXRpb24gZmFpbCAtPlwiK3QrXCI6XCIrb2VbdF0rXCIsXCIrbiksWzIse2NvZGU6dCxtc2c6b2VbdF19XSk6WzIse2NvZGU6dH1dfX0pKX0pKX1mdW5jdGlvbiB5ZShlKXtyZXR1cm4gUih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHQsbixvLGE7cmV0dXJuIE8odGhpcywoZnVuY3Rpb24oaSl7c3dpdGNoKGkubGFiZWwpe2Nhc2UgMDpyZXR1cm4gKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwib3B0aW9ucy5jb252ZXJzYXRpb25UeXBlXCIsZS5jb252ZXJzYXRpb25UeXBlLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uaXNWYWxpZENvbnZlcnNhdGlvblR5cGUsITApLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm9wdGlvbnMudGFyZ2V0SWRcIixlLnRhcmdldElkLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuU1RSSU5HLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJvcHRpb25zLmNoYW5uZWxJZFwiLGUuY2hhbm5lbElkLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuQ0hBTk5FTF9JRCksWzQsdGUuaW1DbGllbnQuY29udGV4dC5nZXRDb252ZXJzYXRpb25NZXNzYWdlRHJhZnQoZS5jb252ZXJzYXRpb25UeXBlLGUudGFyZ2V0SWQsZS5jaGFubmVsSWQpXTtjYXNlIDE6cmV0dXJuIHQ9aS5zZW50KCksbj10LmNvZGUsbz10LmRhdGEsYT1cImNvbnZlcnNhdGlvblR5cGU6XCIrZS5jb252ZXJzYXRpb25UeXBlK1wiLHRhcmdldElkOlwiK2UudGFyZ2V0SWQsdy5kZWJ1ZyhcImdldCBkcmFmdCAtPlwiK2EpLG49PT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTP1syLHtjb2RlOm4sZGF0YTpvfHxcIlwifV06KHcud2FybihcImdldCBkcmFmdCBmYWlsIC0+XCIrbitcIjpcIitvZVtuXStcIixcIithKSxbMix7Y29kZTpuLG1zZzpvZVtuXX1dKX19KSl9KSl9ZnVuY3Rpb24gTmUoZSx0KXtyZXR1cm4gUih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG4sbztyZXR1cm4gTyh0aGlzLChmdW5jdGlvbihhKXtzd2l0Y2goYS5sYWJlbCl7Y2FzZSAwOnJldHVybiAoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJvcHRpb25zLmNvbnZlcnNhdGlvblR5cGVcIixlLmNvbnZlcnNhdGlvblR5cGUsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5pc1ZhbGlkQ29udmVyc2F0aW9uVHlwZSwhMCksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwib3B0aW9ucy50YXJnZXRJZFwiLGUudGFyZ2V0SWQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5TVFJJTkcsITApLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm9wdGlvbnMuY2hhbm5lbElkXCIsZS5jaGFubmVsSWQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5DSEFOTkVMX0lEKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJkcmFmdFwiLHQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5TVFJJTkcsITApLG49XCJjb252ZXJzYXRpb25UeXBlOlwiK2UuY29udmVyc2F0aW9uVHlwZStcIix0YXJnZXRJZDpcIitlLnRhcmdldElkLHcuZGVidWcoXCJzZXQgZHJhZnQgLT5cIituKSxbNCx0ZS5pbUNsaWVudC5jb250ZXh0LnNhdmVDb252ZXJzYXRpb25NZXNzYWdlRHJhZnQoZS5jb252ZXJzYXRpb25UeXBlLGUudGFyZ2V0SWQsdCxlLmNoYW5uZWxJZCldO2Nhc2UgMTpyZXR1cm4obz1hLnNlbnQoKSk9PT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTP1syLHtjb2RlOm99XToody53YXJuKFwic2V0IGRyYWZ0IGZhaWwgLT5cIitvK1wiOlwiK29lW29dK1wiLFwiK24pLFsyLHtjb2RlOm8sbXNnOm9lW29dfV0pfX0pKX0pKX1mdW5jdGlvbiBSZShlKXtyZXR1cm4gUih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHQsbjtyZXR1cm4gTyh0aGlzLChmdW5jdGlvbihvKXtzd2l0Y2goby5sYWJlbCl7Y2FzZSAwOnJldHVybiAoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJvcHRpb25zLmNvbnZlcnNhdGlvblR5cGVcIixlLmNvbnZlcnNhdGlvblR5cGUsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5pc1ZhbGlkQ29udmVyc2F0aW9uVHlwZSwhMCksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwib3B0aW9ucy50YXJnZXRJZFwiLGUudGFyZ2V0SWQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5TVFJJTkcsITApLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm9wdGlvbnMuY2hhbm5lbElkXCIsZS5jaGFubmVsSWQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5DSEFOTkVMX0lEKSx0PVwiY29udmVyc2F0aW9uVHlwZTpcIitlLmNvbnZlcnNhdGlvblR5cGUrXCIsdGFyZ2V0SWQ6XCIrZS50YXJnZXRJZCx3LmRlYnVnKFwiZGVsZXRlIGRyYWZ0ICAtPlwiK3QpLFs0LHRlLmltQ2xpZW50LmNvbnRleHQuY2xlYXJDb252ZXJzYXRpb25NZXNzYWdlRHJhZnQoZS5jb252ZXJzYXRpb25UeXBlLGUudGFyZ2V0SWQsZS5jaGFubmVsSWQpXTtjYXNlIDE6cmV0dXJuKG49by5zZW50KCkpPT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUz9bMix7Y29kZTpufV06KHcud2FybihcImRlbGV0ZSBkcmFmdCBmYWlsIC0+XCIrbitcIjpcIitvZVtuXStcIixcIit0KSxbMix7Y29kZTpuLG1zZzpvZVtuXX1dKX19KSl9KSl9ZnVuY3Rpb24gT2UoZSx0KXtyZXR1cm4gUih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG4sbyxhLGksYyx1O3JldHVybiBPKHRoaXMsKGZ1bmN0aW9uKGQpe3N3aXRjaChkLmxhYmVsKXtjYXNlIDA6aWYody5kZWJ1ZyhcImdldCB0b3RhbCB1bnJlYWQgY291bnQgLT4gQ29udmVyc2F0aW9uVHlwZTpcIitKU09OLnN0cmluZ2lmeSh0KStcIiBpbmNsdWRlTXV0ZWQ6XCIrZSksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwiaW5jbHVkZU11dGVkXCIsZSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLkJPT0xFQU4sITEpLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcImNvbnZlcnNhdGlvblR5cGVzXCIsdCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLkFSUkFZLCExKSx0KWZvcihuPTAsbz10O248by5sZW5ndGg7bisrKWE9b1tuXSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJjb252ZXJzYXRpb25UeXBlXCIsYSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmlzVmFsaWRDb252ZXJzYXRpb25UeXBlKTtyZXR1cm5bNCx0ZS5pbUNsaWVudC5jb250ZXh0LmdldFRvdGFsVW5yZWFkQ291bnQoXCJcIix0LGUpXTtjYXNlIDE6cmV0dXJuIGk9ZC5zZW50KCksYz1pLmNvZGUsdT1pLmRhdGEsYz09PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1M/WzIse2NvZGU6YyxkYXRhOnV9XToody53YXJuKFwiZ2V0VG90YWxVbnJlYWRDb3VudCBmYWlsIC0+XCIrYytcIjpcIitvZVtjXSksWzIse2NvZGU6Yyxtc2c6b2VbY119XSl9fSkpfSkpfWZ1bmN0aW9uIHdlKGUpe3JldHVybiBSKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgdCxuLG8sYTtyZXR1cm4gTyh0aGlzLChmdW5jdGlvbihpKXtzd2l0Y2goaS5sYWJlbCl7Y2FzZSAwOnJldHVybiAoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJvcHRpb25zLmNvbnZlcnNhdGlvblR5cGVcIixlLmNvbnZlcnNhdGlvblR5cGUsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5pc1ZhbGlkQ29udmVyc2F0aW9uVHlwZSwhMCksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwib3B0aW9ucy50YXJnZXRJZFwiLGUudGFyZ2V0SWQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5TVFJJTkcsITApLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm9wdGlvbnMuY2hhbm5lbElkXCIsZS5jaGFubmVsSWQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5DSEFOTkVMX0lEKSxbNCx0ZS5pbUNsaWVudC5jb250ZXh0LmdldFVucmVhZENvdW50KGUuY29udmVyc2F0aW9uVHlwZSxlLnRhcmdldElkLGUuY2hhbm5lbElkKV07Y2FzZSAxOnJldHVybiB0PWkuc2VudCgpLG49dC5jb2RlLG89dC5kYXRhLGE9XCJjb252ZXJzYXRpb25UeXBlOlwiK2UuY29udmVyc2F0aW9uVHlwZStcIix0YXJnZXRJZDpcIitlLnRhcmdldElkLHcuZGVidWcoXCJnZXQgdW5yZWFkQ291bnQgLT5cIithKSxuPT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUz9bMix7Y29kZTpuLGRhdGE6b31dOih3Lndhcm4oXCJnZXQgdW5yZWFkQ291bnQgZmFpbCAtPlwiK24rXCI6XCIrb2Vbbl0rXCIsXCIrYSksWzIse2NvZGU6bixtc2c6b2Vbbl19XSl9fSkpfSkpfWZ1bmN0aW9uIE1lKGUpe3JldHVybiBSKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgdCxuO3JldHVybiBPKHRoaXMsKGZ1bmN0aW9uKG8pe3N3aXRjaChvLmxhYmVsKXtjYXNlIDA6cmV0dXJuICgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm9wdGlvbnMuY29udmVyc2F0aW9uVHlwZVwiLGUuY29udmVyc2F0aW9uVHlwZSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmlzVmFsaWRDb252ZXJzYXRpb25UeXBlLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJvcHRpb25zLnRhcmdldElkXCIsZS50YXJnZXRJZCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLlNUUklORywhMCksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwib3B0aW9ucy5jaGFubmVsSWRcIixlLmNoYW5uZWxJZCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLkNIQU5ORUxfSUQpLFs0LHRlLmltQ2xpZW50LmNvbnRleHQuY2xlYXJVbnJlYWRDb3VudChlLmNvbnZlcnNhdGlvblR5cGUsZS50YXJnZXRJZCxlLmNoYW5uZWxJZCldO2Nhc2UgMTpyZXR1cm4gdD1vLnNlbnQoKSxuPVwiY29udmVyc2F0aW9uVHlwZTpcIitlLmNvbnZlcnNhdGlvblR5cGUrXCIsdGFyZ2V0SWQ6XCIrZS50YXJnZXRJZCx3LmRlYnVnKFwiY2xlYXIgdW5yZWFkTXNnTnVtIC0+XCIrbiksdCE9PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1M/KHcud2FybihcImNsZWFyIHVucmVhZE1zZ051bSBmYWlsIC0+XCIrdCtcIjpcIitvZVt0XStcIixcIituKSxbMix7Y29kZTp0LG1zZzpvZVt0XX1dKTpbMix7Y29kZTp0fV19fSkpfSkpfWZ1bmN0aW9uIF9lKCl7cmV0dXJuIFIodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiBPKHRoaXMsKGZ1bmN0aW9uKGUpe3N3aXRjaChlLmxhYmVsKXtjYXNlIDA6cmV0dXJuWzQsdGUuaW1DbGllbnQuY29udGV4dC5jbGVhckFsbFVucmVhZENvdW50KCldO2Nhc2UgMTpyZXR1cm5bMix7Y29kZTplLnNlbnQoKX1dfX0pKX0pKX1mdW5jdGlvbiBVZShlLHQpe3JldHVybiBSKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbixvO3JldHVybiBPKHRoaXMsKGZ1bmN0aW9uKGEpe3N3aXRjaChhLmxhYmVsKXtjYXNlIDA6cmV0dXJuICgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm9wdGlvbnMuY29udmVyc2F0aW9uVHlwZVwiLGUuY29udmVyc2F0aW9uVHlwZSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmlzVmFsaWRDb252ZXJzYXRpb25UeXBlLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJvcHRpb25zLnRhcmdldElkXCIsZS50YXJnZXRJZCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLlNUUklORywhMCksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwib3B0aW9ucy5jaGFubmVsSWRcIixlLmNoYW5uZWxJZCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLkNIQU5ORUxfSUQpLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm5vdGlmaWNhdGlvblN0YXR1c1wiLHQsKGZ1bmN0aW9uKGUpe3JldHVybiAxPT09ZXx8Mj09PWV9KSwhMCksbj1cImNvbnZlcnNhdGlvblR5cGU6XCIrZS5jb252ZXJzYXRpb25UeXBlK1wiLHRhcmdldElkOlwiK2UudGFyZ2V0SWQsdy5kZWJ1ZyhcInNldCBjb252ZXJzYXRpb24gc3RhdHVzIC0+XCIrbiksWzQsdGUuaW1DbGllbnQuY29udGV4dC5zZXRDb252ZXJzYXRpb25TdGF0dXMoZS5jb252ZXJzYXRpb25UeXBlLGUudGFyZ2V0SWQsdm9pZCAwLHQsZS5jaGFubmVsSWQpXTtjYXNlIDE6cmV0dXJuKG89YS5zZW50KCkpIT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUz8ody53YXJuKFwic2V0IGNvbnZlcnNhdGlvbiBzdGF0dXMgZmFpbCAtPlwiK28rXCI6XCIrb2Vbb10rXCIsXCIrbiksWzIse2NvZGU6byxtc2c6b2Vbb119XSk6WzIse2NvZGU6b31dfX0pKX0pKX1mdW5jdGlvbiB4ZShlKXtyZXR1cm4gUih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHQsbixvO3JldHVybiBPKHRoaXMsKGZ1bmN0aW9uKGEpe3N3aXRjaChhLmxhYmVsKXtjYXNlIDA6cmV0dXJuICgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm9wdGlvbnMuY29udmVyc2F0aW9uVHlwZVwiLGUuY29udmVyc2F0aW9uVHlwZSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmlzVmFsaWRDb252ZXJzYXRpb25UeXBlLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJvcHRpb25zLnRhcmdldElkXCIsZS50YXJnZXRJZCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLlNUUklORywhMCksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwib3B0aW9ucy5jaGFubmVsSWRcIixlLmNoYW5uZWxJZCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLkNIQU5ORUxfSUQpLHcuaW5mbyhcImdldENvbnZlcnNhdGlvbk5vdGlmaWNhdGlvblN0YXR1cyAtPnRhcmdldElkOlwiK2UudGFyZ2V0SWQrXCIsY29udmVyc2F0aW9uVHlwZTpcIitlLmNvbnZlcnNhdGlvblR5cGUpLFs0LHRlLmltQ2xpZW50LmNvbnRleHQuZ2V0Q29udmVyc2F0aW9uTm90aWZpY2F0aW9uU3RhdHVzKGUuY29udmVyc2F0aW9uVHlwZSxlLnRhcmdldElkLGUuY2hhbm5lbElkKV07Y2FzZSAxOnJldHVybiB0PWEuc2VudCgpLG49dC5jb2RlLG89dC5kYXRhLG49PT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTP1syLHtjb2RlOm4sZGF0YTpvfV06KHcud2FybihcImdldENvbnZlcnNhdGlvbk5vdGlmaWNhdGlvblN0YXR1cyAtPmNvZGU6XCIrbitcIix0YXJnZXRJZDpcIitlLnRhcmdldElkKSxbMix7Y29kZTpuLG1zZzpvZVtuXX1dKX19KSl9KSl9ZnVuY3Rpb24gYmUoKXtyZXR1cm4gUih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIGUsdCxuO3JldHVybiBPKHRoaXMsKGZ1bmN0aW9uKG8pe3N3aXRjaChvLmxhYmVsKXtjYXNlIDA6cmV0dXJuWzQsdGUuaW1DbGllbnQuY29udGV4dC5nZXRCbG9ja0NvbnZlcnNhdGlvbkxpc3QoKV07Y2FzZSAxOnJldHVybiBlPW8uc2VudCgpLHQ9ZS5jb2RlLG49ZS5kYXRhLFsyLHtjb2RlOnQsZGF0YTpufV19fSkpfSkpfWZ1bmN0aW9uIEFlKGUsdCl7cmV0dXJuIHZvaWQgMD09PXQmJih0PSEwKSxSKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbixvO3JldHVybiBPKHRoaXMsKGZ1bmN0aW9uKGEpe3N3aXRjaChhLmxhYmVsKXtjYXNlIDA6cmV0dXJuICgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm9wdGlvbnMudHlwZVwiLGUuY29udmVyc2F0aW9uVHlwZSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmlzVmFsaWRDb252ZXJzYXRpb25UeXBlLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJvcHRpb25zLnRhcmdldElkXCIsZS50YXJnZXRJZCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLlNUUklORywhMCksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwib3B0aW9ucy5jaGFubmVsSWRcIixlLmNoYW5uZWxJZCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLkNIQU5ORUxfSUQpLG49XCJjb252ZXJzYXRpb25UeXBlOlwiK2UuY29udmVyc2F0aW9uVHlwZStcIix0YXJnZXRJZDpcIitlLnRhcmdldElkLHcuZGVidWcoXCJzZXQgY29udmVyc2F0aW9uIHN0YXR1cyAtPlwiK24pLFs0LHRlLmltQ2xpZW50LmNvbnRleHQuc2V0Q29udmVyc2F0aW9uU3RhdHVzKGUuY29udmVyc2F0aW9uVHlwZSxlLnRhcmdldElkLHQsdm9pZCAwLGUuY2hhbm5lbElkKV07Y2FzZSAxOnJldHVybihvPWEuc2VudCgpKSE9PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1M/KHcud2FybihcInNldCBjb252ZXJzYXRpb24gc3RhdHVzIGZhaWwgLT5cIitvK1wiOlwiK29lW29dK1wiLFwiK24pLFsyLHtjb2RlOm8sbXNnOm9lW29dfV0pOlsyLHtjb2RlOm99XX19KSl9KSl9ZnVuY3Rpb24gUGUoKXtyZXR1cm4gUih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIGUsdCxuO3JldHVybiBPKHRoaXMsKGZ1bmN0aW9uKG8pe3N3aXRjaChvLmxhYmVsKXtjYXNlIDA6cmV0dXJuWzQsdGUuaW1DbGllbnQuY29udGV4dC5nZXRUb3BDb252ZXJzYXRpb25MaXN0KCldO2Nhc2UgMTpyZXR1cm4gZT1vLnNlbnQoKSx0PWUuY29kZSxuPWUuZGF0YSxbMix7Y29kZTp0LGRhdGE6bn1dfX0pKX0pKX1mdW5jdGlvbiBMZShlKXtyZXR1cm4gUih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7cmV0dXJuIE8odGhpcywoZnVuY3Rpb24odCl7cmV0dXJuICgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm9wdGlvbnMudGFyZ2V0SWRcIixlLnRhcmdldElkLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuU1RSSU5HLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJvcHRpb25zLmNoYW5uZWxJZFwiLGUuY2hhbm5lbElkLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuQ0hBTk5FTF9JRCksdy5kZWJ1ZyhcImdldFVucmVhZE1lbnRpb25lZENvdW50XCIrZS50YXJnZXRJZCtcIixjaGFubmVsSWQ6XCIrZS5jaGFubmVsSWQpLFsyLHRlLmltQ2xpZW50LmNvbnRleHQuZ2V0VW5yZWFkTWVudGlvbmVkQ291bnQoZSldfSkpfSkpfWZ1bmN0aW9uIERlKCl7cmV0dXJuIFIodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3JldHVybiBPKHRoaXMsKGZ1bmN0aW9uKGUpe3JldHVybiB3LmRlYnVnKFwiZ2V0QWxsVW5yZWFkTWVudGlvbmVkQ291bnRcIiksWzIsdGUuaW1DbGllbnQuY29udGV4dC5nZXRBbGxVbnJlYWRNZW50aW9uZWRDb3VudCgpXX0pKX0pKX1mdW5jdGlvbiBIZSgpe3JldHVybiBSKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXtyZXR1cm4gTyh0aGlzLChmdW5jdGlvbihlKXtyZXR1cm5bMix0ZS5pbUNsaWVudC5jb250ZXh0LmdldEFsbENvbnZlcnNhdGlvblN0YXRlKCldfSkpfSkpfXZhciBrZT1mdW5jdGlvbihlKXsoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJvcHRpb25zLmtleVwiLGUua2V5LF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuU1RSSU5HLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJvcHRpb25zLnZhbHVlXCIsZS52YWx1ZSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLlNUUklORywhMCksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwib3B0aW9ucy5pc0F1dG9EZWxldGVcIixlLmlzQXV0b0RlbGV0ZSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLkJPT0xFQU4pLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm9wdGlvbnMuaXNTZW5kTm90aWZpY2F0aW9uXCIsZS5pc1NlbmROb3RpZmljYXRpb24sX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5CT09MRUFOKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJvcHRpb25zLm5vdGlmaWNhdGlvbkV4dHJhXCIsZS5ub3RpZmljYXRpb25FeHRyYSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLlNUUklORyl9LEdlPWZ1bmN0aW9uKGUpeygwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm9wdGlvbnMua2V5XCIsZS5rZXksX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5TVFJJTkcsITApLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm9wdGlvbnMuaXNTZW5kTm90aWZpY2F0aW9uXCIsZS5pc1NlbmROb3RpZmljYXRpb24sX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5CT09MRUFOKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJvcHRpb25zLm5vdGlmaWNhdGlvbkV4dHJhXCIsZS5ub3RpZmljYXRpb25FeHRyYSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLlNUUklORyl9O2Z1bmN0aW9uIEJlKGUsdCl7cmV0dXJuIFIodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBuLG87cmV0dXJuIE8odGhpcywoZnVuY3Rpb24oYSl7c3dpdGNoKGEubGFiZWwpe2Nhc2UgMDpyZXR1cm4gKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwib3B0aW9ucy5jb3VudFwiLHQuY291bnQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5OVU1CRVIsITApLG49XCJpZDpcIitlLHcuZGVidWcoXCJqb2luIGNoYXRyb29tIC0+XCIrbiksWzQsdGUuaW1DbGllbnQuY29udGV4dC5qb2luQ2hhdHJvb20oZSx0LmNvdW50KV07Y2FzZSAxOnJldHVybihvPWEuc2VudCgpKSE9PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1M/KHcud2FybihcImpvaW4gY2hhdHJvb20gZmFpbCAtPmNvZGUrOlwiK29lW29dK1wiLFwiK24pLFsyLHtjb2RlOm8sbXNnOm9lW29dfV0pOlsyLHtjb2RlOm99XX19KSl9KSl9ZnVuY3Rpb24gcWUoZSx0KXtyZXR1cm4gUih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG4sbztyZXR1cm4gTyh0aGlzLChmdW5jdGlvbihhKXtzd2l0Y2goYS5sYWJlbCl7Y2FzZSAwOnJldHVybiAoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJvcHRpb25zLmNvdW50XCIsdC5jb3VudCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLk5VTUJFUiwhMCksbj1cImlkOlwiK2Usdy5kZWJ1ZyhcImpvaW4gZXhpc3QgY2hhdHJvb20gLT5cIituKSxbNCx0ZS5pbUNsaWVudC5jb250ZXh0LmpvaW5FeGlzdENoYXRyb29tKGUsdC5jb3VudCldO2Nhc2UgMTpyZXR1cm4obz1hLnNlbnQoKSkhPT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTPyh3Lndhcm4oXCJqb2luIGV4aXN0IGNoYXRyb29tIGZhaWwgLT5jb2RlOlwiK29lW29dK1wiLFwiK24pLFsyLHtjb2RlOm8sbXNnOm9lW29dfV0pOlsyLHtjb2RlOm99XX19KSl9KSl9ZnVuY3Rpb24gRmUoZSl7cmV0dXJuIFIodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciB0LG47cmV0dXJuIE8odGhpcywoZnVuY3Rpb24obyl7c3dpdGNoKG8ubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdD1cImlkOlwiK2Usdy5kZWJ1ZyhcInF1aXQgY2hhdHJvb20gLT5cIit0KSxbNCx0ZS5pbUNsaWVudC5jb250ZXh0LnF1aXRDaGF0cm9vbShlKV07Y2FzZSAxOnJldHVybihuPW8uc2VudCgpKSE9PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1M/KHcud2FybihcInF1aXQgY2hhdHJvb20gZmFpbCAtPmNvZGUrOlwiK29lW25dK1wiLFwiK3QpLFsyLHtjb2RlOm4sbXNnOm9lW25dfV0pOlsyLHtjb2RlOm59XX19KSl9KSl9ZnVuY3Rpb24gVmUoZSx0KXtyZXR1cm4gUih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG4sbyxhLGk7cmV0dXJuIE8odGhpcywoZnVuY3Rpb24oYyl7c3dpdGNoKGMubGFiZWwpe2Nhc2UgMDpyZXR1cm4gKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwib3B0aW9ucy5jb3VudFwiLHQuY291bnQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5OVU1CRVIpLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm9wdGlvbnMub3JkZXJcIix0Lm9yZGVyLChmdW5jdGlvbihlKXtyZXR1cm5bMCwxLDJdLmluY2x1ZGVzKGUpfSkpLG49XCJpZDpcIitlLHcuZGVidWcoXCJnZXQgY2hhdHJvb20gaW5mbyAtPlwiK24pLFs0LHRlLmltQ2xpZW50LmNvbnRleHQuZ2V0Q2hhdHJvb21JbmZvKGUsdC5jb3VudCx0Lm9yZGVyKV07Y2FzZSAxOnJldHVybiBvPWMuc2VudCgpLGE9by5jb2RlLGk9by5kYXRhLGE9PT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTJiZpP1syLHtjb2RlOmEsZGF0YTppfV06KHcud2FybihcImdldCBjaGF0cm9vbSBpbmZvIGZhaWwgLT5jb2RlKzpcIitvZVthXStcIixcIituKSxbMix7Y29kZTphLG1zZzpvZVthXX1dKX19KSl9KSl9ZnVuY3Rpb24gemUoZSx0KXtyZXR1cm4gUih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG4sbztyZXR1cm4gTyh0aGlzLChmdW5jdGlvbihhKXtzd2l0Y2goYS5sYWJlbCl7Y2FzZSAwOnJldHVybiAoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJ0YXJnZXRJZFwiLGUsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5TVFJJTkcsITApLGtlKHQpLG49XCJpZDpcIitlLHcuZGVidWcoXCJzZXQgY2hhdHJvb20gZW50cnktPlwiK24pLFs0LHRlLmltQ2xpZW50LmNvbnRleHQuc2V0Q2hhdHJvb21FbnRyeShlLHQpXTtjYXNlIDE6cmV0dXJuKG89YS5zZW50KCkpIT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUz8ody53YXJuKFwic2V0IGNoYXRyb29tIGVudHJ5IGZhaWwgLT5jb2RlKzpcIitvZVtvXStcIixcIituKSxbMix7Y29kZTpvLG1zZzpvZVtvXX1dKTpbMix7Y29kZTpvfV19fSkpfSkpfWZ1bmN0aW9uIEtlKGUsdCl7cmV0dXJuIFIodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBuLG8sYSxpO3JldHVybiBPKHRoaXMsKGZ1bmN0aW9uKGMpe3N3aXRjaChjLmxhYmVsKXtjYXNlIDA6cmV0dXJuICgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcInRhcmdldElkXCIsZSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLlNUUklORywhMCksZnVuY3Rpb24oZSl7ZS5lbnRyaWVzLmZvckVhY2goKGZ1bmN0aW9uKGUpeygwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcImVudHJ5LmtleVwiLGUua2V5LF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuU1RSSU5HLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJlbnRyeS52YWx1ZVwiLGUudmFsdWUsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5TVFJJTkcsITApfSkpLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm9wdGlvbnMuaXNBdXRvRGVsZXRlXCIsZS5pc0F1dG9EZWxldGUsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5CT09MRUFOKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJvcHRpb25zLm5vdGlmaWNhdGlvbkV4dHJhXCIsZS5ub3RpZmljYXRpb25FeHRyYSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLlNUUklORyl9KHQpLHQuZW50cmllcy5sZW5ndGg+MTA/WzIsbmUuQ0hBVFJPT01fS1ZfU1RPUkVfT1VUX0xJTUlUXToobj1cImlkOlwiK2Usdy5kZWJ1ZyhcInNldCBjaGF0cm9vbSBlbnRyeS0+XCIrbiksWzQsdGUuaW1DbGllbnQuY29udGV4dC5zZXRDaGF0cm9vbUVudHJpZXMoZSx0KV0pO2Nhc2UgMTpyZXR1cm4gbz1jLnNlbnQoKSxhPW8uY29kZSxpPW8uZGF0YSxhIT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUz8ody53YXJuKFwic2V0IGNoYXRyb29tIGVudHJ5IGZhaWwgLT5jb2RlKzpcIitvZVthXStcIixcIituKSxbMix7Y29kZTphLG1zZzpvZVthXSxkYXRhOml9XSk6WzIse2NvZGU6YX1dfX0pKX0pKX1mdW5jdGlvbiBqZShlLHQpe3JldHVybiBSKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbixvO3JldHVybiBPKHRoaXMsKGZ1bmN0aW9uKGEpe3N3aXRjaChhLmxhYmVsKXtjYXNlIDA6cmV0dXJuICgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcInRhcmdldElkXCIsZSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLlNUUklORywhMCksa2UodCksbj1cImlkOlwiK2Usdy5kZWJ1ZyhcImZvcmNlIHNldCBjaGF0cm9vbSBlbnRyeSAtPlwiK24pLFs0LHRlLmltQ2xpZW50LmNvbnRleHQuZm9yY2VTZXRDaGF0cm9vbUVudHJ5KGUsdCldO2Nhc2UgMTpyZXR1cm4obz1hLnNlbnQoKSkhPT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTPyh3Lndhcm4oXCJmb3JjZSBzZXQgY2hhdHJvb20gZW50cnkgZmFpbCAtPmNvZGUrOlwiK29lW29dK1wiLFwiK24pLFsyLHtjb2RlOm8sbXNnOm9lW29dfV0pOlsyLHtjb2RlOm99XX19KSl9KSl9ZnVuY3Rpb24gWGUoZSx0KXtyZXR1cm4gUih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG4sbztyZXR1cm4gTyh0aGlzLChmdW5jdGlvbihhKXtzd2l0Y2goYS5sYWJlbCl7Y2FzZSAwOnJldHVybiAoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJ0YXJnZXRJZFwiLGUsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5TVFJJTkcsITApLEdlKHQpLG49XCJpZDpcIitlLHcuZGVidWcoXCJyZW1vdmUgY2hhdHJvb20gZW50cnktPlwiK24pLFs0LHRlLmltQ2xpZW50LmNvbnRleHQucmVtb3ZlQ2hhdHJvb21FbnRyeShlLHQpXTtjYXNlIDE6cmV0dXJuKG89YS5zZW50KCkpIT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUz8ody53YXJuKFwicmVtb3ZlIGNoYXRyb29tIGVudHJ5IGZhaWwgLT5jb2RlKzpcIitvZVtvXStcIixcIituKSxbMix7Y29kZTpvLG1zZzpvZVtvXX1dKTpbMix7Y29kZTpvfV19fSkpfSkpfWZ1bmN0aW9uIFdlKGUsdCl7cmV0dXJuIFIodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBuLG8sYSxpLGM7cmV0dXJuIE8odGhpcywoZnVuY3Rpb24odSl7c3dpdGNoKHUubGFiZWwpe2Nhc2UgMDpyZXR1cm4gKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwidGFyZ2V0SWRcIixlLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuU1RSSU5HLCEwKSxmdW5jdGlvbihlKXtlLmVudHJpZXMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7KDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwia2V5XCIsZSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLlNUUklORywhMCl9KSksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwib3B0aW9ucy5ub3RpZmljYXRpb25FeHRyYVwiLGUubm90aWZpY2F0aW9uRXh0cmEsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5TVFJJTkcpfSh0KSxuPVwiaWQ6XCIrZSx3LmRlYnVnKFwicmVtb3ZlIGNoYXRyb29tIGVudHJ5LT5cIituKSwobz1PYmplY3QuYXNzaWduKHt9LHQpKS5lbnRyaWVzPXQuZW50cmllcy5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybntrZXk6ZX19KSksWzQsdGUuaW1DbGllbnQuY29udGV4dC5yZW1vdmVDaGF0cm9vbUVudHJpZXMoZSxvKV07Y2FzZSAxOnJldHVybiBhPXUuc2VudCgpLGk9YS5jb2RlLGM9YS5kYXRhLGkhPT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTPyh3Lndhcm4oXCJyZW1vdmUgY2hhdHJvb20gZW50cnkgZmFpbCAtPmNvZGUrOlwiK29lW2ldK1wiLFwiK24pLFsyLHtjb2RlOmksbXNnOm9lW2ldLGRhdGE6Y31dKTpbMix7Y29kZTppfV19fSkpfSkpfWZ1bmN0aW9uIEplKGUsdCl7cmV0dXJuIFIodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBuLG87cmV0dXJuIE8odGhpcywoZnVuY3Rpb24oYSl7c3dpdGNoKGEubGFiZWwpe2Nhc2UgMDpyZXR1cm4gKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwidGFyZ2V0SWRcIixlLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuU1RSSU5HLCEwKSxHZSh0KSxuPVwiaWQ6XCIrZSx3LmRlYnVnKFwiZm9yY2UgcmVtb3ZlIGNoYXRyb29tIGVudHJ5IC0+XCIrbiksWzQsdGUuaW1DbGllbnQuY29udGV4dC5mb3JjZVJlbW92ZUNoYXRyb29tRW50cnkoZSx0KV07Y2FzZSAxOnJldHVybihvPWEuc2VudCgpKSE9PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1M/KHcud2FybihcImZvcmNlIHJlbW92ZSBjaGF0cm9vbSBlbnRyeSBmYWlsIC0+Y29kZSs6XCIrb2Vbb10rXCIsXCIrbiksWzIse2NvZGU6byxtc2c6b2Vbb119XSk6WzIse2NvZGU6b31dfX0pKX0pKX1mdW5jdGlvbiBZZShlLHQpe3JldHVybiBSKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbixvLGEsaTtyZXR1cm4gTyh0aGlzLChmdW5jdGlvbihjKXtzd2l0Y2goYy5sYWJlbCl7Y2FzZSAwOnJldHVybiAoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJrZXlcIix0LChmdW5jdGlvbihlKXtyZXR1cm4gKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5pc1N0cmluZykoZSkmJi9bXFx3Kz0tXSsvLnRlc3QoZSkmJmUubGVuZ3RoPD0xMjh9KSwhMCksbj1cImlkOlwiK2Usdy5kZWJ1ZyhcImdldCBjaGF0cm9vbSBlbnRyeS0+XCIrbiksWzQsdGUuaW1DbGllbnQuY29udGV4dC5nZXRDaGF0cm9vbUVudHJ5KGUsdCldO2Nhc2UgMTpyZXR1cm4gbz1jLnNlbnQoKSxhPW8uY29kZSxpPW8uZGF0YSxhPT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUyYmaT9bMix7Y29kZTphLGRhdGE6aX1dOih3Lndhcm4oXCJnZXQgY2hhdHJvb20gZW50cnkgZmFpbCAtPmNvZGUrOlwiK29lW2FdK1wiLFwiK24pLFsyLHtjb2RlOmEsbXNnOm9lW2FdfV0pfX0pKX0pKX1mdW5jdGlvbiBRZShlKXtyZXR1cm4gUih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHQsbixvLGE7cmV0dXJuIE8odGhpcywoZnVuY3Rpb24oaSl7c3dpdGNoKGkubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdD1cImlkOlwiK2Usdy5kZWJ1ZyhcImdldCBhbGwgY2hhdHJvb20gZW50cmllcy0+XCIrdCksWzQsdGUuaW1DbGllbnQuY29udGV4dC5nZXRBbGxDaGF0cm9vbUVudHJpZXMoZSldO2Nhc2UgMTpyZXR1cm4gbj1pLnNlbnQoKSxvPW4uY29kZSxhPW4uZGF0YSxvPT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUyYmYT9bMix7Y29kZTpvLGRhdGE6YX1dOih3Lndhcm4oXCJnZXQgYWxsIGNoYXRyb29tIGVudHJpZXMgZmFpbCAtPmNvZGUrOlwiK29lW29dK1wiLFwiK3QpLFsyLHtjb2RlOm8sbXNnOm9lW29dfV0pfX0pKX0pKX1mdW5jdGlvbiAkZShlLHQpe3JldHVybiBSKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbixvLGEsaSxjO3JldHVybiBPKHRoaXMsKGZ1bmN0aW9uKHUpe3N3aXRjaCh1LmxhYmVsKXtjYXNlIDA6cmV0dXJuICgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm9wdGlvbnMudGltZXN0YW1wXCIsdC50aW1lc3RhbXAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5OVU1CRVIpLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm9wdGlvbnMuY291bnRcIix0LmNvdW50LF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuTlVNQkVSKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJvcHRpb25zLm9yZGVyXCIsdC5vcmRlciwoZnVuY3Rpb24oZSl7cmV0dXJuIDA9PT1lfHwxPT09ZX0pKSxuPVwiaWQ6XCIrZSx3LmRlYnVnKFwiZ2V0IGNoYXRyb29tIGhpc3RvcnkgbWVzc2FnZS0+XCIrbiksWzQsdGUuaW1DbGllbnQuY29udGV4dC5nZXRDaGF0Um9vbUhpc3RvcnlNZXNzYWdlcyhlLHQuY291bnQsdC5vcmRlcix0LnRpbWVzdGFtcCldO2Nhc2UgMTpyZXR1cm4gbz11LnNlbnQoKSxhPW8uY29kZSxpPW8uZGF0YSxhPT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUyYmaT8oYz1pLmxpc3QubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gWihlKX0pKSxbMix7Y29kZTphLGRhdGE6e2xpc3Q6YyxoYXNNb3JlOiEhaS5oYXNNb3JlfX1dKToody53YXJuKFwiZ2V0IGNoYXRyb29tIGhpc3RvcnkgbWVzc2FnZSBmYWlsIC0+Y29kZSs6XCIrb2VbYV0rXCIsXCIrbiksWzIse2NvZGU6YSxtc2c6b2VbYV19XSl9fSkpfSkpfXZhciBaZT1mdW5jdGlvbihlLHQsbixvKXt2b2lkIDA9PT1uJiYobj0hMCksdm9pZCAwPT09byYmKG89ITApLHRoaXMubWVzc2FnZVR5cGU9ZSx0aGlzLmNvbnRlbnQ9dCx0aGlzLmlzUGVyc2l0ZWQ9bix0aGlzLmlzQ291bnRlZD1vfTtmdW5jdGlvbiBldChlLHQsbil7dm9pZCAwPT09dCYmKHQ9ITApLHZvaWQgMD09PW4mJihuPSEwKTtyZXR1cm4gZnVuY3Rpb24obyl7cmV0dXJuIG5ldyBaZShlLG8sdCxuKX19dmFyIG50LG90LGF0PWV0KFwiUkM6SW1nTXNnXCIpLHJ0PWV0KFwiUkM6SFFWQ01zZ1wiKSxpdD1ldChcIlJDOlNpZ2h0TXNnXCIpLHN0PWV0KFwiUkM6VHh0TXNnXCIpLGN0PWV0KFwiUkM6Q29tYmluZU1zZ1wiKSx1dD1ldChcIlJDOkZpbGVNc2dcIiksZHQ9ZXQoXCJSQzpHSUZNc2dcIiksbHQ9ZXQoXCJSQzpWY01zZ1wiKSxndD1ldChcIlJDOkxCU01zZ1wiKSxmdD1ldChcIlJDOlJlZmVyZW5jZU1zZ1wiKSxtdD1ldChcIlJDOkltZ1RleHRNc2dcIiksaHQ9e3Fpbml1OmZ1bmN0aW9uKGUsdCxuLG8pe3ZhciBhLHI9XCJodHRwczovL1wiK3QudXBsb2FkSG9zdC5xaW5pdTthPVN0KCkrcHRbMF1bMV18fHIscHQuc2hpZnQoKTt2YXIgaT1uZXcgWE1MSHR0cFJlcXVlc3Q7aS51cGxvYWQmJnQuc3VwcG9ydF9vcHRpb25zJiYoaS51cGxvYWQub25wcm9ncmVzcz1mdW5jdGlvbihlKXtuLm9uUHJvZ3Jlc3MoZS5sb2FkZWQsZS50b3RhbCl9KTtpLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe2lmKDQ9PT1pLnJlYWR5U3RhdGUpe3ZhciBhPWkucmVzcG9uc2VUZXh0fHxcInt9XCI7KGE9SlNPTi5wYXJzZShhKSkuZmlsZW5hbWU9dC51bmlxdWVWYWx1ZSxhLnVwbG9hZE1ldGhvZD1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLlVwbG9hZE1ldGhvZD9fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLlVwbG9hZE1ldGhvZC5RSU5JVTpcIlwiLDIwMD09PWkuc3RhdHVzP24ub25Db21wbGV0ZWQoYSk6cHQubGVuZ3RoP2h0W3B0WzBdWzBdXShlLHQsbixvKTpuLm9uRXJyb3IoXCJ1cGxvYWQgZmFpbFwiKX19LHQuaXNDaHVuayYmKGE9ZnVuY3Rpb24oZSx0KXt2YXIgbj1cIlwiO0l0KHQsKGZ1bmN0aW9uKGUsdCl7XCJ0b2tlblwiIT09ZSYmKG4rPShuP1wiJlwiOlwiXCIpK2VuY29kZVVSSUNvbXBvbmVudChlKStcIj1cIitlbmNvZGVVUklDb21wb25lbnQodCkpfSkpLG4mJihlKz0oZS5pbmRleE9mKFwiP1wiKT4wP1wiJlwiOlwiP1wiKStuKTtyZXR1cm4gZX0oYSs9XCIvbWtibGsvXCIrZS5zaXplLHQubXVsdGlfcGFybWFzKSk7aS5vcGVuKHQubWV0aG9kLGEsITApLG4ub25PcGVuKGkpLHQuc3RyZWFtJiZpLnNldFJlcXVlc3RIZWFkZXIoXCJhdXRob3JpemF0aW9uXCIsXCJVcFRva2VuIFwiK3QubXVsdGlfcGFybWFzLnRva2VuKTtJdCh0LmhlYWRlcnMsKGZ1bmN0aW9uKGUsdCl7aS5zZXRSZXF1ZXN0SGVhZGVyKGUsdCl9KSksaS5zZW5kKGUpfSxiYWlkdTpmdW5jdGlvbihlLHQsbixvKXtpZihjb25zb2xlLmxvZyhvLHQpLG8uc2l6ZT52dCl0aHJvdyBuZXcgRXJyb3IoXCJ0aGUgZmlsZSBzaXplIGlzIG92ZXIgNUdCIVwiKTt2YXIgYT10fHx7fTt0PXR8fG90O3ZhciByPW5ldyBYTUxIdHRwUmVxdWVzdCxpPVN0KCk7aWYoIWEudXBsb2FkSG9zdC5ib3MmJiFhLmJvc1VwbG9hZFBhdGgpcmV0dXJuO3ZhciBzPWkrcHRbMF1bMV0rYS5ib3NVcGxvYWRQYXRoO3B0LnNoaWZ0KCk7dmFyIGM9YS5ib3NIZWFkZXJ8fHt9LHU9e2ZpbGVuYW1lOnQudW5pcXVlVmFsdWV8fG8udW5pcXVlTmFtZSxuYW1lOm8ubmFtZSxkb3dubG9hZFVybDpzLGlzQm9zUmVzOiEwfTtyLnVwbG9hZCYmdC5zdXBwb3J0X29wdGlvbnMmJihyLnVwbG9hZC5vbnByb2dyZXNzPWZ1bmN0aW9uKGUpe24ub25Qcm9ncmVzcyhlLmxvYWRlZCxlLnRvdGFsLCEwKX0pO3Iub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7aWYoND09PXIucmVhZHlTdGF0ZSl7dmFyIGE9ci5yZXNwb25zZVRleHR8fFwie31cIjtpZigoYT1KU09OLnBhcnNlKGEpKS5maWxlbmFtZT10LnVuaXF1ZVZhbHVlLDIwMD09PXIuc3RhdHVzKXtuLm9uQ29tcGxldGVkKHUsITApfWVsc2UgcHQubGVuZ3RoP2h0W3B0WzBdWzBdXShlLHQsbixvKTpuLm9uRXJyb3IoXCJ1cGxvYWQgZmFpbFwiKX19LHIub3Blbih0Lm1ldGhvZCxzLCEwKSxyLnNldFJlcXVlc3RIZWFkZXIoXCJhdXRob3JpemF0aW9uXCIsYy5ib3NUb2tlbiksci5zZXRSZXF1ZXN0SGVhZGVyKFwieC1iY2UtZGF0ZVwiLGMuYm9zRGF0ZSksci5zZW5kKG8pfSxhbGl5dW46ZnVuY3Rpb24oZSx0LG4sbyl7aWYoby5zaXplPnZ0KXRocm93IG5ldyBFcnJvcihcInRoZSBmaWxlIHNpemUgaXMgb3ZlciA1R0IhXCIpO2NvbnN0IGE9bmV3IEZvcm1EYXRhO2Euc2V0KFwiZmlsZVwiLGUuZ2V0KFwiZmlsZVwiKSksYS5zZXQoXCJrZXlcIixlLmdldChcImtleVwiKSksYS5zZXQoXCJ0b2tlblwiLGUuZ2V0KFwidG9rZW5cIikpO2NvbnN0IHI9cHRbMF1bMV07cHQuc2hpZnQoKSxlPWV8fG50LHQ9KHQ9dHx8e30pfHxvdDt2YXIgaT1uZXcgWE1MSHR0cFJlcXVlc3Qscz1TdCgpK3Qub3NzQnVja2V0TmFtZStcIi5cIityO2kudXBsb2FkJiZ0LnN1cHBvcnRfb3B0aW9ucyYmKGkudXBsb2FkLm9ucHJvZ3Jlc3M9ZnVuY3Rpb24oZSl7bi5vblByb2dyZXNzKGUubG9hZGVkLGUudG90YWwpfSk7aS5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXtpZig0PT09aS5yZWFkeVN0YXRlKXt2YXIgZT1pLnJlc3BvbnNlVGV4dHx8XCJ7fVwiOyhlPUpTT04ucGFyc2UoZSkpLm5hbWU9dC51bmlxdWVWYWx1ZSxlLmZpbGVuYW1lPXQudXBsb2FkRmlsZU5hbWUsZS51cGxvYWRNZXRob2Q9X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5VcGxvYWRNZXRob2Q/X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5VcGxvYWRNZXRob2QuQUxJOlwiXCIsMjAwPT09aS5zdGF0dXM/bi5vbkNvbXBsZXRlZChlKTpwdC5sZW5ndGg/aHRbcHRbMF1bMF1dKGEsdCxuLG8pOm4ub25FcnJvcihcInVwbG9hZCBmYWlsXCIpfX0saS5vcGVuKHQubWV0aG9kLHMsITApLGNvbnNvbGUubG9nKFwiYWxpOnVybFwiLHMpO3ZhciBjPXQuYWxpSGVhZGVyfHx7fTtlLnNldChcIk9TU0FjY2Vzc0tleUlkXCIsYy5vc3NrZXlJZCksZS5zZXQoXCJwb2xpY3lcIixjLm9zc1BvbGljeSksZS5zZXQoXCJTaWduYXR1cmVcIixjLm9zc1NpZ24pLGUuc2V0KFwic3VjY2Vzc19hY3Rpb25fc3RhdHVzXCIsMjAwKSxlLmRlbGV0ZShcImtleVwiKSxlLmFwcGVuZChcImtleVwiLHQudXBsb2FkRmlsZU5hbWUpLGUuZGVsZXRlKFwiZmlsZVwiKSxlLmFwcGVuZChcImZpbGVcIixvKSxpLnNlbmQoZSl9LHMzOmZ1bmN0aW9uKGUsdCxuLG8pe3ZhciBhPW5ldyBGb3JtRGF0YSxyPW5ldyBYTUxIdHRwUmVxdWVzdCxpPVN0KCk7Y29uc3Qgcz1wdFswXVsxXTt2YXIgYz1pK3QuczNCdWNrZXROYW1lK1wiLlwiK3M7Y29uc29sZS5sb2coXCJ1cGxvYWRTMzp1cmxcIixjKSxwdC5zaGlmdCgpLHIudXBsb2FkJiZ0LnN1cHBvcnRfb3B0aW9ucyYmKHIudXBsb2FkLm9ucHJvZ3Jlc3M9ZnVuY3Rpb24oZSl7bi5vblByb2dyZXNzKGUubG9hZGVkLGUudG90YWwpfSk7ci5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXtpZig0PT09ci5yZWFkeVN0YXRlKXt2YXIgYT1yLnJlc3BvbnNlVGV4dHx8XCJ7fVwiO2lmKChhPUpTT04ucGFyc2UoYSkpLm5hbWU9dC51bmlxdWVWYWx1ZSxhLmZpbGVuYW1lPXQudXBsb2FkRmlsZU5hbWUsYS51cGxvYWRNZXRob2Q9X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5VcGxvYWRNZXRob2QuQVdTLGNvbnNvbGUubG9nKFwiVXBsb2FkTWV0aG9kOlwiLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uVXBsb2FkTWV0aG9kKSwyMDA9PT1yLnN0YXR1c3x8MjA0PT09ci5zdGF0dXMpbi5vbkNvbXBsZXRlZChhKTtlbHNlIGlmKHB0Lmxlbmd0aCl7Y29uc3QgYT1uZXcgRm9ybURhdGE7YS5zZXQoXCJmaWxlXCIsZS5nZXQoXCJmaWxlXCIpKSxhLnNldChcImtleVwiLGUuZ2V0KFwia2V5XCIpKSxhLnNldChcInRva2VuXCIsZS5nZXQoXCJ0b2tlblwiKSksaHRbcHRbMF1bMF1dKGEsdCxuLG8pfWVsc2Ugbi5vbkVycm9yKFwidXBsb2FkIGZhaWxcIil9fSxyLm9wZW4odC5tZXRob2QsYywhMCk7dmFyIHU9dD90LnMzSGVhZGVyOnt9LGQ9byYmby50eXBlO1widGV4dC9odG1sXCI9PT1kP2Euc2V0KFwiQ29udGVudC1EaXNwb3NpdGlvblwiLFwiaW5saW5lO1wiKTphLnNldChcIkNvbnRlbnQtRGlzcG9zaXRpb25cIixcImF0dGFjaG1lbnQ7XCIpO2Euc2V0KFwiQ29udGVudC1UeXBlXCIsZCksYS5zZXQoXCJ4LWFtei1jcmVkZW50aWFsXCIsdS5zM0NyZWRlbnRpYWwpLGEuc2V0KFwieC1hbXotYWxnb3JpdGhtXCIsdS5zM0FsZ29yaXRobSksYS5zZXQoXCJ4LWFtei1kYXRlXCIsdS5zM0RhdGUpLGEuc2V0KFwicG9saWN5XCIsdS5zM1BvbGljeSksYS5zZXQoXCJ4LWFtei1zaWduYXR1cmVcIix1LnMzU2lnbmF0dXJlKSxhLnNldChcImtleVwiLHQudXBsb2FkRmlsZU5hbWUpLGEuc2V0KFwiZmlsZVwiLG8pLHIuc2VuZChhKX0sc3RjOmZ1bmN0aW9uKGUsdCxuLG8pe25ldyBGb3JtRGF0YTt2YXIgYT1uZXcgWE1MSHR0cFJlcXVlc3Q7U3QoKTt2YXIgcj1cImh0dHBzOi8vXCIrcHRbMF1bMV0rXCIvXCIrdC5zdGNCdWNrZXROYW1lK1wiL1wiK3QudXBsb2FkRmlsZU5hbWU7cHQuc2hpZnQoKSxhLnVwbG9hZCYmdC5zdXBwb3J0X29wdGlvbnMmJihhLnVwbG9hZC5vbnByb2dyZXNzPWZ1bmN0aW9uKGUpe24ub25Qcm9ncmVzcyhlLmxvYWRlZCxlLnRvdGFsKX0pO2Eub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7aWYoND09PWEucmVhZHlTdGF0ZSl7dmFyIHI9YS5yZXNwb25zZVRleHR8fFwie31cIjtpZigocj1KU09OLnBhcnNlKHIpKS5uYW1lPXQudW5pcXVlVmFsdWUsci5maWxlbmFtZT10LnVwbG9hZEZpbGVOYW1lLHIudXBsb2FkTWV0aG9kPV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uVXBsb2FkTWV0aG9kP19yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uVXBsb2FkTWV0aG9kLlNUQzpcIlwiLDIwMD09PWEuc3RhdHVzfHwyMDQ9PT1hLnN0YXR1cyluLm9uQ29tcGxldGVkKHIpO2Vsc2UgaWYocHQubGVuZ3RoKXtjb25zdCBhPW5ldyBGb3JtRGF0YTthLnNldChcImZpbGVcIixlLmdldChcImZpbGVcIikpLGEuc2V0KFwia2V5XCIsZS5nZXQoXCJrZXlcIikpLGEuc2V0KFwidG9rZW5cIixlLmdldChcInRva2VuXCIpKSxodFtwdFswXVswXV0oYSx0LG4sbyl9ZWxzZSBuLm9uRXJyb3IoXCJ1cGxvYWQgZmFpbFwiKX19LGEub3BlbihcIlBVVFwiLHIsITApO3ZhciBpPXQ/dC5zdGNIZWFkZXI6e307YS5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIsby50eXBlKSxcInRleHQvaHRtbFwiPT09by50eXBlP2Euc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtRGlzcG9zaXRpb25cIixcImlubGluZTtcIik6YS5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC1EaXNwb3NpdGlvblwiLFwiYXR0YWNobWVudDtcIik7YS5zZXRSZXF1ZXN0SGVhZGVyKFwiQXV0aG9yaXphdGlvblwiLGkuc3RjQXV0aG9yaXphdGlvbiksYS5zZXRSZXF1ZXN0SGVhZGVyKFwieC1hbXotY29udGVudC1zaGEyNTZcIixpLnN0Y0NvbnRlbnRTaGEyNTYpLGEuc2V0UmVxdWVzdEhlYWRlcihcIngtYW16LWRhdGVcIixpLnN0Y0RhdGUpLGEuc2VuZChvKX19LHB0PVtdLHZ0PTUzNjg3MDkxMjA7ZnVuY3Rpb24gSXQoZSx0KXtmb3IodmFyIG4gaW4gZSl0KG4sZVtuXSl9ZnVuY3Rpb24gU3QoKXt2YXIgZT1cImh0dHBzOi8vXCI7cmV0dXJuXCJodHRwOlwiIT09bG9jYXRpb24ucHJvdG9jb2wmJlwiZmlsZTpcIiE9PWxvY2F0aW9uLnByb3RvY29sfHwoZT1cImh0dHA6Ly9cIiksZX1mdW5jdGlvbiBDdChlLHQsbil7dmFyIG8sYSxyPWUmJmUudHlwZXx8XCJ0ZXh0L3BsYWluXCIsaT1yLmluZGV4T2YoXCJpbWFnZVwiKT4tMT8xOjQscz1NYXRoLmNlaWwoZS5zaXplL3Quc3RjX2NodW5rX3NpemUpLGM9dCYmSlNPTi5wYXJzZSh0Lm9zc0NvbmZpZz90Lm9zc0NvbmZpZzpcIlwiKTtBcnJheS5pc0FycmF5KGMpfHwoYz1bXSk7dmFyIHU9Yy5maW5kKChlPT5PYmplY3Qua2V5cyhlKS5pbmNsdWRlcyhcInN0Y1wiKSkpLGQ9XCJ1cGxvYWRzXCI7dGUuaW1DbGllbnQuZ2V0RmlsZVRva2VuKGksbyxcIlBPU1RcIixkKS50aGVuKChmdW5jdGlvbihlKXtvPWUuZmlsZU5hbWUsYT1cImh0dHBzOi8vXCIrdS5zdGMrXCIvXCIrdC5zdGNCdWNrZXROYW1lK1wiL1wiK28sY29uc29sZS5sb2coXCJ1cGxvYWRTdGNNdWx0aXBhcnQ6dXJsXCIsYSk7dmFyIGk9bmV3IFhNTEh0dHBSZXF1ZXN0O2kub3BlbihcIlBPU1RcIixhK1wiP1wiK2QsITApLFwidGV4dC9odG1sXCI9PT1yP2kuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtRGlzcG9zaXRpb25cIixcImlubGluZTtcIik6aS5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC1EaXNwb3NpdGlvblwiLFwiYXR0YWNzaG1lbnQ7XCIpLGkuc2V0UmVxdWVzdEhlYWRlcihcIkF1dGhvcml6YXRpb25cIixlJiZlLnN0Y0F1dGhvcml6YXRpb24pLGkuc2V0UmVxdWVzdEhlYWRlcihcIngtYW16LWNvbnRlbnQtc2hhMjU2XCIsZSYmZS5zdGNDb250ZW50U2hhMjU2KSxpLnNldFJlcXVlc3RIZWFkZXIoXCJ4LWFtei1kYXRlXCIsZSYmZS5zdGNEYXRlKSxpLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LVR5cGVcIixyKSxpLnNlbmQoKSxpLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbihlKXtpZig0PT09aS5yZWFkeVN0YXRlKXt2YXIgdD1pLnJlc3BvbnNlLm1hdGNoKC8oPzo8VXBsb2FkSWQ+KShcXFMqPykoPzo8XFwvVXBsb2FkSWQ+KS8pO2NvbnNvbGUubG9nKFwidXBsb2FkSWRcIix0KSwyMDA9PT1pLnN0YXR1c3x8MjA0PT09aS5zdGF0dXM/ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLG49MTtuPD1zO24rKyl0LnB1c2gobShlLG4pKTtmKGUsdCl9KEFycmF5LmlzQXJyYXkodCkmJnRbMV0pOm4ub25FcnJvcihcInVwbG9hZFN0Y011bHRpcGFydDpkaWQgbm90IGdldCB1cGxvYWRJZFwiKX19fSksKGZ1bmN0aW9uKGUpe24ub25FcnJvcihcInVwbG9hZFN0Y011bHRpcGFydDpcIitlKX0pKTt2YXIgbD1bXSxnPW5ldyBNYXA7ZnVuY3Rpb24gZihjLHUpe3UmJkFycmF5LmlzQXJyYXkodSkmJjAhPT11Lmxlbmd0aCYmUHJvbWlzZS5hbGwodSkudGhlbigoKCk9Pnt2YXIgdT1cInVwbG9hZElkPVwiK2M7aWYoZy5zaXplPT09cyl0ZS5pbUNsaWVudC5jb250ZXh0LmdldEZpbGVUb2tlbihpLG8sXCJQT1NUXCIsdSkudGhlbigoZnVuY3Rpb24obyl7Y29uc29sZS5sb2coXCJvblN1Y2Nlc3NcIixvKSxjb25zb2xlLmxvZyhcIm9uU3VjY2Vzczp1cGxvYWRJZFwiLGMpO3ZhciBpPW5ldyBYTUxIdHRwUmVxdWVzdDtpLm9wZW4oXCJQT1NUXCIsYStcIj9cIit1LCEwKSxpLnNldFJlcXVlc3RIZWFkZXIoXCJBdXRob3JpemF0aW9uXCIsbyYmby5zdGNBdXRob3JpemF0aW9uKSxpLnNldFJlcXVlc3RIZWFkZXIoXCJ4LWFtei1jb250ZW50LXNoYTI1NlwiLG8mJm8uc3RjQ29udGVudFNoYTI1NiksaS5zZXRSZXF1ZXN0SGVhZGVyKFwieC1hbXotZGF0ZVwiLG8mJm8uc3RjRGF0ZSksaS5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIscik7dmFyIHM9XCI8Q29tcGxldGVNdWx0aXBhcnRVcGxvYWQgeG1sbnM9J2h0dHA6Ly9zMy5hbWF6b25hd3MuY29tL2RvYy8yMDA2LTAzLTAxLyc+XCIsZD1BcnJheS5mcm9tKGcua2V5cygpfHxbXSkuc29ydCgoKGUsdCk9PmUtdCkpO2NvbnNvbGUubG9nKFwia2V5c1wiLGQpLGQubWFwKChlPT57cys9YDxQYXJ0PjxFVGFnPiR7Zy5nZXQoZSl9PC9FVGFnPjxQYXJ0TnVtYmVyPiR7ZX08L1BhcnROdW1iZXI+PC9QYXJ0PmB9KSkscys9XCI8L0NvbXBsZXRlTXVsdGlwYXJ0VXBsb2FkPlwiLGkuc2VuZChzKSxjb25zb2xlLmxvZyhcInhtbFwiLHMpLGkub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7aWYoND09PWkucmVhZHlTdGF0ZSlpZigyMDA9PT1pLnN0YXR1c3x8MjA0PT09aS5zdGF0dXMpe3ZhciBvPXt9O28ubmFtZT1lLm5hbWUsby5maWxlbmFtZT10LnVwbG9hZEZpbGVOYW1lLG8udXBsb2FkTWV0aG9kPV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uVXBsb2FkTWV0aG9kLlNUQyxuLm9uQ29tcGxldGVkKG8pfWVsc2Ugbi5vbkVycm9yKFwidXBsb2FkU3RjTXVsdGlwYXJ0OnVwbG9hZCBkb2VzIG5vdCBlbmRcIil9fSksKGZ1bmN0aW9uKGUpe24ub25FcnJvcihcInVwbG9hZFN0Y011bHRpcGFydDpcIitlKX0pKTtlbHNle3ZhciBkPVtdO2Zvcih2YXIgaCBvZiBsKWQucHVzaChtKGMsaCkpO2YoYyxkKX19KSwoZT0+e2NvbnNvbGUuZXJyb3IoZSksbi5vbkVycm9yKFwidXBsb2FkU3RjTXVsdGlwYXJ0OiBjaHVua0ZpbGVzIHVwbG9hZCBmYWlsZWQgYW5kIHRob3NlIHdpbGwgcmV1cGxvYWRcIik7dmFyIHQ9W107Zm9yKHZhciBvIG9mIGwpdC5wdXNoKG0oYyxvKSk7ZihjLHQpfSkpfWZ1bmN0aW9uIG0obixzKXtyZXR1cm4gbmV3IFByb21pc2UoKChjLHUpPT57dmFyIGQ9XCJwYXJ0TnVtYmVyPVwiK3MrXCImdXBsb2FkSWQ9XCIrbjt0ZS5pbUNsaWVudC5jb250ZXh0LmdldEZpbGVUb2tlbihpLG8sXCJQVVRcIixkKS50aGVuKChmdW5jdGlvbihuKXtjb25zb2xlLmxvZyhcInNpZ25hdHVyZSBcIitzK1wiIG9uU3VjY2Vzc1wiLG4pO3ZhciBvPWUmJmUuc2xpY2UoKHMtMSkqdC5zdGNfY2h1bmtfc2l6ZSxzKnQuc3RjX2NodW5rX3NpemUpO2NvbnNvbGUubG9nKFwiZmlsZUNodW5rOnNpemVcIixvLnNpemUpO3ZhciBpPW5ldyBYTUxIdHRwUmVxdWVzdDtpLm9wZW4oXCJQVVRcIixhK1wiP1wiK2QsITApLGkuc2V0UmVxdWVzdEhlYWRlcihcIkF1dGhvcml6YXRpb25cIixuJiZuLnN0Y0F1dGhvcml6YXRpb24pLGkuc2V0UmVxdWVzdEhlYWRlcihcIngtYW16LWNvbnRlbnQtc2hhMjU2XCIsbiYmbi5zdGNDb250ZW50U2hhMjU2KSxpLnNldFJlcXVlc3RIZWFkZXIoXCJ4LWFtei1kYXRlXCIsbiYmbi5zdGNEYXRlKSxpLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LVR5cGVcIixyKSxpLnNlbmQobyksaS5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXtpZig0PT09aS5yZWFkeVN0YXRlKWlmKDIwMD09PWkuc3RhdHVzfHwyMDQ9PT1pLnN0YXR1cyl7dmFyIGU9aS5nZXRSZXNwb25zZUhlYWRlcihcImV0YWdcIik7Y29uc29sZS5sb2coXCJldGFnOlwiK3MsZSksZy5zZXQocyxlKSxjKGUpfWVsc2UgbC5pbmNsdWRlcyhzKXx8bC5wdXNoKHMpLHUocyl9fSksKGZ1bmN0aW9uKGUpe2NvbnNvbGUubG9nKFwiZ2V0RVRhZ3M6562+5ZCN6aqM6K+B5aSx6LSlXCIpLGwuaW5jbHVkZXMocyl8fGwucHVzaChzKSx1KHMpfSkpfSkpfX12YXIgVHQ9e2Zvcm06ZnVuY3Rpb24oZSx0KXt2YXIgbj1uZXcgRm9ybURhdGE7aWYodC51bmlxdWVfa2V5KXt2YXIgbz1lLm5hbWUuc3Vic3RyKGUubmFtZS5sYXN0SW5kZXhPZihcIi5cIikpLGE9RXQoKStvO24uYXBwZW5kKHQudW5pcXVlX2tleSxhKSx0LnVuaXF1ZVZhbHVlPWF9cmV0dXJuIG4uYXBwZW5kKHQuZmlsZV9kYXRhX25hbWUsZSkseXQodC5tdWx0aV9wYXJtYXMsKGZ1bmN0aW9uKGUsdCl7bi5hcHBlbmQoZSx0KX0pKSxufSxqc29uOmZ1bmN0aW9uKGUsdCl7dmFyIG49e307aWYodC51bmlxdWVfa2V5KXt2YXIgbz1lLm5hbWUuc3Vic3RyKGUubmFtZS5sYXN0SW5kZXhPZihcIi5cIikpLGE9RXQoKStvO25bdC51bmlxdWVfa2V5XT1hLHQudW5pcXVlVmFsdWU9YX1yZXR1cm4gblt0LmZpbGVfZGF0YV9uYW1lXT1lLHl0KHQubXVsdGlfcGFybWFzLChmdW5jdGlvbihlLHQpe25bZV09dH0pKSxKU09OLnN0cmluZ2lmeShuKX0sZGF0YTpmdW5jdGlvbihlLHQpe3JldHVybiBlfX07ZnVuY3Rpb24gRXQoKXt2YXIgZT0obmV3IERhdGUpLmdldFRpbWUoKTtyZXR1cm5cInh4eHh4eDR4eHh5eHh4eHh4eFwiLnJlcGxhY2UoL1t4eV0vZywoZnVuY3Rpb24odCl7dmFyIG49KGUrMTYqTWF0aC5yYW5kb20oKSklMTZ8MDtyZXR1cm4gZT1NYXRoLmZsb29yKGUvMTYpLChcInhcIj09PXQ/bjozJm58OCkudG9TdHJpbmcoMTYpfSkpfWZ1bmN0aW9uIHl0KGUsdCl7Zm9yKHZhciBuIGluIGUpdChuLGVbbl0pfXZhciBOdCxSdD0wO2Z1bmN0aW9uIE90KGUpe3RoaXMub3B0aW9ucz1mdW5jdGlvbihlKXt2YXIgdD17ZG9tYWluOlwiXCIsbWV0aG9kOlwiUE9TVFwiLGZpbGVfZGF0YV9uYW1lOlwiZmlsZVwiLHVuaXF1ZV9rZXk6XCJrZXlcIixiYXNlNjRfc2l6ZTo0MTk0MzA0LGNodW5rX3NpemU6NDE5NDMwNCxib3NfY2h1bmtfc2l6ZTo0Mjk0OTY3Mjk2LHN0Y19jaHVua19zaXplOjEwNDg1NzYwLGhlYWRlcnM6e30sbXVsdGlfcGFybWFzOnt9LHF1ZXJ5Ont9LHN1cHBvcnRfb3B0aW9uczohMCxkYXRhOlR0LmZvcm0sZ2VuVUlkOkV0fTtpZighZXx8IWUuZG9tYWluKXRocm93IG5ldyBFcnJvcihcImRvbWFpbiBpcyBudWxsXCIpO2Zvcih2YXIgbiBpbiBlKXRbbl09ZVtuXTtyZXR1cm4gdH0oZSksdGhpcy5zZXRPcHRpb25zPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7eXQoZSwoZnVuY3Rpb24oZSxuKXt0Lm9wdGlvbnNbZV09bn0pKX0sY29uc29sZS5sb2coXCJvcHRpb25zXCIsZSksdGhpcy51cGxvYWQ9ZnVuY3Rpb24oZSx0KXtpZihlKXt2YXIgbj10aGlzOyFmdW5jdGlvbihlLHQsbil7aWYobnQ9ZSxvdD10LHB0PVtdLHQub3NzQ29uZmlnKXtjb25zdCBlPUpTT04ucGFyc2UodC5vc3NDb25maWcpO2xldCBuLG8sYT1cIlwiO2NvbnN0IHI9W107ZS5mb3JFYWNoKChlPT57Y29uc3QgdD1OdW1iZXIoZS5wKS0xO2Zvcihjb25zdCBpIGluIGUpXCJhbGl5dW5cIj09PWkmJihhPWVbaV0pLFwiczNcIj09PWkmJihuPWVbaV0pLFwic3RjXCI9PT1pJiYobz1lW2ldKSxcInBcIiE9PWkmJihyW3RdPVtpLGVbaV1dKX0pKSxyLmZvckVhY2goKGZ1bmN0aW9uKGUpe2UmJnB0LnB1c2goZSl9KSksZS5sZW5ndGghPT1wdC5sZW5ndGgmJihwdD1bW1wicWluaXVcIix0LmRvbWFpbl0sW1wiYmFpZHVcIix0LnVwbG9hZEhvc3QuYm9zXSxbXCJhbGl5dW5cIixhXSxbXCJzM1wiLG5dLFtcInN0Y1wiLG9dXSl9ZWxzZSBwdD1bW1wicWluaXVcIix0LmRvbWFpbl0sW1wiYmFpZHVcIix0LnVwbG9hZEhvc3QuYm9zXV07dmFyIG87aWYodC5vc3NDb25maWcpe3ZhciBhPXQmJkpTT04ucGFyc2UodC5vc3NDb25maWcpO0FycmF5LmlzQXJyYXkoYSl8fChhPVtdKSxvPWEuZmluZCgoZT0+T2JqZWN0LmtleXMoZSkuaW5jbHVkZXMoXCJzdGNcIikpKX1pZihvJiYxPT09cGFyc2VJbnQoby5wKSYmZS5zaXplPj00MTk0MzA0KUN0KGUsdCxuKTtlbHNle3ZhciByPXQuZGF0YShlLHQpO2h0W3B0WzBdWzBdXShyLHQsbixlKX19KGUsdGhpcy5vcHRpb25zLHtvblByb2dyZXNzOmZ1bmN0aW9uKGUsbixvKXtpZihOdD1lLG8pe050PVJ0K2Uvbioobi1SdCl9ZWxzZSBSdD1OdDt0Lm9uUHJvZ3Jlc3MoTnQsbil9LG9uQ29tcGxldGVkOmZ1bmN0aW9uKGUpe3Qub25Db21wbGV0ZWQoZSl9LG9uRXJyb3I6ZnVuY3Rpb24oZSl7dC5vbkVycm9yKGUpfSxvbk9wZW46ZnVuY3Rpb24oZSl7bi54aHI9ZX19KX1lbHNlIHQub25FcnJvcihcInVwbG9hZCBmaWxlIGlzIG51bGwuXCIpfSx0aGlzLmNhbmNlbD1mdW5jdGlvbigpe3RoaXMueGhyJiZ0aGlzLnhoci5hYm9ydCgpfX12YXIgd3Q9e2luaXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBPdChlKX0sZGF0YVR5cGU6VHQscmVzaXplOmZ1bmN0aW9uKGUsdCxuKXtlLnR5cGU7dmFyIG89ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKSxhPW5ldyBGaWxlUmVhZGVyO2EucmVhZEFzRGF0YVVSTChlKSxhLm9ubG9hZD1mdW5jdGlvbihlKXt2YXIgYT1lLnRhcmdldC5yZXN1bHQscj1uZXcgSW1hZ2U7ci5zcmM9YTt2YXIgaT1yLndpZHRoLHM9ci5oZWlnaHQsYz1mdW5jdGlvbihlLHQpe3ZhciBuPTEsbz1lLndpZHRoLGE9dC5tYXhXaWR0aHx8MDthPjAmJm8+YSYmKG49YS9vKTt2YXIgcj1lLmhlaWdodCxpPXQubWF4SGVpZ2h0fHwwO2lmKGk+MCYmcj5pKXt2YXIgcz1pL3I7bj1NYXRoLm1pbihuLHMpfXZhciBjPXQubWF4U2l6ZXx8MCx1PU1hdGguY2VpbChlLnNpemUvMWUzKTtpZih1PmMpe3ZhciBkPWMvdTtuPU1hdGgubWluKG4sZCl9cmV0dXJuIG59KHt3aWR0aDppLGhlaWdodDpzLHNpemU6ZS50b3RhbH0sdCksdT1hO2M8MSYmKHU9ZnVuY3Rpb24oZSx0LG4pe28ud2lkdGg9dCxvLmhlaWdodD1uLG8uZ2V0Q29udGV4dChcIjJkXCIpLmRyYXdJbWFnZShlLDAsMCx0LG4pO3ZhciBhPVwiaW1hZ2UvanBnXCI7cmV0dXJuIG8udG9EYXRhVVJMKGEpfShyLGkqYyxzKmMpKSxuKHUpfX19O2NvbnN0IE10PWZ1bmN0aW9uKGUsdCxuKXt2YXIgbz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLGE9by5nZXRDb250ZXh0KFwiMmRcIikscj1uZXcgSW1hZ2U7ci5vbmxvYWQ9ZnVuY3Rpb24oKXt2YXIgaT1mdW5jdGlvbihlLHQsbil7dmFyIG8sYSxyLGk9ZTx0LHM9MCxjPTA7cmV0dXJuKGk/dC9lOmUvdCk+bi5zY2FsZT8oaT8oYT0xMDAsYz0oKHI9dC8obz1lLzEwMCkpLW4ubWF4SGVpZ2h0KS8yKToocj0xMDAscz0oKGE9ZS8obz10LzEwMCkpLW4ubWF4V2lkdGgpLzIpLHt3OmEsaDpyLHg6LXMseTotY30pOihpPyhvPXQvbi5tYXhIZWlnaHQscj1uLm1heEhlaWdodCxhPWUvbyk6KG89ZS9uLm1heFdpZHRoLGE9bi5tYXhXaWR0aCxyPXQvbykse3c6YSxoOnIseDotcyx5Oi1jfSl9KHIud2lkdGgsci5oZWlnaHQsdCk7by53aWR0aD1pLnc+dC5tYXhXaWR0aD90Lm1heFdpZHRoOmkudyxvLmhlaWdodD1pLmg+dC5tYXhIZWlnaHQ/dC5tYXhIZWlnaHQ6aS5oLGEuZHJhd0ltYWdlKHIsaS54LGkueSxpLncsaS5oKTt0cnl7dmFyIHM9by50b0RhdGFVUkwoZS50eXBlLHQucXVhbGl0eSksYz1uZXcgUmVnRXhwKFwiXmRhdGE6aW1hZ2UvW147XSs7YmFzZTY0LFwiKTtzPXMucmVwbGFjZShjLFwiXCIpLG4ocyl9Y2F0Y2goZSl7dGhyb3cgbmV3IEVycm9yKGUpfX0sci5zcmM9XCJzdHJpbmdcIj09dHlwZW9mIGU/XCJkYXRhOmltYWdlL2pwZztiYXNlNjQsXCIrZTpmdW5jdGlvbihlKXt2YXIgdD13aW5kb3cuVVJMfHx3aW5kb3cud2Via2l0VVJMO3JldHVybiB0P3QuY3JlYXRlT2JqZWN0VVJMKGUpOlwiXCJ9KGUpfSxfdD1mdW5jdGlvbihlLHQpe3ZhciBuPWUuZmlsZSxvPWUuY29tcHJlc3M7TXQobixvLHQpfSxVdD1mdW5jdGlvbihlLHQpe2lmKGUuZ2V0VG9rZW4pZS5nZXRUb2tlbigoZnVuY3Rpb24obixvKXtvPW98fHt9LGUubXVsdGlfcGFybWFzfHwoZS5tdWx0aV9wYXJtYXM9e30pLGUubXVsdGlfcGFybWFzLnRva2VuPW4sZS51cGxvYWRIb3N0fHwoZS51cGxvYWRIb3N0PXt9KSxlLnVwbG9hZEhvc3QuYm9zPW8uYm9zLGUub3NzQ29uZmlnPW8ub3NzQ29uZmlnLGUuYm9zSGVhZGVyfHwoZS5ib3NIZWFkZXI9e30pLGUuYm9zSGVhZGVyLmJvc0RhdGU9by5ib3NEYXRlLGUuYm9zSGVhZGVyLmJvc1Rva2VuPW8uYm9zVG9rZW4sZS5ib3NVcGxvYWRQYXRoPW8ucGF0aCxlLmFsaUhlYWRlcj17fSxlLmFsaUhlYWRlci5vc3NrZXlJZD1vLm9zc2tleUlkLGUuYWxpSGVhZGVyLm9zc1BvbGljeT1vLm9zc1BvbGljeSxlLmFsaUhlYWRlci5vc3NTaWduPW8ub3NzU2lnbixlLm9zc0J1Y2tldE5hbWU9by5vc3NCdWNrZXROYW1lLGUudXBsb2FkRmlsZU5hbWU9by5maWxlTmFtZSxlLnMzSGVhZGVyPXt9LGUuczNIZWFkZXIuczNDcmVkZW50aWFsPW8uczNDcmVkZW50aWFsLGUuczNIZWFkZXIuczNBbGdvcml0aG09by5zM0FsZ29yaXRobSxlLnMzSGVhZGVyLnMzRGF0ZT1vLnMzRGF0ZSxlLnMzSGVhZGVyLnMzUG9saWN5PW8uczNQb2xpY3ksZS5zM0hlYWRlci5zM1NpZ25hdHVyZT1vLnMzU2lnbmF0dXJlLGUuczNCdWNrZXROYW1lPW8uczNCdWNrZXROYW1lLGUuc3RjSGVhZGVyPXt9LGUuc3RjSGVhZGVyLnN0Y0F1dGhvcml6YXRpb249by5zdGNBdXRob3JpemF0aW9uLGUuc3RjSGVhZGVyLnN0Y0NvbnRlbnRTaGEyNTY9by5zdGNDb250ZW50U2hhMjU2LGUuc3RjSGVhZGVyLnN0Y0RhdGU9by5zdGNEYXRlLGUuc3RjQnVja2V0TmFtZT1vLnN0Y0J1Y2tldE5hbWUsZS5oZWFkZXJzfHwoZS5oZWFkZXJzPXt9KSxlLmJhc2U2NCYmKGUuaGVhZGVyc1tcIkNvbnRlbnQtdHlwZVwiXT1cImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbVwiLGUuaGVhZGVycy5BdXRob3JpemF0aW9uPVwiVXBUb2tlbiBcIituKSxjb25zb2xlLmxvZyhcImRhdGFcIixvKTt2YXIgYT13dC5pbml0KGUpO3QoYSl9KSk7ZWxzZXtlLmhlYWRlcnN8fChlLmhlYWRlcnM9e30pLGUuYmFzZTY0JiYoZS5oZWFkZXJzW1wiQ29udGVudC10eXBlXCJdPVwiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtXCIpO3ZhciBuPXd0LmluaXQoZSk7dChuKX19O3ZhciB4dCxidCxBdD1mdW5jdGlvbihlLHQsbil7dC51cGxvYWQoZS5maWxlLHtvbkVycm9yOmZ1bmN0aW9uKGUpe24ub25FcnJvcihlKX0sb25Qcm9ncmVzczpmdW5jdGlvbihlLHQpe24ub25Qcm9ncmVzcyhlLHQpfSxvbkNvbXBsZXRlZDpmdW5jdGlvbih0KXt0LmZpbGVuYW1lfHwodC5maWxlbmFtZT10Lmhhc2gpO3ZhciBvPWUuY29tcHJlc3NUaHVtYm5haWx8fF90O2UuY29tcHJlc3M/byhlLChmdW5jdGlvbihlKXt0LnRodW1ibmFpbD1lLG4ub25Db21wbGV0ZWQodCl9KSk6bi5vbkNvbXBsZXRlZCh0KX19KX0sUHQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0aGlzLmluc3RhbmNlPWUsdGhpcy51cGxvYWQ9ZnVuY3Rpb24oZSxuKXtBdCh7ZmlsZTplfSx0Lmluc3RhbmNlLG4pfSx0aGlzLmNhbmNlbD1mdW5jdGlvbigpe3QuaW5zdGFuY2UuY2FuY2VsKCl9fSxMdD1mdW5jdGlvbihlLHQpe3ZhciBuPXRoaXM7dGhpcy5jZmc9dCx0aGlzLmluc3RhbmNlPWUsdGhpcy51cGxvYWQ9ZnVuY3Rpb24oZSx0KXt2YXIgbz17ZmlsZTplLGNvbXByZXNzOm4uY2ZnfTtBdChvLG4uaW5zdGFuY2UsdCl9LHRoaXMuY2FuY2VsPWZ1bmN0aW9uKCl7bi5pbnN0YW5jZS5jYW5jZWwoKX19LER0PWZ1bmN0aW9uKGUsdCl7VXQoZSwoZnVuY3Rpb24obil7dmFyIG89e21heEhlaWdodDplLm1heEhlaWdodHx8MTYwLG1heFdpZHRoOmUubWF4V2lkdGh8fDE2MCxxdWFsaXR5OmUucXVhbGl0eXx8LjUsc2NhbGU6ZS5zY2FsZXx8Mi40fSxhPW5ldyBMdChuLG8pO3QoYSl9KSl9LEh0PWZ1bmN0aW9uKGUsdCl7VXQoZSwoZnVuY3Rpb24oZSl7dmFyIG49bmV3IFB0KGUpO3Qobil9KSl9LGt0PUR0O3d0LmRhdGFUeXBlO2Z1bmN0aW9uIEd0KGUpe3JldHVybiB4dD14dHx8bmV3IEF1ZGlvQ29udGV4dCxuZXcgUHJvbWlzZSgoZnVuY3Rpb24odCxuKXt4dC5kZWNvZGVBdWRpb0RhdGEoZSwoZnVuY3Rpb24oZSl7dCh7ZHVyYXRpb246ZS5kdXJhdGlvbixsZW5ndGg6ZS5sZW5ndGh9KX0pLG4pfSkpfWZ1bmN0aW9uIEJ0KGUsdCxuLG8pe3JldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24oYSl7dGUuaW1DbGllbnQuY29udGV4dC5nZXRGaWxlVG9rZW4oZSx0LG4sbykudGhlbigoZnVuY3Rpb24oZSl7YSh7Y29kZTpfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTLGRhdGE6ZX0pfSkpLmNhdGNoKChmdW5jdGlvbihlKXthKHtjb2RlOmUsbXNnOm9lW2VdfSl9KSl9KSl9ZnVuY3Rpb24gcXQoZSx0LG4sbyxhKXtyZXR1cm4gKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwiZmlsZVR5cGVcIixlLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uaXNWYWxpZEZpbGVUeXBlLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJmaWxlbmFtZVwiLHQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5TVFJJTkcpLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcInNhdmVOYW1lXCIsbixfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLlNUUklORyksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwic2VydmVyVHlwZVwiLGEsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5OVU1CRVIpLG5ldyBQcm9taXNlKChmdW5jdGlvbihpKXt0ZS5pbUNsaWVudC5jb250ZXh0LmdldEZpbGVVcmwoZSx0LG4sbyxhKS50aGVuKChmdW5jdGlvbihlKXtpKHtjb2RlOl9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1MsZGF0YTplfSl9KSkuY2F0Y2goKGZ1bmN0aW9uKGUpe2koe2NvZGU6ZX0pfSkpfSkpfWZ1bmN0aW9uIEZ0KGUsdCxuKXtyZXR1cm4gUih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG8sYSxjLHUsZCxsLGcsZixoO3JldHVybiBPKHRoaXMsKGZ1bmN0aW9uKHApe3N3aXRjaChwLmxhYmVsKXtjYXNlIDA6cmV0dXJuIG49bnx8e30sdCBpbnN0YW5jZW9mIFplPT0hMT8ody53YXJuKFwic2VuZCBtZXNzYWdlIGZhaWwgLT4gbWVzc2FnZSBwYXJhbWV0ZXIgaXMgbm90IGFuIGluc3RhbmNlIG9mIEJhc2VNZXNzYWdlXCIpLFsyLG5lLklMTEdBTF9QQVJBTVNdKTooKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwiY29udmVyc2F0aW9uLmNoYW5uZWxJZFwiLG51bGw9PWU/dm9pZCAwOmUuY2hhbm5lbElkLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuQ0hBTk5FTF9JRCksbz1lLmNvbnZlcnNhdGlvblR5cGUsYT1lLnRhcmdldElkLGM9ZS5jaGFubmVsSWQsdT1cImNvbnZlcnNhdGlvblR5cGU6XCIrbytcIix0YXJnZXRJZDpcIithLHcuZGVidWcoXCJzZW5kIG1lc3NhZ2UgIC0+XCIrdSksKGQ9T2JqZWN0LmFzc2lnbihuLHQpKS5jaGFubmVsSWQ9Y3x8XCJcIixbNCx0ZS5pbUNsaWVudC5jb250ZXh0LnNlbmRNZXNzYWdlKG8sYSxkKV0pO2Nhc2UgMTpyZXR1cm4gbD1wLnNlbnQoKSxnPWwuY29kZSxmPWwuZGF0YSxnPT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUz8oaD1aKGYpLFsyLHtjb2RlOmcsZGF0YTpofV0pOih3Lndhcm4oXCJzZW5kIG1lc3NhZ2UgZmFpbCAtPlwiK2crXCI6XCIrb2VbZ10rXCIsXCIrdSksWzIse2NvZGU6Zyxtc2c6b2VbZ10sZGF0YTpaKHtpc01lbnRpb25lZDohIW4uaXNNZW50aW9uZWQsY29udGVudDp0LmNvbnRlbnQsbWVzc2FnZVR5cGU6dC5tZXNzYWdlVHlwZSxpc1BlcnNpdGVkOnQuaXNQZXJzaXRlZHx8ITEsaXNDb3VudGVkOnQuaXNDb3VudGVkfHwhMSxkaXNhYmxlTm90aWZpY2F0aW9uOiEhKG51bGw9PW4/dm9pZCAwOm4uZGlzYWJsZU5vdGlmaWNhdGlvbiksY2FuSW5jbHVkZUV4cGFuc2lvbjohIShudWxsPT1uP3ZvaWQgMDpuLmNhbkluY2x1ZGVFeHBhbnNpb24pLGV4cGFuc2lvbjoobnVsbD09bj92b2lkIDA6bi5leHBhbnNpb24pfHxudWxsLGNvbnZlcnNhdGlvblR5cGU6byx0YXJnZXRJZDphLGNoYW5uZWxJZDpjfHxcIlwiLHNlbmRlclVzZXJJZDp0ZS5pbUNsaWVudC5jb250ZXh0LmdldEN1cnJlbnRVc2VySWQoKSxtZXNzYWdlVUlkOlwiXCIsbWVzc2FnZURpcmVjdGlvbjpfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLk1lc3NhZ2VEaXJlY3Rpb24uU0VORCxpc09mZkxpbmVNZXNzYWdlOiExLHNlbnRUaW1lOihudWxsPT1mP3ZvaWQgMDpmLnNlbnRUaW1lKXx8MCxyZWNlaXZlZFRpbWU6MCxpc1N0YXR1c01lc3NhZ2U6bi5pc1N0YXR1c01lc3NhZ2V8fCExLHJlY2VpdmVkU3RhdHVzOl9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uUmVjZWl2ZWRTdGF0dXMuVU5SRUFEfSl9XSl9fSkpfSkpfWZ1bmN0aW9uIFZ0KGUsdCxuKXtyZXR1cm4gRnQoZSxuZXcgc3QodCksbil9ZnVuY3Rpb24genQoZSx0KXtyZXR1cm4gZnVuY3Rpb24obixvLGEsaSl7cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbihzKXt2YXIgYzshZnVuY3Rpb24oZSx0LG4sbyl7dmFyIGEscj10aGlzO2lmKHZvaWQgMD09PXQmJih0PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRmlsZVR5cGUuRklMRSksYT10PT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5GaWxlVHlwZS5JTUFHRT9fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkZpbGVUeXBlLklNQUdFOl9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRmlsZVR5cGUuRklMRSwhYnQpe2J0PVwidXBsb2FkLnFpbml1cC5jb21cIjt2YXIgaT10ZS5pbUNsaWVudC5jb250ZXh0LmdldEluZm9Gcm9tQ2FjaGUoKTtpZihpJiZpLm9zc0NvbmZpZyl0cnl7dmFyIHM9SlNPTi5wYXJzZShpLm9zc0NvbmZpZykuZmluZCgoZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMCE9PWUucWluaXV9KSk7cyYmKGJ0PXMucWluaXUpfWNhdGNoKGUpe319dmFyIGM9Tih7ZG9tYWluOmJ0LGdldFRva2VuOmZ1bmN0aW9uKGUpe3RlLmltQ2xpZW50LmNvbnRleHQuZ2V0RmlsZVRva2VuKGEpLnRoZW4oKGZ1bmN0aW9uKHQpe2UodC50b2tlbix0KX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7bi5vbkZhaWwoZSl9KSl9fSxvKTsoYT09PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRmlsZVR5cGUuSU1BR0U/a3Q6SHQpKGMsKGZ1bmN0aW9uKG8pe28udXBsb2FkKGUse29uUHJvZ3Jlc3M6ZnVuY3Rpb24oZSx0KXt2YXIgbyxhPU1hdGguZmxvb3IoZS90KjEwMCk7bnVsbD09PShvPW4ub25Qcm9ncmVzcyl8fHZvaWQgMD09PW98fG8uY2FsbChuLGEpfSxvbkNvbXBsZXRlZDpmdW5jdGlvbihvKXtyZXR1cm4gUihyLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHI9dGhpcztyZXR1cm4gTyh0aGlzLChmdW5jdGlvbihpKXtyZXR1cm4gcXQoYSxvLmZpbGVuYW1lLG8ubmFtZSxvLG8udXBsb2FkTWV0aG9kKS50aGVuKChmdW5jdGlvbihpKXtyZXR1cm4gUihyLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHIscztyZXR1cm4gTyh0aGlzLChmdW5jdGlvbihjKXtyZXR1cm4gMCE9PWkuY29kZT8obi5vbkZhaWwoaSksWzJdKTooKHI9aS5kYXRhKS50eXBlPWUudHlwZSxyLm5hbWU9by5uYW1lfHxvLmZpbGVuYW1lLHQ9PT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkZpbGVUeXBlLkFVRElPPyhcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLmFycmF5QnVmZmVyP2UuYXJyYXlCdWZmZXIoKS50aGVuKEd0KS50aGVuKChmdW5jdGlvbihlKXtPYmplY3QuYXNzaWduKHIsZSksbi5vblN1Y2Nlc3Mocil9KSwoZnVuY3Rpb24oKXtuLm9uU3VjY2VzcyhyKX0pKTooKHM9bmV3IEZpbGVSZWFkZXIpLm9ubG9hZD1mdW5jdGlvbigpe3MucmVzdWx0P0d0KHMucmVzdWx0KS50aGVuKChmdW5jdGlvbihlKXtPYmplY3QuYXNzaWduKHIsZSksbi5vblN1Y2Nlc3Mocil9KSwoZnVuY3Rpb24oKXtuLm9uU3VjY2VzcyhyKX0pKTpuLm9uU3VjY2VzcyhyKX0scy5vbmVycm9yPWZ1bmN0aW9uKCl7ci5kdXJhdGlvbj0wLG4ub25TdWNjZXNzKHIpfSxzLnJlYWRBc0FycmF5QnVmZmVyKGUpKSxbMl0pOihhPT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5GaWxlVHlwZS5JTUFHRSYmKHIudGh1bWJuYWlsPW8udGh1bWJuYWlsKSxuLm9uU3VjY2VzcyhyKSxbMl0pKX0pKX0pKX0pKS5jYXRjaCgoZnVuY3Rpb24oZSl7bi5vbkZhaWwoZSl9KSksWzJdfSkpfSkpfSxvbkVycm9yOmZ1bmN0aW9uKGUpe24ub25GYWlsKGUpfX0pfSkpfShvLmZpbGUsZSx7b25Qcm9ncmVzczpudWxsPT1hP3ZvaWQgMDphLm9uUHJvZ3Jlc3Msb25TdWNjZXNzOmZ1bmN0aW9uKGUpe3ZhciByLGM9KG51bGw9PT0ocj1udWxsPT1hP3ZvaWQgMDphLm9uQ29tcGxldGUpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLmNhbGwoYSx7dXJsOmUuZG93bmxvYWRVcmx9KSl8fHQoZSxvKTtGdChuLGMsaSkudGhlbihzKX0sb25GYWlsOmZ1bmN0aW9uKGUpe3Moe2NvZGU6X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuVVBMT0FEX0ZJTEVfRkFJTEVELG1zZzplfHxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZVtfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5VUExPQURfRklMRV9GQUlMRURdfSl9fSwobnVsbD09PShjPWkpfHx2b2lkIDA9PT1jP3ZvaWQgMDpjLnRodW1ibmFpbENvbmZpZyl8fHt9KX0pKX19dmFyIEt0PXp0KF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRmlsZVR5cGUuRklMRSwoZnVuY3Rpb24oZSx0KXtyZXR1cm4gbmV3IHV0KHtuYW1lOmUubmFtZSxzaXplOnQuZmlsZS5zaXplLHR5cGU6dC5maWxlLnR5cGUsZmlsZVVybDplLmRvd25sb2FkVXJsLHVzZXI6dC51c2VyLGV4dHJhOnQuZXh0cmF9KX0pKSxqdD16dChfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkZpbGVUeXBlLklNQUdFLChmdW5jdGlvbihlLHQpe3JldHVybiBuZXcgYXQoe2NvbnRlbnQ6ZS50aHVtYm5haWwsaW1hZ2VVcmk6ZS5kb3dubG9hZFVybCx1c2VyOnQudXNlcixleHRyYTp0LmV4dHJhfSl9KSksWHQ9enQoX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5GaWxlVHlwZS5BVURJTywoZnVuY3Rpb24oZSx0KXtyZXR1cm4gbmV3IHJ0KHtyZW1vdGVVcmw6ZS5kb3dubG9hZFVybCxkdXJhdGlvbjplLmR1cmF0aW9uLHR5cGU6ZS50eXBlLHVzZXI6dC51c2VyLGV4dHJhOnQuZXh0cmF9KX0pKSxXdD16dChfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkZpbGVUeXBlLlNJR0hULChmdW5jdGlvbihlLHQpe3JldHVybiBuZXcgaXQoe3NpZ2h0VXJsOmUuZG93bmxvYWRVcmwsY29udGVudDp0LnRodW1ibmFpbCxkdXJhdGlvbjp0LmR1cmF0aW9uLHNpemU6dC5maWxlLnNpemV8fGUuc2l6ZSxuYW1lOnQubmFtZXx8ZS5uYW1lLHVzZXI6dC51c2VyLGV4dHJhOnQuZXh0cmF9KX0pKTtmdW5jdGlvbiBKdChlLHQpe3JldHVybiBSKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbixvLGEsaSxjO3JldHVybiBPKHRoaXMsKGZ1bmN0aW9uKHUpe3N3aXRjaCh1LmxhYmVsKXtjYXNlIDA6cmV0dXJuICgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm9wdGlvbnMudGltZXN0YW1wXCIsbnVsbD09dD92b2lkIDA6dC50aW1lc3RhbXAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5OVU1CRVIpLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm9wdGlvbnMuY291bnRcIixudWxsPT10P3ZvaWQgMDp0LmNvdW50LF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuTlVNQkVSKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJvcHRpb25zLm9yZGVyXCIsbnVsbD09dD92b2lkIDA6dC5vcmRlciwoZnVuY3Rpb24oZSl7cmV0dXJuIDA9PT1lfHwxPT09ZX0pKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJjb252ZXJzYXRpb24uY2hhbm5lbElkXCIsbnVsbD09ZT92b2lkIDA6ZS5jaGFubmVsSWQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5DSEFOTkVMX0lEKSxuPVwiY29udmVyc2F0aW9uVHlwZTpcIitlLmNvbnZlcnNhdGlvblR5cGUrXCIsdGFyZ2V0SWQ6XCIrZS50YXJnZXRJZCx3LmRlYnVnKFwiZ2V0IGhpc3RvcnkgbWVzc2FnZSAtPlwiK24pLFs0LHRlLmltQ2xpZW50LmNvbnRleHQuZ2V0SGlzdG9yeU1lc3NhZ2UoZS5jb252ZXJzYXRpb25UeXBlLGUudGFyZ2V0SWQsbnVsbD09dD92b2lkIDA6dC50aW1lc3RhbXAsbnVsbD09dD92b2lkIDA6dC5jb3VudCxudWxsPT10P3ZvaWQgMDp0Lm9yZGVyLG51bGw9PWU/dm9pZCAwOmUuY2hhbm5lbElkKV07Y2FzZSAxOnJldHVybiBvPXUuc2VudCgpLGE9by5jb2RlLGk9by5kYXRhLGE9PT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTJiZpPyhjPWkubGlzdC5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBaKGUpfSkpLFsyLHtjb2RlOmEsZGF0YTp7bGlzdDpjLGhhc01vcmU6aS5oYXNNb3JlfX1dKToody53YXJuKFwiZ2V0IGhpc3RvcnkgbWVzc2FnZSBmYWlsIC0+XCIrYStcIjpcIitvZVthXStcIixcIituKSxbMix7Y29kZTphLG1zZzpvZVthXX1dKX19KSl9KSl9ZnVuY3Rpb24gWXQoZSx0KXtyZXR1cm4gUih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG4sbyxhLGksYztyZXR1cm4gTyh0aGlzLChmdW5jdGlvbih1KXtzd2l0Y2godS5sYWJlbCl7Y2FzZSAwOnJldHVybiAoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJvcHRpb25zLnRpbWVzdGFtcFwiLG51bGw9PXQ/dm9pZCAwOnQudGltZXN0YW1wLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuTlVNQkVSKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJvcHRpb25zLmNvdW50XCIsbnVsbD09dD92b2lkIDA6dC5jb3VudCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLk5VTUJFUiksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwib3B0aW9ucy5vcmRlclwiLG51bGw9PXQ/dm9pZCAwOnQub3JkZXIsKGZ1bmN0aW9uKGUpe3JldHVybiAwPT09ZXx8MT09PWV9KSksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwiY29udmVyc2F0aW9uLmNoYW5uZWxJZFwiLG51bGw9PWU/dm9pZCAwOmUuY2hhbm5lbElkLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuQ0hBTk5FTF9JRCksbj1cImNvbnZlcnNhdGlvblR5cGU6XCIrZS5jb252ZXJzYXRpb25UeXBlK1wiLHRhcmdldElkOlwiK2UudGFyZ2V0SWQsdy5kZWJ1ZyhcImdldCBoaXN0b3J5IG1lc3NhZ2UgLT5cIituKSxbNCx0ZS5pbUNsaWVudC5jb250ZXh0LmdldFJlbW90ZUhpc3RvcnlNZXNzYWdlcyhlLmNvbnZlcnNhdGlvblR5cGUsZS50YXJnZXRJZCwobnVsbD09dD92b2lkIDA6dC50aW1lc3RhbXApfHwwLChudWxsPT10P3ZvaWQgMDp0LmNvdW50KXx8MjAsKG51bGw9PXQ/dm9pZCAwOnQub3JkZXIpfHwwLGUuY2hhbm5lbElkfHxcIlwiKV07Y2FzZSAxOnJldHVybiBvPXUuc2VudCgpLGE9by5jb2RlLGk9by5kYXRhLGE9PT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTJiZpPyhjPWkubGlzdC5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBaKGUpfSkpLFsyLHtjb2RlOmEsZGF0YTp7bGlzdDpjLGhhc01vcmU6aS5oYXNNb3JlfX1dKToody53YXJuKFwiZ2V0IGhpc3RvcnkgbWVzc2FnZSBmYWlsIC0+XCIrYStcIjpcIitvZVthXStcIixcIituKSxbMix7Y29kZTphLG1zZzpvZVthXX1dKX19KSl9KSl9ZnVuY3Rpb24gUXQoZSx0LG4sbyl7cmV0dXJuIFIodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBhLHIsaSxzLGM7cmV0dXJuIE8odGhpcywoZnVuY3Rpb24odSl7c3dpdGNoKHUubGFiZWwpe2Nhc2UgMDpyZXR1cm4gYT17dGFyZ2V0SWQ6ZSxjb252ZXJzYXRpb25UeXBlOl9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQ29udmVyc2F0aW9uVHlwZS5QUklWQVRFLGNoYW5uZWxJZDpvfSxyPW5ldyBaZShcIlJDOlJlYWROdGZcIix7bWVzc2FnZVVJZDp0LGxhc3RNZXNzYWdlU2VuZFRpbWU6bix0eXBlOjF9KSxbNCxGdChhLHIpXTtjYXNlIDE6cmV0dXJuIGk9dS5zZW50KCkscz1pLmNvZGUsYz1pLm1zZywwPT09cz9bMix7Y29kZTpzfV06WzIse2NvZGU6cyxtc2c6Y31dfX0pKX0pKX1mdW5jdGlvbiAkdChlLHQsbil7cmV0dXJuIFIodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBvLGEscixpLGM7cmV0dXJuIE8odGhpcywoZnVuY3Rpb24odSl7c3dpdGNoKHUubGFiZWwpe2Nhc2UgMDpyZXR1cm4gKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwibWVzc2FnZVVJZFwiLHQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5TVFJJTkcsITApLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcImNoYW5uZWxJZFwiLG4sX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5DSEFOTkVMX0lEKSxvPVwibWVzc2FnZVVJZDpcIit0K1wiLHRhcmdldElkOlwiK2Usdy5kZWJ1ZyhcInNlbmQgcmVhZCByZWNlaXB0IG1lc3NhZ2UgLT5cIitvKSxhPW5ldyBaZShcIlJDOlJSUmVxTXNnXCIse21lc3NhZ2VVSWQ6dH0pLFs0LEZ0KHt0YXJnZXRJZDplLGNvbnZlcnNhdGlvblR5cGU6X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Db252ZXJzYXRpb25UeXBlLkdST1VQLGNoYW5uZWxJZDpufSxhKV07Y2FzZSAxOnJldHVybiByPXUuc2VudCgpLGk9ci5jb2RlLGM9ci5tc2csMD09PWk/WzIse2NvZGU6aX1dOlsyLHtjb2RlOmksbXNnOmN9XX19KSl9KSl9ZnVuY3Rpb24gWnQoZSx0LG4pe3JldHVybiBSKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXtyZXR1cm4gTyh0aGlzLChmdW5jdGlvbihlKXt0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIG1ldGhvZCBpcyBkZXByZWNhdGVkLCBwbGVhc2UgdXNlIG1ldGhvZCBzZW5kUmVhZFJlY2VpcHRSZXNwb25zZVYyLlwiKX0pKX0pKX1mdW5jdGlvbiBlbihlLHQsbil7cmV0dXJuIFIodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBvLGEsaSxjLHUsZCxsO3JldHVybiBPKHRoaXMsKGZ1bmN0aW9uKGcpe3N3aXRjaChnLmxhYmVsKXtjYXNlIDA6cmV0dXJuICgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcInRhcmdldElkXCIsZSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLlNUUklORywhMCksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwibWVzc2FnZUxpc3RcIix0LF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuT0JKRUNULCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJjaGFubmVsSWRcIixuLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuQ0hBTk5FTF9JRCksT2JqZWN0LmtleXModCkuZm9yRWFjaCgoZnVuY3Rpb24oZSl7KDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKGUsdFtlXSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLkFSUkFZKX0pKSxvPXt0YXJnZXRJZDplLGNvbnZlcnNhdGlvblR5cGU6X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Db252ZXJzYXRpb25UeXBlLkdST1VQLGNoYW5uZWxJZDpufSxpPXRlLmltQ2xpZW50LmNvbnRleHQuZ2V0SW5mb0Zyb21DYWNoZSgpLDAhPT0oYz0obnVsbD09aT92b2lkIDA6aS5ncnBSUlZlcil8fDApP1szLDJdOih1PW5ldyBaZShcIlJDOlJSUnNwTXNnXCIse3JlY2VpcHRNZXNzYWdlRGljOnR9KSxbNCxGdChvLHUpXSk7Y2FzZSAxOnJldHVybiBhPWcuc2VudCgpLFszLDRdO2Nhc2UgMjpyZXR1cm4gMSE9PWM/WzMsNF06KGQ9W10sT2JqZWN0LmtleXModCkuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dFtlXS5mb3JFYWNoKChmdW5jdGlvbihlKXstMT09PWQuaW5kZXhPZihlKSYmZC5wdXNoKGUpfSkpfSkpLGQubGVuZ3RoP1s0LHRlLmltQ2xpZW50LmNvbnRleHQuc2VuZFJlYWRSZWNlaXB0TWVzc2FnZShlLGQsbildOih3Lndhcm4oXCJFcnJvciBpbiBwYXJhbWV0ZXIgbWVzc2FnZUxpc3QuXCIpLFsyLHtjb2RlOl9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlBBUkFNRVRFUl9FUlJPUn1dKSk7Y2FzZSAzOmE9Zy5zZW50KCksZy5sYWJlbD00O2Nhc2UgNDpyZXR1cm4obD1hLmNvZGUpPT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUz9bMix7Y29kZTpsfV06KHcud2FybihcInNlbmQgcmVhZCByZWNlaXB0IG1lc3NhZ2UgZmFpbCAtPlwiK2wrXCI6XCIrb2VbbF0pLFsyLHtjb2RlOmwsbXNnOm9lW2xdfV0pfX0pKX0pKX1mdW5jdGlvbiB0bihlLHQpe3JldHVybiBSKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbixvLGEscjtyZXR1cm4gTyh0aGlzLChmdW5jdGlvbihpKXtzd2l0Y2goaS5sYWJlbCl7Y2FzZSAwOnJldHVybiAoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJjb252ZXJzYXRpb24udHlwZVwiLGUuY29udmVyc2F0aW9uVHlwZSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLk5VTUJFUiwhMCksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwiY29udmVyc2F0aW9uLnRhcmdldElkXCIsZS50YXJnZXRJZCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLlNUUklORywhMCksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwibGFzdE1lc3NhZ2VTZW5kVGltZVwiLHQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5OVU1CRVIsITApLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcImNvbnZlcnNhdGlvbi5jaGFubmVsSWRcIixudWxsPT1lP3ZvaWQgMDplLmNoYW5uZWxJZCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLkNIQU5ORUxfSUQpLG49bmV3IFplKFwiUkM6U1JTTXNnXCIse2xhc3RNZXNzYWdlU2VuZFRpbWU6dH0pLFs0LEZ0KGUsbildO2Nhc2UgMTpyZXR1cm4gbz1pLnNlbnQoKSxhPW8uY29kZSxyPW8ubXNnLDA9PT1hP1syLHtjb2RlOmF9XTpbMix7Y29kZTphLG1zZzpyfV19fSkpfSkpfWZ1bmN0aW9uIG5uKGUsdCl7cmV0dXJuIFIodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBuLG8sYSxpLGM7cmV0dXJuIE8odGhpcywoZnVuY3Rpb24odSl7c3dpdGNoKHUubGFiZWwpe2Nhc2UgMDpyZXR1cm4gKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwib3B0aW9ucy5tZXNzYWdlVUlkXCIsdC5tZXNzYWdlVUlkLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuU1RSSU5HLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJvcHRpb25zLnNlbnRUaW1lXCIsdC5zZW50VGltZSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLk5VTUJFUiwhMCksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwib3B0aW9ucy5kaXNhYmxlTm90aWZpY2F0aW9uXCIsbnVsbD09dD92b2lkIDA6dC5kaXNhYmxlTm90aWZpY2F0aW9uLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuQk9PTEVBTiksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwib3B0aW9ucy5wdXNoQ29uZmlnXCIsbnVsbD09dD92b2lkIDA6dC5wdXNoQ29uZmlnLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuT0JKRUNUKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJjb252ZXJzYXRpb24uY2hhbm5lbElkXCIsbnVsbD09ZT92b2lkIDA6ZS5jaGFubmVsSWQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5DSEFOTkVMX0lEKSxuPXt1c2VyOnQudXNlcixjaGFubmVsSWQ6ZS5jaGFubmVsSWR8fFwiXCIsZGlzYWJsZU5vdGlmaWNhdGlvbjpudWxsPT10P3ZvaWQgMDp0LmRpc2FibGVOb3RpZmljYXRpb24scHVzaENvbmZpZzpudWxsPT10P3ZvaWQgMDp0LnB1c2hDb25maWd9LG89XCJjb252ZXJzYXRpb25UeXBlOlwiK2UuY29udmVyc2F0aW9uVHlwZStcIix0YXJnZXRJZDpcIitlLnRhcmdldElkK1wiLG1lc3NhZ2VVSWQ6XCIrdC5tZXNzYWdlVUlkLHcuZGVidWcoXCJyZWNhbGwgbWVzc2FnZSAtPlwiK28pLFs0LHRlLmltQ2xpZW50LmNvbnRleHQucmVjYWxsTWVzc2FnZShlLmNvbnZlcnNhdGlvblR5cGUsZS50YXJnZXRJZCx0Lm1lc3NhZ2VVSWQsdC5zZW50VGltZSxuKV07Y2FzZSAxOnJldHVybiBhPXUuc2VudCgpLGk9YS5jb2RlLGM9YS5kYXRhLGk9PT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTJiZjP1syLHtjb2RlOmksZGF0YTpaKGMpfV06KHcud2FybihcInJlY2FsbCBtZXNzYWdlIGZhaWwgLT5cIitpK1wiOlwiK29lW2ldK1wiLFwiK28pLFsyLHtjb2RlOmksbXNnOm9lW2ldfV0pfX0pKX0pKX1mdW5jdGlvbiBvbihlLHQpe3JldHVybiBSKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbixvO3JldHVybiBPKHRoaXMsKGZ1bmN0aW9uKGEpe3N3aXRjaChhLmxhYmVsKXtjYXNlIDA6cmV0dXJuICgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm9wdGlvbnNcIix0LChmdW5jdGlvbihlKXtyZXR1cm4gKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5pc0FycmF5KShlKSYmZS5sZW5ndGh9KSwhMCksdC5mb3JFYWNoKChmdW5jdGlvbihlKXsoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJvcHRpb25zLm1lc3NhZ2VVSWRcIixlLm1lc3NhZ2VVSWQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5TVFJJTkcsITApLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm9wdGlvbnMuc2VudFRpbWVcIixlLnNlbnRUaW1lLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuTlVNQkVSLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJvcHRpb25zLm1lc3NhZ2VEaXJlY3Rpb25cIixlLm1lc3NhZ2VEaXJlY3Rpb24sKGZ1bmN0aW9uKGUpe3JldHVybiAxPT09ZXx8Mj09PWV9KSwhMCl9KSksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwiY29udmVyc2F0aW9uLmNoYW5uZWxJZFwiLG51bGw9PWU/dm9pZCAwOmUuY2hhbm5lbElkLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuQ0hBTk5FTF9JRCksbj1cImNvbnZlcnNhdGlvblR5cGU6XCIrZS5jb252ZXJzYXRpb25UeXBlK1wiLHRhcmdldElkOlwiK2UudGFyZ2V0SWQsdy5kZWJ1ZyhcImRlbGV0ZSBtZXNzYWdlcyAtPlwiK24pLFs0LHRlLmltQ2xpZW50LmNvbnRleHQuZGVsZXRlUmVtb3RlTWVzc2FnZShlLmNvbnZlcnNhdGlvblR5cGUsZS50YXJnZXRJZCx0LGUuY2hhbm5lbElkKV07Y2FzZSAxOnJldHVybihvPWEuc2VudCgpKSE9PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1M/KHcud2FybihcImRlbGV0ZSBtZXNzYWdlIGZhaWwgLT5cIitvK1wiOlwiK29lW29dK1wiLFwiK24pLFsyLHtjb2RlOm8sbXNnOm9lW29dfV0pOlsyLHtjb2RlOl9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1N9XX19KSl9KSl9ZnVuY3Rpb24gYW4oZSx0KXtyZXR1cm4gUih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG4sbztyZXR1cm4gTyh0aGlzLChmdW5jdGlvbihhKXtzd2l0Y2goYS5sYWJlbCl7Y2FzZSAwOnJldHVybiAoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJvcHRpb25zLnRpbWVzdGFtcFwiLHQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5OVU1CRVIsITApLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcImNvbnZlcnNhdGlvbi5jaGFubmVsSWRcIixudWxsPT1lP3ZvaWQgMDplLmNoYW5uZWxJZCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLkNIQU5ORUxfSUQpLG49XCJjb252ZXJzYXRpb25UeXBlOlwiK2UuY29udmVyc2F0aW9uVHlwZStcIix0YXJnZXRJZDpcIitlLnRhcmdldElkLHcuZGVidWcoXCJjbGVhciBtZXNzYWdlIC0+XCIrbiksWzQsdGUuaW1DbGllbnQuY29udGV4dC5kZWxldGVSZW1vdGVNZXNzYWdlQnlUaW1lc3RhbXAoZS5jb252ZXJzYXRpb25UeXBlLGUudGFyZ2V0SWQsdCxlLmNoYW5uZWxJZCldO2Nhc2UgMTpyZXR1cm4obz1hLnNlbnQoKSkhPT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTPyh3Lndhcm4oXCJjbGVhciBtZXNzYWdlIC0+XCIrbytcIjpcIitvZVtvXStcIixcIituKSxbMix7Y29kZTpvLG1zZzpvZVtvXX1dKTpbMix7Y29kZTpfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTfV19fSkpfSkpfWZ1bmN0aW9uIHJuKGUsdCl7cmV0dXJuIFIodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBuLG8sYSxpLGMsdSxkLGw7cmV0dXJuIE8odGhpcywoZnVuY3Rpb24oZyl7c3dpdGNoKGcubGFiZWwpe2Nhc2UgMDpyZXR1cm4gKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwiZXhwYW5zaW9uXCIsZSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLk9CSkVDVCwhMCksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwibWVzc2FnZVwiLHQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5PQkpFQ1QsITApLG49dC5jb252ZXJzYXRpb25UeXBlLG89dC50YXJnZXRJZCxhPXQubWVzc2FnZVVJZCxpPXQuY2FuSW5jbHVkZUV4cGFuc2lvbixjPXQuZXhwYW5zaW9uLHU9dC5jaGFubmVsSWQsZD1cImNvbnZlcnNhdGlvblR5cGU6XCIrbitcIix0YXJnZXRJZDpcIitvK1wiLG1lc3NhZ2VVSWQ6XCIrYSx3LmRlYnVnKFwidXBkYXRlIG1lc3NhZ2UgZXhwYW5zaW9uIC0+XCIrZCksWzQsdGUuaW1DbGllbnQuY29udGV4dC5zZW5kRXhwYW5zaW9uTWVzc2FnZSh7Y29udmVyc2F0aW9uVHlwZTpuLHRhcmdldElkOm8sbWVzc2FnZVVJZDphLGV4cGFuc2lvbjplLGNhbkluY2x1ZGVFeHBhbnNpb246aSxvcmlnaW5FeHBhbnNpb246YyxjaGFubmVsSWQ6dX0pXTtjYXNlIDE6cmV0dXJuKGw9Zy5zZW50KCkuY29kZSkhPT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTPyh3Lndhcm4oXCJ1cGRhdGUgbWVzc2FnZSBleHBhbnNpb24gZmFpbCAtPlwiK2wrXCI6XCIrb2VbbF0rXCIsXCIrZCksWzIse2NvZGU6bCxtc2c6b2VbbF19XSk6WzIse2NvZGU6bH1dfX0pKX0pKX1mdW5jdGlvbiBzbihlLHQpe3JldHVybiBSKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbixvLGEsaSxjLHUsZDtyZXR1cm4gTyh0aGlzLChmdW5jdGlvbihsKXtzd2l0Y2gobC5sYWJlbCl7Y2FzZSAwOnJldHVybiAoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJrZXlzXCIsZSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLkFSUkFZLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJtZXNzYWdlXCIsdCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLk9CSkVDVCwhMCksbj10LmNvbnZlcnNhdGlvblR5cGUsbz10LnRhcmdldElkLGE9dC5tZXNzYWdlVUlkLGk9dC5jYW5JbmNsdWRlRXhwYW5zaW9uLGM9dC5jaGFubmVsSWQsdT1cImNvbnZlcnNhdGlvblR5cGU6XCIrbitcIix0YXJnZXRJZDpcIitvK1wiLG1lc3NhZ2VVSWQ6XCIrYSx3LmRlYnVnKFwicmVtb3ZlIG1lc3NhZ2UgZXhwYW5zaW9uIC0+XCIrdSksWzQsdGUuaW1DbGllbnQuY29udGV4dC5zZW5kRXhwYW5zaW9uTWVzc2FnZSh7Y29udmVyc2F0aW9uVHlwZTpuLHRhcmdldElkOm8sbWVzc2FnZVVJZDphLGNhbkluY2x1ZGVFeHBhbnNpb246aSxrZXlzOmUsY2hhbm5lbElkOmN9KV07Y2FzZSAxOnJldHVybihkPWwuc2VudCgpLmNvZGUpIT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUz8ody53YXJuKFwicmVtb3ZlIG1lc3NhZ2UgZXhwYW5zaW9uIGZhaWwgLT5cIitkK1wiOlwiK29lW2RdK1wiLFwiK3UpLFsyLHtjb2RlOmQsbXNnOm9lW2RdfV0pOlsyLHtjb2RlOmR9XX19KSl9KSl9ZnVuY3Rpb24gY24oZSx0KXtyZXR1cm4gUih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG4sbyxhLGksYztyZXR1cm4gTyh0aGlzLChmdW5jdGlvbih1KXtzd2l0Y2godS5sYWJlbCl7Y2FzZSAwOnJldHVybiAoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJ0eXBpbmdDb250ZW50VHlwZVwiLHQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5TVFJJTkcsITApLG49XCJjb252ZXJzYXRpb25UeXBlOlwiK2UuY29udmVyc2F0aW9uVHlwZStcIix0YXJnZXRJZDpcIitlLnRhcmdldElkLHcuZGVidWcoXCJzZW5kIHR5cGluZyBzdGF0dXMgbWVzc2FnZSAtPlwiK24pLG89e21lc3NhZ2VUeXBlOlwiUkM6VHlwU3RzXCIsY29udGVudDp7dHlwaW5nQ29udGVudFR5cGU6dH0saXNTdGF0dXNNZXNzYWdlOiEwLGNoYW5uZWxJZDplLmNoYW5uZWxJZH0sWzQsdGUuaW1DbGllbnQuY29udGV4dC5zZW5kTWVzc2FnZShlLmNvbnZlcnNhdGlvblR5cGUsZS50YXJnZXRJZCxvKV07Y2FzZSAxOnJldHVybiBhPXUuc2VudCgpLGk9YS5jb2RlLGM9YS5kYXRhLGk9PT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTP1syLHtjb2RlOmksZGF0YTpaKGMpfV06KHcud2FybihcInNlbmQgdHlwaW5nIHN0YXR1cyBtZXNzYWdlIGZhaWwgLT5cIitpK1wiOlwiK29lW2ldK1wiLFwiK24pLFsyLHtjb2RlOmksbXNnOm9lW2ldfV0pfX0pKX0pKX1mdW5jdGlvbiB1bihlLHQsbil7cmV0dXJuIFIodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBvLGEsaSxjO3JldHVybiBPKHRoaXMsKGZ1bmN0aW9uKHUpe3N3aXRjaCh1LmxhYmVsKXtjYXNlIDA6cmV0dXJuICgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm1lc3NhZ2VVSWRcIix0LF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuU1RSSU5HLCEwKSxvPVwibWVzc2FnZVVJZDpcIit0K1wiLHRhcmdldElkOlwiK2Usdy5kZWJ1ZyhcImdldCBtZXNzYWdlIHJlYWRlciAtPlwiK28pLFs0LHRlLmltQ2xpZW50LmNvbnRleHQuZ2V0TWVzc2FnZVJlYWRlcihlLHQsbildO2Nhc2UgMTpyZXR1cm4gYT11LnNlbnQoKSxpPWEuY29kZSxjPWEuZGF0YSxpPT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUz9bMix7Y29kZTppLGRhdGE6Y31dOih3Lndhcm4oXCJnZXQgbWVzc2FnZSByZWFkZXIgZmFpbCAtPlwiK2krXCI6XCIrb2VbaV0rXCIsXCIrbyksWzIse2NvZGU6aSxtc2c6b2VbaV19XSl9fSkpfSkpfWZ1bmN0aW9uIGRuKGUsdCxuLG8sYSl7cmV0dXJuICgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm1lc3NhZ2VUeXBlXCIsZSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLlNUUklORywhMCksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwiaXNQZXJzaXRlZFwiLHQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5CT09MRUFOLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJpc0NvdW50ZWRcIixuLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuQk9PTEVBTiwhMCksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwiaXNTdGF0dXNNZXNzYWdlXCIsYSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLkJPT0xFQU4sITEpLHRlLmltQ2xpZW50LmNvbnRleHQucmVnaXN0ZXJNZXNzYWdlVHlwZShlLHQsbixvLGEpLGV0KGUsdCxuKX1mdW5jdGlvbiBsbihlKXtyZXR1cm4gUih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHQsbixvO3JldHVybiBPKHRoaXMsKGZ1bmN0aW9uKGEpe3N3aXRjaChhLmxhYmVsKXtjYXNlIDA6cmV0dXJuICgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18udXNpbmdDcHBFbmdpbmUpKCk/KCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcImNvbnZlcnNhdGlvbi5jb252ZXJzYXRpb25UeXBlXCIsZS5jb252ZXJzYXRpb25UeXBlLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuTlVNQkVSLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJjb252ZXJzYXRpb24udGFyZ2V0SWRcIixlLnRhcmdldElkLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuU1RSSU5HLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJjb252ZXJzYXRpb24uY2hhbm5lbElkXCIsbnVsbD09ZT92b2lkIDA6ZS5jaGFubmVsSWQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5DSEFOTkVMX0lEKSxbNCx0ZS5pbUNsaWVudC5jb250ZXh0LmdldEZpcnN0VW5yZWFkTWVzc2FnZShlLmNvbnZlcnNhdGlvblR5cGUsZS50YXJnZXRJZCxlLmNoYW5uZWxJZCldKTpbMix7Y29kZTpfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5OT1RfU1VQUE9SVCxtc2c6b2VbX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuTk9UX1NVUFBPUlRdfV07Y2FzZSAxOnJldHVybiB0PWEuc2VudCgpLG49dC5jb2RlLG89dC5kYXRhLG49PT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTP1syLHtjb2RlOm4sZGF0YTpvfV06KHcud2FybihcImluc2VydE1lc3NhZ2UgLT5jb2RlOlwiK24rXCIsdGFyZ2V0SWQ6XCIrZS50YXJnZXRJZCksWzIse2NvZGU6bixtc2c6b2Vbbl19XSl9fSkpfSkpfWZ1bmN0aW9uIGduKGUsdCxuKXtyZXR1cm4gdm9pZCAwPT09biYmKG49e30pLFIodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBvLGEsaSxzLGMsdSxkLGwsZyxmLG0saCxwLHYsSSxTO3JldHVybiBPKHRoaXMsKGZ1bmN0aW9uKFQpe3N3aXRjaChULmxhYmVsKXtjYXNlIDA6cmV0dXJuICgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18udXNpbmdDcHBFbmdpbmUpKCk/KG89dC5zZW5kZXJVc2VySWQsYT10Lm1lc3NhZ2VUeXBlLGk9dC5jb250ZW50LHM9dC5tZXNzYWdlRGlyZWN0aW9uLGM9dC5tZXNzYWdlVUlkLHU9dC5jYW5JbmNsdWRlRXhwYW5zaW9uLGQ9dC5leHBhbnNpb24sbD10LmRpc2FibGVOb3RpZmljYXRpb24sZz10LnNlbnRUaW1lLGY9dC5zZW50U3RhdHVzLHcuaW5mbyhcImluc2VydE1lc3NhZ2UgLT50YXJnZXRJZDpcIitlLnRhcmdldElkK1wiLGNvbnZlcnNhdGlvblR5cGU6XCIrZS5jb252ZXJzYXRpb25UeXBlKSxtPW4uaXNVbnJlYWQsaD1uLnNlYXJjaENvbnRlbnQscD17c2VuZGVyVXNlcklkOm8sbWVzc2FnZVR5cGU6YSxjb250ZW50OmksbWVzc2FnZURpcmVjdGlvbjpzLHNlbnRUaW1lOmcsc2VudFN0YXR1czpmLHNlYXJjaENvbnRlbnQ6aCxpc1VucmVhZDptLG1lc3NhZ2VVSWQ6YyxkaXNhYmxlTm90aWZpY2F0aW9uOmwsY2FuSW5jbHVkZUV4cGFuc2lvbjp1LGV4cGFuc2lvbk1zZzpKU09OLnN0cmluZ2lmeShkKSxjaGFubmVsSWQ6ZS5jaGFubmVsSWR8fFwiXCJ9LFs0LHRlLmltQ2xpZW50LmNvbnRleHQuaW5zZXJ0TWVzc2FnZShlLmNvbnZlcnNhdGlvblR5cGUsZS50YXJnZXRJZCxwKV0pOlsyLHtjb2RlOl9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLk5PVF9TVVBQT1JULG1zZzpvZVtfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5OT1RfU1VQUE9SVF19XTtjYXNlIDE6cmV0dXJuIHY9VC5zZW50KCksST12LmNvZGUsUz12LmRhdGEsST09PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1M/WzIse2NvZGU6SSxkYXRhOlooUyl9XToody53YXJuKFwiaW5zZXJ0TWVzc2FnZSAtPmNvZGU6XCIrSStcIix0YXJnZXRJZDpcIitlLnRhcmdldElkKSxbMix7Y29kZTpJLG1zZzpvZVtJXX1dKX19KSl9KSl9ZnVuY3Rpb24gZm4oZSl7cmV0dXJuIFIodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciB0LG4sbztyZXR1cm4gTyh0aGlzLChmdW5jdGlvbihhKXtzd2l0Y2goYS5sYWJlbCl7Y2FzZSAwOnJldHVybiAoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLnVzaW5nQ3BwRW5naW5lKSgpP1s0LHRlLmltQ2xpZW50LmNvbnRleHQuZ2V0TWVzc2FnZShlKV06WzIse2NvZGU6X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuTk9UX1NVUFBPUlQsbXNnOm9lW19yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLk5PVF9TVVBQT1JUXX1dO2Nhc2UgMTpyZXR1cm4gdD1hLnNlbnQoKSxuPXQuY29kZSxvPXQuZGF0YSxuPT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUz9bMix7Y29kZTpuLGRhdGE6WihvKX1dOih3Lndhcm4oXCJnZXRNZXNzYWdlIC0+Y29kZTpcIituK1wiLG1lc3NhZ2VJZDpcIitlKSxbMix7Y29kZTpuLG1zZzpvZVtuXX1dKX19KSl9KSl9ZnVuY3Rpb24gbW4oZSl7aWYoISgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18udXNpbmdDcHBFbmdpbmUpKCkpcmV0dXJue2NvZGU6X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuTk9UX1NVUFBPUlQsbXNnOm9lW19yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLk5PVF9TVVBQT1JUXX07KDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwiY29udmVyc2F0aW9uVHlwZVwiLGUuY29udmVyc2F0aW9uVHlwZSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLk5VTUJFUiwhMCksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwidGFyZ2V0SWRcIixlLnRhcmdldElkLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuU1RSSU5HLCEwKTt2YXIgdD10ZS5pbUNsaWVudC5jb250ZXh0LmdldFVucmVhZE1lbnRpb25lZE1lc3NhZ2VzKGUuY29udmVyc2F0aW9uVHlwZSxlLnRhcmdldElkKSxuPVtdO3JldHVybiB0JiZ0Lmxlbmd0aCYmdC5mb3JFYWNoKChmdW5jdGlvbihlKXtyZXR1cm4gbi5wdXNoKFooZSkpfSkpLHtjb2RlOl9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1MsZGF0YTpufX1mdW5jdGlvbiBobihlLHQsbixvKXtyZXR1cm4gUih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIGEsaSxjLHU7cmV0dXJuIE8odGhpcywoZnVuY3Rpb24oZCl7c3dpdGNoKGQubGFiZWwpe2Nhc2UgMDpyZXR1cm4gKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy51c2luZ0NwcEVuZ2luZSkoKT8oKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwiY29udmVyc2F0aW9uVHlwZVwiLGUuY29udmVyc2F0aW9uVHlwZSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLk5VTUJFUiwhMCksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwidGFyZ2V0SWRcIixlLnRhcmdldElkLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuU1RSSU5HLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJrZXl3b3JkXCIsdCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLlNUUklORywhMCksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwidGltZXN0YW1wXCIsbixfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLk5VTUJFUiksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwiY291bnRcIixvLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuTlVNQkVSKSwxLFs0LHRlLmltQ2xpZW50LmNvbnRleHQuc2VhcmNoTWVzc2FnZUJ5Q29udGVudChlLmNvbnZlcnNhdGlvblR5cGUsZS50YXJnZXRJZCx0LG4sbywxLGUuY2hhbm5lbElkKV0pOlsyLHtjb2RlOl9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLk5PVF9TVVBQT1JULG1zZzpvZVtfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5OT1RfU1VQUE9SVF19XTtjYXNlIDE6cmV0dXJuIGE9ZC5zZW50KCksaT1hLmNvZGUsYz1hLmRhdGEsaT09PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1M/KHU9W10sKG51bGw9PWM/dm9pZCAwOmMubWVzc2FnZXMpJiZjLm1lc3NhZ2VzLmxlbmd0aCYmYy5tZXNzYWdlcy5mb3JFYWNoKChmdW5jdGlvbihlKXtyZXR1cm4gdS5wdXNoKFooZSkpfSkpLFsyLHtjb2RlOmksZGF0YTp7bWVzc2FnZXM6dSxjb3VudDpudWxsPT1jP3ZvaWQgMDpjLmNvdW50fX1dKToody53YXJuKFwic2VhcmNoTWVzc2FnZXMgLT5jb2RlOlwiK2krXCIsdGFyZ2V0SWQ6XCIrZS50YXJnZXRJZCksWzIse2NvZGU6aSxtc2c6b2VbaV19XSl9fSkpfSkpfWZ1bmN0aW9uIHBuKGUsdCxuKXtyZXR1cm4gUih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG87cmV0dXJuIE8odGhpcywoZnVuY3Rpb24oYSl7c3dpdGNoKGEubGFiZWwpe2Nhc2UgMDpyZXR1cm4gKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy51c2luZ0NwcEVuZ2luZSkoKT8oKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwiY29udmVyc2F0aW9uVHlwZVwiLGUuY29udmVyc2F0aW9uVHlwZSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLk5VTUJFUiwhMCksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwidGFyZ2V0SWRcIixlLnRhcmdldElkLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuU1RSSU5HLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJ0aW1lc3RhbXBcIix0LF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuTlVNQkVSLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJjbGVhblNwYWNlXCIsbixfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLkJPT0xFQU4pLFs0LHRlLmltQ2xpZW50LmNvbnRleHQuZGVsZXRlTWVzc2FnZXNCeVRpbWVzdGFtcChlLmNvbnZlcnNhdGlvblR5cGUsZS50YXJnZXRJZCx0LG4sZS5jaGFubmVsSWQpXSk6WzIse2NvZGU6X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuTk9UX1NVUFBPUlQsbXNnOm9lW19yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLk5PVF9TVVBQT1JUXX1dO2Nhc2UgMTpyZXR1cm4obz1hLnNlbnQoKSk9PT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTP1syLHtjb2RlOm99XToody53YXJuKFwiZGVsZXRlTG9jYWxNZXNzYWdlc0J5VGltZXN0YW1wIC0+Y29kZTpcIitvK1wiLHRhcmdldElkOlwiK2UudGFyZ2V0SWQpLFsyLHtjb2RlOm8sbXNnOm9lW29dfV0pfX0pKX0pKX1mdW5jdGlvbiB2bihlKXtyZXR1cm4gUih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHQ7cmV0dXJuIE8odGhpcywoZnVuY3Rpb24obil7c3dpdGNoKG4ubGFiZWwpe2Nhc2UgMDpyZXR1cm4gKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy51c2luZ0NwcEVuZ2luZSkoKT8ody5pbmZvKFwiY2xlYXJNZXNzYWdlcyAtPnRhcmdldElkOlwiK2UudGFyZ2V0SWQrXCIsY29udmVyc2F0aW9uVHlwZTpcIitlLmNvbnZlcnNhdGlvblR5cGUpLFs0LHRlLmltQ2xpZW50LmNvbnRleHQuY2xlYXJNZXNzYWdlcyhlLmNvbnZlcnNhdGlvblR5cGUsZS50YXJnZXRJZCxlLmNoYW5uZWxJZCldKTpbMix7Y29kZTpfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5OT1RfU1VQUE9SVCxtc2c6b2VbX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuTk9UX1NVUFBPUlRdfV07Y2FzZSAxOnJldHVybih0PW4uc2VudCgpKT09PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1M/WzIse2NvZGU6dH1dOih3Lndhcm4oXCJjbGVhck1lc3NhZ2VzIC0+Y29kZTpcIit0K1wiLHRhcmdldElkOlwiK2UudGFyZ2V0SWQpLFsyLHtjb2RlOnQsbXNnOm9lW3RdfV0pfX0pKX0pKX1mdW5jdGlvbiBJbihlLHQsbixvKXtyZXR1cm4gUih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIGEsaSxzO3JldHVybiBPKHRoaXMsKGZ1bmN0aW9uKGMpe3N3aXRjaChjLmxhYmVsKXtjYXNlIDA6cmV0dXJuICgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18udXNpbmdDcHBFbmdpbmUpKCk/KHcuaW5mbyhcInNlYXJjaENvbnZlcnNhdGlvbkJ5Q29udGVudCAtPmtleXdvcmQ6XCIrZSksWzQsdGUuaW1DbGllbnQuY29udGV4dC5zZWFyY2hDb252ZXJzYXRpb25CeUNvbnRlbnQoZSxuLG8sdCldKTpbMix7Y29kZTpfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5OT1RfU1VQUE9SVCxtc2c6b2VbX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuTk9UX1NVUFBPUlRdfV07Y2FzZSAxOnJldHVybiBhPWMuc2VudCgpLGk9YS5jb2RlLHM9YS5kYXRhLGk9PT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTP1syLHtjb2RlOmksZGF0YTpzfV06KHcud2FybihcInNlYXJjaENvbnZlcnNhdGlvbkJ5Q29udGVudCAtPmNvZGU6XCIraStcIixrZXl3b3JkOlwiK2UpLFsyLHtjb2RlOmksbXNnOm9lW2ldfV0pfX0pKX0pKX1mdW5jdGlvbiBTbihlLHQpe3JldHVybiBSKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbjtyZXR1cm4gTyh0aGlzLChmdW5jdGlvbihvKXtzd2l0Y2goby5sYWJlbCl7Y2FzZSAwOnJldHVybiAoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLnVzaW5nQ3BwRW5naW5lKSgpPyh3LmluZm8oXCJjbGVhclVucmVhZENvdW50QnlUaW1lc3RhbXAgLT50YXJnZXRJZDpcIitlLnRhcmdldElkK1wiLGNvbnZlcnNhdGlvblR5cGU6XCIrZS5jb252ZXJzYXRpb25UeXBlKSxbNCx0ZS5pbUNsaWVudC5jb250ZXh0LmNsZWFyVW5yZWFkQ291bnRCeVRpbWVzdGFtcChlLmNvbnZlcnNhdGlvblR5cGUsZS50YXJnZXRJZCx0LGUuY2hhbm5lbElkKV0pOlsyLHtjb2RlOl9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLk5PVF9TVVBQT1JULG1zZzpvZVtfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5OT1RfU1VQUE9SVF19XTtjYXNlIDE6cmV0dXJuKG49by5zZW50KCkpPT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUz9bMix7Y29kZTpufV06KHcud2FybihcImNsZWFyVW5yZWFkQ291bnRCeVRpbWVzdGFtcCAtPmNvZGU6XCIrbitcIix0YXJnZXRJZDpcIitlLnRhcmdldElkKSxbMix7Y29kZTpuLG1zZzpvZVtuXX1dKX19KSl9KSl9ZnVuY3Rpb24gQ24oZSx0KXtyZXR1cm4gUih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG47cmV0dXJuIE8odGhpcywoZnVuY3Rpb24obyl7c3dpdGNoKG8ubGFiZWwpe2Nhc2UgMDpyZXR1cm4gKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy51c2luZ0NwcEVuZ2luZSkoKT8oKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwibWVzc2FnZUlkXCIsZSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLk5VTUJFUiwhMCksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwicmVjZWl2ZWRTdGF0dXNcIix0LF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuTlVNQkVSLCEwKSx3LmluZm8oXCJzZXRNZXNzYWdlUmVjZWl2ZWRTdGF0dXMgLT5tZXNzYWdlSWQ6XCIrZStcIixyZWNlaXZlZFN0YXR1czpcIit0KSxbNCx0ZS5pbUNsaWVudC5jb250ZXh0LnNldE1lc3NhZ2VSZWNlaXZlZFN0YXR1cyhlLHQpXSk6WzIse2NvZGU6X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuTk9UX1NVUFBPUlQsbXNnOm9lW19yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLk5PVF9TVVBQT1JUXX1dO2Nhc2UgMTpyZXR1cm4obj1vLnNlbnQoKSk9PT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTP1syLHtjb2RlOm59XToody53YXJuKFwic2V0TWVzc2FnZVJlY2VpdmVkU3RhdHVzIC0+Y29kZTpcIituK1wiLG1lc3NhZ2VJZDpcIitlKSxbMix7Y29kZTpuLG1zZzpvZVtuXX1dKX19KSl9KSl9ZnVuY3Rpb24gVG4oZSl7cmV0dXJuIFIodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciB0O3JldHVybiBPKHRoaXMsKGZ1bmN0aW9uKG4pe3N3aXRjaChuLmxhYmVsKXtjYXNlIDA6cmV0dXJuICgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcInRhZy50YWdJZFwiLGUudGFnSWQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5TVFJJTkcsITApLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcInRhZy50YWdJZFwiLGUudGFnSWQsKGZ1bmN0aW9uKGUpe3JldHVybiBlLmxlbmd0aDw9MTB9KSksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwidGFnLnRhZ05hbWVcIixlLnRhZ05hbWUsKGZ1bmN0aW9uKGUpe3JldHVybiBlLmxlbmd0aDw9MTV9KSksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwidGFnLnRhZ05hbWVcIixlLnRhZ05hbWUsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5TVFJJTkcsITApLHcuaW5mbyhcImNyZWF0ZVRhZyAtPnRhZ0lkOlwiK2UudGFnSWQrXCIsdGFnTmFtZTpcIitlLnRhZ05hbWUpLFs0LHRlLmltQ2xpZW50LmNvbnRleHQuY3JlYXRlVGFnKGUpXTtjYXNlIDE6cmV0dXJuKHQ9bi5zZW50KCkuY29kZSk9PT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTP1syLHtjb2RlOnR9XToody53YXJuKFwiY3JlYXRlVGFnIC0+Y29kZTpcIit0K1wiLHRhZ0lkOlwiK2UudGFnSWQpLFsyLHtjb2RlOnQsbXNnOm9lW3RdfV0pfX0pKX0pKX1mdW5jdGlvbiBFbihlKXtyZXR1cm4gUih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHQ7cmV0dXJuIE8odGhpcywoZnVuY3Rpb24obil7c3dpdGNoKG4ubGFiZWwpe2Nhc2UgMDpyZXR1cm4gKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwidGFnSWRcIixlLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuU1RSSU5HLCEwKSx3LmluZm8oXCJyZW1vdmVUYWcgLT50YWdJZDpcIitlKSxbNCx0ZS5pbUNsaWVudC5jb250ZXh0LnJlbW92ZVRhZyhlKV07Y2FzZSAxOnJldHVybih0PW4uc2VudCgpLmNvZGUpPT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUz9bMix7Y29kZTp0fV06KHcud2FybihcInJlbW92ZVRhZyAtPmNvZGU6XCIrdCtcIix0YWdJZDpcIitlKSxbMix7Y29kZTp0LG1zZzpvZVt0XX1dKX19KSl9KSl9ZnVuY3Rpb24geW4oZSl7cmV0dXJuIFIodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciB0O3JldHVybiBPKHRoaXMsKGZ1bmN0aW9uKG4pe3N3aXRjaChuLmxhYmVsKXtjYXNlIDA6cmV0dXJuICgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcInRhZy50YWdJZFwiLGUudGFnSWQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5TVFJJTkcsITApLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcInRhZy50YWdOYW1lXCIsZS50YWdOYW1lLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuU1RSSU5HLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJ0YWcudGFnTmFtZVwiLGUudGFnTmFtZSwoZnVuY3Rpb24oZSl7cmV0dXJuIGUubGVuZ3RoPD0xNX0pKSx3LmluZm8oXCJ1cGRhdGVUYWcgLT50YWdJZDpcIitlLnRhZ0lkK1wiLHRhZ05hbWU6XCIrZS50YWdOYW1lKSxbNCx0ZS5pbUNsaWVudC5jb250ZXh0LnVwZGF0ZVRhZyhlKV07Y2FzZSAxOnJldHVybih0PW4uc2VudCgpLmNvZGUpPT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUz9bMix7Y29kZTp0fV06KHcud2FybihcInVwZGF0ZVRhZyAtPmNvZGU6XCIrdCtcIix0YWdJZDpcIitlLnRhZ0lkKSxbMix7Y29kZTp0LG1zZzpvZVt0XX1dKX19KSl9KSl9ZnVuY3Rpb24gTm4oKXtyZXR1cm4gUih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIGUsdCxuO3JldHVybiBPKHRoaXMsKGZ1bmN0aW9uKG8pe3N3aXRjaChvLmxhYmVsKXtjYXNlIDA6cmV0dXJuWzQsdGUuaW1DbGllbnQuY29udGV4dC5nZXRUYWdMaXN0KCldO2Nhc2UgMTpyZXR1cm4gZT1vLnNlbnQoKSx0PWUuY29kZSxuPWUuZGF0YSx0PT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUz9bMix7Y29kZTpfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTLGRhdGE6bn1dOih3Lndhcm4oXCJnZXRUYWdMaXN0IC0+Y29kZTpcIit0KSxbMix7Y29kZTp0LG1zZzpvZVt0XX1dKX19KSl9KSl9ZnVuY3Rpb24gUm4oZSl7cmV0dXJuIFIodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciB0LG4sbztyZXR1cm4gTyh0aGlzLChmdW5jdGlvbihhKXtzd2l0Y2goYS5sYWJlbCl7Y2FzZSAwOnJldHVybiAoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJjb252ZXJzYXRpb25UeXBlXCIsZS5jb252ZXJzYXRpb25UeXBlLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuTlVNQkVSKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJ0YXJnZXRJZFwiLGUudGFyZ2V0SWQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5TVFJJTkcpLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcImNoYW5uZWxJZFwiLGUuY2hhbm5lbElkLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuQ0hBTk5FTF9JRCksdy5pbmZvKFwiZ2V0VGFnc0ZvckNvbnZlcnNhdGlvbiAtPnRhcmdldElkOlwiK2UudGFyZ2V0SWQrXCIsY29udmVyc2F0aW9uVHlwZTpcIitlLmNvbnZlcnNhdGlvblR5cGUpLFs0LHRlLmltQ2xpZW50LmNvbnRleHQuZ2V0VGFnc0ZvckNvbnZlcnNhdGlvbihlKV07Y2FzZSAxOnJldHVybiB0PWEuc2VudCgpLG49dC5jb2RlLG89dC5kYXRhLG49PT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTP1syLHtjb2RlOm4sZGF0YTpvfV06WzIse2NvZGU6bixtc2c6b2Vbbl19XX19KSl9KSl9ZnVuY3Rpb24gT24oZSx0KXtyZXR1cm4gUih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG47cmV0dXJuIE8odGhpcywoZnVuY3Rpb24obyl7c3dpdGNoKG8ubGFiZWwpe2Nhc2UgMDpyZXR1cm4gKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwidGFnSWRcIixlLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuU1RSSU5HLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJjb252ZXJzYXRpb25zXCIsdCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLkFSUkFZLCEwKSx0LmZvckVhY2goKGZ1bmN0aW9uKGUpeygwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcImNvbnZlcnNhdGlvbi5jb252ZXJzYXRpb25UeXBlXCIsZS5jb252ZXJzYXRpb25UeXBlLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuTlVNQkVSLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJjb252ZXJzYXRpb24udGFyZ2V0SWRcIixlLnRhcmdldElkLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuU1RSSU5HLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJjb252ZXJzYXRpb24uY2hhbm5lbElkXCIsZS5jaGFubmVsSWQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5DSEFOTkVMX0lEKX0pKSx3LmluZm8oXCJhZGRUYWdGb3JDb252ZXJzYXRpb25zIC0+dGFnSWQ6XCIrZSksWzQsdGUuaW1DbGllbnQuY29udGV4dC5hZGRUYWdGb3JDb252ZXJzYXRpb25zKGUsdCldO2Nhc2UgMTpyZXR1cm4obj1vLnNlbnQoKS5jb2RlKT09PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1M/WzIse2NvZGU6bn1dOih3Lndhcm4oXCJhZGRUYWdGb3JDb252ZXJzYXRpb25zIC0+Y29kZTpcIituK1wiLHRhZ0lkOlwiK2UpLFsyLHtjb2RlOm4sbXNnOm9lW25dfV0pfX0pKX0pKX1mdW5jdGlvbiB3bihlLHQpe3JldHVybiBSKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbjtyZXR1cm4gTyh0aGlzLChmdW5jdGlvbihvKXtzd2l0Y2goby5sYWJlbCl7Y2FzZSAwOnJldHVybiAoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJ0YWdJZFwiLGUsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5TVFJJTkcsITApLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcImNvbnZlcnNhdGlvbnNcIix0LF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuQVJSQVksITApLHQuZm9yRWFjaCgoZnVuY3Rpb24oZSl7KDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwiY29udmVyc2F0aW9uLmNvbnZlcnNhdGlvblR5cGVcIixlLmNvbnZlcnNhdGlvblR5cGUsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5OVU1CRVIsITApLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcImNvbnZlcnNhdGlvbi50YXJnZXRJZFwiLGUudGFyZ2V0SWQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5TVFJJTkcsITApLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcImNvbnZlcnNhdGlvbi5jaGFubmVsSWRcIixlLmNoYW5uZWxJZCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLkNIQU5ORUxfSUQpfSkpLHcuaW5mbyhcInJlbW92ZVRhZ0ZvckNvbnZlcnNhdGlvbnMgLT50YWdJZDpcIitlKSxbNCx0ZS5pbUNsaWVudC5jb250ZXh0LnJlbW92ZVRhZ0ZvckNvbnZlcnNhdGlvbnMoZSx0KV07Y2FzZSAxOnJldHVybihuPW8uc2VudCgpLmNvZGUpPT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUz9bMix7Y29kZTpufV06KHcud2FybihcInJlbW92ZVRhZ0ZvckNvbnZlcnNhdGlvbnMgLT5jb2RlOlwiK24rXCIsdGFnSWQ6XCIrZSksWzIse2NvZGU6bixtc2c6b2Vbbl19XSl9fSkpfSkpfWZ1bmN0aW9uIE1uKGUsdCl7cmV0dXJuIFIodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBuO3JldHVybiBPKHRoaXMsKGZ1bmN0aW9uKG8pe3N3aXRjaChvLmxhYmVsKXtjYXNlIDA6cmV0dXJuICgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcImNvbnZlcnNhdGlvbi5jb252ZXJzYXRpb25UeXBlXCIsZS5jb252ZXJzYXRpb25UeXBlLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuTlVNQkVSLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJjb252ZXJzYXRpb24udGFyZ2V0SWRcIixlLnRhcmdldElkLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuU1RSSU5HLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJjb252ZXJzYXRpb24uY2hhbm5lbElkXCIsZS5jaGFubmVsSWQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5DSEFOTkVMX0lEKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJ0YWdJZHNcIix0LF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuQVJSQVksITApLHQuZm9yRWFjaCgoZnVuY3Rpb24oZSl7KDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwidGFnSWRcIixlLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuU1RSSU5HLCEwKX0pKSx3LmluZm8oXCJyZW1vdmVUYWdzRm9yQ29udmVyc2F0aW9uIC0+dGFnSWRzOlwiK3QrXCIsdGFyZ2V0SWQ6XCIrZS50YXJnZXRJZCtcIixjb252ZXJzYXRpb25UeXBlOlwiK2UuY29udmVyc2F0aW9uVHlwZSksWzQsdGUuaW1DbGllbnQuY29udGV4dC5yZW1vdmVUYWdzRm9yQ29udmVyc2F0aW9uKGUsdCldO2Nhc2UgMTpyZXR1cm4obj1vLnNlbnQoKS5jb2RlKT09PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1M/WzIse2NvZGU6bn1dOih3Lndhcm4oXCJyZW1vdmVUYWdzRm9yQ29udmVyc2F0aW9uIC0+Y29kZTpcIituK1wiLHRhZ0lkczpcIit0KSxbMix7Y29kZTpuLG1zZzpvZVtuXX1dKX19KSl9KSl9ZnVuY3Rpb24gX24oZSx0KXtyZXR1cm4gUih0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG47cmV0dXJuIE8odGhpcywoZnVuY3Rpb24obyl7c3dpdGNoKG8ubGFiZWwpe2Nhc2UgMDpyZXR1cm4gKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwidGFnSWRcIixlLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuU1RSSU5HLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJjb252ZXJzYXRpb25zXCIsdCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLkFSUkFZLCEwKSx0LmZvckVhY2goKGZ1bmN0aW9uKGUpeygwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcImNvbnZlcnNhdGlvbi5jb252ZXJzYXRpb25UeXBlXCIsZS5jb252ZXJzYXRpb25UeXBlLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuTlVNQkVSLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJjb252ZXJzYXRpb24udGFyZ2V0SWRcIixlLnRhcmdldElkLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuU1RSSU5HLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJjb252ZXJzYXRpb24uY2hhbm5lbElkXCIsZS5jaGFubmVsSWQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5DSEFOTkVMX0lEKX0pKSx3LmluZm8oXCJyZW1vdmVUYWdGb3JDb252ZXJzYXRpb25zIC0+dGFnSWQ6XCIrZSksWzQsdGUuaW1DbGllbnQuY29udGV4dC5yZW1vdmVUYWdGb3JDb252ZXJzYXRpb25zKGUsdCldO2Nhc2UgMTpyZXR1cm4obj1vLnNlbnQoKS5jb2RlKT09PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1M/WzIse2NvZGU6bn1dOih3Lndhcm4oXCJyZW1vdmVUYWdGb3JDb252ZXJzYXRpb25zIC0+Y29kZTpcIituK1wiLHRhZ0lkOlwiK2UpLFsyLHtjb2RlOm4sbXNnOm9lW25dfV0pfX0pKX0pKX1mdW5jdGlvbiBVbihlLHQsbil7cmV0dXJuIFIodGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciBvLGEsaTtyZXR1cm4gTyh0aGlzLChmdW5jdGlvbihjKXtzd2l0Y2goYy5sYWJlbCl7Y2FzZSAwOnJldHVybiAoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJ0YWdJZFwiLGUsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5TVFJJTkcsITApLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcImNvdW50XCIsdCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLk5VTUJFUiwhMCksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwic3RhcnRUaW1lXCIsbixfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLk5VTUJFUiwhMCksdy5pbmZvKFwiZ2V0Q29udmVyc2F0aW9uTGlzdEJ5VGFnIC0+dGFnSWQ6XCIrZSksWzQsdGUuaW1DbGllbnQuY29udGV4dC5nZXRDb252ZXJzYXRpb25MaXN0QnlUYWcoZSxuLHQpXTtjYXNlIDE6cmV0dXJuIG89Yy5zZW50KCksYT1vLmNvZGUsaT1vLmRhdGEsYT09PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1M/WzIse2NvZGU6YSxkYXRhOml9XToody53YXJuKFwiZ2V0Q29udmVyc2F0aW9uTGlzdEJ5VGFnIC0+Y29kZTpcIithK1wiLHRhZ0lkOlwiK2UpLFsyLHtjb2RlOmEsbXNnOm9lW2FdfV0pfX0pKX0pKX1mdW5jdGlvbiB4bihlLHQpe3JldHVybiBSKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbixvLGE7cmV0dXJuIE8odGhpcywoZnVuY3Rpb24oaSl7c3dpdGNoKGkubGFiZWwpe2Nhc2UgMDpyZXR1cm4gKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwidGFnSWRcIixlLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuU1RSSU5HLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJjb250YWluTXV0ZWRcIix0LF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQXNzZXJ0UnVsZXMuQk9PTEVBTiwhMCksdy5pbmZvKFwiZ2V0VW5yZWFkQ291bnRCeVRhZyAtPnRhZ0lkOlwiK2UpLFs0LHRlLmltQ2xpZW50LmNvbnRleHQuZ2V0VW5yZWFkQ291bnRCeVRhZyhlLHQpXTtjYXNlIDE6cmV0dXJuIG49aS5zZW50KCksbz1uLmNvZGUsYT1uLmRhdGEsdy5pbmZvKG8sYSksbz09PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1M/WzIse2NvZGU6byxkYXRhOmF9XToody53YXJuKFwiZ2V0VW5yZWFkQ291bnRCeVRhZyAtPmNvZGU6XCIrbytcIix0YWdJZDpcIitlKSxbMix7Y29kZTpvLG1zZzpvZVtvXX1dKX19KSl9KSl9ZnVuY3Rpb24gYm4oZSx0LG4pe3JldHVybiBSKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbyxhO3JldHVybiBPKHRoaXMsKGZ1bmN0aW9uKGkpe3N3aXRjaChpLmxhYmVsKXtjYXNlIDA6cmV0dXJuICgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcInRhZ0lkXCIsZSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLlNUUklORywhMCksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwiY29udmVyc2F0aW9uLnRhcmdldElkXCIsdC50YXJnZXRJZCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLlNUUklORywhMCksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwiY29udmVyc2F0aW9uLmNvbnZlcnNhdGlvblR5cGVcIix0LmNvbnZlcnNhdGlvblR5cGUsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5OVU1CRVIsITApLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcImNvbnZlcnNhdGlvbi5jaGFubmVsSWRcIix0LmNoYW5uZWxJZCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkFzc2VydFJ1bGVzLkNIQU5ORUxfSUQpLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcInN0YXR1cy5pc1RvcFwiLG4sX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Bc3NlcnRSdWxlcy5CT09MRUFOLCEwKSx3LmluZm8oXCJzZXRDb252ZXJzYXRpb25TdGF0dXNJblRhZyAtPnRhZ0lkOlwiK2UrXCIsdGFyZ2V0SWQ6XCIrdC50YXJnZXRJZCtcIixjb252ZXJzYXRpb25UeXBlXCIrdC5jb252ZXJzYXRpb25UeXBlKSxbNCx0ZS5pbUNsaWVudC5jb250ZXh0LnNldENvbnZlcnNhdGlvblN0YXR1c0luVGFnKGUsdCx7aXNUb3A6bn0pXTtjYXNlIDE6cmV0dXJuIG89aS5zZW50KCksKGE9by5jb2RlKT09PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1M/WzIse2NvZGU6YX1dOih3Lndhcm4oXCJzZXRDb252ZXJzYXRpb25TdGF0dXNJblRhZyAtPmNvZGU6XCIrYStcIix0YWdJZDpcIitlKSxbMix7Y29kZTphLG1zZzpvZVthXX1dKX19KSl9KSl9enQoX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5GaWxlVHlwZS5DT01CSU5FX0hUTUwsKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyBjdCh7cmVtb3RlVXJsOmUuZG93bmxvYWRVcmwsbmFtZUxpc3Q6dC5uYW1lTGlzdCxzdW1tYXJ5TGlzdDp0LnN1bW1hcnlMaXN0LGNvbnZlcnNhdGlvblR5cGU6dC5jb252ZXJzYXRpb25UeXBlLHVzZXI6dC51c2VyLGV4dHJhOnQuZXh0cmF9KX0pKTt2YXIgQW49e0NPTUVUOlwiY29tZXRcIixXRUJTT0NLRVQ6XCJ3ZWJzb2NrZXRcIn0sUG49e1RFWFQ6XCJSQzpUeHRNc2dcIixWT0lDRTpcIlJDOlZjTXNnXCIsSFFfVk9JQ0U6XCJSQzpIUVZDTXNnXCIsSU1BR0U6XCJSQzpJbWdNc2dcIixHSUY6XCJSQzpHSUZNc2dcIixSSUNIX0NPTlRFTlQ6XCJSQzpJbWdUZXh0TXNnXCIsTE9DQVRJT046XCJSQzpMQlNNc2dcIixGSUxFOlwiUkM6RmlsZU1zZ1wiLFNJR0hUOlwiUkM6U2lnaHRNc2dcIixDT01CSU5FOlwiUkM6Q29tYmluZU1zZ1wiLENIUk1fS1ZfTk9USUZZOlwiUkM6Y2hybUtWTm90aU1zZ1wiLExPR19DT01NQU5EOlwiUkM6TG9nQ21kTXNnXCIsRVhQQU5TSU9OX05PVElGWTpcIlJDOk1zZ0V4TXNnXCIsUkVGRVJFTkNFOlwiUkM6UmVmZXJlbmNlTXNnXCIsUkVDQUxMX01FU1NBR0VfVFlQRTpcIlJDOlJjQ21kXCJ9O19yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uVmVyc2lvbk1hbmFnZS5hZGQoXCJpbWxpYlwiLFwiNS4xLjJcIiksX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5WZXJzaW9uTWFuYWdlLnZhbGlkRW5naW5lKFwifjUuMS4yXCIpfHx3LmVycm9yKFwiVGhlIGN1cnJlbnQgZW5naW5lIHZlcnNpb24gJ1wiK19yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uVmVyc2lvbk1hbmFnZS5nZXRJbmZvKCkuZW5naW5lK1wiJyBlcnJvcu+8jGltbGliIHJlcXVpcmVkIGVuZ2luZSB2ZXJzaW9uIGF0IGxlYXN0ICd+NS4xLjInLlwiKTtcblxuXG4vLyMgc291cmNlVVJMPXdlYnBhY2s6Ly9Acm9uZ2Nsb3VkL3Jjdm9pY2Vyb29tbGliLXYxLy4vbm9kZV9tb2R1bGVzL0Byb25nY2xvdWQvaW1saWItbmV4dC9kaXN0L2luZGV4LmVzbS5qcz8iKTsvKioqL30sLyoqKi8iLi9ub2RlX21vZHVsZXMvQHJvbmdjbG91ZC9wbHVnaW4tcnRjL2Rpc3QvaW5kZXguZXNtLmpzIjovKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXAogICEqKiogLi9ub2RlX21vZHVsZXMvQHJvbmdjbG91ZC9wbHVnaW4tcnRjL2Rpc3QvaW5kZXguZXNtLmpzICoqKiEKICBcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovIC8qKiovZnVuY3Rpb24gbm9kZV9tb2R1bGVzUm9uZ2Nsb3VkUGx1Z2luUnRjRGlzdEluZGV4RXNtSnMoX191bnVzZWRfd2VicGFja19tb2R1bGUsX193ZWJwYWNrX2V4cG9ydHNfXyxfX3dlYnBhY2tfcmVxdWlyZV9fKXtldmFsKCJfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywge1xuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIlJUQ0pvaW5UeXBlXCI6ICgpID0+ICgvKiByZWV4cG9ydCBzYWZlICovIF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uUlRDSm9pblR5cGUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIkJhY2tncm91bmRQaWN0dXJlRmlsbE1vZGVcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gaXIpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIk1peExheW91dE1vZGVcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gbnIpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIk1peFZpZGVvUmVuZGVyTW9kZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBzciksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiUkNBYnN0cmFjdFJvb21cIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gcnIpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIlJDQXVkaWVuY2VDbGllbnRcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gUnIpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIlJDQXVkaWVuY2VMaXZpbmdSb29tXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIFRyKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJSQ0NhbWVyYVZpZGVvVHJhY2tcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gaXQpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIlJDRnJhbWVSYXRlXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIEJlKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJSQ0lubmVyQ0ROUHVsbElzSHR0cHNcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gU3IpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIlJDSW5uZXJDRE5QdWxsS2luZFwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBnciksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiUkNLaWNrUmVhc29uXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHlyKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJSQ0xpdmluZ1Jvb21cIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gX3IpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIlJDTGl2aW5nVHlwZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBsciksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiUkNMb2NhbEF1ZGlvVHJhY2tcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gUWUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIlJDTG9jYWxGaWxlQXVkaW9UcmFja1wiOiAoKSA9PiAoLyogYmluZGluZyAqLyB0dCksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiUkNMb2NhbEZpbGVUcmFja1wiOiAoKSA9PiAoLyogYmluZGluZyAqLyBaZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiUkNMb2NhbEZpbGVWaWRlb1RyYWNrXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIGV0KSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJSQ0xvY2FsVHJhY2tcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gemUpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIlJDTG9jYWxWaWRlb1RyYWNrXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIFhlKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJSQ01DVUNvbmZpZ0J1aWxkZXJcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gYXIpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIlJDTWVkaWFUeXBlXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIEZlKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJSQ01pY3Bob25lQXVkaW9UcmFja1wiOiAoKSA9PiAoLyogYmluZGluZyAqLyBydCksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiUkNSVENDbGllbnRcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gRXIpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIlJDUlRDQ29kZVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBUKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJSQ1JUQ0xpdmVSb2xlXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIFh0KSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJSQ1JUQ1BpbmdSZXN1bHRcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gRHQpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIlJDUlRDUm9vbVwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBtciksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiUkNSZW1vdGVBdWRpb1RyYWNrXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIG90KSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJSQ1JlbW90ZVRyYWNrXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIHN0KSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJSQ1JlbW90ZVZpZGVvVHJhY2tcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gYXQpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcIlJDUmVzb2x1dGlvblwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBIZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiUkNTY3JlZW5WaWRlb1RyYWNrXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIG50KSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJSQ1RhZ1wiOiAoKSA9PiAoLyogYmluZGluZyAqLyBiciksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiUkNUcmFja1wiOiAoKSA9PiAoLyogYmluZGluZyAqLyBxZSksXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZGV2aWNlXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIFllKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJoZWxwZXJcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gUHIpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImluc3RhbGxlclwiOiAoKSA9PiAoLyogYmluZGluZyAqLyBrcilcbi8qIGhhcm1vbnkgZXhwb3J0ICovIH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISBAcm9uZ2Nsb3VkL2VuZ2luZSAqLyBcIi4vbm9kZV9tb2R1bGVzL0Byb25nY2xvdWQvZW5naW5lL2Rpc3QvaW5kZXguZXNtLmpzXCIpO1xuXG4vKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxuXG5QZXJtaXNzaW9uIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBhbmQvb3IgZGlzdHJpYnV0ZSB0aGlzIHNvZnR3YXJlIGZvciBhbnlcbnB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC5cblxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiBBTkQgVEhFIEFVVEhPUiBESVNDTEFJTVMgQUxMIFdBUlJBTlRJRVMgV0lUSFxuUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZXG5BTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsXG5JTkRJUkVDVCwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIE9SIEFOWSBEQU1BR0VTIFdIQVRTT0VWRVIgUkVTVUxUSU5HIEZST01cbkxPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SXG5PVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SXG5QRVJGT1JNQU5DRSBPRiBUSElTIFNPRlRXQVJFLlxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9mdW5jdGlvbiBTKGUsdCxyLGkpe3JldHVybiBuZXcocnx8KHI9UHJvbWlzZSkpKChmdW5jdGlvbihuLHMpe2Z1bmN0aW9uIG8oZSl7dHJ5e2MoaS5uZXh0KGUpKX1jYXRjaChlKXtzKGUpfX1mdW5jdGlvbiBhKGUpe3RyeXtjKGkudGhyb3coZSkpfWNhdGNoKGUpe3MoZSl9fWZ1bmN0aW9uIGMoZSl7dmFyIHQ7ZS5kb25lP24oZS52YWx1ZSk6KHQ9ZS52YWx1ZSx0IGluc3RhbmNlb2Ygcj90Om5ldyByKChmdW5jdGlvbihlKXtlKHQpfSkpKS50aGVuKG8sYSl9YygoaT1pLmFwcGx5KGUsdHx8W10pKS5uZXh0KCkpfSkpfWNvbnN0IEM9bmV3IF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uTG9nZ2VyKFwiUkNSVENcIik7dmFyIFQsSTshZnVuY3Rpb24oZSl7ZVtlLlNVQ0NFU1M9MWU0XT1cIlNVQ0NFU1NcIixlW2UuU0lHTkFMX0RJU0NPTk5FQ1RFRD01ZTRdPVwiU0lHTkFMX0RJU0NPTk5FQ1RFRFwiLGVbZS5QQVJBTVNfRVJST1I9NTAwMDFdPVwiUEFSQU1TX0VSUk9SXCIsZVtlLlJFUEVSVF9KT0lOX1JPT009NTAwMDJdPVwiUkVQRVJUX0pPSU5fUk9PTVwiLGVbZS5OT1RfSU5fUk9PTT01MDAwM109XCJOT1RfSU5fUk9PTVwiLGVbZS5TRVJWSUNFX0lOVkFMSUQ9NTAwMDRdPVwiU0VSVklDRV9JTlZBTElEXCIsZVtlLlJUQ19UT0tFTl9JTlZBTElEPTUwMDA2XT1cIlJUQ19UT0tFTl9JTlZBTElEXCIsZVtlLlNJR05BTF9FUlJPUj01MzAwMV09XCJTSUdOQUxfRVJST1JcIixlW2UuQ1JFQVRFX09GRkVSX0ZBSUxFRD01MzAwM109XCJDUkVBVEVfT0ZGRVJfRkFJTEVEXCIsZVtlLlJFUVVFU1RfRkFJTEVEPTUzMDA0XT1cIlJFUVVFU1RfRkFJTEVEXCIsZVtlLk1DVV9TRVJWRVJfTk9UX0ZPVU5EPTUzMDA1XT1cIk1DVV9TRVJWRVJfTk9UX0ZPVU5EXCIsZVtlLkJST0FEQ0FTVF9TVUJfTElTVF9OT1RfRU1QVFk9NTMwMDddPVwiQlJPQURDQVNUX1NVQl9MSVNUX05PVF9FTVBUWVwiLGVbZS5ST09NX0hBU19CRUVOX0RFU1RST1lFRD01MzAwOF09XCJST09NX0hBU19CRUVOX0RFU1RST1lFRFwiLGVbZS5OT1RfT1BFTl9WSURFT19BVURJT19TRVJWRVI9NTMwMDldPVwiTk9UX09QRU5fVklERU9fQVVESU9fU0VSVkVSXCIsZVtlLkdFVF9VU0VSX01FRElBX0ZBSUxFRD01MzAxMF09XCJHRVRfVVNFUl9NRURJQV9GQUlMRURcIixlW2UuR0VUX0RJU1BMQVlfTUVESUFfRkFJTEVEPTUzMDExXT1cIkdFVF9ESVNQTEFZX01FRElBX0ZBSUxFRFwiLGVbZS5QRVJNSVNTSU9OX0RFTklFRD01MzAxMl09XCJQRVJNSVNTSU9OX0RFTklFRFwiLGVbZS5DUkVBVEVfQ1VTVE9NX1RSQUNLX0ZBSUxFRD01MzAxM109XCJDUkVBVEVfQ1VTVE9NX1RSQUNLX0ZBSUxFRFwiLGVbZS5JTlZBTElEX1RBR1M9NTMwMTRdPVwiSU5WQUxJRF9UQUdTXCIsZVtlLklOVkFMSURfVVNFUl9JRD01MzAxNV09XCJJTlZBTElEX1VTRVJfSURcIixlW2UuQ1JFQVRFX0ZJTEVfVFJBQ0tfRkFJTEVEPTUzMDE2XT1cIkNSRUFURV9GSUxFX1RSQUNLX0ZBSUxFRFwiLGVbZS5JTlZBTElEX0ZJTEVfSU5TVEFOQ0U9NTMwMTddPVwiSU5WQUxJRF9GSUxFX0lOU1RBTkNFXCIsZVtlLlNFVF9SRU1PVEVfREVTQ1JJUFRJT05fRkFJTEVEPTUzMDE4XT1cIlNFVF9SRU1PVEVfREVTQ1JJUFRJT05fRkFJTEVEXCIsZVtlLkJST1dTRVJfTk9UX1NVUFBPUlQ9NTMwMTldPVwiQlJPV1NFUl9OT1RfU1VQUE9SVFwiLGVbZS5UUkFDS19OT1RfUkVBRFk9NTMwMjBdPVwiVFJBQ0tfTk9UX1JFQURZXCIsZVtlLlZJREVPX1RSQUNLX01JU1NfTUVESUFfRUxFTUVOVD01MzAyMV09XCJWSURFT19UUkFDS19NSVNTX01FRElBX0VMRU1FTlRcIixlW2UuVFJBQ0tfUExBWV9FUlJPUj01MzAyMl09XCJUUkFDS19QTEFZX0VSUk9SXCIsZVtlLlNJR05BTF9BVURJRU5DRV9KT0lOX1JPT01fRkFJTEVEPTUzMDIzXT1cIlNJR05BTF9BVURJRU5DRV9KT0lOX1JPT01fRkFJTEVEXCIsZVtlLlNJR05BTF9ST09NX0NIQU5HRV9JREVOVElUWV9GQUlMRUQ9NTMwMjRdPVwiU0lHTkFMX1JPT01fQ0hBTkdFX0lERU5USVRZX0ZBSUxFRFwiLGVbZS5QQUNLQUdFX0VOVklST05NRU5UX0VSUk9SPTUzMDI1XT1cIlBBQ0tBR0VfRU5WSVJPTk1FTlRfRVJST1JcIixlW2UuUFVCTElTSF9UUkFDS19MSU1JVF9FWENFRURFRD01MzAyNl09XCJQVUJMSVNIX1RSQUNLX0xJTUlUX0VYQ0VFREVEXCIsZVtlLkNETl9SRVNPVVJDRV9JU19FTVBUWT01MzAyN109XCJDRE5fUkVTT1VSQ0VfSVNfRU1QVFlcIixlW2UuU0lHTkFMX0pPSU5fUlRDX1JPT01fUkVGVVNFRD01MzAyOF09XCJTSUdOQUxfSk9JTl9SVENfUk9PTV9SRUZVU0VEXCIsZVtlLk5PX1BFUk1JU1NJT05fVE9fVVNFX1JFUVVFU1RFRF9ERVZJQ0U9NTMwMjldPVwiTk9fUEVSTUlTU0lPTl9UT19VU0VfUkVRVUVTVEVEX0RFVklDRVwiLGVbZS5USEVfRlVOQ1RJT05fSVNfRElTQUJMRURfSU5fUEtST09NPTUzMDMwXT1cIlRIRV9GVU5DVElPTl9JU19ESVNBQkxFRF9JTl9QS1JPT01cIn0oVHx8KFQ9e30pKSxmdW5jdGlvbihlKXtlW2UuSk9JTl9SRUZVU0VEPTQwMDMyXT1cIkpPSU5fUkVGVVNFRFwifShJfHwoST17fSkpO2NsYXNzIEV7Y29uc3RydWN0b3IoKXt0aGlzLnF1ZXVlPVtdLHRoaXMubG9ja2VkPSExfWNoZWNrVG9TdGFydCgpe3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7aWYoMD09PXRoaXMucXVldWUubGVuZ3RofHx0aGlzLmxvY2tlZClyZXR1cm47dGhpcy5sb2NrZWQ9ITA7Y29uc3R7cmVzb2x2ZTplLHRhc2s6dCxyZWplY3Q6cn09dGhpcy5xdWV1ZS5zaGlmdCgpO2xldCBpO3RyeXtpPXlpZWxkIHQoKSxlKGkpfWNhdGNoKGUpe3IoZSl9dGhpcy5sb2NrZWQ9ITEsdGhpcy5jaGVja1RvU3RhcnQoKX0pKX1wdXNoKGUpe2NvbnN0IHQ9bmV3IFByb21pc2UoKCh0LHIpPT57dGhpcy5xdWV1ZS5wdXNoKHtyZXNvbHZlOnQsdGFzazplLHJlamVjdDpyfSl9KSk7cmV0dXJuIHRoaXMuY2hlY2tUb1N0YXJ0KCksdH19Y29uc3QgeT1uZXcgRSxrPWU9PnkucHVzaChlKTtsZXQgYj0hMCxQPSEwO2Z1bmN0aW9uIE8oZSx0LHIpe2NvbnN0IGk9ZS5tYXRjaCh0KTtyZXR1cm4gaSYmaS5sZW5ndGg+PXImJnBhcnNlSW50KGlbcl0sMTApfWZ1bmN0aW9uIEwoZSx0LHIpe2lmKCFlLlJUQ1BlZXJDb25uZWN0aW9uKXJldHVybjtjb25zdCBpPWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLG49aS5hZGRFdmVudExpc3RlbmVyO2kuYWRkRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihlLGkpe2lmKGUhPT10KXJldHVybiBuLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtjb25zdCBzPWU9Pntjb25zdCB0PXIoZSk7dCYmKGkuaGFuZGxlRXZlbnQ/aS5oYW5kbGVFdmVudCh0KTppKHQpKX07cmV0dXJuIHRoaXMuX2V2ZW50TWFwPXRoaXMuX2V2ZW50TWFwfHx7fSx0aGlzLl9ldmVudE1hcFt0XXx8KHRoaXMuX2V2ZW50TWFwW3RdPW5ldyBNYXApLHRoaXMuX2V2ZW50TWFwW3RdLnNldChpLHMpLG4uYXBwbHkodGhpcyxbZSxzXSl9O2NvbnN0IHM9aS5yZW1vdmVFdmVudExpc3RlbmVyO2kucmVtb3ZlRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihlLHIpe2lmKGUhPT10fHwhdGhpcy5fZXZlbnRNYXB8fCF0aGlzLl9ldmVudE1hcFt0XSlyZXR1cm4gcy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYoIXRoaXMuX2V2ZW50TWFwW3RdLmhhcyhyKSlyZXR1cm4gcy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7Y29uc3QgaT10aGlzLl9ldmVudE1hcFt0XS5nZXQocik7cmV0dXJuIHRoaXMuX2V2ZW50TWFwW3RdLmRlbGV0ZShyKSwwPT09dGhpcy5fZXZlbnRNYXBbdF0uc2l6ZSYmZGVsZXRlIHRoaXMuX2V2ZW50TWFwW3RdLDA9PT1PYmplY3Qua2V5cyh0aGlzLl9ldmVudE1hcCkubGVuZ3RoJiZkZWxldGUgdGhpcy5fZXZlbnRNYXAscy5hcHBseSh0aGlzLFtlLGldKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGksXCJvblwiK3Qse2dldCgpe3JldHVybiB0aGlzW1wiX29uXCIrdF19LHNldChlKXt0aGlzW1wiX29uXCIrdF0mJih0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIodCx0aGlzW1wiX29uXCIrdF0pLGRlbGV0ZSB0aGlzW1wiX29uXCIrdF0pLGUmJnRoaXMuYWRkRXZlbnRMaXN0ZW5lcih0LHRoaXNbXCJfb25cIit0XT1lKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KX1mdW5jdGlvbiBOKGUpe3JldHVyblwiYm9vbGVhblwiIT10eXBlb2YgZT9uZXcgRXJyb3IoXCJBcmd1bWVudCB0eXBlOiBcIit0eXBlb2YgZStcIi4gUGxlYXNlIHVzZSBhIGJvb2xlYW4uXCIpOihiPWUsZT9cImFkYXB0ZXIuanMgbG9nZ2luZyBkaXNhYmxlZFwiOlwiYWRhcHRlci5qcyBsb2dnaW5nIGVuYWJsZWRcIil9ZnVuY3Rpb24gRChlKXtyZXR1cm5cImJvb2xlYW5cIiE9dHlwZW9mIGU/bmV3IEVycm9yKFwiQXJndW1lbnQgdHlwZTogXCIrdHlwZW9mIGUrXCIuIFBsZWFzZSB1c2UgYSBib29sZWFuLlwiKTooUD0hZSxcImFkYXB0ZXIuanMgZGVwcmVjYXRpb24gd2FybmluZ3MgXCIrKGU/XCJkaXNhYmxlZFwiOlwiZW5hYmxlZFwiKSl9ZnVuY3Rpb24gQSgpe2lmKFwib2JqZWN0XCI9PXR5cGVvZiB3aW5kb3cpe2lmKGIpcmV0dXJuO1widW5kZWZpbmVkXCIhPXR5cGVvZiBjb25zb2xlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBjb25zb2xlLmxvZyYmY29uc29sZS5sb2cuYXBwbHkoY29uc29sZSxhcmd1bWVudHMpfX1mdW5jdGlvbiBNKGUsdCl7UCYmY29uc29sZS53YXJuKGUrXCIgaXMgZGVwcmVjYXRlZCwgcGxlYXNlIHVzZSBcIit0K1wiIGluc3RlYWQuXCIpfWZ1bmN0aW9uIHgoZSl7cmV0dXJuXCJbb2JqZWN0IE9iamVjdF1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKX1mdW5jdGlvbiBVKGUpe3JldHVybiB4KGUpP09iamVjdC5rZXlzKGUpLnJlZHVjZSgoZnVuY3Rpb24odCxyKXtjb25zdCBpPXgoZVtyXSksbj1pP1UoZVtyXSk6ZVtyXSxzPWkmJiFPYmplY3Qua2V5cyhuKS5sZW5ndGg7cmV0dXJuIHZvaWQgMD09PW58fHM/dDpPYmplY3QuYXNzaWduKHQse1tyXTpufSl9KSx7fSk6ZX1mdW5jdGlvbiB3KGUsdCxyKXt0JiYhci5oYXModC5pZCkmJihyLnNldCh0LmlkLHQpLE9iamVjdC5rZXlzKHQpLmZvckVhY2goKGk9PntpLmVuZHNXaXRoKFwiSWRcIik/dyhlLGUuZ2V0KHRbaV0pLHIpOmkuZW5kc1dpdGgoXCJJZHNcIikmJnRbaV0uZm9yRWFjaCgodD0+e3coZSxlLmdldCh0KSxyKX0pKX0pKSl9ZnVuY3Rpb24gJChlLHQscil7Y29uc3QgaT1yP1wib3V0Ym91bmQtcnRwXCI6XCJpbmJvdW5kLXJ0cFwiLG49bmV3IE1hcDtpZihudWxsPT09dClyZXR1cm4gbjtjb25zdCBzPVtdO3JldHVybiBlLmZvckVhY2goKGU9PntcInRyYWNrXCI9PT1lLnR5cGUmJmUudHJhY2tJZGVudGlmaWVyPT09dC5pZCYmcy5wdXNoKGUpfSkpLHMuZm9yRWFjaCgodD0+e2UuZm9yRWFjaCgocj0+e3IudHlwZT09PWkmJnIudHJhY2tJZD09PXQuaWQmJncoZSxyLG4pfSkpfSkpLG59Y29uc3Qgaj1BO2Z1bmN0aW9uIFYoZSx0KXtjb25zdCByPWUmJmUubmF2aWdhdG9yO2lmKCFyLm1lZGlhRGV2aWNlcylyZXR1cm47Y29uc3QgaT1mdW5jdGlvbihlKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZXx8ZS5tYW5kYXRvcnl8fGUub3B0aW9uYWwpcmV0dXJuIGU7Y29uc3QgdD17fTtyZXR1cm4gT2JqZWN0LmtleXMoZSkuZm9yRWFjaCgocj0+e2lmKFwicmVxdWlyZVwiPT09cnx8XCJhZHZhbmNlZFwiPT09cnx8XCJtZWRpYVNvdXJjZVwiPT09cilyZXR1cm47Y29uc3QgaT1cIm9iamVjdFwiPT10eXBlb2YgZVtyXT9lW3JdOntpZGVhbDplW3JdfTt2b2lkIDAhPT1pLmV4YWN0JiZcIm51bWJlclwiPT10eXBlb2YgaS5leGFjdCYmKGkubWluPWkubWF4PWkuZXhhY3QpO2NvbnN0IG49ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT9lK3QuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrdC5zbGljZSgxKTpcImRldmljZUlkXCI9PT10P1wic291cmNlSWRcIjp0fTtpZih2b2lkIDAhPT1pLmlkZWFsKXt0Lm9wdGlvbmFsPXQub3B0aW9uYWx8fFtdO2xldCBlPXt9O1wibnVtYmVyXCI9PXR5cGVvZiBpLmlkZWFsPyhlW24oXCJtaW5cIixyKV09aS5pZGVhbCx0Lm9wdGlvbmFsLnB1c2goZSksZT17fSxlW24oXCJtYXhcIixyKV09aS5pZGVhbCx0Lm9wdGlvbmFsLnB1c2goZSkpOihlW24oXCJcIixyKV09aS5pZGVhbCx0Lm9wdGlvbmFsLnB1c2goZSkpfXZvaWQgMCE9PWkuZXhhY3QmJlwibnVtYmVyXCIhPXR5cGVvZiBpLmV4YWN0Pyh0Lm1hbmRhdG9yeT10Lm1hbmRhdG9yeXx8e30sdC5tYW5kYXRvcnlbbihcIlwiLHIpXT1pLmV4YWN0KTpbXCJtaW5cIixcIm1heFwiXS5mb3JFYWNoKChlPT57dm9pZCAwIT09aVtlXSYmKHQubWFuZGF0b3J5PXQubWFuZGF0b3J5fHx7fSx0Lm1hbmRhdG9yeVtuKGUscildPWlbZV0pfSkpfSkpLGUuYWR2YW5jZWQmJih0Lm9wdGlvbmFsPSh0Lm9wdGlvbmFsfHxbXSkuY29uY2F0KGUuYWR2YW5jZWQpKSx0fSxuPWZ1bmN0aW9uKGUsbil7aWYodC52ZXJzaW9uPj02MSlyZXR1cm4gbihlKTtpZigoZT1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGUpKSkmJlwib2JqZWN0XCI9PXR5cGVvZiBlLmF1ZGlvKXtjb25zdCB0PWZ1bmN0aW9uKGUsdCxyKXt0IGluIGUmJiEociBpbiBlKSYmKGVbcl09ZVt0XSxkZWxldGUgZVt0XSl9O3QoKGU9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlKSkpLmF1ZGlvLFwiYXV0b0dhaW5Db250cm9sXCIsXCJnb29nQXV0b0dhaW5Db250cm9sXCIpLHQoZS5hdWRpbyxcIm5vaXNlU3VwcHJlc3Npb25cIixcImdvb2dOb2lzZVN1cHByZXNzaW9uXCIpLGUuYXVkaW89aShlLmF1ZGlvKX1pZihlJiZcIm9iamVjdFwiPT10eXBlb2YgZS52aWRlbyl7bGV0IHM9ZS52aWRlby5mYWNpbmdNb2RlO3M9cyYmKFwib2JqZWN0XCI9PXR5cGVvZiBzP3M6e2lkZWFsOnN9KTtjb25zdCBvPXQudmVyc2lvbjw2NjtpZihzJiYoXCJ1c2VyXCI9PT1zLmV4YWN0fHxcImVudmlyb25tZW50XCI9PT1zLmV4YWN0fHxcInVzZXJcIj09PXMuaWRlYWx8fFwiZW52aXJvbm1lbnRcIj09PXMuaWRlYWwpJiYoIXIubWVkaWFEZXZpY2VzLmdldFN1cHBvcnRlZENvbnN0cmFpbnRzfHwhci5tZWRpYURldmljZXMuZ2V0U3VwcG9ydGVkQ29uc3RyYWludHMoKS5mYWNpbmdNb2RlfHxvKSl7bGV0IHQ7aWYoZGVsZXRlIGUudmlkZW8uZmFjaW5nTW9kZSxcImVudmlyb25tZW50XCI9PT1zLmV4YWN0fHxcImVudmlyb25tZW50XCI9PT1zLmlkZWFsP3Q9W1wiYmFja1wiLFwicmVhclwiXTpcInVzZXJcIiE9PXMuZXhhY3QmJlwidXNlclwiIT09cy5pZGVhbHx8KHQ9W1wiZnJvbnRcIl0pLHQpcmV0dXJuIHIubWVkaWFEZXZpY2VzLmVudW1lcmF0ZURldmljZXMoKS50aGVuKChyPT57bGV0IG89KHI9ci5maWx0ZXIoKGU9PlwidmlkZW9pbnB1dFwiPT09ZS5raW5kKSkpLmZpbmQoKGU9PnQuc29tZSgodD0+ZS5sYWJlbC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHQpKSkpKTtyZXR1cm4hbyYmci5sZW5ndGgmJnQuaW5jbHVkZXMoXCJiYWNrXCIpJiYobz1yW3IubGVuZ3RoLTFdKSxvJiYoZS52aWRlby5kZXZpY2VJZD1zLmV4YWN0P3tleGFjdDpvLmRldmljZUlkfTp7aWRlYWw6by5kZXZpY2VJZH0pLGUudmlkZW89aShlLnZpZGVvKSxqKFwiY2hyb21lOiBcIitKU09OLnN0cmluZ2lmeShlKSksbihlKX0pKX1lLnZpZGVvPWkoZS52aWRlbyl9cmV0dXJuIGooXCJjaHJvbWU6IFwiK0pTT04uc3RyaW5naWZ5KGUpKSxuKGUpfSxzPWZ1bmN0aW9uKGUpe3JldHVybiB0LnZlcnNpb24+PTY0P2U6e25hbWU6e1Blcm1pc3Npb25EZW5pZWRFcnJvcjpcIk5vdEFsbG93ZWRFcnJvclwiLFBlcm1pc3Npb25EaXNtaXNzZWRFcnJvcjpcIk5vdEFsbG93ZWRFcnJvclwiLEludmFsaWRTdGF0ZUVycm9yOlwiTm90QWxsb3dlZEVycm9yXCIsRGV2aWNlc05vdEZvdW5kRXJyb3I6XCJOb3RGb3VuZEVycm9yXCIsQ29uc3RyYWludE5vdFNhdGlzZmllZEVycm9yOlwiT3ZlcmNvbnN0cmFpbmVkRXJyb3JcIixUcmFja1N0YXJ0RXJyb3I6XCJOb3RSZWFkYWJsZUVycm9yXCIsTWVkaWFEZXZpY2VGYWlsZWREdWVUb1NodXRkb3duOlwiTm90QWxsb3dlZEVycm9yXCIsTWVkaWFEZXZpY2VLaWxsU3dpdGNoT246XCJOb3RBbGxvd2VkRXJyb3JcIixUYWJDYXB0dXJlRXJyb3I6XCJBYm9ydEVycm9yXCIsU2NyZWVuQ2FwdHVyZUVycm9yOlwiQWJvcnRFcnJvclwiLERldmljZUNhcHR1cmVFcnJvcjpcIkFib3J0RXJyb3JcIn1bZS5uYW1lXXx8ZS5uYW1lLG1lc3NhZ2U6ZS5tZXNzYWdlLGNvbnN0cmFpbnQ6ZS5jb25zdHJhaW50fHxlLmNvbnN0cmFpbnROYW1lLHRvU3RyaW5nKCl7cmV0dXJuIHRoaXMubmFtZSsodGhpcy5tZXNzYWdlJiZcIjogXCIpK3RoaXMubWVzc2FnZX19fTtpZihyLmdldFVzZXJNZWRpYT1mdW5jdGlvbihlLHQsaSl7bihlLChlPT57ci53ZWJraXRHZXRVc2VyTWVkaWEoZSx0LChlPT57aSYmaShzKGUpKX0pKX0pKX0uYmluZChyKSxyLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEpe2NvbnN0IGU9ci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhLmJpbmQoci5tZWRpYURldmljZXMpO3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYT1mdW5jdGlvbih0KXtyZXR1cm4gbih0LCh0PT5lKHQpLnRoZW4oKGU9PntpZih0LmF1ZGlvJiYhZS5nZXRBdWRpb1RyYWNrcygpLmxlbmd0aHx8dC52aWRlbyYmIWUuZ2V0VmlkZW9UcmFja3MoKS5sZW5ndGgpdGhyb3cgZS5nZXRUcmFja3MoKS5mb3JFYWNoKChlPT57ZS5zdG9wKCl9KSksbmV3IERPTUV4Y2VwdGlvbihcIlwiLFwiTm90Rm91bmRFcnJvclwiKTtyZXR1cm4gZX0pLChlPT5Qcm9taXNlLnJlamVjdChzKGUpKSkpKSl9fX1mdW5jdGlvbiBCKGUpe2UuTWVkaWFTdHJlYW09ZS5NZWRpYVN0cmVhbXx8ZS53ZWJraXRNZWRpYVN0cmVhbX1mdW5jdGlvbiBIKGUpe2lmKFwib2JqZWN0XCI9PXR5cGVvZiBlJiZlLlJUQ1BlZXJDb25uZWN0aW9uJiYhKFwib250cmFja1wiaW4gZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUsXCJvbnRyYWNrXCIse2dldCgpe3JldHVybiB0aGlzLl9vbnRyYWNrfSxzZXQoZSl7dGhpcy5fb250cmFjayYmdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKFwidHJhY2tcIix0aGlzLl9vbnRyYWNrKSx0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJ0cmFja1wiLHRoaXMuX29udHJhY2s9ZSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSk7Y29uc3QgdD1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRSZW1vdGVEZXNjcmlwdGlvbjtlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRSZW1vdGVEZXNjcmlwdGlvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbnRyYWNrcG9seXx8KHRoaXMuX29udHJhY2twb2x5PXQ9Pnt0LnN0cmVhbS5hZGRFdmVudExpc3RlbmVyKFwiYWRkdHJhY2tcIiwocj0+e2xldCBpO2k9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0UmVjZWl2ZXJzP3RoaXMuZ2V0UmVjZWl2ZXJzKCkuZmluZCgoZT0+ZS50cmFjayYmZS50cmFjay5pZD09PXIudHJhY2suaWQpKTp7dHJhY2s6ci50cmFja307Y29uc3Qgbj1uZXcgRXZlbnQoXCJ0cmFja1wiKTtuLnRyYWNrPXIudHJhY2ssbi5yZWNlaXZlcj1pLG4udHJhbnNjZWl2ZXI9e3JlY2VpdmVyOml9LG4uc3RyZWFtcz1bdC5zdHJlYW1dLHRoaXMuZGlzcGF0Y2hFdmVudChuKX0pKSx0LnN0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKChyPT57bGV0IGk7aT1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRSZWNlaXZlcnM/dGhpcy5nZXRSZWNlaXZlcnMoKS5maW5kKChlPT5lLnRyYWNrJiZlLnRyYWNrLmlkPT09ci5pZCkpOnt0cmFjazpyfTtjb25zdCBuPW5ldyBFdmVudChcInRyYWNrXCIpO24udHJhY2s9cixuLnJlY2VpdmVyPWksbi50cmFuc2NlaXZlcj17cmVjZWl2ZXI6aX0sbi5zdHJlYW1zPVt0LnN0cmVhbV0sdGhpcy5kaXNwYXRjaEV2ZW50KG4pfSkpfSx0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJhZGRzdHJlYW1cIix0aGlzLl9vbnRyYWNrcG9seSkpLHQuYXBwbHkodGhpcyxhcmd1bWVudHMpfX1lbHNlIEwoZSxcInRyYWNrXCIsKGU9PihlLnRyYW5zY2VpdmVyfHxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcInRyYW5zY2VpdmVyXCIse3ZhbHVlOntyZWNlaXZlcjplLnJlY2VpdmVyfX0pLGUpKSl9ZnVuY3Rpb24gRihlKXtpZihcIm9iamVjdFwiPT10eXBlb2YgZSYmZS5SVENQZWVyQ29ubmVjdGlvbiYmIShcImdldFNlbmRlcnNcImluIGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKSYmXCJjcmVhdGVEVE1GU2VuZGVyXCJpbiBlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSl7Y29uc3QgdD1mdW5jdGlvbihlLHQpe3JldHVybnt0cmFjazp0LGdldCBkdG1mKCl7cmV0dXJuIHZvaWQgMD09PXRoaXMuX2R0bWYmJihcImF1ZGlvXCI9PT10LmtpbmQ/dGhpcy5fZHRtZj1lLmNyZWF0ZURUTUZTZW5kZXIodCk6dGhpcy5fZHRtZj1udWxsKSx0aGlzLl9kdG1mfSxfcGM6ZX19O2lmKCFlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTZW5kZXJzKXtlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTZW5kZXJzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NlbmRlcnM9dGhpcy5fc2VuZGVyc3x8W10sdGhpcy5fc2VuZGVycy5zbGljZSgpfTtjb25zdCByPWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrO2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrPWZ1bmN0aW9uKGUsaSl7bGV0IG49ci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIG58fChuPXQodGhpcyxlKSx0aGlzLl9zZW5kZXJzLnB1c2gobikpLG59O2NvbnN0IGk9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlVHJhY2s7ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlVHJhY2s9ZnVuY3Rpb24oZSl7aS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7Y29uc3QgdD10aGlzLl9zZW5kZXJzLmluZGV4T2YoZSk7LTEhPT10JiZ0aGlzLl9zZW5kZXJzLnNwbGljZSh0LDEpfX1jb25zdCByPWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFN0cmVhbTtlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRTdHJlYW09ZnVuY3Rpb24oZSl7dGhpcy5fc2VuZGVycz10aGlzLl9zZW5kZXJzfHxbXSxyLmFwcGx5KHRoaXMsW2VdKSxlLmdldFRyYWNrcygpLmZvckVhY2goKGU9Pnt0aGlzLl9zZW5kZXJzLnB1c2godCh0aGlzLGUpKX0pKX07Y29uc3QgaT1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVTdHJlYW07ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlU3RyZWFtPWZ1bmN0aW9uKGUpe3RoaXMuX3NlbmRlcnM9dGhpcy5fc2VuZGVyc3x8W10saS5hcHBseSh0aGlzLFtlXSksZS5nZXRUcmFja3MoKS5mb3JFYWNoKChlPT57Y29uc3QgdD10aGlzLl9zZW5kZXJzLmZpbmQoKHQ9PnQudHJhY2s9PT1lKSk7dCYmdGhpcy5fc2VuZGVycy5zcGxpY2UodGhpcy5fc2VuZGVycy5pbmRleE9mKHQpLDEpfSkpfX1lbHNlIGlmKFwib2JqZWN0XCI9PXR5cGVvZiBlJiZlLlJUQ1BlZXJDb25uZWN0aW9uJiZcImdldFNlbmRlcnNcImluIGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlJiZcImNyZWF0ZURUTUZTZW5kZXJcImluIGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlJiZlLlJUQ1J0cFNlbmRlciYmIShcImR0bWZcImluIGUuUlRDUnRwU2VuZGVyLnByb3RvdHlwZSkpe2NvbnN0IHQ9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U2VuZGVycztlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTZW5kZXJzPWZ1bmN0aW9uKCl7Y29uc3QgZT10LmFwcGx5KHRoaXMsW10pO3JldHVybiBlLmZvckVhY2goKGU9PmUuX3BjPXRoaXMpKSxlfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5SVENSdHBTZW5kZXIucHJvdG90eXBlLFwiZHRtZlwiLHtnZXQoKXtyZXR1cm4gdm9pZCAwPT09dGhpcy5fZHRtZiYmKFwiYXVkaW9cIj09PXRoaXMudHJhY2sua2luZD90aGlzLl9kdG1mPXRoaXMuX3BjLmNyZWF0ZURUTUZTZW5kZXIodGhpcy50cmFjayk6dGhpcy5fZHRtZj1udWxsKSx0aGlzLl9kdG1mfX0pfX1mdW5jdGlvbiBLKGUpe2lmKCFlLlJUQ1BlZXJDb25uZWN0aW9uKXJldHVybjtjb25zdCB0PWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFN0YXRzO2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFN0YXRzPWZ1bmN0aW9uKCl7Y29uc3RbZSxyLGldPWFyZ3VtZW50cztpZihhcmd1bWVudHMubGVuZ3RoPjAmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGUpcmV0dXJuIHQuYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKDA9PT10Lmxlbmd0aCYmKDA9PT1hcmd1bWVudHMubGVuZ3RofHxcImZ1bmN0aW9uXCIhPXR5cGVvZiBlKSlyZXR1cm4gdC5hcHBseSh0aGlzLFtdKTtjb25zdCBuPWZ1bmN0aW9uKGUpe2NvbnN0IHQ9e307cmV0dXJuIGUucmVzdWx0KCkuZm9yRWFjaCgoZT0+e2NvbnN0IHI9e2lkOmUuaWQsdGltZXN0YW1wOmUudGltZXN0YW1wLHR5cGU6e2xvY2FsY2FuZGlkYXRlOlwibG9jYWwtY2FuZGlkYXRlXCIscmVtb3RlY2FuZGlkYXRlOlwicmVtb3RlLWNhbmRpZGF0ZVwifVtlLnR5cGVdfHxlLnR5cGV9O2UubmFtZXMoKS5mb3JFYWNoKCh0PT57clt0XT1lLnN0YXQodCl9KSksdFtyLmlkXT1yfSkpLHR9LHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBNYXAoT2JqZWN0LmtleXMoZSkubWFwKCh0PT5bdCxlW3RdXSkpKX07aWYoYXJndW1lbnRzLmxlbmd0aD49Mil7Y29uc3QgaT1mdW5jdGlvbihlKXtyKHMobihlKSkpfTtyZXR1cm4gdC5hcHBseSh0aGlzLFtpLGVdKX1yZXR1cm4gbmV3IFByb21pc2UoKChlLHIpPT57dC5hcHBseSh0aGlzLFtmdW5jdGlvbih0KXtlKHMobih0KSkpfSxyXSl9KSkudGhlbihyLGkpfX1mdW5jdGlvbiBHKGUpe2lmKCEoXCJvYmplY3RcIj09dHlwZW9mIGUmJmUuUlRDUGVlckNvbm5lY3Rpb24mJmUuUlRDUnRwU2VuZGVyJiZlLlJUQ1J0cFJlY2VpdmVyKSlyZXR1cm47aWYoIShcImdldFN0YXRzXCJpbiBlLlJUQ1J0cFNlbmRlci5wcm90b3R5cGUpKXtjb25zdCB0PWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFNlbmRlcnM7dCYmKGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFNlbmRlcnM9ZnVuY3Rpb24oKXtjb25zdCBlPXQuYXBwbHkodGhpcyxbXSk7cmV0dXJuIGUuZm9yRWFjaCgoZT0+ZS5fcGM9dGhpcykpLGV9KTtjb25zdCByPWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrO3ImJihlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRUcmFjaz1mdW5jdGlvbigpe2NvbnN0IGU9ci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIGUuX3BjPXRoaXMsZX0pLGUuUlRDUnRwU2VuZGVyLnByb3RvdHlwZS5nZXRTdGF0cz1mdW5jdGlvbigpe2NvbnN0IGU9dGhpcztyZXR1cm4gdGhpcy5fcGMuZ2V0U3RhdHMoKS50aGVuKCh0PT4kKHQsZS50cmFjaywhMCkpKX19aWYoIShcImdldFN0YXRzXCJpbiBlLlJUQ1J0cFJlY2VpdmVyLnByb3RvdHlwZSkpe2NvbnN0IHQ9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0UmVjZWl2ZXJzO3QmJihlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRSZWNlaXZlcnM9ZnVuY3Rpb24oKXtjb25zdCBlPXQuYXBwbHkodGhpcyxbXSk7cmV0dXJuIGUuZm9yRWFjaCgoZT0+ZS5fcGM9dGhpcykpLGV9KSxMKGUsXCJ0cmFja1wiLChlPT4oZS5yZWNlaXZlci5fcGM9ZS5zcmNFbGVtZW50LGUpKSksZS5SVENSdHBSZWNlaXZlci5wcm90b3R5cGUuZ2V0U3RhdHM9ZnVuY3Rpb24oKXtjb25zdCBlPXRoaXM7cmV0dXJuIHRoaXMuX3BjLmdldFN0YXRzKCkudGhlbigodD0+JCh0LGUudHJhY2ssITEpKSl9fWlmKCEoXCJnZXRTdGF0c1wiaW4gZS5SVENSdHBTZW5kZXIucHJvdG90eXBlKXx8IShcImdldFN0YXRzXCJpbiBlLlJUQ1J0cFJlY2VpdmVyLnByb3RvdHlwZSkpcmV0dXJuO2NvbnN0IHQ9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U3RhdHM7ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0U3RhdHM9ZnVuY3Rpb24oKXtpZihhcmd1bWVudHMubGVuZ3RoPjAmJmFyZ3VtZW50c1swXWluc3RhbmNlb2YgZS5NZWRpYVN0cmVhbVRyYWNrKXtjb25zdCBlPWFyZ3VtZW50c1swXTtsZXQgdCxyLGk7cmV0dXJuIHRoaXMuZ2V0U2VuZGVycygpLmZvckVhY2goKHI9PntyLnRyYWNrPT09ZSYmKHQ/aT0hMDp0PXIpfSkpLHRoaXMuZ2V0UmVjZWl2ZXJzKCkuZm9yRWFjaCgodD0+KHQudHJhY2s9PT1lJiYocj9pPSEwOnI9dCksdC50cmFjaz09PWUpKSksaXx8dCYmcj9Qcm9taXNlLnJlamVjdChuZXcgRE9NRXhjZXB0aW9uKFwiVGhlcmUgYXJlIG1vcmUgdGhhbiBvbmUgc2VuZGVyIG9yIHJlY2VpdmVyIGZvciB0aGUgdHJhY2suXCIsXCJJbnZhbGlkQWNjZXNzRXJyb3JcIikpOnQ/dC5nZXRTdGF0cygpOnI/ci5nZXRTdGF0cygpOlByb21pc2UucmVqZWN0KG5ldyBET01FeGNlcHRpb24oXCJUaGVyZSBpcyBubyBzZW5kZXIgb3IgcmVjZWl2ZXIgZm9yIHRoZSB0cmFjay5cIixcIkludmFsaWRBY2Nlc3NFcnJvclwiKSl9cmV0dXJuIHQuYXBwbHkodGhpcyxhcmd1bWVudHMpfX1mdW5jdGlvbiBKKGUpe2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldExvY2FsU3RyZWFtcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zPXRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXN8fHt9LE9iamVjdC5rZXlzKHRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXMpLm1hcCgoZT0+dGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtc1tlXVswXSkpfTtjb25zdCB0PWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrO2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrPWZ1bmN0aW9uKGUscil7aWYoIXIpcmV0dXJuIHQuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXM9dGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtc3x8e307Y29uc3QgaT10LmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gdGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtc1tyLmlkXT8tMT09PXRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXNbci5pZF0uaW5kZXhPZihpKSYmdGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtc1tyLmlkXS5wdXNoKGkpOnRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXNbci5pZF09W3IsaV0saX07Y29uc3Qgcj1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRTdHJlYW07ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkU3RyZWFtPWZ1bmN0aW9uKGUpe3RoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXM9dGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtc3x8e30sZS5nZXRUcmFja3MoKS5mb3JFYWNoKChlPT57aWYodGhpcy5nZXRTZW5kZXJzKCkuZmluZCgodD0+dC50cmFjaz09PWUpKSl0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKFwiVHJhY2sgYWxyZWFkeSBleGlzdHMuXCIsXCJJbnZhbGlkQWNjZXNzRXJyb3JcIil9KSk7Y29uc3QgdD10aGlzLmdldFNlbmRlcnMoKTtyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtjb25zdCBpPXRoaXMuZ2V0U2VuZGVycygpLmZpbHRlcigoZT0+LTE9PT10LmluZGV4T2YoZSkpKTt0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zW2UuaWRdPVtlXS5jb25jYXQoaSl9O2NvbnN0IGk9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlU3RyZWFtO2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVN0cmVhbT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtcz10aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zfHx7fSxkZWxldGUgdGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtc1tlLmlkXSxpLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07Y29uc3Qgbj1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVUcmFjaztlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVUcmFjaz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fc2hpbW1lZExvY2FsU3RyZWFtcz10aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zfHx7fSxlJiZPYmplY3Qua2V5cyh0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zKS5mb3JFYWNoKCh0PT57Y29uc3Qgcj10aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zW3RdLmluZGV4T2YoZSk7LTEhPT1yJiZ0aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zW3RdLnNwbGljZShyLDEpLDE9PT10aGlzLl9zaGltbWVkTG9jYWxTdHJlYW1zW3RdLmxlbmd0aCYmZGVsZXRlIHRoaXMuX3NoaW1tZWRMb2NhbFN0cmVhbXNbdF19KSksbi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIFcoZSx0KXtpZighZS5SVENQZWVyQ29ubmVjdGlvbilyZXR1cm47aWYoZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2smJnQudmVyc2lvbj49NjUpcmV0dXJuIEooZSk7Y29uc3Qgcj1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRMb2NhbFN0cmVhbXM7ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0TG9jYWxTdHJlYW1zPWZ1bmN0aW9uKCl7Y29uc3QgZT1yLmFwcGx5KHRoaXMpO3JldHVybiB0aGlzLl9yZXZlcnNlU3RyZWFtcz10aGlzLl9yZXZlcnNlU3RyZWFtc3x8e30sZS5tYXAoKGU9PnRoaXMuX3JldmVyc2VTdHJlYW1zW2UuaWRdKSl9O2NvbnN0IGk9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkU3RyZWFtO2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFN0cmVhbT1mdW5jdGlvbih0KXtpZih0aGlzLl9zdHJlYW1zPXRoaXMuX3N0cmVhbXN8fHt9LHRoaXMuX3JldmVyc2VTdHJlYW1zPXRoaXMuX3JldmVyc2VTdHJlYW1zfHx7fSx0LmdldFRyYWNrcygpLmZvckVhY2goKGU9PntpZih0aGlzLmdldFNlbmRlcnMoKS5maW5kKCh0PT50LnRyYWNrPT09ZSkpKXRocm93IG5ldyBET01FeGNlcHRpb24oXCJUcmFjayBhbHJlYWR5IGV4aXN0cy5cIixcIkludmFsaWRBY2Nlc3NFcnJvclwiKX0pKSwhdGhpcy5fcmV2ZXJzZVN0cmVhbXNbdC5pZF0pe2NvbnN0IHI9bmV3IGUuTWVkaWFTdHJlYW0odC5nZXRUcmFja3MoKSk7dGhpcy5fc3RyZWFtc1t0LmlkXT1yLHRoaXMuX3JldmVyc2VTdHJlYW1zW3IuaWRdPXQsdD1yfWkuYXBwbHkodGhpcyxbdF0pfTtjb25zdCBuPWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVN0cmVhbTtmdW5jdGlvbiBzKGUsdCl7bGV0IHI9dC5zZHA7cmV0dXJuIE9iamVjdC5rZXlzKGUuX3JldmVyc2VTdHJlYW1zfHxbXSkuZm9yRWFjaCgodD0+e2NvbnN0IGk9ZS5fcmV2ZXJzZVN0cmVhbXNbdF0sbj1lLl9zdHJlYW1zW2kuaWRdO3I9ci5yZXBsYWNlKG5ldyBSZWdFeHAobi5pZCxcImdcIiksaS5pZCl9KSksbmV3IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbih7dHlwZTp0LnR5cGUsc2RwOnJ9KX1mdW5jdGlvbiBvKGUsdCl7bGV0IHI9dC5zZHA7cmV0dXJuIE9iamVjdC5rZXlzKGUuX3JldmVyc2VTdHJlYW1zfHxbXSkuZm9yRWFjaCgodD0+e2NvbnN0IGk9ZS5fcmV2ZXJzZVN0cmVhbXNbdF0sbj1lLl9zdHJlYW1zW2kuaWRdO3I9ci5yZXBsYWNlKG5ldyBSZWdFeHAoaS5pZCxcImdcIiksbi5pZCl9KSksbmV3IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbih7dHlwZTp0LnR5cGUsc2RwOnJ9KX1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5yZW1vdmVTdHJlYW09ZnVuY3Rpb24oZSl7dGhpcy5fc3RyZWFtcz10aGlzLl9zdHJlYW1zfHx7fSx0aGlzLl9yZXZlcnNlU3RyZWFtcz10aGlzLl9yZXZlcnNlU3RyZWFtc3x8e30sbi5hcHBseSh0aGlzLFt0aGlzLl9zdHJlYW1zW2UuaWRdfHxlXSksZGVsZXRlIHRoaXMuX3JldmVyc2VTdHJlYW1zW3RoaXMuX3N0cmVhbXNbZS5pZF0/dGhpcy5fc3RyZWFtc1tlLmlkXS5pZDplLmlkXSxkZWxldGUgdGhpcy5fc3RyZWFtc1tlLmlkXX0sZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2s9ZnVuY3Rpb24odCxyKXtpZihcImNsb3NlZFwiPT09dGhpcy5zaWduYWxpbmdTdGF0ZSl0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKFwiVGhlIFJUQ1BlZXJDb25uZWN0aW9uJ3Mgc2lnbmFsaW5nU3RhdGUgaXMgJ2Nsb3NlZCcuXCIsXCJJbnZhbGlkU3RhdGVFcnJvclwiKTtjb25zdCBpPVtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO2lmKDEhPT1pLmxlbmd0aHx8IWlbMF0uZ2V0VHJhY2tzKCkuZmluZCgoZT0+ZT09PXQpKSl0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKFwiVGhlIGFkYXB0ZXIuanMgYWRkVHJhY2sgcG9seWZpbGwgb25seSBzdXBwb3J0cyBhIHNpbmdsZSAgc3RyZWFtIHdoaWNoIGlzIGFzc29jaWF0ZWQgd2l0aCB0aGUgc3BlY2lmaWVkIHRyYWNrLlwiLFwiTm90U3VwcG9ydGVkRXJyb3JcIik7Y29uc3Qgbj10aGlzLmdldFNlbmRlcnMoKS5maW5kKChlPT5lLnRyYWNrPT09dCkpO2lmKG4pdGhyb3cgbmV3IERPTUV4Y2VwdGlvbihcIlRyYWNrIGFscmVhZHkgZXhpc3RzLlwiLFwiSW52YWxpZEFjY2Vzc0Vycm9yXCIpO3RoaXMuX3N0cmVhbXM9dGhpcy5fc3RyZWFtc3x8e30sdGhpcy5fcmV2ZXJzZVN0cmVhbXM9dGhpcy5fcmV2ZXJzZVN0cmVhbXN8fHt9O2NvbnN0IHM9dGhpcy5fc3RyZWFtc1tyLmlkXTtpZihzKXMuYWRkVHJhY2sodCksUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKCk9Pnt0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwibmVnb3RpYXRpb25uZWVkZWRcIikpfSkpO2Vsc2V7Y29uc3QgaT1uZXcgZS5NZWRpYVN0cmVhbShbdF0pO3RoaXMuX3N0cmVhbXNbci5pZF09aSx0aGlzLl9yZXZlcnNlU3RyZWFtc1tpLmlkXT1yLHRoaXMuYWRkU3RyZWFtKGkpfXJldHVybiB0aGlzLmdldFNlbmRlcnMoKS5maW5kKChlPT5lLnRyYWNrPT09dCkpfSxbXCJjcmVhdGVPZmZlclwiLFwiY3JlYXRlQW5zd2VyXCJdLmZvckVhY2goKGZ1bmN0aW9uKHQpe2NvbnN0IHI9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbdF0saT17W3RdKCl7Y29uc3QgZT1hcmd1bWVudHM7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGgmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGFyZ3VtZW50c1swXT9yLmFwcGx5KHRoaXMsW3Q9Pntjb25zdCByPXModGhpcyx0KTtlWzBdLmFwcGx5KG51bGwsW3JdKX0sdD0+e2VbMV0mJmVbMV0uYXBwbHkobnVsbCx0KX0sYXJndW1lbnRzWzJdXSk6ci5hcHBseSh0aGlzLGFyZ3VtZW50cykudGhlbigoZT0+cyh0aGlzLGUpKSl9fTtlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVt0XT1pW3RdfSkpO2NvbnN0IGE9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0TG9jYWxEZXNjcmlwdGlvbjtlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5zZXRMb2NhbERlc2NyaXB0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGgmJmFyZ3VtZW50c1swXS50eXBlPyhhcmd1bWVudHNbMF09byh0aGlzLGFyZ3VtZW50c1swXSksYS5hcHBseSh0aGlzLGFyZ3VtZW50cykpOmEuYXBwbHkodGhpcyxhcmd1bWVudHMpfTtjb25zdCBjPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUsXCJsb2NhbERlc2NyaXB0aW9uXCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSxcImxvY2FsRGVzY3JpcHRpb25cIix7Z2V0KCl7Y29uc3QgZT1jLmdldC5hcHBseSh0aGlzKTtyZXR1cm5cIlwiPT09ZS50eXBlP2U6cyh0aGlzLGUpfX0pLGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnJlbW92ZVRyYWNrPWZ1bmN0aW9uKGUpe2lmKFwiY2xvc2VkXCI9PT10aGlzLnNpZ25hbGluZ1N0YXRlKXRocm93IG5ldyBET01FeGNlcHRpb24oXCJUaGUgUlRDUGVlckNvbm5lY3Rpb24ncyBzaWduYWxpbmdTdGF0ZSBpcyAnY2xvc2VkJy5cIixcIkludmFsaWRTdGF0ZUVycm9yXCIpO2lmKCFlLl9wYyl0aHJvdyBuZXcgRE9NRXhjZXB0aW9uKFwiQXJndW1lbnQgMSBvZiBSVENQZWVyQ29ubmVjdGlvbi5yZW1vdmVUcmFjayBkb2VzIG5vdCBpbXBsZW1lbnQgaW50ZXJmYWNlIFJUQ1J0cFNlbmRlci5cIixcIlR5cGVFcnJvclwiKTtpZighKGUuX3BjPT09dGhpcykpdGhyb3cgbmV3IERPTUV4Y2VwdGlvbihcIlNlbmRlciB3YXMgbm90IGNyZWF0ZWQgYnkgdGhpcyBjb25uZWN0aW9uLlwiLFwiSW52YWxpZEFjY2Vzc0Vycm9yXCIpO2xldCB0O3RoaXMuX3N0cmVhbXM9dGhpcy5fc3RyZWFtc3x8e30sT2JqZWN0LmtleXModGhpcy5fc3RyZWFtcykuZm9yRWFjaCgocj0+e3RoaXMuX3N0cmVhbXNbcl0uZ2V0VHJhY2tzKCkuZmluZCgodD0+ZS50cmFjaz09PXQpKSYmKHQ9dGhpcy5fc3RyZWFtc1tyXSl9KSksdCYmKDE9PT10LmdldFRyYWNrcygpLmxlbmd0aD90aGlzLnJlbW92ZVN0cmVhbSh0aGlzLl9yZXZlcnNlU3RyZWFtc1t0LmlkXSk6dC5yZW1vdmVUcmFjayhlLnRyYWNrKSx0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwibmVnb3RpYXRpb25uZWVkZWRcIikpKX19ZnVuY3Rpb24gWShlLHQpeyFlLlJUQ1BlZXJDb25uZWN0aW9uJiZlLndlYmtpdFJUQ1BlZXJDb25uZWN0aW9uJiYoZS5SVENQZWVyQ29ubmVjdGlvbj1lLndlYmtpdFJUQ1BlZXJDb25uZWN0aW9uKSxlLlJUQ1BlZXJDb25uZWN0aW9uJiZ0LnZlcnNpb248NTMmJltcInNldExvY2FsRGVzY3JpcHRpb25cIixcInNldFJlbW90ZURlc2NyaXB0aW9uXCIsXCJhZGRJY2VDYW5kaWRhdGVcIl0uZm9yRWFjaCgoZnVuY3Rpb24odCl7Y29uc3Qgcj1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVt0XSxpPXtbdF0oKXtyZXR1cm4gYXJndW1lbnRzWzBdPW5ldyhcImFkZEljZUNhbmRpZGF0ZVwiPT09dD9lLlJUQ0ljZUNhbmRpZGF0ZTplLlJUQ1Nlc3Npb25EZXNjcmlwdGlvbikoYXJndW1lbnRzWzBdKSxyLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19O2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlW3RdPWlbdF19KSl9ZnVuY3Rpb24gcShlLHQpe0woZSxcIm5lZ290aWF0aW9ubmVlZGVkXCIsKGU9Pntjb25zdCByPWUudGFyZ2V0O2lmKCEodC52ZXJzaW9uPDcyfHxyLmdldENvbmZpZ3VyYXRpb24mJlwicGxhbi1iXCI9PT1yLmdldENvbmZpZ3VyYXRpb24oKS5zZHBTZW1hbnRpY3MpfHxcInN0YWJsZVwiPT09ci5zaWduYWxpbmdTdGF0ZSlyZXR1cm4gZX0pKX12YXIgej1PYmplY3QuZnJlZXplKHtfX3Byb3RvX186bnVsbCxzaGltTWVkaWFTdHJlYW06QixzaGltT25UcmFjazpILHNoaW1HZXRTZW5kZXJzV2l0aER0bWY6RixzaGltR2V0U3RhdHM6SyxzaGltU2VuZGVyUmVjZWl2ZXJHZXRTdGF0czpHLHNoaW1BZGRUcmFja1JlbW92ZVRyYWNrV2l0aE5hdGl2ZTpKLHNoaW1BZGRUcmFja1JlbW92ZVRyYWNrOlcsc2hpbVBlZXJDb25uZWN0aW9uOlksZml4TmVnb3RpYXRpb25OZWVkZWQ6cSxzaGltR2V0VXNlck1lZGlhOlYsc2hpbUdldERpc3BsYXlNZWRpYTpmdW5jdGlvbihlLHQpe2UubmF2aWdhdG9yLm1lZGlhRGV2aWNlcyYmXCJnZXREaXNwbGF5TWVkaWFcImluIGUubmF2aWdhdG9yLm1lZGlhRGV2aWNlc3x8ZS5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzJiYoXCJmdW5jdGlvblwiPT10eXBlb2YgdD9lLm5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0RGlzcGxheU1lZGlhPWZ1bmN0aW9uKHIpe3JldHVybiB0KHIpLnRoZW4oKHQ9Pntjb25zdCBpPXIudmlkZW8mJnIudmlkZW8ud2lkdGgsbj1yLnZpZGVvJiZyLnZpZGVvLmhlaWdodCxzPXIudmlkZW8mJnIudmlkZW8uZnJhbWVSYXRlO3JldHVybiByLnZpZGVvPXttYW5kYXRvcnk6e2Nocm9tZU1lZGlhU291cmNlOlwiZGVza3RvcFwiLGNocm9tZU1lZGlhU291cmNlSWQ6dCxtYXhGcmFtZVJhdGU6c3x8M319LGkmJihyLnZpZGVvLm1hbmRhdG9yeS5tYXhXaWR0aD1pKSxuJiYoci52aWRlby5tYW5kYXRvcnkubWF4SGVpZ2h0PW4pLGUubmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEocil9KSl9OmNvbnNvbGUuZXJyb3IoXCJzaGltR2V0RGlzcGxheU1lZGlhOiBnZXRTb3VyY2VJZCBhcmd1bWVudCBpcyBub3QgYSBmdW5jdGlvblwiKSl9fSk7dmFyIFEsWCxaPShRPWZ1bmN0aW9uKGUpe3ZhciB0PXtnZW5lcmF0ZUlkZW50aWZpZXI6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsMTApfX07dC5sb2NhbENOYW1lPXQuZ2VuZXJhdGVJZGVudGlmaWVyKCksdC5zcGxpdExpbmVzPWZ1bmN0aW9uKGUpe3JldHVybiBlLnRyaW0oKS5zcGxpdChcIlxcblwiKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlLnRyaW0oKX0pKX0sdC5zcGxpdFNlY3Rpb25zPWZ1bmN0aW9uKGUpe3JldHVybiBlLnNwbGl0KFwiXFxubT1cIikubWFwKChmdW5jdGlvbihlLHQpe3JldHVybih0PjA/XCJtPVwiK2U6ZSkudHJpbSgpK1wiXFxyXFxuXCJ9KSl9LHQuZ2V0RGVzY3JpcHRpb249ZnVuY3Rpb24oZSl7dmFyIHI9dC5zcGxpdFNlY3Rpb25zKGUpO3JldHVybiByJiZyWzBdfSx0LmdldE1lZGlhU2VjdGlvbnM9ZnVuY3Rpb24oZSl7dmFyIHI9dC5zcGxpdFNlY3Rpb25zKGUpO3JldHVybiByLnNoaWZ0KCkscn0sdC5tYXRjaFByZWZpeD1mdW5jdGlvbihlLHIpe3JldHVybiB0LnNwbGl0TGluZXMoZSkuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4gMD09PWUuaW5kZXhPZihyKX0pKX0sdC5wYXJzZUNhbmRpZGF0ZT1mdW5jdGlvbihlKXtmb3IodmFyIHQscj17Zm91bmRhdGlvbjoodD0wPT09ZS5pbmRleE9mKFwiYT1jYW5kaWRhdGU6XCIpP2Uuc3Vic3RyaW5nKDEyKS5zcGxpdChcIiBcIik6ZS5zdWJzdHJpbmcoMTApLnNwbGl0KFwiIFwiKSlbMF0sY29tcG9uZW50OnBhcnNlSW50KHRbMV0sMTApLHByb3RvY29sOnRbMl0udG9Mb3dlckNhc2UoKSxwcmlvcml0eTpwYXJzZUludCh0WzNdLDEwKSxpcDp0WzRdLGFkZHJlc3M6dFs0XSxwb3J0OnBhcnNlSW50KHRbNV0sMTApLHR5cGU6dFs3XX0saT04O2k8dC5sZW5ndGg7aSs9Milzd2l0Y2godFtpXSl7Y2FzZVwicmFkZHJcIjpyLnJlbGF0ZWRBZGRyZXNzPXRbaSsxXTticmVhaztjYXNlXCJycG9ydFwiOnIucmVsYXRlZFBvcnQ9cGFyc2VJbnQodFtpKzFdLDEwKTticmVhaztjYXNlXCJ0Y3B0eXBlXCI6ci50Y3BUeXBlPXRbaSsxXTticmVhaztjYXNlXCJ1ZnJhZ1wiOnIudWZyYWc9dFtpKzFdLHIudXNlcm5hbWVGcmFnbWVudD10W2krMV07YnJlYWs7ZGVmYXVsdDpyW3RbaV1dPXRbaSsxXX1yZXR1cm4gcn0sdC53cml0ZUNhbmRpZGF0ZT1mdW5jdGlvbihlKXt2YXIgdD1bXTt0LnB1c2goZS5mb3VuZGF0aW9uKSx0LnB1c2goZS5jb21wb25lbnQpLHQucHVzaChlLnByb3RvY29sLnRvVXBwZXJDYXNlKCkpLHQucHVzaChlLnByaW9yaXR5KSx0LnB1c2goZS5hZGRyZXNzfHxlLmlwKSx0LnB1c2goZS5wb3J0KTt2YXIgcj1lLnR5cGU7cmV0dXJuIHQucHVzaChcInR5cFwiKSx0LnB1c2gociksXCJob3N0XCIhPT1yJiZlLnJlbGF0ZWRBZGRyZXNzJiZlLnJlbGF0ZWRQb3J0JiYodC5wdXNoKFwicmFkZHJcIiksdC5wdXNoKGUucmVsYXRlZEFkZHJlc3MpLHQucHVzaChcInJwb3J0XCIpLHQucHVzaChlLnJlbGF0ZWRQb3J0KSksZS50Y3BUeXBlJiZcInRjcFwiPT09ZS5wcm90b2NvbC50b0xvd2VyQ2FzZSgpJiYodC5wdXNoKFwidGNwdHlwZVwiKSx0LnB1c2goZS50Y3BUeXBlKSksKGUudXNlcm5hbWVGcmFnbWVudHx8ZS51ZnJhZykmJih0LnB1c2goXCJ1ZnJhZ1wiKSx0LnB1c2goZS51c2VybmFtZUZyYWdtZW50fHxlLnVmcmFnKSksXCJjYW5kaWRhdGU6XCIrdC5qb2luKFwiIFwiKX0sdC5wYXJzZUljZU9wdGlvbnM9ZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3Vic3RyKDE0KS5zcGxpdChcIiBcIil9LHQucGFyc2VSdHBNYXA9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zdWJzdHIoOSkuc3BsaXQoXCIgXCIpLHI9e3BheWxvYWRUeXBlOnBhcnNlSW50KHQuc2hpZnQoKSwxMCl9O3JldHVybiB0PXRbMF0uc3BsaXQoXCIvXCIpLHIubmFtZT10WzBdLHIuY2xvY2tSYXRlPXBhcnNlSW50KHRbMV0sMTApLHIuY2hhbm5lbHM9Mz09PXQubGVuZ3RoP3BhcnNlSW50KHRbMl0sMTApOjEsci5udW1DaGFubmVscz1yLmNoYW5uZWxzLHJ9LHQud3JpdGVSdHBNYXA9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5wYXlsb2FkVHlwZTt2b2lkIDAhPT1lLnByZWZlcnJlZFBheWxvYWRUeXBlJiYodD1lLnByZWZlcnJlZFBheWxvYWRUeXBlKTt2YXIgcj1lLmNoYW5uZWxzfHxlLm51bUNoYW5uZWxzfHwxO3JldHVyblwiYT1ydHBtYXA6XCIrdCtcIiBcIitlLm5hbWUrXCIvXCIrZS5jbG9ja1JhdGUrKDEhPT1yP1wiL1wiK3I6XCJcIikrXCJcXHJcXG5cIn0sdC5wYXJzZUV4dG1hcD1mdW5jdGlvbihlKXt2YXIgdD1lLnN1YnN0cig5KS5zcGxpdChcIiBcIik7cmV0dXJue2lkOnBhcnNlSW50KHRbMF0sMTApLGRpcmVjdGlvbjp0WzBdLmluZGV4T2YoXCIvXCIpPjA/dFswXS5zcGxpdChcIi9cIilbMV06XCJzZW5kcmVjdlwiLHVyaTp0WzFdfX0sdC53cml0ZUV4dG1hcD1mdW5jdGlvbihlKXtyZXR1cm5cImE9ZXh0bWFwOlwiKyhlLmlkfHxlLnByZWZlcnJlZElkKSsoZS5kaXJlY3Rpb24mJlwic2VuZHJlY3ZcIiE9PWUuZGlyZWN0aW9uP1wiL1wiK2UuZGlyZWN0aW9uOlwiXCIpK1wiIFwiK2UudXJpK1wiXFxyXFxuXCJ9LHQucGFyc2VGbXRwPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxyPXt9LGk9ZS5zdWJzdHIoZS5pbmRleE9mKFwiIFwiKSsxKS5zcGxpdChcIjtcIiksbj0wO248aS5sZW5ndGg7bisrKXJbKHQ9aVtuXS50cmltKCkuc3BsaXQoXCI9XCIpKVswXS50cmltKCldPXRbMV07cmV0dXJuIHJ9LHQud3JpdGVGbXRwPWZ1bmN0aW9uKGUpe3ZhciB0PVwiXCIscj1lLnBheWxvYWRUeXBlO2lmKHZvaWQgMCE9PWUucHJlZmVycmVkUGF5bG9hZFR5cGUmJihyPWUucHJlZmVycmVkUGF5bG9hZFR5cGUpLGUucGFyYW1ldGVycyYmT2JqZWN0LmtleXMoZS5wYXJhbWV0ZXJzKS5sZW5ndGgpe3ZhciBpPVtdO09iamVjdC5rZXlzKGUucGFyYW1ldGVycykuZm9yRWFjaCgoZnVuY3Rpb24odCl7ZS5wYXJhbWV0ZXJzW3RdP2kucHVzaCh0K1wiPVwiK2UucGFyYW1ldGVyc1t0XSk6aS5wdXNoKHQpfSkpLHQrPVwiYT1mbXRwOlwiK3IrXCIgXCIraS5qb2luKFwiO1wiKStcIlxcclxcblwifXJldHVybiB0fSx0LnBhcnNlUnRjcEZiPWZ1bmN0aW9uKGUpe3ZhciB0PWUuc3Vic3RyKGUuaW5kZXhPZihcIiBcIikrMSkuc3BsaXQoXCIgXCIpO3JldHVybnt0eXBlOnQuc2hpZnQoKSxwYXJhbWV0ZXI6dC5qb2luKFwiIFwiKX19LHQud3JpdGVSdGNwRmI9ZnVuY3Rpb24oZSl7dmFyIHQ9XCJcIixyPWUucGF5bG9hZFR5cGU7cmV0dXJuIHZvaWQgMCE9PWUucHJlZmVycmVkUGF5bG9hZFR5cGUmJihyPWUucHJlZmVycmVkUGF5bG9hZFR5cGUpLGUucnRjcEZlZWRiYWNrJiZlLnJ0Y3BGZWVkYmFjay5sZW5ndGgmJmUucnRjcEZlZWRiYWNrLmZvckVhY2goKGZ1bmN0aW9uKGUpe3QrPVwiYT1ydGNwLWZiOlwiK3IrXCIgXCIrZS50eXBlKyhlLnBhcmFtZXRlciYmZS5wYXJhbWV0ZXIubGVuZ3RoP1wiIFwiK2UucGFyYW1ldGVyOlwiXCIpK1wiXFxyXFxuXCJ9KSksdH0sdC5wYXJzZVNzcmNNZWRpYT1mdW5jdGlvbihlKXt2YXIgdD1lLmluZGV4T2YoXCIgXCIpLHI9e3NzcmM6cGFyc2VJbnQoZS5zdWJzdHIoNyx0LTcpLDEwKX0saT1lLmluZGV4T2YoXCI6XCIsdCk7cmV0dXJuIGk+LTE/KHIuYXR0cmlidXRlPWUuc3Vic3RyKHQrMSxpLXQtMSksci52YWx1ZT1lLnN1YnN0cihpKzEpKTpyLmF0dHJpYnV0ZT1lLnN1YnN0cih0KzEpLHJ9LHQucGFyc2VTc3JjR3JvdXA9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zdWJzdHIoMTMpLnNwbGl0KFwiIFwiKTtyZXR1cm57c2VtYW50aWNzOnQuc2hpZnQoKSxzc3Jjczp0Lm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIHBhcnNlSW50KGUsMTApfSkpfX0sdC5nZXRNaWQ9ZnVuY3Rpb24oZSl7dmFyIHI9dC5tYXRjaFByZWZpeChlLFwiYT1taWQ6XCIpWzBdO2lmKHIpcmV0dXJuIHIuc3Vic3RyKDYpfSx0LnBhcnNlRmluZ2VycHJpbnQ9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zdWJzdHIoMTQpLnNwbGl0KFwiIFwiKTtyZXR1cm57YWxnb3JpdGhtOnRbMF0udG9Mb3dlckNhc2UoKSx2YWx1ZTp0WzFdfX0sdC5nZXREdGxzUGFyYW1ldGVycz1mdW5jdGlvbihlLHIpe3JldHVybntyb2xlOlwiYXV0b1wiLGZpbmdlcnByaW50czp0Lm1hdGNoUHJlZml4KGUrcixcImE9ZmluZ2VycHJpbnQ6XCIpLm1hcCh0LnBhcnNlRmluZ2VycHJpbnQpfX0sdC53cml0ZUR0bHNQYXJhbWV0ZXJzPWZ1bmN0aW9uKGUsdCl7dmFyIHI9XCJhPXNldHVwOlwiK3QrXCJcXHJcXG5cIjtyZXR1cm4gZS5maW5nZXJwcmludHMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7cis9XCJhPWZpbmdlcnByaW50OlwiK2UuYWxnb3JpdGhtK1wiIFwiK2UudmFsdWUrXCJcXHJcXG5cIn0pKSxyfSx0LnBhcnNlQ3J5cHRvTGluZT1mdW5jdGlvbihlKXt2YXIgdD1lLnN1YnN0cig5KS5zcGxpdChcIiBcIik7cmV0dXJue3RhZzpwYXJzZUludCh0WzBdLDEwKSxjcnlwdG9TdWl0ZTp0WzFdLGtleVBhcmFtczp0WzJdLHNlc3Npb25QYXJhbXM6dC5zbGljZSgzKX19LHQud3JpdGVDcnlwdG9MaW5lPWZ1bmN0aW9uKGUpe3JldHVyblwiYT1jcnlwdG86XCIrZS50YWcrXCIgXCIrZS5jcnlwdG9TdWl0ZStcIiBcIisoXCJvYmplY3RcIj09dHlwZW9mIGUua2V5UGFyYW1zP3Qud3JpdGVDcnlwdG9LZXlQYXJhbXMoZS5rZXlQYXJhbXMpOmUua2V5UGFyYW1zKSsoZS5zZXNzaW9uUGFyYW1zP1wiIFwiK2Uuc2Vzc2lvblBhcmFtcy5qb2luKFwiIFwiKTpcIlwiKStcIlxcclxcblwifSx0LnBhcnNlQ3J5cHRvS2V5UGFyYW1zPWZ1bmN0aW9uKGUpe2lmKDAhPT1lLmluZGV4T2YoXCJpbmxpbmU6XCIpKXJldHVybiBudWxsO3ZhciB0PWUuc3Vic3RyKDcpLnNwbGl0KFwifFwiKTtyZXR1cm57a2V5TWV0aG9kOlwiaW5saW5lXCIsa2V5U2FsdDp0WzBdLGxpZmVUaW1lOnRbMV0sbWtpVmFsdWU6dFsyXT90WzJdLnNwbGl0KFwiOlwiKVswXTp2b2lkIDAsbWtpTGVuZ3RoOnRbMl0/dFsyXS5zcGxpdChcIjpcIilbMV06dm9pZCAwfX0sdC53cml0ZUNyeXB0b0tleVBhcmFtcz1mdW5jdGlvbihlKXtyZXR1cm4gZS5rZXlNZXRob2QrXCI6XCIrZS5rZXlTYWx0KyhlLmxpZmVUaW1lP1wifFwiK2UubGlmZVRpbWU6XCJcIikrKGUubWtpVmFsdWUmJmUubWtpTGVuZ3RoP1wifFwiK2UubWtpVmFsdWUrXCI6XCIrZS5ta2lMZW5ndGg6XCJcIil9LHQuZ2V0Q3J5cHRvUGFyYW1ldGVycz1mdW5jdGlvbihlLHIpe3JldHVybiB0Lm1hdGNoUHJlZml4KGUrcixcImE9Y3J5cHRvOlwiKS5tYXAodC5wYXJzZUNyeXB0b0xpbmUpfSx0LmdldEljZVBhcmFtZXRlcnM9ZnVuY3Rpb24oZSxyKXt2YXIgaT10Lm1hdGNoUHJlZml4KGUrcixcImE9aWNlLXVmcmFnOlwiKVswXSxuPXQubWF0Y2hQcmVmaXgoZStyLFwiYT1pY2UtcHdkOlwiKVswXTtyZXR1cm4gaSYmbj97dXNlcm5hbWVGcmFnbWVudDppLnN1YnN0cigxMikscGFzc3dvcmQ6bi5zdWJzdHIoMTApfTpudWxsfSx0LndyaXRlSWNlUGFyYW1ldGVycz1mdW5jdGlvbihlKXtyZXR1cm5cImE9aWNlLXVmcmFnOlwiK2UudXNlcm5hbWVGcmFnbWVudCtcIlxcclxcbmE9aWNlLXB3ZDpcIitlLnBhc3N3b3JkK1wiXFxyXFxuXCJ9LHQucGFyc2VSdHBQYXJhbWV0ZXJzPWZ1bmN0aW9uKGUpe2Zvcih2YXIgcj17Y29kZWNzOltdLGhlYWRlckV4dGVuc2lvbnM6W10sZmVjTWVjaGFuaXNtczpbXSxydGNwOltdfSxpPXQuc3BsaXRMaW5lcyhlKVswXS5zcGxpdChcIiBcIiksbj0zO248aS5sZW5ndGg7bisrKXt2YXIgcz1pW25dLG89dC5tYXRjaFByZWZpeChlLFwiYT1ydHBtYXA6XCIrcytcIiBcIilbMF07aWYobyl7dmFyIGE9dC5wYXJzZVJ0cE1hcChvKSxjPXQubWF0Y2hQcmVmaXgoZSxcImE9Zm10cDpcIitzK1wiIFwiKTtzd2l0Y2goYS5wYXJhbWV0ZXJzPWMubGVuZ3RoP3QucGFyc2VGbXRwKGNbMF0pOnt9LGEucnRjcEZlZWRiYWNrPXQubWF0Y2hQcmVmaXgoZSxcImE9cnRjcC1mYjpcIitzK1wiIFwiKS5tYXAodC5wYXJzZVJ0Y3BGYiksci5jb2RlY3MucHVzaChhKSxhLm5hbWUudG9VcHBlckNhc2UoKSl7Y2FzZVwiUkVEXCI6Y2FzZVwiVUxQRkVDXCI6ci5mZWNNZWNoYW5pc21zLnB1c2goYS5uYW1lLnRvVXBwZXJDYXNlKCkpfX19cmV0dXJuIHQubWF0Y2hQcmVmaXgoZSxcImE9ZXh0bWFwOlwiKS5mb3JFYWNoKChmdW5jdGlvbihlKXtyLmhlYWRlckV4dGVuc2lvbnMucHVzaCh0LnBhcnNlRXh0bWFwKGUpKX0pKSxyfSx0LndyaXRlUnRwRGVzY3JpcHRpb249ZnVuY3Rpb24oZSxyKXt2YXIgaT1cIlwiO2krPVwibT1cIitlK1wiIFwiLGkrPXIuY29kZWNzLmxlbmd0aD4wP1wiOVwiOlwiMFwiLGkrPVwiIFVEUC9UTFMvUlRQL1NBVlBGIFwiLGkrPXIuY29kZWNzLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMCE9PWUucHJlZmVycmVkUGF5bG9hZFR5cGU/ZS5wcmVmZXJyZWRQYXlsb2FkVHlwZTplLnBheWxvYWRUeXBlfSkpLmpvaW4oXCIgXCIpK1wiXFxyXFxuXCIsaSs9XCJjPUlOIElQNCAwLjAuMC4wXFxyXFxuXCIsaSs9XCJhPXJ0Y3A6OSBJTiBJUDQgMC4wLjAuMFxcclxcblwiLHIuY29kZWNzLmZvckVhY2goKGZ1bmN0aW9uKGUpe2krPXQud3JpdGVSdHBNYXAoZSksaSs9dC53cml0ZUZtdHAoZSksaSs9dC53cml0ZVJ0Y3BGYihlKX0pKTt2YXIgbj0wO3JldHVybiByLmNvZGVjcy5mb3JFYWNoKChmdW5jdGlvbihlKXtlLm1heHB0aW1lPm4mJihuPWUubWF4cHRpbWUpfSkpLG4+MCYmKGkrPVwiYT1tYXhwdGltZTpcIituK1wiXFxyXFxuXCIpLGkrPVwiYT1ydGNwLW11eFxcclxcblwiLHIuaGVhZGVyRXh0ZW5zaW9ucyYmci5oZWFkZXJFeHRlbnNpb25zLmZvckVhY2goKGZ1bmN0aW9uKGUpe2krPXQud3JpdGVFeHRtYXAoZSl9KSksaX0sdC5wYXJzZVJ0cEVuY29kaW5nUGFyYW1ldGVycz1mdW5jdGlvbihlKXt2YXIgcixpPVtdLG49dC5wYXJzZVJ0cFBhcmFtZXRlcnMoZSkscz0tMSE9PW4uZmVjTWVjaGFuaXNtcy5pbmRleE9mKFwiUkVEXCIpLG89LTEhPT1uLmZlY01lY2hhbmlzbXMuaW5kZXhPZihcIlVMUEZFQ1wiKSxhPXQubWF0Y2hQcmVmaXgoZSxcImE9c3NyYzpcIikubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gdC5wYXJzZVNzcmNNZWRpYShlKX0pKS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVyblwiY25hbWVcIj09PWUuYXR0cmlidXRlfSkpLGM9YS5sZW5ndGg+MCYmYVswXS5zc3JjLGQ9dC5tYXRjaFByZWZpeChlLFwiYT1zc3JjLWdyb3VwOkZJRFwiKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlLnN1YnN0cigxNykuc3BsaXQoXCIgXCIpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIHBhcnNlSW50KGUsMTApfSkpfSkpO2QubGVuZ3RoPjAmJmRbMF0ubGVuZ3RoPjEmJmRbMF1bMF09PT1jJiYocj1kWzBdWzFdKSxuLmNvZGVjcy5mb3JFYWNoKChmdW5jdGlvbihlKXtpZihcIlJUWFwiPT09ZS5uYW1lLnRvVXBwZXJDYXNlKCkmJmUucGFyYW1ldGVycy5hcHQpe3ZhciB0PXtzc3JjOmMsY29kZWNQYXlsb2FkVHlwZTpwYXJzZUludChlLnBhcmFtZXRlcnMuYXB0LDEwKX07YyYmciYmKHQucnR4PXtzc3JjOnJ9KSxpLnB1c2godCkscyYmKCh0PUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodCkpKS5mZWM9e3NzcmM6YyxtZWNoYW5pc206bz9cInJlZCt1bHBmZWNcIjpcInJlZFwifSxpLnB1c2godCkpfX0pKSwwPT09aS5sZW5ndGgmJmMmJmkucHVzaCh7c3NyYzpjfSk7dmFyIHU9dC5tYXRjaFByZWZpeChlLFwiYj1cIik7cmV0dXJuIHUubGVuZ3RoJiYodT0wPT09dVswXS5pbmRleE9mKFwiYj1USUFTOlwiKT9wYXJzZUludCh1WzBdLnN1YnN0cig3KSwxMCk6MD09PXVbMF0uaW5kZXhPZihcImI9QVM6XCIpPzFlMypwYXJzZUludCh1WzBdLnN1YnN0cig1KSwxMCkqLjk1LTE2ZTM6dm9pZCAwLGkuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZS5tYXhCaXRyYXRlPXV9KSkpLGl9LHQucGFyc2VSdGNwUGFyYW1ldGVycz1mdW5jdGlvbihlKXt2YXIgcj17fSxpPXQubWF0Y2hQcmVmaXgoZSxcImE9c3NyYzpcIikubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gdC5wYXJzZVNzcmNNZWRpYShlKX0pKS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVyblwiY25hbWVcIj09PWUuYXR0cmlidXRlfSkpWzBdO2kmJihyLmNuYW1lPWkudmFsdWUsci5zc3JjPWkuc3NyYyk7dmFyIG49dC5tYXRjaFByZWZpeChlLFwiYT1ydGNwLXJzaXplXCIpO3IucmVkdWNlZFNpemU9bi5sZW5ndGg+MCxyLmNvbXBvdW5kPTA9PT1uLmxlbmd0aDt2YXIgcz10Lm1hdGNoUHJlZml4KGUsXCJhPXJ0Y3AtbXV4XCIpO3JldHVybiByLm11eD1zLmxlbmd0aD4wLHJ9LHQucGFyc2VNc2lkPWZ1bmN0aW9uKGUpe3ZhciByLGk9dC5tYXRjaFByZWZpeChlLFwiYT1tc2lkOlwiKTtpZigxPT09aS5sZW5ndGgpcmV0dXJue3N0cmVhbToocj1pWzBdLnN1YnN0cig3KS5zcGxpdChcIiBcIikpWzBdLHRyYWNrOnJbMV19O3ZhciBuPXQubWF0Y2hQcmVmaXgoZSxcImE9c3NyYzpcIikubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gdC5wYXJzZVNzcmNNZWRpYShlKX0pKS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVyblwibXNpZFwiPT09ZS5hdHRyaWJ1dGV9KSk7cmV0dXJuIG4ubGVuZ3RoPjA/e3N0cmVhbToocj1uWzBdLnZhbHVlLnNwbGl0KFwiIFwiKSlbMF0sdHJhY2s6clsxXX06dm9pZCAwfSx0LnBhcnNlU2N0cERlc2NyaXB0aW9uPWZ1bmN0aW9uKGUpe3ZhciByLGk9dC5wYXJzZU1MaW5lKGUpLG49dC5tYXRjaFByZWZpeChlLFwiYT1tYXgtbWVzc2FnZS1zaXplOlwiKTtuLmxlbmd0aD4wJiYocj1wYXJzZUludChuWzBdLnN1YnN0cigxOSksMTApKSxpc05hTihyKSYmKHI9NjU1MzYpO3ZhciBzPXQubWF0Y2hQcmVmaXgoZSxcImE9c2N0cC1wb3J0OlwiKTtpZihzLmxlbmd0aD4wKXJldHVybntwb3J0OnBhcnNlSW50KHNbMF0uc3Vic3RyKDEyKSwxMCkscHJvdG9jb2w6aS5mbXQsbWF4TWVzc2FnZVNpemU6cn07aWYodC5tYXRjaFByZWZpeChlLFwiYT1zY3RwbWFwOlwiKS5sZW5ndGg+MCl7dmFyIG89dC5tYXRjaFByZWZpeChlLFwiYT1zY3RwbWFwOlwiKVswXS5zdWJzdHIoMTApLnNwbGl0KFwiIFwiKTtyZXR1cm57cG9ydDpwYXJzZUludChvWzBdLDEwKSxwcm90b2NvbDpvWzFdLG1heE1lc3NhZ2VTaXplOnJ9fX0sdC53cml0ZVNjdHBEZXNjcmlwdGlvbj1mdW5jdGlvbihlLHQpe3ZhciByPVtdO3JldHVybiByPVwiRFRMUy9TQ1RQXCIhPT1lLnByb3RvY29sP1tcIm09XCIrZS5raW5kK1wiIDkgXCIrZS5wcm90b2NvbCtcIiBcIit0LnByb3RvY29sK1wiXFxyXFxuXCIsXCJjPUlOIElQNCAwLjAuMC4wXFxyXFxuXCIsXCJhPXNjdHAtcG9ydDpcIit0LnBvcnQrXCJcXHJcXG5cIl06W1wibT1cIitlLmtpbmQrXCIgOSBcIitlLnByb3RvY29sK1wiIFwiK3QucG9ydCtcIlxcclxcblwiLFwiYz1JTiBJUDQgMC4wLjAuMFxcclxcblwiLFwiYT1zY3RwbWFwOlwiK3QucG9ydCtcIiBcIit0LnByb3RvY29sK1wiIDY1NTM1XFxyXFxuXCJdLHZvaWQgMCE9PXQubWF4TWVzc2FnZVNpemUmJnIucHVzaChcImE9bWF4LW1lc3NhZ2Utc2l6ZTpcIit0Lm1heE1lc3NhZ2VTaXplK1wiXFxyXFxuXCIpLHIuam9pbihcIlwiKX0sdC5nZW5lcmF0ZVNlc3Npb25JZD1mdW5jdGlvbigpe3JldHVybiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKCkuc3Vic3RyKDIsMjEpfSx0LndyaXRlU2Vzc2lvbkJvaWxlcnBsYXRlPWZ1bmN0aW9uKGUscixpKXt2YXIgbj12b2lkIDAhPT1yP3I6MjtyZXR1cm5cInY9MFxcclxcbm89XCIrKGl8fFwidGhpc2lzYWRhcHRlcm9ydGNcIikrXCIgXCIrKGV8fHQuZ2VuZXJhdGVTZXNzaW9uSWQoKSkrXCIgXCIrbitcIiBJTiBJUDQgMTI3LjAuMC4xXFxyXFxucz0tXFxyXFxudD0wIDBcXHJcXG5cIn0sdC53cml0ZU1lZGlhU2VjdGlvbj1mdW5jdGlvbihlLHIsaSxuKXt2YXIgcz10LndyaXRlUnRwRGVzY3JpcHRpb24oZS5raW5kLHIpO2lmKHMrPXQud3JpdGVJY2VQYXJhbWV0ZXJzKGUuaWNlR2F0aGVyZXIuZ2V0TG9jYWxQYXJhbWV0ZXJzKCkpLHMrPXQud3JpdGVEdGxzUGFyYW1ldGVycyhlLmR0bHNUcmFuc3BvcnQuZ2V0TG9jYWxQYXJhbWV0ZXJzKCksXCJvZmZlclwiPT09aT9cImFjdHBhc3NcIjpcImFjdGl2ZVwiKSxzKz1cImE9bWlkOlwiK2UubWlkK1wiXFxyXFxuXCIsZS5kaXJlY3Rpb24/cys9XCJhPVwiK2UuZGlyZWN0aW9uK1wiXFxyXFxuXCI6ZS5ydHBTZW5kZXImJmUucnRwUmVjZWl2ZXI/cys9XCJhPXNlbmRyZWN2XFxyXFxuXCI6ZS5ydHBTZW5kZXI/cys9XCJhPXNlbmRvbmx5XFxyXFxuXCI6ZS5ydHBSZWNlaXZlcj9zKz1cImE9cmVjdm9ubHlcXHJcXG5cIjpzKz1cImE9aW5hY3RpdmVcXHJcXG5cIixlLnJ0cFNlbmRlcil7dmFyIG89XCJtc2lkOlwiK24uaWQrXCIgXCIrZS5ydHBTZW5kZXIudHJhY2suaWQrXCJcXHJcXG5cIjtzKz1cImE9XCIrbyxzKz1cImE9c3NyYzpcIitlLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0uc3NyYytcIiBcIitvLGUuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHgmJihzKz1cImE9c3NyYzpcIitlLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4LnNzcmMrXCIgXCIrbyxzKz1cImE9c3NyYy1ncm91cDpGSUQgXCIrZS5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnNzcmMrXCIgXCIrZS5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eC5zc3JjK1wiXFxyXFxuXCIpfXJldHVybiBzKz1cImE9c3NyYzpcIitlLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0uc3NyYytcIiBjbmFtZTpcIit0LmxvY2FsQ05hbWUrXCJcXHJcXG5cIixlLnJ0cFNlbmRlciYmZS5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eCYmKHMrPVwiYT1zc3JjOlwiK2Uuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHguc3NyYytcIiBjbmFtZTpcIit0LmxvY2FsQ05hbWUrXCJcXHJcXG5cIiksc30sdC5nZXREaXJlY3Rpb249ZnVuY3Rpb24oZSxyKXtmb3IodmFyIGk9dC5zcGxpdExpbmVzKGUpLG49MDtuPGkubGVuZ3RoO24rKylzd2l0Y2goaVtuXSl7Y2FzZVwiYT1zZW5kcmVjdlwiOmNhc2VcImE9c2VuZG9ubHlcIjpjYXNlXCJhPXJlY3Zvbmx5XCI6Y2FzZVwiYT1pbmFjdGl2ZVwiOnJldHVybiBpW25dLnN1YnN0cigyKX1yZXR1cm4gcj90LmdldERpcmVjdGlvbihyKTpcInNlbmRyZWN2XCJ9LHQuZ2V0S2luZD1mdW5jdGlvbihlKXtyZXR1cm4gdC5zcGxpdExpbmVzKGUpWzBdLnNwbGl0KFwiIFwiKVswXS5zdWJzdHIoMil9LHQuaXNSZWplY3RlZD1mdW5jdGlvbihlKXtyZXR1cm5cIjBcIj09PWUuc3BsaXQoXCIgXCIsMilbMV19LHQucGFyc2VNTGluZT1mdW5jdGlvbihlKXt2YXIgcj10LnNwbGl0TGluZXMoZSlbMF0uc3Vic3RyKDIpLnNwbGl0KFwiIFwiKTtyZXR1cm57a2luZDpyWzBdLHBvcnQ6cGFyc2VJbnQoclsxXSwxMCkscHJvdG9jb2w6clsyXSxmbXQ6ci5zbGljZSgzKS5qb2luKFwiIFwiKX19LHQucGFyc2VPTGluZT1mdW5jdGlvbihlKXt2YXIgcj10Lm1hdGNoUHJlZml4KGUsXCJvPVwiKVswXS5zdWJzdHIoMikuc3BsaXQoXCIgXCIpO3JldHVybnt1c2VybmFtZTpyWzBdLHNlc3Npb25JZDpyWzFdLHNlc3Npb25WZXJzaW9uOnBhcnNlSW50KHJbMl0sMTApLG5ldFR5cGU6clszXSxhZGRyZXNzVHlwZTpyWzRdLGFkZHJlc3M6cls1XX19LHQuaXNWYWxpZFNEUD1mdW5jdGlvbihlKXtpZihcInN0cmluZ1wiIT10eXBlb2YgZXx8MD09PWUubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgcj10LnNwbGl0TGluZXMoZSksaT0wO2k8ci5sZW5ndGg7aSsrKWlmKHJbaV0ubGVuZ3RoPDJ8fFwiPVwiIT09cltpXS5jaGFyQXQoMSkpcmV0dXJuITE7cmV0dXJuITB9LGUuZXhwb3J0cz10fSxRKFg9e2V4cG9ydHM6e319LFguZXhwb3J0cyksWC5leHBvcnRzKTtmdW5jdGlvbiBlZShlLHQscixpLG4pe3ZhciBzPVoud3JpdGVSdHBEZXNjcmlwdGlvbihlLmtpbmQsdCk7aWYocys9Wi53cml0ZUljZVBhcmFtZXRlcnMoZS5pY2VHYXRoZXJlci5nZXRMb2NhbFBhcmFtZXRlcnMoKSkscys9Wi53cml0ZUR0bHNQYXJhbWV0ZXJzKGUuZHRsc1RyYW5zcG9ydC5nZXRMb2NhbFBhcmFtZXRlcnMoKSxcIm9mZmVyXCI9PT1yP1wiYWN0cGFzc1wiOm58fFwiYWN0aXZlXCIpLHMrPVwiYT1taWQ6XCIrZS5taWQrXCJcXHJcXG5cIixlLnJ0cFNlbmRlciYmZS5ydHBSZWNlaXZlcj9zKz1cImE9c2VuZHJlY3ZcXHJcXG5cIjplLnJ0cFNlbmRlcj9zKz1cImE9c2VuZG9ubHlcXHJcXG5cIjplLnJ0cFJlY2VpdmVyP3MrPVwiYT1yZWN2b25seVxcclxcblwiOnMrPVwiYT1pbmFjdGl2ZVxcclxcblwiLGUucnRwU2VuZGVyKXt2YXIgbz1lLnJ0cFNlbmRlci5faW5pdGlhbFRyYWNrSWR8fGUucnRwU2VuZGVyLnRyYWNrLmlkO2UucnRwU2VuZGVyLl9pbml0aWFsVHJhY2tJZD1vO3ZhciBhPVwibXNpZDpcIisoaT9pLmlkOlwiLVwiKStcIiBcIitvK1wiXFxyXFxuXCI7cys9XCJhPVwiK2Escys9XCJhPXNzcmM6XCIrZS5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnNzcmMrXCIgXCIrYSxlLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4JiYocys9XCJhPXNzcmM6XCIrZS5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eC5zc3JjK1wiIFwiK2Escys9XCJhPXNzcmMtZ3JvdXA6RklEIFwiK2Uuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5zc3JjK1wiIFwiK2Uuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHguc3NyYytcIlxcclxcblwiKX1yZXR1cm4gcys9XCJhPXNzcmM6XCIrZS5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnNzcmMrXCIgY25hbWU6XCIrWi5sb2NhbENOYW1lK1wiXFxyXFxuXCIsZS5ydHBTZW5kZXImJmUuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHgmJihzKz1cImE9c3NyYzpcIitlLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4LnNzcmMrXCIgY25hbWU6XCIrWi5sb2NhbENOYW1lK1wiXFxyXFxuXCIpLHN9ZnVuY3Rpb24gdGUoZSx0KXt2YXIgcj17Y29kZWNzOltdLGhlYWRlckV4dGVuc2lvbnM6W10sZmVjTWVjaGFuaXNtczpbXX0saT1mdW5jdGlvbihlLHQpe2U9cGFyc2VJbnQoZSwxMCk7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDtyKyspaWYodFtyXS5wYXlsb2FkVHlwZT09PWV8fHRbcl0ucHJlZmVycmVkUGF5bG9hZFR5cGU9PT1lKXJldHVybiB0W3JdfSxuPWZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBzPWkoZS5wYXJhbWV0ZXJzLmFwdCxyKSxvPWkodC5wYXJhbWV0ZXJzLmFwdCxuKTtyZXR1cm4gcyYmbyYmcy5uYW1lLnRvTG93ZXJDYXNlKCk9PT1vLm5hbWUudG9Mb3dlckNhc2UoKX07cmV0dXJuIGUuY29kZWNzLmZvckVhY2goKGZ1bmN0aW9uKGkpe2Zvcih2YXIgcz0wO3M8dC5jb2RlY3MubGVuZ3RoO3MrKyl7dmFyIG89dC5jb2RlY3Nbc107aWYoaS5uYW1lLnRvTG93ZXJDYXNlKCk9PT1vLm5hbWUudG9Mb3dlckNhc2UoKSYmaS5jbG9ja1JhdGU9PT1vLmNsb2NrUmF0ZSl7aWYoXCJydHhcIj09PWkubmFtZS50b0xvd2VyQ2FzZSgpJiZpLnBhcmFtZXRlcnMmJm8ucGFyYW1ldGVycy5hcHQmJiFuKGksbyxlLmNvZGVjcyx0LmNvZGVjcykpY29udGludWU7KG89SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShvKSkpLm51bUNoYW5uZWxzPU1hdGgubWluKGkubnVtQ2hhbm5lbHMsby5udW1DaGFubmVscyksci5jb2RlY3MucHVzaChvKSxvLnJ0Y3BGZWVkYmFjaz1vLnJ0Y3BGZWVkYmFjay5maWx0ZXIoKGZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wO3Q8aS5ydGNwRmVlZGJhY2subGVuZ3RoO3QrKylpZihpLnJ0Y3BGZWVkYmFja1t0XS50eXBlPT09ZS50eXBlJiZpLnJ0Y3BGZWVkYmFja1t0XS5wYXJhbWV0ZXI9PT1lLnBhcmFtZXRlcilyZXR1cm4hMDtyZXR1cm4hMX0pKTticmVha319fSkpLGUuaGVhZGVyRXh0ZW5zaW9ucy5mb3JFYWNoKChmdW5jdGlvbihlKXtmb3IodmFyIGk9MDtpPHQuaGVhZGVyRXh0ZW5zaW9ucy5sZW5ndGg7aSsrKXt2YXIgbj10LmhlYWRlckV4dGVuc2lvbnNbaV07aWYoZS51cmk9PT1uLnVyaSl7ci5oZWFkZXJFeHRlbnNpb25zLnB1c2gobik7YnJlYWt9fX0pKSxyfWZ1bmN0aW9uIHJlKGUsdCxyKXtyZXR1cm4tMSE9PXtvZmZlcjp7c2V0TG9jYWxEZXNjcmlwdGlvbjpbXCJzdGFibGVcIixcImhhdmUtbG9jYWwtb2ZmZXJcIl0sc2V0UmVtb3RlRGVzY3JpcHRpb246W1wic3RhYmxlXCIsXCJoYXZlLXJlbW90ZS1vZmZlclwiXX0sYW5zd2VyOntzZXRMb2NhbERlc2NyaXB0aW9uOltcImhhdmUtcmVtb3RlLW9mZmVyXCIsXCJoYXZlLWxvY2FsLXByYW5zd2VyXCJdLHNldFJlbW90ZURlc2NyaXB0aW9uOltcImhhdmUtbG9jYWwtb2ZmZXJcIixcImhhdmUtcmVtb3RlLXByYW5zd2VyXCJdfX1bdF1bZV0uaW5kZXhPZihyKX1mdW5jdGlvbiBpZShlLHQpe3ZhciByPWUuZ2V0UmVtb3RlQ2FuZGlkYXRlcygpLmZpbmQoKGZ1bmN0aW9uKGUpe3JldHVybiB0LmZvdW5kYXRpb249PT1lLmZvdW5kYXRpb24mJnQuaXA9PT1lLmlwJiZ0LnBvcnQ9PT1lLnBvcnQmJnQucHJpb3JpdHk9PT1lLnByaW9yaXR5JiZ0LnByb3RvY29sPT09ZS5wcm90b2NvbCYmdC50eXBlPT09ZS50eXBlfSkpO3JldHVybiByfHxlLmFkZFJlbW90ZUNhbmRpZGF0ZSh0KSwhcn1mdW5jdGlvbiBuZShlLHQpe3ZhciByPW5ldyBFcnJvcih0KTtyZXR1cm4gci5uYW1lPWUsci5jb2RlPXtOb3RTdXBwb3J0ZWRFcnJvcjo5LEludmFsaWRTdGF0ZUVycm9yOjExLEludmFsaWRBY2Nlc3NFcnJvcjoxNSxUeXBlRXJyb3I6dm9pZCAwLE9wZXJhdGlvbkVycm9yOnZvaWQgMH1bZV0scn12YXIgc2U9ZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiByKHQscil7ci5hZGRUcmFjayh0KSxyLmRpc3BhdGNoRXZlbnQobmV3IGUuTWVkaWFTdHJlYW1UcmFja0V2ZW50KFwiYWRkdHJhY2tcIix7dHJhY2s6dH0pKX1mdW5jdGlvbiBpKHQscixpLG4pe3ZhciBzPW5ldyBFdmVudChcInRyYWNrXCIpO3MudHJhY2s9cixzLnJlY2VpdmVyPWkscy50cmFuc2NlaXZlcj17cmVjZWl2ZXI6aX0scy5zdHJlYW1zPW4sZS5zZXRUaW1lb3V0KChmdW5jdGlvbigpe3QuX2Rpc3BhdGNoRXZlbnQoXCJ0cmFja1wiLHMpfSkpfXZhciBuPWZ1bmN0aW9uKHIpe3ZhciBpPXRoaXMsbj1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7aWYoW1wiYWRkRXZlbnRMaXN0ZW5lclwiLFwicmVtb3ZlRXZlbnRMaXN0ZW5lclwiLFwiZGlzcGF0Y2hFdmVudFwiXS5mb3JFYWNoKChmdW5jdGlvbihlKXtpW2VdPW5bZV0uYmluZChuKX0pKSx0aGlzLmNhblRyaWNrbGVJY2VDYW5kaWRhdGVzPW51bGwsdGhpcy5uZWVkTmVnb3RpYXRpb249ITEsdGhpcy5sb2NhbFN0cmVhbXM9W10sdGhpcy5yZW1vdGVTdHJlYW1zPVtdLHRoaXMuX2xvY2FsRGVzY3JpcHRpb249bnVsbCx0aGlzLl9yZW1vdGVEZXNjcmlwdGlvbj1udWxsLHRoaXMuc2lnbmFsaW5nU3RhdGU9XCJzdGFibGVcIix0aGlzLmljZUNvbm5lY3Rpb25TdGF0ZT1cIm5ld1wiLHRoaXMuY29ubmVjdGlvblN0YXRlPVwibmV3XCIsdGhpcy5pY2VHYXRoZXJpbmdTdGF0ZT1cIm5ld1wiLHI9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyfHx7fSkpLHRoaXMudXNpbmdCdW5kbGU9XCJtYXgtYnVuZGxlXCI9PT1yLmJ1bmRsZVBvbGljeSxcIm5lZ290aWF0ZVwiPT09ci5ydGNwTXV4UG9saWN5KXRocm93IG5lKFwiTm90U3VwcG9ydGVkRXJyb3JcIixcInJ0Y3BNdXhQb2xpY3kgJ25lZ290aWF0ZScgaXMgbm90IHN1cHBvcnRlZFwiKTtzd2l0Y2goci5ydGNwTXV4UG9saWN5fHwoci5ydGNwTXV4UG9saWN5PVwicmVxdWlyZVwiKSxyLmljZVRyYW5zcG9ydFBvbGljeSl7Y2FzZVwiYWxsXCI6Y2FzZVwicmVsYXlcIjpicmVhaztkZWZhdWx0OnIuaWNlVHJhbnNwb3J0UG9saWN5PVwiYWxsXCJ9c3dpdGNoKHIuYnVuZGxlUG9saWN5KXtjYXNlXCJiYWxhbmNlZFwiOmNhc2VcIm1heC1jb21wYXRcIjpjYXNlXCJtYXgtYnVuZGxlXCI6YnJlYWs7ZGVmYXVsdDpyLmJ1bmRsZVBvbGljeT1cImJhbGFuY2VkXCJ9aWYoci5pY2VTZXJ2ZXJzPWZ1bmN0aW9uKGUsdCl7dmFyIHI9ITE7cmV0dXJuKGU9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlKSkpLmZpbHRlcigoZnVuY3Rpb24oZSl7aWYoZSYmKGUudXJsc3x8ZS51cmwpKXt2YXIgaT1lLnVybHN8fGUudXJsO2UudXJsJiYhZS51cmxzJiZjb25zb2xlLndhcm4oXCJSVENJY2VTZXJ2ZXIudXJsIGlzIGRlcHJlY2F0ZWQhIFVzZSB1cmxzIGluc3RlYWQuXCIpO3ZhciBuPVwic3RyaW5nXCI9PXR5cGVvZiBpO3JldHVybiBuJiYoaT1baV0pLGk9aS5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiAwIT09ZS5pbmRleE9mKFwidHVybjpcIil8fC0xPT09ZS5pbmRleE9mKFwidHJhbnNwb3J0PXVkcFwiKXx8LTEhPT1lLmluZGV4T2YoXCJ0dXJuOltcIil8fHI/MD09PWUuaW5kZXhPZihcInN0dW46XCIpJiZ0Pj0xNDM5MyYmLTE9PT1lLmluZGV4T2YoXCI/dHJhbnNwb3J0PXVkcFwiKToocj0hMCwhMCl9KSksZGVsZXRlIGUudXJsLGUudXJscz1uP2lbMF06aSwhIWkubGVuZ3RofX0pKX0oci5pY2VTZXJ2ZXJzfHxbXSx0KSx0aGlzLl9pY2VHYXRoZXJlcnM9W10sci5pY2VDYW5kaWRhdGVQb29sU2l6ZSlmb3IodmFyIHM9ci5pY2VDYW5kaWRhdGVQb29sU2l6ZTtzPjA7cy0tKXRoaXMuX2ljZUdhdGhlcmVycy5wdXNoKG5ldyBlLlJUQ0ljZUdhdGhlcmVyKHtpY2VTZXJ2ZXJzOnIuaWNlU2VydmVycyxnYXRoZXJQb2xpY3k6ci5pY2VUcmFuc3BvcnRQb2xpY3l9KSk7ZWxzZSByLmljZUNhbmRpZGF0ZVBvb2xTaXplPTA7dGhpcy5fY29uZmlnPXIsdGhpcy50cmFuc2NlaXZlcnM9W10sdGhpcy5fc2RwU2Vzc2lvbklkPVouZ2VuZXJhdGVTZXNzaW9uSWQoKSx0aGlzLl9zZHBTZXNzaW9uVmVyc2lvbj0wLHRoaXMuX2R0bHNSb2xlPXZvaWQgMCx0aGlzLl9pc0Nsb3NlZD0hMX07T2JqZWN0LmRlZmluZVByb3BlcnR5KG4ucHJvdG90eXBlLFwibG9jYWxEZXNjcmlwdGlvblwiLHtjb25maWd1cmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xvY2FsRGVzY3JpcHRpb259fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KG4ucHJvdG90eXBlLFwicmVtb3RlRGVzY3JpcHRpb25cIix7Y29uZmlndXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZW1vdGVEZXNjcmlwdGlvbn19KSxuLnByb3RvdHlwZS5vbmljZWNhbmRpZGF0ZT1udWxsLG4ucHJvdG90eXBlLm9uYWRkc3RyZWFtPW51bGwsbi5wcm90b3R5cGUub250cmFjaz1udWxsLG4ucHJvdG90eXBlLm9ucmVtb3Zlc3RyZWFtPW51bGwsbi5wcm90b3R5cGUub25zaWduYWxpbmdzdGF0ZWNoYW5nZT1udWxsLG4ucHJvdG90eXBlLm9uaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlPW51bGwsbi5wcm90b3R5cGUub25jb25uZWN0aW9uc3RhdGVjaGFuZ2U9bnVsbCxuLnByb3RvdHlwZS5vbmljZWdhdGhlcmluZ3N0YXRlY2hhbmdlPW51bGwsbi5wcm90b3R5cGUub25uZWdvdGlhdGlvbm5lZWRlZD1udWxsLG4ucHJvdG90eXBlLm9uZGF0YWNoYW5uZWw9bnVsbCxuLnByb3RvdHlwZS5fZGlzcGF0Y2hFdmVudD1mdW5jdGlvbihlLHQpe3RoaXMuX2lzQ2xvc2VkfHwodGhpcy5kaXNwYXRjaEV2ZW50KHQpLFwiZnVuY3Rpb25cIj09dHlwZW9mIHRoaXNbXCJvblwiK2VdJiZ0aGlzW1wib25cIitlXSh0KSl9LG4ucHJvdG90eXBlLl9lbWl0R2F0aGVyaW5nU3RhdGVDaGFuZ2U9ZnVuY3Rpb24oKXt2YXIgZT1uZXcgRXZlbnQoXCJpY2VnYXRoZXJpbmdzdGF0ZWNoYW5nZVwiKTt0aGlzLl9kaXNwYXRjaEV2ZW50KFwiaWNlZ2F0aGVyaW5nc3RhdGVjaGFuZ2VcIixlKX0sbi5wcm90b3R5cGUuZ2V0Q29uZmlndXJhdGlvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb25maWd9LG4ucHJvdG90eXBlLmdldExvY2FsU3RyZWFtcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxvY2FsU3RyZWFtc30sbi5wcm90b3R5cGUuZ2V0UmVtb3RlU3RyZWFtcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJlbW90ZVN0cmVhbXN9LG4ucHJvdG90eXBlLl9jcmVhdGVUcmFuc2NlaXZlcj1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMudHJhbnNjZWl2ZXJzLmxlbmd0aD4wLGk9e3RyYWNrOm51bGwsaWNlR2F0aGVyZXI6bnVsbCxpY2VUcmFuc3BvcnQ6bnVsbCxkdGxzVHJhbnNwb3J0Om51bGwsbG9jYWxDYXBhYmlsaXRpZXM6bnVsbCxyZW1vdGVDYXBhYmlsaXRpZXM6bnVsbCxydHBTZW5kZXI6bnVsbCxydHBSZWNlaXZlcjpudWxsLGtpbmQ6ZSxtaWQ6bnVsbCxzZW5kRW5jb2RpbmdQYXJhbWV0ZXJzOm51bGwscmVjdkVuY29kaW5nUGFyYW1ldGVyczpudWxsLHN0cmVhbTpudWxsLGFzc29jaWF0ZWRSZW1vdGVNZWRpYVN0cmVhbXM6W10sd2FudFJlY2VpdmU6ITB9O2lmKHRoaXMudXNpbmdCdW5kbGUmJnIpaS5pY2VUcmFuc3BvcnQ9dGhpcy50cmFuc2NlaXZlcnNbMF0uaWNlVHJhbnNwb3J0LGkuZHRsc1RyYW5zcG9ydD10aGlzLnRyYW5zY2VpdmVyc1swXS5kdGxzVHJhbnNwb3J0O2Vsc2V7dmFyIG49dGhpcy5fY3JlYXRlSWNlQW5kRHRsc1RyYW5zcG9ydHMoKTtpLmljZVRyYW5zcG9ydD1uLmljZVRyYW5zcG9ydCxpLmR0bHNUcmFuc3BvcnQ9bi5kdGxzVHJhbnNwb3J0fXJldHVybiB0fHx0aGlzLnRyYW5zY2VpdmVycy5wdXNoKGkpLGl9LG4ucHJvdG90eXBlLmFkZFRyYWNrPWZ1bmN0aW9uKHQscil7aWYodGhpcy5faXNDbG9zZWQpdGhyb3cgbmUoXCJJbnZhbGlkU3RhdGVFcnJvclwiLFwiQXR0ZW1wdGVkIHRvIGNhbGwgYWRkVHJhY2sgb24gYSBjbG9zZWQgcGVlcmNvbm5lY3Rpb24uXCIpO3ZhciBpO2lmKHRoaXMudHJhbnNjZWl2ZXJzLmZpbmQoKGZ1bmN0aW9uKGUpe3JldHVybiBlLnRyYWNrPT09dH0pKSl0aHJvdyBuZShcIkludmFsaWRBY2Nlc3NFcnJvclwiLFwiVHJhY2sgYWxyZWFkeSBleGlzdHMuXCIpO2Zvcih2YXIgbj0wO248dGhpcy50cmFuc2NlaXZlcnMubGVuZ3RoO24rKyl0aGlzLnRyYW5zY2VpdmVyc1tuXS50cmFja3x8dGhpcy50cmFuc2NlaXZlcnNbbl0ua2luZCE9PXQua2luZHx8KGk9dGhpcy50cmFuc2NlaXZlcnNbbl0pO3JldHVybiBpfHwoaT10aGlzLl9jcmVhdGVUcmFuc2NlaXZlcih0LmtpbmQpKSx0aGlzLl9tYXliZUZpcmVOZWdvdGlhdGlvbk5lZWRlZCgpLC0xPT09dGhpcy5sb2NhbFN0cmVhbXMuaW5kZXhPZihyKSYmdGhpcy5sb2NhbFN0cmVhbXMucHVzaChyKSxpLnRyYWNrPXQsaS5zdHJlYW09cixpLnJ0cFNlbmRlcj1uZXcgZS5SVENSdHBTZW5kZXIodCxpLmR0bHNUcmFuc3BvcnQpLGkucnRwU2VuZGVyfSxuLnByb3RvdHlwZS5hZGRTdHJlYW09ZnVuY3Rpb24oZSl7dmFyIHI9dGhpcztpZih0Pj0xNTAyNSllLmdldFRyYWNrcygpLmZvckVhY2goKGZ1bmN0aW9uKHQpe3IuYWRkVHJhY2sodCxlKX0pKTtlbHNle3ZhciBpPWUuY2xvbmUoKTtlLmdldFRyYWNrcygpLmZvckVhY2goKGZ1bmN0aW9uKGUsdCl7dmFyIHI9aS5nZXRUcmFja3MoKVt0XTtlLmFkZEV2ZW50TGlzdGVuZXIoXCJlbmFibGVkXCIsKGZ1bmN0aW9uKGUpe3IuZW5hYmxlZD1lLmVuYWJsZWR9KSl9KSksaS5nZXRUcmFja3MoKS5mb3JFYWNoKChmdW5jdGlvbihlKXtyLmFkZFRyYWNrKGUsaSl9KSl9fSxuLnByb3RvdHlwZS5yZW1vdmVUcmFjaz1mdW5jdGlvbih0KXtpZih0aGlzLl9pc0Nsb3NlZCl0aHJvdyBuZShcIkludmFsaWRTdGF0ZUVycm9yXCIsXCJBdHRlbXB0ZWQgdG8gY2FsbCByZW1vdmVUcmFjayBvbiBhIGNsb3NlZCBwZWVyY29ubmVjdGlvbi5cIik7aWYoISh0IGluc3RhbmNlb2YgZS5SVENSdHBTZW5kZXIpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJBcmd1bWVudCAxIG9mIFJUQ1BlZXJDb25uZWN0aW9uLnJlbW92ZVRyYWNrIGRvZXMgbm90IGltcGxlbWVudCBpbnRlcmZhY2UgUlRDUnRwU2VuZGVyLlwiKTt2YXIgcj10aGlzLnRyYW5zY2VpdmVycy5maW5kKChmdW5jdGlvbihlKXtyZXR1cm4gZS5ydHBTZW5kZXI9PT10fSkpO2lmKCFyKXRocm93IG5lKFwiSW52YWxpZEFjY2Vzc0Vycm9yXCIsXCJTZW5kZXIgd2FzIG5vdCBjcmVhdGVkIGJ5IHRoaXMgY29ubmVjdGlvbi5cIik7dmFyIGk9ci5zdHJlYW07ci5ydHBTZW5kZXIuc3RvcCgpLHIucnRwU2VuZGVyPW51bGwsci50cmFjaz1udWxsLHIuc3RyZWFtPW51bGwsLTE9PT10aGlzLnRyYW5zY2VpdmVycy5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlLnN0cmVhbX0pKS5pbmRleE9mKGkpJiZ0aGlzLmxvY2FsU3RyZWFtcy5pbmRleE9mKGkpPi0xJiZ0aGlzLmxvY2FsU3RyZWFtcy5zcGxpY2UodGhpcy5sb2NhbFN0cmVhbXMuaW5kZXhPZihpKSwxKSx0aGlzLl9tYXliZUZpcmVOZWdvdGlhdGlvbk5lZWRlZCgpfSxuLnByb3RvdHlwZS5yZW1vdmVTdHJlYW09ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztlLmdldFRyYWNrcygpLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciByPXQuZ2V0U2VuZGVycygpLmZpbmQoKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRyYWNrPT09ZX0pKTtyJiZ0LnJlbW92ZVRyYWNrKHIpfSkpfSxuLnByb3RvdHlwZS5nZXRTZW5kZXJzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHJhbnNjZWl2ZXJzLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuISFlLnJ0cFNlbmRlcn0pKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlLnJ0cFNlbmRlcn0pKX0sbi5wcm90b3R5cGUuZ2V0UmVjZWl2ZXJzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHJhbnNjZWl2ZXJzLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuISFlLnJ0cFJlY2VpdmVyfSkpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUucnRwUmVjZWl2ZXJ9KSl9LG4ucHJvdG90eXBlLl9jcmVhdGVJY2VHYXRoZXJlcj1mdW5jdGlvbih0LHIpe3ZhciBpPXRoaXM7aWYociYmdD4wKXJldHVybiB0aGlzLnRyYW5zY2VpdmVyc1swXS5pY2VHYXRoZXJlcjtpZih0aGlzLl9pY2VHYXRoZXJlcnMubGVuZ3RoKXJldHVybiB0aGlzLl9pY2VHYXRoZXJlcnMuc2hpZnQoKTt2YXIgbj1uZXcgZS5SVENJY2VHYXRoZXJlcih7aWNlU2VydmVyczp0aGlzLl9jb25maWcuaWNlU2VydmVycyxnYXRoZXJQb2xpY3k6dGhpcy5fY29uZmlnLmljZVRyYW5zcG9ydFBvbGljeX0pO3JldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkobixcInN0YXRlXCIse3ZhbHVlOlwibmV3XCIsd3JpdGFibGU6ITB9KSx0aGlzLnRyYW5zY2VpdmVyc1t0XS5idWZmZXJlZENhbmRpZGF0ZUV2ZW50cz1bXSx0aGlzLnRyYW5zY2VpdmVyc1t0XS5idWZmZXJDYW5kaWRhdGVzPWZ1bmN0aW9uKGUpe3ZhciByPSFlLmNhbmRpZGF0ZXx8MD09PU9iamVjdC5rZXlzKGUuY2FuZGlkYXRlKS5sZW5ndGg7bi5zdGF0ZT1yP1wiY29tcGxldGVkXCI6XCJnYXRoZXJpbmdcIixudWxsIT09aS50cmFuc2NlaXZlcnNbdF0uYnVmZmVyZWRDYW5kaWRhdGVFdmVudHMmJmkudHJhbnNjZWl2ZXJzW3RdLmJ1ZmZlcmVkQ2FuZGlkYXRlRXZlbnRzLnB1c2goZSl9LG4uYWRkRXZlbnRMaXN0ZW5lcihcImxvY2FsY2FuZGlkYXRlXCIsdGhpcy50cmFuc2NlaXZlcnNbdF0uYnVmZmVyQ2FuZGlkYXRlcyksbn0sbi5wcm90b3R5cGUuX2dhdGhlcj1mdW5jdGlvbih0LHIpe3ZhciBpPXRoaXMsbj10aGlzLnRyYW5zY2VpdmVyc1tyXS5pY2VHYXRoZXJlcjtpZighbi5vbmxvY2FsY2FuZGlkYXRlKXt2YXIgcz10aGlzLnRyYW5zY2VpdmVyc1tyXS5idWZmZXJlZENhbmRpZGF0ZUV2ZW50czt0aGlzLnRyYW5zY2VpdmVyc1tyXS5idWZmZXJlZENhbmRpZGF0ZUV2ZW50cz1udWxsLG4ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxvY2FsY2FuZGlkYXRlXCIsdGhpcy50cmFuc2NlaXZlcnNbcl0uYnVmZmVyQ2FuZGlkYXRlcyksbi5vbmxvY2FsY2FuZGlkYXRlPWZ1bmN0aW9uKGUpe2lmKCEoaS51c2luZ0J1bmRsZSYmcj4wKSl7dmFyIHM9bmV3IEV2ZW50KFwiaWNlY2FuZGlkYXRlXCIpO3MuY2FuZGlkYXRlPXtzZHBNaWQ6dCxzZHBNTGluZUluZGV4OnJ9O3ZhciBvPWUuY2FuZGlkYXRlLGE9IW98fDA9PT1PYmplY3Qua2V5cyhvKS5sZW5ndGg7aWYoYSlcIm5ld1wiIT09bi5zdGF0ZSYmXCJnYXRoZXJpbmdcIiE9PW4uc3RhdGV8fChuLnN0YXRlPVwiY29tcGxldGVkXCIpO2Vsc2V7XCJuZXdcIj09PW4uc3RhdGUmJihuLnN0YXRlPVwiZ2F0aGVyaW5nXCIpLG8uY29tcG9uZW50PTEsby51ZnJhZz1uLmdldExvY2FsUGFyYW1ldGVycygpLnVzZXJuYW1lRnJhZ21lbnQ7dmFyIGM9Wi53cml0ZUNhbmRpZGF0ZShvKTtzLmNhbmRpZGF0ZT1PYmplY3QuYXNzaWduKHMuY2FuZGlkYXRlLFoucGFyc2VDYW5kaWRhdGUoYykpLHMuY2FuZGlkYXRlLmNhbmRpZGF0ZT1jLHMuY2FuZGlkYXRlLnRvSlNPTj1mdW5jdGlvbigpe3JldHVybntjYW5kaWRhdGU6cy5jYW5kaWRhdGUuY2FuZGlkYXRlLHNkcE1pZDpzLmNhbmRpZGF0ZS5zZHBNaWQsc2RwTUxpbmVJbmRleDpzLmNhbmRpZGF0ZS5zZHBNTGluZUluZGV4LHVzZXJuYW1lRnJhZ21lbnQ6cy5jYW5kaWRhdGUudXNlcm5hbWVGcmFnbWVudH19fXZhciBkPVouZ2V0TWVkaWFTZWN0aW9ucyhpLl9sb2NhbERlc2NyaXB0aW9uLnNkcCk7ZFtzLmNhbmRpZGF0ZS5zZHBNTGluZUluZGV4XSs9YT9cImE9ZW5kLW9mLWNhbmRpZGF0ZXNcXHJcXG5cIjpcImE9XCIrcy5jYW5kaWRhdGUuY2FuZGlkYXRlK1wiXFxyXFxuXCIsaS5fbG9jYWxEZXNjcmlwdGlvbi5zZHA9Wi5nZXREZXNjcmlwdGlvbihpLl9sb2NhbERlc2NyaXB0aW9uLnNkcCkrZC5qb2luKFwiXCIpO3ZhciB1PWkudHJhbnNjZWl2ZXJzLmV2ZXJ5KChmdW5jdGlvbihlKXtyZXR1cm4gZS5pY2VHYXRoZXJlciYmXCJjb21wbGV0ZWRcIj09PWUuaWNlR2F0aGVyZXIuc3RhdGV9KSk7XCJnYXRoZXJpbmdcIiE9PWkuaWNlR2F0aGVyaW5nU3RhdGUmJihpLmljZUdhdGhlcmluZ1N0YXRlPVwiZ2F0aGVyaW5nXCIsaS5fZW1pdEdhdGhlcmluZ1N0YXRlQ2hhbmdlKCkpLGF8fGkuX2Rpc3BhdGNoRXZlbnQoXCJpY2VjYW5kaWRhdGVcIixzKSx1JiYoaS5fZGlzcGF0Y2hFdmVudChcImljZWNhbmRpZGF0ZVwiLG5ldyBFdmVudChcImljZWNhbmRpZGF0ZVwiKSksaS5pY2VHYXRoZXJpbmdTdGF0ZT1cImNvbXBsZXRlXCIsaS5fZW1pdEdhdGhlcmluZ1N0YXRlQ2hhbmdlKCkpfX0sZS5zZXRUaW1lb3V0KChmdW5jdGlvbigpe3MuZm9yRWFjaCgoZnVuY3Rpb24oZSl7bi5vbmxvY2FsY2FuZGlkYXRlKGUpfSkpfSksMCl9fSxuLnByb3RvdHlwZS5fY3JlYXRlSWNlQW5kRHRsc1RyYW5zcG9ydHM9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLHI9bmV3IGUuUlRDSWNlVHJhbnNwb3J0KG51bGwpO3Iub25pY2VzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe3QuX3VwZGF0ZUljZUNvbm5lY3Rpb25TdGF0ZSgpLHQuX3VwZGF0ZUNvbm5lY3Rpb25TdGF0ZSgpfTt2YXIgaT1uZXcgZS5SVENEdGxzVHJhbnNwb3J0KHIpO3JldHVybiBpLm9uZHRsc3N0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7dC5fdXBkYXRlQ29ubmVjdGlvblN0YXRlKCl9LGkub25lcnJvcj1mdW5jdGlvbigpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShpLFwic3RhdGVcIix7dmFsdWU6XCJmYWlsZWRcIix3cml0YWJsZTohMH0pLHQuX3VwZGF0ZUNvbm5lY3Rpb25TdGF0ZSgpfSx7aWNlVHJhbnNwb3J0OnIsZHRsc1RyYW5zcG9ydDppfX0sbi5wcm90b3R5cGUuX2Rpc3Bvc2VJY2VBbmREdGxzVHJhbnNwb3J0cz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLnRyYW5zY2VpdmVyc1tlXS5pY2VHYXRoZXJlcjt0JiYoZGVsZXRlIHQub25sb2NhbGNhbmRpZGF0ZSxkZWxldGUgdGhpcy50cmFuc2NlaXZlcnNbZV0uaWNlR2F0aGVyZXIpO3ZhciByPXRoaXMudHJhbnNjZWl2ZXJzW2VdLmljZVRyYW5zcG9ydDtyJiYoZGVsZXRlIHIub25pY2VzdGF0ZWNoYW5nZSxkZWxldGUgdGhpcy50cmFuc2NlaXZlcnNbZV0uaWNlVHJhbnNwb3J0KTt2YXIgaT10aGlzLnRyYW5zY2VpdmVyc1tlXS5kdGxzVHJhbnNwb3J0O2kmJihkZWxldGUgaS5vbmR0bHNzdGF0ZWNoYW5nZSxkZWxldGUgaS5vbmVycm9yLGRlbGV0ZSB0aGlzLnRyYW5zY2VpdmVyc1tlXS5kdGxzVHJhbnNwb3J0KX0sbi5wcm90b3R5cGUuX3RyYW5zY2VpdmU9ZnVuY3Rpb24oZSxyLGkpe3ZhciBuPXRlKGUubG9jYWxDYXBhYmlsaXRpZXMsZS5yZW1vdGVDYXBhYmlsaXRpZXMpO3ImJmUucnRwU2VuZGVyJiYobi5lbmNvZGluZ3M9ZS5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzLG4ucnRjcD17Y25hbWU6Wi5sb2NhbENOYW1lLGNvbXBvdW5kOmUucnRjcFBhcmFtZXRlcnMuY29tcG91bmR9LGUucmVjdkVuY29kaW5nUGFyYW1ldGVycy5sZW5ndGgmJihuLnJ0Y3Auc3NyYz1lLnJlY3ZFbmNvZGluZ1BhcmFtZXRlcnNbMF0uc3NyYyksZS5ydHBTZW5kZXIuc2VuZChuKSksaSYmZS5ydHBSZWNlaXZlciYmbi5jb2RlY3MubGVuZ3RoPjAmJihcInZpZGVvXCI9PT1lLmtpbmQmJmUucmVjdkVuY29kaW5nUGFyYW1ldGVycyYmdDwxNTAxOSYmZS5yZWN2RW5jb2RpbmdQYXJhbWV0ZXJzLmZvckVhY2goKGZ1bmN0aW9uKGUpe2RlbGV0ZSBlLnJ0eH0pKSxlLnJlY3ZFbmNvZGluZ1BhcmFtZXRlcnMubGVuZ3RoP24uZW5jb2RpbmdzPWUucmVjdkVuY29kaW5nUGFyYW1ldGVyczpuLmVuY29kaW5ncz1be31dLG4ucnRjcD17Y29tcG91bmQ6ZS5ydGNwUGFyYW1ldGVycy5jb21wb3VuZH0sZS5ydGNwUGFyYW1ldGVycy5jbmFtZSYmKG4ucnRjcC5jbmFtZT1lLnJ0Y3BQYXJhbWV0ZXJzLmNuYW1lKSxlLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnMubGVuZ3RoJiYobi5ydGNwLnNzcmM9ZS5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnNzcmMpLGUucnRwUmVjZWl2ZXIucmVjZWl2ZShuKSl9LG4ucHJvdG90eXBlLnNldExvY2FsRGVzY3JpcHRpb249ZnVuY3Rpb24oZSl7dmFyIHQscixpPXRoaXM7aWYoLTE9PT1bXCJvZmZlclwiLFwiYW5zd2VyXCJdLmluZGV4T2YoZS50eXBlKSlyZXR1cm4gUHJvbWlzZS5yZWplY3QobmUoXCJUeXBlRXJyb3JcIiwnVW5zdXBwb3J0ZWQgdHlwZSBcIicrZS50eXBlKydcIicpKTtpZighcmUoXCJzZXRMb2NhbERlc2NyaXB0aW9uXCIsZS50eXBlLGkuc2lnbmFsaW5nU3RhdGUpfHxpLl9pc0Nsb3NlZClyZXR1cm4gUHJvbWlzZS5yZWplY3QobmUoXCJJbnZhbGlkU3RhdGVFcnJvclwiLFwiQ2FuIG5vdCBzZXQgbG9jYWwgXCIrZS50eXBlK1wiIGluIHN0YXRlIFwiK2kuc2lnbmFsaW5nU3RhdGUpKTtpZihcIm9mZmVyXCI9PT1lLnR5cGUpdD1aLnNwbGl0U2VjdGlvbnMoZS5zZHApLHI9dC5zaGlmdCgpLHQuZm9yRWFjaCgoZnVuY3Rpb24oZSx0KXt2YXIgcj1aLnBhcnNlUnRwUGFyYW1ldGVycyhlKTtpLnRyYW5zY2VpdmVyc1t0XS5sb2NhbENhcGFiaWxpdGllcz1yfSkpLGkudHJhbnNjZWl2ZXJzLmZvckVhY2goKGZ1bmN0aW9uKGUsdCl7aS5fZ2F0aGVyKGUubWlkLHQpfSkpO2Vsc2UgaWYoXCJhbnN3ZXJcIj09PWUudHlwZSl7dD1aLnNwbGl0U2VjdGlvbnMoaS5fcmVtb3RlRGVzY3JpcHRpb24uc2RwKSxyPXQuc2hpZnQoKTt2YXIgbj1aLm1hdGNoUHJlZml4KHIsXCJhPWljZS1saXRlXCIpLmxlbmd0aD4wO3QuZm9yRWFjaCgoZnVuY3Rpb24oZSx0KXt2YXIgcz1pLnRyYW5zY2VpdmVyc1t0XSxvPXMuaWNlR2F0aGVyZXIsYT1zLmljZVRyYW5zcG9ydCxjPXMuZHRsc1RyYW5zcG9ydCxkPXMubG9jYWxDYXBhYmlsaXRpZXMsdT1zLnJlbW90ZUNhcGFiaWxpdGllcztpZighKFouaXNSZWplY3RlZChlKSYmMD09PVoubWF0Y2hQcmVmaXgoZSxcImE9YnVuZGxlLW9ubHlcIikubGVuZ3RoKSYmIXMucmVqZWN0ZWQpe3ZhciBsPVouZ2V0SWNlUGFyYW1ldGVycyhlLHIpLGg9Wi5nZXREdGxzUGFyYW1ldGVycyhlLHIpO24mJihoLnJvbGU9XCJzZXJ2ZXJcIiksaS51c2luZ0J1bmRsZSYmMCE9PXR8fChpLl9nYXRoZXIocy5taWQsdCksXCJuZXdcIj09PWEuc3RhdGUmJmEuc3RhcnQobyxsLG4/XCJjb250cm9sbGluZ1wiOlwiY29udHJvbGxlZFwiKSxcIm5ld1wiPT09Yy5zdGF0ZSYmYy5zdGFydChoKSk7dmFyIHA9dGUoZCx1KTtpLl90cmFuc2NlaXZlKHMscC5jb2RlY3MubGVuZ3RoPjAsITEpfX0pKX1yZXR1cm4gaS5fbG9jYWxEZXNjcmlwdGlvbj17dHlwZTplLnR5cGUsc2RwOmUuc2RwfSxcIm9mZmVyXCI9PT1lLnR5cGU/aS5fdXBkYXRlU2lnbmFsaW5nU3RhdGUoXCJoYXZlLWxvY2FsLW9mZmVyXCIpOmkuX3VwZGF0ZVNpZ25hbGluZ1N0YXRlKFwic3RhYmxlXCIpLFByb21pc2UucmVzb2x2ZSgpfSxuLnByb3RvdHlwZS5zZXRSZW1vdGVEZXNjcmlwdGlvbj1mdW5jdGlvbihuKXt2YXIgcz10aGlzO2lmKC0xPT09W1wib2ZmZXJcIixcImFuc3dlclwiXS5pbmRleE9mKG4udHlwZSkpcmV0dXJuIFByb21pc2UucmVqZWN0KG5lKFwiVHlwZUVycm9yXCIsJ1Vuc3VwcG9ydGVkIHR5cGUgXCInK24udHlwZSsnXCInKSk7aWYoIXJlKFwic2V0UmVtb3RlRGVzY3JpcHRpb25cIixuLnR5cGUscy5zaWduYWxpbmdTdGF0ZSl8fHMuX2lzQ2xvc2VkKXJldHVybiBQcm9taXNlLnJlamVjdChuZShcIkludmFsaWRTdGF0ZUVycm9yXCIsXCJDYW4gbm90IHNldCByZW1vdGUgXCIrbi50eXBlK1wiIGluIHN0YXRlIFwiK3Muc2lnbmFsaW5nU3RhdGUpKTt2YXIgbz17fTtzLnJlbW90ZVN0cmVhbXMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7b1tlLmlkXT1lfSkpO3ZhciBhPVtdLGM9Wi5zcGxpdFNlY3Rpb25zKG4uc2RwKSxkPWMuc2hpZnQoKSx1PVoubWF0Y2hQcmVmaXgoZCxcImE9aWNlLWxpdGVcIikubGVuZ3RoPjAsbD1aLm1hdGNoUHJlZml4KGQsXCJhPWdyb3VwOkJVTkRMRSBcIikubGVuZ3RoPjA7cy51c2luZ0J1bmRsZT1sO3ZhciBoPVoubWF0Y2hQcmVmaXgoZCxcImE9aWNlLW9wdGlvbnM6XCIpWzBdO3JldHVybiBzLmNhblRyaWNrbGVJY2VDYW5kaWRhdGVzPSEhaCYmaC5zdWJzdHIoMTQpLnNwbGl0KFwiIFwiKS5pbmRleE9mKFwidHJpY2tsZVwiKT49MCxjLmZvckVhY2goKGZ1bmN0aW9uKGksYyl7dmFyIGg9Wi5zcGxpdExpbmVzKGkpLHA9Wi5nZXRLaW5kKGkpLF89Wi5pc1JlamVjdGVkKGkpJiYwPT09Wi5tYXRjaFByZWZpeChpLFwiYT1idW5kbGUtb25seVwiKS5sZW5ndGgsbT1oWzBdLnN1YnN0cigyKS5zcGxpdChcIiBcIilbMl0sZj1aLmdldERpcmVjdGlvbihpLGQpLHY9Wi5wYXJzZU1zaWQoaSksUj1aLmdldE1pZChpKXx8Wi5nZW5lcmF0ZUlkZW50aWZpZXIoKTtpZihffHxcImFwcGxpY2F0aW9uXCI9PT1wJiYoXCJEVExTL1NDVFBcIj09PW18fFwiVURQL0RUTFMvU0NUUFwiPT09bSkpcy50cmFuc2NlaXZlcnNbY109e21pZDpSLGtpbmQ6cCxwcm90b2NvbDptLHJlamVjdGVkOiEwfTtlbHNle3ZhciBnLFMsQyxULEksRSx5LGssYjshXyYmcy50cmFuc2NlaXZlcnNbY10mJnMudHJhbnNjZWl2ZXJzW2NdLnJlamVjdGVkJiYocy50cmFuc2NlaXZlcnNbY109cy5fY3JlYXRlVHJhbnNjZWl2ZXIocCwhMCkpO3ZhciBQLE8sTD1aLnBhcnNlUnRwUGFyYW1ldGVycyhpKTtffHwoUD1aLmdldEljZVBhcmFtZXRlcnMoaSxkKSwoTz1aLmdldER0bHNQYXJhbWV0ZXJzKGksZCkpLnJvbGU9XCJjbGllbnRcIikseT1aLnBhcnNlUnRwRW5jb2RpbmdQYXJhbWV0ZXJzKGkpO3ZhciBOPVoucGFyc2VSdGNwUGFyYW1ldGVycyhpKSxEPVoubWF0Y2hQcmVmaXgoaSxcImE9ZW5kLW9mLWNhbmRpZGF0ZXNcIixkKS5sZW5ndGg+MCxBPVoubWF0Y2hQcmVmaXgoaSxcImE9Y2FuZGlkYXRlOlwiKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBaLnBhcnNlQ2FuZGlkYXRlKGUpfSkpLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIDE9PT1lLmNvbXBvbmVudH0pKTtpZigoXCJvZmZlclwiPT09bi50eXBlfHxcImFuc3dlclwiPT09bi50eXBlKSYmIV8mJmwmJmM+MCYmcy50cmFuc2NlaXZlcnNbY10mJihzLl9kaXNwb3NlSWNlQW5kRHRsc1RyYW5zcG9ydHMoYykscy50cmFuc2NlaXZlcnNbY10uaWNlR2F0aGVyZXI9cy50cmFuc2NlaXZlcnNbMF0uaWNlR2F0aGVyZXIscy50cmFuc2NlaXZlcnNbY10uaWNlVHJhbnNwb3J0PXMudHJhbnNjZWl2ZXJzWzBdLmljZVRyYW5zcG9ydCxzLnRyYW5zY2VpdmVyc1tjXS5kdGxzVHJhbnNwb3J0PXMudHJhbnNjZWl2ZXJzWzBdLmR0bHNUcmFuc3BvcnQscy50cmFuc2NlaXZlcnNbY10ucnRwU2VuZGVyJiZzLnRyYW5zY2VpdmVyc1tjXS5ydHBTZW5kZXIuc2V0VHJhbnNwb3J0KHMudHJhbnNjZWl2ZXJzWzBdLmR0bHNUcmFuc3BvcnQpLHMudHJhbnNjZWl2ZXJzW2NdLnJ0cFJlY2VpdmVyJiZzLnRyYW5zY2VpdmVyc1tjXS5ydHBSZWNlaXZlci5zZXRUcmFuc3BvcnQocy50cmFuc2NlaXZlcnNbMF0uZHRsc1RyYW5zcG9ydCkpLFwib2ZmZXJcIiE9PW4udHlwZXx8Xyl7aWYoXCJhbnN3ZXJcIj09PW4udHlwZSYmIV8pe1M9KGc9cy50cmFuc2NlaXZlcnNbY10pLmljZUdhdGhlcmVyLEM9Zy5pY2VUcmFuc3BvcnQsVD1nLmR0bHNUcmFuc3BvcnQsST1nLnJ0cFJlY2VpdmVyLEU9Zy5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzLGs9Zy5sb2NhbENhcGFiaWxpdGllcyxzLnRyYW5zY2VpdmVyc1tjXS5yZWN2RW5jb2RpbmdQYXJhbWV0ZXJzPXkscy50cmFuc2NlaXZlcnNbY10ucmVtb3RlQ2FwYWJpbGl0aWVzPUwscy50cmFuc2NlaXZlcnNbY10ucnRjcFBhcmFtZXRlcnM9TixBLmxlbmd0aCYmXCJuZXdcIj09PUMuc3RhdGUmJighdSYmIUR8fGwmJjAhPT1jP0EuZm9yRWFjaCgoZnVuY3Rpb24oZSl7aWUoZy5pY2VUcmFuc3BvcnQsZSl9KSk6Qy5zZXRSZW1vdGVDYW5kaWRhdGVzKEEpKSxsJiYwIT09Y3x8KFwibmV3XCI9PT1DLnN0YXRlJiZDLnN0YXJ0KFMsUCxcImNvbnRyb2xsaW5nXCIpLFwibmV3XCI9PT1ULnN0YXRlJiZULnN0YXJ0KE8pKSwhdGUoZy5sb2NhbENhcGFiaWxpdGllcyxnLnJlbW90ZUNhcGFiaWxpdGllcykuY29kZWNzLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuXCJydHhcIj09PWUubmFtZS50b0xvd2VyQ2FzZSgpfSkpLmxlbmd0aCYmZy5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eCYmZGVsZXRlIGcuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHgscy5fdHJhbnNjZWl2ZShnLFwic2VuZHJlY3ZcIj09PWZ8fFwicmVjdm9ubHlcIj09PWYsXCJzZW5kcmVjdlwiPT09Znx8XCJzZW5kb25seVwiPT09ZiksIUl8fFwic2VuZHJlY3ZcIiE9PWYmJlwic2VuZG9ubHlcIiE9PWY/ZGVsZXRlIGcucnRwUmVjZWl2ZXI6KGI9SS50cmFjayx2PyhvW3Yuc3RyZWFtXXx8KG9bdi5zdHJlYW1dPW5ldyBlLk1lZGlhU3RyZWFtKSxyKGIsb1t2LnN0cmVhbV0pLGEucHVzaChbYixJLG9bdi5zdHJlYW1dXSkpOihvLmRlZmF1bHR8fChvLmRlZmF1bHQ9bmV3IGUuTWVkaWFTdHJlYW0pLHIoYixvLmRlZmF1bHQpLGEucHVzaChbYixJLG8uZGVmYXVsdF0pKSl9fWVsc2V7KGc9cy50cmFuc2NlaXZlcnNbY118fHMuX2NyZWF0ZVRyYW5zY2VpdmVyKHApKS5taWQ9UixnLmljZUdhdGhlcmVyfHwoZy5pY2VHYXRoZXJlcj1zLl9jcmVhdGVJY2VHYXRoZXJlcihjLGwpKSxBLmxlbmd0aCYmXCJuZXdcIj09PWcuaWNlVHJhbnNwb3J0LnN0YXRlJiYoIUR8fGwmJjAhPT1jP0EuZm9yRWFjaCgoZnVuY3Rpb24oZSl7aWUoZy5pY2VUcmFuc3BvcnQsZSl9KSk6Zy5pY2VUcmFuc3BvcnQuc2V0UmVtb3RlQ2FuZGlkYXRlcyhBKSksaz1lLlJUQ1J0cFJlY2VpdmVyLmdldENhcGFiaWxpdGllcyhwKSx0PDE1MDE5JiYoay5jb2RlY3M9ay5jb2RlY3MuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm5cInJ0eFwiIT09ZS5uYW1lfSkpKSxFPWcuc2VuZEVuY29kaW5nUGFyYW1ldGVyc3x8W3tzc3JjOjEwMDEqKDIqYysyKX1dO3ZhciBNLHg9ITE7aWYoXCJzZW5kcmVjdlwiPT09Znx8XCJzZW5kb25seVwiPT09Zil7aWYoeD0hZy5ydHBSZWNlaXZlcixJPWcucnRwUmVjZWl2ZXJ8fG5ldyBlLlJUQ1J0cFJlY2VpdmVyKGcuZHRsc1RyYW5zcG9ydCxwKSx4KWI9SS50cmFjayx2JiZcIi1cIj09PXYuc3RyZWFtfHwodj8ob1t2LnN0cmVhbV18fChvW3Yuc3RyZWFtXT1uZXcgZS5NZWRpYVN0cmVhbSxPYmplY3QuZGVmaW5lUHJvcGVydHkob1t2LnN0cmVhbV0sXCJpZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdi5zdHJlYW19fSkpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShiLFwiaWRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHYudHJhY2t9fSksTT1vW3Yuc3RyZWFtXSk6KG8uZGVmYXVsdHx8KG8uZGVmYXVsdD1uZXcgZS5NZWRpYVN0cmVhbSksTT1vLmRlZmF1bHQpKSxNJiYocihiLE0pLGcuYXNzb2NpYXRlZFJlbW90ZU1lZGlhU3RyZWFtcy5wdXNoKE0pKSxhLnB1c2goW2IsSSxNXSl9ZWxzZSBnLnJ0cFJlY2VpdmVyJiZnLnJ0cFJlY2VpdmVyLnRyYWNrJiYoZy5hc3NvY2lhdGVkUmVtb3RlTWVkaWFTdHJlYW1zLmZvckVhY2goKGZ1bmN0aW9uKHQpe3ZhciByPXQuZ2V0VHJhY2tzKCkuZmluZCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUuaWQ9PT1nLnJ0cFJlY2VpdmVyLnRyYWNrLmlkfSkpO3ImJmZ1bmN0aW9uKHQscil7ci5yZW1vdmVUcmFjayh0KSxyLmRpc3BhdGNoRXZlbnQobmV3IGUuTWVkaWFTdHJlYW1UcmFja0V2ZW50KFwicmVtb3ZldHJhY2tcIix7dHJhY2s6dH0pKX0ocix0KX0pKSxnLmFzc29jaWF0ZWRSZW1vdGVNZWRpYVN0cmVhbXM9W10pO2cubG9jYWxDYXBhYmlsaXRpZXM9ayxnLnJlbW90ZUNhcGFiaWxpdGllcz1MLGcucnRwUmVjZWl2ZXI9SSxnLnJ0Y3BQYXJhbWV0ZXJzPU4sZy5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzPUUsZy5yZWN2RW5jb2RpbmdQYXJhbWV0ZXJzPXkscy5fdHJhbnNjZWl2ZShzLnRyYW5zY2VpdmVyc1tjXSwhMSx4KX19fSkpLHZvaWQgMD09PXMuX2R0bHNSb2xlJiYocy5fZHRsc1JvbGU9XCJvZmZlclwiPT09bi50eXBlP1wiYWN0aXZlXCI6XCJwYXNzaXZlXCIpLHMuX3JlbW90ZURlc2NyaXB0aW9uPXt0eXBlOm4udHlwZSxzZHA6bi5zZHB9LFwib2ZmZXJcIj09PW4udHlwZT9zLl91cGRhdGVTaWduYWxpbmdTdGF0ZShcImhhdmUtcmVtb3RlLW9mZmVyXCIpOnMuX3VwZGF0ZVNpZ25hbGluZ1N0YXRlKFwic3RhYmxlXCIpLE9iamVjdC5rZXlzKG8pLmZvckVhY2goKGZ1bmN0aW9uKHQpe3ZhciByPW9bdF07aWYoci5nZXRUcmFja3MoKS5sZW5ndGgpe2lmKC0xPT09cy5yZW1vdGVTdHJlYW1zLmluZGV4T2Yocikpe3MucmVtb3RlU3RyZWFtcy5wdXNoKHIpO3ZhciBuPW5ldyBFdmVudChcImFkZHN0cmVhbVwiKTtuLnN0cmVhbT1yLGUuc2V0VGltZW91dCgoZnVuY3Rpb24oKXtzLl9kaXNwYXRjaEV2ZW50KFwiYWRkc3RyZWFtXCIsbil9KSl9YS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgdD1lWzBdLG49ZVsxXTtyLmlkPT09ZVsyXS5pZCYmaShzLHQsbixbcl0pfSkpfX0pKSxhLmZvckVhY2goKGZ1bmN0aW9uKGUpe2VbMl18fGkocyxlWzBdLGVbMV0sW10pfSkpLGUuc2V0VGltZW91dCgoZnVuY3Rpb24oKXtzJiZzLnRyYW5zY2VpdmVycyYmcy50cmFuc2NlaXZlcnMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZS5pY2VUcmFuc3BvcnQmJlwibmV3XCI9PT1lLmljZVRyYW5zcG9ydC5zdGF0ZSYmZS5pY2VUcmFuc3BvcnQuZ2V0UmVtb3RlQ2FuZGlkYXRlcygpLmxlbmd0aD4wJiYoY29uc29sZS53YXJuKFwiVGltZW91dCBmb3IgYWRkUmVtb3RlQ2FuZGlkYXRlLiBDb25zaWRlciBzZW5kaW5nIGFuIGVuZC1vZi1jYW5kaWRhdGVzIG5vdGlmaWNhdGlvblwiKSxlLmljZVRyYW5zcG9ydC5hZGRSZW1vdGVDYW5kaWRhdGUoe30pKX0pKX0pLDRlMyksUHJvbWlzZS5yZXNvbHZlKCl9LG4ucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uKCl7dGhpcy50cmFuc2NlaXZlcnMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZS5pY2VUcmFuc3BvcnQmJmUuaWNlVHJhbnNwb3J0LnN0b3AoKSxlLmR0bHNUcmFuc3BvcnQmJmUuZHRsc1RyYW5zcG9ydC5zdG9wKCksZS5ydHBTZW5kZXImJmUucnRwU2VuZGVyLnN0b3AoKSxlLnJ0cFJlY2VpdmVyJiZlLnJ0cFJlY2VpdmVyLnN0b3AoKX0pKSx0aGlzLl9pc0Nsb3NlZD0hMCx0aGlzLl91cGRhdGVTaWduYWxpbmdTdGF0ZShcImNsb3NlZFwiKX0sbi5wcm90b3R5cGUuX3VwZGF0ZVNpZ25hbGluZ1N0YXRlPWZ1bmN0aW9uKGUpe3RoaXMuc2lnbmFsaW5nU3RhdGU9ZTt2YXIgdD1uZXcgRXZlbnQoXCJzaWduYWxpbmdzdGF0ZWNoYW5nZVwiKTt0aGlzLl9kaXNwYXRjaEV2ZW50KFwic2lnbmFsaW5nc3RhdGVjaGFuZ2VcIix0KX0sbi5wcm90b3R5cGUuX21heWJlRmlyZU5lZ290aWF0aW9uTmVlZGVkPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztcInN0YWJsZVwiPT09dGhpcy5zaWduYWxpbmdTdGF0ZSYmITAhPT10aGlzLm5lZWROZWdvdGlhdGlvbiYmKHRoaXMubmVlZE5lZ290aWF0aW9uPSEwLGUuc2V0VGltZW91dCgoZnVuY3Rpb24oKXtpZih0Lm5lZWROZWdvdGlhdGlvbil7dC5uZWVkTmVnb3RpYXRpb249ITE7dmFyIGU9bmV3IEV2ZW50KFwibmVnb3RpYXRpb25uZWVkZWRcIik7dC5fZGlzcGF0Y2hFdmVudChcIm5lZ290aWF0aW9ubmVlZGVkXCIsZSl9fSksMCkpfSxuLnByb3RvdHlwZS5fdXBkYXRlSWNlQ29ubmVjdGlvblN0YXRlPWZ1bmN0aW9uKCl7dmFyIGUsdD17bmV3OjAsY2xvc2VkOjAsY2hlY2tpbmc6MCxjb25uZWN0ZWQ6MCxjb21wbGV0ZWQ6MCxkaXNjb25uZWN0ZWQ6MCxmYWlsZWQ6MH07aWYodGhpcy50cmFuc2NlaXZlcnMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZS5pY2VUcmFuc3BvcnQmJiFlLnJlamVjdGVkJiZ0W2UuaWNlVHJhbnNwb3J0LnN0YXRlXSsrfSkpLGU9XCJuZXdcIix0LmZhaWxlZD4wP2U9XCJmYWlsZWRcIjp0LmNoZWNraW5nPjA/ZT1cImNoZWNraW5nXCI6dC5kaXNjb25uZWN0ZWQ+MD9lPVwiZGlzY29ubmVjdGVkXCI6dC5uZXc+MD9lPVwibmV3XCI6dC5jb25uZWN0ZWQ+MD9lPVwiY29ubmVjdGVkXCI6dC5jb21wbGV0ZWQ+MCYmKGU9XCJjb21wbGV0ZWRcIiksZSE9PXRoaXMuaWNlQ29ubmVjdGlvblN0YXRlKXt0aGlzLmljZUNvbm5lY3Rpb25TdGF0ZT1lO3ZhciByPW5ldyBFdmVudChcImljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZVwiKTt0aGlzLl9kaXNwYXRjaEV2ZW50KFwiaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlXCIscil9fSxuLnByb3RvdHlwZS5fdXBkYXRlQ29ubmVjdGlvblN0YXRlPWZ1bmN0aW9uKCl7dmFyIGUsdD17bmV3OjAsY2xvc2VkOjAsY29ubmVjdGluZzowLGNvbm5lY3RlZDowLGNvbXBsZXRlZDowLGRpc2Nvbm5lY3RlZDowLGZhaWxlZDowfTtpZih0aGlzLnRyYW5zY2VpdmVycy5mb3JFYWNoKChmdW5jdGlvbihlKXtlLmljZVRyYW5zcG9ydCYmZS5kdGxzVHJhbnNwb3J0JiYhZS5yZWplY3RlZCYmKHRbZS5pY2VUcmFuc3BvcnQuc3RhdGVdKyssdFtlLmR0bHNUcmFuc3BvcnQuc3RhdGVdKyspfSkpLHQuY29ubmVjdGVkKz10LmNvbXBsZXRlZCxlPVwibmV3XCIsdC5mYWlsZWQ+MD9lPVwiZmFpbGVkXCI6dC5jb25uZWN0aW5nPjA/ZT1cImNvbm5lY3RpbmdcIjp0LmRpc2Nvbm5lY3RlZD4wP2U9XCJkaXNjb25uZWN0ZWRcIjp0Lm5ldz4wP2U9XCJuZXdcIjp0LmNvbm5lY3RlZD4wJiYoZT1cImNvbm5lY3RlZFwiKSxlIT09dGhpcy5jb25uZWN0aW9uU3RhdGUpe3RoaXMuY29ubmVjdGlvblN0YXRlPWU7dmFyIHI9bmV3IEV2ZW50KFwiY29ubmVjdGlvbnN0YXRlY2hhbmdlXCIpO3RoaXMuX2Rpc3BhdGNoRXZlbnQoXCJjb25uZWN0aW9uc3RhdGVjaGFuZ2VcIixyKX19LG4ucHJvdG90eXBlLmNyZWF0ZU9mZmVyPWZ1bmN0aW9uKCl7dmFyIHI9dGhpcztpZihyLl9pc0Nsb3NlZClyZXR1cm4gUHJvbWlzZS5yZWplY3QobmUoXCJJbnZhbGlkU3RhdGVFcnJvclwiLFwiQ2FuIG5vdCBjYWxsIGNyZWF0ZU9mZmVyIGFmdGVyIGNsb3NlXCIpKTt2YXIgaT1yLnRyYW5zY2VpdmVycy5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVyblwiYXVkaW9cIj09PWUua2luZH0pKS5sZW5ndGgsbj1yLnRyYW5zY2VpdmVycy5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVyblwidmlkZW9cIj09PWUua2luZH0pKS5sZW5ndGgscz1hcmd1bWVudHNbMF07aWYocyl7aWYocy5tYW5kYXRvcnl8fHMub3B0aW9uYWwpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkxlZ2FjeSBtYW5kYXRvcnkvb3B0aW9uYWwgY29uc3RyYWludHMgbm90IHN1cHBvcnRlZC5cIik7dm9pZCAwIT09cy5vZmZlclRvUmVjZWl2ZUF1ZGlvJiYoaT0hMD09PXMub2ZmZXJUb1JlY2VpdmVBdWRpbz8xOiExPT09cy5vZmZlclRvUmVjZWl2ZUF1ZGlvPzA6cy5vZmZlclRvUmVjZWl2ZUF1ZGlvKSx2b2lkIDAhPT1zLm9mZmVyVG9SZWNlaXZlVmlkZW8mJihuPSEwPT09cy5vZmZlclRvUmVjZWl2ZVZpZGVvPzE6ITE9PT1zLm9mZmVyVG9SZWNlaXZlVmlkZW8/MDpzLm9mZmVyVG9SZWNlaXZlVmlkZW8pfWZvcihyLnRyYW5zY2VpdmVycy5mb3JFYWNoKChmdW5jdGlvbihlKXtcImF1ZGlvXCI9PT1lLmtpbmQ/LS1pPDAmJihlLndhbnRSZWNlaXZlPSExKTpcInZpZGVvXCI9PT1lLmtpbmQmJi0tbjwwJiYoZS53YW50UmVjZWl2ZT0hMSl9KSk7aT4wfHxuPjA7KWk+MCYmKHIuX2NyZWF0ZVRyYW5zY2VpdmVyKFwiYXVkaW9cIiksaS0tKSxuPjAmJihyLl9jcmVhdGVUcmFuc2NlaXZlcihcInZpZGVvXCIpLG4tLSk7dmFyIG89Wi53cml0ZVNlc3Npb25Cb2lsZXJwbGF0ZShyLl9zZHBTZXNzaW9uSWQsci5fc2RwU2Vzc2lvblZlcnNpb24rKyk7ci50cmFuc2NlaXZlcnMuZm9yRWFjaCgoZnVuY3Rpb24oaSxuKXt2YXIgcz1pLnRyYWNrLG89aS5raW5kLGE9aS5taWR8fFouZ2VuZXJhdGVJZGVudGlmaWVyKCk7aS5taWQ9YSxpLmljZUdhdGhlcmVyfHwoaS5pY2VHYXRoZXJlcj1yLl9jcmVhdGVJY2VHYXRoZXJlcihuLHIudXNpbmdCdW5kbGUpKTt2YXIgYz1lLlJUQ1J0cFNlbmRlci5nZXRDYXBhYmlsaXRpZXMobyk7dDwxNTAxOSYmKGMuY29kZWNzPWMuY29kZWNzLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuXCJydHhcIiE9PWUubmFtZX0pKSksYy5jb2RlY3MuZm9yRWFjaCgoZnVuY3Rpb24oZSl7XCJIMjY0XCI9PT1lLm5hbWUmJnZvaWQgMD09PWUucGFyYW1ldGVyc1tcImxldmVsLWFzeW1tZXRyeS1hbGxvd2VkXCJdJiYoZS5wYXJhbWV0ZXJzW1wibGV2ZWwtYXN5bW1ldHJ5LWFsbG93ZWRcIl09XCIxXCIpLGkucmVtb3RlQ2FwYWJpbGl0aWVzJiZpLnJlbW90ZUNhcGFiaWxpdGllcy5jb2RlY3MmJmkucmVtb3RlQ2FwYWJpbGl0aWVzLmNvZGVjcy5mb3JFYWNoKChmdW5jdGlvbih0KXtlLm5hbWUudG9Mb3dlckNhc2UoKT09PXQubmFtZS50b0xvd2VyQ2FzZSgpJiZlLmNsb2NrUmF0ZT09PXQuY2xvY2tSYXRlJiYoZS5wcmVmZXJyZWRQYXlsb2FkVHlwZT10LnBheWxvYWRUeXBlKX0pKX0pKSxjLmhlYWRlckV4dGVuc2lvbnMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7KGkucmVtb3RlQ2FwYWJpbGl0aWVzJiZpLnJlbW90ZUNhcGFiaWxpdGllcy5oZWFkZXJFeHRlbnNpb25zfHxbXSkuZm9yRWFjaCgoZnVuY3Rpb24odCl7ZS51cmk9PT10LnVyaSYmKGUuaWQ9dC5pZCl9KSl9KSk7dmFyIGQ9aS5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzfHxbe3NzcmM6MTAwMSooMipuKzEpfV07cyYmdD49MTUwMTkmJlwidmlkZW9cIj09PW8mJiFkWzBdLnJ0eCYmKGRbMF0ucnR4PXtzc3JjOmRbMF0uc3NyYysxfSksaS53YW50UmVjZWl2ZSYmKGkucnRwUmVjZWl2ZXI9bmV3IGUuUlRDUnRwUmVjZWl2ZXIoaS5kdGxzVHJhbnNwb3J0LG8pKSxpLmxvY2FsQ2FwYWJpbGl0aWVzPWMsaS5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzPWR9KSksXCJtYXgtY29tcGF0XCIhPT1yLl9jb25maWcuYnVuZGxlUG9saWN5JiYobys9XCJhPWdyb3VwOkJVTkRMRSBcIityLnRyYW5zY2VpdmVycy5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlLm1pZH0pKS5qb2luKFwiIFwiKStcIlxcclxcblwiKSxvKz1cImE9aWNlLW9wdGlvbnM6dHJpY2tsZVxcclxcblwiLHIudHJhbnNjZWl2ZXJzLmZvckVhY2goKGZ1bmN0aW9uKGUsdCl7bys9ZWUoZSxlLmxvY2FsQ2FwYWJpbGl0aWVzLFwib2ZmZXJcIixlLnN0cmVhbSxyLl9kdGxzUm9sZSksbys9XCJhPXJ0Y3AtcnNpemVcXHJcXG5cIiwhZS5pY2VHYXRoZXJlcnx8XCJuZXdcIj09PXIuaWNlR2F0aGVyaW5nU3RhdGV8fDAhPT10JiZyLnVzaW5nQnVuZGxlfHwoZS5pY2VHYXRoZXJlci5nZXRMb2NhbENhbmRpZGF0ZXMoKS5mb3JFYWNoKChmdW5jdGlvbihlKXtlLmNvbXBvbmVudD0xLG8rPVwiYT1cIitaLndyaXRlQ2FuZGlkYXRlKGUpK1wiXFxyXFxuXCJ9KSksXCJjb21wbGV0ZWRcIj09PWUuaWNlR2F0aGVyZXIuc3RhdGUmJihvKz1cImE9ZW5kLW9mLWNhbmRpZGF0ZXNcXHJcXG5cIikpfSkpO3ZhciBhPW5ldyBlLlJUQ1Nlc3Npb25EZXNjcmlwdGlvbih7dHlwZTpcIm9mZmVyXCIsc2RwOm99KTtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGEpfSxuLnByb3RvdHlwZS5jcmVhdGVBbnN3ZXI9ZnVuY3Rpb24oKXt2YXIgcj10aGlzO2lmKHIuX2lzQ2xvc2VkKXJldHVybiBQcm9taXNlLnJlamVjdChuZShcIkludmFsaWRTdGF0ZUVycm9yXCIsXCJDYW4gbm90IGNhbGwgY3JlYXRlQW5zd2VyIGFmdGVyIGNsb3NlXCIpKTtpZihcImhhdmUtcmVtb3RlLW9mZmVyXCIhPT1yLnNpZ25hbGluZ1N0YXRlJiZcImhhdmUtbG9jYWwtcHJhbnN3ZXJcIiE9PXIuc2lnbmFsaW5nU3RhdGUpcmV0dXJuIFByb21pc2UucmVqZWN0KG5lKFwiSW52YWxpZFN0YXRlRXJyb3JcIixcIkNhbiBub3QgY2FsbCBjcmVhdGVBbnN3ZXIgaW4gc2lnbmFsaW5nU3RhdGUgXCIrci5zaWduYWxpbmdTdGF0ZSkpO3ZhciBpPVoud3JpdGVTZXNzaW9uQm9pbGVycGxhdGUoci5fc2RwU2Vzc2lvbklkLHIuX3NkcFNlc3Npb25WZXJzaW9uKyspO3IudXNpbmdCdW5kbGUmJihpKz1cImE9Z3JvdXA6QlVORExFIFwiK3IudHJhbnNjZWl2ZXJzLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUubWlkfSkpLmpvaW4oXCIgXCIpK1wiXFxyXFxuXCIpLGkrPVwiYT1pY2Utb3B0aW9uczp0cmlja2xlXFxyXFxuXCI7dmFyIG49Wi5nZXRNZWRpYVNlY3Rpb25zKHIuX3JlbW90ZURlc2NyaXB0aW9uLnNkcCkubGVuZ3RoO3IudHJhbnNjZWl2ZXJzLmZvckVhY2goKGZ1bmN0aW9uKGUscyl7aWYoIShzKzE+bikpe2lmKGUucmVqZWN0ZWQpcmV0dXJuXCJhcHBsaWNhdGlvblwiPT09ZS5raW5kP1wiRFRMUy9TQ1RQXCI9PT1lLnByb3RvY29sP2krPVwibT1hcHBsaWNhdGlvbiAwIERUTFMvU0NUUCA1MDAwXFxyXFxuXCI6aSs9XCJtPWFwcGxpY2F0aW9uIDAgXCIrZS5wcm90b2NvbCtcIiB3ZWJydGMtZGF0YWNoYW5uZWxcXHJcXG5cIjpcImF1ZGlvXCI9PT1lLmtpbmQ/aSs9XCJtPWF1ZGlvIDAgVURQL1RMUy9SVFAvU0FWUEYgMFxcclxcbmE9cnRwbWFwOjAgUENNVS84MDAwXFxyXFxuXCI6XCJ2aWRlb1wiPT09ZS5raW5kJiYoaSs9XCJtPXZpZGVvIDAgVURQL1RMUy9SVFAvU0FWUEYgMTIwXFxyXFxuYT1ydHBtYXA6MTIwIFZQOC85MDAwMFxcclxcblwiKSx2b2lkKGkrPVwiYz1JTiBJUDQgMC4wLjAuMFxcclxcbmE9aW5hY3RpdmVcXHJcXG5hPW1pZDpcIitlLm1pZCtcIlxcclxcblwiKTt2YXIgbztpZihlLnN0cmVhbSlcImF1ZGlvXCI9PT1lLmtpbmQ/bz1lLnN0cmVhbS5nZXRBdWRpb1RyYWNrcygpWzBdOlwidmlkZW9cIj09PWUua2luZCYmKG89ZS5zdHJlYW0uZ2V0VmlkZW9UcmFja3MoKVswXSksbyYmdD49MTUwMTkmJlwidmlkZW9cIj09PWUua2luZCYmIWUuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5ydHgmJihlLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4PXtzc3JjOmUuc2VuZEVuY29kaW5nUGFyYW1ldGVyc1swXS5zc3JjKzF9KTt2YXIgYT10ZShlLmxvY2FsQ2FwYWJpbGl0aWVzLGUucmVtb3RlQ2FwYWJpbGl0aWVzKTshYS5jb2RlY3MuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm5cInJ0eFwiPT09ZS5uYW1lLnRvTG93ZXJDYXNlKCl9KSkubGVuZ3RoJiZlLnNlbmRFbmNvZGluZ1BhcmFtZXRlcnNbMF0ucnR4JiZkZWxldGUgZS5zZW5kRW5jb2RpbmdQYXJhbWV0ZXJzWzBdLnJ0eCxpKz1lZShlLGEsXCJhbnN3ZXJcIixlLnN0cmVhbSxyLl9kdGxzUm9sZSksZS5ydGNwUGFyYW1ldGVycyYmZS5ydGNwUGFyYW1ldGVycy5yZWR1Y2VkU2l6ZSYmKGkrPVwiYT1ydGNwLXJzaXplXFxyXFxuXCIpfX0pKTt2YXIgcz1uZXcgZS5SVENTZXNzaW9uRGVzY3JpcHRpb24oe3R5cGU6XCJhbnN3ZXJcIixzZHA6aX0pO3JldHVybiBQcm9taXNlLnJlc29sdmUocyl9LG4ucHJvdG90eXBlLmFkZEljZUNhbmRpZGF0ZT1mdW5jdGlvbihlKXt2YXIgdCxyPXRoaXM7cmV0dXJuIGUmJnZvaWQgMD09PWUuc2RwTUxpbmVJbmRleCYmIWUuc2RwTWlkP1Byb21pc2UucmVqZWN0KG5ldyBUeXBlRXJyb3IoXCJzZHBNTGluZUluZGV4IG9yIHNkcE1pZCByZXF1aXJlZFwiKSk6bmV3IFByb21pc2UoKGZ1bmN0aW9uKGksbil7aWYoIXIuX3JlbW90ZURlc2NyaXB0aW9uKXJldHVybiBuKG5lKFwiSW52YWxpZFN0YXRlRXJyb3JcIixcIkNhbiBub3QgYWRkIElDRSBjYW5kaWRhdGUgd2l0aG91dCBhIHJlbW90ZSBkZXNjcmlwdGlvblwiKSk7aWYoZSYmXCJcIiE9PWUuY2FuZGlkYXRlKXt2YXIgcz1lLnNkcE1MaW5lSW5kZXg7aWYoZS5zZHBNaWQpZm9yKHZhciBvPTA7bzxyLnRyYW5zY2VpdmVycy5sZW5ndGg7bysrKWlmKHIudHJhbnNjZWl2ZXJzW29dLm1pZD09PWUuc2RwTWlkKXtzPW87YnJlYWt9dmFyIGE9ci50cmFuc2NlaXZlcnNbc107aWYoIWEpcmV0dXJuIG4obmUoXCJPcGVyYXRpb25FcnJvclwiLFwiQ2FuIG5vdCBhZGQgSUNFIGNhbmRpZGF0ZVwiKSk7aWYoYS5yZWplY3RlZClyZXR1cm4gaSgpO3ZhciBjPU9iamVjdC5rZXlzKGUuY2FuZGlkYXRlKS5sZW5ndGg+MD9aLnBhcnNlQ2FuZGlkYXRlKGUuY2FuZGlkYXRlKTp7fTtpZihcInRjcFwiPT09Yy5wcm90b2NvbCYmKDA9PT1jLnBvcnR8fDk9PT1jLnBvcnQpKXJldHVybiBpKCk7aWYoYy5jb21wb25lbnQmJjEhPT1jLmNvbXBvbmVudClyZXR1cm4gaSgpO2lmKCgwPT09c3x8cz4wJiZhLmljZVRyYW5zcG9ydCE9PXIudHJhbnNjZWl2ZXJzWzBdLmljZVRyYW5zcG9ydCkmJiFpZShhLmljZVRyYW5zcG9ydCxjKSlyZXR1cm4gbihuZShcIk9wZXJhdGlvbkVycm9yXCIsXCJDYW4gbm90IGFkZCBJQ0UgY2FuZGlkYXRlXCIpKTt2YXIgZD1lLmNhbmRpZGF0ZS50cmltKCk7MD09PWQuaW5kZXhPZihcImE9XCIpJiYoZD1kLnN1YnN0cigyKSksKHQ9Wi5nZXRNZWRpYVNlY3Rpb25zKHIuX3JlbW90ZURlc2NyaXB0aW9uLnNkcCkpW3NdKz1cImE9XCIrKGMudHlwZT9kOlwiZW5kLW9mLWNhbmRpZGF0ZXNcIikrXCJcXHJcXG5cIixyLl9yZW1vdGVEZXNjcmlwdGlvbi5zZHA9Wi5nZXREZXNjcmlwdGlvbihyLl9yZW1vdGVEZXNjcmlwdGlvbi5zZHApK3Quam9pbihcIlwiKX1lbHNlIGZvcih2YXIgdT0wO3U8ci50cmFuc2NlaXZlcnMubGVuZ3RoJiYoci50cmFuc2NlaXZlcnNbdV0ucmVqZWN0ZWR8fChyLnRyYW5zY2VpdmVyc1t1XS5pY2VUcmFuc3BvcnQuYWRkUmVtb3RlQ2FuZGlkYXRlKHt9KSwodD1aLmdldE1lZGlhU2VjdGlvbnMoci5fcmVtb3RlRGVzY3JpcHRpb24uc2RwKSlbdV0rPVwiYT1lbmQtb2YtY2FuZGlkYXRlc1xcclxcblwiLHIuX3JlbW90ZURlc2NyaXB0aW9uLnNkcD1aLmdldERlc2NyaXB0aW9uKHIuX3JlbW90ZURlc2NyaXB0aW9uLnNkcCkrdC5qb2luKFwiXCIpLCFyLnVzaW5nQnVuZGxlKSk7dSsrKTtpKCl9KSl9LG4ucHJvdG90eXBlLmdldFN0YXRzPWZ1bmN0aW9uKHQpe2lmKHQmJnQgaW5zdGFuY2VvZiBlLk1lZGlhU3RyZWFtVHJhY2spe3ZhciByPW51bGw7aWYodGhpcy50cmFuc2NlaXZlcnMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZS5ydHBTZW5kZXImJmUucnRwU2VuZGVyLnRyYWNrPT09dD9yPWUucnRwU2VuZGVyOmUucnRwUmVjZWl2ZXImJmUucnRwUmVjZWl2ZXIudHJhY2s9PT10JiYocj1lLnJ0cFJlY2VpdmVyKX0pKSwhcil0aHJvdyBuZShcIkludmFsaWRBY2Nlc3NFcnJvclwiLFwiSW52YWxpZCBzZWxlY3Rvci5cIik7cmV0dXJuIHIuZ2V0U3RhdHMoKX12YXIgaT1bXTtyZXR1cm4gdGhpcy50cmFuc2NlaXZlcnMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7W1wicnRwU2VuZGVyXCIsXCJydHBSZWNlaXZlclwiLFwiaWNlR2F0aGVyZXJcIixcImljZVRyYW5zcG9ydFwiLFwiZHRsc1RyYW5zcG9ydFwiXS5mb3JFYWNoKChmdW5jdGlvbih0KXtlW3RdJiZpLnB1c2goZVt0XS5nZXRTdGF0cygpKX0pKX0pKSxQcm9taXNlLmFsbChpKS50aGVuKChmdW5jdGlvbihlKXt2YXIgdD1uZXcgTWFwO3JldHVybiBlLmZvckVhY2goKGZ1bmN0aW9uKGUpe2UuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dC5zZXQoZS5pZCxlKX0pKX0pKSx0fSkpfTtbXCJSVENSdHBTZW5kZXJcIixcIlJUQ1J0cFJlY2VpdmVyXCIsXCJSVENJY2VHYXRoZXJlclwiLFwiUlRDSWNlVHJhbnNwb3J0XCIsXCJSVENEdGxzVHJhbnNwb3J0XCJdLmZvckVhY2goKGZ1bmN0aW9uKHQpe3ZhciByPWVbdF07aWYociYmci5wcm90b3R5cGUmJnIucHJvdG90eXBlLmdldFN0YXRzKXt2YXIgaT1yLnByb3RvdHlwZS5nZXRTdGF0cztyLnByb3RvdHlwZS5nZXRTdGF0cz1mdW5jdGlvbigpe3JldHVybiBpLmFwcGx5KHRoaXMpLnRoZW4oKGZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBNYXA7cmV0dXJuIE9iamVjdC5rZXlzKGUpLmZvckVhY2goKGZ1bmN0aW9uKHIpe3ZhciBpO2Vbcl0udHlwZT17aW5ib3VuZHJ0cDpcImluYm91bmQtcnRwXCIsb3V0Ym91bmRydHA6XCJvdXRib3VuZC1ydHBcIixjYW5kaWRhdGVwYWlyOlwiY2FuZGlkYXRlLXBhaXJcIixsb2NhbGNhbmRpZGF0ZTpcImxvY2FsLWNhbmRpZGF0ZVwiLHJlbW90ZWNhbmRpZGF0ZTpcInJlbW90ZS1jYW5kaWRhdGVcIn1bKGk9ZVtyXSkudHlwZV18fGkudHlwZSx0LnNldChyLGVbcl0pfSkpLHR9KSl9fX0pKTt2YXIgcz1bXCJjcmVhdGVPZmZlclwiLFwiY3JlYXRlQW5zd2VyXCJdO3JldHVybiBzLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0PW4ucHJvdG90eXBlW2VdO24ucHJvdG90eXBlW2VdPWZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzO3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGVbMF18fFwiZnVuY3Rpb25cIj09dHlwZW9mIGVbMV0/dC5hcHBseSh0aGlzLFthcmd1bWVudHNbMl1dKS50aGVuKChmdW5jdGlvbih0KXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBlWzBdJiZlWzBdLmFwcGx5KG51bGwsW3RdKX0pLChmdW5jdGlvbih0KXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBlWzFdJiZlWzFdLmFwcGx5KG51bGwsW3RdKX0pKTp0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KSksKHM9W1wic2V0TG9jYWxEZXNjcmlwdGlvblwiLFwic2V0UmVtb3RlRGVzY3JpcHRpb25cIixcImFkZEljZUNhbmRpZGF0ZVwiXSkuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHQ9bi5wcm90b3R5cGVbZV07bi5wcm90b3R5cGVbZV09ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHM7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgZVsxXXx8XCJmdW5jdGlvblwiPT10eXBlb2YgZVsyXT90LmFwcGx5KHRoaXMsYXJndW1lbnRzKS50aGVuKChmdW5jdGlvbigpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGVbMV0mJmVbMV0uYXBwbHkobnVsbCl9KSwoZnVuY3Rpb24odCl7XCJmdW5jdGlvblwiPT10eXBlb2YgZVsyXSYmZVsyXS5hcHBseShudWxsLFt0XSl9KSk6dC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSkpLFtcImdldFN0YXRzXCJdLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0PW4ucHJvdG90eXBlW2VdO24ucHJvdG90eXBlW2VdPWZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzO3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGVbMV0/dC5hcHBseSh0aGlzLGFyZ3VtZW50cykudGhlbigoZnVuY3Rpb24oKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBlWzFdJiZlWzFdLmFwcGx5KG51bGwpfSkpOnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0pKSxufTtmdW5jdGlvbiBvZShlKXtjb25zdCB0PWUmJmUubmF2aWdhdG9yLHI9dC5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhLmJpbmQodC5tZWRpYURldmljZXMpO3QubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYT1mdW5jdGlvbihlKXtyZXR1cm4gcihlKS5jYXRjaCgoZT0+UHJvbWlzZS5yZWplY3QoZnVuY3Rpb24oZSl7cmV0dXJue25hbWU6e1Blcm1pc3Npb25EZW5pZWRFcnJvcjpcIk5vdEFsbG93ZWRFcnJvclwifVtlLm5hbWVdfHxlLm5hbWUsbWVzc2FnZTplLm1lc3NhZ2UsY29uc3RyYWludDplLmNvbnN0cmFpbnQsdG9TdHJpbmcoKXtyZXR1cm4gdGhpcy5uYW1lfX19KGUpKSkpfX1mdW5jdGlvbiBhZShlKXtcImdldERpc3BsYXlNZWRpYVwiaW4gZS5uYXZpZ2F0b3ImJmUubmF2aWdhdG9yLm1lZGlhRGV2aWNlcyYmKGUubmF2aWdhdG9yLm1lZGlhRGV2aWNlcyYmXCJnZXREaXNwbGF5TWVkaWFcImluIGUubmF2aWdhdG9yLm1lZGlhRGV2aWNlc3x8KGUubmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXREaXNwbGF5TWVkaWE9ZS5uYXZpZ2F0b3IuZ2V0RGlzcGxheU1lZGlhLmJpbmQoZS5uYXZpZ2F0b3IpKSl9ZnVuY3Rpb24gY2UoZSx0KXtpZihlLlJUQ0ljZUdhdGhlcmVyJiYoZS5SVENJY2VDYW5kaWRhdGV8fChlLlJUQ0ljZUNhbmRpZGF0ZT1mdW5jdGlvbihlKXtyZXR1cm4gZX0pLGUuUlRDU2Vzc2lvbkRlc2NyaXB0aW9ufHwoZS5SVENTZXNzaW9uRGVzY3JpcHRpb249ZnVuY3Rpb24oZSl7cmV0dXJuIGV9KSx0LnZlcnNpb248MTUwMjUpKXtjb25zdCB0PU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZS5NZWRpYVN0cmVhbVRyYWNrLnByb3RvdHlwZSxcImVuYWJsZWRcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUuTWVkaWFTdHJlYW1UcmFjay5wcm90b3R5cGUsXCJlbmFibGVkXCIse3NldChlKXt0LnNldC5jYWxsKHRoaXMsZSk7Y29uc3Qgcj1uZXcgRXZlbnQoXCJlbmFibGVkXCIpO3IuZW5hYmxlZD1lLHRoaXMuZGlzcGF0Y2hFdmVudChyKX19KX1lLlJUQ1J0cFNlbmRlciYmIShcImR0bWZcImluIGUuUlRDUnRwU2VuZGVyLnByb3RvdHlwZSkmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLlJUQ1J0cFNlbmRlci5wcm90b3R5cGUsXCJkdG1mXCIse2dldCgpe3JldHVybiB2b2lkIDA9PT10aGlzLl9kdG1mJiYoXCJhdWRpb1wiPT09dGhpcy50cmFjay5raW5kP3RoaXMuX2R0bWY9bmV3IGUuUlRDRHRtZlNlbmRlcih0aGlzKTpcInZpZGVvXCI9PT10aGlzLnRyYWNrLmtpbmQmJih0aGlzLl9kdG1mPW51bGwpKSx0aGlzLl9kdG1mfX0pLGUuUlRDRHRtZlNlbmRlciYmIWUuUlRDRFRNRlNlbmRlciYmKGUuUlRDRFRNRlNlbmRlcj1lLlJUQ0R0bWZTZW5kZXIpO2NvbnN0IHI9c2UoZSx0LnZlcnNpb24pO2UuUlRDUGVlckNvbm5lY3Rpb249ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuaWNlU2VydmVycyYmKGUuaWNlU2VydmVycz1mdW5jdGlvbihlLHQpe2xldCByPSExO3JldHVybihlPUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZSkpKS5maWx0ZXIoKGU9PntpZihlJiYoZS51cmxzfHxlLnVybCkpe2xldCB0PWUudXJsc3x8ZS51cmw7ZS51cmwmJiFlLnVybHMmJk0oXCJSVENJY2VTZXJ2ZXIudXJsXCIsXCJSVENJY2VTZXJ2ZXIudXJsc1wiKTtjb25zdCBpPVwic3RyaW5nXCI9PXR5cGVvZiB0O3JldHVybiBpJiYodD1bdF0pLHQ9dC5maWx0ZXIoKGU9PntpZigwPT09ZS5pbmRleE9mKFwic3R1bjpcIikpcmV0dXJuITE7Y29uc3QgdD1lLnN0YXJ0c1dpdGgoXCJ0dXJuXCIpJiYhZS5zdGFydHNXaXRoKFwidHVybjpbXCIpJiZlLmluY2x1ZGVzKFwidHJhbnNwb3J0PXVkcFwiKTtyZXR1cm4gdCYmIXI/KHI9ITAsITApOnQmJiFyfSkpLGRlbGV0ZSBlLnVybCxlLnVybHM9aT90WzBdOnQsISF0Lmxlbmd0aH19KSl9KGUuaWNlU2VydmVycyx0LnZlcnNpb24pLEEoXCJJQ0Ugc2VydmVycyBhZnRlciBmaWx0ZXJpbmc6XCIsZS5pY2VTZXJ2ZXJzKSksbmV3IHIoZSl9LGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlPXIucHJvdG90eXBlfWZ1bmN0aW9uIGRlKGUpe2UuUlRDUnRwU2VuZGVyJiYhKFwicmVwbGFjZVRyYWNrXCJpbiBlLlJUQ1J0cFNlbmRlci5wcm90b3R5cGUpJiYoZS5SVENSdHBTZW5kZXIucHJvdG90eXBlLnJlcGxhY2VUcmFjaz1lLlJUQ1J0cFNlbmRlci5wcm90b3R5cGUuc2V0VHJhY2spfXZhciB1ZT1PYmplY3QuZnJlZXplKHtfX3Byb3RvX186bnVsbCxzaGltUGVlckNvbm5lY3Rpb246Y2Usc2hpbVJlcGxhY2VUcmFjazpkZSxzaGltR2V0VXNlck1lZGlhOm9lLHNoaW1HZXREaXNwbGF5TWVkaWE6YWV9KTtmdW5jdGlvbiBsZShlLHQpe2NvbnN0IHI9ZSYmZS5uYXZpZ2F0b3IsaT1lJiZlLk1lZGlhU3RyZWFtVHJhY2s7aWYoci5nZXRVc2VyTWVkaWE9ZnVuY3Rpb24oZSx0LGkpe00oXCJuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhXCIsXCJuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYVwiKSxyLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoZSkudGhlbih0LGkpfSwhKHQudmVyc2lvbj41NSYmXCJhdXRvR2FpbkNvbnRyb2xcImluIHIubWVkaWFEZXZpY2VzLmdldFN1cHBvcnRlZENvbnN0cmFpbnRzKCkpKXtjb25zdCBlPWZ1bmN0aW9uKGUsdCxyKXt0IGluIGUmJiEociBpbiBlKSYmKGVbcl09ZVt0XSxkZWxldGUgZVt0XSl9LHQ9ci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhLmJpbmQoci5tZWRpYURldmljZXMpO2lmKHIubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYT1mdW5jdGlvbihyKXtyZXR1cm5cIm9iamVjdFwiPT10eXBlb2YgciYmXCJvYmplY3RcIj09dHlwZW9mIHIuYXVkaW8mJihyPUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocikpLGUoci5hdWRpbyxcImF1dG9HYWluQ29udHJvbFwiLFwibW96QXV0b0dhaW5Db250cm9sXCIpLGUoci5hdWRpbyxcIm5vaXNlU3VwcHJlc3Npb25cIixcIm1vek5vaXNlU3VwcHJlc3Npb25cIikpLHQocil9LGkmJmkucHJvdG90eXBlLmdldFNldHRpbmdzKXtjb25zdCB0PWkucHJvdG90eXBlLmdldFNldHRpbmdzO2kucHJvdG90eXBlLmdldFNldHRpbmdzPWZ1bmN0aW9uKCl7Y29uc3Qgcj10LmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gZShyLFwibW96QXV0b0dhaW5Db250cm9sXCIsXCJhdXRvR2FpbkNvbnRyb2xcIiksZShyLFwibW96Tm9pc2VTdXBwcmVzc2lvblwiLFwibm9pc2VTdXBwcmVzc2lvblwiKSxyfX1pZihpJiZpLnByb3RvdHlwZS5hcHBseUNvbnN0cmFpbnRzKXtjb25zdCB0PWkucHJvdG90eXBlLmFwcGx5Q29uc3RyYWludHM7aS5wcm90b3R5cGUuYXBwbHlDb25zdHJhaW50cz1mdW5jdGlvbihyKXtyZXR1cm5cImF1ZGlvXCI9PT10aGlzLmtpbmQmJlwib2JqZWN0XCI9PXR5cGVvZiByJiYocj1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHIpKSxlKHIsXCJhdXRvR2FpbkNvbnRyb2xcIixcIm1vekF1dG9HYWluQ29udHJvbFwiKSxlKHIsXCJub2lzZVN1cHByZXNzaW9uXCIsXCJtb3pOb2lzZVN1cHByZXNzaW9uXCIpKSx0LmFwcGx5KHRoaXMsW3JdKX19fX1mdW5jdGlvbiBoZShlKXtcIm9iamVjdFwiPT10eXBlb2YgZSYmZS5SVENUcmFja0V2ZW50JiZcInJlY2VpdmVyXCJpbiBlLlJUQ1RyYWNrRXZlbnQucHJvdG90eXBlJiYhKFwidHJhbnNjZWl2ZXJcImluIGUuUlRDVHJhY2tFdmVudC5wcm90b3R5cGUpJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5SVENUcmFja0V2ZW50LnByb3RvdHlwZSxcInRyYW5zY2VpdmVyXCIse2dldCgpe3JldHVybntyZWNlaXZlcjp0aGlzLnJlY2VpdmVyfX19KX1mdW5jdGlvbiBwZShlLHQpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlfHwhZS5SVENQZWVyQ29ubmVjdGlvbiYmIWUubW96UlRDUGVlckNvbm5lY3Rpb24pcmV0dXJuOyFlLlJUQ1BlZXJDb25uZWN0aW9uJiZlLm1velJUQ1BlZXJDb25uZWN0aW9uJiYoZS5SVENQZWVyQ29ubmVjdGlvbj1lLm1velJUQ1BlZXJDb25uZWN0aW9uKSx0LnZlcnNpb248NTMmJltcInNldExvY2FsRGVzY3JpcHRpb25cIixcInNldFJlbW90ZURlc2NyaXB0aW9uXCIsXCJhZGRJY2VDYW5kaWRhdGVcIl0uZm9yRWFjaCgoZnVuY3Rpb24odCl7Y29uc3Qgcj1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVt0XSxpPXtbdF0oKXtyZXR1cm4gYXJndW1lbnRzWzBdPW5ldyhcImFkZEljZUNhbmRpZGF0ZVwiPT09dD9lLlJUQ0ljZUNhbmRpZGF0ZTplLlJUQ1Nlc3Npb25EZXNjcmlwdGlvbikoYXJndW1lbnRzWzBdKSxyLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19O2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlW3RdPWlbdF19KSk7Y29uc3Qgcj17aW5ib3VuZHJ0cDpcImluYm91bmQtcnRwXCIsb3V0Ym91bmRydHA6XCJvdXRib3VuZC1ydHBcIixjYW5kaWRhdGVwYWlyOlwiY2FuZGlkYXRlLXBhaXJcIixsb2NhbGNhbmRpZGF0ZTpcImxvY2FsLWNhbmRpZGF0ZVwiLHJlbW90ZWNhbmRpZGF0ZTpcInJlbW90ZS1jYW5kaWRhdGVcIn0saT1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTdGF0cztlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRTdGF0cz1mdW5jdGlvbigpe2NvbnN0W2UsbixzXT1hcmd1bWVudHM7cmV0dXJuIGkuYXBwbHkodGhpcyxbZXx8bnVsbF0pLnRoZW4oKGU9PntpZih0LnZlcnNpb248NTMmJiFuKXRyeXtlLmZvckVhY2goKGU9PntlLnR5cGU9cltlLnR5cGVdfHxlLnR5cGV9KSl9Y2F0Y2godCl7aWYoXCJUeXBlRXJyb3JcIiE9PXQubmFtZSl0aHJvdyB0O2UuZm9yRWFjaCgoKHQsaSk9PntlLnNldChpLE9iamVjdC5hc3NpZ24oe30sdCx7dHlwZTpyW3QudHlwZV18fHQudHlwZX0pKX0pKX1yZXR1cm4gZX0pKS50aGVuKG4scyl9fWZ1bmN0aW9uIF9lKGUpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlfHwhZS5SVENQZWVyQ29ubmVjdGlvbnx8IWUuUlRDUnRwU2VuZGVyKXJldHVybjtpZihlLlJUQ1J0cFNlbmRlciYmXCJnZXRTdGF0c1wiaW4gZS5SVENSdHBTZW5kZXIucHJvdG90eXBlKXJldHVybjtjb25zdCB0PWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFNlbmRlcnM7dCYmKGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFNlbmRlcnM9ZnVuY3Rpb24oKXtjb25zdCBlPXQuYXBwbHkodGhpcyxbXSk7cmV0dXJuIGUuZm9yRWFjaCgoZT0+ZS5fcGM9dGhpcykpLGV9KTtjb25zdCByPWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZFRyYWNrO3ImJihlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRUcmFjaz1mdW5jdGlvbigpe2NvbnN0IGU9ci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIGUuX3BjPXRoaXMsZX0pLGUuUlRDUnRwU2VuZGVyLnByb3RvdHlwZS5nZXRTdGF0cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRyYWNrP3RoaXMuX3BjLmdldFN0YXRzKHRoaXMudHJhY2spOlByb21pc2UucmVzb2x2ZShuZXcgTWFwKX19ZnVuY3Rpb24gbWUoZSl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGV8fCFlLlJUQ1BlZXJDb25uZWN0aW9ufHwhZS5SVENSdHBTZW5kZXIpcmV0dXJuO2lmKGUuUlRDUnRwU2VuZGVyJiZcImdldFN0YXRzXCJpbiBlLlJUQ1J0cFJlY2VpdmVyLnByb3RvdHlwZSlyZXR1cm47Y29uc3QgdD1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5nZXRSZWNlaXZlcnM7dCYmKGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldFJlY2VpdmVycz1mdW5jdGlvbigpe2NvbnN0IGU9dC5hcHBseSh0aGlzLFtdKTtyZXR1cm4gZS5mb3JFYWNoKChlPT5lLl9wYz10aGlzKSksZX0pLEwoZSxcInRyYWNrXCIsKGU9PihlLnJlY2VpdmVyLl9wYz1lLnNyY0VsZW1lbnQsZSkpKSxlLlJUQ1J0cFJlY2VpdmVyLnByb3RvdHlwZS5nZXRTdGF0cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYy5nZXRTdGF0cyh0aGlzLnRyYWNrKX19ZnVuY3Rpb24gZmUoZSl7ZS5SVENQZWVyQ29ubmVjdGlvbiYmIShcInJlbW92ZVN0cmVhbVwiaW4gZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUpJiYoZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlU3RyZWFtPWZ1bmN0aW9uKGUpe00oXCJyZW1vdmVTdHJlYW1cIixcInJlbW92ZVRyYWNrXCIpLHRoaXMuZ2V0U2VuZGVycygpLmZvckVhY2goKHQ9Pnt0LnRyYWNrJiZlLmdldFRyYWNrcygpLmluY2x1ZGVzKHQudHJhY2spJiZ0aGlzLnJlbW92ZVRyYWNrKHQpfSkpfSl9ZnVuY3Rpb24gdmUoZSl7ZS5EYXRhQ2hhbm5lbCYmIWUuUlRDRGF0YUNoYW5uZWwmJihlLlJUQ0RhdGFDaGFubmVsPWUuRGF0YUNoYW5uZWwpfWZ1bmN0aW9uIFJlKGUpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlfHwhZS5SVENQZWVyQ29ubmVjdGlvbilyZXR1cm47Y29uc3QgdD1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRUcmFuc2NlaXZlcjt0JiYoZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhbnNjZWl2ZXI9ZnVuY3Rpb24oKXt0aGlzLnNldFBhcmFtZXRlcnNQcm9taXNlcz1bXTtjb25zdCBlPWFyZ3VtZW50c1sxXSxyPWUmJlwic2VuZEVuY29kaW5nc1wiaW4gZTtyJiZlLnNlbmRFbmNvZGluZ3MuZm9yRWFjaCgoZT0+e2lmKFwicmlkXCJpbiBlKXtpZighL15bYS16MC05XXswLDE2fSQvaS50ZXN0KGUucmlkKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBSSUQgdmFsdWUgcHJvdmlkZWQuXCIpfWlmKFwic2NhbGVSZXNvbHV0aW9uRG93bkJ5XCJpbiBlJiYhKHBhcnNlRmxvYXQoZS5zY2FsZVJlc29sdXRpb25Eb3duQnkpPj0xKSl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcInNjYWxlX3Jlc29sdXRpb25fZG93bl9ieSBtdXN0IGJlID49IDEuMFwiKTtpZihcIm1heEZyYW1lcmF0ZVwiaW4gZSYmIShwYXJzZUZsb2F0KGUubWF4RnJhbWVyYXRlKT49MCkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJtYXhfZnJhbWVyYXRlIG11c3QgYmUgPj0gMC4wXCIpfSkpO2NvbnN0IGk9dC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYocil7Y29uc3R7c2VuZGVyOnR9PWkscj10LmdldFBhcmFtZXRlcnMoKTsoIShcImVuY29kaW5nc1wiaW4gcil8fDE9PT1yLmVuY29kaW5ncy5sZW5ndGgmJjA9PT1PYmplY3Qua2V5cyhyLmVuY29kaW5nc1swXSkubGVuZ3RoKSYmKHIuZW5jb2RpbmdzPWUuc2VuZEVuY29kaW5ncyx0LnNlbmRFbmNvZGluZ3M9ZS5zZW5kRW5jb2RpbmdzLHRoaXMuc2V0UGFyYW1ldGVyc1Byb21pc2VzLnB1c2godC5zZXRQYXJhbWV0ZXJzKHIpLnRoZW4oKCgpPT57ZGVsZXRlIHQuc2VuZEVuY29kaW5nc30pKS5jYXRjaCgoKCk9PntkZWxldGUgdC5zZW5kRW5jb2RpbmdzfSkpKSl9cmV0dXJuIGl9KX1mdW5jdGlvbiBnZShlKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZXx8IWUuUlRDUnRwU2VuZGVyKXJldHVybjtjb25zdCB0PWUuUlRDUnRwU2VuZGVyLnByb3RvdHlwZS5nZXRQYXJhbWV0ZXJzO3QmJihlLlJUQ1J0cFNlbmRlci5wcm90b3R5cGUuZ2V0UGFyYW1ldGVycz1mdW5jdGlvbigpe2NvbnN0IGU9dC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuXCJlbmNvZGluZ3NcImluIGV8fChlLmVuY29kaW5ncz1bXS5jb25jYXQodGhpcy5zZW5kRW5jb2RpbmdzfHxbe31dKSksZX0pfWZ1bmN0aW9uIFNlKGUpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlfHwhZS5SVENQZWVyQ29ubmVjdGlvbilyZXR1cm47Y29uc3QgdD1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5jcmVhdGVPZmZlcjtlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5jcmVhdGVPZmZlcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNldFBhcmFtZXRlcnNQcm9taXNlcyYmdGhpcy5zZXRQYXJhbWV0ZXJzUHJvbWlzZXMubGVuZ3RoP1Byb21pc2UuYWxsKHRoaXMuc2V0UGFyYW1ldGVyc1Byb21pc2VzKS50aGVuKCgoKT0+dC5hcHBseSh0aGlzLGFyZ3VtZW50cykpKS5maW5hbGx5KCgoKT0+e3RoaXMuc2V0UGFyYW1ldGVyc1Byb21pc2VzPVtdfSkpOnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfX1mdW5jdGlvbiBDZShlKXtpZihcIm9iamVjdFwiIT10eXBlb2YgZXx8IWUuUlRDUGVlckNvbm5lY3Rpb24pcmV0dXJuO2NvbnN0IHQ9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuY3JlYXRlQW5zd2VyO2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmNyZWF0ZUFuc3dlcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNldFBhcmFtZXRlcnNQcm9taXNlcyYmdGhpcy5zZXRQYXJhbWV0ZXJzUHJvbWlzZXMubGVuZ3RoP1Byb21pc2UuYWxsKHRoaXMuc2V0UGFyYW1ldGVyc1Byb21pc2VzKS50aGVuKCgoKT0+dC5hcHBseSh0aGlzLGFyZ3VtZW50cykpKS5maW5hbGx5KCgoKT0+e3RoaXMuc2V0UGFyYW1ldGVyc1Byb21pc2VzPVtdfSkpOnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfX12YXIgVGU9T2JqZWN0LmZyZWV6ZSh7X19wcm90b19fOm51bGwsc2hpbU9uVHJhY2s6aGUsc2hpbVBlZXJDb25uZWN0aW9uOnBlLHNoaW1TZW5kZXJHZXRTdGF0czpfZSxzaGltUmVjZWl2ZXJHZXRTdGF0czptZSxzaGltUmVtb3ZlU3RyZWFtOmZlLHNoaW1SVENEYXRhQ2hhbm5lbDp2ZSxzaGltQWRkVHJhbnNjZWl2ZXI6UmUsc2hpbUdldFBhcmFtZXRlcnM6Z2Usc2hpbUNyZWF0ZU9mZmVyOlNlLHNoaW1DcmVhdGVBbnN3ZXI6Q2Usc2hpbUdldFVzZXJNZWRpYTpsZSxzaGltR2V0RGlzcGxheU1lZGlhOmZ1bmN0aW9uKGUsdCl7ZS5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzJiZcImdldERpc3BsYXlNZWRpYVwiaW4gZS5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzfHxlLm5hdmlnYXRvci5tZWRpYURldmljZXMmJihlLm5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0RGlzcGxheU1lZGlhPWZ1bmN0aW9uKHIpe2lmKCFyfHwhci52aWRlbyl7Y29uc3QgZT1uZXcgRE9NRXhjZXB0aW9uKFwiZ2V0RGlzcGxheU1lZGlhIHdpdGhvdXQgdmlkZW8gY29uc3RyYWludHMgaXMgdW5kZWZpbmVkXCIpO3JldHVybiBlLm5hbWU9XCJOb3RGb3VuZEVycm9yXCIsZS5jb2RlPTgsUHJvbWlzZS5yZWplY3QoZSl9cmV0dXJuITA9PT1yLnZpZGVvP3IudmlkZW89e21lZGlhU291cmNlOnR9OnIudmlkZW8ubWVkaWFTb3VyY2U9dCxlLm5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKHIpfSl9fSk7ZnVuY3Rpb24gSWUoZSl7aWYoXCJvYmplY3RcIj09dHlwZW9mIGUmJmUuUlRDUGVlckNvbm5lY3Rpb24pe2lmKFwiZ2V0TG9jYWxTdHJlYW1zXCJpbiBlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZXx8KGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmdldExvY2FsU3RyZWFtcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9sb2NhbFN0cmVhbXN8fCh0aGlzLl9sb2NhbFN0cmVhbXM9W10pLHRoaXMuX2xvY2FsU3RyZWFtc30pLCEoXCJhZGRTdHJlYW1cImluIGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKSl7Y29uc3QgdD1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRUcmFjaztlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRTdHJlYW09ZnVuY3Rpb24oZSl7dGhpcy5fbG9jYWxTdHJlYW1zfHwodGhpcy5fbG9jYWxTdHJlYW1zPVtdKSx0aGlzLl9sb2NhbFN0cmVhbXMuaW5jbHVkZXMoZSl8fHRoaXMuX2xvY2FsU3RyZWFtcy5wdXNoKGUpLGUuZ2V0QXVkaW9UcmFja3MoKS5mb3JFYWNoKChyPT50LmNhbGwodGhpcyxyLGUpKSksZS5nZXRWaWRlb1RyYWNrcygpLmZvckVhY2goKHI9PnQuY2FsbCh0aGlzLHIsZSkpKX0sZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuYWRkVHJhY2s9ZnVuY3Rpb24oZSwuLi5yKXtyZXR1cm4gciYmci5mb3JFYWNoKChlPT57dGhpcy5fbG9jYWxTdHJlYW1zP3RoaXMuX2xvY2FsU3RyZWFtcy5pbmNsdWRlcyhlKXx8dGhpcy5fbG9jYWxTdHJlYW1zLnB1c2goZSk6dGhpcy5fbG9jYWxTdHJlYW1zPVtlXX0pKSx0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX19XCJyZW1vdmVTdHJlYW1cImluIGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlfHwoZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUucmVtb3ZlU3RyZWFtPWZ1bmN0aW9uKGUpe3RoaXMuX2xvY2FsU3RyZWFtc3x8KHRoaXMuX2xvY2FsU3RyZWFtcz1bXSk7Y29uc3QgdD10aGlzLl9sb2NhbFN0cmVhbXMuaW5kZXhPZihlKTtpZigtMT09PXQpcmV0dXJuO3RoaXMuX2xvY2FsU3RyZWFtcy5zcGxpY2UodCwxKTtjb25zdCByPWUuZ2V0VHJhY2tzKCk7dGhpcy5nZXRTZW5kZXJzKCkuZm9yRWFjaCgoZT0+e3IuaW5jbHVkZXMoZS50cmFjaykmJnRoaXMucmVtb3ZlVHJhY2soZSl9KSl9KX19ZnVuY3Rpb24gRWUoZSl7aWYoXCJvYmplY3RcIj09dHlwZW9mIGUmJmUuUlRDUGVlckNvbm5lY3Rpb24mJihcImdldFJlbW90ZVN0cmVhbXNcImluIGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlfHwoZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuZ2V0UmVtb3RlU3RyZWFtcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZW1vdGVTdHJlYW1zP3RoaXMuX3JlbW90ZVN0cmVhbXM6W119KSwhKFwib25hZGRzdHJlYW1cImluIGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKSkpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSxcIm9uYWRkc3RyZWFtXCIse2dldCgpe3JldHVybiB0aGlzLl9vbmFkZHN0cmVhbX0sc2V0KGUpe3RoaXMuX29uYWRkc3RyZWFtJiYodGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKFwiYWRkc3RyZWFtXCIsdGhpcy5fb25hZGRzdHJlYW0pLHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRyYWNrXCIsdGhpcy5fb25hZGRzdHJlYW1wb2x5KSksdGhpcy5hZGRFdmVudExpc3RlbmVyKFwiYWRkc3RyZWFtXCIsdGhpcy5fb25hZGRzdHJlYW09ZSksdGhpcy5hZGRFdmVudExpc3RlbmVyKFwidHJhY2tcIix0aGlzLl9vbmFkZHN0cmVhbXBvbHk9ZT0+e2Uuc3RyZWFtcy5mb3JFYWNoKChlPT57aWYodGhpcy5fcmVtb3RlU3RyZWFtc3x8KHRoaXMuX3JlbW90ZVN0cmVhbXM9W10pLHRoaXMuX3JlbW90ZVN0cmVhbXMuaW5jbHVkZXMoZSkpcmV0dXJuO3RoaXMuX3JlbW90ZVN0cmVhbXMucHVzaChlKTtjb25zdCB0PW5ldyBFdmVudChcImFkZHN0cmVhbVwiKTt0LnN0cmVhbT1lLHRoaXMuZGlzcGF0Y2hFdmVudCh0KX0pKX0pfX0pO2NvbnN0IHQ9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0UmVtb3RlRGVzY3JpcHRpb247ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0UmVtb3RlRGVzY3JpcHRpb249ZnVuY3Rpb24oKXtjb25zdCBlPXRoaXM7cmV0dXJuIHRoaXMuX29uYWRkc3RyZWFtcG9seXx8dGhpcy5hZGRFdmVudExpc3RlbmVyKFwidHJhY2tcIix0aGlzLl9vbmFkZHN0cmVhbXBvbHk9ZnVuY3Rpb24odCl7dC5zdHJlYW1zLmZvckVhY2goKHQ9PntpZihlLl9yZW1vdGVTdHJlYW1zfHwoZS5fcmVtb3RlU3RyZWFtcz1bXSksZS5fcmVtb3RlU3RyZWFtcy5pbmRleE9mKHQpPj0wKXJldHVybjtlLl9yZW1vdGVTdHJlYW1zLnB1c2godCk7Y29uc3Qgcj1uZXcgRXZlbnQoXCJhZGRzdHJlYW1cIik7ci5zdHJlYW09dCxlLmRpc3BhdGNoRXZlbnQocil9KSl9KSx0LmFwcGx5KGUsYXJndW1lbnRzKX19fWZ1bmN0aW9uIHllKGUpe2lmKFwib2JqZWN0XCIhPXR5cGVvZiBlfHwhZS5SVENQZWVyQ29ubmVjdGlvbilyZXR1cm47Y29uc3QgdD1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSxyPXQuY3JlYXRlT2ZmZXIsaT10LmNyZWF0ZUFuc3dlcixuPXQuc2V0TG9jYWxEZXNjcmlwdGlvbixzPXQuc2V0UmVtb3RlRGVzY3JpcHRpb24sbz10LmFkZEljZUNhbmRpZGF0ZTt0LmNyZWF0ZU9mZmVyPWZ1bmN0aW9uKGUsdCl7Y29uc3QgaT1hcmd1bWVudHMubGVuZ3RoPj0yP2FyZ3VtZW50c1syXTphcmd1bWVudHNbMF0sbj1yLmFwcGx5KHRoaXMsW2ldKTtyZXR1cm4gdD8obi50aGVuKGUsdCksUHJvbWlzZS5yZXNvbHZlKCkpOm59LHQuY3JlYXRlQW5zd2VyPWZ1bmN0aW9uKGUsdCl7Y29uc3Qgcj1hcmd1bWVudHMubGVuZ3RoPj0yP2FyZ3VtZW50c1syXTphcmd1bWVudHNbMF0sbj1pLmFwcGx5KHRoaXMsW3JdKTtyZXR1cm4gdD8obi50aGVuKGUsdCksUHJvbWlzZS5yZXNvbHZlKCkpOm59O2xldCBhPWZ1bmN0aW9uKGUsdCxyKXtjb25zdCBpPW4uYXBwbHkodGhpcyxbZV0pO3JldHVybiByPyhpLnRoZW4odCxyKSxQcm9taXNlLnJlc29sdmUoKSk6aX07dC5zZXRMb2NhbERlc2NyaXB0aW9uPWEsYT1mdW5jdGlvbihlLHQscil7Y29uc3QgaT1zLmFwcGx5KHRoaXMsW2VdKTtyZXR1cm4gcj8oaS50aGVuKHQsciksUHJvbWlzZS5yZXNvbHZlKCkpOml9LHQuc2V0UmVtb3RlRGVzY3JpcHRpb249YSxhPWZ1bmN0aW9uKGUsdCxyKXtjb25zdCBpPW8uYXBwbHkodGhpcyxbZV0pO3JldHVybiByPyhpLnRoZW4odCxyKSxQcm9taXNlLnJlc29sdmUoKSk6aX0sdC5hZGRJY2VDYW5kaWRhdGU9YX1mdW5jdGlvbiBrZShlKXtjb25zdCB0PWUmJmUubmF2aWdhdG9yO2lmKHQubWVkaWFEZXZpY2VzJiZ0Lm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEpe2NvbnN0IGU9dC5tZWRpYURldmljZXMscj1lLmdldFVzZXJNZWRpYS5iaW5kKGUpO3QubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYT1lPT5yKGJlKGUpKX0hdC5nZXRVc2VyTWVkaWEmJnQubWVkaWFEZXZpY2VzJiZ0Lm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEmJih0LmdldFVzZXJNZWRpYT1mdW5jdGlvbihlLHIsaSl7dC5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKGUpLnRoZW4ocixpKX0uYmluZCh0KSl9ZnVuY3Rpb24gYmUoZSl7cmV0dXJuIGUmJnZvaWQgMCE9PWUudmlkZW8/T2JqZWN0LmFzc2lnbih7fSxlLHt2aWRlbzpVKGUudmlkZW8pfSk6ZX1mdW5jdGlvbiBQZShlKXtpZighZS5SVENQZWVyQ29ubmVjdGlvbilyZXR1cm47Y29uc3QgdD1lLlJUQ1BlZXJDb25uZWN0aW9uO2UuUlRDUGVlckNvbm5lY3Rpb249ZnVuY3Rpb24oZSxyKXtpZihlJiZlLmljZVNlcnZlcnMpe2NvbnN0IHQ9W107Zm9yKGxldCByPTA7cjxlLmljZVNlcnZlcnMubGVuZ3RoO3IrKyl7bGV0IGk9ZS5pY2VTZXJ2ZXJzW3JdOyFpLmhhc093blByb3BlcnR5KFwidXJsc1wiKSYmaS5oYXNPd25Qcm9wZXJ0eShcInVybFwiKT8oTShcIlJUQ0ljZVNlcnZlci51cmxcIixcIlJUQ0ljZVNlcnZlci51cmxzXCIpLGk9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShpKSksaS51cmxzPWkudXJsLGRlbGV0ZSBpLnVybCx0LnB1c2goaSkpOnQucHVzaChlLmljZVNlcnZlcnNbcl0pfWUuaWNlU2VydmVycz10fXJldHVybiBuZXcgdChlLHIpfSxlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZT10LnByb3RvdHlwZSxcImdlbmVyYXRlQ2VydGlmaWNhdGVcImluIHQmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLlJUQ1BlZXJDb25uZWN0aW9uLFwiZ2VuZXJhdGVDZXJ0aWZpY2F0ZVwiLHtnZXQ6KCk9PnQuZ2VuZXJhdGVDZXJ0aWZpY2F0ZX0pfWZ1bmN0aW9uIE9lKGUpe1wib2JqZWN0XCI9PXR5cGVvZiBlJiZlLlJUQ1RyYWNrRXZlbnQmJlwicmVjZWl2ZXJcImluIGUuUlRDVHJhY2tFdmVudC5wcm90b3R5cGUmJiEoXCJ0cmFuc2NlaXZlclwiaW4gZS5SVENUcmFja0V2ZW50LnByb3RvdHlwZSkmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLlJUQ1RyYWNrRXZlbnQucHJvdG90eXBlLFwidHJhbnNjZWl2ZXJcIix7Z2V0KCl7cmV0dXJue3JlY2VpdmVyOnRoaXMucmVjZWl2ZXJ9fX0pfWZ1bmN0aW9uIExlKGUpe2NvbnN0IHQ9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuY3JlYXRlT2ZmZXI7ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuY3JlYXRlT2ZmZXI9ZnVuY3Rpb24oZSl7aWYoZSl7dm9pZCAwIT09ZS5vZmZlclRvUmVjZWl2ZUF1ZGlvJiYoZS5vZmZlclRvUmVjZWl2ZUF1ZGlvPSEhZS5vZmZlclRvUmVjZWl2ZUF1ZGlvKTtjb25zdCB0PXRoaXMuZ2V0VHJhbnNjZWl2ZXJzKCkuZmluZCgoZT0+XCJhdWRpb1wiPT09ZS5yZWNlaXZlci50cmFjay5raW5kKSk7ITE9PT1lLm9mZmVyVG9SZWNlaXZlQXVkaW8mJnQ/XCJzZW5kcmVjdlwiPT09dC5kaXJlY3Rpb24/dC5zZXREaXJlY3Rpb24/dC5zZXREaXJlY3Rpb24oXCJzZW5kb25seVwiKTp0LmRpcmVjdGlvbj1cInNlbmRvbmx5XCI6XCJyZWN2b25seVwiPT09dC5kaXJlY3Rpb24mJih0LnNldERpcmVjdGlvbj90LnNldERpcmVjdGlvbihcImluYWN0aXZlXCIpOnQuZGlyZWN0aW9uPVwiaW5hY3RpdmVcIik6ITAhPT1lLm9mZmVyVG9SZWNlaXZlQXVkaW98fHR8fHRoaXMuYWRkVHJhbnNjZWl2ZXIoXCJhdWRpb1wiKSx2b2lkIDAhPT1lLm9mZmVyVG9SZWNlaXZlVmlkZW8mJihlLm9mZmVyVG9SZWNlaXZlVmlkZW89ISFlLm9mZmVyVG9SZWNlaXZlVmlkZW8pO2NvbnN0IHI9dGhpcy5nZXRUcmFuc2NlaXZlcnMoKS5maW5kKChlPT5cInZpZGVvXCI9PT1lLnJlY2VpdmVyLnRyYWNrLmtpbmQpKTshMT09PWUub2ZmZXJUb1JlY2VpdmVWaWRlbyYmcj9cInNlbmRyZWN2XCI9PT1yLmRpcmVjdGlvbj9yLnNldERpcmVjdGlvbj9yLnNldERpcmVjdGlvbihcInNlbmRvbmx5XCIpOnIuZGlyZWN0aW9uPVwic2VuZG9ubHlcIjpcInJlY3Zvbmx5XCI9PT1yLmRpcmVjdGlvbiYmKHIuc2V0RGlyZWN0aW9uP3Iuc2V0RGlyZWN0aW9uKFwiaW5hY3RpdmVcIik6ci5kaXJlY3Rpb249XCJpbmFjdGl2ZVwiKTohMCE9PWUub2ZmZXJUb1JlY2VpdmVWaWRlb3x8cnx8dGhpcy5hZGRUcmFuc2NlaXZlcihcInZpZGVvXCIpfXJldHVybiB0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX19ZnVuY3Rpb24gTmUoZSl7XCJvYmplY3RcIiE9dHlwZW9mIGV8fGUuQXVkaW9Db250ZXh0fHwoZS5BdWRpb0NvbnRleHQ9ZS53ZWJraXRBdWRpb0NvbnRleHQpfXZhciBEZT1PYmplY3QuZnJlZXplKHtfX3Byb3RvX186bnVsbCxzaGltTG9jYWxTdHJlYW1zQVBJOkllLHNoaW1SZW1vdGVTdHJlYW1zQVBJOkVlLHNoaW1DYWxsYmFja3NBUEk6eWUsc2hpbUdldFVzZXJNZWRpYTprZSxzaGltQ29uc3RyYWludHM6YmUsc2hpbVJUQ0ljZVNlcnZlclVybHM6UGUsc2hpbVRyYWNrRXZlbnRUcmFuc2NlaXZlcjpPZSxzaGltQ3JlYXRlT2ZmZXJMZWdhY3k6TGUsc2hpbUF1ZGlvQ29udGV4dDpOZX0pO2Z1bmN0aW9uIEFlKGUpe2lmKCFlLlJUQ0ljZUNhbmRpZGF0ZXx8ZS5SVENJY2VDYW5kaWRhdGUmJlwiZm91bmRhdGlvblwiaW4gZS5SVENJY2VDYW5kaWRhdGUucHJvdG90eXBlKXJldHVybjtjb25zdCB0PWUuUlRDSWNlQ2FuZGlkYXRlO2UuUlRDSWNlQ2FuZGlkYXRlPWZ1bmN0aW9uKGUpe2lmKFwib2JqZWN0XCI9PXR5cGVvZiBlJiZlLmNhbmRpZGF0ZSYmMD09PWUuY2FuZGlkYXRlLmluZGV4T2YoXCJhPVwiKSYmKChlPUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZSkpKS5jYW5kaWRhdGU9ZS5jYW5kaWRhdGUuc3Vic3RyKDIpKSxlLmNhbmRpZGF0ZSYmZS5jYW5kaWRhdGUubGVuZ3RoKXtjb25zdCByPW5ldyB0KGUpLGk9Wi5wYXJzZUNhbmRpZGF0ZShlLmNhbmRpZGF0ZSksbj1PYmplY3QuYXNzaWduKHIsaSk7cmV0dXJuIG4udG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJue2NhbmRpZGF0ZTpuLmNhbmRpZGF0ZSxzZHBNaWQ6bi5zZHBNaWQsc2RwTUxpbmVJbmRleDpuLnNkcE1MaW5lSW5kZXgsdXNlcm5hbWVGcmFnbWVudDpuLnVzZXJuYW1lRnJhZ21lbnR9fSxufXJldHVybiBuZXcgdChlKX0sZS5SVENJY2VDYW5kaWRhdGUucHJvdG90eXBlPXQucHJvdG90eXBlLEwoZSxcImljZWNhbmRpZGF0ZVwiLCh0PT4odC5jYW5kaWRhdGUmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiY2FuZGlkYXRlXCIse3ZhbHVlOm5ldyBlLlJUQ0ljZUNhbmRpZGF0ZSh0LmNhbmRpZGF0ZSksd3JpdGFibGU6XCJmYWxzZVwifSksdCkpKX1mdW5jdGlvbiBNZShlLHQpe2lmKCFlLlJUQ1BlZXJDb25uZWN0aW9uKXJldHVybjtcInNjdHBcImluIGUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlfHxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUsXCJzY3RwXCIse2dldCgpe3JldHVybiB2b2lkIDA9PT10aGlzLl9zY3RwP251bGw6dGhpcy5fc2N0cH19KTtjb25zdCByPWZ1bmN0aW9uKGUpe2lmKCFlfHwhZS5zZHApcmV0dXJuITE7Y29uc3QgdD1aLnNwbGl0U2VjdGlvbnMoZS5zZHApO3JldHVybiB0LnNoaWZ0KCksdC5zb21lKChlPT57Y29uc3QgdD1aLnBhcnNlTUxpbmUoZSk7cmV0dXJuIHQmJlwiYXBwbGljYXRpb25cIj09PXQua2luZCYmLTEhPT10LnByb3RvY29sLmluZGV4T2YoXCJTQ1RQXCIpfSkpfSxpPWZ1bmN0aW9uKGUpe2NvbnN0IHQ9ZS5zZHAubWF0Y2goL21vemlsbGEuLi5USElTX0lTX1NEUEFSVEEtKFxcZCspLyk7aWYobnVsbD09PXR8fHQubGVuZ3RoPDIpcmV0dXJuLTE7Y29uc3Qgcj1wYXJzZUludCh0WzFdLDEwKTtyZXR1cm4gciE9cj8tMTpyfSxuPWZ1bmN0aW9uKGUpe2xldCByPTY1NTM2O3JldHVyblwiZmlyZWZveFwiPT09dC5icm93c2VyJiYocj10LnZlcnNpb248NTc/LTE9PT1lPzE2Mzg0OjIxNDc0ODM2Mzc6dC52ZXJzaW9uPDYwPzU3PT09dC52ZXJzaW9uPzY1NTM1OjY1NTM2OjIxNDc0ODM2MzcpLHJ9LHM9ZnVuY3Rpb24oZSxyKXtsZXQgaT02NTUzNjtcImZpcmVmb3hcIj09PXQuYnJvd3NlciYmNTc9PT10LnZlcnNpb24mJihpPTY1NTM1KTtjb25zdCBuPVoubWF0Y2hQcmVmaXgoZS5zZHAsXCJhPW1heC1tZXNzYWdlLXNpemU6XCIpO3JldHVybiBuLmxlbmd0aD4wP2k9cGFyc2VJbnQoblswXS5zdWJzdHIoMTkpLDEwKTpcImZpcmVmb3hcIj09PXQuYnJvd3NlciYmLTEhPT1yJiYoaT0yMTQ3NDgzNjM3KSxpfSxvPWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnNldFJlbW90ZURlc2NyaXB0aW9uO2UuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLnNldFJlbW90ZURlc2NyaXB0aW9uPWZ1bmN0aW9uKCl7aWYodGhpcy5fc2N0cD1udWxsLFwiY2hyb21lXCI9PT10LmJyb3dzZXImJnQudmVyc2lvbj49NzYpe2NvbnN0e3NkcFNlbWFudGljczplfT10aGlzLmdldENvbmZpZ3VyYXRpb24oKTtcInBsYW4tYlwiPT09ZSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJzY3RwXCIse2dldCgpe3JldHVybiB2b2lkIDA9PT10aGlzLl9zY3RwP251bGw6dGhpcy5fc2N0cH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KX1pZihyKGFyZ3VtZW50c1swXSkpe2NvbnN0IGU9aShhcmd1bWVudHNbMF0pLHQ9bihlKSxyPXMoYXJndW1lbnRzWzBdLGUpO2xldCBvO289MD09PXQmJjA9PT1yP051bWJlci5QT1NJVElWRV9JTkZJTklUWTowPT09dHx8MD09PXI/TWF0aC5tYXgodCxyKTpNYXRoLm1pbih0LHIpO2NvbnN0IGE9e307T2JqZWN0LmRlZmluZVByb3BlcnR5KGEsXCJtYXhNZXNzYWdlU2l6ZVwiLHtnZXQ6KCk9Pm99KSx0aGlzLl9zY3RwPWF9cmV0dXJuIG8uYXBwbHkodGhpcyxhcmd1bWVudHMpfX1mdW5jdGlvbiB4ZShlKXtpZighZS5SVENQZWVyQ29ubmVjdGlvbnx8IShcImNyZWF0ZURhdGFDaGFubmVsXCJpbiBlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSkpcmV0dXJuO2Z1bmN0aW9uIHQoZSx0KXtjb25zdCByPWUuc2VuZDtlLnNlbmQ9ZnVuY3Rpb24oKXtjb25zdCBpPWFyZ3VtZW50c1swXSxuPWkubGVuZ3RofHxpLnNpemV8fGkuYnl0ZUxlbmd0aDtpZihcIm9wZW5cIj09PWUucmVhZHlTdGF0ZSYmdC5zY3RwJiZuPnQuc2N0cC5tYXhNZXNzYWdlU2l6ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiTWVzc2FnZSB0b28gbGFyZ2UgKGNhbiBzZW5kIGEgbWF4aW11bSBvZiBcIit0LnNjdHAubWF4TWVzc2FnZVNpemUrXCIgYnl0ZXMpXCIpO3JldHVybiByLmFwcGx5KGUsYXJndW1lbnRzKX19Y29uc3Qgcj1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5jcmVhdGVEYXRhQ2hhbm5lbDtlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5jcmVhdGVEYXRhQ2hhbm5lbD1mdW5jdGlvbigpe2NvbnN0IGU9ci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIHQoZSx0aGlzKSxlfSxMKGUsXCJkYXRhY2hhbm5lbFwiLChlPT4odChlLmNoYW5uZWwsZS50YXJnZXQpLGUpKSl9ZnVuY3Rpb24gVWUoZSl7aWYoIWUuUlRDUGVlckNvbm5lY3Rpb258fFwiY29ubmVjdGlvblN0YXRlXCJpbiBlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZSlyZXR1cm47Y29uc3QgdD1lLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcImNvbm5lY3Rpb25TdGF0ZVwiLHtnZXQoKXtyZXR1cm57Y29tcGxldGVkOlwiY29ubmVjdGVkXCIsY2hlY2tpbmc6XCJjb25uZWN0aW5nXCJ9W3RoaXMuaWNlQ29ubmVjdGlvblN0YXRlXXx8dGhpcy5pY2VDb25uZWN0aW9uU3RhdGV9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJvbmNvbm5lY3Rpb25zdGF0ZWNoYW5nZVwiLHtnZXQoKXtyZXR1cm4gdGhpcy5fb25jb25uZWN0aW9uc3RhdGVjaGFuZ2V8fG51bGx9LHNldChlKXt0aGlzLl9vbmNvbm5lY3Rpb25zdGF0ZWNoYW5nZSYmKHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNvbm5lY3Rpb25zdGF0ZWNoYW5nZVwiLHRoaXMuX29uY29ubmVjdGlvbnN0YXRlY2hhbmdlKSxkZWxldGUgdGhpcy5fb25jb25uZWN0aW9uc3RhdGVjaGFuZ2UpLGUmJnRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImNvbm5lY3Rpb25zdGF0ZWNoYW5nZVwiLHRoaXMuX29uY29ubmVjdGlvbnN0YXRlY2hhbmdlPWUpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLFtcInNldExvY2FsRGVzY3JpcHRpb25cIixcInNldFJlbW90ZURlc2NyaXB0aW9uXCJdLmZvckVhY2goKGU9Pntjb25zdCByPXRbZV07dFtlXT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb25uZWN0aW9uc3RhdGVjaGFuZ2Vwb2x5fHwodGhpcy5fY29ubmVjdGlvbnN0YXRlY2hhbmdlcG9seT1lPT57Y29uc3QgdD1lLnRhcmdldDtpZih0Ll9sYXN0Q29ubmVjdGlvblN0YXRlIT09dC5jb25uZWN0aW9uU3RhdGUpe3QuX2xhc3RDb25uZWN0aW9uU3RhdGU9dC5jb25uZWN0aW9uU3RhdGU7Y29uc3Qgcj1uZXcgRXZlbnQoXCJjb25uZWN0aW9uc3RhdGVjaGFuZ2VcIixlKTt0LmRpc3BhdGNoRXZlbnQocil9cmV0dXJuIGV9LHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZVwiLHRoaXMuX2Nvbm5lY3Rpb25zdGF0ZWNoYW5nZXBvbHkpKSxyLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KSl9ZnVuY3Rpb24gd2UoZSx0KXtpZighZS5SVENQZWVyQ29ubmVjdGlvbilyZXR1cm47aWYoXCJjaHJvbWVcIj09PXQuYnJvd3NlciYmdC52ZXJzaW9uPj03MSlyZXR1cm47aWYoXCJzYWZhcmlcIj09PXQuYnJvd3NlciYmdC52ZXJzaW9uPj02MDUpcmV0dXJuO2NvbnN0IHI9ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0UmVtb3RlRGVzY3JpcHRpb247ZS5SVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGUuc2V0UmVtb3RlRGVzY3JpcHRpb249ZnVuY3Rpb24odCl7aWYodCYmdC5zZHAmJi0xIT09dC5zZHAuaW5kZXhPZihcIlxcbmE9ZXh0bWFwLWFsbG93LW1peGVkXCIpKXtjb25zdCByPXQuc2RwLnNwbGl0KFwiXFxuXCIpLmZpbHRlcigoZT0+XCJhPWV4dG1hcC1hbGxvdy1taXhlZFwiIT09ZS50cmltKCkpKS5qb2luKFwiXFxuXCIpO2UuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uJiZ0IGluc3RhbmNlb2YgZS5SVENTZXNzaW9uRGVzY3JpcHRpb24/YXJndW1lbnRzWzBdPW5ldyBlLlJUQ1Nlc3Npb25EZXNjcmlwdGlvbih7dHlwZTp0LnR5cGUsc2RwOnJ9KTp0LnNkcD1yfXJldHVybiByLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19ZnVuY3Rpb24gJGUoZSx0KXtpZighZS5SVENQZWVyQ29ubmVjdGlvbnx8IWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlKXJldHVybjtjb25zdCByPWUuUlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlLmFkZEljZUNhbmRpZGF0ZTtyJiYwIT09ci5sZW5ndGgmJihlLlJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZS5hZGRJY2VDYW5kaWRhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzWzBdPyhcImNocm9tZVwiPT09dC5icm93c2VyJiZ0LnZlcnNpb248Nzh8fFwiZmlyZWZveFwiPT09dC5icm93c2VyJiZ0LnZlcnNpb248Njh8fFwic2FmYXJpXCI9PT10LmJyb3dzZXIpJiZhcmd1bWVudHNbMF0mJlwiXCI9PT1hcmd1bWVudHNbMF0uY2FuZGlkYXRlP1Byb21pc2UucmVzb2x2ZSgpOnIuYXBwbHkodGhpcyxhcmd1bWVudHMpOihhcmd1bWVudHNbMV0mJmFyZ3VtZW50c1sxXS5hcHBseShudWxsKSxQcm9taXNlLnJlc29sdmUoKSl9KX12YXIgamU9T2JqZWN0LmZyZWV6ZSh7X19wcm90b19fOm51bGwsc2hpbVJUQ0ljZUNhbmRpZGF0ZTpBZSxzaGltTWF4TWVzc2FnZVNpemU6TWUsc2hpbVNlbmRUaHJvd1R5cGVFcnJvcjp4ZSxzaGltQ29ubmVjdGlvblN0YXRlOlVlLHJlbW92ZUV4dG1hcEFsbG93TWl4ZWQ6d2Usc2hpbUFkZEljZUNhbmRpZGF0ZU51bGxPckVtcHR5OiRlfSk7Y29uc3QgVmU9ZnVuY3Rpb24oe3dpbmRvdzplfT17fSx0PXtzaGltQ2hyb21lOiEwLHNoaW1GaXJlZm94OiEwLHNoaW1FZGdlOiEwLHNoaW1TYWZhcmk6ITB9KXtjb25zdCByPUEsaT1mdW5jdGlvbihlKXtjb25zdCB0PXticm93c2VyOm51bGwsdmVyc2lvbjpudWxsfTtpZih2b2lkIDA9PT1lfHwhZS5uYXZpZ2F0b3IpcmV0dXJuIHQuYnJvd3Nlcj1cIk5vdCBhIGJyb3dzZXIuXCIsdDtjb25zdHtuYXZpZ2F0b3I6cn09ZTtpZihyLm1vekdldFVzZXJNZWRpYSl0LmJyb3dzZXI9XCJmaXJlZm94XCIsdC52ZXJzaW9uPU8oci51c2VyQWdlbnQsL0ZpcmVmb3hcXC8oXFxkKylcXC4vLDEpO2Vsc2UgaWYoci53ZWJraXRHZXRVc2VyTWVkaWF8fCExPT09ZS5pc1NlY3VyZUNvbnRleHQmJmUud2Via2l0UlRDUGVlckNvbm5lY3Rpb24mJiFlLlJUQ0ljZUdhdGhlcmVyKXQuYnJvd3Nlcj1cImNocm9tZVwiLHQudmVyc2lvbj1PKHIudXNlckFnZW50LC9DaHJvbShlfGl1bSlcXC8oXFxkKylcXC4vLDIpO2Vsc2UgaWYoci5tZWRpYURldmljZXMmJnIudXNlckFnZW50Lm1hdGNoKC9FZGdlXFwvKFxcZCspLihcXGQrKSQvKSl0LmJyb3dzZXI9XCJlZGdlXCIsdC52ZXJzaW9uPU8oci51c2VyQWdlbnQsL0VkZ2VcXC8oXFxkKykuKFxcZCspJC8sMik7ZWxzZXtpZighZS5SVENQZWVyQ29ubmVjdGlvbnx8IXIudXNlckFnZW50Lm1hdGNoKC9BcHBsZVdlYktpdFxcLyhcXGQrKVxcLi8pKXJldHVybiB0LmJyb3dzZXI9XCJOb3QgYSBzdXBwb3J0ZWQgYnJvd3Nlci5cIix0O3QuYnJvd3Nlcj1cInNhZmFyaVwiLHQudmVyc2lvbj1PKHIudXNlckFnZW50LC9BcHBsZVdlYktpdFxcLyhcXGQrKVxcLi8sMSksdC5zdXBwb3J0c1VuaWZpZWRQbGFuPWUuUlRDUnRwVHJhbnNjZWl2ZXImJlwiY3VycmVudERpcmVjdGlvblwiaW4gZS5SVENSdHBUcmFuc2NlaXZlci5wcm90b3R5cGV9cmV0dXJuIHR9KGUpLG49e2Jyb3dzZXJEZXRhaWxzOmksY29tbW9uU2hpbTpqZSxleHRyYWN0VmVyc2lvbjpPLGRpc2FibGVMb2c6TixkaXNhYmxlV2FybmluZ3M6RH07c3dpdGNoKGkuYnJvd3Nlcil7Y2FzZVwiY2hyb21lXCI6aWYoIXp8fCFZfHwhdC5zaGltQ2hyb21lKXJldHVybiByKFwiQ2hyb21lIHNoaW0gaXMgbm90IGluY2x1ZGVkIGluIHRoaXMgYWRhcHRlciByZWxlYXNlLlwiKSxuO2lmKG51bGw9PT1pLnZlcnNpb24pcmV0dXJuIHIoXCJDaHJvbWUgc2hpbSBjYW4gbm90IGRldGVybWluZSB2ZXJzaW9uLCBub3Qgc2hpbW1pbmcuXCIpLG47cihcImFkYXB0ZXIuanMgc2hpbW1pbmcgY2hyb21lLlwiKSxuLmJyb3dzZXJTaGltPXosJGUoZSxpKSxWKGUsaSksQihlKSxZKGUsaSksSChlKSxXKGUsaSksRihlKSxLKGUpLEcoZSkscShlLGkpLEFlKGUpLFVlKGUpLE1lKGUsaSkseGUoZSksd2UoZSxpKTticmVhaztjYXNlXCJmaXJlZm94XCI6aWYoIVRlfHwhcGV8fCF0LnNoaW1GaXJlZm94KXJldHVybiByKFwiRmlyZWZveCBzaGltIGlzIG5vdCBpbmNsdWRlZCBpbiB0aGlzIGFkYXB0ZXIgcmVsZWFzZS5cIiksbjtyKFwiYWRhcHRlci5qcyBzaGltbWluZyBmaXJlZm94LlwiKSxuLmJyb3dzZXJTaGltPVRlLCRlKGUsaSksbGUoZSxpKSxwZShlLGkpLGhlKGUpLGZlKGUpLF9lKGUpLG1lKGUpLHZlKGUpLFJlKGUpLGdlKGUpLFNlKGUpLENlKGUpLEFlKGUpLFVlKGUpLE1lKGUsaSkseGUoZSk7YnJlYWs7Y2FzZVwiZWRnZVwiOmlmKCF1ZXx8IWNlfHwhdC5zaGltRWRnZSlyZXR1cm4gcihcIk1TIGVkZ2Ugc2hpbSBpcyBub3QgaW5jbHVkZWQgaW4gdGhpcyBhZGFwdGVyIHJlbGVhc2UuXCIpLG47cihcImFkYXB0ZXIuanMgc2hpbW1pbmcgZWRnZS5cIiksbi5icm93c2VyU2hpbT11ZSxvZShlKSxhZShlKSxjZShlLGkpLGRlKGUpLE1lKGUsaSkseGUoZSk7YnJlYWs7Y2FzZVwic2FmYXJpXCI6aWYoIURlfHwhdC5zaGltU2FmYXJpKXJldHVybiByKFwiU2FmYXJpIHNoaW0gaXMgbm90IGluY2x1ZGVkIGluIHRoaXMgYWRhcHRlciByZWxlYXNlLlwiKSxuO3IoXCJhZGFwdGVyLmpzIHNoaW1taW5nIHNhZmFyaS5cIiksbi5icm93c2VyU2hpbT1EZSwkZShlLGkpLFBlKGUpLExlKGUpLHllKGUpLEllKGUpLEVlKGUpLE9lKGUpLGtlKGUpLE5lKGUpLEFlKGUpLE1lKGUsaSkseGUoZSksd2UoZSxpKTticmVhaztkZWZhdWx0OnIoXCJVbnN1cHBvcnRlZCBicm93c2VyIVwiKX1yZXR1cm4gbn0oe3dpbmRvdzpcInVuZGVmaW5lZFwiPT10eXBlb2Ygd2luZG93P3ZvaWQgMDp3aW5kb3d9KTt2YXIgQmUsSGUsRmU7IWZ1bmN0aW9uKGUpe2UuRlBTXzEwPVwiRlBTXzEwXCIsZS5GUFNfMTU9XCJGUFNfMTVcIixlLkZQU18yND1cIkZQU18yNFwiLGUuRlBTXzMwPVwiRlBTXzMwXCJ9KEJlfHwoQmU9e30pKSxmdW5jdGlvbihlKXtlLlcxNzZfSDEzMj1cIlcxNzZfSDEzMlwiLGUuVzE3Nl9IMTQ0PVwiVzE3Nl9IMTQ0XCIsZS5XMjU2X0gxNDQ9XCJXMjU2X0gxNDRcIixlLlczMjBfSDE4MD1cIlczMjBfSDE4MFwiLGUuVzI0MF9IMjQwPVwiVzI0MF9IMjQwXCIsZS5XMzIwX0gyNDA9XCJXMzIwX0gyNDBcIixlLlc0ODBfSDM2MD1cIlc0ODBfSDM2MFwiLGUuVzY0MF9IMzYwPVwiVzY0MF9IMzYwXCIsZS5XNDgwX0g0ODA9XCJXNDgwX0g0ODBcIixlLlc2NDBfSDQ4MD1cIlc2NDBfSDQ4MFwiLGUuVzcyMF9INDgwPVwiVzcyMF9INDgwXCIsZS5XMTI4MF9INzIwPVwiVzEyODBfSDcyMFwiLGUuVzE5MjBfSDEwODA9XCJXMTkyMF9IMTA4MFwifShIZXx8KEhlPXt9KSksZnVuY3Rpb24oZSl7ZVtlLkFVRElPX09OTFk9MF09XCJBVURJT19PTkxZXCIsZVtlLlZJREVPX09OTFk9MV09XCJWSURFT19PTkxZXCIsZVtlLkFVRElPX1ZJREVPPTJdPVwiQVVESU9fVklERU9cIn0oRmV8fChGZT17fSkpO2NvbnN0IEtlPXtbSGUuVzE3Nl9IMTMyXTp7d2lkdGg6MTc2LGhlaWdodDoxMzIsbWF4Qml0cmF0ZToxNTAsbWluQml0cmF0ZTo4MH0sW0hlLlcxNzZfSDE0NF06e3dpZHRoOjE3NixoZWlnaHQ6MTQ0LG1heEJpdHJhdGU6MTYwLG1pbkJpdHJhdGU6ODB9LFtIZS5XMjU2X0gxNDRdOnt3aWR0aDoyNTYsaGVpZ2h0OjE0NCxtYXhCaXRyYXRlOjI0MCxtaW5CaXRyYXRlOjEyMH0sW0hlLlczMjBfSDE4MF06e3dpZHRoOjMyMCxoZWlnaHQ6MTgwLG1heEJpdHJhdGU6MjgwLG1pbkJpdHJhdGU6MTIwfSxbSGUuVzI0MF9IMjQwXTp7d2lkdGg6MjQwLGhlaWdodDoyNDAsbWF4Qml0cmF0ZToyODAsbWluQml0cmF0ZToxMjB9LFtIZS5XMzIwX0gyNDBdOnt3aWR0aDozMjAsaGVpZ2h0OjI0MCxtYXhCaXRyYXRlOjQwMCxtaW5CaXRyYXRlOjEyMH0sW0hlLlc0ODBfSDM2MF06e3dpZHRoOjQ4MCxoZWlnaHQ6MzYwLG1heEJpdHJhdGU6NjUwLG1pbkJpdHJhdGU6MTUwfSxbSGUuVzY0MF9IMzYwXTp7d2lkdGg6NjQwLGhlaWdodDozNjAsbWF4Qml0cmF0ZTo4MDAsbWluQml0cmF0ZToxODB9LFtIZS5XNDgwX0g0ODBdOnt3aWR0aDo0ODAsaGVpZ2h0OjQ4MCxtYXhCaXRyYXRlOjgwMCxtaW5CaXRyYXRlOjE4MH0sW0hlLlc2NDBfSDQ4MF06e3dpZHRoOjY0MCxoZWlnaHQ6NDgwLG1heEJpdHJhdGU6OTAwLG1pbkJpdHJhdGU6MjAwfSxbSGUuVzcyMF9INDgwXTp7d2lkdGg6NzIwLGhlaWdodDo0ODAsbWF4Qml0cmF0ZToxZTMsbWluQml0cmF0ZToyMDB9LFtIZS5XMTI4MF9INzIwXTp7d2lkdGg6MTI4MCxoZWlnaHQ6NzIwLG1heEJpdHJhdGU6MjIwMCxtaW5CaXRyYXRlOjI1MH0sW0hlLlcxOTIwX0gxMDgwXTp7d2lkdGg6MTkyMCxoZWlnaHQ6MTA4MCxtYXhCaXRyYXRlOjRlMyxtaW5CaXRyYXRlOjQwMH19LEdlPShlLHQpPT57Y29uc3Qgcj1lKnQ7bGV0IGk9TnVtYmVyLk1BWF9WQUxVRSxuPW51bGw7Zm9yKGNvbnN0IGUgaW4gS2Upe2NvbnN0IHQ9S2VbZV0scz1NYXRoLmFicyh0LndpZHRoKnQuaGVpZ2h0LXIpO3M8aSYmKG49dCxpPXMpfXJldHVybiBufSxKZT17MTA6MSwxNToxLDI0OjEuNSwzMDoxLjV9LFdlPWU9PntsZXQgdD1OdW1iZXIuTUFYX1ZBTFVFLHI9MTtmb3IoY29uc3QgaSBpbiBKZSl7Y29uc3Qgbj1NYXRoLmFicyhlLXBhcnNlSW50KGkpKTtuPHQmJih0PW4scj1KZVtpXSl9cmV0dXJuIHJ9LFllPXtnZXRDYW1lcmFzOigpPT5TKHZvaWQgMCx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4oeWllbGQgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5lbnVtZXJhdGVEZXZpY2VzKCkpLmZpbHRlcigoZT0+XCJ2aWRlb2lucHV0XCI9PT1lLmtpbmQpKX0pKSxnZXRNaWNyb3Bob25lczooKT0+Uyh2b2lkIDAsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuKHlpZWxkIG5hdmlnYXRvci5tZWRpYURldmljZXMuZW51bWVyYXRlRGV2aWNlcygpKS5maWx0ZXIoKGU9PlwiYXVkaW9pbnB1dFwiPT09ZS5raW5kKSl9KSksZ2V0U3BlYWtlcnM6KCk9PlModm9pZCAwLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybih5aWVsZCBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmVudW1lcmF0ZURldmljZXMoKSkuZmlsdGVyKChlPT5cImF1ZGlvb3V0cHV0XCI9PT1lLmtpbmQpKX0pKX07Y2xhc3MgcWUgZXh0ZW5kcyBfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkV2ZW50RW1pdHRlcntjb25zdHJ1Y3RvcihlLHQscixpLG4pe3N1cGVyKCksdGhpcy5fdGFnPWUsdGhpcy5fdXNlcklkPXQsdGhpcy5fa2luZD1yLHRoaXMuX2lzTG9jYWxUcmFjaz1pLHRoaXMuX3Jvb21JZD1uLHRoaXMuX2xvY2FsTXV0ZWQ9ITEsdGhpcy5fcmVtb3RlTXV0ZWQ9ITEsdGhpcy5fc3RyZWFtSWQ9W3RoaXMuX3VzZXJJZHx8dGhpcy5fcm9vbUlkLHRoaXMuX3RhZ10uam9pbihcIl9cIiksdGhpcy5faWQ9W3RoaXMuX3N0cmVhbUlkLHRoaXMuaXNBdWRpb1RyYWNrKCk/MDoxXS5qb2luKFwiX1wiKX1nZXRTdHJlYW1JZCgpe3JldHVybiB0aGlzLl9zdHJlYW1JZH1nZXRUcmFja0lkKCl7cmV0dXJuIHRoaXMuX2lkfWdldFVzZXJJZCgpe3JldHVybiB0aGlzLl91c2VySWR9X19pbm5lckdldE1lZGlhU3RyZWFtVHJhY2soKXtyZXR1cm4gdGhpcy5fbXNUcmFja31nZXRUYWcoKXtyZXR1cm4gdGhpcy5fdGFnfWlzTG9jYWxUcmFjaygpe3JldHVybiB0aGlzLl9pc0xvY2FsVHJhY2t9aXNWaWRlb1RyYWNrKCl7cmV0dXJuXCJ2aWRlb1wiPT09dGhpcy5fa2luZH1pc0F1ZGlvVHJhY2soKXtyZXR1cm5cImF1ZGlvXCI9PT10aGlzLl9raW5kfWlzUmVhZHkoKXt2YXIgZTtyZXR1cm5cImxpdmVcIj09PShudWxsPT09KGU9dGhpcy5fbXNUcmFjayl8fHZvaWQgMD09PWU/dm9pZCAwOmUucmVhZHlTdGF0ZSl9X19pbm5lclNldE1lZGlhU3RyZWFtVHJhY2soZSl7dGhpcy5fbXNUcmFjaz1lLHRoaXMuX3NldExvY2FsTXV0ZWQodGhpcy5fbG9jYWxNdXRlZCk7Y29uc3QgdD10aGlzLl9tc1N0cmVhbT10aGlzLl9tc1N0cmVhbXx8bmV3IE1lZGlhU3RyZWFtLHI9dC5nZXRUcmFja3MoKVswXTtyJiZ0LnJlbW92ZVRyYWNrKHIpLGU/dC5hZGRUcmFjayhlKTp0aGlzLl9lbGVtZW50JiYodGhpcy5fZWxlbWVudC5wYXVzZSgpLHRoaXMuX2VsZW1lbnQuc3JjT2JqZWN0PW51bGwpfV9zZXRMb2NhbE11dGVkKGUpe3RoaXMuX21zVHJhY2smJih0aGlzLl9tc1RyYWNrLmVuYWJsZWQ9IWUpLHRoaXMuX2xvY2FsTXV0ZWQ9ZX1tdXRlKCl7Qy5pbmZvKGBzZXQgJHt0aGlzLl9pZH0gZW5hYmxlZDogZmFsc2VgKSx0aGlzLl9zZXRMb2NhbE11dGVkKCEwKX11bm11dGUoKXtDLmluZm8oYHNldCAke3RoaXMuX2lkfSBlbmFibGVkOiB0cnVlYCksdGhpcy5fc2V0TG9jYWxNdXRlZCghMSl9aXNMb2NhbE11dGVkKCl7cmV0dXJuIHRoaXMuX2xvY2FsTXV0ZWR9aXNNQ1VUcmFjaygpe3JldHVybiBCb29sZWFuKHRoaXMuX3Jvb21JZCl9aXNPd25lck11dGVkKCl7cmV0dXJuIHRoaXMuX3JlbW90ZU11dGVkfXBsYXkoZSx0KXtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2lmKCF0aGlzLl9tc1RyYWNrKXJldHVybiBDLndhcm4oYHRoZSB0cmFjayBpcyBub3QgcmVhZHkgdG8gcGxheSAtPiBpZDogJHt0aGlzLl9pZH1gKSx7Y29kZTpULlRSQUNLX05PVF9SRUFEWX07aWYoXCJlbmRlZFwiPT09dGhpcy5fbXNUcmFjay5yZWFkeVN0YXRlJiZDLndhcm4oYHRoZSB0cmFjaydzIHJlYWR5U3RhdGUgaXMgJ2VuZGVkJyAtPiBpZDogJHt0aGlzLl9pZH1gKSxudWxsPT10P3ZvaWQgMDp0LnZvbHVtZSl7aWYoISgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uaXNOdW1iZXIpKG51bGw9PXQ/dm9pZCAwOnQudm9sdW1lKSlyZXR1cm4gQy5lcnJvcihgJHtudWxsPT10P3ZvaWQgMDp0LnZvbHVtZX0gaXMgbm90IGEgbnVtYmVyLCB0aGUgdmFsaWQgcmFuZ2Ugb2Ygb3B0aW9ucy52b2x1bWUgaXMgMC0xMDBgKSx7Y29kZTpULlBBUkFNU19FUlJPUn07KG51bGw9PXQ/dm9pZCAwOnQudm9sdW1lKTwwJiYodC52b2x1bWU9MCxDLndhcm4oXCJ0aGUgdmFsaWQgcmFuZ2Ugb2Ygb3B0aW9ucy52b2x1bWUgaXMgMC0xMDAsIHRoZSB2YWx1ZSBvZiB2b2x1bWUgaGFzIGJlZW4gc2V0IDBcIikpLChudWxsPT10P3ZvaWQgMDp0LnZvbHVtZSk+MTAwJiYodC52b2x1bWU9MTAwLEMud2FybihcInRoZSB2YWxpZCByYW5nZSBvZiBvcHRpb25zLnZvbHVtZSBpcyAwLTEwMCwgdGhlIHZhbHVlIG9mIHZvbHVtZSBoYXMgYmVlbiBzZXQgMTAwXCIpKX1pZihudWxsPT10P3ZvaWQgMDp0LmF1ZGlvRGV2aWNlSWQpe2lmKCEoeWllbGQgWWUuZ2V0U3BlYWtlcnMoKSkubWFwKChlPT5lLmRldmljZUlkKSkuaW5jbHVkZXModC5hdWRpb0RldmljZUlkKSlyZXR1cm4gQy5lcnJvcihgdGhlIG9wdGlvbnMuYXVkaW9EZXZpY2VJZCBpcyBpbnZhbGlkIC0tXFx4M2UgJHt0LmF1ZGlvRGV2aWNlSWR9YCkse2NvZGU6VC5QQVJBTVNfRVJST1J9fWNvbnN0IGk9dGhpcy5pc1ZpZGVvVHJhY2soKTtpZihpJiYoIWV8fCEoZSBpbnN0YW5jZW9mIEhUTUxWaWRlb0VsZW1lbnQpKSlyZXR1cm4gQy5lcnJvcihgdGhlIHZpZGVvIHRyYWNrIG5lZWQgYW4gPHZpZGVvPiB0byBwbGF5IC0+IGlkOiAke3RoaXMuX2lkfWApLHtjb2RlOlQuVklERU9fVFJBQ0tfTUlTU19NRURJQV9FTEVNRU5UfTt0aGlzLl9lbGVtZW50PWk/ZTp0aGlzLl9lbGVtZW50fHxuZXcgQXVkaW8sdGhpcy5fbG9jYWxNdXRlZCYmdGhpcy5fc2V0TG9jYWxNdXRlZCghMSksdGhpcy5fZWxlbWVudC5zcmNPYmplY3QmJnRoaXMuX2VsZW1lbnQuc3JjT2JqZWN0PT09dGhpcy5fbXNTdHJlYW18fHRoaXMuX2VsZW1lbnQucGF1c2UoKSx0aGlzLl9lbGVtZW50Lm9ubG9hZHN0YXJ0PWU9Pnt2YXIgdDtDLmRlYnVnKGBIVE1MTWVkaWFFbGVtZW50IG9ubG9hZHN0YXJ0IC0+IGlkOiAke251bGw9PT0odD1lLnRhcmdldCl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuaWR9LCB0cmFja0lkOiAke3RoaXMuX2lkfWApfSx0aGlzLl9lbGVtZW50Lm9uZHVyYXRpb25jaGFuZ2U9ZT0+e3ZhciB0O0MuZGVidWcoYEhUTUxNZWRpYUVsZW1lbnQgb25kdXJhdGlvbmNoYW5nZSAtPiBpZDogJHtudWxsPT09KHQ9ZS50YXJnZXQpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmlkfSwgdHJhY2tJZDogJHt0aGlzLl9pZH1gKX0sdGhpcy5fZWxlbWVudC5vbmxvYWRlZG1ldGFkYXRhPWU9Pnt2YXIgdDtDLmRlYnVnKGBIVE1MTWVkaWFFbGVtZW50IG9ubG9hZGVkbWV0YWRhdGEgLT4gaWQ6ICR7bnVsbD09PSh0PWUudGFyZ2V0KXx8dm9pZCAwPT09dD92b2lkIDA6dC5pZH0sIHRyYWNrSWQ6ICR7dGhpcy5faWR9YCl9LHRoaXMuX2VsZW1lbnQub25sb2FkZWRkYXRhPWU9Pnt2YXIgdDtDLmRlYnVnKGBIVE1MTWVkaWFFbGVtZW50IG9ubG9hZGVkZGF0YSAtPiBpZDogJHtudWxsPT09KHQ9ZS50YXJnZXQpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmlkfSwgdHJhY2tJZDogJHt0aGlzLl9pZH1gKX0sdGhpcy5fZWxlbWVudC5vbmFib3J0PWU9Pnt2YXIgdDtDLmluZm8oYEhUTUxNZWRpYUVsZW1lbnQgb25hYm9ydCAtPiBpZDogJHtudWxsPT09KHQ9ZS50YXJnZXQpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmlkfSwgdHJhY2tJZDogJHt0aGlzLl9pZH1gKX0sdGhpcy5fZWxlbWVudC5vbmNhbnBsYXk9ZT0+e3ZhciB0O0MuaW5mbyhgSFRNTE1lZGlhRWxlbWVudCBvbmNhbnBsYXkgLT4gaWQ6ICR7bnVsbD09PSh0PWUudGFyZ2V0KXx8dm9pZCAwPT09dD92b2lkIDA6dC5pZH0sIHRyYWNrSWQ6ICR7dGhpcy5faWR9YCl9LHRoaXMuX2VsZW1lbnQub252b2x1bWVjaGFuZ2U9ZT0+e3ZhciB0O2NvbnN0IHI9TWF0aC5mbG9vcigxMDAqKG51bGw9PT0odD1lLnRhcmdldCl8fHZvaWQgMD09PXQ/dm9pZCAwOnQudm9sdW1lKSk7Qy5pbmZvKGBIVE1MTWVkaWFFbGVtZW50IG9udm9sdW1lY2hhbmdlIC0+IHZvbHVtZTogJHtyfSwgdHJhY2tJZDogJHt0aGlzLl9pZH1gKX0sdGhpcy5fZWxlbWVudC5zcmNPYmplY3Q9dGhpcy5fbXNTdHJlYW0sdGhpcy5fZWxlbWVudC5hdXRvcGxheT0hMCxpJiYodGhpcy5fZWxlbWVudC5wbGF5c0lubGluZT0hMCx0aGlzLl9lbGVtZW50Lng1UGxheXNJbmxpbmU9ITAsdGhpcy5fZWxlbWVudC53ZWJraXRQbGF5c0lubGluZT0hMCksaXx8IShudWxsPT10P3ZvaWQgMDp0LnZvbHVtZSkmJjAhPT0obnVsbD09dD92b2lkIDA6dC52b2x1bWUpfHwodGhpcy5fZWxlbWVudC52b2x1bWU9KG51bGw9PXQ/dm9pZCAwOnQudm9sdW1lKS8xMDApO3RyeXsobnVsbD09dD92b2lkIDA6dC5hdWRpb0RldmljZUlkKSYmIWk/eWllbGQgdGhpcy5fZWxlbWVudC5zZXRTaW5rSWQodC5hdWRpb0RldmljZUlkKTp0aGlzLl9lbGVtZW50LnBsYXkoKX1jYXRjaChlKXtyZXR1cm5cIk5vIHBlcm1pc3Npb24gdG8gdXNlIHJlcXVlc3RlZCBkZXZpY2VcIj09PWUubWVzc2FnZT8oQy5lcnJvcihgc2V0U2lua0lkIGZhaWxlZCAtPiAke2UubWVzc2FnZX1gKSx7Y29kZTpULk5PX1BFUk1JU1NJT05fVE9fVVNFX1JFUVVFU1RFRF9ERVZJQ0V9KTooQy5lcnJvcihlKSx7Y29kZTpULlRSQUNLX1BMQVlfRVJST1J9KX1yZXR1cm57Y29kZTpULlNVQ0NFU1N9fSkpfV9faW5uZXJEZXN0cm95KCl7dGhpcy5fX2lubmVyU2V0TWVkaWFTdHJlYW1UcmFjayh2b2lkIDApfV9fcmVsZWFzZU1lZGlhRWxlbWVudCgpe3RoaXMuX2VsZW1lbnQmJih0aGlzLl9lbGVtZW50LnJlbW92ZSgpLHRoaXMuX2VsZW1lbnQuc3JjT2JqZWN0PW51bGwpfX1jbGFzcyB6ZSBleHRlbmRzIHFle2NvbnN0cnVjdG9yKGUsdCxyLGkpe3N1cGVyKGUsdCxyLCEwKSx0aGlzLl9pc1B1Ymxpc2hlZD0hMSx0aGlzLl9faW5uZXJTZXRNZWRpYVN0cmVhbVRyYWNrKGkpLGkub25lbmRlZD0oKT0+e2kub25lbmRlZD1udWxsLHRoaXMuZW1pdCh6ZS5FVkVOVF9MT0NBTF9UUkFDS19FTkQsdGhpcyksdGhpcy5yZW1vdmVBbGwoemUuRVZFTlRfTE9DQUxfVFJBQ0tfRU5EKX19X3NldExvY2FsTXV0ZWQoZSl7Y29uc3QgdD10aGlzLl9sb2NhbE11dGVkIT09ZTtzdXBlci5fc2V0TG9jYWxNdXRlZChlKSx0aGlzLl9yZW1vdGVNdXRlZD10aGlzLl9sb2NhbE11dGVkLHQmJnRoaXMuZW1pdCh6ZS5fX0lOTkVSX0VWRU5UX01VVEVEX0NIQU5HRV9fLHRoaXMpfV9faW5uZXJTZXRQdWJsaXNoZWQoZSl7dGhpcy5faXNQdWJsaXNoZWQ9ZX1pc1B1Ymxpc2hlZCgpe3JldHVybiB0aGlzLl9pc1B1Ymxpc2hlZH1kZXN0cm95KCl7dmFyIGU7Qy5pbmZvKGB0cmFjayBpcyBkZXN0cm95ZWQgLT4gdHJhY2tJZDogJHt0aGlzLmdldFRyYWNrSWQoKX1gKSxudWxsPT09KGU9dGhpcy5fbXNUcmFjayl8fHZvaWQgMD09PWV8fGUuc3RvcCgpLHN1cGVyLl9faW5uZXJEZXN0cm95KCksdGhpcy5pc0F1ZGlvVHJhY2soKSYmc3VwZXIuX19yZWxlYXNlTWVkaWFFbGVtZW50KCksdGhpcy5lbWl0KHplLl9fSU5ORVJfRVZFTlRfREVTVFJPWV9fLHRoaXMpfXNldEJpdHJhdGUoZT0wLHQ9MCxpPTApeyEoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmlzTnVtYmVyKShlKXx8ISgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uaXNOdW1iZXIpKHQpfHwhKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5pc051bWJlcikoaSl8fGU8PTB8fHQ8PTB8fGU8dD9DLmVycm9yKFwic2V0Qml0cmF0ZSBwYXJhbXMgZXJyb3IgLT5cIik6dGhpcy5fYml0cmF0ZUluZm89e21heDplLG1pbjp0LHN0YXJ0Oml9fWdldEJpdHJhdGUoKXt2YXIgZSx0O2NvbnN0e21pbjpyLG1heDppfT10aGlzLl9tc1RyYWNrP190KHRoaXMuX21zVHJhY2spOnttaW46MCxtYXg6MH07cmV0dXJue21pbjoobnVsbD09PShlPXRoaXMuX2JpdHJhdGVJbmZvKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5taW4pfHxyLG1heDoobnVsbD09PSh0PXRoaXMuX2JpdHJhdGVJbmZvKXx8dm9pZCAwPT09dD92b2lkIDA6dC5tYXgpfHxpfX19emUuRVZFTlRfTE9DQUxfVFJBQ0tfRU5EPVwibG9jYWwtdHJhY2stZW5kXCIsemUuX19JTk5FUl9FVkVOVF9NVVRFRF9DSEFOR0VfXz1cImlubmVyLW11dGVkLWNoYW5nZVwiLHplLl9fSU5ORVJfRVZFTlRfREVTVFJPWV9fPVwiaW5uZXItZGVzdHJveVwiO2NsYXNzIFFlIGV4dGVuZHMgemV7Y29uc3RydWN0b3IoZSx0LHIpe3N1cGVyKGUsdCxcImF1ZGlvXCIscil9c2V0Qml0cmF0ZShlLHQscil7Qy53YXJuKFwiYHNldEJpdHJhdGVgIGludmFsaWQgZm9yIGF1ZGlvIHRyYWNrXCIpfWdldEJpdHJhdGUoKXtyZXR1cm57c3RhcnQ6MzIsbWF4OjMyLG1pbjozMn19fWNsYXNzIFhlIGV4dGVuZHMgemV7Y29uc3RydWN0b3IoZSx0LHIsaT0hMSl7c3VwZXIoZSx0LFwidmlkZW9cIixyKSx0aGlzLl9pc1Rpbnk9aX1fX2lzVGlueSgpe3JldHVybiB0aGlzLl9pc1Rpbnl9Z2V0U3RyZWFtSWQoKXtjb25zdCBlPXN1cGVyLmdldFN0cmVhbUlkKCk7cmV0dXJuIHRoaXMuX2lzVGlueT9gJHtlfV90aW55YDplfWdldFRyYWNrSWQoKXtjb25zdCBlPXN1cGVyLmdldFRyYWNrSWQoKTtyZXR1cm4gdGhpcy5faXNUaW55P2Ake2V9X3RpbnlgOmV9fWNsYXNzIFplIGV4dGVuZHMgemV7Y29uc3RydWN0b3IoZSx0LHIsaSxuKXtzdXBlcihlLHQscixpKSx0aGlzLl9yZXNvdXJjZT1uLFplLl9faW5uZXJTZXRNYXBwaW5nKHRoaXMuZ2V0VHJhY2tJZCgpLG4pfXN0YXRpYyBfX2lubmVyU2V0TWFwcGluZyhlLHQpe2NvbnN0IHI9dGhpcy5fbWFwcGluZy5nZXQodCl8fFtdO3IucHVzaChlKSx0aGlzLl9tYXBwaW5nLnNldCh0LHIpfXN0YXRpYyBfX2lubmVyUmVtb3ZlTWFwcGluZyhlLHQpe3ZhciByLGk7Y29uc3Qgbj1udWxsPT09KHI9dGhpcy5fbWFwcGluZy5nZXQodCkpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLmZpbHRlcigodD0+dCE9PWUpKTtuJiZuLmxlbmd0aD4wP3RoaXMuX21hcHBpbmcuc2V0KHQsbik6KHRoaXMuX21hcHBpbmcuZGVsZXRlKHQpLHQucGF1c2UoKSx0LnNyYz1cIlwiLG51bGw9PT0oaT10LnBhcmVudE5vZGUpfHx2b2lkIDA9PT1pfHxpLnJlbW92ZUNoaWxkKHQpKX1kZXN0cm95KCl7dGhpcy5pc0F1ZGlvVHJhY2soKSYmdGhpcy5tdXRlKCksWmUuX19pbm5lclJlbW92ZU1hcHBpbmcodGhpcy5nZXRUcmFja0lkKCksdGhpcy5fcmVzb3VyY2UpLHN1cGVyLmRlc3Ryb3koKX19WmUuX21hcHBpbmc9bmV3IE1hcDtjbGFzcyBldCBleHRlbmRzIFple2NvbnN0cnVjdG9yKGUsdCxyLGkpe3N1cGVyKGUsdCxcInZpZGVvXCIscixpKX19Y2xhc3MgdHQgZXh0ZW5kcyBaZXtjb25zdHJ1Y3RvcihlLHQscixpKXtzdXBlcihlLHQsXCJhdWRpb1wiLHIsaSl9X3NldExvY2FsTXV0ZWQoZSl7dGhpcy5fcmVzb3VyY2UmJih0aGlzLl9yZXNvdXJjZS5tdXRlZD1lKSxzdXBlci5fc2V0TG9jYWxNdXRlZChlKX1wbGF5KCl7cmV0dXJuIHRoaXMuX3NldExvY2FsTXV0ZWQoITEpLFByb21pc2UucmVzb2x2ZSh7Y29kZTpULlNVQ0NFU1N9KX19Y2xhc3MgcnQgZXh0ZW5kcyBRZXt9Y2xhc3MgaXQgZXh0ZW5kcyBYZXt9Y2xhc3MgbnQgZXh0ZW5kcyBYZXt9Y2xhc3Mgc3QgZXh0ZW5kcyBxZXtjb25zdHJ1Y3RvcihlLHQscixpKXtzdXBlcihlLHQsciwhMSxpKSx0aGlzLl9pc1N1YnNjcmliZWQ9ITF9X19pbm5lclNldFJlbW90ZU11dGVkKGUpe3RoaXMuX3JlbW90ZU11dGVkPWV9X19pbm5lclNldFN1YnNjcmliZWQoZSl7dGhpcy5faXNTdWJzY3JpYmVkPWV9aXNTdWJzY3JpYmVkKCl7cmV0dXJuIHRoaXMuX2lzU3Vic2NyaWJlZH19Y2xhc3Mgb3QgZXh0ZW5kcyBzdHtjb25zdHJ1Y3RvcihlLHQscil7c3VwZXIoZSx0LFwiYXVkaW9cIixyKX19Y2xhc3MgYXQgZXh0ZW5kcyBzdHtjb25zdHJ1Y3RvcihlLHQscil7c3VwZXIoZSx0LFwidmlkZW9cIixyKX19Y29uc3QgY3Q9KGUsdCk9Pih7bmFtZTplLGNvbnRlbnQ6SlNPTi5zdHJpbmdpZnkoe3VyaXM6dCxpZ25vcmU6ITB9KX0pLGR0PWU9PkpTT04uc3RyaW5naWZ5KGUpLHV0PWU9Pi9eW2EtekEtWlxcZC09XSskL2cudGVzdChlKSxsdD1cImh0dHA6XCIhPT1sb2NhdGlvbi5wcm90b2NvbHx8W1wibG9jYWxob3N0XCIsXCIxMjcuMC4wLjFcIl0uaW5jbHVkZXMobG9jYXRpb24uaG9zdG5hbWUpLGh0PWU9PntpZih2b2lkIDA9PT1lKXJldHVybiAwO2lmKCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uaXNOdW1iZXIpKGUpKXJldHVybiBlO2NvbnN0IHQ9ZTtyZXR1cm4gdC5leGFjdHx8dC5pZGVhbHx8dC5tYXh8fDB9LHB0PWU9Pntjb25zdCB0PWUuZ2V0Q29uc3RyYWludHMoKTtyZXR1cm57d2lkdGg6aHQodC53aWR0aCksaGVpZ2h0Omh0KHQuaGVpZ2h0KSxmcmFtZVJhdGU6aHQodC5mcmFtZVJhdGUpfX0sX3Q9ZT0+e2NvbnN0e3dpZHRoOnQsaGVpZ2h0OnIsZnJhbWVSYXRlOml9PXB0KGUpLG49R2UodCxyKSxzPVdlKGkpO3JldHVybnttaW46bi5taW5CaXRyYXRlKnMsbWF4Om4ubWF4Qml0cmF0ZSpzfX0sbXQ9ZT0+W2UubXNpZCxlLm1lZGlhVHlwZV0uam9pbihcIl9cIiksZnQ9ZT0+e2NvbnN0IHQ9ZS5zcGxpdChcIl9cIik7cmV0dXJue21lZGlhVHlwZTpwYXJzZUludCh0LnBvcCgpKSx0YWc6dC5wb3AoKSx1c2VySWQ6dC5qb2luKFwiX1wiKX19LHZ0PShlLHQpPT5bZSx0XS5qb2luKFwiX1wiKSxSdD1lPT5lLm1hcCgoZT0+T2JqZWN0LmFzc2lnbih7fSxlKSkpLGd0PShlLHQscj0hMSk9PntlPWUuc2xpY2UoKTtjb25zdCBpPVtdLG49W10scz1bXTtyZXR1cm4gdC5mb3JFYWNoKCh0PT57Y29uc3Qgbj1tdCh0KTtsZXQgbz1lLmZpbmRJbmRleCgoZT0+bXQoZSk9PT1uKSk7aWYociYmKG89ZS5maW5kSW5kZXgoKGU9PmUudXJpPT09dC51cmkpKSksLTE9PT1vKXJldHVybiB2b2lkIGkucHVzaCh0KTtjb25zdCBhPWVbb107YS51cmkhPT10LnVyaT9pLnB1c2godCk6YS5zdGF0ZSE9PXQuc3RhdGUmJnMucHVzaCh0KSxlLnNwbGljZShvLDEpfSkpLG4ucHVzaCguLi5lKSx7cHVibGlzaGVkTGlzdDppLHVucHVibGlzaGVkTGlzdDpuLG1vZGlmaWVkTGlzdDpzfX0sU3Q9KCk9PntsZXQgZT1cInh4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eFwiLnJlcGxhY2UoL1t4eV0vZywoZnVuY3Rpb24oZSl7Y29uc3QgdD0xNipNYXRoLnJhbmRvbSgpfDA7cmV0dXJuKFwieFwiPT09ZT90OjMmdHw4KS50b1N0cmluZygxNil9KSk7cmV0dXJuIGU9ZS5yZXBsYWNlKC8tL2csXCJcIikrXCIwXCIsZT1wYXJzZUludChlLDE2KSxlPShlPT57Y29uc3QgdD1cIjAxMjM0NTY3ODlhYmNkZWZnaGlna2xtbm9wcXJzdHV2d3h5ekFCQ0RFRkdISUdLTE1OT1BRUlNUVVZXWFlaKy9cIi5zcGxpdChcIlwiKSxyPXQubGVuZ3RoKzE7bGV0IGk9K2U7Y29uc3Qgbj1bXTtkb3tjb25zdCBlPWklcjtpPShpLWUpL3Isbi51bnNoaWZ0KHRbZV0pfXdoaWxlKGkpO3JldHVybiBuLmpvaW4oXCJcIil9KShlKSxlLmxlbmd0aD4yMiYmKGU9ZS5zbGljZSgwLDIyKSksZX0sQ3Q9ZT0+e2NvbnN0W3Qscl09ZS5zcGxpdChcIl9cIikubWFwKChlPT5wYXJzZUludChlLnJlcGxhY2UoL1teXFxkXS9nLFwiXCIpKSkpO3JldHVybnt3aWR0aDp0LGhlaWdodDpyfX0sVHQ9ZT0+ISFIZVtlXSxJdD1lPT4hIUJlW2VdLEV0PWU9PnBhcnNlSW50KGUucmVwbGFjZShcIkZQU19cIixcIlwiKSkseXQ9KCgpPT57Y29uc3R7YnJvd3NlcjplLHZlcnNpb246dCxzdXBwb3J0c1VuaWZpZWRQbGFuOnJ9PVZlLmJyb3dzZXJEZXRhaWxzO3JldHVybnticm93c2VyOmUsdmVyc2lvbjp0LHN1cHBvcnRzVW5pZmllZFBsYW46ITEhPT1yfX0pKCk7ZnVuY3Rpb24ga3QoKXtyZXR1cm5cImNhcHR1cmVTdHJlYW1cImluIEhUTUxNZWRpYUVsZW1lbnQucHJvdG90eXBlfHxcIm1vekNhcHR1cmVTdHJlYW1cImluIEhUTUxNZWRpYUVsZW1lbnQucHJvdG90eXBlfWZ1bmN0aW9uIGJ0KCl7cmV0dXJuXCJtZWRpYURldmljZXNcImluIG5hdmlnYXRvciYmXCJnZXREaXNwbGF5TWVkaWFcImluIG5hdmlnYXRvci5tZWRpYURldmljZXN9Y29uc3QgUHQ9ZT0+XCJbb2JqZWN0IE51bGxdXCI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSksT3Q9ZT0+MT09PWUudHlwZSxMdD1lPT57Y29uc3QgdD17fSxyPU9iamVjdC5rZXlzKGUudXNlcnMpO3JldHVybiByLmxlbmd0aCYmci5mb3JFYWNoKChyPT57Y29uc3QgaT1bXSxuPWUudXNlcnNbcl07aWYobi51cmlzKXRyeXtpLnB1c2goLi4uSlNPTi5wYXJzZShuLnVyaXMpKX1jYXRjaChlKXtDLndhcm4oYGludmFsaWQgdXNlciBkYXRhIC0+IHVzZXJJZDogJHtyfSwgdXNlckRhdGE6ICR7bn1gKX10W3JdPWl9KSksdH07dmFyIE50LER0OyFmdW5jdGlvbihlKXtlLlBVQkxJU0g9XCJSQ1JUQzpQdWJsaXNoUmVzb3VyY2VcIixlLlVOUFVCTElTSD1cIlJDUlRDOlVucHVibGlzaFJlc291cmNlXCIsZS5NT0RJRlk9XCJSQ1JUQzpNb2RpZnlSZXNvdXJjZVwiLGUuVE9UQUxfQ09OVEVOVF9SRVNPVVJDRT1cIlJDUlRDOlRvdGFsQ29udGVudFJlc291cmNlc1wiLGUuU1RBVEU9XCJSQ1JUQzpzdGF0ZVwiLGUuUk9PTV9OT1RJRlk9XCJSQ1JUQzpSb29tTnRmXCIsZS5VU0VSX05PVElGWT1cIlJDUlRDOlVzZXJOdGZcIixlLktJQ0s9XCJSQ1JUQzpraWNrXCIsZS5QS19JTlZJVEU9XCJSQ1JUQzppbnZpdGVcIixlLlBLX0lOVklURV9USU1FT1VUPVwiUkNSVEM6aW52aXRlVGltZW91dFwiLGUuUEtfQ0FOQ0VMX0lOVklURT1cIlJDUlRDOmNhbmNlbEludml0ZVwiLGUuUEtfSU5WSVRFX0FOU1dFUj1cIlJDUlRDOmFuc3dlckludml0ZVwiLGUuUEtfRU5EPVwiUkNSVEM6ZW5kSW52aXRlXCIsZS5PVEhFUl9ST09NX09GRkxJTkU9XCJSQ1JUQzpvdGhlclJvb21PZmZsaW5lXCJ9KE50fHwoTnQ9e30pKSxmdW5jdGlvbihlKXtlLlNVQ0NFU1M9XCJTdWNjZXNzXCIsZS5GQUlMPVwiRmFpbFwifShEdHx8KER0PXt9KSk7Y2xhc3MgQXR7Y29uc3RydWN0b3IoZSx0LHIsaT0xZTQpe3RoaXMuX3Jvb21JZD1lLHRoaXMuX3Jvb21Nb2RlPXQsdGhpcy5fY29udGV4dD1yLHRoaXMuX2dhcD1pLHRoaXMuX2xhdGVzdFRpbWVzdGFtcD1EYXRlLm5vdygpLHRoaXMuX3RpbWVyPW51bGx9c3RhcnQoKXtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3RoaXMuX3RpbWVyfHwodGhpcy5fdGltZXI9c2V0SW50ZXJ2YWwodGhpcy5fbG9vcC5iaW5kKHRoaXMpLHRoaXMuX2dhcCkpfSkpfV9sb29wKCl7dmFyIGUsdCxyO3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3Qgbj15aWVsZCBuZXcgUHJvbWlzZSgoZT0+e3RoaXMuX2NvbnRleHQucnRjUGluZyh0aGlzLl9yb29tSWQsdGhpcy5fcm9vbU1vZGUpLnRoZW4oZSkuY2F0Y2goKHQ9PntDLmVycm9yKGBydGNwaW5nIHJlY2VpdmUgdW5rbm93biBlcnJvciAtPiAke3R9YCksZShfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5VTktOT1dOKX0pKSxzZXRUaW1lb3V0KGUsMWU0LF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlRJTUVPVVQpfSkpLHM9RGF0ZS5ub3coKTtpZihuPT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUylyZXR1cm4gdGhpcy5fbGF0ZXN0VGltZXN0YW1wPXMsdm9pZChudWxsPT09KGU9dGhpcy5vblBpbmdSZXN1bHQpfHx2b2lkIDA9PT1lfHxlLmNhbGwodGhpcyxEdC5TVUNDRVNTKSk7bnVsbD09PSh0PXRoaXMub25QaW5nUmVzdWx0KXx8dm9pZCAwPT09dHx8dC5jYWxsKHRoaXMsRHQuRkFJTCksQy53YXJuKGBydGNwaW5nIGZhaWxlZCAtPiBjb2RlOiAke259YCksKDQwMDAzPT09bnx8cy10aGlzLl9sYXRlc3RUaW1lc3RhbXA+NmU0KSYmKHRoaXMuc3RvcCgpLG51bGw9PT0ocj10aGlzLm9uRmFpbGVkKXx8dm9pZCAwPT09cnx8ci5jYWxsKHRoaXMsNDAwMDM9PT1uKSl9KSl9c3RvcCgpe3RoaXMuX3RpbWVyJiYoY2xlYXJJbnRlcnZhbCh0aGlzLl90aW1lciksdGhpcy5fdGltZXI9bnVsbCl9fXZhciBNdDshZnVuY3Rpb24oZSl7ZVtlLk5PUk1BTD0xXT1cIk5PUk1BTFwiLGVbZS5USU5ZPTJdPVwiVElOWVwifShNdHx8KE10PXt9KSk7Y29uc3QgeHQ9KGUsdCk9Pk1hdGgucm91bmQoOCp0L2UpLFV0PShlLHQ9Mik9Pntjb25zdCByPTEwKip0O3JldHVybiBNYXRoLnJvdW5kKGUqcikvcn0sd3Q9KGUsdD0yKT0+e2U+MSYmKGUvPTMyNzY3KTtjb25zdCByPTEwKip0O3JldHVybiBNYXRoLmNlaWwoZSpyKX0sJHQ9KGUsdCxyLGkpPT57aWYoMD09PXQpcmV0dXJuIDA7aWYoIXJ8fCFpKXJldHVybiBVdChlL3QsMyk7Y29uc3Qgbj10LWk7aWYoMD09PW4pcmV0dXJuIDA7Y29uc3Qgcz1lLXI7cmV0dXJuIHM8MHx8bjwwPzA6VXQocy9uLDMpfSxqdD1lPT57Y29uc3R7aml0dGVyOnQscnR0OnIscGFja2V0c0xvc3RSYXRlOml9PWU7cmV0dXJuIVB0KHQpfHwhUHQocil8fDAhPT1pfTtjbGFzcyBWdHtjb25zdHJ1Y3RvcihlLHQpe3RoaXMuX3J0Y1BlZXJDb25uPWUsdGhpcy5fc2RwU2VtYW50aWNzPXQsdGhpcy5fbGF0ZXN0UGFja2V0c1NlbnQ9e30sdGhpcy5fbGF0ZXN0Qnl0ZXNTZW50PXt9LHRoaXMuX2xhdGVzdEJ5dGVzUmVjdj17fSx0aGlzLl9sYXRlc3RQYWNrZXRzUmVjdj17fX11cGRhdGVCeXRlc1NlbnQoZSx0LHIpe2xldCBpLG47aWYodGhpcy5fbGF0ZXN0Qnl0ZXNTZW50W2VdJiZ0PHRoaXMuX2xhdGVzdEJ5dGVzU2VudFtlXS5ieXRlc1NlbnQmJnRoaXMuY2xlYXJMYXRlc3RwYWNrZXRzU2VudChbZV0pLHRoaXMuX2xhdGVzdEJ5dGVzU2VudFtlXSl7Y29uc3R7Ynl0ZXNTZW50OnMsdGltZXN0YW1wOm99PXRoaXMuX2xhdGVzdEJ5dGVzU2VudFtlXTtpPXQtcyxuPXItbyx0aGlzLl9sYXRlc3RCeXRlc1NlbnRbZV09e2J5dGVzU2VudDp0LHRpbWVzdGFtcDpyfX1lbHNlIGk9dCxuPTFlMyx0aGlzLl9sYXRlc3RCeXRlc1NlbnRbZV09e2J5dGVzU2VudDp0LHRpbWVzdGFtcDpyfTtyZXR1cm4geHQobixpKX11cGRhdGVCeXRlc1JlY3YoZSx0LHIpe2xldCBpLG47aWYodGhpcy5fbGF0ZXN0Qnl0ZXNSZWN2W2VdJiZ0PHRoaXMuX2xhdGVzdEJ5dGVzUmVjdltlXS5ieXRlc1JlY3YmJnRoaXMuY2xlYXJMYXRlc3RQYWNrZXRzUmVjdihbZV0pLHRoaXMuX2xhdGVzdEJ5dGVzUmVjdltlXSl7Y29uc3R7Ynl0ZXNSZWN2OnMsdGltZXN0YW1wOm99PXRoaXMuX2xhdGVzdEJ5dGVzUmVjdltlXTtpPXQtcyxuPXItbyx0aGlzLl9sYXRlc3RCeXRlc1JlY3ZbZV09e2J5dGVzUmVjdjp0LHRpbWVzdGFtcDpyfX1lbHNlIGk9dCxuPTFlMyx0aGlzLl9sYXRlc3RCeXRlc1JlY3ZbZV09e2J5dGVzUmVjdjp0LHRpbWVzdGFtcDpyfTtyZXR1cm4geHQobixpKX11cGRhdGVTZW5kZXJQYWNrZXRzTG9zdChlLHQscil7bGV0IGk7aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMuX2xhdGVzdFBhY2tldHNTZW50W2VdLFwicGFja2V0c1NlbnRcIikpe2NvbnN0e3BhY2tldHNMb3N0Om4scGFja2V0c1NlbnQ6c309dGhpcy5fbGF0ZXN0UGFja2V0c1NlbnRbZV07aT0kdCh0LHIsbixzKSx0aGlzLl9sYXRlc3RQYWNrZXRzU2VudFtlXS5wYWNrZXRzTG9zdD10LHRoaXMuX2xhdGVzdFBhY2tldHNTZW50W2VdLnBhY2tldHNTZW50PW49PT10P3M6cn1lbHNlIGk9JHQodCxyKSx0aGlzLl9sYXRlc3RQYWNrZXRzU2VudFtlXS5wYWNrZXRzTG9zdD10LHRoaXMuX2xhdGVzdFBhY2tldHNTZW50W2VdLnBhY2tldHNTZW50PXI7cmV0dXJuIGl9dXBkYXRlUmVjZWl2ZXJQYWNrZXRzTG9zdChlLHQscil7bGV0IGk7aWYodGhpcy5fbGF0ZXN0UGFja2V0c1JlY3ZbZV0pe2NvbnN0e3BhY2tldHNMb3N0Om4scGFja2V0c1JlY3Y6c309dGhpcy5fbGF0ZXN0UGFja2V0c1JlY3ZbZV07aT0kdCh0LHIrdCxuLHMrbil9ZWxzZSBpPSR0KHQscik7cmV0dXJuIHRoaXMuX2xhdGVzdFBhY2tldHNSZWN2W2VdPXtwYWNrZXRzTG9zdDp0LHBhY2tldHNSZWN2OnJ9LGl9Y2xlYXJMYXRlc3RwYWNrZXRzU2VudChlKXtlLmZvckVhY2goKGU9PntpZihwYXJzZUludChlLnNwbGl0KFwiX1wiKS5wb3AoKSk9PT1GZS5WSURFT19PTkxZKXtjb25zdCB0PWAke2V9X3RpbnlgO2RlbGV0ZSB0aGlzLl9sYXRlc3RQYWNrZXRzU2VudFt0XSxkZWxldGUgdGhpcy5fbGF0ZXN0Qnl0ZXNTZW50W3RdfWRlbGV0ZSB0aGlzLl9sYXRlc3RQYWNrZXRzU2VudFtlXSxkZWxldGUgdGhpcy5fbGF0ZXN0Qnl0ZXNTZW50W2VdfSkpfWNsZWFyTGF0ZXN0UGFja2V0c1JlY3YoZSl7ZS5mb3JFYWNoKChlPT57ZGVsZXRlIHRoaXMuX2xhdGVzdFBhY2tldHNSZWN2W2VdLGRlbGV0ZSB0aGlzLl9sYXRlc3RCeXRlc1JlY3ZbZV19KSl9cGFyc2VSVENTdGF0c1JlcG9ydChlKXtjb25zdCB0PWUua2V5cygpLHI9e307bGV0IGk9dC5uZXh0KCk7Zm9yKDshaS5kb25lOyl7Y29uc3Qgbj1pLnZhbHVlLHM9ZS5nZXQobik7L15SVENDb2RlY18vLnRlc3Qobil8fChyW25dPXMpLGk9dC5uZXh0KCl9cmV0dXJuIHJ9Zm9ybWF0UkNSVENTdGF0ZVJlcG9ydChlKXtyZXR1cm57c2VuZGVyczpbXSxyZWNlaXZlcnM6W119fWdldEF1ZGlvTGV2ZWxMaXN0KGUpe3JldHVybltdfWdldFJlc291cmNlSWRCeVBhcnNlU2RwKGUpe3ZhciB0LHI7Y29uc3QgaT1lLnNzcmMsbj1lLmtpbmR8fGUubWVkaWFUeXBlLHM9bnVsbD09PSh0PXRoaXMuX3J0Y1BlZXJDb25uLmN1cnJlbnRMb2NhbERlc2NyaXB0aW9uKXx8dm9pZCAwPT09dD92b2lkIDA6dC5zZHAsbz1udWxsPT09KHI9dGhpcy5fcnRjUGVlckNvbm4uY3VycmVudFJlbW90ZURlc2NyaXB0aW9uKXx8dm9pZCAwPT09cj92b2lkIDA6ci5zZHA7bGV0IGE7YT1cInVuaWZpZWQtcGxhblwiPT09dGhpcy5fc2RwU2VtYW50aWNzP25ldyBSZWdFeHAoXCJhPW1zaWQ6KC4qPykgXCIpOm5ldyBSZWdFeHAoYGE9c3NyYzoke2l9IG1zaWQ6KC4qPykgYCk7Y29uc3QgYz1udWxsPT1zP3ZvaWQgMDpzLnNwbGl0KFwiXFxyXFxubT1cIiksZD1udWxsPT1jP3ZvaWQgMDpjLmZpbHRlcigoZT0+ZS5pbmNsdWRlcyhgYT1zc3JjOiR7aX1gKSkpWzBdLHU9bnVsbD09ZD92b2lkIDA6ZC5tYXRjaChhKTtsZXQgbD11P3VbMV06XCJcIjtpZihsKXJldHVybmAke2x9XyR7XCJ2aWRlb1wiPT09bj8xOjB9YDtjb25zdCBoPW51bGw9PW8/dm9pZCAwOm8uc3BsaXQoXCJcXHJcXG5tPVwiKSxwPW51bGw9PWg/dm9pZCAwOmguZmlsdGVyKChlPT5lLmluY2x1ZGVzKGBhPXNzcmM6JHtpfWApKSlbMF0sXz1udWxsPT1wP3ZvaWQgMDpwLm1hdGNoKGEpO3JldHVybiBsPV8/X1sxXTpcIlwiLGAke2x9XyR7XCJ2aWRlb1wiPT09bj8xOjB9YH1pc1ZhbGlkU2VuZGVyKGUpe3ZhciB0O2NvbnN0IHI9bnVsbD09PSh0PXRoaXMuX3J0Y1BlZXJDb25uLmN1cnJlbnRMb2NhbERlc2NyaXB0aW9uKXx8dm9pZCAwPT09dD92b2lkIDA6dC5zZHAse3NzcmM6aX09ZTtyZXR1cm4hKG51bGw9PXI/dm9pZCAwOnIuc3BsaXQoXCJcXHJcXG5tPVwiKS5zb21lKChlPT5lLmluY2x1ZGVzKGkpJiZlLmluY2x1ZGVzKFwiYT1pbmFjdGl2ZVwiKSkpKX1pc1ZhbGlkUmVjZWl2ZXIoZSl7dmFyIHQ7Y29uc3Qgcj1udWxsPT09KHQ9dGhpcy5fcnRjUGVlckNvbm4uY3VycmVudFJlbW90ZURlc2NyaXB0aW9uKXx8dm9pZCAwPT09dD92b2lkIDA6dC5zZHAse3NzcmM6aX09ZTtyZXR1cm4hKG51bGw9PXI/dm9pZCAwOnIuc3BsaXQoXCJcXHJcXG5tPVwiKS5zb21lKChlPT5lLmluY2x1ZGVzKGkpJiZlLmluY2x1ZGVzKFwiYT1pbmFjdGl2ZVwiKSkpKX19Y2xhc3MgQnQgZXh0ZW5kcyBWdHtmb3JtYXRSQ1JUQ1N0YXRlUmVwb3J0KGUpe2NvbnN0IHQ9e3NlbmRlcnM6W10scmVjZWl2ZXJzOltdfSxyPU1hdGguZmxvb3IoZS5SVENQZWVyQ29ubmVjdGlvbi50aW1lc3RhbXApO3QudGltZXN0YW1wPXI7Y29uc3QgaT1PYmplY3Qua2V5cyhlKTtsZXQgbj0wLHM9MDtpLmZpbHRlcigoZT0+L15SVENPdXRib3VuZFJUUChWaWRlb3xBdWRpbylTdHJlYW1fLy50ZXN0KGUpKSkuZm9yRWFjaCgoaT0+e2NvbnN0IG89ZVtpXTtpZihcInVuaWZpZWQtcGxhblwiPT09dGhpcy5fc2RwU2VtYW50aWNzJiYhdGhpcy5pc1ZhbGlkU2VuZGVyKG8pKXJldHVybjtjb25zdHtpZDphLGtpbmQ6Yyx0cmFuc3BvcnRJZDpkLG1lZGlhU291cmNlSWQ6dSxyZW1vdGVJZDpsLHBhY2tldHNTZW50OmgsYnl0ZXNTZW50OnAsdHJhY2tJZDpfLGVuY29kZXJJbXBsZW1lbnRhdGlvbjptLHBsaUNvdW50OmYsbmFja0NvdW50OnYsZmlyQ291bnQ6Un09bztpZighXylyZXR1cm47bGV0e2ZyYW1lc1BlclNlY29uZDpnLGZyYW1lV2lkdGg6UyxmcmFtZUhlaWdodDpDfT1vO1widmlkZW9cIiE9PWN8fFN8fEN8fGd8fChTPWVbX10uZnJhbWVXaWR0aCxDPWVbX10uZnJhbWVIZWlnaHQsZz11P2VbdV0uZnJhbWVzUGVyU2Vjb25kOm51bGwpO2NvbnN0IFQ9ZVtsXTtsZXQgST1udWxsLEU9bnVsbCx5PTA7VCYmKEk9VC5qaXR0ZXIsRT1ULnJvdW5kVHJpcFRpbWUseT1ULnBhY2tldHNMb3N0KSxuKz15O2NvbnN0IGs9dGhpcy5nZXRSZXNvdXJjZUlkQnlQYXJzZVNkcChvKSxiPXU/ZVt1XS5hdWRpb0xldmVsOmVbX10uYXVkaW9MZXZlbDtsZXQgUD1udWxsOyF0aGlzLl9sYXRlc3RQYWNrZXRzU2VudFtrXSYmKHRoaXMuX2xhdGVzdFBhY2tldHNTZW50W2tdPXt9KSxUP1A9dGhpcy51cGRhdGVTZW5kZXJQYWNrZXRzTG9zdChrLHksaCk6dGhpcy5fbGF0ZXN0UGFja2V0c1NlbnRba10uY3J0UGFja2V0c1NlbnQ9aDtsZXQgTz10aGlzLnVwZGF0ZUJ5dGVzU2VudChrLHAscik7TzwwJiYoTz0wKSxzKz1PLHQuc2VuZGVycy5wdXNoKHtpZDphLHRyYWNrSWQ6ayxraW5kOmMscGFja2V0c0xvc3RSYXRlOlAscmVtb3RlUmVzb3VyY2U6ITEsYXVkaW9MZXZlbDpifHwwPT09Yj93dChiKTpudWxsLGZyYW1lV2lkdGg6UyxmcmFtZUhlaWdodDpDLGZyYW1lUmF0ZTpnLGJpdHJhdGU6TyxqaXR0ZXI6ST9NYXRoLnJvdW5kKDFlMypJKTpJLHJ0dDpFLGVuY29kZXJJbXBsZW1lbnRhdGlvbjptLHBsaUNvdW50OmYsbmFja0NvdW50OnYsZ29vZ0ZpcnNTZW50Oi0xLHNhbXBsaW5nUmF0ZTotMSxnb29nUmVuZGVyRGVsYXlNczotMSx0cmFja1N0YXRlOi0xfSl9KSk7aS5maWx0ZXIoKGU9Pi9SVENSZW1vdGVJbmJvdW5kUnRwKFZpZGVvfEF1ZGlvKVN0cmVhbV8vLnRlc3QoZSkpKS5mb3JFYWNoKChyPT57Y29uc3R7bG9jYWxJZDppLGppdHRlcjpuLHJvdW5kVHJpcFRpbWU6cyxwYWNrZXRzTG9zdDpvfT1lW3JdLGE9dC5zZW5kZXJzLmZpbHRlcigoZT0+ZS5pZD09PWkpKVswXTtpZihhJiYhanQoYSkpe2NvbnN0IHQ9dGhpcy5nZXRSZXNvdXJjZUlkQnlQYXJzZVNkcChlW2EuaWRdKTthLmppdHRlcj1NYXRoLnJvdW5kKDFlMypuKSxhLnJ0dD1zO2NvbnN0IHI9dGhpcy5fbGF0ZXN0UGFja2V0c1NlbnRbdF0uY3J0UGFja2V0c1NlbnQ7YS5wYWNrZXRzTG9zdFJhdGU9dGhpcy51cGRhdGVTZW5kZXJQYWNrZXRzTG9zdCh0LG8scil9fSkpO2xldCBvPTA7aS5maWx0ZXIoKGU9Pi9eUlRDSW5ib3VuZFJUUChWaWRlb3xBdWRpbylTdHJlYW1fLy50ZXN0KGUpKSkuZm9yRWFjaCgoaT0+e2NvbnN0IHM9ZVtpXTtpZihcInVuaWZpZWQtcGxhblwiPT09dGhpcy5fc2RwU2VtYW50aWNzJiYhdGhpcy5pc1ZhbGlkUmVjZWl2ZXIocykpcmV0dXJuO2NvbnN0e3RyYWNrSWQ6YSxwYWNrZXRzTG9zdDpjLHBhY2tldHNSZWNlaXZlZDpkLGppdHRlcjp1LGJ5dGVzUmVjZWl2ZWQ6bCxmcmFtZXNQZXJTZWNvbmQ6aCxraW5kOnAsY29kZWNJbXBsZW1lbnRhdGlvbk5hbWU6XyxuYWNrQ291bnQ6bSxwbGlDb3VudDpmfT1zO2lmKCFhKXJldHVybjtsZXR7ZnJhbWVXaWR0aDp2LGZyYW1lSGVpZ2h0OlIsYXVkaW9MZXZlbDpnfT1zO1widmlkZW9cIj09PXA/dnx8Unx8KHY9ZVthXS5mcmFtZVdpZHRoLFI9ZVthXS5mcmFtZUhlaWdodCk6Z3x8KGc9ZVthXS5hdWRpb0xldmVsKSxuKz1jO2NvbnN0IFM9dGhpcy5nZXRSZXNvdXJjZUlkQnlQYXJzZVNkcChzKSxDPXRoaXMudXBkYXRlUmVjZWl2ZXJQYWNrZXRzTG9zdChTLGMsZCk7bGV0IFQ9dGhpcy51cGRhdGVCeXRlc1JlY3YoUyxsLHIpO1Q8MCYmKFQ9MCksbys9VCx0LnJlY2VpdmVycy5wdXNoKHt0cmFja0lkOlMsa2luZDpwLHBhY2tldHNMb3N0UmF0ZTpDLHJlbW90ZVJlc291cmNlOiEwLGF1ZGlvTGV2ZWw6Z3x8MD09PWc/d3QoZyk6bnVsbCxmcmFtZVdpZHRoOnYsZnJhbWVIZWlnaHQ6UixmcmFtZVJhdGU6aCxiaXRyYXRlOlQsaml0dGVyOnU/TWF0aC5yb3VuZCgxZTMqdSk6MCxjb2RlY0ltcGxlbWVudGF0aW9uTmFtZTpfLG5hY2tDb3VudDptLHBsaUNvdW50OmYscnR0Om51bGwsc2FtcGxpbmdSYXRlOi0xLGdvb2dGaXJzUmVjZWl2ZWQ6LTEsZ29vZ1JlbmRlckRlbGF5TXM6LTEsdHJhY2tTdGF0ZTotMX0pfSkpO2NvbnN0IGE9aS5maWx0ZXIoKGU9Pi9eUlRDVHJhbnNwb3J0Xy8udGVzdChlKSkpWzBdO2lmKGEpe2NvbnN0IHI9ZVthXSx7c2VsZWN0ZWRDYW5kaWRhdGVQYWlySWQ6aX09cjtpZihpKXtjb25zdCByPWVbaV0se2F2YWlsYWJsZU91dGdvaW5nQml0cmF0ZTphLGF2YWlsYWJsZUluY29taW5nQml0cmF0ZTpjLGN1cnJlbnRSb3VuZFRyaXBUaW1lOmQsbG9jYWxDYW5kaWRhdGVJZDp1LHJlbW90ZUNhbmRpZGF0ZUlkOmx9PXIsaD1lW3VdLHtpcDpwLHBvcnQ6XyxuZXR3b3JrVHlwZTptfT1oLGY9ZVtsXSx7aXA6dixwb3J0OlIscHJvdG9jb2w6Z309Zjt0LmljZUNhbmRpZGF0ZVBhaXI9e0lQOnAscG9ydDpfLG5ldHdvcmtUeXBlOm0scmVtb3RlSVA6dixyZW1vdGVQb3J0OlIscHJvdG9jb2w6ZyxiaXRyYXRlUmVjdjpvLGJpdHJhdGVTZW5kOnMscnR0OjFlMypkLGF2YWlsYWJsZU91dGdvaW5nQml0cmF0ZTphLGF2YWlsYWJsZUluY29taW5nQml0cmF0ZTpjLHRvdGFsUGFja2V0c0xvc3Q6bn0sdC5yZWNlaXZlcnMuZm9yRWFjaCgoZT0+e2UucnR0PWR9KSl9fXJldHVybiB0fWdldEF1ZGlvTGV2ZWxMaXN0KGUpe2NvbnN0IHQ9W10scj1PYmplY3Qua2V5cyhlKTtyLmZpbHRlcigoZT0+L15SVENPdXRib3VuZFJUUEF1ZGlvU3RyZWFtXy8udGVzdChlKSkpLmZvckVhY2goKHI9Pnt2YXIgaTtjb25zdCBuPWVbcl07aWYoXCJ1bmlmaWVkLXBsYW5cIj09PXRoaXMuX3NkcFNlbWFudGljcyYmIXRoaXMuaXNWYWxpZFNlbmRlcihuKSlyZXR1cm47Y29uc3R7bWVkaWFTb3VyY2VJZDpzLHRyYWNrSWQ6b309bixhPXRoaXMuZ2V0UmVzb3VyY2VJZEJ5UGFyc2VTZHAobiksYz1zJiZlW3NdP2Vbc10uYXVkaW9MZXZlbDoobnVsbD09PShpPWVbb10pfHx2b2lkIDA9PT1pP3ZvaWQgMDppLmF1ZGlvTGV2ZWwpfHxudWxsO3QucHVzaCh7dHJhY2tJZDphLGF1ZGlvTGV2ZWw6Y3x8MD09PWM/d3QoYyk6bnVsbH0pfSkpO3JldHVybiByLmZpbHRlcigoZT0+L15SVENJbmJvdW5kUlRQQXVkaW9TdHJlYW1fLy50ZXN0KGUpKSkuZm9yRWFjaCgocj0+e2NvbnN0IGk9ZVtyXTtpZihcInVuaWZpZWQtcGxhblwiPT09dGhpcy5fc2RwU2VtYW50aWNzJiYhdGhpcy5pc1ZhbGlkUmVjZWl2ZXIoaSkpcmV0dXJuO2NvbnN0e3RyYWNrSWQ6bn09aSxzPWkuYXVkaW9MZXZlbHx8ZVtuXS5hdWRpb0xldmVsLG89dGhpcy5nZXRSZXNvdXJjZUlkQnlQYXJzZVNkcChpKTt0LnB1c2goe3RyYWNrSWQ6byxhdWRpb0xldmVsOnN8fDA9PT1zP3d0KHMpOm51bGx9KX0pKSx0fX1jbGFzcyBIdCBleHRlbmRzIFZ0e2Zvcm1hdFJDUlRDU3RhdGVSZXBvcnQoZSl7Y29uc3QgdD0rbmV3IERhdGUscj17c2VuZGVyczpbXSxyZWNlaXZlcnM6W10sdGltZXN0YW1wOnR9O2xldCBpPTAsbj0wLHM9MDtmb3IoY29uc3QgbyBpbiBlKXtjb25zdCBhPWVbb10sYz1hLnR5cGU7aWYoXCJvdXRib3VuZC1ydHBcIj09PWMpe2lmKFwidW5pZmllZC1wbGFuXCI9PT10aGlzLl9zZHBTZW1hbnRpY3MmJiF0aGlzLmlzVmFsaWRTZW5kZXIoYSkpY29udGludWU7Y29uc3R7aWQ6cyxraW5kOm8sYnl0ZXNTZW50OmMscGFja2V0c1NlbnQ6ZCxiaXRyYXRlTWVhbjp1LGZyYW1lcmF0ZU1lYW46bCxuYWNrQ291bnQ6aCxwbGlDb3VudDpwLHJlbW90ZUlkOl99PWEse2ppdHRlcjptLHJvdW5kVHJpcFRpbWU6ZixwYWNrZXRzTG9zdDp2fT1fP2VbX106e2ppdHRlcjpudWxsLHJvdW5kVHJpcFRpbWU6bnVsbCxwYWNrZXRzTG9zdDowfSxSPXRoaXMuZ2V0UmVzb3VyY2VJZEJ5UGFyc2VTZHAoYSk7aSs9djtsZXQgZz1udWxsOyF0aGlzLl9sYXRlc3RQYWNrZXRzU2VudFtSXSYmKHRoaXMuX2xhdGVzdFBhY2tldHNTZW50W1JdPXt9KSxfP2c9dGhpcy51cGRhdGVTZW5kZXJQYWNrZXRzTG9zdChSLHYsZCk6dGhpcy5fbGF0ZXN0UGFja2V0c1NlbnRbUl0uY3J0UGFja2V0c1NlbnQ9ZDtsZXQgUz0wO1widmlkZW9cIj09PW8/dSYmKFM9TWF0aC5mbG9vcih1LzFlMykpOlM9dGhpcy51cGRhdGVCeXRlc1NlbnQoUixjLHQpLFM8MCYmKFM9MCksbis9UyxyLnNlbmRlcnMucHVzaCh7dHJhY2tJZDpSLGtpbmQ6byxwYWNrZXRzTG9zdFJhdGU6ZyxyZW1vdGVSZXNvdXJjZTohMSxhdWRpb0xldmVsOm51bGwsZnJhbWVXaWR0aDpudWxsLGZyYW1lSGVpZ2h0Om51bGwsZnJhbWVSYXRlOk1hdGguZmxvb3IobCksYml0cmF0ZTpTLGppdHRlcjptP01hdGgucm91bmQoMWUzKm0pOm51bGwscnR0OmYsZW5jb2RlckltcGxlbWVudGF0aW9uOm51bGwscGxpQ291bnQ6cCxuYWNrQ291bnQ6aCxnb29nRmlyc1NlbnQ6LTEsc2FtcGxpbmdSYXRlOi0xLGdvb2dSZW5kZXJEZWxheU1zOi0xLHRyYWNrU3RhdGU6LTF9KX1pZihcInJlbW90ZS1pbmJvdW5kLXJ0cFwiPT09Yyl7Y29uc3R7bG9jYWxJZDp0fT1hLGk9dGhpcy5nZXRSZXNvdXJjZUlkQnlQYXJzZVNkcChlW3RdKSxuPXIuc2VuZGVycy5maWx0ZXIoKGU9PmUudHJhY2tJZD09PWkpKVswXTtuJiZqdChuKSYmKG4uaml0dGVyPU1hdGgucm91bmQoMWUzKmEuaml0dGVyKSxuLnJ0dD1hLnJ0dCxuLnBhY2tldHNMb3N0UmF0ZT10aGlzLnVwZGF0ZVNlbmRlclBhY2tldHNMb3N0KGksYS5wYWNrZXRzTG9zdCx0aGlzLl9sYXRlc3RQYWNrZXRzU2VudFtpXS5jcnRQYWNrZXRzU2VudCkpfWlmKFwiaW5ib3VuZC1ydHBcIj09PWMpe2lmKFwidW5pZmllZC1wbGFuXCI9PT10aGlzLl9zZHBTZW1hbnRpY3MmJiF0aGlzLmlzVmFsaWRSZWNlaXZlcihhKSljb250aW51ZTtjb25zdHtpZDplLHBhY2tldHNMb3N0Om4sYnl0ZXNSZWNlaXZlZDpvLHBhY2tldHNSZWNlaXZlZDpjLGppdHRlcjpkLGZyYW1lcmF0ZU1lYW46dSxraW5kOmwsYml0cmF0ZU1lYW46aCxuYWNrQ291bnQ6cCxwbGlDb3VudDpffT1hLG09dGhpcy5nZXRSZXNvdXJjZUlkQnlQYXJzZVNkcChhKTtpKz1uO2NvbnN0IGY9dGhpcy51cGRhdGVSZWNlaXZlclBhY2tldHNMb3N0KG0sbixjKTtsZXQgdj0wO1widmlkZW9cIj09PWw/aCYmKHY9TWF0aC5mbG9vcihoLzFlMykpOnY9dGhpcy51cGRhdGVCeXRlc1JlY3YobSxvLHQpLHY8MCYmKHY9MCkscys9dixyLnJlY2VpdmVycy5wdXNoKHt0cmFja0lkOm0sa2luZDpsLHBhY2tldHNMb3N0UmF0ZTpmLHJlbW90ZVJlc291cmNlOiEwLGF1ZGlvTGV2ZWw6bnVsbCxmcmFtZVdpZHRoOm51bGwsZnJhbWVIZWlnaHQ6bnVsbCxmcmFtZVJhdGU6TWF0aC5mbG9vcih1KSxiaXRyYXRlOnYsaml0dGVyOmQ/TWF0aC5yb3VuZCgxZTMqZCk6bnVsbCxjb2RlY0ltcGxlbWVudGF0aW9uTmFtZTpudWxsLG5hY2tDb3VudDpwLHBsaUNvdW50Ol8scnR0Om51bGwsc2FtcGxpbmdSYXRlOi0xLGdvb2dGaXJzUmVjZWl2ZWQ6LTEsZ29vZ1JlbmRlckRlbGF5TXM6LTEsdHJhY2tTdGF0ZTotMX0pfWlmKFwiY2FuZGlkYXRlLXBhaXJcIj09PWMmJlwic3VjY2VlZGVkXCI9PT1hLnN0YXRlKXtjb25zdCB0PWVbYS5sb2NhbENhbmRpZGF0ZUlkXSx7YWRkcmVzczpvLHBvcnQ6Y309dCxkPWVbYS5yZW1vdGVDYW5kaWRhdGVJZF0se2FkZHJlc3M6dSxwb3J0OmwscHJvdG9jb2w6aH09ZDtyLmljZUNhbmRpZGF0ZVBhaXI9e0lQOm8scG9ydDpjLG5ldHdvcmtUeXBlOm51bGwscmVtb3RlSVA6dSxyZW1vdGVQb3J0OmwscHJvdG9jb2w6aCxiaXRyYXRlUmVjdjpzLGJpdHJhdGVTZW5kOm4scnR0Om51bGwsYXZhaWxhYmxlT3V0Z29pbmdCaXRyYXRlOm51bGwsYXZhaWxhYmxlSW5jb21pbmdCaXRyYXRlOm51bGwsdG90YWxQYWNrZXRzTG9zdDppfX19cmV0dXJuIHIuaWNlQ2FuZGlkYXRlUGFpciYmKHIuaWNlQ2FuZGlkYXRlUGFpci5iaXRyYXRlU2VuZD1uKSxyLmljZUNhbmRpZGF0ZVBhaXImJihyLmljZUNhbmRpZGF0ZVBhaXIuYml0cmF0ZVJlY3Y9cykscn1nZXRBdWRpb0xldmVsTGlzdChlKXtjb25zdCB0PVtdO2Zvcihjb25zdCByIGluIGUpe2NvbnN0IGk9ZVtyXSxuPWkudHlwZTtpZihcIm91dGJvdW5kLXJ0cFwiPT09bil7aWYoXCJ1bmlmaWVkLXBsYW5cIj09PXRoaXMuX3NkcFNlbWFudGljcyYmIXRoaXMuaXNWYWxpZFNlbmRlcihpKSljb250aW51ZTtjb25zdHtraW5kOmV9PWk7aWYoXCJ2aWRlb1wiPT09ZSljb250aW51ZTtjb25zdCByPXRoaXMuZ2V0UmVzb3VyY2VJZEJ5UGFyc2VTZHAoaSk7dC5wdXNoKHt0cmFja0lkOnIsYXVkaW9MZXZlbDpudWxsfSl9aWYoXCJpbmJvdW5kLXJ0cFwiPT09bil7aWYoXCJ1bmlmaWVkLXBsYW5cIj09PXRoaXMuX3NkcFNlbWFudGljcyYmIXRoaXMuaXNWYWxpZFJlY2VpdmVyKGkpKWNvbnRpbnVlO2NvbnN0e2tpbmQ6ZX09aTtpZihcInZpZGVvXCI9PT1lKWNvbnRpbnVlO2NvbnN0IHI9dGhpcy5nZXRSZXNvdXJjZUlkQnlQYXJzZVNkcChpKTt0LnB1c2goe3RyYWNrSWQ6cixhdWRpb0xldmVsOm51bGx9KX19cmV0dXJuIHR9fWNsYXNzIEZ0IGV4dGVuZHMgVnR7Zm9ybWF0UkNSVENTdGF0ZVJlcG9ydChlKXtjb25zdCB0PXtzZW5kZXJzOltdLHJlY2VpdmVyczpbXX0scj1NYXRoLmZsb29yKGUuUlRDUGVlckNvbm5lY3Rpb24udGltZXN0YW1wKTt0LnRpbWVzdGFtcD1yO2NvbnN0IGk9T2JqZWN0LmtleXMoZSk7bGV0IG49MCxzPTA7aS5maWx0ZXIoKGU9Pi9eUlRDT3V0Ym91bmRSVFAoVmlkZW98QXVkaW8pU3RyZWFtXy8udGVzdChlKSkpLmZvckVhY2goKGk9Pntjb25zdCBuPWVbaV07aWYoXCJ1bmlmaWVkLXBsYW5cIj09PXRoaXMuX3NkcFNlbWFudGljcyYmIXRoaXMuaXNWYWxpZFNlbmRlcihuKSlyZXR1cm47Y29uc3Qgbz10aGlzLmdldFJlc291cmNlSWRCeVBhcnNlU2RwKG4pLHttZWRpYVR5cGU6YSx0cmFuc3BvcnRJZDpjLHJlbW90ZUlkOmQscGFja2V0c1NlbnQ6dSxieXRlc1NlbnQ6bCx0cmFja0lkOmgsZW5jb2RlckltcGxlbWVudGF0aW9uOnAscGxpQ291bnQ6XyxuYWNrQ291bnQ6bSxmaXJDb3VudDpmfT1uO2lmKCFoKXJldHVybjtjb25zdHthdWRpb0xldmVsOnYsZnJhbWVIZWlnaHQ6UixmcmFtZVdpZHRoOmd9PWVbaF07bGV0IFM9dGhpcy51cGRhdGVCeXRlc1NlbnQobyxsLHIpO1M8MCYmKFM9MCkscys9Uyx0LnNlbmRlcnMucHVzaCh7dHJhY2tJZDpvLGtpbmQ6YSxwYWNrZXRzTG9zdFJhdGU6bnVsbCxyZW1vdGVSZXNvdXJjZTohMSxhdWRpb0xldmVsOnZ8fDA9PT12P3d0KHYpOm51bGwsZnJhbWVXaWR0aDpnLGZyYW1lSGVpZ2h0OlIsZnJhbWVSYXRlOm51bGwsYml0cmF0ZTpTLGppdHRlcjpudWxsLHJ0dDpudWxsLGVuY29kZXJJbXBsZW1lbnRhdGlvbjpwLHBsaUNvdW50Ol8sbmFja0NvdW50Om0sZ29vZ0ZpcnNTZW50Oi0xLHNhbXBsaW5nUmF0ZTotMSxnb29nUmVuZGVyRGVsYXlNczotMSx0cmFja1N0YXRlOi0xfSl9KSk7bGV0IG89MDtpLmZpbHRlcigoZT0+L15SVENJbmJvdW5kUlRQKFZpZGVvfEF1ZGlvKVN0cmVhbV8vLnRlc3QoZSkpKS5mb3JFYWNoKChpPT57Y29uc3Qgcz1lW2ldO2lmKFwidW5pZmllZC1wbGFuXCI9PT10aGlzLl9zZHBTZW1hbnRpY3MmJiF0aGlzLmlzVmFsaWRSZWNlaXZlcihzKSlyZXR1cm47Y29uc3R7dHJhY2tJZDphLHBhY2tldHNMb3N0OmMscGFja2V0c1JlY2VpdmVkOmQsaml0dGVyOnUsYnl0ZXNSZWNlaXZlZDpsLG1lZGlhVHlwZTpoLG5hY2tDb3VudDpwLHBsaUNvdW50Ol99PXMsbT10aGlzLmdldFJlc291cmNlSWRCeVBhcnNlU2RwKHMpO2lmKCFhKXJldHVybjtjb25zdHtmcmFtZUhlaWdodDpmLGZyYW1lV2lkdGg6dixhdWRpb0xldmVsOlJ9PWVbYV07bis9Yztjb25zdCBnPXRoaXMudXBkYXRlUmVjZWl2ZXJQYWNrZXRzTG9zdChtLGMsZCk7bGV0IFM9dGhpcy51cGRhdGVCeXRlc1JlY3YobSxsLHIpO1M8MCYmKFM9MCksbys9Uyx0LnJlY2VpdmVycy5wdXNoKHt0cmFja0lkOm0sa2luZDpoLHBhY2tldHNMb3N0UmF0ZTpnLHJlbW90ZVJlc291cmNlOiEwLGF1ZGlvTGV2ZWw6Unx8MD09PVI/d3QoUik6bnVsbCxmcmFtZVdpZHRoOnYsZnJhbWVIZWlnaHQ6ZixmcmFtZVJhdGU6bnVsbCxiaXRyYXRlOlMsaml0dGVyOnUsY29kZWNJbXBsZW1lbnRhdGlvbk5hbWU6bnVsbCxuYWNrQ291bnQ6cCxwbGlDb3VudDpfLHJ0dDpudWxsLHNhbXBsaW5nUmF0ZTotMSxnb29nRmlyc1JlY2VpdmVkOi0xLGdvb2dSZW5kZXJEZWxheU1zOi0xLHRyYWNrU3RhdGU6LTF9KX0pKTtjb25zdCBhPWkuZmlsdGVyKChlPT4vXlJUQ1RyYW5zcG9ydF8vLnRlc3QoZSkpKVswXTtpZihhKXtjb25zdCByPWVbYV0se3NlbGVjdGVkQ2FuZGlkYXRlUGFpcklkOml9PXI7aWYoaSl7Y29uc3Qgcj1lW2ldLHthdmFpbGFibGVPdXRnb2luZ0JpdHJhdGU6YSxhdmFpbGFibGVJbmNvbWluZ0JpdHJhdGU6YyxjdXJyZW50Um91bmRUcmlwVGltZTpkLGxvY2FsQ2FuZGlkYXRlSWQ6dSxyZW1vdGVDYW5kaWRhdGVJZDpsfT1yLGg9ZVt1XSx7YWRkcmVzczpwLHBvcnQ6X309aCxtPWVbbF0se2FkZHJlc3M6Zixwb3J0OnYscHJvdG9jb2w6Un09bTt0LmljZUNhbmRpZGF0ZVBhaXI9e0lQOnB8fG51bGwscG9ydDpfLG5ldHdvcmtUeXBlOm51bGwscmVtb3RlSVA6ZixyZW1vdGVQb3J0OnYscHJvdG9jb2w6UixiaXRyYXRlUmVjdjpvLGJpdHJhdGVTZW5kOnMscnR0OjFlMypkLGF2YWlsYWJsZU91dGdvaW5nQml0cmF0ZTphLGF2YWlsYWJsZUluY29taW5nQml0cmF0ZTpjLHRvdGFsUGFja2V0c0xvc3Q6bn0sdC5yZWNlaXZlcnMuZm9yRWFjaCgoZT0+e2UucnR0PWR9KSl9fXJldHVybiB0fWdldEF1ZGlvTGV2ZWxMaXN0KGUpe2NvbnN0IHQ9W10scj1PYmplY3Qua2V5cyhlKTtyLmZpbHRlcigoZT0+L15SVENPdXRib3VuZFJUUChWaWRlb3xBdWRpbylTdHJlYW1fLy50ZXN0KGUpKSkuZm9yRWFjaCgocj0+e2NvbnN0IGk9ZVtyXTtpZihcInVuaWZpZWQtcGxhblwiPT09dGhpcy5fc2RwU2VtYW50aWNzJiYhdGhpcy5pc1ZhbGlkU2VuZGVyKGkpKXJldHVybjtjb25zdHt0cmFja0lkOm4sbWVkaWFUeXBlOnN9PWk7aWYoXCJ2aWRlb1wiPT09cylyZXR1cm47Y29uc3Qgbz10aGlzLmdldFJlc291cmNlSWRCeVBhcnNlU2RwKGkpLGE9ZVtuXTt0LnB1c2goe3RyYWNrSWQ6byxhdWRpb0xldmVsOmF8fDA9PT1hP3d0KGEpOm51bGx9KX0pKTtyZXR1cm4gci5maWx0ZXIoKGU9Pi9eUlRDSW5ib3VuZFJUUChWaWRlb3xBdWRpbylTdHJlYW1fLy50ZXN0KGUpKSkuZm9yRWFjaCgocj0+e2NvbnN0IGk9ZVtyXTtpZihcInVuaWZpZWQtcGxhblwiPT09dGhpcy5fc2RwU2VtYW50aWNzJiYhdGhpcy5pc1ZhbGlkUmVjZWl2ZXIoaSkpcmV0dXJuO2NvbnN0e3RyYWNrSWQ6bixtZWRpYVR5cGU6c309aTtpZighbnx8XCJ2aWRlb1wiPT09cylyZXR1cm47Y29uc3R7YXVkaW9MZXZlbDpvfT1lW25dLGE9dGhpcy5nZXRSZXNvdXJjZUlkQnlQYXJzZVNkcChpKTt0LnB1c2goe3RyYWNrSWQ6YSxhdWRpb0xldmVsOm98fDA9PT1vP3d0KG8pOm51bGx9KX0pKSx0fX1jbGFzcyBLdHtjb25zdHJ1Y3RvcihlKXt0aGlzLl9wZWVyPWUsdGhpcy5fb3V0Ym91bmRTdHJlYW1zPXt9fXN0YXRpYyBzZXRTZHBTZW1hbnRpY3MoZSl7Y29uc3R7YnJvd3Nlcjp0LHZlcnNpb246cixzdXBwb3J0c1VuaWZpZWRQbGFuOml9PXl0O2k/L2Nocm9tZS9pLnRlc3QodCk/dGhpcy5fc2RwU2VtYW50aWNzPXI+OTI/XCJ1bmlmaWVkLXBsYW5cIjpyPDcyP1wicGxhbi1iXCI6ZTovZmlyZWZveC9pLnRlc3QodCk/dGhpcy5fc2RwU2VtYW50aWNzPVwidW5pZmllZC1wbGFuXCI6L3NhZmFyaS9pLnRlc3QodCk/dGhpcy5fc2RwU2VtYW50aWNzPXI8MTI/XCJwbGFuLWJcIjpcInVuaWZpZWQtcGxhblwiOnRoaXMuX3NkcFNlbWFudGljcz1cInVuaWZpZWQtcGxhblwiOnRoaXMuX3NkcFNlbWFudGljcz1cInBsYW4tYlwifXN0YXRpYyBnZXRTZHBTZW1hbnRpY3MoKXtyZXR1cm4gS3QuX3NkcFNlbWFudGljc31nZXRPdXRib3VuZFZpZGVvSW5mbygpe2NvbnN0IGU9W107Zm9yKGNvbnN0IHQgaW4gdGhpcy5fb3V0Ym91bmRTdHJlYW1zKXtjb25zdCByPXRoaXMuX291dGJvdW5kU3RyZWFtc1t0XS5nZXRWaWRlb1RyYWNrcygpWzBdO2lmKCFyKWNvbnRpbnVlO2NvbnN0IGk9L190aW55JC8udGVzdCh0KSx7d2lkdGg6bixoZWlnaHQ6c309cHQocik7ZS5wdXNoKHt0cmFja0lkOnIuaWQsc2ltdWxjYXN0Omk/TXQuVElOWTpNdC5OT1JNQUwscmVzb2x1dGlvbjpgJHtufXgke3N9YH0pfXJldHVybiBlfXNldFJlbW90ZUFuc3dlcihlKXtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2U9ZS5yZXBsYWNlKC9cXHMrXFxyXFxuL2csXCJcXHJcXG5cIik7dHJ5e3lpZWxkIHRoaXMuX3BlZXIuc2V0UmVtb3RlRGVzY3JpcHRpb24oe3R5cGU6XCJhbnN3ZXJcIixzZHA6ZX0pfWNhdGNoKGUpe3JldHVybiBDLmVycm9yKGUpLFQuU0VUX1JFTU9URV9ERVNDUklQVElPTl9GQUlMRUR9cmV0dXJuIFQuU1VDQ0VTU30pKX1nZXRTdGF0UGFyc3IoZSx0KXtyZXR1cm4vY2hyb21lL2kudGVzdCh5dC5icm93c2VyKT9uZXcgQnQoZSx0KTovRmlyZWZveC9pLnRlc3QoeXQuYnJvd3Nlcik/bmV3IEh0KGUsdCk6L1NhZmFyaS9pLnRlc3QoeXQuYnJvd3Nlcik/bmV3IEZ0KGUsdCk6bnVsbH19Y2xhc3MgR3QgZXh0ZW5kcyBLdHtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5zZW5kZXJzPXt9LHRoaXMuX2xvY2FsVHJhY2tzPVtdfWFkZExvY2FsVHJhY2soZSl7dGhpcy5fbG9jYWxUcmFja3MuaW5jbHVkZXMoZSl8fHRoaXMuX2xvY2FsVHJhY2tzLnB1c2goZSk7Y29uc3QgdD1lLmdldFN0cmVhbUlkKCkscj1lLl9faW5uZXJHZXRNZWRpYVN0cmVhbVRyYWNrKCksaT10aGlzLl9vdXRib3VuZFN0cmVhbXNbdF18fCh0aGlzLl9vdXRib3VuZFN0cmVhbXNbdF09bmV3IE1lZGlhU3RyZWFtKTtpLmdldFRyYWNrcygpLmZvckVhY2goKGU9PntlLmtpbmQ9PT1yLmtpbmQmJmkucmVtb3ZlVHJhY2soZSl9KSksaS5hZGRUcmFjayhyKTtjb25zdCBuPWUuZ2V0VHJhY2tJZCgpLHM9dGhpcy5zZW5kZXJzW25dO3M/cy5yZXBsYWNlVHJhY2socik6dGhpcy5zZW5kZXJzW25dPXRoaXMuX3BlZXIuYWRkVHJhY2socixpKX1yZW1vdmVMb2NhbFRyYWNrKGUpe2NvbnN0IHQ9dGhpcy5fbG9jYWxUcmFja3MuZmluZEluZGV4KCh0PT50PT09ZSkpO3Q+PTAmJnRoaXMuX2xvY2FsVHJhY2tzLnNwbGljZSh0LDEpO2NvbnN0IHI9ZS5nZXRUcmFja0lkKCksaT10aGlzLnNlbmRlcnNbcl07aSYmKGkucmVwbGFjZVRyYWNrKG51bGwpLHRoaXMuX3BlZXIucmVtb3ZlVHJhY2soaSksZGVsZXRlIHRoaXMuc2VuZGVyc1tyXSl9dXBkYXRlU3ViUmVtb3RlVHJhY2tzKGUpe311cGRhdGVSZWN2VHJhbnNjZWl2ZXJNYXAoZSx0KXt9c2V0Qml0cmF0ZShlLHQscil7dGhpcy5fbWF4Qml0cmF0ZT1lLHRoaXMuX21pbkJpdHJhdGU9dCx0aGlzLl9zdGFydEJpdHJhdGU9cnx8LjcqZX1jcmVhdGVPZmZlcihlKXtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0IHQ9eWllbGQgdGhpcy5fcGVlci5jcmVhdGVPZmZlcih7aWNlUmVzdGFydDplLG9mZmVyVG9SZWNlaXZlQXVkaW86ITAsb2ZmZXJUb1JlY2VpdmVWaWRlbzohMH0pO2Zvcihjb25zdCBlIGluIHRoaXMuX291dGJvdW5kU3RyZWFtcyl7Y29uc3Qgcj10aGlzLl9vdXRib3VuZFN0cmVhbXNbZV0uaWQ7dC5zZHA9dC5zZHAucmVwbGFjZShuZXcgUmVnRXhwKHIsXCJnXCIpLGUpfXJldHVybiB5aWVsZCB0aGlzLl9wZWVyLnNldExvY2FsRGVzY3JpcHRpb24odCkse3R5cGU6XCJvZmZlclwiLHNlbWFudGljczpcInBsYW4tYlwiLHNkcDp0LnNkcH19KSl9c2V0UmVtb3RlQW5zd2VyKGUpe2xldCB0PTAscj0wO3RoaXMuX2xvY2FsVHJhY2tzLmZvckVhY2goKGU9Pntjb25zdHttaW46aSxtYXg6bn09ZS5nZXRCaXRyYXRlKCk7cis9aSx0Kz1ufSkpLHQ9dGhpcy5fbWF4Qml0cmF0ZSYmdGhpcy5fbWF4Qml0cmF0ZT4wP01hdGgubWluKHQsdGhpcy5fbWF4Qml0cmF0ZSk6dCxyPXRoaXMuX21pbkJpdHJhdGUmJnRoaXMuX21pbkJpdHJhdGU+MD9NYXRoLm1heChyLHRoaXMuX21pbkJpdHJhdGUpOnI7Y29uc3QgaT10aGlzLl9zdGFydEJpdHJhdGV8fE1hdGgucm91bmQoLjcqdCksbj1gYj1BUzoke3R9YDtlPWUucmVwbGFjZSgvW1xcclxcbl0rbT12aWRlb1teXFxyXFxuXSsvLChlPT5gJHtlfVxcclxcbiR7bn1gKSk7Y29uc3Qgcz1bYDt4LWdvb2dsZS1taW4tYml0cmF0ZT0ke3J9YCxgO3gtZ29vZ2xlLW1heC1iaXRyYXRlPSR7dH1gLGA7eC1nb29nbGUtc3RhcnQtYml0cmF0ZT0ke2l9YF0uam9pbihcIlwiKTtyZXR1cm4gZT1lLnJlcGxhY2UoL1tcXHJcXG5dK1teXFxyXFxuXStwcm9maWxlLWxldmVsLWlkW15cXHJcXG5dKy9nLChlPT5lK3MpKSxzdXBlci5zZXRSZW1vdGVBbnN3ZXIoZSl9fWNsYXNzIEp0IGV4dGVuZHMgS3R7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMuX3NlbmRUcmFuc2NlaXZlcj17fSx0aGlzLl9sb2NhbFRyYWNrcz17fSx0aGlzLl9yZWN2QXVkaW89W10sdGhpcy5fcmVjdlZpZGVvPVtdLHRoaXMuX3JlY3ZUcmFuc2NlaXZlcj17fSx0aGlzLl9zdWJlZFRyYWNrcz1bXX1zZXRCaXRyYXRlKGUsdCxyKXtDLndhcm4oXCJ0aGUgaW50ZXJmYWNlIG5hbWVkIGBzZXRCaXRyYXRlYCBpcyBpbnZhbGlkIHdoaWxlIHNkcFNlbWFudGljcyB2YWx1ZSBpcyBgdW5pZmllZC1wbGFuYFwiKX1hZGRMb2NhbFRyYWNrKGUpe2NvbnN0IHQ9ZS5nZXRUcmFja0lkKCkscj1lLmdldFN0cmVhbUlkKCksaT1lLl9faW5uZXJHZXRNZWRpYVN0cmVhbVRyYWNrKCk7dGhpcy5fbG9jYWxUcmFja3NbdF09ZTtjb25zdCBuPXRoaXMuX291dGJvdW5kU3RyZWFtc1tyXXx8KHRoaXMuX291dGJvdW5kU3RyZWFtc1tyXT1uZXcgTWVkaWFTdHJlYW0pO24uZ2V0VHJhY2tzKCkuZm9yRWFjaCgoZT0+e2Uua2luZD09PWkua2luZCYmbi5yZW1vdmVUcmFjayhlKX0pKSxuLmFkZFRyYWNrKGkpO2NvbnN0IHM9dGhpcy5fc2VuZFRyYW5zY2VpdmVyW3RdO3M/KHMuc2VuZGVyLnJlcGxhY2VUcmFjayhpKSxzLmRpcmVjdGlvbj1cInNlbmRvbmx5XCIpOnRoaXMuX3NlbmRUcmFuc2NlaXZlclt0XT10aGlzLl9wZWVyLmFkZFRyYW5zY2VpdmVyKGkse2RpcmVjdGlvbjpcInNlbmRvbmx5XCIsc3RyZWFtczpbbl19KX1yZW1vdmVMb2NhbFRyYWNrKGUpe2NvbnN0IHQ9ZS5nZXRUcmFja0lkKCkscj1lLmdldFN0cmVhbUlkKCk7ZS5fX2lubmVyR2V0TWVkaWFTdHJlYW1UcmFjaygpLGRlbGV0ZSB0aGlzLl9sb2NhbFRyYWNrc1t0XTtjb25zdCBpPXRoaXMuX3NlbmRUcmFuc2NlaXZlclt0XTtpZighaSlyZXR1cm47aS5kaXJlY3Rpb249XCJpbmFjdGl2ZVwiLHRoaXMuX3BlZXIucmVtb3ZlVHJhY2soaS5zZW5kZXIpLGkuc2VuZGVyLnJlcGxhY2VUcmFjayhudWxsKTtjb25zdCBuPXRoaXMuX291dGJvdW5kU3RyZWFtc1tyXTsoZS5pc0F1ZGlvVHJhY2soKT9uLmdldEF1ZGlvVHJhY2tzKCk6bi5nZXRWaWRlb1RyYWNrcygpKS5mb3JFYWNoKChlPT5uLnJlbW92ZVRyYWNrKGUpKSk7Y29uc3Qgcz10aGlzLl9zZW5kVHJhbnNjZWl2ZXJbYCR7dH1fdGlueWBdO2lmKCFzfHxcImluYWN0aXZlXCI9PT1zLmRpcmVjdGlvbilyZXR1cm47cy5kaXJlY3Rpb249XCJpbmFjdGl2ZVwiO2NvbnN0IG89cy5zZW5kZXIsYT1vLnRyYWNrO3RoaXMuX3BlZXIucmVtb3ZlVHJhY2sobyksby5yZXBsYWNlVHJhY2sobnVsbCk7dGhpcy5fb3V0Ym91bmRTdHJlYW1zW2Ake3J9X3RpbnlgXS5yZW1vdmVUcmFjayhhKSxhLnN0b3AoKX11cGRhdGVSZWN2VHJhbnNjZWl2ZXJNYXAoZSx0KXtjb25zdHttZWRpYVR5cGU6cn09ZnQoZSk7dGhpcy5fcmVjdlRyYW5zY2VpdmVyW2VdPXQ7Y29uc3QgaT1yPT09RmUuQVVESU9fT05MWT90aGlzLl9yZWN2QXVkaW86dGhpcy5fcmVjdlZpZGVvLG49aS5maW5kSW5kZXgoKGU9PmU9PT10KSk7bj49MCYmaS5zcGxpY2UobiwxKX11cGRhdGVTdWJSZW1vdGVUcmFja3MoZSl7Y29uc3QgdD1lLnNsaWNlKCkscj10aGlzLl9zdWJlZFRyYWNrcy5zbGljZSgpO3RoaXMuX3N1YmVkVHJhY2tzPWUuc2xpY2UoKTtmb3IobGV0IGU9dC5sZW5ndGgtMTtlPj0wO2UtPTEpe2NvbnN0IGk9dFtlXSxuPXIuZmluZEluZGV4KChlPT5lPT09aSkpO24+PTAmJih0LnNwbGljZShlLDEpLHIuc3BsaWNlKG4sMSkpfXIubGVuZ3RoJiZyLmZvckVhY2goKGU9Pntjb25zdCB0PWUuZ2V0VHJhY2tJZCgpO2UuX19pbm5lclNldE1lZGlhU3RyZWFtVHJhY2sodm9pZCAwKTtjb25zdCByPXRoaXMuX3JlY3ZUcmFuc2NlaXZlclt0XTtyJiYoci5kaXJlY3Rpb249XCJpbmFjdGl2ZVwiKX0pKTtjb25zdCBpPXthdWRpbzowLHZpZGVvOjB9O3QubGVuZ3RoJiZ0LmZvckVhY2goKGU9Pntjb25zdCB0PWUuaXNBdWRpb1RyYWNrKCk/XCJhdWRpb1wiOlwidmlkZW9cIixyPXRoaXMuX3JlY3ZUcmFuc2NlaXZlcltlLmdldFRyYWNrSWQoKV07cj9yLmRpcmVjdGlvbj1cInJlY3Zvbmx5XCI6aVt0XSs9MX0pKTtmb3IobGV0IGU9dGhpcy5fcmVjdkF1ZGlvLmxlbmd0aDtlPGkuYXVkaW87ZSs9MSl0aGlzLl9yZWN2QXVkaW8ucHVzaCh0aGlzLl9wZWVyLmFkZFRyYW5zY2VpdmVyKFwiYXVkaW9cIix7ZGlyZWN0aW9uOlwicmVjdm9ubHlcIn0pKTtmb3IobGV0IGU9dGhpcy5fcmVjdlZpZGVvLmxlbmd0aDtlPGkudmlkZW87ZSs9MSl0aGlzLl9yZWN2VmlkZW8ucHVzaCh0aGlzLl9wZWVyLmFkZFRyYW5zY2VpdmVyKFwidmlkZW9cIix7ZGlyZWN0aW9uOlwicmVjdm9ubHlcIn0pKX1jcmVhdGVPZmZlcihlKXtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0IHQ9eWllbGQgdGhpcy5fcGVlci5jcmVhdGVPZmZlcih7aWNlUmVzdGFydDplfSk7bGV0IHI9dC5zZHA7Zm9yKGNvbnN0IGUgaW4gdGhpcy5fb3V0Ym91bmRTdHJlYW1zKXtjb25zdCB0PXRoaXMuX291dGJvdW5kU3RyZWFtc1tlXS5pZDtyPXIucmVwbGFjZShuZXcgUmVnRXhwKHQsXCJnXCIpLGUpfXJldHVybiByPShlPT5lLnNwbGl0KC9cXHJcXG4oPz1tPSkvKS5tYXAoKGU9PihlPT4vYT0ocmVjdm9ubHl8aW5hY3RpdmUpLy50ZXN0KGUpP2UucmVwbGFjZSgvXFxyXFxuYT0oc3NyY3xtc2lkKVteXFxyXFxuXSsvZyxcIlwiKTplKShlKSkpLmpvaW4oXCJcXHJcXG5cIikpKHIpLHI9ci5yZXBsYWNlKC9hPWljZS1vcHRpb25zOnRyaWNrbGUvZyxcImE9aWNlLW9wdGlvbnM6dHJpY2tsZVxcclxcbmE9aWNlLW9wdGlvbnM6cmVub21pbmF0aW9uXCIpLHQuc2RwPXIseWllbGQgdGhpcy5fcGVlci5zZXRMb2NhbERlc2NyaXB0aW9uKHQpLHt0eXBlOlwib2ZmZXJcIixzZW1hbnRpY3M6XCJ1bmlmaWVkLXBsYW5cIixzZHA6cn19KSl9c2V0UmVtb3RlQW5zd2VyKGUpe2U9ZS5zcGxpdCgvXFxyXFxuKD89bT0pLykubWFwKChlPT57dmFyIHQ7Y29uc3Qgcj1lLm1hdGNoKC9hPW1pZDpbXlxcc10rLyk7aWYoIXIpcmV0dXJuIGU7Y29uc3QgaT1yWzBdLnJlcGxhY2UoXCJhPW1pZDpcIixcIlwiKTtsZXQgbj1cIlwiO2Zvcihjb25zdCBlIGluIHRoaXMuX3NlbmRUcmFuc2NlaXZlcil7aWYodGhpcy5fc2VuZFRyYW5zY2VpdmVyW2VdLm1pZD09PWkpe249ZTticmVha319aWYoIW4pcmV0dXJuIGU7Y29uc3Qgcz1udWxsPT09KHQ9dGhpcy5fbG9jYWxUcmFja3Nbbl0pfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmdldEJpdHJhdGUoKTtpZighcylyZXR1cm4gZTtjb25zdHttYXg6byxtaW46YX09cyxjPW8mJm8+MD9zLnN0YXJ0fHwuNypvOjAsZD1bXTtpZihvJiZvPjAmJmQucHVzaChgO3gtZ29vZ2xlLW1heC1iaXRyYXRlPSR7b31gKSxhJiZhPjAmJmQucHVzaChgO3gtZ29vZ2xlLW1pbi1iaXRyYXRlPSR7YX1gKSxjPjAmJmQucHVzaChgO3gtZ29vZ2xlLXN0YXJ0LWJpdHJhdGU9JHtjfWApLDA9PT1kLmxlbmd0aClyZXR1cm4gZTtjb25zdCB1PWQuam9pbihcIlwiKTtyZXR1cm4gZS5yZXBsYWNlKC9bXFxyXFxuXStbXlxcclxcbl0rcHJvZmlsZS1sZXZlbC1pZFteXFxyXFxuXSsvZywoZT0+ZSt1KSl9KSkuam9pbihcIlxcclxcblwiKTtjb25zdCB0PS9bXFxyXFxuXStcXHJcXG5bXFxyXFxuXSsvZztyZXR1cm4gdC50ZXN0KGUpJiYoQy53YXJuKGBhbnN3ZXIgc2RwIGludmFsaWQgLT4gJHtKU09OLnN0cmluZ2lmeShlKX1gKSxlPWUucmVwbGFjZSh0LFwiXFxyXFxuXCIpKSxzdXBlci5zZXRSZW1vdGVBbnN3ZXIoZSl9fWNsYXNzIFd0IGV4dGVuZHMgX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FdmVudEVtaXR0ZXJ7Y29uc3RydWN0b3IoZSx0KXtzdXBlcigpLHRoaXMuX3JlVHJ5RXhjaGFuZ2U9ZSx0aGlzLl9wb2xhcmlzUmVwb3J0PXQsdGhpcy5wdWJMb2NhbFRyYWNrcz17fSx0aGlzLl9yZVRyeUV4Y2hhbmdlVGltZXI9bnVsbCx0aGlzLl9yZXBvcnRTdGF0c1RpbWVyPW51bGwsdGhpcy5fcmVwb3J0TGlzdGVuZXI9bnVsbDtjb25zdCByPUt0LmdldFNkcFNlbWFudGljcygpLGk9dGhpcy5fcnRjUGVlckNvbm49bmV3IFJUQ1BlZXJDb25uZWN0aW9uKHtzZHBTZW1hbnRpY3M6cn0pO3RoaXMuX3NkcFN0cmF0ZWd5PVwicGxhbi1iXCI9PT1yP25ldyBHdChpKTpuZXcgSnQoaSksdGhpcy5fcnRjUGVlckNvbm4ub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2U9dGhpcy5fb25JQ0VDb25uZWN0aW9uU3RhdGVDaGFuZ2UuYmluZCh0aGlzKSx0aGlzLl9ydGNQZWVyQ29ubi5vbmNvbm5lY3Rpb25zdGF0ZWNoYW5nZT10aGlzLl9vbkNvbm5lY3Rpb25TdGF0ZUNoYW5nZS5iaW5kKHRoaXMpLHRoaXMuX3J0Y1BlZXJDb25uLm9udHJhY2s9dGhpcy5fb25UcmFja1JlYWR5LmJpbmQodGhpcyksdGhpcy5yZXBvcnRQYXJzZXI9dGhpcy5fc2RwU3RyYXRlZ3kuZ2V0U3RhdFBhcnNyKHRoaXMuX3J0Y1BlZXJDb25uLHIpfWdldExvY2FsVHJhY2tzKCl7cmV0dXJuIE9iamVjdC52YWx1ZXModGhpcy5wdWJMb2NhbFRyYWNrcyl9X29uQ29ubmVjdGlvblN0YXRlQ2hhbmdlKCl7Qy5pbmZvKGBvbmNvbm5lY3Rpb25zdGF0ZWNoYW5nZSAtPiAke3RoaXMuX3J0Y1BlZXJDb25uLmNvbm5lY3Rpb25TdGF0ZX1gKX1fb25JQ0VDb25uZWN0aW9uU3RhdGVDaGFuZ2UoKXt2YXIgZSx0O0MuaW5mbyhgb25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2UgLT4gJHt0aGlzLl9ydGNQZWVyQ29ubi5pY2VDb25uZWN0aW9uU3RhdGV9YCksXCJjb25uZWN0ZWRcIj09PXRoaXMuX3J0Y1BlZXJDb25uLmljZUNvbm5lY3Rpb25TdGF0ZSYmKHRoaXMuX3JlcG9ydFN0YXRzVGltZXImJmNsZWFySW50ZXJ2YWwodGhpcy5fcmVwb3J0U3RhdHNUaW1lciksdGhpcy5fcmVwb3J0U3RhdHNUaW1lcj1zZXRJbnRlcnZhbCh0aGlzLl9yZXBvcnRIYW5kbGUuYmluZCh0aGlzKSwxZTMpKSxcImZhaWxlZFwiIT09dGhpcy5fcnRjUGVlckNvbm4uaWNlQ29ubmVjdGlvblN0YXRlJiZcImRpc2Nvbm5lY3RlZFwiIT09dGhpcy5fcnRjUGVlckNvbm4uaWNlQ29ubmVjdGlvblN0YXRlfHwoQy53YXJuKFwiaWNlY29uZW5jdGlvbiBzdGF0ZSBpcyBgZmFpbGVkYCwgZXhjaGFuZ2UgU0RQIHRvIHRyeSBhZ2Fpbi5cIiksdGhpcy5fcmVUcnlFeGNoYW5nZSgpLHRoaXMuX3JlVHJ5RXhjaGFuZ2VUaW1lcj1zZXRJbnRlcnZhbCh0aGlzLl9yZVRyeUV4Y2hhbmdlLDE1ZTMpKTt0cnl7bnVsbD09PSh0PW51bGw9PT0oZT10aGlzLl9yZXBvcnRMaXN0ZW5lcil8fHZvaWQgMD09PWU/dm9pZCAwOmUub25JQ0VDb25uZWN0aW9uU3RhdGVDaGFuZ2UpfHx2b2lkIDA9PT10fHx0LmNhbGwoZSx0aGlzLl9ydGNQZWVyQ29ubi5pY2VDb25uZWN0aW9uU3RhdGUpfWNhdGNoKGUpe0MuZXJyb3IoXCJvbklDRUNvbm5lY3Rpb25TdGF0ZUNoYW5nZSBlcnJvclwiLGUpfX1fb25UcmFja1JlYWR5KGUpe2lmKCFlLnN0cmVhbXMubGVuZ3RoKXJldHVybjtjb25zdCB0PVtlLnN0cmVhbXNbMF0uaWQsXCJhdWRpb1wiPT09ZS5yZWNlaXZlci50cmFjay5raW5kP0ZlLkFVRElPX09OTFk6RmUuVklERU9fT05MWV0uam9pbihcIl9cIik7dGhpcy5fdXBkYXRlUmVjdlRyYW5zY2VpdmVyTWFwKHQsZS50cmFuc2NlaXZlciksdGhpcy5lbWl0KFd0Ll9fSU5ORVJfRVZFTlRfVFJBQ0tfUkVBRFlfXyxlKX1zZXRCaXRyYXRlKGUsdCxyKXtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3RoaXMuX3NkcFN0cmF0ZWd5LnNldEJpdHJhdGUoZSx0LHIpfSkpfWNyZWF0ZU9mZmVyKGUpe3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3QgdD15aWVsZCB0aGlzLl9zZHBTdHJhdGVneS5jcmVhdGVPZmZlcihlKTtyZXR1cm4gQy5kZWJ1Zyhgb2ZmZXIgLT4gJHtKU09OLnN0cmluZ2lmeSh0LnNkcCl9YCksdH0pKX1zZXRSZW1vdGVBbnN3ZXIoZSl7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4gQy5kZWJ1ZyhgYW5zd2VyIC0+ICR7SlNPTi5zdHJpbmdpZnkoZSl9YCksdGhpcy5fc2RwU3RyYXRlZ3kuc2V0UmVtb3RlQW5zd2VyKGUpfSkpfWdldExvY2FsVHJhY2soZSl7cmV0dXJuIHRoaXMucHViTG9jYWxUcmFja3NbZV18fG51bGx9YWRkTG9jYWxUcmFjayhlKXt0aGlzLnB1YkxvY2FsVHJhY2tzW2UuZ2V0VHJhY2tJZCgpXT1lLHRoaXMuX3NkcFN0cmF0ZWd5LmFkZExvY2FsVHJhY2soZSksZS5vZmYoemUuX19JTk5FUl9FVkVOVF9NVVRFRF9DSEFOR0VfXyx0aGlzLl9vbkxvY2FsVHJhY2tNdXRlZCx0aGlzKSxlLm9mZih6ZS5fX0lOTkVSX0VWRU5UX0RFU1RST1lfXyx0aGlzLl9vbkxvY2FsVHJhY2tEZXN0cm9pZWQsdGhpcyksZS5vbih6ZS5fX0lOTkVSX0VWRU5UX01VVEVEX0NIQU5HRV9fLHRoaXMuX29uTG9jYWxUcmFja011dGVkLHRoaXMpLGUub24oemUuX19JTk5FUl9FVkVOVF9ERVNUUk9ZX18sdGhpcy5fb25Mb2NhbFRyYWNrRGVzdHJvaWVkLHRoaXMpfXJlbW92ZUxvY2FsVHJhY2tCeUlkKGUpe2NvbnN0IHQ9dGhpcy5nZXRMb2NhbFRyYWNrKGUpO3QmJnRoaXMucmVtb3ZlTG9jYWxUcmFjayh0KX1yZW1vdmVBbGxMb2NhbFRyYWNrKCl7T2JqZWN0LmtleXModGhpcy5wdWJMb2NhbFRyYWNrcykuZm9yRWFjaCgoZT0+ey9fdGlueSQvLnRlc3QoZSl8fHRoaXMucmVtb3ZlTG9jYWxUcmFja0J5SWQoZSl9KSl9cmVtb3ZlTG9jYWxUcmFjayhlKXtjb25zdCB0PWUuZ2V0VHJhY2tJZCgpO2RlbGV0ZSB0aGlzLnB1YkxvY2FsVHJhY2tzW3RdLHRoaXMuX3NkcFN0cmF0ZWd5LnJlbW92ZUxvY2FsVHJhY2soZSksZS5fX2lubmVyU2V0UHVibGlzaGVkKCExKSxlLm9mZih6ZS5fX0lOTkVSX0VWRU5UX01VVEVEX0NIQU5HRV9fLHRoaXMuX29uTG9jYWxUcmFja011dGVkLHRoaXMpLGUub2ZmKHplLl9fSU5ORVJfRVZFTlRfREVTVFJPWV9fLHRoaXMuX29uTG9jYWxUcmFja0Rlc3Ryb2llZCx0aGlzKTtjb25zdCByPWAke3R9X3RpbnlgLGk9dGhpcy5nZXRMb2NhbFRyYWNrKHIpO2kmJih0aGlzLl9zZHBTdHJhdGVneS5yZW1vdmVMb2NhbFRyYWNrKGkpLGRlbGV0ZSB0aGlzLnB1YkxvY2FsVHJhY2tzW3JdLGkuZGVzdHJveSgpKX1fdXBkYXRlUmVjdlRyYW5zY2VpdmVyTWFwKGUsdCl7dGhpcy5fc2RwU3RyYXRlZ3kudXBkYXRlUmVjdlRyYW5zY2VpdmVyTWFwKGUsdCl9dXBkYXRlU3ViUmVtb3RlVHJhY2tzKGUpe3RoaXMuX3NkcFN0cmF0ZWd5LnVwZGF0ZVN1YlJlbW90ZVRyYWNrcyhlKX1nZXRPdXRib3VuZFZpZGVvSW5mbygpe3JldHVybiB0aGlzLl9zZHBTdHJhdGVneS5nZXRPdXRib3VuZFZpZGVvSW5mbygpfV9vbkxvY2FsVHJhY2tNdXRlZChlKXtjb25zdCB0PXRoaXMuZ2V0TG9jYWxUcmFjayhgJHtlLmdldFRyYWNrSWQoKX1fdGlueWApO3QmJih0Ll9faW5uZXJHZXRNZWRpYVN0cmVhbVRyYWNrKCkuZW5hYmxlZD0hZS5pc0xvY2FsTXV0ZWQoKSksdGhpcy5lbWl0KHplLl9fSU5ORVJfRVZFTlRfTVVURURfQ0hBTkdFX18sZSl9X29uTG9jYWxUcmFja0Rlc3Ryb2llZChlKXt0aGlzLmVtaXQoemUuX19JTk5FUl9FVkVOVF9ERVNUUk9ZX18sZSl9cmVnaXN0ZXJSZXBvcnRMaXN0ZW5lcihlKXt0aGlzLl9yZXBvcnRMaXN0ZW5lcj1lfV9jcmVhdGVSQ1JUQ1N0YXRlUmVwb3J0KGUpe2NvbnN0e3RpbWVzdGFtcDp0LGljZUNhbmRpZGF0ZVBhaXI6cixzZW5kZXJzOmkscmVjZWl2ZXJzOm59PUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZSkpO251bGw9PXJ8fGRlbGV0ZSByLnRvdGFsUGFja2V0c0xvc3Q7Zm9yKGNvbnN0IGUgaW4gcilQdChyW2VdKSYmZGVsZXRlIHJbZV07cmV0dXJue3RpbWVzdGFtcDp0LGljZUNhbmRpZGF0ZVBhaXI6cixzZW5kZXJzOmkubWFwKChlPT57Y29uc3QgdD17fTtyZXR1cm4gZS50cmFja0lkJiYodC50cmFja0lkPWUudHJhY2tJZCksZS5raW5kJiYodC5raW5kPWUua2luZCksKGUucGFja2V0c0xvc3RSYXRlfHwwPT09ZS5wYWNrZXRzTG9zdFJhdGUpJiYodC5wYWNrZXRzTG9zdFJhdGU9ZS5wYWNrZXRzTG9zdFJhdGUpLHQucmVtb3RlUmVzb3VyY2U9ZS5yZW1vdGVSZXNvdXJjZSwoZS5hdWRpb0xldmVsfHwwPT09ZS5hdWRpb0xldmVsKSYmKHQuYXVkaW9MZXZlbD1lLmF1ZGlvTGV2ZWwpLGUuZnJhbWVXaWR0aCYmKHQuZnJhbWVXaWR0aD1lLmZyYW1lV2lkdGgpLGUuZnJhbWVIZWlnaHQmJih0LmZyYW1lSGVpZ2h0PWUuZnJhbWVIZWlnaHQpLGUuZnJhbWVSYXRlJiYodC5mcmFtZVJhdGU9ZS5mcmFtZVJhdGUpLChlLmJpdHJhdGV8fDA9PT1lLmJpdHJhdGUpJiYodC5iaXRyYXRlPWUuYml0cmF0ZSksZS5qaXR0ZXImJih0LmppdHRlcj1lLmppdHRlciksdH0pKSxyZWNlaXZlcnM6bi5tYXAoKGU9Pntjb25zdCB0PXt9O3JldHVybiBlLnRyYWNrSWQmJih0LnRyYWNrSWQ9ZS50cmFja0lkKSxlLmtpbmQmJih0LmtpbmQ9ZS5raW5kKSwoZS5wYWNrZXRzTG9zdFJhdGV8fDA9PT1lLnBhY2tldHNMb3N0UmF0ZSkmJih0LnBhY2tldHNMb3N0UmF0ZT1lLnBhY2tldHNMb3N0UmF0ZSksdC5yZW1vdGVSZXNvdXJjZT1lLnJlbW90ZVJlc291cmNlLChlLmF1ZGlvTGV2ZWx8fDA9PT1lLmF1ZGlvTGV2ZWwpJiYodC5hdWRpb0xldmVsPWUuYXVkaW9MZXZlbCksZS5mcmFtZVdpZHRoJiYodC5mcmFtZVdpZHRoPWUuZnJhbWVXaWR0aCksZS5mcmFtZUhlaWdodCYmKHQuZnJhbWVIZWlnaHQ9ZS5mcmFtZUhlaWdodCksZS5mcmFtZVJhdGUmJih0LmZyYW1lUmF0ZT1lLmZyYW1lUmF0ZSksKGUuYml0cmF0ZXx8MD09PWUuYml0cmF0ZSkmJih0LmJpdHJhdGU9ZS5iaXRyYXRlKSxlLmppdHRlciYmKHQuaml0dGVyPWUuaml0dGVyKSx0fSkpfX1fZ2V0U3RhdHNEYXRhKCl7dmFyIGUsdDtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0IHI9eWllbGQgdGhpcy5fcnRjUGVlckNvbm4uZ2V0U3RhdHMoKSxpPW51bGw9PT0oZT10aGlzLnJlcG9ydFBhcnNlcil8fHZvaWQgMD09PWU/dm9pZCAwOmUucGFyc2VSVENTdGF0c1JlcG9ydChyKTtyZXR1cm4gbnVsbD09PSh0PXRoaXMucmVwb3J0UGFyc2VyKXx8dm9pZCAwPT09dD92b2lkIDA6dC5mb3JtYXRSQ1JUQ1N0YXRlUmVwb3J0KGkpfSkpfWdldEF1ZGlvTGV2ZWxSZXBvcnREYXRhKCl7dmFyIGUsdDtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0IHI9eWllbGQgdGhpcy5fcnRjUGVlckNvbm4uZ2V0U3RhdHMoKSxpPW51bGw9PT0oZT10aGlzLnJlcG9ydFBhcnNlcil8fHZvaWQgMD09PWU/dm9pZCAwOmUucGFyc2VSVENTdGF0c1JlcG9ydChyKTtpZighaSlyZXR1cm5bXTtyZXR1cm4gbnVsbD09PSh0PXRoaXMucmVwb3J0UGFyc2VyKXx8dm9pZCAwPT09dD92b2lkIDA6dC5nZXRBdWRpb0xldmVsTGlzdChpKX0pKX1fcmVwb3J0SGFuZGxlKCl7dmFyIGUsdCxyO3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3QgaT15aWVsZCB0aGlzLl9nZXRTdGF0c0RhdGEoKTtpZighaSlyZXR1cm47KGkuc2VuZGVycy5sZW5ndGh8fGkucmVjZWl2ZXJzLmxlbmd0aCkmJihudWxsPT09KGU9dGhpcy5fcG9sYXJpc1JlcG9ydCl8fHZvaWQgMD09PWV8fGUuc2VuZFIzUjREYXRhKGkpKTtjb25zdCBuPXRoaXMuX2NyZWF0ZVJDUlRDU3RhdGVSZXBvcnQoaSk7bnVsbD09PShyPW51bGw9PT0odD10aGlzLl9yZXBvcnRMaXN0ZW5lcil8fHZvaWQgMD09PXQ/dm9pZCAwOnQub25TdGF0ZVJlcG9ydCl8fHZvaWQgMD09PXJ8fHIuY2FsbCh0LG4pfSkpfWdldFJUQ1BlZXJDb25uKCl7cmV0dXJuIHRoaXMuX3J0Y1BlZXJDb25ufWRlc3Ryb3koKXt0aGlzLmNsZWFyKCksdGhpcy5jbGVhclJlVHJ5RXhjaGFuZ2VUaW1lcigpLHRoaXMuX3JlcG9ydFN0YXRzVGltZXImJihjbGVhckludGVydmFsKHRoaXMuX3JlcG9ydFN0YXRzVGltZXIpLHRoaXMuX3JlcG9ydFN0YXRzVGltZXI9bnVsbCksdGhpcy5yZWdpc3RlclJlcG9ydExpc3RlbmVyKG51bGwpLHRoaXMuX3J0Y1BlZXJDb25uLmNsb3NlKCksdGhpcy5yZXBvcnRQYXJzZXI9bnVsbH1jbGVhclJlVHJ5RXhjaGFuZ2VUaW1lcigpe2NsZWFySW50ZXJ2YWwodGhpcy5fcmVUcnlFeGNoYW5nZVRpbWVyKSx0aGlzLl9yZVRyeUV4Y2hhbmdlVGltZXI9bnVsbH19dmFyIFl0LHF0LHp0LFF0LFh0O1d0Ll9fSU5ORVJfRVZFTlRfVFJBQ0tfUkVBRFlfXz1cImlubmVyLXRyYWNrLXJlYWR5XCIsZnVuY3Rpb24oZSl7ZVtlLkRJU0FCTEU9MF09XCJESVNBQkxFXCIsZVtlLkVOQUJMRT0xXT1cIkVOQUJMRVwifShZdHx8KFl0PXt9KSksZnVuY3Rpb24oZSl7ZVtlLk1lZXRpbmdPckFuY2hvcj0xXT1cIk1lZXRpbmdPckFuY2hvclwiLGVbZS5BdWRpZW5jZT0yXT1cIkF1ZGllbmNlXCJ9KHF0fHwocXQ9e30pKTtjbGFzcyBadHtjb25zdHJ1Y3RvcihlLHQscixpLG49cXQuTWVldGluZ09yQW5jaG9yKXt0aGlzLl9jb250ZXh0PWUsdGhpcy5fcnVudGltZT10LHRoaXMuX3Jvb21JZD1yLHRoaXMuX2NydFJUQ1Jvb209aSx0aGlzLl91c2VyUm9sZT1ufV9zZW5kKGUpe3RoaXMuX2NvbnRleHQuZ2V0Q29ubmVjdGlvblN0YXR1cygpPT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Db25uZWN0aW9uU3RhdHVzLkNPTk5FQ1RFRCYmdGhpcy5fY29udGV4dC5zZXRSVENTdGF0ZSh0aGlzLl9yb29tSWQsZSl9X2dldENsaWVudElEKCl7Y29uc3QgZT1cInV1aWRcIjtsZXQgdD10aGlzLl9ydW50aW1lLmxvY2FsU3RvcmFnZS5nZXRJdGVtKGUpO3JldHVybiB0fHwodD1TdCgpLHRoaXMuX3J1bnRpbWUubG9jYWxTdG9yYWdlLnNldEl0ZW0oZSx0KSksdH1fZ2V0UmVhbFJlc291cmNlSWQoZSl7bGV0IHQ9ZTtjb25zdCByPWUuaW5kZXhPZihcIl90aW55XCIpO3JldHVybiByPi0xJiYodD1lLnNsaWNlKDAscikpLHR9X2dldFBvbGFyaXNUcmFja0lkKGUpe2xldCB0PVwiXCI7Y29uc3Qgcj1lLnNwbGl0KFwiX1wiKTtpZihlLmluY2x1ZGVzKFwiX3RpbnlcIikpe2NvbnN0IGU9ci5wb3AoKSxpPXBhcnNlSW50KHIucG9wKCkpPT09RmUuQVVESU9fT05MWT9cImF1ZGlvXCI6XCJ2aWRlb1wiLG49ci5wb3AoKTt0PVtyLmpvaW4oXCJfXCIpLG4sZSxpXS5qb2luKFwiX1wiKX1lbHNle2NvbnN0IGU9cGFyc2VJbnQoci5wb3AoKSk9PT1GZS5BVURJT19PTkxZP1wiYXVkaW9cIjpcInZpZGVvXCIsaT1yLnBvcCgpO3Q9W3Iuam9pbihcIl9cIiksaSxlXS5qb2luKFwiX1wiKX1yZXR1cm4gdH1zZW5kUjNSNERhdGEoZSl7Y29uc3R7aWNlQ2FuZGlkYXRlUGFpcjp0LHNlbmRlcnM6cixyZWNlaXZlcnM6aX09ZSxuPShudWxsPT10P3ZvaWQgMDp0LmJpdHJhdGVTZW5kKXx8LTEscz0obnVsbD09dD92b2lkIDA6dC5iaXRyYXRlUmVjdil8fC0xLG89KG51bGw9PXQ/dm9pZCAwOnQubmV0d29ya1R5cGUpfHxcInVua25vd25cIixhPShudWxsPT10P3ZvaWQgMDp0LnJ0dCl8fC0xLGM9YCR7KG51bGw9PXQ/dm9pZCAwOnQuSVApfHwtMX06JHtudWxsPT10P3ZvaWQgMDp0LnBvcnR9YCxkPShudWxsPT10fHx0LnJlbW90ZUlQLG51bGw9PXR8fHQucmVtb3RlUG9ydCwobnVsbD09dD92b2lkIDA6dC5hdmFpbGFibGVJbmNvbWluZ0JpdHJhdGUpfHwtMSksdT0obnVsbD09dD92b2lkIDA6dC5hdmFpbGFibGVPdXRnb2luZ0JpdHJhdGUpfHwtMSxsPShudWxsPT10P3ZvaWQgMDp0LnRvdGFsUGFja2V0c0xvc3QpfHwtMSxoPXRoaXMuX2NvbnRleHQuZ2V0Q3VycmVudElkKCk7bGV0IHA9YFIzXFx0JHtufVxcdC0xXFx0LTFcXHQtMVxcdCR7b31cXHQke2F9XFx0JHtjfVxcdCR7ZH1cXHQke3V9XFx0JHtsfVxcdCR7aH1cXHJgLF89YFI0XFx0JHtzfVxcdC0xXFx0LTFcXHQtMVxcdCR7b31cXHQke2F9XFx0JHtjfVxcdCR7ZH1cXHQke3V9XFx0JHtsfVxcdCR7aH1cXHJgO2NvbnN0IG09ci5tYXAoKGU9Pnt2YXIgdDtjb25zdHt0cmFja0lkOnIsYXVkaW9MZXZlbDppLHNhbXBsaW5nUmF0ZTpuLGJpdHJhdGU6cyxwYWNrZXRzTG9zdFJhdGU6byxmcmFtZVJhdGU6YSxmcmFtZVdpZHRoOmMsZnJhbWVIZWlnaHQ6ZCxnb29nUmVuZGVyRGVsYXlNczp1LGppdHRlcjpsLG5hY2tDb3VudDpoLHBsaUNvdW50OnAscnR0Ol8sZ29vZ0ZpcnNTZW50Om0sZW5jb2RlckltcGxlbWVudGF0aW9uOmZ9PWUsdj10aGlzLl9nZXRQb2xhcmlzVHJhY2tJZChyKSxSPXRoaXMuX2dldFJlYWxSZXNvdXJjZUlkKHIpO3JldHVybnt0cmFja0lkOnYsZ29vZ0NvZGVjTmFtZTpmfHxTdHJpbmcoLTEpLGF1ZGlvTGV2ZWw6aXx8MD09PWk/aTotMSxiaXRyYXRlOnN8fDA9PT1zP3M6LTEscGFja2V0c0xvc3RSYXRlOm98fDA9PT1vP286LTEsZnJhbWVSYXRlOmF8fC0xLHJlc29sdXRpb246YyYmZD9gJHtjfSAqICR7ZH1gOlwiLTFcIixqaXR0ZXI6bHx8LTEsbmFja0NvdW50Omh8fDA9PT1oP2g6LTEscGxpQ291bnQ6cHx8MD09PXA/cDotMSxydHQ6X3x8LTEsZ29vZ0ZpcnNTZW50Om0sc2FtcGxpbmdSYXRlOm4sZ29vZ1JlbmRlckRlbGF5TXM6dSxlbmNvZGVySW1wbGVtZW50YXRpb246Znx8U3RyaW5nKC0xKSx0cmFja1N0YXRlOihudWxsPT09KHQ9dGhpcy5fY3J0UlRDUm9vbS5nZXRMb2NhbFRyYWNrKFIpKXx8dm9pZCAwPT09dD92b2lkIDA6dC5pc0xvY2FsTXV0ZWQoKSk/WXQuRElTQUJMRTpZdC5FTkFCTEV9fSkpLGY9aS5maWx0ZXIoKGU9PiEhZS50cmFja0lkKSkubWFwKChlPT57dmFyIHQ7Y29uc3R7dHJhY2tJZDpyLGF1ZGlvTGV2ZWw6aSxzYW1wbGluZ1JhdGU6bixiaXRyYXRlOnMscGFja2V0c0xvc3RSYXRlOm8sZnJhbWVSYXRlOmEsZnJhbWVXaWR0aDpjLGZyYW1lSGVpZ2h0OmQsZ29vZ1JlbmRlckRlbGF5TXM6dSxqaXR0ZXI6bCxuYWNrQ291bnQ6aCxwbGlDb3VudDpwLHJ0dDpfLGdvb2dGaXJzUmVjZWl2ZWQ6bSxjb2RlY0ltcGxlbWVudGF0aW9uTmFtZTpmfT1lLHY9dGhpcy5fZ2V0UG9sYXJpc1RyYWNrSWQociksUj10aGlzLl9nZXRSZWFsUmVzb3VyY2VJZChyKTtyZXR1cm57dHJhY2tJZDp2LGdvb2dDb2RlY05hbWU6Znx8U3RyaW5nKC0xKSxhdWRpb0xldmVsOml8fDA9PT1pP2k6LTEsYml0cmF0ZTpzfHwwPT09cz9zOi0xLHBhY2tldHNMb3N0UmF0ZTpvfHwwPT09bz9vOi0xLGZyYW1lUmF0ZTphfHwtMSxyZXNvbHV0aW9uOmMmJmQ/YCR7Y30gKiAke2R9YDpcIi0xXCIsaml0dGVyOmx8fC0xLG5hY2tDb3VudDpofHwwPT09aD9oOi0xLHBsaUNvdW50OnB8fDA9PT1wP3A6LTEscnR0Ol98fC0xLGdvb2dGaXJzUmVjZWl2ZWQ6bSxzYW1wbGluZ1JhdGU6bixnb29nUmVuZGVyRGVsYXlNczp1LGNvZGVjSW1wbGVtZW50YXRpb25OYW1lOmZ8fFN0cmluZygtMSksdHJhY2tTdGF0ZToobnVsbD09PSh0PXRoaXMuX2NydFJUQ1Jvb20uZ2V0UmVtb3RlVHJhY2soUikpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmlzTG9jYWxNdXRlZCgpKT9ZdC5ESVNBQkxFOll0LkVOQUJMRX19KSk7cCs9bS5tYXAoKGU9PmAke2UudHJhY2tJZH1cXHQke2UuZ29vZ0NvZGVjTmFtZX1cXHQke2UuYXVkaW9MZXZlbH1cXHQke2Uuc2FtcGxpbmdSYXRlfVxcdCR7ZS5iaXRyYXRlfVxcdCR7ZS5wYWNrZXRzTG9zdFJhdGV9XFx0JHtlLmZyYW1lUmF0ZX1cXHQke2UucmVzb2x1dGlvbn1cXHQke2UuZ29vZ1JlbmRlckRlbGF5TXN9XFx0JHtlLmppdHRlcn1cXHQke2UubmFja0NvdW50fVxcdCR7ZS5wbGlDb3VudH1cXHQke2UucnR0fVxcdCR7ZS5nb29nRmlyc1NlbnR9XFx0JHtlLmVuY29kZXJJbXBsZW1lbnRhdGlvbn1cXHQke2UudHJhY2tTdGF0ZX1gKSkuam9pbihcIlxcblwiKSxlLnNlbmRlcnMubGVuZ3RoJiZ0aGlzLl9zZW5kKHArYFxcciR7dGhpcy5fdXNlclJvbGV9YCksXys9Zi5tYXAoKGU9PmAke2UudHJhY2tJZH1cXHQke2UuZ29vZ0NvZGVjTmFtZX1cXHQke2UuYXVkaW9MZXZlbH1cXHQke2Uuc2FtcGxpbmdSYXRlfVxcdCR7ZS5iaXRyYXRlfVxcdCR7ZS5wYWNrZXRzTG9zdFJhdGV9XFx0JHtlLmZyYW1lUmF0ZX1cXHQke2UucmVzb2x1dGlvbn1cXHQke2UuZ29vZ1JlbmRlckRlbGF5TXN9XFx0JHtlLmppdHRlcn1cXHQke2UubmFja0NvdW50fVxcdCR7ZS5wbGlDb3VudH1cXHQke2UucnR0fVxcdCR7ZS5nb29nRmlyc1JlY2VpdmVkfVxcdCR7ZS5jb2RlY0ltcGxlbWVudGF0aW9uTmFtZX1cXHQke2UudHJhY2tTdGF0ZX1gKSkuam9pbihcIlxcblwiKSxlLnJlY2VpdmVycy5sZW5ndGgmJnRoaXMuX3NlbmQoXytgXFxyJHt0aGlzLl91c2VyUm9sZX1gKX1zZW5kUjEoKXtjb25zdCBlPWBSMVxcdDUuMy4xXFx0JHt0aGlzLl9jb250ZXh0LmdldENvcmVWZXJzaW9uKCl9XFx0d2ViXFx0JHtuYXZpZ2F0b3IucGxhdGZvcm19XFx0LTFcXHQke3l0LmJyb3dzZXJ9XFx0JHt5dC52ZXJzaW9ufVxcdCR7dGhpcy5fZ2V0Q2xpZW50SUQoKX1cXHQke3RoaXMuX3VzZXJSb2xlfWA7dGhpcy5fc2VuZChlKX1zZW5kUjIoZSx0LHIpe2NvbnN0IGk9YFIyXFx0JHtlfVxcdCR7dH1cXHQke3RoaXMuX2dldENsaWVudElEKCl9XFxyJHtyLmpvaW4oXCJcXHRcIil9XFxyJHt0aGlzLl91c2VyUm9sZX1gO3RoaXMuX3NlbmQoaSl9fSFmdW5jdGlvbihlKXtlLlBVQkxJU0g9XCJwdWJsaXNoXCIsZS5TVUJTQ1JJQkU9XCJzdWJzY3JpYmVcIn0oenR8fCh6dD17fSkpLGZ1bmN0aW9uKGUpe2UuQkVHSU49XCJiZWdpblwiLGUuRU5EPVwiZW5kXCJ9KFF0fHwoUXQ9e30pKTtjbGFzcyBlcntjb25zdHJ1Y3RvcihlKXt0aGlzLl9yb29tPWUsdGhpcy5fYXVkaW9MZXZlbENoYW5nZUhhbmRsZXI9bnVsbCx0aGlzLl90aW1lcj1udWxsLHRoaXMuX3BjPXRoaXMuX3Jvb20uX19nZXRQQygpfV9hdWRpb0xldmVsUmVwb3J0KCl7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtpZihcIm5ld1wiPT09dGhpcy5fcGMuZ2V0UlRDUGVlckNvbm4oKS5pY2VDb25uZWN0aW9uU3RhdGV8fCF0aGlzLl9hdWRpb0xldmVsQ2hhbmdlSGFuZGxlcilyZXR1cm47Y29uc3QgZT0oeWllbGQgdGhpcy5fcGMuZ2V0QXVkaW9MZXZlbFJlcG9ydERhdGEoKSkubWFwKChlPT57Y29uc3R7dXNlcklkOnR9PVByLnBhcnNlVHJhY2tJZChlLnRyYWNrSWQpO3JldHVybnt0cmFjazp0aGlzLl9yb29tLmdldENydFVzZXJJZCgpPT09dD90aGlzLl9yb29tLmdldExvY2FsVHJhY2soZS50cmFja0lkKTp0aGlzLl9yb29tLmdldFJlbW90ZVRyYWNrKGUudHJhY2tJZCksYXVkaW9MZXZlbDplLmF1ZGlvTGV2ZWx8fDB9fSkpLmZpbHRlcigoZT0+ZS50cmFjaykpO3RoaXMuX2F1ZGlvTGV2ZWxDaGFuZ2VIYW5kbGVyKGUpfSkpfW9uQXVkaW9MZXZlbENoYW5nZShlLHQpe3Q8MzAwfHx0PjFlMz9DLmVycm9yKCd0aGUgdmFsaWQgcmFuZ2Ugb2Ygb25BdWRpb0xldmVsQ2hhbmdlIHBhcmFtcyBcImdhcFwiIGlzOiA+IDMwMCAmJiA8IDEwMDAnKTplPyh0aGlzLl9hdWRpb0xldmVsQ2hhbmdlSGFuZGxlcj1lLHRoaXMuX3RpbWVyPXNldEludGVydmFsKHRoaXMuX2F1ZGlvTGV2ZWxSZXBvcnQuYmluZCh0aGlzKSx0KSk6dGhpcy5fYXVkaW9MZXZlbENoYW5nZUhhbmRsZXI9bnVsbH1jbGVhckF1ZGlvTGV2ZWxSZXBvcnRUaW1lcigpe3RoaXMuX3RpbWVyJiYoY2xlYXJJbnRlcnZhbCh0aGlzLl90aW1lciksdGhpcy5fdGltZXI9bnVsbCl9fSFmdW5jdGlvbihlKXtlW2UuQU5DSE9SPTFdPVwiQU5DSE9SXCIsZVtlLkFVRElFTkNFPTJdPVwiQVVESUVOQ0VcIn0oWHR8fChYdD17fSkpO2NvbnN0IHRyPWU9PmUgaW5zdGFuY2VvZiBxZT9lLmdldFRyYWNrSWQoKTplLnRyYWNrLmdldFRyYWNrSWQoKTtjbGFzcyBycntjb25zdHJ1Y3RvcihlLHQscixpLG4scyxvLGEsYyxkKXt0aGlzLl9jb250ZXh0PWUsdGhpcy5fcnVudGltZT10LHRoaXMuX3Jvb21JZD1yLHRoaXMuX3Jvb21Nb2RlPW4sdGhpcy5fc2VydmljZT1zLHRoaXMuX2luaXRPcHRpb25zPW8sdGhpcy5fbnRmQ2xlYXJSb29tSXRlbT1hLHRoaXMuX2lzTWFpblJvb209ZCx0aGlzLl9yZW1vdGVUcmFja3M9e30sdGhpcy5fc3Vic2NyaWJlZExpc3Q9W10sdGhpcy5fZGVzdHJveWVkPSExLHRoaXMubXNnVGFza1F1ZXVlPW5ldyBFLHRoaXMuX2FwcExpc3RlbmVyPW51bGwsdGhpcy5fb25SZWN2UEtNc2c9bnVsbCx0aGlzLl90b2tlbj1pLnRva2VuLHRoaXMuX3Nlc3Npb25JZD1pLnNlc3Npb25JZCx0aGlzLl9yb29tUmVzb3VyY2VzPWM/e306THQoaSksdGhpcy5faW5pdFJlbW90ZVRyYWNrcygpO2NvbnN0IHU9dGhpcy5fY29udGV4dC5nZXRDdXJyZW50SWQoKSxsPXRoaXMuX3Jvb21SZXNvdXJjZXNbdV09dGhpcy5fcm9vbVJlc291cmNlc1t1XXx8W107Qy5kZWJ1Zyhgcm9vbSBkYXRhIC0+ICR7SlNPTi5zdHJpbmdpZnkodGhpcy5fcm9vbVJlc291cmNlcyl9YCksbC5sZW5ndGg+MCYmaygoKCk9PnRoaXMuX3VucHVibGlzaFByZXYobCkpKSxjJiZ0aGlzLl9hZnRlckNoYW5nZWRSb2xlKGkpLHRoaXMuX3Bpbmdlcj1uZXcgQXQocix0aGlzLl9yb29tTW9kZSxlLHRoaXMuX2luaXRPcHRpb25zLnBpbmdHYXApLHRoaXMuX3Bpbmdlci5vbkZhaWxlZD10aGlzLl9raWNrb2ZmLmJpbmQodGhpcyksdGhpcy5fcGluZ2VyLm9uUGluZ1Jlc3VsdD10aGlzLl9oYW5kbGVQaW5nUmVzdWx0LmJpbmQodGhpcyksdGhpcy5fcGluZ2VyLnN0YXJ0KCksdGhpcy5fcG9sYXJpc1JlcG9ydD1uZXcgWnQodGhpcy5fY29udGV4dCx0aGlzLl9ydW50aW1lLHRoaXMuX3Jvb21JZCx0aGlzKSx0aGlzLl9wb2xhcmlzUmVwb3J0LnNlbmRSMSgpLHRoaXMuX3BjPW5ldyBXdCh0aGlzLl9yZVRyeUV4Y2hhbmdlLmJpbmQodGhpcyksdGhpcy5fcG9sYXJpc1JlcG9ydCksdGhpcy5fcGMub24oV3QuX19JTk5FUl9FVkVOVF9UUkFDS19SRUFEWV9fLHRoaXMuX29uVHJhY2tSZWFkeSx0aGlzKSx0aGlzLl9wYy5vbih6ZS5fX0lOTkVSX0VWRU5UX01VVEVEX0NIQU5HRV9fLHRoaXMuX29uTG9jYWxUcmFja011dGVkLHRoaXMpLHRoaXMuX3BjLm9uKHplLl9fSU5ORVJfRVZFTlRfREVTVFJPWV9fLHRoaXMuX29uTG9jYWxUcmFja0Rlc3Ryb2llZCx0aGlzKX1faW5pdFJlbW90ZVRyYWNrcygpe2NvbnN0IGU9dGhpcy5fY29udGV4dC5nZXRDdXJyZW50SWQoKTtmb3IoY29uc3QgdCBpbiB0aGlzLl9yb29tUmVzb3VyY2VzKXtjb25zdCByPXRoaXMuX3Jvb21SZXNvdXJjZXNbdF07dCE9PWUmJjAhPT1yLmxlbmd0aCYmci5mb3JFYWNoKChlPT57Y29uc3QgdD1tdChlKSx7dGFnOnIsdXNlcklkOmksbWVkaWFUeXBlOm59PWZ0KHQpLHM9bj09PUZlLkFVRElPX09OTFk/bmV3IG90KHIsaSk6bmV3IGF0KHIsaSk7cy5fX2lubmVyU2V0UmVtb3RlTXV0ZWQoMD09PWUuc3RhdGUpLHRoaXMuX3JlbW90ZVRyYWNrc1t0XT1zfSkpfX1faGFuZGxlUGluZ1Jlc3VsdChlKXt0aGlzLl9jYWxsQXBwTGlzdGVuZXIoXCJvblBpbmdcIixlKX1zZXRCaXRyYXRlKGUsdCxpKXtDLndhcm4oXCJgUkNBYnN0cmFjdFJvb20uc2V0Qml0cmF0ZWAgd2lsbCBiZSBkZXByZWNhdGVkLCB1c2UgYFJDTG9jYWxUcmFjay5zZXRCaXRyYXRlYCBpbnN0ZWFkLlwiKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJtYXhcIixlLChlPT4oMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmlzTnVtYmVyKShlKSYmZT5NYXRoLm1heCh0fHwxLDIwMCkpLCEwKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJtaW5cIix0LCh0PT4oMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmlzTnVtYmVyKSh0KSYmdD49MSYmKCEoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmlzTnVtYmVyKShlKXx8dDxlKSksITApLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcInN0YXJ0XCIsaSwoaT0+KDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5pc051bWJlcikoaSkmJmk+dCYmaTw9ZSkpLHRoaXMuX3BjLnNldEJpdHJhdGUoZSx0LGkpfV9vblRyYWNrUmVhZHkoZSl7Y29uc3QgdD1lLnN0cmVhbXNbMF0uaWQscj1lLnJlY2VpdmVyLnRyYWNrLGk9W3QsXCJhdWRpb1wiPT09ci5raW5kP0ZlLkFVRElPX09OTFk6RmUuVklERU9fT05MWV0uam9pbihcIl9cIiksbj10aGlzLl9yZW1vdGVUcmFja3NbaV07bj8obi5fX2lubmVyU2V0TWVkaWFTdHJlYW1UcmFjayhyKSx0aGlzLl9jYWxsQXBwTGlzdGVuZXIoXCJvblRyYWNrUmVhZHlcIixuKSk6Qy53YXJuKGBjYW5ub3QgZm91bmQgcmVtb3RlIHRyYWNrICR7ci5pZH1gKX1fY2FsbEFwcExpc3RlbmVyKGUsLi4udCl7dmFyIHI7Y29uc3QgaT1udWxsPT09KHI9dGhpcy5fYXBwTGlzdGVuZXIpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyW2VdO2lmKGkpdHJ5e2koLi4udCl9Y2F0Y2goZSl7Qy5lcnJvcihlKX19X29uVXNlclVucHVibGlzaChlKXtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3lpZWxkIHRoaXMudW5zdWJzY3JpYmUoZSksZS5mb3JFYWNoKChlPT57ZS5fX2lubmVyRGVzdHJveSgpLGRlbGV0ZSB0aGlzLl9yZW1vdGVUcmFja3NbZS5nZXRUcmFja0lkKCldfSkpLHRoaXMuX29uVHJhY2tVbnB1Ymxpc2goZSl9KSl9X29uVHJhY2tVbnB1Ymxpc2goZSl7dGhpcy5fY2FsbEFwcExpc3RlbmVyKFwib25UcmFja1VucHVibGlzaFwiLGUpfV91bnB1Ymxpc2hQcmV2KGUpe3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3QgdD1lLnNsaWNlKCk7ZS5sZW5ndGg9MCxDLmluZm8oYHVucHVibGlzaCB1cmlzIHByZXYgbG9naW46ICR7SlNPTi5zdHJpbmdpZnkodCl9YCk7Y29uc3Qgcj15aWVsZCB0aGlzLl9jb250ZXh0LnNldFJUQ1RvdGFsUmVzKHRoaXMuX3Jvb21JZCxjdChOdC5VTlBVQkxJU0gsdCksZHQoW10pLE50LlRPVEFMX0NPTlRFTlRfUkVTT1VSQ0UsZHQoW10pKTtyIT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUz9DLmVycm9yKGB1bnB1Ymxpc2ggcHJldiB1cmlzIGZhaWxlZCAtPiBjb2RlOiAke3J9YCk6Qy5kZWJ1ZyhcInVucHVibGlzaCB1cmlzIHByZXYgbG9naW4gc3VjY2VlZFwiKX0pKX1fX3BhcnNlSW5uZXJNZXNzYWdlKGUpe2NvbnN0e3RhcmdldElkOnQsY29udmVyc2F0aW9uVHlwZTpyfT1lO2lmKHIhPT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkNvbnZlcnNhdGlvblR5cGUuUlRDX1JPT00pcmV0dXJuITE7aWYodCE9PXRoaXMuX3Jvb21JZClyZXR1cm4hMDtDLmluZm8oYHJlY3YgaW5uZXIgbXNnIC0+IG1lc3NhZ2U6ICR7SlNPTi5zdHJpbmdpZnkoZSl9IHwgcm9vbWlkOiAke3RoaXMuX3Jvb21JZH1gKTtjb25zdCBpPWUuY29udGVudDtzd2l0Y2goZS5tZXNzYWdlVHlwZSl7Y2FzZSBOdC5LSUNLOnRoaXMuX2tpY2tvZmYoITAsaSk7YnJlYWs7Y2FzZSBOdC5TVEFURTp0aGlzLm1zZ1Rhc2tRdWV1ZS5wdXNoKCgoKT0+dGhpcy5fc3RhdGVIYW5kbGUoaSkpKTticmVhaztjYXNlIE50Lk1PRElGWTpjYXNlIE50LlBVQkxJU0g6Y2FzZSBOdC5VTlBVQkxJU0g6Y2FzZSBOdC5UT1RBTF9DT05URU5UX1JFU09VUkNFOnRoaXMubXNnVGFza1F1ZXVlLnB1c2goKCgpPT50aGlzLl9yZXNvdXJjZUhhbmRsZShpLGUubWVzc2FnZVR5cGUsZS5zZW5kZXJVc2VySWQpKSk7YnJlYWs7Y2FzZSBOdC5ST09NX05PVElGWTp0aGlzLl9jYWxsQXBwTGlzdGVuZXIoXCJvblJvb21BdHRyaWJ1dGVDaGFuZ2VcIixlLm1lc3NhZ2VUeXBlLGUuY29udGVudCk7YnJlYWs7Y2FzZSBOdC5VU0VSX05PVElGWTpDLndhcm4oYFRPRE86ICR7TnQuVVNFUl9OT1RJRll9YCk7YnJlYWs7Y2FzZSBOdC5QS19JTlZJVEU6Y2FzZSBOdC5QS19DQU5DRUxfSU5WSVRFOmNhc2UgTnQuUEtfSU5WSVRFX1RJTUVPVVQ6Y2FzZSBOdC5QS19JTlZJVEVfQU5TV0VSOmNhc2UgTnQuUEtfRU5EOnRoaXMuX29uUmVjdlBLTXNnJiZ0aGlzLl9vblJlY3ZQS01zZyhlKTticmVhaztjYXNlIE50Lk9USEVSX1JPT01fT0ZGTElORTpicmVhaztkZWZhdWx0OnRoaXMuX2NhbGxBcHBMaXN0ZW5lcihcIm9uTWVzc2FnZVJlY2VpdmVcIixlLm1lc3NhZ2VUeXBlLGUuY29udGVudCxlLnNlbmRlclVzZXJJZCxlLm1lc3NhZ2VVSWQpfXJldHVybiEwfV9raWNrb2ZmKGUsdCl7bGV0IHI7Qy53YXJuKGBvbktpY2tPZmYgLT4gYnlTZXJ2ZXI6ICR7ZX1gKSx0aGlzLl9udGZDbGVhclJvb21JdGVtKCksdGhpcy5fbGVhdmVIYW5kbGUoIWUpLGUmJigobnVsbD09dD92b2lkIDA6dC51c2Vycyl8fFtdKS5mb3JFYWNoKChlPT57ZS51c2VySWQ9PT10aGlzLl9jb250ZXh0LmdldEN1cnJlbnRJZCgpJiYocj1lLnR5cGUpfSkpLHRoaXMuX2NhbGxBcHBMaXN0ZW5lcihcIm9uS2lja09mZlwiLGUscil9X3J0Y3BlZXJDbG9zZWQoKXt0aGlzLl9udGZDbGVhclJvb21JdGVtKCksdGhpcy5fbGVhdmVIYW5kbGUoITApLHRoaXMuX2NhbGxBcHBMaXN0ZW5lcihcIm9uUlRDUGVlckNvbm5lY3Rpb25DbG9zZUJ5RXhjZXB0aW9uXCIpfV9yZXNvdXJjZUhhbmRsZShlLHQscil7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtpZih0aGlzLl9hc3NlcnRSb29tRGVzdHJveWVkKCkpcmV0dXJuIHZvaWQgQy53YXJuKGByb29tIGhhcyBiZWVuIGRlc3Ryb3llZC4gLT4gcm9vbUlkOiAke3RoaXMuX3Jvb21JZH1gKTtjb25zdHt1cmlzOmksaWdub3JlOm59PWU7aWYobnx8IWkpcmV0dXJuO2NvbnN0IHM9W10sbz1bXSxhPVtdO2xldCBjO2NvbnN0IGQ9dGhpcy5fcm9vbVJlc291cmNlc1tyXXx8KHRoaXMuX3Jvb21SZXNvdXJjZXNbcl09W10pO3N3aXRjaCh0KXtjYXNlIE50Lk1PRElGWTphLnB1c2goLi4uaSk7YnJlYWs7Y2FzZSBOdC5QVUJMSVNIOnMucHVzaCguLi5pKTticmVhaztjYXNlIE50LlVOUFVCTElTSDpvLnB1c2goLi4uaSk7YnJlYWs7Y2FzZSBOdC5UT1RBTF9DT05URU5UX1JFU09VUkNFOmM9Z3QoZCxpKSxzLnB1c2goLi4uYy5wdWJsaXNoZWRMaXN0KSxvLnB1c2goLi4uYy51bnB1Ymxpc2hlZExpc3QpLGEucHVzaCguLi5jLm1vZGlmaWVkTGlzdCl9aWYocy5sZW5ndGg+MCl7Y29uc3QgZT1kLm1hcChtdCksdD1bXSxyPVtdO2lmKHMuZm9yRWFjaCgoaT0+e2NvbnN0IG49bXQoaSkscz1lLmluZGV4T2Yobikse3VzZXJJZDpvLHRhZzphLG1lZGlhVHlwZTpjfT1mdChuKTtzPi0xP2Rbc109aTpkLnB1c2goaSk7bGV0IHU9dGhpcy5fcmVtb3RlVHJhY2tzW25dO3U/dS5pc1N1YnNjcmliZWQoKSYmdC5wdXNoKHUpOih1PWM9PT1GZS5BVURJT19PTkxZP25ldyBvdChhLG8pOm5ldyBhdChhLG8pLHRoaXMuX3JlbW90ZVRyYWNrc1tuXT11LHIucHVzaCh1KSksdS5fX2lubmVyU2V0UmVtb3RlTXV0ZWQoMD09PWkuc3RhdGUpfSkpLHQubGVuZ3RoKXtjb25zdCBlPXQubWFwKChlPT5lLmdldFRyYWNrSWQoKSkpO0MuZGVidWcoYHJlc3ViIHRyYWNrcyAtPiAke0pTT04uc3RyaW5naWZ5KGUpfWApO2NvbnN0e2NvZGU6cn09eWllbGQgaygoKCk9PnRoaXMuX19zdWJzY3JpYmUodCwhMCkpKTtyIT09VC5TVUNDRVNTJiZDLmVycm9yKGByZXN1YiB0cmFja3MgZmFpbGVkIC0+IGNvZGU6ICR7cn0sIGlkczogJHtKU09OLnN0cmluZ2lmeShlKX1gKX10aGlzLl9vblRyYWNrUHVibGlzaChyKX1pZihvLmxlbmd0aD4wKXtjb25zdCBlPW8ubWFwKG10KTtmb3IobGV0IHQ9ZC5sZW5ndGgtMTt0Pj0wO3QtPTEpe2NvbnN0IHI9ZFt0XTtlLmluY2x1ZGVzKG10KHIpKSYmZC5zcGxpY2UodCwxKX1jb25zdCB0PW8ubWFwKChlPT57Y29uc3QgdD1tdChlKTtyZXR1cm4gdGhpcy5fcmVtb3RlVHJhY2tzW3RdfSkpO3lpZWxkIHRoaXMuX29uVXNlclVucHVibGlzaCh0KX1pZihhLmxlbmd0aD4wKXtjb25zdCBlPWQubWFwKG10KTtmb3IobGV0IHQ9MDt0PGEubGVuZ3RoO3QrPTEpe2NvbnN0IHI9YVt0XSxpPW10KHIpLG49ZS5pbmRleE9mKGkpO2Rbbl0uc3RhdGU9ci5zdGF0ZTtjb25zdCBzPXRoaXMuX3JlbW90ZVRyYWNrc1tpXTtzLl9faW5uZXJTZXRSZW1vdGVNdXRlZCgwPT09ci5zdGF0ZSkscy5pc0F1ZGlvVHJhY2soKT90aGlzLl9vbkF1ZGlvTXV0ZUNoYW5nZShzKTp0aGlzLl9vblZpZGVvTXV0ZUNoYW5nZShzKX19fSkpfV9vblRyYWNrUHVibGlzaChlKXt0aGlzLl9jYWxsQXBwTGlzdGVuZXIoXCJvblRyYWNrUHVibGlzaFwiLGUpfV9zdGF0ZUhhbmRsZShlKXt2YXIgdDtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0e3VzZXJzOnJ9PWU7aWYoMD09PXIubGVuZ3RoKXJldHVybjtjb25zdCBpPVtdLG49W10scz1bXSxvPVtdO3IuZm9yRWFjaCgoZT0+ezA9PStlLnN0YXRlPyhDLmRlYnVnKGB1c2VyIGpvaW5lZCAtPiAke2UudXNlcklkfWApLHRoaXMuX3Jvb21SZXNvdXJjZXNbZS51c2VySWRdfHwoZS5zd2l0Y2hSb2xlVHlwZT9zLnB1c2goZS51c2VySWQpOmkucHVzaChlLnVzZXJJZCkpLHRoaXMuX3Jvb21SZXNvdXJjZXNbZS51c2VySWRdPXRoaXMuX3Jvb21SZXNvdXJjZXNbZS51c2VySWRdfHxbXSk6KEMuZGVidWcoYHVzZXIgbGVmdCAtPiAke2UudXNlcklkfWApLGUuc3dpdGNoUm9sZVR5cGU/by5wdXNoKGUudXNlcklkKTpuLnB1c2goZS51c2VySWQpKX0pKTtjb25zdCBhPVsuLi5pLC4uLnNdLGM9Wy4uLm4sLi4ub107aWYoYy5sZW5ndGgpe2NvbnN0IGU9W10sdD1bXTtjLmZvckVhY2goKHI9PntlLnB1c2goLi4udGhpcy5nZXRSZW1vdGVUcmFja3NCeVVzZXJJZChyKSksdC5wdXNoKHIpfSkpLGUubGVuZ3RoJiYoeWllbGQgdGhpcy51bnN1YnNjcmliZShlKSxlLmZvckVhY2goKGU9PmRlbGV0ZSB0aGlzLl9yZW1vdGVUcmFja3NbZS5nZXRUcmFja0lkKCldKSkpLHQubGVuZ3RoJiZ0LmZvckVhY2goKGU9PmRlbGV0ZSB0aGlzLl9yb29tUmVzb3VyY2VzW2VdKSl9aWYobnVsbD09PSh0PXRoaXMuX2FwcExpc3RlbmVyKXx8dm9pZCAwPT09dD92b2lkIDA6dC5vblN3aXRjaFJvbGUpcmV0dXJuIHMubGVuZ3RoJiZzLmZvckVhY2goKGU9PnRoaXMuX2NhbGxBcHBMaXN0ZW5lcihcIm9uU3dpdGNoUm9sZVwiLGUsWHQuQU5DSE9SKSkpLG8ubGVuZ3RoJiZvLmZvckVhY2goKGU9PnRoaXMuX2NhbGxBcHBMaXN0ZW5lcihcIm9uU3dpdGNoUm9sZVwiLGUsWHQuQVVESUVOQ0UpKSksaS5sZW5ndGgmJnRoaXMuX2NhbGxBcHBMaXN0ZW5lcihcIm9uVXNlckpvaW5cIixpKSx2b2lkKG4ubGVuZ3RoJiZ0aGlzLl9jYWxsQXBwTGlzdGVuZXIoXCJvblVzZXJMZWF2ZVwiLG4pKTthLmxlbmd0aCYmdGhpcy5fY2FsbEFwcExpc3RlbmVyKFwib25Vc2VySm9pblwiLGEpLGMubGVuZ3RoJiZ0aGlzLl9jYWxsQXBwTGlzdGVuZXIoXCJvblVzZXJMZWF2ZVwiLGMpfSkpfWdldFJvb21JZCgpe3JldHVybiB0aGlzLl9yb29tSWR9Z2V0Q3J0VXNlcklkKCl7cmV0dXJuIHRoaXMuX2NvbnRleHQuZ2V0Q3VycmVudElkKCl9X19nZXRQQygpe3JldHVybiB0aGlzLl9wY31nZXRSZW1vdGVVc2VySWRzKCl7Y29uc3QgZT10aGlzLl9jb250ZXh0LmdldEN1cnJlbnRJZCgpO3JldHVybiBPYmplY3Qua2V5cyh0aGlzLl9yb29tUmVzb3VyY2VzKS5maWx0ZXIoKHQ9PnQhPT1lKSl9Z2V0UmVtb3RlVHJhY2tzKCl7Y29uc3QgZT1bXTtyZXR1cm4gdGhpcy5nZXRSZW1vdGVVc2VySWRzKCkuZm9yRWFjaCgodD0+e2UucHVzaCguLi50aGlzLmdldFJlbW90ZVRyYWNrc0J5VXNlcklkKHQpKX0pKSxlfWdldFJlbW90ZVRyYWNrc0J5VXNlcklkKGUpe2NvbnN0IHQ9W107Zm9yKGNvbnN0IHIgaW4gdGhpcy5fcmVtb3RlVHJhY2tzKXtjb25zdCBpPXRoaXMuX3JlbW90ZVRyYWNrc1tyXTtpLmdldFVzZXJJZCgpPT09ZSYmdC5wdXNoKGkpfXJldHVybiB0fWdldFNlc3Npb25JZCgpe3JldHVybiB0aGlzLl9zZXNzaW9uSWR9c2VuZE1lc3NhZ2UoZSx0KXtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0e2NvZGU6cn09eWllbGQgdGhpcy5fY29udGV4dC5zZW5kTWVzc2FnZShfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkNvbnZlcnNhdGlvblR5cGUuUlRDX1JPT00sdGhpcy5fcm9vbUlkLHttZXNzYWdlVHlwZTplLGNvbnRlbnQ6dCxpc1N0YXR1c01lc3NhZ2U6ITB9KTtyZXR1cm4gciE9PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1M/KEMuZXJyb3IoYHNlbmQgbWVzc2FnZSBmYWlsZWQgLT4gY29kZTogJHtyfWApLHtjb2RlOlQuU0lHTkFMX0VSUk9SfSk6e2NvZGU6VC5TVUNDRVNTfX0pKX1zZXRSb29tQXR0cmlidXRlKGUsdCxyLG49ITEpe3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3Qgcz15aWVsZCB0aGlzLl9jb250ZXh0LnNldFJUQ0RhdGEodGhpcy5fcm9vbUlkLGUsdCxuLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uUlRDQXBpVHlwZS5ST09NLHIpO3JldHVybiBzIT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUz8oQy5lcnJvcihgU2V0Um9vbUF0dHJpYnV0ZVZhbHVlIEZhaWxlZDogJHtzfWApLHtjb2RlOlQuU0lHTkFMX0VSUk9SfSk6e2NvZGU6VC5TVUNDRVNTfX0pKX1kZWxldGVSb29tQXR0cmlidXRlcyhlLHQscj0hMSl7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCBuPXlpZWxkIHRoaXMuX2NvbnRleHQucmVtb3ZlUlRDRGF0YSh0aGlzLl9yb29tSWQsZSxyLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uUlRDQXBpVHlwZS5ST09NLHQpO3JldHVybiBuIT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUz8oQy5lcnJvcihgRGVsZXRlUm9vbUF0dHJpYnV0ZSBGYWlsZWQ6ICR7bn1gKSx7Y29kZTpULlNJR05BTF9FUlJPUn0pOntjb2RlOlQuU1VDQ0VTU319KSl9Z2V0Um9vbUF0dHJpYnV0ZXMoZT1bXSx0PSExKXtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0e2NvZGU6cixkYXRhOm59PXlpZWxkIHRoaXMuX2NvbnRleHQuZ2V0UlRDRGF0YSh0aGlzLl9yb29tSWQsZSx0LF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uUlRDQXBpVHlwZS5ST09NKTtyZXR1cm4gciE9PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1M/KEMuZXJyb3IoYEdldFJvb21BdHRyaWJ1dGVzIEZhaWxlZDogJHtyfWApLHtjb2RlOlQuU0lHTkFMX0VSUk9SfSk6e2NvZGU6VC5TVUNDRVNTLGRhdGE6bn19KSl9X3NldFVzZXJBdHRyaWJ1dGVWYWx1ZShlLHQscil7cmV0dXJuIHRoaXMuX2NvbnRleHQuc2V0UlRDRGF0YSh0aGlzLl9yb29tSWQsZSx0LCExLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uUlRDQXBpVHlwZS5QRVJTT04scil9X2RlbGV0ZVVzZXJBdHRyaWJ1dGVzKGUsdCl7cmV0dXJuIHRoaXMuX2NvbnRleHQucmVtb3ZlUlRDRGF0YSh0aGlzLl9yb29tSWQsZSwhMSxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLlJUQ0FwaVR5cGUuUEVSU09OLHQpfV9nZXRVc2VyQXR0cmlidXRlcyhlKXtyZXR1cm4gdGhpcy5fY29udGV4dC5nZXRSVENEYXRhKHRoaXMuX3Jvb21JZCxlLCExLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uUlRDQXBpVHlwZS5QRVJTT04pfWlzRGVzdHJveWVkKCl7cmV0dXJuIHRoaXMuX2Rlc3Ryb3llZH1fX2Rlc3Ryb3koZSl7cmV0dXJuIHRoaXMuX2xlYXZlSGFuZGxlKGUpfV9sZWF2ZUhhbmRsZShlKXt2YXIgdDtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3RoaXMuX2Rlc3Ryb3llZHx8KHRoaXMuX2Rlc3Ryb3llZD0hMCxudWxsPT09KHQ9dGhpcy5fYXVkaW9MZXZlbFJlcG9ydCl8fHZvaWQgMD09PXR8fHQuY2xlYXJBdWRpb0xldmVsUmVwb3J0VGltZXIoKSxlJiYoeWllbGQgdGhpcy5fY29udGV4dC5xdWl0UlRDUm9vbSh0aGlzLl9yb29tSWQpKSx0aGlzLl9pc01haW5Sb29tJiZ0aGlzLl9xdWl0QWxsUEtSb29tKCksdGhpcy5fcGMucmVtb3ZlQWxsTG9jYWxUcmFjaygpLHRoaXMuX3Bpbmdlci5zdG9wKCksdGhpcy5faXNNYWluUm9vbSYmKHlpZWxkIHRoaXMuX3NlcnZpY2UuZXhpdCh0aGlzLl9nZXRSVENSZXFlc3RIZWFkZXJzKCkpKSx0aGlzLl9wYy5kZXN0cm95KCksdGhpcy5fcG9sYXJpc1JlcG9ydD1udWxsLHRoaXMuX3JlbW92ZVJlbW90ZVRyYWNrcygpKX0pKX1fb25Mb2NhbFRyYWNrRGVzdHJvaWVkKGUpe2UgaW5zdGFuY2VvZiBYZSYmZS5fX2lzVGlueSgpfHx0aGlzLnVucHVibGlzaChbZV0pfV9vbkxvY2FsVHJhY2tNdXRlZChlKXtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0IHQ9ZS5nZXRUcmFja0lkKCkscj10aGlzLl9jb250ZXh0LmdldEN1cnJlbnRJZCgpLG49W3tyZXNvdXJjZUlkOnQsZW5hYmxlZDohZS5pc0xvY2FsTXV0ZWQoKX1dLHM9dGhpcy5fcm9vbVJlc291cmNlc1tyXXx8W10sbz1bXTtmb3IobGV0IGU9MDtlPHMubGVuZ3RoO2UrPTEpe2NvbnN0IHQ9c1tlXSxyPW10KHQpLGk9bi5maW5kSW5kZXgoKGU9PmUucmVzb3VyY2VJZD09PXIpKTtpZihpPj0wKXtjb25zdHtlbmFibGVkOmV9PW5baV07dC5zdGF0ZT1lPzE6MCxvLnB1c2godCk7YnJlYWt9fWNvbnN0IGE9eWllbGQgaygoKCk9PnRoaXMuX2NvbnRleHQuc2V0UlRDVG90YWxSZXModGhpcy5fcm9vbUlkLGN0KE50Lk1PRElGWSxvKSxkdChzKSxOdC5UT1RBTF9DT05URU5UX1JFU09VUkNFKSkpO2EhPT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTJiZDLmVycm9yKFwibm90aWNlIGB0cmFjay5lbmFibGVkYCBjaGFuZ2UgZmFpbGVkIC0+IGNvZGU6IFwiK2EpfSkpfV9yZW1vdmVQdWJGYWlsZWRUcmFja3MoZSl7ZS5mb3JFYWNoKChlPT57Y29uc3QgdD1lIGluc3RhbmNlb2YgemU/ZTplLnRyYWNrO0MuZGVidWcoYHJlbW92ZSBwdWIgZmFpbGVkIHRyYWNrIGZyb20gcGVlcmNvbm5lY3Rpb24gLT4gdHJhY2tJZDogJHt0LmdldFRyYWNrSWQoKX1gKSx0aGlzLl9wYy5yZW1vdmVMb2NhbFRyYWNrQnlJZCh0LmdldFRyYWNrSWQoKSl9KSl9cHVibGlzaChlKXtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiBrKCgoKT0+dGhpcy5fX3B1Ymxpc2goZSkpKX0pKX1fX3B1Ymxpc2goZSl7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtpZighdGhpcy5faXNNYWluUm9vbSYmdGhpcyBpbnN0YW5jZW9mIF9yKXJldHVybiBDLmVycm9yKFwidGhlIGBwdWJsaXNoYCBpcyBkaXNhYmxlZCBpbiBQSyByb29tIFwiKSx7Y29kZTpULlRIRV9GVU5DVElPTl9JU19ESVNBQkxFRF9JTl9QS1JPT019O2lmKHRoaXMuX2Fzc2VydFJvb21EZXN0cm95ZWQoKSlyZXR1cm4gQy5lcnJvcihgcHVibGlzaCBmYWlsZWQsIHJvb20gaGFzIGJlZW4gZGVzdHJveWVkLiAtPiByb29tSWQ6ICR7dGhpcy5fcm9vbUlkfWApLHtjb2RlOlQuUk9PTV9IQVNfQkVFTl9ERVNUUk9ZRUR9O2lmKCEoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLnZhbGlkYXRlKShcInRyYWNrc1wiLGUsKCgpPT4oMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmlzQXJyYXkpKGUpJiZlLmxlbmd0aD4wJiZlLmV2ZXJ5KChlPT5lIGluc3RhbmNlb2YgemV8fGUudHJhY2sgaW5zdGFuY2VvZiB6ZSkpKSwhMCkpcmV0dXJuIEMuZXJyb3IoYHB1Ymxpc2ggZmFpbGVkLCB0cmFja3MgaXMgaW52YWxpZCAtPiByb29tSWQ6ICR7dGhpcy5fcm9vbUlkfWApLHtjb2RlOlQuUEFSQU1TX0VSUk9SfTtjb25zdCB0PXRoaXMuX2NvbnRleHQuZ2V0Q3VycmVudElkKCk7aWYodGhpcy5fcGMuZ2V0TG9jYWxUcmFja3MoKS5sZW5ndGgrKGU9PntsZXQgdD0wO3JldHVybiBlLmZvckVhY2goKGU9PntlIGluc3RhbmNlb2YgemU/dCsrOmUucHViVGlueSYmZS50cmFjay5pc1ZpZGVvVHJhY2soKT90Kz0yOnQrK30pKSx0fSkoZSk+MTApcmV0dXJuIEMuZXJyb3IoYHB1Ymxpc2ggZmFpbGVkLCB0cmFja3MgbGltaXQgZXhjZWVkZWQgLT4gcm9vbUlkOiAke3RoaXMuX3Jvb21JZH1gKSx7Y29kZTpULlBVQkxJU0hfVFJBQ0tfTElNSVRfRVhDRUVERUR9O0MuZGVidWcoYHB1Ymxpc2ggdHJhY2tzIC0+IHJvb21JZDogJHt0aGlzLl9yb29tSWR9LCB0cmFja3M6ICR7ZS5tYXAodHIpfWApLGUuZm9yRWFjaCgoZT0+e2NvbnN0e3RyYWNrOnQscHViVGlueTpyfT1lIGluc3RhbmNlb2YgemU/e3B1YlRpbnk6ITEsdHJhY2s6ZX06ZTtpZih0aGlzLl9wYy5hZGRMb2NhbFRyYWNrKHQpLHQuaXNWaWRlb1RyYWNrKCkmJnIpe2xldCBlO3RyeXtlPXQuX19pbm5lckdldE1lZGlhU3RyZWFtVHJhY2soKS5jbG9uZSgpO2NvbnN0IGk9ci5mcmFtZVJhdGV8fEJlLkZQU18xNSxuPXIucmVzb2x1dGlvbnx8SGUuVzE3Nl9IMTQ0LHt3aWR0aDpzLGhlaWdodDpvfT1DdChuKSxhPUV0KGkpO2UuYXBwbHlDb25zdHJhaW50cyh7d2lkdGg6cyxoZWlnaHQ6byxmcmFtZVJhdGU6YX0pfWNhdGNoKHIpe3JldHVybiBudWxsPT1lfHxlLnN0b3AoKSx2b2lkIEMud2FybihgcHViVGlueSBmYWlsZWQgLT4gaWQ6ICR7dC5nZXRUcmFja0lkKCl9LCBtc2c6ICR7ci5tZXNzYWdlfWApfXRoaXMuX3BjLmFkZExvY2FsVHJhY2sobmV3IFhlKHQuZ2V0VGFnKCksdC5nZXRVc2VySWQoKSxlLCEwKSl9fSkpLHRoaXMuX3BjLmNsZWFyUmVUcnlFeGNoYW5nZVRpbWVyKCk7Y29uc3Qgcj15aWVsZCB0aGlzLl9jcmVhdGVFeGNoYW5nZVBhcmFtcyh0aGlzLl9zdWJzY3JpYmVkTGlzdCwhMSksbj10aGlzLl9nZXRQdXNoT3RoZXJSb29tc1BhcmFtcygpO24mJihyLnB1c2hPdGhlclJvb21zPW4pO2NvbnN0IHM9eWllbGQgdGhpcy5fZXhjaGFuZ2VIYW5kbGUocik7aWYocy5jb2RlIT09VC5TVUNDRVNTKXJldHVybiBDLmVycm9yKGBwdWJsaXNoIGZhaWxlZCAtPiByb29tSWQ6ICR7dGhpcy5fcm9vbUlkfSwgY29kZTogJHtzLmNvZGV9YCksdGhpcy5fcmVtb3ZlUHViRmFpbGVkVHJhY2tzKGUpLHtjb2RlOnMuY29kZX07Y29uc3R7cHVibGlzaExpc3Q6byxzZHA6YSxyZXN1bHRDb2RlOmwsbWVzc2FnZTpoLHVybHM6cCxtY3VQdWJsaXNoTGlzdDpffT1zLmRhdGE7aWYobCE9PVQuU1VDQ0VTUylyZXR1cm4gQy5lcnJvcihgcHVibGlzaCBmYWlsZWQgLT4gcm9vbUlkOiAke3RoaXMuX3Jvb21JZH0sIGNvZGU6ICR7bH0sIG1zZzogJHtofWApLHRoaXMuX3JlbW92ZVB1YkZhaWxlZFRyYWNrcyhlKSx7Y29kZTpsfTtjb25zdCBtPXlpZWxkIHRoaXMuX3BjLnNldFJlbW90ZUFuc3dlcihhLnNkcCk7aWYobSE9PVQuU1VDQ0VTUylyZXR1cm57Y29kZTptfTtjb25zdCBmPXRoaXMuX3Jvb21SZXNvdXJjZXNbdF0sdj1vLm1hcCgoZT0+T2JqZWN0LmFzc2lnbih7dGFnOmUubXNpZC5zcGxpdChcIl9cIikucG9wKCksc3RhdGU6dGhpcy5fZ2V0UmVzb3VyY2VTdGF0ZShtdChlKSl9LGUpKSkse3B1Ymxpc2hlZExpc3Q6Un09Z3QoZix2KSxnPShudWxsPT1fP3ZvaWQgMDpfLm1hcCgoZT0+T2JqZWN0LmFzc2lnbih7dGFnOmUubXNpZC5zcGxpdChcIl9cIikucG9wKCksc3RhdGU6MX0sZSkpKSl8fFtdLFM9eWllbGQgdGhpcy5fY29udGV4dC5zZXRSVENUb3RhbFJlcyh0aGlzLl9yb29tSWQsY3QoTnQuUFVCTElTSCxSKSxkdCh2KSxOdC5UT1RBTF9DT05URU5UX1JFU09VUkNFLGR0KGcpKTtpZihTIT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUylyZXR1cm4gQy5lcnJvcihgc2VuZCBwdWJsaXNoIHN0cmVhbXMgbm90aWZpY2F0aW9uIGZhaWxlZDogJHtTfWApLHtjb2RlOlQuU0lHTkFMX0VSUk9SfTt0aGlzLl9yb29tUmVzb3VyY2VzW3RdPXY7Y29uc3QgST1SLm1hcCgoZT0+bXQoZSkpKTtyZXR1cm4gdGhpcy5fcG9sYXJpc1JlcG9ydCYmdGhpcy5fcG9sYXJpc1JlcG9ydC5zZW5kUjIoenQuUFVCTElTSCxRdC5CRUdJTixJKSxlLmZvckVhY2goKGU9Pntjb25zdHt0cmFjazp0fT1lIGluc3RhbmNlb2YgemU/e3RyYWNrOmV9OmU7dC5fX2lubmVyU2V0UHVibGlzaGVkKCEwKX0pKSxDLmRlYnVnKGBwdWJsaXNoIHN1Y2Nlc3M6ICR7SS5qb2luKFwiLFwiKX1gKSx0aGlzLl9yb29tTW9kZT09PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uUlRDTW9kZS5MSVZFP3tjb2RlOlQuU1VDQ0VTUyxsaXZlVXJsOm51bGw9PXA/dm9pZCAwOnAubGl2ZVVybH06e2NvZGU6VC5TVUNDRVNTfX0pKX1fZ2V0UHVzaE90aGVyUm9vbXNQYXJhbXMoKXtpZih0aGlzIGluc3RhbmNlb2YgX3Ipe2NvbnN0e2NvZGU6ZSxyb29tUEtIYW5kbGVyOnR9PXRoaXMuZ2V0Um9vbVBLSGFuZGxlcigpLHI9W107aWYoZT09PVQuU1VDQ0VTUyYmdCl7Y29uc3QgZT10LmdldEpvaW5lZFBLUm9vbXMoKTtmb3IoY29uc3QgaSBpbiBlKXtjb25zdCBuPWVbaV0uZ2V0U2Vzc2lvbklkKCkscz10LmdldFBLSW5mbyhpKTtpZighcylyZXR1cm47Y29uc3R7aW52aXRlclVzZXJBdXRvTWl4Om8saW52aXRlZVVzZXJBdXRvTWl4OmEsaW52aXRlclVzZXJJZDpjfT1zLGQ9dGhpcy5fY29udGV4dC5nZXRDdXJyZW50SWQoKT09PWM7ci5wdXNoKHtyb29tSWQ6aSxzZXNzaW9uSWQ6bixhdXRvTWl4OmQ/ISFvOiEhYX0pfX1yZXR1cm4gcn19X3JlVHJ5RXhjaGFuZ2UoKXtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2soKCgpPT5TKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3QgZT15aWVsZCB0aGlzLl9jcmVhdGVFeGNoYW5nZVBhcmFtcyh0aGlzLl9zdWJzY3JpYmVkTGlzdCwhMCksdD10aGlzLl9nZXRQdXNoT3RoZXJSb29tc1BhcmFtcygpO3QmJihlLnB1c2hPdGhlclJvb21zPXQpO2NvbnN0IHI9eWllbGQgdGhpcy5fZXhjaGFuZ2VIYW5kbGUoZSk7aWYoci5jb2RlIT09VC5TVUNDRVNTKXJldHVybiBDLmVycm9yKGByZVRyeUV4Y2hhbmdlIGZhaWxlZDogJHtyLmNvZGV9YCkse2NvZGU6ci5jb2RlfTtjb25zdHtzZHA6aSxyZXN1bHRDb2RlOm59PXIuZGF0YTtpZihuIT09VC5TVUNDRVNTKXJldHVybiBDLmVycm9yKGByZVRyeUV4Y2hhbmdlIGZhaWxlZDogJHtufWApLHtjb2RlOm59O3RoaXMuX3BjLmNsZWFyUmVUcnlFeGNoYW5nZVRpbWVyKCk7Y29uc3Qgcz15aWVsZCB0aGlzLl9wYy5zZXRSZW1vdGVBbnN3ZXIoaS5zZHApO3JldHVybiBzIT09VC5TVUNDRVNTP3tjb2RlOnN9OnZvaWQgMH0pKSkpfSkpfV9leGNoYW5nZUhhbmRsZShlKXtyZXR1cm4gdGhpcy5fc2VydmljZS5leGNoYW5nZSh0aGlzLl9nZXRSVENSZXFlc3RIZWFkZXJzKCksZSl9X2dldFJUQ1JlcWVzdEhlYWRlcnMoKXtyZXR1cm57XCJBcHAtS2V5XCI6dGhpcy5fY29udGV4dC5nZXRBcHBrZXkoKSxSb29tSWQ6dGhpcy5fcm9vbUlkLFRva2VuOnRoaXMuX3Rva2VuLFJvb21UeXBlOnRoaXMuX3Jvb21Nb2RlLFVzZXJJZDp0aGlzLl9jb250ZXh0LmdldEN1cnJlbnRJZCgpfX1fY3JlYXRlRXhjaGFuZ2VQYXJhbXMoZSx0KXtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybntzZHA6eWllbGQgdGhpcy5fcGMuY3JlYXRlT2ZmZXIodCksZXh0ZW5kOkpTT04uc3RyaW5naWZ5KHtyZXNvbHV0aW9uSW5mbzp0aGlzLl9wYy5nZXRPdXRib3VuZFZpZGVvSW5mbygpfSksc3Vic2NyaWJlTGlzdDplLmZpbHRlcigoZT0+e2NvbnN0IHQ9ZS50cmFjay5nZXRUcmFja0lkKCkse3VzZXJJZDpyfT1mdCh0KTtpZighdGhpcy5fcm9vbVJlc291cmNlc1tyXSlyZXR1cm4hMTtjb25zdCBpPXRoaXMuX3Jvb21SZXNvdXJjZXNbcl0uZmlsdGVyKChlPT50PT09YCR7ZS5tc2lkfV8ke2UubWVkaWFUeXBlfWApKS5sZW5ndGg7cmV0dXJuIGl9KSkubWFwKChlPT4oe3NpbXVsY2FzdDplLnN1YlRpbnk/TXQuVElOWTpNdC5OT1JNQUwscmVzb2x1dGlvbjpcIlwiLHVyaTp0aGlzLl9nZXRSZXNvdXJjZUJ5SWQoZS50cmFjay5nZXRUcmFja0lkKCkpLnVyaX0pKSksc3dpdGNoc3RyZWFtOiExfX0pKX1fZ2V0UmVzb3VyY2VTdGF0ZShlKXt2YXIgdDtyZXR1cm4obnVsbD09PSh0PXRoaXMuZ2V0TG9jYWxUcmFjayhlKSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuaXNMb2NhbE11dGVkKCkpPzA6MX11bnB1Ymxpc2goZSl7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4gaygoKCk9PnRoaXMuX191bnB1Ymxpc2goZSkpKX0pKX1fX3VucHVibGlzaChlKXt2YXIgdDtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2lmKCF0aGlzLl9pc01haW5Sb29tJiZ0aGlzIGluc3RhbmNlb2YgX3IpcmV0dXJuIEMuZXJyb3IoXCJ0aGUgYHVucHVibGlzaGAgaXMgZGlzYWJsZWQgaW4gUEsgcm9vbSBcIikse2NvZGU6VC5USEVfRlVOQ1RJT05fSVNfRElTQUJMRURfSU5fUEtST09NfTtpZih0aGlzLl9hc3NlcnRSb29tRGVzdHJveWVkKCkpcmV0dXJuIEMud2Fybihgcm9vbSBoYXMgYmVlbiBkZXN0cm95ZWQsIG5vIG5lZWQgdG8gdW5wdWJsaXNoIHRyYWNrcyAtPiByb29tSWQ6ICR7dGhpcy5fcm9vbUlkfWApLHtjb2RlOlQuU1VDQ0VTU307Y29uc3Qgcj10aGlzLl9jb250ZXh0LmdldEN1cnJlbnRJZCgpO2lmKCEoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLnZhbGlkYXRlKShcInRyYWNrc1wiLGUsKCgpPT5lLmV2ZXJ5KChlPT5lLmdldFVzZXJJZCgpPT09ciYmZSBpbnN0YW5jZW9mIHplKSkpLCEwKSlyZXR1cm4gQy53YXJuKGB1bnB1Ymxpc2ggZmFpbGVkLCB0cmFja3MgaXMgaW52YWxpZCAtPiByb29tSWQ6ICR7dGhpcy5fcm9vbUlkfSwgdHJhY2tzOiAke2UubWFwKHRyKX1gKSx7Y29kZTpULlBBUkFNU19FUlJPUn07Y29uc3Qgbj1lLm1hcCgoZT0+ZS5nZXRUcmFja0lkKCkpKSxzPW4ubWFwKHRoaXMuX2dldFJlc291cmNlQnlJZC5iaW5kKHRoaXMpKS5maWx0ZXIoKGU9PiEhZSkpO2lmKDA9PT1zLmxlbmd0aClyZXR1cm57Y29kZTpULlNVQ0NFU1N9O2NvbnN0IG89dGhpcy5fcm9vbVJlc291cmNlc1tyXS5maWx0ZXIoKGU9PiFzLmluY2x1ZGVzKGUpKSk7bi5mb3JFYWNoKChlPT50aGlzLl9wYy5yZW1vdmVMb2NhbFRyYWNrQnlJZChlKSkpLG51bGw9PT0odD10aGlzLl9wb2xhcmlzUmVwb3J0KXx8dm9pZCAwPT09dHx8dC5zZW5kUjIoenQuUFVCTElTSCxRdC5FTkQsbiksdGhpcy5fcGMuY2xlYXJSZVRyeUV4Y2hhbmdlVGltZXIoKTtjb25zdCBhPXlpZWxkIHRoaXMuX2NyZWF0ZUV4Y2hhbmdlUGFyYW1zKHRoaXMuX3N1YnNjcmliZWRMaXN0LCExKSxkPXRoaXMuX2dldFB1c2hPdGhlclJvb21zUGFyYW1zKCk7ZCYmKGEucHVzaE90aGVyUm9vbXM9ZCk7Y29uc3QgdT15aWVsZCB0aGlzLl9leGNoYW5nZUhhbmRsZShhKTtpZih1LmNvZGUhPT1ULlNVQ0NFU1MpcmV0dXJuIEMuZXJyb3IoYGV4Y2hhbmdlIGZhaWxlZCAtPiBjb2RlOiAke3UuY29kZX1gKSx7Y29kZTp1LmNvZGV9O2NvbnN0e3B1Ymxpc2hMaXN0Omwsc2RwOmgscmVzdWx0Q29kZTpwLG1lc3NhZ2U6XyxtY3VQdWJsaXNoTGlzdDptfT11LmRhdGE7cCE9PVQuU1VDQ0VTUyYmQy5lcnJvcihgdW5wdWJsaXNoIHN0cmVhbXMgZmFpbGVkIC0+IGNvZGU6ICR7cH0sIG1zZzogJHtffWApO2NvbnN0IGY9bT9tLm1hcCgoZT0+T2JqZWN0LmFzc2lnbih7dGFnOmUubXNpZC5zcGxpdChcIl9cIikucG9wKCksc3RhdGU6MX0sZSkpKTpbXSx2PXlpZWxkIHRoaXMuX2NvbnRleHQuc2V0UlRDVG90YWxSZXModGhpcy5fcm9vbUlkLGN0KE50LlVOUFVCTElTSCxzKSxkdChvKSxOdC5UT1RBTF9DT05URU5UX1JFU09VUkNFLGR0KGYpKTtpZih2IT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUylyZXR1cm4gQy5lcnJvcihcInNlbmQgdW5wdWJsaXNoIG5vdGlmaWNhdGlvbiBmYWlsZWQ6XCIsdikse2NvZGU6VC5TSUdOQUxfRVJST1J9O0MuZGVidWcoYHVucHVibGlzaCBzdWNjZXNzIC0+IHRyYWNrczogJHtuLmpvaW4oXCIsXCIpfWApO2NvbnN0IFI9eWllbGQgdGhpcy5fcGMuc2V0UmVtb3RlQW5zd2VyKGguc2RwKTtpZihSIT09VC5TVUNDRVNTKXJldHVybntjb2RlOlJ9O2NvbnN0IGc9bC5tYXAoKGU9Pk9iamVjdC5hc3NpZ24oe3RhZzplLm1zaWQuc3BsaXQoXCJfXCIpLnBvcCgpLHN0YXRlOnRoaXMuX2dldFJlc291cmNlU3RhdGUobXQoZSkpfSxlKSkpO3JldHVybiB0aGlzLl9yb29tUmVzb3VyY2VzW3JdPWcse2NvZGU6VC5TVUNDRVNTfX0pKX1fZ2V0UmVzb3VyY2VCeUlkKGUpe2NvbnN0e3VzZXJJZDp0fT1mdChlKTtyZXR1cm4gdGhpcy5fcm9vbVJlc291cmNlc1t0XS5maW5kKCh0PT5tdCh0KT09PWUpKX1faXNWYWxpZFJlc291cmNlSWQoZSl7dmFyIHQ7Y29uc3R7dXNlcklkOnJ9PWZ0KGUpO3JldHVybiEhKG51bGw9PT0odD10aGlzLl9yb29tUmVzb3VyY2VzW3JdKXx8dm9pZCAwPT09dD92b2lkIDA6dC5maW5kKCh0PT5tdCh0KT09PWUpKSl9c3Vic2NyaWJlKGUpe3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIGsoKCgpPT50aGlzLl9fc3Vic2NyaWJlKGUsITEpKSl9KSl9X19zdWJzY3JpYmUoZSx0PSExKXt2YXIgcjtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2lmKHRoaXMuX2Fzc2VydFJvb21EZXN0cm95ZWQoKSlyZXR1cm4gQy5lcnJvcihgc3Vic2NyaWJlIGZhaWxlZCwgcm9vbSBoYXMgYmVlbiBkZXN0cm95ZWQgLT4gcm9vbUlkOiAke3RoaXMuX3Jvb21JZH1gKSx7Y29kZTpULlJPT01fSEFTX0JFRU5fREVTVFJPWUVEfTtpZighKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy52YWxpZGF0ZSkoXCJ0cmFja3NcIixlLCgoKT0+KDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5pc0FycmF5KShlKSYmZS5sZW5ndGg+MCYmZS5ldmVyeSgoZT0+ZSBpbnN0YW5jZW9mIHN0fHxlLnRyYWNrIGluc3RhbmNlb2Ygc3QpKSksITApKXJldHVybiBDLmVycm9yKGBzdWJzY3JpYmUgZmFpbGVkLCB0cmFja3MgaXMgaW52YWxpZCAtPiByb29tSWQ6ICR7dGhpcy5fcm9vbUlkfWApLHtjb2RlOlQuUEFSQU1TX0VSUk9SfTtDLmluZm8oYHN1YnNjcmliZSAtPiByb29tSWQ6ICR7dGhpcy5fcm9vbUlkfSwgdHJhY2tzOiAke2UubWFwKHRyKX1gKTtjb25zdCBpPXRoaXMuX3N1YnNjcmliZWRMaXN0Lm1hcCgoZT0+T2JqZWN0LmFzc2lnbih7fSxlKSkpLG49ZS5tYXAoKGU9PmUgaW5zdGFuY2VvZiBzdD97dHJhY2s6ZX06ZSkpO2xldCBzPSExO2NvbnN0IG89W107cmV0dXJuIG4uZm9yRWFjaCgoZT0+e2NvbnN0IHQ9ZS50cmFjay5nZXRUcmFja0lkKCk7by5wdXNoKHQpO2NvbnN0IHI9aS5maW5kKChlPT5lLnRyYWNrLmdldFRyYWNrSWQoKT09PXQpKTtyJiZyLnN1YlRpbnk9PT1lLnN1YlRpbnl8fChyP3Iuc3ViVGlueT1lLnN1YlRpbnk6aS5wdXNoKGUpLHM9ITApfSkpLHN8fHQ/KG51bGw9PT0ocj10aGlzLl9wb2xhcmlzUmVwb3J0KXx8dm9pZCAwPT09cnx8ci5zZW5kUjIoenQuU1VCU0NSSUJFLFF0LkJFR0lOLG8pLHRoaXMuX3VwZGF0ZVN1Ykxpc3RIYW5kbGUoaSwhMCkpOntjb2RlOlQuU1VDQ0VTU319KSl9dW5zdWJzY3JpYmUoZSl7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4gaygoKCk9PnRoaXMuX191bnN1YnNjcmliZShlKSkpfSkpfV9fdW5zdWJzY3JpYmUoZSl7dmFyIHQ7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtpZih0aGlzLl9hc3NlcnRSb29tRGVzdHJveWVkKCkpcmV0dXJuIEMud2Fybihgcm9vbSBoYXMgYmVlZCBkZXN0cm95ZWQsIG5vIG5lZWQgdG8gdW5zdWJzY3JpYmUgdHJhY2tzIC0+IHJvb21JZDogJHt0aGlzLl9yb29tSWR9YCkse2NvZGU6VC5TVUNDRVNTfTtpZighKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy52YWxpZGF0ZSkoXCJ0cmFja3NcIixlLCgoKT0+KDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5pc0FycmF5KShlKSYmZS5sZW5ndGg+MCYmZS5ldmVyeSgoZT0+ZSBpbnN0YW5jZW9mIHN0KSkpLCEwKSlyZXR1cm4gQy5lcnJvcihgdW5zdWJzY3JpYmUgZmFpbGVkLCB0cmFja3MgaXMgaW52YWxpZCAtPiByb29tSWQ6ICR7dGhpcy5fcm9vbUlkfWApLHtjb2RlOlQuUEFSQU1TX0VSUk9SfTtDLmluZm8oYHVuc3Vic2NyaWJlIC0+IHJvb21JZDogJHt0aGlzLl9yb29tSWR9LCB0cmFja3M6ICR7ZS5tYXAodHIpfWApO2NvbnN0IHI9dGhpcy5fc3Vic2NyaWJlZExpc3QubWFwKChlPT5PYmplY3QuYXNzaWduKHt9LGUpKSkuZmlsdGVyKCh0PT4hZS5pbmNsdWRlcyh0LnRyYWNrKSkpO3JldHVybiBudWxsPT09KHQ9dGhpcy5fcG9sYXJpc1JlcG9ydCl8fHZvaWQgMD09PXR8fHQuc2VuZFIyKHp0LlNVQlNDUklCRSxRdC5FTkQsZS5tYXAoKGU9PmUuZ2V0VHJhY2tJZCgpKSkpLHRoaXMuX3VwZGF0ZVN1Ykxpc3RIYW5kbGUociwhMSl9KSl9X2Fzc2VydFJvb21EZXN0cm95ZWQoKXtpZih0aGlzLl9kZXN0cm95ZWQpe2NvbnN0IGU9XCJUaGlzIHJvb20gaGFzIGJlZW4gZGVzdHJveWVkLiBQbGVhc2UgdXNlIGBSQ1JUQ0NsaWVudC5qb2luUlRDUm9vbWAgb3IgYFJDUlRDQ2xpZW50LmpvaW5MaXZpbmdSb29tYCB0byBjYXRjaCBhbm90aGVyIGluc3RhbmNlLlwiO3JldHVybiBDLndhcm4oZSksVC5ST09NX0hBU19CRUVOX0RFU1RST1lFRH19Z2V0TG9jYWxUcmFjayhlKXtyZXR1cm4gdGhpcy5fcGMuZ2V0TG9jYWxUcmFjayhlKX1nZXRMb2NhbFRyYWNrcygpe3JldHVybiB0aGlzLl9wYy5nZXRMb2NhbFRyYWNrcygpfWdldFJlbW90ZVRyYWNrKGUpe3JldHVybiB0aGlzLl9yZW1vdGVUcmFja3NbZV18fG51bGx9dXBkYXRlU3ViTGlzdChlKXtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiBrKCgoKT0+dGhpcy5fdXBkYXRlU3ViTGlzdEhhbmRsZShlLCExKSkpfSkpfV91cGRhdGVTdWJMaXN0SGFuZGxlKGUsdD0hMSl7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtpZih0aGlzLl9hc3NlcnRSb29tRGVzdHJveWVkKCkpcmV0dXJue2NvZGU6VC5ST09NX0hBU19CRUVOX0RFU1RST1lFRH07aWYoISgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18udmFsaWRhdGUpKFwicmVzb3VyY2VzXCIsZSwoKCk9PigwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uaXNBcnJheSkoZSkmJmUuZXZlcnkoKGU9PmUgaW5zdGFuY2VvZiBzdHx8ZS50cmFjayBpbnN0YW5jZW9mIHN0KSkpLCEwKSlyZXR1cm4gQy5lcnJvcihgdXBkYXRlIHN1Ymxpc3QgZmFpbGVkLCB0cmFja3MgaXMgaW52YWxpZCAtPiByb29tSWQ6ICR7dGhpcy5fcm9vbUlkfWApLHtjb2RlOlQuUEFSQU1TX0VSUk9SfTtDLmluZm8oYHVwZGF0ZSBzdWJzY3JpYmUgbGlzdCAtPiByb29tSWQ6ICR7dGhpcy5fcm9vbUlkfSwgZm9yY2VSZXE6ICR7dH0sIHRyYWNrczogJHtlLm1hcCh0cil9YCk7bGV0IHI9ZS5tYXAoKGU9PmUgaW5zdGFuY2VvZiBzdD97dHJhY2s6ZX06T2JqZWN0LmFzc2lnbih7fSxlKSkpO2NvbnN0IGk9e307cj1yLmZpbHRlcigoZT0+e2NvbnN0IHQ9ZS50cmFjay5nZXRUcmFja0lkKCk7cmV0dXJuIHRoaXMuX3JlbW90ZVRyYWNrc1t0XT8haVt0XSYmKGlbdF09ITApOihDLndhcm4oYHRyYWNrIGNhbm5vdCBmb3VuZCBpbiByb29tIC0+IHRyYWNrSWQ6ICR7dH1gKSwhMSl9KSkubWFwKChlPT5PYmplY3QuYXNzaWduKHt9LGUpKSk7Y29uc3Qgbj10aGlzLl9zdWJzY3JpYmVkTGlzdC5tYXAoKGU9Pk9iamVjdC5hc3NpZ24oe30sZSkpKTtpZighdCl7bGV0IGU9ITE7aWYoci5mb3JFYWNoKCh0PT57Y29uc3Qgcj1uLmZpbmRJbmRleCgoZT0+ZS50cmFjaz09PXQudHJhY2spKTtpZigtMT09PXIpcmV0dXJuIHZvaWQoZT0hMCk7bi5zcGxpY2UociwxKVswXS5zdWJUaW55IT09dC5zdWJUaW55JiYoZT0hMCl9KSksbi5sZW5ndGgmJihlPSEwKSwhZSlyZXR1cm57Y29kZTpULlNVQ0NFU1N9fXRoaXMuX3BjLmNsZWFyUmVUcnlFeGNoYW5nZVRpbWVyKCksdGhpcy5fcGMudXBkYXRlU3ViUmVtb3RlVHJhY2tzKHIubWFwKChlPT5lLnRyYWNrKSkpO2NvbnN0IHM9eWllbGQgdGhpcy5fY3JlYXRlRXhjaGFuZ2VQYXJhbXMociwhMSksbz10aGlzLl9nZXRQdXNoT3RoZXJSb29tc1BhcmFtcygpO28mJihzLnB1c2hPdGhlclJvb21zPW8pO2NvbnN0IGE9eWllbGQgdGhpcy5fZXhjaGFuZ2VIYW5kbGUocyksdT1yLm1hcCgoZT0+ZS50cmFjay5nZXRUcmFja0lkKCkpKTtpZihhLmNvZGUhPT1ULlNVQ0NFU1MpcmV0dXJue2NvZGU6YS5jb2RlfTtjb25zdHtzZHA6bCxyZXN1bHRDb2RlOmgsbWVzc2FnZTpwLHN1YnNjcmliZWRMaXN0Ol99PWEuZGF0YTtpZihoIT09VC5TVUNDRVNTKXJldHVybiBDLmVycm9yKGBjaGFuZ2Ugc3Vic2NyaWJlIGxpc3QgZmFpbGVkOiAke2h9YCkse2NvZGU6aH07Qy5kZWJ1Zyhgc3Vic2NyaWJlIHN1Y2Nlc3M6ICR7dS5qb2luKFwiLFwiKX1gKTtjb25zdCBtPXlpZWxkIHRoaXMuX3BjLnNldFJlbW90ZUFuc3dlcihsLnNkcCk7aWYobSE9PVQuU1VDQ0VTUylyZXR1cm57Y29kZTptfTtjb25zdCBmPW51bGw9PV8/dm9pZCAwOl8ubWFwKChlPT5gJHtlLm1zaWR9XyR7ZS5tZWRpYVR5cGV9YCkpLHY9ci5maWx0ZXIoKGU9Pm51bGw9PWY/dm9pZCAwOmYuaW5jbHVkZXMoZS50cmFjay5nZXRUcmFja0lkKCkpKSksUj1yLmZpbHRlcigoZT0+IShudWxsPT1mP3ZvaWQgMDpmLmluY2x1ZGVzKGUudHJhY2suZ2V0VHJhY2tJZCgpKSkpKTtmb3IoY29uc3QgZSBpbiB0aGlzLl9yZW1vdGVUcmFja3Mpe2NvbnN0IHQ9di5zb21lKCh0PT50LnRyYWNrLmdldFRyYWNrSWQoKT09PWUpKTt0aGlzLl9yZW1vdGVUcmFja3NbZV0uX19pbm5lclNldFN1YnNjcmliZWQodCl9cmV0dXJuIHRoaXMuX3N1YnNjcmliZWRMaXN0LnNwbGljZSgwLHRoaXMuX3N1YnNjcmliZWRMaXN0Lmxlbmd0aCwuLi52KSxSLmxlbmd0aD97Y29kZTpULlNVQ0NFU1MsZmFpbGVkTGlzdDpSfTp7Y29kZTpULlNVQ0NFU1N9fSkpfXJlZ2lzdGVyUm9vbUV2ZW50TGlzdGVuZXIoZSl7dGhpcy5fYXBwTGlzdGVuZXI9ZX1yZWdpc3RlclJlcG9ydExpc3RlbmVyKGUpe3RoaXMuX3BjLnJlZ2lzdGVyUmVwb3J0TGlzdGVuZXIoZSl9b25BdWRpb0xldmVsQ2hhbmdlKGUsdCl7dmFyIHI7bnVsbD09PShyPXRoaXMuX2F1ZGlvTGV2ZWxSZXBvcnQpfHx2b2lkIDA9PT1yfHxyLmNsZWFyQXVkaW9MZXZlbFJlcG9ydFRpbWVyKCksdGhpcy5fYXVkaW9MZXZlbFJlcG9ydD1uZXcgZXIodGhpcyksdGhpcy5fYXVkaW9MZXZlbFJlcG9ydC5vbkF1ZGlvTGV2ZWxDaGFuZ2UoZSx0fHwxZTMpfV9fb25SZWNvbm5lY3RlZChlKXtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2lmKFwiY2xvc2VkXCI9PT10aGlzLl9wYy5nZXRSVENQZWVyQ29ubigpLmNvbm5lY3Rpb25TdGF0ZSlyZXR1cm4gQy53YXJuKFwiUlRDUGVlckNvbm5lY3Rpb24gY2xvc2VkLiBQbGVhc2UgcmVqb2luIHJvb20gdG8gcmVzdG9yZSBzZXJ2aWNlcy5cIiksdm9pZCB0aGlzLl9ydGNwZWVyQ2xvc2VkKCk7Y29uc3R7Y29kZTp0LGRhdGE6cn09eWllbGQgdGhpcy5fY29udGV4dC5qb2luUlRDUm9vbSh0aGlzLl9yb29tSWQsdGhpcy5fcm9vbU1vZGUsZSk7aWYodCE9PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1MpcmV0dXJuIHZvaWQgQy5lcnJvcihgUlRDIF9fb25SZWNvbm5lY3RlZCBnZXRSVENSb29tSW5mbyBmYWlsZWQ6ICR7dH1gKTtDLmRlYnVnKGBSVEMgX19vblJlY29ubmVjdGVkIGdldFJUQ1Jvb21JbmZvIHN1Y2Nlc3M6ICR7SlNPTi5zdHJpbmdpZnkocil9YCk7Y29uc3Qgbj1bXSxzPXt9LG89e30sYT17fSxjPUx0KHIpLGQ9T2JqZWN0LmtleXMoYyksdT1PYmplY3Qua2V5cyh0aGlzLl9yb29tUmVzb3VyY2VzKTtmb3IobGV0IGU9ZC5sZW5ndGgtMTtlPj0wO2UtPTEpe2NvbnN0IHQ9ZFtlXSxyPXUuaW5kZXhPZih0KTtpZigtMT09PXIpe24ucHVzaCh0KSxzW3RdPVJ0KGNbdF0pO2NvbnRpbnVlfWNvbnN0IGk9dGhpcy5fcm9vbVJlc291cmNlc1t0XSxsPWNbdF0se3B1Ymxpc2hlZExpc3Q6aCxtb2RpZmllZExpc3Q6cCx1bnB1Ymxpc2hlZExpc3Q6X309Z3QoaSxsLCEwKTtzW3RdPVJ0KGgpLG9bdF09UnQoXyksYVt0XT1SdChwKSx1LnNwbGljZShyLDEpfXUubGVuZ3RoJiZ1LmZvckVhY2goKGU9PntkZWxldGUgdGhpcy5fcm9vbVJlc291cmNlc1tlXX0pKSxPYmplY3QuYXNzaWduKHRoaXMuX3Jvb21SZXNvdXJjZXMsYyksdS5sZW5ndGgmJnRoaXMuX2NhbGxBcHBMaXN0ZW5lcihcIm9uVXNlckxlYXZlXCIsdSksbi5sZW5ndGgmJnRoaXMuX2NhbGxBcHBMaXN0ZW5lcihcIm9uVXNlckpvaW5cIixuKTtmb3IoY29uc3QgZSBpbiBvKXtjb25zdCB0PW9bZV07aWYodC5sZW5ndGgpe2NvbnN0IGU9dC5tYXAoKGU9PnRoaXMuX3JlbW90ZVRyYWNrc1ttdChlKV0pKTt5aWVsZCB0aGlzLl9vblVzZXJVbnB1Ymxpc2goZSl9fXJldHVybiBPYmplY3Qua2V5cyhzKS5mb3JFYWNoKChlPT57Y29uc3QgdD1zW2VdO2lmKDA9PT10Lmxlbmd0aClyZXR1cm47Y29uc3Qgcj10Lm1hcCgoZT0+e2NvbnN0IHQ9bXQoZSkse3VzZXJJZDpyLHRhZzppLG1lZGlhVHlwZTpufT1mdCh0KSxzPXRoaXMuX3JlbW90ZVRyYWNrc1t0XT1uPT09RmUuQVVESU9fT05MWT9uZXcgb3QoaSxyKTpuZXcgYXQoaSxyKTtyZXR1cm4gcy5fX2lubmVyU2V0UmVtb3RlTXV0ZWQoMD09PWUuc3RhdGUpLHN9KSk7dGhpcy5fb25UcmFja1B1Ymxpc2gocil9KSksT2JqZWN0LmtleXMoYSkuZm9yRWFjaCgoZT0+e2FbZV0uZm9yRWFjaCgoZT0+e2NvbnN0IHQ9bXQoZSkscj10aGlzLl9yZW1vdGVUcmFja3NbdF07ci5fX2lubmVyU2V0UmVtb3RlTXV0ZWQoMD09PWUuc3RhdGUpLHIuaXNBdWRpb1RyYWNrKCk/dGhpcy5fb25BdWRpb011dGVDaGFuZ2Uocik6dGhpcy5fb25WaWRlb011dGVDaGFuZ2Uocil9KSl9KSkse2RhdGE6cn19KSl9X29uQXVkaW9NdXRlQ2hhbmdlKGUpe3RoaXMuX2NhbGxBcHBMaXN0ZW5lcihcIm9uQXVkaW9NdXRlQ2hhbmdlXCIsZSl9X29uVmlkZW9NdXRlQ2hhbmdlKGUpe3RoaXMuX2NhbGxBcHBMaXN0ZW5lcihcIm9uVmlkZW9NdXRlQ2hhbmdlXCIsZSl9X2FmdGVyQ2hhbmdlZFJvbGUoZSl7fV9yZW1vdmVSZW1vdGVUcmFja3MoKXtjb25zdCBlPU9iamVjdC52YWx1ZXModGhpcy5fcmVtb3RlVHJhY2tzKTtlLmxlbmd0aCYmKGUuZm9yRWFjaCgoZT0+e2UuaXNBdWRpb1RyYWNrKCkmJmUuX19yZWxlYXNlTWVkaWFFbGVtZW50KCl9KSksdGhpcy5fcmVtb3RlVHJhY2tzPXt9KX1fcmVnaXN0ZXJQS01zZ0xpc3RlbmVyKGUpe3RoaXMuX29uUmVjdlBLTXNnPWV9X3F1aXRBbGxQS1Jvb20oKXt9fXZhciBpcixucixzcjshZnVuY3Rpb24oZSl7ZVtlLkNST1A9MV09XCJDUk9QXCIsZVtlLldIT0xFPTJdPVwiV0hPTEVcIn0oaXJ8fChpcj17fSkpLGZ1bmN0aW9uKGUpe2VbZS5DVVNUT01JWkU9MV09XCJDVVNUT01JWkVcIixlW2UuU1VTUEVOU0lPTj0yXT1cIlNVU1BFTlNJT05cIixlW2UuQURBUFRBVElPTj0zXT1cIkFEQVBUQVRJT05cIn0obnJ8fChucj17fSkpLGZ1bmN0aW9uKGUpe2VbZS5DUk9QPTFdPVwiQ1JPUFwiLGVbZS5XSE9MRT0yXT1cIldIT0xFXCJ9KHNyfHwoc3I9e30pKTtjb25zdCBvcj0oKT0+KHt2ZXJzaW9uOjEsbW9kZTpuci5TVVNQRU5TSU9OfSk7Y2xhc3MgYXJ7Y29uc3RydWN0b3IoZSx0LHIpe3RoaXMuX29uRmx1c2g9ZSx0aGlzLl9pc1ZhbGlkVHJhY2tJZD10LHRoaXMuX3NlbmRDRE5JbmZvU2lnbmFsPXIsdGhpcy5fdmFsdWVzPW9yKCl9c2V0SG9zdFZpZGVvVHJhY2soZSl7aWYoIXRoaXMuX2lzVmFsaWRUcmFja0lkKGUpKXJldHVybiBDLmVycm9yKGBzZXRIb3N0VmlkZW9UcmFjayBmYWlsZWQ6IHZpZGVvVHJhY2tJZCBpcyBpbnZhbGlkIC0+ICR7ZX1gKSx0aGlzO2NvbnN0e21lZGlhVHlwZTp0LHRhZzpyLHVzZXJJZDppfT1mdChlKTtyZXR1cm4gdCE9PUZlLlZJREVPX09OTFk/KEMuZXJyb3IoYHNldEhvc3RWaWRlb1RyYWNrIGZhaWxlZDoga2luZCBvZiByZXNvdXJjZSBpcyBub3QgJ3ZpZGVvJyAtPiAke2V9YCksdGhpcyk6KHRoaXMuX3ZhbHVlcy5ob3N0X3N0cmVhbV9pZD12dChpLHIpLHRoaXMpfXNldE1peExheW91dE1vZGUoZSl7cmV0dXJuW25yLkNVU1RPTUlaRSxuci5TVVNQRU5TSU9OLG5yLkFEQVBUQVRJT05dLmluY2x1ZGVzKGUpPyh0aGlzLl92YWx1ZXMubW9kZT1lLHRoaXMpOihDLmVycm9yKGBsYXlvdXQgbW9kZSBpcyBpbnZhbGlkOiAke2V9YCksdGhpcyl9X2FkZE91dHB1dFZhbHVlKGUsdCxyPVwibm9ybWFsXCIpe2NvbnN0IGk9dGhpcy5fdmFsdWVzLm91dHB1dHx8KHRoaXMuX3ZhbHVlcy5vdXRwdXQ9e3ZpZGVvOntub3JtYWw6e3dpZHRoOjY0MCxoZWlnaHQ6NDgwfX19KTtpZihcImNkblwiPT09ZSlyZXR1cm4gdm9pZChpLmNkbj10KTtpZihcImF1ZGlvXCI9PT1lKXJldHVybiB2b2lkKGkuYXVkaW89e2JpdHJhdGU6dH0pO2NvbnN0IG49aS52aWRlbztpZihcIm5vcm1hbFwiIT09ciYmXCJ0aW55XCIhPT1yKWlmKFwiYmFja2dyb3VuZENvbG9yXCIhPT1yKWlmKFwiZXhwYXJhbXNcIiE9PXIpe2lmKFwiYmFja2dyb3VuZFBpY3R1cmVcIj09PXIpe2NvbnN0IGU9bi5iYWNrZ3JvdW5kUGljdHVyZXx8KG4uYmFja2dyb3VuZFBpY3R1cmU9e2ZpbGxNb2RlOmlyLkNST1AscGljdHVyZTpbXX0pO09iamVjdC5hc3NpZ24oZSx0KX19ZWxzZSBuLmV4cGFyYW1zPXtyZW5kZXJNb2RlOnR9O2Vsc2Ugbi5iYWNrZ3JvdW5kQ29sb3I9dDtlbHNle2NvbnN0IGU9bltyXXx8KG5bcl09e30pO09iamVjdC5hc3NpZ24oZSx0KX19c2V0T3V0cHV0VmlkZW9SZXNvbHV0aW9uKGUpe2lmKCFUdChlKSlyZXR1cm4gQy53YXJuKFwic2V0T3V0cHV0VmlkZW9SZXNvbHV0aW9uIGZhaWxlZDogYHJlc29sdXRpb25gIGlzIGludmFsaWRcIiksdGhpcztjb25zdHt3aWR0aDp0LGhlaWdodDpyfT1DdChlKTtyZXR1cm4gdGhpcy5fYWRkT3V0cHV0VmFsdWUoXCJ2aWRlb1wiLHt3aWR0aDp0LGhlaWdodDpyfSxcIm5vcm1hbFwiKSx0aGlzfXNldE91dHB1dFZpZGVvRlBTKGUpe2lmKCFJdChlKSlyZXR1cm4gQy53YXJuKFwic2V0T3V0cHV0VmlkZW9GUFMgZmFpbGVkOiBgZnBzYCBpcyBpbnZhbGlkXCIpLHRoaXM7Y29uc3QgdD1FdChlKTtyZXR1cm4gdGhpcy5fYWRkT3V0cHV0VmFsdWUoXCJ2aWRlb1wiLHtmcHM6dH0sXCJub3JtYWxcIiksdGhpc31zZXRPdXRwdXRWaWRlb0JpdHJhdGUoZSl7cmV0dXJuISgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uaXNOdW1iZXIpKGUpfHxlPD0wP0MuZXJyb3IoYGJpdHJhdGUgaXMgaW52YWxpZDogJHtlfWApOnRoaXMuX2FkZE91dHB1dFZhbHVlKFwidmlkZW9cIix7Yml0cmF0ZTplfSxcIm5vcm1hbFwiKSx0aGlzfXNldE91dHB1dFRpbnlWaWRlb1Jlc29sdXRpb24oZSl7aWYoIVR0KGUpKXJldHVybiBDLndhcm4oXCJzZXRPdXRwdXRUaW55VmlkZW9SZXNvbHV0aW9uIGZhaWxlZDogYHJlc29sdXRpb25gIGlzIGludmFsaWRcIiksdGhpcztjb25zdHt3aWR0aDp0LGhlaWdodDpyfT1DdChlKTtyZXR1cm4gdGhpcy5fYWRkT3V0cHV0VmFsdWUoXCJ2aWRlb1wiLHt3aWR0aDp0LGhlaWdodDpyfSxcInRpbnlcIiksdGhpc31zZXRPdXRwdXRUaW55VmlkZW9GUFMoZSl7aWYoIUl0KGUpKXJldHVybiBDLndhcm4oXCJzZXRPdXRwdXRUaW55VmlkZW9GUFMgZmFpbGVkOiBgZnBzYCBpcyBpbnZhbGlkXCIpLHRoaXM7Y29uc3QgdD1FdChlKTtyZXR1cm4gdGhpcy5fYWRkT3V0cHV0VmFsdWUoXCJ2aWRlb1wiLHtmcHM6dH0sXCJ0aW55XCIpLHRoaXN9c2V0T3V0cHV0VGlueVZpZGVvQml0cmF0ZShlKXtyZXR1cm4hKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5pc051bWJlcikoZSl8fGU8PTA/Qy5lcnJvcihgYml0cmF0ZSBpcyBpbnZhbGlkOiAke2V9YCk6dGhpcy5fYWRkT3V0cHV0VmFsdWUoXCJ2aWRlb1wiLHtiaXRyYXRlOmV9LFwidGlueVwiKSx0aGlzfXNldE91dHB1dFZpZGVvUmVuZGVyTW9kZShlKXtyZXR1cm5bc3IuQ1JPUCxzci5XSE9MRV0uaW5jbHVkZXMoZSk/dGhpcy5fYWRkT3V0cHV0VmFsdWUoXCJ2aWRlb1wiLGUsXCJleHBhcmFtc1wiKTpDLmVycm9yKGByZW5kZXJNb2RlIGlzIGludmFsaWQ6ICR7ZX1gKSx0aGlzfXNldE91dHB1dEF1ZGlvQml0cmF0ZShlKXtyZXR1cm4gKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5pc051bWJlcikoZSkmJmU+MD90aGlzLl9hZGRPdXRwdXRWYWx1ZShcImF1ZGlvXCIsZSk6Qy5lcnJvcihgYml0cmF0ZSBpcyBpbnZhbGlkOiAke2V9YCksdGhpc31zZXRPdXRwdXRCYWNrZ3JvdW5kQ29sb3IoZSl7cmV0dXJuL14weFthLWZBLUYwLTldezZ9JC8udGVzdChlKT90aGlzLl9hZGRPdXRwdXRWYWx1ZShcInZpZGVvXCIsZSxcImJhY2tncm91bmRDb2xvclwiKTpDLmVycm9yKGBjb2xvciBpcyBpbnZhbGlkOiAke2V9YCksdGhpc31hZGRPdXRwdXRCYWNrZ3JvdW5kUGljdHVyZShlLHQsaSxuLHMpe3ZhciBvLGEsYztpZighKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5pc0h0dHBVcmwpKGUpKXJldHVybiBDLmVycm9yKGB1cmkgaXMgaW52YWxpZDogJHtlfWApLHRoaXM7aWYoW3QsaSxuLHNdLnNvbWUoKGU9PiEoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmlzTnVtYmVyKShlKXx8ZTwwfHxlPjEpKSlyZXR1cm4gQy5lcnJvcihgc29tZSBhdHRycyBvZiAoeCwgeSwgdywgaCkgaXMgaW52YWxpZDogJHt0fSwgJHtpfSwgJHtufSwgJHtzfWApLHRoaXM7Y29uc3QgZD0obnVsbD09PShjPW51bGw9PT0oYT1udWxsPT09KG89dGhpcy5fdmFsdWVzLm91dHB1dCl8fHZvaWQgMD09PW8/dm9pZCAwOm8udmlkZW8pfHx2b2lkIDA9PT1hP3ZvaWQgMDphLmJhY2tncm91bmRQaWN0dXJlKXx8dm9pZCAwPT09Yz92b2lkIDA6Yy5waWN0dXJlKXx8W107cmV0dXJuIGQucHVzaCh7dXJpOmUsdzpuLGg6cyx4OnQseTppfSksdGhpcy5fYWRkT3V0cHV0VmFsdWUoXCJ2aWRlb1wiLHtwaWN0dXJlOmR9LFwiYmFja2dyb3VuZFBpY3R1cmVcIiksdGhpc31yZW1vdmVPdXRwdXRCYWNrZ3JvdW5kUGljdHVyZShlKXt2YXIgdCxyLGk7aWYoISgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uaXNIdHRwVXJsKShlKSlyZXR1cm4gQy5lcnJvcihgdXJpIGlzIGludmFsaWQ6ICR7ZX1gKSx0aGlzO2xldCBuPW51bGw9PT0oaT1udWxsPT09KHI9bnVsbD09PSh0PXRoaXMuX3ZhbHVlcy5vdXRwdXQpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LnZpZGVvKXx8dm9pZCAwPT09cj92b2lkIDA6ci5iYWNrZ3JvdW5kUGljdHVyZSl8fHZvaWQgMD09PWk/dm9pZCAwOmkucGljdHVyZTtyZXR1cm4gbiYmKG49bi5maWx0ZXIoKHQ9PnQudXJpIT09ZSkpLHRoaXMuX2FkZE91dHB1dFZhbHVlKFwidmlkZW9cIix7cGljdHVyZXM6bn0sXCJiYWNrZ3JvdW5kUGljdHVyZVwiKSksdGhpc31jbGVhck91dHB1dEJhY2tncm91bmRQaWN0dXJlKCl7cmV0dXJuIHRoaXMuX2FkZE91dHB1dFZhbHVlKFwidmlkZW9cIix7cGljdHVyZXM6W119LFwiYmFja2dyb3VuZFBpY3R1cmVcIiksdGhpc31zZXRPdXRwdXRCYWNrZ3JvdW5kUGljdHVyZUZpbGxNb2RlKGUpe3JldHVybltpci5DUk9QLGlyLldIT0xFXS5pbmNsdWRlcyhlKT90aGlzLl9hZGRPdXRwdXRWYWx1ZShcInZpZGVvXCIse2ZpbGxNb2RlOmV9LFwiYmFja2dyb3VuZFBpY3R1cmVcIik6Qy5lcnJvcihgZmlsbE1vZGUgaXMgaW52YWxpZDogJHtlfWApLHRoaXN9YWRkUHVibGlzaFN0cmVhbVVybHMoZSl7dmFyIHQscjtjb25zdCBpPS9ecnRtcDpcXC9cXC8uKy87aWYoISgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uaXNBcnJheSkoZSl8fDA9PT1lLmxlbmd0aHx8ZS5zb21lKChlPT4haS50ZXN0KGUpKSkpcmV0dXJuIEMuZXJyb3IoYHVybHMgaXMgaW52YWxpZDogJHtlfWApLHRoaXM7Y29uc3Qgbj0obnVsbD09PShyPW51bGw9PT0odD10aGlzLl92YWx1ZXMub3V0cHV0KXx8dm9pZCAwPT09dD92b2lkIDA6dC5jZG4pfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLmNvbmNhdCgpKXx8W107bGV0IHM9ITE7cmV0dXJuIGUuZm9yRWFjaCgoZT0+e24uc29tZSgodD0+dC5wdXNodXJsPT09ZSkpfHwocz0hMCxuLnB1c2goe3B1c2h1cmw6ZX0pKX0pKSxuLmxlbmd0aD41PyhDLmVycm9yKFwicHVibGlzaCBzdHJlYW0gdXJsIG5vIG1vcmUgdGhhbiA1XCIpLHRoaXMpOihzJiZ0aGlzLl9hZGRPdXRwdXRWYWx1ZShcImNkblwiLG4pLHRoaXMpfXJlbW92ZVB1Ymxpc2hTdHJlYW1VcmxzKGUpe3ZhciB0LHI7Y29uc3QgaT0vXnJ0bXA6XFwvXFwvLisvO2lmKCEoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmlzQXJyYXkpKGUpfHwwPT09ZS5sZW5ndGh8fGUuc29tZSgoZT0+IWkudGVzdChlKSkpKXJldHVybiBDLmVycm9yKGB1cmxzIGlzIGludmFsaWQ6ICR7ZX1gKSx0aGlzO2NvbnN0IG49KG51bGw9PT0ocj1udWxsPT09KHQ9dGhpcy5fdmFsdWVzLm91dHB1dCl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuY2RuKXx8dm9pZCAwPT09cj92b2lkIDA6ci5jb25jYXQoKSl8fFtdO2ZvcihsZXQgdD1uLmxlbmd0aC0xO3Q+PTA7dC09MSl7Y29uc3R7cHVzaHVybDpyfT1uW3RdLGk9ZS5pbmRleE9mKHIpO2k+PTAmJihlLnNwbGljZShpLDEpLG4uc3BsaWNlKHQsMSkpfXJldHVybiB0aGlzLl9hZGRPdXRwdXRWYWx1ZShcImNkblwiLG4pLHRoaXN9Y2xlYXJQdWJsaXNoU3RyZWFtVXJscygpe3JldHVybiB0aGlzLl9hZGRPdXRwdXRWYWx1ZShcImNkblwiLFtdKSx0aGlzfWFkZEN1c3RvbWl6ZUxheW91dFZpZGVvKGUsdCxpLG4scyl7aWYoIXRoaXMuX2lzVmFsaWRUcmFja0lkKGUpKXJldHVybiBDLmVycm9yKGB0cmFja0lkIGlzIGludmFsaWQ6ICR7ZX1gKSx0aGlzO2lmKCEoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmlzTnVtYmVyKSh0KXx8ISgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uaXNOdW1iZXIpKGkpKXJldHVybiBDLmVycm9yKGBzb21lIGF0dHJzIG9mICh4LCB5KSBpcyBpbnZhbGlkOiAke3R9LCAke2l9YCksdGhpcztpZihbbixzXS5zb21lKChlPT4hKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5pc051bWJlcikoZSl8fGU8MCkpKXJldHVybiBDLmVycm9yKGBzb21lIGF0dHJzIG9mICh3aWR0aCwgaGVpZ2h0KSBpcyBpbnZhbGlkOiAke259LCAke3N9YCksdGhpcztjb25zdHt1c2VySWQ6byx0YWc6YSxtZWRpYVR5cGU6Y309ZnQoZSk7aWYoYyE9PUZlLlZJREVPX09OTFkpcmV0dXJuIEMuZXJyb3IoYGtpbmQgb2YgcmVzb3VyY2UgaXMgbm90ICd2aWRlbyc6ICR7ZX1gKSx0aGlzO2NvbnN0IGQ9dnQobyxhKTtyZXR1cm4odGhpcy5fdmFsdWVzLmlucHV0fHwodGhpcy5fdmFsdWVzLmlucHV0PXt2aWRlbzpbXX0pKS52aWRlby5wdXNoKHt1c2VyX2lkOm8sc3RyZWFtX2lkOmQseDp0LHk6aSx3aWR0aDpuLGhlaWdodDpzfSksdGhpc31yZW1vdmVDdXN0b21pemVMYXlvdXRWaWRlbyhlKXtpZighdGhpcy5faXNWYWxpZFRyYWNrSWQoZSkpcmV0dXJuIEMuZXJyb3IoYHRyYWNrSWQgaXMgaW52YWxpZDogJHtlfWApLHRoaXM7Y29uc3R7dXNlcklkOnQsdGFnOnIsbWVkaWFUeXBlOml9PWZ0KGUpO2lmKGkhPT1GZS5WSURFT19PTkxZKXJldHVybiBDLmVycm9yKGBraW5kIG9mIHJlc291cmNlIGlzIG5vdCAndmlkZW8nOiAke2V9YCksdGhpcztjb25zdCBuPXZ0KHQscikscz10aGlzLl92YWx1ZXMuaW5wdXR8fCh0aGlzLl92YWx1ZXMuaW5wdXQ9e3ZpZGVvOltdfSk7cmV0dXJuIHMudmlkZW89cy52aWRlby5maWx0ZXIoKGU9PmUuc3RyZWFtX2lkPT09bikpLHRoaXN9Y2xlYXJDdXN0b21pemVMYXlvdXRWaWRlbygpe3JldHVybih0aGlzLl92YWx1ZXMuaW5wdXR8fCh0aGlzLl92YWx1ZXMuaW5wdXQ9e3ZpZGVvOltdfSkpLnZpZGVvPVtdLHRoaXN9Zmx1c2goKXt2YXIgZSx0LHIsaTtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0IG49SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLl92YWx1ZXMpKSx7Y29kZTpzfT15aWVsZCB0aGlzLl9vbkZsdXNoKG4pO3JldHVybiBzPT09VC5TVUNDRVNTJiYoKG51bGw9PT0odD1udWxsPT09KGU9dGhpcy5fdmFsdWVzLm91dHB1dCl8fHZvaWQgMD09PWU/dm9pZCAwOmUudmlkZW8ubm9ybWFsKXx8dm9pZCAwPT09dD92b2lkIDA6dC53aWR0aCl8fChudWxsPT09KGk9bnVsbD09PShyPXRoaXMuX3ZhbHVlcy5vdXRwdXQpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLnZpZGVvLm5vcm1hbCl8fHZvaWQgMD09PWk/dm9pZCAwOmkuZnBzKSkmJnRoaXMuX3NlbmRDRE5JbmZvU2lnbmFsKCksdGhpcy5fdmFsdWVzPW9yKCkse2NvZGU6c319KSl9fXZhciBjcixkcix1cixscjshZnVuY3Rpb24oZSl7ZVtlLk9QRU49MV09XCJPUEVOXCIsZVtlLlNUT1A9Ml09XCJTVE9QXCJ9KGNyfHwoY3I9e30pKSxmdW5jdGlvbihlKXtlW2UuU1BSRUFEPTBdPVwiU1BSRUFEXCIsZVtlLk5PX1NQUkVBRD0tMV09XCJOT19TUFJFQURcIn0oZHJ8fChkcj17fSkpLGZ1bmN0aW9uKGUpe2VbZS5BVVRPTUFUSUM9MF09XCJBVVRPTUFUSUNcIixlW2UuTUFOVUFMPTFdPVwiTUFOVUFMXCJ9KHVyfHwodXI9e30pKSxmdW5jdGlvbihlKXtlW2UuVklERU89MF09XCJWSURFT1wiLGVbZS5BVURJTz0xXT1cIkFVRElPXCJ9KGxyfHwobHI9e30pKTtjb25zdCBocj0oKT0+XCJ4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHhcIi5yZXBsYWNlKC9beHldL2csKGZ1bmN0aW9uKGUpe2NvbnN0IHQ9MTYqTWF0aC5yYW5kb20oKXwwO3JldHVybihcInhcIj09PWU/dDozJnR8OCkudG9TdHJpbmcoMTYpfSkpO2NsYXNzIHBye2NvbnN0cnVjdG9yKGUsdCxyLGksbixzLG8sYSl7dGhpcy5fY29udGV4dD1lLHRoaXMuX3J1bnRpbWU9dCx0aGlzLl9zZXJ2aWNlPXIsdGhpcy5faW5pdE9wdGlvbnM9aSx0aGlzLl9tYWluTGl2aW5nUm9vbT1uLHRoaXMuX3JlZ2lzdGVyUEtNc2dMaXN0ZW5lcj1zLHRoaXMuX29uSm9pbmVkUEtSb29tPW8sdGhpcy5fb25MZWF2ZVBLUm9vbT1hLHRoaXMuX2ludml0ZVRpbWVvdXQ9MzAsdGhpcy5fUEtJbmZvPXt9LHRoaXMuX2FwcExpc3RlbmVyPW51bGwsdGhpcy5fam9pbmVkUEtSb29tcz17fSx0aGlzLl9yZWdpc3RlclBLTXNnTGlzdGVuZXIodGhpcy5fb25SZWN2UEtNc2cuYmluZCh0aGlzKSksdGhpcy5fbWFpblJvb21JZD10aGlzLl9tYWluTGl2aW5nUm9vbS5nZXRSb29tSWQoKX1fY2FsbEFwcExpc3RlbmVyKGUsLi4udCl7dmFyIHI7Y29uc3QgaT1udWxsPT09KHI9dGhpcy5fYXBwTGlzdGVuZXIpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyW2VdO2lmKGkpdHJ5e2koLi4udCl9Y2F0Y2goZSl7Qy5lcnJvcihlKX19X29uSW52aXRlKGUpe2NvbnN0IHQ9ZS5pbnZpdGVJbmZvfHx7fSx7aW52aXRlclJvb21JZDpyLGludml0ZXJVc2VySWQ6aSxleHRyYTpufT10LHM9e2ludml0ZXJSb29tSWQ6cixpbnZpdGVyVXNlcklkOml9O24mJk9iamVjdC5hc3NpZ24ocyx7ZXh0cmE6bn0pLHRoaXMuX1BLSW5mb1tyXT10LHRoaXMuX2NhbGxBcHBMaXN0ZW5lcihcIm9uUmVxdWVzdEpvaW5PdGhlclJvb21cIixzKX1fb25DYW5jZWxJbnZpdGUoZSl7Y29uc3R7aW52aXRlclJvb21JZDp0LGludml0ZXJVc2VySWQ6cixleHRyYTppfT1lLmludml0ZUluZm98fHt9LG49e2ludml0ZXJSb29tSWQ6dCxpbnZpdGVyVXNlcklkOnJ9O2kmJk9iamVjdC5hc3NpZ24obix7ZXh0cmE6aX0pLGRlbGV0ZSB0aGlzLl9QS0luZm9bdF0sdGhpcy5fY2FsbEFwcExpc3RlbmVyKFwib25DYW5jZWxSZXF1ZXN0T3RoZXJSb29tXCIsbil9X29uSW52aXRlVGltZW91dChlKXt9X29uSW52aXRlQW5zd2VyKGUpe2NvbnN0e2Fuc3dlckNvZGU6dCxpbnZpdGVDb250ZW50OnIsaW52aXRlZVVzZXJBdXRvTWl4Oml9PWUse2ludml0ZXJVc2VySWQ6bixpbnZpdGVyUm9vbUlkOnMsaW52aXRlZVVzZXJJZDpvLGludml0ZWVSb29tSWQ6YSxleHRyYTpjfT1yLGQ9e2FncmVlOjE9PT10LGludml0ZXJSb29tSWQ6cyxpbnZpdGVyVXNlcklkOm4saW52aXRlZVJvb21JZDphLGludml0ZWVVc2VySWQ6b307dGhpcy5fUEtJbmZvW2FdLmludml0ZWVVc2VyQXV0b01peD1pLHRoaXMuX2NhbGxBcHBMaXN0ZW5lcihcIm9uUmVzcG9uc2VKb2luT3RoZXJSb29tXCIsZCl9X29uUEtFbmQoZSl7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdHtpbnZpdGVlUm9vbUlkOnQsaW52aXRlclJvb21JZDpyLHVzZXJJZDppfT1lLmludml0ZUluZm8sbj1yPT09dGhpcy5fbWFpblJvb21JZD90OnIscz17ZW5kUm9vbUlkOm4sZW5kVXNlcklkOml9O3lpZWxkIHRoaXMubGVhdmVPdGhlclJvb20odGhpcy5fam9pbmVkUEtSb29tc1tuXSksZGVsZXRlIHRoaXMuX1BLSW5mb1tuXSx0aGlzLl9jYWxsQXBwTGlzdGVuZXIoXCJvbkZpbmlzaE90aGVyUm9vbVwiLHMpfSkpfV9vblJlY3ZQS01zZyhlKXtjb25zdHt0YXJnZXRJZDp0LGNvbnRlbnQ6cixtZXNzYWdlVHlwZTppfT1lO3N3aXRjaChpKXtjYXNlIE50LlBLX0lOVklURTp0aGlzLl9vbkludml0ZShyKTticmVhaztjYXNlIE50LlBLX0NBTkNFTF9JTlZJVEU6dGhpcy5fb25DYW5jZWxJbnZpdGUocik7YnJlYWs7Y2FzZSBOdC5QS19JTlZJVEVfVElNRU9VVDp0aGlzLl9vbkludml0ZVRpbWVvdXQocik7YnJlYWs7Y2FzZSBOdC5QS19JTlZJVEVfQU5TV0VSOnRoaXMuX29uSW52aXRlQW5zd2VyKHIpO2JyZWFrO2Nhc2UgTnQuUEtfRU5EOnRoaXMuX29uUEtFbmQocil9fXJlZ2lzdGVyUm9vbVBLRXZlbnRMaXN0ZW5lcihlKXt0aGlzLl9hcHBMaXN0ZW5lcj1lfXJlcXVlc3RKb2luT3RoZXJSb29tKGUsdCxyKXtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2lmKCEoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLnZhbGlkYXRlKShcImludml0ZWVSb29tSWRcIixlLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18ubm90RW1wdHlTdHJpbmcsITApfHwhKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy52YWxpZGF0ZSkoXCJpbnZpdGVlVXNlcklkXCIsdCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLm5vdEVtcHR5U3RyaW5nLCEwKSlyZXR1cm57Y29kZTpULlBBUkFNU19FUlJPUn07Qy5kZWJ1ZyhgcmVxdWVzdFJvb21QSyAtPiBpbnZpdGVlUm9vbUlkOiAke2V9OyBpbnZpdGVlVXNlcklkOiAke3R9OyBvcHRpb25zOiAke0pTT04uc3RyaW5naWZ5KHJ8fHt9KX1gKTtjb25zdCBuPWhyKCkscz0hKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5pc0Jvb2xlYW4pKG51bGw9PXI/dm9pZCAwOnIuYXV0b01peCl8fChudWxsPT1yP3ZvaWQgMDpyLmF1dG9NaXgpLG89e2ludml0ZVNlc3Npb25JZDpuLGludml0ZXJSb29tSWQ6dGhpcy5fbWFpblJvb21JZCxpbnZpdGVyVXNlcklkOnRoaXMuX2NvbnRleHQuZ2V0Q3VycmVudElkKCksaW52aXRlclVzZXJBdXRvTWl4OnMsaW52aXRlZVJvb21JZDplLGludml0ZWVVc2VySWQ6dCxpbnZpdGVlVGltZW91dFRpbWU6dGhpcy5faW52aXRlVGltZW91dCxleHRyYToobnVsbD09cj92b2lkIDA6ci5leHRyYSl8fFwiXCJ9LGE9e3Jvb21JZDp0aGlzLl9tYWluUm9vbUlkLGludml0ZWRSb29tSWQ6ZSxpbnZpdGVkVXNlcklkOnQsaW52aXRlVGltZW91dDp0aGlzLl9pbnZpdGVUaW1lb3V0LGludml0ZUluZm86SlNPTi5zdHJpbmdpZnkobyksaW52aXRlU2Vzc2lvbklkOm59O0MuZGVidWcoYHJlcXVlc3RSb29tUEsgLT4gcGFyYW1zOiAke0pTT04uc3RyaW5naWZ5KGEpfWApO2NvbnN0IGQ9eWllbGQgdGhpcy5fY29udGV4dC5yZXF1ZXN0Um9vbVBLKGEpO3JldHVybiBkIT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUz8oQy5lcnJvcihgcmVxdWVzdFJvb21QSyBmYWlsZWQ6ICR7ZH1gKSx7Y29kZTpkfSk6KEMuZGVidWcoXCJyZXF1ZXN0Um9vbVBLIHN1Y2Nlc3NcIiksdGhpcy5fUEtJbmZvW2VdPXtpbnZpdGVTZXNzaW9uSWQ6bixpbnZpdGVyUm9vbUlkOnRoaXMuX21haW5Sb29tSWQsaW52aXRlclVzZXJJZDp0aGlzLl9jb250ZXh0LmdldEN1cnJlbnRJZCgpLGludml0ZXJVc2VyQXV0b01peDpzLGludml0ZWVSb29tSWQ6ZX0se2NvZGU6VC5TVUNDRVNTfSl9KSl9Y2FuY2VsUmVxdWVzdEpvaW5PdGhlclJvb20oZSx0LHIpe3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7aWYoISgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18udmFsaWRhdGUpKFwiaW52aXRlZVJvb21JZFwiLGUsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5ub3RFbXB0eVN0cmluZywhMCl8fCEoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLnZhbGlkYXRlKShcImludml0ZWVVc2VySWRcIix0LF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18ubm90RW1wdHlTdHJpbmcsITApKXJldHVybntjb2RlOlQuUEFSQU1TX0VSUk9SfTtpZighdGhpcy5fUEtJbmZvW2VdKXJldHVybiBDLmVycm9yKGDmnKrlj5Hotbfov4fkuI4gJHtlfSDmiL/pl7TlhoUgJHt0fSDov57puqbnmoTor7fmsYJgKSx7Y29kZTpULlBBUkFNU19FUlJPUn07Qy5kZWJ1ZyhgY2FuY2VSZXF1ZXN0Sm9pblBLIC0+IGludml0ZWVSb29tSWQ6ICR7ZX07IGludml0ZWVVc2VySWQ6ICR7dH07IGV4dHJhOiAke3J9YCk7Y29uc3Qgbj17aW52aXRlclJvb21JZDp0aGlzLl9tYWluUm9vbUlkLGludml0ZXJVc2VySWQ6dGhpcy5fY29udGV4dC5nZXRDdXJyZW50SWQoKSxpbnZpdGVlUm9vbUlkOmUsaW52aXRlZVVzZXJJZDp0LGV4dHJhOnJ8fFwiXCJ9LHM9e3Jvb21JZDp0aGlzLl9tYWluUm9vbUlkLGludml0ZWRSb29tSWQ6ZSxpbnZpdGVkVXNlcklkOnQsaW52aXRlU2Vzc2lvbklkOnRoaXMuX1BLSW5mb1tlXS5pbnZpdGVTZXNzaW9uSWQsaW52aXRlSW5mbzpKU09OLnN0cmluZ2lmeShuKX07Qy5kZWJ1ZyhgY2FuY2VSZXF1ZXN0Sm9pblBLIC0+IHBhcmFtczogJHtKU09OLnN0cmluZ2lmeShzKX1gKTtjb25zdCBvPXlpZWxkIHRoaXMuX2NvbnRleHQuY2FuY2VsUm9vbVBLKHMpO3JldHVybiBvIT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUz8oQy5lcnJvcihgY2FuY2VSZXF1ZXN0Sm9pblBLIGZhaWxlZDogJHtvfWApLHtjb2RlOm99KTooQy5kZWJ1ZyhcImNhbmNlUmVxdWVzdEpvaW5QSyBzdWNjZXNzXCIpLGRlbGV0ZSB0aGlzLl9QS0luZm9bZV0se2NvZGU6VC5TVUNDRVNTfSl9KSl9cmVzcG9uc2VKb2luT3RoZXJSb29tKGUsdCxyLG4pe3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7aWYoISgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18udmFsaWRhdGUpKFwiaW52aXRlclJvb21JZFwiLGUsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5ub3RFbXB0eVN0cmluZywhMCl8fCEoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLnZhbGlkYXRlKShcImludml0ZXJVc2VySWRcIix0LF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18ubm90RW1wdHlTdHJpbmcsITApKXJldHVybntjb2RlOlQuUEFSQU1TX0VSUk9SfTtpZighdGhpcy5fUEtJbmZvW2VdKXJldHVybiBDLmVycm9yKGAke2V9IOaIv+mXtOWGheeahCAke3R9IOacquWPkei1t+i/h+i/num6puivt+axgmApLHtjb2RlOlQuUEFSQU1TX0VSUk9SfTtDLmRlYnVnKGByZXNwb25zZVJvb21QSyAtPiBpbnZpdGVyUm9vbUlkOiAke2V9OyBpbnZpdGVyVXNlcklkOiAke3R9OyBhZ3JlZTogJHtyfTsgb3B0aW9uczogJHtKU09OLnN0cmluZ2lmeShufHx7fSl9YCk7Y29uc3R7aW52aXRlU2Vzc2lvbklkOnMsaW52aXRlclVzZXJBdXRvTWl4Om99PXRoaXMuX1BLSW5mb1tlXSxhPSEoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmlzQm9vbGVhbikobnVsbD09bj92b2lkIDA6bi5hdXRvTWl4KXx8KG51bGw9PW4/dm9pZCAwOm4uYXV0b01peCksZD17aW52aXRlU2Vzc2lvbklkOnMsaW52aXRlclJvb21JZDplLGludml0ZXJVc2VySWQ6dCxpbnZpdGVlUm9vbUlkOnRoaXMuX21haW5Sb29tSWQsaW52aXRlZVVzZXJJZDp0aGlzLl9jb250ZXh0LmdldEN1cnJlbnRJZCgpLGludml0ZWVVc2VyQXV0b01peDphfSx1PU9iamVjdC5hc3NpZ24oZCx7aW52aXRlclVzZXJBdXRvTWl4Om99KSxsPXI/T2JqZWN0LmFzc2lnbihkLHtNdWx0aVJvb21LZXk6YCR7ZX18JHt0aGlzLl9tYWluUm9vbUlkfWAsTXVsdGlSb29tVmFsdWU6SlNPTi5zdHJpbmdpZnkodSl9KTpkOyEoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmlzVW5kZWZpbmVkKShudWxsPT1uP3ZvaWQgMDpuLmV4dHJhKSYmT2JqZWN0LmFzc2lnbihsLHtleHRyYTpuLmV4dHJhfSk7Y29uc3QgbT17YWdyZWU6cixyb29tSWQ6dGhpcy5fbWFpblJvb21JZCxpbnZpdGVTZXNzaW9uSWQ6cyxpbnZpdGVSb29tSWQ6ZSxpbnZpdGVVc2VySWQ6dCxjb250ZW50OkpTT04uc3RyaW5naWZ5KGwpLGtleTpgJHtlfXwke3R9YCx2YWx1ZTpKU09OLnN0cmluZ2lmeShkKX07Qy5kZWJ1ZyhgcmVzcG9uc2VSb29tUEsgLT4gcGFyYW1zOiAke0pTT04uc3RyaW5naWZ5KG0pfWApO2NvbnN0IGY9eWllbGQgdGhpcy5fY29udGV4dC5yZXNwb25zZVJvb21QSyhtKTtyZXR1cm4gZiE9PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1M/KEMuZXJyb3IoYHJlc3BvbnNlUm9vbVBLIGZhaWxlZDogJHtmfWApLHtjb2RlOmZ9KTooQy5kZWJ1ZyhcInJlc3BvbnNlUm9vbVBLIHN1Y2Nlc3NcIiksdGhpcy5fUEtJbmZvW2VdLmludml0ZWVVc2VyQXV0b01peD1hLHtjb2RlOlQuU1VDQ0VTU30pfSkpfV9xdWl0Um9vbVBLKGUpe3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3R7aW52aXRlclJvb21JZDp0LGludml0ZWVSb29tSWQ6cixpbnZpdGVyVXNlcklkOm59PXRoaXMuX1BLSW5mb1tlXSxzPXtpbnZpdGVlUm9vbUlkOnIsaW52aXRlclJvb21JZDp0LHVzZXJJZDp0aGlzLl9jb250ZXh0LmdldEN1cnJlbnRJZCgpfSxvPXtyb29tSWQ6dGhpcy5fbWFpblJvb21JZCxlbmRSb29tSWQ6ZSxzZXNzaW9uSWQ6dGhpcy5fUEtJbmZvW2VdLmludml0ZVNlc3Npb25JZCxjb250ZW50OkpTT04uc3RyaW5naWZ5KHMpLGtleXM6W2Ake3R9fCR7bn1gXX07Qy5kZWJ1ZyhgcXVpdFJvb21QSyAtPiBwYXJhbXM6ICR7SlNPTi5zdHJpbmdpZnkobyl9YCk7Y29uc3QgYT15aWVsZCB0aGlzLl9jb250ZXh0LmVuZFJvb21QSyhvKTtyZXR1cm4gYSE9PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1M/KEMuZXJyb3IoYHF1aXRSb29tUEsgZmFpbGVkOiAke2F9YCkse2NvZGU6VC5TSUdOQUxfRVJST1J9KTooQy5kZWJ1ZyhcInF1aXRSb29tUEsgc3VjY2Vzc1wiKSxkZWxldGUgdGhpcy5fUEtJbmZvW2VdLHtjb2RlOlQuU1VDQ0VTU30pfSkpfV9yZWxhc2VDcnRSb29tKCl7fWpvaW5PdGhlclJvb20oZSl7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtpZighKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy52YWxpZGF0ZSkoXCJyb29tSWRcIixlLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18ubm90RW1wdHlTdHJpbmcsITApKXJldHVybntjb2RlOlQuUEFSQU1TX0VSUk9SfTtpZih0aGlzLl9jb250ZXh0LmdldENvbm5lY3Rpb25TdGF0dXMoKSE9PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uQ29ubmVjdGlvblN0YXR1cy5DT05ORUNURUQpcmV0dXJue2NvZGU6VC5TSUdOQUxfRElTQ09OTkVDVEVEfTtpZihDLmRlYnVnKGBqb2luUEtSb29tLCByb29tSWQ6ICR7ZX1gKSx0aGlzLl9qb2luZWRQS1Jvb21zW2VdKXJldHVybntjb2RlOlQuUkVQRVJUX0pPSU5fUk9PTX07Y29uc3QgdD1sci5WSURFTyx7Y29kZTpyLGRhdGE6c309eWllbGQgdGhpcy5fY29udGV4dC5qb2luUlRDUm9vbShlLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uUlRDTW9kZS5MSVZFLHQpO2lmKHIhPT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTKXJldHVybiBDLmVycm9yKGBqb2luUm9vbSBmYWlsZWQgLT4gY29kZTogJHtyfWApLHtjb2RlOnJ9O0MuZGVidWcoYEpvaW5QS1Jvb20gc3VjY2VzcyAtPiB1c2VySWQ6ICR7dGhpcy5fY29udGV4dC5nZXRDdXJyZW50SWQoKX0sIHJvb21JZDogJHtlfSwgZGF0YTogJHtKU09OLnN0cmluZ2lmeShzKX1gKTtjb25zdCBvPW5ldyBfcih0aGlzLl9jb250ZXh0LHRoaXMuX3J1bnRpbWUsZSxzLHRoaXMuX3NlcnZpY2UsdGhpcy5faW5pdE9wdGlvbnMsdGhpcy5fcmVsYXNlQ3J0Um9vbS5iaW5kKHRoaXMpLHQsITEsITEpO3JldHVybiB0aGlzLl9qb2luZWRQS1Jvb21zW2VdPW8sdGhpcy5fb25Kb2luZWRQS1Jvb20oZSxvKSx7cm9vbTpvLGNvZGU6VC5TVUNDRVNTLHVzZXJJZHM6by5nZXRSZW1vdGVVc2VySWRzKCksdHJhY2tzOm8uZ2V0UmVtb3RlVHJhY2tzKCl9fSkpfWxlYXZlT3RoZXJSb29tKGUsdCl7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4gaygoKCk9PlModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCByPWUuZ2V0Um9vbUlkKCk7cmV0dXJuIEMuZGVidWcoYGxlYXZlUEtSb29tIC0+IHVzZXJJZDogJHt0aGlzLl9jb250ZXh0LmdldEN1cnJlbnRJZCgpfSAsIHJvb21JZDogJHtyfWApLHlpZWxkIGUuX19kZXN0cm95KCEwKSxkZWxldGUgdGhpcy5fam9pbmVkUEtSb29tc1tyXSx0aGlzLl9vbkxlYXZlUEtSb29tKHIpLHRoaXMuX1BLSW5mb1tyXT8odCYmdGhpcy5fcXVpdFJvb21QSyhyKSx7Y29kZTpULlNVQ0NFU1N9KTp7Y29kZTpULlNVQ0NFU1N9fSkpKSl9KSl9Z2V0UEtJbmZvKGUpe3JldHVybiB0aGlzLl9QS0luZm9bZV19Z2V0Sm9pbmVkUEtSb29tcygpe3JldHVybiB0aGlzLl9qb2luZWRQS1Jvb21zfX1jbGFzcyBfciBleHRlbmRzIHJye2NvbnN0cnVjdG9yKGUsdCxyLGksbixzLG8sYSxjPSExLGQpe3ZhciBsO3N1cGVyKGUsdCxyLGksX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5SVENNb2RlLkxJVkUsbixzLG8sYyxkKSx0aGlzLl9saXZpbmdUeXBlPWEsdGhpcy5faXNNYWluUm9vbT1kLHRoaXMuX0NETlVyaXM9bnVsbCx0aGlzLl9DRE5FbmFibGU9ITEsdGhpcy5fbWN1Q29uZmlnQnVpbGRlcj1uZXcgYXIodGhpcy5fb25NQ1VDb25maWdGbHVzaC5iaW5kKHRoaXMpLHRoaXMuX2lzVmFsaWRSZXNvdXJjZUlkLmJpbmQodGhpcyksdGhpcy5fc2VuZENETkluZm9TaWduYWwuYmluZCh0aGlzKSksdGhpcy5faXNNYWluUm9vbSYmKHRoaXMuX3Jvb21QS0hhbmRsZXI9bmV3IHByKGUsdCxuLHMsdGhpcyxzdXBlci5fcmVnaXN0ZXJQS01zZ0xpc3RlbmVyLmJpbmQodGhpcyksdGhpcy5fb25Kb2luZWRQS1Jvb20uYmluZCh0aGlzKSx0aGlzLl9vbkxlYXZlUEtSb29tLmJpbmQodGhpcykpKTtjb25zdCBoPW51bGw9PT0obD1pLnJvb21JbmZvLmZpbHRlcigoZT0+XCJjZG5fdXJpc1wiPT09ZS5rZXkpKVswXSl8fHZvaWQgMD09PWw/dm9pZCAwOmwudmFsdWU7aCYmKHRoaXMuX0NETlVyaXM9SlNPTi5wYXJzZShoKVswXSl9X2lzVmFsaWRSZXNvdXJjZUlkKGUpe3ZhciB0O2NvbnN0e3VzZXJJZDpyfT1mdChlKSxpPSEhKG51bGw9PT0odD10aGlzLl9yb29tUmVzb3VyY2VzW3JdKXx8dm9pZCAwPT09dD92b2lkIDA6dC5maW5kKCh0PT5tdCh0KT09PWUpKSk7bGV0IG49ITE7Y29uc3R7Y29kZTpzLHJvb21QS0hhbmRsZXI6b309dGhpcy5nZXRSb29tUEtIYW5kbGVyKCk7aWYocyE9PVQuU1VDQ0VTU3x8IW8pcmV0dXJuIGk7Y29uc3QgYT1vLmdldEpvaW5lZFBLUm9vbXMoKSxjPVtdO3JldHVybiBPYmplY3QudmFsdWVzKGEpLm1hcCgoZT0+e2MucHVzaCguLi5lLmdldFJlbW90ZVRyYWNrcygpKX0pKSxuPWMuc29tZSgodD0+ZT09PXQuZ2V0VHJhY2tJZCgpKSksaXx8bn1nZXRMaXZpbmdUeXBlKCl7cmV0dXJuIHRoaXMuX2xpdmluZ1R5cGV9Z2V0TUNVQ29uZmlnQnVpbGRlcigpe3JldHVybiB0aGlzLl9pc01haW5Sb29tP3RoaXMuX21jdUNvbmZpZ0J1aWxkZXI6KEMuZXJyb3IoXCJ0aGUgYGdldE1DVUNvbmZpZ0J1aWxkZXJgIGlzIGRpc2FibGVkIGluIFBLIHJvb20gXCIpLHtjb2RlOlQuVEhFX0ZVTkNUSU9OX0lTX0RJU0FCTEVEX0lOX1BLUk9PTX0pfV9vbk1DVUNvbmZpZ0ZsdXNoKGUpe3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3QgdD17XCJBcHAtS2V5XCI6dGhpcy5fY29udGV4dC5nZXRBcHBrZXkoKSxUb2tlbjp0aGlzLl90b2tlbixSb29tSWQ6dGhpcy5nZXRSb29tSWQoKSxVc2VySWQ6dGhpcy5fY29udGV4dC5nZXRDdXJyZW50SWQoKSxTZXNzaW9uSWQ6dGhpcy5nZXRTZXNzaW9uSWQoKX0se2NvZGU6cixyZXM6aX09eWllbGQgdGhpcy5fc2VydmljZS5zZXRNY3VDb25maWcodCxlKTtyZXR1cm4gciE9PVQuU1VDQ0VTUz8oQy5lcnJvcihgc2V0IE1DVSBjb25maWcgZmFpbGVkOiAke3J9YCkse2NvZGU6cn0pOihDLmluZm8oXCJzZXQgTUNVIGNvbmZpZyBzdWNjZXNzXCIpLGkucHVsbF91cmwmJih0aGlzLl9DRE5VcmlzPUpTT04ucGFyc2UoaS5wdWxsX3VybCkpLHtjb2RlOnIscmVzOml9KX0pKX1fX29uUmVjb25uZWN0ZWQoKXtjb25zdCBlPU9iamVjdC5jcmVhdGUobnVsbCx7X19vblJlY29ubmVjdGVkOntnZXQ6KCk9PnN1cGVyLl9fb25SZWNvbm5lY3RlZH19KTt2YXIgdCxyO3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3QgaT15aWVsZCBlLl9fb25SZWNvbm5lY3RlZC5jYWxsKHRoaXMsdGhpcy5fbGl2aW5nVHlwZSk7aWYoIWl8fCFpLmRhdGEpcmV0dXJuO2NvbnN0IG49aS5kYXRhLnJvb21JbmZvLHM9bnVsbD09PSh0PW4uZmlsdGVyKChlPT5cImNkbl91cmlzXCI9PT1lLmtleSkpWzBdKXx8dm9pZCAwPT09dD92b2lkIDA6dC52YWx1ZTtpZighcylyZXR1cm47Y29uc3Qgbz1KU09OLnBhcnNlKHMpOyhudWxsPT09KHI9dGhpcy5fQ0ROVXJpcyl8fHZvaWQgMD09PXI/dm9pZCAwOnIuZW5hYmxlSW5uZXJDRE4pIT09by5lbmFibGVJbm5lckNETiYmdGhpcy5fY2FsbEFwcExpc3RlbmVyKFwib25DRE5FbmFibGVDaGFuZ2VcIixvLmVuYWJsZUlubmVyQ0ROKSx0aGlzLl9DRE5VcmlzPW99KSl9ZW5hYmxlSW5uZXJDRE4oZSl7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtpZighdGhpcy5faXNNYWluUm9vbSlyZXR1cm4gQy5lcnJvcihcInRoZSBgZW5hYmxlSW5uZXJDRE5gIGlzIGRpc2FibGVkIGluIFBLIHJvb20gXCIpLHtjb2RlOlQuVEhFX0ZVTkNUSU9OX0lTX0RJU0FCTEVEX0lOX1BLUk9PTX07aWYoISgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uaXNCb29sZWFuKShlKSlyZXR1cm4gQy5lcnJvcihcImBlbmFibGVgIGlzIGludmFsaWRcIikse2NvZGU6VC5QQVJBTVNfRVJST1J9O3RoaXMuX0NETkVuYWJsZT1lO2NvbnN0IHQ9e3ZlcnNpb246MixvdXRwdXQ6e2luQ0ROTW9kZWw6ZT9jci5PUEVOOmNyLlNUT1B9fSx7Y29kZTpyfT15aWVsZCB0aGlzLl9vbk1DVUNvbmZpZ0ZsdXNoKHQpO2lmKHIhPT1ULlNVQ0NFU1MpcmV0dXJuIEMuZXJyb3IoYGVuYWJsZUlubmVyQ0ROIGZhaWxlZCAtPiBjb2RlOiAke3J9YCkse2NvZGU6VC5TSUdOQUxfRVJST1J9O2lmKHRoaXMuX0NETlVyaXMmJnRoaXMuX0NETlVyaXMuYnJvYWRjYXN0IT09ZHIuU1BSRUFEKXJldHVybiBDLmluZm8oXCJlbmFibGVJbm5lckNETiBzdWNjZWVkXCIpLHtjb2RlOlQuU1VDQ0VTU307Y29uc3R7Y29kZTppfT15aWVsZCBrKCgoKT0+Uyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiB0aGlzLl9zZW5kQ0ROSW5mb1NpZ25hbCgpfSkpKSk7cmV0dXJuIGk9PT1ULlNVQ0NFU1M/KEMuaW5mbyhcImVuYWJsZUlubmVyQ0ROIHN1Y2NlZWRcIikse2NvZGU6VC5TVUNDRVNTfSk6KEMuZXJyb3IoYGVuYWJsZUlubmVyQ0ROIGZhaWxlZCAtPiBjb2RlOiAke2l9YCkse2NvZGU6aX0pfSkpfV9zZW5kQ0ROSW5mb1NpZ25hbCgpe3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7dGhpcy5fQ0ROVXJpcz1PYmplY3QuYXNzaWduKHt9LHRoaXMuX0NETlVyaXMse2VuYWJsZUlubmVyQ0ROOnRoaXMuX0NETkVuYWJsZX0pO3JldHVybih5aWVsZCBQcm9taXNlLmFsbChbdGhpcy5fc3ByZWFkQ0ROSW5mbyh0aGlzLl9DRE5VcmlzKSx0aGlzLl9zZXRSb29tQ0ROSW5mbyh0aGlzLl9DRE5VcmlzKV0pKS5ldmVyeSgoZT0+ZS5jb2RlPT09VC5TVUNDRVNTKSk/e2NvZGU6VC5TVUNDRVNTfTp7Y29kZTpULlNJR05BTF9FUlJPUn19KSl9X3NwcmVhZENETkluZm8oZSl7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCB0PXlpZWxkIHRoaXMuX2NvbnRleHQuc2V0UlRDQ0ROVXJpcyh0aGlzLl9yb29tSWQsTnQuVE9UQUxfQ09OVEVOVF9SRVNPVVJDRSxKU09OLnN0cmluZ2lmeShbZV0pKTtyZXR1cm4gdCE9PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1M/KEMuZXJyb3IoYHNwcmVhZENETkluZm8gZmFpbGVkIC0+IGNvZGU6ICR7dH1gKSx7Y29kZTpULlNJR05BTF9FUlJPUn0pOihDLmluZm8oXCJzcHJlYWRDRE5JbmZvIHN1Y2NlZWRcIikse2NvZGU6VC5TVUNDRVNTfSl9KSl9X3NldFJvb21DRE5JbmZvKGUpe3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3QgdD15aWVsZCB0aGlzLl9jb250ZXh0LnNldFJUQ0RhdGEodGhpcy5fcm9vbUlkLFwiY2RuX3VyaXNcIixKU09OLnN0cmluZ2lmeShbZV0pLCEwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uUlRDQXBpVHlwZS5ST09NKTtyZXR1cm4gdCE9PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1M/KEMuZXJyb3IoYHNldFJvb21DRE5JbmZvIGZhaWxlZCAtPiBjb2RlOiAke3R9YCkse2NvZGU6VC5TSUdOQUxfRVJST1J9KTooQy5pbmZvKFwic2V0Um9vbUNETkluZm8gc3VjY2VlZFwiKSx7Y29kZTpULlNVQ0NFU1N9KX0pKX1fcmVzb3VyY2VIYW5kbGUoZSx0LHIpe2NvbnN0IGk9T2JqZWN0LmNyZWF0ZShudWxsLHtfcmVzb3VyY2VIYW5kbGU6e2dldDooKT0+c3VwZXIuX3Jlc291cmNlSGFuZGxlfX0pO3ZhciBuO3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7aS5fcmVzb3VyY2VIYW5kbGUuY2FsbCh0aGlzLGUsdCxyKSxlLmNkbl91cmlzJiYoKG51bGw9PT0obj10aGlzLl9DRE5VcmlzKXx8dm9pZCAwPT09bj92b2lkIDA6bi5lbmFibGVJbm5lckNETikhPT1lLmNkbl91cmlzWzBdLmVuYWJsZUlubmVyQ0ROJiZ0aGlzLl9jYWxsQXBwTGlzdGVuZXIoXCJvbkNETkVuYWJsZUNoYW5nZVwiLCF0aGlzLl9fZ2V0Q0RORW5hYmxlKCkpLHRoaXMuX0NETlVyaXM9ZS5jZG5fdXJpc1swXSl9KSl9X2V4Y2hhbmdlSGFuZGxlKGUpe3ZhciB0LHIsaTtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0IG49eWllbGQgdGhpcy5fc2VydmljZS5leGNoYW5nZSh0aGlzLl9nZXRSVENSZXFlc3RIZWFkZXJzKCksZSkscz1udWxsPT09KHI9bnVsbD09PSh0PW4uZGF0YSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQudXJscyl8fHZvaWQgMD09PXI/dm9pZCAwOnIucHVsbF91cmw7cmV0dXJuIG4uY29kZT09PVQuU1VDQ0VTUyYmcz8odGhpcy5fQ0ROVXJpcz1KU09OLnBhcnNlKHMpLChudWxsPT09KGk9dGhpcy5fQ0ROVXJpcyl8fHZvaWQgMD09PWk/dm9pZCAwOmkuYnJvYWRjYXN0KT09PWRyLlNQUkVBRCYmKHRoaXMuX0NETkVuYWJsZT0hMCx0aGlzLl9zZW5kQ0ROSW5mb1NpZ25hbCgpKSxuKTpufSkpfV9hZnRlckNoYW5nZWRSb2xlKGUpe2NvbnN0IHQ9THQoZSkscj10aGlzLl9jb250ZXh0LmdldEN1cnJlbnRJZCgpLGk9T2JqZWN0LmtleXModCk7c2V0VGltZW91dCgoKCk9Pnt2YXIgbixzLG87Y29uc3QgYT1pLmZpbHRlcigoZT0+ZSE9PXIpKTthLmxlbmd0aD4wJiZ0aGlzLl9jYWxsQXBwTGlzdGVuZXIoXCJvblVzZXJKb2luXCIsYSk7Zm9yKGNvbnN0IGUgaW4gdCllIT09ciYmdGhpcy5fcmVzb3VyY2VIYW5kbGUoe3VyaXM6dFtlXX0sTnQuVE9UQUxfQ09OVEVOVF9SRVNPVVJDRSxlKTsobnVsbD09PShuPWUucm9vbUluZm8uZmlsdGVyKChlPT5cImNkbl91cmlzXCI9PT1lLmtleSkpWzBdKXx8dm9pZCAwPT09bj92b2lkIDA6bi52YWx1ZSkmJihudWxsPT09KHM9dGhpcy5fQ0ROVXJpcyl8fHZvaWQgMD09PXM/dm9pZCAwOnMucHVzaF9tb2RlKT09PXVyLk1BTlVBTCYmdGhpcy5fY2FsbEFwcExpc3RlbmVyKFwib25DRE5FbmFibGVDaGFuZ2VcIixudWxsPT09KG89dGhpcy5fQ0ROVXJpcyl8fHZvaWQgMD09PW8/dm9pZCAwOm8uZW5hYmxlSW5uZXJDRE4pfSkpfV9fZ2V0Q0RORW5hYmxlKCl7dmFyIGU7cmV0dXJuIG51bGw9PT0oZT10aGlzLl9DRE5VcmlzKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5lbmFibGVJbm5lckNETn1fX2dldENETlB1c2hNb2RlKCl7dmFyIGU7cmV0dXJuIG51bGw9PT0oZT10aGlzLl9DRE5VcmlzKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5wdXNoX21vZGV9X29uSm9pbmVkUEtSb29tKGUsdCl7Y29uc3R7Y29kZTpyLHJvb21QS0hhbmRsZXI6aX09dGhpcy5nZXRSb29tUEtIYW5kbGVyKCk7aWYocj09PVQuU1VDQ0VTUyYmaSl7aWYoIWkuZ2V0UEtJbmZvKGUpKXJldHVybjt0aGlzLl9leGNoYW5nZVdpdGhQdXNoT3RoZXJSb29tKCl9fV9vbkxlYXZlUEtSb29tKGUpe2NvbnN0e2NvZGU6dCxyb29tUEtIYW5kbGVyOnJ9PXRoaXMuZ2V0Um9vbVBLSGFuZGxlcigpO2lmKHQ9PT1ULlNVQ0NFU1MmJnIpe2lmKCFyLmdldFBLSW5mbyhlKSlyZXR1cm47dGhpcy5fZXhjaGFuZ2VXaXRoUHVzaE90aGVyUm9vbSgpfX1fZXhjaGFuZ2VXaXRoUHVzaE90aGVyUm9vbSgpe3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7aWYoIXRoaXMuZ2V0TG9jYWxUcmFja3MoKS5sZW5ndGgpcmV0dXJuO2NvbnN0IGU9eWllbGQgdGhpcy5fY3JlYXRlRXhjaGFuZ2VQYXJhbXModGhpcy5fc3Vic2NyaWJlZExpc3QsITEpLHQ9dGhpcy5fZ2V0UHVzaE90aGVyUm9vbXNQYXJhbXMoKTt0JiYoZS5wdXNoT3RoZXJSb29tcz10KTtjb25zdCByPXlpZWxkIHRoaXMuX2V4Y2hhbmdlSGFuZGxlKGUpO2lmKHIuY29kZSE9PVQuU1VDQ0VTUylyZXR1cm4gQy5lcnJvcihgcmVUcnlFeGNoYW5nZSBmYWlsZWQ6ICR7ci5jb2RlfWApLHtjb2RlOnIuY29kZX07Y29uc3R7c2RwOmkscmVzdWx0Q29kZTpufT1yLmRhdGE7aWYobiE9PVQuU1VDQ0VTUylyZXR1cm4gQy5lcnJvcihgZXhjaGFuZ2Ugd2l0aCBwdXNoT3RoZXJSb29tIGZhaWxlZDogJHtufWApLHtjb2RlOm59O2NvbnN0IHM9eWllbGQgdGhpcy5fcGMuc2V0UmVtb3RlQW5zd2VyKGkuc2RwKTtyZXR1cm4gcyE9PVQuU1VDQ0VTUz97Y29kZTpzfTp2b2lkIDB9KSl9Z2V0Um9vbVBLSGFuZGxlcigpe3JldHVybiB0aGlzLl9pc01haW5Sb29tP3tjb2RlOlQuU1VDQ0VTUyxyb29tUEtIYW5kbGVyOnRoaXMuX3Jvb21QS0hhbmRsZXJ9OihDLmVycm9yKFwidGhlIGBnZXRSb29tUEtIYW5kbGVyYCBpcyBkaXNhYmxlZCBpbiBQSyByb29tIFwiKSx7Y29kZTpULlRIRV9GVU5DVElPTl9JU19ESVNBQkxFRF9JTl9QS1JPT019KX1fcXVpdEFsbFBLUm9vbSgpe2NvbnN0IGU9dGhpcy5fcm9vbVBLSGFuZGxlci5nZXRKb2luZWRQS1Jvb21zKCk7Zm9yKGNvbnN0IHQgaW4gZSl7Y29uc3Qgcj1lW3RdO3RoaXMuX3Jvb21QS0hhbmRsZXIubGVhdmVPdGhlclJvb20ocil9fX1jbGFzcyBtciBleHRlbmRzIHJye2NvbnN0cnVjdG9yKGUsdCxyLGksbixzLG8pe3N1cGVyKGUsdCxyLGksX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5SVENNb2RlLlJUQyxuLHMsbywhMSl9fWNvbnN0IGZyPSgpPT4oe1wiQ29udGVudC1UeXBlXCI6XCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThcIixcIkNhY2hlLUNvbnRyb2xcIjpcIm5vLWNhY2hlXCIsQ2xpZW50VHlwZTpgd2VifCR7eXQuYnJvd3Nlcn18JHt5dC52ZXJzaW9ufWAsQ2xpZW50VmVyc2lvbjpcIjUuMy4xXCIsXCJDbGllbnQtU2Vzc2lvbi1JZFwiOmhyKCksXCJSZXF1ZXN0LUlkXCI6RGF0ZS5ub3coKS50b1N0cmluZygpfSk7Y2xhc3MgdnJ7Y29uc3RydWN0b3IoZSx0LHIsaT01ZTMpe3RoaXMuX3J1bnRpbWU9ZSx0aGlzLl9jb250ZXh0PXQsdGhpcy5fbXNVcmw9cix0aGlzLl90aW1lb3V0PWksdGhpcy5fbXNJbk5hdmk9W10sdGhpcy5fZmFpbGVkTXM9W10sdGhpcy5fcnRjRmluZ2VyPXZvaWQgMCx0aGlzLl9jbHVzdGVySWQ9XCJcIix0aGlzLl9jb25maWdVcmw9XCJcIn1nZXROYXZpTVMoKXtyZXR1cm4gdGhpcy5fbXNVcmw/W3RoaXMuX21zVXJsXTp0aGlzLl9jbHVzdGVySWQ/W2BodHRwczovLyR7dGhpcy5fY2x1c3RlcklkfWBdOigwPT09dGhpcy5fbXNJbk5hdmkubGVuZ3RoJiYoMD09PXRoaXMuX2ZhaWxlZE1zLmxlbmd0aD90aGlzLl9tc0luTmF2aS5wdXNoKC4uLihlPT57dmFyIHQ7aWYoIWUpcmV0dXJuW107bGV0IHI7dHJ5e3I9SlNPTi5wYXJzZShlLnZvaXBDYWxsSW5mb3x8J3sgXCJzdHJhdGVneVwiOiAwIH0nKX1jYXRjaCh0KXtyZXR1cm4gQy53YXJuKFwicGFyc2UgYHZvaXBDYWxsSW5mb2Agb2YgbmF2aSBmYWlsZWQ6IFwiK2Uudm9pcENhbGxJbmZvKSxbXX1pZigwPT09ci5zdHJhdGVneSlyZXR1cm5bXTtjb25zdCBpPW51bGw9PT0odD1yLmNhbGxFbmdpbmUpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmZpbHRlcigoZT0+ND09PWUuZW5naW5lVHlwZSkpO2lmKCFpfHwwPT09aS5sZW5ndGgpcmV0dXJuW107Y29uc3Qgbj1pWzBdLHM9W107cmV0dXJuIG4ubWVkaWFTZXJ2ZXImJnMucHVzaChuLm1lZGlhU2VydmVyLnJlcGxhY2UoL14oaHR0cHM/OlxcL1xcLyk/LyxcImh0dHBzOi8vXCIpKSxuLmJhY2t1cE1lZGlhU2VydmVyJiZuLmJhY2t1cE1lZGlhU2VydmVyLmZvckVhY2goKGU9PntzLnB1c2goZS5yZXBsYWNlKC9eKGh0dHBzPzpcXC9cXC8pPy8sXCJodHRwczovL1wiKSl9KSksc30pKHRoaXMuX2NvbnRleHQuZ2V0TmF2aUluZm8oKSkpOih0aGlzLl9tc0luTmF2aS5wdXNoKC4uLnRoaXMuX2ZhaWxlZE1zKSx0aGlzLl9mYWlsZWRNcy5sZW5ndGg9MCkpLHRoaXMuX21zSW5OYXZpLm1hcCgoZT0+ZS50cmltKCkpKSl9X3JlcXVlc3QoZSx0LHIpe3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3QgaT10aGlzLmdldE5hdmlNUygpO2lmKDA9PT1pLmxlbmd0aClyZXR1cm57Y29kZTpULk5PVF9PUEVOX1ZJREVPX0FVRElPX1NFUlZFUn07dGhpcy5fcnRjRmluZ2VyJiYoci5ydGNGaW5nZXI9dGhpcy5fcnRjRmluZ2VyKTtmb3IobGV0IG49MDtuPGkubGVuZ3RoO24rPTEpe2NvbnN0IHM9YCR7aVtuXX0ke2V9YCxvPWZyKCk7Qy5kZWJ1ZyhgcmVxdWVzdCAtPiBSZXF1ZXN0LUlkOiAke29bXCJSZXF1ZXN0LUlkXCJdfSwgdXJsOiAke3N9YCk7Y29uc3R7c3RhdHVzOmEsZGF0YTpjfT15aWVsZCB0aGlzLl9ydW50aW1lLmh0dHBSZXEoe3VybDpzLGJvZHk6SlNPTi5zdHJpbmdpZnkociksaGVhZGVyczpPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sbyksdCksbWV0aG9kOl9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uSHR0cE1ldGhvZC5QT1NULHRpbWVvdXQ6dGhpcy5fdGltZW91dH0pO2lmKDIwMD09PWEpe2NvbnN0IGU9SlNPTi5wYXJzZShjKTtyZXR1cm4gZS5ydGNGaW5nZXImJih0aGlzLl9ydGNGaW5nZXI9ZS5ydGNGaW5nZXIpLGUuY2x1c3RlcklkJiYodGhpcy5fY2x1c3RlcklkPWUuY2x1c3RlcklkKSxDLmRlYnVnKGByZXF1ZXN0IHN1Y2Nlc3MgLT4gUmVxdWVzdC1JZDogJHtvW1wiUmVxdWVzdC1JZFwiXX1gKSx7Y29kZTpULlNVQ0NFU1MsZGF0YTplfX1DLndhcm4oYHJlcXVlc3QgZmFpbGVkIC0+IFJlcXVlc3QtSWQ6ICR7b1tcIlJlcXVlc3QtSWRcIl19LCBzdGF0dXM6ICR7YX0sIHVybDogJHtzfWApLHRoaXMuX2ZhaWxlZE1zLnB1c2goLi4udGhpcy5fbXNJbk5hdmkuc3BsaWNlKG4sMSkpfXJldHVybntjb2RlOlQuUkVRVUVTVF9GQUlMRUR9fSkpfWV4Y2hhbmdlKGUsdCl7dmFyIHI7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCBpPXlpZWxkIHRoaXMuX3JlcXVlc3QoXCIvZXhjaGFuZ2VcIixlLHQpO2lmKGkuY29kZT09PVQuU1VDQ0VTUyYmKG51bGw9PT0ocj1pLmRhdGEpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLnJlc3VsdENvZGUpPT09VC5TVUNDRVNTKXtjb25zdCBlPWkuZGF0YS51cmxzO2UmJih0aGlzLl9jb25maWdVcmw9ZS5jb25maWdVcmwpfXJldHVybiBpfSkpfWV4aXQoZSl7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdHtjb2RlOnR9PXlpZWxkIHRoaXMuX3JlcXVlc3QoXCIvZXhpdFwiLGUse30pO3JldHVybiB0fSkpfWJyb2FkY2FzdFN1YnNjcmliZShlLHQpe3JldHVybiB0aGlzLl9yZXF1ZXN0KFwiL2Jyb2FkY2FzdC9zdWJzY3JpYmVcIixlLHQpfWJyb2FkY2FzdEV4aXQoZSl7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdHtjb2RlOnR9PXlpZWxkIHRoaXMuX3JlcXVlc3QoXCIvYnJvYWRjYXN0L2V4aXRcIixlLHt9KTtyZXR1cm57Y29kZTp0fX0pKX1zZXRNY3VDb25maWcoZSx0KXtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2lmKCF0aGlzLl9jb25maWdVcmwpcmV0dXJue2NvZGU6VC5NQ1VfU0VSVkVSX05PVF9GT1VORH07Y29uc3Qgcj1gJHt0aGlzLl9jb25maWdVcmwucmVwbGFjZSgvXihodHRwcz86XFwvXFwvKT8vLFwiaHR0cHM6Ly9cIil9L3NlcnZlci9tY3UvY29uZmlnYCxpPWZyKCk7Qy5kZWJ1ZyhgcmVxdWVzdCAtPiBSZXF1ZXN0LUlkOiAke2lbXCJSZXF1ZXN0LUlkXCJdfSwgdXJsOiAke3J9YCk7Y29uc3R7c3RhdHVzOm4sZGF0YTpzfT15aWVsZCB0aGlzLl9ydW50aW1lLmh0dHBSZXEoe3VybDpyLGhlYWRlcnM6T2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LGkpLGUpLGJvZHk6SlNPTi5zdHJpbmdpZnkodCksbWV0aG9kOl9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uSHR0cE1ldGhvZC5QT1NUfSk7aWYoMjAwPT09bil7Qy5kZWJ1ZyhgcmVxdWVzdCBzdWNjZXNzIC0+IFJlcXVlc3QtSWQ6ICR7aVtcIlJlcXVlc3QtSWRcIl19YCk7Y29uc3QgZT1KU09OLnBhcnNlKHMpO3JldHVybntjb2RlOmUucmVzdWx0Q29kZSxyZXM6ZX19cmV0dXJue2NvZGU6VC5SRVFVRVNUX0ZBSUxFRH19KSl9Z2V0Q0ROUmVzb3VyY2VJbmZvKGUsdCl7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCByPWZyKCkse3N0YXR1czppLGRhdGE6bn09eWllbGQgdGhpcy5fcnVudGltZS5odHRwUmVxKHt1cmw6dCxoZWFkZXJzOk9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSxyKSxlKSxtZXRob2Q6X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5IdHRwTWV0aG9kLkdFVH0pO2lmKDIwMD09PWkpe2NvbnN0IGU9SlNPTi5wYXJzZShuKTtyZXR1cm57Y29kZTplLnJlc3VsdENvZGUscmVzOmV9fXJldHVybiBDLndhcm4oYHJlcXVlc3QgZmFpbGVkIC0+IFJlcXVlc3QtSWQ6ICR7cltcIlJlcXVlc3QtSWRcIl19LCBzdGF0dXM6ICR7aX0sIHVybDogJHt0fWApLHtjb2RlOlQuUkVRVUVTVF9GQUlMRUR9fSkpfX1jbGFzcyBScntjb25zdHJ1Y3RvcihlLHQscil7dGhpcy5fY29udGV4dD1lLHRoaXMuX3J0Y1Rva2VuPVwiXCIsdGhpcy5fbGl2ZVVybD1cIlwiLHRoaXMuX3N1YlRyYWNrcz1bXSx0aGlzLl9saXZpbmdUeXBlPW51bGwsdGhpcy5fbWVkaWFUeXBlPW51bGwsdGhpcy5fc3ViVGlueT0hMSx0aGlzLl9mcm9tUmV0cnk9ITEsdGhpcy5fYXBwTGlzdGVuZXI9bnVsbCx0aGlzLl9zZXJ2aWNlPW5ldyB2cih0LGUsci5tZWRpYVNlcnZlcil9X2dldFJlcUhlYWRlcnMoZSl7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCB0PXRoaXMuX2NvbnRleHQuZ2V0Q3VycmVudElkKCkscj10O2lmKCF0aGlzLl9ydGNUb2tlbil7Y29uc3R7Y29kZTp0LGRhdGE6bn09eWllbGQgdGhpcy5fY29udGV4dC5nZXRSVENUb2tlbihyLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uUlRDTW9kZS5MSVZFLGUpO2lmKHQhPT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTKXJldHVybiBDLmVycm9yKGBnZXRSVENUb2tlbiBmYWlsZWQ6ICR7dH1gKSx7Y29kZTpULlNJR05BTF9FUlJPUn07dGhpcy5fcnRjVG9rZW49bi5ydGNUb2tlbn1yZXR1cm57Y29kZTpULlNVQ0NFU1MsaGVhZGVyczp7XCJBcHAtS2V5XCI6dGhpcy5fY29udGV4dC5nZXRBcHBrZXkoKSxVc2VySWQ6dCxSb29tSWQ6cixSb29tVHlwZTpfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLlJUQ01vZGUuTElWRSxUb2tlbjp0aGlzLl9ydGNUb2tlbn19fSkpfV9jbGVhclN1YnNjcmliZUluZm8oKXt2YXIgZTt0aGlzLl9saXZlVXJsPVwiXCIsdGhpcy5fbGl2aW5nVHlwZT1udWxsLHRoaXMuX21lZGlhVHlwZT1udWxsLHRoaXMuX3N1YlRpbnk9ITEsdGhpcy5fc3ViVHJhY2tzLmxlbmd0aD0wLG51bGw9PT0oZT10aGlzLl9wYyl8fHZvaWQgMD09PWV8fGUuZGVzdHJveSgpLHRoaXMuX3BjPW51bGx9X3JlVHJ5RXhjaGFuZ2UoKXt2YXIgZTtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3RoaXMuX2Zyb21SZXRyeT0hMDtjb25zdHtjb2RlOnR9PXlpZWxkIHRoaXMuc3Vic2NyaWJlKHRoaXMuX2xpdmVVcmwsdGhpcy5fbGl2aW5nVHlwZSx0aGlzLl9tZWRpYVR5cGUsdGhpcy5fc3ViVGlueSk7dD09PVQuU1VDQ0VTUyYmKG51bGw9PT0oZT10aGlzLl9wYyl8fHZvaWQgMD09PWV8fGUuY2xlYXJSZVRyeUV4Y2hhbmdlVGltZXIoKSl9KSl9c3Vic2NyaWJlKGUsdCxyLGk9ITEpe3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIGsoKCgpPT50aGlzLl9fc3Vic2NyaWJlKGUsdCxyLGkpKSl9KSl9X19zdWJzY3JpYmUoZSx0LHIsaT0hMSl7dmFyIG47cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCBzPVtdO2lmKE90KHRoaXMuX2NvbnRleHQuZ2V0TmF2aUluZm8oKSkpcmV0dXJue2NvZGU6VC5QQUNLQUdFX0VOVklST05NRU5UX0VSUk9SLHRyYWNrczpzfTtpZighdGhpcy5fZnJvbVJldHJ5JiYobnVsbD09PShuPXRoaXMuX3BjKXx8dm9pZCAwPT09bnx8bi5jbGVhclJlVHJ5RXhjaGFuZ2VUaW1lcigpKSx0aGlzLl9mcm9tUmV0cnk9ITEsISgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uaXNTdHJpbmcpKGUpKXJldHVybiBDLmVycm9yKGBsaXZlVXJsIGlzIGludmFsaWQ6ICR7ZX1gKSx7Y29kZTpULlBBUkFNU19FUlJPUix0cmFja3M6c307aWYoIVtsci5BVURJTyxsci5WSURFT10uaW5jbHVkZXModCkpcmV0dXJuIEMuZXJyb3IoYGxpdmluZ1R5cGUgaXMgaW52YWxpZDogJHt0fWApLHtjb2RlOlQuUEFSQU1TX0VSUk9SLHRyYWNrczpzfTtpZighW0ZlLkFVRElPX09OTFksRmUuVklERU9fT05MWSxGZS5BVURJT19WSURFT10uaW5jbHVkZXMocikpcmV0dXJuIEMuZXJyb3IoYG1lZGlhVHlwZSBpcyBpbnZhbGlkOiAke3J9YCkse2NvZGU6VC5QQVJBTVNfRVJST1IsdHJhY2tzOnN9O2lmKHRoaXMuX2xpdmVVcmwmJnRoaXMuX2xpdmVVcmwhPT1lKXJldHVybntjb2RlOlQuQlJPQURDQVNUX1NVQl9MSVNUX05PVF9FTVBUWSx0cmFja3M6c307dGhpcy5fcGN8fCh0aGlzLl9wYz1uZXcgV3QodGhpcy5fcmVUcnlFeGNoYW5nZS5iaW5kKHRoaXMpKSx0aGlzLl9wYy5vbihXdC5fX0lOTkVSX0VWRU5UX1RSQUNLX1JFQURZX18sdGhpcy5fb25UcmFja1JlYWR5LHRoaXMpLHRoaXMucmVnaXN0ZXJSZXBvcnRMaXN0ZW5lcih0aGlzLl9yZXBvcnRMaXN0ZW5lcikpLHRoaXMuX2xpdmVVcmw9ZTtjb25zdHtjb2RlOm8saGVhZGVyczphfT15aWVsZCB0aGlzLl9nZXRSZXFIZWFkZXJzKHQpO2lmKG8hPT1ULlNVQ0NFU1MpcmV0dXJue2NvZGU6byx0cmFja3M6c307Y29uc3QgYz1gcmNfbWN1XyR7RGF0ZS5ub3coKX1gLGQ9XCJSb25nQ2xvdWRSVENcIjswPT09dGhpcy5fc3ViVHJhY2tzLmxlbmd0aCYmKHRoaXMuX3N1YlRyYWNrcy5wdXNoKG5ldyBvdChkLGMpLG5ldyBhdChkLGMpKSx0aGlzLl9wYy51cGRhdGVTdWJSZW1vdGVUcmFja3ModGhpcy5fc3ViVHJhY2tzLnNsaWNlKCkpKTtjb25zdCB1PXtzZHA6eWllbGQgdGhpcy5fcGMuY3JlYXRlT2ZmZXIoITApLGxpdmVVcmw6ZSxtZWRpYVR5cGU6cixzaW11bGNhc3Q6aT9NdC5USU5ZOk10Lk5PUk1BTCxzd2l0Y2hzdHJlYW06ITF9LGw9eWllbGQgdGhpcy5fc2VydmljZS5icm9hZGNhc3RTdWJzY3JpYmUoYSx1KTtpZihsLmNvZGUhPT1ULlNVQ0NFU1MpcmV0dXJuIEMuZXJyb3IoYGFuZGllbmNlIHN1YnNjcmliZSBmYWlsZWQ6ICR7bC5jb2RlfWApLHtjb2RlOmwuY29kZSx0cmFja3M6c307Y29uc3QgaD1sLmRhdGE7aWYoaC5yZXN1bHRDb2RlIT09VC5TVUNDRVNTKXJldHVybiBDLmVycm9yKGBhbmRpZW5jZSBzdWJzY3JpYmUgZmFpbGVkISBjb2RlOiAke2gucmVzdWx0Q29kZX07IG1lc3NhZ2U6ICR7aC5tZXNzYWdlfWApLHtjb2RlOmgucmVzdWx0Q29kZSx0cmFja3M6c307Qy5kZWJ1ZyhgYW5kaWVuY2Ugc3Vic2NyaWJlIHN1Y2Nlc3M6ICR7ZX1gKSx0aGlzLl9saXZpbmdUeXBlPXQsdGhpcy5fbWVkaWFUeXBlPXIsdGhpcy5fc3ViVGlueT1pO2NvbnN0e3NkcDpwLHN1YnNjcmliZWRMaXN0Ol99PWgsbT1bXTtyZXR1cm4gXy5mb3JFYWNoKChlPT57Y29uc3R7bWVkaWFUeXBlOnR9PWUscj10aGlzLl9zdWJUcmFja3NbdF07bS5wdXNoKHIpLHIuX19pbm5lclNldFJlbW90ZU11dGVkKCEwKX0pKSx0aGlzLl9wYy5zZXRSZW1vdGVBbnN3ZXIocC5zZHApLHtjb2RlOlQuU1VDQ0VTUyx0cmFja3M6bX19KSl9dW5zdWJzY3JpYmUoKXtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiBrKCgoKT0+dGhpcy5fX3Vuc3Vic2NyaWJlKCkpKX0pKX1fX3Vuc3Vic2NyaWJlKCl7dmFyIGU7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtpZihudWxsPT09KGU9dGhpcy5fcGMpfHx2b2lkIDA9PT1lfHxlLmNsZWFyUmVUcnlFeGNoYW5nZVRpbWVyKCksIXRoaXMuX3J0Y1Rva2VufHwhdGhpcy5fbGl2ZVVybClyZXR1cm57Y29kZTpULlNVQ0NFU1N9O2NvbnN0e2hlYWRlcnM6dH09eWllbGQgdGhpcy5fZ2V0UmVxSGVhZGVycygpLHtjb2RlOnJ9PXlpZWxkIHRoaXMuX3NlcnZpY2UuYnJvYWRjYXN0RXhpdCh0KTtyZXR1cm4gciE9PVQuU1VDQ0VTUz9DLmVycm9yKGBicm9hZGNhc3QgdW5zdWJzY3JpYmUgZmFpbGVkOiAke3J9YCk6Qy5kZWJ1ZyhcImJyb2FkY2FzdCB1bnN1YnNjcmliZSBzdWNjZXNzXCIpLHRoaXMuX2NsZWFyU3Vic2NyaWJlSW5mbygpLHtjb2RlOnJ9fSkpfXJlZ2lzdGVyUmVwb3J0TGlzdGVuZXIoZSl7dmFyIHQ7dGhpcy5fcmVwb3J0TGlzdGVuZXI9ZSxudWxsPT09KHQ9dGhpcy5fcGMpfHx2b2lkIDA9PT10fHx0LnJlZ2lzdGVyUmVwb3J0TGlzdGVuZXIoZSl9cmVnaXN0ZXJUcmFja0V2ZW50TGlzdGVuZXIoZSl7dGhpcy5fYXBwTGlzdGVuZXI9ZX1fb25UcmFja1JlYWR5KGUpe3ZhciB0LHI7Y29uc3QgaT1lLnJlY2VpdmVyLnRyYWNrLG49XCJhdWRpb1wiPT09aS5raW5kP0ZlLkFVRElPX09OTFk6RmUuVklERU9fT05MWSxzPXRoaXMuX3N1YlRyYWNrc1tuXTtzLl9faW5uZXJTZXRNZWRpYVN0cmVhbVRyYWNrKGkpO3RyeXtudWxsPT09KHI9bnVsbD09PSh0PXRoaXMuX2FwcExpc3RlbmVyKXx8dm9pZCAwPT09dD92b2lkIDA6dC5vblRyYWNrUmVhZHkpfHx2b2lkIDA9PT1yfHxyLmNhbGwodCxzKX1jYXRjaChlKXtDLmVycm9yKGUpfX19dmFyIGdyLFNyOyFmdW5jdGlvbihlKXtlLlJUTVA9XCJydG1wXCIsZS5GTFY9XCJmbHZcIixlLkhMUz1cImhsc1wifShncnx8KGdyPXt9KSksZnVuY3Rpb24oZSl7ZVtlLk5PVF9IVFRQUz0wXT1cIk5PVF9IVFRQU1wiLGVbZS5IVFRQUz0xXT1cIkhUVFBTXCJ9KFNyfHwoU3I9e30pKTtjb25zdCBDcj1PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sQ3QoSGUuVzE3Nl9IMTQ0KSkse2ZyYW1lUmF0ZTpFdChCZS5GUFNfMTUpfSk7Y2xhc3MgVHJ7Y29uc3RydWN0b3IoZSx0LHIsaSxuLHMpe3RoaXMuX2NvbnRleHQ9ZSx0aGlzLl9ydW50aW1lPXQsdGhpcy5faW5pdE9wdGlvbnM9cix0aGlzLl9yb29tSWQ9aSx0aGlzLl9qb2luUmVzRGF0YT1uLHRoaXMuX2xpdmluZ1R5cGU9cyx0aGlzLl9yb29tQW5jaG9yTGlzdD1bXSx0aGlzLl9yb29tUmVzPXt9LHRoaXMuX3Jvb21BbmNob3JSZXM9e30sdGhpcy5fcmVtb3RlVHJhY2tzPXt9LHRoaXMuX2FwcExpc3RlbmVyPW51bGwsdGhpcy5fc3Vic2NyaWJlZExpc3Q9W10sdGhpcy5fc2Vzc2lvbklkPVwiXCIsdGhpcy5fZGVzdHJveWVkPSExLHRoaXMuX3NldEluaXREYXRhKCksdGhpcy5fc2VydmljZT1uZXcgdnIodGhpcy5fcnVudGltZSx0aGlzLl9jb250ZXh0LHRoaXMuX2luaXRPcHRpb25zLm1lZGlhU2VydmVyLHRoaXMuX2luaXRPcHRpb25zLnRpbWVvdXQpLHRoaXMuX3BvbGFyaXNSZXBvcnQ9bmV3IFp0KHRoaXMuX2NvbnRleHQsdGhpcy5fcnVudGltZSx0aGlzLl9yb29tSWQsdGhpcyxxdC5BdWRpZW5jZSksdGhpcy5fcG9sYXJpc1JlcG9ydC5zZW5kUjEoKSx0aGlzLl9wYz1uZXcgV3QodGhpcy5fcmVUcnlFeGNoYW5nZS5iaW5kKHRoaXMpLHRoaXMuX3BvbGFyaXNSZXBvcnQpLHRoaXMuX3BjLm9uKFd0Ll9fSU5ORVJfRVZFTlRfVFJBQ0tfUkVBRFlfXywoZT0+e2NvbnN0IHQ9ZS5zdHJlYW1zWzBdLmlkLHI9ZS5yZWNlaXZlci50cmFjayxpPVt0LFwiYXVkaW9cIj09PXIua2luZD9GZS5BVURJT19PTkxZOkZlLlZJREVPX09OTFldLmpvaW4oXCJfXCIpLG49dGhpcy5fcmVtb3RlVHJhY2tzW2ldO24/KG4uX19pbm5lclNldE1lZGlhU3RyZWFtVHJhY2sociksdGhpcy5fY2FsbEFwcExpc3RlbmVyKFwib25UcmFja1JlYWR5XCIsbikpOkMud2FybihcImNhbm5vdCBmb3VuZCBSQ1JlbW90ZVRyYWNrOlwiLHIuaWQpfSkpLHRoaXMuX2NvbnRleHQub25ydGNkYXRhY2hhbmdlPXRoaXMuc2luZ2FsRGF0YUNoYW5nZS5iaW5kKHRoaXMpfV9zZXRJbml0RGF0YSgpe2NvbnN0e3Nlc3Npb25JZDplLHJlbW90ZVVzZXJJZHM6dCxyZW1vdGVSVENVcmlzOnIscmVtb3RlTVVDVXJpczppLHJlbW90ZVRyYWNrczpuLENETlVyaXM6c309KChlLHQpPT57Y29uc3Qgcj10LmZpbHRlcigoZT0+XCJSQ19SVENfU0VTU0lPTklEXCI9PT1lLmtleSkpWzBdLGk9cj9yLnZhbHVlOlwiXCIsbj10LmZpbHRlcigoZT0+XCJSQ19BTkNIT1JfTElTVFwiPT09ZS5rZXkpKS5tYXAoKGU9PkpTT04ucGFyc2UoZS52YWx1ZXx8XCJbXVwiKSkpWzBdLHM9dC5maWx0ZXIoKGU9PmUua2V5LmluY2x1ZGVzKFwiUkNfUkVTX1wiKSkpLm1hcCgoZT0+SlNPTi5wYXJzZShlLnZhbHVlfHxcInt9XCIpKSksbz1zLmxlbmd0aD9KU09OLnBhcnNlKHNbMF0ubWN1X3VyaXN8fFwiW11cIik6W10sYT1bXTtvLmZvckVhY2goKHQ9Pntjb25zdHttZWRpYVR5cGU6cix0YWc6aX09dCxuPXI9PT1GZS5BVURJT19PTkxZP25ldyBvdChpLFwiXCIsZSk6bmV3IGF0KGksXCJcIixlKTthLnB1c2gobil9KSk7Y29uc3QgYz1bXSxkPVtdO3MuZm9yRWFjaCgoZT0+e2NvbnN0IHQ9SlNPTi5wYXJzZShlLnVyaXN8fFwiW11cIik7Yy5wdXNoKC4uLnQpLHQuZm9yRWFjaCgoZT0+e2NvbnN0e21lZGlhVHlwZTp0LHRhZzpyLG1zaWQ6aX09ZSxuPWkuc3BsaXQoXCJfXCIpWzBdLHM9dD09PUZlLkFVRElPX09OTFk/bmV3IG90KHIsbik6bmV3IGF0KHIsbik7ZC5wdXNoKHMpfSkpfSkpO2NvbnN0IHU9dC5maWx0ZXIoKGU9PlwiUkNfQ0ROXCI9PT1lLmtleSkpLm1hcCgoZT0+e2NvbnN0IHQ9SlNPTi5wYXJzZShlLnZhbHVlfHxcIltdXCIpO3JldHVybiBKU09OLnBhcnNlKHQuY2RuX3VyaXMpWzBdfSkpWzBdO3JldHVybntzZXNzaW9uSWQ6aSxyZW1vdGVVc2VySWRzOm58fFtdLHJlbW90ZVJUQ1VyaXM6YyxyZW1vdGVNVUNVcmlzOm8scmVtb3RlUlRDVHJhY2tzOmQscmVtb3RlTUNVVHJhY2tzOmEscmVtb3RlVHJhY2tzOlsuLi5kLC4uLmFdLENETlVyaXM6dXx8e319fSkodGhpcy5fcm9vbUlkLHRoaXMuX2pvaW5SZXNEYXRhLmt2RW50cmllcyk7dGhpcy5fc2Vzc2lvbklkPWUsdGhpcy5fcm9vbUFuY2hvckxpc3Q9dCxuLmZvckVhY2goKGU9Pnt0aGlzLl9yZW1vdGVUcmFja3NbZS5nZXRUcmFja0lkKCldPWV9KSksdGhpcy5fQ0ROVXJpcz1zLHIuZm9yRWFjaCgoZT0+e2NvbnN0IHQ9ZS5tc2lkLnNwbGl0KFwiX1wiKVswXTt0aGlzLl9yb29tQW5jaG9yUmVzW3RdP3RoaXMuX3Jvb21BbmNob3JSZXNbdF0ucHVzaChlKTp0aGlzLl9yb29tQW5jaG9yUmVzW3RdPVtlXX0pKSxpLmZvckVhY2goKGU9Pntjb25zdHttZWRpYVR5cGU6dCx0YWc6cn09ZSxpPVt0aGlzLl9yb29tSWQscix0XS5qb2luKFwiX1wiKTt0aGlzLl9yb29tUmVzW2ldPWV9KSksci5mb3JFYWNoKChlPT57Y29uc3QgdD1tdChlKTt0aGlzLl9yb29tUmVzW3RdPWV9KSl9X2Fzc2VydFJvb21EZXN0cm95ZWQoKXtpZih0aGlzLl9kZXN0cm95ZWQpe2NvbnN0IGU9XCJUaGlzIHJvb20gaGFzIGJlZW4gZGVzdHJveWVkLiBQbGVhc2UgdXNlIGBSQ1JUQ0NsaWVudC5qb2luTGl2aW5nUm9vbUFzQXVkaWVuY2VgIHRvIGNhdGNoIGFub3RoZXIgaW5zdGFuY2UuXCI7cmV0dXJuIEMud2FybihlKSxULlJPT01fSEFTX0JFRU5fREVTVFJPWUVEfX1zaW5nYWxEYXRhQ2hhbmdlKGUsdCl7dmFyIHI7aWYodCE9PXRoaXMuX3Jvb21JZClyZXR1cm4gdm9pZCBDLndhcm4oYHNpbmdhbERhdGFDaGFuZ2UgLT4gbm90IHRoZSBjdXJyZW50IHJvb20gZGF0YTogZGF0YSByb29tSWQ6ICR7dH0sIGN1cnJlbnQgcm9vbUlkOiAke3RoaXMuX3Jvb21JZH1gKTtDLmRlYnVnKFwic2luZ2FsRGF0YUNoYW5nZSAtPiBzaW5nYWxEYXRhOlwiLEpTT04uc3RyaW5naWZ5KGV8fHt9KSk7Y29uc3QgaT1bXSxuPW51bGw9PT0ocj1lLmZpbHRlcigoZT0+XCJSQ19DRE5cIj09PWUua2V5KSlbMF0pfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLnZhbHVlO24mJnRoaXMuX2RpZmZDRE5VcmlzKEpTT04ucGFyc2UoSlNPTi5wYXJzZShuKS5jZG5fdXJpcylbMF0pLGUuZm9yRWFjaCgoZT0+e2NvbnN0e2tleTp0LHZhbHVlOnIsdGltZXN0YW1wOm4sdWlkOnN9PWU7aWYoLTEhPT10LmluZGV4T2YoXCJSQ19SRVNfXCIpKXtjb25zdCBlPUpTT04ucGFyc2Uocnx8XCJ7fVwiKSx0PUpTT04ucGFyc2UoZS5tY3VfdXJpc3x8XCJbXVwiKSxuPUpTT04ucGFyc2UoZS51cmlzfHxcIltdXCIpO3JldHVybiBpLnB1c2goLi4udCksdm9pZCB0aGlzLl9kaWZmQW5jaG9yUmVzb3VyY2UobixzKX1pZihcIlJDX0FOQ0hPUl9MSVNUXCI9PT10KXtjb25zdCBlPUpTT04ucGFyc2Uocnx8XCJbXVwiKSx7am9pblVzZXJJZHM6dCxsZWZ0VXNlcklkczppfT10aGlzLl9kaWZmQW5jaG9yTGlzdChlKTt0Lmxlbmd0aD4wJiZ0aGlzLl9oYW5kbGVOZXdKb2luZWRBbmNob3IodCksaS5sZW5ndGg+MCYmdGhpcy5faGFuZGxlTGVmdGVkQW5jaG9yKGkpfX0pKSx0aGlzLl9kaWZmUm9vbVJlc291cmNlKGkpfV9kaWZmQW5jaG9yTGlzdChlKXtjb25zdCB0PWUuZmlsdGVyKChlPT50aGlzLl9yb29tQW5jaG9yTGlzdC5pbmRleE9mKGUpPDApKTtyZXR1cm57bGVmdFVzZXJJZHM6dGhpcy5fcm9vbUFuY2hvckxpc3QuZmlsdGVyKCh0PT5lLmluZGV4T2YodCk8MCkpLGpvaW5Vc2VySWRzOnR9fV9oYW5kbGVOZXdKb2luZWRBbmNob3IoZSl7dGhpcy5fcm9vbUFuY2hvckxpc3QucHVzaCguLi5lKSx0aGlzLl9jYWxsQXBwTGlzdGVuZXIoXCJvbkFuY2hvckpvaW5cIixlKX1faGFuZGxlTGVmdGVkQW5jaG9yKGUpe3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7dGhpcy5fcm9vbUFuY2hvckxpc3Q9dGhpcy5fcm9vbUFuY2hvckxpc3QuZmlsdGVyKCh0PT4hKGUuaW5kZXhPZih0KT4tMSkpKTtjb25zdCB0PVtdO2UuZm9yRWFjaCgoZT0+e3QucHVzaCguLi50aGlzLmdldFJlbW90ZVRyYWNrc0J5VXNlcklkKGUpKSxkZWxldGUgdGhpcy5fcm9vbUFuY2hvclJlc1tlXX0pKSx0Lmxlbmd0aCYmKHlpZWxkIHRoaXMudW5zdWJzY3JpYmUodCksdC5mb3JFYWNoKChlPT5kZWxldGUgdGhpcy5fcmVtb3RlVHJhY2tzW2UuZ2V0VHJhY2tJZCgpXSkpKSx0aGlzLl9jYWxsQXBwTGlzdGVuZXIoXCJvbkFuY2hvckxlYXZlXCIsZSl9KSl9X2RpZmZSb29tUmVzb3VyY2UoZSl7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtjb25zdCB0PVtdLHI9W10saT1bXTtlLmZvckVhY2goKGU9Pntjb25zdCByPW10KGUpLHt1c2VySWQ6bix0YWc6cyxtZWRpYVR5cGU6b309ZnQociksYT1bdGhpcy5fcm9vbUlkLHMsb10uam9pbihcIl9cIik7aWYoIXRoaXMuX3JlbW90ZVRyYWNrc1thXSl7Y29uc3Qgcj1vPT09RmUuQVVESU9fT05MWT9uZXcgb3QocyxcIlwiLHRoaXMuX3Jvb21JZCk6bmV3IGF0KHMsXCJcIix0aGlzLl9yb29tSWQpO3QucHVzaChyKSx0aGlzLl9yZW1vdGVUcmFja3NbYV09cix0aGlzLl9yb29tUmVzW3IuZ2V0VHJhY2tJZCgpXT1lfWkucHVzaChhKX0pKSxPYmplY3Qua2V5cyh0aGlzLl9yZW1vdGVUcmFja3MpLmZvckVhY2goKGU9PntpLmluZGV4T2YoZSk8MCYmdGhpcy5fcmVtb3RlVHJhY2tzW2VdLmlzTUNVVHJhY2soKSYmci5wdXNoKHRoaXMuX3JlbW90ZVRyYWNrc1tlXSl9KSksdC5sZW5ndGg+MCYmdGhpcy5fY2FsbEFwcExpc3RlbmVyKFwib25UcmFja1B1Ymxpc2hcIix0KSxyLmxlbmd0aD4wJiZ0aGlzLl9vblVzZXJVbnB1Ymxpc2gocixcIm9uVHJhY2tVbnB1Ymxpc2hcIil9KSl9X2RpZmZBbmNob3JSZXNvdXJjZShlLHQpe3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3Qgcj10aGlzLl9yb29tQW5jaG9yUmVzW3RdfHwodGhpcy5fcm9vbUFuY2hvclJlc1t0XT1bXSkse3B1Ymxpc2hlZExpc3Q6aSx1bnB1Ymxpc2hlZExpc3Q6bixtb2RpZmllZExpc3Q6c309Z3QocixlKTtpZihpLmxlbmd0aCl7Y29uc3QgZT1yLm1hcChtdCksdD1bXSxuPVtdO2lmKGkuZm9yRWFjaCgoaT0+e2NvbnN0IHM9bXQoaSksbz1lLmluZGV4T2Yocykse3VzZXJJZDphLHRhZzpjLG1lZGlhVHlwZTpkfT1mdChzKTtvPi0xP3Jbb109aTpyLnB1c2goaSk7bGV0IHU9dGhpcy5fcmVtb3RlVHJhY2tzW3NdO3RoaXMuX3Jvb21SZXNbc109aSx1P3UuaXNTdWJzY3JpYmVkKCkmJnQucHVzaCh1KToodT1kPT09RmUuQVVESU9fT05MWT9uZXcgb3QoYyxhKTpuZXcgYXQoYyxhKSx0aGlzLl9yZW1vdGVUcmFja3Nbc109dSxuLnB1c2godSkpLHUuX19pbm5lclNldFJlbW90ZU11dGVkKDA9PT1pLnN0YXRlKX0pKSx0Lmxlbmd0aCl7Y29uc3QgZT10Lm1hcCgoZT0+ZS5nZXRUcmFja0lkKCkpKTtDLmRlYnVnKGByZXN1YiB0cmFja3MgLT4gJHtKU09OLnN0cmluZ2lmeShlKX1gKTtjb25zdHtjb2RlOnJ9PXlpZWxkIGsoKCgpPT50aGlzLl9zdWJzY3JpYmVIYW5kbGUodCwhMCkpKTtyIT09VC5TVUNDRVNTJiZDLmVycm9yKGByZXN1YiB0cmFja3MgZmFpbGVkIC0+IGNvZGU6ICR7cn0sIGlkczogJHtKU09OLnN0cmluZ2lmeShlKX1gKX10aGlzLl9jYWxsQXBwTGlzdGVuZXIoXCJvbkFuY2hvclRyYWNrUHVibGlzaFwiLG4pfWlmKG4ubGVuZ3RoKXtjb25zdCBlPW4ubWFwKG10KTtmb3IobGV0IHQ9ci5sZW5ndGgtMTt0Pj0wO3QtPTEpe2NvbnN0IGk9clt0XTtlLmluY2x1ZGVzKG10KGkpKSYmci5zcGxpY2UodCwxKX1jb25zdCB0PW4ubWFwKChlPT57Y29uc3QgdD1tdChlKTtyZXR1cm4gdGhpcy5fcmVtb3RlVHJhY2tzW3RdfSkpO3lpZWxkIHRoaXMuX29uVXNlclVucHVibGlzaCh0LFwib25BbmNob3JUcmFja1VucHVibGlzaFwiKX1pZihzLmxlbmd0aCl7Y29uc3QgZT1yLm1hcChtdCk7Zm9yKGxldCB0PTA7dDxzLmxlbmd0aDt0Kyspe2NvbnN0IGk9c1t0XSxuPW10KGkpLG89ZS5pbmRleE9mKG4pO3Jbb10uc3RhdGU9aS5zdGF0ZTtjb25zdCBhPXRoaXMuX3JlbW90ZVRyYWNrc1tuXTthLl9faW5uZXJTZXRSZW1vdGVNdXRlZCgwPT09aS5zdGF0ZSksYS5pc0F1ZGlvVHJhY2soKT90aGlzLl9jYWxsQXBwTGlzdGVuZXIoXCJvbkF1ZGlvTXV0ZUNoYW5nZVwiLGEpOnRoaXMuX2NhbGxBcHBMaXN0ZW5lcihcIm9uVmlkZW9NdXRlQ2hhbmdlXCIsYSl9fX0pKX1fb25Vc2VyVW5wdWJsaXNoKGUsdCl7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXt5aWVsZCB0aGlzLnVuc3Vic2NyaWJlKGUpLGUuZm9yRWFjaCgoZT0+e3RoaXMuX3N1YnNjcmliZWRMaXN0PXRoaXMuX3N1YnNjcmliZWRMaXN0LmZpbHRlcigodD0+dC50cmFjay5nZXRUcmFja0lkKCkhPT1lLmdldFRyYWNrSWQoKSkpLGRlbGV0ZSB0aGlzLl9yb29tUmVzW2UuZ2V0VHJhY2tJZCgpXSxlLl9faW5uZXJEZXN0cm95KCksZGVsZXRlIHRoaXMuX3JlbW90ZVRyYWNrc1tlLmdldFRyYWNrSWQoKV19KSksdGhpcy5fY2FsbEFwcExpc3RlbmVyKHQsZSl9KSl9X2NhbGxBcHBMaXN0ZW5lcihlLC4uLnQpe3ZhciByO2NvbnN0IGk9bnVsbD09PShyPXRoaXMuX2FwcExpc3RlbmVyKXx8dm9pZCAwPT09cj92b2lkIDA6cltlXTtpZihpKXRyeXtpKC4uLnQpfWNhdGNoKGUpe0MuZXJyb3IoZSl9fV9yZVRyeUV4Y2hhbmdlKCl7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtrKCgoKT0+Uyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3ZhciBlO2NvbnN0e3JlcUJvZHk6dH09eWllbGQgdGhpcy5fY3JlYXRlU3Vic2NyaWJlUGFyYW1zKHRoaXMuX3N1YnNjcmliZWRMaXN0LHt9LCEwKSxyPXlpZWxkIHRoaXMuX2V4Y2hhbmdlSGFuZGxlKHQpO2lmKHIuY29kZSE9PVQuU1VDQ0VTUylyZXR1cm4gQy5lcnJvcihgcmVUcnlFeGNoYW5nZSBmYWlsZWQ6ICR7ci5jb2RlfWApLHtjb2RlOnIuY29kZX07Y29uc3R7c2RwOmkscmVzdWx0Q29kZTpufT1yLmRhdGE7aWYobiE9PVQuU1VDQ0VTUylyZXR1cm4gQy5lcnJvcihgcmVUcnlFeGNoYW5nZSBmYWlsZWQ6ICR7bn1gKSx7Y29kZTpufTt0aGlzLl9wYy5jbGVhclJlVHJ5RXhjaGFuZ2VUaW1lcigpO2NvbnN0IHM9dGhpcy5fc3Vic2NyaWJlZExpc3QuZmlsdGVyKChlPT5lLnRyYWNrLmlzTUNVVHJhY2soKSkpO2lmKHMubGVuZ3RoPjApe2NvbnN0IHQ9c1swXS50cmFjay5nZXRUcmFja0lkKCkscj1udWxsPT09KGU9dGhpcy5fcm9vbVJlc1t0XSl8fHZvaWQgMD09PWU/dm9pZCAwOmUubXNpZCxuPVt0aGlzLl9yb29tSWQsXCJSb25nQ2xvdWRSVENcIl0uam9pbihcIl9cIik7aS5zZHA9aS5zZHAucmVwbGFjZShuZXcgUmVnRXhwKHIsXCJnXCIpLG4pfWNvbnN0IG89eWllbGQgdGhpcy5fcGMuc2V0UmVtb3RlQW5zd2VyKGkuc2RwKTtyZXR1cm4gbyE9PVQuU1VDQ0VTUz97Y29kZTpvfTp2b2lkIDB9KSkpKX0pKX1fY3JlYXRlU3Vic2NyaWJlUGFyYW1zKGUsdCxyKXtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0IGk9eWllbGQgdGhpcy5fcGMuY3JlYXRlT2ZmZXIociksbj17cmVzb2x1dGlvbkluZm86W119LHM9e21pbjowLG1heDowfTtPYmplY3Qua2V5cyh0KS5mb3JFYWNoKChlPT57Y29uc3R7bWVkaWFTdHJlYW06cix0aW55U3RyZWFtOm99PXRbZV07W3Isb10uZm9yRWFjaCgoKHQscik9Pnt2YXIgbztjb25zdCBhPTE9PT1yP1tlLFwidGlueVwiXS5qb2luKFwiX1wiKTplO2kuc2RwPW51bGw9PT0obz1pLnNkcCl8fHZvaWQgMD09PW8/dm9pZCAwOm8ucmVwbGFjZShuZXcgUmVnRXhwKHQuaWQsXCJnXCIpLGEpO2NvbnN0IGM9dC5nZXRWaWRlb1RyYWNrcygpWzBdO2lmKCFjKXJldHVybjtjb25zdCBkPTA9PT1yLHt3aWR0aDp1LGhlaWdodDpsLGZyYW1lUmF0ZTpofT1kP3B0KGMpOkNyO24ucmVzb2x1dGlvbkluZm8ucHVzaCh7dHJhY2tJZDpjLmlkLHNpbXVsY2FzdDpkP010Lk5PUk1BTDpNdC5USU5ZLHJlc29sdXRpb246YCR7dX14JHtsfWB9KTtjb25zdCBwPUdlKHUsbCksXz1XZShoKTtzLm1pbis9cC5taW5CaXRyYXRlKl8scy5tYXgrPXAubWF4Qml0cmF0ZSpffSkpfSkpO3JldHVybntyZXFCb2R5OntzZHA6aSxzd2l0Y2hzdHJlYW06ITEsbmV3VmVyc2lvbkZsYWc6ITAsc3Vic2NyaWJlTGlzdDplLm1hcCgoZT0+KHtzaW11bGNhc3Q6ZS5zdWJUaW55P010LlRJTlk6TXQuTk9STUFMLHJlc29sdXRpb246XCJcIix1cmk6dGhpcy5fcm9vbVJlc1tlLnRyYWNrLmdldFRyYWNrSWQoKV0udXJpfSkpKX0sZHluYW1pY0JpdHJhdGU6cyxvZmZlcjppfX0pKX1fc3Vic2NyaWJlSGFuZGxlKGUsdD0hMSl7dmFyIHI7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtpZih0aGlzLl9hc3NlcnRSb29tRGVzdHJveWVkKCkpcmV0dXJue2NvZGU6VC5ST09NX0hBU19CRUVOX0RFU1RST1lFRH07aWYoISgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18udmFsaWRhdGUpKFwidHJhY2tzXCIsZSwoKCk9PigwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uaXNBcnJheSkoZSkmJmUubGVuZ3RoPjAmJmUuZXZlcnkoKGU9PmUgaW5zdGFuY2VvZiBzdHx8ZS50cmFjayBpbnN0YW5jZW9mIHN0KSkpLCEwKSlyZXR1cm57Y29kZTpULlBBUkFNU19FUlJPUn07Y29uc3QgaT10aGlzLl9zdWJzY3JpYmVkTGlzdC5tYXAoKGU9Pk9iamVjdC5hc3NpZ24oe30sZSkpKSxuPWUubWFwKChlPT5lIGluc3RhbmNlb2Ygc3Q/e3RyYWNrOmV9OmUpKTtsZXQgcz0hMTtjb25zdCBvPVtdO3JldHVybiBuLmZvckVhY2goKGU9Pntjb25zdCB0PWUudHJhY2suZ2V0VHJhY2tJZCgpO28ucHVzaCh0KTtjb25zdCByPWkuZmluZCgoZT0+ZS50cmFjay5nZXRUcmFja0lkKCk9PT10KSk7ciYmci5zdWJUaW55PT09ZS5zdWJUaW55fHwocj9yLnN1YlRpbnk9ZS5zdWJUaW55OmkucHVzaChlKSxzPSEwKX0pKSxzfHx0PyhudWxsPT09KHI9dGhpcy5fcG9sYXJpc1JlcG9ydCl8fHZvaWQgMD09PXJ8fHIuc2VuZFIyKHp0LlNVQlNDUklCRSxRdC5CRUdJTixvKSx0aGlzLl91cGRhdGVTdWJMaXN0SGFuZGxlKGksITApKTp7Y29kZTpULlNVQ0NFU1N9fSkpfV9nZXRSZXFIZWFkZXJzKCl7Y29uc3QgZT10aGlzLl9jb250ZXh0LmdldEN1cnJlbnRJZCgpO3JldHVybntcIkFwcC1LZXlcIjp0aGlzLl9jb250ZXh0LmdldEFwcGtleSgpLFJvb21JZDplLFRva2VuOnRoaXMuX2pvaW5SZXNEYXRhLnRva2VuLFJvb21UeXBlOl9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uUlRDTW9kZS5MSVZFLFVzZXJJZDplLFwiU2Vzc2lvbi1JZFwiOnRoaXMuX3Nlc3Npb25JZH19X2V4Y2hhbmdlSGFuZGxlKGUpe3JldHVybiB0aGlzLl9zZXJ2aWNlLmJyb2FkY2FzdFN1YnNjcmliZSh0aGlzLl9nZXRSZXFIZWFkZXJzKCksZSl9X3VwZGF0ZVN1Ykxpc3RIYW5kbGUoZSx0PSExKXt2YXIgcjtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2lmKHRoaXMuX2Fzc2VydFJvb21EZXN0cm95ZWQoKSlyZXR1cm57Y29kZTpULlJPT01fSEFTX0JFRU5fREVTVFJPWUVEfTtpZighKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy52YWxpZGF0ZSkoXCJyZXNvdXJjZXNcIixlLCgoKT0+KDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5pc0FycmF5KShlKSYmZS5ldmVyeSgoZT0+ZSBpbnN0YW5jZW9mIHN0fHxlLnRyYWNrIGluc3RhbmNlb2Ygc3QpKSksITApKXJldHVybntjb2RlOlQuUEFSQU1TX0VSUk9SfTtsZXQgaT1lLm1hcCgoZT0+ZSBpbnN0YW5jZW9mIHN0P3t0cmFjazplfTpPYmplY3QuYXNzaWduKHt9LGUpKSk7Y29uc3Qgbj17fTtpPWkuZmlsdGVyKChlPT57Y29uc3QgdD1lLnRyYWNrLmdldFRyYWNrSWQoKTtyZXR1cm4hblt0XSYmKG5bdF09ITApfSkpLm1hcCgoZT0+T2JqZWN0LmFzc2lnbih7fSxlKSkpO2NvbnN0IHM9dGhpcy5fc3Vic2NyaWJlZExpc3QubWFwKChlPT5PYmplY3QuYXNzaWduKHt9LGUpKSk7aWYoIXQpe2xldCBlPSExO2lmKGkuZm9yRWFjaCgodD0+e2NvbnN0IHI9cy5maW5kSW5kZXgoKGU9PmUudHJhY2s9PT10LnRyYWNrKSk7aWYoLTE9PT1yKXJldHVybiB2b2lkKGU9ITApO3Muc3BsaWNlKHIsMSlbMF0uc3ViVGlueSE9PXQuc3ViVGlueSYmKGU9ITApfSkpLHMubGVuZ3RoJiYoZT0hMCksIWUpcmV0dXJue2NvZGU6VC5TVUNDRVNTfX10aGlzLl9wYy5jbGVhclJlVHJ5RXhjaGFuZ2VUaW1lcigpLHRoaXMuX3BjLnVwZGF0ZVN1YlJlbW90ZVRyYWNrcyhpLm1hcCgoZT0+ZS50cmFjaykpKTtjb25zdHtyZXFCb2R5Om99PXlpZWxkIHRoaXMuX2NyZWF0ZVN1YnNjcmliZVBhcmFtcyhpLHt9LCExKSxhPXlpZWxkIHRoaXMuX2V4Y2hhbmdlSGFuZGxlKG8pO2lmKHMubGVuZ3RoKXtjb25zdCBlPVtdO3MuZm9yRWFjaCgodD0+e2UucHVzaCh0LnRyYWNrLmdldFRyYWNrSWQoKSl9KSksbnVsbD09PShyPXRoaXMuX3BjLnJlcG9ydFBhcnNlcil8fHZvaWQgMD09PXJ8fHIuY2xlYXJMYXRlc3RQYWNrZXRzUmVjdihlKX1pZihhLmNvZGUhPT1ULlNVQ0NFU1MpcmV0dXJue2NvZGU6YS5jb2RlfTtjb25zdHtzZHA6dSxyZXN1bHRDb2RlOmwsbWVzc2FnZTpoLHN1YnNjcmliZWRMaXN0OnB9PWEuZGF0YTtpZihsIT09VC5TVUNDRVNTKXJldHVybiBDLmVycm9yKFwiY2hhbmdlIHN1YnNjcmliZSBsaXN0IGZhaWxlZDpcIixoLGwpLHtjb2RlOmx9O2kuZm9yRWFjaCgoZT0+e2NvbnN0e3RyYWNrOnR9PWU7aWYodC5pc01DVVRyYWNrKCkpe2NvbnN0IGU9dGhpcy5fcm9vbVJlc1t0LmdldFRyYWNrSWQoKV0ubXNpZCx7dGFnOnIsdXNlcklkOml9PWZ0KHQuZ2V0VHJhY2tJZCgpKSxuPVtpLHJdLmpvaW4oXCJfXCIpO3Uuc2RwPXUuc2RwLnJlcGxhY2UobmV3IFJlZ0V4cChlLFwiZ1wiKSxuKX19KSk7Y29uc3QgXz15aWVsZCB0aGlzLl9wYy5zZXRSZW1vdGVBbnN3ZXIodS5zZHApO2lmKF8hPT1ULlNVQ0NFU1MpcmV0dXJue2NvZGU6X307Y29uc3QgbT1udWxsPT1wP3ZvaWQgMDpwLm1hcCgoZT0+YCR7ZS5tc2lkfV8ke2UubWVkaWFUeXBlfWApKSxmPWkuZmlsdGVyKChlPT57aWYoZS50cmFjay5pc01DVVRyYWNrKCkpe2NvbnN0IHQ9dGhpcy5fcm9vbVJlc1tlLnRyYWNrLmdldFRyYWNrSWQoKV0scj1gJHt0Lm1zaWR9XyR7dC5tZWRpYVR5cGV9YDtyZXR1cm4gbS5pbmNsdWRlcyhyKX1yZXR1cm4gbnVsbD09bT92b2lkIDA6bS5pbmNsdWRlcyhlLnRyYWNrLmdldFRyYWNrSWQoKSl9KSksdj1udWxsPT1mP3ZvaWQgMDpmLm1hcCgoZT0+YCR7ZS50cmFjay5nZXRUcmFja0lkKCl9YCkpLFI9aS5maWx0ZXIoKGU9PiEobnVsbD09dj92b2lkIDA6di5pbmNsdWRlcyhlLnRyYWNrLmdldFRyYWNrSWQoKSkpKSk7Zm9yKGNvbnN0IGUgaW4gdGhpcy5fcmVtb3RlVHJhY2tzKXtjb25zdCB0PWYuc29tZSgodD0+dC50cmFjay5nZXRUcmFja0lkKCk9PT1lKSk7dGhpcy5fcmVtb3RlVHJhY2tzW2VdLl9faW5uZXJTZXRTdWJzY3JpYmVkKHQpfXJldHVybiB0aGlzLl9zdWJzY3JpYmVkTGlzdC5zcGxpY2UoMCx0aGlzLl9zdWJzY3JpYmVkTGlzdC5sZW5ndGgsLi4uZiksUi5sZW5ndGg/e2NvZGU6VC5TVUNDRVNTLGZhaWxlZExpc3Q6Un06e2NvZGU6VC5TVUNDRVNTfX0pKX1fZGlmZkNETlVyaXMoZSl7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtpZih0aGlzLl9DRE5VcmlzLnVybCYmIWUudXJsKXJldHVybiB0aGlzLl9jYWxsQXBwTGlzdGVuZXIoXCJvbkNETkluZm9EaXNhYmxlXCIpLHZvaWQodGhpcy5fQ0ROVXJpcz1lKTsoIXRoaXMuX0NETlVyaXN8fCF0aGlzLl9DRE5VcmlzLnVybCYmZS51cmwpJiZ0aGlzLl9jYWxsQXBwTGlzdGVuZXIoXCJvbkNETkluZm9FbmFibGVcIix7cmVzb2x1dGlvbjpgVyR7ZS53fV9IJHtlLmh9YCxmcHM6YEZQU18ke2UuZnBzfWB9KTtjb25zdCB0PXRoaXMuX0NETlVyaXMudyYmZS53JiZ0aGlzLl9DRE5VcmlzLnchPT1lLncscj10aGlzLl9DRE5VcmlzLmgmJmUuaCYmdGhpcy5fQ0ROVXJpcy5oIT09ZS5oLGk9dGhpcy5fQ0ROVXJpcy5mcHMmJmUuZnBzJiZ0aGlzLl9DRE5VcmlzLmZwcyE9PWUuZnBzOyh0fHxyfHxpKSYmdGhpcy5fY2FsbEFwcExpc3RlbmVyKFwib25DRE5JbmZvQ2hhbmdlXCIse3Jlc29sdXRpb246YFcke2Uud31fSCR7ZS5ofWAsZnBzOmBGUFNfJHtlLmZwc31gfSksdGhpcy5fQ0ROVXJpcz1lfSkpfV9nZXRDRE5QbGF5VXJsKGUpe3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3R7dzp0LGg6cixmcHM6aX09ZSxuPXRoaXMuX2luaXRPcHRpb25zLnB1bGxJbm5lckNETlByb3RvY29sfHxnci5GTFYscz10aGlzLl9pbml0T3B0aW9ucy5wdWxsSW5uZXJDRE5Vc2VIdHRwcz09PVNyLk5PVF9IVFRQUz9Tci5OT1RfSFRUUFM6U3IuSFRUUFM7aWYoIXRoaXMuX0NETlVyaXMudXJsKXJldHVybiBDLmVycm9yKGBjZG5fdXJpcyB1cmwgaXMgZW1wdHksIHRoZSBhbmNob3IgbmVlZCB0byBvcGVuIG9yIHB1c2ggQ0ROLCBjb2RlOiAke1QuQ0ROX1JFU09VUkNFX0lTX0VNUFRZfWApLHtjb2RlOlQuQ0ROX1JFU09VUkNFX0lTX0VNUFRZfTtjb25zdCBvPXtcIkFwcC1LZXlcIjp0aGlzLl9jb250ZXh0LmdldEFwcGtleSgpLFRva2VuOnRoaXMuX2pvaW5SZXNEYXRhLnRva2VuLFJvb21JZDp0aGlzLmdldFJvb21JZCgpLFVzZXJJZDp0aGlzLl9jb250ZXh0LmdldEN1cnJlbnRJZCgpLFNlc3Npb25JZDp0aGlzLmdldFNlc3Npb25JZCgpfSxhPVtdO3QmJmEucHVzaChgdz0ke3R9YCksciYmYS5wdXNoKGBoPSR7cn1gKSxpJiZhLnB1c2goYGZwcz0ke2l9YCksYS5wdXNoKGBraW5kPSR7bn1gKSxhLnB1c2goYGlzX2h0dHBzPSR7c31gKTtjb25zdCBjPWEuam9pbihcIiZcIik7bGV0IGQ9YCR7dGhpcy5fQ0ROVXJpcy51cmx9P2A7YyYmKGQrPWMpO2NvbnN0e2NvZGU6dSxyZXM6bH09eWllbGQgdGhpcy5fc2VydmljZS5nZXRDRE5SZXNvdXJjZUluZm8obyxkKTtyZXR1cm4gdSE9PVQuU1VDQ0VTUz8oQy5lcnJvcihgZ2V0Q0ROUGxheVVybCBmYWlsZWQ6ICR7dX1gKSx7Y29kZTp1fSk6KEMuaW5mbyhgZ2V0Q0ROUGxheVVybCBzdWNjZXNzOiAke251bGw9PWw/dm9pZCAwOmwuZGF0YS5wdWxsX3VybH1gKSx7Y29kZTp1LENETlBsYXlVcmw6bnVsbD09bD92b2lkIDA6bC5kYXRhLnB1bGxfdXJsfSl9KSl9Z2V0Q0ROUGxheVVybChlLHQpe3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7aWYoZSYmIVR0KGUpKXJldHVybiBDLmVycm9yKFwiYHJlc29sdXRpb25gIGlzIGludmFsaWRcIikse2NvZGU6VC5QQVJBTVNfRVJST1J9O2lmKHQmJiFJdCh0KSlyZXR1cm4gQy5lcnJvcihcImBmcHNgIGlzIGludmFsaWRcIikse2NvZGU6VC5QQVJBTVNfRVJST1J9O2NvbnN0e3dpZHRoOnIsaGVpZ2h0Oml9PWU/Q3QoZSk6e3dpZHRoOm51bGwsaGVpZ2h0Om51bGx9LG49dD9FdCh0KTpudWxsLHM9e307cmV0dXJuIHImJihzLnc9ciksaSYmKHMuaD1pKSxuJiYocy5mcHM9biksdGhpcy5fZ2V0Q0ROUGxheVVybChzKX0pKX1zdWJzY3JpYmUoZSl7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtyZXR1cm4gaygoKCk9PnRoaXMuX3N1YnNjcmliZUhhbmRsZShlLCExKSkpfSkpfV9fdW5zdWJzY3JpYmUoZSl7dmFyIHQ7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtpZighKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy52YWxpZGF0ZSkoXCJ0cmFja3NcIixlLCgoKT0+KDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5pc0FycmF5KShlKSYmZS5sZW5ndGg+MCYmZS5ldmVyeSgoZT0+ZSBpbnN0YW5jZW9mIHN0KSkpLCEwKSlyZXR1cm4gQy5lcnJvcihgdW5zdWJzY3JpYmUgZmFpbGVkLCB0cmFja3MgaXMgaW52YWxpZCAtPiByb29tSWQ6ICR7dGhpcy5fcm9vbUlkfWApLHtjb2RlOlQuUEFSQU1TX0VSUk9SfTtjb25zdCByPXRoaXMuX3N1YnNjcmliZWRMaXN0Lm1hcCgoZT0+T2JqZWN0LmFzc2lnbih7fSxlKSkpLmZpbHRlcigodD0+IWUuaW5jbHVkZXModC50cmFjaykpKTtyZXR1cm4gbnVsbD09PSh0PXRoaXMuX3BvbGFyaXNSZXBvcnQpfHx2b2lkIDA9PT10fHx0LnNlbmRSMih6dC5TVUJTQ1JJQkUsUXQuRU5ELGUubWFwKChlPT5lLmdldFRyYWNrSWQoKSkpKSx0aGlzLl91cGRhdGVTdWJMaXN0SGFuZGxlKHIsITEpfSkpfXVuc3Vic2NyaWJlKGUpe3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIGsoKCgpPT50aGlzLl9fdW5zdWJzY3JpYmUoZSkpKX0pKX1fX2Rlc3Ryb3koZSl7dmFyIHQ7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXt0aGlzLl9kZXN0cm95ZWR8fCh0aGlzLl9kZXN0cm95ZWQ9ITAsbnVsbD09PSh0PXRoaXMuX2F1ZGlvTGV2ZWxSZXBvcnQpfHx2b2lkIDA9PT10fHx0LmNsZWFyQXVkaW9MZXZlbFJlcG9ydFRpbWVyKCksZSYmKHlpZWxkIHRoaXMuX2NvbnRleHQucXVpdExpdmluZ1Jvb21Bc0F1ZGllbmNlKHRoaXMuX3Jvb21JZCkpLHlpZWxkIHRoaXMuX3NlcnZpY2UuYnJvYWRjYXN0RXhpdCh0aGlzLl9nZXRSZXFIZWFkZXJzKCkpLHRoaXMuX3BjLmRlc3Ryb3koKSx0aGlzLl9wb2xhcmlzUmVwb3J0PW51bGwsdGhpcy5fY29udGV4dC5vbnJ0Y2RhdGFjaGFuZ2U9KCk9Pnt9KX0pKX1nZXRSZW1vdGVUcmFjayhlKXtyZXR1cm4gdGhpcy5fcmVtb3RlVHJhY2tzW2VdfV9fZ2V0UEMoKXtyZXR1cm4gdGhpcy5fcGN9Z2V0TG9jYWxUcmFjayhlKXtyZXR1cm57fX1fX29uUmVjb25uZWN0ZWQoKXtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0e2NvZGU6ZX09eWllbGQgdGhpcy5fY29udGV4dC5qb2luTGl2aW5nUm9vbUFzQXVkaWVuY2UodGhpcy5fcm9vbUlkLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uUlRDTW9kZS5MSVZFKTtlIT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5FcnJvckNvZGUuU1VDQ0VTUyYmQy5lcnJvcihcImpvaW4gbGl2aW5nIHJvb20gZXJyb3Igd2hlbiBvbiByZWNvbm5lY3RlZFwiKX0pKX1yZWdpc3RlclJvb21FdmVudExpc3RlbmVyKGUpe3RoaXMuX2FwcExpc3RlbmVyPWV9b25BdWRpb0xldmVsQ2hhbmdlKGUsdCl7dmFyIHI7bnVsbD09PShyPXRoaXMuX2F1ZGlvTGV2ZWxSZXBvcnQpfHx2b2lkIDA9PT1yfHxyLmNsZWFyQXVkaW9MZXZlbFJlcG9ydFRpbWVyKCksdGhpcy5fYXVkaW9MZXZlbFJlcG9ydD1uZXcgZXIodGhpcyksdGhpcy5fYXVkaW9MZXZlbFJlcG9ydC5vbkF1ZGlvTGV2ZWxDaGFuZ2UoZSx0fHwxZTMpfXJlZ2lzdGVyUmVwb3J0TGlzdGVuZXIoZSl7dmFyIHQ7bnVsbD09PSh0PXRoaXMuX3BjKXx8dm9pZCAwPT09dHx8dC5yZWdpc3RlclJlcG9ydExpc3RlbmVyKGUpfWdldFJvb21JZCgpe3JldHVybiB0aGlzLl9yb29tSWR9Z2V0Q3J0VXNlcklkKCl7cmV0dXJuIHRoaXMuX2NvbnRleHQuZ2V0Q3VycmVudElkKCl9Z2V0U2Vzc2lvbklkKCl7cmV0dXJuIHRoaXMuX3Nlc3Npb25JZH1nZXRSZW1vdGVVc2VySWRzKCl7cmV0dXJuIHRoaXMuX3Jvb21BbmNob3JMaXN0fWdldFJlbW90ZVRyYWNrc0J5VXNlcklkKGUpe2NvbnN0IHQ9W107Zm9yKGNvbnN0IHIgaW4gdGhpcy5fcmVtb3RlVHJhY2tzKXtjb25zdCBpPXRoaXMuX3JlbW90ZVRyYWNrc1tyXTtpLmdldFVzZXJJZCgpPT09ZSYmdC5wdXNoKGkpfXJldHVybiB0fWdldFJlbW90ZVRyYWNrcygpe2NvbnN0IGU9W10sdD1bXTtmb3IoY29uc3QgZSBpbiB0aGlzLl9yZW1vdGVUcmFja3Mpe2lmKDI9PT10Lmxlbmd0aClicmVhaztjb25zdCByPXRoaXMuX3JlbW90ZVRyYWNrc1tlXTtyLmlzTUNVVHJhY2soKSYmdC5wdXNoKHIpfXJldHVybiB0aGlzLl9yb29tQW5jaG9yTGlzdC5mb3JFYWNoKCh0PT57ZS5wdXNoKC4uLnRoaXMuZ2V0UmVtb3RlVHJhY2tzQnlVc2VySWQodCkpfSkpLFsuLi50LC4uLmVdfWdldFJlbW90ZVJUQ1RyYWNrcygpe2NvbnN0IGU9W107Zm9yKGNvbnN0IHQgaW4gdGhpcy5fcmVtb3RlVHJhY2tzKXtjb25zdCByPXRoaXMuX3JlbW90ZVRyYWNrc1t0XTtyLmlzTUNVVHJhY2soKXx8ZS5wdXNoKHIpfXJldHVybiBlfWdldFJlbW90ZU1DVVRyYWNrcygpe2NvbnN0IGU9W107Zm9yKGNvbnN0IHQgaW4gdGhpcy5fcmVtb3RlVHJhY2tzKXtjb25zdCByPXRoaXMuX3JlbW90ZVRyYWNrc1t0XTtyLmlzTUNVVHJhY2soKSYmZS5wdXNoKHIpfXJldHVybiBlfWdldENETkluZm8oKXtyZXR1cm4gdGhpcy5fQ0ROVXJpcy53P3tyZXNvbHV0aW9uOmBXJHt0aGlzLl9DRE5VcmlzLnd9X0gke3RoaXMuX0NETlVyaXMuaH1gLGZwczpgRlBTXyR7dGhpcy5fQ0ROVXJpcy5mcHN9YCxDRE5FbmFibGU6dGhpcy5fQ0ROVXJpcy5lbmFibGVJbm5lckNETn06e0NETkVuYWJsZTohMX19fWNvbnN0IElyPShlLHQpPT57Y29uc3Qgcj1bXTtyZXR1cm4gclswXT0obnVsbD09dD92b2lkIDA6dC53aXRob3V0QXVkaW8pP3ZvaWQgMDplLmdldEF1ZGlvVHJhY2tzKClbMF0sclsxXT0obnVsbD09dD92b2lkIDA6dC53aXRob3V0VmlkZW8pP3ZvaWQgMDplLmdldFZpZGVvVHJhY2tzKClbMF0scn07Y2xhc3MgRXJ7Y29uc3RydWN0b3IoZSx0LHIpe3RoaXMuX2NvbnRleHQ9ZSx0aGlzLl9ydW50aW1lPXQsdGhpcy5fb3B0aW9ucz1yLHRoaXMuX2NydFJvb209bnVsbCx0aGlzLl9hdWRpZW5jZT1udWxsLHRoaXMuX2NydEF1ZGllbmNlTGl2aW5nUm9vbT1udWxsLEt0LnNldFNkcFNlbWFudGljcyhyLnNkcFNlbWFudGljc3x8XCJwbGFuLWJcIiksdGhpcy5fc2VydmljZT1uZXcgdnIodGhpcy5fcnVudGltZSx0aGlzLl9jb250ZXh0LHRoaXMuX29wdGlvbnMubWVkaWFTZXJ2ZXIsdGhpcy5fb3B0aW9ucy50aW1lb3V0KSx0aGlzLl9jb250ZXh0Lm9uY29ubmVjdGlvbnN0YXRlY2hhbmdlPXRoaXMuX29uSU1TdGF0dXNDaGFuZ2UuYmluZCh0aGlzKSx0aGlzLl9jb250ZXh0Lm9uZGlzY29ubmVjdD10aGlzLl9vbklNRGlzY29ubmVjdC5iaW5kKHRoaXMpLHRoaXMuX2NvbnRleHQub25kZXN0cm95PXRoaXMuX29uSU1VbmluaXQuYmluZCh0aGlzKSx0aGlzLl9jb250ZXh0Lm9ubWVzc2FnZT10aGlzLl9oYW5kbGVNZXNzYWdlLmJpbmQodGhpcyl9X2hhbmRsZU1lc3NhZ2UoZSl7dmFyIHQ7aWYoZS5jb252ZXJzYXRpb25UeXBlIT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Db252ZXJzYXRpb25UeXBlLlJUQ19ST09NKXJldHVybiExO2lmKHRoaXMuX2NydFJvb20gaW5zdGFuY2VvZiBfcil7dGhpcy5fZ2V0Sm9pbmVkUEtSb29tTGlzdCgpLmZvckVhY2goKHQ9Pnt0Ll9fcGFyc2VJbm5lck1lc3NhZ2UoZSl9KSl9cmV0dXJuIG51bGw9PT0odD10aGlzLl9jcnRSb29tKXx8dm9pZCAwPT09dHx8dC5fX3BhcnNlSW5uZXJNZXNzYWdlKGUpLCEwfV9nZXRKb2luZWRQS1Jvb21MaXN0KCl7Y29uc3R7Y29kZTplLHJvb21QS0hhbmRsZXI6dH09dGhpcy5fY3J0Um9vbS5nZXRSb29tUEtIYW5kbGVyKCk7aWYoZT09PVQuU1VDQ0VTUyYmdCl7Y29uc3QgZT10LmdldEpvaW5lZFBLUm9vbXMoKXx8e307cmV0dXJuIE9iamVjdC52YWx1ZXMoZSl9cmV0dXJuW119Z2V0Q3VycmVudElkKCl7cmV0dXJuIHRoaXMuX2NvbnRleHQuZ2V0Q3VycmVudElkKCl9am9pblJUQ1Jvb20oZSx0KXtyZXR1cm4gaygoKCk9PnRoaXMuX2pvaW5SVENSb29tKGUsdCkpKX1fam9pblJUQ1Jvb20oZSx0KXtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2lmKE90KHRoaXMuX2NvbnRleHQuZ2V0TmF2aUluZm8oKSkpcmV0dXJue2NvZGU6VC5QQUNLQUdFX0VOVklST05NRU5UX0VSUk9SfTtpZighKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy52YWxpZGF0ZSkoXCJyb29tSWRcIixlLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18ubm90RW1wdHlTdHJpbmcsITApKXJldHVybntjb2RlOlQuUEFSQU1TX0VSUk9SfTtpZih0aGlzLl9jcnRSb29tKXJldHVybntjb2RlOlQuUkVQRVJUX0pPSU5fUk9PTX07aWYodGhpcy5fY29udGV4dC5nZXRDb25uZWN0aW9uU3RhdHVzKCkhPT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkNvbm5lY3Rpb25TdGF0dXMuQ09OTkVDVEVEKXJldHVybntjb2RlOlQuU0lHTkFMX0RJU0NPTk5FQ1RFRH07aWYoIXRoaXMuX3NlcnZpY2UuZ2V0TmF2aU1TKCkubGVuZ3RoKXJldHVybntjb2RlOlQuTk9UX09QRU5fVklERU9fQVVESU9fU0VSVkVSfTtDLmRlYnVnKGBqb2luUm9vbSAtPiByb29tSWQ6ICR7ZX07IGpvaW5UeXBlOiAke3R8fF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uUlRDSm9pblR5cGUuS0lDS31gKTtjb25zdHtjb2RlOnIsZGF0YTpzfT15aWVsZCB0aGlzLl9jb250ZXh0LmpvaW5SVENSb29tKGUsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5SVENNb2RlLlJUQyx2b2lkIDAsdCk7aWYociE9PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1Mpe0MuZXJyb3IoYGpvaW5Sb29tIGZhaWxlZCAtPiBjb2RlOiAke3J9YCk7cmV0dXJue2NvZGU6cj09PUkuSk9JTl9SRUZVU0VEP1QuU0lHTkFMX0pPSU5fUlRDX1JPT01fUkVGVVNFRDpyfX1DLmRlYnVnKGBqb2luUm9vbSBzdWNjZXNzIC0+IHVzZXJJZDogJHt0aGlzLl9jb250ZXh0LmdldEN1cnJlbnRJZCgpfSwgcm9vbUlkOiAke2V9LCBkYXRhOiAke0pTT04uc3RyaW5naWZ5KHMpfWApO2NvbnN0IG89bmV3IG1yKHRoaXMuX2NvbnRleHQsdGhpcy5fcnVudGltZSxlLHMsdGhpcy5fc2VydmljZSx0aGlzLl9vcHRpb25zLHRoaXMuX3JlbGVhc2VDcnRSb29tT2JqLmJpbmQodGhpcykpO3JldHVybiB0aGlzLl9jcnRSb29tPW8se3Jvb206byxjb2RlOlQuU1VDQ0VTUyx1c2VySWRzOm8uZ2V0UmVtb3RlVXNlcklkcygpLHRyYWNrczpvLmdldFJlbW90ZVRyYWNrcygpfX0pKX1qb2luTGl2aW5nUm9vbShlLHQpe3JldHVybiBrKCgoKT0+dGhpcy5fam9pbkxpdmluZ1Jvb20oZSx0KSkpfV9qb2luTGl2aW5nUm9vbShlLHQpe3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7aWYoT3QodGhpcy5fY29udGV4dC5nZXROYXZpSW5mbygpKSlyZXR1cm57Y29kZTpULlBBQ0tBR0VfRU5WSVJPTk1FTlRfRVJST1J9O2lmKCEoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLnZhbGlkYXRlKShcInJvb21JZFwiLGUsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5ub3RFbXB0eVN0cmluZywhMCl8fCEoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLnZhbGlkYXRlKShcImxpdmluZ1R5cGVcIix0LChlPT5lPT09bHIuQVVESU98fGU9PT1sci5WSURFTykpKXJldHVybntjb2RlOlQuUEFSQU1TX0VSUk9SfTtpZih0aGlzLl9jcnRSb29tKXJldHVybntjb2RlOlQuUkVQRVJUX0pPSU5fUk9PTX07aWYodGhpcy5fY29udGV4dC5nZXRDb25uZWN0aW9uU3RhdHVzKCkhPT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkNvbm5lY3Rpb25TdGF0dXMuQ09OTkVDVEVEKXJldHVybntjb2RlOlQuU0lHTkFMX0RJU0NPTk5FQ1RFRH07aWYoIXRoaXMuX3NlcnZpY2UuZ2V0TmF2aU1TKCkubGVuZ3RoKXJldHVybntjb2RlOlQuTk9UX09QRU5fVklERU9fQVVESU9fU0VSVkVSfTtDLmRlYnVnKGBqb2luUm9vbSwgcm9vbUlkOiAke2V9YCk7Y29uc3R7Y29kZTpyLGRhdGE6c309eWllbGQgdGhpcy5fY29udGV4dC5qb2luUlRDUm9vbShlLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uUlRDTW9kZS5MSVZFLHQpO2lmKHIhPT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTKXJldHVybiBDLmVycm9yKGBqb2luUm9vbSBmYWlsZWQgLT4gY29kZTogJHtyfWApLHtjb2RlOnJ9O0MuZGVidWcoYEpvaW5Sb29tIHN1Y2Nlc3MgLT4gdXNlcklkOiAke3RoaXMuX2NvbnRleHQuZ2V0Q3VycmVudElkKCl9LCByb29tSWQ6ICR7ZX0sIGRhdGE6ICR7SlNPTi5zdHJpbmdpZnkocyl9YCk7Y29uc3Qgbz1uZXcgX3IodGhpcy5fY29udGV4dCx0aGlzLl9ydW50aW1lLGUscyx0aGlzLl9zZXJ2aWNlLHRoaXMuX29wdGlvbnMsdGhpcy5fcmVsZWFzZUNydFJvb21PYmouYmluZCh0aGlzKSx0LCExLCEwKTt0aGlzLl9jcnRSb29tPW87Y29uc3QgYT17cm9vbTpvLGNvZGU6VC5TVUNDRVNTLHVzZXJJZHM6by5nZXRSZW1vdGVVc2VySWRzKCksdHJhY2tzOm8uZ2V0UmVtb3RlVHJhY2tzKCl9O3JldHVybiBvLl9fZ2V0Q0ROUHVzaE1vZGUoKT09PXVyLk1BTlVBTCYmT2JqZWN0LmFzc2lnbihhLHtDRE5FbmFibGU6by5fX2dldENETkVuYWJsZSgpfSksYX0pKX1nZXRBdWRpZW5jZUNsaWVudCgpe3JldHVybiB0aGlzLl9hdWRpZW5jZXx8KHRoaXMuX2F1ZGllbmNlPW5ldyBScih0aGlzLl9jb250ZXh0LHRoaXMuX3J1bnRpbWUsdGhpcy5fb3B0aW9ucykpLHRoaXMuX2F1ZGllbmNlfV9vbklNU3RhdHVzQ2hhbmdlKGUpe2lmKEMuZGVidWcoYHNpZ25hbCBzZXJ2ZXIgY29ubmVjdGlvbiBzdGF0ZSBjaGFuZ2U6ICR7ZX1gKSxlPT09X3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5Db25uZWN0aW9uU3RhdHVzLkNPTk5FQ1RFRCl7aWYodGhpcy5fY3J0Um9vbSBpbnN0YW5jZW9mIF9yKXt0aGlzLl9nZXRKb2luZWRQS1Jvb21MaXN0KCkuZm9yRWFjaCgoZT0+e2UuX19vblJlY29ubmVjdGVkKCl9KSl9dGhpcy5fY3J0Um9vbSYmdGhpcy5fY3J0Um9vbS5fX29uUmVjb25uZWN0ZWQoKX19X29uSU1EaXNjb25uZWN0KCl7Qy5kZWJ1ZyhcIlRPRE8gLT4gb24gSU0gZGlzY29ubmVjdFwiKX1fb25JTVVuaW5pdCgpe0MuZGVidWcoXCJUT0RPIC0+IG9uIElNIGNsaWVudCBvbmRlc3Ryb3lcIil9bGVhdmVSb29tKGUpe3JldHVybiBrKCgoKT0+dGhpcy5fbGVhdmVSb29tKGUpKSl9X2xlYXZlUm9vbShlKXtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe3JldHVybiB0aGlzLl9jcnRSb29tPyh5aWVsZCB0aGlzLl9jcnRSb29tLl9fZGVzdHJveSghMCksQy5kZWJ1ZyhgcXVpdFJUQ1Jvb20gLT4gdXNlcklkOiAke3RoaXMuX2NvbnRleHQuZ2V0Q3VycmVudElkKCl9ICwgcm9vbUlkOiAke3RoaXMuX2NydFJvb20uZ2V0Um9vbUlkKCl9YCksdGhpcy5fY3J0Um9vbT1udWxsLHtjb2RlOlQuU1VDQ0VTU30pOntjb2RlOlQuU1VDQ0VTU319KSl9X3JlbGVhc2VDcnRSb29tT2JqKCl7dGhpcy5fY3J0Um9vbT1udWxsfV9nZXRNZWRpYVN0cmVhbShlLHQ9XCJnZXRVc2VyTWVkaWFcIil7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXt0cnl7Y29uc3Qgcj15aWVsZCBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzW3RdKGUpO3JldHVybntjb2RlOlQuU1VDQ0VTUyxzdHJlYW06cn19Y2F0Y2goZSl7aWYoXCJQZXJtaXNzaW9uIGRlbmllZFwiPT09ZS5tZXNzYWdlKXJldHVybntjb2RlOlQuUEVSTUlTU0lPTl9ERU5JRUR9O0MuZXJyb3IoYGdldCB1c2VyIG1lZGlhIGZhaWxlZCAtPiAke2UubWVzc2FnZX1gKX1yZXR1cm57Y29kZTpcImdldFVzZXJNZWRpYVwiPT09dD9ULkdFVF9VU0VSX01FRElBX0ZBSUxFRDpULkdFVF9ESVNQTEFZX01FRElBX0ZBSUxFRH19KSl9Y3JlYXRlTWljcm9waG9uZUF1ZGlvVHJhY2soZT1cIlJvbmdDbG91ZFJUQ1wiLHQpe3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7aWYoIXV0KGUpKXJldHVybntjb2RlOlQuSU5WQUxJRF9UQUdTfTtjb25zdCByPXRoaXMuX2NvbnRleHQuZ2V0Q3VycmVudElkKCk7aWYoIXIpcmV0dXJue2NvZGU6VC5JTlZBTElEX1VTRVJfSUR9O2NvbnN0e3N0cmVhbTppLGNvZGU6bn09eWllbGQgdGhpcy5fZ2V0TWVkaWFTdHJlYW0oe2F1ZGlvOntkZXZpY2VJZDpudWxsPT10P3ZvaWQgMDp0Lm1pY3Bob25lSWQsc2FtcGxlUmF0ZTpudWxsPT10P3ZvaWQgMDp0LnNhbXBsZVJhdGV9fSk7aWYobiE9PVQuU1VDQ0VTUylyZXR1cm57Y29kZTpufTtjb25zdCBzPWkuZ2V0QXVkaW9UcmFja3MoKVswXTtyZXR1cm57Y29kZTpuLHRyYWNrOm5ldyBydChlLHIscyl9fSkpfWNyZWF0ZUNhbWVyYVZpZGVvVHJhY2soZT1cIlJvbmdDbG91ZFJUQ1wiLHQpe3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7aWYoIXV0KGUpKXJldHVybntjb2RlOlQuSU5WQUxJRF9UQUdTfTtjb25zdCByPXRoaXMuX2NvbnRleHQuZ2V0Q3VycmVudElkKCk7aWYoIXIpcmV0dXJue2NvZGU6VC5JTlZBTElEX1VTRVJfSUR9O2NvbnN0IGk9VHQobnVsbD09dD92b2lkIDA6dC5yZXNvbHV0aW9uKT90LnJlc29sdXRpb246SGUuVzY0MF9INDgwLHt3aWR0aDpuLGhlaWdodDpzfT1DdChpKSx7c3RyZWFtOm8sY29kZTphfT15aWVsZCB0aGlzLl9nZXRNZWRpYVN0cmVhbSh7dmlkZW86e2RldmljZUlkOm51bGw9PXQ/dm9pZCAwOnQuY2FtZXJhSWQsZnJhbWVSYXRlOkV0KChudWxsPT10P3ZvaWQgMDp0LmZyYW1lUmF0ZSl8fEJlLkZQU18xNSksd2lkdGg6bixoZWlnaHQ6cyxmYWNpbmdNb2RlOm51bGw9PXQ/dm9pZCAwOnQuZmFjZU1vZGV9fSk7aWYoYSE9PVQuU1VDQ0VTUylyZXR1cm57Y29kZTphfTtjb25zdCBjPW8uZ2V0VmlkZW9UcmFja3MoKVswXTtyZXR1cm57Y29kZTphLHRyYWNrOm5ldyBpdChlLHIsYyl9fSkpfWNyZWF0ZU1pY3JvcGhvbmVBbmRDYW1lcmFUcmFja3MoZT1cIlJvbmdDbG91ZFJUQ1wiLHQpe3ZhciByLGksbixzLG8sYTtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0IGM9W107aWYoIXV0KGUpKXJldHVybntjb2RlOlQuSU5WQUxJRF9UQUdTLHRyYWNrczpjfTtjb25zdCBkPXRoaXMuX2NvbnRleHQuZ2V0Q3VycmVudElkKCk7aWYoIWQpcmV0dXJue2NvZGU6VC5JTlZBTElEX1VTRVJfSUQsdHJhY2tzOmN9O2NvbnN0IHU9VHQobnVsbD09PShyPW51bGw9PXQ/dm9pZCAwOnQudmlkZW8pfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLnJlc29sdXRpb24pP3QudmlkZW8ucmVzb2x1dGlvbjpIZS5XNjQwX0g0ODAse3dpZHRoOmwsaGVpZ2h0Omh9PUN0KHUpLHtzdHJlYW06cCxjb2RlOl99PXlpZWxkIHRoaXMuX2dldE1lZGlhU3RyZWFtKHt2aWRlbzp7ZGV2aWNlSWQ6bnVsbD09PShpPW51bGw9PXQ/dm9pZCAwOnQudmlkZW8pfHx2b2lkIDA9PT1pP3ZvaWQgMDppLmNhbWVyYUlkLGZyYW1lUmF0ZTpFdCgobnVsbD09PShuPW51bGw9PXQ/dm9pZCAwOnQudmlkZW8pfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLmZyYW1lUmF0ZSl8fEJlLkZQU18xNSksd2lkdGg6bCxoZWlnaHQ6aCxmYWNpbmdNb2RlOm51bGw9PT0ocz1udWxsPT10P3ZvaWQgMDp0LnZpZGVvKXx8dm9pZCAwPT09cz92b2lkIDA6cy5mYWNlTW9kZX0sYXVkaW86e2RldmljZUlkOm51bGw9PT0obz1udWxsPT10P3ZvaWQgMDp0LmF1ZGlvKXx8dm9pZCAwPT09bz92b2lkIDA6by5taWNwaG9uZUlkLHNhbXBsZVJhdGU6bnVsbD09PShhPW51bGw9PXQ/dm9pZCAwOnQuYXVkaW8pfHx2b2lkIDA9PT1hP3ZvaWQgMDphLnNhbXBsZVJhdGV9fSk7cmV0dXJuIF8hPT1ULlNVQ0NFU1N8fHAuZ2V0VHJhY2tzKCkuZm9yRWFjaCgodD0+e1widmlkZW9cIj09PXQua2luZD9jLnB1c2gobmV3IGl0KGUsZCx0KSk6Yy51bnNoaWZ0KG5ldyBydChlLGQsdCkpfSkpLHtjb2RlOl8sdHJhY2tzOmN9fSkpfWNyZWF0ZVNjcmVlblZpZGVvVHJhY2soZT1cInNjcmVlbnNoYXJlXCIsdCl7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtpZighdXQoZSkpcmV0dXJue2NvZGU6VC5JTlZBTElEX1RBR1N9O2NvbnN0IHI9dGhpcy5fY29udGV4dC5nZXRDdXJyZW50SWQoKTtpZighcilyZXR1cm57Y29kZTpULklOVkFMSURfVVNFUl9JRH07aWYoIWJ0KCkpcmV0dXJue2NvZGU6VC5CUk9XU0VSX05PVF9TVVBQT1JUfTtjb25zdCBpPS9FbGVjdHJvbi8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtpZihpJiYhKG51bGw9PXQ/dm9pZCAwOnQuY2hyb21lTWVkaWFTb3VyY2VJZCkpcmV0dXJue2NvZGU6VC5QQVJBTVNfRVJST1J9O2NvbnN0IG49VHQobnVsbD09dD92b2lkIDA6dC5yZXNvbHV0aW9uKT90LnJlc29sdXRpb246SGUuVzEyODBfSDcyMCx7d2lkdGg6cyxoZWlnaHQ6b309Q3QobiksYT1pP3ttYW5kYXRvcnk6e2Nocm9tZU1lZGlhU291cmNlSWQ6dC5jaHJvbWVNZWRpYVNvdXJjZUlkLGNocm9tZU1lZGlhU291cmNlOlwiZGVza3RvcFwiLG1pbldpZHRoOnMsbWF4V2lkdGg6cyxtaW5IZWlnaHQ6byxtYXhIZWlnaHQ6b319OntmcmFtZVJhdGU6RXQoKG51bGw9PXQ/dm9pZCAwOnQuZnJhbWVSYXRlKXx8QmUuRlBTXzE1KSx3aWR0aDpzLGhlaWdodDpvfSx7c3RyZWFtOmMsY29kZTpkfT15aWVsZCB0aGlzLl9nZXRNZWRpYVN0cmVhbSh7dmlkZW86YSxhdWRpbzohMX0saT9cImdldFVzZXJNZWRpYVwiOlwiZ2V0RGlzcGxheU1lZGlhXCIpO2lmKGQhPT1ULlNVQ0NFU1MpcmV0dXJue2NvZGU6ZH07Y29uc3QgdT1jLmdldFZpZGVvVHJhY2tzKClbMF07cmV0dXJue2NvZGU6ZCx0cmFjazpuZXcgbnQoZSxyLHUpfX0pKX1jcmVhdGVMb2NhbEF1ZGlvVHJhY2soZSx0KXtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2lmKCF1dChlKSlyZXR1cm57Y29kZTpULklOVkFMSURfVEFHU307aWYoIXR8fFwiW29iamVjdCBNZWRpYVN0cmVhbVRyYWNrXVwiIT09dC50b1N0cmluZygpfHxcImF1ZGlvXCIhPT10LmtpbmQpcmV0dXJue2NvZGU6VC5DUkVBVEVfQ1VTVE9NX1RSQUNLX0ZBSUxFRH07Y29uc3Qgcj10aGlzLl9jb250ZXh0LmdldEN1cnJlbnRJZCgpO3JldHVybiByP3tjb2RlOlQuU1VDQ0VTUyx0cmFjazpuZXcgUWUoZSxyLHQpfTp7Y29kZTpULklOVkFMSURfVVNFUl9JRH19KSl9Y3JlYXRlTG9jYWxWaWRlb1RyYWNrKGUsdCl7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtpZighdXQoZSkpcmV0dXJue2NvZGU6VC5JTlZBTElEX1RBR1N9O2lmKCF0fHxcIltvYmplY3QgTWVkaWFTdHJlYW1UcmFja11cIiE9PXQudG9TdHJpbmcoKXx8XCJ2aWRlb1wiIT09dC5raW5kKXJldHVybntjb2RlOlQuQ1JFQVRFX0NVU1RPTV9UUkFDS19GQUlMRUR9O2NvbnN0IHI9dGhpcy5fY29udGV4dC5nZXRDdXJyZW50SWQoKTtyZXR1cm4gcj97Y29kZTpULlNVQ0NFU1MsdHJhY2s6bmV3IFhlKGUscix0KX06e2NvZGU6VC5JTlZBTElEX1VTRVJfSUR9fSkpfWNyZWF0ZUxvY2FsRmlsZVRyYWNrcyhlLHQscil7cmV0dXJuIFModGhpcyx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbiooKXtpZighdXQoZSkpcmV0dXJue2NvZGU6VC5JTlZBTElEX1RBR1MsdHJhY2tzOltdfTtpZigha3QoKSlyZXR1cm57Y29kZTpULkJST1dTRVJfTk9UX1NVUFBPUlQsdHJhY2tzOltdfTtjb25zdCBpPXQgaW5zdGFuY2VvZiBGaWxlP1VSTC5jcmVhdGVPYmplY3RVUkwodCk6dDtpZighKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5pc0h0dHBVcmwpKGkpJiYhL15ibG9iOi8udGVzdChpKSlyZXR1cm4gQy53YXJuKGBjcmVhdGVMb2NhbEZpbGVUcmFja3MgZmFpbGVkOiBwYXJhbXMgZXJyb3IgLT4gdXJsOiAke2l9YCkse2NvZGU6VC5QQVJBTVNfRVJST1IsdHJhY2tzOltdfTtjb25zdCBuPXRoaXMuX2NvbnRleHQuZ2V0Q3VycmVudElkKCk7cmV0dXJuIG4/bmV3IFByb21pc2UoKHQ9Pntjb25zdCBzPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ2aWRlb1wiKTsobnVsbD09cj92b2lkIDA6ci53aXRob3V0QXVkaW8pJiYocy5tdXRlZD0hMCkscy5vbmxvYWRlZG1ldGFkYXRhPSgpPT57Y29uc3Qgbz1bXTtsZXQgYTt0cnl7Y29uc3QgZT1zLm1vekNhcHR1cmVTdHJlYW0/XCJtb3pDYXB0dXJlU3RyZWFtXCI6XCJjYXB0dXJlU3RyZWFtXCI7YT1zW2VdKCl9Y2F0Y2goZSl7Qy5lcnJvcihgY3JlYXRlIFJDTG9jYWxGaWxlVHJhY2sgZmFpbGVkLCBjYXB0dXJlU3RlYW0gZXJyb3IuIC0+IHVybDogJHtpfWApLEMuZXJyb3IoZSksdCh7Y29kZTpULkNSRUFURV9GSUxFX1RSQUNLX0ZBSUxFRCx0cmFja3M6b30pfWNvbnN0W2MsZF09SXIoYSxyKTtjJiZvLnB1c2gobmV3IHR0KGUsbixjLHMpKSxkJiZvLnB1c2gobmV3IGV0KGUsbixkLHMpKSwwPT09by5sZW5ndGgmJihzLnBhdXNlKCkscy5zcmM9XCJcIikscy5vbmVycm9yPW51bGwsdCh7Y29kZTpULlNVQ0NFU1MsdHJhY2tzOm99KX0scy5vbmVycm9yPSgpPT57Qy5lcnJvcihgY3JlYXRlIFJDTG9jYWxGaWxlVHJhY2sgZmFpbGVkIC0+IHVybDogJHtpfWApLHQoe2NvZGU6VC5DUkVBVEVfRklMRV9UUkFDS19GQUlMRUQsdHJhY2tzOltdfSl9LHMuc3JjPWkscy5sb29wPSEwLHMucGxheSgpfSkpOntjb2RlOlQuSU5WQUxJRF9VU0VSX0lELHRyYWNrczpbXX19KSl9Y3JlYXRlTG9jYWxUcmFja3MoZSx0LHIpe3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7Y29uc3QgaT1bXTtpZighdXQoZSkpcmV0dXJue2NvZGU6VC5JTlZBTElEX1RBR1MsdHJhY2tzOml9O2lmKCEodCBpbnN0YW5jZW9mIE1lZGlhU3RyZWFtKSlyZXR1cm57Y29kZTpULlBBUkFNU19FUlJPUix0cmFja3M6aX07Y29uc3Qgbj10aGlzLl9jb250ZXh0LmdldEN1cnJlbnRJZCgpO2lmKCFuKXJldHVybntjb2RlOlQuSU5WQUxJRF9VU0VSX0lELHRyYWNrczppfTtjb25zdFtzLG9dPUlyKHQscik7cmV0dXJuIHMmJmkucHVzaChuZXcgUWUoZSxuLHMpKSxvJiZpLnB1c2gobmV3IFhlKGUsbixvKSkse2NvZGU6VC5TVUNDRVNTLHRyYWNrczppfX0pKX1qb2luTGl2aW5nUm9vbUFzQXVkaWVuY2UoZSx0KXtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2lmKE90KHRoaXMuX2NvbnRleHQuZ2V0TmF2aUluZm8oKSkpcmV0dXJue2NvZGU6VC5QQUNLQUdFX0VOVklST05NRU5UX0VSUk9SfTtpZighKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy52YWxpZGF0ZSkoXCJyb29tSWRcIixlLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18ubm90RW1wdHlTdHJpbmcsITApfHwhKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy52YWxpZGF0ZSkoXCJsaXZpbmdUeXBlXCIsdCwoZT0+ZT09PWxyLkFVRElPfHxlPT09bHIuVklERU8pKSlyZXR1cm57Y29kZTpULlBBUkFNU19FUlJPUn07aWYodGhpcy5fY3J0QXVkaWVuY2VMaXZpbmdSb29tKXJldHVybntjb2RlOlQuUkVQRVJUX0pPSU5fUk9PTX07aWYoIXRoaXMuX3NlcnZpY2UuZ2V0TmF2aU1TKCkubGVuZ3RoKXJldHVybntjb2RlOlQuTk9UX09QRU5fVklERU9fQVVESU9fU0VSVkVSfTtjb25zdHtjb2RlOnIsZGF0YTpufT15aWVsZCB0aGlzLl9jb250ZXh0LmpvaW5MaXZpbmdSb29tQXNBdWRpZW5jZShlLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uUlRDTW9kZS5MSVZFLHQpO2lmKHIhPT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTKXJldHVybiBDLmVycm9yKFwiYXVkaWVuY2VKb2luTGl2aW5nUm9vbUVycm9yOlwiLHIpLHtjb2RlOlQuU0lHTkFMX0FVRElFTkNFX0pPSU5fUk9PTV9GQUlMRUR9O0MuaW5mbyhgam9pbkxpdmluZ1Jvb21Bc0F1ZGllbmNlIHN1Y2Nlc3MsIHJvb20gZGF0YTogJHtKU09OLnN0cmluZ2lmeShuKX1gKTtjb25zdCBzPW5ldyBUcih0aGlzLl9jb250ZXh0LHRoaXMuX3J1bnRpbWUsdGhpcy5fb3B0aW9ucyxlLG4sdCk7cmV0dXJuIHRoaXMuX2NydEF1ZGllbmNlTGl2aW5nUm9vbT1zLHtyb29tOnMsY29kZTpULlNVQ0NFU1MsdXNlcklkczpzLmdldFJlbW90ZVVzZXJJZHMoKSxSVENUcmFja3M6cy5nZXRSZW1vdGVSVENUcmFja3MoKSxNQ1VUcmFja3M6cy5nZXRSZW1vdGVNQ1VUcmFja3MoKSxDRE5VcmlzOnMuZ2V0Q0ROSW5mbygpfX0pKX1sZWF2ZUxpdmluZ1Jvb21Bc0F1ZGllbmNlKGUpe3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7cmV0dXJuIHRoaXMuX2NydEF1ZGllbmNlTGl2aW5nUm9vbT90aGlzLl9jcnRBdWRpZW5jZUxpdmluZ1Jvb20hPT1lP3tjb2RlOlQuUEFSQU1TX0VSUk9SfTooeWllbGQgdGhpcy5fY3J0QXVkaWVuY2VMaXZpbmdSb29tLl9fZGVzdHJveSghMCksdGhpcy5fY3J0QXVkaWVuY2VMaXZpbmdSb29tPW51bGwse2NvZGU6VC5TVUNDRVNTfSk6e2NvZGU6VC5TVUNDRVNTfX0pKX11cGdyYWRlVG9BbmNob3JSb29tKGUpe3JldHVybiBTKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24qKCl7aWYoISgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18udmFsaWRhdGUpKFwicm9vbS5fcm9vbUlkXCIsZS5fcm9vbUlkLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18ubm90RW1wdHlTdHJpbmcsITApKXJldHVybntjb2RlOlQuUEFSQU1TX0VSUk9SfTtpZih0aGlzLl9jcnRSb29tKXJldHVybntjb2RlOlQuUkVQRVJUX0pPSU5fUk9PTX07Y29uc3R7Y29kZTp0LGRhdGE6cn09eWllbGQgdGhpcy5fY29udGV4dC5ydGNJZGVudGl0eUNoYW5nZShlLl9yb29tSWQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5SVENJZGVudGl0eUNoYW5nZVR5cGUuVmlld2VyVG9BbmNob3IsZS5fbGl2aW5nVHlwZSk7aWYodCE9PV9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXJyb3JDb2RlLlNVQ0NFU1MpcmV0dXJuIEMuZXJyb3IoXCJjaGFuZ2Ugcm9vbSBpZGVudGl0eSBlcnJvclwiLHQpLHtjb2RlOlQuU0lHTkFMX1JPT01fQ0hBTkdFX0lERU5USVRZX0ZBSUxFRH07eWllbGQgdGhpcy5fY3J0QXVkaWVuY2VMaXZpbmdSb29tLl9fZGVzdHJveSghMSk7Y29uc3Qgbj1uZXcgX3IodGhpcy5fY29udGV4dCx0aGlzLl9ydW50aW1lLGUuX3Jvb21JZCxyLHRoaXMuX3NlcnZpY2UsdGhpcy5fb3B0aW9ucyx0aGlzLl9yZWxlYXNlQ3J0Um9vbU9iai5iaW5kKHRoaXMpLGUuX2xpdmluZ1R5cGUsITAsITApO3JldHVybiB0aGlzLl9jcnRSb29tPW4sdGhpcy5fY3J0QXVkaWVuY2VMaXZpbmdSb29tPW51bGwse3Jvb206bixjb2RlOlQuU1VDQ0VTUyx1c2VySWRzOmUuZ2V0UmVtb3RlVXNlcklkcygpLHRyYWNrczpuLmdldFJlbW90ZVRyYWNrcygpfX0pKX1kb3duZ3JhZGVUb0F1ZGllbmNlUm9vbShlKXtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2lmKCEoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLnZhbGlkYXRlKShcInJvb20uX3Jvb21JZFwiLGUuX3Jvb21JZCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLm5vdEVtcHR5U3RyaW5nLCEwKSlyZXR1cm57Y29kZTpULlBBUkFNU19FUlJPUn07aWYodGhpcy5fY3J0QXVkaWVuY2VMaXZpbmdSb29tKXJldHVybntjb2RlOlQuUkVQRVJUX0pPSU5fUk9PTX07Y29uc3R7Y29kZTp0LGRhdGE6cn09eWllbGQgdGhpcy5fY29udGV4dC5ydGNJZGVudGl0eUNoYW5nZShlLl9yb29tSWQsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5SVENJZGVudGl0eUNoYW5nZVR5cGUuQW5jaG9yVG9WaWV3ZXIsZS5nZXRMaXZpbmdUeXBlKCkpO2lmKHQhPT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTKXJldHVybiBDLmVycm9yKFwiY2hhbmdlIHJvb20gaWRlbnRpdHkgZXJyb3JcIix0KSx7Y29kZTpULlNJR05BTF9ST09NX0NIQU5HRV9JREVOVElUWV9GQUlMRUR9O0MuaW5mbyhgZG93bmdyYWRlVG9BdWRpZW5jZVJvb20gc3VjY2Vzcywgcm9vbSBkYXRhOiAke0pTT04uc3RyaW5naWZ5KHIpfWApO2NvbnN0IG49bmV3IFRyKHRoaXMuX2NvbnRleHQsdGhpcy5fcnVudGltZSx0aGlzLl9vcHRpb25zLGUuX3Jvb21JZCxyLGUuZ2V0TGl2aW5nVHlwZSgpKTtyZXR1cm4gdGhpcy5fY3J0QXVkaWVuY2VMaXZpbmdSb29tPW4sdGhpcy5fY3J0Um9vbS5fX2Rlc3Ryb3koITEpLHRoaXMuX2NydFJvb209bnVsbCx7cm9vbTpuLGNvZGU6VC5TVUNDRVNTLHVzZXJJZHM6bi5nZXRSZW1vdGVVc2VySWRzKCksUlRDVHJhY2tzOm4uZ2V0UmVtb3RlUlRDVHJhY2tzKCksTUNVVHJhY2tzOm4uZ2V0UmVtb3RlTUNVVHJhY2tzKCksQ0ROVXJpczpuLmdldENETkluZm8oKX19KSl9Z2V0Sm9pbmVkUm9vbUluZm8oKXtyZXR1cm4gUyh0aGlzLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKigpe2NvbnN0e2NvZGU6ZSxkYXRhOnR9PXlpZWxkIHRoaXMuX2NvbnRleHQuZ2V0UlRDSm9pbmVkVXNlckluZm8odGhpcy5fY29udGV4dC5nZXRDdXJyZW50SWQoKSk7cmV0dXJuIGUhPT1fcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkVycm9yQ29kZS5TVUNDRVNTPyhDLmVycm9yKFwiZ2V0Sm9pbmVkVXNlckluZm8gZXJyb3JcIixlKSx7Y29kZTpULlNJR05BTF9ST09NX0NIQU5HRV9JREVOVElUWV9GQUlMRUR9KTp7Y29kZTpULlNVQ0NFU1MsZGF0YTp0fX0pKX19dmFyIHlyOyFmdW5jdGlvbihlKXtlW2UuU0VSVkVSX0tJQ0s9MV09XCJTRVJWRVJfS0lDS1wiLGVbZS5PVEhFUl9LSUNLPTJdPVwiT1RIRVJfS0lDS1wifSh5cnx8KHlyPXt9KSk7Y29uc3Qga3I9e3RhZzpcIlJDUlRDXCIsdmVyaWZ5OmU9PlwiYnJvd3NlclwiIT09ZS50YWc/KEMuZXJyb3IoYFJDUlRDIFBsdWdpbiBpcyBub3Qgc3VwcG9ydCB0aGUgcnVudGltZSAnJHtlLnRhZ30nYCksITEpOmx0Pyhfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLlZlcnNpb25NYW5hZ2UuYWRkKFwicGx1Z2luLXJ0Y1wiLFwiNS4zLjFcIiksISFfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLlZlcnNpb25NYW5hZ2UudmFsaWRFbmdpbmUoXCI1LjEuMFwiKXx8KEMuZXJyb3IoYFRoZSBjdXJyZW50IGVuZ2luZSB2ZXJzaW9uICcke19yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uVmVyc2lvbk1hbmFnZS5nZXRJbmZvKCkuZW5naW5lfScgZXJyb3IsIHBsdWdpbi1ydGMgcmVxdWlyZWQgZW5naW5lIHZlcnNpb24gYXQgbGVhc3QgJzUuMS4wJy5gKSwhMSkpOihDLmVycm9yKFwiUGxlYXNlIHVzZSB0aGUgaHR0cHMgcHJvdG9jb2wgb3IgdXNlIGBodHRwOi8vbG9jYWxob3N0YCB0byBvcGVuIHRoZSBwYWdlIVwiKSwhMSksc2V0dXA6KGUsdCxpPXt9KT0+KEMuc2V0TG9nTGV2ZWwoaS5sb2dMZXZlbCksQy5zZXRMb2dTdGRvdXQoaS5sb2dTdGRvdXQpLEMud2FybihcIlJDUlRDIFZlcnNpb246IDUuMy4xLCBDb21taXQ6IGUxYWYwZjVjY2IwNmEwMDg0Yzk0ZTEyMTlkOGFmNTRjOTc5M2MwNmJcIiksQy53YXJuKGBicm93c2VySW5mby5icm93c2VyIC0+ICR7eXQuYnJvd3Nlcn1gKSxDLndhcm4oYGJyb3dzZXJJbmZvLnN1cHBvcnRzVW5pZmllZFBsYW4gLT4gJHt5dC5zdXBwb3J0c1VuaWZpZWRQbGFufWApLEMud2FybihgYnJvd3NlckluZm8udmVyc2lvbiAtPiAke3l0LnZlcnNpb259YCksKDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5hc3NlcnQpKFwib3B0aW9ucy5tZWRpYVNlcnZlclwiLGkubWVkaWFTZXJ2ZXIsKGU9PiEoISgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uaXNIdHRwVXJsKShlKXx8XCJodHRwczpcIj09PWxvY2F0aW9uLnByb3RvY29sJiYhL15odHRwcy8udGVzdChlKSkpKSwoMCxfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmFzc2VydCkoXCJvcHRpb25zLnRpbWVvdXRcIixpLnRpbWVvdXQsKGU9PigwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uaXNOdW1iZXIpKGUpJiZlPj01ZTMmJmU8PTNlNCkpLCgwLF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uYXNzZXJ0KShcIm9wdGlvbnMucGluZ0dhcFwiLGkucGluZ0dhcCwoZT0+KDAsX3JvbmdjbG91ZF9lbmdpbmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5pc051bWJlcikoZSkmJmU+PTNlMyYmZTw9MWU0KSksbmV3IEVyKGUsdCxpKSl9LGJyPXtERUZBVUxUOlwiUm9uZ0Nsb3VkUlRDXCJ9LFByPXt0cmFuc1Jlc29sdXRpb246Q3QsdHJhbnNGcmFtZVJhdGU6RXQscGFyc2VUcmFja0lkOmZ0LGlmU3VwcG9ydExvY2FsRmlsZVRyYWNrOmt0LGlmU3VwcG9ydFNjcmVlblNoYXJlOmJ0fTtcblxuXG4vLyMgc291cmNlVVJMPXdlYnBhY2s6Ly9Acm9uZ2Nsb3VkL3Jjdm9pY2Vyb29tbGliLXYxLy4vbm9kZV9tb2R1bGVzL0Byb25nY2xvdWQvcGx1Z2luLXJ0Yy9kaXN0L2luZGV4LmVzbS5qcz8iKTsvKioqL30sLyoqKi8iLi9ub2RlX21vZHVsZXMvZXZlbnRzL2V2ZW50cy5qcyI6LyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcCiAgISoqKiAuL25vZGVfbW9kdWxlcy9ldmVudHMvZXZlbnRzLmpzICoqKiEKICBcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLyAvKioqL2Z1bmN0aW9uIG5vZGVfbW9kdWxlc0V2ZW50c0V2ZW50c0pzKG1vZHVsZSl7ZXZhbCgiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cblxuXG52YXIgUiA9IHR5cGVvZiBSZWZsZWN0ID09PSAnb2JqZWN0JyA/IFJlZmxlY3QgOiBudWxsXG52YXIgUmVmbGVjdEFwcGx5ID0gUiAmJiB0eXBlb2YgUi5hcHBseSA9PT0gJ2Z1bmN0aW9uJ1xuICA/IFIuYXBwbHlcbiAgOiBmdW5jdGlvbiBSZWZsZWN0QXBwbHkodGFyZ2V0LCByZWNlaXZlciwgYXJncykge1xuICAgIHJldHVybiBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHkuY2FsbCh0YXJnZXQsIHJlY2VpdmVyLCBhcmdzKTtcbiAgfVxuXG52YXIgUmVmbGVjdE93bktleXNcbmlmIChSICYmIHR5cGVvZiBSLm93bktleXMgPT09ICdmdW5jdGlvbicpIHtcbiAgUmVmbGVjdE93bktleXMgPSBSLm93bktleXNcbn0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykge1xuICBSZWZsZWN0T3duS2V5cyA9IGZ1bmN0aW9uIFJlZmxlY3RPd25LZXlzKHRhcmdldCkge1xuICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0YXJnZXQpXG4gICAgICAuY29uY2F0KE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHModGFyZ2V0KSk7XG4gIH07XG59IGVsc2Uge1xuICBSZWZsZWN0T3duS2V5cyA9IGZ1bmN0aW9uIFJlZmxlY3RPd25LZXlzKHRhcmdldCkge1xuICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0YXJnZXQpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBQcm9jZXNzRW1pdFdhcm5pbmcod2FybmluZykge1xuICBpZiAoY29uc29sZSAmJiBjb25zb2xlLndhcm4pIGNvbnNvbGUud2Fybih3YXJuaW5nKTtcbn1cblxudmFyIE51bWJlcklzTmFOID0gTnVtYmVyLmlzTmFOIHx8IGZ1bmN0aW9uIE51bWJlcklzTmFOKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSAhPT0gdmFsdWU7XG59XG5cbmZ1bmN0aW9uIEV2ZW50RW1pdHRlcigpIHtcbiAgRXZlbnRFbWl0dGVyLmluaXQuY2FsbCh0aGlzKTtcbn1cbm1vZHVsZS5leHBvcnRzID0gRXZlbnRFbWl0dGVyO1xubW9kdWxlLmV4cG9ydHMub25jZSA9IG9uY2U7XG5cbi8vIEJhY2t3YXJkcy1jb21wYXQgd2l0aCBub2RlIDAuMTAueFxuRXZlbnRFbWl0dGVyLkV2ZW50RW1pdHRlciA9IEV2ZW50RW1pdHRlcjtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fZXZlbnRzID0gdW5kZWZpbmVkO1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fZXZlbnRzQ291bnQgPSAwO1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fbWF4TGlzdGVuZXJzID0gdW5kZWZpbmVkO1xuXG4vLyBCeSBkZWZhdWx0IEV2ZW50RW1pdHRlcnMgd2lsbCBwcmludCBhIHdhcm5pbmcgaWYgbW9yZSB0aGFuIDEwIGxpc3RlbmVycyBhcmVcbi8vIGFkZGVkIHRvIGl0LiBUaGlzIGlzIGEgdXNlZnVsIGRlZmF1bHQgd2hpY2ggaGVscHMgZmluZGluZyBtZW1vcnkgbGVha3MuXG52YXIgZGVmYXVsdE1heExpc3RlbmVycyA9IDEwO1xuXG5mdW5jdGlvbiBjaGVja0xpc3RlbmVyKGxpc3RlbmVyKSB7XG4gIGlmICh0eXBlb2YgbGlzdGVuZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgXCJsaXN0ZW5lclwiIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBGdW5jdGlvbi4gUmVjZWl2ZWQgdHlwZSAnICsgdHlwZW9mIGxpc3RlbmVyKTtcbiAgfVxufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoRXZlbnRFbWl0dGVyLCAnZGVmYXVsdE1heExpc3RlbmVycycsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZGVmYXVsdE1heExpc3RlbmVycztcbiAgfSxcbiAgc2V0OiBmdW5jdGlvbihhcmcpIHtcbiAgICBpZiAodHlwZW9mIGFyZyAhPT0gJ251bWJlcicgfHwgYXJnIDwgMCB8fCBOdW1iZXJJc05hTihhcmcpKSB7XG4gICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignVGhlIHZhbHVlIG9mIFwiZGVmYXVsdE1heExpc3RlbmVyc1wiIGlzIG91dCBvZiByYW5nZS4gSXQgbXVzdCBiZSBhIG5vbi1uZWdhdGl2ZSBudW1iZXIuIFJlY2VpdmVkICcgKyBhcmcgKyAnLicpO1xuICAgIH1cbiAgICBkZWZhdWx0TWF4TGlzdGVuZXJzID0gYXJnO1xuICB9XG59KTtcblxuRXZlbnRFbWl0dGVyLmluaXQgPSBmdW5jdGlvbigpIHtcblxuICBpZiAodGhpcy5fZXZlbnRzID09PSB1bmRlZmluZWQgfHxcbiAgICAgIHRoaXMuX2V2ZW50cyA9PT0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMpLl9ldmVudHMpIHtcbiAgICB0aGlzLl9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHRoaXMuX2V2ZW50c0NvdW50ID0gMDtcbiAgfVxuXG4gIHRoaXMuX21heExpc3RlbmVycyA9IHRoaXMuX21heExpc3RlbmVycyB8fCB1bmRlZmluZWQ7XG59O1xuXG4vLyBPYnZpb3VzbHkgbm90IGFsbCBFbWl0dGVycyBzaG91bGQgYmUgbGltaXRlZCB0byAxMC4gVGhpcyBmdW5jdGlvbiBhbGxvd3Ncbi8vIHRoYXQgdG8gYmUgaW5jcmVhc2VkLiBTZXQgdG8gemVybyBmb3IgdW5saW1pdGVkLlxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5zZXRNYXhMaXN0ZW5lcnMgPSBmdW5jdGlvbiBzZXRNYXhMaXN0ZW5lcnMobikge1xuICBpZiAodHlwZW9mIG4gIT09ICdudW1iZXInIHx8IG4gPCAwIHx8IE51bWJlcklzTmFOKG4pKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RoZSB2YWx1ZSBvZiBcIm5cIiBpcyBvdXQgb2YgcmFuZ2UuIEl0IG11c3QgYmUgYSBub24tbmVnYXRpdmUgbnVtYmVyLiBSZWNlaXZlZCAnICsgbiArICcuJyk7XG4gIH1cbiAgdGhpcy5fbWF4TGlzdGVuZXJzID0gbjtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5mdW5jdGlvbiBfZ2V0TWF4TGlzdGVuZXJzKHRoYXQpIHtcbiAgaWYgKHRoYXQuX21heExpc3RlbmVycyA9PT0gdW5kZWZpbmVkKVxuICAgIHJldHVybiBFdmVudEVtaXR0ZXIuZGVmYXVsdE1heExpc3RlbmVycztcbiAgcmV0dXJuIHRoYXQuX21heExpc3RlbmVycztcbn1cblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5nZXRNYXhMaXN0ZW5lcnMgPSBmdW5jdGlvbiBnZXRNYXhMaXN0ZW5lcnMoKSB7XG4gIHJldHVybiBfZ2V0TWF4TGlzdGVuZXJzKHRoaXMpO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24gZW1pdCh0eXBlKSB7XG4gIHZhciBhcmdzID0gW107XG4gIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSBhcmdzLnB1c2goYXJndW1lbnRzW2ldKTtcbiAgdmFyIGRvRXJyb3IgPSAodHlwZSA9PT0gJ2Vycm9yJyk7XG5cbiAgdmFyIGV2ZW50cyA9IHRoaXMuX2V2ZW50cztcbiAgaWYgKGV2ZW50cyAhPT0gdW5kZWZpbmVkKVxuICAgIGRvRXJyb3IgPSAoZG9FcnJvciAmJiBldmVudHMuZXJyb3IgPT09IHVuZGVmaW5lZCk7XG4gIGVsc2UgaWYgKCFkb0Vycm9yKVxuICAgIHJldHVybiBmYWxzZTtcblxuICAvLyBJZiB0aGVyZSBpcyBubyAnZXJyb3InIGV2ZW50IGxpc3RlbmVyIHRoZW4gdGhyb3cuXG4gIGlmIChkb0Vycm9yKSB7XG4gICAgdmFyIGVyO1xuICAgIGlmIChhcmdzLmxlbmd0aCA+IDApXG4gICAgICBlciA9IGFyZ3NbMF07XG4gICAgaWYgKGVyIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIC8vIE5vdGU6IFRoZSBjb21tZW50cyBvbiB0aGUgYHRocm93YCBsaW5lcyBhcmUgaW50ZW50aW9uYWwsIHRoZXkgc2hvd1xuICAgICAgLy8gdXAgaW4gTm9kZSdzIG91dHB1dCBpZiB0aGlzIHJlc3VsdHMgaW4gYW4gdW5oYW5kbGVkIGV4Y2VwdGlvbi5cbiAgICAgIHRocm93IGVyOyAvLyBVbmhhbmRsZWQgJ2Vycm9yJyBldmVudFxuICAgIH1cbiAgICAvLyBBdCBsZWFzdCBnaXZlIHNvbWUga2luZCBvZiBjb250ZXh0IHRvIHRoZSB1c2VyXG4gICAgdmFyIGVyciA9IG5ldyBFcnJvcignVW5oYW5kbGVkIGVycm9yLicgKyAoZXIgPyAnICgnICsgZXIubWVzc2FnZSArICcpJyA6ICcnKSk7XG4gICAgZXJyLmNvbnRleHQgPSBlcjtcbiAgICB0aHJvdyBlcnI7IC8vIFVuaGFuZGxlZCAnZXJyb3InIGV2ZW50XG4gIH1cblxuICB2YXIgaGFuZGxlciA9IGV2ZW50c1t0eXBlXTtcblxuICBpZiAoaGFuZGxlciA9PT0gdW5kZWZpbmVkKVxuICAgIHJldHVybiBmYWxzZTtcblxuICBpZiAodHlwZW9mIGhhbmRsZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICBSZWZsZWN0QXBwbHkoaGFuZGxlciwgdGhpcywgYXJncyk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGxlbiA9IGhhbmRsZXIubGVuZ3RoO1xuICAgIHZhciBsaXN0ZW5lcnMgPSBhcnJheUNsb25lKGhhbmRsZXIsIGxlbik7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSlcbiAgICAgIFJlZmxlY3RBcHBseShsaXN0ZW5lcnNbaV0sIHRoaXMsIGFyZ3MpO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59O1xuXG5mdW5jdGlvbiBfYWRkTGlzdGVuZXIodGFyZ2V0LCB0eXBlLCBsaXN0ZW5lciwgcHJlcGVuZCkge1xuICB2YXIgbTtcbiAgdmFyIGV2ZW50cztcbiAgdmFyIGV4aXN0aW5nO1xuXG4gIGNoZWNrTGlzdGVuZXIobGlzdGVuZXIpO1xuXG4gIGV2ZW50cyA9IHRhcmdldC5fZXZlbnRzO1xuICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpIHtcbiAgICBldmVudHMgPSB0YXJnZXQuX2V2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgdGFyZ2V0Ll9ldmVudHNDb3VudCA9IDA7XG4gIH0gZWxzZSB7XG4gICAgLy8gVG8gYXZvaWQgcmVjdXJzaW9uIGluIHRoZSBjYXNlIHRoYXQgdHlwZSA9PT0gXCJuZXdMaXN0ZW5lclwiISBCZWZvcmVcbiAgICAvLyBhZGRpbmcgaXQgdG8gdGhlIGxpc3RlbmVycywgZmlyc3QgZW1pdCBcIm5ld0xpc3RlbmVyXCIuXG4gICAgaWYgKGV2ZW50cy5uZXdMaXN0ZW5lciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0YXJnZXQuZW1pdCgnbmV3TGlzdGVuZXInLCB0eXBlLFxuICAgICAgICAgICAgICAgICAgbGlzdGVuZXIubGlzdGVuZXIgPyBsaXN0ZW5lci5saXN0ZW5lciA6IGxpc3RlbmVyKTtcblxuICAgICAgLy8gUmUtYXNzaWduIGBldmVudHNgIGJlY2F1c2UgYSBuZXdMaXN0ZW5lciBoYW5kbGVyIGNvdWxkIGhhdmUgY2F1c2VkIHRoZVxuICAgICAgLy8gdGhpcy5fZXZlbnRzIHRvIGJlIGFzc2lnbmVkIHRvIGEgbmV3IG9iamVjdFxuICAgICAgZXZlbnRzID0gdGFyZ2V0Ll9ldmVudHM7XG4gICAgfVxuICAgIGV4aXN0aW5nID0gZXZlbnRzW3R5cGVdO1xuICB9XG5cbiAgaWYgKGV4aXN0aW5nID09PSB1bmRlZmluZWQpIHtcbiAgICAvLyBPcHRpbWl6ZSB0aGUgY2FzZSBvZiBvbmUgbGlzdGVuZXIuIERvbid0IG5lZWQgdGhlIGV4dHJhIGFycmF5IG9iamVjdC5cbiAgICBleGlzdGluZyA9IGV2ZW50c1t0eXBlXSA9IGxpc3RlbmVyO1xuICAgICsrdGFyZ2V0Ll9ldmVudHNDb3VudDtcbiAgfSBlbHNlIHtcbiAgICBpZiAodHlwZW9mIGV4aXN0aW5nID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAvLyBBZGRpbmcgdGhlIHNlY29uZCBlbGVtZW50LCBuZWVkIHRvIGNoYW5nZSB0byBhcnJheS5cbiAgICAgIGV4aXN0aW5nID0gZXZlbnRzW3R5cGVdID1cbiAgICAgICAgcHJlcGVuZCA/IFtsaXN0ZW5lciwgZXhpc3RpbmddIDogW2V4aXN0aW5nLCBsaXN0ZW5lcl07XG4gICAgICAvLyBJZiB3ZSd2ZSBhbHJlYWR5IGdvdCBhbiBhcnJheSwganVzdCBhcHBlbmQuXG4gICAgfSBlbHNlIGlmIChwcmVwZW5kKSB7XG4gICAgICBleGlzdGluZy51bnNoaWZ0KGxpc3RlbmVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZXhpc3RpbmcucHVzaChsaXN0ZW5lcik7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgZm9yIGxpc3RlbmVyIGxlYWtcbiAgICBtID0gX2dldE1heExpc3RlbmVycyh0YXJnZXQpO1xuICAgIGlmIChtID4gMCAmJiBleGlzdGluZy5sZW5ndGggPiBtICYmICFleGlzdGluZy53YXJuZWQpIHtcbiAgICAgIGV4aXN0aW5nLndhcm5lZCA9IHRydWU7XG4gICAgICAvLyBObyBlcnJvciBjb2RlIGZvciB0aGlzIHNpbmNlIGl0IGlzIGEgV2FybmluZ1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gICAgICB2YXIgdyA9IG5ldyBFcnJvcignUG9zc2libGUgRXZlbnRFbWl0dGVyIG1lbW9yeSBsZWFrIGRldGVjdGVkLiAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmcubGVuZ3RoICsgJyAnICsgU3RyaW5nKHR5cGUpICsgJyBsaXN0ZW5lcnMgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICdhZGRlZC4gVXNlIGVtaXR0ZXIuc2V0TWF4TGlzdGVuZXJzKCkgdG8gJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICdpbmNyZWFzZSBsaW1pdCcpO1xuICAgICAgdy5uYW1lID0gJ01heExpc3RlbmVyc0V4Y2VlZGVkV2FybmluZyc7XG4gICAgICB3LmVtaXR0ZXIgPSB0YXJnZXQ7XG4gICAgICB3LnR5cGUgPSB0eXBlO1xuICAgICAgdy5jb3VudCA9IGV4aXN0aW5nLmxlbmd0aDtcbiAgICAgIFByb2Nlc3NFbWl0V2FybmluZyh3KTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGFyZ2V0O1xufVxuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyID0gZnVuY3Rpb24gYWRkTGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcbiAgcmV0dXJuIF9hZGRMaXN0ZW5lcih0aGlzLCB0eXBlLCBsaXN0ZW5lciwgZmFsc2UpO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbiA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXI7XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucHJlcGVuZExpc3RlbmVyID1cbiAgICBmdW5jdGlvbiBwcmVwZW5kTGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgIHJldHVybiBfYWRkTGlzdGVuZXIodGhpcywgdHlwZSwgbGlzdGVuZXIsIHRydWUpO1xuICAgIH07XG5cbmZ1bmN0aW9uIG9uY2VXcmFwcGVyKCkge1xuICBpZiAoIXRoaXMuZmlyZWQpIHtcbiAgICB0aGlzLnRhcmdldC5yZW1vdmVMaXN0ZW5lcih0aGlzLnR5cGUsIHRoaXMud3JhcEZuKTtcbiAgICB0aGlzLmZpcmVkID0gdHJ1ZTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMClcbiAgICAgIHJldHVybiB0aGlzLmxpc3RlbmVyLmNhbGwodGhpcy50YXJnZXQpO1xuICAgIHJldHVybiB0aGlzLmxpc3RlbmVyLmFwcGx5KHRoaXMudGFyZ2V0LCBhcmd1bWVudHMpO1xuICB9XG59XG5cbmZ1bmN0aW9uIF9vbmNlV3JhcCh0YXJnZXQsIHR5cGUsIGxpc3RlbmVyKSB7XG4gIHZhciBzdGF0ZSA9IHsgZmlyZWQ6IGZhbHNlLCB3cmFwRm46IHVuZGVmaW5lZCwgdGFyZ2V0OiB0YXJnZXQsIHR5cGU6IHR5cGUsIGxpc3RlbmVyOiBsaXN0ZW5lciB9O1xuICB2YXIgd3JhcHBlZCA9IG9uY2VXcmFwcGVyLmJpbmQoc3RhdGUpO1xuICB3cmFwcGVkLmxpc3RlbmVyID0gbGlzdGVuZXI7XG4gIHN0YXRlLndyYXBGbiA9IHdyYXBwZWQ7XG4gIHJldHVybiB3cmFwcGVkO1xufVxuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbiBvbmNlKHR5cGUsIGxpc3RlbmVyKSB7XG4gIGNoZWNrTGlzdGVuZXIobGlzdGVuZXIpO1xuICB0aGlzLm9uKHR5cGUsIF9vbmNlV3JhcCh0aGlzLCB0eXBlLCBsaXN0ZW5lcikpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucHJlcGVuZE9uY2VMaXN0ZW5lciA9XG4gICAgZnVuY3Rpb24gcHJlcGVuZE9uY2VMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgY2hlY2tMaXN0ZW5lcihsaXN0ZW5lcik7XG4gICAgICB0aGlzLnByZXBlbmRMaXN0ZW5lcih0eXBlLCBfb25jZVdyYXAodGhpcywgdHlwZSwgbGlzdGVuZXIpKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbi8vIEVtaXRzIGEgJ3JlbW92ZUxpc3RlbmVyJyBldmVudCBpZiBhbmQgb25seSBpZiB0aGUgbGlzdGVuZXIgd2FzIHJlbW92ZWQuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID1cbiAgICBmdW5jdGlvbiByZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgdmFyIGxpc3QsIGV2ZW50cywgcG9zaXRpb24sIGksIG9yaWdpbmFsTGlzdGVuZXI7XG5cbiAgICAgIGNoZWNrTGlzdGVuZXIobGlzdGVuZXIpO1xuXG4gICAgICBldmVudHMgPSB0aGlzLl9ldmVudHM7XG4gICAgICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpXG4gICAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgICBsaXN0ID0gZXZlbnRzW3R5cGVdO1xuICAgICAgaWYgKGxpc3QgPT09IHVuZGVmaW5lZClcbiAgICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICAgIGlmIChsaXN0ID09PSBsaXN0ZW5lciB8fCBsaXN0Lmxpc3RlbmVyID09PSBsaXN0ZW5lcikge1xuICAgICAgICBpZiAoLS10aGlzLl9ldmVudHNDb3VudCA9PT0gMClcbiAgICAgICAgICB0aGlzLl9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBkZWxldGUgZXZlbnRzW3R5cGVdO1xuICAgICAgICAgIGlmIChldmVudHMucmVtb3ZlTGlzdGVuZXIpXG4gICAgICAgICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgbGlzdC5saXN0ZW5lciB8fCBsaXN0ZW5lcik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGxpc3QgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcG9zaXRpb24gPSAtMTtcblxuICAgICAgICBmb3IgKGkgPSBsaXN0Lmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgaWYgKGxpc3RbaV0gPT09IGxpc3RlbmVyIHx8IGxpc3RbaV0ubGlzdGVuZXIgPT09IGxpc3RlbmVyKSB7XG4gICAgICAgICAgICBvcmlnaW5hbExpc3RlbmVyID0gbGlzdFtpXS5saXN0ZW5lcjtcbiAgICAgICAgICAgIHBvc2l0aW9uID0gaTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwb3NpdGlvbiA8IDApXG4gICAgICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICAgICAgaWYgKHBvc2l0aW9uID09PSAwKVxuICAgICAgICAgIGxpc3Quc2hpZnQoKTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgc3BsaWNlT25lKGxpc3QsIHBvc2l0aW9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMSlcbiAgICAgICAgICBldmVudHNbdHlwZV0gPSBsaXN0WzBdO1xuXG4gICAgICAgIGlmIChldmVudHMucmVtb3ZlTGlzdGVuZXIgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgb3JpZ2luYWxMaXN0ZW5lciB8fCBsaXN0ZW5lcik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub2ZmID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lcjtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPVxuICAgIGZ1bmN0aW9uIHJlbW92ZUFsbExpc3RlbmVycyh0eXBlKSB7XG4gICAgICB2YXIgbGlzdGVuZXJzLCBldmVudHMsIGk7XG5cbiAgICAgIGV2ZW50cyA9IHRoaXMuX2V2ZW50cztcbiAgICAgIGlmIChldmVudHMgPT09IHVuZGVmaW5lZClcbiAgICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICAgIC8vIG5vdCBsaXN0ZW5pbmcgZm9yIHJlbW92ZUxpc3RlbmVyLCBubyBuZWVkIHRvIGVtaXRcbiAgICAgIGlmIChldmVudHMucmVtb3ZlTGlzdGVuZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHRoaXMuX2V2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgICAgdGhpcy5fZXZlbnRzQ291bnQgPSAwO1xuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50c1t0eXBlXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgaWYgKC0tdGhpcy5fZXZlbnRzQ291bnQgPT09IDApXG4gICAgICAgICAgICB0aGlzLl9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIGRlbGV0ZSBldmVudHNbdHlwZV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG5cbiAgICAgIC8vIGVtaXQgcmVtb3ZlTGlzdGVuZXIgZm9yIGFsbCBsaXN0ZW5lcnMgb24gYWxsIGV2ZW50c1xuICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhldmVudHMpO1xuICAgICAgICB2YXIga2V5O1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgIGtleSA9IGtleXNbaV07XG4gICAgICAgICAgaWYgKGtleSA9PT0gJ3JlbW92ZUxpc3RlbmVyJykgY29udGludWU7XG4gICAgICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoa2V5KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycygncmVtb3ZlTGlzdGVuZXInKTtcbiAgICAgICAgdGhpcy5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgdGhpcy5fZXZlbnRzQ291bnQgPSAwO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cblxuICAgICAgbGlzdGVuZXJzID0gZXZlbnRzW3R5cGVdO1xuXG4gICAgICBpZiAodHlwZW9mIGxpc3RlbmVycyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVycyk7XG4gICAgICB9IGVsc2UgaWYgKGxpc3RlbmVycyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIC8vIExJRk8gb3JkZXJcbiAgICAgICAgZm9yIChpID0gbGlzdGVuZXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnNbaV0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbmZ1bmN0aW9uIF9saXN0ZW5lcnModGFyZ2V0LCB0eXBlLCB1bndyYXApIHtcbiAgdmFyIGV2ZW50cyA9IHRhcmdldC5fZXZlbnRzO1xuXG4gIGlmIChldmVudHMgPT09IHVuZGVmaW5lZClcbiAgICByZXR1cm4gW107XG5cbiAgdmFyIGV2bGlzdGVuZXIgPSBldmVudHNbdHlwZV07XG4gIGlmIChldmxpc3RlbmVyID09PSB1bmRlZmluZWQpXG4gICAgcmV0dXJuIFtdO1xuXG4gIGlmICh0eXBlb2YgZXZsaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJylcbiAgICByZXR1cm4gdW53cmFwID8gW2V2bGlzdGVuZXIubGlzdGVuZXIgfHwgZXZsaXN0ZW5lcl0gOiBbZXZsaXN0ZW5lcl07XG5cbiAgcmV0dXJuIHVud3JhcCA/XG4gICAgdW53cmFwTGlzdGVuZXJzKGV2bGlzdGVuZXIpIDogYXJyYXlDbG9uZShldmxpc3RlbmVyLCBldmxpc3RlbmVyLmxlbmd0aCk7XG59XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJzID0gZnVuY3Rpb24gbGlzdGVuZXJzKHR5cGUpIHtcbiAgcmV0dXJuIF9saXN0ZW5lcnModGhpcywgdHlwZSwgdHJ1ZSk7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJhd0xpc3RlbmVycyA9IGZ1bmN0aW9uIHJhd0xpc3RlbmVycyh0eXBlKSB7XG4gIHJldHVybiBfbGlzdGVuZXJzKHRoaXMsIHR5cGUsIGZhbHNlKTtcbn07XG5cbkV2ZW50RW1pdHRlci5saXN0ZW5lckNvdW50ID0gZnVuY3Rpb24oZW1pdHRlciwgdHlwZSkge1xuICBpZiAodHlwZW9mIGVtaXR0ZXIubGlzdGVuZXJDb3VudCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBlbWl0dGVyLmxpc3RlbmVyQ291bnQodHlwZSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGxpc3RlbmVyQ291bnQuY2FsbChlbWl0dGVyLCB0eXBlKTtcbiAgfVxufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lckNvdW50ID0gbGlzdGVuZXJDb3VudDtcbmZ1bmN0aW9uIGxpc3RlbmVyQ291bnQodHlwZSkge1xuICB2YXIgZXZlbnRzID0gdGhpcy5fZXZlbnRzO1xuXG4gIGlmIChldmVudHMgIT09IHVuZGVmaW5lZCkge1xuICAgIHZhciBldmxpc3RlbmVyID0gZXZlbnRzW3R5cGVdO1xuXG4gICAgaWYgKHR5cGVvZiBldmxpc3RlbmVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gMTtcbiAgICB9IGVsc2UgaWYgKGV2bGlzdGVuZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGV2bGlzdGVuZXIubGVuZ3RoO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiAwO1xufVxuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmV2ZW50TmFtZXMgPSBmdW5jdGlvbiBldmVudE5hbWVzKCkge1xuICByZXR1cm4gdGhpcy5fZXZlbnRzQ291bnQgPiAwID8gUmVmbGVjdE93bktleXModGhpcy5fZXZlbnRzKSA6IFtdO1xufTtcblxuZnVuY3Rpb24gYXJyYXlDbG9uZShhcnIsIG4pIHtcbiAgdmFyIGNvcHkgPSBuZXcgQXJyYXkobik7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgKytpKVxuICAgIGNvcHlbaV0gPSBhcnJbaV07XG4gIHJldHVybiBjb3B5O1xufVxuXG5mdW5jdGlvbiBzcGxpY2VPbmUobGlzdCwgaW5kZXgpIHtcbiAgZm9yICg7IGluZGV4ICsgMSA8IGxpc3QubGVuZ3RoOyBpbmRleCsrKVxuICAgIGxpc3RbaW5kZXhdID0gbGlzdFtpbmRleCArIDFdO1xuICBsaXN0LnBvcCgpO1xufVxuXG5mdW5jdGlvbiB1bndyYXBMaXN0ZW5lcnMoYXJyKSB7XG4gIHZhciByZXQgPSBuZXcgQXJyYXkoYXJyLmxlbmd0aCk7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcmV0Lmxlbmd0aDsgKytpKSB7XG4gICAgcmV0W2ldID0gYXJyW2ldLmxpc3RlbmVyIHx8IGFycltpXTtcbiAgfVxuICByZXR1cm4gcmV0O1xufVxuXG5mdW5jdGlvbiBvbmNlKGVtaXR0ZXIsIG5hbWUpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICBmdW5jdGlvbiBlcnJvckxpc3RlbmVyKGVycikge1xuICAgICAgZW1pdHRlci5yZW1vdmVMaXN0ZW5lcihuYW1lLCByZXNvbHZlcik7XG4gICAgICByZWplY3QoZXJyKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZXNvbHZlcigpIHtcbiAgICAgIGlmICh0eXBlb2YgZW1pdHRlci5yZW1vdmVMaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBlbWl0dGVyLnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIGVycm9yTGlzdGVuZXIpO1xuICAgICAgfVxuICAgICAgcmVzb2x2ZShbXS5zbGljZS5jYWxsKGFyZ3VtZW50cykpO1xuICAgIH07XG5cbiAgICBldmVudFRhcmdldEFnbm9zdGljQWRkTGlzdGVuZXIoZW1pdHRlciwgbmFtZSwgcmVzb2x2ZXIsIHsgb25jZTogdHJ1ZSB9KTtcbiAgICBpZiAobmFtZSAhPT0gJ2Vycm9yJykge1xuICAgICAgYWRkRXJyb3JIYW5kbGVySWZFdmVudEVtaXR0ZXIoZW1pdHRlciwgZXJyb3JMaXN0ZW5lciwgeyBvbmNlOiB0cnVlIH0pO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGFkZEVycm9ySGFuZGxlcklmRXZlbnRFbWl0dGVyKGVtaXR0ZXIsIGhhbmRsZXIsIGZsYWdzKSB7XG4gIGlmICh0eXBlb2YgZW1pdHRlci5vbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGV2ZW50VGFyZ2V0QWdub3N0aWNBZGRMaXN0ZW5lcihlbWl0dGVyLCAnZXJyb3InLCBoYW5kbGVyLCBmbGFncyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZXZlbnRUYXJnZXRBZ25vc3RpY0FkZExpc3RlbmVyKGVtaXR0ZXIsIG5hbWUsIGxpc3RlbmVyLCBmbGFncykge1xuICBpZiAodHlwZW9mIGVtaXR0ZXIub24gPT09ICdmdW5jdGlvbicpIHtcbiAgICBpZiAoZmxhZ3Mub25jZSkge1xuICAgICAgZW1pdHRlci5vbmNlKG5hbWUsIGxpc3RlbmVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZW1pdHRlci5vbihuYW1lLCBsaXN0ZW5lcik7XG4gICAgfVxuICB9IGVsc2UgaWYgKHR5cGVvZiBlbWl0dGVyLmFkZEV2ZW50TGlzdGVuZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAvLyBFdmVudFRhcmdldCBkb2VzIG5vdCBoYXZlIGBlcnJvcmAgZXZlbnQgc2VtYW50aWNzIGxpa2UgTm9kZVxuICAgIC8vIEV2ZW50RW1pdHRlcnMsIHdlIGRvIG5vdCBsaXN0ZW4gZm9yIGBlcnJvcmAgZXZlbnRzIGhlcmUuXG4gICAgZW1pdHRlci5hZGRFdmVudExpc3RlbmVyKG5hbWUsIGZ1bmN0aW9uIHdyYXBMaXN0ZW5lcihhcmcpIHtcbiAgICAgIC8vIElFIGRvZXMgbm90IGhhdmUgYnVpbHRpbiBgeyBvbmNlOiB0cnVlIH1gIHN1cHBvcnQgc28gd2VcbiAgICAgIC8vIGhhdmUgdG8gZG8gaXQgbWFudWFsbHkuXG4gICAgICBpZiAoZmxhZ3Mub25jZSkge1xuICAgICAgICBlbWl0dGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIobmFtZSwgd3JhcExpc3RlbmVyKTtcbiAgICAgIH1cbiAgICAgIGxpc3RlbmVyKGFyZyk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIFwiZW1pdHRlclwiIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBFdmVudEVtaXR0ZXIuIFJlY2VpdmVkIHR5cGUgJyArIHR5cGVvZiBlbWl0dGVyKTtcbiAgfVxufVxuXG5cbi8vIyBzb3VyY2VVUkw9d2VicGFjazovL0Byb25nY2xvdWQvcmN2b2ljZXJvb21saWItdjEvLi9ub2RlX21vZHVsZXMvZXZlbnRzL2V2ZW50cy5qcz8iKTsvKioqL30sLyoqKi8iLi9zcmMvY29uZmlnLnRzIjovKiEqKioqKioqKioqKioqKioqKioqKioqKiEqXAogICEqKiogLi9zcmMvY29uZmlnLnRzICoqKiEKICBcKioqKioqKioqKioqKioqKioqKioqKiovIC8qKiovZnVuY3Rpb24gc3JjQ29uZmlnVHMoX191bnVzZWRfd2VicGFja19tb2R1bGUsX193ZWJwYWNrX2V4cG9ydHNfXyxfX3dlYnBhY2tfcmVxdWlyZV9fKXtldmFsKCJfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywge1xuLyogaGFybW9ueSBleHBvcnQgKi8gICBcInNka1N0YXR1c1wiOiAoKSA9PiAoLyogYmluZGluZyAqLyBzZGtTdGF0dXMpLFxuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImRlYnVnXCI6ICgpID0+ICgvKiBiaW5kaW5nICovIGRlYnVnKSxcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJSQ1NlYXRTdGF0dXNcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gUkNTZWF0U3RhdHVzKVxuLyogaGFybW9ueSBleHBvcnQgKi8gfSk7XG4vL3Nka+iHqui6q+eKtuaAgVxudmFyIHNka1N0YXR1cztcbihmdW5jdGlvbiAoc2RrU3RhdHVzKSB7XG4gICAgc2RrU3RhdHVzW3Nka1N0YXR1c1tcImluaXRpbmdcIl0gPSAwXSA9IFwiaW5pdGluZ1wiO1xuICAgIHNka1N0YXR1c1tzZGtTdGF0dXNbXCJyZWFkeVwiXSA9IDFdID0gXCJyZWFkeVwiOyAvL+WIneWni+WMluWujOaIkFxufSkoc2RrU3RhdHVzIHx8IChzZGtTdGF0dXMgPSB7fSkpO1xudmFyIGRlYnVnID0gdHJ1ZTtcbnZhciBSQ1NlYXRTdGF0dXMgPSB7XG4gICAgLy8g56m66bqm5L2NXG4gICAgUkNTZWF0U3RhdHVzRW1wdHk6IDAsXG4gICAgLy8g6bqm5L2N6KKr5L2/55So77yMdXNlcklk5LiN5Li6bnVsbFxuICAgIFJDU2VhdFN0YXR1c1VzaW5nOiAxLFxuICAgIC8vIOm6puS9jeiiq+mUgeWumlxuICAgIFJDU2VhdFN0YXR1c0xvY2tpbmc6IDJcbn07XG5cblxuXG4vLyMgc291cmNlVVJMPXdlYnBhY2s6Ly9Acm9uZ2Nsb3VkL3Jjdm9pY2Vyb29tbGliLXYxLy4vc3JjL2NvbmZpZy50cz8iKTsvKioqL30sLyoqKi8iLi9zcmMvaW5kZXgudHMiOi8qISoqKioqKioqKioqKioqKioqKioqKiohKlwKICAhKioqIC4vc3JjL2luZGV4LnRzICoqKiEKICBcKioqKioqKioqKioqKioqKioqKioqKi8gLyoqKi9mdW5jdGlvbiBzcmNJbmRleFRzKF9fdW51c2VkX3dlYnBhY2tfbW9kdWxlLF9fd2VicGFja19leHBvcnRzX18sX193ZWJwYWNrX3JlcXVpcmVfXyl7ZXZhbCgiX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIHtcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJkZWZhdWx0XCI6ICgpID0+IChfX1dFQlBBQ0tfREVGQVVMVF9FWFBPUlRfXylcbi8qIGhhcm1vbnkgZXhwb3J0ICovIH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIGV2ZW50c19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgZXZlbnRzICovIFwiLi9ub2RlX21vZHVsZXMvZXZlbnRzL2V2ZW50cy5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBldmVudHNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19fd2VicGFja19yZXF1aXJlX18ubihldmVudHNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX21vZHVsZXNfaW1faW5kZXhfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vbW9kdWxlcy9pbS9pbmRleCAqLyBcIi4vc3JjL21vZHVsZXMvaW0vaW5kZXgudHNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX21vZHVsZXNfcnRjX2luZGV4X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL21vZHVsZXMvcnRjL2luZGV4ICovIFwiLi9zcmMvbW9kdWxlcy9ydGMvaW5kZXgudHNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2NvbmZpZ19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9jb25maWcgKi8gXCIuL3NyYy9jb25maWcudHNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2xvZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2xvZ2VyICovIFwiLi9zcmMvbG9nZXIudHNcIik7XG52YXIgX19leHRlbmRzID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbnZhciBfX2Fzc2lnbiA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fYXNzaWduKSB8fCBmdW5jdGlvbiAoKSB7XG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKVxuICAgICAgICAgICAgICAgIHRbcF0gPSBzW3BdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0O1xuICAgIH07XG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59O1xudmFyIF9fYXdhaXRlciA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xudmFyIF9fZ2VuZXJhdG9yID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19nZW5lcmF0b3IpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBib2R5KSB7XG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcbiAgICB9XG59O1xuXG4vLyBpbXBvcnQgKiBhcyBSb25nSU1OZXh0IGZyb20gJ0Byb25nY2xvdWQvaW1saWItbmV4dCdcbi8vIGltcG9ydCB7IGluc3RhbGxlciwgUkNSVENDb2RlLCBSQ0xpdmluZ1R5cGUgfSBmcm9tICdAcm9uZ2Nsb3VkL3BsdWdpbi1ydGMnXG4vLyBpbXBvcnQgeyBSQ1JlbW90ZVRyYWNrIH0gZnJvbSAnLi4vbm9kZV9tb2R1bGVzL0Byb25nY2xvdWQvcGx1Z2luLXJ0Yy9kaXN0L2luZGV4JztcblxuXG5cblxuXG52YXIgUkNWb2ljZVJvb21MaWJDbGFzcyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUkNWb2ljZVJvb21MaWJDbGFzcywgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBSQ1ZvaWNlUm9vbUxpYkNsYXNzKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5fcm9vbWlkY2xpID0gXCJcIjtcbiAgICAgICAgX3RoaXMuaXNBbmNob3IgPSBmYWxzZTsgLy8g6buY6K6k6KeC5LyXXG4gICAgICAgIF90aGlzLnNlYXRJbmZvTGlzdCA9IFtdOyAvL+aIv+mXtOS/oeaBr1xuICAgICAgICBfdGhpcy5SQ1NlYXRJbmZvU2VhdFBhcnRQcmVmaXhLZXkgPSBcIlJDU2VhdEluZm9TZWF0UGFydFByZWZpeEtleV9cIjtcbiAgICAgICAgLy8gUkNTZWF0SW5mb1VzZXJQYXJ0UHJlZml4S2V5OiBzdHJpbmcgPSBcIlJDU2VhdEluZm9Vc2VyUGFydFByZWZpeEtleV9cIjtcbiAgICAgICAgX3RoaXMubGVhdmVSb29tQ29udHJvbCA9IHRydWU7XG4gICAgICAgIF90aGlzLnNlYXRJbmZvID0ge1xuICAgICAgICAgICAgc3RhdHVzOiAwLFxuICAgICAgICAgICAgbXV0ZTogZmFsc2UsXG4gICAgICAgICAgICBzcGVha2luZzogZmFsc2UsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgKiDliJ3lp4vljJZcbiAgICAqIEBwYXJhbSBpdGVtIOWMheWQqyBBcHBLZXkg5L+h5oGvXG4gICAgKiovXG4gICAgUkNWb2ljZVJvb21MaWJDbGFzcy5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBBcHBLZXkgPSBpdGVtLkFwcEtleSwgUm9uZ0lNTGliID0gaXRlbS5Sb25nSU1MaWIsIFJvbmdSVENMaWIgPSBpdGVtLlJvbmdSVENMaWI7XG4gICAgICAgIC8qKlxuICAgICAgICAqIOW8gOWni+WIneWni+WMliBpbWxpYiDlkowgcnRj5a6i5oi356uvXG4gICAgICAgICovXG4gICAgICAgIHZhciBpbSA9IG5ldyBfbW9kdWxlc19pbV9pbmRleF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fLmRlZmF1bHQoeyBhcHBrZXk6IEFwcEtleSwgaW1MaWI6IFJvbmdJTUxpYiB9KTtcbiAgICAgICAgdmFyIHJ0YyA9IG5ldyBfbW9kdWxlc19ydGNfaW5kZXhfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXy5kZWZhdWx0KCk7XG4gICAgICAgIHRoaXMuaW0gPSBpbTtcbiAgICAgICAgdGhpcy5ydGMgPSBydGM7XG4gICAgICAgIC8vaW3liJ3lp4vljJblrozmiJAg6L+b6KGMcnRj5Yid5aeL5YyWXG4gICAgICAgIGltLm9uKFwiaW1SZWFkeVwiLCBmdW5jdGlvbiAoUm9uZ0lNTGliKSB7XG4gICAgICAgICAgICBfbG9nZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzRfXy5kZWZhdWx0LmxvZygnaW3liJ3lp4vljJblrozmiJAnKTtcbiAgICAgICAgICAgIF90aGlzLnJ0Yy5pbml0KHsgaW06IFJvbmdJTUxpYiwgcnRjTGliOiBSb25nUlRDTGliIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgLy9pbSBjb25uZWN05a6M5oiQXG4gICAgICAgIGltLm9uKFwiY29ubmVjdFJlYWR5XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzLmltcmVhZHkgPSB0cnVlO1xuICAgICAgICAgICAgX3RoaXMucmVhZHlDaGVjaygpO1xuICAgICAgICB9KTtcbiAgICAgICAgLy9pbeWKoOWFpeaIv+mXtOWQjiDliqDlhaVydGPmiL/pl7RcbiAgICAgICAgaW0ub24oXCJqb2luUm9vbVwiLCBmdW5jdGlvbiAobykgeyByZXR1cm4gX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIEluc2VhdDtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmltLnNlYXRJbmZvTGlzdFswXSAmJiB0aGlzLmltLnNlYXRJbmZvTGlzdFswXS5zdGF0dXMgIT0gX2NvbmZpZ19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fLlJDU2VhdFN0YXR1cy5SQ1NlYXRTdGF0dXNFbXB0eSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIuiwg+eUqOWKoOWFpeW3sue7j+WtmOWcqOeahOaIv+mXtOS4jeiDveS9v+eUqCBjcmVhdGFuZEpvaW5yb29t5pa55rOVXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuaW0uZ2V0Um9vbUluZm8obyldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBJbnNlYXQgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJ0Yy5pc0FuY2hvciA9IEluc2VhdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLnJ0Yy5qb2luUm9vbShvLnJvb21JZCldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTsgfSk7XG4gICAgICAgIC8v5paw5oi/6Ze05Yid5aeL5YyWIOWmguaenOaYr+aIv+S4u+ebtOaOpeS4ijDlj7fpuqbkvY1cbiAgICAgICAgaW0ub24oXCJzZXROZXdSb29tXCIsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIF9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlYXRJbmZvTGlzdCA9IHRoaXMuaW0uc2VhdEluZm9MaXN0O1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd0aGlzLnNlYXRJbmZvTGlzdCcsIHRoaXMuc2VhdEluZm9MaXN0KTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoXCJzZWF0SW5mb0RpZFVwZGF0ZVwiLCB0aGlzLnNlYXRJbmZvTGlzdCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pOyB9KTtcbiAgICAgICAgLy9jaGFuZ2VSb29tSW5mbyDmm7TmlLnpuqbkvY3mlbDvvIzmm7TmlrDmiL/pl7TlhoXluqfkvY1cbiAgICAgICAgaW0ub24oXCJjaGFuZ2VSb29tSW5mb1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy5zZWF0SW5mb0xpc3QgPSBfdGhpcy5pbS5zZWF0SW5mb0xpc3Q7XG4gICAgICAgICAgICBfdGhpcy5lbWl0KFwic2VhdEluZm9EaWRVcGRhdGVcIiwgX3RoaXMuc2VhdEluZm9MaXN0KTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8v5oi/6Ze05L+h5oGv5Y+R5aOw5Y+Y5YyWXG4gICAgICAgIGltLm9uKFwicm9vbUluZm9EaWRVcGRhdGVcIiwgZnVuY3Rpb24gKHBhcm0pIHtcbiAgICAgICAgICAgIF90aGlzLnJvb21JbmZvID0gcGFybS5yb29tSW5mbztcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdwYXJtLnJvb21JbmZvJywgcGFybS5yb29tSW5mbyk7XG4gICAgICAgICAgICBfdGhpcy5lbWl0KFwicm9vbUluZm9EaWRVcGRhdGVcIiwgX3RoaXMucm9vbUluZm8pO1xuICAgICAgICB9KTtcbiAgICAgICAgLy/luqfkvY3lj5HnlJ/lj5jljJZcbiAgICAgICAgaW0ub24oXCJzZWF0SW5mb0RpZFVwZGF0ZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy5zZWF0SW5mb0xpc3QgPSBpbS5zZWF0SW5mb0xpc3Q7XG4gICAgICAgICAgICBfdGhpcy5lbWl0KFwic2VhdEluZm9EaWRVcGRhdGVcIiwgX3RoaXMuc2VhdEluZm9MaXN0KTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8v5bqn5L2N5Y+R55Sf5Y+Y5YyWKOacieS6uui/m+adpSlcbiAgICAgICAgaW0ub24oXCJvbkF1ZGllbmNlRW50ZXJcIiwgZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgX3RoaXMuZW1pdChcIkF1ZGllbmNlRW50ZXJcIiwgcmVzKTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8v5bqn5L2N5Y+R55Sf5Y+Y5YyWKOacieS6uuemu+W8gClcbiAgICAgICAgaW0ub24oXCJvbkF1ZGllbmNlRXhpdFwiLCBmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICBfdGhpcy5lbWl0KFwiQXVkaWVuY2VFeGl0XCIsIHJlcyk7XG4gICAgICAgIH0pO1xuICAgICAgICAvL+WQhOenjeWFrOWxj+a2iOaBr1xuICAgICAgICBpbS5vbihcIm9uTWVzc2FnZVJlY2VpdmVkXCIsIGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgICAgICAvL+m7mOiupOa2iOaBr1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ29uTWVzc2FnZVJlY2VpdmVkJywgbWVzc2FnZSk7XG4gICAgICAgICAgICBfdGhpcy5lbWl0KFwiTWVzc2FnZVJlY2VpdmVkXCIsIG1lc3NhZ2UpO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gLy/pn7Pph4/nirbmgIHlj5jmm7RcbiAgICAgICAgLy8gaW0ub24oXCJzcGVha2luZ1N0YXR1c0NoYW5nZVwiLCAocGFybSkgPT4geyAgICAgXG4gICAgICAgIC8vICAgICB0aGlzLmVtaXQoXCJzcGVha2luZ1N0YXR1c0NoYW5nZVwiLCBwYXJtKVxuICAgICAgICAvLyAgICAgaWYgKHRoaXMuc2VhdEluZm9MaXN0W051bWJlcihwYXJtLmluZGV4KV0pIHtcbiAgICAgICAgLy8gICAgICAgICB0aGlzLnNlYXRJbmZvTGlzdFtOdW1iZXIocGFybS5pbmRleCldWydzcGVha2luZyddID0gcGFybS5zcGVha2luZztcbiAgICAgICAgLy8gICAgIH1cbiAgICAgICAgLy8gfSlcbiAgICAgICAgLy/mmK/lkKbpnZnpn7Pmk43kvZxcbiAgICAgICAgaW0ub24oXCJtdXRlXCIsIGZ1bmN0aW9uIChpc211dGUpIHtcbiAgICAgICAgICAgIGlmIChpc211dGUpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5ydGMubXV0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgX3RoaXMucnRjLnVubXV0ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX3RoaXMuZW1pdChcIlNlYXRNdXRlXCIsIGlzbXV0ZSk7XG4gICAgICAgIH0pO1xuICAgICAgICAvL+iiq+aKseS4i+m6plxuICAgICAgICBpbS5vbihcImxlYXZlU2VhdFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygn6KKr5oqx5LiL6bqmbGVhdmVTZWF0Jyk7XG4gICAgICAgICAgICBfdGhpcy5sZWF2ZVNlYXQodHJ1ZSk7XG4gICAgICAgICAgICBfdGhpcy5lbWl0KFwiS2lja1NlYXRSZWNlaXZlZFwiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8v5pS25Yiw6KKr6YKA6K+35LiK6bqmXG4gICAgICAgIGltLm9uKFwiUkNQaWNrZXJVc2VyU2VhdENvbnRlbnRcIiwgZnVuY3Rpb24gKHBhcm0pIHtcbiAgICAgICAgICAgIF90aGlzLmVtaXQoXCJSQ1BpY2tlclVzZXJTZWF0Q29udGVudFwiLCBwYXJtKTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIC8v5pS25Yiw5ZCM5oSP6YKA6K+35LiK6bqm5raI5oGvXG4gICAgICAgIC8vIGltLm9uKFwiVm9pY2VSb29tQWdyZWVNYW5hZ2VQaWNrXCIsIChwYXJtKSA9PiB7XG4gICAgICAgIC8vICAgICB0aGlzLmVtaXQoXCJWb2ljZVJvb21BZ3JlZU1hbmFnZVBpY2tcIiwgcGFybSk7XG4gICAgICAgIC8vIH0pXG4gICAgICAgIC8vIC8v5pS25Yiw5ouS57ud6YKA6K+35LiK6bqm5raI5oGvXG4gICAgICAgIC8vIGltLm9uKFwiVm9pY2VSb29tUmVqZWN0TWFuYWdlUGlja1wiLCAocGFybSkgPT4ge1xuICAgICAgICAvLyAgICAgdGhpcy5lbWl0KFwiVm9pY2VSb29tUmVqZWN0TWFuYWdlUGlja1wiLCBwYXJtKTtcbiAgICAgICAgLy8gfSlcbiAgICAgICAgLy/ooqvouKLlh7rmiL/pl7RcbiAgICAgICAgaW0ub24oXCJSQ0tpY2tVc2VyT3V0Um9vbUNvbnRlbnRcIiwgZnVuY3Rpb24gKHBhcm0pIHtcbiAgICAgICAgICAgIF90aGlzLmVtaXQoXCJSQ0tpY2tVc2VyT3V0Um9vbUNvbnRlbnRcIiwgcGFybSk7XG4gICAgICAgICAgICBpZiAocGFybS50YXJnZXRJZCA9PSBfdGhpcy5pbS51c2VySWQpIHtcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygndGhpcy5fcm9vbWlkY2xpJywgdGhpcy5fcm9vbWlkY2xpKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5sZWF2ZVJvb20oX3RoaXMuX3Jvb21pZGNsaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAvL+eUs+ivt+S4ium6puiiq+WQjOaEj+S4iuaKpVxuICAgICAgICBpbS5vbihcIlJlcXVlc3RTZWF0QWNjZXB0ZWRcIiwgZnVuY3Rpb24gKCkgeyByZXR1cm4gX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5pbS5zZWF0SW5mb1JlbW92ZSgnUkNSZXF1ZXN0U2VhdFByZWZpeEtleV8nICsgdGhpcy5pbS51c2VySWQpLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5by65Yi25Yig6Zmk6IGK5aSp5a6k5bGe5oCn5oiQ5YqfXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmNvZGUgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5lbWl0KFwiUmVxdWVzdFNlYXRBY2NlcHRlZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ+aTjeS9nOaIkOWKnzo3MDAwMCc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCflkIzmhI/mjpLpuqbor7fmsYLlj5HpgIHlpLHotKU6NzAwMTcnKTtcbiAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pOyB9KTtcbiAgICAgICAgLy/nlLPor7fkuIrpuqbooqvmi5Lnu53kuIrmiqVcbiAgICAgICAgaW0ub24oXCJSZXF1ZXN0U2VhdFJlamVjdGVkXCIsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIF9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuaW0uc2VhdEluZm9SZW1vdmUoJ1JDUmVxdWVzdFNlYXRQcmVmaXhLZXlfJyArIHRoaXMuaW0udXNlcklkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOW8uuWItuWIoOmZpOiBiuWkqeWupOWxnuaAp+aIkOWKn1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5jb2RlID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZW1pdChcIlJlcXVlc3RTZWF0UmVqZWN0ZWRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICfmk43kvZzmiJDlip86NzAwMDAnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcign5ouS57ud5o6S6bqm6K+35rGC5Y+R6YCB5aSx6LSlOjcwMDE4Jyk7XG4gICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTsgfSk7XG4gICAgICAgIC8v55Sz6K+35LiK6bqm5Lq65ZGY5Y+R55Sf5Y+Y5YyW5LiK5oqlXG4gICAgICAgIGltLm9uKFwiUmVxdWVzdFNlYXRMaXN0Q2hhbmdlZFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy5lbWl0KFwiUmVxdWVzdFNlYXRMaXN0Q2hhbmdlZFwiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8v5omA5pyJ5Yi35paw5raI5oGv55qE6YCa55+l5LiK5oqlXG4gICAgICAgIGltLm9uKFwib25Sb29tTm90aWZpY2F0aW9uUmVjZWl2ZWRcIiwgZnVuY3Rpb24gKGluZm8pIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGluZm8pO1xuICAgICAgICAgICAgX3RoaXMuZW1pdChcIlJvb21Ob3RpZmljYXRpb25SZWNlaXZlZFwiLCBpbmZvKTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIC8v5oi/6Ze05YWz6Zet5LiK5oqlXG4gICAgICAgIC8vIGltLm9uKFwiVm9pY2VSb29tQ2xvc2VkXCIsICgpID0+IHtcbiAgICAgICAgLy8gICAgIHRoaXMuZW1pdChcIlZvaWNlUm9vbUNsb3NlZFwiLCk7XG4gICAgICAgIC8vIH0pXG4gICAgICAgIC8vIC8v5pu05o2i6IOM5pmv5LiK5oqlXG4gICAgICAgIC8vIGltLm9uKFwiVm9pY2VSb29tQmFja2dyb3VuZENoYW5nZWRcIiwgKGltZykgPT4ge1xuICAgICAgICAvLyAgICAgdGhpcy5lbWl0KFwiVm9pY2VSb29tQmFja2dyb3VuZENoYW5nZWRcIiwgaW1nKTtcbiAgICAgICAgLy8gfSlcbiAgICAgICAgLy/otKblj7fooqvpobbmjonkuIrmiqVcbiAgICAgICAgaW0ub24oXCJjb25uZWN0aW9CcmVha09mZlwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy5lbWl0KFwiQ29ubmVjdGlvQnJlYWtPZmZcIik7XG4gICAgICAgIH0pO1xuICAgICAgICAvL+aIv+mXtOiiq+mUgOavgeS4iuaKpVxuICAgICAgICBpbS5vbihcImNoYXRyb29tRGVzdHJveWVkXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzLmVtaXQoXCJDaGF0cm9vbURlc3Ryb3llZFwiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vcnRjIOaWreW8gOi/nuaOpSDkuLvmkq3nq69cbiAgICAgICAgdGhpcy5ydGMub24oXCJvblJUQ1BlZXJDb25uZWN0aW9uQ2xvc2VCeUV4Y2VwdGlvblwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy5lbWl0KFwiUlRDUGVlckNvbm5lY3Rpb25DbG9zZUJ5RXhjZXB0aW9uXCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgLy9ydGPliJ3lp4vljJblrozmiJBcbiAgICAgICAgcnRjLm9uKFwicmVhZHlcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX2xvZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18uZGVmYXVsdC5sb2coJ3J0Y+WIneWni+WMluWujOaIkCcpO1xuICAgICAgICAgICAgX3RoaXMucnRjcmVhZHkgPSB0cnVlO1xuICAgICAgICAgICAgX3RoaXMucmVhZHlDaGVjaygpO1xuICAgICAgICB9KTtcbiAgICAgICAgLy9ydGPliqDlhaXmiL/pl7RcbiAgICAgICAgcnRjLm9uKFwiam9pblJvb21cIiwgZnVuY3Rpb24gKCkgeyByZXR1cm4gX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIC8vIGlmICh0aGlzLnJ0Yy5pc0Rpc2FibGUpIHtcbiAgICAgICAgICAgICAgICAvLyAgICAgdGhpcy5ydGMubXV0ZSgpO1xuICAgICAgICAgICAgICAgIC8vICAgICByZXR1cm5cbiAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VhdEluZm9MaXN0Lmxlbmd0aCAmJiB0aGlzLnNlYXRJbmZvTGlzdFt0aGlzLmltLnNlYXRJbmRleF0gJiYgdGhpcy5zZWF0SW5mb0xpc3RbdGhpcy5pbS5zZWF0SW5kZXhdLm11dGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCLkuIrkuobpnZnpn7PkubDkvY1cIik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucnRjLm11dGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pOyB9KTtcbiAgICAgICAgLy8gcnRjLm9uKCdhdWRpb0NoZW5nZScsIChsZXZlbDogeyB0cmFjazogeyBfdXNlcklkOiBhbnk7IH07IF91c2VySWQ6IGFueTsgYXVkaW9MZXZlbDogYW55OyB9KSA9PiB7XG4gICAgICAgIC8vICAgICBpZiAobGV2ZWwudHJhY2suX3VzZXJJZCAmJiBsZXZlbC50cmFjay5fdXNlcklkID09IHRoaXMuaW0udXNlcklkKSB7XG4gICAgICAgIC8vICAgICAgICAgbGV0IGNvbnRlbnQ6IHsgbmFtZTogc3RyaW5nOyBjb250ZW50OiBzdHJpbmc7IH1cbiAgICAgICAgLy8gICAgICAgICBsZXQgc3BlYWs6IHsgaW5kZXg6IHN0cmluZzsgc3BlYWtpbmc6IHN0cmluZzsgfVxuICAgICAgICAvLyAgICAgICAgIGlmIChsZXZlbC5hdWRpb0xldmVsKSB7XG4gICAgICAgIC8vICAgICAgICAgICAgIGNvbnRlbnQgPSB7XG4gICAgICAgIC8vICAgICAgICAgICAgICAgICBuYW1lOiBcIlJDVXNlck9uU2VhdFNwZWFraW5nS2V5X1wiICsgdGhpcy5ydGMuY3VycmVudFNlYXQsLy8g5paH5pys5YaF5a65XG4gICAgICAgIC8vICAgICAgICAgICAgICAgICBjb250ZW50OiAnMSdcbiAgICAgICAgLy8gICAgICAgICAgICAgfVxuICAgICAgICAvLyAgICAgICAgICAgICBzcGVhayA9IHtcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGluZGV4OiB0aGlzLnJ0Yy5jdXJyZW50U2VhdCArICcnLFxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgc3BlYWtpbmc6ICcxJ1xuICAgICAgICAvLyAgICAgICAgICAgICB9XG4gICAgICAgIC8vICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gICAgICAgICAgICAgY29udGVudCA9IHtcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIG5hbWU6IFwiUkNVc2VyT25TZWF0U3BlYWtpbmdLZXlfXCIgKyB0aGlzLnJ0Yy5jdXJyZW50U2VhdCwvLyDmlofmnKzlhoXlrrlcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcwJ1xuICAgICAgICAvLyAgICAgICAgICAgICB9XG4gICAgICAgIC8vICAgICAgICAgICAgIHNwZWFrID0ge1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgaW5kZXg6IHRoaXMucnRjLmN1cnJlbnRTZWF0ICsgJycsXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICBzcGVha2luZzogJzAnXG4gICAgICAgIC8vICAgICAgICAgICAgIH1cbiAgICAgICAgLy8gICAgICAgICB9XG4gICAgICAgIC8vICAgICAgICAgLy8gY29uc29sZS5sb2coJ1JDVXNlck9uU2VhdFNwZWFraW5nS2V5XycsIHRoaXMucnRjLmN1cnJlbnRTZWF0KTtcbiAgICAgICAgLy8gICAgICAgICB0aGlzLmltLm1lc3NhZ2VVcGRhdGUoXCJSQzpWUkxSZWZyZXNoTXNnXCIsIGNvbnRlbnQpXG4gICAgICAgIC8vICAgICAgICAgdGhpcy5lbWl0KFwic3BlYWtpbmdTdGF0dXNDaGFuZ2VcIiwgc3BlYWspXG4gICAgICAgIC8vICAgICAgICAgaWYgKHRoaXMuc2VhdEluZm9MaXN0W051bWJlcihzcGVhay5pbmRleCldKSB7XG4gICAgICAgIC8vICAgICAgICAgICAgIC8vIHRoaXMuc2VhdEluZm9MaXN0W051bWJlcihwYXJtLmluZGV4KV0uc3BlYWtpbmcgPSBwYXJtLnNwZWFraW5nO1xuICAgICAgICAvLyAgICAgICAgICAgICBpZiAoTnVtYmVyKHNwZWFrLnNwZWFraW5nKSkge1xuICAgICAgICAvLyAgICAgICAgICAgICAgICAgdGhpcy5zZWF0SW5mb0xpc3RbTnVtYmVyKHNwZWFrLmluZGV4KV1bJ3NwZWFraW5nJ10gPSB0cnVlXG4gICAgICAgIC8vICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vICAgICAgICAgICAgICAgICB0aGlzLnNlYXRJbmZvTGlzdFtOdW1iZXIoc3BlYWsuaW5kZXgpXVsnc3BlYWtpbmcnXSA9IGZhbHNlXG4gICAgICAgIC8vICAgICAgICAgICAgIH1cbiAgICAgICAgLy8gICAgICAgICB9XG4gICAgICAgIC8vICAgICB9XG4gICAgICAgIC8vIH0pXG4gICAgfTtcbiAgICAvKipcbiAgICAqXG4gICAgKiBpbemTvuaOpWNvbm5lY3RcbiAgICAqXG4gICAgKi9cbiAgICBSQ1ZvaWNlUm9vbUxpYkNsYXNzLnByb3RvdHlwZS5jb25uZWN0ID0gZnVuY3Rpb24gKHRva2VuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmltLmNvbm5lY3QodG9rZW4pO1xuICAgIH07XG4gICAgLyoqXG4gICAgKlxuICAgICog5Lik5qih5Z2X5bCx57uq5oql5LiK5bGCcmVhZHlcbiAgICAqXG4gICAgKi9cbiAgICBSQ1ZvaWNlUm9vbUxpYkNsYXNzLnByb3RvdHlwZS5yZWFkeUNoZWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT0gX2NvbmZpZ19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fLnNka1N0YXR1cy5yZWFkeSkge1xuICAgICAgICAgICAgX2xvZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18uZGVmYXVsdC5sb2coXCLlt7Lnu4/lsLHnu6pcIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pbXJlYWR5ICYmIHRoaXMucnRjcmVhZHkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoXCJyZWFkeVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgKlxuICAgICog5Yib5bu65bm25Yqg5YWl5oi/6Ze0KOaIv+mXtOacquWIm+W7uilcbiAgICAqXG4gICAgKi9cbiAgICBSQ1ZvaWNlUm9vbUxpYkNsYXNzLnByb3RvdHlwZS5jcmVhdGVBbmRKb2luUm9vbSA9IGZ1bmN0aW9uIChvcCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCLkuLvmkq3liJvlu7rlubbliqDlhaXmiL/pl7RcIiwgb3Aucm9vbUlkKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJ0Yy5pc0FuY2hvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5ydGMuY3VycmVudFNlYXQgPSAwO1xuICAgICAgICAgICAgICAgIGlmICghKCdyb29tTmFtZScgaW4gb3ApIHx8ICEoJ3NlYXRDb3VudCcgaW4gb3ApIHx8ICEoJ3Jvb21JZCcgaW4gb3ApIHx8IG9wLnNlYXRDb3VudCA8IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfliJvlu7rmiL/pl7Tkv6Hmga/plJnor686NzAwMzYnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5fcm9vbWlkY2xpID0gb3Aucm9vbUlkO1xuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLmltLmpvaW5Sb29tKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvb21JZDogb3Aucm9vbUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgcm9vbU5hbWU6IG9wLnJvb21OYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2VhdENvdW50OiBvcC5zZWF0Q291bnRcbiAgICAgICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ+WIm+W7uuivreiBiuaIv+Wksei0pTo3MDAxMCcgKyBlcnI7XG4gICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICpcbiAgICAqIOWKoOWFpeW3suWIm+W7uuaIv+mXtCjmiL/pl7Tlt7LliJvlu7opXG4gICAgKlxuICAgICovXG4gICAgUkNWb2ljZVJvb21MaWJDbGFzcy5wcm90b3R5cGUuam9pblJvb20gPSBmdW5jdGlvbiAocm9vbWlkKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIuWKoOWFpeW3suWtmOWcqOaIv+mXtDpcIiwgcm9vbWlkKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9yb29taWRjbGkgPSByb29taWQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuaW0uam9pblJvb20oe1xuICAgICAgICAgICAgICAgICAgICAgICAgcm9vbUlkOiByb29taWRcbiAgICAgICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ+WKoOWFpeivreiBiuaIv+Wksei0pTo3MDAxMCcgKyBlcnI7XG4gICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICpcbiAgICAqIOemu+W8gOaIv+mXtFxuICAgICpcbiAgICAqL1xuICAgIFJDVm9pY2VSb29tTGliQ2xhc3MucHJvdG90eXBlLmxlYXZlUm9vbSA9IGZ1bmN0aW9uIChyb29taWQpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGluZGV4O1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5sZWF2ZVJvb21Db250cm9sKSByZXR1cm4gWzMgLypicmVhayovLCA1XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGVhdmVSb29tQ29udHJvbCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXggPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAxO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShpbmRleCA8IHRoaXMuc2VhdEluZm9MaXN0Lmxlbmd0aCkpIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEodGhpcy5zZWF0SW5mb0xpc3RbaW5kZXhdWyd1c2VySWQnXSAmJiB0aGlzLnNlYXRJbmZvTGlzdFtpbmRleF1bJ3VzZXJJZCddID09IHRoaXMuaW0udXNlcklkKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgM107XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmxlYXZlU2VhdChmYWxzZSwgdHJ1ZSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA0XTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXggKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDFdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6IHJldHVybiBbMiAvKnJldHVybiovLCBQcm9taXNlLmFsbChbdGhpcy5ydGMubGVhdmVSb29tKHJvb21pZCksIHRoaXMuaW0ubGVhdmVSb29tKHJvb21pZCldKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5ydGMuaXNEaXNhYmxlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2VhdEluZm9MaXN0ID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucm9vbUluZm8gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5sZWF2ZVJvb21Db250cm9sID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAxMDAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ+aTjeS9nOaIkOWKnzo3MDAwMCc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfnprvlvIDor63ogYrmiL/lpLHotKU6NzAwMTEnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgKlxuICAgICog5a+75om+56m66bqm5L2NKOmZpCAwIOWPt+m6puS9jeWklilcbiAgICAqIOaXoOepuum6puS9jSDov5Tlm54gbnVsbFxuICAgICovXG4gICAgUkNWb2ljZVJvb21MaWJDbGFzcy5wcm90b3R5cGUuZmluZFNlYXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIGZvciAoaSA9IDE7IGkgPCB0aGlzLnNlYXRJbmZvTGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoTnVtYmVyKHRoaXMuc2VhdEluZm9MaXN0W2ldLnN0YXR1cykgPT0gX2NvbmZpZ19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fLlJDU2VhdFN0YXR1cy5SQ1NlYXRTdGF0dXNFbXB0eSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIGldO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChpID0gdGhpcy5zZWF0SW5mb0xpc3QubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIG51bGxdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICpcbiAgICAqIOeUqOaIt+S4ium6plxuICAgICpcbiAgICAqIEBwYXJhbSBzZWF0SW5kZXgg6bqm5L2N5bqP5Y+3XG4gICAgKi9cbiAgICBSQ1ZvaWNlUm9vbUxpYkNsYXNzLnByb3RvdHlwZS5lbnRlclNlYXQgPSBmdW5jdGlvbiAoc2VhdEluZGV4KSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpLCB0YXJnZXRTZWF0SW5mbztcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCLkuIrpuqbmk43kvZxcIiwgc2VhdEluZGV4KTtcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIuW9k+WJjem6puS9jeS/oeaBr1wiLCB0aGlzLnNlYXRJbmZvTGlzdCk7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJ0aGlzLnJvb21JbmZvLnNlYXRDb3VudFwiLCB0aGlzLnJvb21JbmZvLnNlYXRDb3VudCk7XG4gICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMuc2VhdEluZm9MaXN0Lmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlYXRJbmZvTGlzdFtpXVsndXNlcklkJ10gJiYgdGhpcy5zZWF0SW5mb0xpc3RbaV1bJ3VzZXJJZCddID09IHRoaXMuaW0udXNlcklkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+ivpeS4ium6pueUqOaIt+atpOaXtuW3sue7j+WcqOm6puS9jeS4ijo3MDAwMycpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGlmICh0aGlzLnNlYXRJbmZvTGlzdC5sZW5ndGggPT0gc2VhdEluZGV4KSB7IC8v5pys5Zyw6bqm5L2N5pyq5pu05paw5pe255Sf5oiQ5LiA5Liq6buY6K6k6bqm5L2NXG4gICAgICAgICAgICAgICAgLy8gICAgIHRhcmdldFNlYXRJbmZvID0gdGhpcy5zZWF0SW5mb1xuICAgICAgICAgICAgICAgIC8vIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucm9vbUluZm8gJiYgdGhpcy5yb29tSW5mby5zZWF0Q291bnQgJiYgKHNlYXRJbmRleCA+PSB0aGlzLnJvb21JbmZvLnNlYXRDb3VudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfpuqbkvY3luo/lj7fkuI3mraPnoa46NzAwMDInKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGFyZ2V0U2VhdEluZm8gPSB0aGlzLnNlYXRJbmZvTGlzdFtzZWF0SW5kZXhdO1xuICAgICAgICAgICAgICAgIGlmICh0YXJnZXRTZWF0SW5mby5zdGF0dXMgIT0gX2NvbmZpZ19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fLlJDU2VhdFN0YXR1cy5SQ1NlYXRTdGF0dXNFbXB0eSkgeyAvL+W9k+WJjem6puS9jemdnuepuumXslxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCLpuqbkvY3kuI3mmK/nqbrnva7nirbmgIEs5peg5rOV5LiK6bqmOjcwMDA2XCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAgICAgdGFyZ2V0U2VhdEluZm8udXNlcklkID0gdGhpcy5pbS51c2VySWQ7XG4gICAgICAgICAgICAgICAgdGFyZ2V0U2VhdEluZm8uc3RhdHVzID0gX2NvbmZpZ19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fLlJDU2VhdFN0YXR1cy5SQ1NlYXRTdGF0dXNVc2luZztcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIuW9k+WJjeabtOaWsFwiLCB0aGlzLlJDU2VhdEluZm9TZWF0UGFydFByZWZpeEtleSArIHNlYXRJbmRleCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuaW0uc2VhdEluZm9VcGRhdGUodGhpcy5SQ1NlYXRJbmZvU2VhdFBhcnRQcmVmaXhLZXkgKyBzZWF0SW5kZXgsIHRhcmdldFNlYXRJbmZvKS50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIF9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWF0SW5mb0xpc3Rbc2VhdEluZGV4XVsndXNlcklkJ10gPSB0aGlzLmltLnVzZXJJZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlYXRJbmZvTGlzdFtzZWF0SW5kZXhdWydzdGF0dXMnXSA9IE51bWJlcihfY29uZmlnX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18uUkNTZWF0U3RhdHVzLlJDU2VhdFN0YXR1c1VzaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlYXRJbmZvTGlzdFtzZWF0SW5kZXhdWydzcGVha2luZyddID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbS5zZWF0SW5kZXggPSBzZWF0SW5kZXg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ydGMuY3VycmVudFNlYXQgPSBzZWF0SW5kZXg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMucnRjLmVudGVyU2VhdChzZWF0SW5kZXgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldFNlYXRJbmZvLm11dGUgfHwgX3RoaXMucnRjLmlzRGlzYWJsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnJ0Yy5pc011dGVPd25lciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnJ0Yy5tdXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMucnRjLnVubXV0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7IH0pLmNhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcign5LiK6bqm5aSx6LSlJyk7XG4gICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICpcbiAgICAqIOeUqOaIt+S4i+m6plxuICAgICog5rOo5oSP77ya5ZKMIGVudGVyU2VhdCgp5oiQ5a+56LCD55SoXG4gICAgKlxuICAgICovXG4gICAgUkNWb2ljZVJvb21MaWJDbGFzcy5wcm90b3R5cGUubGVhdmVTZWF0ID0gZnVuY3Rpb24gKGlzcGFzc2l2ZSwgaXNMZWF2ZVJvb20pIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGluZGV4LCBoYXZlLCBzdGF0dXMsIGksIHZhbHVlO1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNMZWF2ZVJvb20pIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5ydGMubGVhdmVTZWF0KHRydWUpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjogcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5ydGMubGVhdmVTZWF0KGZhbHNlKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gNDtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzcGFzc2l2ZSkgeyAvL+iiq+WKqOS4i+m6puS4jeaTjeS9nOi/nOeoi+aVsOaNrlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9sb2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfNF9fLmRlZmF1bHQubG9nKFwi6KKr5Yqo5LiL6bqmXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhdmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1cyA9IE51bWJlcihfY29uZmlnX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18uUkNTZWF0U3RhdHVzLlJDU2VhdFN0YXR1c0VtcHR5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLnNlYXRJbmZvTGlzdC5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlYXRJbmZvTGlzdFtpXS51c2VySWQgPT0gdGhpcy5pbS51c2VySWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXggPSBpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXZlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWhhdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+eUqOaIt+S4jeWcqOm6puS9jeS4ijo3MDAwNCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgdGhpcy5zZWF0SW5mb0xpc3RbaW5kZXhdKSwgeyBzdGF0dXM6IHN0YXR1cyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdmFsdWVbJ3VzZXJJZCddO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2codGhpcy5SQ1NlYXRJbmZvU2VhdFBhcnRQcmVmaXhLZXkgKyBpbmRleCwgJ+S4i+m6puaTjeS9nO+8micsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5pbS5zZWF0SW5mb1VwZGF0ZSh0aGlzLlJDU2VhdEluZm9TZWF0UGFydFByZWZpeEtleSArIGluZGV4LCB2YWx1ZSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zZWF0SW5mb0xpc3RbaW5kZXhdWydzdGF0dXMnXSA9IHN0YXR1cztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNlYXRJbmZvTGlzdFtpbmRleF1bJ211dGUnXSA9IF90aGlzLnNlYXRJbmZvTGlzdFtpbmRleF0ubXV0ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNlYXRJbmZvTGlzdFtpbmRleF1bJ3NwZWFraW5nJ10gPSBfdGhpcy5zZWF0SW5mb0xpc3RbaW5kZXhdLnNwZWFraW5nO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIF90aGlzLnNlYXRJbmZvTGlzdFtpbmRleF1bJ3VzZXJJZCddO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5zZWF0SW5mb0xpc3RbaW5kZXhdWyd1c2VySWQnXSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3RoaXMuc2VhdEluZm9MaXN0JywgdGhpcy5zZWF0SW5mb0xpc3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICfmk43kvZzmiJDlip86NzAwMDAnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgdGhyb3cgbmV3IEVycm9yKCfmnKrnn6XplJnor686LTEnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgKlxuICAgICog5bCG5oyH5a6a6bqm5L2N5LiL6bqmXG4gICAgKlxuICAgICogQHBhcmFtIHVzZXJJZCAgIOeUqOaItyBJZFxuICAgICovXG4gICAgUkNWb2ljZVJvb21MaWJDbGFzcy5wcm90b3R5cGUua2lja1VzZXJGcm9tU2VhdCA9IGZ1bmN0aW9uICh1c2VySWQpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGluZGV4LCBoYXZlLCBhcnIsIGksIHZhbHVlO1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBpbmRleCA9IG51bGw7XG4gICAgICAgICAgICAgICAgaGF2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGFyciA9IFtdO1xuICAgICAgICAgICAgICAgIGlmICh1c2VySWQgPT0gdGhpcy5pbS51c2VySWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfkuI3og73ouKLoh6rlt7HkuIvpuqY6NzAwMDknKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMuc2VhdEluZm9MaXN0Lmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJpZDpcIix0aGlzLnNlYXRJbmZvTGlzdFtpXS51c2VySWQpO1xuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiaWRjaGVja2Q6XCIsdXNlcklkKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VhdEluZm9MaXN0W2ldLnVzZXJJZCA9PSB1c2VySWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gaTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhdmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghaGF2ZSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+eUqOaIt+S4jeWcqOm6puS4ijotMScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAwLFxuICAgICAgICAgICAgICAgICAgICBtdXRlOiB0aGlzLnNlYXRJbmZvTGlzdFtpbmRleF0ubXV0ZSxcbiAgICAgICAgICAgICAgICAgICAgc3BlYWtpbmc6IHRoaXMuc2VhdEluZm9MaXN0W2luZGV4XS5zcGVha2luZyxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGFyci5wdXNoKHRoaXMuaW0uc2VhdEluZm9VcGRhdGUodGhpcy5SQ1NlYXRJbmZvU2VhdFBhcnRQcmVmaXhLZXkgKyBpbmRleCwgdmFsdWUpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgUHJvbWlzZS5hbGwoYXJyKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuc2VhdEluZm9MaXN0W2luZGV4XSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICBzdGF0dXM6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgbXV0ZTogdGhpcy5zZWF0SW5mb0xpc3RbaW5kZXhdLm11dGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgc3BlYWtpbmc6IHRoaXMuc2VhdEluZm9MaXN0W2luZGV4XS5zcGVha2luZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zZWF0SW5mb0xpc3RbaW5kZXhdWydzdGF0dXMnXSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zZWF0SW5mb0xpc3RbaW5kZXhdWydtdXRlJ10gPSBfdGhpcy5zZWF0SW5mb0xpc3RbaW5kZXhdLm11dGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zZWF0SW5mb0xpc3RbaW5kZXhdWydzcGVha2luZyddID0gX3RoaXMuc2VhdEluZm9MaXN0W2luZGV4XS5zcGVha2luZztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBfdGhpcy5zZWF0SW5mb0xpc3RbaW5kZXhdWyd1c2VySWQnXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuc2VhdEluZm9MaXN0W2luZGV4XVsndXNlcklkJ10gPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCd0aGlzLnNlYXRJbmZvTGlzdCcsIHRoaXMuc2VhdEluZm9MaXN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAn5pON5L2c5oiQ5YqfOjcwMDAwJztcbiAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfmnKrnn6XplJnor686LTEnKTtcbiAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgKlxuICAgICog55So5oi36Lez6bqmXG4gICAgKiDms6jmhI/vvJrlnKjnlKjmiLflt7Lnu4/lnKjpuqbkvY3mg7PliIfmjaLpuqbkvY3ml7bosIPnlKhcbiAgICAqXG4gICAgKiBAcGFyYW0gc2VhdEluZGV4IOmcgOimgei3s+i9rOeahOm6puS9jeW6j+WPt1xuICAgICovXG4gICAgUkNWb2ljZVJvb21MaWJDbGFzcy5wcm90b3R5cGUuc3dpdGNoU2VhdFRvID0gZnVuY3Rpb24gKHNlYXRJbmRleCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaW5kZXgsIGksIHZhbHVlT2xkO1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc2VhdEluZm9MaXN0W3NlYXRJbmRleF0pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfpuqbkvY3kuI3lrZjlnKgnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKE51bWJlcih0aGlzLnNlYXRJbmZvTGlzdFtzZWF0SW5kZXhdLnN0YXR1cykgPT0gX2NvbmZpZ19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fLlJDU2VhdFN0YXR1cy5SQ1NlYXRTdGF0dXNMb2NraW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIum6puS9jeiiq+mUgeWumuS4jeiDvei3s+m6plwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaW5kZXggPSBudWxsO1xuICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLnNlYXRJbmZvTGlzdC5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWF0SW5mb0xpc3RbaV0udXNlcklkID09PSB0aGlzLmltLnVzZXJJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXggPSBpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcign55So5oi35LiN5Zyo6bqm5L2N5LiKOjcwMDA0Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc2VhdEluZm9MaXN0W3NlYXRJbmRleF1bJ3VzZXJJZCddKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZU9sZCA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbXV0ZTogdGhpcy5zZWF0SW5mb0xpc3RbaW5kZXhdLm11dGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BlYWtpbmc6IHRoaXMuc2VhdEluZm9MaXN0W2luZGV4XS5zcGVha2luZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5pbS5zZWF0SW5mb1VwZGF0ZSh0aGlzLlJDU2VhdEluZm9TZWF0UGFydFByZWZpeEtleSArIGluZGV4LCB2YWx1ZU9sZCkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuc2VhdEluZm9MaXN0W2luZGV4XSA9IHZhbHVlT2xkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNlYXRJbmZvTGlzdFtpbmRleF1bJ3N0YXR1cyddID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2VhdEluZm9MaXN0W2luZGV4XVsnbXV0ZSddID0gX3RoaXMuc2VhdEluZm9MaXN0W2luZGV4XS5tdXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zZWF0SW5mb0xpc3RbaW5kZXhdWydzcGVha2luZyddID0gX3RoaXMuc2VhdEluZm9MaXN0W2luZGV4XS5zcGVha2luZztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIF90aGlzLnNlYXRJbmZvTGlzdFtpbmRleF1bJ3VzZXJJZCddO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZW50ZXJTZWF0KHNlYXRJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+acquefpemUmeivrzotMScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlYXRJbmZvTGlzdFtzZWF0SW5kZXhdLnVzZXJJZCA9PSB0aGlzLmltLnVzZXJJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcign55So5oi36Lez6bqm55qE6bqm5L2N5ZKM5LmL5YmN55qE5LiA5qC3OjcwMDA1Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+m6puS9jeS4jeaYr+epuue9rueKtuaAgTo3MDAwNicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICpcbiAgICAqIOmCgOivt+eUqOaIt+S4ium6plxuICAgICpcbiAgICAqIEBwYXJhbSB1c2VySWQgICDnlKjmiLcgSWRcbiAgICAqL1xuICAgIFJDVm9pY2VSb29tTGliQ2xhc3MucHJvdG90eXBlLnBpY2tVc2VyVG9TZWF0ID0gZnVuY3Rpb24gKHVzZXJJZCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWU7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIOWhq+WGmeW8gOWPkeiAheWumuS5ieeahOa2iOaBr+WGheWuuVxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBcIlJDUGlja2VyVXNlclNlYXRDb250ZW50XCIsXG4gICAgICAgICAgICAgICAgICAgIGludml0YXRpb25JZDogXCJmOWU2NzY1Yi0zMDRkLTQ1MWEtYmU5MS0yYmI5MzYxNzU4ODhcIixcbiAgICAgICAgICAgICAgICAgICAgc2VuZFVzZXJJZDogdGhpcy5pbS51c2VySWQsXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldElkOiB1c2VySWQsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IDAsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAodXNlcklkID09IHRoaXMuaW0udXNlcklkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcign5oqx5Lq65LiK6bqm5LiN6IO96YCJ5oup6Ieq5bexOjcwMDA3Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5pbS5tZXNzYWdlVXBkYXRlKFwiUkM6VlJMSW52aXRlTXNnXCIsIHZhbHVlKS50aGVuKGZ1bmN0aW9uIChtYXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICfmk43kvZzmiJDlip86NzAwMDAnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcign5Y+R6YCB5LiK6bqm6YKA6K+35aSx6LSlOjcwMDA4Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICpcbiAgICAqIOWwhueUqOaIt+i4ouWHuuaIv+mXtFxuICAgICpcbiAgICAqIEBwYXJhbSB1c2VySWQgICDnlKjmiLcgSWRcbiAgICAqL1xuICAgIFJDVm9pY2VSb29tTGliQ2xhc3MucHJvdG90eXBlLmtpY2tVc2VyRnJvbVJvb20gPSBmdW5jdGlvbiAodXNlcklkKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZTtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgLy8g5aGr5YaZ5byA5Y+R6ICF5a6a5LmJ55qE5raI5oGv5YaF5a65XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IFwiUkNLaWNrVXNlck91dFJvb21Db250ZW50XCIsXG4gICAgICAgICAgICAgICAgICAgIGludml0YXRpb25JZDogXCJ5b3VyUmFuZG9tU3RyaW5nXCIgKyBNYXRoLnJhbmRvbSgpLFxuICAgICAgICAgICAgICAgICAgICBzZW5kVXNlcklkOiB0aGlzLmltLnVzZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0SWQ6IHVzZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogMCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmICh1c2VySWQgPT0gdGhpcy5pbS51c2VySWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfmnKrnn6XplJnor686LTEnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLmltLm1lc3NhZ2VVcGRhdGUoXCJSQzpWUkxJbnZpdGVNc2dcIiwgdmFsdWUpLnRoZW4oZnVuY3Rpb24gKG1hc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ+aTjeS9nOaIkOWKnzo3MDAwMCc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCflj5HpgIHkv6Hmga/lpLHotKU6NzAwMjMnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgKlxuICAgICog5bCG5p+Q5Liq6bqm5L2N6Z2Z6Z+zXG4gICAgKlxuICAgICogQHBhcmFtIHNlYXRJbmRleCDpuqbkvY3luo/lj7dcbiAgICAqIEBwYXJhbSBpc011dGUgICAg5piv5ZCm6Z2Z6Z+zXG4gICAgKi9cbiAgICBSQ1ZvaWNlUm9vbUxpYkNsYXNzLnByb3RvdHlwZS5tdXRlU2VhdCA9IGZ1bmN0aW9uIChzZWF0SW5kZXgsIGlzbXV0ZSkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYXJyLCB2YWx1ZTtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgYXJyID0gW107XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgdGhpcy5zZWF0SW5mb0xpc3Rbc2VhdEluZGV4XSksIHsgbXV0ZTogaXNtdXRlIH0pO1xuICAgICAgICAgICAgICAgIGFyci5wdXNoKHRoaXMuaW0uc2VhdEluZm9VcGRhdGUodGhpcy5SQ1NlYXRJbmZvU2VhdFBhcnRQcmVmaXhLZXkgKyBzZWF0SW5kZXgsIHZhbHVlKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIFByb21pc2UuYWxsKGFycikudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VhdEluZGV4ID09IF90aGlzLmltLnNlYXRJbmRleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc211dGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucnRjLm11dGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnJ0Yy51bm11dGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zZWF0SW5mb0xpc3Rbc2VhdEluZGV4XVsnbXV0ZSddID0gaXNtdXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICfmk43kvZzmiJDlip86NzAwMDAnO1xuICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+acquefpemUmeivrzotMScpO1xuICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAqXG4gICAgKiDlsIbmn5DkuKrpuqbkvY3plIHlrppcbiAgICAqXG4gICAgKiBAcGFyYW0gc2VhdEluZGV4IOm6puS9jeW6j+WPt1xuICAgICogQHBhcmFtIGlzTG9ja2VkICDmmK/lkKbplIHpuqbkvY1cbiAgICAqL1xuICAgIFJDVm9pY2VSb29tTGliQ2xhc3MucHJvdG90eXBlLmxvY2tTZWF0ID0gZnVuY3Rpb24gKHNlYXRJbmRleCwgaXNMb2NrZWQpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGFyciwgaXNMb2NrLCB2YWx1ZTtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnNlYXRJbmZvTGlzdFtzZWF0SW5kZXhdKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcign6bqm5L2N5LiN5a2Y5ZyoJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGFyciA9IFtdO1xuICAgICAgICAgICAgICAgIGlzTG9jayA9IGlzTG9ja2VkID8gMiA6IDA7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSB7XG4gICAgICAgICAgICAgICAgICAgIG11dGU6IHRoaXMuc2VhdEluZm9MaXN0W3NlYXRJbmRleF0ubXV0ZSxcbiAgICAgICAgICAgICAgICAgICAgc3BlYWtpbmc6IHRoaXMuc2VhdEluZm9MaXN0W3NlYXRJbmRleF0uc3BlYWtpbmcsXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogaXNMb2NrLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgYXJyLnB1c2godGhpcy5pbS5zZWF0SW5mb1VwZGF0ZSh0aGlzLlJDU2VhdEluZm9TZWF0UGFydFByZWZpeEtleSArIHNlYXRJbmRleCwgdmFsdWUpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgUHJvbWlzZS5hbGwoYXJyKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNlYXRJbmZvTGlzdFtzZWF0SW5kZXhdWydzdGF0dXMnXSA9IGlzTG9jaztcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNlYXRJbmZvTGlzdFtzZWF0SW5kZXhdWydtdXRlJ10gPSBfdGhpcy5zZWF0SW5mb0xpc3Rbc2VhdEluZGV4XS5tdXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2VhdEluZm9MaXN0W3NlYXRJbmRleF1bJ3NwZWFraW5nJ10gPSBfdGhpcy5zZWF0SW5mb0xpc3Rbc2VhdEluZGV4XS5zcGVha2luZztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBfdGhpcy5zZWF0SW5mb0xpc3Rbc2VhdEluZGV4XVsndXNlcklkJ107XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ+aTjeS9nOaIkOWKnzo3MDAwMCc7XG4gICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcign5pyq55+l6ZSZ6K+vOi0xJyk7XG4gICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICog6K6+572u5oi/6Ze05L+h5oGv77yM5oi/6Ze055qEaWTlv4XpobvkuI7lvZPliY3miL/pl7RpZOS4gOiHtFxuICAgICpcbiAgICAqIEBwYXJhbSByb29tSW5mbyDkv67mlLnnmoTmiL/pl7Tkv6Hmga9cbiAgICAqL1xuICAgIFJDVm9pY2VSb29tTGliQ2xhc3MucHJvdG90eXBlLnNldFJvb21JbmZvID0gZnVuY3Rpb24gKHJvb21JbmZvKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcInJvb21pbmZvXCIsIHJvb21JbmZvLCB0aGlzLnJvb21JbmZvKTtcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcInRoaXMucm9vbUluZm9cIiwgdGhpcy5yb29tSW5mbyk7XG4gICAgICAgICAgICAgICAgLy8gc2VhdENvdW50XG4gICAgICAgICAgICAgICAgaWYgKE51bWJlcihyb29tSW5mby5zZWF0Q291bnQpICE9IE51bWJlcih0aGlzLnJvb21JbmZvLnNlYXRDb3VudCkpIHsgLy/luqfkvY3mlbDlj5HnlJ/kuoblj5jmm7RcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbS5jaGFuZ2VSb29tSW5mbyhyb29tSW5mbyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChyb29tSW5mby5pc011dGVBbGwgIT0gdGhpcy5yb29tSW5mby5pc011dGVBbGwpIHsgLy/lsIbmiYDmnInpuqbkvY3pnZnpn7PmiZPlvIDmiJbogIXlhbPpl61cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tdXRlT3RoZXJTZWF0cyhyb29tSW5mby5pc011dGVBbGwpO1xuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLmltLnNlYXRJbmZvVXBkYXRlKFwiUkNSb29tSW5mb0tleVwiLCByb29tSW5mbylcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJvb21JbmZvLmlzTG9ja0FsbCAhPSB0aGlzLnJvb21JbmZvLmlzTG9ja0FsbCkgeyAvL+WwhuaJgOaciem6puS9jeaJgOWNluaIluiAheino+mZpOmUgem6plxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvY2tPdGhlclNlYXRzKHJvb21JbmZvLmlzTG9ja0FsbCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuaW0uc2VhdEluZm9VcGRhdGUoXCJSQ1Jvb21JbmZvS2V5XCIsIHJvb21JbmZvKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmltLnNlYXRJbmZvVXBkYXRlKFwiUkNSb29tSW5mb0tleVwiLCByb29tSW5mbyk7XG4gICAgICAgICAgICAgICAgdGhpcy5yb29tSW5mbyA9IF9fYXNzaWduKHt9LCByb29tSW5mbyk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0KFwicm9vbUluZm9EaWRVcGRhdGVcIiwgdGhpcy5yb29tSW5mbyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgKlxuICAgICog5bCG5omA5pyJ6bqm5L2N6Z2Z6Z+z5oiW6ICF6Kej6Zmk6Z2Z6Z+zXG4gICAgKlxuICAgICogQHBhcmFtIGlzTXV0ZSDmmK/lkKbpnZnpn7NcbiAgICAqL1xuICAgIFJDVm9pY2VSb29tTGliQ2xhc3MucHJvdG90eXBlLm11dGVPdGhlclNlYXRzID0gZnVuY3Rpb24gKGlzTXV0ZSkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYXJyLCByb29tRGF0YSwgaSwgdmFsdWU7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIGFyciA9IFtdO1xuICAgICAgICAgICAgICAgIHJvb21EYXRhID0gX19hc3NpZ24oX19hc3NpZ24oe30sIHRoaXMucm9vbUluZm8pLCB7IGlzTXV0ZUFsbDogaXNNdXRlIH0pO1xuICAgICAgICAgICAgICAgIC8vIGNvbnN0IHVuTXV0ZSA9ICFpc011dGVcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5zZWF0SW5mb0xpc3QubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgKHRoaXMuc2VhdEluZm9MaXN0W2ldWyd1c2VySWQnXSA9PSB0aGlzLmltLnVzZXJJZCl7Ly/lvZPliY3puqbkvY3mnKzlnLDmk43kvZxcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIHRoaXMudXBkYXRlTG9jYWxJbmZvKHRoaXMuc2VhdEluZm9MaXN0W2ldKVxuICAgICAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlYXRJbmZvTGlzdFtpXVsndXNlcklkJ10gIT0gdGhpcy5pbS51c2VySWQgJiYgdGhpcy5zZWF0SW5mb0xpc3RbaV1bJ211dGUnXSAhPSBpc011dGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gX19hc3NpZ24oX19hc3NpZ24oe30sIHRoaXMuc2VhdEluZm9MaXN0W2ldKSwgeyBtdXRlOiBpc011dGUgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcnIucHVzaCh0aGlzLmltLnNlYXRJbmZvVXBkYXRlKHRoaXMuUkNTZWF0SW5mb1NlYXRQYXJ0UHJlZml4S2V5ICsgaSwgdmFsdWUpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgUHJvbWlzZS5hbGwoYXJyKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnJvb21JbmZvID0gcm9vbURhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5lbWl0KFwicm9vbUluZm9EaWRVcGRhdGVcIiwgX3RoaXMucm9vbUluZm8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBfdGhpcy5zZWF0SW5mb0xpc3QubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuc2VhdEluZm9MaXN0W2ldWyd1c2VySWQnXSAhPSBfdGhpcy5pbS51c2VySWQgJiYgX3RoaXMuc2VhdEluZm9MaXN0W2ldWydtdXRlJ10gIT0gaXNNdXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNlYXRJbmZvTGlzdFtpXVsnbXV0ZSddID0gaXNNdXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAn5pON5L2c5oiQ5YqfOjcwMDAwJztcbiAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfmnKrnn6XplJnor686LTEnKTtcbiAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgKlxuICAgICog5bCG5omA5pyJ6bqm5L2N6ZSB6bqm5oiW6ICF6Kej6Zmk6ZSB6bqmXG4gICAgKlxuICAgICogQHBhcmFtIGlzTG9jayDmmK/lkKbplIHpuqZcbiAgICAqL1xuICAgIFJDVm9pY2VSb29tTGliQ2xhc3MucHJvdG90eXBlLmxvY2tPdGhlclNlYXRzID0gZnVuY3Rpb24gKGlzTG9jaykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYXJyLCBMb2NrLCByb29tRGF0YSwgaSwgdmFsdWU7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIGFyciA9IFtdO1xuICAgICAgICAgICAgICAgIExvY2sgPSBpc0xvY2sgPyAyIDogMDtcbiAgICAgICAgICAgICAgICByb29tRGF0YSA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCB0aGlzLnJvb21JbmZvKSwgeyBpc0xvY2tBbGw6IGlzTG9jayB9KTtcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5zZWF0SW5mb0xpc3QubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnNlYXRJbmZvTGlzdFtpXVsndXNlcklkJ10gJiYgdGhpcy5zZWF0SW5mb0xpc3RbaV1bJ3N0YXR1cyddICE9IExvY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gX19hc3NpZ24oX19hc3NpZ24oe30sIHRoaXMuc2VhdEluZm9MaXN0W2ldKSwgeyBzdGF0dXM6IExvY2sgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcnIucHVzaCh0aGlzLmltLnNlYXRJbmZvVXBkYXRlKHRoaXMuUkNTZWF0SW5mb1NlYXRQYXJ0UHJlZml4S2V5ICsgaSwgdmFsdWUpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgUHJvbWlzZS5hbGwoYXJyKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnJvb21JbmZvID0gcm9vbURhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5lbWl0KFwicm9vbUluZm9EaWRVcGRhdGVcIiwgX3RoaXMucm9vbUluZm8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBfdGhpcy5zZWF0SW5mb0xpc3QubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIV90aGlzLnNlYXRJbmZvTGlzdFtpXVsndXNlcklkJ10gJiYgX3RoaXMuc2VhdEluZm9MaXN0W2ldWydzdGF0dXMnXSAhPSBMb2NrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNlYXRJbmZvTGlzdFtpXVsnc3RhdHVzJ10gPSBMb2NrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAn5pON5L2c5oiQ5YqfOjcwMDAwJztcbiAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfmnKrnn6XplJnor686LTEnKTtcbiAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgKiDpgJrnn6XmiL/pl7TmiYDmnInnlKjmiLfmiafooYzmn5DkuKrliLfmlrDmk43kvZzvvIzlvZMgbWVzc2FnZVR5cGUg5Li6IFwiUkM6VlJMUmVmcmVzaE1zZ1wiIOaXtuiwg+eUqFxuICAgICpcbiAgICAqIEBwYXJhbSBuYW1lICAgIOWIt+aWsOaTjeS9nOeahOWQjeensFxuICAgICogQHBhcmFtIGNvbnRlbnQg5Yi35paw5pON5L2c55qE5YaF5a65XG4gICAgKi9cbiAgICBSQ1ZvaWNlUm9vbUxpYkNsYXNzLnByb3RvdHlwZS5ub3RpZnlWb2ljZVJvb20gPSBmdW5jdGlvbiAobmFtZSwgY29udGVudCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWU7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGNvbnRlbnQsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5pbS5tZXNzYWdlVXBkYXRlKFwiUkM6VlJMUmVmcmVzaE1zZ1wiLCB2YWx1ZSkudGhlbihmdW5jdGlvbiAobWFzc2FnZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICfmk43kvZzmiJDlip86NzAwMDAnO1xuICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+WPkemAgeS/oeaBr+Wksei0pTo3MDAyMycpO1xuICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAqXG4gICAgKiDojrflj5bmjpLpuqbnlKjmiLfnmoTmoIfor4bpm4blkIhcbiAgICAqXG4gICAgKi9cbiAgICBSQ1ZvaWNlUm9vbUxpYkNsYXNzLnByb3RvdHlwZS5nZXRSZXF1ZXN0U2VhdFVzZXJJZHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBhcnI7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgYXJyID0gW107XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuaW0uY2hhdFJvb20uZ2V0QWxsQ2hhdFJvb21FbnRyaWVzKHRoaXMuX3Jvb21pZGNsaSkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuY29kZSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbnRyaWVzXzEgPSBkYXRhLmRhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoZW50cmllc18xKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGtleS5zcGxpdChcIl9cIilbMF0gPT0gXCJSQ1JlcXVlc3RTZWF0UHJlZml4S2V5XCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudHJpZXNfMVtrZXldID09IFwiUkNSZXF1ZXN0U2VhdENvbnRlbnRSZXF1ZXN0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyci5wdXNoKGtleS5zcGxpdChcIl9cIilbMV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFycjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfojrflj5bmjpLpuqbor7fmsYLliJfooajlpLHotKU6NzAwMjInKTtcbiAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgKlxuICAgICog6I635Y+W5pyA5paw6bqm5L2N5L+h5oGvXG4gICAgKlxuICAgICovXG4gICAgUkNWb2ljZVJvb21MaWJDbGFzcy5wcm90b3R5cGUuZ2V0TGF0ZXN0U2VhdEluZm8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBhcnI7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgYXJyID0gW107XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3RoaXMuX3Jvb21pZGNsaScsIHRoaXMuX3Jvb21pZGNsaSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuaW0uY2hhdFJvb20uZ2V0QWxsQ2hhdFJvb21FbnRyaWVzKHRoaXMuX3Jvb21pZGNsaSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZW50cmllczonLCByZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5jb2RlID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXMocmVzLmRhdGEpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZW50cmllc0FyciA9IGtleS5zcGxpdChcIl9cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbnRyaWVzQXJyWzBdID09IFwiUkNTZWF0SW5mb1NlYXRQYXJ0UHJlZml4S2V5XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ051bWJlcihlbnRyaWVzQXJyWzFdKScsIE51bWJlcihlbnRyaWVzQXJyWzFdKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCdlbnRyaWVzW2tleV0nLCBlbnRyaWVzW2tleV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJyW051bWJlcihlbnRyaWVzQXJyWzFdKV0gPSBKU09OLnBhcnNlKHJlcy5kYXRhW2tleV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFycjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCflkIzmraXpuqbkvY3kv6Hmga/lpLHotKU6NzAwMzAnKTtcbiAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgKlxuICAgICog5pu05paw5oyH5a6a6bqm5L2N5L+h5oGv5Lit55qEZXh0cmHlrZfmrrVcbiAgICAqXG4gICAgKiBAcGFyYW0gaW5kZXgg6bqm5L2NXG4gICAgKiBAcGFyYW0gZXh0cmEgZXh0cmHlrZfmrrVcbiAgICAqL1xuICAgIFJDVm9pY2VSb29tTGliQ2xhc3MucHJvdG90eXBlLnVwZGF0ZVNlYXRJbmZvRXh0cmEgPSBmdW5jdGlvbiAoaW5kZXgsIGV4dHJhKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBhcnIsIHZhbHVlO1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBhcnIgPSBbXTtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCB0aGlzLnNlYXRJbmZvTGlzdFtpbmRleF0pLCB7IGV4dHJhOiBleHRyYSB9KTtcbiAgICAgICAgICAgICAgICBhcnIucHVzaCh0aGlzLmltLnNlYXRJbmZvVXBkYXRlKHRoaXMuUkNTZWF0SW5mb1NlYXRQYXJ0UHJlZml4S2V5ICsgaW5kZXgsIHZhbHVlKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIFByb21pc2UuYWxsKGFycikudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zZWF0SW5mb0xpc3RbaW5kZXhdWydleHRyYSddID0gZXh0cmE7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ+aTjeS9nOaIkOWKnzo3MDAwMCc7XG4gICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcign5pyq55+l6ZSZ6K+vOi0xJyk7XG4gICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICpcbiAgICAqIOivt+axguaOkum6plxuICAgICovXG4gICAgUkNWb2ljZVJvb21MaWJDbGFzcy5wcm90b3R5cGUucmVxdWVzdFNlYXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBsZW4sIGJvciwgaSwgYXJyO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmdldFJlcXVlc3RTZWF0VXNlcklkcygpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgbGVuID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYm9yID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxlbltpXSA9PSB0aGlzLmltLnVzZXJJZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFyciA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxlbi5sZW5ndGggPiAyMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcign5o6S6bqm5Lq65pWw6L+H5aSaOjcwMDE0Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChib3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+W3sue7j+WcqOaOkum6puS4rTo3MDAxMycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJyLnB1c2godGhpcy5pbS5SZXF1ZXN0c2VhdEluZm9VcGRhdGUoXCJSQ1JlcXVlc3RTZWF0UHJlZml4S2V5X1wiICsgdGhpcy5pbS51c2VySWQsIFwiUkNSZXF1ZXN0U2VhdENvbnRlbnRSZXF1ZXN0XCIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgUHJvbWlzZS5hbGwoYXJyKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAn5pON5L2c5oiQ5YqfOjcwMDAwJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfmjpLpuqbor7fmsYLlj5HpgIHlpLHotKU6NzAwMTUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICpcbiAgICAqIOWPlua2iOaOkum6puivt+axglxuICAgICpcbiAgICAqL1xuICAgIFJDVm9pY2VSb29tTGliQ2xhc3MucHJvdG90eXBlLmNhbmNlbFJlcXVlc3RTZWF0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuaW0uc2VhdEluZm9SZW1vdmUoXCJSQ1JlcXVlc3RTZWF0UHJlZml4S2V5X1wiICsgdGhpcy5pbS51c2VySWQpLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5by65Yi25Yig6Zmk6IGK5aSp5a6k5bGe5oCn5oiQ5YqfXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmNvZGUgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ+aTjeS9nOaIkOWKnzo3MDAwMCc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCflj5bmtojmjpLpuqblj5HpgIHlpLHotKU6NzAwMTYnKTtcbiAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgKlxuICAgICogIOWQjOaEj+eUqOaIt+aOkum6puivt+axglxuICAgICpcbiAgICAqIEBwYXJhbSB1c2VySWQgICDor7fmsYLmjpLpuqbnmoTnlKjmiLcgSWRcbiAgICAqL1xuICAgIFJDVm9pY2VSb29tTGliQ2xhc3MucHJvdG90eXBlLmFjY2VwdFJlcXVlc3RTZWF0ID0gZnVuY3Rpb24gKHVzZXJJZCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYXJyO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIGFyciA9IFtdO1xuICAgICAgICAgICAgICAgIGFyci5wdXNoKHRoaXMuaW0uUmVxdWVzdHNlYXRJbmZvVXBkYXRlKFwiUkNSZXF1ZXN0U2VhdFByZWZpeEtleV9cIiArIHVzZXJJZCwgXCJSQ1JlcXVlc3RTZWF0Q29udGVudEFjY2VwdFwiKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIFByb21pc2UuYWxsKGFycikudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ+aTjeS9nOaIkOWKnzo3MDAwMCc7XG4gICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcign5ZCM5oSP5o6S6bqm6K+35rGC5Y+R6YCB5aSx6LSlOjcwMDE3Jyk7XG4gICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICog5ouS57ud55So5oi35o6S6bqm6K+35rGCXG4gICAgKlxuICAgICogQHBhcmFtIHVzZXJJZCDor7fmsYLmjpLpuqbnmoTnlKjmiLcgSWRcbiAgICAqL1xuICAgIFJDVm9pY2VSb29tTGliQ2xhc3MucHJvdG90eXBlLnJlamVjdFJlcXVlc3RTZWF0ID0gZnVuY3Rpb24gKHVzZXJJZCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYXJyO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIGFyciA9IFtdO1xuICAgICAgICAgICAgICAgIGFyci5wdXNoKHRoaXMuaW0uUmVxdWVzdHNlYXRJbmZvVXBkYXRlKFwiUkNSZXF1ZXN0U2VhdFByZWZpeEtleV9cIiArIHVzZXJJZCwgXCJSQ1JlcXVlc3RTZWF0Q29udGVudERlbnlcIikpO1xuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBQcm9taXNlLmFsbChhcnIpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2xvZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV80X18uZGVmYXVsdC5sb2coJ+aTjeS9nOaIkOWKnzo3MDAwMCcpO1xuICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ+aLkue7neaOkum6puivt+axguWPkemAgeWksei0pTo3MDAxOCcpO1xuICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAqXG4gICAgKiDpnZnpn7PmiYDmnInov5znqIvpn7PpopHmtYFcbiAgICAqXG4gICAgKiBAcGFyYW0gaXNNdXRlIOaYr+WQpumdmemfs+i/nOeoi+mfs+mikea1gVxuICAgICovXG4gICAgUkNWb2ljZVJvb21MaWJDbGFzcy5wcm90b3R5cGUubXV0ZUFsbFJlbW90ZVN0cmVhbXMgPSBmdW5jdGlvbiAoaXNNdXRlKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZW1vdGVUcmFja3NPYmo7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJ0Yy5pc011dGVPdGhlciA9IGlzTXV0ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucnRjLnJvb20uZ2V0UmVtb3RlVHJhY2tzKCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICByZW1vdGVUcmFja3NPYmogPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVtb3RlVHJhY2tzT2JqLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc011dGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMucnRjLnJvb20udW5zdWJzY3JpYmUocmVtb3RlVHJhY2tzT2JqKV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5ydGMucnRjVHJhY2tzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5ydGMucm9vbS5zdWJzY3JpYmUodGhpcy5ydGMucnRjVHJhY2tzKV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5ydGMucm9vbS5zdWJzY3JpYmUocmVtb3RlVHJhY2tzT2JqKV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgKlxuICAgICog56aB55So5pys5Zyw6bqm5YWL6aOOXG4gICAgKlxuICAgICogQHBhcmFtIGlzRGlzYWJsZSDmmK/lkKbnpoHnlKgoIOS4jeaOqOa1gSApXG4gICAgKi9cbiAgICBSQ1ZvaWNlUm9vbUxpYkNsYXNzLnByb3RvdHlwZS5kaXNhYmxlQXVkaW9SZWNvcmRpbmcgPSBmdW5jdGlvbiAoaXNEaXNhYmxlKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJ0Yy5pc0Rpc2FibGUgPSBpc0Rpc2FibGU7XG4gICAgICAgICAgICAgICAgaWYgKGlzRGlzYWJsZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5ydGMubXV0ZSgpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLnJ0Yy51bm11dGUoKV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICpcbiAgICAqIOiOt+WPluacrOWcsOm6puWFi+mjjueKtuaAge+8iCDmtYHnirbmgIEg77yJXG4gICAgKlxuICAgICovXG4gICAgUkNWb2ljZVJvb21MaWJDbGFzcy5wcm90b3R5cGUuaXNEaXNhYmxlQXVkaW9SZWNvcmRpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5ydGMuaXNEaXNhYmxlXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICpcbiAgICAqIOS4u+WKqOaSreaUvijop6PlhrMgbWFjIHNhZmFyaSDml6Dms5Xoh6rliqjmkq3mlL7pl67popggKVxuICAgICpcbiAgICAqL1xuICAgIFJDVm9pY2VSb29tTGliQ2xhc3MucHJvdG90eXBlLmVuYWJsZVNwZWFrZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5ydGMuYXVkaW9QbGF5KCldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgKlxuICAgICog5Y+R5biD6Ieq5a6a5LmJ6Z+z6aKR5rWBXG4gICAgKiBAcGFyYW0gZmlsZSDmnKzlnLAgTVAzIGZpbGXlrp7kvotcbiAgICAqL1xuICAgIFJDVm9pY2VSb29tTGliQ2xhc3MucHJvdG90eXBlLmNyZWF0ZVRyYWNrID0gZnVuY3Rpb24gKGZpbGUpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLnJ0Yy5jcmVhdGVUcmFjayhmaWxlKV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAqXG4gICAgKiDlgZzmraLlj5HluIPoh6rlrprkuYnpn7PpopHmtYEo6LCD55So5pe277yM6buY6K6k5bey5Y+R5biD6Ieq5a6a5LmJ6Z+z6aKR5rWBKVxuICAgICpcbiAgICAqL1xuICAgIFJDVm9pY2VSb29tTGliQ2xhc3MucHJvdG90eXBlLnN0b3BDcmVhdGVUcmFjayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLnJ0Yy5zdG9wQ3JlYXRlVHJhY2soKV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAqXG4gICAgKiDlj5HpgIHoh6rlrprkuYnmtojmga9cbiAgICAqXG4gICAgKi9cbiAgICBSQ1ZvaWNlUm9vbUxpYkNsYXNzLnByb3RvdHlwZS5zZW5kQ3VzdG9tTWVzc2FnZSA9IGZ1bmN0aW9uIChtZXNzYWdlVHlwZSwgY29udGVudCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuaW0ubWVzc2FnZVVwZGF0ZShtZXNzYWdlVHlwZSwgY29udGVudCldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgKlxuICAgICog55u05pKt6aKE6KeIXG4gICAgKlxuICAgICogQHBhcmFtIHZpZGVvTm9kZVxuICAgICovXG4gICAgUkNWb2ljZVJvb21MaWJDbGFzcy5wcm90b3R5cGUucHJldmlldyA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICAgIHRoaXMucnRjLnByZXZpZXcoby52aWRlb05vZGUpO1xuICAgIH07XG4gICAgcmV0dXJuIFJDVm9pY2VSb29tTGliQ2xhc3M7XG59KGV2ZW50c19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLkV2ZW50RW1pdHRlcikpO1xudmFyIFJDVm9pY2VSb29tTGliID0gbmV3IFJDVm9pY2VSb29tTGliQ2xhc3MoKTtcbi8qIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi8gY29uc3QgX19XRUJQQUNLX0RFRkFVTFRfRVhQT1JUX18gPSAoUkNWb2ljZVJvb21MaWIpO1xuXG5cbi8vIyBzb3VyY2VVUkw9d2VicGFjazovL0Byb25nY2xvdWQvcmN2b2ljZXJvb21saWItdjEvLi9zcmMvaW5kZXgudHM/Iik7LyoqKi99LC8qKiovIi4vc3JjL2xvZ2VyLnRzIjovKiEqKioqKioqKioqKioqKioqKioqKioqISpcCiAgISoqKiAuL3NyYy9sb2dlci50cyAqKiohCiAgXCoqKioqKioqKioqKioqKioqKioqKiovIC8qKiovZnVuY3Rpb24gc3JjTG9nZXJUcyhfX3VudXNlZF93ZWJwYWNrX21vZHVsZSxfX3dlYnBhY2tfZXhwb3J0c19fLF9fd2VicGFja19yZXF1aXJlX18pe2V2YWwoIl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0ICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCB7XG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZGVmYXVsdFwiOiAoKSA9PiAoX19XRUJQQUNLX0RFRkFVTFRfRVhQT1JUX18pXG4vKiBoYXJtb255IGV4cG9ydCAqLyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfY29uZmlnX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2NvbmZpZyAqLyBcIi4vc3JjL2NvbmZpZy50c1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBldmVudHNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIGV2ZW50cyAqLyBcIi4vbm9kZV9tb2R1bGVzL2V2ZW50cy9ldmVudHMuanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgZXZlbnRzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm4oZXZlbnRzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18pO1xuXG5cbnZhciBMb2dlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBMb2dlcigpIHtcbiAgICAgICAgdGhpcy5IaXN0b3J5ID0gW107XG4gICAgfVxuICAgIExvZ2VyLnByb3RvdHlwZS5sb2cgPSBmdW5jdGlvbiAodGFyZ2V0LCB0KSB7XG4gICAgICAgIGlmICh0ID09PSB2b2lkIDApIHsgdCA9IFwiXCI7IH1cbiAgICAgICAgaWYgKCFfY29uZmlnX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uZGVidWcpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHN3aXRjaCAodHlwZW9mICh0YXJnZXQpKSB7XG4gICAgICAgICAgICBjYXNlIFwibnVtYmVyXCI6XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJpdHMgYSBudW1iZXIgPT09PlwiLCB0YXJnZXQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInN0cmluZ1wiOlxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRhcmdldCwgdCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwib2JqZWN0XCI6XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJpdHMgYSBvYmplY3QgPT09PlwiLCB0YXJnZXQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImZ1bmN0aW9uXCI6XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJpdHMgYSBmdW5jdGlvbiA9PT0+XCIsIHRhcmdldCk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRhcmdldCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIExvZ2VyLnByb3RvdHlwZS5fbG9nID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICB2YXIgbCA9IHtcbiAgICAgICAgICAgIG1haW5TdGF0dXM6IDAsXG4gICAgICAgICAgICBtb2R1bGVOdW06IDAsXG4gICAgICAgICAgICByZWFkeU51bTogMCxcbiAgICAgICAgICAgIGxvYWRpbmdMaXN0OiBbXSxcbiAgICAgICAgICAgIHJlYWR5TGlzdDogW10sXG4gICAgICAgICAgICBydW5uaW5nTGlzdDogW10sXG4gICAgICAgICAgICBicm9rZW5MaXN0OiBbXSxcbiAgICAgICAgICAgIHVuS25vd1N0YXRlc0xpc3Q6IFtdXG4gICAgICAgIH07XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHRhcmdldCkpIHsgLy9hcnJheeexu+Weiy5cbiAgICAgICAgICAgIHRhcmdldC5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgaWYgKChlbGVtZW50IGluc3RhbmNlb2YgZXZlbnRzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18uRXZlbnRFbWl0dGVyKSAmJiAoZWxlbWVudC5uYW1lKSkgeyAvL+mYn+WIl+WGheWuueaYr+aooeWdl+aVsOaNruajgOafpVxuICAgICAgICAgICAgICAgICAgICBsLm1vZHVsZU51bSsrO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGVsZW1lbnQuc3RhdGVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbC5sb2FkaW5nTGlzdC5wdXNoKGVsZW1lbnQubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbC5yZWFkeUxpc3QucHVzaChlbGVtZW50Lm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwucmVhZHlOdW0rKztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsLnJ1bm5pbmdMaXN0LnB1c2goZWxlbWVudC5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgOTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsLmJyb2tlbkxpc3QucHVzaChlbGVtZW50Lm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsLnVuS25vd1N0YXRlc0xpc3QucHVzaChlbGVtZW50Lm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCLmlbDmja7pnZ7ms5VcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLkhpc3RvcnkucHVzaChsKTtcbiAgICAgICAgICAgIGlmICh0aGlzLkhpc3RvcnkubGVuZ3RoID4gOTkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLkhpc3Rvcnkuc2hpZnQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHsgLy/mma7pgJrlr7nosaHnsbvlnotcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcIl9sb2cg5pa55rOV5a2Y5Zyo5byC5bi46LCD55SoXCIsIHRhcmdldCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIExvZ2VyLnByb3RvdHlwZS5oaXN0b3J5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLkhpc3RvcnkpO1xuICAgIH07XG4gICAgTG9nZXIucHJvdG90eXBlLndhcm4gPSBmdW5jdGlvbiAodGFyZ2V0LCBlKSB7XG4gICAgICAgIGlmIChlID09PSB2b2lkIDApIHsgZSA9IG51bGw7IH1cbiAgICAgICAgY29uc29sZS53YXJuKHRhcmdldCwgZSk7XG4gICAgfTtcbiAgICAvL+mUmeivr+S4iuaKpTog5Y+C5pWwIGU65Y6f5aeL6ZSZ6K+v5L+h5oGvICBlcnJ0eXBlOumUmeivr+exu+WeiyBtb2Q66ZSZ6K+v5Y+R55Sf5qih5Z2XIGVycm51bTrplJnor6/nvJblj7c7ZXJybWVzc2FnZTrplJnor6/mtojmga9cbiAgICBMb2dlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSwgZXJydHlwZSwgbW9kLCBlcnJudW0sIGVycm1lc3NhZ2UpIHtcbiAgICAgICAgaWYgKGVycnR5cGUgPT09IHZvaWQgMCkgeyBlcnJ0eXBlID0gXCIwXCI7IH1cbiAgICAgICAgaWYgKG1vZCA9PT0gdm9pZCAwKSB7IG1vZCA9IG51bGw7IH1cbiAgICAgICAgaWYgKGVycm51bSA9PT0gdm9pZCAwKSB7IGVycm51bSA9IFwiMDBcIjsgfVxuICAgICAgICBpZiAoZXJybWVzc2FnZSA9PT0gdm9pZCAwKSB7IGVycm1lc3NhZ2UgPSBcInVua25vdyBlcnJcIjsgfVxuICAgICAgICB2YXIgZXJyTW9kTnVtID0gXCIwXCI7XG4gICAgICAgIC8v6YGH5Yiw6ZSZ6K+v5pe25bCd6K+V6YeN5ZCv6K+l5qih5Z2XLlxuICAgICAgICBtb2QucmVib290KCk7XG4gICAgfTtcbiAgICBMb2dlci5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24gKHRhcmdldCwgZSkge1xuICAgICAgICBpZiAoZSA9PT0gdm9pZCAwKSB7IGUgPSBudWxsOyB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcih0YXJnZXQpO1xuICAgIH07XG4gICAgcmV0dXJuIExvZ2VyO1xufSgpKTtcbnZhciBsb2dlciA9IG5ldyBMb2dlcigpO1xuLyogaGFybW9ueSBkZWZhdWx0IGV4cG9ydCAqLyBjb25zdCBfX1dFQlBBQ0tfREVGQVVMVF9FWFBPUlRfXyA9IChsb2dlcik7XG4vL+aJp+ihjOeggSBcbi8qXG7ljYPkvY0g5omn6KGM57G75YirICAx5pWw5o2u6ZSZ6K+vIDLnvZHnu5zplJnor68gM+ehrOS7tiA05aSW6YOo6L2v5Lu2546v5aKD5Y6f5ZugIDXoh6rouqvplJnor69cbueZvuS9jSDmqKHlnZflj7cgMeS4u+aooeWdlyAy6YCa5L+hIDPlvZXpn7MgNOahpeaOpSA1cGNtIDDmnKrmib7liLDlhbfkvZPmqKHlnZdcbuWNgeS9jeS4quS9jSDlhbfkvZPlkb3ku6RcbiAgICAwMCDmnKrnn6XplJnor687XG4gICAgMDEg5Yid5aeL5YyW6ZSZ6K+vO1xuICAgIDAyIOWPguaVsOmUmeivrztcbiAgICAwMyB3c+aOpeaUtuaVsOaNrumUmeivrztcbiAgICAwNCDpn7PpopFuYXZpZ2F0b3Lojrflj5blpLHotKU7XG4gICAgMDUg5qih5Z2X6Ieq6Lqr5o2f5Z2PXG4gICAgMDYgbmF0aXZlIOebuOWFs+mUmeivr1xuICAgICovIFxuXG5cbi8vIyBzb3VyY2VVUkw9d2VicGFjazovL0Byb25nY2xvdWQvcmN2b2ljZXJvb21saWItdjEvLi9zcmMvbG9nZXIudHM/Iik7LyoqKi99LC8qKiovIi4vc3JjL21vZHVsZXMvaW0vaW5kZXgudHMiOi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXAogICEqKiogLi9zcmMvbW9kdWxlcy9pbS9pbmRleC50cyAqKiohCiAgXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8gLyoqKi9mdW5jdGlvbiBzcmNNb2R1bGVzSW1JbmRleFRzKF9fdW51c2VkX3dlYnBhY2tfbW9kdWxlLF9fd2VicGFja19leHBvcnRzX18sX193ZWJwYWNrX3JlcXVpcmVfXyl7ZXZhbCgiX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIHtcbi8qIGhhcm1vbnkgZXhwb3J0ICovICAgXCJkZWZhdWx0XCI6ICgpID0+IChfX1dFQlBBQ0tfREVGQVVMVF9FWFBPUlRfXylcbi8qIGhhcm1vbnkgZXhwb3J0ICovIH0pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9zdHJ1Y3R1cmVfbW9kdWxlc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vLi4vc3RydWN0dXJlL21vZHVsZXMgKi8gXCIuL3NyYy9zdHJ1Y3R1cmUvbW9kdWxlcy50c1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfcm9uZ2Nsb3VkX2ltbGliX25leHRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIEByb25nY2xvdWQvaW1saWItbmV4dCAqLyBcIi4vbm9kZV9tb2R1bGVzL0Byb25nY2xvdWQvaW1saWItbmV4dC9kaXN0L2luZGV4LmVzbS5qc1wiKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfY29uZmlnX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi8uLi9jb25maWcgKi8gXCIuL3NyYy9jb25maWcudHNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2xvZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi8uLi9sb2dlciAqLyBcIi4vc3JjL2xvZ2VyLnRzXCIpO1xudmFyIF9fZXh0ZW5kcyA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX19hc3NpZ24gPSAodW5kZWZpbmVkICYmIHVuZGVmaW5lZC5fX2Fzc2lnbikgfHwgZnVuY3Rpb24gKCkge1xuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbih0KSB7XG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSlcbiAgICAgICAgICAgICAgICB0W3BdID0gc1twXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdDtcbiAgICB9O1xuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufTtcbnZhciBfX2F3YWl0ZXIgPSAodW5kZWZpbmVkICYmIHVuZGVmaW5lZC5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbnZhciBfX2dlbmVyYXRvciA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fZ2VuZXJhdG9yKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgYm9keSkge1xuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XG4gICAgfVxufTtcblxuXG5cblxudmFyIElNID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhJTSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBJTShpdGVtKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnN0YXRlcyA9IDA7IC8vMOWIneWni+WMluacquWujOaIkCAx5bCx57uqIDLmraPlnKjliJ3lp4vljJYgIDnmtY/op4jlmajkuI3mlK/mjIFcbiAgICAgICAgX3RoaXMudXNlcklkID0gJyc7XG4gICAgICAgIF90aGlzLnJvb21JZCA9ICcnO1xuICAgICAgICBfdGhpcy5zZWF0SW5mb0xpc3QgPSBbXTtcbiAgICAgICAgX3RoaXMuaW5pdChpdGVtKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvL2lt5rOo5YaMXG4gICAgSU0ucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgUm9uZ0lNTGliLCBFdmVudHMsIHRoYXQ7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5pbUxpYikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJvbmdJTUxpYiA9IGl0ZW0uaW1MaWI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSb25nSU1MaWIgPSBfcm9uZ2Nsb3VkX2ltbGliX25leHRfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIFJvbmdJTUxpYi5fX2FkZFNES1ZlcnNpb24oJ3Jjdm9pY2Vyb29tbGliJywgJzIuMC4wJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDojrflj5YgSU1MaWIg5a6e5L6LXG4gICAgICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDojrflj5YgSU1MaWIg5a6e5L6LXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBSb25nSU1MaWIuaW5pdCh7IGFwcGtleTogaXRlbS5hcHBrZXkgfSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDojrflj5YgSU1MaWIg5a6e5L6LXG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBFdmVudHMgPSBSb25nSU1MaWIuRXZlbnRzO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGF0Um9vbSA9IFJvbmdJTUxpYjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYm9keSA9IFJvbmdJTUxpYjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy/mt7vliqDmtojmga/nm5HlkKxcbiAgICAgICAgICAgICAgICAgICAgICAgIFJvbmdJTUxpYi5hZGRFdmVudExpc3RlbmVyKEV2ZW50cy5NRVNTQUdFUywgZnVuY3Rpb24gKG0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IG0ubWVzc2FnZXNbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ21lc3NhZ2UnLCBtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1lc3NhZ2UubWVzc2FnZVR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlJDOlZSTFJlZnJlc2hNc2dcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuZW1pdChcIm9uUm9vbU5vdGlmaWNhdGlvblJlY2VpdmVkXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBtZXNzYWdlLmNvbnRlbnQubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBtZXNzYWdlLmNvbnRlbnQuY29udGVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChtZXNzYWdlLmNvbnRlbnQubmFtZS5zcGxpdChcIl9cIilbMF0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiUkNBdWRpZW5jZUpvaW5Sb29tXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuY2hhdFJvb20uZ2V0Q2hhdFJvb21JbmZvKHRoYXQucm9vbUlkLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyOiAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jb2RlID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmVtaXQoXCJvbkF1ZGllbmNlRW50ZXJcIiwgcmVzdWx0LmRhdGEudXNlckNvdW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJSQ0F1ZGllbmNlTGVhdmVSb29tXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuY2hhdFJvb20uZ2V0Q2hhdFJvb21JbmZvKHRoYXQucm9vbUlkLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudDogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyOiAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jb2RlID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmVtaXQoXCJvbkF1ZGllbmNlRXhpdFwiLCByZXN1bHQuZGF0YS51c2VyQ291bnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FzZSBcIlJDVXNlck9uU2VhdFNwZWFraW5nS2V5XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIC8vY29uc29sZS5sb2coXCJvcmlnaW5rZXk6XCIsIG1lc3NhZ2UuY29udGVudC5uYW1lKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICB0aGF0LmVtaXQoXCJzcGVha2luZ1N0YXR1c0NoYW5nZVwiLCB7IGluZGV4OiBtZXNzYWdlLmNvbnRlbnQubmFtZS5zcGxpdChcIl9cIilbMV0sIHNwZWFraW5nOiBtZXNzYWdlLmNvbnRlbnQuY29udGVudCB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjYXNlIFwiVm9pY2VSb29tQ2xvc2VkXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIC8vY29uc29sZS5sb2coXCJvcmlnaW5rZXk6XCIsIG1lc3NhZ2UuY29udGVudC5uYW1lKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICB0aGF0LmVtaXQoXCJWb2ljZVJvb21DbG9zZWRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FzZSBcIlZvaWNlUm9vbUJhY2tncm91bmRDaGFuZ2VkXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIC8vY29uc29sZS5sb2coXCJvcmlnaW5rZXk6XCIsIG1lc3NhZ2UuY29udGVudC5uYW1lKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICB0aGF0LmVtaXQoXCJWb2ljZVJvb21CYWNrZ3JvdW5kQ2hhbmdlZFwiLCBtZXNzYWdlLmNvbnRlbnQuY29udGVudClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FzZSBcIlZvaWNlUm9vbUFncmVlTWFuYWdlUGlja1wiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAvL2NvbnNvbGUubG9nKFwib3JpZ2lua2V5OlwiLCBtZXNzYWdlLmNvbnRlbnQubmFtZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgdGhhdC5lbWl0KFwiVm9pY2VSb29tQWdyZWVNYW5hZ2VQaWNrXCIsIG1lc3NhZ2UuY29udGVudC5jb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjYXNlIFwiVm9pY2VSb29tUmVqZWN0TWFuYWdlUGlja1wiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAvL2NvbnNvbGUubG9nKFwib3JpZ2lua2V5OlwiLCBtZXNzYWdlLmNvbnRlbnQubmFtZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgdGhhdC5lbWl0KFwiVm9pY2VSb29tUmVqZWN0TWFuYWdlUGlja1wiLCBtZXNzYWdlLmNvbnRlbnQuY29udGVudClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlJDOlZSTEludml0ZU1zZ1wiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChtZXNzYWdlLmNvbnRlbnQuY29udGVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJSQ0tpY2tVc2VyT3V0Um9vbUNvbnRlbnRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5lbWl0KFwiUkNLaWNrVXNlck91dFJvb21Db250ZW50XCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldElkOiBtZXNzYWdlLmNvbnRlbnQudGFyZ2V0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VySWQ6IG1lc3NhZ2UuY29udGVudC5zZW5kVXNlcklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlJDUGlja2VyVXNlclNlYXRDb250ZW50XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuZW1pdChcIlJDUGlja2VyVXNlclNlYXRDb250ZW50XCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldElkOiBtZXNzYWdlLmNvbnRlbnQudGFyZ2V0SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW5kVXNlcklkOiBtZXNzYWdlLmNvbnRlbnQuc2VuZFVzZXJJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCLooqvmirHkuIrpuqZcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5lbWl0KFwib25NZXNzYWdlUmVjZWl2ZWRcIiwgbWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICog5q2j5Zyo6ZO+5o6l55qE5LqL5Lu254q25oCBXG4gICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIFJvbmdJTUxpYi5hZGRFdmVudExpc3RlbmVyKEV2ZW50cy5DT05ORUNUSU5HLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ+ato+WcqOmTvuaOpS4uLicpXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICog6ZO+5o6l5Yiw5pyN5Yqh5Zmo5Lya6Kem5Y+R6L+Z5Liq5LqL5Lu2XG4gICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIFJvbmdJTUxpYi5hZGRFdmVudExpc3RlbmVyKEV2ZW50cy5DT05ORUNURUQsIGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn6L+e5o6l5oiQ5YqfJywgcmVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiDmiYvliqjosIPnlKggZGlzY29ubmVjdCDmlrnms5XmiJbogIXnlKjmiLfooqvouKLkuIvnur8g5Lya6Kem5Y+R6L+Z5Liq5LqL5Lu2XG4gICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIFJvbmdJTUxpYi5hZGRFdmVudExpc3RlbmVyKEV2ZW50cy5ESVNDT05ORUNULCBmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2Rpc2Nvbm5lY3QnLCByZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuZW1pdChcImNvbm5lY3Rpb0JyZWFrT2ZmXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIOmTvuaOpeWHuumXrumimOaXtu+8jOWGhemDqOi/m+ihjOmHjeaWsOmTvuaOpe+8jOS8muWHuuWPkei/meS4quS6i+S7tlxuICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICBSb25nSU1MaWIuYWRkRXZlbnRMaXN0ZW5lcihFdmVudHMuU1VTUEVORCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCfpk77mjqXkuK3mlq0sU0RLIOS8muWwneivlemHjei/nizkuJrliqHlsYLml6DpnIDlhbPlv4MnKVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL+iBiuWkqeWupEtW5pu05pawXG4gICAgICAgICAgICAgICAgICAgICAgICBSb25nSU1MaWIuYWRkRXZlbnRMaXN0ZW5lcihFdmVudHMuQ0hBVFJPT00sIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudFsnY2hhdHJvb21EZXN0cm95ZWQnXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmVtaXQoXCJjaGF0cm9vbURlc3Ryb3llZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIOiBiuWkqeWupCBLViDlrZjlgqjmlbDmja7mm7TmlrAgIF5bMC05XSokXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1cGRhdGVkRW50cmllcyA9IGV2ZW50LnVwZGF0ZWRFbnRyaWVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImt2dXBkYXRlOlwiLCBldmVudC51cGRhdGVkRW50cmllcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdXBkYXRlZEVudHJpZXMgfHwgdXBkYXRlZEVudHJpZXMubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVkRW50cmllcy5mb3JFYWNoKGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAob2JqLmtleS5zcGxpdChcIl9cIilbMF0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiUkNSb29tSW5mb0tleVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm9vbUluZm8gPSBKU09OLnBhcnNlKG9iai52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuZW1pdChcInJvb21JbmZvRGlkVXBkYXRlXCIsIHsgcm9vbUluZm86IHJvb21JbmZvIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhhdC5zZWF0SW5kZXggPiByb29tSW5mby5zZWF0Q291bnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9sb2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fLmRlZmF1bHQubG9nKFwic2VhdENvdW505LiN5a+55LiL6bqmXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5lbWl0KFwibGVhdmVTZWF0XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGF0LnNlYXRJbmZvTGlzdC5sZW5ndGggPiByb29tSW5mby5zZWF0Q291bnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuc2VhdEluZm9MaXN0Lmxlbmd0aCA9IHJvb21JbmZvLnNlYXRDb3VudDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiUkNTZWF0SW5mb1NlYXRQYXJ0UHJlZml4S2V5XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v6bqm5L2N5pON5L2cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v562b5p+l6KKr5pu05pS555qE6bqm5L2NXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyb29tSW5mbyAmJiAob2JqLmtleS5zcGxpdChcIl9cIilbMV0gPj0gcm9vbUluZm8uc2VhdENvdW50KSkgeyAvL+Wkp+S6juW9k+WJjXNlYXRDb3VudOeahOWxnuaAp+S4jeWkhOeQhlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50U2VhdEluZm8gPSB0aGF0LnNlYXRJbmZvTGlzdFtOdW1iZXIob2JqLmtleS5zcGxpdChcIl9cIilbMV0pXTsgLy/lvZPliY3puqbkvY3kv6Hmga9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFvYmoudmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47IC8vIOm6puS9jeS/oeaBr+S4jeWujOaVtOebtOaOpei/lOWbniBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld1NlYXRJbmZvID0gSlNPTi5wYXJzZShvYmoudmFsdWUpOyAvL+S8oOWFpeeahOm6puS9jeS/oeaBr1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhhdC5zZWF0SW5kZXggPT0gb2JqLmtleS5zcGxpdChcIl9cIilbMV0pIHsgLy/lvZPliY3lnKjooqvmk43kvZznmoTpuqbkvY3kuIpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBjdXJyZW50U2VhdEluZm8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGtleSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwidXNlcklkXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiAoY3VycmVudFNlYXRJbmZvLnVzZXJJZCAhPSBuZXdTZWF0SW5mby51c2VySWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICB0aGF0LmVtaXQoXCJsZWF2ZVNlYXRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm11dGVcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50U2VhdEluZm8ubXV0ZSAhPSBuZXdTZWF0SW5mby5tdXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5lbWl0KFwibXV0ZVwiLCBuZXdTZWF0SW5mby5tdXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwic3RhdHVzXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKE51bWJlcihuZXdTZWF0SW5mby5zdGF0dXMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBfY29uZmlnX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18uUkNTZWF0U3RhdHVzLlJDU2VhdFN0YXR1c0VtcHR5OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFNlYXRJbmZvLnN0YXR1cyA9PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmVtaXQoXCJsZWF2ZVNlYXRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbG9nZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXy5kZWZhdWx0LmxvZyhcIuaOpeWPl+WIsOa2iOaBr+S4i+m6plwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIF9jb25maWdfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXy5SQ1NlYXRTdGF0dXMuUkNTZWF0U3RhdHVzTG9ja2luZzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2xvZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18uZGVmYXVsdC5sb2coXCLplIHpuqbkvY3kuIvpuqZcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuZW1pdChcImxlYXZlU2VhdFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5zZWF0SW5mb0xpc3Rbb2JqLmtleS5zcGxpdChcIl9cIilbMV1dID0gSlNPTi5wYXJzZShvYmoudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmVtaXQoXCJzZWF0SW5mb0RpZFVwZGF0ZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlJDUmVxdWVzdFNlYXRQcmVmaXhLZXlcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoYXQudXNlcklkICYmIG9iai5rZXkuc3BsaXQoXCJfXCIpWzFdID09IHRoYXQudXNlcklkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqLnZhbHVlID09IFwiUkNSZXF1ZXN0U2VhdENvbnRlbnRBY2NlcHRcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuZW1pdChcIlJlcXVlc3RTZWF0QWNjZXB0ZWRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChvYmoudmFsdWUgPT0gXCJSQ1JlcXVlc3RTZWF0Q29udGVudERlbnlcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuZW1pdChcIlJlcXVlc3RTZWF0UmVqZWN0ZWRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5lbWl0KFwiUmVxdWVzdFNlYXRMaXN0Q2hhbmdlZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5lbWl0KFwiaW1SZWFkeVwiLCBSb25nSU1MaWIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8vaW3pk77mjqVcbiAgICBJTS5wcm90b3R5cGUuY29ubmVjdCA9IGZ1bmN0aW9uICh0b2tlbikge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLmNoYXRSb29tLmNvbm5lY3QodG9rZW4pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5jb2RlID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZW1pdChcImNvbm5lY3RSZWFkeVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEudXNlcklkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnVzZXJJZCA9IHJlcy5kYXRhLnVzZXJJZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnVzZXJJZCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yO1xuICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvL+WKoOWFpeaIv+mXtFxuICAgIElNLnByb3RvdHlwZS5qb2luUm9vbSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0aGF0O1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBpZiAoby5yb29tTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9yb29tTmFtZSA9IG8ucm9vbU5hbWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucm9vbUlkID0gby5yb29tSWQ7XG4gICAgICAgICAgICAgICAgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuY2hhdFJvb20uam9pbkNoYXRSb29tKG8ucm9vbUlkLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudDogLTFcbiAgICAgICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7IHJldHVybiBfX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5Yqg5YWl6IGK5aSp5a6k5oiQ5YqfXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5tZXNzYWdlVXBkYXRlKFwiUkM6VlJMUmVmcmVzaE1zZ1wiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiUkNBdWRpZW5jZUpvaW5Sb29tXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHRoYXQudXNlcklkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9sb2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fLmRlZmF1bHQubG9nKCflj5HpgIHov5vmiL/pl7Tmtojmga/miJDlip8nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9sb2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fLmRlZmF1bHQuX2Vycm9yKCflj5HpgIHov5vmiL/pl7Tmtojmga/lpLHotKU6JywgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmVtaXQoXCJqb2luUm9vbVwiLCBvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgJ+WKoOWFpeiBiuWkqeWupOaIkOWKnyddO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pOyB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLy/ojrflj5bmiL/pl7TlsZ7mgKdcbiAgICBJTS5wcm90b3R5cGUuZ2V0Um9vbUluZm8gPSBmdW5jdGlvbiAobykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZGF0YSwgaWZpbnNlYXQ7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+aIv+mXtOWxnuaApzonLCBvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmaW5zZWF0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmNoYXRSb29tLmdldEFsbENoYXRSb29tRW50cmllcyhvLnJvb21JZCkudGhlbihmdW5jdGlvbiAoZW50cmllcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygn6I635Y+W5omA5pyJ6IGK5aSp5a6k5bGe5oCn5L+h5oGvOicsIGVudHJpZXMuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBlbnRyaWVzLmRhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChKU09OLnN0cmluZ2lmeShkYXRhKSA9PSAne30nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+epuuaIv+mXtCDliJ3lp4vljJZyb29taW5mb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2V0TmV3Um9vbShvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmaW5zZWF0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy90aGlzLnJvb21JbmZvW2ldPUpTT04ucGFyc2UoaW5mb1tpXSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoa2V5ID09IFwiUkNSb29tSW5mb0tleVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnJvb21JbmZvID0gSlNPTi5wYXJzZShkYXRhW2tleV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5lbWl0KFwicm9vbUluZm9EaWRVcGRhdGVcIiwgeyByb29tSW5mbzogX3RoaXMucm9vbUluZm8gfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGtleS5zcGxpdChcIl9cIilbMF0gPT0gJ1JDU2VhdEluZm9TZWF0UGFydFByZWZpeEtleScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2RhdGFba2V5XScsIGRhdGFba2V5XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNlYXRJbmZvTGlzdFtrZXkuc3BsaXQoXCJfXCIpWzFdXSA9IEpTT04ucGFyc2UoZGF0YVtrZXldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEpTT04ucGFyc2UoZGF0YVtrZXldKVsndXNlcklkJ10gJiYgSlNPTi5wYXJzZShkYXRhW2tleV0pWyd1c2VySWQnXSA9PSBfdGhpcy51c2VySWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmaW5zZWF0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5lbWl0KFwic2VhdEluZm9EaWRVcGRhdGVcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBpZmluc2VhdF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLy9jaGFuZ2VSb29tSW5mb+WxnuaAp1xuICAgIElNLnByb3RvdHlwZS5jaGFuZ2VSb29tSW5mbyA9IGZ1bmN0aW9uIChyb29taW5mbykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgc2VhdENvdW50LCBPbGRzZWF0Q291bnQsIGtleSwgZGVmYXVsdFNlYXRJbmZvLCB2YWx1ZSwgbGlzdCwgbSwgYXJyLCBpO1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlYXRDb3VudCA9IHJvb21pbmZvLnNlYXRDb3VudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIE9sZHNlYXRDb3VudCA9IHRoaXMucm9vbUluZm8uc2VhdENvdW50O1xuICAgICAgICAgICAgICAgICAgICAgICAga2V5ID0gJ1JDUm9vbUluZm9LZXknO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFNlYXRJbmZvID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtdXRlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGVha2luZzogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBKU09OLnN0cmluZ2lmeShyb29taW5mbyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShPbGRzZWF0Q291bnQgPiBzZWF0Q291bnQpKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpc3QgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobSA9IHNlYXRDb3VudDsgbSA8IE9sZHNlYXRDb3VudDsgbSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdC5wdXNoKHRoaXMuY2hhdFJvb20uZm9yY2VSZW1vdmVDaGF0Um9vbUVudHJ5KHRoaXMucm9vbUlkLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogXCJSQ1NlYXRJbmZvU2VhdFBhcnRQcmVmaXhLZXlfXCIgKyBtLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1NlbmROb3RpZmljYXRpb246IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3JlbW92ZUNoYXRSb29tRW50cmllcycsIGxpc3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgUHJvbWlzZS5hbGwobGlzdCkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi5Yig6Zmk5bGe5oCn5oiQ5YqfXCIsIHJlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGF3YWl0IHRoaXMuY2hhdFJvb20ucmVtb3ZlQ2hhdFJvb21FbnRyaWVzKHRoaXMucm9vbUlkLCB7IGVudHJpZXM6IGxpc3QsIGlzQXV0b0RlbGV0ZTogZmFsc2UgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKFwi5Yig6Zmk5bGe5oCn5oiQ5YqfXCIsIHJlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gfSkuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3JlbW92ZUNoYXRSb29tRW50cmllcycsIGxpc3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAyO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuY2hhdFJvb20uZm9yY2VTZXRDaGF0Um9vbUVudHJ5KHRoaXMucm9vbUlkLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBrZXksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQXV0b0RlbGV0ZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNTZW5kTm90aWZpY2F0aW9uOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvbkV4dHJhOiAnQ2hhbmdlIENvdW50J1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucm9vbUluZm8gPSByb29taW5mbztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5lbWl0KFwicm9vbUluZm9EaWRVcGRhdGVcIiwgeyByb29tSW5mbzogX3RoaXMucm9vbUluZm8gfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyciA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbGV0IHNlYXRhcnIgPSBbXVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMTsgaSA8IHNlYXRDb3VudDsgaSArPSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJyLnB1c2godGhpcy5jaGF0Um9vbS5mb3JjZVNldENoYXRSb29tRW50cnkodGhpcy5yb29tSWQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBcIlJDU2VhdEluZm9TZWF0UGFydFByZWZpeEtleV9cIiArIGksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBKU09OLnN0cmluZ2lmeShfX2Fzc2lnbih7fSwgZGVmYXVsdFNlYXRJbmZvKSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQXV0b0RlbGV0ZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzU2VuZE5vdGlmaWNhdGlvbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uRXh0cmE6ICdDaGFuZ2UgQ291bnQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VhdEluZm9MaXN0W2ldID0gX19hc3NpZ24oe30sIGRlZmF1bHRTZWF0SW5mbyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBQcm9taXNlLmFsbChhcnIpLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIuiuvue9ruWxnuaAp+aIkOWKn1wiLCByZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnc2V0Q2hhdFJvb21FbnRyaWVzJywgYXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhd2FpdCB0aGlzLmNoYXRSb29tLnNldENoYXRSb29tRW50cmllcyh0aGlzLnJvb21JZCwgeyBlbnRyaWVzOiBhcnIsIGlzQXV0b0RlbGV0ZTogZmFsc2UgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKFwi6K6+572u5bGe5oCn5oiQ5YqfXCIsIHJlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gfSkuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3NldENoYXRSb29tRW50cmllcycsIGFycik7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhd2FpdCB0aGlzLmNoYXRSb29tLnNldENoYXRSb29tRW50cmllcyh0aGlzLnJvb21JZCwgeyBlbnRyaWVzOiBhcnIsIGlzQXV0b0RlbGV0ZTogZmFsc2UgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgY29uc29sZS5sb2coXCLorr7nva7lsZ7mgKfmiJDlip9cIiwgcmVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIH0pLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhlcnJvcilcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlYXRJbmZvTGlzdC5sZW5ndGggPSBzZWF0Q291bnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLnNlYXRJbmZvTGlzdCA9IHNlYXRhcnJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnY2hhbmdlUm9vbUluZm8nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvL+iuvue9ruWIsFJvb21MaWLlsZ7mgKdcbiAgICBJTS5wcm90b3R5cGUuc2V0TmV3Um9vbSA9IGZ1bmN0aW9uIChwYXJtKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBzZWF0Q291bnQsIGtleSwgZGVmYXVsdFJvb21JbmZvLCB2YWx1ZSwgZGVmYXVsdFNlYXRJbmZvLCBhcnIsIHNlYXRhcnIsIGk7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzZXROZXdSb29tJywgcGFybSk7XG4gICAgICAgICAgICAgICAgc2VhdENvdW50ID0gOTtcbiAgICAgICAgICAgICAgICBpZiAocGFybSAmJiBwYXJtLnNlYXRDb3VudCkge1xuICAgICAgICAgICAgICAgICAgICBzZWF0Q291bnQgPSBwYXJtLnNlYXRDb3VudDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfliqDlhaXnmoTmiL/pl7TkuI3lrZjlnKgnKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBrZXkgPSAnUkNSb29tSW5mb0tleSc7XG4gICAgICAgICAgICAgICAgZGVmYXVsdFJvb21JbmZvID0ge1xuICAgICAgICAgICAgICAgICAgICBpc0ZyZWVFbnRlclNlYXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBpc0xvY2tBbGw6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBpc011dGVBbGw6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICByb29tTmFtZTogdGhpcy5fcm9vbU5hbWUgKyBcIlwiLFxuICAgICAgICAgICAgICAgICAgICBzZWF0Q291bnQ6IHNlYXRDb3VudCAvL+m6puS9jeaVsOmHj1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBKU09OLnN0cmluZ2lmeShkZWZhdWx0Um9vbUluZm8pO1xuICAgICAgICAgICAgICAgIHRoaXMuY2hhdFJvb20uZm9yY2VTZXRDaGF0Um9vbUVudHJ5KHRoaXMucm9vbUlkLCB7XG4gICAgICAgICAgICAgICAgICAgIGtleToga2V5LFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIGlzQXV0b0RlbGV0ZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGlzU2VuZE5vdGlmaWNhdGlvbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uRXh0cmE6ICdDaGFuZ2UgQ291bnQnXG4gICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnJvb21JbmZvID0gZGVmYXVsdFJvb21JbmZvO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5lbWl0KFwicm9vbUluZm9EaWRVcGRhdGVcIiwgeyByb29tSW5mbzogX3RoaXMucm9vbUluZm8gfSk7XG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0U2VhdEluZm8gPSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogMCxcbiAgICAgICAgICAgICAgICAgICAgbXV0ZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIHNwZWFraW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGFyciA9IFtdO1xuICAgICAgICAgICAgICAgIHNlYXRhcnIgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgc2VhdENvdW50OyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgYXJyLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBcIlJDU2VhdEluZm9TZWF0UGFydFByZWZpeEtleV9cIiArIGksXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogSlNPTi5zdHJpbmdpZnkoX19hc3NpZ24oe30sIGRlZmF1bHRTZWF0SW5mbykpLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNBdXRvRGVsZXRlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzU2VuZE5vdGlmaWNhdGlvbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvbkV4dHJhOiAnQ2hhbmdlIENvdW50J1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc2VhdGFyci5wdXNoKF9fYXNzaWduKHt9LCBkZWZhdWx0U2VhdEluZm8pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5jaGF0Um9vbS5zZXRDaGF0Um9vbUVudHJpZXMocGFybS5yb29tSWQsIHsgZW50cmllczogYXJyLCBpc0F1dG9EZWxldGU6IGZhbHNlIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIuiuvue9ruWxnuaAp+aIkOWKn1wiKTtcbiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VhdEluZm9MaXN0ID0gc2VhdGFycjtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ3NldE5ld1Jvb20nKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvL+abtOaWsOa2iOaBr1xuICAgIElNLnByb3RvdHlwZS5tZXNzYWdlVXBkYXRlID0gZnVuY3Rpb24gKG1lc3NhZ2VUeXBlLCBjb250ZW50KSB7XG4gICAgICAgIHZhciBQZXJzb25NZXNzYWdlID0gdGhpcy5jaGF0Um9vbS5yZWdpc3Rlck1lc3NhZ2VUeXBlKG1lc3NhZ2VUeXBlLCBmYWxzZSwgZmFsc2UsIFtdKTtcbiAgICAgICAgdmFyIG1lc3NhZ2UgPSBuZXcgUGVyc29uTWVzc2FnZShjb250ZW50KTtcbiAgICAgICAgdmFyIGFyciA9IFtcbiAgICAgICAgICAgIHRoaXMuY2hhdFJvb21cbiAgICAgICAgICAgICAgICAuc2VuZE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgIGNvbnZlcnNhdGlvblR5cGU6IHRoaXMuY2hhdFJvb20uQ29udmVyc2F0aW9uVHlwZS5DSEFUUk9PTSxcbiAgICAgICAgICAgICAgICB0YXJnZXRJZDogdGhpcy5yb29tSWRcbiAgICAgICAgICAgIH0sIG1lc3NhZ2UpLFxuICAgICAgICAgICAgLy8gdGhpcy5jaGF0Um9vbVxuICAgICAgICAgICAgLy8gICAgIC5pbnNlcnRNZXNzYWdlKFxuICAgICAgICAgICAgLy8gICAgICAgICB7XG4gICAgICAgICAgICAvLyAgICAgICAgICAgICBjb252ZXJzYXRpb25UeXBlOiB0aGlzLmNoYXRSb29tLkNvbnZlcnNhdGlvblR5cGUuQ0hBVFJPT00sXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICB0YXJnZXRJZDogdGhpcy5yb29tSWRcbiAgICAgICAgICAgIC8vICAgICAgICAgfSxcbiAgICAgICAgICAgIC8vICAgICAgICAge1xuICAgICAgICAgICAgLy8gICAgICAgICAgICAgc2VuZGVyVXNlcklkOiB0aGlzLnVzZXJJZCxcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIG1lc3NhZ2VUeXBlOiBtZXNzYWdlVHlwZSxcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIGNvbnRlbnQ6IGNvbnRlbnQsXG4gICAgICAgICAgICAvLyAgICAgICAgIH0pXG4gICAgICAgIF07XG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbChhcnIpO1xuICAgIH07XG4gICAgLy9pbeemu+W8gOaIv+mXtFxuICAgIElNLnByb3RvdHlwZS5sZWF2ZVJvb20gPSBmdW5jdGlvbiAocm9vbWlkKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuY2hhdFJvb20ucXVpdENoYXRSb29tKHJvb21pZCkudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL+mAgOWHuuaXtua4heeQhuaIv+mXtOaVsOaNrlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5jb2RlID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucm9vbUluZm8gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNlYXRJbmZvTGlzdC5sZW5ndGggPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCfpgIDlh7rogYrlpKnlrqQgJyArIHJvb21pZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5tZXNzYWdlVXBkYXRlKFwiUkM6VlJMUmVmcmVzaE1zZ1wiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiUkNBdWRpZW5jZUxlYXZlUm9vbVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBfdGhpcy51c2VySWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8v6K6+572u6bqm5L2N5L+h5oGvXG4gICAgSU0ucHJvdG90eXBlLnNlYXRJbmZvVXBkYXRlID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coa2V5KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5jaGF0Um9vbS5mb3JjZVNldENoYXRSb29tRW50cnkodGhpcy5yb29tSWQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleToga2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IEpTT04uc3RyaW5naWZ5KHZhbHVlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvbkV4dHJhOiAnZXh0cmEnLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNBdXRvRGVsZXRlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzU2VuZE5vdGlmaWNhdGlvbjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICforr7nva7ogYrlpKnlrqTlsZ7mgKfmiJDlip8hJztcbiAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICforr7nva7ogYrlpKnlrqTlsZ7mgKflpLHotKU6JyArIGVycjtcbiAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLy/mjpLpuqbmtojmga/orr7nva5cbiAgICBJTS5wcm90b3R5cGUuUmVxdWVzdHNlYXRJbmZvVXBkYXRlID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coa2V5KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5jaGF0Um9vbS5mb3JjZVNldENoYXRSb29tRW50cnkodGhpcy5yb29tSWQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleToga2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNBdXRvRGVsZXRlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzU2VuZE5vdGlmaWNhdGlvbjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICfmjpLpuqbmk43kvZzmiJDlip8hJztcbiAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICfmjpLpuqbmk43kvZzlpLHotKU6JyArIGVycjtcbiAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLy/liKDpmaTpuqbkvY3kv6Hmga9cbiAgICBJTS5wcm90b3R5cGUuc2VhdEluZm9SZW1vdmUgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5jaGF0Um9vbS5mb3JjZVJlbW92ZUNoYXRSb29tRW50cnkodGhpcy5yb29tSWQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleToga2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNTZW5kTm90aWZpY2F0aW9uOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgcmV0dXJuIElNO1xufShfc3RydWN0dXJlX21vZHVsZXNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5kZWZhdWx0KSk7XG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIGNvbnN0IF9fV0VCUEFDS19ERUZBVUxUX0VYUE9SVF9fID0gKElNKTtcblxuXG4vLyMgc291cmNlVVJMPXdlYnBhY2s6Ly9Acm9uZ2Nsb3VkL3Jjdm9pY2Vyb29tbGliLXYxLy4vc3JjL21vZHVsZXMvaW0vaW5kZXgudHM/Iik7LyoqKi99LC8qKiovIi4vc3JjL21vZHVsZXMvcnRjL2luZGV4LnRzIjovKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcCiAgISoqKiAuL3NyYy9tb2R1bGVzL3J0Yy9pbmRleC50cyAqKiohCiAgXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovIC8qKiovZnVuY3Rpb24gc3JjTW9kdWxlc1J0Y0luZGV4VHMoX191bnVzZWRfd2VicGFja19tb2R1bGUsX193ZWJwYWNrX2V4cG9ydHNfXyxfX3dlYnBhY2tfcmVxdWlyZV9fKXtldmFsKCJfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywge1xuLyogaGFybW9ueSBleHBvcnQgKi8gICBcImRlZmF1bHRcIjogKCkgPT4gKF9fV0VCUEFDS19ERUZBVUxUX0VYUE9SVF9fKVxuLyogaGFybW9ueSBleHBvcnQgKi8gfSk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX3N0cnVjdHVyZV9tb2R1bGVzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi8uLi9zdHJ1Y3R1cmUvbW9kdWxlcyAqLyBcIi4vc3JjL3N0cnVjdHVyZS9tb2R1bGVzLnRzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yb25nY2xvdWRfcGx1Z2luX3J0Y19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgQHJvbmdjbG91ZC9wbHVnaW4tcnRjICovIFwiLi9ub2RlX21vZHVsZXMvQHJvbmdjbG91ZC9wbHVnaW4tcnRjL2Rpc3QvaW5kZXguZXNtLmpzXCIpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yb25nY2xvdWRfZW5naW5lX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISBAcm9uZ2Nsb3VkL2VuZ2luZSAqLyBcIi4vbm9kZV9tb2R1bGVzL0Byb25nY2xvdWQvZW5naW5lL2Rpc3QvaW5kZXguZXNtLmpzXCIpO1xudmFyIF9fZXh0ZW5kcyA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX19hd2FpdGVyID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG52YXIgX19nZW5lcmF0b3IgPSAodW5kZWZpbmVkICYmIHVuZGVmaW5lZC5fX2dlbmVyYXRvcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIGJvZHkpIHtcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xuICAgICAgICB3aGlsZSAoXykgdHJ5IHtcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xuICAgIH1cbn07XG52YXIgX19zcHJlYWRBcnJheSA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fc3ByZWFkQXJyYXkpIHx8IGZ1bmN0aW9uICh0bywgZnJvbSwgcGFjaykge1xuICAgIGlmIChwYWNrIHx8IGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIGZvciAodmFyIGkgPSAwLCBsID0gZnJvbS5sZW5ndGgsIGFyOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIGlmIChhciB8fCAhKGkgaW4gZnJvbSkpIHtcbiAgICAgICAgICAgIGlmICghYXIpIGFyID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSwgMCwgaSk7XG4gICAgICAgICAgICBhcltpXSA9IGZyb21baV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRvLmNvbmNhdChhciB8fCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tKSk7XG59O1xuXG4vLyBpbXBvcnQgeyBpbnN0YWxsZXIsIFJDUlRDQ29kZSwgUkNMaXZpbmdUeXBlIH0gZnJvbSAnQHJvbmdjbG91ZC9wbHVnaW4tcnRjJ1xuXG5cbnZhciBSVEMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFJUQywgX3N1cGVyKTtcbiAgICAvLyByb29tVHlwZTogc3RyaW5nO1xuICAgIC8vIHZpZGVvTm9kZTogYW55O1xuICAgIGZ1bmN0aW9uIFJUQygpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuc3RhdGVzID0gMDsgLy8w5Yid5aeL5YyW5pyq5a6M5oiQIDHlsLHnu6ogMuato+WcqOWIneWni+WMliAgOea1j+iniOWZqOS4jeaUr+aMgVxuICAgICAgICBfdGhpcy5pc0FuY2hvciA9IGZhbHNlOyAvL+i6q+S7veagh+ivhiDmmK/lkKbkuLvmkq1cbiAgICAgICAgX3RoaXMuYXVkaW9UcmFjayA9IG51bGw7XG4gICAgICAgIF90aGlzLmlzRGlzYWJsZSA9IGZhbHNlO1xuICAgICAgICBfdGhpcy5pc011dGVPdGhlciA9IGZhbHNlO1xuICAgICAgICBfdGhpcy5pc011dGVPd25lciA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIC8vIHRoaXMuaW5pdChpdGVtKTtcbiAgICB9XG4gICAgUlRDLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgLyrliJ3lp4vljJblj4LmlbDor7flj4LogIPkuIvmlrnlj4LmlbDor7TmmI4qL1xuICAgICAgICB2YXIgaW0gPSBpdGVtLmltO1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnaXRlbS5ydGNMaWInLCBpdGVtLnJ0Y0xpYik7XG4gICAgICAgIGlmIChpdGVtLnJ0Y0xpYikge1xuICAgICAgICAgICAgdGhpcy5SVENMaWIgPSBpdGVtLnJ0Y0xpYjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuUlRDTGliID0gX3JvbmdjbG91ZF9wbHVnaW5fcnRjX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX187XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJ0Y0NsaWVudCA9IGltLmluc3RhbGxQbHVnaW4odGhpcy5SVENMaWIuaW5zdGFsbGVyLCB7fSk7XG4gICAgICAgIHRoaXMuYm9keSA9IHJ0Y0NsaWVudDtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3J0Y+WIneWni+WMluWujOaIkCcsIHJ0Y0NsaWVudCk7XG4gICAgICAgIGlmICghaXRlbS5ydGNMaWIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCflhoXpg6jlkIRTREvniYjmnKwnLCBfcm9uZ2Nsb3VkX2VuZ2luZV9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fLlZlcnNpb25NYW5hZ2UuZ2V0SW5mbygpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVtaXQoXCJyZWFkeVwiKTtcbiAgICB9O1xuICAgIFJUQy5wcm90b3R5cGUuam9pblJvb20gPSBmdW5jdGlvbiAocm9vbWlkKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIuWKoOWFpXJ0Y3Jvb21cIiwgcm9vbWlkKTtcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIuaIkeaYr+S4jeaYr+S4u+aSrVwiLCB0aGlzLmlzQW5jaG9yKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0FuY2hvcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmpvaW5MaXZpbmdSb29tQXNBbmNob3Iocm9vbWlkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuam9pbkxpdmluZ1Jvb21Bc0F1ZGllbmNlKHJvb21pZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8v5Li75pKt5Yqg5YWlcnRjcm9vbVxuICAgIFJUQy5wcm90b3R5cGUuam9pbkxpdmluZ1Jvb21Bc0FuY2hvciA9IGZ1bmN0aW9uIChyb29taWQpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF9hLCByb29tLCBSVENUcmFja3MsIE1DVVRyYWNrcywgQ0ROVXJpcywgdXNlcklkcywgY29kZSwgdGhhdCwgZ2V0VHJhY2ssIHB1Ymxpc2hUcmFjaywgcmVtb3RlVHJhY2tzT2JqLCBvYmo7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9iKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYi5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuYm9keS5qb2luTGl2aW5nUm9vbShyb29taWQsIHRoaXMuUlRDTGliLlJDTGl2aW5nVHlwZS5BVURJTylcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOiLpeWKoOWFpeWksei0pe+8jOWImSByb29t44CBdXNlcklkc+OAgXRyYWNrcyDlgLzkuLogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhjb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuUlRDTGliLlJDUlRDQ29kZS5TVUNDRVNTKTtcbiAgICAgICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2EgPSBfYi5zZW50KCksIHJvb20gPSBfYS5yb29tLCBSVENUcmFja3MgPSBfYS5SVENUcmFja3MsIE1DVVRyYWNrcyA9IF9hLk1DVVRyYWNrcywgQ0ROVXJpcyA9IF9hLkNETlVyaXMsIHVzZXJJZHMgPSBfYS51c2VySWRzLCBjb2RlID0gX2EuY29kZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOiLpeWKoOWFpeWksei0pe+8jOWImSByb29t44CBdXNlcklkc+OAgXRyYWNrcyDlgLzkuLogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhjb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuUlRDTGliLlJDUlRDQ29kZS5TVUNDRVNTKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb2RlICE9PSB0aGlzLlJUQ0xpYi5SQ1JUQ0NvZGUuU1VDQ0VTUykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMucnRjVHJhY2tzID0gUlRDVHJhY2tzXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBsZXQgb2JqZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiAoIXRoaXMuaXNNdXRlT3RoZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICBvYmplY3QgPSByb29tLnN1YnNjcmliZShSVENUcmFja3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICBvYmplY3QgPSByb29tLnVuc3Vic2NyaWJlKFJUQ1RyYWNrcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJvb20gPSByb29tO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDms6jlhozmiL/pl7Tkuovku7bnm5HlkKzlmajvvIzph43lpI3ms6jlhozml7bvvIzku4XmnIDlkI7kuIDmrKHms6jlhozmnInmlYhcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvb20ucmVnaXN0ZXJSb29tRXZlbnRMaXN0ZW5lcih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25SVENQZWVyQ29ubmVjdGlvbkNsb3NlQnlFeGNlcHRpb246IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5lbWl0KCdvblJUQ1BlZXJDb25uZWN0aW9uQ2xvc2VCeUV4Y2VwdGlvbicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICog5b2T5pys56uv6KKr5YmU5Ye65oi/6Ze0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQGRlc2NyaXB0aW9uIOiiq+i4ouWHuuaIv+mXtOWPr+iDveaYr+eUseS6juacjeWKoeerr+i2heWHuuS4gOWumuaXtumXtOacquiDveaUtuWIsCBydGNQaW5nIOa2iOaBr++8jOaJgOS7peiupOS4uuW3seaWueemu+e6v+OAglxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIOWPpuS4gOenjeWPr+iDveaYr+W3seaWuSBydGNQaW5nIOWksei0peasoeaVsOi2heWHuuS4iumZkO+8jOaVheiAjOS4u+WKqOaWree6v1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSBieVNlcnZlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIOW9k+WAvOS4uiBmYWxzZSDml7bvvIzor7TmmI7mnKznq68gcnRjUGluZyDotoXml7ZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiDlvZPlgLzkuLogdHJ1ZSDml7bvvIzor7TmmI7mnKznq6/mlLbliLDooqvouKLlh7rmiL/pl7TpgJrnn6VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbktpY2tPZmY6IGZ1bmN0aW9uIChieVNlcnZlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICog5o6l5pS25Yiw5oi/6Ze05L+h5Luk5pe25Zue6LCD77yM55So5oi35Y+v6YCa6L+H5oi/6Ze05a6e5L6L55qEIGBtZXNzYWdlVXBkYXRlKG5hbWUsIGNvbnRlbnQpYCDmjqXlj6Plj5HpgIHkv6Hku6RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0gbmFtZSDkv6Hku6TlkI1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0gY29udGVudCDkv6Hku6TlhoXlrrlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0gc2VuZGVyVXNlcklkIOWPkemAgeiAhSBJZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSBtZXNzYWdlVUlkIOa2iOaBr+WUr+S4gOagh+ivhlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uTWVzc2FnZVJlY2VpdmU6IGZ1bmN0aW9uIChuYW1lLCBjb250ZW50LCBzZW5kZXJVc2VySWQsIG1lc3NhZ2VVSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJlZWVlZWV2ZW50OiDkuLvmkq3miL/pl7TmlLbliLDmtojmga9cIiwgbmFtZSwgY29udGVudCwgc2VuZGVyVXNlcklkLCBtZXNzYWdlVUlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIOebkeWQrOaIv+mXtOWxnuaAp+WPmOabtOmAmuefpVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSBuYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIGNvbnRlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblJvb21BdHRyaWJ1dGVDaGFuZ2U6IGZ1bmN0aW9uIChuYW1lLCBjb250ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiZWVlZWVldmVudDog5Li75pKt5oi/6Ze05bGe5oCn5Y+Y5pu0XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICog5oi/6Ze055So5oi356aB55SoL+WQr+eUqOmfs+mikVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSBhdWRpb1RyYWNrIFJDUmVtb3RlQXVkaW9UcmFjayDnsbvlrp7kvotcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkF1ZGlvTXV0ZUNoYW5nZTogZnVuY3Rpb24gKGF1ZGlvVHJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcImVlZWVlZXZlbnQ6IOS4u+aSreaIv+mXtCDpn7PpopEg6Z2Z6Z+zXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICog5oi/6Ze055So5oi356aB55SoL+WQr+eUqOinhumikVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB2aWRlb1RyYWNrIFJDUmVtb3RlVmlkZW9UcmFjayDnsbvlrp7kvovlr7nosaFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblZpZGVvTXV0ZUNoYW5nZTogZnVuY3Rpb24gKHZpZGVvVHJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcImVlZWVlZXZlbnQ6IOS4u+aSreaIv+mXtCDop4bpopEg6Z2Z6Z+zXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICog5oi/6Ze05YaF55So5oi35Y+R5biD6LWE5rqQXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHRyYWNrcyDmlrDlj5HluIPnmoTpn7PovajkuI7op4bovajmlbDmja7liJfooajvvIzljIXlkKvmlrDlj5HluIPnmoQgUkNSZW1vdGVBdWRpb1RyYWNrIOS4jiBSQ1JlbW90ZVZpZGVvVHJhY2sg5a6e5L6LXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25UcmFja1B1Ymxpc2g6IGZ1bmN0aW9uICh0cmFja3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9iajtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDmjInkuJrliqHpnIDmsYLpgInmi6npnIDopoHorqLpmIXotYTmupDvvIxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LnJ0Y1RyYWNrcyA9IHRyYWNrcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoYXQuaXNNdXRlT3RoZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqID0gcm9vbS5zdWJzY3JpYmUodHJhY2tzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iaiA9IHJvb20udW5zdWJzY3JpYmUodHJhY2tzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICog5oi/6Ze055So5oi35Y+W5raI5Y+R5biD6LWE5rqQXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHRyYWNrcyDooqvlj5bmtojlj5HluIPnmoTpn7PovajkuI7op4bovajmlbDmja7liJfooahcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAZGVzY3JpcHRpb24g5b2T6LWE5rqQ6KKr5Y+W5raI5Y+R5biD5pe277yMU0RLIOWGhemDqOS8muWPlua2iOWvueebuOWFs+i1hOa6kOeahOiuoumYhe+8jOS4muWKoeWxguS7hemcgOWkhOeQhiBVSSDkuJrliqFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblRyYWNrVW5wdWJsaXNoOiBmdW5jdGlvbiAodHJhY2tzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJlZWVlZWV2ZW50OiDkuLvmkq3miL/pl7Tlj5bmtojlj5HluINcIiwgdHJhY2tzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICog5oi/6Ze05YaF5Li75pKt6LWE5rqQ5Y+R5biDXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHRyYWNrIFJDUmVtb3RlVHJhY2sg57G75a6e5L6LXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICogKiDop6blj5Hml7bmnLo6IOS4u+aSreWPkeW4g+i1hOa6kOWQjlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQW5jaG9yVHJhY2tQdWJsaXNoOiBmdW5jdGlvbiAodHJhY2tzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoYXQucnRjVHJhY2tzID0gdHJhY2tzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxldCBvYmpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgKCF0aGF0LmlzTXV0ZU90aGVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICBvYmogPSByb29tLnN1YnNjcmliZSh0cmFja3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgb2JqID0gcm9vbS51bnN1YnNjcmliZSh0cmFja3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgKiDmiL/pl7TlhoXkuLvmkq3otYTmupDlj5bmtojlj5HluINcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHRyYWNrIFJDUmVtb3RlVHJhY2sg57G75a6e5L6LXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAqICog6Kem5Y+R5pe25py6OiDkuLvmkq3lj5bmtojlj5HluIPotYTmupDlkI5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25BbmNob3JUcmFja1VucHVibGlzaDogZnVuY3Rpb24gKHRyYWNrcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnb25BbmNob3JUcmFja1VucHVibGlzaCcsIHRyYWNrcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiDorqLpmIXnmoTpn7Pop4bpopHmtYHpgJrpgZPlt7Llu7rnq4ssIHRyYWNrIOW3suWPr+S7pei/m+ihjOaSreaUvlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB0cmFjayBSQ1JlbW90ZVRyYWNrIOexu+WunuS+i1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uVHJhY2tSZWFkeTogZnVuY3Rpb24gKHRyYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuYXVkaW9UcmFjayA9IHRyYWNrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHJhY2suaXNBdWRpb1RyYWNrKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOmfs+i9qOS4jemcgOimgeS8oOmAkuaSreaUvuaOp+S7tlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2sucGxheSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g6KeG6L2o6ZyA6KaB5LiA5LiqIHZpZGVvIOagh+etvuaJjeWPr+i/m+ihjOaSreaUvlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZWxlbWVudClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRyYWNrLnBsYXkoZWxlbWVudClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICog5Lq65ZGY5Yqg5YWlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHVzZXJJZHMg5Yqg5YWl55qE5Lq65ZGYIGlkIOWIl+ihqFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uVXNlckpvaW46IGZ1bmN0aW9uICh1c2VySWRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJlZWVlZWV2ZW50OiDkuLvmkq3miL/pl7Qg55So5oi35Yqg5YWlXCIsIHVzZXJJZHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICog5Lq65ZGY6YCA5Ye6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHVzZXJJZHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblVzZXJMZWF2ZTogZnVuY3Rpb24gKHVzZXJJZHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcImVlZWVlZXZlbnQ6IOS4u+aSreaIv+mXtCDnlKjmiLfnprvlvIBcIiwgdXNlcklkcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5ib2R5LmNyZWF0ZU1pY3JvcGhvbmVBdWRpb1RyYWNrKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwidHJhY2tcIiwgZ2V0VHJhY2sudHJhY2spXG4gICAgICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBnZXRUcmFjayA9IF9iLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJ0cmFja1wiLCBnZXRUcmFjay50cmFjaylcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHJhY2tzID0gZ2V0VHJhY2sudHJhY2s7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISh0aGlzLmlzRGlzYWJsZSB8fCB0aGlzLmlzTXV0ZU93bmVyKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByb29tLnVucHVibGlzaChbZ2V0VHJhY2sudHJhY2tdKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHB1Ymxpc2hUcmFjayA9IF9iLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDZdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6IHJldHVybiBbNCAvKnlpZWxkKi8sIHJvb20ucHVibGlzaChbZ2V0VHJhY2sudHJhY2tdKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHB1Ymxpc2hUcmFjayA9IF9iLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLmxhYmVsID0gNjtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g6Iul6LWE5rqQ5Y+R5biD5aSx6LSlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHVibGlzaFRyYWNrLmNvZGUgIT09IHRoaXMuUlRDTGliLlJDUlRDQ29kZS5TVUNDRVNTKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+i1hOa6kOWPkeW4g+Wksei0pTonLCBwdWJsaXNoVHJhY2suY29kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIui1hOa6kCDlj5HluIPmiJDlip9cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc3QgaGFuZGxlciA9IChhdWRpb0xldmVsUmVwb3J0TGlzdDogeyB0cmFjaywgYXVkaW9MZXZlbDogbnVtYmVyIH1bXSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAvLyBsZXQgbGV2ZWw6IG51bWJlciA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIGZvciAodmFyIGkgaW4gYXVkaW9MZXZlbFJlcG9ydExpc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIC8vIGxldmVsID0gYXVkaW9MZXZlbFJlcG9ydExpc3RbaV0uYXVkaW9MZXZlbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgdGhpcy5lbWl0KFwiYXVkaW9DaGVuZ2VcIiwgYXVkaW9MZXZlbFJlcG9ydExpc3RbaV0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAvLyBjb25zb2xlLmxvZyhcImF1ZGlvcmVwb3J0KysrKysrKysrKysrKysrKzpcIiwgYXVkaW9MZXZlbFJlcG9ydExpc3RbaV0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcm9vbS5vbkF1ZGlvTGV2ZWxDaGFuZ2UoaGFuZGxlciwgMTAwMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIui1hOa6kCDlj5HluIMg5oiQ5YqfXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcm9vbS5nZXRSZW1vdGVUcmFja3MoKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW90ZVRyYWNrc09iaiA9IF9iLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucnRjVHJhY2tzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXJlbW90ZVRyYWNrc09iai5sZW5ndGgpIHJldHVybiBbMyAvKmJyZWFrKi8sIDExXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc011dGVPdGhlcikgcmV0dXJuIFszIC8qYnJlYWsqLywgOV07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCByb29tLnVuc3Vic2NyaWJlKHJlbW90ZVRyYWNrc09iaildO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgICAgICAgICBvYmogPSBfYi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCAxMV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgOTogcmV0dXJuIFs0IC8qeWllbGQqLywgcm9vbS5zdWJzY3JpYmUocmVtb3RlVHJhY2tzT2JqKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTA6XG4gICAgICAgICAgICAgICAgICAgICAgICBvYmogPSBfYi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYi5sYWJlbCA9IDExO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDExOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KFwiam9pblJvb21cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLy/op4LkvJfliqDlhaVydGNyb29tXG4gICAgUlRDLnByb3RvdHlwZS5qb2luTGl2aW5nUm9vbUFzQXVkaWVuY2UgPSBmdW5jdGlvbiAocm9vbWlkKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfYSwgcm9vbSwgUlRDVHJhY2tzLCBNQ1VUcmFja3MsIENETlVyaXMsIHVzZXJJZHMsIGNvZGUsIG9iaiwgdGhhdDtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2IpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9iLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi6KeC5LyX5Yqg5YWlcnRjcm9vbVwiLCByb29taWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5ib2R5LmpvaW5MaXZpbmdSb29tQXNBdWRpZW5jZShyb29taWQsIHRoaXMuUlRDTGliLlJDTGl2aW5nVHlwZS5BVURJTylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDoi6XliqDlhaXlpLHotKXvvIzliJkgcm9vbSDlgLzkuLogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYSA9IF9iLnNlbnQoKSwgcm9vbSA9IF9hLnJvb20sIFJUQ1RyYWNrcyA9IF9hLlJUQ1RyYWNrcywgTUNVVHJhY2tzID0gX2EuTUNVVHJhY2tzLCBDRE5VcmlzID0gX2EuQ0ROVXJpcywgdXNlcklkcyA9IF9hLnVzZXJJZHMsIGNvZGUgPSBfYS5jb2RlO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8g6Iul5Yqg5YWl5aSx6LSl77yM5YiZIHJvb20g5YC85Li6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvZGUgIT09IHRoaXMuUlRDTGliLlJDUlRDQ29kZS5TVUNDRVNTKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2pvaW4gcm9vbSBhcyBhdWRpZW5jZSBmYWlsZWQ6JywgY29kZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJvb20gPSByb29tO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFja3MgPSBNQ1VUcmFja3M7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zdCBNQ1VUcmFja3MgPSByb29tLmdldFJlbW90ZU1DVVRyYWNrcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE1DVVRyYWNrcy5sZW5ndGggIT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iaiA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJ0Y1RyYWNrcyA9IE1DVVRyYWNrcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc011dGVPdGhlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmogPSByb29tLnVuc3Vic2NyaWJlKE1DVVRyYWNrcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmogPSByb29tLnN1YnNjcmliZShNQ1VUcmFja3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgICAgICAgICAgICAgcm9vbS5yZWdpc3RlclJvb21FdmVudExpc3RlbmVyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiDkuLvmkq3liqDlhaVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0gdXNlcklkcyDliqDlhaXnmoTkuLvmkq0gaWQg5YiX6KGoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25BbmNob3JKb2luOiBmdW5jdGlvbiAodXNlcklkcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwi6KeC5LyX5oi/6Ze055uR5ZCsXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwi5Li75pKt5Yqg5YWlXCIsIHVzZXJJZHMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiDkuLvmkq3nprvlvIBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0gdXNlcklkcyDnprvlvIDnmoTkuLvmkq0gaWQg5YiX6KGoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25BbmNob3JMZWF2ZTogZnVuY3Rpb24gKHVzZXJJZHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICog5oi/6Ze05YaF55u05pKt5ZCI5rWB6LWE5rqQ5Y+R5biDXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQHBhcmFtIHRyYWNrIFJDUmVtb3RlVHJhY2sg57G75a6e5L6LXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICogKiDmiL/pl7Tnsbvlnovku6XnrKzkuIDkuKrliqDlhaXmiL/pl7TnlKjmiLforr7nva7nmoTnm7Tmkq3nsbvlnovkuLrlh4ZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiAqIOaIv+mXtOebtOaSreexu+Wei+S4uiBSQ0xpdmluZ1R5cGUuQVVESU9fVklERU8g77yMdHJhY2tzIOWMheWQqyBSQ1JlbW90ZUF1ZGlvVHJhY2sg5LiOIFJDUmVtb3RlVmlkZW9UcmFjayDlrp7kvotcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiAqIOebtOaSreexu+Wei+S4uiBSQ0xpdmluZ1R5cGUuQVVESU8g77yMIHRyYWNrcyDku4XljIXlkKsgUkNSZW1vdGVBdWRpb1RyYWNrIOWunuS+i1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uVHJhY2tQdWJsaXNoOiBmdW5jdGlvbiAodHJhY2tzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQucnRjVHJhY2tzID0gdHJhY2tzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2JqO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhhdC5pc011dGVPdGhlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqID0gcm9vbS51bnN1YnNjcmliZSh0cmFja3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqID0gcm9vbS5zdWJzY3JpYmUodHJhY2tzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiDmiL/pl7TlhoXnm7Tmkq3lkIjmtYHotYTmupDlj5bmtojlj5HluINcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0gdHJhY2sgUkNSZW1vdGVUcmFjayDnsbvlrp7kvotcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiAqIOinpuWPkeaXtuacujog5YWo6YOo5Li75pKt6YCA5Ye65oi/6Ze077yI5Zug6LWE5rqQ5Li65aSa5Liq5Li75pKt5Y+R5biD55qE5ZCI5rWB6LWE5rqQ77yM5Y2V5Liq5Li75pKt5Y+W5raI5Y+R5biD5LiN5Lya6Kem5Y+R77yJXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25UcmFja1VucHVibGlzaDogZnVuY3Rpb24gKHRyYWNrcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25UcmFja1JlYWR5OiBmdW5jdGlvbiAodHJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5hdWRpb1RyYWNrID0gdHJhY2s7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOiuoumYheeahOmfs+inhumikei9qOmBk+W3sui/nuaOpe+8jOWPr+S7peagueaNruS4muWKoemcgOaxgumAieaLqeaAp+aSreaUvlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHJhY2suaXNBdWRpb1RyYWNrKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOmfs+mikeaSreaUvuaXoOmcgOS8oOmAkue7hOS7tlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2sucGxheSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5q2k5aSE55qEIHZpZGVvTm9kZSDkuLogPHZpZGVvPiDmoIfnrb7lhYPntKDlrp7kvotcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdHJhY2sucGxheSh2aWRlb05vZGUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnN0IGhhbmRsZXIgPSAoYXVkaW9MZXZlbFJlcG9ydExpc3Q6IHsgdHJhY2ssIGF1ZGlvTGV2ZWw6IG51bWJlciB9W10pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAvLyBsZXQgbGV2ZWw6IG51bWJlciA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgZm9yICh2YXIgaSBpbiBhdWRpb0xldmVsUmVwb3J0TGlzdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAvLyBsZXZlbCA9IGF1ZGlvTGV2ZWxSZXBvcnRMaXN0W2ldLmF1ZGlvTGV2ZWxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgdGhpcy5lbWl0KFwiYXVkaW9DaGVuZ2VcIiwgYXVkaW9MZXZlbFJlcG9ydExpc3RbaV0pXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcm9vbS5vbkF1ZGlvTGV2ZWxDaGFuZ2UoaGFuZGxlciwgMTAwMClcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdChcImpvaW5Sb29tXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8v56a75byAcnRj5oi/6Ze0XG4gICAgUlRDLnByb3RvdHlwZS5sZWF2ZVJvb20gPSBmdW5jdGlvbiAocm9vbWlkKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBpZiAocm9vbWlkICYmIHJvb21pZCAhPSAnJykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0FuY2hvcikgeyAvL+WcqOm6puS9jemAgOWHuuaIv+mXtOaIluS4i+m6plxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuYm9keS5sZWF2ZVJvb20odGhpcy5yb29tKV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5ib2R5LmxlYXZlTGl2aW5nUm9vbUFzQXVkaWVuY2UodGhpcy5yb29tKV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyb29taWQg6ZSZ6K+vJyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLy/pl63puqZcbiAgICBSVEMucHJvdG90eXBlLm11dGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMudHJhY2tzIHx8IHRoaXMudHJhY2tzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcign6Z2ecnRj5Li75pKtLOaXoOazlemXrem6picpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5yb29tLnVucHVibGlzaChbdGhpcy50cmFja3NdKV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvL+W8gOm6plxuICAgIFJUQy5wcm90b3R5cGUudW5tdXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy50cmFja3MpO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy50cmFja3MgfHwgdGhpcy50cmFja3MubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCfpnZ5ydGPkuLvmkq0s5peg5rOV5byA6bqmJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLnJvb20ucHVibGlzaChbdGhpcy50cmFja3NdKV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvL+S4ium6plxuICAgIFJUQy5wcm90b3R5cGUuZW50ZXJTZWF0ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpZCwgdGhhdDtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRTZWF0ID0gaW5kZXg7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNBbmNob3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLnlKjmiLflt7Lnu4/lnKjpuqbkuIpcIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWQgPSB0aGlzLnJvb20uZ2V0Um9vbUlkKCk7XG4gICAgICAgICAgICAgICAgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMubGVhdmVSb29tKGlkKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuaXNBbmNob3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoYXQuam9pbkxpdmluZ1Jvb21Bc0FuY2hvcihpZCk7XG4gICAgICAgICAgICAgICAgICAgIH0pXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8v5LiL6bqmXG4gICAgUlRDLnByb3RvdHlwZS5sZWF2ZVNlYXQgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaWQsIHRoYXQ7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzQW5jaG9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLlt7Lnu4/mmK/op4LkvJfml6Dms5XkuIvpuqZcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudHJhY2tzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFja3MuZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5zdG9wQ3JlYXRlVHJhY2soKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucm9vbS5nZXRSb29tSWQoKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgdGhpcy5sZWF2ZVJvb20oaWQpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMubGVhdmVSb29tKGlkKS50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIF9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3RoaXMubGVhdmVSb29tKGlkKScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5pc0FuY2hvciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoYXQuam9pbkxpdmluZ1Jvb21Bc0F1ZGllbmNlKGlkKV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOyB9KV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLy/oh6rlrprkuYnpn7PpopHmtYHlj5HluINcbiAgICBSVEMucHJvdG90eXBlLmNyZWF0ZVRyYWNrID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF9hLCBjb2RlLCB0cmFja3MsIHJlO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYikge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2IubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzQW5jaG9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+mdnuS4u+aSreS4jeiDveWPkeW4g+iHquWumuS5iemfs+mikea1gScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuYm9keS5jcmVhdGVMb2NhbEZpbGVUcmFja3MoJ3RhZycsIC8vIHRyYWNrIOagh+ivhlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0sIC8vIOe9kee7nOi1hOa6kCB1cmwg5Zyw5Z2A5oiW6ICFZmlsZSDlrp7kvotcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpdGhvdXRBdWRpbzogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpdGhvdXRWaWRlbzogdHJ1ZSwgLy8g5b2T5YC85Li6IHRydWUg5pe25bCG5LiN5Lqn55Sf6KeG6L2o77yM6buY6K6k5Li6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYSA9IF9iLnNlbnQoKSwgY29kZSA9IF9hLmNvZGUsIHRyYWNrcyA9IF9hLnRyYWNrcztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjcmVhdGVMb2NhbEZpbGVUcmFja3MuY29kZScsIGNvZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2NyZWF0ZUxvY2FsRmlsZVRyYWNrcy50cmFja3MnLCB0cmFja3MsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubXVzaWNUcmFja3MgPSB0cmFja3M7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNEaXNhYmxlKSByZXR1cm4gWzMgLypicmVhayovLCAzXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMucm9vbS5wdWJsaXNoKF9fc3ByZWFkQXJyYXkoW10sIHRyYWNrcywgdHJ1ZSkpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmUgPSBfYi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA1XTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLnJvb20ucHVibGlzaChfX3NwcmVhZEFycmF5KF9fc3ByZWFkQXJyYXkoW10sIHRyYWNrcywgdHJ1ZSksIFt0aGlzLnRyYWNrc10sIGZhbHNlKSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgICAgICByZSA9IF9iLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9iLmxhYmVsID0gNTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+WPkeW4g+iHquWumuS5iemfs+mikea1geWPkeW4gycsIHJlLmNvZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFJUQy5wcm90b3R5cGUuc3RvcENyZWF0ZVRyYWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY29kZTtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc0FuY2hvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfpnZ7kuLvmkq3kuI3og73mk43kvZzoh6rlrprkuYnpn7PpopHmtYEnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMubXVzaWNUcmFja3MpIHJldHVybiBbMyAvKmJyZWFrKi8sIDJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5yb29tLnVucHVibGlzaCh0aGlzLm11c2ljVHJhY2tzKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGUgPSAoX2Euc2VudCgpKS5jb2RlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tdXNpY1RyYWNrc1swXS5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn5YGc5q2i5Y+R5biD6Ieq5a6a5LmJ6Z+z6aKR5rWBJywgY29kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5sYWJlbCA9IDI7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8v5YW85a65bWFj54Gr54uQ5LiN6IO96Ieq5Yqo5pKt5pS+6Zeu6aKYXG4gICAgUlRDLnByb3RvdHlwZS5wcmV2aWV3ID0gZnVuY3Rpb24gKHZpZGVvTm9kZSkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgbztcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5ib2R5LmNyZWF0ZUNhbWVyYVZpZGVvVHJhY2soJ1JvbmdDbG91ZFJUQycpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgbyA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBvLnRyYWNrLnBsYXkodmlkZW9Ob2RlKV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLy/lhbzlrrltYWPngavni5DkuI3og73oh6rliqjmkq3mlL7pl67pophcbiAgICBSVEMucHJvdG90eXBlLmF1ZGlvUGxheSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCB0aGlzLmF1ZGlvVHJhY2sucGxheSgpXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBSVEM7XG59KF9zdHJ1Y3R1cmVfbW9kdWxlc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLmRlZmF1bHQpKTtcbi8qIGhhcm1vbnkgZGVmYXVsdCBleHBvcnQgKi8gY29uc3QgX19XRUJQQUNLX0RFRkFVTFRfRVhQT1JUX18gPSAoUlRDKTtcblxuXG4vLyMgc291cmNlVVJMPXdlYnBhY2s6Ly9Acm9uZ2Nsb3VkL3Jjdm9pY2Vyb29tbGliLXYxLy4vc3JjL21vZHVsZXMvcnRjL2luZGV4LnRzPyIpOy8qKiovfSwvKioqLyIuL3NyYy9zdHJ1Y3R1cmUvbW9kdWxlcy50cyI6LyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXAogICEqKiogLi9zcmMvc3RydWN0dXJlL21vZHVsZXMudHMgKioqIQogIFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLyAvKioqL2Z1bmN0aW9uIHNyY1N0cnVjdHVyZU1vZHVsZXNUcyhfX3VudXNlZF93ZWJwYWNrX21vZHVsZSxfX3dlYnBhY2tfZXhwb3J0c19fLF9fd2VicGFja19yZXF1aXJlX18pe2V2YWwoIl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0ICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCB7XG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFwiZGVmYXVsdFwiOiAoKSA9PiAoX19XRUJQQUNLX0RFRkFVTFRfRVhQT1JUX18pXG4vKiBoYXJtb255IGV4cG9ydCAqLyB9KTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBldmVudHNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIGV2ZW50cyAqLyBcIi4vbm9kZV9tb2R1bGVzL2V2ZW50cy9ldmVudHMuanNcIik7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgZXZlbnRzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm4oZXZlbnRzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9sb2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vbG9nZXIgKi8gXCIuL3NyYy9sb2dlci50c1wiKTtcbnZhciBfX2V4dGVuZHMgPSAodW5kZWZpbmVkICYmIHVuZGVmaW5lZC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuXG5cbnZhciBNb2R1bGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE1vZHVsZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBNb2R1bGUoKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICB9XG4gICAgTW9kdWxlLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgaWYgKGQgPT09IHZvaWQgMCkgeyBkID0gbnVsbDsgfVxuICAgICAgICBfbG9nZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXy5kZWZhdWx0LmxvZyhcImRlZmF1bHQgaW5pdDogXCIgKyB0aGlzLm5hbWUgKyBcIjpcIiArIHRoaXMubmFtZSwgZCk7XG4gICAgfTtcbiAgICBNb2R1bGUucHJvdG90eXBlLmlucHV0ID0gZnVuY3Rpb24gKGQpIHtcbiAgICAgICAgX2xvZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18uZGVmYXVsdC5sb2coXCJkZWZhdWx0IGlucHV0OiBcIiArIHRoaXMubmFtZSArIFwiOlwiICsgdGhpcy5uYW1lLCBkKTtcbiAgICB9O1xuICAgIE1vZHVsZS5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF9sb2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fLmRlZmF1bHQubG9nKFwiZGVmYXVsdCBzdGFydDogXCIgKyB0aGlzLm5hbWUpO1xuICAgIH07XG4gICAgTW9kdWxlLnByb3RvdHlwZS5zdG9wID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBfbG9nZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXy5kZWZhdWx0LmxvZyhcImRlZmF1bHQgc3RvcDogXCIgKyB0aGlzLm5hbWUpO1xuICAgIH07XG4gICAgTW9kdWxlLnByb3RvdHlwZS5jYW5jZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF9sb2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fLmRlZmF1bHQubG9nKFwiZGVmYXVsdCBjYW5jZWxcIiArIHRoaXMubmFtZSk7XG4gICAgfTtcbiAgICBNb2R1bGUucHJvdG90eXBlLnJlYm9vdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgc3dpdGNoICh0aGlzLnN0YXRlcykge1xuICAgICAgICAgICAgY2FzZSAxOiAvL+Wwsee7qi5cbiAgICAgICAgICAgICAgICBfbG9nZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXy5kZWZhdWx0LmxvZyhcIm5vIEVyciBwbGVhc2UgY2hlY2sgY29kZS5cIik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDI6IC8v5Y2g55So5LitLlxuICAgICAgICAgICAgICAgIF9sb2dlcl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fLmRlZmF1bHQubG9nKHRoaXMubmFtZSArICcgaXMgb24gdXNpbmcuIHRyeSByZWJvb3QuJyk7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmNhbmNlbCgpO1xuICAgICAgICAgICAgICAgIH0sIDApO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBfbG9nZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXy5kZWZhdWx0LmxvZyhcInVua25vd1N0YXRlcyBhdCByZWJvb3RpbmcuXCIgKyB0aGlzLm5hbWUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBNb2R1bGUucHJvdG90eXBlLnJlaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgY29uc29sZS5sb2coXCJyZWluaXRpbmdcIik7XG4gICAgICAgIHZhciBpbml0cHJvID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgX3RoaXMuaW5pdCgxKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGluaXRwcm8udGhlbihmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICAgICAgdmFyIG8gPSB7XG4gICAgICAgICAgICAgICAgZnJvbTogX3RoaXMubmFtZSxcbiAgICAgICAgICAgICAgICB0bzogXCJtYWluXCIsXG4gICAgICAgICAgICAgICAgZGF0YTogXCJyZWJvb3RcIixcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBfdGhpcy5lbWl0KFwib3V0cHV0XCIsIG8pO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCLph43lkK/miJDlip8hXCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgaW5pdHByby5jYXRjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgX2xvZ2VyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18uZGVmYXVsdC5lcnJvcihlLCBcIjVcIiwgX3RoaXMsIFwiMDFcIiwgXCLph43lkK/lpLHotKXmlL7lvIPlkKflsJHlubRcIik7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgcmV0dXJuIE1vZHVsZTtcbn0oZXZlbnRzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18uRXZlbnRFbWl0dGVyKSk7XG4vKiBoYXJtb255IGRlZmF1bHQgZXhwb3J0ICovIGNvbnN0IF9fV0VCUEFDS19ERUZBVUxUX0VYUE9SVF9fID0gKE1vZHVsZSk7XG5cblxuLy8jIHNvdXJjZVVSTD13ZWJwYWNrOi8vQHJvbmdjbG91ZC9yY3ZvaWNlcm9vbWxpYi12MS8uL3NyYy9zdHJ1Y3R1cmUvbW9kdWxlcy50cz8iKTsvKioqL30vKioqKioqL307LyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8gLyoqKioqKi8gLy8gVGhlIG1vZHVsZSBjYWNoZQovKioqKioqL3ZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX189e307LyoqKioqKi8gLyoqKioqKi8gLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb24KLyoqKioqKi9mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKXsvKioqKioqLyAvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGUKLyoqKioqKi92YXIgY2FjaGVkTW9kdWxlPV9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07LyoqKioqKi9pZihjYWNoZWRNb2R1bGUhPT11bmRlZmluZWQpey8qKioqKiovcmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzOy8qKioqKiovfS8qKioqKiovIC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpCi8qKioqKiovdmFyIG1vZHVsZT1fX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdPXsvKioqKioqLyAvLyBubyBtb2R1bGUuaWQgbmVlZGVkCi8qKioqKiovIC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkCi8qKioqKiovZXhwb3J0czp7fS8qKioqKiovfTsvKioqKioqLyAvKioqKioqLyAvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb24KLyoqKioqKi9fX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsbW9kdWxlLmV4cG9ydHMsX193ZWJwYWNrX3JlcXVpcmVfXyk7LyoqKioqKi8gLyoqKioqKi8gLy8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGUKLyoqKioqKi9yZXR1cm4gbW9kdWxlLmV4cG9ydHM7LyoqKioqKi99LyoqKioqKi8gLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8gLyoqKioqKi8gLyogd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQgKi8gLyoqKioqKi8oZnVuY3Rpb24oKXsvKioqKioqLyAvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlcwovKioqKioqL19fd2VicGFja19yZXF1aXJlX18ubj1mdW5jdGlvbihtb2R1bGUpey8qKioqKiovdmFyIGdldHRlcj1tb2R1bGUmJm1vZHVsZS5fX2VzTW9kdWxlPy8qKioqKiovZnVuY3Rpb24oKXtyZXR1cm4gbW9kdWxlWydkZWZhdWx0J107fTovKioqKioqL2Z1bmN0aW9uKCl7cmV0dXJuIG1vZHVsZTt9Oy8qKioqKiovX193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlcix7YTpnZXR0ZXJ9KTsvKioqKioqL3JldHVybiBnZXR0ZXI7LyoqKioqKi99Oy8qKioqKiovfSkoKTsvKioqKioqLyAvKioqKioqLyAvKiB3ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMgKi8gLyoqKioqKi8oZnVuY3Rpb24oKXsvKioqKioqLyAvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzCi8qKioqKiovX193ZWJwYWNrX3JlcXVpcmVfXy5kPWZ1bmN0aW9uKGV4cG9ydHMsZGVmaW5pdGlvbil7LyoqKioqKi9mb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKXsvKioqKioqL2lmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLGtleSkmJiFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cyxrZXkpKXsvKioqKioqL09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLGtleSx7ZW51bWVyYWJsZTp0cnVlLGdldDpkZWZpbml0aW9uW2tleV19KTsvKioqKioqL30vKioqKioqL30vKioqKioqL307LyoqKioqKi99KSgpOy8qKioqKiovIC8qKioqKiovIC8qIHdlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQgKi8gLyoqKioqKi8oZnVuY3Rpb24oKXsvKioqKioqL19fd2VicGFja19yZXF1aXJlX18ubz1mdW5jdGlvbihvYmoscHJvcCl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmoscHJvcCk7fTsvKioqKioqL30pKCk7LyoqKioqKi8gLyoqKioqKi8gLyogd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCAqLyAvKioqKioqLyhmdW5jdGlvbigpey8qKioqKiovIC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHMKLyoqKioqKi9fX3dlYnBhY2tfcmVxdWlyZV9fLnI9ZnVuY3Rpb24oZXhwb3J0cyl7LyoqKioqKi9pZih0eXBlb2YgU3ltYm9sIT09J3VuZGVmaW5lZCcmJlN5bWJvbC50b1N0cmluZ1RhZyl7LyoqKioqKi9PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cyxTeW1ib2wudG9TdHJpbmdUYWcse3ZhbHVlOidNb2R1bGUnfSk7LyoqKioqKi99LyoqKioqKi9PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywnX19lc01vZHVsZScse3ZhbHVlOnRydWV9KTsvKioqKioqL307LyoqKioqKi99KSgpOy8qKioqKiovIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovIC8qKioqKiovIC8qKioqKiovIC8vIHN0YXJ0dXAKLyoqKioqKi8gLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzCi8qKioqKiovIC8vIFRoaXMgZW50cnkgbW9kdWxlIGNhbid0IGJlIGlubGluZWQgYmVjYXVzZSB0aGUgZXZhbCBkZXZ0b29sIGlzIHVzZWQuCi8qKioqKiovdmFyIF9fd2VicGFja19leHBvcnRzX189X193ZWJwYWNrX3JlcXVpcmVfXygiLi9zcmMvaW5kZXgudHMiKTsvKioqKioqLyAvKioqKioqL3JldHVybiBfX3dlYnBhY2tfZXhwb3J0c19fOy8qKioqKiovfSgpKTt9KTs="},{"version":3,"sources":["/Users/libin/Desktop/Gwork/rcvoiceroomlib-web/dist/main.js"],"names":["webpackUniversalModuleDefinition","root","factory","exports","module","define","amd","a","i","self","__webpack_modules__","__unused_webpack_module","__webpack_exports__","__webpack_require__","eval","__webpack_module_cache__","moduleId","cachedModule","undefined","n","getter","__esModule","d","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value"],"mappings":"2ZAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GACA,CAAC,QAASA,CAAAA,gCAAT,CAA0CC,IAA1C,CAAgDC,OAAhD,CAAyD,CACzD,GAAG,OAAOC,CAAAA,OAAP,mCAAOA,OAAP,KAAmB,QAAnB,EAA+B,OAAOC,CAAAA,MAAP,mCAAOA,MAAP,KAAkB,QAApD,CACCA,MAAM,CAACD,OAAP,CAAiBD,OAAO,EAAxB,CADD,IAEK,IAAG,MAAOG,CAAAA,MAAP,GAAkB,UAAlB,EAAgCA,MAAM,CAACC,GAA1C,CACJD,MAAM,CAAC,EAAD,CAAKH,OAAL,CAAN,CADI,IAEA,CACJ,GAAIK,CAAAA,CAAC,CAAGL,OAAO,EAAf,CACA,IAAI,GAAIM,CAAAA,CAAR,GAAaD,CAAAA,CAAb,EAAgB,CAAC,OAAOJ,CAAAA,OAAP,mCAAOA,OAAP,KAAmB,QAAnB,CAA8BA,OAA9B,CAAwCF,IAAzC,EAA+CO,CAA/C,EAAoDD,CAAC,CAACC,CAAD,CAArD,CAAhB,CACA,CACD,CATD,EASGC,IATH,CASS,UAAW,CACpB,MAAO,SAAU,UAAM,CAAE;AACzB,QAAU,aACV,QAAU,GAAIC,CAAAA,mBAAmB,CAAI,CAErC,KAAM,qDACN;AACA;AACA,8DAHM,CAIN,KAAO,mDAACC,uBAAD,CAA0BC,mBAA1B,CAA+CC,mBAA/C,CAAuE,CAE9EC,IAAI,CAAC,23kUAAD,CAAJ,CAEA,KAAO,CAV8B,CAYrC,KAAM,yDACN;AACA;AACA,kEAHM,CAIN,KAAO,sDAACH,uBAAD,CAA0BC,mBAA1B,CAA+CC,mBAA/C,CAAuE,CAE9EC,IAAI,CAAC,+39GAAD,CAAJ,CAEA,KAAO,CApB8B,CAsBrC,KAAM,yDACN;AACA;AACA,kEAHM,CAIN,KAAO,sDAACH,uBAAD,CAA0BC,mBAA1B,CAA+CC,mBAA/C,CAAuE,CAE9EC,IAAI,CAAC,0/4NAAD,CAAJ,CAEA,KAAO,CA9B8B,CAgCrC,KAAM,kCACN;AACA;AACA,2CAHM,CAIN,KAAO,oCAACV,MAAD,CAAY,CAEnBU,IAAI,CAAC,yneAAD,CAAJ,CAEA,KAAO,CAxC8B,CA0CrC,KAAM,kBACN;AACA;AACA,2BAHM,CAIN,KAAO,qBAACH,uBAAD,CAA0BC,mBAA1B,CAA+CC,mBAA/C,CAAuE,CAE9EC,IAAI,CAAC,gzBAAD,CAAJ,CAEA,KAAO,CAlD8B,CAoDrC,KAAM,iBACN;AACA;AACA,0BAHM,CAIN,KAAO,oBAACH,uBAAD,CAA0BC,mBAA1B,CAA+CC,mBAA/C,CAAuE,CAE9EC,IAAI,CAAC,6orDAAD,CAAJ,CAEA,KAAO,CA5D8B,CA8DrC,KAAM,iBACN;AACA;AACA,0BAHM,CAIN,KAAO,oBAACH,uBAAD,CAA0BC,mBAA1B,CAA+CC,mBAA/C,CAAuE,CAE9EC,IAAI,CAAC,u0IAAD,CAAJ,CAEA,KAAO,CAtE8B,CAwErC,KAAM,4BACN;AACA;AACA,qCAHM,CAIN,KAAO,6BAACH,uBAAD,CAA0BC,mBAA1B,CAA+CC,mBAA/C,CAAuE,CAE9EC,IAAI,CAAC,0knCAAD,CAAJ,CAEA,KAAO,CAhF8B,CAkFrC,KAAM,6BACN;AACA;AACA,sCAHM,CAIN,KAAO,8BAACH,uBAAD,CAA0BC,mBAA1B,CAA+CC,mBAA/C,CAAuE,CAE9EC,IAAI,CAAC,4h8BAAD,CAAJ,CAEA,KAAO,CA1F8B,CA4FrC,KAAM,6BACN;AACA;AACA,sCAHM,CAIN,KAAO,+BAACH,uBAAD,CAA0BC,mBAA1B,CAA+CC,mBAA/C,CAAuE,CAE9EC,IAAI,CAAC,42HAAD,CAAJ,CAEA,KAAO,CAEP,QAtGqC,CAA3B,CAuGV,0EAzGuB,CA0GvB,QA1GuB,CA0Gb;AACV,QAAU,GAAIC,CAAAA,wBAAwB,CAAG,EAA/B,CACV,QA5GuB,CA6GvB,QA7GuB,CA6Gb;AACV,QAAU,QAASF,CAAAA,mBAAT,CAA6BG,QAA7B,CAAuC,CACjD,QADiD,CACtC;AACX,QAAW,GAAIC,CAAAA,YAAY,CAAGF,wBAAwB,CAACC,QAAD,CAA3C,CACX,QAAW,GAAIC,YAAY,GAAKC,SAArB,CAAgC,CAC3C,QAAY,MAAOD,CAAAA,YAAY,CAACd,OAApB,CACZ,QAAY,CACZ,QANiD,CAMtC;AACX,QAAW,GAAIC,CAAAA,MAAM,CAAGW,wBAAwB,CAACC,QAAD,CAAxB,CAAqC,CAC7D,QAD6D,CACjD;AACZ,QAF6D,CAEjD;AACZ,QAAYb,OAAO,CAAE,EACrB,QAJ6D,CAAlD,CAKX,QAZiD,CAajD,QAbiD,CAatC;AACX,QAAWO,mBAAmB,CAACM,QAAD,CAAnB,CAA8BZ,MAA9B,CAAsCA,MAAM,CAACD,OAA7C,CAAsDU,mBAAtD,EACX,QAfiD,CAgBjD,QAhBiD,CAgBtC;AACX,QAAW,MAAOT,CAAAA,MAAM,CAACD,OAAd,CACX,QAAW,CACX,QAjIuB,CAkIvB,0EAlIuB,CAmIvB,QAnIuB,CAmIb,+CAnIa,CAoIvB,QAAU,CAAC,UAAM,CACjB,QADiB,CACN;AACX,QAAWU,mBAAmB,CAACM,CAApB,CAAwB,SAACf,MAAD,CAAY,CAC/C,QAAY,GAAIgB,CAAAA,MAAM,CAAGhB,MAAM,EAAIA,MAAM,CAACiB,UAAjB,CACzB,QAAa,iBAAOjB,CAAAA,MAAM,CAAC,SAAD,CAAb,EADY,CAEzB,QAAa,iBAAOA,CAAAA,MAAP,EAFD,CAGZ,QAAYS,mBAAmB,CAACS,CAApB,CAAsBF,MAAtB,CAA8B,CAAEb,CAAC,CAAEa,MAAL,CAA9B,EACZ,QAAY,MAAOA,CAAAA,MAAP,CACZ,QAAY,CAND,CAOX,QAAW,CATD,IAUV,QA9IuB,CA+IvB,QA/IuB,CA+Ib,6CA/Ia,CAgJvB,QAAU,CAAC,UAAM,CACjB,QADiB,CACN;AACX,QAAWP,mBAAmB,CAACS,CAApB,CAAwB,SAACnB,OAAD,CAAUoB,UAAV,CAAyB,CAC5D,QAAY,IAAI,GAAIC,CAAAA,GAAR,GAAeD,CAAAA,UAAf,CAA2B,CACvC,QAAa,GAAGV,mBAAmB,CAACY,CAApB,CAAsBF,UAAtB,CAAkCC,GAAlC,GAA0C,CAACX,mBAAmB,CAACY,CAApB,CAAsBtB,OAAtB,CAA+BqB,GAA/B,CAA9C,CAAmF,CAChG,QAAcE,MAAM,CAACC,cAAP,CAAsBxB,OAAtB,CAA+BqB,GAA/B,CAAoC,CAAEI,UAAU,CAAE,IAAd,CAAoBC,GAAG,CAAEN,UAAU,CAACC,GAAD,CAAnC,CAApC,EACd,QAAc,CACd,QAAa,CACb,QAAY,CAND,CAOX,QAAW,CATD,IAUV,QA1JuB,CA2JvB,QA3JuB,CA2Jb,8CA3Ja,CA4JvB,QAAU,CAAC,UAAM,CACjB,QAAWX,mBAAmB,CAACY,CAApB,CAAwB,SAACK,GAAD,CAAMC,IAAN,QAAgBL,CAAAA,MAAM,CAACM,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCJ,GAArC,CAA0CC,IAA1C,CAAhB,EAAxB,CACX,QAAW,CAFD,IAGV,QA/JuB,CAgKvB,QAhKuB,CAgKb,2CAhKa,CAiKvB,QAAU,CAAC,UAAM,CACjB,QADiB,CACN;AACX,QAAWlB,mBAAmB,CAACsB,CAApB,CAAwB,SAAChC,OAAD,CAAa,CAChD,QAAY,GAAG,MAAOiC,CAAAA,MAAP,GAAkB,WAAlB,EAAiCA,MAAM,CAACC,WAA3C,CAAwD,CACpE,QAAaX,MAAM,CAACC,cAAP,CAAsBxB,OAAtB,CAA+BiC,MAAM,CAACC,WAAtC,CAAmD,CAAEC,KAAK,CAAE,QAAT,CAAnD,EACb,QAAa,CACb,QAAYZ,MAAM,CAACC,cAAP,CAAsBxB,OAAtB,CAA+B,YAA/B,CAA6C,CAAEmC,KAAK,CAAE,IAAT,CAA7C,EACZ,QAAY,CALD,CAMX,QAAW,CARD,IASV,QA1KuB,CA2KvB,0EA3KuB,CA4KvB,QA5KuB,CA6KvB,QA7KuB,CA6Kb;AACV,QA9KuB,CA8Kb;AACV,QA/KuB,CA+Kb;AACV,QAAU,GAAI1B,CAAAA,mBAAmB,CAAGC,mBAAmB,CAAC,gBAAD,CAA7C,CACV,QAjLuB,CAkLvB,QAAU,MAAOD,CAAAA,mBAAP,CACV,QAAU,CAnLM,EAAhB,EAqLC,CA/LD","sourcesContent":["/*\n * ATTENTION: The \"eval\" devtool has been used (maybe by default in mode: \"development\").\n * This devtool is neither made for production nor for readable output files.\n * It uses \"eval()\" calls to create a separate source file in the browser devtools.\n * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)\n * or disable the default devtool with \"devtool: false\".\n * If you are looking for production-ready output files, see mode: \"production\" (https://webpack.js.org/configuration/mode/).\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(self, function() {\nreturn /******/ (() => { // webpackBootstrap\n/******/ \t\"use strict\";\n/******/ \tvar __webpack_modules__ = ({\n\n/***/ \"./node_modules/@rongcloud/engine/dist/index.esm.js\":\n/*!**********************************************************!*\\\n  !*** ./node_modules/@rongcloud/engine/dist/index.esm.js ***!\n  \\**********************************************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\neval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   \\\"AEngine\\\": () => (/* binding */ vr),\\n/* harmony export */   \\\"ANavi\\\": () => (/* binding */ mr),\\n/* harmony export */   \\\"APIContext\\\": () => (/* binding */ is),\\n/* harmony export */   \\\"AppStorage\\\": () => (/* binding */ R),\\n/* harmony export */   \\\"AssertRules\\\": () => (/* binding */ He),\\n/* harmony export */   \\\"CONNECTION_TYPE\\\": () => (/* binding */ t),\\n/* harmony export */   \\\"CPP_PROTOCAL_MSGTYPE_OPTION\\\": () => (/* binding */ m),\\n/* harmony export */   \\\"CallLibMsgType\\\": () => (/* binding */ qe),\\n/* harmony export */   \\\"ChatroomEntryType\\\": () => (/* binding */ Ue),\\n/* harmony export */   \\\"ChatroomMemberChangeType\\\": () => (/* binding */ Pe),\\n/* harmony export */   \\\"CometChannel\\\": () => (/* binding */ yr),\\n/* harmony export */   \\\"ConnectResultCode\\\": () => (/* binding */ Te),\\n/* harmony export */   \\\"ConnectionStatus\\\": () => (/* binding */ Ie),\\n/* harmony export */   \\\"ConversationType\\\": () => (/* binding */ j),\\n/* harmony export */   \\\"DelayTimer\\\": () => (/* binding */ Et),\\n/* harmony export */   \\\"ErrorCode\\\": () => (/* binding */ Ee),\\n/* harmony export */   \\\"EventEmitter\\\": () => (/* binding */ ge),\\n/* harmony export */   \\\"FileType\\\": () => (/* binding */ W),\\n/* harmony export */   \\\"HttpMethod\\\": () => (/* binding */ pr),\\n/* harmony export */   \\\"IM_COMET_PULLMSG_TIMEOUT\\\": () => (/* binding */ y),\\n/* harmony export */   \\\"IM_PING_INTERVAL_TIME\\\": () => (/* binding */ d),\\n/* harmony export */   \\\"IM_PING_MIN_TIMEOUT\\\": () => (/* binding */ p),\\n/* harmony export */   \\\"IM_PING_TIMEOUT\\\": () => (/* binding */ f),\\n/* harmony export */   \\\"IM_SIGNAL_TIMEOUT\\\": () => (/* binding */ l),\\n/* harmony export */   \\\"LiveRole\\\": () => (/* binding */ ke),\\n/* harmony export */   \\\"LiveType\\\": () => (/* binding */ Ve),\\n/* harmony export */   \\\"LogLevel\\\": () => (/* binding */ A),\\n/* harmony export */   \\\"LogType\\\": () => (/* binding */ U),\\n/* harmony export */   \\\"Logger\\\": () => (/* binding */ fe),\\n/* harmony export */   \\\"MAX_MESSAGE_CONTENT_BYTES\\\": () => (/* binding */ _),\\n/* harmony export */   \\\"MINI_COMET_CONNECT_URIS\\\": () => (/* binding */ h),\\n/* harmony export */   \\\"MINI_SOCKET_CONNECT_URIS\\\": () => (/* binding */ c),\\n/* harmony export */   \\\"MentionedType\\\": () => (/* binding */ we),\\n/* harmony export */   \\\"MessageBlockType\\\": () => (/* binding */ xe),\\n/* harmony export */   \\\"MessageDirection\\\": () => (/* binding */ ye),\\n/* harmony export */   \\\"MessageType\\\": () => (/* binding */ Re),\\n/* harmony export */   \\\"NAVI_CACHE_DURATION\\\": () => (/* binding */ r),\\n/* harmony export */   \\\"NAVI_REQ_TIMEOUT\\\": () => (/* binding */ s),\\n/* harmony export */   \\\"NotificationStatus\\\": () => (/* binding */ Ne),\\n/* harmony export */   \\\"PING_REQ_TIMEOUT\\\": () => (/* binding */ o),\\n/* harmony export */   \\\"PUBLIC_CLOUD_NAVI_URIS\\\": () => (/* binding */ u),\\n/* harmony export */   \\\"PluginContext\\\": () => (/* binding */ Wr),\\n/* harmony export */   \\\"RCAssertError\\\": () => (/* binding */ $e),\\n/* harmony export */   \\\"RTCApiType\\\": () => (/* binding */ Be),\\n/* harmony export */   \\\"RTCIdentityChangeType\\\": () => (/* binding */ Fe),\\n/* harmony export */   \\\"RTCJoinType\\\": () => (/* binding */ Ke),\\n/* harmony export */   \\\"RTCMode\\\": () => (/* binding */ De),\\n/* harmony export */   \\\"RTCPluginContext\\\": () => (/* binding */ Jr),\\n/* harmony export */   \\\"ReceivedStatus\\\": () => (/* binding */ i),\\n/* harmony export */   \\\"SEND_MESSAGE_TYPE_OPTION\\\": () => (/* binding */ E),\\n/* harmony export */   \\\"STATUS_MESSAGE\\\": () => (/* binding */ I),\\n/* harmony export */   \\\"STORAGE_ROOT_KEY\\\": () => (/* binding */ v),\\n/* harmony export */   \\\"TagChangeType\\\": () => (/* binding */ ns),\\n/* harmony export */   \\\"UploadMethod\\\": () => (/* binding */ Me),\\n/* harmony export */   \\\"VersionManage\\\": () => (/* binding */ je),\\n/* harmony export */   \\\"WEB_SOCKET_TIMEOUT\\\": () => (/* binding */ a),\\n/* harmony export */   \\\"WebSocketChannel\\\": () => (/* binding */ _r),\\n/* harmony export */   \\\"appendUrl\\\": () => (/* binding */ k),\\n/* harmony export */   \\\"assert\\\": () => (/* binding */ et),\\n/* harmony export */   \\\"cloneByJSON\\\": () => (/* binding */ pt),\\n/* harmony export */   \\\"forEach\\\": () => (/* binding */ ct),\\n/* harmony export */   \\\"formatConnectResponseCode\\\": () => (/* binding */ yt),\\n/* harmony export */   \\\"getBrowser\\\": () => (/* binding */ _t),\\n/* harmony export */   \\\"getMimeKey\\\": () => (/* binding */ rt),\\n/* harmony export */   \\\"getUploadFileName\\\": () => (/* binding */ it),\\n/* harmony export */   \\\"indexOf\\\": () => (/* binding */ lt),\\n/* harmony export */   \\\"isArray\\\": () => (/* binding */ X),\\n/* harmony export */   \\\"isArrayBuffer\\\": () => (/* binding */ $),\\n/* harmony export */   \\\"isBoolean\\\": () => (/* binding */ z),\\n/* harmony export */   \\\"isFunction\\\": () => (/* binding */ ie),\\n/* harmony export */   \\\"isHttpUrl\\\": () => (/* binding */ oe),\\n/* harmony export */   \\\"isInObject\\\": () => (/* binding */ ft),\\n/* harmony export */   \\\"isInclude\\\": () => (/* binding */ dt),\\n/* harmony export */   \\\"isNull\\\": () => (/* binding */ se),\\n/* harmony export */   \\\"isNumber\\\": () => (/* binding */ Z),\\n/* harmony export */   \\\"isObject\\\": () => (/* binding */ ne),\\n/* harmony export */   \\\"isString\\\": () => (/* binding */ J),\\n/* harmony export */   \\\"isUndefined\\\": () => (/* binding */ re),\\n/* harmony export */   \\\"isValidChrmEntryKey\\\": () => (/* binding */ at),\\n/* harmony export */   \\\"isValidChrmEntryValue\\\": () => (/* binding */ ut),\\n/* harmony export */   \\\"isValidConversationType\\\": () => (/* binding */ ue),\\n/* harmony export */   \\\"isValidFileType\\\": () => (/* binding */ ce),\\n/* harmony export */   \\\"map\\\": () => (/* binding */ ht),\\n/* harmony export */   \\\"notEmptyArray\\\": () => (/* binding */ te),\\n/* harmony export */   \\\"notEmptyObject\\\": () => (/* binding */ ae),\\n/* harmony export */   \\\"notEmptyString\\\": () => (/* binding */ ee),\\n/* harmony export */   \\\"pushConfigsToJSON\\\": () => (/* binding */ st),\\n/* harmony export */   \\\"pushJSONToConfigs\\\": () => (/* binding */ ot),\\n/* harmony export */   \\\"todo\\\": () => (/* binding */ P),\\n/* harmony export */   \\\"usingCppEngine\\\": () => (/* binding */ gt),\\n/* harmony export */   \\\"validate\\\": () => (/* binding */ tt),\\n/* harmony export */   \\\"version\\\": () => (/* binding */ rs)\\n/* harmony export */ });\\nvar e;!function(e){e[e.READ=1]=\\\"READ\\\",e[e.LISTENED=2]=\\\"LISTENED\\\",e[e.DOWNLOADED=4]=\\\"DOWNLOADED\\\",e[e.RETRIEVED=8]=\\\"RETRIEVED\\\",e[e.UNREAD=0]=\\\"UNREAD\\\"}(e||(e={}));var t,n,i=e,r=72e5,s=1e4,o=5e3,a=5e3,u=[\\\"https://nav.cn.ronghub.com\\\",\\\"https://nav2-cn.ronghub.com\\\"],c=[\\\"wsproxy.cn.ronghub.com\\\",\\\"wsap-cn.ronghub.com\\\"],h=[\\\"cometproxy-cn.ronghub.com\\\",\\\"mini-cn.ronghub.com\\\"],l=3e4,d=15e3,f=15e3,p=2e3,_=131072,y=45e3,v=\\\"RCV4-\\\",E={\\\"RC:TxtMsg\\\":{isCounted:!0,isPersited:!0},\\\"RC:ImgMsg\\\":{isCounted:!0,isPersited:!0},\\\"RC:VcMsg\\\":{isCounted:!0,isPersited:!0},\\\"RC:ImgTextMsg\\\":{isCounted:!0,isPersited:!0},\\\"RC:FileMsg\\\":{isCounted:!0,isPersited:!0},\\\"RC:HQVCMsg\\\":{isCounted:!0,isPersited:!0},\\\"RC:LBSMsg\\\":{isCounted:!0,isPersited:!0},\\\"RC:PSImgTxtMsg\\\":{isCounted:!0,isPersited:!0},\\\"RC:PSMultiImgTxtMsg\\\":{isCounted:!0,isPersited:!0},\\\"RCJrmf:RpMsg\\\":{isCounted:!0,isPersited:!0},\\\"RCJrmf:RpOpendMsg\\\":{isCounted:!0,isPersited:!0},\\\"RC:CombineMsg\\\":{isCounted:!0,isPersited:!0},\\\"RC:ReferenceMsg\\\":{isCounted:!0,isPersited:!0},\\\"RC:SightMsg\\\":{isCounted:!0,isPersited:!0},\\\"RC:GIFMsg\\\":{isCounted:!0,isPersited:!0},\\\"RC:InfoNtf\\\":{isCounted:!1,isPersited:!0},\\\"RC:ContactNtf\\\":{isCounted:!1,isPersited:!0},\\\"RC:ProfileNtf\\\":{isCounted:!1,isPersited:!0},\\\"RC:CmdNtf\\\":{isCounted:!1,isPersited:!0},\\\"RC:GrpNtf\\\":{isCounted:!1,isPersited:!0},\\\"RC:RcCmd\\\":{isCounted:!1,isPersited:!0},\\\"RC:CmdMsg\\\":{isCounted:!1,isPersited:!1},\\\"RC:TypSts\\\":{isCounted:!1,isPersited:!1},\\\"RC:PSCmd\\\":{isCounted:!1,isPersited:!1},\\\"RC:SRSMsg\\\":{isCounted:!1,isPersited:!1},\\\"RC:RRReqMsg\\\":{isCounted:!1,isPersited:!1},\\\"RC:RRRspMsg\\\":{isCounted:!1,isPersited:!1},\\\"RC:CsChaR\\\":{isCounted:!1,isPersited:!1},\\\"RC:CSCha\\\":{isCounted:!1,isPersited:!1},\\\"RC:CsEva\\\":{isCounted:!1,isPersited:!1},\\\"RC:CsContact\\\":{isCounted:!1,isPersited:!1},\\\"RC:CsHs\\\":{isCounted:!1,isPersited:!1},\\\"RC:CsHsR\\\":{isCounted:!1,isPersited:!1},\\\"RC:CsSp\\\":{isCounted:!1,isPersited:!1},\\\"RC:CsEnd\\\":{isCounted:!1,isPersited:!1},\\\"RC:CsUpdate\\\":{isCounted:!1,isPersited:!1},\\\"RC:ReadNtf\\\":{isCounted:!1,isPersited:!1},\\\"RC:chrmKVNotiMsg\\\":{isCounted:!1,isPersited:!1},\\\"RC:VCAccept\\\":{isCounted:!1,isPersited:!1},\\\"RC:VCRinging\\\":{isCounted:!1,isPersited:!1},\\\"RC:VCSummary\\\":{isCounted:!1,isPersited:!1},\\\"RC:VCHangup\\\":{isCounted:!1,isPersited:!1},\\\"RC:VCInvite\\\":{isCounted:!1,isPersited:!1},\\\"RC:VCModifyMedia\\\":{isCounted:!1,isPersited:!1},\\\"RC:VCModifyMem\\\":{isCounted:!1,isPersited:!1},\\\"RC:MsgExMsg\\\":{isCounted:!1,isPersited:!1},\\\"RC:RRMsg\\\":{isCounted:!1,isPersited:!1},\\\"RC:LogCmdMsg\\\":{isCounted:!1,isPersited:!1},\\\"RC:InterceptMsg\\\":{isCounted:!1,isPersited:!1}},m={\\\"RC:DizNtf\\\":{isCounted:!1,isPersited:!1}},I=[\\\"RC:TypSts\\\",\\\"RC:InterceptMsg\\\"];!function(e){e.WEBSOCKET=\\\"websocket\\\",e.COMET=\\\"comet\\\"}(t||(t={}));var T=function(e){return n||(n={set:function(t,n){e.localStorage.setItem(t,JSON.stringify(n))},get:function(t){var n;try{n=JSON.parse(e.localStorage.getItem(t))}catch(e){n=null}return n},remove:function(t){return e.localStorage.removeItem(t)},getKeys:function(){var t=[];for(var n in e.localStorage)t.push(n);return t}}),n},C=function(){function e(e){this._caches={},e&&(this._caches=e)}return e.prototype.set=function(e,t){this._caches[e]=t},e.prototype.remove=function(e){var t=this.get(e);return delete this._caches[e],t},e.prototype.get=function(e){return this._caches[e]},e.prototype.getKeys=function(){var e=[];for(var t in this._caches)e.push(t);return e},e}(),R=function(){function e(e,t){var n,i=t?\\\"RCV4-\\\"+t:\\\"RCV4-\\\";this._rootStorage=T(e);var r=this._rootStorage.get(i)||{};this._cache=new C(((n={})[i]=r,n)),this._storageKey=i}return e.prototype._get=function(){var e=this._storageKey;return this._cache.get(e)||{}},e.prototype._set=function(e){var t=this._storageKey;e=e||{},this._cache.set(t,e),this._rootStorage.set(t,e)},e.prototype.set=function(e,t){var n=this._get();n[e]=t,this._set(n)},e.prototype.remove=function(e){var t=this._get();delete t[e],this._set(t)},e.prototype.clear=function(){var e=this._storageKey;this._rootStorage.remove(e),this._cache.remove(e)},e.prototype.get=function(e){return this._get()[e]},e.prototype.getKeys=function(){var e=this._get(),t=[];for(var n in e)t.push(n);return t},e.prototype.getValues=function(){return this._get()||{}},e}(),S=function(e,t){return(S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function N(e,t){if(\\\"function\\\"!=typeof t&&null!==t)throw new TypeError(\\\"Class extends value \\\"+String(t)+\\\" is not a constructor or null\\\");function n(){this.constructor=e}S(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var O=function(){return(O=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function w(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{u(i.next(e))}catch(e){s(e)}}function a(e){try{u(i.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}u((i=i.apply(e,t||[])).next())}))}function b(e,t){var n,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},\\\"function\\\"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError(\\\"Generator is already executing.\\\");for(;o;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function M(e,t){for(var n=0,i=t.length,r=e.length;n<i;n++,r++)e[r]=t[n];return e}var A,U,L=function(e){function t(t){return e.call(this,\\\"TODO => \\\"+t)||this}return N(t,e),t}(Error),P=function(e){return new L(e)},D=function(e,t,n){if(void 0===t||void 0===n)return e.toUpperCase();var i=e.slice(t,n);return e=e.replace(i,(function(e){return e.toUpperCase()}))},V=function(e,t){void 0===t&&(t=\\\"utf-8\\\");var n,i=0;if(\\\"utf-16\\\"===t)for(var r=0,s=e.length;r<s;r++)i+=(n=e.charCodeAt(r))<=65535?2:4;else for(r=0,s=e.length;r<s;r++)i+=(n=e.charCodeAt(r))<127?1:n<=2047?2:n<=65535?3:4;return i},k=function(e,t){if(e=e.replace(/\\\\?$/,\\\"\\\"),!t)return e;var n=Object.keys(t).map((function(e){return e+\\\"=\\\"+t[e]})).filter((function(e){return!!e}));return n.length?[e,n.join(\\\"&\\\")].join(\\\"?\\\"):e},x=function(e){return e.match(/\\\\d+(\\\\.\\\\d+){2}/)[0]};!function(e){e[e.LOG=0]=\\\"LOG\\\",e[e.DEBUG=0]=\\\"DEBUG\\\",e[e.INFO=1]=\\\"INFO\\\",e[e.WARN=2]=\\\"WARN\\\",e[e.ERROR=3]=\\\"ERROR\\\",e[e.FATAL=4]=\\\"FATAL\\\",e[e.NONE=1e3]=\\\"NONE\\\"}(A||(A={})),function(e){e.IM=\\\"IM\\\",e.RTC=\\\"RTC\\\"}(U||(U={}));var B=\\\"RC_Logs\\\";function F(e){var t=e.target.result;1===e.oldVersion&&t.deleteObjectStore(B),function(e,t,n){var i;if(!e.objectStoreNames.contains(t)){var r=O({},n.objectStoreParams);i=e.createObjectStore(t,r),n.indexs&&n.indexs.length>0&&n.indexs.forEach((function(e){i.createIndex(e.indexName,e.key,{unique:e.unique})}))}}(t,B,{indexs:[{indexName:\\\"time\\\",key:\\\"time\\\",unique:!1}],objectStoreParams:{autoIncrement:!0}})}var K,q=function(){function e(){}return e.init=function(){if(\\\"undefined\\\"!=typeof window&&window&&window.indexedDB){var t=window.indexedDB.open(\\\"RC_ENGINE_DB\\\",2);t.onerror=function(e){console.warn(\\\"open indexDB request failed \\\"+e.target.error)},t.onsuccess=function(t){e._db=t.target.result,e._db&&(e._db.onclose=function(t){var n;console.warn(\\\"The database \\\"+(null===(n=e._db)||void 0===n?void 0:n.name)+\\\" has unexpectedly closed.\\\",t),e._db=null,e._instance=null},e._db.onerror=function(t){var n;console.warn(\\\"The database \\\"+(null===(n=e._db)||void 0===n?void 0:n.name)+\\\" has opening error.\\\",t),e._db=null,e._instance=null},e._db.onabort=function(t){var n;console.warn(\\\"The database \\\"+(null===(n=e._db)||void 0===n?void 0:n.name)+\\\" has opening aborted.\\\",t),e._db=null,e._instance=null}),e._instance=new e},t.onupgradeneeded=function(t){e._db=t.target.result,F(t)}}else console.debug(\\\"IndexDB is not currently supported in the environment!\\\")},e.getInstance=function(){return e._instance},e.prototype.addList=function(t,n){return new Promise((function(i){if(e._db){var r=e._db.transaction([t],\\\"readwrite\\\"),s=r.objectStore(t);n.forEach((function(e){null==s||s.add(e)})),r.oncomplete=function(e){i(!0)},r.onerror=function(e){i(!1)}}else i(!1)}))},e.prototype.getRangeData=function(t,n,i,r){return new Promise((function(s){if(e._db){var o=e._db.transaction([t],\\\"readwrite\\\").objectStore(t),a=IDBKeyRange.bound(i,r),u=o.index(n),c=[],h=u.openCursor(a);h.onsuccess=function(e){var t=e.target.result;t?(c.push(t.value),t.continue()):s(c)},h.onerror=function(e){console.error(e),s([])}}else s([])}))},e.prototype.getCount=function(t,n){return new Promise((function(n){if(e._db){var i=e._db.transaction([t],\\\"readonly\\\").objectStore(t).count();i.onsuccess=function(){n(i.result)},i.onerror=function(e){console.error(e),n(0)}}else n(0)}))},e.prototype.removeFirstData=function(t,n,i){return new Promise((function(n){if(e._db){var r=e._db.transaction([t],\\\"readwrite\\\").objectStore(t),s=r.getAllKeys(IDBKeyRange.lowerBound(0),i);s.onsuccess=function(){var e=s.result;e.length>0&&(r.delete(IDBKeyRange.bound(e[0],e[e.length-1])).onsuccess=function(){n(!0)})}}else n(!1)}))},e._db=null,e}(),Y=function(){return\\\"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\\\".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return(\\\"x\\\"===e?t:3&t|8).toString(16)}))},H=function(){var e=Y();if(e=e.replace(/-/g,\\\"\\\")+\\\"a\\\",(e=function(e){var t=\\\"0123456789abcdefghigklmnopqrstuvwxyzABCDEFGHIGKLMNOPQRSTUVWXYZa0\\\".split(\\\"\\\"),n=t.length+1,i=+e,r=[];do{var s=i%n;i=(i-s)/n,r.unshift(t[s])}while(i);return r.join(\\\"\\\")}(e=parseInt(e,16))).length>22&&(e=e.slice(0,22)),e.length<22)for(var t=22-e.length,n=0;n<t;n++)e+=\\\"0\\\";return e};!function(e){e[e.NONE=0]=\\\"NONE\\\",e[e.PRIVATE=1]=\\\"PRIVATE\\\",e[e.DISCUSSION=2]=\\\"DISCUSSION\\\",e[e.GROUP=3]=\\\"GROUP\\\",e[e.CHATROOM=4]=\\\"CHATROOM\\\",e[e.CUSTOMER_SERVICE=5]=\\\"CUSTOMER_SERVICE\\\",e[e.SYSTEM=6]=\\\"SYSTEM\\\",e[e.APP_PUBLIC_SERVICE=7]=\\\"APP_PUBLIC_SERVICE\\\",e[e.PUBLIC_SERVICE=8]=\\\"PUBLIC_SERVICE\\\",e[e.RTC_ROOM=12]=\\\"RTC_ROOM\\\"}(K||(K={}));var G,j=K;!function(e){e[e.IMAGE=1]=\\\"IMAGE\\\",e[e.AUDIO=2]=\\\"AUDIO\\\",e[e.VIDEO=3]=\\\"VIDEO\\\",e[e.FILE=4]=\\\"FILE\\\",e[e.SIGHT=5]=\\\"SIGHT\\\",e[e.COMBINE_HTML=6]=\\\"COMBINE_HTML\\\"}(G||(G={}));var Q,W=G,J=function(e){return\\\"string\\\"==typeof e},z=function(e){return\\\"boolean\\\"==typeof e},Z=function(e){return\\\"number\\\"==typeof e&&!isNaN(e)},X=function(e){return-1!==Object.prototype.toString.call(e).indexOf(\\\"Array\\\")},$=function(e){return\\\"[object ArrayBuffer]\\\"===Object.prototype.toString.call(e)},ee=function(e){return J(e)&&e.length>0},te=function(e){return X(e)&&e.length>0},ne=function(e){return\\\"[object Object]\\\"===Object.prototype.toString.call(e)},ie=function(e){return\\\"[object Function]\\\"===Object.prototype.toString.call(e)},re=function(e){return void 0===e||\\\"[object Undefined]\\\"===Object.prototype.toString.call(e)},se=function(e){return\\\"[object Null]\\\"===Object.prototype.toString.call(e)},oe=function(e){return J(e)&&/https?:\\\\/\\\\//.test(e)},ae=function(e){for(var t in e)return!0;return!1},ue=function(e){return Z(e)&&Object.prototype.hasOwnProperty.call(j,e)},ce=function(e){return Z(e)&&Object.prototype.hasOwnProperty.call(W,e)},he={};console&&((Q={})[A.DEBUG]=console.debug.bind(console),Q[A.INFO]=console.info.bind(console),Q[A.WARN]=console.warn.bind(console),Q[A.ERROR]=console.error.bind(console),Q[A.FATAL]=console.log.bind(console),he=Q);var le,de=function(e){return J(e)||Z(e)||re(e)||z(e)?e:e instanceof Error?JSON.stringify({name:e.name,message:e.message,stack:e.stack}):JSON.stringify(e)},fe=function(){function e(e,t,n){this.tag=e,this.type=t,this.initiator=n,this._outLevel=A.WARN,this.debug=this.log.bind(this,A.DEBUG),this.info=this.log.bind(this,A.INFO),this.warn=this.log.bind(this,A.WARN),this.error=this.log.bind(this,A.ERROR),this.fatal=this.log.bind(this,A.FATAL)}return e.init=function(t){e.userId=t},e.reset=function(){e.userId=\\\"\\\"},e.prototype._defaultStdout=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];he[e]&&he[e].apply(he,M([t+\\\":\\\"],n))},e.prototype.__pushLocalLog=function(t,n,i){var r;r=this.type?this.type:[\\\"RCRTCLog\\\",\\\"RCCall\\\",\\\"RCRTC\\\",\\\"RTC-A\\\"].includes(this.tag)?U.RTC:U.IM;var s=Date.now();V(n)>=1e3&&(n=function(e,t,n){if(void 0===n&&(n=\\\"utf-8\\\"),!e||!t)return\\\"\\\";var i=\\\"utf-8\\\"===n?3:2,r=0,s=0,o=\\\"\\\";for(s=0;s<e.length;s++){if(e.charCodeAt(s)>255?r+=i:r++,r>t)return o;o+=e.charAt(s)}return e}(n,1e3));var o=JSON.stringify({message:n,userId:e.userId}).replace(/\\\"/g,'\\\"\\\"'),a=/^[\\\\w]+-[\\\\w]+-[\\\\w]+?/.test(i)?i:(this.initiator||\\\"L\\\")+\\\"-\\\"+i+\\\"-O\\\",u={sessionId:e.sessionId,time:s,level:4-t,content:e.sessionId+\\\",\\\"+Date.now()+\\\",\\\"+r+\\\",\\\"+(4-t)+\\\",\\\"+a+',\\\"'+o+'\\\"\\\\n',userId:e.userId};e.databaseLogList.push(u),(e.databaseLogList.length>=100||t===A.FATAL)&&this.__insertLogIntoDatabase()},e.prototype.__insertLogIntoDatabase=function(){return w(this,void 0,void 0,(function(){var t,n,i;return b(this,(function(r){switch(r.label){case 0:return t=M([],e.databaseLogList),e.databaseLogList=[],(n=q.getInstance())?[4,n.addList(B,t)]:[3,3];case 1:return i=r.sent(),[4,n.getCount(B,\\\"time\\\")];case 2:return r.sent()>1e5&&n.removeFirstData(B,\\\"time\\\",2e3),[2,i];case 3:return[2,!1]}}))}))},e.prototype.setLogLevel=function(e){this._outLevel=\\\"number\\\"!=typeof e?A.WARN:e},e.prototype.setLogStdout=function(e){this._logStdout=e},e.prototype.log=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(e>A.DEBUG&&this.__pushLocalLog(e,t.map(de).join(\\\" \\\"),this.tag),!(e<this._outLevel)){var i=(new Date).toISOString()+\\\"[\\\"+this.tag+\\\"][\\\"+A[e]+\\\"]\\\",r=i+\\\" - \\\"+t.map(de).join(\\\" \\\");this._logStdout?this._logStdout(e,r):this._stdout?this._stdout(e,r):this._defaultStdout.apply(this,M([e,i],t))}},e.prototype.reportLog=function(t,n,i){this.__pushLocalLog(4-t,i,n);var r=JSON.stringify({message:i}).replace(/\\\"/g,'\\\"\\\"');r='\\\"'+r+'\\\"';var s={level:t,content:[e.sessionId,Date.now(),this.type,t,n,r].join()+\\\"\\\\n\\\"};e.realTimeLogList.push(s),e.realTimeLogList.length>=600&&(e.realTimeLogList=e.realTimeLogList.slice(-500))},e.prototype.set=function(e,t){this.warn(\\\"logger.set has being deprecated!\\\")},e.prototype.setStdout=function(e){this._stdout=e},e.prototype.__clearRealTimeLog=function(){e.realTimeLogList=[]},e.databaseLogList=[],e.realTimeLogList=[],e.sessionId=H(),e.userId=\\\"\\\",e}(),pe=new fe(\\\"RCLog\\\"),ge=function(){function e(){this._map={}}return e.prototype.on=function(e,t,n){var i=this._map[e]||(this._map[e]=[]);i.some((function(e){return e.listener===t&&e.target===n}))||i.push({listener:t,target:n})},e.prototype.once=function(e,t,n){var i=this._map[e]||(this._map[e]=[]);i.some((function(e){return e.listener===t&&e.target===n}))||i.push({listener:t,target:n,once:!0})},e.prototype.off=function(e,t,n){var i=this._map[e];i&&((i=i.filter((function(e){return e.listener!==t||e.target!==n}))).length?this._map[e]=i:delete this._map[e])},e.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=this._map[e];if(i)for(var r=i.length-1;r>=0;r-=1){var s=i[r],o=s.target,a=s.once,u=s.listener;a&&i.splice(r,1);try{u.call.apply(u,M([o],t))}catch(e){pe.error(e)}}},e.prototype.removeAll=function(e){delete this._map[e]},e.prototype.clear=function(){Object.keys(this._map).forEach(this.removeAll,this)},e}();!function(e){e[e.SEND=1]=\\\"SEND\\\",e[e.RECEIVE=2]=\\\"RECEIVE\\\"}(le||(le={}));var _e,ye=le;!function(e){e[e.TIMEOUT=-1]=\\\"TIMEOUT\\\",e[e.UNKNOWN=-2]=\\\"UNKNOWN\\\",e[e.PARAMETER_ERROR=-3]=\\\"PARAMETER_ERROR\\\",e[e.EXTRA_METHOD_UNDEFINED=-4]=\\\"EXTRA_METHOD_UNDEFINED\\\",e[e.MAIN_PROCESS_ERROR=-5]=\\\"MAIN_PROCESS_ERROR\\\",e[e.PARAMETER_CHANGED=-6]=\\\"PARAMETER_CHANGED\\\",e[e.SUCCESS=0]=\\\"SUCCESS\\\",e[e.RC_MSG_UNAUTHORIZED=20406]=\\\"RC_MSG_UNAUTHORIZED\\\",e[e.RC_DISCUSSION_GROUP_ID_INVALID=20407]=\\\"RC_DISCUSSION_GROUP_ID_INVALID\\\",e[e.SEND_FREQUENCY_TOO_FAST=20604]=\\\"SEND_FREQUENCY_TOO_FAST\\\",e[e.NOT_IN_DISCUSSION=21406]=\\\"NOT_IN_DISCUSSION\\\",e[e.FORBIDDEN_IN_GROUP=22408]=\\\"FORBIDDEN_IN_GROUP\\\",e[e.RECALL_MESSAGE=25101]=\\\"RECALL_MESSAGE\\\",e[e.NOT_IN_GROUP=22406]=\\\"NOT_IN_GROUP\\\",e[e.NOT_IN_CHATROOM=23406]=\\\"NOT_IN_CHATROOM\\\",e[e.FORBIDDEN_IN_CHATROOM=23408]=\\\"FORBIDDEN_IN_CHATROOM\\\",e[e.RC_CHATROOM_USER_KICKED=23409]=\\\"RC_CHATROOM_USER_KICKED\\\",e[e.RC_CHATROOM_NOT_EXIST=23410]=\\\"RC_CHATROOM_NOT_EXIST\\\",e[e.RC_CHATROOM_IS_FULL=23411]=\\\"RC_CHATROOM_IS_FULL\\\",e[e.RC_CHATROOM_PATAMETER_INVALID=23412]=\\\"RC_CHATROOM_PATAMETER_INVALID\\\",e[e.CHATROOM_GET_HISTORYMSG_ERROR=23413]=\\\"CHATROOM_GET_HISTORYMSG_ERROR\\\",e[e.CHATROOM_NOT_OPEN_HISTORYMSG_STORE=23414]=\\\"CHATROOM_NOT_OPEN_HISTORYMSG_STORE\\\",e[e.CHATROOM_KV_EXCEED=23423]=\\\"CHATROOM_KV_EXCEED\\\",e[e.CHATROOM_KV_OVERWRITE_INVALID=23424]=\\\"CHATROOM_KV_OVERWRITE_INVALID\\\",e[e.CHATROOM_KV_STORE_NOT_OPEN=23426]=\\\"CHATROOM_KV_STORE_NOT_OPEN\\\",e[e.CHATROOM_KEY_NOT_EXIST=23427]=\\\"CHATROOM_KEY_NOT_EXIST\\\",e[e.SENSITIVE_SHIELD=21501]=\\\"SENSITIVE_SHIELD\\\",e[e.SENSITIVE_REPLACE=21502]=\\\"SENSITIVE_REPLACE\\\",e[e.JOIN_IN_DISCUSSION=21407]=\\\"JOIN_IN_DISCUSSION\\\",e[e.CREATE_DISCUSSION=21408]=\\\"CREATE_DISCUSSION\\\",e[e.INVITE_DICUSSION=21409]=\\\"INVITE_DICUSSION\\\",e[e.GET_USERINFO_ERROR=23407]=\\\"GET_USERINFO_ERROR\\\",e[e.REJECTED_BY_BLACKLIST=405]=\\\"REJECTED_BY_BLACKLIST\\\",e[e.RC_NET_CHANNEL_INVALID=30001]=\\\"RC_NET_CHANNEL_INVALID\\\",e[e.RC_NET_UNAVAILABLE=30002]=\\\"RC_NET_UNAVAILABLE\\\",e[e.RC_MSG_RESP_TIMEOUT=30003]=\\\"RC_MSG_RESP_TIMEOUT\\\",e[e.RC_HTTP_SEND_FAIL=30004]=\\\"RC_HTTP_SEND_FAIL\\\",e[e.RC_HTTP_REQ_TIMEOUT=30005]=\\\"RC_HTTP_REQ_TIMEOUT\\\",e[e.RC_HTTP_RECV_FAIL=30006]=\\\"RC_HTTP_RECV_FAIL\\\",e[e.RC_NAVI_RESOURCE_ERROR=30007]=\\\"RC_NAVI_RESOURCE_ERROR\\\",e[e.RC_NODE_NOT_FOUND=30008]=\\\"RC_NODE_NOT_FOUND\\\",e[e.RC_DOMAIN_NOT_RESOLVE=30009]=\\\"RC_DOMAIN_NOT_RESOLVE\\\",e[e.RC_SOCKET_NOT_CREATED=30010]=\\\"RC_SOCKET_NOT_CREATED\\\",e[e.RC_SOCKET_DISCONNECTED=30011]=\\\"RC_SOCKET_DISCONNECTED\\\",e[e.RC_PING_SEND_FAIL=30012]=\\\"RC_PING_SEND_FAIL\\\",e[e.RC_PONG_RECV_FAIL=30013]=\\\"RC_PONG_RECV_FAIL\\\",e[e.RC_MSG_SEND_FAIL=30014]=\\\"RC_MSG_SEND_FAIL\\\",e[e.RC_MSG_CONTENT_EXCEED_LIMIT=30016]=\\\"RC_MSG_CONTENT_EXCEED_LIMIT\\\",e[e.RC_CONN_ACK_TIMEOUT=31e3]=\\\"RC_CONN_ACK_TIMEOUT\\\",e[e.RC_CONN_PROTO_VERSION_ERROR=31001]=\\\"RC_CONN_PROTO_VERSION_ERROR\\\",e[e.RC_CONN_ID_REJECT=31002]=\\\"RC_CONN_ID_REJECT\\\",e[e.RC_CONN_SERVER_UNAVAILABLE=31003]=\\\"RC_CONN_SERVER_UNAVAILABLE\\\",e[e.RC_CONN_USER_OR_PASSWD_ERROR=31004]=\\\"RC_CONN_USER_OR_PASSWD_ERROR\\\",e[e.RC_CONN_NOT_AUTHRORIZED=31005]=\\\"RC_CONN_NOT_AUTHRORIZED\\\",e[e.RC_CONN_REDIRECTED=31006]=\\\"RC_CONN_REDIRECTED\\\",e[e.RC_CONN_PACKAGE_NAME_INVALID=31007]=\\\"RC_CONN_PACKAGE_NAME_INVALID\\\",e[e.RC_CONN_APP_BLOCKED_OR_DELETED=31008]=\\\"RC_CONN_APP_BLOCKED_OR_DELETED\\\",e[e.RC_CONN_USER_BLOCKED=31009]=\\\"RC_CONN_USER_BLOCKED\\\",e[e.RC_DISCONN_KICK=31010]=\\\"RC_DISCONN_KICK\\\",e[e.RC_DISCONN_EXCEPTION=31011]=\\\"RC_DISCONN_EXCEPTION\\\",e[e.RC_APP_AUTH_NOT_PASS=31026]=\\\"RC_APP_AUTH_NOT_PASS\\\",e[e.RC_OTP_USED=31027]=\\\"RC_OTP_USED\\\",e[e.RC_PLATFORM_ERROR=31028]=\\\"RC_PLATFORM_ERROR\\\",e[e.RC_QUERY_ACK_NO_DATA=32001]=\\\"RC_QUERY_ACK_NO_DATA\\\",e[e.RC_MSG_DATA_INCOMPLETE=32002]=\\\"RC_MSG_DATA_INCOMPLETE\\\",e[e.BIZ_ERROR_CLIENT_NOT_INIT=33001]=\\\"BIZ_ERROR_CLIENT_NOT_INIT\\\",e[e.BIZ_ERROR_DATABASE_ERROR=33002]=\\\"BIZ_ERROR_DATABASE_ERROR\\\",e[e.BIZ_ERROR_INVALID_PARAMETER=33003]=\\\"BIZ_ERROR_INVALID_PARAMETER\\\",e[e.BIZ_ERROR_NO_CHANNEL=33004]=\\\"BIZ_ERROR_NO_CHANNEL\\\",e[e.BIZ_ERROR_RECONNECT_SUCCESS=33005]=\\\"BIZ_ERROR_RECONNECT_SUCCESS\\\",e[e.BIZ_ERROR_CONNECTING=33006]=\\\"BIZ_ERROR_CONNECTING\\\",e[e.MSG_ROAMING_SERVICE_UNAVAILABLE=33007]=\\\"MSG_ROAMING_SERVICE_UNAVAILABLE\\\",e[e.MSG_INSERT_ERROR=33008]=\\\"MSG_INSERT_ERROR\\\",e[e.MSG_DEL_ERROR=33009]=\\\"MSG_DEL_ERROR\\\",e[e.TAG_EXISTS=33101]=\\\"TAG_EXISTS\\\",e[e.TAG_NOT_EXIST=33100]=\\\"TAG_NOT_EXIST\\\",e[e.NO_TAG_IN_CONVER=33102]=\\\"NO_TAG_IN_CONVER\\\",e[e.CONVER_REMOVE_ERROR=34001]=\\\"CONVER_REMOVE_ERROR\\\",e[e.CONVER_GETLIST_ERROR=34002]=\\\"CONVER_GETLIST_ERROR\\\",e[e.CONVER_SETOP_ERROR=34003]=\\\"CONVER_SETOP_ERROR\\\",e[e.CONVER_TOTAL_UNREAD_ERROR=34004]=\\\"CONVER_TOTAL_UNREAD_ERROR\\\",e[e.CONVER_TYPE_UNREAD_ERROR=34005]=\\\"CONVER_TYPE_UNREAD_ERROR\\\",e[e.CONVER_ID_TYPE_UNREAD_ERROR=34006]=\\\"CONVER_ID_TYPE_UNREAD_ERROR\\\",e[e.CONVER_CLEAR_ERROR=34007]=\\\"CONVER_CLEAR_ERROR\\\",e[e.EXPANSION_LIMIT_EXCEET=34010]=\\\"EXPANSION_LIMIT_EXCEET\\\",e[e.MESSAGE_KV_NOT_SUPPORT=34008]=\\\"MESSAGE_KV_NOT_SUPPORT\\\",e[e.CLEAR_HIS_TIME_ERROR=34011]=\\\"CLEAR_HIS_TIME_ERROR\\\",e[e.CONVER_OUT_LIMIT_ERROR=34013]=\\\"CONVER_OUT_LIMIT_ERROR\\\",e[e.CONVER_GET_ERROR=35021]=\\\"CONVER_GET_ERROR\\\",e[e.GROUP_SYNC_ERROR=35001]=\\\"GROUP_SYNC_ERROR\\\",e[e.GROUP_MATCH_ERROR=35002]=\\\"GROUP_MATCH_ERROR\\\",e[e.READ_RECEIPT_ERROR=35003]=\\\"READ_RECEIPT_ERROR\\\",e[e.PACKAGE_ENVIRONMENT_ERROR=35006]=\\\"PACKAGE_ENVIRONMENT_ERROR\\\",e[e.CAN_NOT_RECONNECT=35007]=\\\"CAN_NOT_RECONNECT\\\",e[e.SERVER_UNAVAILABLE=35008]=\\\"SERVER_UNAVAILABLE\\\",e[e.HOSTNAME_ERROR=35009]=\\\"HOSTNAME_ERROR\\\",e[e.HAS_OHTER_SAME_CLIENT_ON_LINE=35010]=\\\"HAS_OHTER_SAME_CLIENT_ON_LINE\\\",e[e.UPLOAD_FILE_FAILED=35020]=\\\"UPLOAD_FILE_FAILED\\\",e[e.CHATROOM_ID_ISNULL=36001]=\\\"CHATROOM_ID_ISNULL\\\",e[e.CHARTOOM_JOIN_ERROR=36002]=\\\"CHARTOOM_JOIN_ERROR\\\",e[e.CHATROOM_HISMESSAGE_ERROR=36003]=\\\"CHATROOM_HISMESSAGE_ERROR\\\",e[e.CHATROOM_KV_NOT_FOUND=36004]=\\\"CHATROOM_KV_NOT_FOUND\\\",e[e.BLACK_ADD_ERROR=37001]=\\\"BLACK_ADD_ERROR\\\",e[e.BLACK_GETSTATUS_ERROR=37002]=\\\"BLACK_GETSTATUS_ERROR\\\",e[e.BLACK_REMOVE_ERROR=37003]=\\\"BLACK_REMOVE_ERROR\\\",e[e.DRAF_GET_ERROR=38001]=\\\"DRAF_GET_ERROR\\\",e[e.DRAF_SAVE_ERROR=38002]=\\\"DRAF_SAVE_ERROR\\\",e[e.DRAF_REMOVE_ERROR=38003]=\\\"DRAF_REMOVE_ERROR\\\",e[e.SUBSCRIBE_ERROR=39001]=\\\"SUBSCRIBE_ERROR\\\",e[e.NOT_SUPPORT=39002]=\\\"NOT_SUPPORT\\\",e[e.QNTKN_FILETYPE_ERROR=41001]=\\\"QNTKN_FILETYPE_ERROR\\\",e[e.QNTKN_GET_ERROR=41002]=\\\"QNTKN_GET_ERROR\\\",e[e.COOKIE_ENABLE=51001]=\\\"COOKIE_ENABLE\\\",e[e.GET_MESSAGE_BY_ID_ERROR=61001]=\\\"GET_MESSAGE_BY_ID_ERROR\\\",e[e.HAVNODEVICEID=24001]=\\\"HAVNODEVICEID\\\",e[e.DEVICEIDISHAVE=24002]=\\\"DEVICEIDISHAVE\\\",e[e.FEILD=24009]=\\\"FEILD\\\",e[e.VOIPISNULL=24013]=\\\"VOIPISNULL\\\",e[e.NOENGINETYPE=24010]=\\\"NOENGINETYPE\\\",e[e.NULLCHANNELNAME=24011]=\\\"NULLCHANNELNAME\\\",e[e.VOIPDYANMICERROR=24012]=\\\"VOIPDYANMICERROR\\\",e[e.NOVOIP=24014]=\\\"NOVOIP\\\",e[e.INTERNALERRROR=24015]=\\\"INTERNALERRROR\\\",e[e.VOIPCLOSE=24016]=\\\"VOIPCLOSE\\\",e[e.CLOSE_BEFORE_OPEN=51001]=\\\"CLOSE_BEFORE_OPEN\\\",e[e.ALREADY_IN_USE=51002]=\\\"ALREADY_IN_USE\\\",e[e.INVALID_CHANNEL_NAME=51003]=\\\"INVALID_CHANNEL_NAME\\\",e[e.VIDEO_CONTAINER_IS_NULL=51004]=\\\"VIDEO_CONTAINER_IS_NULL\\\",e[e.DELETE_MESSAGE_ID_IS_NULL=61001]=\\\"DELETE_MESSAGE_ID_IS_NULL\\\",e[e.CANCEL=1]=\\\"CANCEL\\\",e[e.REJECT=2]=\\\"REJECT\\\",e[e.HANGUP=3]=\\\"HANGUP\\\",e[e.BUSYLINE=4]=\\\"BUSYLINE\\\",e[e.NO_RESPONSE=5]=\\\"NO_RESPONSE\\\",e[e.ENGINE_UN_SUPPORTED=6]=\\\"ENGINE_UN_SUPPORTED\\\",e[e.NETWORK_ERROR=7]=\\\"NETWORK_ERROR\\\",e[e.REMOTE_CANCEL=11]=\\\"REMOTE_CANCEL\\\",e[e.REMOTE_REJECT=12]=\\\"REMOTE_REJECT\\\",e[e.REMOTE_HANGUP=13]=\\\"REMOTE_HANGUP\\\",e[e.REMOTE_BUSYLINE=14]=\\\"REMOTE_BUSYLINE\\\",e[e.REMOTE_NO_RESPONSE=15]=\\\"REMOTE_NO_RESPONSE\\\",e[e.REMOTE_ENGINE_UN_SUPPORTED=16]=\\\"REMOTE_ENGINE_UN_SUPPORTED\\\",e[e.REMOTE_NETWORK_ERROR=17]=\\\"REMOTE_NETWORK_ERROR\\\",e[e.VOIP_NOT_AVALIABLE=18]=\\\"VOIP_NOT_AVALIABLE\\\",e[e.CHATROOM_KV_STORE_NOT_ALL_SUCCESS=23428]=\\\"CHATROOM_KV_STORE_NOT_ALL_SUCCESS\\\",e[e.CHATROOM_KV_STORE_OUT_LIMIT=23429]=\\\"CHATROOM_KV_STORE_OUT_LIMIT\\\"}(_e||(_e={}));var ve,Ee=_e;!function(e){e[e.CONNECTED=0]=\\\"CONNECTED\\\",e[e.CONNECTING=1]=\\\"CONNECTING\\\",e[e.DISCONNECTED=2]=\\\"DISCONNECTED\\\",e[e.NETWORK_UNAVAILABLE=3]=\\\"NETWORK_UNAVAILABLE\\\",e[e.CONNECTION_CLOSED=4]=\\\"CONNECTION_CLOSED\\\",e[e.KICKED_OFFLINE_BY_OTHER_CLIENT=6]=\\\"KICKED_OFFLINE_BY_OTHER_CLIENT\\\",e[e.WEBSOCKET_UNAVAILABLE=7]=\\\"WEBSOCKET_UNAVAILABLE\\\",e[e.WEBSOCKET_ERROR=8]=\\\"WEBSOCKET_ERROR\\\",e[e.BLOCKED=9]=\\\"BLOCKED\\\",e[e.DOMAIN_INCORRECT=12]=\\\"DOMAIN_INCORRECT\\\",e[e.DISCONNECT_BY_SERVER=13]=\\\"DISCONNECT_BY_SERVER\\\",e[e.REDIRECT=14]=\\\"REDIRECT\\\",e[e.APPKEY_IS_FAKE=20]=\\\"APPKEY_IS_FAKE\\\",e[e.ULTRALIMIT=1101]=\\\"ULTRALIMIT\\\",e[e.REQUEST_NAVI=201]=\\\"REQUEST_NAVI\\\",e[e.RESPONSE_NAVI=202]=\\\"RESPONSE_NAVI\\\",e[e.RESPONSE_NAVI_ERROR=203]=\\\"RESPONSE_NAVI_ERROR\\\",e[e.RESPONSE_NAVI_TIMEOUT=204]=\\\"RESPONSE_NAVI_TIMEOUT\\\"}(ve||(ve={}));var me,Ie=ve,Te={ACCEPTED:0,UNACCEPTABLE_PROTOCOL_VERSION:1,IDENTIFIER_REJECTED:2,SERVER_UNAVAILABLE:3,TOKEN_INCORRECT:4,NOT_AUTHORIZED:5,REDIRECT:6,PACKAGE_ERROR:7,APP_BLOCK_OR_DELETE:8,BLOCK:9,TOKEN_EXPIRE:10,DEVICE_ERROR:11,HOSTNAME_ERROR:12,HASOHTERSAMECLIENTONLINE:13,IN_OTHER_CLUSTER:15,APP_AUTH_NOT_PASS:16,OTP_USED:17,PLATFORM_ERROR:18};!function(e){e.TextMessage=\\\"RC:TxtMsg\\\",e.VOICE=\\\"RC:VcMsg\\\",e.HQ_VOICE=\\\"RC:HQVCMsg\\\",e.IMAGE=\\\"RC:ImgMsg\\\",e.GIF=\\\"RC:GIFMsg\\\",e.RICH_CONTENT=\\\"RC:ImgTextMsg\\\",e.LOCATION=\\\"RC:LBSMsg\\\",e.FILE=\\\"RC:FileMsg\\\",e.SIGHT=\\\"RC:SightMsg\\\",e.COMBINE=\\\"RC:CombineMsg\\\",e.CHRM_KV_NOTIFY=\\\"RC:chrmKVNotiMsg\\\",e.LOG_COMMAND=\\\"RC:LogCmdMsg\\\",e.EXPANSION_NOTIFY=\\\"RC:MsgExMsg\\\",e.REFERENCE=\\\"RC:ReferenceMsg\\\",e.RECALL=\\\"RC:RcCmd\\\",e.READ_RECEIPT=\\\"RC:ReadNtf\\\",e.READ_RECEIPT_REQUEST=\\\"RC:RRReqMsg\\\",e.READ_RECEIPT_RESPONSE=\\\"RC:RRRspMsg\\\",e.SYNC_READ_STATUS=\\\"RC:SRSMsg\\\",e.GROUP_READ_RECEIPT_REQUEST=\\\"RC:RRMsg\\\",e.CHATROOM_JOIN=\\\"RC:ChrmJoinNtf\\\",e.CHATROOM_LEFT=\\\"RC:ChrmQuitNtf\\\",e.CHATROOM_MERGE_CHANGE=\\\"RC:ChrmMemChange\\\",e.TYPING_STATUS=\\\"RC:TypSts\\\",e.INTERCEPT=\\\"RC:InterceptMsg\\\"}(me||(me={}));var Ce,Re=me;!function(e){e[e.OPEN=1]=\\\"OPEN\\\",e[e.CLOSE=2]=\\\"CLOSE\\\"}(Ce||(Ce={}));var Se,Ne=Ce;!function(e){e[e.ALL=1]=\\\"ALL\\\",e[e.SINGAL=2]=\\\"SINGAL\\\"}(Se||(Se={}));var Oe,we=Se;!function(e){e[e.QINIU=1]=\\\"QINIU\\\",e[e.ALI=2]=\\\"ALI\\\",e[e.AWS=3]=\\\"AWS\\\",e[e.STC=4]=\\\"STC\\\"}(Oe||(Oe={}));var be,Me=Oe;!function(e){e[e.UPDATE=1]=\\\"UPDATE\\\",e[e.DELETE=2]=\\\"DELETE\\\"}(be||(be={}));var Ae,Ue=be;!function(e){e[e.QUIT=0]=\\\"QUIT\\\",e[e.JOIN=1]=\\\"JOIN\\\"}(Ae||(Ae={}));var Le,Pe=Ae;!function(e){\\n/*!\\n    全局敏感词：命中了融云内置的全局敏感词\\n   */\\ne[e.GLOBAL=1]=\\\"GLOBAL\\\",\\n/*!\\n     自定义敏感词拦截：命中了客户在融云自定义的敏感词\\n    */\\ne[e.CUSTOM=2]=\\\"CUSTOM\\\",\\n/*!\\n     第三方审核拦截：命中了第三方（数美）或模板路由决定不下发的状态\\n    */\\ne[e.THIRD_PARTY=3]=\\\"THIRD_PARTY\\\"}(Le||(Le={}));var De,Ve,ke,xe=Le;!function(e){e[e.RTC=0]=\\\"RTC\\\",e[e.LIVE=2]=\\\"LIVE\\\"}(De||(De={})),function(e){e[e.AUDIO_AND_VIDEO=0]=\\\"AUDIO_AND_VIDEO\\\",e[e.AUDIO=1]=\\\"AUDIO\\\"}(Ve||(Ve={})),function(e){e[e.ANCHOR=1]=\\\"ANCHOR\\\",e[e.AUDIENCE=2]=\\\"AUDIENCE\\\"}(ke||(ke={}));var Be,Fe,Ke,qe={\\\"RC:VCAccept\\\":\\\"RC:VCAccept\\\",\\\"RC:VCRinging\\\":\\\"RC:VCRinging\\\",\\\"RC:VCSummary\\\":\\\"RC:VCSummary\\\",\\\"RC:VCHangup\\\":\\\"RC:VCHangup\\\",\\\"RC:VCInvite\\\":\\\"RC:VCInvite\\\",\\\"RC:VCModifyMedia\\\":\\\"RC:VCModifyMedia\\\",\\\"RC:VCModifyMem\\\":\\\"RC:VCModifyMem\\\"};!function(e){e[e.ROOM=1]=\\\"ROOM\\\",e[e.PERSON=2]=\\\"PERSON\\\"}(Be||(Be={})),function(e){e[e.AnchorToViewer=1]=\\\"AnchorToViewer\\\",e[e.ViewerToAnchor=2]=\\\"ViewerToAnchor\\\"}(Fe||(Fe={})),function(e){e[e.KICK=0]=\\\"KICK\\\",e[e.REFUSE=1]=\\\"REFUSE\\\",e[e.COEXIST=2]=\\\"COEXIST\\\"}(Ke||(Ke={}));var Ye,He,Ge={engine:\\\"5.1.2\\\"},je=function(){function e(){}return e.add=function(e,t){Ge[e]=t},e.validEngine=function(e){var t=e.match(/\\\\d+\\\\.\\\\d+\\\\.\\\\d+/);if(!t)return pe.warn(\\\"The validation engine version '\\\"+e+\\\"' is invalid!\\\"),!1;var n=t[0].split(\\\".\\\").map((function(e){return e.padStart(3,\\\"0\\\")})).join(\\\"\\\");return Ge.engine.match(/\\\\d+\\\\.\\\\d+\\\\.\\\\d+/)[0].split(\\\".\\\").map((function(e){return e.padStart(3,\\\"0\\\")})).join(\\\"\\\")>=n},e.getInfo=function(){return Ge},e}();!function(e){e[e.STRING=0]=\\\"STRING\\\",e[e.ONLY_STRING=1]=\\\"ONLY_STRING\\\",e[e.NUMBER=2]=\\\"NUMBER\\\",e[e.BOOLEAN=3]=\\\"BOOLEAN\\\",e[e.OBJECT=4]=\\\"OBJECT\\\",e[e.ARRAY=5]=\\\"ARRAY\\\",e[e.CALLBACK=6]=\\\"CALLBACK\\\",e[e.CHANNEL_ID=7]=\\\"CHANNEL_ID\\\"}(He||(He={}));var Qe,We,Je,ze,Ze,Xe=((Ye={})[He.STRING]=ee,Ye[He.ONLY_STRING]=J,Ye[He.NUMBER]=Z,Ye[He.BOOLEAN]=function(e){return\\\"boolean\\\"==typeof e},Ye[He.OBJECT]=ne,Ye[He.ARRAY]=X,Ye[He.CALLBACK]=function(e){var t=!0;return ne(e)||(t=!1),(e=e||{}).onSuccess&&!ie(e.onSuccess)&&(t=!1),e.onError&&!ie(e.onError)&&(t=!1),t},Ye[He.CHANNEL_ID]=function(e){var t=!1;return J(e)&&!/_/g.test(e)&&e.length<=20&&(t=!0),t},Ye),$e=function(e){function t(t){var n=e.call(this,t)||this;return n.name=\\\"RCAssertError\\\",n}return N(t,e),t}(Error),et=function(e,t,n,i){if(void 0===i&&(i=!1),!tt(e,t,n,i))throw new $e(\\\"'\\\"+e+\\\"' is invalid: \\\"+JSON.stringify(t))},tt=function(e,t,n,i){void 0===i&&(i=!1),n=Xe[n]||n;var r=i&&!n(t)||!i&&!(re(t)||null===t||n(t));return r&&pe.error(\\\"'\\\"+e+\\\"' is invalid: \\\"+JSON.stringify(t)),!r},nt=function(e){if(!ne(e)||void 0===e.low||void 0===e.high)return e;var t=e.low;return t<0&&(t+=4294967296),t=t.toString(16),parseInt(e.high.toString(16)+\\\"00000000\\\".replace(new RegExp(\\\"0{\\\"+t.length+\\\"}$\\\"),t),16)},it=function(e,t){var n=Math.floor(1e3*Math.random()%1e4),i=Y(),r=function(e){e=e||\\\"-\\\";var t=new Date;return\\\"\\\"+t.getFullYear()+e+(t.getMonth()+1)+e+t.getDate()}(),s=(new Date).getTime(),o=\\\"\\\";if(t){var a=t.split(\\\".\\\");o=\\\".\\\"+a[a.length-1]}return e+\\\"__RC-\\\"+r+\\\"_\\\"+n+\\\"_\\\"+s+i+o},rt=function(e){var t=\\\"application/octet-stream\\\";switch(e){case W.IMAGE:t=\\\"image/jpeg\\\";break;case W.AUDIO:t=\\\"audio/amr\\\";break;case W.VIDEO:t=\\\"video/3gpp\\\";break;case W.SIGHT:t=\\\"video/mpeg4\\\";break;case W.COMBINE_HTML:t=\\\"text/html\\\"}return t},st=function(e,t){void 0===e&&(e={}),void 0===t&&(t={});var n=e.threadId,i=e.apnsCollapseId,r=e.category,s=e.richMediaUri,o=t.channelIdMi,a=t.channelIdHW,u=t.channelIdOPPO,c=t.typeVivo,h=t.googleConfig,l={};l[\\\"thread-id\\\"]=n||\\\"\\\",l[\\\"apns-collapse-id\\\"]=i||\\\"\\\",l.category=r||\\\"\\\",l.richMediaUri=s||\\\"\\\";var d={};d.collapse_key=null==h?void 0:h.collapseKey,d.imageUrl=null==h?void 0:h.imageUrl;var f=null==h?void 0:h.priority;f&&![\\\"high\\\",\\\"normal\\\"].includes(f)&&(f=\\\"normal\\\"),d.priority=f;var p=[{HW:{channelId:a||\\\"\\\"}},{MI:{channelId:o||\\\"\\\"}},{OPPO:{channelId:u||\\\"\\\"}},{VIVO:{classification:c||\\\"\\\"}},{APNS:l},{FCM:d}];return JSON.stringify(p)},ot=function(e,t){var n={},i={notificationId:t||\\\"\\\"};if(!e)return{iOSConfig:n,androidConfig:i};try{var r=JSON.parse(e);null==r||r.forEach((function(e){var t,r,s,o,a=Object.keys(e);if(0!==a.length){var u=a[0];switch(u){case\\\"HW\\\":return void(i.channelIdHW=null===(t=e[u])||void 0===t?void 0:t.channelId);case\\\"MI\\\":return void(i.channelIdMi=null===(r=e[u])||void 0===r?void 0:r.channelId);case\\\"OPPO\\\":return void(i.channelIdOPPO=null===(s=e[u])||void 0===s?void 0:s.channelId);case\\\"VIVO\\\":return void(i.typeVivo=null===(o=e[u])||void 0===o?void 0:o.classification);case\\\"APNS\\\":return n.threadId=e[u][\\\"thread-id\\\"],n.apnsCollapseId=e[u][\\\"apns-collapse-id\\\"],n.category=e[u].category,void(n.richMediaUri=e[u].richMediaUri);case\\\"FCM\\\":i.googleConfig={collapseKey:e[u].collapse_key||\\\"\\\",imageUrl:e[u].imageUrl||\\\"\\\",priority:e[u].priority||\\\"\\\"}}}}))}catch(t){pe.error(\\\"Wrong format for pushConfigs field! content: \\\"+e)}return{iOSConfig:n,androidConfig:i}},at=function(e){var t=/^[A-Za-z0-9_=+-]+$/.test(e),n=e.length;return t&&(n<=128&&n>=1)},ut=function(e){var t=e.length;return t<=4096&&t>=1},ct=function(e,t,n){t=t||function(){};var i=(n=n||{}).isReverse;ne(e)&&function(){for(var n in e)t(e[n],n,e)}(),(X(e)||J(e))&&function(){if(i)for(var n=e.length-1;n>=0;n--)t(e[n],n);else for(var r=0,s=e.length;r<s;r++)t(e[r],r)}()},ht=function(e,t){return ct(e,(function(n,i){e[i]=t(n,i)})),e},lt=function(e,t){if(e.indexOf)return e.indexOf(t);var n=-1;return ct(e,(function(e,i){t===e&&(n=i)})),n},dt=function(e,t){return-1!==lt(e,t)},ft=function(e,t){var n=[];return ct(e,(function(e){n.push(e)})),-1!==lt(n,t)},pt=function(e){return JSON.parse(JSON.stringify(e))},gt=function(){return\\\"undefined\\\"!=typeof RCCppEngine},_t=function(e){if(\\\"browser\\\"!==e.tag)return{type:e.tag,version:\\\"UnKonw\\\"};var t,n,i=navigator.userAgent,r={IE:/rv:([\\\\d.]+)\\\\) like Gecko|MSIE ([\\\\d.]+)/,Edge:/Edge\\\\/([\\\\d.]+)/,Firefox:/Firefox\\\\/([\\\\d.]+)/,Opera:/(?:OPERA|OPR).([\\\\d.]+)/,WeChat:/MicroMessenger\\\\/([\\\\d.]+)/,QQBrowser:/QQBrowser\\\\/([\\\\d.]+)/,Chrome:/Chrome\\\\/([\\\\d.]+)/,Safari:/Version\\\\/([\\\\d.]+).*Safari/,iOSChrome:/Mobile\\\\/([\\\\d.]+).*Safari/};for(var s in r)if(r.hasOwnProperty(s)){var o=i.match(r[s]);if(o){n=s,t=o[1]||o[2];break}}return{type:n||\\\"UnKonw\\\",version:t||\\\"UnKonw\\\"}},yt=function(e){switch(e){case Te.SERVER_UNAVAILABLE:return Ee.SERVER_UNAVAILABLE;case Te.TOKEN_INCORRECT:return Ee.RC_CONN_USER_OR_PASSWD_ERROR;case Te.REDIRECT:return Ee.RC_CONN_REDIRECTED;case Te.APP_BLOCK_OR_DELETE:return Ee.RC_CONN_APP_BLOCKED_OR_DELETED;case Te.BLOCK:return Ee.RC_CONN_USER_BLOCKED;case Te.TOKEN_EXPIRE:return Ee.RC_CONN_USER_OR_PASSWD_ERROR;case Te.HOSTNAME_ERROR:return Ee.HOSTNAME_ERROR;case Te.HASOHTERSAMECLIENTONLINE:return Ee.HAS_OHTER_SAME_CLIENT_ON_LINE;case Te.APP_AUTH_NOT_PASS:return Ee.RC_APP_AUTH_NOT_PASS;case Te.OTP_USED:return Ee.RC_OTP_USED;case Te.PLATFORM_ERROR:return Ee.RC_PLATFORM_ERROR;default:return Ee.RC_NET_UNAVAILABLE}},vt=function(e){var t={},n=JSON.parse(e);return ct(n,(function(e,n){t[n]=e.v})),t},Et={_delayTime:0,setTime:function(e){var t=(new Date).getTime();Et._delayTime=t-e},getTime:function(){var e=Et._delayTime;return(new Date).getTime()-e}},mt=function(e,t){var n=0;return e.isAutoDelete&&(n|=1),e.isOverwrite&&(n|=2),2===t&&(n|=4),n};!function(e){e[e.AT_MOST_ONCE=0]=\\\"AT_MOST_ONCE\\\",e[e.AT_LEAST_ONCE=1]=\\\"AT_LEAST_ONCE\\\",e[e.EXACTLY_ONCE=2]=\\\"EXACTLY_ONCE\\\",e[e.DEFAULT=3]=\\\"DEFAULT\\\"}(Qe||(Qe={})),function(e){e[e.SYMMETRIC=0]=\\\"SYMMETRIC\\\",e[e.CONNECT=1]=\\\"CONNECT\\\",e[e.CONN_ACK=2]=\\\"CONN_ACK\\\",e[e.PUBLISH=3]=\\\"PUBLISH\\\",e[e.PUB_ACK=4]=\\\"PUB_ACK\\\",e[e.QUERY=5]=\\\"QUERY\\\",e[e.QUERY_ACK=6]=\\\"QUERY_ACK\\\",e[e.QUERY_CONFIRM=7]=\\\"QUERY_CONFIRM\\\",e[e.SUBSCRIBE=8]=\\\"SUBSCRIBE\\\",e[e.SUB_ACK=9]=\\\"SUB_ACK\\\",e[e.UNSUBSCRIBE=10]=\\\"UNSUBSCRIBE\\\",e[e.UNSUB_ACK=11]=\\\"UNSUB_ACK\\\",e[e.PING_REQ=12]=\\\"PING_REQ\\\",e[e.PING_RESP=13]=\\\"PING_RESP\\\",e[e.DISCONNECT=14]=\\\"DISCONNECT\\\",e[e.RESERVER2=15]=\\\"RESERVER2\\\"}(We||(We={})),function(e){e.CONN_ACK=\\\"ConnAckMessage\\\",e.DISCONNECT=\\\"DisconnectMessage\\\",e.PING_REQ=\\\"PingReqMessage\\\",e.PING_RESP=\\\"PingRespMessage\\\",e.PUBLISH=\\\"PublishMessage\\\",e.PUB_ACK=\\\"PubAckMessage\\\",e.QUERY=\\\"QueryMessage\\\",e.QUERY_CON=\\\"QueryConMessage\\\",e.QUERY_ACK=\\\"QueryAckMessage\\\"}(Je||(Je={})),function(e){e.PUB=\\\"pub\\\",e.QUERY=\\\"qry\\\"}(ze||(ze={})),function(e){e[e.V4=4]=\\\"V4\\\",e[e.V3=3]=\\\"V3\\\"}(Ze||(Ze={}));var It,Tt=function(){function e(e,t,n,i){void 0===t&&(t=!1),void 0===n&&(n=Qe.AT_LEAST_ONCE),void 0===i&&(i=!1),this._retain=!1,this.qos=Qe.AT_LEAST_ONCE,this._dup=!1,this.syncMsg=!1;var r=e>0;e&&r&&1===arguments.length?(this._retain=(1&e)>0,this.qos=(6&e)>>1,this._dup=(8&e)>0,this.type=e>>4&15,this.syncMsg=8==(8&e)):(this.type=e,this._retain=t,this.qos=n,this._dup=i)}return e.prototype.encode=function(){var e=this.type<<4;return e|=this._retain?1:0,e|=this.qos<<1,e|=this._dup?8:0},e}(),Ct=function(){function e(){}return e.writeUTF=function(e,t){var n=[],i=0;if(J(e))for(var r=0,s=e.length;r<s;r++){var o=e.charCodeAt(r);o>=0&&o<=127?(i+=1,n.push(o)):o>=128&&o<=2047?(i+=2,n.push(192|31&o>>6),n.push(128|63&o)):o>=2048&&o<=65535&&(i+=3,n.push(224|15&o>>12),n.push(128|63&o>>6),n.push(128|63&o))}for(r=0,s=n.length;r<s;r++)n[r]>255&&(n[r]&=255);return t?n:i<=255?[0,i].concat(n):[i>>8,255&i].concat(n)},e.readUTF=function(e){for(var t,n,i=[],r=-1,s=e,o=\\\"\\\";++r<s.length;){var a=Number(s[r]);if(a===(127&a)||(240==(240&a)?a=(a=(a=(a^=240)<<6|128^s[++r])<<6|128^s[++r])<<6|128^s[++r]:224==(224&a)?a=(a=(a^=224)<<6|128^s[++r])<<6|128^s[++r]:192==(192&a)&&(a=(a^=192)<<6|128^s[++r])),!isFinite(a)||a<0||a>1114111||Math.floor(a)!==a)throw RangeError(\\\"Invalid code point: \\\"+a);a<=65535?i.push(a):(t=(a-=65536)>>10|55296,n=a%1024|56320,i.push(t,n)),(r+1===s.length||i.length>16384)&&(o+=String.fromCharCode.apply(null,i),i.length=0)}return o},e}(),Rt=function(){function e(e){this._position=0,this._poolLen=0,this._pool=e,this._poolLen=e.length}return e.prototype.check=function(){return this._position>=this._pool.length},e.prototype.read2Byte=function(){var e=this;if(e.check())return-1;for(var t=\\\"\\\",n=0;n<2;n++){var i=e._pool[e._position++].toString(16);1===i.length&&(i=\\\"0\\\"+i),t+=i.toString()}return parseInt(t,16)},e.prototype.readInt=function(){var e=this;if(e.check())return-1;for(var t=\\\"\\\",n=0;n<4;n++){var i=e._pool[e._position++].toString(16);1===i.length&&(i=\\\"0\\\"+i),t+=i.toString()}return parseInt(t,16)},e.prototype.readLong=function(){var e=this;if(e.check())return-1;for(var t=\\\"\\\",n=0;n<8;n++){var i=e._pool[e._position++].toString(16);1===i.length&&(i=\\\"0\\\"+i),t+=i}return parseInt(t,16)},e.prototype.readByte=function(){if(this.check())return-1;var e=this._pool[this._position++];return e>255&&(e&=255),e},e.prototype.readUTF=function(){if(this.check())return\\\"\\\";var e=this.readByte()<<8|this.readByte(),t=this._pool.subarray(this._position,this._position+=e);return Ct.readUTF(t)},e.prototype.readAll=function(){return this._pool.subarray(this._position,this._poolLen)},e}(),St=function(){function e(){this._pool=[],this._position=0,this._writen=0}return e.prototype.write=function(e){return-1!==Object.prototype.toString.call(e).indexOf(\\\"Array\\\")?this._pool=this._pool.concat(e):e>=0&&(e>255&&(e&=255),this._pool.push(e),this._writen++),e},e.prototype.writeArr=function(e){return this._pool=this._pool.concat(e),e},e.prototype.writeUTF=function(e){var t=Ct.writeUTF(e);this._pool=this._pool.concat(t),this._writen+=t.length},e.prototype.getBytesArray=function(){return this._pool},e}(),Nt=\\\"UpStreamMessage\\\",Ot=\\\"PushExtra\\\",wt=\\\"DownStreamMessage\\\",bt=\\\"DownStreamMessages\\\",Mt=\\\"SessionsAttQryInput\\\",At=\\\"SessionsAttOutput\\\",Ut=\\\"SyncRequestMsg\\\",Lt=\\\"ChrmPullMsg\\\",Pt=\\\"NotifyMsg\\\",Dt=\\\"HistoryMsgInput\\\",Vt=\\\"HistoryMsgOuput\\\",kt=\\\"RelationQryInput\\\",xt=\\\"RelationsOutput\\\",Bt=\\\"DeleteSessionsInput\\\",Ft=\\\"SessionInfo\\\",Kt=\\\"DeleteSessionsOutput\\\",qt=\\\"RelationsInput\\\",Yt=\\\"DeleteMsgInput\\\",Ht=\\\"CleanHisMsgInput\\\",Gt=\\\"SessionMsgReadInput\\\",jt=\\\"ChrmInput\\\",Qt=\\\"ChrmOutput\\\",Wt=\\\"QueryChatRoomInfoInput\\\",Jt=\\\"QueryChatRoomInfoOutput\\\",zt=\\\"RtcInput\\\",Zt=\\\"RtcUserListOutput\\\",Xt=\\\"SetUserStatusInput\\\",$t=\\\"RtcSetDataInput\\\",en=\\\"RtcUserSetDataInput\\\",tn=\\\"RtcDataInput\\\",nn=\\\"RtcSetOutDataInput\\\",rn=\\\"MCFollowInput\\\",sn=\\\"RtcTokenOutput\\\",on=\\\"RtcQryOutput\\\",an=\\\"RtcQryUserOutDataInput\\\",un=\\\"RtcUserOutDataOutput\\\",cn=\\\"RtcQueryListInput\\\",hn=\\\"RtcRoomInfoOutput\\\",ln=\\\"RtcValueInfo\\\",dn=\\\"RtcKeyDeleteInput\\\",fn=\\\"GetQNupTokenInput\\\",pn=\\\"GetQNupTokenOutput\\\",gn=\\\"GetQNdownloadUrlInput\\\",_n=\\\"GetDownloadUrlInput\\\",yn=\\\"GetQNdownloadUrlOutput\\\",vn=\\\"GetDownloadUrlOutput\\\",En=\\\"SetChrmKV\\\",mn=\\\"SetChrmKVS\\\",In=\\\"DeleteChrmKVS\\\",Tn=\\\"ChrmKVOutput\\\",Cn=\\\"ChrmKVSOutput\\\",Rn=\\\"ChrmKVSOutputEntity\\\",Sn=\\\"QueryChrmKV\\\",Nn=\\\"SetUserSettingInput\\\",On=\\\"SetUserSettingOutput\\\",wn=\\\"PullUserSettingInput\\\",bn=\\\"PullUserSettingOutput\\\",Mn=\\\"UserSettingNotification\\\",An=\\\"SessionReq\\\",Un=\\\"SessionStates\\\",Ln=\\\"SessionState\\\",Pn=\\\"SessionStateItem\\\",Dn=\\\"SessionStateModifyReq\\\",Vn=\\\"SessionStateModifyResp\\\",kn=\\\"GrpReadReceiptMsg\\\",xn=\\\"GrpReadReceiptQryReq\\\",Bn=\\\"GrpReadReceiptQryResp\\\",Fn=\\\"GrpMsgReadUser\\\",Kn=\\\"SessionTagAddInput\\\",qn=\\\"SessionTagItem\\\",Yn=\\\"SessionTagDelInput\\\",Hn=\\\"SessionDisTagReq\\\",Gn=\\\"ReportSDKInput\\\",jn=\\\"ReportSDKOutput\\\",Qn=\\\"RtcNotifyMsg\\\",Wn=\\\"RtcPullKV\\\",Jn=\\\"RtcKVOutput\\\",zn=\\\"RtcQueryUserJoinedInput\\\",Zn=\\\"RtcQueryUserJoinedOutput\\\",Xn=\\\"RtcViewerJoinedOutput\\\",$n=\\\"RtcInviteInput\\\",ei=\\\"RtcCancelInviteInput\\\",ti=\\\"RtcInviteAnswerInput\\\",ni=\\\"RtcEndInviteInput\\\",ii=((It={})[Nt]=[\\\"sessionId\\\",\\\"classname\\\",\\\"content\\\",\\\"pushText\\\",\\\"userId\\\",\\\"configFlag\\\",\\\"appData\\\",\\\"extraContent\\\",\\\"pushExt\\\",\\\"busChannel\\\"],It[bt]=[\\\"list\\\",\\\"syncTime\\\",\\\"finished\\\"],It[wt]=[\\\"fromUserId\\\",\\\"type\\\",\\\"groupId\\\",\\\"classname\\\",\\\"content\\\",\\\"dataTime\\\",\\\"status\\\",\\\"msgId\\\",\\\"extraContent\\\",\\\"pushContent\\\",\\\"configFlag\\\",\\\"pushExt\\\",\\\"busChannel\\\"],It[Ot]=[\\\"title\\\",\\\"templateIdNoUse\\\",\\\"pushId\\\",\\\"pushConfigs\\\",\\\"templateId\\\"],It[Mt]=[\\\"nothing\\\"],It[At]=[\\\"inboxTime\\\",\\\"sendboxTime\\\",\\\"totalUnreadCount\\\"],It[Ut]=[\\\"syncTime\\\",\\\"ispolling\\\",\\\"isweb\\\",\\\"isPullSend\\\",\\\"isKeeping\\\",\\\"sendBoxSyncTime\\\"],It[Lt]=[\\\"syncTime\\\",\\\"count\\\"],It[Pt]=[\\\"type\\\",\\\"time\\\",\\\"chrmId\\\"],It[Dt]=[\\\"targetId\\\",\\\"time\\\",\\\"count\\\",\\\"order\\\",\\\"busChannel\\\"],It[Vt]=[\\\"list\\\",\\\"syncTime\\\",\\\"hasMsg\\\"],It[kt]=[\\\"type\\\",\\\"count\\\",\\\"startTime\\\",\\\"order\\\"],It[xt]=[\\\"info\\\"],It[Bt]=[\\\"sessions\\\"],It[Ft]=[\\\"type\\\",\\\"channelId\\\",\\\"busChannel\\\"],It[Kt]=[\\\"nothing\\\"],It[qt]=[\\\"type\\\",\\\"msg\\\",\\\"count\\\",\\\"busChannel\\\",\\\"startTime\\\",\\\"endTime\\\"],It[Yt]=[\\\"type\\\",\\\"conversationId\\\",\\\"msgs\\\",\\\"busChannel\\\"],It[Ht]=[\\\"targetId\\\",\\\"dataTime\\\",\\\"conversationType\\\",\\\"busChannel\\\"],It[Gt]=[\\\"type\\\",\\\"msgTime\\\",\\\"channelId\\\"],It[jt]=[\\\"nothing\\\"],It[Qt]=[\\\"nothing\\\",\\\"sessionId\\\",\\\"joinTime\\\"],It[Wt]=[\\\"count\\\",\\\"order\\\"],It[Jt]=[\\\"userTotalNums\\\",\\\"userInfos\\\"],It[fn]=[\\\"type\\\",\\\"key\\\",\\\"httpMethod\\\",\\\"queryString\\\"],It[gn]=[\\\"type\\\",\\\"key\\\",\\\"fileName\\\"],It[_n]=[\\\"type\\\",\\\"key\\\",\\\"fileName\\\"],It[pn]=[\\\"deadline\\\",\\\"token\\\",\\\"bosToken\\\",\\\"bosDate\\\",\\\"path\\\",\\\"osskeyId\\\",\\\"ossPolicy\\\",\\\"ossSign\\\",\\\"ossBucketName\\\"],It[yn]=[\\\"downloadUrl\\\"],It[vn]=[\\\"downloadUrl\\\"],It[En]=[\\\"entry\\\",\\\"bNotify\\\",\\\"notification\\\",\\\"type\\\"],It[mn]=[\\\"entry\\\",\\\"bNotify\\\",\\\"notification\\\",\\\"type\\\"],It[In]=[\\\"entry\\\",\\\"bNotify\\\",\\\"notification\\\",\\\"type\\\"],It[Tn]=[\\\"entries\\\",\\\"bFullUpdate\\\",\\\"syncTime\\\"],It[Cn]=[\\\"timestamp\\\",\\\"errorKeys\\\"],It[Rn]=[\\\"key\\\",\\\"errorCode\\\"],It[Sn]=[\\\"timestamp\\\"],It[Nn]=[\\\"version\\\",\\\"value\\\"],It[On]=[\\\"version\\\",\\\"reserve\\\"],It[wn]=[\\\"version\\\",\\\"reserve\\\"],It[bn]=[\\\"items\\\",\\\"version\\\"],It.UserSettingItem=[\\\"targetId\\\",\\\"type\\\",\\\"key\\\",\\\"value\\\",\\\"version\\\",\\\"status\\\",\\\"tags\\\"],It[An]=[\\\"time\\\"],It[Un]=[\\\"version\\\",\\\"state\\\"],It[Ln]=[\\\"type\\\",\\\"channelId\\\",\\\"time\\\",\\\"stateItem\\\",\\\"busChannel\\\"],It[Pn]=[\\\"sessionStateType\\\",\\\"value\\\",\\\"tags\\\"],It[Dn]=[\\\"version\\\",\\\"state\\\"],It[Vn]=[\\\"version\\\"],It[kn]=[\\\"msgId\\\",\\\"busChannel\\\"],It[xn]=[\\\"msgId\\\",\\\"busChannel\\\"],It[Bn]=[\\\"totalMemberNum\\\",\\\"list\\\"],It[Fn]=[\\\"readTime\\\",\\\"userId\\\"],It[Kn]=[\\\"version\\\",\\\"tags\\\"],It[qn]=[\\\"tagId\\\",\\\"name\\\",\\\"createdTime\\\",\\\"isTop\\\"],It[Yn]=[\\\"version\\\",\\\"tags\\\"],It[Hn]=[\\\"tagId\\\"],It[Mn]=[\\\"version\\\",\\\"reserve\\\"],It[Gn]=[\\\"sdkInfo\\\"],It[jn]=[\\\"nothing\\\"],It[zt]=[\\\"roomType\\\",\\\"broadcastType\\\",\\\"extraInnerData\\\",\\\"needSysChatroom\\\",\\\"identityChangeType\\\",\\\"joinType\\\"],It[Zt]=[\\\"users\\\",\\\"token\\\",\\\"sessionId\\\",\\\"roomInfo\\\"],It[Xt]=[\\\"status\\\"],It[$t]=[\\\"interior\\\",\\\"target\\\",\\\"key\\\",\\\"value\\\",\\\"objectName\\\",\\\"content\\\"],It[en]=[\\\"valueInfo\\\",\\\"objectName\\\",\\\"content\\\"],It[tn]=[\\\"interior\\\",\\\"target\\\",\\\"key\\\",\\\"objectName\\\",\\\"content\\\"],It[nn]=[\\\"target\\\",\\\"valueInfo\\\",\\\"objectName\\\",\\\"content\\\"],It[rn]=[\\\"state\\\"],It[sn]=[\\\"rtcToken\\\"],It[on]=[\\\"outInfo\\\"],It[an]=[\\\"userId\\\"],It[un]=[\\\"user\\\"],It[cn]=[\\\"order\\\"],It[hn]=[\\\"roomId\\\",\\\"roomData\\\",\\\"userCount\\\",\\\"list\\\"],It[ln]=[\\\"key\\\",\\\"value\\\"],It[dn]=[\\\"key\\\"],It[Qn]=[\\\"type\\\",\\\"time\\\",\\\"roomId\\\"],It[Wn]=[\\\"timestamp\\\",\\\"roomId\\\"],It[Jn]=[\\\"entries\\\",\\\"bFullUpdate\\\",\\\"syncTime\\\"],It[zn]=[\\\"userId\\\"],It[Zn]=[\\\"info\\\"],It[$n]=[\\\"invitedUserId\\\",\\\"timeoutTime\\\",\\\"invitedRoomId\\\",\\\"inviteInfo\\\",\\\"inviteSessionId\\\"],It[ei]=[\\\"invitedUserId\\\",\\\"invitedRoomId\\\",\\\"inviteInfo\\\",\\\"inviteSessionId\\\"],It[ti]=[\\\"inviteUserID\\\",\\\"answerCode\\\",\\\"inviteRoomId\\\",\\\"inviteSessionId\\\",\\\"content\\\",\\\"key\\\",\\\"value\\\"],It[ni]=[\\\"inviteRoomId\\\",\\\"inviteSessionId\\\",\\\"inviteContent\\\",\\\"inviteRoomKeys\\\"],It),ri={},si=function(e){var t=ii[e];ri[e]=function(){for(var e={},n={getArrayData:function(){return e}},i=function(i){var r=t[i],s=\\\"set\\\"+D(r,0,1);n[s]=function(t){e[r]=t}},r=0;r<t.length;r++)i(r);return n},ri[e].decode=function(e){var t={};J(e)&&(e=JSON.parse(e));var n=function(n){var i=\\\"get\\\"+D(n,0,1);t[n]=e[n],t[i]=function(){return e[n]}};for(var i in e)n(i);return t}};for(var oi in ii)si(oi);ri.getModule=function(e){return ri[e]()};var ai=\\\"\\\\npackage Modules;\\\\nmessage probuf {\\\\n  message \\\"+Xt+\\\"\\\\n  {\\\\n    optional int32 status=1;\\\\n  }\\\\n\\\\n  message SetUserStatusOutput\\\\n  {\\\\n    optional int32 nothing=1;\\\\n  }\\\\n\\\\n  message GetUserStatusInput\\\\n  {\\\\n    optional int32 nothing=1;\\\\n  }\\\\n\\\\n  message GetUserStatusOutput\\\\n  {\\\\n    optional string status=1;\\\\n    optional string subUserId=2;\\\\n  }\\\\n\\\\n  message SubUserStatusInput\\\\n  {\\\\n    repeated string userid =1;\\\\n  }\\\\n\\\\n  message SubUserStatusOutput\\\\n  {\\\\n    optional int32 nothing=1;\\\\n  }\\\\n  message VoipDynamicInput\\\\n  {\\\\n    required int32  engineType = 1;\\\\n    required string channelName = 2;\\\\n    optional string channelExtra = 3;\\\\n  }\\\\n\\\\n  message VoipDynamicOutput\\\\n  {\\\\n      required string dynamicKey=1;\\\\n  }\\\\n  message \\\"+Pt+\\\" {\\\\n    required int32 type = 1;\\\\n    optional int64 time = 2;\\\\n    optional string chrmId=3;\\\\n  }\\\\n  message \\\"+Ut+\\\" {\\\\n    required int64 syncTime = 1;\\\\n    required bool ispolling = 2;\\\\n    optional bool isweb=3;\\\\n    optional bool isPullSend=4;\\\\n    optional bool isKeeping=5;\\\\n    optional int64 sendBoxSyncTime=6;\\\\n  }\\\\n  message \\\"+Nt+\\\" {\\\\n    required int32 sessionId = 1;\\\\n    required string classname = 2;\\\\n    required bytes content = 3;\\\\n    optional string pushText = 4;\\\\n    optional string appData = 5;\\\\n    repeated string userId = 6;\\\\n    optional int64 delMsgTime = 7;\\\\n    optional string delMsgId = 8;\\\\n    optional int32 configFlag = 9;\\\\n    optional int64 clientUniqueId = 10;\\\\n    optional string extraContent = 11;\\\\n    optional PushExtra pushExt = 12;\\\\n    optional string busChannel = 13; // 该消息所属会话的业务标识\\\\n  }\\\\n  message \\\"+Ot+\\\" {\\\\n    optional string title = 1;\\\\n    optional int32  templateIdNoUse= 2;\\\\n    optional string pushId = 3;\\\\n    optional string pushConfigs = 4;\\\\n    optional string templateId = 5;\\\\n  }\\\\n  message \\\"+bt+\\\" {\\\\n    repeated DownStreamMessage list = 1;\\\\n    required int64 syncTime = 2;\\\\n    optional bool finished = 3;\\\\n  }\\\\n  message \\\"+wt+\\\" {\\\\n    required string fromUserId = 1;\\\\n    required ChannelType type = 2;\\\\n    optional string groupId = 3;\\\\n    required string classname = 4;\\\\n    required bytes content = 5;\\\\n    required int64 dataTime = 6;\\\\n    required int64 status = 7;\\\\n    optional int64 extra = 8;\\\\n    optional string msgId = 9;\\\\n    optional int32 direction = 10;\\\\n    optional int32 plantform =11;\\\\n    optional int32 isRemoved = 12;\\\\n    optional string source = 13;\\\\n    optional int64 clientUniqueId = 14;\\\\n    optional string extraContent = 15;\\\\n    optional string pushContent = 16;\\\\n    optional int32 configFlag = 17;\\\\n    optional PushExtra pushExt = 18;\\\\n    optional string busChannel = 19; // 该消息所属会话的业务标识，限制20字符以内\\\\n  }\\\\n  enum ChannelType {\\\\n    PERSON = 1;\\\\n    PERSONS = 2;\\\\n    GROUP = 3;\\\\n    TEMPGROUP = 4;\\\\n    CUSTOMERSERVICE = 5;\\\\n    NOTIFY = 6;\\\\n    MC=7;\\\\n    MP=8;\\\\n  }\\\\n  message CreateDiscussionInput {\\\\n    optional string name = 1;\\\\n  }\\\\n  message CreateDiscussionOutput {\\\\n    required string id = 1;\\\\n  }\\\\n  message ChannelInvitationInput {\\\\n    repeated string users = 1;\\\\n  }\\\\n  message LeaveChannelInput {\\\\n    required int32 nothing = 1;\\\\n  }\\\\n  message ChannelEvictionInput {\\\\n    required string user = 1;\\\\n  }\\\\n  message RenameChannelInput {\\\\n    required string name = 1;\\\\n  }\\\\n  message ChannelInfoInput {\\\\n    required int32 nothing = 1;\\\\n  }\\\\n  message ChannelInfoOutput {\\\\n    required ChannelType type = 1;\\\\n    required string channelId = 2;\\\\n    required string channelName = 3;\\\\n    required string adminUserId = 4;\\\\n    repeated string firstTenUserIds = 5;\\\\n    required int32 openStatus = 6;\\\\n  }\\\\n  message ChannelInfosInput {\\\\n    required int32 page = 1;\\\\n    optional int32 number = 2;\\\\n  }\\\\n  message ChannelInfosOutput {\\\\n    repeated ChannelInfoOutput channels = 1;\\\\n    required int32 total = 2;\\\\n  }\\\\n  message MemberInfo {\\\\n    required string userId = 1;\\\\n    required string userName = 2;\\\\n    required string userPortrait = 3;\\\\n    required string extension = 4;\\\\n  }\\\\n  message GroupMembersInput {\\\\n    required int32 page = 1;\\\\n    optional int32 number = 2;\\\\n  }\\\\n  message GroupMembersOutput {\\\\n    repeated MemberInfo members = 1;\\\\n    required int32 total = 2;\\\\n  }\\\\n  message GetUserInfoInput {\\\\n    required int32 nothing = 1;\\\\n  }\\\\n  message GetUserInfoOutput {\\\\n    required string userId = 1;\\\\n    required string userName = 2;\\\\n    required string userPortrait = 3;\\\\n  }\\\\n  message GetSessionIdInput {\\\\n    required int32 nothing = 1;\\\\n  }\\\\n  message GetSessionIdOutput {\\\\n    required int32 sessionId = 1;\\\\n  }\\\\n  enum FileType {\\\\n    image = \\\"+W.IMAGE+\\\";\\\\n    audio = \\\"+W.AUDIO+\\\";\\\\n    video = \\\"+W.VIDEO+\\\";\\\\n    file = \\\"+W.FILE+\\\";\\\\n  }\\\\n  message \\\"+fn+\\\" {\\\\n    required FileType type = 1;\\\\n    optional string key = 2;\\\\n    optional string httpMethod = 3;\\\\n    optional string queryString = 4;\\\\n  }\\\\n  message \\\"+gn+\\\" {\\\\n    required FileType type = 1;\\\\n    required string key = 2;\\\\n    optional string  fileName = 3;\\\\n  }\\\\n  message \\\"+_n+\\\" {\\\\n    required FileType type = 1;\\\\n    required string key = 2;\\\\n    optional string fileName = 3;\\\\n   }\\\\n  message \\\"+pn+\\\" {\\\\n    required int64 deadline = 1;\\\\n    required string token = 2;\\\\n    optional string bosToken = 3;\\\\n    optional string bosDate = 4;\\\\n    optional string path = 5;\\\\n    optional string osskeyId = 6;\\\\n    optional string ossPolicy = 7;\\\\n    optional string ossSign = 8;\\\\n    optional string ossBucketName = 9;\\\\n    optional string s3Credential = 10;\\\\n    optional string s3Algorithm = 11;\\\\n    optional string s3Date = 12;\\\\n    optional string s3Policy = 13;\\\\n    optional string s3Signature = 14;\\\\n    optional string s3BucketName = 15;\\\\n    optional string stcAuthorization = 16;\\\\n    optional string stcContentSha256 = 17;\\\\n    optional string stcDate = 18;\\\\n    optional string stcBucketName = 19;\\\\n  }\\\\n  message \\\"+yn+\\\" {\\\\n    required string downloadUrl = 1;\\\\n  }\\\\n  message \\\"+vn+\\\" {\\\\n    required string downloadUrl = 1;\\\\n  }\\\\n  message Add2BlackListInput {\\\\n    required string userId = 1;\\\\n  }\\\\n  message RemoveFromBlackListInput {\\\\n    required string userId = 1;\\\\n  }\\\\n  message QueryBlackListInput {\\\\n    required int32 nothing = 1;\\\\n  }\\\\n  message QueryBlackListOutput {\\\\n    repeated string userIds = 1;\\\\n  }\\\\n  message BlackListStatusInput {\\\\n    required string userId = 1;\\\\n  }\\\\n  message BlockPushInput {\\\\n    required string blockeeId = 1;\\\\n  }\\\\n  message ModifyPermissionInput {\\\\n    required int32 openStatus = 1;\\\\n  }\\\\n  message GroupInput {\\\\n    repeated GroupInfo groupInfo = 1;\\\\n  }\\\\n  message GroupOutput {\\\\n    required int32 nothing = 1;\\\\n  }\\\\n  message GroupInfo {\\\\n    required string id = 1;\\\\n    required string name = 2;\\\\n  }\\\\n  message GroupHashInput {\\\\n    required string userId = 1;\\\\n    required string groupHashCode = 2;\\\\n  }\\\\n  message GroupHashOutput {\\\\n    required GroupHashType result = 1;\\\\n  }\\\\n  enum GroupHashType {\\\\n    group_success = 0x00;\\\\n    group_failure = 0x01;\\\\n  }\\\\n  message \\\"+jt+\\\" {\\\\n    required int32 nothing = 1;\\\\n  }\\\\n  message \\\"+Qt+\\\" {\\\\n    required int32 nothing = 1;\\\\n    optional string sessionId = 2;\\\\n    optional int64 joinTime = 3;\\\\n  }\\\\n  message \\\"+Lt+\\\" {\\\\n    required int64 syncTime = 1;\\\\n    required int32 count = 2;\\\\n  }\\\\n\\\\n  message ChrmPullMsgNew\\\\n  {\\\\n    required int32 count = 1;\\\\n    required int64 syncTime = 2;\\\\n    optional string chrmId=3;\\\\n  }\\\\n  message \\\"+kt+\\\"\\\\n  {\\\\n    optional ChannelType type = 1;\\\\n    optional int32 count = 2;\\\\n    optional int64 startTime = 3;\\\\n    optional int32 order = 4;\\\\n  }\\\\n  message \\\"+qt+\\\"\\\\n  {\\\\n    required ChannelType type = 1;\\\\n    optional DownStreamMessage msg =2;\\\\n    optional int32 count = 3;\\\\n    optional string busChannel = 4;\\\\n    optional int64 startTime = 5;\\\\n    optional int64 endTime = 6;\\\\n  }\\\\n  message \\\"+xt+\\\"\\\\n  {\\\\n    repeated RelationInfo info = 1;\\\\n  }\\\\n  message RelationInfo\\\\n  {\\\\n    required ChannelType type = 1;\\\\n    required string userId = 2;\\\\n    optional DownStreamMessage msg =3;\\\\n    optional int64 readMsgTime= 4;\\\\n    optional int64 unreadCount= 5;\\\\n    optional string busChannel = 6;//该消息所属会话的业务标识\\\\n  }\\\\n  message RelationInfoReadTime\\\\n  {\\\\n    required ChannelType type = 1;\\\\n    required int64 readMsgTime= 2;\\\\n    required string targetId = 3;\\\\n  }\\\\n  message \\\"+Ht+\\\"\\\\n  {\\\\n      required string targetId = 1;\\\\n      required int64 dataTime = 2;\\\\n      optional int32 conversationType= 3;\\\\n      optional string busChannel = 4; //该消息所属会话的业务标识，限制20字符以内\\\\n  }\\\\n  message HistoryMessageInput\\\\n  {\\\\n    required string targetId = 1;\\\\n    required int64 dataTime =2;\\\\n    required int32 size  = 3;\\\\n  }\\\\n\\\\n  message HistoryMessagesOuput\\\\n  {\\\\n    repeated DownStreamMessage list = 1;\\\\n    required int64 syncTime = 2;\\\\n    required int32 hasMsg = 3;\\\\n  }\\\\n  message \\\"+Wt+\\\"\\\\n  {\\\\n    required int32 count= 1;\\\\n    optional int32 order= 2;\\\\n  }\\\\n\\\\n  message \\\"+Jt+\\\"\\\\n  {\\\\n    optional int32 userTotalNums = 1;\\\\n    repeated ChrmMember userInfos = 2;\\\\n  }\\\\n  message ChrmMember\\\\n  {\\\\n    required int64 time = 1;\\\\n    required string id = 2;\\\\n  }\\\\n  message MPFollowInput\\\\n  {\\\\n    required string id = 1;\\\\n  }\\\\n\\\\n  message MPFollowOutput\\\\n  {\\\\n    required int32 nothing = 1;\\\\n    optional MpInfo info =2;\\\\n  }\\\\n\\\\n  message \\\"+rn+\\\"\\\\n  {\\\\n    required string state = 1;\\\\n  }\\\\n\\\\n  message MCFollowOutput\\\\n  {\\\\n    required int32 nothing = 1;\\\\n    optional MpInfo info =2;\\\\n  }\\\\n\\\\n  message MpInfo\\\\n  {\\\\n    required string mpid=1;\\\\n    required string name = 2;\\\\n    required string type = 3;\\\\n    required int64 time=4;\\\\n    optional string portraitUrl=5;\\\\n    optional string extra =6;\\\\n  }\\\\n\\\\n  message SearchMpInput\\\\n  {\\\\n    required int32 type=1;\\\\n    required string id=2;\\\\n  }\\\\n\\\\n  message SearchMpOutput\\\\n  {\\\\n    required int32 nothing=1;\\\\n    repeated MpInfo info = 2;\\\\n  }\\\\n\\\\n  message PullMpInput\\\\n  {\\\\n    required int64 time=1;\\\\n    required string mpid=2;\\\\n  }\\\\n\\\\n  message PullMpOutput\\\\n  {\\\\n    required int32 status=1;\\\\n    repeated MpInfo info = 2;\\\\n  }\\\\n  message \\\"+Dt+\\\"\\\\n  {\\\\n    optional string targetId = 1;\\\\n    optional int64 time = 2;\\\\n    optional int32 count  = 3;\\\\n    optional int32 order = 4;\\\\n    optional string busChannel = 5; //该消息所属会话的业务标识，限制20字符以内\\\\n  }\\\\n\\\\n  message \\\"+Vt+\\\"\\\\n  {\\\\n    repeated DownStreamMessage list=1;\\\\n    required int64 syncTime=2;\\\\n    required int32 hasMsg=3;\\\\n  }\\\\n  message \\\"+cn+\\\"{\\\\n    optional int32 order=1;\\\\n  }\\\\n\\\\n  message \\\"+dn+\\\"{\\\\n    repeated string key=1;\\\\n  }\\\\n\\\\n  message \\\"+ln+\\\"{\\\\n    required string key=1;\\\\n    required string value=2;\\\\n  }\\\\n\\\\n  message RtcUserInfo{\\\\n    required string userId=1;\\\\n    repeated \\\"+ln+\\\" userData=2; //用户资源信息\\\\n  }\\\\n\\\\n  message \\\"+Zt+\\\"{\\\\n    repeated RtcUserInfo users=1;\\\\n    optional string token=2;\\\\n    optional string sessionId=3;\\\\n    repeated RtcValueInfo roomInfo = 4; //房间key value\\\\n    repeated RtcKVEntity entries = 5;//直播KV属性对象集合\\\\n    optional int64 syncTime = 6;//所有属性的最大时间戳（下次拉取KV时用）。\\\\n    optional int32 offlineKickTime = 7;//server超时踢人时间，默认60s\\\\n  }\\\\n  message RtcRoomInfoOutput{\\\\n    optional string roomId = 1;\\\\n    repeated \\\"+ln+\\\" roomData = 2;\\\\n    optional int32 userCount = 3;\\\\n    repeated RtcUserInfo list=4;\\\\n  }\\\\n  message \\\"+zt+\\\"{\\\\n    required int32 roomType=1;\\\\n    optional int32 broadcastType=2;\\\\n    optional RtcValueInfo extraInnerData = 3;\\\\n    optional bool needSysChatroom = 4; //是否需要同步聊天室\\\\n    optional IdentityChangeType identityChangeType = 5; //身份变更类型\\\\n    optional JoinType joinType = 6; // 加入房间类型\\\\n    repeated \\\"+ln+\\\" innerDatas = 7; //用户内部inner数据，角色或者连麦信息等\\\\n    repeated \\\"+ln+\\\" outerDatas = 8; //用户内部outer数据，自定义数据结构RtcInput。\\\\n  }\\\\n  enum JoinType {\\\\n    KICK = 0; //踢前一个设备\\\\n    REFUSE = 1; //当前加入拒绝\\\\n    COEXIST = 2; //两个设备共存\\\\n  }\\\\n  message RtcQryInput{\\\\n    required bool isInterior=1;\\\\n    required targetType target=2;\\\\n    repeated string key=3;\\\\n  }\\\\n  message \\\"+on+\\\"{\\\\n    repeated \\\"+ln+\\\" outInfo=1;\\\\n  }\\\\n  message RtcDelDataInput{\\\\n    repeated string key=1;\\\\n    required bool isInterior=2;\\\\n    required targetType target=3;\\\\n  }\\\\n  message \\\"+tn+\\\"{\\\\n    required bool interior=1;\\\\n    required targetType target=2;\\\\n    repeated string key=3;\\\\n    optional string objectName=4;\\\\n    optional string content=5;\\\\n  }\\\\n  message \\\"+$t+\\\"{\\\\n    required bool interior=1;\\\\n    required targetType target=2;\\\\n    required string key=3;\\\\n    required string value=4;\\\\n    optional string objectName=5;\\\\n    optional string content=6;\\\\n  }\\\\n  message \\\"+en+\\\" {\\\\n    repeated \\\"+ln+\\\" valueInfo = 1;\\\\n    required string objectName = 2;\\\\n    repeated \\\"+ln+\\\" content = 3;\\\\n  }\\\\n  message RtcOutput\\\\n  {\\\\n    optional int32 nothing=1;\\\\n  }\\\\n  message \\\"+sn+\\\"{\\\\n    required string rtcToken=1;\\\\n  }\\\\n  enum targetType {\\\\n    ROOM =1 ;\\\\n    PERSON = 2;\\\\n  }\\\\n  message \\\"+nn+\\\"{\\\\n    required targetType target=1;\\\\n    repeated \\\"+ln+\\\" valueInfo=2;\\\\n    optional string objectName=3;\\\\n    optional string content=4;\\\\n  }\\\\n  message \\\"+an+\\\"{\\\\n    repeated string userId = 1;\\\\n  }\\\\n  message \\\"+un+\\\"{\\\\n    repeated RtcUserInfo user = 1;\\\\n  }\\\\n  message \\\"+Mt+\\\"{\\\\n    required int32 nothing = 1;\\\\n  }\\\\n  message \\\"+At+\\\"{\\\\n    required int64 inboxTime = 1;\\\\n    required int64 sendboxTime = 2;\\\\n    required int64 totalUnreadCount = 3;\\\\n  }\\\\n  message \\\"+Gt+\\\"\\\\n  {\\\\n    required ChannelType type = 1;\\\\n    required int64 msgTime = 2;\\\\n    required string channelId = 3;\\\\n  }\\\\n  message SessionMsgReadOutput\\\\n  {\\\\n    optional int32 nothing=1;\\\\n  }\\\\n  message \\\"+Bt+\\\"\\\\n  {\\\\n    repeated SessionInfo sessions = 1;\\\\n  }\\\\n  message \\\"+Ft+\\\"\\\\n  {\\\\n    required ChannelType type = 1;\\\\n    required string channelId = 2;\\\\n    optional string busChannel = 3;//所属会话业务标识\\\\n  }\\\\n  message \\\"+Kt+\\\"\\\\n  {\\\\n    optional int32 nothing=1;\\\\n  }\\\\n  message \\\"+Yt+\\\"\\\\n  {\\\\n    optional ChannelType type = 1;\\\\n    optional string conversationId = 2;\\\\n    repeated DeleteMsg msgs = 3;\\\\n    optional string busChannel = 4; //该消息所属会话的业务标识，限制20字符以内\\\\n  }\\\\n  message DeleteMsg\\\\n  {\\\\n    optional string msgId = 1;\\\\n    optional int64 msgDataTime = 2;\\\\n    optional int32 direct = 3;\\\\n  }\\\\n  message ChrmKVEntity {\\\\n    required string key = 1;\\\\n    required string value = 2;\\\\n    optional int32 status = 3;\\\\n    optional int64 timestamp = 4;\\\\n    optional string uid = 5;\\\\n  }\\\\n  message \\\"+En+\\\" {\\\\n    required ChrmKVEntity entry = 1;\\\\n    optional bool bNotify = 2;\\\\n    optional UpStreamMessage notification = 3;\\\\n    optional ChannelType type = 4;\\\\n  }\\\\n  message \\\"+mn+\\\" {\\\\n    repeated ChrmKVEntity entry = 1;\\\\n    optional bool bNotify = 2;\\\\n    optional UpStreamMessage notification = 3;\\\\n    optional ChannelType type = 4;\\\\n  }\\\\n  message \\\"+In+\\\" {\\\\n    repeated ChrmKVEntity entry = 1;\\\\n    optional bool bNotify = 2;\\\\n    optional UpStreamMessage notification = 3;\\\\n    optional ChannelType type = 4;\\\\n  }\\\\n  message \\\"+Tn+\\\" {\\\\n    repeated ChrmKVEntity entries = 1;\\\\n    optional bool bFullUpdate = 2;\\\\n    optional int64 syncTime = 3;\\\\n  }\\\\n  message \\\"+Cn+\\\" {\\\\n    repeated ChrmKVSOutputEntity errorKeys = 1;\\\\n  }\\\\n  message \\\"+Rn+\\\"\\\\n  {\\\\n    optional string key = 1;\\\\n    optional int32 errorCode = 2;\\\\n  }\\\\n  message \\\"+Sn+\\\" {\\\\n    required int64 timestamp = 1;\\\\n  }\\\\n  message \\\"+Nn+\\\" {\\\\n    required int64 version=1;\\\\n    required string value=2;\\\\n  }\\\\n  message \\\"+On+\\\" {\\\\n    required int64 version=1;\\\\n    required bool reserve=2;\\\\n  }\\\\n  message \\\"+wn+\\\" {\\\\n    required int64 version=1;\\\\n    optional bool reserve=2;\\\\n  }\\\\n  message \\\"+bn+\\\" {\\\\n    repeated UserSettingItem items = 1;\\\\n    required int64 version=2;\\\\n  }\\\\n  message UserSettingItem {\\\\n    required string targetId= 1;\\\\n    required ChannelType type = 2;\\\\n    required string key = 4;\\\\n    required bytes value = 5;\\\\n    required int64 version=6;\\\\n    required int32 status=7;\\\\n    repeated SessionTagItem tags= 8;\\\\n  }\\\\n  message \\\"+An+\\\" {\\\\n    required int64 time = 1;\\\\n  }\\\\n  message \\\"+Un+\\\" {\\\\n    required int64 version=1;\\\\n    repeated SessionState state= 2;\\\\n  }\\\\n  message \\\"+Ln+\\\" {\\\\n    required ChannelType type = 1;\\\\n    required string channelId = 2;\\\\n    optional int64 time = 3;\\\\n    repeated SessionStateItem stateItem = 4;\\\\n    optional string busChannel = 5;//该消息所属会话的业务标识\\\\n  }\\\\n  message \\\"+Pn+\\\" {\\\\n    required SessionStateType sessionStateType = 1;\\\\n    required string value = 2;\\\\n    repeated SessionTagItem tags = 3;\\\\n  }\\\\n  enum SessionStateType {\\\\n    IsSilent = 1;\\\\n    IsTop = 2;\\\\n    Tags = 3;\\\\n  }\\\\n  message \\\"+Dn+\\\" {\\\\n    required int64 version=1;\\\\n    repeated SessionState state= 2;\\\\n  }\\\\n  message \\\"+Vn+\\\" {\\\\n    required int64 version=1;\\\\n  }\\\\n  message \\\"+kn+\\\" {\\\\n    repeated string msgId=1; //已读消息ID\\\\n    optional string channelId = 2; // 该消息所属会话的业务标识\\\\n  }\\\\n  message \\\"+xn+\\\" {\\\\n    repeated string msgId=1; //已读消息ID\\\\n    optional string channelId = 2; // 该消息所属会话的业务标识\\\\n  }\\\\n  message \\\"+Bn+\\\" {\\\\n    required int32 totalMemberNum = 1;//群内总人数\\\\n    repeated GrpMsgReadUser list = 2;//已读用户列表（list复类型）\\\\n  }\\\\n  message \\\"+Fn+\\\" {\\\\n    required int64 readTime = 1;//已读时间\\\\n    required string userId = 2;//已读用户id\\\\n  }\\\\n  message \\\"+Kn+\\\" {\\\\n    required int64 version=1;\\\\n    repeated SessionTagItem tags=2;\\\\n  }\\\\n  message \\\"+qn+\\\" {\\\\n    required string tagId=1;\\\\n    optional string name=2;\\\\n    optional int64 createdTime=3;\\\\n    optional bool isTop=4;\\\\n  }\\\\n  message \\\"+Yn+\\\" {\\\\n    required int64 version=1;\\\\n    repeated SessionTagItem tags=2;\\\\n  }\\\\n  message \\\"+Hn+\\\" {\\\\n    repeated string tagId=1;\\\\n  }\\\\n  message \\\"+Mn+\\\" {\\\\n    required int64 version=1;\\\\n    required bool reserve=2;\\\\n  }\\\\n  message \\\"+Gn+' {\\\\n    required string sdkInfo=1; // 用户集成的 sdk 信息,json 格式 {\\\"web-rtc\\\": \\\"4.0.3.7\\\"}\\\\n  }\\\\n  message '+jn+\\\"\\\\n  {\\\\n    optional int32 nothing=1; //占位\\\\n  }\\\\n  message \\\"+Qn+\\\" \\\\n  {\\\\n    required int32 type= 1;   //(通知类型 1:rtc房间状态KV变更通知)\\\\n    optional int64 time= 2;   //消息产生时间\\\\n    optional string roomId=3; //主播房间id\\\\n  }\\\\n  message \\\"+Wn+\\\"\\\\n  {\\\\n    required int64 timestamp = 1;\\\\n    required string roomId = 2;\\\\n  }\\\\n  message \\\"+Jn+\\\"\\\\n  {\\\\n    repeated RtcKVEntity entries = 1;\\\\n    optional bool bFullUpdate = 2;\\\\n    optional int64 syncTime = 3; \\\\n  }\\\\n  message RtcKVEntity \\\\n  {\\\\n    required string key = 1;\\\\n    required string value = 2;\\\\n    optional int32 status = 3;\\\\n    optional int64 timestamp = 4;\\\\n    optional string uid = 5;\\\\n  }\\\\n  enum IdentityChangeType \\\\n  {\\\\n    AnchorToViewer = 1; //1为主播变观众\\\\n    ViewerToAnchor = 2; //2为观众变主播\\\\n  }\\\\n  message \\\"+zn+\\\"\\\\n  {\\\\n    required string userId = 1;\\\\n  }\\\\n  message \\\"+Zn+\\\"\\\\n  {\\\\n    repeated RtcJoinedInfo info = 1;\\\\n  }\\\\n  message RtcJoinedInfo\\\\n  {\\\\n    required string deviceId = 1; //设备ID\\\\n    required string roomId = 2;   //加入的房间ID\\\\n    optional int64 joinTime = 3;  //加入的时间\\\\n  }\\\\n  message \\\"+Xn+\\\"\\\\n  {\\\\n    required string rtcToken=1;\\\\n    repeated RtcKVEntity entries = 2;//KV属性对象集合\\\\n    optional int64 syncTime = 3;//所有属性的最大时间戳（下次拉取KV时用）。\\\\n  }\\\\n  message \\\"+$n+\\\"\\\\n  {\\\\n    required string invitedUserId=1;    //被邀请的人的uid\\\\n    optional int32  timeoutTime=2;       //邀请超时时间(秒),默认三十秒\\\\n    required string invitedRoomId=3;    //被邀请的房间\\\\n    required string inviteInfo=4;       //邀请的信息(包含邀请人,被邀请人,各自userid)客户端定义好.协议栈和server透传\\\\n    required string inviteSessionId= 5; //客户端保证唯一性(建议roomid_userid_时间戳_随机数)\\\\n  }\\\\n  message \\\"+ei+\\\"\\\\n  {\\\\n    required string invitedUserId=1;   //被邀请的人的uid\\\\n    required string invitedRoomId=2;   //被邀请的房间\\\\n    required string inviteInfo=3;      //取消邀请的信息(包含邀请人,被邀请人,各自userid)客户端定义好.协议栈和server透传\\\\n    required string inviteSessionId=4; //邀请的sessionId,客户端发起邀请时产生\\\\n  }\\\\n  message \\\"+ti+\\\"\\\\n  {\\\\n    required string inviteUserId=1;    //邀请的人的uid\\\\n    required int32  answerCode=2;      //是否接受连麦邀请.0为拒绝,1为接受\\\\n    required string inviteRoomId=3;    //邀请的房间\\\\n    required string inviteSessionId=4; //邀请的sessionId\\\\n    required string content=5;         //需要转发的content\\\\n    optional string key=6;             //如果接受的话,需要加这个字段,放在room级别的k和v,新加入房间的能拉取到\\\\n    optional string value=7;           //如果接受的话,需要加这个字段,放在room级别的k和v,新加入房间的能拉取到\\\\n  }\\\\n  message \\\"+ni+\\\"\\\\n  {\\\\n    required string inviteRoomId=1;    //邀请的房间\\\\n    required string inviteSessionId=2; //邀请的sessionId\\\\n    required string inviteContent=3;   //结束连麦的信息(需要透传给房间内其他人)\\\\n    repeated string inviteRoomKeys=4;  //需要删除连麦的信息的key\\\\n  }\\\\n}\\\\n\\\";var ui,ci,hi,li,di,fi=(ui=ai,function(e,t){var n,i,r={};return r.ByteBuffer=e,r.c=e,n=e,r.Long=t||null,r.VERSION=\\\"5.0.1\\\",r.WIRE_TYPES={},r.WIRE_TYPES.VARINT=0,r.WIRE_TYPES.BITS64=1,r.WIRE_TYPES.LDELIM=2,r.WIRE_TYPES.STARTGROUP=3,r.WIRE_TYPES.ENDGROUP=4,r.WIRE_TYPES.BITS32=5,r.PACKABLE_WIRE_TYPES=[r.WIRE_TYPES.VARINT,r.WIRE_TYPES.BITS64,r.WIRE_TYPES.BITS32],r.TYPES={int32:{name:\\\"int32\\\",wireType:r.WIRE_TYPES.VARINT,defaultValue:0},uint32:{name:\\\"uint32\\\",wireType:r.WIRE_TYPES.VARINT,defaultValue:0},sint32:{name:\\\"sint32\\\",wireType:r.WIRE_TYPES.VARINT,defaultValue:0},int64:{name:\\\"int64\\\",wireType:r.WIRE_TYPES.VARINT,defaultValue:r.Long?r.Long.ZERO:void 0},uint64:{name:\\\"uint64\\\",wireType:r.WIRE_TYPES.VARINT,defaultValue:r.Long?r.Long.UZERO:void 0},sint64:{name:\\\"sint64\\\",wireType:r.WIRE_TYPES.VARINT,defaultValue:r.Long?r.Long.ZERO:void 0},bool:{name:\\\"bool\\\",wireType:r.WIRE_TYPES.VARINT,defaultValue:!1},double:{name:\\\"double\\\",wireType:r.WIRE_TYPES.BITS64,defaultValue:0},string:{name:\\\"string\\\",wireType:r.WIRE_TYPES.LDELIM,defaultValue:\\\"\\\"},bytes:{name:\\\"bytes\\\",wireType:r.WIRE_TYPES.LDELIM,defaultValue:null},fixed32:{name:\\\"fixed32\\\",wireType:r.WIRE_TYPES.BITS32,defaultValue:0},sfixed32:{name:\\\"sfixed32\\\",wireType:r.WIRE_TYPES.BITS32,defaultValue:0},fixed64:{name:\\\"fixed64\\\",wireType:r.WIRE_TYPES.BITS64,defaultValue:r.Long?r.Long.UZERO:void 0},sfixed64:{name:\\\"sfixed64\\\",wireType:r.WIRE_TYPES.BITS64,defaultValue:r.Long?r.Long.ZERO:void 0},float:{name:\\\"float\\\",wireType:r.WIRE_TYPES.BITS32,defaultValue:0},enum:{name:\\\"enum\\\",wireType:r.WIRE_TYPES.VARINT,defaultValue:0},message:{name:\\\"message\\\",wireType:r.WIRE_TYPES.LDELIM,defaultValue:null},group:{name:\\\"group\\\",wireType:r.WIRE_TYPES.STARTGROUP,defaultValue:null}},r.MAP_KEY_TYPES=[r.TYPES.int32,r.TYPES.sint32,r.TYPES.sfixed32,r.TYPES.uint32,r.TYPES.fixed32,r.TYPES.int64,r.TYPES.sint64,r.TYPES.sfixed64,r.TYPES.uint64,r.TYPES.fixed64,r.TYPES.bool,r.TYPES.string,r.TYPES.bytes],r.ID_MIN=1,r.ID_MAX=536870911,r.convertFieldsToCamelCase=!1,r.populateAccessors=!0,r.populateDefaults=!0,r.Util=function(){var e={};return e.IS_NODE=!(\\\"object\\\"!=typeof process||process+\\\"\\\"!=\\\"[object process]\\\"||process.browser),e.XHR=function(){var e,t=[function(){return new XMLHttpRequest},function(){return new ActiveXObject(\\\"Msxml2.XMLHTTP\\\")},function(){return new ActiveXObject(\\\"Msxml3.XMLHTTP\\\")},function(){return new ActiveXObject(\\\"Microsoft.XMLHTTP\\\")}],n=null;for(e=0;e<t.length;e++){try{n=t[e]()}catch(e){continue}break}if(!n)throw Error(\\\"XMLHttpRequest is not supported\\\");return n},e.fetch=function(t,n){if(n&&\\\"function\\\"!=typeof n&&(n=null),e.IS_NODE)if(n)g.readFile(t,(function(e,t){n(e?null:\\\"\\\"+t)}));else try{return g.readFileSync(t)}catch(e){return null}else{var i=e.XHR();if(i.open(\\\"GET\\\",t,!!n),i.setRequestHeader(\\\"Accept\\\",\\\"text/plain\\\"),\\\"function\\\"==typeof i.overrideMimeType&&i.overrideMimeType(\\\"text/plain\\\"),!n)return i.send(null),200==i.status||0==i.status&&\\\"string\\\"==typeof i.responseText?i.responseText:null;if(i.onreadystatechange=function(){4==i.readyState&&(200==i.status||0==i.status&&\\\"string\\\"==typeof i.responseText?n(i.responseText):n(null))},4==i.readyState)return;i.send(null)}},e.toCamelCase=function(e){return e.replace(/_([a-zA-Z])/g,(function(e,t){return t.toUpperCase()}))},e}(),r.Lang={DELIM:/[\\\\s\\\\{\\\\}=;:\\\\[\\\\],'\\\"\\\\(\\\\)<>]/g,RULE:/^(?:required|optional|repeated|map)$/,TYPE:/^(?:double|float|int32|uint32|sint32|int64|uint64|sint64|fixed32|sfixed32|fixed64|sfixed64|bool|string|bytes)$/,NAME:/^[a-zA-Z_][a-zA-Z_0-9]*$/,TYPEDEF:/^[a-zA-Z][a-zA-Z_0-9]*$/,TYPEREF:/^(?:\\\\.?[a-zA-Z_][a-zA-Z_0-9]*)+$/,FQTYPEREF:/^(?:\\\\.[a-zA-Z][a-zA-Z_0-9]*)+$/,NUMBER:/^-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+|([0-9]*(\\\\.[0-9]*)?([Ee][+-]?[0-9]+)?)|inf|nan)$/,NUMBER_DEC:/^(?:[1-9][0-9]*|0)$/,NUMBER_HEX:/^0[xX][0-9a-fA-F]+$/,NUMBER_OCT:/^0[0-7]+$/,NUMBER_FLT:/^([0-9]*(\\\\.[0-9]*)?([Ee][+-]?[0-9]+)?|inf|nan)$/,BOOL:/^(?:true|false)$/i,ID:/^(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/,NEGID:/^\\\\-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/,WHITESPACE:/\\\\s/,STRING:/(?:\\\"([^\\\"\\\\\\\\]*(?:\\\\\\\\.[^\\\"\\\\\\\\]*)*)\\\")|(?:'([^'\\\\\\\\]*(?:\\\\\\\\.[^'\\\\\\\\]*)*)')/g,STRING_DQ:/(?:\\\"([^\\\"\\\\\\\\]*(?:\\\\\\\\.[^\\\"\\\\\\\\]*)*)\\\")/g,STRING_SQ:/(?:'([^'\\\\\\\\]*(?:\\\\\\\\.[^'\\\\\\\\]*)*)')/g},r.DotProto=function(e,t){function n(e,n){var i=-1,r=1;if(\\\"-\\\"==e.charAt(0)&&(r=-1,e=e.substring(1)),t.NUMBER_DEC.test(e))i=parseInt(e);else if(t.NUMBER_HEX.test(e))i=parseInt(e.substring(2),16);else{if(!t.NUMBER_OCT.test(e))throw Error(\\\"illegal id value: \\\"+(r<0?\\\"-\\\":\\\"\\\")+e);i=parseInt(e.substring(1),8)}if(i=0|r*i,!n&&i<0)throw Error(\\\"illegal id value: \\\"+(r<0?\\\"-\\\":\\\"\\\")+e);return i}function i(e){var n=1;if(\\\"-\\\"==e.charAt(0)&&(n=-1,e=e.substring(1)),t.NUMBER_DEC.test(e))return n*parseInt(e,10);if(t.NUMBER_HEX.test(e))return n*parseInt(e.substring(2),16);if(t.NUMBER_OCT.test(e))return n*parseInt(e.substring(1),8);if(\\\"inf\\\"===e)return 1/0*n;if(\\\"nan\\\"===e)return NaN;if(t.NUMBER_FLT.test(e))return n*parseFloat(e);throw Error(\\\"illegal number value: \\\"+(n<0?\\\"-\\\":\\\"\\\")+e)}function r(e,t,n){void 0===e[t]?e[t]=n:(Array.isArray(e[t])||(e[t]=[e[t]]),e[t].push(n))}var s,o,a={},u=function(e){this.source=e+\\\"\\\",this.index=0,this.line=1,this.stack=[],this._stringOpen=null},c=u.prototype;return c._readString=function(){var e,n='\\\"'===this._stringOpen?t.STRING_DQ:t.STRING_SQ;if(n.lastIndex=this.index-1,!(e=n.exec(this.source)))throw Error(\\\"unterminated string\\\");return this.index=n.lastIndex,this.stack.push(this._stringOpen),this._stringOpen=null,e[1]},c.next=function(){var e,n,i,r,s;if(this.stack.length>0)return this.stack.shift();if(this.index>=this.source.length)return null;if(null!==this._stringOpen)return this._readString();do{for(e=!1;t.WHITESPACE.test(i=this.source.charAt(this.index));)if(\\\"\\\\n\\\"===i&&++this.line,++this.index===this.source.length)return null;if(\\\"/\\\"===this.source.charAt(this.index))if(++this.index,\\\"/\\\"===this.source.charAt(this.index)){for(;\\\"\\\\n\\\"!==this.source.charAt(++this.index);)if(this.index==this.source.length)return null;++this.index,++this.line,e=!0}else{if(\\\"*\\\"!==(i=this.source.charAt(this.index)))return\\\"/\\\";do{if(\\\"\\\\n\\\"===i&&++this.line,++this.index===this.source.length)return null;n=i,i=this.source.charAt(this.index)}while(\\\"*\\\"!==n||\\\"/\\\"!==i);++this.index,e=!0}}while(e);if(this.index===this.source.length)return null;if(r=this.index,t.DELIM.lastIndex=0,!t.DELIM.test(this.source.charAt(r++)))for(;r<this.source.length&&!t.DELIM.test(this.source.charAt(r));)++r;return('\\\"'===(s=this.source.substring(this.index,this.index=r))||\\\"'\\\"===s)&&(this._stringOpen=s),s},c.peek=function(){if(0===this.stack.length){var e=this.next();if(null===e)return null;this.stack.push(e)}return this.stack[0]},c.skip=function(e){var t=this.next();if(t!==e)throw Error(\\\"illegal '\\\"+t+\\\"', '\\\"+e+\\\"' expected\\\")},c.omit=function(e){return this.peek()===e&&(this.next(),!0)},c.toString=function(){return\\\"Tokenizer (\\\"+this.index+\\\"/\\\"+this.source.length+\\\" at line \\\"+this.line+\\\")\\\"},a.Tokenizer=u,(o=(s=function(e){this.tn=new u(e),this.proto3=!1}).prototype).parse=function(){var e,n={name:\\\"[ROOT]\\\",package:null,messages:[],enums:[],imports:[],options:{},services:[]},i=!0;try{for(;e=this.tn.next();)switch(e){case\\\"package\\\":if(!i||null!==n.package)throw Error(\\\"unexpected 'package'\\\");if(e=this.tn.next(),!t.TYPEREF.test(e))throw Error(\\\"illegal package name: \\\"+e);this.tn.skip(\\\";\\\"),n.package=e;break;case\\\"import\\\":if(!i)throw Error(\\\"unexpected 'import'\\\");\\\"public\\\"===(e=this.tn.peek())&&this.tn.next(),e=this._readString(),this.tn.skip(\\\";\\\"),n.imports.push(e);break;case\\\"syntax\\\":if(!i)throw Error(\\\"unexpected 'syntax'\\\");this.tn.skip(\\\"=\\\"),\\\"proto3\\\"===(n.syntax=this._readString())&&(this.proto3=!0),this.tn.skip(\\\";\\\");break;case\\\"message\\\":this._parseMessage(n,null),i=!1;break;case\\\"enum\\\":this._parseEnum(n),i=!1;break;case\\\"option\\\":this._parseOption(n);break;case\\\"service\\\":this._parseService(n);break;case\\\"extend\\\":this._parseExtend(n);break;default:throw Error(\\\"unexpected '\\\"+e+\\\"'\\\")}}catch(e){throw e.message=\\\"Parse error at line \\\"+this.tn.line+\\\": \\\"+e.message,e}return delete n.name,n},s.parse=function(e){return new s(e).parse()},o._readString=function(){var e,t,n=\\\"\\\";do{if(\\\"'\\\"!==(t=this.tn.next())&&'\\\"'!==t)throw Error(\\\"illegal string delimiter: \\\"+t);n+=this.tn.next(),this.tn.skip(t),e=this.tn.peek()}while('\\\"'===e||'\\\"'===e);return n},o._readValue=function(e){var n=this.tn.peek();if('\\\"'===n||\\\"'\\\"===n)return this._readString();if(this.tn.next(),t.NUMBER.test(n))return i(n);if(t.BOOL.test(n))return\\\"true\\\"===n.toLowerCase();if(e&&t.TYPEREF.test(n))return n;throw Error(\\\"illegal value: \\\"+n)},o._parseOption=function(e,n){var i,r=this.tn.next(),s=!1;if(\\\"(\\\"===r&&(s=!0,r=this.tn.next()),!t.TYPEREF.test(r))throw Error(\\\"illegal option name: \\\"+r);i=r,s&&(this.tn.skip(\\\")\\\"),i=\\\"(\\\"+i+\\\")\\\",r=this.tn.peek(),t.FQTYPEREF.test(r)&&(i+=r,this.tn.next())),this.tn.skip(\\\"=\\\"),this._parseOptionValue(e,i),n||this.tn.skip(\\\";\\\")},o._parseOptionValue=function(e,n){var i=this.tn.peek();if(\\\"{\\\"!==i)r(e.options,n,this._readValue(!0));else for(this.tn.skip(\\\"{\\\");\\\"}\\\"!==(i=this.tn.next());){if(!t.NAME.test(i))throw Error(\\\"illegal option name: \\\"+n+\\\".\\\"+i);this.tn.omit(\\\":\\\")?r(e.options,n+\\\".\\\"+i,this._readValue(!0)):this._parseOptionValue(e,n+\\\".\\\"+i)}},o._parseService=function(e){var n,i=this.tn.next();if(!t.NAME.test(i))throw Error(\\\"illegal service name at line \\\"+this.tn.line+\\\": \\\"+i);for(n={name:i,rpc:{},options:{}},this.tn.skip(\\\"{\\\");\\\"}\\\"!==(i=this.tn.next());)if(\\\"option\\\"===i)this._parseOption(n);else{if(\\\"rpc\\\"!==i)throw Error(\\\"illegal service token: \\\"+i);this._parseServiceRPC(n)}this.tn.omit(\\\";\\\"),e.services.push(n)},o._parseServiceRPC=function(e){var n,i,r=\\\"rpc\\\",s=this.tn.next();if(!t.NAME.test(s))throw Error(\\\"illegal rpc service method name: \\\"+s);if(n=s,i={request:null,response:null,request_stream:!1,response_stream:!1,options:{}},this.tn.skip(\\\"(\\\"),\\\"stream\\\"===(s=this.tn.next()).toLowerCase()&&(i.request_stream=!0,s=this.tn.next()),!t.TYPEREF.test(s))throw Error(\\\"illegal rpc service request type: \\\"+s);if(i.request=s,this.tn.skip(\\\")\\\"),\\\"returns\\\"!==(s=this.tn.next()).toLowerCase())throw Error(\\\"illegal rpc service request type delimiter: \\\"+s);if(this.tn.skip(\\\"(\\\"),\\\"stream\\\"===(s=this.tn.next()).toLowerCase()&&(i.response_stream=!0,s=this.tn.next()),i.response=s,this.tn.skip(\\\")\\\"),\\\"{\\\"===(s=this.tn.peek())){for(this.tn.next();\\\"}\\\"!==(s=this.tn.next());){if(\\\"option\\\"!==s)throw Error(\\\"illegal rpc service token: \\\"+s);this._parseOption(i)}this.tn.omit(\\\";\\\")}else this.tn.skip(\\\";\\\");void 0===e[r]&&(e[r]={}),e[r][n]=i},o._parseMessage=function(e,i){var r=!!i,s=this.tn.next(),o={name:\\\"\\\",fields:[],enums:[],messages:[],options:{},services:[],oneofs:{}};if(!t.NAME.test(s))throw Error(\\\"illegal \\\"+(r?\\\"group\\\":\\\"message\\\")+\\\" name: \\\"+s);for(o.name=s,r&&(this.tn.skip(\\\"=\\\"),i.id=n(this.tn.next()),o.isGroup=!0),\\\"[\\\"===(s=this.tn.peek())&&i&&this._parseFieldOptions(i),this.tn.skip(\\\"{\\\");\\\"}\\\"!==(s=this.tn.next());)if(t.RULE.test(s))this._parseMessageField(o,s);else if(\\\"oneof\\\"===s)this._parseMessageOneOf(o);else if(\\\"enum\\\"===s)this._parseEnum(o);else if(\\\"message\\\"===s)this._parseMessage(o);else if(\\\"option\\\"===s)this._parseOption(o);else if(\\\"service\\\"===s)this._parseService(o);else if(\\\"extensions\\\"===s)o.extensions=this._parseExtensionRanges();else if(\\\"reserved\\\"===s)this._parseIgnored();else if(\\\"extend\\\"===s)this._parseExtend(o);else{if(!t.TYPEREF.test(s))throw Error(\\\"illegal message token: \\\"+s);if(!this.proto3)throw Error(\\\"illegal field rule: \\\"+s);this._parseMessageField(o,\\\"optional\\\",s)}return this.tn.omit(\\\";\\\"),e.messages.push(o),o},o._parseIgnored=function(){for(;\\\";\\\"!==this.tn.peek();)this.tn.next();this.tn.skip(\\\";\\\")},o._parseMessageField=function(e,i,r){var s,o,a;if(!t.RULE.test(i))throw Error(\\\"illegal message field rule: \\\"+i);if(s={rule:i,type:\\\"\\\",name:\\\"\\\",options:{},id:0},\\\"map\\\"===i){if(r)throw Error(\\\"illegal type: \\\"+r);if(this.tn.skip(\\\"<\\\"),o=this.tn.next(),!t.TYPE.test(o)&&!t.TYPEREF.test(o))throw Error(\\\"illegal message field type: \\\"+o);if(s.keytype=o,this.tn.skip(\\\",\\\"),o=this.tn.next(),!t.TYPE.test(o)&&!t.TYPEREF.test(o))throw Error(\\\"illegal message field: \\\"+o);if(s.type=o,this.tn.skip(\\\">\\\"),o=this.tn.next(),!t.NAME.test(o))throw Error(\\\"illegal message field name: \\\"+o);s.name=o,this.tn.skip(\\\"=\\\"),s.id=n(this.tn.next()),\\\"[\\\"===(o=this.tn.peek())&&this._parseFieldOptions(s),this.tn.skip(\\\";\\\")}else if(\\\"group\\\"===(r=void 0!==r?r:this.tn.next())){if(a=this._parseMessage(e,s),!/^[A-Z]/.test(a.name))throw Error(\\\"illegal group name: \\\"+a.name);s.type=a.name,s.name=a.name.toLowerCase(),this.tn.omit(\\\";\\\")}else{if(!t.TYPE.test(r)&&!t.TYPEREF.test(r))throw Error(\\\"illegal message field type: \\\"+r);if(s.type=r,o=this.tn.next(),!t.NAME.test(o))throw Error(\\\"illegal message field name: \\\"+o);s.name=o,this.tn.skip(\\\"=\\\"),s.id=n(this.tn.next()),\\\"[\\\"===(o=this.tn.peek())&&this._parseFieldOptions(s),this.tn.skip(\\\";\\\")}return e.fields.push(s),s},o._parseMessageOneOf=function(e){var n,i,r,s=this.tn.next();if(!t.NAME.test(s))throw Error(\\\"illegal oneof name: \\\"+s);for(i=s,r=[],this.tn.skip(\\\"{\\\");\\\"}\\\"!==(s=this.tn.next());)(n=this._parseMessageField(e,\\\"optional\\\",s)).oneof=i,r.push(n.id);this.tn.omit(\\\";\\\"),e.oneofs[i]=r},o._parseFieldOptions=function(e){this.tn.skip(\\\"[\\\");for(var t=!0;\\\"]\\\"!==this.tn.peek();)t||this.tn.skip(\\\",\\\"),this._parseOption(e,!0),t=!1;this.tn.next()},o._parseEnum=function(e){var i,r={name:\\\"\\\",values:[],options:{}},s=this.tn.next();if(!t.NAME.test(s))throw Error(\\\"illegal name: \\\"+s);for(r.name=s,this.tn.skip(\\\"{\\\");\\\"}\\\"!==(s=this.tn.next());)if(\\\"option\\\"===s)this._parseOption(r);else{if(!t.NAME.test(s))throw Error(\\\"illegal name: \\\"+s);this.tn.skip(\\\"=\\\"),i={name:s,id:n(this.tn.next(),!0)},\\\"[\\\"===(s=this.tn.peek())&&this._parseFieldOptions({options:{}}),this.tn.skip(\\\";\\\"),r.values.push(i)}this.tn.omit(\\\";\\\"),e.enums.push(r)},o._parseExtensionRanges=function(){var t,n,r,s=[];do{for(n=[];;){switch(t=this.tn.next()){case\\\"min\\\":r=e.ID_MIN;break;case\\\"max\\\":r=e.ID_MAX;break;default:r=i(t)}if(n.push(r),2===n.length)break;if(\\\"to\\\"!==this.tn.peek()){n.push(r);break}this.tn.next()}s.push(n)}while(this.tn.omit(\\\",\\\"));return this.tn.skip(\\\";\\\"),s},o._parseExtend=function(e){var n,i=this.tn.next();if(!t.TYPEREF.test(i))throw Error(\\\"illegal extend reference: \\\"+i);for(n={ref:i,fields:[]},this.tn.skip(\\\"{\\\");\\\"}\\\"!==(i=this.tn.next());)if(t.RULE.test(i))this._parseMessageField(n,i);else{if(!t.TYPEREF.test(i))throw Error(\\\"illegal extend token: \\\"+i);if(!this.proto3)throw Error(\\\"illegal field rule: \\\"+i);this._parseMessageField(n,\\\"optional\\\",i)}return this.tn.omit(\\\";\\\"),e.messages.push(n),n},o.toString=function(){return\\\"Parser at line \\\"+this.tn.line},a.Parser=s,a}(r,r.Lang),r.Reflect=function(t){function i(e,n){if(e&&\\\"number\\\"==typeof e.low&&\\\"number\\\"==typeof e.high&&\\\"boolean\\\"==typeof e.unsigned&&e.low==e.low&&e.high==e.high)return new t.Long(e.low,e.high,void 0===n?e.unsigned:n);if(\\\"string\\\"==typeof e)return t.Long.fromString(e,n||!1,10);if(\\\"number\\\"==typeof e)return t.Long.fromNumber(e,n||!1);throw Error(\\\"not convertible to Long\\\")}function r(e,n){var i=n.readVarint32(),s=7&i,o=i>>>3;switch(s){case t.WIRE_TYPES.VARINT:do{i=n.readUint8()}while(128==(128&i));break;case t.WIRE_TYPES.BITS64:n.offset+=8;break;case t.WIRE_TYPES.LDELIM:i=n.readVarint32(),n.offset+=i;break;case t.WIRE_TYPES.STARTGROUP:r(o,n);break;case t.WIRE_TYPES.ENDGROUP:if(o===e)return!1;throw Error(\\\"Illegal GROUPEND after unknown group: \\\"+o+\\\" (\\\"+e+\\\" expected)\\\");case t.WIRE_TYPES.BITS32:n.offset+=4;break;default:throw Error(\\\"Illegal wire type in unknown group \\\"+e+\\\": \\\"+s)}return!0}var s,o,a,u,c,h,l,d,f,p,g,_,y,v,E,m,I={},T=function(e,t,n){this.builder=e,this.parent=t,this.name=n,this.className},C=T.prototype;return C.fqn=function(){for(var e=this.name,t=this;null!=(t=t.parent);)e=t.name+\\\".\\\"+e;return e},C.toString=function(e){return(e?this.className+\\\" \\\":\\\"\\\")+this.fqn()},C.build=function(){throw Error(this.toString(!0)+\\\" cannot be built directly\\\")},I.T=T,(o=(s=function(e,t,n,i,r){T.call(this,e,t,n),this.className=\\\"Namespace\\\",this.children=[],this.options=i||{},this.syntax=r||\\\"proto2\\\"}).prototype=Object.create(T.prototype)).getChildren=function(e){var t,n,i;if(null==(e=e||null))return this.children.slice();for(t=[],n=0,i=this.children.length;i>n;++n)this.children[n]instanceof e&&t.push(this.children[n]);return t},o.addChild=function(e){var t;if(t=this.getChild(e.name))if(t instanceof c.Field&&t.name!==t.originalName&&null===this.getChild(t.originalName))t.name=t.originalName;else{if(!(e instanceof c.Field&&e.name!==e.originalName&&null===this.getChild(e.originalName)))throw Error(\\\"Duplicate name in namespace \\\"+this.toString(!0)+\\\": \\\"+e.name);e.name=e.originalName}this.children.push(e)},o.getChild=function(e){var t,n,i=\\\"number\\\"==typeof e?\\\"id\\\":\\\"name\\\";for(t=0,n=this.children.length;n>t;++t)if(this.children[t][i]===e)return this.children[t];return null},o.resolve=function(e,t){var n,i=\\\"string\\\"==typeof e?e.split(\\\".\\\"):e,r=this,s=0;if(\\\"\\\"===i[s]){for(;null!==r.parent;)r=r.parent;s++}do{do{if(!(r instanceof I.Namespace)){r=null;break}if(!((n=r.getChild(i[s]))&&n instanceof I.T&&(!t||n instanceof I.Namespace))){r=null;break}r=n,s++}while(s<i.length);if(null!=r)break;if(null!==this.parent)return this.parent.resolve(e,t)}while(null!=r);return r},o.qn=function(e){var t,n,i=[],r=e;do{i.unshift(r.name),r=r.parent}while(null!==r);for(t=1;t<=i.length;t++)if(n=i.slice(i.length-t),e===this.resolve(n,e instanceof I.Namespace))return n.join(\\\".\\\");return e.fqn()},o.build=function(){var e,t,n,i={},r=this.children;for(t=0,n=r.length;n>t;++t)(e=r[t])instanceof s&&(i[e.name]=e.build());return Object.defineProperty&&Object.defineProperty(i,\\\"$options\\\",{value:this.buildOpt()}),i},o.buildOpt=function(){var e,t,n,i,r={},s=Object.keys(this.options);for(e=0,t=s.length;t>e;++e)n=s[e],i=this.options[s[e]],r[n]=i;return r},o.getOption=function(e){return void 0===e?this.options:void 0!==this.options[e]?this.options[e]:null},I.Namespace=s,u=(a=function(e,n,i,r){if(this.type=e,this.resolvedType=n,this.isMapKey=i,this.syntax=r,i&&t.MAP_KEY_TYPES.indexOf(e)<0)throw Error(\\\"Invalid map key type: \\\"+e.name)}).prototype,a.defaultFieldValue=function(e){if(\\\"string\\\"==typeof e&&(e=t.TYPES[e]),void 0===e.defaultValue)throw Error(\\\"default value for type \\\"+e.name+\\\" is not supported\\\");return e==t.TYPES.bytes?new n(0):e.defaultValue},u.verifyValue=function(n){var r,s,o,a=function(e,t){throw Error(\\\"Illegal value for \\\"+this.toString(!0)+\\\" of type \\\"+this.type.name+\\\": \\\"+e+\\\" (\\\"+t+\\\")\\\")}.bind(this);switch(this.type){case t.TYPES.int32:case t.TYPES.sint32:case t.TYPES.sfixed32:return(\\\"number\\\"!=typeof n||n==n&&n%1!=0)&&a(typeof n,\\\"not an integer\\\"),n>4294967295?0|n:n;case t.TYPES.uint32:case t.TYPES.fixed32:return(\\\"number\\\"!=typeof n||n==n&&n%1!=0)&&a(typeof n,\\\"not an integer\\\"),n<0?n>>>0:n;case t.TYPES.int64:case t.TYPES.sint64:case t.TYPES.sfixed64:if(t.Long)try{return i(n,!1)}catch(e){a(typeof n,e.message)}else a(typeof n,\\\"requires Long.js\\\");case t.TYPES.uint64:case t.TYPES.fixed64:if(t.Long)try{return i(n,!0)}catch(e){a(typeof n,e.message)}else a(typeof n,\\\"requires Long.js\\\");case t.TYPES.bool:return\\\"boolean\\\"!=typeof n&&a(typeof n,\\\"not a boolean\\\"),n;case t.TYPES.float:case t.TYPES.double:return\\\"number\\\"!=typeof n&&a(typeof n,\\\"not a number\\\"),n;case t.TYPES.string:return\\\"string\\\"==typeof n||n&&n instanceof String||a(typeof n,\\\"not a string\\\"),\\\"\\\"+n;case t.TYPES.bytes:return e.isByteBuffer(n)?n:e.wrap(n);case t.TYPES.enum:for(r=this.resolvedType.getChildren(t.Reflect.Enum.Value),o=0;o<r.length;o++){if(r[o].name==n)return r[o].id;if(r[o].id==n)return r[o].id}if(\\\"proto3\\\"===this.syntax)return(\\\"number\\\"!=typeof n||n==n&&n%1!=0)&&a(typeof n,\\\"not an integer\\\"),(n>4294967295||n<0)&&a(typeof n,\\\"not in range for uint32\\\"),n;a(n,\\\"not a valid enum value\\\");case t.TYPES.group:case t.TYPES.message:if(n&&\\\"object\\\"==typeof n||a(typeof n,\\\"object expected\\\"),n instanceof this.resolvedType.clazz)return n;if(n instanceof t.Builder.Message){for(o in s={},n)n.hasOwnProperty(o)&&(s[o]=n[o]);n=s}return new this.resolvedType.clazz(n)}throw Error(\\\"[INTERNAL] Illegal value for \\\"+this.toString(!0)+\\\": \\\"+n+\\\" (undefined type \\\"+this.type+\\\")\\\")},u.calculateLength=function(e,i){if(null===i)return 0;var r;switch(this.type){case t.TYPES.int32:return i<0?n.calculateVarint64(i):n.calculateVarint32(i);case t.TYPES.uint32:return n.calculateVarint32(i);case t.TYPES.sint32:return n.calculateVarint32(n.zigZagEncode32(i));case t.TYPES.fixed32:case t.TYPES.sfixed32:case t.TYPES.float:return 4;case t.TYPES.int64:case t.TYPES.uint64:return n.calculateVarint64(i);case t.TYPES.sint64:return n.calculateVarint64(n.zigZagEncode64(i));case t.TYPES.fixed64:case t.TYPES.sfixed64:return 8;case t.TYPES.bool:return 1;case t.TYPES.enum:return n.calculateVarint32(i);case t.TYPES.double:return 8;case t.TYPES.string:return r=n.calculateUTF8Bytes(i),n.calculateVarint32(r)+r;case t.TYPES.bytes:if(i.remaining()<0)throw Error(\\\"Illegal value for \\\"+this.toString(!0)+\\\": \\\"+i.remaining()+\\\" bytes remaining\\\");return n.calculateVarint32(i.remaining())+i.remaining();case t.TYPES.message:return r=this.resolvedType.calculate(i),n.calculateVarint32(r)+r;case t.TYPES.group:return(r=this.resolvedType.calculate(i))+n.calculateVarint32(e<<3|t.WIRE_TYPES.ENDGROUP)}throw Error(\\\"[INTERNAL] Illegal value to encode in \\\"+this.toString(!0)+\\\": \\\"+i+\\\" (unknown type)\\\")},u.encodeValue=function(e,i,r){var s,o;if(null===i)return r;switch(this.type){case t.TYPES.int32:i<0?r.writeVarint64(i):r.writeVarint32(i);break;case t.TYPES.uint32:r.writeVarint32(i);break;case t.TYPES.sint32:r.writeVarint32ZigZag(i);break;case t.TYPES.fixed32:r.writeUint32(i);break;case t.TYPES.sfixed32:r.writeInt32(i);break;case t.TYPES.int64:case t.TYPES.uint64:r.writeVarint64(i);break;case t.TYPES.sint64:r.writeVarint64ZigZag(i);break;case t.TYPES.fixed64:r.writeUint64(i);break;case t.TYPES.sfixed64:r.writeInt64(i);break;case t.TYPES.bool:\\\"string\\\"==typeof i?r.writeVarint32(\\\"false\\\"===i.toLowerCase()?0:!!i):r.writeVarint32(i?1:0);break;case t.TYPES.enum:r.writeVarint32(i);break;case t.TYPES.float:r.writeFloat32(i);break;case t.TYPES.double:r.writeFloat64(i);break;case t.TYPES.string:r.writeVString(i);break;case t.TYPES.bytes:if(i.remaining()<0)throw Error(\\\"Illegal value for \\\"+this.toString(!0)+\\\": \\\"+i.remaining()+\\\" bytes remaining\\\");s=i.offset,r.writeVarint32(i.remaining()),r.append(i),i.offset=s;break;case t.TYPES.message:o=(new n).LE(),this.resolvedType.encode(i,o),r.writeVarint32(o.offset),r.append(o.flip());break;case t.TYPES.group:this.resolvedType.encode(i,r),r.writeVarint32(e<<3|t.WIRE_TYPES.ENDGROUP);break;default:throw Error(\\\"[INTERNAL] Illegal value to encode in \\\"+this.toString(!0)+\\\": \\\"+i+\\\" (unknown type)\\\")}return r},u.decode=function(e,n,i){if(n!=this.type.wireType)throw Error(\\\"Unexpected wire type for element\\\");var r,s;switch(this.type){case t.TYPES.int32:return 0|e.readVarint32();case t.TYPES.uint32:return e.readVarint32()>>>0;case t.TYPES.sint32:return 0|e.readVarint32ZigZag();case t.TYPES.fixed32:return e.readUint32()>>>0;case t.TYPES.sfixed32:return 0|e.readInt32();case t.TYPES.int64:return e.readVarint64();case t.TYPES.uint64:return e.readVarint64().toUnsigned();case t.TYPES.sint64:return e.readVarint64ZigZag();case t.TYPES.fixed64:return e.readUint64();case t.TYPES.sfixed64:return e.readInt64();case t.TYPES.bool:return!!e.readVarint32();case t.TYPES.enum:return e.readVarint32();case t.TYPES.float:return e.readFloat();case t.TYPES.double:return e.readDouble();case t.TYPES.string:return e.readVString();case t.TYPES.bytes:if(s=e.readVarint32(),e.remaining()<s)throw Error(\\\"Illegal number of bytes for \\\"+this.toString(!0)+\\\": \\\"+s+\\\" required but got only \\\"+e.remaining());return(r=e.clone()).limit=r.offset+s,e.offset+=s,r;case t.TYPES.message:return s=e.readVarint32(),this.resolvedType.decode(e,s);case t.TYPES.group:return this.resolvedType.decode(e,-1,i)}throw Error(\\\"[INTERNAL] Illegal decode type\\\")},u.valueFromString=function(e){if(!this.isMapKey)throw Error(\\\"valueFromString() called on non-map-key element\\\");switch(this.type){case t.TYPES.int32:case t.TYPES.sint32:case t.TYPES.sfixed32:case t.TYPES.uint32:case t.TYPES.fixed32:return this.verifyValue(parseInt(e));case t.TYPES.int64:case t.TYPES.sint64:case t.TYPES.sfixed64:case t.TYPES.uint64:case t.TYPES.fixed64:return this.verifyValue(e);case t.TYPES.bool:return\\\"true\\\"===e;case t.TYPES.string:return this.verifyValue(e);case t.TYPES.bytes:return n.fromBinary(e)}},u.valueToString=function(e){if(!this.isMapKey)throw Error(\\\"valueToString() called on non-map-key element\\\");return this.type===t.TYPES.bytes?e.toString(\\\"binary\\\"):e.toString()},I.Element=a,(h=(c=function(e,t,n,i,r,o){s.call(this,e,t,n,i,o),this.className=\\\"Message\\\",this.extensions=void 0,this.clazz=null,this.isGroup=!!r,this._fields=null,this._fieldsById=null,this._fieldsByName=null}).prototype=Object.create(s.prototype)).build=function(i){var r,s,o,a;if(this.clazz&&!i)return this.clazz;for(r=function(t,i){function r(e,i,s,o){var a,u,c,h,l,d,f;if(null===e||\\\"object\\\"!=typeof e)return o&&o instanceof t.Reflect.Enum&&null!==(a=t.Reflect.Enum.getName(o.object,e))?a:e;if(n.isByteBuffer(e))return i?e.toBase64():e.toBuffer();if(t.Long.isLong(e))return s?e.toString():t.Long.fromValue(e);if(Array.isArray(e))return u=[],e.forEach((function(e,t){u[t]=r(e,i,s,o)})),u;if(u={},e instanceof t.Map){for(h=(c=e.entries()).next();!h.done;h=c.next())u[e.keyElem.valueToString(h.value[0])]=r(h.value[1],i,s,e.valueElem.resolvedType);return u}for(f in l=e.$type,d=void 0,e)e.hasOwnProperty(f)&&(u[f]=l&&(d=l.getChild(f))?r(e[f],i,s,d.resolvedType):r(e[f],i,s));return u}var s,o,a=i.getChildren(t.Reflect.Message.Field),u=i.getChildren(t.Reflect.Message.OneOf),c=function(e){var r,s,o,h;for(t.Builder.Message.call(this),r=0,s=u.length;s>r;++r)this[u[r].name]=null;for(r=0,s=a.length;s>r;++r)this[(o=a[r]).name]=o.repeated?[]:o.map?new t.Map(o):null,!o.required&&\\\"proto3\\\"!==i.syntax||null===o.defaultValue||(this[o.name]=o.defaultValue);if(arguments.length>0)if(1!==arguments.length||null===e||\\\"object\\\"!=typeof e||!(\\\"function\\\"!=typeof e.encode||e instanceof c)||Array.isArray(e)||e instanceof t.Map||n.isByteBuffer(e)||e instanceof ArrayBuffer||t.Long&&e instanceof t.Long)for(r=0,s=arguments.length;s>r;++r)void 0!==(h=arguments[r])&&this.$set(a[r].name,h);else this.$set(e)},h=c.prototype=Object.create(t.Builder.Message.prototype);for(h.add=function(e,n,r){var s=i._fieldsByName[e];if(!r){if(!s)throw Error(this+\\\"#\\\"+e+\\\" is undefined\\\");if(!(s instanceof t.Reflect.Message.Field))throw Error(this+\\\"#\\\"+e+\\\" is not a field: \\\"+s.toString(!0));if(!s.repeated)throw Error(this+\\\"#\\\"+e+\\\" is not a repeated field\\\");n=s.verifyValue(n,!0)}return null===this[e]&&(this[e]=[]),this[e].push(n),this},h.$add=h.add,h.set=function(e,n,r){var s,o,a;if(e&&\\\"object\\\"==typeof e){for(s in r=n,e)e.hasOwnProperty(s)&&void 0!==(n=e[s])&&this.$set(s,n,r);return this}if(o=i._fieldsByName[e],r)this[e]=n;else{if(!o)throw Error(this+\\\"#\\\"+e+\\\" is not a field: undefined\\\");if(!(o instanceof t.Reflect.Message.Field))throw Error(this+\\\"#\\\"+e+\\\" is not a field: \\\"+o.toString(!0));this[o.name]=n=o.verifyValue(n)}return o&&o.oneof&&(a=this[o.oneof.name],null!==n?(null!==a&&a!==o.name&&(this[a]=null),this[o.oneof.name]=o.name):a===e&&(this[o.oneof.name]=null)),this},h.$set=h.set,h.get=function(e,n){if(n)return this[e];var r=i._fieldsByName[e];if(!(r&&r instanceof t.Reflect.Message.Field))throw Error(this+\\\"#\\\"+e+\\\" is not a field: undefined\\\");if(!(r instanceof t.Reflect.Message.Field))throw Error(this+\\\"#\\\"+e+\\\" is not a field: \\\"+r.toString(!0));return this[r.name]},h.$get=h.get,s=0;s<a.length;s++)(o=a[s])instanceof t.Reflect.Message.ExtensionField||i.builder.options.populateAccessors&&function(e){var t,n,r,s=e.originalName.replace(/(_[a-zA-Z])/g,(function(e){return e.toUpperCase().replace(\\\"_\\\",\\\"\\\")}));s=s.substring(0,1).toUpperCase()+s.substring(1),t=e.originalName.replace(/([A-Z])/g,(function(e){return\\\"_\\\"+e})),n=function(t,n){return this[e.name]=n?t:e.verifyValue(t),this},r=function(){return this[e.name]},null===i.getChild(\\\"set\\\"+s)&&(h[\\\"set\\\"+s]=n),null===i.getChild(\\\"set_\\\"+t)&&(h[\\\"set_\\\"+t]=n),null===i.getChild(\\\"get\\\"+s)&&(h[\\\"get\\\"+s]=r),null===i.getChild(\\\"get_\\\"+t)&&(h[\\\"get_\\\"+t]=r)}(o);return h.encode=function(t,n){var r,s;\\\"boolean\\\"==typeof t&&(n=t,t=void 0),r=!1,t||(t=new e,r=!0),s=t.littleEndian;try{return i.encode(this,t.LE(),n),(r?t.flip():t).LE(s)}catch(e){throw t.LE(s),e}},c.encode=function(e,t,n){return new c(e).encode(t,n)},h.calculate=function(){return i.calculate(this)},h.encodeDelimited=function(e){var t,r=!1;return e||(e=new n,r=!0),t=(new n).LE(),i.encode(this,t).flip(),e.writeVarint32(t.remaining()),e.append(t),r?e.flip():e},h.encodeAB=function(){try{return this.encode().toArrayBuffer()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toArrayBuffer()),e}},h.toArrayBuffer=h.encodeAB,h.encodeNB=function(){try{return this.encode().toBuffer()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toBuffer()),e}},h.toBuffer=h.encodeNB,h.encode64=function(){try{return this.encode().toBase64()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toBase64()),e}},h.toBase64=h.encode64,h.encodeHex=function(){try{return this.encode().toHex()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toHex()),e}},h.toHex=h.encodeHex,h.toRaw=function(e,t){return r(this,!!e,!!t,this.$type)},h.encodeJSON=function(){return JSON.stringify(r(this,!0,!0,this.$type))},c.decode=function(e,t){var r,s;\\\"string\\\"==typeof e&&(e=n.wrap(e,t||\\\"base64\\\")),r=(e=n.isByteBuffer(e)?e:n.wrap(e)).littleEndian;try{return s=i.decode(e.LE()),e.LE(r),s}catch(t){throw e.LE(r),t}},c.decodeDelimited=function(e,t){var r,s,o;if(\\\"string\\\"==typeof e&&(e=n.wrap(e,t||\\\"base64\\\")),(e=n.isByteBuffer(e)?e:n.wrap(e)).remaining()<1)return null;if(r=e.offset,s=e.readVarint32(),e.remaining()<s)return e.offset=r,null;try{return o=i.decode(e.slice(e.offset,e.offset+s).LE()),e.offset+=s,o}catch(t){throw e.offset+=s,t}},c.decode64=function(e){return c.decode(e,\\\"base64\\\")},c.decodeHex=function(e){return c.decode(e,\\\"hex\\\")},c.decodeJSON=function(e){return new c(JSON.parse(e))},h.toString=function(){return i.toString()},Object.defineProperty&&(Object.defineProperty(c,\\\"$options\\\",{value:i.buildOpt()}),Object.defineProperty(h,\\\"$options\\\",{value:c.$options}),Object.defineProperty(c,\\\"$type\\\",{value:i}),Object.defineProperty(h,\\\"$type\\\",{value:i})),c}(t,this),this._fields=[],this._fieldsById={},this._fieldsByName={},o=0,a=this.children.length;a>o;o++)if((s=this.children[o])instanceof g||s instanceof c||s instanceof v){if(r.hasOwnProperty(s.name))throw Error(\\\"Illegal reflect child of \\\"+this.toString(!0)+\\\": \\\"+s.toString(!0)+\\\" cannot override static property '\\\"+s.name+\\\"'\\\");r[s.name]=s.build()}else if(s instanceof c.Field)s.build(),this._fields.push(s),this._fieldsById[s.id]=s,this._fieldsByName[s.name]=s;else if(!(s instanceof c.OneOf||s instanceof y))throw Error(\\\"Illegal reflect child of \\\"+this.toString(!0)+\\\": \\\"+this.children[o].toString(!0));return this.clazz=r},h.encode=function(e,t,n){var i,r,s,o,a,u=null;for(s=0,o=this._fields.length;o>s;++s)r=e[(i=this._fields[s]).name],i.required&&null===r?null===u&&(u=i):i.encode(n?r:i.verifyValue(r),t,e);if(null!==u)throw(a=Error(\\\"Missing at least one required field for \\\"+this.toString(!0)+\\\": \\\"+u)).encoded=t,a;return t},h.calculate=function(e){for(var t,n,i=0,r=0,s=this._fields.length;s>r;++r){if(n=e[(t=this._fields[r]).name],t.required&&null===n)throw Error(\\\"Missing at least one required field for \\\"+this.toString(!0)+\\\": \\\"+t);i+=t.calculate(n,e)}return i},h.decode=function(e,n,i){var s,o,a,u,c,h,l,d,f,p,g,_;for(n=\\\"number\\\"==typeof n?n:-1,c=e.offset,h=new this.clazz;e.offset<c+n||-1===n&&e.remaining()>0;){if(a=(s=e.readVarint32())>>>3,(o=7&s)===t.WIRE_TYPES.ENDGROUP){if(a!==i)throw Error(\\\"Illegal group end indicator for \\\"+this.toString(!0)+\\\": \\\"+a+\\\" (\\\"+(i?i+\\\" expected\\\":\\\"not a group\\\")+\\\")\\\");break}if(u=this._fieldsById[a])u.repeated&&!u.options.packed?h[u.name].push(u.decode(o,e)):u.map?(d=u.decode(o,e),h[u.name].set(d[0],d[1])):(h[u.name]=u.decode(o,e),u.oneof&&(null!==(f=h[u.oneof.name])&&f!==u.name&&(h[f]=null),h[u.oneof.name]=u.name));else switch(o){case t.WIRE_TYPES.VARINT:e.readVarint32();break;case t.WIRE_TYPES.BITS32:e.offset+=4;break;case t.WIRE_TYPES.BITS64:e.offset+=8;break;case t.WIRE_TYPES.LDELIM:l=e.readVarint32(),e.offset+=l;break;case t.WIRE_TYPES.STARTGROUP:for(;r(a,e););break;default:throw Error(\\\"Illegal wire type for unknown field \\\"+a+\\\" in \\\"+this.toString(!0)+\\\"#decode: \\\"+o)}}for(p=0,g=this._fields.length;g>p;++p)if(null===h[(u=this._fields[p]).name])if(\\\"proto3\\\"===this.syntax)h[u.name]=u.defaultValue;else{if(u.required)throw(_=Error(\\\"Missing at least one required field for \\\"+this.toString(!0)+\\\": \\\"+u.name)).decoded=h,_;t.populateDefaults&&null!==u.defaultValue&&(h[u.name]=u.defaultValue)}return h},I.Message=c,(d=(l=function(e,n,i,r,s,o,a,u,h,l){T.call(this,e,n,o),this.className=\\\"Message.Field\\\",this.required=\\\"required\\\"===i,this.repeated=\\\"repeated\\\"===i,this.map=\\\"map\\\"===i,this.keyType=r||null,this.type=s,this.resolvedType=null,this.id=a,this.options=u||{},this.defaultValue=null,this.oneof=h||null,this.syntax=l||\\\"proto2\\\",this.originalName=this.name,this.element=null,this.keyElement=null,!this.builder.options.convertFieldsToCamelCase||this instanceof c.ExtensionField||(this.name=t.Util.toCamelCase(this.name))}).prototype=Object.create(T.prototype)).build=function(){this.element=new a(this.type,this.resolvedType,!1,this.syntax),this.map&&(this.keyElement=new a(this.keyType,void 0,!0,this.syntax)),\\\"proto3\\\"!==this.syntax||this.repeated||this.map?void 0!==this.options.default&&(this.defaultValue=this.verifyValue(this.options.default)):this.defaultValue=a.defaultFieldValue(this.type)},d.verifyValue=function(e,n){var i,r,s;if(n=n||!1,i=function(e,t){throw Error(\\\"Illegal value for \\\"+this.toString(!0)+\\\" of type \\\"+this.type.name+\\\": \\\"+e+\\\" (\\\"+t+\\\")\\\")}.bind(this),null===e)return this.required&&i(typeof e,\\\"required\\\"),\\\"proto3\\\"===this.syntax&&this.type!==t.TYPES.message&&i(typeof e,\\\"proto3 field without field presence cannot be null\\\"),null;if(this.repeated&&!n){for(Array.isArray(e)||(e=[e]),s=[],r=0;r<e.length;r++)s.push(this.element.verifyValue(e[r]));return s}return this.map&&!n?e instanceof t.Map?e:(e instanceof Object||i(typeof e,\\\"expected ProtoBuf.Map or raw object for map field\\\"),new t.Map(this,e)):(!this.repeated&&Array.isArray(e)&&i(typeof e,\\\"no array expected\\\"),this.element.verifyValue(e))},d.hasWirePresence=function(e,n){if(\\\"proto3\\\"!==this.syntax)return null!==e;if(this.oneof&&n[this.oneof.name]===this.name)return!0;switch(this.type){case t.TYPES.int32:case t.TYPES.sint32:case t.TYPES.sfixed32:case t.TYPES.uint32:case t.TYPES.fixed32:return 0!==e;case t.TYPES.int64:case t.TYPES.sint64:case t.TYPES.sfixed64:case t.TYPES.uint64:case t.TYPES.fixed64:return 0!==e.low||0!==e.high;case t.TYPES.bool:return e;case t.TYPES.float:case t.TYPES.double:return 0!==e;case t.TYPES.string:return e.length>0;case t.TYPES.bytes:return e.remaining()>0;case t.TYPES.enum:return 0!==e;case t.TYPES.message:return null!==e;default:return!0}},d.encode=function(e,i,r){var s,o,a,u,c;if(null===this.type||\\\"object\\\"!=typeof this.type)throw Error(\\\"[INTERNAL] Unresolved type in \\\"+this.toString(!0)+\\\": \\\"+this.type);if(null===e||this.repeated&&0==e.length)return i;try{if(this.repeated)if(this.options.packed&&t.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0){for(i.writeVarint32(this.id<<3|t.WIRE_TYPES.LDELIM),i.ensureCapacity(i.offset+=1),o=i.offset,s=0;s<e.length;s++)this.element.encodeValue(this.id,e[s],i);a=i.offset-o,(u=n.calculateVarint32(a))>1&&(c=i.slice(o,i.offset),o+=u-1,i.offset=o,i.append(c)),i.writeVarint32(a,o-u)}else for(s=0;s<e.length;s++)i.writeVarint32(this.id<<3|this.type.wireType),this.element.encodeValue(this.id,e[s],i);else this.map?e.forEach((function(e,r){var s=n.calculateVarint32(8|this.keyType.wireType)+this.keyElement.calculateLength(1,r)+n.calculateVarint32(16|this.type.wireType)+this.element.calculateLength(2,e);i.writeVarint32(this.id<<3|t.WIRE_TYPES.LDELIM),i.writeVarint32(s),i.writeVarint32(8|this.keyType.wireType),this.keyElement.encodeValue(1,r,i),i.writeVarint32(16|this.type.wireType),this.element.encodeValue(2,e,i)}),this):this.hasWirePresence(e,r)&&(i.writeVarint32(this.id<<3|this.type.wireType),this.element.encodeValue(this.id,e,i))}catch(t){throw Error(\\\"Illegal value for \\\"+this.toString(!0)+\\\": \\\"+e+\\\" (\\\"+t+\\\")\\\")}return i},d.calculate=function(e,i){var r,s,o;if(e=this.verifyValue(e),null===this.type||\\\"object\\\"!=typeof this.type)throw Error(\\\"[INTERNAL] Unresolved type in \\\"+this.toString(!0)+\\\": \\\"+this.type);if(null===e||this.repeated&&0==e.length)return 0;r=0;try{if(this.repeated)if(this.options.packed&&t.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0){for(r+=n.calculateVarint32(this.id<<3|t.WIRE_TYPES.LDELIM),o=0,s=0;s<e.length;s++)o+=this.element.calculateLength(this.id,e[s]);r+=n.calculateVarint32(o),r+=o}else for(s=0;s<e.length;s++)r+=n.calculateVarint32(this.id<<3|this.type.wireType),r+=this.element.calculateLength(this.id,e[s]);else this.map?e.forEach((function(e,i){var s=n.calculateVarint32(8|this.keyType.wireType)+this.keyElement.calculateLength(1,i)+n.calculateVarint32(16|this.type.wireType)+this.element.calculateLength(2,e);r+=n.calculateVarint32(this.id<<3|t.WIRE_TYPES.LDELIM),r+=n.calculateVarint32(s),r+=s}),this):this.hasWirePresence(e,i)&&(r+=n.calculateVarint32(this.id<<3|this.type.wireType),r+=this.element.calculateLength(this.id,e))}catch(t){throw Error(\\\"Illegal value for \\\"+this.toString(!0)+\\\": \\\"+e+\\\" (\\\"+t+\\\")\\\")}return r},d.decode=function(e,n,i){var r,s,o,u,c,h,l;if(!(!this.map&&e==this.type.wireType||!i&&this.repeated&&this.options.packed&&e==t.WIRE_TYPES.LDELIM||this.map&&e==t.WIRE_TYPES.LDELIM))throw Error(\\\"Illegal wire type for field \\\"+this.toString(!0)+\\\": \\\"+e+\\\" (\\\"+this.type.wireType+\\\" expected)\\\");if(e==t.WIRE_TYPES.LDELIM&&this.repeated&&this.options.packed&&t.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0&&!i){for(s=n.readVarint32(),s=n.offset+s,o=[];n.offset<s;)o.push(this.decode(this.type.wireType,n,!0));return o}if(this.map){if(u=a.defaultFieldValue(this.keyType),r=a.defaultFieldValue(this.type),s=n.readVarint32(),n.remaining()<s)throw Error(\\\"Illegal number of bytes for \\\"+this.toString(!0)+\\\": \\\"+s+\\\" required but got only \\\"+n.remaining());for((c=n.clone()).limit=c.offset+s,n.offset+=s;c.remaining()>0;)if(e=7&(h=c.readVarint32()),1==(l=h>>>3))u=this.keyElement.decode(c,e,l);else{if(2!==l)throw Error(\\\"Unexpected tag in map field key/value submessage\\\");r=this.element.decode(c,e,l)}return[u,r]}return this.element.decode(n,e,this.id)},I.Message.Field=l,(f=function(e,t,n,i,r,s,o){l.call(this,e,t,n,null,i,r,s,o),this.extension}).prototype=Object.create(l.prototype),I.Message.ExtensionField=f,p=function(e,t,n){T.call(this,e,t,n),this.fields=[]},I.Message.OneOf=p,(g=function(e,t,n,i,r){s.call(this,e,t,n,i,r),this.className=\\\"Enum\\\",this.object=null}).getName=function(e,t){var n,i,r=Object.keys(e);for(i=0;i<r.length;++i)if(e[n=r[i]]===t)return n;return null},(g.prototype=Object.create(s.prototype)).build=function(e){var n,i,r,s;if(this.object&&!e)return this.object;for(n=new t.Builder.Enum,r=0,s=(i=this.getChildren(g.Value)).length;s>r;++r)n[i[r].name]=i[r].id;return Object.defineProperty&&Object.defineProperty(n,\\\"$options\\\",{value:this.buildOpt(),enumerable:!1}),this.object=n},I.Enum=g,(_=function(e,t,n,i){T.call(this,e,t,n),this.className=\\\"Enum.Value\\\",this.id=i}).prototype=Object.create(T.prototype),I.Enum.Value=_,(y=function(e,t,n,i){T.call(this,e,t,n),this.field=i}).prototype=Object.create(T.prototype),I.Extension=y,((v=function(e,t,n,i){s.call(this,e,t,n,i),this.className=\\\"Service\\\",this.clazz=null}).prototype=Object.create(s.prototype)).build=function(e){return this.clazz&&!e?this.clazz:this.clazz=function(e,t){var i,r=function(t){e.Builder.Service.call(this),this.rpcImpl=t||function(e,t,n){setTimeout(n.bind(this,Error(\\\"Not implemented, see: https://github.com/dcodeIO/ProtoBuf.js/wiki/Services\\\")),0)}},s=r.prototype=Object.create(e.Builder.Service.prototype),o=t.getChildren(e.Reflect.Service.RPCMethod);for(i=0;i<o.length;i++)!function(e){s[e.name]=function(i,r){try{try{i=e.resolvedRequestType.clazz.decode(n.wrap(i))}catch(e){if(!(e instanceof TypeError))throw e}if(null===i||\\\"object\\\"!=typeof i)throw Error(\\\"Illegal arguments\\\");i instanceof e.resolvedRequestType.clazz||(i=new e.resolvedRequestType.clazz(i)),this.rpcImpl(e.fqn(),i,(function(n,i){if(!n){try{i=e.resolvedResponseType.clazz.decode(i)}catch(e){}return i&&i instanceof e.resolvedResponseType.clazz?void r(null,i):void r(Error(\\\"Illegal response type received in service method \\\"+t.name+\\\"#\\\"+e.name))}r(n)}))}catch(e){setTimeout(r.bind(this,e),0)}},r[e.name]=function(t,n,i){new r(t)[e.name](n,i)},Object.defineProperty&&(Object.defineProperty(r[e.name],\\\"$options\\\",{value:e.buildOpt()}),Object.defineProperty(s[e.name],\\\"$options\\\",{value:r[e.name].$options}))}(o[i]);return Object.defineProperty&&(Object.defineProperty(r,\\\"$options\\\",{value:t.buildOpt()}),Object.defineProperty(s,\\\"$options\\\",{value:r.$options}),Object.defineProperty(r,\\\"$type\\\",{value:t}),Object.defineProperty(s,\\\"$type\\\",{value:t})),r}(t,this)},I.Service=v,((E=function(e,t,n,i){T.call(this,e,t,n),this.className=\\\"Service.Method\\\",this.options=i||{}}).prototype=Object.create(T.prototype)).buildOpt=o.buildOpt,I.Service.Method=E,(m=function(e,t,n,i,r,s,o,a){E.call(this,e,t,n,a),this.className=\\\"Service.RPCMethod\\\",this.requestName=i,this.responseName=r,this.requestStream=s,this.responseStream=o,this.resolvedRequestType=null,this.resolvedResponseType=null}).prototype=Object.create(E.prototype),I.Service.RPCMethod=m,I}(r),r.Builder=function(e,t,n){function i(e){e.messages&&e.messages.forEach((function(t){t.syntax=e.syntax,i(t)})),e.enums&&e.enums.forEach((function(t){t.syntax=e.syntax}))}var r=function(e){this.ns=new n.Namespace(this,null,\\\"\\\"),this.ptr=this.ns,this.resolved=!1,this.result=null,this.files={},this.importRoot=null,this.options=e||{}},s=r.prototype;return r.isMessage=function(e){return\\\"string\\\"==typeof e.name&&void 0===e.values&&void 0===e.rpc},r.isMessageField=function(e){return\\\"string\\\"==typeof e.rule&&\\\"string\\\"==typeof e.name&&\\\"string\\\"==typeof e.type&&void 0!==e.id},r.isEnum=function(e){return\\\"string\\\"==typeof e.name&&!(void 0===e.values||!Array.isArray(e.values)||0===e.values.length)},r.isService=function(e){return!(\\\"string\\\"!=typeof e.name||\\\"object\\\"!=typeof e.rpc||!e.rpc)},r.isExtend=function(e){return\\\"string\\\"==typeof e.ref},s.reset=function(){return this.ptr=this.ns,this},s.define=function(e){if(\\\"string\\\"!=typeof e||!t.TYPEREF.test(e))throw Error(\\\"illegal namespace: \\\"+e);return e.split(\\\".\\\").forEach((function(e){var t=this.ptr.getChild(e);null===t&&this.ptr.addChild(t=new n.Namespace(this,this.ptr,e)),this.ptr=t}),this),this},s.create=function(t){var i,s,o,a,u;if(!t)return this;if(Array.isArray(t)){if(0===t.length)return this;t=t.slice()}else t=[t];for(i=[t];i.length>0;){if(t=i.pop(),!Array.isArray(t))throw Error(\\\"not a valid namespace: \\\"+JSON.stringify(t));for(;t.length>0;){if(s=t.shift(),r.isMessage(s)){if(o=new n.Message(this,this.ptr,s.name,s.options,s.isGroup,s.syntax),a={},s.oneofs&&Object.keys(s.oneofs).forEach((function(e){o.addChild(a[e]=new n.Message.OneOf(this,o,e))}),this),s.fields&&s.fields.forEach((function(e){if(null!==o.getChild(0|e.id))throw Error(\\\"duplicate or invalid field id in \\\"+o.name+\\\": \\\"+e.id);if(e.options&&\\\"object\\\"!=typeof e.options)throw Error(\\\"illegal field options in \\\"+o.name+\\\"#\\\"+e.name);var t=null;if(\\\"string\\\"==typeof e.oneof&&!(t=a[e.oneof]))throw Error(\\\"illegal oneof in \\\"+o.name+\\\"#\\\"+e.name+\\\": \\\"+e.oneof);e=new n.Message.Field(this,o,e.rule,e.keytype,e.type,e.name,e.id,e.options,t,s.syntax),t&&t.fields.push(e),o.addChild(e)}),this),u=[],s.enums&&s.enums.forEach((function(e){u.push(e)})),s.messages&&s.messages.forEach((function(e){u.push(e)})),s.services&&s.services.forEach((function(e){u.push(e)})),s.extensions&&(o.extensions=\\\"number\\\"==typeof s.extensions[0]?[s.extensions]:s.extensions),this.ptr.addChild(o),u.length>0){i.push(t),t=u,u=null,this.ptr=o,o=null;continue}u=null}else if(r.isEnum(s))o=new n.Enum(this,this.ptr,s.name,s.options,s.syntax),s.values.forEach((function(e){o.addChild(new n.Enum.Value(this,o,e.name,e.id))}),this),this.ptr.addChild(o);else if(r.isService(s))o=new n.Service(this,this.ptr,s.name,s.options),Object.keys(s.rpc).forEach((function(e){var t=s.rpc[e];o.addChild(new n.Service.RPCMethod(this,o,e,t.request,t.response,!!t.request_stream,!!t.response_stream,t.options))}),this),this.ptr.addChild(o);else{if(!r.isExtend(s))throw Error(\\\"not a valid definition: \\\"+JSON.stringify(s));if(o=this.ptr.resolve(s.ref,!0))s.fields.forEach((function(t){var i,r,s,a;if(null!==o.getChild(0|t.id))throw Error(\\\"duplicate extended field id in \\\"+o.name+\\\": \\\"+t.id);if(o.extensions&&(i=!1,o.extensions.forEach((function(e){t.id>=e[0]&&t.id<=e[1]&&(i=!0)})),!i))throw Error(\\\"illegal extended field id in \\\"+o.name+\\\": \\\"+t.id+\\\" (not within valid ranges)\\\");r=t.name,this.options.convertFieldsToCamelCase&&(r=e.Util.toCamelCase(r)),s=new n.Message.ExtensionField(this,o,t.rule,t.type,this.ptr.fqn()+\\\".\\\"+r,t.id,t.options),a=new n.Extension(this,this.ptr,t.name,s),s.extension=a,this.ptr.addChild(a),o.addChild(s)}),this);else if(!/\\\\.?google\\\\.protobuf\\\\./.test(s.ref))throw Error(\\\"extended message \\\"+s.ref+\\\" is not defined\\\")}s=null,o=null}t=null,this.ptr=this.ptr.parent}return this.resolved=!1,this.result=null,this},s.import=function(t,n){var r,s,o,a,u,c,h,l,d=\\\"/\\\";if(\\\"string\\\"==typeof n){if(e.Util.IS_NODE,!0===this.files[n])return this.reset();this.files[n]=!0}else if(\\\"object\\\"==typeof n){if(r=n.root,e.Util.IS_NODE,(r.indexOf(\\\"\\\\\\\\\\\")>=0||n.file.indexOf(\\\"\\\\\\\\\\\")>=0)&&(d=\\\"\\\\\\\\\\\"),s=r+d+n.file,!0===this.files[s])return this.reset();this.files[s]=!0}if(t.imports&&t.imports.length>0){for(a=!1,\\\"object\\\"==typeof n?(this.importRoot=n.root,a=!0,o=this.importRoot,n=n.file,(o.indexOf(\\\"\\\\\\\\\\\")>=0||n.indexOf(\\\"\\\\\\\\\\\")>=0)&&(d=\\\"\\\\\\\\\\\")):\\\"string\\\"==typeof n?this.importRoot?o=this.importRoot:n.indexOf(\\\"/\\\")>=0?\\\"\\\"===(o=n.replace(/\\\\/[^\\\\/]*$/,\\\"\\\"))&&(o=\\\"/\\\"):n.indexOf(\\\"\\\\\\\\\\\")>=0?(o=n.replace(/\\\\\\\\[^\\\\\\\\]*$/,\\\"\\\"),d=\\\"\\\\\\\\\\\"):o=\\\".\\\":o=null,u=0;u<t.imports.length;u++)if(\\\"string\\\"==typeof t.imports[u]){if(!o)throw Error(\\\"cannot determine import root\\\");if(\\\"google/protobuf/descriptor.proto\\\"===(c=t.imports[u]))continue;if(c=o+d+c,!0===this.files[c])continue;if(/\\\\.proto$/i.test(c)&&!e.DotProto&&(c=c.replace(/\\\\.proto$/,\\\".json\\\")),null===(h=e.Util.fetch(c)))throw Error(\\\"failed to import '\\\"+c+\\\"' in '\\\"+n+\\\"': file not found\\\");/\\\\.json$/i.test(c)?this.import(JSON.parse(h+\\\"\\\"),c):this.import(e.DotProto.Parser.parse(h),c)}else n?/\\\\.(\\\\w+)$/.test(n)?this.import(t.imports[u],n.replace(/^(.+)\\\\.(\\\\w+)$/,(function(e,t,n){return t+\\\"_import\\\"+u+\\\".\\\"+n}))):this.import(t.imports[u],n+\\\"_import\\\"+u):this.import(t.imports[u]);a&&(this.importRoot=null)}return t.package&&this.define(t.package),t.syntax&&i(t),l=this.ptr,t.options&&Object.keys(t.options).forEach((function(e){l.options[e]=t.options[e]})),t.messages&&(this.create(t.messages),this.ptr=l),t.enums&&(this.create(t.enums),this.ptr=l),t.services&&(this.create(t.services),this.ptr=l),t.extends&&this.create(t.extends),this.reset()},s.resolveAll=function(){var i;if(null==this.ptr||\\\"object\\\"==typeof this.ptr.type)return this;if(this.ptr instanceof n.Namespace)this.ptr.children.forEach((function(e){this.ptr=e,this.resolveAll()}),this);else if(this.ptr instanceof n.Message.Field){if(t.TYPE.test(this.ptr.type))this.ptr.type=e.TYPES[this.ptr.type];else{if(!t.TYPEREF.test(this.ptr.type))throw Error(\\\"illegal type reference in \\\"+this.ptr.toString(!0)+\\\": \\\"+this.ptr.type);if(!(i=(this.ptr instanceof n.Message.ExtensionField?this.ptr.extension.parent:this.ptr.parent).resolve(this.ptr.type,!0)))throw Error(\\\"unresolvable type reference in \\\"+this.ptr.toString(!0)+\\\": \\\"+this.ptr.type);if(this.ptr.resolvedType=i,i instanceof n.Enum){if(this.ptr.type=e.TYPES.enum,\\\"proto3\\\"===this.ptr.syntax&&\\\"proto3\\\"!==i.syntax)throw Error(\\\"proto3 message cannot reference proto2 enum\\\")}else{if(!(i instanceof n.Message))throw Error(\\\"illegal type reference in \\\"+this.ptr.toString(!0)+\\\": \\\"+this.ptr.type);this.ptr.type=i.isGroup?e.TYPES.group:e.TYPES.message}}if(this.ptr.map){if(!t.TYPE.test(this.ptr.keyType))throw Error(\\\"illegal key type for map field in \\\"+this.ptr.toString(!0)+\\\": \\\"+this.ptr.keyType);this.ptr.keyType=e.TYPES[this.ptr.keyType]}}else if(this.ptr instanceof e.Reflect.Service.Method){if(!(this.ptr instanceof e.Reflect.Service.RPCMethod))throw Error(\\\"illegal service type in \\\"+this.ptr.toString(!0));if(!((i=this.ptr.parent.resolve(this.ptr.requestName,!0))&&i instanceof e.Reflect.Message))throw Error(\\\"Illegal type reference in \\\"+this.ptr.toString(!0)+\\\": \\\"+this.ptr.requestName);if(this.ptr.resolvedRequestType=i,!((i=this.ptr.parent.resolve(this.ptr.responseName,!0))&&i instanceof e.Reflect.Message))throw Error(\\\"Illegal type reference in \\\"+this.ptr.toString(!0)+\\\": \\\"+this.ptr.responseName);this.ptr.resolvedResponseType=i}else if(!(this.ptr instanceof e.Reflect.Message.OneOf||this.ptr instanceof e.Reflect.Extension||this.ptr instanceof e.Reflect.Enum.Value))throw Error(\\\"illegal object in namespace: \\\"+typeof this.ptr+\\\": \\\"+this.ptr);return this.reset()},s.build=function(e){var t,n,i;if(this.reset(),this.resolved||(this.resolveAll(),this.resolved=!0,this.result=null),null===this.result&&(this.result=this.ns.build()),!e)return this.result;for(t=\\\"string\\\"==typeof e?e.split(\\\".\\\"):e,n=this.result,i=0;i<t.length;i++){if(!n[t[i]]){n=null;break}n=n[t[i]]}return n},s.lookup=function(e,t){return e?this.ns.resolve(e,t):this.ns},s.toString=function(){return\\\"Builder\\\"},r.Message=function(){},r.Enum=function(){},r.Service=function(){},r}(r,r.Lang,r.Reflect),r.Map=function(e,t){function n(e){var t=0;return{next:function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}}var i=function(e,n){var i,r,s,o;if(!e.map)throw Error(\\\"field is not a map\\\");if(this.field=e,this.keyElem=new t.Element(e.keyType,null,!0,e.syntax),this.valueElem=new t.Element(e.type,e.resolvedType,!1,e.syntax),this.map={},Object.defineProperty(this,\\\"size\\\",{get:function(){return Object.keys(this.map).length}}),n)for(i=Object.keys(n),r=0;r<i.length;r++)s=this.keyElem.valueFromString(i[r]),o=this.valueElem.verifyValue(n[i[r]]),this.map[this.keyElem.valueToString(s)]={key:s,value:o}},r=i.prototype;return r.clear=function(){this.map={}},r.delete=function(e){var t=this.keyElem.valueToString(this.keyElem.verifyValue(e)),n=t in this.map;return delete this.map[t],n},r.entries=function(){var e,t,i=[],r=Object.keys(this.map);for(t=0;t<r.length;t++)i.push([(e=this.map[r[t]]).key,e.value]);return n(i)},r.keys=function(){var e,t=[],i=Object.keys(this.map);for(e=0;e<i.length;e++)t.push(this.map[i[e]].key);return n(t)},r.values=function(){var e,t=[],i=Object.keys(this.map);for(e=0;e<i.length;e++)t.push(this.map[i[e]].value);return n(t)},r.forEach=function(e,t){var n,i,r=Object.keys(this.map);for(i=0;i<r.length;i++)e.call(t,(n=this.map[r[i]]).value,n.key,this)},r.set=function(e,t){var n=this.keyElem.verifyValue(e),i=this.valueElem.verifyValue(t);return this.map[this.keyElem.valueToString(n)]={key:n,value:i},this},r.get=function(e){var t=this.keyElem.valueToString(this.keyElem.verifyValue(e));return t in this.map?this.map[t].value:void 0},r.has=function(e){return this.keyElem.valueToString(this.keyElem.verifyValue(e))in this.map},i}(0,r.Reflect),r.loadProto=function(e,t,n){return(\\\"string\\\"==typeof t||t&&\\\"string\\\"==typeof t.file&&\\\"string\\\"==typeof t.root)&&(n=t,t=void 0),r.loadJson(r.DotProto.Parser.parse(e),t,n)},r.protoFromString=r.loadProto,r.loadProtoFile=function(e,t,n){if(t&&\\\"object\\\"==typeof t?(n=t,t=null):t&&\\\"function\\\"==typeof t||(t=null),t)return r.Util.fetch(\\\"string\\\"==typeof e?e:e.root+\\\"/\\\"+e.file,(function(i){if(null!==i)try{t(null,r.loadProto(i,n,e))}catch(e){t(e)}else t(Error(\\\"Failed to fetch file\\\"))}));var i=r.Util.fetch(\\\"object\\\"==typeof e?e.root+\\\"/\\\"+e.file:e);return null===i?null:r.loadProto(i,n,e)},r.protoFromFile=r.loadProtoFile,r.newBuilder=function(e){return void 0===(e=e||{}).convertFieldsToCamelCase&&(e.convertFieldsToCamelCase=r.convertFieldsToCamelCase),void 0===e.populateAccessors&&(e.populateAccessors=r.populateAccessors),new r.Builder(e)},r.loadJson=function(e,t,n){return(\\\"string\\\"==typeof t||t&&\\\"string\\\"==typeof t.file&&\\\"string\\\"==typeof t.root)&&(n=t,t=null),t&&\\\"object\\\"==typeof t||(t=r.newBuilder()),\\\"string\\\"==typeof e&&(e=JSON.parse(e)),t.import(e,n),t.resolveAll(),t},r.loadJsonFile=function(e,t,n){if(t&&\\\"object\\\"==typeof t?(n=t,t=null):t&&\\\"function\\\"==typeof t||(t=null),t)return r.Util.fetch(\\\"string\\\"==typeof e?e:e.root+\\\"/\\\"+e.file,(function(i){if(null!==i)try{t(null,r.loadJson(JSON.parse(i),n,e))}catch(e){t(e)}else t(Error(\\\"Failed to fetch file\\\"))}));var i=r.Util.fetch(\\\"object\\\"==typeof e?e.root+\\\"/\\\"+e.file:e);return null===i?null:r.loadJson(JSON.parse(i),n,e)},i=ui,r.loadProto(i,void 0,\\\"\\\").build(\\\"Modules\\\").probuf}(function(e){function t(e){var t=0;return function(){return t<e.length?e.charCodeAt(t++):null}}function n(){var e=[],t=[];return function(){return 0===arguments.length?t.join(\\\"\\\")+a.apply(String,e):(e.length+arguments.length>1024&&(t.push(a.apply(String,e)),e.length=0),void Array.prototype.push.apply(e,arguments))}}function i(e,t,n,i,r){var s,o,a=8*r-i-1,u=(1<<a)-1,c=u>>1,h=-7,l=n?r-1:0,d=n?-1:1,f=e[t+l];for(l+=d,s=f&(1<<-h)-1,f>>=-h,h+=a;h>0;s=256*s+e[t+l],l+=d,h-=8);for(o=s&(1<<-h)-1,s>>=-h,h+=i;h>0;o=256*o+e[t+l],l+=d,h-=8);if(0===s)s=1-c;else{if(s===u)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,i),s-=c}return(f?-1:1)*o*Math.pow(2,s-i)}function r(e,t,n,i,r,s){var o,a,u,c=8*s-r-1,h=(1<<c)-1,l=h>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:s-1,p=i?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||1/0===t?(a=isNaN(t)?1:0,o=h):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),(t+=o+l>=1?d/u:d*Math.pow(2,1-l))*u>=2&&(o++,u/=2),o+l>=h?(a=0,o=h):o+l>=1?(a=(t*u-1)*Math.pow(2,r),o+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,r),o=0));r>=8;e[n+f]=255&a,f+=p,a/=256,r-=8);for(o=o<<r|a,c+=r;c>0;e[n+f]=255&o,f+=p,o/=256,c-=8);e[n+f-p]|=128*g}var s,o,a,u,c,h=function(e,t,n){if(void 0===e&&(e=h.DEFAULT_CAPACITY),void 0===t&&(t=h.DEFAULT_ENDIAN),void 0===n&&(n=h.DEFAULT_NOASSERT),!n){if((e|=0)<0)throw RangeError(\\\"Illegal capacity\\\");t=!!t,n=!!n}this.buffer=0===e?o:new ArrayBuffer(e),this.view=0===e?null:new Uint8Array(this.buffer),this.offset=0,this.markedOffset=-1,this.limit=e,this.littleEndian=t,this.noAssert=n};return h.VERSION=\\\"5.0.1\\\",h.LITTLE_ENDIAN=!0,h.BIG_ENDIAN=!1,h.DEFAULT_CAPACITY=16,h.DEFAULT_ENDIAN=h.BIG_ENDIAN,h.DEFAULT_NOASSERT=!1,h.Long=e||null,(s=h.prototype).__isByteBuffer__,Object.defineProperty(s,\\\"__isByteBuffer__\\\",{value:!0,enumerable:!1,configurable:!1}),o=new ArrayBuffer(0),a=String.fromCharCode,h.accessor=function(){return Uint8Array},h.allocate=function(e,t,n){return new h(e,t,n)},h.concat=function(e,t,n,i){var r,s,o,a,u,c;for((\\\"boolean\\\"==typeof t||\\\"string\\\"!=typeof t)&&(i=n,n=t,t=void 0),r=0,o=0,a=e.length;a>o;++o)h.isByteBuffer(e[o])||(e[o]=h.wrap(e[o],t)),(s=e[o].limit-e[o].offset)>0&&(r+=s);if(0===r)return new h(0,n,i);for(c=new h(r,n,i),o=0;a>o;)(s=(u=e[o++]).limit-u.offset)<=0||(c.view.set(u.view.subarray(u.offset,u.limit),c.offset),c.offset+=s);return c.limit=c.offset,c.offset=0,c},h.isByteBuffer=function(e){return!0===(e&&e.__isByteBuffer__)},h.type=function(){return ArrayBuffer},h.wrap=function(e,t,n,i){var r,o;if(\\\"string\\\"!=typeof t&&(i=n,n=t,t=void 0),\\\"string\\\"==typeof e)switch(void 0===t&&(t=\\\"utf8\\\"),t){case\\\"base64\\\":return h.fromBase64(e,n);case\\\"hex\\\":return h.fromHex(e,n);case\\\"binary\\\":return h.fromBinary(e,n);case\\\"utf8\\\":return h.fromUTF8(e,n);case\\\"debug\\\":return h.fromDebug(e,n);default:throw Error(\\\"Unsupported encoding: \\\"+t)}if(null===e||\\\"object\\\"!=typeof e)throw TypeError(\\\"Illegal buffer\\\");if(h.isByteBuffer(e))return(r=s.clone.call(e)).markedOffset=-1,r;if(e instanceof Uint8Array)r=new h(0,n,i),e.length>0&&(r.buffer=e.buffer,r.offset=e.byteOffset,r.limit=e.byteOffset+e.byteLength,r.view=new Uint8Array(e.buffer));else if(e instanceof ArrayBuffer)r=new h(0,n,i),e.byteLength>0&&(r.buffer=e,r.offset=0,r.limit=e.byteLength,r.view=e.byteLength>0?new Uint8Array(e):null);else{if(\\\"[object Array]\\\"!==Object.prototype.toString.call(e))throw TypeError(\\\"Illegal buffer\\\");for((r=new h(e.length,n,i)).limit=e.length,o=0;o<e.length;++o)r.view[o]=e[o]}return r},s.writeBitSet=function(e,t){var n,i,r,s,o,a,u=void 0===t;if(u&&(t=this.offset),!this.noAssert){if(!(e instanceof Array))throw TypeError(\\\"Illegal BitSet: Not an array\\\");if(\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal offset: \\\"+t+\\\" (not an integer)\\\");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+t+\\\" (+0) <= \\\"+this.buffer.byteLength)}for(i=t,s=(r=e.length)>>3,o=0,t+=this.writeVarint32(r,t);s--;)n=1&!!e[o++]|(1&!!e[o++])<<1|(1&!!e[o++])<<2|(1&!!e[o++])<<3|(1&!!e[o++])<<4|(1&!!e[o++])<<5|(1&!!e[o++])<<6|(1&!!e[o++])<<7,this.writeByte(n,t++);if(r>o){for(a=0,n=0;r>o;)n|=(1&!!e[o++])<<a++;this.writeByte(n,t++)}return u?(this.offset=t,this):t-i},s.readBitSet=function(e){var t,n,i,r,s,o,a,u=void 0===e;for(u&&(e=this.offset),r=(i=(n=this.readVarint32(e)).value)>>3,s=0,o=[],e+=n.length;r--;)t=this.readByte(e++),o[s++]=!!(1&t),o[s++]=!!(2&t),o[s++]=!!(4&t),o[s++]=!!(8&t),o[s++]=!!(16&t),o[s++]=!!(32&t),o[s++]=!!(64&t),o[s++]=!!(128&t);if(i>s)for(a=0,t=this.readByte(e++);i>s;)o[s++]=!!(1&t>>a++);return u&&(this.offset=e),o},s.readBytes=function(e,t){var n,i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal offset: \\\"+t+\\\" (not an integer)\\\");if((t>>>=0)<0||t+e>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+t+\\\" (+\\\"+e+\\\") <= \\\"+this.buffer.byteLength)}return n=this.slice(t,t+e),i&&(this.offset+=e),n},s.writeBytes=s.append,s.writeInt8=function(e,t){var n,i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal value: \\\"+e+\\\" (not an integer)\\\");if(e|=0,\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal offset: \\\"+t+\\\" (not an integer)\\\");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+t+\\\" (+0) <= \\\"+this.buffer.byteLength)}return(t+=1)>(n=this.buffer.byteLength)&&this.resize((n*=2)>t?n:t),t-=1,this.view[t]=e,i&&(this.offset+=1),this},s.writeByte=s.writeInt8,s.readInt8=function(e){var t,n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal offset: \\\"+e+\\\" (not an integer)\\\");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+e+\\\" (+1) <= \\\"+this.buffer.byteLength)}return 128==(128&(t=this.view[e]))&&(t=-(255-t+1)),n&&(this.offset+=1),t},s.readByte=s.readInt8,s.writeUint8=function(e,t){var n,i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal value: \\\"+e+\\\" (not an integer)\\\");if(e>>>=0,\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal offset: \\\"+t+\\\" (not an integer)\\\");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+t+\\\" (+0) <= \\\"+this.buffer.byteLength)}return(t+=1)>(n=this.buffer.byteLength)&&this.resize((n*=2)>t?n:t),t-=1,this.view[t]=e,i&&(this.offset+=1),this},s.writeUInt8=s.writeUint8,s.readUint8=function(e){var t,n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal offset: \\\"+e+\\\" (not an integer)\\\");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+e+\\\" (+1) <= \\\"+this.buffer.byteLength)}return t=this.view[e],n&&(this.offset+=1),t},s.readUInt8=s.readUint8,s.writeInt16=function(e,t){var n,i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal value: \\\"+e+\\\" (not an integer)\\\");if(e|=0,\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal offset: \\\"+t+\\\" (not an integer)\\\");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+t+\\\" (+0) <= \\\"+this.buffer.byteLength)}return(t+=2)>(n=this.buffer.byteLength)&&this.resize((n*=2)>t?n:t),t-=2,this.littleEndian?(this.view[t+1]=(65280&e)>>>8,this.view[t]=255&e):(this.view[t]=(65280&e)>>>8,this.view[t+1]=255&e),i&&(this.offset+=2),this},s.writeShort=s.writeInt16,s.readInt16=function(e){var t,n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal offset: \\\"+e+\\\" (not an integer)\\\");if((e>>>=0)<0||e+2>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+e+\\\" (+2) <= \\\"+this.buffer.byteLength)}return t=0,this.littleEndian?(t=this.view[e],t|=this.view[e+1]<<8):(t=this.view[e]<<8,t|=this.view[e+1]),32768==(32768&t)&&(t=-(65535-t+1)),n&&(this.offset+=2),t},s.readShort=s.readInt16,s.writeUint16=function(e,t){var n,i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal value: \\\"+e+\\\" (not an integer)\\\");if(e>>>=0,\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal offset: \\\"+t+\\\" (not an integer)\\\");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+t+\\\" (+0) <= \\\"+this.buffer.byteLength)}return(t+=2)>(n=this.buffer.byteLength)&&this.resize((n*=2)>t?n:t),t-=2,this.littleEndian?(this.view[t+1]=(65280&e)>>>8,this.view[t]=255&e):(this.view[t]=(65280&e)>>>8,this.view[t+1]=255&e),i&&(this.offset+=2),this},s.writeUInt16=s.writeUint16,s.readUint16=function(e){var t,n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal offset: \\\"+e+\\\" (not an integer)\\\");if((e>>>=0)<0||e+2>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+e+\\\" (+2) <= \\\"+this.buffer.byteLength)}return t=0,this.littleEndian?(t=this.view[e],t|=this.view[e+1]<<8):(t=this.view[e]<<8,t|=this.view[e+1]),n&&(this.offset+=2),t},s.readUInt16=s.readUint16,s.writeInt32=function(e,t){var n,i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal value: \\\"+e+\\\" (not an integer)\\\");if(e|=0,\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal offset: \\\"+t+\\\" (not an integer)\\\");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+t+\\\" (+0) <= \\\"+this.buffer.byteLength)}return(t+=4)>(n=this.buffer.byteLength)&&this.resize((n*=2)>t?n:t),t-=4,this.littleEndian?(this.view[t+3]=255&e>>>24,this.view[t+2]=255&e>>>16,this.view[t+1]=255&e>>>8,this.view[t]=255&e):(this.view[t]=255&e>>>24,this.view[t+1]=255&e>>>16,this.view[t+2]=255&e>>>8,this.view[t+3]=255&e),i&&(this.offset+=4),this},s.writeInt=s.writeInt32,s.readInt32=function(e){var t,n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal offset: \\\"+e+\\\" (not an integer)\\\");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+e+\\\" (+4) <= \\\"+this.buffer.byteLength)}return t=0,this.littleEndian?(t=this.view[e+2]<<16,t|=this.view[e+1]<<8,t|=this.view[e],t+=this.view[e+3]<<24>>>0):(t=this.view[e+1]<<16,t|=this.view[e+2]<<8,t|=this.view[e+3],t+=this.view[e]<<24>>>0),t|=0,n&&(this.offset+=4),t},s.readInt=s.readInt32,s.writeUint32=function(e,t){var n,i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal value: \\\"+e+\\\" (not an integer)\\\");if(e>>>=0,\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal offset: \\\"+t+\\\" (not an integer)\\\");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+t+\\\" (+0) <= \\\"+this.buffer.byteLength)}return(t+=4)>(n=this.buffer.byteLength)&&this.resize((n*=2)>t?n:t),t-=4,this.littleEndian?(this.view[t+3]=255&e>>>24,this.view[t+2]=255&e>>>16,this.view[t+1]=255&e>>>8,this.view[t]=255&e):(this.view[t]=255&e>>>24,this.view[t+1]=255&e>>>16,this.view[t+2]=255&e>>>8,this.view[t+3]=255&e),i&&(this.offset+=4),this},s.writeUInt32=s.writeUint32,s.readUint32=function(e){var t,n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal offset: \\\"+e+\\\" (not an integer)\\\");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+e+\\\" (+4) <= \\\"+this.buffer.byteLength)}return t=0,this.littleEndian?(t=this.view[e+2]<<16,t|=this.view[e+1]<<8,t|=this.view[e],t+=this.view[e+3]<<24>>>0):(t=this.view[e+1]<<16,t|=this.view[e+2]<<8,t|=this.view[e+3],t+=this.view[e]<<24>>>0),n&&(this.offset+=4),t},s.readUInt32=s.readUint32,e&&(s.writeInt64=function(t,n){var i,r,s,o=void 0===n;if(o&&(n=this.offset),!this.noAssert){if(\\\"number\\\"==typeof t)t=e.fromNumber(t);else if(\\\"string\\\"==typeof t)t=e.fromString(t);else if(!(t&&t instanceof e))throw TypeError(\\\"Illegal value: \\\"+t+\\\" (not an integer or Long)\\\");if(\\\"number\\\"!=typeof n||n%1!=0)throw TypeError(\\\"Illegal offset: \\\"+n+\\\" (not an integer)\\\");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+n+\\\" (+0) <= \\\"+this.buffer.byteLength)}return\\\"number\\\"==typeof t?t=e.fromNumber(t):\\\"string\\\"==typeof t&&(t=e.fromString(t)),(n+=8)>(i=this.buffer.byteLength)&&this.resize((i*=2)>n?i:n),n-=8,r=t.low,s=t.high,this.littleEndian?(this.view[n+3]=255&r>>>24,this.view[n+2]=255&r>>>16,this.view[n+1]=255&r>>>8,this.view[n]=255&r,n+=4,this.view[n+3]=255&s>>>24,this.view[n+2]=255&s>>>16,this.view[n+1]=255&s>>>8,this.view[n]=255&s):(this.view[n]=255&s>>>24,this.view[n+1]=255&s>>>16,this.view[n+2]=255&s>>>8,this.view[n+3]=255&s,n+=4,this.view[n]=255&r>>>24,this.view[n+1]=255&r>>>16,this.view[n+2]=255&r>>>8,this.view[n+3]=255&r),o&&(this.offset+=8),this},s.writeLong=s.writeInt64,s.readInt64=function(t){var n,i,r,s=void 0===t;if(s&&(t=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal offset: \\\"+t+\\\" (not an integer)\\\");if((t>>>=0)<0||t+8>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+t+\\\" (+8) <= \\\"+this.buffer.byteLength)}return n=0,i=0,this.littleEndian?(n=this.view[t+2]<<16,n|=this.view[t+1]<<8,n|=this.view[t],n+=this.view[t+3]<<24>>>0,t+=4,i=this.view[t+2]<<16,i|=this.view[t+1]<<8,i|=this.view[t],i+=this.view[t+3]<<24>>>0):(i=this.view[t+1]<<16,i|=this.view[t+2]<<8,i|=this.view[t+3],i+=this.view[t]<<24>>>0,t+=4,n=this.view[t+1]<<16,n|=this.view[t+2]<<8,n|=this.view[t+3],n+=this.view[t]<<24>>>0),r=new e(n,i,!1),s&&(this.offset+=8),r},s.readLong=s.readInt64,s.writeUint64=function(t,n){var i,r,s,o=void 0===n;if(o&&(n=this.offset),!this.noAssert){if(\\\"number\\\"==typeof t)t=e.fromNumber(t);else if(\\\"string\\\"==typeof t)t=e.fromString(t);else if(!(t&&t instanceof e))throw TypeError(\\\"Illegal value: \\\"+t+\\\" (not an integer or Long)\\\");if(\\\"number\\\"!=typeof n||n%1!=0)throw TypeError(\\\"Illegal offset: \\\"+n+\\\" (not an integer)\\\");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+n+\\\" (+0) <= \\\"+this.buffer.byteLength)}return\\\"number\\\"==typeof t?t=e.fromNumber(t):\\\"string\\\"==typeof t&&(t=e.fromString(t)),(n+=8)>(i=this.buffer.byteLength)&&this.resize((i*=2)>n?i:n),n-=8,r=t.low,s=t.high,this.littleEndian?(this.view[n+3]=255&r>>>24,this.view[n+2]=255&r>>>16,this.view[n+1]=255&r>>>8,this.view[n]=255&r,n+=4,this.view[n+3]=255&s>>>24,this.view[n+2]=255&s>>>16,this.view[n+1]=255&s>>>8,this.view[n]=255&s):(this.view[n]=255&s>>>24,this.view[n+1]=255&s>>>16,this.view[n+2]=255&s>>>8,this.view[n+3]=255&s,n+=4,this.view[n]=255&r>>>24,this.view[n+1]=255&r>>>16,this.view[n+2]=255&r>>>8,this.view[n+3]=255&r),o&&(this.offset+=8),this},s.writeUInt64=s.writeUint64,s.readUint64=function(t){var n,i,r,s=void 0===t;if(s&&(t=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal offset: \\\"+t+\\\" (not an integer)\\\");if((t>>>=0)<0||t+8>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+t+\\\" (+8) <= \\\"+this.buffer.byteLength)}return n=0,i=0,this.littleEndian?(n=this.view[t+2]<<16,n|=this.view[t+1]<<8,n|=this.view[t],n+=this.view[t+3]<<24>>>0,t+=4,i=this.view[t+2]<<16,i|=this.view[t+1]<<8,i|=this.view[t],i+=this.view[t+3]<<24>>>0):(i=this.view[t+1]<<16,i|=this.view[t+2]<<8,i|=this.view[t+3],i+=this.view[t]<<24>>>0,t+=4,n=this.view[t+1]<<16,n|=this.view[t+2]<<8,n|=this.view[t+3],n+=this.view[t]<<24>>>0),r=new e(n,i,!0),s&&(this.offset+=8),r},s.readUInt64=s.readUint64),s.writeFloat32=function(e,t){var n,i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e)throw TypeError(\\\"Illegal value: \\\"+e+\\\" (not a number)\\\");if(\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal offset: \\\"+t+\\\" (not an integer)\\\");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+t+\\\" (+0) <= \\\"+this.buffer.byteLength)}return(t+=4)>(n=this.buffer.byteLength)&&this.resize((n*=2)>t?n:t),t-=4,r(this.view,e,t,this.littleEndian,23,4),i&&(this.offset+=4),this},s.writeFloat=s.writeFloat32,s.readFloat32=function(e){var t,n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal offset: \\\"+e+\\\" (not an integer)\\\");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+e+\\\" (+4) <= \\\"+this.buffer.byteLength)}return t=i(this.view,e,this.littleEndian,23,4),n&&(this.offset+=4),t},s.readFloat=s.readFloat32,s.writeFloat64=function(e,t){var n,i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e)throw TypeError(\\\"Illegal value: \\\"+e+\\\" (not a number)\\\");if(\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal offset: \\\"+t+\\\" (not an integer)\\\");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+t+\\\" (+0) <= \\\"+this.buffer.byteLength)}return(t+=8)>(n=this.buffer.byteLength)&&this.resize((n*=2)>t?n:t),t-=8,r(this.view,e,t,this.littleEndian,52,8),i&&(this.offset+=8),this},s.writeDouble=s.writeFloat64,s.readFloat64=function(e){var t,n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal offset: \\\"+e+\\\" (not an integer)\\\");if((e>>>=0)<0||e+8>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+e+\\\" (+8) <= \\\"+this.buffer.byteLength)}return t=i(this.view,e,this.littleEndian,52,8),n&&(this.offset+=8),t},s.readDouble=s.readFloat64,h.MAX_VARINT32_BYTES=5,h.calculateVarint32=function(e){return(e>>>=0)<128?1:e<16384?2:1<<21>e?3:1<<28>e?4:5},h.zigZagEncode32=function(e){return((e|=0)<<1^e>>31)>>>0},h.zigZagDecode32=function(e){return 0|e>>>1^-(1&e)},s.writeVarint32=function(e,t){var n,i,r,s=void 0===t;if(s&&(t=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal value: \\\"+e+\\\" (not an integer)\\\");if(e|=0,\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal offset: \\\"+t+\\\" (not an integer)\\\");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+t+\\\" (+0) <= \\\"+this.buffer.byteLength)}for((t+=i=h.calculateVarint32(e))>(r=this.buffer.byteLength)&&this.resize((r*=2)>t?r:t),t-=i,e>>>=0;e>=128;)n=128|127&e,this.view[t++]=n,e>>>=7;return this.view[t++]=e,s?(this.offset=t,this):i},s.writeVarint32ZigZag=function(e,t){return this.writeVarint32(h.zigZagEncode32(e),t)},s.readVarint32=function(e){var t,n,i,r,s=void 0===e;if(s&&(e=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal offset: \\\"+e+\\\" (not an integer)\\\");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+e+\\\" (+1) <= \\\"+this.buffer.byteLength)}n=0,i=0;do{if(!this.noAssert&&e>this.limit)throw(r=Error(\\\"Truncated\\\")).truncated=!0,r;t=this.view[e++],n<5&&(i|=(127&t)<<7*n),++n}while(0!=(128&t));return i|=0,s?(this.offset=e,i):{value:i,length:n}},s.readVarint32ZigZag=function(e){var t=this.readVarint32(e);return\\\"object\\\"==typeof t?t.value=h.zigZagDecode32(t.value):t=h.zigZagDecode32(t),t},e&&(h.MAX_VARINT64_BYTES=10,h.calculateVarint64=function(t){\\\"number\\\"==typeof t?t=e.fromNumber(t):\\\"string\\\"==typeof t&&(t=e.fromString(t));var n=t.toInt()>>>0,i=t.shiftRightUnsigned(28).toInt()>>>0,r=t.shiftRightUnsigned(56).toInt()>>>0;return 0==r?0==i?n<16384?n<128?1:2:1<<21>n?3:4:i<16384?i<128?5:6:1<<21>i?7:8:r<128?9:10},h.zigZagEncode64=function(t){return\\\"number\\\"==typeof t?t=e.fromNumber(t,!1):\\\"string\\\"==typeof t?t=e.fromString(t,!1):!1!==t.unsigned&&(t=t.toSigned()),t.shiftLeft(1).xor(t.shiftRight(63)).toUnsigned()},h.zigZagDecode64=function(t){return\\\"number\\\"==typeof t?t=e.fromNumber(t,!1):\\\"string\\\"==typeof t?t=e.fromString(t,!1):!1!==t.unsigned&&(t=t.toSigned()),t.shiftRightUnsigned(1).xor(t.and(e.ONE).toSigned().negate()).toSigned()},s.writeVarint64=function(t,n){var i,r,s,o,a,u=void 0===n;if(u&&(n=this.offset),!this.noAssert){if(\\\"number\\\"==typeof t)t=e.fromNumber(t);else if(\\\"string\\\"==typeof t)t=e.fromString(t);else if(!(t&&t instanceof e))throw TypeError(\\\"Illegal value: \\\"+t+\\\" (not an integer or Long)\\\");if(\\\"number\\\"!=typeof n||n%1!=0)throw TypeError(\\\"Illegal offset: \\\"+n+\\\" (not an integer)\\\");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+n+\\\" (+0) <= \\\"+this.buffer.byteLength)}switch(\\\"number\\\"==typeof t?t=e.fromNumber(t,!1):\\\"string\\\"==typeof t?t=e.fromString(t,!1):!1!==t.unsigned&&(t=t.toSigned()),i=h.calculateVarint64(t),r=t.toInt()>>>0,s=t.shiftRightUnsigned(28).toInt()>>>0,o=t.shiftRightUnsigned(56).toInt()>>>0,(n+=i)>(a=this.buffer.byteLength)&&this.resize((a*=2)>n?a:n),n-=i,i){case 10:this.view[n+9]=1&o>>>7;case 9:this.view[n+8]=9!==i?128|o:127&o;case 8:this.view[n+7]=8!==i?128|s>>>21:127&s>>>21;case 7:this.view[n+6]=7!==i?128|s>>>14:127&s>>>14;case 6:this.view[n+5]=6!==i?128|s>>>7:127&s>>>7;case 5:this.view[n+4]=5!==i?128|s:127&s;case 4:this.view[n+3]=4!==i?128|r>>>21:127&r>>>21;case 3:this.view[n+2]=3!==i?128|r>>>14:127&r>>>14;case 2:this.view[n+1]=2!==i?128|r>>>7:127&r>>>7;case 1:this.view[n]=1!==i?128|r:127&r}return u?(this.offset+=i,this):i},s.writeVarint64ZigZag=function(e,t){return this.writeVarint64(h.zigZagEncode64(e),t)},s.readVarint64=function(t){var n,i,r,s,o,a,u=void 0===t;if(u&&(t=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal offset: \\\"+t+\\\" (not an integer)\\\");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+t+\\\" (+1) <= \\\"+this.buffer.byteLength)}if(n=t,i=0,r=0,s=0,o=0,i=127&(o=this.view[t++]),128&o&&(i|=(127&(o=this.view[t++]))<<7,(128&o||this.noAssert&&void 0===o)&&(i|=(127&(o=this.view[t++]))<<14,(128&o||this.noAssert&&void 0===o)&&(i|=(127&(o=this.view[t++]))<<21,(128&o||this.noAssert&&void 0===o)&&(r=127&(o=this.view[t++]),(128&o||this.noAssert&&void 0===o)&&(r|=(127&(o=this.view[t++]))<<7,(128&o||this.noAssert&&void 0===o)&&(r|=(127&(o=this.view[t++]))<<14,(128&o||this.noAssert&&void 0===o)&&(r|=(127&(o=this.view[t++]))<<21,(128&o||this.noAssert&&void 0===o)&&(s=127&(o=this.view[t++]),(128&o||this.noAssert&&void 0===o)&&(s|=(127&(o=this.view[t++]))<<7,128&o||this.noAssert&&void 0===o))))))))))throw Error(\\\"Buffer overrun\\\");return a=e.fromBits(i|r<<28,r>>>4|s<<24,!1),u?(this.offset=t,a):{value:a,length:t-n}},s.readVarint64ZigZag=function(t){var n=this.readVarint64(t);return n&&n.value instanceof e?n.value=h.zigZagDecode64(n.value):n=h.zigZagDecode64(n),n}),s.writeCString=function(e,n){var i,r,s,o=void 0===n;if(o&&(n=this.offset),r=e.length,!this.noAssert){if(\\\"string\\\"!=typeof e)throw TypeError(\\\"Illegal str: Not a string\\\");for(i=0;r>i;++i)if(0===e.charCodeAt(i))throw RangeError(\\\"Illegal str: Contains NULL-characters\\\");if(\\\"number\\\"!=typeof n||n%1!=0)throw TypeError(\\\"Illegal offset: \\\"+n+\\\" (not an integer)\\\");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+n+\\\" (+0) <= \\\"+this.buffer.byteLength)}return r=c.calculateUTF16asUTF8(t(e))[1],n+=r+1,s=this.buffer.byteLength,n>s&&this.resize((s*=2)>n?s:n),n-=r+1,c.encodeUTF16toUTF8(t(e),function(e){this.view[n++]=e}.bind(this)),this.view[n++]=0,o?(this.offset=n,this):r},s.readCString=function(e){var t,i,r,s=void 0===e;if(s&&(e=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal offset: \\\"+e+\\\" (not an integer)\\\");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+e+\\\" (+1) <= \\\"+this.buffer.byteLength)}return t=e,r=-1,c.decodeUTF8toUTF16(function(){if(0===r)return null;if(e>=this.limit)throw RangeError(\\\"Illegal range: Truncated data, \\\"+e+\\\" < \\\"+this.limit);return 0===(r=this.view[e++])?null:r}.bind(this),i=n(),!0),s?(this.offset=e,i()):{string:i(),length:e-t}},s.writeIString=function(e,n){var i,r,s,o=void 0===n;if(o&&(n=this.offset),!this.noAssert){if(\\\"string\\\"!=typeof e)throw TypeError(\\\"Illegal str: Not a string\\\");if(\\\"number\\\"!=typeof n||n%1!=0)throw TypeError(\\\"Illegal offset: \\\"+n+\\\" (not an integer)\\\");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+n+\\\" (+0) <= \\\"+this.buffer.byteLength)}if(r=n,i=c.calculateUTF16asUTF8(t(e),this.noAssert)[1],n+=4+i,s=this.buffer.byteLength,n>s&&this.resize((s*=2)>n?s:n),n-=4+i,this.littleEndian?(this.view[n+3]=255&i>>>24,this.view[n+2]=255&i>>>16,this.view[n+1]=255&i>>>8,this.view[n]=255&i):(this.view[n]=255&i>>>24,this.view[n+1]=255&i>>>16,this.view[n+2]=255&i>>>8,this.view[n+3]=255&i),n+=4,c.encodeUTF16toUTF8(t(e),function(e){this.view[n++]=e}.bind(this)),n!==r+4+i)throw RangeError(\\\"Illegal range: Truncated data, \\\"+n+\\\" == \\\"+(n+4+i));return o?(this.offset=n,this):n-r},s.readIString=function(e){var t,n,i,r=void 0===e;if(r&&(e=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal offset: \\\"+e+\\\" (not an integer)\\\");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+e+\\\" (+4) <= \\\"+this.buffer.byteLength)}return t=e,n=this.readUint32(e),i=this.readUTF8String(n,h.METRICS_BYTES,e+=4),e+=i.length,r?(this.offset=e,i.string):{string:i.string,length:e-t}},h.METRICS_CHARS=\\\"c\\\",h.METRICS_BYTES=\\\"b\\\",s.writeUTF8String=function(e,n){var i,r,s,o=void 0===n;if(o&&(n=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof n||n%1!=0)throw TypeError(\\\"Illegal offset: \\\"+n+\\\" (not an integer)\\\");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+n+\\\" (+0) <= \\\"+this.buffer.byteLength)}return r=n,i=c.calculateUTF16asUTF8(t(e))[1],n+=i,s=this.buffer.byteLength,n>s&&this.resize((s*=2)>n?s:n),n-=i,c.encodeUTF16toUTF8(t(e),function(e){this.view[n++]=e}.bind(this)),o?(this.offset=n,this):n-r},s.writeString=s.writeUTF8String,h.calculateUTF8Chars=function(e){return c.calculateUTF16asUTF8(t(e))[0]},h.calculateUTF8Bytes=function(e){return c.calculateUTF16asUTF8(t(e))[1]},h.calculateString=h.calculateUTF8Bytes,s.readUTF8String=function(e,t,i){var r,s,o,a,u;if(\\\"number\\\"==typeof t&&(i=t,t=void 0),(r=void 0===i)&&(i=this.offset),void 0===t&&(t=h.METRICS_CHARS),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal length: \\\"+e+\\\" (not an integer)\\\");if(e|=0,\\\"number\\\"!=typeof i||i%1!=0)throw TypeError(\\\"Illegal offset: \\\"+i+\\\" (not an integer)\\\");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+i+\\\" (+0) <= \\\"+this.buffer.byteLength)}if(o=0,a=i,t===h.METRICS_CHARS){if(s=n(),c.decodeUTF8(function(){return e>o&&i<this.limit?this.view[i++]:null}.bind(this),(function(e){++o,c.UTF8toUTF16(e,s)})),o!==e)throw RangeError(\\\"Illegal range: Truncated data, \\\"+o+\\\" == \\\"+e);return r?(this.offset=i,s()):{string:s(),length:i-a}}if(t===h.METRICS_BYTES){if(!this.noAssert){if(\\\"number\\\"!=typeof i||i%1!=0)throw TypeError(\\\"Illegal offset: \\\"+i+\\\" (not an integer)\\\");if((i>>>=0)<0||i+e>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+i+\\\" (+\\\"+e+\\\") <= \\\"+this.buffer.byteLength)}if(u=i+e,c.decodeUTF8toUTF16(function(){return u>i?this.view[i++]:null}.bind(this),s=n(),this.noAssert),i!==u)throw RangeError(\\\"Illegal range: Truncated data, \\\"+i+\\\" == \\\"+u);return r?(this.offset=i,s()):{string:s(),length:i-a}}throw TypeError(\\\"Unsupported metrics: \\\"+t)},s.readString=s.readUTF8String,s.writeVString=function(e,n){var i,r,s,o,a=void 0===n;if(a&&(n=this.offset),!this.noAssert){if(\\\"string\\\"!=typeof e)throw TypeError(\\\"Illegal str: Not a string\\\");if(\\\"number\\\"!=typeof n||n%1!=0)throw TypeError(\\\"Illegal offset: \\\"+n+\\\" (not an integer)\\\");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+n+\\\" (+0) <= \\\"+this.buffer.byteLength)}if(s=n,i=c.calculateUTF16asUTF8(t(e),this.noAssert)[1],r=h.calculateVarint32(i),n+=r+i,o=this.buffer.byteLength,n>o&&this.resize((o*=2)>n?o:n),n-=r+i,n+=this.writeVarint32(i,n),c.encodeUTF16toUTF8(t(e),function(e){this.view[n++]=e}.bind(this)),n!==s+i+r)throw RangeError(\\\"Illegal range: Truncated data, \\\"+n+\\\" == \\\"+(n+i+r));return a?(this.offset=n,this):n-s},s.readVString=function(e){var t,n,i,r=void 0===e;if(r&&(e=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal offset: \\\"+e+\\\" (not an integer)\\\");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+e+\\\" (+1) <= \\\"+this.buffer.byteLength)}return t=e,n=this.readVarint32(e),i=this.readUTF8String(n.value,h.METRICS_BYTES,e+=n.length),e+=i.length,r?(this.offset=e,i.string):{string:i.string,length:e-t}},s.append=function(e,t,n){var i,r,s;if((\\\"number\\\"==typeof t||\\\"string\\\"!=typeof t)&&(n=t,t=void 0),(i=void 0===n)&&(n=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof n||n%1!=0)throw TypeError(\\\"Illegal offset: \\\"+n+\\\" (not an integer)\\\");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+n+\\\" (+0) <= \\\"+this.buffer.byteLength)}return e instanceof h||(e=h.wrap(e,t)),(r=e.limit-e.offset)<=0||((n+=r)>(s=this.buffer.byteLength)&&this.resize((s*=2)>n?s:n),n-=r,this.view.set(e.view.subarray(e.offset,e.limit),n),e.offset+=r,i&&(this.offset+=r)),this},s.appendTo=function(e,t){return e.append(this,t),this},s.assert=function(e){return this.noAssert=!e,this},s.capacity=function(){return this.buffer.byteLength},s.clear=function(){return this.offset=0,this.limit=this.buffer.byteLength,this.markedOffset=-1,this},s.clone=function(e){var t=new h(0,this.littleEndian,this.noAssert);return e?(t.buffer=new ArrayBuffer(this.buffer.byteLength),t.view=new Uint8Array(t.buffer)):(t.buffer=this.buffer,t.view=this.view),t.offset=this.offset,t.markedOffset=this.markedOffset,t.limit=this.limit,t},s.compact=function(e,t){var n,i,r;if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal begin: Not an integer\\\");if(e>>>=0,\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal end: Not an integer\\\");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError(\\\"Illegal range: 0 <= \\\"+e+\\\" <= \\\"+t+\\\" <= \\\"+this.buffer.byteLength)}return 0===e&&t===this.buffer.byteLength?this:0==(n=t-e)?(this.buffer=o,this.view=null,this.markedOffset>=0&&(this.markedOffset-=e),this.offset=0,this.limit=0,this):(i=new ArrayBuffer(n),(r=new Uint8Array(i)).set(this.view.subarray(e,t)),this.buffer=i,this.view=r,this.markedOffset>=0&&(this.markedOffset-=e),this.offset=0,this.limit=n,this)},s.copy=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal begin: Not an integer\\\");if(e>>>=0,\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal end: Not an integer\\\");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError(\\\"Illegal range: 0 <= \\\"+e+\\\" <= \\\"+t+\\\" <= \\\"+this.buffer.byteLength)}if(e===t)return new h(0,this.littleEndian,this.noAssert);var n=t-e,i=new h(n,this.littleEndian,this.noAssert);return i.offset=0,i.limit=n,i.markedOffset>=0&&(i.markedOffset-=e),this.copyTo(i,0,e,t),i},s.copyTo=function(e,t,n,i){var r,s,o;if(!this.noAssert&&!h.isByteBuffer(e))throw TypeError(\\\"Illegal target: Not a ByteBuffer\\\");if(t=(s=void 0===t)?e.offset:0|t,n=(r=void 0===n)?this.offset:0|n,i=void 0===i?this.limit:0|i,t<0||t>e.buffer.byteLength)throw RangeError(\\\"Illegal target range: 0 <= \\\"+t+\\\" <= \\\"+e.buffer.byteLength);if(n<0||i>this.buffer.byteLength)throw RangeError(\\\"Illegal source range: 0 <= \\\"+n+\\\" <= \\\"+this.buffer.byteLength);return 0==(o=i-n)?e:(e.ensureCapacity(t+o),e.view.set(this.view.subarray(n,i),t),r&&(this.offset+=o),s&&(e.offset+=o),this)},s.ensureCapacity=function(e){var t=this.buffer.byteLength;return e>t?this.resize((t*=2)>e?t:e):this},s.fill=function(e,t,n){var i=void 0===t;if(i&&(t=this.offset),\\\"string\\\"==typeof e&&e.length>0&&(e=e.charCodeAt(0)),void 0===t&&(t=this.offset),void 0===n&&(n=this.limit),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal value: \\\"+e+\\\" (not an integer)\\\");if(e|=0,\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal begin: Not an integer\\\");if(t>>>=0,\\\"number\\\"!=typeof n||n%1!=0)throw TypeError(\\\"Illegal end: Not an integer\\\");if(n>>>=0,t<0||t>n||n>this.buffer.byteLength)throw RangeError(\\\"Illegal range: 0 <= \\\"+t+\\\" <= \\\"+n+\\\" <= \\\"+this.buffer.byteLength)}if(t>=n)return this;for(;n>t;)this.view[t++]=e;return i&&(this.offset=t),this},s.flip=function(){return this.limit=this.offset,this.offset=0,this},s.mark=function(e){if(e=void 0===e?this.offset:e,!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal offset: \\\"+e+\\\" (not an integer)\\\");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+e+\\\" (+0) <= \\\"+this.buffer.byteLength)}return this.markedOffset=e,this},s.order=function(e){if(!this.noAssert&&\\\"boolean\\\"!=typeof e)throw TypeError(\\\"Illegal littleEndian: Not a boolean\\\");return this.littleEndian=!!e,this},s.LE=function(e){return this.littleEndian=void 0===e||!!e,this},s.BE=function(e){return this.littleEndian=void 0!==e&&!e,this},s.prepend=function(e,t,n){var i,r,s,o,a;if((\\\"number\\\"==typeof t||\\\"string\\\"!=typeof t)&&(n=t,t=void 0),(i=void 0===n)&&(n=this.offset),!this.noAssert){if(\\\"number\\\"!=typeof n||n%1!=0)throw TypeError(\\\"Illegal offset: \\\"+n+\\\" (not an integer)\\\");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError(\\\"Illegal offset: 0 <= \\\"+n+\\\" (+0) <= \\\"+this.buffer.byteLength)}return e instanceof h||(e=h.wrap(e,t)),(r=e.limit-e.offset)<=0||((s=r-n)>0?(o=new ArrayBuffer(this.buffer.byteLength+s),(a=new Uint8Array(o)).set(this.view.subarray(n,this.buffer.byteLength),r),this.buffer=o,this.view=a,this.offset+=s,this.markedOffset>=0&&(this.markedOffset+=s),this.limit+=s,n+=s):new Uint8Array(this.buffer),this.view.set(e.view.subarray(e.offset,e.limit),n-r),e.offset=e.limit,i&&(this.offset-=r)),this},s.prependTo=function(e,t){return e.prepend(this,t),this},s.printDebug=function(e){\\\"function\\\"!=typeof e&&(e=console.log.bind(console)),e(this.toString()+\\\"\\\\n-------------------------------------------------------------------\\\\n\\\"+this.toDebug(!0))},s.remaining=function(){return this.limit-this.offset},s.reset=function(){return this.markedOffset>=0?(this.offset=this.markedOffset,this.markedOffset=-1):this.offset=0,this},s.resize=function(e){var t,n;if(!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal capacity: \\\"+e+\\\" (not an integer)\\\");if((e|=0)<0)throw RangeError(\\\"Illegal capacity: 0 <= \\\"+e)}return this.buffer.byteLength<e&&(t=new ArrayBuffer(e),(n=new Uint8Array(t)).set(this.view),this.buffer=t,this.view=n),this},s.reverse=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal begin: Not an integer\\\");if(e>>>=0,\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal end: Not an integer\\\");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError(\\\"Illegal range: 0 <= \\\"+e+\\\" <= \\\"+t+\\\" <= \\\"+this.buffer.byteLength)}return e===t||Array.prototype.reverse.call(this.view.subarray(e,t)),this},s.skip=function(e){if(!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal length: \\\"+e+\\\" (not an integer)\\\");e|=0}var t=this.offset+e;if(!this.noAssert&&(t<0||t>this.buffer.byteLength))throw RangeError(\\\"Illegal length: 0 <= \\\"+this.offset+\\\" + \\\"+e+\\\" <= \\\"+this.buffer.byteLength);return this.offset=t,this},s.slice=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal begin: Not an integer\\\");if(e>>>=0,\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal end: Not an integer\\\");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError(\\\"Illegal range: 0 <= \\\"+e+\\\" <= \\\"+t+\\\" <= \\\"+this.buffer.byteLength)}var n=this.clone();return n.offset=e,n.limit=t,n},s.toBuffer=function(e){var t,n=this.offset,i=this.limit;if(!this.noAssert){if(\\\"number\\\"!=typeof n||n%1!=0)throw TypeError(\\\"Illegal offset: Not an integer\\\");if(n>>>=0,\\\"number\\\"!=typeof i||i%1!=0)throw TypeError(\\\"Illegal limit: Not an integer\\\");if(i>>>=0,n<0||n>i||i>this.buffer.byteLength)throw RangeError(\\\"Illegal range: 0 <= \\\"+n+\\\" <= \\\"+i+\\\" <= \\\"+this.buffer.byteLength)}return e||0!==n||i!==this.buffer.byteLength?n===i?o:(t=new ArrayBuffer(i-n),new Uint8Array(t).set(new Uint8Array(this.buffer).subarray(n,i),0),t):this.buffer},s.toArrayBuffer=s.toBuffer,s.toString=function(e,t,n){if(void 0===e)return\\\"ByteBufferAB(offset=\\\"+this.offset+\\\",markedOffset=\\\"+this.markedOffset+\\\",limit=\\\"+this.limit+\\\",capacity=\\\"+this.capacity()+\\\")\\\";switch(\\\"number\\\"==typeof e&&(n=t=e=\\\"utf8\\\"),e){case\\\"utf8\\\":return this.toUTF8(t,n);case\\\"base64\\\":return this.toBase64(t,n);case\\\"hex\\\":return this.toHex(t,n);case\\\"binary\\\":return this.toBinary(t,n);case\\\"debug\\\":return this.toDebug();case\\\"columns\\\":return this.toColumns();default:throw Error(\\\"Unsupported encoding: \\\"+e)}},u=function(){var e,t,n={},i=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47],r=[];for(e=0,t=i.length;t>e;++e)r[i[e]]=e;return n.encode=function(e,t){for(var n,r;null!==(n=e());)t(i[63&n>>2]),r=(3&n)<<4,null!==(n=e())?(t(i[63&((r|=15&n>>4)|15&n>>4)]),r=(15&n)<<2,null!==(n=e())?(t(i[63&(r|3&n>>6)]),t(i[63&n])):(t(i[63&r]),t(61))):(t(i[63&r]),t(61),t(61))},n.decode=function(e,t){function n(e){throw Error(\\\"Illegal character code: \\\"+e)}for(var i,s,o;null!==(i=e());)if(void 0===(s=r[i])&&n(i),null!==(i=e())&&(void 0===(o=r[i])&&n(i),t(s<<2>>>0|(48&o)>>4),null!==(i=e()))){if(void 0===(s=r[i])){if(61===i)break;n(i)}if(t((15&o)<<4>>>0|(60&s)>>2),null!==(i=e())){if(void 0===(o=r[i])){if(61===i)break;n(i)}t((3&s)<<6>>>0|o)}}},n.test=function(e){return/^(?:[A-Za-z0-9+\\\\/]{4})*(?:[A-Za-z0-9+\\\\/]{2}==|[A-Za-z0-9+\\\\/]{3}=)?$/.test(e)},n}(),s.toBase64=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),t|=0,(e|=0)<0||t>this.capacity||e>t)throw RangeError(\\\"begin, end\\\");var i;return u.encode(function(){return t>e?this.view[e++]:null}.bind(this),i=n()),i()},h.fromBase64=function(e,n){if(\\\"string\\\"!=typeof e)throw TypeError(\\\"str\\\");var i=new h(e.length/4*3,n),r=0;return u.decode(t(e),(function(e){i.view[r++]=e})),i.limit=r,i},h.btoa=function(e){return h.fromBinary(e).toBase64()},h.atob=function(e){return h.fromBase64(e).toBinary()},s.toBinary=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),t|=0,(e|=0)<0||t>this.capacity()||e>t)throw RangeError(\\\"begin, end\\\");if(e===t)return\\\"\\\";for(var n=[],i=[];t>e;)n.push(this.view[e++]),n.length>=1024&&(i.push(String.fromCharCode.apply(String,n)),n=[]);return i.join(\\\"\\\")+String.fromCharCode.apply(String,n)},h.fromBinary=function(e,t){if(\\\"string\\\"!=typeof e)throw TypeError(\\\"str\\\");for(var n,i=0,r=e.length,s=new h(r,t);r>i;){if((n=e.charCodeAt(i))>255)throw RangeError(\\\"illegal char code: \\\"+n);s.view[i++]=n}return s.limit=r,s},s.toDebug=function(e){for(var t,n=-1,i=this.buffer.byteLength,r=\\\"\\\",s=\\\"\\\",o=\\\"\\\";i>n;){if(-1!==n&&(r+=(t=this.view[n])<16?\\\"0\\\"+t.toString(16).toUpperCase():t.toString(16).toUpperCase(),e&&(s+=t>32&&t<127?String.fromCharCode(t):\\\".\\\")),++n,e&&n>0&&n%16==0&&n!==i){for(;r.length<51;)r+=\\\" \\\";o+=r+s+\\\"\\\\n\\\",r=s=\\\"\\\"}r+=n===this.offset&&n===this.limit?n===this.markedOffset?\\\"!\\\":\\\"|\\\":n===this.offset?n===this.markedOffset?\\\"[\\\":\\\"<\\\":n===this.limit?n===this.markedOffset?\\\"]\\\":\\\">\\\":n===this.markedOffset?\\\"'\\\":e||0!==n&&n!==i?\\\" \\\":\\\"\\\"}if(e&&\\\" \\\"!==r){for(;r.length<51;)r+=\\\" \\\";o+=r+s+\\\"\\\\n\\\"}return e?o:r},h.fromDebug=function(e,t,n){for(var i,r,s=e.length,o=new h(0|(s+1)/3,t,n),a=0,u=0,c=!1,l=!1,d=!1,f=!1,p=!1;s>a;){switch(i=e.charAt(a++)){case\\\"!\\\":if(!n){if(l||d||f){p=!0;break}l=d=f=!0}o.offset=o.markedOffset=o.limit=u,c=!1;break;case\\\"|\\\":if(!n){if(l||f){p=!0;break}l=f=!0}o.offset=o.limit=u,c=!1;break;case\\\"[\\\":if(!n){if(l||d){p=!0;break}l=d=!0}o.offset=o.markedOffset=u,c=!1;break;case\\\"<\\\":if(!n){if(l){p=!0;break}l=!0}o.offset=u,c=!1;break;case\\\"]\\\":if(!n){if(f||d){p=!0;break}f=d=!0}o.limit=o.markedOffset=u,c=!1;break;case\\\">\\\":if(!n){if(f){p=!0;break}f=!0}o.limit=u,c=!1;break;case\\\"'\\\":if(!n){if(d){p=!0;break}d=!0}o.markedOffset=u,c=!1;break;case\\\" \\\":c=!1;break;default:if(!n&&c){p=!0;break}if(r=parseInt(i+e.charAt(a++),16),!n&&(isNaN(r)||r<0||r>255))throw TypeError(\\\"Illegal str: Not a debug encoded string\\\");o.view[u++]=r,c=!0}if(p)throw TypeError(\\\"Illegal str: Invalid symbol at \\\"+a)}if(!n){if(!l||!f)throw TypeError(\\\"Illegal str: Missing offset or limit\\\");if(u<o.buffer.byteLength)throw TypeError(\\\"Illegal str: Not a debug encoded string (is it hex?) \\\"+u+\\\" < \\\"+s)}return o},s.toHex=function(e,t){if(e=void 0===e?this.offset:e,t=void 0===t?this.limit:t,!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal begin: Not an integer\\\");if(e>>>=0,\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal end: Not an integer\\\");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError(\\\"Illegal range: 0 <= \\\"+e+\\\" <= \\\"+t+\\\" <= \\\"+this.buffer.byteLength)}for(var n,i=new Array(t-e);t>e;)(n=this.view[e++])<16?i.push(\\\"0\\\",n.toString(16)):i.push(n.toString(16));return i.join(\\\"\\\")},h.fromHex=function(e,t,n){var i,r,s,o,a;if(!n){if(\\\"string\\\"!=typeof e)throw TypeError(\\\"Illegal str: Not a string\\\");if(e.length%2!=0)throw TypeError(\\\"Illegal str: Length not a multiple of 2\\\")}for(r=e.length,s=new h(0|r/2,t),o=0,a=0;r>o;o+=2){if(i=parseInt(e.substring(o,o+2),16),!n&&(!isFinite(i)||i<0||i>255))throw TypeError(\\\"Illegal str: Contains non-hex characters\\\");s.view[a++]=i}return s.limit=a,s},c=function(){var e={MAX_CODEPOINT:1114111,encodeUTF8:function(e,t){var n=null;for(\\\"number\\\"==typeof e&&(n=e,e=function(){return null});null!==n||null!==(n=e());)n<128?t(127&n):n<2048?(t(192|31&n>>6),t(128|63&n)):n<65536?(t(224|15&n>>12),t(128|63&n>>6),t(128|63&n)):(t(240|7&n>>18),t(128|63&n>>12),t(128|63&n>>6),t(128|63&n)),n=null},decodeUTF8:function(e,t){for(var n,i,r,s,o=function(e){e=e.slice(0,e.indexOf(null));var t=Error(e.toString());throw t.name=\\\"TruncatedError\\\",t.bytes=e,t};null!==(n=e());)if(0==(128&n))t(n);else if(192==(224&n))null===(i=e())&&o([n,i]),t((31&n)<<6|63&i);else if(224==(240&n))(null===(i=e())||null===(r=e()))&&o([n,i,r]),t((15&n)<<12|(63&i)<<6|63&r);else{if(240!=(248&n))throw RangeError(\\\"Illegal starting byte: \\\"+n);(null===(i=e())||null===(r=e())||null===(s=e()))&&o([n,i,r,s]),t((7&n)<<18|(63&i)<<12|(63&r)<<6|63&s)}},UTF16toUTF8:function(e,t){for(var n,i=null;null!==(n=null!==i?i:e());)n>=55296&&n<=57343&&null!==(i=e())&&i>=56320&&i<=57343?(t(1024*(n-55296)+i-56320+65536),i=null):t(n);null!==i&&t(i)},UTF8toUTF16:function(e,t){var n=null;for(\\\"number\\\"==typeof e&&(n=e,e=function(){return null});null!==n||null!==(n=e());)n<=65535?t(n):(t(55296+((n-=65536)>>10)),t(n%1024+56320)),n=null},encodeUTF16toUTF8:function(t,n){e.UTF16toUTF8(t,(function(t){e.encodeUTF8(t,n)}))},decodeUTF8toUTF16:function(t,n){e.decodeUTF8(t,(function(t){e.UTF8toUTF16(t,n)}))},calculateCodePoint:function(e){return e<128?1:e<2048?2:e<65536?3:4},calculateUTF8:function(e){for(var t,n=0;null!==(t=e());)n+=t<128?1:t<2048?2:t<65536?3:4;return n},calculateUTF16asUTF8:function(t){var n=0,i=0;return e.UTF16toUTF8(t,(function(e){++n,i+=e<128?1:e<2048?2:e<65536?3:4})),[n,i]}};return e}(),s.toUTF8=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if(\\\"number\\\"!=typeof e||e%1!=0)throw TypeError(\\\"Illegal begin: Not an integer\\\");if(e>>>=0,\\\"number\\\"!=typeof t||t%1!=0)throw TypeError(\\\"Illegal end: Not an integer\\\");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError(\\\"Illegal range: 0 <= \\\"+e+\\\" <= \\\"+t+\\\" <= \\\"+this.buffer.byteLength)}var i;try{c.decodeUTF8toUTF16(function(){return t>e?this.view[e++]:null}.bind(this),i=n())}catch(n){if(e!==t)throw RangeError(\\\"Illegal range: Truncated data, \\\"+e+\\\" != \\\"+t)}return i()},h.fromUTF8=function(e,n,i){if(!i&&\\\"string\\\"!=typeof e)throw TypeError(\\\"Illegal str: Not a string\\\");var r=new h(c.calculateUTF16asUTF8(t(e),!0)[1],n,i),s=0;return c.encodeUTF16toUTF8(t(e),(function(e){r.view[s++]=e})),r.limit=s,r},h}(ci=function(){function e(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function t(e){return!0===(e&&e.__isLong__)}function n(e,t){var n,i,s;return t?(s=(e>>>=0)>=0&&e<256)&&(i=u[e])?i:(n=r(e,(0|e)<0?-1:0,!0),s&&(u[e]=n),n):(s=(e|=0)>=-128&&e<128)&&(i=a[e])?i:(n=r(e,e<0?-1:0,!1),s&&(a[e]=n),n)}function i(e,t){if(isNaN(e)||!isFinite(e))return t?g:p;if(t){if(e<0)return g;if(e>=l)return m}else{if(-d>=e)return I;if(e+1>=d)return E}return e<0?i(-e,t).neg():r(0|e%h,0|e/h,t)}function r(t,n,i){return new e(t,n,i)}function s(e,t,n){var r,o,a,u,h,l,d;if(0===e.length)throw Error(\\\"empty string\\\");if(\\\"NaN\\\"===e||\\\"Infinity\\\"===e||\\\"+Infinity\\\"===e||\\\"-Infinity\\\"===e)return p;if(\\\"number\\\"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||n>36)throw RangeError(\\\"radix\\\");if((r=e.indexOf(\\\"-\\\"))>0)throw Error(\\\"interior hyphen\\\");if(0===r)return s(e.substring(1),t,n).neg();for(o=i(c(n,8)),a=p,u=0;u<e.length;u+=8)h=Math.min(8,e.length-u),l=parseInt(e.substring(u,u+h),n),h<8?(d=i(c(n,h)),a=a.mul(d).add(i(l))):a=(a=a.mul(o)).add(i(l));return a.unsigned=t,a}function o(t){return t instanceof e?t:\\\"number\\\"==typeof t?i(t):\\\"string\\\"==typeof t?s(t):r(t.low,t.high,t.unsigned)}var a,u,c,h,l,d,f,p,g,_,y,v,E,m,I,T;return e.prototype.__isLong__,Object.defineProperty(e.prototype,\\\"__isLong__\\\",{value:!0,enumerable:!1,configurable:!1}),e.isLong=t,a={},u={},e.fromInt=n,e.fromNumber=i,e.fromBits=r,c=Math.pow,e.fromString=s,e.fromValue=o,d=(l=(h=4294967296)*h)/2,f=n(16777216),p=n(0),e.ZERO=p,g=n(0,!0),e.UZERO=g,_=n(1),e.ONE=_,y=n(1,!0),e.UONE=y,v=n(-1),e.NEG_ONE=v,E=r(-1,2147483647,!1),e.MAX_VALUE=E,m=r(-1,-1,!0),e.MAX_UNSIGNED_VALUE=m,I=r(0,-2147483648,!1),e.MIN_VALUE=I,(T=e.prototype).toInt=function(){return this.unsigned?this.low>>>0:this.low},T.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},T.toString=function(e){var t,n,r,s,o,a,u,h;if((e=e||10)<2||e>36)throw RangeError(\\\"radix\\\");if(this.isZero())return\\\"0\\\";if(this.isNegative())return this.eq(I)?(t=i(e),r=(n=this.div(t)).mul(t).sub(this),n.toString(e)+r.toInt().toString(e)):\\\"-\\\"+this.neg().toString(e);for(s=i(c(e,6),this.unsigned),o=this,a=\\\"\\\";;){if(u=o.div(s),h=(o.sub(u.mul(s)).toInt()>>>0).toString(e),(o=u).isZero())return h+a;for(;h.length<6;)h=\\\"0\\\"+h;a=\\\"\\\"+h+a}},T.getHighBits=function(){return this.high},T.getHighBitsUnsigned=function(){return this.high>>>0},T.getLowBits=function(){return this.low},T.getLowBitsUnsigned=function(){return this.low>>>0},T.getNumBitsAbs=function(){var e,t;if(this.isNegative())return this.eq(I)?64:this.neg().getNumBitsAbs();for(e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},T.isZero=function(){return 0===this.high&&0===this.low},T.isNegative=function(){return!this.unsigned&&this.high<0},T.isPositive=function(){return this.unsigned||this.high>=0},T.isOdd=function(){return 1==(1&this.low)},T.isEven=function(){return 0==(1&this.low)},T.equals=function(e){return t(e)||(e=o(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},T.eq=T.equals,T.notEquals=function(e){return!this.eq(e)},T.neq=T.notEquals,T.lessThan=function(e){return this.comp(e)<0},T.lt=T.lessThan,T.lessThanOrEqual=function(e){return this.comp(e)<=0},T.lte=T.lessThanOrEqual,T.greaterThan=function(e){return this.comp(e)>0},T.gt=T.greaterThan,T.greaterThanOrEqual=function(e){return this.comp(e)>=0},T.gte=T.greaterThanOrEqual,T.compare=function(e){if(t(e)||(e=o(e)),this.eq(e))return 0;var n=this.isNegative(),i=e.isNegative();return n&&!i?-1:!n&&i?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},T.comp=T.compare,T.negate=function(){return!this.unsigned&&this.eq(I)?I:this.not().add(_)},T.neg=T.negate,T.add=function(e){var n,i,s,a,u,c,h,l,d,f,p;return t(e)||(e=o(e)),n=this.high>>>16,i=65535&this.high,s=this.low>>>16,a=65535&this.low,u=e.high>>>16,c=65535&e.high,h=e.low>>>16,l=0,d=0,f=0,p=0,f+=(p+=a+(65535&e.low))>>>16,d+=(f+=s+h)>>>16,l+=(d+=i+c)>>>16,l+=n+u,r((f&=65535)<<16|(p&=65535),(l&=65535)<<16|(d&=65535),this.unsigned)},T.subtract=function(e){return t(e)||(e=o(e)),this.add(e.neg())},T.sub=T.subtract,T.multiply=function(e){var n,s,a,u,c,h,l,d,g,_,y,v;return this.isZero()?p:(t(e)||(e=o(e)),e.isZero()?p:this.eq(I)?e.isOdd()?I:p:e.eq(I)?this.isOdd()?I:p:this.isNegative()?e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg():e.isNegative()?this.mul(e.neg()).neg():this.lt(f)&&e.lt(f)?i(this.toNumber()*e.toNumber(),this.unsigned):(n=this.high>>>16,s=65535&this.high,a=this.low>>>16,u=65535&this.low,c=e.high>>>16,h=65535&e.high,l=e.low>>>16,g=0,_=0,y=0,v=0,y+=(v+=u*(d=65535&e.low))>>>16,_+=(y+=a*d)>>>16,y&=65535,_+=(y+=u*l)>>>16,g+=(_+=s*d)>>>16,_&=65535,g+=(_+=a*l)>>>16,_&=65535,g+=(_+=u*h)>>>16,g+=n*d+s*l+a*h+u*c,r((y&=65535)<<16|(v&=65535),(g&=65535)<<16|(_&=65535),this.unsigned)))},T.mul=T.multiply,T.divide=function(e){var n,r,s,a,u,h,l;if(t(e)||(e=o(e)),e.isZero())throw Error(\\\"division by zero\\\");if(this.isZero())return this.unsigned?g:p;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return g;if(e.gt(this.shru(1)))return y;s=g}else{if(this.eq(I))return e.eq(_)||e.eq(v)?I:e.eq(I)?_:(n=this.shr(1).div(e).shl(1)).eq(p)?e.isNegative()?_:v:(r=this.sub(e.mul(n)),s=n.add(r.div(e)));if(e.eq(I))return this.unsigned?g:p;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=p}for(r=this;r.gte(e);){for(n=Math.max(1,Math.floor(r.toNumber()/e.toNumber())),u=(a=Math.ceil(Math.log(n)/Math.LN2))<=48?1:c(2,a-48),l=(h=i(n)).mul(e);l.isNegative()||l.gt(r);)l=(h=i(n-=u,this.unsigned)).mul(e);h.isZero()&&(h=_),s=s.add(h),r=r.sub(l)}return s},T.div=T.divide,T.modulo=function(e){return t(e)||(e=o(e)),this.sub(this.div(e).mul(e))},T.mod=T.modulo,T.not=function(){return r(~this.low,~this.high,this.unsigned)},T.and=function(e){return t(e)||(e=o(e)),r(this.low&e.low,this.high&e.high,this.unsigned)},T.or=function(e){return t(e)||(e=o(e)),r(this.low|e.low,this.high|e.high,this.unsigned)},T.xor=function(e){return t(e)||(e=o(e)),r(this.low^e.low,this.high^e.high,this.unsigned)},T.shiftLeft=function(e){return t(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?r(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):r(0,this.low<<e-32,this.unsigned)},T.shl=T.shiftLeft,T.shiftRight=function(e){return t(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?r(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):r(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},T.shr=T.shiftRight,T.shiftRightUnsigned=function(e){var n;return t(e)&&(e=e.toInt()),0==(e&=63)?this:(n=this.high,e<32?r(this.low>>>e|n<<32-e,n>>>e,this.unsigned):r(32===e?n:n>>>e-32,0,this.unsigned))},T.shru=T.shiftRightUnsigned,T.toSigned=function(){return this.unsigned?r(this.low,this.high,!1):this},T.toUnsigned=function(){return this.unsigned?this:r(this.low,this.high,!0)},T.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},T.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,255&t>>>8,255&t>>>16,255&t>>>24,255&e,255&e>>>8,255&e>>>16,255&e>>>24]},T.toBytesBE=function(){var e=this.high,t=this.low;return[255&e>>>24,255&e>>>16,255&e>>>8,255&e,255&t>>>24,255&t>>>16,255&t>>>8,255&t]},e}()),ci));fi.getModule=function(e){var t=new fi[e];return t.getArrayData=function(){var e=t.toArrayBuffer();return e=$(e)?[].slice.call(new Int8Array(e)):e},t};var pi,gi=\\\"pgMsgP\\\",_i=\\\"chatMsg\\\",yi=\\\"pcMsgP\\\",vi={PRIVATE:\\\"ppMsgS\\\",GROUP:\\\"pgMsgS\\\",CHATROOM:\\\"chatMsgS\\\"},Ei=\\\"delMsg\\\",mi=\\\"joinChrm\\\",Ii=\\\"joinChrmR\\\",Ti=\\\"exitChrm\\\",Ci=\\\"setKV\\\",Ri=\\\"delKV\\\",Si=\\\"setKVS\\\",Ni=\\\"delKVS\\\",Oi=\\\"qryRelationR\\\",wi=\\\"delRelation\\\",bi=\\\"setSeAtt\\\",Mi={PRIVATE:\\\"cleanPMsg\\\",GROUP:\\\"cleanGMsg\\\",CUSTOMER_SERVICE:\\\"cleanCMsg\\\",SYSTEM:\\\"cleanSMsg\\\"},Ai=\\\"qryPMsg\\\",Ui=\\\"qryGMsg\\\",Li=\\\"qryCHMsg\\\",Pi=\\\"qryCMsg\\\",Di=\\\"qrySMsg\\\",Vi=((hi={})[\\\"ppMsgP\\\"]=j.PRIVATE,hi[gi]=j.GROUP,hi[_i]=j.CHATROOM,hi[yi]=j.CUSTOMER_SERVICE,hi),ki=((li={})[j.PRIVATE]=Ai,li[j.GROUP]=Ui,li[j.CHATROOM]=Li,li[j.CUSTOMER_SERVICE]=Pi,li[j.SYSTEM]=Di,li),xi=((di={})[j.PRIVATE]=Mi.PRIVATE,di[j.GROUP]=Mi.GROUP,di[j.CUSTOMER_SERVICE]=Mi.CUSTOMER_SERVICE,di[j.SYSTEM]=Mi.SYSTEM,di),Bi=\\\"1\\\",Fi=\\\"0\\\",Ki=1,qi=2,Yi=3,Hi=function(){function e(e){this._codec=\\\"websocket\\\"===e?fi:ri,this._connectType=e}return e.prototype.decodeByPBName=function(e,t,n){var i,r=this,s=e,o=((i={})[bt]=r._formatSyncMessages,i[wt]=r._formatReceivedMessage,i[Nt]=r._formatSentMessage,i[Vt]=r._formatHistoryMessages,i[xt]=r._formatConversationList,i[Jt]=r._formatChatRoomInfos,i[Zt]=r._formatRTCUserList,i[on]=r._formatRTCData,i[Tn]=r._formatChatRoomKVList,i[bn]=r._formatUserSetting,i[Un]=r._formatConversationStatus,i[Bn]=r._formatGrpReadReceiptQryResp,i[On]=r._formatSetUserSettingOutput,i[Mn]=r._formatUserSettingNotification,i[Jn]=r._formatRTCRoomKVList,i[sn]=r._formatRTCAuidenceJoinRoomData,i[Zn]=r._formatRTCJoinedUserInfo,i)[t];try{s=e.length>0&&r._codec[t].decode(e),ne(s)&&(s=function(e){for(var t in e)ne(e[t])&&(e[t]=nt(e[t]));return e}(s)),ie(o)&&(s=o.call(this,s,n))}catch(n){pe.error(\\\"PB parse error\\\\n\\\",n,e,t)}return s},e.prototype._readBytes=function(e){var t=e.offset,n=e.buffer,i=e.limit;if(t)try{var r=$(n)?new Uint8Array(n):n;return Ct.readUTF(r.subarray(t,i))}catch(e){pe.info(\\\"readBytes error\\\\n\\\",e)}return e},e.prototype._formatBytes=function(e){var t=this._readBytes(e);try{t=JSON.parse(t)}catch(e){pe.info(\\\"formatBytes error\\\\n\\\",e)}return t||e},e.prototype._formatSyncMessages=function(e,t){t=t||{};var n=this,i=e.list,r=e.syncTime,s=e.finished;return(re(s)||null===s)&&(e.finished=!0),e.syncTime=nt(r),e.list=ht(i,(function(e){return n._formatReceivedMessage(e,t)})),e},e.prototype._formatReceivedMessage=function(e,t){var n=(t=t||{}).currentUserId,r=t.connectedTime,s=e.content,o=e.fromUserId,a=e.type,u=e.groupId,c=e.status,h=e.dataTime,l=e.classname,d=e.msgId,f=e.extraContent,p=e.pushContent,g=e.pushExt,_=e.configFlag,y=(e.direction||ye.RECEIVE)===ye.SEND,v=function(e){var t=i.READ;return{isPersited:!!(16&e),isCounted:!!(32&e),isMentioned:!!(64&e),disableNotification:!!(512&e),receivedStatus:t=2&e?i.RETRIEVED:t,canIncludeExpansion:!!(1024&e)}}(c),E=v.isPersited,m=v.isCounted,I=v.isMentioned,T=v.disableNotification,C=v.receivedStatus,R=v.canIncludeExpansion,S=[j.GROUP,j.CHATROOM,j.RTC_ROOM].indexOf(a)>-1?u:o,N=y?n:o,w=nt(h),b=w<r,M=a===j.CHATROOM,A=this._formatBytes(s),U={};if(g&&(U=ot(g.pushConfigs,g.pushId)),A.user){var L=A.user,P=L.portrait,D=L.portraitUri,V=P||D;V&&(A.user.portrait=A.user.portraitUri=V)}var k,x=O(O({},U),{pushTitle:null==g?void 0:g.title,pushContent:p,pushData:p,disablePushTitle:!!_&&Boolean(4&_),forceShowDetailContent:!!_&&Boolean(8&_),templateId:null==g?void 0:g.templateId}),B=y?ye.SEND:ye.RECEIVE;return M&&o===n&&(B=ye.SEND),f&&(k={},k=vt(f)),{conversationType:a,targetId:S,senderUserId:N,messageType:l,messageUId:d,isPersited:E,isCounted:m,isMentioned:I,sentTime:w,isOffLineMessage:b,messageDirection:B,receivedTime:Et.getTime(),disableNotification:T,receivedStatus:C,canIncludeExpansion:R,content:A,expansion:k,configFlag:_,pushConfig:x,channelId:e.busChannel||\\\"\\\"}},e.prototype._formatSentMessage=function(e,t){var n,i=e.content,r=e.classname,s=e.sessionId,o=e.msgId,a=e.extraContent,u=e.pushExt,c=e.pushContent,h=e.configFlag,l=t.signal,d=t.currentUserId,f=l.date,p=l.topic,g=l.targetId,_=function(e){return{isPersited:!!(1&e),isCounted:!!(2&e),disableNotification:!!(32&e),canIncludeExpansion:!!(64&e)}}(s),y=_.isPersited,v=_.isCounted,E=_.disableNotification,m=_.canIncludeExpansion,I=Vi[p]||j.PRIVATE,T=ft(vi,p),C=this._formatBytes(i),R=g;r===Re.RECALL&&(I=C.conversationType||I,R=C.targetId||g),a&&(n={},n=vt(a));var S={};u&&(S=ot(u.pushConfigs,u.pushId));var N=O(O({},S),{pushTitle:null==u?void 0:u.title,pushContent:c,pushData:c,disablePushTitle:!!h&&Boolean(4&h),forceShowDetailContent:!!h&&Boolean(8&h),templateId:null==u?void 0:u.templateId});return{conversationType:I,targetId:R,messageType:r,messageUId:o,isPersited:y,isCounted:v,isStatusMessage:T,senderUserId:d,content:this._formatBytes(i),sentTime:1e3*f,receivedTime:Et.getTime(),messageDirection:ye.SEND,isOffLineMessage:!1,disableNotification:E,canIncludeExpansion:m,expansion:n,pushConfig:N,channelId:e.busChannel||\\\"\\\"}},e.prototype._formatHistoryMessages=function(e,t){var n=this,i=t.conversation||{},r=e.list,s=e.hasMsg,o=i.targetId,a=nt(e.syncTime),u=[];return ct(r,(function(e){var i=n._formatReceivedMessage(e,t);i.targetId=o,u.push(i)}),{isReverse:!0}),{syncTime:a,list:u,hasMore:!!s}},e.prototype._formatConversationList=function(e,t){var n=this,i=e.info,r=t.afterDecode||function(){};return(i=ht(i,(function(e){var i=e.msg,s=e.userId,o=e.type,a=e.unreadCount,u=e.busChannel,c=null;i&&((c=n._formatReceivedMessage(i,t)).targetId=s);var h={targetId:s,conversationType:o,unreadMessageCount:a,latestMessage:c,channelId:u||\\\"\\\"};return r(h)||h})))||[]},e.prototype._formatSetUserSettingOutput=function(e){return e},e.prototype._formatChatRoomInfos=function(e){var t=e.userTotalNums,n=e.userInfos;return{userCount:t,userInfos:ht(n,(function(e){var t=e.id,n=e.time;return{id:t,time:nt(n)}}))}},e.prototype._formatChatRoomKVList=function(e){var t=e.entries,n=e.bFullUpdate,i=e.syncTime;return{kvEntries:t=ht(t=t||[],(function(e){var t=e.key,n=e.value,i=e.status,r=e.timestamp,s=e.uid,o=function(e){return{isAutoDelete:!!(1&e),isOverwrite:!!(2&e),type:4&e?Ue.DELETE:Ue.UPDATE}}(i);return{key:t,value:n,isAutoDelete:o.isAutoDelete,isOverwrite:o.isOverwrite,type:o.type,userId:s,timestamp:nt(r)}})),isFullUpdate:n,syncTime:i}},e.prototype._formatUserSetting=function(e){var t=this,n=e.items,i=e.version,r={};return ct(n||[],(function(e){var n=e.key,i=e.version,s=e.value;e.version=nt(i),e.value=t._readBytes(s),\\\"Tag\\\"===n&&e.tags.forEach((function(e){e.createdTime=nt(e.createdTime),e.tagName=e.name})),r[n]=e})),{settings:r,version:i}},e.prototype._formatConversationStatus=function(e){var t=e.state,n=[];return ct(t,(function(e){var t=e.type,i=e.channelId,r=e.time,s=e.stateItem,o=e.busChannel,a=Ne.CLOSE,u=!1,c=[];ct(s,(function(e){var t=e.sessionStateType,n=e.value,i=e.tags;switch(t){case Ki:a=n===Bi?Ne.OPEN:Ne.CLOSE;break;case qi:u=n===Bi;break;case Yi:c=i}})),n.push({conversationType:t,type:t,targetId:i,notificationStatus:a,isTop:u,updatedTime:nt(r),tags:c,channelId:o||\\\"\\\"})})),n},e.prototype._formatRTCUserList=function(e){var t=e.users,n=e.token,i=e.sessionId,r=e.roomInfo,s=e.entries,o={};return ct(t,(function(e){var t=e.userId,n=e.userData,i={};ct(n,(function(e){var t=e.key,n=e.value;i[t]=n})),o[t]=i})),{users:o,token:n,sessionId:i,roomInfo:r,kvEntries:s}},e.prototype._formatRTCData=function(e){var t=e.outInfo,n={};return ct(t,(function(e){n[e.key]=e.value})),n},e.prototype._formatRTCRoomInfo=function(e){var t=e.roomId,n=e.userCount,i=e.roomData,r={id:t,total:n};return ct(i,(function(e){r[e.key]=e.value})),r},e.prototype._formatGrpReadReceiptQryResp=function(e){var t=e.totalMemberNum,n=e.list;return n.forEach((function(e){e.readTime=nt(e.readTime)})),{totalMemberCount:t,list:n}},e.prototype._formatUserSettingNotification=function(e){return e},e.prototype._formatRTCRoomKVList=function(e){var t=e.entries,n=e.bFullUpdate,i=e.syncTime;return{kvEntries:t=(t=t||[]).map((function(e){var t=e.timestamp;return Object.assign(e,{timestamp:nt(t)})})),isFullUpdate:n,syncTime:i}},e.prototype._formatRTCAuidenceJoinRoomData=function(e){return e},e.prototype._formatRTCJoinedUserInfo=function(e){return(e.info||[]).map((function(e){return{deviceId:e.deviceId,roomId:e.roomId,joinTime:nt(e.joinTime)}}))},e.prototype.encodeServerConfParams=function(){var e=this._codec.getModule(Mt);return e.setNothing(1),e.getArrayData()},e.prototype._getUpMsgModule=function(e,t){var n,i,r,s=\\\"comet\\\"===this._connectType,o=(e.conversationType,t.messageType),a=t.isMentioned,u=t.mentionedType,c=t.mentionedUserIdList,h=t.content,l=t.pushContent,d=t.pushData,f=t.directionalUserIdList,p=t.isFilerWhiteBlacklist,g=t.isVoipPush,_=t.canIncludeExpansion,y=t.expansion,v=t.pushConfig,E=t.channelId;j.GROUP;var m=this._codec.getModule(Nt),I=function(e){var t=e.isStatusMessage,n=e.isPersited,i=e.isCounted;t&&(n=i=!1);var r=0;return n&&(r|=1),i&&(r|=2),e.isMentioned&&(r|=4),e.disableNotification&&(r|=32),e.canIncludeExpansion&&(r|=64),r}(t),T=v||{},C=T.pushTitle,R=T.pushContent,S=T.pushData,N=T.iOSConfig,O=T.androidConfig,w=T.templateId,b=T.disablePushTitle,M=T.forceShowDetailContent,A=0;m.setSessionId(I),a&&h&&(h.mentionedInfo={userIdList:(null===(n=h.mentionedInfo)||void 0===n?void 0:n.userIdList)||c||[],type:(null===(i=h.mentionedInfo)||void 0===i?void 0:i.type)||u||we.ALL,mentionedContent:(null===(r=h.mentionedInfo)||void 0===r?void 0:r.mentionedContent)||\\\"\\\"});var U=R||l||\\\"\\\",L=S||d||\\\"\\\";if(U&&m.setPushText(U),L&&m.setAppData(L),f&&m.setUserId(f),A|=g?1:0,A|=p?2:0,A|=b?4:0,A|=M?8:0,m.setConfigFlag(A),m.setClassname(o),h.user&&h.user.portraitUri&&(h.user.portrait=h.user.portraitUri),m.setContent(JSON.stringify(h)),_&&y){var P={};ct(y,(function(e,t){P[t]={v:e}})),m.setExtraContent(JSON.stringify(P))}if(v){var D=this._codec.getModule(Ot);if(C&&D.setTitle(C),N&&O){var V=st(N,O);D.setPushConfigs(V)}(null==O?void 0:O.notificationId)&&D.setPushId(null==O?void 0:O.notificationId),D.setTemplateId(w||\\\"\\\"),m.setPushExt(s?D.getArrayData():D)}return re(E)||m.setBusChannel(E),m},e.prototype.encodeUpMsg=function(e,t){return this._getUpMsgModule(e,t).getArrayData()},e.prototype.encodeSyncMsg=function(e){var t=e.sendboxTime,n=e.inboxTime,i=this._codec.getModule(Ut);return i.setIspolling(!1),i.setIsPullSend(!0),i.setSendBoxSyncTime(t),i.setSyncTime(n),i.getArrayData()},e.prototype.encodeChrmSyncMsg=function(e,t){e=e||0,t=t||0;var n=this._codec.getModule(Lt);return n.setCount(t),n.setSyncTime(e),n.getArrayData()},e.prototype.encodeGetHistoryMsg=function(e,t){var n=t.count,i=t.order,r=t.timestamp,s=t.channelId,o=this._codec.getModule(Dt);return o.setTargetId(e),o.setTime(r),o.setCount(n),o.setOrder(i),o.setBusChannel(s||\\\"\\\"),o.getArrayData()},e.prototype.encodeGetConversationList=function(e){var t=(e=e||{}).count,n=e.startTime,i=this._codec.getModule(kt);return i.setType(1),i.setCount(t),i.setStartTime(n),i.getArrayData()},e.prototype.encodeOldConversationList=function(e){var t=(e=e||{}).count,n=e.type,i=e.startTime,r=e.order;t=t||0,i=i||0,r=r||0;var s=this._codec.getModule(kt);return s.setType(n),s.setCount(t),s.setStartTime(i),s.setOrder(r),s.getArrayData()},e.prototype.encodeRemoveOldConversationList=function(e){var t=(e=e||{}).conversationType,n=e.channelId,i=this._codec.getModule(qt);return i.setType(t),i.setBusChannel(n),i.getArrayData()},e.prototype.encodeRemoveConversationList=function(e){var t=this,n=this._codec.getModule(Bt),i=[];return ct(e,(function(e){var n=e.conversationType,r=e.targetId,s=t._codec.getModule(Ft);s.setType(n),s.setChannelId(r),i.push(s)})),n.setSessions(i),n.getArrayData()},e.prototype.encodeDeleteMessages=function(e,t,n,i){var r=this._codec.getModule(Yt),s=[];return ct(n,(function(e){s.push({msgId:e.messageUId,msgDataTime:e.sentTime,direct:e.messageDirection})})),r.setType(e),r.setConversationId(t),r.setMsgs(s),r.setBusChannel(i),r.getArrayData()},e.prototype.encodeClearMessages=function(e,t,n){var i=this._codec.getModule(Ht);return t=t||(new Date).getTime(),i.setDataTime(t),i.setTargetId(e),i.setBusChannel(n),i.getArrayData()},e.prototype.encodeClearUnreadCount=function(e,t){var n=e.conversationType,i=e.targetId,r=t.timestamp,s=this._codec.getModule(Gt);return r=r||+new Date,s.setType(n),s.setChannelId(i),s.setMsgTime(r),s.getArrayData()},e.prototype.encodeJoinOrQuitChatRoom=function(){var e=this._codec.getModule(jt);return e.setNothing(1),e.getArrayData()},e.prototype.encodeGetChatRoomInfo=function(e,t){var n=this._codec.getModule(Wt);return n.setCount(e),n.setOrder(t),n.getArrayData()},e.prototype.encodeGetFileToken=function(e,t,n,i){var r=this._codec.getModule(fn);return r.setType(e),r.setKey(t),r.setHttpMethod(n),r.setQueryString(i),r.getArrayData()},e.prototype.encodeGetFileUrl=function(e,t,n,i){var r=this._codec.getModule(e);return r.setType(t),r.setKey(n),i&&r.setFileName(i),r.getArrayData()},e.prototype.encodeModifyChatRoomKV=function(e,t,n){var i=\\\"comet\\\"===this._connectType,r=this._codec.getModule(En),s=t.key,o=t.value,a=t.notificationExtra,u=t.isSendNotification,c=t.type||Ue.UPDATE,h=mt(t,c),l={key:s,value:o||\\\"\\\",uid:n};if(re(h)||(l.status=h),r.setEntry(l),u){var d={conversationType:j.CHATROOM,targetId:e},f={key:s,value:o,extra:a,type:c},p=this._getUpMsgModule(d,{messageType:Re.CHRM_KV_NOTIFY,content:f,isPersited:!1,isCounted:!1});i?r.setNotification(p.getArrayData()):r.setNotification(p),r.setBNotify(!0),r.setType(j.CHATROOM)}return r.getArrayData()},e.prototype.encodeModifyChatRoomKVS=function(e,t,n){this._connectType;var i=this._codec.getModule(mn),r=t.entries,s=t.type||Ue.UPDATE,o=mt(t,s),a=[];return r.forEach((function(e){var t={key:e.key,value:e.value||\\\"\\\",uid:n};re(o)||(t.status=o),a.push(t)})),i.setEntry(a),i.getArrayData()},e.prototype.encodePullChatRoomKV=function(e){var t=this._codec.getModule(Sn);return t.setTimestamp(e),t.getArrayData()},e.prototype.encodePullUserSetting=function(e){var t=this._codec.getModule(wn);return t.setVersion(e),t.getArrayData()},e.prototype.encodeGetConversationStatus=function(e){var t=this._codec.getModule(An);return t.setTime(e),t.getArrayData()},e.prototype.encodeSetConversationStatus=function(e){var t=this,n=\\\"comet\\\"===this._connectType,i=this._codec.getModule(Dn),r=Et.getTime(),s=[];return ct(e,(function(e){var i=t._codec.getModule(Ln),o=e.conversationType,a=e.targetId,u=e.notificationStatus,c=e.isTop,h=e.channelId,l=[];i.setType(o),i.setChannelId(a),i.setTime(r),i.setBusChannel(h);var d=u===Ne.OPEN,f={};re(u)||(f[Ki]=d),re(c)||(f[qi]=c),ct(f,(function(e,i){if(!re(e)){var r=t._codec.getModule(Pn);e=e?Bi:Fi,r.setSessionStateType(Number(i)),r.setValue(e);var s=n?r.getArrayData():r;l.push(s)}})),i.setStateItem(l);var p=n?i.getArrayData():i;s.push(p)})),i.setVersion(r),i.setState(s),i.getArrayData()},e.prototype.encodeReadReceipt=function(e,t){var n=this._codec.getModule(kn);return n.setMsgId(e),t&&n.setChannelId(t),n.getArrayData()},e.prototype.encodeCreateTag=function(e,t){var n=this,i=\\\"comet\\\"===this._connectType,r=this._codec.getModule(Kn),s=[];return e.forEach((function(e){var t=n._codec.getModule(qn);t.setTagId(e.tagId),t.setName(e.tagName),s.push(i?t.getArrayData():t)})),r.setTags(s),r.setVersion(t),r.getArrayData()},e.prototype.encodeMessageReader=function(e,t){var n=this._codec.getModule(kn);return n.setMsgId(e),t&&n.setChannelId(t),n.getArrayData()},e.prototype.encodeRemoveTag=function(e,t){var n=this,i=\\\"comet\\\"===this._connectType,r=this._codec.getModule(Yn),s=[];return e.forEach((function(e){var t=n._codec.getModule(qn);t.setTagId(e),s.push(i?t.getArrayData():t)})),r.setTags(s),r.setVersion(t),r.getArrayData()},e.prototype.encodeDisConversationTag=function(e){var t=this._codec.getModule(Hn);return t.setTagId(e),t.getArrayData()},e.prototype.encodeUpdateConversationTag=function(e,t){var n=this,i=\\\"comet\\\"===this._connectType,r=this._codec.getModule(Dn),s=[];return t.forEach((function(t){var r=n._codec.getModule(Ln),o=n._codec.getModule(Pn),a=[];e.forEach((function(e){var t=n._codec.getModule(qn);t.setTagId(e.tagId),re(e.isTop)||t.setIsTop(e.isTop),a.push(i?t.getArrayData():t)})),o.setSessionStateType(Yi),o.setValue(JSON.stringify(a)),o.setTags(a),r.setType(t.conversationType),r.setChannelId(t.targetId),r.setTime(Date.now()),r.setStateItem([i?o.getArrayData():o]),s.push(i?r.getArrayData():r)})),r.setState(s),r.setVersion(Et.getTime()),r.getArrayData()},e.prototype.encodeReportSDKInfo=function(e){var t=this._codec.getModule(Gn);return t.setSdkInfo(e),t.getArrayData()},e.prototype.encodeJoinRTCRoom=function(e,t,n,i,r){var s=this,o=\\\"comet\\\"===this._connectType,a=this._codec.getModule(zt);if(e=e||0,a.setRoomType(e),re(t)||a.setBroadcastType(t),re(n)||a.setJoinType(n),i){var u=[],c=this._codec.getModule(ln);for(var h in i)c.setKey(h),c.setValue(i[h]),o?u.push(c.getArrayData()):u.push(c);a.setInnerDatas(u)}if(r){var l=[];Object.keys(r).forEach((function(e){var t=s._codec.getModule(ln);t.setKey(e),t.setValue(r[e]),o?l.push(t.getArrayData()):l.push(t)})),a.setOuterDatas(l)}return a.getArrayData()},e.prototype.encodeQuitRTCRoom=function(){return this._codec.getModule(Xt).getArrayData()},e.prototype.encodeSetRTCData=function(e,t,n,i,r){var s=this._codec.getModule($t);if(s.setInterior(n),s.setTarget(i),s.setKey(e),s.setValue(t),r){r.name&&s.setObjectName(r.name);var o=r.content;o&&(ne(o)&&(o=JSON.stringify(o)),s.setContent(o))}return s.getArrayData()},e.prototype.encodeUserSetRTCData=function(e,t,n,i){var r=this,s=\\\"comet\\\"===this._connectType,o=this._codec.getModule(en);o.setObjectName(n);var a=this._codec.getModule(ln);a.setKey(e.name),a.setValue(e.content),s?o.setContent(a.getArrayData()):o.setContent(a);var u=[];return[\\\"uris\\\",\\\"mcu_uris\\\"].forEach((function(e){var n=r._codec.getModule(ln);n.setKey(e);var o=\\\"uris\\\"===e?t:i;n.setValue(o),s?u.push(n.getArrayData()):u.push(n)})),o.setValueInfo(u),o.getArrayData()},e.prototype.encodeUserSetRTCCDNUris=function(e,t){this._connectType;var n=this._codec.getModule(en);n.setObjectName(e);var i=this._codec.getModule(ln);return i.setKey(\\\"cdn_uris\\\"),i.setValue(t),n.setValueInfo(i),n.getArrayData()},e.prototype.encodeGetRTCData=function(e,t,n){var i=this._codec.getModule(tn);return i.setInterior(t),i.setTarget(n),i.setKey(e),i.getArrayData()},e.prototype.encodeRemoveRTCData=function(e,t,n,i){var r=this._codec.getModule(tn);r.setInterior(t),r.setTarget(n),r.setKey(e);var s=(i=i||{}).name,o=i.content;return!re(s)&&r.setObjectName(s),re(o)||(ne(o)&&(o=JSON.stringify(o)),r.setContent(o)),r.getArrayData()},e.prototype.encodeSetRTCOutData=function(e,t,n){var i=this._codec.getModule(nn);i.setTarget(t),X(e)||(e=[e]),ct(e,(function(t,n){t.key=t.key?t.key.toString():t.key,t.value=t.value?t.value.toString():t.value,e[n]=t})),i.setValueInfo(e);var r=(n=n||{}).name,s=n.content;return!re(r)&&i.setObjectName(r),re(s)||(ne(s)&&(s=JSON.stringify(s)),i.setContent(s)),i.getArrayData()},e.prototype.ecnodeGetRTCOutData=function(e){var t=this._codec.getModule(an);return t.setUserId(e),t.getArrayData()},e.prototype.encodeSetRTCState=function(e){var t=this._codec.getModule(rn);return t.setState(e),t.getArrayData()},e.prototype.encodeGetRTCRoomInfo=function(){var e=this._codec.getModule(cn);return e.setOrder(2),e.getArrayData()},e.prototype.encodeSetRTCUserInfo=function(e,t){var n=this._codec.getModule(ln);return n.setKey(e),n.setValue(t),n.getArrayData()},e.prototype.encodeRemoveRTCUserInfo=function(e){var t=this._codec.getModule(dn);return t.setKey(e),t.getArrayData()},e.prototype.encodeIdentityChangeInfo=function(e,t,n){void 0===n&&(n=!1);var i=this._codec.getModule(zt);return i.setRoomType(De.LIVE),t&&i.setBroadcastType(t),i.setIdentityChangeType(e),i.setNeedSysChatroom(n),i.getArrayData()},e.prototype.encodePullRTCRoomKV=function(e,t){var n=this._codec.getModule(Wn);return n.setTimestamp(t),n.setRoomId(e),n.getArrayData()},e.prototype.encodeQueryUserJoinedInfo=function(e){var t=this._codec.getModule(zn);return t.setUserId(e),t.getArrayData()},e.prototype.encodeRequestRoomPK=function(e){var t=e.invitedRoomId,n=e.invitedUserId,i=e.inviteSessionId,r=e.inviteTimeout,s=e.inviteInfo,o=this._codec.getModule($n);return o.setInvitedRoomId(t),o.setInvitedUserId(n),o.setInviteSessionId(i),o.setTimeoutTime(r),o.setInviteInfo(s),o.getArrayData()},e.prototype.encodeCancelRoomPK=function(e){var t=e.invitedRoomId,n=e.invitedUserId,i=e.inviteSessionId,r=e.inviteInfo,s=this._codec.getModule(ei);return s.setInvitedRoomId(t),s.setInvitedUserId(n),s.setInviteSessionId(i),s.setInviteInfo(r),s.getArrayData()},e.prototype.encodeResponseRoomPK=function(e){var t=e.inviteUserId,n=e.inviteRoomId,i=e.inviteSessionId,r=e.content,s=e.key,o=e.value,a=e.agree?1:0,u=this._codec.getModule(ti);return u.setInviteUserId(t),u.setInviteRoomId(n),u.setInviteSessionId(i),u.setContent(r),u.setKey(s),u.setValue(o),u.setAnswerCode(a),u.getArrayData()},e.prototype.encodeEndRoomPK=function(e){var t=e.endRoomId,n=e.sessionId,i=e.content,r=e.keys,s=this._codec.getModule(ni);return s.setInviteRoomId(t),s.setInviteSessionId(n),s.setInviteContent(i),s.setInviteRoomKeys(r),s.getArrayData()},e}(),Gi=function(e,t){this._watcher=t,this.codec=new Hi(e)},ji=function(e,t){return e&&t?t+\\\"_\\\"+e:e||Date.now()},Qi=function(){function e(e){this.header=e,this._name=null,this.lengthSize=0,this.messageId=0,this.timestamp=0,this.syncMsg=!1,this.identifier=\\\"\\\"}return e.prototype.getIdentifier=function(){var e=this.messageId,t=this.identifier;return ji(e,t)},e.prototype.read=function(e,t,n){this.readMessage(e,t,n)},e.prototype.readMessage=function(e,t,n){return{stream:e,length:t}},e}(),Wi=function(){function e(e){this.lengthSize=0,this.messageId=0,this.topic=\\\"\\\",this.targetId=\\\"\\\",this.identifier=\\\"\\\",this._header=new Tt(e,!1,Qe.AT_MOST_ONCE,!1)}return e.prototype.getIdentifier=function(){var e=this.messageId,t=this.identifier;return ji(e,t)},e.prototype.write=function(e){var t=this.getHeaderFlag();e.write(t),this.writeMessage(e)},e.prototype.setHeaderQos=function(e){this._header.qos=e},e.prototype.getHeaderFlag=function(){return this._header.encode()},e.prototype.getLengthSize=function(){return this.lengthSize},e.prototype.getBufferData=function(){var e=new St;this.write(e);var t=e.getBytesArray();return new Int8Array(t)},e.prototype.getCometData=function(){var e=this.data||{};return JSON.stringify(e)},e}(),Ji=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._name=Je.CONN_ACK,t.status=null,t.userId=null,t.timestamp=0,t}return N(t,e),t.prototype.readMessage=function(e,n,i){if(e.readByte(),this.status=+e.readByte(),n<=t.MESSAGE_LENGTH)return{stream:e,length:n};if(i===Ze.V4){var r=e.readByte();1&r&&(this.userId=e.readUTF()),2&r&&e.readUTF(),4&r&&(this.timestamp=e.readLong()),8&r&&(this.messageId=e.read2Byte())}else{this.userId=e.readUTF();var s=e.readUTF();pe.debug(\\\"server sessionId -> \\\"+s),this.timestamp=e.readLong()}return{stream:e,length:n}},t.MESSAGE_LENGTH=2,t}(Qi),zi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._name=Je.DISCONNECT,t.status=0,t}return N(t,e),t.prototype.readMessage=function(e,t){return e.readByte(),this.status=+e.readByte(),{stream:e,length:t}},t.MESSAGE_LENGTH=2,t}(Qi),Zi=function(e){function t(){var t=e.call(this,We.PING_REQ)||this;return t._name=Je.PING_REQ,t}return N(t,e),t.prototype.writeMessage=function(e){},t}(Wi),Xi=function(e){function t(t){var n=e.call(this,t)||this;return n._name=Je.PING_RESP,n}return N(t,e),t}(Qi),$i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.messageId=0,t}return N(t,e),t.prototype.readMessage=function(e,t){var n=256*e.readByte()+e.readByte();return this.messageId=parseInt(n.toString(),10),{stream:e,length:t}},t}(Qi),er=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.messageId=0,t}return N(t,e),t.prototype.writeMessage=function(e){var t=this.messageId,n=255&t,i=(65280&t)>>8;e.write(i),e.write(n)},t}(Wi),tr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._name=Je.PUBLISH,t.topic=\\\"\\\",t.targetId=\\\"\\\",t.syncMsg=!1,t.identifier=ze.PUB,t}return N(t,e),t.prototype.readMessage=function(t,n){return this.date=t.readInt(),this.topic=t.readUTF(),this.targetId=t.readUTF(),e.prototype.readMessage.call(this,t,n),this.data=t.readAll(),{stream:t,length:n}},t}($i),nr=function(e){function t(t,n,i){var r=e.call(this,We.PUBLISH)||this;return r._name=Je.PUBLISH,r.syncMsg=!1,r.identifier=ze.PUB,r.topic=t,r.data=J(n)?Ct.writeUTF(n):n,r.targetId=i,r}return N(t,e),t.prototype.writeMessage=function(t){t.writeUTF(this.topic),t.writeUTF(this.targetId),e.prototype.writeMessage.call(this,t),t.write(this.data)},t}(er),ir=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._name=Je.PUB_ACK,t.status=0,t.date=0,t.millisecond=0,t.messageUId=\\\"\\\",t.timestamp=0,t.identifier=ze.PUB,t.topic=\\\"\\\",t.targetId=\\\"\\\",t}return N(t,e),t.prototype.readMessage=function(t,n){return e.prototype.readMessage.call(this,t,n),this.date=t.readInt(),this.status=256*t.readByte()+t.readByte(),this.millisecond=256*t.readByte()+t.readByte(),this.timestamp=1e3*this.date+this.millisecond,this.messageUId=t.readUTF(),{stream:t,length:n}},t}($i),rr=function(e){function t(t){var n=e.call(this,We.PUB_ACK)||this;return n._name=Je.PUB_ACK,n.status=0,n.date=0,n.millisecond=0,n.messageUId=\\\"\\\",n.timestamp=0,n.messageId=t,n}return N(t,e),t.prototype.writeMessage=function(t){e.prototype.writeMessage.call(this,t)},t}(er),sr=function(e){function t(t,n,i){var r=e.call(this,We.QUERY)||this;return r.name=Je.QUERY,r.identifier=ze.QUERY,r.topic=t,r.data=J(n)?Ct.writeUTF(n):n,r.targetId=i,r}return N(t,e),t.prototype.writeMessage=function(t){t.writeUTF(this.topic),t.writeUTF(this.targetId),e.prototype.writeMessage.call(this,t),t.write(this.data)},t}(er),or=function(e){function t(t){var n=e.call(this,We.QUERY_CONFIRM)||this;return n._name=Je.QUERY_CON,n.messageId=t,n}return N(t,e),t}(er),ar=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._name=Je.QUERY_ACK,t.status=0,t.identifier=ze.QUERY,t.topic=\\\"\\\",t.targetId=\\\"\\\",t}return N(t,e),t.prototype.readMessage=function(t,n){return e.prototype.readMessage.call(this,t,n),this.date=t.readInt(),this.status=256*t.readByte()+t.readByte(),this.data=t.readAll(),{stream:t,length:n}},t}($i),ur=function(e){var t,n=e.type;switch(n){case We.CONN_ACK:t=new Ji(e);break;case We.PUBLISH:(t=new tr(e)).syncMsg=e.syncMsg;break;case We.PUB_ACK:t=new ir(e);break;case We.QUERY_ACK:t=new ar(e);break;case We.SUB_ACK:case We.UNSUB_ACK:case We.PING_RESP:t=new Xi(e);break;case We.DISCONNECT:t=new zi(e);break;default:t=new Qi(e),pe.error(\\\"No support for deserializing \\\"+n+\\\" messages\\\")}return t};!function(e){e[e.ppMsgP=1]=\\\"ppMsgP\\\",e[e.ppMsgN=2]=\\\"ppMsgN\\\",e[e.ppMsgS=3]=\\\"ppMsgS\\\",e[e.pgMsgP=4]=\\\"pgMsgP\\\",e[e.chatMsg=5]=\\\"chatMsg\\\",e[e.pcMsgP=6]=\\\"pcMsgP\\\",e[e.qryPMsg=7]=\\\"qryPMsg\\\",e[e.qryGMsg=8]=\\\"qryGMsg\\\",e[e.qryCHMsg=9]=\\\"qryCHMsg\\\",e[e.qryCMsg=10]=\\\"qryCMsg\\\",e[e.qrySMsg=11]=\\\"qrySMsg\\\",e[e.recallMsg=12]=\\\"recallMsg\\\",e[e.prMsgS=13]=\\\"prMsgS\\\",e[e.rrMsg=14]=\\\"rrMsg\\\",e[e.rrList=15]=\\\"rrList\\\",e[e.s_ntf=16]=\\\"s_ntf\\\",e[e.s_msg=17]=\\\"s_msg\\\",e[e.s_stat=18]=\\\"s_stat\\\",e[e.s_cmd=19]=\\\"s_cmd\\\",e[e.s_us=20]=\\\"s_us\\\",e[e.pullUS=21]=\\\"pullUS\\\",e[e.pgMsgS=22]=\\\"pgMsgS\\\",e[e.chatMsgS=23]=\\\"chatMsgS\\\",e[e.qrySessionsAtt=24]=\\\"qrySessionsAtt\\\",e[e.pullMsg=25]=\\\"pullMsg\\\",e[e.qrySessions=26]=\\\"qrySessions\\\",e[e.delSessions=27]=\\\"delSessions\\\",e[e.delMsg=28]=\\\"delMsg\\\",e[e.updRRTime=29]=\\\"updRRTime\\\",e[e.chrmPull=30]=\\\"chrmPull\\\",e[e.joinChrm=31]=\\\"joinChrm\\\",e[e.joinChrmR=32]=\\\"joinChrmR\\\",e[e.exitChrm=33]=\\\"exitChrm\\\",e[e.queryChrmI=34]=\\\"queryChrmI\\\",e[e.setKV=35]=\\\"setKV\\\",e[e.delKV=36]=\\\"delKV\\\",e[e.pullKV=37]=\\\"pullKV\\\",e[e.qryRelation=38]=\\\"qryRelation\\\",e[e.delRelation=39]=\\\"delRelation\\\",e[e.pullSeAtts=40]=\\\"pullSeAtts\\\",e[e.setSeAtt=41]=\\\"setSeAtt\\\",e[e.qnTkn=42]=\\\"qnTkn\\\",e[e.qnUrl=43]=\\\"qnUrl\\\",e[e.aliUrl=44]=\\\"aliUrl\\\",e[e.s3Url=45]=\\\"s3Url\\\",e[e.stcUrl=46]=\\\"stcUrl\\\",e[e.cleanPMsg=47]=\\\"cleanPMsg\\\",e[e.cleanGMsg=48]=\\\"cleanGMsg\\\",e[e.cleanCMsg=49]=\\\"cleanCMsg\\\",e[e.cleanSMsg=50]=\\\"cleanSMsg\\\",e[e.rtcRJoin_data=51]=\\\"rtcRJoin_data\\\",e[e.rtcRExit=52]=\\\"rtcRExit\\\",e[e.rtcPing=53]=\\\"rtcPing\\\",e[e.rtcSetData=54]=\\\"rtcSetData\\\",e[e.rtc_ntf=55]=\\\"rtc_ntf\\\",e[e.viewerJoinR=56]=\\\"viewerJoinR\\\",e[e.viewerExitR=57]=\\\"viewerExitR\\\",e[e.rtcPullKv=58]=\\\"rtcPullKv\\\",e[e.rtcIdentityChange=59]=\\\"rtcIdentityChange\\\",e[e.userSetData=60]=\\\"userSetData\\\",e[e.rtcQryData=61]=\\\"rtcQryData\\\",e[e.rtcDelData=62]=\\\"rtcDelData\\\",e[e.rtcSetOutData=63]=\\\"rtcSetOutData\\\",e[e.rtcQryUserOutData=64]=\\\"rtcQryUserOutData\\\",e[e.rtcToken=65]=\\\"rtcToken\\\",e[e.rtcUserState=66]=\\\"rtcUserState\\\",e[e.rtcRInfo=67]=\\\"rtcRInfo\\\",e[e.rtcUData=68]=\\\"rtcUData\\\",e[e.rtcUPut=69]=\\\"rtcUPut\\\",e[e.rtcUDel=70]=\\\"rtcUDel\\\",e[e.rtcUList=71]=\\\"rtcUList\\\",e[e.rtcQueryJoined=72]=\\\"rtcQueryJoined\\\",e[e.addSeTag=73]=\\\"addSeTag\\\",e[e.delSeTag=74]=\\\"delSeTag\\\",e[e.addTag=75]=\\\"addTag\\\",e[e.delTag=76]=\\\"delTag\\\",e[e.disTag=77]=\\\"disTag\\\",e[e.reportsdk=78]=\\\"reportsdk\\\",e[e.rtcInvite=79]=\\\"rtcInvite\\\",e[e.rtcCancelInvite=80]=\\\"rtcCancelInvite\\\",e[e.rtcInviteAnswer=81]=\\\"rtcInviteAnswer\\\",e[e.rtcEndInvite=82]=\\\"rtcEndInvite\\\"}(pi||(pi={}));var cr,hr=pi,lr=function(e,t,n,i){return w(void 0,void 0,void 0,(function(){var r;return b(this,(function(s){return r=0,e.forEach((function(s){return w(void 0,void 0,void 0,(function(){var o,a;return b(this,(function(u){switch(u.label){case 0:return o=t+\\\"://\\\"+s+\\\"/ping?r=\\\"+(h=9999,(c=1e3)+Math.floor(Math.random()*(h-c))),pe.debug(\\\"start ping\\\",o),[4,n.httpReq({url:o,timeout:5e3})];case 1:return a=u.sent(),pe.debug(\\\"end ping\\\",r,o,a.status),r++,i({finished:r===e.length,code:a.status,host:s}),[2]}var c,h}))}))})),[2]}))}))},dr=function(e,t,n,i,r,s,o,a){return e+\\\"://\\\"+t+\\\"/websocket?appId=\\\"+n+\\\"&token=\\\"+encodeURIComponent(i)+\\\"&sdkVer=\\\"+s+\\\"&pid=\\\"+o+\\\"&apiVer=\\\"+(r.isFromUniapp?\\\"uniapp\\\":\\\"normal\\\")+(r.connectPlatform?\\\"&platform=\\\"+r.connectPlatform:\\\"\\\")+(a?\\\"&protocolVer=\\\"+a:\\\"\\\")},fr=function(e){return[hr.ppMsgS,hr.pgMsgS,hr.chatMsgS].map((function(e){return hr[e]})).indexOf(e)>=0};!function(e){e[e.REDIRECT=0]=\\\"REDIRECT\\\",e[e.OTHER_DEVICE_LOGIN=1]=\\\"OTHER_DEVICE_LOGIN\\\",e[e.BLOCK=2]=\\\"BLOCK\\\",e[e.REMOTE_CLOSE=3]=\\\"REMOTE_CLOSE\\\",e[e.LOGOUT=4]=\\\"LOGOUT\\\",e[e.BLOCK_NEW=5]=\\\"BLOCK_NEW\\\",e[e.REDIRECT_NEW=6]=\\\"REDIRECT_NEW\\\"}(cr||(cr={}));var pr,gr=function(e,t){pe.info(\\\"websocket send -> messageId: \\\"+e.messageId+\\\" topic: \\\"+e.topic);var n=e.getBufferData();t.send(n.buffer)},_r=function(e){function t(t,n){var i=e.call(this,\\\"websocket\\\",n)||this;return i._runtime=t,i._socket=null,i._messageIds={},i._syncMessageIds={},i._failedCount=0,i.ALLOW_FAILED_TIMES=2,i._timer=null,i._idCount=0,i._generateMessageId=function(){return i._idCount>=65535&&(i._idCount=0),++i._idCount},i}return N(t,e),t.prototype.connect=function(e,t,n,i,r,s){return w(this,void 0,void 0,(function(){var o=this;return b(this,(function(a){return[2,new Promise((function(a){var u=[],c=0,h=!1,l=!1,d=function(){return w(o,void 0,void 0,(function(){var n;return b(this,(function(o){switch(o.label){case 0:return 0===u.length||h?[2]:(h=!0,[4,this._connect(e,t,u.shift(),i,r,s)]);case 1:if((n=o.sent())===Ee.SUCCESS)this._checkAlive(),a(n);else if(n===Te.REDIRECT)a(n);else{if(l&&0===u.length)return a(yt(n)),[2];h=!1,d()}return[2]}}))}))};r=x(r),o._watcher.status(Ie.CONNECTING),lr(n,i,o._runtime,(function(e){var t=e.code,n=e.finished,i=e.host;l=n,200===t&&(u.push(i),c++,d()),n&&0===c&&(pe.error(\\\"No valid websocket server hosts!\\\"),a(Ee.RC_SOCKET_NOT_CREATED))}))}))]}))}))},t.prototype._connect=function(e,t,n,i,r,s){return w(this,void 0,void 0,(function(){var o,a,u,c,h,l=this;return b(this,(function(d){switch(d.label){case 0:return o=i.replace(\\\"http\\\",\\\"ws\\\"),a=dr(o,n,e,t,this._runtime,r,\\\"\\\",s),pe.debug(\\\"conenct start -> \\\"+a),this.sendConnectTime=Date.now(),u=this._runtime.createWebSocket(a),c=function(e){l._timer&&(clearTimeout(l._timer),l._timer=null),l._socket===u&&(l._socket=null,l._watcher.status(e))},[4,new Promise((function(e){u.onMessage((function(t){if(\\\"[object ArrayBuffer]\\\"===Object.prototype.toString.call(t)){var n=function(e,t){var n=new Uint8Array(e),i=new Rt(n),r=i.readByte(),s=new Tt(r),o=ur(s);return o.read(i,n.length-1,t),o}(t,s);if(n instanceof Xi&&l._pingResolve)return l._pingResolve(Ee.SUCCESS),void(l._pingResolve=void 0);if(n instanceof Ji)return pe.debug(\\\"recv connect ack -> \\\"+n.status),n.status!==Te.ACCEPTED?(pe.warn(\\\"connect failed: \\\"+n.status),void e(n.status)):(pe.info(\\\"connect success -> \\\"+a),l.connectedTime=n.timestamp,l.userId=n.userId||\\\"\\\",l._idCount=n.messageId,void e(Ee.SUCCESS));if(n instanceof zi){var i=n.status;switch(pe.warn(\\\"recv disconnect signal -> status: \\\"+i),i){case cr.BLOCK_NEW:case cr.BLOCK:l._watcher.status(Ie.BLOCKED);break;case cr.OTHER_DEVICE_LOGIN:l._watcher.status(Ie.KICKED_OFFLINE_BY_OTHER_CLIENT);break;case cr.REDIRECT_NEW:case cr.REDIRECT:l._watcher.status(Ie.REDIRECT);break;default:l._watcher.status(Ie.DISCONNECT_BY_SERVER)}}else l._onReceiveSignal(n)}else pe.error(\\\"Socket received invalid data:\\\",t)})),u.onClose((function(t,n){for(var i in pe.warn(\\\"websocket closed! code:\\\",t,\\\"reason:\\\",n),c(Ie.CONNECTION_CLOSED),l._messageIds){var r=l._messageIds[i];delete l._messageIds[i],r(Ee.RC_NET_CHANNEL_INVALID)}e(t)})),u.onError((function(t){var n;for(var i in pe.error(\\\"websocket error!\\\",null===(n=t)||void 0===n?void 0:n.stack),c(Ie.WEBSOCKET_ERROR),l._messageIds){var r=l._messageIds[i];delete l._messageIds[i],r(Ee.RC_NET_CHANNEL_INVALID)}e(Ee.NETWORK_ERROR)})),u.onOpen((function(){return pe.debug(\\\"websocket open =>\\\",a)})),setTimeout((function(){e(Ee.TIMEOUT)}),5e3)}))];case 1:return(h=d.sent())===Ee.SUCCESS?this._socket=u:(pe.warn(\\\"connect result -> code: \\\"+h+\\\", url: \\\"+a),u.close()),[2,h]}}))}))},t.prototype._checkAlive=function(){var e;return w(this,void 0,void 0,(function(){var t,n=this;return b(this,(function(i){switch(i.label){case 0:return this._socket?(pe.debug(\\\"send ping ->\\\"),this.sendOnly(new Zi),[4,new Promise((function(e){n._pingResolve=e,n._timer&&clearTimeout(n._timer),n._timer=setTimeout((function(){n._pingResolve=void 0,e(Ee.TIMEOUT)}),15e3)}))]):[2];case 1:return(t=i.sent())!==Ee.SUCCESS?(this._failedCount+=1,pe.warn(\\\"ping failed count: \\\"+this._failedCount+\\\", code: \\\"+t),this._failedCount>=this.ALLOW_FAILED_TIMES?(this._failedCount=0,pe.warn(\\\"ping timeout, close current websocket to reconnect!\\\"),null===(e=this._socket)||void 0===e||e.close(),this._watcher.status(Ie.NETWORK_UNAVAILABLE)):this._checkAlive(),[2]):(pe.debug(\\\"recv pong <-\\\"),this._failedCount=0,setTimeout((function(){return n._checkAlive()}),15e3),[2])}}))}))},t.prototype._onReceiveSignal=function(e){return w(this,void 0,void 0,(function(){var t,n,i,r,s,o,a=this;return b(this,(function(u){switch(u.label){case 0:return t=e.messageId,e.header&&e.header.qos!==Qe.AT_MOST_ONCE&&(e instanceof tr&&!e.syncMsg&&(pe.info(\\\"send pubAck -> \\\"+t+\\\" \\\"+e.topic),this.sendOnly(new rr(t))),e instanceof ar&&(pe.info(\\\"send queryCon -> \\\"+t+\\\" \\\"+e.topic),this.sendOnly(new or(t)))),t>0&&(e instanceof ir||e instanceof ar)&&(pe.info(\\\"recv ack -> messageId: \\\"+t+\\\" \\\"+e.topic),(n=this._messageIds[t])&&(n(e),delete this._messageIds[t]),(i=this._syncMessageIds[t])&&(delete this._syncMessageIds[t],i(e))),e instanceof tr?(r=e.syncMsg,s=e.topic,pe.info(\\\"recv PublishReader -> messageId: \\\"+t+\\\" \\\"+s),s===hr[hr.userSetData]?[2]:!r||fr(s)?(this._watcher.signal(e),[2]):[4,new Promise((function(e){a._syncMessageIds[t]=e}))]):[3,2];case 1:o=u.sent(),delete this._syncMessageIds[t],this._watcher.signal(e,o),u.label=2;case 2:return[2]}}))}))},t.prototype.sendOnly=function(e){this._socket&&((e instanceof nr||e instanceof sr)&&(e.messageId=this._generateMessageId()),gr(e,this._socket))},t.prototype.send=function(e,t,n,i){return void 0===i&&(i=3e4),w(this,void 0,void 0,(function(){var r,s,o,a=this;return b(this,(function(u){switch(u.label){case 0:return this._socket?(r=this._generateMessageId(),e.messageId=r,gr(e,this._socket),[4,new Promise((function(e){a._messageIds[r]=e,setTimeout((function(){a._messageIds[r]&&delete a._messageIds[r],e()}),i)}))]):[3,2];case 1:return(s=u.sent())?s instanceof ar||s instanceof ir?(o=t&&s.data?this.codec.decodeByPBName(s.data,t,n):s,0!==s.status?(pe.warn(\\\"send failed -> message: \\\"+r+\\\", respPBName: \\\"+t+\\\", status: \\\"+s.status),[2,{code:s.status,data:t&&s.data?o:null}]):[2,{code:Ee.SUCCESS,data:o}]):[2,{code:s}]:(pe.warn(\\\"send timeout -> message: \\\"+r+\\\", respPBName: \\\"+t+\\\", timeout: \\\"+i),[2,{code:Ee.TIMEOUT}]);case 2:return[2,{code:Ee.RC_NET_CHANNEL_INVALID}]}}))}))},t.prototype.close=function(){this._socket&&(this._socket.close(),this._socket=null,this._watcher.status(Ie.DISCONNECTED))},t}(Gi);!function(e){e.GET=\\\"GET\\\",e.POST=\\\"POST\\\"}(pr||(pr={}));var yr=function(e){function t(t,n){var i=e.call(this,\\\"comet\\\",n)||this;return i._runtime=t,i._messageIds={},i._syncMessageIds={},i._idCount=0,i._generateMessageId=function(){return++i._idCount},i._pid=encodeURIComponent((new Date).getTime()+Math.random()+\\\"\\\"),i}return N(t,e),t.prototype.handleCometRes=function(e){var t=this;if(200!==e.status&&202!==e.status)return!1;var n=J(e.data)?JSON.parse(e.data):e.data;return n?!X(n)||(ct(n,(function(e){return w(t,void 0,void 0,(function(){var t,n,i,r,s,o,a,u,c,h,l,d=this;return b(this,(function(f){switch(f.label){case 0:if((t=e.sessionid)&&(this._sessionid=t),n=function(e){var t=e.headerCode,n=new Tt(t),i=ur(n);for(var r in e)i[r]=e[r];return i}(e),i=n.messageId,r=n._header,s=n.status,n.identifier,o=r&&r.qos!==Qe.AT_MOST_ONCE,i&&n.getIdentifier&&((a=this._messageIds[i])&&a(n),this._syncMessageIds[i]&&this._syncMessageIds[i](n)),o&&(n instanceof tr&&!n.syncMsg&&(u=new rr(i),this.sendOnly(u)),n instanceof ar&&(u=new or(i),this.sendOnly(u))),n instanceof zi){switch(s){case cr.OTHER_DEVICE_LOGIN:this._watcher.status(Ie.KICKED_OFFLINE_BY_OTHER_CLIENT);break;case cr.BLOCK:case cr.BLOCK_NEW:this._watcher.status(Ie.BLOCKED);break;case cr.REDIRECT_NEW:case cr.REDIRECT:this._watcher.status(Ie.REDIRECT);break;default:this._watcher.status(Ie.DISCONNECT_BY_SERVER)}return[2]}return n instanceof tr?(c=n.syncMsg,h=n.topic,!c||fr(h)?(this._watcher.signal(n),[2,!1]):[4,new Promise((function(e){d._syncMessageIds[i]=e}))]):[3,2];case 1:l=f.sent(),delete this._syncMessageIds[i],this._watcher.signal(n,l),f.label=2;case 2:return[2]}}))}))})),!0):(pe.error(\\\"received data is not a validJson\\\",n),!1)},t.prototype._startPullSignal=function(e){return w(this,void 0,void 0,(function(){var t,n,i,r;return b(this,(function(s){switch(s.label){case 0:return t=(new Date).getTime(),n=e+\\\"://\\\"+this._domain+\\\"/pullmsg.js?sessionid=\\\"+this._sessionid+\\\"&timestrap=\\\"+t+\\\"&pid=\\\"+this._pid,[4,this._runtime.httpReq({url:n,body:{pid:this._pid},timeout:45e3})];case 1:return i=s.sent(),r=this.handleCometRes(i),this._isDisconnected||(r?this._startPullSignal(e):(this._isDisconnected=!0,this._watcher.status(Ie.NETWORK_UNAVAILABLE))),[2]}}))}))},t.prototype.connect=function(e,t,n,i,r,s){return w(this,void 0,void 0,(function(){var s,o,a,u,c=this;return b(this,(function(h){return r=x(r),this._protocol=i,this._isDisconnected=!1,this._watcher.status(Ie.CONNECTING),s=[],o=0,a=!1,u=!1,[2,new Promise((function(h){var l=function(){return w(c,void 0,void 0,(function(){var n;return b(this,(function(o){switch(o.label){case 0:return 0===s.length||a?[2]:(a=!0,[4,this._connect(e,t,s.shift(),i,r)]);case 1:if((n=o.sent())===Ee.SUCCESS)this._startPullSignal(i),h(n);else if(n===Te.REDIRECT)h(n);else{if(u&&0===s.length)return h(yt(n)),[2];a=!1,l()}return[2]}}))}))};c._watcher.status(Ie.CONNECTING),lr(n,i,c._runtime,(function(e){var t=e.code,n=e.finished,i=e.host;u=n,200===t&&(s.push(i),o++,l()),n&&0===o&&(pe.error(\\\"No valid websocket server hosts!\\\"),h(Ee.RC_SOCKET_NOT_CREATED))}))}))]}))}))},t.prototype._connect=function(e,t,n,i,r){return w(this,void 0,void 0,(function(){var s,o,a,u;return b(this,(function(c){switch(c.label){case 0:return s=function(e){return 200!==e.status&&202!==e.status?(pe.error(\\\"handle comet res -> res: \\\"+JSON.stringify(e||{})),!1):!!e.data&&(function(e){if(ne(e))return!0;var t=!1;try{var n=JSON.parse(e);t=JSON.stringify(n)===e}catch(e){t=!1}return t}(e.data)?ne(e.data)?e.data:JSON.parse(e.data):(pe.error(\\\"received data is not a validJson\\\",e.data),!1))},o=dr(i,n,e,t,this._runtime,r,this._pid),this.sendConnectTime=Date.now(),pe.debug(\\\"conenct start -> \\\"+o),[4,this._runtime.httpReq({url:o,body:{pid:this._pid},timeout:5e3})];case 1:return a=c.sent(),u=s(a),this._domain=n,u&&0===u.status?(this._sessionid=u.sessionid,this.userId=u.userId,this.connectedTime=u.timestamp):pe.warn(\\\"connect result -> code: \\\"+(null==u?void 0:u.status)+\\\", url: \\\"+o),[2,null==u?void 0:u.status]}}))}))},t.prototype.sendCometData=function(e,t){return w(this,void 0,void 0,(function(){var t,n,i,r,s,o,a,u,c,h;return b(this,(function(l){switch(l.label){case 0:return n=(t=this)._domain,i=t._sessionid,r=t._pid,s=e.messageId,o=e.topic,a=e.targetId,e.identifier,u=e.getHeaderFlag(),c=o?this._protocol+\\\"://\\\"+n+\\\"/websocket?messageid=\\\"+s+\\\"&header=\\\"+u+\\\"&sessionid=\\\"+i+\\\"&topic=\\\"+o+\\\"&targetid=\\\"+a+\\\"&pid=\\\"+r:this._protocol+\\\"://\\\"+n+\\\"/websocket?messageid=\\\"+s+\\\"&header=\\\"+u+\\\"&sessionid=\\\"+i+\\\"&pid=\\\"+r,[4,this._runtime.httpReq({url:c,method:pr.POST,body:e.getCometData()})];case 1:return h=l.sent(),this.handleCometRes(h),[2]}}))}))},t.prototype.sendOnly=function(e){this.sendCometData(e)},t.prototype.send=function(e,t,n,i){return void 0===i&&(i=3e4),w(this,void 0,void 0,(function(){var r,s,o,a=this;return b(this,(function(u){switch(u.label){case 0:return r=this._generateMessageId(),e.messageId=r,this.sendCometData(e),[4,new Promise((function(e){a._messageIds[r]=e,setTimeout((function(){delete a._messageIds[r],e()}),i)}))];case 1:return(s=u.sent())?(o=t&&s.data?this.codec.decodeByPBName(s.data,t,n):s,0!==s.status?[2,{code:s.status,data:t&&s.data?o:null}]:[2,{code:Ee.SUCCESS,data:o}]):[2,{code:Ee.TIMEOUT}]}}))}))},t.prototype.close=function(){this._isDisconnected=!0,this._watcher.status(Ie.DISCONNECTED)},t}(Gi),vr=function(e,t,n){this.runtime=e,this._watcher=t,this._options=n,this.currentUserId=\\\"\\\",this._appkey=this._options.appkey,this._apiVer=this._options.apiVersion,this.navi=this._createNavi()},Er=function(e){return[\\\"navi\\\",e].join(\\\"_\\\")},mr=function(){function e(e,t){this._runtime=e,this._options=t,this._naviInfo=null,this._appkey=this._options.appkey,this._apiVersion=x(this._options.apiVersion)}return e.prototype.getInfo=function(e,t,n,i){return w(this,void 0,void 0,(function(){var r,s;return b(this,(function(o){switch(o.label){case 0:return n&&this._clear(e),(r=function(e,t,n){var i,r,s=Er(e);try{var o=n.getItem(s);r=o?JSON.parse(o):[]}catch(e){r=[]}var a=Date.now();return r.length>0&&(r=r.filter((function(e){return a-e.timestamp<72e5}))),0===r.length?n.removeItem(s):n.setItem(s,JSON.stringify(r)),(null===(i=r.find((function(e){return e.token===t})))||void 0===i?void 0:i.naviInfo)||null}(this._appkey,e,this._runtime.localStorage))?(this._naviInfo=r,[2,r]):(s=this._options.navigators.slice(),t.length&&t.forEach((function(e){s.indexOf(e)<0&&s.unshift(e)})),[4,this._reqNavi(s,this._appkey,e,i)]);case 1:return(r=o.sent())?(this._naviInfo=r,this.setNaviInfo2Cache(e,r),[2,r]):[2,r]}}))}))},e.prototype.setNaviInfo2Cache=function(e,t){this._naviInfo=t,function(e,t,n,i){var r,s=Er(e);try{var o=i.getItem(s);r=o?JSON.parse(o):[]}catch(e){r=[]}var a=Date.now();r.length>0&&(r=r.filter((function(e){return a-e.timestamp<72e5&&t!==e.token}))),r.push({timestamp:a,naviInfo:n,token:t}),i.setItem(s,JSON.stringify(r))}(this._appkey,e,t,this._runtime.localStorage)},e.prototype.getInfoFromCache=function(e){return this._naviInfo},e.prototype._clear=function(e){!function(e,t,n){var i,r=Er(e);try{var s=n.getItem(r);i=s?JSON.parse(s):[]}catch(e){i=[]}var o=Date.now();i.length>0&&(i=i.filter((function(e){return o-e.timestamp<72e5&&t!==e.token}))),0===i.length?n.removeItem(r):n.setItem(r,JSON.stringify(i))}(this._appkey,e,this._runtime.localStorage)},e}(),Ir=function(e,t,n){return[e,t,n].join(\\\"_\\\")},Tr=function(){function e(e,t){this._runtime=e,this._appkey=t,this._users={}}return e.prototype._getMemData=function(e){return this._users[e]||(this._users[e]={inboxTime:0,outboxTime:0})},e.prototype.setInboxTime=function(e,t){var n=this._getMemData(t);if(!(n.inboxTime>e)){n.inboxTime=e;var i=Ir(\\\"inbox\\\",this._appkey,t);this._runtime.localStorage.setItem(i,e.toString())}},e.prototype.getInboxTime=function(e){var t=this._getMemData(e);if(0===t.inboxTime){var n=Ir(\\\"inbox\\\",this._appkey,e);t.inboxTime=parseInt(this._runtime.localStorage.getItem(n))||0}return t.inboxTime},e.prototype.setOutboxTime=function(e,t){var n=this._getMemData(t);if(!(n.outboxTime>=e)){n.outboxTime=e;var i=Ir(\\\"outbox\\\",this._appkey,t);this._runtime.localStorage.setItem(i,e.toString())}},e.prototype.getOutboxTime=function(e){var t=this._getMemData(e);if(0===t.outboxTime){var n=Ir(\\\"outbox\\\",this._appkey,e);t.outboxTime=parseInt(this._runtime.localStorage.getItem(n))||0}return t.outboxTime},e}(),Cr={_caches:{},set:function(e,t){this._caches[e]=t},get:function(e){return this._caches[e]||0},clear:function(e){this._caches[e]=0}},Rr=function(){function e(e,t){this._kvCaches={},this._chatroomId=e,this._currentUserId=t}return e.prototype._add=function(e){var t=e.key;e.isDeleted=!1,this._kvCaches[t]=e},e.prototype._remove=function(e){var t=e.key,n=this._kvCaches[t];n&&(n.isDeleted=!0,this._kvCaches[t]=n)},e.prototype._setEntry=function(e,t){var n=e.key,i=e.type,r=e.isOverwrite,s=e.userId,o=this._getSetUserId(n),a=i===Ue.DELETE,u=o===s,c=!this._isExisted(n),h=a?this._remove:this._add;(t||r||u||c)&&h.call(this,e)},e.prototype.getValue=function(e){var t=this._kvCaches[e]||{};return t.isDeleted?null:t.value},e.prototype.getAllValue=function(){var e={};for(var t in this._kvCaches)this._kvCaches[t].isDeleted||(e[t]=this._kvCaches[t].value);return e},e.prototype._getSetUserId=function(e){return(this._kvCaches[e]||{}).userId},e.prototype._isExisted=function(e){var t=this._kvCaches[e]||{},n=t.value,i=t.isDeleted;return n&&!i},e.prototype.setEntries=function(e){var t=this,n=e.kvEntries,i=e.isFullUpdate;n=n||[],(i=i||!1)&&this.clear(),n.forEach((function(e){t._setEntry(e,i)})),pe.debug(\\\"end setEntries\\\")},e.prototype.clear=function(){this._kvCaches={}},e}(),Sr=function(){function e(e){this._pullQueue=[],this._isPulling=!1,this._storeCaches={},this._engine=e}return e.prototype._startPull=function(){return w(this,void 0,void 0,(function(){var e,t,n,i,r,s,o;return b(this,(function(a){switch(a.label){case 0:return this._isPulling||0===this._pullQueue.length?[2]:(this._isPulling=!0,e=this._pullQueue.splice(0,1)[0],t=e.chrmId,n=e.timestamp,(i=Cr.get(t))>n?(this._isPulling=!1,this._startPull(),[2]):[4,this._engine.pullChatroomEntry(t,i)]);case 1:return r=a.sent(),s=r.code,o=r.data,this._isPulling=!1,s===Ee.SUCCESS?(Cr.set(t,o.syncTime||0),this._startPull()):this._startPull(),[2]}}))}))},e.prototype.reset=function(e){Cr.clear(e);var t=this._storeCaches[e];t&&t.clear()},e.prototype.pullEntry=function(e,t){this._pullQueue.push({chrmId:e,timestamp:t}),this._startPull()},e.prototype.setLocal=function(e,t,n){var i=this._storeCaches[e];ae(i)||(i=new Rr(e,n)),i.setEntries(t),this._storeCaches[e]=i},e.prototype.getValue=function(e,t){var n=this._storeCaches[e];return n?n.getValue(t):null},e.prototype.getAll=function(e){var t=this._storeCaches[e],n={};return t&&(n=t.getAllValue()),n},e}(),Nr=function(){function e(e,t,n,i){this._runtime=e,this._appkey=t,this._userId=n,this._canJoinMulipleChrm=i,this._sessionKey=\\\"\\\",this._joinedChrmsInfo={},this._sessionKey=\\\"sync-chrm-\\\"+this._appkey+\\\"-\\\"+this._userId}return e.prototype.set=function(e,t){void 0===t&&(t=10),!this._canJoinMulipleChrm&&(this._joinedChrmsInfo={}),this._joinedChrmsInfo[e]=t,this._runtime.sessionStorage.setItem(this._sessionKey,JSON.stringify(this._joinedChrmsInfo))},e.prototype.get=function(){var e,t;try{t=this._runtime.sessionStorage.getItem(this._sessionKey),e=JSON.parse(t||\\\"{}\\\")}catch(n){pe.error(\\\"parse rejoined chrm infos error -> \\\"+t),e={}}return e},e.prototype.remove=function(e){delete this._joinedChrmsInfo[e],ae(this._joinedChrmsInfo)?this._runtime.sessionStorage.setItem(this._sessionKey,JSON.stringify(this._joinedChrmsInfo)):this.clear()},e.prototype.clear=function(){this._joinedChrmsInfo={},this._runtime.sessionStorage.removeItem(this._sessionKey)},e}(),Or=\\\"converStatusChanged\\\",wr=function(){function e(e,t,n){this._eventEmitter=new ge,this._pullQueue=[],this._isPulling=!1,this._storage=T(e.runtime),this._appkey=t,this._currentUserId=n,this._engine=e,this._storagePullTimeKey=\\\"con-s-\\\"+t+\\\"-\\\"+n}return e.prototype._set=function(e){var t=this;if(!re(e)&&Array.isArray(e)){var n=this._storage.get(this._storagePullTimeKey)||0,i=e.length;e.forEach((function(e,r){var s=e.updatedTime||0;n=s>n?s:n,e.conversationType=e.type,t._eventEmitter.emit(Or,{statusItem:e,isLastPull:r===i-1})})),this._storage.set(this._storagePullTimeKey,n)}},e.prototype._startPull=function(){return w(this,void 0,void 0,(function(){var e,t,n,i;return b(this,(function(r){switch(r.label){case 0:return this._isPulling||0===this._pullQueue.length?[2]:(this._isPulling=!0,e=this._pullQueue.splice(0,1)[0],[4,this._engine.pullConversationStatus(e)]);case 1:return t=r.sent(),n=t.code,i=t.data,n===Ee.SUCCESS?(this._isPulling=!1,this._set(i),this._startPull()):this._startPull(),[2]}}))}))},e.prototype.pull=function(e){var t=this._storage.get(this._storagePullTimeKey)||0;(e>t||0===e)&&(this._pullQueue.push(t),this._startPull())},e.prototype.watch=function(e){this._eventEmitter.on(Or,(function(t){e(t)}))},e.prototype.unwatch=function(){this._eventEmitter.off(Or,(function(e){}))},e}(),br={c:{keyName:\\\"unreadMessageCount\\\",defaultVal:0},hm:{keyName:\\\"hasMentioned\\\",defaultVal:!1},m:{keyName:\\\"mentionedInfo\\\",defaultVal:null},t:{keyName:\\\"lastUnreadTime\\\",defaultVal:0},nc:{keyName:\\\"notificationStatus\\\",defaultVal:2},to:{keyName:\\\"isTop\\\",defaultVal:!1},tg:{keyName:\\\"tags\\\",defaultVal:{}},mc:{keyName:\\\"unreadMentionedCount\\\",defaultVal:0}},Mr={};for(var Ar in br){var Ur=br[Ar].keyName;Mr[Ur]=Ar}var Lr,Pr=function(){function e(e,t,n){this._appkey=t,this._currentUserId=n;var i=\\\"con-\\\"+t+\\\"-\\\"+n;this.storage=new R(e,i),this._localStore=new R(e,\\\"CONVER-\\\"+t+\\\"-\\\"+n)}return e.prototype._getStoreKey=function(e,t,n){return n+\\\"_\\\"+e+\\\"_\\\"+t},e.prototype._getConOptionByKey=function(e){var t=(e=e||\\\"\\\").split(\\\"_\\\");if(t.length>=2){var n=t.shift(),i=t.shift(),r=t.join(\\\"_\\\");return{conversationType:Number(i),targetId:r,channelId:n}}return{conversationType:j.PRIVATE,targetId:\\\"\\\",channelId:\\\"\\\"}},e.prototype.updateMentionedData=function(e){var t=this,n=e.conversationType,i=e.targetId,r=e.messageType,s=e.isMentioned,o=e.content,a=e.senderUserId,u=e.channelId,c=this._getStoreKey(n,i,u),h=this._localStore.get(c)||{},l=Mr.mentionedInfo,d=Mr.hasMentioned,f=h[l]||{},p=f.userIdList||[],g=o.mentionedInfo;if(g){if(s&&n===j.GROUP)(g.userIdList||[]).forEach((function(e){e===t._currentUserId&&p.indexOf(a)<0&&p.push(a)})),g.type===we.ALL&&p.indexOf(a)<0&&p.push(a);if(r===Re.RECALL&&n===j.GROUP){var _=p.indexOf(a);_>=0&&p.splice(_,1)}g={userIdList:p,type:(null==g?void 0:g.type)||f.type},0!==p.length?(h[l]=g,h[d]=!0):(delete h[l],delete h[d]),ae(h)?this._localStore.set(c,h):this._localStore.remove(c)}},e.prototype.set=function(e,t,n,i){var r=this._getStoreKey(e,t,i),s=this._localStore.get(r)||{};for(var o in n){var a=Mr[o],u=n[o];if(!re(a)&&!re(u)&&\\\"hasMentioned\\\"!==o&&\\\"MentionedInfo\\\"!==o){if(u===br[a].defaultVal||\\\"tags\\\"===o&&!ae(u))delete s[a];else if(\\\"tags\\\"===o){var c=u;for(var h in c)c[h].isTop||delete c[h].isTop;s[a]=u}else s[a]=u;s.c||(delete s.t,delete s.hm,delete s.m,delete s.mc)}}ae(s)?this._localStore.set(r,s):this._localStore.remove(r)},e.prototype.get=function(e,t,n){void 0===n&&(n=\\\"\\\");var i=this._getStoreKey(e,t,n),r=this._localStore.get(i)||{},s={};for(var o in br){var a=br[o],u=a.keyName,c=a.defaultVal;s[u]=r[o]||pt(c)}return s},e.prototype.getValue=function(e){var t=this._localStore.getValues()||{},n=[];for(var i in t){var r=this._getConOptionByKey(i),s={conversationType:r.conversationType,targetId:r.targetId,channelId:r.channelId},o=t[i];for(var a in o){var u=br[a],c=u.keyName,h=u.defaultVal;s[c]=o[a]||pt(h)}s=e?e(s):s,n.push(s)}return n},e.prototype.getValueForTag=function(){var e=this._localStore.getValues()||{},t={};for(var n in e){var i=this._getConOptionByKey(n),r=i.conversationType,s=i.targetId,o={},a=e[n];for(var u in a){var c=br[u],h=c.keyName,l=c.defaultVal;o[h]=a[u]||pt(l)}for(var d in o.tags){re(t[d])&&(t[d]=[]);var f=Object.assign({},o,{conversationType:r,targetId:s});delete f.tags,t[d].push(f)}}return t},e.prototype.adaptOldStore=function(){try{var e=this.storage.getValues();if(0===Object.keys(e).length)return;for(var t in e){var n=\\\"_\\\"+t;this._localStore.set(n,e[t])}}catch(e){pe.error(\\\"adaptOldStore error: \\\"+e.message)}},e}(),Dr=[j.PRIVATE,j.GROUP,j.SYSTEM,j.PUBLIC_SERVICE,j.APP_PUBLIC_SERVICE],Vr=\\\"conversationChanged\\\",kr=\\\"conTagStatusChanged\\\",xr=function(){function e(e,t,n,i,r){var s=this;this._updatedConversations={},this._conTagStatusChanged=!1,this._eventEmitter=new ge,this._draftMap={},this._appkey=t,this._loginUserId=n,this._store=new Pr(e.runtime,t,n),this._statusManager=new wr(e,t,n),this._statusManager.watch((function(e){var t=e.statusItem,n=e.isLastPull;s.addStatus(t,n)})),this._eventEmitter.on(Vr,(function(e){i(e)})),this._eventEmitter.on(kr,(function(){r()}))}return e.prototype._calcUnreadCount=function(e,t){var n=e.content,i=e.messageType,r=e.sentTime,s=e.isCounted,o=e.messageDirection,a=e.senderUserId,u=o===ye.SEND&&a===this._loginUserId,c=i===Re.RECALL,h=ne(n),l=!1,d={},f=t.lastUnreadTime||0,p=t.unreadMessageCount||0;if(f>r||u)return{hasChanged:l,localConversation:t,updateItems:d};(s&&(t.unreadMessageCount=p+1,t.lastUnreadTime=r,l=!0),c&&h)&&(f>=n.sentTime&&p&&(t.unreadMessageCount=p-1,l=!0));return l&&(d.unreadMessageCount={val:t.unreadMessageCount,time:r}),{hasChanged:l,localConversation:t,updateItems:d}},e.prototype._calcMentionedInfo=function(e,t){var n=e.content,i=(e.messageDirection,e.isMentioned),r=e.sentTime;ye.SEND;var s=ne(n),o=!1,a={};return i&&s&&n.mentionedInfo&&(t.hasMentioned=!0,o=!0,a.hasMentioned={val:!0,time:r},a.mentionedInfo={val:n.mentionedInfo,time:r}),{hasChanged:o,localConversation:t,updateItems:a}},e.prototype._calcMentionedCount=function(e,t){var n=e.content,i=e.messageDirection,r=!1;if(e.isMentioned&&i===ye.RECEIVE&&(null==n?void 0:n.mentionedInfo)){var s=n.mentionedInfo,o=s.type,a=s.userIdList;if(o===we.ALL||(a||[]).includes(this._loginUserId)){r=!0;var u=t.unreadMentionedCount||0;t.unreadMentionedCount=u+1}}return{hasChanged:r,localConversation:t}},e.prototype._setUpdatedConversation=function(e){if(ne(e)){var t=e.conversationType,n=e.targetId,i=e.channelId,r=t+\\\"_\\\"+n,s=this._store.get(t,n,i)||{};this._updatedConversations[r]=Object.assign(s,e)}},e.prototype._setConTagStatusChanged=function(e,t,n,i){var r=(this._store.get(e,t,i)||{}).tags||{};if(Object.keys(r).length===Object.keys(n).length){for(var s in r)if(!n[s]||r[s].isTop!==n[s].isTop)return void(this._conTagStatusChanged=!0)}else this._conTagStatusChanged=!0},e.prototype.addStatus=function(e,t){var n=e.conversationType,i=e.targetId,r=e.updatedTime,s=e.notificationStatus,o=e.isTop,a=e.tags,u=e.channelId,c={},h={};re(s)||(h.notificationStatus={time:r,val:s}),re(o)||(h.isTop={time:r,val:o}),re(a)||(h.tags={time:r,val:a},null==a||a.forEach((function(e){c[e.tagId]={isTop:e.isTop}}))),this._setConTagStatusChanged(n,i,c,u),this._store.set(n,i,{notificationStatus:s,isTop:o,tags:c},u),this._setUpdatedConversation({conversationType:n,targetId:i,updatedItems:h,channelId:u}),t&&this._notifyConversationChanged()},e.prototype._notifyConversationChanged=function(){var e=[];for(var t in this._updatedConversations)e.push(this._updatedConversations[t]);0!==e.length&&(this._eventEmitter.emit(Vr,e),this._updatedConversations={},this._conTagStatusChanged&&(this._eventEmitter.emit(kr),this._conTagStatusChanged=!1))},e.prototype.setConversationCacheByMessage=function(e,t){var n=this,i=e.conversationType,r=e.isPersited,s=e.targetId,o=e.channelId;if(Dr.indexOf(i)>=0){var a=!1,u=this._store.get(i,s,o),c={};if([this._calcUnreadCount,this._calcMentionedInfo,this._calcMentionedCount].forEach((function(t){var i=t.call(n,e,u),r=i.hasChanged,s=i.localConversation,o=i.updateItems;a=a||r,c=O(O({},c),o),u=pt(s)})),a&&this._store.set(i,s,u,o),this._store.updateMentionedData(e),r){var h=this._store.get(i,s,o);h.updatedItems=O({latestMessage:{time:e.sentTime,val:e}},c),h.latestMessage=e;var l=Object.assign(h,{conversationType:i,targetId:s,channelId:o});this._setUpdatedConversation(l)}(a||r)&&this._notifyConversationChanged()}},e.prototype.get=function(e,t,n){return void 0===n&&(n=\\\"\\\"),this._store.get(e,t,n)},e.prototype.getAllUnreadCount=function(e,t,n){var i=this._store.getValue(),r=0;return i.forEach((function(e){var i=e.unreadMessageCount,s=e.notificationStatus,o=e.conversationType;i=i||0,(n||1!==s)&&(t.length>0?t.includes(Number(o))&&(r+=Number(i)):r+=Number(i))})),r},e.prototype.getUnreadCountByTag=function(e,t){var n=this._store.getValueForTag()[e]||[],i=0;return n.forEach((function(e){var n=e.unreadMessageCount,r=e.notificationStatus;(t||1!==r)&&(n=n||0,i+=Number(n))})),i},e.prototype.getUnreadCount=function(e,t,n){return this._store.get(e,t,n).unreadMessageCount||0},e.prototype.clearUnreadCount=function(e,t,n,i){void 0===i&&(i=!0);var r=this._store.get(e,t,n),s=r.unreadMessageCount,o=r.hasMentioned,a={};if(s&&(r.unreadMessageCount=0,a.unreadMessageCount={val:0,time:Date.now()}),o&&(r.hasMentioned=!1,r.unreadMentionedCount=0,r.mentionedInfo=void 0,a.hasMentioned={val:!1,time:Date.now()},a.mentionedInfo={val:void 0,time:Date.now()}),this._store.set(e,t,r,n),i&&0!==Object.keys(a).length){var u=Object.assign(r,{conversationType:e,targetId:t,channelId:n,updatedItems:a});this._setUpdatedConversation(u),this._notifyConversationChanged()}},e.prototype.clearAllUnreadCount=function(){var e=this;this._store.getValue().forEach((function(t){t.unreadMessageCount&&(t.unreadMessageCount=0,e._store.set(t.conversationType,t.targetId,t,t.channelId))}))},e.prototype.startPullConversationStatus=function(e){this._statusManager.pull(e)},e.prototype.setDraft=function(e,t,n,i){var r=e+\\\"_\\\"+t+\\\"_\\\"+i;this._draftMap[r]=n},e.prototype.getDraft=function(e,t,n){var i=e+\\\"_\\\"+t+\\\"_\\\"+n;return this._draftMap[i]},e.prototype.clearDraft=function(e,t,n){var i=e+\\\"_\\\"+t+\\\"_\\\"+n;delete this._draftMap[i]},e.prototype.addTagStatus=function(e,t,n,i){void 0===i&&(i=\\\"\\\");var r=this._store.get(e,t,i).tags;r=Object.assign(r,n),this._store.set(e,t,{tags:r},i)},e.prototype.deleteTagStatus=function(e,t,n,i){void 0===i&&(i=\\\"\\\");var r=this._store.get(e,t,i).tags;n.forEach((function(e){delete r[e]})),this._store.set(e,t,{tags:r},i)},e.prototype.getConversationListForTag=function(){return this._store.getValueForTag()},e.prototype.getBlockConversationList=function(){return this._store.getValue().filter((function(e){return e.notificationStatus===Ne.OPEN})).map((function(e){return{conversationType:e.conversationType,targetId:e.targetId,channelId:e.channelId}}))},e.prototype.getTopConversationList=function(){return(this._store.getValue()||{}).filter((function(e){return e.isTop})).map((function(e){return{conversationType:e.conversationType,targetId:e.targetId,channelId:e.channelId}}))},e.prototype.adaptOldStore=function(){this._store.adaptOldStore()},e.prototype.getUnreadMentionedCount=function(e,t,n){return void 0===e&&(e=\\\"\\\"),this.get(t,n,e).unreadMentionedCount||0},e.prototype.getAllUnreadMentionedCount=function(){var e=this._store.getValue(),t=0;return e.forEach((function(e){var n=e.unreadMentionedCount;n=n||0,t+=Number(n)})),t},e.prototype.getAllConversationState=function(){return this._store.getValue().filter((function(e){return e.unreadMessageCount||e.unreadMentionedCount})).map((function(e){return{conversationType:e.conversationType,targetId:e.targetId,channelId:e.channelId,unreadCount:e.unreadMessageCount||0,unreadMentionedCount:e.unreadMentionedCount||0}}))},e}(),Br=function(){function e(e,t,n,i){this._pullQueue=[],this._isPulling=!1,this._storageTagKey=\\\"tag-\\\"+t+\\\"-\\\"+n,this._storagePullTimeKey=\\\"us-s-\\\"+t+\\\"-\\\"+n,this._storage=T(e.runtime),this._engine=e,this._tagWatcherFunc=i}return e.prototype._updateTag=function(e){var t=e.tags,n={};t.forEach((function(e){n[e.tagId]={tagName:e.tagName,createdTime:e.createdTime}})),this._storage.set(this._storageTagKey,n),this._tagWatcherFunc()},e.prototype.addTag=function(e,t){var n=this._storage.get(this._storageTagKey)||{};e.forEach((function(e){var t,i=(null===(t=n[e.tagId])||void 0===t?void 0:t.createdTime)||e.createdTime||0;n[e.tagId]={tagName:e.tagName,createdTime:i}})),this._storage.set(this._storageTagKey,n),this._storage.set(this._storagePullTimeKey,t)},e.prototype.deleteTag=function(e,t){var n=this._storage.get(this._storageTagKey)||{};e.forEach((function(e){delete n[e]})),this._storage.set(this._storageTagKey,n),this._storage.set(this._storagePullTimeKey,t)},e.prototype.getTagsInfo=function(){return this._storage.get(this._storageTagKey)||{}},e.prototype.getTags=function(){var e=this._storage.get(this._storageTagKey)||{},t=[];for(var n in e)t.push({tagId:n,tagName:e[n].tagName,createdTime:e[n].createdTime,conversationCount:0});return t.sort((function(e,t){return(e.createdTime||0)-(t.createdTime||0)}))},e.prototype.getTagById=function(e){var t=this._storage.get(this._storageTagKey)||{};return t[e]?{tagId:e,tagName:t[e].tagName,createdTime:t[e].createdTime,conversationCount:0}:null},e.prototype._startPull=function(){return w(this,void 0,void 0,(function(){var e,t,n,i,r,s,o,a;return b(this,(function(u){switch(u.label){case 0:return this._isPulling||0===this._pullQueue.length?[2]:(this._isPulling=!0,e=this._pullQueue.splice(0,1)[0],[4,this._engine.pullUserSettings(e)]);case 1:return t=u.sent(),n=t.code,i=t.data,n!==Ee.SUCCESS||re(i)?(this._isPulling=!1,this._startPull()):(s=(r=i).settings,o=r.version,a=s.Tag,re(a)||this._updateTag(a),this._storage.set(this._storagePullTimeKey,o),this._isPulling=!1,this._startPull()),[2]}}))}))},e.prototype.pullUserSettings=function(e){var t=this._storage.get(this._storagePullTimeKey)||0;(e>t||0===e)&&(this._pullQueue.push(t),this._startPull())},e.prototype.getVersion=function(){return this._storage.get(this._storagePullTimeKey)||0},e}(),Fr=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i._miniConnectUrl=\\\"\\\",i._connectType=n.connectionType,i}return N(t,e),t.prototype._formatJSONPUrl=function(e,t,n,i){return e+\\\"/\\\"+(this._runtime.isSupportSocket()&&\\\"websocket\\\"===this._connectType?\\\"navi\\\":\\\"cometnavi\\\")+\\\".js?appId=\\\"+n+\\\"&token=\\\"+encodeURIComponent(t)+\\\"&callBack=\\\"+i+\\\"&v=\\\"+this._apiVersion+\\\"&r=\\\"+Date.now()},t.prototype.getInfo=function(t,n,i){var r;return w(this,void 0,void 0,(function(){var s;return b(this,(function(o){return this._runtime.useNavi||(s=void 0,s=this._runtime.isSupportSocket()&&\\\"websocket\\\"===this._connectType?c.join(\\\",\\\"):h.join(\\\",\\\"),this._miniConnectUrl=(null===(r=this._options.miniCMPProxy)||void 0===r?void 0:r.length)?this._options.miniCMPProxy.join(\\\",\\\"):s||\\\"\\\",n=[]),[2,e.prototype.getInfo.call(this,t,n,i)]}))}))},t.prototype._reqNavi=function(e,t,n){return w(this,void 0,void 0,(function(){var i,r,s,o,a,u,c,h,l;return b(this,(function(d){switch(d.label){case 0:i=\\\"getServerEndpoint\\\",r=0,s=e.length,d.label=1;case 1:return r<s?(o=this._formatJSONPUrl(e[r],n,t,i),pe.debug(\\\"req navi => \\\"+o),[4,this._runtime.httpReq({url:o,timeout:1e4,dataType:\\\"text\\\"})]):[3,4];case 2:if(200!==(a=d.sent()).status)return 403===a.status?pe.error(\\\"request navi error: \\\"+Ee.RC_CONN_USER_OR_PASSWD_ERROR):401===a.status&&pe.error(\\\"request navi error: \\\"+Ee.RC_CONN_APP_BLOCKED_OR_DELETED),[3,3];try{return u=a.data.match(/{[\\\\d\\\\D]+}/),0===(c=u&&u[0]?u[0]:\\\"\\\").indexOf('{\\\\\\\\\\\"code\\\\\\\\\\\":')&&(c=JSON.parse('\\\"'+c+'\\\"')),l=JSON.parse(c),h=/^https/.test(o)?\\\"https\\\":\\\"http\\\",l.protocol=h,this._runtime.useNavi||(l.server=\\\"\\\",l.backupServer=this._miniConnectUrl,l.logSwitch=0),[2,l]}catch(e){pe.error(\\\"parse navi err =>\\\",e)}d.label=3;case 3:return r+=1,[3,1];case 4:return this._runtime.useNavi?[2,null]:[2,l={code:200,protocol:\\\"https\\\",server:\\\"\\\",voipCallInfo:\\\"\\\",kvStorage:0,openHttpDNS:!1,historyMsg:!1,chatroomMsg:!1,uploadServer:\\\"https://upload.qiniup.com\\\",bosAddr:\\\"https://gz.bcebos.com\\\",location:\\\"\\\",monitor:0,joinMChrm:!1,openMp:0,openUS:0,grpMsgLimit:0,isFormatted:0,gifSize:2048,logSwitch:0,logPolicy:\\\"\\\",compDays:0,msgAck:\\\"\\\",activeServer:\\\"\\\",qnAddr:\\\"\\\",extkitSwitch:0,alone:!1,voipServer:\\\"\\\",offlinelogserver:\\\"\\\",backupServer:this._miniConnectUrl}]}}))}))},t}(mr),Kr=function(){function e(e){this._pullQueue=[],this._isPulling=!1,this._pullTime=0,this._engine=e}return e.prototype._startPull=function(){return w(this,void 0,void 0,(function(){var e,t,n,i,r,s,o;return b(this,(function(a){switch(a.label){case 0:return this._isPulling||0===this._pullQueue.length?[2]:(this._isPulling=!0,e=this._pullQueue.splice(0,1)[0],t=e.roomId,n=e.timestamp,(i=this._pullTime)>n?(this._isPulling=!1,this._startPull(),[2]):[4,this._engine.pullRTCRoomEntry(t,i)]);case 1:return r=a.sent(),s=r.code,o=r.data,s===Ee.SUCCESS?(this._isPulling=!1,this._pullTime=o.syncTime||0,this._startPull()):this._startPull(),[2]}}))}))},e.prototype.pullEntry=function(e,t){this._pullQueue.push({roomId:e,timestamp:t}),this._startPull()},e.prototype.reset=function(){this._pullTime=0,this._isPulling=!1},e}(),qr=function(e,t){return[\\\"send_msg\\\",e,t].join(\\\"_\\\")},Yr=function(){function e(e,t){this._runtime=e,this._appkey=t,this._sendMessageMap={},this._userId=\\\"\\\"}return e.prototype.init=function(e){this._userId=e;var t=qr(this._appkey,e);this._sendMessageMap=this._getLocalInfo(t)},e.prototype._getLocalInfo=function(e){var t=this._runtime.localStorage.getItem(e);try{return t?JSON.parse(t):{}}catch(e){return{}}},e.prototype.setMessage=function(e,t){this._sendMessageMap[e]=t;var n=qr(this._appkey,this._userId),i=this._getLocalInfo(n);i[e]=t,this._runtime.localStorage.setItem(n,JSON.stringify(i))},e.prototype.getSendMessageMap=function(){return this._sendMessageMap},e.prototype.removeByUID=function(e){delete this._sendMessageMap[e]},e.prototype.removeByTimestamp=function(e){var t=qr(this._appkey,this._userId),n=this._getLocalInfo(t);Object.keys(n).forEach((function(t){n[t]<e&&delete n[t]})),this._runtime.localStorage.setItem(t,JSON.stringify(n))},e}(),Hr=function(e){var t=\\\"RCDeviceId\\\",n=T(e),i=\\\"\\\",r=n.get(t);return r?i=r:(i=H(),n.set(t,i)),i};(Lr={})[j.PRIVATE]=hr.qryPMsg,Lr[j.GROUP]=hr.qryGMsg,Lr[j.CHATROOM]=hr.qryCHMsg,Lr[j.CUSTOMER_SERVICE]=hr.qryCMsg,Lr[j.SYSTEM]=hr.qrySMsg;var Gr=[hr[hr.recallMsg],hr[hr.ppMsgS],hr[hr.pgMsgS],hr[hr.ppMsgP],hr[hr.pgMsgP],hr[hr.chatMsg],hr[hr.pcMsgP],hr[hr.prMsgS]],jr=function(e,t,n,r,s,o){return{conversationType:e,targetId:t,senderUserId:o,messageDirection:ye.SEND,isCounted:!!n.isCounted,isMentioned:!!n.isMentioned,content:n.content,messageType:n.messageType,isOffLineMessage:!1,isPersited:!!n.isPersited,messageUId:r,sentTime:s,receivedTime:0,disableNotification:!!n.disableNotification,isStatusMessage:!!n.isStatusMessage,canIncludeExpansion:!!n.canIncludeExpansion,expansion:n.canIncludeExpansion?n.expansion:null,receivedStatus:i.UNREAD,pushConfig:n.pushConfig,channelId:n.channelId}},Qr=function(e){function t(t,n,i){var r=e.call(this,t,n,i)||this;return r._customMessageType={},r._reconnectTimer=-1,r._pullOfflineFinished=!1,r._connectedTime=0,r._localConnectedTime=0,r._pullingMsg=!1,r._pullQueue=[],r._chrmsQueue={},r._latestSyncTimestamp=0,r._intervalTimer=-1,r._letterbox=new Tr(t,i.appkey),r._sendMessageStore=new Yr(t,i.appkey),r._chrmEntryHandler=new Sr(r),r}return N(t,e),t.prototype._createNavi=function(){return new Fr(this.runtime,this._options)},t.prototype.getConnectedTime=function(){return this._connectedTime},t.prototype.connect=function(e,t){return w(this,void 0,void 0,(function(){var n,i,r,s,o,a=this;return b(this,(function(u){switch(u.label){case 0:return n=[],this._naviInfo=t,t.server?n.push(t.server):pe.warn(\\\"navi.server is invalid\\\"),(i=t.backupServer)&&i.split(\\\",\\\").forEach((function(e){n.indexOf(e)<0&&n.push(e)})),0===n.length?(pe.error(\\\"navi invaild.\\\",n),[2,Ee.UNKNOWN]):(r=this.runtime.createDataChannel({status:function(i){a._connectionStatusHandler(i,e,n,t.protocol)},signal:this._signalHandler.bind(this)},this._options.connectionType),s=Ze.V3,1===t.openAnti&&(s=Ze.V4),[4,r.connect(this._appkey,e,n,t.protocol,this._apiVer,s)]);case 1:return(o=u.sent())===Ee.SUCCESS?(this._channel=r,this.currentUserId=r.userId,this._connectedTime=r.connectedTime,this._localConnectedTime=Math.floor((Date.now()+r.sendConnectTime)/2),this._watcher.status(Ie.CONNECTED),this._pullOfflineFinished=!1,this._conversationManager=new xr(this,this._appkey,this.currentUserId,this._watcher.conversation,this._watcher.conversationTag),this._conversationManager.startPullConversationStatus(0),this._userSettingManager=new Br(this,this._appkey,this.currentUserId,this._watcher.tag),this._userSettingManager.pullUserSettings(0),this._sendMessageStore.init(this.currentUserId),this._conversationManager.adaptOldStore(),this._rtcKVManager=new Kr(this),this._joinedChrmManager=new Nr(this.runtime,this._appkey,this.currentUserId,t.joinMChrm),this._startSyncInterval()):r.close(),[2,o]}}))}))},t.prototype._connectionStatusHandler=function(e,t,n,i){if(pe.warn(\\\"connection status changed:\\\",e),e!==Ie.CONNECTING)if(e!==Ie.CONNECTED){if(this._channel&&e!==Ie.DISCONNECTED)return e===Ie.BLOCKED||e===Ie.KICKED_OFFLINE_BY_OTHER_CLIENT||e===Ie.DISCONNECT_BY_SERVER?(this.disconnect(),void this._watcher.status(e)):void(e!==Ie.REDIRECT?(this._watcher.status(e),this._try2Reconnect(t,n,i)):this._watcher.status(e));this._watcher.status(e)}else this._watcher.status(e);else this._watcher.status(e)},t.prototype._try2Reconnect=function(e,t,n){return w(this,void 0,void 0,(function(){var i,r=this;return b(this,(function(s){switch(s.label){case 0:return this._channel?(i=Ze.V3,1===this._naviInfo.openAnti&&(i=Ze.V4),[4,this._channel.connect(this._appkey,e,t,n,this._apiVer,i)]):[2];case 1:return s.sent()===Ee.SUCCESS?(this._pullOfflineFinished=!1,this._startSyncInterval(),this._watcher.status(Ie.CONNECTED),this._rejoinChrm(),pe.__insertLogIntoDatabase(),[2]):(this._watcher.status(Ie.WEBSOCKET_UNAVAILABLE),this._reconnectTimer=setTimeout((function(){r._reconnectTimer=-1,r._try2Reconnect(e,t,n)}),5e3),[2])}}))}))},t.prototype._signalHandler=function(e,t){var n=e.syncMsg,i=e.topic;if(n)this._receiveSyncMsg(e,t);else{var r=hr[i];if(r)switch(r){case hr.s_ntf:pe.info(\\\"recv s_ntf -> signal.messageId: \\\"+e.messageId),this._pullMsg(e);break;case hr.s_msg:this._receiveMsg(e);break;case hr.s_cmd:this._receiveStateNotify(e);break;case hr.s_us:this._receiveSettingNotify(e);break;case hr.rtc_ntf:this._receiveRtcKv(e)}else pe.error(\\\"unknown topic:\\\",i)}},t.prototype._receiveStateNotify=function(e){var t,n=null===(t=this._channel)||void 0===t?void 0:t.codec.decodeByPBName(e.data,Pt),i=n.time,r=n.type,s=n.chrmId;switch(r){case 2:this._chrmEntryHandler.pullEntry(s,i);break;case 3:this._conversationManager.startPullConversationStatus(i);break;case 4:this._chrmEntryHandler.reset(s),this._watcher.chatroom({chatroomDestroyed:e.targetId})}},t.prototype._receiveSettingNotify=function(e){var t,n=(null===(t=this._channel)||void 0===t?void 0:t.codec.decodeByPBName(e.data,Mn)).version;this._userSettingManager.pullUserSettings(n)},t.prototype._receiveRtcKv=function(e){var t,n=null===(t=this._channel)||void 0===t?void 0:t.codec.decodeByPBName(e.data,Qn),i=n.time,r=n.type,s=n.roomId;switch(r){case 1:this._rtcKVManager.pullEntry(s,i)}},t.prototype._receiveMessageExpansion=function(e){var t=e.content,n=t.put,i=t.del,r=t.mid;n&&this._watcher.expansion({updatedExpansion:{messageUId:r,expansion:n}}),i&&this._watcher.expansion({deletedExpansion:{messageUId:r,deletedKeys:i}})},t.prototype._receiveSyncMsg=function(e,t){var n;if(Gr.includes(e.topic)){var i=null===(n=this._channel)||void 0===n?void 0:n.codec.decodeByPBName(e.data,Nt,{currentUserId:this.currentUserId,signal:e});i=this._handleMsgProperties(i),t&&(i.sentTime=t.timestamp,i.messageUId=t.messageUId),this._pullingMsg?this._pullQueue.push((null==t?void 0:t.timestamp)||i.sentTime):(t&&this._sendMessageStore.setMessage(t.messageUId,t.timestamp),i.messageType!==Re.EXPANSION_NOTIFY?(i.messageType===Re.SYNC_READ_STATUS&&this._conversationManager.clearUnreadCount(i.conversationType,i.targetId,i.channelId),this._conversationManager.setConversationCacheByMessage(i,!0),this._watcher.batchMessage([i])):this._receiveMessageExpansion(i))}},t.prototype._pullMsg=function(e){if(this._channel){var t=this._channel.codec.decodeByPBName(e.data,Pt),n=t.type,i=t.chrmId,r=t.time;if(pe.info(\\\"s_ntf -> type: \\\"+n+\\\", chrmId: \\\"+i+\\\", time: \\\"+r),2===n){var s=this._chrmsQueue[i];if(!s)return;s.queue.push(r),this._pullChrmMsg(i)}else this._pullQueue.push(r),this._syncMsg()}},t.prototype._startSyncInterval=function(){var e=this;this._stopSyncInterval();this._intervalTimer=setInterval((function(){Date.now()-e._latestSyncTimestamp>=18e4&&e._syncMsg()}),3e4),this._latestSyncTimestamp=Date.now(),this._syncMsg()},t.prototype._stopSyncInterval=function(){-1!==this._intervalTimer&&(clearInterval(this._intervalTimer),this._intervalTimer=-1)},t.prototype._syncMsg=function(){return w(this,void 0,void 0,(function(){var e,t,n,i,r,s,o,a,u,c,h,l,d,f,p=this;return b(this,(function(g){switch(g.label){case 0:return this._pullingMsg?[2]:this._channel?(this._pullingMsg=!0,e=this._letterbox.getOutboxTime(this.currentUserId),t=this._letterbox.getInboxTime(this.currentUserId),pe.info(\\\"pullMsg -> sendboxTime: \\\"+e+\\\", inboxTime: \\\"+t),n=this._channel.codec.encodeSyncMsg({sendboxTime:e,inboxTime:t}),i=new sr(hr[hr.pullMsg],n,this.currentUserId),[4,this._channel.send(i,bt,{connectedTime:this._channel.connectedTime,currentUserId:this.currentUserId})]):(this._pullingMsg=!1,[2]);case 1:return r=g.sent(),s=r.code,o=r.data,this._latestSyncTimestamp=Date.now(),s!==Ee.SUCCESS||!o||re(o.finished)||re(o.list)||re(o.syncTime)?(pe.warn(\\\"pullMsg failed -> code:\\\",s,\\\", data: \\\",o),this._pullingMsg=!1,[2]):(a=o.list,u=o.finished,c=o.syncTime,pe.info(\\\"pullMsg success -> syncTime: \\\"+c+\\\", finished: \\\"+u),h=0,l=[],a.forEach((function(e){if(e.messageDirection===ye.SEND&&(h=Math.max(e.sentTime,h),p._sendMessageStore.getSendMessageMap()[e.messageUId]))return void p._sendMessageStore.removeByUID(e.messageUId);if(e.messageType!==Re.EXPANSION_NOTIFY){if(e.messageType===Re.SYNC_READ_STATUS){if(e.senderUserId!==p.currentUserId)return;p._conversationManager.clearUnreadCount(e.conversationType,e.targetId,e.channelId)}var t=p._handleMsgProperties(e);p._conversationManager.setConversationCacheByMessage(t,!0),l.push(t)}else p._receiveMessageExpansion(e)})),this._watcher.batchMessage(l),this._letterbox.setInboxTime(c,this.currentUserId),this._letterbox.setOutboxTime(h,this.currentUserId),this._sendMessageStore.removeByTimestamp(h),this._pullingMsg=!1,d=this._pullQueue.filter((function(e){return e>c})),this._pullQueue.length=0,(f=this._pullQueue).push.apply(f,d),u&&!this._pullOfflineFinished&&(this._pullOfflineFinished=!0,this._watcher.pullFinished()),(!u||d.length>0)&&this._syncMsg(),[2])}}))}))},t.prototype._receiveMsg=function(e){if(this._channel&&!this._pullingMsg)if(this._pullQueue.length>0)this._syncMsg();else{var t=this._channel.codec.decodeByPBName(e.data,wt,{currentUserId:this.currentUserId,connectedTime:this._channel.connectedTime});(t=this._handleMsgProperties(t)).senderUserId===this.currentUserId&&this._sendMessageStore.setMessage(t.messageUId,t.sentTime),t.isStatusMessage||t.senderUserId===this.currentUserId||this._letterbox.setInboxTime(t.sentTime,this.currentUserId),t.messageType!==Re.EXPANSION_NOTIFY?t.messageType===Re.SYNC_READ_STATUS&&t.senderUserId!==this.currentUserId||(this._conversationManager.setConversationCacheByMessage(t,!0),this._watcher.batchMessage([t])):this._receiveMessageExpansion(t)}},t.prototype._handleMsgProperties=function(e,t){void 0===t&&(t=!1);var n,i=e.messageType,r=e.isCounted,s=e.isPersited,o=e.isStatusMessage,a=i in E,u=i in this._customMessageType;if(n=a?O(O({},E[i]),{isStatusMessage:I.includes(i)}):u?this._customMessageType[i]:{isCounted:!se(r)&&r,isPersited:!se(s)&&s,isStatusMessage:!1},Object.assign(e,n),t&&!re(o)&&(e.isStatusMessage=o),!t){var c=e.content.user;if(c){var h=c.portrait,l=c.portraitUri,d=h||l;d&&(c.portrait=c.portraitUri=d)}}return e},t.prototype.getHistoryMessage=function(e,t,n,i,r,s){return void 0===s&&(s=\\\"\\\"),w(this,void 0,void 0,(function(){var o,a,u,c,h,l,d,f,p;return b(this,(function(g){switch(g.label){case 0:return a=(o=this).currentUserId,u=o._channel,c=ki[e]||Ai,h=1===i&&0===n,u?(l=u.codec.encodeGetHistoryMsg(t,{timestamp:n,count:h?2:i,order:r,channelId:s}),[4,u.send(new sr(c,l,a),Vt,{currentUserId:a,connectedTime:u.connectedTime,conversation:{targetId:t}})]):[3,2];case 1:return d=g.sent(),(f=d.code)!==Ee.SUCCESS?[2,{code:f}]:(p=d.data,h&&2===p.list.length&&(p.hasMore=!0,0===r?p.list.shift():p.list.pop()),[2,{code:f,data:{list:p.list,hasMore:p.hasMore}}]);case 2:return[2,{code:Ee.RC_NET_CHANNEL_INVALID}]}}))}))},t.prototype.reportSDKInfo=function(e){var t=this.currentUserId,n=this._channel;if(n){pe.info(\\\"reportSDKInfo ->\\\",e);var i=n.codec.encodeReportSDKInfo(JSON.stringify(e)),r=new sr(hr[hr.reportsdk],i,t);n.send(r).then((function(e){var t=e.code;t!==Ee.SUCCESS&&pe.warn(\\\"reportSDKInfo failed -> code: \\\"+t)}))}},t.prototype.deleteRemoteMessage=function(e,t,n,i){return w(this,void 0,void 0,(function(){var r,s,o,a,u,c,h;return b(this,(function(l){switch(l.label){case 0:return s=(r=this).currentUserId,(o=r._channel)?(a=o.codec.encodeDeleteMessages(e,t,n,i),u=new sr(Ei,a,s),[4,o.send(u)]):[3,2];case 1:return c=l.sent(),h=c.code,Ee.SUCCESS,[2,h];case 2:return[2,Ee.RC_NET_CHANNEL_INVALID]}}))}))},t.prototype.deleteRemoteMessageByTimestamp=function(e,t,n,i){return w(this,void 0,void 0,(function(){var r,s,o,a,u,c,h,l;return b(this,(function(d){switch(d.label){case 0:return s=(r=this).currentUserId,(o=r._channel)?(a=o.codec.encodeClearMessages(t,n,i),u=xi[e],c=new sr(u,a,s),[4,o.send(c)]):[3,2];case 1:return h=d.sent(),l=h.code,Ee.SUCCESS,[2,l];case 2:return[2,Ee.RC_NET_CHANNEL_INVALID]}}))}))},t.prototype.getConversationList=function(e,t,n,i,r){return void 0===e&&(e=300),w(this,void 0,void 0,(function(){var r,s,o,a,u,c,h,l,d=this;return b(this,(function(f){switch(f.label){case 0:return s=(r=this).currentUserId,o=r._channel,t=t||j.PRIVATE,o?(a=o.codec.encodeOldConversationList({count:e,type:t,startTime:n,order:i}),u=new sr(Oi,a,s),[4,o.send(u,xt,{currentUserId:s,connectedTime:o.connectedTime,afterDecode:function(e){var t=e.conversationType,n=e.targetId,i=e.channelId,r=d._conversationManager.get(t,n,i);return Object.assign(e,r),e}})]):[3,2];case 1:return c=f.sent(),h=c.code,l=c.data,h!==Ee.SUCCESS?[2,{code:h}]:[2,{code:h,data:l}];case 2:return[2,{code:Ee.RC_NET_CHANNEL_INVALID}]}}))}))},t.prototype.removeConversation=function(e,t,n){return w(this,void 0,void 0,(function(){var i,r,s,o,a;return b(this,(function(u){switch(u.label){case 0:return(i=this._channel)?(r=i.codec.encodeRemoveOldConversationList({conversationType:e,channelId:n,targetId:t}),s=new sr(wi,r,t),[4,i.send(s)]):[3,2];case 1:return o=u.sent(),pe.info(\\\"RemoveConversation =>\\\",o),a=o.code,Ee.SUCCESS,[2,a];case 2:return[2,Ee.RC_NET_CHANNEL_INVALID]}}))}))},t.prototype.getConversation=function(e,t,n){return w(this,void 0,void 0,(function(){var i,r,s,o,a,u;return b(this,(function(c){switch(c.label){case 0:return(i=this._conversationManager.get(e,t,n))?[4,this.getHistoryMessage(e,t,0,1,0)]:[2,{code:Ee.CONVER_GET_ERROR}];case 1:return r=c.sent(),s=r.code,o=r.data,s!==Ee.SUCCESS?[2,{code:Ee.CONVER_GET_ERROR}]:(a=(null==o?void 0:o.list[0])||null,u={conversationType:e,targetId:t,channelId:n,unreadMessageCount:i.unreadMessageCount||0,latestMessage:a,notificationStatus:i.notificationStatus||Ne.CLOSE,isTop:i.isTop||!1,lastUnreadTime:i.lastUnreadTime||0,unreadMentionedCount:i.unreadMentionedCount||0},[2,{code:Ee.SUCCESS,data:u}])}}))}))},t.prototype.getAllConversationUnreadCount=function(e,t,n){var i=this._conversationManager.getAllUnreadCount(e,t,n);return Promise.resolve({code:Ee.SUCCESS,data:i})},t.prototype.getConversationUnreadCount=function(e,t,n){var i=this._conversationManager.getUnreadCount(e,t,n);return Promise.resolve({code:Ee.SUCCESS,data:i})},t.prototype.clearConversationUnreadCount=function(e,t,n){return this._conversationManager.clearUnreadCount(e,t,n,!1),Promise.resolve(Ee.SUCCESS)},t.prototype.clearAllUnreadCount=function(){return this._conversationManager.clearAllUnreadCount(),Promise.resolve(Ee.SUCCESS)},t.prototype.getFirstUnreadMessage=function(e,t){throw new Error(\\\"Method not implemented.\\\")},t.prototype.saveConversationMessageDraft=function(e,t,n,i){return this._conversationManager.setDraft(e,t,n,i),Promise.resolve(Ee.SUCCESS)},t.prototype.getConversationMessageDraft=function(e,t,n){var i=this._conversationManager.getDraft(e,t,n);return Promise.resolve({code:Ee.SUCCESS,data:i})},t.prototype.clearConversationMessageDraft=function(e,t,n){return this._conversationManager.clearDraft(e,t,n),Promise.resolve(Ee.SUCCESS)},t.prototype.pullConversationStatus=function(e){return w(this,void 0,void 0,(function(){var t,n,i,r,s,o,a,u;return b(this,(function(c){switch(c.label){case 0:return n=(t=this)._channel,i=t.currentUserId,n?(r=n.codec.encodeGetConversationStatus(e),s=new sr(hr[hr.pullSeAtts],r,i),[4,n.send(s,Un)]):[3,2];case 1:return o=c.sent(),a=o.code,u=o.data,a!==Ee.SUCCESS?[2,{code:a}]:[2,{code:a,data:u}];case 2:return[2,{code:Ee.RC_NET_CHANNEL_INVALID}]}}))}))},t.prototype.batchSetConversationStatus=function(e){return w(this,void 0,void 0,(function(){var t,n,i,r,s,o,a,u,c,h=this;return b(this,(function(l){switch(l.label){case 0:return n=(t=this).currentUserId,(i=t._channel)?(r=i.codec.encodeSetConversationStatus(e),s=new sr(bi,r,n),[4,i.send(s,Vn)]):[3,2];case 1:return o=l.sent(),a=o.code,u=o.data,a===Ee.SUCCESS?(c=u,e.forEach((function(e){h._conversationManager.addStatus(O(O({},e),{updatedTime:c.version}),!0)})),[2,a]):[2,a];case 2:return[2,Ee.RC_NET_CHANNEL_INVALID]}}))}))},t.prototype._joinChrm=function(e,t,n){return w(this,void 0,void 0,(function(){var i,r,s,o,a,u,c;return b(this,(function(h){switch(h.label){case 0:return(i=this._channel)?(r=i.codec.encodeJoinOrQuitChatRoom(),s=new sr(n?Ii:mi,r,e),[4,i.send(s,Qt)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return o=h.sent(),a=o.code,u=o.data,a===Ee.SUCCESS&&(c=u.joinTime,this._chrmsQueue[e]||(this._chrmsQueue[e]={pulling:!1,queue:[],timestamp:0}),this._pullChrmMsg(e,t,c),this._naviInfo.kvStorage&&this._chrmEntryHandler.pullEntry(e,0),this._joinedChrmManager.set(e,t)),[2,a]}}))}))},t.prototype._rejoinChrm=function(){return w(this,void 0,void 0,(function(){var e,t,n,i,r,s;return b(this,(function(o){switch(o.label){case 0:for(n in e=this._joinedChrmManager.get(),t=[],e)t.push(n);i=0,o.label=1;case 1:return i<t.length?(r=t[i],[4,this._joinChrm(r,e[r]||10,!0)]):[3,4];case 2:(s=o.sent())===Ee.SUCCESS?this._watcher.chatroom({rejoinedRoom:{chatroomId:r,count:e[r]}}):this._watcher.chatroom({rejoinedRoom:{chatroomId:r,errorCode:s}}),o.label=3;case 3:return i++,[3,1];case 4:return[2]}}))}))},t.prototype._pullChrmMsg=function(e,t,n){return void 0===t&&(t=10),void 0===n&&(n=0),w(this,void 0,void 0,(function(){var i,r,s,o,a,u,c,h,l,d,f,p;return b(this,(function(g){switch(g.label){case 0:return this._channel?(i=this._chrmsQueue[e],r=i.pulling,s=i.timestamp,r?[2]:(i.pulling=!0,o=this._channel.codec.encodeChrmSyncMsg(s,t),a=new sr(hr[hr.chrmPull],o,e),[4,this._channel.send(a,bt,{connectedTime:this._channel.connectedTime,currentUserId:this.currentUserId})])):[2];case 1:return u=g.sent(),c=u.code,h=u.data,i.pulling=!1,c===Ee.SUCCESS&&h?(l=h.list,d=h.syncTime,f=h.finished,i.timestamp=n?Math.max(d,n):d,i.queue=i.queue.filter((function(e){return e>d})),p=[],l.forEach((function(e){e.sentTime<s||p.push(e)})),this._watcher.batchMessage(p),(!f||i.queue.length>0)&&this._pullChrmMsg(e),[2]):(pe.warn(\\\"pull chatroom msg failed, code:\\\",c,\\\", data:\\\",h),[2])}}))}))},t.prototype.joinChatroom=function(e,t){return w(this,void 0,void 0,(function(){return b(this,(function(n){return[2,this._joinChrm(e,t,!1)]}))}))},t.prototype.joinExistChatroom=function(e,t){return w(this,void 0,void 0,(function(){return b(this,(function(n){return[2,this._joinChrm(e,t,!0)]}))}))},t.prototype.quitChatroom=function(e){return w(this,void 0,void 0,(function(){var t,n,i,r,s;return b(this,(function(o){switch(o.label){case 0:return(t=this._channel)?(n=t.codec.encodeJoinOrQuitChatRoom(),i=new sr(Ti,n,e),[4,t.send(i)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return r=o.sent(),(s=r.code)===Ee.SUCCESS&&(delete this._chrmsQueue[e],this._chrmEntryHandler.reset(e),this._joinedChrmManager.remove(e)),[2,s]}}))}))},t.prototype.getChatroomInfo=function(e,t,n){return w(this,void 0,void 0,(function(){var i,r,s,o,a,u;return b(this,(function(c){switch(c.label){case 0:return(i=this._channel)?(r=i.codec.encodeGetChatRoomInfo(t,n),s=new sr(hr[hr.queryChrmI],r,e),[4,i.send(s,Jt)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return o=c.sent(),a=o.code,u=o.data,a!==Ee.SUCCESS?[2,{code:a}]:[2,{code:a,data:u}]}}))}))},t.prototype.getChatroomHistoryMessages=function(e,t,n,i){return w(this,void 0,void 0,(function(){var r,s,o,a,u,c;return b(this,(function(h){switch(h.label){case 0:return(r=this._channel)?(s=r.codec.encodeGetHistoryMsg(e,{timestamp:t,count:n,order:i}),o=new sr(Li,s,e),[4,r.send(o,Vt,{conversation:{targetId:e}})]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return a=h.sent(),u=a.code,c=a.data,u!==Ee.SUCCESS?[2,{code:u}]:[2,{code:u,data:{list:c.list,hasMore:c.hasMore}}]}}))}))},t.prototype._modifyChatroomKV=function(e,t){return w(this,void 0,void 0,(function(){var n,i,r,s,o,a,u,c;return b(this,(function(h){switch(h.label){case 0:return i=(n=this)._channel,r=n.currentUserId,i?(s=i.codec.encodeModifyChatRoomKV(e,t,r),o=t.type===Ue.UPDATE?Ci:Ri,a=new sr(o,s,e),[4,i.send(a)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return u=h.sent(),(c=u.code)===Ee.SUCCESS?(this._chrmEntryHandler.setLocal(e,{kvEntries:[t],syncTime:(new Date).getTime()},r),[2,c]):[2,c]}}))}))},t.prototype._modifyChatroomKVS=function(e,t){return w(this,void 0,void 0,(function(){var n,i,r,s,o,a,u,c,h,l,d,f;return b(this,(function(p){switch(p.label){case 0:return i=(n=this)._channel,r=n.currentUserId,i?(s=i.codec.encodeModifyChatRoomKVS(e,t,r),o=t.type===Ue.UPDATE?Si:Ni,a=new sr(o,s,e),[4,i.send(a,Cn)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return u=p.sent(),c=u.code,-1!==[Ee.SUCCESS,Ee.CHATROOM_KV_STORE_NOT_ALL_SUCCESS].indexOf(c)&&(l=[],delete(d=Object.assign({},t)).entries,t.entries.forEach((function(e){l.push(Object.assign({},e,d))})),c===Ee.CHATROOM_KV_STORE_NOT_ALL_SUCCESS&&(f=u.data,pe.warn(\\\"设置失败的属性：\\\",f.errorKeys),h=f.errorKeys,f&&Array.isArray(f.errorKeys)&&f.errorKeys.forEach((function(e){var t=l.findIndex((function(t){return e.key===t.key}));-1!==t&&l.splice(t,1)}))),pe.warn(\\\"设置成功的属性：\\\",l),this._chrmEntryHandler.setLocal(e,{kvEntries:l,syncTime:(new Date).getTime()},r)),[2,{code:c,data:h}]}}))}))},t.prototype.setChatroomEntry=function(e,t){return w(this,void 0,void 0,(function(){return b(this,(function(n){return t.type=Ue.UPDATE,t.userId=t.userId||this.currentUserId,[2,this._modifyChatroomKV(e,t)]}))}))},t.prototype.setChatroomEntries=function(e,t){return w(this,void 0,void 0,(function(){return b(this,(function(n){return t.type=Ue.UPDATE,t.userId=t.userId||this.currentUserId,[2,this._modifyChatroomKVS(e,t)]}))}))},t.prototype.forceSetChatroomEntry=function(e,t){return w(this,void 0,void 0,(function(){return b(this,(function(n){return t.type=Ue.UPDATE,t.isOverwrite=!0,t.userId=t.userId||this.currentUserId,[2,this._modifyChatroomKV(e,t)]}))}))},t.prototype.removeChatroomEntry=function(e,t){return w(this,void 0,void 0,(function(){return b(this,(function(n){return t.type=Ue.DELETE,t.userId=t.userId||this.currentUserId,[2,this._modifyChatroomKV(e,t)]}))}))},t.prototype.removeChatroomEntries=function(e,t){return w(this,void 0,void 0,(function(){return b(this,(function(n){return t.type=Ue.DELETE,t.userId=t.userId||this.currentUserId,[2,this._modifyChatroomKVS(e,t)]}))}))},t.prototype.forceRemoveChatroomEntry=function(e,t){return w(this,void 0,void 0,(function(){return b(this,(function(n){return t.type=Ue.DELETE,t.isOverwrite=!0,t.userId=t.userId||this.currentUserId,[2,this._modifyChatroomKV(e,t)]}))}))},t.prototype.getChatroomEntry=function(e,t){return w(this,void 0,void 0,(function(){var n,i,r,s,o,a,u;return b(this,(function(c){switch(c.label){case 0:return(n=this._chrmEntryHandler.getValue(e,t))?[2,Promise.resolve({code:Ee.SUCCESS,data:n})]:[3,1];case 1:return(i=this._channel)?(r=i.codec.encodePullChatRoomKV(0),s=new sr(hr[hr.pullKV],r,e),[4,i.send(s,Tn)]):[2,Promise.reject({code:Ee.RC_NET_CHANNEL_INVALID})];case 2:return o=c.sent(),(a=o.data||{})&&a.kvEntries&&a.kvEntries.length&&void 0!==(u=a.kvEntries.find((function(e){return e.key===t})))?[2,Promise.resolve({code:Ee.SUCCESS,data:null==u?void 0:u.value})]:[2,Promise.resolve({code:Ee.CHATROOM_KEY_NOT_EXIST})]}}))}))},t.prototype.getAllChatroomEntry=function(e){return w(this,void 0,void 0,(function(){var t,n,i,r,s,o,a;return b(this,(function(u){switch(u.label){case 0:return(t=this._chrmEntryHandler.getAll(e))&&Object.keys(t).length?[2,Promise.resolve({code:Ee.SUCCESS,data:t})]:[3,1];case 1:return(n=this._channel)?(i={},r=n.codec.encodePullChatRoomKV(0),s=new sr(hr[hr.pullKV],r,e),[4,n.send(s,Tn)]):[2,Promise.reject({code:Ee.RC_NET_CHANNEL_INVALID})];case 2:return o=u.sent(),(a=o.data||{})&&a.kvEntries&&a.kvEntries.length&&a.kvEntries.forEach((function(e){e.key&&(i[e.key]=e.value||\\\"\\\")})),[2,Promise.resolve({code:Ee.SUCCESS,data:i})]}}))}))},t.prototype.pullChatroomEntry=function(e,t){return w(this,void 0,void 0,(function(){var n,i,r,s,o,a,u,c,h,l;return b(this,(function(d){switch(d.label){case 0:return i=(n=this)._channel,r=n.currentUserId,i?(s=i.codec.encodePullChatRoomKV(t),o=new sr(hr[hr.pullKV],s,e),[4,i.send(o,Tn)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return a=d.sent(),u=a.code,c=a.data,u===Ee.SUCCESS?(pe.info(\\\"Pull success ChrmKV, \\\"+JSON.stringify(a)),this._chrmEntryHandler.setLocal(e,c,r),pe.info(\\\"Save into cache success!\\\"),h=c.kvEntries,l=[],h.length>0&&(h.forEach((function(t){var n=t.key,i=t.value,r=t.type,s=t.timestamp;l.push({key:n,value:i,type:r,timestamp:s,chatroomId:e})})),this._watcher.chatroom({updatedEntries:l})),[2,{code:u,data:c}]):[2,{code:u}]}}))}))},t.prototype.sendMessage=function(e,t,n){return w(this,void 0,void 0,(function(){var i,r,s,o,a,u,c,h,l,d;return b(this,(function(f){switch(f.label){case 0:return this._channel?(n=function(e,t){return\\\"RC:SRSMsg\\\"===e.messageType&&Object.assign(e,{directionalUserIdList:[t]}),e}(n,this.currentUserId),n=this._handleMsgProperties(n,!0),i=!![j.PRIVATE,j.GROUP].includes(e)&&n.isStatusMessage,r=i?function(e){var t;return(t={},t[j.PRIVATE]=hr.ppMsgS,t[j.GROUP]=hr.pgMsgS,t)[e]}(e):function(e){var t;return(t={},t[j.PRIVATE]=hr.ppMsgP,t[j.GROUP]=hr.pgMsgP,t[j.CHATROOM]=hr.chatMsg,t[j.CUSTOMER_SERVICE]=hr.pcMsgP,t[j.RTC_ROOM]=hr.prMsgS,t)[e]}(e)||hr.ppMsgP,i&&(n.isPersited=!1,n.isCounted=!1),s=this._channel.codec.encodeUpMsg({conversationType:e,targetId:t},n),(o=new nr(hr[r],s,t)).setHeaderQos(Qe.AT_LEAST_ONCE),i?(this._channel.sendOnly(o),[2,{code:Ee.SUCCESS,data:jr(e,t,O({},n),\\\"\\\",0,this.currentUserId)}]):(a=Date.now()-this._localConnectedTime+this._connectedTime,u=jr(e,t,O({},n),\\\"\\\",a,this.currentUserId),[4,this._channel.send(o)])):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return c=f.sent(),h=c.code,l=c.data,h!==Ee.SUCCESS?[2,{code:h,data:u}]:(d=l,this._sendMessageStore.setMessage(d.messageUId,d.timestamp),u.sentTime=d.timestamp,u.messageUId=d.messageUId,this._conversationManager.setConversationCacheByMessage(u,!0),[2,{code:Ee.SUCCESS,data:u}])}}))}))},t.prototype.recallMsg=function(e,t,n,i,r){var s;return w(this,void 0,void 0,(function(){var o,a,u,c,h,l,d,f,p,g;return b(this,(function(_){switch(_.label){case 0:return this._channel?(o=r.user,a={content:{conversationType:e,targetId:t,messageUId:n,sentTime:i,user:o},messageType:\\\"RC:RcCmd\\\",disableNotification:null==r?void 0:r.disableNotification,pushConfig:null==r?void 0:r.pushConfig,pushContent:(null===(s=r.pushConfig)||void 0===s?void 0:s.pushContent)||r.pushContent||\\\"\\\",channelId:r.channelId},u=hr[hr.recallMsg],c=this._channel.codec.encodeUpMsg({conversationType:e,targetId:t},a),(h=new nr(u,c,this.currentUserId)).setHeaderQos(Qe.AT_LEAST_ONCE),[4,this._channel.send(h)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return l=_.sent(),d=l.code,f=l.data,d!==Ee.SUCCESS?[2,{code:d}]:(p=f,this._sendMessageStore.setMessage(p.messageUId,p.timestamp),g=jr(e,t,O(O({},a),{isPersited:!0}),p.messageUId,p.timestamp,this.currentUserId),this._conversationManager.setConversationCacheByMessage(g,!0),[2,{code:Ee.SUCCESS,data:g}])}}))}))},t.prototype.sendReadReceiptMessage=function(e,t,n){return w(this,void 0,void 0,(function(){var i,r;return b(this,(function(s){switch(s.label){case 0:return this._channel?(i=this._channel.codec.encodeReadReceipt(t,n),r=new sr(hr[hr.rrMsg],i,e),[4,this._channel.send(r)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return[2,s.sent()]}}))}))},t.prototype.getMessageReader=function(e,t,n){return w(this,void 0,void 0,(function(){var i,r;return b(this,(function(s){switch(s.label){case 0:return this._channel?(i=this._channel.codec.encodeMessageReader(t,n),r=new sr(hr[hr.rrList],i,e),[4,this._channel.send(r,Bn)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return[2,s.sent()]}}))}))},t.prototype.pullUserSettings=function(e){return w(this,void 0,void 0,(function(){var t,n;return b(this,(function(i){return this._channel?(t=this._channel.codec.encodePullUserSetting(e),n=new sr(hr[hr.pullUS],t,this.currentUserId),[2,this._channel.send(n,bn)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}]}))}))},t.prototype.getFileToken=function(e,t,n,i){return w(this,void 0,void 0,(function(){var r,s,o,a,u,c;return b(this,(function(h){switch(h.label){case 0:return this._channel?(r=i&&\\\"uploads\\\"!==i?t||\\\"\\\":it(e,t),s=this._channel.codec.encodeGetFileToken(e,r,n||\\\"\\\",i||\\\"\\\"),o=new sr(hr[hr.qnTkn],s,this.currentUserId),[4,this._channel.send(o,pn)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return a=h.sent(),u=a.code,c=a.data,c=Object.assign(c,{fileName:r}),u===Ee.SUCCESS?[2,{code:u,data:c}]:[2,{code:u}]}}))}))},t.prototype.getFileUrl=function(e,t,n,i){return w(this,void 0,void 0,(function(){var r,s,o,a,u,c,h,l,d;return b(this,(function(f){switch(f.label){case 0:return this._channel?(r=\\\"\\\",s=\\\"\\\",o=\\\"\\\",t===Me.QINIU?(s=gn,o=yn):(s=_n,o=vn),r=t===Me.QINIU?hr[hr.qnUrl]:t===Me.AWS?hr[hr.s3Url]:t===Me.STC?hr[hr.stcUrl]:hr[hr.aliUrl],a=this._channel.codec.encodeGetFileUrl(s,e,n,i),u=new sr(r,a,this.currentUserId),[4,this._channel.send(u,o)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return c=f.sent(),h=c.code,l=c.data,d=l,h===Ee.SUCCESS?[2,{code:h,data:d}]:[2,{code:h}]}}))}))},t.prototype.disconnect=function(){-1!==this._reconnectTimer&&(clearTimeout(this._reconnectTimer),this._reconnectTimer=-1),this._channel&&(this._channel.close(),this._channel=void 0),this._pullQueue.length=0,this._stopSyncInterval()},t.prototype.destroy=function(){throw new Error(\\\"JSEngine's method not implemented.\\\")},t.prototype.registerMessageType=function(e,t,n,i,r){this._customMessageType[e]={isPersited:t,isCounted:n,isStatusMessage:r}},t.prototype.getServerTime=function(){return Date.now()-this._localConnectedTime+this._connectedTime},t.prototype.getCurrentUserId=function(){return this.currentUserId},t.prototype.createTag=function(e){return w(this,void 0,void 0,(function(){var t,n,i,r,s,o,a;return b(this,(function(u){switch(u.label){case 0:return this._channel?(t=this._userSettingManager.getVersion(),n=this._channel.codec.encodeCreateTag([e],t),i=new sr(hr[hr.addSeTag],n,this.currentUserId),[4,this._channel.send(i,On)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return r=u.sent(),s=r.code,o=r.data,s!==Ee.SUCCESS?[2,{code:s}]:(a=o.version,this._userSettingManager.addTag([O(O({},e),{createdTime:a})],a),[2,{code:Ee.SUCCESS,data:o}])}}))}))},t.prototype.removeTag=function(e){return w(this,void 0,void 0,(function(){var t,n,i,r,s,o,a;return b(this,(function(u){switch(u.label){case 0:return this._channel?(t=this._userSettingManager.getVersion(),n=this._channel.codec.encodeRemoveTag([e],t),i=new sr(hr[hr.delSeTag],n,this.currentUserId),[4,this._channel.send(i,On)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return r=u.sent(),s=r.code,o=r.data,s!==Ee.SUCCESS?[2,{code:s}]:(a=o.version,this._userSettingManager.deleteTag([e],a),[2,{code:Ee.SUCCESS}])}}))}))},t.prototype.updateTag=function(e){return w(this,void 0,void 0,(function(){var t,n,i,r,s,o,a;return b(this,(function(u){switch(u.label){case 0:return this._channel?(t=this._userSettingManager.getVersion(),n=this._channel.codec.encodeCreateTag([e],t),i=new sr(hr[hr.addSeTag],n,this.currentUserId),[4,this._channel.send(i,On)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return r=u.sent(),s=r.code,o=r.data,s!==Ee.SUCCESS?[2,{code:s}]:(a=o.version,this._userSettingManager.addTag([e],a),[2,{code:Ee.SUCCESS,data:o}])}}))}))},t.prototype.getTagList=function(){return w(this,void 0,void 0,(function(){var e,t;return b(this,(function(n){return e=this._userSettingManager.getTags(),t=this._conversationManager.getConversationListForTag(),e.forEach((function(e){e.conversationCount=t[e.tagId]?t[e.tagId].length:0})),[2,{code:Ee.SUCCESS,data:e}]}))}))},t.prototype.addTagForConversations=function(e,t){return w(this,void 0,void 0,(function(){var n,i,r,s,o=this;return b(this,(function(a){switch(a.label){case 0:return this._channel?this._userSettingManager.getTagById(e)?(n=this._channel.codec.encodeUpdateConversationTag([{tagId:e}],t),i=new sr(hr[hr.addTag],n,this.currentUserId),[4,this._channel.send(i)]):[2,{code:Ee.TAG_NOT_EXIST}]:[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return(r=a.sent().code)!==Ee.SUCCESS?[2,{code:r}]:((s={})[e]={},t.forEach((function(e){o._conversationManager.addTagStatus(e.conversationType,e.targetId,s,e.channelId)})),[2,{code:Ee.SUCCESS}])}}))}))},t.prototype.removeTagForConversations=function(e,t){return w(this,void 0,void 0,(function(){var n,i,r,s=this;return b(this,(function(o){switch(o.label){case 0:return this._channel?(n=this._channel.codec.encodeUpdateConversationTag([{tagId:e}],t),i=new sr(hr[hr.delTag],n,this.currentUserId),[4,this._channel.send(i)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return(r=o.sent().code)!==Ee.SUCCESS?[2,{code:r}]:(t.forEach((function(t){s._conversationManager.deleteTagStatus(t.conversationType,t.targetId,[e],t.channelId)})),[2,{code:Ee.SUCCESS}])}}))}))},t.prototype.removeTagsForConversation=function(e,t){return w(this,void 0,void 0,(function(){var n,i,r,s,o,a,u;return b(this,(function(c){switch(c.label){case 0:return this._channel?(n=e.conversationType,i=e.targetId,r=e.channelId,s=t.map((function(e){return{tagId:e}})),o=this._channel.codec.encodeUpdateConversationTag(s,[e]),a=new sr(hr[hr.delTag],o,this.currentUserId),[4,this._channel.send(a)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return(u=c.sent().code)!==Ee.SUCCESS?[2,{code:u}]:(this._conversationManager.deleteTagStatus(n,i,t,r),[2,{code:Ee.SUCCESS}])}}))}))},t.prototype.getConversationListByTag=function(e,t,n){return w(this,void 0,void 0,(function(){var i,r,s,o,a,u,c,h,l;return b(this,(function(d){switch(d.label){case 0:return r=(i=this).currentUserId,(s=i._channel)?(o=s.codec.encodeOldConversationList({count:n,type:j.PRIVATE,startTime:t}),a=new sr(Oi,o,r),[4,s.send(a,xt,{currentUserId:r,connectedTime:s.connectedTime})]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return u=d.sent(),c=u.code,h=u.data,l=this._conversationHasTagFilter(e,h),pe.info(\\\"GetConversationListByTag\\\",l),c!==Ee.SUCCESS?[2,{code:c}]:[2,{code:c,data:l}]}}))}))},t.prototype._conversationHasTagFilter=function(e,t){var n=this,i=[],r=[];function s(e,t){return e.latestMessage&&t.latestMessage?e.latestMessage.sentTime-t.latestMessage.sentTime:0}return t.forEach((function(t){var s=t.conversationType,o=t.targetId,a=t.channelId,u=n._conversationManager.get(s,o,a),c=u.hasMentioned,h=u.mentionedInfo,l=u.lastUnreadTime,d=u.notificationStatus,f=u.isTop,p=u.tags,g=u.unreadMessageCount,_=p&&p[e];if(_){var y=O(O({},t),{hasMentioned:c,mentionedInfo:h,lastUnreadTime:l,notificationStatus:d,isTop:f,unreadMessageCount:g});_.isTop?i.push(O(O({},y),{isTopInTag:!0})):r.push(O(O({},y),{isTopInTag:!1}))}})),M(M([],i.sort(s)),r.sort(s))},t.prototype.getUnreadCountByTag=function(e,t){return w(this,void 0,void 0,(function(){var n;return b(this,(function(i){return this._channel?(n=this._conversationManager.getUnreadCountByTag(e,t),[2,{code:Ee.SUCCESS,data:n}]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}]}))}))},t.prototype.setConversationStatusInTag=function(e,t,n){return w(this,void 0,void 0,(function(){var i,r,s,o,a,u,c,h,l,d;return b(this,(function(f){switch(f.label){case 0:return this._channel?(i=t.targetId,r=t.conversationType,s=t.channelId,o=n.isTop,a=[{tagId:e,isTop:o}],(u=this._conversationManager.get(r,i,s)).tags&&Object.hasOwnProperty.call(u.tags,e)?(c=this._channel.codec.encodeUpdateConversationTag(a,[t]),h=new sr(hr[hr.addTag],c,this.currentUserId),[4,this._channel.send(h)]):[2,{code:Ee.NO_TAG_IN_CONVER}]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return(l=f.sent().code)!==Ee.SUCCESS?[2,{code:l}]:((d={})[e]={},o&&(d[e].isTop=!0),this._conversationManager.addTagStatus(r,i,d,s),[2,{code:Ee.SUCCESS}])}}))}))},t.prototype.getTagsForConversation=function(e){var t;return w(this,void 0,void 0,(function(){var n,i,r,s;return b(this,(function(o){if(!this._channel)return[2,{code:Ee.RC_NET_CHANNEL_INVALID}];if(n=this._conversationManager.get(e.conversationType,e.targetId,e.channelId),i=this._userSettingManager.getTagsInfo(),r=[],n.tags)for(s in n.tags)r.push({tagId:s,tagName:null===(t=i[s])||void 0===t?void 0:t.tagName});return[2,{code:Ee.SUCCESS,data:r}]}))}))},t.prototype.getBlockConversationList=function(){var e=this._conversationManager.getBlockConversationList();return Promise.resolve({code:Ee.SUCCESS,data:e})},t.prototype.getTopConversationList=function(){var e=this._conversationManager.getTopConversationList();return Promise.resolve({code:Ee.SUCCESS,data:e})},t.prototype.getUnreadMentionedCount=function(e){var t=this._conversationManager.getUnreadMentionedCount(e.channelId,e.conversationType,e.targetId);return Promise.resolve({code:Ee.SUCCESS,data:t})},t.prototype.getAllUnreadMentionedCount=function(){var e=this._conversationManager.getAllUnreadMentionedCount();return Promise.resolve({code:Ee.SUCCESS,data:e})},t.prototype.getAllConversationState=function(){return Promise.resolve({code:Ee.SUCCESS,data:this._conversationManager.getAllConversationState()})},t.prototype.joinRTCRoom=function(e,t,n,i,r,s){return w(this,void 0,void 0,(function(){var o,a;return b(this,(function(u){return this._channel?(o=this._channel.codec.encodeJoinRTCRoom(t,n,i,r,s),a=new sr(hr[hr.rtcRJoin_data],o,e),[2,this._channel.send(a,Zt)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}]}))}))},t.prototype.quitRTCRoom=function(e){return w(this,void 0,void 0,(function(){var t,n;return b(this,(function(i){switch(i.label){case 0:return this._channel?(t=this._channel.codec.encodeQuitRTCRoom(),n=new sr(hr[hr.rtcRExit],t,e),[4,this._channel.send(n)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return[2,i.sent().code]}}))}))},t.prototype.rtcPing=function(e,t,n){return w(this,void 0,void 0,(function(){var i,r;return b(this,(function(s){switch(s.label){case 0:return this._channel?(i=this._channel.codec.encodeJoinRTCRoom(t,n),r=new sr(hr[hr.rtcPing],i,e),[4,this._channel.send(r)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return[2,s.sent().code]}}))}))},t.prototype.getRTCRoomInfo=function(e){return w(this,void 0,void 0,(function(){var t,n;return b(this,(function(i){return this._channel?(t=this._channel.codec.encodeGetRTCRoomInfo(),n=new sr(hr[hr.rtcRInfo],t,e),[2,this._channel.send(n,hn)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}]}))}))},t.prototype.getRTCUserInfoList=function(e){return w(this,void 0,void 0,(function(){var t,n,i,r,s;return b(this,(function(o){switch(o.label){case 0:return this._channel?(t=this._channel.codec.encodeGetRTCRoomInfo(),n=new sr(hr[hr.rtcUData],t,e),[4,this._channel.send(n,Zt)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return i=o.sent(),r=i.code,s=i.data,[2,{code:r,data:s?{users:s.users}:s}]}}))}))},t.prototype.setRTCUserInfo=function(e,t,n){return w(this,void 0,void 0,(function(){var i,r;return b(this,(function(s){switch(s.label){case 0:return this._channel?(i=this._channel.codec.encodeSetRTCUserInfo(t,n),r=new sr(hr[hr.rtcUPut],i,e),[4,this._channel.send(r)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return[2,s.sent().code]}}))}))},t.prototype.removeRTCUserInfo=function(e,t){return w(this,void 0,void 0,(function(){var n,i;return b(this,(function(r){switch(r.label){case 0:return this._channel?(n=this._channel.codec.encodeRemoveRTCUserInfo(t),i=new nr(hr[hr.rtcUDel],n,e),[4,this._channel.send(i)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return[2,r.sent().code]}}))}))},t.prototype.setRTCData=function(e,t,n,i,r,s){return w(this,void 0,void 0,(function(){var o,a;return b(this,(function(u){switch(u.label){case 0:return this._channel?(o=this._channel.codec.encodeSetRTCData(t,n,i,r,s),a=new nr(hr[hr.rtcSetData],o,e),[4,this._channel.send(a)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return[2,u.sent().code]}}))}))},t.prototype.setRTCTotalRes=function(e,t,n,i,r){return w(this,void 0,void 0,(function(){var s,o;return b(this,(function(a){switch(a.label){case 0:return this._channel?(s=this._channel.codec.encodeUserSetRTCData(t,n,i,r),o=new sr(hr[hr.userSetData],s,e),[4,this._channel.send(o)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return[2,a.sent().code]}}))}))},t.prototype.setRTCCDNUris=function(e,t,n){return w(this,void 0,void 0,(function(){var i,r;return b(this,(function(s){switch(s.label){case 0:return this._channel?(i=this._channel.codec.encodeUserSetRTCCDNUris(t,n),r=new sr(hr[hr.userSetData],i,e),[4,this._channel.send(r)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return[2,s.sent().code]}}))}))},t.prototype.getRTCData=function(e,t,n,i){if(!this._channel)return Promise.resolve({code:Ee.RC_NET_CHANNEL_INVALID});var r=this._channel.codec.encodeGetRTCData(t,n,i),s=new sr(hr[hr.rtcQryData],r,e);return this._channel.send(s,on)},t.prototype.removeRTCData=function(e,t,n,i,r){return w(this,void 0,void 0,(function(){var s,o;return b(this,(function(a){switch(a.label){case 0:return this._channel?(s=this._channel.codec.encodeRemoveRTCData(t,n,i,r),o=new nr(hr[hr.rtcDelData],s,e),[4,this._channel.send(o)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return[2,a.sent().code]}}))}))},t.prototype.setRTCOutData=function(e,t,n,i){throw new Error(\\\"JSEngine's method not implemented.\\\")},t.prototype.getRTCOutData=function(e,t){throw new Error(\\\"JSEngine's method not implemented.\\\")},t.prototype.getRTCToken=function(e,t,n){return w(this,void 0,void 0,(function(){var i,r;return b(this,(function(s){return this._channel?(i=this._channel.codec.encodeJoinRTCRoom(t,n),r=new sr(hr[hr.rtcToken],i,e),[2,this._channel.send(r,sn)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}]}))}))},t.prototype.setRTCState=function(e,t){return w(this,void 0,void 0,(function(){var n,i;return b(this,(function(r){switch(r.label){case 0:return this._channel?(n=this._channel.codec.encodeSetRTCState(t),i=new sr(hr[hr.rtcUserState],n,e),[4,this._channel.send(i)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return[2,r.sent().code]}}))}))},t.prototype.getRTCUserInfo=function(e){return w(this,void 0,void 0,(function(){return b(this,(function(e){throw new Error(\\\"Method not implemented.\\\")}))}))},t.prototype.getRTCUserList=function(e){if(!this._channel)return Promise.resolve({code:Ee.RC_NET_CHANNEL_INVALID});var t=this._channel.codec.encodeGetRTCRoomInfo(),n=new sr(hr[hr.rtcUList],t,e);return this._channel.send(n,Zt)},t.prototype.joinLivingRoomAsAudience=function(e,t,n){return void 0===t&&(t=De.LIVE),w(this,void 0,void 0,(function(){var i,r,s,o,a,u,c,h;return b(this,(function(l){switch(l.label){case 0:return this._channel?(i=this._channel.codec.encodeJoinRTCRoom(t,n),r=new sr(hr[hr.viewerJoinR],i,e),[4,this._channel.send(r,Xn)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return s=l.sent(),o=s.code,a=s.data,o!==Ee.SUCCESS?[2,{code:o}]:(c=(u=a).rtcToken,h=u.entries,[2,{code:o,data:{token:c,kvEntries:h}}])}}))}))},t.prototype.quitLivingRoomAsAudience=function(e){return w(this,void 0,void 0,(function(){var t,n,i;return b(this,(function(r){switch(r.label){case 0:return this._channel?(t=this._channel.codec.encodeQuitRTCRoom(),n=new sr(hr[hr.viewerExitR],t,e),[4,this._channel.send(n)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return i=r.sent().code,this._rtcKVManager.reset(),[2,i]}}))}))},t.prototype.rtcIdentityChange=function(e,t,n){return w(this,void 0,void 0,(function(){var i,r,s,o,a;return b(this,(function(u){switch(u.label){case 0:return this._channel?(i=this._channel.codec.encodeIdentityChangeInfo(t,n),r=new sr(hr[hr.rtcIdentityChange],i,e),[4,this._channel.send(r,Zt)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return s=u.sent(),o=s.code,a=s.data,o!==Ee.SUCCESS?[2,{code:o}]:[2,{code:o,data:a}]}}))}))},t.prototype.pullRTCRoomEntry=function(e,t){return w(this,void 0,void 0,(function(){var t,n,i,r,s,o,a,u,c;return b(this,(function(h){switch(h.label){case 0:return n=(t=this)._channel,i=t.currentUserId,n?(pe.info(\\\"audience in room start pull KV\\\"),r=n.codec.encodePullRTCRoomKV(e,0),s=new sr(hr[hr.rtcPullKv],r,i),[4,n.send(s,Jn)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return o=h.sent(),a=o.code,u=o.data,pe.info(\\\"audience in room end pull KV, code: \\\"+a+\\\", data: \\\"+JSON.stringify(u||{})),a===Ee.SUCCESS?(c=u.kvEntries,this._watcher.onRTCDataChange(c,e),[2,{code:a,data:u}]):[2,{code:a}]}}))}))},t.prototype.getRTCJoinedUserInfo=function(e){return w(this,void 0,void 0,(function(){var t,n,i,r,s,o,a,u;return b(this,(function(c){switch(c.label){case 0:return n=(t=this)._channel,i=t.currentUserId,n?(r=n.codec.encodeQueryUserJoinedInfo(e),s=new sr(hr[hr.rtcQueryJoined],r,i),[4,n.send(s,Zn)]):[2,{code:Ee.RC_NET_CHANNEL_INVALID}];case 1:return o=c.sent(),a=o.code,u=o.data,a===Ee.SUCCESS?[2,{code:a,data:u}]:[2,{code:a}]}}))}))},t.prototype.getDeviceId=function(){return Hr(this.runtime)},t.prototype.requestRoomPK=function(e){return w(this,void 0,void 0,(function(){var t,n,i;return b(this,(function(r){switch(r.label){case 0:return this._channel?(t=this._channel.codec.encodeRequestRoomPK(e),n=new sr(hr[hr.rtcInvite],t,e.roomId),[4,this._channel.send(n)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return i=r.sent().code,this._rtcKVManager.reset(),[2,i]}}))}))},t.prototype.cancelRoomPK=function(e){return w(this,void 0,void 0,(function(){var t,n,i;return b(this,(function(r){switch(r.label){case 0:return this._channel?(t=this._channel.codec.encodeCancelRoomPK(e),n=new sr(hr[hr.rtcCancelInvite],t,e.roomId),[4,this._channel.send(n)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return i=r.sent().code,this._rtcKVManager.reset(),[2,i]}}))}))},t.prototype.responseRoomPK=function(e){return w(this,void 0,void 0,(function(){var t,n,i;return b(this,(function(r){switch(r.label){case 0:return this._channel?(t=this._channel.codec.encodeResponseRoomPK(e),n=new sr(hr[hr.rtcInviteAnswer],t,e.roomId),[4,this._channel.send(n)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return i=r.sent().code,this._rtcKVManager.reset(),[2,i]}}))}))},t.prototype.endRoomPK=function(e){return w(this,void 0,void 0,(function(){var t,n,i;return b(this,(function(r){switch(r.label){case 0:return this._channel?(t=this._channel.codec.encodeEndRoomPK(e),n=new sr(hr[hr.rtcEndInvite],t,e.roomId),[4,this._channel.send(n)]):[2,Ee.RC_NET_CHANNEL_INVALID];case 1:return i=r.sent().code,this._rtcKVManager.reset(),[2,i]}}))}))},t.prototype.callExtra=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return Promise.resolve({code:Ee.EXTRA_METHOD_UNDEFINED})},t.prototype.getConversationListWithAllChannel=function(){throw new Error(\\\"Method not implemented.\\\")},t.prototype.getConversationListWithAllChannelByPage=function(e,t){throw new Error(\\\"Method not implemented.\\\")},t.prototype.clearConversations=function(){throw new Error(\\\"Method not implemented.\\\")},t.prototype.setUserStatusListener=function(e,t){throw new Error(\\\"Method not implemented.\\\")},t.prototype.setUserStatus=function(e){throw new Error(\\\"Method not implemented.\\\")},t.prototype.subscribeUserStatus=function(e){throw new Error(\\\"Method not implemented.\\\")},t.prototype.getUserStatus=function(e){throw new Error(\\\"Method not implemented.\\\")},t.prototype.addToBlacklist=function(e){throw new Error(\\\"Method not implemented.\\\")},t.prototype.removeFromBlacklist=function(e){throw new Error(\\\"Method not implemented.\\\")},t.prototype.getBlacklist=function(){throw new Error(\\\"Method not implemented.\\\")},t.prototype.getBlacklistStatus=function(e){throw new Error(\\\"Method not implemented.\\\")},t.prototype.insertMessage=function(e,t,n){throw new Error(\\\"Method not implemented.\\\")},t.prototype.deleteMessages=function(e){throw new Error(\\\"Method not implemented.\\\")},t.prototype.deleteMessagesByTimestamp=function(e,t,n,i,r){throw new Error(\\\"Method not implemented.\\\")},t.prototype.clearMessages=function(e,t,n){throw new Error(\\\"Method not implemented.\\\")},t.prototype.getMessage=function(e){throw new Error(\\\"Method not implemented.\\\")},t.prototype.setMessageContent=function(e,t,n){throw new Error(\\\"Method not implemented.\\\")},t.prototype.setMessageSearchField=function(e,t,n){throw new Error(\\\"Method not implemented.\\\")},t.prototype.searchConversationByContent=function(e,t,n,i){throw new Error(\\\"Method not implemented.\\\")},t.prototype.searchMessageByContent=function(e,t,n,i,r,s){throw new Error(\\\"Method not implemented.\\\")},t.prototype.getUnreadMentionedMessages=function(e,t){throw new Error(\\\"Method not implemented.\\\")},t.prototype.setMessageSentStatus=function(e,t){throw new Error(\\\"Method not implemented.\\\")},t.prototype.setMessageReceivedStatus=function(e,t){throw new Error(\\\"Method not implemented.\\\")},t.prototype.clearUnreadCountByTimestamp=function(e,t,n,i){throw new Error(\\\"Method not implemented.\\\")},t.prototype.getConversationNotificationStatus=function(e,t,n){var i=this._conversationManager.get(e,t,n);return i?Promise.resolve({code:Ee.SUCCESS,data:i.notificationStatus}):Promise.resolve({code:Ee.CONVER_GET_ERROR})},t.prototype.getRemoteHistoryMessages=function(e,t,n,i,r,s){return this.getHistoryMessage(e,t,n,i,r,s)},t}(vr),Wr=function(){function e(e){this._context=e}return e.prototype.__getContext=function(){return this._context},e.prototype.getNaviInfo=function(){return this._context.getInfoFromCache()},e.prototype.getCoreVersion=function(){return this._context.coreVersion},e.prototype.getAPIVersion=function(){return this._context.apiVersion},e.prototype.getAppkey=function(){return this._context.appkey},e.prototype.getCurrentId=function(){return this._context.getCurrentUserId()},e.prototype.getConnectionStatus=function(){return this._context.getConnectionStatus()},e.prototype.getDeviceId=function(){return this._context.getDeviceId()},e.prototype.sendMessage=function(e,t,n){return this._context.sendMessage(e,t,n)},e.prototype.registerMessageType=function(e,t,n,i){void 0===i&&(i=[]),this._context.registerMessageType(e,t,n,i)},e.prototype.getServerTime=function(){return this._context.getServerTime()},e.prototype.getRTCJoinedUserInfo=function(e){return this._context.getRTCJoinedUserInfo(e)},e}(),Jr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return N(t,e),t.prototype.getNaviInfo=function(){return this._context.getInfoFromCache()},t.prototype.joinRTCRoom=function(e,t,n,i,r,s){return this._context.joinRTCRoom(e,t,n,i,r,s)},t.prototype.quitRTCRoom=function(e){return this._context.quitRTCRoom(e)},t.prototype.rtcPing=function(e,t,n){return this._context.rtcPing(e,t,n)},t.prototype.getRTCRoomInfo=function(e){return this._context.getRTCRoomInfo(e)},t.prototype.getRTCUserInfoList=function(e){return this._context.getRTCUserInfoList(e)},t.prototype.getRTCUserInfo=function(e){return this._context.getRTCUserInfo(e)},t.prototype.setRTCUserInfo=function(e,t,n){return this._context.setRTCUserInfo(e,t,n)},t.prototype.removeRTCUserInfo=function(e,t){return this._context.removeRTCUserInfo(e,t)},t.prototype.setRTCData=function(e,t,n,i,r,s){return this._context.setRTCData(e,t,n,i,r,s)},t.prototype.setRTCTotalRes=function(e,t,n,i,r){return this._context.setRTCTotalRes(e,t,n,i,r)},t.prototype.setRTCCDNUris=function(e,t,n){return this._context.setRTCCDNUris(e,t,n)},t.prototype.getRTCData=function(e,t,n,i){return this._context.getRTCData(e,t,n,i)},t.prototype.removeRTCData=function(e,t,n,i,r){return this._context.removeRTCData(e,t,n,i,r)},t.prototype.setRTCOutData=function(e,t,n,i){return this._context.setRTCOutData(e,t,n,i)},t.prototype.getRTCOutData=function(e,t){return this._context.getRTCOutData(e,t)},t.prototype.getRTCToken=function(e,t,n){return this._context.getRTCToken(e,t,n)},t.prototype.setRTCState=function(e,t){return this._context.setRTCState(e,t)},t.prototype.getRTCUserList=function(e){return this._context.getRTCUserList(e)},t.prototype.joinLivingRoomAsAudience=function(e,t,n){return this._context.joinLivingRoomAsAudience(e,t,n)},t.prototype.quitLivingRoomAsAudience=function(e){return this._context.quitLivingRoomAsAudience(e)},t.prototype.rtcIdentityChange=function(e,t,n){return this._context.rtcIdentityChange(e,t,n)},t.prototype.requestRoomPK=function(e){return this._context.requestRoomPK(e)},t.prototype.cancelRoomPK=function(e){return this._context.cancelRoomPK(e)},t.prototype.responseRoomPK=function(e){return this._context.responseRoomPK(e)},t.prototype.endRoomPK=function(e){return this._context.endRoomPK(e)},t}(Wr),zr=function(){function e(){}return e.compress=function(e){for(var t=this,n={},i=0;i<e.length-1;i++){var r=e.charAt(i)+e.charAt(i+1);n.hasOwnProperty(r)?n[r].push(i):n[r]=[i]}for(var s=[],o=[],a=function(){if(o.length>0){var e=o.join(\\\"\\\");if(o=[],e.length>26){var n=t.numberEncode(e.length),i=String.fromCharCode(t.dataType.NormalExt|n.length);s.push(i+n)}else{var r=String.fromCharCode(t.dataType.Normal|e.length);s.push(r)}s.push(e)}},u=0;u<e.length;){var c=t.indexOf(n,e,u);if(c.length<2)o.push(e.charAt(u++));else if(c.length<4)o.push(e.substr(u,c.length)),u+=c.length;else{var h=t.numberEncode(u-c.offset),l=t.numberEncode(c.length);if(h.length+l.length>=c.length)o.push(e.substr(u,c.length)),u+=c.length;else{a();var d=String.fromCharCode(t.dataType.Compressed|h.length<<2|l.length);s.push(d+h+l),u+=c.length}}}a();var f=t.numberEncode(e.length),p=String.fromCharCode(t.dataType.Tail|f.length);return s.push(p+f),s.join(\\\"\\\")},e.uncompress=function(e){var t=this,n=0,i=\\\"\\\";e:do{var r=e.charCodeAt(n++),s=r&t.dataType.Mark,o=15&r,a=void 0;switch(s){case t.dataType.Compressed:var u=o>>2,c=3&o;if(0===u||0===c)throw new Error(\\\"Data parsing error,at \\\"+n);var h=t.numberDecode(e.substr(n,u)),l=t.numberDecode(e.substr(n+=u,c));if((h=i.length-h)+l>i.length)throw new Error(\\\"Data parsing error,at \\\"+n);n+=c,i+=i.substr(h,l);break;case t.dataType.Tail:if((a=t.numberDecode(e.substr(n,o)))!==i.length)throw console.log(i.length),console.log(a),new Error(\\\"Data parsing error,at \\\"+n);n+=o;break e;case t.dataType.NormalExt:a=t.numberDecode(e.substr(n,o)),i+=e.substr(n+=o,a),n+=a;break;case t.dataType.Normal:i+=e.substr(n,o),n+=o;break;case t.dataType.Mark:if(o>10)throw new Error(\\\"Data parsing error,at \\\"+n);i+=e.substr(n,16+o),n+=16+o;break;default:throw new Error(\\\"Data parsing error,at \\\"+n+\\\" header:\\\"+s)}}while(n<e.length);return i},e.indexOf=function(e,t,n){var i={length:0,offset:-1};if(t.length,n>=t.length-1)return i;var r=e[t.charAt(n)+t.charAt(n+1)];if(r[0]===n)return i;for(var s=t.length-n,o=0,a=r.length;o<a;o++){var u=r[o],c=n-u;if(!(c>this.max)){var h=Math.min(s,c);if(h<=i.length)break;if(!(i.length>2&&t.charAt(u+i.length-1)!==t.charAt(n+i.length-1))){for(var l=2,d=l;d<h&&t.charAt(u+d)===t.charAt(n+d);d++)l++;l>=i.length&&(i.length=l,i.offset=u)}}}return i},e.numberEncode=function(e){var t=this,n=[],i=0;do{i=e%t.scale,n.push(t.chars.charAt(i)),e=(e-i)/t.scale}while(e>0);return n.join(\\\"\\\")},e.numberDecode=function(e){for(var t=0,n=0,i=e.length-1;i>=0;i--){if(-1===(n=this.chars.indexOf(e.charAt(i))))throw new Error('decode number error, data is \\\"'+e+'\\\"');t=t*this.scale+n}return t},e.dataType={Tail:48,Compressed:64,NormalExt:80,Normal:96,Mark:112},e.chars=\\\"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\\\",e.scale=e.chars.length,e.max=238327,e}(),Zr=1,Xr=!1,$r=\\\"undefined\\\"!=typeof location&&\\\"https://\\\"===location.protocol?\\\"https://\\\":\\\"http://\\\",es=function(){function e(e){this.info=e,this.logUrl=\\\"logcollection.ronghub.com\\\",this.level=1,this.itv=30,this.times=5,this.deviceId=\\\"\\\",this.deviceInfo=\\\"\\\",this.logSwitch=0,this.logUrl=e.logPolicy.url||this.logUrl,this.level=e.logPolicy.level||this.level,this.itv=e.logPolicy.itv||this.itv,this.times=e.logPolicy.times||this.times,this.deviceId=Hr(e.runtime),this.logSwitch=e.logSwitch;var t=_t(e.runtime);this.deviceInfo=t.type+\\\"|\\\"+t.version+\\\"|\\\"+fe.sessionId,this.startReport()}return e.init=function(t){return Xr=!0,e._instance||(e._instance=new e(t)),e._instance},e.getInstance=function(){return e._instance},e.prototype.startReport=function(){var e=this;if(this.logSwitch&&Xr){var t=this.itv*Math.pow(2,Zr-1);Zr<this.times&&Zr++,setTimeout((function(){e.reportRealtimeLog()}),1e3*t)}},e.prototype.reportRealtimeLog=function(){var e=this,t=fe.realTimeLogList.filter((function(t){return t.level<=e.level}));if(0!==t.length){var n=zr.compress(t.map((function(e){return e.content})).join(\\\"\\\")),i=\\\"\\\"+$r+this.logUrl+\\\"?version=\\\"+this.info.version+\\\"&appkey=\\\"+this.info.appkey+\\\"&userId=\\\"+this.info.userId+\\\"&deviceId=\\\"+this.deviceId+\\\"&deviceInfo=\\\"+this.deviceInfo+\\\"&platform=Web\\\";this.info.runtime.httpReq({method:\\\"POST\\\",url:i,body:n}).then((function(t){pe.__clearRealTimeLog(),pe.debug(\\\"report real-time log success\\\");var n=t.data;n&&(n=JSON.parse(n),e.itv=n.nextTime,e.level=n.level,e.logSwitch=n.logSwitch,Zr=1),e.startReport()})).catch((function(t){pe.debug(\\\"report real-time log error -> \\\"+t),e.startReport()}))}else this.startReport()},e.prototype.reportFullLog=function(e){return w(this,void 0,void 0,(function(){var t,n,i,r,s,o,a,u,c,h,l=this;return b(this,(function(d){switch(d.label){case 0:return t=e.startTime,n=e.endTime,i=e.platform,r=e.logId,s=e.uri,o=q.getInstance(),pe.debug(\\\"received report log msg, \\\"+i.toLowerCase(),o),\\\"web\\\"===i.toLowerCase()&&o?t>n?(pe.warn(\\\"report error: The start time(\\\"+t+\\\") cannot be greater than the end time(\\\"+t+\\\")\\\"),[2]):[4,pe.__insertLogIntoDatabase()]:[2];case 1:return d.sent(),[4,o.getRangeData(B,\\\"time\\\",t,n)];case 2:return a=(a=d.sent()).filter((function(e){return!e.userId||e.userId===l.info.userId})),u=zr.compress(a.map((function(e){return e.content})).join(\\\"\\\")||\\\"no data\\\"),5e3,c=1,(h=function(){if(!(c>3)&&Xr){var e=s||l.logUrl,t=\\\"\\\"+$r+e+\\\"?version=\\\"+l.info.version+\\\"&appkey=\\\"+l.info.appkey+\\\"&userId=\\\"+l.info.userId+\\\"&logId=\\\"+r+\\\"&deviceId=\\\"+l.deviceId+\\\"&deviceInfo=\\\"+l.deviceInfo+\\\"&platform=Web\\\",n=5e3*(c-1);c++,setTimeout((function(){Xr&&l.info.runtime.httpReq({url:t,method:\\\"POST\\\",body:u}).then((function(){pe.debug(\\\"report full log success!\\\")})).catch((function(e){h(),pe.warn(\\\"report full log error -> \\\"+e)}))}),n)}})(),[2]}}))}))},e.prototype.distroy=function(){Zr=1,Xr=!1},e}();function ts(e){return Object.assign({},e)}var ns,is=function(){function e(e,t){var n;this._runtime=e,this._token=\\\"\\\",this._pluginContextQueue=[],this._pluginInstanseMap={},this.coreVersion=\\\"5.1.2\\\",this._versionInfo={},this._typingInfo={},this._isInternalConnected=!1,this._connectionStatus=Ie.DISCONNECTED,this._canRedirectConnect=!1,this._watcher={message:void 0,batchMessage:void 0,conversationState:void 0,chatroomState:void 0,connectionState:void 0,rtcInnerWatcher:void 0,expansion:void 0,tag:void 0,conversationTagChanged:void 0,pullFinished:void 0,onConnecting:void 0,onConnected:void 0,onDisconnect:void 0,onSuspend:void 0,readReceiptReceived:void 0,messageReceiptRequest:void 0,messageReceiptResponse:void 0,typingState:void 0,messageBlocked:void 0},this._typingInternalTimer=-1,this._typingExpireTime=2e3,this._typingChangedList=[],this.getChatRoomHistoryMessages=this.getChatroomHistoryMessages,this._options=Object.assign({},t),this.appkey=this._options.appkey,this.apiVersion=this._options.apiVersion,this._options.typingExpireTime&&(this._options.typingExpireTime<2e3?this._typingExpireTime=2e3:this._options.typingExpireTime>6e3?this._typingExpireTime=6e3:this._typingExpireTime=this._options.typingExpireTime),this._options.navigators=this._options.navigators.filter((function(e){return/^https?:\\\\/\\\\//.test(e)})),this._options.navigators=this._options.navigators.map((function(e){return e.replace(/\\\\/$/g,\\\"\\\")})),0===this._options.navigators.length&&(n=this._options.navigators).push.apply(n,u);var i={status:this._connectionStatusListener.bind(this),batchMessage:this._batchMessageReceiver.bind(this),chatroom:this._chatroomInfoListener.bind(this),conversation:this._conversationInfoListener.bind(this),expansion:this._expansionInfoListener.bind(this),tag:this._tagListener.bind(this),conversationTag:this._conversationTagListener.bind(this),onRTCDataChange:this._rtcDataChange.bind(this),pullFinished:this._pullFinishedListener.bind(this)};this._engine=gt()?new RCCppEngine(e,i,this._options):new Qr(e,i,this._options)}return e.init=function(t,n){return pe.setLogLevel(n.logLevel),pe.setLogStdout(n.logStdout),(n.indexDBSwitch||re(n.indexDBSwitch))&&q.init(),pe.debug(\\\"APIContext.init =>\\\",n.appkey,n.navigators),this._context?(pe.error(\\\"Repeat initialize!\\\"),this._context):(pe.warn(\\\"RCEngine Commit:\\\",\\\"efd1b7f44d2517ab9a2fab003c298184d1f06fca\\\"),this._context=new e(t,n),pe.__insertLogIntoDatabase(),this._context)},e.destroy=function(){this._context&&(this._context._destroy(),this._context=void 0)},e.prototype.install=function(e,t){if(this._pluginInstanseMap[e.tag])return pe.warn(\\\"Repeat install plugin: \\\"+e.tag),this._pluginInstanseMap[e.tag];var n=\\\"RCRTC\\\"===e.tag?new Jr(this):new Wr(this),i=null;try{if(!e.verify(this._runtime))return null;i=e.setup(n,this._runtime,t)}catch(e){pe.error(\\\"install plugin error!\\\\n\\\",e)}return[\\\"RCRTC\\\",\\\"RCCall\\\"].includes(e.tag)&&e.version&&e.name&&(this._versionInfo[e.name]=e.version),i&&this._pluginContextQueue.push(n),i&&(this._pluginInstanseMap[e.tag]=i),i},e.prototype._handleRedirect=function(){return w(this,void 0,void 0,(function(){var e,t=this;return b(this,(function(n){switch(n.label){case 0:return pe.debug(\\\"_handleRedirct\\\",this._token),[4,this.connect(this._token,!0)];case 1:return(e=n.sent().code)!==Ee.SUCCESS&&this._canRedirectConnect&&(this._handleSuspend(e),setTimeout((function(){t._handleRedirect()}),5e3)),[2]}}))}))},e.prototype._connectionStatusListener=function(e){var t;return w(this,void 0,void 0,(function(){return b(this,(function(n){return e===Ie.REDIRECT?(this._canRedirectConnect=!0,this._handleSuspend(e),this._handleRedirect()):e===Ie.BLOCKED||e===Ie.KICKED_OFFLINE_BY_OTHER_CLIENT||e===Ie.DISCONNECT_BY_SERVER?(this._canRedirectConnect=!1,this._handleDisconnect(e)):e===Ie.CONNECTING?this._handleConnecting():e===Ie.CONNECTED?this._handleConnected():e===Ie.DISCONNECTED?this._handleDisconnect(e):e===Ie.NETWORK_UNAVAILABLE&&this._handleSuspend(e),this._connectionStatus=e,(null===(t=this._watcher.rtcInnerWatcher)||void 0===t?void 0:t.status)&&this._watcher.rtcInnerWatcher.status(e),this._pluginContextQueue.forEach((function(t){t.onconnectionstatechange&&t.onconnectionstatechange(e)})),this._watcher.connectionState&&this._watcher.connectionState(e),[2]}))}))},e.prototype._handleConnecting=function(){this._watcher.onConnecting&&this._watcher.onConnecting()},e.prototype._handleConnected=function(){this._watcher.onConnected&&this._watcher.onConnected()},e.prototype._handleDisconnect=function(e){this._watcher.onDisconnect&&this._watcher.onDisconnect(e)},e.prototype._handleSuspend=function(e){this._watcher.onSuspend&&this._watcher.onSuspend(e)},e.prototype._messageReceiver=function(e,t,n){var i,r,s;if((e.conversationType===j.RTC_ROOM||Object.prototype.hasOwnProperty.call(qe,e.messageType))&&this._watcher.rtcInnerWatcher&&this._watcher.rtcInnerWatcher.message)this._watcher.rtcInnerWatcher.message(ts(e));else if(-1===[\\\"RC:ChrmJoinNtf\\\",\\\"RC:ChrmQuitNtf\\\"].indexOf(e.messageType)||\\\"function\\\"!=typeof this._watcher.chatroomState){if(\\\"RC:ChrmMemChange\\\"!==e.messageType){if(e.messageType!==Re.TYPING_STATUS||(this._addTypingInfo(ts(e)),!this._watcher.typingState))if(e.messageType!==Re.LOG_COMMAND||\\\"rongcloudsystem\\\"!==e.senderUserId)if(e.messageType!==Re.INTERCEPT){if(!this._pluginContextQueue.some((function(t){if(!t.onmessage)return!1;try{return t.onmessage(ts(e))}catch(e){return pe.error(\\\"plugin error =>\\\",e),!1}})))if(this._watcher.message&&this._watcher.message(ts(e),t,n),\\\"RC:ReadNtf\\\"!==e.messageType)if(\\\"RC:RRReqMsg\\\"!==e.messageType){if(\\\"RC:RRRspMsg\\\"!==e.messageType)return e;var o=null===(s=e.content)||void 0===s?void 0:s.receiptMessageDic;o&&Array.isArray(o[this._engine.currentUserId])&&\\\"function\\\"==typeof this._watcher.messageReceiptResponse&&this._watcher.messageReceiptResponse({conversationType:e.conversationType,targetId:e.targetId,channelId:e.channelId},e.senderUserId,o[this._engine.currentUserId])}else\\\"function\\\"==typeof this._watcher.messageReceiptRequest&&this._watcher.messageReceiptRequest({conversationType:e.conversationType,targetId:e.targetId,channelId:e.channelId},e.content.messageUId,e.senderUserId);else\\\"function\\\"==typeof this._watcher.readReceiptReceived&&this._watcher.readReceiptReceived({conversationType:e.conversationType,targetId:e.targetId,channelId:e.channelId},e.content.messageUId,e.content.lastMessageSendTime)}else this._MessageBlockedListener({conversationType:e.conversationType,targetId:e.targetId,channelId:e.channelId||\\\"\\\",blockType:e.content.interceptType,blockedMessageUId:e.content.msgUId});else{var a=e.content,u=a.startTime,c=a.endTime,h=a.platform,l=a.logId,d=a.uri,f=a.packageName,p={startTime:parseInt(u),endTime:parseInt(c),platform:h,logId:l,uri:d,packageName:f};null===(r=es.getInstance())||void 0===r||r.reportFullLog(p)}}else if(\\\"function\\\"==typeof this._watcher.chatroomState){var g={};Array.isArray(e.content.userList)&&e.content.userList.forEach((function(e){g[e.userId]=e.status})),this._watcher.chatroomState({userChange:{users:g,chatroomId:e.targetId}})}}else this._watcher.chatroomState({userChange:{users:(i={},i[e.senderUserId]=\\\"RC:ChrmQuitNtf\\\"===e.messageType?Pe.QUIT:Pe.JOIN,i),chatroomId:e.targetId}})},e.prototype._batchMessageReceiver=function(e,t,n){var i=this,r=[];e.forEach((function(e){var s=i._messageReceiver(e,t,n);s&&r.push(s)})),r.length&&this._watcher.batchMessage&&this._watcher.batchMessage(r)},e.prototype._chatroomInfoListener=function(e){this._watcher.chatroomState&&this._watcher.chatroomState(e)},e.prototype._conversationInfoListener=function(e){this._watcher.conversationState&&this._watcher.conversationState(e)},e.prototype._expansionInfoListener=function(e){this._watcher.expansion&&this._watcher.expansion(e)},e.prototype._tagListener=function(){this._watcher.tag&&this._watcher.tag()},e.prototype._conversationTagListener=function(){this._watcher.conversationTagChanged&&this._watcher.conversationTagChanged()},e.prototype._typingStatusListener=function(e){this._watcher.typingState&&this._watcher.typingState(e)},e.prototype._pullFinishedListener=function(){this._watcher.pullFinished&&this._watcher.pullFinished()},e.prototype._MessageBlockedListener=function(e){this._watcher.messageBlocked&&this._watcher.messageBlocked(e)},e.prototype._rtcDataChange=function(e,t){this._pluginContextQueue.forEach((function(n){n.onrtcdatachange&&n.onrtcdatachange(e,t)}))},e.prototype.assignWatcher=function(e){var t=this;Object.keys(this._watcher).forEach((function(n){if(Object.prototype.hasOwnProperty.call(e,n)){var i=e[n];t._watcher[n]=ie(i)||ne(i)?i:void 0}}))},e.prototype.resetWatcher=function(){var e=this;Object.keys(this._watcher).forEach((function(t){e._watcher[t]=void 0}))},e.prototype._addTypingInfo=function(e){var t=e.senderUserId,n=e.conversationType,i=e.targetId,r=e.content,s=e.channelId,o=r.typingContentType,a=n+\\\"#\\\"+i+\\\"#\\\"+(s||\\\"\\\");this._typingInfo[a]||(this._typingInfo[a]=[]);var u=this._typingInfo[a].findIndex((function(e){return e.userId===t}));u>=0&&this._typingInfo[a][u].messageType===o?this._typingInfo[a][u].timestamp=Date.now():(u>=0&&this._typingInfo[a].splice(u,1),this._typingInfo[a].push({userId:t,messageType:o,timestamp:Date.now()}),this._typingChangedList.includes(a)||this._typingChangedList.push(a),this._startCheckTypingInfo())},e.prototype._startCheckTypingInfo=function(){var e=this;-1===this._typingInternalTimer&&0!==Object.keys(this._typingInfo).length&&(this._typingInternalTimer=setInterval((function(){for(var t in e._typingInfo){var n=e._typingInfo[t].length;e._typingInfo[t]=e._typingInfo[t].filter((function(t){return Date.now()-t.timestamp<e._typingExpireTime})),e._typingInfo[t].length===n||e._typingChangedList.includes(t)||e._typingChangedList.push(t),0===e._typingInfo[t].length&&delete e._typingInfo[t]}if(e._typingChangedList.length>0){var i=e._typingChangedList.map((function(t){return{conversationType:Number(t.split(\\\"#\\\")[0]),targetId:t.split(\\\"#\\\")[1],channelId:t.split(\\\"#\\\")[2],list:e._typingInfo[t]||[]}}));e._typingStatusListener(i),e._typingChangedList=[]}0===Object.keys(e._typingInfo).length&&(clearInterval(e._typingInternalTimer),e._typingInternalTimer=-1)}),500))},e.prototype.getConnectedTime=function(){return this._engine.getConnectedTime()},e.prototype.getServerTime=function(){return this._engine.getServerTime()},e.prototype.getDeviceId=function(){return this._engine.getDeviceId()},e.prototype.getCurrentUserId=function(){return this._engine.currentUserId},e.prototype.getConnectionStatus=function(){return this._connectionStatus},Object.defineProperty(e.prototype,\\\"token\\\",{get:function(){return this._token},enumerable:!1,configurable:!0}),e.prototype.connect=function(e,t,n){return void 0===t&&(t=!1),w(this,void 0,void 0,(function(){var i,r,s,o,a,u;return b(this,(function(c){switch(c.label){case 0:return this._connectionStatus===Ie.CONNECTED?[2,{code:Ee.SUCCESS,userId:this._engine.currentUserId}]:this._connectionStatus===Ie.CONNECTING?[2,{code:Ee.BIZ_ERROR_CONNECTING}]:\\\"string\\\"!=typeof e||0===e.length?[2,{code:Ee.RC_CONN_USER_OR_PASSWD_ERROR}]:(this._token=e,i=e.split(\\\"@\\\"),r=i[1],s=r?r.split(\\\";\\\").map((function(e){return/^https?:/.test(e)?e:\\\"https://\\\"+e})):[],[4,this._engine.navi.getInfo(this._getTokenWithoutNavi(),s,t,this._options.checkCA)]);case 1:return(o=c.sent())?1===(null==o?void 0:o.type)?[2,{code:Ee.PACKAGE_ENVIRONMENT_ERROR}]:(a=je.getInfo(),[4,this._engine.connect(this._getTokenWithoutNavi(),o,n)]):[2,{code:Ee.RC_NAVI_RESOURCE_ERROR}];case 2:return u=c.sent(),pe.__insertLogIntoDatabase(),u!==Te.REDIRECT?[3,4]:(this._connectionStatus=Ie.REDIRECT,[4,this.connect(e,!0)]);case 3:return[2,c.sent()];case 4:return u===Ee.SUCCESS&&(pe.info(\\\"connect success, userId: \\\"+this._engine.currentUserId),1!==(null==o?void 0:o.type)&&this._engine.reportSDKInfo&&this._engine.reportSDKInfo(a),es.init({runtime:this._runtime,logSwitch:(null==o?void 0:o.logSwitch)||0,logPolicy:JSON.parse((null==o?void 0:o.logPolicy)||\\\"{}\\\"),appkey:this.appkey,version:this.apiVersion,userId:this._engine.currentUserId}),fe.init(this._engine.currentUserId),this._isInternalConnected=!0),u!==Ee.SUCCESS||gt()||1===o.openUS&&this._pullUserSettings(),u!==Ee.SUCCESS&&(this._connectionStatus=Ie.CONNECTION_CLOSED),[2,{code:u,userId:this._engine.currentUserId}]}}))}))},e.prototype._pullUserSettings=function(){return w(this,void 0,void 0,(function(){return b(this,(function(e){return[2]}))}))},e.prototype.disconnect=function(){var e;return this._isInternalConnected=!1,clearInterval(this._typingInternalTimer),this._typingInternalTimer=-1,this._typingInfo={},null===(e=es.getInstance())||void 0===e||e.distroy(),pe.__insertLogIntoDatabase(),fe.reset(),this._engine.disconnect(),this._pluginContextQueue.forEach((function(e){if(e.ondisconnect)try{e.ondisconnect()}catch(e){pe.error(\\\"plugin error =>\\\",e)}})),Promise.resolve()},e.prototype.reconnect=function(e){return this._isInternalConnected?Promise.resolve({code:Ee.CAN_NOT_RECONNECT}):this.connect(this._getTokenWithoutNavi(),!1,e)},e.prototype._getTokenWithoutNavi=function(){return this._token.replace(/@.+$/,\\\"@\\\")},e.prototype.getInfoFromCache=function(){return this._engine.navi.getInfoFromCache(this._getTokenWithoutNavi())},e.prototype.registerMessageType=function(e,t,n,i,r){void 0===i&&(i=[]),void 0===r&&(r=!1),this._engine.registerMessageType(e,t,n,i,r)},e.prototype.sendMessage=function(e,t,n,i){var r=this.getInfoFromCache();if(1===((null==r?void 0:r.grpRRVer)||0)&&n.messageType===Re.READ_RECEIPT_RESPONSE)return Promise.resolve({code:Ee.READ_RECEIPT_ERROR});var s=JSON.stringify(n.content);return V(s)>131072?Promise.resolve({code:Ee.RC_MSG_CONTENT_EXCEED_LIMIT}):this._engine.sendMessage(e,t,n,i)},e.prototype.sendExpansionMessage=function(e){return w(this,void 0,void 0,(function(){var t,n,i,r,s,o,a,u,c,h,l,d,f,p;return b(this,(function(g){switch(g.label){case 0:if(t=e.channelId,n=e.conversationType,i=e.targetId,r=e.messageUId,s=e.keys,o=e.expansion,a=e.removeAll,!e.canIncludeExpansion)return[2,{code:Ee.MESSAGE_KV_NOT_SUPPORT}];if(u=!1,c=!1,h=!1,ne(o))for(d in l=Object.keys(o).length,u=l>20,o)if(f=o[d],c=J(d)&&!/^[A-Za-z0-9_=+-]+$/.test(d),(h=d.length>32||f.length>4096)||c)break;return u||h?[2,{code:Ee.EXPANSION_LIMIT_EXCEET}]:c?[2,{code:Ee.BIZ_ERROR_INVALID_PARAMETER}]:(p={mid:r},o&&(p.put=o),s&&(p.del=s),a&&(p.removeAll=1),[4,this._engine.sendMessage(n,i,{content:p,messageType:Re.EXPANSION_NOTIFY,channelId:t})]);case 1:return[2,{code:g.sent().code}]}}))}))},e.prototype.sendReadReceiptMessage=function(e,t,n){return w(this,void 0,void 0,(function(){var i;return b(this,(function(r){return i=this.getInfoFromCache(),0===((null==i?void 0:i.grpRRVer)||0)?[2,{code:Ee.READ_RECEIPT_ERROR,data:\\\"The read receipt switch is not on, please call the sendMessage method!\\\"}]:[2,this._engine.sendReadReceiptMessage(e,t,n)]}))}))},e.prototype.getMessageReader=function(e,t,n){return w(this,void 0,void 0,(function(){var i;return b(this,(function(r){return i=this.getInfoFromCache(),0===((null==i?void 0:i.grpRRVer)||0)?[2,{code:Ee.READ_RECEIPT_ERROR}]:[2,this._engine.getMessageReader(e,t,n)]}))}))},e.prototype._destroy=function(){var e;this._isInternalConnected=!1,this._watcher={batchMessage:void 0,message:void 0,conversationState:void 0,chatroomState:void 0,connectionState:void 0,rtcInnerWatcher:void 0,expansion:void 0,tag:void 0,conversationTagChanged:void 0,typingState:void 0,pullFinished:void 0,onConnecting:void 0,onConnected:void 0,onDisconnect:void 0,onSuspend:void 0},this._engine.disconnect(),this._pluginContextQueue.forEach((function(e){if(e.ondestroy)try{e.ondestroy()}catch(e){pe.error(\\\"plugin error =>\\\",e)}})),this._pluginContextQueue.length=0,this._pluginInstanseMap={},null===(e=es.getInstance())||void 0===e||e.distroy(),fe.reset()},e.prototype.getHistoryMessage=function(e,t,n,i,r,s,o){return void 0===n&&(n=0),void 0===i&&(i=20),void 0===r&&(r=0),void 0===s&&(s=\\\"\\\"),void 0===o&&(o=\\\"\\\"),this._engine.getHistoryMessage(e,t,n,i,r,s,o||\\\"\\\")},e.prototype.getConversationList=function(e,t,n,i,r){return void 0===e&&(e=300),void 0===r&&(r=\\\"\\\"),this._engine.getConversationList(e,t,n,i,r)},e.prototype.getConversation=function(e,t,n){return this._engine.getConversation(e,t,n)},e.prototype.removeConversation=function(e,t,n){return void 0===n&&(n=\\\"\\\"),this._engine.removeConversation(e,t,n)},e.prototype.clearUnreadCount=function(e,t,n){return void 0===n&&(n=\\\"\\\"),this._engine.clearConversationUnreadCount(e,t,n)},e.prototype.clearAllUnreadCount=function(){return this._engine.clearAllUnreadCount()},e.prototype.getUnreadCount=function(e,t,n){return void 0===n&&(n=\\\"\\\"),this._engine.getConversationUnreadCount(e,t,n)},e.prototype.getTotalUnreadCount=function(e,t,n){return this._engine.getAllConversationUnreadCount(e,t&&t.length>0?t:[j.PRIVATE,j.GROUP,j.SYSTEM,j.PUBLIC_SERVICE],!!n)},e.prototype.getFirstUnreadMessage=function(e,t,n){return void 0===n&&(n=\\\"\\\"),this._engine.getFirstUnreadMessage(e,t,n)},e.prototype.setConversationStatus=function(e,t,n,i,r){void 0===r&&(r=\\\"\\\");var s=[{conversationType:e,targetId:t,isTop:n,notificationStatus:i,channelId:r}];return this._engine.batchSetConversationStatus(s)},e.prototype.saveConversationMessageDraft=function(e,t,n,i){return void 0===i&&(i=\\\"\\\"),this._engine.saveConversationMessageDraft(e,t,n,i)},e.prototype.getConversationMessageDraft=function(e,t,n){return void 0===n&&(n=\\\"\\\"),this._engine.getConversationMessageDraft(e,t,n)},e.prototype.clearConversationMessageDraft=function(e,t,n){return void 0===n&&(n=\\\"\\\"),this._engine.clearConversationMessageDraft(e,t,n)},e.prototype.recallMessage=function(e,t,n,i,r){return this._engine.recallMsg(e,t,n,i,r)},e.prototype.deleteRemoteMessage=function(e,t,n,i){return void 0===i&&(i=\\\"\\\"),this._engine.deleteRemoteMessage(e,t,n,i)},e.prototype.deleteRemoteMessageByTimestamp=function(e,t,n,i){return void 0===i&&(i=\\\"\\\"),this._engine.deleteRemoteMessageByTimestamp(e,t,n,i)},e.prototype.joinChatroom=function(e,t){return void 0===t&&(t=10),this._engine.joinChatroom(e,t)},e.prototype.joinExistChatroom=function(e,t){return void 0===t&&(t=10),this._engine.joinExistChatroom(e,t)},e.prototype.quitChatroom=function(e){return this._engine.quitChatroom(e)},e.prototype.getChatroomInfo=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=0),this._engine.getChatroomInfo(e,t,n)},e.prototype.setChatroomEntry=function(e,t){var n=t.key,i=t.value;return at(n)&&ut(i)?this._engine.setChatroomEntry(e,t):Promise.resolve(Ee.BIZ_ERROR_INVALID_PARAMETER)},e.prototype.setChatroomEntries=function(e,t){for(var n=0;n<t.entries.length;n++){var i=t.entries[n],r=i.key,s=i.value;if(!at(r)||!ut(s))return Promise.resolve({code:Ee.BIZ_ERROR_INVALID_PARAMETER})}return this._engine.setChatroomEntries(e,t)},e.prototype.forceSetChatroomEntry=function(e,t){var n=t.key,i=t.value;return at(n)&&ut(i)?this._engine.forceSetChatroomEntry(e,t):Promise.resolve(Ee.BIZ_ERROR_INVALID_PARAMETER)},e.prototype.removeChatroomEntry=function(e,t){var n=t.key;return at(n)?this._engine.removeChatroomEntry(e,t):Promise.resolve(Ee.BIZ_ERROR_INVALID_PARAMETER)},e.prototype.removeChatroomEntries=function(e,t){for(var n=0;n<t.entries.length;n++){var i=t.entries[n].key;if(!at(i))return Promise.resolve({code:Ee.BIZ_ERROR_INVALID_PARAMETER})}return this._engine.removeChatroomEntries(e,t)},e.prototype.forceRemoveChatroomEntry=function(e,t){var n=t.key;return at(n)?this._engine.forceRemoveChatroomEntry(e,t):Promise.resolve(Ee.BIZ_ERROR_INVALID_PARAMETER)},e.prototype.getChatroomEntry=function(e,t){return this._engine.getChatroomEntry(e,t)},e.prototype.getAllChatroomEntries=function(e){return this._engine.getAllChatroomEntry(e)},e.prototype.getChatroomHistoryMessages=function(e,t,n,i){return void 0===t&&(t=20),void 0===n&&(n=0),void 0===i&&(i=0),this._engine.getChatroomHistoryMessages(e,i,t,n)},e.prototype.getFileToken=function(e,t,n,i){return w(this,void 0,void 0,(function(){var r,s,o,a,u,c,h;return b(this,(function(l){switch(l.label){case 0:return r=this.getInfoFromCache(),s=(null==r?void 0:r.bosAddr)||\\\"\\\",o=(null==r?void 0:r.uploadServer)||\\\"\\\",a=(null==r?void 0:r.ossConfig)||\\\"\\\",[4,this._engine.getFileToken(e,t,n,i)];case 1:return u=l.sent(),c=u.code,h=u.data,c===Ee.SUCCESS?[2,Promise.resolve(Object.assign(h,{bos:s,qiniu:o,ossConfig:a}))]:[2,Promise.reject(c)]}}))}))},e.prototype.getFileUrl=function(e,t,n,i,r){return void 0===r&&(r=Me.QINIU),w(this,void 0,void 0,(function(){var s,o,a;return b(this,(function(u){switch(u.label){case 0:return(null==i?void 0:i.isBosRes)?[2,Promise.resolve(i)]:[4,this._engine.getFileUrl(e,r,t,n)];case 1:return s=u.sent(),o=s.code,a=s.data,o===Ee.SUCCESS?[2,Promise.resolve(a)]:[2,Promise.reject(o)]}}))}))},e.prototype.createTag=function(e){return w(this,void 0,void 0,(function(){return b(this,(function(t){return[2,this._engine.createTag(e)]}))}))},e.prototype.removeTag=function(e){return w(this,void 0,void 0,(function(){return b(this,(function(t){return[2,this._engine.removeTag(e)]}))}))},e.prototype.updateTag=function(e){return w(this,void 0,void 0,(function(){return b(this,(function(t){return[2,this._engine.updateTag(e)]}))}))},e.prototype.getTagList=function(){return w(this,void 0,void 0,(function(){return b(this,(function(e){return[2,this._engine.getTagList()]}))}))},e.prototype.addTagForConversations=function(e,t){return w(this,void 0,void 0,(function(){return b(this,(function(n){return t.length>1e3?[2,Promise.reject(Ee.CONVER_OUT_LIMIT_ERROR)]:[2,this._engine.addTagForConversations(e,t)]}))}))},e.prototype.removeTagForConversations=function(e,t){return w(this,void 0,void 0,(function(){return b(this,(function(n){return[2,this._engine.removeTagForConversations(e,t)]}))}))},e.prototype.removeTagsForConversation=function(e,t){return w(this,void 0,void 0,(function(){return b(this,(function(n){return[2,this._engine.removeTagsForConversation(e,t)]}))}))},e.prototype.getConversationListByTag=function(e,t,n,i){return w(this,void 0,void 0,(function(){return b(this,(function(r){return[2,this._engine.getConversationListByTag(e,t,n,i)]}))}))},e.prototype.getUnreadCountByTag=function(e,t){return w(this,void 0,void 0,(function(){return b(this,(function(n){return[2,this._engine.getUnreadCountByTag(e,t)]}))}))},e.prototype.setConversationStatusInTag=function(e,t,n){return w(this,void 0,void 0,(function(){return b(this,(function(i){return[2,this._engine.setConversationStatusInTag(e,t,n)]}))}))},e.prototype.getTagsForConversation=function(e){return w(this,void 0,void 0,(function(){return b(this,(function(t){return[2,this._engine.getTagsForConversation(e)]}))}))},e.prototype.getBlockConversationList=function(){return this._engine.getBlockConversationList()},e.prototype.getTopConversationList=function(){return this._engine.getTopConversationList()},e.prototype.getUnreadMentionedCount=function(e){return this._engine.getUnreadMentionedCount(e)},e.prototype.getAllUnreadMentionedCount=function(){return this._engine.getAllUnreadMentionedCount()},e.prototype.getAllConversationState=function(){return this._engine.getAllConversationState()},e.prototype.callExtra=function(e){for(var t,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return(t=this._engine).callExtra.apply(t,M([e],n))},e.prototype.clearConversations=function(e,t){return w(this,void 0,void 0,(function(){return b(this,(function(n){switch(n.label){case 0:return[4,this._engine.clearConversations(e,t)];case 1:return[2,n.sent()]}}))}))},e.prototype.setUserStatusListener=function(e,t){return this._engine.setUserStatusListener(e,(function(e){try{t(e)}catch(e){pe.error(e)}}))},e.prototype.addToBlacklist=function(e){return w(this,void 0,void 0,(function(){return b(this,(function(t){return[2,this._engine.addToBlacklist(e)]}))}))},e.prototype.removeFromBlacklist=function(e){return w(this,void 0,void 0,(function(){return b(this,(function(t){return[2,this._engine.removeFromBlacklist(e)]}))}))},e.prototype.getBlacklist=function(){return w(this,void 0,void 0,(function(){return b(this,(function(e){return[2,this._engine.getBlacklist()]}))}))},e.prototype.getBlacklistStatus=function(e){return w(this,void 0,void 0,(function(){return b(this,(function(t){return[2,this._engine.getBlacklistStatus(e)]}))}))},e.prototype.insertMessage=function(e,t,n){return w(this,void 0,void 0,(function(){return b(this,(function(i){return[2,this._engine.insertMessage(e,t,n)]}))}))},e.prototype.deleteMessages=function(e){return w(this,void 0,void 0,(function(){return b(this,(function(t){return[2,this._engine.deleteMessages(e)]}))}))},e.prototype.deleteMessagesByTimestamp=function(e,t,n,i,r){return void 0===r&&(r=\\\"\\\"),w(this,void 0,void 0,(function(){return b(this,(function(s){return[2,this._engine.deleteMessagesByTimestamp(e,t,n,i,r)]}))}))},e.prototype.clearMessages=function(e,t,n){return void 0===n&&(n=\\\"\\\"),w(this,void 0,void 0,(function(){return b(this,(function(i){return[2,this._engine.clearMessages(e,t,n)]}))}))},e.prototype.getMessage=function(e){return w(this,void 0,void 0,(function(){return b(this,(function(t){return[2,this._engine.getMessage(e)]}))}))},e.prototype.setMessageContent=function(e,t,n){return w(this,void 0,void 0,(function(){return b(this,(function(i){return[2,this._engine.setMessageContent(e,t,n)]}))}))},e.prototype.setMessageSearchField=function(e,t,n){return w(this,void 0,void 0,(function(){return b(this,(function(i){return[2,this._engine.setMessageSearchField(e,t,n)]}))}))},e.prototype.setMessageSentStatus=function(e,t){return w(this,void 0,void 0,(function(){return b(this,(function(n){return[2,this._engine.setMessageSentStatus(e,t)]}))}))},e.prototype.setMessageReceivedStatus=function(e,t){return w(this,void 0,void 0,(function(){return b(this,(function(n){return[2,this._engine.setMessageReceivedStatus(e,t)]}))}))},e.prototype.setUserStatus=function(e){return w(this,void 0,void 0,(function(){return b(this,(function(t){return[2,this._engine.setUserStatus(e)]}))}))},e.prototype.subscribeUserStatus=function(e){return w(this,void 0,void 0,(function(){return b(this,(function(t){return[2,this._engine.subscribeUserStatus(e)]}))}))},e.prototype.getUserStatus=function(e){return w(this,void 0,void 0,(function(){return b(this,(function(t){return[2,this._engine.getUserStatus(e)]}))}))},e.prototype.searchConversationByContent=function(e,t,n,i){return void 0===t&&(t=[]),void 0===n&&(n=\\\"\\\"),w(this,void 0,void 0,(function(){return b(this,(function(r){return[2,this._engine.searchConversationByContent(e,t,n,i)]}))}))},e.prototype.searchMessageByContent=function(e,t,n,i,r,s,o){return void 0===o&&(o=\\\"\\\"),w(this,void 0,void 0,(function(){return b(this,(function(a){return[2,this._engine.searchMessageByContent(e,t,n,i,r,s,o)]}))}))},e.prototype.getUnreadMentionedMessages=function(e,t,n){return void 0===n&&(n=\\\"\\\"),this._engine.getUnreadMentionedMessages(e,t,n)},e.prototype.clearUnreadCountByTimestamp=function(e,t,n,i){return void 0===i&&(i=\\\"\\\"),this._engine.clearUnreadCountByTimestamp(e,t,n,i)},e.prototype.getConversationNotificationStatus=function(e,t,n){return void 0===n&&(n=\\\"\\\"),this._engine.getConversationNotificationStatus(e,t,n)},e.prototype.getRemoteHistoryMessages=function(e,t,n,i,r,s){return this._engine.getRemoteHistoryMessages(e,t,n,i,r,s)},e.prototype.getConversationListWithAllChannel=function(){return this._engine.getConversationListWithAllChannel()},e.prototype.getConversationListWithAllChannelByPage=function(e,t){return this._engine.getConversationListWithAllChannelByPage(e,t)},e.prototype.joinRTCRoom=function(e,t,n,i,r,s){return this._engine.joinRTCRoom(e,t,n,i,r,s)},e.prototype.quitRTCRoom=function(e){return this._engine.quitRTCRoom(e)},e.prototype.rtcPing=function(e,t,n){return this._engine.rtcPing(e,t,n)},e.prototype.getRTCRoomInfo=function(e){return this._engine.getRTCRoomInfo(e)},e.prototype.getRTCUserInfoList=function(e){return this._engine.getRTCUserInfoList(e)},e.prototype.getRTCUserInfo=function(e){return this._engine.getRTCUserInfo(e)},e.prototype.setRTCUserInfo=function(e,t,n){return this._engine.setRTCUserInfo(e,t,n)},e.prototype.removeRTCUserInfo=function(e,t){return this._engine.removeRTCUserInfo(e,t)},e.prototype.setRTCData=function(e,t,n,i,r,s){return this._engine.setRTCData(e,t,n,i,r,s)},e.prototype.setRTCTotalRes=function(e,t,n,i,r){return void 0===r&&(r=\\\"\\\"),this._engine.setRTCTotalRes(e,t,n,i,r)},e.prototype.setRTCCDNUris=function(e,t,n){return this._engine.setRTCCDNUris(e,t,n)},e.prototype.getRTCData=function(e,t,n,i){return this._engine.getRTCData(e,t,n,i)},e.prototype.removeRTCData=function(e,t,n,i,r){return this._engine.removeRTCData(e,t,n,i,r)},e.prototype.setRTCOutData=function(e,t,n,i){return this._engine.setRTCOutData(e,t,n,i)},e.prototype.getRTCOutData=function(e,t){return this._engine.getRTCOutData(e,t)},e.prototype.getRTCToken=function(e,t,n){return this._engine.getRTCToken(e,t,n)},e.prototype.setRTCState=function(e,t){return this._engine.setRTCState(e,t)},e.prototype.getRTCUserList=function(e){return this._engine.getRTCUserList(e)},e.prototype.joinLivingRoomAsAudience=function(e,t,n){return this._engine.joinLivingRoomAsAudience(e,t,n)},e.prototype.quitLivingRoomAsAudience=function(e){return this._engine.quitLivingRoomAsAudience(e)},e.prototype.rtcIdentityChange=function(e,t,n){return this._engine.rtcIdentityChange(e,t,n)},e.prototype.getRTCJoinedUserInfo=function(e){return this._engine.getRTCJoinedUserInfo(e)},e.prototype.requestRoomPK=function(e){return this._engine.requestRoomPK(e)},e.prototype.cancelRoomPK=function(e){return this._engine.cancelRoomPK(e)},e.prototype.responseRoomPK=function(e){return this._engine.responseRoomPK(e)},e.prototype.endRoomPK=function(e){return this._engine.endRoomPK(e)},e}();!function(e){e[e.add=1]=\\\"add\\\",e[e.update=2]=\\\"update\\\",e[e.delete=3]=\\\"delete\\\"}(ns||(ns={}));var rs=\\\"5.1.2\\\";\\n\\n\\n//# sourceURL=webpack://@rongcloud/rcvoiceroomlib-v1/./node_modules/@rongcloud/engine/dist/index.esm.js?\");\n\n/***/ }),\n\n/***/ \"./node_modules/@rongcloud/imlib-next/dist/index.esm.js\":\n/*!**************************************************************!*\\\n  !*** ./node_modules/@rongcloud/imlib-next/dist/index.esm.js ***!\n  \\**************************************************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\neval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   \\\"ConnectionStatus\\\": () => (/* reexport safe */ _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ConnectionStatus),\\n/* harmony export */   \\\"ConversationType\\\": () => (/* reexport safe */ _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ConversationType),\\n/* harmony export */   \\\"ErrorCode\\\": () => (/* reexport safe */ _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode),\\n/* harmony export */   \\\"LogLevel\\\": () => (/* reexport safe */ _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.LogLevel),\\n/* harmony export */   \\\"MentionedType\\\": () => (/* reexport safe */ _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.MentionedType),\\n/* harmony export */   \\\"MessageBlockType\\\": () => (/* reexport safe */ _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.MessageBlockType),\\n/* harmony export */   \\\"MessageDirection\\\": () => (/* reexport safe */ _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.MessageDirection),\\n/* harmony export */   \\\"NotificationStatus\\\": () => (/* reexport safe */ _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.NotificationStatus),\\n/* harmony export */   \\\"ReceivedStatus\\\": () => (/* reexport safe */ _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ReceivedStatus),\\n/* harmony export */   \\\"UploadMethod\\\": () => (/* reexport safe */ _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.UploadMethod),\\n/* harmony export */   \\\"BaseMessage\\\": () => (/* binding */ Ze),\\n/* harmony export */   \\\"CombineMessage\\\": () => (/* binding */ ct),\\n/* harmony export */   \\\"ConnectType\\\": () => (/* binding */ An),\\n/* harmony export */   \\\"Events\\\": () => (/* binding */ U),\\n/* harmony export */   \\\"FileMessage\\\": () => (/* binding */ ut),\\n/* harmony export */   \\\"GIFMessage\\\": () => (/* binding */ dt),\\n/* harmony export */   \\\"HQVoiceMessage\\\": () => (/* binding */ rt),\\n/* harmony export */   \\\"ImageMessage\\\": () => (/* binding */ at),\\n/* harmony export */   \\\"LocationMessage\\\": () => (/* binding */ gt),\\n/* harmony export */   \\\"MessageType\\\": () => (/* binding */ Pn),\\n/* harmony export */   \\\"ReferenceMessage\\\": () => (/* binding */ ft),\\n/* harmony export */   \\\"RichContentMessage\\\": () => (/* binding */ mt),\\n/* harmony export */   \\\"SightMessage\\\": () => (/* binding */ it),\\n/* harmony export */   \\\"TextMessage\\\": () => (/* binding */ st),\\n/* harmony export */   \\\"VoiceMessage\\\": () => (/* binding */ lt),\\n/* harmony export */   \\\"__addSDKVersion\\\": () => (/* binding */ Ce),\\n/* harmony export */   \\\"addConversationsToTag\\\": () => (/* binding */ On),\\n/* harmony export */   \\\"addEventListener\\\": () => (/* binding */ he),\\n/* harmony export */   \\\"addTag\\\": () => (/* binding */ Tn),\\n/* harmony export */   \\\"clearAllMessagesUnreadStatus\\\": () => (/* binding */ _e),\\n/* harmony export */   \\\"clearEventListeners\\\": () => (/* binding */ Se),\\n/* harmony export */   \\\"clearHistoryMessages\\\": () => (/* binding */ an),\\n/* harmony export */   \\\"clearMessages\\\": () => (/* binding */ vn),\\n/* harmony export */   \\\"clearMessagesUnreadStatus\\\": () => (/* binding */ Me),\\n/* harmony export */   \\\"clearTextMessageDraft\\\": () => (/* binding */ Re),\\n/* harmony export */   \\\"clearUnreadCountByTimestamp\\\": () => (/* binding */ Sn),\\n/* harmony export */   \\\"connect\\\": () => (/* binding */ de),\\n/* harmony export */   \\\"deleteLocalMessagesByTimestamp\\\": () => (/* binding */ pn),\\n/* harmony export */   \\\"deleteMessages\\\": () => (/* binding */ on),\\n/* harmony export */   \\\"disconnect\\\": () => (/* binding */ le),\\n/* harmony export */   \\\"forceRemoveChatRoomEntry\\\": () => (/* binding */ Je),\\n/* harmony export */   \\\"forceSetChatRoomEntry\\\": () => (/* binding */ je),\\n/* harmony export */   \\\"getAllChatRoomEntries\\\": () => (/* binding */ Qe),\\n/* harmony export */   \\\"getAllConversationState\\\": () => (/* binding */ He),\\n/* harmony export */   \\\"getAllUnreadMentionedCount\\\": () => (/* binding */ De),\\n/* harmony export */   \\\"getBlockedConversationList\\\": () => (/* binding */ be),\\n/* harmony export */   \\\"getChatRoomEntry\\\": () => (/* binding */ Ye),\\n/* harmony export */   \\\"getChatRoomInfo\\\": () => (/* binding */ Ve),\\n/* harmony export */   \\\"getChatroomHistoryMessages\\\": () => (/* binding */ $e),\\n/* harmony export */   \\\"getConnectionStatus\\\": () => (/* binding */ ge),\\n/* harmony export */   \\\"getConversationList\\\": () => (/* binding */ Te),\\n/* harmony export */   \\\"getConversationNotificationStatus\\\": () => (/* binding */ xe),\\n/* harmony export */   \\\"getConversationsFromTagByPage\\\": () => (/* binding */ Un),\\n/* harmony export */   \\\"getCurrentUserId\\\": () => (/* binding */ me),\\n/* harmony export */   \\\"getFileToken\\\": () => (/* binding */ Bt),\\n/* harmony export */   \\\"getFileUrl\\\": () => (/* binding */ qt),\\n/* harmony export */   \\\"getFirstUnreadMessage\\\": () => (/* binding */ ln),\\n/* harmony export */   \\\"getHistoryMessages\\\": () => (/* binding */ Jt),\\n/* harmony export */   \\\"getMessage\\\": () => (/* binding */ fn),\\n/* harmony export */   \\\"getMessageReader\\\": () => (/* binding */ un),\\n/* harmony export */   \\\"getRemoteHistoryMessages\\\": () => (/* binding */ Yt),\\n/* harmony export */   \\\"getServerTime\\\": () => (/* binding */ fe),\\n/* harmony export */   \\\"getTags\\\": () => (/* binding */ Nn),\\n/* harmony export */   \\\"getTagsFromConversation\\\": () => (/* binding */ Rn),\\n/* harmony export */   \\\"getTextMessageDraft\\\": () => (/* binding */ ye),\\n/* harmony export */   \\\"getTopConversationList\\\": () => (/* binding */ Pe),\\n/* harmony export */   \\\"getTotalUnreadCount\\\": () => (/* binding */ Oe),\\n/* harmony export */   \\\"getUnreadCount\\\": () => (/* binding */ we),\\n/* harmony export */   \\\"getUnreadCountByTag\\\": () => (/* binding */ xn),\\n/* harmony export */   \\\"getUnreadMentionedCount\\\": () => (/* binding */ Le),\\n/* harmony export */   \\\"getUnreadMentionedMessages\\\": () => (/* binding */ mn),\\n/* harmony export */   \\\"init\\\": () => (/* binding */ ce),\\n/* harmony export */   \\\"insertMessage\\\": () => (/* binding */ gn),\\n/* harmony export */   \\\"installPlugin\\\": () => (/* binding */ ue),\\n/* harmony export */   \\\"joinChatRoom\\\": () => (/* binding */ Be),\\n/* harmony export */   \\\"joinExistChatRoom\\\": () => (/* binding */ qe),\\n/* harmony export */   \\\"onceEventListener\\\": () => (/* binding */ pe),\\n/* harmony export */   \\\"quitChatRoom\\\": () => (/* binding */ Fe),\\n/* harmony export */   \\\"recallMessage\\\": () => (/* binding */ nn),\\n/* harmony export */   \\\"registerMessageType\\\": () => (/* binding */ dn),\\n/* harmony export */   \\\"removeChatRoomEntries\\\": () => (/* binding */ We),\\n/* harmony export */   \\\"removeChatRoomEntry\\\": () => (/* binding */ Xe),\\n/* harmony export */   \\\"removeConversation\\\": () => (/* binding */ Ee),\\n/* harmony export */   \\\"removeConversationsFromTag\\\": () => (/* binding */ wn),\\n/* harmony export */   \\\"removeEventListener\\\": () => (/* binding */ ve),\\n/* harmony export */   \\\"removeEventListeners\\\": () => (/* binding */ Ie),\\n/* harmony export */   \\\"removeMessageExpansionForKey\\\": () => (/* binding */ sn),\\n/* harmony export */   \\\"removeTag\\\": () => (/* binding */ En),\\n/* harmony export */   \\\"removeTagFromConversations\\\": () => (/* binding */ _n),\\n/* harmony export */   \\\"removeTagsFromConversation\\\": () => (/* binding */ Mn),\\n/* harmony export */   \\\"saveTextMessageDraft\\\": () => (/* binding */ Ne),\\n/* harmony export */   \\\"searchConversationByContent\\\": () => (/* binding */ In),\\n/* harmony export */   \\\"searchMessages\\\": () => (/* binding */ hn),\\n/* harmony export */   \\\"sendFileMessage\\\": () => (/* binding */ Kt),\\n/* harmony export */   \\\"sendHQVoiceMessage\\\": () => (/* binding */ Xt),\\n/* harmony export */   \\\"sendImageMessage\\\": () => (/* binding */ jt),\\n/* harmony export */   \\\"sendMessage\\\": () => (/* binding */ Ft),\\n/* harmony export */   \\\"sendReadReceiptMessage\\\": () => (/* binding */ Qt),\\n/* harmony export */   \\\"sendReadReceiptRequest\\\": () => (/* binding */ $t),\\n/* harmony export */   \\\"sendReadReceiptResponse\\\": () => (/* binding */ Zt),\\n/* harmony export */   \\\"sendReadReceiptResponseV2\\\": () => (/* binding */ en),\\n/* harmony export */   \\\"sendSightMessage\\\": () => (/* binding */ Wt),\\n/* harmony export */   \\\"sendSyncReadStatusMessage\\\": () => (/* binding */ tn),\\n/* harmony export */   \\\"sendTextMessage\\\": () => (/* binding */ Vt),\\n/* harmony export */   \\\"sendTypingStatusMessage\\\": () => (/* binding */ cn),\\n/* harmony export */   \\\"setChatRoomEntries\\\": () => (/* binding */ Ke),\\n/* harmony export */   \\\"setChatRoomEntry\\\": () => (/* binding */ ze),\\n/* harmony export */   \\\"setConversationNotificationStatus\\\": () => (/* binding */ Ue),\\n/* harmony export */   \\\"setConversationToTop\\\": () => (/* binding */ Ae),\\n/* harmony export */   \\\"setConversationToTopInTag\\\": () => (/* binding */ bn),\\n/* harmony export */   \\\"setMessageReceivedStatus\\\": () => (/* binding */ Cn),\\n/* harmony export */   \\\"updateMessageExpansion\\\": () => (/* binding */ rn),\\n/* harmony export */   \\\"updateTag\\\": () => (/* binding */ yn)\\n/* harmony export */ });\\n/* harmony import */ var _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @rongcloud/engine */ \\\"./node_modules/@rongcloud/engine/dist/index.esm.js\\\");\\n\\n/*! *****************************************************************************\\nCopyright (c) Microsoft Corporation.\\n\\nPermission to use, copy, modify, and/or distribute this software for any\\npurpose with or without fee is hereby granted.\\n\\nTHE SOFTWARE IS PROVIDED \\\"AS IS\\\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\\nPERFORMANCE OF THIS SOFTWARE.\\n***************************************************************************** */var y=function(e,t){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},y(e,t)};var N=function(){return N=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},N.apply(this,arguments)};function R(e,t,n,o){return new(n||(n=Promise))((function(a,r){function i(e){try{c(o.next(e))}catch(e){r(e)}}function s(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((o=o.apply(e,t||[])).next())}))}function O(e,t){var n,o,a,r,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},\\\"function\\\"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError(\\\"Generator is already executing.\\\");for(;i;)try{if(n=1,o&&(a=2&r[0]?o.return:r[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,r[1])).done)return a;switch(o=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,o=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(a=i.trys,(a=a.length>0&&a[a.length-1])||6!==r[0]&&2!==r[0])){i=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){i.label=r[1];break}if(6===r[0]&&i.label<a[1]){i.label=a[1],a=r;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(r);break}a[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(e){r=[6,e],o=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}var w=new _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.Logger(\\\"RCIM\\\"),M=function(){return!(\\\"undefined\\\"==typeof uni||!function(e){for(var t=[\\\"canIUse\\\",\\\"getSystemInfo\\\"],n=0,o=t.length;n<o;n++)if(!e[t[n]])return!1;return!0}(uni))},_=M();var U,x={tag:\\\"browser\\\",httpReq:function(e){var t=e.method||_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.HttpMethod.GET,n=e.timeout||6e4,r=e.headers,i=e.query,s=e.body,c=(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.appendUrl)(e.url,i);return new Promise((function(e){var o,a=(o=\\\"undefined\\\"!=typeof XMLHttpRequest&&\\\"withCredentials\\\"in new XMLHttpRequest,\\\"undefined\\\"!=typeof XMLHttpRequest&&o?new XMLHttpRequest:\\\"undefined\\\"!=typeof XDomainRequest?new XDomainRequest:new ActiveXObject(\\\"Microsoft.XMLHTTP\\\")),i=\\\"[object XDomainRequest]\\\"===Object.prototype.toString.call(a);if(a.open(t,c),r&&a.setRequestHeader)for(var u in r)a.setRequestHeader(u,r[u]);if(i){a.timeout=n,a.onload=function(){e({data:a.responseText,status:a.status||200})},a.onerror=function(){e({status:a.status||0})},a.ontimeout=function(){e({status:a.status||0})};var d=\\\"object\\\"==typeof s?JSON.stringify(s):s;a.send(d)}else a.onreadystatechange=function(){4===a.readyState&&e({data:a.responseText,status:a.status})},a.onerror=function(){e({status:a.status||0})},setTimeout((function(){return e({status:a.status||0})}),n),a.send(s)}))},localStorage:null===window||void 0===window?void 0:window.localStorage,sessionStorage:null===window||void 0===window?void 0:window.sessionStorage,isSupportSocket:function(){var e=\\\"undefined\\\"!=typeof WebSocket;return e||w.warn(\\\"websocket not support\\\"),e},useNavi:!0,connectPlatform:\\\"\\\",isFromUniapp:_,createWebSocket:function(e,t){var n=new WebSocket(e,t);return n.binaryType=\\\"arraybuffer\\\",{onClose:function(e){n.onclose=function(t){var n=t.code,o=t.reason;e(n,o)}},onError:function(e){n.onerror=e},onMessage:function(e){n.onmessage=function(t){e(t.data)}},onOpen:function(e){n.onopen=e},send:function(e){n.send(e)},close:function(e,t){n.close(e,t)}}},createDataChannel:function(e,o){return this.isSupportSocket()&&\\\"websocket\\\"===o?new _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.WebSocketChannel(this,e):new _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.CometChannel(this,e)}},b=M(),A=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return wx[e].apply(wx,t)}catch(e){w.error(e)}}},P={setItem:A(\\\"setStorageSync\\\"),getItem:A(\\\"getStorageSync\\\"),removeItem:A(\\\"removeStorageSync\\\"),clear:A(\\\"clearStorageSync\\\")},L={tag:\\\"wechat\\\",httpReq:function(e){var t=e.method||_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.HttpMethod.GET,n=e.timeout||6e4,i=e.headers,s=e.query,c=e.body,u=(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.appendUrl)(e.url,s);return new Promise((function(e){wx.request({url:u,method:t,headers:i,timeout:n,data:c,success:function(t){e({data:t.data,status:t.statusCode})},fail:function(){e({status:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.RC_HTTP_REQ_TIMEOUT})}})}))},localStorage:P,sessionStorage:P,isSupportSocket:function(){return!0},useNavi:!1,connectPlatform:\\\"MiniProgram\\\",isFromUniapp:b,createWebSocket:function(e,t){var n=wx.connectSocket({url:e,protocols:t});return{onClose:function(e){n.onClose((function(t){e(t.code,t.reason)}))},onError:function(e){n.onError((function(t){e(t.errMsg)}))},onMessage:function(e){n.onMessage((function(t){e(t.data)}))},onOpen:function(e){n.onOpen(e)},send:function(e){n.send({data:e})},close:function(e,t){n.close({code:e,reason:t})}}},createDataChannel:function(e,o){return\\\"websocket\\\"===o?new _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.WebSocketChannel(this,e):new _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.CometChannel(this,e)}},D=M(),H=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return my[e].apply(my,t)}catch(e){w.error(e)}}},k={setItem:H(\\\"setStorageSync\\\"),getItem:H(\\\"getStorageSync\\\"),removeItem:H(\\\"removeStorageSync\\\"),clear:H(\\\"clearStorageSync\\\")},G={tag:\\\"alipay\\\",httpReq:function(e){var t=e.method||_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.HttpMethod.GET,n=e.timeout||6e4,i=e.headers,s=e.query,c=e.body,u=(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.appendUrl)(e.url,s),d=e.dataType||\\\"json\\\";return new Promise((function(e){my.request({url:u,method:t,headers:i,timeout:n,data:c,dataType:d,success:function(t){e({data:t.data,status:t.status})},fail:function(){e({status:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.RC_HTTP_REQ_TIMEOUT})}})}))},localStorage:k,sessionStorage:k,isSupportSocket:function(){return!1},useNavi:!1,connectPlatform:\\\"MiniProgram\\\",isFromUniapp:D,createDataChannel:function(e,o){return\\\"websocket\\\"===o?new _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.WebSocketChannel(this,e):new _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.CometChannel(this,e)}},B=M(),q=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return console.log(\\\"tt\\\",tt),tt[e].apply(tt,t)}catch(e){w.error(e)}}},F={setItem:q(\\\"setStorageSync\\\"),getItem:q(\\\"getStorageSync\\\"),removeItem:q(\\\"removeStorageSync\\\"),clear:q(\\\"clearStorageSync\\\")},V={tag:\\\"toutiao\\\",isSupportSocket:function(){return!0},useNavi:!1,connectPlatform:\\\"MiniProgram\\\",isFromUniapp:B,localStorage:F,sessionStorage:F,httpReq:function(e){return new Promise((function(t,n){tt.request({url:e.url,data:e.body,header:e.headers,method:e.method,success:function(e){console.log(\\\"调用成功\\\",e.data);var n=(null==e?void 0:e.data)||{},o={data:JSON.stringify(n),status:e.statusCode};t(o)},fail:function(e){console.log(\\\"调用失败\\\",e.errMsg),n({data:e.errMsg})}})}))},createWebSocket:function(e,t){var n=tt.connectSocket({url:e,protocols:t});return{onOpen:function(e){n.onOpen(e)},onClose:function(e){n.onClose((function(t){return e(t.code,t.reason)}))},onError:function(e){n.onError((function(t){return e(t.errMsg)}))},onMessage:function(e){n.onMessage((function(t){return e(t.data)}))},send:function(e){n.send({data:e})},close:function(e,t){n.close({code:e,reason:t})}}},createDataChannel:function(e,o){return\\\"websocket\\\"===o?new _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.WebSocketChannel(this,e):new _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.CometChannel(this,e)}},z=M(),K=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return console.log(\\\"swan\\\",swan),swan[e].apply(swan,t)}catch(e){w.error(e)}}},j={setItem:K(\\\"setStorageSync\\\"),getItem:K(\\\"getStorageSync\\\"),removeItem:K(\\\"removeStorageSync\\\"),clear:K(\\\"clearStorageSync\\\")},X={tag:\\\"baidu\\\",isSupportSocket:function(){return!0},useNavi:!1,connectPlatform:\\\"MiniProgram\\\",isFromUniapp:z,localStorage:j,sessionStorage:j,httpReq:function(e){return new Promise((function(t,n){swan.request({url:e.url,data:e.body,header:e.headers,method:e.method,success:function(e){console.log(\\\"调用成功\\\",e.data);var n=(null==e?void 0:e.data)||{},o={data:JSON.stringify(n),status:e.statusCode};t(o)},fail:function(e){console.log(\\\"调用失败\\\",e.errorCode),n({data:e.errorCode})}})}))},createWebSocket:function(e,t){var n=swan.connectSocket({url:e,protocols:t});return{onOpen:function(e){n.onOpen(e)},onClose:function(e){n.onClose((function(t){return e(t.code,t.reason)}))},onError:function(e){n.onError((function(t){return e(t.errMsg)}))},onMessage:function(e){n.onMessage((function(t){return e(t.data)}))},send:function(e){n.send({data:e})},close:function(e,t){n.close({code:e,reason:t})}}},createDataChannel:function(e,o){return\\\"websocket\\\"===o?new _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.WebSocketChannel(this,e):new _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.CometChannel(this,e)}},W=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return uni[e].apply(uni,t)}catch(e){w.error(e)}}},J={setItem:W(\\\"setStorageSync\\\"),getItem:W(\\\"getStorageSync\\\"),removeItem:W(\\\"removeStorageSync\\\"),clear:W(\\\"clearStorageSync\\\")},Y={tag:\\\"uniapp\\\",httpReq:function(e){var t=e.method||_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.HttpMethod.GET,n=e.timeout||6e4,i=e.headers,s=e.query,c=e.body,u=(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.appendUrl)(e.url,s);return new Promise((function(e){uni.request({url:u,method:t,headers:i,timeout:n,data:c,success:function(t){e({data:t.data,status:t.statusCode})},fail:function(){e({status:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.RC_HTTP_REQ_TIMEOUT})}})}))},localStorage:J,sessionStorage:J,isSupportSocket:function(){return!0},useNavi:!0,connectPlatform:\\\"\\\",isFromUniapp:!0,createWebSocket:function(e,t){var n={complete:function(){},url:e,protocols:t},o=uni.connectSocket(n);return{onClose:function(e){o.onClose((function(t){e(t.code,t.reason)}))},onError:function(e){o.onError((function(t){e(t.errMsg)}))},onMessage:function(e){o.onMessage((function(t){e(t.data)}))},onOpen:function(e){o.onOpen(e)},send:function(e){o.send({data:e})},close:function(e,t){o.close({code:e,reason:t})}}},createDataChannel:function(e,o){return\\\"websocket\\\"===o?new _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.WebSocketChannel(this,e):new _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.CometChannel(this,e)}},Q=function(e){return e&&e.canIUse&&e.getSystemInfo},$=\\\"undefined\\\"!=typeof uni&&Q(uni)?function(){switch(process.env.VUE_APP_PLATFORM){case\\\"app-plus\\\":return Y;case\\\"mp-baidu\\\":return X;case\\\"mp-toutiao\\\":return V;case\\\"mp-alipay\\\":return G;case\\\"mp-weixin\\\":return L;default:return x}}():\\\"undefined\\\"!=typeof wx&&Q(wx)?L:\\\"undefined\\\"!=typeof my&&Q(my)?G:\\\"undefined\\\"!=typeof tt&&Q(tt)?V:\\\"undefined\\\"!=typeof swan&&Q(swan)?X:x;function Z(e){var t=e.conversationType,n=e.channelId,o=e.messageType,a=e.content,r=e.senderUserId,s=e.targetId,c=e.sentTime,u=e.receivedTime,d=e.messageUId,l=e.messageDirection,g=e.isPersited,f=e.isCounted,m=e.isOffLineMessage,h=e.canIncludeExpansion,p=e.expansion,v=e.receivedStatus,I=e.disableNotification,S=e.isMentioned,C=e.isStatusMessage,T=e.readReceiptInfo,E=e.pushConfig,y=e.messageId;return v||(v=_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ReceivedStatus.UNREAD),{messageType:o,channelId:n||\\\"\\\",content:a,senderUserId:r,targetId:s,conversationType:t,sentTime:c,receivedTime:u,messageUId:d,messageDirection:l,isPersited:g,isCounted:f,isOffLineMessage:m,isMentioned:S,disableNotification:I,isStatusMessage:C,canIncludeExpansion:h,expansion:p,receivedStatus:v,readReceiptInfo:T,pushConfig:E,messageId:y}}!function(e){e.CONNECTING=\\\"CONNECTING\\\",e.CONNECTED=\\\"CONNECTED\\\",e.DISCONNECT=\\\"DISCONNECT\\\",e.SUSPEND=\\\"SUSPEND\\\",e.MESSAGES=\\\"MESSAGES\\\",e.READ_RECEIPT_RECEIVED=\\\"READ_RECEIPT_RECEIVED\\\",e.MESSAGE_RECEIPT_REQUEST=\\\"MESSAGE_RECEIPT_REQUEST\\\",e.MESSAGE_RECEIPT_RESPONSE=\\\"MESSAGE_RECEIPT_RESPONSE\\\",e.CONVERSATION=\\\"CONVERSATION\\\",e.CHATROOM=\\\"CHATROOM\\\",e.EXPANSION=\\\"EXPANSION\\\",e.PULL_OFFLINE_MESSAGE_FINISHED=\\\"PULL_OFFLINE_MESSAGE_FINISHED\\\",e.TAG=\\\"TAG\\\",e.CONVERSATION_TAG=\\\"CONVERSATION_TAG\\\",e.TYPING_STATUS=\\\"TYPING_STATUS\\\",e.MESSAGE_BLOCKED=\\\"MESSAGE_BLOCKED\\\"}(U||(U={}));var ee,te=function(e){function t(n){var o=e.call(this)||this;if(t.imClient)return w.error(\\\"Please do not repeatedly perform the init method\\\"),t.imClient;(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.navigators\\\",n.navigators,(function(e){return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isArray)(e)&&(0===e.length||e.every(_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isHttpUrl))}));var a=null==n?void 0:n.connectType;return a?_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.CONNECTION_TYPE.WEBSOCKET!==a&&_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.CONNECTION_TYPE.COMET!==a&&(w.warn(\\\"RongIMLib connectionType must be \\\"+_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.CONNECTION_TYPE.WEBSOCKET+\\\" or \\\"+_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.CONNECTION_TYPE.COMET),a=_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.CONNECTION_TYPE.WEBSOCKET):a=_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.CONNECTION_TYPE.WEBSOCKET,o._context=_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.APIContext.init($,{appkey:n.appkey,apiVersion:\\\"5.1.2\\\",navigators:n.navigators||[],miniCMPProxy:n.customCMP||[],connectionType:a,logLevel:n.logLevel,logStdout:n.logStdout,indexDBSwitch:n.indexDBSwitch,checkCA:n.checkCA}),o.watch(),t.imClient=o,o}return function(e,t){if(\\\"function\\\"!=typeof t&&null!==t)throw new TypeError(\\\"Class extends value \\\"+String(t)+\\\" is not a constructor or null\\\");function n(){this.constructor=e}y(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),Object.defineProperty(t.prototype,\\\"context\\\",{get:function(){if(!this._context)throw new Error(\\\"Please perform the init method!\\\");return this._context},enumerable:!1,configurable:!0}),t.prototype.watch=function(){var e=this,t={onConnecting:function(){e.emit(U.CONNECTING)},onConnected:function(){e.emit(U.CONNECTED)},onDisconnect:function(t){e.emit(U.DISCONNECT,t)},onSuspend:function(t){e.emit(U.SUSPEND,t)},batchMessage:function(t){e.emit(U.MESSAGES,{messages:t.map((function(e){return Z(e)}))})},typingState:function(t){e.emit(U.TYPING_STATUS,{status:t})},readReceiptReceived:function(t,n,o){e.emit(U.READ_RECEIPT_RECEIVED,{conversation:t,messageUId:n,sentTime:o})},messageReceiptRequest:function(t,n,o){e.emit(U.MESSAGE_RECEIPT_REQUEST,{conversation:t,messageUId:n,senderUserId:o})},messageReceiptResponse:function(t,n,o){e.emit(U.MESSAGE_RECEIPT_RESPONSE,{conversation:t,receivedUserId:n,messageUIdList:o})},conversationState:function(t){var n=t.map((function(e){return{conversation:{conversationType:e.conversationType,latestMessage:e.latestMessage?Z(e.latestMessage):null,targetId:e.targetId,unreadMessageCount:e.unreadMessageCount,hasMentioned:e.hasMentioned,mentionedInfo:e.mentionedInfo,lastUnreadTime:e.lastUnreadTime,notificationStatus:e.notificationStatus,isTop:e.isTop,channelId:e.channelId,unreadMentionedCount:e.unreadMentionedCount},updatedItems:e.updatedItems}}));e.emit(U.CONVERSATION,{conversationList:n})},chatroomState:function(t){e.emit(U.CHATROOM,t)},expansion:function(t){e.emit(U.EXPANSION,t)},pullFinished:function(){e.emit(U.PULL_OFFLINE_MESSAGE_FINISHED)},tag:function(){e.emit(U.TAG)},conversationTagChanged:function(){e.emit(U.CONVERSATION_TAG)},messageBlocked:function(t){e.emit(U.MESSAGE_BLOCKED,t)}};this.context.assignWatcher(t)},t}(_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.EventEmitter),ne={TIMEOUT:{code:-1,msg:\\\"Network timeout\\\"},SDK_INTERNAL_ERROR:{code:-2,msg:\\\"SDK internal error\\\"},PARAMETER_ERROR:{code:-3,msg:\\\"Please check the parameters, the {param} expected a value of {expect} but received {current}\\\"},REJECTED_BY_BLACKLIST:{code:405,msg:\\\"Blacklisted by the other party\\\"},SEND_TOO_FAST:{code:20604,msg:\\\"Sending messages too quickly\\\"},NOT_IN_GROUP:{code:22406,msg:\\\"Not in group\\\"},FORBIDDEN_IN_GROUP:{code:22408,msg:\\\"Forbbiden from speaking in the group\\\"},NOT_IN_CHATROOM:{code:23406,msg:\\\"Not in chatRoom\\\"},FORBIDDEN_IN_CHATROOM:{code:23408,msg:\\\"Forbbiden from speaking in the chatRoom\\\"},KICKED_FROM_CHATROOM:{code:23409,msg:\\\"Kicked out and forbbiden from joining the chatRoom\\\"},CHATROOM_NOT_EXIST:{code:23410,msg:\\\"ChatRoom does not exist\\\"},CHATROOM_IS_FULL:{code:23411,msg:\\\"ChatRoom members exceeded\\\"},PARAMETER_INVALID_CHATROOM:{code:23412,msg:\\\"Invalid chatRoom parameters\\\"},ROAMING_SERVICE_UNAVAILABLE_CHATROOM:{code:23414,msg:\\\"ChatRoom message roaming service is not open, Please go to the developer to open this service\\\"},RECALLMESSAGE_PARAMETER_INVALID:{code:25101,msg:\\\"Invalid recall message parameter\\\"},ROAMING_SERVICE_UNAVAILABLE_MESSAGE:{code:25102,msg:\\\"Single group chat roaming service is not open, Please go to the developer to open this service\\\"},PUSHSETTING_PARAMETER_INVALID:{code:26001,msg:\\\"Invalid push parameter\\\"},OPERATION_BLOCKED:{code:20605,msg:\\\"Operation is blocked\\\"},OPERATION_NOT_SUPPORT:{code:20606,msg:\\\"Operation is not supported\\\"},MSG_BLOCKED_SENSITIVE_WORD:{code:21501,msg:\\\"The sent message contains sensitive words\\\"},REPLACED_SENSITIVE_WORD:{code:21502,msg:\\\"Sensitive words in the message have been replaced\\\"},NOT_CONNECTED:{code:30001,msg:\\\"Please connect successfully first\\\"},NAVI_REQUEST_ERROR:{code:30007,msg:\\\"Navigation http request failed\\\"},CMP_REQUEST_ERROR:{code:30010,msg:\\\"CMP sniff http request failed\\\"},CONN_APPKEY_FAKE:{code:31002,msg:\\\"Your appkey is fake\\\"},CONN_MINI_SERVICE_NOT_OPEN:{code:31003,msg:\\\"Mini program service is not open, Please go to the developer to open this service\\\"},CONN_ACK_TIMEOUT:{code:31e3,msg:\\\"Connection ACK timeout\\\"},CONN_TOKEN_INCORRECT:{code:31004,msg:\\\"Your token is not valid or expired\\\"},CONN_NOT_AUTHRORIZED:{code:31005,msg:\\\"AppKey and Token do not match\\\"},CONN_REDIRECTED:{code:31006,msg:\\\"Connection redirection\\\"},CONN_APP_BLOCKED_OR_DELETED:{code:31008,msg:\\\"AppKey is banned or deleted\\\"},CONN_USER_BLOCKED:{code:31009,msg:\\\"User blocked\\\"},CONN_DOMAIN_INCORRECT:{code:31012,msg:\\\"Connect domain error, Please check the set security domain\\\"},ROAMING_SERVICE_UNAVAILABLE:{code:33007,msg:\\\"Roaming service cloud is not open, Please go to the developer to open this service\\\"},RC_CONNECTION_EXIST:{code:34001,msg:\\\"Connection already exists\\\"},CHATROOM_KV_EXCEED:{code:23423,msg:\\\"ChatRoom KV setting exceeds maximum\\\"},CHATROOM_KV_OVERWRITE_INVALID:{code:23424,msg:\\\"ChatRoom KV already exists\\\"},CHATROOM_KV_STORE_NOT_OPEN:{code:23426,msg:\\\"ChatRoom KV storage service is not open, Please go to the developer to open this service\\\"},CHATROOM_KEY_NOT_EXIST:{code:23427,msg:\\\"ChatRoom key does not exist\\\"},MSG_KV_NOT_SUPPORT:{code:34008,msg:\\\"The message cannot be extended\\\"},SEND_MESSAGE_KV_FAIL:{code:34009,msg:\\\"Sending RC expansion message fail\\\"},EXPANSION_LIMIT_EXCEET:{code:34010,msg:\\\"The message expansion size is beyond the limit\\\"},ILLGAL_PARAMS:{code:33003,msg:\\\"Incorrect parameters passed in while calling the interface\\\"},UPLOAD_FILE_FAILED:{code:35020,msg:\\\"File upload failed\\\"},CHATROOM_KV_STORE_NOT_ALL_SUCCESS:{code:23428,msg:\\\"Chatroom kv store not all success\\\"},CHATROOM_KV_STORE_OUT_LIMIT:{code:23429,msg:\\\"Chatroom kv's length is out of limit\\\"},TAG_EXISTS:{code:33101,msg:\\\"The tag already exists\\\"},TAG_NOT_EXIST:{code:33100,msg:\\\"The tag does not exist\\\"},NOT_SUPPORT:{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT,msg:\\\"The method is not supported in a browser!\\\"}},oe={},ae={};for(var re in ne){var ie=ne[re],se=ie.code;oe[se]=re,ae[se]=ie}ne.ROAMING_SERVICE_UNAVAILABLE.code;var ce=function(e){ee=ee||new te(e)};function ue(e,t){return null==ee?void 0:ee.context.install(e,t)}function de(e,t){return R(this,void 0,void 0,(function(){var n;return O(this,(function(o){switch(o.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"token\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),w.warn(\\\"RongIMLib Version: 5.1.2, Commit: 5f8c7ef795a4271181ff3bc26e8b9003e3693988\\\"),[4,ee.context.connect(e,!1,t)];case 1:return(n=o.sent()).code===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:n.code,data:{userId:n.userId}}]:[2,{code:n.code,msg:oe[n.code]}]}}))}))}function le(){return ee.context.disconnect()}function ge(){return ee.context.getConnectionStatus()}function fe(){return ee.context.getServerTime()}function me(){return ee.context.getCurrentUserId()}function he(e,t,n){ee.on(e,t,n)}function pe(e,t,n){ee.once(e,t,n)}function ve(e,t,n){ee.off(e,t,n)}function Ie(e){ee.removeAll(e)}function Se(){ee.clear()}function Ce(e,t){_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.VersionManage.add(e,t)}function Te(e,t){return R(this,void 0,void 0,(function(){var n,o,a,i;return O(this,(function(s){switch(s.label){case 0:return w.debug(\\\"get conversation list ->\\\"),[4,te.imClient.context.getConversationList(null==e?void 0:e.count,void 0,null==e?void 0:e.startTime,null==e?void 0:e.order,t)];case 1:return n=s.sent(),o=n.code,a=n.data,o===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS&&a?(i=a.map((function(e){return function(e){var t=e.conversationType,n=e.targetId,o=e.latestMessage,a=e.unreadMessageCount,r=e.hasMentioned,i=e.mentionedInfo,s=e.lastUnreadTime,c=e.notificationStatus,u=e.isTop,d=e.channelId,l=e.unreadMentionedCount;return{conversationType:t,targetId:n,latestMessage:o&&Z(o),unreadMessageCount:a,hasMentioned:r,mentionedInfo:r?{type:null==i?void 0:i.type,userIdList:null==i?void 0:i.userIdList}:void 0,lastUnreadTime:s,notificationStatus:c,isTop:u,channelId:d,unreadMentionedCount:l}}(e)})),[2,{code:0,data:i}]):(w.warn(\\\"get conversation list fail ->\\\"+o+\\\":\\\"+oe[o]),[2,{code:o,msg:oe[o]}])}}))}))}function Ee(e){return R(this,void 0,void 0,(function(){var t,n;return O(this,(function(o){switch(o.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.conversationType\\\",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isValidConversationType,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.targetId\\\",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.channelId\\\",e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),[4,te.imClient.context.removeConversation(e.conversationType,e.targetId,e.channelId)];case 1:return t=o.sent(),n=\\\"conversationType:\\\"+e.conversationType+\\\",targetId:\\\"+e.targetId,w.debug(\\\"destroy conversation ->\\\"+n),t!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(w.warn(\\\"destroy conversation fail ->\\\"+t+\\\":\\\"+oe[t]+\\\",\\\"+n),[2,{code:t,msg:oe[t]}]):[2,{code:t}]}}))}))}function ye(e){return R(this,void 0,void 0,(function(){var t,n,o,a;return O(this,(function(i){switch(i.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.conversationType\\\",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isValidConversationType,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.targetId\\\",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.channelId\\\",e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),[4,te.imClient.context.getConversationMessageDraft(e.conversationType,e.targetId,e.channelId)];case 1:return t=i.sent(),n=t.code,o=t.data,a=\\\"conversationType:\\\"+e.conversationType+\\\",targetId:\\\"+e.targetId,w.debug(\\\"get draft ->\\\"+a),n===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:n,data:o||\\\"\\\"}]:(w.warn(\\\"get draft fail ->\\\"+n+\\\":\\\"+oe[n]+\\\",\\\"+a),[2,{code:n,msg:oe[n]}])}}))}))}function Ne(e,t){return R(this,void 0,void 0,(function(){var n,o;return O(this,(function(a){switch(a.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.conversationType\\\",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isValidConversationType,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.targetId\\\",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.channelId\\\",e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"draft\\\",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),n=\\\"conversationType:\\\"+e.conversationType+\\\",targetId:\\\"+e.targetId,w.debug(\\\"set draft ->\\\"+n),[4,te.imClient.context.saveConversationMessageDraft(e.conversationType,e.targetId,t,e.channelId)];case 1:return(o=a.sent())===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:o}]:(w.warn(\\\"set draft fail ->\\\"+o+\\\":\\\"+oe[o]+\\\",\\\"+n),[2,{code:o,msg:oe[o]}])}}))}))}function Re(e){return R(this,void 0,void 0,(function(){var t,n;return O(this,(function(o){switch(o.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.conversationType\\\",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isValidConversationType,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.targetId\\\",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.channelId\\\",e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),t=\\\"conversationType:\\\"+e.conversationType+\\\",targetId:\\\"+e.targetId,w.debug(\\\"delete draft  ->\\\"+t),[4,te.imClient.context.clearConversationMessageDraft(e.conversationType,e.targetId,e.channelId)];case 1:return(n=o.sent())===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:n}]:(w.warn(\\\"delete draft fail ->\\\"+n+\\\":\\\"+oe[n]+\\\",\\\"+t),[2,{code:n,msg:oe[n]}])}}))}))}function Oe(e,t){return R(this,void 0,void 0,(function(){var n,o,a,i,c,u;return O(this,(function(d){switch(d.label){case 0:if(w.debug(\\\"get total unread count -> ConversationType:\\\"+JSON.stringify(t)+\\\" includeMuted:\\\"+e),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"includeMuted\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.BOOLEAN,!1),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversationTypes\\\",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.ARRAY,!1),t)for(n=0,o=t;n<o.length;n++)a=o[n],(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversationType\\\",a,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isValidConversationType);return[4,te.imClient.context.getTotalUnreadCount(\\\"\\\",t,e)];case 1:return i=d.sent(),c=i.code,u=i.data,c===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:c,data:u}]:(w.warn(\\\"getTotalUnreadCount fail ->\\\"+c+\\\":\\\"+oe[c]),[2,{code:c,msg:oe[c]}])}}))}))}function we(e){return R(this,void 0,void 0,(function(){var t,n,o,a;return O(this,(function(i){switch(i.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.conversationType\\\",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isValidConversationType,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.targetId\\\",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.channelId\\\",e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),[4,te.imClient.context.getUnreadCount(e.conversationType,e.targetId,e.channelId)];case 1:return t=i.sent(),n=t.code,o=t.data,a=\\\"conversationType:\\\"+e.conversationType+\\\",targetId:\\\"+e.targetId,w.debug(\\\"get unreadCount ->\\\"+a),n===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:n,data:o}]:(w.warn(\\\"get unreadCount fail ->\\\"+n+\\\":\\\"+oe[n]+\\\",\\\"+a),[2,{code:n,msg:oe[n]}])}}))}))}function Me(e){return R(this,void 0,void 0,(function(){var t,n;return O(this,(function(o){switch(o.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.conversationType\\\",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isValidConversationType,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.targetId\\\",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.channelId\\\",e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),[4,te.imClient.context.clearUnreadCount(e.conversationType,e.targetId,e.channelId)];case 1:return t=o.sent(),n=\\\"conversationType:\\\"+e.conversationType+\\\",targetId:\\\"+e.targetId,w.debug(\\\"clear unreadMsgNum ->\\\"+n),t!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(w.warn(\\\"clear unreadMsgNum fail ->\\\"+t+\\\":\\\"+oe[t]+\\\",\\\"+n),[2,{code:t,msg:oe[t]}]):[2,{code:t}]}}))}))}function _e(){return R(this,void 0,void 0,(function(){return O(this,(function(e){switch(e.label){case 0:return[4,te.imClient.context.clearAllUnreadCount()];case 1:return[2,{code:e.sent()}]}}))}))}function Ue(e,t){return R(this,void 0,void 0,(function(){var n,o;return O(this,(function(a){switch(a.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.conversationType\\\",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isValidConversationType,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.targetId\\\",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.channelId\\\",e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"notificationStatus\\\",t,(function(e){return 1===e||2===e}),!0),n=\\\"conversationType:\\\"+e.conversationType+\\\",targetId:\\\"+e.targetId,w.debug(\\\"set conversation status ->\\\"+n),[4,te.imClient.context.setConversationStatus(e.conversationType,e.targetId,void 0,t,e.channelId)];case 1:return(o=a.sent())!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(w.warn(\\\"set conversation status fail ->\\\"+o+\\\":\\\"+oe[o]+\\\",\\\"+n),[2,{code:o,msg:oe[o]}]):[2,{code:o}]}}))}))}function xe(e){return R(this,void 0,void 0,(function(){var t,n,o;return O(this,(function(a){switch(a.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.conversationType\\\",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isValidConversationType,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.targetId\\\",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.channelId\\\",e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),w.info(\\\"getConversationNotificationStatus ->targetId:\\\"+e.targetId+\\\",conversationType:\\\"+e.conversationType),[4,te.imClient.context.getConversationNotificationStatus(e.conversationType,e.targetId,e.channelId)];case 1:return t=a.sent(),n=t.code,o=t.data,n===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:n,data:o}]:(w.warn(\\\"getConversationNotificationStatus ->code:\\\"+n+\\\",targetId:\\\"+e.targetId),[2,{code:n,msg:oe[n]}])}}))}))}function be(){return R(this,void 0,void 0,(function(){var e,t,n;return O(this,(function(o){switch(o.label){case 0:return[4,te.imClient.context.getBlockConversationList()];case 1:return e=o.sent(),t=e.code,n=e.data,[2,{code:t,data:n}]}}))}))}function Ae(e,t){return void 0===t&&(t=!0),R(this,void 0,void 0,(function(){var n,o;return O(this,(function(a){switch(a.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.type\\\",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isValidConversationType,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.targetId\\\",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.channelId\\\",e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),n=\\\"conversationType:\\\"+e.conversationType+\\\",targetId:\\\"+e.targetId,w.debug(\\\"set conversation status ->\\\"+n),[4,te.imClient.context.setConversationStatus(e.conversationType,e.targetId,t,void 0,e.channelId)];case 1:return(o=a.sent())!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(w.warn(\\\"set conversation status fail ->\\\"+o+\\\":\\\"+oe[o]+\\\",\\\"+n),[2,{code:o,msg:oe[o]}]):[2,{code:o}]}}))}))}function Pe(){return R(this,void 0,void 0,(function(){var e,t,n;return O(this,(function(o){switch(o.label){case 0:return[4,te.imClient.context.getTopConversationList()];case 1:return e=o.sent(),t=e.code,n=e.data,[2,{code:t,data:n}]}}))}))}function Le(e){return R(this,void 0,void 0,(function(){return O(this,(function(t){return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.targetId\\\",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.channelId\\\",e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),w.debug(\\\"getUnreadMentionedCount\\\"+e.targetId+\\\",channelId:\\\"+e.channelId),[2,te.imClient.context.getUnreadMentionedCount(e)]}))}))}function De(){return R(this,void 0,void 0,(function(){return O(this,(function(e){return w.debug(\\\"getAllUnreadMentionedCount\\\"),[2,te.imClient.context.getAllUnreadMentionedCount()]}))}))}function He(){return R(this,void 0,void 0,(function(){return O(this,(function(e){return[2,te.imClient.context.getAllConversationState()]}))}))}var ke=function(e){(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.key\\\",e.key,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.value\\\",e.value,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.isAutoDelete\\\",e.isAutoDelete,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.BOOLEAN),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.isSendNotification\\\",e.isSendNotification,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.BOOLEAN),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.notificationExtra\\\",e.notificationExtra,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING)},Ge=function(e){(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.key\\\",e.key,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.isSendNotification\\\",e.isSendNotification,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.BOOLEAN),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.notificationExtra\\\",e.notificationExtra,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING)};function Be(e,t){return R(this,void 0,void 0,(function(){var n,o;return O(this,(function(a){switch(a.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.count\\\",t.count,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),n=\\\"id:\\\"+e,w.debug(\\\"join chatroom ->\\\"+n),[4,te.imClient.context.joinChatroom(e,t.count)];case 1:return(o=a.sent())!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(w.warn(\\\"join chatroom fail ->code+:\\\"+oe[o]+\\\",\\\"+n),[2,{code:o,msg:oe[o]}]):[2,{code:o}]}}))}))}function qe(e,t){return R(this,void 0,void 0,(function(){var n,o;return O(this,(function(a){switch(a.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.count\\\",t.count,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),n=\\\"id:\\\"+e,w.debug(\\\"join exist chatroom ->\\\"+n),[4,te.imClient.context.joinExistChatroom(e,t.count)];case 1:return(o=a.sent())!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(w.warn(\\\"join exist chatroom fail ->code:\\\"+oe[o]+\\\",\\\"+n),[2,{code:o,msg:oe[o]}]):[2,{code:o}]}}))}))}function Fe(e){return R(this,void 0,void 0,(function(){var t,n;return O(this,(function(o){switch(o.label){case 0:return t=\\\"id:\\\"+e,w.debug(\\\"quit chatroom ->\\\"+t),[4,te.imClient.context.quitChatroom(e)];case 1:return(n=o.sent())!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(w.warn(\\\"quit chatroom fail ->code+:\\\"+oe[n]+\\\",\\\"+t),[2,{code:n,msg:oe[n]}]):[2,{code:n}]}}))}))}function Ve(e,t){return R(this,void 0,void 0,(function(){var n,o,a,i;return O(this,(function(c){switch(c.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.count\\\",t.count,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.order\\\",t.order,(function(e){return[0,1,2].includes(e)})),n=\\\"id:\\\"+e,w.debug(\\\"get chatroom info ->\\\"+n),[4,te.imClient.context.getChatroomInfo(e,t.count,t.order)];case 1:return o=c.sent(),a=o.code,i=o.data,a===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS&&i?[2,{code:a,data:i}]:(w.warn(\\\"get chatroom info fail ->code+:\\\"+oe[a]+\\\",\\\"+n),[2,{code:a,msg:oe[a]}])}}))}))}function ze(e,t){return R(this,void 0,void 0,(function(){var n,o;return O(this,(function(a){switch(a.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"targetId\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),ke(t),n=\\\"id:\\\"+e,w.debug(\\\"set chatroom entry->\\\"+n),[4,te.imClient.context.setChatroomEntry(e,t)];case 1:return(o=a.sent())!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(w.warn(\\\"set chatroom entry fail ->code+:\\\"+oe[o]+\\\",\\\"+n),[2,{code:o,msg:oe[o]}]):[2,{code:o}]}}))}))}function Ke(e,t){return R(this,void 0,void 0,(function(){var n,o,a,i;return O(this,(function(c){switch(c.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"targetId\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),function(e){e.entries.forEach((function(e){(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"entry.key\\\",e.key,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"entry.value\\\",e.value,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0)})),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.isAutoDelete\\\",e.isAutoDelete,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.BOOLEAN),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.notificationExtra\\\",e.notificationExtra,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING)}(t),t.entries.length>10?[2,ne.CHATROOM_KV_STORE_OUT_LIMIT]:(n=\\\"id:\\\"+e,w.debug(\\\"set chatroom entry->\\\"+n),[4,te.imClient.context.setChatroomEntries(e,t)]);case 1:return o=c.sent(),a=o.code,i=o.data,a!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(w.warn(\\\"set chatroom entry fail ->code+:\\\"+oe[a]+\\\",\\\"+n),[2,{code:a,msg:oe[a],data:i}]):[2,{code:a}]}}))}))}function je(e,t){return R(this,void 0,void 0,(function(){var n,o;return O(this,(function(a){switch(a.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"targetId\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),ke(t),n=\\\"id:\\\"+e,w.debug(\\\"force set chatroom entry ->\\\"+n),[4,te.imClient.context.forceSetChatroomEntry(e,t)];case 1:return(o=a.sent())!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(w.warn(\\\"force set chatroom entry fail ->code+:\\\"+oe[o]+\\\",\\\"+n),[2,{code:o,msg:oe[o]}]):[2,{code:o}]}}))}))}function Xe(e,t){return R(this,void 0,void 0,(function(){var n,o;return O(this,(function(a){switch(a.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"targetId\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),Ge(t),n=\\\"id:\\\"+e,w.debug(\\\"remove chatroom entry->\\\"+n),[4,te.imClient.context.removeChatroomEntry(e,t)];case 1:return(o=a.sent())!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(w.warn(\\\"remove chatroom entry fail ->code+:\\\"+oe[o]+\\\",\\\"+n),[2,{code:o,msg:oe[o]}]):[2,{code:o}]}}))}))}function We(e,t){return R(this,void 0,void 0,(function(){var n,o,a,i,c;return O(this,(function(u){switch(u.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"targetId\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),function(e){e.entries.forEach((function(e){(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"key\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0)})),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.notificationExtra\\\",e.notificationExtra,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING)}(t),n=\\\"id:\\\"+e,w.debug(\\\"remove chatroom entry->\\\"+n),(o=Object.assign({},t)).entries=t.entries.map((function(e){return{key:e}})),[4,te.imClient.context.removeChatroomEntries(e,o)];case 1:return a=u.sent(),i=a.code,c=a.data,i!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(w.warn(\\\"remove chatroom entry fail ->code+:\\\"+oe[i]+\\\",\\\"+n),[2,{code:i,msg:oe[i],data:c}]):[2,{code:i}]}}))}))}function Je(e,t){return R(this,void 0,void 0,(function(){var n,o;return O(this,(function(a){switch(a.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"targetId\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),Ge(t),n=\\\"id:\\\"+e,w.debug(\\\"force remove chatroom entry ->\\\"+n),[4,te.imClient.context.forceRemoveChatroomEntry(e,t)];case 1:return(o=a.sent())!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(w.warn(\\\"force remove chatroom entry fail ->code+:\\\"+oe[o]+\\\",\\\"+n),[2,{code:o,msg:oe[o]}]):[2,{code:o}]}}))}))}function Ye(e,t){return R(this,void 0,void 0,(function(){var n,o,a,i;return O(this,(function(c){switch(c.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"key\\\",t,(function(e){return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isString)(e)&&/[\\\\w+=-]+/.test(e)&&e.length<=128}),!0),n=\\\"id:\\\"+e,w.debug(\\\"get chatroom entry->\\\"+n),[4,te.imClient.context.getChatroomEntry(e,t)];case 1:return o=c.sent(),a=o.code,i=o.data,a===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS&&i?[2,{code:a,data:i}]:(w.warn(\\\"get chatroom entry fail ->code+:\\\"+oe[a]+\\\",\\\"+n),[2,{code:a,msg:oe[a]}])}}))}))}function Qe(e){return R(this,void 0,void 0,(function(){var t,n,o,a;return O(this,(function(i){switch(i.label){case 0:return t=\\\"id:\\\"+e,w.debug(\\\"get all chatroom entries->\\\"+t),[4,te.imClient.context.getAllChatroomEntries(e)];case 1:return n=i.sent(),o=n.code,a=n.data,o===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS&&a?[2,{code:o,data:a}]:(w.warn(\\\"get all chatroom entries fail ->code+:\\\"+oe[o]+\\\",\\\"+t),[2,{code:o,msg:oe[o]}])}}))}))}function $e(e,t){return R(this,void 0,void 0,(function(){var n,o,a,i,c;return O(this,(function(u){switch(u.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.timestamp\\\",t.timestamp,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.count\\\",t.count,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.order\\\",t.order,(function(e){return 0===e||1===e})),n=\\\"id:\\\"+e,w.debug(\\\"get chatroom history message->\\\"+n),[4,te.imClient.context.getChatRoomHistoryMessages(e,t.count,t.order,t.timestamp)];case 1:return o=u.sent(),a=o.code,i=o.data,a===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS&&i?(c=i.list.map((function(e){return Z(e)})),[2,{code:a,data:{list:c,hasMore:!!i.hasMore}}]):(w.warn(\\\"get chatroom history message fail ->code+:\\\"+oe[a]+\\\",\\\"+n),[2,{code:a,msg:oe[a]}])}}))}))}var Ze=function(e,t,n,o){void 0===n&&(n=!0),void 0===o&&(o=!0),this.messageType=e,this.content=t,this.isPersited=n,this.isCounted=o};function et(e,t,n){void 0===t&&(t=!0),void 0===n&&(n=!0);return function(o){return new Ze(e,o,t,n)}}var nt,ot,at=et(\\\"RC:ImgMsg\\\"),rt=et(\\\"RC:HQVCMsg\\\"),it=et(\\\"RC:SightMsg\\\"),st=et(\\\"RC:TxtMsg\\\"),ct=et(\\\"RC:CombineMsg\\\"),ut=et(\\\"RC:FileMsg\\\"),dt=et(\\\"RC:GIFMsg\\\"),lt=et(\\\"RC:VcMsg\\\"),gt=et(\\\"RC:LBSMsg\\\"),ft=et(\\\"RC:ReferenceMsg\\\"),mt=et(\\\"RC:ImgTextMsg\\\"),ht={qiniu:function(e,t,n,o){var a,r=\\\"https://\\\"+t.uploadHost.qiniu;a=St()+pt[0][1]||r,pt.shift();var i=new XMLHttpRequest;i.upload&&t.support_options&&(i.upload.onprogress=function(e){n.onProgress(e.loaded,e.total)});i.onreadystatechange=function(){if(4===i.readyState){var a=i.responseText||\\\"{}\\\";(a=JSON.parse(a)).filename=t.uniqueValue,a.uploadMethod=_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.UploadMethod?_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.UploadMethod.QINIU:\\\"\\\",200===i.status?n.onCompleted(a):pt.length?ht[pt[0][0]](e,t,n,o):n.onError(\\\"upload fail\\\")}},t.isChunk&&(a=function(e,t){var n=\\\"\\\";It(t,(function(e,t){\\\"token\\\"!==e&&(n+=(n?\\\"&\\\":\\\"\\\")+encodeURIComponent(e)+\\\"=\\\"+encodeURIComponent(t))})),n&&(e+=(e.indexOf(\\\"?\\\")>0?\\\"&\\\":\\\"?\\\")+n);return e}(a+=\\\"/mkblk/\\\"+e.size,t.multi_parmas));i.open(t.method,a,!0),n.onOpen(i),t.stream&&i.setRequestHeader(\\\"authorization\\\",\\\"UpToken \\\"+t.multi_parmas.token);It(t.headers,(function(e,t){i.setRequestHeader(e,t)})),i.send(e)},baidu:function(e,t,n,o){if(console.log(o,t),o.size>vt)throw new Error(\\\"the file size is over 5GB!\\\");var a=t||{};t=t||ot;var r=new XMLHttpRequest,i=St();if(!a.uploadHost.bos&&!a.bosUploadPath)return;var s=i+pt[0][1]+a.bosUploadPath;pt.shift();var c=a.bosHeader||{},u={filename:t.uniqueValue||o.uniqueName,name:o.name,downloadUrl:s,isBosRes:!0};r.upload&&t.support_options&&(r.upload.onprogress=function(e){n.onProgress(e.loaded,e.total,!0)});r.onreadystatechange=function(){if(4===r.readyState){var a=r.responseText||\\\"{}\\\";if((a=JSON.parse(a)).filename=t.uniqueValue,200===r.status){n.onCompleted(u,!0)}else pt.length?ht[pt[0][0]](e,t,n,o):n.onError(\\\"upload fail\\\")}},r.open(t.method,s,!0),r.setRequestHeader(\\\"authorization\\\",c.bosToken),r.setRequestHeader(\\\"x-bce-date\\\",c.bosDate),r.send(o)},aliyun:function(e,t,n,o){if(o.size>vt)throw new Error(\\\"the file size is over 5GB!\\\");const a=new FormData;a.set(\\\"file\\\",e.get(\\\"file\\\")),a.set(\\\"key\\\",e.get(\\\"key\\\")),a.set(\\\"token\\\",e.get(\\\"token\\\"));const r=pt[0][1];pt.shift(),e=e||nt,t=(t=t||{})||ot;var i=new XMLHttpRequest,s=St()+t.ossBucketName+\\\".\\\"+r;i.upload&&t.support_options&&(i.upload.onprogress=function(e){n.onProgress(e.loaded,e.total)});i.onreadystatechange=function(){if(4===i.readyState){var e=i.responseText||\\\"{}\\\";(e=JSON.parse(e)).name=t.uniqueValue,e.filename=t.uploadFileName,e.uploadMethod=_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.UploadMethod?_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.UploadMethod.ALI:\\\"\\\",200===i.status?n.onCompleted(e):pt.length?ht[pt[0][0]](a,t,n,o):n.onError(\\\"upload fail\\\")}},i.open(t.method,s,!0),console.log(\\\"ali:url\\\",s);var c=t.aliHeader||{};e.set(\\\"OSSAccessKeyId\\\",c.osskeyId),e.set(\\\"policy\\\",c.ossPolicy),e.set(\\\"Signature\\\",c.ossSign),e.set(\\\"success_action_status\\\",200),e.delete(\\\"key\\\"),e.append(\\\"key\\\",t.uploadFileName),e.delete(\\\"file\\\"),e.append(\\\"file\\\",o),i.send(e)},s3:function(e,t,n,o){var a=new FormData,r=new XMLHttpRequest,i=St();const s=pt[0][1];var c=i+t.s3BucketName+\\\".\\\"+s;console.log(\\\"uploadS3:url\\\",c),pt.shift(),r.upload&&t.support_options&&(r.upload.onprogress=function(e){n.onProgress(e.loaded,e.total)});r.onreadystatechange=function(){if(4===r.readyState){var a=r.responseText||\\\"{}\\\";if((a=JSON.parse(a)).name=t.uniqueValue,a.filename=t.uploadFileName,a.uploadMethod=_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.UploadMethod.AWS,console.log(\\\"UploadMethod:\\\",_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.UploadMethod),200===r.status||204===r.status)n.onCompleted(a);else if(pt.length){const a=new FormData;a.set(\\\"file\\\",e.get(\\\"file\\\")),a.set(\\\"key\\\",e.get(\\\"key\\\")),a.set(\\\"token\\\",e.get(\\\"token\\\")),ht[pt[0][0]](a,t,n,o)}else n.onError(\\\"upload fail\\\")}},r.open(t.method,c,!0);var u=t?t.s3Header:{},d=o&&o.type;\\\"text/html\\\"===d?a.set(\\\"Content-Disposition\\\",\\\"inline;\\\"):a.set(\\\"Content-Disposition\\\",\\\"attachment;\\\");a.set(\\\"Content-Type\\\",d),a.set(\\\"x-amz-credential\\\",u.s3Credential),a.set(\\\"x-amz-algorithm\\\",u.s3Algorithm),a.set(\\\"x-amz-date\\\",u.s3Date),a.set(\\\"policy\\\",u.s3Policy),a.set(\\\"x-amz-signature\\\",u.s3Signature),a.set(\\\"key\\\",t.uploadFileName),a.set(\\\"file\\\",o),r.send(a)},stc:function(e,t,n,o){new FormData;var a=new XMLHttpRequest;St();var r=\\\"https://\\\"+pt[0][1]+\\\"/\\\"+t.stcBucketName+\\\"/\\\"+t.uploadFileName;pt.shift(),a.upload&&t.support_options&&(a.upload.onprogress=function(e){n.onProgress(e.loaded,e.total)});a.onreadystatechange=function(){if(4===a.readyState){var r=a.responseText||\\\"{}\\\";if((r=JSON.parse(r)).name=t.uniqueValue,r.filename=t.uploadFileName,r.uploadMethod=_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.UploadMethod?_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.UploadMethod.STC:\\\"\\\",200===a.status||204===a.status)n.onCompleted(r);else if(pt.length){const a=new FormData;a.set(\\\"file\\\",e.get(\\\"file\\\")),a.set(\\\"key\\\",e.get(\\\"key\\\")),a.set(\\\"token\\\",e.get(\\\"token\\\")),ht[pt[0][0]](a,t,n,o)}else n.onError(\\\"upload fail\\\")}},a.open(\\\"PUT\\\",r,!0);var i=t?t.stcHeader:{};a.setRequestHeader(\\\"Content-Type\\\",o.type),\\\"text/html\\\"===o.type?a.setRequestHeader(\\\"Content-Disposition\\\",\\\"inline;\\\"):a.setRequestHeader(\\\"Content-Disposition\\\",\\\"attachment;\\\");a.setRequestHeader(\\\"Authorization\\\",i.stcAuthorization),a.setRequestHeader(\\\"x-amz-content-sha256\\\",i.stcContentSha256),a.setRequestHeader(\\\"x-amz-date\\\",i.stcDate),a.send(o)}},pt=[],vt=5368709120;function It(e,t){for(var n in e)t(n,e[n])}function St(){var e=\\\"https://\\\";return\\\"http:\\\"!==location.protocol&&\\\"file:\\\"!==location.protocol||(e=\\\"http://\\\"),e}function Ct(e,t,n){var o,a,r=e&&e.type||\\\"text/plain\\\",i=r.indexOf(\\\"image\\\")>-1?1:4,s=Math.ceil(e.size/t.stc_chunk_size),c=t&&JSON.parse(t.ossConfig?t.ossConfig:\\\"\\\");Array.isArray(c)||(c=[]);var u=c.find((e=>Object.keys(e).includes(\\\"stc\\\"))),d=\\\"uploads\\\";te.imClient.getFileToken(i,o,\\\"POST\\\",d).then((function(e){o=e.fileName,a=\\\"https://\\\"+u.stc+\\\"/\\\"+t.stcBucketName+\\\"/\\\"+o,console.log(\\\"uploadStcMultipart:url\\\",a);var i=new XMLHttpRequest;i.open(\\\"POST\\\",a+\\\"?\\\"+d,!0),\\\"text/html\\\"===r?i.setRequestHeader(\\\"Content-Disposition\\\",\\\"inline;\\\"):i.setRequestHeader(\\\"Content-Disposition\\\",\\\"attacshment;\\\"),i.setRequestHeader(\\\"Authorization\\\",e&&e.stcAuthorization),i.setRequestHeader(\\\"x-amz-content-sha256\\\",e&&e.stcContentSha256),i.setRequestHeader(\\\"x-amz-date\\\",e&&e.stcDate),i.setRequestHeader(\\\"Content-Type\\\",r),i.send(),i.onreadystatechange=function(e){if(4===i.readyState){var t=i.response.match(/(?:<UploadId>)(\\\\S*?)(?:<\\\\/UploadId>)/);console.log(\\\"uploadId\\\",t),200===i.status||204===i.status?function(e){for(var t=[],n=1;n<=s;n++)t.push(m(e,n));f(e,t)}(Array.isArray(t)&&t[1]):n.onError(\\\"uploadStcMultipart:did not get uploadId\\\")}}}),(function(e){n.onError(\\\"uploadStcMultipart:\\\"+e)}));var l=[],g=new Map;function f(c,u){u&&Array.isArray(u)&&0!==u.length&&Promise.all(u).then((()=>{var u=\\\"uploadId=\\\"+c;if(g.size===s)te.imClient.context.getFileToken(i,o,\\\"POST\\\",u).then((function(o){console.log(\\\"onSuccess\\\",o),console.log(\\\"onSuccess:uploadId\\\",c);var i=new XMLHttpRequest;i.open(\\\"POST\\\",a+\\\"?\\\"+u,!0),i.setRequestHeader(\\\"Authorization\\\",o&&o.stcAuthorization),i.setRequestHeader(\\\"x-amz-content-sha256\\\",o&&o.stcContentSha256),i.setRequestHeader(\\\"x-amz-date\\\",o&&o.stcDate),i.setRequestHeader(\\\"Content-Type\\\",r);var s=\\\"<CompleteMultipartUpload xmlns='http://s3.amazonaws.com/doc/2006-03-01/'>\\\",d=Array.from(g.keys()||[]).sort(((e,t)=>e-t));console.log(\\\"keys\\\",d),d.map((e=>{s+=`<Part><ETag>${g.get(e)}</ETag><PartNumber>${e}</PartNumber></Part>`})),s+=\\\"</CompleteMultipartUpload>\\\",i.send(s),console.log(\\\"xml\\\",s),i.onreadystatechange=function(){if(4===i.readyState)if(200===i.status||204===i.status){var o={};o.name=e.name,o.filename=t.uploadFileName,o.uploadMethod=_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.UploadMethod.STC,n.onCompleted(o)}else n.onError(\\\"uploadStcMultipart:upload does not end\\\")}}),(function(e){n.onError(\\\"uploadStcMultipart:\\\"+e)}));else{var d=[];for(var h of l)d.push(m(c,h));f(c,d)}}),(e=>{console.error(e),n.onError(\\\"uploadStcMultipart: chunkFiles upload failed and those will reupload\\\");var t=[];for(var o of l)t.push(m(c,o));f(c,t)}))}function m(n,s){return new Promise(((c,u)=>{var d=\\\"partNumber=\\\"+s+\\\"&uploadId=\\\"+n;te.imClient.context.getFileToken(i,o,\\\"PUT\\\",d).then((function(n){console.log(\\\"signature \\\"+s+\\\" onSuccess\\\",n);var o=e&&e.slice((s-1)*t.stc_chunk_size,s*t.stc_chunk_size);console.log(\\\"fileChunk:size\\\",o.size);var i=new XMLHttpRequest;i.open(\\\"PUT\\\",a+\\\"?\\\"+d,!0),i.setRequestHeader(\\\"Authorization\\\",n&&n.stcAuthorization),i.setRequestHeader(\\\"x-amz-content-sha256\\\",n&&n.stcContentSha256),i.setRequestHeader(\\\"x-amz-date\\\",n&&n.stcDate),i.setRequestHeader(\\\"Content-Type\\\",r),i.send(o),i.onreadystatechange=function(){if(4===i.readyState)if(200===i.status||204===i.status){var e=i.getResponseHeader(\\\"etag\\\");console.log(\\\"etag:\\\"+s,e),g.set(s,e),c(e)}else l.includes(s)||l.push(s),u(s)}}),(function(e){console.log(\\\"getETags:签名验证失败\\\"),l.includes(s)||l.push(s),u(s)}))}))}}var Tt={form:function(e,t){var n=new FormData;if(t.unique_key){var o=e.name.substr(e.name.lastIndexOf(\\\".\\\")),a=Et()+o;n.append(t.unique_key,a),t.uniqueValue=a}return n.append(t.file_data_name,e),yt(t.multi_parmas,(function(e,t){n.append(e,t)})),n},json:function(e,t){var n={};if(t.unique_key){var o=e.name.substr(e.name.lastIndexOf(\\\".\\\")),a=Et()+o;n[t.unique_key]=a,t.uniqueValue=a}return n[t.file_data_name]=e,yt(t.multi_parmas,(function(e,t){n[e]=t})),JSON.stringify(n)},data:function(e,t){return e}};function Et(){var e=(new Date).getTime();return\\\"xxxxxx4xxxyxxxxxxx\\\".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),(\\\"x\\\"===t?n:3&n|8).toString(16)}))}function yt(e,t){for(var n in e)t(n,e[n])}var Nt,Rt=0;function Ot(e){this.options=function(e){var t={domain:\\\"\\\",method:\\\"POST\\\",file_data_name:\\\"file\\\",unique_key:\\\"key\\\",base64_size:4194304,chunk_size:4194304,bos_chunk_size:4294967296,stc_chunk_size:10485760,headers:{},multi_parmas:{},query:{},support_options:!0,data:Tt.form,genUId:Et};if(!e||!e.domain)throw new Error(\\\"domain is null\\\");for(var n in e)t[n]=e[n];return t}(e),this.setOptions=function(e){var t=this;yt(e,(function(e,n){t.options[e]=n}))},console.log(\\\"options\\\",e),this.upload=function(e,t){if(e){var n=this;!function(e,t,n){if(nt=e,ot=t,pt=[],t.ossConfig){const e=JSON.parse(t.ossConfig);let n,o,a=\\\"\\\";const r=[];e.forEach((e=>{const t=Number(e.p)-1;for(const i in e)\\\"aliyun\\\"===i&&(a=e[i]),\\\"s3\\\"===i&&(n=e[i]),\\\"stc\\\"===i&&(o=e[i]),\\\"p\\\"!==i&&(r[t]=[i,e[i]])})),r.forEach((function(e){e&&pt.push(e)})),e.length!==pt.length&&(pt=[[\\\"qiniu\\\",t.domain],[\\\"baidu\\\",t.uploadHost.bos],[\\\"aliyun\\\",a],[\\\"s3\\\",n],[\\\"stc\\\",o]])}else pt=[[\\\"qiniu\\\",t.domain],[\\\"baidu\\\",t.uploadHost.bos]];var o;if(t.ossConfig){var a=t&&JSON.parse(t.ossConfig);Array.isArray(a)||(a=[]),o=a.find((e=>Object.keys(e).includes(\\\"stc\\\")))}if(o&&1===parseInt(o.p)&&e.size>=4194304)Ct(e,t,n);else{var r=t.data(e,t);ht[pt[0][0]](r,t,n,e)}}(e,this.options,{onProgress:function(e,n,o){if(Nt=e,o){Nt=Rt+e/n*(n-Rt)}else Rt=Nt;t.onProgress(Nt,n)},onCompleted:function(e){t.onCompleted(e)},onError:function(e){t.onError(e)},onOpen:function(e){n.xhr=e}})}else t.onError(\\\"upload file is null.\\\")},this.cancel=function(){this.xhr&&this.xhr.abort()}}var wt={init:function(e){return new Ot(e)},dataType:Tt,resize:function(e,t,n){e.type;var o=document.createElement(\\\"canvas\\\"),a=new FileReader;a.readAsDataURL(e),a.onload=function(e){var a=e.target.result,r=new Image;r.src=a;var i=r.width,s=r.height,c=function(e,t){var n=1,o=e.width,a=t.maxWidth||0;a>0&&o>a&&(n=a/o);var r=e.height,i=t.maxHeight||0;if(i>0&&r>i){var s=i/r;n=Math.min(n,s)}var c=t.maxSize||0,u=Math.ceil(e.size/1e3);if(u>c){var d=c/u;n=Math.min(n,d)}return n}({width:i,height:s,size:e.total},t),u=a;c<1&&(u=function(e,t,n){o.width=t,o.height=n,o.getContext(\\\"2d\\\").drawImage(e,0,0,t,n);var a=\\\"image/jpg\\\";return o.toDataURL(a)}(r,i*c,s*c)),n(u)}}};const Mt=function(e,t,n){var o=document.createElement(\\\"canvas\\\"),a=o.getContext(\\\"2d\\\"),r=new Image;r.onload=function(){var i=function(e,t,n){var o,a,r,i=e<t,s=0,c=0;return(i?t/e:e/t)>n.scale?(i?(a=100,c=((r=t/(o=e/100))-n.maxHeight)/2):(r=100,s=((a=e/(o=t/100))-n.maxWidth)/2),{w:a,h:r,x:-s,y:-c}):(i?(o=t/n.maxHeight,r=n.maxHeight,a=e/o):(o=e/n.maxWidth,a=n.maxWidth,r=t/o),{w:a,h:r,x:-s,y:-c})}(r.width,r.height,t);o.width=i.w>t.maxWidth?t.maxWidth:i.w,o.height=i.h>t.maxHeight?t.maxHeight:i.h,a.drawImage(r,i.x,i.y,i.w,i.h);try{var s=o.toDataURL(e.type,t.quality),c=new RegExp(\\\"^data:image/[^;]+;base64,\\\");s=s.replace(c,\\\"\\\"),n(s)}catch(e){throw new Error(e)}},r.src=\\\"string\\\"==typeof e?\\\"data:image/jpg;base64,\\\"+e:function(e){var t=window.URL||window.webkitURL;return t?t.createObjectURL(e):\\\"\\\"}(e)},_t=function(e,t){var n=e.file,o=e.compress;Mt(n,o,t)},Ut=function(e,t){if(e.getToken)e.getToken((function(n,o){o=o||{},e.multi_parmas||(e.multi_parmas={}),e.multi_parmas.token=n,e.uploadHost||(e.uploadHost={}),e.uploadHost.bos=o.bos,e.ossConfig=o.ossConfig,e.bosHeader||(e.bosHeader={}),e.bosHeader.bosDate=o.bosDate,e.bosHeader.bosToken=o.bosToken,e.bosUploadPath=o.path,e.aliHeader={},e.aliHeader.osskeyId=o.osskeyId,e.aliHeader.ossPolicy=o.ossPolicy,e.aliHeader.ossSign=o.ossSign,e.ossBucketName=o.ossBucketName,e.uploadFileName=o.fileName,e.s3Header={},e.s3Header.s3Credential=o.s3Credential,e.s3Header.s3Algorithm=o.s3Algorithm,e.s3Header.s3Date=o.s3Date,e.s3Header.s3Policy=o.s3Policy,e.s3Header.s3Signature=o.s3Signature,e.s3BucketName=o.s3BucketName,e.stcHeader={},e.stcHeader.stcAuthorization=o.stcAuthorization,e.stcHeader.stcContentSha256=o.stcContentSha256,e.stcHeader.stcDate=o.stcDate,e.stcBucketName=o.stcBucketName,e.headers||(e.headers={}),e.base64&&(e.headers[\\\"Content-type\\\"]=\\\"application/octet-stream\\\",e.headers.Authorization=\\\"UpToken \\\"+n),console.log(\\\"data\\\",o);var a=wt.init(e);t(a)}));else{e.headers||(e.headers={}),e.base64&&(e.headers[\\\"Content-type\\\"]=\\\"application/octet-stream\\\");var n=wt.init(e);t(n)}};var xt,bt,At=function(e,t,n){t.upload(e.file,{onError:function(e){n.onError(e)},onProgress:function(e,t){n.onProgress(e,t)},onCompleted:function(t){t.filename||(t.filename=t.hash);var o=e.compressThumbnail||_t;e.compress?o(e,(function(e){t.thumbnail=e,n.onCompleted(t)})):n.onCompleted(t)}})},Pt=function(e){var t=this;this.instance=e,this.upload=function(e,n){At({file:e},t.instance,n)},this.cancel=function(){t.instance.cancel()}},Lt=function(e,t){var n=this;this.cfg=t,this.instance=e,this.upload=function(e,t){var o={file:e,compress:n.cfg};At(o,n.instance,t)},this.cancel=function(){n.instance.cancel()}},Dt=function(e,t){Ut(e,(function(n){var o={maxHeight:e.maxHeight||160,maxWidth:e.maxWidth||160,quality:e.quality||.5,scale:e.scale||2.4},a=new Lt(n,o);t(a)}))},Ht=function(e,t){Ut(e,(function(e){var n=new Pt(e);t(n)}))},kt=Dt;wt.dataType;function Gt(e){return xt=xt||new AudioContext,new Promise((function(t,n){xt.decodeAudioData(e,(function(e){t({duration:e.duration,length:e.length})}),n)}))}function Bt(e,t,n,o){return new Promise((function(a){te.imClient.context.getFileToken(e,t,n,o).then((function(e){a({code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS,data:e})})).catch((function(e){a({code:e,msg:oe[e]})}))}))}function qt(e,t,n,o,a){return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"fileType\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isValidFileType,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"filename\\\",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"saveName\\\",n,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"serverType\\\",a,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER),new Promise((function(i){te.imClient.context.getFileUrl(e,t,n,o,a).then((function(e){i({code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS,data:e})})).catch((function(e){i({code:e})}))}))}function Ft(e,t,n){return R(this,void 0,void 0,(function(){var o,a,c,u,d,l,g,f,h;return O(this,(function(p){switch(p.label){case 0:return n=n||{},t instanceof Ze==!1?(w.warn(\\\"send message fail -> message parameter is not an instance of BaseMessage\\\"),[2,ne.ILLGAL_PARAMS]):((0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.channelId\\\",null==e?void 0:e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),o=e.conversationType,a=e.targetId,c=e.channelId,u=\\\"conversationType:\\\"+o+\\\",targetId:\\\"+a,w.debug(\\\"send message  ->\\\"+u),(d=Object.assign(n,t)).channelId=c||\\\"\\\",[4,te.imClient.context.sendMessage(o,a,d)]);case 1:return l=p.sent(),g=l.code,f=l.data,g===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(h=Z(f),[2,{code:g,data:h}]):(w.warn(\\\"send message fail ->\\\"+g+\\\":\\\"+oe[g]+\\\",\\\"+u),[2,{code:g,msg:oe[g],data:Z({isMentioned:!!n.isMentioned,content:t.content,messageType:t.messageType,isPersited:t.isPersited||!1,isCounted:t.isCounted||!1,disableNotification:!!(null==n?void 0:n.disableNotification),canIncludeExpansion:!!(null==n?void 0:n.canIncludeExpansion),expansion:(null==n?void 0:n.expansion)||null,conversationType:o,targetId:a,channelId:c||\\\"\\\",senderUserId:te.imClient.context.getCurrentUserId(),messageUId:\\\"\\\",messageDirection:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.MessageDirection.SEND,isOffLineMessage:!1,sentTime:(null==f?void 0:f.sentTime)||0,receivedTime:0,isStatusMessage:n.isStatusMessage||!1,receivedStatus:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ReceivedStatus.UNREAD})}])}}))}))}function Vt(e,t,n){return Ft(e,new st(t),n)}function zt(e,t){return function(n,o,a,i){return new Promise((function(s){var c;!function(e,t,n,o){var a,r=this;if(void 0===t&&(t=_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.FileType.FILE),a=t===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.FileType.IMAGE?_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.FileType.IMAGE:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.FileType.FILE,!bt){bt=\\\"upload.qiniup.com\\\";var i=te.imClient.context.getInfoFromCache();if(i&&i.ossConfig)try{var s=JSON.parse(i.ossConfig).find((function(e){return void 0!==e.qiniu}));s&&(bt=s.qiniu)}catch(e){}}var c=N({domain:bt,getToken:function(e){te.imClient.context.getFileToken(a).then((function(t){e(t.token,t)})).catch((function(e){n.onFail(e)}))}},o);(a===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.FileType.IMAGE?kt:Ht)(c,(function(o){o.upload(e,{onProgress:function(e,t){var o,a=Math.floor(e/t*100);null===(o=n.onProgress)||void 0===o||o.call(n,a)},onCompleted:function(o){return R(r,void 0,void 0,(function(){var r=this;return O(this,(function(i){return qt(a,o.filename,o.name,o,o.uploadMethod).then((function(i){return R(r,void 0,void 0,(function(){var r,s;return O(this,(function(c){return 0!==i.code?(n.onFail(i),[2]):((r=i.data).type=e.type,r.name=o.name||o.filename,t===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.FileType.AUDIO?(\\\"function\\\"==typeof e.arrayBuffer?e.arrayBuffer().then(Gt).then((function(e){Object.assign(r,e),n.onSuccess(r)}),(function(){n.onSuccess(r)})):((s=new FileReader).onload=function(){s.result?Gt(s.result).then((function(e){Object.assign(r,e),n.onSuccess(r)}),(function(){n.onSuccess(r)})):n.onSuccess(r)},s.onerror=function(){r.duration=0,n.onSuccess(r)},s.readAsArrayBuffer(e)),[2]):(a===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.FileType.IMAGE&&(r.thumbnail=o.thumbnail),n.onSuccess(r),[2]))}))}))})).catch((function(e){n.onFail(e)})),[2]}))}))},onError:function(e){n.onFail(e)}})}))}(o.file,e,{onProgress:null==a?void 0:a.onProgress,onSuccess:function(e){var r,c=(null===(r=null==a?void 0:a.onComplete)||void 0===r?void 0:r.call(a,{url:e.downloadUrl}))||t(e,o);Ft(n,c,i).then(s)},onFail:function(e){s({code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.UPLOAD_FILE_FAILED,msg:e||_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode[_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.UPLOAD_FILE_FAILED]})}},(null===(c=i)||void 0===c?void 0:c.thumbnailConfig)||{})}))}}var Kt=zt(_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.FileType.FILE,(function(e,t){return new ut({name:e.name,size:t.file.size,type:t.file.type,fileUrl:e.downloadUrl,user:t.user,extra:t.extra})})),jt=zt(_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.FileType.IMAGE,(function(e,t){return new at({content:e.thumbnail,imageUri:e.downloadUrl,user:t.user,extra:t.extra})})),Xt=zt(_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.FileType.AUDIO,(function(e,t){return new rt({remoteUrl:e.downloadUrl,duration:e.duration,type:e.type,user:t.user,extra:t.extra})})),Wt=zt(_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.FileType.SIGHT,(function(e,t){return new it({sightUrl:e.downloadUrl,content:t.thumbnail,duration:t.duration,size:t.file.size||e.size,name:t.name||e.name,user:t.user,extra:t.extra})}));function Jt(e,t){return R(this,void 0,void 0,(function(){var n,o,a,i,c;return O(this,(function(u){switch(u.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.timestamp\\\",null==t?void 0:t.timestamp,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.count\\\",null==t?void 0:t.count,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.order\\\",null==t?void 0:t.order,(function(e){return 0===e||1===e})),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.channelId\\\",null==e?void 0:e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),n=\\\"conversationType:\\\"+e.conversationType+\\\",targetId:\\\"+e.targetId,w.debug(\\\"get history message ->\\\"+n),[4,te.imClient.context.getHistoryMessage(e.conversationType,e.targetId,null==t?void 0:t.timestamp,null==t?void 0:t.count,null==t?void 0:t.order,null==e?void 0:e.channelId)];case 1:return o=u.sent(),a=o.code,i=o.data,a===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS&&i?(c=i.list.map((function(e){return Z(e)})),[2,{code:a,data:{list:c,hasMore:i.hasMore}}]):(w.warn(\\\"get history message fail ->\\\"+a+\\\":\\\"+oe[a]+\\\",\\\"+n),[2,{code:a,msg:oe[a]}])}}))}))}function Yt(e,t){return R(this,void 0,void 0,(function(){var n,o,a,i,c;return O(this,(function(u){switch(u.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.timestamp\\\",null==t?void 0:t.timestamp,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.count\\\",null==t?void 0:t.count,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.order\\\",null==t?void 0:t.order,(function(e){return 0===e||1===e})),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.channelId\\\",null==e?void 0:e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),n=\\\"conversationType:\\\"+e.conversationType+\\\",targetId:\\\"+e.targetId,w.debug(\\\"get history message ->\\\"+n),[4,te.imClient.context.getRemoteHistoryMessages(e.conversationType,e.targetId,(null==t?void 0:t.timestamp)||0,(null==t?void 0:t.count)||20,(null==t?void 0:t.order)||0,e.channelId||\\\"\\\")];case 1:return o=u.sent(),a=o.code,i=o.data,a===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS&&i?(c=i.list.map((function(e){return Z(e)})),[2,{code:a,data:{list:c,hasMore:i.hasMore}}]):(w.warn(\\\"get history message fail ->\\\"+a+\\\":\\\"+oe[a]+\\\",\\\"+n),[2,{code:a,msg:oe[a]}])}}))}))}function Qt(e,t,n,o){return R(this,void 0,void 0,(function(){var a,r,i,s,c;return O(this,(function(u){switch(u.label){case 0:return a={targetId:e,conversationType:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ConversationType.PRIVATE,channelId:o},r=new Ze(\\\"RC:ReadNtf\\\",{messageUId:t,lastMessageSendTime:n,type:1}),[4,Ft(a,r)];case 1:return i=u.sent(),s=i.code,c=i.msg,0===s?[2,{code:s}]:[2,{code:s,msg:c}]}}))}))}function $t(e,t,n){return R(this,void 0,void 0,(function(){var o,a,r,i,c;return O(this,(function(u){switch(u.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"messageUId\\\",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"channelId\\\",n,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),o=\\\"messageUId:\\\"+t+\\\",targetId:\\\"+e,w.debug(\\\"send read receipt message ->\\\"+o),a=new Ze(\\\"RC:RRReqMsg\\\",{messageUId:t}),[4,Ft({targetId:e,conversationType:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ConversationType.GROUP,channelId:n},a)];case 1:return r=u.sent(),i=r.code,c=r.msg,0===i?[2,{code:i}]:[2,{code:i,msg:c}]}}))}))}function Zt(e,t,n){return R(this,void 0,void 0,(function(){return O(this,(function(e){throw new Error(\\\"This method is deprecated, please use method sendReadReceiptResponseV2.\\\")}))}))}function en(e,t,n){return R(this,void 0,void 0,(function(){var o,a,i,c,u,d,l;return O(this,(function(g){switch(g.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"targetId\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"messageList\\\",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.OBJECT,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"channelId\\\",n,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),Object.keys(t).forEach((function(e){(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(e,t[e],_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.ARRAY)})),o={targetId:e,conversationType:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ConversationType.GROUP,channelId:n},i=te.imClient.context.getInfoFromCache(),0!==(c=(null==i?void 0:i.grpRRVer)||0)?[3,2]:(u=new Ze(\\\"RC:RRRspMsg\\\",{receiptMessageDic:t}),[4,Ft(o,u)]);case 1:return a=g.sent(),[3,4];case 2:return 1!==c?[3,4]:(d=[],Object.keys(t).forEach((function(e){t[e].forEach((function(e){-1===d.indexOf(e)&&d.push(e)}))})),d.length?[4,te.imClient.context.sendReadReceiptMessage(e,d,n)]:(w.warn(\\\"Error in parameter messageList.\\\"),[2,{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.PARAMETER_ERROR}]));case 3:a=g.sent(),g.label=4;case 4:return(l=a.code)===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:l}]:(w.warn(\\\"send read receipt message fail ->\\\"+l+\\\":\\\"+oe[l]),[2,{code:l,msg:oe[l]}])}}))}))}function tn(e,t){return R(this,void 0,void 0,(function(){var n,o,a,r;return O(this,(function(i){switch(i.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.type\\\",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.targetId\\\",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"lastMessageSendTime\\\",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.channelId\\\",null==e?void 0:e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),n=new Ze(\\\"RC:SRSMsg\\\",{lastMessageSendTime:t}),[4,Ft(e,n)];case 1:return o=i.sent(),a=o.code,r=o.msg,0===a?[2,{code:a}]:[2,{code:a,msg:r}]}}))}))}function nn(e,t){return R(this,void 0,void 0,(function(){var n,o,a,i,c;return O(this,(function(u){switch(u.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.messageUId\\\",t.messageUId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.sentTime\\\",t.sentTime,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.disableNotification\\\",null==t?void 0:t.disableNotification,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.BOOLEAN),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.pushConfig\\\",null==t?void 0:t.pushConfig,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.OBJECT),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.channelId\\\",null==e?void 0:e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),n={user:t.user,channelId:e.channelId||\\\"\\\",disableNotification:null==t?void 0:t.disableNotification,pushConfig:null==t?void 0:t.pushConfig},o=\\\"conversationType:\\\"+e.conversationType+\\\",targetId:\\\"+e.targetId+\\\",messageUId:\\\"+t.messageUId,w.debug(\\\"recall message ->\\\"+o),[4,te.imClient.context.recallMessage(e.conversationType,e.targetId,t.messageUId,t.sentTime,n)];case 1:return a=u.sent(),i=a.code,c=a.data,i===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS&&c?[2,{code:i,data:Z(c)}]:(w.warn(\\\"recall message fail ->\\\"+i+\\\":\\\"+oe[i]+\\\",\\\"+o),[2,{code:i,msg:oe[i]}])}}))}))}function on(e,t){return R(this,void 0,void 0,(function(){var n,o;return O(this,(function(a){switch(a.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options\\\",t,(function(e){return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isArray)(e)&&e.length}),!0),t.forEach((function(e){(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.messageUId\\\",e.messageUId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.sentTime\\\",e.sentTime,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.messageDirection\\\",e.messageDirection,(function(e){return 1===e||2===e}),!0)})),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.channelId\\\",null==e?void 0:e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),n=\\\"conversationType:\\\"+e.conversationType+\\\",targetId:\\\"+e.targetId,w.debug(\\\"delete messages ->\\\"+n),[4,te.imClient.context.deleteRemoteMessage(e.conversationType,e.targetId,t,e.channelId)];case 1:return(o=a.sent())!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(w.warn(\\\"delete message fail ->\\\"+o+\\\":\\\"+oe[o]+\\\",\\\"+n),[2,{code:o,msg:oe[o]}]):[2,{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS}]}}))}))}function an(e,t){return R(this,void 0,void 0,(function(){var n,o;return O(this,(function(a){switch(a.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.timestamp\\\",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.channelId\\\",null==e?void 0:e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),n=\\\"conversationType:\\\"+e.conversationType+\\\",targetId:\\\"+e.targetId,w.debug(\\\"clear message ->\\\"+n),[4,te.imClient.context.deleteRemoteMessageByTimestamp(e.conversationType,e.targetId,t,e.channelId)];case 1:return(o=a.sent())!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(w.warn(\\\"clear message ->\\\"+o+\\\":\\\"+oe[o]+\\\",\\\"+n),[2,{code:o,msg:oe[o]}]):[2,{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS}]}}))}))}function rn(e,t){return R(this,void 0,void 0,(function(){var n,o,a,i,c,u,d,l;return O(this,(function(g){switch(g.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"expansion\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.OBJECT,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"message\\\",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.OBJECT,!0),n=t.conversationType,o=t.targetId,a=t.messageUId,i=t.canIncludeExpansion,c=t.expansion,u=t.channelId,d=\\\"conversationType:\\\"+n+\\\",targetId:\\\"+o+\\\",messageUId:\\\"+a,w.debug(\\\"update message expansion ->\\\"+d),[4,te.imClient.context.sendExpansionMessage({conversationType:n,targetId:o,messageUId:a,expansion:e,canIncludeExpansion:i,originExpansion:c,channelId:u})];case 1:return(l=g.sent().code)!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(w.warn(\\\"update message expansion fail ->\\\"+l+\\\":\\\"+oe[l]+\\\",\\\"+d),[2,{code:l,msg:oe[l]}]):[2,{code:l}]}}))}))}function sn(e,t){return R(this,void 0,void 0,(function(){var n,o,a,i,c,u,d;return O(this,(function(l){switch(l.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"keys\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.ARRAY,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"message\\\",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.OBJECT,!0),n=t.conversationType,o=t.targetId,a=t.messageUId,i=t.canIncludeExpansion,c=t.channelId,u=\\\"conversationType:\\\"+n+\\\",targetId:\\\"+o+\\\",messageUId:\\\"+a,w.debug(\\\"remove message expansion ->\\\"+u),[4,te.imClient.context.sendExpansionMessage({conversationType:n,targetId:o,messageUId:a,canIncludeExpansion:i,keys:e,channelId:c})];case 1:return(d=l.sent().code)!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(w.warn(\\\"remove message expansion fail ->\\\"+d+\\\":\\\"+oe[d]+\\\",\\\"+u),[2,{code:d,msg:oe[d]}]):[2,{code:d}]}}))}))}function cn(e,t){return R(this,void 0,void 0,(function(){var n,o,a,i,c;return O(this,(function(u){switch(u.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"typingContentType\\\",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),n=\\\"conversationType:\\\"+e.conversationType+\\\",targetId:\\\"+e.targetId,w.debug(\\\"send typing status message ->\\\"+n),o={messageType:\\\"RC:TypSts\\\",content:{typingContentType:t},isStatusMessage:!0,channelId:e.channelId},[4,te.imClient.context.sendMessage(e.conversationType,e.targetId,o)];case 1:return a=u.sent(),i=a.code,c=a.data,i===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:i,data:Z(c)}]:(w.warn(\\\"send typing status message fail ->\\\"+i+\\\":\\\"+oe[i]+\\\",\\\"+n),[2,{code:i,msg:oe[i]}])}}))}))}function un(e,t,n){return R(this,void 0,void 0,(function(){var o,a,i,c;return O(this,(function(u){switch(u.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"messageUId\\\",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),o=\\\"messageUId:\\\"+t+\\\",targetId:\\\"+e,w.debug(\\\"get message reader ->\\\"+o),[4,te.imClient.context.getMessageReader(e,t,n)];case 1:return a=u.sent(),i=a.code,c=a.data,i===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:i,data:c}]:(w.warn(\\\"get message reader fail ->\\\"+i+\\\":\\\"+oe[i]+\\\",\\\"+o),[2,{code:i,msg:oe[i]}])}}))}))}function dn(e,t,n,o,a){return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"messageType\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"isPersited\\\",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.BOOLEAN,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"isCounted\\\",n,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.BOOLEAN,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"isStatusMessage\\\",a,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.BOOLEAN,!1),te.imClient.context.registerMessageType(e,t,n,o,a),et(e,t,n)}function ln(e){return R(this,void 0,void 0,(function(){var t,n,o;return O(this,(function(a){switch(a.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.usingCppEngine)()?((0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.conversationType\\\",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.targetId\\\",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.channelId\\\",null==e?void 0:e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),[4,te.imClient.context.getFirstUnreadMessage(e.conversationType,e.targetId,e.channelId)]):[2,{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT,msg:oe[_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT]}];case 1:return t=a.sent(),n=t.code,o=t.data,n===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:n,data:o}]:(w.warn(\\\"insertMessage ->code:\\\"+n+\\\",targetId:\\\"+e.targetId),[2,{code:n,msg:oe[n]}])}}))}))}function gn(e,t,n){return void 0===n&&(n={}),R(this,void 0,void 0,(function(){var o,a,i,s,c,u,d,l,g,f,m,h,p,v,I,S;return O(this,(function(T){switch(T.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.usingCppEngine)()?(o=t.senderUserId,a=t.messageType,i=t.content,s=t.messageDirection,c=t.messageUId,u=t.canIncludeExpansion,d=t.expansion,l=t.disableNotification,g=t.sentTime,f=t.sentStatus,w.info(\\\"insertMessage ->targetId:\\\"+e.targetId+\\\",conversationType:\\\"+e.conversationType),m=n.isUnread,h=n.searchContent,p={senderUserId:o,messageType:a,content:i,messageDirection:s,sentTime:g,sentStatus:f,searchContent:h,isUnread:m,messageUId:c,disableNotification:l,canIncludeExpansion:u,expansionMsg:JSON.stringify(d),channelId:e.channelId||\\\"\\\"},[4,te.imClient.context.insertMessage(e.conversationType,e.targetId,p)]):[2,{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT,msg:oe[_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT]}];case 1:return v=T.sent(),I=v.code,S=v.data,I===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:I,data:Z(S)}]:(w.warn(\\\"insertMessage ->code:\\\"+I+\\\",targetId:\\\"+e.targetId),[2,{code:I,msg:oe[I]}])}}))}))}function fn(e){return R(this,void 0,void 0,(function(){var t,n,o;return O(this,(function(a){switch(a.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.usingCppEngine)()?[4,te.imClient.context.getMessage(e)]:[2,{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT,msg:oe[_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT]}];case 1:return t=a.sent(),n=t.code,o=t.data,n===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:n,data:Z(o)}]:(w.warn(\\\"getMessage ->code:\\\"+n+\\\",messageId:\\\"+e),[2,{code:n,msg:oe[n]}])}}))}))}function mn(e){if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.usingCppEngine)())return{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT,msg:oe[_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT]};(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversationType\\\",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"targetId\\\",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0);var t=te.imClient.context.getUnreadMentionedMessages(e.conversationType,e.targetId),n=[];return t&&t.length&&t.forEach((function(e){return n.push(Z(e))})),{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS,data:n}}function hn(e,t,n,o){return R(this,void 0,void 0,(function(){var a,i,c,u;return O(this,(function(d){switch(d.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.usingCppEngine)()?((0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversationType\\\",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"targetId\\\",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"keyword\\\",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"timestamp\\\",n,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"count\\\",o,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER),1,[4,te.imClient.context.searchMessageByContent(e.conversationType,e.targetId,t,n,o,1,e.channelId)]):[2,{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT,msg:oe[_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT]}];case 1:return a=d.sent(),i=a.code,c=a.data,i===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(u=[],(null==c?void 0:c.messages)&&c.messages.length&&c.messages.forEach((function(e){return u.push(Z(e))})),[2,{code:i,data:{messages:u,count:null==c?void 0:c.count}}]):(w.warn(\\\"searchMessages ->code:\\\"+i+\\\",targetId:\\\"+e.targetId),[2,{code:i,msg:oe[i]}])}}))}))}function pn(e,t,n){return R(this,void 0,void 0,(function(){var o;return O(this,(function(a){switch(a.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.usingCppEngine)()?((0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversationType\\\",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"targetId\\\",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"timestamp\\\",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"cleanSpace\\\",n,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.BOOLEAN),[4,te.imClient.context.deleteMessagesByTimestamp(e.conversationType,e.targetId,t,n,e.channelId)]):[2,{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT,msg:oe[_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT]}];case 1:return(o=a.sent())===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:o}]:(w.warn(\\\"deleteLocalMessagesByTimestamp ->code:\\\"+o+\\\",targetId:\\\"+e.targetId),[2,{code:o,msg:oe[o]}])}}))}))}function vn(e){return R(this,void 0,void 0,(function(){var t;return O(this,(function(n){switch(n.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.usingCppEngine)()?(w.info(\\\"clearMessages ->targetId:\\\"+e.targetId+\\\",conversationType:\\\"+e.conversationType),[4,te.imClient.context.clearMessages(e.conversationType,e.targetId,e.channelId)]):[2,{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT,msg:oe[_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT]}];case 1:return(t=n.sent())===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:t}]:(w.warn(\\\"clearMessages ->code:\\\"+t+\\\",targetId:\\\"+e.targetId),[2,{code:t,msg:oe[t]}])}}))}))}function In(e,t,n,o){return R(this,void 0,void 0,(function(){var a,i,s;return O(this,(function(c){switch(c.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.usingCppEngine)()?(w.info(\\\"searchConversationByContent ->keyword:\\\"+e),[4,te.imClient.context.searchConversationByContent(e,n,o,t)]):[2,{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT,msg:oe[_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT]}];case 1:return a=c.sent(),i=a.code,s=a.data,i===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:i,data:s}]:(w.warn(\\\"searchConversationByContent ->code:\\\"+i+\\\",keyword:\\\"+e),[2,{code:i,msg:oe[i]}])}}))}))}function Sn(e,t){return R(this,void 0,void 0,(function(){var n;return O(this,(function(o){switch(o.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.usingCppEngine)()?(w.info(\\\"clearUnreadCountByTimestamp ->targetId:\\\"+e.targetId+\\\",conversationType:\\\"+e.conversationType),[4,te.imClient.context.clearUnreadCountByTimestamp(e.conversationType,e.targetId,t,e.channelId)]):[2,{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT,msg:oe[_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT]}];case 1:return(n=o.sent())===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:n}]:(w.warn(\\\"clearUnreadCountByTimestamp ->code:\\\"+n+\\\",targetId:\\\"+e.targetId),[2,{code:n,msg:oe[n]}])}}))}))}function Cn(e,t){return R(this,void 0,void 0,(function(){var n;return O(this,(function(o){switch(o.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.usingCppEngine)()?((0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"messageId\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"receivedStatus\\\",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),w.info(\\\"setMessageReceivedStatus ->messageId:\\\"+e+\\\",receivedStatus:\\\"+t),[4,te.imClient.context.setMessageReceivedStatus(e,t)]):[2,{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT,msg:oe[_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.NOT_SUPPORT]}];case 1:return(n=o.sent())===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:n}]:(w.warn(\\\"setMessageReceivedStatus ->code:\\\"+n+\\\",messageId:\\\"+e),[2,{code:n,msg:oe[n]}])}}))}))}function Tn(e){return R(this,void 0,void 0,(function(){var t;return O(this,(function(n){switch(n.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"tag.tagId\\\",e.tagId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"tag.tagId\\\",e.tagId,(function(e){return e.length<=10})),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"tag.tagName\\\",e.tagName,(function(e){return e.length<=15})),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"tag.tagName\\\",e.tagName,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),w.info(\\\"createTag ->tagId:\\\"+e.tagId+\\\",tagName:\\\"+e.tagName),[4,te.imClient.context.createTag(e)];case 1:return(t=n.sent().code)===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:t}]:(w.warn(\\\"createTag ->code:\\\"+t+\\\",tagId:\\\"+e.tagId),[2,{code:t,msg:oe[t]}])}}))}))}function En(e){return R(this,void 0,void 0,(function(){var t;return O(this,(function(n){switch(n.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"tagId\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),w.info(\\\"removeTag ->tagId:\\\"+e),[4,te.imClient.context.removeTag(e)];case 1:return(t=n.sent().code)===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:t}]:(w.warn(\\\"removeTag ->code:\\\"+t+\\\",tagId:\\\"+e),[2,{code:t,msg:oe[t]}])}}))}))}function yn(e){return R(this,void 0,void 0,(function(){var t;return O(this,(function(n){switch(n.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"tag.tagId\\\",e.tagId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"tag.tagName\\\",e.tagName,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"tag.tagName\\\",e.tagName,(function(e){return e.length<=15})),w.info(\\\"updateTag ->tagId:\\\"+e.tagId+\\\",tagName:\\\"+e.tagName),[4,te.imClient.context.updateTag(e)];case 1:return(t=n.sent().code)===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:t}]:(w.warn(\\\"updateTag ->code:\\\"+t+\\\",tagId:\\\"+e.tagId),[2,{code:t,msg:oe[t]}])}}))}))}function Nn(){return R(this,void 0,void 0,(function(){var e,t,n;return O(this,(function(o){switch(o.label){case 0:return[4,te.imClient.context.getTagList()];case 1:return e=o.sent(),t=e.code,n=e.data,t===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS,data:n}]:(w.warn(\\\"getTagList ->code:\\\"+t),[2,{code:t,msg:oe[t]}])}}))}))}function Rn(e){return R(this,void 0,void 0,(function(){var t,n,o;return O(this,(function(a){switch(a.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversationType\\\",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"targetId\\\",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"channelId\\\",e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),w.info(\\\"getTagsForConversation ->targetId:\\\"+e.targetId+\\\",conversationType:\\\"+e.conversationType),[4,te.imClient.context.getTagsForConversation(e)];case 1:return t=a.sent(),n=t.code,o=t.data,n===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:n,data:o}]:[2,{code:n,msg:oe[n]}]}}))}))}function On(e,t){return R(this,void 0,void 0,(function(){var n;return O(this,(function(o){switch(o.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"tagId\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversations\\\",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.ARRAY,!0),t.forEach((function(e){(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.conversationType\\\",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.targetId\\\",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.channelId\\\",e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID)})),w.info(\\\"addTagForConversations ->tagId:\\\"+e),[4,te.imClient.context.addTagForConversations(e,t)];case 1:return(n=o.sent().code)===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:n}]:(w.warn(\\\"addTagForConversations ->code:\\\"+n+\\\",tagId:\\\"+e),[2,{code:n,msg:oe[n]}])}}))}))}function wn(e,t){return R(this,void 0,void 0,(function(){var n;return O(this,(function(o){switch(o.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"tagId\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversations\\\",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.ARRAY,!0),t.forEach((function(e){(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.conversationType\\\",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.targetId\\\",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.channelId\\\",e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID)})),w.info(\\\"removeTagForConversations ->tagId:\\\"+e),[4,te.imClient.context.removeTagForConversations(e,t)];case 1:return(n=o.sent().code)===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:n}]:(w.warn(\\\"removeTagForConversations ->code:\\\"+n+\\\",tagId:\\\"+e),[2,{code:n,msg:oe[n]}])}}))}))}function Mn(e,t){return R(this,void 0,void 0,(function(){var n;return O(this,(function(o){switch(o.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.conversationType\\\",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.targetId\\\",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.channelId\\\",e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"tagIds\\\",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.ARRAY,!0),t.forEach((function(e){(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"tagId\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0)})),w.info(\\\"removeTagsForConversation ->tagIds:\\\"+t+\\\",targetId:\\\"+e.targetId+\\\",conversationType:\\\"+e.conversationType),[4,te.imClient.context.removeTagsForConversation(e,t)];case 1:return(n=o.sent().code)===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:n}]:(w.warn(\\\"removeTagsForConversation ->code:\\\"+n+\\\",tagIds:\\\"+t),[2,{code:n,msg:oe[n]}])}}))}))}function _n(e,t){return R(this,void 0,void 0,(function(){var n;return O(this,(function(o){switch(o.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"tagId\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversations\\\",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.ARRAY,!0),t.forEach((function(e){(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.conversationType\\\",e.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.targetId\\\",e.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.channelId\\\",e.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID)})),w.info(\\\"removeTagForConversations ->tagId:\\\"+e),[4,te.imClient.context.removeTagForConversations(e,t)];case 1:return(n=o.sent().code)===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:n}]:(w.warn(\\\"removeTagForConversations ->code:\\\"+n+\\\",tagId:\\\"+e),[2,{code:n,msg:oe[n]}])}}))}))}function Un(e,t,n){return R(this,void 0,void 0,(function(){var o,a,i;return O(this,(function(c){switch(c.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"tagId\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"count\\\",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"startTime\\\",n,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),w.info(\\\"getConversationListByTag ->tagId:\\\"+e),[4,te.imClient.context.getConversationListByTag(e,n,t)];case 1:return o=c.sent(),a=o.code,i=o.data,a===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:a,data:i}]:(w.warn(\\\"getConversationListByTag ->code:\\\"+a+\\\",tagId:\\\"+e),[2,{code:a,msg:oe[a]}])}}))}))}function xn(e,t){return R(this,void 0,void 0,(function(){var n,o,a;return O(this,(function(i){switch(i.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"tagId\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"containMuted\\\",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.BOOLEAN,!0),w.info(\\\"getUnreadCountByTag ->tagId:\\\"+e),[4,te.imClient.context.getUnreadCountByTag(e,t)];case 1:return n=i.sent(),o=n.code,a=n.data,w.info(o,a),o===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:o,data:a}]:(w.warn(\\\"getUnreadCountByTag ->code:\\\"+o+\\\",tagId:\\\"+e),[2,{code:o,msg:oe[o]}])}}))}))}function bn(e,t,n){return R(this,void 0,void 0,(function(){var o,a;return O(this,(function(i){switch(i.label){case 0:return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"tagId\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.targetId\\\",t.targetId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.STRING,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.conversationType\\\",t.conversationType,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.NUMBER,!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"conversation.channelId\\\",t.channelId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.CHANNEL_ID),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"status.isTop\\\",n,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.AssertRules.BOOLEAN,!0),w.info(\\\"setConversationStatusInTag ->tagId:\\\"+e+\\\",targetId:\\\"+t.targetId+\\\",conversationType\\\"+t.conversationType),[4,te.imClient.context.setConversationStatusInTag(e,t,{isTop:n})];case 1:return o=i.sent(),(a=o.code)===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?[2,{code:a}]:(w.warn(\\\"setConversationStatusInTag ->code:\\\"+a+\\\",tagId:\\\"+e),[2,{code:a,msg:oe[a]}])}}))}))}zt(_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.FileType.COMBINE_HTML,(function(e,t){return new ct({remoteUrl:e.downloadUrl,nameList:t.nameList,summaryList:t.summaryList,conversationType:t.conversationType,user:t.user,extra:t.extra})}));var An={COMET:\\\"comet\\\",WEBSOCKET:\\\"websocket\\\"},Pn={TEXT:\\\"RC:TxtMsg\\\",VOICE:\\\"RC:VcMsg\\\",HQ_VOICE:\\\"RC:HQVCMsg\\\",IMAGE:\\\"RC:ImgMsg\\\",GIF:\\\"RC:GIFMsg\\\",RICH_CONTENT:\\\"RC:ImgTextMsg\\\",LOCATION:\\\"RC:LBSMsg\\\",FILE:\\\"RC:FileMsg\\\",SIGHT:\\\"RC:SightMsg\\\",COMBINE:\\\"RC:CombineMsg\\\",CHRM_KV_NOTIFY:\\\"RC:chrmKVNotiMsg\\\",LOG_COMMAND:\\\"RC:LogCmdMsg\\\",EXPANSION_NOTIFY:\\\"RC:MsgExMsg\\\",REFERENCE:\\\"RC:ReferenceMsg\\\",RECALL_MESSAGE_TYPE:\\\"RC:RcCmd\\\"};_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.VersionManage.add(\\\"imlib\\\",\\\"5.1.2\\\"),_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.VersionManage.validEngine(\\\"~5.1.2\\\")||w.error(\\\"The current engine version '\\\"+_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.VersionManage.getInfo().engine+\\\"' error，imlib required engine version at least '~5.1.2'.\\\");\\n\\n\\n//# sourceURL=webpack://@rongcloud/rcvoiceroomlib-v1/./node_modules/@rongcloud/imlib-next/dist/index.esm.js?\");\n\n/***/ }),\n\n/***/ \"./node_modules/@rongcloud/plugin-rtc/dist/index.esm.js\":\n/*!**************************************************************!*\\\n  !*** ./node_modules/@rongcloud/plugin-rtc/dist/index.esm.js ***!\n  \\**************************************************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\neval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   \\\"RTCJoinType\\\": () => (/* reexport safe */ _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCJoinType),\\n/* harmony export */   \\\"BackgroundPictureFillMode\\\": () => (/* binding */ ir),\\n/* harmony export */   \\\"MixLayoutMode\\\": () => (/* binding */ nr),\\n/* harmony export */   \\\"MixVideoRenderMode\\\": () => (/* binding */ sr),\\n/* harmony export */   \\\"RCAbstractRoom\\\": () => (/* binding */ rr),\\n/* harmony export */   \\\"RCAudienceClient\\\": () => (/* binding */ Rr),\\n/* harmony export */   \\\"RCAudienceLivingRoom\\\": () => (/* binding */ Tr),\\n/* harmony export */   \\\"RCCameraVideoTrack\\\": () => (/* binding */ it),\\n/* harmony export */   \\\"RCFrameRate\\\": () => (/* binding */ Be),\\n/* harmony export */   \\\"RCInnerCDNPullIsHttps\\\": () => (/* binding */ Sr),\\n/* harmony export */   \\\"RCInnerCDNPullKind\\\": () => (/* binding */ gr),\\n/* harmony export */   \\\"RCKickReason\\\": () => (/* binding */ yr),\\n/* harmony export */   \\\"RCLivingRoom\\\": () => (/* binding */ _r),\\n/* harmony export */   \\\"RCLivingType\\\": () => (/* binding */ lr),\\n/* harmony export */   \\\"RCLocalAudioTrack\\\": () => (/* binding */ Qe),\\n/* harmony export */   \\\"RCLocalFileAudioTrack\\\": () => (/* binding */ tt),\\n/* harmony export */   \\\"RCLocalFileTrack\\\": () => (/* binding */ Ze),\\n/* harmony export */   \\\"RCLocalFileVideoTrack\\\": () => (/* binding */ et),\\n/* harmony export */   \\\"RCLocalTrack\\\": () => (/* binding */ ze),\\n/* harmony export */   \\\"RCLocalVideoTrack\\\": () => (/* binding */ Xe),\\n/* harmony export */   \\\"RCMCUConfigBuilder\\\": () => (/* binding */ ar),\\n/* harmony export */   \\\"RCMediaType\\\": () => (/* binding */ Fe),\\n/* harmony export */   \\\"RCMicphoneAudioTrack\\\": () => (/* binding */ rt),\\n/* harmony export */   \\\"RCRTCClient\\\": () => (/* binding */ Er),\\n/* harmony export */   \\\"RCRTCCode\\\": () => (/* binding */ T),\\n/* harmony export */   \\\"RCRTCLiveRole\\\": () => (/* binding */ Xt),\\n/* harmony export */   \\\"RCRTCPingResult\\\": () => (/* binding */ Dt),\\n/* harmony export */   \\\"RCRTCRoom\\\": () => (/* binding */ mr),\\n/* harmony export */   \\\"RCRemoteAudioTrack\\\": () => (/* binding */ ot),\\n/* harmony export */   \\\"RCRemoteTrack\\\": () => (/* binding */ st),\\n/* harmony export */   \\\"RCRemoteVideoTrack\\\": () => (/* binding */ at),\\n/* harmony export */   \\\"RCResolution\\\": () => (/* binding */ He),\\n/* harmony export */   \\\"RCScreenVideoTrack\\\": () => (/* binding */ nt),\\n/* harmony export */   \\\"RCTag\\\": () => (/* binding */ br),\\n/* harmony export */   \\\"RCTrack\\\": () => (/* binding */ qe),\\n/* harmony export */   \\\"device\\\": () => (/* binding */ Ye),\\n/* harmony export */   \\\"helper\\\": () => (/* binding */ Pr),\\n/* harmony export */   \\\"installer\\\": () => (/* binding */ kr)\\n/* harmony export */ });\\n/* harmony import */ var _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @rongcloud/engine */ \\\"./node_modules/@rongcloud/engine/dist/index.esm.js\\\");\\n\\n/*! *****************************************************************************\\nCopyright (c) Microsoft Corporation.\\n\\nPermission to use, copy, modify, and/or distribute this software for any\\npurpose with or without fee is hereby granted.\\n\\nTHE SOFTWARE IS PROVIDED \\\"AS IS\\\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\\nPERFORMANCE OF THIS SOFTWARE.\\n***************************************************************************** */function S(e,t,r,i){return new(r||(r=Promise))((function(n,s){function o(e){try{c(i.next(e))}catch(e){s(e)}}function a(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((i=i.apply(e,t||[])).next())}))}const C=new _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.Logger(\\\"RCRTC\\\");var T,I;!function(e){e[e.SUCCESS=1e4]=\\\"SUCCESS\\\",e[e.SIGNAL_DISCONNECTED=5e4]=\\\"SIGNAL_DISCONNECTED\\\",e[e.PARAMS_ERROR=50001]=\\\"PARAMS_ERROR\\\",e[e.REPERT_JOIN_ROOM=50002]=\\\"REPERT_JOIN_ROOM\\\",e[e.NOT_IN_ROOM=50003]=\\\"NOT_IN_ROOM\\\",e[e.SERVICE_INVALID=50004]=\\\"SERVICE_INVALID\\\",e[e.RTC_TOKEN_INVALID=50006]=\\\"RTC_TOKEN_INVALID\\\",e[e.SIGNAL_ERROR=53001]=\\\"SIGNAL_ERROR\\\",e[e.CREATE_OFFER_FAILED=53003]=\\\"CREATE_OFFER_FAILED\\\",e[e.REQUEST_FAILED=53004]=\\\"REQUEST_FAILED\\\",e[e.MCU_SERVER_NOT_FOUND=53005]=\\\"MCU_SERVER_NOT_FOUND\\\",e[e.BROADCAST_SUB_LIST_NOT_EMPTY=53007]=\\\"BROADCAST_SUB_LIST_NOT_EMPTY\\\",e[e.ROOM_HAS_BEEN_DESTROYED=53008]=\\\"ROOM_HAS_BEEN_DESTROYED\\\",e[e.NOT_OPEN_VIDEO_AUDIO_SERVER=53009]=\\\"NOT_OPEN_VIDEO_AUDIO_SERVER\\\",e[e.GET_USER_MEDIA_FAILED=53010]=\\\"GET_USER_MEDIA_FAILED\\\",e[e.GET_DISPLAY_MEDIA_FAILED=53011]=\\\"GET_DISPLAY_MEDIA_FAILED\\\",e[e.PERMISSION_DENIED=53012]=\\\"PERMISSION_DENIED\\\",e[e.CREATE_CUSTOM_TRACK_FAILED=53013]=\\\"CREATE_CUSTOM_TRACK_FAILED\\\",e[e.INVALID_TAGS=53014]=\\\"INVALID_TAGS\\\",e[e.INVALID_USER_ID=53015]=\\\"INVALID_USER_ID\\\",e[e.CREATE_FILE_TRACK_FAILED=53016]=\\\"CREATE_FILE_TRACK_FAILED\\\",e[e.INVALID_FILE_INSTANCE=53017]=\\\"INVALID_FILE_INSTANCE\\\",e[e.SET_REMOTE_DESCRIPTION_FAILED=53018]=\\\"SET_REMOTE_DESCRIPTION_FAILED\\\",e[e.BROWSER_NOT_SUPPORT=53019]=\\\"BROWSER_NOT_SUPPORT\\\",e[e.TRACK_NOT_READY=53020]=\\\"TRACK_NOT_READY\\\",e[e.VIDEO_TRACK_MISS_MEDIA_ELEMENT=53021]=\\\"VIDEO_TRACK_MISS_MEDIA_ELEMENT\\\",e[e.TRACK_PLAY_ERROR=53022]=\\\"TRACK_PLAY_ERROR\\\",e[e.SIGNAL_AUDIENCE_JOIN_ROOM_FAILED=53023]=\\\"SIGNAL_AUDIENCE_JOIN_ROOM_FAILED\\\",e[e.SIGNAL_ROOM_CHANGE_IDENTITY_FAILED=53024]=\\\"SIGNAL_ROOM_CHANGE_IDENTITY_FAILED\\\",e[e.PACKAGE_ENVIRONMENT_ERROR=53025]=\\\"PACKAGE_ENVIRONMENT_ERROR\\\",e[e.PUBLISH_TRACK_LIMIT_EXCEEDED=53026]=\\\"PUBLISH_TRACK_LIMIT_EXCEEDED\\\",e[e.CDN_RESOURCE_IS_EMPTY=53027]=\\\"CDN_RESOURCE_IS_EMPTY\\\",e[e.SIGNAL_JOIN_RTC_ROOM_REFUSED=53028]=\\\"SIGNAL_JOIN_RTC_ROOM_REFUSED\\\",e[e.NO_PERMISSION_TO_USE_REQUESTED_DEVICE=53029]=\\\"NO_PERMISSION_TO_USE_REQUESTED_DEVICE\\\",e[e.THE_FUNCTION_IS_DISABLED_IN_PKROOM=53030]=\\\"THE_FUNCTION_IS_DISABLED_IN_PKROOM\\\"}(T||(T={})),function(e){e[e.JOIN_REFUSED=40032]=\\\"JOIN_REFUSED\\\"}(I||(I={}));class E{constructor(){this.queue=[],this.locked=!1}checkToStart(){return S(this,void 0,void 0,(function*(){if(0===this.queue.length||this.locked)return;this.locked=!0;const{resolve:e,task:t,reject:r}=this.queue.shift();let i;try{i=yield t(),e(i)}catch(e){r(e)}this.locked=!1,this.checkToStart()}))}push(e){const t=new Promise(((t,r)=>{this.queue.push({resolve:t,task:e,reject:r})}));return this.checkToStart(),t}}const y=new E,k=e=>y.push(e);let b=!0,P=!0;function O(e,t,r){const i=e.match(t);return i&&i.length>=r&&parseInt(i[r],10)}function L(e,t,r){if(!e.RTCPeerConnection)return;const i=e.RTCPeerConnection.prototype,n=i.addEventListener;i.addEventListener=function(e,i){if(e!==t)return n.apply(this,arguments);const s=e=>{const t=r(e);t&&(i.handleEvent?i.handleEvent(t):i(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(i,s),n.apply(this,[e,s])};const s=i.removeEventListener;i.removeEventListener=function(e,r){if(e!==t||!this._eventMap||!this._eventMap[t])return s.apply(this,arguments);if(!this._eventMap[t].has(r))return s.apply(this,arguments);const i=this._eventMap[t].get(r);return this._eventMap[t].delete(r),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,s.apply(this,[e,i])},Object.defineProperty(i,\\\"on\\\"+t,{get(){return this[\\\"_on\\\"+t]},set(e){this[\\\"_on\\\"+t]&&(this.removeEventListener(t,this[\\\"_on\\\"+t]),delete this[\\\"_on\\\"+t]),e&&this.addEventListener(t,this[\\\"_on\\\"+t]=e)},enumerable:!0,configurable:!0})}function N(e){return\\\"boolean\\\"!=typeof e?new Error(\\\"Argument type: \\\"+typeof e+\\\". Please use a boolean.\\\"):(b=e,e?\\\"adapter.js logging disabled\\\":\\\"adapter.js logging enabled\\\")}function D(e){return\\\"boolean\\\"!=typeof e?new Error(\\\"Argument type: \\\"+typeof e+\\\". Please use a boolean.\\\"):(P=!e,\\\"adapter.js deprecation warnings \\\"+(e?\\\"disabled\\\":\\\"enabled\\\"))}function A(){if(\\\"object\\\"==typeof window){if(b)return;\\\"undefined\\\"!=typeof console&&\\\"function\\\"==typeof console.log&&console.log.apply(console,arguments)}}function M(e,t){P&&console.warn(e+\\\" is deprecated, please use \\\"+t+\\\" instead.\\\")}function x(e){return\\\"[object Object]\\\"===Object.prototype.toString.call(e)}function U(e){return x(e)?Object.keys(e).reduce((function(t,r){const i=x(e[r]),n=i?U(e[r]):e[r],s=i&&!Object.keys(n).length;return void 0===n||s?t:Object.assign(t,{[r]:n})}),{}):e}function w(e,t,r){t&&!r.has(t.id)&&(r.set(t.id,t),Object.keys(t).forEach((i=>{i.endsWith(\\\"Id\\\")?w(e,e.get(t[i]),r):i.endsWith(\\\"Ids\\\")&&t[i].forEach((t=>{w(e,e.get(t),r)}))})))}function $(e,t,r){const i=r?\\\"outbound-rtp\\\":\\\"inbound-rtp\\\",n=new Map;if(null===t)return n;const s=[];return e.forEach((e=>{\\\"track\\\"===e.type&&e.trackIdentifier===t.id&&s.push(e)})),s.forEach((t=>{e.forEach((r=>{r.type===i&&r.trackId===t.id&&w(e,r,n)}))})),n}const j=A;function V(e,t){const r=e&&e.navigator;if(!r.mediaDevices)return;const i=function(e){if(\\\"object\\\"!=typeof e||e.mandatory||e.optional)return e;const t={};return Object.keys(e).forEach((r=>{if(\\\"require\\\"===r||\\\"advanced\\\"===r||\\\"mediaSource\\\"===r)return;const i=\\\"object\\\"==typeof e[r]?e[r]:{ideal:e[r]};void 0!==i.exact&&\\\"number\\\"==typeof i.exact&&(i.min=i.max=i.exact);const n=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):\\\"deviceId\\\"===t?\\\"sourceId\\\":t};if(void 0!==i.ideal){t.optional=t.optional||[];let e={};\\\"number\\\"==typeof i.ideal?(e[n(\\\"min\\\",r)]=i.ideal,t.optional.push(e),e={},e[n(\\\"max\\\",r)]=i.ideal,t.optional.push(e)):(e[n(\\\"\\\",r)]=i.ideal,t.optional.push(e))}void 0!==i.exact&&\\\"number\\\"!=typeof i.exact?(t.mandatory=t.mandatory||{},t.mandatory[n(\\\"\\\",r)]=i.exact):[\\\"min\\\",\\\"max\\\"].forEach((e=>{void 0!==i[e]&&(t.mandatory=t.mandatory||{},t.mandatory[n(e,r)]=i[e])}))})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},n=function(e,n){if(t.version>=61)return n(e);if((e=JSON.parse(JSON.stringify(e)))&&\\\"object\\\"==typeof e.audio){const t=function(e,t,r){t in e&&!(r in e)&&(e[r]=e[t],delete e[t])};t((e=JSON.parse(JSON.stringify(e))).audio,\\\"autoGainControl\\\",\\\"googAutoGainControl\\\"),t(e.audio,\\\"noiseSuppression\\\",\\\"googNoiseSuppression\\\"),e.audio=i(e.audio)}if(e&&\\\"object\\\"==typeof e.video){let s=e.video.facingMode;s=s&&(\\\"object\\\"==typeof s?s:{ideal:s});const o=t.version<66;if(s&&(\\\"user\\\"===s.exact||\\\"environment\\\"===s.exact||\\\"user\\\"===s.ideal||\\\"environment\\\"===s.ideal)&&(!r.mediaDevices.getSupportedConstraints||!r.mediaDevices.getSupportedConstraints().facingMode||o)){let t;if(delete e.video.facingMode,\\\"environment\\\"===s.exact||\\\"environment\\\"===s.ideal?t=[\\\"back\\\",\\\"rear\\\"]:\\\"user\\\"!==s.exact&&\\\"user\\\"!==s.ideal||(t=[\\\"front\\\"]),t)return r.mediaDevices.enumerateDevices().then((r=>{let o=(r=r.filter((e=>\\\"videoinput\\\"===e.kind))).find((e=>t.some((t=>e.label.toLowerCase().includes(t)))));return!o&&r.length&&t.includes(\\\"back\\\")&&(o=r[r.length-1]),o&&(e.video.deviceId=s.exact?{exact:o.deviceId}:{ideal:o.deviceId}),e.video=i(e.video),j(\\\"chrome: \\\"+JSON.stringify(e)),n(e)}))}e.video=i(e.video)}return j(\\\"chrome: \\\"+JSON.stringify(e)),n(e)},s=function(e){return t.version>=64?e:{name:{PermissionDeniedError:\\\"NotAllowedError\\\",PermissionDismissedError:\\\"NotAllowedError\\\",InvalidStateError:\\\"NotAllowedError\\\",DevicesNotFoundError:\\\"NotFoundError\\\",ConstraintNotSatisfiedError:\\\"OverconstrainedError\\\",TrackStartError:\\\"NotReadableError\\\",MediaDeviceFailedDueToShutdown:\\\"NotAllowedError\\\",MediaDeviceKillSwitchOn:\\\"NotAllowedError\\\",TabCaptureError:\\\"AbortError\\\",ScreenCaptureError:\\\"AbortError\\\",DeviceCaptureError:\\\"AbortError\\\"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&\\\": \\\")+this.message}}};if(r.getUserMedia=function(e,t,i){n(e,(e=>{r.webkitGetUserMedia(e,t,(e=>{i&&i(s(e))}))}))}.bind(r),r.mediaDevices.getUserMedia){const e=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(t){return n(t,(t=>e(t).then((e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach((e=>{e.stop()})),new DOMException(\\\"\\\",\\\"NotFoundError\\\");return e}),(e=>Promise.reject(s(e))))))}}}function B(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function H(e){if(\\\"object\\\"==typeof e&&e.RTCPeerConnection&&!(\\\"ontrack\\\"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,\\\"ontrack\\\",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener(\\\"track\\\",this._ontrack),this.addEventListener(\\\"track\\\",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener(\\\"addtrack\\\",(r=>{let i;i=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===r.track.id)):{track:r.track};const n=new Event(\\\"track\\\");n.track=r.track,n.receiver=i,n.transceiver={receiver:i},n.streams=[t.stream],this.dispatchEvent(n)})),t.stream.getTracks().forEach((r=>{let i;i=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===r.id)):{track:r};const n=new Event(\\\"track\\\");n.track=r,n.receiver=i,n.transceiver={receiver:i},n.streams=[t.stream],this.dispatchEvent(n)}))},this.addEventListener(\\\"addstream\\\",this._ontrackpoly)),t.apply(this,arguments)}}else L(e,\\\"track\\\",(e=>(e.transceiver||Object.defineProperty(e,\\\"transceiver\\\",{value:{receiver:e.receiver}}),e)))}function F(e){if(\\\"object\\\"==typeof e&&e.RTCPeerConnection&&!(\\\"getSenders\\\"in e.RTCPeerConnection.prototype)&&\\\"createDTMFSender\\\"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&(\\\"audio\\\"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const r=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,i){let n=r.apply(this,arguments);return n||(n=t(this,e),this._senders.push(n)),n};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){i.apply(this,arguments);const t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],r.apply(this,[e]),e.getTracks().forEach((e=>{this._senders.push(t(this,e))}))};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],i.apply(this,[e]),e.getTracks().forEach((e=>{const t=this._senders.find((t=>t.track===e));t&&this._senders.splice(this._senders.indexOf(t),1)}))}}else if(\\\"object\\\"==typeof e&&e.RTCPeerConnection&&\\\"getSenders\\\"in e.RTCPeerConnection.prototype&&\\\"createDTMFSender\\\"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!(\\\"dtmf\\\"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e},Object.defineProperty(e.RTCRtpSender.prototype,\\\"dtmf\\\",{get(){return void 0===this._dtmf&&(\\\"audio\\\"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function K(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,r,i]=arguments;if(arguments.length>0&&\\\"function\\\"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||\\\"function\\\"!=typeof e))return t.apply(this,[]);const n=function(e){const t={};return e.result().forEach((e=>{const r={id:e.id,timestamp:e.timestamp,type:{localcandidate:\\\"local-candidate\\\",remotecandidate:\\\"remote-candidate\\\"}[e.type]||e.type};e.names().forEach((t=>{r[t]=e.stat(t)})),t[r.id]=r})),t},s=function(e){return new Map(Object.keys(e).map((t=>[t,e[t]])))};if(arguments.length>=2){const i=function(e){r(s(n(e)))};return t.apply(this,[i,e])}return new Promise(((e,r)=>{t.apply(this,[function(t){e(s(n(t)))},r])})).then(r,i)}}function G(e){if(!(\\\"object\\\"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!(\\\"getStats\\\"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=r.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>$(t,e.track,!0)))}}if(!(\\\"getStats\\\"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),L(e,\\\"track\\\",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>$(t,e.track,!1)))}}if(!(\\\"getStats\\\"in e.RTCRtpSender.prototype)||!(\\\"getStats\\\"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const e=arguments[0];let t,r,i;return this.getSenders().forEach((r=>{r.track===e&&(t?i=!0:t=r)})),this.getReceivers().forEach((t=>(t.track===e&&(r?i=!0:r=t),t.track===e))),i||t&&r?Promise.reject(new DOMException(\\\"There are more than one sender or receiver for the track.\\\",\\\"InvalidAccessError\\\")):t?t.getStats():r?r.getStats():Promise.reject(new DOMException(\\\"There is no sender or receiver for the track.\\\",\\\"InvalidAccessError\\\"))}return t.apply(this,arguments)}}function J(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((e=>this._shimmedLocalStreams[e][0]))};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){if(!r)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const i=t.apply(this,arguments);return this._shimmedLocalStreams[r.id]?-1===this._shimmedLocalStreams[r.id].indexOf(i)&&this._shimmedLocalStreams[r.id].push(i):this._shimmedLocalStreams[r.id]=[r,i],i};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException(\\\"Track already exists.\\\",\\\"InvalidAccessError\\\")}));const t=this.getSenders();r.apply(this,arguments);const i=this.getSenders().filter((e=>-1===t.indexOf(e)));this._shimmedLocalStreams[e.id]=[e].concat(i)};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],i.apply(this,arguments)};const n=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((t=>{const r=this._shimmedLocalStreams[t].indexOf(e);-1!==r&&this._shimmedLocalStreams[t].splice(r,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]})),n.apply(this,arguments)}}function W(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return J(e);const r=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=r.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map((e=>this._reverseStreams[e.id]))};const i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException(\\\"Track already exists.\\\",\\\"InvalidAccessError\\\")})),!this._reverseStreams[t.id]){const r=new e.MediaStream(t.getTracks());this._streams[t.id]=r,this._reverseStreams[r.id]=t,t=r}i.apply(this,[t])};const n=e.RTCPeerConnection.prototype.removeStream;function s(e,t){let r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const i=e._reverseStreams[t],n=e._streams[i.id];r=r.replace(new RegExp(n.id,\\\"g\\\"),i.id)})),new RTCSessionDescription({type:t.type,sdp:r})}function o(e,t){let r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const i=e._reverseStreams[t],n=e._streams[i.id];r=r.replace(new RegExp(i.id,\\\"g\\\"),n.id)})),new RTCSessionDescription({type:t.type,sdp:r})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},n.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,r){if(\\\"closed\\\"===this.signalingState)throw new DOMException(\\\"The RTCPeerConnection's signalingState is 'closed'.\\\",\\\"InvalidStateError\\\");const i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find((e=>e===t)))throw new DOMException(\\\"The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.\\\",\\\"NotSupportedError\\\");const n=this.getSenders().find((e=>e.track===t));if(n)throw new DOMException(\\\"Track already exists.\\\",\\\"InvalidAccessError\\\");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const s=this._streams[r.id];if(s)s.addTrack(t),Promise.resolve().then((()=>{this.dispatchEvent(new Event(\\\"negotiationneeded\\\"))}));else{const i=new e.MediaStream([t]);this._streams[r.id]=i,this._reverseStreams[i.id]=r,this.addStream(i)}return this.getSenders().find((e=>e.track===t))},[\\\"createOffer\\\",\\\"createAnswer\\\"].forEach((function(t){const r=e.RTCPeerConnection.prototype[t],i={[t](){const e=arguments;return arguments.length&&\\\"function\\\"==typeof arguments[0]?r.apply(this,[t=>{const r=s(this,t);e[0].apply(null,[r])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):r.apply(this,arguments).then((e=>s(this,e)))}};e.RTCPeerConnection.prototype[t]=i[t]}));const a=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=o(this,arguments[0]),a.apply(this,arguments)):a.apply(this,arguments)};const c=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,\\\"localDescription\\\");Object.defineProperty(e.RTCPeerConnection.prototype,\\\"localDescription\\\",{get(){const e=c.get.apply(this);return\\\"\\\"===e.type?e:s(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){if(\\\"closed\\\"===this.signalingState)throw new DOMException(\\\"The RTCPeerConnection's signalingState is 'closed'.\\\",\\\"InvalidStateError\\\");if(!e._pc)throw new DOMException(\\\"Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.\\\",\\\"TypeError\\\");if(!(e._pc===this))throw new DOMException(\\\"Sender was not created by this connection.\\\",\\\"InvalidAccessError\\\");let t;this._streams=this._streams||{},Object.keys(this._streams).forEach((r=>{this._streams[r].getTracks().find((t=>e.track===t))&&(t=this._streams[r])})),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event(\\\"negotiationneeded\\\")))}}function Y(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&[\\\"setLocalDescription\\\",\\\"setRemoteDescription\\\",\\\"addIceCandidate\\\"].forEach((function(t){const r=e.RTCPeerConnection.prototype[t],i={[t](){return arguments[0]=new(\\\"addIceCandidate\\\"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=i[t]}))}function q(e,t){L(e,\\\"negotiationneeded\\\",(e=>{const r=e.target;if(!(t.version<72||r.getConfiguration&&\\\"plan-b\\\"===r.getConfiguration().sdpSemantics)||\\\"stable\\\"===r.signalingState)return e}))}var z=Object.freeze({__proto__:null,shimMediaStream:B,shimOnTrack:H,shimGetSendersWithDtmf:F,shimGetStats:K,shimSenderReceiverGetStats:G,shimAddTrackRemoveTrackWithNative:J,shimAddTrackRemoveTrack:W,shimPeerConnection:Y,fixNegotiationNeeded:q,shimGetUserMedia:V,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&\\\"getDisplayMedia\\\"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(\\\"function\\\"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(r){return t(r).then((t=>{const i=r.video&&r.video.width,n=r.video&&r.video.height,s=r.video&&r.video.frameRate;return r.video={mandatory:{chromeMediaSource:\\\"desktop\\\",chromeMediaSourceId:t,maxFrameRate:s||3}},i&&(r.video.mandatory.maxWidth=i),n&&(r.video.mandatory.maxHeight=n),e.navigator.mediaDevices.getUserMedia(r)}))}:console.error(\\\"shimGetDisplayMedia: getSourceId argument is not a function\\\"))}});var Q,X,Z=(Q=function(e){var t={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split(\\\"\\\\n\\\").map((function(e){return e.trim()}))},t.splitSections=function(e){return e.split(\\\"\\\\nm=\\\").map((function(e,t){return(t>0?\\\"m=\\\"+e:e).trim()+\\\"\\\\r\\\\n\\\"}))},t.getDescription=function(e){var r=t.splitSections(e);return r&&r[0]},t.getMediaSections=function(e){var r=t.splitSections(e);return r.shift(),r},t.matchPrefix=function(e,r){return t.splitLines(e).filter((function(e){return 0===e.indexOf(r)}))},t.parseCandidate=function(e){for(var t,r={foundation:(t=0===e.indexOf(\\\"a=candidate:\\\")?e.substring(12).split(\\\" \\\"):e.substring(10).split(\\\" \\\"))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},i=8;i<t.length;i+=2)switch(t[i]){case\\\"raddr\\\":r.relatedAddress=t[i+1];break;case\\\"rport\\\":r.relatedPort=parseInt(t[i+1],10);break;case\\\"tcptype\\\":r.tcpType=t[i+1];break;case\\\"ufrag\\\":r.ufrag=t[i+1],r.usernameFragment=t[i+1];break;default:r[t[i]]=t[i+1]}return r},t.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var r=e.type;return t.push(\\\"typ\\\"),t.push(r),\\\"host\\\"!==r&&e.relatedAddress&&e.relatedPort&&(t.push(\\\"raddr\\\"),t.push(e.relatedAddress),t.push(\\\"rport\\\"),t.push(e.relatedPort)),e.tcpType&&\\\"tcp\\\"===e.protocol.toLowerCase()&&(t.push(\\\"tcptype\\\"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push(\\\"ufrag\\\"),t.push(e.usernameFragment||e.ufrag)),\\\"candidate:\\\"+t.join(\\\" \\\")},t.parseIceOptions=function(e){return e.substr(14).split(\\\" \\\")},t.parseRtpMap=function(e){var t=e.substr(9).split(\\\" \\\"),r={payloadType:parseInt(t.shift(),10)};return t=t[0].split(\\\"/\\\"),r.name=t[0],r.clockRate=parseInt(t[1],10),r.channels=3===t.length?parseInt(t[2],10):1,r.numChannels=r.channels,r},t.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var r=e.channels||e.numChannels||1;return\\\"a=rtpmap:\\\"+t+\\\" \\\"+e.name+\\\"/\\\"+e.clockRate+(1!==r?\\\"/\\\"+r:\\\"\\\")+\\\"\\\\r\\\\n\\\"},t.parseExtmap=function(e){var t=e.substr(9).split(\\\" \\\");return{id:parseInt(t[0],10),direction:t[0].indexOf(\\\"/\\\")>0?t[0].split(\\\"/\\\")[1]:\\\"sendrecv\\\",uri:t[1]}},t.writeExtmap=function(e){return\\\"a=extmap:\\\"+(e.id||e.preferredId)+(e.direction&&\\\"sendrecv\\\"!==e.direction?\\\"/\\\"+e.direction:\\\"\\\")+\\\" \\\"+e.uri+\\\"\\\\r\\\\n\\\"},t.parseFmtp=function(e){for(var t,r={},i=e.substr(e.indexOf(\\\" \\\")+1).split(\\\";\\\"),n=0;n<i.length;n++)r[(t=i[n].trim().split(\\\"=\\\"))[0].trim()]=t[1];return r},t.writeFmtp=function(e){var t=\\\"\\\",r=e.payloadType;if(void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var i=[];Object.keys(e.parameters).forEach((function(t){e.parameters[t]?i.push(t+\\\"=\\\"+e.parameters[t]):i.push(t)})),t+=\\\"a=fmtp:\\\"+r+\\\" \\\"+i.join(\\\";\\\")+\\\"\\\\r\\\\n\\\"}return t},t.parseRtcpFb=function(e){var t=e.substr(e.indexOf(\\\" \\\")+1).split(\\\" \\\");return{type:t.shift(),parameter:t.join(\\\" \\\")}},t.writeRtcpFb=function(e){var t=\\\"\\\",r=e.payloadType;return void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+=\\\"a=rtcp-fb:\\\"+r+\\\" \\\"+e.type+(e.parameter&&e.parameter.length?\\\" \\\"+e.parameter:\\\"\\\")+\\\"\\\\r\\\\n\\\"})),t},t.parseSsrcMedia=function(e){var t=e.indexOf(\\\" \\\"),r={ssrc:parseInt(e.substr(7,t-7),10)},i=e.indexOf(\\\":\\\",t);return i>-1?(r.attribute=e.substr(t+1,i-t-1),r.value=e.substr(i+1)):r.attribute=e.substr(t+1),r},t.parseSsrcGroup=function(e){var t=e.substr(13).split(\\\" \\\");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},t.getMid=function(e){var r=t.matchPrefix(e,\\\"a=mid:\\\")[0];if(r)return r.substr(6)},t.parseFingerprint=function(e){var t=e.substr(14).split(\\\" \\\");return{algorithm:t[0].toLowerCase(),value:t[1]}},t.getDtlsParameters=function(e,r){return{role:\\\"auto\\\",fingerprints:t.matchPrefix(e+r,\\\"a=fingerprint:\\\").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){var r=\\\"a=setup:\\\"+t+\\\"\\\\r\\\\n\\\";return e.fingerprints.forEach((function(e){r+=\\\"a=fingerprint:\\\"+e.algorithm+\\\" \\\"+e.value+\\\"\\\\r\\\\n\\\"})),r},t.parseCryptoLine=function(e){var t=e.substr(9).split(\\\" \\\");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return\\\"a=crypto:\\\"+e.tag+\\\" \\\"+e.cryptoSuite+\\\" \\\"+(\\\"object\\\"==typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?\\\" \\\"+e.sessionParams.join(\\\" \\\"):\\\"\\\")+\\\"\\\\r\\\\n\\\"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf(\\\"inline:\\\"))return null;var t=e.substr(7).split(\\\"|\\\");return{keyMethod:\\\"inline\\\",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(\\\":\\\")[0]:void 0,mkiLength:t[2]?t[2].split(\\\":\\\")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+\\\":\\\"+e.keySalt+(e.lifeTime?\\\"|\\\"+e.lifeTime:\\\"\\\")+(e.mkiValue&&e.mkiLength?\\\"|\\\"+e.mkiValue+\\\":\\\"+e.mkiLength:\\\"\\\")},t.getCryptoParameters=function(e,r){return t.matchPrefix(e+r,\\\"a=crypto:\\\").map(t.parseCryptoLine)},t.getIceParameters=function(e,r){var i=t.matchPrefix(e+r,\\\"a=ice-ufrag:\\\")[0],n=t.matchPrefix(e+r,\\\"a=ice-pwd:\\\")[0];return i&&n?{usernameFragment:i.substr(12),password:n.substr(10)}:null},t.writeIceParameters=function(e){return\\\"a=ice-ufrag:\\\"+e.usernameFragment+\\\"\\\\r\\\\na=ice-pwd:\\\"+e.password+\\\"\\\\r\\\\n\\\"},t.parseRtpParameters=function(e){for(var r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},i=t.splitLines(e)[0].split(\\\" \\\"),n=3;n<i.length;n++){var s=i[n],o=t.matchPrefix(e,\\\"a=rtpmap:\\\"+s+\\\" \\\")[0];if(o){var a=t.parseRtpMap(o),c=t.matchPrefix(e,\\\"a=fmtp:\\\"+s+\\\" \\\");switch(a.parameters=c.length?t.parseFmtp(c[0]):{},a.rtcpFeedback=t.matchPrefix(e,\\\"a=rtcp-fb:\\\"+s+\\\" \\\").map(t.parseRtcpFb),r.codecs.push(a),a.name.toUpperCase()){case\\\"RED\\\":case\\\"ULPFEC\\\":r.fecMechanisms.push(a.name.toUpperCase())}}}return t.matchPrefix(e,\\\"a=extmap:\\\").forEach((function(e){r.headerExtensions.push(t.parseExtmap(e))})),r},t.writeRtpDescription=function(e,r){var i=\\\"\\\";i+=\\\"m=\\\"+e+\\\" \\\",i+=r.codecs.length>0?\\\"9\\\":\\\"0\\\",i+=\\\" UDP/TLS/RTP/SAVPF \\\",i+=r.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(\\\" \\\")+\\\"\\\\r\\\\n\\\",i+=\\\"c=IN IP4 0.0.0.0\\\\r\\\\n\\\",i+=\\\"a=rtcp:9 IN IP4 0.0.0.0\\\\r\\\\n\\\",r.codecs.forEach((function(e){i+=t.writeRtpMap(e),i+=t.writeFmtp(e),i+=t.writeRtcpFb(e)}));var n=0;return r.codecs.forEach((function(e){e.maxptime>n&&(n=e.maxptime)})),n>0&&(i+=\\\"a=maxptime:\\\"+n+\\\"\\\\r\\\\n\\\"),i+=\\\"a=rtcp-mux\\\\r\\\\n\\\",r.headerExtensions&&r.headerExtensions.forEach((function(e){i+=t.writeExtmap(e)})),i},t.parseRtpEncodingParameters=function(e){var r,i=[],n=t.parseRtpParameters(e),s=-1!==n.fecMechanisms.indexOf(\\\"RED\\\"),o=-1!==n.fecMechanisms.indexOf(\\\"ULPFEC\\\"),a=t.matchPrefix(e,\\\"a=ssrc:\\\").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return\\\"cname\\\"===e.attribute})),c=a.length>0&&a[0].ssrc,d=t.matchPrefix(e,\\\"a=ssrc-group:FID\\\").map((function(e){return e.substr(17).split(\\\" \\\").map((function(e){return parseInt(e,10)}))}));d.length>0&&d[0].length>1&&d[0][0]===c&&(r=d[0][1]),n.codecs.forEach((function(e){if(\\\"RTX\\\"===e.name.toUpperCase()&&e.parameters.apt){var t={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&r&&(t.rtx={ssrc:r}),i.push(t),s&&((t=JSON.parse(JSON.stringify(t))).fec={ssrc:c,mechanism:o?\\\"red+ulpfec\\\":\\\"red\\\"},i.push(t))}})),0===i.length&&c&&i.push({ssrc:c});var u=t.matchPrefix(e,\\\"b=\\\");return u.length&&(u=0===u[0].indexOf(\\\"b=TIAS:\\\")?parseInt(u[0].substr(7),10):0===u[0].indexOf(\\\"b=AS:\\\")?1e3*parseInt(u[0].substr(5),10)*.95-16e3:void 0,i.forEach((function(e){e.maxBitrate=u}))),i},t.parseRtcpParameters=function(e){var r={},i=t.matchPrefix(e,\\\"a=ssrc:\\\").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return\\\"cname\\\"===e.attribute}))[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);var n=t.matchPrefix(e,\\\"a=rtcp-rsize\\\");r.reducedSize=n.length>0,r.compound=0===n.length;var s=t.matchPrefix(e,\\\"a=rtcp-mux\\\");return r.mux=s.length>0,r},t.parseMsid=function(e){var r,i=t.matchPrefix(e,\\\"a=msid:\\\");if(1===i.length)return{stream:(r=i[0].substr(7).split(\\\" \\\"))[0],track:r[1]};var n=t.matchPrefix(e,\\\"a=ssrc:\\\").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return\\\"msid\\\"===e.attribute}));return n.length>0?{stream:(r=n[0].value.split(\\\" \\\"))[0],track:r[1]}:void 0},t.parseSctpDescription=function(e){var r,i=t.parseMLine(e),n=t.matchPrefix(e,\\\"a=max-message-size:\\\");n.length>0&&(r=parseInt(n[0].substr(19),10)),isNaN(r)&&(r=65536);var s=t.matchPrefix(e,\\\"a=sctp-port:\\\");if(s.length>0)return{port:parseInt(s[0].substr(12),10),protocol:i.fmt,maxMessageSize:r};if(t.matchPrefix(e,\\\"a=sctpmap:\\\").length>0){var o=t.matchPrefix(e,\\\"a=sctpmap:\\\")[0].substr(10).split(\\\" \\\");return{port:parseInt(o[0],10),protocol:o[1],maxMessageSize:r}}},t.writeSctpDescription=function(e,t){var r=[];return r=\\\"DTLS/SCTP\\\"!==e.protocol?[\\\"m=\\\"+e.kind+\\\" 9 \\\"+e.protocol+\\\" \\\"+t.protocol+\\\"\\\\r\\\\n\\\",\\\"c=IN IP4 0.0.0.0\\\\r\\\\n\\\",\\\"a=sctp-port:\\\"+t.port+\\\"\\\\r\\\\n\\\"]:[\\\"m=\\\"+e.kind+\\\" 9 \\\"+e.protocol+\\\" \\\"+t.port+\\\"\\\\r\\\\n\\\",\\\"c=IN IP4 0.0.0.0\\\\r\\\\n\\\",\\\"a=sctpmap:\\\"+t.port+\\\" \\\"+t.protocol+\\\" 65535\\\\r\\\\n\\\"],void 0!==t.maxMessageSize&&r.push(\\\"a=max-message-size:\\\"+t.maxMessageSize+\\\"\\\\r\\\\n\\\"),r.join(\\\"\\\")},t.generateSessionId=function(){return Math.random().toString().substr(2,21)},t.writeSessionBoilerplate=function(e,r,i){var n=void 0!==r?r:2;return\\\"v=0\\\\r\\\\no=\\\"+(i||\\\"thisisadapterortc\\\")+\\\" \\\"+(e||t.generateSessionId())+\\\" \\\"+n+\\\" IN IP4 127.0.0.1\\\\r\\\\ns=-\\\\r\\\\nt=0 0\\\\r\\\\n\\\"},t.writeMediaSection=function(e,r,i,n){var s=t.writeRtpDescription(e.kind,r);if(s+=t.writeIceParameters(e.iceGatherer.getLocalParameters()),s+=t.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),\\\"offer\\\"===i?\\\"actpass\\\":\\\"active\\\"),s+=\\\"a=mid:\\\"+e.mid+\\\"\\\\r\\\\n\\\",e.direction?s+=\\\"a=\\\"+e.direction+\\\"\\\\r\\\\n\\\":e.rtpSender&&e.rtpReceiver?s+=\\\"a=sendrecv\\\\r\\\\n\\\":e.rtpSender?s+=\\\"a=sendonly\\\\r\\\\n\\\":e.rtpReceiver?s+=\\\"a=recvonly\\\\r\\\\n\\\":s+=\\\"a=inactive\\\\r\\\\n\\\",e.rtpSender){var o=\\\"msid:\\\"+n.id+\\\" \\\"+e.rtpSender.track.id+\\\"\\\\r\\\\n\\\";s+=\\\"a=\\\"+o,s+=\\\"a=ssrc:\\\"+e.sendEncodingParameters[0].ssrc+\\\" \\\"+o,e.sendEncodingParameters[0].rtx&&(s+=\\\"a=ssrc:\\\"+e.sendEncodingParameters[0].rtx.ssrc+\\\" \\\"+o,s+=\\\"a=ssrc-group:FID \\\"+e.sendEncodingParameters[0].ssrc+\\\" \\\"+e.sendEncodingParameters[0].rtx.ssrc+\\\"\\\\r\\\\n\\\")}return s+=\\\"a=ssrc:\\\"+e.sendEncodingParameters[0].ssrc+\\\" cname:\\\"+t.localCName+\\\"\\\\r\\\\n\\\",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(s+=\\\"a=ssrc:\\\"+e.sendEncodingParameters[0].rtx.ssrc+\\\" cname:\\\"+t.localCName+\\\"\\\\r\\\\n\\\"),s},t.getDirection=function(e,r){for(var i=t.splitLines(e),n=0;n<i.length;n++)switch(i[n]){case\\\"a=sendrecv\\\":case\\\"a=sendonly\\\":case\\\"a=recvonly\\\":case\\\"a=inactive\\\":return i[n].substr(2)}return r?t.getDirection(r):\\\"sendrecv\\\"},t.getKind=function(e){return t.splitLines(e)[0].split(\\\" \\\")[0].substr(2)},t.isRejected=function(e){return\\\"0\\\"===e.split(\\\" \\\",2)[1]},t.parseMLine=function(e){var r=t.splitLines(e)[0].substr(2).split(\\\" \\\");return{kind:r[0],port:parseInt(r[1],10),protocol:r[2],fmt:r.slice(3).join(\\\" \\\")}},t.parseOLine=function(e){var r=t.matchPrefix(e,\\\"o=\\\")[0].substr(2).split(\\\" \\\");return{username:r[0],sessionId:r[1],sessionVersion:parseInt(r[2],10),netType:r[3],addressType:r[4],address:r[5]}},t.isValidSDP=function(e){if(\\\"string\\\"!=typeof e||0===e.length)return!1;for(var r=t.splitLines(e),i=0;i<r.length;i++)if(r[i].length<2||\\\"=\\\"!==r[i].charAt(1))return!1;return!0},e.exports=t},Q(X={exports:{}},X.exports),X.exports);function ee(e,t,r,i,n){var s=Z.writeRtpDescription(e.kind,t);if(s+=Z.writeIceParameters(e.iceGatherer.getLocalParameters()),s+=Z.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),\\\"offer\\\"===r?\\\"actpass\\\":n||\\\"active\\\"),s+=\\\"a=mid:\\\"+e.mid+\\\"\\\\r\\\\n\\\",e.rtpSender&&e.rtpReceiver?s+=\\\"a=sendrecv\\\\r\\\\n\\\":e.rtpSender?s+=\\\"a=sendonly\\\\r\\\\n\\\":e.rtpReceiver?s+=\\\"a=recvonly\\\\r\\\\n\\\":s+=\\\"a=inactive\\\\r\\\\n\\\",e.rtpSender){var o=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=o;var a=\\\"msid:\\\"+(i?i.id:\\\"-\\\")+\\\" \\\"+o+\\\"\\\\r\\\\n\\\";s+=\\\"a=\\\"+a,s+=\\\"a=ssrc:\\\"+e.sendEncodingParameters[0].ssrc+\\\" \\\"+a,e.sendEncodingParameters[0].rtx&&(s+=\\\"a=ssrc:\\\"+e.sendEncodingParameters[0].rtx.ssrc+\\\" \\\"+a,s+=\\\"a=ssrc-group:FID \\\"+e.sendEncodingParameters[0].ssrc+\\\" \\\"+e.sendEncodingParameters[0].rtx.ssrc+\\\"\\\\r\\\\n\\\")}return s+=\\\"a=ssrc:\\\"+e.sendEncodingParameters[0].ssrc+\\\" cname:\\\"+Z.localCName+\\\"\\\\r\\\\n\\\",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(s+=\\\"a=ssrc:\\\"+e.sendEncodingParameters[0].rtx.ssrc+\\\" cname:\\\"+Z.localCName+\\\"\\\\r\\\\n\\\"),s}function te(e,t){var r={codecs:[],headerExtensions:[],fecMechanisms:[]},i=function(e,t){e=parseInt(e,10);for(var r=0;r<t.length;r++)if(t[r].payloadType===e||t[r].preferredPayloadType===e)return t[r]},n=function(e,t,r,n){var s=i(e.parameters.apt,r),o=i(t.parameters.apt,n);return s&&o&&s.name.toLowerCase()===o.name.toLowerCase()};return e.codecs.forEach((function(i){for(var s=0;s<t.codecs.length;s++){var o=t.codecs[s];if(i.name.toLowerCase()===o.name.toLowerCase()&&i.clockRate===o.clockRate){if(\\\"rtx\\\"===i.name.toLowerCase()&&i.parameters&&o.parameters.apt&&!n(i,o,e.codecs,t.codecs))continue;(o=JSON.parse(JSON.stringify(o))).numChannels=Math.min(i.numChannels,o.numChannels),r.codecs.push(o),o.rtcpFeedback=o.rtcpFeedback.filter((function(e){for(var t=0;t<i.rtcpFeedback.length;t++)if(i.rtcpFeedback[t].type===e.type&&i.rtcpFeedback[t].parameter===e.parameter)return!0;return!1}));break}}})),e.headerExtensions.forEach((function(e){for(var i=0;i<t.headerExtensions.length;i++){var n=t.headerExtensions[i];if(e.uri===n.uri){r.headerExtensions.push(n);break}}})),r}function re(e,t,r){return-1!=={offer:{setLocalDescription:[\\\"stable\\\",\\\"have-local-offer\\\"],setRemoteDescription:[\\\"stable\\\",\\\"have-remote-offer\\\"]},answer:{setLocalDescription:[\\\"have-remote-offer\\\",\\\"have-local-pranswer\\\"],setRemoteDescription:[\\\"have-local-offer\\\",\\\"have-remote-pranswer\\\"]}}[t][e].indexOf(r)}function ie(e,t){var r=e.getRemoteCandidates().find((function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type}));return r||e.addRemoteCandidate(t),!r}function ne(e,t){var r=new Error(t);return r.name=e,r.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],r}var se=function(e,t){function r(t,r){r.addTrack(t),r.dispatchEvent(new e.MediaStreamTrackEvent(\\\"addtrack\\\",{track:t}))}function i(t,r,i,n){var s=new Event(\\\"track\\\");s.track=r,s.receiver=i,s.transceiver={receiver:i},s.streams=n,e.setTimeout((function(){t._dispatchEvent(\\\"track\\\",s)}))}var n=function(r){var i=this,n=document.createDocumentFragment();if([\\\"addEventListener\\\",\\\"removeEventListener\\\",\\\"dispatchEvent\\\"].forEach((function(e){i[e]=n[e].bind(n)})),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState=\\\"stable\\\",this.iceConnectionState=\\\"new\\\",this.connectionState=\\\"new\\\",this.iceGatheringState=\\\"new\\\",r=JSON.parse(JSON.stringify(r||{})),this.usingBundle=\\\"max-bundle\\\"===r.bundlePolicy,\\\"negotiate\\\"===r.rtcpMuxPolicy)throw ne(\\\"NotSupportedError\\\",\\\"rtcpMuxPolicy 'negotiate' is not supported\\\");switch(r.rtcpMuxPolicy||(r.rtcpMuxPolicy=\\\"require\\\"),r.iceTransportPolicy){case\\\"all\\\":case\\\"relay\\\":break;default:r.iceTransportPolicy=\\\"all\\\"}switch(r.bundlePolicy){case\\\"balanced\\\":case\\\"max-compat\\\":case\\\"max-bundle\\\":break;default:r.bundlePolicy=\\\"balanced\\\"}if(r.iceServers=function(e,t){var r=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var i=e.urls||e.url;e.url&&!e.urls&&console.warn(\\\"RTCIceServer.url is deprecated! Use urls instead.\\\");var n=\\\"string\\\"==typeof i;return n&&(i=[i]),i=i.filter((function(e){return 0!==e.indexOf(\\\"turn:\\\")||-1===e.indexOf(\\\"transport=udp\\\")||-1!==e.indexOf(\\\"turn:[\\\")||r?0===e.indexOf(\\\"stun:\\\")&&t>=14393&&-1===e.indexOf(\\\"?transport=udp\\\"):(r=!0,!0)})),delete e.url,e.urls=n?i[0]:i,!!i.length}}))}(r.iceServers||[],t),this._iceGatherers=[],r.iceCandidatePoolSize)for(var s=r.iceCandidatePoolSize;s>0;s--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:r.iceServers,gatherPolicy:r.iceTransportPolicy}));else r.iceCandidatePoolSize=0;this._config=r,this.transceivers=[],this._sdpSessionId=Z.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(n.prototype,\\\"localDescription\\\",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(n.prototype,\\\"remoteDescription\\\",{configurable:!0,get:function(){return this._remoteDescription}}),n.prototype.onicecandidate=null,n.prototype.onaddstream=null,n.prototype.ontrack=null,n.prototype.onremovestream=null,n.prototype.onsignalingstatechange=null,n.prototype.oniceconnectionstatechange=null,n.prototype.onconnectionstatechange=null,n.prototype.onicegatheringstatechange=null,n.prototype.onnegotiationneeded=null,n.prototype.ondatachannel=null,n.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),\\\"function\\\"==typeof this[\\\"on\\\"+e]&&this[\\\"on\\\"+e](t))},n.prototype._emitGatheringStateChange=function(){var e=new Event(\\\"icegatheringstatechange\\\");this._dispatchEvent(\\\"icegatheringstatechange\\\",e)},n.prototype.getConfiguration=function(){return this._config},n.prototype.getLocalStreams=function(){return this.localStreams},n.prototype.getRemoteStreams=function(){return this.remoteStreams},n.prototype._createTransceiver=function(e,t){var r=this.transceivers.length>0,i={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&r)i.iceTransport=this.transceivers[0].iceTransport,i.dtlsTransport=this.transceivers[0].dtlsTransport;else{var n=this._createIceAndDtlsTransports();i.iceTransport=n.iceTransport,i.dtlsTransport=n.dtlsTransport}return t||this.transceivers.push(i),i},n.prototype.addTrack=function(t,r){if(this._isClosed)throw ne(\\\"InvalidStateError\\\",\\\"Attempted to call addTrack on a closed peerconnection.\\\");var i;if(this.transceivers.find((function(e){return e.track===t})))throw ne(\\\"InvalidAccessError\\\",\\\"Track already exists.\\\");for(var n=0;n<this.transceivers.length;n++)this.transceivers[n].track||this.transceivers[n].kind!==t.kind||(i=this.transceivers[n]);return i||(i=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(r)&&this.localStreams.push(r),i.track=t,i.stream=r,i.rtpSender=new e.RTCRtpSender(t,i.dtlsTransport),i.rtpSender},n.prototype.addStream=function(e){var r=this;if(t>=15025)e.getTracks().forEach((function(t){r.addTrack(t,e)}));else{var i=e.clone();e.getTracks().forEach((function(e,t){var r=i.getTracks()[t];e.addEventListener(\\\"enabled\\\",(function(e){r.enabled=e.enabled}))})),i.getTracks().forEach((function(e){r.addTrack(e,i)}))}},n.prototype.removeTrack=function(t){if(this._isClosed)throw ne(\\\"InvalidStateError\\\",\\\"Attempted to call removeTrack on a closed peerconnection.\\\");if(!(t instanceof e.RTCRtpSender))throw new TypeError(\\\"Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.\\\");var r=this.transceivers.find((function(e){return e.rtpSender===t}));if(!r)throw ne(\\\"InvalidAccessError\\\",\\\"Sender was not created by this connection.\\\");var i=r.stream;r.rtpSender.stop(),r.rtpSender=null,r.track=null,r.stream=null,-1===this.transceivers.map((function(e){return e.stream})).indexOf(i)&&this.localStreams.indexOf(i)>-1&&this.localStreams.splice(this.localStreams.indexOf(i),1),this._maybeFireNegotiationNeeded()},n.prototype.removeStream=function(e){var t=this;e.getTracks().forEach((function(e){var r=t.getSenders().find((function(t){return t.track===e}));r&&t.removeTrack(r)}))},n.prototype.getSenders=function(){return this.transceivers.filter((function(e){return!!e.rtpSender})).map((function(e){return e.rtpSender}))},n.prototype.getReceivers=function(){return this.transceivers.filter((function(e){return!!e.rtpReceiver})).map((function(e){return e.rtpReceiver}))},n.prototype._createIceGatherer=function(t,r){var i=this;if(r&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var n=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(n,\\\"state\\\",{value:\\\"new\\\",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var r=!e.candidate||0===Object.keys(e.candidate).length;n.state=r?\\\"completed\\\":\\\"gathering\\\",null!==i.transceivers[t].bufferedCandidateEvents&&i.transceivers[t].bufferedCandidateEvents.push(e)},n.addEventListener(\\\"localcandidate\\\",this.transceivers[t].bufferCandidates),n},n.prototype._gather=function(t,r){var i=this,n=this.transceivers[r].iceGatherer;if(!n.onlocalcandidate){var s=this.transceivers[r].bufferedCandidateEvents;this.transceivers[r].bufferedCandidateEvents=null,n.removeEventListener(\\\"localcandidate\\\",this.transceivers[r].bufferCandidates),n.onlocalcandidate=function(e){if(!(i.usingBundle&&r>0)){var s=new Event(\\\"icecandidate\\\");s.candidate={sdpMid:t,sdpMLineIndex:r};var o=e.candidate,a=!o||0===Object.keys(o).length;if(a)\\\"new\\\"!==n.state&&\\\"gathering\\\"!==n.state||(n.state=\\\"completed\\\");else{\\\"new\\\"===n.state&&(n.state=\\\"gathering\\\"),o.component=1,o.ufrag=n.getLocalParameters().usernameFragment;var c=Z.writeCandidate(o);s.candidate=Object.assign(s.candidate,Z.parseCandidate(c)),s.candidate.candidate=c,s.candidate.toJSON=function(){return{candidate:s.candidate.candidate,sdpMid:s.candidate.sdpMid,sdpMLineIndex:s.candidate.sdpMLineIndex,usernameFragment:s.candidate.usernameFragment}}}var d=Z.getMediaSections(i._localDescription.sdp);d[s.candidate.sdpMLineIndex]+=a?\\\"a=end-of-candidates\\\\r\\\\n\\\":\\\"a=\\\"+s.candidate.candidate+\\\"\\\\r\\\\n\\\",i._localDescription.sdp=Z.getDescription(i._localDescription.sdp)+d.join(\\\"\\\");var u=i.transceivers.every((function(e){return e.iceGatherer&&\\\"completed\\\"===e.iceGatherer.state}));\\\"gathering\\\"!==i.iceGatheringState&&(i.iceGatheringState=\\\"gathering\\\",i._emitGatheringStateChange()),a||i._dispatchEvent(\\\"icecandidate\\\",s),u&&(i._dispatchEvent(\\\"icecandidate\\\",new Event(\\\"icecandidate\\\")),i.iceGatheringState=\\\"complete\\\",i._emitGatheringStateChange())}},e.setTimeout((function(){s.forEach((function(e){n.onlocalcandidate(e)}))}),0)}},n.prototype._createIceAndDtlsTransports=function(){var t=this,r=new e.RTCIceTransport(null);r.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var i=new e.RTCDtlsTransport(r);return i.ondtlsstatechange=function(){t._updateConnectionState()},i.onerror=function(){Object.defineProperty(i,\\\"state\\\",{value:\\\"failed\\\",writable:!0}),t._updateConnectionState()},{iceTransport:r,dtlsTransport:i}},n.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var r=this.transceivers[e].iceTransport;r&&(delete r.onicestatechange,delete this.transceivers[e].iceTransport);var i=this.transceivers[e].dtlsTransport;i&&(delete i.ondtlsstatechange,delete i.onerror,delete this.transceivers[e].dtlsTransport)},n.prototype._transceive=function(e,r,i){var n=te(e.localCapabilities,e.remoteCapabilities);r&&e.rtpSender&&(n.encodings=e.sendEncodingParameters,n.rtcp={cname:Z.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(n.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(n)),i&&e.rtpReceiver&&n.codecs.length>0&&(\\\"video\\\"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach((function(e){delete e.rtx})),e.recvEncodingParameters.length?n.encodings=e.recvEncodingParameters:n.encodings=[{}],n.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(n.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(n.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(n))},n.prototype.setLocalDescription=function(e){var t,r,i=this;if(-1===[\\\"offer\\\",\\\"answer\\\"].indexOf(e.type))return Promise.reject(ne(\\\"TypeError\\\",'Unsupported type \\\"'+e.type+'\\\"'));if(!re(\\\"setLocalDescription\\\",e.type,i.signalingState)||i._isClosed)return Promise.reject(ne(\\\"InvalidStateError\\\",\\\"Can not set local \\\"+e.type+\\\" in state \\\"+i.signalingState));if(\\\"offer\\\"===e.type)t=Z.splitSections(e.sdp),r=t.shift(),t.forEach((function(e,t){var r=Z.parseRtpParameters(e);i.transceivers[t].localCapabilities=r})),i.transceivers.forEach((function(e,t){i._gather(e.mid,t)}));else if(\\\"answer\\\"===e.type){t=Z.splitSections(i._remoteDescription.sdp),r=t.shift();var n=Z.matchPrefix(r,\\\"a=ice-lite\\\").length>0;t.forEach((function(e,t){var s=i.transceivers[t],o=s.iceGatherer,a=s.iceTransport,c=s.dtlsTransport,d=s.localCapabilities,u=s.remoteCapabilities;if(!(Z.isRejected(e)&&0===Z.matchPrefix(e,\\\"a=bundle-only\\\").length)&&!s.rejected){var l=Z.getIceParameters(e,r),h=Z.getDtlsParameters(e,r);n&&(h.role=\\\"server\\\"),i.usingBundle&&0!==t||(i._gather(s.mid,t),\\\"new\\\"===a.state&&a.start(o,l,n?\\\"controlling\\\":\\\"controlled\\\"),\\\"new\\\"===c.state&&c.start(h));var p=te(d,u);i._transceive(s,p.codecs.length>0,!1)}}))}return i._localDescription={type:e.type,sdp:e.sdp},\\\"offer\\\"===e.type?i._updateSignalingState(\\\"have-local-offer\\\"):i._updateSignalingState(\\\"stable\\\"),Promise.resolve()},n.prototype.setRemoteDescription=function(n){var s=this;if(-1===[\\\"offer\\\",\\\"answer\\\"].indexOf(n.type))return Promise.reject(ne(\\\"TypeError\\\",'Unsupported type \\\"'+n.type+'\\\"'));if(!re(\\\"setRemoteDescription\\\",n.type,s.signalingState)||s._isClosed)return Promise.reject(ne(\\\"InvalidStateError\\\",\\\"Can not set remote \\\"+n.type+\\\" in state \\\"+s.signalingState));var o={};s.remoteStreams.forEach((function(e){o[e.id]=e}));var a=[],c=Z.splitSections(n.sdp),d=c.shift(),u=Z.matchPrefix(d,\\\"a=ice-lite\\\").length>0,l=Z.matchPrefix(d,\\\"a=group:BUNDLE \\\").length>0;s.usingBundle=l;var h=Z.matchPrefix(d,\\\"a=ice-options:\\\")[0];return s.canTrickleIceCandidates=!!h&&h.substr(14).split(\\\" \\\").indexOf(\\\"trickle\\\")>=0,c.forEach((function(i,c){var h=Z.splitLines(i),p=Z.getKind(i),_=Z.isRejected(i)&&0===Z.matchPrefix(i,\\\"a=bundle-only\\\").length,m=h[0].substr(2).split(\\\" \\\")[2],f=Z.getDirection(i,d),v=Z.parseMsid(i),R=Z.getMid(i)||Z.generateIdentifier();if(_||\\\"application\\\"===p&&(\\\"DTLS/SCTP\\\"===m||\\\"UDP/DTLS/SCTP\\\"===m))s.transceivers[c]={mid:R,kind:p,protocol:m,rejected:!0};else{var g,S,C,T,I,E,y,k,b;!_&&s.transceivers[c]&&s.transceivers[c].rejected&&(s.transceivers[c]=s._createTransceiver(p,!0));var P,O,L=Z.parseRtpParameters(i);_||(P=Z.getIceParameters(i,d),(O=Z.getDtlsParameters(i,d)).role=\\\"client\\\"),y=Z.parseRtpEncodingParameters(i);var N=Z.parseRtcpParameters(i),D=Z.matchPrefix(i,\\\"a=end-of-candidates\\\",d).length>0,A=Z.matchPrefix(i,\\\"a=candidate:\\\").map((function(e){return Z.parseCandidate(e)})).filter((function(e){return 1===e.component}));if((\\\"offer\\\"===n.type||\\\"answer\\\"===n.type)&&!_&&l&&c>0&&s.transceivers[c]&&(s._disposeIceAndDtlsTransports(c),s.transceivers[c].iceGatherer=s.transceivers[0].iceGatherer,s.transceivers[c].iceTransport=s.transceivers[0].iceTransport,s.transceivers[c].dtlsTransport=s.transceivers[0].dtlsTransport,s.transceivers[c].rtpSender&&s.transceivers[c].rtpSender.setTransport(s.transceivers[0].dtlsTransport),s.transceivers[c].rtpReceiver&&s.transceivers[c].rtpReceiver.setTransport(s.transceivers[0].dtlsTransport)),\\\"offer\\\"!==n.type||_){if(\\\"answer\\\"===n.type&&!_){S=(g=s.transceivers[c]).iceGatherer,C=g.iceTransport,T=g.dtlsTransport,I=g.rtpReceiver,E=g.sendEncodingParameters,k=g.localCapabilities,s.transceivers[c].recvEncodingParameters=y,s.transceivers[c].remoteCapabilities=L,s.transceivers[c].rtcpParameters=N,A.length&&\\\"new\\\"===C.state&&(!u&&!D||l&&0!==c?A.forEach((function(e){ie(g.iceTransport,e)})):C.setRemoteCandidates(A)),l&&0!==c||(\\\"new\\\"===C.state&&C.start(S,P,\\\"controlling\\\"),\\\"new\\\"===T.state&&T.start(O)),!te(g.localCapabilities,g.remoteCapabilities).codecs.filter((function(e){return\\\"rtx\\\"===e.name.toLowerCase()})).length&&g.sendEncodingParameters[0].rtx&&delete g.sendEncodingParameters[0].rtx,s._transceive(g,\\\"sendrecv\\\"===f||\\\"recvonly\\\"===f,\\\"sendrecv\\\"===f||\\\"sendonly\\\"===f),!I||\\\"sendrecv\\\"!==f&&\\\"sendonly\\\"!==f?delete g.rtpReceiver:(b=I.track,v?(o[v.stream]||(o[v.stream]=new e.MediaStream),r(b,o[v.stream]),a.push([b,I,o[v.stream]])):(o.default||(o.default=new e.MediaStream),r(b,o.default),a.push([b,I,o.default])))}}else{(g=s.transceivers[c]||s._createTransceiver(p)).mid=R,g.iceGatherer||(g.iceGatherer=s._createIceGatherer(c,l)),A.length&&\\\"new\\\"===g.iceTransport.state&&(!D||l&&0!==c?A.forEach((function(e){ie(g.iceTransport,e)})):g.iceTransport.setRemoteCandidates(A)),k=e.RTCRtpReceiver.getCapabilities(p),t<15019&&(k.codecs=k.codecs.filter((function(e){return\\\"rtx\\\"!==e.name}))),E=g.sendEncodingParameters||[{ssrc:1001*(2*c+2)}];var M,x=!1;if(\\\"sendrecv\\\"===f||\\\"sendonly\\\"===f){if(x=!g.rtpReceiver,I=g.rtpReceiver||new e.RTCRtpReceiver(g.dtlsTransport,p),x)b=I.track,v&&\\\"-\\\"===v.stream||(v?(o[v.stream]||(o[v.stream]=new e.MediaStream,Object.defineProperty(o[v.stream],\\\"id\\\",{get:function(){return v.stream}})),Object.defineProperty(b,\\\"id\\\",{get:function(){return v.track}}),M=o[v.stream]):(o.default||(o.default=new e.MediaStream),M=o.default)),M&&(r(b,M),g.associatedRemoteMediaStreams.push(M)),a.push([b,I,M])}else g.rtpReceiver&&g.rtpReceiver.track&&(g.associatedRemoteMediaStreams.forEach((function(t){var r=t.getTracks().find((function(e){return e.id===g.rtpReceiver.track.id}));r&&function(t,r){r.removeTrack(t),r.dispatchEvent(new e.MediaStreamTrackEvent(\\\"removetrack\\\",{track:t}))}(r,t)})),g.associatedRemoteMediaStreams=[]);g.localCapabilities=k,g.remoteCapabilities=L,g.rtpReceiver=I,g.rtcpParameters=N,g.sendEncodingParameters=E,g.recvEncodingParameters=y,s._transceive(s.transceivers[c],!1,x)}}})),void 0===s._dtlsRole&&(s._dtlsRole=\\\"offer\\\"===n.type?\\\"active\\\":\\\"passive\\\"),s._remoteDescription={type:n.type,sdp:n.sdp},\\\"offer\\\"===n.type?s._updateSignalingState(\\\"have-remote-offer\\\"):s._updateSignalingState(\\\"stable\\\"),Object.keys(o).forEach((function(t){var r=o[t];if(r.getTracks().length){if(-1===s.remoteStreams.indexOf(r)){s.remoteStreams.push(r);var n=new Event(\\\"addstream\\\");n.stream=r,e.setTimeout((function(){s._dispatchEvent(\\\"addstream\\\",n)}))}a.forEach((function(e){var t=e[0],n=e[1];r.id===e[2].id&&i(s,t,n,[r])}))}})),a.forEach((function(e){e[2]||i(s,e[0],e[1],[])})),e.setTimeout((function(){s&&s.transceivers&&s.transceivers.forEach((function(e){e.iceTransport&&\\\"new\\\"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn(\\\"Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification\\\"),e.iceTransport.addRemoteCandidate({}))}))}),4e3),Promise.resolve()},n.prototype.close=function(){this.transceivers.forEach((function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()})),this._isClosed=!0,this._updateSignalingState(\\\"closed\\\")},n.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event(\\\"signalingstatechange\\\");this._dispatchEvent(\\\"signalingstatechange\\\",t)},n.prototype._maybeFireNegotiationNeeded=function(){var t=this;\\\"stable\\\"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout((function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event(\\\"negotiationneeded\\\");t._dispatchEvent(\\\"negotiationneeded\\\",e)}}),0))},n.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++})),e=\\\"new\\\",t.failed>0?e=\\\"failed\\\":t.checking>0?e=\\\"checking\\\":t.disconnected>0?e=\\\"disconnected\\\":t.new>0?e=\\\"new\\\":t.connected>0?e=\\\"connected\\\":t.completed>0&&(e=\\\"completed\\\"),e!==this.iceConnectionState){this.iceConnectionState=e;var r=new Event(\\\"iceconnectionstatechange\\\");this._dispatchEvent(\\\"iceconnectionstatechange\\\",r)}},n.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)})),t.connected+=t.completed,e=\\\"new\\\",t.failed>0?e=\\\"failed\\\":t.connecting>0?e=\\\"connecting\\\":t.disconnected>0?e=\\\"disconnected\\\":t.new>0?e=\\\"new\\\":t.connected>0&&(e=\\\"connected\\\"),e!==this.connectionState){this.connectionState=e;var r=new Event(\\\"connectionstatechange\\\");this._dispatchEvent(\\\"connectionstatechange\\\",r)}},n.prototype.createOffer=function(){var r=this;if(r._isClosed)return Promise.reject(ne(\\\"InvalidStateError\\\",\\\"Can not call createOffer after close\\\"));var i=r.transceivers.filter((function(e){return\\\"audio\\\"===e.kind})).length,n=r.transceivers.filter((function(e){return\\\"video\\\"===e.kind})).length,s=arguments[0];if(s){if(s.mandatory||s.optional)throw new TypeError(\\\"Legacy mandatory/optional constraints not supported.\\\");void 0!==s.offerToReceiveAudio&&(i=!0===s.offerToReceiveAudio?1:!1===s.offerToReceiveAudio?0:s.offerToReceiveAudio),void 0!==s.offerToReceiveVideo&&(n=!0===s.offerToReceiveVideo?1:!1===s.offerToReceiveVideo?0:s.offerToReceiveVideo)}for(r.transceivers.forEach((function(e){\\\"audio\\\"===e.kind?--i<0&&(e.wantReceive=!1):\\\"video\\\"===e.kind&&--n<0&&(e.wantReceive=!1)}));i>0||n>0;)i>0&&(r._createTransceiver(\\\"audio\\\"),i--),n>0&&(r._createTransceiver(\\\"video\\\"),n--);var o=Z.writeSessionBoilerplate(r._sdpSessionId,r._sdpSessionVersion++);r.transceivers.forEach((function(i,n){var s=i.track,o=i.kind,a=i.mid||Z.generateIdentifier();i.mid=a,i.iceGatherer||(i.iceGatherer=r._createIceGatherer(n,r.usingBundle));var c=e.RTCRtpSender.getCapabilities(o);t<15019&&(c.codecs=c.codecs.filter((function(e){return\\\"rtx\\\"!==e.name}))),c.codecs.forEach((function(e){\\\"H264\\\"===e.name&&void 0===e.parameters[\\\"level-asymmetry-allowed\\\"]&&(e.parameters[\\\"level-asymmetry-allowed\\\"]=\\\"1\\\"),i.remoteCapabilities&&i.remoteCapabilities.codecs&&i.remoteCapabilities.codecs.forEach((function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)}))})),c.headerExtensions.forEach((function(e){(i.remoteCapabilities&&i.remoteCapabilities.headerExtensions||[]).forEach((function(t){e.uri===t.uri&&(e.id=t.id)}))}));var d=i.sendEncodingParameters||[{ssrc:1001*(2*n+1)}];s&&t>=15019&&\\\"video\\\"===o&&!d[0].rtx&&(d[0].rtx={ssrc:d[0].ssrc+1}),i.wantReceive&&(i.rtpReceiver=new e.RTCRtpReceiver(i.dtlsTransport,o)),i.localCapabilities=c,i.sendEncodingParameters=d})),\\\"max-compat\\\"!==r._config.bundlePolicy&&(o+=\\\"a=group:BUNDLE \\\"+r.transceivers.map((function(e){return e.mid})).join(\\\" \\\")+\\\"\\\\r\\\\n\\\"),o+=\\\"a=ice-options:trickle\\\\r\\\\n\\\",r.transceivers.forEach((function(e,t){o+=ee(e,e.localCapabilities,\\\"offer\\\",e.stream,r._dtlsRole),o+=\\\"a=rtcp-rsize\\\\r\\\\n\\\",!e.iceGatherer||\\\"new\\\"===r.iceGatheringState||0!==t&&r.usingBundle||(e.iceGatherer.getLocalCandidates().forEach((function(e){e.component=1,o+=\\\"a=\\\"+Z.writeCandidate(e)+\\\"\\\\r\\\\n\\\"})),\\\"completed\\\"===e.iceGatherer.state&&(o+=\\\"a=end-of-candidates\\\\r\\\\n\\\"))}));var a=new e.RTCSessionDescription({type:\\\"offer\\\",sdp:o});return Promise.resolve(a)},n.prototype.createAnswer=function(){var r=this;if(r._isClosed)return Promise.reject(ne(\\\"InvalidStateError\\\",\\\"Can not call createAnswer after close\\\"));if(\\\"have-remote-offer\\\"!==r.signalingState&&\\\"have-local-pranswer\\\"!==r.signalingState)return Promise.reject(ne(\\\"InvalidStateError\\\",\\\"Can not call createAnswer in signalingState \\\"+r.signalingState));var i=Z.writeSessionBoilerplate(r._sdpSessionId,r._sdpSessionVersion++);r.usingBundle&&(i+=\\\"a=group:BUNDLE \\\"+r.transceivers.map((function(e){return e.mid})).join(\\\" \\\")+\\\"\\\\r\\\\n\\\"),i+=\\\"a=ice-options:trickle\\\\r\\\\n\\\";var n=Z.getMediaSections(r._remoteDescription.sdp).length;r.transceivers.forEach((function(e,s){if(!(s+1>n)){if(e.rejected)return\\\"application\\\"===e.kind?\\\"DTLS/SCTP\\\"===e.protocol?i+=\\\"m=application 0 DTLS/SCTP 5000\\\\r\\\\n\\\":i+=\\\"m=application 0 \\\"+e.protocol+\\\" webrtc-datachannel\\\\r\\\\n\\\":\\\"audio\\\"===e.kind?i+=\\\"m=audio 0 UDP/TLS/RTP/SAVPF 0\\\\r\\\\na=rtpmap:0 PCMU/8000\\\\r\\\\n\\\":\\\"video\\\"===e.kind&&(i+=\\\"m=video 0 UDP/TLS/RTP/SAVPF 120\\\\r\\\\na=rtpmap:120 VP8/90000\\\\r\\\\n\\\"),void(i+=\\\"c=IN IP4 0.0.0.0\\\\r\\\\na=inactive\\\\r\\\\na=mid:\\\"+e.mid+\\\"\\\\r\\\\n\\\");var o;if(e.stream)\\\"audio\\\"===e.kind?o=e.stream.getAudioTracks()[0]:\\\"video\\\"===e.kind&&(o=e.stream.getVideoTracks()[0]),o&&t>=15019&&\\\"video\\\"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1});var a=te(e.localCapabilities,e.remoteCapabilities);!a.codecs.filter((function(e){return\\\"rtx\\\"===e.name.toLowerCase()})).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,i+=ee(e,a,\\\"answer\\\",e.stream,r._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(i+=\\\"a=rtcp-rsize\\\\r\\\\n\\\")}}));var s=new e.RTCSessionDescription({type:\\\"answer\\\",sdp:i});return Promise.resolve(s)},n.prototype.addIceCandidate=function(e){var t,r=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError(\\\"sdpMLineIndex or sdpMid required\\\")):new Promise((function(i,n){if(!r._remoteDescription)return n(ne(\\\"InvalidStateError\\\",\\\"Can not add ICE candidate without a remote description\\\"));if(e&&\\\"\\\"!==e.candidate){var s=e.sdpMLineIndex;if(e.sdpMid)for(var o=0;o<r.transceivers.length;o++)if(r.transceivers[o].mid===e.sdpMid){s=o;break}var a=r.transceivers[s];if(!a)return n(ne(\\\"OperationError\\\",\\\"Can not add ICE candidate\\\"));if(a.rejected)return i();var c=Object.keys(e.candidate).length>0?Z.parseCandidate(e.candidate):{};if(\\\"tcp\\\"===c.protocol&&(0===c.port||9===c.port))return i();if(c.component&&1!==c.component)return i();if((0===s||s>0&&a.iceTransport!==r.transceivers[0].iceTransport)&&!ie(a.iceTransport,c))return n(ne(\\\"OperationError\\\",\\\"Can not add ICE candidate\\\"));var d=e.candidate.trim();0===d.indexOf(\\\"a=\\\")&&(d=d.substr(2)),(t=Z.getMediaSections(r._remoteDescription.sdp))[s]+=\\\"a=\\\"+(c.type?d:\\\"end-of-candidates\\\")+\\\"\\\\r\\\\n\\\",r._remoteDescription.sdp=Z.getDescription(r._remoteDescription.sdp)+t.join(\\\"\\\")}else for(var u=0;u<r.transceivers.length&&(r.transceivers[u].rejected||(r.transceivers[u].iceTransport.addRemoteCandidate({}),(t=Z.getMediaSections(r._remoteDescription.sdp))[u]+=\\\"a=end-of-candidates\\\\r\\\\n\\\",r._remoteDescription.sdp=Z.getDescription(r._remoteDescription.sdp)+t.join(\\\"\\\"),!r.usingBundle));u++);i()}))},n.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var r=null;if(this.transceivers.forEach((function(e){e.rtpSender&&e.rtpSender.track===t?r=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(r=e.rtpReceiver)})),!r)throw ne(\\\"InvalidAccessError\\\",\\\"Invalid selector.\\\");return r.getStats()}var i=[];return this.transceivers.forEach((function(e){[\\\"rtpSender\\\",\\\"rtpReceiver\\\",\\\"iceGatherer\\\",\\\"iceTransport\\\",\\\"dtlsTransport\\\"].forEach((function(t){e[t]&&i.push(e[t].getStats())}))})),Promise.all(i).then((function(e){var t=new Map;return e.forEach((function(e){e.forEach((function(e){t.set(e.id,e)}))})),t}))};[\\\"RTCRtpSender\\\",\\\"RTCRtpReceiver\\\",\\\"RTCIceGatherer\\\",\\\"RTCIceTransport\\\",\\\"RTCDtlsTransport\\\"].forEach((function(t){var r=e[t];if(r&&r.prototype&&r.prototype.getStats){var i=r.prototype.getStats;r.prototype.getStats=function(){return i.apply(this).then((function(e){var t=new Map;return Object.keys(e).forEach((function(r){var i;e[r].type={inboundrtp:\\\"inbound-rtp\\\",outboundrtp:\\\"outbound-rtp\\\",candidatepair:\\\"candidate-pair\\\",localcandidate:\\\"local-candidate\\\",remotecandidate:\\\"remote-candidate\\\"}[(i=e[r]).type]||i.type,t.set(r,e[r])})),t}))}}}));var s=[\\\"createOffer\\\",\\\"createAnswer\\\"];return s.forEach((function(e){var t=n.prototype[e];n.prototype[e]=function(){var e=arguments;return\\\"function\\\"==typeof e[0]||\\\"function\\\"==typeof e[1]?t.apply(this,[arguments[2]]).then((function(t){\\\"function\\\"==typeof e[0]&&e[0].apply(null,[t])}),(function(t){\\\"function\\\"==typeof e[1]&&e[1].apply(null,[t])})):t.apply(this,arguments)}})),(s=[\\\"setLocalDescription\\\",\\\"setRemoteDescription\\\",\\\"addIceCandidate\\\"]).forEach((function(e){var t=n.prototype[e];n.prototype[e]=function(){var e=arguments;return\\\"function\\\"==typeof e[1]||\\\"function\\\"==typeof e[2]?t.apply(this,arguments).then((function(){\\\"function\\\"==typeof e[1]&&e[1].apply(null)}),(function(t){\\\"function\\\"==typeof e[2]&&e[2].apply(null,[t])})):t.apply(this,arguments)}})),[\\\"getStats\\\"].forEach((function(e){var t=n.prototype[e];n.prototype[e]=function(){var e=arguments;return\\\"function\\\"==typeof e[1]?t.apply(this,arguments).then((function(){\\\"function\\\"==typeof e[1]&&e[1].apply(null)})):t.apply(this,arguments)}})),n};function oe(e){const t=e&&e.navigator,r=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return r(e).catch((e=>Promise.reject(function(e){return{name:{PermissionDeniedError:\\\"NotAllowedError\\\"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString(){return this.name}}}(e))))}}function ae(e){\\\"getDisplayMedia\\\"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&\\\"getDisplayMedia\\\"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}function ce(e,t){if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){const t=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,\\\"enabled\\\");Object.defineProperty(e.MediaStreamTrack.prototype,\\\"enabled\\\",{set(e){t.set.call(this,e);const r=new Event(\\\"enabled\\\");r.enabled=e,this.dispatchEvent(r)}})}e.RTCRtpSender&&!(\\\"dtmf\\\"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,\\\"dtmf\\\",{get(){return void 0===this._dtmf&&(\\\"audio\\\"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):\\\"video\\\"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);const r=se(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=function(e,t){let r=!1;return(e=JSON.parse(JSON.stringify(e))).filter((e=>{if(e&&(e.urls||e.url)){let t=e.urls||e.url;e.url&&!e.urls&&M(\\\"RTCIceServer.url\\\",\\\"RTCIceServer.urls\\\");const i=\\\"string\\\"==typeof t;return i&&(t=[t]),t=t.filter((e=>{if(0===e.indexOf(\\\"stun:\\\"))return!1;const t=e.startsWith(\\\"turn\\\")&&!e.startsWith(\\\"turn:[\\\")&&e.includes(\\\"transport=udp\\\");return t&&!r?(r=!0,!0):t&&!r})),delete e.url,e.urls=i?t[0]:t,!!t.length}}))}(e.iceServers,t.version),A(\\\"ICE servers after filtering:\\\",e.iceServers)),new r(e)},e.RTCPeerConnection.prototype=r.prototype}function de(e){e.RTCRtpSender&&!(\\\"replaceTrack\\\"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}var ue=Object.freeze({__proto__:null,shimPeerConnection:ce,shimReplaceTrack:de,shimGetUserMedia:oe,shimGetDisplayMedia:ae});function le(e,t){const r=e&&e.navigator,i=e&&e.MediaStreamTrack;if(r.getUserMedia=function(e,t,i){M(\\\"navigator.getUserMedia\\\",\\\"navigator.mediaDevices.getUserMedia\\\"),r.mediaDevices.getUserMedia(e).then(t,i)},!(t.version>55&&\\\"autoGainControl\\\"in r.mediaDevices.getSupportedConstraints())){const e=function(e,t,r){t in e&&!(r in e)&&(e[r]=e[t],delete e[t])},t=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(r){return\\\"object\\\"==typeof r&&\\\"object\\\"==typeof r.audio&&(r=JSON.parse(JSON.stringify(r)),e(r.audio,\\\"autoGainControl\\\",\\\"mozAutoGainControl\\\"),e(r.audio,\\\"noiseSuppression\\\",\\\"mozNoiseSuppression\\\")),t(r)},i&&i.prototype.getSettings){const t=i.prototype.getSettings;i.prototype.getSettings=function(){const r=t.apply(this,arguments);return e(r,\\\"mozAutoGainControl\\\",\\\"autoGainControl\\\"),e(r,\\\"mozNoiseSuppression\\\",\\\"noiseSuppression\\\"),r}}if(i&&i.prototype.applyConstraints){const t=i.prototype.applyConstraints;i.prototype.applyConstraints=function(r){return\\\"audio\\\"===this.kind&&\\\"object\\\"==typeof r&&(r=JSON.parse(JSON.stringify(r)),e(r,\\\"autoGainControl\\\",\\\"mozAutoGainControl\\\"),e(r,\\\"noiseSuppression\\\",\\\"mozNoiseSuppression\\\")),t.apply(this,[r])}}}}function he(e){\\\"object\\\"==typeof e&&e.RTCTrackEvent&&\\\"receiver\\\"in e.RTCTrackEvent.prototype&&!(\\\"transceiver\\\"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,\\\"transceiver\\\",{get(){return{receiver:this.receiver}}})}function pe(e,t){if(\\\"object\\\"!=typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&[\\\"setLocalDescription\\\",\\\"setRemoteDescription\\\",\\\"addIceCandidate\\\"].forEach((function(t){const r=e.RTCPeerConnection.prototype[t],i={[t](){return arguments[0]=new(\\\"addIceCandidate\\\"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=i[t]}));const r={inboundrtp:\\\"inbound-rtp\\\",outboundrtp:\\\"outbound-rtp\\\",candidatepair:\\\"candidate-pair\\\",localcandidate:\\\"local-candidate\\\",remotecandidate:\\\"remote-candidate\\\"},i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,n,s]=arguments;return i.apply(this,[e||null]).then((e=>{if(t.version<53&&!n)try{e.forEach((e=>{e.type=r[e.type]||e.type}))}catch(t){if(\\\"TypeError\\\"!==t.name)throw t;e.forEach(((t,i)=>{e.set(i,Object.assign({},t,{type:r[t.type]||t.type}))}))}return e})).then(n,s)}}function _e(e){if(\\\"object\\\"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&\\\"getStats\\\"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=r.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function me(e){if(\\\"object\\\"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&\\\"getStats\\\"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),L(e,\\\"track\\\",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function fe(e){e.RTCPeerConnection&&!(\\\"removeStream\\\"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){M(\\\"removeStream\\\",\\\"removeTrack\\\"),this.getSenders().forEach((t=>{t.track&&e.getTracks().includes(t.track)&&this.removeTrack(t)}))})}function ve(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function Re(e){if(\\\"object\\\"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const e=arguments[1],r=e&&\\\"sendEncodings\\\"in e;r&&e.sendEncodings.forEach((e=>{if(\\\"rid\\\"in e){if(!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError(\\\"Invalid RID value provided.\\\")}if(\\\"scaleResolutionDownBy\\\"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError(\\\"scale_resolution_down_by must be >= 1.0\\\");if(\\\"maxFramerate\\\"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError(\\\"max_framerate must be >= 0.0\\\")}));const i=t.apply(this,arguments);if(r){const{sender:t}=i,r=t.getParameters();(!(\\\"encodings\\\"in r)||1===r.encodings.length&&0===Object.keys(r.encodings[0]).length)&&(r.encodings=e.sendEncodings,t.sendEncodings=e.sendEncodings,this.setParametersPromises.push(t.setParameters(r).then((()=>{delete t.sendEncodings})).catch((()=>{delete t.sendEncodings}))))}return i})}function ge(e){if(\\\"object\\\"!=typeof e||!e.RTCRtpSender)return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const e=t.apply(this,arguments);return\\\"encodings\\\"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}function Se(e){if(\\\"object\\\"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}function Ce(e){if(\\\"object\\\"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}var Te=Object.freeze({__proto__:null,shimOnTrack:he,shimPeerConnection:pe,shimSenderGetStats:_e,shimReceiverGetStats:me,shimRemoveStream:fe,shimRTCDataChannel:ve,shimAddTransceiver:Re,shimGetParameters:ge,shimCreateOffer:Se,shimCreateAnswer:Ce,shimGetUserMedia:le,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&\\\"getDisplayMedia\\\"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!r||!r.video){const e=new DOMException(\\\"getDisplayMedia without video constraints is undefined\\\");return e.name=\\\"NotFoundError\\\",e.code=8,Promise.reject(e)}return!0===r.video?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})}});function Ie(e){if(\\\"object\\\"==typeof e&&e.RTCPeerConnection){if(\\\"getLocalStreams\\\"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!(\\\"addStream\\\"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((r=>t.call(this,r,e))),e.getVideoTracks().forEach((r=>t.call(this,r,e)))},e.RTCPeerConnection.prototype.addTrack=function(e,...r){return r&&r.forEach((e=>{this._localStreams?this._localStreams.includes(e)||this._localStreams.push(e):this._localStreams=[e]})),t.apply(this,arguments)}}\\\"removeStream\\\"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(-1===t)return;this._localStreams.splice(t,1);const r=e.getTracks();this.getSenders().forEach((e=>{r.includes(e.track)&&this.removeTrack(e)}))})}}function Ee(e){if(\\\"object\\\"==typeof e&&e.RTCPeerConnection&&(\\\"getRemoteStreams\\\"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!(\\\"onaddstream\\\"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,\\\"onaddstream\\\",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener(\\\"addstream\\\",this._onaddstream),this.removeEventListener(\\\"track\\\",this._onaddstreampoly)),this.addEventListener(\\\"addstream\\\",this._onaddstream=e),this.addEventListener(\\\"track\\\",this._onaddstreampoly=e=>{e.streams.forEach((e=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(e))return;this._remoteStreams.push(e);const t=new Event(\\\"addstream\\\");t.stream=e,this.dispatchEvent(t)}))})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener(\\\"track\\\",this._onaddstreampoly=function(t){t.streams.forEach((t=>{if(e._remoteStreams||(e._remoteStreams=[]),e._remoteStreams.indexOf(t)>=0)return;e._remoteStreams.push(t);const r=new Event(\\\"addstream\\\");r.stream=t,e.dispatchEvent(r)}))}),t.apply(e,arguments)}}}function ye(e){if(\\\"object\\\"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,r=t.createOffer,i=t.createAnswer,n=t.setLocalDescription,s=t.setRemoteDescription,o=t.addIceCandidate;t.createOffer=function(e,t){const i=arguments.length>=2?arguments[2]:arguments[0],n=r.apply(this,[i]);return t?(n.then(e,t),Promise.resolve()):n},t.createAnswer=function(e,t){const r=arguments.length>=2?arguments[2]:arguments[0],n=i.apply(this,[r]);return t?(n.then(e,t),Promise.resolve()):n};let a=function(e,t,r){const i=n.apply(this,[e]);return r?(i.then(t,r),Promise.resolve()):i};t.setLocalDescription=a,a=function(e,t,r){const i=s.apply(this,[e]);return r?(i.then(t,r),Promise.resolve()):i},t.setRemoteDescription=a,a=function(e,t,r){const i=o.apply(this,[e]);return r?(i.then(t,r),Promise.resolve()):i},t.addIceCandidate=a}function ke(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,r=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=e=>r(be(e))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,r,i){t.mediaDevices.getUserMedia(e).then(r,i)}.bind(t))}function be(e){return e&&void 0!==e.video?Object.assign({},e,{video:U(e.video)}):e}function Pe(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,r){if(e&&e.iceServers){const t=[];for(let r=0;r<e.iceServers.length;r++){let i=e.iceServers[r];!i.hasOwnProperty(\\\"urls\\\")&&i.hasOwnProperty(\\\"url\\\")?(M(\\\"RTCIceServer.url\\\",\\\"RTCIceServer.urls\\\"),i=JSON.parse(JSON.stringify(i)),i.urls=i.url,delete i.url,t.push(i)):t.push(e.iceServers[r])}e.iceServers=t}return new t(e,r)},e.RTCPeerConnection.prototype=t.prototype,\\\"generateCertificate\\\"in t&&Object.defineProperty(e.RTCPeerConnection,\\\"generateCertificate\\\",{get:()=>t.generateCertificate})}function Oe(e){\\\"object\\\"==typeof e&&e.RTCTrackEvent&&\\\"receiver\\\"in e.RTCTrackEvent.prototype&&!(\\\"transceiver\\\"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,\\\"transceiver\\\",{get(){return{receiver:this.receiver}}})}function Le(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find((e=>\\\"audio\\\"===e.receiver.track.kind));!1===e.offerToReceiveAudio&&t?\\\"sendrecv\\\"===t.direction?t.setDirection?t.setDirection(\\\"sendonly\\\"):t.direction=\\\"sendonly\\\":\\\"recvonly\\\"===t.direction&&(t.setDirection?t.setDirection(\\\"inactive\\\"):t.direction=\\\"inactive\\\"):!0!==e.offerToReceiveAudio||t||this.addTransceiver(\\\"audio\\\"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const r=this.getTransceivers().find((e=>\\\"video\\\"===e.receiver.track.kind));!1===e.offerToReceiveVideo&&r?\\\"sendrecv\\\"===r.direction?r.setDirection?r.setDirection(\\\"sendonly\\\"):r.direction=\\\"sendonly\\\":\\\"recvonly\\\"===r.direction&&(r.setDirection?r.setDirection(\\\"inactive\\\"):r.direction=\\\"inactive\\\"):!0!==e.offerToReceiveVideo||r||this.addTransceiver(\\\"video\\\")}return t.apply(this,arguments)}}function Ne(e){\\\"object\\\"!=typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var De=Object.freeze({__proto__:null,shimLocalStreamsAPI:Ie,shimRemoteStreamsAPI:Ee,shimCallbacksAPI:ye,shimGetUserMedia:ke,shimConstraints:be,shimRTCIceServerUrls:Pe,shimTrackEventTransceiver:Oe,shimCreateOfferLegacy:Le,shimAudioContext:Ne});function Ae(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&\\\"foundation\\\"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if(\\\"object\\\"==typeof e&&e.candidate&&0===e.candidate.indexOf(\\\"a=\\\")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){const r=new t(e),i=Z.parseCandidate(e.candidate),n=Object.assign(r,i);return n.toJSON=function(){return{candidate:n.candidate,sdpMid:n.sdpMid,sdpMLineIndex:n.sdpMLineIndex,usernameFragment:n.usernameFragment}},n}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,L(e,\\\"icecandidate\\\",(t=>(t.candidate&&Object.defineProperty(t,\\\"candidate\\\",{value:new e.RTCIceCandidate(t.candidate),writable:\\\"false\\\"}),t)))}function Me(e,t){if(!e.RTCPeerConnection)return;\\\"sctp\\\"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,\\\"sctp\\\",{get(){return void 0===this._sctp?null:this._sctp}});const r=function(e){if(!e||!e.sdp)return!1;const t=Z.splitSections(e.sdp);return t.shift(),t.some((e=>{const t=Z.parseMLine(e);return t&&\\\"application\\\"===t.kind&&-1!==t.protocol.indexOf(\\\"SCTP\\\")}))},i=function(e){const t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\\\\d+)/);if(null===t||t.length<2)return-1;const r=parseInt(t[1],10);return r!=r?-1:r},n=function(e){let r=65536;return\\\"firefox\\\"===t.browser&&(r=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),r},s=function(e,r){let i=65536;\\\"firefox\\\"===t.browser&&57===t.version&&(i=65535);const n=Z.matchPrefix(e.sdp,\\\"a=max-message-size:\\\");return n.length>0?i=parseInt(n[0].substr(19),10):\\\"firefox\\\"===t.browser&&-1!==r&&(i=2147483637),i},o=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,\\\"chrome\\\"===t.browser&&t.version>=76){const{sdpSemantics:e}=this.getConfiguration();\\\"plan-b\\\"===e&&Object.defineProperty(this,\\\"sctp\\\",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(r(arguments[0])){const e=i(arguments[0]),t=n(e),r=s(arguments[0],e);let o;o=0===t&&0===r?Number.POSITIVE_INFINITY:0===t||0===r?Math.max(t,r):Math.min(t,r);const a={};Object.defineProperty(a,\\\"maxMessageSize\\\",{get:()=>o}),this._sctp=a}return o.apply(this,arguments)}}function xe(e){if(!e.RTCPeerConnection||!(\\\"createDataChannel\\\"in e.RTCPeerConnection.prototype))return;function t(e,t){const r=e.send;e.send=function(){const i=arguments[0],n=i.length||i.size||i.byteLength;if(\\\"open\\\"===e.readyState&&t.sctp&&n>t.sctp.maxMessageSize)throw new TypeError(\\\"Message too large (can send a maximum of \\\"+t.sctp.maxMessageSize+\\\" bytes)\\\");return r.apply(e,arguments)}}const r=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const e=r.apply(this,arguments);return t(e,this),e},L(e,\\\"datachannel\\\",(e=>(t(e.channel,e.target),e)))}function Ue(e){if(!e.RTCPeerConnection||\\\"connectionState\\\"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,\\\"connectionState\\\",{get(){return{completed:\\\"connected\\\",checking:\\\"connecting\\\"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,\\\"onconnectionstatechange\\\",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener(\\\"connectionstatechange\\\",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener(\\\"connectionstatechange\\\",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),[\\\"setLocalDescription\\\",\\\"setRemoteDescription\\\"].forEach((e=>{const r=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;const r=new Event(\\\"connectionstatechange\\\",e);t.dispatchEvent(r)}return e},this.addEventListener(\\\"iceconnectionstatechange\\\",this._connectionstatechangepoly)),r.apply(this,arguments)}}))}function we(e,t){if(!e.RTCPeerConnection)return;if(\\\"chrome\\\"===t.browser&&t.version>=71)return;if(\\\"safari\\\"===t.browser&&t.version>=605)return;const r=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf(\\\"\\\\na=extmap-allow-mixed\\\")){const r=t.sdp.split(\\\"\\\\n\\\").filter((e=>\\\"a=extmap-allow-mixed\\\"!==e.trim())).join(\\\"\\\\n\\\");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:r}):t.sdp=r}return r.apply(this,arguments)}}function $e(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const r=e.RTCPeerConnection.prototype.addIceCandidate;r&&0!==r.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(\\\"chrome\\\"===t.browser&&t.version<78||\\\"firefox\\\"===t.browser&&t.version<68||\\\"safari\\\"===t.browser)&&arguments[0]&&\\\"\\\"===arguments[0].candidate?Promise.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}var je=Object.freeze({__proto__:null,shimRTCIceCandidate:Ae,shimMaxMessageSize:Me,shimSendThrowTypeError:xe,shimConnectionState:Ue,removeExtmapAllowMixed:we,shimAddIceCandidateNullOrEmpty:$e});const Ve=function({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0}){const r=A,i=function(e){const t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser=\\\"Not a browser.\\\",t;const{navigator:r}=e;if(r.mozGetUserMedia)t.browser=\\\"firefox\\\",t.version=O(r.userAgent,/Firefox\\\\/(\\\\d+)\\\\./,1);else if(r.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser=\\\"chrome\\\",t.version=O(r.userAgent,/Chrom(e|ium)\\\\/(\\\\d+)\\\\./,2);else if(r.mediaDevices&&r.userAgent.match(/Edge\\\\/(\\\\d+).(\\\\d+)$/))t.browser=\\\"edge\\\",t.version=O(r.userAgent,/Edge\\\\/(\\\\d+).(\\\\d+)$/,2);else{if(!e.RTCPeerConnection||!r.userAgent.match(/AppleWebKit\\\\/(\\\\d+)\\\\./))return t.browser=\\\"Not a supported browser.\\\",t;t.browser=\\\"safari\\\",t.version=O(r.userAgent,/AppleWebKit\\\\/(\\\\d+)\\\\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&\\\"currentDirection\\\"in e.RTCRtpTransceiver.prototype}return t}(e),n={browserDetails:i,commonShim:je,extractVersion:O,disableLog:N,disableWarnings:D};switch(i.browser){case\\\"chrome\\\":if(!z||!Y||!t.shimChrome)return r(\\\"Chrome shim is not included in this adapter release.\\\"),n;if(null===i.version)return r(\\\"Chrome shim can not determine version, not shimming.\\\"),n;r(\\\"adapter.js shimming chrome.\\\"),n.browserShim=z,$e(e,i),V(e,i),B(e),Y(e,i),H(e),W(e,i),F(e),K(e),G(e),q(e,i),Ae(e),Ue(e),Me(e,i),xe(e),we(e,i);break;case\\\"firefox\\\":if(!Te||!pe||!t.shimFirefox)return r(\\\"Firefox shim is not included in this adapter release.\\\"),n;r(\\\"adapter.js shimming firefox.\\\"),n.browserShim=Te,$e(e,i),le(e,i),pe(e,i),he(e),fe(e),_e(e),me(e),ve(e),Re(e),ge(e),Se(e),Ce(e),Ae(e),Ue(e),Me(e,i),xe(e);break;case\\\"edge\\\":if(!ue||!ce||!t.shimEdge)return r(\\\"MS edge shim is not included in this adapter release.\\\"),n;r(\\\"adapter.js shimming edge.\\\"),n.browserShim=ue,oe(e),ae(e),ce(e,i),de(e),Me(e,i),xe(e);break;case\\\"safari\\\":if(!De||!t.shimSafari)return r(\\\"Safari shim is not included in this adapter release.\\\"),n;r(\\\"adapter.js shimming safari.\\\"),n.browserShim=De,$e(e,i),Pe(e),Le(e),ye(e),Ie(e),Ee(e),Oe(e),ke(e),Ne(e),Ae(e),Me(e,i),xe(e),we(e,i);break;default:r(\\\"Unsupported browser!\\\")}return n}({window:\\\"undefined\\\"==typeof window?void 0:window});var Be,He,Fe;!function(e){e.FPS_10=\\\"FPS_10\\\",e.FPS_15=\\\"FPS_15\\\",e.FPS_24=\\\"FPS_24\\\",e.FPS_30=\\\"FPS_30\\\"}(Be||(Be={})),function(e){e.W176_H132=\\\"W176_H132\\\",e.W176_H144=\\\"W176_H144\\\",e.W256_H144=\\\"W256_H144\\\",e.W320_H180=\\\"W320_H180\\\",e.W240_H240=\\\"W240_H240\\\",e.W320_H240=\\\"W320_H240\\\",e.W480_H360=\\\"W480_H360\\\",e.W640_H360=\\\"W640_H360\\\",e.W480_H480=\\\"W480_H480\\\",e.W640_H480=\\\"W640_H480\\\",e.W720_H480=\\\"W720_H480\\\",e.W1280_H720=\\\"W1280_H720\\\",e.W1920_H1080=\\\"W1920_H1080\\\"}(He||(He={})),function(e){e[e.AUDIO_ONLY=0]=\\\"AUDIO_ONLY\\\",e[e.VIDEO_ONLY=1]=\\\"VIDEO_ONLY\\\",e[e.AUDIO_VIDEO=2]=\\\"AUDIO_VIDEO\\\"}(Fe||(Fe={}));const Ke={[He.W176_H132]:{width:176,height:132,maxBitrate:150,minBitrate:80},[He.W176_H144]:{width:176,height:144,maxBitrate:160,minBitrate:80},[He.W256_H144]:{width:256,height:144,maxBitrate:240,minBitrate:120},[He.W320_H180]:{width:320,height:180,maxBitrate:280,minBitrate:120},[He.W240_H240]:{width:240,height:240,maxBitrate:280,minBitrate:120},[He.W320_H240]:{width:320,height:240,maxBitrate:400,minBitrate:120},[He.W480_H360]:{width:480,height:360,maxBitrate:650,minBitrate:150},[He.W640_H360]:{width:640,height:360,maxBitrate:800,minBitrate:180},[He.W480_H480]:{width:480,height:480,maxBitrate:800,minBitrate:180},[He.W640_H480]:{width:640,height:480,maxBitrate:900,minBitrate:200},[He.W720_H480]:{width:720,height:480,maxBitrate:1e3,minBitrate:200},[He.W1280_H720]:{width:1280,height:720,maxBitrate:2200,minBitrate:250},[He.W1920_H1080]:{width:1920,height:1080,maxBitrate:4e3,minBitrate:400}},Ge=(e,t)=>{const r=e*t;let i=Number.MAX_VALUE,n=null;for(const e in Ke){const t=Ke[e],s=Math.abs(t.width*t.height-r);s<i&&(n=t,i=s)}return n},Je={10:1,15:1,24:1.5,30:1.5},We=e=>{let t=Number.MAX_VALUE,r=1;for(const i in Je){const n=Math.abs(e-parseInt(i));n<t&&(t=n,r=Je[i])}return r},Ye={getCameras:()=>S(void 0,void 0,void 0,(function*(){return(yield navigator.mediaDevices.enumerateDevices()).filter((e=>\\\"videoinput\\\"===e.kind))})),getMicrophones:()=>S(void 0,void 0,void 0,(function*(){return(yield navigator.mediaDevices.enumerateDevices()).filter((e=>\\\"audioinput\\\"===e.kind))})),getSpeakers:()=>S(void 0,void 0,void 0,(function*(){return(yield navigator.mediaDevices.enumerateDevices()).filter((e=>\\\"audiooutput\\\"===e.kind))}))};class qe extends _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.EventEmitter{constructor(e,t,r,i,n){super(),this._tag=e,this._userId=t,this._kind=r,this._isLocalTrack=i,this._roomId=n,this._localMuted=!1,this._remoteMuted=!1,this._streamId=[this._userId||this._roomId,this._tag].join(\\\"_\\\"),this._id=[this._streamId,this.isAudioTrack()?0:1].join(\\\"_\\\")}getStreamId(){return this._streamId}getTrackId(){return this._id}getUserId(){return this._userId}__innerGetMediaStreamTrack(){return this._msTrack}getTag(){return this._tag}isLocalTrack(){return this._isLocalTrack}isVideoTrack(){return\\\"video\\\"===this._kind}isAudioTrack(){return\\\"audio\\\"===this._kind}isReady(){var e;return\\\"live\\\"===(null===(e=this._msTrack)||void 0===e?void 0:e.readyState)}__innerSetMediaStreamTrack(e){this._msTrack=e,this._setLocalMuted(this._localMuted);const t=this._msStream=this._msStream||new MediaStream,r=t.getTracks()[0];r&&t.removeTrack(r),e?t.addTrack(e):this._element&&(this._element.pause(),this._element.srcObject=null)}_setLocalMuted(e){this._msTrack&&(this._msTrack.enabled=!e),this._localMuted=e}mute(){C.info(`set ${this._id} enabled: false`),this._setLocalMuted(!0)}unmute(){C.info(`set ${this._id} enabled: true`),this._setLocalMuted(!1)}isLocalMuted(){return this._localMuted}isMCUTrack(){return Boolean(this._roomId)}isOwnerMuted(){return this._remoteMuted}play(e,t){return S(this,void 0,void 0,(function*(){if(!this._msTrack)return C.warn(`the track is not ready to play -> id: ${this._id}`),{code:T.TRACK_NOT_READY};if(\\\"ended\\\"===this._msTrack.readyState&&C.warn(`the track's readyState is 'ended' -> id: ${this._id}`),null==t?void 0:t.volume){if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(null==t?void 0:t.volume))return C.error(`${null==t?void 0:t.volume} is not a number, the valid range of options.volume is 0-100`),{code:T.PARAMS_ERROR};(null==t?void 0:t.volume)<0&&(t.volume=0,C.warn(\\\"the valid range of options.volume is 0-100, the value of volume has been set 0\\\")),(null==t?void 0:t.volume)>100&&(t.volume=100,C.warn(\\\"the valid range of options.volume is 0-100, the value of volume has been set 100\\\"))}if(null==t?void 0:t.audioDeviceId){if(!(yield Ye.getSpeakers()).map((e=>e.deviceId)).includes(t.audioDeviceId))return C.error(`the options.audioDeviceId is invalid --\\\\x3e ${t.audioDeviceId}`),{code:T.PARAMS_ERROR}}const i=this.isVideoTrack();if(i&&(!e||!(e instanceof HTMLVideoElement)))return C.error(`the video track need an <video> to play -> id: ${this._id}`),{code:T.VIDEO_TRACK_MISS_MEDIA_ELEMENT};this._element=i?e:this._element||new Audio,this._localMuted&&this._setLocalMuted(!1),this._element.srcObject&&this._element.srcObject===this._msStream||this._element.pause(),this._element.onloadstart=e=>{var t;C.debug(`HTMLMediaElement onloadstart -> id: ${null===(t=e.target)||void 0===t?void 0:t.id}, trackId: ${this._id}`)},this._element.ondurationchange=e=>{var t;C.debug(`HTMLMediaElement ondurationchange -> id: ${null===(t=e.target)||void 0===t?void 0:t.id}, trackId: ${this._id}`)},this._element.onloadedmetadata=e=>{var t;C.debug(`HTMLMediaElement onloadedmetadata -> id: ${null===(t=e.target)||void 0===t?void 0:t.id}, trackId: ${this._id}`)},this._element.onloadeddata=e=>{var t;C.debug(`HTMLMediaElement onloadeddata -> id: ${null===(t=e.target)||void 0===t?void 0:t.id}, trackId: ${this._id}`)},this._element.onabort=e=>{var t;C.info(`HTMLMediaElement onabort -> id: ${null===(t=e.target)||void 0===t?void 0:t.id}, trackId: ${this._id}`)},this._element.oncanplay=e=>{var t;C.info(`HTMLMediaElement oncanplay -> id: ${null===(t=e.target)||void 0===t?void 0:t.id}, trackId: ${this._id}`)},this._element.onvolumechange=e=>{var t;const r=Math.floor(100*(null===(t=e.target)||void 0===t?void 0:t.volume));C.info(`HTMLMediaElement onvolumechange -> volume: ${r}, trackId: ${this._id}`)},this._element.srcObject=this._msStream,this._element.autoplay=!0,i&&(this._element.playsInline=!0,this._element.x5PlaysInline=!0,this._element.webkitPlaysInline=!0),i||!(null==t?void 0:t.volume)&&0!==(null==t?void 0:t.volume)||(this._element.volume=(null==t?void 0:t.volume)/100);try{(null==t?void 0:t.audioDeviceId)&&!i?yield this._element.setSinkId(t.audioDeviceId):this._element.play()}catch(e){return\\\"No permission to use requested device\\\"===e.message?(C.error(`setSinkId failed -> ${e.message}`),{code:T.NO_PERMISSION_TO_USE_REQUESTED_DEVICE}):(C.error(e),{code:T.TRACK_PLAY_ERROR})}return{code:T.SUCCESS}}))}__innerDestroy(){this.__innerSetMediaStreamTrack(void 0)}__releaseMediaElement(){this._element&&(this._element.remove(),this._element.srcObject=null)}}class ze extends qe{constructor(e,t,r,i){super(e,t,r,!0),this._isPublished=!1,this.__innerSetMediaStreamTrack(i),i.onended=()=>{i.onended=null,this.emit(ze.EVENT_LOCAL_TRACK_END,this),this.removeAll(ze.EVENT_LOCAL_TRACK_END)}}_setLocalMuted(e){const t=this._localMuted!==e;super._setLocalMuted(e),this._remoteMuted=this._localMuted,t&&this.emit(ze.__INNER_EVENT_MUTED_CHANGE__,this)}__innerSetPublished(e){this._isPublished=e}isPublished(){return this._isPublished}destroy(){var e;C.info(`track is destroyed -> trackId: ${this.getTrackId()}`),null===(e=this._msTrack)||void 0===e||e.stop(),super.__innerDestroy(),this.isAudioTrack()&&super.__releaseMediaElement(),this.emit(ze.__INNER_EVENT_DESTROY__,this)}setBitrate(e=0,t=0,i=0){!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(e)||!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(t)||!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(i)||e<=0||t<=0||e<t?C.error(\\\"setBitrate params error ->\\\"):this._bitrateInfo={max:e,min:t,start:i}}getBitrate(){var e,t;const{min:r,max:i}=this._msTrack?_t(this._msTrack):{min:0,max:0};return{min:(null===(e=this._bitrateInfo)||void 0===e?void 0:e.min)||r,max:(null===(t=this._bitrateInfo)||void 0===t?void 0:t.max)||i}}}ze.EVENT_LOCAL_TRACK_END=\\\"local-track-end\\\",ze.__INNER_EVENT_MUTED_CHANGE__=\\\"inner-muted-change\\\",ze.__INNER_EVENT_DESTROY__=\\\"inner-destroy\\\";class Qe extends ze{constructor(e,t,r){super(e,t,\\\"audio\\\",r)}setBitrate(e,t,r){C.warn(\\\"`setBitrate` invalid for audio track\\\")}getBitrate(){return{start:32,max:32,min:32}}}class Xe extends ze{constructor(e,t,r,i=!1){super(e,t,\\\"video\\\",r),this._isTiny=i}__isTiny(){return this._isTiny}getStreamId(){const e=super.getStreamId();return this._isTiny?`${e}_tiny`:e}getTrackId(){const e=super.getTrackId();return this._isTiny?`${e}_tiny`:e}}class Ze extends ze{constructor(e,t,r,i,n){super(e,t,r,i),this._resource=n,Ze.__innerSetMapping(this.getTrackId(),n)}static __innerSetMapping(e,t){const r=this._mapping.get(t)||[];r.push(e),this._mapping.set(t,r)}static __innerRemoveMapping(e,t){var r,i;const n=null===(r=this._mapping.get(t))||void 0===r?void 0:r.filter((t=>t!==e));n&&n.length>0?this._mapping.set(t,n):(this._mapping.delete(t),t.pause(),t.src=\\\"\\\",null===(i=t.parentNode)||void 0===i||i.removeChild(t))}destroy(){this.isAudioTrack()&&this.mute(),Ze.__innerRemoveMapping(this.getTrackId(),this._resource),super.destroy()}}Ze._mapping=new Map;class et extends Ze{constructor(e,t,r,i){super(e,t,\\\"video\\\",r,i)}}class tt extends Ze{constructor(e,t,r,i){super(e,t,\\\"audio\\\",r,i)}_setLocalMuted(e){this._resource&&(this._resource.muted=e),super._setLocalMuted(e)}play(){return this._setLocalMuted(!1),Promise.resolve({code:T.SUCCESS})}}class rt extends Qe{}class it extends Xe{}class nt extends Xe{}class st extends qe{constructor(e,t,r,i){super(e,t,r,!1,i),this._isSubscribed=!1}__innerSetRemoteMuted(e){this._remoteMuted=e}__innerSetSubscribed(e){this._isSubscribed=e}isSubscribed(){return this._isSubscribed}}class ot extends st{constructor(e,t,r){super(e,t,\\\"audio\\\",r)}}class at extends st{constructor(e,t,r){super(e,t,\\\"video\\\",r)}}const ct=(e,t)=>({name:e,content:JSON.stringify({uris:t,ignore:!0})}),dt=e=>JSON.stringify(e),ut=e=>/^[a-zA-Z\\\\d-=]+$/g.test(e),lt=\\\"http:\\\"!==location.protocol||[\\\"localhost\\\",\\\"127.0.0.1\\\"].includes(location.hostname),ht=e=>{if(void 0===e)return 0;if((0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(e))return e;const t=e;return t.exact||t.ideal||t.max||0},pt=e=>{const t=e.getConstraints();return{width:ht(t.width),height:ht(t.height),frameRate:ht(t.frameRate)}},_t=e=>{const{width:t,height:r,frameRate:i}=pt(e),n=Ge(t,r),s=We(i);return{min:n.minBitrate*s,max:n.maxBitrate*s}},mt=e=>[e.msid,e.mediaType].join(\\\"_\\\"),ft=e=>{const t=e.split(\\\"_\\\");return{mediaType:parseInt(t.pop()),tag:t.pop(),userId:t.join(\\\"_\\\")}},vt=(e,t)=>[e,t].join(\\\"_\\\"),Rt=e=>e.map((e=>Object.assign({},e))),gt=(e,t,r=!1)=>{e=e.slice();const i=[],n=[],s=[];return t.forEach((t=>{const n=mt(t);let o=e.findIndex((e=>mt(e)===n));if(r&&(o=e.findIndex((e=>e.uri===t.uri))),-1===o)return void i.push(t);const a=e[o];a.uri!==t.uri?i.push(t):a.state!==t.state&&s.push(t),e.splice(o,1)})),n.push(...e),{publishedList:i,unpublishedList:n,modifiedList:s}},St=()=>{let e=\\\"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\\\".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return(\\\"x\\\"===e?t:3&t|8).toString(16)}));return e=e.replace(/-/g,\\\"\\\")+\\\"0\\\",e=parseInt(e,16),e=(e=>{const t=\\\"0123456789abcdefghigklmnopqrstuvwxyzABCDEFGHIGKLMNOPQRSTUVWXYZ+/\\\".split(\\\"\\\"),r=t.length+1;let i=+e;const n=[];do{const e=i%r;i=(i-e)/r,n.unshift(t[e])}while(i);return n.join(\\\"\\\")})(e),e.length>22&&(e=e.slice(0,22)),e},Ct=e=>{const[t,r]=e.split(\\\"_\\\").map((e=>parseInt(e.replace(/[^\\\\d]/g,\\\"\\\"))));return{width:t,height:r}},Tt=e=>!!He[e],It=e=>!!Be[e],Et=e=>parseInt(e.replace(\\\"FPS_\\\",\\\"\\\")),yt=(()=>{const{browser:e,version:t,supportsUnifiedPlan:r}=Ve.browserDetails;return{browser:e,version:t,supportsUnifiedPlan:!1!==r}})();function kt(){return\\\"captureStream\\\"in HTMLMediaElement.prototype||\\\"mozCaptureStream\\\"in HTMLMediaElement.prototype}function bt(){return\\\"mediaDevices\\\"in navigator&&\\\"getDisplayMedia\\\"in navigator.mediaDevices}const Pt=e=>\\\"[object Null]\\\"===Object.prototype.toString.call(e),Ot=e=>1===e.type,Lt=e=>{const t={},r=Object.keys(e.users);return r.length&&r.forEach((r=>{const i=[],n=e.users[r];if(n.uris)try{i.push(...JSON.parse(n.uris))}catch(e){C.warn(`invalid user data -> userId: ${r}, userData: ${n}`)}t[r]=i})),t};var Nt,Dt;!function(e){e.PUBLISH=\\\"RCRTC:PublishResource\\\",e.UNPUBLISH=\\\"RCRTC:UnpublishResource\\\",e.MODIFY=\\\"RCRTC:ModifyResource\\\",e.TOTAL_CONTENT_RESOURCE=\\\"RCRTC:TotalContentResources\\\",e.STATE=\\\"RCRTC:state\\\",e.ROOM_NOTIFY=\\\"RCRTC:RoomNtf\\\",e.USER_NOTIFY=\\\"RCRTC:UserNtf\\\",e.KICK=\\\"RCRTC:kick\\\",e.PK_INVITE=\\\"RCRTC:invite\\\",e.PK_INVITE_TIMEOUT=\\\"RCRTC:inviteTimeout\\\",e.PK_CANCEL_INVITE=\\\"RCRTC:cancelInvite\\\",e.PK_INVITE_ANSWER=\\\"RCRTC:answerInvite\\\",e.PK_END=\\\"RCRTC:endInvite\\\",e.OTHER_ROOM_OFFLINE=\\\"RCRTC:otherRoomOffline\\\"}(Nt||(Nt={})),function(e){e.SUCCESS=\\\"Success\\\",e.FAIL=\\\"Fail\\\"}(Dt||(Dt={}));class At{constructor(e,t,r,i=1e4){this._roomId=e,this._roomMode=t,this._context=r,this._gap=i,this._latestTimestamp=Date.now(),this._timer=null}start(){return S(this,void 0,void 0,(function*(){this._timer||(this._timer=setInterval(this._loop.bind(this),this._gap))}))}_loop(){var e,t,r;return S(this,void 0,void 0,(function*(){const n=yield new Promise((e=>{this._context.rtcPing(this._roomId,this._roomMode).then(e).catch((t=>{C.error(`rtcping receive unknown error -> ${t}`),e(_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.UNKNOWN)})),setTimeout(e,1e4,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.TIMEOUT)})),s=Date.now();if(n===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS)return this._latestTimestamp=s,void(null===(e=this.onPingResult)||void 0===e||e.call(this,Dt.SUCCESS));null===(t=this.onPingResult)||void 0===t||t.call(this,Dt.FAIL),C.warn(`rtcping failed -> code: ${n}`),(40003===n||s-this._latestTimestamp>6e4)&&(this.stop(),null===(r=this.onFailed)||void 0===r||r.call(this,40003===n))}))}stop(){this._timer&&(clearInterval(this._timer),this._timer=null)}}var Mt;!function(e){e[e.NORMAL=1]=\\\"NORMAL\\\",e[e.TINY=2]=\\\"TINY\\\"}(Mt||(Mt={}));const xt=(e,t)=>Math.round(8*t/e),Ut=(e,t=2)=>{const r=10**t;return Math.round(e*r)/r},wt=(e,t=2)=>{e>1&&(e/=32767);const r=10**t;return Math.ceil(e*r)},$t=(e,t,r,i)=>{if(0===t)return 0;if(!r||!i)return Ut(e/t,3);const n=t-i;if(0===n)return 0;const s=e-r;return s<0||n<0?0:Ut(s/n,3)},jt=e=>{const{jitter:t,rtt:r,packetsLostRate:i}=e;return!Pt(t)||!Pt(r)||0!==i};class Vt{constructor(e,t){this._rtcPeerConn=e,this._sdpSemantics=t,this._latestPacketsSent={},this._latestBytesSent={},this._latestBytesRecv={},this._latestPacketsRecv={}}updateBytesSent(e,t,r){let i,n;if(this._latestBytesSent[e]&&t<this._latestBytesSent[e].bytesSent&&this.clearLatestpacketsSent([e]),this._latestBytesSent[e]){const{bytesSent:s,timestamp:o}=this._latestBytesSent[e];i=t-s,n=r-o,this._latestBytesSent[e]={bytesSent:t,timestamp:r}}else i=t,n=1e3,this._latestBytesSent[e]={bytesSent:t,timestamp:r};return xt(n,i)}updateBytesRecv(e,t,r){let i,n;if(this._latestBytesRecv[e]&&t<this._latestBytesRecv[e].bytesRecv&&this.clearLatestPacketsRecv([e]),this._latestBytesRecv[e]){const{bytesRecv:s,timestamp:o}=this._latestBytesRecv[e];i=t-s,n=r-o,this._latestBytesRecv[e]={bytesRecv:t,timestamp:r}}else i=t,n=1e3,this._latestBytesRecv[e]={bytesRecv:t,timestamp:r};return xt(n,i)}updateSenderPacketsLost(e,t,r){let i;if(Object.prototype.hasOwnProperty.call(this._latestPacketsSent[e],\\\"packetsSent\\\")){const{packetsLost:n,packetsSent:s}=this._latestPacketsSent[e];i=$t(t,r,n,s),this._latestPacketsSent[e].packetsLost=t,this._latestPacketsSent[e].packetsSent=n===t?s:r}else i=$t(t,r),this._latestPacketsSent[e].packetsLost=t,this._latestPacketsSent[e].packetsSent=r;return i}updateReceiverPacketsLost(e,t,r){let i;if(this._latestPacketsRecv[e]){const{packetsLost:n,packetsRecv:s}=this._latestPacketsRecv[e];i=$t(t,r+t,n,s+n)}else i=$t(t,r);return this._latestPacketsRecv[e]={packetsLost:t,packetsRecv:r},i}clearLatestpacketsSent(e){e.forEach((e=>{if(parseInt(e.split(\\\"_\\\").pop())===Fe.VIDEO_ONLY){const t=`${e}_tiny`;delete this._latestPacketsSent[t],delete this._latestBytesSent[t]}delete this._latestPacketsSent[e],delete this._latestBytesSent[e]}))}clearLatestPacketsRecv(e){e.forEach((e=>{delete this._latestPacketsRecv[e],delete this._latestBytesRecv[e]}))}parseRTCStatsReport(e){const t=e.keys(),r={};let i=t.next();for(;!i.done;){const n=i.value,s=e.get(n);/^RTCCodec_/.test(n)||(r[n]=s),i=t.next()}return r}formatRCRTCStateReport(e){return{senders:[],receivers:[]}}getAudioLevelList(e){return[]}getResourceIdByParseSdp(e){var t,r;const i=e.ssrc,n=e.kind||e.mediaType,s=null===(t=this._rtcPeerConn.currentLocalDescription)||void 0===t?void 0:t.sdp,o=null===(r=this._rtcPeerConn.currentRemoteDescription)||void 0===r?void 0:r.sdp;let a;a=\\\"unified-plan\\\"===this._sdpSemantics?new RegExp(\\\"a=msid:(.*?) \\\"):new RegExp(`a=ssrc:${i} msid:(.*?) `);const c=null==s?void 0:s.split(\\\"\\\\r\\\\nm=\\\"),d=null==c?void 0:c.filter((e=>e.includes(`a=ssrc:${i}`)))[0],u=null==d?void 0:d.match(a);let l=u?u[1]:\\\"\\\";if(l)return`${l}_${\\\"video\\\"===n?1:0}`;const h=null==o?void 0:o.split(\\\"\\\\r\\\\nm=\\\"),p=null==h?void 0:h.filter((e=>e.includes(`a=ssrc:${i}`)))[0],_=null==p?void 0:p.match(a);return l=_?_[1]:\\\"\\\",`${l}_${\\\"video\\\"===n?1:0}`}isValidSender(e){var t;const r=null===(t=this._rtcPeerConn.currentLocalDescription)||void 0===t?void 0:t.sdp,{ssrc:i}=e;return!(null==r?void 0:r.split(\\\"\\\\r\\\\nm=\\\").some((e=>e.includes(i)&&e.includes(\\\"a=inactive\\\"))))}isValidReceiver(e){var t;const r=null===(t=this._rtcPeerConn.currentRemoteDescription)||void 0===t?void 0:t.sdp,{ssrc:i}=e;return!(null==r?void 0:r.split(\\\"\\\\r\\\\nm=\\\").some((e=>e.includes(i)&&e.includes(\\\"a=inactive\\\"))))}}class Bt extends Vt{formatRCRTCStateReport(e){const t={senders:[],receivers:[]},r=Math.floor(e.RTCPeerConnection.timestamp);t.timestamp=r;const i=Object.keys(e);let n=0,s=0;i.filter((e=>/^RTCOutboundRTP(Video|Audio)Stream_/.test(e))).forEach((i=>{const o=e[i];if(\\\"unified-plan\\\"===this._sdpSemantics&&!this.isValidSender(o))return;const{id:a,kind:c,transportId:d,mediaSourceId:u,remoteId:l,packetsSent:h,bytesSent:p,trackId:_,encoderImplementation:m,pliCount:f,nackCount:v,firCount:R}=o;if(!_)return;let{framesPerSecond:g,frameWidth:S,frameHeight:C}=o;\\\"video\\\"!==c||S||C||g||(S=e[_].frameWidth,C=e[_].frameHeight,g=u?e[u].framesPerSecond:null);const T=e[l];let I=null,E=null,y=0;T&&(I=T.jitter,E=T.roundTripTime,y=T.packetsLost),n+=y;const k=this.getResourceIdByParseSdp(o),b=u?e[u].audioLevel:e[_].audioLevel;let P=null;!this._latestPacketsSent[k]&&(this._latestPacketsSent[k]={}),T?P=this.updateSenderPacketsLost(k,y,h):this._latestPacketsSent[k].crtPacketsSent=h;let O=this.updateBytesSent(k,p,r);O<0&&(O=0),s+=O,t.senders.push({id:a,trackId:k,kind:c,packetsLostRate:P,remoteResource:!1,audioLevel:b||0===b?wt(b):null,frameWidth:S,frameHeight:C,frameRate:g,bitrate:O,jitter:I?Math.round(1e3*I):I,rtt:E,encoderImplementation:m,pliCount:f,nackCount:v,googFirsSent:-1,samplingRate:-1,googRenderDelayMs:-1,trackState:-1})}));i.filter((e=>/RTCRemoteInboundRtp(Video|Audio)Stream_/.test(e))).forEach((r=>{const{localId:i,jitter:n,roundTripTime:s,packetsLost:o}=e[r],a=t.senders.filter((e=>e.id===i))[0];if(a&&!jt(a)){const t=this.getResourceIdByParseSdp(e[a.id]);a.jitter=Math.round(1e3*n),a.rtt=s;const r=this._latestPacketsSent[t].crtPacketsSent;a.packetsLostRate=this.updateSenderPacketsLost(t,o,r)}}));let o=0;i.filter((e=>/^RTCInboundRTP(Video|Audio)Stream_/.test(e))).forEach((i=>{const s=e[i];if(\\\"unified-plan\\\"===this._sdpSemantics&&!this.isValidReceiver(s))return;const{trackId:a,packetsLost:c,packetsReceived:d,jitter:u,bytesReceived:l,framesPerSecond:h,kind:p,codecImplementationName:_,nackCount:m,pliCount:f}=s;if(!a)return;let{frameWidth:v,frameHeight:R,audioLevel:g}=s;\\\"video\\\"===p?v||R||(v=e[a].frameWidth,R=e[a].frameHeight):g||(g=e[a].audioLevel),n+=c;const S=this.getResourceIdByParseSdp(s),C=this.updateReceiverPacketsLost(S,c,d);let T=this.updateBytesRecv(S,l,r);T<0&&(T=0),o+=T,t.receivers.push({trackId:S,kind:p,packetsLostRate:C,remoteResource:!0,audioLevel:g||0===g?wt(g):null,frameWidth:v,frameHeight:R,frameRate:h,bitrate:T,jitter:u?Math.round(1e3*u):0,codecImplementationName:_,nackCount:m,pliCount:f,rtt:null,samplingRate:-1,googFirsReceived:-1,googRenderDelayMs:-1,trackState:-1})}));const a=i.filter((e=>/^RTCTransport_/.test(e)))[0];if(a){const r=e[a],{selectedCandidatePairId:i}=r;if(i){const r=e[i],{availableOutgoingBitrate:a,availableIncomingBitrate:c,currentRoundTripTime:d,localCandidateId:u,remoteCandidateId:l}=r,h=e[u],{ip:p,port:_,networkType:m}=h,f=e[l],{ip:v,port:R,protocol:g}=f;t.iceCandidatePair={IP:p,port:_,networkType:m,remoteIP:v,remotePort:R,protocol:g,bitrateRecv:o,bitrateSend:s,rtt:1e3*d,availableOutgoingBitrate:a,availableIncomingBitrate:c,totalPacketsLost:n},t.receivers.forEach((e=>{e.rtt=d}))}}return t}getAudioLevelList(e){const t=[],r=Object.keys(e);r.filter((e=>/^RTCOutboundRTPAudioStream_/.test(e))).forEach((r=>{var i;const n=e[r];if(\\\"unified-plan\\\"===this._sdpSemantics&&!this.isValidSender(n))return;const{mediaSourceId:s,trackId:o}=n,a=this.getResourceIdByParseSdp(n),c=s&&e[s]?e[s].audioLevel:(null===(i=e[o])||void 0===i?void 0:i.audioLevel)||null;t.push({trackId:a,audioLevel:c||0===c?wt(c):null})}));return r.filter((e=>/^RTCInboundRTPAudioStream_/.test(e))).forEach((r=>{const i=e[r];if(\\\"unified-plan\\\"===this._sdpSemantics&&!this.isValidReceiver(i))return;const{trackId:n}=i,s=i.audioLevel||e[n].audioLevel,o=this.getResourceIdByParseSdp(i);t.push({trackId:o,audioLevel:s||0===s?wt(s):null})})),t}}class Ht extends Vt{formatRCRTCStateReport(e){const t=+new Date,r={senders:[],receivers:[],timestamp:t};let i=0,n=0,s=0;for(const o in e){const a=e[o],c=a.type;if(\\\"outbound-rtp\\\"===c){if(\\\"unified-plan\\\"===this._sdpSemantics&&!this.isValidSender(a))continue;const{id:s,kind:o,bytesSent:c,packetsSent:d,bitrateMean:u,framerateMean:l,nackCount:h,pliCount:p,remoteId:_}=a,{jitter:m,roundTripTime:f,packetsLost:v}=_?e[_]:{jitter:null,roundTripTime:null,packetsLost:0},R=this.getResourceIdByParseSdp(a);i+=v;let g=null;!this._latestPacketsSent[R]&&(this._latestPacketsSent[R]={}),_?g=this.updateSenderPacketsLost(R,v,d):this._latestPacketsSent[R].crtPacketsSent=d;let S=0;\\\"video\\\"===o?u&&(S=Math.floor(u/1e3)):S=this.updateBytesSent(R,c,t),S<0&&(S=0),n+=S,r.senders.push({trackId:R,kind:o,packetsLostRate:g,remoteResource:!1,audioLevel:null,frameWidth:null,frameHeight:null,frameRate:Math.floor(l),bitrate:S,jitter:m?Math.round(1e3*m):null,rtt:f,encoderImplementation:null,pliCount:p,nackCount:h,googFirsSent:-1,samplingRate:-1,googRenderDelayMs:-1,trackState:-1})}if(\\\"remote-inbound-rtp\\\"===c){const{localId:t}=a,i=this.getResourceIdByParseSdp(e[t]),n=r.senders.filter((e=>e.trackId===i))[0];n&&jt(n)&&(n.jitter=Math.round(1e3*a.jitter),n.rtt=a.rtt,n.packetsLostRate=this.updateSenderPacketsLost(i,a.packetsLost,this._latestPacketsSent[i].crtPacketsSent))}if(\\\"inbound-rtp\\\"===c){if(\\\"unified-plan\\\"===this._sdpSemantics&&!this.isValidReceiver(a))continue;const{id:e,packetsLost:n,bytesReceived:o,packetsReceived:c,jitter:d,framerateMean:u,kind:l,bitrateMean:h,nackCount:p,pliCount:_}=a,m=this.getResourceIdByParseSdp(a);i+=n;const f=this.updateReceiverPacketsLost(m,n,c);let v=0;\\\"video\\\"===l?h&&(v=Math.floor(h/1e3)):v=this.updateBytesRecv(m,o,t),v<0&&(v=0),s+=v,r.receivers.push({trackId:m,kind:l,packetsLostRate:f,remoteResource:!0,audioLevel:null,frameWidth:null,frameHeight:null,frameRate:Math.floor(u),bitrate:v,jitter:d?Math.round(1e3*d):null,codecImplementationName:null,nackCount:p,pliCount:_,rtt:null,samplingRate:-1,googFirsReceived:-1,googRenderDelayMs:-1,trackState:-1})}if(\\\"candidate-pair\\\"===c&&\\\"succeeded\\\"===a.state){const t=e[a.localCandidateId],{address:o,port:c}=t,d=e[a.remoteCandidateId],{address:u,port:l,protocol:h}=d;r.iceCandidatePair={IP:o,port:c,networkType:null,remoteIP:u,remotePort:l,protocol:h,bitrateRecv:s,bitrateSend:n,rtt:null,availableOutgoingBitrate:null,availableIncomingBitrate:null,totalPacketsLost:i}}}return r.iceCandidatePair&&(r.iceCandidatePair.bitrateSend=n),r.iceCandidatePair&&(r.iceCandidatePair.bitrateRecv=s),r}getAudioLevelList(e){const t=[];for(const r in e){const i=e[r],n=i.type;if(\\\"outbound-rtp\\\"===n){if(\\\"unified-plan\\\"===this._sdpSemantics&&!this.isValidSender(i))continue;const{kind:e}=i;if(\\\"video\\\"===e)continue;const r=this.getResourceIdByParseSdp(i);t.push({trackId:r,audioLevel:null})}if(\\\"inbound-rtp\\\"===n){if(\\\"unified-plan\\\"===this._sdpSemantics&&!this.isValidReceiver(i))continue;const{kind:e}=i;if(\\\"video\\\"===e)continue;const r=this.getResourceIdByParseSdp(i);t.push({trackId:r,audioLevel:null})}}return t}}class Ft extends Vt{formatRCRTCStateReport(e){const t={senders:[],receivers:[]},r=Math.floor(e.RTCPeerConnection.timestamp);t.timestamp=r;const i=Object.keys(e);let n=0,s=0;i.filter((e=>/^RTCOutboundRTP(Video|Audio)Stream_/.test(e))).forEach((i=>{const n=e[i];if(\\\"unified-plan\\\"===this._sdpSemantics&&!this.isValidSender(n))return;const o=this.getResourceIdByParseSdp(n),{mediaType:a,transportId:c,remoteId:d,packetsSent:u,bytesSent:l,trackId:h,encoderImplementation:p,pliCount:_,nackCount:m,firCount:f}=n;if(!h)return;const{audioLevel:v,frameHeight:R,frameWidth:g}=e[h];let S=this.updateBytesSent(o,l,r);S<0&&(S=0),s+=S,t.senders.push({trackId:o,kind:a,packetsLostRate:null,remoteResource:!1,audioLevel:v||0===v?wt(v):null,frameWidth:g,frameHeight:R,frameRate:null,bitrate:S,jitter:null,rtt:null,encoderImplementation:p,pliCount:_,nackCount:m,googFirsSent:-1,samplingRate:-1,googRenderDelayMs:-1,trackState:-1})}));let o=0;i.filter((e=>/^RTCInboundRTP(Video|Audio)Stream_/.test(e))).forEach((i=>{const s=e[i];if(\\\"unified-plan\\\"===this._sdpSemantics&&!this.isValidReceiver(s))return;const{trackId:a,packetsLost:c,packetsReceived:d,jitter:u,bytesReceived:l,mediaType:h,nackCount:p,pliCount:_}=s,m=this.getResourceIdByParseSdp(s);if(!a)return;const{frameHeight:f,frameWidth:v,audioLevel:R}=e[a];n+=c;const g=this.updateReceiverPacketsLost(m,c,d);let S=this.updateBytesRecv(m,l,r);S<0&&(S=0),o+=S,t.receivers.push({trackId:m,kind:h,packetsLostRate:g,remoteResource:!0,audioLevel:R||0===R?wt(R):null,frameWidth:v,frameHeight:f,frameRate:null,bitrate:S,jitter:u,codecImplementationName:null,nackCount:p,pliCount:_,rtt:null,samplingRate:-1,googFirsReceived:-1,googRenderDelayMs:-1,trackState:-1})}));const a=i.filter((e=>/^RTCTransport_/.test(e)))[0];if(a){const r=e[a],{selectedCandidatePairId:i}=r;if(i){const r=e[i],{availableOutgoingBitrate:a,availableIncomingBitrate:c,currentRoundTripTime:d,localCandidateId:u,remoteCandidateId:l}=r,h=e[u],{address:p,port:_}=h,m=e[l],{address:f,port:v,protocol:R}=m;t.iceCandidatePair={IP:p||null,port:_,networkType:null,remoteIP:f,remotePort:v,protocol:R,bitrateRecv:o,bitrateSend:s,rtt:1e3*d,availableOutgoingBitrate:a,availableIncomingBitrate:c,totalPacketsLost:n},t.receivers.forEach((e=>{e.rtt=d}))}}return t}getAudioLevelList(e){const t=[],r=Object.keys(e);r.filter((e=>/^RTCOutboundRTP(Video|Audio)Stream_/.test(e))).forEach((r=>{const i=e[r];if(\\\"unified-plan\\\"===this._sdpSemantics&&!this.isValidSender(i))return;const{trackId:n,mediaType:s}=i;if(\\\"video\\\"===s)return;const o=this.getResourceIdByParseSdp(i),a=e[n];t.push({trackId:o,audioLevel:a||0===a?wt(a):null})}));return r.filter((e=>/^RTCInboundRTP(Video|Audio)Stream_/.test(e))).forEach((r=>{const i=e[r];if(\\\"unified-plan\\\"===this._sdpSemantics&&!this.isValidReceiver(i))return;const{trackId:n,mediaType:s}=i;if(!n||\\\"video\\\"===s)return;const{audioLevel:o}=e[n],a=this.getResourceIdByParseSdp(i);t.push({trackId:a,audioLevel:o||0===o?wt(o):null})})),t}}class Kt{constructor(e){this._peer=e,this._outboundStreams={}}static setSdpSemantics(e){const{browser:t,version:r,supportsUnifiedPlan:i}=yt;i?/chrome/i.test(t)?this._sdpSemantics=r>92?\\\"unified-plan\\\":r<72?\\\"plan-b\\\":e:/firefox/i.test(t)?this._sdpSemantics=\\\"unified-plan\\\":/safari/i.test(t)?this._sdpSemantics=r<12?\\\"plan-b\\\":\\\"unified-plan\\\":this._sdpSemantics=\\\"unified-plan\\\":this._sdpSemantics=\\\"plan-b\\\"}static getSdpSemantics(){return Kt._sdpSemantics}getOutboundVideoInfo(){const e=[];for(const t in this._outboundStreams){const r=this._outboundStreams[t].getVideoTracks()[0];if(!r)continue;const i=/_tiny$/.test(t),{width:n,height:s}=pt(r);e.push({trackId:r.id,simulcast:i?Mt.TINY:Mt.NORMAL,resolution:`${n}x${s}`})}return e}setRemoteAnswer(e){return S(this,void 0,void 0,(function*(){e=e.replace(/\\\\s+\\\\r\\\\n/g,\\\"\\\\r\\\\n\\\");try{yield this._peer.setRemoteDescription({type:\\\"answer\\\",sdp:e})}catch(e){return C.error(e),T.SET_REMOTE_DESCRIPTION_FAILED}return T.SUCCESS}))}getStatParsr(e,t){return/chrome/i.test(yt.browser)?new Bt(e,t):/Firefox/i.test(yt.browser)?new Ht(e,t):/Safari/i.test(yt.browser)?new Ft(e,t):null}}class Gt extends Kt{constructor(){super(...arguments),this.senders={},this._localTracks=[]}addLocalTrack(e){this._localTracks.includes(e)||this._localTracks.push(e);const t=e.getStreamId(),r=e.__innerGetMediaStreamTrack(),i=this._outboundStreams[t]||(this._outboundStreams[t]=new MediaStream);i.getTracks().forEach((e=>{e.kind===r.kind&&i.removeTrack(e)})),i.addTrack(r);const n=e.getTrackId(),s=this.senders[n];s?s.replaceTrack(r):this.senders[n]=this._peer.addTrack(r,i)}removeLocalTrack(e){const t=this._localTracks.findIndex((t=>t===e));t>=0&&this._localTracks.splice(t,1);const r=e.getTrackId(),i=this.senders[r];i&&(i.replaceTrack(null),this._peer.removeTrack(i),delete this.senders[r])}updateSubRemoteTracks(e){}updateRecvTransceiverMap(e,t){}setBitrate(e,t,r){this._maxBitrate=e,this._minBitrate=t,this._startBitrate=r||.7*e}createOffer(e){return S(this,void 0,void 0,(function*(){const t=yield this._peer.createOffer({iceRestart:e,offerToReceiveAudio:!0,offerToReceiveVideo:!0});for(const e in this._outboundStreams){const r=this._outboundStreams[e].id;t.sdp=t.sdp.replace(new RegExp(r,\\\"g\\\"),e)}return yield this._peer.setLocalDescription(t),{type:\\\"offer\\\",semantics:\\\"plan-b\\\",sdp:t.sdp}}))}setRemoteAnswer(e){let t=0,r=0;this._localTracks.forEach((e=>{const{min:i,max:n}=e.getBitrate();r+=i,t+=n})),t=this._maxBitrate&&this._maxBitrate>0?Math.min(t,this._maxBitrate):t,r=this._minBitrate&&this._minBitrate>0?Math.max(r,this._minBitrate):r;const i=this._startBitrate||Math.round(.7*t),n=`b=AS:${t}`;e=e.replace(/[\\\\r\\\\n]+m=video[^\\\\r\\\\n]+/,(e=>`${e}\\\\r\\\\n${n}`));const s=[`;x-google-min-bitrate=${r}`,`;x-google-max-bitrate=${t}`,`;x-google-start-bitrate=${i}`].join(\\\"\\\");return e=e.replace(/[\\\\r\\\\n]+[^\\\\r\\\\n]+profile-level-id[^\\\\r\\\\n]+/g,(e=>e+s)),super.setRemoteAnswer(e)}}class Jt extends Kt{constructor(){super(...arguments),this._sendTransceiver={},this._localTracks={},this._recvAudio=[],this._recvVideo=[],this._recvTransceiver={},this._subedTracks=[]}setBitrate(e,t,r){C.warn(\\\"the interface named `setBitrate` is invalid while sdpSemantics value is `unified-plan`\\\")}addLocalTrack(e){const t=e.getTrackId(),r=e.getStreamId(),i=e.__innerGetMediaStreamTrack();this._localTracks[t]=e;const n=this._outboundStreams[r]||(this._outboundStreams[r]=new MediaStream);n.getTracks().forEach((e=>{e.kind===i.kind&&n.removeTrack(e)})),n.addTrack(i);const s=this._sendTransceiver[t];s?(s.sender.replaceTrack(i),s.direction=\\\"sendonly\\\"):this._sendTransceiver[t]=this._peer.addTransceiver(i,{direction:\\\"sendonly\\\",streams:[n]})}removeLocalTrack(e){const t=e.getTrackId(),r=e.getStreamId();e.__innerGetMediaStreamTrack(),delete this._localTracks[t];const i=this._sendTransceiver[t];if(!i)return;i.direction=\\\"inactive\\\",this._peer.removeTrack(i.sender),i.sender.replaceTrack(null);const n=this._outboundStreams[r];(e.isAudioTrack()?n.getAudioTracks():n.getVideoTracks()).forEach((e=>n.removeTrack(e)));const s=this._sendTransceiver[`${t}_tiny`];if(!s||\\\"inactive\\\"===s.direction)return;s.direction=\\\"inactive\\\";const o=s.sender,a=o.track;this._peer.removeTrack(o),o.replaceTrack(null);this._outboundStreams[`${r}_tiny`].removeTrack(a),a.stop()}updateRecvTransceiverMap(e,t){const{mediaType:r}=ft(e);this._recvTransceiver[e]=t;const i=r===Fe.AUDIO_ONLY?this._recvAudio:this._recvVideo,n=i.findIndex((e=>e===t));n>=0&&i.splice(n,1)}updateSubRemoteTracks(e){const t=e.slice(),r=this._subedTracks.slice();this._subedTracks=e.slice();for(let e=t.length-1;e>=0;e-=1){const i=t[e],n=r.findIndex((e=>e===i));n>=0&&(t.splice(e,1),r.splice(n,1))}r.length&&r.forEach((e=>{const t=e.getTrackId();e.__innerSetMediaStreamTrack(void 0);const r=this._recvTransceiver[t];r&&(r.direction=\\\"inactive\\\")}));const i={audio:0,video:0};t.length&&t.forEach((e=>{const t=e.isAudioTrack()?\\\"audio\\\":\\\"video\\\",r=this._recvTransceiver[e.getTrackId()];r?r.direction=\\\"recvonly\\\":i[t]+=1}));for(let e=this._recvAudio.length;e<i.audio;e+=1)this._recvAudio.push(this._peer.addTransceiver(\\\"audio\\\",{direction:\\\"recvonly\\\"}));for(let e=this._recvVideo.length;e<i.video;e+=1)this._recvVideo.push(this._peer.addTransceiver(\\\"video\\\",{direction:\\\"recvonly\\\"}))}createOffer(e){return S(this,void 0,void 0,(function*(){const t=yield this._peer.createOffer({iceRestart:e});let r=t.sdp;for(const e in this._outboundStreams){const t=this._outboundStreams[e].id;r=r.replace(new RegExp(t,\\\"g\\\"),e)}return r=(e=>e.split(/\\\\r\\\\n(?=m=)/).map((e=>(e=>/a=(recvonly|inactive)/.test(e)?e.replace(/\\\\r\\\\na=(ssrc|msid)[^\\\\r\\\\n]+/g,\\\"\\\"):e)(e))).join(\\\"\\\\r\\\\n\\\"))(r),r=r.replace(/a=ice-options:trickle/g,\\\"a=ice-options:trickle\\\\r\\\\na=ice-options:renomination\\\"),t.sdp=r,yield this._peer.setLocalDescription(t),{type:\\\"offer\\\",semantics:\\\"unified-plan\\\",sdp:r}}))}setRemoteAnswer(e){e=e.split(/\\\\r\\\\n(?=m=)/).map((e=>{var t;const r=e.match(/a=mid:[^\\\\s]+/);if(!r)return e;const i=r[0].replace(\\\"a=mid:\\\",\\\"\\\");let n=\\\"\\\";for(const e in this._sendTransceiver){if(this._sendTransceiver[e].mid===i){n=e;break}}if(!n)return e;const s=null===(t=this._localTracks[n])||void 0===t?void 0:t.getBitrate();if(!s)return e;const{max:o,min:a}=s,c=o&&o>0?s.start||.7*o:0,d=[];if(o&&o>0&&d.push(`;x-google-max-bitrate=${o}`),a&&a>0&&d.push(`;x-google-min-bitrate=${a}`),c>0&&d.push(`;x-google-start-bitrate=${c}`),0===d.length)return e;const u=d.join(\\\"\\\");return e.replace(/[\\\\r\\\\n]+[^\\\\r\\\\n]+profile-level-id[^\\\\r\\\\n]+/g,(e=>e+u))})).join(\\\"\\\\r\\\\n\\\");const t=/[\\\\r\\\\n]+\\\\r\\\\n[\\\\r\\\\n]+/g;return t.test(e)&&(C.warn(`answer sdp invalid -> ${JSON.stringify(e)}`),e=e.replace(t,\\\"\\\\r\\\\n\\\")),super.setRemoteAnswer(e)}}class Wt extends _rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.EventEmitter{constructor(e,t){super(),this._reTryExchange=e,this._polarisReport=t,this.pubLocalTracks={},this._reTryExchangeTimer=null,this._reportStatsTimer=null,this._reportListener=null;const r=Kt.getSdpSemantics(),i=this._rtcPeerConn=new RTCPeerConnection({sdpSemantics:r});this._sdpStrategy=\\\"plan-b\\\"===r?new Gt(i):new Jt(i),this._rtcPeerConn.oniceconnectionstatechange=this._onICEConnectionStateChange.bind(this),this._rtcPeerConn.onconnectionstatechange=this._onConnectionStateChange.bind(this),this._rtcPeerConn.ontrack=this._onTrackReady.bind(this),this.reportParser=this._sdpStrategy.getStatParsr(this._rtcPeerConn,r)}getLocalTracks(){return Object.values(this.pubLocalTracks)}_onConnectionStateChange(){C.info(`onconnectionstatechange -> ${this._rtcPeerConn.connectionState}`)}_onICEConnectionStateChange(){var e,t;C.info(`oniceconnectionstatechange -> ${this._rtcPeerConn.iceConnectionState}`),\\\"connected\\\"===this._rtcPeerConn.iceConnectionState&&(this._reportStatsTimer&&clearInterval(this._reportStatsTimer),this._reportStatsTimer=setInterval(this._reportHandle.bind(this),1e3)),\\\"failed\\\"!==this._rtcPeerConn.iceConnectionState&&\\\"disconnected\\\"!==this._rtcPeerConn.iceConnectionState||(C.warn(\\\"iceconenction state is `failed`, exchange SDP to try again.\\\"),this._reTryExchange(),this._reTryExchangeTimer=setInterval(this._reTryExchange,15e3));try{null===(t=null===(e=this._reportListener)||void 0===e?void 0:e.onICEConnectionStateChange)||void 0===t||t.call(e,this._rtcPeerConn.iceConnectionState)}catch(e){C.error(\\\"onICEConnectionStateChange error\\\",e)}}_onTrackReady(e){if(!e.streams.length)return;const t=[e.streams[0].id,\\\"audio\\\"===e.receiver.track.kind?Fe.AUDIO_ONLY:Fe.VIDEO_ONLY].join(\\\"_\\\");this._updateRecvTransceiverMap(t,e.transceiver),this.emit(Wt.__INNER_EVENT_TRACK_READY__,e)}setBitrate(e,t,r){return S(this,void 0,void 0,(function*(){this._sdpStrategy.setBitrate(e,t,r)}))}createOffer(e){return S(this,void 0,void 0,(function*(){const t=yield this._sdpStrategy.createOffer(e);return C.debug(`offer -> ${JSON.stringify(t.sdp)}`),t}))}setRemoteAnswer(e){return S(this,void 0,void 0,(function*(){return C.debug(`answer -> ${JSON.stringify(e)}`),this._sdpStrategy.setRemoteAnswer(e)}))}getLocalTrack(e){return this.pubLocalTracks[e]||null}addLocalTrack(e){this.pubLocalTracks[e.getTrackId()]=e,this._sdpStrategy.addLocalTrack(e),e.off(ze.__INNER_EVENT_MUTED_CHANGE__,this._onLocalTrackMuted,this),e.off(ze.__INNER_EVENT_DESTROY__,this._onLocalTrackDestroied,this),e.on(ze.__INNER_EVENT_MUTED_CHANGE__,this._onLocalTrackMuted,this),e.on(ze.__INNER_EVENT_DESTROY__,this._onLocalTrackDestroied,this)}removeLocalTrackById(e){const t=this.getLocalTrack(e);t&&this.removeLocalTrack(t)}removeAllLocalTrack(){Object.keys(this.pubLocalTracks).forEach((e=>{/_tiny$/.test(e)||this.removeLocalTrackById(e)}))}removeLocalTrack(e){const t=e.getTrackId();delete this.pubLocalTracks[t],this._sdpStrategy.removeLocalTrack(e),e.__innerSetPublished(!1),e.off(ze.__INNER_EVENT_MUTED_CHANGE__,this._onLocalTrackMuted,this),e.off(ze.__INNER_EVENT_DESTROY__,this._onLocalTrackDestroied,this);const r=`${t}_tiny`,i=this.getLocalTrack(r);i&&(this._sdpStrategy.removeLocalTrack(i),delete this.pubLocalTracks[r],i.destroy())}_updateRecvTransceiverMap(e,t){this._sdpStrategy.updateRecvTransceiverMap(e,t)}updateSubRemoteTracks(e){this._sdpStrategy.updateSubRemoteTracks(e)}getOutboundVideoInfo(){return this._sdpStrategy.getOutboundVideoInfo()}_onLocalTrackMuted(e){const t=this.getLocalTrack(`${e.getTrackId()}_tiny`);t&&(t.__innerGetMediaStreamTrack().enabled=!e.isLocalMuted()),this.emit(ze.__INNER_EVENT_MUTED_CHANGE__,e)}_onLocalTrackDestroied(e){this.emit(ze.__INNER_EVENT_DESTROY__,e)}registerReportListener(e){this._reportListener=e}_createRCRTCStateReport(e){const{timestamp:t,iceCandidatePair:r,senders:i,receivers:n}=JSON.parse(JSON.stringify(e));null==r||delete r.totalPacketsLost;for(const e in r)Pt(r[e])&&delete r[e];return{timestamp:t,iceCandidatePair:r,senders:i.map((e=>{const t={};return e.trackId&&(t.trackId=e.trackId),e.kind&&(t.kind=e.kind),(e.packetsLostRate||0===e.packetsLostRate)&&(t.packetsLostRate=e.packetsLostRate),t.remoteResource=e.remoteResource,(e.audioLevel||0===e.audioLevel)&&(t.audioLevel=e.audioLevel),e.frameWidth&&(t.frameWidth=e.frameWidth),e.frameHeight&&(t.frameHeight=e.frameHeight),e.frameRate&&(t.frameRate=e.frameRate),(e.bitrate||0===e.bitrate)&&(t.bitrate=e.bitrate),e.jitter&&(t.jitter=e.jitter),t})),receivers:n.map((e=>{const t={};return e.trackId&&(t.trackId=e.trackId),e.kind&&(t.kind=e.kind),(e.packetsLostRate||0===e.packetsLostRate)&&(t.packetsLostRate=e.packetsLostRate),t.remoteResource=e.remoteResource,(e.audioLevel||0===e.audioLevel)&&(t.audioLevel=e.audioLevel),e.frameWidth&&(t.frameWidth=e.frameWidth),e.frameHeight&&(t.frameHeight=e.frameHeight),e.frameRate&&(t.frameRate=e.frameRate),(e.bitrate||0===e.bitrate)&&(t.bitrate=e.bitrate),e.jitter&&(t.jitter=e.jitter),t}))}}_getStatsData(){var e,t;return S(this,void 0,void 0,(function*(){const r=yield this._rtcPeerConn.getStats(),i=null===(e=this.reportParser)||void 0===e?void 0:e.parseRTCStatsReport(r);return null===(t=this.reportParser)||void 0===t?void 0:t.formatRCRTCStateReport(i)}))}getAudioLevelReportData(){var e,t;return S(this,void 0,void 0,(function*(){const r=yield this._rtcPeerConn.getStats(),i=null===(e=this.reportParser)||void 0===e?void 0:e.parseRTCStatsReport(r);if(!i)return[];return null===(t=this.reportParser)||void 0===t?void 0:t.getAudioLevelList(i)}))}_reportHandle(){var e,t,r;return S(this,void 0,void 0,(function*(){const i=yield this._getStatsData();if(!i)return;(i.senders.length||i.receivers.length)&&(null===(e=this._polarisReport)||void 0===e||e.sendR3R4Data(i));const n=this._createRCRTCStateReport(i);null===(r=null===(t=this._reportListener)||void 0===t?void 0:t.onStateReport)||void 0===r||r.call(t,n)}))}getRTCPeerConn(){return this._rtcPeerConn}destroy(){this.clear(),this.clearReTryExchangeTimer(),this._reportStatsTimer&&(clearInterval(this._reportStatsTimer),this._reportStatsTimer=null),this.registerReportListener(null),this._rtcPeerConn.close(),this.reportParser=null}clearReTryExchangeTimer(){clearInterval(this._reTryExchangeTimer),this._reTryExchangeTimer=null}}var Yt,qt,zt,Qt,Xt;Wt.__INNER_EVENT_TRACK_READY__=\\\"inner-track-ready\\\",function(e){e[e.DISABLE=0]=\\\"DISABLE\\\",e[e.ENABLE=1]=\\\"ENABLE\\\"}(Yt||(Yt={})),function(e){e[e.MeetingOrAnchor=1]=\\\"MeetingOrAnchor\\\",e[e.Audience=2]=\\\"Audience\\\"}(qt||(qt={}));class Zt{constructor(e,t,r,i,n=qt.MeetingOrAnchor){this._context=e,this._runtime=t,this._roomId=r,this._crtRTCRoom=i,this._userRole=n}_send(e){this._context.getConnectionStatus()===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ConnectionStatus.CONNECTED&&this._context.setRTCState(this._roomId,e)}_getClientID(){const e=\\\"uuid\\\";let t=this._runtime.localStorage.getItem(e);return t||(t=St(),this._runtime.localStorage.setItem(e,t)),t}_getRealResourceId(e){let t=e;const r=e.indexOf(\\\"_tiny\\\");return r>-1&&(t=e.slice(0,r)),t}_getPolarisTrackId(e){let t=\\\"\\\";const r=e.split(\\\"_\\\");if(e.includes(\\\"_tiny\\\")){const e=r.pop(),i=parseInt(r.pop())===Fe.AUDIO_ONLY?\\\"audio\\\":\\\"video\\\",n=r.pop();t=[r.join(\\\"_\\\"),n,e,i].join(\\\"_\\\")}else{const e=parseInt(r.pop())===Fe.AUDIO_ONLY?\\\"audio\\\":\\\"video\\\",i=r.pop();t=[r.join(\\\"_\\\"),i,e].join(\\\"_\\\")}return t}sendR3R4Data(e){const{iceCandidatePair:t,senders:r,receivers:i}=e,n=(null==t?void 0:t.bitrateSend)||-1,s=(null==t?void 0:t.bitrateRecv)||-1,o=(null==t?void 0:t.networkType)||\\\"unknown\\\",a=(null==t?void 0:t.rtt)||-1,c=`${(null==t?void 0:t.IP)||-1}:${null==t?void 0:t.port}`,d=(null==t||t.remoteIP,null==t||t.remotePort,(null==t?void 0:t.availableIncomingBitrate)||-1),u=(null==t?void 0:t.availableOutgoingBitrate)||-1,l=(null==t?void 0:t.totalPacketsLost)||-1,h=this._context.getCurrentId();let p=`R3\\\\t${n}\\\\t-1\\\\t-1\\\\t-1\\\\t${o}\\\\t${a}\\\\t${c}\\\\t${d}\\\\t${u}\\\\t${l}\\\\t${h}\\\\r`,_=`R4\\\\t${s}\\\\t-1\\\\t-1\\\\t-1\\\\t${o}\\\\t${a}\\\\t${c}\\\\t${d}\\\\t${u}\\\\t${l}\\\\t${h}\\\\r`;const m=r.map((e=>{var t;const{trackId:r,audioLevel:i,samplingRate:n,bitrate:s,packetsLostRate:o,frameRate:a,frameWidth:c,frameHeight:d,googRenderDelayMs:u,jitter:l,nackCount:h,pliCount:p,rtt:_,googFirsSent:m,encoderImplementation:f}=e,v=this._getPolarisTrackId(r),R=this._getRealResourceId(r);return{trackId:v,googCodecName:f||String(-1),audioLevel:i||0===i?i:-1,bitrate:s||0===s?s:-1,packetsLostRate:o||0===o?o:-1,frameRate:a||-1,resolution:c&&d?`${c} * ${d}`:\\\"-1\\\",jitter:l||-1,nackCount:h||0===h?h:-1,pliCount:p||0===p?p:-1,rtt:_||-1,googFirsSent:m,samplingRate:n,googRenderDelayMs:u,encoderImplementation:f||String(-1),trackState:(null===(t=this._crtRTCRoom.getLocalTrack(R))||void 0===t?void 0:t.isLocalMuted())?Yt.DISABLE:Yt.ENABLE}})),f=i.filter((e=>!!e.trackId)).map((e=>{var t;const{trackId:r,audioLevel:i,samplingRate:n,bitrate:s,packetsLostRate:o,frameRate:a,frameWidth:c,frameHeight:d,googRenderDelayMs:u,jitter:l,nackCount:h,pliCount:p,rtt:_,googFirsReceived:m,codecImplementationName:f}=e,v=this._getPolarisTrackId(r),R=this._getRealResourceId(r);return{trackId:v,googCodecName:f||String(-1),audioLevel:i||0===i?i:-1,bitrate:s||0===s?s:-1,packetsLostRate:o||0===o?o:-1,frameRate:a||-1,resolution:c&&d?`${c} * ${d}`:\\\"-1\\\",jitter:l||-1,nackCount:h||0===h?h:-1,pliCount:p||0===p?p:-1,rtt:_||-1,googFirsReceived:m,samplingRate:n,googRenderDelayMs:u,codecImplementationName:f||String(-1),trackState:(null===(t=this._crtRTCRoom.getRemoteTrack(R))||void 0===t?void 0:t.isLocalMuted())?Yt.DISABLE:Yt.ENABLE}}));p+=m.map((e=>`${e.trackId}\\\\t${e.googCodecName}\\\\t${e.audioLevel}\\\\t${e.samplingRate}\\\\t${e.bitrate}\\\\t${e.packetsLostRate}\\\\t${e.frameRate}\\\\t${e.resolution}\\\\t${e.googRenderDelayMs}\\\\t${e.jitter}\\\\t${e.nackCount}\\\\t${e.pliCount}\\\\t${e.rtt}\\\\t${e.googFirsSent}\\\\t${e.encoderImplementation}\\\\t${e.trackState}`)).join(\\\"\\\\n\\\"),e.senders.length&&this._send(p+`\\\\r${this._userRole}`),_+=f.map((e=>`${e.trackId}\\\\t${e.googCodecName}\\\\t${e.audioLevel}\\\\t${e.samplingRate}\\\\t${e.bitrate}\\\\t${e.packetsLostRate}\\\\t${e.frameRate}\\\\t${e.resolution}\\\\t${e.googRenderDelayMs}\\\\t${e.jitter}\\\\t${e.nackCount}\\\\t${e.pliCount}\\\\t${e.rtt}\\\\t${e.googFirsReceived}\\\\t${e.codecImplementationName}\\\\t${e.trackState}`)).join(\\\"\\\\n\\\"),e.receivers.length&&this._send(_+`\\\\r${this._userRole}`)}sendR1(){const e=`R1\\\\t5.3.1\\\\t${this._context.getCoreVersion()}\\\\tweb\\\\t${navigator.platform}\\\\t-1\\\\t${yt.browser}\\\\t${yt.version}\\\\t${this._getClientID()}\\\\t${this._userRole}`;this._send(e)}sendR2(e,t,r){const i=`R2\\\\t${e}\\\\t${t}\\\\t${this._getClientID()}\\\\r${r.join(\\\"\\\\t\\\")}\\\\r${this._userRole}`;this._send(i)}}!function(e){e.PUBLISH=\\\"publish\\\",e.SUBSCRIBE=\\\"subscribe\\\"}(zt||(zt={})),function(e){e.BEGIN=\\\"begin\\\",e.END=\\\"end\\\"}(Qt||(Qt={}));class er{constructor(e){this._room=e,this._audioLevelChangeHandler=null,this._timer=null,this._pc=this._room.__getPC()}_audioLevelReport(){return S(this,void 0,void 0,(function*(){if(\\\"new\\\"===this._pc.getRTCPeerConn().iceConnectionState||!this._audioLevelChangeHandler)return;const e=(yield this._pc.getAudioLevelReportData()).map((e=>{const{userId:t}=Pr.parseTrackId(e.trackId);return{track:this._room.getCrtUserId()===t?this._room.getLocalTrack(e.trackId):this._room.getRemoteTrack(e.trackId),audioLevel:e.audioLevel||0}})).filter((e=>e.track));this._audioLevelChangeHandler(e)}))}onAudioLevelChange(e,t){t<300||t>1e3?C.error('the valid range of onAudioLevelChange params \\\"gap\\\" is: > 300 && < 1000'):e?(this._audioLevelChangeHandler=e,this._timer=setInterval(this._audioLevelReport.bind(this),t)):this._audioLevelChangeHandler=null}clearAudioLevelReportTimer(){this._timer&&(clearInterval(this._timer),this._timer=null)}}!function(e){e[e.ANCHOR=1]=\\\"ANCHOR\\\",e[e.AUDIENCE=2]=\\\"AUDIENCE\\\"}(Xt||(Xt={}));const tr=e=>e instanceof qe?e.getTrackId():e.track.getTrackId();class rr{constructor(e,t,r,i,n,s,o,a,c,d){this._context=e,this._runtime=t,this._roomId=r,this._roomMode=n,this._service=s,this._initOptions=o,this._ntfClearRoomItem=a,this._isMainRoom=d,this._remoteTracks={},this._subscribedList=[],this._destroyed=!1,this.msgTaskQueue=new E,this._appListener=null,this._onRecvPKMsg=null,this._token=i.token,this._sessionId=i.sessionId,this._roomResources=c?{}:Lt(i),this._initRemoteTracks();const u=this._context.getCurrentId(),l=this._roomResources[u]=this._roomResources[u]||[];C.debug(`room data -> ${JSON.stringify(this._roomResources)}`),l.length>0&&k((()=>this._unpublishPrev(l))),c&&this._afterChangedRole(i),this._pinger=new At(r,this._roomMode,e,this._initOptions.pingGap),this._pinger.onFailed=this._kickoff.bind(this),this._pinger.onPingResult=this._handlePingResult.bind(this),this._pinger.start(),this._polarisReport=new Zt(this._context,this._runtime,this._roomId,this),this._polarisReport.sendR1(),this._pc=new Wt(this._reTryExchange.bind(this),this._polarisReport),this._pc.on(Wt.__INNER_EVENT_TRACK_READY__,this._onTrackReady,this),this._pc.on(ze.__INNER_EVENT_MUTED_CHANGE__,this._onLocalTrackMuted,this),this._pc.on(ze.__INNER_EVENT_DESTROY__,this._onLocalTrackDestroied,this)}_initRemoteTracks(){const e=this._context.getCurrentId();for(const t in this._roomResources){const r=this._roomResources[t];t!==e&&0!==r.length&&r.forEach((e=>{const t=mt(e),{tag:r,userId:i,mediaType:n}=ft(t),s=n===Fe.AUDIO_ONLY?new ot(r,i):new at(r,i);s.__innerSetRemoteMuted(0===e.state),this._remoteTracks[t]=s}))}}_handlePingResult(e){this._callAppListener(\\\"onPing\\\",e)}setBitrate(e,t,i){C.warn(\\\"`RCAbstractRoom.setBitrate` will be deprecated, use `RCLocalTrack.setBitrate` instead.\\\"),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"max\\\",e,(e=>(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(e)&&e>Math.max(t||1,200)),!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"min\\\",t,(t=>(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(t)&&t>=1&&(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(e)||t<e)),!0),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"start\\\",i,(i=>(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(i)&&i>t&&i<=e)),this._pc.setBitrate(e,t,i)}_onTrackReady(e){const t=e.streams[0].id,r=e.receiver.track,i=[t,\\\"audio\\\"===r.kind?Fe.AUDIO_ONLY:Fe.VIDEO_ONLY].join(\\\"_\\\"),n=this._remoteTracks[i];n?(n.__innerSetMediaStreamTrack(r),this._callAppListener(\\\"onTrackReady\\\",n)):C.warn(`cannot found remote track ${r.id}`)}_callAppListener(e,...t){var r;const i=null===(r=this._appListener)||void 0===r?void 0:r[e];if(i)try{i(...t)}catch(e){C.error(e)}}_onUserUnpublish(e){return S(this,void 0,void 0,(function*(){yield this.unsubscribe(e),e.forEach((e=>{e.__innerDestroy(),delete this._remoteTracks[e.getTrackId()]})),this._onTrackUnpublish(e)}))}_onTrackUnpublish(e){this._callAppListener(\\\"onTrackUnpublish\\\",e)}_unpublishPrev(e){return S(this,void 0,void 0,(function*(){const t=e.slice();e.length=0,C.info(`unpublish uris prev login: ${JSON.stringify(t)}`);const r=yield this._context.setRTCTotalRes(this._roomId,ct(Nt.UNPUBLISH,t),dt([]),Nt.TOTAL_CONTENT_RESOURCE,dt([]));r!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?C.error(`unpublish prev uris failed -> code: ${r}`):C.debug(\\\"unpublish uris prev login succeed\\\")}))}__parseInnerMessage(e){const{targetId:t,conversationType:r}=e;if(r!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ConversationType.RTC_ROOM)return!1;if(t!==this._roomId)return!0;C.info(`recv inner msg -> message: ${JSON.stringify(e)} | roomid: ${this._roomId}`);const i=e.content;switch(e.messageType){case Nt.KICK:this._kickoff(!0,i);break;case Nt.STATE:this.msgTaskQueue.push((()=>this._stateHandle(i)));break;case Nt.MODIFY:case Nt.PUBLISH:case Nt.UNPUBLISH:case Nt.TOTAL_CONTENT_RESOURCE:this.msgTaskQueue.push((()=>this._resourceHandle(i,e.messageType,e.senderUserId)));break;case Nt.ROOM_NOTIFY:this._callAppListener(\\\"onRoomAttributeChange\\\",e.messageType,e.content);break;case Nt.USER_NOTIFY:C.warn(`TODO: ${Nt.USER_NOTIFY}`);break;case Nt.PK_INVITE:case Nt.PK_CANCEL_INVITE:case Nt.PK_INVITE_TIMEOUT:case Nt.PK_INVITE_ANSWER:case Nt.PK_END:this._onRecvPKMsg&&this._onRecvPKMsg(e);break;case Nt.OTHER_ROOM_OFFLINE:break;default:this._callAppListener(\\\"onMessageReceive\\\",e.messageType,e.content,e.senderUserId,e.messageUId)}return!0}_kickoff(e,t){let r;C.warn(`onKickOff -> byServer: ${e}`),this._ntfClearRoomItem(),this._leaveHandle(!e),e&&((null==t?void 0:t.users)||[]).forEach((e=>{e.userId===this._context.getCurrentId()&&(r=e.type)})),this._callAppListener(\\\"onKickOff\\\",e,r)}_rtcpeerClosed(){this._ntfClearRoomItem(),this._leaveHandle(!0),this._callAppListener(\\\"onRTCPeerConnectionCloseByException\\\")}_resourceHandle(e,t,r){return S(this,void 0,void 0,(function*(){if(this._assertRoomDestroyed())return void C.warn(`room has been destroyed. -> roomId: ${this._roomId}`);const{uris:i,ignore:n}=e;if(n||!i)return;const s=[],o=[],a=[];let c;const d=this._roomResources[r]||(this._roomResources[r]=[]);switch(t){case Nt.MODIFY:a.push(...i);break;case Nt.PUBLISH:s.push(...i);break;case Nt.UNPUBLISH:o.push(...i);break;case Nt.TOTAL_CONTENT_RESOURCE:c=gt(d,i),s.push(...c.publishedList),o.push(...c.unpublishedList),a.push(...c.modifiedList)}if(s.length>0){const e=d.map(mt),t=[],r=[];if(s.forEach((i=>{const n=mt(i),s=e.indexOf(n),{userId:o,tag:a,mediaType:c}=ft(n);s>-1?d[s]=i:d.push(i);let u=this._remoteTracks[n];u?u.isSubscribed()&&t.push(u):(u=c===Fe.AUDIO_ONLY?new ot(a,o):new at(a,o),this._remoteTracks[n]=u,r.push(u)),u.__innerSetRemoteMuted(0===i.state)})),t.length){const e=t.map((e=>e.getTrackId()));C.debug(`resub tracks -> ${JSON.stringify(e)}`);const{code:r}=yield k((()=>this.__subscribe(t,!0)));r!==T.SUCCESS&&C.error(`resub tracks failed -> code: ${r}, ids: ${JSON.stringify(e)}`)}this._onTrackPublish(r)}if(o.length>0){const e=o.map(mt);for(let t=d.length-1;t>=0;t-=1){const r=d[t];e.includes(mt(r))&&d.splice(t,1)}const t=o.map((e=>{const t=mt(e);return this._remoteTracks[t]}));yield this._onUserUnpublish(t)}if(a.length>0){const e=d.map(mt);for(let t=0;t<a.length;t+=1){const r=a[t],i=mt(r),n=e.indexOf(i);d[n].state=r.state;const s=this._remoteTracks[i];s.__innerSetRemoteMuted(0===r.state),s.isAudioTrack()?this._onAudioMuteChange(s):this._onVideoMuteChange(s)}}}))}_onTrackPublish(e){this._callAppListener(\\\"onTrackPublish\\\",e)}_stateHandle(e){var t;return S(this,void 0,void 0,(function*(){const{users:r}=e;if(0===r.length)return;const i=[],n=[],s=[],o=[];r.forEach((e=>{0==+e.state?(C.debug(`user joined -> ${e.userId}`),this._roomResources[e.userId]||(e.switchRoleType?s.push(e.userId):i.push(e.userId)),this._roomResources[e.userId]=this._roomResources[e.userId]||[]):(C.debug(`user left -> ${e.userId}`),e.switchRoleType?o.push(e.userId):n.push(e.userId))}));const a=[...i,...s],c=[...n,...o];if(c.length){const e=[],t=[];c.forEach((r=>{e.push(...this.getRemoteTracksByUserId(r)),t.push(r)})),e.length&&(yield this.unsubscribe(e),e.forEach((e=>delete this._remoteTracks[e.getTrackId()]))),t.length&&t.forEach((e=>delete this._roomResources[e]))}if(null===(t=this._appListener)||void 0===t?void 0:t.onSwitchRole)return s.length&&s.forEach((e=>this._callAppListener(\\\"onSwitchRole\\\",e,Xt.ANCHOR))),o.length&&o.forEach((e=>this._callAppListener(\\\"onSwitchRole\\\",e,Xt.AUDIENCE))),i.length&&this._callAppListener(\\\"onUserJoin\\\",i),void(n.length&&this._callAppListener(\\\"onUserLeave\\\",n));a.length&&this._callAppListener(\\\"onUserJoin\\\",a),c.length&&this._callAppListener(\\\"onUserLeave\\\",c)}))}getRoomId(){return this._roomId}getCrtUserId(){return this._context.getCurrentId()}__getPC(){return this._pc}getRemoteUserIds(){const e=this._context.getCurrentId();return Object.keys(this._roomResources).filter((t=>t!==e))}getRemoteTracks(){const e=[];return this.getRemoteUserIds().forEach((t=>{e.push(...this.getRemoteTracksByUserId(t))})),e}getRemoteTracksByUserId(e){const t=[];for(const r in this._remoteTracks){const i=this._remoteTracks[r];i.getUserId()===e&&t.push(i)}return t}getSessionId(){return this._sessionId}sendMessage(e,t){return S(this,void 0,void 0,(function*(){const{code:r}=yield this._context.sendMessage(_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ConversationType.RTC_ROOM,this._roomId,{messageType:e,content:t,isStatusMessage:!0});return r!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(C.error(`send message failed -> code: ${r}`),{code:T.SIGNAL_ERROR}):{code:T.SUCCESS}}))}setRoomAttribute(e,t,r,n=!1){return S(this,void 0,void 0,(function*(){const s=yield this._context.setRTCData(this._roomId,e,t,n,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCApiType.ROOM,r);return s!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(C.error(`SetRoomAttributeValue Failed: ${s}`),{code:T.SIGNAL_ERROR}):{code:T.SUCCESS}}))}deleteRoomAttributes(e,t,r=!1){return S(this,void 0,void 0,(function*(){const n=yield this._context.removeRTCData(this._roomId,e,r,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCApiType.ROOM,t);return n!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(C.error(`DeleteRoomAttribute Failed: ${n}`),{code:T.SIGNAL_ERROR}):{code:T.SUCCESS}}))}getRoomAttributes(e=[],t=!1){return S(this,void 0,void 0,(function*(){const{code:r,data:n}=yield this._context.getRTCData(this._roomId,e,t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCApiType.ROOM);return r!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(C.error(`GetRoomAttributes Failed: ${r}`),{code:T.SIGNAL_ERROR}):{code:T.SUCCESS,data:n}}))}_setUserAttributeValue(e,t,r){return this._context.setRTCData(this._roomId,e,t,!1,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCApiType.PERSON,r)}_deleteUserAttributes(e,t){return this._context.removeRTCData(this._roomId,e,!1,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCApiType.PERSON,t)}_getUserAttributes(e){return this._context.getRTCData(this._roomId,e,!1,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCApiType.PERSON)}isDestroyed(){return this._destroyed}__destroy(e){return this._leaveHandle(e)}_leaveHandle(e){var t;return S(this,void 0,void 0,(function*(){this._destroyed||(this._destroyed=!0,null===(t=this._audioLevelReport)||void 0===t||t.clearAudioLevelReportTimer(),e&&(yield this._context.quitRTCRoom(this._roomId)),this._isMainRoom&&this._quitAllPKRoom(),this._pc.removeAllLocalTrack(),this._pinger.stop(),this._isMainRoom&&(yield this._service.exit(this._getRTCReqestHeaders())),this._pc.destroy(),this._polarisReport=null,this._removeRemoteTracks())}))}_onLocalTrackDestroied(e){e instanceof Xe&&e.__isTiny()||this.unpublish([e])}_onLocalTrackMuted(e){return S(this,void 0,void 0,(function*(){const t=e.getTrackId(),r=this._context.getCurrentId(),n=[{resourceId:t,enabled:!e.isLocalMuted()}],s=this._roomResources[r]||[],o=[];for(let e=0;e<s.length;e+=1){const t=s[e],r=mt(t),i=n.findIndex((e=>e.resourceId===r));if(i>=0){const{enabled:e}=n[i];t.state=e?1:0,o.push(t);break}}const a=yield k((()=>this._context.setRTCTotalRes(this._roomId,ct(Nt.MODIFY,o),dt(s),Nt.TOTAL_CONTENT_RESOURCE)));a!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS&&C.error(\\\"notice `track.enabled` change failed -> code: \\\"+a)}))}_removePubFailedTracks(e){e.forEach((e=>{const t=e instanceof ze?e:e.track;C.debug(`remove pub failed track from peerconnection -> trackId: ${t.getTrackId()}`),this._pc.removeLocalTrackById(t.getTrackId())}))}publish(e){return S(this,void 0,void 0,(function*(){return k((()=>this.__publish(e)))}))}__publish(e){return S(this,void 0,void 0,(function*(){if(!this._isMainRoom&&this instanceof _r)return C.error(\\\"the `publish` is disabled in PK room \\\"),{code:T.THE_FUNCTION_IS_DISABLED_IN_PKROOM};if(this._assertRoomDestroyed())return C.error(`publish failed, room has been destroyed. -> roomId: ${this._roomId}`),{code:T.ROOM_HAS_BEEN_DESTROYED};if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)(\\\"tracks\\\",e,(()=>(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isArray)(e)&&e.length>0&&e.every((e=>e instanceof ze||e.track instanceof ze))),!0))return C.error(`publish failed, tracks is invalid -> roomId: ${this._roomId}`),{code:T.PARAMS_ERROR};const t=this._context.getCurrentId();if(this._pc.getLocalTracks().length+(e=>{let t=0;return e.forEach((e=>{e instanceof ze?t++:e.pubTiny&&e.track.isVideoTrack()?t+=2:t++})),t})(e)>10)return C.error(`publish failed, tracks limit exceeded -> roomId: ${this._roomId}`),{code:T.PUBLISH_TRACK_LIMIT_EXCEEDED};C.debug(`publish tracks -> roomId: ${this._roomId}, tracks: ${e.map(tr)}`),e.forEach((e=>{const{track:t,pubTiny:r}=e instanceof ze?{pubTiny:!1,track:e}:e;if(this._pc.addLocalTrack(t),t.isVideoTrack()&&r){let e;try{e=t.__innerGetMediaStreamTrack().clone();const i=r.frameRate||Be.FPS_15,n=r.resolution||He.W176_H144,{width:s,height:o}=Ct(n),a=Et(i);e.applyConstraints({width:s,height:o,frameRate:a})}catch(r){return null==e||e.stop(),void C.warn(`pubTiny failed -> id: ${t.getTrackId()}, msg: ${r.message}`)}this._pc.addLocalTrack(new Xe(t.getTag(),t.getUserId(),e,!0))}})),this._pc.clearReTryExchangeTimer();const r=yield this._createExchangeParams(this._subscribedList,!1),n=this._getPushOtherRoomsParams();n&&(r.pushOtherRooms=n);const s=yield this._exchangeHandle(r);if(s.code!==T.SUCCESS)return C.error(`publish failed -> roomId: ${this._roomId}, code: ${s.code}`),this._removePubFailedTracks(e),{code:s.code};const{publishList:o,sdp:a,resultCode:l,message:h,urls:p,mcuPublishList:_}=s.data;if(l!==T.SUCCESS)return C.error(`publish failed -> roomId: ${this._roomId}, code: ${l}, msg: ${h}`),this._removePubFailedTracks(e),{code:l};const m=yield this._pc.setRemoteAnswer(a.sdp);if(m!==T.SUCCESS)return{code:m};const f=this._roomResources[t],v=o.map((e=>Object.assign({tag:e.msid.split(\\\"_\\\").pop(),state:this._getResourceState(mt(e))},e))),{publishedList:R}=gt(f,v),g=(null==_?void 0:_.map((e=>Object.assign({tag:e.msid.split(\\\"_\\\").pop(),state:1},e))))||[],S=yield this._context.setRTCTotalRes(this._roomId,ct(Nt.PUBLISH,R),dt(v),Nt.TOTAL_CONTENT_RESOURCE,dt(g));if(S!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS)return C.error(`send publish streams notification failed: ${S}`),{code:T.SIGNAL_ERROR};this._roomResources[t]=v;const I=R.map((e=>mt(e)));return this._polarisReport&&this._polarisReport.sendR2(zt.PUBLISH,Qt.BEGIN,I),e.forEach((e=>{const{track:t}=e instanceof ze?{track:e}:e;t.__innerSetPublished(!0)})),C.debug(`publish success: ${I.join(\\\",\\\")}`),this._roomMode===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCMode.LIVE?{code:T.SUCCESS,liveUrl:null==p?void 0:p.liveUrl}:{code:T.SUCCESS}}))}_getPushOtherRoomsParams(){if(this instanceof _r){const{code:e,roomPKHandler:t}=this.getRoomPKHandler(),r=[];if(e===T.SUCCESS&&t){const e=t.getJoinedPKRooms();for(const i in e){const n=e[i].getSessionId(),s=t.getPKInfo(i);if(!s)return;const{inviterUserAutoMix:o,inviteeUserAutoMix:a,inviterUserId:c}=s,d=this._context.getCurrentId()===c;r.push({roomId:i,sessionId:n,autoMix:d?!!o:!!a})}}return r}}_reTryExchange(){return S(this,void 0,void 0,(function*(){k((()=>S(this,void 0,void 0,(function*(){const e=yield this._createExchangeParams(this._subscribedList,!0),t=this._getPushOtherRoomsParams();t&&(e.pushOtherRooms=t);const r=yield this._exchangeHandle(e);if(r.code!==T.SUCCESS)return C.error(`reTryExchange failed: ${r.code}`),{code:r.code};const{sdp:i,resultCode:n}=r.data;if(n!==T.SUCCESS)return C.error(`reTryExchange failed: ${n}`),{code:n};this._pc.clearReTryExchangeTimer();const s=yield this._pc.setRemoteAnswer(i.sdp);return s!==T.SUCCESS?{code:s}:void 0}))))}))}_exchangeHandle(e){return this._service.exchange(this._getRTCReqestHeaders(),e)}_getRTCReqestHeaders(){return{\\\"App-Key\\\":this._context.getAppkey(),RoomId:this._roomId,Token:this._token,RoomType:this._roomMode,UserId:this._context.getCurrentId()}}_createExchangeParams(e,t){return S(this,void 0,void 0,(function*(){return{sdp:yield this._pc.createOffer(t),extend:JSON.stringify({resolutionInfo:this._pc.getOutboundVideoInfo()}),subscribeList:e.filter((e=>{const t=e.track.getTrackId(),{userId:r}=ft(t);if(!this._roomResources[r])return!1;const i=this._roomResources[r].filter((e=>t===`${e.msid}_${e.mediaType}`)).length;return i})).map((e=>({simulcast:e.subTiny?Mt.TINY:Mt.NORMAL,resolution:\\\"\\\",uri:this._getResourceById(e.track.getTrackId()).uri}))),switchstream:!1}}))}_getResourceState(e){var t;return(null===(t=this.getLocalTrack(e))||void 0===t?void 0:t.isLocalMuted())?0:1}unpublish(e){return S(this,void 0,void 0,(function*(){return k((()=>this.__unpublish(e)))}))}__unpublish(e){var t;return S(this,void 0,void 0,(function*(){if(!this._isMainRoom&&this instanceof _r)return C.error(\\\"the `unpublish` is disabled in PK room \\\"),{code:T.THE_FUNCTION_IS_DISABLED_IN_PKROOM};if(this._assertRoomDestroyed())return C.warn(`room has been destroyed, no need to unpublish tracks -> roomId: ${this._roomId}`),{code:T.SUCCESS};const r=this._context.getCurrentId();if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)(\\\"tracks\\\",e,(()=>e.every((e=>e.getUserId()===r&&e instanceof ze))),!0))return C.warn(`unpublish failed, tracks is invalid -> roomId: ${this._roomId}, tracks: ${e.map(tr)}`),{code:T.PARAMS_ERROR};const n=e.map((e=>e.getTrackId())),s=n.map(this._getResourceById.bind(this)).filter((e=>!!e));if(0===s.length)return{code:T.SUCCESS};const o=this._roomResources[r].filter((e=>!s.includes(e)));n.forEach((e=>this._pc.removeLocalTrackById(e))),null===(t=this._polarisReport)||void 0===t||t.sendR2(zt.PUBLISH,Qt.END,n),this._pc.clearReTryExchangeTimer();const a=yield this._createExchangeParams(this._subscribedList,!1),d=this._getPushOtherRoomsParams();d&&(a.pushOtherRooms=d);const u=yield this._exchangeHandle(a);if(u.code!==T.SUCCESS)return C.error(`exchange failed -> code: ${u.code}`),{code:u.code};const{publishList:l,sdp:h,resultCode:p,message:_,mcuPublishList:m}=u.data;p!==T.SUCCESS&&C.error(`unpublish streams failed -> code: ${p}, msg: ${_}`);const f=m?m.map((e=>Object.assign({tag:e.msid.split(\\\"_\\\").pop(),state:1},e))):[],v=yield this._context.setRTCTotalRes(this._roomId,ct(Nt.UNPUBLISH,s),dt(o),Nt.TOTAL_CONTENT_RESOURCE,dt(f));if(v!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS)return C.error(\\\"send unpublish notification failed:\\\",v),{code:T.SIGNAL_ERROR};C.debug(`unpublish success -> tracks: ${n.join(\\\",\\\")}`);const R=yield this._pc.setRemoteAnswer(h.sdp);if(R!==T.SUCCESS)return{code:R};const g=l.map((e=>Object.assign({tag:e.msid.split(\\\"_\\\").pop(),state:this._getResourceState(mt(e))},e)));return this._roomResources[r]=g,{code:T.SUCCESS}}))}_getResourceById(e){const{userId:t}=ft(e);return this._roomResources[t].find((t=>mt(t)===e))}_isValidResourceId(e){var t;const{userId:r}=ft(e);return!!(null===(t=this._roomResources[r])||void 0===t?void 0:t.find((t=>mt(t)===e)))}subscribe(e){return S(this,void 0,void 0,(function*(){return k((()=>this.__subscribe(e,!1)))}))}__subscribe(e,t=!1){var r;return S(this,void 0,void 0,(function*(){if(this._assertRoomDestroyed())return C.error(`subscribe failed, room has been destroyed -> roomId: ${this._roomId}`),{code:T.ROOM_HAS_BEEN_DESTROYED};if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)(\\\"tracks\\\",e,(()=>(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isArray)(e)&&e.length>0&&e.every((e=>e instanceof st||e.track instanceof st))),!0))return C.error(`subscribe failed, tracks is invalid -> roomId: ${this._roomId}`),{code:T.PARAMS_ERROR};C.info(`subscribe -> roomId: ${this._roomId}, tracks: ${e.map(tr)}`);const i=this._subscribedList.map((e=>Object.assign({},e))),n=e.map((e=>e instanceof st?{track:e}:e));let s=!1;const o=[];return n.forEach((e=>{const t=e.track.getTrackId();o.push(t);const r=i.find((e=>e.track.getTrackId()===t));r&&r.subTiny===e.subTiny||(r?r.subTiny=e.subTiny:i.push(e),s=!0)})),s||t?(null===(r=this._polarisReport)||void 0===r||r.sendR2(zt.SUBSCRIBE,Qt.BEGIN,o),this._updateSubListHandle(i,!0)):{code:T.SUCCESS}}))}unsubscribe(e){return S(this,void 0,void 0,(function*(){return k((()=>this.__unsubscribe(e)))}))}__unsubscribe(e){var t;return S(this,void 0,void 0,(function*(){if(this._assertRoomDestroyed())return C.warn(`room has beed destroyed, no need to unsubscribe tracks -> roomId: ${this._roomId}`),{code:T.SUCCESS};if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)(\\\"tracks\\\",e,(()=>(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isArray)(e)&&e.length>0&&e.every((e=>e instanceof st))),!0))return C.error(`unsubscribe failed, tracks is invalid -> roomId: ${this._roomId}`),{code:T.PARAMS_ERROR};C.info(`unsubscribe -> roomId: ${this._roomId}, tracks: ${e.map(tr)}`);const r=this._subscribedList.map((e=>Object.assign({},e))).filter((t=>!e.includes(t.track)));return null===(t=this._polarisReport)||void 0===t||t.sendR2(zt.SUBSCRIBE,Qt.END,e.map((e=>e.getTrackId()))),this._updateSubListHandle(r,!1)}))}_assertRoomDestroyed(){if(this._destroyed){const e=\\\"This room has been destroyed. Please use `RCRTCClient.joinRTCRoom` or `RCRTCClient.joinLivingRoom` to catch another instance.\\\";return C.warn(e),T.ROOM_HAS_BEEN_DESTROYED}}getLocalTrack(e){return this._pc.getLocalTrack(e)}getLocalTracks(){return this._pc.getLocalTracks()}getRemoteTrack(e){return this._remoteTracks[e]||null}updateSubList(e){return S(this,void 0,void 0,(function*(){return k((()=>this._updateSubListHandle(e,!1)))}))}_updateSubListHandle(e,t=!1){return S(this,void 0,void 0,(function*(){if(this._assertRoomDestroyed())return{code:T.ROOM_HAS_BEEN_DESTROYED};if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)(\\\"resources\\\",e,(()=>(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isArray)(e)&&e.every((e=>e instanceof st||e.track instanceof st))),!0))return C.error(`update sublist failed, tracks is invalid -> roomId: ${this._roomId}`),{code:T.PARAMS_ERROR};C.info(`update subscribe list -> roomId: ${this._roomId}, forceReq: ${t}, tracks: ${e.map(tr)}`);let r=e.map((e=>e instanceof st?{track:e}:Object.assign({},e)));const i={};r=r.filter((e=>{const t=e.track.getTrackId();return this._remoteTracks[t]?!i[t]&&(i[t]=!0):(C.warn(`track cannot found in room -> trackId: ${t}`),!1)})).map((e=>Object.assign({},e)));const n=this._subscribedList.map((e=>Object.assign({},e)));if(!t){let e=!1;if(r.forEach((t=>{const r=n.findIndex((e=>e.track===t.track));if(-1===r)return void(e=!0);n.splice(r,1)[0].subTiny!==t.subTiny&&(e=!0)})),n.length&&(e=!0),!e)return{code:T.SUCCESS}}this._pc.clearReTryExchangeTimer(),this._pc.updateSubRemoteTracks(r.map((e=>e.track)));const s=yield this._createExchangeParams(r,!1),o=this._getPushOtherRoomsParams();o&&(s.pushOtherRooms=o);const a=yield this._exchangeHandle(s),u=r.map((e=>e.track.getTrackId()));if(a.code!==T.SUCCESS)return{code:a.code};const{sdp:l,resultCode:h,message:p,subscribedList:_}=a.data;if(h!==T.SUCCESS)return C.error(`change subscribe list failed: ${h}`),{code:h};C.debug(`subscribe success: ${u.join(\\\",\\\")}`);const m=yield this._pc.setRemoteAnswer(l.sdp);if(m!==T.SUCCESS)return{code:m};const f=null==_?void 0:_.map((e=>`${e.msid}_${e.mediaType}`)),v=r.filter((e=>null==f?void 0:f.includes(e.track.getTrackId()))),R=r.filter((e=>!(null==f?void 0:f.includes(e.track.getTrackId()))));for(const e in this._remoteTracks){const t=v.some((t=>t.track.getTrackId()===e));this._remoteTracks[e].__innerSetSubscribed(t)}return this._subscribedList.splice(0,this._subscribedList.length,...v),R.length?{code:T.SUCCESS,failedList:R}:{code:T.SUCCESS}}))}registerRoomEventListener(e){this._appListener=e}registerReportListener(e){this._pc.registerReportListener(e)}onAudioLevelChange(e,t){var r;null===(r=this._audioLevelReport)||void 0===r||r.clearAudioLevelReportTimer(),this._audioLevelReport=new er(this),this._audioLevelReport.onAudioLevelChange(e,t||1e3)}__onReconnected(e){return S(this,void 0,void 0,(function*(){if(\\\"closed\\\"===this._pc.getRTCPeerConn().connectionState)return C.warn(\\\"RTCPeerConnection closed. Please rejoin room to restore services.\\\"),void this._rtcpeerClosed();const{code:t,data:r}=yield this._context.joinRTCRoom(this._roomId,this._roomMode,e);if(t!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS)return void C.error(`RTC __onReconnected getRTCRoomInfo failed: ${t}`);C.debug(`RTC __onReconnected getRTCRoomInfo success: ${JSON.stringify(r)}`);const n=[],s={},o={},a={},c=Lt(r),d=Object.keys(c),u=Object.keys(this._roomResources);for(let e=d.length-1;e>=0;e-=1){const t=d[e],r=u.indexOf(t);if(-1===r){n.push(t),s[t]=Rt(c[t]);continue}const i=this._roomResources[t],l=c[t],{publishedList:h,modifiedList:p,unpublishedList:_}=gt(i,l,!0);s[t]=Rt(h),o[t]=Rt(_),a[t]=Rt(p),u.splice(r,1)}u.length&&u.forEach((e=>{delete this._roomResources[e]})),Object.assign(this._roomResources,c),u.length&&this._callAppListener(\\\"onUserLeave\\\",u),n.length&&this._callAppListener(\\\"onUserJoin\\\",n);for(const e in o){const t=o[e];if(t.length){const e=t.map((e=>this._remoteTracks[mt(e)]));yield this._onUserUnpublish(e)}}return Object.keys(s).forEach((e=>{const t=s[e];if(0===t.length)return;const r=t.map((e=>{const t=mt(e),{userId:r,tag:i,mediaType:n}=ft(t),s=this._remoteTracks[t]=n===Fe.AUDIO_ONLY?new ot(i,r):new at(i,r);return s.__innerSetRemoteMuted(0===e.state),s}));this._onTrackPublish(r)})),Object.keys(a).forEach((e=>{a[e].forEach((e=>{const t=mt(e),r=this._remoteTracks[t];r.__innerSetRemoteMuted(0===e.state),r.isAudioTrack()?this._onAudioMuteChange(r):this._onVideoMuteChange(r)}))})),{data:r}}))}_onAudioMuteChange(e){this._callAppListener(\\\"onAudioMuteChange\\\",e)}_onVideoMuteChange(e){this._callAppListener(\\\"onVideoMuteChange\\\",e)}_afterChangedRole(e){}_removeRemoteTracks(){const e=Object.values(this._remoteTracks);e.length&&(e.forEach((e=>{e.isAudioTrack()&&e.__releaseMediaElement()})),this._remoteTracks={})}_registerPKMsgListener(e){this._onRecvPKMsg=e}_quitAllPKRoom(){}}var ir,nr,sr;!function(e){e[e.CROP=1]=\\\"CROP\\\",e[e.WHOLE=2]=\\\"WHOLE\\\"}(ir||(ir={})),function(e){e[e.CUSTOMIZE=1]=\\\"CUSTOMIZE\\\",e[e.SUSPENSION=2]=\\\"SUSPENSION\\\",e[e.ADAPTATION=3]=\\\"ADAPTATION\\\"}(nr||(nr={})),function(e){e[e.CROP=1]=\\\"CROP\\\",e[e.WHOLE=2]=\\\"WHOLE\\\"}(sr||(sr={}));const or=()=>({version:1,mode:nr.SUSPENSION});class ar{constructor(e,t,r){this._onFlush=e,this._isValidTrackId=t,this._sendCDNInfoSignal=r,this._values=or()}setHostVideoTrack(e){if(!this._isValidTrackId(e))return C.error(`setHostVideoTrack failed: videoTrackId is invalid -> ${e}`),this;const{mediaType:t,tag:r,userId:i}=ft(e);return t!==Fe.VIDEO_ONLY?(C.error(`setHostVideoTrack failed: kind of resource is not 'video' -> ${e}`),this):(this._values.host_stream_id=vt(i,r),this)}setMixLayoutMode(e){return[nr.CUSTOMIZE,nr.SUSPENSION,nr.ADAPTATION].includes(e)?(this._values.mode=e,this):(C.error(`layout mode is invalid: ${e}`),this)}_addOutputValue(e,t,r=\\\"normal\\\"){const i=this._values.output||(this._values.output={video:{normal:{width:640,height:480}}});if(\\\"cdn\\\"===e)return void(i.cdn=t);if(\\\"audio\\\"===e)return void(i.audio={bitrate:t});const n=i.video;if(\\\"normal\\\"!==r&&\\\"tiny\\\"!==r)if(\\\"backgroundColor\\\"!==r)if(\\\"exparams\\\"!==r){if(\\\"backgroundPicture\\\"===r){const e=n.backgroundPicture||(n.backgroundPicture={fillMode:ir.CROP,picture:[]});Object.assign(e,t)}}else n.exparams={renderMode:t};else n.backgroundColor=t;else{const e=n[r]||(n[r]={});Object.assign(e,t)}}setOutputVideoResolution(e){if(!Tt(e))return C.warn(\\\"setOutputVideoResolution failed: `resolution` is invalid\\\"),this;const{width:t,height:r}=Ct(e);return this._addOutputValue(\\\"video\\\",{width:t,height:r},\\\"normal\\\"),this}setOutputVideoFPS(e){if(!It(e))return C.warn(\\\"setOutputVideoFPS failed: `fps` is invalid\\\"),this;const t=Et(e);return this._addOutputValue(\\\"video\\\",{fps:t},\\\"normal\\\"),this}setOutputVideoBitrate(e){return!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(e)||e<=0?C.error(`bitrate is invalid: ${e}`):this._addOutputValue(\\\"video\\\",{bitrate:e},\\\"normal\\\"),this}setOutputTinyVideoResolution(e){if(!Tt(e))return C.warn(\\\"setOutputTinyVideoResolution failed: `resolution` is invalid\\\"),this;const{width:t,height:r}=Ct(e);return this._addOutputValue(\\\"video\\\",{width:t,height:r},\\\"tiny\\\"),this}setOutputTinyVideoFPS(e){if(!It(e))return C.warn(\\\"setOutputTinyVideoFPS failed: `fps` is invalid\\\"),this;const t=Et(e);return this._addOutputValue(\\\"video\\\",{fps:t},\\\"tiny\\\"),this}setOutputTinyVideoBitrate(e){return!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(e)||e<=0?C.error(`bitrate is invalid: ${e}`):this._addOutputValue(\\\"video\\\",{bitrate:e},\\\"tiny\\\"),this}setOutputVideoRenderMode(e){return[sr.CROP,sr.WHOLE].includes(e)?this._addOutputValue(\\\"video\\\",e,\\\"exparams\\\"):C.error(`renderMode is invalid: ${e}`),this}setOutputAudioBitrate(e){return (0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(e)&&e>0?this._addOutputValue(\\\"audio\\\",e):C.error(`bitrate is invalid: ${e}`),this}setOutputBackgroundColor(e){return/^0x[a-fA-F0-9]{6}$/.test(e)?this._addOutputValue(\\\"video\\\",e,\\\"backgroundColor\\\"):C.error(`color is invalid: ${e}`),this}addOutputBackgroundPicture(e,t,i,n,s){var o,a,c;if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isHttpUrl)(e))return C.error(`uri is invalid: ${e}`),this;if([t,i,n,s].some((e=>!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(e)||e<0||e>1)))return C.error(`some attrs of (x, y, w, h) is invalid: ${t}, ${i}, ${n}, ${s}`),this;const d=(null===(c=null===(a=null===(o=this._values.output)||void 0===o?void 0:o.video)||void 0===a?void 0:a.backgroundPicture)||void 0===c?void 0:c.picture)||[];return d.push({uri:e,w:n,h:s,x:t,y:i}),this._addOutputValue(\\\"video\\\",{picture:d},\\\"backgroundPicture\\\"),this}removeOutputBackgroundPicture(e){var t,r,i;if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isHttpUrl)(e))return C.error(`uri is invalid: ${e}`),this;let n=null===(i=null===(r=null===(t=this._values.output)||void 0===t?void 0:t.video)||void 0===r?void 0:r.backgroundPicture)||void 0===i?void 0:i.picture;return n&&(n=n.filter((t=>t.uri!==e)),this._addOutputValue(\\\"video\\\",{pictures:n},\\\"backgroundPicture\\\")),this}clearOutputBackgroundPicture(){return this._addOutputValue(\\\"video\\\",{pictures:[]},\\\"backgroundPicture\\\"),this}setOutputBackgroundPictureFillMode(e){return[ir.CROP,ir.WHOLE].includes(e)?this._addOutputValue(\\\"video\\\",{fillMode:e},\\\"backgroundPicture\\\"):C.error(`fillMode is invalid: ${e}`),this}addPublishStreamUrls(e){var t,r;const i=/^rtmp:\\\\/\\\\/.+/;if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isArray)(e)||0===e.length||e.some((e=>!i.test(e))))return C.error(`urls is invalid: ${e}`),this;const n=(null===(r=null===(t=this._values.output)||void 0===t?void 0:t.cdn)||void 0===r?void 0:r.concat())||[];let s=!1;return e.forEach((e=>{n.some((t=>t.pushurl===e))||(s=!0,n.push({pushurl:e}))})),n.length>5?(C.error(\\\"publish stream url no more than 5\\\"),this):(s&&this._addOutputValue(\\\"cdn\\\",n),this)}removePublishStreamUrls(e){var t,r;const i=/^rtmp:\\\\/\\\\/.+/;if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isArray)(e)||0===e.length||e.some((e=>!i.test(e))))return C.error(`urls is invalid: ${e}`),this;const n=(null===(r=null===(t=this._values.output)||void 0===t?void 0:t.cdn)||void 0===r?void 0:r.concat())||[];for(let t=n.length-1;t>=0;t-=1){const{pushurl:r}=n[t],i=e.indexOf(r);i>=0&&(e.splice(i,1),n.splice(t,1))}return this._addOutputValue(\\\"cdn\\\",n),this}clearPublishStreamUrls(){return this._addOutputValue(\\\"cdn\\\",[]),this}addCustomizeLayoutVideo(e,t,i,n,s){if(!this._isValidTrackId(e))return C.error(`trackId is invalid: ${e}`),this;if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(t)||!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(i))return C.error(`some attrs of (x, y) is invalid: ${t}, ${i}`),this;if([n,s].some((e=>!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(e)||e<0)))return C.error(`some attrs of (width, height) is invalid: ${n}, ${s}`),this;const{userId:o,tag:a,mediaType:c}=ft(e);if(c!==Fe.VIDEO_ONLY)return C.error(`kind of resource is not 'video': ${e}`),this;const d=vt(o,a);return(this._values.input||(this._values.input={video:[]})).video.push({user_id:o,stream_id:d,x:t,y:i,width:n,height:s}),this}removeCustomizeLayoutVideo(e){if(!this._isValidTrackId(e))return C.error(`trackId is invalid: ${e}`),this;const{userId:t,tag:r,mediaType:i}=ft(e);if(i!==Fe.VIDEO_ONLY)return C.error(`kind of resource is not 'video': ${e}`),this;const n=vt(t,r),s=this._values.input||(this._values.input={video:[]});return s.video=s.video.filter((e=>e.stream_id===n)),this}clearCustomizeLayoutVideo(){return(this._values.input||(this._values.input={video:[]})).video=[],this}flush(){var e,t,r,i;return S(this,void 0,void 0,(function*(){const n=JSON.parse(JSON.stringify(this._values)),{code:s}=yield this._onFlush(n);return s===T.SUCCESS&&((null===(t=null===(e=this._values.output)||void 0===e?void 0:e.video.normal)||void 0===t?void 0:t.width)||(null===(i=null===(r=this._values.output)||void 0===r?void 0:r.video.normal)||void 0===i?void 0:i.fps))&&this._sendCDNInfoSignal(),this._values=or(),{code:s}}))}}var cr,dr,ur,lr;!function(e){e[e.OPEN=1]=\\\"OPEN\\\",e[e.STOP=2]=\\\"STOP\\\"}(cr||(cr={})),function(e){e[e.SPREAD=0]=\\\"SPREAD\\\",e[e.NO_SPREAD=-1]=\\\"NO_SPREAD\\\"}(dr||(dr={})),function(e){e[e.AUTOMATIC=0]=\\\"AUTOMATIC\\\",e[e.MANUAL=1]=\\\"MANUAL\\\"}(ur||(ur={})),function(e){e[e.VIDEO=0]=\\\"VIDEO\\\",e[e.AUDIO=1]=\\\"AUDIO\\\"}(lr||(lr={}));const hr=()=>\\\"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\\\".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return(\\\"x\\\"===e?t:3&t|8).toString(16)}));class pr{constructor(e,t,r,i,n,s,o,a){this._context=e,this._runtime=t,this._service=r,this._initOptions=i,this._mainLivingRoom=n,this._registerPKMsgListener=s,this._onJoinedPKRoom=o,this._onLeavePKRoom=a,this._inviteTimeout=30,this._PKInfo={},this._appListener=null,this._joinedPKRooms={},this._registerPKMsgListener(this._onRecvPKMsg.bind(this)),this._mainRoomId=this._mainLivingRoom.getRoomId()}_callAppListener(e,...t){var r;const i=null===(r=this._appListener)||void 0===r?void 0:r[e];if(i)try{i(...t)}catch(e){C.error(e)}}_onInvite(e){const t=e.inviteInfo||{},{inviterRoomId:r,inviterUserId:i,extra:n}=t,s={inviterRoomId:r,inviterUserId:i};n&&Object.assign(s,{extra:n}),this._PKInfo[r]=t,this._callAppListener(\\\"onRequestJoinOtherRoom\\\",s)}_onCancelInvite(e){const{inviterRoomId:t,inviterUserId:r,extra:i}=e.inviteInfo||{},n={inviterRoomId:t,inviterUserId:r};i&&Object.assign(n,{extra:i}),delete this._PKInfo[t],this._callAppListener(\\\"onCancelRequestOtherRoom\\\",n)}_onInviteTimeout(e){}_onInviteAnswer(e){const{answerCode:t,inviteContent:r,inviteeUserAutoMix:i}=e,{inviterUserId:n,inviterRoomId:s,inviteeUserId:o,inviteeRoomId:a,extra:c}=r,d={agree:1===t,inviterRoomId:s,inviterUserId:n,inviteeRoomId:a,inviteeUserId:o};this._PKInfo[a].inviteeUserAutoMix=i,this._callAppListener(\\\"onResponseJoinOtherRoom\\\",d)}_onPKEnd(e){return S(this,void 0,void 0,(function*(){const{inviteeRoomId:t,inviterRoomId:r,userId:i}=e.inviteInfo,n=r===this._mainRoomId?t:r,s={endRoomId:n,endUserId:i};yield this.leaveOtherRoom(this._joinedPKRooms[n]),delete this._PKInfo[n],this._callAppListener(\\\"onFinishOtherRoom\\\",s)}))}_onRecvPKMsg(e){const{targetId:t,content:r,messageType:i}=e;switch(i){case Nt.PK_INVITE:this._onInvite(r);break;case Nt.PK_CANCEL_INVITE:this._onCancelInvite(r);break;case Nt.PK_INVITE_TIMEOUT:this._onInviteTimeout(r);break;case Nt.PK_INVITE_ANSWER:this._onInviteAnswer(r);break;case Nt.PK_END:this._onPKEnd(r)}}registerRoomPKEventListener(e){this._appListener=e}requestJoinOtherRoom(e,t,r){return S(this,void 0,void 0,(function*(){if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)(\\\"inviteeRoomId\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.notEmptyString,!0)||!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)(\\\"inviteeUserId\\\",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.notEmptyString,!0))return{code:T.PARAMS_ERROR};C.debug(`requestRoomPK -> inviteeRoomId: ${e}; inviteeUserId: ${t}; options: ${JSON.stringify(r||{})}`);const n=hr(),s=!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isBoolean)(null==r?void 0:r.autoMix)||(null==r?void 0:r.autoMix),o={inviteSessionId:n,inviterRoomId:this._mainRoomId,inviterUserId:this._context.getCurrentId(),inviterUserAutoMix:s,inviteeRoomId:e,inviteeUserId:t,inviteeTimeoutTime:this._inviteTimeout,extra:(null==r?void 0:r.extra)||\\\"\\\"},a={roomId:this._mainRoomId,invitedRoomId:e,invitedUserId:t,inviteTimeout:this._inviteTimeout,inviteInfo:JSON.stringify(o),inviteSessionId:n};C.debug(`requestRoomPK -> params: ${JSON.stringify(a)}`);const d=yield this._context.requestRoomPK(a);return d!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(C.error(`requestRoomPK failed: ${d}`),{code:d}):(C.debug(\\\"requestRoomPK success\\\"),this._PKInfo[e]={inviteSessionId:n,inviterRoomId:this._mainRoomId,inviterUserId:this._context.getCurrentId(),inviterUserAutoMix:s,inviteeRoomId:e},{code:T.SUCCESS})}))}cancelRequestJoinOtherRoom(e,t,r){return S(this,void 0,void 0,(function*(){if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)(\\\"inviteeRoomId\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.notEmptyString,!0)||!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)(\\\"inviteeUserId\\\",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.notEmptyString,!0))return{code:T.PARAMS_ERROR};if(!this._PKInfo[e])return C.error(`未发起过与 ${e} 房间内 ${t} 连麦的请求`),{code:T.PARAMS_ERROR};C.debug(`canceRequestJoinPK -> inviteeRoomId: ${e}; inviteeUserId: ${t}; extra: ${r}`);const n={inviterRoomId:this._mainRoomId,inviterUserId:this._context.getCurrentId(),inviteeRoomId:e,inviteeUserId:t,extra:r||\\\"\\\"},s={roomId:this._mainRoomId,invitedRoomId:e,invitedUserId:t,inviteSessionId:this._PKInfo[e].inviteSessionId,inviteInfo:JSON.stringify(n)};C.debug(`canceRequestJoinPK -> params: ${JSON.stringify(s)}`);const o=yield this._context.cancelRoomPK(s);return o!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(C.error(`canceRequestJoinPK failed: ${o}`),{code:o}):(C.debug(\\\"canceRequestJoinPK success\\\"),delete this._PKInfo[e],{code:T.SUCCESS})}))}responseJoinOtherRoom(e,t,r,n){return S(this,void 0,void 0,(function*(){if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)(\\\"inviterRoomId\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.notEmptyString,!0)||!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)(\\\"inviterUserId\\\",t,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.notEmptyString,!0))return{code:T.PARAMS_ERROR};if(!this._PKInfo[e])return C.error(`${e} 房间内的 ${t} 未发起过连麦请求`),{code:T.PARAMS_ERROR};C.debug(`responseRoomPK -> inviterRoomId: ${e}; inviterUserId: ${t}; agree: ${r}; options: ${JSON.stringify(n||{})}`);const{inviteSessionId:s,inviterUserAutoMix:o}=this._PKInfo[e],a=!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isBoolean)(null==n?void 0:n.autoMix)||(null==n?void 0:n.autoMix),d={inviteSessionId:s,inviterRoomId:e,inviterUserId:t,inviteeRoomId:this._mainRoomId,inviteeUserId:this._context.getCurrentId(),inviteeUserAutoMix:a},u=Object.assign(d,{inviterUserAutoMix:o}),l=r?Object.assign(d,{MultiRoomKey:`${e}|${this._mainRoomId}`,MultiRoomValue:JSON.stringify(u)}):d;!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isUndefined)(null==n?void 0:n.extra)&&Object.assign(l,{extra:n.extra});const m={agree:r,roomId:this._mainRoomId,inviteSessionId:s,inviteRoomId:e,inviteUserId:t,content:JSON.stringify(l),key:`${e}|${t}`,value:JSON.stringify(d)};C.debug(`responseRoomPK -> params: ${JSON.stringify(m)}`);const f=yield this._context.responseRoomPK(m);return f!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(C.error(`responseRoomPK failed: ${f}`),{code:f}):(C.debug(\\\"responseRoomPK success\\\"),this._PKInfo[e].inviteeUserAutoMix=a,{code:T.SUCCESS})}))}_quitRoomPK(e){return S(this,void 0,void 0,(function*(){const{inviterRoomId:t,inviteeRoomId:r,inviterUserId:n}=this._PKInfo[e],s={inviteeRoomId:r,inviterRoomId:t,userId:this._context.getCurrentId()},o={roomId:this._mainRoomId,endRoomId:e,sessionId:this._PKInfo[e].inviteSessionId,content:JSON.stringify(s),keys:[`${t}|${n}`]};C.debug(`quitRoomPK -> params: ${JSON.stringify(o)}`);const a=yield this._context.endRoomPK(o);return a!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(C.error(`quitRoomPK failed: ${a}`),{code:T.SIGNAL_ERROR}):(C.debug(\\\"quitRoomPK success\\\"),delete this._PKInfo[e],{code:T.SUCCESS})}))}_relaseCrtRoom(){}joinOtherRoom(e){return S(this,void 0,void 0,(function*(){if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)(\\\"roomId\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.notEmptyString,!0))return{code:T.PARAMS_ERROR};if(this._context.getConnectionStatus()!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ConnectionStatus.CONNECTED)return{code:T.SIGNAL_DISCONNECTED};if(C.debug(`joinPKRoom, roomId: ${e}`),this._joinedPKRooms[e])return{code:T.REPERT_JOIN_ROOM};const t=lr.VIDEO,{code:r,data:s}=yield this._context.joinRTCRoom(e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCMode.LIVE,t);if(r!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS)return C.error(`joinRoom failed -> code: ${r}`),{code:r};C.debug(`JoinPKRoom success -> userId: ${this._context.getCurrentId()}, roomId: ${e}, data: ${JSON.stringify(s)}`);const o=new _r(this._context,this._runtime,e,s,this._service,this._initOptions,this._relaseCrtRoom.bind(this),t,!1,!1);return this._joinedPKRooms[e]=o,this._onJoinedPKRoom(e,o),{room:o,code:T.SUCCESS,userIds:o.getRemoteUserIds(),tracks:o.getRemoteTracks()}}))}leaveOtherRoom(e,t){return S(this,void 0,void 0,(function*(){return k((()=>S(this,void 0,void 0,(function*(){const r=e.getRoomId();return C.debug(`leavePKRoom -> userId: ${this._context.getCurrentId()} , roomId: ${r}`),yield e.__destroy(!0),delete this._joinedPKRooms[r],this._onLeavePKRoom(r),this._PKInfo[r]?(t&&this._quitRoomPK(r),{code:T.SUCCESS}):{code:T.SUCCESS}}))))}))}getPKInfo(e){return this._PKInfo[e]}getJoinedPKRooms(){return this._joinedPKRooms}}class _r extends rr{constructor(e,t,r,i,n,s,o,a,c=!1,d){var l;super(e,t,r,i,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCMode.LIVE,n,s,o,c,d),this._livingType=a,this._isMainRoom=d,this._CDNUris=null,this._CDNEnable=!1,this._mcuConfigBuilder=new ar(this._onMCUConfigFlush.bind(this),this._isValidResourceId.bind(this),this._sendCDNInfoSignal.bind(this)),this._isMainRoom&&(this._roomPKHandler=new pr(e,t,n,s,this,super._registerPKMsgListener.bind(this),this._onJoinedPKRoom.bind(this),this._onLeavePKRoom.bind(this)));const h=null===(l=i.roomInfo.filter((e=>\\\"cdn_uris\\\"===e.key))[0])||void 0===l?void 0:l.value;h&&(this._CDNUris=JSON.parse(h)[0])}_isValidResourceId(e){var t;const{userId:r}=ft(e),i=!!(null===(t=this._roomResources[r])||void 0===t?void 0:t.find((t=>mt(t)===e)));let n=!1;const{code:s,roomPKHandler:o}=this.getRoomPKHandler();if(s!==T.SUCCESS||!o)return i;const a=o.getJoinedPKRooms(),c=[];return Object.values(a).map((e=>{c.push(...e.getRemoteTracks())})),n=c.some((t=>e===t.getTrackId())),i||n}getLivingType(){return this._livingType}getMCUConfigBuilder(){return this._isMainRoom?this._mcuConfigBuilder:(C.error(\\\"the `getMCUConfigBuilder` is disabled in PK room \\\"),{code:T.THE_FUNCTION_IS_DISABLED_IN_PKROOM})}_onMCUConfigFlush(e){return S(this,void 0,void 0,(function*(){const t={\\\"App-Key\\\":this._context.getAppkey(),Token:this._token,RoomId:this.getRoomId(),UserId:this._context.getCurrentId(),SessionId:this.getSessionId()},{code:r,res:i}=yield this._service.setMcuConfig(t,e);return r!==T.SUCCESS?(C.error(`set MCU config failed: ${r}`),{code:r}):(C.info(\\\"set MCU config success\\\"),i.pull_url&&(this._CDNUris=JSON.parse(i.pull_url)),{code:r,res:i})}))}__onReconnected(){const e=Object.create(null,{__onReconnected:{get:()=>super.__onReconnected}});var t,r;return S(this,void 0,void 0,(function*(){const i=yield e.__onReconnected.call(this,this._livingType);if(!i||!i.data)return;const n=i.data.roomInfo,s=null===(t=n.filter((e=>\\\"cdn_uris\\\"===e.key))[0])||void 0===t?void 0:t.value;if(!s)return;const o=JSON.parse(s);(null===(r=this._CDNUris)||void 0===r?void 0:r.enableInnerCDN)!==o.enableInnerCDN&&this._callAppListener(\\\"onCDNEnableChange\\\",o.enableInnerCDN),this._CDNUris=o}))}enableInnerCDN(e){return S(this,void 0,void 0,(function*(){if(!this._isMainRoom)return C.error(\\\"the `enableInnerCDN` is disabled in PK room \\\"),{code:T.THE_FUNCTION_IS_DISABLED_IN_PKROOM};if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isBoolean)(e))return C.error(\\\"`enable` is invalid\\\"),{code:T.PARAMS_ERROR};this._CDNEnable=e;const t={version:2,output:{inCDNModel:e?cr.OPEN:cr.STOP}},{code:r}=yield this._onMCUConfigFlush(t);if(r!==T.SUCCESS)return C.error(`enableInnerCDN failed -> code: ${r}`),{code:T.SIGNAL_ERROR};if(this._CDNUris&&this._CDNUris.broadcast!==dr.SPREAD)return C.info(\\\"enableInnerCDN succeed\\\"),{code:T.SUCCESS};const{code:i}=yield k((()=>S(this,void 0,void 0,(function*(){return this._sendCDNInfoSignal()}))));return i===T.SUCCESS?(C.info(\\\"enableInnerCDN succeed\\\"),{code:T.SUCCESS}):(C.error(`enableInnerCDN failed -> code: ${i}`),{code:i})}))}_sendCDNInfoSignal(){return S(this,void 0,void 0,(function*(){this._CDNUris=Object.assign({},this._CDNUris,{enableInnerCDN:this._CDNEnable});return(yield Promise.all([this._spreadCDNInfo(this._CDNUris),this._setRoomCDNInfo(this._CDNUris)])).every((e=>e.code===T.SUCCESS))?{code:T.SUCCESS}:{code:T.SIGNAL_ERROR}}))}_spreadCDNInfo(e){return S(this,void 0,void 0,(function*(){const t=yield this._context.setRTCCDNUris(this._roomId,Nt.TOTAL_CONTENT_RESOURCE,JSON.stringify([e]));return t!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(C.error(`spreadCDNInfo failed -> code: ${t}`),{code:T.SIGNAL_ERROR}):(C.info(\\\"spreadCDNInfo succeed\\\"),{code:T.SUCCESS})}))}_setRoomCDNInfo(e){return S(this,void 0,void 0,(function*(){const t=yield this._context.setRTCData(this._roomId,\\\"cdn_uris\\\",JSON.stringify([e]),!0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCApiType.ROOM);return t!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(C.error(`setRoomCDNInfo failed -> code: ${t}`),{code:T.SIGNAL_ERROR}):(C.info(\\\"setRoomCDNInfo succeed\\\"),{code:T.SUCCESS})}))}_resourceHandle(e,t,r){const i=Object.create(null,{_resourceHandle:{get:()=>super._resourceHandle}});var n;return S(this,void 0,void 0,(function*(){i._resourceHandle.call(this,e,t,r),e.cdn_uris&&((null===(n=this._CDNUris)||void 0===n?void 0:n.enableInnerCDN)!==e.cdn_uris[0].enableInnerCDN&&this._callAppListener(\\\"onCDNEnableChange\\\",!this.__getCDNEnable()),this._CDNUris=e.cdn_uris[0])}))}_exchangeHandle(e){var t,r,i;return S(this,void 0,void 0,(function*(){const n=yield this._service.exchange(this._getRTCReqestHeaders(),e),s=null===(r=null===(t=n.data)||void 0===t?void 0:t.urls)||void 0===r?void 0:r.pull_url;return n.code===T.SUCCESS&&s?(this._CDNUris=JSON.parse(s),(null===(i=this._CDNUris)||void 0===i?void 0:i.broadcast)===dr.SPREAD&&(this._CDNEnable=!0,this._sendCDNInfoSignal()),n):n}))}_afterChangedRole(e){const t=Lt(e),r=this._context.getCurrentId(),i=Object.keys(t);setTimeout((()=>{var n,s,o;const a=i.filter((e=>e!==r));a.length>0&&this._callAppListener(\\\"onUserJoin\\\",a);for(const e in t)e!==r&&this._resourceHandle({uris:t[e]},Nt.TOTAL_CONTENT_RESOURCE,e);(null===(n=e.roomInfo.filter((e=>\\\"cdn_uris\\\"===e.key))[0])||void 0===n?void 0:n.value)&&(null===(s=this._CDNUris)||void 0===s?void 0:s.push_mode)===ur.MANUAL&&this._callAppListener(\\\"onCDNEnableChange\\\",null===(o=this._CDNUris)||void 0===o?void 0:o.enableInnerCDN)}))}__getCDNEnable(){var e;return null===(e=this._CDNUris)||void 0===e?void 0:e.enableInnerCDN}__getCDNPushMode(){var e;return null===(e=this._CDNUris)||void 0===e?void 0:e.push_mode}_onJoinedPKRoom(e,t){const{code:r,roomPKHandler:i}=this.getRoomPKHandler();if(r===T.SUCCESS&&i){if(!i.getPKInfo(e))return;this._exchangeWithPushOtherRoom()}}_onLeavePKRoom(e){const{code:t,roomPKHandler:r}=this.getRoomPKHandler();if(t===T.SUCCESS&&r){if(!r.getPKInfo(e))return;this._exchangeWithPushOtherRoom()}}_exchangeWithPushOtherRoom(){return S(this,void 0,void 0,(function*(){if(!this.getLocalTracks().length)return;const e=yield this._createExchangeParams(this._subscribedList,!1),t=this._getPushOtherRoomsParams();t&&(e.pushOtherRooms=t);const r=yield this._exchangeHandle(e);if(r.code!==T.SUCCESS)return C.error(`reTryExchange failed: ${r.code}`),{code:r.code};const{sdp:i,resultCode:n}=r.data;if(n!==T.SUCCESS)return C.error(`exchange with pushOtherRoom failed: ${n}`),{code:n};const s=yield this._pc.setRemoteAnswer(i.sdp);return s!==T.SUCCESS?{code:s}:void 0}))}getRoomPKHandler(){return this._isMainRoom?{code:T.SUCCESS,roomPKHandler:this._roomPKHandler}:(C.error(\\\"the `getRoomPKHandler` is disabled in PK room \\\"),{code:T.THE_FUNCTION_IS_DISABLED_IN_PKROOM})}_quitAllPKRoom(){const e=this._roomPKHandler.getJoinedPKRooms();for(const t in e){const r=e[t];this._roomPKHandler.leaveOtherRoom(r)}}}class mr extends rr{constructor(e,t,r,i,n,s,o){super(e,t,r,i,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCMode.RTC,n,s,o,!1)}}const fr=()=>({\\\"Content-Type\\\":\\\"application/json;charset=UTF-8\\\",\\\"Cache-Control\\\":\\\"no-cache\\\",ClientType:`web|${yt.browser}|${yt.version}`,ClientVersion:\\\"5.3.1\\\",\\\"Client-Session-Id\\\":hr(),\\\"Request-Id\\\":Date.now().toString()});class vr{constructor(e,t,r,i=5e3){this._runtime=e,this._context=t,this._msUrl=r,this._timeout=i,this._msInNavi=[],this._failedMs=[],this._rtcFinger=void 0,this._clusterId=\\\"\\\",this._configUrl=\\\"\\\"}getNaviMS(){return this._msUrl?[this._msUrl]:this._clusterId?[`https://${this._clusterId}`]:(0===this._msInNavi.length&&(0===this._failedMs.length?this._msInNavi.push(...(e=>{var t;if(!e)return[];let r;try{r=JSON.parse(e.voipCallInfo||'{ \\\"strategy\\\": 0 }')}catch(t){return C.warn(\\\"parse `voipCallInfo` of navi failed: \\\"+e.voipCallInfo),[]}if(0===r.strategy)return[];const i=null===(t=r.callEngine)||void 0===t?void 0:t.filter((e=>4===e.engineType));if(!i||0===i.length)return[];const n=i[0],s=[];return n.mediaServer&&s.push(n.mediaServer.replace(/^(https?:\\\\/\\\\/)?/,\\\"https://\\\")),n.backupMediaServer&&n.backupMediaServer.forEach((e=>{s.push(e.replace(/^(https?:\\\\/\\\\/)?/,\\\"https://\\\"))})),s})(this._context.getNaviInfo())):(this._msInNavi.push(...this._failedMs),this._failedMs.length=0)),this._msInNavi.map((e=>e.trim())))}_request(e,t,r){return S(this,void 0,void 0,(function*(){const i=this.getNaviMS();if(0===i.length)return{code:T.NOT_OPEN_VIDEO_AUDIO_SERVER};this._rtcFinger&&(r.rtcFinger=this._rtcFinger);for(let n=0;n<i.length;n+=1){const s=`${i[n]}${e}`,o=fr();C.debug(`request -> Request-Id: ${o[\\\"Request-Id\\\"]}, url: ${s}`);const{status:a,data:c}=yield this._runtime.httpReq({url:s,body:JSON.stringify(r),headers:Object.assign(Object.assign({},o),t),method:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.HttpMethod.POST,timeout:this._timeout});if(200===a){const e=JSON.parse(c);return e.rtcFinger&&(this._rtcFinger=e.rtcFinger),e.clusterId&&(this._clusterId=e.clusterId),C.debug(`request success -> Request-Id: ${o[\\\"Request-Id\\\"]}`),{code:T.SUCCESS,data:e}}C.warn(`request failed -> Request-Id: ${o[\\\"Request-Id\\\"]}, status: ${a}, url: ${s}`),this._failedMs.push(...this._msInNavi.splice(n,1))}return{code:T.REQUEST_FAILED}}))}exchange(e,t){var r;return S(this,void 0,void 0,(function*(){const i=yield this._request(\\\"/exchange\\\",e,t);if(i.code===T.SUCCESS&&(null===(r=i.data)||void 0===r?void 0:r.resultCode)===T.SUCCESS){const e=i.data.urls;e&&(this._configUrl=e.configUrl)}return i}))}exit(e){return S(this,void 0,void 0,(function*(){const{code:t}=yield this._request(\\\"/exit\\\",e,{});return t}))}broadcastSubscribe(e,t){return this._request(\\\"/broadcast/subscribe\\\",e,t)}broadcastExit(e){return S(this,void 0,void 0,(function*(){const{code:t}=yield this._request(\\\"/broadcast/exit\\\",e,{});return{code:t}}))}setMcuConfig(e,t){return S(this,void 0,void 0,(function*(){if(!this._configUrl)return{code:T.MCU_SERVER_NOT_FOUND};const r=`${this._configUrl.replace(/^(https?:\\\\/\\\\/)?/,\\\"https://\\\")}/server/mcu/config`,i=fr();C.debug(`request -> Request-Id: ${i[\\\"Request-Id\\\"]}, url: ${r}`);const{status:n,data:s}=yield this._runtime.httpReq({url:r,headers:Object.assign(Object.assign({},i),e),body:JSON.stringify(t),method:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.HttpMethod.POST});if(200===n){C.debug(`request success -> Request-Id: ${i[\\\"Request-Id\\\"]}`);const e=JSON.parse(s);return{code:e.resultCode,res:e}}return{code:T.REQUEST_FAILED}}))}getCDNResourceInfo(e,t){return S(this,void 0,void 0,(function*(){const r=fr(),{status:i,data:n}=yield this._runtime.httpReq({url:t,headers:Object.assign(Object.assign({},r),e),method:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.HttpMethod.GET});if(200===i){const e=JSON.parse(n);return{code:e.resultCode,res:e}}return C.warn(`request failed -> Request-Id: ${r[\\\"Request-Id\\\"]}, status: ${i}, url: ${t}`),{code:T.REQUEST_FAILED}}))}}class Rr{constructor(e,t,r){this._context=e,this._rtcToken=\\\"\\\",this._liveUrl=\\\"\\\",this._subTracks=[],this._livingType=null,this._mediaType=null,this._subTiny=!1,this._fromRetry=!1,this._appListener=null,this._service=new vr(t,e,r.mediaServer)}_getReqHeaders(e){return S(this,void 0,void 0,(function*(){const t=this._context.getCurrentId(),r=t;if(!this._rtcToken){const{code:t,data:n}=yield this._context.getRTCToken(r,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCMode.LIVE,e);if(t!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS)return C.error(`getRTCToken failed: ${t}`),{code:T.SIGNAL_ERROR};this._rtcToken=n.rtcToken}return{code:T.SUCCESS,headers:{\\\"App-Key\\\":this._context.getAppkey(),UserId:t,RoomId:r,RoomType:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCMode.LIVE,Token:this._rtcToken}}}))}_clearSubscribeInfo(){var e;this._liveUrl=\\\"\\\",this._livingType=null,this._mediaType=null,this._subTiny=!1,this._subTracks.length=0,null===(e=this._pc)||void 0===e||e.destroy(),this._pc=null}_reTryExchange(){var e;return S(this,void 0,void 0,(function*(){this._fromRetry=!0;const{code:t}=yield this.subscribe(this._liveUrl,this._livingType,this._mediaType,this._subTiny);t===T.SUCCESS&&(null===(e=this._pc)||void 0===e||e.clearReTryExchangeTimer())}))}subscribe(e,t,r,i=!1){return S(this,void 0,void 0,(function*(){return k((()=>this.__subscribe(e,t,r,i)))}))}__subscribe(e,t,r,i=!1){var n;return S(this,void 0,void 0,(function*(){const s=[];if(Ot(this._context.getNaviInfo()))return{code:T.PACKAGE_ENVIRONMENT_ERROR,tracks:s};if(!this._fromRetry&&(null===(n=this._pc)||void 0===n||n.clearReTryExchangeTimer()),this._fromRetry=!1,!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isString)(e))return C.error(`liveUrl is invalid: ${e}`),{code:T.PARAMS_ERROR,tracks:s};if(![lr.AUDIO,lr.VIDEO].includes(t))return C.error(`livingType is invalid: ${t}`),{code:T.PARAMS_ERROR,tracks:s};if(![Fe.AUDIO_ONLY,Fe.VIDEO_ONLY,Fe.AUDIO_VIDEO].includes(r))return C.error(`mediaType is invalid: ${r}`),{code:T.PARAMS_ERROR,tracks:s};if(this._liveUrl&&this._liveUrl!==e)return{code:T.BROADCAST_SUB_LIST_NOT_EMPTY,tracks:s};this._pc||(this._pc=new Wt(this._reTryExchange.bind(this)),this._pc.on(Wt.__INNER_EVENT_TRACK_READY__,this._onTrackReady,this),this.registerReportListener(this._reportListener)),this._liveUrl=e;const{code:o,headers:a}=yield this._getReqHeaders(t);if(o!==T.SUCCESS)return{code:o,tracks:s};const c=`rc_mcu_${Date.now()}`,d=\\\"RongCloudRTC\\\";0===this._subTracks.length&&(this._subTracks.push(new ot(d,c),new at(d,c)),this._pc.updateSubRemoteTracks(this._subTracks.slice()));const u={sdp:yield this._pc.createOffer(!0),liveUrl:e,mediaType:r,simulcast:i?Mt.TINY:Mt.NORMAL,switchstream:!1},l=yield this._service.broadcastSubscribe(a,u);if(l.code!==T.SUCCESS)return C.error(`andience subscribe failed: ${l.code}`),{code:l.code,tracks:s};const h=l.data;if(h.resultCode!==T.SUCCESS)return C.error(`andience subscribe failed! code: ${h.resultCode}; message: ${h.message}`),{code:h.resultCode,tracks:s};C.debug(`andience subscribe success: ${e}`),this._livingType=t,this._mediaType=r,this._subTiny=i;const{sdp:p,subscribedList:_}=h,m=[];return _.forEach((e=>{const{mediaType:t}=e,r=this._subTracks[t];m.push(r),r.__innerSetRemoteMuted(!0)})),this._pc.setRemoteAnswer(p.sdp),{code:T.SUCCESS,tracks:m}}))}unsubscribe(){return S(this,void 0,void 0,(function*(){return k((()=>this.__unsubscribe()))}))}__unsubscribe(){var e;return S(this,void 0,void 0,(function*(){if(null===(e=this._pc)||void 0===e||e.clearReTryExchangeTimer(),!this._rtcToken||!this._liveUrl)return{code:T.SUCCESS};const{headers:t}=yield this._getReqHeaders(),{code:r}=yield this._service.broadcastExit(t);return r!==T.SUCCESS?C.error(`broadcast unsubscribe failed: ${r}`):C.debug(\\\"broadcast unsubscribe success\\\"),this._clearSubscribeInfo(),{code:r}}))}registerReportListener(e){var t;this._reportListener=e,null===(t=this._pc)||void 0===t||t.registerReportListener(e)}registerTrackEventListener(e){this._appListener=e}_onTrackReady(e){var t,r;const i=e.receiver.track,n=\\\"audio\\\"===i.kind?Fe.AUDIO_ONLY:Fe.VIDEO_ONLY,s=this._subTracks[n];s.__innerSetMediaStreamTrack(i);try{null===(r=null===(t=this._appListener)||void 0===t?void 0:t.onTrackReady)||void 0===r||r.call(t,s)}catch(e){C.error(e)}}}var gr,Sr;!function(e){e.RTMP=\\\"rtmp\\\",e.FLV=\\\"flv\\\",e.HLS=\\\"hls\\\"}(gr||(gr={})),function(e){e[e.NOT_HTTPS=0]=\\\"NOT_HTTPS\\\",e[e.HTTPS=1]=\\\"HTTPS\\\"}(Sr||(Sr={}));const Cr=Object.assign(Object.assign({},Ct(He.W176_H144)),{frameRate:Et(Be.FPS_15)});class Tr{constructor(e,t,r,i,n,s){this._context=e,this._runtime=t,this._initOptions=r,this._roomId=i,this._joinResData=n,this._livingType=s,this._roomAnchorList=[],this._roomRes={},this._roomAnchorRes={},this._remoteTracks={},this._appListener=null,this._subscribedList=[],this._sessionId=\\\"\\\",this._destroyed=!1,this._setInitData(),this._service=new vr(this._runtime,this._context,this._initOptions.mediaServer,this._initOptions.timeout),this._polarisReport=new Zt(this._context,this._runtime,this._roomId,this,qt.Audience),this._polarisReport.sendR1(),this._pc=new Wt(this._reTryExchange.bind(this),this._polarisReport),this._pc.on(Wt.__INNER_EVENT_TRACK_READY__,(e=>{const t=e.streams[0].id,r=e.receiver.track,i=[t,\\\"audio\\\"===r.kind?Fe.AUDIO_ONLY:Fe.VIDEO_ONLY].join(\\\"_\\\"),n=this._remoteTracks[i];n?(n.__innerSetMediaStreamTrack(r),this._callAppListener(\\\"onTrackReady\\\",n)):C.warn(\\\"cannot found RCRemoteTrack:\\\",r.id)})),this._context.onrtcdatachange=this.singalDataChange.bind(this)}_setInitData(){const{sessionId:e,remoteUserIds:t,remoteRTCUris:r,remoteMUCUris:i,remoteTracks:n,CDNUris:s}=((e,t)=>{const r=t.filter((e=>\\\"RC_RTC_SESSIONID\\\"===e.key))[0],i=r?r.value:\\\"\\\",n=t.filter((e=>\\\"RC_ANCHOR_LIST\\\"===e.key)).map((e=>JSON.parse(e.value||\\\"[]\\\")))[0],s=t.filter((e=>e.key.includes(\\\"RC_RES_\\\"))).map((e=>JSON.parse(e.value||\\\"{}\\\"))),o=s.length?JSON.parse(s[0].mcu_uris||\\\"[]\\\"):[],a=[];o.forEach((t=>{const{mediaType:r,tag:i}=t,n=r===Fe.AUDIO_ONLY?new ot(i,\\\"\\\",e):new at(i,\\\"\\\",e);a.push(n)}));const c=[],d=[];s.forEach((e=>{const t=JSON.parse(e.uris||\\\"[]\\\");c.push(...t),t.forEach((e=>{const{mediaType:t,tag:r,msid:i}=e,n=i.split(\\\"_\\\")[0],s=t===Fe.AUDIO_ONLY?new ot(r,n):new at(r,n);d.push(s)}))}));const u=t.filter((e=>\\\"RC_CDN\\\"===e.key)).map((e=>{const t=JSON.parse(e.value||\\\"[]\\\");return JSON.parse(t.cdn_uris)[0]}))[0];return{sessionId:i,remoteUserIds:n||[],remoteRTCUris:c,remoteMUCUris:o,remoteRTCTracks:d,remoteMCUTracks:a,remoteTracks:[...d,...a],CDNUris:u||{}}})(this._roomId,this._joinResData.kvEntries);this._sessionId=e,this._roomAnchorList=t,n.forEach((e=>{this._remoteTracks[e.getTrackId()]=e})),this._CDNUris=s,r.forEach((e=>{const t=e.msid.split(\\\"_\\\")[0];this._roomAnchorRes[t]?this._roomAnchorRes[t].push(e):this._roomAnchorRes[t]=[e]})),i.forEach((e=>{const{mediaType:t,tag:r}=e,i=[this._roomId,r,t].join(\\\"_\\\");this._roomRes[i]=e})),r.forEach((e=>{const t=mt(e);this._roomRes[t]=e}))}_assertRoomDestroyed(){if(this._destroyed){const e=\\\"This room has been destroyed. Please use `RCRTCClient.joinLivingRoomAsAudience` to catch another instance.\\\";return C.warn(e),T.ROOM_HAS_BEEN_DESTROYED}}singalDataChange(e,t){var r;if(t!==this._roomId)return void C.warn(`singalDataChange -> not the current room data: data roomId: ${t}, current roomId: ${this._roomId}`);C.debug(\\\"singalDataChange -> singalData:\\\",JSON.stringify(e||{}));const i=[],n=null===(r=e.filter((e=>\\\"RC_CDN\\\"===e.key))[0])||void 0===r?void 0:r.value;n&&this._diffCDNUris(JSON.parse(JSON.parse(n).cdn_uris)[0]),e.forEach((e=>{const{key:t,value:r,timestamp:n,uid:s}=e;if(-1!==t.indexOf(\\\"RC_RES_\\\")){const e=JSON.parse(r||\\\"{}\\\"),t=JSON.parse(e.mcu_uris||\\\"[]\\\"),n=JSON.parse(e.uris||\\\"[]\\\");return i.push(...t),void this._diffAnchorResource(n,s)}if(\\\"RC_ANCHOR_LIST\\\"===t){const e=JSON.parse(r||\\\"[]\\\"),{joinUserIds:t,leftUserIds:i}=this._diffAnchorList(e);t.length>0&&this._handleNewJoinedAnchor(t),i.length>0&&this._handleLeftedAnchor(i)}})),this._diffRoomResource(i)}_diffAnchorList(e){const t=e.filter((e=>this._roomAnchorList.indexOf(e)<0));return{leftUserIds:this._roomAnchorList.filter((t=>e.indexOf(t)<0)),joinUserIds:t}}_handleNewJoinedAnchor(e){this._roomAnchorList.push(...e),this._callAppListener(\\\"onAnchorJoin\\\",e)}_handleLeftedAnchor(e){return S(this,void 0,void 0,(function*(){this._roomAnchorList=this._roomAnchorList.filter((t=>!(e.indexOf(t)>-1)));const t=[];e.forEach((e=>{t.push(...this.getRemoteTracksByUserId(e)),delete this._roomAnchorRes[e]})),t.length&&(yield this.unsubscribe(t),t.forEach((e=>delete this._remoteTracks[e.getTrackId()]))),this._callAppListener(\\\"onAnchorLeave\\\",e)}))}_diffRoomResource(e){return S(this,void 0,void 0,(function*(){const t=[],r=[],i=[];e.forEach((e=>{const r=mt(e),{userId:n,tag:s,mediaType:o}=ft(r),a=[this._roomId,s,o].join(\\\"_\\\");if(!this._remoteTracks[a]){const r=o===Fe.AUDIO_ONLY?new ot(s,\\\"\\\",this._roomId):new at(s,\\\"\\\",this._roomId);t.push(r),this._remoteTracks[a]=r,this._roomRes[r.getTrackId()]=e}i.push(a)})),Object.keys(this._remoteTracks).forEach((e=>{i.indexOf(e)<0&&this._remoteTracks[e].isMCUTrack()&&r.push(this._remoteTracks[e])})),t.length>0&&this._callAppListener(\\\"onTrackPublish\\\",t),r.length>0&&this._onUserUnpublish(r,\\\"onTrackUnpublish\\\")}))}_diffAnchorResource(e,t){return S(this,void 0,void 0,(function*(){const r=this._roomAnchorRes[t]||(this._roomAnchorRes[t]=[]),{publishedList:i,unpublishedList:n,modifiedList:s}=gt(r,e);if(i.length){const e=r.map(mt),t=[],n=[];if(i.forEach((i=>{const s=mt(i),o=e.indexOf(s),{userId:a,tag:c,mediaType:d}=ft(s);o>-1?r[o]=i:r.push(i);let u=this._remoteTracks[s];this._roomRes[s]=i,u?u.isSubscribed()&&t.push(u):(u=d===Fe.AUDIO_ONLY?new ot(c,a):new at(c,a),this._remoteTracks[s]=u,n.push(u)),u.__innerSetRemoteMuted(0===i.state)})),t.length){const e=t.map((e=>e.getTrackId()));C.debug(`resub tracks -> ${JSON.stringify(e)}`);const{code:r}=yield k((()=>this._subscribeHandle(t,!0)));r!==T.SUCCESS&&C.error(`resub tracks failed -> code: ${r}, ids: ${JSON.stringify(e)}`)}this._callAppListener(\\\"onAnchorTrackPublish\\\",n)}if(n.length){const e=n.map(mt);for(let t=r.length-1;t>=0;t-=1){const i=r[t];e.includes(mt(i))&&r.splice(t,1)}const t=n.map((e=>{const t=mt(e);return this._remoteTracks[t]}));yield this._onUserUnpublish(t,\\\"onAnchorTrackUnpublish\\\")}if(s.length){const e=r.map(mt);for(let t=0;t<s.length;t++){const i=s[t],n=mt(i),o=e.indexOf(n);r[o].state=i.state;const a=this._remoteTracks[n];a.__innerSetRemoteMuted(0===i.state),a.isAudioTrack()?this._callAppListener(\\\"onAudioMuteChange\\\",a):this._callAppListener(\\\"onVideoMuteChange\\\",a)}}}))}_onUserUnpublish(e,t){return S(this,void 0,void 0,(function*(){yield this.unsubscribe(e),e.forEach((e=>{this._subscribedList=this._subscribedList.filter((t=>t.track.getTrackId()!==e.getTrackId())),delete this._roomRes[e.getTrackId()],e.__innerDestroy(),delete this._remoteTracks[e.getTrackId()]})),this._callAppListener(t,e)}))}_callAppListener(e,...t){var r;const i=null===(r=this._appListener)||void 0===r?void 0:r[e];if(i)try{i(...t)}catch(e){C.error(e)}}_reTryExchange(){return S(this,void 0,void 0,(function*(){k((()=>S(this,void 0,void 0,(function*(){var e;const{reqBody:t}=yield this._createSubscribeParams(this._subscribedList,{},!0),r=yield this._exchangeHandle(t);if(r.code!==T.SUCCESS)return C.error(`reTryExchange failed: ${r.code}`),{code:r.code};const{sdp:i,resultCode:n}=r.data;if(n!==T.SUCCESS)return C.error(`reTryExchange failed: ${n}`),{code:n};this._pc.clearReTryExchangeTimer();const s=this._subscribedList.filter((e=>e.track.isMCUTrack()));if(s.length>0){const t=s[0].track.getTrackId(),r=null===(e=this._roomRes[t])||void 0===e?void 0:e.msid,n=[this._roomId,\\\"RongCloudRTC\\\"].join(\\\"_\\\");i.sdp=i.sdp.replace(new RegExp(r,\\\"g\\\"),n)}const o=yield this._pc.setRemoteAnswer(i.sdp);return o!==T.SUCCESS?{code:o}:void 0}))))}))}_createSubscribeParams(e,t,r){return S(this,void 0,void 0,(function*(){const i=yield this._pc.createOffer(r),n={resolutionInfo:[]},s={min:0,max:0};Object.keys(t).forEach((e=>{const{mediaStream:r,tinyStream:o}=t[e];[r,o].forEach(((t,r)=>{var o;const a=1===r?[e,\\\"tiny\\\"].join(\\\"_\\\"):e;i.sdp=null===(o=i.sdp)||void 0===o?void 0:o.replace(new RegExp(t.id,\\\"g\\\"),a);const c=t.getVideoTracks()[0];if(!c)return;const d=0===r,{width:u,height:l,frameRate:h}=d?pt(c):Cr;n.resolutionInfo.push({trackId:c.id,simulcast:d?Mt.NORMAL:Mt.TINY,resolution:`${u}x${l}`});const p=Ge(u,l),_=We(h);s.min+=p.minBitrate*_,s.max+=p.maxBitrate*_}))}));return{reqBody:{sdp:i,switchstream:!1,newVersionFlag:!0,subscribeList:e.map((e=>({simulcast:e.subTiny?Mt.TINY:Mt.NORMAL,resolution:\\\"\\\",uri:this._roomRes[e.track.getTrackId()].uri})))},dynamicBitrate:s,offer:i}}))}_subscribeHandle(e,t=!1){var r;return S(this,void 0,void 0,(function*(){if(this._assertRoomDestroyed())return{code:T.ROOM_HAS_BEEN_DESTROYED};if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)(\\\"tracks\\\",e,(()=>(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isArray)(e)&&e.length>0&&e.every((e=>e instanceof st||e.track instanceof st))),!0))return{code:T.PARAMS_ERROR};const i=this._subscribedList.map((e=>Object.assign({},e))),n=e.map((e=>e instanceof st?{track:e}:e));let s=!1;const o=[];return n.forEach((e=>{const t=e.track.getTrackId();o.push(t);const r=i.find((e=>e.track.getTrackId()===t));r&&r.subTiny===e.subTiny||(r?r.subTiny=e.subTiny:i.push(e),s=!0)})),s||t?(null===(r=this._polarisReport)||void 0===r||r.sendR2(zt.SUBSCRIBE,Qt.BEGIN,o),this._updateSubListHandle(i,!0)):{code:T.SUCCESS}}))}_getReqHeaders(){const e=this._context.getCurrentId();return{\\\"App-Key\\\":this._context.getAppkey(),RoomId:e,Token:this._joinResData.token,RoomType:_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCMode.LIVE,UserId:e,\\\"Session-Id\\\":this._sessionId}}_exchangeHandle(e){return this._service.broadcastSubscribe(this._getReqHeaders(),e)}_updateSubListHandle(e,t=!1){var r;return S(this,void 0,void 0,(function*(){if(this._assertRoomDestroyed())return{code:T.ROOM_HAS_BEEN_DESTROYED};if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)(\\\"resources\\\",e,(()=>(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isArray)(e)&&e.every((e=>e instanceof st||e.track instanceof st))),!0))return{code:T.PARAMS_ERROR};let i=e.map((e=>e instanceof st?{track:e}:Object.assign({},e)));const n={};i=i.filter((e=>{const t=e.track.getTrackId();return!n[t]&&(n[t]=!0)})).map((e=>Object.assign({},e)));const s=this._subscribedList.map((e=>Object.assign({},e)));if(!t){let e=!1;if(i.forEach((t=>{const r=s.findIndex((e=>e.track===t.track));if(-1===r)return void(e=!0);s.splice(r,1)[0].subTiny!==t.subTiny&&(e=!0)})),s.length&&(e=!0),!e)return{code:T.SUCCESS}}this._pc.clearReTryExchangeTimer(),this._pc.updateSubRemoteTracks(i.map((e=>e.track)));const{reqBody:o}=yield this._createSubscribeParams(i,{},!1),a=yield this._exchangeHandle(o);if(s.length){const e=[];s.forEach((t=>{e.push(t.track.getTrackId())})),null===(r=this._pc.reportParser)||void 0===r||r.clearLatestPacketsRecv(e)}if(a.code!==T.SUCCESS)return{code:a.code};const{sdp:u,resultCode:l,message:h,subscribedList:p}=a.data;if(l!==T.SUCCESS)return C.error(\\\"change subscribe list failed:\\\",h,l),{code:l};i.forEach((e=>{const{track:t}=e;if(t.isMCUTrack()){const e=this._roomRes[t.getTrackId()].msid,{tag:r,userId:i}=ft(t.getTrackId()),n=[i,r].join(\\\"_\\\");u.sdp=u.sdp.replace(new RegExp(e,\\\"g\\\"),n)}}));const _=yield this._pc.setRemoteAnswer(u.sdp);if(_!==T.SUCCESS)return{code:_};const m=null==p?void 0:p.map((e=>`${e.msid}_${e.mediaType}`)),f=i.filter((e=>{if(e.track.isMCUTrack()){const t=this._roomRes[e.track.getTrackId()],r=`${t.msid}_${t.mediaType}`;return m.includes(r)}return null==m?void 0:m.includes(e.track.getTrackId())})),v=null==f?void 0:f.map((e=>`${e.track.getTrackId()}`)),R=i.filter((e=>!(null==v?void 0:v.includes(e.track.getTrackId()))));for(const e in this._remoteTracks){const t=f.some((t=>t.track.getTrackId()===e));this._remoteTracks[e].__innerSetSubscribed(t)}return this._subscribedList.splice(0,this._subscribedList.length,...f),R.length?{code:T.SUCCESS,failedList:R}:{code:T.SUCCESS}}))}_diffCDNUris(e){return S(this,void 0,void 0,(function*(){if(this._CDNUris.url&&!e.url)return this._callAppListener(\\\"onCDNInfoDisable\\\"),void(this._CDNUris=e);(!this._CDNUris||!this._CDNUris.url&&e.url)&&this._callAppListener(\\\"onCDNInfoEnable\\\",{resolution:`W${e.w}_H${e.h}`,fps:`FPS_${e.fps}`});const t=this._CDNUris.w&&e.w&&this._CDNUris.w!==e.w,r=this._CDNUris.h&&e.h&&this._CDNUris.h!==e.h,i=this._CDNUris.fps&&e.fps&&this._CDNUris.fps!==e.fps;(t||r||i)&&this._callAppListener(\\\"onCDNInfoChange\\\",{resolution:`W${e.w}_H${e.h}`,fps:`FPS_${e.fps}`}),this._CDNUris=e}))}_getCDNPlayUrl(e){return S(this,void 0,void 0,(function*(){const{w:t,h:r,fps:i}=e,n=this._initOptions.pullInnerCDNProtocol||gr.FLV,s=this._initOptions.pullInnerCDNUseHttps===Sr.NOT_HTTPS?Sr.NOT_HTTPS:Sr.HTTPS;if(!this._CDNUris.url)return C.error(`cdn_uris url is empty, the anchor need to open or push CDN, code: ${T.CDN_RESOURCE_IS_EMPTY}`),{code:T.CDN_RESOURCE_IS_EMPTY};const o={\\\"App-Key\\\":this._context.getAppkey(),Token:this._joinResData.token,RoomId:this.getRoomId(),UserId:this._context.getCurrentId(),SessionId:this.getSessionId()},a=[];t&&a.push(`w=${t}`),r&&a.push(`h=${r}`),i&&a.push(`fps=${i}`),a.push(`kind=${n}`),a.push(`is_https=${s}`);const c=a.join(\\\"&\\\");let d=`${this._CDNUris.url}?`;c&&(d+=c);const{code:u,res:l}=yield this._service.getCDNResourceInfo(o,d);return u!==T.SUCCESS?(C.error(`getCDNPlayUrl failed: ${u}`),{code:u}):(C.info(`getCDNPlayUrl success: ${null==l?void 0:l.data.pull_url}`),{code:u,CDNPlayUrl:null==l?void 0:l.data.pull_url})}))}getCDNPlayUrl(e,t){return S(this,void 0,void 0,(function*(){if(e&&!Tt(e))return C.error(\\\"`resolution` is invalid\\\"),{code:T.PARAMS_ERROR};if(t&&!It(t))return C.error(\\\"`fps` is invalid\\\"),{code:T.PARAMS_ERROR};const{width:r,height:i}=e?Ct(e):{width:null,height:null},n=t?Et(t):null,s={};return r&&(s.w=r),i&&(s.h=i),n&&(s.fps=n),this._getCDNPlayUrl(s)}))}subscribe(e){return S(this,void 0,void 0,(function*(){return k((()=>this._subscribeHandle(e,!1)))}))}__unsubscribe(e){var t;return S(this,void 0,void 0,(function*(){if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)(\\\"tracks\\\",e,(()=>(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isArray)(e)&&e.length>0&&e.every((e=>e instanceof st))),!0))return C.error(`unsubscribe failed, tracks is invalid -> roomId: ${this._roomId}`),{code:T.PARAMS_ERROR};const r=this._subscribedList.map((e=>Object.assign({},e))).filter((t=>!e.includes(t.track)));return null===(t=this._polarisReport)||void 0===t||t.sendR2(zt.SUBSCRIBE,Qt.END,e.map((e=>e.getTrackId()))),this._updateSubListHandle(r,!1)}))}unsubscribe(e){return S(this,void 0,void 0,(function*(){return k((()=>this.__unsubscribe(e)))}))}__destroy(e){var t;return S(this,void 0,void 0,(function*(){this._destroyed||(this._destroyed=!0,null===(t=this._audioLevelReport)||void 0===t||t.clearAudioLevelReportTimer(),e&&(yield this._context.quitLivingRoomAsAudience(this._roomId)),yield this._service.broadcastExit(this._getReqHeaders()),this._pc.destroy(),this._polarisReport=null,this._context.onrtcdatachange=()=>{})}))}getRemoteTrack(e){return this._remoteTracks[e]}__getPC(){return this._pc}getLocalTrack(e){return{}}__onReconnected(){return S(this,void 0,void 0,(function*(){const{code:e}=yield this._context.joinLivingRoomAsAudience(this._roomId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCMode.LIVE);e!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS&&C.error(\\\"join living room error when on reconnected\\\")}))}registerRoomEventListener(e){this._appListener=e}onAudioLevelChange(e,t){var r;null===(r=this._audioLevelReport)||void 0===r||r.clearAudioLevelReportTimer(),this._audioLevelReport=new er(this),this._audioLevelReport.onAudioLevelChange(e,t||1e3)}registerReportListener(e){var t;null===(t=this._pc)||void 0===t||t.registerReportListener(e)}getRoomId(){return this._roomId}getCrtUserId(){return this._context.getCurrentId()}getSessionId(){return this._sessionId}getRemoteUserIds(){return this._roomAnchorList}getRemoteTracksByUserId(e){const t=[];for(const r in this._remoteTracks){const i=this._remoteTracks[r];i.getUserId()===e&&t.push(i)}return t}getRemoteTracks(){const e=[],t=[];for(const e in this._remoteTracks){if(2===t.length)break;const r=this._remoteTracks[e];r.isMCUTrack()&&t.push(r)}return this._roomAnchorList.forEach((t=>{e.push(...this.getRemoteTracksByUserId(t))})),[...t,...e]}getRemoteRTCTracks(){const e=[];for(const t in this._remoteTracks){const r=this._remoteTracks[t];r.isMCUTrack()||e.push(r)}return e}getRemoteMCUTracks(){const e=[];for(const t in this._remoteTracks){const r=this._remoteTracks[t];r.isMCUTrack()&&e.push(r)}return e}getCDNInfo(){return this._CDNUris.w?{resolution:`W${this._CDNUris.w}_H${this._CDNUris.h}`,fps:`FPS_${this._CDNUris.fps}`,CDNEnable:this._CDNUris.enableInnerCDN}:{CDNEnable:!1}}}const Ir=(e,t)=>{const r=[];return r[0]=(null==t?void 0:t.withoutAudio)?void 0:e.getAudioTracks()[0],r[1]=(null==t?void 0:t.withoutVideo)?void 0:e.getVideoTracks()[0],r};class Er{constructor(e,t,r){this._context=e,this._runtime=t,this._options=r,this._crtRoom=null,this._audience=null,this._crtAudienceLivingRoom=null,Kt.setSdpSemantics(r.sdpSemantics||\\\"plan-b\\\"),this._service=new vr(this._runtime,this._context,this._options.mediaServer,this._options.timeout),this._context.onconnectionstatechange=this._onIMStatusChange.bind(this),this._context.ondisconnect=this._onIMDisconnect.bind(this),this._context.ondestroy=this._onIMUninit.bind(this),this._context.onmessage=this._handleMessage.bind(this)}_handleMessage(e){var t;if(e.conversationType!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ConversationType.RTC_ROOM)return!1;if(this._crtRoom instanceof _r){this._getJoinedPKRoomList().forEach((t=>{t.__parseInnerMessage(e)}))}return null===(t=this._crtRoom)||void 0===t||t.__parseInnerMessage(e),!0}_getJoinedPKRoomList(){const{code:e,roomPKHandler:t}=this._crtRoom.getRoomPKHandler();if(e===T.SUCCESS&&t){const e=t.getJoinedPKRooms()||{};return Object.values(e)}return[]}getCurrentId(){return this._context.getCurrentId()}joinRTCRoom(e,t){return k((()=>this._joinRTCRoom(e,t)))}_joinRTCRoom(e,t){return S(this,void 0,void 0,(function*(){if(Ot(this._context.getNaviInfo()))return{code:T.PACKAGE_ENVIRONMENT_ERROR};if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)(\\\"roomId\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.notEmptyString,!0))return{code:T.PARAMS_ERROR};if(this._crtRoom)return{code:T.REPERT_JOIN_ROOM};if(this._context.getConnectionStatus()!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ConnectionStatus.CONNECTED)return{code:T.SIGNAL_DISCONNECTED};if(!this._service.getNaviMS().length)return{code:T.NOT_OPEN_VIDEO_AUDIO_SERVER};C.debug(`joinRoom -> roomId: ${e}; joinType: ${t||_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCJoinType.KICK}`);const{code:r,data:s}=yield this._context.joinRTCRoom(e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCMode.RTC,void 0,t);if(r!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS){C.error(`joinRoom failed -> code: ${r}`);return{code:r===I.JOIN_REFUSED?T.SIGNAL_JOIN_RTC_ROOM_REFUSED:r}}C.debug(`joinRoom success -> userId: ${this._context.getCurrentId()}, roomId: ${e}, data: ${JSON.stringify(s)}`);const o=new mr(this._context,this._runtime,e,s,this._service,this._options,this._releaseCrtRoomObj.bind(this));return this._crtRoom=o,{room:o,code:T.SUCCESS,userIds:o.getRemoteUserIds(),tracks:o.getRemoteTracks()}}))}joinLivingRoom(e,t){return k((()=>this._joinLivingRoom(e,t)))}_joinLivingRoom(e,t){return S(this,void 0,void 0,(function*(){if(Ot(this._context.getNaviInfo()))return{code:T.PACKAGE_ENVIRONMENT_ERROR};if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)(\\\"roomId\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.notEmptyString,!0)||!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)(\\\"livingType\\\",t,(e=>e===lr.AUDIO||e===lr.VIDEO)))return{code:T.PARAMS_ERROR};if(this._crtRoom)return{code:T.REPERT_JOIN_ROOM};if(this._context.getConnectionStatus()!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ConnectionStatus.CONNECTED)return{code:T.SIGNAL_DISCONNECTED};if(!this._service.getNaviMS().length)return{code:T.NOT_OPEN_VIDEO_AUDIO_SERVER};C.debug(`joinRoom, roomId: ${e}`);const{code:r,data:s}=yield this._context.joinRTCRoom(e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCMode.LIVE,t);if(r!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS)return C.error(`joinRoom failed -> code: ${r}`),{code:r};C.debug(`JoinRoom success -> userId: ${this._context.getCurrentId()}, roomId: ${e}, data: ${JSON.stringify(s)}`);const o=new _r(this._context,this._runtime,e,s,this._service,this._options,this._releaseCrtRoomObj.bind(this),t,!1,!0);this._crtRoom=o;const a={room:o,code:T.SUCCESS,userIds:o.getRemoteUserIds(),tracks:o.getRemoteTracks()};return o.__getCDNPushMode()===ur.MANUAL&&Object.assign(a,{CDNEnable:o.__getCDNEnable()}),a}))}getAudienceClient(){return this._audience||(this._audience=new Rr(this._context,this._runtime,this._options)),this._audience}_onIMStatusChange(e){if(C.debug(`signal server connection state change: ${e}`),e===_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ConnectionStatus.CONNECTED){if(this._crtRoom instanceof _r){this._getJoinedPKRoomList().forEach((e=>{e.__onReconnected()}))}this._crtRoom&&this._crtRoom.__onReconnected()}}_onIMDisconnect(){C.debug(\\\"TODO -> on IM disconnect\\\")}_onIMUninit(){C.debug(\\\"TODO -> on IM client ondestroy\\\")}leaveRoom(e){return k((()=>this._leaveRoom(e)))}_leaveRoom(e){return S(this,void 0,void 0,(function*(){return this._crtRoom?(yield this._crtRoom.__destroy(!0),C.debug(`quitRTCRoom -> userId: ${this._context.getCurrentId()} , roomId: ${this._crtRoom.getRoomId()}`),this._crtRoom=null,{code:T.SUCCESS}):{code:T.SUCCESS}}))}_releaseCrtRoomObj(){this._crtRoom=null}_getMediaStream(e,t=\\\"getUserMedia\\\"){return S(this,void 0,void 0,(function*(){try{const r=yield navigator.mediaDevices[t](e);return{code:T.SUCCESS,stream:r}}catch(e){if(\\\"Permission denied\\\"===e.message)return{code:T.PERMISSION_DENIED};C.error(`get user media failed -> ${e.message}`)}return{code:\\\"getUserMedia\\\"===t?T.GET_USER_MEDIA_FAILED:T.GET_DISPLAY_MEDIA_FAILED}}))}createMicrophoneAudioTrack(e=\\\"RongCloudRTC\\\",t){return S(this,void 0,void 0,(function*(){if(!ut(e))return{code:T.INVALID_TAGS};const r=this._context.getCurrentId();if(!r)return{code:T.INVALID_USER_ID};const{stream:i,code:n}=yield this._getMediaStream({audio:{deviceId:null==t?void 0:t.micphoneId,sampleRate:null==t?void 0:t.sampleRate}});if(n!==T.SUCCESS)return{code:n};const s=i.getAudioTracks()[0];return{code:n,track:new rt(e,r,s)}}))}createCameraVideoTrack(e=\\\"RongCloudRTC\\\",t){return S(this,void 0,void 0,(function*(){if(!ut(e))return{code:T.INVALID_TAGS};const r=this._context.getCurrentId();if(!r)return{code:T.INVALID_USER_ID};const i=Tt(null==t?void 0:t.resolution)?t.resolution:He.W640_H480,{width:n,height:s}=Ct(i),{stream:o,code:a}=yield this._getMediaStream({video:{deviceId:null==t?void 0:t.cameraId,frameRate:Et((null==t?void 0:t.frameRate)||Be.FPS_15),width:n,height:s,facingMode:null==t?void 0:t.faceMode}});if(a!==T.SUCCESS)return{code:a};const c=o.getVideoTracks()[0];return{code:a,track:new it(e,r,c)}}))}createMicrophoneAndCameraTracks(e=\\\"RongCloudRTC\\\",t){var r,i,n,s,o,a;return S(this,void 0,void 0,(function*(){const c=[];if(!ut(e))return{code:T.INVALID_TAGS,tracks:c};const d=this._context.getCurrentId();if(!d)return{code:T.INVALID_USER_ID,tracks:c};const u=Tt(null===(r=null==t?void 0:t.video)||void 0===r?void 0:r.resolution)?t.video.resolution:He.W640_H480,{width:l,height:h}=Ct(u),{stream:p,code:_}=yield this._getMediaStream({video:{deviceId:null===(i=null==t?void 0:t.video)||void 0===i?void 0:i.cameraId,frameRate:Et((null===(n=null==t?void 0:t.video)||void 0===n?void 0:n.frameRate)||Be.FPS_15),width:l,height:h,facingMode:null===(s=null==t?void 0:t.video)||void 0===s?void 0:s.faceMode},audio:{deviceId:null===(o=null==t?void 0:t.audio)||void 0===o?void 0:o.micphoneId,sampleRate:null===(a=null==t?void 0:t.audio)||void 0===a?void 0:a.sampleRate}});return _!==T.SUCCESS||p.getTracks().forEach((t=>{\\\"video\\\"===t.kind?c.push(new it(e,d,t)):c.unshift(new rt(e,d,t))})),{code:_,tracks:c}}))}createScreenVideoTrack(e=\\\"screenshare\\\",t){return S(this,void 0,void 0,(function*(){if(!ut(e))return{code:T.INVALID_TAGS};const r=this._context.getCurrentId();if(!r)return{code:T.INVALID_USER_ID};if(!bt())return{code:T.BROWSER_NOT_SUPPORT};const i=/Electron/.test(navigator.userAgent);if(i&&!(null==t?void 0:t.chromeMediaSourceId))return{code:T.PARAMS_ERROR};const n=Tt(null==t?void 0:t.resolution)?t.resolution:He.W1280_H720,{width:s,height:o}=Ct(n),a=i?{mandatory:{chromeMediaSourceId:t.chromeMediaSourceId,chromeMediaSource:\\\"desktop\\\",minWidth:s,maxWidth:s,minHeight:o,maxHeight:o}}:{frameRate:Et((null==t?void 0:t.frameRate)||Be.FPS_15),width:s,height:o},{stream:c,code:d}=yield this._getMediaStream({video:a,audio:!1},i?\\\"getUserMedia\\\":\\\"getDisplayMedia\\\");if(d!==T.SUCCESS)return{code:d};const u=c.getVideoTracks()[0];return{code:d,track:new nt(e,r,u)}}))}createLocalAudioTrack(e,t){return S(this,void 0,void 0,(function*(){if(!ut(e))return{code:T.INVALID_TAGS};if(!t||\\\"[object MediaStreamTrack]\\\"!==t.toString()||\\\"audio\\\"!==t.kind)return{code:T.CREATE_CUSTOM_TRACK_FAILED};const r=this._context.getCurrentId();return r?{code:T.SUCCESS,track:new Qe(e,r,t)}:{code:T.INVALID_USER_ID}}))}createLocalVideoTrack(e,t){return S(this,void 0,void 0,(function*(){if(!ut(e))return{code:T.INVALID_TAGS};if(!t||\\\"[object MediaStreamTrack]\\\"!==t.toString()||\\\"video\\\"!==t.kind)return{code:T.CREATE_CUSTOM_TRACK_FAILED};const r=this._context.getCurrentId();return r?{code:T.SUCCESS,track:new Xe(e,r,t)}:{code:T.INVALID_USER_ID}}))}createLocalFileTracks(e,t,r){return S(this,void 0,void 0,(function*(){if(!ut(e))return{code:T.INVALID_TAGS,tracks:[]};if(!kt())return{code:T.BROWSER_NOT_SUPPORT,tracks:[]};const i=t instanceof File?URL.createObjectURL(t):t;if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isHttpUrl)(i)&&!/^blob:/.test(i))return C.warn(`createLocalFileTracks failed: params error -> url: ${i}`),{code:T.PARAMS_ERROR,tracks:[]};const n=this._context.getCurrentId();return n?new Promise((t=>{const s=document.createElement(\\\"video\\\");(null==r?void 0:r.withoutAudio)&&(s.muted=!0),s.onloadedmetadata=()=>{const o=[];let a;try{const e=s.mozCaptureStream?\\\"mozCaptureStream\\\":\\\"captureStream\\\";a=s[e]()}catch(e){C.error(`create RCLocalFileTrack failed, captureSteam error. -> url: ${i}`),C.error(e),t({code:T.CREATE_FILE_TRACK_FAILED,tracks:o})}const[c,d]=Ir(a,r);c&&o.push(new tt(e,n,c,s)),d&&o.push(new et(e,n,d,s)),0===o.length&&(s.pause(),s.src=\\\"\\\"),s.onerror=null,t({code:T.SUCCESS,tracks:o})},s.onerror=()=>{C.error(`create RCLocalFileTrack failed -> url: ${i}`),t({code:T.CREATE_FILE_TRACK_FAILED,tracks:[]})},s.src=i,s.loop=!0,s.play()})):{code:T.INVALID_USER_ID,tracks:[]}}))}createLocalTracks(e,t,r){return S(this,void 0,void 0,(function*(){const i=[];if(!ut(e))return{code:T.INVALID_TAGS,tracks:i};if(!(t instanceof MediaStream))return{code:T.PARAMS_ERROR,tracks:i};const n=this._context.getCurrentId();if(!n)return{code:T.INVALID_USER_ID,tracks:i};const[s,o]=Ir(t,r);return s&&i.push(new Qe(e,n,s)),o&&i.push(new Xe(e,n,o)),{code:T.SUCCESS,tracks:i}}))}joinLivingRoomAsAudience(e,t){return S(this,void 0,void 0,(function*(){if(Ot(this._context.getNaviInfo()))return{code:T.PACKAGE_ENVIRONMENT_ERROR};if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)(\\\"roomId\\\",e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.notEmptyString,!0)||!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)(\\\"livingType\\\",t,(e=>e===lr.AUDIO||e===lr.VIDEO)))return{code:T.PARAMS_ERROR};if(this._crtAudienceLivingRoom)return{code:T.REPERT_JOIN_ROOM};if(!this._service.getNaviMS().length)return{code:T.NOT_OPEN_VIDEO_AUDIO_SERVER};const{code:r,data:n}=yield this._context.joinLivingRoomAsAudience(e,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCMode.LIVE,t);if(r!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS)return C.error(\\\"audienceJoinLivingRoomError:\\\",r),{code:T.SIGNAL_AUDIENCE_JOIN_ROOM_FAILED};C.info(`joinLivingRoomAsAudience success, room data: ${JSON.stringify(n)}`);const s=new Tr(this._context,this._runtime,this._options,e,n,t);return this._crtAudienceLivingRoom=s,{room:s,code:T.SUCCESS,userIds:s.getRemoteUserIds(),RTCTracks:s.getRemoteRTCTracks(),MCUTracks:s.getRemoteMCUTracks(),CDNUris:s.getCDNInfo()}}))}leaveLivingRoomAsAudience(e){return S(this,void 0,void 0,(function*(){return this._crtAudienceLivingRoom?this._crtAudienceLivingRoom!==e?{code:T.PARAMS_ERROR}:(yield this._crtAudienceLivingRoom.__destroy(!0),this._crtAudienceLivingRoom=null,{code:T.SUCCESS}):{code:T.SUCCESS}}))}upgradeToAnchorRoom(e){return S(this,void 0,void 0,(function*(){if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)(\\\"room._roomId\\\",e._roomId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.notEmptyString,!0))return{code:T.PARAMS_ERROR};if(this._crtRoom)return{code:T.REPERT_JOIN_ROOM};const{code:t,data:r}=yield this._context.rtcIdentityChange(e._roomId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCIdentityChangeType.ViewerToAnchor,e._livingType);if(t!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS)return C.error(\\\"change room identity error\\\",t),{code:T.SIGNAL_ROOM_CHANGE_IDENTITY_FAILED};yield this._crtAudienceLivingRoom.__destroy(!1);const n=new _r(this._context,this._runtime,e._roomId,r,this._service,this._options,this._releaseCrtRoomObj.bind(this),e._livingType,!0,!0);return this._crtRoom=n,this._crtAudienceLivingRoom=null,{room:n,code:T.SUCCESS,userIds:e.getRemoteUserIds(),tracks:n.getRemoteTracks()}}))}downgradeToAudienceRoom(e){return S(this,void 0,void 0,(function*(){if(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.validate)(\\\"room._roomId\\\",e._roomId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.notEmptyString,!0))return{code:T.PARAMS_ERROR};if(this._crtAudienceLivingRoom)return{code:T.REPERT_JOIN_ROOM};const{code:t,data:r}=yield this._context.rtcIdentityChange(e._roomId,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.RTCIdentityChangeType.AnchorToViewer,e.getLivingType());if(t!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS)return C.error(\\\"change room identity error\\\",t),{code:T.SIGNAL_ROOM_CHANGE_IDENTITY_FAILED};C.info(`downgradeToAudienceRoom success, room data: ${JSON.stringify(r)}`);const n=new Tr(this._context,this._runtime,this._options,e._roomId,r,e.getLivingType());return this._crtAudienceLivingRoom=n,this._crtRoom.__destroy(!1),this._crtRoom=null,{room:n,code:T.SUCCESS,userIds:n.getRemoteUserIds(),RTCTracks:n.getRemoteRTCTracks(),MCUTracks:n.getRemoteMCUTracks(),CDNUris:n.getCDNInfo()}}))}getJoinedRoomInfo(){return S(this,void 0,void 0,(function*(){const{code:e,data:t}=yield this._context.getRTCJoinedUserInfo(this._context.getCurrentId());return e!==_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.ErrorCode.SUCCESS?(C.error(\\\"getJoinedUserInfo error\\\",e),{code:T.SIGNAL_ROOM_CHANGE_IDENTITY_FAILED}):{code:T.SUCCESS,data:t}}))}}var yr;!function(e){e[e.SERVER_KICK=1]=\\\"SERVER_KICK\\\",e[e.OTHER_KICK=2]=\\\"OTHER_KICK\\\"}(yr||(yr={}));const kr={tag:\\\"RCRTC\\\",verify:e=>\\\"browser\\\"!==e.tag?(C.error(`RCRTC Plugin is not support the runtime '${e.tag}'`),!1):lt?(_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.VersionManage.add(\\\"plugin-rtc\\\",\\\"5.3.1\\\"),!!_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.VersionManage.validEngine(\\\"5.1.0\\\")||(C.error(`The current engine version '${_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.VersionManage.getInfo().engine}' error, plugin-rtc required engine version at least '5.1.0'.`),!1)):(C.error(\\\"Please use the https protocol or use `http://localhost` to open the page!\\\"),!1),setup:(e,t,i={})=>(C.setLogLevel(i.logLevel),C.setLogStdout(i.logStdout),C.warn(\\\"RCRTC Version: 5.3.1, Commit: e1af0f5ccb06a0084c94e1219d8af54c9793c06b\\\"),C.warn(`browserInfo.browser -> ${yt.browser}`),C.warn(`browserInfo.supportsUnifiedPlan -> ${yt.supportsUnifiedPlan}`),C.warn(`browserInfo.version -> ${yt.version}`),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.mediaServer\\\",i.mediaServer,(e=>!(!(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isHttpUrl)(e)||\\\"https:\\\"===location.protocol&&!/^https/.test(e)))),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.timeout\\\",i.timeout,(e=>(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(e)&&e>=5e3&&e<=3e4)),(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.assert)(\\\"options.pingGap\\\",i.pingGap,(e=>(0,_rongcloud_engine__WEBPACK_IMPORTED_MODULE_0__.isNumber)(e)&&e>=3e3&&e<=1e4)),new Er(e,t,i))},br={DEFAULT:\\\"RongCloudRTC\\\"},Pr={transResolution:Ct,transFrameRate:Et,parseTrackId:ft,ifSupportLocalFileTrack:kt,ifSupportScreenShare:bt};\\n\\n\\n//# sourceURL=webpack://@rongcloud/rcvoiceroomlib-v1/./node_modules/@rongcloud/plugin-rtc/dist/index.esm.js?\");\n\n/***/ }),\n\n/***/ \"./node_modules/events/events.js\":\n/*!***************************************!*\\\n  !*** ./node_modules/events/events.js ***!\n  \\***************************************/\n/***/ ((module) => {\n\neval(\"// Copyright Joyent, Inc. and other Node contributors.\\n//\\n// Permission is hereby granted, free of charge, to any person obtaining a\\n// copy of this software and associated documentation files (the\\n// \\\"Software\\\"), to deal in the Software without restriction, including\\n// without limitation the rights to use, copy, modify, merge, publish,\\n// distribute, sublicense, and/or sell copies of the Software, and to permit\\n// persons to whom the Software is furnished to do so, subject to the\\n// following conditions:\\n//\\n// The above copyright notice and this permission notice shall be included\\n// in all copies or substantial portions of the Software.\\n//\\n// THE SOFTWARE IS PROVIDED \\\"AS IS\\\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\\n\\n\\n\\nvar R = typeof Reflect === 'object' ? Reflect : null\\nvar ReflectApply = R && typeof R.apply === 'function'\\n  ? R.apply\\n  : function ReflectApply(target, receiver, args) {\\n    return Function.prototype.apply.call(target, receiver, args);\\n  }\\n\\nvar ReflectOwnKeys\\nif (R && typeof R.ownKeys === 'function') {\\n  ReflectOwnKeys = R.ownKeys\\n} else if (Object.getOwnPropertySymbols) {\\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\\n    return Object.getOwnPropertyNames(target)\\n      .concat(Object.getOwnPropertySymbols(target));\\n  };\\n} else {\\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\\n    return Object.getOwnPropertyNames(target);\\n  };\\n}\\n\\nfunction ProcessEmitWarning(warning) {\\n  if (console && console.warn) console.warn(warning);\\n}\\n\\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\\n  return value !== value;\\n}\\n\\nfunction EventEmitter() {\\n  EventEmitter.init.call(this);\\n}\\nmodule.exports = EventEmitter;\\nmodule.exports.once = once;\\n\\n// Backwards-compat with node 0.10.x\\nEventEmitter.EventEmitter = EventEmitter;\\n\\nEventEmitter.prototype._events = undefined;\\nEventEmitter.prototype._eventsCount = 0;\\nEventEmitter.prototype._maxListeners = undefined;\\n\\n// By default EventEmitters will print a warning if more than 10 listeners are\\n// added to it. This is a useful default which helps finding memory leaks.\\nvar defaultMaxListeners = 10;\\n\\nfunction checkListener(listener) {\\n  if (typeof listener !== 'function') {\\n    throw new TypeError('The \\\"listener\\\" argument must be of type Function. Received type ' + typeof listener);\\n  }\\n}\\n\\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\\n  enumerable: true,\\n  get: function() {\\n    return defaultMaxListeners;\\n  },\\n  set: function(arg) {\\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\\n      throw new RangeError('The value of \\\"defaultMaxListeners\\\" is out of range. It must be a non-negative number. Received ' + arg + '.');\\n    }\\n    defaultMaxListeners = arg;\\n  }\\n});\\n\\nEventEmitter.init = function() {\\n\\n  if (this._events === undefined ||\\n      this._events === Object.getPrototypeOf(this)._events) {\\n    this._events = Object.create(null);\\n    this._eventsCount = 0;\\n  }\\n\\n  this._maxListeners = this._maxListeners || undefined;\\n};\\n\\n// Obviously not all Emitters should be limited to 10. This function allows\\n// that to be increased. Set to zero for unlimited.\\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\\n    throw new RangeError('The value of \\\"n\\\" is out of range. It must be a non-negative number. Received ' + n + '.');\\n  }\\n  this._maxListeners = n;\\n  return this;\\n};\\n\\nfunction _getMaxListeners(that) {\\n  if (that._maxListeners === undefined)\\n    return EventEmitter.defaultMaxListeners;\\n  return that._maxListeners;\\n}\\n\\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\\n  return _getMaxListeners(this);\\n};\\n\\nEventEmitter.prototype.emit = function emit(type) {\\n  var args = [];\\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\\n  var doError = (type === 'error');\\n\\n  var events = this._events;\\n  if (events !== undefined)\\n    doError = (doError && events.error === undefined);\\n  else if (!doError)\\n    return false;\\n\\n  // If there is no 'error' event listener then throw.\\n  if (doError) {\\n    var er;\\n    if (args.length > 0)\\n      er = args[0];\\n    if (er instanceof Error) {\\n      // Note: The comments on the `throw` lines are intentional, they show\\n      // up in Node's output if this results in an unhandled exception.\\n      throw er; // Unhandled 'error' event\\n    }\\n    // At least give some kind of context to the user\\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\\n    err.context = er;\\n    throw err; // Unhandled 'error' event\\n  }\\n\\n  var handler = events[type];\\n\\n  if (handler === undefined)\\n    return false;\\n\\n  if (typeof handler === 'function') {\\n    ReflectApply(handler, this, args);\\n  } else {\\n    var len = handler.length;\\n    var listeners = arrayClone(handler, len);\\n    for (var i = 0; i < len; ++i)\\n      ReflectApply(listeners[i], this, args);\\n  }\\n\\n  return true;\\n};\\n\\nfunction _addListener(target, type, listener, prepend) {\\n  var m;\\n  var events;\\n  var existing;\\n\\n  checkListener(listener);\\n\\n  events = target._events;\\n  if (events === undefined) {\\n    events = target._events = Object.create(null);\\n    target._eventsCount = 0;\\n  } else {\\n    // To avoid recursion in the case that type === \\\"newListener\\\"! Before\\n    // adding it to the listeners, first emit \\\"newListener\\\".\\n    if (events.newListener !== undefined) {\\n      target.emit('newListener', type,\\n                  listener.listener ? listener.listener : listener);\\n\\n      // Re-assign `events` because a newListener handler could have caused the\\n      // this._events to be assigned to a new object\\n      events = target._events;\\n    }\\n    existing = events[type];\\n  }\\n\\n  if (existing === undefined) {\\n    // Optimize the case of one listener. Don't need the extra array object.\\n    existing = events[type] = listener;\\n    ++target._eventsCount;\\n  } else {\\n    if (typeof existing === 'function') {\\n      // Adding the second element, need to change to array.\\n      existing = events[type] =\\n        prepend ? [listener, existing] : [existing, listener];\\n      // If we've already got an array, just append.\\n    } else if (prepend) {\\n      existing.unshift(listener);\\n    } else {\\n      existing.push(listener);\\n    }\\n\\n    // Check for listener leak\\n    m = _getMaxListeners(target);\\n    if (m > 0 && existing.length > m && !existing.warned) {\\n      existing.warned = true;\\n      // No error code for this since it is a Warning\\n      // eslint-disable-next-line no-restricted-syntax\\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\\n                          existing.length + ' ' + String(type) + ' listeners ' +\\n                          'added. Use emitter.setMaxListeners() to ' +\\n                          'increase limit');\\n      w.name = 'MaxListenersExceededWarning';\\n      w.emitter = target;\\n      w.type = type;\\n      w.count = existing.length;\\n      ProcessEmitWarning(w);\\n    }\\n  }\\n\\n  return target;\\n}\\n\\nEventEmitter.prototype.addListener = function addListener(type, listener) {\\n  return _addListener(this, type, listener, false);\\n};\\n\\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\\n\\nEventEmitter.prototype.prependListener =\\n    function prependListener(type, listener) {\\n      return _addListener(this, type, listener, true);\\n    };\\n\\nfunction onceWrapper() {\\n  if (!this.fired) {\\n    this.target.removeListener(this.type, this.wrapFn);\\n    this.fired = true;\\n    if (arguments.length === 0)\\n      return this.listener.call(this.target);\\n    return this.listener.apply(this.target, arguments);\\n  }\\n}\\n\\nfunction _onceWrap(target, type, listener) {\\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\\n  var wrapped = onceWrapper.bind(state);\\n  wrapped.listener = listener;\\n  state.wrapFn = wrapped;\\n  return wrapped;\\n}\\n\\nEventEmitter.prototype.once = function once(type, listener) {\\n  checkListener(listener);\\n  this.on(type, _onceWrap(this, type, listener));\\n  return this;\\n};\\n\\nEventEmitter.prototype.prependOnceListener =\\n    function prependOnceListener(type, listener) {\\n      checkListener(listener);\\n      this.prependListener(type, _onceWrap(this, type, listener));\\n      return this;\\n    };\\n\\n// Emits a 'removeListener' event if and only if the listener was removed.\\nEventEmitter.prototype.removeListener =\\n    function removeListener(type, listener) {\\n      var list, events, position, i, originalListener;\\n\\n      checkListener(listener);\\n\\n      events = this._events;\\n      if (events === undefined)\\n        return this;\\n\\n      list = events[type];\\n      if (list === undefined)\\n        return this;\\n\\n      if (list === listener || list.listener === listener) {\\n        if (--this._eventsCount === 0)\\n          this._events = Object.create(null);\\n        else {\\n          delete events[type];\\n          if (events.removeListener)\\n            this.emit('removeListener', type, list.listener || listener);\\n        }\\n      } else if (typeof list !== 'function') {\\n        position = -1;\\n\\n        for (i = list.length - 1; i >= 0; i--) {\\n          if (list[i] === listener || list[i].listener === listener) {\\n            originalListener = list[i].listener;\\n            position = i;\\n            break;\\n          }\\n        }\\n\\n        if (position < 0)\\n          return this;\\n\\n        if (position === 0)\\n          list.shift();\\n        else {\\n          spliceOne(list, position);\\n        }\\n\\n        if (list.length === 1)\\n          events[type] = list[0];\\n\\n        if (events.removeListener !== undefined)\\n          this.emit('removeListener', type, originalListener || listener);\\n      }\\n\\n      return this;\\n    };\\n\\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\\n\\nEventEmitter.prototype.removeAllListeners =\\n    function removeAllListeners(type) {\\n      var listeners, events, i;\\n\\n      events = this._events;\\n      if (events === undefined)\\n        return this;\\n\\n      // not listening for removeListener, no need to emit\\n      if (events.removeListener === undefined) {\\n        if (arguments.length === 0) {\\n          this._events = Object.create(null);\\n          this._eventsCount = 0;\\n        } else if (events[type] !== undefined) {\\n          if (--this._eventsCount === 0)\\n            this._events = Object.create(null);\\n          else\\n            delete events[type];\\n        }\\n        return this;\\n      }\\n\\n      // emit removeListener for all listeners on all events\\n      if (arguments.length === 0) {\\n        var keys = Object.keys(events);\\n        var key;\\n        for (i = 0; i < keys.length; ++i) {\\n          key = keys[i];\\n          if (key === 'removeListener') continue;\\n          this.removeAllListeners(key);\\n        }\\n        this.removeAllListeners('removeListener');\\n        this._events = Object.create(null);\\n        this._eventsCount = 0;\\n        return this;\\n      }\\n\\n      listeners = events[type];\\n\\n      if (typeof listeners === 'function') {\\n        this.removeListener(type, listeners);\\n      } else if (listeners !== undefined) {\\n        // LIFO order\\n        for (i = listeners.length - 1; i >= 0; i--) {\\n          this.removeListener(type, listeners[i]);\\n        }\\n      }\\n\\n      return this;\\n    };\\n\\nfunction _listeners(target, type, unwrap) {\\n  var events = target._events;\\n\\n  if (events === undefined)\\n    return [];\\n\\n  var evlistener = events[type];\\n  if (evlistener === undefined)\\n    return [];\\n\\n  if (typeof evlistener === 'function')\\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\\n\\n  return unwrap ?\\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\\n}\\n\\nEventEmitter.prototype.listeners = function listeners(type) {\\n  return _listeners(this, type, true);\\n};\\n\\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\\n  return _listeners(this, type, false);\\n};\\n\\nEventEmitter.listenerCount = function(emitter, type) {\\n  if (typeof emitter.listenerCount === 'function') {\\n    return emitter.listenerCount(type);\\n  } else {\\n    return listenerCount.call(emitter, type);\\n  }\\n};\\n\\nEventEmitter.prototype.listenerCount = listenerCount;\\nfunction listenerCount(type) {\\n  var events = this._events;\\n\\n  if (events !== undefined) {\\n    var evlistener = events[type];\\n\\n    if (typeof evlistener === 'function') {\\n      return 1;\\n    } else if (evlistener !== undefined) {\\n      return evlistener.length;\\n    }\\n  }\\n\\n  return 0;\\n}\\n\\nEventEmitter.prototype.eventNames = function eventNames() {\\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\\n};\\n\\nfunction arrayClone(arr, n) {\\n  var copy = new Array(n);\\n  for (var i = 0; i < n; ++i)\\n    copy[i] = arr[i];\\n  return copy;\\n}\\n\\nfunction spliceOne(list, index) {\\n  for (; index + 1 < list.length; index++)\\n    list[index] = list[index + 1];\\n  list.pop();\\n}\\n\\nfunction unwrapListeners(arr) {\\n  var ret = new Array(arr.length);\\n  for (var i = 0; i < ret.length; ++i) {\\n    ret[i] = arr[i].listener || arr[i];\\n  }\\n  return ret;\\n}\\n\\nfunction once(emitter, name) {\\n  return new Promise(function (resolve, reject) {\\n    function errorListener(err) {\\n      emitter.removeListener(name, resolver);\\n      reject(err);\\n    }\\n\\n    function resolver() {\\n      if (typeof emitter.removeListener === 'function') {\\n        emitter.removeListener('error', errorListener);\\n      }\\n      resolve([].slice.call(arguments));\\n    };\\n\\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\\n    if (name !== 'error') {\\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\\n    }\\n  });\\n}\\n\\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\\n  if (typeof emitter.on === 'function') {\\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\\n  }\\n}\\n\\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\\n  if (typeof emitter.on === 'function') {\\n    if (flags.once) {\\n      emitter.once(name, listener);\\n    } else {\\n      emitter.on(name, listener);\\n    }\\n  } else if (typeof emitter.addEventListener === 'function') {\\n    // EventTarget does not have `error` event semantics like Node\\n    // EventEmitters, we do not listen for `error` events here.\\n    emitter.addEventListener(name, function wrapListener(arg) {\\n      // IE does not have builtin `{ once: true }` support so we\\n      // have to do it manually.\\n      if (flags.once) {\\n        emitter.removeEventListener(name, wrapListener);\\n      }\\n      listener(arg);\\n    });\\n  } else {\\n    throw new TypeError('The \\\"emitter\\\" argument must be of type EventEmitter. Received type ' + typeof emitter);\\n  }\\n}\\n\\n\\n//# sourceURL=webpack://@rongcloud/rcvoiceroomlib-v1/./node_modules/events/events.js?\");\n\n/***/ }),\n\n/***/ \"./src/config.ts\":\n/*!***********************!*\\\n  !*** ./src/config.ts ***!\n  \\***********************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\neval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   \\\"sdkStatus\\\": () => (/* binding */ sdkStatus),\\n/* harmony export */   \\\"debug\\\": () => (/* binding */ debug),\\n/* harmony export */   \\\"RCSeatStatus\\\": () => (/* binding */ RCSeatStatus)\\n/* harmony export */ });\\n//sdk自身状态\\nvar sdkStatus;\\n(function (sdkStatus) {\\n    sdkStatus[sdkStatus[\\\"initing\\\"] = 0] = \\\"initing\\\";\\n    sdkStatus[sdkStatus[\\\"ready\\\"] = 1] = \\\"ready\\\"; //初始化完成\\n})(sdkStatus || (sdkStatus = {}));\\nvar debug = true;\\nvar RCSeatStatus = {\\n    // 空麦位\\n    RCSeatStatusEmpty: 0,\\n    // 麦位被使用，userId不为null\\n    RCSeatStatusUsing: 1,\\n    // 麦位被锁定\\n    RCSeatStatusLocking: 2\\n};\\n\\n\\n\\n//# sourceURL=webpack://@rongcloud/rcvoiceroomlib-v1/./src/config.ts?\");\n\n/***/ }),\n\n/***/ \"./src/index.ts\":\n/*!**********************!*\\\n  !*** ./src/index.ts ***!\n  \\**********************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\neval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   \\\"default\\\": () => (__WEBPACK_DEFAULT_EXPORT__)\\n/* harmony export */ });\\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! events */ \\\"./node_modules/events/events.js\\\");\\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(events__WEBPACK_IMPORTED_MODULE_0__);\\n/* harmony import */ var _modules_im_index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./modules/im/index */ \\\"./src/modules/im/index.ts\\\");\\n/* harmony import */ var _modules_rtc_index__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./modules/rtc/index */ \\\"./src/modules/rtc/index.ts\\\");\\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./config */ \\\"./src/config.ts\\\");\\n/* harmony import */ var _loger__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./loger */ \\\"./src/loger.ts\\\");\\nvar __extends = (undefined && undefined.__extends) || (function () {\\n    var extendStatics = function (d, b) {\\n        extendStatics = Object.setPrototypeOf ||\\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\\n        return extendStatics(d, b);\\n    };\\n    return function (d, b) {\\n        if (typeof b !== \\\"function\\\" && b !== null)\\n            throw new TypeError(\\\"Class extends value \\\" + String(b) + \\\" is not a constructor or null\\\");\\n        extendStatics(d, b);\\n        function __() { this.constructor = d; }\\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\\n    };\\n})();\\nvar __assign = (undefined && undefined.__assign) || function () {\\n    __assign = Object.assign || function(t) {\\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\\n            s = arguments[i];\\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\\n                t[p] = s[p];\\n        }\\n        return t;\\n    };\\n    return __assign.apply(this, arguments);\\n};\\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\n    return new (P || (P = Promise))(function (resolve, reject) {\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\n        function rejected(value) { try { step(generator[\\\"throw\\\"](value)); } catch (e) { reject(e); } }\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\n    });\\n};\\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\\n    return g = { next: verb(0), \\\"throw\\\": verb(1), \\\"return\\\": verb(2) }, typeof Symbol === \\\"function\\\" && (g[Symbol.iterator] = function() { return this; }), g;\\n    function verb(n) { return function (v) { return step([n, v]); }; }\\n    function step(op) {\\n        if (f) throw new TypeError(\\\"Generator is already executing.\\\");\\n        while (_) try {\\n            if (f = 1, y && (t = op[0] & 2 ? y[\\\"return\\\"] : op[0] ? y[\\\"throw\\\"] || ((t = y[\\\"return\\\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\\n            if (y = 0, t) op = [op[0] & 2, t.value];\\n            switch (op[0]) {\\n                case 0: case 1: t = op; break;\\n                case 4: _.label++; return { value: op[1], done: false };\\n                case 5: _.label++; y = op[1]; op = [0]; continue;\\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\\n                default:\\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\\n                    if (t[2]) _.ops.pop();\\n                    _.trys.pop(); continue;\\n            }\\n            op = body.call(thisArg, _);\\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\\n    }\\n};\\n\\n// import * as RongIMNext from '@rongcloud/imlib-next'\\n// import { installer, RCRTCCode, RCLivingType } from '@rongcloud/plugin-rtc'\\n// import { RCRemoteTrack } from '../node_modules/@rongcloud/plugin-rtc/dist/index';\\n\\n\\n\\n\\n\\nvar RCVoiceRoomLibClass = /** @class */ (function (_super) {\\n    __extends(RCVoiceRoomLibClass, _super);\\n    function RCVoiceRoomLibClass() {\\n        var _this = _super.call(this) || this;\\n        _this._roomidcli = \\\"\\\";\\n        _this.isAnchor = false; // 默认观众\\n        _this.seatInfoList = []; //房间信息\\n        _this.RCSeatInfoSeatPartPrefixKey = \\\"RCSeatInfoSeatPartPrefixKey_\\\";\\n        // RCSeatInfoUserPartPrefixKey: string = \\\"RCSeatInfoUserPartPrefixKey_\\\";\\n        _this.leaveRoomControl = true;\\n        _this.seatInfo = {\\n            status: 0,\\n            mute: false,\\n            speaking: false,\\n        };\\n        return _this;\\n    }\\n    /**\\n    * 初始化\\n    * @param item 包含 AppKey 信息\\n    **/\\n    RCVoiceRoomLibClass.prototype.init = function (item) {\\n        var _this = this;\\n        var AppKey = item.AppKey, RongIMLib = item.RongIMLib, RongRTCLib = item.RongRTCLib;\\n        /**\\n        * 开始初始化 imlib 和 rtc客户端\\n        */\\n        var im = new _modules_im_index__WEBPACK_IMPORTED_MODULE_1__.default({ appkey: AppKey, imLib: RongIMLib });\\n        var rtc = new _modules_rtc_index__WEBPACK_IMPORTED_MODULE_2__.default();\\n        this.im = im;\\n        this.rtc = rtc;\\n        //im初始化完成 进行rtc初始化\\n        im.on(\\\"imReady\\\", function (RongIMLib) {\\n            _loger__WEBPACK_IMPORTED_MODULE_4__.default.log('im初始化完成');\\n            _this.rtc.init({ im: RongIMLib, rtcLib: RongRTCLib });\\n        });\\n        //im connect完成\\n        im.on(\\\"connectReady\\\", function () {\\n            _this.imready = true;\\n            _this.readyCheck();\\n        });\\n        //im加入房间后 加入rtc房间\\n        im.on(\\\"joinRoom\\\", function (o) { return __awaiter(_this, void 0, void 0, function () {\\n            var Inseat;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        if (this.im.seatInfoList[0] && this.im.seatInfoList[0].status != _config__WEBPACK_IMPORTED_MODULE_3__.RCSeatStatus.RCSeatStatusEmpty) {\\n                            console.warn(\\\"调用加入已经存在的房间不能使用 creatandJoinroom方法\\\");\\n                            return [2 /*return*/];\\n                        }\\n                        return [4 /*yield*/, this.im.getRoomInfo(o)];\\n                    case 1:\\n                        Inseat = _a.sent();\\n                        this.rtc.isAnchor = Inseat;\\n                        return [2 /*return*/, this.rtc.joinRoom(o.roomId)];\\n                }\\n            });\\n        }); });\\n        //新房间初始化 如果是房主直接上0号麦位\\n        im.on(\\\"setNewRoom\\\", function () { return __awaiter(_this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                this.seatInfoList = this.im.seatInfoList;\\n                console.log('this.seatInfoList', this.seatInfoList);\\n                this.emit(\\\"seatInfoDidUpdate\\\", this.seatInfoList);\\n                return [2 /*return*/];\\n            });\\n        }); });\\n        //changeRoomInfo 更改麦位数，更新房间内座位\\n        im.on(\\\"changeRoomInfo\\\", function () {\\n            _this.seatInfoList = _this.im.seatInfoList;\\n            _this.emit(\\\"seatInfoDidUpdate\\\", _this.seatInfoList);\\n        });\\n        //房间信息发声变化\\n        im.on(\\\"roomInfoDidUpdate\\\", function (parm) {\\n            _this.roomInfo = parm.roomInfo;\\n            console.log('parm.roomInfo', parm.roomInfo);\\n            _this.emit(\\\"roomInfoDidUpdate\\\", _this.roomInfo);\\n        });\\n        //座位发生变化\\n        im.on(\\\"seatInfoDidUpdate\\\", function () {\\n            _this.seatInfoList = im.seatInfoList;\\n            _this.emit(\\\"seatInfoDidUpdate\\\", _this.seatInfoList);\\n        });\\n        //座位发生变化(有人进来)\\n        im.on(\\\"onAudienceEnter\\\", function (res) {\\n            _this.emit(\\\"AudienceEnter\\\", res);\\n        });\\n        //座位发生变化(有人离开)\\n        im.on(\\\"onAudienceExit\\\", function (res) {\\n            _this.emit(\\\"AudienceExit\\\", res);\\n        });\\n        //各种公屏消息\\n        im.on(\\\"onMessageReceived\\\", function (message) {\\n            //默认消息\\n            // console.log('onMessageReceived', message);\\n            _this.emit(\\\"MessageReceived\\\", message);\\n        });\\n        // //音量状态变更\\n        // im.on(\\\"speakingStatusChange\\\", (parm) => {     \\n        //     this.emit(\\\"speakingStatusChange\\\", parm)\\n        //     if (this.seatInfoList[Number(parm.index)]) {\\n        //         this.seatInfoList[Number(parm.index)]['speaking'] = parm.speaking;\\n        //     }\\n        // })\\n        //是否静音操作\\n        im.on(\\\"mute\\\", function (ismute) {\\n            if (ismute) {\\n                _this.rtc.mute();\\n            }\\n            else {\\n                _this.rtc.unmute();\\n            }\\n            _this.emit(\\\"SeatMute\\\", ismute);\\n        });\\n        //被抱下麦\\n        im.on(\\\"leaveSeat\\\", function () {\\n            console.log('被抱下麦leaveSeat');\\n            _this.leaveSeat(true);\\n            _this.emit(\\\"KickSeatReceived\\\");\\n        });\\n        //收到被邀请上麦\\n        im.on(\\\"RCPickerUserSeatContent\\\", function (parm) {\\n            _this.emit(\\\"RCPickerUserSeatContent\\\", parm);\\n        });\\n        // //收到同意邀请上麦消息\\n        // im.on(\\\"VoiceRoomAgreeManagePick\\\", (parm) => {\\n        //     this.emit(\\\"VoiceRoomAgreeManagePick\\\", parm);\\n        // })\\n        // //收到拒绝邀请上麦消息\\n        // im.on(\\\"VoiceRoomRejectManagePick\\\", (parm) => {\\n        //     this.emit(\\\"VoiceRoomRejectManagePick\\\", parm);\\n        // })\\n        //被踢出房间\\n        im.on(\\\"RCKickUserOutRoomContent\\\", function (parm) {\\n            _this.emit(\\\"RCKickUserOutRoomContent\\\", parm);\\n            if (parm.targetId == _this.im.userId) {\\n                // console.log('this._roomidcli', this._roomidcli);\\n                _this.leaveRoom(_this._roomidcli);\\n            }\\n        });\\n        //申请上麦被同意上报\\n        im.on(\\\"RequestSeatAccepted\\\", function () { return __awaiter(_this, void 0, void 0, function () {\\n            var _this = this;\\n            return __generator(this, function (_a) {\\n                return [2 /*return*/, this.im.seatInfoRemove('RCRequestSeatPrefixKey_' + this.im.userId).then(function (res) {\\n                        // 强制删除聊天室属性成功\\n                        if (res.code === 0) {\\n                            _this.emit(\\\"RequestSeatAccepted\\\");\\n                            return '操作成功:70000';\\n                        }\\n                    }).catch(function (error) {\\n                        throw new Error('同意排麦请求发送失败:70017');\\n                    })];\\n            });\\n        }); });\\n        //申请上麦被拒绝上报\\n        im.on(\\\"RequestSeatRejected\\\", function () { return __awaiter(_this, void 0, void 0, function () {\\n            var _this = this;\\n            return __generator(this, function (_a) {\\n                return [2 /*return*/, this.im.seatInfoRemove('RCRequestSeatPrefixKey_' + this.im.userId).then(function (res) {\\n                        // 强制删除聊天室属性成功\\n                        if (res.code === 0) {\\n                            _this.emit(\\\"RequestSeatRejected\\\");\\n                            return '操作成功:70000';\\n                        }\\n                    }).catch(function (error) {\\n                        throw new Error('拒绝排麦请求发送失败:70018');\\n                    })];\\n            });\\n        }); });\\n        //申请上麦人员发生变化上报\\n        im.on(\\\"RequestSeatListChanged\\\", function () {\\n            _this.emit(\\\"RequestSeatListChanged\\\");\\n        });\\n        //所有刷新消息的通知上报\\n        im.on(\\\"onRoomNotificationReceived\\\", function (info) {\\n            console.log(info);\\n            _this.emit(\\\"RoomNotificationReceived\\\", info);\\n        });\\n        // //房间关闭上报\\n        // im.on(\\\"VoiceRoomClosed\\\", () => {\\n        //     this.emit(\\\"VoiceRoomClosed\\\",);\\n        // })\\n        // //更换背景上报\\n        // im.on(\\\"VoiceRoomBackgroundChanged\\\", (img) => {\\n        //     this.emit(\\\"VoiceRoomBackgroundChanged\\\", img);\\n        // })\\n        //账号被顶掉上报\\n        im.on(\\\"connectioBreakOff\\\", function () {\\n            _this.emit(\\\"ConnectioBreakOff\\\");\\n        });\\n        //房间被销毁上报\\n        im.on(\\\"chatroomDestroyed\\\", function () {\\n            _this.emit(\\\"ChatroomDestroyed\\\");\\n        });\\n        //rtc 断开连接 主播端\\n        this.rtc.on(\\\"onRTCPeerConnectionCloseByException\\\", function () {\\n            _this.emit(\\\"RTCPeerConnectionCloseByException\\\");\\n        });\\n        //rtc初始化完成\\n        rtc.on(\\\"ready\\\", function () {\\n            _loger__WEBPACK_IMPORTED_MODULE_4__.default.log('rtc初始化完成');\\n            _this.rtcready = true;\\n            _this.readyCheck();\\n        });\\n        //rtc加入房间\\n        rtc.on(\\\"joinRoom\\\", function () { return __awaiter(_this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                // if (this.rtc.isDisable) {\\n                //     this.rtc.mute();\\n                //     return\\n                // }\\n                if (this.seatInfoList.length && this.seatInfoList[this.im.seatIndex] && this.seatInfoList[this.im.seatIndex].mute) {\\n                    // console.log(\\\"上了静音买位\\\");\\n                    this.rtc.mute();\\n                }\\n                return [2 /*return*/];\\n            });\\n        }); });\\n        // rtc.on('audioChenge', (level: { track: { _userId: any; }; _userId: any; audioLevel: any; }) => {\\n        //     if (level.track._userId && level.track._userId == this.im.userId) {\\n        //         let content: { name: string; content: string; }\\n        //         let speak: { index: string; speaking: string; }\\n        //         if (level.audioLevel) {\\n        //             content = {\\n        //                 name: \\\"RCUserOnSeatSpeakingKey_\\\" + this.rtc.currentSeat,// 文本内容\\n        //                 content: '1'\\n        //             }\\n        //             speak = {\\n        //                 index: this.rtc.currentSeat + '',\\n        //                 speaking: '1'\\n        //             }\\n        //         } else {\\n        //             content = {\\n        //                 name: \\\"RCUserOnSeatSpeakingKey_\\\" + this.rtc.currentSeat,// 文本内容\\n        //                 content: '0'\\n        //             }\\n        //             speak = {\\n        //                 index: this.rtc.currentSeat + '',\\n        //                 speaking: '0'\\n        //             }\\n        //         }\\n        //         // console.log('RCUserOnSeatSpeakingKey_', this.rtc.currentSeat);\\n        //         this.im.messageUpdate(\\\"RC:VRLRefreshMsg\\\", content)\\n        //         this.emit(\\\"speakingStatusChange\\\", speak)\\n        //         if (this.seatInfoList[Number(speak.index)]) {\\n        //             // this.seatInfoList[Number(parm.index)].speaking = parm.speaking;\\n        //             if (Number(speak.speaking)) {\\n        //                 this.seatInfoList[Number(speak.index)]['speaking'] = true\\n        //             } else {\\n        //                 this.seatInfoList[Number(speak.index)]['speaking'] = false\\n        //             }\\n        //         }\\n        //     }\\n        // })\\n    };\\n    /**\\n    *\\n    * im链接connect\\n    *\\n    */\\n    RCVoiceRoomLibClass.prototype.connect = function (token) {\\n        return this.im.connect(token);\\n    };\\n    /**\\n    *\\n    * 两模块就绪报上层ready\\n    *\\n    */\\n    RCVoiceRoomLibClass.prototype.readyCheck = function () {\\n        if (this.status == _config__WEBPACK_IMPORTED_MODULE_3__.sdkStatus.ready) {\\n            _loger__WEBPACK_IMPORTED_MODULE_4__.default.log(\\\"已经就绪\\\");\\n            return;\\n        }\\n        else {\\n            if (this.imready && this.rtcready) {\\n                this.emit(\\\"ready\\\");\\n            }\\n        }\\n    };\\n    /**\\n    *\\n    * 创建并加入房间(房间未创建)\\n    *\\n    */\\n    RCVoiceRoomLibClass.prototype.createAndJoinRoom = function (op) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                // console.log(\\\"主播创建并加入房间\\\", op.roomId);\\n                this.rtc.isAnchor = true;\\n                this.rtc.currentSeat = 0;\\n                if (!('roomName' in op) || !('seatCount' in op) || !('roomId' in op) || op.seatCount < 1) {\\n                    throw new Error('创建房间信息错误:70036');\\n                }\\n                this._roomidcli = op.roomId;\\n                return [2 /*return*/, this.im.joinRoom({\\n                        roomId: op.roomId,\\n                        roomName: op.roomName,\\n                        seatCount: op.seatCount\\n                    }).then(function (res) {\\n                        return res;\\n                    }).catch(function (err) {\\n                        return '创建语聊房失败:70010' + err;\\n                    })];\\n            });\\n        });\\n    };\\n    /**\\n    *\\n    * 加入已创建房间(房间已创建)\\n    *\\n    */\\n    RCVoiceRoomLibClass.prototype.joinRoom = function (roomid) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                // console.log(\\\"加入已存在房间:\\\", roomid);\\n                this._roomidcli = roomid;\\n                return [2 /*return*/, this.im.joinRoom({\\n                        roomId: roomid\\n                    }).then(function (res) {\\n                        return res;\\n                    }).catch(function (err) {\\n                        return '加入语聊房失败:70010' + err;\\n                    })];\\n            });\\n        });\\n    };\\n    /**\\n    *\\n    * 离开房间\\n    *\\n    */\\n    RCVoiceRoomLibClass.prototype.leaveRoom = function (roomid) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var index;\\n            var _this = this;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        if (!this.leaveRoomControl) return [3 /*break*/, 5];\\n                        this.leaveRoomControl = false;\\n                        index = 0;\\n                        _a.label = 1;\\n                    case 1:\\n                        if (!(index < this.seatInfoList.length)) return [3 /*break*/, 4];\\n                        if (!(this.seatInfoList[index]['userId'] && this.seatInfoList[index]['userId'] == this.im.userId)) return [3 /*break*/, 3];\\n                        return [4 /*yield*/, this.leaveSeat(false, true)];\\n                    case 2:\\n                        _a.sent();\\n                        return [3 /*break*/, 4];\\n                    case 3:\\n                        index += 1;\\n                        return [3 /*break*/, 1];\\n                    case 4: return [2 /*return*/, Promise.all([this.rtc.leaveRoom(roomid), this.im.leaveRoom(roomid)]).then(function () {\\n                            _this.rtc.isDisable = false;\\n                            _this.seatInfoList = [];\\n                            _this.roomInfo = null;\\n                            setTimeout(function () {\\n                                _this.leaveRoomControl = true;\\n                            }, 1000);\\n                            return '操作成功:70000';\\n                        }).catch(function () {\\n                            throw new Error('离开语聊房失败:70011');\\n                        })];\\n                    case 5: return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    /**\\n    *\\n    * 寻找空麦位(除 0 号麦位外)\\n    * 无空麦位 返回 null\\n    */\\n    RCVoiceRoomLibClass.prototype.findSeat = function () {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var i;\\n            return __generator(this, function (_a) {\\n                for (i = 1; i < this.seatInfoList.length; i++) {\\n                    if (Number(this.seatInfoList[i].status) == _config__WEBPACK_IMPORTED_MODULE_3__.RCSeatStatus.RCSeatStatusEmpty) {\\n                        return [2 /*return*/, i];\\n                    }\\n                    if (i = this.seatInfoList.length - 1) {\\n                        return [2 /*return*/, null];\\n                    }\\n                }\\n                return [2 /*return*/];\\n            });\\n        });\\n    };\\n    /**\\n    *\\n    * 用户上麦\\n    *\\n    * @param seatIndex 麦位序号\\n    */\\n    RCVoiceRoomLibClass.prototype.enterSeat = function (seatIndex) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var i, targetSeatInfo;\\n            var _this = this;\\n            return __generator(this, function (_a) {\\n                // console.log(\\\"上麦操作\\\", seatIndex);\\n                // console.log(\\\"当前麦位信息\\\", this.seatInfoList);\\n                // console.log(\\\"this.roomInfo.seatCount\\\", this.roomInfo.seatCount);\\n                for (i = 0; i < this.seatInfoList.length; i += 1) {\\n                    if (this.seatInfoList[i]['userId'] && this.seatInfoList[i]['userId'] == this.im.userId) {\\n                        throw new Error('该上麦用户此时已经在麦位上:70003');\\n                    }\\n                }\\n                // if (this.seatInfoList.length == seatIndex) { //本地麦位未更新时生成一个默认麦位\\n                //     targetSeatInfo = this.seatInfo\\n                // } else {\\n                if (this.roomInfo && this.roomInfo.seatCount && (seatIndex >= this.roomInfo.seatCount)) {\\n                    throw new Error('麦位序号不正确:70002');\\n                }\\n                targetSeatInfo = this.seatInfoList[seatIndex];\\n                if (targetSeatInfo.status != _config__WEBPACK_IMPORTED_MODULE_3__.RCSeatStatus.RCSeatStatusEmpty) { //当前麦位非空闲\\n                    throw new Error(\\\"麦位不是空置状态,无法上麦:70006\\\");\\n                }\\n                // }\\n                targetSeatInfo.userId = this.im.userId;\\n                targetSeatInfo.status = _config__WEBPACK_IMPORTED_MODULE_3__.RCSeatStatus.RCSeatStatusUsing;\\n                // console.log(\\\"当前更新\\\", this.RCSeatInfoSeatPartPrefixKey + seatIndex);\\n                return [2 /*return*/, this.im.seatInfoUpdate(this.RCSeatInfoSeatPartPrefixKey + seatIndex, targetSeatInfo).then(function () { return __awaiter(_this, void 0, void 0, function () {\\n                        var _this = this;\\n                        return __generator(this, function (_a) {\\n                            this.seatInfoList[seatIndex]['userId'] = this.im.userId;\\n                            this.seatInfoList[seatIndex]['status'] = Number(_config__WEBPACK_IMPORTED_MODULE_3__.RCSeatStatus.RCSeatStatusUsing);\\n                            this.seatInfoList[seatIndex]['speaking'] = false;\\n                            this.im.seatIndex = seatIndex;\\n                            this.rtc.currentSeat = seatIndex;\\n                            return [2 /*return*/, this.rtc.enterSeat(seatIndex).then(function () {\\n                                    if (targetSeatInfo.mute || _this.rtc.isDisable) {\\n                                        _this.rtc.isMuteOwner = true;\\n                                        return _this.rtc.mute();\\n                                    }\\n                                    else {\\n                                        return _this.rtc.unmute();\\n                                    }\\n                                })];\\n                        });\\n                    }); }).catch(function () {\\n                        throw new Error('上麦失败');\\n                    })];\\n            });\\n        });\\n    };\\n    /**\\n    *\\n    * 用户下麦\\n    * 注意：和 enterSeat()成对调用\\n    *\\n    */\\n    RCVoiceRoomLibClass.prototype.leaveSeat = function (ispassive, isLeaveRoom) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var index, have, status, i, value;\\n            var _this = this;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        if (!isLeaveRoom) return [3 /*break*/, 2];\\n                        return [4 /*yield*/, this.rtc.leaveSeat(true)];\\n                    case 1:\\n                        _a.sent();\\n                        return [3 /*break*/, 4];\\n                    case 2: return [4 /*yield*/, this.rtc.leaveSeat(false)];\\n                    case 3:\\n                        _a.sent();\\n                        _a.label = 4;\\n                    case 4:\\n                        if (ispassive) { //被动下麦不操作远程数据\\n                            _loger__WEBPACK_IMPORTED_MODULE_4__.default.log(\\\"被动下麦\\\");\\n                            return [2 /*return*/];\\n                        }\\n                        index = null;\\n                        have = false;\\n                        status = Number(_config__WEBPACK_IMPORTED_MODULE_3__.RCSeatStatus.RCSeatStatusEmpty);\\n                        for (i = 0; i < this.seatInfoList.length; i += 1) {\\n                            if (this.seatInfoList[i].userId == this.im.userId) {\\n                                index = i;\\n                                have = true;\\n                            }\\n                        }\\n                        if (!have) {\\n                            throw new Error('用户不在麦位上:70004');\\n                        }\\n                        else {\\n                            value = __assign(__assign({}, this.seatInfoList[index]), { status: status });\\n                            delete value['userId'];\\n                            //console.log(this.RCSeatInfoSeatPartPrefixKey + index, '下麦操作：', value);\\n                            return [2 /*return*/, this.im.seatInfoUpdate(this.RCSeatInfoSeatPartPrefixKey + index, value).then(function (result) {\\n                                    _this.seatInfoList[index]['status'] = status;\\n                                    _this.seatInfoList[index]['mute'] = _this.seatInfoList[index].mute;\\n                                    _this.seatInfoList[index]['speaking'] = _this.seatInfoList[index].speaking;\\n                                    delete _this.seatInfoList[index]['userId'];\\n                                    // this.seatInfoList[index]['userId'] = '';\\n                                    // console.log('this.seatInfoList', this.seatInfoList);\\n                                    return '操作成功:70000';\\n                                }).catch(function () {\\n                                    //  throw new Error('未知错误:-1')\\n                                })];\\n                        }\\n                        return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    /**\\n    *\\n    * 将指定麦位下麦\\n    *\\n    * @param userId   用户 Id\\n    */\\n    RCVoiceRoomLibClass.prototype.kickUserFromSeat = function (userId) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var index, have, arr, i, value;\\n            var _this = this;\\n            return __generator(this, function (_a) {\\n                index = null;\\n                have = false;\\n                arr = [];\\n                if (userId == this.im.userId) {\\n                    throw new Error('不能踢自己下麦:70009');\\n                }\\n                for (i = 0; i < this.seatInfoList.length; i += 1) {\\n                    //console.log(\\\"id:\\\",this.seatInfoList[i].userId);\\n                    //console.log(\\\"idcheckd:\\\",userId);\\n                    if (this.seatInfoList[i].userId == userId) {\\n                        index = i;\\n                        have = true;\\n                    }\\n                }\\n                if (!have) {\\n                    throw new Error('用户不在麦上:-1');\\n                }\\n                value = {\\n                    status: 0,\\n                    mute: this.seatInfoList[index].mute,\\n                    speaking: this.seatInfoList[index].speaking,\\n                };\\n                arr.push(this.im.seatInfoUpdate(this.RCSeatInfoSeatPartPrefixKey + index, value));\\n                return [2 /*return*/, Promise.all(arr).then(function (result) {\\n                        // this.seatInfoList[index] = {\\n                        //     status: 0,\\n                        //     mute: this.seatInfoList[index].mute,\\n                        //     speaking: this.seatInfoList[index].speaking,\\n                        // };\\n                        _this.seatInfoList[index]['status'] = 0;\\n                        _this.seatInfoList[index]['mute'] = _this.seatInfoList[index].mute;\\n                        _this.seatInfoList[index]['speaking'] = _this.seatInfoList[index].speaking;\\n                        delete _this.seatInfoList[index]['userId'];\\n                        // this.seatInfoList[index]['userId'] = '';\\n                        // console.log('this.seatInfoList', this.seatInfoList);\\n                        return '操作成功:70000';\\n                    }).catch(function () {\\n                        throw new Error('未知错误:-1');\\n                    })];\\n            });\\n        });\\n    };\\n    /**\\n    *\\n    * 用户跳麦\\n    * 注意：在用户已经在麦位想切换麦位时调用\\n    *\\n    * @param seatIndex 需要跳转的麦位序号\\n    */\\n    RCVoiceRoomLibClass.prototype.switchSeatTo = function (seatIndex) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var index, i, valueOld;\\n            var _this = this;\\n            return __generator(this, function (_a) {\\n                if (!this.seatInfoList[seatIndex]) {\\n                    throw new Error('麦位不存在');\\n                }\\n                if (Number(this.seatInfoList[seatIndex].status) == _config__WEBPACK_IMPORTED_MODULE_3__.RCSeatStatus.RCSeatStatusLocking) {\\n                    throw new Error(\\\"麦位被锁定不能跳麦\\\");\\n                }\\n                index = null;\\n                for (i = 0; i < this.seatInfoList.length; i += 1) {\\n                    if (this.seatInfoList[i].userId === this.im.userId) {\\n                        index = i;\\n                        break;\\n                    }\\n                }\\n                if (index === null) {\\n                    throw new Error('用户不在麦位上:70004');\\n                }\\n                else {\\n                    if (!this.seatInfoList[seatIndex]['userId']) {\\n                        valueOld = {\\n                            status: 0,\\n                            mute: this.seatInfoList[index].mute,\\n                            speaking: this.seatInfoList[index].speaking,\\n                        };\\n                        return [2 /*return*/, this.im.seatInfoUpdate(this.RCSeatInfoSeatPartPrefixKey + index, valueOld).then(function (result) {\\n                                // this.seatInfoList[index] = valueOld\\n                                _this.seatInfoList[index]['status'] = 0;\\n                                _this.seatInfoList[index]['mute'] = _this.seatInfoList[index].mute;\\n                                _this.seatInfoList[index]['speaking'] = _this.seatInfoList[index].speaking;\\n                                delete _this.seatInfoList[index]['userId'];\\n                                return _this.enterSeat(seatIndex);\\n                            }).catch(function () {\\n                                throw new Error('未知错误:-1');\\n                            })];\\n                    }\\n                    else {\\n                        if (this.seatInfoList[seatIndex].userId == this.im.userId) {\\n                            throw new Error('用户跳麦的麦位和之前的一样:70005');\\n                        }\\n                        else {\\n                            throw new Error('麦位不是空置状态:70006');\\n                        }\\n                    }\\n                }\\n                return [2 /*return*/];\\n            });\\n        });\\n    };\\n    /**\\n    *\\n    * 邀请用户上麦\\n    *\\n    * @param userId   用户 Id\\n    */\\n    RCVoiceRoomLibClass.prototype.pickUserToSeat = function (userId) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var value;\\n            return __generator(this, function (_a) {\\n                value = {\\n                    // 填写开发者定义的消息内容\\n                    content: \\\"RCPickerUserSeatContent\\\",\\n                    invitationId: \\\"f9e6765b-304d-451a-be91-2bb936175888\\\",\\n                    sendUserId: this.im.userId,\\n                    targetId: userId,\\n                    type: 0,\\n                };\\n                if (userId == this.im.userId) {\\n                    throw new Error('抱人上麦不能选择自己:70007');\\n                }\\n                else {\\n                    return [2 /*return*/, this.im.messageUpdate(\\\"RC:VRLInviteMsg\\\", value).then(function (massage) {\\n                            return '操作成功:70000';\\n                        }).catch(function (err) {\\n                            throw new Error('发送上麦邀请失败:70008');\\n                        })];\\n                }\\n                return [2 /*return*/];\\n            });\\n        });\\n    };\\n    /**\\n    *\\n    * 将用户踢出房间\\n    *\\n    * @param userId   用户 Id\\n    */\\n    RCVoiceRoomLibClass.prototype.kickUserFromRoom = function (userId) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var value;\\n            return __generator(this, function (_a) {\\n                value = {\\n                    // 填写开发者定义的消息内容\\n                    content: \\\"RCKickUserOutRoomContent\\\",\\n                    invitationId: \\\"yourRandomString\\\" + Math.random(),\\n                    sendUserId: this.im.userId,\\n                    targetId: userId,\\n                    type: 0,\\n                };\\n                if (userId == this.im.userId) {\\n                    throw new Error('未知错误:-1');\\n                }\\n                else {\\n                    return [2 /*return*/, this.im.messageUpdate(\\\"RC:VRLInviteMsg\\\", value).then(function (massage) {\\n                            return '操作成功:70000';\\n                        }).catch(function (err) {\\n                            throw new Error('发送信息失败:70023');\\n                        })];\\n                }\\n                return [2 /*return*/];\\n            });\\n        });\\n    };\\n    /**\\n    *\\n    * 将某个麦位静音\\n    *\\n    * @param seatIndex 麦位序号\\n    * @param isMute    是否静音\\n    */\\n    RCVoiceRoomLibClass.prototype.muteSeat = function (seatIndex, ismute) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var arr, value;\\n            var _this = this;\\n            return __generator(this, function (_a) {\\n                arr = [];\\n                value = __assign(__assign({}, this.seatInfoList[seatIndex]), { mute: ismute });\\n                arr.push(this.im.seatInfoUpdate(this.RCSeatInfoSeatPartPrefixKey + seatIndex, value));\\n                return [2 /*return*/, Promise.all(arr).then(function (result) {\\n                        if (seatIndex == _this.im.seatIndex) {\\n                            if (ismute) {\\n                                _this.rtc.mute();\\n                            }\\n                            else {\\n                                _this.rtc.unmute();\\n                            }\\n                        }\\n                        _this.seatInfoList[seatIndex]['mute'] = ismute;\\n                        return '操作成功:70000';\\n                    }).catch(function () {\\n                        throw new Error('未知错误:-1');\\n                    })];\\n            });\\n        });\\n    };\\n    /**\\n    *\\n    * 将某个麦位锁定\\n    *\\n    * @param seatIndex 麦位序号\\n    * @param isLocked  是否锁麦位\\n    */\\n    RCVoiceRoomLibClass.prototype.lockSeat = function (seatIndex, isLocked) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var arr, isLock, value;\\n            var _this = this;\\n            return __generator(this, function (_a) {\\n                if (!this.seatInfoList[seatIndex]) {\\n                    throw new Error('麦位不存在');\\n                }\\n                arr = [];\\n                isLock = isLocked ? 2 : 0;\\n                value = {\\n                    mute: this.seatInfoList[seatIndex].mute,\\n                    speaking: this.seatInfoList[seatIndex].speaking,\\n                    status: isLock,\\n                };\\n                arr.push(this.im.seatInfoUpdate(this.RCSeatInfoSeatPartPrefixKey + seatIndex, value));\\n                return [2 /*return*/, Promise.all(arr).then(function (result) {\\n                        _this.seatInfoList[seatIndex]['status'] = isLock;\\n                        _this.seatInfoList[seatIndex]['mute'] = _this.seatInfoList[seatIndex].mute;\\n                        _this.seatInfoList[seatIndex]['speaking'] = _this.seatInfoList[seatIndex].speaking;\\n                        delete _this.seatInfoList[seatIndex]['userId'];\\n                        return '操作成功:70000';\\n                    }).catch(function () {\\n                        throw new Error('未知错误:-1');\\n                    })];\\n            });\\n        });\\n    };\\n    /**\\n    * 设置房间信息，房间的id必须与当前房间id一致\\n    *\\n    * @param roomInfo 修改的房间信息\\n    */\\n    RCVoiceRoomLibClass.prototype.setRoomInfo = function (roomInfo) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                // console.log(\\\"roominfo\\\", roomInfo, this.roomInfo);\\n                // console.log(\\\"this.roomInfo\\\", this.roomInfo);\\n                // seatCount\\n                if (Number(roomInfo.seatCount) != Number(this.roomInfo.seatCount)) { //座位数发生了变更\\n                    this.im.changeRoomInfo(roomInfo);\\n                }\\n                if (roomInfo.isMuteAll != this.roomInfo.isMuteAll) { //将所有麦位静音打开或者关闭\\n                    this.muteOtherSeats(roomInfo.isMuteAll);\\n                    // this.im.seatInfoUpdate(\\\"RCRoomInfoKey\\\", roomInfo)\\n                }\\n                if (roomInfo.isLockAll != this.roomInfo.isLockAll) { //将所有麦位所卖或者解除锁麦\\n                    this.lockOtherSeats(roomInfo.isLockAll);\\n                    // this.im.seatInfoUpdate(\\\"RCRoomInfoKey\\\", roomInfo)\\n                }\\n                this.im.seatInfoUpdate(\\\"RCRoomInfoKey\\\", roomInfo);\\n                this.roomInfo = __assign({}, roomInfo);\\n                this.emit(\\\"roomInfoDidUpdate\\\", this.roomInfo);\\n                return [2 /*return*/];\\n            });\\n        });\\n    };\\n    /**\\n    *\\n    * 将所有麦位静音或者解除静音\\n    *\\n    * @param isMute 是否静音\\n    */\\n    RCVoiceRoomLibClass.prototype.muteOtherSeats = function (isMute) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var arr, roomData, i, value;\\n            var _this = this;\\n            return __generator(this, function (_a) {\\n                arr = [];\\n                roomData = __assign(__assign({}, this.roomInfo), { isMuteAll: isMute });\\n                // const unMute = !isMute\\n                for (i = 0; i < this.seatInfoList.length; i += 1) {\\n                    // if (this.seatInfoList[i]['userId'] == this.im.userId){//当前麦位本地操作\\n                    //     this.updateLocalInfo(this.seatInfoList[i])\\n                    // }\\n                    if (this.seatInfoList[i]['userId'] != this.im.userId && this.seatInfoList[i]['mute'] != isMute) {\\n                        value = __assign(__assign({}, this.seatInfoList[i]), { mute: isMute });\\n                        arr.push(this.im.seatInfoUpdate(this.RCSeatInfoSeatPartPrefixKey + i, value));\\n                    }\\n                }\\n                return [2 /*return*/, Promise.all(arr).then(function (result) {\\n                        _this.roomInfo = roomData;\\n                        _this.emit(\\\"roomInfoDidUpdate\\\", _this.roomInfo);\\n                        for (var i = 0; i < _this.seatInfoList.length; i += 1) {\\n                            if (_this.seatInfoList[i]['userId'] != _this.im.userId && _this.seatInfoList[i]['mute'] != isMute) {\\n                                _this.seatInfoList[i]['mute'] = isMute;\\n                            }\\n                        }\\n                        return '操作成功:70000';\\n                    }).catch(function () {\\n                        throw new Error('未知错误:-1');\\n                    })];\\n            });\\n        });\\n    };\\n    /**\\n    *\\n    * 将所有麦位锁麦或者解除锁麦\\n    *\\n    * @param isLock 是否锁麦\\n    */\\n    RCVoiceRoomLibClass.prototype.lockOtherSeats = function (isLock) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var arr, Lock, roomData, i, value;\\n            var _this = this;\\n            return __generator(this, function (_a) {\\n                arr = [];\\n                Lock = isLock ? 2 : 0;\\n                roomData = __assign(__assign({}, this.roomInfo), { isLockAll: isLock });\\n                for (i = 0; i < this.seatInfoList.length; i += 1) {\\n                    if (!this.seatInfoList[i]['userId'] && this.seatInfoList[i]['status'] != Lock) {\\n                        value = __assign(__assign({}, this.seatInfoList[i]), { status: Lock });\\n                        arr.push(this.im.seatInfoUpdate(this.RCSeatInfoSeatPartPrefixKey + i, value));\\n                    }\\n                }\\n                return [2 /*return*/, Promise.all(arr).then(function (result) {\\n                        _this.roomInfo = roomData;\\n                        _this.emit(\\\"roomInfoDidUpdate\\\", _this.roomInfo);\\n                        for (var i = 0; i < _this.seatInfoList.length; i += 1) {\\n                            if (!_this.seatInfoList[i]['userId'] && _this.seatInfoList[i]['status'] != Lock) {\\n                                _this.seatInfoList[i]['status'] = Lock;\\n                            }\\n                        }\\n                        return '操作成功:70000';\\n                    }).catch(function () {\\n                        throw new Error('未知错误:-1');\\n                    })];\\n            });\\n        });\\n    };\\n    /**\\n    * 通知房间所有用户执行某个刷新操作，当 messageType 为 \\\"RC:VRLRefreshMsg\\\" 时调用\\n    *\\n    * @param name    刷新操作的名称\\n    * @param content 刷新操作的内容\\n    */\\n    RCVoiceRoomLibClass.prototype.notifyVoiceRoom = function (name, content) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var value;\\n            return __generator(this, function (_a) {\\n                value = {\\n                    content: content,\\n                    name: name,\\n                };\\n                return [2 /*return*/, this.im.messageUpdate(\\\"RC:VRLRefreshMsg\\\", value).then(function (massage) {\\n                        return '操作成功:70000';\\n                    }).catch(function (err) {\\n                        throw new Error('发送信息失败:70023');\\n                    })];\\n            });\\n        });\\n    };\\n    /**\\n    *\\n    * 获取排麦用户的标识集合\\n    *\\n    */\\n    RCVoiceRoomLibClass.prototype.getRequestSeatUserIds = function () {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var arr;\\n            return __generator(this, function (_a) {\\n                arr = [];\\n                return [2 /*return*/, this.im.chatRoom.getAllChatRoomEntries(this._roomidcli).then(function (data) {\\n                        if (data.code === 0) {\\n                            var entries_1 = data.data;\\n                            Object.keys(entries_1).forEach(function (key) {\\n                                if (key.split(\\\"_\\\")[0] == \\\"RCRequestSeatPrefixKey\\\" &&\\n                                    entries_1[key] == \\\"RCRequestSeatContentRequest\\\") {\\n                                    arr.push(key.split(\\\"_\\\")[1]);\\n                                }\\n                            });\\n                            return arr;\\n                        }\\n                    }).catch(function () {\\n                        throw new Error('获取排麦请求列表失败:70022');\\n                    })];\\n            });\\n        });\\n    };\\n    /**\\n    *\\n    * 获取最新麦位信息\\n    *\\n    */\\n    RCVoiceRoomLibClass.prototype.getLatestSeatInfo = function () {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var arr;\\n            return __generator(this, function (_a) {\\n                arr = [];\\n                // console.log('this._roomidcli', this._roomidcli);\\n                return [2 /*return*/, this.im.chatRoom.getAllChatRoomEntries(this._roomidcli).then(function (res) {\\n                        console.log('entries:', res);\\n                        if (res.code === 0) {\\n                            Object.keys(res.data).forEach(function (key) {\\n                                var entriesArr = key.split(\\\"_\\\");\\n                                if (entriesArr[0] == \\\"RCSeatInfoSeatPartPrefixKey\\\") {\\n                                    //console.log('Number(entriesArr[1])', Number(entriesArr[1]));\\n                                    //console.log('entries[key]', entries[key]);\\n                                    arr[Number(entriesArr[1])] = JSON.parse(res.data[key]);\\n                                }\\n                            });\\n                            return arr;\\n                        }\\n                    }).catch(function () {\\n                        throw new Error('同步麦位信息失败:70030');\\n                    })];\\n            });\\n        });\\n    };\\n    /**\\n    *\\n    * 更新指定麦位信息中的extra字段\\n    *\\n    * @param index 麦位\\n    * @param extra extra字段\\n    */\\n    RCVoiceRoomLibClass.prototype.updateSeatInfoExtra = function (index, extra) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var arr, value;\\n            var _this = this;\\n            return __generator(this, function (_a) {\\n                arr = [];\\n                value = __assign(__assign({}, this.seatInfoList[index]), { extra: extra });\\n                arr.push(this.im.seatInfoUpdate(this.RCSeatInfoSeatPartPrefixKey + index, value));\\n                return [2 /*return*/, Promise.all(arr).then(function (result) {\\n                        _this.seatInfoList[index]['extra'] = extra;\\n                        return '操作成功:70000';\\n                    }).catch(function () {\\n                        throw new Error('未知错误:-1');\\n                    })];\\n            });\\n        });\\n    };\\n    /**\\n    *\\n    * 请求排麦\\n    */\\n    RCVoiceRoomLibClass.prototype.requestSeat = function () {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var len, bor, i, arr;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0: return [4 /*yield*/, this.getRequestSeatUserIds()];\\n                    case 1:\\n                        len = _a.sent();\\n                        bor = false;\\n                        for (i = 0; i < len.length; i += 1) {\\n                            if (len[i] == this.im.userId) {\\n                                bor = true;\\n                            }\\n                        }\\n                        arr = [];\\n                        if (len.length > 20) {\\n                            throw new Error('排麦人数过多:70014');\\n                        }\\n                        else if (bor) {\\n                            throw new Error('已经在排麦中:70013');\\n                        }\\n                        else {\\n                            arr.push(this.im.RequestseatInfoUpdate(\\\"RCRequestSeatPrefixKey_\\\" + this.im.userId, \\\"RCRequestSeatContentRequest\\\"));\\n                            return [2 /*return*/, Promise.all(arr).then(function (result) {\\n                                    return '操作成功:70000';\\n                                }).catch(function () {\\n                                    throw new Error('排麦请求发送失败:70015');\\n                                })];\\n                        }\\n                        return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    /**\\n    *\\n    * 取消排麦请求\\n    *\\n    */\\n    RCVoiceRoomLibClass.prototype.cancelRequestSeat = function () {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                return [2 /*return*/, this.im.seatInfoRemove(\\\"RCRequestSeatPrefixKey_\\\" + this.im.userId).then(function (res) {\\n                        // 强制删除聊天室属性成功\\n                        if (res.code === 0) {\\n                            return '操作成功:70000';\\n                        }\\n                    }).catch(function (error) {\\n                        throw new Error('取消排麦发送失败:70016');\\n                    })];\\n            });\\n        });\\n    };\\n    /**\\n    *\\n    *  同意用户排麦请求\\n    *\\n    * @param userId   请求排麦的用户 Id\\n    */\\n    RCVoiceRoomLibClass.prototype.acceptRequestSeat = function (userId) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var arr;\\n            return __generator(this, function (_a) {\\n                arr = [];\\n                arr.push(this.im.RequestseatInfoUpdate(\\\"RCRequestSeatPrefixKey_\\\" + userId, \\\"RCRequestSeatContentAccept\\\"));\\n                return [2 /*return*/, Promise.all(arr).then(function (result) {\\n                        return '操作成功:70000';\\n                    }).catch(function () {\\n                        throw new Error('同意排麦请求发送失败:70017');\\n                    })];\\n            });\\n        });\\n    };\\n    /**\\n    * 拒绝用户排麦请求\\n    *\\n    * @param userId 请求排麦的用户 Id\\n    */\\n    RCVoiceRoomLibClass.prototype.rejectRequestSeat = function (userId) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var arr;\\n            return __generator(this, function (_a) {\\n                arr = [];\\n                arr.push(this.im.RequestseatInfoUpdate(\\\"RCRequestSeatPrefixKey_\\\" + userId, \\\"RCRequestSeatContentDeny\\\"));\\n                return [2 /*return*/, Promise.all(arr).then(function (result) {\\n                        _loger__WEBPACK_IMPORTED_MODULE_4__.default.log('操作成功:70000');\\n                    }).catch(function () {\\n                        throw new Error('拒绝排麦请求发送失败:70018');\\n                    })];\\n            });\\n        });\\n    };\\n    /**\\n    *\\n    * 静音所有远程音频流\\n    *\\n    * @param isMute 是否静音远程音频流\\n    */\\n    RCVoiceRoomLibClass.prototype.muteAllRemoteStreams = function (isMute) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var remoteTracksObj;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        this.rtc.isMuteOther = isMute;\\n                        return [4 /*yield*/, this.rtc.room.getRemoteTracks()];\\n                    case 1:\\n                        remoteTracksObj = _a.sent();\\n                        if (remoteTracksObj.length) {\\n                            if (isMute) {\\n                                return [2 /*return*/, this.rtc.room.unsubscribe(remoteTracksObj)];\\n                            }\\n                            else {\\n                                if (this.rtc.rtcTracks) {\\n                                    return [2 /*return*/, this.rtc.room.subscribe(this.rtc.rtcTracks)];\\n                                }\\n                                else {\\n                                    return [2 /*return*/, this.rtc.room.subscribe(remoteTracksObj)];\\n                                }\\n                            }\\n                        }\\n                        return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    /**\\n    *\\n    * 禁用本地麦克风\\n    *\\n    * @param isDisable 是否禁用( 不推流 )\\n    */\\n    RCVoiceRoomLibClass.prototype.disableAudioRecording = function (isDisable) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                this.rtc.isDisable = isDisable;\\n                if (isDisable) {\\n                    return [2 /*return*/, this.rtc.mute()];\\n                }\\n                else {\\n                    return [2 /*return*/, this.rtc.unmute()];\\n                }\\n                return [2 /*return*/];\\n            });\\n        });\\n    };\\n    /**\\n    *\\n    * 获取本地麦克风状态（ 流状态 ）\\n    *\\n    */\\n    RCVoiceRoomLibClass.prototype.isDisableAudioRecording = function () {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                return [2 /*return*/, this.rtc.isDisable];\\n            });\\n        });\\n    };\\n    /**\\n    *\\n    * 主动播放(解决 mac safari 无法自动播放问题 )\\n    *\\n    */\\n    RCVoiceRoomLibClass.prototype.enableSpeaker = function () {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                return [2 /*return*/, this.rtc.audioPlay()];\\n            });\\n        });\\n    };\\n    /**\\n    *\\n    * 发布自定义音频流\\n    * @param file 本地 MP3 file实例\\n    */\\n    RCVoiceRoomLibClass.prototype.createTrack = function (file) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                return [2 /*return*/, this.rtc.createTrack(file)];\\n            });\\n        });\\n    };\\n    /**\\n    *\\n    * 停止发布自定义音频流(调用时，默认已发布自定义音频流)\\n    *\\n    */\\n    RCVoiceRoomLibClass.prototype.stopCreateTrack = function () {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                return [2 /*return*/, this.rtc.stopCreateTrack()];\\n            });\\n        });\\n    };\\n    /**\\n    *\\n    * 发送自定义消息\\n    *\\n    */\\n    RCVoiceRoomLibClass.prototype.sendCustomMessage = function (messageType, content) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                return [2 /*return*/, this.im.messageUpdate(messageType, content)];\\n            });\\n        });\\n    };\\n    /**\\n    *\\n    * 直播预览\\n    *\\n    * @param videoNode\\n    */\\n    RCVoiceRoomLibClass.prototype.preview = function (o) {\\n        this.rtc.preview(o.videoNode);\\n    };\\n    return RCVoiceRoomLibClass;\\n}(events__WEBPACK_IMPORTED_MODULE_0__.EventEmitter));\\nvar RCVoiceRoomLib = new RCVoiceRoomLibClass();\\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (RCVoiceRoomLib);\\n\\n\\n//# sourceURL=webpack://@rongcloud/rcvoiceroomlib-v1/./src/index.ts?\");\n\n/***/ }),\n\n/***/ \"./src/loger.ts\":\n/*!**********************!*\\\n  !*** ./src/loger.ts ***!\n  \\**********************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\neval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   \\\"default\\\": () => (__WEBPACK_DEFAULT_EXPORT__)\\n/* harmony export */ });\\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config */ \\\"./src/config.ts\\\");\\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! events */ \\\"./node_modules/events/events.js\\\");\\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(events__WEBPACK_IMPORTED_MODULE_1__);\\n\\n\\nvar Loger = /** @class */ (function () {\\n    function Loger() {\\n        this.History = [];\\n    }\\n    Loger.prototype.log = function (target, t) {\\n        if (t === void 0) { t = \\\"\\\"; }\\n        if (!_config__WEBPACK_IMPORTED_MODULE_0__.debug)\\n            return;\\n        switch (typeof (target)) {\\n            case \\\"number\\\":\\n                console.log(\\\"its a number ===>\\\", target);\\n                break;\\n            case \\\"string\\\":\\n                console.log(target, t);\\n                break;\\n            case \\\"object\\\":\\n                console.log(\\\"its a object ===>\\\", target);\\n                break;\\n            case \\\"function\\\":\\n                console.log(\\\"its a function ===>\\\", target);\\n            default:\\n                // console.log(target);\\n                break;\\n        }\\n    };\\n    Loger.prototype._log = function (target) {\\n        var l = {\\n            mainStatus: 0,\\n            moduleNum: 0,\\n            readyNum: 0,\\n            loadingList: [],\\n            readyList: [],\\n            runningList: [],\\n            brokenList: [],\\n            unKnowStatesList: []\\n        };\\n        if (Array.isArray(target)) { //array类型.\\n            target.forEach(function (element) {\\n                if ((element instanceof events__WEBPACK_IMPORTED_MODULE_1__.EventEmitter) && (element.name)) { //队列内容是模块数据检查\\n                    l.moduleNum++;\\n                    switch (element.states) {\\n                        case 0:\\n                            l.loadingList.push(element.name);\\n                            break;\\n                        case 1:\\n                            l.readyList.push(element.name);\\n                            l.readyNum++;\\n                            break;\\n                        case 2:\\n                            l.runningList.push(element.name);\\n                            break;\\n                        case 9:\\n                            l.brokenList.push(element.name);\\n                            break;\\n                        default:\\n                            l.unKnowStatesList.push(element.name);\\n                            break;\\n                    }\\n                }\\n                else {\\n                    console.warn(\\\"数据非法\\\");\\n                }\\n            });\\n            this.History.push(l);\\n            if (this.History.length > 99) {\\n                this.History.shift();\\n            }\\n        }\\n        else { //普通对象类型\\n            console.warn(\\\"_log 方法存在异常调用\\\", target);\\n        }\\n    };\\n    Loger.prototype.history = function () {\\n        console.log(this.History);\\n    };\\n    Loger.prototype.warn = function (target, e) {\\n        if (e === void 0) { e = null; }\\n        console.warn(target, e);\\n    };\\n    //错误上报: 参数 e:原始错误信息  errtype:错误类型 mod:错误发生模块 errnum:错误编号;errmessage:错误消息\\n    Loger.prototype.error = function (e, errtype, mod, errnum, errmessage) {\\n        if (errtype === void 0) { errtype = \\\"0\\\"; }\\n        if (mod === void 0) { mod = null; }\\n        if (errnum === void 0) { errnum = \\\"00\\\"; }\\n        if (errmessage === void 0) { errmessage = \\\"unknow err\\\"; }\\n        var errModNum = \\\"0\\\";\\n        //遇到错误时尝试重启该模块.\\n        mod.reboot();\\n    };\\n    Loger.prototype._error = function (target, e) {\\n        if (e === void 0) { e = null; }\\n        throw new Error(target);\\n    };\\n    return Loger;\\n}());\\nvar loger = new Loger();\\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (loger);\\n//执行码 \\n/*\\n千位 执行类别  1数据错误 2网络错误 3硬件 4外部软件环境原因 5自身错误\\n百位 模块号 1主模块 2通信 3录音 4桥接 5pcm 0未找到具体模块\\n十位个位 具体命令\\n    00 未知错误;\\n    01 初始化错误;\\n    02 参数错误;\\n    03 ws接收数据错误;\\n    04 音频navigator获取失败;\\n    05 模块自身损坏\\n    06 native 相关错误\\n    */ \\n\\n\\n//# sourceURL=webpack://@rongcloud/rcvoiceroomlib-v1/./src/loger.ts?\");\n\n/***/ }),\n\n/***/ \"./src/modules/im/index.ts\":\n/*!*********************************!*\\\n  !*** ./src/modules/im/index.ts ***!\n  \\*********************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\neval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   \\\"default\\\": () => (__WEBPACK_DEFAULT_EXPORT__)\\n/* harmony export */ });\\n/* harmony import */ var _structure_modules__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../structure/modules */ \\\"./src/structure/modules.ts\\\");\\n/* harmony import */ var _rongcloud_imlib_next__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @rongcloud/imlib-next */ \\\"./node_modules/@rongcloud/imlib-next/dist/index.esm.js\\\");\\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../config */ \\\"./src/config.ts\\\");\\n/* harmony import */ var _loger__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../loger */ \\\"./src/loger.ts\\\");\\nvar __extends = (undefined && undefined.__extends) || (function () {\\n    var extendStatics = function (d, b) {\\n        extendStatics = Object.setPrototypeOf ||\\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\\n        return extendStatics(d, b);\\n    };\\n    return function (d, b) {\\n        if (typeof b !== \\\"function\\\" && b !== null)\\n            throw new TypeError(\\\"Class extends value \\\" + String(b) + \\\" is not a constructor or null\\\");\\n        extendStatics(d, b);\\n        function __() { this.constructor = d; }\\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\\n    };\\n})();\\nvar __assign = (undefined && undefined.__assign) || function () {\\n    __assign = Object.assign || function(t) {\\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\\n            s = arguments[i];\\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\\n                t[p] = s[p];\\n        }\\n        return t;\\n    };\\n    return __assign.apply(this, arguments);\\n};\\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\n    return new (P || (P = Promise))(function (resolve, reject) {\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\n        function rejected(value) { try { step(generator[\\\"throw\\\"](value)); } catch (e) { reject(e); } }\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\n    });\\n};\\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\\n    return g = { next: verb(0), \\\"throw\\\": verb(1), \\\"return\\\": verb(2) }, typeof Symbol === \\\"function\\\" && (g[Symbol.iterator] = function() { return this; }), g;\\n    function verb(n) { return function (v) { return step([n, v]); }; }\\n    function step(op) {\\n        if (f) throw new TypeError(\\\"Generator is already executing.\\\");\\n        while (_) try {\\n            if (f = 1, y && (t = op[0] & 2 ? y[\\\"return\\\"] : op[0] ? y[\\\"throw\\\"] || ((t = y[\\\"return\\\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\\n            if (y = 0, t) op = [op[0] & 2, t.value];\\n            switch (op[0]) {\\n                case 0: case 1: t = op; break;\\n                case 4: _.label++; return { value: op[1], done: false };\\n                case 5: _.label++; y = op[1]; op = [0]; continue;\\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\\n                default:\\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\\n                    if (t[2]) _.ops.pop();\\n                    _.trys.pop(); continue;\\n            }\\n            op = body.call(thisArg, _);\\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\\n    }\\n};\\n\\n\\n\\n\\nvar IM = /** @class */ (function (_super) {\\n    __extends(IM, _super);\\n    function IM(item) {\\n        var _this = _super.call(this) || this;\\n        _this.states = 0; //0初始化未完成 1就绪 2正在初始化  9浏览器不支持\\n        _this.userId = '';\\n        _this.roomId = '';\\n        _this.seatInfoList = [];\\n        _this.init(item);\\n        return _this;\\n    }\\n    //im注册\\n    IM.prototype.init = function (item) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var RongIMLib, Events, that;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        if (item.imLib) {\\n                            RongIMLib = item.imLib;\\n                        }\\n                        else {\\n                            RongIMLib = _rongcloud_imlib_next__WEBPACK_IMPORTED_MODULE_1__;\\n                        }\\n                        return [4 /*yield*/, RongIMLib.__addSDKVersion('rcvoiceroomlib', '2.0.0')\\n                            // 获取 IMLib 实例\\n                        ];\\n                    case 1:\\n                        _a.sent();\\n                        // 获取 IMLib 实例\\n                        return [4 /*yield*/, RongIMLib.init({ appkey: item.appkey })];\\n                    case 2:\\n                        // 获取 IMLib 实例\\n                        _a.sent();\\n                        Events = RongIMLib.Events;\\n                        this.chatRoom = RongIMLib;\\n                        this.body = RongIMLib;\\n                        that = this;\\n                        //添加消息监听\\n                        RongIMLib.addEventListener(Events.MESSAGES, function (m) {\\n                            var message = m.messages[0];\\n                            // console.log('message', message);\\n                            switch (message.messageType) {\\n                                case \\\"RC:VRLRefreshMsg\\\":\\n                                    that.emit(\\\"onRoomNotificationReceived\\\", {\\n                                        name: message.content.name,\\n                                        content: message.content.content,\\n                                    });\\n                                    switch (message.content.name.split(\\\"_\\\")[0]) {\\n                                        case \\\"RCAudienceJoinRoom\\\":\\n                                            that.chatRoom.getChatRoomInfo(that.roomId, {\\n                                                count: 0,\\n                                                order: 0\\n                                            }).then(function (result) {\\n                                                if (result.code == 0) {\\n                                                    that.emit(\\\"onAudienceEnter\\\", result.data.userCount);\\n                                                }\\n                                            });\\n                                            break;\\n                                        case \\\"RCAudienceLeaveRoom\\\":\\n                                            that.chatRoom.getChatRoomInfo(that.roomId, {\\n                                                count: 0,\\n                                                order: 0\\n                                            }).then(function (result) {\\n                                                if (result.code == 0) {\\n                                                    that.emit(\\\"onAudienceExit\\\", result.data.userCount);\\n                                                }\\n                                            });\\n                                            break;\\n                                        // case \\\"RCUserOnSeatSpeakingKey\\\":\\n                                        //     //console.log(\\\"originkey:\\\", message.content.name)\\n                                        //     that.emit(\\\"speakingStatusChange\\\", { index: message.content.name.split(\\\"_\\\")[1], speaking: message.content.content })\\n                                        //     break;\\n                                        // case \\\"VoiceRoomClosed\\\":\\n                                        //     //console.log(\\\"originkey:\\\", message.content.name)\\n                                        //     that.emit(\\\"VoiceRoomClosed\\\")\\n                                        //     break;\\n                                        // case \\\"VoiceRoomBackgroundChanged\\\":\\n                                        //     //console.log(\\\"originkey:\\\", message.content.name)\\n                                        //     that.emit(\\\"VoiceRoomBackgroundChanged\\\", message.content.content)\\n                                        //     break;\\n                                        // case \\\"VoiceRoomAgreeManagePick\\\":\\n                                        //     //console.log(\\\"originkey:\\\", message.content.name)\\n                                        //     that.emit(\\\"VoiceRoomAgreeManagePick\\\", message.content.content)\\n                                        //     break;\\n                                        // case \\\"VoiceRoomRejectManagePick\\\":\\n                                        //     //console.log(\\\"originkey:\\\", message.content.name)\\n                                        //     that.emit(\\\"VoiceRoomRejectManagePick\\\", message.content.content)\\n                                        //     break;\\n                                        default:\\n                                            break;\\n                                    }\\n                                    break;\\n                                case \\\"RC:VRLInviteMsg\\\":\\n                                    switch (message.content.content) {\\n                                        case \\\"RCKickUserOutRoomContent\\\":\\n                                            that.emit(\\\"RCKickUserOutRoomContent\\\", {\\n                                                targetId: message.content.targetId,\\n                                                userId: message.content.sendUserId,\\n                                            });\\n                                            break;\\n                                        case \\\"RCPickerUserSeatContent\\\":\\n                                            that.emit(\\\"RCPickerUserSeatContent\\\", {\\n                                                targetId: message.content.targetId,\\n                                                sendUserId: message.content.sendUserId,\\n                                            });\\n                                            //console.log(\\\"被抱上麦\\\");\\n                                            break;\\n                                        default:\\n                                            break;\\n                                    }\\n                                default:\\n                                    that.emit(\\\"onMessageReceived\\\", message);\\n                                    break;\\n                            }\\n                        });\\n                        /**\\n                         * 正在链接的事件状态\\n                         */\\n                        RongIMLib.addEventListener(Events.CONNECTING, function () {\\n                            // console.log('正在链接...')\\n                        });\\n                        /**\\n                         * 链接到服务器会触发这个事件\\n                         */\\n                        RongIMLib.addEventListener(Events.CONNECTED, function (res) {\\n                            console.log('连接成功', res);\\n                        });\\n                        /**\\n                         * 手动调用 disconnect 方法或者用户被踢下线 会触发这个事件\\n                         */\\n                        RongIMLib.addEventListener(Events.DISCONNECT, function (res) {\\n                            console.log('disconnect', res);\\n                            that.emit(\\\"connectioBreakOff\\\");\\n                        });\\n                        /**\\n                         * 链接出问题时，内部进行重新链接，会出发这个事件\\n                         */\\n                        RongIMLib.addEventListener(Events.SUSPEND, function () {\\n                            // console.log('链接中断,SDK 会尝试重连,业务层无需关心')\\n                        });\\n                        //聊天室KV更新\\n                        RongIMLib.addEventListener(Events.CHATROOM, function (event) {\\n                            if (event['chatroomDestroyed']) {\\n                                that.emit(\\\"chatroomDestroyed\\\");\\n                            }\\n                            else {\\n                                /**\\n                                * 聊天室 KV 存储数据更新  ^[0-9]*$\\n                                */\\n                                var updatedEntries = event.updatedEntries;\\n                                console.log(\\\"kvupdate:\\\", event.updatedEntries);\\n                                if (!updatedEntries || updatedEntries.length == 0) {\\n                                    return;\\n                                }\\n                                updatedEntries.forEach(function (obj) {\\n                                    switch (obj.key.split(\\\"_\\\")[0]) {\\n                                        case \\\"RCRoomInfoKey\\\":\\n                                            var roomInfo = JSON.parse(obj.value);\\n                                            that.emit(\\\"roomInfoDidUpdate\\\", { roomInfo: roomInfo });\\n                                            if (that.seatIndex > roomInfo.seatCount) {\\n                                                _loger__WEBPACK_IMPORTED_MODULE_3__.default.log(\\\"seatCount不对下麦\\\");\\n                                                that.emit(\\\"leaveSeat\\\");\\n                                            }\\n                                            if (that.seatInfoList.length > roomInfo.seatCount) {\\n                                                that.seatInfoList.length = roomInfo.seatCount;\\n                                            }\\n                                            break;\\n                                        case \\\"RCSeatInfoSeatPartPrefixKey\\\":\\n                                            //麦位操作\\n                                            //筛查被更改的麦位\\n                                            if (roomInfo && (obj.key.split(\\\"_\\\")[1] >= roomInfo.seatCount)) { //大于当前seatCount的属性不处理\\n                                                return;\\n                                            }\\n                                            var currentSeatInfo = that.seatInfoList[Number(obj.key.split(\\\"_\\\")[1])]; //当前麦位信息\\n                                            if (!obj.value)\\n                                                return; // 麦位信息不完整直接返回 \\n                                            var newSeatInfo = JSON.parse(obj.value); //传入的麦位信息\\n                                            if (that.seatIndex == obj.key.split(\\\"_\\\")[1]) { //当前在被操作的麦位上\\n                                                for (var key in currentSeatInfo) {\\n                                                    switch (key) {\\n                                                        case \\\"userId\\\":\\n                                                            // if (currentSeatInfo.userId != newSeatInfo.userId) {\\n                                                            //     that.emit(\\\"leaveSeat\\\");\\n                                                            // }\\n                                                            break;\\n                                                        case \\\"mute\\\":\\n                                                            if (currentSeatInfo.mute != newSeatInfo.mute) {\\n                                                                that.emit(\\\"mute\\\", newSeatInfo.mute);\\n                                                            }\\n                                                            break;\\n                                                        case \\\"status\\\":\\n                                                            switch (Number(newSeatInfo.status)) {\\n                                                                case _config__WEBPACK_IMPORTED_MODULE_2__.RCSeatStatus.RCSeatStatusEmpty:\\n                                                                    if (currentSeatInfo.status == 1) {\\n                                                                        that.emit(\\\"leaveSeat\\\");\\n                                                                        _loger__WEBPACK_IMPORTED_MODULE_3__.default.log(\\\"接受到消息下麦\\\");\\n                                                                    }\\n                                                                    break;\\n                                                                case _config__WEBPACK_IMPORTED_MODULE_2__.RCSeatStatus.RCSeatStatusLocking:\\n                                                                    _loger__WEBPACK_IMPORTED_MODULE_3__.default.log(\\\"锁麦位下麦\\\");\\n                                                                    that.emit(\\\"leaveSeat\\\");\\n                                                                    break;\\n                                                                default:\\n                                                                    break;\\n                                                            }\\n                                                        default:\\n                                                            break;\\n                                                    }\\n                                                }\\n                                            }\\n                                            that.seatInfoList[obj.key.split(\\\"_\\\")[1]] = JSON.parse(obj.value);\\n                                            that.emit(\\\"seatInfoDidUpdate\\\");\\n                                            break;\\n                                        case \\\"RCRequestSeatPrefixKey\\\":\\n                                            if (that.userId && obj.key.split(\\\"_\\\")[1] == that.userId) {\\n                                                if (obj.value == \\\"RCRequestSeatContentAccept\\\") {\\n                                                    that.emit(\\\"RequestSeatAccepted\\\");\\n                                                }\\n                                                else if (obj.value == \\\"RCRequestSeatContentDeny\\\") {\\n                                                    that.emit(\\\"RequestSeatRejected\\\");\\n                                                }\\n                                            }\\n                                            that.emit(\\\"RequestSeatListChanged\\\");\\n                                            break;\\n                                        default:\\n                                            break;\\n                                    }\\n                                });\\n                            }\\n                        });\\n                        that.emit(\\\"imReady\\\", RongIMLib);\\n                        return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    //im链接\\n    IM.prototype.connect = function (token) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var _this = this;\\n            return __generator(this, function (_a) {\\n                return [2 /*return*/, this.chatRoom.connect(token).then(function (res) {\\n                        if (res.code === 0) {\\n                            _this.emit(\\\"connectReady\\\");\\n                            if (res.data.userId) {\\n                                _this.userId = res.data.userId;\\n                            }\\n                        }\\n                        return res;\\n                    }).catch(function (error) {\\n                        _this.userId = '';\\n                        return error;\\n                    })];\\n            });\\n        });\\n    };\\n    //加入房间\\n    IM.prototype.joinRoom = function (o) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var that;\\n            var _this = this;\\n            return __generator(this, function (_a) {\\n                if (o.roomName) {\\n                    this._roomName = o.roomName;\\n                }\\n                this.roomId = o.roomId;\\n                that = this;\\n                return [2 /*return*/, this.chatRoom.joinChatRoom(o.roomId, {\\n                        count: -1\\n                    }).then(function (res) { return __awaiter(_this, void 0, void 0, function () {\\n                        return __generator(this, function (_a) {\\n                            // 加入聊天室成功\\n                            that.messageUpdate(\\\"RC:VRLRefreshMsg\\\", {\\n                                name: \\\"RCAudienceJoinRoom\\\",\\n                                content: that.userId\\n                            }).then(function () {\\n                                _loger__WEBPACK_IMPORTED_MODULE_3__.default.log('发送进房间消息成功');\\n                            }).catch(function (err) {\\n                                _loger__WEBPACK_IMPORTED_MODULE_3__.default._error('发送进房间消息失败:', err);\\n                            });\\n                            that.emit(\\\"joinRoom\\\", o);\\n                            return [2 /*return*/, '加入聊天室成功'];\\n                        });\\n                    }); }).catch(function (error) {\\n                        return error;\\n                    })];\\n            });\\n        });\\n    };\\n    //获取房间属性\\n    IM.prototype.getRoomInfo = function (o) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var data, ifinseat;\\n            var _this = this;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        console.log('房间属性:', o);\\n                        ifinseat = false;\\n                        return [4 /*yield*/, this.chatRoom.getAllChatRoomEntries(o.roomId).then(function (entries) {\\n                                // console.log('获取所有聊天室属性信息:', entries.data);\\n                                data = entries.data;\\n                                if (JSON.stringify(data) == '{}') {\\n                                    //空房间 初始化roominfo\\n                                    _this.setNewRoom(o);\\n                                    // ifinseat = true;\\n                                }\\n                                else {\\n                                    for (var key in data) {\\n                                        //this.roomInfo[i]=JSON.parse(info[i])\\n                                        if (key == \\\"RCRoomInfoKey\\\") {\\n                                            _this.roomInfo = JSON.parse(data[key]);\\n                                            _this.emit(\\\"roomInfoDidUpdate\\\", { roomInfo: _this.roomInfo });\\n                                        }\\n                                        else if (key.split(\\\"_\\\")[0] == 'RCSeatInfoSeatPartPrefixKey') {\\n                                            // console.log('data[key]', data[key]);\\n                                            _this.seatInfoList[key.split(\\\"_\\\")[1]] = JSON.parse(data[key]);\\n                                            if (JSON.parse(data[key])['userId'] && JSON.parse(data[key])['userId'] == _this.userId) {\\n                                                ifinseat = true;\\n                                            }\\n                                            _this.emit(\\\"seatInfoDidUpdate\\\");\\n                                        }\\n                                    }\\n                                }\\n                                ;\\n                            })];\\n                    case 1:\\n                        _a.sent();\\n                        return [2 /*return*/, ifinseat];\\n                }\\n            });\\n        });\\n    };\\n    //changeRoomInfo属性\\n    IM.prototype.changeRoomInfo = function (roominfo) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var seatCount, OldseatCount, key, defaultSeatInfo, value, list, m, arr, i;\\n            var _this = this;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        seatCount = roominfo.seatCount;\\n                        OldseatCount = this.roomInfo.seatCount;\\n                        key = 'RCRoomInfoKey';\\n                        defaultSeatInfo = {\\n                            status: 0,\\n                            mute: false,\\n                            speaking: false,\\n                        };\\n                        value = JSON.stringify(roominfo);\\n                        if (!(OldseatCount > seatCount)) return [3 /*break*/, 2];\\n                        list = [];\\n                        for (m = seatCount; m < OldseatCount; m++) {\\n                            list.push(this.chatRoom.forceRemoveChatRoomEntry(this.roomId, {\\n                                key: \\\"RCSeatInfoSeatPartPrefixKey_\\\" + m,\\n                                isSendNotification: false\\n                            }));\\n                        }\\n                        // console.log('removeChatRoomEntries', list);\\n                        return [4 /*yield*/, Promise.all(list).then(function (res) {\\n                                console.log(\\\"删除属性成功\\\", res);\\n                            }).catch(function (error) {\\n                                console.log(error);\\n                            })\\n                            // await this.chatRoom.removeChatRoomEntries(this.roomId, { entries: list, isAutoDelete: false }).then((res) => {\\n                            //     console.log(\\\"删除属性成功\\\", res);\\n                            // }).catch(error => {\\n                            //     console.log(error)\\n                            // })\\n                        ];\\n                    case 1:\\n                        // console.log('removeChatRoomEntries', list);\\n                        _a.sent();\\n                        _a.label = 2;\\n                    case 2: return [4 /*yield*/, this.chatRoom.forceSetChatRoomEntry(this.roomId, {\\n                            key: key,\\n                            value: value,\\n                            isAutoDelete: false,\\n                            isSendNotification: true,\\n                            notificationExtra: 'Change Count'\\n                        }).then(function (res) {\\n                            _this.roomInfo = roominfo;\\n                            _this.emit(\\\"roomInfoDidUpdate\\\", { roomInfo: _this.roomInfo });\\n                        }).catch(function (error) {\\n                            console.log(error);\\n                        })];\\n                    case 3:\\n                        _a.sent();\\n                        arr = [];\\n                        // let seatarr = []\\n                        for (i = 1; i < seatCount; i += 1) {\\n                            arr.push(this.chatRoom.forceSetChatRoomEntry(this.roomId, {\\n                                key: \\\"RCSeatInfoSeatPartPrefixKey_\\\" + i,\\n                                value: JSON.stringify(__assign({}, defaultSeatInfo)),\\n                                isAutoDelete: false,\\n                                isSendNotification: true,\\n                                notificationExtra: 'Change Count'\\n                            }));\\n                            this.seatInfoList[i] = __assign({}, defaultSeatInfo);\\n                        }\\n                        return [4 /*yield*/, Promise.all(arr).then(function (res) {\\n                                console.log(\\\"设置属性成功\\\", res);\\n                            }).catch(function (error) {\\n                                console.log(error);\\n                            })\\n                            // console.log('setChatRoomEntries', arr);\\n                            // await this.chatRoom.setChatRoomEntries(this.roomId, { entries: arr, isAutoDelete: false }).then((res) => {\\n                            //     console.log(\\\"设置属性成功\\\", res);\\n                            // }).catch(error => {\\n                            //     console.log(error)\\n                            // })\\n                        ];\\n                    case 4:\\n                        _a.sent();\\n                        // console.log('setChatRoomEntries', arr);\\n                        // await this.chatRoom.setChatRoomEntries(this.roomId, { entries: arr, isAutoDelete: false }).then((res) => {\\n                        //     console.log(\\\"设置属性成功\\\", res);\\n                        // }).catch(error => {\\n                        //     console.log(error)\\n                        // })\\n                        this.seatInfoList.length = seatCount;\\n                        // this.seatInfoList = seatarr\\n                        this.emit('changeRoomInfo');\\n                        return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    //设置到RoomLib属性\\n    IM.prototype.setNewRoom = function (parm) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var seatCount, key, defaultRoomInfo, value, defaultSeatInfo, arr, seatarr, i;\\n            var _this = this;\\n            return __generator(this, function (_a) {\\n                console.log('setNewRoom', parm);\\n                seatCount = 9;\\n                if (parm && parm.seatCount) {\\n                    seatCount = parm.seatCount;\\n                }\\n                else {\\n                    console.log('加入的房间不存在');\\n                    return [2 /*return*/];\\n                }\\n                key = 'RCRoomInfoKey';\\n                defaultRoomInfo = {\\n                    isFreeEnterSeat: false,\\n                    isLockAll: false,\\n                    isMuteAll: false,\\n                    roomName: this._roomName + \\\"\\\",\\n                    seatCount: seatCount //麦位数量\\n                };\\n                value = JSON.stringify(defaultRoomInfo);\\n                this.chatRoom.forceSetChatRoomEntry(this.roomId, {\\n                    key: key,\\n                    value: value,\\n                    isAutoDelete: false,\\n                    isSendNotification: true,\\n                    notificationExtra: 'Change Count'\\n                }).then(function (res) {\\n                    _this.roomInfo = defaultRoomInfo;\\n                    _this.emit(\\\"roomInfoDidUpdate\\\", { roomInfo: _this.roomInfo });\\n                }).catch(function (error) {\\n                    console.log(error);\\n                });\\n                defaultSeatInfo = {\\n                    status: 0,\\n                    mute: false,\\n                    speaking: false,\\n                };\\n                arr = [];\\n                seatarr = [];\\n                for (i = 0; i < seatCount; i += 1) {\\n                    arr.push({\\n                        key: \\\"RCSeatInfoSeatPartPrefixKey_\\\" + i,\\n                        value: JSON.stringify(__assign({}, defaultSeatInfo)),\\n                        isAutoDelete: false,\\n                        isSendNotification: true,\\n                        notificationExtra: 'Change Count'\\n                    });\\n                    seatarr.push(__assign({}, defaultSeatInfo));\\n                }\\n                this.chatRoom.setChatRoomEntries(parm.roomId, { entries: arr, isAutoDelete: false }).then(function (res) {\\n                    console.log(\\\"设置属性成功\\\");\\n                }).catch(function (error) {\\n                    console.log(error);\\n                });\\n                this.seatInfoList = seatarr;\\n                this.emit('setNewRoom');\\n                return [2 /*return*/];\\n            });\\n        });\\n    };\\n    //更新消息\\n    IM.prototype.messageUpdate = function (messageType, content) {\\n        var PersonMessage = this.chatRoom.registerMessageType(messageType, false, false, []);\\n        var message = new PersonMessage(content);\\n        var arr = [\\n            this.chatRoom\\n                .sendMessage({\\n                conversationType: this.chatRoom.ConversationType.CHATROOM,\\n                targetId: this.roomId\\n            }, message),\\n            // this.chatRoom\\n            //     .insertMessage(\\n            //         {\\n            //             conversationType: this.chatRoom.ConversationType.CHATROOM,\\n            //             targetId: this.roomId\\n            //         },\\n            //         {\\n            //             senderUserId: this.userId,\\n            //             messageType: messageType,\\n            //             content: content,\\n            //         })\\n        ];\\n        return Promise.all(arr);\\n    };\\n    //im离开房间\\n    IM.prototype.leaveRoom = function (roomid) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var _this = this;\\n            return __generator(this, function (_a) {\\n                return [2 /*return*/, this.chatRoom.quitChatRoom(roomid).then(function (res) {\\n                        //退出时清理房间数据\\n                        if (res.code === 0) {\\n                            _this.roomInfo = null;\\n                            _this.seatInfoList.length = 0;\\n                            // console.log('退出聊天室 ' + roomid)\\n                            _this.messageUpdate(\\\"RC:VRLRefreshMsg\\\", {\\n                                name: \\\"RCAudienceLeaveRoom\\\",\\n                                content: _this.userId,\\n                            });\\n                        }\\n                    })];\\n            });\\n        });\\n    };\\n    //设置麦位信息\\n    IM.prototype.seatInfoUpdate = function (key, value) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                //console.log(key);\\n                return [2 /*return*/, this.chatRoom.forceSetChatRoomEntry(this.roomId, {\\n                        key: key,\\n                        value: JSON.stringify(value),\\n                        notificationExtra: 'extra',\\n                        isAutoDelete: false,\\n                        isSendNotification: false,\\n                    }).then(function () {\\n                        return '设置聊天室属性成功!';\\n                    }).catch(function (err) {\\n                        return '设置聊天室属性失败:' + err;\\n                    })];\\n            });\\n        });\\n    };\\n    //排麦消息设置\\n    IM.prototype.RequestseatInfoUpdate = function (key, value) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                //console.log(key);\\n                return [2 /*return*/, this.chatRoom.forceSetChatRoomEntry(this.roomId, {\\n                        key: key,\\n                        value: value,\\n                        isAutoDelete: true,\\n                        type: 1,\\n                        isSendNotification: false,\\n                    }).then(function () {\\n                        return '排麦操作成功!';\\n                    }).catch(function (err) {\\n                        return '排麦操作失败:' + err;\\n                    })];\\n            });\\n        });\\n    };\\n    //删除麦位信息\\n    IM.prototype.seatInfoRemove = function (key) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                return [2 /*return*/, this.chatRoom.forceRemoveChatRoomEntry(this.roomId, {\\n                        key: key,\\n                        isSendNotification: false,\\n                    })];\\n            });\\n        });\\n    };\\n    return IM;\\n}(_structure_modules__WEBPACK_IMPORTED_MODULE_0__.default));\\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (IM);\\n\\n\\n//# sourceURL=webpack://@rongcloud/rcvoiceroomlib-v1/./src/modules/im/index.ts?\");\n\n/***/ }),\n\n/***/ \"./src/modules/rtc/index.ts\":\n/*!**********************************!*\\\n  !*** ./src/modules/rtc/index.ts ***!\n  \\**********************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\neval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   \\\"default\\\": () => (__WEBPACK_DEFAULT_EXPORT__)\\n/* harmony export */ });\\n/* harmony import */ var _structure_modules__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../structure/modules */ \\\"./src/structure/modules.ts\\\");\\n/* harmony import */ var _rongcloud_plugin_rtc__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @rongcloud/plugin-rtc */ \\\"./node_modules/@rongcloud/plugin-rtc/dist/index.esm.js\\\");\\n/* harmony import */ var _rongcloud_engine__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @rongcloud/engine */ \\\"./node_modules/@rongcloud/engine/dist/index.esm.js\\\");\\nvar __extends = (undefined && undefined.__extends) || (function () {\\n    var extendStatics = function (d, b) {\\n        extendStatics = Object.setPrototypeOf ||\\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\\n        return extendStatics(d, b);\\n    };\\n    return function (d, b) {\\n        if (typeof b !== \\\"function\\\" && b !== null)\\n            throw new TypeError(\\\"Class extends value \\\" + String(b) + \\\" is not a constructor or null\\\");\\n        extendStatics(d, b);\\n        function __() { this.constructor = d; }\\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\\n    };\\n})();\\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\n    return new (P || (P = Promise))(function (resolve, reject) {\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\n        function rejected(value) { try { step(generator[\\\"throw\\\"](value)); } catch (e) { reject(e); } }\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\n    });\\n};\\nvar __generator = (undefined && undefined.__generator) || function (thisArg, body) {\\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\\n    return g = { next: verb(0), \\\"throw\\\": verb(1), \\\"return\\\": verb(2) }, typeof Symbol === \\\"function\\\" && (g[Symbol.iterator] = function() { return this; }), g;\\n    function verb(n) { return function (v) { return step([n, v]); }; }\\n    function step(op) {\\n        if (f) throw new TypeError(\\\"Generator is already executing.\\\");\\n        while (_) try {\\n            if (f = 1, y && (t = op[0] & 2 ? y[\\\"return\\\"] : op[0] ? y[\\\"throw\\\"] || ((t = y[\\\"return\\\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\\n            if (y = 0, t) op = [op[0] & 2, t.value];\\n            switch (op[0]) {\\n                case 0: case 1: t = op; break;\\n                case 4: _.label++; return { value: op[1], done: false };\\n                case 5: _.label++; y = op[1]; op = [0]; continue;\\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\\n                default:\\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\\n                    if (t[2]) _.ops.pop();\\n                    _.trys.pop(); continue;\\n            }\\n            op = body.call(thisArg, _);\\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\\n    }\\n};\\nvar __spreadArray = (undefined && undefined.__spreadArray) || function (to, from, pack) {\\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\\n        if (ar || !(i in from)) {\\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\\n            ar[i] = from[i];\\n        }\\n    }\\n    return to.concat(ar || Array.prototype.slice.call(from));\\n};\\n\\n// import { installer, RCRTCCode, RCLivingType } from '@rongcloud/plugin-rtc'\\n\\n\\nvar RTC = /** @class */ (function (_super) {\\n    __extends(RTC, _super);\\n    // roomType: string;\\n    // videoNode: any;\\n    function RTC() {\\n        var _this = _super.call(this) || this;\\n        _this.states = 0; //0初始化未完成 1就绪 2正在初始化  9浏览器不支持\\n        _this.isAnchor = false; //身份标识 是否主播\\n        _this.audioTrack = null;\\n        _this.isDisable = false;\\n        _this.isMuteOther = false;\\n        _this.isMuteOwner = false;\\n        return _this;\\n        // this.init(item);\\n    }\\n    RTC.prototype.init = function (item) {\\n        /*初始化参数请参考下方参数说明*/\\n        var im = item.im;\\n        // console.log('item.rtcLib', item.rtcLib);\\n        if (item.rtcLib) {\\n            this.RTCLib = item.rtcLib;\\n        }\\n        else {\\n            this.RTCLib = _rongcloud_plugin_rtc__WEBPACK_IMPORTED_MODULE_1__;\\n        }\\n        var rtcClient = im.installPlugin(this.RTCLib.installer, {});\\n        this.body = rtcClient;\\n        // console.log('rtc初始化完成', rtcClient);\\n        if (!item.rtcLib) {\\n            console.log('内部各SDK版本', _rongcloud_engine__WEBPACK_IMPORTED_MODULE_2__.VersionManage.getInfo());\\n        }\\n        this.emit(\\\"ready\\\");\\n    };\\n    RTC.prototype.joinRoom = function (roomid) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                // console.log(\\\"加入rtcroom\\\", roomid);\\n                // console.log(\\\"我是不是主播\\\", this.isAnchor);\\n                if (this.isAnchor) {\\n                    this.joinLivingRoomAsAnchor(roomid);\\n                }\\n                else {\\n                    this.joinLivingRoomAsAudience(roomid);\\n                }\\n                return [2 /*return*/];\\n            });\\n        });\\n    };\\n    //主播加入rtcroom\\n    RTC.prototype.joinLivingRoomAsAnchor = function (roomid) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var _a, room, RTCTracks, MCUTracks, CDNUris, userIds, code, that, getTrack, publishTrack, remoteTracksObj, obj;\\n            return __generator(this, function (_b) {\\n                switch (_b.label) {\\n                    case 0: return [4 /*yield*/, this.body.joinLivingRoom(roomid, this.RTCLib.RCLivingType.AUDIO)\\n                        // 若加入失败，则 room、userIds、tracks 值为 undefined\\n                        // console.log(code);\\n                        // console.log(this.RTCLib.RCRTCCode.SUCCESS);\\n                    ];\\n                    case 1:\\n                        _a = _b.sent(), room = _a.room, RTCTracks = _a.RTCTracks, MCUTracks = _a.MCUTracks, CDNUris = _a.CDNUris, userIds = _a.userIds, code = _a.code;\\n                        // 若加入失败，则 room、userIds、tracks 值为 undefined\\n                        // console.log(code);\\n                        // console.log(this.RTCLib.RCRTCCode.SUCCESS);\\n                        if (code !== this.RTCLib.RCRTCCode.SUCCESS) {\\n                            return [2 /*return*/];\\n                        }\\n                        // this.rtcTracks = RTCTracks\\n                        // let object\\n                        // if (!this.isMuteOther) {\\n                        //     object = room.subscribe(RTCTracks);\\n                        // } else {\\n                        //     object = room.unsubscribe(RTCTracks);\\n                        // }\\n                        this.room = room;\\n                        that = this;\\n                        // 注册房间事件监听器，重复注册时，仅最后一次注册有效\\n                        room.registerRoomEventListener({\\n                            onRTCPeerConnectionCloseByException: function () {\\n                                that.emit('onRTCPeerConnectionCloseByException');\\n                            },\\n                            /**\\n                             * 当本端被剔出房间\\n                             * @description 被踢出房间可能是由于服务端超出一定时间未能收到 rtcPing 消息，所以认为己方离线。\\n                             * 另一种可能是己方 rtcPing 失败次数超出上限，故而主动断线\\n                             * @param byServer\\n                             * 当值为 false 时，说明本端 rtcPing 超时\\n                             * 当值为 true 时，说明本端收到被踢出房间通知\\n                             */\\n                            onKickOff: function (byServer) {\\n                            },\\n                            /**\\n                             * 接收到房间信令时回调，用户可通过房间实例的 `messageUpdate(name, content)` 接口发送信令\\n                             * @param name 信令名\\n                             * @param content 信令内容\\n                             * @param senderUserId 发送者 Id\\n                             * @param messageUId 消息唯一标识\\n                             */\\n                            onMessageReceive: function (name, content, senderUserId, messageUId) {\\n                                // console.log(\\\"eeeeeevent: 主播房间收到消息\\\", name, content, senderUserId, messageUId);\\n                            },\\n                            /**\\n                             * 监听房间属性变更通知\\n                             * @param name\\n                             * @param content\\n                             */\\n                            onRoomAttributeChange: function (name, content) {\\n                                // console.log(\\\"eeeeeevent: 主播房间属性变更\\\");\\n                            },\\n                            /**\\n                             * 房间用户禁用/启用音频\\n                             * @param audioTrack RCRemoteAudioTrack 类实例\\n                             */\\n                            onAudioMuteChange: function (audioTrack) {\\n                                //console.log(\\\"eeeeeevent: 主播房间 音频 静音\\\");\\n                            },\\n                            /**\\n                             * 房间用户禁用/启用视频\\n                             * @param videoTrack RCRemoteVideoTrack 类实例对象\\n                             */\\n                            onVideoMuteChange: function (videoTrack) {\\n                                //console.log(\\\"eeeeeevent: 主播房间 视频 静音\\\");\\n                            },\\n                            /**\\n                             * 房间内用户发布资源\\n                             * @param tracks 新发布的音轨与视轨数据列表，包含新发布的 RCRemoteAudioTrack 与 RCRemoteVideoTrack 实例\\n                             */\\n                            onTrackPublish: function (tracks) {\\n                                return __awaiter(this, void 0, void 0, function () {\\n                                    var obj;\\n                                    return __generator(this, function (_a) {\\n                                        // 按业务需求选择需要订阅资源，\\n                                        that.rtcTracks = tracks;\\n                                        if (!that.isMuteOther) {\\n                                            obj = room.subscribe(tracks);\\n                                        }\\n                                        else {\\n                                            obj = room.unsubscribe(tracks);\\n                                        }\\n                                        return [2 /*return*/];\\n                                    });\\n                                });\\n                            },\\n                            /**\\n                             * 房间用户取消发布资源\\n                             * @param tracks 被取消发布的音轨与视轨数据列表\\n                             * @description 当资源被取消发布时，SDK 内部会取消对相关资源的订阅，业务层仅需处理 UI 业务\\n                             */\\n                            onTrackUnpublish: function (tracks) {\\n                                //console.log(\\\"eeeeeevent: 主播房间取消发布\\\", tracks);\\n                            },\\n                            /*\\n                             * 房间内主播资源发布\\n                             * @param track RCRemoteTrack 类实例\\n                             * * 触发时机: 主播发布资源后\\n                             */\\n                            onAnchorTrackPublish: function (tracks) {\\n                                // that.rtcTracks = tracks\\n                                // let obj\\n                                // if (!that.isMuteOther) {\\n                                //     obj = room.subscribe(tracks);\\n                                // } else {\\n                                //     obj = room.unsubscribe(tracks);\\n                                // }\\n                            },\\n                            /*\\n                           * 房间内主播资源取消发布\\n                           * @param track RCRemoteTrack 类实例\\n                           * * 触发时机: 主播取消发布资源后\\n                           */\\n                            onAnchorTrackUnpublish: function (tracks) {\\n                                // console.log('onAnchorTrackUnpublish', tracks);\\n                            },\\n                            /**\\n                             * 订阅的音视频流通道已建立, track 已可以进行播放\\n                             * @param track RCRemoteTrack 类实例\\n                             */\\n                            onTrackReady: function (track) {\\n                                that.audioTrack = track;\\n                                if (track.isAudioTrack()) {\\n                                    // 音轨不需要传递播放控件\\n                                    track.play();\\n                                }\\n                                else {\\n                                    // 视轨需要一个 video 标签才可进行播放\\n                                    // const element = document.createElement('video')\\n                                    // document.body.appendChild(element)\\n                                    // track.play(element)\\n                                }\\n                            },\\n                            /**\\n                             * 人员加入\\n                             * @param userIds 加入的人员 id 列表\\n                             */\\n                            onUserJoin: function (userIds) {\\n                                //console.log(\\\"eeeeeevent: 主播房间 用户加入\\\", userIds);\\n                            },\\n                            /**\\n                             * 人员退出\\n                             * @param userIds\\n                             */\\n                            onUserLeave: function (userIds) {\\n                                //console.log(\\\"eeeeeevent: 主播房间 用户离开\\\", userIds);\\n                            },\\n                        });\\n                        return [4 /*yield*/, this.body.createMicrophoneAudioTrack()\\n                            //console.log(\\\"track\\\", getTrack.track)\\n                        ];\\n                    case 2:\\n                        getTrack = _b.sent();\\n                        //console.log(\\\"track\\\", getTrack.track)\\n                        this.tracks = getTrack.track;\\n                        if (!(this.isDisable || this.isMuteOwner)) return [3 /*break*/, 4];\\n                        return [4 /*yield*/, room.unpublish([getTrack.track])];\\n                    case 3:\\n                        publishTrack = _b.sent();\\n                        return [3 /*break*/, 6];\\n                    case 4: return [4 /*yield*/, room.publish([getTrack.track])];\\n                    case 5:\\n                        publishTrack = _b.sent();\\n                        _b.label = 6;\\n                    case 6:\\n                        // 若资源发布失败\\n                        if (publishTrack.code !== this.RTCLib.RCRTCCode.SUCCESS) {\\n                            console.log('资源发布失败:', publishTrack.code);\\n                        }\\n                        else {\\n                            // console.log(\\\"资源 发布成功\\\");\\n                            // const handler = (audioLevelReportList: { track, audioLevel: number }[]) => {\\n                            //     // let level: number = 0;\\n                            //     for (var i in audioLevelReportList) {\\n                            //         // level = audioLevelReportList[i].audioLevel\\n                            //         this.emit(\\\"audioChenge\\\", audioLevelReportList[i])\\n                            //         // console.log(\\\"audioreport++++++++++++++++:\\\", audioLevelReportList[i])\\n                            //     }\\n                            // }\\n                            // room.onAudioLevelChange(handler, 1000)\\n                            console.log(\\\"资源 发布 成功\\\");\\n                        }\\n                        return [4 /*yield*/, room.getRemoteTracks()];\\n                    case 7:\\n                        remoteTracksObj = _b.sent();\\n                        this.rtcTracks = false;\\n                        if (!remoteTracksObj.length) return [3 /*break*/, 11];\\n                        if (!this.isMuteOther) return [3 /*break*/, 9];\\n                        return [4 /*yield*/, room.unsubscribe(remoteTracksObj)];\\n                    case 8:\\n                        obj = _b.sent();\\n                        return [3 /*break*/, 11];\\n                    case 9: return [4 /*yield*/, room.subscribe(remoteTracksObj)];\\n                    case 10:\\n                        obj = _b.sent();\\n                        _b.label = 11;\\n                    case 11:\\n                        this.emit(\\\"joinRoom\\\");\\n                        return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    //观众加入rtcroom\\n    RTC.prototype.joinLivingRoomAsAudience = function (roomid) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var _a, room, RTCTracks, MCUTracks, CDNUris, userIds, code, obj, that;\\n            return __generator(this, function (_b) {\\n                switch (_b.label) {\\n                    case 0:\\n                        console.log(\\\"观众加入rtcroom\\\", roomid);\\n                        return [4 /*yield*/, this.body.joinLivingRoomAsAudience(roomid, this.RTCLib.RCLivingType.AUDIO)\\n                            // 若加入失败，则 room 值为 undefined\\n                        ];\\n                    case 1:\\n                        _a = _b.sent(), room = _a.room, RTCTracks = _a.RTCTracks, MCUTracks = _a.MCUTracks, CDNUris = _a.CDNUris, userIds = _a.userIds, code = _a.code;\\n                        // 若加入失败，则 room 值为 undefined\\n                        if (code !== this.RTCLib.RCRTCCode.SUCCESS) {\\n                            // console.log('join room as audience failed:', code)\\n                            return [2 /*return*/];\\n                        }\\n                        this.room = room;\\n                        this.tracks = MCUTracks;\\n                        // const MCUTracks = room.getRemoteMCUTracks();\\n                        if (MCUTracks.length != 0) {\\n                            obj = void 0;\\n                            this.rtcTracks = MCUTracks;\\n                            if (this.isMuteOther) {\\n                                obj = room.unsubscribe(MCUTracks);\\n                            }\\n                            else {\\n                                obj = room.subscribe(MCUTracks);\\n                            }\\n                        }\\n                        that = this;\\n                        room.registerRoomEventListener({\\n                            /**\\n                             * 主播加入\\n                             * @param userIds 加入的主播 id 列表\\n                             */\\n                            onAnchorJoin: function (userIds) {\\n                                //console.log(\\\"观众房间监听\\\");\\n                                //console.log(\\\"主播加入\\\", userIds)\\n                            },\\n                            /**\\n                             * 主播离开\\n                             * @param userIds 离开的主播 id 列表\\n                             */\\n                            onAnchorLeave: function (userIds) {\\n                            },\\n                            /*\\n                             * 房间内直播合流资源发布\\n                             * @param track RCRemoteTrack 类实例\\n                             * * 房间类型以第一个加入房间用户设置的直播类型为准\\n                             * * 房间直播类型为 RCLivingType.AUDIO_VIDEO ，tracks 包含 RCRemoteAudioTrack 与 RCRemoteVideoTrack 实例\\n                             * * 直播类型为 RCLivingType.AUDIO ， tracks 仅包含 RCRemoteAudioTrack 实例\\n                             */\\n                            onTrackPublish: function (tracks) {\\n                                that.rtcTracks = tracks;\\n                                var obj;\\n                                if (that.isMuteOther) {\\n                                    obj = room.unsubscribe(tracks);\\n                                }\\n                                else {\\n                                    obj = room.subscribe(tracks);\\n                                }\\n                            },\\n                            /*\\n                             * 房间内直播合流资源取消发布\\n                             * @param track RCRemoteTrack 类实例\\n                             * * 触发时机: 全部主播退出房间（因资源为多个主播发布的合流资源，单个主播取消发布不会触发）\\n                             */\\n                            onTrackUnpublish: function (tracks) {\\n                            },\\n                            onTrackReady: function (track) {\\n                                that.audioTrack = track;\\n                                // 订阅的音视频轨道已连接，可以根据业务需求选择性播放\\n                                if (track.isAudioTrack()) {\\n                                    // 音频播放无需传递组件\\n                                    track.play();\\n                                }\\n                                else {\\n                                    // 此处的 videoNode 为 <video> 标签元素实例\\n                                    //track.play(videoNode)\\n                                }\\n                            }\\n                        });\\n                        // const handler = (audioLevelReportList: { track, audioLevel: number }[]) => {\\n                        //     // let level: number = 0;\\n                        //     for (var i in audioLevelReportList) {\\n                        //         // level = audioLevelReportList[i].audioLevel\\n                        //         this.emit(\\\"audioChenge\\\", audioLevelReportList[i])\\n                        //     }\\n                        // }\\n                        // room.onAudioLevelChange(handler, 1000)\\n                        this.emit(\\\"joinRoom\\\");\\n                        return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    //离开rtc房间\\n    RTC.prototype.leaveRoom = function (roomid) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                if (roomid && roomid != '') {\\n                    if (this.isAnchor) { //在麦位退出房间或下麦\\n                        return [2 /*return*/, this.body.leaveRoom(this.room)];\\n                    }\\n                    else {\\n                        return [2 /*return*/, this.body.leaveLivingRoomAsAudience(this.room)];\\n                    }\\n                }\\n                else {\\n                    console.log('roomid 错误');\\n                    return [2 /*return*/];\\n                }\\n                return [2 /*return*/];\\n            });\\n        });\\n    };\\n    //闭麦\\n    RTC.prototype.mute = function () {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                if (!this.tracks || this.tracks.length == 0) {\\n                    throw new Error('非rtc主播,无法闭麦');\\n                }\\n                return [2 /*return*/, this.room.unpublish([this.tracks])];\\n            });\\n        });\\n    };\\n    //开麦\\n    RTC.prototype.unmute = function () {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                // console.log(this.tracks);\\n                if (!this.tracks || this.tracks.length == 0) {\\n                    throw new Error('非rtc主播,无法开麦');\\n                }\\n                return [2 /*return*/, this.room.publish([this.tracks])];\\n            });\\n        });\\n    };\\n    //上麦\\n    RTC.prototype.enterSeat = function (index) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var id, that;\\n            return __generator(this, function (_a) {\\n                this.currentSeat = index;\\n                if (this.isAnchor) {\\n                    console.log(\\\"用户已经在麦上\\\");\\n                    return [2 /*return*/];\\n                }\\n                id = this.room.getRoomId();\\n                that = this;\\n                return [2 /*return*/, this.leaveRoom(id).then(function () {\\n                        that.isAnchor = true;\\n                        return that.joinLivingRoomAsAnchor(id);\\n                    })];\\n            });\\n        });\\n    };\\n    //下麦\\n    RTC.prototype.leaveSeat = function (item) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var id, that;\\n            var _this = this;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        if (!this.isAnchor) {\\n                            console.log(\\\"已经是观众无法下麦\\\");\\n                            return [2 /*return*/];\\n                        }\\n                        if (this.tracks) {\\n                            this.tracks.destroy();\\n                        }\\n                        return [4 /*yield*/, this.stopCreateTrack()];\\n                    case 1:\\n                        _a.sent();\\n                        return [4 /*yield*/, this.room.getRoomId()];\\n                    case 2:\\n                        id = _a.sent();\\n                        if (item) {\\n                            return [2 /*return*/, this.leaveRoom(id)];\\n                        }\\n                        that = this;\\n                        return [2 /*return*/, this.leaveRoom(id).then(function () { return __awaiter(_this, void 0, void 0, function () {\\n                                return __generator(this, function (_a) {\\n                                    // console.log('this.leaveRoom(id)');\\n                                    that.isAnchor = false;\\n                                    return [2 /*return*/, that.joinLivingRoomAsAudience(id)];\\n                                });\\n                            }); })];\\n                }\\n            });\\n        });\\n    };\\n    //自定义音频流发布\\n    RTC.prototype.createTrack = function (item) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var _a, code, tracks, re;\\n            return __generator(this, function (_b) {\\n                switch (_b.label) {\\n                    case 0:\\n                        if (!this.isAnchor) {\\n                            console.log('非主播不能发布自定义音频流');\\n                            return [2 /*return*/];\\n                        }\\n                        return [4 /*yield*/, this.body.createLocalFileTracks('tag', // track 标识\\n                            item, // 网络资源 url 地址或者file 实例\\n                            {\\n                                withoutAudio: false,\\n                                withoutVideo: true, // 当值为 true 时将不产生视轨，默认为 false\\n                            })];\\n                    case 1:\\n                        _a = _b.sent(), code = _a.code, tracks = _a.tracks;\\n                        console.log('createLocalFileTracks.code', code);\\n                        // console.log('createLocalFileTracks.tracks', tracks,);\\n                        this.musicTracks = tracks;\\n                        if (!this.isDisable) return [3 /*break*/, 3];\\n                        return [4 /*yield*/, this.room.publish(__spreadArray([], tracks, true))];\\n                    case 2:\\n                        re = _b.sent();\\n                        return [3 /*break*/, 5];\\n                    case 3: return [4 /*yield*/, this.room.publish(__spreadArray(__spreadArray([], tracks, true), [this.tracks], false))];\\n                    case 4:\\n                        re = _b.sent();\\n                        _b.label = 5;\\n                    case 5:\\n                        console.log('发布自定义音频流发布', re.code);\\n                        return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    RTC.prototype.stopCreateTrack = function () {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var code;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0:\\n                        if (!this.isAnchor) {\\n                            console.log('非主播不能操作自定义音频流');\\n                            return [2 /*return*/];\\n                        }\\n                        if (!this.musicTracks) return [3 /*break*/, 2];\\n                        return [4 /*yield*/, this.room.unpublish(this.musicTracks)];\\n                    case 1:\\n                        code = (_a.sent()).code;\\n                        this.musicTracks[0].destroy();\\n                        console.log('停止发布自定义音频流', code);\\n                        _a.label = 2;\\n                    case 2: return [2 /*return*/];\\n                }\\n            });\\n        });\\n    };\\n    //兼容mac火狐不能自动播放问题\\n    RTC.prototype.preview = function (videoNode) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var o;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0: return [4 /*yield*/, this.body.createCameraVideoTrack('RongCloudRTC')];\\n                    case 1:\\n                        o = _a.sent();\\n                        return [2 /*return*/, o.track.play(videoNode)];\\n                }\\n            });\\n        });\\n    };\\n    //兼容mac火狐不能自动播放问题\\n    RTC.prototype.audioPlay = function () {\\n        return __awaiter(this, void 0, void 0, function () {\\n            return __generator(this, function (_a) {\\n                return [2 /*return*/, this.audioTrack.play()];\\n            });\\n        });\\n    };\\n    return RTC;\\n}(_structure_modules__WEBPACK_IMPORTED_MODULE_0__.default));\\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (RTC);\\n\\n\\n//# sourceURL=webpack://@rongcloud/rcvoiceroomlib-v1/./src/modules/rtc/index.ts?\");\n\n/***/ }),\n\n/***/ \"./src/structure/modules.ts\":\n/*!**********************************!*\\\n  !*** ./src/structure/modules.ts ***!\n  \\**********************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\neval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   \\\"default\\\": () => (__WEBPACK_DEFAULT_EXPORT__)\\n/* harmony export */ });\\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! events */ \\\"./node_modules/events/events.js\\\");\\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(events__WEBPACK_IMPORTED_MODULE_0__);\\n/* harmony import */ var _loger__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../loger */ \\\"./src/loger.ts\\\");\\nvar __extends = (undefined && undefined.__extends) || (function () {\\n    var extendStatics = function (d, b) {\\n        extendStatics = Object.setPrototypeOf ||\\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\\n        return extendStatics(d, b);\\n    };\\n    return function (d, b) {\\n        if (typeof b !== \\\"function\\\" && b !== null)\\n            throw new TypeError(\\\"Class extends value \\\" + String(b) + \\\" is not a constructor or null\\\");\\n        extendStatics(d, b);\\n        function __() { this.constructor = d; }\\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\\n    };\\n})();\\n\\n\\nvar Module = /** @class */ (function (_super) {\\n    __extends(Module, _super);\\n    function Module() {\\n        return _super !== null && _super.apply(this, arguments) || this;\\n    }\\n    Module.prototype.init = function (d) {\\n        if (d === void 0) { d = null; }\\n        _loger__WEBPACK_IMPORTED_MODULE_1__.default.log(\\\"default init: \\\" + this.name + \\\":\\\" + this.name, d);\\n    };\\n    Module.prototype.input = function (d) {\\n        _loger__WEBPACK_IMPORTED_MODULE_1__.default.log(\\\"default input: \\\" + this.name + \\\":\\\" + this.name, d);\\n    };\\n    Module.prototype.start = function () {\\n        _loger__WEBPACK_IMPORTED_MODULE_1__.default.log(\\\"default start: \\\" + this.name);\\n    };\\n    Module.prototype.stop = function () {\\n        _loger__WEBPACK_IMPORTED_MODULE_1__.default.log(\\\"default stop: \\\" + this.name);\\n    };\\n    Module.prototype.cancel = function () {\\n        _loger__WEBPACK_IMPORTED_MODULE_1__.default.log(\\\"default cancel\\\" + this.name);\\n    };\\n    Module.prototype.reboot = function () {\\n        var _this = this;\\n        switch (this.states) {\\n            case 1: //就绪.\\n                _loger__WEBPACK_IMPORTED_MODULE_1__.default.log(\\\"no Err please check code.\\\");\\n                break;\\n            case 2: //占用中.\\n                _loger__WEBPACK_IMPORTED_MODULE_1__.default.log(this.name + ' is on using. try reboot.');\\n                setTimeout(function () {\\n                    _this.cancel();\\n                }, 0);\\n            default:\\n                _loger__WEBPACK_IMPORTED_MODULE_1__.default.log(\\\"unknowStates at rebooting.\\\" + this.name);\\n                break;\\n        }\\n    };\\n    Module.prototype.reinit = function () {\\n        var _this = this;\\n        console.log(\\\"reiniting\\\");\\n        var initpro = new Promise(function (resolve, reject) {\\n            _this.init(1);\\n        });\\n        initpro.then(function (resolve) {\\n            var o = {\\n                from: _this.name,\\n                to: \\\"main\\\",\\n                data: \\\"reboot\\\",\\n            };\\n            _this.emit(\\\"output\\\", o);\\n            console.log(\\\"重启成功!\\\");\\n        });\\n        initpro.catch(function (e) {\\n            _loger__WEBPACK_IMPORTED_MODULE_1__.default.error(e, \\\"5\\\", _this, \\\"01\\\", \\\"重启失败放弃吧少年\\\");\\n        });\\n    };\\n    return Module;\\n}(events__WEBPACK_IMPORTED_MODULE_0__.EventEmitter));\\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Module);\\n\\n\\n//# sourceURL=webpack://@rongcloud/rcvoiceroomlib-v1/./src/structure/modules.ts?\");\n\n/***/ })\n\n/******/ \t});\n/************************************************************************/\n/******/ \t// The module cache\n/******/ \tvar __webpack_module_cache__ = {};\n/******/ \t\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/ \t\t// Check if module is in cache\n/******/ \t\tvar cachedModule = __webpack_module_cache__[moduleId];\n/******/ \t\tif (cachedModule !== undefined) {\n/******/ \t\t\treturn cachedModule.exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\t\t// no module.id needed\n/******/ \t\t\t// no module.loaded needed\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/ \t\n/******/ \t\t// Execute the module function\n/******/ \t\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n/******/ \t\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/ \t\n/************************************************************************/\n/******/ \t/* webpack/runtime/compat get default export */\n/******/ \t(() => {\n/******/ \t\t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t\t__webpack_require__.n = (module) => {\n/******/ \t\t\tvar getter = module && module.__esModule ?\n/******/ \t\t\t\t() => (module['default']) :\n/******/ \t\t\t\t() => (module);\n/******/ \t\t\t__webpack_require__.d(getter, { a: getter });\n/******/ \t\t\treturn getter;\n/******/ \t\t};\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/define property getters */\n/******/ \t(() => {\n/******/ \t\t// define getter functions for harmony exports\n/******/ \t\t__webpack_require__.d = (exports, definition) => {\n/******/ \t\t\tfor(var key in definition) {\n/******/ \t\t\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n/******/ \t\t\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n/******/ \t\t\t\t}\n/******/ \t\t\t}\n/******/ \t\t};\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/hasOwnProperty shorthand */\n/******/ \t(() => {\n/******/ \t\t__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/make namespace object */\n/******/ \t(() => {\n/******/ \t\t// define __esModule on exports\n/******/ \t\t__webpack_require__.r = (exports) => {\n/******/ \t\t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t\t}\n/******/ \t\t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t\t};\n/******/ \t})();\n/******/ \t\n/************************************************************************/\n/******/ \t\n/******/ \t// startup\n/******/ \t// Load entry module and return exports\n/******/ \t// This entry module can't be inlined because the eval devtool is used.\n/******/ \tvar __webpack_exports__ = __webpack_require__(\"./src/index.ts\");\n/******/ \t\n/******/ \treturn __webpack_exports__;\n/******/ })()\n;\n});"]}]}