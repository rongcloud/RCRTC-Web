{"remainingRequest":"/Users/libin/Desktop/Gwork/rcrtc-web/node_modules/babel-loader/lib/index.js!/Users/libin/Desktop/Gwork/rcrtc-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/libin/Desktop/Gwork/rcrtc-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/libin/Desktop/Gwork/rcrtc-web/src/components/ModifyUser.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/libin/Desktop/Gwork/rcrtc-web/src/components/ModifyUser.vue","mtime":1646965594209},{"path":"/Users/libin/Desktop/Gwork/rcrtc-web/babel.config.js","mtime":1635324574352},{"path":"/Users/libin/Desktop/Gwork/rcrtc-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/libin/Desktop/Gwork/rcrtc-web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/libin/Desktop/Gwork/rcrtc-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/libin/Desktop/Gwork/rcrtc-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnVybC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi51cmwtc2VhcmNoLXBhcmFtcy5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBSZXF1ZXN0IGZyb20gIi4uL3JlcXVlc3QvaW5kZXguanMiOwppbXBvcnQgeyBidG9rZW4gfSBmcm9tICIuLi9yZXF1ZXN0L0J1c2luZXNzVG9rZW4iOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRpYWxvZ0Zvcm1WaXNpYmxlOiBmYWxzZSwKICAgICAgdmFsdWU6ICIiLAogICAgICBwb3J0cmFpdDogIiIsCiAgICAgIHBvcnRyYWl0VXJsOiAiIiwKICAgICAgYnRva2VuOiBidG9rZW4KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICAvL+aJk+W8gOS4quS6uuS/oeaBr+e8lui+kQogICAgc2V0UG9wdXA6IGZ1bmN0aW9uIHNldFBvcHVwKCkgewogICAgICB0aGlzLnZhbHVlID0gdGhpcy4kc3RvcmUuc3RhdGUudXNlckluZm8udXNlck5hbWU7CiAgICAgIHRoaXMucG9ydHJhaXQgPSB0aGlzLiRzdG9yZS5zdGF0ZS51c2VySW5mby5wb3J0cmFpdCA/IHRoaXMuJHN0b3JlLnN0YXRlLmRlZmF1bHRBZGRyZXNzICsgdGhpcy4kc3RvcmUuc3RhdGUudXNlckluZm8ucG9ydHJhaXQgOiB0aGlzLiRzdG9yZS5zdGF0ZS5kZWZhdWx0QXZhdGFyVXJsOwogICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gdHJ1ZTsKICAgIH0sCiAgICAvL+WFs+mXreS4quS6uuS/oeaBr+e8lui+kQogICAgb25DbG9zZWQ6IGZ1bmN0aW9uIG9uQ2xvc2VkKCkgewogICAgICB0aGlzLnZhbHVlID0gIiI7CiAgICAgIHRoaXMucG9ydHJhaXRVcmwgPSAiIjsKICAgIH0sCiAgICAvL+eCueWHuwogICAgdXBkYXRlVmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZVZhbHVlKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKCF0aGlzLnZhbHVlKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi6J6N5LqRIFJUQzrnlKjmiLflkI3kuI3og73kuLrnqboiKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIFJlcXVlc3QudXNlclVwZGF0ZSh7CiAgICAgICAgdXNlck5hbWU6IHRoaXMudmFsdWUsCiAgICAgICAgcG9ydHJhaXQ6IHRoaXMucG9ydHJhaXRVcmwgfHwgdGhpcy4kc3RvcmUuc3RhdGUudXNlckluZm8ucG9ydHJhaXQKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5jb2RlID09IDEwMDAwKSB7CiAgICAgICAgICB2YXIgb2JqID0gewogICAgICAgICAgICBwb3J0cmFpdDogcmVzcG9uc2UuZGF0YS5kYXRhLnBvcnRyYWl0LAogICAgICAgICAgICB1c2VyTmFtZTogcmVzcG9uc2UuZGF0YS5kYXRhLm5hbWUKICAgICAgICAgIH07CgogICAgICAgICAgX3RoaXMuJHN0b3JlLmRpc3BhdGNoKCJ1cGRhdGVVc2VySW5mbyIsIG9iaik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzLiRzdG9yZS5kaXNwYXRjaCgic2hvd1RvYXN0IiwgewogICAgICAgICAgICB2YWx1ZTogcmVzcG9uc2UuZGF0YS5tc2cKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICAgIGNvbnNvbGUubG9nKCJlcnI6IiwgZXJyKTsKICAgICAgfSk7CiAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSBmYWxzZTsKICAgIH0sCiAgICAvL+eCueWHu+mAgOWHuueZu+W9lQogICAgbG9nT3V0OiBmdW5jdGlvbiBsb2dPdXQoKSB7CiAgICAgIHZhciBvYmogPSB7CiAgICAgICAgYXV0aG9yaXphdGlvbjogIiIsCiAgICAgICAgaW1Ub2tlbjogIiIsCiAgICAgICAgcG9ydHJhaXQ6ICIiLAogICAgICAgIHR5cGU6ICIiLAogICAgICAgIHVzZXJJZDogIiIsCiAgICAgICAgdXNlck5hbWU6ICIiCiAgICAgIH07CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJ1cGRhdGVVc2VySW5mbyIsIG9iaik7CiAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSBmYWxzZTsgLy8gdGhpcy4kZm9yY2VVcGRhdGUoKTsKCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvaG9tZSIpOwogICAgICB0aGlzLiRyb3V0ZXIuZ28oMCk7CiAgICB9LAogICAgLy9mb2N1c+WKqOS9nAogICAgb25PcGVuOiBmdW5jdGlvbiBvbk9wZW4oKSB7CiAgICAgIHRoaXMuJHJlZnMuZm9jdXNJbnB1dC5mb2N1cygpOwogICAgfSwKICAgIC8v5LiK5Lyg5aS05YOP5Zu+54mH5oiQ5Yqf5LmL5ZCOCiAgICBoYW5kbGVQb3B1cFN1Y2Nlc3M6IGZ1bmN0aW9uIGhhbmRsZVBvcHVwU3VjY2VzcyhyZXMsIGZpbGUpIHsKICAgICAgY29uc29sZS5sb2cocmVzLCBmaWxlKTsKCiAgICAgIGlmIChyZXNbImNvZGUiXSAmJiByZXNbImNvZGUiXSA9PSAxMDAwMCkgewogICAgICAgIHRoaXMucG9ydHJhaXRVcmwgPSByZXMuZGF0YTsKICAgICAgICB0aGlzLnBvcnRyYWl0ID0gVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlLnJhdyk7CiAgICAgIH0KICAgIH0sCiAgICAvL+S4iuS8oOWktOWDj+WbvueJh+S5i+WJjQogICAgYmVmb3JlUG9wdXBVcGxvYWQ6IGZ1bmN0aW9uIGJlZm9yZVBvcHVwVXBsb2FkKGZpbGUpIHsKICAgICAgY29uc29sZS5sb2coZmlsZSk7CiAgICAgIHZhciBpc0pQRyA9IGZpbGUudHlwZSA9PT0gImltYWdlL2pwZWciIHx8ICJpbWFnZS9wbmciOwogICAgICB2YXIgaXNMdDJNID0gZmlsZS5zaXplIC8gMTAyNCAvIDEwMjQgPCAyOwoKICAgICAgaWYgKCFpc0pQRykgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuS4iuS8oOWktOWDj+WbvueJh+WPquiDveaYryBKUEfjgIFwbmcg5qC85byPISIpOwogICAgICB9CgogICAgICBpZiAoIWlzTHQyTSkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuS4iuS8oOWktOWDj+WbvueJh+Wkp+Wwj+S4jeiDvei2hei/hyAyTUIhIik7CiAgICAgIH0KCiAgICAgIHJldHVybiBpc0pQRyAmJiBpc0x0Mk07CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["ModifyUser.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <el-dialog\n    :visible.sync=\"dialogFormVisible\"\n    :append-to-body=\"true\"\n    class=\"popup\"\n    width=\"2.93rem\"\n    top=\"25vh\"\n    @closed=\"onClosed\"\n    @opened=\"onOpen\"\n    :center=\"true\"\n  >\n    <el-upload\n      class=\"popup-uploader\"\n      :show-file-list=\"false\"\n      :action=\"this.$store.state.uploadAddress\"\n      :headers=\"{\n        authorization: this.$store.state.userInfo.authorization,\n        BusinessToken: btoken,\n      }\"\n      :on-success=\"handlePopupSuccess\"\n      :before-upload=\"beforePopupUpload\"\n    >\n      <div\n        :style=\"{ backgroundImage: 'url(' + portrait + ')' }\"\n        class=\"avatar\"\n      ></div>\n      <div class=\"popup-change-portrait\"></div>\n    </el-upload>\n\n    <el-input\n      v-model=\"value\"\n      autocomplete=\"off\"\n      :clearable=\"true\"\n      ref=\"focusInput\"\n      :maxlength=\"10\"\n      class=\"dialog-input\"\n    ></el-input>\n    <div slot=\"footer\" class=\"dialog-footer\">\n      <el-button\n        class=\"dialog-footer-primary\"\n        type=\"primary\"\n        @click=\"updateValue\"\n        >保存</el-button\n      >\n      <el-button class=\"dialog-footer-default\" @click=\"logOut\"\n        >退出登录</el-button\n      >\n    </div>\n  </el-dialog>\n</template>\n<script>\nimport Request from \"../request/index.js\";\nimport { btoken } from \"../request/BusinessToken\";\n\nexport default {\n  data() {\n    return {\n      dialogFormVisible: false,\n      value: \"\",\n      portrait: \"\",\n      portraitUrl: \"\",\n      btoken: btoken,\n    };\n  },\n  methods: {\n    //打开个人信息编辑\n    setPopup: function () {\n      this.value = this.$store.state.userInfo.userName;\n      this.portrait = this.$store.state.userInfo.portrait\n        ? this.$store.state.defaultAddress + this.$store.state.userInfo.portrait\n        : this.$store.state.defaultAvatarUrl;\n      this.dialogFormVisible = true;\n    },\n    //关闭个人信息编辑\n    onClosed: function () {\n      this.value = \"\";\n      this.portraitUrl = \"\";\n    },\n    //点击\n    updateValue: function () {\n      if (!this.value) {\n        this.$message.error(\"融云 RTC:用户名不能为空\");\n        return;\n      }\n      Request.userUpdate({\n        userName: this.value,\n        portrait: this.portraitUrl || this.$store.state.userInfo.portrait,\n      })\n        .then((response) => {\n          if (response.data.code == 10000) {\n            const obj = {\n              portrait: response.data.data.portrait,\n              userName: response.data.data.name,\n            };\n            this.$store.dispatch(\"updateUserInfo\", obj);\n          } else {\n            this.$store.dispatch(\"showToast\", {\n              value: response.data.msg,\n            });\n          }\n        })\n        .catch((err) => {\n          console.log(\"err:\", err);\n        });\n      this.dialogFormVisible = false;\n    },\n    //点击退出登录\n    logOut: function () {\n      const obj = {\n        authorization: \"\",\n        imToken: \"\",\n        portrait: \"\",\n        type: \"\",\n        userId: \"\",\n        userName: \"\",\n      };\n      this.$store.dispatch(\"updateUserInfo\", obj);\n      this.dialogFormVisible = false;\n      // this.$forceUpdate();\n      this.$router.push(\"/home\");\n      this.$router.go(0);\n    },\n    //focus动作\n    onOpen: function () {\n      this.$refs.focusInput.focus();\n    },\n    //上传头像图片成功之后\n    handlePopupSuccess: function (res, file) {\n      console.log(res, file);\n      if (res[\"code\"] && res[\"code\"] == 10000) {\n        this.portraitUrl = res.data;\n        this.portrait = URL.createObjectURL(file.raw);\n      }\n    },\n    //上传头像图片之前\n    beforePopupUpload(file) {\n      console.log(file);\n      const isJPG = file.type === \"image/jpeg\" || \"image/png\";\n      const isLt2M = file.size / 1024 / 1024 < 2;\n\n      if (!isJPG) {\n        this.$message.error(\"上传头像图片只能是 JPG、png 格式!\");\n      }\n      if (!isLt2M) {\n        this.$message.error(\"上传头像图片大小不能超过 2MB!\");\n      }\n      return isJPG && isLt2M;\n    },\n  },\n};\n</script>\n<style scoped>\n.popup {\n  font-size: 0.16rem;\n}\n.popup /deep/ .el-dialog__header {\n  padding: 0.2rem 0.2rem 0.05rem;\n}\n.popup /deep/ .el-dialog__footer {\n  padding: 0rem 0.2rem 0rem;\n}\n.popup /deep/ .el-dialog--center {\n  height: 2.84rem;\n  border-radius: 0.12rem;\n}\n.popup /deep/ .el-dialog__close {\n  font-weight: 500;\n  color: black;\n  font-size: 0.2rem;\n}\n.popup /deep/ .el-dialog__body {\n  padding: 0rem 0.2rem 0.3rem;\n  text-align: center;\n}\n.dialog-input /deep/ input {\n  background-color: #f3f4f5;\n  width: 2.33rem;\n  border: 0;\n}\n.popup-change-portrait {\n  width: 0.2rem;\n  height: 0.2rem;\n  border-radius: 50%;\n  background-repeat: no-repeat;\n  background-size: 0.2rem 0.2rem;\n  background-position: center;\n  background-image: url(../assets/home/changeportrait.png);\n  position: absolute;\n  top: 0.73rem;\n  right: 1.1rem;\n}\n.popup-uploader {\n  text-align: center;\n  width: 100%;\n  margin-bottom: 0.23rem;\n}\n\n.popup-uploader /deep/ .el-upload {\n  width: 0.7rem;\n  height: 0.7rem;\n  border-radius: 50%;\n  border: 1px solid;\n}\n\n.dialog-footer {\n  position: relative;\n  text-align: center;\n}\n.dialog-footer-primary {\n  width: 2.33rem;\n  margin-left: 0;\n  font-size: 0.17rem;\n  font-weight: 400;\n  background-color: #7983fe;\n  border-color: #7983fe;\n}\n\n.dialog-footer-default {\n  margin-top: 0.15rem;\n  margin-left: 0 !important;\n  border: 0;\n  font-size: 0.15rem;\n  font-weight: 400;\n  color: #020037;\n  padding: 0;\n  width: 0.6rem;\n  height: 0.21rem;\n  line-height: 0.21rem;\n}\n.avatar {\n  width: 0.7rem;\n  height: 0.7rem;\n  border-radius: 50%;\n  display: block;\n  background-repeat: no-repeat;\n  background-size: cover;\n  background-position: center;\n}\n</style>"],"sourceRoot":"src/components"}]}