{"remainingRequest":"/Users/cuifengbo/work/RCRTC-Git/rcrtc-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/cuifengbo/work/RCRTC-Git/rcrtc-web/src/components/room/ShieldingWords.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/Users/cuifengbo/work/RCRTC-Git/rcrtc-web/src/components/room/ShieldingWords.vue","mtime":1648104828595},{"path":"/Users/cuifengbo/work/RCRTC-Git/rcrtc-web/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cuifengbo/work/RCRTC-Git/rcrtc-web/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/cuifengbo/work/RCRTC-Git/rcrtc-web/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/cuifengbo/work/RCRTC-Git/rcrtc-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cuifengbo/work/RCRTC-Git/rcrtc-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKI1NoaWVsZGluZ1dvcmRzIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiBibGFjazsKfQouU2hpZWxkaW5nV29yZHMtZHJhd2VyIHsKICBmb250LXNpemU6IDAuMTZyZW07CiAgdGV4dC1hbGlnbjogY2VudGVyOwp9CgouU2hpZWxkaW5nV29yZHMtZHJhd2VyIC5lbC1kcmF3ZXIgewogIGJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDAuM3JlbTsKICBib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogMC4zcmVtOwogIGJhY2tncm91bmQtY29sb3I6IHJnYmEoOTIsIDgwLCAxNDksIDEpOwp9CgouU2hpZWxkaW5nV29yZHMtdGl0bGUgewogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogMC41NnJlbTsKICBsaW5lLWhlaWdodDogMC41N3JlbTsKICBjb2xvcjogI2ZmZmZmZjsKICBmb250LXNpemU6IDAuMTdyZW07CiAgZm9udC13ZWlnaHQ6IDUwMDsKfQouU2hpZWxkaW5nV29yZHMtdGl0bGUtYm9yZGVyIHsKICB3aWR0aDogMTAwJTsKICBoZWlnaHQ6IDAuMDFyZW07CiAgYm9yZGVyLWJvdHRvbTogMC4wMXJlbSBzb2xpZCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMik7CiAgdHJhbnNmb3JtOiBjYWxjKDAuNSk7Cn0KCi5TaGllbGRpbmdXb3Jkcy1ib2R5IHsKICB3aWR0aDogMTAwJTsKICBoZWlnaHQ6IDAuNThyZW07CiAgdGV4dC1hbGlnbjogbGVmdDsKICBib3JkZXItYm90dG9tOiAxcHggc29saWQgc2FkZGxlYnJvd247Cn0KCi5TaGllbGRpbmdXb3Jkcy1ib2R5LWtleTEgewogIGZvbnQtc2l6ZTogMC4xNHJlbTsKICBoZWlnaHQ6IDAuMnJlbTsKICBsaW5lLWhlaWdodDogMC4ycmVtOwogIGNvbG9yOiAjZmZmZmZmOwogIG1hcmdpbi10b3A6IDAuMTY1cmVtOwp9CgouU2hpZWxkaW5nV29yZHMtYm9keS1rZXkyIHsKICBmb250LXNpemU6IDAuMTJyZW07CiAgaGVpZ2h0OiAwLjE3cmVtOwogIGxpbmUtaGVpZ2h0OiAwLjE3cmVtOwogIGNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNjUpOwogIG1hcmdpbi10b3A6IDAuMDRyZW07Cn0KCi5TaGllbGRpbmdXb3Jkcy1mb290IHsKICB0ZXh0LWFsaWduOiBsZWZ0Owp9Ci8qIOagh+etvuagt+W8jyAqLwoKLmVsLXRhZyB7CiAgbWFyZ2luLWxlZnQ6IDAuMXJlbTsKICBtYXJnaW4tdG9wOiAwLjFyZW07CiAgZm9udC1zaXplOiAwLjE0cmVtICFpbXBvcnRhbnQ7CiAgYm9yZGVyOiBub25lICFpbXBvcnRhbnQ7CiAgYmFja2dyb3VuZDogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjIpICFpbXBvcnRhbnQ7CiAgY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMSkgIWltcG9ydGFudDsKfQouZWwtdGFnX19jbG9zZSB7CiAgY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMSkgIWltcG9ydGFudDsKICBtYXJnaW4tcmlnaHQ6IDAuMDVyZW0gIWltcG9ydGFudDsKfQouYnV0dG9uLW5ldy10YWcgewogIG1hcmdpbi1sZWZ0OiAwLjFyZW0gIWltcG9ydGFudDsKICBoZWlnaHQ6IDAuM3JlbTsKICBsaW5lLWhlaWdodDogMC4zcmVtOwogIGJvcmRlci1yYWRpdXM6IDAuMThyZW0gIWltcG9ydGFudDsKICB3aWR0aDogMC42cmVtOwogIG1hcmdpbi10b3A6IDAuMXJlbSAhaW1wb3J0YW50OwogIC8qIGZvbnQtc2l6ZTogMC4xNnJlbSAhaW1wb3J0YW50OyAqLwogIGJvcmRlcjogbm9uZSAhaW1wb3J0YW50OwogIHBhZGRpbmc6IDAgIWltcG9ydGFudDsKICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMikgIWltcG9ydGFudDsKICBjb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAxKSAhaW1wb3J0YW50Owp9Ci5pbnB1dC1uZXctdGFnIHsKICB3aWR0aDogMC45cmVtICFpbXBvcnRhbnQ7CiAgbWFyZ2luLWxlZnQ6IDAuMXJlbTsKICB2ZXJ0aWNhbC1hbGlnbjogYm90dG9tOwp9CgouaW5wdXQtbmV3LXRhZyAuZWwtaW5wdXRfX2lubmVyIHsKICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMikgIWltcG9ydGFudDsKICBjb2xvcjogI2ZmZmZmZiAhaW1wb3J0YW50OwogIGJvcmRlcjogbm9uZSAhaW1wb3J0YW50OwogIG1hcmdpbi10b3A6IDAuMXJlbSAhaW1wb3J0YW50Owp9Cg=="},{"version":3,"sources":["ShieldingWords.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiOA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"ShieldingWords.vue","sourceRoot":"src/components/room","sourcesContent":["<template>\n  <div id=\"ShieldingWords\">\n    <el-drawer\n      class=\"ShieldingWords-drawer\"\n      id=\"ShieldingWords-drawer\"\n      :visible.sync=\"ShieldingWords\"\n      :direction=\"direction\"\n      :withHeader=\"false\"\n      size=\"3.86rem\"\n      :show-close=\"true\"\n    >\n      <div class=\"ShieldingWords-title\">屏蔽词</div>\n      <div class=\"ShieldingWords-title-border\"></div>\n      <div class=\"ShieldingWords-body\">\n        <div class=\"ShieldingWords-body-key1\">设置屏蔽词（{{ num }}/10）</div>\n        <div class=\"ShieldingWords-body-key2\">\n          包含屏蔽词的发言将不会被其他用户看到\n        </div>\n      </div>\n      <div class=\"ShieldingWords-foot\">\n        <el-button\n          v-if=\"num < 10\"\n          class=\"button-new-tag\"\n          size=\"small\"\n          @click=\"showInput\"\n          >+</el-button\n        >\n        <el-tag\n          :key=\"tag.id\"\n          v-for=\"tag in this.$RCLiveRoomLib.im &&\n          this.$RCLiveRoomLib.im.roomType == 'live'\n            ? this.dynamicTags\n            : this.$store.state.sensitiveList\"\n          closable\n          :disable-transitions=\"false\"\n          @close=\"handleClose(tag)\"\n        >\n          {{ tag.name }}\n        </el-tag>\n        <el-input\n          class=\"input-new-tag\"\n          v-if=\"inputVisible\"\n          v-model=\"inputValue\"\n          :maxlength=\"10\"\n          ref=\"saveTagInput\"\n          size=\"small\"\n          @keyup.enter.native=\"handleInputConfirm\"\n          @blur=\"handleInputConfirm\"\n        >\n        </el-input>\n      </div>\n    </el-drawer>\n  </div>\n</template>\n<script>\nimport request from \"../../request/index\";\nexport default {\n  data() {\n    return {\n      ShieldingWords: false,\n      direction: \"btt\",\n      num: 0,\n      inputVisible: false,\n      inputValue: \"\",\n      dynamicTags: [],\n    };\n  },\n  components: {},\n  watch: {},\n  created() {},\n  mounted() {\n    this.$nextTick(() => {});\n  },\n  methods: {\n    openShieldingWords: function () {\n      this.ShieldingWords = true;\n      this.dynamicTags = [];\n      if (this.$RCLiveRoomLib.im && this.$RCLiveRoomLib.im.roomType == \"live\") {\n        let arr = [];\n        if (this.$RCLiveRoomLib.im._roomShields) {\n          for (var i = 0; i < this.$RCLiveRoomLib.im._roomShields.length; i++) {\n            let o = {\n              name: this.$RCLiveRoomLib.im._roomShields[i],\n              id: i,\n            };\n            arr.push(o);\n          }\n        }\n        this.dynamicTags = arr;\n        this.num = arr.length;\n      } else {\n        request\n          .getsensitiveList({\n            roomId: this.$RCVoiceRoomLib._roomidcli,\n          })\n          .then((res) => {\n            if (\n              res.data.code == 10000 &&\n              \"data\" in res.data &&\n              Object.prototype.toString.call(res.data.data).indexOf(\"Array\") !=\n                -1\n            ) {\n              this.num = res.data.data.length;\n              this.$store.dispatch(\"getsensitiveList\", [...res.data.data]);\n            }\n          });\n      }\n    },\n\n    closeShieldingWords: function () {\n      this.ShieldingWords = false;\n    },\n\n    handleClose(tag) {\n      if (this.$RCLiveRoomLib.im && this.$RCLiveRoomLib.im.roomType == \"live\") {\n        this.dynamicTags.splice(this.dynamicTags.indexOf(tag), 1);\n        this.num = this.dynamicTags.length;\n        let arr = [];\n        for (var n in this.dynamicTags) {\n          arr.push(this.dynamicTags[n].name);\n        }\n        this.$RCLiveRoomLib.updateKeyValue({\n          key: \"ROOM_INFO_PRE_shields\",\n          value: arr,\n        });\n        this.$RCLiveRoomLib.im._roomShields = arr;\n      } else {\n        request\n          .sensitiveDelet({\n            id: tag.id,\n          })\n          .then((res) => {\n            if (res.data.code == 10000) {\n              let array = JSON.parse(\n                JSON.stringify(this.$store.state.sensitiveList)\n              );\n              let index = -1;\n              for (let i = 0; i < array.length; i++) {\n                if (array[i][\"name\"] == tag.name) {\n                  index = i;\n                }\n              }\n              if (index > -1) {\n                array.splice(index, 1);\n              }\n              this.num = array.length;\n              // console.log(array);\n              this.$RCVoiceRoomLib.notifyVoiceRoom(\n                \"EVENT_DELETE_SHIELD\",\n                tag.name\n              );\n              this.$store.dispatch(\"getsensitiveList\", [...array]);\n            }\n          })\n          .catch((err) => {\n            console.log(\"err\", err);\n          });\n      }\n    },\n\n    showInput() {\n      this.inputVisible = true;\n      this.$nextTick(() => {\n        this.$refs.saveTagInput.$refs.input.focus();\n      });\n    },\n\n    handleInputConfirm() {\n      let inputValue = this.inputValue;\n      if (this.$RCLiveRoomLib.im && this.$RCLiveRoomLib.im.roomType == \"live\") {\n        console.log(\"inputValue\", inputValue);\n        if (inputValue && this.num < 10) {\n          this.dynamicTags.push({\n            id: Math.random(),\n            name: inputValue,\n          });\n          this.num = this.dynamicTags.length;\n\n          let arr = [];\n          for (var n in this.dynamicTags) {\n            arr.push(this.dynamicTags[n].name);\n          }\n\n          this.$RCLiveRoomLib.updateKeyValue({\n            key: \"ROOM_INFO_PRE_shields\",\n            value: arr,\n          });\n          this.$RCLiveRoomLib.im._roomShields = arr;\n        }\n      } else {\n        if (inputValue && this.num < 10) {\n          request\n            .sensitiveAdd({\n              id: 0,\n              name: inputValue,\n              roomId: this.$RCVoiceRoomLib._roomidcli,\n            })\n            .then((res) => {\n              if (res.data.code == 10000) {\n                let arr = JSON.parse(\n                  JSON.stringify(this.$store.state.sensitiveList)\n                );\n                arr.push(res.data.data);\n                // console.log(arr);\n                this.num = arr.length;\n                this.$store.dispatch(\"getsensitiveList\", [...arr]);\n                this.$RCVoiceRoomLib.notifyVoiceRoom(\n                  \"EVENT_ADD_SHIELD\",\n                  inputValue\n                );\n              }\n            })\n            .catch((err) => {\n              console.log(\"err\", err);\n            });\n        }\n      }\n\n      this.inputVisible = false;\n      this.inputValue = \"\";\n    },\n  },\n};\n</script>\n<style>\n#ShieldingWords {\n  background-color: black;\n}\n.ShieldingWords-drawer {\n  font-size: 0.16rem;\n  text-align: center;\n}\n\n.ShieldingWords-drawer .el-drawer {\n  border-top-left-radius: 0.3rem;\n  border-top-right-radius: 0.3rem;\n  background-color: rgba(92, 80, 149, 1);\n}\n\n.ShieldingWords-title {\n  width: 100%;\n  height: 0.56rem;\n  line-height: 0.57rem;\n  color: #ffffff;\n  font-size: 0.17rem;\n  font-weight: 500;\n}\n.ShieldingWords-title-border {\n  width: 100%;\n  height: 0.01rem;\n  border-bottom: 0.01rem solid rgba(255, 255, 255, 0.2);\n  transform: calc(0.5);\n}\n\n.ShieldingWords-body {\n  width: 100%;\n  height: 0.58rem;\n  text-align: left;\n  border-bottom: 1px solid saddlebrown;\n}\n\n.ShieldingWords-body-key1 {\n  font-size: 0.14rem;\n  height: 0.2rem;\n  line-height: 0.2rem;\n  color: #ffffff;\n  margin-top: 0.165rem;\n}\n\n.ShieldingWords-body-key2 {\n  font-size: 0.12rem;\n  height: 0.17rem;\n  line-height: 0.17rem;\n  color: rgba(255, 255, 255, 0.65);\n  margin-top: 0.04rem;\n}\n\n.ShieldingWords-foot {\n  text-align: left;\n}\n/* 标签样式 */\n\n.el-tag {\n  margin-left: 0.1rem;\n  margin-top: 0.1rem;\n  font-size: 0.14rem !important;\n  border: none !important;\n  background: rgba(255, 255, 255, 0.2) !important;\n  color: rgba(255, 255, 255, 1) !important;\n}\n.el-tag__close {\n  color: rgba(255, 255, 255, 1) !important;\n  margin-right: 0.05rem !important;\n}\n.button-new-tag {\n  margin-left: 0.1rem !important;\n  height: 0.3rem;\n  line-height: 0.3rem;\n  border-radius: 0.18rem !important;\n  width: 0.6rem;\n  margin-top: 0.1rem !important;\n  /* font-size: 0.16rem !important; */\n  border: none !important;\n  padding: 0 !important;\n  background: rgba(255, 255, 255, 0.2) !important;\n  color: rgba(255, 255, 255, 1) !important;\n}\n.input-new-tag {\n  width: 0.9rem !important;\n  margin-left: 0.1rem;\n  vertical-align: bottom;\n}\n\n.input-new-tag .el-input__inner {\n  background: rgba(255, 255, 255, 0.2) !important;\n  color: #ffffff !important;\n  border: none !important;\n  margin-top: 0.1rem !important;\n}\n</style>\n"]}]}