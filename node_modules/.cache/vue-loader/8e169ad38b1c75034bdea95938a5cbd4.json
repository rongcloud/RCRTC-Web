{"remainingRequest":"/Users/libin/Desktop/Gwork/rcrtc-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/libin/Desktop/Gwork/rcrtc-web/src/components/room/ShieldingWords.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/Users/libin/Desktop/Gwork/rcrtc-web/src/components/room/ShieldingWords.vue","mtime":1648176558559},{"path":"/Users/libin/Desktop/Gwork/rcrtc-web/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/libin/Desktop/Gwork/rcrtc-web/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/libin/Desktop/Gwork/rcrtc-web/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/libin/Desktop/Gwork/rcrtc-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/libin/Desktop/Gwork/rcrtc-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgojU2hpZWxkaW5nV29yZHMgewogIGJhY2tncm91bmQtY29sb3I6IGJsYWNrOwp9Ci5TaGllbGRpbmdXb3Jkcy1kcmF3ZXIgewogIGZvbnQtc2l6ZTogMC4xNnJlbTsKICB0ZXh0LWFsaWduOiBjZW50ZXI7Cn0KCi5TaGllbGRpbmdXb3Jkcy1kcmF3ZXIgLmVsLWRyYXdlciB7CiAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogMC4zcmVtOwogIGJvcmRlci10b3AtcmlnaHQtcmFkaXVzOiAwLjNyZW07CiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSg5MiwgODAsIDE0OSwgMSk7Cn0KCi5TaGllbGRpbmdXb3Jkcy10aXRsZSB7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAwLjU2cmVtOwogIGxpbmUtaGVpZ2h0OiAwLjU3cmVtOwogIGNvbG9yOiAjZmZmZmZmOwogIGZvbnQtc2l6ZTogMC4xN3JlbTsKICBmb250LXdlaWdodDogNTAwOwp9Ci5TaGllbGRpbmdXb3Jkcy10aXRsZS1ib3JkZXIgewogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogMC4wMXJlbTsKICBib3JkZXItYm90dG9tOiAwLjAxcmVtIHNvbGlkIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4yKTsKICB0cmFuc2Zvcm06IGNhbGMoMC41KTsKfQoKLlNoaWVsZGluZ1dvcmRzLWJvZHkgewogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogMC41OHJlbTsKICB0ZXh0LWFsaWduOiBsZWZ0OwogIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCBzYWRkbGVicm93bjsKfQoKLlNoaWVsZGluZ1dvcmRzLWJvZHkta2V5MSB7CiAgZm9udC1zaXplOiAwLjE0cmVtOwogIGhlaWdodDogMC4ycmVtOwogIGxpbmUtaGVpZ2h0OiAwLjJyZW07CiAgY29sb3I6ICNmZmZmZmY7CiAgbWFyZ2luLXRvcDogMC4xNjVyZW07Cn0KCi5TaGllbGRpbmdXb3Jkcy1ib2R5LWtleTIgewogIGZvbnQtc2l6ZTogMC4xMnJlbTsKICBoZWlnaHQ6IDAuMTdyZW07CiAgbGluZS1oZWlnaHQ6IDAuMTdyZW07CiAgY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC42NSk7CiAgbWFyZ2luLXRvcDogMC4wNHJlbTsKfQoKLlNoaWVsZGluZ1dvcmRzLWZvb3QgewogIHRleHQtYWxpZ246IGxlZnQ7Cn0KLyog5qCH562+5qC35byPICovCgouZWwtdGFnIHsKICBtYXJnaW4tbGVmdDogMC4xcmVtOwogIG1hcmdpbi10b3A6IDAuMXJlbTsKICBmb250LXNpemU6IDAuMTRyZW0gIWltcG9ydGFudDsKICBib3JkZXI6IG5vbmUgIWltcG9ydGFudDsKICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMikgIWltcG9ydGFudDsKICBjb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAxKSAhaW1wb3J0YW50Owp9Ci5lbC10YWdfX2Nsb3NlIHsKICBjb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAxKSAhaW1wb3J0YW50OwogIG1hcmdpbi1yaWdodDogMC4wNXJlbSAhaW1wb3J0YW50Owp9Ci5idXR0b24tbmV3LXRhZyB7CiAgbWFyZ2luLWxlZnQ6IDAuMXJlbSAhaW1wb3J0YW50OwogIGhlaWdodDogMC4zcmVtOwogIGxpbmUtaGVpZ2h0OiAwLjNyZW07CiAgYm9yZGVyLXJhZGl1czogMC4xOHJlbSAhaW1wb3J0YW50OwogIHdpZHRoOiAwLjZyZW07CiAgbWFyZ2luLXRvcDogMC4xcmVtICFpbXBvcnRhbnQ7CiAgLyogZm9udC1zaXplOiAwLjE2cmVtICFpbXBvcnRhbnQ7ICovCiAgYm9yZGVyOiBub25lICFpbXBvcnRhbnQ7CiAgcGFkZGluZzogMCAhaW1wb3J0YW50OwogIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4yKSAhaW1wb3J0YW50OwogIGNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDEpICFpbXBvcnRhbnQ7Cn0KLmlucHV0LW5ldy10YWcgewogIHdpZHRoOiAwLjlyZW0gIWltcG9ydGFudDsKICBtYXJnaW4tbGVmdDogMC4xcmVtOwogIHZlcnRpY2FsLWFsaWduOiBib3R0b207Cn0KCi5pbnB1dC1uZXctdGFnIC5lbC1pbnB1dF9faW5uZXIgewogIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4yKSAhaW1wb3J0YW50OwogIGNvbG9yOiAjZmZmZmZmICFpbXBvcnRhbnQ7CiAgYm9yZGVyOiBub25lICFpbXBvcnRhbnQ7CiAgbWFyZ2luLXRvcDogMC4xcmVtICFpbXBvcnRhbnQ7Cn0K"},{"version":3,"sources":["ShieldingWords.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgOA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"ShieldingWords.vue","sourceRoot":"src/components/room","sourcesContent":["<template>\n  <div id=\"ShieldingWords\">\n    <el-drawer\n      class=\"ShieldingWords-drawer\"\n      id=\"ShieldingWords-drawer\"\n      :visible.sync=\"ShieldingWords\"\n      :direction=\"direction\"\n      :withHeader=\"false\"\n      size=\"3.86rem\"\n      :show-close=\"true\"\n    >\n      <div class=\"ShieldingWords-title\">屏蔽词</div>\n      <div class=\"ShieldingWords-title-border\"></div>\n      <div class=\"ShieldingWords-body\">\n        <div class=\"ShieldingWords-body-key1\">设置屏蔽词（{{ num }}/10）</div>\n        <div class=\"ShieldingWords-body-key2\">\n          包含屏蔽词的发言将不会被其他用户看到\n        </div>\n      </div>\n      <div class=\"ShieldingWords-foot\">\n        <el-button\n          v-if=\"num < 10\"\n          class=\"button-new-tag\"\n          size=\"small\"\n          @click=\"showInput\"\n          >+</el-button\n        >\n        <el-tag\n          :key=\"tag.id\"\n          v-for=\"tag in this.$store.state.roomType == 'live'\n            ? this.dynamicTags\n            : this.$store.state.sensitiveList\"\n          closable\n          :disable-transitions=\"false\"\n          @close=\"handleClose(tag)\"\n        >\n          {{ tag.name }}\n        </el-tag>\n        <el-input\n          class=\"input-new-tag\"\n          v-if=\"inputVisible\"\n          v-model=\"inputValue\"\n          :maxlength=\"10\"\n          ref=\"saveTagInput\"\n          size=\"small\"\n          @keyup.enter.native=\"handleInputConfirm\"\n          @blur=\"handleInputConfirm\"\n        >\n        </el-input>\n      </div>\n    </el-drawer>\n  </div>\n</template>\n<script>\nimport request from \"../../request/index\";\nexport default {\n  data() {\n    return {\n      ShieldingWords: false,\n      direction: \"btt\",\n      num: 0,\n      inputVisible: false,\n      inputValue: \"\",\n      dynamicTags: [],\n    };\n  },\n  components: {},\n  watch: {},\n  created() {},\n  mounted() {\n    this.$nextTick(() => {});\n  },\n  methods: {\n    openShieldingWords: function () {\n      this.ShieldingWords = true;\n      this.dynamicTags = [];\n      if (this.$store.state.roomType == \"live\") {\n        let arr = [];\n        if (this.$RCLiveRoomLib.im._roomShields) {\n          for (var i = 0; i < this.$RCLiveRoomLib.im._roomShields.length; i++) {\n            let o = {\n              name: this.$RCLiveRoomLib.im._roomShields[i],\n              id: i,\n            };\n            arr.push(o);\n          }\n        }\n        this.dynamicTags = arr;\n        this.num = arr.length;\n      } else {\n        request\n          .getsensitiveList({\n            roomId: this.$RCVoiceRoomLib._roomidcli,\n          })\n          .then((res) => {\n            if (\n              res.data.code == 10000 &&\n              \"data\" in res.data &&\n              Object.prototype.toString.call(res.data.data).indexOf(\"Array\") !=\n                -1\n            ) {\n              this.num = res.data.data.length;\n              this.$store.dispatch(\"getsensitiveList\", [...res.data.data]);\n            }\n          });\n      }\n    },\n\n    closeShieldingWords: function () {\n      this.ShieldingWords = false;\n    },\n\n    handleClose(tag) {\n      if (this.$store.state.roomType == \"live\") {\n        this.dynamicTags.splice(this.dynamicTags.indexOf(tag), 1);\n        this.num = this.dynamicTags.length;\n        let arr = [];\n        for (var n in this.dynamicTags) {\n          arr.push(this.dynamicTags[n].name);\n        }\n        this.$RCLiveRoomLib.updateKeyValue({\n          key: \"ROOM_INFO_PRE_shields\",\n          value: arr,\n        });\n        this.$RCLiveRoomLib.im._roomShields = arr;\n      } else {\n        request\n          .sensitiveDelet({\n            id: tag.id,\n          })\n          .then((res) => {\n            if (res.data.code == 10000) {\n              let array = JSON.parse(\n                JSON.stringify(this.$store.state.sensitiveList)\n              );\n              let index = -1;\n              for (let i = 0; i < array.length; i++) {\n                if (array[i][\"name\"] == tag.name) {\n                  index = i;\n                }\n              }\n              if (index > -1) {\n                array.splice(index, 1);\n              }\n              this.num = array.length;\n              // console.log(array);\n              this.$RCVoiceRoomLib.notifyVoiceRoom(\n                \"EVENT_DELETE_SHIELD\",\n                tag.name\n              );\n              this.$store.dispatch(\"getsensitiveList\", [...array]);\n            }\n          })\n          .catch((err) => {\n            console.log(\"err\", err);\n          });\n      }\n    },\n\n    showInput() {\n      this.inputVisible = true;\n      this.$nextTick(() => {\n        this.$refs.saveTagInput.$refs.input.focus();\n      });\n    },\n\n    handleInputConfirm() {\n      let inputValue = this.inputValue;\n      if (this.$store.state.roomType == \"live\") {\n        console.log(\"inputValue\", inputValue);\n        if (inputValue && this.num < 10) {\n          this.dynamicTags.push({\n            id: Math.random(),\n            name: inputValue,\n          });\n          this.num = this.dynamicTags.length;\n\n          let arr = [];\n          for (var n in this.dynamicTags) {\n            arr.push(this.dynamicTags[n].name);\n          }\n\n          this.$RCLiveRoomLib.updateKeyValue({\n            key: \"ROOM_INFO_PRE_shields\",\n            value: arr,\n          });\n          this.$RCLiveRoomLib.im._roomShields = arr;\n        }\n      } else {\n        if (inputValue && this.num < 10) {\n          request\n            .sensitiveAdd({\n              id: 0,\n              name: inputValue,\n              roomId: this.$RCVoiceRoomLib._roomidcli,\n            })\n            .then((res) => {\n              if (res.data.code == 10000) {\n                let arr = JSON.parse(\n                  JSON.stringify(this.$store.state.sensitiveList)\n                );\n                arr.push(res.data.data);\n                // console.log(arr);\n                this.num = arr.length;\n                this.$store.dispatch(\"getsensitiveList\", [...arr]);\n                this.$RCVoiceRoomLib.notifyVoiceRoom(\n                  \"EVENT_ADD_SHIELD\",\n                  inputValue\n                );\n              }\n            })\n            .catch((err) => {\n              console.log(\"err\", err);\n            });\n        }\n      }\n\n      this.inputVisible = false;\n      this.inputValue = \"\";\n    },\n  },\n};\n</script>\n<style>\n#ShieldingWords {\n  background-color: black;\n}\n.ShieldingWords-drawer {\n  font-size: 0.16rem;\n  text-align: center;\n}\n\n.ShieldingWords-drawer .el-drawer {\n  border-top-left-radius: 0.3rem;\n  border-top-right-radius: 0.3rem;\n  background-color: rgba(92, 80, 149, 1);\n}\n\n.ShieldingWords-title {\n  width: 100%;\n  height: 0.56rem;\n  line-height: 0.57rem;\n  color: #ffffff;\n  font-size: 0.17rem;\n  font-weight: 500;\n}\n.ShieldingWords-title-border {\n  width: 100%;\n  height: 0.01rem;\n  border-bottom: 0.01rem solid rgba(255, 255, 255, 0.2);\n  transform: calc(0.5);\n}\n\n.ShieldingWords-body {\n  width: 100%;\n  height: 0.58rem;\n  text-align: left;\n  border-bottom: 1px solid saddlebrown;\n}\n\n.ShieldingWords-body-key1 {\n  font-size: 0.14rem;\n  height: 0.2rem;\n  line-height: 0.2rem;\n  color: #ffffff;\n  margin-top: 0.165rem;\n}\n\n.ShieldingWords-body-key2 {\n  font-size: 0.12rem;\n  height: 0.17rem;\n  line-height: 0.17rem;\n  color: rgba(255, 255, 255, 0.65);\n  margin-top: 0.04rem;\n}\n\n.ShieldingWords-foot {\n  text-align: left;\n}\n/* 标签样式 */\n\n.el-tag {\n  margin-left: 0.1rem;\n  margin-top: 0.1rem;\n  font-size: 0.14rem !important;\n  border: none !important;\n  background: rgba(255, 255, 255, 0.2) !important;\n  color: rgba(255, 255, 255, 1) !important;\n}\n.el-tag__close {\n  color: rgba(255, 255, 255, 1) !important;\n  margin-right: 0.05rem !important;\n}\n.button-new-tag {\n  margin-left: 0.1rem !important;\n  height: 0.3rem;\n  line-height: 0.3rem;\n  border-radius: 0.18rem !important;\n  width: 0.6rem;\n  margin-top: 0.1rem !important;\n  /* font-size: 0.16rem !important; */\n  border: none !important;\n  padding: 0 !important;\n  background: rgba(255, 255, 255, 0.2) !important;\n  color: rgba(255, 255, 255, 1) !important;\n}\n.input-new-tag {\n  width: 0.9rem !important;\n  margin-left: 0.1rem;\n  vertical-align: bottom;\n}\n\n.input-new-tag .el-input__inner {\n  background: rgba(255, 255, 255, 0.2) !important;\n  color: #ffffff !important;\n  border: none !important;\n  margin-top: 0.1rem !important;\n}\n</style>\n"]}]}