{"remainingRequest":"/Users/cuifengbo/work/RCRTC-Git/rcrtc-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/cuifengbo/work/RCRTC-Git/rcrtc-web/src/components/baseUi/liveChat.vue?vue&type=style&index=0&id=24639b0e&scoped=true&lang=css&","dependencies":[{"path":"/Users/cuifengbo/work/RCRTC-Git/rcrtc-web/src/components/baseUi/liveChat.vue","mtime":1648104828593},{"path":"/Users/cuifengbo/work/RCRTC-Git/rcrtc-web/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cuifengbo/work/RCRTC-Git/rcrtc-web/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/cuifengbo/work/RCRTC-Git/rcrtc-web/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/cuifengbo/work/RCRTC-Git/rcrtc-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cuifengbo/work/RCRTC-Git/rcrtc-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5tYWluQ29udGFpbmVyIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgdG9wOiA1MCU7CiAgbGVmdDogMHB4OwogIHdpZHRoOiA4MCU7CiAgaGVpZ2h0OiA0MCU7CiAgY29sb3I6ICNmZmY7CiAgdGV4dC1hbGlnbjogbGVmdDsKICBvdmVyZmxvdzogaGlkZGVuOwp9Ci5ib2R5Q29udGFpbmVyIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7Cn0KLmNoYXRJdGVtcyB7CiAgd2lkdGg6IGZpdC1jb250ZW50OwogIGZvbnQtc2l6ZTogMTRweDsKICBwYWRkaW5nOiAxMnB4OwogIG1hcmdpbjogMTJweDsKICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuMyk7CiAgYm9yZGVyLXJhZGl1czogMXB4IDZweCA2cHggNnB4OwogIHdvcmQtYnJlYWs6IGJyZWFrLWFsbDsKfQoudm9pY2VJY29uIHsKICB3aWR0aDogMjBweDsKICBoZWlnaHQ6IDIwcHg7CiAgYmFja2dyb3VuZDogdXJsKCIuLi8uLi9hc3NldHMvbGl2ZS9pY29uLW1pbml3YXZlLnBuZyIpIG5vLXJlcGVhdDsKICBiYWNrZ3JvdW5kLXNpemU6IDE4cHggMThweDsKfQo="},{"version":3,"sources":["liveChat.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"liveChat.vue","sourceRoot":"src/components/baseUi","sourcesContent":["<template>\n  <div\n    ref=\"container\"\n    class=\"mainContainer\"\n    :style=\"{ top: top + '%', height: height + '%' }\"\n    @mousedown=\"down()\"\n    @mouseup=\"up()\"\n    @mousemove=\"move()\"\n  >\n    <div class=\"bodyContainer\" ref=\"body\">\n      <div\n        class=\"chatItems\"\n        v-for=\"(item, i) in chatList\"\n        :key=\"i\"\n        v-html=\"item\"\n      ></div>\n    </div>\n  </div>\n</template>\n<script>\nlet dargStatus = {\n  free: 0,\n  darging: 1,\n};\n\nlet that;\nexport default {\n  name: \"chatroom\",\n  data: function () {\n    return {\n      chatList: [],\n      timeCantrol: true,\n    };\n  },\n  props: {\n    top: Number,\n    height: Number,\n  },\n  created() {\n    that = this;\n  },\n  updated() {\n    that.$refs.body.style.top =\n      that.$refs.container.offsetHeight - that.$refs.body.offsetHeight + \"px\";\n  },\n  mounted() {\n    // console.log(this.$store.state.roomInformation);\n    if (this.$store.state.roomInformation.roomType != 3) {\n      //非直播房间直接发送欢迎\n      this.welcome();\n    }\n\n    let status = dargStatus.free;\n    let startY;\n    let originY;\n\n    document.onmousemove = dargIng;\n    that.$refs.body.onmousedown = dargStart;\n    document.onmouseup = dargEnd;\n    that.$refs.body.onmouseout = dargEnd;\n\n    that.$refs.body.ontouchstart = dargStart;\n    document.ontouchend = dargEnd;\n    document.ontouchmove = dargIng;\n    let o = {\n      body: that.$refs.body,\n      container: that.$refs.container,\n    };\n    setTimeout(() => {\n      //放到异步队列防治获取到的高度不准确\n      setup(o);\n    }, 0);\n\n    function setup(option) {\n      if (that.$refs.body)\n        that.$refs.body.style.top =\n          option.container.offsetHeight - option.body.offsetHeight + \"px\";\n    }\n\n    function dargStart(e) {\n      // console.log(e.target.getAttribute(\"ower\"));\n      if (e.target.id) {\n        if (that.timeCantrol) {\n          that.timeCantrol = false;\n          that.$emit(\"nameClick\", {\n            userId: e.target.id,\n          });\n          setTimeout(() => {\n            that.timeCantrol = true;\n          }, 500);\n        }\n      }\n      if (e.changedTouches && e.changedTouches[0]) {\n        startY = e.changedTouches[0].clientY;\n      } else {\n        startY = e.clientY;\n      }\n\n      status = dargStatus.darging;\n      let v;\n      if (that.$refs.body.style.top) {\n        v = that.$refs.body.style.top.substr(\n          0,\n          that.$refs.body.style.top.length - 2\n        );\n      } else {\n        v = 0;\n      }\n      originY = Number(v);\n    }\n    function dargEnd() {\n      status = dargStatus.free;\n    }\n    function dargIng(e) {\n      let runningY;\n      if (e.changedTouches && e.changedTouches[0]) {\n        runningY = e.changedTouches[0].clientY;\n      } else {\n        runningY = e.clientY;\n      }\n      if (status == dargStatus.darging) {\n        let t;\n        t = Number(runningY - startY + originY);\n\n        if (\n          t < 0 &&\n          t > that.$refs.container.offsetHeight - that.$refs.body.offsetHeight\n        ) {\n          that.$refs.body.style.top = t + \"px\";\n        }\n      }\n    }\n  },\n  methods: {\n    ckd: function () {\n      //   console.log(\"ckd\", this);\n    },\n    push: function (message) {\n      // console.log(message);\n      this._data.chatList.push(message);\n    },\n    down: function () {\n      //  console.log(\"down\");\n    },\n    up: function () {\n      //  console.log(\"up\");\n    },\n    move: function () {\n      // console.log(\"move\");\n    },\n    gift: function () {\n      this.$emit(\"onGiftMsg\");\n    },\n    welcome: function () {\n      this.$nextTick(() => {\n        setTimeout(() => {\n          let roomtype = \"融云 RTC 语聊房\";\n          if (this.$store.state.roomInformation.roomType == 3) {\n            roomtype = \"融云 RTC 直播间\";\n          }\n          this.chatList = [\n            \"<span style='color:rgba(106, 159, 255, 1);'> 欢迎来到  \" +\n              this.$store.state.roomInformation.roomName +\n              \" </span>\",\n            \"<span style='color:rgba(106, 159, 255, 1)'> 感谢使用\" +\n              roomtype +\n              \"，请遵守相关法规，不要传播低俗、暴力等不良信息。欢迎您把使用过程中的感受反馈给我们。</span>\",\n          ];\n        }, 100);\n      });\n    },\n  },\n};\n</script>\n<style scoped>\n.mainContainer {\n  position: absolute;\n  top: 50%;\n  left: 0px;\n  width: 80%;\n  height: 40%;\n  color: #fff;\n  text-align: left;\n  overflow: hidden;\n}\n.bodyContainer {\n  position: absolute;\n}\n.chatItems {\n  width: fit-content;\n  font-size: 14px;\n  padding: 12px;\n  margin: 12px;\n  background: rgba(0, 0, 0, 0.3);\n  border-radius: 1px 6px 6px 6px;\n  word-break: break-all;\n}\n.voiceIcon {\n  width: 20px;\n  height: 20px;\n  background: url(\"../../assets/live/icon-miniwave.png\") no-repeat;\n  background-size: 18px 18px;\n}\n</style>"]}]}