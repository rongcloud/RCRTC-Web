{"remainingRequest":"/Users/cuifengbo/work/RCRTC-Git/rcrtc-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/cuifengbo/work/RCRTC-Git/rcrtc-web/src/components/ModifyUser.vue?vue&type=style&index=0&id=87a0a956&scoped=true&lang=css&","dependencies":[{"path":"/Users/cuifengbo/work/RCRTC-Git/rcrtc-web/src/components/ModifyUser.vue","mtime":1648104828591},{"path":"/Users/cuifengbo/work/RCRTC-Git/rcrtc-web/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cuifengbo/work/RCRTC-Git/rcrtc-web/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/cuifengbo/work/RCRTC-Git/rcrtc-web/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/cuifengbo/work/RCRTC-Git/rcrtc-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cuifengbo/work/RCRTC-Git/rcrtc-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoucG9wdXAgewogIGZvbnQtc2l6ZTogMC4xNnJlbTsKfQoucG9wdXAgL2RlZXAvIC5lbC1kaWFsb2dfX2hlYWRlciB7CiAgcGFkZGluZzogMC4ycmVtIDAuMnJlbSAwLjA1cmVtOwp9Ci5wb3B1cCAvZGVlcC8gLmVsLWRpYWxvZ19fZm9vdGVyIHsKICBwYWRkaW5nOiAwcmVtIDAuMnJlbSAwcmVtOwp9Ci5wb3B1cCAvZGVlcC8gLmVsLWRpYWxvZy0tY2VudGVyIHsKICBoZWlnaHQ6IDIuODRyZW07CiAgYm9yZGVyLXJhZGl1czogMC4xMnJlbTsKfQoucG9wdXAgL2RlZXAvIC5lbC1kaWFsb2dfX2Nsb3NlIHsKICBmb250LXdlaWdodDogNTAwOwogIGNvbG9yOiBibGFjazsKICBmb250LXNpemU6IDAuMnJlbTsKfQoucG9wdXAgL2RlZXAvIC5lbC1kaWFsb2dfX2JvZHkgewogIHBhZGRpbmc6IDByZW0gMC4ycmVtIDAuM3JlbTsKICB0ZXh0LWFsaWduOiBjZW50ZXI7Cn0KLmRpYWxvZy1pbnB1dCAvZGVlcC8gaW5wdXQgewogIGJhY2tncm91bmQtY29sb3I6ICNmM2Y0ZjU7CiAgd2lkdGg6IDIuMzNyZW07CiAgYm9yZGVyOiAwOwp9Ci5wb3B1cC1jaGFuZ2UtcG9ydHJhaXQgewogIHdpZHRoOiAwLjJyZW07CiAgaGVpZ2h0OiAwLjJyZW07CiAgYm9yZGVyLXJhZGl1czogNTAlOwogIGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7CiAgYmFja2dyb3VuZC1zaXplOiAwLjJyZW0gMC4ycmVtOwogIGJhY2tncm91bmQtcG9zaXRpb246IGNlbnRlcjsKICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoLi4vYXNzZXRzL2hvbWUvY2hhbmdlcG9ydHJhaXQucG5nKTsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgdG9wOiAwLjczcmVtOwogIHJpZ2h0OiAxLjFyZW07Cn0KLnBvcHVwLXVwbG9hZGVyIHsKICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgd2lkdGg6IDEwMCU7CiAgbWFyZ2luLWJvdHRvbTogMC4yM3JlbTsKfQoKLnBvcHVwLXVwbG9hZGVyIC9kZWVwLyAuZWwtdXBsb2FkIHsKICB3aWR0aDogMC43cmVtOwogIGhlaWdodDogMC43cmVtOwogIGJvcmRlci1yYWRpdXM6IDUwJTsKICBib3JkZXI6IDFweCBzb2xpZDsKfQoKLmRpYWxvZy1mb290ZXIgewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICB0ZXh0LWFsaWduOiBjZW50ZXI7Cn0KLmRpYWxvZy1mb290ZXItcHJpbWFyeSB7CiAgd2lkdGg6IDIuMzNyZW07CiAgbWFyZ2luLWxlZnQ6IDA7CiAgZm9udC1zaXplOiAwLjE3cmVtOwogIGZvbnQtd2VpZ2h0OiA0MDA7CiAgYmFja2dyb3VuZC1jb2xvcjogIzc5ODNmZTsKICBib3JkZXItY29sb3I6ICM3OTgzZmU7Cn0KCi5kaWFsb2ctZm9vdGVyLWRlZmF1bHQgewogIG1hcmdpbi10b3A6IDAuMTVyZW07CiAgbWFyZ2luLWxlZnQ6IDAgIWltcG9ydGFudDsKICBib3JkZXI6IDA7CiAgZm9udC1zaXplOiAwLjE1cmVtOwogIGZvbnQtd2VpZ2h0OiA0MDA7CiAgY29sb3I6ICMwMjAwMzc7CiAgcGFkZGluZzogMDsKICB3aWR0aDogMC42cmVtOwogIGhlaWdodDogMC4yMXJlbTsKICBsaW5lLWhlaWdodDogMC4yMXJlbTsKfQouYXZhdGFyIHsKICB3aWR0aDogMC43cmVtOwogIGhlaWdodDogMC43cmVtOwogIGJvcmRlci1yYWRpdXM6IDUwJTsKICBkaXNwbGF5OiBibG9jazsKICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0OwogIGJhY2tncm91bmQtc2l6ZTogY292ZXI7CiAgYmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyOwp9Cg=="},{"version":3,"sources":["ModifyUser.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ModifyUser.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <el-dialog\n    :visible.sync=\"dialogFormVisible\"\n    :append-to-body=\"true\"\n    class=\"popup\"\n    width=\"2.93rem\"\n    top=\"25vh\"\n    @closed=\"onClosed\"\n    @opened=\"onOpen\"\n    :center=\"true\"\n  >\n    <el-upload\n      class=\"popup-uploader\"\n      :show-file-list=\"false\"\n      :action=\"this.$store.state.uploadAddress\"\n      :headers=\"{\n        authorization: this.$store.state.userInfo.authorization,\n        BusinessToken: btoken,\n      }\"\n      :on-success=\"handlePopupSuccess\"\n      :before-upload=\"beforePopupUpload\"\n    >\n      <div\n        :style=\"{ backgroundImage: 'url(' + portrait + ')' }\"\n        class=\"avatar\"\n      ></div>\n      <div class=\"popup-change-portrait\"></div>\n    </el-upload>\n\n    <el-input\n      v-model=\"value\"\n      autocomplete=\"off\"\n      :clearable=\"true\"\n      ref=\"focusInput\"\n      :maxlength=\"10\"\n      class=\"dialog-input\"\n    ></el-input>\n    <div slot=\"footer\" class=\"dialog-footer\">\n      <el-button\n        class=\"dialog-footer-primary\"\n        type=\"primary\"\n        @click=\"updateValue\"\n        >保存</el-button\n      >\n      <el-button class=\"dialog-footer-default\" @click=\"logOut\"\n        >退出登录</el-button\n      >\n    </div>\n  </el-dialog>\n</template>\n<script>\nimport Request from \"../request/index.js\";\nimport { btoken } from \"../request/BusinessToken\";\n\nexport default {\n  data() {\n    return {\n      dialogFormVisible: false,\n      value: \"\",\n      portrait: \"\",\n      portraitUrl: \"\",\n      btoken: btoken,\n    };\n  },\n  methods: {\n    //打开个人信息编辑\n    setPopup: function () {\n      this.value = this.$store.state.userInfo.userName;\n      this.portrait = this.$store.state.userInfo.portrait\n        ? this.$store.state.defaultAddress + this.$store.state.userInfo.portrait\n        : this.$store.state.defaultAvatarUrl;\n      this.dialogFormVisible = true;\n    },\n    //关闭个人信息编辑\n    onClosed: function () {\n      this.value = \"\";\n      this.portraitUrl = \"\";\n    },\n    //点击\n    updateValue: function () {\n      if (!this.value) {\n        this.$message.error(\"融云 RTC:用户名不能为空\");\n        return;\n      }\n      Request.userUpdate({\n        userName: this.value,\n        portrait: this.portraitUrl || this.$store.state.userInfo.portrait,\n      })\n        .then((response) => {\n          if (response.data.code == 10000) {\n            const obj = {\n              portrait: response.data.data.portrait,\n              userName: response.data.data.name,\n            };\n            this.$store.dispatch(\"updateUserInfo\", obj);\n          } else {\n            this.$store.dispatch(\"showToast\", {\n              value: response.data.msg,\n            });\n          }\n        })\n        .catch((err) => {\n          console.log(\"err:\", err);\n        });\n      this.dialogFormVisible = false;\n    },\n    //点击退出登录\n    logOut: function () {\n      const obj = {\n        authorization: \"\",\n        imToken: \"\",\n        portrait: \"\",\n        type: \"\",\n        userId: \"\",\n        userName: \"\",\n      };\n      this.$store.dispatch(\"updateUserInfo\", obj);\n      this.dialogFormVisible = false;\n      // this.$forceUpdate();\n      this.$router.push(\"/home\");\n      this.$router.go(0);\n    },\n    //focus动作\n    onOpen: function () {\n      this.$refs.focusInput.focus();\n    },\n    //上传头像图片成功之后\n    handlePopupSuccess: function (res, file) {\n      console.log(res, file);\n      if (res[\"code\"] && res[\"code\"] == 10000) {\n        this.portraitUrl = res.data;\n        this.portrait = URL.createObjectURL(file.raw);\n      }\n    },\n    //上传头像图片之前\n    beforePopupUpload(file) {\n      console.log(file);\n      const isJPG = file.type === \"image/jpeg\" || \"image/png\";\n      const isLt2M = file.size / 1024 / 1024 < 2;\n\n      if (!isJPG) {\n        this.$message.error(\"上传头像图片只能是 JPG、png 格式!\");\n      }\n      if (!isLt2M) {\n        this.$message.error(\"上传头像图片大小不能超过 2MB!\");\n      }\n      return isJPG && isLt2M;\n    },\n  },\n};\n</script>\n<style scoped>\n.popup {\n  font-size: 0.16rem;\n}\n.popup /deep/ .el-dialog__header {\n  padding: 0.2rem 0.2rem 0.05rem;\n}\n.popup /deep/ .el-dialog__footer {\n  padding: 0rem 0.2rem 0rem;\n}\n.popup /deep/ .el-dialog--center {\n  height: 2.84rem;\n  border-radius: 0.12rem;\n}\n.popup /deep/ .el-dialog__close {\n  font-weight: 500;\n  color: black;\n  font-size: 0.2rem;\n}\n.popup /deep/ .el-dialog__body {\n  padding: 0rem 0.2rem 0.3rem;\n  text-align: center;\n}\n.dialog-input /deep/ input {\n  background-color: #f3f4f5;\n  width: 2.33rem;\n  border: 0;\n}\n.popup-change-portrait {\n  width: 0.2rem;\n  height: 0.2rem;\n  border-radius: 50%;\n  background-repeat: no-repeat;\n  background-size: 0.2rem 0.2rem;\n  background-position: center;\n  background-image: url(../assets/home/changeportrait.png);\n  position: absolute;\n  top: 0.73rem;\n  right: 1.1rem;\n}\n.popup-uploader {\n  text-align: center;\n  width: 100%;\n  margin-bottom: 0.23rem;\n}\n\n.popup-uploader /deep/ .el-upload {\n  width: 0.7rem;\n  height: 0.7rem;\n  border-radius: 50%;\n  border: 1px solid;\n}\n\n.dialog-footer {\n  position: relative;\n  text-align: center;\n}\n.dialog-footer-primary {\n  width: 2.33rem;\n  margin-left: 0;\n  font-size: 0.17rem;\n  font-weight: 400;\n  background-color: #7983fe;\n  border-color: #7983fe;\n}\n\n.dialog-footer-default {\n  margin-top: 0.15rem;\n  margin-left: 0 !important;\n  border: 0;\n  font-size: 0.15rem;\n  font-weight: 400;\n  color: #020037;\n  padding: 0;\n  width: 0.6rem;\n  height: 0.21rem;\n  line-height: 0.21rem;\n}\n.avatar {\n  width: 0.7rem;\n  height: 0.7rem;\n  border-radius: 50%;\n  display: block;\n  background-repeat: no-repeat;\n  background-size: cover;\n  background-position: center;\n}\n</style>"]}]}