{"remainingRequest":"/Users/cuifengbo/work/RCRTC-Git/rcrtc-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/cuifengbo/work/RCRTC-Git/rcrtc-web/src/components/Login.vue?vue&type=style&index=0&id=ef68022e&scoped=true&lang=css&","dependencies":[{"path":"/Users/cuifengbo/work/RCRTC-Git/rcrtc-web/src/components/Login.vue","mtime":1648104828590},{"path":"/Users/cuifengbo/work/RCRTC-Git/rcrtc-web/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cuifengbo/work/RCRTC-Git/rcrtc-web/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/cuifengbo/work/RCRTC-Git/rcrtc-web/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/cuifengbo/work/RCRTC-Git/rcrtc-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cuifengbo/work/RCRTC-Git/rcrtc-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLndyYXAgewogIGZvbnQtc2l6ZTogMC4xNHJlbTsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIG1pbi1oZWlnaHQ6IDYyNXB4OwogIG1pbi13aWR0aDogbm9uZTsKfQoKLmxvZ2luSW1nIHsKICB3aWR0aDogMS40OHJlbTsKICBoZWlnaHQ6IDAuNDZyZW07CiAgbWFyZ2luLXRvcDogMS4yMXJlbTsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDsKICBiYWNrZ3JvdW5kLXNpemU6IGNvdmVyOwogIGJhY2tncm91bmQtcG9zaXRpb246IGNlbnRlcjsKICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoLi4vYXNzZXRzL2xvZ28taWNvbi5wbmcpOwp9Ci5sb2dpbkZvcm0gewogIHdpZHRoOiAzcmVtOwogIG1hcmdpbjogMCBhdXRvOwogIGZvbnQtc2l6ZTogMC4xNnJlbTsKICBtYXJnaW4tdG9wOiAwLjg0cmVtOwp9Ci5sb2dpbkZvcm1QaG9uZSB7CiAgLyogZmxvYXQ6IGxlZnQ7ICovCn0KLmJ0bnMgewogIHRleHQtYWxpZ246IGNlbnRlcjsKfQoudmVyaWZpY2F0aW9uQ29kZUlucHV0IHsKICB3aWR0aDogM3JlbTsKfQoKLnZlcmlmaWNhdGlvbkNoZWNrYm94IHsKICBtYXJnaW4tdG9wOiAxLjM1cmVtOwogIHdpZHRoOiAzcmVtOwogIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICBmb250LXNpemU6IDAuMTFyZW07CiAgdGV4dC1hbGlnbjogbGVmdDsKICAvKiB3aGl0ZS1zcGFjZTogcHJlLWxpbmU7ICovCn0KLnZlcmlmaWNhdGlvbkNoZWNrYm94IC52ZXJpZmljYXRpb25WYWx1ZSAvZGVlcC8gLmVsLWNoZWNrYm94X19pbm5lciB7CiAgZm9udC1zaXplOiAwLjExcmVtOwogIGJvcmRlci1yYWRpdXM6IDUwJTsKfQoudmVyaWZpY2F0aW9uQ2hlY2tib3ggLnZlcmlmaWNhdGlvbkxpbmsgewogIGNvbG9yOiAjMDA5OWZmOwp9Ci52ZXJpZmljYXRpb25DaGVja2JveCAudmVyaWZpY2F0aW9uRWRpdGlvbiB7CiAgdGV4dC1hbGlnbjogY2VudGVyOwp9CgoudmVyaWZpY2F0aW9uQ29kZUlucHV0QnV0dG9uIC9kZWVwLyBzcGFuIHsKICBjb2xvcjogIzAwOTlmZjsKfQouZWwtY2hlY2tib3hfX2xhYmVsIHsKICB3aGl0ZS1zcGFjZTogcHJlLWxpbmU7Cn0K"},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoOA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"wrap\">\n    <span class=\"loginImg\"></span>\n    <el-form\n      class=\"loginForm\"\n      :model=\"loginForm\"\n      :rules=\"loginFormRules\"\n      ref=\"loginFormRef\"\n      label-position=\"top\"\n    >\n      <el-form-item prop=\"phone\" class=\"loginFormPhone\">\n        <el-input\n          v-model=\"loginForm.phone\"\n          class=\"verificationCodeInput\"\n          placeholder=\"请输入手机号\"\n          :clearable=\"true\"\n        ></el-input>\n      </el-form-item>\n      <el-form-item prop=\"verificationCode\">\n        <el-input\n          v-model=\"loginForm.verificationCode\"\n          class=\"verificationCodeInput\"\n          :clearable=\"true\"\n        >\n          <template slot=\"append\">\n            <el-button\n              v-if=\"loginForm.showloginCode\"\n              type=\"primary\"\n              @click=\"getloginPhoneCode\"\n              class=\"verificationCodeInputButton\"\n              >获取验证码</el-button\n            >\n            <div v-else>{{ loginForm.count }}</div>\n          </template>\n        </el-input>\n      </el-form-item>\n      <el-form-item class=\"btns\">\n        <el-button type=\"primary\" @click=\"login\" class=\"verificationCodeInput\"\n          >登录</el-button\n        >\n      </el-form-item>\n    </el-form>\n    <div class=\"verificationCheckbox\">\n      <el-checkbox v-model=\"checked\" class=\"verificationValue\"> </el-checkbox>\n      同意<a @click=\"clickLink\" class=\"verificationLink\">《注册条款》</a>\n      和\n      <a class=\"verificationLink\" @click=\"clickLinksec\">《隐私政策》</a>\n      并新登录即注册开通融云发者账号\n      <div class=\"verificationEdition\">融云 RTC 1.0.1</div>\n    </div>\n  </div>\n</template>\n<script>\nimport Request from \"../request/index.js\";\n// import RCVoiceRoomLib from \"@rongcloud/rcvoiceroomlib-v1\";\nexport default {\n  data() {\n    // 验证手机号是否合法\n    var checkMobile = (rules, value, callback) => {\n      const regMobile =\n        /^(0|86|17951)?(13[0-9]|14[57]|15[0-9]|16[0-9]|17[678]|18[0-9]|19[0-9])[0-9]{8}$/;\n      if (regMobile.test(value) == true) {\n        if (this.loginForm.verificationCode.length == 6) {\n          this.buttonSubmit = false;\n        }\n        return callback();\n      } else {\n        this.buttonSubmit = true;\n        callback(new Error(\"请输入合法的手机号\"));\n      }\n    };\n    // 验证输入的手机号验证码是否和存储的验证码相同\n    var checkPhoneCode = (rules, value, callback) => {\n      if (value.length == 6) {\n        if (this.loginForm.phone.length == 11) {\n          this.buttonSubmit = false;\n        }\n        return callback();\n      } else {\n        this.buttonSubmit = true;\n        callback(new Error(\"验证码错误\"));\n      }\n      // if (value == this.loginForm.contenttext) {\n      //   return callback();\n      // } else {\n      //   callback(new Error(\"验证码错误\"));\n      // }\n    };\n    return {\n      // 表单\n      loginForm: {\n        phone: \"18889896868\",\n        verificationCode: \"222222\", //表单中展示的验证码\n        contenttext: \"\", //向手机号发送的随机验证码\n        timer: null,\n        showloginCode: true, //判断展示‘获取验证码’或‘倒计时’\n        count: \"\", //倒计时时间\n        platform: \"web\",\n      },\n      checked: true,\n      buttonSubmit: true,\n      // 验证规则\n      loginFormRules: {\n        phone: [\n          { required: true, message: \"请输入手机号\", trigger: \"blur\" },\n          { validator: checkMobile, trigger: \"blur\" },\n        ],\n        verificationCode: [\n          { required: true, message: \"请输入手机验证码\", trigger: \"blur\" },\n          { validator: checkPhoneCode, trigger: \"blur\" },\n        ],\n      },\n    };\n  },\n  methods: {\n    // 获取手机验证码\n    getloginPhoneCode() {\n      const regMobile =\n        /^(0|86|17951)?(13[0-9]|14[0-9]|15[0-9]|16[0-9]|17[0-9]|18[0-9]|19[0-9])[0-9]{8}$/;\n      // 如果未输入手机号，结束执行\n      if (!regMobile.test(this.loginForm.phone)) {\n        return;\n      }\n      Request.sendCode({ mobile: this.loginForm.phone })\n        .then((response) => {\n          if (response.data.code == 10000) {\n            this.$message({\n              showClose: true,\n              message: \"获取验证码成功！\",\n              type: \"success\",\n            });\n            this.loginForm.showloginCode = false;\n            this.countDown(59);\n          } else {\n            this.$message({\n              showClose: true,\n              message: response.data.msg,\n              type: \"error\",\n            });\n          }\n        })\n        .catch(() => {\n          this.$message({\n            showClose: true,\n            message: \"获取验证码失败\",\n            type: \"error\",\n          });\n        });\n    },\n\n    // 开始登录\n    login() {\n      console.log(this.loginForm.phone);\n      if (this.checked) {\n        const regMobile =\n          /^(0|86|17951)?(13[0-9]|14[0-9]|15[0-9]|16[0-9]|17[0-9]|18[0-9]|19[0-9])[0-9]{8}$/;\n        // 如果未输入手机号，结束执行\n        if (\n          !regMobile.test(this.loginForm.phone) ||\n          this.loginForm.verificationCode.length != 6\n        ) {\n          return;\n        }\n        Request.userLand({\n          mobile: this.loginForm.phone,\n          verifyCode: this.loginForm.verificationCode,\n          userName: \"\",\n          portrait: \"\",\n          deviceId: \"\",\n          platform: \"web\",\n        })\n          .then((response) => {\n            if (response.data.code == 10000) {\n              this.$store.dispatch(\"updateUserInfo\", response.data.data);\n              this.$router.replace(\"/home\");\n              // this.$RCVoiceRoomLib.connect(response.data.data.imToken);\n              // this.$RCLiveRoomLib.connect(response.data.data.imToken);\n            } else {\n              this.$message({\n                showClose: true,\n                message: response.data.msg,\n                type: \"error\",\n              });\n            }\n          })\n          .catch((err) => {\n            this.$message({\n              showClose: true,\n              message: err,\n              type: \"error\",\n            });\n          });\n      } else {\n        this.$message({\n          showClose: true,\n          message: \"融云 RTC:请勾选同意注册条款\",\n          type: \"error\",\n        });\n      }\n    },\n\n    //倒计时\n    countDown: function (index) {\n      this.loginForm.showloginCode = false;\n      this.loginForm.count = index;\n      setTimeout(() => {\n        if (index > 1) {\n          index--;\n          this.countDown(index);\n        } else {\n          this.loginForm.showloginCode = true;\n        }\n      }, 1000);\n    },\n\n    //点击注册条款\n    clickLink: function () {\n      window.open(\"https://cdn.ronghub.com/term_of_service_zh.html\");\n    },\n\n    //点击隐私政策\n    clickLinksec: function () {\n      window.open(\"https://cdn.ronghub.com/Privacy_agreement_zh.html\");\n    },\n  },\n};\n</script>\n<style scoped>\n.wrap {\n  font-size: 0.14rem;\n  position: relative;\n  text-align: center;\n  min-height: 625px;\n  min-width: none;\n}\n\n.loginImg {\n  width: 1.48rem;\n  height: 0.46rem;\n  margin-top: 1.21rem;\n  display: inline-block;\n  background-repeat: no-repeat;\n  background-size: cover;\n  background-position: center;\n  background-image: url(../assets/logo-icon.png);\n}\n.loginForm {\n  width: 3rem;\n  margin: 0 auto;\n  font-size: 0.16rem;\n  margin-top: 0.84rem;\n}\n.loginFormPhone {\n  /* float: left; */\n}\n.btns {\n  text-align: center;\n}\n.verificationCodeInput {\n  width: 3rem;\n}\n\n.verificationCheckbox {\n  margin-top: 1.35rem;\n  width: 3rem;\n  display: inline-block;\n  font-size: 0.11rem;\n  text-align: left;\n  /* white-space: pre-line; */\n}\n.verificationCheckbox .verificationValue /deep/ .el-checkbox__inner {\n  font-size: 0.11rem;\n  border-radius: 50%;\n}\n.verificationCheckbox .verificationLink {\n  color: #0099ff;\n}\n.verificationCheckbox .verificationEdition {\n  text-align: center;\n}\n\n.verificationCodeInputButton /deep/ span {\n  color: #0099ff;\n}\n.el-checkbox__label {\n  white-space: pre-line;\n}\n</style>"]}]}