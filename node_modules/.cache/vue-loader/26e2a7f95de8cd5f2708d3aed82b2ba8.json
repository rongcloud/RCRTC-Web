{"remainingRequest":"/Users/libin/Desktop/Gwork/rcrtc-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/libin/Desktop/Gwork/rcrtc-web/src/App.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/Users/libin/Desktop/Gwork/rcrtc-web/src/App.vue","mtime":1648111713019},{"path":"/Users/libin/Desktop/Gwork/rcrtc-web/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/libin/Desktop/Gwork/rcrtc-web/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/libin/Desktop/Gwork/rcrtc-web/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/libin/Desktop/Gwork/rcrtc-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/libin/Desktop/Gwork/rcrtc-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgojYXBwIHsKICBmb250LWZhbWlseTogQXZlbmlyLCBIZWx2ZXRpY2EsIEFyaWFsLCBzYW5zLXNlcmlmOwogIC13ZWJraXQtZm9udC1zbW9vdGhpbmc6IGFudGlhbGlhc2VkOwogIC1tb3otb3N4LWZvbnQtc21vb3RoaW5nOiBncmF5c2NhbGU7CiAgY29sb3I6ICMyYzNlNTA7CiAgaGVpZ2h0OiAxMDAlOwogIG1heC13aWR0aDogMzc1cHg7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKICBtYXJnaW46IGF1dG87CiAgYmFja2dyb3VuZDogI2ZmZjsKICBmb250LXNpemU6IDE2cHg7CiAgbWluLXdpZHRoOiBub25lOwogIG1pbi1oZWlnaHQ6IDYyNXB4Owp9CgouY3VzdG9tQ2xhc3MtQ29udHJvbCB7CiAgd2lkdGg6IDNyZW0gIWltcG9ydGFudDsKfQouYmcgewogIGJhY2tncm91bmQ6IHVybCgiLi9hc3NldHMvd2ViQmcucG5nIik7CiAgaGVpZ2h0OiAxMDB2aDsKfQoKLmVsLXRhYnNfX2NvbnRlbnQ6Oi13ZWJraXQtc2Nyb2xsYmFyIHsKICB3aWR0aDogMCAhaW1wb3J0YW50Owp9CgouZWwtZHJhd2VyX193cmFwcGVyIHsKICAvKiBwb3NpdGlvbjogYWJzb2x1dGUgIWltcG9ydGFudDsgKi8KICBtYXgtd2lkdGg6IDM3NXB4ICFpbXBvcnRhbnQ7CiAgbGVmdDogY2FsYyg1MHZ3IC0gMTg3LjVweCkgIWltcG9ydGFudDsKfQoKLmVsLWRpYWxvZ19fd3JhcHBlciB7CiAgLyogcG9zaXRpb246IGFic29sdXRlICFpbXBvcnRhbnQ7ICovCiAgbWF4LXdpZHRoOiAzNzVweCAhaW1wb3J0YW50OwogIGxlZnQ6IGNhbGMoNTB2dyAtIDE4Ny41cHgpICFpbXBvcnRhbnQ7Cn0KCi52LW1vZGFsIHsKICB3aWR0aDogMzc1cHggIWltcG9ydGFudDsKICBsZWZ0OiBjYWxjKDUwdncgLSAxODcuNXB4KSAhaW1wb3J0YW50Owp9Cg=="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoyCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n  <div class=\"bg\">\n    <div\n      id=\"app\"\n      class=\"app\"\n      v-bind:style=\"{ height: dh + 'px', width: dw + 'px' }\"\n    >\n      <PromptBox />\n      <router-view></router-view>\n    </div>\n  </div>\n</template><script>\nimport PromptBox from \"./components/PromptBox.vue\";\nimport request from \"./request/index\";\nimport config from \"./config\";\nexport default {\n  name: \"App\",\n  data() {\n    return {\n      changeUserCountKey: true,\n      // eslint-disable-next-line no-undef\n      admin_Img: require(\"./assets/roomicon/Manage.png\"),\n      // eslint-disable-next-line no-undef\n      ower_Img: require(\"./assets/roomicon/administrators.png\"),\n\n      // eslint-disable-next-line no-undef\n      voice_Img: require(\"./assets/live/icon-voice.png\"),\n      cooldown: 0,\n      url: window.location.href,\n      dw: 600,\n      dh: 600,\n    };\n  },\n\n  components: {\n    PromptBox,\n  },\n\n  created() {\n    // window.rc = this.$RCVoiceRoomLib;online\n    this.$RCVoiceRoomLib.init({ AppKey: config.appKey.dev });\n    this.$RCLiveRoomLib.init(config.appKey.dev);\n    // window.rc = this.$RCLiveRoomLib;\n\n    console.log(\"getua\", navigator.userAgent);\n    //Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.110 Safari/537.36\n    // if (\n    //   navigator.userAgent ==\n    //   \"Mozilla/5.0 (iPhone; CPU iPhone OS 13_2_3 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0.3 Mobile/15E148 Safari/604.1\"\n    // ) {\n    //   var customUserAgent = `Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.110 Safari/537.36`;\n    //   //修改后的userAgent\n    //   Object.defineProperty(navigator, \"userAgent\", {\n    //     value: customUserAgent,\n    //     writable: false,\n    //   });\n    //   //打印\n    //   console.log(\"getuamodifiy\", navigator.userAgent);\n    // } else {\n    //   console.log(\"使用默认ua\", navigator.userAgent);\n    // }\n  },\n  // mounted() {\n  //   this.$data.dw = window.innerHeight * 0.5625;\n  //   this.$data.dh = window.innerHeight;\n  //   window.onresize = () => {\n  //     console.log(\"resiz\");\n  //     var browser = {\n  //       versions: (function () {\n  //         var u = navigator.userAgent;\n  //         return {\n  //           //移动终端浏览器版本信息\n  //           trident: u.indexOf(\"Trident\") > -1, //IE内核\n  //           presto: u.indexOf(\"Presto\") > -1, //opera内核\n  //           webKit: u.indexOf(\"AppleWebKit\") > -1, //苹果、谷歌内核\n  //           gecko: u.indexOf(\"Gecko\") > -1 && u.indexOf(\"KHTML\") == -1, //火狐内核\n  //           mobile: !!u.match(/AppleWebKit.*Mobile.*/), //是否为移动终端\n  //           ios: !!u.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端\n  //           android: u.indexOf(\"Android\") > -1 || u.indexOf(\"Linux\") > -1, //android终端或uc浏览器\n  //           iPhone: u.indexOf(\"iPhone\") > -1, //是否为iPhone或者QQHD浏览器\n  //           iPad: u.indexOf(\"iPad\") > -1, //是否iPad\n  //           webApp: u.indexOf(\"Safari\") == -1, //是否web应该程序，没有头部与底部\n  //         };\n  //       })(),\n  //       language: (\n  //         navigator.browserLanguage || navigator.language\n  //       ).toLowerCase(),\n  //     };\n  //     if (browser.versions.mobile) {\n  //       //手机端不给重置页面 防止输入法 弹出某些页面会乱\n  //     } else {\n  //       console.log(\"pcreseize\");\n  //       this.$data.dw = window.innerHeight * 0.5625;\n  //       this.$data.dh = window.innerHeight;\n  //     }\n  //     console.log(browser);\n  //   };\n  // },\n\n  mounted() {\n    this.$data.dw = window.innerHeight * 0.5625;\n    this.$data.dh = window.innerHeight;\n    window.onresize = () => {\n      console.log(\"resiz\");\n      var browser = {\n        versions: (function () {\n          var u = navigator.userAgent;\n          return {\n            //移动终端浏览器版本信息\n            trident: u.indexOf(\"Trident\") > -1, //IE内核\n            presto: u.indexOf(\"Presto\") > -1, //opera内核\n            webKit: u.indexOf(\"AppleWebKit\") > -1, //苹果、谷歌内核\n            gecko: u.indexOf(\"Gecko\") > -1 && u.indexOf(\"KHTML\") == -1, //火狐内核\n            mobile: !!u.match(/AppleWebKit.*Mobile.*/), //是否为移动终端\n            ios: !!u.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端\n            android: u.indexOf(\"Android\") > -1 || u.indexOf(\"Linux\") > -1, //android终端或uc浏览器\n            iPhone: u.indexOf(\"iPhone\") > -1, //是否为iPhone或者QQHD浏览器\n            iPad: u.indexOf(\"iPad\") > -1, //是否iPad\n            webApp: u.indexOf(\"Safari\") == -1, //是否web应该程序，没有头部与底部\n          };\n        })(),\n        language: (\n          navigator.browserLanguage || navigator.language\n        ).toLowerCase(),\n      };\n      if (browser.versions.mobile) {\n        //手机端不给重置页面 防止输入法 弹出某些页面会乱\n      } else {\n        console.log(\"pcreseize\");\n        this.$data.dw = window.innerHeight * 0.5625;\n        this.$data.dh = window.innerHeight;\n      }\n      console.log(browser);\n    };\n    //*****************语聊房监听回调*******************\n    //语聊房被静音/取消静音回调\n    // this.$RCVoiceRoomLib.on(\"SeatMute\", (Mute) => {\n    //   console.log(\"Mute\", Mute);\n    // });\n\n    //语聊房座位发生变化\n    this.$RCVoiceRoomLib.on(\"seatInfoDidUpdate\", () => {\n      this.$store.dispatch(\"getSeatInfoList\");\n    });\n\n    //语聊房房间信息发声变化\n    this.$RCVoiceRoomLib.on(\"roomInfoDidUpdate\", (roomInfo) => {\n      this.$store.dispatch(\"getroomTitle\", roomInfo.roomName);\n    });\n\n    //语聊房被踢出房间\n    this.$RCVoiceRoomLib.on(\"RCKickUserOutRoomContent\", async (parm) => {\n      this.KickUserOut(parm);\n    });\n\n    //语聊房各种公屏消息\n    this.$RCVoiceRoomLib.on(\"MessageReceived\", async (m) => {\n      // let m = message.messages[0];\n      // console.log(\"MessageReceived\", m);\n      //适配阻止多端登陆消息监听\n      if (m.messageType == \"RCMic:loginDeviceMsg\") {\n        if (m.content.platform != \"web\") {\n          this.$store.dispatch(\"showToast\", {\n            value: \"移动端登陆\",\n            time: 2000,\n          });\n\n          if (this.$route.name == \"roomHouse\") {\n            await this.$RCVoiceRoomLib.leaveRoom(\n              this.$RCVoiceRoomLib._roomidcli\n            );\n          }\n\n          if (this.$route.name != \"home\") {\n            this.$router.replace(\"/home\");\n          }\n\n          setTimeout(\n            () => {\n              this.$router.go(0);\n            },\n\n            2000\n          );\n        }\n      }\n\n      //适配数美审核消息监听变更\n      if (m.messageType == \"RCMic:shumeiAuditFreezeMsg\") {\n        if (m.content.status == 1) {\n          this.$store.dispatch(\"showToast\", {\n            value: m.content.message,\n            time: 3000,\n          });\n        }\n\n        if (m.content.status == 2) {\n          if (this.$route.name == \"roomHouse\") {\n            await this.$RCVoiceRoomLib.leaveRoom(\n              this.$RCVoiceRoomLib._roomidcli\n            );\n          }\n\n          if (this.$route.name != \"home\") {\n            this.$router.replace(\"/home\");\n          }\n\n          this.$router.go(0);\n        }\n      }\n\n      if (!this.$store.state.Chatroom) {\n        return;\n      }\n\n      let user = {\n        userId: m.content.userId,\n        userName: m.content.userName,\n        ower: false,\n        admin: false,\n      };\n\n      let targetuser = {};\n\n      if (\n        m.content.userId == this.$store.state.roomInformation.createUser.userId\n      ) {\n        user[\"ower\"] = true;\n      }\n\n      if (\n        m.content.userId in this.$store.state.GiftAndManageList[\"ManageObj\"]\n      ) {\n        user[\"admin\"] = true;\n      }\n\n      if (\"targetName\" in m.content) {\n        targetuser = {\n          targetId: m.content.targetId,\n          targetName: m.content.targetName,\n          admin: false,\n          ower: false,\n        };\n\n        if (\n          targetuser.targetId ==\n          this.$store.state.roomInformation.createUser.userId\n        ) {\n          targetuser[\"ower\"] = true;\n        }\n\n        if (\n          targetuser.targetId in\n          this.$store.state.GiftAndManageList[\"ManageObj\"]\n        ) {\n          targetuser[\"admin\"] = true;\n        }\n      }\n\n      let imgower =\n        \"<span  style='width:20px;height:20px;display:inline-block;margin-bottom:-5px;background-image: url(\" +\n        this.ower_Img +\n        \");  background-position: center;background-repeat: no-repeat;background-size:14px 14px'></span>\";\n      let imgAdmin =\n        \"<span  style='width:20px;height:20px;display:inline-block;margin-bottom:-5px;background-image: url(\" +\n        this.admin_Img +\n        \");  background-position: center;background-repeat: no-repeat;background-size:14px 14px'></span>\";\n      let userImg = user.ower ? imgower : user.admin ? imgAdmin : \"\";\n      let targetImg = targetuser.ower\n        ? imgower\n        : targetuser.admin\n        ? imgAdmin\n        : \"\";\n      console.log(m);\n      if (\"conversationType\" in m && m.conversationType == 1) {\n        return;\n      }\n\n      switch (m.messageType) {\n        case \"RC:Chatroom:Gift\": // eslint-disable-next-line no-case-declarations\n          let giftMsg =\n            userImg +\n            \"<span id='\" +\n            user.userId +\n            \"' style='color:#7f7f7f';>\" +\n            m.content.userName +\n            \"</span> 送给 \" +\n            targetImg +\n            \"<span id='\" +\n            targetuser.targetId +\n            \"'ower='\" +\n            targetuser.ower +\n            \"'admin='\" +\n            targetuser.admin +\n            \"' style='color:#7f7f7f';float: left;>\" +\n            targetuser.targetName +\n            \"</span> \" +\n            m.content.giftName +\n            \" X\" +\n            m.content.number;\n          this.$store.state.Chatroom.push(giftMsg);\n          this.$store.dispatch(\"giftUpdate\");\n          break;\n        case \"RC:Chatroom:Barrage\": // eslint-disable-next-line no-case-declarations\n          let Barrage =\n            userImg +\n            \"<span id='\" +\n            user.userId +\n            \"'style='color:#7f7f7f'>\" +\n            user.userName +\n            \": </span>\" +\n            m.content.content;\n          this.$store.state.Chatroom.push(Barrage);\n          break;\n        case \"RC:Chatroom:Enter\": // eslint-disable-next-line no-case-declarations\n          let Enter =\n            userImg +\n            \"<span id='\" +\n            user.userId +\n            \"' style='color:#7f7f7f'>\" +\n            m.content.userName +\n            \"</span> 进来了\";\n          this.$store.state.Chatroom.push(Enter);\n          break;\n        case \"RC:Chatroom:KickOut\": // eslint-disable-next-line no-case-declarations\n          let KickOut =\n            targetImg +\n            \"<span id='\" +\n            targetuser.targetId +\n            \"' style='color:#7f7f7f'>\" +\n            m.content.targetName +\n            \"</span> 被 \" +\n            userImg +\n            \"<span id='\" +\n            user.userId +\n            \"' style='color:#7f7f7f'>\" +\n            m.content.userName +\n            \"</span> 踢出房间了\";\n          this.$store.state.Chatroom.push(KickOut);\n          // this.KickUserOut(targetuser);\n          break;\n        case \"RC:Chatroom:Admin\": // eslint-disable-next-line no-case-declarations\n          let text = m.content.isAdmin ? \"成为管理员\" : \"被撤回管理员\";\n          // eslint-disable-next-line no-case-declarations\n          let img = m.content.isAdmin ? imgAdmin : \"\";\n          // eslint-disable-next-line no-case-declarations\n          let Admin =\n            img +\n            \"<span id='\" +\n            user.userId +\n            \"' style='color:#7f7f7f'>\" +\n            m.content.userName +\n            \"</span> \" +\n            text;\n          this.$store.state.Chatroom.push(Admin);\n          this.$store.dispatch(\"AdminUpdate\");\n          break;\n        case \"RC:Chatroom:GiftAll\": // eslint-disable-next-line no-case-declarations\n          let giftAllMsg =\n            userImg +\n            \"<span id='\" +\n            user.userId +\n            \"' style='color:#7f7f7f';>\" +\n            m.content.userName +\n            \"</span> 全麦打赏 \" +\n            m.content.giftName +\n            \" X\" +\n            m.content.number;\n          this.$store.state.Chatroom.push(giftAllMsg);\n          this.$store.dispatch(\"giftUpdate\");\n          break;\n        case \"RC:Chatroom:Seats\": // eslint-disable-next-line no-case-declarations\n          let seatCounts =\n            \"<span>房间更换为 \" +\n            m.content.count +\n            \" 座模式，请重新上麦</span>\";\n          this.$store.state.Chatroom.push(seatCounts);\n          this.$store.dispatch(\"getsetCountsChange\", m.content.count + 1);\n          break;\n        case \"RC:TxtMsg\": // eslint-disable-next-line no-case-declarations\n          let TxtMsg =\n            \"<span style='color:rgba(106, 159, 255, 1);'>\" +\n            m.content.content +\n            \"</span>\";\n          this.$store.state.Chatroom.push(TxtMsg);\n          break;\n        case \"RC:Chatroom:Like\": // console.log(this.$RCVoiceRoomLib);\n          break;\n        default:\n          break;\n      }\n    });\n\n    //语聊房房间刷新消息\n    this.$RCVoiceRoomLib.on(\"RoomNotificationReceived\", (item) => {\n      const { name, content } = item;\n      console.log(name, content);\n      switch (name) {\n        case \"VoiceRoomBackgroundChanged\":\n          this.$store.dispatch(\"getroomBackground\", content);\n          break;\n        case \"VoiceRoomAgreeManagePick\":\n          if (content == this.$RCVoiceRoomLib.im.userId) {\n            this.$store.dispatch(\"showToast\", {\n              value: \"用户连线成功\",\n            });\n          }\n          break;\n        case \"VoiceRoomRejectManagePick\":\n          if (content == this.$RCVoiceRoomLib.im.userId) {\n            this.$store.dispatch(\"showToast\", {\n              value: \"用户拒绝邀请\",\n            });\n          }\n          break;\n        case \"EVENT_ADD_SHIELD\":\n          this.$store.dispatch(\"getsensitiveList\", {\n            value: [\n              ...this.$store.state.sensitiveList,\n              { name: content, id: Math.random() },\n            ],\n          });\n          break;\n        case \"EVENT_DELETE_SHIELD\":\n          // eslint-disable-next-line no-case-declarations\n          let array = JSON.parse(\n            JSON.stringify(this.$store.state.sensitiveList)\n          );\n          // eslint-disable-next-line no-case-declarations\n          let index = -1;\n          for (let i = 0; i < array.length; i++) {\n            if (array[i][\"name\"] == content) {\n              index = i;\n            }\n          }\n          if (index > -1) {\n            array.splice(index, 1);\n          }\n          this.$store.dispatch(\"getsensitiveList\", [...array]);\n          break;\n        default:\n          break;\n      }\n    });\n\n    //语聊房房间人数发生变化(有人进来)\n    this.$RCVoiceRoomLib.on(\"AudienceEnter\", (item) => {\n      console.log(\"房间人数发生变化(有人进来)\", item);\n\n      request\n        .roomuser({\n          roomId: this.$RCVoiceRoomLib._roomidcli,\n        })\n        .then((res) => {\n          this.$store.dispatch(\"getRoomUserList\", res.data.data);\n        });\n    });\n\n    //语聊房房间人数发生变化(有人离开)\n    this.$RCVoiceRoomLib.on(\"AudienceExit\", (item) => {\n      console.log(\"房间人数发生变化(有人离开)\", item);\n      request\n        .roomuser({\n          roomId: this.$RCVoiceRoomLib._roomidcli,\n        })\n        .then((res) => {\n          this.$store.dispatch(\"getRoomUserList\", res.data.data);\n        });\n    });\n\n    //语聊房申请上麦人员发生变化\n    this.$RCVoiceRoomLib.on(\"RequestSeatListChanged\", async () => {\n      const arr = await this.$RCVoiceRoomLib.getRequestSeatUserIds();\n      // console.log(\"getRequestSeatUserIds\", arr);\n      this.$store.dispatch(\"getRequestSeatUserIds\", arr);\n      if (arr.indexOf(this.$RCVoiceRoomLib.im.userId) != -1) {\n        this.$store.dispatch(\"userHasApply\", true);\n      } else {\n        this.$store.dispatch(\"userHasApply\", false);\n      }\n    });\n\n    //语聊房申请上麦被同意\n    this.$RCVoiceRoomLib.on(\"RequestSeatAccepted\", async () => {\n      const value = await this.$RCVoiceRoomLib.findSeat();\n\n      try {\n        await this.$RCVoiceRoomLib.enterSeat(value);\n        this.$store.dispatch(\"getSeatInfoList\");\n        this.$store.dispatch(\"showToast\", {\n          value: \"上麦成功\",\n        });\n      } catch (error) {\n        this.$store.dispatch(\"showToast\", {\n          value: \"上麦失败\",\n        });\n        console.log(error);\n      }\n    });\n\n    //语聊房申请上麦被拒绝\n    this.$RCVoiceRoomLib.on(\"RequestSeatRejected\", async () => {\n      this.$store.dispatch(\"showToast\", {\n        value: \"申请上麦被拒绝\",\n      });\n    });\n\n    //语聊房 rtc 断开连接(待机断线问题)\n    this.$RCVoiceRoomLib.on(\"RTCPeerConnectionCloseByException\", async () => {\n      await this.$RCVoiceRoomLib.leaveRoom(this.$RCVoiceRoomLib._roomidcli);\n      this.$router.replace(\"/home\");\n      this.$router.go(0);\n    });\n\n    //语聊房被邀请上麦\n    this.$RCVoiceRoomLib.on(\"RCPickerUserSeatContent\", (info) => {\n      if (info.targetId == this.$RCVoiceRoomLib.im.userId) {\n        if (this.$store.state.userInseat) {\n          this.$store.dispatch(\"showToast\", {\n            value: \"用户已经在麦位上\",\n          });\n        } else {\n          this.$confirm(\n            `您被${\n              info.sendUserId ==\n              this.$store.state.roomInformation.createUser.userId\n                ? \"房主\"\n                : \"管理员\"\n            }\n\n              邀请上麦，是否同意？`,\n            \"是否同意上麦\",\n            {\n              confirmButtonText: \"同意\",\n              cancelButtonText: \"拒绝\",\n              customClass: \"customClass-Control\",\n              // center: true,\n              showClose: false,\n              // type: \"warning\",\n            }\n          )\n            .then(async () => {\n              try {\n                const fintSeat = await this.$RCVoiceRoomLib.findSeat();\n                await this.$RCVoiceRoomLib.enterSeat(fintSeat);\n                this.$RCVoiceRoomLib.notifyVoiceRoom(\n                  \"VoiceRoomAgreeManagePick\",\n                  info.sendUserId\n                );\n\n                setTimeout(\n                  () => {\n                    this.$store.dispatch(\"showToast\", {\n                      value: \"上麦成功\",\n                    });\n                    this.$store.dispatch(\"getSeatInfoList\");\n                  },\n\n                  50\n                );\n              } catch (error) {\n                this.$store.dispatch(\"showToast\", {\n                  value: \"上麦失败\",\n                });\n                console.log(error);\n              }\n            })\n            .catch(() => {\n              this.$RCVoiceRoomLib.notifyVoiceRoom(\n                \"VoiceRoomRejectManagePick\",\n                info.sendUserId\n              );\n            });\n        }\n      }\n    });\n\n    //语聊房账号被顶掉\n    this.$RCVoiceRoomLib.on(\"ConnectioBreakOff\", async () => {\n      if (!this.$store.state.owerDisconnet) {\n        if (this.$route.name == \"roomHouse\") {\n          await this.$RCVoiceRoomLib.leaveRoom(this.$RCVoiceRoomLib._roomidcli);\n        }\n        if (this.$route.name != \"home\") {\n          this.$router.replace(\"/home\");\n        }\n        this.$router.go(0);\n      }\n    });\n\n    //语聊房房间被销毁\n    this.$RCVoiceRoomLib.on(\"ChatroomDestroyed\", async () => {\n      await this.$RCVoiceRoomLib\n        .leaveRoom(this.$RCVoiceRoomLib._roomidcli)\n        .then(() => {\n          this.$store.dispatch(\"getSeatInfoList\");\n\n          this.$alert(\"当前直播已结束\", {\n            confirmButtonText: \"确定\",\n            center: true,\n            showClose: false,\n            customClass: \"customClass-Control\",\n            callback: () => {\n              this.$router.go(-1);\n            },\n          });\n        });\n    });\n\n    //语聊房被抱下麦\n    this.$RCVoiceRoomLib.on(\"KickSeatReceived\", () => {\n      this.$store.dispatch(\"showToast\", {\n        value: \"您已被抱下麦\",\n      });\n    });\n\n    // ****************直播部分监听****************\n    // this.$RCVoiceRoomLib.on(\"SeatMute\", (Mute) => {\n    //   console.log(\"Mute\", Mute);\n    // });\n\n    //座位发生变化\n    this.$RCLiveRoomLib.on(\"seatInfoDidUpdate\", () => {\n      this.$store.dispatch(\"getSeatInfoList\");\n    });\n\n    //房间信息发声变化\n    this.$RCLiveRoomLib.on(\"roomInfoDidUpdate\", (roomInfo) => {\n      this.$store.dispatch(\"getroomTitle\", roomInfo.roomName);\n    });\n\n    //被踢出房间\n    this.$RCLiveRoomLib.on(\"RCKickUserOutRoomContent\", async (parm) => {\n      if (parm.targetId == this.$RCLiveRoomLib.im.userId) {\n        await this.$RCLiveRoomLib\n          .leaveRoom(this.$RCLiveRoomLib._roomidcli)\n          .then(() => {\n            this.$store.dispatch(\"getSeatInfoList\");\n            this.$router.go(-1);\n            this.$store.dispatch(\"showToast\", {\n              value: \"您已被踢出房间\",\n            });\n          });\n      }\n    });\n\n    //直播间邀请上麦\n    this.$RCLiveRoomLib.on(\"onInvitation\", (o) => {\n      //o.id 受邀请人id   o.seatIndex 受邀请麦位\n      console.log(\"oninvatiaion\", o);\n      //暂时不判断管理员还是房主\n      if (o.id) {\n        if (this.$store.state.onMic) {\n          this.$store.dispatch(\"showToast\", {\n            value: \"用户已经在麦位上\",\n          });\n        } else {\n          this.$data.cooldown = 10;\n          this.cool();\n          const h = this.$createElement;\n          this.$confirm(`您被房主邀请上麦，是否同意？`, \"是否同意上麦\", {\n            message: h(\n              \"div\",\n              {\n                attrs: {\n                  id: \"cooltext\",\n                },\n              },\n              \"您被房主邀请上麦，是否同意？ 9秒\"\n            ),\n            confirmButtonText: \"同意\",\n            cancelButtonText: \"拒绝\",\n            customClass: \"customClass-Control\",\n            // center: true,\n            showClose: false,\n            dangerouslyUseHTMLString: true,\n            // type: \"warning\",\n          })\n            .then(async () => {\n              console.log(\"被邀请上麦\", this.$RCLiveRoomLib);\n              this.$RCLiveRoomLib.acceptInvitation();\n              this.$store.state.onMic = true;\n              this.$store.state.onLink = true;\n              console.log(123123);\n              console.log(\"123123\", o.seatIndex);\n              await this.$RCLiveRoomLib.enterSeat(o.seatIndex);\n              this.$RCLiveRoomLib.im.messageUpdate(\"RC:VRLRefreshMsg\", {\n                name: \"VoiceRoomRejectManagePick\",\n                content: {\n                  content: o.id,\n                  name: \"VoiceRoomAgreeManagePick\",\n                  totalMemberCount: 0,\n                },\n              });\n              setTimeout(() => {\n                this.$store.dispatch(\"showToast\", {\n                  value: \"上麦成功\",\n                });\n                this.$store.dispatch(\"getSeatInfoList\");\n              }, 50);\n            })\n            .catch(() => {\n              if (this.$RCLiveRoomLib.rtc.roomType == \"live\") {\n                console.log(\"终端\");\n                console.log(\"发送房id\", o.id);\n                this.$RCLiveRoomLib.rejectInvitation(o.id);\n                this.$data.cooldown = 0;\n              } else {\n                this.$RCLiveRoomLib.im.messageUpdate(\"\", {\n                  name: \"\",\n                  content: {\n                    content: o.id,\n                    name: \"\",\n                    totalMemberCount: 0,\n                  },\n                });\n              }\n            });\n          setTimeout(() => {\n            document\n              .getElementsByClassName(\"el-message-box__wrapper\")[0]\n              .click();\n          }, 10000);\n        }\n      }\n    });\n    this.$RCLiveRoomLib.on(\"onInvitationCancel\", () => {\n      this.$store.dispatch(\"showToast\", {\n        value: \"上麦邀请被取消\",\n      });\n    });\n    this.$RCLiveRoomLib.on(\"userEnter\", (userId) => {\n      setTimeout(() => {\n        console.log(\"jinru\", userId, this.getUser(userId));\n        // eslint-disable-next-line no-case-declarations\n        let Enter =\n          \"<span id='\" +\n          this.getUser(userId).userId +\n          \"' style='color:#7f7f7f'>\" +\n          this.getUser(userId).userName +\n          \"</span> 进来了\";\n        this.$store.state.Chatroom.push(Enter);\n      }, 1000);\n    });\n\n    this.$RCLiveRoomLib.on(\"invitationRejected\", (userId) => {\n      for (var i = 0; i < this.$store.state.roomUserList.length; i++) {\n        if (this.$store.state.roomUserList[i].userId == userId) {\n          this.$store.dispatch(\"showToast\", {\n            value: this.$store.state.roomUserList[i].userName + \"拒绝上麦\",\n          });\n        }\n      }\n    });\n\n    //默认的kv更新\n    this.$RCLiveRoomLib.on(\"keyValueDidUpdate\", (o) => {\n      console.log(\"kv更新\", o);\n      if (o.key == \"ROOM_INFO_PRE_FreeEnterSeat\") {\n        console.log(\"当前值\", o.value, \"1\", String(o.value) == \"1\");\n        if (String(o.value) == \"1\") {\n          this.$store.state.isFreeEnterSeat = true;\n        } else {\n          this.$store.state.isFreeEnterSeat = false;\n        }\n      }\n      if (o.key == \"LIVE_VIDEO_SEAT_INFO_PRE_1\") {\n        //直播专用 有人上1号麦位\n        console.log(\"上1号麦\", o.value);\n        if (!JSON.parse(o.value).userId || JSON.parse(o.value).userId == \"\") {\n          this.$store.state.onLink = false;\n        } else {\n          this.$store.state.onLink = true;\n        }\n      }\n    });\n    this.$RCLiveRoomLib.on(\"ondevicechange\", () => {\n      console.log(\"设备更新了\");\n      this.$store.dispatch(\"showToast\", {\n        value: \"检测到视频设备更新请刷新页面\",\n        time: 5000,\n      });\n    });\n\n    //各种公屏消息\n    this.$RCLiveRoomLib.on(\"onMessageReceived\", async (m) => {\n      // let m = message.messages[0];\n      // console.log(\"MessageReceived\", m);\n      //适配阻止多端登陆消息监听\n      if (m.messageType == \"RCMic:loginDeviceMsg\") {\n        if (m.content.platform != \"web\") {\n          this.$store.dispatch(\"showToast\", {\n            value: \"移动端登陆\",\n            time: 2000,\n          });\n\n          if (this.$route.name == \"roomHouse\") {\n            await this.$RCLiveRoomLib.leaveRoom(this.$RCLiveRoomLib._roomidcli);\n          }\n\n          if (this.$route.name != \"home\") {\n            this.$router.replace(\"/home\");\n          }\n\n          setTimeout(\n            () => {\n              this.$router.go(0);\n            },\n\n            2000\n          );\n        }\n      }\n\n      //适配数美审核消息监听变更\n      if (m.messageType == \"RCMic:shumeiAuditFreezeMsg\") {\n        if (m.content.status == 1) {\n          this.$store.dispatch(\"showToast\", {\n            value: m.content.message,\n            time: 3000,\n          });\n        }\n\n        if (m.content.status == 2) {\n          if (this.$route.name == \"roomHouse\") {\n            await this.$RCLiveRoomLib.leaveRoom(this.$RCLiveRoomLib._roomidcli);\n          }\n\n          if (this.$route.name != \"home\") {\n            this.$router.replace(\"/home\");\n          }\n\n          this.$router.go(0);\n        }\n      }\n\n      if (!this.$store.state.Chatroom) {\n        return;\n      }\n\n      let user = {\n        userId: m.content.userId,\n        userName: m.content.userName,\n        ower: false,\n        admin: false,\n      };\n\n      let targetuser = {};\n\n      if (\n        m.content.userId == this.$store.state.roomInformation.createUser.userId\n      ) {\n        user[\"ower\"] = true;\n      }\n\n      if (\n        m.content.userId in this.$store.state.GiftAndManageList[\"ManageObj\"]\n      ) {\n        user[\"admin\"] = true;\n      }\n\n      if (\"targetName\" in m.content) {\n        targetuser = {\n          targetId: m.content.targetId,\n          targetName: m.content.targetName,\n          admin: false,\n          ower: false,\n        };\n\n        if (\n          targetuser.targetId ==\n          this.$store.state.roomInformation.createUser.userId\n        ) {\n          targetuser[\"ower\"] = true;\n        }\n\n        if (\n          targetuser.targetId in\n          this.$store.state.GiftAndManageList[\"ManageObj\"]\n        ) {\n          targetuser[\"admin\"] = true;\n        }\n      }\n\n      let imgower =\n        \"<span  style='width:20px;height:20px;display:inline-block;margin-bottom:-5px;background-image: url(\" +\n        this.ower_Img +\n        \");  background-position: center;background-repeat: no-repeat;background-size:14px 14px'></span>\";\n      let imgAdmin =\n        \"<span  style='width:20px;height:20px;display:inline-block;margin-bottom:-5px;background-image: url(\" +\n        this.admin_Img +\n        \");  background-position: center;background-repeat: no-repeat;background-size:14px 14px'></span>\";\n      let userImg = user.ower ? imgower : user.admin ? imgAdmin : \"\";\n      let targetImg = targetuser.ower\n        ? imgower\n        : targetuser.admin\n        ? imgAdmin\n        : \"\";\n      console.log(userImg);\n      console.log(m);\n      if (\"conversationType\" in m && m.conversationType == 1) {\n        return;\n      }\n\n      switch (m.messageType) {\n        case \"RC:TxtMsg\": //收到文本消息打到公屏\n          console.log(\"收到TxtMsg打到公屏\", m);\n          // eslint-disable-next-line no-case-declarations\n          let txtMsg;\n          if (!m.content.name) {\n            txtMsg =\n              \"<span style='color:rgba(106, 159, 255, 1);'>\" +\n              m.content.content +\n              \"</span>\";\n            console.log(\"noname\");\n          } else {\n            txtMsg =\n              \"<span style='color:#7f7f7f'>\" +\n              m.content.name +\n              \" </span>\" +\n              m.content.content;\n          }\n\n          this.$store.state.Chatroom.push(txtMsg);\n          break;\n        case \"RC:Chatroom:Gift\":\n          // eslint-disable-next-line no-case-declarations\n          let giftMsg =\n            userImg +\n            \"<span id='\" +\n            user.userId +\n            \"' style='color:#7f7f7f';>\" +\n            m.content.userName +\n            \"</span> 送给 \" +\n            targetImg +\n            \"<span id='\" +\n            targetuser.targetId +\n            \"'ower='\" +\n            targetuser.ower +\n            \"'admin='\" +\n            targetuser.admin +\n            \"' style='color:#7f7f7f';float: left;>\" +\n            targetuser.targetName +\n            \"</span> \" +\n            m.content.giftName +\n            \" X\" +\n            m.content.number;\n          this.$store.state.Chatroom.push(giftMsg);\n          this.$store.state.Chatroom.gift();\n          this.$store.dispatch(\"giftUpdate\");\n          break;\n        case \"RC:Chatroom:Barrage\": // eslint-disable-next-line no-case-declarations\n          let Barrage =\n            userImg +\n            \"<span id='\" +\n            user.userId +\n            \"'style='color:#7f7f7f'>\" +\n            user.userName +\n            \": </span>\" +\n            m.content.content;\n          this.$store.state.Chatroom.push(Barrage);\n          break;\n        case \"RC:Chatroom:Enter\": // eslint-disable-next-line no-case-declarations\n          let Enter =\n            userImg +\n            \"<span id='\" +\n            user.userId +\n            \"' style='color:#7f7f7f'>\" +\n            m.content.userName +\n            \"</span> 进来了\";\n          this.$store.state.Chatroom.push(Enter);\n          break;\n        case \"RC:Chatroom:KickOut\": // eslint-disable-next-line no-case-declarations\n          let KickOut =\n            targetImg +\n            \"<span id='\" +\n            targetuser.targetId +\n            \"' style='color:#7f7f7f'>\" +\n            m.content.targetName +\n            \"</span> 被 \" +\n            userImg +\n            \"<span id='\" +\n            user.userId +\n            \"' style='color:#7f7f7f'>\" +\n            m.content.userName +\n            \"</span> 踢出房间了\";\n          this.$store.state.Chatroom.push(KickOut);\n          break;\n        case \"RC:Chatroom:Admin\": // eslint-disable-next-line no-case-declarations\n          let text = m.content.isAdmin ? \"成为管理员\" : \"被撤回管理员\";\n          // eslint-disable-next-line no-case-declarations\n          let img = m.content.isAdmin ? imgAdmin : \"\";\n          // eslint-disable-next-line no-case-declarations\n          let Admin =\n            img +\n            \"<span id='\" +\n            user.userId +\n            \"' style='color:#7f7f7f'>\" +\n            m.content.userName +\n            \"</span> \" +\n            text;\n          this.$store.state.Chatroom.push(Admin);\n          this.$store.dispatch(\"AdminUpdate\");\n          break;\n        case \"RC:Chatroom:GiftAll\": // eslint-disable-next-line no-case-declarations\n          let giftAllMsg =\n            userImg +\n            \"<span id='\" +\n            user.userId +\n            \"' style='color:#7f7f7f';>\" +\n            m.content.userName +\n            \"</span> 全麦打赏 \" +\n            m.content.giftName +\n            \" X\" +\n            m.content.number;\n          this.$store.state.Chatroom.push(giftAllMsg);\n          this.$store.state.Chatroom.gift();\n          this.$store.dispatch(\"giftUpdate\");\n          break;\n        case \"RC:Chatroom:Seats\": // eslint-disable-next-line no-case-declarations\n          let seatCounts =\n            \"<span>房间更换为 \" +\n            m.content.count +\n            \" 座模式，请重新上麦</span>\";\n          this.$store.state.Chatroom.push(seatCounts);\n          this.$store.dispatch(\"getsetCountsChange\", m.content.count + 1);\n          break;\n        // case \"RC:TxtMsg\": // eslint-disable-next-line no-case-declarations\n        //   let TxtMsg =\n        //     \"<span style='color:rgba(106, 159, 255, 1);'>\" +\n        //     m.content.content +\n        //     \"</span>\";\n        //   this.$store.state.Chatroom.push(TxtMsg);\n        //   break;\n        case \"RC:Chatroom:Like\": // console.log(this.$RCLiveRoomLib);\n          break;\n        case \"RC:CmdMsg\":\n          console.log(\"收到命令消息\", m);\n          break;\n        case \"RC:VRVoiceMsg\":\n          console.log(m);\n\n          // eslint-disable-next-line no-case-declarations\n          let voiceMsg;\n          voiceMsg =\n            \"<span style='color:#7f7f7f' >\" +\n            m.content._userName +\n            \" </span>\" +\n            `<span height: 22px;background: none;border-radius: 4px; border: 1px solid; color: #666; onclick=\"new Audio('` +\n            m.content._path +\n            `').play();\">` +\n            m.content._duration +\n            \"' \" +\n            \"<span  style='width:20px;height:20px;display:inline-block;margin-bottom:-5px;background-image: url(\" +\n            this.voice_Img +\n            \");  background-position: center;background-repeat: no-repeat;background-size:14px 14px'></span>\" +\n            \"</span>\";\n\n          this.$store.state.Chatroom.push(voiceMsg);\n          break;\n        default:\n          break;\n      }\n    });\n\n    //房间人数发生变化\n    this.$RCLiveRoomLib.on(\"changeUserCount\", () => {\n      console.log(\"userchenge\");\n      request\n        .roomuser({\n          roomId: this.$RCLiveRoomLib._roomidcli,\n        })\n        .then((res) => {\n          this.$store.dispatch(\"getRoomUserList\", res.data.data);\n        });\n    });\n\n    //房间人数发生变化(有人进来)\n    this.$RCLiveRoomLib.on(\"AudienceEnter\", (item) => {\n      console.log(\"房间人数发生变化(有人进来)\", item);\n\n      request\n        .roomuser({\n          roomId: this.$RCLiveRoomLib._roomidcli,\n        })\n        .then((res) => {\n          this.$store.dispatch(\"getRoomUserList\", res.data.data);\n        });\n    });\n\n    //房间人数发生变化(有人离开)\n    this.$RCLiveRoomLib.on(\"AudienceExit\", (item) => {\n      console.log(\"房间人数发生变化(有人离开)\", item);\n\n      request\n        .roomuser({\n          roomId: this.$RCLiveRoomLib._roomidcli,\n        })\n        .then((res) => {\n          this.$store.dispatch(\"getRoomUserList\", res.data.data);\n        });\n    });\n\n    //申请上麦人员发生变化\n    this.$RCLiveRoomLib.on(\"RequestSeatListChanged\", async () => {\n      console.log(\"申请上麦人员发生变化 \");\n      const arr = await this.$RCLiveRoomLib.getRequestSeatUserIds();\n      // console.log(\"getRequestSeatUserIds\", arr);\n      this.$store.dispatch(\"getRequestSeatUserIds\", arr);\n      if (arr.indexOf(this.$RCLiveRoomLib.im.userId) != -1) {\n        this.$store.dispatch(\"userHasApply\", true);\n      } else {\n        this.$store.dispatch(\"userHasApply\", false);\n      }\n      this.$store.state.onMic = false;\n      for (var i = 0; i < this.$RCLiveRoomLib.seatInfoList.length; i++) {\n        if (\n          this.$RCLiveRoomLib.im.userId ==\n            this.$RCLiveRoomLib.seatInfoList[i].userId &&\n          !this.$store.state.creatUser\n        ) {\n          //非主播且在麦位上时\n          this.$store.state.onMic = true;\n          this.$store.state.onLink = true;\n        }\n      }\n    });\n\n    //申请上麦被同意\n    this.$RCLiveRoomLib.on(\"RequestSeatAccepted\", async () => {\n      console.log(\"RequestSeatAccepted\");\n      // if(){\n\n      // }\n      await this.$RCLiveRoomLib.enterSeat(this.$RCLiveRoomLib.findSeat());\n      console.log(\"onMic\");\n      this.$store.state.onMic = true;\n      this.$store.state.onLink = true;\n    });\n\n    //申请上麦被拒绝\n    this.$RCLiveRoomLib.on(\"RequestSeatRejected\", async () => {\n      this.$store.dispatch(\"showToast\", {\n        value: \"申请上麦被拒绝\",\n      });\n    });\n\n    //说话监听\n    this.$RCLiveRoomLib.on(\"speakingStatusChenge\", (info) => {\n      // if (Number(info.speaking)) {\n      this.$store.dispatch(\"getSpeakingChenge\", {\n        index: Number(info.index),\n        speaking: Number(info.speaking),\n      });\n      // }\n    });\n\n    //关闭房间\n    this.$RCLiveRoomLib.on(\"onVoiceRoomClosed\", async () => {\n      await this.$RCLiveRoomLib\n        .leaveRoom(this.$RCLiveRoomLib._roomidcli)\n        .then(() => {\n          this.$store.dispatch(\"getSeatInfoList\");\n          this.$alert(\"直播已结束，房间关闭\", {\n            confirmButtonText: \"确定\",\n            center: true,\n            showClose: false,\n            customClass: \"customClass-Control\",\n            callback: () => {\n              this.$router.go(-1);\n            },\n          });\n        });\n    });\n\n    //更换背景\n    this.$RCLiveRoomLib.on(\"onVoiceRoomBackgroundChanged\", (img) => {\n      this.$store.dispatch(\"getroomBackground\", img);\n    });\n\n    //被邀请上麦\n    this.$RCLiveRoomLib.on(\"onRCPickerUserSeatContent\", (info) => {\n      console.log(\"userList\", this.$store.state.userInseat);\n      if (info.targetId == this.$RCLiveRoomLib.im.userId) {\n        if (this.$store.state.userInseat) {\n          this.$store.dispatch(\"showToast\", {\n            value: \"用户已经在麦位上\",\n          });\n        } else {\n          this.$confirm(\n            `您被${\n              info.sendUserId ==\n              this.$store.state.roomInformation.createUser.userId\n                ? \"房主\"\n                : \"管理员\"\n            }\n\n              邀请上麦，是否同意？`,\n            \"是否同意上麦\",\n            {\n              confirmButtonText: \"同意\",\n              cancelButtonText: \"拒绝\",\n              customClass: \"customClass-Control\",\n              // center: true,\n              showClose: false,\n              // type: \"warning\",\n            }\n          )\n            .then(async () => {\n              try {\n                const fintSeat = await this.$RCLiveRoomLib.findSeat();\n                await this.$RCLiveRoomLib.enterSeat(fintSeat);\n                this.$RCLiveRoomLib.notifyVoiceRoom(\n                  \"VoiceRoomAgreeManagePick\",\n                  info.sendUserId\n                );\n\n                setTimeout(\n                  () => {\n                    this.$store.dispatch(\"showToast\", {\n                      value: \"上麦成功\",\n                    });\n                    this.$store.dispatch(\"getSeatInfoList\");\n                  },\n\n                  50\n                );\n              } catch (error) {\n                this.$store.dispatch(\"showToast\", {\n                  value: \"上麦失败\",\n                });\n                console.log(error);\n              }\n            })\n            .catch(() => {\n              this.$RCLiveRoomLib.notifyVoiceRoom(\n                \"VoiceRoomRejectManagePick\",\n                info.sendUserId\n              );\n            });\n        }\n      }\n    });\n\n    //账号被顶掉\n    this.$RCLiveRoomLib.on(\"ConnectioBreakOff\", async () => {\n      if (this.$route.name == \"roomHouse\") {\n        await this.$RCLiveRoomLib.leaveRoom(this.$RCLiveRoomLib._roomidcli);\n      }\n\n      if (this.$route.name != \"home\") {\n        this.$router.replace(\"/home\");\n      }\n\n      this.$router.go(0);\n    });\n\n    //下麦\n    this.$RCLiveRoomLib.on(\"leaveSeat\", () => {\n      this.$store.state.onMic = false;\n      this.$store.state.onLink = false;\n      this.$store.dispatch(\"updateuserInseat\", false);\n    });\n\n    //房间被关闭\n    this.$RCLiveRoomLib.on(\"chatroomDestroyed\", () => {\n      console.log(\"chatroomDestroyed mark\");\n      this.$RCLiveRoomLib.leaveRoom(this.$RCLiveRoomLib._roomidcli).then(() => {\n        if (\n          !this.$store.state.roomInformation.createUser ||\n          this.$store.state.roomInformation.createUser.userId ==\n            this.$store.state.userInfo.userId\n        ) {\n          console.log(\"房主主动关闭直播不弹窗\");\n        } else {\n          this.$alert(\"直播已结束，房间关闭\", {\n            confirmButtonText: \"确定\",\n            center: true,\n            showClose: false,\n            customClass: \"customClass-Control\",\n            callback: () => {\n              this.$router.push(\"/room?roomType=liveRoom\");\n            },\n          });\n        }\n      });\n    });\n  },\n\n  methods: {\n    drawer: function () {\n      this.$router.push(\"/login\");\n    },\n    getUser: function (userId) {\n      if (this.$store.state.roomUserList) {\n        for (var i = 0; i < this.$store.state.roomUserList.length; i++) {\n          if (this.$store.state.roomUserList[i].userId == userId) {\n            return this.$store.state.roomUserList[i];\n          }\n        }\n      }\n    },\n    cool: function () {\n      console.log(\"cooling,\", this.$data.cooldown);\n      if (this.$data.cooldown > 0) {\n        this.$data.cooldown--;\n        setTimeout(() => {\n          this.cool();\n          document.getElementById(\"cooltext\").innerHTML =\n            \"您被房主邀请上麦，是否同意？\" + this.$data.cooldown + \"秒\";\n        }, 1000);\n      }\n    },\n  },\n};\n</script><style>\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  color: #2c3e50;\n  height: 100%;\n  max-width: 375px;\n  overflow: hidden;\n  margin: auto;\n  background: #fff;\n  font-size: 16px;\n  min-width: none;\n  min-height: 625px;\n}\n\n.customClass-Control {\n  width: 3rem !important;\n}\n.bg {\n  background: url(\"./assets/webBg.png\");\n  height: 100vh;\n}\n\n.el-tabs__content::-webkit-scrollbar {\n  width: 0 !important;\n}\n\n.el-drawer__wrapper {\n  /* position: absolute !important; */\n  max-width: 375px !important;\n  left: calc(50vw - 187.5px) !important;\n}\n\n.el-dialog__wrapper {\n  /* position: absolute !important; */\n  max-width: 375px !important;\n  left: calc(50vw - 187.5px) !important;\n}\n\n.v-modal {\n  width: 375px !important;\n  left: calc(50vw - 187.5px) !important;\n}\n</style>\n"]}]}