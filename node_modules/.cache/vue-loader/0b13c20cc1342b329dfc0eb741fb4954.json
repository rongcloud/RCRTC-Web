{"remainingRequest":"/Users/cuifengbo/work/RCRTC-Git/rcrtc-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/cuifengbo/work/RCRTC-Git/rcrtc-web/src/pages/room/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/cuifengbo/work/RCRTC-Git/rcrtc-web/src/pages/room/index.vue","mtime":1648104828602},{"path":"/Users/cuifengbo/work/RCRTC-Git/rcrtc-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cuifengbo/work/RCRTC-Git/rcrtc-web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/cuifengbo/work/RCRTC-Git/rcrtc-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cuifengbo/work/RCRTC-Git/rcrtc-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBDYWxsUm9vbSBmcm9tICIuL2NhbGxSb29tL2luZGV4LnZ1ZSI7CmltcG9ydCBQb3B1cElucHV0IGZyb20gIi4uLy4uL2NvbXBvbmVudHMvUG9wdXBJbnB1dC52dWUiOwppbXBvcnQgVG9vbEJhciBmcm9tICIuLi8uLi9jb21wb25lbnRzL1Rvb2xCYXIudnVlIjsKaW1wb3J0IENob2ljZUJveCBmcm9tICIuLi8uLi9jb21wb25lbnRzL0Nob2ljZUJveC52dWUiOwppbXBvcnQgcmVxdWVzdCBmcm9tICIuLi8uLi9yZXF1ZXN0L2luZGV4IjsKaW1wb3J0IHsgY292ZXJQaG90byB9IGZyb20gIi4vY292ZXJQaG90by5qcyI7CmltcG9ydCB7IEdldFF1ZXJ5U3RyaW5nIH0gZnJvbSAiLi4vLi4vdXRpbHMvdXRpbHMiOwppbXBvcnQgeyBidG9rZW4gfSBmcm9tICIuLi8uLi9yZXF1ZXN0L0J1c2luZXNzVG9rZW4iOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJSb29tVGFiIiwKICBkYXRhOiBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gewogICAgICB1cGRhdGVPYmo6IHsKICAgICAgICBuYW1lOiAiIiwKICAgICAgICB0aGVtZVBpY3R1cmVVcmw6ICIiLAogICAgICAgIGlzUHJpdmF0ZTogMSwKICAgICAgICBwYXNzd29yZDogIiIsCiAgICAgICAgYmFja2dyb3VuZFVybDogIiIsCiAgICAgICAga3Y6IFtdLAogICAgICB9LAogICAgICB0YWJTdHJldGNoOiB0cnVlLAogICAgICBhY3RpdmVOYW1lOiAiZmlyc3QiLAogICAgICBhdXRob3JpemF0aW9uOiBudWxsLAogICAgICBkYXRhTGlzdDogW10sCiAgICAgIGRyYXdlcjogZmFsc2UsCiAgICAgIGRpcmVjdGlvbjogImJ0dCIsCiAgICAgIHNpemU6ICI4OCUiLAogICAgICBpbWdTdHlsZTogIiIsCiAgICAgIGltZ0RhdGE6IFtdLAogICAgICBzZWxlY3RSYWRpbzogIjEiLAogICAgICBidG9rZW46IGJ0b2tlbiwKICAgICAgb3BlblNlbGVjdDogWwogICAgICAgIHsKICAgICAgICAgIHNlbGVjdDogdHJ1ZSwKICAgICAgICAgIHZhbHVlOiAi56eB5a+GIiwKICAgICAgICAgIGlkOiAiMSIsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBzZWxlY3Q6IGZhbHNlLAogICAgICAgICAgdmFsdWU6ICLlhazlvIAiLAogICAgICAgICAgaWQ6ICIyIiwKICAgICAgICB9LAogICAgICBdLAogICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWYKICAgICAgaW1nU2VsZWN0OiByZXF1aXJlKCIuLi8uLi9hc3NldHMvY2hlY2stY2lyY2xlLXRydWUtaWNvbi5wbmciKSwKICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmCiAgICAgIGltZ0JhY2tncm91bmQ6ICIiLAogICAgICAvLyB1cGRhdGVJbWdVcmw6ICIvYXBpL2ZpbGUvdXBsb2FkIiwKICAgICAgcm9vbVR5cGU6ICIiLCAvL+aIv+mXtOexu+WeiwogICAgICBpc0luUm9vbTogZmFsc2UsIC8v5Zyo5oi/6Ze05YaFCiAgICAgIHRpdGxlOiAi6K+t6IGK5oi/IiwKICAgIH07CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBDYWxsUm9vbSwKICAgIFBvcHVwSW5wdXQsCiAgICBUb29sQmFyLAogICAgQ2hvaWNlQm94LAogIH0sCiAgd2F0Y2g6IHsKICAgIGltZ1N0eWxlOiBmdW5jdGlvbiAobmV3VmFsKSB7CiAgICAgIC8vICAgY29uc29sZS5sb2cobmV3VmFsKTsKICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImVsLWRyYXdlciIpWzBdLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9CiAgICAgICAgICAidXJsKCIgKyBuZXdWYWwgKyAiKSI7CiAgICAgICAgdGhpcy51cGRhdGVPYmouYmFja2dyb3VuZFVybCA9IG5ld1ZhbDsKICAgICAgfSk7CiAgICB9LAogIH0sCiAgbWV0aG9kczogewogICAgLy/liJvlu7rmiL/pl7QKICAgIGNyZWF0Um9vbTogZnVuY3Rpb24gKCkgewogICAgICBjb25zb2xlLmxvZygiY3QiKTsKICAgICAgY29uc29sZS5sb2codGhpcy4kUkNMaXZlUm9vbUxpYi5pbSk7CiAgICAgIGlmICh0aGlzLiRkYXRhLnJvb21UeXBlID09ICJsaXZlUm9vbSIpIHsKICAgICAgICBpZiAoCiAgICAgICAgICBHZXRRdWVyeVN0cmluZygicm9vbVR5cGUiKSAmJgogICAgICAgICAgR2V0UXVlcnlTdHJpbmcoInJvb21UeXBlIikgPT0gImxpdmVSb29tIgogICAgICAgICkgewogICAgICAgICAgLy/mmK/lkKbliJvlu7rnm7Tmkq3miL/pl7Qg5YWI5p+l6K+iIHVzZXJDaGVjawogICAgICAgICAgcmVxdWVzdAogICAgICAgICAgICAuY2hlY2tVc2VyKHRoaXMuJHN0b3JlLnN0YXRlLnVzZXJJbmZvLnVzZXJJZCkKICAgICAgICAgICAgLnRoZW4oYXN5bmMgKHJlcykgPT4gewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJjaGVja3Jlc291dCIsIHJlcyk7CiAgICAgICAgICAgICAgaWYgKHJlcyAmJiByZXMuZGF0YSAmJiByZXMuZGF0YS5kYXRhICYmIHJlcy5kYXRhLmRhdGEucm9vbUlkKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygi55So5oi35pyJ5Yib5bu65oi/6Ze0Iik7CgogICAgICAgICAgICAgICAgdGhpcy4kY29uZmlybSgi5a2Y5Zyo5bey5Yib5bu655qE5oi/6Ze05piv5ZCm5Yqg5YWlPyIsICLmj5DnpLoiLCB7CiAgICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAi56Gu5a6aIiwKICAgICAgICAgICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogIuWPlua2iCIsCiAgICAgICAgICAgICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwKICAgICAgICAgICAgICAgICAgY2VudGVyOiB0cnVlLAogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKAogICAgICAgICAgICAgICAgICAgICAgIi9saXZlP2lzQW5jaG9yPXRydWUmJnJvb21JZD0iICsgcmVzLmRhdGEuZGF0YS5yb29tSWQKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgICAgICAgICAgIHJlcXVlc3QuZGVsZXRlUm9vbSh7CiAgICAgICAgICAgICAgICAgICAgICByb29tSWQ6IHJlcy5kYXRhLmRhdGEucm9vbUlkLAogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coCiAgICAgICAgICAgICAgICAgICLnlKjmiLfmsqHmnInliJvlu7rmiL/pl7QgIOWIm+W7uuaWsOaIv+mXtCIsCiAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLnVzZXJJbmZvCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9saXZlP2lzQW5jaG9yPXRydWUiKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmRyYXdlciA9IHRydWU7CiAgICAgICAgICB0aGlzLmltZ0RhdGEgPSB0aGlzLiRzdG9yZS5zdGF0ZS5pbWdMaXN0OwogICAgICAgICAgdGhpcy5pbWdTdHlsZSA9IHRoaXMuJHN0b3JlLnN0YXRlLmltZ0xpc3RbMF0udXJsIHx8ICIiOwogICAgICAgICAgdGhpcy51cGRhdGVPYmoudGhlbWVQaWN0dXJlVXJsID0KICAgICAgICAgICAgY292ZXJQaG90b1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA2KV07CiAgICAgICAgICB0aGlzLmltZ0JhY2tncm91bmQgPSBjb3ZlclBob3RvW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDYpXTsKICAgICAgICAgIHRoaXMuZHJhd2VyID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmVxdWVzdC5nZXRVc2VyQ2hlY2soKS50aGVuKChyZXMpID0+IHsKICAgICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09IDEwMDAwKSB7CiAgICAgICAgICAgIHRoaXMuaW1nRGF0YSA9IHRoaXMuJHN0b3JlLnN0YXRlLmltZ0xpc3Q7CiAgICAgICAgICAgIHRoaXMuaW1nU3R5bGUgPSB0aGlzLiRzdG9yZS5zdGF0ZS5pbWdMaXN0WzBdLnVybCB8fCAiIjsKICAgICAgICAgICAgdGhpcy51cGRhdGVPYmoudGhlbWVQaWN0dXJlVXJsID0KICAgICAgICAgICAgICBjb3ZlclBob3RvW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDYpXTsKICAgICAgICAgICAgdGhpcy5pbWdCYWNrZ3JvdW5kID0gY292ZXJQaG90b1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA2KV07CiAgICAgICAgICAgIHRoaXMuZHJhd2VyID0gdHJ1ZTsKICAgICAgICAgIH0gZWxzZSBpZiAocmVzLmRhdGEuY29kZSA9PSAzMDAxNikgewogICAgICAgICAgICB0aGlzLiRyZWZzLkNob2ljZUJveC5zZXRQb3B1cCh7CiAgICAgICAgICAgICAgdmFsdWU6ICLmgqjlt7LliJvlu7rov4fmiL/pl7Qs5piv5ZCm55u05o6l6L+b5YWlIiwKICAgICAgICAgICAgICByb29tSWQ6IHJlcy5kYXRhLmRhdGEucm9vbUlkLAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSwKCiAgICAvL+mAieaLqeiDjOaZr+WbvueJhwogICAgc2VsZWN0SW1hZ2U6IGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgIHRoaXMuaW1nU3R5bGUgPSBpdGVtLnVybDsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmltZ0RhdGEubGVuZ3RoOyBpICs9IDEpIHsKICAgICAgICBpZiAodGhpcy5pbWdEYXRhW2ldLnVybCA9PT0gaXRlbS51cmwpIHsKICAgICAgICAgIHRoaXMuaW1nRGF0YVtpXS5zZWxlY3QgPSB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmltZ0RhdGFbaV0uc2VsZWN0ID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIC8v5piv5ZCm5YWs5byA54K56YCJCiAgICBzZWxlY3RPcGVuOiBmdW5jdGlvbiAoaXRlbSkgewogICAgICBpZiAoaXRlbS5pZCA9PSAiMSIpIHsKICAgICAgICB0aGlzLnVwZGF0ZU9iai5pc1ByaXZhdGUgPSAxOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMudXBkYXRlT2JqLmlzUHJpdmF0ZSA9IDA7CiAgICAgIH0KICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm9wZW5TZWxlY3QubGVuZ3RoOyBpICs9IDEpIHsKICAgICAgICBpZiAodGhpcy5vcGVuU2VsZWN0W2ldLmlkID09PSBpdGVtLmlkKSB7CiAgICAgICAgICB0aGlzLm9wZW5TZWxlY3RbaV0uc2VsZWN0ID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5vcGVuU2VsZWN0W2ldLnNlbGVjdCA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICAvL+S4iuS8oOWktOWDj+WbvueJh+aIkOWKn+S5i+WQjgogICAgaGFuZGxlQXZhdGFyU3VjY2VzcyhyZXMsIGZpbGUpIHsKICAgICAgLy8gY29uc29sZS5sb2cocmVzLCBmaWxlKTsKICAgICAgLy8gdGhpcy51cGRhdGVPYmoudGhlbWVQaWN0dXJlVXJsID0gYCR7dGhpcy4kc3RvcmUuc3RhdGUuZGVmYXVsdEFkZHJlc3N9JHtyZXMuZGF0YX1gOwogICAgICB0aGlzLnVwZGF0ZU9iai50aGVtZVBpY3R1cmVVcmwgPSBgaHR0cHM6Ly9yY3J0Yy1hcGkucm9uZ2Nsb3VkLm5ldC9maWxlL3Nob3c/cGF0aD0ke3Jlcy5kYXRhfWA7CiAgICAgIHRoaXMuaW1nQmFja2dyb3VuZCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoZmlsZS5yYXcpOwogICAgfSwKCiAgICAvL+S4iuS8oOWktOWDj+WbvueJh+S5i+WJjQogICAgYmVmb3JlQXZhdGFyVXBsb2FkKGZpbGUpIHsKICAgICAgLy8gICBjb25zb2xlLmxvZyhmaWxlKTsKICAgICAgY29uc3QgaXNKUEcgPSBmaWxlLnR5cGUgPT09ICJpbWFnZS9qcGVnIiB8fCAiaW1hZ2UvcG5nIjsKICAgICAgY29uc3QgaXNMdDJNID0gZmlsZS5zaXplIC8gMTAyNCAvIDEwMjQgPCAyOwoKICAgICAgaWYgKCFpc0pQRykgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuS4iuS8oOWktOWDj+WbvueJh+WPquiDveaYryBKUEfjgIFwbmcg5qC85byPISIpOwogICAgICB9CiAgICAgIGlmICghaXNMdDJNKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5LiK5Lyg5aS05YOP5Zu+54mH5aSn5bCP5LiN6IO96LaF6L+HIDJNQiEiKTsKICAgICAgfQogICAgICByZXR1cm4gaXNKUEcgJiYgaXNMdDJNOwogICAgfSwKCiAgICAvL+aPkOS6pAogICAgdXBkYXRlUm9vbU9iajogZnVuY3Rpb24gKCkgewogICAgICBpZiAodGhpcy51cGRhdGVPYmoubmFtZSA9PSAiIikgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuiejeS6kVJUQzror7floavlhpnmiL/pl7TlkI0iKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKHRoaXMudXBkYXRlT2JqLmlzUHJpdmF0ZSA9PSAxICYmICF0aGlzLnVwZGF0ZU9iai5wYXNzd29yZCkgewogICAgICAgIHRoaXMuJHJlZnMuUG9wdXBJbnB1dC5zZXRQb3B1cCh7CiAgICAgICAgICB0aXRsZTogIuivt+i+k+WFpeWbm+S9jeaVsOWtl+WvhueggSIsCiAgICAgICAgICB2YWx1ZTogIiIsCiAgICAgICAgICBwbGFjZWhvbGRlcjogIuivt+i+k+WFpeWbm+S9jeaVsOWtl+WvhueggSIsCiAgICAgICAgICB0eXBlOiAibnVtYmVyIiwKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnVwZGF0ZU9iaik7CiAgICAgICAgdGhpcy5jcmVhdGVBbmRKb2luUm9vbSgpOwogICAgICB9CiAgICB9LAoKICAgIC8v5o+Q56S654K55Ye756Gu5a6aCiAgICBjbGlZZXM6IGFzeW5jIGZ1bmN0aW9uIChyb29tSWQpIHsKICAgICAgdHJ5IHsKICAgICAgICBhd2FpdCB0aGlzLiRSQ1ZvaWNlUm9vbUxpYi5qb2luUm9vbShyb29tSWQpOwogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9yb29tL2hvdXNlIik7CiAgICAgICAgfSwgNTApOwogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBjb25zb2xlLmxvZygi5Yqg5YWl6K+t6IGK5oi/5aSx6LSlISIpOwogICAgICB9CiAgICB9LAoKICAgIC8v5YWz6ZetZHJhd2VyCiAgICBkcmF3ZXJDbG9zZWQ6IGZ1bmN0aW9uICgpIHsKICAgICAgLy8gY29uc29sZS5sb2coIuWFs+mXrWRyYXdlciIpOwogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuaW1nRGF0YS5sZW5ndGg7IGkgKz0gMSkgewogICAgICAgIGlmIChpID09PSAwKSB7CiAgICAgICAgICB0aGlzLmltZ0RhdGFbaV0uc2VsZWN0ID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5pbWdEYXRhW2ldLnNlbGVjdCA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMub3BlblNlbGVjdC5sZW5ndGg7IGkgKz0gMSkgewogICAgICAgIGlmIChpID09PSAwKSB7CiAgICAgICAgICB0aGlzLm9wZW5TZWxlY3RbaV0uc2VsZWN0ID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5vcGVuU2VsZWN0W2ldLnNlbGVjdCA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICAvL+iusOW9leWvhueggQogICAgc3VibWl0VmFsdWU6IGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgIHRoaXMudXBkYXRlT2JqLnBhc3N3b3JkID0gaXRlbTsKICAgICAgdGhpcy5jcmVhdGVBbmRKb2luUm9vbSgpOwogICAgfSwKCiAgICAvL+eCueWHu+WPs+S4iuinkgogICAgQmFyUmlnaHRDYWxsYmFjazogZnVuY3Rpb24gKCkgewogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgic2hvd1RvYXN0IiwgewogICAgICAgIHZhbHVlOiAi5Yqf6IO95b6F5byA5pS+IiwKICAgICAgfSk7CiAgICB9LAogICAgLy/lsI/nqpflhbPpl60KICAgIG1pbmlDbG9zZTogZnVuY3Rpb24gKGUpIHsKICAgICAgY29uc29sZS5sb2coIm1pbmljbG9zZSIsIGUpOwogICAgICBjb25zb2xlLmxvZyh0aGlzLiRSQ0xpdmVSb29tTGliLl9yb29taWRjbGkpOwogICAgICBpZiAoCiAgICAgICAgdGhpcy4kUkNMaXZlUm9vbUxpYi5fcm9vbWlkY2xpICYmCiAgICAgICAgdGhpcy4kUkNMaXZlUm9vbUxpYi5fcm9vbWlkY2xpLmxlbmd0aAogICAgICApIHsKICAgICAgICBjb25zb2xlLmxvZyh0aGlzLiRSQ0xpdmVSb29tTGliLl9yb29taWRjbGkpOwogICAgICAgIHRoaXMuJFJDTGl2ZVJvb21MaWIubGVhdmVSb29tKHRoaXMuJFJDTGl2ZVJvb21MaWIuX3Jvb21pZGNsaSk7CiAgICAgICAgdGhpcy4kZGF0YS5pc0luUm9vbSA9IGZhbHNlOwogICAgICB9CiAgICB9LAogICAgbWluaUJhY2s6IGZ1bmN0aW9uICgpIHsKICAgICAgY29uc29sZS5sb2coIm1pbmliYWNrIik7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvbGl2ZT9yb29taWQ9IiArIHRoaXMuJFJDTGl2ZVJvb21MaWIuX3Jvb21pZGNsaSk7CiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuJHJlZnMpOwogICAgfSwKICAgIC8v5Yib5bu65bm25Yqg5YWl5oi/6Ze0CiAgICBjcmVhdGVBbmRKb2luUm9vbTogZnVuY3Rpb24gKCkgewogICAgICByZXF1ZXN0CiAgICAgICAgLmNyZWF0Um9vbSh7CiAgICAgICAgICAuLi50aGlzLnVwZGF0ZU9iaiwKICAgICAgICB9KQogICAgICAgIC50aGVuKGFzeW5jIChyZXMpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgICBzd2l0Y2ggKHJlcy5kYXRhLmNvZGUpIHsKICAgICAgICAgICAgY2FzZSAxMDAwMDoKICAgICAgICAgICAgICBhd2FpdCB0aGlzLiRSQ1ZvaWNlUm9vbUxpYi5jcmVhdGVBbmRKb2luUm9vbSh7CiAgICAgICAgICAgICAgICByb29tSWQ6IHJlcy5kYXRhLmRhdGEucm9vbUlkLAogICAgICAgICAgICAgICAgcm9vbU5hbWU6IHJlcy5kYXRhLmRhdGEucm9vbU5hbWUsCiAgICAgICAgICAgICAgICBzZWF0Q291bnQ6IDksCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgdGhpcy5kcmF3ZXIgPSBmYWxzZTsKICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvcm9vbS9ob3VzZSIpOwogICAgICAgICAgICAgIH0sIDUwMCk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goInNob3dUb2FzdCIsIHsKICAgICAgICAgICAgICAgIHZhbHVlOiByZXMuZGF0YS5tc2csCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycikgPT4gewogICAgICAgICAgY29uc29sZS5sb2coImVycjoiLCBlcnIpOwogICAgICAgIH0pOwogICAgfSwKICB9LAogIGNyZWF0ZWQoKSB7CiAgICBjb25zb2xlLmxvZygKICAgICAgIj09KysrKysrKysrKysrKysrKysrPT09PT09PT09PT09PT09PT0+IiwKICAgICAgR2V0UXVlcnlTdHJpbmcoInJvb21UeXBlIikKICAgICk7CiAgICBpZiAoR2V0UXVlcnlTdHJpbmcoInJvb21UeXBlIikpIHsKICAgICAgaWYgKEdldFF1ZXJ5U3RyaW5nKCJyb29tVHlwZSIpID09ICJsaXZlUm9vbSIpIHsKICAgICAgICB0aGlzLiRkYXRhLnJvb21UeXBlID0gImxpdmVSb29tIjsKICAgICAgICB0aGlzLiRkYXRhLnRpdGxlID0gIuebtOaSremXtCI7CiAgICAgIH0KICAgIH0KICAgIC8v5bCP56qX6YC76L6RCiAgICBpZiAoCiAgICAgIHRoaXMuJFJDTGl2ZVJvb21MaWIuX3Jvb21pZGNsaSAmJgogICAgICB0aGlzLiRSQ0xpdmVSb29tTGliLl9yb29taWRjbGkubGVuZ3RoCiAgICApIHsKICAgICAgY29uc29sZS5sb2coIuW9k+WJjSIsIHRoaXMuJFJDTGl2ZVJvb21MaWIuX3Jvb21pZGNsaSk7CiAgICAgIHRoaXMuJGRhdGEuaXNJblJvb20gPSB0cnVlOwogICAgICB0aGlzLiRSQ0xpdmVSb29tTGliLnJ0Yy5ib2R5LnZpZGVvTm9kZSA9IHRoaXMuJHJlZnMudmlkZW87CiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgbGV0IHJlcU9iaiA9IHsKICAgICAgcGFnZTogMSwKICAgICAgc2l6ZTogMTAsCiAgICB9OwoKICAgIGlmICh0aGlzLiRkYXRhLnJvb21UeXBlID09ICJsaXZlUm9vbSIpIHsKICAgICAgcmVxT2JqLnR5cGUgPSAzOwogICAgfQogICAgcmVxdWVzdAogICAgICAucm9vbUxpc3QocmVxT2JqKQogICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiY2hhbmdlc0ltZ0xpc3QiLCByZXNwb25zZS5kYXRhLmRhdGEuaW1hZ2VzKTsKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlc3BvbnNlLmRhdGEuZGF0YS5yb29tcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgaWYgKAogICAgICAgICAgICByZXNwb25zZS5kYXRhLmRhdGEucm9vbXNbaV0uY3JlYXRlVXNlci51c2VySWQgPT0KICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS51c2VySW5mby51c2VySWQgJiYKICAgICAgICAgICAgcmVxT2JqLnR5cGUgPT0gMwogICAgICAgICAgKSB7CiAgICAgICAgICAgIC8v5aaC5p6c5piv55u05pKt6Ze05LiU5pyJ6Ieq5bex5Yib5bu655qE5oi/6Ze0IOmAgOWHuuivpeaIv+mXtAogICAgICAgICAgICBjb25zb2xlLmxvZygi5bey57uP5pyJ6Ieq5bex5Yib5bu655qE5oi/6Ze06ZyA6KaB5Yig6Zmk5LiA5LiLIik7CiAgICAgICAgICAgIC8vICB0aGlzLiRyb3V0ZXIuZ28oMCk7CiAgICAgICAgICAgIHJlcXVlc3QuZGVsZXRlUm9vbSh7CiAgICAgICAgICAgICAgcm9vbUlkOiByZXNwb25zZS5kYXRhLmRhdGEucm9vbXNbaV0ucm9vbUlkLAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5kYXRhLnJvb21zLnNwbGljZShpLCAxKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImNoYW5nZXNSb29tc0xpc3QiLCByZXNwb25zZS5kYXRhLmRhdGEucm9vbXMpOwogICAgICB9KQogICAgICAuY2F0Y2goKGVycikgPT4gewogICAgICAgIGNvbnNvbGUuZXJyb3IoIuivt+axguWksei0pSIsIGVycik7CiAgICAgIH0pOwogICAgLy/lsI/nqpfpgLvovpEKICAgIGNvbnNvbGUubG9nKCLlvZPliY1zZGvnirbmgIEiLCB0aGlzLiRSQ0xpdmVSb29tTGliKTsKICAgIGNvbnNvbGUubG9nKCJ2aWRpb05vZGUiLCB0aGlzLiRyZWZzKTsKICAgIGlmICgKICAgICAgdGhpcy4kUkNMaXZlUm9vbUxpYi5fcm9vbWlkY2xpICYmCiAgICAgIHRoaXMuJFJDTGl2ZVJvb21MaWIuX3Jvb21pZGNsaS5sZW5ndGgKICAgICkgewogICAgICBjb25zb2xlLmxvZygiZ2V0RXhpc3QiKTsKICAgICAgdGhpcy4kUkNMaXZlUm9vbUxpYi5ydGMuYm9keS52aWRlb05vZGUgPSB0aGlzLiRyZWZzLnZpZGVvOwogICAgICB0aGlzLiRSQ0xpdmVSb29tTGliLmdldEV4aXN0KCk7CiAgICB9CgogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLCAoKSA9PiB7CiAgICAgIGlmICh0aGlzLiRyb3V0ZS5uYW1lICE9ICJsb2dpbiIpIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSgiL2xvZ2luIik7CiAgICAgIH0KICAgIH0pOwogIH0sCiAgYmVmb3JlUm91dGVMZWF2ZSh0bywgZnJvbSwgbmV4dCkgewogICAgaWYgKHRvLm5hbWUgPT0gImhvbWUiKSB7CiAgICAgIGlmICh0aGlzLiRkYXRhLnJvb21UeXBlID09ICJsaXZlUm9vbSIpIHsKICAgICAgICB0aGlzLiRSQ0xpdmVSb29tTGliLmltLmJvZHkuZGlzY29ubmVjdCgpLnRoZW4oKCkgPT4gewogICAgICAgICAgY29uc29sZS5sb2coIuaIkOWKn+aWreW8gCIpOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJnZXRPd2VyRGlzY29ubmV0IiwgdHJ1ZSkudGhlbigoKSA9PiB7CiAgICAgICAgICB0aGlzLiRSQ1ZvaWNlUm9vbUxpYi5pbS5ib2R5LmRpc2Nvbm5lY3QoKS50aGVuKCgpID0+IHsKICAgICAgICAgICAgY29uc29sZS5sb2coIuaIkOWKn+aWreW8gCIpOwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICAgIG5leHQoKTsKICB9LAp9Owo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/room","sourcesContent":["<template>\n  <div class=\"landing\">\n    <div class=\"miniWindow\" @click=\"miniBack\" v-if=\"isInRoom\">\n      <div class=\"miniClose\" @click.stop=\"miniClose\"></div>\n      <video\n        class=\"videocontainer\"\n        width=\" 93px\"\n        height=\"166px\"\n        ref=\"video\"\n      ></video>\n    </div>\n    <ToolBar @BarRightCallback=\"BarRightCallback\" :title=\"title\" />\n    <CallRoom />\n    <div class=\"creat-room\" @click=\"creatRoom\"></div>\n    <el-drawer\n      :visible.sync=\"drawer\"\n      :direction=\"direction\"\n      :append-to-body=\"true\"\n      class=\"creat-drawer\"\n      :size=\"size\"\n      @closed=\"drawerClosed\"\n    >\n      <div class=\"creat-room-table\">\n        <el-upload\n          class=\"avatar-uploader\"\n          :show-file-list=\"false\"\n          :action=\"this.$store.state.uploadAddress\"\n          :headers=\"{\n            authorization: this.$store.state.userInfo.authorization,\n            BusinessToken: btoken,\n          }\"\n          :on-success=\"handleAvatarSuccess\"\n          :before-upload=\"beforeAvatarUpload\"\n        >\n          <div\n            v-if=\"imgBackground\"\n            :style=\"{ backgroundImage: 'url(' + imgBackground + ')' }\"\n            class=\"avatar\"\n          ></div>\n          <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n        </el-upload>\n        <div class=\"room-set-img-title\">选择封面</div>\n        <el-input\n          class=\"room-title-input\"\n          v-model=\"updateObj.name\"\n          :maxlength=\"10\"\n          placeholder=\"设置房间标题\"\n        ></el-input>\n        <div class=\"creat-room-select-title\">设置背景</div>\n        <div class=\"room-title-img-select\">\n          <div\n            class=\"selectRadio\"\n            v-for=\"(item, i) in imgData\"\n            @click=\"selectImage(item)\"\n            :key=\"i\"\n            :style=\"\n              i !== 3\n                ? {\n                    backgroundImage: 'url(' + item.url + ')',\n                    marginRight: '0.17rem',\n                  }\n                : {\n                    backgroundImage: 'url(' + item.url + ')',\n                  }\n            \"\n          >\n            <div\n              class=\"selectRadioImg\"\n              :style=\"\n                item.select\n                  ? {\n                      backgroundImage: 'url(' + imgSelect + ')',\n                      backgroundColor: '#E92B88',\n                    }\n                  : ''\n              \"\n            ></div>\n            <div\n              v-if=\"item.url.substring(item.url.length - 3) == 'gif'\"\n              class=\"selectRadioGIF\"\n            >\n              GIF\n            </div>\n          </div>\n        </div>\n        <div class=\"creat-room-select-title\">房间是否公开</div>\n        <div class=\"creat-room-select-open\">\n          <div\n            class=\"creat-room-select-openSelect\"\n            v-for=\"item in openSelect\"\n            :key=\"item.id\"\n            @click=\"selectOpen(item)\"\n          >\n            <div class=\"creat-room-select-get-head\">\n              <span\n                class=\"creat-room-select-get-head-spot\"\n                :style=\"\n                  item.select\n                    ? {\n                        backgroundColor: '#E92B88',\n                      }\n                    : ''\n                \"\n              ></span>\n            </div>\n            <div class=\"creat-room-select-get-foot\">{{ item.value }}</div>\n          </div>\n        </div>\n        <div class=\"creat-room-button\" @click=\"updateRoomObj\"></div>\n      </div>\n    </el-drawer>\n    <PopupInput ref=\"PopupInput\" @clickYes=\"submitValue\" />\n    <ChoiceBox ref=\"ChoiceBox\" @clickYes=\"cliYes\" />\n  </div>\n</template>\n\n<script>\nimport CallRoom from \"./callRoom/index.vue\";\nimport PopupInput from \"../../components/PopupInput.vue\";\nimport ToolBar from \"../../components/ToolBar.vue\";\nimport ChoiceBox from \"../../components/ChoiceBox.vue\";\nimport request from \"../../request/index\";\nimport { coverPhoto } from \"./coverPhoto.js\";\nimport { GetQueryString } from \"../../utils/utils\";\nimport { btoken } from \"../../request/BusinessToken\";\n\nexport default {\n  name: \"RoomTab\",\n  data: function () {\n    return {\n      updateObj: {\n        name: \"\",\n        themePictureUrl: \"\",\n        isPrivate: 1,\n        password: \"\",\n        backgroundUrl: \"\",\n        kv: [],\n      },\n      tabStretch: true,\n      activeName: \"first\",\n      authorization: null,\n      dataList: [],\n      drawer: false,\n      direction: \"btt\",\n      size: \"88%\",\n      imgStyle: \"\",\n      imgData: [],\n      selectRadio: \"1\",\n      btoken: btoken,\n      openSelect: [\n        {\n          select: true,\n          value: \"私密\",\n          id: \"1\",\n        },\n        {\n          select: false,\n          value: \"公开\",\n          id: \"2\",\n        },\n      ],\n      // eslint-disable-next-line no-undef\n      imgSelect: require(\"../../assets/check-circle-true-icon.png\"),\n      // eslint-disable-next-line no-undef\n      imgBackground: \"\",\n      // updateImgUrl: \"/api/file/upload\",\n      roomType: \"\", //房间类型\n      isInRoom: false, //在房间内\n      title: \"语聊房\",\n    };\n  },\n  components: {\n    CallRoom,\n    PopupInput,\n    ToolBar,\n    ChoiceBox,\n  },\n  watch: {\n    imgStyle: function (newVal) {\n      //   console.log(newVal);\n      this.$nextTick(() => {\n        document.getElementsByClassName(\"el-drawer\")[0].style.backgroundImage =\n          \"url(\" + newVal + \")\";\n        this.updateObj.backgroundUrl = newVal;\n      });\n    },\n  },\n  methods: {\n    //创建房间\n    creatRoom: function () {\n      console.log(\"ct\");\n      console.log(this.$RCLiveRoomLib.im);\n      if (this.$data.roomType == \"liveRoom\") {\n        if (\n          GetQueryString(\"roomType\") &&\n          GetQueryString(\"roomType\") == \"liveRoom\"\n        ) {\n          //是否创建直播房间 先查询 userCheck\n          request\n            .checkUser(this.$store.state.userInfo.userId)\n            .then(async (res) => {\n              console.log(\"checkresout\", res);\n              if (res && res.data && res.data.data && res.data.data.roomId) {\n                console.log(\"用户有创建房间\");\n\n                this.$confirm(\"存在已创建的房间是否加入?\", \"提示\", {\n                  confirmButtonText: \"确定\",\n                  cancelButtonText: \"取消\",\n                  type: \"warning\",\n                  center: true,\n                })\n                  .then(() => {\n                    this.$router.push(\n                      \"/live?isAnchor=true&&roomId=\" + res.data.data.roomId\n                    );\n                  })\n                  .catch(() => {\n                    request.deleteRoom({\n                      roomId: res.data.data.roomId,\n                    });\n                  });\n              } else {\n                console.log(\n                  \"用户没有创建房间  创建新房间\",\n                  this.$store.state.userInfo\n                );\n                this.$router.push(\"/live?isAnchor=true\");\n              }\n            });\n        } else {\n          this.drawer = true;\n          this.imgData = this.$store.state.imgList;\n          this.imgStyle = this.$store.state.imgList[0].url || \"\";\n          this.updateObj.themePictureUrl =\n            coverPhoto[Math.floor(Math.random() * 6)];\n          this.imgBackground = coverPhoto[Math.floor(Math.random() * 6)];\n          this.drawer = true;\n        }\n      } else {\n        request.getUserCheck().then((res) => {\n          if (res.data.code == 10000) {\n            this.imgData = this.$store.state.imgList;\n            this.imgStyle = this.$store.state.imgList[0].url || \"\";\n            this.updateObj.themePictureUrl =\n              coverPhoto[Math.floor(Math.random() * 6)];\n            this.imgBackground = coverPhoto[Math.floor(Math.random() * 6)];\n            this.drawer = true;\n          } else if (res.data.code == 30016) {\n            this.$refs.ChoiceBox.setPopup({\n              value: \"您已创建过房间,是否直接进入\",\n              roomId: res.data.data.roomId,\n            });\n          }\n        });\n      }\n    },\n\n    //选择背景图片\n    selectImage: function (item) {\n      this.imgStyle = item.url;\n      for (let i = 0; i < this.imgData.length; i += 1) {\n        if (this.imgData[i].url === item.url) {\n          this.imgData[i].select = true;\n        } else {\n          this.imgData[i].select = false;\n        }\n      }\n    },\n\n    //是否公开点选\n    selectOpen: function (item) {\n      if (item.id == \"1\") {\n        this.updateObj.isPrivate = 1;\n      } else {\n        this.updateObj.isPrivate = 0;\n      }\n      for (let i = 0; i < this.openSelect.length; i += 1) {\n        if (this.openSelect[i].id === item.id) {\n          this.openSelect[i].select = true;\n        } else {\n          this.openSelect[i].select = false;\n        }\n      }\n    },\n\n    //上传头像图片成功之后\n    handleAvatarSuccess(res, file) {\n      // console.log(res, file);\n      // this.updateObj.themePictureUrl = `${this.$store.state.defaultAddress}${res.data}`;\n      this.updateObj.themePictureUrl = `https://rcrtc-api.rongcloud.net/file/show?path=${res.data}`;\n      this.imgBackground = URL.createObjectURL(file.raw);\n    },\n\n    //上传头像图片之前\n    beforeAvatarUpload(file) {\n      //   console.log(file);\n      const isJPG = file.type === \"image/jpeg\" || \"image/png\";\n      const isLt2M = file.size / 1024 / 1024 < 2;\n\n      if (!isJPG) {\n        this.$message.error(\"上传头像图片只能是 JPG、png 格式!\");\n      }\n      if (!isLt2M) {\n        this.$message.error(\"上传头像图片大小不能超过 2MB!\");\n      }\n      return isJPG && isLt2M;\n    },\n\n    //提交\n    updateRoomObj: function () {\n      if (this.updateObj.name == \"\") {\n        this.$message.error(\"融云RTC:请填写房间名\");\n        return;\n      }\n      if (this.updateObj.isPrivate == 1 && !this.updateObj.password) {\n        this.$refs.PopupInput.setPopup({\n          title: \"请输入四位数字密码\",\n          value: \"\",\n          placeholder: \"请输入四位数字密码\",\n          type: \"number\",\n        });\n      } else {\n        // console.log(this.updateObj);\n        this.createAndJoinRoom();\n      }\n    },\n\n    //提示点击确定\n    cliYes: async function (roomId) {\n      try {\n        await this.$RCVoiceRoomLib.joinRoom(roomId);\n        setTimeout(() => {\n          this.$router.push(\"/room/house\");\n        }, 50);\n      } catch (err) {\n        console.log(\"加入语聊房失败!\");\n      }\n    },\n\n    //关闭drawer\n    drawerClosed: function () {\n      // console.log(\"关闭drawer\");\n      for (let i = 0; i < this.imgData.length; i += 1) {\n        if (i === 0) {\n          this.imgData[i].select = true;\n        } else {\n          this.imgData[i].select = false;\n        }\n      }\n      for (let i = 0; i < this.openSelect.length; i += 1) {\n        if (i === 0) {\n          this.openSelect[i].select = true;\n        } else {\n          this.openSelect[i].select = false;\n        }\n      }\n    },\n\n    //记录密码\n    submitValue: function (item) {\n      this.updateObj.password = item;\n      this.createAndJoinRoom();\n    },\n\n    //点击右上角\n    BarRightCallback: function () {\n      this.$store.dispatch(\"showToast\", {\n        value: \"功能待开放\",\n      });\n    },\n    //小窗关闭\n    miniClose: function (e) {\n      console.log(\"miniclose\", e);\n      console.log(this.$RCLiveRoomLib._roomidcli);\n      if (\n        this.$RCLiveRoomLib._roomidcli &&\n        this.$RCLiveRoomLib._roomidcli.length\n      ) {\n        console.log(this.$RCLiveRoomLib._roomidcli);\n        this.$RCLiveRoomLib.leaveRoom(this.$RCLiveRoomLib._roomidcli);\n        this.$data.isInRoom = false;\n      }\n    },\n    miniBack: function () {\n      console.log(\"miniback\");\n      this.$router.push(\"/live?roomid=\" + this.$RCLiveRoomLib._roomidcli);\n      // console.log(this.$refs);\n    },\n    //创建并加入房间\n    createAndJoinRoom: function () {\n      request\n        .creatRoom({\n          ...this.updateObj,\n        })\n        .then(async (res) => {\n          console.log(res);\n          switch (res.data.code) {\n            case 10000:\n              await this.$RCVoiceRoomLib.createAndJoinRoom({\n                roomId: res.data.data.roomId,\n                roomName: res.data.data.roomName,\n                seatCount: 9,\n              });\n              this.drawer = false;\n              setTimeout(() => {\n                this.$router.push(\"/room/house\");\n              }, 500);\n              break;\n            default:\n              this.$store.dispatch(\"showToast\", {\n                value: res.data.msg,\n              });\n          }\n        })\n        .catch((err) => {\n          console.log(\"err:\", err);\n        });\n    },\n  },\n  created() {\n    console.log(\n      \"==++++++++++++++++++=================>\",\n      GetQueryString(\"roomType\")\n    );\n    if (GetQueryString(\"roomType\")) {\n      if (GetQueryString(\"roomType\") == \"liveRoom\") {\n        this.$data.roomType = \"liveRoom\";\n        this.$data.title = \"直播间\";\n      }\n    }\n    //小窗逻辑\n    if (\n      this.$RCLiveRoomLib._roomidcli &&\n      this.$RCLiveRoomLib._roomidcli.length\n    ) {\n      console.log(\"当前\", this.$RCLiveRoomLib._roomidcli);\n      this.$data.isInRoom = true;\n      this.$RCLiveRoomLib.rtc.body.videoNode = this.$refs.video;\n    }\n  },\n  mounted() {\n    let reqObj = {\n      page: 1,\n      size: 10,\n    };\n\n    if (this.$data.roomType == \"liveRoom\") {\n      reqObj.type = 3;\n    }\n    request\n      .roomList(reqObj)\n      .then((response) => {\n        this.$store.dispatch(\"changesImgList\", response.data.data.images);\n        for (var i = 0; i < response.data.data.rooms.length; i++) {\n          if (\n            response.data.data.rooms[i].createUser.userId ==\n              this.$store.state.userInfo.userId &&\n            reqObj.type == 3\n          ) {\n            //如果是直播间且有自己创建的房间 退出该房间\n            console.log(\"已经有自己创建的房间需要删除一下\");\n            //  this.$router.go(0);\n            request.deleteRoom({\n              roomId: response.data.data.rooms[i].roomId,\n            });\n            response.data.data.rooms.splice(i, 1);\n          }\n        }\n        this.$store.dispatch(\"changesRoomsList\", response.data.data.rooms);\n      })\n      .catch((err) => {\n        console.error(\"请求失败\", err);\n      });\n    //小窗逻辑\n    console.log(\"当前sdk状态\", this.$RCLiveRoomLib);\n    console.log(\"vidioNode\", this.$refs);\n    if (\n      this.$RCLiveRoomLib._roomidcli &&\n      this.$RCLiveRoomLib._roomidcli.length\n    ) {\n      console.log(\"getExist\");\n      this.$RCLiveRoomLib.rtc.body.videoNode = this.$refs.video;\n      this.$RCLiveRoomLib.getExist();\n    }\n\n    window.addEventListener(\"load\", () => {\n      if (this.$route.name != \"login\") {\n        this.$router.replace(\"/login\");\n      }\n    });\n  },\n  beforeRouteLeave(to, from, next) {\n    if (to.name == \"home\") {\n      if (this.$data.roomType == \"liveRoom\") {\n        this.$RCLiveRoomLib.im.body.disconnect().then(() => {\n          console.log(\"成功断开\");\n        });\n      } else {\n        this.$store.dispatch(\"getOwerDisconnet\", true).then(() => {\n          this.$RCVoiceRoomLib.im.body.disconnect().then(() => {\n            console.log(\"成功断开\");\n          });\n        });\n      }\n    }\n    next();\n  },\n};\n</script>\n<style scoped>\n@import url(\"./index.css\");\n</style>"]}]}