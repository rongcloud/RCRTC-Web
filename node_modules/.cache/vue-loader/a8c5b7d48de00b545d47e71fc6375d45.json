{"remainingRequest":"/Users/libin/Desktop/Gwork/rcrtc-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/libin/Desktop/Gwork/rcrtc-web/src/App.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/libin/Desktop/Gwork/rcrtc-web/src/App.vue","mtime":1648111713019},{"path":"/Users/libin/Desktop/Gwork/rcrtc-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/libin/Desktop/Gwork/rcrtc-web/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/libin/Desktop/Gwork/rcrtc-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/libin/Desktop/Gwork/rcrtc-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBQcm9tcHRCb3ggZnJvbSAiLi9jb21wb25lbnRzL1Byb21wdEJveC52dWUiOwppbXBvcnQgcmVxdWVzdCBmcm9tICIuL3JlcXVlc3QvaW5kZXgiOwppbXBvcnQgY29uZmlnIGZyb20gIi4vY29uZmlnIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJBcHAiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjaGFuZ2VVc2VyQ291bnRLZXk6IHRydWUsCiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZgogICAgICBhZG1pbl9JbWc6IHJlcXVpcmUoIi4vYXNzZXRzL3Jvb21pY29uL01hbmFnZS5wbmciKSwKICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmCiAgICAgIG93ZXJfSW1nOiByZXF1aXJlKCIuL2Fzc2V0cy9yb29taWNvbi9hZG1pbmlzdHJhdG9ycy5wbmciKSwKCiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZgogICAgICB2b2ljZV9JbWc6IHJlcXVpcmUoIi4vYXNzZXRzL2xpdmUvaWNvbi12b2ljZS5wbmciKSwKICAgICAgY29vbGRvd246IDAsCiAgICAgIHVybDogd2luZG93LmxvY2F0aW9uLmhyZWYsCiAgICAgIGR3OiA2MDAsCiAgICAgIGRoOiA2MDAsCiAgICB9OwogIH0sCgogIGNvbXBvbmVudHM6IHsKICAgIFByb21wdEJveCwKICB9LAoKICBjcmVhdGVkKCkgewogICAgLy8gd2luZG93LnJjID0gdGhpcy4kUkNWb2ljZVJvb21MaWI7b25saW5lCiAgICB0aGlzLiRSQ1ZvaWNlUm9vbUxpYi5pbml0KHsgQXBwS2V5OiBjb25maWcuYXBwS2V5LmRldiB9KTsKICAgIHRoaXMuJFJDTGl2ZVJvb21MaWIuaW5pdChjb25maWcuYXBwS2V5LmRldik7CiAgICAvLyB3aW5kb3cucmMgPSB0aGlzLiRSQ0xpdmVSb29tTGliOwoKICAgIGNvbnNvbGUubG9nKCJnZXR1YSIsIG5hdmlnYXRvci51c2VyQWdlbnQpOwogICAgLy9Nb3ppbGxhLzUuMCAoTWFjaW50b3NoOyBJbnRlbCBNYWMgT1MgWCAxMF8xNV83KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvOTYuMC40NjY0LjExMCBTYWZhcmkvNTM3LjM2CiAgICAvLyBpZiAoCiAgICAvLyAgIG5hdmlnYXRvci51c2VyQWdlbnQgPT0KICAgIC8vICAgIk1vemlsbGEvNS4wIChpUGhvbmU7IENQVSBpUGhvbmUgT1MgMTNfMl8zIGxpa2UgTWFjIE9TIFgpIEFwcGxlV2ViS2l0LzYwNS4xLjE1IChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi8xMy4wLjMgTW9iaWxlLzE1RTE0OCBTYWZhcmkvNjA0LjEiCiAgICAvLyApIHsKICAgIC8vICAgdmFyIGN1c3RvbVVzZXJBZ2VudCA9IGBNb3ppbGxhLzUuMCAoTWFjaW50b3NoOyBJbnRlbCBNYWMgT1MgWCAxMF8xNV83KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvOTYuMC40NjY0LjExMCBTYWZhcmkvNTM3LjM2YDsKICAgIC8vICAgLy/kv67mlLnlkI7nmoR1c2VyQWdlbnQKICAgIC8vICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5hdmlnYXRvciwgInVzZXJBZ2VudCIsIHsKICAgIC8vICAgICB2YWx1ZTogY3VzdG9tVXNlckFnZW50LAogICAgLy8gICAgIHdyaXRhYmxlOiBmYWxzZSwKICAgIC8vICAgfSk7CiAgICAvLyAgIC8v5omT5Y2wCiAgICAvLyAgIGNvbnNvbGUubG9nKCJnZXR1YW1vZGlmaXkiLCBuYXZpZ2F0b3IudXNlckFnZW50KTsKICAgIC8vIH0gZWxzZSB7CiAgICAvLyAgIGNvbnNvbGUubG9nKCLkvb/nlKjpu5jorqR1YSIsIG5hdmlnYXRvci51c2VyQWdlbnQpOwogICAgLy8gfQogIH0sCiAgLy8gbW91bnRlZCgpIHsKICAvLyAgIHRoaXMuJGRhdGEuZHcgPSB3aW5kb3cuaW5uZXJIZWlnaHQgKiAwLjU2MjU7CiAgLy8gICB0aGlzLiRkYXRhLmRoID0gd2luZG93LmlubmVySGVpZ2h0OwogIC8vICAgd2luZG93Lm9ucmVzaXplID0gKCkgPT4gewogIC8vICAgICBjb25zb2xlLmxvZygicmVzaXoiKTsKICAvLyAgICAgdmFyIGJyb3dzZXIgPSB7CiAgLy8gICAgICAgdmVyc2lvbnM6IChmdW5jdGlvbiAoKSB7CiAgLy8gICAgICAgICB2YXIgdSA9IG5hdmlnYXRvci51c2VyQWdlbnQ7CiAgLy8gICAgICAgICByZXR1cm4gewogIC8vICAgICAgICAgICAvL+enu+WKqOe7iOerr+a1j+iniOWZqOeJiOacrOS/oeaBrwogIC8vICAgICAgICAgICB0cmlkZW50OiB1LmluZGV4T2YoIlRyaWRlbnQiKSA+IC0xLCAvL0lF5YaF5qC4CiAgLy8gICAgICAgICAgIHByZXN0bzogdS5pbmRleE9mKCJQcmVzdG8iKSA+IC0xLCAvL29wZXJh5YaF5qC4CiAgLy8gICAgICAgICAgIHdlYktpdDogdS5pbmRleE9mKCJBcHBsZVdlYktpdCIpID4gLTEsIC8v6Iu55p6c44CB6LC35q2M5YaF5qC4CiAgLy8gICAgICAgICAgIGdlY2tvOiB1LmluZGV4T2YoIkdlY2tvIikgPiAtMSAmJiB1LmluZGV4T2YoIktIVE1MIikgPT0gLTEsIC8v54Gr54uQ5YaF5qC4CiAgLy8gICAgICAgICAgIG1vYmlsZTogISF1Lm1hdGNoKC9BcHBsZVdlYktpdC4qTW9iaWxlLiovKSwgLy/mmK/lkKbkuLrnp7vliqjnu4jnq68KICAvLyAgICAgICAgICAgaW9zOiAhIXUubWF0Y2goL1woaVteO10rOyggVTspPyBDUFUuK01hYyBPUyBYLyksIC8vaW9z57uI56uvCiAgLy8gICAgICAgICAgIGFuZHJvaWQ6IHUuaW5kZXhPZigiQW5kcm9pZCIpID4gLTEgfHwgdS5pbmRleE9mKCJMaW51eCIpID4gLTEsIC8vYW5kcm9pZOe7iOerr+aIlnVj5rWP6KeI5ZmoCiAgLy8gICAgICAgICAgIGlQaG9uZTogdS5pbmRleE9mKCJpUGhvbmUiKSA+IC0xLCAvL+aYr+WQpuS4umlQaG9uZeaIluiAhVFRSETmtY/op4jlmagKICAvLyAgICAgICAgICAgaVBhZDogdS5pbmRleE9mKCJpUGFkIikgPiAtMSwgLy/mmK/lkKZpUGFkCiAgLy8gICAgICAgICAgIHdlYkFwcDogdS5pbmRleE9mKCJTYWZhcmkiKSA9PSAtMSwgLy/mmK/lkKZ3ZWLlupTor6XnqIvluo/vvIzmsqHmnInlpLTpg6jkuI7lupXpg6gKICAvLyAgICAgICAgIH07CiAgLy8gICAgICAgfSkoKSwKICAvLyAgICAgICBsYW5ndWFnZTogKAogIC8vICAgICAgICAgbmF2aWdhdG9yLmJyb3dzZXJMYW5ndWFnZSB8fCBuYXZpZ2F0b3IubGFuZ3VhZ2UKICAvLyAgICAgICApLnRvTG93ZXJDYXNlKCksCiAgLy8gICAgIH07CiAgLy8gICAgIGlmIChicm93c2VyLnZlcnNpb25zLm1vYmlsZSkgewogIC8vICAgICAgIC8v5omL5py656uv5LiN57uZ6YeN572u6aG16Z2iIOmYsuatoui+k+WFpeazlSDlvLnlh7rmn5DkupvpobXpnaLkvJrkubEKICAvLyAgICAgfSBlbHNlIHsKICAvLyAgICAgICBjb25zb2xlLmxvZygicGNyZXNlaXplIik7CiAgLy8gICAgICAgdGhpcy4kZGF0YS5kdyA9IHdpbmRvdy5pbm5lckhlaWdodCAqIDAuNTYyNTsKICAvLyAgICAgICB0aGlzLiRkYXRhLmRoID0gd2luZG93LmlubmVySGVpZ2h0OwogIC8vICAgICB9CiAgLy8gICAgIGNvbnNvbGUubG9nKGJyb3dzZXIpOwogIC8vICAgfTsKICAvLyB9LAoKICBtb3VudGVkKCkgewogICAgdGhpcy4kZGF0YS5kdyA9IHdpbmRvdy5pbm5lckhlaWdodCAqIDAuNTYyNTsKICAgIHRoaXMuJGRhdGEuZGggPSB3aW5kb3cuaW5uZXJIZWlnaHQ7CiAgICB3aW5kb3cub25yZXNpemUgPSAoKSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKCJyZXNpeiIpOwogICAgICB2YXIgYnJvd3NlciA9IHsKICAgICAgICB2ZXJzaW9uczogKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciB1ID0gbmF2aWdhdG9yLnVzZXJBZ2VudDsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIC8v56e75Yqo57uI56uv5rWP6KeI5Zmo54mI5pys5L+h5oGvCiAgICAgICAgICAgIHRyaWRlbnQ6IHUuaW5kZXhPZigiVHJpZGVudCIpID4gLTEsIC8vSUXlhoXmoLgKICAgICAgICAgICAgcHJlc3RvOiB1LmluZGV4T2YoIlByZXN0byIpID4gLTEsIC8vb3BlcmHlhoXmoLgKICAgICAgICAgICAgd2ViS2l0OiB1LmluZGV4T2YoIkFwcGxlV2ViS2l0IikgPiAtMSwgLy/oi7nmnpzjgIHosLfmrYzlhoXmoLgKICAgICAgICAgICAgZ2Vja286IHUuaW5kZXhPZigiR2Vja28iKSA+IC0xICYmIHUuaW5kZXhPZigiS0hUTUwiKSA9PSAtMSwgLy/ngavni5DlhoXmoLgKICAgICAgICAgICAgbW9iaWxlOiAhIXUubWF0Y2goL0FwcGxlV2ViS2l0LipNb2JpbGUuKi8pLCAvL+aYr+WQpuS4uuenu+WKqOe7iOerrwogICAgICAgICAgICBpb3M6ICEhdS5tYXRjaCgvXChpW147XSs7KCBVOyk/IENQVS4rTWFjIE9TIFgvKSwgLy9pb3Pnu4jnq68KICAgICAgICAgICAgYW5kcm9pZDogdS5pbmRleE9mKCJBbmRyb2lkIikgPiAtMSB8fCB1LmluZGV4T2YoIkxpbnV4IikgPiAtMSwgLy9hbmRyb2lk57uI56uv5oiWdWPmtY/op4jlmagKICAgICAgICAgICAgaVBob25lOiB1LmluZGV4T2YoImlQaG9uZSIpID4gLTEsIC8v5piv5ZCm5Li6aVBob25l5oiW6ICFUVFIROa1j+iniOWZqAogICAgICAgICAgICBpUGFkOiB1LmluZGV4T2YoImlQYWQiKSA+IC0xLCAvL+aYr+WQpmlQYWQKICAgICAgICAgICAgd2ViQXBwOiB1LmluZGV4T2YoIlNhZmFyaSIpID09IC0xLCAvL+aYr+WQpndlYuW6lOivpeeoi+W6j++8jOayoeacieWktOmDqOS4juW6lemDqAogICAgICAgICAgfTsKICAgICAgICB9KSgpLAogICAgICAgIGxhbmd1YWdlOiAoCiAgICAgICAgICBuYXZpZ2F0b3IuYnJvd3Nlckxhbmd1YWdlIHx8IG5hdmlnYXRvci5sYW5ndWFnZQogICAgICAgICkudG9Mb3dlckNhc2UoKSwKICAgICAgfTsKICAgICAgaWYgKGJyb3dzZXIudmVyc2lvbnMubW9iaWxlKSB7CiAgICAgICAgLy/miYvmnLrnq6/kuI3nu5nph43nva7pobXpnaIg6Ziy5q2i6L6T5YWl5rOVIOW8ueWHuuafkOS6m+mhtemdouS8muS5sQogICAgICB9IGVsc2UgewogICAgICAgIGNvbnNvbGUubG9nKCJwY3Jlc2VpemUiKTsKICAgICAgICB0aGlzLiRkYXRhLmR3ID0gd2luZG93LmlubmVySGVpZ2h0ICogMC41NjI1OwogICAgICAgIHRoaXMuJGRhdGEuZGggPSB3aW5kb3cuaW5uZXJIZWlnaHQ7CiAgICAgIH0KICAgICAgY29uc29sZS5sb2coYnJvd3Nlcik7CiAgICB9OwogICAgLy8qKioqKioqKioqKioqKioqKuivreiBiuaIv+ebkeWQrOWbnuiwgyoqKioqKioqKioqKioqKioqKioKICAgIC8v6K+t6IGK5oi/6KKr6Z2Z6Z+zL+WPlua2iOmdmemfs+WbnuiwgwogICAgLy8gdGhpcy4kUkNWb2ljZVJvb21MaWIub24oIlNlYXRNdXRlIiwgKE11dGUpID0+IHsKICAgIC8vICAgY29uc29sZS5sb2coIk11dGUiLCBNdXRlKTsKICAgIC8vIH0pOwoKICAgIC8v6K+t6IGK5oi/5bqn5L2N5Y+R55Sf5Y+Y5YyWCiAgICB0aGlzLiRSQ1ZvaWNlUm9vbUxpYi5vbigic2VhdEluZm9EaWRVcGRhdGUiLCAoKSA9PiB7CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJnZXRTZWF0SW5mb0xpc3QiKTsKICAgIH0pOwoKICAgIC8v6K+t6IGK5oi/5oi/6Ze05L+h5oGv5Y+R5aOw5Y+Y5YyWCiAgICB0aGlzLiRSQ1ZvaWNlUm9vbUxpYi5vbigicm9vbUluZm9EaWRVcGRhdGUiLCAocm9vbUluZm8pID0+IHsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImdldHJvb21UaXRsZSIsIHJvb21JbmZvLnJvb21OYW1lKTsKICAgIH0pOwoKICAgIC8v6K+t6IGK5oi/6KKr6Lii5Ye65oi/6Ze0CiAgICB0aGlzLiRSQ1ZvaWNlUm9vbUxpYi5vbigiUkNLaWNrVXNlck91dFJvb21Db250ZW50IiwgYXN5bmMgKHBhcm0pID0+IHsKICAgICAgdGhpcy5LaWNrVXNlck91dChwYXJtKTsKICAgIH0pOwoKICAgIC8v6K+t6IGK5oi/5ZCE56eN5YWs5bGP5raI5oGvCiAgICB0aGlzLiRSQ1ZvaWNlUm9vbUxpYi5vbigiTWVzc2FnZVJlY2VpdmVkIiwgYXN5bmMgKG0pID0+IHsKICAgICAgLy8gbGV0IG0gPSBtZXNzYWdlLm1lc3NhZ2VzWzBdOwogICAgICAvLyBjb25zb2xlLmxvZygiTWVzc2FnZVJlY2VpdmVkIiwgbSk7CiAgICAgIC8v6YCC6YWN6Zi75q2i5aSa56uv55m76ZmG5raI5oGv55uR5ZCsCiAgICAgIGlmIChtLm1lc3NhZ2VUeXBlID09ICJSQ01pYzpsb2dpbkRldmljZU1zZyIpIHsKICAgICAgICBpZiAobS5jb250ZW50LnBsYXRmb3JtICE9ICJ3ZWIiKSB7CiAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgic2hvd1RvYXN0IiwgewogICAgICAgICAgICB2YWx1ZTogIuenu+WKqOerr+eZu+mZhiIsCiAgICAgICAgICAgIHRpbWU6IDIwMDAsCiAgICAgICAgICB9KTsKCiAgICAgICAgICBpZiAodGhpcy4kcm91dGUubmFtZSA9PSAicm9vbUhvdXNlIikgewogICAgICAgICAgICBhd2FpdCB0aGlzLiRSQ1ZvaWNlUm9vbUxpYi5sZWF2ZVJvb20oCiAgICAgICAgICAgICAgdGhpcy4kUkNWb2ljZVJvb21MaWIuX3Jvb21pZGNsaQogICAgICAgICAgICApOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICh0aGlzLiRyb3V0ZS5uYW1lICE9ICJob21lIikgewogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSgiL2hvbWUiKTsKICAgICAgICAgIH0KCiAgICAgICAgICBzZXRUaW1lb3V0KAogICAgICAgICAgICAoKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLmdvKDApOwogICAgICAgICAgICB9LAoKICAgICAgICAgICAgMjAwMAogICAgICAgICAgKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8v6YCC6YWN5pWw576O5a6h5qC45raI5oGv55uR5ZCs5Y+Y5pu0CiAgICAgIGlmIChtLm1lc3NhZ2VUeXBlID09ICJSQ01pYzpzaHVtZWlBdWRpdEZyZWV6ZU1zZyIpIHsKICAgICAgICBpZiAobS5jb250ZW50LnN0YXR1cyA9PSAxKSB7CiAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgic2hvd1RvYXN0IiwgewogICAgICAgICAgICB2YWx1ZTogbS5jb250ZW50Lm1lc3NhZ2UsCiAgICAgICAgICAgIHRpbWU6IDMwMDAsCiAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGlmIChtLmNvbnRlbnQuc3RhdHVzID09IDIpIHsKICAgICAgICAgIGlmICh0aGlzLiRyb3V0ZS5uYW1lID09ICJyb29tSG91c2UiKSB7CiAgICAgICAgICAgIGF3YWl0IHRoaXMuJFJDVm9pY2VSb29tTGliLmxlYXZlUm9vbSgKICAgICAgICAgICAgICB0aGlzLiRSQ1ZvaWNlUm9vbUxpYi5fcm9vbWlkY2xpCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHRoaXMuJHJvdXRlLm5hbWUgIT0gImhvbWUiKSB7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKCIvaG9tZSIpOwogICAgICAgICAgfQoKICAgICAgICAgIHRoaXMuJHJvdXRlci5nbygwKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICghdGhpcy4kc3RvcmUuc3RhdGUuQ2hhdHJvb20pIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGxldCB1c2VyID0gewogICAgICAgIHVzZXJJZDogbS5jb250ZW50LnVzZXJJZCwKICAgICAgICB1c2VyTmFtZTogbS5jb250ZW50LnVzZXJOYW1lLAogICAgICAgIG93ZXI6IGZhbHNlLAogICAgICAgIGFkbWluOiBmYWxzZSwKICAgICAgfTsKCiAgICAgIGxldCB0YXJnZXR1c2VyID0ge307CgogICAgICBpZiAoCiAgICAgICAgbS5jb250ZW50LnVzZXJJZCA9PSB0aGlzLiRzdG9yZS5zdGF0ZS5yb29tSW5mb3JtYXRpb24uY3JlYXRlVXNlci51c2VySWQKICAgICAgKSB7CiAgICAgICAgdXNlclsib3dlciJdID0gdHJ1ZTsKICAgICAgfQoKICAgICAgaWYgKAogICAgICAgIG0uY29udGVudC51c2VySWQgaW4gdGhpcy4kc3RvcmUuc3RhdGUuR2lmdEFuZE1hbmFnZUxpc3RbIk1hbmFnZU9iaiJdCiAgICAgICkgewogICAgICAgIHVzZXJbImFkbWluIl0gPSB0cnVlOwogICAgICB9CgogICAgICBpZiAoInRhcmdldE5hbWUiIGluIG0uY29udGVudCkgewogICAgICAgIHRhcmdldHVzZXIgPSB7CiAgICAgICAgICB0YXJnZXRJZDogbS5jb250ZW50LnRhcmdldElkLAogICAgICAgICAgdGFyZ2V0TmFtZTogbS5jb250ZW50LnRhcmdldE5hbWUsCiAgICAgICAgICBhZG1pbjogZmFsc2UsCiAgICAgICAgICBvd2VyOiBmYWxzZSwKICAgICAgICB9OwoKICAgICAgICBpZiAoCiAgICAgICAgICB0YXJnZXR1c2VyLnRhcmdldElkID09CiAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5yb29tSW5mb3JtYXRpb24uY3JlYXRlVXNlci51c2VySWQKICAgICAgICApIHsKICAgICAgICAgIHRhcmdldHVzZXJbIm93ZXIiXSA9IHRydWU7CiAgICAgICAgfQoKICAgICAgICBpZiAoCiAgICAgICAgICB0YXJnZXR1c2VyLnRhcmdldElkIGluCiAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5HaWZ0QW5kTWFuYWdlTGlzdFsiTWFuYWdlT2JqIl0KICAgICAgICApIHsKICAgICAgICAgIHRhcmdldHVzZXJbImFkbWluIl0gPSB0cnVlOwogICAgICAgIH0KICAgICAgfQoKICAgICAgbGV0IGltZ293ZXIgPQogICAgICAgICI8c3BhbiAgc3R5bGU9J3dpZHRoOjIwcHg7aGVpZ2h0OjIwcHg7ZGlzcGxheTppbmxpbmUtYmxvY2s7bWFyZ2luLWJvdHRvbTotNXB4O2JhY2tncm91bmQtaW1hZ2U6IHVybCgiICsKICAgICAgICB0aGlzLm93ZXJfSW1nICsKICAgICAgICAiKTsgIGJhY2tncm91bmQtcG9zaXRpb246IGNlbnRlcjtiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O2JhY2tncm91bmQtc2l6ZToxNHB4IDE0cHgnPjwvc3Bhbj4iOwogICAgICBsZXQgaW1nQWRtaW4gPQogICAgICAgICI8c3BhbiAgc3R5bGU9J3dpZHRoOjIwcHg7aGVpZ2h0OjIwcHg7ZGlzcGxheTppbmxpbmUtYmxvY2s7bWFyZ2luLWJvdHRvbTotNXB4O2JhY2tncm91bmQtaW1hZ2U6IHVybCgiICsKICAgICAgICB0aGlzLmFkbWluX0ltZyArCiAgICAgICAgIik7ICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiBjZW50ZXI7YmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDtiYWNrZ3JvdW5kLXNpemU6MTRweCAxNHB4Jz48L3NwYW4+IjsKICAgICAgbGV0IHVzZXJJbWcgPSB1c2VyLm93ZXIgPyBpbWdvd2VyIDogdXNlci5hZG1pbiA/IGltZ0FkbWluIDogIiI7CiAgICAgIGxldCB0YXJnZXRJbWcgPSB0YXJnZXR1c2VyLm93ZXIKICAgICAgICA/IGltZ293ZXIKICAgICAgICA6IHRhcmdldHVzZXIuYWRtaW4KICAgICAgICA/IGltZ0FkbWluCiAgICAgICAgOiAiIjsKICAgICAgY29uc29sZS5sb2cobSk7CiAgICAgIGlmICgiY29udmVyc2F0aW9uVHlwZSIgaW4gbSAmJiBtLmNvbnZlcnNhdGlvblR5cGUgPT0gMSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgc3dpdGNoIChtLm1lc3NhZ2VUeXBlKSB7CiAgICAgICAgY2FzZSAiUkM6Q2hhdHJvb206R2lmdCI6IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jYXNlLWRlY2xhcmF0aW9ucwogICAgICAgICAgbGV0IGdpZnRNc2cgPQogICAgICAgICAgICB1c2VySW1nICsKICAgICAgICAgICAgIjxzcGFuIGlkPSciICsKICAgICAgICAgICAgdXNlci51c2VySWQgKwogICAgICAgICAgICAiJyBzdHlsZT0nY29sb3I6IzdmN2Y3Zic7PiIgKwogICAgICAgICAgICBtLmNvbnRlbnQudXNlck5hbWUgKwogICAgICAgICAgICAiPC9zcGFuPiDpgIHnu5kgIiArCiAgICAgICAgICAgIHRhcmdldEltZyArCiAgICAgICAgICAgICI8c3BhbiBpZD0nIiArCiAgICAgICAgICAgIHRhcmdldHVzZXIudGFyZ2V0SWQgKwogICAgICAgICAgICAiJ293ZXI9JyIgKwogICAgICAgICAgICB0YXJnZXR1c2VyLm93ZXIgKwogICAgICAgICAgICAiJ2FkbWluPSciICsKICAgICAgICAgICAgdGFyZ2V0dXNlci5hZG1pbiArCiAgICAgICAgICAgICInIHN0eWxlPSdjb2xvcjojN2Y3ZjdmJztmbG9hdDogbGVmdDs+IiArCiAgICAgICAgICAgIHRhcmdldHVzZXIudGFyZ2V0TmFtZSArCiAgICAgICAgICAgICI8L3NwYW4+ICIgKwogICAgICAgICAgICBtLmNvbnRlbnQuZ2lmdE5hbWUgKwogICAgICAgICAgICAiIFgiICsKICAgICAgICAgICAgbS5jb250ZW50Lm51bWJlcjsKICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLkNoYXRyb29tLnB1c2goZ2lmdE1zZyk7CiAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiZ2lmdFVwZGF0ZSIpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAiUkM6Q2hhdHJvb206QmFycmFnZSI6IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jYXNlLWRlY2xhcmF0aW9ucwogICAgICAgICAgbGV0IEJhcnJhZ2UgPQogICAgICAgICAgICB1c2VySW1nICsKICAgICAgICAgICAgIjxzcGFuIGlkPSciICsKICAgICAgICAgICAgdXNlci51c2VySWQgKwogICAgICAgICAgICAiJ3N0eWxlPSdjb2xvcjojN2Y3ZjdmJz4iICsKICAgICAgICAgICAgdXNlci51c2VyTmFtZSArCiAgICAgICAgICAgICI6IDwvc3Bhbj4iICsKICAgICAgICAgICAgbS5jb250ZW50LmNvbnRlbnQ7CiAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5DaGF0cm9vbS5wdXNoKEJhcnJhZ2UpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAiUkM6Q2hhdHJvb206RW50ZXIiOiAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY2FzZS1kZWNsYXJhdGlvbnMKICAgICAgICAgIGxldCBFbnRlciA9CiAgICAgICAgICAgIHVzZXJJbWcgKwogICAgICAgICAgICAiPHNwYW4gaWQ9JyIgKwogICAgICAgICAgICB1c2VyLnVzZXJJZCArCiAgICAgICAgICAgICInIHN0eWxlPSdjb2xvcjojN2Y3ZjdmJz4iICsKICAgICAgICAgICAgbS5jb250ZW50LnVzZXJOYW1lICsKICAgICAgICAgICAgIjwvc3Bhbj4g6L+b5p2l5LqGIjsKICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLkNoYXRyb29tLnB1c2goRW50ZXIpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAiUkM6Q2hhdHJvb206S2lja091dCI6IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jYXNlLWRlY2xhcmF0aW9ucwogICAgICAgICAgbGV0IEtpY2tPdXQgPQogICAgICAgICAgICB0YXJnZXRJbWcgKwogICAgICAgICAgICAiPHNwYW4gaWQ9JyIgKwogICAgICAgICAgICB0YXJnZXR1c2VyLnRhcmdldElkICsKICAgICAgICAgICAgIicgc3R5bGU9J2NvbG9yOiM3ZjdmN2YnPiIgKwogICAgICAgICAgICBtLmNvbnRlbnQudGFyZ2V0TmFtZSArCiAgICAgICAgICAgICI8L3NwYW4+IOiiqyAiICsKICAgICAgICAgICAgdXNlckltZyArCiAgICAgICAgICAgICI8c3BhbiBpZD0nIiArCiAgICAgICAgICAgIHVzZXIudXNlcklkICsKICAgICAgICAgICAgIicgc3R5bGU9J2NvbG9yOiM3ZjdmN2YnPiIgKwogICAgICAgICAgICBtLmNvbnRlbnQudXNlck5hbWUgKwogICAgICAgICAgICAiPC9zcGFuPiDouKLlh7rmiL/pl7TkuoYiOwogICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuQ2hhdHJvb20ucHVzaChLaWNrT3V0KTsKICAgICAgICAgIC8vIHRoaXMuS2lja1VzZXJPdXQodGFyZ2V0dXNlcik7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICJSQzpDaGF0cm9vbTpBZG1pbiI6IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jYXNlLWRlY2xhcmF0aW9ucwogICAgICAgICAgbGV0IHRleHQgPSBtLmNvbnRlbnQuaXNBZG1pbiA/ICLmiJDkuLrnrqHnkIblkZgiIDogIuiiq+aSpOWbnueuoeeQhuWRmCI7CiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY2FzZS1kZWNsYXJhdGlvbnMKICAgICAgICAgIGxldCBpbWcgPSBtLmNvbnRlbnQuaXNBZG1pbiA/IGltZ0FkbWluIDogIiI7CiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY2FzZS1kZWNsYXJhdGlvbnMKICAgICAgICAgIGxldCBBZG1pbiA9CiAgICAgICAgICAgIGltZyArCiAgICAgICAgICAgICI8c3BhbiBpZD0nIiArCiAgICAgICAgICAgIHVzZXIudXNlcklkICsKICAgICAgICAgICAgIicgc3R5bGU9J2NvbG9yOiM3ZjdmN2YnPiIgKwogICAgICAgICAgICBtLmNvbnRlbnQudXNlck5hbWUgKwogICAgICAgICAgICAiPC9zcGFuPiAiICsKICAgICAgICAgICAgdGV4dDsKICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLkNoYXRyb29tLnB1c2goQWRtaW4pOwogICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goIkFkbWluVXBkYXRlIik7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICJSQzpDaGF0cm9vbTpHaWZ0QWxsIjogLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNhc2UtZGVjbGFyYXRpb25zCiAgICAgICAgICBsZXQgZ2lmdEFsbE1zZyA9CiAgICAgICAgICAgIHVzZXJJbWcgKwogICAgICAgICAgICAiPHNwYW4gaWQ9JyIgKwogICAgICAgICAgICB1c2VyLnVzZXJJZCArCiAgICAgICAgICAgICInIHN0eWxlPSdjb2xvcjojN2Y3ZjdmJzs+IiArCiAgICAgICAgICAgIG0uY29udGVudC51c2VyTmFtZSArCiAgICAgICAgICAgICI8L3NwYW4+IOWFqOm6puaJk+i1jyAiICsKICAgICAgICAgICAgbS5jb250ZW50LmdpZnROYW1lICsKICAgICAgICAgICAgIiBYIiArCiAgICAgICAgICAgIG0uY29udGVudC5udW1iZXI7CiAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5DaGF0cm9vbS5wdXNoKGdpZnRBbGxNc2cpOwogICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImdpZnRVcGRhdGUiKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgIlJDOkNoYXRyb29tOlNlYXRzIjogLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNhc2UtZGVjbGFyYXRpb25zCiAgICAgICAgICBsZXQgc2VhdENvdW50cyA9CiAgICAgICAgICAgICI8c3Bhbj7miL/pl7Tmm7TmjaLkuLogIiArCiAgICAgICAgICAgIG0uY29udGVudC5jb3VudCArCiAgICAgICAgICAgICIg5bqn5qih5byP77yM6K+36YeN5paw5LiK6bqmPC9zcGFuPiI7CiAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5DaGF0cm9vbS5wdXNoKHNlYXRDb3VudHMpOwogICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImdldHNldENvdW50c0NoYW5nZSIsIG0uY29udGVudC5jb3VudCArIDEpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAiUkM6VHh0TXNnIjogLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNhc2UtZGVjbGFyYXRpb25zCiAgICAgICAgICBsZXQgVHh0TXNnID0KICAgICAgICAgICAgIjxzcGFuIHN0eWxlPSdjb2xvcjpyZ2JhKDEwNiwgMTU5LCAyNTUsIDEpOyc+IiArCiAgICAgICAgICAgIG0uY29udGVudC5jb250ZW50ICsKICAgICAgICAgICAgIjwvc3Bhbj4iOwogICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuQ2hhdHJvb20ucHVzaChUeHRNc2cpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAiUkM6Q2hhdHJvb206TGlrZSI6IC8vIGNvbnNvbGUubG9nKHRoaXMuJFJDVm9pY2VSb29tTGliKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfSk7CgogICAgLy/or63ogYrmiL/miL/pl7TliLfmlrDmtojmga8KICAgIHRoaXMuJFJDVm9pY2VSb29tTGliLm9uKCJSb29tTm90aWZpY2F0aW9uUmVjZWl2ZWQiLCAoaXRlbSkgPT4gewogICAgICBjb25zdCB7IG5hbWUsIGNvbnRlbnQgfSA9IGl0ZW07CiAgICAgIGNvbnNvbGUubG9nKG5hbWUsIGNvbnRlbnQpOwogICAgICBzd2l0Y2ggKG5hbWUpIHsKICAgICAgICBjYXNlICJWb2ljZVJvb21CYWNrZ3JvdW5kQ2hhbmdlZCI6CiAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiZ2V0cm9vbUJhY2tncm91bmQiLCBjb250ZW50KTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgIlZvaWNlUm9vbUFncmVlTWFuYWdlUGljayI6CiAgICAgICAgICBpZiAoY29udGVudCA9PSB0aGlzLiRSQ1ZvaWNlUm9vbUxpYi5pbS51c2VySWQpIHsKICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goInNob3dUb2FzdCIsIHsKICAgICAgICAgICAgICB2YWx1ZTogIueUqOaIt+i/nue6v+aIkOWKnyIsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAiVm9pY2VSb29tUmVqZWN0TWFuYWdlUGljayI6CiAgICAgICAgICBpZiAoY29udGVudCA9PSB0aGlzLiRSQ1ZvaWNlUm9vbUxpYi5pbS51c2VySWQpIHsKICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goInNob3dUb2FzdCIsIHsKICAgICAgICAgICAgICB2YWx1ZTogIueUqOaIt+aLkue7nemCgOivtyIsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAiRVZFTlRfQUREX1NISUVMRCI6CiAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiZ2V0c2Vuc2l0aXZlTGlzdCIsIHsKICAgICAgICAgICAgdmFsdWU6IFsKICAgICAgICAgICAgICAuLi50aGlzLiRzdG9yZS5zdGF0ZS5zZW5zaXRpdmVMaXN0LAogICAgICAgICAgICAgIHsgbmFtZTogY29udGVudCwgaWQ6IE1hdGgucmFuZG9tKCkgfSwKICAgICAgICAgICAgXSwKICAgICAgICAgIH0pOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAiRVZFTlRfREVMRVRFX1NISUVMRCI6CiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY2FzZS1kZWNsYXJhdGlvbnMKICAgICAgICAgIGxldCBhcnJheSA9IEpTT04ucGFyc2UoCiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHRoaXMuJHN0b3JlLnN0YXRlLnNlbnNpdGl2ZUxpc3QpCiAgICAgICAgICApOwogICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNhc2UtZGVjbGFyYXRpb25zCiAgICAgICAgICBsZXQgaW5kZXggPSAtMTsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKGFycmF5W2ldWyJuYW1lIl0gPT0gY29udGVudCkgewogICAgICAgICAgICAgIGluZGV4ID0gaTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgaWYgKGluZGV4ID4gLTEpIHsKICAgICAgICAgICAgYXJyYXkuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJnZXRzZW5zaXRpdmVMaXN0IiwgWy4uLmFycmF5XSk7CiAgICAgICAgICBicmVhazsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0pOwoKICAgIC8v6K+t6IGK5oi/5oi/6Ze05Lq65pWw5Y+R55Sf5Y+Y5YyWKOacieS6uui/m+adpSkKICAgIHRoaXMuJFJDVm9pY2VSb29tTGliLm9uKCJBdWRpZW5jZUVudGVyIiwgKGl0ZW0pID0+IHsKICAgICAgY29uc29sZS5sb2coIuaIv+mXtOS6uuaVsOWPkeeUn+WPmOWMlijmnInkurrov5vmnaUpIiwgaXRlbSk7CgogICAgICByZXF1ZXN0CiAgICAgICAgLnJvb211c2VyKHsKICAgICAgICAgIHJvb21JZDogdGhpcy4kUkNWb2ljZVJvb21MaWIuX3Jvb21pZGNsaSwKICAgICAgICB9KQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJnZXRSb29tVXNlckxpc3QiLCByZXMuZGF0YS5kYXRhKTsKICAgICAgICB9KTsKICAgIH0pOwoKICAgIC8v6K+t6IGK5oi/5oi/6Ze05Lq65pWw5Y+R55Sf5Y+Y5YyWKOacieS6uuemu+W8gCkKICAgIHRoaXMuJFJDVm9pY2VSb29tTGliLm9uKCJBdWRpZW5jZUV4aXQiLCAoaXRlbSkgPT4gewogICAgICBjb25zb2xlLmxvZygi5oi/6Ze05Lq65pWw5Y+R55Sf5Y+Y5YyWKOacieS6uuemu+W8gCkiLCBpdGVtKTsKICAgICAgcmVxdWVzdAogICAgICAgIC5yb29tdXNlcih7CiAgICAgICAgICByb29tSWQ6IHRoaXMuJFJDVm9pY2VSb29tTGliLl9yb29taWRjbGksCiAgICAgICAgfSkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiZ2V0Um9vbVVzZXJMaXN0IiwgcmVzLmRhdGEuZGF0YSk7CiAgICAgICAgfSk7CiAgICB9KTsKCiAgICAvL+ivreiBiuaIv+eUs+ivt+S4ium6puS6uuWRmOWPkeeUn+WPmOWMlgogICAgdGhpcy4kUkNWb2ljZVJvb21MaWIub24oIlJlcXVlc3RTZWF0TGlzdENoYW5nZWQiLCBhc3luYyAoKSA9PiB7CiAgICAgIGNvbnN0IGFyciA9IGF3YWl0IHRoaXMuJFJDVm9pY2VSb29tTGliLmdldFJlcXVlc3RTZWF0VXNlcklkcygpOwogICAgICAvLyBjb25zb2xlLmxvZygiZ2V0UmVxdWVzdFNlYXRVc2VySWRzIiwgYXJyKTsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImdldFJlcXVlc3RTZWF0VXNlcklkcyIsIGFycik7CiAgICAgIGlmIChhcnIuaW5kZXhPZih0aGlzLiRSQ1ZvaWNlUm9vbUxpYi5pbS51c2VySWQpICE9IC0xKSB7CiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goInVzZXJIYXNBcHBseSIsIHRydWUpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJ1c2VySGFzQXBwbHkiLCBmYWxzZSk7CiAgICAgIH0KICAgIH0pOwoKICAgIC8v6K+t6IGK5oi/55Sz6K+35LiK6bqm6KKr5ZCM5oSPCiAgICB0aGlzLiRSQ1ZvaWNlUm9vbUxpYi5vbigiUmVxdWVzdFNlYXRBY2NlcHRlZCIsIGFzeW5jICgpID0+IHsKICAgICAgY29uc3QgdmFsdWUgPSBhd2FpdCB0aGlzLiRSQ1ZvaWNlUm9vbUxpYi5maW5kU2VhdCgpOwoKICAgICAgdHJ5IHsKICAgICAgICBhd2FpdCB0aGlzLiRSQ1ZvaWNlUm9vbUxpYi5lbnRlclNlYXQodmFsdWUpOwogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJnZXRTZWF0SW5mb0xpc3QiKTsKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgic2hvd1RvYXN0IiwgewogICAgICAgICAgdmFsdWU6ICLkuIrpuqbmiJDlip8iLAogICAgICAgIH0pOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJzaG93VG9hc3QiLCB7CiAgICAgICAgICB2YWx1ZTogIuS4ium6puWksei0pSIsCiAgICAgICAgfSk7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICB9CiAgICB9KTsKCiAgICAvL+ivreiBiuaIv+eUs+ivt+S4ium6puiiq+aLkue7nQogICAgdGhpcy4kUkNWb2ljZVJvb21MaWIub24oIlJlcXVlc3RTZWF0UmVqZWN0ZWQiLCBhc3luYyAoKSA9PiB7CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJzaG93VG9hc3QiLCB7CiAgICAgICAgdmFsdWU6ICLnlLPor7fkuIrpuqbooqvmi5Lnu50iLAogICAgICB9KTsKICAgIH0pOwoKICAgIC8v6K+t6IGK5oi/IHJ0YyDmlq3lvIDov57mjqUo5b6F5py65pat57q/6Zeu6aKYKQogICAgdGhpcy4kUkNWb2ljZVJvb21MaWIub24oIlJUQ1BlZXJDb25uZWN0aW9uQ2xvc2VCeUV4Y2VwdGlvbiIsIGFzeW5jICgpID0+IHsKICAgICAgYXdhaXQgdGhpcy4kUkNWb2ljZVJvb21MaWIubGVhdmVSb29tKHRoaXMuJFJDVm9pY2VSb29tTGliLl9yb29taWRjbGkpOwogICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSgiL2hvbWUiKTsKICAgICAgdGhpcy4kcm91dGVyLmdvKDApOwogICAgfSk7CgogICAgLy/or63ogYrmiL/ooqvpgoDor7fkuIrpuqYKICAgIHRoaXMuJFJDVm9pY2VSb29tTGliLm9uKCJSQ1BpY2tlclVzZXJTZWF0Q29udGVudCIsIChpbmZvKSA9PiB7CiAgICAgIGlmIChpbmZvLnRhcmdldElkID09IHRoaXMuJFJDVm9pY2VSb29tTGliLmltLnVzZXJJZCkgewogICAgICAgIGlmICh0aGlzLiRzdG9yZS5zdGF0ZS51c2VySW5zZWF0KSB7CiAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgic2hvd1RvYXN0IiwgewogICAgICAgICAgICB2YWx1ZTogIueUqOaIt+W3sue7j+WcqOm6puS9jeS4iiIsCiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kY29uZmlybSgKICAgICAgICAgICAgYOaCqOiiqyR7CiAgICAgICAgICAgICAgaW5mby5zZW5kVXNlcklkID09CiAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUucm9vbUluZm9ybWF0aW9uLmNyZWF0ZVVzZXIudXNlcklkCiAgICAgICAgICAgICAgICA/ICLmiL/kuLsiCiAgICAgICAgICAgICAgICA6ICLnrqHnkIblkZgiCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAg6YKA6K+35LiK6bqm77yM5piv5ZCm5ZCM5oSP77yfYCwKICAgICAgICAgICAgIuaYr+WQpuWQjOaEj+S4ium6piIsCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIuWQjOaEjyIsCiAgICAgICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogIuaLkue7nSIsCiAgICAgICAgICAgICAgY3VzdG9tQ2xhc3M6ICJjdXN0b21DbGFzcy1Db250cm9sIiwKICAgICAgICAgICAgICAvLyBjZW50ZXI6IHRydWUsCiAgICAgICAgICAgICAgc2hvd0Nsb3NlOiBmYWxzZSwKICAgICAgICAgICAgICAvLyB0eXBlOiAid2FybmluZyIsCiAgICAgICAgICAgIH0KICAgICAgICAgICkKICAgICAgICAgICAgLnRoZW4oYXN5bmMgKCkgPT4gewogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBjb25zdCBmaW50U2VhdCA9IGF3YWl0IHRoaXMuJFJDVm9pY2VSb29tTGliLmZpbmRTZWF0KCk7CiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLiRSQ1ZvaWNlUm9vbUxpYi5lbnRlclNlYXQoZmludFNlYXQpOwogICAgICAgICAgICAgICAgdGhpcy4kUkNWb2ljZVJvb21MaWIubm90aWZ5Vm9pY2VSb29tKAogICAgICAgICAgICAgICAgICAiVm9pY2VSb29tQWdyZWVNYW5hZ2VQaWNrIiwKICAgICAgICAgICAgICAgICAgaW5mby5zZW5kVXNlcklkCiAgICAgICAgICAgICAgICApOwoKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoCiAgICAgICAgICAgICAgICAgICgpID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgic2hvd1RvYXN0IiwgewogICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICLkuIrpuqbmiJDlip8iLAogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJnZXRTZWF0SW5mb0xpc3QiKTsKICAgICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICAgIDUwCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgic2hvd1RvYXN0IiwgewogICAgICAgICAgICAgICAgICB2YWx1ZTogIuS4ium6puWksei0pSIsCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy4kUkNWb2ljZVJvb21MaWIubm90aWZ5Vm9pY2VSb29tKAogICAgICAgICAgICAgICAgIlZvaWNlUm9vbVJlamVjdE1hbmFnZVBpY2siLAogICAgICAgICAgICAgICAgaW5mby5zZW5kVXNlcklkCiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKCiAgICAvL+ivreiBiuaIv+i0puWPt+iiq+mhtuaOiQogICAgdGhpcy4kUkNWb2ljZVJvb21MaWIub24oIkNvbm5lY3Rpb0JyZWFrT2ZmIiwgYXN5bmMgKCkgPT4gewogICAgICBpZiAoIXRoaXMuJHN0b3JlLnN0YXRlLm93ZXJEaXNjb25uZXQpIHsKICAgICAgICBpZiAodGhpcy4kcm91dGUubmFtZSA9PSAicm9vbUhvdXNlIikgewogICAgICAgICAgYXdhaXQgdGhpcy4kUkNWb2ljZVJvb21MaWIubGVhdmVSb29tKHRoaXMuJFJDVm9pY2VSb29tTGliLl9yb29taWRjbGkpOwogICAgICAgIH0KICAgICAgICBpZiAodGhpcy4kcm91dGUubmFtZSAhPSAiaG9tZSIpIHsKICAgICAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKCIvaG9tZSIpOwogICAgICAgIH0KICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oMCk7CiAgICAgIH0KICAgIH0pOwoKICAgIC8v6K+t6IGK5oi/5oi/6Ze06KKr6ZSA5q+BCiAgICB0aGlzLiRSQ1ZvaWNlUm9vbUxpYi5vbigiQ2hhdHJvb21EZXN0cm95ZWQiLCBhc3luYyAoKSA9PiB7CiAgICAgIGF3YWl0IHRoaXMuJFJDVm9pY2VSb29tTGliCiAgICAgICAgLmxlYXZlUm9vbSh0aGlzLiRSQ1ZvaWNlUm9vbUxpYi5fcm9vbWlkY2xpKQogICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJnZXRTZWF0SW5mb0xpc3QiKTsKCiAgICAgICAgICB0aGlzLiRhbGVydCgi5b2T5YmN55u05pKt5bey57uT5p2fIiwgewogICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIuehruWumiIsCiAgICAgICAgICAgIGNlbnRlcjogdHJ1ZSwKICAgICAgICAgICAgc2hvd0Nsb3NlOiBmYWxzZSwKICAgICAgICAgICAgY3VzdG9tQ2xhc3M6ICJjdXN0b21DbGFzcy1Db250cm9sIiwKICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHsKICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oLTEpOwogICAgICAgICAgICB9LAogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICB9KTsKCiAgICAvL+ivreiBiuaIv+iiq+aKseS4i+m6pgogICAgdGhpcy4kUkNWb2ljZVJvb21MaWIub24oIktpY2tTZWF0UmVjZWl2ZWQiLCAoKSA9PiB7CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJzaG93VG9hc3QiLCB7CiAgICAgICAgdmFsdWU6ICLmgqjlt7LooqvmirHkuIvpuqYiLAogICAgICB9KTsKICAgIH0pOwoKICAgIC8vICoqKioqKioqKioqKioqKirnm7Tmkq3pg6jliIbnm5HlkKwqKioqKioqKioqKioqKioqCiAgICAvLyB0aGlzLiRSQ1ZvaWNlUm9vbUxpYi5vbigiU2VhdE11dGUiLCAoTXV0ZSkgPT4gewogICAgLy8gICBjb25zb2xlLmxvZygiTXV0ZSIsIE11dGUpOwogICAgLy8gfSk7CgogICAgLy/luqfkvY3lj5HnlJ/lj5jljJYKICAgIHRoaXMuJFJDTGl2ZVJvb21MaWIub24oInNlYXRJbmZvRGlkVXBkYXRlIiwgKCkgPT4gewogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiZ2V0U2VhdEluZm9MaXN0Iik7CiAgICB9KTsKCiAgICAvL+aIv+mXtOS/oeaBr+WPkeWjsOWPmOWMlgogICAgdGhpcy4kUkNMaXZlUm9vbUxpYi5vbigicm9vbUluZm9EaWRVcGRhdGUiLCAocm9vbUluZm8pID0+IHsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImdldHJvb21UaXRsZSIsIHJvb21JbmZvLnJvb21OYW1lKTsKICAgIH0pOwoKICAgIC8v6KKr6Lii5Ye65oi/6Ze0CiAgICB0aGlzLiRSQ0xpdmVSb29tTGliLm9uKCJSQ0tpY2tVc2VyT3V0Um9vbUNvbnRlbnQiLCBhc3luYyAocGFybSkgPT4gewogICAgICBpZiAocGFybS50YXJnZXRJZCA9PSB0aGlzLiRSQ0xpdmVSb29tTGliLmltLnVzZXJJZCkgewogICAgICAgIGF3YWl0IHRoaXMuJFJDTGl2ZVJvb21MaWIKICAgICAgICAgIC5sZWF2ZVJvb20odGhpcy4kUkNMaXZlUm9vbUxpYi5fcm9vbWlkY2xpKQogICAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiZ2V0U2VhdEluZm9MaXN0Iik7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5nbygtMSk7CiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJzaG93VG9hc3QiLCB7CiAgICAgICAgICAgICAgdmFsdWU6ICLmgqjlt7LooqvouKLlh7rmiL/pl7QiLAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICB9CiAgICB9KTsKCiAgICAvL+ebtOaSremXtOmCgOivt+S4ium6pgogICAgdGhpcy4kUkNMaXZlUm9vbUxpYi5vbigib25JbnZpdGF0aW9uIiwgKG8pID0+IHsKICAgICAgLy9vLmlkIOWPl+mCgOivt+S6umlkICAgby5zZWF0SW5kZXgg5Y+X6YKA6K+36bqm5L2NCiAgICAgIGNvbnNvbGUubG9nKCJvbmludmF0aWFpb24iLCBvKTsKICAgICAgLy/mmoLml7bkuI3liKTmlq3nrqHnkIblkZjov5jmmK/miL/kuLsKICAgICAgaWYgKG8uaWQpIHsKICAgICAgICBpZiAodGhpcy4kc3RvcmUuc3RhdGUub25NaWMpIHsKICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJzaG93VG9hc3QiLCB7CiAgICAgICAgICAgIHZhbHVlOiAi55So5oi35bey57uP5Zyo6bqm5L2N5LiKIiwKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRkYXRhLmNvb2xkb3duID0gMTA7CiAgICAgICAgICB0aGlzLmNvb2woKTsKICAgICAgICAgIGNvbnN0IGggPSB0aGlzLiRjcmVhdGVFbGVtZW50OwogICAgICAgICAgdGhpcy4kY29uZmlybShg5oKo6KKr5oi/5Li76YKA6K+35LiK6bqm77yM5piv5ZCm5ZCM5oSP77yfYCwgIuaYr+WQpuWQjOaEj+S4ium6piIsIHsKICAgICAgICAgICAgbWVzc2FnZTogaCgKICAgICAgICAgICAgICAiZGl2IiwKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBhdHRyczogewogICAgICAgICAgICAgICAgICBpZDogImNvb2x0ZXh0IiwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAi5oKo6KKr5oi/5Li76YKA6K+35LiK6bqm77yM5piv5ZCm5ZCM5oSP77yfIDnnp5IiCiAgICAgICAgICAgICksCiAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAi5ZCM5oSPIiwKICAgICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogIuaLkue7nSIsCiAgICAgICAgICAgIGN1c3RvbUNsYXNzOiAiY3VzdG9tQ2xhc3MtQ29udHJvbCIsCiAgICAgICAgICAgIC8vIGNlbnRlcjogdHJ1ZSwKICAgICAgICAgICAgc2hvd0Nsb3NlOiBmYWxzZSwKICAgICAgICAgICAgZGFuZ2Vyb3VzbHlVc2VIVE1MU3RyaW5nOiB0cnVlLAogICAgICAgICAgICAvLyB0eXBlOiAid2FybmluZyIsCiAgICAgICAgICB9KQogICAgICAgICAgICAudGhlbihhc3luYyAoKSA9PiB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coIuiiq+mCgOivt+S4ium6piIsIHRoaXMuJFJDTGl2ZVJvb21MaWIpOwogICAgICAgICAgICAgIHRoaXMuJFJDTGl2ZVJvb21MaWIuYWNjZXB0SW52aXRhdGlvbigpOwogICAgICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLm9uTWljID0gdHJ1ZTsKICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5vbkxpbmsgPSB0cnVlOwogICAgICAgICAgICAgIGNvbnNvbGUubG9nKDEyMzEyMyk7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coIjEyMzEyMyIsIG8uc2VhdEluZGV4KTsKICAgICAgICAgICAgICBhd2FpdCB0aGlzLiRSQ0xpdmVSb29tTGliLmVudGVyU2VhdChvLnNlYXRJbmRleCk7CiAgICAgICAgICAgICAgdGhpcy4kUkNMaXZlUm9vbUxpYi5pbS5tZXNzYWdlVXBkYXRlKCJSQzpWUkxSZWZyZXNoTXNnIiwgewogICAgICAgICAgICAgICAgbmFtZTogIlZvaWNlUm9vbVJlamVjdE1hbmFnZVBpY2siLAogICAgICAgICAgICAgICAgY29udGVudDogewogICAgICAgICAgICAgICAgICBjb250ZW50OiBvLmlkLAogICAgICAgICAgICAgICAgICBuYW1lOiAiVm9pY2VSb29tQWdyZWVNYW5hZ2VQaWNrIiwKICAgICAgICAgICAgICAgICAgdG90YWxNZW1iZXJDb3VudDogMCwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgic2hvd1RvYXN0IiwgewogICAgICAgICAgICAgICAgICB2YWx1ZTogIuS4ium6puaIkOWKnyIsCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJnZXRTZWF0SW5mb0xpc3QiKTsKICAgICAgICAgICAgICB9LCA1MCk7CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAgICAgaWYgKHRoaXMuJFJDTGl2ZVJvb21MaWIucnRjLnJvb21UeXBlID09ICJsaXZlIikgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIue7iOerryIpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIuWPkemAgeaIv2lkIiwgby5pZCk7CiAgICAgICAgICAgICAgICB0aGlzLiRSQ0xpdmVSb29tTGliLnJlamVjdEludml0YXRpb24oby5pZCk7CiAgICAgICAgICAgICAgICB0aGlzLiRkYXRhLmNvb2xkb3duID0gMDsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy4kUkNMaXZlUm9vbUxpYi5pbS5tZXNzYWdlVXBkYXRlKCIiLCB7CiAgICAgICAgICAgICAgICAgIG5hbWU6ICIiLAogICAgICAgICAgICAgICAgICBjb250ZW50OiB7CiAgICAgICAgICAgICAgICAgICAgY29udGVudDogby5pZCwKICAgICAgICAgICAgICAgICAgICBuYW1lOiAiIiwKICAgICAgICAgICAgICAgICAgICB0b3RhbE1lbWJlckNvdW50OiAwLAogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICBkb2N1bWVudAogICAgICAgICAgICAgIC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJlbC1tZXNzYWdlLWJveF9fd3JhcHBlciIpWzBdCiAgICAgICAgICAgICAgLmNsaWNrKCk7CiAgICAgICAgICB9LCAxMDAwMCk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICAgIHRoaXMuJFJDTGl2ZVJvb21MaWIub24oIm9uSW52aXRhdGlvbkNhbmNlbCIsICgpID0+IHsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goInNob3dUb2FzdCIsIHsKICAgICAgICB2YWx1ZTogIuS4ium6pumCgOivt+iiq+WPlua2iCIsCiAgICAgIH0pOwogICAgfSk7CiAgICB0aGlzLiRSQ0xpdmVSb29tTGliLm9uKCJ1c2VyRW50ZXIiLCAodXNlcklkKSA9PiB7CiAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIGNvbnNvbGUubG9nKCJqaW5ydSIsIHVzZXJJZCwgdGhpcy5nZXRVc2VyKHVzZXJJZCkpOwogICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jYXNlLWRlY2xhcmF0aW9ucwogICAgICAgIGxldCBFbnRlciA9CiAgICAgICAgICAiPHNwYW4gaWQ9JyIgKwogICAgICAgICAgdGhpcy5nZXRVc2VyKHVzZXJJZCkudXNlcklkICsKICAgICAgICAgICInIHN0eWxlPSdjb2xvcjojN2Y3ZjdmJz4iICsKICAgICAgICAgIHRoaXMuZ2V0VXNlcih1c2VySWQpLnVzZXJOYW1lICsKICAgICAgICAgICI8L3NwYW4+IOi/m+adpeS6hiI7CiAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuQ2hhdHJvb20ucHVzaChFbnRlcik7CiAgICAgIH0sIDEwMDApOwogICAgfSk7CgogICAgdGhpcy4kUkNMaXZlUm9vbUxpYi5vbigiaW52aXRhdGlvblJlamVjdGVkIiwgKHVzZXJJZCkgPT4gewogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuJHN0b3JlLnN0YXRlLnJvb21Vc2VyTGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgIGlmICh0aGlzLiRzdG9yZS5zdGF0ZS5yb29tVXNlckxpc3RbaV0udXNlcklkID09IHVzZXJJZCkgewogICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goInNob3dUb2FzdCIsIHsKICAgICAgICAgICAgdmFsdWU6IHRoaXMuJHN0b3JlLnN0YXRlLnJvb21Vc2VyTGlzdFtpXS51c2VyTmFtZSArICLmi5Lnu53kuIrpuqYiLAogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKCiAgICAvL+m7mOiupOeahGt25pu05pawCiAgICB0aGlzLiRSQ0xpdmVSb29tTGliLm9uKCJrZXlWYWx1ZURpZFVwZGF0ZSIsIChvKSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKCJrduabtOaWsCIsIG8pOwogICAgICBpZiAoby5rZXkgPT0gIlJPT01fSU5GT19QUkVfRnJlZUVudGVyU2VhdCIpIHsKICAgICAgICBjb25zb2xlLmxvZygi5b2T5YmN5YC8Iiwgby52YWx1ZSwgIjEiLCBTdHJpbmcoby52YWx1ZSkgPT0gIjEiKTsKICAgICAgICBpZiAoU3RyaW5nKG8udmFsdWUpID09ICIxIikgewogICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuaXNGcmVlRW50ZXJTZWF0ID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuaXNGcmVlRW50ZXJTZWF0ID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChvLmtleSA9PSAiTElWRV9WSURFT19TRUFUX0lORk9fUFJFXzEiKSB7CiAgICAgICAgLy/nm7Tmkq3kuJPnlKgg5pyJ5Lq65LiKMeWPt+m6puS9jQogICAgICAgIGNvbnNvbGUubG9nKCLkuIox5Y+36bqmIiwgby52YWx1ZSk7CiAgICAgICAgaWYgKCFKU09OLnBhcnNlKG8udmFsdWUpLnVzZXJJZCB8fCBKU09OLnBhcnNlKG8udmFsdWUpLnVzZXJJZCA9PSAiIikgewogICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUub25MaW5rID0gZmFsc2U7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLm9uTGluayA9IHRydWU7CiAgICAgICAgfQogICAgICB9CiAgICB9KTsKICAgIHRoaXMuJFJDTGl2ZVJvb21MaWIub24oIm9uZGV2aWNlY2hhbmdlIiwgKCkgPT4gewogICAgICBjb25zb2xlLmxvZygi6K6+5aSH5pu05paw5LqGIik7CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJzaG93VG9hc3QiLCB7CiAgICAgICAgdmFsdWU6ICLmo4DmtYvliLDop4bpopHorr7lpIfmm7TmlrDor7fliLfmlrDpobXpnaIiLAogICAgICAgIHRpbWU6IDUwMDAsCiAgICAgIH0pOwogICAgfSk7CgogICAgLy/lkITnp43lhazlsY/mtojmga8KICAgIHRoaXMuJFJDTGl2ZVJvb21MaWIub24oIm9uTWVzc2FnZVJlY2VpdmVkIiwgYXN5bmMgKG0pID0+IHsKICAgICAgLy8gbGV0IG0gPSBtZXNzYWdlLm1lc3NhZ2VzWzBdOwogICAgICAvLyBjb25zb2xlLmxvZygiTWVzc2FnZVJlY2VpdmVkIiwgbSk7CiAgICAgIC8v6YCC6YWN6Zi75q2i5aSa56uv55m76ZmG5raI5oGv55uR5ZCsCiAgICAgIGlmIChtLm1lc3NhZ2VUeXBlID09ICJSQ01pYzpsb2dpbkRldmljZU1zZyIpIHsKICAgICAgICBpZiAobS5jb250ZW50LnBsYXRmb3JtICE9ICJ3ZWIiKSB7CiAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgic2hvd1RvYXN0IiwgewogICAgICAgICAgICB2YWx1ZTogIuenu+WKqOerr+eZu+mZhiIsCiAgICAgICAgICAgIHRpbWU6IDIwMDAsCiAgICAgICAgICB9KTsKCiAgICAgICAgICBpZiAodGhpcy4kcm91dGUubmFtZSA9PSAicm9vbUhvdXNlIikgewogICAgICAgICAgICBhd2FpdCB0aGlzLiRSQ0xpdmVSb29tTGliLmxlYXZlUm9vbSh0aGlzLiRSQ0xpdmVSb29tTGliLl9yb29taWRjbGkpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICh0aGlzLiRyb3V0ZS5uYW1lICE9ICJob21lIikgewogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSgiL2hvbWUiKTsKICAgICAgICAgIH0KCiAgICAgICAgICBzZXRUaW1lb3V0KAogICAgICAgICAgICAoKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLmdvKDApOwogICAgICAgICAgICB9LAoKICAgICAgICAgICAgMjAwMAogICAgICAgICAgKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8v6YCC6YWN5pWw576O5a6h5qC45raI5oGv55uR5ZCs5Y+Y5pu0CiAgICAgIGlmIChtLm1lc3NhZ2VUeXBlID09ICJSQ01pYzpzaHVtZWlBdWRpdEZyZWV6ZU1zZyIpIHsKICAgICAgICBpZiAobS5jb250ZW50LnN0YXR1cyA9PSAxKSB7CiAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgic2hvd1RvYXN0IiwgewogICAgICAgICAgICB2YWx1ZTogbS5jb250ZW50Lm1lc3NhZ2UsCiAgICAgICAgICAgIHRpbWU6IDMwMDAsCiAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGlmIChtLmNvbnRlbnQuc3RhdHVzID09IDIpIHsKICAgICAgICAgIGlmICh0aGlzLiRyb3V0ZS5uYW1lID09ICJyb29tSG91c2UiKSB7CiAgICAgICAgICAgIGF3YWl0IHRoaXMuJFJDTGl2ZVJvb21MaWIubGVhdmVSb29tKHRoaXMuJFJDTGl2ZVJvb21MaWIuX3Jvb21pZGNsaSk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHRoaXMuJHJvdXRlLm5hbWUgIT0gImhvbWUiKSB7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKCIvaG9tZSIpOwogICAgICAgICAgfQoKICAgICAgICAgIHRoaXMuJHJvdXRlci5nbygwKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICghdGhpcy4kc3RvcmUuc3RhdGUuQ2hhdHJvb20pIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGxldCB1c2VyID0gewogICAgICAgIHVzZXJJZDogbS5jb250ZW50LnVzZXJJZCwKICAgICAgICB1c2VyTmFtZTogbS5jb250ZW50LnVzZXJOYW1lLAogICAgICAgIG93ZXI6IGZhbHNlLAogICAgICAgIGFkbWluOiBmYWxzZSwKICAgICAgfTsKCiAgICAgIGxldCB0YXJnZXR1c2VyID0ge307CgogICAgICBpZiAoCiAgICAgICAgbS5jb250ZW50LnVzZXJJZCA9PSB0aGlzLiRzdG9yZS5zdGF0ZS5yb29tSW5mb3JtYXRpb24uY3JlYXRlVXNlci51c2VySWQKICAgICAgKSB7CiAgICAgICAgdXNlclsib3dlciJdID0gdHJ1ZTsKICAgICAgfQoKICAgICAgaWYgKAogICAgICAgIG0uY29udGVudC51c2VySWQgaW4gdGhpcy4kc3RvcmUuc3RhdGUuR2lmdEFuZE1hbmFnZUxpc3RbIk1hbmFnZU9iaiJdCiAgICAgICkgewogICAgICAgIHVzZXJbImFkbWluIl0gPSB0cnVlOwogICAgICB9CgogICAgICBpZiAoInRhcmdldE5hbWUiIGluIG0uY29udGVudCkgewogICAgICAgIHRhcmdldHVzZXIgPSB7CiAgICAgICAgICB0YXJnZXRJZDogbS5jb250ZW50LnRhcmdldElkLAogICAgICAgICAgdGFyZ2V0TmFtZTogbS5jb250ZW50LnRhcmdldE5hbWUsCiAgICAgICAgICBhZG1pbjogZmFsc2UsCiAgICAgICAgICBvd2VyOiBmYWxzZSwKICAgICAgICB9OwoKICAgICAgICBpZiAoCiAgICAgICAgICB0YXJnZXR1c2VyLnRhcmdldElkID09CiAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5yb29tSW5mb3JtYXRpb24uY3JlYXRlVXNlci51c2VySWQKICAgICAgICApIHsKICAgICAgICAgIHRhcmdldHVzZXJbIm93ZXIiXSA9IHRydWU7CiAgICAgICAgfQoKICAgICAgICBpZiAoCiAgICAgICAgICB0YXJnZXR1c2VyLnRhcmdldElkIGluCiAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5HaWZ0QW5kTWFuYWdlTGlzdFsiTWFuYWdlT2JqIl0KICAgICAgICApIHsKICAgICAgICAgIHRhcmdldHVzZXJbImFkbWluIl0gPSB0cnVlOwogICAgICAgIH0KICAgICAgfQoKICAgICAgbGV0IGltZ293ZXIgPQogICAgICAgICI8c3BhbiAgc3R5bGU9J3dpZHRoOjIwcHg7aGVpZ2h0OjIwcHg7ZGlzcGxheTppbmxpbmUtYmxvY2s7bWFyZ2luLWJvdHRvbTotNXB4O2JhY2tncm91bmQtaW1hZ2U6IHVybCgiICsKICAgICAgICB0aGlzLm93ZXJfSW1nICsKICAgICAgICAiKTsgIGJhY2tncm91bmQtcG9zaXRpb246IGNlbnRlcjtiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O2JhY2tncm91bmQtc2l6ZToxNHB4IDE0cHgnPjwvc3Bhbj4iOwogICAgICBsZXQgaW1nQWRtaW4gPQogICAgICAgICI8c3BhbiAgc3R5bGU9J3dpZHRoOjIwcHg7aGVpZ2h0OjIwcHg7ZGlzcGxheTppbmxpbmUtYmxvY2s7bWFyZ2luLWJvdHRvbTotNXB4O2JhY2tncm91bmQtaW1hZ2U6IHVybCgiICsKICAgICAgICB0aGlzLmFkbWluX0ltZyArCiAgICAgICAgIik7ICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiBjZW50ZXI7YmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDtiYWNrZ3JvdW5kLXNpemU6MTRweCAxNHB4Jz48L3NwYW4+IjsKICAgICAgbGV0IHVzZXJJbWcgPSB1c2VyLm93ZXIgPyBpbWdvd2VyIDogdXNlci5hZG1pbiA/IGltZ0FkbWluIDogIiI7CiAgICAgIGxldCB0YXJnZXRJbWcgPSB0YXJnZXR1c2VyLm93ZXIKICAgICAgICA/IGltZ293ZXIKICAgICAgICA6IHRhcmdldHVzZXIuYWRtaW4KICAgICAgICA/IGltZ0FkbWluCiAgICAgICAgOiAiIjsKICAgICAgY29uc29sZS5sb2codXNlckltZyk7CiAgICAgIGNvbnNvbGUubG9nKG0pOwogICAgICBpZiAoImNvbnZlcnNhdGlvblR5cGUiIGluIG0gJiYgbS5jb252ZXJzYXRpb25UeXBlID09IDEpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHN3aXRjaCAobS5tZXNzYWdlVHlwZSkgewogICAgICAgIGNhc2UgIlJDOlR4dE1zZyI6IC8v5pS25Yiw5paH5pys5raI5oGv5omT5Yiw5YWs5bGPCiAgICAgICAgICBjb25zb2xlLmxvZygi5pS25YiwVHh0TXNn5omT5Yiw5YWs5bGPIiwgbSk7CiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY2FzZS1kZWNsYXJhdGlvbnMKICAgICAgICAgIGxldCB0eHRNc2c7CiAgICAgICAgICBpZiAoIW0uY29udGVudC5uYW1lKSB7CiAgICAgICAgICAgIHR4dE1zZyA9CiAgICAgICAgICAgICAgIjxzcGFuIHN0eWxlPSdjb2xvcjpyZ2JhKDEwNiwgMTU5LCAyNTUsIDEpOyc+IiArCiAgICAgICAgICAgICAgbS5jb250ZW50LmNvbnRlbnQgKwogICAgICAgICAgICAgICI8L3NwYW4+IjsKICAgICAgICAgICAgY29uc29sZS5sb2coIm5vbmFtZSIpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdHh0TXNnID0KICAgICAgICAgICAgICAiPHNwYW4gc3R5bGU9J2NvbG9yOiM3ZjdmN2YnPiIgKwogICAgICAgICAgICAgIG0uY29udGVudC5uYW1lICsKICAgICAgICAgICAgICAiIDwvc3Bhbj4iICsKICAgICAgICAgICAgICBtLmNvbnRlbnQuY29udGVudDsKICAgICAgICAgIH0KCiAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5DaGF0cm9vbS5wdXNoKHR4dE1zZyk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICJSQzpDaGF0cm9vbTpHaWZ0IjoKICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jYXNlLWRlY2xhcmF0aW9ucwogICAgICAgICAgbGV0IGdpZnRNc2cgPQogICAgICAgICAgICB1c2VySW1nICsKICAgICAgICAgICAgIjxzcGFuIGlkPSciICsKICAgICAgICAgICAgdXNlci51c2VySWQgKwogICAgICAgICAgICAiJyBzdHlsZT0nY29sb3I6IzdmN2Y3Zic7PiIgKwogICAgICAgICAgICBtLmNvbnRlbnQudXNlck5hbWUgKwogICAgICAgICAgICAiPC9zcGFuPiDpgIHnu5kgIiArCiAgICAgICAgICAgIHRhcmdldEltZyArCiAgICAgICAgICAgICI8c3BhbiBpZD0nIiArCiAgICAgICAgICAgIHRhcmdldHVzZXIudGFyZ2V0SWQgKwogICAgICAgICAgICAiJ293ZXI9JyIgKwogICAgICAgICAgICB0YXJnZXR1c2VyLm93ZXIgKwogICAgICAgICAgICAiJ2FkbWluPSciICsKICAgICAgICAgICAgdGFyZ2V0dXNlci5hZG1pbiArCiAgICAgICAgICAgICInIHN0eWxlPSdjb2xvcjojN2Y3ZjdmJztmbG9hdDogbGVmdDs+IiArCiAgICAgICAgICAgIHRhcmdldHVzZXIudGFyZ2V0TmFtZSArCiAgICAgICAgICAgICI8L3NwYW4+ICIgKwogICAgICAgICAgICBtLmNvbnRlbnQuZ2lmdE5hbWUgKwogICAgICAgICAgICAiIFgiICsKICAgICAgICAgICAgbS5jb250ZW50Lm51bWJlcjsKICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLkNoYXRyb29tLnB1c2goZ2lmdE1zZyk7CiAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5DaGF0cm9vbS5naWZ0KCk7CiAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiZ2lmdFVwZGF0ZSIpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAiUkM6Q2hhdHJvb206QmFycmFnZSI6IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jYXNlLWRlY2xhcmF0aW9ucwogICAgICAgICAgbGV0IEJhcnJhZ2UgPQogICAgICAgICAgICB1c2VySW1nICsKICAgICAgICAgICAgIjxzcGFuIGlkPSciICsKICAgICAgICAgICAgdXNlci51c2VySWQgKwogICAgICAgICAgICAiJ3N0eWxlPSdjb2xvcjojN2Y3ZjdmJz4iICsKICAgICAgICAgICAgdXNlci51c2VyTmFtZSArCiAgICAgICAgICAgICI6IDwvc3Bhbj4iICsKICAgICAgICAgICAgbS5jb250ZW50LmNvbnRlbnQ7CiAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5DaGF0cm9vbS5wdXNoKEJhcnJhZ2UpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAiUkM6Q2hhdHJvb206RW50ZXIiOiAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY2FzZS1kZWNsYXJhdGlvbnMKICAgICAgICAgIGxldCBFbnRlciA9CiAgICAgICAgICAgIHVzZXJJbWcgKwogICAgICAgICAgICAiPHNwYW4gaWQ9JyIgKwogICAgICAgICAgICB1c2VyLnVzZXJJZCArCiAgICAgICAgICAgICInIHN0eWxlPSdjb2xvcjojN2Y3ZjdmJz4iICsKICAgICAgICAgICAgbS5jb250ZW50LnVzZXJOYW1lICsKICAgICAgICAgICAgIjwvc3Bhbj4g6L+b5p2l5LqGIjsKICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLkNoYXRyb29tLnB1c2goRW50ZXIpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAiUkM6Q2hhdHJvb206S2lja091dCI6IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jYXNlLWRlY2xhcmF0aW9ucwogICAgICAgICAgbGV0IEtpY2tPdXQgPQogICAgICAgICAgICB0YXJnZXRJbWcgKwogICAgICAgICAgICAiPHNwYW4gaWQ9JyIgKwogICAgICAgICAgICB0YXJnZXR1c2VyLnRhcmdldElkICsKICAgICAgICAgICAgIicgc3R5bGU9J2NvbG9yOiM3ZjdmN2YnPiIgKwogICAgICAgICAgICBtLmNvbnRlbnQudGFyZ2V0TmFtZSArCiAgICAgICAgICAgICI8L3NwYW4+IOiiqyAiICsKICAgICAgICAgICAgdXNlckltZyArCiAgICAgICAgICAgICI8c3BhbiBpZD0nIiArCiAgICAgICAgICAgIHVzZXIudXNlcklkICsKICAgICAgICAgICAgIicgc3R5bGU9J2NvbG9yOiM3ZjdmN2YnPiIgKwogICAgICAgICAgICBtLmNvbnRlbnQudXNlck5hbWUgKwogICAgICAgICAgICAiPC9zcGFuPiDouKLlh7rmiL/pl7TkuoYiOwogICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuQ2hhdHJvb20ucHVzaChLaWNrT3V0KTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgIlJDOkNoYXRyb29tOkFkbWluIjogLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNhc2UtZGVjbGFyYXRpb25zCiAgICAgICAgICBsZXQgdGV4dCA9IG0uY29udGVudC5pc0FkbWluID8gIuaIkOS4uueuoeeQhuWRmCIgOiAi6KKr5pKk5Zue566h55CG5ZGYIjsKICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jYXNlLWRlY2xhcmF0aW9ucwogICAgICAgICAgbGV0IGltZyA9IG0uY29udGVudC5pc0FkbWluID8gaW1nQWRtaW4gOiAiIjsKICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jYXNlLWRlY2xhcmF0aW9ucwogICAgICAgICAgbGV0IEFkbWluID0KICAgICAgICAgICAgaW1nICsKICAgICAgICAgICAgIjxzcGFuIGlkPSciICsKICAgICAgICAgICAgdXNlci51c2VySWQgKwogICAgICAgICAgICAiJyBzdHlsZT0nY29sb3I6IzdmN2Y3Zic+IiArCiAgICAgICAgICAgIG0uY29udGVudC51c2VyTmFtZSArCiAgICAgICAgICAgICI8L3NwYW4+ICIgKwogICAgICAgICAgICB0ZXh0OwogICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuQ2hhdHJvb20ucHVzaChBZG1pbik7CiAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiQWRtaW5VcGRhdGUiKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgIlJDOkNoYXRyb29tOkdpZnRBbGwiOiAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY2FzZS1kZWNsYXJhdGlvbnMKICAgICAgICAgIGxldCBnaWZ0QWxsTXNnID0KICAgICAgICAgICAgdXNlckltZyArCiAgICAgICAgICAgICI8c3BhbiBpZD0nIiArCiAgICAgICAgICAgIHVzZXIudXNlcklkICsKICAgICAgICAgICAgIicgc3R5bGU9J2NvbG9yOiM3ZjdmN2YnOz4iICsKICAgICAgICAgICAgbS5jb250ZW50LnVzZXJOYW1lICsKICAgICAgICAgICAgIjwvc3Bhbj4g5YWo6bqm5omT6LWPICIgKwogICAgICAgICAgICBtLmNvbnRlbnQuZ2lmdE5hbWUgKwogICAgICAgICAgICAiIFgiICsKICAgICAgICAgICAgbS5jb250ZW50Lm51bWJlcjsKICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLkNoYXRyb29tLnB1c2goZ2lmdEFsbE1zZyk7CiAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5DaGF0cm9vbS5naWZ0KCk7CiAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiZ2lmdFVwZGF0ZSIpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAiUkM6Q2hhdHJvb206U2VhdHMiOiAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY2FzZS1kZWNsYXJhdGlvbnMKICAgICAgICAgIGxldCBzZWF0Q291bnRzID0KICAgICAgICAgICAgIjxzcGFuPuaIv+mXtOabtOaNouS4uiAiICsKICAgICAgICAgICAgbS5jb250ZW50LmNvdW50ICsKICAgICAgICAgICAgIiDluqfmqKHlvI/vvIzor7fph43mlrDkuIrpuqY8L3NwYW4+IjsKICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLkNoYXRyb29tLnB1c2goc2VhdENvdW50cyk7CiAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiZ2V0c2V0Q291bnRzQ2hhbmdlIiwgbS5jb250ZW50LmNvdW50ICsgMSk7CiAgICAgICAgICBicmVhazsKICAgICAgICAvLyBjYXNlICJSQzpUeHRNc2ciOiAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY2FzZS1kZWNsYXJhdGlvbnMKICAgICAgICAvLyAgIGxldCBUeHRNc2cgPQogICAgICAgIC8vICAgICAiPHNwYW4gc3R5bGU9J2NvbG9yOnJnYmEoMTA2LCAxNTksIDI1NSwgMSk7Jz4iICsKICAgICAgICAvLyAgICAgbS5jb250ZW50LmNvbnRlbnQgKwogICAgICAgIC8vICAgICAiPC9zcGFuPiI7CiAgICAgICAgLy8gICB0aGlzLiRzdG9yZS5zdGF0ZS5DaGF0cm9vbS5wdXNoKFR4dE1zZyk7CiAgICAgICAgLy8gICBicmVhazsKICAgICAgICBjYXNlICJSQzpDaGF0cm9vbTpMaWtlIjogLy8gY29uc29sZS5sb2codGhpcy4kUkNMaXZlUm9vbUxpYik7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICJSQzpDbWRNc2ciOgogICAgICAgICAgY29uc29sZS5sb2coIuaUtuWIsOWRveS7pOa2iOaBryIsIG0pOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAiUkM6VlJWb2ljZU1zZyI6CiAgICAgICAgICBjb25zb2xlLmxvZyhtKTsKCiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY2FzZS1kZWNsYXJhdGlvbnMKICAgICAgICAgIGxldCB2b2ljZU1zZzsKICAgICAgICAgIHZvaWNlTXNnID0KICAgICAgICAgICAgIjxzcGFuIHN0eWxlPSdjb2xvcjojN2Y3ZjdmJyA+IiArCiAgICAgICAgICAgIG0uY29udGVudC5fdXNlck5hbWUgKwogICAgICAgICAgICAiIDwvc3Bhbj4iICsKICAgICAgICAgICAgYDxzcGFuIGhlaWdodDogMjJweDtiYWNrZ3JvdW5kOiBub25lO2JvcmRlci1yYWRpdXM6IDRweDsgYm9yZGVyOiAxcHggc29saWQ7IGNvbG9yOiAjNjY2OyBvbmNsaWNrPSJuZXcgQXVkaW8oJ2AgKwogICAgICAgICAgICBtLmNvbnRlbnQuX3BhdGggKwogICAgICAgICAgICBgJykucGxheSgpOyI+YCArCiAgICAgICAgICAgIG0uY29udGVudC5fZHVyYXRpb24gKwogICAgICAgICAgICAiJyAiICsKICAgICAgICAgICAgIjxzcGFuICBzdHlsZT0nd2lkdGg6MjBweDtoZWlnaHQ6MjBweDtkaXNwbGF5OmlubGluZS1ibG9jazttYXJnaW4tYm90dG9tOi01cHg7YmFja2dyb3VuZC1pbWFnZTogdXJsKCIgKwogICAgICAgICAgICB0aGlzLnZvaWNlX0ltZyArCiAgICAgICAgICAgICIpOyAgYmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyO2JhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7YmFja2dyb3VuZC1zaXplOjE0cHggMTRweCc+PC9zcGFuPiIgKwogICAgICAgICAgICAiPC9zcGFuPiI7CgogICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuQ2hhdHJvb20ucHVzaCh2b2ljZU1zZyk7CiAgICAgICAgICBicmVhazsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0pOwoKICAgIC8v5oi/6Ze05Lq65pWw5Y+R55Sf5Y+Y5YyWCiAgICB0aGlzLiRSQ0xpdmVSb29tTGliLm9uKCJjaGFuZ2VVc2VyQ291bnQiLCAoKSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKCJ1c2VyY2hlbmdlIik7CiAgICAgIHJlcXVlc3QKICAgICAgICAucm9vbXVzZXIoewogICAgICAgICAgcm9vbUlkOiB0aGlzLiRSQ0xpdmVSb29tTGliLl9yb29taWRjbGksCiAgICAgICAgfSkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiZ2V0Um9vbVVzZXJMaXN0IiwgcmVzLmRhdGEuZGF0YSk7CiAgICAgICAgfSk7CiAgICB9KTsKCiAgICAvL+aIv+mXtOS6uuaVsOWPkeeUn+WPmOWMlijmnInkurrov5vmnaUpCiAgICB0aGlzLiRSQ0xpdmVSb29tTGliLm9uKCJBdWRpZW5jZUVudGVyIiwgKGl0ZW0pID0+IHsKICAgICAgY29uc29sZS5sb2coIuaIv+mXtOS6uuaVsOWPkeeUn+WPmOWMlijmnInkurrov5vmnaUpIiwgaXRlbSk7CgogICAgICByZXF1ZXN0CiAgICAgICAgLnJvb211c2VyKHsKICAgICAgICAgIHJvb21JZDogdGhpcy4kUkNMaXZlUm9vbUxpYi5fcm9vbWlkY2xpLAogICAgICAgIH0pCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImdldFJvb21Vc2VyTGlzdCIsIHJlcy5kYXRhLmRhdGEpOwogICAgICAgIH0pOwogICAgfSk7CgogICAgLy/miL/pl7TkurrmlbDlj5HnlJ/lj5jljJYo5pyJ5Lq656a75byAKQogICAgdGhpcy4kUkNMaXZlUm9vbUxpYi5vbigiQXVkaWVuY2VFeGl0IiwgKGl0ZW0pID0+IHsKICAgICAgY29uc29sZS5sb2coIuaIv+mXtOS6uuaVsOWPkeeUn+WPmOWMlijmnInkurrnprvlvIApIiwgaXRlbSk7CgogICAgICByZXF1ZXN0CiAgICAgICAgLnJvb211c2VyKHsKICAgICAgICAgIHJvb21JZDogdGhpcy4kUkNMaXZlUm9vbUxpYi5fcm9vbWlkY2xpLAogICAgICAgIH0pCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImdldFJvb21Vc2VyTGlzdCIsIHJlcy5kYXRhLmRhdGEpOwogICAgICAgIH0pOwogICAgfSk7CgogICAgLy/nlLPor7fkuIrpuqbkurrlkZjlj5HnlJ/lj5jljJYKICAgIHRoaXMuJFJDTGl2ZVJvb21MaWIub24oIlJlcXVlc3RTZWF0TGlzdENoYW5nZWQiLCBhc3luYyAoKSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKCLnlLPor7fkuIrpuqbkurrlkZjlj5HnlJ/lj5jljJYgIik7CiAgICAgIGNvbnN0IGFyciA9IGF3YWl0IHRoaXMuJFJDTGl2ZVJvb21MaWIuZ2V0UmVxdWVzdFNlYXRVc2VySWRzKCk7CiAgICAgIC8vIGNvbnNvbGUubG9nKCJnZXRSZXF1ZXN0U2VhdFVzZXJJZHMiLCBhcnIpOwogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiZ2V0UmVxdWVzdFNlYXRVc2VySWRzIiwgYXJyKTsKICAgICAgaWYgKGFyci5pbmRleE9mKHRoaXMuJFJDTGl2ZVJvb21MaWIuaW0udXNlcklkKSAhPSAtMSkgewogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJ1c2VySGFzQXBwbHkiLCB0cnVlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgidXNlckhhc0FwcGx5IiwgZmFsc2UpOwogICAgICB9CiAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLm9uTWljID0gZmFsc2U7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy4kUkNMaXZlUm9vbUxpYi5zZWF0SW5mb0xpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAoCiAgICAgICAgICB0aGlzLiRSQ0xpdmVSb29tTGliLmltLnVzZXJJZCA9PQogICAgICAgICAgICB0aGlzLiRSQ0xpdmVSb29tTGliLnNlYXRJbmZvTGlzdFtpXS51c2VySWQgJiYKICAgICAgICAgICF0aGlzLiRzdG9yZS5zdGF0ZS5jcmVhdFVzZXIKICAgICAgICApIHsKICAgICAgICAgIC8v6Z2e5Li75pKt5LiU5Zyo6bqm5L2N5LiK5pe2CiAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5vbk1pYyA9IHRydWU7CiAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5vbkxpbmsgPSB0cnVlOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CgogICAgLy/nlLPor7fkuIrpuqbooqvlkIzmhI8KICAgIHRoaXMuJFJDTGl2ZVJvb21MaWIub24oIlJlcXVlc3RTZWF0QWNjZXB0ZWQiLCBhc3luYyAoKSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKCJSZXF1ZXN0U2VhdEFjY2VwdGVkIik7CiAgICAgIC8vIGlmKCl7CgogICAgICAvLyB9CiAgICAgIGF3YWl0IHRoaXMuJFJDTGl2ZVJvb21MaWIuZW50ZXJTZWF0KHRoaXMuJFJDTGl2ZVJvb21MaWIuZmluZFNlYXQoKSk7CiAgICAgIGNvbnNvbGUubG9nKCJvbk1pYyIpOwogICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5vbk1pYyA9IHRydWU7CiAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLm9uTGluayA9IHRydWU7CiAgICB9KTsKCiAgICAvL+eUs+ivt+S4ium6puiiq+aLkue7nQogICAgdGhpcy4kUkNMaXZlUm9vbUxpYi5vbigiUmVxdWVzdFNlYXRSZWplY3RlZCIsIGFzeW5jICgpID0+IHsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goInNob3dUb2FzdCIsIHsKICAgICAgICB2YWx1ZTogIueUs+ivt+S4ium6puiiq+aLkue7nSIsCiAgICAgIH0pOwogICAgfSk7CgogICAgLy/or7Tor53nm5HlkKwKICAgIHRoaXMuJFJDTGl2ZVJvb21MaWIub24oInNwZWFraW5nU3RhdHVzQ2hlbmdlIiwgKGluZm8pID0+IHsKICAgICAgLy8gaWYgKE51bWJlcihpbmZvLnNwZWFraW5nKSkgewogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiZ2V0U3BlYWtpbmdDaGVuZ2UiLCB7CiAgICAgICAgaW5kZXg6IE51bWJlcihpbmZvLmluZGV4KSwKICAgICAgICBzcGVha2luZzogTnVtYmVyKGluZm8uc3BlYWtpbmcpLAogICAgICB9KTsKICAgICAgLy8gfQogICAgfSk7CgogICAgLy/lhbPpl63miL/pl7QKICAgIHRoaXMuJFJDTGl2ZVJvb21MaWIub24oIm9uVm9pY2VSb29tQ2xvc2VkIiwgYXN5bmMgKCkgPT4gewogICAgICBhd2FpdCB0aGlzLiRSQ0xpdmVSb29tTGliCiAgICAgICAgLmxlYXZlUm9vbSh0aGlzLiRSQ0xpdmVSb29tTGliLl9yb29taWRjbGkpCiAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImdldFNlYXRJbmZvTGlzdCIpOwogICAgICAgICAgdGhpcy4kYWxlcnQoIuebtOaSreW3sue7k+adn++8jOaIv+mXtOWFs+mXrSIsIHsKICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICLnoa7lrpoiLAogICAgICAgICAgICBjZW50ZXI6IHRydWUsCiAgICAgICAgICAgIHNob3dDbG9zZTogZmFsc2UsCiAgICAgICAgICAgIGN1c3RvbUNsYXNzOiAiY3VzdG9tQ2xhc3MtQ29udHJvbCIsCiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLmdvKC0xKTsKICAgICAgICAgICAgfSwKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgfSk7CgogICAgLy/mm7TmjaLog4zmma8KICAgIHRoaXMuJFJDTGl2ZVJvb21MaWIub24oIm9uVm9pY2VSb29tQmFja2dyb3VuZENoYW5nZWQiLCAoaW1nKSA9PiB7CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJnZXRyb29tQmFja2dyb3VuZCIsIGltZyk7CiAgICB9KTsKCiAgICAvL+iiq+mCgOivt+S4ium6pgogICAgdGhpcy4kUkNMaXZlUm9vbUxpYi5vbigib25SQ1BpY2tlclVzZXJTZWF0Q29udGVudCIsIChpbmZvKSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKCJ1c2VyTGlzdCIsIHRoaXMuJHN0b3JlLnN0YXRlLnVzZXJJbnNlYXQpOwogICAgICBpZiAoaW5mby50YXJnZXRJZCA9PSB0aGlzLiRSQ0xpdmVSb29tTGliLmltLnVzZXJJZCkgewogICAgICAgIGlmICh0aGlzLiRzdG9yZS5zdGF0ZS51c2VySW5zZWF0KSB7CiAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgic2hvd1RvYXN0IiwgewogICAgICAgICAgICB2YWx1ZTogIueUqOaIt+W3sue7j+WcqOm6puS9jeS4iiIsCiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kY29uZmlybSgKICAgICAgICAgICAgYOaCqOiiqyR7CiAgICAgICAgICAgICAgaW5mby5zZW5kVXNlcklkID09CiAgICAgICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUucm9vbUluZm9ybWF0aW9uLmNyZWF0ZVVzZXIudXNlcklkCiAgICAgICAgICAgICAgICA/ICLmiL/kuLsiCiAgICAgICAgICAgICAgICA6ICLnrqHnkIblkZgiCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAg6YKA6K+35LiK6bqm77yM5piv5ZCm5ZCM5oSP77yfYCwKICAgICAgICAgICAgIuaYr+WQpuWQjOaEj+S4ium6piIsCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIuWQjOaEjyIsCiAgICAgICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogIuaLkue7nSIsCiAgICAgICAgICAgICAgY3VzdG9tQ2xhc3M6ICJjdXN0b21DbGFzcy1Db250cm9sIiwKICAgICAgICAgICAgICAvLyBjZW50ZXI6IHRydWUsCiAgICAgICAgICAgICAgc2hvd0Nsb3NlOiBmYWxzZSwKICAgICAgICAgICAgICAvLyB0eXBlOiAid2FybmluZyIsCiAgICAgICAgICAgIH0KICAgICAgICAgICkKICAgICAgICAgICAgLnRoZW4oYXN5bmMgKCkgPT4gewogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBjb25zdCBmaW50U2VhdCA9IGF3YWl0IHRoaXMuJFJDTGl2ZVJvb21MaWIuZmluZFNlYXQoKTsKICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuJFJDTGl2ZVJvb21MaWIuZW50ZXJTZWF0KGZpbnRTZWF0KTsKICAgICAgICAgICAgICAgIHRoaXMuJFJDTGl2ZVJvb21MaWIubm90aWZ5Vm9pY2VSb29tKAogICAgICAgICAgICAgICAgICAiVm9pY2VSb29tQWdyZWVNYW5hZ2VQaWNrIiwKICAgICAgICAgICAgICAgICAgaW5mby5zZW5kVXNlcklkCiAgICAgICAgICAgICAgICApOwoKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoCiAgICAgICAgICAgICAgICAgICgpID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgic2hvd1RvYXN0IiwgewogICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICLkuIrpuqbmiJDlip8iLAogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJnZXRTZWF0SW5mb0xpc3QiKTsKICAgICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICAgIDUwCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgic2hvd1RvYXN0IiwgewogICAgICAgICAgICAgICAgICB2YWx1ZTogIuS4ium6puWksei0pSIsCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy4kUkNMaXZlUm9vbUxpYi5ub3RpZnlWb2ljZVJvb20oCiAgICAgICAgICAgICAgICAiVm9pY2VSb29tUmVqZWN0TWFuYWdlUGljayIsCiAgICAgICAgICAgICAgICBpbmZvLnNlbmRVc2VySWQKICAgICAgICAgICAgICApOwogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0pOwoKICAgIC8v6LSm5Y+36KKr6aG25o6JCiAgICB0aGlzLiRSQ0xpdmVSb29tTGliLm9uKCJDb25uZWN0aW9CcmVha09mZiIsIGFzeW5jICgpID0+IHsKICAgICAgaWYgKHRoaXMuJHJvdXRlLm5hbWUgPT0gInJvb21Ib3VzZSIpIHsKICAgICAgICBhd2FpdCB0aGlzLiRSQ0xpdmVSb29tTGliLmxlYXZlUm9vbSh0aGlzLiRSQ0xpdmVSb29tTGliLl9yb29taWRjbGkpOwogICAgICB9CgogICAgICBpZiAodGhpcy4kcm91dGUubmFtZSAhPSAiaG9tZSIpIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSgiL2hvbWUiKTsKICAgICAgfQoKICAgICAgdGhpcy4kcm91dGVyLmdvKDApOwogICAgfSk7CgogICAgLy/kuIvpuqYKICAgIHRoaXMuJFJDTGl2ZVJvb21MaWIub24oImxlYXZlU2VhdCIsICgpID0+IHsKICAgICAgdGhpcy4kc3RvcmUuc3RhdGUub25NaWMgPSBmYWxzZTsKICAgICAgdGhpcy4kc3RvcmUuc3RhdGUub25MaW5rID0gZmFsc2U7CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJ1cGRhdGV1c2VySW5zZWF0IiwgZmFsc2UpOwogICAgfSk7CgogICAgLy/miL/pl7TooqvlhbPpl60KICAgIHRoaXMuJFJDTGl2ZVJvb21MaWIub24oImNoYXRyb29tRGVzdHJveWVkIiwgKCkgPT4gewogICAgICBjb25zb2xlLmxvZygiY2hhdHJvb21EZXN0cm95ZWQgbWFyayIpOwogICAgICB0aGlzLiRSQ0xpdmVSb29tTGliLmxlYXZlUm9vbSh0aGlzLiRSQ0xpdmVSb29tTGliLl9yb29taWRjbGkpLnRoZW4oKCkgPT4gewogICAgICAgIGlmICgKICAgICAgICAgICF0aGlzLiRzdG9yZS5zdGF0ZS5yb29tSW5mb3JtYXRpb24uY3JlYXRlVXNlciB8fAogICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUucm9vbUluZm9ybWF0aW9uLmNyZWF0ZVVzZXIudXNlcklkID09CiAgICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLnVzZXJJbmZvLnVzZXJJZAogICAgICAgICkgewogICAgICAgICAgY29uc29sZS5sb2coIuaIv+S4u+S4u+WKqOWFs+mXreebtOaSreS4jeW8ueeqlyIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRhbGVydCgi55u05pKt5bey57uT5p2f77yM5oi/6Ze05YWz6ZetIiwgewogICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogIuehruWumiIsCiAgICAgICAgICAgIGNlbnRlcjogdHJ1ZSwKICAgICAgICAgICAgc2hvd0Nsb3NlOiBmYWxzZSwKICAgICAgICAgICAgY3VzdG9tQ2xhc3M6ICJjdXN0b21DbGFzcy1Db250cm9sIiwKICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHsKICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL3Jvb20/cm9vbVR5cGU9bGl2ZVJvb20iKTsKICAgICAgICAgICAgfSwKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9KTsKICB9LAoKICBtZXRob2RzOiB7CiAgICBkcmF3ZXI6IGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9sb2dpbiIpOwogICAgfSwKICAgIGdldFVzZXI6IGZ1bmN0aW9uICh1c2VySWQpIHsKICAgICAgaWYgKHRoaXMuJHN0b3JlLnN0YXRlLnJvb21Vc2VyTGlzdCkgewogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy4kc3RvcmUuc3RhdGUucm9vbVVzZXJMaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBpZiAodGhpcy4kc3RvcmUuc3RhdGUucm9vbVVzZXJMaXN0W2ldLnVzZXJJZCA9PSB1c2VySWQpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnJvb21Vc2VyTGlzdFtpXTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBjb29sOiBmdW5jdGlvbiAoKSB7CiAgICAgIGNvbnNvbGUubG9nKCJjb29saW5nLCIsIHRoaXMuJGRhdGEuY29vbGRvd24pOwogICAgICBpZiAodGhpcy4kZGF0YS5jb29sZG93biA+IDApIHsKICAgICAgICB0aGlzLiRkYXRhLmNvb2xkb3duLS07CiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICB0aGlzLmNvb2woKTsKICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjb29sdGV4dCIpLmlubmVySFRNTCA9CiAgICAgICAgICAgICLmgqjooqvmiL/kuLvpgoDor7fkuIrpuqbvvIzmmK/lkKblkIzmhI/vvJ8iICsgdGhpcy4kZGF0YS5jb29sZG93biArICLnp5IiOwogICAgICAgIH0sIDEwMDApOwogICAgICB9CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n  <div class=\"bg\">\n    <div\n      id=\"app\"\n      class=\"app\"\n      v-bind:style=\"{ height: dh + 'px', width: dw + 'px' }\"\n    >\n      <PromptBox />\n      <router-view></router-view>\n    </div>\n  </div>\n</template><script>\nimport PromptBox from \"./components/PromptBox.vue\";\nimport request from \"./request/index\";\nimport config from \"./config\";\nexport default {\n  name: \"App\",\n  data() {\n    return {\n      changeUserCountKey: true,\n      // eslint-disable-next-line no-undef\n      admin_Img: require(\"./assets/roomicon/Manage.png\"),\n      // eslint-disable-next-line no-undef\n      ower_Img: require(\"./assets/roomicon/administrators.png\"),\n\n      // eslint-disable-next-line no-undef\n      voice_Img: require(\"./assets/live/icon-voice.png\"),\n      cooldown: 0,\n      url: window.location.href,\n      dw: 600,\n      dh: 600,\n    };\n  },\n\n  components: {\n    PromptBox,\n  },\n\n  created() {\n    // window.rc = this.$RCVoiceRoomLib;online\n    this.$RCVoiceRoomLib.init({ AppKey: config.appKey.dev });\n    this.$RCLiveRoomLib.init(config.appKey.dev);\n    // window.rc = this.$RCLiveRoomLib;\n\n    console.log(\"getua\", navigator.userAgent);\n    //Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.110 Safari/537.36\n    // if (\n    //   navigator.userAgent ==\n    //   \"Mozilla/5.0 (iPhone; CPU iPhone OS 13_2_3 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0.3 Mobile/15E148 Safari/604.1\"\n    // ) {\n    //   var customUserAgent = `Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.110 Safari/537.36`;\n    //   //修改后的userAgent\n    //   Object.defineProperty(navigator, \"userAgent\", {\n    //     value: customUserAgent,\n    //     writable: false,\n    //   });\n    //   //打印\n    //   console.log(\"getuamodifiy\", navigator.userAgent);\n    // } else {\n    //   console.log(\"使用默认ua\", navigator.userAgent);\n    // }\n  },\n  // mounted() {\n  //   this.$data.dw = window.innerHeight * 0.5625;\n  //   this.$data.dh = window.innerHeight;\n  //   window.onresize = () => {\n  //     console.log(\"resiz\");\n  //     var browser = {\n  //       versions: (function () {\n  //         var u = navigator.userAgent;\n  //         return {\n  //           //移动终端浏览器版本信息\n  //           trident: u.indexOf(\"Trident\") > -1, //IE内核\n  //           presto: u.indexOf(\"Presto\") > -1, //opera内核\n  //           webKit: u.indexOf(\"AppleWebKit\") > -1, //苹果、谷歌内核\n  //           gecko: u.indexOf(\"Gecko\") > -1 && u.indexOf(\"KHTML\") == -1, //火狐内核\n  //           mobile: !!u.match(/AppleWebKit.*Mobile.*/), //是否为移动终端\n  //           ios: !!u.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端\n  //           android: u.indexOf(\"Android\") > -1 || u.indexOf(\"Linux\") > -1, //android终端或uc浏览器\n  //           iPhone: u.indexOf(\"iPhone\") > -1, //是否为iPhone或者QQHD浏览器\n  //           iPad: u.indexOf(\"iPad\") > -1, //是否iPad\n  //           webApp: u.indexOf(\"Safari\") == -1, //是否web应该程序，没有头部与底部\n  //         };\n  //       })(),\n  //       language: (\n  //         navigator.browserLanguage || navigator.language\n  //       ).toLowerCase(),\n  //     };\n  //     if (browser.versions.mobile) {\n  //       //手机端不给重置页面 防止输入法 弹出某些页面会乱\n  //     } else {\n  //       console.log(\"pcreseize\");\n  //       this.$data.dw = window.innerHeight * 0.5625;\n  //       this.$data.dh = window.innerHeight;\n  //     }\n  //     console.log(browser);\n  //   };\n  // },\n\n  mounted() {\n    this.$data.dw = window.innerHeight * 0.5625;\n    this.$data.dh = window.innerHeight;\n    window.onresize = () => {\n      console.log(\"resiz\");\n      var browser = {\n        versions: (function () {\n          var u = navigator.userAgent;\n          return {\n            //移动终端浏览器版本信息\n            trident: u.indexOf(\"Trident\") > -1, //IE内核\n            presto: u.indexOf(\"Presto\") > -1, //opera内核\n            webKit: u.indexOf(\"AppleWebKit\") > -1, //苹果、谷歌内核\n            gecko: u.indexOf(\"Gecko\") > -1 && u.indexOf(\"KHTML\") == -1, //火狐内核\n            mobile: !!u.match(/AppleWebKit.*Mobile.*/), //是否为移动终端\n            ios: !!u.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端\n            android: u.indexOf(\"Android\") > -1 || u.indexOf(\"Linux\") > -1, //android终端或uc浏览器\n            iPhone: u.indexOf(\"iPhone\") > -1, //是否为iPhone或者QQHD浏览器\n            iPad: u.indexOf(\"iPad\") > -1, //是否iPad\n            webApp: u.indexOf(\"Safari\") == -1, //是否web应该程序，没有头部与底部\n          };\n        })(),\n        language: (\n          navigator.browserLanguage || navigator.language\n        ).toLowerCase(),\n      };\n      if (browser.versions.mobile) {\n        //手机端不给重置页面 防止输入法 弹出某些页面会乱\n      } else {\n        console.log(\"pcreseize\");\n        this.$data.dw = window.innerHeight * 0.5625;\n        this.$data.dh = window.innerHeight;\n      }\n      console.log(browser);\n    };\n    //*****************语聊房监听回调*******************\n    //语聊房被静音/取消静音回调\n    // this.$RCVoiceRoomLib.on(\"SeatMute\", (Mute) => {\n    //   console.log(\"Mute\", Mute);\n    // });\n\n    //语聊房座位发生变化\n    this.$RCVoiceRoomLib.on(\"seatInfoDidUpdate\", () => {\n      this.$store.dispatch(\"getSeatInfoList\");\n    });\n\n    //语聊房房间信息发声变化\n    this.$RCVoiceRoomLib.on(\"roomInfoDidUpdate\", (roomInfo) => {\n      this.$store.dispatch(\"getroomTitle\", roomInfo.roomName);\n    });\n\n    //语聊房被踢出房间\n    this.$RCVoiceRoomLib.on(\"RCKickUserOutRoomContent\", async (parm) => {\n      this.KickUserOut(parm);\n    });\n\n    //语聊房各种公屏消息\n    this.$RCVoiceRoomLib.on(\"MessageReceived\", async (m) => {\n      // let m = message.messages[0];\n      // console.log(\"MessageReceived\", m);\n      //适配阻止多端登陆消息监听\n      if (m.messageType == \"RCMic:loginDeviceMsg\") {\n        if (m.content.platform != \"web\") {\n          this.$store.dispatch(\"showToast\", {\n            value: \"移动端登陆\",\n            time: 2000,\n          });\n\n          if (this.$route.name == \"roomHouse\") {\n            await this.$RCVoiceRoomLib.leaveRoom(\n              this.$RCVoiceRoomLib._roomidcli\n            );\n          }\n\n          if (this.$route.name != \"home\") {\n            this.$router.replace(\"/home\");\n          }\n\n          setTimeout(\n            () => {\n              this.$router.go(0);\n            },\n\n            2000\n          );\n        }\n      }\n\n      //适配数美审核消息监听变更\n      if (m.messageType == \"RCMic:shumeiAuditFreezeMsg\") {\n        if (m.content.status == 1) {\n          this.$store.dispatch(\"showToast\", {\n            value: m.content.message,\n            time: 3000,\n          });\n        }\n\n        if (m.content.status == 2) {\n          if (this.$route.name == \"roomHouse\") {\n            await this.$RCVoiceRoomLib.leaveRoom(\n              this.$RCVoiceRoomLib._roomidcli\n            );\n          }\n\n          if (this.$route.name != \"home\") {\n            this.$router.replace(\"/home\");\n          }\n\n          this.$router.go(0);\n        }\n      }\n\n      if (!this.$store.state.Chatroom) {\n        return;\n      }\n\n      let user = {\n        userId: m.content.userId,\n        userName: m.content.userName,\n        ower: false,\n        admin: false,\n      };\n\n      let targetuser = {};\n\n      if (\n        m.content.userId == this.$store.state.roomInformation.createUser.userId\n      ) {\n        user[\"ower\"] = true;\n      }\n\n      if (\n        m.content.userId in this.$store.state.GiftAndManageList[\"ManageObj\"]\n      ) {\n        user[\"admin\"] = true;\n      }\n\n      if (\"targetName\" in m.content) {\n        targetuser = {\n          targetId: m.content.targetId,\n          targetName: m.content.targetName,\n          admin: false,\n          ower: false,\n        };\n\n        if (\n          targetuser.targetId ==\n          this.$store.state.roomInformation.createUser.userId\n        ) {\n          targetuser[\"ower\"] = true;\n        }\n\n        if (\n          targetuser.targetId in\n          this.$store.state.GiftAndManageList[\"ManageObj\"]\n        ) {\n          targetuser[\"admin\"] = true;\n        }\n      }\n\n      let imgower =\n        \"<span  style='width:20px;height:20px;display:inline-block;margin-bottom:-5px;background-image: url(\" +\n        this.ower_Img +\n        \");  background-position: center;background-repeat: no-repeat;background-size:14px 14px'></span>\";\n      let imgAdmin =\n        \"<span  style='width:20px;height:20px;display:inline-block;margin-bottom:-5px;background-image: url(\" +\n        this.admin_Img +\n        \");  background-position: center;background-repeat: no-repeat;background-size:14px 14px'></span>\";\n      let userImg = user.ower ? imgower : user.admin ? imgAdmin : \"\";\n      let targetImg = targetuser.ower\n        ? imgower\n        : targetuser.admin\n        ? imgAdmin\n        : \"\";\n      console.log(m);\n      if (\"conversationType\" in m && m.conversationType == 1) {\n        return;\n      }\n\n      switch (m.messageType) {\n        case \"RC:Chatroom:Gift\": // eslint-disable-next-line no-case-declarations\n          let giftMsg =\n            userImg +\n            \"<span id='\" +\n            user.userId +\n            \"' style='color:#7f7f7f';>\" +\n            m.content.userName +\n            \"</span> 送给 \" +\n            targetImg +\n            \"<span id='\" +\n            targetuser.targetId +\n            \"'ower='\" +\n            targetuser.ower +\n            \"'admin='\" +\n            targetuser.admin +\n            \"' style='color:#7f7f7f';float: left;>\" +\n            targetuser.targetName +\n            \"</span> \" +\n            m.content.giftName +\n            \" X\" +\n            m.content.number;\n          this.$store.state.Chatroom.push(giftMsg);\n          this.$store.dispatch(\"giftUpdate\");\n          break;\n        case \"RC:Chatroom:Barrage\": // eslint-disable-next-line no-case-declarations\n          let Barrage =\n            userImg +\n            \"<span id='\" +\n            user.userId +\n            \"'style='color:#7f7f7f'>\" +\n            user.userName +\n            \": </span>\" +\n            m.content.content;\n          this.$store.state.Chatroom.push(Barrage);\n          break;\n        case \"RC:Chatroom:Enter\": // eslint-disable-next-line no-case-declarations\n          let Enter =\n            userImg +\n            \"<span id='\" +\n            user.userId +\n            \"' style='color:#7f7f7f'>\" +\n            m.content.userName +\n            \"</span> 进来了\";\n          this.$store.state.Chatroom.push(Enter);\n          break;\n        case \"RC:Chatroom:KickOut\": // eslint-disable-next-line no-case-declarations\n          let KickOut =\n            targetImg +\n            \"<span id='\" +\n            targetuser.targetId +\n            \"' style='color:#7f7f7f'>\" +\n            m.content.targetName +\n            \"</span> 被 \" +\n            userImg +\n            \"<span id='\" +\n            user.userId +\n            \"' style='color:#7f7f7f'>\" +\n            m.content.userName +\n            \"</span> 踢出房间了\";\n          this.$store.state.Chatroom.push(KickOut);\n          // this.KickUserOut(targetuser);\n          break;\n        case \"RC:Chatroom:Admin\": // eslint-disable-next-line no-case-declarations\n          let text = m.content.isAdmin ? \"成为管理员\" : \"被撤回管理员\";\n          // eslint-disable-next-line no-case-declarations\n          let img = m.content.isAdmin ? imgAdmin : \"\";\n          // eslint-disable-next-line no-case-declarations\n          let Admin =\n            img +\n            \"<span id='\" +\n            user.userId +\n            \"' style='color:#7f7f7f'>\" +\n            m.content.userName +\n            \"</span> \" +\n            text;\n          this.$store.state.Chatroom.push(Admin);\n          this.$store.dispatch(\"AdminUpdate\");\n          break;\n        case \"RC:Chatroom:GiftAll\": // eslint-disable-next-line no-case-declarations\n          let giftAllMsg =\n            userImg +\n            \"<span id='\" +\n            user.userId +\n            \"' style='color:#7f7f7f';>\" +\n            m.content.userName +\n            \"</span> 全麦打赏 \" +\n            m.content.giftName +\n            \" X\" +\n            m.content.number;\n          this.$store.state.Chatroom.push(giftAllMsg);\n          this.$store.dispatch(\"giftUpdate\");\n          break;\n        case \"RC:Chatroom:Seats\": // eslint-disable-next-line no-case-declarations\n          let seatCounts =\n            \"<span>房间更换为 \" +\n            m.content.count +\n            \" 座模式，请重新上麦</span>\";\n          this.$store.state.Chatroom.push(seatCounts);\n          this.$store.dispatch(\"getsetCountsChange\", m.content.count + 1);\n          break;\n        case \"RC:TxtMsg\": // eslint-disable-next-line no-case-declarations\n          let TxtMsg =\n            \"<span style='color:rgba(106, 159, 255, 1);'>\" +\n            m.content.content +\n            \"</span>\";\n          this.$store.state.Chatroom.push(TxtMsg);\n          break;\n        case \"RC:Chatroom:Like\": // console.log(this.$RCVoiceRoomLib);\n          break;\n        default:\n          break;\n      }\n    });\n\n    //语聊房房间刷新消息\n    this.$RCVoiceRoomLib.on(\"RoomNotificationReceived\", (item) => {\n      const { name, content } = item;\n      console.log(name, content);\n      switch (name) {\n        case \"VoiceRoomBackgroundChanged\":\n          this.$store.dispatch(\"getroomBackground\", content);\n          break;\n        case \"VoiceRoomAgreeManagePick\":\n          if (content == this.$RCVoiceRoomLib.im.userId) {\n            this.$store.dispatch(\"showToast\", {\n              value: \"用户连线成功\",\n            });\n          }\n          break;\n        case \"VoiceRoomRejectManagePick\":\n          if (content == this.$RCVoiceRoomLib.im.userId) {\n            this.$store.dispatch(\"showToast\", {\n              value: \"用户拒绝邀请\",\n            });\n          }\n          break;\n        case \"EVENT_ADD_SHIELD\":\n          this.$store.dispatch(\"getsensitiveList\", {\n            value: [\n              ...this.$store.state.sensitiveList,\n              { name: content, id: Math.random() },\n            ],\n          });\n          break;\n        case \"EVENT_DELETE_SHIELD\":\n          // eslint-disable-next-line no-case-declarations\n          let array = JSON.parse(\n            JSON.stringify(this.$store.state.sensitiveList)\n          );\n          // eslint-disable-next-line no-case-declarations\n          let index = -1;\n          for (let i = 0; i < array.length; i++) {\n            if (array[i][\"name\"] == content) {\n              index = i;\n            }\n          }\n          if (index > -1) {\n            array.splice(index, 1);\n          }\n          this.$store.dispatch(\"getsensitiveList\", [...array]);\n          break;\n        default:\n          break;\n      }\n    });\n\n    //语聊房房间人数发生变化(有人进来)\n    this.$RCVoiceRoomLib.on(\"AudienceEnter\", (item) => {\n      console.log(\"房间人数发生变化(有人进来)\", item);\n\n      request\n        .roomuser({\n          roomId: this.$RCVoiceRoomLib._roomidcli,\n        })\n        .then((res) => {\n          this.$store.dispatch(\"getRoomUserList\", res.data.data);\n        });\n    });\n\n    //语聊房房间人数发生变化(有人离开)\n    this.$RCVoiceRoomLib.on(\"AudienceExit\", (item) => {\n      console.log(\"房间人数发生变化(有人离开)\", item);\n      request\n        .roomuser({\n          roomId: this.$RCVoiceRoomLib._roomidcli,\n        })\n        .then((res) => {\n          this.$store.dispatch(\"getRoomUserList\", res.data.data);\n        });\n    });\n\n    //语聊房申请上麦人员发生变化\n    this.$RCVoiceRoomLib.on(\"RequestSeatListChanged\", async () => {\n      const arr = await this.$RCVoiceRoomLib.getRequestSeatUserIds();\n      // console.log(\"getRequestSeatUserIds\", arr);\n      this.$store.dispatch(\"getRequestSeatUserIds\", arr);\n      if (arr.indexOf(this.$RCVoiceRoomLib.im.userId) != -1) {\n        this.$store.dispatch(\"userHasApply\", true);\n      } else {\n        this.$store.dispatch(\"userHasApply\", false);\n      }\n    });\n\n    //语聊房申请上麦被同意\n    this.$RCVoiceRoomLib.on(\"RequestSeatAccepted\", async () => {\n      const value = await this.$RCVoiceRoomLib.findSeat();\n\n      try {\n        await this.$RCVoiceRoomLib.enterSeat(value);\n        this.$store.dispatch(\"getSeatInfoList\");\n        this.$store.dispatch(\"showToast\", {\n          value: \"上麦成功\",\n        });\n      } catch (error) {\n        this.$store.dispatch(\"showToast\", {\n          value: \"上麦失败\",\n        });\n        console.log(error);\n      }\n    });\n\n    //语聊房申请上麦被拒绝\n    this.$RCVoiceRoomLib.on(\"RequestSeatRejected\", async () => {\n      this.$store.dispatch(\"showToast\", {\n        value: \"申请上麦被拒绝\",\n      });\n    });\n\n    //语聊房 rtc 断开连接(待机断线问题)\n    this.$RCVoiceRoomLib.on(\"RTCPeerConnectionCloseByException\", async () => {\n      await this.$RCVoiceRoomLib.leaveRoom(this.$RCVoiceRoomLib._roomidcli);\n      this.$router.replace(\"/home\");\n      this.$router.go(0);\n    });\n\n    //语聊房被邀请上麦\n    this.$RCVoiceRoomLib.on(\"RCPickerUserSeatContent\", (info) => {\n      if (info.targetId == this.$RCVoiceRoomLib.im.userId) {\n        if (this.$store.state.userInseat) {\n          this.$store.dispatch(\"showToast\", {\n            value: \"用户已经在麦位上\",\n          });\n        } else {\n          this.$confirm(\n            `您被${\n              info.sendUserId ==\n              this.$store.state.roomInformation.createUser.userId\n                ? \"房主\"\n                : \"管理员\"\n            }\n\n              邀请上麦，是否同意？`,\n            \"是否同意上麦\",\n            {\n              confirmButtonText: \"同意\",\n              cancelButtonText: \"拒绝\",\n              customClass: \"customClass-Control\",\n              // center: true,\n              showClose: false,\n              // type: \"warning\",\n            }\n          )\n            .then(async () => {\n              try {\n                const fintSeat = await this.$RCVoiceRoomLib.findSeat();\n                await this.$RCVoiceRoomLib.enterSeat(fintSeat);\n                this.$RCVoiceRoomLib.notifyVoiceRoom(\n                  \"VoiceRoomAgreeManagePick\",\n                  info.sendUserId\n                );\n\n                setTimeout(\n                  () => {\n                    this.$store.dispatch(\"showToast\", {\n                      value: \"上麦成功\",\n                    });\n                    this.$store.dispatch(\"getSeatInfoList\");\n                  },\n\n                  50\n                );\n              } catch (error) {\n                this.$store.dispatch(\"showToast\", {\n                  value: \"上麦失败\",\n                });\n                console.log(error);\n              }\n            })\n            .catch(() => {\n              this.$RCVoiceRoomLib.notifyVoiceRoom(\n                \"VoiceRoomRejectManagePick\",\n                info.sendUserId\n              );\n            });\n        }\n      }\n    });\n\n    //语聊房账号被顶掉\n    this.$RCVoiceRoomLib.on(\"ConnectioBreakOff\", async () => {\n      if (!this.$store.state.owerDisconnet) {\n        if (this.$route.name == \"roomHouse\") {\n          await this.$RCVoiceRoomLib.leaveRoom(this.$RCVoiceRoomLib._roomidcli);\n        }\n        if (this.$route.name != \"home\") {\n          this.$router.replace(\"/home\");\n        }\n        this.$router.go(0);\n      }\n    });\n\n    //语聊房房间被销毁\n    this.$RCVoiceRoomLib.on(\"ChatroomDestroyed\", async () => {\n      await this.$RCVoiceRoomLib\n        .leaveRoom(this.$RCVoiceRoomLib._roomidcli)\n        .then(() => {\n          this.$store.dispatch(\"getSeatInfoList\");\n\n          this.$alert(\"当前直播已结束\", {\n            confirmButtonText: \"确定\",\n            center: true,\n            showClose: false,\n            customClass: \"customClass-Control\",\n            callback: () => {\n              this.$router.go(-1);\n            },\n          });\n        });\n    });\n\n    //语聊房被抱下麦\n    this.$RCVoiceRoomLib.on(\"KickSeatReceived\", () => {\n      this.$store.dispatch(\"showToast\", {\n        value: \"您已被抱下麦\",\n      });\n    });\n\n    // ****************直播部分监听****************\n    // this.$RCVoiceRoomLib.on(\"SeatMute\", (Mute) => {\n    //   console.log(\"Mute\", Mute);\n    // });\n\n    //座位发生变化\n    this.$RCLiveRoomLib.on(\"seatInfoDidUpdate\", () => {\n      this.$store.dispatch(\"getSeatInfoList\");\n    });\n\n    //房间信息发声变化\n    this.$RCLiveRoomLib.on(\"roomInfoDidUpdate\", (roomInfo) => {\n      this.$store.dispatch(\"getroomTitle\", roomInfo.roomName);\n    });\n\n    //被踢出房间\n    this.$RCLiveRoomLib.on(\"RCKickUserOutRoomContent\", async (parm) => {\n      if (parm.targetId == this.$RCLiveRoomLib.im.userId) {\n        await this.$RCLiveRoomLib\n          .leaveRoom(this.$RCLiveRoomLib._roomidcli)\n          .then(() => {\n            this.$store.dispatch(\"getSeatInfoList\");\n            this.$router.go(-1);\n            this.$store.dispatch(\"showToast\", {\n              value: \"您已被踢出房间\",\n            });\n          });\n      }\n    });\n\n    //直播间邀请上麦\n    this.$RCLiveRoomLib.on(\"onInvitation\", (o) => {\n      //o.id 受邀请人id   o.seatIndex 受邀请麦位\n      console.log(\"oninvatiaion\", o);\n      //暂时不判断管理员还是房主\n      if (o.id) {\n        if (this.$store.state.onMic) {\n          this.$store.dispatch(\"showToast\", {\n            value: \"用户已经在麦位上\",\n          });\n        } else {\n          this.$data.cooldown = 10;\n          this.cool();\n          const h = this.$createElement;\n          this.$confirm(`您被房主邀请上麦，是否同意？`, \"是否同意上麦\", {\n            message: h(\n              \"div\",\n              {\n                attrs: {\n                  id: \"cooltext\",\n                },\n              },\n              \"您被房主邀请上麦，是否同意？ 9秒\"\n            ),\n            confirmButtonText: \"同意\",\n            cancelButtonText: \"拒绝\",\n            customClass: \"customClass-Control\",\n            // center: true,\n            showClose: false,\n            dangerouslyUseHTMLString: true,\n            // type: \"warning\",\n          })\n            .then(async () => {\n              console.log(\"被邀请上麦\", this.$RCLiveRoomLib);\n              this.$RCLiveRoomLib.acceptInvitation();\n              this.$store.state.onMic = true;\n              this.$store.state.onLink = true;\n              console.log(123123);\n              console.log(\"123123\", o.seatIndex);\n              await this.$RCLiveRoomLib.enterSeat(o.seatIndex);\n              this.$RCLiveRoomLib.im.messageUpdate(\"RC:VRLRefreshMsg\", {\n                name: \"VoiceRoomRejectManagePick\",\n                content: {\n                  content: o.id,\n                  name: \"VoiceRoomAgreeManagePick\",\n                  totalMemberCount: 0,\n                },\n              });\n              setTimeout(() => {\n                this.$store.dispatch(\"showToast\", {\n                  value: \"上麦成功\",\n                });\n                this.$store.dispatch(\"getSeatInfoList\");\n              }, 50);\n            })\n            .catch(() => {\n              if (this.$RCLiveRoomLib.rtc.roomType == \"live\") {\n                console.log(\"终端\");\n                console.log(\"发送房id\", o.id);\n                this.$RCLiveRoomLib.rejectInvitation(o.id);\n                this.$data.cooldown = 0;\n              } else {\n                this.$RCLiveRoomLib.im.messageUpdate(\"\", {\n                  name: \"\",\n                  content: {\n                    content: o.id,\n                    name: \"\",\n                    totalMemberCount: 0,\n                  },\n                });\n              }\n            });\n          setTimeout(() => {\n            document\n              .getElementsByClassName(\"el-message-box__wrapper\")[0]\n              .click();\n          }, 10000);\n        }\n      }\n    });\n    this.$RCLiveRoomLib.on(\"onInvitationCancel\", () => {\n      this.$store.dispatch(\"showToast\", {\n        value: \"上麦邀请被取消\",\n      });\n    });\n    this.$RCLiveRoomLib.on(\"userEnter\", (userId) => {\n      setTimeout(() => {\n        console.log(\"jinru\", userId, this.getUser(userId));\n        // eslint-disable-next-line no-case-declarations\n        let Enter =\n          \"<span id='\" +\n          this.getUser(userId).userId +\n          \"' style='color:#7f7f7f'>\" +\n          this.getUser(userId).userName +\n          \"</span> 进来了\";\n        this.$store.state.Chatroom.push(Enter);\n      }, 1000);\n    });\n\n    this.$RCLiveRoomLib.on(\"invitationRejected\", (userId) => {\n      for (var i = 0; i < this.$store.state.roomUserList.length; i++) {\n        if (this.$store.state.roomUserList[i].userId == userId) {\n          this.$store.dispatch(\"showToast\", {\n            value: this.$store.state.roomUserList[i].userName + \"拒绝上麦\",\n          });\n        }\n      }\n    });\n\n    //默认的kv更新\n    this.$RCLiveRoomLib.on(\"keyValueDidUpdate\", (o) => {\n      console.log(\"kv更新\", o);\n      if (o.key == \"ROOM_INFO_PRE_FreeEnterSeat\") {\n        console.log(\"当前值\", o.value, \"1\", String(o.value) == \"1\");\n        if (String(o.value) == \"1\") {\n          this.$store.state.isFreeEnterSeat = true;\n        } else {\n          this.$store.state.isFreeEnterSeat = false;\n        }\n      }\n      if (o.key == \"LIVE_VIDEO_SEAT_INFO_PRE_1\") {\n        //直播专用 有人上1号麦位\n        console.log(\"上1号麦\", o.value);\n        if (!JSON.parse(o.value).userId || JSON.parse(o.value).userId == \"\") {\n          this.$store.state.onLink = false;\n        } else {\n          this.$store.state.onLink = true;\n        }\n      }\n    });\n    this.$RCLiveRoomLib.on(\"ondevicechange\", () => {\n      console.log(\"设备更新了\");\n      this.$store.dispatch(\"showToast\", {\n        value: \"检测到视频设备更新请刷新页面\",\n        time: 5000,\n      });\n    });\n\n    //各种公屏消息\n    this.$RCLiveRoomLib.on(\"onMessageReceived\", async (m) => {\n      // let m = message.messages[0];\n      // console.log(\"MessageReceived\", m);\n      //适配阻止多端登陆消息监听\n      if (m.messageType == \"RCMic:loginDeviceMsg\") {\n        if (m.content.platform != \"web\") {\n          this.$store.dispatch(\"showToast\", {\n            value: \"移动端登陆\",\n            time: 2000,\n          });\n\n          if (this.$route.name == \"roomHouse\") {\n            await this.$RCLiveRoomLib.leaveRoom(this.$RCLiveRoomLib._roomidcli);\n          }\n\n          if (this.$route.name != \"home\") {\n            this.$router.replace(\"/home\");\n          }\n\n          setTimeout(\n            () => {\n              this.$router.go(0);\n            },\n\n            2000\n          );\n        }\n      }\n\n      //适配数美审核消息监听变更\n      if (m.messageType == \"RCMic:shumeiAuditFreezeMsg\") {\n        if (m.content.status == 1) {\n          this.$store.dispatch(\"showToast\", {\n            value: m.content.message,\n            time: 3000,\n          });\n        }\n\n        if (m.content.status == 2) {\n          if (this.$route.name == \"roomHouse\") {\n            await this.$RCLiveRoomLib.leaveRoom(this.$RCLiveRoomLib._roomidcli);\n          }\n\n          if (this.$route.name != \"home\") {\n            this.$router.replace(\"/home\");\n          }\n\n          this.$router.go(0);\n        }\n      }\n\n      if (!this.$store.state.Chatroom) {\n        return;\n      }\n\n      let user = {\n        userId: m.content.userId,\n        userName: m.content.userName,\n        ower: false,\n        admin: false,\n      };\n\n      let targetuser = {};\n\n      if (\n        m.content.userId == this.$store.state.roomInformation.createUser.userId\n      ) {\n        user[\"ower\"] = true;\n      }\n\n      if (\n        m.content.userId in this.$store.state.GiftAndManageList[\"ManageObj\"]\n      ) {\n        user[\"admin\"] = true;\n      }\n\n      if (\"targetName\" in m.content) {\n        targetuser = {\n          targetId: m.content.targetId,\n          targetName: m.content.targetName,\n          admin: false,\n          ower: false,\n        };\n\n        if (\n          targetuser.targetId ==\n          this.$store.state.roomInformation.createUser.userId\n        ) {\n          targetuser[\"ower\"] = true;\n        }\n\n        if (\n          targetuser.targetId in\n          this.$store.state.GiftAndManageList[\"ManageObj\"]\n        ) {\n          targetuser[\"admin\"] = true;\n        }\n      }\n\n      let imgower =\n        \"<span  style='width:20px;height:20px;display:inline-block;margin-bottom:-5px;background-image: url(\" +\n        this.ower_Img +\n        \");  background-position: center;background-repeat: no-repeat;background-size:14px 14px'></span>\";\n      let imgAdmin =\n        \"<span  style='width:20px;height:20px;display:inline-block;margin-bottom:-5px;background-image: url(\" +\n        this.admin_Img +\n        \");  background-position: center;background-repeat: no-repeat;background-size:14px 14px'></span>\";\n      let userImg = user.ower ? imgower : user.admin ? imgAdmin : \"\";\n      let targetImg = targetuser.ower\n        ? imgower\n        : targetuser.admin\n        ? imgAdmin\n        : \"\";\n      console.log(userImg);\n      console.log(m);\n      if (\"conversationType\" in m && m.conversationType == 1) {\n        return;\n      }\n\n      switch (m.messageType) {\n        case \"RC:TxtMsg\": //收到文本消息打到公屏\n          console.log(\"收到TxtMsg打到公屏\", m);\n          // eslint-disable-next-line no-case-declarations\n          let txtMsg;\n          if (!m.content.name) {\n            txtMsg =\n              \"<span style='color:rgba(106, 159, 255, 1);'>\" +\n              m.content.content +\n              \"</span>\";\n            console.log(\"noname\");\n          } else {\n            txtMsg =\n              \"<span style='color:#7f7f7f'>\" +\n              m.content.name +\n              \" </span>\" +\n              m.content.content;\n          }\n\n          this.$store.state.Chatroom.push(txtMsg);\n          break;\n        case \"RC:Chatroom:Gift\":\n          // eslint-disable-next-line no-case-declarations\n          let giftMsg =\n            userImg +\n            \"<span id='\" +\n            user.userId +\n            \"' style='color:#7f7f7f';>\" +\n            m.content.userName +\n            \"</span> 送给 \" +\n            targetImg +\n            \"<span id='\" +\n            targetuser.targetId +\n            \"'ower='\" +\n            targetuser.ower +\n            \"'admin='\" +\n            targetuser.admin +\n            \"' style='color:#7f7f7f';float: left;>\" +\n            targetuser.targetName +\n            \"</span> \" +\n            m.content.giftName +\n            \" X\" +\n            m.content.number;\n          this.$store.state.Chatroom.push(giftMsg);\n          this.$store.state.Chatroom.gift();\n          this.$store.dispatch(\"giftUpdate\");\n          break;\n        case \"RC:Chatroom:Barrage\": // eslint-disable-next-line no-case-declarations\n          let Barrage =\n            userImg +\n            \"<span id='\" +\n            user.userId +\n            \"'style='color:#7f7f7f'>\" +\n            user.userName +\n            \": </span>\" +\n            m.content.content;\n          this.$store.state.Chatroom.push(Barrage);\n          break;\n        case \"RC:Chatroom:Enter\": // eslint-disable-next-line no-case-declarations\n          let Enter =\n            userImg +\n            \"<span id='\" +\n            user.userId +\n            \"' style='color:#7f7f7f'>\" +\n            m.content.userName +\n            \"</span> 进来了\";\n          this.$store.state.Chatroom.push(Enter);\n          break;\n        case \"RC:Chatroom:KickOut\": // eslint-disable-next-line no-case-declarations\n          let KickOut =\n            targetImg +\n            \"<span id='\" +\n            targetuser.targetId +\n            \"' style='color:#7f7f7f'>\" +\n            m.content.targetName +\n            \"</span> 被 \" +\n            userImg +\n            \"<span id='\" +\n            user.userId +\n            \"' style='color:#7f7f7f'>\" +\n            m.content.userName +\n            \"</span> 踢出房间了\";\n          this.$store.state.Chatroom.push(KickOut);\n          break;\n        case \"RC:Chatroom:Admin\": // eslint-disable-next-line no-case-declarations\n          let text = m.content.isAdmin ? \"成为管理员\" : \"被撤回管理员\";\n          // eslint-disable-next-line no-case-declarations\n          let img = m.content.isAdmin ? imgAdmin : \"\";\n          // eslint-disable-next-line no-case-declarations\n          let Admin =\n            img +\n            \"<span id='\" +\n            user.userId +\n            \"' style='color:#7f7f7f'>\" +\n            m.content.userName +\n            \"</span> \" +\n            text;\n          this.$store.state.Chatroom.push(Admin);\n          this.$store.dispatch(\"AdminUpdate\");\n          break;\n        case \"RC:Chatroom:GiftAll\": // eslint-disable-next-line no-case-declarations\n          let giftAllMsg =\n            userImg +\n            \"<span id='\" +\n            user.userId +\n            \"' style='color:#7f7f7f';>\" +\n            m.content.userName +\n            \"</span> 全麦打赏 \" +\n            m.content.giftName +\n            \" X\" +\n            m.content.number;\n          this.$store.state.Chatroom.push(giftAllMsg);\n          this.$store.state.Chatroom.gift();\n          this.$store.dispatch(\"giftUpdate\");\n          break;\n        case \"RC:Chatroom:Seats\": // eslint-disable-next-line no-case-declarations\n          let seatCounts =\n            \"<span>房间更换为 \" +\n            m.content.count +\n            \" 座模式，请重新上麦</span>\";\n          this.$store.state.Chatroom.push(seatCounts);\n          this.$store.dispatch(\"getsetCountsChange\", m.content.count + 1);\n          break;\n        // case \"RC:TxtMsg\": // eslint-disable-next-line no-case-declarations\n        //   let TxtMsg =\n        //     \"<span style='color:rgba(106, 159, 255, 1);'>\" +\n        //     m.content.content +\n        //     \"</span>\";\n        //   this.$store.state.Chatroom.push(TxtMsg);\n        //   break;\n        case \"RC:Chatroom:Like\": // console.log(this.$RCLiveRoomLib);\n          break;\n        case \"RC:CmdMsg\":\n          console.log(\"收到命令消息\", m);\n          break;\n        case \"RC:VRVoiceMsg\":\n          console.log(m);\n\n          // eslint-disable-next-line no-case-declarations\n          let voiceMsg;\n          voiceMsg =\n            \"<span style='color:#7f7f7f' >\" +\n            m.content._userName +\n            \" </span>\" +\n            `<span height: 22px;background: none;border-radius: 4px; border: 1px solid; color: #666; onclick=\"new Audio('` +\n            m.content._path +\n            `').play();\">` +\n            m.content._duration +\n            \"' \" +\n            \"<span  style='width:20px;height:20px;display:inline-block;margin-bottom:-5px;background-image: url(\" +\n            this.voice_Img +\n            \");  background-position: center;background-repeat: no-repeat;background-size:14px 14px'></span>\" +\n            \"</span>\";\n\n          this.$store.state.Chatroom.push(voiceMsg);\n          break;\n        default:\n          break;\n      }\n    });\n\n    //房间人数发生变化\n    this.$RCLiveRoomLib.on(\"changeUserCount\", () => {\n      console.log(\"userchenge\");\n      request\n        .roomuser({\n          roomId: this.$RCLiveRoomLib._roomidcli,\n        })\n        .then((res) => {\n          this.$store.dispatch(\"getRoomUserList\", res.data.data);\n        });\n    });\n\n    //房间人数发生变化(有人进来)\n    this.$RCLiveRoomLib.on(\"AudienceEnter\", (item) => {\n      console.log(\"房间人数发生变化(有人进来)\", item);\n\n      request\n        .roomuser({\n          roomId: this.$RCLiveRoomLib._roomidcli,\n        })\n        .then((res) => {\n          this.$store.dispatch(\"getRoomUserList\", res.data.data);\n        });\n    });\n\n    //房间人数发生变化(有人离开)\n    this.$RCLiveRoomLib.on(\"AudienceExit\", (item) => {\n      console.log(\"房间人数发生变化(有人离开)\", item);\n\n      request\n        .roomuser({\n          roomId: this.$RCLiveRoomLib._roomidcli,\n        })\n        .then((res) => {\n          this.$store.dispatch(\"getRoomUserList\", res.data.data);\n        });\n    });\n\n    //申请上麦人员发生变化\n    this.$RCLiveRoomLib.on(\"RequestSeatListChanged\", async () => {\n      console.log(\"申请上麦人员发生变化 \");\n      const arr = await this.$RCLiveRoomLib.getRequestSeatUserIds();\n      // console.log(\"getRequestSeatUserIds\", arr);\n      this.$store.dispatch(\"getRequestSeatUserIds\", arr);\n      if (arr.indexOf(this.$RCLiveRoomLib.im.userId) != -1) {\n        this.$store.dispatch(\"userHasApply\", true);\n      } else {\n        this.$store.dispatch(\"userHasApply\", false);\n      }\n      this.$store.state.onMic = false;\n      for (var i = 0; i < this.$RCLiveRoomLib.seatInfoList.length; i++) {\n        if (\n          this.$RCLiveRoomLib.im.userId ==\n            this.$RCLiveRoomLib.seatInfoList[i].userId &&\n          !this.$store.state.creatUser\n        ) {\n          //非主播且在麦位上时\n          this.$store.state.onMic = true;\n          this.$store.state.onLink = true;\n        }\n      }\n    });\n\n    //申请上麦被同意\n    this.$RCLiveRoomLib.on(\"RequestSeatAccepted\", async () => {\n      console.log(\"RequestSeatAccepted\");\n      // if(){\n\n      // }\n      await this.$RCLiveRoomLib.enterSeat(this.$RCLiveRoomLib.findSeat());\n      console.log(\"onMic\");\n      this.$store.state.onMic = true;\n      this.$store.state.onLink = true;\n    });\n\n    //申请上麦被拒绝\n    this.$RCLiveRoomLib.on(\"RequestSeatRejected\", async () => {\n      this.$store.dispatch(\"showToast\", {\n        value: \"申请上麦被拒绝\",\n      });\n    });\n\n    //说话监听\n    this.$RCLiveRoomLib.on(\"speakingStatusChenge\", (info) => {\n      // if (Number(info.speaking)) {\n      this.$store.dispatch(\"getSpeakingChenge\", {\n        index: Number(info.index),\n        speaking: Number(info.speaking),\n      });\n      // }\n    });\n\n    //关闭房间\n    this.$RCLiveRoomLib.on(\"onVoiceRoomClosed\", async () => {\n      await this.$RCLiveRoomLib\n        .leaveRoom(this.$RCLiveRoomLib._roomidcli)\n        .then(() => {\n          this.$store.dispatch(\"getSeatInfoList\");\n          this.$alert(\"直播已结束，房间关闭\", {\n            confirmButtonText: \"确定\",\n            center: true,\n            showClose: false,\n            customClass: \"customClass-Control\",\n            callback: () => {\n              this.$router.go(-1);\n            },\n          });\n        });\n    });\n\n    //更换背景\n    this.$RCLiveRoomLib.on(\"onVoiceRoomBackgroundChanged\", (img) => {\n      this.$store.dispatch(\"getroomBackground\", img);\n    });\n\n    //被邀请上麦\n    this.$RCLiveRoomLib.on(\"onRCPickerUserSeatContent\", (info) => {\n      console.log(\"userList\", this.$store.state.userInseat);\n      if (info.targetId == this.$RCLiveRoomLib.im.userId) {\n        if (this.$store.state.userInseat) {\n          this.$store.dispatch(\"showToast\", {\n            value: \"用户已经在麦位上\",\n          });\n        } else {\n          this.$confirm(\n            `您被${\n              info.sendUserId ==\n              this.$store.state.roomInformation.createUser.userId\n                ? \"房主\"\n                : \"管理员\"\n            }\n\n              邀请上麦，是否同意？`,\n            \"是否同意上麦\",\n            {\n              confirmButtonText: \"同意\",\n              cancelButtonText: \"拒绝\",\n              customClass: \"customClass-Control\",\n              // center: true,\n              showClose: false,\n              // type: \"warning\",\n            }\n          )\n            .then(async () => {\n              try {\n                const fintSeat = await this.$RCLiveRoomLib.findSeat();\n                await this.$RCLiveRoomLib.enterSeat(fintSeat);\n                this.$RCLiveRoomLib.notifyVoiceRoom(\n                  \"VoiceRoomAgreeManagePick\",\n                  info.sendUserId\n                );\n\n                setTimeout(\n                  () => {\n                    this.$store.dispatch(\"showToast\", {\n                      value: \"上麦成功\",\n                    });\n                    this.$store.dispatch(\"getSeatInfoList\");\n                  },\n\n                  50\n                );\n              } catch (error) {\n                this.$store.dispatch(\"showToast\", {\n                  value: \"上麦失败\",\n                });\n                console.log(error);\n              }\n            })\n            .catch(() => {\n              this.$RCLiveRoomLib.notifyVoiceRoom(\n                \"VoiceRoomRejectManagePick\",\n                info.sendUserId\n              );\n            });\n        }\n      }\n    });\n\n    //账号被顶掉\n    this.$RCLiveRoomLib.on(\"ConnectioBreakOff\", async () => {\n      if (this.$route.name == \"roomHouse\") {\n        await this.$RCLiveRoomLib.leaveRoom(this.$RCLiveRoomLib._roomidcli);\n      }\n\n      if (this.$route.name != \"home\") {\n        this.$router.replace(\"/home\");\n      }\n\n      this.$router.go(0);\n    });\n\n    //下麦\n    this.$RCLiveRoomLib.on(\"leaveSeat\", () => {\n      this.$store.state.onMic = false;\n      this.$store.state.onLink = false;\n      this.$store.dispatch(\"updateuserInseat\", false);\n    });\n\n    //房间被关闭\n    this.$RCLiveRoomLib.on(\"chatroomDestroyed\", () => {\n      console.log(\"chatroomDestroyed mark\");\n      this.$RCLiveRoomLib.leaveRoom(this.$RCLiveRoomLib._roomidcli).then(() => {\n        if (\n          !this.$store.state.roomInformation.createUser ||\n          this.$store.state.roomInformation.createUser.userId ==\n            this.$store.state.userInfo.userId\n        ) {\n          console.log(\"房主主动关闭直播不弹窗\");\n        } else {\n          this.$alert(\"直播已结束，房间关闭\", {\n            confirmButtonText: \"确定\",\n            center: true,\n            showClose: false,\n            customClass: \"customClass-Control\",\n            callback: () => {\n              this.$router.push(\"/room?roomType=liveRoom\");\n            },\n          });\n        }\n      });\n    });\n  },\n\n  methods: {\n    drawer: function () {\n      this.$router.push(\"/login\");\n    },\n    getUser: function (userId) {\n      if (this.$store.state.roomUserList) {\n        for (var i = 0; i < this.$store.state.roomUserList.length; i++) {\n          if (this.$store.state.roomUserList[i].userId == userId) {\n            return this.$store.state.roomUserList[i];\n          }\n        }\n      }\n    },\n    cool: function () {\n      console.log(\"cooling,\", this.$data.cooldown);\n      if (this.$data.cooldown > 0) {\n        this.$data.cooldown--;\n        setTimeout(() => {\n          this.cool();\n          document.getElementById(\"cooltext\").innerHTML =\n            \"您被房主邀请上麦，是否同意？\" + this.$data.cooldown + \"秒\";\n        }, 1000);\n      }\n    },\n  },\n};\n</script><style>\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  color: #2c3e50;\n  height: 100%;\n  max-width: 375px;\n  overflow: hidden;\n  margin: auto;\n  background: #fff;\n  font-size: 16px;\n  min-width: none;\n  min-height: 625px;\n}\n\n.customClass-Control {\n  width: 3rem !important;\n}\n.bg {\n  background: url(\"./assets/webBg.png\");\n  height: 100vh;\n}\n\n.el-tabs__content::-webkit-scrollbar {\n  width: 0 !important;\n}\n\n.el-drawer__wrapper {\n  /* position: absolute !important; */\n  max-width: 375px !important;\n  left: calc(50vw - 187.5px) !important;\n}\n\n.el-dialog__wrapper {\n  /* position: absolute !important; */\n  max-width: 375px !important;\n  left: calc(50vw - 187.5px) !important;\n}\n\n.v-modal {\n  width: 375px !important;\n  left: calc(50vw - 187.5px) !important;\n}\n</style>\n"]}]}