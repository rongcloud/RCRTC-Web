!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@rongcloud/engine")):"function"==typeof define&&define.amd?define(["exports","@rongcloud/engine"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).RongIMLib={},e.RCEngine)}(this,(function(e,t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t,n,r,o,a,s){try{var i=e[a](s),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,o)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var s=e.apply(t,n);function i(e){a(s,r,o,i,u,"next",e)}function u(e){a(s,r,o,i,u,"throw",e)}i(void 0)}))}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){i=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(i)throw a}}}}var y="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function C(e){var t={exports:{}};return e(t,t.exports),t.exports}C((function(e){var t=function(e){var t,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",i=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var o=t&&t.prototype instanceof m?t:m,a=Object.create(o.prototype),s=new A(r||[]);return a._invoke=function(e,t,n){var r=f;return function(o,a){if(r===p)throw new Error("Generator is already running");if(r===g){if("throw"===o)throw a;return N()}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var i=b(s,n);if(i){if(i===h)continue;return i}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var u=l(e,t,n);if("normal"===u.type){if(r=n.done?g:d,u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=g,n.method="throw",n.arg=u.arg)}}}(e,n,s),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var f="suspendedStart",d="suspendedYield",p="executing",g="completed",h={};function m(){}function v(){}function y(){}var C={};u(C,a,(function(){return this}));var R=Object.getPrototypeOf,S=R&&R(R(O([])));S&&S!==n&&r.call(S,a)&&(C=S);var E=y.prototype=m.prototype=Object.create(C);function I(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(o,a,s,i){var u=l(e[o],e,a);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,s,i)}),(function(e){n("throw",e,s,i)})):t.resolve(f).then((function(e){c.value=e,s(c)}),(function(e){return n("throw",e,s,i)}))}i(u.arg)}var o;this._invoke=function(e,r){function a(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(a,a):a()}}function b(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,b(e,n),"throw"===n.method))return h;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var o=l(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,h;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,h):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(e){if(e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,s=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return s.next=s}}return{next:N}}function N(){return{value:t,done:!0}}return v.prototype=y,u(E,"constructor",y),u(y,"constructor",v),v.displayName=u(y,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,i,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},I(T.prototype),u(T.prototype,s,(function(){return this})),e.AsyncIterator=T,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var s=new T(c(t,n,r,o),a);return e.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},I(E),u(E,i,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=O,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(w),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return i.type="throw",i.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var s=this.tryEntries[a],i=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var u=r.call(s,"catchLoc"),c=r.call(s,"finallyLoc");if(u&&c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=e,s.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;w(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:O(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),h}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}));var R,S,E=function(e){return e&&e.Math==Math&&e},I=E("object"==typeof globalThis&&globalThis)||E("object"==typeof window&&window)||E("object"==typeof self&&self)||E("object"==typeof y&&y)||function(){return this}()||Function("return this")(),T=Object.defineProperty,b=function(e,t){try{T(I,e,{value:t,configurable:!0,writable:!0})}catch(n){I[e]=t}return t},x="__core-js_shared__",w=I[x]||b(x,{}),A=C((function(e){(e.exports=function(e,t){return w[e]||(w[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.21.1",mode:"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.1/LICENSE",source:"https://github.com/zloirock/core-js"})})),O=function(e){try{return!!e()}catch(e){return!0}},N=!O((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),U=Function.prototype,M=U.bind,k=U.call,_=N&&M.bind(k,k),P=N?function(e){return e&&_(e)}:function(e){return e&&function(){return k.apply(e,arguments)}},L=I.TypeError,G=function(e){if(null==e)throw L("Can't call method on "+e);return e},D=I.Object,j=function(e){return D(G(e))},H=P({}.hasOwnProperty),F=Object.hasOwn||function(e,t){return H(j(e),t)},B=0,q=Math.random(),V=P(1..toString),z=function(e){return"Symbol("+(void 0===e?"":e)+")_"+V(++B+q,36)},K=function(e){return"function"==typeof e},W=function(e){return K(e)?e:void 0},X=function(e,t){return arguments.length<2?W(I[e]):I[e]&&I[e][t]},Y=X("navigator","userAgent")||"",J=I.process,$=I.Deno,Q=J&&J.versions||$&&$.version,Z=Q&&Q.v8;Z&&(S=(R=Z.split("."))[0]>0&&R[0]<4?1:+(R[0]+R[1])),!S&&Y&&(!(R=Y.match(/Edge\/(\d+)/))||R[1]>=74)&&(R=Y.match(/Chrome\/(\d+)/))&&(S=+R[1]);var ee=S,te=!!Object.getOwnPropertySymbols&&!O((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&ee&&ee<41})),ne=te&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,re=A("wks"),oe=I.Symbol,ae=oe&&oe.for,se=ne?oe:oe&&oe.withoutSetter||z,ie=function(e){if(!F(re,e)||!te&&"string"!=typeof re[e]){var t="Symbol."+e;te&&F(oe,e)?re[e]=oe[e]:re[e]=ne&&ae?ae(t):se(t)}return re[e]},ue={};ue[ie("toStringTag")]="z";var ce="[object z]"===String(ue),le=!O((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),fe=function(e){return"object"==typeof e?null!==e:K(e)},de=I.document,pe=fe(de)&&fe(de.createElement),ge=function(e){return pe?de.createElement(e):{}},he=!le&&!O((function(){return 7!=Object.defineProperty(ge("div"),"a",{get:function(){return 7}}).a})),me=le&&O((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),ve=I.String,ye=I.TypeError,Ce=function(e){if(fe(e))return e;throw ye(ve(e)+" is not an object")},Re=Function.prototype.call,Se=N?Re.bind(Re):function(){return Re.apply(Re,arguments)},Ee=P({}.isPrototypeOf),Ie=I.Object,Te=ne?function(e){return"symbol"==typeof e}:function(e){var t=X("Symbol");return K(t)&&Ee(t.prototype,Ie(e))},be=I.String,xe=function(e){try{return be(e)}catch(e){return"Object"}},we=I.TypeError,Ae=function(e){if(K(e))return e;throw we(xe(e)+" is not a function")},Oe=function(e,t){var n=e[t];return null==n?void 0:Ae(n)},Ne=I.TypeError,Ue=I.TypeError,Me=ie("toPrimitive"),ke=function(e,t){if(!fe(e)||Te(e))return e;var n,r=Oe(e,Me);if(r){if(void 0===t&&(t="default"),n=Se(r,e,t),!fe(n)||Te(n))return n;throw Ue("Can't convert object to primitive value")}return void 0===t&&(t="number"),function(e,t){var n,r;if("string"===t&&K(n=e.toString)&&!fe(r=Se(n,e)))return r;if(K(n=e.valueOf)&&!fe(r=Se(n,e)))return r;if("string"!==t&&K(n=e.toString)&&!fe(r=Se(n,e)))return r;throw Ne("Can't convert object to primitive value")}(e,t)},_e=function(e){var t=ke(e,"string");return Te(t)?t:t+""},Pe=I.TypeError,Le=Object.defineProperty,Ge=Object.getOwnPropertyDescriptor,De="enumerable",je="configurable",He="writable",Fe={f:le?me?function(e,t,n){if(Ce(e),t=_e(t),Ce(n),"function"==typeof e&&"prototype"===t&&"value"in n&&He in n&&!n.writable){var r=Ge(e,t);r&&r.writable&&(e[t]=n.value,n={configurable:je in n?n.configurable:r.configurable,enumerable:De in n?n.enumerable:r.enumerable,writable:!1})}return Le(e,t,n)}:Le:function(e,t,n){if(Ce(e),t=_e(t),Ce(n),he)try{return Le(e,t,n)}catch(e){}if("get"in n||"set"in n)throw Pe("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},Be=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},qe=le?function(e,t,n){return Fe.f(e,t,Be(1,n))}:function(e,t,n){return e[t]=n,e},Ve=P(Function.toString);K(w.inspectSource)||(w.inspectSource=function(e){return Ve(e)});var ze,Ke,We,Xe=w.inspectSource,Ye=I.WeakMap,Je=K(Ye)&&/native code/.test(Xe(Ye)),$e=A("keys"),Qe=function(e){return $e[e]||($e[e]=z(e))},Ze={},et="Object already initialized",nt=I.TypeError,rt=I.WeakMap;if(Je||w.state){var ot=w.state||(w.state=new rt),at=P(ot.get),st=P(ot.has),it=P(ot.set);ze=function(e,t){if(st(ot,e))throw new nt(et);return t.facade=e,it(ot,e,t),t},Ke=function(e){return at(ot,e)||{}},We=function(e){return st(ot,e)}}else{var ut=Qe("state");Ze[ut]=!0,ze=function(e,t){if(F(e,ut))throw new nt(et);return t.facade=e,qe(e,ut,t),t},Ke=function(e){return F(e,ut)?e[ut]:{}},We=function(e){return F(e,ut)}}var ct={set:ze,get:Ke,has:We,enforce:function(e){return We(e)?Ke(e):ze(e,{})},getterFor:function(e){return function(t){var n;if(!fe(t)||(n=Ke(t)).type!==e)throw nt("Incompatible receiver, "+e+" required");return n}}},lt=Function.prototype,ft=le&&Object.getOwnPropertyDescriptor,dt=F(lt,"name"),pt={EXISTS:dt,PROPER:dt&&"something"===function(){}.name,CONFIGURABLE:dt&&(!le||le&&ft(lt,"name").configurable)},gt=C((function(e){var t=pt.CONFIGURABLE,n=ct.get,r=ct.enforce,o=String(String).split("String");(e.exports=function(e,n,a,s){var i,u=!!s&&!!s.unsafe,c=!!s&&!!s.enumerable,l=!!s&&!!s.noTargetGet,f=s&&void 0!==s.name?s.name:n;K(a)&&("Symbol("===String(f).slice(0,7)&&(f="["+String(f).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!F(a,"name")||t&&a.name!==f)&&qe(a,"name",f),(i=r(a)).source||(i.source=o.join("string"==typeof f?f:""))),e!==I?(u?!l&&e[n]&&(c=!0):delete e[n],c?e[n]=a:qe(e,n,a)):c?e[n]=a:b(n,a)})(Function.prototype,"toString",(function(){return K(this)&&n(this).source||Xe(this)}))})),ht=P({}.toString),mt=P("".slice),vt=function(e){return mt(ht(e),8,-1)},yt=ie("toStringTag"),Ct=I.Object,Rt="Arguments"==vt(function(){return arguments}()),St=ce?vt:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Ct(e),yt))?n:Rt?vt(t):"Object"==(r=vt(t))&&K(t.callee)?"Arguments":r},Et=ce?{}.toString:function(){return"[object "+St(this)+"]"};ce||gt(Object.prototype,"toString",Et,{unsafe:!0});var It={}.propertyIsEnumerable,Tt=Object.getOwnPropertyDescriptor,bt={f:Tt&&!It.call({1:2},1)?function(e){var t=Tt(this,e);return!!t&&t.enumerable}:It},xt=I.Object,wt=P("".split),At=O((function(){return!xt("z").propertyIsEnumerable(0)}))?function(e){return"String"==vt(e)?wt(e,""):xt(e)}:xt,Ot=function(e){return At(G(e))},Nt=Object.getOwnPropertyDescriptor,Ut={f:le?Nt:function(e,t){if(e=Ot(e),t=_e(t),he)try{return Nt(e,t)}catch(e){}if(F(e,t))return Be(!Se(bt.f,e,t),e[t])}},Mt=Math.ceil,kt=Math.floor,_t=function(e){var t=+e;return t!=t||0===t?0:(t>0?kt:Mt)(t)},Pt=Math.max,Lt=Math.min,Gt=function(e,t){var n=_t(e);return n<0?Pt(n+t,0):Lt(n,t)},Dt=Math.min,jt=function(e){return e>0?Dt(_t(e),9007199254740991):0},Ht=function(e){return jt(e.length)},Ft=function(e){return function(t,n,r){var o,a=Ot(t),s=Ht(a),i=Gt(r,s);if(e&&n!=n){for(;s>i;)if((o=a[i++])!=o)return!0}else for(;s>i;i++)if((e||i in a)&&a[i]===n)return e||i||0;return!e&&-1}},Bt={includes:Ft(!0),indexOf:Ft(!1)},qt=Bt.indexOf,Vt=P([].push),zt=function(e,t){var n,r=Ot(e),o=0,a=[];for(n in r)!F(Ze,n)&&F(r,n)&&Vt(a,n);for(;t.length>o;)F(r,n=t[o++])&&(~qt(a,n)||Vt(a,n));return a},Kt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Wt=Kt.concat("length","prototype"),Xt={f:Object.getOwnPropertyNames||function(e){return zt(e,Wt)}},Yt={f:Object.getOwnPropertySymbols},Jt=P([].concat),$t=X("Reflect","ownKeys")||function(e){var t=Xt.f(Ce(e)),n=Yt.f;return n?Jt(t,n(e)):t},Qt=function(e,t,n){for(var r=$t(t),o=Fe.f,a=Ut.f,s=0;s<r.length;s++){var i=r[s];F(e,i)||n&&F(n,i)||o(e,i,a(t,i))}},Zt=/#|\.prototype\./,en=function(e,t){var n=nn[tn(e)];return n==on||n!=rn&&(K(t)?O(t):!!t)},tn=en.normalize=function(e){return String(e).replace(Zt,".").toLowerCase()},nn=en.data={},rn=en.NATIVE="N",on=en.POLYFILL="P",an=en,sn=Ut.f,un=function(e,t){var n,r,o,a,s,i=e.target,u=e.global,c=e.stat;if(n=u?I:c?I[i]||b(i,{}):(I[i]||{}).prototype)for(r in t){if(a=t[r],o=e.noTargetGet?(s=sn(n,r))&&s.value:n[r],!an(u?r:i+(c?".":"#")+r,e.forced)&&void 0!==o){if(typeof a==typeof o)continue;Qt(a,o)}(e.sham||o&&o.sham)&&qe(a,"sham",!0),gt(n,r,a,e)}},cn=Array.isArray||function(e){return"Array"==vt(e)},ln=function(e,t,n){var r=_e(t);r in e?Fe.f(e,r,Be(0,n)):e[r]=n},fn=function(){},dn=[],pn=X("Reflect","construct"),gn=/^\s*(?:class|function)\b/,hn=P(gn.exec),mn=!gn.exec(fn),vn=function(e){if(!K(e))return!1;try{return pn(fn,dn,e),!0}catch(e){return!1}},yn=function(e){if(!K(e))return!1;switch(St(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return mn||!!hn(gn,Xe(e))}catch(e){return!0}};yn.sham=!0;var Cn=!pn||O((function(){var e;return vn(vn.call)||!vn(Object)||!vn((function(){e=!0}))||e}))?yn:vn,Rn=ie("species"),Sn=I.Array,En=function(e,t){return new(function(e){var t;return cn(e)&&(t=e.constructor,(Cn(t)&&(t===Sn||cn(t.prototype))||fe(t)&&null===(t=t[Rn]))&&(t=void 0)),void 0===t?Sn:t}(e))(0===t?0:t)},In=ie("species"),Tn=function(e){return ee>=51||!O((function(){var t=[];return(t.constructor={})[In]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},bn=ie("isConcatSpreadable"),xn=9007199254740991,wn="Maximum allowed index exceeded",An=I.TypeError,On=ee>=51||!O((function(){var e=[];return e[bn]=!1,e.concat()[0]!==e})),Nn=Tn("concat"),Un=function(e){if(!fe(e))return!1;var t=e[bn];return void 0!==t?!!t:cn(e)};un({target:"Array",proto:!0,forced:!On||!Nn},{concat:function(e){var t,n,r,o,a,s=j(this),i=En(s,0),u=0;for(t=-1,r=arguments.length;t<r;t++)if(Un(a=-1===t?s:arguments[t])){if(u+(o=Ht(a))>xn)throw An(wn);for(n=0;n<o;n++,u++)n in a&&ln(i,u,a[n])}else{if(u>=xn)throw An(wn);ln(i,u++,a)}return i.length=u,i}});var Mn=P(P.bind),kn=function(e,t){return Ae(e),void 0===t?e:N?Mn(e,t):function(){return e.apply(t,arguments)}},_n=P([].push),Pn=function(e){var t=1==e,n=2==e,r=3==e,o=4==e,a=6==e,s=7==e,i=5==e||a;return function(u,c,l,f){for(var d,p,g=j(u),h=At(g),m=kn(c,l),v=Ht(h),y=0,C=f||En,R=t?C(u,v):n||s?C(u,0):void 0;v>y;y++)if((i||y in h)&&(p=m(d=h[y],y,g),e))if(t)R[y]=p;else if(p)switch(e){case 3:return!0;case 5:return d;case 6:return y;case 2:_n(R,d)}else switch(e){case 4:return!1;case 7:_n(R,d)}return a?-1:r||o?o:R}},Ln={forEach:Pn(0),map:Pn(1),filter:Pn(2),some:Pn(3),every:Pn(4),find:Pn(5),findIndex:Pn(6),filterReject:Pn(7)},Gn=Ln.map,Dn=Tn("map");un({target:"Array",proto:!0,forced:!Dn},{map:function(e){return Gn(this,e,arguments.length>1?arguments[1]:void 0)}});var jn=new t.Logger("RCIM"),Hn=I.Promise,Fn=function(e,t,n){for(var r in t)gt(e,r,t[r],n);return e},Bn=I.String,qn=I.TypeError,Vn=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=P(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return Ce(n),function(e){if("object"==typeof e||K(e))return e;throw qn("Can't set "+Bn(e)+" as a prototype")}(r),t?e(n,r):n.__proto__=r,n}}():void 0),zn=Fe.f,Kn=ie("toStringTag"),Wn=function(e,t,n){e&&!n&&(e=e.prototype),e&&!F(e,Kn)&&zn(e,Kn,{configurable:!0,value:t})},Xn=ie("species"),Yn=function(e){var t=X(e),n=Fe.f;le&&t&&!t[Xn]&&n(t,Xn,{configurable:!0,get:function(){return this}})},Jn=I.TypeError,$n=function(e,t){if(Ee(t,e))return e;throw Jn("Incorrect invocation")},Qn={},Zn=ie("iterator"),er=Array.prototype,tr=function(e){return void 0!==e&&(Qn.Array===e||er[Zn]===e)},nr=ie("iterator"),rr=function(e){if(null!=e)return Oe(e,nr)||Oe(e,"@@iterator")||Qn[St(e)]},or=I.TypeError,ar=function(e,t){var n=arguments.length<2?rr(e):t;if(Ae(n))return Ce(Se(n,e));throw or(xe(e)+" is not iterable")},sr=function(e,t,n){var r,o;Ce(e);try{if(!(r=Oe(e,"return"))){if("throw"===t)throw n;return n}r=Se(r,e)}catch(e){o=!0,r=e}if("throw"===t)throw n;if(o)throw r;return Ce(r),n},ir=I.TypeError,ur=function(e,t){this.stopped=e,this.result=t},cr=ur.prototype,lr=function(e,t,n){var r,o,a,s,i,u,c,l=n&&n.that,f=!(!n||!n.AS_ENTRIES),d=!(!n||!n.IS_ITERATOR),p=!(!n||!n.INTERRUPTED),g=kn(t,l),h=function(e){return r&&sr(r,"normal",e),new ur(!0,e)},m=function(e){return f?(Ce(e),p?g(e[0],e[1],h):g(e[0],e[1])):p?g(e,h):g(e)};if(d)r=e;else{if(!(o=rr(e)))throw ir(xe(e)+" is not iterable");if(tr(o)){for(a=0,s=Ht(e);s>a;a++)if((i=m(e[a]))&&Ee(cr,i))return i;return new ur(!1)}r=ar(e,o)}for(u=r.next;!(c=Se(u,r)).done;){try{i=m(c.value)}catch(e){sr(r,"throw",e)}if("object"==typeof i&&i&&Ee(cr,i))return i}return new ur(!1)},fr=ie("iterator"),dr=!1;try{var pr=0,gr={next:function(){return{done:!!pr++}},return:function(){dr=!0}};gr[fr]=function(){return this},Array.from(gr,(function(){throw 2}))}catch(e){}var hr,mr,vr,yr,Cr=function(e,t){if(!t&&!dr)return!1;var n=!1;try{var r={};r[fr]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(e){}return n},Rr=I.TypeError,Sr=ie("species"),Er=function(e,t){var n,r=Ce(e).constructor;return void 0===r||null==(n=Ce(r)[Sr])?t:function(e){if(Cn(e))return e;throw Rr(xe(e)+" is not a constructor")}(n)},Ir=Function.prototype,Tr=Ir.apply,br=Ir.call,xr="object"==typeof Reflect&&Reflect.apply||(N?br.bind(Tr):function(){return br.apply(Tr,arguments)}),wr=X("document","documentElement"),Ar=P([].slice),Or=I.TypeError,Nr=function(e,t){if(e<t)throw Or("Not enough arguments");return e},Ur=/(?:ipad|iphone|ipod).*applewebkit/i.test(Y),Mr="process"==vt(I.process),kr=I.setImmediate,_r=I.clearImmediate,Pr=I.process,Lr=I.Dispatch,Gr=I.Function,Dr=I.MessageChannel,jr=I.String,Hr=0,Fr={},Br="onreadystatechange";try{hr=I.location}catch(e){}var qr=function(e){if(F(Fr,e)){var t=Fr[e];delete Fr[e],t()}},Vr=function(e){return function(){qr(e)}},zr=function(e){qr(e.data)},Kr=function(e){I.postMessage(jr(e),hr.protocol+"//"+hr.host)};kr&&_r||(kr=function(e){Nr(arguments.length,1);var t=K(e)?e:Gr(e),n=Ar(arguments,1);return Fr[++Hr]=function(){xr(t,void 0,n)},mr(Hr),Hr},_r=function(e){delete Fr[e]},Mr?mr=function(e){Pr.nextTick(Vr(e))}:Lr&&Lr.now?mr=function(e){Lr.now(Vr(e))}:Dr&&!Ur?(yr=(vr=new Dr).port2,vr.port1.onmessage=zr,mr=kn(yr.postMessage,yr)):I.addEventListener&&K(I.postMessage)&&!I.importScripts&&hr&&"file:"!==hr.protocol&&!O(Kr)?(mr=Kr,I.addEventListener("message",zr,!1)):mr=Br in ge("script")?function(e){wr.appendChild(ge("script")).onreadystatechange=function(){wr.removeChild(this),qr(e)}}:function(e){setTimeout(Vr(e),0)});var Wr,Xr,Yr,Jr,$r,Qr,Zr,eo,to={set:kr,clear:_r},no=/ipad|iphone|ipod/i.test(Y)&&void 0!==I.Pebble,ro=/web0s(?!.*chrome)/i.test(Y),oo=Ut.f,ao=to.set,so=I.MutationObserver||I.WebKitMutationObserver,io=I.document,uo=I.process,co=I.Promise,lo=oo(I,"queueMicrotask"),fo=lo&&lo.value;fo||(Wr=function(){var e,t;for(Mr&&(e=uo.domain)&&e.exit();Xr;){t=Xr.fn,Xr=Xr.next;try{t()}catch(e){throw Xr?Jr():Yr=void 0,e}}Yr=void 0,e&&e.enter()},Ur||Mr||ro||!so||!io?!no&&co&&co.resolve?((Zr=co.resolve(void 0)).constructor=co,eo=kn(Zr.then,Zr),Jr=function(){eo(Wr)}):Mr?Jr=function(){uo.nextTick(Wr)}:(ao=kn(ao,I),Jr=function(){ao(Wr)}):($r=!0,Qr=io.createTextNode(""),new so(Wr).observe(Qr,{characterData:!0}),Jr=function(){Qr.data=$r=!$r}));var po=fo||function(e){var t={fn:e,next:void 0};Yr&&(Yr.next=t),Xr||(Xr=t,Jr()),Yr=t},go=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=Ae(t),this.reject=Ae(n)},ho={f:function(e){return new go(e)}},mo=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},vo=function(){this.head=null,this.tail=null};vo.prototype={add:function(e){var t={item:e,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}};var yo,Co,Ro,So,Eo=vo,Io="object"==typeof window,To=to.set,bo=ie("species"),xo="Promise",wo=ct.getterFor(xo),Ao=ct.set,Oo=ct.getterFor(xo),No=Hn&&Hn.prototype,Uo=Hn,Mo=No,ko=I.TypeError,_o=I.document,Po=I.process,Lo=ho.f,Go=Lo,Do=!!(_o&&_o.createEvent&&I.dispatchEvent),jo=K(I.PromiseRejectionEvent),Ho="unhandledrejection",Fo=!1,Bo=an(xo,(function(){var e=Xe(Uo),t=e!==String(Uo);if(!t&&66===ee)return!0;if(ee>=51&&/native code/.test(e))return!1;var n=new Uo((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};return(n.constructor={})[bo]=r,!(Fo=n.then((function(){}))instanceof r)||!t&&Io&&!jo})),qo=Bo||!Cr((function(e){Uo.all(e).catch((function(){}))})),Vo=function(e){var t;return!(!fe(e)||!K(t=e.then))&&t},zo=function(e,t){var n,r,o,a=t.value,s=1==t.state,i=s?e.ok:e.fail,u=e.resolve,c=e.reject,l=e.domain;try{i?(s||(2===t.rejection&&Jo(t),t.rejection=1),!0===i?n=a:(l&&l.enter(),n=i(a),l&&(l.exit(),o=!0)),n===e.promise?c(ko("Promise-chain cycle")):(r=Vo(n))?Se(r,n,u,c):u(n)):c(a)}catch(e){l&&!o&&l.exit(),c(e)}},Ko=function(e,t){e.notified||(e.notified=!0,po((function(){for(var n,r=e.reactions;n=r.get();)zo(n,e);e.notified=!1,t&&!e.rejection&&Xo(e)})))},Wo=function(e,t,n){var r,o;Do?((r=_o.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),I.dispatchEvent(r)):r={promise:t,reason:n},!jo&&(o=I["on"+e])?o(r):e===Ho&&function(e,t){var n=I.console;n&&n.error&&(1==arguments.length?n.error(e):n.error(e,t))}("Unhandled promise rejection",n)},Xo=function(e){Se(To,I,(function(){var t,n=e.facade,r=e.value;if(Yo(e)&&(t=mo((function(){Mr?Po.emit("unhandledRejection",r,n):Wo(Ho,n,r)})),e.rejection=Mr||Yo(e)?2:1,t.error))throw t.value}))},Yo=function(e){return 1!==e.rejection&&!e.parent},Jo=function(e){Se(To,I,(function(){var t=e.facade;Mr?Po.emit("rejectionHandled",t):Wo("rejectionhandled",t,e.value)}))},$o=function(e,t,n){return function(r){e(t,r,n)}},Qo=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,Ko(e,!0))},Zo=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw ko("Promise can't be resolved itself");var r=Vo(t);r?po((function(){var n={done:!1};try{Se(r,t,$o(Zo,n,e),$o(Qo,n,e))}catch(t){Qo(n,t,e)}})):(e.value=t,e.state=1,Ko(e,!1))}catch(t){Qo({done:!1},t,e)}}};if(Bo&&(Mo=(Uo=function(e){$n(this,Mo),Ae(e),Se(yo,this);var t=wo(this);try{e($o(Zo,t),$o(Qo,t))}catch(e){Qo(t,e)}}).prototype,(yo=function(e){Ao(this,{type:xo,done:!1,notified:!1,parent:!1,reactions:new Eo,rejection:!1,state:0,value:void 0})}).prototype=Fn(Mo,{then:function(e,t){var n=Oo(this),r=Lo(Er(this,Uo));return n.parent=!0,r.ok=!K(e)||e,r.fail=K(t)&&t,r.domain=Mr?Po.domain:void 0,0==n.state?n.reactions.add(r):po((function(){zo(r,n)})),r.promise},catch:function(e){return this.then(void 0,e)}}),Co=function(){var e=new yo,t=wo(e);this.promise=e,this.resolve=$o(Zo,t),this.reject=$o(Qo,t)},ho.f=Lo=function(e){return e===Uo||e===Ro?new Co(e):Go(e)},K(Hn)&&No!==Object.prototype)){So=No.then,Fo||(gt(No,"then",(function(e,t){var n=this;return new Uo((function(e,t){Se(So,n,e,t)})).then(e,t)}),{unsafe:!0}),gt(No,"catch",Mo.catch,{unsafe:!0}));try{delete No.constructor}catch(e){}Vn&&Vn(No,Mo)}un({global:!0,wrap:!0,forced:Bo},{Promise:Uo}),Wn(Uo,xo,!1),Yn(xo),Ro=X(xo),un({target:xo,stat:!0,forced:Bo},{reject:function(e){var t=Lo(this);return Se(t.reject,void 0,e),t.promise}}),un({target:xo,stat:!0,forced:Bo},{resolve:function(e){return function(e,t){if(Ce(e),fe(t)&&t.constructor===e)return t;var n=ho.f(e);return(0,n.resolve)(t),n.promise}(this,e)}}),un({target:xo,stat:!0,forced:qo},{all:function(e){var t=this,n=Lo(t),r=n.resolve,o=n.reject,a=mo((function(){var n=Ae(t.resolve),a=[],s=0,i=1;lr(e,(function(e){var u=s++,c=!1;i++,Se(n,t,e).then((function(e){c||(c=!0,a[u]=e,--i||r(a))}),o)})),--i||r(a)}));return a.error&&o(a.value),n.promise},race:function(e){var t=this,n=Lo(t),r=n.reject,o=mo((function(){var o=Ae(t.resolve);lr(e,(function(e){Se(o,t,e).then(n.resolve,r)}))}));return o.error&&r(o.value),n.promise}});var ea=/MSIE .\./.test(Y),ta=I.Function,na=function(e){return function(t,n){var r=Nr(arguments.length,1)>2,o=K(t)?t:ta(t),a=r?Ar(arguments,2):void 0;return e(r?function(){xr(o,this,a)}:o,n)}};un({global:!0,bind:!0,forced:ea},{setTimeout:na(I.setTimeout),setInterval:na(I.setInterval)});var ra,oa,aa=function(){return!("undefined"==typeof uni||!function(e){for(var t=["canIUse","getSystemInfo"],n=0,r=t.length;n<r;n++)if(!e[t[n]])return!1;return!0}(uni))},sa=aa();var ia,ua={tag:"browser",httpReq:function(e){var n=e.method||t.HttpMethod.GET,r=e.timeout||6e4,a=e.headers,s=e.query,i=e.body,u=t.appendUrl(e.url,s);return new Promise((function(e){var t,s=(t="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,"undefined"!=typeof XMLHttpRequest&&t?new XMLHttpRequest:"undefined"!=typeof XDomainRequest?new XDomainRequest:new ActiveXObject("Microsoft.XMLHTTP")),c="[object XDomainRequest]"===Object.prototype.toString.call(s);if(s.open(n,u),a&&s.setRequestHeader)for(var l in a)s.setRequestHeader(l,a[l]);if(c){s.timeout=r,s.onload=function(){e({data:s.responseText,status:s.status||200})},s.onerror=function(){e({status:s.status||0})},s.ontimeout=function(){e({status:s.status||0})};var f="object"===o(i)?JSON.stringify(i):i;s.send(f)}else s.onreadystatechange=function(){4===s.readyState&&e({data:s.responseText,status:s.status})},s.onerror=function(){e({status:s.status||0})},setTimeout((function(){return e({status:s.status||0})}),r),s.send(i)}))},localStorage:null===(ra=window)||void 0===ra?void 0:ra.localStorage,sessionStorage:null===(oa=window)||void 0===oa?void 0:oa.sessionStorage,isSupportSocket:function(){var e="undefined"!=typeof WebSocket;return e||jn.warn("websocket not support"),e},useNavi:!0,connectPlatform:"",isFromUniapp:sa,createWebSocket:function(e,t){var n=new WebSocket(e,t);return n.binaryType="arraybuffer",{onClose:function(e){n.onclose=function(t){var n=t.code,r=t.reason;e(n,r)}},onError:function(e){n.onerror=e},onMessage:function(e){n.onmessage=function(t){e(t.data)}},onOpen:function(e){n.onopen=e},send:function(e){n.send(e)},close:function(e,t){n.close(e,t)}}},createDataChannel:function(e,n){return this.isSupportSocket()&&"websocket"===n?new t.WebSocketChannel(this,e):new t.CometChannel(this,e)}},ca=aa(),la=function(e){return function(){try{var t;return(t=wx)[e].apply(t,arguments)}catch(e){jn.error(e)}}},fa={setItem:la("setStorageSync"),getItem:la("getStorageSync"),removeItem:la("removeStorageSync"),clear:la("clearStorageSync")},da={tag:"wechat",httpReq:function(e){var n=e.method||t.HttpMethod.GET,r=e.timeout||6e4,o=e.headers,a=e.query,s=e.body,i=t.appendUrl(e.url,a);return new Promise((function(e){wx.request({url:i,method:n,headers:o,timeout:r,data:s,success:function(t){e({data:t.data,status:t.statusCode})},fail:function(){e({status:t.ErrorCode.RC_HTTP_REQ_TIMEOUT})}})}))},localStorage:fa,sessionStorage:fa,isSupportSocket:function(){return!0},useNavi:!1,connectPlatform:"MiniProgram",isFromUniapp:ca,createWebSocket:function(e,t){var n=wx.connectSocket({url:e,protocols:t});return{onClose:function(e){n.onClose((function(t){e(t.code,t.reason)}))},onError:function(e){n.onError((function(t){e(t.errMsg)}))},onMessage:function(e){n.onMessage((function(t){e(t.data)}))},onOpen:function(e){n.onOpen(e)},send:function(e){n.send({data:e})},close:function(e,t){n.close({code:e,reason:t})}}},createDataChannel:function(e,n){return"websocket"===n?new t.WebSocketChannel(this,e):new t.CometChannel(this,e)}},pa=aa(),ga=function(e){return function(){try{var t;return(t=my)[e].apply(t,arguments)}catch(e){jn.error(e)}}},ha={setItem:ga("setStorageSync"),getItem:ga("getStorageSync"),removeItem:ga("removeStorageSync"),clear:ga("clearStorageSync")},ma={tag:"alipay",httpReq:function(e){var n=e.method||t.HttpMethod.GET,r=e.timeout||6e4,o=e.headers,a=e.query,s=e.body,i=t.appendUrl(e.url,a),u=e.dataType||"json";return new Promise((function(e){my.request({url:i,method:n,headers:o,timeout:r,data:s,dataType:u,success:function(t){e({data:t.data,status:t.status})},fail:function(){e({status:t.ErrorCode.RC_HTTP_REQ_TIMEOUT})}})}))},localStorage:ha,sessionStorage:ha,isSupportSocket:function(){return!1},useNavi:!1,connectPlatform:"MiniProgram",isFromUniapp:pa,createDataChannel:function(e,n){return"websocket"===n?new t.WebSocketChannel(this,e):new t.CometChannel(this,e)}},va=aa(),ya=function(e){return function(){try{var t;return console.log("tt",tt),(t=tt)[e].apply(t,arguments)}catch(e){jn.error(e)}}},Ca={setItem:ya("setStorageSync"),getItem:ya("getStorageSync"),removeItem:ya("removeStorageSync"),clear:ya("clearStorageSync")},Ra={tag:"toutiao",isSupportSocket:function(){return!0},useNavi:!1,connectPlatform:"MiniProgram",isFromUniapp:va,localStorage:Ca,sessionStorage:Ca,httpReq:function(e){return new Promise((function(t,n){tt.request({url:e.url,data:e.body,header:e.headers,method:e.method,success:function(e){console.log("调用成功",e.data);var n=(null==e?void 0:e.data)||{},r={data:JSON.stringify(n),status:e.statusCode};t(r)},fail:function(e){console.log("调用失败",e.errMsg),n({data:e.errMsg})}})}))},createWebSocket:function(e,t){var n=tt.connectSocket({url:e,protocols:t});return{onOpen:function(e){n.onOpen(e)},onClose:function(e){n.onClose((function(t){return e(t.code,t.reason)}))},onError:function(e){n.onError((function(t){return e(t.errMsg)}))},onMessage:function(e){n.onMessage((function(t){return e(t.data)}))},send:function(e){n.send({data:e})},close:function(e,t){n.close({code:e,reason:t})}}},createDataChannel:function(e,n){return"websocket"===n?new t.WebSocketChannel(this,e):new t.CometChannel(this,e)}},Sa=aa(),Ea=function(e){return function(){try{var t;return console.log("swan",swan),(t=swan)[e].apply(t,arguments)}catch(e){jn.error(e)}}},Ia={setItem:Ea("setStorageSync"),getItem:Ea("getStorageSync"),removeItem:Ea("removeStorageSync"),clear:Ea("clearStorageSync")},Ta={tag:"baidu",isSupportSocket:function(){return!0},useNavi:!1,connectPlatform:"MiniProgram",isFromUniapp:Sa,localStorage:Ia,sessionStorage:Ia,httpReq:function(e){return new Promise((function(t,n){swan.request({url:e.url,data:e.body,header:e.headers,method:e.method,success:function(e){console.log("调用成功",e.data);var n=(null==e?void 0:e.data)||{},r={data:JSON.stringify(n),status:e.statusCode};t(r)},fail:function(e){console.log("调用失败",e.errorCode),n({data:e.errorCode})}})}))},createWebSocket:function(e,t){var n=swan.connectSocket({url:e,protocols:t});return{onOpen:function(e){n.onOpen(e)},onClose:function(e){n.onClose((function(t){return e(t.code,t.reason)}))},onError:function(e){n.onError((function(t){return e(t.errMsg)}))},onMessage:function(e){n.onMessage((function(t){return e(t.data)}))},send:function(e){n.send({data:e})},close:function(e,t){n.close({code:e,reason:t})}}},createDataChannel:function(e,n){return"websocket"===n?new t.WebSocketChannel(this,e):new t.CometChannel(this,e)}},ba=function(e){return function(){try{var t;return(t=uni)[e].apply(t,arguments)}catch(e){jn.error(e)}}},xa={setItem:ba("setStorageSync"),getItem:ba("getStorageSync"),removeItem:ba("removeStorageSync"),clear:ba("clearStorageSync")},wa={tag:"uniapp",httpReq:function(e){var n=e.method||t.HttpMethod.GET,r=e.timeout||6e4,o=e.headers,a=e.query,s=e.body,i=t.appendUrl(e.url,a);return new Promise((function(e){uni.request({url:i,method:n,headers:o,timeout:r,data:s,success:function(t){e({data:t.data,status:t.statusCode})},fail:function(){e({status:t.ErrorCode.RC_HTTP_REQ_TIMEOUT})}})}))},localStorage:xa,sessionStorage:xa,isSupportSocket:function(){return!0},useNavi:!0,connectPlatform:"",isFromUniapp:!0,createWebSocket:function(e,t){var n={complete:function(){},url:e,protocols:t},r=uni.connectSocket(n);return{onClose:function(e){r.onClose((function(t){e(t.code,t.reason)}))},onError:function(e){r.onError((function(t){e(t.errMsg)}))},onMessage:function(e){r.onMessage((function(t){e(t.data)}))},onOpen:function(e){r.onOpen(e)},send:function(e){r.send({data:e})},close:function(e,t){r.close({code:e,reason:t})}}},createDataChannel:function(e,n){return"websocket"===n?new t.WebSocketChannel(this,e):new t.CometChannel(this,e)}},Aa=function(e){return e&&e.canIUse&&e.getSystemInfo},Oa="undefined"!=typeof uni&&Aa(uni)?function(){switch(process.env.VUE_APP_PLATFORM){case"app-plus":return wa;case"mp-baidu":return Ta;case"mp-toutiao":return Ra;case"mp-alipay":return ma;case"mp-weixin":return da;default:return ua}}():"undefined"!=typeof wx&&Aa(wx)?da:"undefined"!=typeof my&&Aa(my)?ma:"undefined"!=typeof tt&&Aa(tt)?Ra:"undefined"!=typeof swan&&Aa(swan)?Ta:ua;function Na(e){var n=e.conversationType,r=e.channelId,o=e.messageType,a=e.content,s=e.senderUserId,i=e.targetId,u=e.sentTime,c=e.receivedTime,l=e.messageUId,f=e.messageDirection,d=e.isPersited,p=e.isCounted,g=e.isOffLineMessage,h=e.canIncludeExpansion,m=e.expansion,v=e.receivedStatus,y=e.disableNotification,C=e.isMentioned,R=e.isStatusMessage,S=e.readReceiptInfo,E=e.pushConfig,I=e.messageId,T=e.isInterrupt,b=e.isModifyMessage;v||(v=t.ReceivedStatus.UNREAD);var x={messageType:o,channelId:r||"",content:a,senderUserId:s,targetId:i,conversationType:n,sentTime:u,receivedTime:c,messageUId:l,messageDirection:f,isPersited:d,isCounted:p,isMentioned:C,disableNotification:y,isStatusMessage:R,canIncludeExpansion:h,expansion:m,receivedStatus:v,readReceiptInfo:S,pushConfig:E,messageId:I,isInterrupt:T,isModifyMessage:b};return n!==t.ConversationType.ULTRA_GROUP&&(x.isOffLineMessage=g),x}function Ua(e){var t=e.conversationType,n=e.targetId,r=e.latestMessage,o=e.unreadMessageCount,a=e.hasMentioned,s=e.mentionedInfo,i=e.lastUnreadTime,u=e.notificationStatus,c=e.isTop,l=e.channelId,f=e.unreadMentionedCount;return{conversationType:t,targetId:n,latestMessage:r&&Na(r),unreadMessageCount:o,hasMentioned:a,mentionedInfo:a?{type:null==s?void 0:s.type,userIdList:null==s?void 0:s.userIdList}:void 0,lastUnreadTime:i,notificationStatus:u,isTop:c,channelId:l,unreadMentionedCount:f}}e.Events=void 0,(ia=e.Events||(e.Events={})).CONNECTING="CONNECTING",ia.CONNECTED="CONNECTED",ia.DISCONNECT="DISCONNECT",ia.SUSPEND="SUSPEND",ia.MESSAGES="MESSAGES",ia.READ_RECEIPT_RECEIVED="READ_RECEIPT_RECEIVED",ia.MESSAGE_RECEIPT_REQUEST="MESSAGE_RECEIPT_REQUEST",ia.MESSAGE_RECEIPT_RESPONSE="MESSAGE_RECEIPT_RESPONSE",ia.CONVERSATION="CONVERSATION",ia.CHATROOM="CHATROOM",ia.EXPANSION="EXPANSION",ia.PULL_OFFLINE_MESSAGE_FINISHED="PULL_OFFLINE_MESSAGE_FINISHED",ia.TAG="TAG",ia.CONVERSATION_TAG="CONVERSATION_TAG",ia.TYPING_STATUS="TYPING_STATUS",ia.MESSAGE_BLOCKED="MESSAGE_BLOCKED",ia.ULTRA_GROUP_ENABLE="ULTRA_GROUP_ENABLE",ia.OPERATE_STATUS="OPERATE_STATUS",ia.ULTRA_GROUP_MESSAGE_EXPANSION_UPDATED="ULTRA_GROUP_MESSAGE_EXPANSION_UPDATED",ia.ULTRA_GROUP_MESSAGE_MODIFIED="ULTRA_GROUP_MESSAGE_MODIFIED",ia.ULTRA_GROUP_MESSAGE_RECALLED="ULTRA_GROUP_MESSAGE_RECALLED";var Ma,ka=function(n){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(o,n);var r=h(o);function o(e){var n;if(i(this,o),n=r.call(this),o.imClient)return jn.error("Please do not repeatedly perform the init method"),g(n,o.imClient);t.assert("options.navigators",e.navigators,(function(e){return t.isArray(e)&&(0===e.length||e.every(t.isHttpUrl))}));var a=null==e?void 0:e.connectType;return a?t.CONNECTION_TYPE.WEBSOCKET!==a&&t.CONNECTION_TYPE.COMET!==a&&(jn.warn("RongIMLib connectionType must be ".concat(t.CONNECTION_TYPE.WEBSOCKET," or ").concat(t.CONNECTION_TYPE.COMET)),a=t.CONNECTION_TYPE.WEBSOCKET):a=t.CONNECTION_TYPE.WEBSOCKET,n._context=t.APIContext.init(Oa,{appkey:e.appkey,apiVersion:"5.2.1",navigators:e.navigators||[],miniCMPProxy:e.customCMP||[],connectionType:a,logLevel:e.logLevel,logStdout:e.logStdout,indexDBSwitch:e.indexDBSwitch,checkCA:e.checkCA}),n.watch(),o.imClient=p(n),n}return c(o,[{key:"context",get:function(){if(!this._context)throw new Error("Please perform the init method!");return this._context}},{key:"watch",value:function(){var n=this,r={onConnecting:function(){n.emit(e.Events.CONNECTING)},onConnected:function(){n.emit(e.Events.CONNECTED)},onDisconnect:function(t){n.emit(e.Events.DISCONNECT,t)},onSuspend:function(t){n.emit(e.Events.SUSPEND,t)},batchMessage:function(t){n.emit(e.Events.MESSAGES,{messages:t.map((function(e){return Na(e)}))})},typingState:function(t){n.emit(e.Events.TYPING_STATUS,{status:t})},readReceiptReceived:function(t,r,o){n.emit(e.Events.READ_RECEIPT_RECEIVED,{conversation:t,messageUId:r,sentTime:o})},messageReceiptRequest:function(t,r,o){n.emit(e.Events.MESSAGE_RECEIPT_REQUEST,{conversation:t,messageUId:r,senderUserId:o})},messageReceiptResponse:function(t,r,o){n.emit(e.Events.MESSAGE_RECEIPT_RESPONSE,{conversation:t,receivedUserId:r,messageUIdList:o})},conversationState:function(r){var o=r.map((function(e){var n=e.conversationType;return n===t.ConversationType.ULTRA_GROUP?{conversation:{conversationType:n,latestMessage:e.latestMessage?Na(e.latestMessage):null,targetId:e.targetId,unreadMessageCount:e.unreadMessageCount,unreadMentionedCount:e.unreadMentionedCount,versionTime:e.versionTime,notificationStatus:e.notificationStatus,lastUnreadTime:e.lastUnreadTime,channelId:e.channelId}}:{conversation:{conversationType:n,latestMessage:e.latestMessage?Na(e.latestMessage):null,targetId:e.targetId,unreadMessageCount:e.unreadMessageCount,hasMentioned:e.hasMentioned,mentionedInfo:e.mentionedInfo,lastUnreadTime:e.lastUnreadTime,notificationStatus:e.notificationStatus,isTop:e.isTop,channelId:e.channelId,unreadMentionedCount:e.unreadMentionedCount},updatedItems:e.updatedItems}}));n.emit(e.Events.CONVERSATION,{conversationList:o})},chatroomState:function(t){n.emit(e.Events.CHATROOM,t)},expansion:function(t){n.emit(e.Events.EXPANSION,t)},pullFinished:function(){n.emit(e.Events.PULL_OFFLINE_MESSAGE_FINISHED)},tag:function(){n.emit(e.Events.TAG)},conversationTagChanged:function(){n.emit(e.Events.CONVERSATION_TAG)},messageBlocked:function(t){n.emit(e.Events.MESSAGE_BLOCKED,t)},ultraGroupEnable:function(t){n.emit(e.Events.ULTRA_GROUP_ENABLE,t)},operateStatus:function(t){n.emit(e.Events.OPERATE_STATUS,t)},ultraGroupMessageExpansionUpdated:function(t){n.emit(e.Events.ULTRA_GROUP_MESSAGE_EXPANSION_UPDATED,t)},ultraGroupMessageModified:function(t){n.emit(e.Events.ULTRA_GROUP_MESSAGE_MODIFIED,t)},ultraGroupMessageRecalled:function(t){n.emit(e.Events.ULTRA_GROUP_MESSAGE_RECALLED,t)}};this.context.assignWatcher(r)}}]),o}(t.EventEmitter),_a={TIMEOUT:{code:-1,msg:"Network timeout"},SDK_INTERNAL_ERROR:{code:-2,msg:"SDK internal error"},PARAMETER_ERROR:{code:-3,msg:"Please check the parameters, the {param} expected a value of {expect} but received {current}"},REJECTED_BY_BLACKLIST:{code:405,msg:"Blacklisted by the other party"},SEND_TOO_FAST:{code:20604,msg:"Sending messages too quickly"},NOT_IN_GROUP:{code:22406,msg:"Not in group"},FORBIDDEN_IN_GROUP:{code:22408,msg:"Forbbiden from speaking in the group"},NOT_IN_CHATROOM:{code:23406,msg:"Not in chatRoom"},FORBIDDEN_IN_CHATROOM:{code:23408,msg:"Forbbiden from speaking in the chatRoom"},KICKED_FROM_CHATROOM:{code:23409,msg:"Kicked out and forbbiden from joining the chatRoom"},CHATROOM_NOT_EXIST:{code:23410,msg:"ChatRoom does not exist"},CHATROOM_IS_FULL:{code:23411,msg:"ChatRoom members exceeded"},PARAMETER_INVALID_CHATROOM:{code:23412,msg:"Invalid chatRoom parameters"},ROAMING_SERVICE_UNAVAILABLE_CHATROOM:{code:23414,msg:"ChatRoom message roaming service is not open, Please go to the developer to open this service"},RECALLMESSAGE_PARAMETER_INVALID:{code:25101,msg:"Invalid recall message parameter"},ROAMING_SERVICE_UNAVAILABLE_MESSAGE:{code:25102,msg:"Single group chat roaming service is not open, Please go to the developer to open this service"},PUSHSETTING_PARAMETER_INVALID:{code:26001,msg:"Invalid push parameter"},OPERATION_BLOCKED:{code:20605,msg:"Operation is blocked"},OPERATION_NOT_SUPPORT:{code:20606,msg:"Operation is not supported"},MSG_BLOCKED_SENSITIVE_WORD:{code:21501,msg:"The sent message contains sensitive words"},REPLACED_SENSITIVE_WORD:{code:21502,msg:"Sensitive words in the message have been replaced"},NOT_CONNECTED:{code:30001,msg:"Please connect successfully first"},NAVI_REQUEST_ERROR:{code:30007,msg:"Navigation http request failed"},CMP_REQUEST_ERROR:{code:30010,msg:"CMP sniff http request failed"},CONN_APPKEY_FAKE:{code:31002,msg:"Your appkey is fake"},CONN_MINI_SERVICE_NOT_OPEN:{code:31003,msg:"Mini program service is not open, Please go to the developer to open this service"},CONN_ACK_TIMEOUT:{code:31e3,msg:"Connection ACK timeout"},CONN_TOKEN_INCORRECT:{code:31004,msg:"Your token is not valid or expired"},CONN_NOT_AUTHRORIZED:{code:31005,msg:"AppKey and Token do not match"},CONN_REDIRECTED:{code:31006,msg:"Connection redirection"},CONN_APP_BLOCKED_OR_DELETED:{code:31008,msg:"AppKey is banned or deleted"},CONN_USER_BLOCKED:{code:31009,msg:"User blocked"},CONN_DOMAIN_INCORRECT:{code:31012,msg:"Connect domain error, Please check the set security domain"},ROAMING_SERVICE_UNAVAILABLE:{code:33007,msg:"Roaming service cloud is not open, Please go to the developer to open this service"},RC_CONNECTION_EXIST:{code:34001,msg:"Connection already exists"},CHATROOM_KV_EXCEED:{code:23423,msg:"ChatRoom KV setting exceeds maximum"},CHATROOM_KV_OVERWRITE_INVALID:{code:23424,msg:"ChatRoom KV already exists"},CHATROOM_KV_STORE_NOT_OPEN:{code:23426,msg:"ChatRoom KV storage service is not open, Please go to the developer to open this service"},CHATROOM_KEY_NOT_EXIST:{code:23427,msg:"ChatRoom key does not exist"},MSG_KV_NOT_SUPPORT:{code:34008,msg:"The message cannot be extended"},SEND_MESSAGE_KV_FAIL:{code:34009,msg:"Sending RC expansion message fail"},EXPANSION_LIMIT_EXCEET:{code:34010,msg:"The message expansion size is beyond the limit"},ILLGAL_PARAMS:{code:33003,msg:"Incorrect parameters passed in while calling the interface"},UPLOAD_FILE_FAILED:{code:35020,msg:"File upload failed"},CHATROOM_KV_STORE_NOT_ALL_SUCCESS:{code:23428,msg:"Chatroom kv store not all success"},CHATROOM_KV_STORE_OUT_LIMIT:{code:23429,msg:"Chatroom kv's length is out of limit"},TAG_EXISTS:{code:33101,msg:"The tag already exists"},TAG_NOT_EXIST:{code:33100,msg:"The tag does not exist"},NOT_SUPPORT:{code:t.ErrorCode.NOT_SUPPORT,msg:"The method is not supported in a browser!"}},Pa={},La={};for(var Ga in _a){var Da=_a[Ga],ja=Da.code;Pa[ja]=Ga,La[ja]=Da}_a.ROAMING_SERVICE_UNAVAILABLE.code;function Ha(){return(Ha=s(regeneratorRuntime.mark((function e(n,r){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.assert("token",n,t.AssertRules.STRING,!0),jn.warn("RongIMLib Version: ".concat("5.2.1",", Commit: ","5f3d7b5af1e6e31d4545ef0973b990837060617b")),e.next=4,Ma.context.connect(n,!1,r);case 4:if((o=e.sent).code!==t.ErrorCode.SUCCESS){e.next=7;break}return e.abrupt("return",{code:o.code,data:{userId:o.userId}});case 7:return e.abrupt("return",{code:o.code,msg:Pa[o.code]});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fa(){return Fa=s(regeneratorRuntime.mark((function e(n,r){var o,a,s,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return jn.debug("get conversation list ->"),e.next=3,ka.imClient.context.getConversationList(null==n?void 0:n.count,void 0,null==n?void 0:n.startTime,null==n?void 0:n.order,r);case 3:if(o=e.sent,a=o.code,s=o.data,a!==t.ErrorCode.SUCCESS||!s){e.next=9;break}return i=s.map((function(e){return Ua(e)})),e.abrupt("return",{code:0,data:i});case 9:return jn.warn("get conversation list fail ->"+a+":"+Pa[a]),e.abrupt("return",{code:a,msg:Pa[a]});case 11:case"end":return e.stop()}}),e)}))),Fa.apply(this,arguments)}function Ba(){return Ba=s(regeneratorRuntime.mark((function e(n){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.assert("options.conversationType",n.conversationType,t.isValidConversationType,!0),t.assert("options.targetId",n.targetId,t.AssertRules.STRING,!0),t.assert("options.channelId",n.channelId,t.AssertRules.CHANNEL_ID),e.next=5,ka.imClient.context.removeConversation(n.conversationType,n.targetId,n.channelId);case 5:if(r=e.sent,o="conversationType:"+n.conversationType+",targetId:"+n.targetId,jn.debug("destroy conversation ->"+o),r===t.ErrorCode.SUCCESS){e.next=11;break}return jn.warn("destroy conversation fail ->"+r+":"+Pa[r]+","+o),e.abrupt("return",{code:r,msg:Pa[r]});case 11:return e.abrupt("return",{code:r});case 12:case"end":return e.stop()}}),e)}))),Ba.apply(this,arguments)}function qa(){return qa=s(regeneratorRuntime.mark((function e(n){var r,o,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.assert("options.conversationType",n.conversationType,t.isValidConversationType,!0),t.assert("options.targetId",n.targetId,t.AssertRules.STRING,!0),t.assert("options.channelId",n.channelId,t.AssertRules.CHANNEL_ID),e.next=5,ka.imClient.context.getConversationMessageDraft(n.conversationType,n.targetId,n.channelId);case 5:if(r=e.sent,o=r.code,a=r.data,s="conversationType:"+n.conversationType+",targetId:"+n.targetId,jn.debug("get draft ->"+s),o!==t.ErrorCode.SUCCESS){e.next=12;break}return e.abrupt("return",{code:o,data:a||""});case 12:return jn.warn("get draft fail ->"+o+":"+Pa[o]+","+s),e.abrupt("return",{code:o,msg:Pa[o]});case 14:case"end":return e.stop()}}),e)}))),qa.apply(this,arguments)}function Va(){return Va=s(regeneratorRuntime.mark((function e(n,r){var o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.assert("options.conversationType",n.conversationType,t.isValidConversationType,!0),t.assert("options.targetId",n.targetId,t.AssertRules.STRING,!0),t.assert("options.channelId",n.channelId,t.AssertRules.CHANNEL_ID),t.assert("draft",r,t.AssertRules.STRING,!0),o="conversationType:"+n.conversationType+",targetId:"+n.targetId,jn.debug("set draft ->"+o),e.next=8,ka.imClient.context.saveConversationMessageDraft(n.conversationType,n.targetId,r,n.channelId);case 8:if((a=e.sent)!==t.ErrorCode.SUCCESS){e.next=11;break}return e.abrupt("return",{code:a});case 11:return jn.warn("set draft fail ->"+a+":"+Pa[a]+","+o),e.abrupt("return",{code:a,msg:Pa[a]});case 13:case"end":return e.stop()}}),e)}))),Va.apply(this,arguments)}function za(){return za=s(regeneratorRuntime.mark((function e(n){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.assert("options.conversationType",n.conversationType,t.isValidConversationType,!0),t.assert("options.targetId",n.targetId,t.AssertRules.STRING,!0),t.assert("options.channelId",n.channelId,t.AssertRules.CHANNEL_ID),r="conversationType:"+n.conversationType+",targetId:"+n.targetId,jn.debug("delete draft  ->"+r),e.next=7,ka.imClient.context.clearConversationMessageDraft(n.conversationType,n.targetId,n.channelId);case 7:if((o=e.sent)!==t.ErrorCode.SUCCESS){e.next=10;break}return e.abrupt("return",{code:o});case 10:return jn.warn("delete draft fail ->"+o+":"+Pa[o]+","+r),e.abrupt("return",{code:o,msg:Pa[o]});case 12:case"end":return e.stop()}}),e)}))),za.apply(this,arguments)}function Ka(){return Ka=s(regeneratorRuntime.mark((function e(n,r){var o,a,s,i,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(jn.debug("get total unread count -> ConversationType:"+JSON.stringify(r)+" includeMuted:"+n),t.assert("includeMuted",n,t.AssertRules.BOOLEAN,!1),t.assert("conversationTypes",r,t.AssertRules.ARRAY,!1),r){o=v(r);try{for(o.s();!(a=o.n()).done;)s=a.value,t.assert("conversationType",s,t.isValidConversationType)}catch(e){o.e(e)}finally{o.f()}}return e.next=6,ka.imClient.context.getTotalUnreadCount("",r,n);case 6:if(i=e.sent,u=i.code,c=i.data,u!==t.ErrorCode.SUCCESS){e.next=11;break}return e.abrupt("return",{code:u,data:c});case 11:return jn.warn("getTotalUnreadCount fail ->"+u+":"+Pa[u]),e.abrupt("return",{code:u,msg:Pa[u]});case 13:case"end":return e.stop()}}),e)}))),Ka.apply(this,arguments)}function Wa(){return Wa=s(regeneratorRuntime.mark((function e(n){var r,o,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.assert("options.conversationType",n.conversationType,t.isValidConversationType,!0),t.assert("options.targetId",n.targetId,t.AssertRules.STRING,!0),t.assert("options.channelId",n.channelId,t.AssertRules.CHANNEL_ID),e.next=5,ka.imClient.context.getUnreadCount(n.conversationType,n.targetId,n.channelId);case 5:if(r=e.sent,o=r.code,a=r.data,s="conversationType:"+n.conversationType+",targetId:"+n.targetId,jn.debug("get unreadCount ->"+s),o!==t.ErrorCode.SUCCESS){e.next=12;break}return e.abrupt("return",{code:o,data:a});case 12:return jn.warn("get unreadCount fail ->"+o+":"+Pa[o]+","+s),e.abrupt("return",{code:o,msg:Pa[o]});case 14:case"end":return e.stop()}}),e)}))),Wa.apply(this,arguments)}function Xa(){return Xa=s(regeneratorRuntime.mark((function e(n){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.assert("options.conversationType",n.conversationType,t.isValidConversationType,!0),t.assert("options.targetId",n.targetId,t.AssertRules.STRING,!0),t.assert("options.channelId",n.channelId,t.AssertRules.CHANNEL_ID),e.next=5,ka.imClient.context.clearUnreadCount(n.conversationType,n.targetId,n.channelId);case 5:if(r=e.sent,o="conversationType:"+n.conversationType+",targetId:"+n.targetId,jn.debug("clear unreadMsgNum ->"+o),r===t.ErrorCode.SUCCESS){e.next=11;break}return jn.warn("clear unreadMsgNum fail ->"+r+":"+Pa[r]+","+o),e.abrupt("return",{code:r,msg:Pa[r]});case 11:return e.abrupt("return",{code:r});case 12:case"end":return e.stop()}}),e)}))),Xa.apply(this,arguments)}function Ya(){return Ya=s(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ka.imClient.context.clearAllUnreadCount();case 2:return t=e.sent,e.abrupt("return",{code:t});case 4:case"end":return e.stop()}}),e)}))),Ya.apply(this,arguments)}function Ja(){return Ja=s(regeneratorRuntime.mark((function e(n,r){var o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.assert("options.conversationType",n.conversationType,t.isValidConversationType,!0),t.assert("options.targetId",n.targetId,t.AssertRules.STRING,!0),t.assert("options.channelId",n.channelId,t.AssertRules.CHANNEL_ID),t.assert("notificationStatus",r,(function(e){return 1===e||2===e}),!0),o="conversationType:"+n.conversationType+",targetId:"+n.targetId,jn.debug("set conversation status ->"+o),e.next=8,ka.imClient.context.setConversationStatus(n.conversationType,n.targetId,void 0,r,n.channelId);case 8:if((a=e.sent)===t.ErrorCode.SUCCESS){e.next=12;break}return jn.warn("set conversation status fail ->"+a+":"+Pa[a]+","+o),e.abrupt("return",{code:a,msg:Pa[a]});case 12:return e.abrupt("return",{code:a});case 13:case"end":return e.stop()}}),e)}))),Ja.apply(this,arguments)}function $a(){return $a=s(regeneratorRuntime.mark((function e(n){var r,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.assert("options.conversationType",n.conversationType,t.isValidConversationType,!0),t.assert("options.targetId",n.targetId,t.AssertRules.STRING,!0),t.assert("options.channelId",n.channelId,t.AssertRules.CHANNEL_ID),jn.info("getConversationNotificationStatus ->targetId:"+n.targetId+",conversationType:"+n.conversationType),e.next=6,ka.imClient.context.getConversationNotificationStatus(n.conversationType,n.targetId,n.channelId);case 6:if(r=e.sent,o=r.code,a=r.data,o!==t.ErrorCode.SUCCESS){e.next=13;break}return e.abrupt("return",{code:o,data:a});case 13:return jn.warn("getConversationNotificationStatus ->code:"+o+",targetId:"+n.targetId),e.abrupt("return",{code:o,msg:Pa[o]});case 15:case"end":return e.stop()}}),e)}))),$a.apply(this,arguments)}function Qa(){return Qa=s(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ka.imClient.context.getBlockConversationList();case 2:return t=e.sent,n=t.code,r=t.data,e.abrupt("return",{code:n,data:r});case 6:case"end":return e.stop()}}),e)}))),Qa.apply(this,arguments)}function Za(){return Za=s(regeneratorRuntime.mark((function e(n){var r,o,a,s=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!(s.length>1&&void 0!==s[1])||s[1],t.assert("options.type",n.conversationType,t.isValidConversationType,!0),t.assert("options.targetId",n.targetId,t.AssertRules.STRING,!0),t.assert("options.channelId",n.channelId,t.AssertRules.CHANNEL_ID),o="conversationType:"+n.conversationType+",targetId:"+n.targetId,jn.debug("set conversation status ->"+o),e.next=8,ka.imClient.context.setConversationStatus(n.conversationType,n.targetId,r,void 0,n.channelId);case 8:if((a=e.sent)===t.ErrorCode.SUCCESS){e.next=12;break}return jn.warn("set conversation status fail ->"+a+":"+Pa[a]+","+o),e.abrupt("return",{code:a,msg:Pa[a]});case 12:return e.abrupt("return",{code:a});case 13:case"end":return e.stop()}}),e)}))),Za.apply(this,arguments)}function es(){return es=s(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ka.imClient.context.getTopConversationList();case 2:return t=e.sent,n=t.code,r=t.data,e.abrupt("return",{code:n,data:r});case 6:case"end":return e.stop()}}),e)}))),es.apply(this,arguments)}function ts(){return(ts=s(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.assert("options.targetId",n.targetId,t.AssertRules.STRING,!0),t.assert("options.channelId",n.channelId,t.AssertRules.CHANNEL_ID),jn.debug("getUnreadMentionedCount"+n.targetId+",channelId:"+n.channelId),e.abrupt("return",ka.imClient.context.getUnreadMentionedCount(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ns(){return(ns=s(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return jn.debug("getAllUnreadMentionedCount"),e.abrupt("return",ka.imClient.context.getAllUnreadMentionedCount());case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rs(){return(rs=s(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ka.imClient.context.getAllConversationState());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var os={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},as=ge("span").classList,ss=as&&as.constructor&&as.constructor.prototype,is=ss===Object.prototype?void 0:ss,us=function(e,t){var n=[][e];return!!n&&O((function(){n.call(null,t||function(){return 1},1)}))},cs=Ln.forEach,ls=us("forEach")?[].forEach:function(e){return cs(this,e,arguments.length>1?arguments[1]:void 0)},fs=function(e){if(e&&e.forEach!==ls)try{qe(e,"forEach",ls)}catch(t){e.forEach=ls}};for(var ds in os)os[ds]&&fs(I[ds]&&I[ds].prototype);function ps(){return ps=s(regeneratorRuntime.mark((function e(){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ka.imClient.context.getUltraGroupList();case 2:if(n=e.sent,r=n.code,o=n.data,r!==t.ErrorCode.SUCCESS){e.next=7;break}return e.abrupt("return",{code:t.ErrorCode.SUCCESS,data:o});case 7:return jn.warn("get ultragroup  ->"+r+":"+Pa[r]),e.abrupt("return",{code:r,msg:Pa[r]});case 9:case"end":return e.stop()}}),e)}))),ps.apply(this,arguments)}function gs(){return gs=s(regeneratorRuntime.mark((function e(){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ka.imClient.context.getBlockUltraGroupList();case 2:if(n=e.sent,r=n.code,o=n.data,r!==t.ErrorCode.SUCCESS){e.next=7;break}return e.abrupt("return",{code:t.ErrorCode.SUCCESS,data:o});case 7:return jn.warn("get block ultragroup  ->"+r+":"+Pa[r]),e.abrupt("return",{code:r,msg:Pa[r]});case 9:case"end":return e.stop()}}),e)}))),gs.apply(this,arguments)}function hs(){return hs=s(regeneratorRuntime.mark((function e(n){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.assert("options.targetId",n.targetId,t.AssertRules.STRING,!0),t.assert("options.channelId",n.channelId,t.AssertRules.CHANNEL_ID),t.assert("options.conversationType",n.conversationType,t.isValidConversationType,!0),e.next=5,ka.imClient.context.sendUltraGroupTypingStatus(n);case 5:if(r=e.sent,(o=r.code)!==t.ErrorCode.SUCCESS){e.next=9;break}return e.abrupt("return",{code:t.ErrorCode.SUCCESS});case 9:return jn.warn("send ultraGroup OperateStatus   ->"+o+":"+Pa[o]),e.abrupt("return",{code:o,msg:Pa[o]});case 11:case"end":return e.stop()}}),e)}))),hs.apply(this,arguments)}function ms(){return ms=s(regeneratorRuntime.mark((function e(n,r){var o,a,s,i,u,c,l,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.assert("options.targetId",n.targetId,t.AssertRules.STRING,!0),t.assert("options.channelId",n.channelId,t.AssertRules.CHANNEL_ID),t.assert("options.conversationType",n.conversationType,t.isValidConversationType,!0),t.assert("msgs",r,t.AssertRules.ARRAY,!0),o=n.targetId,a=n.conversationType,s=n.channelId,i=[],r.forEach((function(e){var t=e.sendTime,n=e.messageUId;i.push({sendTime:t,messageUId:n,channelId:s})})),u={targetId:o,conversationType:a,messages:i},e.next=10,ka.imClient.context.getUltraGroupMessageListByMessageUId(u);case 10:if(c=e.sent,l=c.code,f=c.data,l!==t.ErrorCode.SUCCESS){e.next=15;break}return e.abrupt("return",{code:t.ErrorCode.SUCCESS,data:f});case 15:return jn.warn("get UltraGroup MessageList by messageUId   ->"+l+":"+Pa[l]),e.abrupt("return",{code:l,msg:Pa[l]});case 17:case"end":return e.stop()}}),e)}))),ms.apply(this,arguments)}function vs(){return vs=s(regeneratorRuntime.mark((function e(n,r){var o,a,s,i,u,c,l,f,d,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.assert("expansion",n,t.AssertRules.OBJECT,!0),t.assert("message",r,t.AssertRules.OBJECT,!0),o=r.conversationType,a=r.targetId,s=r.messageUId,i=r.sentTime,u=r.canIncludeExpansion,c=r.channelId,l="conversationType:"+o+",targetId:"+a+",channelId:"+c+",messageUId:"+s,jn.debug("update expansion for ultragroup message  ->"+l),f={targetId:a,channelId:c,conversationType:o,sendTime:i,canIncludeExpansion:u,messageUId:s,expansion:n},e.next=8,ka.imClient.context.expandUltraMessage(f);case 8:if(d=e.sent,(p=d.code)!==t.ErrorCode.SUCCESS){e.next=12;break}return e.abrupt("return",{code:t.ErrorCode.SUCCESS});case 12:return jn.warn("update expansion for ultragroup message   ->"+p+":"+Pa[p]),e.abrupt("return",{code:p,msg:Pa[p]});case 14:case"end":return e.stop()}}),e)}))),vs.apply(this,arguments)}function ys(){return ys=s(regeneratorRuntime.mark((function e(n,r){var o,a,s,i,u,c,l,f,d,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.assert("expansion",n,t.AssertRules.ARRAY,!0),t.assert("message",r,t.AssertRules.OBJECT,!0),o=r.conversationType,a=r.targetId,s=r.messageUId,i=r.sentTime,u=r.canIncludeExpansion,c=r.channelId,l="conversationType:"+o+",targetId:"+a+",channelId:"+c+",messageUId:"+s,jn.debug("remove expansion for ultragroup message  ->"+l),f={targetId:a,channelId:c,conversationType:o,sendTime:i,canIncludeExpansion:u,messageUId:s,keys:n},e.next=8,ka.imClient.context.expandUltraMessage(f);case 8:if(d=e.sent,(p=d.code)!==t.ErrorCode.SUCCESS){e.next=12;break}return e.abrupt("return",{code:t.ErrorCode.SUCCESS});case 12:return jn.warn("remove expansion for ultraGroup message   ->"+p+":"+Pa[p]),e.abrupt("return",{code:p,msg:Pa[p]});case 14:case"end":return e.stop()}}),e)}))),ys.apply(this,arguments)}function Cs(){return Cs=s(regeneratorRuntime.mark((function e(n){var r,o,a,s,i,u,c,l,f,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.assert("message",n,t.AssertRules.OBJECT,!0),r=n.conversationType,o=n.targetId,a=n.messageUId,s=n.sentTime,i=n.canIncludeExpansion,u=n.channelId,c="conversationType:"+r+",targetId:"+o+",channelId:"+u+",messageUId:"+a,jn.debug("remove all expansion for ultraGroup message ->"+c),l={targetId:o,channelId:u,conversationType:r,sendTime:s,canIncludeExpansion:i,messageUId:a,removeAll:!0},e.next=7,ka.imClient.context.expandUltraMessage(l);case 7:if(f=e.sent,(d=f.code)!==t.ErrorCode.SUCCESS){e.next=11;break}return e.abrupt("return",{code:t.ErrorCode.SUCCESS});case 11:return jn.warn("remove all expansion for ultraGroup message   ->"+d+":"+Pa[d]),e.abrupt("return",{code:d,msg:Pa[d]});case 13:case"end":return e.stop()}}),e)}))),Cs.apply(this,arguments)}function Rs(){return Rs=s(regeneratorRuntime.mark((function e(n,r){var o,a,s,i,u,c,l,f,d,p,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.assert("content",n,t.AssertRules.OBJECT,!0),t.assert("message",r,t.AssertRules.OBJECT,!0),o=r.conversationType,a=r.targetId,s=r.messageUId,i=r.senderUserId,u=r.sentTime,c=r.canIncludeExpansion,l=r.channelId,f="conversationType:"+o+",targetId:"+a+",channelId:"+l+",messageUId:"+s,jn.debug("update ultragroup message expansion ->"+f),d={targetId:a,channelId:l,conversationType:o,fromUserId:i,sendTime:u,canIncludeExpansion:c,messageUId:s,content:n},e.next=8,ka.imClient.context.modifyMessage(d);case 8:if(p=e.sent,(g=p.code)!==t.ErrorCode.SUCCESS){e.next=12;break}return e.abrupt("return",{code:t.ErrorCode.SUCCESS});case 12:return jn.warn("modify ultraGroup message   ->"+g+":"+Pa[g]),e.abrupt("return",{code:g,msg:Pa[g]});case 14:case"end":return e.stop()}}),e)}))),Rs.apply(this,arguments)}function Ss(){return Ss=s(regeneratorRuntime.mark((function e(n){var r,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.assert("cotargetIdntent",n,t.AssertRules.STRING,!0),jn.debug("get UltraGroup unreadMentionedCount by targetId:"+n),e.next=4,ka.imClient.context.getUltraGroupUnreadMentionedCountByTargetId(n);case 4:if(r=e.sent,o=r.code,a=r.data,o!==t.ErrorCode.SUCCESS){e.next=9;break}return e.abrupt("return",{code:t.ErrorCode.SUCCESS,data:a});case 9:return jn.warn("get UltraGroup unreadMentionedCount by targetId error ->"+o+":"+Pa[o]),e.abrupt("return",{code:o,msg:Pa[o]});case 11:case"end":return e.stop()}}),e)}))),Ss.apply(this,arguments)}fs(is);var Es,Is=Object.keys||function(e){return zt(e,Kt)},Ts=le&&!me?Object.defineProperties:function(e,t){Ce(e);for(var n,r=Ot(t),o=Is(t),a=o.length,s=0;a>s;)Fe.f(e,n=o[s++],r[n]);return e},bs={f:Ts},xs=Qe("IE_PROTO"),ws=function(){},As=function(e){return"<script>"+e+"</"+"script>"},Os=function(e){e.write(As("")),e.close();var t=e.parentWindow.Object;return e=null,t},Ns=function(){try{Es=new ActiveXObject("htmlfile")}catch(e){}var e,t;Ns="undefined"!=typeof document?document.domain&&Es?Os(Es):((t=ge("iframe")).style.display="none",wr.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(As("document.F=Object")),e.close(),e.F):Os(Es);for(var n=Kt.length;n--;)delete Ns.prototype[Kt[n]];return Ns()};Ze[xs]=!0;var Us=Object.create||function(e,t){var n;return null!==e?(ws.prototype=Ce(e),n=new ws,ws.prototype=null,n[xs]=e):n=Ns(),void 0===t?n:bs.f(n,t)},Ms=ie("unscopables"),ks=Array.prototype;null==ks[Ms]&&Fe.f(ks,Ms,{configurable:!0,value:Us(null)});var _s,Ps,Ls,Gs=function(e){ks[Ms][e]=!0},Ds=!O((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),js=Qe("IE_PROTO"),Hs=I.Object,Fs=Hs.prototype,Bs=Ds?Hs.getPrototypeOf:function(e){var t=j(e);if(F(t,js))return t[js];var n=t.constructor;return K(n)&&t instanceof n?n.prototype:t instanceof Hs?Fs:null},qs=ie("iterator"),Vs=!1;[].keys&&("next"in(Ls=[].keys())?(Ps=Bs(Bs(Ls)))!==Object.prototype&&(_s=Ps):Vs=!0);var zs=null==_s||O((function(){var e={};return _s[qs].call(e)!==e}));zs&&(_s={}),K(_s[qs])||gt(_s,qs,(function(){return this}));var Ks={IteratorPrototype:_s,BUGGY_SAFARI_ITERATORS:Vs},Ws=Ks.IteratorPrototype,Xs=function(){return this},Ys=function(e,t,n,r){var o=t+" Iterator";return e.prototype=Us(Ws,{next:Be(+!r,n)}),Wn(e,o,!1),Qn[o]=Xs,e},Js=pt.PROPER,$s=pt.CONFIGURABLE,Qs=Ks.IteratorPrototype,Zs=Ks.BUGGY_SAFARI_ITERATORS,ei=ie("iterator"),ti="keys",ni="values",ri="entries",oi=function(){return this},ai=function(e,t,n,r,o,a,s){Ys(n,t,r);var i,u,c,l=function(e){if(e===o&&h)return h;if(!Zs&&e in p)return p[e];switch(e){case ti:case ni:case ri:return function(){return new n(this,e)}}return function(){return new n(this)}},f=t+" Iterator",d=!1,p=e.prototype,g=p[ei]||p["@@iterator"]||o&&p[o],h=!Zs&&g||l(o),m="Array"==t&&p.entries||g;if(m&&(i=Bs(m.call(new e)))!==Object.prototype&&i.next&&(Bs(i)!==Qs&&(Vn?Vn(i,Qs):K(i[ei])||gt(i,ei,oi)),Wn(i,f,!0)),Js&&o==ni&&g&&g.name!==ni&&($s?qe(p,"name",ni):(d=!0,h=function(){return Se(g,this)})),o)if(u={values:l(ni),keys:a?h:l(ti),entries:l(ri)},s)for(c in u)(Zs||d||!(c in p))&&gt(p,c,u[c]);else un({target:t,proto:!0,forced:Zs||d},u);return p[ei]!==h&&gt(p,ei,h,{name:o}),Qn[t]=h,u},si=Fe.f,ii="Array Iterator",ui=ct.set,ci=ct.getterFor(ii),li=ai(Array,"Array",(function(e,t){ui(this,{type:ii,target:Ot(e),index:0,kind:t})}),(function(){var e=ci(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),fi=Qn.Arguments=Qn.Array;if(Gs("keys"),Gs("values"),Gs("entries"),le&&"values"!==fi.name)try{si(fi,"name",{value:"values"})}catch(e){}var di=ie("iterator"),pi=ie("toStringTag"),gi=li.values,hi=function(e,t){if(e){if(e[di]!==gi)try{qe(e,di,gi)}catch(t){e[di]=gi}if(e[pi]||qe(e,pi,t),os[t])for(var n in li)if(e[n]!==li[n])try{qe(e,n,li[n])}catch(t){e[n]=li[n]}}};for(var mi in os)hi(I[mi]&&I[mi].prototype,mi);hi(is,"DOMTokenList");var vi=Bt.includes;un({target:"Array",proto:!0},{includes:function(e){return vi(this,e,arguments.length>1?arguments[1]:void 0)}}),Gs("includes");var yi=Object.assign,Ci=Object.defineProperty,Ri=P([].concat),Si=!yi||O((function(){if(le&&1!==yi({b:1},yi(Ci({},"a",{enumerable:!0,get:function(){Ci(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=yi({},e)[n]||Is(yi({},t)).join("")!=r}))?function(e,t){for(var n=j(e),r=arguments.length,o=1,a=Yt.f,s=bt.f;r>o;)for(var i,u=At(arguments[o++]),c=a?Ri(Is(u),a(u)):Is(u),l=c.length,f=0;l>f;)i=c[f++],le&&!Se(s,u,i)||(n[i]=u[i]);return n}:yi;un({target:"Object",stat:!0,forced:Object.assign!==Si},{assign:Si});var Ei=I.String,Ii=function(e){if("Symbol"===St(e))throw TypeError("Cannot convert a Symbol value to a string");return Ei(e)},Ti=function(){var e=Ce(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t},bi=I.RegExp,xi=O((function(){var e=bi("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),wi=xi||O((function(){return!bi("a","y").sticky})),Ai={BROKEN_CARET:xi||O((function(){var e=bi("^r","gy");return e.lastIndex=2,null!=e.exec("str")})),MISSED_STICKY:wi,UNSUPPORTED_Y:xi},Oi=I.RegExp,Ni=O((function(){var e=Oi(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)})),Ui=I.RegExp,Mi=O((function(){var e=Ui("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")})),ki=ct.get,_i=A("native-string-replace",String.prototype.replace),Pi=RegExp.prototype.exec,Li=Pi,Gi=P("".charAt),Di=P("".indexOf),ji=P("".replace),Hi=P("".slice),Fi=function(){var e=/a/,t=/b*/g;return Se(Pi,e,"a"),Se(Pi,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),Bi=Ai.BROKEN_CARET,qi=void 0!==/()??/.exec("")[1];(Fi||qi||Bi||Ni||Mi)&&(Li=function(e){var t,n,r,o,a,s,i,u=this,c=ki(u),l=Ii(e),f=c.raw;if(f)return f.lastIndex=u.lastIndex,t=Se(Li,f,l),u.lastIndex=f.lastIndex,t;var d=c.groups,p=Bi&&u.sticky,g=Se(Ti,u),h=u.source,m=0,v=l;if(p&&(g=ji(g,"y",""),-1===Di(g,"g")&&(g+="g"),v=Hi(l,u.lastIndex),u.lastIndex>0&&(!u.multiline||u.multiline&&"\n"!==Gi(l,u.lastIndex-1))&&(h="(?: "+h+")",v=" "+v,m++),n=new RegExp("^(?:"+h+")",g)),qi&&(n=new RegExp("^"+h+"$(?!\\s)",g)),Fi&&(r=u.lastIndex),o=Se(Pi,p?n:u,v),p?o?(o.input=Hi(o.input,m),o[0]=Hi(o[0],m),o.index=u.lastIndex,u.lastIndex+=o[0].length):u.lastIndex=0:Fi&&o&&(u.lastIndex=u.global?o.index+o[0].length:r),qi&&o&&o.length>1&&Se(_i,o[0],n,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(o[a]=void 0)})),o&&d)for(o.groups=s=Us(null),a=0;a<d.length;a++)s[(i=d[a])[0]]=o[i[1]];return o});var Vi=Li;un({target:"RegExp",proto:!0,forced:/./.exec!==Vi},{exec:Vi});var zi=function(e){t.assert("options.key",e.key,t.AssertRules.STRING,!0),t.assert("options.value",e.value,t.AssertRules.STRING,!0),t.assert("options.isAutoDelete",e.isAutoDelete,t.AssertRules.BOOLEAN),t.assert("options.isSendNotification",e.isSendNotification,t.AssertRules.BOOLEAN),t.assert("options.notificationExtra",e.notificationExtra,t.AssertRules.STRING)},Ki=function(e){e.entries.forEach((function(e){t.assert("entry.key",e.key,t.AssertRules.STRING,!0),t.assert("entry.value",e.value,t.AssertRules.STRING,!0)})),t.assert("options.isAutoDelete",e.isAutoDelete,t.AssertRules.BOOLEAN),t.assert("options.notificationExtra",e.notificationExtra,t.AssertRules.STRING)},Wi=function(e){t.assert("options.key",e.key,t.AssertRules.STRING,!0),t.assert("options.isSendNotification",e.isSendNotification,t.AssertRules.BOOLEAN),t.assert("options.notificationExtra",e.notificationExtra,t.AssertRules.STRING)},Xi=function(e){e.entries.forEach((function(e){t.assert("key",e,t.AssertRules.STRING,!0)})),t.assert("options.notificationExtra",e.notificationExtra,t.AssertRules.STRING)};function Yi(){return Yi=s(regeneratorRuntime.mark((function e(n,r){var o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.assert("options.count",r.count,t.AssertRules.NUMBER,!0),o="id:"+n,jn.debug("join chatroom ->"+o),e.next=5,ka.imClient.context.joinChatroom(n,r.count);case 5:if((a=e.sent)===t.ErrorCode.SUCCESS){e.next=9;break}return jn.warn("join chatroom fail ->code+:"+Pa[a]+","+o),e.abrupt("return",{code:a,msg:Pa[a]});case 9:return e.abrupt("return",{code:a});case 10:case"end":return e.stop()}}),e)}))),Yi.apply(this,arguments)}function Ji(){return Ji=s(regeneratorRuntime.mark((function e(n,r){var o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.assert("options.count",r.count,t.AssertRules.NUMBER,!0),o="id:"+n,jn.debug("join exist chatroom ->"+o),e.next=5,ka.imClient.context.joinExistChatroom(n,r.count);case 5:if((a=e.sent)===t.ErrorCode.SUCCESS){e.next=9;break}return jn.warn("join exist chatroom fail ->code:"+Pa[a]+","+o),e.abrupt("return",{code:a,msg:Pa[a]});case 9:return e.abrupt("return",{code:a});case 10:case"end":return e.stop()}}),e)}))),Ji.apply(this,arguments)}function $i(){return $i=s(regeneratorRuntime.mark((function e(n){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="id:"+n,jn.debug("quit chatroom ->"+r),e.next=4,ka.imClient.context.quitChatroom(n);case 4:if((o=e.sent)===t.ErrorCode.SUCCESS){e.next=8;break}return jn.warn("quit chatroom fail ->code+:"+Pa[o]+","+r),e.abrupt("return",{code:o,msg:Pa[o]});case 8:return e.abrupt("return",{code:o});case 9:case"end":return e.stop()}}),e)}))),$i.apply(this,arguments)}function Qi(){return Qi=s(regeneratorRuntime.mark((function e(n,r){var o,a,s,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.assert("options.count",r.count,t.AssertRules.NUMBER),t.assert("options.order",r.order,(function(e){return[0,1,2].includes(e)})),o="id:"+n,jn.debug("get chatroom info ->"+o),e.next=6,ka.imClient.context.getChatroomInfo(n,r.count,r.order);case 6:if(a=e.sent,s=a.code,i=a.data,s!==t.ErrorCode.SUCCESS||!i){e.next=11;break}return e.abrupt("return",{code:s,data:i});case 11:return jn.warn("get chatroom info fail ->code+:"+Pa[s]+","+o),e.abrupt("return",{code:s,msg:Pa[s]});case 13:case"end":return e.stop()}}),e)}))),Qi.apply(this,arguments)}function Zi(){return Zi=s(regeneratorRuntime.mark((function e(n,r){var o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.assert("targetId",n,t.AssertRules.STRING,!0),zi(r),o="id:"+n,jn.debug("set chatroom entry->"+o),e.next=6,ka.imClient.context.setChatroomEntry(n,r);case 6:if((a=e.sent)===t.ErrorCode.SUCCESS){e.next=10;break}return jn.warn("set chatroom entry fail ->code+:"+Pa[a]+","+o),e.abrupt("return",{code:a,msg:Pa[a]});case 10:return e.abrupt("return",{code:a});case 11:case"end":return e.stop()}}),e)}))),Zi.apply(this,arguments)}function eu(){return eu=s(regeneratorRuntime.mark((function e(n,r){var o,a,s,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.assert("targetId",n,t.AssertRules.STRING,!0),Ki(r),!(r.entries.length>10)){e.next=4;break}return e.abrupt("return",_a.CHATROOM_KV_STORE_OUT_LIMIT);case 4:return o="id:"+n,jn.debug("set chatroom entry->"+o),e.next=8,ka.imClient.context.setChatroomEntries(n,r);case 8:if(a=e.sent,s=a.code,i=a.data,s===t.ErrorCode.SUCCESS){e.next=14;break}return jn.warn("set chatroom entry fail ->code+:"+Pa[s]+","+o),e.abrupt("return",{code:s,msg:Pa[s],data:i});case 14:return e.abrupt("return",{code:s});case 15:case"end":return e.stop()}}),e)}))),eu.apply(this,arguments)}function tu(){return tu=s(regeneratorRuntime.mark((function e(n,r){var o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.assert("targetId",n,t.AssertRules.STRING,!0),zi(r),o="id:"+n,jn.debug("force set chatroom entry ->"+o),e.next=6,ka.imClient.context.forceSetChatroomEntry(n,r);case 6:if((a=e.sent)===t.ErrorCode.SUCCESS){e.next=10;break}return jn.warn("force set chatroom entry fail ->code+:"+Pa[a]+","+o),e.abrupt("return",{code:a,msg:Pa[a]});case 10:return e.abrupt("return",{code:a});case 11:case"end":return e.stop()}}),e)}))),tu.apply(this,arguments)}function nu(){return nu=s(regeneratorRuntime.mark((function e(n,r){var o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.assert("targetId",n,t.AssertRules.STRING,!0),Wi(r),o="id:"+n,jn.debug("remove chatroom entry->"+o),e.next=6,ka.imClient.context.removeChatroomEntry(n,r);case 6:if((a=e.sent)===t.ErrorCode.SUCCESS){e.next=10;break}return jn.warn("remove chatroom entry fail ->code+:"+Pa[a]+","+o),e.abrupt("return",{code:a,msg:Pa[a]});case 10:return e.abrupt("return",{code:a});case 11:case"end":return e.stop()}}),e)}))),nu.apply(this,arguments)}function ru(){return ru=s(regeneratorRuntime.mark((function e(n,r){var o,a,s,i,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.assert("targetId",n,t.AssertRules.STRING,!0),Xi(r),o="id:"+n,jn.debug("remove chatroom entry->"+o),(a=Object.assign({},r)).entries=r.entries.map((function(e){return{key:e}})),e.next=8,ka.imClient.context.removeChatroomEntries(n,a);case 8:if(s=e.sent,i=s.code,u=s.data,i===t.ErrorCode.SUCCESS){e.next=14;break}return jn.warn("remove chatroom entry fail ->code+:"+Pa[i]+","+o),e.abrupt("return",{code:i,msg:Pa[i],data:u});case 14:return e.abrupt("return",{code:i});case 15:case"end":return e.stop()}}),e)}))),ru.apply(this,arguments)}function ou(){return ou=s(regeneratorRuntime.mark((function e(n,r){var o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.assert("targetId",n,t.AssertRules.STRING,!0),Wi(r),o="id:"+n,jn.debug("force remove chatroom entry ->"+o),e.next=6,ka.imClient.context.forceRemoveChatroomEntry(n,r);case 6:if((a=e.sent)===t.ErrorCode.SUCCESS){e.next=10;break}return jn.warn("force remove chatroom entry fail ->code+:"+Pa[a]+","+o),e.abrupt("return",{code:a,msg:Pa[a]});case 10:return e.abrupt("return",{code:a});case 11:case"end":return e.stop()}}),e)}))),ou.apply(this,arguments)}function au(){return au=s(regeneratorRuntime.mark((function e(n,r){var o,a,s,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.assert("key",r,(function(e){return t.isString(e)&&/[\w+=-]+/.test(e)&&e.length<=128}),!0),o="id:"+n,jn.debug("get chatroom entry->"+o),e.next=5,ka.imClient.context.getChatroomEntry(n,r);case 5:if(a=e.sent,s=a.code,i=a.data,s!==t.ErrorCode.SUCCESS||!i){e.next=10;break}return e.abrupt("return",{code:s,data:i});case 10:return jn.warn("get chatroom entry fail ->code+:"+Pa[s]+","+o),e.abrupt("return",{code:s,msg:Pa[s]});case 12:case"end":return e.stop()}}),e)}))),au.apply(this,arguments)}function su(){return su=s(regeneratorRuntime.mark((function e(n){var r,o,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="id:"+n,jn.debug("get all chatroom entries->"+r),e.next=4,ka.imClient.context.getAllChatroomEntries(n);case 4:if(o=e.sent,a=o.code,s=o.data,a!==t.ErrorCode.SUCCESS||!s){e.next=9;break}return e.abrupt("return",{code:a,data:s});case 9:return jn.warn("get all chatroom entries fail ->code+:"+Pa[a]+","+r),e.abrupt("return",{code:a,msg:Pa[a]});case 11:case"end":return e.stop()}}),e)}))),su.apply(this,arguments)}function iu(){return iu=s(regeneratorRuntime.mark((function e(n,r){var o,a,s,i,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.assert("options.timestamp",r.timestamp,t.AssertRules.NUMBER),t.assert("options.count",r.count,t.AssertRules.NUMBER),t.assert("options.order",r.order,(function(e){return 0===e||1===e})),o="id:"+n,jn.debug("get chatroom history message->"+o),e.next=7,ka.imClient.context.getChatRoomHistoryMessages(n,r.count,r.order,r.timestamp);case 7:if(a=e.sent,s=a.code,i=a.data,s!==t.ErrorCode.SUCCESS||!i){e.next=13;break}return u=i.list.map((function(e){return Na(e)})),e.abrupt("return",{code:s,data:{list:u,hasMore:!!i.hasMore}});case 13:return jn.warn("get chatroom history message fail ->code+:"+Pa[s]+","+o),e.abrupt("return",{code:s,msg:Pa[s]});case 15:case"end":return e.stop()}}),e)}))),iu.apply(this,arguments)}function uu(){return uu=s(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ka.imClient.context.bindRTCRoomForChatroom(t);case 2:return n=e.sent,e.abrupt("return",{code:n,msg:Pa[n]});case 4:case"end":return e.stop()}}),e)}))),uu.apply(this,arguments)}var cu=pt.EXISTS,lu=Fe.f,fu=Function.prototype,du=P(fu.toString),pu=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,gu=P(pu.exec);le&&!cu&&lu(fu,"name",{configurable:!0,get:function(){try{return gu(pu,du(this))[1]}catch(e){return""}}});var hu=O((function(){Is(1)}));un({target:"Object",stat:!0,forced:hu},{keys:function(e){return Is(j(e))}});var mu=c((function e(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];i(this,e),this.messageType=t,this.content=n,this.isPersited=r,this.isCounted=o}));function vu(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=function(r){return new mu(e,r,t,n)};return r}var yu=vu("RC:ImgMsg"),Cu=vu("RC:HQVCMsg"),Ru=vu("RC:SightMsg"),Su=vu("RC:TxtMsg"),Eu=vu("RC:CombineMsg"),Iu=vu("RC:FileMsg"),Tu=vu("RC:GIFMsg"),bu=vu("RC:VcMsg"),xu=vu("RC:LBSMsg"),wu=vu("RC:ReferenceMsg"),Au=vu("RC:ImgTextMsg"),Ou=Ln.find,Nu="find",Uu=!0;Nu in[]&&Array(1).find((function(){Uu=!1})),un({target:"Array",proto:!0,forced:Uu},{find:function(e){return Ou(this,e,arguments.length>1?arguments[1]:void 0)}}),Gs(Nu);var Mu=P("".charAt),ku=P("".charCodeAt),_u=P("".slice),Pu=function(e){return function(t,n){var r,o,a=Ii(G(t)),s=_t(n),i=a.length;return s<0||s>=i?e?"":void 0:(r=ku(a,s))<55296||r>56319||s+1===i||(o=ku(a,s+1))<56320||o>57343?e?Mu(a,s):r:e?_u(a,s,s+2):o-56320+(r-55296<<10)+65536}},Lu={codeAt:Pu(!1),charAt:Pu(!0)},Gu=Lu.charAt,Du="String Iterator",ju=ct.set,Hu=ct.getterFor(Du);ai(String,"String",(function(e){ju(this,{type:Du,string:Ii(e),index:0})}),(function(){var e,t=Hu(this),n=t.string,r=t.index;return r>=n.length?{value:void 0,done:!0}:(e=Gu(n,r),t.index+=e.length,{value:e,done:!1})}));var Fu=ie("iterator"),Bu=!O((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,r){t.delete("b"),n+=r+e})),!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[Fu]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host})),qu=function(e,t,n,r){try{return r?t(Ce(n)[0],n[1]):t(n)}catch(t){sr(e,"throw",t)}},Vu=I.Array,zu=function(e){var t=j(e),n=Cn(this),r=arguments.length,o=r>1?arguments[1]:void 0,a=void 0!==o;a&&(o=kn(o,r>2?arguments[2]:void 0));var s,i,u,c,l,f,d=rr(t),p=0;if(!d||this==Vu&&tr(d))for(s=Ht(t),i=n?new this(s):Vu(s);s>p;p++)f=a?o(t[p],p):t[p],ln(i,p,f);else for(l=(c=ar(t,d)).next,i=n?new this:[];!(u=Se(l,c)).done;p++)f=a?qu(c,o,[u.value,p],!0):u.value,ln(i,p,f);return i.length=p,i},Ku=I.Array,Wu=Math.max,Xu=function(e,t,n){for(var r=Ht(e),o=Gt(t,r),a=Gt(void 0===n?r:n,r),s=Ku(Wu(a-o,0)),i=0;o<a;o++,i++)ln(s,i,e[o]);return s.length=i,s},Yu=2147483647,Ju=/[^\0-\u007E]/,$u=/[.\u3002\uFF0E\uFF61]/g,Qu="Overflow: input needs wider integers to process",Zu=I.RangeError,ec=P($u.exec),tc=Math.floor,nc=String.fromCharCode,rc=P("".charCodeAt),oc=P([].join),ac=P([].push),sc=P("".replace),ic=P("".split),uc=P("".toLowerCase),cc=function(e){return e+22+75*(e<26)},lc=function(e,t,n){var r=0;for(e=n?tc(e/700):e>>1,e+=tc(e/t);e>455;)e=tc(e/35),r+=36;return tc(r+36*e/(e+38))},fc=function(e){var t=[];e=function(e){for(var t=[],n=0,r=e.length;n<r;){var o=rc(e,n++);if(o>=55296&&o<=56319&&n<r){var a=rc(e,n++);56320==(64512&a)?ac(t,((1023&o)<<10)+(1023&a)+65536):(ac(t,o),n--)}else ac(t,o)}return t}(e);var n,r,o=e.length,a=128,s=0,i=72;for(n=0;n<e.length;n++)(r=e[n])<128&&ac(t,nc(r));var u=t.length,c=u;for(u&&ac(t,"-");c<o;){var l=Yu;for(n=0;n<e.length;n++)(r=e[n])>=a&&r<l&&(l=r);var f=c+1;if(l-a>tc((Yu-s)/f))throw Zu(Qu);for(s+=(l-a)*f,a=l,n=0;n<e.length;n++){if((r=e[n])<a&&++s>Yu)throw Zu(Qu);if(r==a){for(var d=s,p=36;;){var g=p<=i?1:p>=i+26?26:p-i;if(d<g)break;var h=d-g,m=36-g;ac(t,nc(cc(g+h%m))),d=tc(h/m),p+=36}ac(t,nc(cc(d))),i=lc(s,f,c==u),s=0,c++}}s++,a++}return oc(t,"")},dc=Math.floor,pc=function(e,t){var n=e.length,r=dc(n/2);return n<8?gc(e,t):hc(e,pc(Xu(e,0,r),t),pc(Xu(e,r),t),t)},gc=function(e,t){for(var n,r,o=e.length,a=1;a<o;){for(r=a,n=e[a];r&&t(e[r-1],n)>0;)e[r]=e[--r];r!==a++&&(e[r]=n)}return e},hc=function(e,t,n,r){for(var o=t.length,a=n.length,s=0,i=0;s<o||i<a;)e[s+i]=s<o&&i<a?r(t[s],n[i])<=0?t[s++]:n[i++]:s<o?t[s++]:n[i++];return e},mc=pc,vc=ie("iterator"),yc="URLSearchParams",Cc="URLSearchParamsIterator",Rc=ct.set,Sc=ct.getterFor(yc),Ec=ct.getterFor(Cc),Ic=X("fetch"),Tc=X("Request"),bc=X("Headers"),xc=Tc&&Tc.prototype,wc=bc&&bc.prototype,Ac=I.RegExp,Oc=I.TypeError,Nc=I.decodeURIComponent,Uc=I.encodeURIComponent,Mc=P("".charAt),kc=P([].join),_c=P([].push),Pc=P("".replace),Lc=P([].shift),Gc=P([].splice),Dc=P("".split),jc=P("".slice),Hc=/\+/g,Fc=Array(4),Bc=function(e){return Fc[e-1]||(Fc[e-1]=Ac("((?:%[\\da-f]{2}){"+e+"})","gi"))},qc=function(e){try{return Nc(e)}catch(t){return e}},Vc=function(e){var t=Pc(e,Hc," "),n=4;try{return Nc(t)}catch(e){for(;n;)t=Pc(t,Bc(n--),qc);return t}},zc=/[!'()~]|%20/g,Kc={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Wc=function(e){return Kc[e]},Xc=function(e){return Pc(Uc(e),zc,Wc)},Yc=Ys((function(e,t){Rc(this,{type:Cc,iterator:ar(Sc(e).entries),kind:t})}),"Iterator",(function(){var e=Ec(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),n}),!0),Jc=function(e){this.entries=[],this.url=null,void 0!==e&&(fe(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===Mc(e,0)?jc(e,1):e:Ii(e)))};Jc.prototype={type:yc,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,n,r,o,a,s,i,u=rr(e);if(u)for(n=(t=ar(e,u)).next;!(r=Se(n,t)).done;){if(a=(o=ar(Ce(r.value))).next,(s=Se(a,o)).done||(i=Se(a,o)).done||!Se(a,o).done)throw Oc("Expected sequence with length 2");_c(this.entries,{key:Ii(s.value),value:Ii(i.value)})}else for(var c in e)F(e,c)&&_c(this.entries,{key:c,value:Ii(e[c])})},parseQuery:function(e){if(e)for(var t,n,r=Dc(e,"&"),o=0;o<r.length;)(t=r[o++]).length&&(n=Dc(t,"="),_c(this.entries,{key:Vc(Lc(n)),value:Vc(kc(n,"="))}))},serialize:function(){for(var e,t=this.entries,n=[],r=0;r<t.length;)e=t[r++],_c(n,Xc(e.key)+"="+Xc(e.value));return kc(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var $c=function(){$n(this,Qc);var e=arguments.length>0?arguments[0]:void 0;Rc(this,new Jc(e))},Qc=$c.prototype;if(Fn(Qc,{append:function(e,t){Nr(arguments.length,2);var n=Sc(this);_c(n.entries,{key:Ii(e),value:Ii(t)}),n.updateURL()},delete:function(e){Nr(arguments.length,1);for(var t=Sc(this),n=t.entries,r=Ii(e),o=0;o<n.length;)n[o].key===r?Gc(n,o,1):o++;t.updateURL()},get:function(e){Nr(arguments.length,1);for(var t=Sc(this).entries,n=Ii(e),r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){Nr(arguments.length,1);for(var t=Sc(this).entries,n=Ii(e),r=[],o=0;o<t.length;o++)t[o].key===n&&_c(r,t[o].value);return r},has:function(e){Nr(arguments.length,1);for(var t=Sc(this).entries,n=Ii(e),r=0;r<t.length;)if(t[r++].key===n)return!0;return!1},set:function(e,t){Nr(arguments.length,1);for(var n,r=Sc(this),o=r.entries,a=!1,s=Ii(e),i=Ii(t),u=0;u<o.length;u++)(n=o[u]).key===s&&(a?Gc(o,u--,1):(a=!0,n.value=i));a||_c(o,{key:s,value:i}),r.updateURL()},sort:function(){var e=Sc(this);mc(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,n=Sc(this).entries,r=kn(e,arguments.length>1?arguments[1]:void 0),o=0;o<n.length;)r((t=n[o++]).value,t.key,this)},keys:function(){return new Yc(this,"keys")},values:function(){return new Yc(this,"values")},entries:function(){return new Yc(this,"entries")}},{enumerable:!0}),gt(Qc,vc,Qc.entries,{name:"entries"}),gt(Qc,"toString",(function(){return Sc(this).serialize()}),{enumerable:!0}),Wn($c,yc),un({global:!0,forced:!Bu},{URLSearchParams:$c}),!Bu&&K(bc)){var Zc=P(wc.has),el=P(wc.set),tl=function(e){if(fe(e)){var t,n=e.body;if(St(n)===yc)return t=e.headers?new bc(e.headers):new bc,Zc(t,"content-type")||el(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),Us(e,{body:Be(0,Ii(n)),headers:Be(0,t)})}return e};if(K(Ic)&&un({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return Ic(e,arguments.length>1?tl(arguments[1]):{})}}),K(Tc)){var nl=function(e){return $n(this,xc),new Tc(e,arguments.length>1?tl(arguments[1]):{})};xc.constructor=nl,nl.prototype=xc,un({global:!0,forced:!0},{Request:nl})}}var rl,ol={URLSearchParams:$c,getState:Sc},al=bs.f,sl=Lu.codeAt,il=ct.set,ul=ct.getterFor("URL"),cl=ol.URLSearchParams,ll=ol.getState,fl=I.URL,dl=I.TypeError,pl=I.parseInt,gl=Math.floor,hl=Math.pow,ml=P("".charAt),vl=P(/./.exec),yl=P([].join),Cl=P(1..toString),Rl=P([].pop),Sl=P([].push),El=P("".replace),Il=P([].shift),Tl=P("".split),bl=P("".slice),xl=P("".toLowerCase),wl=P([].unshift),Al="Invalid scheme",Ol="Invalid host",Nl="Invalid port",Ul=/[a-z]/i,Ml=/[\d+-.a-z]/i,kl=/\d/,_l=/^0x/i,Pl=/^[0-7]+$/,Ll=/^\d+$/,Gl=/^[\da-f]+$/i,Dl=/[\0\t\n\r #%/:<>?@[\\\]^|]/,jl=/[\0\t\n\r #/:<>?@[\\\]^|]/,Hl=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,Fl=/[\t\n\r]/g,Bl=function(e){var t,n,r,o;if("number"==typeof e){for(t=[],n=0;n<4;n++)wl(t,e%256),e=gl(e/256);return yl(t,".")}if("object"==typeof e){for(t="",r=function(e){for(var t=null,n=1,r=null,o=0,a=0;a<8;a++)0!==e[a]?(o>n&&(t=r,n=o),r=null,o=0):(null===r&&(r=a),++o);return o>n&&(t=r,n=o),t}(e),n=0;n<8;n++)o&&0===e[n]||(o&&(o=!1),r===n?(t+=n?":":"::",o=!0):(t+=Cl(e[n],16),n<7&&(t+=":")));return"["+t+"]"}return e},ql={},Vl=Si({},ql,{" ":1,'"':1,"<":1,">":1,"`":1}),zl=Si({},Vl,{"#":1,"?":1,"{":1,"}":1}),Kl=Si({},zl,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Wl=function(e,t){var n=sl(e,0);return n>32&&n<127&&!F(t,e)?e:encodeURIComponent(e)},Xl={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Yl=function(e,t){var n;return 2==e.length&&vl(Ul,ml(e,0))&&(":"==(n=ml(e,1))||!t&&"|"==n)},Jl=function(e){var t;return e.length>1&&Yl(bl(e,0,2))&&(2==e.length||"/"===(t=ml(e,2))||"\\"===t||"?"===t||"#"===t)},$l=function(e){return"."===e||"%2e"===xl(e)},Ql={},Zl={},ef={},tf={},nf={},rf={},of={},af={},sf={},uf={},cf={},lf={},ff={},df={},pf={},gf={},hf={},mf={},vf={},yf={},Cf={},Rf=function(e,t,n){var r,o,a,s=Ii(e);if(t){if(o=this.parse(s))throw dl(o);this.searchParams=null}else{if(void 0!==n&&(r=new Rf(n,!0)),o=this.parse(s,null,r))throw dl(o);(a=ll(new cl)).bindURL(this),this.searchParams=a}};Rf.prototype={type:"URL",parse:function(e,t,n){var r,o,a,s,i,u=this,c=t||Ql,l=0,f="",d=!1,p=!1,g=!1;for(e=Ii(e),t||(u.scheme="",u.username="",u.password="",u.host=null,u.port=null,u.path=[],u.query=null,u.fragment=null,u.cannotBeABaseURL=!1,e=El(e,Hl,"")),e=El(e,Fl,""),r=zu(e);l<=r.length;){switch(o=r[l],c){case Ql:if(!o||!vl(Ul,o)){if(t)return Al;c=ef;continue}f+=xl(o),c=Zl;break;case Zl:if(o&&(vl(Ml,o)||"+"==o||"-"==o||"."==o))f+=xl(o);else{if(":"!=o){if(t)return Al;f="",c=ef,l=0;continue}if(t&&(u.isSpecial()!=F(Xl,f)||"file"==f&&(u.includesCredentials()||null!==u.port)||"file"==u.scheme&&!u.host))return;if(u.scheme=f,t)return void(u.isSpecial()&&Xl[u.scheme]==u.port&&(u.port=null));f="","file"==u.scheme?c=df:u.isSpecial()&&n&&n.scheme==u.scheme?c=tf:u.isSpecial()?c=af:"/"==r[l+1]?(c=nf,l++):(u.cannotBeABaseURL=!0,Sl(u.path,""),c=vf)}break;case ef:if(!n||n.cannotBeABaseURL&&"#"!=o)return Al;if(n.cannotBeABaseURL&&"#"==o){u.scheme=n.scheme,u.path=Xu(n.path),u.query=n.query,u.fragment="",u.cannotBeABaseURL=!0,c=Cf;break}c="file"==n.scheme?df:rf;continue;case tf:if("/"!=o||"/"!=r[l+1]){c=rf;continue}c=sf,l++;break;case nf:if("/"==o){c=uf;break}c=mf;continue;case rf:if(u.scheme=n.scheme,o==rl)u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,u.path=Xu(n.path),u.query=n.query;else if("/"==o||"\\"==o&&u.isSpecial())c=of;else if("?"==o)u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,u.path=Xu(n.path),u.query="",c=yf;else{if("#"!=o){u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,u.path=Xu(n.path),u.path.length--,c=mf;continue}u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,u.path=Xu(n.path),u.query=n.query,u.fragment="",c=Cf}break;case of:if(!u.isSpecial()||"/"!=o&&"\\"!=o){if("/"!=o){u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,c=mf;continue}c=uf}else c=sf;break;case af:if(c=sf,"/"!=o||"/"!=ml(f,l+1))continue;l++;break;case sf:if("/"!=o&&"\\"!=o){c=uf;continue}break;case uf:if("@"==o){d&&(f="%40"+f),d=!0,a=zu(f);for(var h=0;h<a.length;h++){var m=a[h];if(":"!=m||g){var v=Wl(m,Kl);g?u.password+=v:u.username+=v}else g=!0}f=""}else if(o==rl||"/"==o||"?"==o||"#"==o||"\\"==o&&u.isSpecial()){if(d&&""==f)return"Invalid authority";l-=zu(f).length+1,f="",c=cf}else f+=o;break;case cf:case lf:if(t&&"file"==u.scheme){c=gf;continue}if(":"!=o||p){if(o==rl||"/"==o||"?"==o||"#"==o||"\\"==o&&u.isSpecial()){if(u.isSpecial()&&""==f)return Ol;if(t&&""==f&&(u.includesCredentials()||null!==u.port))return;if(s=u.parseHost(f))return s;if(f="",c=hf,t)return;continue}"["==o?p=!0:"]"==o&&(p=!1),f+=o}else{if(""==f)return Ol;if(s=u.parseHost(f))return s;if(f="",c=ff,t==lf)return}break;case ff:if(!vl(kl,o)){if(o==rl||"/"==o||"?"==o||"#"==o||"\\"==o&&u.isSpecial()||t){if(""!=f){var y=pl(f,10);if(y>65535)return Nl;u.port=u.isSpecial()&&y===Xl[u.scheme]?null:y,f=""}if(t)return;c=hf;continue}return Nl}f+=o;break;case df:if(u.scheme="file","/"==o||"\\"==o)c=pf;else{if(!n||"file"!=n.scheme){c=mf;continue}if(o==rl)u.host=n.host,u.path=Xu(n.path),u.query=n.query;else if("?"==o)u.host=n.host,u.path=Xu(n.path),u.query="",c=yf;else{if("#"!=o){Jl(yl(Xu(r,l),""))||(u.host=n.host,u.path=Xu(n.path),u.shortenPath()),c=mf;continue}u.host=n.host,u.path=Xu(n.path),u.query=n.query,u.fragment="",c=Cf}}break;case pf:if("/"==o||"\\"==o){c=gf;break}n&&"file"==n.scheme&&!Jl(yl(Xu(r,l),""))&&(Yl(n.path[0],!0)?Sl(u.path,n.path[0]):u.host=n.host),c=mf;continue;case gf:if(o==rl||"/"==o||"\\"==o||"?"==o||"#"==o){if(!t&&Yl(f))c=mf;else if(""==f){if(u.host="",t)return;c=hf}else{if(s=u.parseHost(f))return s;if("localhost"==u.host&&(u.host=""),t)return;f="",c=hf}continue}f+=o;break;case hf:if(u.isSpecial()){if(c=mf,"/"!=o&&"\\"!=o)continue}else if(t||"?"!=o)if(t||"#"!=o){if(o!=rl&&(c=mf,"/"!=o))continue}else u.fragment="",c=Cf;else u.query="",c=yf;break;case mf:if(o==rl||"/"==o||"\\"==o&&u.isSpecial()||!t&&("?"==o||"#"==o)){if(".."===(i=xl(i=f))||"%2e."===i||".%2e"===i||"%2e%2e"===i?(u.shortenPath(),"/"==o||"\\"==o&&u.isSpecial()||Sl(u.path,"")):$l(f)?"/"==o||"\\"==o&&u.isSpecial()||Sl(u.path,""):("file"==u.scheme&&!u.path.length&&Yl(f)&&(u.host&&(u.host=""),f=ml(f,0)+":"),Sl(u.path,f)),f="","file"==u.scheme&&(o==rl||"?"==o||"#"==o))for(;u.path.length>1&&""===u.path[0];)Il(u.path);"?"==o?(u.query="",c=yf):"#"==o&&(u.fragment="",c=Cf)}else f+=Wl(o,zl);break;case vf:"?"==o?(u.query="",c=yf):"#"==o?(u.fragment="",c=Cf):o!=rl&&(u.path[0]+=Wl(o,ql));break;case yf:t||"#"!=o?o!=rl&&("'"==o&&u.isSpecial()?u.query+="%27":u.query+="#"==o?"%23":Wl(o,ql)):(u.fragment="",c=Cf);break;case Cf:o!=rl&&(u.fragment+=Wl(o,Vl))}l++}},parseHost:function(e){var t,n,r;if("["==ml(e,0)){if("]"!=ml(e,e.length-1))return Ol;if(t=function(e){var t,n,r,o,a,s,i,u=[0,0,0,0,0,0,0,0],c=0,l=null,f=0,d=function(){return ml(e,f)};if(":"==d()){if(":"!=ml(e,1))return;f+=2,l=++c}for(;d();){if(8==c)return;if(":"!=d()){for(t=n=0;n<4&&vl(Gl,d());)t=16*t+pl(d(),16),f++,n++;if("."==d()){if(0==n)return;if(f-=n,c>6)return;for(r=0;d();){if(o=null,r>0){if(!("."==d()&&r<4))return;f++}if(!vl(kl,d()))return;for(;vl(kl,d());){if(a=pl(d(),10),null===o)o=a;else{if(0==o)return;o=10*o+a}if(o>255)return;f++}u[c]=256*u[c]+o,2!=++r&&4!=r||c++}if(4!=r)return;break}if(":"==d()){if(f++,!d())return}else if(d())return;u[c++]=t}else{if(null!==l)return;f++,l=++c}}if(null!==l)for(s=c-l,c=7;0!=c&&s>0;)i=u[c],u[c--]=u[l+s-1],u[l+--s]=i;else if(8!=c)return;return u}(bl(e,1,-1)),!t)return Ol;this.host=t}else if(this.isSpecial()){if(e=function(e){var t,n,r=[],o=ic(sc(uc(e),$u,"."),".");for(t=0;t<o.length;t++)n=o[t],ac(r,ec(Ju,n)?"xn--"+fc(n):n);return oc(r,".")}(e),vl(Dl,e))return Ol;if(t=function(e){var t,n,r,o,a,s,i,u=Tl(e,".");if(u.length&&""==u[u.length-1]&&u.length--,(t=u.length)>4)return e;for(n=[],r=0;r<t;r++){if(""==(o=u[r]))return e;if(a=10,o.length>1&&"0"==ml(o,0)&&(a=vl(_l,o)?16:8,o=bl(o,8==a?1:2)),""===o)s=0;else{if(!vl(10==a?Ll:8==a?Pl:Gl,o))return e;s=pl(o,a)}Sl(n,s)}for(r=0;r<t;r++)if(s=n[r],r==t-1){if(s>=hl(256,5-t))return null}else if(s>255)return null;for(i=Rl(n),r=0;r<n.length;r++)i+=n[r]*hl(256,3-r);return i}(e),null===t)return Ol;this.host=t}else{if(vl(jl,e))return Ol;for(t="",n=zu(e),r=0;r<n.length;r++)t+=Wl(n[r],ql);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return F(Xl,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"==this.scheme&&1==t&&Yl(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,n=e.username,r=e.password,o=e.host,a=e.port,s=e.path,i=e.query,u=e.fragment,c=t+":";return null!==o?(c+="//",e.includesCredentials()&&(c+=n+(r?":"+r:"")+"@"),c+=Bl(o),null!==a&&(c+=":"+a)):"file"==t&&(c+="//"),c+=e.cannotBeABaseURL?s[0]:s.length?"/"+yl(s,"/"):"",null!==i&&(c+="?"+i),null!==u&&(c+="#"+u),c},setHref:function(e){var t=this.parse(e);if(t)throw dl(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"==e)try{return new Sf(e.path[0]).origin}catch(e){return"null"}return"file"!=e&&this.isSpecial()?e+"://"+Bl(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(Ii(e)+":",Ql)},getUsername:function(){return this.username},setUsername:function(e){var t=zu(Ii(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<t.length;n++)this.username+=Wl(t[n],Kl)}},getPassword:function(){return this.password},setPassword:function(e){var t=zu(Ii(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<t.length;n++)this.password+=Wl(t[n],Kl)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?Bl(e):Bl(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,cf)},getHostname:function(){var e=this.host;return null===e?"":Bl(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,lf)},getPort:function(){var e=this.port;return null===e?"":Ii(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""==(e=Ii(e))?this.port=null:this.parse(e,ff))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+yl(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,hf))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""==(e=Ii(e))?this.query=null:("?"==ml(e,0)&&(e=bl(e,1)),this.query="",this.parse(e,yf)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){""!=(e=Ii(e))?("#"==ml(e,0)&&(e=bl(e,1)),this.fragment="",this.parse(e,Cf)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var Sf=function(e){var t=$n(this,Ef),n=Nr(arguments.length,1)>1?arguments[1]:void 0,r=il(t,new Rf(e,!1,n));le||(t.href=r.serialize(),t.origin=r.getOrigin(),t.protocol=r.getProtocol(),t.username=r.getUsername(),t.password=r.getPassword(),t.host=r.getHost(),t.hostname=r.getHostname(),t.port=r.getPort(),t.pathname=r.getPathname(),t.search=r.getSearch(),t.searchParams=r.getSearchParams(),t.hash=r.getHash())},Ef=Sf.prototype,If=function(e,t){return{get:function(){return ul(this)[e]()},set:t&&function(e){return ul(this)[t](e)},configurable:!0,enumerable:!0}};if(le&&al(Ef,{href:If("serialize","setHref"),origin:If("getOrigin"),protocol:If("getProtocol","setProtocol"),username:If("getUsername","setUsername"),password:If("getPassword","setPassword"),host:If("getHost","setHost"),hostname:If("getHostname","setHostname"),port:If("getPort","setPort"),pathname:If("getPathname","setPathname"),search:If("getSearch","setSearch"),searchParams:If("getSearchParams"),hash:If("getHash","setHash")}),gt(Ef,"toJSON",(function(){return ul(this).serialize()}),{enumerable:!0}),gt(Ef,"toString",(function(){return ul(this).serialize()}),{enumerable:!0}),fl){var Tf=fl.createObjectURL,bf=fl.revokeObjectURL;Tf&&gt(Sf,"createObjectURL",kn(Tf,fl)),bf&&gt(Sf,"revokeObjectURL",kn(bf,fl))}Wn(Sf,"URL"),un({global:!0,forced:!Bu,sham:!le},{URL:Sf});var xf=function(e,t,n){var r,o;return Vn&&K(r=t.constructor)&&r!==n&&fe(o=r.prototype)&&o!==n.prototype&&Vn(e,o),e},wf=ie("match"),Af=function(e){var t;return fe(e)&&(void 0!==(t=e[wf])?!!t:"RegExp"==vt(e))},Of=Fe.f,Nf=Xt.f,Uf=ct.enforce,Mf=ie("match"),kf=I.RegExp,_f=kf.prototype,Pf=I.SyntaxError,Lf=P(Ti),Gf=P(_f.exec),Df=P("".charAt),jf=P("".replace),Hf=P("".indexOf),Ff=P("".slice),Bf=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,qf=/a/g,Vf=/a/g,zf=new kf(qf)!==qf,Kf=Ai.MISSED_STICKY,Wf=Ai.UNSUPPORTED_Y,Xf=le&&(!zf||Kf||Ni||Mi||O((function(){return Vf[Mf]=!1,kf(qf)!=qf||kf(Vf)==Vf||"/a/i"!=kf(qf,"i")})));if(an("RegExp",Xf)){for(var Yf=function(e,t){var n,r,o,a,s,i,u=Ee(_f,this),c=Af(e),l=void 0===t,f=[],d=e;if(!u&&c&&l&&e.constructor===Yf)return e;if((c||Ee(_f,e))&&(e=e.source,l&&(t="flags"in d?d.flags:Lf(d))),e=void 0===e?"":Ii(e),t=void 0===t?"":Ii(t),d=e,Ni&&"dotAll"in qf&&(r=!!t&&Hf(t,"s")>-1)&&(t=jf(t,/s/g,"")),n=t,Kf&&"sticky"in qf&&(o=!!t&&Hf(t,"y")>-1)&&Wf&&(t=jf(t,/y/g,"")),Mi&&(a=function(e){for(var t,n=e.length,r=0,o="",a=[],s={},i=!1,u=!1,c=0,l="";r<=n;r++){if("\\"===(t=Df(e,r)))t+=Df(e,++r);else if("]"===t)i=!1;else if(!i)switch(!0){case"["===t:i=!0;break;case"("===t:Gf(Bf,Ff(e,r+1))&&(r+=2,u=!0),o+=t,c++;continue;case">"===t&&u:if(""===l||F(s,l))throw new Pf("Invalid capture group name");s[l]=!0,a[a.length]=[l,c],u=!1,l="";continue}u?l+=t:o+=t}return[o,a]}(e),e=a[0],f=a[1]),s=xf(kf(e,t),u?this:_f,Yf),(r||o||f.length)&&(i=Uf(s),r&&(i.dotAll=!0,i.raw=Yf(function(e){for(var t,n=e.length,r=0,o="",a=!1;r<=n;r++)"\\"!==(t=Df(e,r))?a||"."!==t?("["===t?a=!0:"]"===t&&(a=!1),o+=t):o+="[\\s\\S]":o+=t+Df(e,++r);return o}(e),n)),o&&(i.sticky=!0),f.length&&(i.groups=f)),e!==d)try{qe(s,"source",""===d?"(?:)":d)}catch(e){}return s},Jf=function(e){e in Yf||Of(Yf,e,{configurable:!0,get:function(){return kf[e]},set:function(t){kf[e]=t}})},$f=Nf(kf),Qf=0;$f.length>Qf;)Jf($f[Qf++]);_f.constructor=Yf,Yf.prototype=_f,gt(I,"RegExp",Yf)}Yn("RegExp");var Zf=pt.PROPER,ed="toString",td=RegExp.prototype,nd=td.toString,rd=P(Ti),od=O((function(){return"/a/b"!=nd.call({source:"a",flags:"b"})})),ad=Zf&&nd.name!=ed;(od||ad)&&gt(RegExp.prototype,ed,(function(){var e=Ce(this),t=Ii(e.source),n=e.flags;return"/"+t+"/"+Ii(void 0===n&&Ee(td,e)&&!("flags"in td)?rd(e):n)}),{unsafe:!0});var sd=ie("species"),id=RegExp.prototype,ud=function(e,t,n,r){var o=ie(e),a=!O((function(){var t={};return t[o]=function(){return 7},7!=""[e](t)})),s=a&&!O((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[sd]=function(){return n},n.flags="",n[o]=/./[o]),n.exec=function(){return t=!0,null},n[o](""),!t}));if(!a||!s||n){var i=P(/./[o]),u=t(o,""[e],(function(e,t,n,r,o){var s=P(e),u=t.exec;return u===Vi||u===id.exec?a&&!o?{done:!0,value:i(t,n,r)}:{done:!0,value:s(n,t,r)}:{done:!1}}));gt(String.prototype,e,u[0]),gt(id,o,u[1])}r&&qe(id[o],"sham",!0)},cd=Lu.charAt,ld=function(e,t,n){return t+(n?cd(e,t).length:1)},fd=Math.floor,dd=P("".charAt),pd=P("".replace),gd=P("".slice),hd=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,md=/\$([$&'`]|\d{1,2})/g,vd=function(e,t,n,r,o,a){var s=n+e.length,i=r.length,u=md;return void 0!==o&&(o=j(o),u=hd),pd(a,u,(function(a,u){var c;switch(dd(u,0)){case"$":return"$";case"&":return e;case"`":return gd(t,0,n);case"'":return gd(t,s);case"<":c=o[gd(u,1,-1)];break;default:var l=+u;if(0===l)return a;if(l>i){var f=fd(l/10);return 0===f?a:f<=i?void 0===r[f-1]?dd(u,1):r[f-1]+dd(u,1):a}c=r[l-1]}return void 0===c?"":c}))},yd=I.TypeError,Cd=function(e,t){var n=e.exec;if(K(n)){var r=Se(n,e,t);return null!==r&&Ce(r),r}if("RegExp"===vt(e))return Se(Vi,e,t);throw yd("RegExp#exec called on incompatible receiver")},Rd=ie("replace"),Sd=Math.max,Ed=Math.min,Id=P([].concat),Td=P([].push),bd=P("".indexOf),xd=P("".slice),wd="$0"==="a".replace(/./,"$0"),Ad=!!/./[Rd]&&""===/./[Rd]("a","$0");ud("replace",(function(e,t,n){var r=Ad?"$":"$0";return[function(e,n){var r=G(this),o=null==e?void 0:Oe(e,Rd);return o?Se(o,e,r,n):Se(t,Ii(r),e,n)},function(e,o){var a=Ce(this),s=Ii(e);if("string"==typeof o&&-1===bd(o,r)&&-1===bd(o,"$<")){var i=n(t,a,s,o);if(i.done)return i.value}var u=K(o);u||(o=Ii(o));var c=a.global;if(c){var l=a.unicode;a.lastIndex=0}for(var f=[];;){var d=Cd(a,s);if(null===d)break;if(Td(f,d),!c)break;""===Ii(d[0])&&(a.lastIndex=ld(s,jt(a.lastIndex),l))}for(var p,g="",h=0,m=0;m<f.length;m++){for(var v=Ii((d=f[m])[0]),y=Sd(Ed(_t(d.index),s.length),0),C=[],R=1;R<d.length;R++)Td(C,void 0===(p=d[R])?p:String(p));var S=d.groups;if(u){var E=Id([v],C,y,s);void 0!==S&&Td(E,S);var I=Ii(xr(o,void 0,E))}else I=vd(v,s,y,C,S,o);y>=h&&(g+=xd(s,h,y)+I,h=y+v.length)}return g+xd(s,h)}]}),!!O((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!wd||Ad);var Od=Tn("slice"),Nd=ie("species"),Ud=I.Array,Md=Math.max;un({target:"Array",proto:!0,forced:!Od},{slice:function(e,t){var n,r,o,a=Ot(this),s=Ht(a),i=Gt(e,s),u=Gt(void 0===t?s:t,s);if(cn(a)&&(n=a.constructor,(Cn(n)&&(n===Ud||cn(n.prototype))||fe(n)&&null===(n=n[Nd]))&&(n=void 0),n===Ud||void 0===n))return Ar(a,i,u);for(r=new(void 0===n?Ud:n)(Md(u-i,0)),o=0;i<u;i++,o++)i in a&&ln(r,o,a[i]);return r.length=o,r}});var kd=P([].join),_d=At!=Object,Pd=us("join",",");un({target:"Array",proto:!0,forced:_d||!Pd},{join:function(e){return kd(Ot(this),void 0===e?",":e)}});var Ld=I.TypeError,Gd=function(e){if(Af(e))throw Ld("The method doesn't accept regular expressions");return e},Dd=ie("match"),jd=P("".indexOf);un({target:"String",proto:!0,forced:!function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[Dd]=!1,"/./"[e](t)}catch(e){}}return!1}("includes")},{includes:function(e){return!!~jd(Ii(G(this)),Ii(Gd(e)),arguments.length>1?arguments[1]:void 0)}}),ud("match",(function(e,t,n){return[function(t){var n=G(this),r=null==t?void 0:Oe(t,e);return r?Se(r,t,n):new RegExp(t)[e](Ii(n))},function(e){var r=Ce(this),o=Ii(e),a=n(t,r,o);if(a.done)return a.value;if(!r.global)return Cd(r,o);var s=r.unicode;r.lastIndex=0;for(var i,u=[],c=0;null!==(i=Cd(r,o));){var l=Ii(i[0]);u[c]=l,""===l&&(r.lastIndex=ld(o,jt(r.lastIndex),s)),c++}return 0===c?null:u}]}));var Hd=Xt.f,Fd="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Bd={f:function(e){return Fd&&"Window"==vt(e)?function(e){try{return Hd(e)}catch(e){return Xu(Fd)}}(e):Hd(Ot(e))}},qd=O((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}})),Vd=Object.isExtensible,zd=O((function(){Vd(1)}))||qd?function(e){return!!fe(e)&&((!qd||"ArrayBuffer"!=vt(e))&&(!Vd||Vd(e)))}:Vd,Kd=!O((function(){return Object.isExtensible(Object.preventExtensions({}))})),Wd=C((function(e){var t=Fe.f,n=!1,r=z("meta"),o=0,a=function(e){t(e,r,{value:{objectID:"O"+o++,weakData:{}}})},s=e.exports={enable:function(){s.enable=function(){},n=!0;var e=Xt.f,t=P([].splice),o={};o[r]=1,e(o).length&&(Xt.f=function(n){for(var o=e(n),a=0,s=o.length;a<s;a++)if(o[a]===r){t(o,a,1);break}return o},un({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:Bd.f}))},fastKey:function(e,t){if(!fe(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!F(e,r)){if(!zd(e))return"F";if(!t)return"E";a(e)}return e[r].objectID},getWeakData:function(e,t){if(!F(e,r)){if(!zd(e))return!0;if(!t)return!1;a(e)}return e[r].weakData},onFreeze:function(e){return Kd&&n&&zd(e)&&!F(e,r)&&a(e),e}};Ze[r]=!0})),Xd=Fe.f,Yd=Wd.fastKey,Jd=ct.set,$d=ct.getterFor,Qd={getConstructor:function(e,t,n,r){var o=e((function(e,o){$n(e,a),Jd(e,{type:t,index:Us(null),first:void 0,last:void 0,size:0}),le||(e.size=0),null!=o&&lr(o,e[r],{that:e,AS_ENTRIES:n})})),a=o.prototype,s=$d(t),i=function(e,t,n){var r,o,a=s(e),i=u(e,t);return i?i.value=n:(a.last=i={index:o=Yd(t,!0),key:t,value:n,previous:r=a.last,next:void 0,removed:!1},a.first||(a.first=i),r&&(r.next=i),le?a.size++:e.size++,"F"!==o&&(a.index[o]=i)),e},u=function(e,t){var n,r=s(e),o=Yd(t);if("F"!==o)return r.index[o];for(n=r.first;n;n=n.next)if(n.key==t)return n};return Fn(a,{clear:function(){for(var e=s(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,le?e.size=0:this.size=0},delete:function(e){var t=this,n=s(t),r=u(t,e);if(r){var o=r.next,a=r.previous;delete n.index[r.index],r.removed=!0,a&&(a.next=o),o&&(o.previous=a),n.first==r&&(n.first=o),n.last==r&&(n.last=a),le?n.size--:t.size--}return!!r},forEach:function(e){for(var t,n=s(this),r=kn(e,arguments.length>1?arguments[1]:void 0);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!u(this,e)}}),Fn(a,n?{get:function(e){var t=u(this,e);return t&&t.value},set:function(e,t){return i(this,0===e?0:e,t)}}:{add:function(e){return i(this,e=0===e?0:e,e)}}),le&&Xd(a,"size",{get:function(){return s(this).size}}),o},setStrong:function(e,t,n){var r=t+" Iterator",o=$d(t),a=$d(r);ai(e,t,(function(e,t){Jd(this,{type:r,target:e,state:o(e),kind:t,last:void 0})}),(function(){for(var e=a(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),Yn(t)}};!function(e,t,n){var r=-1!==e.indexOf("Map"),o=-1!==e.indexOf("Weak"),a=r?"set":"add",s=I[e],i=s&&s.prototype,u=s,c={},l=function(e){var t=P(i[e]);gt(i,e,"add"==e?function(e){return t(this,0===e?0:e),this}:"delete"==e?function(e){return!(o&&!fe(e))&&t(this,0===e?0:e)}:"get"==e?function(e){return o&&!fe(e)?void 0:t(this,0===e?0:e)}:"has"==e?function(e){return!(o&&!fe(e))&&t(this,0===e?0:e)}:function(e,n){return t(this,0===e?0:e,n),this})};if(an(e,!K(s)||!(o||i.forEach&&!O((function(){(new s).entries().next()})))))u=n.getConstructor(t,e,r,a),Wd.enable();else if(an(e,!0)){var f=new u,d=f[a](o?{}:-0,1)!=f,p=O((function(){f.has(1)})),g=Cr((function(e){new s(e)})),h=!o&&O((function(){for(var e=new s,t=5;t--;)e[a](t,t);return!e.has(-0)}));g||((u=t((function(e,t){$n(e,i);var n=xf(new s,e,u);return null!=t&&lr(t,n[a],{that:n,AS_ENTRIES:r}),n}))).prototype=i,i.constructor=u),(p||h)&&(l("delete"),l("has"),r&&l("get")),(h||d)&&l(a),o&&i.clear&&delete i.clear}c[e]=u,un({global:!0,forced:u!=s},c),Wn(u,e),o||n.setStrong(u,e,r)}("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),Qd);var Zd=Y.match(/firefox\/(\d+)/i),ep=!!Zd&&+Zd[1],tp=/MSIE|Trident/.test(Y),np=Y.match(/AppleWebKit\/(\d+)\./),rp=!!np&&+np[1],op=[],ap=P(op.sort),sp=P(op.push),ip=O((function(){op.sort(void 0)})),up=O((function(){op.sort(null)})),cp=us("sort"),lp=!O((function(){if(ee)return ee<70;if(!(ep&&ep>3)){if(tp)return!0;if(rp)return rp<603;var e,t,n,r,o="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)op.push({k:t+r,v:n})}for(op.sort((function(e,t){return t.v-e.v})),r=0;r<op.length;r++)t=op[r].k.charAt(0),o.charAt(o.length-1)!==t&&(o+=t);return"DGBEFHACIJK"!==o}}));un({target:"Array",proto:!0,forced:ip||!up||!cp||!lp},{sort:function(e){void 0!==e&&Ae(e);var t=j(this);if(lp)return void 0===e?ap(t):ap(t,e);var n,r,o=[],a=Ht(t);for(r=0;r<a;r++)r in t&&sp(o,t[r]);for(mc(o,function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:Ii(t)>Ii(n)?1:-1}}(e)),n=o.length,r=0;r<n;)t[r]=o[r++];for(;r<a;)delete t[r++];return t}});var fp=!Cr((function(e){Array.from(e)}));un({target:"Array",stat:!0,forced:fp},{from:zu});var dp,pp,gp=P(1..valueOf),hp=P("".replace),mp="[\t\n\v\f\r                　\u2028\u2029\ufeff]",vp=RegExp("^"+mp+mp+"*"),yp=RegExp(mp+mp+"*$"),Cp=function(e){return function(t){var n=Ii(G(t));return 1&e&&(n=hp(n,vp,"")),2&e&&(n=hp(n,yp,"")),n}},Rp={start:Cp(1),end:Cp(2),trim:Cp(3)},Sp=Xt.f,Ep=Ut.f,Ip=Fe.f,Tp=Rp.trim,bp="Number",xp=I.Number,wp=xp.prototype,Ap=I.TypeError,Op=P("".slice),Np=P("".charCodeAt),Up=function(e){var t=ke(e,"number");return"bigint"==typeof t?t:Mp(t)},Mp=function(e){var t,n,r,o,a,s,i,u,c=ke(e,"number");if(Te(c))throw Ap("Cannot convert a Symbol value to a number");if("string"==typeof c&&c.length>2)if(c=Tp(c),43===(t=Np(c,0))||45===t){if(88===(n=Np(c,2))||120===n)return NaN}else if(48===t){switch(Np(c,1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+c}for(s=(a=Op(c,2)).length,i=0;i<s;i++)if((u=Np(a,i))<48||u>o)return NaN;return parseInt(a,r)}return+c};if(an(bp,!xp(" 0o1")||!xp("0b1")||xp("+0x1"))){for(var kp,_p=function(e){var t=arguments.length<1?0:xp(Up(e)),n=this;return Ee(wp,n)&&O((function(){gp(n)}))?xf(Object(t),n,_p):t},Pp=le?Sp(xp):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),Lp=0;Pp.length>Lp;Lp++)F(xp,kp=Pp[Lp])&&!F(_p,kp)&&Ip(_p,kp,Ep(xp,kp));_p.prototype=wp,wp.constructor=_p,gt(I,bp,_p)}var Gp={qiniu:function(e,n,r,o){var a,s=Hp+n.uploadHost.qiniu;a=Bp()+Dp[0][1]||s,Dp.shift();var i=new XMLHttpRequest;i.upload&&n.support_options&&(i.upload.onprogress=function(e){r.onProgress(e.loaded,e.total)});i.onreadystatechange=function(){if(4===i.readyState){var a=i.responseText||"{}";(a=JSON.parse(a)).filename=n.uniqueValue,a.uploadMethod=t.UploadMethod?t.UploadMethod.QINIU:"",200===i.status?r.onCompleted(a):Dp.length?Gp[Dp[0][0]](e,n,r,o):r.onError("upload fail")}},n.isChunk&&(a=function(e,t){var n="";Fp(t,(function(e,t){"token"!==e&&(n+=(n?"&":"")+encodeURIComponent(e)+"="+encodeURIComponent(t))})),n&&(e+=(e.indexOf("?")>0?"&":"?")+n);return e}(a+="/mkblk/"+e.size,n.multi_parmas));i.open(n.method,a,!0),r.onOpen(i),n.stream&&i.setRequestHeader("authorization","UpToken "+n.multi_parmas.token);Fp(n.headers,(function(e,t){i.setRequestHeader(e,t)})),i.send(e)},baidu:function(e,t,n,r){if(console.log(r,t),r.size>jp)throw new Error("the file size is over 5GB!");var o=t||{};t=t||pp;var a=new XMLHttpRequest,s=Bp();if(!o.uploadHost.bos&&!o.bosUploadPath)return;var i=s+Dp[0][1]+o.bosUploadPath;Dp.shift();var u=o.bosHeader||{},c={filename:t.uniqueValue||r.uniqueName,name:r.name,downloadUrl:i,isBosRes:!0};a.upload&&t.support_options&&(a.upload.onprogress=function(e){n.onProgress(e.loaded,e.total,!0)});a.onreadystatechange=function(){if(4===a.readyState){var o=a.responseText||"{}";if((o=JSON.parse(o)).filename=t.uniqueValue,200===a.status){n.onCompleted(c,!0)}else Dp.length?Gp[Dp[0][0]](e,t,n,r):n.onError("upload fail")}},a.open(t.method,i,!0),a.setRequestHeader("authorization",u.bosToken),a.setRequestHeader("x-bce-date",u.bosDate),a.send(r)},aliyun:function(e,n,r,o){if(o.size>jp)throw new Error("the file size is over 5GB!");var a=new FormData;a.set("file",e.get("file")),a.set("key",e.get("key")),a.set("token",e.get("token"));var s=Dp[0][1];Dp.shift(),e=e||dp,n=(n=n||{})||pp;var i=new XMLHttpRequest,u=Bp()+n.ossBucketName+"."+s;i.upload&&n.support_options&&(i.upload.onprogress=function(e){r.onProgress(e.loaded,e.total)});i.onreadystatechange=function(){if(4===i.readyState){var e=i.responseText||"{}";(e=JSON.parse(e)).name=n.uniqueValue,e.filename=n.uploadFileName,e.uploadMethod=t.UploadMethod?t.UploadMethod.ALI:"",200===i.status?r.onCompleted(e):Dp.length?Gp[Dp[0][0]](a,n,r,o):r.onError("upload fail")}},i.open(n.method,u,!0),console.log("ali:url",u);var c=n.aliHeader||{};e.set("OSSAccessKeyId",c.osskeyId),e.set("policy",c.ossPolicy),e.set("Signature",c.ossSign),e.set("success_action_status",200),e.delete("key"),e.append("key",n.uploadFileName),e.delete("file"),e.append("file",o),i.send(e)},s3:function(e,n,r,o){var a=new FormData,s=new XMLHttpRequest,i=Bp(),u=Dp[0][1],c=i+n.s3BucketName+"."+u;console.log("uploadS3:url",c),Dp.shift(),s.upload&&n.support_options&&(s.upload.onprogress=function(e){r.onProgress(e.loaded,e.total)});s.onreadystatechange=function(){if(4===s.readyState){var a=s.responseText||"{}";if((a=JSON.parse(a)).name=n.uniqueValue,a.filename=n.uploadFileName,a.uploadMethod=t.UploadMethod.AWS,console.log("UploadMethod:",t.UploadMethod),200===s.status||204===s.status)r.onCompleted(a);else if(Dp.length){var i=new FormData;i.set("file",e.get("file")),i.set("key",e.get("key")),i.set("token",e.get("token")),Gp[Dp[0][0]](i,n,r,o)}else r.onError("upload fail")}},s.open(n.method,c,!0);var l=n?n.s3Header:{},f=o&&o.type;"text/html"===f?a.set("Content-Disposition","inline;"):a.set("Content-Disposition","attachment;");a.set("Content-Type",f),a.set("x-amz-credential",l.s3Credential),a.set("x-amz-algorithm",l.s3Algorithm),a.set("x-amz-date",l.s3Date),a.set("policy",l.s3Policy),a.set("x-amz-signature",l.s3Signature),a.set("key",n.uploadFileName),a.set("file",o),s.send(a)},stc:function(e,n,r,o){new FormData;var a=new XMLHttpRequest;Bp();var s="https://"+Dp[0][1]+"/"+n.stcBucketName+"/"+n.uploadFileName;Dp.shift(),a.upload&&n.support_options&&(a.upload.onprogress=function(e){r.onProgress(e.loaded,e.total)});a.onreadystatechange=function(){if(4===a.readyState){var s=a.responseText||"{}";if((s=JSON.parse(s)).name=n.uniqueValue,s.filename=n.uploadFileName,s.uploadMethod=t.UploadMethod?t.UploadMethod.STC:"",200===a.status||204===a.status)r.onCompleted(s);else if(Dp.length){var i=new FormData;i.set("file",e.get("file")),i.set("key",e.get("key")),i.set("token",e.get("token")),Gp[Dp[0][0]](i,n,r,o)}else r.onError("upload fail")}},a.open("PUT",s,!0);var i=n?n.stcHeader:{};a.setRequestHeader("Content-Type",o.type),"text/html"===o.type?a.setRequestHeader("Content-Disposition","inline;"):a.setRequestHeader("Content-Disposition","attachment;");a.setRequestHeader("Authorization",i.stcAuthorization),a.setRequestHeader("x-amz-content-sha256",i.stcContentSha256),a.setRequestHeader("x-amz-date",i.stcDate),a.send(o)}},Dp=[],jp=5368709120,Hp="https://";function Fp(e,t){for(var n in e)t(n,e[n])}function Bp(){var e=Hp;return"http:"!==location.protocol&&"file:"!==location.protocol||(e="http://"),e}function qp(e,n,r){var o,a,s=e&&e.type||"text/plain",i=s.indexOf("image")>-1?1:4,u=Math.ceil(e.size/n.stc_chunk_size),c=n&&JSON.parse(n.ossConfig?n.ossConfig:"");Array.isArray(c)||(c=[]);var l=c.find((function(e){return Object.keys(e).includes("stc")})),f="uploads";ka.imClient.getFileToken(i,o,"POST",f).then((function(e){o=e.fileName,a="https://"+l.stc+"/"+n.stcBucketName+"/"+o,console.log("uploadStcMultipart:url",a);var t=new XMLHttpRequest;t.open("POST",a+"?"+f,!0),"text/html"===s?t.setRequestHeader("Content-Disposition","inline;"):t.setRequestHeader("Content-Disposition","attacshment;"),t.setRequestHeader("Authorization",e&&e.stcAuthorization),t.setRequestHeader("x-amz-content-sha256",e&&e.stcContentSha256),t.setRequestHeader("x-amz-date",e&&e.stcDate),t.setRequestHeader("Content-Type",s),t.send(),t.onreadystatechange=function(e){if(4===t.readyState){var n=t.response.match(/(?:<UploadId>)(\S*?)(?:<\/UploadId>)/);console.log("uploadId",n),200===t.status||204===t.status?function(e){for(var t=[],n=1;n<=u;n++)t.push(h(e,n));g(e,t)}(Array.isArray(n)&&n[1]):r.onError("uploadStcMultipart:did not get uploadId")}}}),(function(e){r.onError("uploadStcMultipart:"+e)}));var d=[],p=new Map;function g(c,l){l&&Array.isArray(l)&&0!==l.length&&Promise.all(l).then((function(){var l="uploadId="+c;if(p.size===u)ka.imClient.context.getFileToken(i,o,"POST",l).then((function(o){console.log("onSuccess",o),console.log("onSuccess:uploadId",c);var i=new XMLHttpRequest;i.open("POST",a+"?"+l,!0),i.setRequestHeader("Authorization",o&&o.stcAuthorization),i.setRequestHeader("x-amz-content-sha256",o&&o.stcContentSha256),i.setRequestHeader("x-amz-date",o&&o.stcDate),i.setRequestHeader("Content-Type",s);var u="<CompleteMultipartUpload xmlns='http://s3.amazonaws.com/doc/2006-03-01/'>",f=Array.from(p.keys()||[]).sort((function(e,t){return e-t}));console.log("keys",f),f.map((function(e){u+="<Part><ETag>".concat(p.get(e),"</ETag><PartNumber>").concat(e,"</PartNumber></Part>")})),u+="</CompleteMultipartUpload>",i.send(u),console.log("xml",u),i.onreadystatechange=function(){if(4===i.readyState)if(200===i.status||204===i.status){var o={};o.name=e.name,o.filename=n.uploadFileName,o.uploadMethod=t.UploadMethod.STC,r.onCompleted(o)}else r.onError("uploadStcMultipart:upload does not end")}}),(function(e){r.onError("uploadStcMultipart:"+e)}));else{var f,m=[],y=v(d);try{for(y.s();!(f=y.n()).done;){var C=f.value;m.push(h(c,C))}}catch(e){y.e(e)}finally{y.f()}g(c,m)}}),(function(e){console.error(e),r.onError("uploadStcMultipart: chunkFiles upload failed and those will reupload");var t,n=[],o=v(d);try{for(o.s();!(t=o.n()).done;){var a=t.value;n.push(h(c,a))}}catch(e){o.e(e)}finally{o.f()}g(c,n)}))}function h(t,r){return new Promise((function(u,c){var l="partNumber="+r+"&uploadId="+t;ka.imClient.context.getFileToken(i,o,"PUT",l).then((function(t){console.log("signature "+r+" onSuccess",t);var o=e&&e.slice((r-1)*n.stc_chunk_size,r*n.stc_chunk_size);console.log("fileChunk:size",o.size);var i=new XMLHttpRequest;i.open("PUT",a+"?"+l,!0),i.setRequestHeader("Authorization",t&&t.stcAuthorization),i.setRequestHeader("x-amz-content-sha256",t&&t.stcContentSha256),i.setRequestHeader("x-amz-date",t&&t.stcDate),i.setRequestHeader("Content-Type",s),i.send(o),i.onreadystatechange=function(){if(4===i.readyState)if(200===i.status||204===i.status){var e=i.getResponseHeader("etag");console.log("etag:"+r,e),p.set(r,e),u(e)}else d.includes(r)||d.push(r),c(r)}}),(function(e){console.log("getETags:签名验证失败"),d.includes(r)||d.push(r),c(r)}))}))}}var Vp={form:function(e,t){var n=new FormData;if(t.unique_key){var r=e.name.substr(e.name.lastIndexOf(".")),o=zp()+r;n.append(t.unique_key,o),t.uniqueValue=o}return n.append(t.file_data_name,e),Kp(t.multi_parmas,(function(e,t){n.append(e,t)})),n},json:function(e,t){var n={};if(t.unique_key){var r=e.name.substr(e.name.lastIndexOf(".")),o=zp()+r;n[t.unique_key]=o,t.uniqueValue=o}return n[t.file_data_name]=e,Kp(t.multi_parmas,(function(e,t){n[e]=t})),JSON.stringify(n)},data:function(e,t){return e}};function zp(){var e=(new Date).getTime();return"xxxxxx4xxxyxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))}function Kp(e,t){for(var n in e)t(n,e[n])}var Wp,Xp=0;function Yp(e){this.options=function(e){var t={domain:"",method:"POST",file_data_name:"file",unique_key:"key",base64_size:4194304,chunk_size:4194304,bos_chunk_size:4294967296,stc_chunk_size:10485760,headers:{},multi_parmas:{},query:{},support_options:!0,data:Vp.form,genUId:zp};if(!e||!e.domain)throw new Error("domain is null");for(var n in e)t[n]=e[n];return t}(e),this.setOptions=function(e){var t=this;Kp(e,(function(e,n){t.options[e]=n}))},console.log("options",e),this.upload=function(e,t){if(e){var n=this;!function(e,t,n){if(dp=e,pp=t,Dp=[],t.ossConfig){var r,o,a=JSON.parse(t.ossConfig),s="",i=[];a.forEach((function(e){var t=Number(e.p)-1;for(var n in e)"aliyun"===n&&(s=e[n]),"s3"===n&&(r=e[n]),"stc"===n&&(o=e[n]),"p"!==n&&(i[t]=[n,e[n]])})),i.forEach((function(e){e&&Dp.push(e)})),a.length!==Dp.length&&(Dp=[["qiniu",t.domain],["baidu",t.uploadHost.bos],["aliyun",s],["s3",r],["stc",o]])}else Dp=[["qiniu",t.domain],["baidu",t.uploadHost.bos]];var u;if(t.ossConfig){var c=t&&JSON.parse(t.ossConfig);Array.isArray(c)||(c=[]),u=c.find((function(e){return Object.keys(e).includes("stc")}))}if(u&&1===parseInt(u.p)&&e.size>=4194304)qp(e,t,n);else{var l=t.data(e,t);Gp[Dp[0][0]](l,t,n,e)}}(e,this.options,{onProgress:function(e,n,r){(Wp=e,r)?Wp=Xp+e/n*(n-Xp):Xp=Wp;t.onProgress(Wp,n)},onCompleted:function(e){t.onCompleted(e)},onError:function(e){t.onError(e)},onOpen:function(e){n.xhr=e}})}else t.onError("upload file is null.")},this.cancel=function(){this.xhr&&this.xhr.abort()}}var Jp,$p,Qp={init:function(e){return new Yp(e)},dataType:Vp,resize:function(e,t,n){e.type;var r=document.createElement("canvas"),o=new FileReader;o.readAsDataURL(e),o.onload=function(e){var o=e.target.result,a=new Image;a.src=o;var s=a.width,i=a.height,u=function(e,t){var n=1,r=e.width,o=t.maxWidth||0;o>0&&r>o&&(n=o/r);var a=e.height,s=t.maxHeight||0;if(s>0&&a>s){var i=s/a;n=Math.min(n,i)}var u=t.maxSize||0,c=Math.ceil(e.size/1e3);if(c>u){var l=u/c;n=Math.min(n,l)}return n}({width:s,height:i,size:e.total},t),c=o;u<1&&(c=function(e,t,n){r.width=t,r.height=n,r.getContext("2d").drawImage(e,0,0,t,n);var o="image/jpg";return r.toDataURL(o)}(a,s*u,i*u)),n(c)}}},Zp=function(e,t,n){var r=document.createElement("canvas"),o=r.getContext("2d"),a=new Image;a.onload=function(){var s=function(e,t,n){var r,o,a,s=e<t,i=0,u=0;return(s?t/e:e/t)>n.scale?(s?(o=100,u=((a=t/(r=e/100))-n.maxHeight)/2):(a=100,i=((o=e/(r=t/100))-n.maxWidth)/2),{w:o,h:a,x:-i,y:-u}):(s?(r=t/n.maxHeight,a=n.maxHeight,o=e/r):(r=e/n.maxWidth,o=n.maxWidth,a=t/r),{w:o,h:a,x:-i,y:-u})}(a.width,a.height,t);r.width=s.w>t.maxWidth?t.maxWidth:s.w,r.height=s.h>t.maxHeight?t.maxHeight:s.h,o.drawImage(a,s.x,s.y,s.w,s.h);try{var i=r.toDataURL(e.type,t.quality),u=new RegExp("^data:image/[^;]+;base64,");i=i.replace(u,""),n(i)}catch(e){throw new Error(e)}},a.src="string"==typeof e?"data:image/jpg;base64,"+e:function(e){var t=window.URL||window.webkitURL;return t?t.createObjectURL(e):""}(e)},eg=function(e,t){var n=e.file,r=e.compress;Zp(n,r,t)},tg=function(e,t){if(e.getToken)e.getToken((function(n,r){r=r||{},e.multi_parmas||(e.multi_parmas={}),e.multi_parmas.token=n,e.uploadHost||(e.uploadHost={}),e.uploadHost.bos=r.bos,e.ossConfig=r.ossConfig,e.bosHeader||(e.bosHeader={}),e.bosHeader.bosDate=r.bosDate,e.bosHeader.bosToken=r.bosToken,e.bosUploadPath=r.path,e.aliHeader={},e.aliHeader.osskeyId=r.osskeyId,e.aliHeader.ossPolicy=r.ossPolicy,e.aliHeader.ossSign=r.ossSign,e.ossBucketName=r.ossBucketName,e.uploadFileName=r.fileName,e.s3Header={},e.s3Header.s3Credential=r.s3Credential,e.s3Header.s3Algorithm=r.s3Algorithm,e.s3Header.s3Date=r.s3Date,e.s3Header.s3Policy=r.s3Policy,e.s3Header.s3Signature=r.s3Signature,e.s3BucketName=r.s3BucketName,e.stcHeader={},e.stcHeader.stcAuthorization=r.stcAuthorization,e.stcHeader.stcContentSha256=r.stcContentSha256,e.stcHeader.stcDate=r.stcDate,e.stcBucketName=r.stcBucketName,e.headers||(e.headers={}),e.base64&&(e.headers["Content-type"]="application/octet-stream",e.headers.Authorization="UpToken "+n),console.log("data",r);var o=Qp.init(e);t(o)}));else{e.headers||(e.headers={}),e.base64&&(e.headers["Content-type"]="application/octet-stream");var n=Qp.init(e);t(n)}},ng=function(e,t,n){t.upload(e.file,{onError:function(e){n.onError(e)},onProgress:function(e,t){n.onProgress(e,t)},onCompleted:function(t){t.filename||(t.filename=t.hash);var r=e.compressThumbnail||eg;e.compress?r(e,(function(e){t.thumbnail=e,n.onCompleted(t)})):n.onCompleted(t)}})},rg=function(e){var t=this;this.instance=e,this.upload=function(e,n){ng({file:e},t.instance,n)},this.cancel=function(){t.instance.cancel()}},og=function(e,t){var n=this;this.cfg=t,this.instance=e,this.upload=function(e,t){var r={file:e,compress:n.cfg};ng(r,n.instance,t)},this.cancel=function(){n.instance.cancel()}},ag=function(e,t){tg(e,(function(n){var r={maxHeight:e.maxHeight||160,maxWidth:e.maxWidth||160,quality:e.quality||.5,scale:e.scale||2.4},o=new og(n,r);t(o)}))},sg=function(e,t){tg(e,(function(e){var n=new rg(e);t(n)}))},ig=ag;Qp.dataType;function ug(e){return Jp=Jp||new AudioContext,new Promise((function(t,n){Jp.decodeAudioData(e,(function(e){t({duration:e.duration,length:e.length})}),n)}))}function cg(e,n,r,o,a){return t.assert("fileType",e,t.isValidFileType,!0),t.assert("filename",n,t.AssertRules.STRING),t.assert("saveName",r,t.AssertRules.STRING),t.assert("serverType",a,t.AssertRules.NUMBER),new Promise((function(s){ka.imClient.context.getFileUrl(e,n,r,o,a).then((function(e){s({code:t.ErrorCode.SUCCESS,data:e})})).catch((function(e){s({code:e})}))}))}function lg(e,t,n){return fg.apply(this,arguments)}function fg(){return fg=s(regeneratorRuntime.mark((function e(n,r,o){var a,s,i,u,c,l,f,d,p,g,h,m,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=o||{},r instanceof mu!=!1){e.next=4;break}return jn.warn("send message fail -> message parameter is not an instance of BaseMessage"),e.abrupt("return",_a.ILLGAL_PARAMS);case 4:return t.assert("conversation.channelId",null==n?void 0:n.channelId,t.AssertRules.CHANNEL_ID),u=n.conversationType,c=n.targetId,l=n.channelId,f="conversationType:"+u+",targetId:"+c,jn.debug("send message  ->"+f),(d=Object.assign(o,r)).channelId=l||"",e.next=12,ka.imClient.context.sendMessage(u,c,d);case 12:if(p=e.sent,g=p.code,h=p.data,g!==t.ErrorCode.SUCCESS){e.next=18;break}return m=Na(h),e.abrupt("return",{code:g,data:m});case 18:return jn.warn("send message fail ->"+g+":"+Pa[g]+","+f),v={isMentioned:!!o.isMentioned,content:r.content,messageType:r.messageType,isPersited:r.isPersited||!1,isCounted:r.isCounted||!1,disableNotification:!(null===(a=o)||void 0===a||!a.disableNotification),canIncludeExpansion:!(null===(s=o)||void 0===s||!s.canIncludeExpansion),expansion:(null===(i=o)||void 0===i?void 0:i.expansion)||null,conversationType:n.conversationType,targetId:n.targetId,channelId:n.channelId,senderUserId:ka.imClient.context.getCurrentUserId(),messageUId:"",messageDirection:t.MessageDirection.SEND,sentTime:(null==h?void 0:h.sentTime)||0,receivedTime:0,isStatusMessage:o.isStatusMessage||!1,receivedStatus:t.ReceivedStatus.UNREAD,isOffLineMessage:!1},u!==t.ConversationType.ULTRA_GROUP&&(v.isOffLineMessage=!1),e.abrupt("return",{code:g,msg:Pa[g],data:Na(v)});case 22:case"end":return e.stop()}}),e)}))),fg.apply(this,arguments)}function dg(e,n){return function(o,a,i,u){return new Promise((function(c){!function(e){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.FileType.FILE,a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(n=o===t.FileType.IMAGE?t.FileType.IMAGE:t.FileType.FILE,!$p){$p="upload.qiniup.com";var u=ka.imClient.context.getInfoFromCache();if(u&&u.ossConfig)try{var c=JSON.parse(u.ossConfig).find((function(e){return void 0!==e.qiniu}));c&&($p=c.qiniu)}catch(e){}}var l=r({domain:$p,getToken:function(e){ka.imClient.context.getFileToken(n).then((function(t){e(t.token,t)})).catch((function(e){a.onFail(e)}))}},i);(n===t.FileType.IMAGE?ig:sg)(l,(function(r){var i;r.upload(e,{onProgress:function(e,t){var n,r=Math.floor(e/t*100);null===(n=a.onProgress)||void 0===n||n.call(a,r)},onCompleted:(i=s(regeneratorRuntime.mark((function r(i){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:cg(n,i.filename,i.name,i,i.uploadMethod).then(function(){var r=s(regeneratorRuntime.mark((function r(s){var u,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(0===s.code){r.next=3;break}return a.onFail(s),r.abrupt("return");case 3:if((u=s.data).type=e.type,u.name=i.name||i.filename,o!==t.FileType.AUDIO){r.next=11;break}return"function"==typeof e.arrayBuffer?e.arrayBuffer().then(ug).then((function(e){Object.assign(u,e),a.onSuccess(u)}),(function(){a.onSuccess(u)})):((c=new FileReader).onload=function(){c.result?ug(c.result).then((function(e){Object.assign(u,e),a.onSuccess(u)}),(function(){a.onSuccess(u)})):a.onSuccess(u)},c.onerror=function(){u.duration=0,a.onSuccess(u)},c.readAsArrayBuffer(e)),r.abrupt("return");case 11:n===t.FileType.IMAGE&&(u.thumbnail=i.thumbnail);case 12:a.onSuccess(u);case 13:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()).catch((function(e){a.onFail(e)}));case 1:case"end":return r.stop()}}),r)}))),function(e){return i.apply(this,arguments)}),onError:function(e){a.onFail(e)}})}))}(a.file,e,{onProgress:null==i?void 0:i.onProgress,onSuccess:function(e){var t,r=(null==i||null===(t=i.onComplete)||void 0===t?void 0:t.call(i,{url:e.downloadUrl}))||n(e,a);lg(o,r,u).then(c)},onFail:function(e){c({code:t.ErrorCode.UPLOAD_FILE_FAILED,msg:e||t.ErrorCode[t.ErrorCode.UPLOAD_FILE_FAILED]})}},(null==u?void 0:u.thumbnailConfig)||{})}))}}var pg=dg(t.FileType.FILE,(function(e,t){return new Iu({name:e.name,size:t.file.size,type:t.file.type,fileUrl:e.downloadUrl,user:t.user,extra:t.extra})})),gg=dg(t.FileType.IMAGE,(function(e,t){return new yu({content:e.thumbnail,imageUri:e.downloadUrl,user:t.user,extra:t.extra})})),hg=dg(t.FileType.AUDIO,(function(e,t){return new Cu({remoteUrl:e.downloadUrl,duration:e.duration,type:e.type,user:t.user,extra:t.extra})})),mg=dg(t.FileType.SIGHT,(function(e,t){return new Ru({sightUrl:e.downloadUrl,content:t.thumbnail,duration:t.duration,size:t.file.size||e.size,name:t.name||e.name,user:t.user,extra:t.extra})}));function vg(){return vg=s(regeneratorRuntime.mark((function e(n,r){var o,a,s,i,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.assert("options.timestamp",null==r?void 0:r.timestamp,t.AssertRules.NUMBER),t.assert("options.count",null==r?void 0:r.count,t.AssertRules.NUMBER),t.assert("options.order",null==r?void 0:r.order,(function(e){return 0===e||1===e})),t.assert("conversation.channelId",null==n?void 0:n.channelId,t.AssertRules.CHANNEL_ID),o="conversationType:"+n.conversationType+",targetId:"+n.targetId,jn.debug("get history message ->"+o),e.next=8,ka.imClient.context.getHistoryMessage(n.conversationType,n.targetId,null==r?void 0:r.timestamp,null==r?void 0:r.count,null==r?void 0:r.order,null==n?void 0:n.channelId);case 8:if(a=e.sent,s=a.code,i=a.data,s!==t.ErrorCode.SUCCESS||!i){e.next=14;break}return u=i.list.map((function(e){return Na(e)})),e.abrupt("return",{code:s,data:{list:u,hasMore:i.hasMore}});case 14:return jn.warn("get history message fail ->"+s+":"+Pa[s]+","+o),e.abrupt("return",{code:s,msg:Pa[s]});case 16:case"end":return e.stop()}}),e)}))),vg.apply(this,arguments)}function yg(){return yg=s(regeneratorRuntime.mark((function e(n,r){var o,a,s,i,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.assert("options.timestamp",null==r?void 0:r.timestamp,t.AssertRules.NUMBER),t.assert("options.count",null==r?void 0:r.count,t.AssertRules.NUMBER),t.assert("options.order",null==r?void 0:r.order,(function(e){return 0===e||1===e})),t.assert("conversation.channelId",null==n?void 0:n.channelId,t.AssertRules.CHANNEL_ID),o="conversationType:"+n.conversationType+",targetId:"+n.targetId,jn.debug("get history message ->"+o),e.next=8,ka.imClient.context.getRemoteHistoryMessages(n.conversationType,n.targetId,(null==r?void 0:r.timestamp)||0,(null==r?void 0:r.count)||20,(null==r?void 0:r.order)||0,n.channelId||"");case 8:if(a=e.sent,s=a.code,i=a.data,s!==t.ErrorCode.SUCCESS||!i){e.next=14;break}return u=i.list.map((function(e){return Na(e)})),e.abrupt("return",{code:s,data:{list:u,hasMore:i.hasMore}});case 14:return jn.warn("get history message fail ->"+s+":"+Pa[s]+","+o),e.abrupt("return",{code:s,msg:Pa[s]});case 16:case"end":return e.stop()}}),e)}))),yg.apply(this,arguments)}function Cg(){return Cg=s(regeneratorRuntime.mark((function e(n,r,o,a){var s,i,u,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={targetId:n,conversationType:t.ConversationType.PRIVATE,channelId:a},i=new mu("RC:ReadNtf",{messageUId:r,lastMessageSendTime:o,type:1}),e.next=4,lg(s,i);case 4:if(u=e.sent,c=u.code,l=u.msg,0!==c){e.next=9;break}return e.abrupt("return",{code:c});case 9:return e.abrupt("return",{code:c,msg:l});case 10:case"end":return e.stop()}}),e)}))),Cg.apply(this,arguments)}function Rg(){return Rg=s(regeneratorRuntime.mark((function e(n,r,o){var a,s,i,u,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.assert("messageUId",r,t.AssertRules.STRING,!0),t.assert("channelId",o,t.AssertRules.CHANNEL_ID),a="messageUId:"+r+",targetId:"+n,jn.debug("send read receipt message ->"+a),s=new mu("RC:RRReqMsg",{messageUId:r}),i={targetId:n,conversationType:t.ConversationType.GROUP,channelId:o},e.next=8,lg(i,s);case 8:if(u=e.sent,c=u.code,l=u.msg,0!==c){e.next=13;break}return e.abrupt("return",{code:c});case 13:return e.abrupt("return",{code:c,msg:l});case 14:case"end":return e.stop()}}),e)}))),Rg.apply(this,arguments)}function Sg(){return(Sg=s(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("This method is deprecated, please use method sendReadReceiptResponseV2.");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Eg(){return Eg=s(regeneratorRuntime.mark((function e(n,r,o){var a,s,i,u,c,l,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.assert("targetId",n,t.AssertRules.STRING,!0),t.assert("messageList",r,t.AssertRules.OBJECT,!0),t.assert("channelId",o,t.AssertRules.CHANNEL_ID),Object.keys(r).forEach((function(e){t.assert(e,r[e],t.AssertRules.ARRAY)})),a={targetId:n,conversationType:t.ConversationType.GROUP,channelId:o},i=ka.imClient.context.getInfoFromCache(),0!==(u=(null==i?void 0:i.grpRRVer)||0)){e.next=14;break}return c=new mu("RC:RRRspMsg",{receiptMessageDic:r}),e.next=11,lg(a,c);case 11:s=e.sent,e.next=23;break;case 14:if(1!==u){e.next=23;break}if(l=[],Object.keys(r).forEach((function(e){r[e].forEach((function(e){-1===l.indexOf(e)&&l.push(e)}))})),l.length){e.next=20;break}return jn.warn("Error in parameter messageList."),e.abrupt("return",{code:t.ErrorCode.PARAMETER_ERROR});case 20:return e.next=22,ka.imClient.context.sendReadReceiptMessage(n,l,o);case 22:s=e.sent;case 23:if((f=s.code)!==t.ErrorCode.SUCCESS){e.next=26;break}return e.abrupt("return",{code:f});case 26:return jn.warn("send read receipt message fail ->"+f+":"+Pa[f]),e.abrupt("return",{code:f,msg:Pa[f]});case 28:case"end":return e.stop()}}),e)}))),Eg.apply(this,arguments)}function Ig(){return Ig=s(regeneratorRuntime.mark((function e(n,r){var o,a,s,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.assert("conversation.type",n.conversationType,t.AssertRules.NUMBER,!0),t.assert("conversation.targetId",n.targetId,t.AssertRules.STRING,!0),t.assert("lastMessageSendTime",r,t.AssertRules.NUMBER,!0),t.assert("conversation.channelId",null==n?void 0:n.channelId,t.AssertRules.CHANNEL_ID),o=new mu("RC:SRSMsg",{lastMessageSendTime:r}),e.next=7,lg(n,o);case 7:if(a=e.sent,s=a.code,i=a.msg,0!==s){e.next=12;break}return e.abrupt("return",{code:s});case 12:return e.abrupt("return",{code:s,msg:i});case 13:case"end":return e.stop()}}),e)}))),Ig.apply(this,arguments)}function Tg(){return Tg=s(regeneratorRuntime.mark((function e(n,r){var o,a,s,i,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.assert("options.messageUId",r.messageUId,t.AssertRules.STRING,!0),t.assert("options.sentTime",r.sentTime,t.AssertRules.NUMBER,!0),t.assert("options.disableNotification",null==r?void 0:r.disableNotification,t.AssertRules.BOOLEAN),t.assert("options.pushConfig",null==r?void 0:r.pushConfig,t.AssertRules.OBJECT),t.assert("conversation.channelId",null==n?void 0:n.channelId,t.AssertRules.CHANNEL_ID),o={user:r.user,channelId:n.channelId||"",disableNotification:null==r?void 0:r.disableNotification,pushConfig:null==r?void 0:r.pushConfig},a="conversationType:"+n.conversationType+",targetId:"+n.targetId+",messageUId:"+r.messageUId,jn.debug("recall message ->"+a),e.next=10,ka.imClient.context.recallMessage(n.conversationType,n.targetId,r.messageUId,r.sentTime,o);case 10:if(s=e.sent,i=s.code,u=s.data,i!==t.ErrorCode.SUCCESS||!u){e.next=17;break}return e.abrupt("return",{code:i,data:Na(u)});case 17:if(i!==t.ErrorCode.SUCCESS){e.next=19;break}return e.abrupt("return",{code:i});case 19:return jn.warn("recall message fail ->"+i+":"+Pa[i]+","+a),e.abrupt("return",{code:i,msg:Pa[i]});case 21:case"end":return e.stop()}}),e)}))),Tg.apply(this,arguments)}function bg(){return bg=s(regeneratorRuntime.mark((function e(n,r){var o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.assert("options",r,(function(e){return t.isArray(e)&&e.length}),!0),r.forEach((function(e){t.assert("options.messageUId",e.messageUId,t.AssertRules.STRING,!0),t.assert("options.sentTime",e.sentTime,t.AssertRules.NUMBER,!0),t.assert("options.messageDirection",e.messageDirection,(function(e){return 1===e||2===e}),!0)})),t.assert("conversation.channelId",null==n?void 0:n.channelId,t.AssertRules.CHANNEL_ID),o="conversationType:"+n.conversationType+",targetId:"+n.targetId,jn.debug("delete messages ->"+o),e.next=7,ka.imClient.context.deleteRemoteMessage(n.conversationType,n.targetId,r,n.channelId);case 7:if((a=e.sent)===t.ErrorCode.SUCCESS){e.next=11;break}return jn.warn("delete message fail ->"+a+":"+Pa[a]+","+o),e.abrupt("return",{code:a,msg:Pa[a]});case 11:return e.abrupt("return",{code:t.ErrorCode.SUCCESS});case 12:case"end":return e.stop()}}),e)}))),bg.apply(this,arguments)}function xg(){return xg=s(regeneratorRuntime.mark((function e(n,r){var o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.assert("options.timestamp",r,t.AssertRules.NUMBER,!0),t.assert("conversation.channelId",null==n?void 0:n.channelId,t.AssertRules.CHANNEL_ID),o="conversationType:"+n.conversationType+",targetId:"+n.targetId,jn.debug("clear message ->"+o),e.next=6,ka.imClient.context.deleteRemoteMessageByTimestamp(n.conversationType,n.targetId,r,n.channelId);case 6:if((a=e.sent)===t.ErrorCode.SUCCESS){e.next=10;break}return jn.warn("clear message ->"+a+":"+Pa[a]+","+o),e.abrupt("return",{code:a,msg:Pa[a]});case 10:return e.abrupt("return",{code:t.ErrorCode.SUCCESS});case 11:case"end":return e.stop()}}),e)}))),xg.apply(this,arguments)}function wg(){return wg=s(regeneratorRuntime.mark((function e(n,r){var o,a,s,i,u,c,l,f,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.assert("expansion",n,t.AssertRules.OBJECT,!0),t.assert("message",r,t.AssertRules.OBJECT,!0),o=r.conversationType,a=r.targetId,s=r.messageUId,i=r.canIncludeExpansion,u=r.expansion,c=r.channelId,l="conversationType:"+o+",targetId:"+a+",messageUId:"+s,jn.debug("update message expansion ->"+l),e.next=7,ka.imClient.context.sendExpansionMessage({conversationType:o,targetId:a,messageUId:s,expansion:n,canIncludeExpansion:i,originExpansion:u,channelId:c});case 7:if(f=e.sent,(d=f.code)===t.ErrorCode.SUCCESS){e.next=12;break}return jn.warn("update message expansion fail ->"+d+":"+Pa[d]+","+l),e.abrupt("return",{code:d,msg:Pa[d]});case 12:return e.abrupt("return",{code:d});case 13:case"end":return e.stop()}}),e)}))),wg.apply(this,arguments)}function Ag(){return Ag=s(regeneratorRuntime.mark((function e(n,r){var o,a,s,i,u,c,l,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.assert("keys",n,t.AssertRules.ARRAY,!0),t.assert("message",r,t.AssertRules.OBJECT,!0),o=r.conversationType,a=r.targetId,s=r.messageUId,i=r.canIncludeExpansion,u=r.channelId,c="conversationType:"+o+",targetId:"+a+",messageUId:"+s,jn.debug("remove message expansion ->"+c),e.next=7,ka.imClient.context.sendExpansionMessage({conversationType:o,targetId:a,messageUId:s,canIncludeExpansion:i,keys:n,channelId:u});case 7:if(l=e.sent,(f=l.code)===t.ErrorCode.SUCCESS){e.next=12;break}return jn.warn("remove message expansion fail ->"+f+":"+Pa[f]+","+c),e.abrupt("return",{code:f,msg:Pa[f]});case 12:return e.abrupt("return",{code:f});case 13:case"end":return e.stop()}}),e)}))),Ag.apply(this,arguments)}function Og(){return Og=s(regeneratorRuntime.mark((function e(n,r){var o,a,s,i,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.assert("typingContentType",r,t.AssertRules.STRING,!0),o="conversationType:"+n.conversationType+",targetId:"+n.targetId,jn.debug("send typing status message ->"+o),a={messageType:"RC:TypSts",content:{typingContentType:r},isStatusMessage:!0,channelId:n.channelId},e.next=6,ka.imClient.context.sendMessage(n.conversationType,n.targetId,a);case 6:if(s=e.sent,i=s.code,u=s.data,i!==t.ErrorCode.SUCCESS){e.next=11;break}return e.abrupt("return",{code:i,data:Na(u)});case 11:return jn.warn("send typing status message fail ->"+i+":"+Pa[i]+","+o),e.abrupt("return",{code:i,msg:Pa[i]});case 13:case"end":return e.stop()}}),e)}))),Og.apply(this,arguments)}function Ng(){return Ng=s(regeneratorRuntime.mark((function e(n,r,o){var a,s,i,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.assert("messageUId",r,t.AssertRules.STRING,!0),a="messageUId:"+r+",targetId:"+n,jn.debug("get message reader ->"+a),e.next=5,ka.imClient.context.getMessageReader(n,r,o);case 5:if(s=e.sent,i=s.code,u=s.data,i!==t.ErrorCode.SUCCESS){e.next=10;break}return e.abrupt("return",{code:i,data:u});case 10:return jn.warn("get message reader fail ->"+i+":"+Pa[i]+","+a),e.abrupt("return",{code:i,msg:Pa[i]});case 12:case"end":return e.stop()}}),e)}))),Ng.apply(this,arguments)}function Ug(){return Ug=s(regeneratorRuntime.mark((function e(n){var r,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.usingCppEngine()){e.next=2;break}return e.abrupt("return",{code:t.ErrorCode.NOT_SUPPORT,msg:Pa[t.ErrorCode.NOT_SUPPORT]});case 2:return t.assert("conversation.conversationType",n.conversationType,t.AssertRules.NUMBER,!0),t.assert("conversation.targetId",n.targetId,t.AssertRules.STRING,!0),t.assert("conversation.channelId",null==n?void 0:n.channelId,t.AssertRules.CHANNEL_ID),e.next=7,ka.imClient.context.getFirstUnreadMessage(n.conversationType,n.targetId,n.channelId);case 7:if(r=e.sent,o=r.code,a=r.data,o!==t.ErrorCode.SUCCESS){e.next=12;break}return e.abrupt("return",{code:o,data:a});case 12:return jn.warn("insertMessage ->code:"+o+",targetId:"+n.targetId),e.abrupt("return",{code:o,msg:Pa[o]});case 14:case"end":return e.stop()}}),e)}))),Ug.apply(this,arguments)}function Mg(){return Mg=s(regeneratorRuntime.mark((function e(n,r){var o,a,s,i,u,c,l,f,d,p,g,h,m,v,y,C,R,S=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=S.length>2&&void 0!==S[2]?S[2]:{},t.usingCppEngine()){e.next=3;break}return e.abrupt("return",{code:t.ErrorCode.NOT_SUPPORT,msg:Pa[t.ErrorCode.NOT_SUPPORT]});case 3:return a=r.senderUserId,s=r.messageType,i=r.content,u=r.messageDirection,c=r.messageUId,l=r.canIncludeExpansion,f=r.expansion,d=r.disableNotification,p=r.sentTime,g=r.sentStatus,jn.info("insertMessage ->targetId:"+n.targetId+",conversationType:"+n.conversationType),h=o.isUnread,m=o.searchContent,v={senderUserId:a,messageType:s,content:i,messageDirection:u,sentTime:p,sentStatus:g,searchContent:m,isUnread:h,messageUId:c,disableNotification:d,canIncludeExpansion:l,expansionMsg:JSON.stringify(f),channelId:n.channelId||""},e.next=9,ka.imClient.context.insertMessage(n.conversationType,n.targetId,v);case 9:if(y=e.sent,C=y.code,R=y.data,C!==t.ErrorCode.SUCCESS){e.next=14;break}return e.abrupt("return",{code:C,data:Na(R)});case 14:return jn.warn("insertMessage ->code:"+C+",targetId:"+n.targetId),e.abrupt("return",{code:C,msg:Pa[C]});case 16:case"end":return e.stop()}}),e)}))),Mg.apply(this,arguments)}function kg(){return kg=s(regeneratorRuntime.mark((function e(n){var r,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.usingCppEngine()){e.next=2;break}return e.abrupt("return",{code:t.ErrorCode.NOT_SUPPORT,msg:Pa[t.ErrorCode.NOT_SUPPORT]});case 2:return e.next=4,ka.imClient.context.getMessage(n);case 4:if(r=e.sent,o=r.code,a=r.data,o!==t.ErrorCode.SUCCESS){e.next=9;break}return e.abrupt("return",{code:o,data:Na(a)});case 9:return jn.warn("getMessage ->code:"+o+",messageId:"+n),e.abrupt("return",{code:o,msg:Pa[o]});case 11:case"end":return e.stop()}}),e)}))),kg.apply(this,arguments)}function _g(){return _g=s(regeneratorRuntime.mark((function e(n,r,o,a){var s,i,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.usingCppEngine()){e.next=2;break}return e.abrupt("return",{code:t.ErrorCode.NOT_SUPPORT,msg:Pa[t.ErrorCode.NOT_SUPPORT]});case 2:return t.assert("conversationType",n.conversationType,t.AssertRules.NUMBER,!0),t.assert("targetId",n.targetId,t.AssertRules.STRING,!0),t.assert("keyword",r,t.AssertRules.STRING,!0),t.assert("timestamp",o,t.AssertRules.NUMBER),t.assert("count",a,t.AssertRules.NUMBER),1,e.next=10,ka.imClient.context.searchMessageByContent(n.conversationType,n.targetId,r,o,a,1,n.channelId);case 10:if(s=e.sent,i=s.code,u=s.data,i!==t.ErrorCode.SUCCESS){e.next=17;break}return c=[],null!=u&&u.messages&&u.messages.length&&u.messages.forEach((function(e){return c.push(Na(e))})),e.abrupt("return",{code:i,data:{messages:c,count:null==u?void 0:u.count}});case 17:return jn.warn("searchMessages ->code:"+i+",targetId:"+n.targetId),e.abrupt("return",{code:i,msg:Pa[i]});case 19:case"end":return e.stop()}}),e)}))),_g.apply(this,arguments)}function Pg(){return Pg=s(regeneratorRuntime.mark((function e(n,r,o){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.usingCppEngine()){e.next=2;break}return e.abrupt("return",{code:t.ErrorCode.NOT_SUPPORT,msg:Pa[t.ErrorCode.NOT_SUPPORT]});case 2:return t.assert("conversationType",n.conversationType,t.AssertRules.NUMBER,!0),t.assert("targetId",n.targetId,t.AssertRules.STRING,!0),t.assert("timestamp",r,t.AssertRules.NUMBER,!0),t.assert("cleanSpace",o,t.AssertRules.BOOLEAN),e.next=8,ka.imClient.context.deleteMessagesByTimestamp(n.conversationType,n.targetId,r,o,n.channelId);case 8:if((a=e.sent)!==t.ErrorCode.SUCCESS){e.next=11;break}return e.abrupt("return",{code:a});case 11:return jn.warn("deleteLocalMessagesByTimestamp ->code:"+a+",targetId:"+n.targetId),e.abrupt("return",{code:a,msg:Pa[a]});case 13:case"end":return e.stop()}}),e)}))),Pg.apply(this,arguments)}function Lg(){return Lg=s(regeneratorRuntime.mark((function e(n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.usingCppEngine()){e.next=2;break}return e.abrupt("return",{code:t.ErrorCode.NOT_SUPPORT,msg:Pa[t.ErrorCode.NOT_SUPPORT]});case 2:return jn.info("clearMessages ->targetId:"+n.targetId+",conversationType:"+n.conversationType),e.next=5,ka.imClient.context.clearMessages(n.conversationType,n.targetId,n.channelId);case 5:if((r=e.sent)!==t.ErrorCode.SUCCESS){e.next=8;break}return e.abrupt("return",{code:r});case 8:return jn.warn("clearMessages ->code:"+r+",targetId:"+n.targetId),e.abrupt("return",{code:r,msg:Pa[r]});case 10:case"end":return e.stop()}}),e)}))),Lg.apply(this,arguments)}function Gg(){return Gg=s(regeneratorRuntime.mark((function e(n,r,o,a){var s,i,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.usingCppEngine()){e.next=2;break}return e.abrupt("return",{code:t.ErrorCode.NOT_SUPPORT,msg:Pa[t.ErrorCode.NOT_SUPPORT]});case 2:return jn.info("searchConversationByContent ->keyword:"+n),e.next=5,ka.imClient.context.searchConversationByContent(n,o,a,r);case 5:if(s=e.sent,i=s.code,u=s.data,i!==t.ErrorCode.SUCCESS){e.next=12;break}return e.abrupt("return",{code:i,data:u});case 12:return jn.warn("searchConversationByContent ->code:"+i+",keyword:"+n),e.abrupt("return",{code:i,msg:Pa[i]});case 14:case"end":return e.stop()}}),e)}))),Gg.apply(this,arguments)}function Dg(){return Dg=s(regeneratorRuntime.mark((function e(n,r){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.usingCppEngine()){e.next=2;break}return e.abrupt("return",{code:t.ErrorCode.NOT_SUPPORT,msg:Pa[t.ErrorCode.NOT_SUPPORT]});case 2:return jn.info("clearUnreadCountByTimestamp ->targetId:"+n.targetId+",conversationType:"+n.conversationType),e.next=5,ka.imClient.context.clearUnreadCountByTimestamp(n.conversationType,n.targetId,r,n.channelId);case 5:if((o=e.sent)!==t.ErrorCode.SUCCESS){e.next=8;break}return e.abrupt("return",{code:o});case 8:return jn.warn("clearUnreadCountByTimestamp ->code:"+o+",targetId:"+n.targetId),e.abrupt("return",{code:o,msg:Pa[o]});case 10:case"end":return e.stop()}}),e)}))),Dg.apply(this,arguments)}function jg(){return jg=s(regeneratorRuntime.mark((function e(n,r){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.usingCppEngine()){e.next=2;break}return e.abrupt("return",{code:t.ErrorCode.NOT_SUPPORT,msg:Pa[t.ErrorCode.NOT_SUPPORT]});case 2:return t.assert("messageId",n,t.AssertRules.NUMBER,!0),t.assert("receivedStatus",r,t.AssertRules.NUMBER,!0),jn.info("setMessageReceivedStatus ->messageId:"+n+",receivedStatus:"+r),e.next=7,ka.imClient.context.setMessageReceivedStatus(n,r);case 7:if((o=e.sent)!==t.ErrorCode.SUCCESS){e.next=12;break}return e.abrupt("return",{code:o});case 12:return jn.warn("setMessageReceivedStatus ->code:"+o+",messageId:"+n),e.abrupt("return",{code:o,msg:Pa[o]});case 14:case"end":return e.stop()}}),e)}))),jg.apply(this,arguments)}function Hg(){return Hg=s(regeneratorRuntime.mark((function e(n){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.assert("tag.tagId",n.tagId,t.AssertRules.STRING,!0),t.assert("tag.tagId",n.tagId,(function(e){return e.length<=10})),t.assert("tag.tagName",n.tagName,(function(e){return e.length<=15})),t.assert("tag.tagName",n.tagName,t.AssertRules.STRING,!0),jn.info("createTag ->tagId:"+n.tagId+",tagName:"+n.tagName),e.next=7,ka.imClient.context.createTag(n);case 7:if(r=e.sent,(o=r.code)!==t.ErrorCode.SUCCESS){e.next=11;break}return e.abrupt("return",{code:o});case 11:return jn.warn("createTag ->code:"+o+",tagId:"+n.tagId),e.abrupt("return",{code:o,msg:Pa[o]});case 13:case"end":return e.stop()}}),e)}))),Hg.apply(this,arguments)}function Fg(){return Fg=s(regeneratorRuntime.mark((function e(n){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.assert("tagId",n,t.AssertRules.STRING,!0),jn.info("removeTag ->tagId:"+n),e.next=4,ka.imClient.context.removeTag(n);case 4:if(r=e.sent,(o=r.code)!==t.ErrorCode.SUCCESS){e.next=8;break}return e.abrupt("return",{code:o});case 8:return jn.warn("removeTag ->code:"+o+",tagId:"+n),e.abrupt("return",{code:o,msg:Pa[o]});case 10:case"end":return e.stop()}}),e)}))),Fg.apply(this,arguments)}function Bg(){return Bg=s(regeneratorRuntime.mark((function e(n){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.assert("tag.tagId",n.tagId,t.AssertRules.STRING,!0),t.assert("tag.tagName",n.tagName,t.AssertRules.STRING,!0),t.assert("tag.tagName",n.tagName,(function(e){return e.length<=15})),jn.info("updateTag ->tagId:"+n.tagId+",tagName:"+n.tagName),e.next=6,ka.imClient.context.updateTag(n);case 6:if(r=e.sent,(o=r.code)!==t.ErrorCode.SUCCESS){e.next=10;break}return e.abrupt("return",{code:o});case 10:return jn.warn("updateTag ->code:"+o+",tagId:"+n.tagId),e.abrupt("return",{code:o,msg:Pa[o]});case 12:case"end":return e.stop()}}),e)}))),Bg.apply(this,arguments)}function qg(){return qg=s(regeneratorRuntime.mark((function e(){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ka.imClient.context.getTagList();case 2:if(n=e.sent,r=n.code,o=n.data,r!==t.ErrorCode.SUCCESS){e.next=7;break}return e.abrupt("return",{code:t.ErrorCode.SUCCESS,data:o});case 7:return jn.warn("getTagList ->code:"+r),e.abrupt("return",{code:r,msg:Pa[r]});case 9:case"end":return e.stop()}}),e)}))),qg.apply(this,arguments)}function Vg(){return Vg=s(regeneratorRuntime.mark((function e(n){var r,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.assert("conversationType",n.conversationType,t.AssertRules.NUMBER),t.assert("targetId",n.targetId,t.AssertRules.STRING),t.assert("channelId",n.channelId,t.AssertRules.CHANNEL_ID),jn.info("getTagsForConversation ->targetId:"+n.targetId+",conversationType:"+n.conversationType),e.next=6,ka.imClient.context.getTagsForConversation(n);case 6:if(r=e.sent,o=r.code,a=r.data,o!==t.ErrorCode.SUCCESS){e.next=11;break}return e.abrupt("return",{code:o,data:a});case 11:return e.abrupt("return",{code:o,msg:Pa[o]});case 12:case"end":return e.stop()}}),e)}))),Vg.apply(this,arguments)}function zg(){return zg=s(regeneratorRuntime.mark((function e(n,r){var o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.assert("tagId",n,t.AssertRules.STRING,!0),t.assert("conversations",r,t.AssertRules.ARRAY,!0),r.forEach((function(e){t.assert("conversation.conversationType",e.conversationType,t.AssertRules.NUMBER,!0),t.assert("conversation.targetId",e.targetId,t.AssertRules.STRING,!0),t.assert("conversation.channelId",e.channelId,t.AssertRules.CHANNEL_ID)})),jn.info("addTagForConversations ->tagId:"+n),e.next=6,ka.imClient.context.addTagForConversations(n,r);case 6:if(o=e.sent,(a=o.code)!==t.ErrorCode.SUCCESS){e.next=10;break}return e.abrupt("return",{code:a});case 10:return jn.warn("addTagForConversations ->code:"+a+",tagId:"+n),e.abrupt("return",{code:a,msg:Pa[a]});case 12:case"end":return e.stop()}}),e)}))),zg.apply(this,arguments)}function Kg(){return Kg=s(regeneratorRuntime.mark((function e(n,r){var o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.assert("tagId",n,t.AssertRules.STRING,!0),t.assert("conversations",r,t.AssertRules.ARRAY,!0),r.forEach((function(e){t.assert("conversation.conversationType",e.conversationType,t.AssertRules.NUMBER,!0),t.assert("conversation.targetId",e.targetId,t.AssertRules.STRING,!0),t.assert("conversation.channelId",e.channelId,t.AssertRules.CHANNEL_ID)})),jn.info("removeTagForConversations ->tagId:"+n),e.next=6,ka.imClient.context.removeTagForConversations(n,r);case 6:if(o=e.sent,(a=o.code)!==t.ErrorCode.SUCCESS){e.next=10;break}return e.abrupt("return",{code:a});case 10:return jn.warn("removeTagForConversations ->code:"+a+",tagId:"+n),e.abrupt("return",{code:a,msg:Pa[a]});case 12:case"end":return e.stop()}}),e)}))),Kg.apply(this,arguments)}function Wg(){return Wg=s(regeneratorRuntime.mark((function e(n,r){var o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.assert("conversation.conversationType",n.conversationType,t.AssertRules.NUMBER,!0),t.assert("conversation.targetId",n.targetId,t.AssertRules.STRING,!0),t.assert("conversation.channelId",n.channelId,t.AssertRules.CHANNEL_ID),t.assert("tagIds",r,t.AssertRules.ARRAY,!0),r.forEach((function(e){t.assert("tagId",e,t.AssertRules.STRING,!0)})),jn.info("removeTagsForConversation ->tagIds:"+r+",targetId:"+n.targetId+",conversationType:"+n.conversationType),e.next=8,ka.imClient.context.removeTagsForConversation(n,r);case 8:if(o=e.sent,(a=o.code)!==t.ErrorCode.SUCCESS){e.next=12;break}return e.abrupt("return",{code:a});case 12:return jn.warn("removeTagsForConversation ->code:"+a+",tagIds:"+r),e.abrupt("return",{code:a,msg:Pa[a]});case 14:case"end":return e.stop()}}),e)}))),Wg.apply(this,arguments)}function Xg(){return Xg=s(regeneratorRuntime.mark((function e(n,r){var o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.assert("tagId",n,t.AssertRules.STRING,!0),t.assert("conversations",r,t.AssertRules.ARRAY,!0),r.forEach((function(e){t.assert("conversation.conversationType",e.conversationType,t.AssertRules.NUMBER,!0),t.assert("conversation.targetId",e.targetId,t.AssertRules.STRING,!0),t.assert("conversation.channelId",e.channelId,t.AssertRules.CHANNEL_ID)})),jn.info("removeTagForConversations ->tagId:"+n),e.next=6,ka.imClient.context.removeTagForConversations(n,r);case 6:if(o=e.sent,(a=o.code)!==t.ErrorCode.SUCCESS){e.next=10;break}return e.abrupt("return",{code:a});case 10:return jn.warn("removeTagForConversations ->code:"+a+",tagId:"+n),e.abrupt("return",{code:a,msg:Pa[a]});case 12:case"end":return e.stop()}}),e)}))),Xg.apply(this,arguments)}function Yg(){return Yg=s(regeneratorRuntime.mark((function e(n,r,o){var a,s,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.assert("tagId",n,t.AssertRules.STRING,!0),t.assert("count",r,t.AssertRules.NUMBER,!0),t.assert("startTime",o,t.AssertRules.NUMBER,!0),jn.info("getConversationListByTag ->tagId:"+n),e.next=6,ka.imClient.context.getConversationListByTag(n,o,r);case 6:if(a=e.sent,s=a.code,i=a.data,s!==t.ErrorCode.SUCCESS){e.next=11;break}return e.abrupt("return",{code:s,data:i});case 11:return jn.warn("getConversationListByTag ->code:"+s+",tagId:"+n),e.abrupt("return",{code:s,msg:Pa[s]});case 13:case"end":return e.stop()}}),e)}))),Yg.apply(this,arguments)}function Jg(){return Jg=s(regeneratorRuntime.mark((function e(n,r){var o,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.assert("tagId",n,t.AssertRules.STRING,!0),t.assert("containMuted",r,t.AssertRules.BOOLEAN,!0),jn.info("getUnreadCountByTag ->tagId:"+n),e.next=5,ka.imClient.context.getUnreadCountByTag(n,r);case 5:if(o=e.sent,a=o.code,s=o.data,jn.info(a,s),a!==t.ErrorCode.SUCCESS){e.next=13;break}return e.abrupt("return",{code:a,data:s});case 13:return jn.warn("getUnreadCountByTag ->code:"+a+",tagId:"+n),e.abrupt("return",{code:a,msg:Pa[a]});case 15:case"end":return e.stop()}}),e)}))),Jg.apply(this,arguments)}function $g(){return $g=s(regeneratorRuntime.mark((function e(n,r,o){var a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.assert("tagId",n,t.AssertRules.STRING,!0),t.assert("conversation.targetId",r.targetId,t.AssertRules.STRING,!0),t.assert("conversation.conversationType",r.conversationType,t.AssertRules.NUMBER,!0),t.assert("conversation.channelId",r.channelId,t.AssertRules.CHANNEL_ID),t.assert("status.isTop",o,t.AssertRules.BOOLEAN,!0),jn.info("setConversationStatusInTag ->tagId:"+n+",targetId:"+r.targetId+",conversationType"+r.conversationType),e.next=8,ka.imClient.context.setConversationStatusInTag(n,r,{isTop:o});case 8:if(a=e.sent,(s=a.code)!==t.ErrorCode.SUCCESS){e.next=13;break}return e.abrupt("return",{code:s});case 13:return jn.warn("setConversationStatusInTag ->code:"+s+",tagId:"+n),e.abrupt("return",{code:s,msg:Pa[s]});case 15:case"end":return e.stop()}}),e)}))),$g.apply(this,arguments)}dg(t.FileType.COMBINE_HTML,(function(e,t){return new Eu({remoteUrl:e.downloadUrl,nameList:t.nameList,summaryList:t.summaryList,conversationType:t.conversationType,user:t.user,extra:t.extra})}));t.VersionManage.add("imlib","5.2.1"),t.VersionManage.validEngine("5.2.1")||jn.error("The current engine version '".concat(t.VersionManage.getInfo().engine,"' error，imlib required engine version at least '","5.2.1","'.")),Object.defineProperty(e,"ConnectionStatus",{enumerable:!0,get:function(){return t.ConnectionStatus}}),Object.defineProperty(e,"ConversationType",{enumerable:!0,get:function(){return t.ConversationType}}),Object.defineProperty(e,"ErrorCode",{enumerable:!0,get:function(){return t.ErrorCode}}),Object.defineProperty(e,"LogLevel",{enumerable:!0,get:function(){return t.LogLevel}}),Object.defineProperty(e,"MentionedType",{enumerable:!0,get:function(){return t.MentionedType}}),Object.defineProperty(e,"MessageBlockType",{enumerable:!0,get:function(){return t.MessageBlockType}}),Object.defineProperty(e,"MessageDirection",{enumerable:!0,get:function(){return t.MessageDirection}}),Object.defineProperty(e,"NotificationStatus",{enumerable:!0,get:function(){return t.NotificationStatus}}),Object.defineProperty(e,"ReceivedStatus",{enumerable:!0,get:function(){return t.ReceivedStatus}}),Object.defineProperty(e,"UploadMethod",{enumerable:!0,get:function(){return t.UploadMethod}}),e.BaseMessage=mu,e.CombineMessage=Eu,e.ConnectType={COMET:"comet",WEBSOCKET:"websocket"},e.FileMessage=Iu,e.GIFMessage=Tu,e.HQVoiceMessage=Cu,e.ImageMessage=yu,e.LocationMessage=xu,e.MessageType={TEXT:"RC:TxtMsg",VOICE:"RC:VcMsg",HQ_VOICE:"RC:HQVCMsg",IMAGE:"RC:ImgMsg",GIF:"RC:GIFMsg",RICH_CONTENT:"RC:ImgTextMsg",LOCATION:"RC:LBSMsg",FILE:"RC:FileMsg",SIGHT:"RC:SightMsg",COMBINE:"RC:CombineMsg",CHRM_KV_NOTIFY:"RC:chrmKVNotiMsg",LOG_COMMAND:"RC:LogCmdMsg",EXPANSION_NOTIFY:"RC:MsgExMsg",REFERENCE:"RC:ReferenceMsg",RECALL_MESSAGE_TYPE:"RC:RcCmd"},e.ReferenceMessage=wu,e.RichContentMessage=Au,e.SightMessage=Ru,e.TextMessage=Su,e.VoiceMessage=bu,e.__addSDKVersion=function(e,n){t.VersionManage.add(e,n)},e.addConversationsToTag=function(e,t){return zg.apply(this,arguments)},e.addEventListener=function(e,t,n){Ma.on(e,t,n)},e.addTag=function(e){return Hg.apply(this,arguments)},e.bindRTCRoomForChatroom=function(e){return uu.apply(this,arguments)},e.clearAllMessagesUnreadStatus=function(){return Ya.apply(this,arguments)},e.clearEventListeners=function(){Ma.clear()},e.clearHistoryMessages=function(e,t){return xg.apply(this,arguments)},e.clearMessages=function(e){return Lg.apply(this,arguments)},e.clearMessagesUnreadStatus=function(e){return Xa.apply(this,arguments)},e.clearTextMessageDraft=function(e){return za.apply(this,arguments)},e.clearUnreadCountByTimestamp=function(e,t){return Dg.apply(this,arguments)},e.connect=function(e,t){return Ha.apply(this,arguments)},e.deleteLocalMessagesByTimestamp=function(e,t,n){return Pg.apply(this,arguments)},e.deleteMessages=function(e,t){return bg.apply(this,arguments)},e.disconnect=function(){return Ma.context.disconnect()},e.forceRemoveChatRoomEntry=function(e,t){return ou.apply(this,arguments)},e.forceSetChatRoomEntry=function(e,t){return tu.apply(this,arguments)},e.getAllChatRoomEntries=function(e){return su.apply(this,arguments)},e.getAllConversationState=function(){return rs.apply(this,arguments)},e.getAllUnreadMentionedCount=function(){return ns.apply(this,arguments)},e.getBlockUltraGroupList=function(){return gs.apply(this,arguments)},e.getBlockedConversationList=function(){return Qa.apply(this,arguments)},e.getChatRoomEntry=function(e,t){return au.apply(this,arguments)},e.getChatRoomInfo=function(e,t){return Qi.apply(this,arguments)},e.getChatroomHistoryMessages=function(e,t){return iu.apply(this,arguments)},e.getConnectionStatus=function(){return Ma.context.getConnectionStatus()},e.getConversationList=function(e,t){return Fa.apply(this,arguments)},e.getConversationNotificationStatus=function(e){return $a.apply(this,arguments)},e.getConversationsFromTagByPage=function(e,t,n){return Yg.apply(this,arguments)},e.getCurrentUserId=function(){return Ma.context.getCurrentUserId()},e.getFileToken=function(e,n,r,o){return new Promise((function(a){ka.imClient.context.getFileToken(e,n,r,o).then((function(e){a({code:t.ErrorCode.SUCCESS,data:e})})).catch((function(e){a({code:e,msg:Pa[e]})}))}))},e.getFileUrl=cg,e.getFirstUnreadMessage=function(e){return Ug.apply(this,arguments)},e.getHistoryMessages=function(e,t){return vg.apply(this,arguments)},e.getMessage=function(e){return kg.apply(this,arguments)},e.getMessageReader=function(e,t,n){return Ng.apply(this,arguments)},e.getRemoteHistoryMessages=function(e,t){return yg.apply(this,arguments)},e.getServerTime=function(){return Ma.context.getServerTime()},e.getTags=function(){return qg.apply(this,arguments)},e.getTagsFromConversation=function(e){return Vg.apply(this,arguments)},e.getTextMessageDraft=function(e){return qa.apply(this,arguments)},e.getTopConversationList=function(){return es.apply(this,arguments)},e.getTotalUnreadCount=function(e,t){return Ka.apply(this,arguments)},e.getUltraGroupList=function(){return ps.apply(this,arguments)},e.getUltraGroupMessageListByMessageUId=function(e,t){return ms.apply(this,arguments)},e.getUltraGroupUnreadMentionedCountByTargetId=function(e){return Ss.apply(this,arguments)},e.getUnreadCount=function(e){return Wa.apply(this,arguments)},e.getUnreadCountByTag=function(e,t){return Jg.apply(this,arguments)},e.getUnreadMentionedCount=function(e){return ts.apply(this,arguments)},e.getUnreadMentionedMessages=function(e){if(!t.usingCppEngine())return{code:t.ErrorCode.NOT_SUPPORT,msg:Pa[t.ErrorCode.NOT_SUPPORT]};t.assert("conversationType",e.conversationType,t.AssertRules.NUMBER,!0),t.assert("targetId",e.targetId,t.AssertRules.STRING,!0);var n=ka.imClient.context.getUnreadMentionedMessages(e.conversationType,e.targetId),r=[];return n&&n.length&&n.forEach((function(e){return r.push(Na(e))})),{code:t.ErrorCode.SUCCESS,data:r}},e.init=function(e){Ma=Ma||new ka(e)},e.insertMessage=function(e,t){return Mg.apply(this,arguments)},e.installPlugin=function(e,t){var n;return null===(n=Ma)||void 0===n?void 0:n.context.install(e,t)},e.joinChatRoom=function(e,t){return Yi.apply(this,arguments)},e.joinExistChatRoom=function(e,t){return Ji.apply(this,arguments)},e.modifyMessage=function(e,t){return Rs.apply(this,arguments)},e.onceEventListener=function(e,t,n){Ma.once(e,t,n)},e.quitChatRoom=function(e){return $i.apply(this,arguments)},e.recallMessage=function(e,t){return Tg.apply(this,arguments)},e.registerMessageType=function(e,n,r,o,a){return t.assert("messageType",e,t.AssertRules.STRING,!0),t.assert("isPersited",n,t.AssertRules.BOOLEAN,!0),t.assert("isCounted",r,t.AssertRules.BOOLEAN,!0),t.assert("isStatusMessage",a,t.AssertRules.BOOLEAN,!1),ka.imClient.context.registerMessageType(e,n,r,o,a),vu(e,n,r)},e.removeAllExpansionForUltraGroupMessage=function(e){return Cs.apply(this,arguments)},e.removeChatRoomEntries=function(e,t){return ru.apply(this,arguments)},e.removeChatRoomEntry=function(e,t){return nu.apply(this,arguments)},e.removeConversation=function(e){return Ba.apply(this,arguments)},e.removeConversationsFromTag=function(e,t){return Kg.apply(this,arguments)},e.removeEventListener=function(e,t,n){Ma.off(e,t,n)},e.removeEventListeners=function(e){Ma.removeAll(e)},e.removeExpansionForUltraGroupMessage=function(e,t){return ys.apply(this,arguments)},e.removeMessageExpansionForKey=function(e,t){return Ag.apply(this,arguments)},e.removeTag=function(e){return Fg.apply(this,arguments)},e.removeTagFromConversations=function(e,t){return Xg.apply(this,arguments)},e.removeTagsFromConversation=function(e,t){return Wg.apply(this,arguments)},e.saveTextMessageDraft=function(e,t){return Va.apply(this,arguments)},e.searchConversationByContent=function(e,t,n,r){return Gg.apply(this,arguments)},e.searchMessages=function(e,t,n,r){return _g.apply(this,arguments)},e.sendFileMessage=pg,e.sendHQVoiceMessage=hg,e.sendImageMessage=gg,e.sendMessage=lg,e.sendReadReceiptMessage=function(e,t,n,r){return Cg.apply(this,arguments)},e.sendReadReceiptRequest=function(e,t,n){return Rg.apply(this,arguments)},e.sendReadReceiptResponse=function(e,t,n){return Sg.apply(this,arguments)},e.sendReadReceiptResponseV2=function(e,t,n){return Eg.apply(this,arguments)},e.sendSightMessage=mg,e.sendSyncReadStatusMessage=function(e,t){return Ig.apply(this,arguments)},e.sendTextMessage=function(e,t,n){return lg(e,new Su(t),n)},e.sendTypingStatusMessage=function(e,t){return Og.apply(this,arguments)},e.sendUltraGroupTypingStatus=function(e){return hs.apply(this,arguments)},e.setChatRoomEntries=function(e,t){return eu.apply(this,arguments)},e.setChatRoomEntry=function(e,t){return Zi.apply(this,arguments)},e.setConversationNotificationStatus=function(e,t){return Ja.apply(this,arguments)},e.setConversationToTop=function(e){return Za.apply(this,arguments)},e.setConversationToTopInTag=function(e,t,n){return $g.apply(this,arguments)},e.setMessageReceivedStatus=function(e,t){return jg.apply(this,arguments)},e.updateExpansionForUltraGroupMessage=function(e,t){return vs.apply(this,arguments)},e.updateMessageExpansion=function(e,t){return wg.apply(this,arguments)},e.updateTag=function(e){return Bg.apply(this,arguments)},Object.defineProperty(e,"__esModule",{value:!0})}));
